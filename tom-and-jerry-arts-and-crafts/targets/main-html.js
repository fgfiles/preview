/** Cooked with Flambe, https://getflambe.com */
'use strict';(function(){function t(a,b){function c(){}c.prototype=a;var d=new c,g;for(g in b)d[g]=b[g];b.toString!==Object.prototype.toString&&(d.toString=b.toString);return d}function gc(a){return a instanceof Array?function(){return u.iter(a)}:"function"==typeof a.iterator?z(a,a.iterator):a.iterator}function z(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=lc++);var c;null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__];null==c&&(c=function(){return c.method.apply(c.scope,
arguments)},c.scope=a,c.method=b,a.hx__closures__[b.__id__]=c);return c}var f={},ba=function(a,b){b=b.split("u").join("");this.r=RegExp(a,b)};f.EReg=ba;ba.__name__=!0;ba.prototype={match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)return this.r.m[a];throw"EReg::matched";},matchedPos:function(){if(null==this.r.m)throw"No string matched";return{pos:this.r.m.index,len:this.r.m[0].length}},
__class__:ba};var u=function(){};f.HxOverrides=u;u.__name__=!0;u.cca=function(a,b){var c=a.charCodeAt(b);return c!=c?void 0:c};u.substr=function(a,b,c){if(null!=b&&0!=b&&null!=c&&0>c)return"";null==c&&(c=a.length);0>b?(b=a.length+b,0>b&&(b=0)):0>c&&(c=a.length+c-b);return a.substr(b,c)};u.remove=function(a,b){var c=a.indexOf(b);if(-1==c)return!1;a.splice(c,1);return!0};u.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};
var Va=function(){};f.Lambda=Va;Va.__name__=!0;Va.array=function(a){for(var b=[],a=gc(a)();a.hasNext();){var c=a.next();b.push(c)}return b};Va.count=function(a,b){var c=0;if(null==b)for(var d=gc(a)();d.hasNext();)d.next(),c++;else for(d=gc(a)();d.hasNext();){var g=d.next();b(g)&&c++}return c};var Zb=function(){};f.IMap=Zb;Zb.__name__=!0;Math.__name__=!0;var Ea=function(){};f.Reflect=Ea;Ea.__name__=!0;Ea.field=function(a,b){try{return a[b]}catch(c){return null}};var o=function(){};f.Std=o;o.__name__=
!0;o.is=function(a,b){return K.__instanceof(a,b)};o.instance=function(a,b){return a instanceof b?a:null};o.string=function(a){return K.__string_rec(a,"")};o["int"]=function(a){return a|0};o.parseInt=function(a){var b=parseInt(a,10);if(0==b&&(120==u.cca(a,1)||88==u.cca(a,1)))b=parseInt(a);return isNaN(b)?null:b};var Wa=function(){this.b=""};f.StringBuf=Wa;Wa.__name__=!0;Wa.prototype={add:function(a){this.b+=o.string(a)},addSub:function(a,b,c){this.b=null==c?this.b+u.substr(a,b,null):this.b+u.substr(a,
b,c)},__class__:Wa};var Fa=function(){};f.StringTools=Fa;Fa.__name__=!0;Fa.startsWith=function(a,b){return a.length>=b.length&&u.substr(a,0,b.length)==b};Fa.fastCodeAt=function(a,b){return a.charCodeAt(b)};var Xa=function(){};f.Type=Xa;Xa.__name__=!0;Xa.getClass=function(a){return null==a?null:a instanceof Array&&null==a.__enum__?Array:a.__class__};Xa.resolveClass=function(a){a=f[a];return null==a||!a.__name__?null:a};Xa.resolveEnum=function(a){a=f[a];return null==a||!a.__ename__?null:a};f.XmlType=
{__ename__:!0,__constructs__:[]};var r=function(){};f.Xml=r;r.__name__=!0;r.parse=function(a){return ca.parse(a)};r.createElement=function(a){var b=new r;b.nodeType=r.Element;b._children=[];b._attributes=new T;b.set_nodeName(a);return b};r.createPCData=function(a){var b=new r;b.nodeType=r.PCData;b.set_nodeValue(a);return b};r.createCData=function(a){var b=new r;b.nodeType=r.CData;b.set_nodeValue(a);return b};r.createComment=function(a){var b=new r;b.nodeType=r.Comment;b.set_nodeValue(a);return b};
r.createDocType=function(a){var b=new r;b.nodeType=r.DocType;b.set_nodeValue(a);return b};r.createProcessingInstruction=function(a){var b=new r;b.nodeType=r.ProcessingInstruction;b.set_nodeValue(a);return b};r.createDocument=function(){var a=new r;a.nodeType=r.Document;a._children=[];return a};r.prototype={get_nodeName:function(){if(this.nodeType!=r.Element)throw"bad nodeType";return this._nodeName},set_nodeName:function(a){if(this.nodeType!=r.Element)throw"bad nodeType";return this._nodeName=a},
set_nodeValue:function(a){if(this.nodeType==r.Element||this.nodeType==r.Document)throw"bad nodeType";return this._nodeValue=a},get:function(a){if(this.nodeType!=r.Element)throw"bad nodeType";return this._attributes.get(a)},set:function(a,b){if(this.nodeType!=r.Element)throw"bad nodeType";this._attributes.set(a,b)},exists:function(a){if(this.nodeType!=r.Element)throw"bad nodeType";return this._attributes.exists(a)},elementsNamed:function(a){if(null==this._children)throw"bad nodetype";return{cur:0,
x:this._children,hasNext:function(){for(var b=this.cur,c=this.x.length;b<c;){var d=this.x[b];if(d.nodeType==r.Element&&d._nodeName==a)break;b++}this.cur=b;return b<c},next:function(){for(var b=this.cur,c=this.x.length;b<c;){var d=this.x[b];b++;if(d.nodeType==r.Element&&d._nodeName==a)return this.cur=b,d}return null}}},firstElement:function(){if(null==this._children)throw"bad nodetype";for(var a=0,b=this._children.length;a<b;){var c=this._children[a];if(c.nodeType==r.Element)return c;a++}return null},
addChild:function(a){if(null==this._children)throw"bad nodetype";null!=a._parent&&u.remove(a._parent._children,a);a._parent=this;this._children.push(a)},__class__:r};var y=function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b};f["flambe.math.Point"]=y;y.__name__=!0;y.prototype={distanceTo:function(a,b){return Math.sqrt(this.distanceToSquared(a,b))},distanceToSquared:function(a,b){var c=this.x-a,d=this.y-b;return c*c+d*d},__class__:y};var e=function(){};f["com.globz.Global"]=e;e.__name__=!0;
e.trace=function(a,b){null==b&&(b=!1);null!=e.vTrace&&e.vTrace.doTrace(a,b)};e.getScale=function(){return i.root._compMap.Sprite_1.scaleX._value};var sa=function(){};f["com.globz.Main"]=sa;sa.__name__=!0;sa.main=function(){i.init();var a=new j;a.scissor=new Ya(0,0,e.vSize.x,e.vSize.y);i.root.add(a);e.vMobile=i._platform.getTouch().get_supported()?!0:!1;e.vMobile&&i.root.add(new Za);a=F.fromAssets("loader");i._platform.loadAssetPack(a).get(sa.onLoaderPackDone)};sa.onLoaderPackDone=function(a){e.vLoaderPack=
a;sa.initConfig();e.vDirector=new $a;i.root.add(e.vDirector);e.vMain=new ab;e.vShowTrace&&(e.vTrace=new bb,i.root.add(e.vTrace));e.vMain.entryPoint()};sa.initConfig=function(){for(var a=r.parse(e.vLoaderPack.getFile("Config.xml").toString()).firstElement().firstElement().elementsNamed("preference");a.hasNext();){var b=a.next();"lang"==b.get("type")?e.vLang=b.get("info"):"logo"==b.get("type")&&(e.vLogo=b.get("info"))}};var Y=function(){};f["flambe.util.Disposable"]=Y;Y.__name__=!0;Y.prototype={__class__:Y};
var v=function(){this._flags=0;this.owner=this.next=null};f["flambe.Component"]=v;v.__name__=!0;v.__interfaces__=[Y];v.prototype={onAdded:function(){},onRemoved:function(){},onStart:function(){},onStop:function(){},onUpdate:function(){},dispose:function(){null!=this.owner&&this.owner.remove(this)},get_name:function(){return null},__class__:v};var ab=function(){this.vCurScenePackToLoad=!1;v.call(this)};f["com.globz.MainGame"]=ab;ab.__name__=!0;ab.__super__=v;ab.prototype=t(v.prototype,{get_name:function(){return"MainGame_4"},
entryPoint:function(){this.gotoScene(new cb(16711680));this.loadAndGo(new Ga)},gotoScene:function(a){var b=this,c=(new Ha(0.01,w.quadIn)).left();e.vDirector.unwindToScene(a.vEntity,c);a.vEntity._compMap.Scene_9.shown.connect(function(){b.vCurScenePackToLoad&&(b.vCurScenePackToLoad=!1,b.vLoadingScene.loadPack(b.vCurScene.getPackId()))}).once()},loadAndGo:function(a,b){null==b&&(b=!1);this.vDisposeAssets=b;e.trace("(v"+e.vVersion+") loadAndGo : "+a.vTitle);null!=this.vCurScene&&(this.vPrevScene=this.vCurScene);
this.vCurScene=a;i.volume.animateTo(0,0.3);this.loadAndGoDo()},loadAndGoDo:function(){null!=this.vPrevScene&&(this.vPrevScene.destroyAll(),this.vPrevScene=null);""==this.vCurScene.getPackId()&&this.gotoScene(this.vCurScene);this.vDisposeAssets&&(this.vDisposeAssets=!1,null!=e.vPack&&e.vPack.dispose(),null!=e.vAssetPack&&e.vAssetPack.dispose(),e.vPack=null,e.vAssetPack=null);this.vLoadingScene=e.vFirstLoading?new ta:new ta(!0);e.vFirstLoading=!0;this.gotoScene(this.vLoadingScene);this.vCurScenePackToLoad=
!0},onPackReady:function(){i.volume.animateTo(1,0.3);this.gotoScene(this.vCurScene);this.vCurScene.onPackReady()},loadAssetsAndGo:function(a,b,c){e.trace("(v"+e.vVersion+") loadAssetsAndGo : "+c.vTitle);null!=this.vCurScene&&(this.vPrevScene=this.vCurScene);this.vCurScene=c;this.vAssetsFolder=a;this.vAssetList=b;i.volume.animateTo(0,0.3);this.loadAssetsAndGoDo()},loadAssetsAndGoDo:function(){null!=this.vPrevScene&&(this.vPrevScene.destroyAll(),this.vPrevScene=null);this.vLoadingScene=new ta;this.gotoAssetsScene(this.vLoadingScene);
this.vCurScenePackToLoad=!0},gotoAssetsScene:function(a){var b=this,c=(new Ha(0.01,w.quadIn)).left();e.vDirector.unwindToScene(a.vEntity,c);a.vEntity._compMap.Scene_9.shown.connect(function(){b.vCurScenePackToLoad&&(b.vCurScenePackToLoad=!1,b.vLoadingScene.loadAssets(b.vAssetsFolder,b.vAssetList))}).once()},onAssetPackReady:function(){this.loadAndGoDo()},__class__:ab});var bb=function(){v.call(this)};f["com.globz.MyTrace"]=bb;bb.__name__=!0;bb.__super__=v;bb.prototype=t(v.prototype,{get_name:function(){return"MyTrace_3"},
onAdded:function(){var a=new ia(e.vLoaderPack,"font_trace/TraceFont");this.vText=new Ia(a,"");this.vText.set_align(W.Left);this.owner.addChild((new n).add(this.vText))},doTrace:function(a,b){null==b&&(b=!1);if(b)this.vText.set_text(a);else{var c=this.vText;c.set_text(c._text+a)}c=this.vText;c.set_text(c._text+"\n");600<this.vText._text.length&&this.vText.set_text(u.substr(this.vText._text,this.vText._text.length-600,600))},__class__:bb});var L=function(){this.vStageAdded=this.vShowTitle=!0;this.vEntity=
new n;this.vEntity.add(new db);this.vTitle="NoTitle"};f["com.globz.scenes.SceneXXX"]=L;L.__name__=!0;L.prototype={getPackId:function(){return""},onPackReady:function(){this.initManager();this.vDisposer=new eb;this.vEntity.add(this.vDisposer);e.vDev&&this.vDisposer.add(i._platform.getPointer().down.connect(z(this,this.onDownDebug)));this.allInitDone();if(this.vShowTitle){var a=new ia(e.vGlobalPack,"fonts/ButtonFont"),a=new Ia(a,this.vTitle);a.set_align(W.Center);a.x.set__(e.vSize.x/2);a.y.set__(20);
this.vEntity.addChild((new n).add(a))}},onDownDebug:function(){null},allInitDone:function(){},destroyAll:function(){this.vStageAdded=!1;null!=this.vDisposer&&this.vDisposer.dispose();this.vDisposer=null},initManager:function(){this.vManager=new fb(this);this.vEntity.add(this.vManager)},onUpdateInside:function(a){this.onUpdate(a)},onUpdate:function(){},delayedCall:function(a,b){var c=new X;null!=b&&c.run(new da([new ja(a),new $(b)]));this.vEntity.addChild((new n).add(c))},singleDelayedCall:function(a,
b){var c=new X;null!=b?(null==this.vDelayedCallEntity&&(this.vDelayedCallEntity=new n),c.run(new da([new ja(a),new $(b)])),this.vEntity.addChild(this.vDelayedCallEntity.add(c))):null!=this.vDelayedCallEntity&&(c=this.vDelayedCallEntity._compMap.Script_8,null!=c&&c.stopAll(),c=new X,c.run(new da),this.vEntity.addChild(this.vDelayedCallEntity.add(c)))},__class__:L};var cb=function(a){L.call(this);this.vTitle="FlatScreen";this.vEntity.add(new O(a,e.vSize.x,e.vSize.y))};f["com.globz.scenes.FlatScreen"]=
cb;cb.__name__=!0;cb.__super__=L;cb.prototype=t(L.prototype,{__class__:cb});var gb=function(){this.vPopupClick=!1;this.vPopupSpeed=0.25;this.vCurColor=16711680;L.call(this);this.vTitle="Paint"};f["com.globz.scenes.Paint"]=gb;gb.__name__=!0;gb.__super__=L;gb.prototype=t(L.prototype,{getPackId:function(){return"paint_"+e.vAssetFolder},allInitDone:function(){this.vShowTitle=!1;i._platform.getTouch().get_supported()?(e.vMobile=!0,this.vDisposer.add(i._platform.getTouch().down.connect(z(this,this.onTouchDown),
!1)),this.vDisposer.add(i._platform.getTouch().move.connect(z(this,this.onTouchMove),!1)),this.vDisposer.add(i._platform.getTouch().up.connect(z(this,this.onTouchUp),!1))):(e.vMobile=!1,this.vDisposer.add(i._platform.getPointer().down.connect(z(this,this.pointerDown))),this.vDisposer.add(i._platform.getPointer().move.connect(z(this,this.pointerMove))),this.vDisposer.add(i._platform.getPointer().up.connect(z(this,this.pointerUp))));e.vDevicePixelRatio=window.devicePixelRatio;var a=o.string(i._platform.getStage().orientation).toLowerCase();
"null"==a&&(a=window.innerWidth>window.innerHeight?"landscape":"portrait");if(2==e.vDevicePixelRatio){var b=window.screen.width,c=window.screen.height;window.screen.width<window.screen.height&&(b=c,c=window.screen.width);"landscape"==a?i._platform.getStage().get_width()<=b&&(e.vDevicePixelRatio=1):i._platform.getStage().get_width()<=c&&(e.vDevicePixelRatio=1)}this.vBG=new n;this.vEntity.addChild(this.vBG);this.vBG.add(new O(16711680,e.vSize.x,e.vSize.y));this.setBG("interface/desk");this.layerDraw=
new n;this.vEntity.addChild(this.layerDraw);this.layerInterface=new n;this.vEntity.addChild(this.layerInterface);e.vCanvas=i._platform.getRenderer().createTexture(e.vDrawingSize.x|0,e.vDrawingSize.y|0);a=new O(e.vColorPage,e.vDrawingSize.x/e.vDrawingScale|0,e.vDrawingSize.y/e.vDrawingScale|0);b=(new n).add(a);c=new A(e.vAssetPack.getTexture("bg_"+e.vBGNum));c=(new n).add(c);b.addChild(c);a.setScale(e.vDrawingScale);j.render(b,e.vCanvas.get_graphics());e.vGlobalCanvas=i._platform.getRenderer().createTexture(e.vDrawingSize.x/
e.vDrawingScale|0,e.vDrawingSize.y/e.vDrawingScale|0);e.vGlobalCanvas.get_graphics().drawTexture(e.vAssetPack.getTexture("bg_"+e.vBGNum),0,0);this.vCanvasSprite=new A(e.vCanvas);this.vCanvasSprite.disablePixelSnapping();this.vCanvasSprite.setXY(e.vDrawingPos.x,e.vDrawingPos.y);this.layerDraw.addChild((new n).add(this.vCanvasSprite));this.updateCanvasSize();a=new ka(e.vPack,"flump/cn_paint");this.vMPTools=new P(a);this.vMPTools.loop("tools_mc",!1);this.vSTools=new j;this.vETools=(new n).add(this.vMPTools).add(this.vSTools);
this.vEntity.addChild(this.vETools);b=this.vMPTools.movie._value;b.set_paused(!0);this.vPrint=o.instance(b.getLayer("print").getComponent("Sprite_1"),B);this.vPrintPos=new y(this.vPrint.getLocalMatrix().m02,this.vPrint.getLocalMatrix().m12);e.vMobile&&(this.vPrint.set_visible(!1),i.root.addChild((new n).add(new Ja(0.016666666666666666,z(this,this.checkPrintInvisible)))));this.vSave=o.instance(b.getLayer("save").getComponent("Sprite_1"),B);this.vSavePos=new y(this.vSave.getLocalMatrix().m02,this.vSave.getLocalMatrix().m12);
this.vQuit=o.instance(b.getLayer("quit").getComponent("Sprite_1"),B);this.vQuitPos=new y(this.vQuit.getLocalMatrix().m02,this.vQuit.getLocalMatrix().m12);b=window.document.getElementById("embedtarget");b.style.position="relative";this.vHTMLButton=window.document.createElement("button");this.vHTMLButton.id="button";this.vHTMLButton.style.position="absolute";this.vHTMLButton.style.opacity="0.1";this.vHTMLButton.style.width="64px";this.vHTMLButton.style.height="64px";this.vHTMLButton.style.left=o.string(this.vSave.getLocalMatrix().m02-
32)+"px";this.vHTMLButton.style.top=o.string(this.vSave.getLocalMatrix().m12-32)+"px";this.vHTMLButton.onclick=z(this,this.savePNG);b.appendChild(this.vHTMLButton);var d=0;this.vToolAnimList=[];this.vShadowAnimList=[];this.vPaintList=[];this.vPaintShadowList=[];for(var g=[0,2,1,3,7,4,5,6,8,9,10],c=1;0<c;)b=this.vMPTools.movie._value.getLayer("paint_"+(null==c?"null":""+c),!1),null!=b?(this.vPaintList[this.vPaintList.length]=o.instance(b._compMap.Sprite_1,B),this.vPaintShadowList[this.vPaintShadowList.length]=
this.addToolShadow(a,"paint_shadow",b._compMap.Sprite_1,this.vETools),this.addAnimation(b._compMap.Sprite_1,o.instance(b._compMap.Sprite_1,B).getLocalMatrix(),b,0,32,d+0.1*g[c],0.25),this.addAnimation(this.vPaintShadowList[this.vPaintShadowList.length-1]._compMap.Sprite_1,this.vPaintShadowList[this.vPaintShadowList.length-1]._compMap.Sprite_1.getLocalMatrix(),this.vPaintShadowList[this.vPaintShadowList.length-1],16,32,d+0.1*g[c],0.25),c++):c=0;d+=0.1*this.vPaintList.length;this.vEraserList=[];this.vEraserShadowList=
[];b=this.vMPTools.movie._value.getLayer("eraser",!1);null!=b&&(this.vEraserList[this.vEraserList.length]=o.instance(b._compMap.Sprite_1,B),this.vEraserShadowList[this.vEraserShadowList.length]=this.addToolShadow(a,"eraser_shadow",b._compMap.Sprite_1,this.vETools),this.addAnimation(b._compMap.Sprite_1,o.instance(b._compMap.Sprite_1,B).getLocalMatrix(),b,-32,32,d+0.1,0.25),this.addAnimation(this.vEraserShadowList[this.vEraserShadowList.length-1]._compMap.Sprite_1,this.vEraserShadowList[this.vEraserShadowList.length-
1]._compMap.Sprite_1.getLocalMatrix(),this.vEraserShadowList[this.vEraserShadowList.length-1],0,32,d+0.1,0.25));d+=0.1*this.vEraserList.length;this.vStampList=[];this.vStampTopList=[];this.vStampShadowList=[];for(c=1;0<c;)b=this.vMPTools.movie._value.getLayer("stamp_"+(null==c?"null":""+c),!1),null!=b?(this.vStampList[this.vStampList.length]=o.instance(b._compMap.Sprite_1,B),this.vStampShadowList[this.vStampShadowList.length]=this.addToolShadow(a,"stamp_shadow",b._compMap.Sprite_1,this.vETools),this.addAnimation(b._compMap.Sprite_1,
o.instance(b._compMap.Sprite_1,B).getLocalMatrix(),b,-32,0,d+0.1*c,0.25),this.addAnimation(this.vStampShadowList[this.vStampShadowList.length-1]._compMap.Sprite_1,this.vStampShadowList[this.vStampShadowList.length-1]._compMap.Sprite_1.getLocalMatrix(),this.vStampShadowList[this.vStampShadowList.length-1],-32,32,d+0.1*c,0.25),c++):c=0;for(c=1;0<c;)b=this.vMPTools.movie._value.getLayer("stamp_top_"+(null==c?"null":""+c),!1),null!=b?(this.vStampTopList[this.vStampTopList.length]=o.instance(b._compMap.Sprite_1,
B),c++):c=0;d+=0.1*this.vStampList.length;this.vFeltPenList=[];this.vFeltPenShadowList=[];g=[0,5,4,8,3,9,7,10,6,2,1];for(c=1;0<c;)b=this.vMPTools.movie._value.getLayer("feltpen_"+(null==c?"null":""+c),!1),null!=b?(this.vFeltPenList[this.vFeltPenList.length]=o.instance(b._compMap.Sprite_1,B),this.vFeltPenShadowList[this.vFeltPenShadowList.length]=this.addToolShadow(a,"feltpen_shadow",b._compMap.Sprite_1,this.vETools),this.addAnimation(b._compMap.Sprite_1,o.instance(b._compMap.Sprite_1,B).getLocalMatrix(),
b,0,-32,d+0.1*g[c],0.25),this.addAnimation(this.vFeltPenShadowList[this.vFeltPenShadowList.length-1]._compMap.Sprite_1,this.vFeltPenShadowList[this.vFeltPenShadowList.length-1]._compMap.Sprite_1.getLocalMatrix(),this.vFeltPenShadowList[this.vFeltPenShadowList.length-1],16,0,d+0.1*g[c],0.25),c++):c=0;d+=0.1*this.vFeltPenList.length;this.vBrushList=[];this.vBrushShadowList=[];g=[0,9,10,5,1,8,7,6,3,4,2];for(c=1;0<c;)b=this.vMPTools.movie._value.getLayer("brush_"+(null==c?"null":""+c),!1),null!=b?(this.vBrushList[this.vBrushList.length]=
o.instance(b._compMap.Sprite_1,B),this.vBrushShadowList[this.vBrushShadowList.length]=this.addToolShadow(a,"brush_shadow",b._compMap.Sprite_1,this.vETools),this.addAnimation(b._compMap.Sprite_1,o.instance(b._compMap.Sprite_1,B).getLocalMatrix(),b,0,-32,d+0.1*g[c],0.25),this.addAnimation(this.vBrushShadowList[this.vBrushShadowList.length-1]._compMap.Sprite_1,this.vBrushShadowList[this.vBrushShadowList.length-1]._compMap.Sprite_1.getLocalMatrix(),this.vBrushShadowList[this.vBrushShadowList.length-1],
16,0,d+0.1*g[c],0.25),c++):c=0;d+=0.1*this.vBrushList.length;b=this.vMPTools.movie._value.getLayer("popup",!1);null!=b&&(this.vPopup=o.instance(b._compMap.Sprite_1,B),this.vPopup.set_paused(!0),c=this.vPopup.getLocalMatrix(),this.vPopupPos=new y(c.m02,c.m12),this.vPopupRot=180*Math.atan2(c.m10,c.m11)/Math.PI);this.addAnimation(b._compMap.Sprite_1,o.instance(b._compMap.Sprite_1,B).getLocalMatrix(),b,256,0,d+0.1,0.5);this.vStickerList=[];this.vMSStickerList=[];this.vStickerShadowList=[];for(c=1;0<c;)if(b=
e.vPack.getTexture("sticker/sticker_"+(null==c?"null":""+c),!1),null!=b)this.removeBorder(b),d=new A(b),this.vStickerList[this.vStickerList.length]=d,b=this.vPopup.getLayer("sticker_"+(null==c?"null":""+c),!1),null!=b&&(this.vMSStickerList[this.vMSStickerList.length]=o.instance(b._compMap.Sprite_1,B),this.vMSStickerList[this.vMSStickerList.length-1].set_paused(!0),b.addChild((new n).add(d)),d.setScale(0.5),d.x.set__(0.25*-d.getNaturalWidth()),d.y.set__(0.25*-d.getNaturalHeight()),d.disablePixelSnapping(),
d.set_visible(!1),d=e.vPack.getTexture("sticker/shadow_"+(null==c?"null":""+c),!1),g=new A(d),d=(new n).add(g),g.setXY(0.5*-g.getNaturalWidth(),0.5*-g.getNaturalHeight()),g.setScale(1),g=(new n).add(new j),g._compMap.Sprite_1.setXY(-500,-500),g._compMap.Sprite_1.setXY(b._compMap.Sprite_1.x._value,b._compMap.Sprite_1.y._value),this.vStickerShadowList[this.vStickerShadowList.length]=g.addChild(d),b.addChild(this.vStickerShadowList[this.vStickerShadowList.length-1],!1)),c++;else break;this.vStickerWait=
!1;this.vMPGlow=new P(a);this.vMPGlow.loop("paint_glow");a=new j;a.set_visible(!1);this.vEntity.addChild((new n).add(this.vMPGlow).add(a));this.vPhase="paint";this.delayedCall(20,z(this,this.shakeStickers))},shakeStickers:function(){if(!this.vPopupClick){var a=this.vMPTools.movie._value.getLayer("popup",!1);null!=a&&this.addAnimation(a._compMap.Sprite_1,o.instance(a._compMap.Sprite_1,B).getLocalMatrix(),a,64,0,0.1,0.5);this.delayedCall(10,z(this,this.shakeStickers))}},addAnimation:function(a,b,c,
d,g,e,p){var h=[];h.push(new M(a.x,b.m02+d,p,w.sineOut));h.push(new M(a.y,b.m12+g,p,w.sineOut));d=[];d.push(new M(a.x,b.m02,p,w.sineIn));d.push(new M(a.y,b.m12,p,w.sineIn));a.x.set__(b.m02);a.y.set__(b.m12);a.rotation.set__(180*Math.atan2(b.m10,b.m00)/Math.PI);var f=new X;f.run(new Ka(new da([new ja(e),new $(function(){a.alpha.set__(0.99)}),new la(h),new la(d),new $(function(){f=null;a.alpha.set__(1)})]),1));c.add(f)},removeBorder:function(a){for(var b=a.readPixels(0,0,a.get_width(),a.get_height()),
c=0,d=b.length/4|0,g=b.b[0],e=b.b[1],p=b.b[2],h=0;h<d;)h++,b.b[c]==g&&b.b[c+1]==e&&b.b[c+2]==p&&b.fill(c+3,1,1),c+=4;a.writePixels(b,0,0,a.get_width(),a.get_height())},addToolShadow:function(a,b,c,d){c=c.getLocalMatrix();a=new P(a);a.loop(b);a.movie._value.set_paused(!0);b=new j;b.disablePointer();b.disablePixelSnapping();b.x.set__(c.m02);b.y.set__(c.m12);b.rotation.set__(180*Math.atan2(c.m10,c.m00)/Math.PI);b.getLocalMatrix().set(c.m00,c.m10,c.m01,c.m11,c.m02+e.vShadowDecalXY.x,c.m12+e.vShadowDecalXY.y);
d.addChild((new n).add(a).add(b),!1);return a.owner},pointerDown:function(a){this.mDown(a.viewX,a.viewY)},pointerMove:function(a){this.mMove(a.viewX,a.viewY)},pointerUp:function(a){this.mUp(a.viewX,a.viewY)},onTouchDown:function(a){this.mDown(a.viewX,a.viewY)},onTouchMove:function(a){this.mMove(a.viewX,a.viewY)},onTouchUp:function(a){this.mUp(a.viewX,a.viewY)},mDown:function(a,b){this.vDown=!0;this.vStickerWait=!1;if(!this.vQuitWait){var c;if("paint"==this.vPhase)if(this.vCanvasSprite.contains(a,
b))null!=this.vCurTool&&(this.vLocalXY=new y,this.vCanvasSprite.getViewMatrix().inverseTransform(a,b,this.vLocalXY),this.vCurTool.onMDown(this.vLocalXY),this.updateToolPosition(a,b));else if(c=new y,this.vEntity._compMap.Sprite_1.getViewMatrix().inverseTransform(a,b,c),null!=j.hitTest(this.vPrint.owner,c.x,c.y))this.print(),this.resetCurrentTool();else if(null!=j.hitTest(this.vQuit.owner,c.x,c.y))this.quit(),this.resetCurrentTool();else{for(var d=!1,g=0,m=this.vPaintList.length;g<m;){var p=g++;if(null!=
j.hitTest(this.vPaintList[p].owner,c.x,c.y)&&1==this.vPaintShadowList[p]._compMap.Sprite_1.alpha._value){d=!0;"paint_glow"!=this.vMPGlow.movie._value.symbol._name&&this.vMPGlow.loop("paint_glow");this.selectNewTool(this.vPaintList,this.vPaintShadowList,p,a,b,-45);this.setFill();break}}if(!d){g=0;for(m=this.vBrushList.length;g<m;)if(p=g++,null!=j.hitTest(this.vBrushList[p].owner,c.x,c.y)&&1==this.vBrushShadowList[p]._compMap.Sprite_1.alpha._value){d=!0;"brush_glow"!=this.vMPGlow.movie._value.symbol._name&&
this.vMPGlow.loop("brush_glow");this.selectNewTool(this.vBrushList,this.vBrushShadowList,p,a,b,-45);this.setBrush();break}}if(!d){g=0;for(m=this.vFeltPenList.length;g<m;)if(p=g++,null!=j.hitTest(this.vFeltPenList[p].owner,c.x,c.y)&&1==this.vFeltPenShadowList[p]._compMap.Sprite_1.alpha._value){d=!0;"feltpen_glow"!=this.vMPGlow.movie._value.symbol._name&&this.vMPGlow.loop("feltpen_glow");this.selectNewTool(this.vFeltPenList,this.vFeltPenShadowList,p,a,b,-45);this.setFeltPen();break}}if(!d){g=0;for(m=
this.vEraserList.length;g<m;)if(p=g++,null!=j.hitTest(this.vEraserList[p].owner,c.x,c.y)&&1==this.vEraserShadowList[p]._compMap.Sprite_1.alpha._value){d=!0;"eraser_glow"!=this.vMPGlow.movie._value.symbol._name&&this.vMPGlow.loop("eraser_glow");this.selectNewTool(this.vEraserList,this.vEraserShadowList,p,a,b,-45);this.setEraser(e.vBGNum);break}}if(!d){g=0;for(m=this.vStampList.length;g<m;)if(p=g++,null!=j.hitTest(this.vStampList[p].owner,c.x,c.y)&&1==this.vStampShadowList[p]._compMap.Sprite_1.alpha._value){d=
!0;"stamp_glow"!=this.vMPGlow.movie._value.symbol._name&&this.vMPGlow.loop("stamp_glow");this.selectNewTool(this.vStampList,this.vStampShadowList,p,a,b,0,"stamp");this.setStamp(p);break}}!d&&null!=j.hitTest(this.vPopup.owner,c.x,c.y)&&1==this.vPopup.alpha._value&&(d=!0,this.resetCurrentTool(),this.showGlow(!1),this.vPopupClick=!0,this.vPopup.owner.add(new X),this.vPhase="popup_move",this.vPopup.owner.parent.addChild(this.vPopup.owner),this.vPopup.owner._compMap.Sprite_1.x.animate(this.vPopupPos.x,
472,this.vPopupSpeed,w.sineOut),this.vPopup.owner._compMap.Sprite_1.y.animate(this.vPopupPos.y,264,this.vPopupSpeed,w.sineOut),this.vPopup.owner._compMap.Sprite_1.rotation.animate(this.vPopupRot,0,this.vPopupSpeed,w.sineOut),this.singleDelayedCall(this.vPopupSpeed,z(this,this.activatePopup)));d||(this.resetCurrentTool(),this.showGlow(!1))}else if("popup"==this.vPhase)if(c=new y,this.vEntity._compMap.Sprite_1.getViewMatrix().inverseTransform(a,b,c),null!=j.hitTest(this.vPopup.owner,c.x,c.y)){d=0;for(g=
this.vStickerList.length;d<g;)if(m=d++,this.vStickerShadowList[m].parent._compMap.Sprite_1.getViewMatrix().inverseTransform(a,b,c),null!=j.hitTest(this.vStickerShadowList[m],c.x,c.y)){this.selectNewTool(this.vMSStickerList,this.vStickerShadowList,m,a,b,0,"sticker");this.setSticker(m);e.vMobile||this.updateToolPosition(a,b);this.hidePopup();break}}else this.hidePopup();else"quit"==this.vPhase&&(c=new y,this.vQuitPanel.owner._compMap.Sprite_1.getViewMatrix().inverseTransform(a,b,c),d=this.vQuitPanel.movie._value.getLayer("red"),
null!=d&&null!=j.hitTest(d,c.x,c.y)?(this.vPhase="end",e.vCanvas.dispose(),e.vGlobalCanvas.dispose(),e.vMain.loadAndGo(new Ga(!0),!0)):(d=this.vQuitPanel.movie._value.getLayer("green"),null!=d&&null!=j.hitTest(d,c.x,c.y)&&(this.vPhase="paint",this.vEntity.removeChild(this.vQuitPanel.owner),this.vQuitPanel.dispose(),this.vQuitPanel=null,this.vQuitWait=!0,window.document.getElementById("embedtarget").appendChild(this.vHTMLButton))))}},mMove:function(a,b){if(!("paint"!=this.vPhase||this.vQuitWait)&&
null!=this.vCurTool){var c=new y;this.vCanvasSprite.getViewMatrix().inverseTransform(a,b,c);c.x|=0;c.y|=0;e.vMobile&&this.vDown?this.updateToolPosition(a,b):e.vMobile||this.updateToolPosition(a,b);if(this.vCanvasSprite.contains(a,b))this.vCurTool.onMMove(c);else if("sticker"!=this.vCurTool.vType)this.vCurTool.onMUp(c)}},mUp:function(a,b){this.vDown=!1;if("paint"==this.vPhase)if(this.vQuitWait)this.vQuitWait=!1;else if(null!=this.vCurTool){this.vLocalXY=new y;this.vCanvasSprite.getViewMatrix().inverseTransform(a,
b,this.vLocalXY);if(this.vCanvasSprite.contains(a,b))if("sticker"==this.vCurTool.vType){if(!this.vStickerWait)this.vCurTool.onMUp(this.vLocalXY)}else this.vCurTool.onMUp(this.vLocalXY);e.vMobile?"sticker"!=this.vCurTool.vType?(this.resetCurrentTool(!1),this.showGlow()):(this.vCurrentTool.getLocalMatrix().m02=e.vSitckerMobilePos.x,this.vCurrentTool.getLocalMatrix().m12=e.vSitckerMobilePos.y,null!=this.vCurrentShadow&&(this.vCurrentShadow._compMap.Sprite_1.getLocalMatrix().m02=0,this.vCurrentShadow._compMap.Sprite_1.getLocalMatrix().m12=
0)):this.updateToolPosition(a,b)}},hidePopup:function(){this.vPhase="popup_move";this.vStickerWait=!0;this.vPopup.owner._compMap.Sprite_1.x.animate(472,this.vPopupPos.x,0.5*this.vPopupSpeed,w.sineOut);this.vPopup.owner._compMap.Sprite_1.y.animate(264,this.vPopupPos.y,0.5*this.vPopupSpeed,w.sineOut);this.vPopup.owner._compMap.Sprite_1.rotation.animate(0,this.vPopupRot,0.5*this.vPopupSpeed,w.sineOut);this.singleDelayedCall(0.5*this.vPopupSpeed,z(this,this.deactivatePopup))},activatePopup:function(){this.vPhase=
"popup"},deactivatePopup:function(){this.vPhase="paint"},selectNewTool:function(a,b,c,d,g,m,p){null==p&&(p="");null==m&&(m=-45);this.resetCurrentTool();e.vColorList.length>c&&(this.vCurColor=e.vColorList[c]);a[c].owner.add(new X);b[c].add(new X);var h=a[c].getLocalMatrix();"stamp"==p?(this.vCurrentTool=this.vStampTopList[c],this.vCurrentTool.set_visible(!0),a[c].set_visible(!1),this.vCurrentTool.getLocalMatrix().m02=a[c].getLocalMatrix().m02,this.vCurrentTool.getLocalMatrix().m12=a[c].getLocalMatrix().m12):
this.vCurrentTool=a[c];this.vCurrentToolMatrix=h.clone();this.vCurrentTool.owner._compMap.Sprite_1.disablePointer();this.vCurrentToolParent=this.vCurrentTool.owner.parent;this.vCurrentToolRotation=m;this.vETools.addChild(this.vCurrentTool.owner);null!=b&&0<b.length&&(this.vCurrentShadow=b[c],this.vCurrentShadow._compMap.Sprite_1.set_visible(!0),this.vCurrentShadowMatrix=b[c]._compMap.Sprite_1.getLocalMatrix().clone());e.vMobile&&"sticker"==p&&(this.vCurrentTool.getLocalMatrix().m02=e.vSitckerMobilePos.x,
this.vCurrentTool.getLocalMatrix().m12=e.vSitckerMobilePos.y,null!=this.vCurrentShadow&&(this.vCurrentShadow._compMap.Sprite_1.getLocalMatrix().m02=0,this.vCurrentShadow._compMap.Sprite_1.getLocalMatrix().m12=0,this.vCurrentShadow._compMap.Sprite_1.set_visible(!0)));e.vMobile?"sticker"!=p&&"stamp"!=p?this.showGlow():this.showGlow(!1):this.updateToolPosition(d,g)},updateToolPosition:function(a,b){var c;null!=this.vCurrentTool&&(c=new y,this.vEntity._compMap.Sprite_1.getViewMatrix().inverseTransform(a,
b,c),this.vDown?this.vCurrentTool.setXY(c.x,c.y):this.vCurrentTool.setXY(c.x+e.vShadowDecalXY.x,c.y-e.vShadowDecalXY.y),this.vCurrentTool.setRotation(this.vCurrentToolRotation),null!=this.vCurrentShadow&&(null!=this.vCurTool&&"sticker"==this.vCurTool.vType?(this.vCurrentShadow.parent._compMap.Sprite_1.getViewMatrix().inverseTransform(a,b,c),this.vDown?this.vCurrentShadow._compMap.Sprite_1.setXY(c.x,c.y):this.vCurrentShadow._compMap.Sprite_1.setXY(c.x+e.vShadowDecalXY.x,c.y-e.vShadowDecalXY.y)):this.vDown?
this.vCurrentShadow._compMap.Sprite_1.setXY(c.x,c.y):this.vCurrentShadow._compMap.Sprite_1.setXY(c.x+e.vShadowDecalXY.x,c.y),0!=this.vCurrentToolRotation&&this.vCurrentShadow._compMap.Sprite_1.setRotation(this.vCurrentToolRotation+10)),e.vMobile&&(this.showGlow(!1),null!=this.vCurTool&&"stamp"==this.vCurTool.vType&&(this.vCurrentTool.set_visible(!0),this.vStampList[this.vCurTool.vID].set_visible(!1))))},showGlow:function(a){null==a&&(a=!0);a?null!=this.vCurrentTool&&(this.vMPGlow.owner._compMap.Sprite_1.getLocalMatrix().set(this.vCurrentToolMatrix.m00,
this.vCurrentToolMatrix.m10,this.vCurrentToolMatrix.m01,this.vCurrentToolMatrix.m11,this.vCurrentToolMatrix.m02,this.vCurrentToolMatrix.m12),this.vMPGlow.owner._compMap.Sprite_1.set_visible(!0)):this.vMPGlow.owner._compMap.Sprite_1.set_visible(!1)},resetCurrentTool:function(a){null==a&&(a=!0);null!=this.vCurrentTool&&(this.vCurrentToolParent.addChild(this.vCurrentTool.owner),this.vCurrentTool.getLocalMatrix().set(this.vCurrentToolMatrix.m00,this.vCurrentToolMatrix.m10,this.vCurrentToolMatrix.m01,
this.vCurrentToolMatrix.m11,this.vCurrentToolMatrix.m02,this.vCurrentToolMatrix.m12),null!=this.vCurTool&&"stamp"==this.vCurTool.vType&&(this.vCurrentTool.set_visible(!1),this.vStampList[this.vCurTool.vID].set_visible(!0)),a&&(this.vCurrentTool.set_pointerEnabled(!0),this.vCurrentTool=null),null!=this.vCurrentShadow&&(this.vCurrentShadow._compMap.Sprite_1.getLocalMatrix().set(this.vCurrentShadowMatrix.m00,this.vCurrentShadowMatrix.m10,this.vCurrentShadowMatrix.m01,this.vCurrentShadowMatrix.m11,this.vCurrentShadowMatrix.m02,
this.vCurrentShadowMatrix.m12),a&&(this.vCurrentShadow=null)));a&&null!=this.vCurTool&&(this.vCurTool.destroy(),this.vCurTool=null)},checkPrintInvisible:function(){0!=(this.vPrint._flags&2)&&(this.vPrint.set_visible(!1),i.root.addChild((new n).add(new Ja(0.016666666666666666,z(this,this.checkPrintInvisible)))))},setSticker:function(a){null!=this.vCurTool&&this.vCurTool.destroy();this.vCurTool=new hb("sticker/sticker_"+(a+1))},setStamp:function(a){null!=this.vCurTool&&this.vCurTool.destroy();this.vCurTool=
new ib("stamp/stamp_"+(a+1),a)},setBrush:function(){if(null==this.vCurTool||"brush"!=this.vCurTool.vType)null!=this.vCurTool&&this.vCurTool.destroy(),this.vCurTool=new ua("brush/brush_1",!1);this.vCurTool.setColor(this.vCurColor)},setFeltPen:function(){if(null==this.vCurTool||"feltpen"!=this.vCurTool.vType)null!=this.vCurTool&&this.vCurTool.destroy(),this.vCurTool=new ua("brush/brush_3",!0);this.vCurTool.setColor(this.vCurColor)},setEraser:function(a){if(null==this.vCurTool||"eraser"!=this.vCurTool.vType)null!=
this.vCurTool&&this.vCurTool.destroy(),this.vCurTool=new ua("brush/brush_2",!0,"bg_"+a,e.vAssetPack);this.vCurTool.setColor(16777215)},setFill:function(){if(null==this.vCurTool||"fill"!=this.vCurTool.vType)null!=this.vCurTool&&this.vCurTool.destroy(),this.vCurTool=new jb;this.vCurTool.setColor(this.vCurColor)},onUpdate:function(){if(null!=i.root._compMap.ScaleAuto_0&&e.getScale()!=e.vLastScale){e.vLastScale=e.getScale();var a=e.getScale()/e.vDevicePixelRatio;this.vHTMLButton.style.width=o.string(64*
a|0)+"px";this.vHTMLButton.style.height=o.string(64*a|0)+"px";this.vHTMLButton.style.left=o.string((this.vSave.getLocalMatrix().m02-32)*a|0)+"px";this.vHTMLButton.style.top=o.string((this.vSave.getLocalMatrix().m12-32)*a|0)+"px";this.vHTMLButton.onclick=z(this,this.savePNG)}this.updateCanvasSize()},updateCanvasSize:function(){var a=e.getScale(),a=1.25<a?2:1;if(e.vScaleSaved!=a){e.vScaleSaved=a;var b=Math.round(e.vDrawingSize.x*a);2048<b&&(b=2048);var c=Math.round(b*e.vDrawingSize.y/e.vDrawingSize.x),
d=this.vCanvasSprite.owner;d.remove(this.vCanvasSprite);var g=new y(this.vCanvasSprite.x._value,this.vCanvasSprite.y._value);e.vCanvas=i._platform.getRenderer().createTexture(b,c);this.vCanvasSprite=new A(e.vCanvas);this.vCanvasSprite.setXY(g.x,g.y);this.vCanvasSprite.setScale(1/a);d.add(this.vCanvasSprite);b=new O(e.vColorPage,e.vGlobalCanvas.get_width(),e.vGlobalCanvas.get_height());c=(new n).add(b);d=new A(e.vGlobalCanvas);d=(new n).add(d);c.addChild(d);b.setScale(a*e.vDrawingScale);j.render(c,
e.vCanvas.get_graphics())}},setBG:function(a){this.vBG.add(new A(e.vPack.getTexture(a)))},savePNG:function(){if("popup"!=this.vPhase){this.vSave.x.animate(this.vSavePos.x+5,this.vSavePos.x,0.25,w.sineIn);this.vSave.y.animate(this.vSavePos.y+5,this.vSavePos.y,0.25,w.sineIn);this.resetCurrentTool();this.vBTInterface=!0;var a=new A(e.vLoaderPack.getTexture("logo/boomerang")),b=window.document.createElement("canvas");b.width=e.vGlobalCanvas.get_width();b.height=e.vGlobalCanvas.get_height()+a.texture.get_height();
var c=new U(b,!0),d=new O(-16777216,e.vGlobalCanvas.get_width(),e.vGlobalCanvas.get_height()),d=(new n).add(d),g=new O(-1,e.vGlobalCanvas.get_width(),a.texture.get_height());a.y.set__(g.y.set__(e.vGlobalCanvas.get_height()));d.addChild((new n).add(g));d.addChild((new n).add(a));g=new A(e.vGlobalCanvas);g=(new n).add(g);d.addChild(g);j.render(d,c);a.dispose();e.vMobile?(b=b.toDataURL("image/png"),window.open(b,"_blank")):(a=window.open("about:blank","image from canvas"),null!=a&&null!=a.document&&
a.document.write("<img src='"+o.string(b.toDataURL("image/png"))+"' alt='from canvas'/>"))}},print:function(){if(!e.vMobile){this.vPrint.x.animate(this.vPrintPos.x+5,this.vPrintPos.x,0.25,w.sineIn);this.vPrint.y.animate(this.vPrintPos.y+5,this.vPrintPos.y,0.25,w.sineIn);this.vBTInterface=!0;var a=new A(e.vLoaderPack.getTexture("logo/boomerang")),b=window.document.createElement("canvas");b.width=e.vGlobalCanvas.get_height()+a.texture.get_height();b.height=e.vGlobalCanvas.get_width();var c=new U(b,
!0),d=new O(-16777216,e.vGlobalCanvas.get_width(),e.vGlobalCanvas.get_height()),g=(new n).add(d),m=new O(-1,e.vGlobalCanvas.get_width(),a.texture.get_height());a.y.set__(m.y.set__(e.vGlobalCanvas.get_height()));g.addChild((new n).add(m));g.addChild((new n).add(a));m=new A(e.vGlobalCanvas);m=(new n).add(m);d.rotation.set__(90);d.x.set__(e.vGlobalCanvas.get_height()+a.texture.get_height());g.addChild(m);j.render(g,c);a=b.toDataURL("image/png;base64");a='<!DOCTYPE html><html><head></ head > <body><div style="width:210mm; height:297mm"> '+
('<img src="'+a+'" style="max-width: 100%;  max-height: 100%; display:block; margin:auto;">')+"</div></body></html>";b=window.open("","","width="+e.vGlobalCanvas.get_height()+",height="+e.vGlobalCanvas.get_width()+"");null!=b&&(b.document.open(),b.document.write(a),b.document.close(),b.focus(),b.print(),b.close())}},quit:function(){this.vPhase="quit";window.document.getElementById("embedtarget").removeChild(this.vHTMLButton);if(null==this.vQuitPanel){var a=new ka(e.vPack,"flump/cn_paint");this.vQuitPanel=
new P(a);this.vQuitPanel.loop("quit_panel");a=new j;a.setXY(0.5*e.vSize.x,0.5*e.vSize.y);this.vEntity.addChild((new n).add(this.vQuitPanel).add(a))}this.vQuitPanel.owner._compMap.Sprite_1.scaleX.animate(0,1,0.25,w.sineIn);this.vQuitPanel.owner._compMap.Sprite_1.scaleY.animate(0,1,0.25,w.sineIn)},__class__:gb});var ta=function(a){null==a&&(a=!1);L.call(this);this.vFlumpAnimation=a;this.vTitle="Preloading";this.buildLoading()};f["com.globz.scenes.Preloading"]=ta;ta.__name__=!0;ta.__super__=L;ta.prototype=
t(L.prototype,{buildLoading:function(){var a=new ka(e.vLoaderPack,"flump/loading");this.vMoviePlayer=new P(a);this.vMoviePlayer.loop("anim_1");this.vMoviePlayer.movie._value.set_paused(!0);a=new j;this.vEntity.addChild((new n).add(this.vMoviePlayer).add(a));this.showBarPercent(0)},loadPack:function(a){var b=this;null!=e.vPack&&e.vPack.dispose();var a=F.fromAssets(a),c=i._platform.loadAssetPack(a);c.progressChanged.connect(function(){b.onLoadProgress(c._progress/c._total)});c.get(z(this,this.onPackLoaded))},
onLoadProgress:function(a){this.showBarPercent(a)},showBarPercent:function(a){0>a?a=0:1<a&&(a=1);var b;this.vMoviePlayer.movie._value.getLayer("bar3",!1);b=this.vMoviePlayer.movie._value.getLayer("bar3",!1).getComponent("Sprite_1");null!=b&&(b=b.getLocalMatrix(),b.set(0.7*a,b.m10,b.m01,b.m11,b.m02,b.m12))},onPackLoaded:function(a){e.vPack=a;if(this.vFlumpAnimation)this.vMoviePlayer.loop("anim_3"),this.vMoviePlayer.play("anim_2"),this.singleDelayedCall(2,z(this,this.animEnd));else e.vMain.onPackReady()},
animEnd:function(){e.vMain.onPackReady()},loadAssets:function(a,b){var c=this;null!=e.vAssetPack&&e.vAssetPack.dispose();var d=new F;d.set_localBase("assets/"+a);for(var g=0;g<b.length;)d.add(b[g],b[g+1]),g+=2;var m=i._platform.loadAssetPack(d);m.progressChanged.connect(function(){c.onLoadProgress(m._progress/m._total)});m.get(z(this,this.onAssetsLoaded))},onAssetsLoaded:function(a){e.vAssetPack=a;e.vMain.onAssetPackReady()},__class__:ta});var Ga=function(a){null==a&&(a=!1);this.vRollOver=-1;L.call(this);
this.vTitle="Splash";this.vOpen=a};f["com.globz.scenes.Splash"]=Ga;Ga.__name__=!0;Ga.__super__=L;Ga.prototype=t(L.prototype,{getPackId:function(){return"splash_"+e.vAssetFolder},allInitDone:function(){this.vShowTitle=!1;this.vPhase="title";var a=F.fromAssetsLocalized("title_"+e.vLang);i._platform.loadAssetPack(a).get(z(this,this.packLoaded))},destroyAll:function(){L.prototype.destroyAll.call(this);null!=this.vTitlePack&&this.vTitlePack.dispose();this.vTitlePack=null},packLoaded:function(a){this.vTitlePack=
a;this.vPhase="cover";i._platform.getTouch().get_supported()?(e.vMobile=!0,this.vDisposer.add(i._platform.getTouch().down.connect(z(this,this.onTouchDown),!1))):(e.vMobile=!1,this.vDisposer.add(i._platform.getPointer().down.connect(z(this,this.pointerDown))));var b=new ka(e.vPack,"flump/splash");this.vBG=new P(b);this.vBG.loop("bg");this.vBG.movie._value.set_paused(!0);this.vEntity.addChild((new n).add(this.vBG));this.vThumbs=new P(b);this.vThumbs.loop("thumbs");this.vThumbs.movie._value.set_paused(!0);
this.vEntity.addChild((new n).add(this.vThumbs));this.vCover=new P(b);this.vOpen?(this.vCover.loop("cover_3"),this.vPhase="thumbs"):(this.vCover.loop("cover_1"),a=this.vCover.movie._value.getLayer("cover"),"no"!=e.vLogo&&(this.vMPLogo=new P(b),this.vMPLogo.loop("logo_"+e.vLogo),this.vMPLogo.movie._value.set_paused(!0),a.addChild((new n).add(this.vMPLogo))),b=new ka(this.vTitlePack,"flump/title_"+e.vLang),this.vMPTitle=new P(b),this.vMPTitle.loop("title"),this.vMPTitle.movie._value.set_paused(!0),
a.addChild((new n).add(this.vMPTitle)));this.vEntity.addChild((new n).add(this.vCover));a=0;this.vThumbList=[];for(var b=1,c;0<b;)if(c=e.vPack.getTexture("thumbs/bg_"+(null==b?"null":""+b),!1),null!=c){var a=c.get_width(),d=new A(c);d.setXY(0.5*-d.getNaturalWidth(),0.5*-d.getNaturalHeight());c=this.vThumbs.movie._value.getLayer("t_"+(null==b?"null":""+b),!1);null!=c&&(c.addChild((new n).add(d)),this.vThumbList[this.vThumbList.length]=c);b++}else break;this.vThumbList2=[];b=1;for(d=e.vPack.getTexture("thumbs/bg_shadow",
!1);0<b;)if(c=e.vPack.getTexture("thumbs/bg_"+(null==b?"null":""+b)+"b",!1),null!=c){this.vThumbScale=a/c.get_width();var g=new A(c);g.setXY(o["int"](0.5*-c.get_width()),o["int"](0.5*-c.get_height()));var m=new A(d);m.setXY(o["int"](0.9*-d.get_width()),o["int"](0.9*-d.get_height()));m.setScale(2);c=this.vThumbs.movie._value.getLayer("t_"+(null==b?"null":""+b),!1);if(null!=c){var p=(new n).add(new j);p._compMap.Sprite_1.setXY(c._compMap.Sprite_1.getLocalMatrix().m02,c._compMap.Sprite_1.getLocalMatrix().m12);
p._compMap.Sprite_1.setScale(this.vThumbScale);c.parent.addChild(p);p.addChild((new n).add(m));p.addChild((new n).add(g));this.vThumbList2[this.vThumbList2.length]=p;p._compMap.Sprite_1.set_visible(!1);g.disablePointer()}b++}else break;if(this.vOpen){a=0;for(b=this.vThumbList.length;a<b;)c=a++,d=0.4+0.1*c,this.addAnimation(this.vThumbList[c]._compMap.Sprite_1,this.vThumbList[c]._compMap.Sprite_1.getLocalMatrix(),this.vThumbList[c],0,-16,1,d,0.25)}},onUpdate:function(){if("thumbs"==this.vPhase){var a;
a=new y;this.vEntity._compMap.Sprite_1.getViewMatrix().inverseTransform(i._platform.getPointer().get_x(),i._platform.getPointer().get_y(),a);for(var b=!1,c=0,d=this.vThumbList.length;c<d;){var g=c++;null==this.vThumbList[g]._compMap.Script_8&&1>=this.vThumbList[g]._compMap.Sprite_1.scaleX._value&&null!=j.hitTest(this.vThumbList[g],a.x,a.y)&&(b=!0,this.vRollOver!=g&&(-1!=this.vRollOver&&(this.vThumbList2[this.vRollOver]._compMap.Sprite_1.set_visible(!1),this.vThumbList2[this.vRollOver]._compMap.Sprite_1.setScale(this.vThumbScale),
this.vThumbList[this.vRollOver]._compMap.Sprite_1.alpha.set__(1),this.vThumbList[this.vRollOver]._compMap.Sprite_1.setScale(1/this.vThumbScale),this.vThumbList[this.vRollOver]._compMap.Sprite_1.scaleX.animate(1/this.vThumbScale,1,0.1,w.sineIn),this.vThumbList[this.vRollOver]._compMap.Sprite_1.scaleY.animate(1/this.vThumbScale,1,0.1,w.sineIn)),this.vRollOver=g,this.vThumbList[this.vRollOver]._compMap.Sprite_1.alpha.set__(0),this.vThumbList2[this.vRollOver]._compMap.Sprite_1.set_visible(!0),this.vThumbList2[this.vRollOver]._compMap.Sprite_1.setScale(this.vThumbScale),
this.vThumbList2[this.vRollOver]._compMap.Sprite_1.scaleX.animate(this.vThumbScale,1,0.1,w.sineOut),this.vThumbList2[this.vRollOver]._compMap.Sprite_1.scaleY.animate(this.vThumbScale,1,0.1,w.sineOut),this.vThumbList2[this.vRollOver].parent.addChild(this.vThumbList2[this.vRollOver])))}-1!=this.vRollOver&&!1==b&&(this.vThumbList2[this.vRollOver]._compMap.Sprite_1.set_visible(!1),this.vThumbList2[this.vRollOver]._compMap.Sprite_1.setScale(this.vThumbScale),this.vThumbList[this.vRollOver]._compMap.Sprite_1.alpha.set__(1),
this.vThumbList[this.vRollOver]._compMap.Sprite_1.setScale(1/this.vThumbScale),this.vThumbList[this.vRollOver]._compMap.Sprite_1.scaleX.animate(1/this.vThumbScale,1,0.1,w.sineIn),this.vThumbList[this.vRollOver]._compMap.Sprite_1.scaleY.animate(1/this.vThumbScale,1,0.1,w.sineIn),this.vRollOver=-1)}},pointerDown:function(a){this.mDown(a.viewX,a.viewY)},onTouchDown:function(a){this.mDown(a.viewX,a.viewY)},mDown:function(a,b){var c;c=new y;this.vEntity._compMap.Sprite_1.getViewMatrix().inverseTransform(a,
b,c);if("cover"==this.vPhase){if(null!=j.hitTest(this.vCover.owner,c.x,c.y)){this.vCover.loop("cover_3");this.vCover.play("cover_2");c=this.vCover.movie._value.getLayer("cover");null!=this.vMPLogo&&c.addChild(this.vMPLogo.owner);null!=this.vMPTitle&&c.addChild(this.vMPTitle.owner);this.vPhase="thumbs";c=0;for(var d=this.vThumbList.length;c<d;){var g=c++,m=0.8+0.1*g;this.addAnimation(this.vThumbList[g]._compMap.Sprite_1,this.vThumbList[g]._compMap.Sprite_1.getLocalMatrix(),this.vThumbList[g],0,-16,
1,m,0.25)}}}else if("thumbs"==this.vPhase){d=0;for(g=this.vThumbList.length;d<g;)if(m=d++,null!=j.hitTest(this.vThumbList[m],c.x,c.y)){this.vPhase="end";e.vBGNum=m+1;e.vMain.loadAssetsAndGo("bg_"+e.vAssetFolder,["bg_"+e.vBGNum,"bg_"+e.vBGNum+".png"],new gb);break}}},addAnimation:function(a,b,c,d,g,e,p,h){var f=[];f.push(new M(a.x,b.m02+d,h,w.sineOut));f.push(new M(a.y,b.m12+g,h,w.sineOut));f.push(new M(a.scaleX,e,h,w.sineOut));f.push(new M(a.scaleY,e,h,w.sineOut));d=[];d.push(new M(a.x,b.m02,h,w.sineIn));
d.push(new M(a.y,b.m12,h,w.sineIn));d.push(new M(a.scaleX,a.scaleX._value,h,w.sineIn));d.push(new M(a.scaleY,a.scaleY._value,h,w.sineIn));a.x.set__(b.m02);a.y.set__(b.m12);a.rotation.set__(180*Math.atan2(b.m10,b.m00)/Math.PI);var q=new X;q.run(new Ka(new da([new ja(p),new $(function(){a.alpha.set__(0.99)}),new la(f),new la(d),new $(function(){q.dispose();q=null;a.alpha.set__(1)})]),1));c.add(q)},__class__:Ga});var La=function(a,b,c,d){this.vR=a;this.vG=b;this.vB=c;this.vAlpha=d};f["com.globz.scenes.paintutils.MyColor"]=
La;La.__name__=!0;La.prototype={isEqual:function(a){return this.vR!=a.vR||this.vG!=a.vG||this.vB!=a.vB?!1:!0},__class__:La};var ic=function(){};f["com.globz.scenes.paintutils.MyPoint"]=ic;ic.__name__=!0;var Z=function(){this.vDone=!0};f["com.globz.scenes.paintutils.tools.Tool"]=Z;Z.__name__=!0;Z.prototype={setColor:function(a){this.vColor=a},onMDown:function(){},onMMove:function(){},onMUp:function(){},createRecolor:function(a,b){for(var c=(b&16711680)/16711680,d=(b&65280)/65280,g=(b&255)/255,e=a.readPixels(0,
0,a.get_width(),a.get_height()),p=0,h=e.length;p<h;)e.b[p]=(c*e.b[p]|0)&255,e.b[p+1]=(d*e.b[p+1]|0)&255,e.b[p+2]=(g*e.b[p+2]|0)&255,p+=4;return e},destroy:function(){},__class__:Z};var ua=function(a,b,c,d){null==c&&(c="");null==b&&(b=!1);this.brushTexture=null;this.vDone=!0;this.vBrush=a;this.vMultiply=b;this.vOriginalTexture=c;this.vAssetPack=d;this.setColor(16711680);this.vType=this.vMultiply?""!=this.vOriginalTexture?"eraser":"feltpen":"brush"};f["com.globz.scenes.paintutils.tools.Brush"]=ua;ua.__name__=
!0;ua.__super__=Z;ua.prototype=t(Z.prototype,{setColor:function(a){var b=e.vPack.getTexture(this.vBrush),a=this.createRecolor(b,a);this.brushTexture=i._platform.getRenderer().createTexture(b.get_width(),b.get_height());this.brushTexture.writePixels(a,0,0,b.get_width(),b.get_height())},onMDown:function(a){a.x*=1/e.vScaleSaved/e.vDrawingScale;a.y*=1/e.vScaleSaved/e.vDrawingScale;this.vLastBrushPoint=new y(a.x,a.y);this.drawPoint(a)},onMMove:function(a){a.x*=1/e.vScaleSaved/e.vDrawingScale;a.y*=1/e.vScaleSaved/
e.vDrawingScale;null==this.vLastBrushPoint&&(this.vLastBrushPoint=new y(a.x,a.y));this.drawPoint(a)},onMUp:function(){this.vLastBrushPoint=null},drawPoint:function(a){if(i._platform.getPointer().isDown()&&null!=this.vLastBrushPoint){var b=new y(a.x,a.y),c=this.vLastBrushPoint.distanceTo(b.x,b.y),d=1+Math.floor(c/4);b.x=(a.x-this.vLastBrushPoint.x)/d;b.y=(a.y-this.vLastBrushPoint.y)/d;var c=this.vLastBrushPoint.x|0,g=this.vLastBrushPoint.y|0,m=a.x|0,p=a.y|0,h=0,f=0,q=null,l=null,q=q=0;c>m&&(q=c,c=
m,m=q);g>p&&(q=g,g=p,p=q);c-=o["int"](0.5*this.brushTexture.get_width());g-=o["int"](0.5*this.brushTexture.get_height());m+=o["int"](0.5*this.brushTexture.get_width());p+=o["int"](0.5*this.brushTexture.get_height());0>c?c=0:c>e.vGlobalCanvas.get_width()&&(c=e.vGlobalCanvas.get_width());0>g?g=0:g>e.vGlobalCanvas.get_height()&&(g=e.vGlobalCanvas.get_height());0>m?m=0:m>e.vGlobalCanvas.get_width()&&(m=e.vGlobalCanvas.get_width());0>p?p=0:p>e.vGlobalCanvas.get_height()&&(p=e.vGlobalCanvas.get_height());
h=m-c;f=p-g;if(""!=this.vOriginalTexture){q=i._platform.getRenderer().createTexture(h,f);q.get_graphics().drawSubTexture(e.vGlobalCanvas,0,0,c,g,h,f);for(m=0;m<d;)m++,this.vLastBrushPoint.x+=b.x,this.vLastBrushPoint.y+=b.y,q.get_graphics().drawTexture(this.brushTexture,this.vLastBrushPoint.x-0.5*this.brushTexture.get_width()-c,this.vLastBrushPoint.y-0.5*this.brushTexture.get_height()-g);l=q.readPixels(0,0,h,f);b=i._platform.getRenderer().createTexture(h,f);b.get_graphics().drawSubTexture(this.vAssetPack.getTexture(this.vOriginalTexture),
0,0,c,g,h,f);l=this.eraseAlphaForEraser(l,b.readPixels(0,0,h,f));e.vGlobalCanvas.writePixels(l,c,g,h,f);2==e.vScaleSaved?(e.vCanvas.get_graphics().fillRect(e.vColorPage,c,g,h,f),e.vCanvas.get_graphics().drawSubTexture(e.vGlobalCanvas,c,g,c,g,h,f)):(d=i._platform.getRenderer().createTexture(h,f),d.get_graphics().fillRect(e.vColorPage,0,0,h,f),d.get_graphics().drawSubTexture(e.vGlobalCanvas,0,0,c,g,h,f),h=new A(d),f=(new n).add(h),m=e.vScaleSaved*e.vDrawingScale,h.setScale(m),h.setXY(c*m,g*m),j.render(f,
e.vCanvas.get_graphics()),d.dispose());q.dispose();b.dispose()}else{if(this.vMultiply){l=e.vGlobalCanvas.readPixels(c,g,h,f);q=i._platform.getRenderer().createTexture(h,f);q.get_graphics().drawSubTexture(e.vGlobalCanvas,0,0,c,g,h,f);for(m=0;m<d;)m++,this.vLastBrushPoint.x+=b.x,this.vLastBrushPoint.y+=b.y,q.get_graphics().drawTexture(this.brushTexture,this.vLastBrushPoint.x-0.5*this.brushTexture.get_width()-c,this.vLastBrushPoint.y-0.5*this.brushTexture.get_height()-g);l=this.eraseAlpha(q.readPixels(0,
0,h,f),l);e.vGlobalCanvas.writePixels(l,c,g,h,f)}else{q=i._platform.getRenderer().createTexture(h,f);q.get_graphics().drawSubTexture(e.vGlobalCanvas,0,0,c,g,h,f);for(m=0;m<d;)m++,this.vLastBrushPoint.x+=b.x,this.vLastBrushPoint.y+=b.y,q.get_graphics().drawTexture(this.brushTexture,this.vLastBrushPoint.x-0.5*this.brushTexture.get_width()-c,this.vLastBrushPoint.y-0.5*this.brushTexture.get_height()-g);e.vGlobalCanvas.writePixels(q.readPixels(0,0,h,f),c,g,h,f)}2==e.vScaleSaved?(e.vCanvas.get_graphics().fillRect(e.vColorPage,
c,g,h,f),e.vCanvas.get_graphics().drawSubTexture(e.vGlobalCanvas,c,g,c,g,h,f)):(b=i._platform.getRenderer().createTexture(h,f),b.get_graphics().fillRect(e.vColorPage,0,0,h,f),b.get_graphics().drawSubTexture(e.vGlobalCanvas,0,0,c,g,h,f),h=new A(b),f=(new n).add(h),d=e.vScaleSaved*e.vDrawingScale,h.setScale(d),h.setXY(c*d,g*d),j.render(f,e.vCanvas.get_graphics()),b.dispose());q.dispose()}this.vLastBrushPoint.x=a.x;this.vLastBrushPoint.y=a.y}},eraseAlpha:function(a,b){for(var c=0,d=a.length/4|0,g,e=
0;e<d;)e++,g=b.b[c+3],255>g&&a.fill(c+3,1,g),c+=4;return a},eraseAlphaForEraser:function(a,b){for(var c=0,d=a.length/4|0,g,e=0;e<d;)e++,g=b.b[c+3],255>g&&255==a.b[c]&&255==a.b[c+1]&&255==a.b[c+2]&&a.fill(c+3,1,g),c+=4;return a},destroy:function(){this.vAssetPack=this.vTexture=this.brushTexture=null},__class__:ua});var jb=function(){this.vDone=!0;this.vType="fill"};f["com.globz.scenes.paintutils.tools.Fill"]=jb;jb.__name__=!0;jb.__super__=Z;jb.prototype=t(Z.prototype,{onMDown:function(a){this.vDone&&
(this.vDone=!1,a.x*=1/e.vScaleSaved/e.vDrawingScale,a.y*=1/e.vScaleSaved/e.vDrawingScale,this.doFill(a.x,a.y))},onMMove:function(){},doFill:function(a,b){this.vFillTime=i._platform.getTime();this.vNbCol=e.vGlobalCanvas.get_width();this.vNbRow=e.vGlobalCanvas.get_height();var c=Math.round(a),d=Math.round(b);0>c?c=0:c>=this.vNbCol&&(c=this.vNbCol-1);0>d?d=0:d>=this.vNbRow&&(d=this.vNbRow-1);this.vFillBytes=e.vGlobalCanvas.readPixels(0,0,this.vNbCol,this.vNbRow);this.vFillColorNew=new La(this.vColor>>
16&255,this.vColor>>8&255,this.vColor&255,this.vColor>>24&255);this.vFillColorInit=this.getColorPixel(c,d);255>this.vFillColorInit.vAlpha||this.vFillColorInit.isEqual(new La(0,0,0,255))||this.vFillColorInit.isEqual(this.vFillColorNew)||this.searchFill(c,d);this.vFillBytes=null;this.vDone=!0},getColorPixel:function(a,b){var c=4*(b*this.vNbCol+a);return new La(this.vFillBytes.b[c],this.vFillBytes.b[c+1],this.vFillBytes.b[c+2],this.vFillBytes.b[c+3])},searchFill:function(a,b){var c=[];c.push(4*(b*this.vNbCol+
a));var d,g,m=this.vFillColorInit.vR,f=this.vFillColorInit.vG,h=this.vFillColorInit.vB,i=this.vFillColorNew.vR,q=this.vFillColorNew.vG,l=this.vFillColorNew.vB;g=g=g=g=0;for(var k=100,k=30;0<c.length;)d=c.pop(),g=this.vFillBytes.b[d+3],10<g&&(g=this.vFillBytes.b[d],Math.abs(g-m)<k&&(g=this.vFillBytes.b[d+1],Math.abs(g-f)<k&&(g=this.vFillBytes.b[d+2],Math.abs(g-h)<k&&(this.vFillBytes.fill(d,1,i),this.vFillBytes.fill(d+1,1,q),this.vFillBytes.fill(d+2,1,l),g=d/4|0,d=g%this.vNbCol|0,g=(g-d)/this.vNbCol|
0,d<this.vNbCol-1&&c.push(4*(g*this.vNbCol+(d+1))),g<this.vNbRow-1&&c.push(4*((g+1)*this.vNbCol+d)),0<d&&c.push(4*(g*this.vNbCol+(d-1))),0<g&&c.push(4*((g-1)*this.vNbCol+d))))));e.vGlobalCanvas.writePixels(this.vFillBytes,0,0,this.vNbCol,this.vNbRow);2==e.vScaleSaved?(e.vCanvas.get_graphics().fillRect(e.vColorPage,0,0,this.vNbCol,this.vNbRow),e.vCanvas.get_graphics().drawTexture(e.vGlobalCanvas,0,0)):(c=new O(e.vColorPage,e.vGlobalCanvas.get_width(),e.vGlobalCanvas.get_height()),m=(new n).add(c),
f=new A(e.vGlobalCanvas),f=(new n).add(f),m.addChild(f),c.setScale(e.vScaleSaved*e.vDrawingScale),j.render(m,e.vCanvas.get_graphics()));this.vFillBytes=null},destroy:function(){this.vFillBytes=null},__class__:jb});var ib=function(a,b){null==b&&(b=0);this.vDone=!0;this.vStampTexture=e.vPack.getTexture(a);this.vType="stamp";this.vID=b};f["com.globz.scenes.paintutils.tools.Stamp"]=ib;ib.__name__=!0;ib.__super__=Z;ib.prototype=t(Z.prototype,{onMDown:function(a){a.x*=1/e.vScaleSaved/e.vDrawingScale;a.y*=
1/e.vScaleSaved/e.vDrawingScale;var b=Math.round(a.x-0.5*this.vStampTexture.get_width()),c=Math.round(a.y-0.5*this.vStampTexture.get_height()),d=Math.round(a.x+0.5*this.vStampTexture.get_width()),g=Math.round(a.y+0.5*this.vStampTexture.get_height());0>b?b=0:b>e.vGlobalCanvas.get_width()&&(b=e.vGlobalCanvas.get_width());0>c?c=0:c>e.vGlobalCanvas.get_height()&&(c=e.vGlobalCanvas.get_height());0>d?d=0:d>e.vGlobalCanvas.get_width()&&(d=e.vGlobalCanvas.get_width());0>g?g=0:g>e.vGlobalCanvas.get_height()&&
(g=e.vGlobalCanvas.get_height());var m=i._platform.getRenderer().createTexture(d-b,g-c);m.get_graphics().drawSubTexture(e.vGlobalCanvas,0,0,b,c,d-b,g-c);var f=i._platform.getRenderer().createTexture(this.vStampTexture.get_width(),this.vStampTexture.get_height());f.get_graphics().drawTexture(m,b-Math.round(a.x-0.5*this.vStampTexture.get_width()),c-Math.round(a.y-0.5*this.vStampTexture.get_height()));f.get_graphics().drawTexture(this.vStampTexture,0,0);e.vGlobalCanvas.writePixels(f.readPixels(0,0,this.vStampTexture.get_width(),
this.vStampTexture.get_height()),Math.round(a.x-0.5*this.vStampTexture.get_width()),Math.round(a.y-0.5*this.vStampTexture.get_height()),this.vStampTexture.get_width(),this.vStampTexture.get_height());2==e.vScaleSaved?(e.vCanvas.get_graphics().fillRect(e.vColorPage,b,c,d-b,g-c),e.vCanvas.get_graphics().drawSubTexture(e.vGlobalCanvas,b,c,b,c,d-b,g-c)):(b=new A(this.vStampTexture),c=(new n).add(b),d=e.vScaleSaved*e.vDrawingScale,b.setScale(d),b.setXY(Math.round(a.x-0.5*this.vStampTexture.get_width())*
d,Math.round(a.y-0.5*this.vStampTexture.get_height())*d),j.render(c,e.vCanvas.get_graphics()));f.dispose();m.dispose()},onMMove:function(){},destroy:function(){this.vStampTexture=null},__class__:ib});var hb=function(a){this.vDone=!0;this.vTexture=e.vPack.getTexture(a);this.vType="sticker"};f["com.globz.scenes.paintutils.tools.Sticker"]=hb;hb.__name__=!0;hb.__super__=Z;hb.prototype=t(Z.prototype,{onMDown:function(){},onMMove:function(){},onMUp:function(a){var b,c;a.x*=1/e.vScaleSaved/e.vDrawingScale;
a.y*=1/e.vScaleSaved/e.vDrawingScale;var d=Math.round(a.x-0.5*this.vTexture.get_width()),g=Math.round(a.y-0.5*this.vTexture.get_height()),m=Math.round(a.x+0.5*this.vTexture.get_width()),f=Math.round(a.y+0.5*this.vTexture.get_height());0>d?d=0:d>e.vGlobalCanvas.get_width()&&(d=e.vGlobalCanvas.get_width());0>g?g=0:g>e.vGlobalCanvas.get_height()&&(g=e.vGlobalCanvas.get_height());0>m?m=0:m>e.vGlobalCanvas.get_width()&&(m=e.vGlobalCanvas.get_width());0>f?f=0:f>e.vGlobalCanvas.get_height()&&(f=e.vGlobalCanvas.get_height());
var h=i._platform.getRenderer().createTexture(m-d,f-g);h.get_graphics().drawSubTexture(e.vGlobalCanvas,0,0,d,g,m-d,f-g);b=i._platform.getRenderer().createTexture(this.vTexture.get_width(),this.vTexture.get_height());b.get_graphics().drawTexture(h,d-Math.round(a.x-0.5*this.vTexture.get_width()),g-Math.round(a.y-0.5*this.vTexture.get_height()));c=this.makeHole(b.readPixels(0,0,b.get_width(),b.get_height()),this.vTexture);h=i._platform.getRenderer().createTexture(this.vTexture.get_width(),this.vTexture.get_height());
h.writePixels(c,0,0,this.vTexture.get_width(),this.vTexture.get_height());c=this.removeAlpha(this.vTexture);b.writePixels(c,0,0,this.vTexture.get_width(),this.vTexture.get_height());h.get_graphics().drawTexture(b,0,0);e.vGlobalCanvas.writePixels(h.readPixels(0,0,this.vTexture.get_width(),this.vTexture.get_height()),Math.round(a.x-0.5*this.vTexture.get_width()),Math.round(a.y-0.5*this.vTexture.get_height()),this.vTexture.get_width(),this.vTexture.get_height());2==e.vScaleSaved?(e.vCanvas.get_graphics().fillRect(e.vColorPage,
d,g,m-d,f-g),e.vCanvas.get_graphics().drawSubTexture(e.vGlobalCanvas,d,g,d,g,m-d,f-g)):(a=new O(e.vColorPage,e.vGlobalCanvas.get_width(),e.vGlobalCanvas.get_height()),d=(new n).add(a),g=new A(e.vGlobalCanvas),g=(new n).add(g),d.addChild(g),a.setScale(e.vScaleSaved*e.vDrawingScale),j.render(d,e.vCanvas.get_graphics()));b.dispose();h.dispose()},makeHole:function(a,b){for(var c=b.readPixels(0,0,b.get_width(),b.get_height()),d=0,g=c.length/4|0,e=c.b[0],f=c.b[1],h=c.b[2],i=0;i<g;)i++,(c.b[d]!=e||c.b[d+
1]!=f||c.b[d+2]!=h)&&a.fill(d+3,1,0),d+=4;return a},removeAlpha:function(a){for(var a=a.readPixels(0,0,a.get_width(),a.get_height()),b=0,c=a.length/4|0,d=a.b[0],g=a.b[1],e=a.b[2],f=0;f<c;)f++,a.b[b]==d&&a.b[b+1]==g&&a.b[b+2]==e&&a.fill(b+3,1,0),b+=4;return a},destroy:function(){this.vTexture=null},__class__:hb});var fb=function(a){v.call(this);this.vScene=a};f["com.globz.tools.EventManager"]=fb;fb.__name__=!0;fb.__super__=v;fb.prototype=t(v.prototype,{get_name:function(){return"EventManager_5"},onUpdate:function(a){this.vScene.onUpdateInside(a)},
onAdded:function(){this.initEvents()},initEvents:function(){},__class__:fb});var Za=function(){this.vScaleFactor=1;v.call(this)};f["com.globz.tools.ScaleAuto"]=Za;Za.__name__=!0;Za.__super__=v;Za.prototype=t(v.prototype,{get_name:function(){return"ScaleAuto_0"},onAdded:function(){null!=this.owner._compMap.Sprite_1?this.vSprite=this.owner._compMap.Sprite_1:(this.vSprite=new j,this.owner.add(this.vSprite))},onUpdate:function(){var a=i._platform.getStage().get_width(),b=i._platform.getStage().get_height();
a/e.vSize.x<b/e.vSize.y?this.vSprite.scaleX.set__(this.vSprite.scaleY.set__(a/e.vSize.x*this.vScaleFactor)):this.vSprite.scaleX.set__(this.vSprite.scaleY.set__(b/e.vSize.y*this.vScaleFactor))},__class__:Za});var eb=function(){v.call(this);this._disposables=[]};f["flambe.Disposer"]=eb;eb.__name__=!0;eb.__super__=v;eb.prototype=t(v.prototype,{get_name:function(){return"Disposer_6"},add:function(a){this._disposables.push(a);return this},onRemoved:function(){this.freeDisposables()},dispose:function(){v.prototype.dispose.call(this);
this.freeDisposables()},freeDisposables:function(){var a=this._disposables;this._disposables=[];for(var b=0;b<a.length;){var c=a[b];++b;c.dispose()}},__class__:eb});var n=function(){this.parent=this.firstChild=this.next=this.firstComponent=null;this._compMap={}};f["flambe.Entity"]=n;n.__name__=!0;n.__interfaces__=[Y];n.prototype={add:function(a){null!=a.owner&&a.owner.remove(a);var b=a.get_name(),c=this._compMap[b];null!=c&&this.remove(c);this._compMap[b]=a;b=null;for(c=this.firstComponent;null!=
c;)b=c,c=c.next;null!=b?b.next=a:this.firstComponent=a;a.owner=this;a.next=null;a.onAdded();return this},remove:function(a){for(var b=null,c=this.firstComponent;null!=c;){var d=c.next;if(c==a)return null==b?this.firstComponent=d:(b.owner=this,b.next=d),delete this._compMap[c.get_name()],0!=(c._flags&1)&&(c.onStop(),c._flags&=-2),c.onRemoved(),c.owner=null,c.next=null,!0;b=c;c=d}return!1},getComponent:function(a){return this._compMap[a]},addChild:function(a,b){null==b&&(b=!0);null!=a.parent&&a.parent.removeChild(a);
a.parent=this;if(b){for(var c=null,d=this.firstChild;null!=d;)c=d,d=d.next;null!=c?c.next=a:this.firstChild=a}else a.next=this.firstChild,this.firstChild=a;return this},removeChild:function(a){for(var b=null,c=this.firstChild;null!=c;){var d=c.next;if(c==a){null==b?this.firstChild=d:b.next=d;c.parent=null;c.next=null;break}b=c;c=d}},disposeChildren:function(){for(;null!=this.firstChild;)this.firstChild.dispose()},dispose:function(){for(null!=this.parent&&this.parent.removeChild(this);null!=this.firstComponent;)this.firstComponent.dispose();
this.disposeChildren()},__class__:n};var $b=function(){};f["flambe.util.PackageLog"]=$b;$b.__name__=!0;var Fb=function(){};f["flambe.platform.Platform"]=Fb;Fb.__name__=!0;Fb.prototype={__class__:Fb};var va=function(){};f["flambe.platform.html.HtmlPlatform"]=va;va.__name__=!0;va.__interfaces__=[Fb];va.prototype={init:function(){var a=this;s.fixAndroidMath();var b=null;try{b=window.flambe.canvas}catch(c){}b.setAttribute("tabindex","0");b.style.outlineStyle="none";b.style.webkitTapHighlightColor="transparent";
b.setAttribute("moz-opaque","true");this._stage=new wa(b);this._pointer=new I;this._mouse=new kb(this._pointer,b);this._renderer=this.createRenderer(b);this.mainLoop=new xa;this.musicPlaying=!1;this._canvas=b;this._container=b.parentElement;this._container.style.overflow="hidden";this._container.style.position="relative";this._container.style.msTouchAction="none";var d=0,g=function(c){if(!(1E3>c.timeStamp-d)){var g=b.getBoundingClientRect(),e=a.getX(c,g),g=a.getY(c,g);switch(c.type){case "mousedown":c.target==
b&&(c.preventDefault(),a._mouse.submitDown(e,g,c.button),b.focus());break;case "mousemove":a._mouse.submitMove(e,g);break;case "mouseup":a._mouse.submitUp(e,g,c.button);break;case "mousewheel":case "DOMMouseScroll":a._mouse.submitScroll(e,g,"mousewheel"==c.type?c.wheelDelta/40:-c.detail)&&c.preventDefault()}}};window.addEventListener("mousedown",g,!1);window.addEventListener("mousemove",g,!1);window.addEventListener("mouseup",g,!1);b.addEventListener("mousewheel",g,!1);b.addEventListener("DOMMouseScroll",
g,!1);b.addEventListener("contextmenu",function(a){a.preventDefault()},!1);var e="undefined"!=typeof window.ontouchstart,g="msMaxTouchPoints"in window.navigator&&1<window.navigator.msMaxTouchPoints;if(e||g){var f=new lb(this._pointer,e?4:window.navigator.msMaxTouchPoints);this._touch=f;g=function(b){var c;c=e?b.changedTouches:[b];var g=b.target.getBoundingClientRect();d=b.timeStamp;switch(b.type){case "touchstart":case "MSPointerDown":case "pointerdown":b.preventDefault();s.SHOULD_HIDE_MOBILE_BROWSER&&
s.hideMobileBrowser();for(b=0;b<c.length;){var h=c[b];++b;var l=a.getX(h,g),q=a.getY(h,g);f.submitDown((e?h.identifier:h.pointerId)|0,l,q)}break;case "touchmove":case "MSPointerMove":case "pointermove":b.preventDefault();for(b=0;b<c.length;)h=c[b],++b,l=a.getX(h,g),q=a.getY(h,g),f.submitMove((e?h.identifier:h.pointerId)|0,l,q);break;case "touchend":case "touchcancel":case "MSPointerUp":case "pointerup":for(b=0;b<c.length;)h=c[b],++b,l=a.getX(h,g),q=a.getY(h,g),f.submitUp((e?h.identifier:h.pointerId)|
0,l,q)}};e?(b.addEventListener("touchstart",g,!1),b.addEventListener("touchmove",g,!1),b.addEventListener("touchend",g,!1),b.addEventListener("touchcancel",g,!1)):(b.addEventListener("MSPointerDown",g,!1),b.addEventListener("MSPointerMove",g,!1),b.addEventListener("MSPointerUp",g,!1))}else this._touch=new mb;var h=window.onerror;window.onerror=function(a,b,c){i.uncaughtError.emit(a);return null!=h?h(a,b,c):!1};var j=s.loadExtension("hidden",window.document);null!=j.value?(g=function(){i.hidden.set__(Ea.field(window.document,
j.field))},g(null),window.document.addEventListener(j.prefix+"visibilitychange",g,!1)):(g=function(a){i.hidden.set__("pagehide"==a.type)},window.addEventListener("pageshow",g,!1),window.addEventListener("pagehide",g,!1));i.hidden.get_changed().connect(function(b){b||(a._skipFrame=!0)});this._skipFrame=!1;this._lastUpdate=Date.now();var q=s.loadExtension("requestAnimationFrame").value;if(null!=q){var l=window.performance,k=null!=l&&s.polyfill("now",l);k?this._lastUpdate=l.now():null;var n=null,n=function(c){a.update(k?
l.now():c);q(n,b)};q(n,b)}else window.setInterval(function(){a.update(Date.now())},16);Ma.info("Initialized HTML platform",["renderer",this._renderer.get_type()])},loadAssetPack:function(a){return(new x(this,a)).promise},getStage:function(){return this._stage},getLocale:function(){var a=window.navigator.language;null==a&&(a=window.navigator.userLanguage);return a},getTime:function(){return Date.now()/1E3},update:function(a){var b=(a-this._lastUpdate)/1E3;this._lastUpdate=a;i.hidden._value||(this._skipFrame?
this._skipFrame=!1:(this.mainLoop.update(b),this.mainLoop.render(this._renderer)))},getPointer:function(){return this._pointer},getTouch:function(){return this._touch},getRenderer:function(){return this._renderer},getX:function(a,b){return(a.clientX-b.left)*this._stage.get_width()/b.width},getY:function(a,b){return(a.clientY-b.top)*this._stage.get_height()/b.height},createRenderer:function(a){return new ya(a)},__class__:va};var Q=function(a,b){this._value=a;this._changed=null!=b?new Na(b):null};f["flambe.util.Value"]=
Q;Q.__name__=!0;Q.prototype={watch:function(a){a(this._value,this._value);return this.get_changed().connect(a)},set__:function(a){var b=this._value;a!=b&&(this._value=a,null!=this._changed&&this._changed.emit(a,b));return a},get_changed:function(){null==this._changed&&(this._changed=new Na);return this._changed},toString:function(){return""+o.string(this._value)},__class__:Q};var za=function(a,b){this._next=null;this._signal=a;this._listener=b;this.stayInList=!0};f["flambe.util.SignalConnection"]=
za;za.__name__=!0;za.__interfaces__=[Y];za.prototype={once:function(){this.stayInList=!1;return this},dispose:function(){null!=this._signal&&(this._signal.disconnect(this),this._signal=null)},__class__:za};var G=function(a){this._head=null!=a?new za(this,a):null;this._deferredTasks=null};f["flambe.util.SignalBase"]=G;G.__name__=!0;G.prototype={connectImpl:function(a,b){var c=this,d=new za(this,a);this._head==G.DISPATCHING_SENTINEL?this.defer(function(){c.listAdd(d,b)}):this.listAdd(d,b);return d},
disconnect:function(a){var b=this;this._head==G.DISPATCHING_SENTINEL?this.defer(function(){b.listRemove(a)}):this.listRemove(a)},defer:function(a){for(var b=null,c=this._deferredTasks;null!=c;)b=c,c=c.next;a=new Gb(a);null!=b?b.next=a:this._deferredTasks=a},willEmit:function(){var a=this._head;this._head=G.DISPATCHING_SENTINEL;return a},didEmit:function(a){this._head=a;a=this._deferredTasks;for(this._deferredTasks=null;null!=a;)a.fn(),a=a.next},listAdd:function(a,b){if(b)a._next=this._head,this._head=
a;else{for(var c=null,d=this._head;null!=d;)c=d,d=d._next;null!=c?c._next=a:this._head=a}},listRemove:function(a){for(var b=null,c=this._head;null!=c;){if(c==a){a=c._next;null==b?this._head=a:b._next=a;break}b=c;c=c._next}},__class__:G};var Na=function(a){G.call(this,a)};f["flambe.util.Signal2"]=Na;Na.__name__=!0;Na.__super__=G;Na.prototype=t(G.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(a,b){var c=this;this._head==G.DISPATCHING_SENTINEL?this.defer(function(){c.emitImpl(a,
b)}):this.emitImpl(a,b)},emitImpl:function(a,b){for(var c=this.willEmit(),d=c;null!=d;)d._listener(a,b),d.stayInList||d.dispose(),d=d._next;this.didEmit(c)},__class__:Na});var D=function(a){G.call(this,a)};f["flambe.util.Signal1"]=D;D.__name__=!0;D.__super__=G;D.prototype=t(G.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(a){var b=this;this._head==G.DISPATCHING_SENTINEL?this.defer(function(){b.emitImpl(a)}):this.emitImpl(a)},emitImpl:function(a){for(var b=
this.willEmit(),c=b;null!=c;)c._listener(a),c.stayInList||c.dispose(),c=c._next;this.didEmit(b)},__class__:D});var E=function(a,b){this._behavior=null;Q.call(this,a,b)};f["flambe.animation.AnimatedFloat"]=E;E.__name__=!0;E.__super__=Q;E.prototype=t(Q.prototype,{set__:function(a){this._behavior=null;return Q.prototype.set__.call(this,a)},update:function(a){null!=this._behavior&&(Q.prototype.set__.call(this,this._behavior.update(a)),this._behavior.isComplete()&&(this._behavior=null))},animate:function(a,
b,c,d){this.set__(a);this.animateTo(b,c,d)},animateTo:function(a,b,c){this.set_behavior(new Oa(this._value,a,b,c))},set_behavior:function(a){this._behavior=a;this.update(0);return a},__class__:E});var i=function(){};f["flambe.System"]=i;i.__name__=!0;i.init=function(){i._calledInit||(i._platform.init(),i._calledInit=!0)};var Ma=function(){};f["flambe.Log"]=Ma;Ma.__name__=!0;Ma.info=function(){null};Ma.__super__=$b;Ma.prototype=t($b.prototype,{__class__:Ma});var Hb=function(){this._realDt=0};f["flambe.SpeedAdjuster"]=
Hb;Hb.__name__=!0;Hb.__super__=v;Hb.prototype=t(v.prototype,{get_name:function(){return"SpeedAdjuster_12"},onUpdate:function(a){0<this._realDt&&(a=this._realDt,this._realDt=0);this.scale.update(a)},__class__:Hb});var Ib=function(){};f["flambe.animation.Behavior"]=Ib;Ib.__name__=!0;Ib.prototype={__class__:Ib};var w=function(){};f["flambe.animation.Ease"]=w;w.__name__=!0;w.linear=function(a){return a};w.quadIn=function(a){return a*a};w.sineIn=function(a){return 1-Math.cos(1.5707963267948966*a)};w.sineOut=
function(a){return Math.sin(1.5707963267948966*a)};var Oa=function(a,b,c,d){this._from=a;this._to=b;this._duration=c;this.elapsed=0;this._easing=null!=d?d:w.linear};f["flambe.animation.Tween"]=Oa;Oa.__name__=!0;Oa.__interfaces__=[Ib];Oa.prototype={update:function(a){this.elapsed+=a;return this.elapsed>=this._duration?this._to:this._from+(this._to-this._from)*this._easing(this.elapsed/this._duration)},isComplete:function(){return this.elapsed>=this._duration},__class__:Oa};var ma=function(){};f["flambe.asset.Asset"]=
ma;ma.__name__=!0;ma.__interfaces__=[Y];ma.prototype={__class__:ma};var k=f["flambe.asset.AssetFormat"]={__ename__:!0,__constructs__:"WEBP,JXR,PNG,JPG,GIF,DDS,PVR,PKM,MP3,M4A,OPUS,OGG,WAV,Data".split(",")};k.WEBP=["WEBP",0];k.WEBP.__enum__=k;k.JXR=["JXR",1];k.JXR.__enum__=k;k.PNG=["PNG",2];k.PNG.__enum__=k;k.JPG=["JPG",3];k.JPG.__enum__=k;k.GIF=["GIF",4];k.GIF.__enum__=k;k.DDS=["DDS",5];k.DDS.__enum__=k;k.PVR=["PVR",6];k.PVR.__enum__=k;k.PKM=["PKM",7];k.PKM.__enum__=k;k.MP3=["MP3",8];k.MP3.__enum__=
k;k.M4A=["M4A",9];k.M4A.__enum__=k;k.OPUS=["OPUS",10];k.OPUS.__enum__=k;k.OGG=["OGG",11];k.OGG.__enum__=k;k.WAV=["WAV",12];k.WAV.__enum__=k;k.Data=["Data",13];k.Data.__enum__=k;var Jb=function(a,b,c,d){this.name=a;this.url=b;this.format=c;this.bytes=d};f["flambe.asset.AssetEntry"]=Jb;Jb.__name__=!0;Jb.prototype={__class__:Jb};var nb=function(){};f["flambe.asset.AssetPack"]=nb;nb.__name__=!0;nb.__interfaces__=[Y];nb.prototype={__class__:nb};var ob=function(){};f["flambe.asset.File"]=ob;ob.__name__=
!0;ob.__interfaces__=[ma];ob.prototype={__class__:ob};var F=function(){this._localBase=this._remoteBase=null;this._entries=[]};f["flambe.asset.Manifest"]=F;F.__name__=!0;F.fromAssets=function(a,b){null==b&&(b=!0);var c=Ea.field(ac.getType(F).assets[0],a);if(null==c){if(b)throw H.withFields("Missing asset pack",["name",a]);return null}var d=new F;d.set_localBase("assets");for(var g=0;g<c.length;){var e=c[g];++g;var f=e.name,h=a+"/"+f+"?v="+o.string(e.md5),i=F.inferFormat(f);i!=k.Data&&(f=H.removeFileExtension(f));
d.add(f,h,e.bytes,i)}return d};F.fromAssetsLocalized=function(a,b,c){null==c&&(c=!0);null==b&&(b=i._platform.getLocale());if(null!=b)for(b=b.split("-");0<b.length;){var d=F.fromAssets(a+"_"+b.join("-"),!1);if(null!=d)return d;b.pop()}return F.fromAssets(a,c)};F.inferFormat=function(a){a=H.getUrlExtension(a);if(null!=a)switch(a.toLowerCase()){case "gif":return k.GIF;case "jpg":case "jpeg":return k.JPG;case "jxr":case "wdp":return k.JXR;case "png":return k.PNG;case "webp":return k.WEBP;case "dds":return k.DDS;
case "pvr":return k.PVR;case "pkm":return k.PKM;case "m4a":return k.M4A;case "mp3":return k.MP3;case "ogg":return k.OGG;case "opus":return k.OPUS;case "wav":return k.WAV}else null;return k.Data};F.prototype={add:function(a,b,c,d){null==c&&(c=0);null==d&&(d=F.inferFormat(b));a=new Jb(a,b,d,c);this._entries.push(a);return a},iterator:function(){return u.iter(this._entries)},getFullURL:function(a){var b;b=null!=this.get_remoteBase()&&F._supportsCrossOrigin?this.get_remoteBase():this.get_localBase();
return null!=b?H.joinPath(b,a.url):a.url},get_localBase:function(){return this._localBase},set_localBase:function(a){null!=a&&bc.that(!Fa.startsWith(a,"http://")&&!Fa.startsWith(a,"https://"),"localBase must be a path on the same domain, NOT starting with http(s)://",null);return this._localBase=a},get_remoteBase:function(){return this._remoteBase},__class__:F};var J=f["flambe.display.BlendMode"]={__ename__:!0,__constructs__:"Normal,Add,Multiply,Screen,Mask,Copy".split(",")};J.Normal=["Normal",0];
J.Normal.__enum__=J;J.Add=["Add",1];J.Add.__enum__=J;J.Multiply=["Multiply",2];J.Multiply.__enum__=J;J.Screen=["Screen",3];J.Screen.__enum__=J;J.Mask=["Mask",4];J.Mask.__enum__=J;J.Copy=["Copy",5];J.Copy.__enum__=J;var j=function(){this._viewMatrixUpdateCount=this._parentViewMatrixUpdateCount=0;this.blendMode=this.scissor=this._viewMatrix=null;var a=this;v.call(this);this._flags|=54;this._localMatrix=new na;var b=function(){a._flags|=24};this.x=new E(0,b);this.y=new E(0,b);this.rotation=new E(0,b);
this.scaleX=new E(1,b);this.scaleY=new E(1,b);this.anchorX=new E(0,b);this.anchorY=new E(0,b);this.alpha=new E(1)};f["flambe.display.Sprite"]=j;j.__name__=!0;j.hitTest=function(a,b,c){var d=a._compMap.Sprite_1;if(null!=d){if(6!=(d._flags&6))return null;d.getLocalMatrix().inverseTransform(b,c,j._scratchPoint)&&(b=j._scratchPoint.x,c=j._scratchPoint.y);var g=d.scissor;if(null!=g&&!g.contains(b,c))return null}a=j.hitTestBackwards(a.firstChild,b,c);return null!=a?a:null!=d&&d.containsLocal(b,c)?d:null};
j.render=function(a,b){var c=a._compMap.Sprite_1;if(null!=c){var d=c.alpha._value;if(0==(c._flags&2)||0>=d)return;b.save();1>d&&b.multiplyAlpha(d);null!=c.blendMode&&b.setBlendMode(c.blendMode);var d=c.getLocalMatrix(),g=d.m02,e=d.m12;0!=(c._flags&32)&&(g=Math.round(g),e=Math.round(e));b.transform(d.m00,d.m10,d.m01,d.m11,g,e);d=c.scissor;null!=d&&b.applyScissor(d.x,d.y,d.width,d.height);c.draw(b)}d=a._compMap.Director_11;if(null!=d){d=d.occludedScenes;for(g=0;g<d.length;)e=d[g],++g,j.render(e,b)}for(d=
a.firstChild;null!=d;)g=d.next,j.render(d,b),d=g;null!=c&&b.restore()};j.hitTestBackwards=function(a,b,c){if(null!=a){var d=j.hitTestBackwards(a.next,b,c);return null!=d?d:j.hitTest(a,b,c)}return null};j.__super__=v;j.prototype=t(v.prototype,{get_name:function(){return"Sprite_1"},getNaturalWidth:function(){return 0},getNaturalHeight:function(){return 0},contains:function(a,b){return this.getViewMatrix().inverseTransform(a,b,j._scratchPoint)&&this.containsLocal(j._scratchPoint.x,j._scratchPoint.y)},
containsLocal:function(a,b){return 0<=a&&a<this.getNaturalWidth()&&0<=b&&b<this.getNaturalHeight()},getLocalMatrix:function(){0!=(this._flags&8)&&(this._flags&=-9,this._localMatrix.compose(this.x._value,this.y._value,this.scaleX._value,this.scaleY._value,3.141592653589793*this.rotation._value/180),this._localMatrix.translate(-this.anchorX._value,-this.anchorY._value));return this._localMatrix},getViewMatrix:function(){if(this.isViewMatrixDirty()){var a=this.getParentSprite();this._viewMatrix=null!=
a?na.multiply(a.getViewMatrix(),this.getLocalMatrix(),this._viewMatrix):this.getLocalMatrix().clone(this._viewMatrix);this._flags&=-17;null!=a&&(this._parentViewMatrixUpdateCount=a._viewMatrixUpdateCount);++this._viewMatrixUpdateCount}return this._viewMatrix},setAnchor:function(a,b){this.anchorX.set__(a);this.anchorY.set__(b);return this},setXY:function(a,b){this.x.set__(a);this.y.set__(b);return this},setRotation:function(a){this.rotation.set__(a);return this},setScale:function(a){this.scaleX.set__(a);
this.scaleY.set__(a);return this},disablePointer:function(){this.set_pointerEnabled(!1);return this},disablePixelSnapping:function(){this.set_pixelSnapping(!1);return this},onAdded:function(){0!=(this._flags&64)&&this.connectHover()},onRemoved:function(){null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)},onUpdate:function(a){this.x.update(a);this.y.update(a);this.rotation.update(a);this.scaleX.update(a);this.scaleY.update(a);this.alpha.update(a);this.anchorX.update(a);
this.anchorY.update(a)},draw:function(){},isViewMatrixDirty:function(){if(0!=(this._flags&16))return!0;var a=this.getParentSprite();return null==a?!1:this._parentViewMatrixUpdateCount!=a._viewMatrixUpdateCount||a.isViewMatrixDirty()},getParentSprite:function(){if(null==this.owner)return null;for(var a=this.owner.parent;null!=a;){var b=a._compMap.Sprite_1;if(null!=b)return b;a=a.parent}return null},connectHover:function(){var a=this;null==this._hoverConnection&&(this._hoverConnection=i._platform.getPointer().move.connect(function(b){for(var c=
b.hit;null!=c;){if(c==a)return;c=c.getParentSprite()}null!=a._pointerOut&&0!=(a._flags&64)&&a._pointerOut.emit(b);a._flags&=-65;a._hoverConnection.dispose();a._hoverConnection=null}))},set_visible:function(a){this._flags=Pa.set(this._flags,2,a);return a},set_pointerEnabled:function(a){this._flags=Pa.set(this._flags,4,a);return a},set_pixelSnapping:function(a){this._flags=Pa.set(this._flags,32,a);return a},onPointerDown:function(a){this.onHover(a);null!=this._pointerDown&&this._pointerDown.emit(a)},
onPointerMove:function(a){this.onHover(a);null!=this._pointerMove&&this._pointerMove.emit(a)},onHover:function(a){if(0==(this._flags&64)&&(this._flags|=64,null!=this._pointerIn||null!=this._pointerOut))null!=this._pointerIn&&this._pointerIn.emit(a),this.connectHover()},onPointerUp:function(a){switch(a.source[1]){case 1:null!=this._pointerOut&&0!=(this._flags&64)&&this._pointerOut.emit(a),this._flags&=-65,null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)}null!=
this._pointerUp&&this._pointerUp.emit(a)},__class__:j});var O=function(a,b,c){j.call(this);this.color=a;this.width=new E(b);this.height=new E(c)};f["flambe.display.FillSprite"]=O;O.__name__=!0;O.__super__=j;O.prototype=t(j.prototype,{draw:function(a){a.fillRect(this.color,0,0,this.width._value,this.height._value)},getNaturalWidth:function(){return this.width._value},getNaturalHeight:function(){return this.height._value},onUpdate:function(a){j.prototype.onUpdate.call(this,a);this.width.update(a);this.height.update(a)},
__class__:O});var pb=function(a){this._kernings=null;this.xOffset=this.yOffset=this.xAdvance=0;this.page=null;this.x=this.y=this.width=this.height=0;this.charCode=a};f["flambe.display.Glyph"]=pb;pb.__name__=!0;pb.prototype={draw:function(a,b,c){0<this.width&&a.drawSubTexture(this.page,b+this.xOffset,c+this.yOffset,this.x,this.y,this.width,this.height)},getKerning:function(a){return null!=this._kernings?o["int"](this._kernings.get(a)):0},setKerning:function(a,b){null==this._kernings&&(this._kernings=
new aa);this._kernings.set(a,b)},__class__:pb};var ia=function(a,b){this.name=b;this._pack=a;this._file=a.getFile(b+".fnt");this.reload()};f["flambe.display.Font"]=ia;ia.__name__=!0;ia.prototype={layoutText:function(a,b,c,d,g){null==g&&(g=0);null==d&&(d=0);null==c&&(c=0);null==b&&(b=W.Left);return new oa(this,a,b,c,d,g)},reload:function(){this._glyphs=new aa;this._glyphs.set(ia.NEWLINE.charCode,ia.NEWLINE);for(var a=new Aa(this._file.toString()),b=new aa,c=this.name.lastIndexOf("/"),c=0<=c?u.substr(this.name,
0,c+1):"",d=a.keywords();d.hasNext();)switch(d.next()){case "info":for(var g=a.pairs();g.hasNext();){var e=g.next();switch(e.key){case "size":this.size=e.getInt()}}break;case "common":for(g=a.pairs();g.hasNext();)switch(e=g.next(),e.key){case "lineHeight":this.lineHeight=e.getInt()}break;case "page":for(var g=0,e=null,f=a.pairs();f.hasNext();){var h=f.next();switch(h.key){case "id":g=h.getInt();break;case "file":e=h.getString()}}e=this._pack.getTexture(c+H.removeFileExtension(e));b.set(g,e);break;
case "char":g=null;for(e=a.pairs();e.hasNext();)switch(f=e.next(),f.key){case "id":g=new pb(f.getInt());break;case "x":g.x=f.getInt();break;case "y":g.y=f.getInt();break;case "width":g.width=f.getInt();break;case "height":g.height=f.getInt();break;case "page":f=f.getInt();g.page=b.get(f);break;case "xoffset":g.xOffset=f.getInt();break;case "yoffset":g.yOffset=f.getInt();break;case "xadvance":g.xAdvance=f.getInt()}this._glyphs.set(g.charCode,g);break;case "kerning":g=null;f=e=0;for(h=a.pairs();h.hasNext();){var i=
h.next();switch(i.key){case "first":g=this._glyphs.get(i.getInt());break;case "second":e=i.getInt();break;case "amount":f=i.getInt()}}null!=g&&0!=f&&g.setKerning(e,f)}},__class__:ia};var W=f["flambe.display.TextAlign"]={__ename__:!0,__constructs__:["Left","Center","Right"]};W.Left=["Left",0];W.Left.__enum__=W;W.Center=["Center",1];W.Center.__enum__=W;W.Right=["Right",2];W.Right.__enum__=W;var oa=function(a,b,c,d,g,e){this.lines=0;var f=this;this._font=a;this._glyphs=[];this._offsets=[];this._lineOffset=
Math.round(a.lineHeight+e);this.bounds=new Ya;for(var h=[],e=b.length,i=0;i<e;){var q=i++,q=b.charCodeAt(q),q=a._glyphs.get(q);null!=q?this._glyphs.push(q):null}for(var b=-1,l=0,j=0,a=a._glyphs.get(10),e=function(){f.bounds.width=Ba.max(f.bounds.width,l);f.bounds.height+=j;h[f.lines]=l;j=l=0;++f.lines},i=0;i<this._glyphs.length;){q=this._glyphs[i];this._offsets[i]=Math.round(l);var k=0<d&&l+q.width>d;k||q==a?(k&&(0<=b?(this._glyphs[b]=a,l=this._offsets[b],i=b):this._glyphs.splice(i,0,a)),b=-1,j=this._lineOffset,
e()):(32==q.charCode&&(b=i),l+=q.xAdvance+g,j=Ba.max(j,q.height+q.yOffset),i+1<this._glyphs.length&&(l+=q.getKerning(this._glyphs[i+1].charCode)));++i}e();g=0;a=oa.getAlignOffset(c,h[0],d);b=1.79769313486231E308;e=-1.79769313486231E308;q=i=0;for(k=this._glyphs.length;q<k;){var n=this._glyphs[q];10==n.charCode&&(g+=this._lineOffset,++i,a=oa.getAlignOffset(c,h[i],d));this._offsets[q]+=a;var o=g+n.yOffset;b<o||(b=o);e=Ba.max(e,o+n.height);++q}this.bounds.x=oa.getAlignOffset(c,this.bounds.width,d);this.bounds.y=
b;this.bounds.height=e-b};f["flambe.display.TextLayout"]=oa;oa.__name__=!0;oa.getAlignOffset=function(a,b,c){switch(a[1]){case 0:return 0;case 2:return c-b;case 1:return Math.round((c-b)/2)}};oa.prototype={draw:function(a){for(var b=0,c=0,d=this._glyphs.length;c<d;){var g=this._glyphs[c];10==g.charCode?b+=this._lineOffset:g.draw(a,this._offsets[c],b);++c}},__class__:oa};var Aa=function(a){this._configText=a;this._keywordPattern=new ba("([A-Za-z]+)(.*)","");this._pairPattern=new ba('([A-Za-z]+)=("[^"]*"|[^\\s]+)',
"")};f["flambe.display._Font.ConfigParser"]=Aa;Aa.__name__=!0;Aa.advance=function(a,b){var c=b.matchedPos();return u.substr(a,c.pos+c.len,a.length)};Aa.prototype={keywords:function(){var a=this,b=this._configText;return{next:function(){b=Aa.advance(b,a._keywordPattern);a._pairText=a._keywordPattern.matched(2);return a._keywordPattern.matched(1)},hasNext:function(){return a._keywordPattern.match(b)}}},pairs:function(){var a=this,b=this._pairText;return{next:function(){b=Aa.advance(b,a._pairPattern);
return new Kb(a._pairPattern.matched(1),a._pairPattern.matched(2))},hasNext:function(){return a._pairPattern.match(b)}}},__class__:Aa};var Kb=function(a,b){this.key=a;this._value=b};f["flambe.display._Font.ConfigPair"]=Kb;Kb.__name__=!0;Kb.prototype={getInt:function(){return o.parseInt(this._value)},getString:function(){return 34!=this._value.charCodeAt(0)?null:u.substr(this._value,1,this._value.length-2)},__class__:Kb};var Lb=function(){};f["flambe.display.Graphics"]=Lb;Lb.__name__=!0;Lb.prototype=
{__class__:Lb};var A=function(a){j.call(this);this.texture=a};f["flambe.display.ImageSprite"]=A;A.__name__=!0;A.__super__=j;A.prototype=t(j.prototype,{draw:function(a){null!=this.texture&&a.drawTexture(this.texture,0,0)},getNaturalWidth:function(){return null!=this.texture?this.texture.get_width():0},getNaturalHeight:function(){return null!=this.texture?this.texture.get_height():0},__class__:A});var Ca=f["flambe.display.Orientation"]={__ename__:!0,__constructs__:["Portrait","Landscape"]};Ca.Portrait=
["Portrait",0];Ca.Portrait.__enum__=Ca;Ca.Landscape=["Landscape",1];Ca.Landscape.__enum__=Ca;var qb=function(){};f["flambe.display.Texture"]=qb;qb.__name__=!0;qb.__interfaces__=[ma];qb.prototype={__class__:qb};var cc=function(){};f["flambe.display.SubTexture"]=cc;cc.__name__=!0;cc.__interfaces__=[qb];var Ia=function(a,b){null==b&&(b="");this._layout=null;var c=this;j.call(this);this._font=a;this._text=b;this._align=W.Left;this._flags|=128;var d=function(){c._flags|=128};this.wrapWidth=new E(0,d);
this.letterSpacing=new E(0,d);this.lineSpacing=new E(0,d)};f["flambe.display.TextSprite"]=Ia;Ia.__name__=!0;Ia.__super__=j;Ia.prototype=t(j.prototype,{draw:function(a){this.updateLayout();this._layout.draw(a)},getNaturalWidth:function(){this.updateLayout();return 0<this.wrapWidth._value?this.wrapWidth._value:this._layout.bounds.width},getNaturalHeight:function(){this.updateLayout();var a=this._layout.lines*(this._font.lineHeight+this.lineSpacing._value),b=this._layout.bounds.height;return a>b?a:b},
containsLocal:function(a,b){this.updateLayout();return this._layout.bounds.contains(a,b)},set_text:function(a){a!=this._text&&(this._text=a,this._flags|=128);return a},set_align:function(a){a!=this._align&&(this._align=a,this._flags|=128);return a},updateLayout:function(){0!=(this._flags&128)&&(this._flags&=-129,this._layout=this._font.layoutText(this._text,this._align,this.wrapWidth._value,this.letterSpacing._value,this.lineSpacing._value))},onUpdate:function(a){j.prototype.onUpdate.call(this,a);
this.wrapWidth.update(a);this.letterSpacing.update(a);this.lineSpacing.update(a)},__class__:Ia});var R=f["flambe.input.MouseButton"]={__ename__:!0,__constructs__:["Left","Middle","Right","Unknown"]};R.Left=["Left",0];R.Left.__enum__=R;R.Middle=["Middle",1];R.Middle.__enum__=R;R.Right=["Right",2];R.Right.__enum__=R;R.Unknown=function(a){a=["Unknown",3,a];a.__enum__=R;return a};var ea=f["flambe.input.MouseCursor"]={__ename__:!0,__constructs__:["Default","Button","None"]};ea.Default=["Default",0];ea.Default.__enum__=
ea;ea.Button=["Button",1];ea.Button.__enum__=ea;ea.None=["None",2];ea.None.__enum__=ea;var Mb=function(){this.init(0,0,0,null)};f["flambe.input.MouseEvent"]=Mb;Mb.__name__=!0;Mb.prototype={init:function(a,b,c,d){this.id=a;this.viewX=b;this.viewY=c;this.button=d},__class__:Mb};var rb=f["flambe.input.EventSource"]={__ename__:!0,__constructs__:["Mouse","Touch"]};rb.Mouse=function(a){a=["Mouse",0,a];a.__enum__=rb;return a};rb.Touch=function(a){a=["Touch",1,a];a.__enum__=rb;return a};var Nb=function(){this.init(0,
0,0,null,null)};f["flambe.input.PointerEvent"]=Nb;Nb.__name__=!0;Nb.prototype={init:function(a,b,c,d,g){this.id=a;this.viewX=b;this.viewY=c;this.hit=d;this.source=g;this._stopped=!1},__class__:Nb};var Ob=function(a){this.id=a;this._source=rb.Touch(this)};f["flambe.input.TouchPoint"]=Ob;Ob.__name__=!0;Ob.prototype={init:function(a,b){this.viewX=a;this.viewY=b},__class__:Ob};var Ba=function(){};f["flambe.math.FMath"]=Ba;Ba.__name__=!0;Ba.max=function(a,b){return a>b?a:b};Ba.clamp=function(a,b,c){return a<
b?b:a>c?c:a};var na=function(){this.identity()};f["flambe.math.Matrix"]=na;na.__name__=!0;na.multiply=function(a,b,c){null==c&&(c=new na);var d=a.m00*b.m00+a.m01*b.m10,g=a.m00*b.m01+a.m01*b.m11,e=a.m00*b.m02+a.m01*b.m12+a.m02;c.m00=d;c.m01=g;c.m02=e;d=a.m10*b.m00+a.m11*b.m10;g=a.m10*b.m01+a.m11*b.m11;e=a.m10*b.m02+a.m11*b.m12+a.m12;c.m10=d;c.m11=g;c.m12=e;return c};na.prototype={set:function(a,b,c,d,g,e){this.m00=a;this.m01=c;this.m02=g;this.m10=b;this.m11=d;this.m12=e},identity:function(){this.set(1,
0,0,1,0,0)},compose:function(a,b,c,d,g){var e=Math.sin(g),g=Math.cos(g);this.set(g*c,e*c,-e*d,g*d,a,b)},translate:function(a,b){this.m02+=this.m00*a+this.m01*b;this.m12+=this.m11*b+this.m10*a},determinant:function(){return this.m00*this.m11-this.m01*this.m10},inverseTransform:function(a,b,c){var d=this.determinant();if(0==d)return!1;a-=this.m02;b-=this.m12;c.x=(a*this.m11-b*this.m01)/d;c.y=(b*this.m00-a*this.m10)/d;return!0},clone:function(a){null==a&&(a=new na);a.set(this.m00,this.m10,this.m01,this.m11,
this.m02,this.m12);return a},__class__:na};var Ya=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.set(a,b,c,d)};f["flambe.math.Rectangle"]=Ya;Ya.__name__=!0;Ya.prototype={set:function(a,b,c,d){this.x=a;this.y=b;this.width=c;this.height=d},contains:function(a,b){a-=this.x;if(0<=this.width){if(0>a||a>this.width)return!1}else if(0<a||a<this.width)return!1;b-=this.y;if(0<=this.height){if(0>b||b>this.height)return!1}else if(0<b||b<this.height)return!1;return!0},__class__:Ya};
var N=function(){this._disposed=!1};f["flambe.platform.BasicAsset"]=N;N.__name__=!0;N.__interfaces__=[ma];N.prototype={dispose:function(){this._disposed||(this._disposed=!0,this.onDisposed())},onDisposed:function(){null},__class__:N};var pa=function(a,b){var c=this;this.manifest=b;this._platform=a;this.promise=new sb;this._bytesLoaded=new T;this._pack=new tb(b,this);var d=Va.array(b);if(0==d.length)this.handleSuccess();else{for(var g=new T,e=0;e<d.length;){var f=d[e];++e;var h=g.get(f.name);null==
h&&(h=[],g.set(f.name,h));h.push(f)}this._assetsRemaining=Va.count(g);for(d=g.iterator();d.hasNext();)g=[d.next()],this.pickBestEntry(g[0],function(a){return function(d){if(null!=d){var g=b.getFullURL(d);try{c.loadEntry(g,d)}catch(e){c.handleError(d,"Unexpected error: "+o.string(e))}g=c.promise;g.set_total(g._total+d.bytes)}else d=a[0][0],pa.isAudio(d.format)?c.handleLoad(d,V.getInstance()):c.handleError(d,"Could not find a supported format to load")}}(g))}};f["flambe.platform.BasicAssetPackLoader"]=
pa;pa.__name__=!0;pa.isAudio=function(a){switch(a[1]){case 8:case 9:case 10:case 11:case 12:return!0;default:return!1}};pa.prototype={onDisposed:function(){},pickBestEntry:function(a,b){this.getAssetFormats(function(c){for(var d=0;d<c.length;){var g=c[d];++d;for(var e=0;e<a.length;){var f=a[e];++e;if(f.format==g){b(f);return}}}b(null)})},loadEntry:function(){null},getAssetFormats:function(){null},handleLoad:function(a,b){if(!this._pack.disposed){this.handleProgress(a,a.bytes);var c;switch(a.format[1]){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c=
this._pack.textures;break;case 8:case 9:case 10:case 11:case 12:c=this._pack.sounds;break;case 13:c=this._pack.files}c.set(a.name,b);this._assetsRemaining-=1;0==this._assetsRemaining&&this.handleSuccess()}},handleProgress:function(a,b){this._bytesLoaded.set(a.name,b);for(var c=0,d=this._bytesLoaded.iterator();d.hasNext();)var g=d.next(),c=c+g;this.promise.set_progress(c)},handleSuccess:function(){this.promise.set_result(this._pack)},handleError:function(a,b){this.promise.error.emit(H.withFields(b,
["url",a.url]))},handleTextureError:function(a){this.handleError(a,"Failed to create texture. Is the GPU context unavailable?")},__class__:pa};var tb=function(a,b){this.disposed=!1;this._manifest=a;this.loader=b;this.textures=new T;this.sounds=new T;this.files=new T};f["flambe.platform._BasicAssetPackLoader.BasicAssetPack"]=tb;tb.__name__=!0;tb.__interfaces__=[nb];tb.prototype={getTexture:function(a,b){null==b&&(b=!0);var c=this.textures.get(a);if(null==c&&b)throw H.withFields("Missing texture",["name",
a]);return c},getFile:function(a,b){null==b&&(b=!0);var c=this.files.get(a);if(null==c&&b)throw H.withFields("Missing file",["name",a]);return c},dispose:function(){if(!this.disposed){this.disposed=!0;for(var a=this.textures.iterator();a.hasNext();)a.next().dispose();this.textures=null;for(a=this.sounds.iterator();a.hasNext();)a.next().dispose();this.sounds=null;for(a=this.files.iterator();a.hasNext();)a.next().dispose();this.files=null;this.loader.onDisposed()}},__class__:tb};var Qa=function(a){this._disposed=
!1;this._content=a};f["flambe.platform.BasicFile"]=Qa;Qa.__name__=!0;Qa.__interfaces__=[ob];Qa.__super__=N;Qa.prototype=t(N.prototype,{toString:function(){return this._content},onDisposed:function(){this._content=null},__class__:Qa});var hc=function(){};f["flambe.subsystem.MouseSystem"]=hc;hc.__name__=!0;var S=function(a){this._pointer=a;this._source=rb.Mouse(S._sharedEvent);this.down=new D;this.move=new D;this.up=new D;this.scroll=new D;this._y=this._x=0;this._cursor=ea.Default;this._buttonStates=
new aa};f["flambe.platform.BasicMouse"]=S;S.__name__=!0;S.__interfaces__=[hc];S.prototype={submitDown:function(a,b,c){this._buttonStates.exists(c)||(this._buttonStates.set(c,!0),this.prepare(a,b,Pb.toButton(c)),this._pointer.submitDown(a,b,this._source),this.down.emit(S._sharedEvent))},submitMove:function(a,b){this.prepare(a,b,null);this._pointer.submitMove(a,b,this._source);this.move.emit(S._sharedEvent)},submitUp:function(a,b,c){this._buttonStates.exists(c)&&(this._buttonStates.remove(c),this.prepare(a,
b,Pb.toButton(c)),this._pointer.submitUp(a,b,this._source),this.up.emit(S._sharedEvent))},submitScroll:function(a,b,c){this._x=a;this._y=b;if(null==this.scroll._head)return!1;this.scroll.emit(c);return!0},prepare:function(a,b,c){this._x=a;this._y=b;S._sharedEvent.init(S._sharedEvent.id+1,a,b,c)},__class__:S};var Qb=function(){};f["flambe.subsystem.PointerSystem"]=Qb;Qb.__name__=!0;Qb.prototype={__class__:Qb};var I=function(a,b,c){null==c&&(c=!1);null==b&&(b=0);null==a&&(a=0);this.down=new D;this.move=
new D;this.up=new D;this._x=a;this._y=b;this._isDown=c};f["flambe.platform.BasicPointer"]=I;I.__name__=!0;I.__interfaces__=[Qb];I.prototype={get_x:function(){return this._x},get_y:function(){return this._y},isDown:function(){return this._isDown},submitDown:function(a,b,c){if(!this._isDown){this.submitMove(a,b,c);this._isDown=!0;var d=[],g=j.hitTest(i.root,a,b);if(null!=g){var e=g.owner;do{var f=e._compMap.Sprite_1;null!=f&&d.push(f);e=e.parent}while(null!=e)}this.prepare(a,b,g,c);for(a=0;a<d.length;)if(b=
d[a],++a,b.onPointerDown(I._sharedEvent),I._sharedEvent._stopped)return;this.down.emit(I._sharedEvent)}},submitMove:function(a,b,c){if(!(a==this._x&&b==this._y)){var d=[],g=j.hitTest(i.root,a,b);if(null!=g){var e=g.owner;do{var f=e._compMap.Sprite_1;null!=f&&d.push(f);e=e.parent}while(null!=e)}this.prepare(a,b,g,c);for(a=0;a<d.length;)if(b=d[a],++a,b.onPointerMove(I._sharedEvent),I._sharedEvent._stopped)return;this.move.emit(I._sharedEvent)}},submitUp:function(a,b,c){if(this._isDown){this.submitMove(a,
b,c);this._isDown=!1;var d=[],g=j.hitTest(i.root,a,b);if(null!=g){var e=g.owner;do{var f=e._compMap.Sprite_1;null!=f&&d.push(f);e=e.parent}while(null!=e)}this.prepare(a,b,g,c);for(a=0;a<d.length;)if(b=d[a],++a,b.onPointerUp(I._sharedEvent),I._sharedEvent._stopped)return;this.up.emit(I._sharedEvent)}},prepare:function(a,b,c,d){this._x=a;this._y=b;I._sharedEvent.init(I._sharedEvent.id+1,a,b,c,d)},__class__:I};var qa=function(a,b,c){this._x=this._y=0;this._parent=null;this.rootX=this.rootY=0;this._disposed=
!1;this.root=a;this._width=b;this._height=c};f["flambe.platform.BasicTexture"]=qa;qa.__name__=!0;qa.__interfaces__=[cc];qa.__super__=N;qa.prototype=t(N.prototype,{readPixels:function(a,b,c,d){return this.root.readPixels(this.rootX+a,this.rootY+b,c,d)},writePixels:function(a,b,c,d,g){this.root.writePixels(a,this.rootX+b,this.rootY+c,d,g)},subTexture:function(a,b,c,d){c=this.root.createTexture(c,d);c._parent=this;c._x=a;c._y=b;c.rootX=this.rootX+a;c.rootY=this.rootY+b;return c},get_graphics:function(){return this.root.getGraphics()},
onDisposed:function(){null==this._parent&&this.root.dispose()},get_width:function(){return this._width},get_height:function(){return this._height},__class__:qa});var ub=function(){};f["flambe.subsystem.TouchSystem"]=ub;ub.__name__=!0;ub.prototype={__class__:ub};var lb=function(a,b){null==b&&(b=4);this._pointer=a;this._maxPoints=b;this._pointMap=new aa;this._points=[];this.down=new D;this.move=new D;this.up=new D};f["flambe.platform.BasicTouch"]=lb;lb.__name__=!0;lb.__interfaces__=[ub];lb.prototype=
{get_supported:function(){return!0},submitDown:function(a,b,c){if(!this._pointMap.exists(a)){var d=new Ob(a);d.init(b,c);this._pointMap.set(a,d);this._points.push(d);null==this._pointerTouch&&(this._pointerTouch=d,this._pointer.submitDown(b,c,d._source));this.down.emit(d)}},submitMove:function(a,b,c){a=this._pointMap.get(a);null!=a&&(a.init(b,c),this._pointerTouch==a&&this._pointer.submitMove(b,c,a._source),this.move.emit(a))},submitUp:function(a,b,c){var d=this._pointMap.get(a);null!=d&&(d.init(b,
c),this._pointMap.remove(a),u.remove(this._points,d),this._pointerTouch==d&&(this._pointerTouch=null,this._pointer.submitUp(b,c,d._source)),this.up.emit(d))},__class__:lb};var vb=function(){};f["flambe.sound.Sound"]=vb;vb.__name__=!0;vb.__interfaces__=[ma];var V=function(){this._disposed=!1;this._playback=new wb(this)};f["flambe.platform.DummySound"]=V;V.__name__=!0;V.__interfaces__=[vb];V.getInstance=function(){null==V._instance&&(V._instance=new V);return V._instance};V.__super__=N;V.prototype=
t(N.prototype,{onDisposed:function(){},__class__:V});var dc=function(){};f["flambe.sound.Playback"]=dc;dc.__name__=!0;dc.__interfaces__=[Y];var wb=function(a){this._sound=a;this.volume=new E(0);this._complete=new Q(!0)};f["flambe.platform.DummyPlayback"]=wb;wb.__name__=!0;wb.__interfaces__=[dc];wb.prototype={dispose:function(){},__class__:wb};var mb=function(){this.down=new D;this.move=new D;this.up=new D};f["flambe.platform.DummyTouch"]=mb;mb.__name__=!0;mb.__interfaces__=[ub];mb.prototype={get_supported:function(){return!1},
__class__:mb};var Ra=function(){this._entries=[]};f["flambe.platform.EventGroup"]=Ra;Ra.__name__=!0;Ra.__interfaces__=[Y];Ra.prototype={addListener:function(a,b,c){a.addEventListener(b,c,!1);this._entries.push(new Rb(a,b,c))},addDisposingListener:function(a,b,c){var d=this;this.addListener(a,b,function(a){d.dispose();c(a)})},dispose:function(){for(var a=0,b=this._entries;a<b.length;){var c=b[a];++a;c.dispatcher.removeEventListener(c.type,c.listener,!1)}this._entries=[]},__class__:Ra};var Rb=function(a,
b,c){this.dispatcher=a;this.type=b;this.listener=c};f["flambe.platform._EventGroup.Entry"]=Rb;Rb.__name__=!0;Rb.prototype={__class__:Rb};var xb=function(){};f["flambe.platform.InternalGraphics"]=xb;xb.__name__=!0;xb.__interfaces__=[Lb];xb.prototype={__class__:xb};var Sb=function(){};f["flambe.subsystem.RendererSystem"]=Sb;Sb.__name__=!0;Sb.prototype={__class__:Sb};var yb=function(){};f["flambe.platform.InternalRenderer"]=yb;yb.__name__=!0;yb.__interfaces__=[Sb];yb.prototype={__class__:yb};var xa=
function(){this._tickables=[]};f["flambe.platform.MainLoop"]=xa;xa.__name__=!0;xa.updateEntity=function(a,b){var c=a._compMap.SpeedAdjuster_12;if(null!=c&&(c._realDt=b,b*=c.scale._value,0>=b)){c.onUpdate(b);return}for(c=a.firstComponent;null!=c;){var d=c.next;0==(c._flags&1)&&(c._flags|=1,c.onStart());c.onUpdate(b);c=d}for(c=a.firstChild;null!=c;)d=c.next,xa.updateEntity(c,b),c=d};xa.prototype={update:function(a){if(!(0>=a)){1<a&&(a=1);for(var b=0;b<this._tickables.length;){var c=this._tickables[b];
null==c||c.update(a)?this._tickables.splice(b,1):++b}i.volume.update(a);xa.updateEntity(i.root,a)}},render:function(a){var b=a.graphics;null!=b&&(a.willRender(),j.render(i.root,b),a.didRender())},__class__:xa};var Pb=function(){};f["flambe.platform.MouseCodes"]=Pb;Pb.__name__=!0;Pb.toButton=function(a){switch(a){case 0:return R.Left;case 1:return R.Middle;case 2:return R.Right}return R.Unknown(a)};var Tb=function(){};f["flambe.platform.TextureRoot"]=Tb;Tb.__name__=!0;Tb.prototype={__class__:Tb};var ec=
function(){};f["flambe.platform.Tickable"]=ec;ec.__name__=!0;ec.prototype={__class__:ec};var U=function(a,b){this._firstDraw=!1;this._canvasCtx=a.getContext("2d",{alpha:b})};f["flambe.platform.html.CanvasGraphics"]=U;U.__name__=!0;U.__interfaces__=[xb];U.prototype={save:function(){this._canvasCtx.save()},transform:function(a,b,c,d,g,e){this._canvasCtx.transform(a,b,c,d,g,e)},restore:function(){this._canvasCtx.restore()},drawTexture:function(a,b,c){this.drawSubTexture(a,b,c,0,0,a.get_width(),a.get_height())},
drawSubTexture:function(a,b,c,d,g,e,f){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawSubTexture(a,b,c,d,g,e,f),this._canvasCtx.globalCompositeOperation="source-over"):this._canvasCtx.drawImage(a.root.image,a.rootX+d|0,a.rootY+g|0,e|0,f|0,b|0,c|0,e|0,f|0)},fillRect:function(a,b,c,d,g){if(this._firstDraw)this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.fillRect(a,b,c,d,g),this._canvasCtx.globalCompositeOperation="source-over";else{for(a=
(16777215&a).toString(16);6>a.length;)a="0"+o.string(a);this._canvasCtx.fillStyle="#"+o.string(a);this._canvasCtx.fillRect(b|0,c|0,d|0,g|0)}},multiplyAlpha:function(a){this._canvasCtx.globalAlpha*=a},setBlendMode:function(a){var b;switch(a[1]){case 0:b="source-over";break;case 1:b="lighter";break;case 2:b="multiply";break;case 3:b="screen";break;case 4:b="destination-in";break;case 5:b="copy"}this._canvasCtx.globalCompositeOperation=b},applyScissor:function(a,b,c,d){this._canvasCtx.beginPath();this._canvasCtx.rect(a|
0,b|0,c|0,d|0);this._canvasCtx.clip()},willRender:function(){this._firstDraw=!0},didRender:function(){},__class__:U};var ya=function(a){this.graphics=new U(a,!1);this._hasGPU=new Q(!0)};f["flambe.platform.html.CanvasRenderer"]=ya;ya.__name__=!0;ya.__interfaces__=[yb];ya.prototype={get_type:function(){return fa.Canvas},createTextureFromImage:function(a){a=new Da(ya.CANVAS_TEXTURES?s.createCanvas(a):a);return a.createTexture(a.width,a.height)},createTexture:function(a,b){return(new Da(s.createEmptyCanvas(a,
b))).createTexture(a,b)},getCompressedTextureFormats:function(){return[]},createCompressedTexture:function(){return null},willRender:function(){this.graphics.willRender()},didRender:function(){this.graphics.didRender()},__class__:ya};var zb=function(a,b,c){qa.call(this,a,b,c)};f["flambe.platform.html.CanvasTexture"]=zb;zb.__name__=!0;zb.__super__=qa;zb.prototype=t(qa.prototype,{__class__:zb});var Da=function(a){this._graphics=null;this.updateCount=0;this._disposed=!1;this.image=a;this.width=a.width;
this.height=a.height};f["flambe.platform.html.CanvasTextureRoot"]=Da;Da.__name__=!0;Da.__interfaces__=[Tb];Da.__super__=N;Da.prototype=t(N.prototype,{createTexture:function(a,b){return new zb(this,a,b)},readPixels:function(a,b,c,d){a=this.getContext2d().getImageData(a,b,c,d).data;return Sa.ofData(a)},writePixels:function(a,b,c,d,g){var e=this.getContext2d(),f=e.createImageData(d,g),h=f.data;if(null!=h.set)h.set(a.b);else{d=4*d*g;for(g=0;g<d;){var i=g++;h[i]=a.b[i]}}e.putImageData(f,b,c);++this.updateCount},
getGraphics:function(){null==this._graphics&&(this.getContext2d(),this._graphics=new Ab(this));return this._graphics},getContext2d:function(){K.__instanceof(this.image,HTMLCanvasElement)||(this.image=s.createCanvas(this.image));return this.image.getContext("2d")},onDisposed:function(){this._graphics=this.image=null},__class__:Da});var Ab=function(a){U.call(this,a.image,!0);this._renderTarget=a};f["flambe.platform.html._CanvasTextureRoot.InternalGraphics"]=Ab;Ab.__name__=!0;Ab.__super__=U;Ab.prototype=
t(U.prototype,{drawTexture:function(a,b,c){U.prototype.drawTexture.call(this,a,b,c);++this._renderTarget.updateCount},drawSubTexture:function(a,b,c,d,g,e,f){U.prototype.drawSubTexture.call(this,a,b,c,d,g,e,f);++this._renderTarget.updateCount},fillRect:function(a,b,c,d,g){U.prototype.fillRect.call(this,a,b,c,d,g);++this._renderTarget.updateCount},__class__:Ab});var x=function(a,b){pa.call(this,a,b)};f["flambe.platform.html.HtmlAssetPackLoader"]=x;x.__name__=!0;x.detectImageFormats=function(a){var b=
[k.PNG,k.JPG,k.GIF],c=2,d;d=window.document.createElement("img");d.onload=d.onerror=function(){1==d.width&&b.unshift(k.WEBP);--c;0==c&&a(b)};d.src="data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==";var g;g=window.document.createElement("img");g.onload=g.onerror=function(){1==g.width&&b.unshift(k.JXR);--c;0==c&&a(b)};g.src="data:image/vnd.ms-photo;base64,SUm8AQgAAAAFAAG8AQAQAAAASgAAAIC8BAABAAAAAQAAAIG8BAABAAAAAQAAAMC8BAABAAAAWgAAAMG8BAABAAAAHwAAAAAAAAAkw91vA07+S7GFPXd2jckNV01QSE9UTwAZAYBxAAAAABP/gAAEb/8AAQAAAQAAAA=="};
x.detectAudioFormats=function(){var a;a=window.document.createElement("audio");if(null==a||null==z(a,a.canPlayType))return[];var b=new ba("\\b(iPhone|iPod|iPad|Android|Windows Phone)\\b",""),c=window.navigator.userAgent;if(!C.get_supported()&&b.match(c))return[];for(var b=[{format:k.M4A,mimeType:"audio/mp4; codecs=mp4a"},{format:k.MP3,mimeType:"audio/mpeg"},{format:k.OPUS,mimeType:"audio/ogg; codecs=opus"},{format:k.OGG,mimeType:"audio/ogg; codecs=vorbis"},{format:k.WAV,mimeType:"audio/wav"}],c=[],
d=0;d<b.length;){var g=b[d];++d;var e="";try{e=a.canPlayType(g.mimeType)}catch(f){}""!=e&&c.push(g.format)}return c};x.supportsBlob=function(){if(x._detectBlobSupport){x._detectBlobSupport=!1;if((new ba("\\bSilk\\b","")).match(window.navigator.userAgent)||null==window.Blob)return!1;var a=new XMLHttpRequest;a.open("GET",".",!0);if(""!=a.responseType)return!1;a.responseType="blob";if("blob"!=a.responseType)return!1;x._URL=s.loadExtension("URL").value}return null!=x._URL&&null!=x._URL.createObjectURL};
x.__super__=pa;x.prototype=t(pa.prototype,{loadEntry:function(a,b){var c=this;switch(b.format[1]){case 0:case 1:case 2:case 3:case 4:var d;d=window.document.createElement("img");var g=new Ra;g.addDisposingListener(d,"load",function(){x.supportsBlob()&&x._URL.revokeObjectURL(d.src);var a=c._platform.getRenderer().createTextureFromImage(d);null!=a?c.handleLoad(b,a):c.handleTextureError(b)});g.addDisposingListener(d,"error",function(){c.handleError(b,"Failed to load image")});x.supportsBlob()?this.download(a,
b,"blob",function(a){d.src=x._URL.createObjectURL(a)}):d.src=a;break;case 5:case 6:case 7:this.download(a,b,"arraybuffer",function(){var a=c._platform.getRenderer().createCompressedTexture(b.format,null);null!=a?c.handleLoad(b,a):c.handleTextureError(b)});break;case 8:case 9:case 10:case 11:case 12:if(C.get_supported())this.download(a,b,"arraybuffer",function(a){C.ctx.decodeAudioData(a,function(a){c.handleLoad(b,new C(a))},function(){c.handleLoad(b,V.getInstance())})});else{var e;e=window.document.createElement("audio");
e.preload="auto";var f=++x._mediaRefCount;null==x._mediaElements&&(x._mediaElements=new aa);x._mediaElements.set(f,e);g=new Ra;g.addDisposingListener(e,"canplaythrough",function(){x._mediaElements.remove(f);c.handleLoad(b,new Ta(e))});g.addDisposingListener(e,"error",function(){x._mediaElements.remove(f);var a=e.error.code;3==a||4==a?c.handleLoad(b,V.getInstance()):c.handleError(b,"Failed to load audio: "+e.error.code)});g.addListener(e,"progress",function(){if(0<e.buffered.length&&0<e.duration){var a=
e.buffered.end(0)/e.duration;c.handleProgress(b,a*b.bytes|0)}});e.src=a;e.load()}break;case 13:this.download(a,b,"text",function(a){c.handleLoad(b,new Qa(a))})}},getAssetFormats:function(a){var b=this;null==x._supportedFormats&&(x._supportedFormats=new sb,x.detectImageFormats(function(a){x._supportedFormats.set_result(b._platform.getRenderer().getCompressedTextureFormats().concat(a).concat(x.detectAudioFormats()).concat([k.Data]))}));x._supportedFormats.get(a)},download:function(a,b,c,d){var g=this,
e=null,f=null,h=0,i=!1,j=function(){i&&(i=!1,window.clearInterval(h))},l=3,k=function(){--l;return 0<=l?(f(),!0):!1},f=function(){j();null!=e&&e.abort();e=new XMLHttpRequest;e.open("GET",a,!0);e.responseType=c;var f=0;e.onprogress=function(a){i||(i=!0,h=window.setInterval(function(){4!=e.readyState&&5E3<Date.now()-f&&!k()&&(j(),g.handleError(b,"Download stalled"))},1E3));f=Date.now();g.handleProgress(b,a.loaded)};e.onerror=function(){if(0!=e.status||!k())j(),g.handleError(b,"HTTP error "+e.status)};
e.onload=function(){var a=e.response;null==a&&(a=e.responseText);j();d(a)};e.send()};f()},__class__:x});var kb=function(a,b){S.call(this,a);this._canvas=b};f["flambe.platform.html.HtmlMouse"]=kb;kb.__name__=!0;kb.__super__=S;kb.prototype=t(S.prototype,{__class__:kb});var Ta=function(a){this._disposed=!1;this.audioElement=a};f["flambe.platform.html.HtmlSound"]=Ta;Ta.__name__=!0;Ta.__interfaces__=[vb];Ta.__super__=N;Ta.prototype=t(N.prototype,{onDisposed:function(){this.audioElement=null},__class__:Ta});
var Ub=function(){};f["flambe.subsystem.StageSystem"]=Ub;Ub.__name__=!0;Ub.prototype={__class__:Ub};var wa=function(a){var b=this;this._canvas=a;this.resize=new ra;this.scaleFactor=wa.computeScaleFactor();1!=this.scaleFactor&&(s.setVendorStyle(this._canvas,"transform-origin","top left"),s.setVendorStyle(this._canvas,"transform","scale("+1/this.scaleFactor+")"));s.SHOULD_HIDE_MOBILE_BROWSER&&(window.addEventListener("orientationchange",function(){s.callLater(z(b,b.hideMobileBrowser),200)},!1),this.hideMobileBrowser());
window.addEventListener("resize",z(this,this.onWindowResize),!1);this.onWindowResize(null);this.orientation=new Q(null);null!=window.orientation&&(window.addEventListener("orientationchange",z(this,this.onOrientationChange),!1),this.onOrientationChange(null));this.fullscreen=new Q(!1);s.addVendorListener(window.document,"fullscreenchange",function(){b.updateFullscreen()},!1);this.updateFullscreen()};f["flambe.platform.html.HtmlStage"]=wa;wa.__name__=!0;wa.__interfaces__=[Ub];wa.computeScaleFactor=
function(){var a=window.devicePixelRatio;null==a&&(a=1);var b=window.document.createElement("canvas").getContext("2d"),b=s.loadExtension("backingStorePixelRatio",b).value;null==b&&(b=1);a/=b;b=window.screen.height;return 1136<a*window.screen.width||1136<a*b?1:a};wa.prototype={get_width:function(){return this._canvas.width},get_height:function(){return this._canvas.height},onWindowResize:function(){var a=this._canvas.parentElement.getBoundingClientRect();this.resizeCanvas(a.width,a.height)},resizeCanvas:function(a,
b){var c=this.scaleFactor*a,d=this.scaleFactor*b;if(this._canvas.width==c&&this._canvas.height==d)return!1;this._canvas.width=c|0;this._canvas.height=d|0;this.resize.emit();return!0},hideMobileBrowser:function(){var a=this,b=window.document.documentElement.style;b.height=window.innerHeight+100+"px";b.width=window.innerWidth+"px";b.overflow="visible";s.callLater(function(){s.hideMobileBrowser();s.callLater(function(){b.height=window.innerHeight+"px";a.onWindowResize(null)},100)})},onOrientationChange:function(){this.orientation.set__(s.orientation(window.orientation))},
updateFullscreen:function(){this.fullscreen.set__(!0==s.loadFirstExtension(["fullscreen","fullScreen","isFullScreen"],window.document).value)},__class__:wa};var s=function(){};f["flambe.platform.html.HtmlUtil"]=s;s.__name__=!0;s.callLater=function(a,b){null==b&&(b=0);window.setTimeout(a,b)};s.hideMobileBrowser=function(){window.scrollTo(1,0)};s.loadExtension=function(a,b){null==b&&(b=window);var c=Ea.field(b,a);if(null!=c)return{prefix:"",field:a,value:c};for(var c=a.charAt(0).toUpperCase()+u.substr(a,
1,null),d=0,e=s.VENDOR_PREFIXES;d<e.length;){var f=e[d];++d;var i=f+c,h=Ea.field(b,i);if(null!=h)return{prefix:f,field:i,value:h}}return{prefix:null,field:null,value:null}};s.loadFirstExtension=function(a,b){for(var c=0;c<a.length;){var d=a[c];++c;d=s.loadExtension(d,b);if(null!=d.field)return d}return{prefix:null,field:null,value:null}};s.polyfill=function(a,b){null==b&&(b=window);var c=s.loadExtension(a,b).value;if(null==c)return!1;b[a]=c;return!0};s.setVendorStyle=function(a,b,c){for(var a=a.style,
d=0,e=s.VENDOR_PREFIXES;d<e.length;){var f=e[d];++d;a.setProperty("-"+f+"-"+b,c)}a.setProperty(b,c)};s.addVendorListener=function(a,b,c,d){for(var e=0,f=s.VENDOR_PREFIXES;e<f.length;){var i=f[e];++e;a.addEventListener(i+b,c,d)}a.addEventListener(b,c,d)};s.orientation=function(a){switch(a){case -90:case 90:return Ca.Landscape;default:return Ca.Portrait}};s.createEmptyCanvas=function(a,b){var c;c=window.document.createElement("canvas");c.width=a;c.height=b;return c};s.createCanvas=function(a){var b=
s.createEmptyCanvas(a.width,a.height),c=b.getContext("2d");c.save();c.globalCompositeOperation="copy";c.drawImage(a,0,0);c.restore();return b};s.fixAndroidMath=function(){if(0<=window.navigator.userAgent.indexOf("Linux; U; Android 4")){var a=Math.sin,b=Math.cos;Math.sin=function(b){return 0==b?0:a(b)};Math.cos=function(a){return 0==a?1:b(a)}}};var C=function(a){this._disposed=!1;this.buffer=a};f["flambe.platform.html.WebAudioSound"]=C;C.__name__=!0;C.__interfaces__=[vb];C.get_supported=function(){if(C._detectSupport){C._detectSupport=
!1;var a=s.loadExtension("AudioContext").value;null!=a&&(C.ctx=new a,C.gain=C.createGain(),C.gain.connect(C.ctx.destination),i.volume.watch(function(a){C.gain.gain.value=a}))}return null!=C.ctx};C.createGain=function(){return null!=C.ctx.createGain?C.ctx.createGain():C.ctx.createGainNode()};C.__super__=N;C.prototype=t(N.prototype,{onDisposed:function(){this.buffer=null},__class__:C});var $a=function(){this._width=this._height=-1;this._transitor=null;v.call(this);this.scenes=[];this.occludedScenes=
[];this._root=new n};f["flambe.scene.Director"]=$a;$a.__name__=!0;$a.__super__=v;$a.prototype=t(v.prototype,{get_name:function(){return"Director_11"},pushScene:function(a,b){var c=this;this.completeTransition();var d=this.get_topScene();null!=d?this.playTransition(d,a,b,function(){c.hide(d)}):(this.add(a),this.invalidateVisibility())},unwindToScene:function(a,b){var c=this;this.completeTransition();var d=this.get_topScene();if(null!=d){if(d!=a){for(this.scenes.pop();0<this.scenes.length&&this.scenes[this.scenes.length-
1]!=a;)this.scenes.pop().dispose();this.playTransition(d,a,b,function(){c.hideAndDispose(d)})}}else this.pushScene(a,b)},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.completeTransition();for(var a=0,b=this.scenes;a<b.length;){var c=b[a];++a;c.dispose()}this.scenes=[];this.occludedScenes=[];this._root.dispose()},onUpdate:function(a){null!=this._transitor&&this._transitor.update(a)&&this.completeTransition()},get_topScene:function(){var a=this.scenes.length;return 0<
a?this.scenes[a-1]:null},add:function(a){var b=this.get_topScene();null!=b&&this._root.removeChild(b);u.remove(this.scenes,a);this.scenes.push(a);this._root.addChild(a)},hide:function(a){a=a._compMap.Scene_9;null!=a&&a.hidden.emit()},hideAndDispose:function(a){this.hide(a);a.dispose()},show:function(a){a=a._compMap.Scene_9;null!=a&&a.shown.emit()},invalidateVisibility:function(){for(var a=this.scenes.length;0<a;){var b=this.scenes[--a]._compMap.Scene_9;if(null==b||b.opaque)break}this.occludedScenes=
0<this.scenes.length?this.scenes.slice(a,this.scenes.length-1):[];a=this.get_topScene();null!=a&&this.show(a)},completeTransition:function(){null!=this._transitor&&(this._transitor.complete(),this._transitor=null,this.invalidateVisibility())},playTransition:function(a,b,c,d){this.completeTransition();this.add(b);null!=c?(this.occludedScenes.push(a),this._transitor=new Vb(a,b,c,d),this._transitor.init(this)):(d(),this.invalidateVisibility())},get_width:function(){return 0>this._width?i._platform.getStage().get_width():
this._width},get_height:function(){return 0>this._height?i._platform.getStage().get_height():this._height},__class__:$a});var Vb=function(a,b,c,d){this._from=a;this._to=b;this._transition=c;this._onComplete=d};f["flambe.scene._Director.Transitor"]=Vb;Vb.__name__=!0;Vb.prototype={init:function(a){this._transition.init(a,this._from,this._to)},update:function(a){return this._transition.update(a)},complete:function(){this._transition.complete();this._onComplete()},__class__:Vb};var db=function(a){null==
a&&(a=!0);v.call(this);this.opaque=a;this.shown=new ra;this.hidden=new ra};f["flambe.scene.Scene"]=db;db.__name__=!0;db.__super__=v;db.prototype=t(v.prototype,{get_name:function(){return"Scene_9"},__class__:db});var Ua=function(){};f["flambe.scene.Transition"]=Ua;Ua.__name__=!0;Ua.prototype={init:function(a,b,c){this._director=a;this._from=b;this._to=c},update:function(){return!0},complete:function(){},__class__:Ua};var ga=function(a,b){this._duration=a;this._ease=null!=b?b:w.linear};f["flambe.scene.TweenTransition"]=
ga;ga.__name__=!0;ga.__super__=Ua;ga.prototype=t(Ua.prototype,{init:function(a,b,c){Ua.prototype.init.call(this,a,b,c);this._elapsed=0},update:function(a){this._elapsed+=a;return this._elapsed>=this._duration},interp:function(a,b){return a+(b-a)*this._ease(this._elapsed/this._duration)},__class__:ga});var Ha=function(a,b){this._direction=2;ga.call(this,a,b)};f["flambe.scene.SlideTransition"]=Ha;Ha.__name__=!0;Ha.__super__=ga;Ha.prototype=t(ga.prototype,{left:function(){this._direction=2;return this},
init:function(a,b,c){ga.prototype.init.call(this,a,b,c);switch(this._direction){case 0:this._x=0;this._y=-this._director.get_height();break;case 1:this._x=0;this._y=this._director.get_height();break;case 2:this._x=-this._director.get_width();this._y=0;break;case 3:this._x=this._director.get_width(),this._y=0}a=this._from._compMap.Sprite_1;null==a&&this._from.add(a=new j);a.setXY(0,0);a=this._to._compMap.Sprite_1;null==a&&this._to.add(a=new j);a.setXY(-this._x,-this._y)},update:function(a){a=ga.prototype.update.call(this,
a);this._from._compMap.Sprite_1.setXY(this.interp(0,this._x),this.interp(0,this._y));this._to._compMap.Sprite_1.setXY(this.interp(-this._x,0),this.interp(-this._y,0));return a},complete:function(){this._from._compMap.Sprite_1.setXY(0,0);this._to._compMap.Sprite_1.setXY(0,0)},__class__:Ha});var ha=function(){};f["flambe.script.Action"]=ha;ha.__name__=!0;ha.prototype={__class__:ha};var M=function(a,b,c,d){this._value=a;this._to=b;this._seconds=c;this._easing=d};f["flambe.script.AnimateTo"]=M;M.__name__=
!0;M.__interfaces__=[ha];M.prototype={update:function(a){null==this._tween&&(this._tween=new Oa(this._value._value,this._to,this._seconds,this._easing),this._value.set_behavior(this._tween),this._value.update(a));if(this._value._behavior!=this._tween){var b=this._tween.elapsed-this._seconds;this._tween=null;return 0<b?Math.max(0,a-b):0}return-1},__class__:M};var $=function(a){this._fn=a};f["flambe.script.CallFunction"]=$;$.__name__=!0;$.__interfaces__=[ha];$.prototype={update:function(){this._fn();
return 0},__class__:$};var ja=function(a){this._duration=a;this._elapsed=0};f["flambe.script.Delay"]=ja;ja.__name__=!0;ja.__interfaces__=[ha];ja.prototype={update:function(a){this._elapsed+=a;if(this._elapsed>=this._duration){var b=this._elapsed-this._duration;this._elapsed=0;return a-b}return-1},__class__:ja};var la=function(a){this._completedActions=[];this._runningActions=null!=a?a.slice():[]};f["flambe.script.Parallel"]=la;la.__name__=!0;la.__interfaces__=[ha];la.prototype={update:function(a,
b){for(var c=!0,d=0,e=0,f=this._runningActions.length;e<f;){var i=e++,h=this._runningActions[i];if(null!=h){var j=h.update(a,b);0<=j?(this._runningActions[i]=null,this._completedActions.push(h),j>d&&(d=j)):c=!1}}return c?(this._runningActions=this._completedActions,this._completedActions=[],d):-1},__class__:la};var Ka=function(a,b){null==b&&(b=-1);this._action=a;this._remaining=this._count=b};f["flambe.script.Repeat"]=Ka;Ka.__name__=!0;Ka.__interfaces__=[ha];Ka.prototype={update:function(a,b){if(0==
this._count)return 0;var c=this._action.update(a,b);return 0<this._count&&0<=c&&0==--this._remaining?(this._remaining=this._count,c):-1},__class__:Ka};var X=function(){v.call(this);this.stopAll()};f["flambe.script.Script"]=X;X.__name__=!0;X.__super__=v;X.prototype=t(v.prototype,{get_name:function(){return"Script_8"},run:function(a){a=new Bb(a);this._handles.push(a);return a},stopAll:function(){this._handles=[]},onUpdate:function(a){for(var b=0;b<this._handles.length;){var c=this._handles[b];c.removed||
0<=c.action.update(a,this.owner)?this._handles.splice(b,1):++b}},__class__:X});var Bb=function(a){this.removed=!1;this.action=a};f["flambe.script._Script.Handle"]=Bb;Bb.__name__=!0;Bb.__interfaces__=[Y];Bb.prototype={dispose:function(){this.removed=!0;this.action=null},__class__:Bb};var da=function(a){this._idx=0;this._runningActions=null!=a?a.slice():[]};f["flambe.script.Sequence"]=da;da.__name__=!0;da.__interfaces__=[ha];da.prototype={update:function(a,b){for(var c=0;;){var d=this._runningActions[this._idx];
if(null!=d)if(d=d.update(a-c,b),0<=d)c+=d;else return-1;++this._idx;if(this._idx>=this._runningActions.length){this._idx=0;break}else if(c>a)return-1}return c},__class__:da};var fa=f["flambe.subsystem.RendererType"]={__ename__:!0,__constructs__:["Stage3D","WebGL","Canvas"]};fa.Stage3D=["Stage3D",0];fa.Stage3D.__enum__=fa;fa.WebGL=["WebGL",1];fa.WebGL.__enum__=fa;fa.Canvas=["Canvas",2];fa.Canvas.__enum__=fa;var Cb=function(){};f["flambe.swf.Symbol"]=Cb;Cb.__name__=!0;Cb.prototype={__class__:Cb};var Db=
function(a,b){this._name=a.symbol;var c=a.rect;this.texture=b.subTexture(c[0],c[1],c[2],c[3]);c=a.origin;null!=c?(this.anchorX=c[0],this.anchorY=c[1]):this.anchorY=this.anchorX=0};f["flambe.swf.BitmapSymbol"]=Db;Db.__name__=!0;Db.__interfaces__=[Cb];Db.prototype={createSprite:function(){var a=new A(this.texture);a.setAnchor(this.anchorX,this.anchorY);return a},__class__:Db};var ka=function(a,b){this._file=a.getFile(b+"/library.json");var c=JSON.parse(this._file.toString());this._symbols=new T;this.frameRate=
c.frameRate;for(var d=[],e=0,f=c.movies;e<f.length;){var i=f[e];++e;i=new Eb(this,i);d.push(i);this._symbols.set(i._name,i)}c=c.textureGroups;(1!=c[0].scaleFactor||1<c.length)&&null;c=c[0].atlases;for(e=0;e<c.length;){var h=c[e];++e;f=a.getTexture(b+"/"+H.removeFileExtension(h.file));i=0;for(h=h.textures;i<h.length;){var j=h[i];++i;j=new Db(j,f);this._symbols.set(j._name,j)}}for(c=0;c<d.length;){f=d[c];++c;e=0;for(f=f.layers;e<f.length;){i=f[e];++e;i=i.keyframes;h=i.length;for(j=0;j<h;){var k=j++,
l=i[k];if(null!=l.symbolName){var n=this._symbols.get(l.symbolName);l.symbol=n}if(l.tweened&&1==l.duration&&k+1<h&&(k=i[k+1],!k.visible||null==k.symbolName))l.visible=!1}}}};f["flambe.swf.Library"]=ka;ka.__name__=!0;ka.prototype={createSprite:function(a,b){null==b&&(b=!0);var c=this._symbols.get(a);if(null==c){if(b)throw H.withFields("Missing symbol",["name",a]);return null}return c.createSprite()},__class__:ka};var P=function(a){this._oneshotSprite=this._loopingSprite=null;v.call(this);this._lib=
a;this._root=new n;this.movie=new Q(null);this.setCache(!0)};f["flambe.swf.MoviePlayer"]=P;P.__name__=!0;P.__super__=v;P.prototype=t(v.prototype,{get_name:function(){return"MoviePlayer_7"},setCache:function(a){this._cache=a?new T:null;return this},play:function(a,b){null==b&&(b=!0);if(b||null==this._oneshotSprite||this._oneshotSprite.symbol._name!=a)this._oneshotSprite=this.playFromCache(a);return this},loop:function(a,b){null==b&&(b=!0);if(b||null==this._loopingSprite||this._loopingSprite.symbol._name!=
a)this._oneshotSprite=null,this._loopingSprite=this.playFromCache(a);return this},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this._root.dispose();this._oneshotSprite=this._loopingSprite=null;this.movie.set__(null)},onUpdate:function(a){null!=this._oneshotSprite&&this._oneshotSprite._position+a>this._oneshotSprite.symbol.duration&&(this._oneshotSprite=null,this.setCurrent(this._loopingSprite))},playFromCache:function(a){var b;null!=this._cache?(b=this._cache.get(a),null!=
b?b.set_position(0):(b=this.createMovie(a),this._cache.set(a,b))):b=this.createMovie(a);return this.setCurrent(b)},createMovie:function(a){a=this._lib.createSprite(a,!0);null!=this._decorator&&this._decorator(a);return a},setCurrent:function(a){this._root.add(a);return this.movie.set__(a)},__class__:P});var B=function(a){this._looped=null;j.call(this);this.symbol=a;this.speed=new E(1);this._animators=Array(a.layers.length);for(var b=0,c=this._animators.length;b<c;){var d=b++;this._animators[d]=new Wb(a.layers[d])}this._position=
this._frame=0;this["goto"](1)};f["flambe.swf.MovieSprite"]=B;B.__name__=!0;B.__super__=j;B.prototype=t(j.prototype,{getLayer:function(a,b){null==b&&(b=!0);for(var c=0,d=this._animators;c<d.length;){var e=d[c];++c;if(e.layer.name==a)return e.content}if(b)throw H.withFields("Missing layer",["name",a]);return null},onAdded:function(){j.prototype.onAdded.call(this);for(var a=0,b=this._animators;a<b.length;){var c=b[a];++a;this.owner.addChild(c.content)}},onRemoved:function(){j.prototype.onRemoved.call(this);
for(var a=0,b=this._animators;a<b.length;){var c=b[a];++a;this.owner.removeChild(c.content)}},onUpdate:function(a){j.prototype.onUpdate.call(this,a);this.speed.update(a);switch(this._flags&384){case 0:this._position+=this.speed._value*a;this._position>this.symbol.duration&&(this._position%=this.symbol.duration,null!=this._looped&&this._looped.emit());break;case 256:this._flags&=-257}this["goto"](this._position*this.symbol.frameRate)},"goto":function(a){if(this._frame!=a){if(a<this._frame)for(var b=
0,c=this._animators;b<c.length;){var d=c[b];++b;d.needsKeyframeUpdate=!0;d.keyframeIdx=0}b=0;for(c=this._animators;b<c.length;)d=c[b],++b,d.composeFrame(a);this._frame=a}},set_position:function(a){return this._position=Ba.clamp(a,0,this.symbol.duration)},set_paused:function(a){this._flags=Pa.set(this._flags,128,a);return a},set_pixelSnapping:function(a){for(var b=0,c=this._animators;b<c.length;){var d=c[b];++b;d.setPixelSnapping(a)}return j.prototype.set_pixelSnapping.call(this,a)},rewind:function(){this._position=
0;this._flags|=256},__class__:B});var Wb=function(a){this.keyframeIdx=0;this.needsKeyframeUpdate=!1;this.layer=a;this.content=new n;if(a.empty)this._sprites=null;else{this._sprites=Array(a.keyframes.length);for(var b=0,c=this._sprites.length;b<c;){var d=b++,e=a.keyframes[d];this._sprites[d]=0<d&&a.keyframes[d-1].symbol==e.symbol?this._sprites[d-1]:null==e.symbol?new j:e.symbol.createSprite()}this.content.add(this._sprites[0])}};f["flambe.swf._MovieSprite.LayerAnimator"]=Wb;Wb.__name__=!0;Wb.prototype=
{composeFrame:function(a){if(null!=this._sprites){var b=this.layer.keyframes,c=b.length-1;if(a>this.layer.frames)this.content._compMap.Sprite_1.set_visible(!1),this.keyframeIdx=c,this.needsKeyframeUpdate=!0;else{for(;this.keyframeIdx<c&&b[this.keyframeIdx+1].index<=a;)++this.keyframeIdx,this.needsKeyframeUpdate=!0;var d;this.needsKeyframeUpdate?(this.needsKeyframeUpdate=!1,d=this._sprites[this.keyframeIdx],d!=this.content._compMap.Sprite_1&&(Xa.getClass(d)==B&&d.rewind(),this.content.add(d))):d=this.content._compMap.Sprite_1;
var e=b[this.keyframeIdx],f=e.visible&&null!=e.symbol;d.set_visible(f);if(f){var f=e.x,i=e.y,h=e.scaleX,j=e.scaleY,k=e.skewX,l=e.skewY,n=e.alpha;if(e.tweened&&this.keyframeIdx<c){a=(a-e.index)/e.duration;c=e.ease;if(0!=c){var o;0>c?(o=1-a,o=1-o*o,c=-c):o=a*a;a=c*o+(1-c)*a}b=b[this.keyframeIdx+1];f+=(b.x-f)*a;i+=(b.y-i)*a;h+=(b.scaleX-h)*a;j+=(b.scaleY-j)*a;k+=(b.skewX-k)*a;l+=(b.skewY-l)*a;n+=(b.alpha-n)*a}b=d.getLocalMatrix();a=Math.sin(k);k=Math.cos(k);c=Math.sin(l);l=Math.cos(l);b.set(l*h,c*h,
-a*j,k*j,f,i);b.translate(-e.pivotX,-e.pivotY);d.alpha.set__(n)}}}},setPixelSnapping:function(a){for(var b=0,c=this._sprites;b<c.length;){var d=c[b];++b;d.set_pixelSnapping(a)}},__class__:Wb};var Eb=function(a,b){this._name=b.id;this.frameRate=a.frameRate;this.frames=0;this.layers=Array(b.layers.length);for(var c=0,d=this.layers.length;c<d;){var e=c++,f=new Xb(b.layers[e]);this.frames=Math.max(f.frames,this.frames);this.layers[e]=f}this.duration=this.frames/this.frameRate};f["flambe.swf.MovieSymbol"]=
Eb;Eb.__name__=!0;Eb.__interfaces__=[Cb];Eb.prototype={createSprite:function(){return new B(this)},__class__:Eb};var Xb=function(a){this.empty=!0;this.name=a.name;var b=null;this.keyframes=Array(a.keyframes.length);for(var c=0,d=this.keyframes.length;c<d;){var e=c++,b=new Yb(a.keyframes[e],b);this.keyframes[e]=b;this.empty=this.empty&&null==b.symbolName}this.frames=null!=b?b.index+b.duration:0};f["flambe.swf.MovieLayer"]=Xb;Xb.__name__=!0;Xb.prototype={__class__:Xb};var Yb=function(a,b){this.ease=
0;this.visible=this.tweened=!0;this.alpha=1;this.skewX=this.skewY=this.pivotX=this.pivotY=0;this.scaleX=this.scaleY=1;this.x=this.y=0;this.symbol=null;this.index=null!=b?b.index+b.duration:0;this.duration=a.duration;this.label=a.label;this.symbolName=a.ref;var c=a.loc;null!=c&&(this.x=c[0],this.y=c[1]);c=a.scale;null!=c&&(this.scaleX=c[0],this.scaleY=c[1]);c=a.skew;null!=c&&(this.skewX=c[0],this.skewY=c[1]);c=a.pivot;null!=c&&(this.pivotX=c[0],this.pivotY=c[1]);null!=a.alpha&&(this.alpha=a.alpha);
null!=a.visible&&(this.visible=a.visible);null!=a.tweened&&(this.tweened=a.tweened);null!=a.ease&&(this.ease=a.ease)};f["flambe.swf.MovieKeyframe"]=Yb;Yb.__name__=!0;Yb.prototype={__class__:Yb};var bc=function(){};f["flambe.util.Assert"]=bc;bc.__name__=!0;bc.that=function(){};var Pa=function(){};f["flambe.util.BitSets"]=Pa;Pa.__name__=!0;Pa.set=function(a,b,c){return c?a|b:a&~b};var sb=function(){this.success=new D;this.error=new D;this.progressChanged=new ra;this.hasResult=!1;this._total=this._progress=
0};f["flambe.util.Promise"]=sb;sb.__name__=!0;sb.prototype={set_result:function(a){if(this.hasResult)throw"Promise result already assigned";this._result=a;this.hasResult=!0;this.success.emit(a);return a},get:function(a){return this.hasResult?(a(this._result),null):this.success.connect(a).once()},set_progress:function(a){this._progress!=a&&(this._progress=a,this.progressChanged.emit());return a},set_total:function(a){this._total!=a&&(this._total=a,this.progressChanged.emit());return a},__class__:sb};
var ra=function(a){G.call(this,a)};f["flambe.util.Signal0"]=ra;ra.__name__=!0;ra.__super__=G;ra.prototype=t(G.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(){var a=this;this._head==G.DISPATCHING_SENTINEL?this.defer(function(){a.emitImpl()}):this.emitImpl()},emitImpl:function(){for(var a=this.willEmit(),b=a;null!=b;)b._listener(),b.stayInList||b.dispose(),b=b._next;this.didEmit(a)},__class__:ra});var Gb=function(a){this.next=null;this.fn=a};f["flambe.util._SignalBase.Task"]=
Gb;Gb.__name__=!0;Gb.prototype={__class__:Gb};var H=function(){};f["flambe.util.Strings"]=H;H.__name__=!0;H.getFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?u.substr(a,b+1,null):null};H.removeFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?u.substr(a,0,b):a};H.getUrlExtension=function(a){var b=a.lastIndexOf("?");0<=b&&(a=u.substr(a,0,b));b=a.lastIndexOf("/");0<=b&&(a=u.substr(a,b+1,null));return H.getFileExtension(a)};H.joinPath=function(a,b){0<a.length&&47!=a.charCodeAt(a.length-
1)&&(a+="/");return a+b};H.withFields=function(a,b){var c=b.length;if(0<c){for(var a=0<a.length?a+" [":a+"[",d=0;d<c;){0<d&&(a+=", ");var e=b[d],f=b[d+1];if(o.is(f,Error)){var i=f.stack;null!=i&&(f=i)}a+=e+"="+o.string(f);d+=2}a+="]"}return a};var aa=function(){this.h={}};f["haxe.ds.IntMap"]=aa;aa.__name__=!0;aa.__interfaces__=[Zb];aa.prototype={set:function(a,b){this.h[a]=b},get:function(a){return this.h[a]},exists:function(a){return this.h.hasOwnProperty(a)},remove:function(a){if(!this.h.hasOwnProperty(a))return!1;
delete this.h[a];return!0},__class__:aa};var T=function(){this.h={}};f["haxe.ds.StringMap"]=T;T.__name__=!0;T.__interfaces__=[Zb];T.prototype={set:function(a,b){this.h["$"+a]=b},get:function(a){return this.h["$"+a]},exists:function(a){return this.h.hasOwnProperty("$"+a)},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b.substr(1));return u.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){return this.ref["$"+
this.it.next()]}}},__class__:T};var Sa=function(a,b){this.length=a;this.b=b};f["haxe.io.Bytes"]=Sa;Sa.__name__=!0;Sa.ofData=function(a){return new Sa(a.length,a)};Sa.prototype={set:function(a,b){this.b[a]=b&255},fill:function(a,b,c){for(var d=0;d<b;)d++,this.set(a++,c)},__class__:Sa};var fc=function(){};f["haxe.io.Eof"]=fc;fc.__name__=!0;fc.prototype={toString:function(){return"Eof"},__class__:fc};var ac=function(){};f["haxe.rtti.Meta"]=ac;ac.__name__=!0;ac.getType=function(a){a=a.__meta__;return null==
a||null==a.obj?{}:a.obj};var ca=function(){};f["haxe.xml.Parser"]=ca;ca.__name__=!0;ca.parse=function(a){var b=r.createDocument();ca.doParse(a,0,b);return b};ca.doParse=function(a,b,c){null==b&&(b=0);for(var d=null,e=1,f=1,i=null,h=0,j=0,k=0,l=a.charCodeAt(b),n=new Wa;l==l;){switch(e){case 0:switch(l){case 10:case 13:case 9:case 32:break;default:e=f;continue}break;case 1:switch(l){case 60:e=0;f=2;break;default:h=b;e=13;continue}break;case 13:60==l?(f=r.createPCData(n.b+u.substr(a,h,b-h)),n=new Wa,
c.addChild(f),j++,e=0,f=2):38==l&&(n.addSub(a,h,b-h),e=18,f=13,h=b+1);break;case 17:93==l&&93==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2)&&(e=r.createCData(u.substr(a,h,b-h)),c.addChild(e),j++,b+=2,e=1);break;case 2:switch(l){case 33:if(91==a.charCodeAt(b+1)){b+=2;if("CDATA["!=u.substr(a,b,6).toUpperCase())throw"Expected <![CDATA[";b+=5;e=17}else if(68==a.charCodeAt(b+1)||100==a.charCodeAt(b+1)){if("OCTYPE"!=u.substr(a,b+2,6).toUpperCase())throw"Expected <!DOCTYPE";b+=8;e=16}else{if(45!=a.charCodeAt(b+
1)||45!=a.charCodeAt(b+2))throw"Expected <\!--";b+=2;e=15}h=b+1;break;case 63:e=14;h=b;break;case 47:if(null==c)throw"Expected node name";h=b+1;e=0;f=10;break;default:e=3;h=b;continue}break;case 3:if(!(97<=l&&122>=l||65<=l&&90>=l||48<=l&&57>=l||58==l||46==l||95==l||45==l)){if(b==h)throw"Expected node name";d=r.createElement(u.substr(a,h,b-h));c.addChild(d);e=0;f=4;continue}break;case 4:switch(l){case 47:e=11;j++;break;case 62:e=9;j++;break;default:e=5;h=b;continue}break;case 5:if(!(97<=l&&122>=l||
65<=l&&90>=l||48<=l&&57>=l||58==l||46==l||95==l||45==l)){if(h==b)throw"Expected attribute name";i=u.substr(a,h,b-h);if(d.exists(i))throw"Duplicate attribute";e=0;f=6;continue}break;case 6:switch(l){case 61:e=0;f=7;break;default:throw"Expected =";}break;case 7:switch(l){case 34:case 39:e=8;h=b;break;default:throw'Expected "';}break;case 8:l==a.charCodeAt(h)&&(f=u.substr(a,h+1,b-h-1),d.set(i,f),e=0,f=4);break;case 9:h=b=ca.doParse(a,b,d);e=1;break;case 11:switch(l){case 62:e=1;break;default:throw"Expected >";
}break;case 12:switch(l){case 62:return 0==j&&c.addChild(r.createPCData("")),b;default:throw"Expected >";}case 10:if(!(97<=l&&122>=l||65<=l&&90>=l||48<=l&&57>=l||58==l||46==l||95==l||45==l)){if(h==b)throw"Expected node name";if(u.substr(a,h,b-h)!=c.get_nodeName())throw"Expected </"+c.get_nodeName()+">";e=0;f=12;continue}break;case 15:45==l&&45==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2)&&(c.addChild(r.createComment(u.substr(a,h,b-h))),b+=2,e=1);break;case 16:91==l?k++:93==l?k--:62==l&&0==k&&(c.addChild(r.createDocType(u.substr(a,
h,b-h))),e=1);break;case 14:63==l&&62==a.charCodeAt(b+1)&&(b++,e=u.substr(a,h+1,b-h-2),c.addChild(r.createProcessingInstruction(e)),e=1);break;case 18:59==l&&(h=u.substr(a,h,b-h),35==h.charCodeAt(0)?(h=120==h.charCodeAt(1)?o.parseInt("0"+u.substr(h,1,h.length-1)):o.parseInt(u.substr(h,1,h.length-1)),n.add(String.fromCharCode(h))):ca.escapes.exists(h)?n.add(ca.escapes.get(h)):n.b+=o.string("&"+h+";"),h=b+1,e=f)}l=Fa.fastCodeAt(a,++b)}1==e&&(h=b,e=13);if(13==e)return(b!=h||0==j)&&c.addChild(r.createPCData(n.b+
u.substr(a,h,b-h))),b;throw"Unexpected end";};var K=function(){};f["js.Boot"]=K;K.__name__=!0;K.getClass=function(a){return a instanceof Array&&null==a.__enum__?Array:a.__class__};K.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var c=typeof a;if("function"==c&&(a.__name__||a.__ename__))c="object";switch(c){case "object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];for(var c=a[0]+"(",b=b+"\t",d=2,e=a.length;d<e;)var f=d++,c=2!=f?c+(","+K.__string_rec(a[f],
b)):c+K.__string_rec(a[f],b);return c+")"}c=a.length;d="[";b+="\t";for(e=0;e<c;)f=e++,d+=(0<f?",":"")+K.__string_rec(a[f],b);return d+"]"}try{d=a.toString}catch(i){return"???"}if(null!=d&&d!=Object.toString&&(c=a.toString(),"[object Object]"!=c))return c;c=null;d="{\n";b+="\t";e=null!=a.hasOwnProperty;for(c in a)if(!e||a.hasOwnProperty(c))"prototype"==c||"__class__"==c||"__super__"==c||"__interfaces__"==c||"__properties__"==c||(2!=d.length&&(d+=", \n"),d+=b+c+" : "+K.__string_rec(a[c],b));b=b.substring(1);
return d+("\n"+b+"}");case "function":return"<function>";case "string":return a;default:return""+a}};K.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var d=0,e=c.length;d<e;){var f=d++,f=c[f];if(f==b||K.__interfLoop(f,b))return!0}return K.__interfLoop(a.__super__,b)};K.__instanceof=function(a,b){if(null==b)return!1;switch(b){case mc:return(a|0)===a;case jc:return"number"==typeof a;case kc:return"boolean"==typeof a;case String:return"string"==
typeof a;case Array:return a instanceof Array&&null==a.__enum__;case nc:return!0;default:if(null!=a){if("function"==typeof b&&(a instanceof b||K.__interfLoop(K.getClass(a),b)))return!0}else return!1;return b==oc&&null!=a.__name__||b==pc&&null!=a.__ename__?!0:a.__enum__==b}};var Ja=function(a,b){null==a&&(a=0);this._time=0;v.call(this);this._delay=0>a?0:a;this._onBeforeDispose=b};f["temple.components.AutoDisposer"]=Ja;Ja.__name__=!0;Ja.__super__=v;Ja.prototype=t(v.prototype,{get_name:function(){return"AutoDisposer_10"},
onUpdate:function(a){this._time+=a;this._time>=this._delay&&(null!=this._onBeforeDispose&&this._onBeforeDispose(),null!=this.owner&&this.owner.dispose())},__class__:Ja});var lc=0;Math.NaN=Number.NaN;Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY;f.Math=Math;Math.isFinite=function(a){return isFinite(a)};Math.isNaN=function(a){return isNaN(a)};String.prototype.__class__=f.String=String;String.__name__=!0;f.Array=Array;Array.__name__=!0;Date.prototype.__class__=
f.Date=Date;Date.__name__=["Date"];var mc=f.Int={__name__:["Int"]},nc=f.Dynamic={__name__:["Dynamic"]},jc=f.Float=Number;jc.__name__=["Float"];var kc=f.Bool=Boolean;kc.__ename__=["Bool"];var oc=f.Class={__name__:["Class"]},pc={};r.Element="element";r.PCData="pcdata";r.CData="cdata";r.Comment="comment";r.DocType="doctype";r.ProcessingInstruction="processingInstruction";r.Document="document";e.vDev=!1;e.vShowTrace=!1;e.vVersion="0.0.1";e.vSize=new y(944,531);e.vDrawingScale=0.5;e.vDrawingSize=new y(768,
432);e.vDrawingPos=new y(88,48);e.vColorList=[13369599,16748228,26316,3394764,6736896,40960,16776960,11630080,16750848,15073280];e.vShadowDecalXY=new y(5,5);e.vSitckerMobilePos=new y(-800,-400);e.vLang="en";e.vLogo="st";e.vAssetFolder="tomjerry";e.vFirstLoading=!1;e.vDevicePixelRatio=1;e.vScaleSaved=1;e.vLastScale=1;e.vColorPage=0;va.instance=new va;G.DISPATCHING_SENTINEL=new za(null,null);i.root=new n;i.uncaughtError=new D;i.hidden=new Q(!1);i.volume=new E(1);i._platform=va.instance;i._calledInit=
!1;F.__meta__={obj:{assets:[{paint_bcsd:[{bytes:1027,md5:"70f2cd367f758b2ffe543b66be066050",name:"brush/brush_1.png"},{bytes:1079,md5:"daed446dee07fddc580e9a630d8f40fb",name:"brush/brush_2.png"},{bytes:1021,md5:"39dd15b2096ab23527e0583c5dfeb403",name:"brush/brush_3.png"},{bytes:1141,md5:"0f656d51570a313d39f49089b3f30aa4",name:"brush/brush_3c.png"},{bytes:173267,md5:"f3ccee51c2de08308d8b8d8ca850be89",name:"flump/cn_paint/atlas0.png"},{bytes:27052,md5:"4d0fe81bb576a0ea5586636428ebc513",name:"flump/cn_paint/library.json"},
{bytes:129319,md5:"0287614cfc62d7b65ceee14b1b6cef8d",name:"interface/desk.png"},{bytes:786,md5:"377183543fc3f701d1430c9294059c0f",name:"stamp/stamp_1.png"},{bytes:845,md5:"fec937c11a363e1ab2fc6573d86f4ac4",name:"stamp/stamp_2.png"},{bytes:1720,md5:"fccf3753273cc09cd1a3eea3b0e5973b",name:"stamp/stamp_3.png"},{bytes:884,md5:"f09477142dafba111cf95622e9ef0bc1",name:"stamp/stamp_4.png"},{bytes:892,md5:"5506c82536237fc7c5a7536f362e2e4a",name:"stamp/stamp_5.png"},{bytes:28099,md5:"b8cb3610239a8918b35a742205b5c58b",
name:"sticker/shadow_1.png"},{bytes:47077,md5:"caa5effe7b3523d1629822deff513463",name:"sticker/shadow_10.png"},{bytes:7825,md5:"478d65e32e826b2d33501c2f67f355af",name:"sticker/shadow_11.png"},{bytes:4981,md5:"a2f5787ad421a6e3bd59c64786066afb",name:"sticker/shadow_12.png"},{bytes:7413,md5:"5b8a0df0ecc9b4f1ca8878774b1623df",name:"sticker/shadow_13.png"},{bytes:4385,md5:"46ab60bda91e9a7a6f6f09c15d30e882",name:"sticker/shadow_14.png"},{bytes:5182,md5:"d833fde5965e970013a5c7ed36ddcb05",name:"sticker/shadow_15.png"},
{bytes:7708,md5:"f4935deecd16a981ff81252f5d7fd423",name:"sticker/shadow_16.png"},{bytes:5700,md5:"77e4607cc9d26b83f41837c31636f687",name:"sticker/shadow_17.png"},{bytes:4673,md5:"fc18b8e0da28161f1dbada26019e3851",name:"sticker/shadow_18.png"},{bytes:5482,md5:"70921eef33a92246f0613cbbec732aba",name:"sticker/shadow_19.png"},{bytes:8371,md5:"d2938adce1bea4d3dd89203f59b68386",name:"sticker/shadow_2.png"},{bytes:4767,md5:"f58265e7d388b29d7ebcc5e1fd7483f4",name:"sticker/shadow_20.png"},{bytes:5031,md5:"c3f03c63c91be7f27b9c3c08ca3c1919",
name:"sticker/shadow_21.png"},{bytes:11329,md5:"388bba6431cfc77b0eebf84bb4d404d9",name:"sticker/shadow_3.png"},{bytes:26672,md5:"b7edd52d17222e2682f4fb30cc731cd8",name:"sticker/shadow_4.png"},{bytes:37458,md5:"e073705daee33dc409fa140703fea368",name:"sticker/shadow_5.png"},{bytes:21235,md5:"3de10ffa004b6be9fba6ff31afb738a3",name:"sticker/shadow_6.png"},{bytes:25500,md5:"484a6390d322230e081ac60539b02058",name:"sticker/shadow_7.png"},{bytes:26771,md5:"25200164469f88b8f80555c3f9747c1c",name:"sticker/shadow_8.png"},
{bytes:44820,md5:"032bb0e1f9ceeb41f90813fc455363c0",name:"sticker/shadow_9.png"},{bytes:22041,md5:"23003c43b5974360a777c6019671e0ed",name:"sticker/sticker_1.png"},{bytes:90937,md5:"ccf0ca9b057332f83bd52c778bea89b8",name:"sticker/sticker_10.png"},{bytes:17811,md5:"1b0b50ad09b7be88ac993da13599d7cd",name:"sticker/sticker_11.png"},{bytes:3413,md5:"cf26d76020175d2dc6778c299d8d7a0b",name:"sticker/sticker_12.png"},{bytes:16615,md5:"f15d57c9a30441c669b6b0c454ed32e9",name:"sticker/sticker_13.png"},{bytes:3025,
md5:"9f70d1e5034178164ae2d1db2a878517",name:"sticker/sticker_14.png"},{bytes:3612,md5:"7dcf2401277e254b820b7165a7e4a31a",name:"sticker/sticker_15.png"},{bytes:17616,md5:"e92f5388b93df3657fcb0c846d081ce3",name:"sticker/sticker_16.png"},{bytes:11336,md5:"a5fe5d419aac2d0084b3221d3f668362",name:"sticker/sticker_17.png"},{bytes:3278,md5:"be14b5189de780cf2bc7fdf209bc2666",name:"sticker/sticker_18.png"},{bytes:3729,md5:"c7972e9691ad37356ba09697f07fe2eb",name:"sticker/sticker_19.png"},{bytes:3201,md5:"b34887636d62681e180c18be4a63438a",
name:"sticker/sticker_2.png"},{bytes:3393,md5:"3ae7ac1bcc25bf99e9a9320d0e100acf",name:"sticker/sticker_20.png"},{bytes:4322,md5:"3e9f401330be0176139dda0f554d5b33",name:"sticker/sticker_21.png"},{bytes:8281,md5:"a6b98dba57bc7264c3375b69b27274df",name:"sticker/sticker_3.png"},{bytes:37898,md5:"e094d3cc16f377d9c81a4e5a53fb6314",name:"sticker/sticker_4.png"},{bytes:29545,md5:"cc7fac2da8b93cc938590e62fa68e7c9",name:"sticker/sticker_5.png"},{bytes:17095,md5:"a3fb1f1bd119ebd7164e39ad749b6c26",name:"sticker/sticker_6.png"},
{bytes:28956,md5:"38d4c3e2d12cc7fc24f9e7c561b6ffab",name:"sticker/sticker_7.png"},{bytes:30622,md5:"f44e3186353a2e69250d41ec081fcd31",name:"sticker/sticker_8.png"},{bytes:36171,md5:"8a72f18718b0ab17505c4d890ff4325f",name:"sticker/sticker_9.png"}],paint_looneytunes:[{bytes:1027,md5:"70f2cd367f758b2ffe543b66be066050",name:"brush/brush_1.png"},{bytes:1079,md5:"daed446dee07fddc580e9a630d8f40fb",name:"brush/brush_2.png"},{bytes:1021,md5:"39dd15b2096ab23527e0583c5dfeb403",name:"brush/brush_3.png"},{bytes:173308,
md5:"847e010c9ab0a905a6276d734ff5b1c9",name:"flump/cn_paint/atlas0.png"},{bytes:27056,md5:"a66256e5d8931116cdbf27479839134f",name:"flump/cn_paint/library.json"},{bytes:129319,md5:"0287614cfc62d7b65ceee14b1b6cef8d",name:"interface/desk.png"},{bytes:786,md5:"377183543fc3f701d1430c9294059c0f",name:"stamp/stamp_1.png"},{bytes:845,md5:"fec937c11a363e1ab2fc6573d86f4ac4",name:"stamp/stamp_2.png"},{bytes:1720,md5:"fccf3753273cc09cd1a3eea3b0e5973b",name:"stamp/stamp_3.png"},{bytes:884,md5:"f09477142dafba111cf95622e9ef0bc1",
name:"stamp/stamp_4.png"},{bytes:892,md5:"5506c82536237fc7c5a7536f362e2e4a",name:"stamp/stamp_5.png"},{bytes:36301,md5:"1edfd1356cd67cd9d070338166e49d36",name:"sticker/shadow_1.png"},{bytes:4385,md5:"46ab60bda91e9a7a6f6f09c15d30e882",name:"sticker/shadow_10.png"},{bytes:7825,md5:"478d65e32e826b2d33501c2f67f355af",name:"sticker/shadow_11.png"},{bytes:4981,md5:"a2f5787ad421a6e3bd59c64786066afb",name:"sticker/shadow_12.png"},{bytes:7413,md5:"5b8a0df0ecc9b4f1ca8878774b1623df",name:"sticker/shadow_13.png"},
{bytes:4385,md5:"46ab60bda91e9a7a6f6f09c15d30e882",name:"sticker/shadow_14.png"},{bytes:5182,md5:"d833fde5965e970013a5c7ed36ddcb05",name:"sticker/shadow_15.png"},{bytes:7708,md5:"f4935deecd16a981ff81252f5d7fd423",name:"sticker/shadow_16.png"},{bytes:5700,md5:"77e4607cc9d26b83f41837c31636f687",name:"sticker/shadow_17.png"},{bytes:4673,md5:"fc18b8e0da28161f1dbada26019e3851",name:"sticker/shadow_18.png"},{bytes:5482,md5:"70921eef33a92246f0613cbbec732aba",name:"sticker/shadow_19.png"},{bytes:31730,md5:"bf895838533ecd79638b38dcf01e971b",
name:"sticker/shadow_2.png"},{bytes:4767,md5:"f58265e7d388b29d7ebcc5e1fd7483f4",name:"sticker/shadow_20.png"},{bytes:5031,md5:"c3f03c63c91be7f27b9c3c08ca3c1919",name:"sticker/shadow_21.png"},{bytes:28257,md5:"3e1504c1f9de15642a2e8ae8a0846859",name:"sticker/shadow_3.png"},{bytes:27590,md5:"87ac24ad3aebede2f74d681105cd4409",name:"sticker/shadow_4.png"},{bytes:16872,md5:"05c6f0ac122c593bb235ea410dafa2d0",name:"sticker/shadow_5.png"},{bytes:24749,md5:"b31811d27a013bf2f7c205b13e85a3d2",name:"sticker/shadow_6.png"},
{bytes:39642,md5:"320530db281cd8198f666aa6d2b913ed",name:"sticker/shadow_7.png"},{bytes:32981,md5:"01f46b291d902937c91beffd4c4bd4c3",name:"sticker/shadow_8.png"},{bytes:36161,md5:"a1ef215a3d0f5330857ae5880b0a4a51",name:"sticker/shadow_9.png"},{bytes:51882,md5:"b89a0eb5c4ce639b7d9b1d44d9a2df6c",name:"sticker/sticker_1.png"},{bytes:3025,md5:"9f70d1e5034178164ae2d1db2a878517",name:"sticker/sticker_10.png"},{bytes:17811,md5:"1b0b50ad09b7be88ac993da13599d7cd",name:"sticker/sticker_11.png"},{bytes:3413,
md5:"cf26d76020175d2dc6778c299d8d7a0b",name:"sticker/sticker_12.png"},{bytes:16615,md5:"f15d57c9a30441c669b6b0c454ed32e9",name:"sticker/sticker_13.png"},{bytes:3025,md5:"9f70d1e5034178164ae2d1db2a878517",name:"sticker/sticker_14.png"},{bytes:3612,md5:"7dcf2401277e254b820b7165a7e4a31a",name:"sticker/sticker_15.png"},{bytes:17616,md5:"e92f5388b93df3657fcb0c846d081ce3",name:"sticker/sticker_16.png"},{bytes:11336,md5:"a5fe5d419aac2d0084b3221d3f668362",name:"sticker/sticker_17.png"},{bytes:3278,md5:"be14b5189de780cf2bc7fdf209bc2666",
name:"sticker/sticker_18.png"},{bytes:3729,md5:"c7972e9691ad37356ba09697f07fe2eb",name:"sticker/sticker_19.png"},{bytes:33531,md5:"f6c62f849d4a31acf5573bf3219727c1",name:"sticker/sticker_2.png"},{bytes:3393,md5:"3ae7ac1bcc25bf99e9a9320d0e100acf",name:"sticker/sticker_20.png"},{bytes:4322,md5:"3e9f401330be0176139dda0f554d5b33",name:"sticker/sticker_21.png"},{bytes:34200,md5:"4c76ced3b3bb5efcd678185441fcae1c",name:"sticker/sticker_3.png"},{bytes:27099,md5:"91eb1651e7478d0cf7e90546a0bea8fa",name:"sticker/sticker_4.png"},
{bytes:15025,md5:"f929c7d43e5a0831ea8b63a183686fe6",name:"sticker/sticker_5.png"},{bytes:25667,md5:"0b1c18b646f37164bb23ff018d373a55",name:"sticker/sticker_6.png"},{bytes:41076,md5:"a12103113a2e4e7f237dade906f33750",name:"sticker/sticker_7.png"},{bytes:37227,md5:"608562a270b195b372be85a1c3a03729",name:"sticker/sticker_8.png"},{bytes:38312,md5:"07e44da1fe4fbbada61927e3ee9aa6ea",name:"sticker/sticker_9.png"}],paint_tomjerry:[{bytes:1027,md5:"70f2cd367f758b2ffe543b66be066050",name:"brush/brush_1.png"},
{bytes:1079,md5:"daed446dee07fddc580e9a630d8f40fb",name:"brush/brush_2.png"},{bytes:1021,md5:"39dd15b2096ab23527e0583c5dfeb403",name:"brush/brush_3.png"},{bytes:173308,md5:"847e010c9ab0a905a6276d734ff5b1c9",name:"flump/cn_paint/atlas0.png"},{bytes:27051,md5:"df227657a6448388e7e9d16ad88228a3",name:"flump/cn_paint/library.json"},{bytes:129319,md5:"0287614cfc62d7b65ceee14b1b6cef8d",name:"interface/desk.png"},{bytes:786,md5:"377183543fc3f701d1430c9294059c0f",name:"stamp/stamp_1.png"},{bytes:845,md5:"fec937c11a363e1ab2fc6573d86f4ac4",
name:"stamp/stamp_2.png"},{bytes:1720,md5:"fccf3753273cc09cd1a3eea3b0e5973b",name:"stamp/stamp_3.png"},{bytes:884,md5:"f09477142dafba111cf95622e9ef0bc1",name:"stamp/stamp_4.png"},{bytes:892,md5:"5506c82536237fc7c5a7536f362e2e4a",name:"stamp/stamp_5.png"},{bytes:30952,md5:"1d81d95dad5acc285467e779b929f1d6",name:"sticker/shadow_1.png"},{bytes:4385,md5:"46ab60bda91e9a7a6f6f09c15d30e882",name:"sticker/shadow_10.png"},{bytes:7825,md5:"478d65e32e826b2d33501c2f67f355af",name:"sticker/shadow_11.png"},{bytes:4981,
md5:"a2f5787ad421a6e3bd59c64786066afb",name:"sticker/shadow_12.png"},{bytes:7413,md5:"5b8a0df0ecc9b4f1ca8878774b1623df",name:"sticker/shadow_13.png"},{bytes:4385,md5:"46ab60bda91e9a7a6f6f09c15d30e882",name:"sticker/shadow_14.png"},{bytes:5182,md5:"d833fde5965e970013a5c7ed36ddcb05",name:"sticker/shadow_15.png"},{bytes:7708,md5:"f4935deecd16a981ff81252f5d7fd423",name:"sticker/shadow_16.png"},{bytes:5700,md5:"77e4607cc9d26b83f41837c31636f687",name:"sticker/shadow_17.png"},{bytes:4673,md5:"fc18b8e0da28161f1dbada26019e3851",
name:"sticker/shadow_18.png"},{bytes:5482,md5:"70921eef33a92246f0613cbbec732aba",name:"sticker/shadow_19.png"},{bytes:17082,md5:"fe36c59d402c2134fe4e7c17c05588fb",name:"sticker/shadow_2.png"},{bytes:4767,md5:"f58265e7d388b29d7ebcc5e1fd7483f4",name:"sticker/shadow_20.png"},{bytes:5031,md5:"c3f03c63c91be7f27b9c3c08ca3c1919",name:"sticker/shadow_21.png"},{bytes:38679,md5:"e8e385ae5f08ad6cfec6d463166d4aee",name:"sticker/shadow_3.png"},{bytes:20766,md5:"5e58fcfa7803c1f8e4a2dff6feb4a53f",name:"sticker/shadow_4.png"},
{bytes:12989,md5:"533849de16698a2ae6d51033fd48fae0",name:"sticker/shadow_5.png"},{bytes:18766,md5:"97e422e9cfc6dda60a35ce5b13843f6e",name:"sticker/shadow_6.png"},{bytes:16757,md5:"c46feb91ed5428262e0559af092ba3bc",name:"sticker/shadow_7.png"},{bytes:19315,md5:"2203573f37ab9a2d373789bac5998218",name:"sticker/shadow_8.png"},{bytes:37164,md5:"12a9177d30884fefd72bb802818f5421",name:"sticker/shadow_9.png"},{bytes:37307,md5:"a88e327b2887cc5c91334386ee33d8ba",name:"sticker/sticker_1.png"},{bytes:3025,md5:"9f70d1e5034178164ae2d1db2a878517",
name:"sticker/sticker_10.png"},{bytes:17811,md5:"1b0b50ad09b7be88ac993da13599d7cd",name:"sticker/sticker_11.png"},{bytes:3413,md5:"cf26d76020175d2dc6778c299d8d7a0b",name:"sticker/sticker_12.png"},{bytes:16615,md5:"f15d57c9a30441c669b6b0c454ed32e9",name:"sticker/sticker_13.png"},{bytes:3025,md5:"9f70d1e5034178164ae2d1db2a878517",name:"sticker/sticker_14.png"},{bytes:3612,md5:"7dcf2401277e254b820b7165a7e4a31a",name:"sticker/sticker_15.png"},{bytes:17616,md5:"e92f5388b93df3657fcb0c846d081ce3",name:"sticker/sticker_16.png"},
{bytes:11336,md5:"a5fe5d419aac2d0084b3221d3f668362",name:"sticker/sticker_17.png"},{bytes:3278,md5:"be14b5189de780cf2bc7fdf209bc2666",name:"sticker/sticker_18.png"},{bytes:3729,md5:"c7972e9691ad37356ba09697f07fe2eb",name:"sticker/sticker_19.png"},{bytes:24494,md5:"b5b6306eee3405f1966fe4e600f5a0da",name:"sticker/sticker_2.png"},{bytes:3393,md5:"3ae7ac1bcc25bf99e9a9320d0e100acf",name:"sticker/sticker_20.png"},{bytes:4322,md5:"3e9f401330be0176139dda0f554d5b33",name:"sticker/sticker_21.png"},{bytes:47054,
md5:"fc44d721b9efeb4bfe45f4064d95d731",name:"sticker/sticker_3.png"},{bytes:23918,md5:"d15cc37eca2876c034956e0da29dbdad",name:"sticker/sticker_4.png"},{bytes:15851,md5:"071338117919570dcb4ab1cef7e89c97",name:"sticker/sticker_5.png"},{bytes:23951,md5:"31359ceee5ce3469958a7b8a4441e6ce",name:"sticker/sticker_6.png"},{bytes:21089,md5:"418fe452891ab6416a5be92c8c210c51",name:"sticker/sticker_7.png"},{bytes:24062,md5:"34229a35cdce9cdde21ca5fcd6898798",name:"sticker/sticker_8.png"},{bytes:46504,md5:"7ee1d5bbd32d223d5450b530f09ff198",
name:"sticker/sticker_9.png"}],global:[{bytes:0,md5:"7c3560a0ef91db57dc8d180067e9da59",name:"empty.txt"}],bg_looneytunes:[{bytes:128223,md5:"846d22e9522ad5fa46afcee8bc64c507",name:"bg_1.png"},{bytes:122947,md5:"7b6ab5304c2325abaa92faee9f8c797e",name:"bg_2.png"},{bytes:111714,md5:"7a42836452e92c7ca35d420717248d1a",name:"bg_3.png"},{bytes:140373,md5:"002cb217d6c21235154e0e3215f165f9",name:"bg_4.png"},{bytes:153040,md5:"173cd2661689a08f4edb0c5854680949",name:"bg_5.png"},{bytes:135400,md5:"27221b58d48e7482daecb79b969f9d65",
name:"bg_6.png"}],paint_wabbit:[{bytes:1027,md5:"70f2cd367f758b2ffe543b66be066050",name:"brush/brush_1.png"},{bytes:1079,md5:"daed446dee07fddc580e9a630d8f40fb",name:"brush/brush_2.png"},{bytes:1021,md5:"39dd15b2096ab23527e0583c5dfeb403",name:"brush/brush_3.png"},{bytes:173308,md5:"847e010c9ab0a905a6276d734ff5b1c9",name:"flump/cn_paint/atlas0.png"},{bytes:27011,md5:"184b7afe1c63b211fbc796d583a6e154",name:"flump/cn_paint/library.json"},{bytes:129319,md5:"c0d42b4ae38613be8a29d4c25a9db48d",name:"interface/desk.png"},
{bytes:786,md5:"377183543fc3f701d1430c9294059c0f",name:"stamp/stamp_1.png"},{bytes:845,md5:"fec937c11a363e1ab2fc6573d86f4ac4",name:"stamp/stamp_2.png"},{bytes:1720,md5:"fccf3753273cc09cd1a3eea3b0e5973b",name:"stamp/stamp_3.png"},{bytes:884,md5:"f09477142dafba111cf95622e9ef0bc1",name:"stamp/stamp_4.png"},{bytes:892,md5:"5506c82536237fc7c5a7536f362e2e4a",name:"stamp/stamp_5.png"},{bytes:18624,md5:"8db7e93f2b169a0bf57028d7c4f826c2",name:"sticker/shadow_1.png"},{bytes:9143,md5:"7ac19f0c434caf41a2bfc2e8f41a0ff6",
name:"sticker/shadow_10.png"},{bytes:7825,md5:"478d65e32e826b2d33501c2f67f355af",name:"sticker/shadow_11.png"},{bytes:4981,md5:"a2f5787ad421a6e3bd59c64786066afb",name:"sticker/shadow_12.png"},{bytes:7413,md5:"5b8a0df0ecc9b4f1ca8878774b1623df",name:"sticker/shadow_13.png"},{bytes:4385,md5:"46ab60bda91e9a7a6f6f09c15d30e882",name:"sticker/shadow_14.png"},{bytes:5182,md5:"d833fde5965e970013a5c7ed36ddcb05",name:"sticker/shadow_15.png"},{bytes:7708,md5:"f4935deecd16a981ff81252f5d7fd423",name:"sticker/shadow_16.png"},
{bytes:5700,md5:"77e4607cc9d26b83f41837c31636f687",name:"sticker/shadow_17.png"},{bytes:4673,md5:"fc18b8e0da28161f1dbada26019e3851",name:"sticker/shadow_18.png"},{bytes:5482,md5:"70921eef33a92246f0613cbbec732aba",name:"sticker/shadow_19.png"},{bytes:14092,md5:"99c2c28ada4dce1e15cec772c93fdd18",name:"sticker/shadow_2.png"},{bytes:4767,md5:"f58265e7d388b29d7ebcc5e1fd7483f4",name:"sticker/shadow_20.png"},{bytes:5031,md5:"c3f03c63c91be7f27b9c3c08ca3c1919",name:"sticker/shadow_21.png"},{bytes:10408,md5:"baa6d9035c11c06bcde77533303a1e65",
name:"sticker/shadow_3.png"},{bytes:20898,md5:"d47794189176de0a5aa13371548cfe91",name:"sticker/shadow_4.png"},{bytes:21262,md5:"70f8c9e2e7515e21ec8d87501a77f824",name:"sticker/shadow_5.png"},{bytes:24392,md5:"bd63207b5c2fc189e5d11dbfd3ca743f",name:"sticker/shadow_6.png"},{bytes:30682,md5:"c36a32099bb6a46c7186fc0fac923b5f",name:"sticker/shadow_7.png"},{bytes:41808,md5:"2eeac852cf6a00ca295bdfd92b351970",name:"sticker/shadow_8.png"},{bytes:31125,md5:"f4918395e26c0fdbadec11811992196c",name:"sticker/shadow_9.png"},
{bytes:17315,md5:"af1d7f77a9c75718c8e6988b9b87a846",name:"sticker/sticker_1.png"},{bytes:7367,md5:"529e38bbbf35cb03db87c4184a4518d1",name:"sticker/sticker_10.png"},{bytes:17811,md5:"1b0b50ad09b7be88ac993da13599d7cd",name:"sticker/sticker_11.png"},{bytes:3413,md5:"cf26d76020175d2dc6778c299d8d7a0b",name:"sticker/sticker_12.png"},{bytes:16615,md5:"f15d57c9a30441c669b6b0c454ed32e9",name:"sticker/sticker_13.png"},{bytes:3025,md5:"9f70d1e5034178164ae2d1db2a878517",name:"sticker/sticker_14.png"},{bytes:3612,
md5:"7dcf2401277e254b820b7165a7e4a31a",name:"sticker/sticker_15.png"},{bytes:17616,md5:"e92f5388b93df3657fcb0c846d081ce3",name:"sticker/sticker_16.png"},{bytes:11336,md5:"a5fe5d419aac2d0084b3221d3f668362",name:"sticker/sticker_17.png"},{bytes:3278,md5:"be14b5189de780cf2bc7fdf209bc2666",name:"sticker/sticker_18.png"},{bytes:3729,md5:"c7972e9691ad37356ba09697f07fe2eb",name:"sticker/sticker_19.png"},{bytes:10741,md5:"452ec8747aeb29bb447e6e7c36aebfda",name:"sticker/sticker_2.png"},{bytes:3393,md5:"3ae7ac1bcc25bf99e9a9320d0e100acf",
name:"sticker/sticker_20.png"},{bytes:4322,md5:"3e9f401330be0176139dda0f554d5b33",name:"sticker/sticker_21.png"},{bytes:7566,md5:"4d82ecb09b59126138ae2371a23bb137",name:"sticker/sticker_3.png"},{bytes:17282,md5:"81493d70fe77f56565f41c3468ac478e",name:"sticker/sticker_4.png"},{bytes:16804,md5:"a7cea0fd3691810a071f3ec11a51c34d",name:"sticker/sticker_5.png"},{bytes:20363,md5:"4170d38809f8ea9879c081778be9168e",name:"sticker/sticker_6.png"},{bytes:27373,md5:"82285f60c400642a1cd6f1ca24efafcc",name:"sticker/sticker_7.png"},
{bytes:52119,md5:"4f35d270cfe283cf3238ede570869d0a",name:"sticker/sticker_8.png"},{bytes:31434,md5:"3d617729def3f37d9a339ad71d520549",name:"sticker/sticker_9.png"}],bg_bcsd:[{bytes:102126,md5:"8c6d2ca5418269325c1f216d8112962c",name:"bg_1.png"},{bytes:94656,md5:"402b851532133b7a67fb68b35ee5a37f",name:"bg_2.png"},{bytes:135695,md5:"a926a7e5207f9e5336629490e8b39762",name:"bg_3.png"},{bytes:124806,md5:"58f23bcd9a609682cdbde90c7e2b60fc",name:"bg_4.png"},{bytes:156770,md5:"ab88436988f43bf4cc5a26f5af2d0185",
name:"bg_5.png"},{bytes:123162,md5:"d4a94ca72150931dd8d83ba6eed782c5",name:"bg_6.png"}],splash_tomjerry:[{bytes:381052,md5:"1a4e6a0d7ba9d8462db7847bf7f30014",name:"flump/splash/atlas0.png"},{bytes:3576,md5:"a6b2dd662c6dfdfc14b5314ddf966dd6",name:"flump/splash/library.json"},{bytes:14822,md5:"b74b09eb2b88bd22fd546ba9abe8e30c",name:"thumbs/bg_1.png"},{bytes:18642,md5:"8803e81d615e2fcb4d37dbab901ccf0d",name:"thumbs/bg_1b.png"},{bytes:6585,md5:"eb53bfdd2c3ff010c737f14e0efeaf2c",name:"thumbs/bg_2.png"},
{bytes:7609,md5:"063215c6e4d0f5647c66e0d1e221f627",name:"thumbs/bg_2b.png"},{bytes:15870,md5:"190254c31361b2c9a1711d3167276112",name:"thumbs/bg_3.png"},{bytes:20028,md5:"3d083b4d79e16dbebf91d12f41c3f1b3",name:"thumbs/bg_3b.png"},{bytes:17721,md5:"1f0dbd1c3375340a98669883bb8fb242",name:"thumbs/bg_4.png"},{bytes:22324,md5:"c9b213dfb2c91c65fc5e3e79ded096f8",name:"thumbs/bg_4b.png"},{bytes:16785,md5:"140511dc104d81828099926ef226ee07",name:"thumbs/bg_5.png"},{bytes:20992,md5:"c3791654c6bc4e3846f0e29cc88a44f8",
name:"thumbs/bg_5b.png"},{bytes:16904,md5:"8142d1989d33257a36dc662abb20c330",name:"thumbs/bg_6.png"},{bytes:21692,md5:"3a92e68f501b66bd587a2a14365c4c6f",name:"thumbs/bg_6b.png"},{bytes:3911,md5:"f020ce3446ae79f259dea4aa2330fa06",name:"thumbs/bg_shadow.png"}],splash_wabbit:[{bytes:661752,md5:"25b30fff5584f3e4e8a071bd54c8adb6",name:"flump/splash/atlas0.png"},{bytes:18402,md5:"856916f3bfecfdb37265493abac02672",name:"flump/splash/atlas1.png"},{bytes:4319,md5:"4f8ed27058cbf063656b01090774620c",name:"flump/splash/library.json"},
{bytes:20776,md5:"5f11d7f8cde4cf2ba2ede9efc2e31adc",name:"thumbs/bg_1.png"},{bytes:26151,md5:"08e22374a235768e629cccc57d3c228f",name:"thumbs/bg_1b.png"},{bytes:30248,md5:"c27183da39a8314eacbe93b03867ce68",name:"thumbs/bg_2.png"},{bytes:24857,md5:"87fe0d8659165b959b8fce4ed8091cd0",name:"thumbs/bg_2b.png"},{bytes:29912,md5:"49096f391824a7bdc0bd56d4ef2c3edc",name:"thumbs/bg_3.png"},{bytes:25973,md5:"63290f1d25bda4150396185caf4a5fa0",name:"thumbs/bg_3b.png"},{bytes:26920,md5:"6b4e8550531b13a10d4b30e0614c3a45",
name:"thumbs/bg_4.png"},{bytes:20795,md5:"11a2def44ea557f5fb92f8d76b6f6ba8",name:"thumbs/bg_4b.png"},{bytes:32192,md5:"c4805aef8d1030b407e7dfeb1266bbe2",name:"thumbs/bg_5.png"},{bytes:25354,md5:"a09765be4a222ede188e8f278e8787f7",name:"thumbs/bg_5b.png"},{bytes:29227,md5:"9695244b7ce88556ebac7a737e33716e",name:"thumbs/bg_6.png"},{bytes:25641,md5:"20b3269a14751c2237f1bd1c220bc6ea",name:"thumbs/bg_6b.png"},{bytes:3911,md5:"f020ce3446ae79f259dea4aa2330fa06",name:"thumbs/bg_shadow.png"}],splash_bcsd:[{bytes:702357,
md5:"200ad441aa91fa7734bcd84a6b85437d",name:"flump/splash/atlas0.png"},{bytes:4004,md5:"a988757d614ca345a0e0a688dae25f87",name:"flump/splash/library.json"},{bytes:19780,md5:"097605c893ca77bc936eab8aa2ccec3f",name:"thumbs/bg_1.png"},{bytes:25074,md5:"7e3493cac1e73a4e6571ec07fe2c7782",name:"thumbs/bg_1b.png"},{bytes:18851,md5:"f41f56c4a8174fff2ef8e285aa5a3e44",name:"thumbs/bg_2.png"},{bytes:24289,md5:"940b07aa7988936a0410786be1a88804",name:"thumbs/bg_2b.png"},{bytes:17396,md5:"5d16086204dd170449bf9caaff005f3a",
name:"thumbs/bg_3.png"},{bytes:21848,md5:"e8cf394cbc6f3d30580bceeef950613f",name:"thumbs/bg_3b.png"},{bytes:21700,md5:"cfd279d99e70f9bd575ade1bcf147ba3",name:"thumbs/bg_4.png"},{bytes:27631,md5:"17b2bbab4dd2351891f01628b48e88e0",name:"thumbs/bg_4b.png"},{bytes:22373,md5:"6cca7afa42546da6abc278b00c91f77a",name:"thumbs/bg_5.png"},{bytes:28758,md5:"895d0624edde40343a2dead7a3356340",name:"thumbs/bg_5b.png"},{bytes:20494,md5:"d6c4ac595bfda7f2285b1a69f9c8648c",name:"thumbs/bg_6.png"},{bytes:26205,md5:"cc1b7505f196a5ee069452cb874e9ece",
name:"thumbs/bg_6b.png"},{bytes:3911,md5:"f020ce3446ae79f259dea4aa2330fa06",name:"thumbs/bg_shadow.png"}],splash_looneytunes:[{bytes:406749,md5:"0940421bd21ea888bcd3209c92f26120",name:"flump/splash/atlas0.png"},{bytes:3574,md5:"2ca8ad261eb9274f84c3b37796cbe504",name:"flump/splash/library.json"},{bytes:16295,md5:"b9817bd784b7854db3be0b9c69098dec",name:"thumbs/bg_1.png"},{bytes:21141,md5:"fc9fad00f457d9aef21666b94ff425fb",name:"thumbs/bg_1b.png"},{bytes:18316,md5:"e6f7c871871928667069fb224004e87a",
name:"thumbs/bg_2.png"},{bytes:23638,md5:"1a0bd9a55986eb842d867ca590e00ca0",name:"thumbs/bg_2b.png"},{bytes:15816,md5:"5e79266b660eb3eb260dfdda061ed57c",name:"thumbs/bg_3.png"},{bytes:20397,md5:"5e153bebf803945e40084b16e17cb6cb",name:"thumbs/bg_3b.png"},{bytes:21647,md5:"b6e5145ec8c09617c108f7c3e8406448",name:"thumbs/bg_4.png"},{bytes:27736,md5:"627aa648bb9a54e77b447a7d404c0fb7",name:"thumbs/bg_4b.png"},{bytes:21486,md5:"ffb0055764359039db647fd2aba017c2",name:"thumbs/bg_5.png"},{bytes:27431,md5:"a7ab31e87466b391e8947b29ce9e6b0e",
name:"thumbs/bg_5b.png"},{bytes:19256,md5:"b591d242f9288d98a846c0017e01fa76",name:"thumbs/bg_6.png"},{bytes:24343,md5:"fddd06daa1b50d474b9a9ca510779441",name:"thumbs/bg_6b.png"},{bytes:3911,md5:"f020ce3446ae79f259dea4aa2330fa06",name:"thumbs/bg_shadow.png"}],bg_wabbit:[{bytes:130990,md5:"7b75a1710a864ee348cf5e80c72ff068",name:"bg_1.png"},{bytes:104398,md5:"b17d514694c04cfa57ab298e063b78d8",name:"bg_2.png"},{bytes:103937,md5:"7f62efcad319fd9d5ae4f8774cad06f5",name:"bg_3.png"},{bytes:91406,md5:"9a5db8c5c2837dd04949ceb568539b2a",
name:"bg_4.png"},{bytes:126374,md5:"0232b635232e730fc4ea415410f790b0",name:"bg_5.png"},{bytes:93015,md5:"af85fa14eef852e87cf0721b784576e2",name:"bg_6.png"}],loader:[{bytes:130,md5:"ea5e52ba152c7647cd2508d9f7c3e865",name:"Config.xml"},{bytes:180851,md5:"61be0dbad1ee71a9170a39fb8c9345cd",name:"flump/loading/atlas0.png"},{bytes:4119,md5:"7c34e75df450b0b60a4a1a269c0fb495",name:"flump/loading/library.json"},{bytes:6243,md5:"40ee9a2434c99833c18ea06197407ef8",name:"logo/boomerang.png"}],bg_tomjerry:[{bytes:78144,
md5:"14ae751e9a610733e1ba8e02e97a81f8",name:"bg_1.png"},{bytes:15600,md5:"1da6c527c0d54d5be0cb0afdc36e8e60",name:"bg_2.png"},{bytes:96917,md5:"c0d1fd4256fc4a79e94b4cedd888a6d4",name:"bg_3.png"},{bytes:99411,md5:"3b27b0c08f37d0583da84646ec70c2d3",name:"bg_4.png"},{bytes:85541,md5:"9250b7f622c19d431fa2e8f76913fd4e",name:"bg_5.png"},{bytes:100269,md5:"550de2e84b1e0d06a7110a57cfd35b07",name:"bg_6.png"}],title_ru:[{bytes:39554,md5:"0c20bce6c3954c47d5800d942e074d32",name:"flump/title_ru/atlas0.png"},{bytes:408,
md5:"ebf17ad1e141bb458c7b96cf41488edb",name:"flump/title_ru/library.json"}],title_po:[{bytes:42645,md5:"068944d2fc4978a002dc2a0582c733d5",name:"flump/title_po/atlas0.png"},{bytes:408,md5:"755e2ecb0a56d968b3b09202dce55d2f",name:"flump/title_po/library.json"}],title_it:[{bytes:29871,md5:"44931f4f26b97931ef4530fa60ab8c1c",name:"flump/title_it/atlas0.png"},{bytes:410,md5:"57101d4a29a2dda0e0f40fd76c32d853",name:"flump/title_it/library.json"}],title_fr:[{bytes:34430,md5:"aeb2b84242a529e7d0ff1a9f01a3de33",
name:"flump/title_fr/atlas0.png"},{bytes:410,md5:"4024e001bfb049373ac3d6fdee642bc5",name:"flump/title_fr/library.json"}],title_en:[{bytes:33685,md5:"ee6c61c8f9df6944336d2275ad227377",name:"flump/title_en/atlas0.png"},{bytes:410,md5:"e4fdfe25f6a7b17787fda94470d8aea2",name:"flump/title_en/library.json"}],title_de:[{bytes:46334,md5:"9280a6df64f4fa7747fe7b6bbf1d83fc",name:"flump/title_de/atlas0.png"},{bytes:408,md5:"6fdca9b844d64ae483c5b8d7f76f38c2",name:"flump/title_de/library.json"}],title_ar:[{bytes:34472,
md5:"9fc08ee47e4aa462dbdbac56cb2d2695",name:"flump/title_ar/atlas0.png"},{bytes:410,md5:"2bdb01e2cb5dd17e595e5b5d638e4bfe",name:"flump/title_ar/library.json"}]}]}};F._supportsCrossOrigin=function(){var a;a=0<=window.navigator.userAgent.indexOf("Linux; U; Android")?!1:null!=(new XMLHttpRequest).withCredentials;a||null;return a}();j._scratchPoint=new y;ia.NEWLINE=new pb(10);S._sharedEvent=new Mb;I._sharedEvent=new Nb;ya.CANVAS_TEXTURES=(new ba("(iPhone|iPod|iPad)","")).match(window.navigator.userAgent);
x._mediaRefCount=0;x._detectBlobSupport=!0;s.VENDOR_PREFIXES=["webkit","moz","ms","o","khtml"];s.SHOULD_HIDE_MOBILE_BROWSER=window.top==window&&(new ba("Mobile(/.*)? Safari","")).match(window.navigator.userAgent);C._detectSupport=!0;ca.escapes=function(){var a=new T;a.set("lt","<");a.set("gt",">");a.set("amp","&");a.set("quot",'"');a.set("apos","'");a.set("nbsp",String.fromCharCode(160));return a}(this);sa.main()})();
