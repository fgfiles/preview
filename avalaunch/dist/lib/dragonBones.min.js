var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,m){e.__proto__=m}||function(e,m){for(var a in m)m.hasOwnProperty(a)&&(e[a]=m[a])};return function(c,m){function a(){this.constructor=c}e(c,m);c.prototype=null===m?Object.create(m):(a.prototype=m.prototype,new a)}}(),dragonBones;
(function(e){var c=function(){function e(){}e.hasArmature=function(a){return 0<=e._armatures.indexOf(a)};e.addArmature=function(a){a&&0>e._armatures.indexOf(a)&&e._armatures.push(a)};e.removeArmature=function(a){a&&(a=e._armatures.indexOf(a),0<=a&&e._armatures.splice(a,1))};return e}();c.PI_D=2*Math.PI;c.PI_H=Math.PI/2;c.PI_Q=Math.PI/4;c.ANGLE_TO_RADIAN=Math.PI/180;c.RADIAN_TO_ANGLE=180/Math.PI;c.SECOND_TO_MILLISECOND=1E3;c.NO_TWEEN=100;c.VERSION="5.0.0";c.ARGUMENT_ERROR="Argument error.";c.yDown=
!0;c.debug=!1;c.debugDraw=!1;c._armatures=[];e.DragonBones=c})(dragonBones||(dragonBones={}));
(function(e){var c=function(){function e(){this.hashCode=e._hashCode++}e._returnObject=function(a){var b=String(a.constructor),f=null==e._maxCountMap[b]?e._defaultMaxCount:e._maxCountMap[b],b=e._poolsMap[b]=e._poolsMap[b]||[];b.length<f&&b.push(a)};e.setMaxCount=function(a,b){if(0>b||b!==b)b=0;if(a){var f=String(a);e._maxCountMap[f]=b;var d=e._poolsMap[f];d&&d.length>b&&(d.length=b)}else for(f in e._defaultMaxCount=b,e._poolsMap)null!=e._maxCountMap[f]&&(e._maxCountMap[f]=b,d=e._poolsMap[f],d.length>
b&&(d.length=b))};e.clearPool=function(a){void 0===a&&(a=null);if(a)(a=e._poolsMap[String(a)])&&a.length&&(a.length=0);else for(var b in e._poolsMap)a=e._poolsMap[b],a.length=0};e.borrowObject=function(a){var b=e._poolsMap[String(a)];if(b&&0<b.length)return b.pop();a=new a;a._onClear();return a};e.prototype.returnToPool=function(){this._onClear();e._returnObject(this)};return e}();c._hashCode=0;c._defaultMaxCount=5E3;c._maxCountMap={};c._poolsMap={};e.BaseObject=c})(dragonBones||(dragonBones={}));
(function(e){var c=function(){function e(a,b){void 0===a&&(a=0);void 0===b&&(b=0);this.x=a;this.y=b}e.prototype.copyFrom=function(a){this.x=a.x;this.y=a.y};e.prototype.clear=function(){this.x=this.y=0};return e}();e.Point=c})(dragonBones||(dragonBones={}));
(function(e){var c=function(){function e(a,b,f,d){void 0===a&&(a=0);void 0===b&&(b=0);void 0===f&&(f=0);void 0===d&&(d=0);this.x=a;this.y=b;this.width=f;this.height=d}e.prototype.copyFrom=function(a){this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height};e.prototype.clear=function(){this.width=this.height=this.x=this.y=0};return e}();e.Rectangle=c})(dragonBones||(dragonBones={}));
(function(e){var c=function(){function c(a,b,f,d,g,l){void 0===a&&(a=0);void 0===b&&(b=0);void 0===f&&(f=0);void 0===d&&(d=0);void 0===g&&(g=1);void 0===l&&(l=1);this.x=a;this.y=b;this.skewX=f;this.skewY=d;this.scaleX=g;this.scaleY=l}c.normalizeRadian=function(a){a=(a+Math.PI)%(2*Math.PI);return a+=0<a?-Math.PI:Math.PI};c.prototype.toString=function(){return"[object dragonBones.Transform] x:"+this.x+" y:"+this.y+" skewX:"+180*this.skewX/Math.PI+" skewY:"+180*this.skewY/Math.PI+" scaleX:"+this.scaleX+
" scaleY:"+this.scaleY};c.prototype.copyFrom=function(a){this.x=a.x;this.y=a.y;this.skewX=a.skewX;this.skewY=a.skewY;this.scaleX=a.scaleX;this.scaleY=a.scaleY;return this};c.prototype.identity=function(){this.x=this.y=this.skewX=this.skewY=0;this.scaleX=this.scaleY=1;return this};c.prototype.add=function(a){this.x+=a.x;this.y+=a.y;this.skewX+=a.skewX;this.skewY+=a.skewY;this.scaleX*=a.scaleX;this.scaleY*=a.scaleY;return this};c.prototype.minus=function(a){this.x-=a.x;this.y-=a.y;this.skewX=c.normalizeRadian(this.skewX-
a.skewX);this.skewY=c.normalizeRadian(this.skewY-a.skewY);this.scaleX/=a.scaleX;this.scaleY/=a.scaleY;return this};c.prototype.fromMatrix=function(a){this.x=a.tx;this.y=a.ty;this.skewX=Math.atan(-a.c/a.d);this.skewY=Math.atan(a.b/a.a);var b=this.scaleX,f=this.scaleY,d=e.DragonBones.PI_Q,g=this.skewX-this.skewY,l=Math.cos(this.skewX),k=Math.sin(this.skewX);this.scaleX=-.01<g&&.01>g?this.skewY>-d&&this.skewY<d?a.a/l:a.b/k:this.skewY>-d&&this.skewY<d?a.a/Math.cos(this.skewY):a.b/Math.sin(this.skewY);
this.scaleY=this.skewX>-d&&this.skewX<d?a.d/l:-a.c/k;0<=b&&0>this.scaleX&&(this.scaleX=-this.scaleX,this.skewY=c.normalizeRadian(this.skewY-Math.PI));0<=f&&0>this.scaleY&&(this.scaleY=-this.scaleY,this.skewX=c.normalizeRadian(this.skewX-Math.PI));return this};c.prototype.toMatrix=function(a){if(0!==this.skewX||0!==this.skewY){a.a=Math.cos(this.skewY);a.b=Math.sin(this.skewY);var b=this.skewX-this.skewY;-.01<b&&.01>b?(a.c=-a.b,a.d=a.a):(a.c=-Math.sin(this.skewX),a.d=Math.cos(this.skewX));1!==this.scaleX&&
(a.a*=this.scaleX,a.b*=this.scaleX);1!==this.scaleY&&(a.c*=this.scaleY,a.d*=this.scaleY)}else a.a=this.scaleX,a.b=0,a.c=0,a.d=this.scaleY;a.tx=this.x;a.ty=this.y;return this};Object.defineProperty(c.prototype,"rotation",{get:function(){return 0<=this.scaleX?this.skewY:this.skewY+Math.PI},set:function(a){a=0<=this.scaleX?a-this.skewY:a-this.skewY-Math.PI;this.skewX+=a;this.skewY+=a},enumerable:!0,configurable:!0});return c}();e.Transform=c})(dragonBones||(dragonBones={}));
(function(e){var c=function(){function e(a,b,f,d,g,l){void 0===a&&(a=1);void 0===b&&(b=0);void 0===f&&(f=0);void 0===d&&(d=1);void 0===g&&(g=0);void 0===l&&(l=0);this.a=a;this.b=b;this.c=f;this.d=d;this.tx=g;this.ty=l}e.prototype.toString=function(){return"[object dragonBones.Matrix] a:"+this.a+" b:"+this.b+" c:"+this.c+" d:"+this.d+" tx:"+this.tx+" ty:"+this.ty};e.prototype.copyFrom=function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.d=a.d;this.tx=a.tx;this.ty=a.ty;return this};e.prototype.copyFromArray=
function(a,b){void 0===b&&(b=0);this.a=a[b];this.b=a[b+1];this.c=a[b+2];this.d=a[b+3];this.tx=a[b+4];this.ty=a[b+5];return this};e.prototype.identity=function(){this.a=this.d=1;this.tx=this.ty=this.b=this.c=0;return this};e.prototype.concat=function(a){var b=this.a*a.a,f=0,d=0,g=this.d*a.d,l=this.tx*a.a+a.tx,e=this.ty*a.d+a.ty;if(0!==this.b||0!==this.c)b+=this.b*a.c,f+=this.b*a.d,d+=this.c*a.a,g+=this.c*a.b;if(0!==a.b||0!==a.c)f+=this.a*a.b,d+=this.d*a.c,l+=this.ty*a.c,e+=this.tx*a.b;this.a=b;this.b=
f;this.c=d;this.d=g;this.tx=l;this.ty=e;return this};e.prototype.invert=function(){var a=this.a,b=this.b,f=this.c,d=this.d,g=this.tx,l=this.ty;if(0===b&&0===f)return this.b=this.c=0,0===a||0===d?this.a=this.b=this.tx=this.ty=0:(a=this.a=1/a,d=this.d=1/d,this.tx=-a*g,this.ty=-d*l),this;var e=a*d-b*f;if(0===e)return this.a=this.d=1,this.tx=this.ty=this.b=this.c=0,this;var e=1/e,h=this.a=d*e,b=this.b=-b*e,f=this.c=-f*e,d=this.d=a*e;this.tx=-(h*g+f*l);this.ty=-(b*g+d*l);return this};e.prototype.transformPoint=
function(a,b,f,d){void 0===d&&(d=!1);f.x=this.a*a+this.c*b;f.y=this.b*a+this.d*b;d||(f.x+=this.tx,f.y+=this.ty)};return e}();e.Matrix=c})(dragonBones||(dragonBones={}));
(function(e){var c=function(){function e(a,b,f,d,g,l,e,h){void 0===a&&(a=1);void 0===b&&(b=1);void 0===f&&(f=1);void 0===d&&(d=1);void 0===g&&(g=0);void 0===l&&(l=0);void 0===e&&(e=0);void 0===h&&(h=0);this.alphaMultiplier=a;this.redMultiplier=b;this.greenMultiplier=f;this.blueMultiplier=d;this.alphaOffset=g;this.redOffset=l;this.greenOffset=e;this.blueOffset=h}e.prototype.copyFrom=function(a){this.alphaMultiplier=a.alphaMultiplier;this.redMultiplier=a.redMultiplier;this.greenMultiplier=a.greenMultiplier;
this.blueMultiplier=a.blueMultiplier;this.alphaOffset=a.alphaOffset;this.redOffset=this.redOffset=a.redOffset;this.greenOffset=a.blueOffset};e.prototype.identity=function(){this.alphaMultiplier=this.redMultiplier=this.greenMultiplier=this.blueMultiplier=1;this.alphaOffset=this.redOffset=this.greenOffset=this.blueOffset=0};return e}();e.ColorTransform=c})(dragonBones||(dragonBones={}));
(function(e){var c=function(e){function a(){var b=e.call(this)||this;b.boneMask=[];b.animationNames=[];return b}__extends(a,e);a.toString=function(){return"[class dragonBones.AnimationConfig]"};a.prototype._onClear=function(){this.pauseFadeOut=!0;this.fadeOutMode=4;this.fadeOutTime=-1;this.fadeOutEasing=0;this.additiveBlending=!1;this.actionEnabled=this.pauseFadeIn=this.displayControl=!0;this.playTimes=-1;this.position=this.layer=0;this.duration=-1;this.timeScale=-100;this.autoFadeOutTime=this.fadeInTime=
-1;this.fadeInEasing=0;this.weight=1;this.group=this.animationName=this.name=null;this.boneMask.length=0;this.animationNames.length=0};a.prototype.clear=function(){this._onClear()};a.prototype.copyFrom=function(b){this.pauseFadeOut=b.pauseFadeOut;this.fadeOutMode=b.fadeOutMode;this.autoFadeOutTime=b.autoFadeOutTime;this.fadeOutEasing=b.fadeOutEasing;this.additiveBlending=b.additiveBlending;this.displayControl=b.displayControl;this.pauseFadeIn=b.pauseFadeIn;this.actionEnabled=b.actionEnabled;this.playTimes=
b.playTimes;this.layer=b.layer;this.position=b.position;this.duration=b.duration;this.timeScale=b.timeScale;this.fadeInTime=b.fadeInTime;this.fadeOutTime=b.fadeOutTime;this.fadeInEasing=b.fadeInEasing;this.weight=b.weight;this.name=b.name;this.animationName=b.animationName;this.group=b.group;this.boneMask.length=b.boneMask.length;for(var a=0,d=this.boneMask.length;a<d;++a)this.boneMask[a]=b.boneMask[a];this.animationNames.length=b.animationNames.length;a=0;for(d=this.animationNames.length;a<d;++a)this.animationNames[a]=
b.animationNames[a]};a.prototype.containsBoneMask=function(b){return 0===this.boneMask.length||0<=this.boneMask.indexOf(b)};a.prototype.addBoneMask=function(b,a,d){void 0===d&&(d=!0);var f=b.getBone(a);if(f&&(0>this.boneMask.indexOf(a)&&this.boneMask.push(a),d))for(b=b.getBones(),a=0,d=b.length;a<d;++a){var l=b[a];0>this.boneMask.indexOf(l.name)&&f.contains(l)&&this.boneMask.push(l.name)}};a.prototype.removeBoneMask=function(b,a,d){void 0===d&&(d=!0);var f=this.boneMask.indexOf(a);0<=f&&this.boneMask.splice(f,
1);if(d&&(a=b.getBone(a)))if(b=b.getBones(),0<this.boneMask.length)for(d=0,f=b.length;d<f;++d){var l=b[d],e=this.boneMask.indexOf(l.name);0<=e&&a.contains(l)&&this.boneMask.splice(e,1)}else for(d=0,f=b.length;d<f;++d)l=b[d],a.contains(l)||this.boneMask.push(l.name)};return a}(e.BaseObject);e.AnimationConfig=c})(dragonBones||(dragonBones={}));
(function(e){var c=function(b){function a(){return b.call(this)||this}__extends(a,b);a.prototype._onClear=function(){this.duration=this.position=0;this.next=this.prev=null};return a}(e.BaseObject);e.FrameData=c;var m=function(b){function a(){return b.call(this)||this}__extends(a,b);a._getCurvePoint=function(b,a,f,e,h,c,m,q,p,r){var d=1-p,g=d*d,l=p*p,k=d*g,g=3*p*g,d=3*d*l;p*=l;r.x=k*b+g*f+d*h+p*m;r.y=k*a+g*e+d*c+p*q};a.samplingEasingCurve=function(b,f){for(var d=b.length,g=new e.Point,h=-2,c=0,m=f.length;c<
m;++c){for(var q=(c+1)/(m+1);(h+6<d?b[h+6]:1)<q;)h+=6;for(var p=0<=h&&h+6<d,r=p?b[h]:0,E=p?b[h+1]:0,x=b[h+2],t=b[h+3],B=b[h+4],y=b[h+5],u=p?b[h+6]:1,p=p?b[h+7]:1,v=0,A=1;.01<A-v;){var z=(A+v)/2;a._getCurvePoint(r,E,x,t,B,y,u,p,z,g);0<q-g.x?v=z:A=z}f[c]=g.y}};a.prototype._onClear=function(){b.prototype._onClear.call(this);this.tweenEasing=0;this.curve=null};return a}(c);e.TweenFrameData=m;var a=function(b){function a(){var a=b.call(this)||this;a.actions=[];a.events=[];return a}__extends(a,b);a.toString=
function(){return"[class dragonBones.AnimationFrameData]"};a.prototype._onClear=function(){b.prototype._onClear.call(this);for(var a=0,f=this.actions.length;a<f;++a)this.actions[a].returnToPool();a=0;for(f=this.events.length;a<f;++a)this.events[a].returnToPool();this.actions.length=0;this.events.length=0};return a}(c);e.AnimationFrameData=a;c=function(b){function a(){var a=b.call(this)||this;a.zOrder=[];return a}__extends(a,b);a.prototype._onClear=function(){b.prototype._onClear.call(this);this.zOrder.length=
0};return a}(c);e.ZOrderFrameData=c;c=function(b){function a(){var a=b.call(this)||this;a.transform=new e.Transform;return a}__extends(a,b);a.toString=function(){return"[class dragonBones.BoneFrameData]"};a.prototype._onClear=function(){b.prototype._onClear.call(this);this.tweenScale=!1;this.tweenRotate=0;this.transform.identity()};return a}(m);e.BoneFrameData=c;c=function(b){function a(){return b.call(this)||this}__extends(a,b);a.generateColor=function(){return new e.ColorTransform};a.toString=function(){return"[class dragonBones.SlotFrameData]"};
a.prototype._onClear=function(){b.prototype._onClear.call(this);this.displayIndex=0;this.color=null};return a}(m);c.DEFAULT_COLOR=new e.ColorTransform;e.SlotFrameData=c;m=function(b){function a(){var a=b.call(this)||this;a.tweens=[];return a}__extends(a,b);a.toString=function(){return"[class dragonBones.ExtensionFrameData]"};a.prototype._onClear=function(){b.prototype._onClear.call(this);this.tweens.length=0};return a}(m);e.ExtensionFrameData=m})(dragonBones||(dragonBones={}));
(function(e){var c=function(a){function b(){var b=a.call(this)||this;b.frames=[];return b}__extends(b,a);b.toString=function(){return"[class dragonBones.TimelineData]"};b.prototype._onClear=function(){for(var b=null,a=0,g=this.frames.length;a<g;++a){var l=this.frames[a];b&&l!==b&&b.returnToPool();b=l}this.scale=1;this.offset=0;this.frames.length=0};return b}(e.BaseObject);e.TimelineData=c;var m=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}__extends(b,a);b.toString=function(){return"[class dragonBones.ZOrderTimelineData]"};
return b}(c);e.ZOrderTimelineData=m;m=function(a){function b(){var b=a.call(this)||this;b.originalTransform=new e.Transform;return b}__extends(b,a);b.toString=function(){return"[class dragonBones.BoneTimelineData]"};b.prototype._onClear=function(){a.prototype._onClear.call(this);this.originalTransform.identity();this.bone=null};return b}(c);e.BoneTimelineData=m;m=function(a){function b(){return a.call(this)||this}__extends(b,a);b.toString=function(){return"[class dragonBones.SlotTimelineData]"};b.prototype._onClear=
function(){a.prototype._onClear.call(this);this.slot=null};return b}(c);e.SlotTimelineData=m;c=function(a){function b(){return a.call(this)||this}__extends(b,a);b.toString=function(){return"[class dragonBones.FFDTimelineData]"};b.prototype._onClear=function(){a.prototype._onClear.call(this);this.display=this.slot=this.skin=null};return b}(c);e.FFDTimelineData=c})(dragonBones||(dragonBones={}));
(function(e){var c=function(c){function a(){var b=c.call(this)||this;b.boneTimelines={};b.slotTimelines={};b.ffdTimelines={};b.cachedFrames=[];b.boneCachedFrameIndices={};b.slotCachedFrameIndices={};return b}__extends(a,c);a.toString=function(){return"[class dragonBones.AnimationData]"};a.prototype._onClear=function(){c.prototype._onClear.call(this);for(var b in this.boneTimelines)this.boneTimelines[b].returnToPool(),delete this.boneTimelines[b];for(b in this.slotTimelines)this.slotTimelines[b].returnToPool(),
delete this.slotTimelines[b];for(b in this.ffdTimelines){for(var a in this.ffdTimelines[b])for(var d in this.ffdTimelines[b][a])this.ffdTimelines[b][a][d].returnToPool();delete this.ffdTimelines[b]}for(b in this.boneCachedFrameIndices)delete this.boneCachedFrameIndices[b];for(b in this.slotCachedFrameIndices)delete this.slotCachedFrameIndices[b];this.zOrderTimeline&&this.zOrderTimeline.returnToPool();this.cacheFrameRate=this.fadeInTime=this.duration=this.playTimes=this.frameCount=0;this.name=null;
this.cachedFrames.length=0;this.zOrderTimeline=null};a.prototype.cacheFrames=function(b){if(!(0<this.cacheFrameRate)){this.cacheFrameRate=Math.max(Math.ceil(b*this.scale),1);b=Math.ceil(this.cacheFrameRate*this.duration)+1;this.cachedFrames.length=0;this.cachedFrames.length=b;for(var a in this.boneTimelines){for(var d=Array(b),g=0,l=d.length;g<l;++g)d[g]=-1;this.boneCachedFrameIndices[a]=d}for(a in this.slotTimelines){d=Array(b);g=0;for(l=d.length;g<l;++g)d[g]=-1;this.slotCachedFrameIndices[a]=d}}};
a.prototype.addBoneTimeline=function(b){if(b&&b.bone&&!this.boneTimelines[b.bone.name])this.boneTimelines[b.bone.name]=b;else throw Error(e.DragonBones.ARGUMENT_ERROR);};a.prototype.addSlotTimeline=function(b){if(b&&b.slot&&!this.slotTimelines[b.slot.name])this.slotTimelines[b.slot.name]=b;else throw Error(e.DragonBones.ARGUMENT_ERROR);};a.prototype.addFFDTimeline=function(b){if(b&&b.skin&&b.slot&&b.display){var a=this.ffdTimelines[b.skin.name]=this.ffdTimelines[b.skin.name]||{},a=a[b.slot.slot.name]=
a[b.slot.slot.name]||{};if(a[b.display.name])throw Error(e.DragonBones.ARGUMENT_ERROR);a[b.display.name]=b}else throw Error(e.DragonBones.ARGUMENT_ERROR);};a.prototype.getBoneTimeline=function(b){return this.boneTimelines[b]};a.prototype.getSlotTimeline=function(b){return this.slotTimelines[b]};a.prototype.getFFDTimeline=function(b,a){var f=this.ffdTimelines[b];return f?f[a]:null};a.prototype.getBoneCachedFrameIndices=function(b){return this.boneCachedFrameIndices[b]};a.prototype.getSlotCachedFrameIndices=
function(b){return this.slotCachedFrameIndices[b]};return a}(e.TimelineData);e.AnimationData=c})(dragonBones||(dragonBones={}));
(function(e){var c=function(c){function a(){var b=c.call(this)||this;b.aabb=new e.Rectangle;b.bones={};b.slots={};b.skins={};b.animations={};b.actions=[];b._animationNames=[];b._sortedBones=[];b._sortedSlots=[];b._bonesChildren={};return b}__extends(a,c);a.toString=function(){return"[class dragonBones.ArmatureData]"};a._onSortSlots=function(b,a){return b.zOrder>a.zOrder?1:-1};a.prototype._onClear=function(){for(var b in this.bones)this.bones[b].returnToPool(),delete this.bones[b];for(b in this.slots)this.slots[b].returnToPool(),
delete this.slots[b];for(b in this.skins)this.skins[b].returnToPool(),delete this.skins[b];for(b in this.animations)this.animations[b].returnToPool(),delete this.animations[b];for(var a=0,d=this.actions.length;a<d;++a)this.actions[a].returnToPool();for(b in this._bonesChildren)delete this._bonesChildren[b];this.userData&&this.userData.returnToPool();this.isRightTransform=!1;this.frameRate=0;this.type=-1;this.cacheFrameRate=0;this.scale=1;this.name=null;this.aabb.clear();this.actions.length=0;this.userData=
this.parent=null;this._slotDirty=this._boneDirty=!1;this._animationNames.length=0;this._sortedBones.length=0;this._sortedSlots.length=0;this._defaultAnimation=this._defaultSkin=null};a.prototype._sortBones=function(){var b=this._sortedBones.length;if(!(1>b)){var a=this._sortedBones.concat(),d=0,g=0;for(this._sortedBones.length=0;g<b;){var l=a[d++];d>=b&&(d=0);0<=this._sortedBones.indexOf(l)||l.parent&&0>this._sortedBones.indexOf(l.parent)||l.ik&&0>this._sortedBones.indexOf(l.ik)||(l.ik&&0<l.chain&&
l.chainIndex===l.chain?this._sortedBones.splice(this._sortedBones.indexOf(l.parent)+1,0,l):this._sortedBones.push(l),g++)}}};a.prototype._sortSlots=function(){this._sortedSlots.sort(a._onSortSlots)};a.prototype.cacheFrames=function(b){if(!(0<this.cacheFrameRate)){this.cacheFrameRate=b;for(var a in this.animations)this.animations[a].cacheFrames(this.cacheFrameRate)}};a.prototype.setCacheFrame=function(b,a,d){void 0===d&&(d=-1);var f=this.parent.cachedFrames;0>d&&(d=f.length);f.length+=10;f[d]=b.a;
f[d+1]=b.b;f[d+2]=b.c;f[d+3]=b.d;f[d+4]=b.tx;f[d+5]=b.ty;f[d+6]=a.skewX;f[d+7]=a.skewY;f[d+8]=a.scaleX;f[d+9]=a.scaleY;return d};a.prototype.getCacheFrame=function(b,a,d){var f=this.parent.cachedFrames;b.a=f[d];b.b=f[d+1];b.c=f[d+2];b.d=f[d+3];b.tx=f[d+4];b.ty=f[d+5];a.skewX=f[d+6];a.skewY=f[d+7];a.scaleX=f[d+8];a.scaleY=f[d+9];a.x=b.tx;a.y=b.ty};a.prototype.addBone=function(b,a){if(b&&b.name&&!this.bones[b.name]){if(a){var f=this.getBone(a);f?b.parent=f:(this._bonesChildren[a]=this._bonesChildren[a]||
[]).push(b)}if(f=this._bonesChildren[b.name]){for(var g=0,l=f.length;g<l;++g)f[g].parent=b;delete this._bonesChildren[b.name]}this.bones[b.name]=b;this._sortedBones.push(b);this._boneDirty=!0}else throw Error(e.DragonBones.ARGUMENT_ERROR);};a.prototype.addSlot=function(b){if(b&&b.name&&!this.slots[b.name])this.slots[b.name]=b,this._sortedSlots.push(b),this._slotDirty=!0;else throw Error(e.DragonBones.ARGUMENT_ERROR);};a.prototype.addSkin=function(b){if(b&&b.name&&!this.skins[b.name])this.skins[b.name]=
b,this._defaultSkin||(this._defaultSkin=b);else throw Error(e.DragonBones.ARGUMENT_ERROR);};a.prototype.addAnimation=function(b){if(b&&b.name&&!this.animations[b.name])this.animations[b.name]=b,this._animationNames.push(b.name),this._defaultAnimation||(this._defaultAnimation=b);else throw Error(e.DragonBones.ARGUMENT_ERROR);};a.prototype.getBone=function(b){return this.bones[b]};a.prototype.getSlot=function(b){return this.slots[b]};a.prototype.getSkin=function(b){return b?this.skins[b]:this._defaultSkin};
a.prototype.getAnimation=function(b){return b?this.animations[b]:this._defaultAnimation};Object.defineProperty(a.prototype,"animationNames",{get:function(){return this._animationNames},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"sortedBones",{get:function(){this._boneDirty&&(this._boneDirty=!1,this._sortBones());return this._sortedBones},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"sortedSlots",{get:function(){this._slotDirty&&(this._slotDirty=!1,this._sortSlots());
return this._sortedSlots},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"defaultSkin",{get:function(){return this._defaultSkin},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"defaultAnimation",{get:function(){return this._defaultAnimation},enumerable:!0,configurable:!0});return a}(e.BaseObject);e.ArmatureData=c;c=function(c){function a(){var b=c.call(this)||this;b.transform=new e.Transform;return b}__extends(a,c);a.toString=function(){return"[class dragonBones.BoneData]"};
a.prototype._onClear=function(){this.userData&&this.userData.returnToPool();this.bendPositive=this.inheritReflection=this.inheritScale=this.inheritRotation=this.inheritTranslation=!1;this.length=this.weight=this.chainIndex=this.chain=0;this.name=null;this.transform.identity();this.userData=this.ik=this.parent=null};return a}(e.BaseObject);e.BoneData=c;c=function(c){function a(){var b=c.call(this)||this;b.actions=[];return b}__extends(a,c);a.generateColor=function(){return new e.ColorTransform};a.toString=
function(){return"[class dragonBones.SlotData]"};a.prototype._onClear=function(){for(var b=0,a=this.actions.length;b<a;++b)this.actions[b].returnToPool();this.userData&&this.userData.returnToPool();this.displayIndex=-1;this.zOrder=0;this.blendMode=-1;this.name=null;this.actions.length=0;this.userData=this.color=this.parent=null};return a}(e.BaseObject);c.DEFAULT_COLOR=new e.ColorTransform;e.SlotData=c;c=function(c){function a(){var b=c.call(this)||this;b.slots={};return b}__extends(a,c);a.toString=
function(){return"[class dragonBones.SkinData]"};a.prototype._onClear=function(){for(var b in this.slots)this.slots[b].returnToPool(),delete this.slots[b];this.name=null};a.prototype.addSlot=function(b){if(b&&b.slot&&!this.slots[b.slot.name])this.slots[b.slot.name]=b;else throw Error(e.DragonBones.ARGUMENT_ERROR);};a.prototype.getSlot=function(b){return this.slots[b]};return a}(e.BaseObject);e.SkinData=c;c=function(c){function a(){var b=c.call(this)||this;b.displays=[];b.meshs={};return b}__extends(a,
c);a.toString=function(){return"[class dragonBones.SkinSlotData]"};a.prototype._onClear=function(){for(var b=0,a=this.displays.length;b<a;++b)this.displays[b].returnToPool();for(var d in this.meshs)this.meshs[d].returnToPool(),delete this.meshs[d];this.displays.length=0;this.slot=null};a.prototype.getDisplay=function(b){for(var a=0,d=this.displays.length;a<d;++a){var g=this.displays[a];if(g.name===b)return g}return null};a.prototype.addMesh=function(b){if(b&&b.name&&!this.meshs[b.name])this.meshs[b.name]=
b;else throw Error(e.DragonBones.ARGUMENT_ERROR);};a.prototype.getMesh=function(b){return this.meshs[b]};return a}(e.BaseObject);e.SkinSlotData=c;c=function(c){function a(){var b=c.call(this)||this;b.pivot=new e.Point;b.transform=new e.Transform;return b}__extends(a,c);a.toString=function(){return"[class dragonBones.DisplayData]"};a.prototype._onClear=function(){this.boundingBox&&this.boundingBox.returnToPool();this.isRelativePivot=!1;this.type=-1;this.inheritAnimation=!0;this.share=this.path=this.name=
null;this.pivot.clear();this.transform.identity();this.boundingBox=this.mesh=this.armature=this.texture=null};return a}(e.BaseObject);e.DisplayData=c;c=function(c){function a(){var b=c.call(this)||this;b.slotPose=new e.Matrix;b.uvs=[];b.vertices=[];b.vertexIndices=[];b.boneIndices=[];b.weights=[];b.boneVertices=[];b.bones=[];b.inverseBindPose=[];return b}__extends(a,c);a.toString=function(){return"[class dragonBones.MeshData]"};a.prototype._onClear=function(){this.skinned=!1;this.name=null;this.slotPose.identity();
this.uvs.length=0;this.vertices.length=0;this.vertexIndices.length=0;this.boneIndices.length=0;this.weights.length=0;this.boneVertices.length=0;this.bones.length=0;this.inverseBindPose.length=0};return a}(e.BaseObject);e.MeshData=c;c=function(e){function a(){var b=e.call(this)||this;b.vertices=[];return b}__extends(a,e);a.toString=function(){return"[class dragonBones.BoundingBoxData]"};a._computeOutCode=function(b,a,d,g,l,e){var f=0;b<d?f|=1:b>l&&(f|=2);a<g?f|=4:a>e&&(f|=8);return f};a.segmentIntersectsRectangle=
function(b,f,d,g,l,e,c,m,n,q,p){void 0===n&&(n=null);void 0===q&&(q=null);void 0===p&&(p=null);var k=b>l&&b<c&&f>e&&f<m,h=d>l&&d<c&&g>e&&g<m;if(k&&h)return-1;for(var w=0,t=a._computeOutCode(b,f,l,e,c,m),B=a._computeOutCode(d,g,l,e,c,m);;){if(!(t|B)){w=2;break}else if(t&B)break;var y=0,u=0,v=0,A=t?t:B;A&4?(y=b+(d-b)*(e-f)/(g-f),u=e,p&&(v=.5*-Math.PI)):A&8?(y=b+(d-b)*(m-f)/(g-f),u=m,p&&(v=.5*Math.PI)):A&2?(u=f+(g-f)*(c-b)/(d-b),y=c,p&&(v=0)):A&1&&(u=f+(g-f)*(l-b)/(d-b),y=l,p&&(v=Math.PI));A===t?(b=
y,f=u,t=a._computeOutCode(b,f,l,e,c,m),p&&(p.x=v)):(d=y,g=u,B=a._computeOutCode(d,g,l,e,c,m),p&&(p.y=v))}w&&(k?(w=2,n&&(n.x=d,n.y=g),q&&(q.x=d,q.y=d),p&&(p.x=p.y+Math.PI)):h?(w=1,n&&(n.x=b,n.y=f),q&&(q.x=b,q.y=f),p&&(p.y=p.x+Math.PI)):(w=3,n&&(n.x=b,n.y=f),q&&(q.x=d,q.y=g)));return w};a.segmentIntersectsEllipse=function(b,a,d,g,l,e,c,m,n,q,p){void 0===n&&(n=null);void 0===q&&(q=null);void 0===p&&(p=null);m=c/m;var f=m*m;a*=m;d-=b;g=g*m-a;var k=Math.sqrt(d*d+g*g);d/=k;g/=k;var h=(l-b)*d+(e-a)*g;c*=
c;e=c-(b*b+a*a)+h*h;l=0;if(0<=e){var w=Math.sqrt(e);e=h-w;var h=h+w,w=0>e?-1:e<=k?0:1,k=0>h?-1:h<=k?0:1,B=w*k;if(0>B)return-1;0===B&&(-1===w?(l=2,d=b+h*d,g=(a+h*g)/m,n&&(n.x=d,n.y=g),q&&(q.x=d,q.y=g),p&&(p.x=Math.atan2(g/c*f,d/c),p.y=p.x+Math.PI)):1===k?(l=1,b+=e*d,a=(a+e*g)/m,n&&(n.x=b,n.y=a),q&&(q.x=b,q.y=a),p&&(p.x=Math.atan2(a/c*f,b/c),p.y=p.x+Math.PI)):(l=3,n&&(n.x=b+e*d,n.y=(a+e*g)/m,p&&(p.x=Math.atan2(n.y/c*f,n.x/c))),q&&(q.x=b+h*d,q.y=(a+h*g)/m,p&&(p.y=Math.atan2(q.y/c*f,q.x/c)))))}return l};
a.segmentIntersectsPolygon=function(b,a,d,g,e,k,c,m){void 0===k&&(k=null);void 0===c&&(c=null);void 0===m&&(m=null);b===d&&(b=d+.01);a===g&&(a=g+.01);for(var f=e.length,l=b-d,h=a-g,w=b*g-a*d,E=0,x=e[f-2],t=e[f-1],B=0,y=0,u=0,v=0,A=0,z=0,F=0;F<f;F+=2){var G=e[F],H=e[F+1];x===G&&(x=G+.01);t===H&&(t=H+.01);var C=x-G,D=t-H,I=x*H-t*G,J=l*D-h*C,C=(w*C-l*I)/J;if((C>=x&&C<=G||C>=G&&C<=x)&&(0===l||C>=b&&C<=d||C>=d&&C<=b)&&(D=(w*D-h*I)/J,(D>=t&&D<=H||D>=H&&D<=t)&&(0===h||D>=a&&D<=g||D>=g&&D<=a)))if(c)I=C-b,
0>I&&(I=-I),0===E?(y=B=I,u=C,v=D,A=C,z=D,m&&(m.x=Math.atan2(H-t,G-x)-.5*Math.PI,m.y=m.x)):(I<B&&(B=I,u=C,v=D,m&&(m.x=Math.atan2(H-t,G-x)-.5*Math.PI)),I>y&&(y=I,A=C,z=D,m&&(m.y=Math.atan2(H-t,G-x)-.5*Math.PI))),E++;else{u=C;v=D;A=C;z=D;E++;m&&(m.x=Math.atan2(H-t,G-x)-.5*Math.PI,m.y=m.x);break}x=G;t=H}1===E?(k&&(k.x=u,k.y=v),c&&(c.x=u,c.y=v),m&&(m.y=m.x+Math.PI)):1<E&&(E++,k&&(k.x=u,k.y=v),c&&(c.x=A,c.y=z));return E};a.prototype._onClear=function(){this.type=-1;this.height=this.width=this.y=this.x=
this.color=0;this.vertices.length=0};a.prototype.containsPoint=function(b,a){var f=!1;if(2===this.type){if(b>=this.x&&b<=this.width&&a>=this.y&&a<=this.height)for(var g=0,e=this.vertices.length,k=e-2;g<e;g+=2){var c=this.vertices[k+1],m=this.vertices[g+1];if(m<a&&c>=a||c<a&&m>=a){var n=this.vertices[g];(a-m)*(this.vertices[k]-n)/(c-m)+n<b&&(f=!f)}k=g}}else g=.5*this.width,b>=-g&&b<=g&&(e=.5*this.height,a>=-e&&a<=e&&(1===this.type?(a*=g/e,f=Math.sqrt(b*b+a*a)<=g):f=!0));return f};a.prototype.intersectsSegment=
function(b,f,d,g,e,k,c){void 0===e&&(e=null);void 0===k&&(k=null);void 0===c&&(c=null);var l=0;switch(this.type){case 0:var l=.5*this.width,h=.5*this.height,l=a.segmentIntersectsRectangle(b,f,d,g,-l,-h,l,h,e,k,c);break;case 1:l=a.segmentIntersectsEllipse(b,f,d,g,0,0,.5*this.width,.5*this.height,e,k,c);break;case 2:0!==a.segmentIntersectsRectangle(b,f,d,g,this.x,this.y,this.width,this.height,null,null)&&(l=a.segmentIntersectsPolygon(b,f,d,g,this.vertices,e,k,c))}return l};return a}(e.BaseObject);e.BoundingBoxData=
c})(dragonBones||(dragonBones={}));
(function(e){var c=function(e){function a(){var b=e.call(this)||this;b.ints=[];b.floats=[];b.strings=[];return b}__extends(a,e);a.toString=function(){return"[class dragonBones.CustomData]"};a.prototype._onClear=function(){this.ints.length=0;this.floats.length=0;this.strings.length=0};a.prototype.getInt=function(b){void 0===b&&(b=0);return 0<=b&&b<this.ints.length?this.ints[b]:0};a.prototype.getFloat=function(b){void 0===b&&(b=0);return 0<=b&&b<this.floats.length?this.floats[b]:0};a.prototype.getString=
function(b){void 0===b&&(b=0);return 0<=b&&b<this.strings.length?this.strings[b]:null};return a}(e.BaseObject);e.CustomData=c;c=function(e){function a(){return e.call(this)||this}__extends(a,e);a.toString=function(){return"[class dragonBones.EventData]"};a.prototype._onClear=function(){this.data&&this.data.returnToPool();this.type=-1;this.data=this.slot=this.bone=this.name=null};return a}(e.BaseObject);e.EventData=c;c=function(e){function a(){return e.call(this)||this}__extends(a,e);a.toString=function(){return"[class dragonBones.ActionData]"};
a.prototype._onClear=function(){this.animationConfig&&this.animationConfig.returnToPool();this.type=-1;this.animationConfig=this.slot=this.bone=null};return a}(e.BaseObject);e.ActionData=c;c=function(c){function a(){var b=c.call(this)||this;b.armatures={};b.cachedFrames=[];b._armatureNames=[];return b}__extends(a,c);a.toString=function(){return"[class dragonBones.DragonBonesData]"};a.prototype._onClear=function(){if(e.DragonBones.debug)for(var b=0,a=e.DragonBones._armatures.length;b<a;++b)if(e.DragonBones._armatures[b].armatureData.parent===
this)throw Error("The DragonBonesData is being used, please make sure all armature references to the data have been deleted.");for(var d in this.armatures)this.armatures[d].returnToPool(),delete this.armatures[d];this.userData&&this.userData.returnToPool();this.autoSearch=!1;this.frameRate=0;this.name=this.version=null;this.cachedFrames.length=0;this.userData=null;this._armatureNames.length=0};a.prototype.addArmature=function(b){if(b&&b.name&&!this.armatures[b.name])this.armatures[b.name]=b,this._armatureNames.push(b.name),
b.parent=this;else throw Error(e.DragonBones.ARGUMENT_ERROR);};a.prototype.getArmature=function(b){return this.armatures[b]};Object.defineProperty(a.prototype,"armatureNames",{get:function(){return this._armatureNames},enumerable:!0,configurable:!0});a.prototype.dispose=function(){this.returnToPool()};return a}(e.BaseObject);e.DragonBonesData=c})(dragonBones||(dragonBones={}));
(function(e){var c=function(c){function a(){var b=c.call(this)||this;b.textures={};return b}__extends(a,c);a.prototype._onClear=function(){for(var b in this.textures)this.textures[b].returnToPool(),delete this.textures[b];this.autoSearch=!1;this.scale=1;this.height=this.width=0;this.imagePath=this.name=null};a.prototype.addTexture=function(b){if(b&&b.name&&!this.textures[b.name])this.textures[b.name]=b,b.parent=this;else throw Error(e.DragonBones.ARGUMENT_ERROR);};a.prototype.getTexture=function(b){return this.textures[b]};
a.prototype.copyFrom=function(b){this.autoSearch=b.autoSearch;this.scale=b.scale;this.width=b.width;this.height=b.height;this.name=b.name;this.imagePath=b.imagePath;for(var a in this.textures)this.textures[a].returnToPool(),delete this.textures[a];for(a in b.textures){var d=this.generateTexture();d.copyFrom(b.textures[a]);this.textures[a]=d}};return a}(e.BaseObject);e.TextureAtlasData=c;c=function(c){function a(){var b=c.call(this)||this;b.region=new e.Rectangle;return b}__extends(a,c);a.generateRectangle=
function(){return new e.Rectangle};a.prototype._onClear=function(){this.rotated=!1;this.name=null;this.region.clear();this.parent=this.frame=null};a.prototype.copyFrom=function(b){this.rotated=b.rotated;this.name=b.name;!this.frame&&b.frame?this.frame=a.generateRectangle():this.frame&&!b.frame&&(this.frame=null);this.frame&&b.frame&&this.frame.copyFrom(b.frame);this.parent=b.parent;this.region.copyFrom(b.region)};return a}(e.BaseObject);e.TextureData=c})(dragonBones||(dragonBones={}));
(function(e){var c=function(){function c(){this._isAutoTween=this._isGlobalTransform=this._isOldData=!1;this._animationTweenEasing=0;this._timelinePivot=new e.Point;this._helpPoint=new e.Point;this._helpTransformA=new e.Transform;this._helpTransformB=new e.Transform;this._helpMatrix=new e.Matrix;this._rawBones=[];this._timeline=this._animation=this._skinSlotData=this._skin=this._armature=this._data=null}c._getArmatureType=function(a){switch(a.toLowerCase()){case "stage":return 2;case "armature":return 0;
case "movieclip":return 1;default:return-1}};c._getDisplayType=function(a){switch(a.toLowerCase()){case "image":return 0;case "mesh":return 2;case "armature":return 1;case "boundingbox":return 3;default:return-1}};c._getBoundingBoxType=function(a){switch(a.toLowerCase()){case "rectangle":return 0;case "ellipse":return 1;case "polygon":return 2;default:return-1}};c._getBlendMode=function(a){switch(a.toLowerCase()){case "normal":return 0;case "add":return 1;case "alpha":return 2;case "darken":return 3;
case "difference":return 4;case "erase":return 5;case "hardlight":return 6;case "invert":return 7;case "layer":return 8;case "lighten":return 9;case "multiply":return 10;case "overlay":return 11;case "screen":return 12;case "subtract":return 13;default:return-1}};c._getActionType=function(a){switch(a.toLowerCase()){case "play":case "gotoandplay":return 0;default:return-1}};c.prototype._getTimelineFrameMatrix=function(a,b,f,d){a=Math.floor(f*a.frameCount/a.duration);if(1===b.frames.length||a>=b.frames.length)d.copyFrom(b.frames[0].transform);
else{a=b.frames[a];var g=0;a.tweenEasing!==e.DragonBones.NO_TWEEN?(g=(f-a.position)/a.duration,0!==a.tweenEasing&&(g=e.TweenTimelineState._getEasingValue(g,a.tweenEasing))):a.curve&&(g=(f-a.position)/a.duration,g=e.TweenTimelineState._getEasingCurveValue(g,a.curve));f=a.next;d.x=f.transform.x-a.transform.x;d.y=f.transform.y-a.transform.y;d.skewX=e.Transform.normalizeRadian(f.transform.skewX-a.transform.skewX);d.skewY=e.Transform.normalizeRadian(f.transform.skewY-a.transform.skewY);d.scaleX=f.transform.scaleX-
a.transform.scaleX;d.scaleY=f.transform.scaleY-a.transform.scaleY;d.x=a.transform.x+d.x*g;d.y=a.transform.y+d.y*g;d.skewX=a.transform.skewX+d.skewX*g;d.skewY=a.transform.skewY+d.skewY*g;d.scaleX=a.transform.scaleX+d.scaleX*g;d.scaleY=a.transform.scaleY+d.scaleY*g}d.add(b.originalTransform)};c.prototype._globalToLocal=function(a){for(var b=[],f=a.sortedBones.concat().reverse(),d=0,g=f.length;d<g;++d){var e=f[d];e.parent&&(e.parent.transform.toMatrix(this._helpMatrix),this._helpMatrix.invert(),this._helpMatrix.transformPoint(e.transform.x,
e.transform.y,this._helpPoint),e.transform.x=this._helpPoint.x,e.transform.y=this._helpPoint.y,e.transform.rotation-=e.parent.transform.rotation);for(var c in a.animations){var h=a.animations[c],m=h.getBoneTimeline(e.name);if(m){var n=e.parent?h.getBoneTimeline(e.parent.name):null;this._helpTransformB.copyFrom(m.originalTransform);for(var q=b.length=0,p=m.frames.length;q<p;++q){var r=m.frames[q];0<=b.indexOf(r)||(b.push(r),n?(this._getTimelineFrameMatrix(h,n,r.position,this._helpTransformA),r.transform.add(this._helpTransformB),
this._helpTransformA.toMatrix(this._helpMatrix),this._helpMatrix.invert(),this._helpMatrix.transformPoint(r.transform.x,r.transform.y,this._helpPoint),r.transform.x=this._helpPoint.x,r.transform.y=this._helpPoint.y,r.transform.rotation-=this._helpTransformA.rotation):r.transform.add(this._helpTransformB),r.transform.minus(e.transform),0===q?(m.originalTransform.copyFrom(r.transform),r.transform.identity()):r.transform.minus(m.originalTransform))}}}}};c.prototype._mergeFrameToAnimationTimeline=function(a,
b,f){var d=Math.floor(a*this._armature.frameRate);a=this._animation.frames;if(0===a.length){var g=e.BaseObject.borrowObject(e.AnimationFrameData);g.position=0;if(1<this._animation.frameCount){a.length=this._animation.frameCount+1;var l=e.BaseObject.borrowObject(e.AnimationFrameData);l.position=this._animation.frameCount/this._armature.frameRate;a[0]=g;a[this._animation.frameCount]=l}}var c=a[d];if(!c||0!==d&&a[d-1]!==c.prev)for(l=e.BaseObject.borrowObject(e.AnimationFrameData),l.position=d/this._armature.frameRate,
a[d]=l,d+=1,g=a.length;d<g;++d)c&&a[d]===c&&(a[d]=null);else l=c;if(b)for(d=0,g=b.length;d<g;++d)l.actions.push(b[d]);if(f)for(d=0,g=f.length;d<g;++d)l.events.push(f[d]);f=b=null;d=0;for(g=a.length;d<g;++d)(l=a[d])&&f!==l?(f=l,b&&(f.prev=b,b.next=f,b.duration=f.position-b.position),b=f):a[d]=b;f.duration=this._animation.duration-f.position;f=a[0];b.next=f;f.prev=b};c.parseDragonBonesData=function(a){return e.ObjectDataParser.getInstance().parseDragonBonesData(a)};c.parseTextureAtlasData=function(a,
b){void 0===b&&(b=1);for(var f={},d=a[c.SUB_TEXTURE],g=0,l=d.length;g<l;g++){var k=d[g],h=k[c.NAME],m=new e.Rectangle,n=null;m.x=k[c.X]/b;m.y=k[c.Y]/b;m.width=k[c.WIDTH]/b;m.height=k[c.HEIGHT]/b;c.FRAME_WIDTH in k&&(n=new e.Rectangle,n.x=k[c.FRAME_X]/b,n.y=k[c.FRAME_Y]/b,n.width=k[c.FRAME_WIDTH]/b,n.height=k[c.FRAME_HEIGHT]/b);f[h]={region:m,frame:n,rotated:!1}}return f};return c}();c.DATA_VERSION_2_3="2.3";c.DATA_VERSION_3_0="3.0";c.DATA_VERSION_4_0="4.0";c.DATA_VERSION_4_5="4.5";c.DATA_VERSION_5_0=
"5.0";c.DATA_VERSION=c.DATA_VERSION_5_0;c.DATA_VERSIONS=[c.DATA_VERSION_5_0,c.DATA_VERSION_4_5,c.DATA_VERSION_4_0,c.DATA_VERSION_3_0,c.DATA_VERSION_2_3];c.TEXTURE_ATLAS="TextureAtlas";c.SUB_TEXTURE="SubTexture";c.FORMAT="format";c.IMAGE_PATH="imagePath";c.WIDTH="width";c.HEIGHT="height";c.ROTATED="rotated";c.FRAME_X="frameX";c.FRAME_Y="frameY";c.FRAME_WIDTH="frameWidth";c.FRAME_HEIGHT="frameHeight";c.DRADON_BONES="dragonBones";c.ARMATURE="armature";c.BONE="bone";c.IK="ik";c.SLOT="slot";c.SKIN="skin";
c.DISPLAY="display";c.ANIMATION="animation";c.Z_ORDER="zOrder";c.FFD="ffd";c.FRAME="frame";c.ACTIONS="actions";c.EVENTS="events";c.INTS="ints";c.FLOATS="floats";c.STRINGS="strings";c.PIVOT="pivot";c.TRANSFORM="transform";c.AABB="aabb";c.COLOR="color";c.VERSION="version";c.COMPATIBLE_VERSION="compatibleVersion";c.FRAME_RATE="frameRate";c.TYPE="type";c.SUB_TYPE="subType";c.NAME="name";c.PARENT="parent";c.TARGET="target";c.SHARE="share";c.PATH="path";c.LENGTH="length";c.DISPLAY_INDEX="displayIndex";
c.BLEND_MODE="blendMode";c.INHERIT_TRANSLATION="inheritTranslation";c.INHERIT_ROTATION="inheritRotation";c.INHERIT_SCALE="inheritScale";c.INHERIT_REFLECTION="inheritReflection";c.INHERIT_ANIMATION="inheritAnimation";c.INHERIT_FFD="inheritFFD";c.BEND_POSITIVE="bendPositive";c.CHAIN="chain";c.WEIGHT="weight";c.FADE_IN_TIME="fadeInTime";c.PLAY_TIMES="playTimes";c.SCALE="scale";c.OFFSET="offset";c.POSITION="position";c.DURATION="duration";c.TWEEN_TYPE="tweenType";c.TWEEN_EASING="tweenEasing";c.TWEEN_ROTATE=
"tweenRotate";c.TWEEN_SCALE="tweenScale";c.CURVE="curve";c.EVENT="event";c.SOUND="sound";c.ACTION="action";c.DEFAULT_ACTIONS="defaultActions";c.X="x";c.Y="y";c.SKEW_X="skX";c.SKEW_Y="skY";c.SCALE_X="scX";c.SCALE_Y="scY";c.ALPHA_OFFSET="aO";c.RED_OFFSET="rO";c.GREEN_OFFSET="gO";c.BLUE_OFFSET="bO";c.ALPHA_MULTIPLIER="aM";c.RED_MULTIPLIER="rM";c.GREEN_MULTIPLIER="gM";c.BLUE_MULTIPLIER="bM";c.UVS="uvs";c.VERTICES="vertices";c.TRIANGLES="triangles";c.WEIGHTS="weights";c.SLOT_POSE="slotPose";c.BONE_POSE=
"bonePose";c.COLOR_TRANSFORM="colorTransform";c.TIMELINE="timeline";c.IS_GLOBAL="isGlobal";c.PIVOT_X="pX";c.PIVOT_Y="pY";c.Z="z";c.LOOP="loop";c.AUTO_TWEEN="autoTween";c.HIDE="hide";c.DEFAULT_NAME="__default";e.DataParser=c})(dragonBones||(dragonBones={}));
(function(e){var c=function(c){function a(){return c.call(this)||this}__extends(a,c);a._getBoolean=function(b,a,d){if(a in b){b=b[a];a=typeof b;if("boolean"===a)return b;if("string"===a)switch(b){case "0":case "NaN":case "":case "false":case "null":case "undefined":return!1;default:return!0}else return!!b}return d};a._getNumber=function(b,a,d){return a in b?(b=b[a],null==b||"NaN"===b?d:+b||0):d};a._getString=function(b,a,d){return a in b?String(b[a]):d};a.prototype._parseArmature=function(b,f){var d=
e.BaseObject.borrowObject(e.ArmatureData);d.isRightTransform=a.DATA_VERSIONS.indexOf(this._data.version)>a.DATA_VERSIONS.indexOf(a.DATA_VERSION_4_5);d.name=a._getString(b,a.NAME,null);d.frameRate=a._getNumber(b,a.FRAME_RATE,this._data.frameRate);d.scale=f;0===d.frameRate&&(d.frameRate=24);d.type=a.TYPE in b&&"string"===typeof b[a.TYPE]?a._getArmatureType(b[a.TYPE]):a._getNumber(b,a.TYPE,0);this._armature=d;this._rawBones.length=0;if(a.AABB in b){var g=b[a.AABB];d.aabb.x=a._getNumber(g,a.X,0);d.aabb.y=
a._getNumber(g,a.Y,0);d.aabb.width=a._getNumber(g,a.WIDTH,0);d.aabb.height=a._getNumber(g,a.HEIGHT,0)}if(a.BONE in b)for(var l=b[a.BONE],g=0,c=l.length;g<c;++g){var h=l[g],m=this._parseBone(h);d.addBone(m,a._getString(h,a.PARENT,null));this._rawBones.push(m)}if(a.IK in b)for(l=b[a.IK],g=0,c=l.length;g<c;++g)this._parseIK(l[g]);if(a.SLOT in b)for(l=b[a.SLOT],g=h=0,c=l.length;g<c;++g)d.addSlot(this._parseSlot(l[g],h++));if(a.SKIN in b)for(l=b[a.SKIN],g=0,c=l.length;g<c;++g)d.addSkin(this._parseSkin(l[g]));
if(a.ANIMATION in b)for(l=b[a.ANIMATION],g=0,c=l.length;g<c;++g)d.addAnimation(this._parseAnimation(l[g]));(a.ACTIONS in b||a.DEFAULT_ACTIONS in b)&&this._parseActionData(b,d.actions,null,null);this._isOldData&&this._isGlobalTransform&&this._globalToLocal(d);this._armature=null;this._rawBones.length=0;return d};a.prototype._parseBone=function(b){var f=e.BaseObject.borrowObject(e.BoneData);f.inheritTranslation=a._getBoolean(b,a.INHERIT_TRANSLATION,!0);f.inheritRotation=a._getBoolean(b,a.INHERIT_ROTATION,
!0);f.inheritScale=a._getBoolean(b,a.INHERIT_SCALE,!0);f.inheritReflection=a._getBoolean(b,a.INHERIT_REFLECTION,!0);f.length=a._getNumber(b,a.LENGTH,0)*this._armature.scale;f.name=a._getString(b,a.NAME,null);a.TRANSFORM in b&&this._parseTransform(b[a.TRANSFORM],f.transform);this._isOldData&&(f.inheritScale=!1);return f};a.prototype._parseIK=function(b){var f=this._armature.getBone(a._getString(b,a.BONE in b?a.BONE:a.NAME,null));f&&(f.bendPositive=a._getBoolean(b,a.BEND_POSITIVE,!0),f.chain=a._getNumber(b,
a.CHAIN,0),f.weight=a._getNumber(b,a.WEIGHT,1),f.ik=this._armature.getBone(a._getString(b,a.TARGET,null)),0<f.chain&&f.parent&&!f.parent.ik?(f.parent.ik=f.ik,f.parent.chainIndex=0,f.parent.chain=0,f.chainIndex=1):(f.chain=0,f.chainIndex=0))};a.prototype._parseSlot=function(b,f){var d=e.BaseObject.borrowObject(e.SlotData);d.displayIndex=a._getNumber(b,a.DISPLAY_INDEX,0);d.zOrder=a._getNumber(b,a.Z,f);d.name=a._getString(b,a.NAME,null);d.parent=this._armature.getBone(a._getString(b,a.PARENT,null));
a.COLOR in b||a.COLOR_TRANSFORM in b?(d.color=e.SlotData.generateColor(),this._parseColorTransform(b[a.COLOR]||b[a.COLOR_TRANSFORM],d.color)):d.color=e.SlotData.DEFAULT_COLOR;d.blendMode=a.BLEND_MODE in b&&"string"===typeof b[a.BLEND_MODE]?a._getBlendMode(b[a.BLEND_MODE]):a._getNumber(b,a.BLEND_MODE,0);(a.ACTIONS in b||a.DEFAULT_ACTIONS in b)&&this._parseActionData(b,d.actions,null,null);this._isOldData&&(a.COLOR_TRANSFORM in b?(d.color=e.SlotData.generateColor(),this._parseColorTransform(b[a.COLOR_TRANSFORM],
d.color)):d.color=e.SlotData.DEFAULT_COLOR);return d};a.prototype._parseSkin=function(b){var f=e.BaseObject.borrowObject(e.SkinData);f.name=a._getString(b,a.NAME,a.DEFAULT_NAME);f.name||(f.name=a.DEFAULT_NAME);if(a.SLOT in b){this._skin=f;b=b[a.SLOT];for(var d=0,g=0,l=b.length;g<l;++g)this._isOldData&&this._armature.addSlot(this._parseSlot(b[g],d++)),f.addSlot(this._parseSkinSlotData(b[g]));this._skin=null}return f};a.prototype._parseSkinSlotData=function(b){var f=e.BaseObject.borrowObject(e.SkinSlotData);
f.slot=this._armature.getSlot(a._getString(b,a.NAME,null));if(a.DISPLAY in b){b=b[a.DISPLAY];this._skinSlotData=f;for(var d=0,g=b.length;d<g;++d)f.displays.push(this._parseDisplay(b[d]));this._skinSlotData=null}return f};a.prototype._parseDisplay=function(b){var f=e.BaseObject.borrowObject(e.DisplayData);f.inheritAnimation=a._getBoolean(b,a.INHERIT_ANIMATION,!0);f.name=a._getString(b,a.NAME,null);f.path=a._getString(b,a.PATH,f.name);f.type=a.TYPE in b&&"string"===typeof b[a.TYPE]?a._getDisplayType(b[a.TYPE]):
a._getNumber(b,a.TYPE,0);f.isRelativePivot=!0;if(a.PIVOT in b){var d=b[a.PIVOT];f.pivot.x=a._getNumber(d,a.X,0);f.pivot.y=a._getNumber(d,a.Y,0)}else this._isOldData?(d=b[a.TRANSFORM],f.isRelativePivot=!1,f.pivot.x=a._getNumber(d,a.PIVOT_X,0)*this._armature.scale,f.pivot.y=a._getNumber(d,a.PIVOT_Y,0)*this._armature.scale):(f.pivot.x=.5,f.pivot.y=.5);a.TRANSFORM in b&&this._parseTransform(b[a.TRANSFORM],f.transform);switch(f.type){case 2:f.share=a._getString(b,a.SHARE,null);f.share||(f.inheritAnimation=
a._getBoolean(b,a.INHERIT_FFD,!0),f.mesh=this._parseMesh(b),this._skinSlotData.addMesh(f.mesh));break;case 3:f.boundingBox=this._parseBoundingBox(b)}return f};a.prototype._parseMesh=function(b){var f=e.BaseObject.borrowObject(e.MeshData),d=b[a.VERTICES],g=b[a.UVS],l=b[a.TRIANGLES],c=Math.floor(d.length/2),h=Math.floor(l.length/3),m=Array(this._armature.sortedBones.length);f.skinned=a.WEIGHTS in b&&0<b[a.WEIGHTS].length;f.name=a._getString(b,a.NAME,null);f.uvs.length=2*c;f.vertices.length=2*c;f.vertexIndices.length=
3*h;if(f.skinned&&(f.boneIndices.length=c,f.weights.length=c,f.boneVertices.length=c,a.SLOT_POSE in b&&(c=b[a.SLOT_POSE],f.slotPose.a=c[0],f.slotPose.b=c[1],f.slotPose.c=c[2],f.slotPose.d=c[3],f.slotPose.tx=c[4]*this._armature.scale,f.slotPose.ty=c[5]*this._armature.scale),a.BONE_POSE in b))for(var n=b[a.BONE_POSE],c=0,h=n.length;c<h;c+=7){var q=n[c],p=m[q]=new e.Matrix;p.a=n[c+1];p.b=n[c+2];p.c=n[c+3];p.d=n[c+4];p.tx=n[c+5]*this._armature.scale;p.ty=n[c+6]*this._armature.scale;p.invert()}n=c=0;for(h=
d.length;c<h;c+=2){var q=c+1,r=c/2,p=f.vertices[c]=d[c]*this._armature.scale,E=f.vertices[q]=d[q]*this._armature.scale;f.uvs[c]=g[c];f.uvs[q]=g[q];if(f.skinned){var x=b[a.WEIGHTS],t=x[n],B=f.boneIndices[r]=Array(t),y=f.weights[r]=Array(t),r=f.boneVertices[r]=Array(2*t);f.slotPose.transformPoint(p,E,this._helpPoint);for(var p=f.vertices[c]=this._helpPoint.x,E=f.vertices[q]=this._helpPoint.y,u=0;u<t;++u){var v=n+1+2*u,q=x[v],A=this._rawBones[q],z=f.bones.indexOf(A);0>z&&(z=f.bones.length,f.bones[z]=
A,f.inverseBindPose[z]=m[q]);f.inverseBindPose[z].transformPoint(p,E,this._helpPoint);B[u]=z;y[u]=x[v+1];r[2*u]=this._helpPoint.x;r[2*u+1]=this._helpPoint.y}n+=2*t+1}}c=0;for(h=l.length;c<h;++c)f.vertexIndices[c]=l[c];return f};a.prototype._parseBoundingBox=function(b){var f=e.BaseObject.borrowObject(e.BoundingBoxData);f.type=a.SUB_TYPE in b&&"string"===typeof b[a.SUB_TYPE]?a._getBoundingBoxType(b[a.SUB_TYPE]):a._getNumber(b,a.SUB_TYPE,0);f.color=a._getNumber(b,a.COLOR,0);switch(f.type){case 0:case 1:f.width=
a._getNumber(b,a.WIDTH,0);f.height=a._getNumber(b,a.HEIGHT,0);break;case 2:if(a.VERTICES in b){b=b[a.VERTICES];f.vertices.length=b.length;for(var d=0,g=f.vertices.length;d<g;d+=2){var c=d+1,k=b[d],h=b[c];f.vertices[d]=k;f.vertices[c]=h;0===d?(f.x=k,f.y=h,f.width=k,f.height=h):(k<f.x?f.x=k:k>f.width&&(f.width=k),h<f.y?f.y=h:h>f.height&&(f.height=h))}}}return f};a.prototype._parseAnimation=function(b){var f=e.BaseObject.borrowObject(e.AnimationData);f.frameCount=Math.max(a._getNumber(b,a.DURATION,1),
1);f.playTimes=a._getNumber(b,a.PLAY_TIMES,1);f.duration=f.frameCount/this._armature.frameRate;f.fadeInTime=a._getNumber(b,a.FADE_IN_TIME,0);f.name=a._getString(b,a.NAME,a.DEFAULT_NAME);f.name||(f.name=a.DEFAULT_NAME);this._animation=f;this._parseTimeline(b,f,this._parseAnimationFrame);a.Z_ORDER in b&&(f.zOrderTimeline=e.BaseObject.borrowObject(e.ZOrderTimelineData),this._parseTimeline(b[a.Z_ORDER],f.zOrderTimeline,this._parseZOrderFrame));if(a.BONE in b)for(var d=b[a.BONE],g=0,c=d.length;g<c;++g)f.addBoneTimeline(this._parseBoneTimeline(d[g]));
if(a.SLOT in b)for(d=b[a.SLOT],g=0,c=d.length;g<c;++g)f.addSlotTimeline(this._parseSlotTimeline(d[g]));if(a.FFD in b)for(d=b[a.FFD],g=0,c=d.length;g<c;++g)f.addFFDTimeline(this._parseFFDTimeline(d[g]));if(this._isOldData){if(this._isAutoTween=a._getBoolean(b,a.AUTO_TWEEN,!0),this._animationTweenEasing=a._getNumber(b,a.TWEEN_EASING,0)||0,f.playTimes=a._getNumber(b,a.LOOP,1),a.TIMELINE in b)for(b=b[a.TIMELINE],g=0,c=b.length;g<c;++g)d=b[g],f.addBoneTimeline(this._parseBoneTimeline(d)),f.addSlotTimeline(this._parseSlotTimeline(d))}else this._isAutoTween=
!1,this._animationTweenEasing=0;for(g in this._armature.bones)c=this._armature.bones[g],f.getBoneTimeline(c.name)||(b=e.BaseObject.borrowObject(e.BoneTimelineData),d=e.BaseObject.borrowObject(e.BoneFrameData),b.bone=c,b.frames[0]=d,f.addBoneTimeline(b));for(g in this._armature.slots)c=this._armature.slots[g],f.getSlotTimeline(c.name)||(b=e.BaseObject.borrowObject(e.SlotTimelineData),d=e.BaseObject.borrowObject(e.SlotFrameData),b.slot=c,d.displayIndex=c.displayIndex,c.color===e.SlotData.DEFAULT_COLOR?
d.color=e.SlotFrameData.DEFAULT_COLOR:(d.color=e.SlotFrameData.generateColor(),d.color.copyFrom(c.color)),b.frames[0]=d,f.addSlotTimeline(b),this._isOldData&&(d.displayIndex=-1));this._animation=null;return f};a.prototype._parseBoneTimeline=function(b){var f=e.BaseObject.borrowObject(e.BoneTimelineData);f.bone=this._armature.getBone(a._getString(b,a.NAME,null));this._parseTimeline(b,f,this._parseBoneFrame);for(var d=f.originalTransform,g=null,c=0,k=f.frames.length;c<k;++c){var h=f.frames[c];g?g!==
h&&h.transform.minus(d):(d.copyFrom(h.transform),h.transform.identity(),0===d.scaleX&&(d.scaleX=.001),0===d.scaleY&&(d.scaleY=.001));g=h}this._isOldData&&(a.PIVOT_X in b||a.PIVOT_Y in b)?(this._timelinePivot.x=a._getNumber(b,a.PIVOT_X,0)*this._armature.scale,this._timelinePivot.y=a._getNumber(b,a.PIVOT_Y,0)*this._armature.scale):this._timelinePivot.clear();return f};a.prototype._parseSlotTimeline=function(b){var f=e.BaseObject.borrowObject(e.SlotTimelineData);f.slot=this._armature.getSlot(a._getString(b,
a.NAME,null));this._parseTimeline(b,f,this._parseSlotFrame);return f};a.prototype._parseFFDTimeline=function(b){var f=e.BaseObject.borrowObject(e.FFDTimelineData);f.skin=this._armature.getSkin(a._getString(b,a.SKIN,null));f.slot=f.skin.getSlot(a._getString(b,a.SLOT,null));for(var d=a._getString(b,a.NAME,null),g=0,c=f.slot.displays.length;g<c;++g){var k=f.slot.displays[g];if(k.mesh&&k.name===d){f.display=k;break}}this._parseTimeline(b,f,this._parseFFDFrame);return f};a.prototype._parseAnimationFrame=
function(b,f,d){var g=e.BaseObject.borrowObject(e.AnimationFrameData);this._parseFrame(b,g,f,d);(a.ACTION in b||a.ACTIONS in b)&&this._parseActionData(b,g.actions,null,null);(a.EVENTS in b||a.EVENT in b||a.SOUND in b)&&this._parseEventData(b,g.events,null,null);return g};a.prototype._parseZOrderFrame=function(b,f,d){var g=e.BaseObject.borrowObject(e.ZOrderFrameData);this._parseFrame(b,g,f,d);if((f=b[a.Z_ORDER])&&0<f.length){d=this._armature.sortedSlots.length;b=Array(d-f.length/2);g.zOrder.length=
d;for(var c=0;c<d;++c)g.zOrder[c]=-1;for(var k=0,h=c=0,m=f.length;h<m;h+=2){for(var n=f[h],q=f[h+1];k!==n;)b[c++]=k++;g.zOrder[k+q]=k++}for(;k<d;)b[c++]=k++;for(f=d;f--;)-1===g.zOrder[f]&&(g.zOrder[f]=b[--c])}return g};a.prototype._parseBoneFrame=function(b,f,d){var g=e.BaseObject.borrowObject(e.BoneFrameData);g.tweenRotate=a._getNumber(b,a.TWEEN_ROTATE,0);g.tweenScale=a._getBoolean(b,a.TWEEN_SCALE,!0);this._parseTweenFrame(b,g,f,d);a.TRANSFORM in b&&(f=b[a.TRANSFORM],this._parseTransform(f,g.transform),
this._isOldData&&(this._helpPoint.x=this._timelinePivot.x+a._getNumber(f,a.PIVOT_X,0)*this._armature.scale,this._helpPoint.y=this._timelinePivot.y+a._getNumber(f,a.PIVOT_Y,0)*this._armature.scale,g.transform.toMatrix(this._helpMatrix),this._helpMatrix.transformPoint(this._helpPoint.x,this._helpPoint.y,this._helpPoint,!0),g.transform.x+=this._helpPoint.x,g.transform.y+=this._helpPoint.y));f=this._timeline.bone;d=[];var c=[];if(a.ACTION in b||a.ACTIONS in b){var k=this._armature.getSlot(f.name);this._parseActionData(b,
d,f,k)}(a.EVENT in b||a.SOUND in b)&&this._parseEventData(b,c,f,null);(0<d.length||0<c.length)&&this._mergeFrameToAnimationTimeline(g.position,d,c);return g};a.prototype._parseSlotFrame=function(b,f,d){var g=e.BaseObject.borrowObject(e.SlotFrameData);g.displayIndex=a._getNumber(b,a.DISPLAY_INDEX,0);this._parseTweenFrame(b,g,f,d);a.COLOR in b||a.COLOR_TRANSFORM in b?(g.color=e.SlotFrameData.generateColor(),this._parseColorTransform(b[a.COLOR]||b[a.COLOR_TRANSFORM],g.color)):g.color=e.SlotFrameData.DEFAULT_COLOR;
if(this._isOldData)a._getBoolean(b,a.HIDE,!1)&&(g.displayIndex=-1);else if(a.ACTION in b||a.ACTIONS in b)f=this._timeline.slot,d=[],this._parseActionData(b,d,f.parent,f),this._mergeFrameToAnimationTimeline(g.position,d,null);return g};a.prototype._parseFFDFrame=function(b,f,d){var g=this._timeline.display.mesh,c=e.BaseObject.borrowObject(e.ExtensionFrameData);this._parseTweenFrame(b,c,f,d);f=b[a.VERTICES];b=a._getNumber(b,a.OFFSET,0);for(var k,h=0,m=g.vertices.length;h<m;h+=2)if(!f||h<b||h-b>=f.length?
k=d=0:(d=f[h-b]*this._armature.scale,k=f[h+1-b]*this._armature.scale),g.skinned){g.slotPose.transformPoint(d,k,this._helpPoint,!0);d=this._helpPoint.x;k=this._helpPoint.y;for(var n=g.boneIndices[h/2],q=0,p=n.length;q<p;++q)g.inverseBindPose[n[q]].transformPoint(d,k,this._helpPoint,!0),c.tweens.push(this._helpPoint.x,this._helpPoint.y)}else c.tweens.push(d,k);return c};a.prototype._parseTweenFrame=function(b,f,d,g){this._parseFrame(b,f,d,g);0<f.duration?(f.tweenEasing=a.TWEEN_EASING in b?a._getNumber(b,
a.TWEEN_EASING,e.DragonBones.NO_TWEEN):this._isOldData?this._isAutoTween?this._animationTweenEasing:e.DragonBones.NO_TWEEN:e.DragonBones.NO_TWEEN,this._isOldData&&1===this._animation.scale&&1===this._timeline.scale&&2>f.duration*this._armature.frameRate&&(f.tweenEasing=e.DragonBones.NO_TWEEN),0<g&&a.CURVE in b&&(f.curve=Array(2*g-1),e.TweenFrameData.samplingEasingCurve(b[a.CURVE],f.curve))):(f.tweenEasing=e.DragonBones.NO_TWEEN,f.curve=null)};a.prototype._parseFrame=function(b,a,d,g){a.position=d/
this._armature.frameRate;a.duration=g/this._armature.frameRate};a.prototype._parseTimeline=function(b,f,d){f.scale=a._getNumber(b,a.SCALE,1);f.offset=a._getNumber(b,a.OFFSET,0);this._timeline=f;if(a.FRAME in b)if(b=b[a.FRAME],1===b.length)f.frames.length=1,f.frames[0]=d.call(this,b[0],0,a._getNumber(b[0],a.DURATION,1));else if(1<b.length){f.frames.length=this._animation.frameCount+1;for(var g=0,c=0,k=null,h=null,m=0,n=0,q=f.frames.length;m<q;++m){if(g+c<=m&&n<b.length){var p=b[n++],g=m,c=a._getNumber(p,
a.DURATION,1),k=d.call(this,p,g,c);h&&(h.next=k,k.prev=h,this._isOldData&&h instanceof e.TweenFrameData&&-1===a._getNumber(p,a.DISPLAY_INDEX,0)&&(h.tweenEasing=e.DragonBones.NO_TWEEN));h=k}f.frames[m]=k}k.duration=this._animation.duration-k.position;k=f.frames[0];h.next=k;k.prev=h;this._isOldData&&h instanceof e.TweenFrameData&&-1===a._getNumber(b[0],a.DISPLAY_INDEX,0)&&(h.tweenEasing=e.DragonBones.NO_TWEEN)}this._timeline=null};a.prototype._parseActionData=function(b,f,d,g){b=b[a.ACTION]||b[a.ACTIONS]||
b[a.DEFAULT_ACTIONS];if("string"===typeof b){var c=e.BaseObject.borrowObject(e.ActionData);c.type=0;c.bone=d;c.slot=g;c.animationConfig=e.BaseObject.borrowObject(e.AnimationConfig);c.animationConfig.animationName=b;f.push(c)}else if(b instanceof Array)for(var k=0,h=b.length;k<h;++k){var m=b[k],n=m instanceof Array,c=e.BaseObject.borrowObject(e.ActionData),q=n?m[1]:a._getString(m,"gotoAndPlay",null);n?(m=m[0],c.type="string"===typeof m?a._getActionType(m):m):c.type=0;switch(c.type){case 0:c.animationConfig=
e.BaseObject.borrowObject(e.AnimationConfig),c.animationConfig.animationName=q}c.bone=d;c.slot=g;f.push(c)}};a.prototype._parseEventData=function(b,f,d,g){if(a.SOUND in b){var c=e.BaseObject.borrowObject(e.EventData);c.type=11;c.name=a._getString(b,a.SOUND,null);c.bone=d;c.slot=g;f.push(c)}a.EVENT in b&&(c=e.BaseObject.borrowObject(e.EventData),c.type=10,c.name=a._getString(b,a.EVENT,null),c.bone=d,c.slot=g,f.push(c));if(a.EVENTS in b)for(b=b[a.EVENTS],d=0,g=b.length;d<g;++d){var k=b[d],h=a._getString(k,
a.BONE,null),m=a._getString(k,a.SLOT,null),c=e.BaseObject.borrowObject(e.EventData);c.type=10;c.name=a._getString(k,a.NAME,null);c.bone=this._armature.getBone(h);c.slot=this._armature.getSlot(m);if(a.INTS in k){c.data||(c.data=e.BaseObject.borrowObject(e.CustomData));for(var h=k[a.INTS],m=0,n=h.length;m<n;++m)c.data.ints.push(h[m])}if(a.FLOATS in k)for(c.data||(c.data=e.BaseObject.borrowObject(e.CustomData)),h=k[a.FLOATS],m=0,n=h.length;m<n;++m)c.data.floats.push(h[m]);if(a.STRINGS in k)for(c.data||
(c.data=e.BaseObject.borrowObject(e.CustomData)),k=k[a.STRINGS],h=0,m=k.length;h<m;++h)c.data.strings.push(k[h]);f.push(c)}};a.prototype._parseTransform=function(b,f){f.x=a._getNumber(b,a.X,0)*this._armature.scale;f.y=a._getNumber(b,a.Y,0)*this._armature.scale;f.skewX=a._getNumber(b,a.SKEW_X,0)*e.DragonBones.ANGLE_TO_RADIAN;f.skewY=a._getNumber(b,a.SKEW_Y,0)*e.DragonBones.ANGLE_TO_RADIAN;f.scaleX=a._getNumber(b,a.SCALE_X,1);f.scaleY=a._getNumber(b,a.SCALE_Y,1)};a.prototype._parseColorTransform=function(b,
f){f.alphaMultiplier=.01*a._getNumber(b,a.ALPHA_MULTIPLIER,100);f.redMultiplier=.01*a._getNumber(b,a.RED_MULTIPLIER,100);f.greenMultiplier=.01*a._getNumber(b,a.GREEN_MULTIPLIER,100);f.blueMultiplier=.01*a._getNumber(b,a.BLUE_MULTIPLIER,100);f.alphaOffset=a._getNumber(b,a.ALPHA_OFFSET,0);f.redOffset=a._getNumber(b,a.RED_OFFSET,0);f.greenOffset=a._getNumber(b,a.GREEN_OFFSET,0);f.blueOffset=a._getNumber(b,a.BLUE_OFFSET,0)};a.prototype.parseDragonBonesData=function(b,f){void 0===f&&(f=1);if(b){var d=
a._getString(b,a.VERSION,null),g=a._getString(b,a.COMPATIBLE_VERSION,null);this._isGlobalTransform=(this._isOldData=d===a.DATA_VERSION_2_3||d===a.DATA_VERSION_3_0)?a._getBoolean(b,a.IS_GLOBAL,!0):!1;if(0<=a.DATA_VERSIONS.indexOf(d)||0<=a.DATA_VERSIONS.indexOf(g)){g=e.BaseObject.borrowObject(e.DragonBonesData);g.version=d;g.name=a._getString(b,a.NAME,null);g.frameRate=a._getNumber(b,a.FRAME_RATE,24);0===g.frameRate&&(g.frameRate=24);if(a.ARMATURE in b){this._data=g;for(var d=b[a.ARMATURE],c=0,k=d.length;c<
k;++c)g.addArmature(this._parseArmature(d[c],f));this._data=null}return g}throw Error("Nonsupport data version.");}throw Error(e.DragonBones.ARGUMENT_ERROR);};a.prototype.parseTextureAtlasData=function(b,f,d){void 0===d&&(d=0);if(b){if(f.name=a._getString(b,a.NAME,null),f.imagePath=a._getString(b,a.IMAGE_PATH,null),f.width=a._getNumber(b,a.WIDTH,0),f.height=a._getNumber(b,a.HEIGHT,0),0<d?f.scale=d:d=f.scale=a._getNumber(b,a.SCALE,f.scale),d=1/d,a.SUB_TEXTURE in b){b=b[a.SUB_TEXTURE];for(var g=0,c=
b.length;g<c;++g){var k=b[g],h=f.generateTexture();h.name=a._getString(k,a.NAME,null);h.rotated=a._getBoolean(k,a.ROTATED,!1);h.region.x=a._getNumber(k,a.X,0)*d;h.region.y=a._getNumber(k,a.Y,0)*d;h.region.width=a._getNumber(k,a.WIDTH,0)*d;h.region.height=a._getNumber(k,a.HEIGHT,0)*d;var m=a._getNumber(k,a.FRAME_WIDTH,-1),n=a._getNumber(k,a.FRAME_HEIGHT,-1);0<m&&0<n&&(h.frame=e.TextureData.generateRectangle(),h.frame.x=a._getNumber(k,a.FRAME_X,0)*d,h.frame.y=a._getNumber(k,a.FRAME_Y,0)*d,h.frame.width=
m*d,h.frame.height=n*d);f.addTexture(h)}}}else throw Error(e.DragonBones.ARGUMENT_ERROR);};a.getInstance=function(){a._instance||(a._instance=new a);return a._instance};return a}(e.DataParser);c._instance=null;e.ObjectDataParser=c})(dragonBones||(dragonBones={}));
(function(e){var c=function(c){function a(){var b=c.call(this)||this;b.globalTransformMatrix=new e.Matrix;b.global=new e.Transform;b.offset=new e.Transform;return b}__extends(a,c);a.prototype._onClear=function(){this.name=null;this.global.identity();this.offset.identity();this.globalTransformMatrix.identity();this._parent=this._armature=this.userData=this.origin=null;this._globalDirty=!1};a.prototype._setArmature=function(b){this._armature=b};a.prototype._setParent=function(b){this._parent=b};a.prototype.updateGlobalTransform=
function(){this._globalDirty&&(this._globalDirty=!1,this.global.fromMatrix(this.globalTransformMatrix))};Object.defineProperty(a.prototype,"armature",{get:function(){return this._armature},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0});return a}(e.BaseObject);c._helpPoint=new e.Point;c._helpTransform=new e.Transform;c._helpMatrix=new e.Matrix;e.TransformObject=c})(dragonBones||(dragonBones={}));
(function(e){var c=function(c){function a(){var b=c.call(this)||this;b._animationPose=new e.Transform;b._bones=[];b._slots=[];return b}__extends(a,c);a.toString=function(){return"[class dragonBones.Bone]"};a.prototype._onClear=function(){c.prototype._onClear.call(this);this.ikBendPositive=!1;this._ikChainIndex=this._ikChain=this.ikWeight=0;this._ik=null;this._blendDirty=this._childrenTransformDirty=this._transformDirty=!1;this._visible=!0;this._cachedFrameIndex=-1;this._blendLayer=0;this._blendLeftWeight=
1;this._blendTotalWeight=0;this._animationPose.identity();this._bones.length=0;this._slots.length=0;this._cachedFrameIndices=this._boneData=null};a.prototype._updateGlobalTransformMatrix=function(b){var a=this._armature.flipX,d=this._armature.flipY===e.DragonBones.yDown,g;this.global.x=this.origin.x+this.offset.x+this._animationPose.x;this.global.y=this.origin.y+this.offset.y+this._animationPose.y;this.global.skewX=this.origin.skewX+this.offset.skewX+this._animationPose.skewX;this.global.skewY=this.origin.skewY+
this.offset.skewY+this._animationPose.skewY;this.global.scaleX=this.origin.scaleX*this.offset.scaleX*this._animationPose.scaleX;this.global.scaleY=this.origin.scaleY*this.offset.scaleY*this._animationPose.scaleY;if(this._parent){var c=this._parent.globalTransformMatrix;if(this._boneData.inheritScale)this._boneData.inheritRotation||(this._parent.updateGlobalTransform(),g=this._parent.global.skewY,this.global.skewX-=g,this.global.skewY-=g),this.global.toMatrix(this.globalTransformMatrix),this.globalTransformMatrix.concat(c),
this._boneData.inheritTranslation?(this.global.x=this.globalTransformMatrix.tx,this.global.y=this.globalTransformMatrix.ty):(this.globalTransformMatrix.tx=this.global.x,this.globalTransformMatrix.ty=this.global.y),b?this.global.fromMatrix(this.globalTransformMatrix):this._globalDirty=!0;else{this._boneData.inheritTranslation?(b=this.global.x,g=this.global.y,this.global.x=c.a*b+c.c*g+c.tx,this.global.y=c.d*g+c.b*b+c.ty):(a&&(this.global.x=-this.global.x),d&&(this.global.y=-this.global.y));if(this._boneData.inheritRotation)this._parent.updateGlobalTransform(),
g=this._parent.global.skewY,this._armature._armatureData.isRightTransform&&0>c.a*c.d-c.b*c.c&&(g-=2*this.global.skewY,0>this._parent.global.scaleX&&(g+=Math.PI),a!=d||this._boneData.inheritReflection)&&(this.global.skewX+=Math.PI),this.global.skewX+=g,this.global.skewY+=g;else if(a||d)a&&d?g=Math.PI:(g=2*-this.global.skewY,a&&(g+=Math.PI),this.global.skewX+=Math.PI),this.global.skewX+=g,this.global.skewY+=g;this.global.toMatrix(this.globalTransformMatrix)}}else{if(a||d)a&&(this.global.x=-this.global.x),
d&&(this.global.y=-this.global.y),a&&d?g=Math.PI:(g=2*-this.global.skewY,a&&(g+=Math.PI),this.global.skewX+=Math.PI),this.global.skewX+=g,this.global.skewY+=g;this.global.toMatrix(this.globalTransformMatrix)}this._ik&&this._ikChainIndex===this._ikChain&&0<this.ikWeight&&(this._boneData.inheritTranslation&&0<this._ikChain&&this._parent?this._computeIKB():this._computeIKA())};a.prototype._computeIKA=function(){this.updateGlobalTransform();var b=this._ik.global,b=Math.atan2(b.y-this.global.y,b.x-this.global.x);
0>this.global.scaleX&&(b+=Math.PI);b=(b-this.global.skewY)*this.ikWeight;this.global.skewX+=b;this.global.skewY+=b;this.global.toMatrix(this.globalTransformMatrix)};a.prototype._computeIKB=function(){this._parent.updateGlobalTransform();this.updateGlobalTransform();var b=this._boneData.length,a=this._parent.global,d=this._ik.global,g=this.globalTransformMatrix.a*b,b=this.globalTransformMatrix.b*b,c=g*g+b*b,e=Math.sqrt(c),h=this.global.x-a.x,m=this.global.y-a.y,n=h*h+m*m,g=Math.sqrt(n),b=Math.atan2(m,
h),h=d.x-a.x,m=d.y-a.y,q=h*h+m*m,p=Math.sqrt(q);e+g<=p||p+e<=g||p+g<=e?(h=Math.atan2(d.y-a.y,d.x-a.x),e+g<=p||g<e&&(h+=Math.PI)):(e=(n-c+q)/(2*q),n=Math.sqrt(n-e*e*q)/p,p=a.x+h*e,e=a.y+m*e,m=-m*n,h*=n,n=!1,this._parent._parent&&(n=this._parent._parent.globalTransformMatrix,n=0>n.a*n.d-n.b*n.c),n!==this.ikBendPositive?(this.global.x=p-m,this.global.y=e-h):(this.global.x=p+m,this.global.y=e+h),h=Math.atan2(this.global.y-a.y,this.global.x-a.x));h=(h-b)*this.ikWeight;a.skewX+=h;a.skewY+=h;a.toMatrix(this._parent.globalTransformMatrix);
this._parent._childrenTransformDirty=!0;0<=this._parent._cachedFrameIndex&&this._armature._armatureData.setCacheFrame(this._parent.globalTransformMatrix,a,this._parent._cachedFrameIndex);b+=h;this.global.x=a.x+Math.cos(b)*g;this.global.y=a.y+Math.sin(b)*g;a=Math.atan2(d.y-this.global.y,d.x-this.global.x);0>this.global.scaleX&&(a+=Math.PI);h=(a-this.global.skewY)*this.ikWeight;this.global.skewX+=h;this.global.skewY+=h;this.global.toMatrix(this.globalTransformMatrix)};a.prototype._init=function(b){this._boneData||
(this._boneData=b,this.name=this._boneData.name,this.origin=this._boneData.transform)};a.prototype._setArmature=function(b){if(this._armature!==b){var a=this._ik=null,d=null;this._armature&&(a=this.getSlots(),d=this.getBones(),this._armature._removeBoneFromBoneList(this));(this._armature=b)&&this._armature._addBoneToBoneList(this);if(a){b=0;for(var g=a.length;b<g;++b){var c=a[b];c.parent===this&&c._setArmature(this._armature)}}if(d)for(b=0,g=d.length;b<g;++b)a=d[b],a.parent===this&&a._setArmature(this._armature)}};
a.prototype._setIK=function(b,a,d){if(b){if(a===d){var f=this._parent;a&&f?a=1:(d=a=0,f=this);if(f===b||f.contains(b))b=null,d=a=0;else for(var c=b;c.ik&&c.ikChain;){if(f.contains(c.ik)){b=null;d=a=0;break}c=c.parent}}}else d=a=0;this._ik=b;this._ikChain=a;this._ikChainIndex=d;this._armature&&(this._armature._bonesDirty=!0)};a.prototype._update=function(b){this._blendDirty=!1;if(0<=b&&this._cachedFrameIndices){var a=this._cachedFrameIndices[b];0<=a&&this._cachedFrameIndex===a?this._transformDirty=
!1:0<=a?(this._transformDirty=!0,this._cachedFrameIndex=a):this._transformDirty||this._parent&&this._parent._childrenTransformDirty||this._ik&&0<this.ikWeight&&this._ik._childrenTransformDirty?(this._transformDirty=!0,this._cachedFrameIndex=-1):0<=this._cachedFrameIndex?(this._transformDirty=!1,this._cachedFrameIndices[b]=this._cachedFrameIndex):(this._transformDirty=!0,this._cachedFrameIndex=-1)}else if(this._transformDirty||this._parent&&this._parent._childrenTransformDirty||this._ik&&0<this.ikWeight&&
this._ik._childrenTransformDirty)b=-1,this._transformDirty=!0,this._cachedFrameIndex=-1;this._transformDirty?(this._transformDirty=!1,this._childrenTransformDirty=!0,0>this._cachedFrameIndex?(a=0<=b,this._updateGlobalTransformMatrix(a),a&&(this._cachedFrameIndex=this._cachedFrameIndices[b]=this._armature._armatureData.setCacheFrame(this.globalTransformMatrix,this.global))):this._armature._armatureData.getCacheFrame(this.globalTransformMatrix,this.global,this._cachedFrameIndex)):this._childrenTransformDirty&&
(this._childrenTransformDirty=!1)};a.prototype.invalidUpdate=function(){this._transformDirty=!0};a.prototype.contains=function(b){if(b){if(b===this)return!1;for(;b!==this&&b;)b=b.parent;return b===this}return!1};a.prototype.getBones=function(){this._bones.length=0;for(var b=this._armature.getBones(),a=0,d=b.length;a<d;++a){var g=b[a];g.parent===this&&this._bones.push(g)}return this._bones};a.prototype.getSlots=function(){this._slots.length=0;for(var b=this._armature.getSlots(),a=0,d=b.length;a<d;++a){var g=
b[a];g.parent===this&&this._slots.push(g)}return this._slots};Object.defineProperty(a.prototype,"boneData",{get:function(){return this._boneData},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"visible",{get:function(){return this._visible},set:function(b){if(this._visible!==b){this._visible=b;b=this._armature.getSlots();for(var a=0,d=b.length;a<d;++a){var g=b[a];g._parent===this&&g._updateVisible()}}},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"length",{get:function(){return this.boneData.length},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"slot",{get:function(){for(var b=this._armature.getSlots(),a=0,d=b.length;a<d;++a){var g=b[a];if(g.parent===this)return g}return null},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"ikChain",{get:function(){return this._ikChain},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"ikChainIndex",{get:function(){return this._ikChainIndex},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"ik",{get:function(){return this._ik},enumerable:!0,configurable:!0});return a}(e.TransformObject);e.Bone=c})(dragonBones||(dragonBones={}));
(function(e){var c=function(c){function a(){var b=c.call(this)||this;b._localMatrix=new e.Matrix;b._colorTransform=new e.ColorTransform;b._ffdVertices=[];b._displayList=[];b._textureDatas=[];b._replacedDisplayDatas=[];b._meshBones=[];return b}__extends(a,c);a.prototype._onClear=function(){c.prototype._onClear.call(this);for(var b=[],a=0,d=this._displayList.length;a<d;++a){var g=this._displayList[a];g!==this._rawDisplay&&g!==this._meshDisplay&&0>b.indexOf(g)&&b.push(g)}a=0;for(d=b.length;a<d;++a)g=
b[a],g instanceof e.Armature?g.dispose():this._disposeDisplay(g);this._meshDisplay&&this._meshDisplay!==this._rawDisplay&&this._disposeDisplay(this._meshDisplay);this._rawDisplay&&this._disposeDisplay(this._rawDisplay);this.displayController=null;this._transformDirty=this._meshDirty=this._colorDirty=this._blendModeDirty=this._zOrderDirty=this._displayDirty=!1;this._blendMode=0;this._displayIndex=-1;this._zOrder=0;this._cachedFrameIndex=-1;this._pivotY=this._pivotX=0;this._localMatrix.identity();this._colorTransform.identity();
this._ffdVertices.length=0;this._displayList.length=0;this._textureDatas.length=0;this._replacedDisplayDatas.length=0;this._meshBones.length=0;this._cachedFrameIndices=this._childArmature=this._display=this._meshDisplay=this._rawDisplay=this._boundingBoxData=this._meshData=this._textureData=this._replacedDisplayData=this._displayData=this._skinSlotData=null};a.prototype._isMeshBonesUpdate=function(){for(var b=0,a=this._meshBones.length;b<a;++b)if(this._meshBones[b]._childrenTransformDirty)return!0;
return!1};a.prototype._updateDisplayData=function(){var b=this._displayData,f=this._replacedDisplayData,d=this._textureData,g=this._meshData,c=0<=this._displayIndex&&this._displayIndex<this._displayList.length?this._displayList[this._displayIndex]:null;this._displayData=0<=this._displayIndex&&this._displayIndex<this._skinSlotData.displays.length?this._skinSlotData.displays[this._displayIndex]:null;this._replacedDisplayData=0<=this._displayIndex&&this._displayIndex<this._replacedDisplayDatas.length?
this._replacedDisplayDatas[this._displayIndex]:null;if(this._displayData!==b||this._replacedDisplayData!==f||this._display!=c){b=this._replacedDisplayData?this._replacedDisplayData:this._displayData;if(!b||c!==this._rawDisplay&&c!==this._meshDisplay)this._meshData=this._textureData=null,this._pivotY=this._pivotX=0,this._meshBones.length=0,this._ffdVertices.length=0;else{this._textureData=this._replacedDisplayData?this._replacedDisplayData.texture:this._displayIndex<this._textureDatas.length&&this._textureDatas[this._displayIndex]?
this._textureDatas[this._displayIndex]:this._displayData.texture;if(this._meshData=c===this._meshDisplay?this._replacedDisplayData&&this._replacedDisplayData.mesh?this._replacedDisplayData.mesh:this._displayData.mesh:null)this._pivotY=this._pivotX=0;else if(this._textureData){c=this._armature.armatureData.scale;this._pivotX=b.pivot.x;this._pivotY=b.pivot.y;if(b.isRelativePivot){var f=this._textureData.frame?this._textureData.frame:this._textureData.region,e=f.width*c,h=f.height*c;this._textureData.rotated&&
(e=f.height,h=f.width);this._pivotX*=e;this._pivotY*=h}this._textureData.frame&&(this._pivotX+=this._textureData.frame.x*c,this._pivotY+=this._textureData.frame.y*c)}else this._pivotY=this._pivotX=0;!this._displayData||b===this._displayData||this._meshData&&this._meshData===this._displayData.mesh||(this._displayData.transform.toMatrix(a._helpMatrix),a._helpMatrix.invert(),a._helpMatrix.transformPoint(0,0,a._helpPoint),this._pivotX-=a._helpPoint.x,this._pivotY-=a._helpPoint.y,b.transform.toMatrix(a._helpMatrix),
a._helpMatrix.invert(),a._helpMatrix.transformPoint(0,0,a._helpPoint),this._pivotX+=a._helpPoint.x,this._pivotY+=a._helpPoint.y);if(this._meshData!==g)if(this._meshData&&this._displayData&&this._meshData===this._displayData.mesh){if(this._meshData.skinned){this._meshBones.length=this._meshData.bones.length;d=0;for(g=this._meshBones.length;d<g;++d)this._meshBones[d]=this._armature.getBone(this._meshData.bones[d].name);d=b=0;for(g=this._meshData.boneIndices.length;d<g;++d)b+=this._meshData.boneIndices[d].length;
this._ffdVertices.length=2*b}else this._meshBones.length=0,this._ffdVertices.length=this._meshData.vertices.length;d=0;for(g=this._ffdVertices.length;d<g;++d)this._ffdVertices[d]=0;this._meshDirty=!0}else this._meshBones.length=0,this._ffdVertices.length=0;else this._textureData!==d&&(this._meshDirty=!0)}this._transformDirty=this._displayDirty=!0;this._displayData?this.origin=this._displayData.transform:this._replacedDisplayData&&(this.origin=this._replacedDisplayData.transform)}this._boundingBoxData=
this._replacedDisplayData?this._replacedDisplayData.boundingBox:this._displayData?this._displayData.boundingBox:null};a.prototype._updateDisplay=function(){var b=this._display||this._rawDisplay,a=this._childArmature;0<=this._displayIndex&&this._displayIndex<this._displayList.length?(this._display=this._displayList[this._displayIndex],this._display instanceof e.Armature?(this._childArmature=this._display,this._display=this._childArmature.display):this._childArmature=null):this._childArmature=this._display=
null;var d=this._display?this._display:this._rawDisplay;d!==b&&(this._onUpdateDisplay(),this._replaceDisplay(b),this._colorDirty=this._blendModeDirty=!0);d!==this._rawDisplay&&d!==this._meshDisplay||this._updateFrame();if(this._childArmature!==a&&(a&&(a._parent=null,a.clock=null,a.inheritAnimation&&a.animation.reset()),this._childArmature&&(this._childArmature._parent=this,this._childArmature.clock=this._armature.clock,this._childArmature.inheritAnimation&&(0===this._childArmature.cacheFrameRate&&
(b=this._armature.cacheFrameRate,0!==b&&(this._childArmature.cacheFrameRate=b)),b=0<this._skinSlotData.slot.actions.length?this._skinSlotData.slot.actions:this._childArmature.armatureData.actions,0<b.length))))for(a=0,d=b.length;a<d;++a)this._childArmature._bufferAction(b[a])};a.prototype._updateGlobalTransformMatrix=function(b){this.globalTransformMatrix.copyFrom(this._localMatrix);this.globalTransformMatrix.concat(this._parent.globalTransformMatrix);b?this.global.fromMatrix(this.globalTransformMatrix):
this._globalDirty=!0};a.prototype._init=function(b,a,d){this._skinSlotData||(this._skinSlotData=b,b=this._skinSlotData.slot,this.name=b.name,this._zOrder=b.zOrder,this._blendMode=b.blendMode,this._colorTransform.copyFrom(b.color),this._rawDisplay=a,this._meshDisplay=d,this._colorDirty=this._blendModeDirty=!0)};a.prototype._setArmature=function(b){this._armature!==b&&(this._armature&&this._armature._removeSlotFromSlotList(this),this._armature=b,this._onUpdateDisplay(),this._armature?(this._armature._addSlotToSlotList(this),
this._addDisplay()):this._removeDisplay())};a.prototype._update=function(b){this._displayDirty&&(this._displayDirty=!1,this._updateDisplay(),this._transformDirty&&(this.origin?this.global.copyFrom(this.origin).add(this.offset).toMatrix(this._localMatrix):this.global.copyFrom(this.offset).toMatrix(this._localMatrix)));this._zOrderDirty&&(this._zOrderDirty=!1,this._updateZOrder());if(0<=b&&this._cachedFrameIndices){var a=this._cachedFrameIndices[b];0<=a&&this._cachedFrameIndex===a?this._transformDirty=
!1:0<=a?(this._transformDirty=!0,this._cachedFrameIndex=a):this._transformDirty||this._parent._childrenTransformDirty?(this._transformDirty=!0,this._cachedFrameIndex=-1):0<=this._cachedFrameIndex?(this._transformDirty=!1,this._cachedFrameIndices[b]=this._cachedFrameIndex):(this._transformDirty=!0,this._cachedFrameIndex=-1)}else if(this._transformDirty||this._parent._childrenTransformDirty)b=-1,this._transformDirty=!0,this._cachedFrameIndex=-1;if(this._display){this._blendModeDirty&&(this._blendModeDirty=
!1,this._updateBlendMode());this._colorDirty&&(this._colorDirty=!1,this._updateColor());if(this._meshData&&this._displayData&&this._meshData===this._displayData.mesh){if(this._meshDirty||this._meshData.skinned&&this._isMeshBonesUpdate())this._meshDirty=!1,this._updateMesh();if(this._meshData.skinned){this._transformDirty&&(this._transformDirty=!1,this._updateTransform(!0));return}}this._transformDirty&&(this._transformDirty=!1,0>this._cachedFrameIndex?(a=0<=b,this._updateGlobalTransformMatrix(a),
a&&(this._cachedFrameIndex=this._cachedFrameIndices[b]=this._armature._armatureData.setCacheFrame(this.globalTransformMatrix,this.global))):this._armature._armatureData.getCacheFrame(this.globalTransformMatrix,this.global,this._cachedFrameIndex),this._updateTransform(!1))}};a.prototype._updateTransformAndMatrix=function(){this._transformDirty&&(this._transformDirty=!1,this._updateGlobalTransformMatrix(!1))};a.prototype._setDisplayList=function(b){if(b&&0<b.length){this._displayList.length!==b.length&&
(this._displayList.length=b.length);for(var a=0,d=b.length;a<d;++a){var c=b[a];c&&c!==this._rawDisplay&&c!==this._meshDisplay&&!(c instanceof e.Armature)&&0>this._displayList.indexOf(c)&&this._initDisplay(c);this._displayList[a]=c}}else 0<this._displayList.length&&(this._displayList.length=0);this._displayDirty=0<=this._displayIndex&&this._displayIndex<this._displayList.length?this._display!==this._displayList[this._displayIndex]:null!=this._display;this._updateDisplayData();return this._displayDirty};
a.prototype._setDisplayIndex=function(b){if(this._displayIndex===b)return!1;this._displayIndex=b;this._displayDirty=!0;this._updateDisplayData();return this._displayDirty};a.prototype._setZorder=function(b){this._zOrder=b;return this._zOrderDirty=!0};a.prototype._setColor=function(b){this._colorTransform.copyFrom(b);return this._colorDirty=!0};a.prototype.containsPoint=function(b,f){if(!this._boundingBoxData)return!1;this._updateTransformAndMatrix();a._helpMatrix.copyFrom(this.globalTransformMatrix);
a._helpMatrix.invert();a._helpMatrix.transformPoint(b,f,a._helpPoint);return this._boundingBoxData.containsPoint(a._helpPoint.x,a._helpPoint.y)};a.prototype.intersectsSegment=function(b,f,d,c,e,k,h){void 0===e&&(e=null);void 0===k&&(k=null);void 0===h&&(h=null);if(!this._boundingBoxData)return 0;this._updateTransformAndMatrix();a._helpMatrix.copyFrom(this.globalTransformMatrix);a._helpMatrix.invert();a._helpMatrix.transformPoint(b,f,a._helpPoint);b=a._helpPoint.x;f=a._helpPoint.y;a._helpMatrix.transformPoint(d,
c,a._helpPoint);d=a._helpPoint.x;c=a._helpPoint.y;b=this._boundingBoxData.intersectsSegment(b,f,d,c,e,k,h);0<b&&(1===b||2===b?e?(this.globalTransformMatrix.transformPoint(e.x,e.y,e),k&&(k.x=e.x,k.y=e.y)):k&&this.globalTransformMatrix.transformPoint(k.x,k.y,k):(e&&this.globalTransformMatrix.transformPoint(e.x,e.y,e),k&&this.globalTransformMatrix.transformPoint(k.x,k.y,k)),h&&(this.globalTransformMatrix.transformPoint(Math.cos(h.x),Math.sin(h.x),a._helpPoint,!0),h.x=Math.atan2(a._helpPoint.y,a._helpPoint.x),
this.globalTransformMatrix.transformPoint(Math.cos(h.y),Math.sin(h.y),a._helpPoint,!0),h.y=Math.atan2(a._helpPoint.y,a._helpPoint.x)));return b};a.prototype.invalidUpdate=function(){this._transformDirty=this._displayDirty=!0};Object.defineProperty(a.prototype,"skinSlotData",{get:function(){return this._skinSlotData},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"boundingBoxData",{get:function(){return this._boundingBoxData},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"rawDisplay",{get:function(){return this._rawDisplay},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"meshDisplay",{get:function(){return this._meshDisplay},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"displayIndex",{get:function(){return this._displayIndex},set:function(b){this._setDisplayIndex(b)&&this._update(-1)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"displayList",{get:function(){return this._displayList.concat()},set:function(b){var a=
this._displayList.concat(),d=[];this._setDisplayList(b)&&this._update(-1);b=0;for(var c=a.length;b<c;++b){var l=a[b];l&&l!==this._rawDisplay&&l!==this._meshDisplay&&0>this._displayList.indexOf(l)&&0>d.indexOf(l)&&d.push(l)}b=0;for(c=d.length;b<c;++b)l=d[b],l instanceof e.Armature?l.dispose():this._disposeDisplay(l)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"display",{get:function(){return this._display},set:function(b){if(this._display!==b){var a=this._displayList.length;
0>this._displayIndex&&0===a&&(this._displayIndex=0);if(!(0>this._displayIndex)){var d=this.displayList;a<=this._displayIndex&&(d.length=this._displayIndex+1);d[this._displayIndex]=b;this.displayList=d}}},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"childArmature",{get:function(){return this._childArmature},set:function(b){this._childArmature!==b&&(this.display=b)},enumerable:!0,configurable:!0});a.prototype.getDisplay=function(){return this._display};a.prototype.setDisplay=function(b){this.display=
b};return a}(e.TransformObject);e.Slot=c})(dragonBones||(dragonBones={}));
(function(e){var c=function(c){function a(){var b=c.call(this)||this;b._bones=[];b._slots=[];b._actions=[];b._events=[];b.enableCache=!1;return b}__extends(a,c);a.toString=function(){return"[class dragonBones.Armature]"};a._onSortSlots=function(b,a){return b._zOrder>a._zOrder?1:-1};a.prototype._onClear=function(){for(var b=0,a=this._bones.length;b<a;++b)this._bones[b].returnToPool();b=0;for(a=this._slots.length;b<a;++b)this._slots[b].returnToPool();b=0;for(a=this._events.length;b<a;++b)this._events[b].returnToPool();
this._clock&&this._clock.remove(this);this._proxy&&this._proxy._onClear();this._replaceTextureAtlasData&&this._replaceTextureAtlasData.returnToPool();this._animation&&this._animation.returnToPool();this.inheritAnimation=!0;this.debugDraw=!1;this.userData=null;this._flipY=this._flipX=this._zOrderDirty=this._slotsDirty=this._bonesDirty=this._lockDispose=this._delayDispose=this._debugDraw=!1;this._bones.length=0;this._slots.length=0;this._actions.length=0;this._events.length=0;this._replacedTexture=
this._replaceTextureAtlasData=this._clock=this._parent=this._eventManager=this._display=this._proxy=this._animation=this._skinData=this._armatureData=null};a.prototype._sortBones=function(){var b=this._bones.length;if(!(0>=b)){var a=this._bones.concat(),d=0,c=0;for(this._bones.length=0;c<b;){var e=a[d++];d>=b&&(d=0);0<=this._bones.indexOf(e)||e.parent&&0>this._bones.indexOf(e.parent)||e.ik&&0>this._bones.indexOf(e.ik)||(e.ik&&0<e.ikChain&&e.ikChainIndex===e.ikChain?this._bones.splice(this._bones.indexOf(e.parent)+
1,0,e):this._bones.push(e),c++)}}};a.prototype._sortSlots=function(){this._slots.sort(a._onSortSlots)};a.prototype._doAction=function(b){switch(b.type){case 0:this._animation.playConfig(b.animationConfig)}};a.prototype._init=function(b,a,d,c,l){this._armatureData||(this._armatureData=b,this._skinData=a,this._animation=e.BaseObject.borrowObject(e.Animation),this._proxy=d,this._display=c,this._eventManager=l,this._animation._init(this),this._animation.animations=this._armatureData.animations)};a.prototype._addBoneToBoneList=
function(b){0>this._bones.indexOf(b)&&(this._bonesDirty=!0,this._bones.push(b),this._animation._timelineStateDirty=!0)};a.prototype._removeBoneFromBoneList=function(b){b=this._bones.indexOf(b);0<=b&&(this._bones.splice(b,1),this._animation._timelineStateDirty=!0)};a.prototype._addSlotToSlotList=function(b){0>this._slots.indexOf(b)&&(this._slotsDirty=!0,this._slots.push(b),this._animation._timelineStateDirty=!0)};a.prototype._removeSlotFromSlotList=function(b){b=this._slots.indexOf(b);0<=b&&(this._slots.splice(b,
1),this._animation._timelineStateDirty=!0)};a.prototype._sortZOrder=function(b){var a=this._armatureData.sortedSlots,d=!b||1>b.length;if(this._zOrderDirty||!d){for(var c=0,e=a.length;c<e;++c){var k=a[d?c:b[c]];k&&(k=this.getSlot(k.name))&&k._setZorder(c)}this._slotsDirty=!0;this._zOrderDirty=!d}};a.prototype._bufferAction=function(b){this._actions.push(b)};a.prototype._bufferEvent=function(b,a){b.type=a;b.armature=this;this._events.push(b)};a.prototype.dispose=function(){this._armatureData&&(this._lockDispose?
this._delayDispose=!0:this.returnToPool())};a.prototype.advanceTime=function(b){if(!this._armatureData)throw Error("The armature has been disposed.");if(!this._armatureData.parent)throw Error("The armature data has been disposed.");var a=this._animation._cacheFrameIndex;this._animation._advanceTime(b);var d=this._animation._cacheFrameIndex;this._bonesDirty&&(this._bonesDirty=!1,this._sortBones());this._slotsDirty&&(this._slotsDirty=!1,this._sortSlots());if(0>d||d!==a){a=0;for(b=this._bones.length;a<
b;++a)this._bones[a]._update(d);a=0;for(b=this._slots.length;a<b;++a)this._slots[a]._update(d)}if((a=this.debugDraw||e.DragonBones.debugDraw)||this._debugDraw)this._debugDraw=a,this._proxy._debugDraw(this._debugDraw);if(!this._lockDispose){this._lockDispose=!0;b=this._events.length;if(0<b){for(a=0;a<b;++a)d=this._events[a],this._proxy._dispatchEvent(d.type,d),d.type===e.EventObject.SOUND_EVENT&&this._eventManager._dispatchEvent(d.type,d),d.returnToPool();this._events.length=0}b=this._actions.length;
if(0<b){for(a=0;a<b;++a)if(d=this._actions[a],d.slot){var c=this.getSlot(d.slot.name);c&&(c=c.childArmature)&&c._doAction(d)}else if(d.bone)for(var l=0,k=this._slots.length;l<k;++l)(c=this._slots[l].childArmature)&&c._doAction(d);else this._doAction(d);this._actions.length=0}this._lockDispose=!1}this._delayDispose&&this.returnToPool()};a.prototype.invalidUpdate=function(b,a){void 0===b&&(b=null);void 0===a&&(a=!1);if(b){var d=this.getBone(b);if(d&&(d.invalidUpdate(),a))for(var f=0,c=this._slots.length;f<
c;++f){var e=this._slots[f];e.parent===d&&e.invalidUpdate()}}else{f=0;for(c=this._bones.length;f<c;++f)this._bones[f].invalidUpdate();if(a)for(f=0,c=this._slots.length;f<c;++f)this._slots[f].invalidUpdate()}};a.prototype.containsPoint=function(b,a){for(var f=0,c=this._slots.length;f<c;++f){var e=this._slots[f];if(e.containsPoint(b,a))return e}return null};a.prototype.intersectsSegment=function(b,a,d,c,e,k,h){void 0===e&&(e=null);void 0===k&&(k=null);void 0===h&&(h=null);for(var f=b===d,g=0,l=0,m=
0,r=0,E=0,x=0,t=0,B=0,y=null,u=null,v=0,A=this._slots.length;v<A;++v){var z=this._slots[v];if(0<z.intersectsSegment(b,a,d,c,e,k,h))if(e||k){if(e){var F=f?e.y-a:e.x-b;0>F&&(F=-F);if(!y||F<g)g=F,m=e.x,r=e.y,y=z,h&&(t=h.x)}k&&(F=k.x-b,0>F&&(F=-F),!u||F>l)&&(l=F,E=k.x,x=k.y,u=z,h&&(B=h.y))}else{y=z;break}}y&&e&&(e.x=m,e.y=r,h&&(h.x=t));u&&k&&(k.x=E,k.y=x,h&&(h.y=B));return y};a.prototype.getBone=function(b){for(var a=0,d=this._bones.length;a<d;++a){var c=this._bones[a];if(c.name===b)return c}return null};
a.prototype.getBoneByDisplay=function(b){return(b=this.getSlotByDisplay(b))?b.parent:null};a.prototype.getSlot=function(b){for(var a=0,d=this._slots.length;a<d;++a){var c=this._slots[a];if(c.name===b)return c}return null};a.prototype.getSlotByDisplay=function(b){if(b)for(var a=0,d=this._slots.length;a<d;++a){var c=this._slots[a];if(c.display===b)return c}return null};a.prototype.addBone=function(b,a){void 0===a&&(a=null);if(b)b._setArmature(this),b._setParent(a?this.getBone(a):null);else throw Error(e.DragonBones.ARGUMENT_ERROR);
};a.prototype.removeBone=function(b){if(b&&b.armature===this)b._setParent(null),b._setArmature(null);else throw Error(e.DragonBones.ARGUMENT_ERROR);};a.prototype.addSlot=function(b,a){var d=this.getBone(a);if(d)b._setArmature(this),b._setParent(d);else throw Error(e.DragonBones.ARGUMENT_ERROR);};a.prototype.removeSlot=function(b){if(b&&b.armature===this)b._setParent(null),b._setArmature(null);else throw Error(e.DragonBones.ARGUMENT_ERROR);};a.prototype.replaceTexture=function(b){this.replacedTexture=
b};a.prototype.getBones=function(){return this._bones};a.prototype.getSlots=function(){return this._slots};Object.defineProperty(a.prototype,"name",{get:function(){return this._armatureData?this._armatureData.name:null},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"armatureData",{get:function(){return this._armatureData},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"animation",{get:function(){return this._animation},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"eventDispatcher",{get:function(){return this._proxy},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"display",{get:function(){return this._display},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"flipX",{get:function(){return this._flipX},set:function(b){this._flipX!==b&&(this._flipX=b)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"flipY",{get:function(){return this._flipY},set:function(b){this._flipY!==b&&(this._flipY=b)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"cacheFrameRate",{get:function(){return this._armatureData.cacheFrameRate},set:function(b){if(this._armatureData.cacheFrameRate!==b){this._armatureData.cacheFrames(b);for(var a=0,d=this._slots.length;a<d;++a){var c=this._slots[a].childArmature;c&&(c.cacheFrameRate=b)}}},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"clock",
{get:function(){return this._clock},set:function(b){if(this._clock!==b){var a=this._clock;this._clock=b;a&&a.remove(this);this._clock&&this._clock.add(this);b=0;for(a=this._slots.length;b<a;++b){var d=this._slots[b].childArmature;d&&(d.clock=this._clock)}}},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"replacedTexture",{get:function(){return this._replacedTexture},set:function(b){if(this._replacedTexture!==b){this._replaceTextureAtlasData&&(this._replaceTextureAtlasData.returnToPool(),
this._replaceTextureAtlasData=null);this._replacedTexture=b;b=0;for(var a=this._slots.length;b<a;++b){var d=this._slots[b];d.invalidUpdate();d._update(-1)}}},enumerable:!0,configurable:!0});a.prototype.hasEventListener=function(b){return this._proxy.hasEvent(b)};a.prototype.addEventListener=function(b,a,d){this._proxy.addEvent(b,a,d)};a.prototype.removeEventListener=function(b,a,d){this._proxy.removeEvent(b,a,d)};a.prototype.enableAnimationCache=function(b){this.cacheFrameRate=b};a.prototype.getDisplay=
function(){return this._display};return a}(e.BaseObject);e.Armature=c})(dragonBones||(dragonBones={}));
(function(e){var c=function(c){function a(){var b=c.call(this)||this;b._animationNames=[];b._animations={};b._animationStates=[];return b}__extends(a,c);a._sortAnimationState=function(b,a){return b.layer>a.layer?-1:1};a.toString=function(){return"[class dragonBones.Animation]"};a.prototype._onClear=function(){for(var b=0,a=this._animationStates.length;b<a;++b)this._animationStates[b].returnToPool();this._animationConfig&&this._animationConfig.returnToPool();for(var d in this._animations)delete this._animations[d];
this.timeScale=1;this._timelineStateDirty=this._animationStateDirty=this._isPlaying=!1;this._cacheFrameIndex=-1;this._animationNames.length=0;this._animationStates.length=0;this._animationConfig=this._lastAnimationState=this._armature=null};a.prototype._fadeOut=function(b){var a=0,d=this._animationStates.length,c;switch(b.fadeOutMode){case 1:for(;a<d;++a)c=this._animationStates[a],c.layer===b.layer&&c.fadeOut(b.fadeOutTime,b.pauseFadeOut);break;case 2:for(;a<d;++a)c=this._animationStates[a],c.group===
b.group&&c.fadeOut(b.fadeOutTime,b.pauseFadeOut);break;case 3:for(;a<d;++a)c=this._animationStates[a],c.layer===b.layer&&c.group===b.group&&c.fadeOut(b.fadeOutTime,b.pauseFadeOut);break;case 4:for(;a<d;++a)c=this._animationStates[a],c.fadeOut(b.fadeOutTime,b.pauseFadeOut)}};a.prototype._init=function(b){this._armature||(this._armature=b,this._animationConfig=e.BaseObject.borrowObject(e.AnimationConfig))};a.prototype._advanceTime=function(b){if(this._isPlaying){0>b&&(b=-b);this._armature.inheritAnimation&&
this._armature._parent&&(b*=this._armature._parent._armature.animation.timeScale);1!==this.timeScale&&(b*=this.timeScale);var a=this._animationStates.length;if(1===a){var d=this._animationStates[0];if(0<d._fadeState&&0<d._subFadeState)d.returnToPool(),this._animationStates.length=0,this._animationStateDirty=!0,this._lastAnimationState=null;else{var a=d.animationData,c=a.cacheFrameRate;if(this._animationStateDirty&&0<c){this._animationStateDirty=!1;for(var e=this._armature.getBones(),k=0,h=e.length;k<
h;++k){var m=e[k];m._cachedFrameIndices=a.getBoneCachedFrameIndices(m.name)}e=this._armature.getSlots();k=0;for(h=e.length;k<h;++k)m=e[k],m._cachedFrameIndices=a.getSlotCachedFrameIndices(m.name)}this._timelineStateDirty&&d._updateTimelineStates();d._advanceTime(b,c)}}else{if(1<a)for(c=k=0;k<a;++k)d=this._animationStates[k],0<d._fadeState&&0<d._subFadeState?(c++,d.returnToPool(),this._animationStateDirty=!0,this._lastAnimationState===d&&(this._lastAnimationState=null)):(0<c&&(this._animationStates[k-
c]=d),this._timelineStateDirty&&d._updateTimelineStates(),d._advanceTime(b,0)),k===a-1&&0<c&&(this._animationStates.length-=c,!this._lastAnimationState&&0<this._animationStates.length&&(this._lastAnimationState=this._animationStates[this._animationStates.length-1]));this._cacheFrameIndex=-1}this._timelineStateDirty=!1}};a.prototype.reset=function(){for(var b=0,a=this._animationStates.length;b<a;++b)this._animationStates[b].returnToPool();this._timelineStateDirty=this._animationStateDirty=this._isPlaying=
!1;this._cacheFrameIndex=-1;this._animationConfig.clear();this._animationStates.length=0;this._lastAnimationState=null};a.prototype.stop=function(b){void 0===b&&(b=null);b?(b=this.getState(b))&&b.stop():this._isPlaying=!1};a.prototype.playConfig=function(b){if(!b)throw Error(e.DragonBones.ARGUMENT_ERROR);var f=b.animationName?b.animationName:b.name,d=this._animations[f];if(!d)return console.warn("Non-existent animation.\n","DragonBones name: "+this._armature.armatureData.parent.name,"Armature name: "+
this._armature.name,"Animation name: "+f),null;this._isPlaying=!0;if(0>b.fadeInTime||b.fadeInTime!==b.fadeInTime)b.fadeInTime=this._lastAnimationState?d.fadeInTime:0;if(0>b.fadeOutTime||b.fadeOutTime!==b.fadeOutTime)b.fadeOutTime=b.fadeInTime;if(-100>=b.timeScale||b.timeScale!==b.timeScale)b.timeScale=1/d.scale;1<d.frameCount?(b.position!==b.position?b.position=0:0>b.position?(b.position%=d.duration,b.position=d.duration-b.position):b.position===d.duration?b.position-=1E-6:b.position>d.duration&&
(b.position%=d.duration),0<b.duration&&b.position+b.duration>d.duration&&(b.duration=d.duration-b.position),0>b.playTimes&&(b.playTimes=d.playTimes)):(b.playTimes=1,b.position=0,0<b.duration&&(b.duration=0));var c=!1;0===b.duration&&(b.duration=-1,c=!0);this._fadeOut(b);this._lastAnimationState=e.BaseObject.borrowObject(e.AnimationState);this._lastAnimationState._init(this._armature,d,b);this._animationStates.push(this._lastAnimationState);this._animationStateDirty=!0;this._cacheFrameIndex=-1;1<this._animationStates.length&&
this._animationStates.sort(a._sortAnimationState);for(var d=this._armature.getSlots(),l=0,k=d.length;l<k;++l){var h=d[l].childArmature;h&&h.inheritAnimation&&h.animation.hasAnimation(f)&&!h.animation.getState(f)&&h.animation.fadeIn(f)}0>=b.fadeInTime&&this._armature.advanceTime(0);c&&this._lastAnimationState.stop();return this._lastAnimationState};a.prototype.fadeIn=function(b,a,d,c,e,k){void 0===a&&(a=-1);void 0===d&&(d=-1);void 0===c&&(c=0);void 0===e&&(e=null);void 0===k&&(k=3);this._animationConfig.clear();
this._animationConfig.fadeOutMode=k;this._animationConfig.playTimes=d;this._animationConfig.layer=c;this._animationConfig.fadeInTime=a;this._animationConfig.animationName=b;this._animationConfig.group=e;return this.playConfig(this._animationConfig)};a.prototype.play=function(b,a){void 0===b&&(b=null);void 0===a&&(a=-1);this._animationConfig.clear();this._animationConfig.playTimes=a;this._animationConfig.fadeInTime=0;if(this._animationConfig.animationName=b)this.playConfig(this._animationConfig);else if(this._lastAnimationState)this._isPlaying&&
(this._lastAnimationState.isPlaying||this._lastAnimationState.isCompleted)?(this._animationConfig.animationName=this._lastAnimationState.name,this.playConfig(this._animationConfig)):(this._isPlaying=!0,this._lastAnimationState.play());else{var d=this._armature.armatureData.defaultAnimation;d&&(this._animationConfig.animationName=d.name,this.playConfig(this._animationConfig))}return this._lastAnimationState};a.prototype.gotoAndPlayByTime=function(b,a,d){void 0===a&&(a=0);void 0===d&&(d=-1);this._animationConfig.clear();
this._animationConfig.playTimes=d;this._animationConfig.position=a;this._animationConfig.fadeInTime=0;this._animationConfig.animationName=b;return this.playConfig(this._animationConfig)};a.prototype.gotoAndPlayByFrame=function(b,a,d){void 0===a&&(a=0);void 0===d&&(d=-1);this._animationConfig.clear();this._animationConfig.playTimes=d;this._animationConfig.fadeInTime=0;this._animationConfig.animationName=b;if(b=this._animations[b])this._animationConfig.position=b.duration*a/b.frameCount;return this.playConfig(this._animationConfig)};
a.prototype.gotoAndPlayByProgress=function(b,a,d){void 0===a&&(a=0);void 0===d&&(d=-1);this._animationConfig.clear();this._animationConfig.playTimes=d;this._animationConfig.fadeInTime=0;this._animationConfig.animationName=b;if(b=this._animations[b])this._animationConfig.position=b.duration*(0<a?a:0);return this.playConfig(this._animationConfig)};a.prototype.gotoAndStopByTime=function(b,a){void 0===a&&(a=0);var d=this.gotoAndPlayByTime(b,a,1);d&&d.stop();return d};a.prototype.gotoAndStopByFrame=function(b,
a){void 0===a&&(a=0);var d=this.gotoAndPlayByFrame(b,a,1);d&&d.stop();return d};a.prototype.gotoAndStopByProgress=function(b,a){void 0===a&&(a=0);var d=this.gotoAndPlayByProgress(b,a,1);d&&d.stop();return d};a.prototype.getState=function(b){for(var a=0,d=this._animationStates.length;a<d;++a){var c=this._animationStates[a];if(c.name===b)return c}return null};a.prototype.hasAnimation=function(b){return null!=this._animations[b]};Object.defineProperty(a.prototype,"isPlaying",{get:function(){return 1<
this._animationStates.length?this._isPlaying&&!this.isCompleted:this._lastAnimationState?this._isPlaying&&this._lastAnimationState.isPlaying:this._isPlaying},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"isCompleted",{get:function(){if(this._lastAnimationState){if(!this._lastAnimationState.isCompleted)return!1;for(var b=0,a=this._animationStates.length;b<a;++b)if(!this._animationStates[b].isCompleted)return!1;return!0}return!1},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"lastAnimationName",{get:function(){return this._lastAnimationState?this._lastAnimationState.name:null},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"lastAnimationState",{get:function(){return this._lastAnimationState},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"animationConfig",{get:function(){this._animationConfig.clear();return this._animationConfig},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"animationNames",{get:function(){return this._animationNames},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"animations",{get:function(){return this._animations},set:function(b){if(this._animations!==b){this._animationNames.length=0;for(var a in this._animations)delete this._animations[a];if(b)for(a in b)this._animations[a]=b[a],this._animationNames.push(a)}},enumerable:!0,configurable:!0});a.prototype.gotoAndPlay=function(b,a,d,c,e,k,h,m,n){void 0===a&&(a=-1);void 0===d&&(d=-1);void 0===c&&(c=-1);void 0===e&&(e=0);void 0===k&&(k=null);void 0===
h&&(h=3);this._animationConfig.clear();this._animationConfig.fadeOutMode=h;this._animationConfig.playTimes=c;this._animationConfig.layer=e;this._animationConfig.fadeInTime=a;this._animationConfig.animationName=b;this._animationConfig.group=k;(b=this._animations[b])&&0<d&&(this._animationConfig.timeScale=b.duration/d);return this.playConfig(this._animationConfig)};a.prototype.gotoAndStop=function(b,a){void 0===a&&(a=0);return this.gotoAndStopByTime(b,a)};Object.defineProperty(a.prototype,"animationList",
{get:function(){return this._animationNames},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"animationDataList",{get:function(){for(var b=[],a=0,d=this._animationNames.length;a<d;++a)b.push(this._animations[this._animationNames[a]]);return b},enumerable:!0,configurable:!0});return a}(e.BaseObject);c.None=0;c.SameLayer=1;c.SameGroup=2;c.SameLayerAndGroup=3;c.All=4;e.Animation=c})(dragonBones||(dragonBones={}));
(function(e){var c=function(c){function a(){var b=c.call(this)||this;b._boneMask=[];b._animationNames=[];b._boneTimelines=[];b._slotTimelines=[];b._ffdTimelines=[];b.autoTween=!1;return b}__extends(a,c);a.toString=function(){return"[class dragonBones.AnimationState]"};a.prototype._onClear=function(){for(var b=0,a=this._boneTimelines.length;b<a;++b)this._boneTimelines[b].returnToPool();b=0;for(a=this._slotTimelines.length;b<a;++b)this._slotTimelines[b].returnToPool();b=0;for(a=this._ffdTimelines.length;b<
a;++b)this._ffdTimelines[b].returnToPool();this._timeline&&this._timeline.returnToPool();this._zOrderTimeline&&this._zOrderTimeline.returnToPool();this.displayControl=!0;this.actionEnabled=this.additiveBlending=!1;this.weight=this.timeScale=this.playTimes=1;this.autoFadeOutTime=-1;this._playheadState=this.fadeTotalTime=0;this._subFadeState=this._fadeState=-1;this._weightResult=this._fadeProgress=this._time=this._fadeTime=this._duration=this._position=this._layer=0;this._group=this._name=null;this._boneMask.length=
0;this._animationNames.length=0;this._boneTimelines.length=0;this._slotTimelines.length=0;this._ffdTimelines.length=0;this._zOrderTimeline=this._timeline=this._armature=this._animationData=null};a.prototype._advanceFadeTime=function(b){var a=0<this._fadeState;if(0>this._subFadeState){this._subFadeState=0;var d=a?e.EventObject.FADE_OUT:e.EventObject.FADE_IN;if(this._armature.eventDispatcher.hasEvent(d)){var c=e.BaseObject.borrowObject(e.EventObject);c.animationState=this;this._armature._bufferEvent(c,
d)}}0>b&&(b=-b);this._fadeTime+=b;this._fadeTime>=this.fadeTotalTime?(this._subFadeState=1,this._fadeProgress=a?0:1):this._fadeProgress=0<this._fadeTime?a?1-this._fadeTime/this.fadeTotalTime:this._fadeTime/this.fadeTotalTime:a?1:0;0<this._subFadeState&&(a||(this._playheadState|=1,this._fadeState=0),d=a?e.EventObject.FADE_OUT_COMPLETE:e.EventObject.FADE_IN_COMPLETE,this._armature.eventDispatcher.hasEvent(d)&&(c=e.BaseObject.borrowObject(e.EventObject),c.animationState=this,this._armature._bufferEvent(c,
d)))};a.prototype._init=function(b,a,d){this._armature=b;this._animationData=a;this._name=d.name?d.name:d.animationName;this.actionEnabled=d.actionEnabled;this.additiveBlending=d.additiveBlending;this.displayControl=d.displayControl;this.playTimes=d.playTimes;this.timeScale=d.timeScale;this.fadeTotalTime=d.fadeInTime;this.autoFadeOutTime=d.autoFadeOutTime;this.weight=d.weight;this._playheadState=d.pauseFadeIn?2:3;this._subFadeState=this._fadeState=-1;this._layer=d.layer;this._group=d.group;0>d.duration?
(this._position=0,this._duration=this._animationData.duration,this._time=0!==d.position?0<=this.timeScale?d.position:d.position-this._duration:0):(this._position=d.position,this._duration=d.duration,this._time=0);0>this.timeScale&&0===this._time&&(this._time=-1E-6);0>=this.fadeTotalTime&&(this._fadeProgress=.999999);if(0<d.boneMask.length)for(this._boneMask.length=d.boneMask.length,b=0,a=this._boneMask.length;b<a;++b)this._boneMask[b]=d.boneMask[b];if(0<d.animationNames.length)for(this._animationNames.length=
d.animationNames.length,b=0,a=this._animationNames.length;b<a;++b)this._animationNames[b]=d.animationNames[b];this._timeline=e.BaseObject.borrowObject(e.AnimationTimelineState);this._timeline._init(this._armature,this,this._animationData);this._animationData.zOrderTimeline&&(this._zOrderTimeline=e.BaseObject.borrowObject(e.ZOrderTimelineState),this._zOrderTimeline._init(this._armature,this,this._animationData.zOrderTimeline));this._updateTimelineStates()};a.prototype._updateTimelineStates=function(){for(var b=
{},a={},d={},c=0,l=this._boneTimelines.length;c<l;++c){var k=this._boneTimelines[c];b[k.bone.name]=k}for(var h=this._armature.getBones(),c=0,l=h.length;c<l;++c){var m=h[c],k=m.name;if(this.containsBoneMask(k)){var n=this._animationData.getBoneTimeline(k);n&&(b[k]?delete b[k]:(k=e.BaseObject.borrowObject(e.BoneTimelineState),k.bone=m,k._init(this._armature,this,n),this._boneTimelines.push(k)))}}for(var q in b)k=b[q],k.bone.invalidUpdate(),this._boneTimelines.splice(this._boneTimelines.indexOf(k),1),
k.returnToPool();c=0;for(l=this._slotTimelines.length;c<l;++c)n=this._slotTimelines[c],a[n.slot.name]=n;c=0;for(l=this._ffdTimelines.length;c<l;++c)n=this._ffdTimelines[c],b=n._timelineData.display,d[b.inheritAnimation?b.mesh.name:b.name]=n;b=this._armature.getSlots();c=0;for(l=b.length;c<l;++c){h=b[c];k=h.name;m=!1;if(this.containsBoneMask(h.parent.name)){var p=this._animationData.getSlotTimeline(k);p&&(a[k]?delete a[k]:(n=e.BaseObject.borrowObject(e.SlotTimelineState),n.slot=h,n._init(this._armature,
this,p),this._slotTimelines.push(n)));if(k=this._animationData.getFFDTimeline(this._armature._skinData.name,k))for(q in k)d[q]?delete d[q]:(n=e.BaseObject.borrowObject(e.FFDTimelineState),n.slot=h,n._init(this._armature,this,k[q]),this._ffdTimelines.push(n));else m=!0}else m=!0;if(m){m=0;for(n=h._ffdVertices.length;m<n;++m)h._ffdVertices[m]=0;h._meshDirty=!0}}for(q in a)n=a[q],this._slotTimelines.splice(this._slotTimelines.indexOf(n),1),n.returnToPool();for(q in d)n=d[q],this._ffdTimelines.splice(this._ffdTimelines.indexOf(n),
1),n.returnToPool()};a.prototype._advanceTime=function(b,a){0===this._fadeState&&0===this._subFadeState||this._advanceFadeTime(b);1!==this.timeScale&&(b*=this.timeScale);0!==b&&3===this._playheadState&&(this._time+=b);if(0!==this.weight){var d=0===this._fadeState&&0<a,c=!0,f=!0,e=this._time;this._weightResult=this.weight*this._fadeProgress;this._timeline.update(e);if(d){var h=2*a;this._timeline._currentTime=Math.floor(this._timeline._currentTime*h)/h}this._zOrderTimeline&&this._zOrderTimeline.update(e);
d&&(d=Math.floor(this._timeline._currentTime*a),this._armature.animation._cacheFrameIndex===d?f=c=!1:(this._armature.animation._cacheFrameIndex=d,this._animationData.cachedFrames[d]?f=!1:this._animationData.cachedFrames[d]=!0));if(c){if(f)for(c=0,f=this._boneTimelines.length;c<f;++c)this._boneTimelines[c].update(e);c=0;for(f=this._slotTimelines.length;c<f;++c)this._slotTimelines[c].update(e);c=0;for(f=this._ffdTimelines.length;c<f;++c)this._ffdTimelines[c].update(e)}}0===this._fadeState&&(0<this._subFadeState&&
(this._subFadeState=0),0<this._timeline._playState&&0<=this.autoFadeOutTime&&this.fadeOut(this.autoFadeOutTime))};a.prototype._isDisabled=function(b){return!this.displayControl||b.displayController&&b.displayController!==this._name&&b.displayController!==this._group?!0:!1};a.prototype.play=function(){this._playheadState=3};a.prototype.stop=function(){this._playheadState&=1};a.prototype.fadeOut=function(b,a){void 0===a&&(a=!0);if(0>b||b!==b)b=0;a&&(this._playheadState&=2);if(0<this._fadeState){if(b>
b-this._fadeTime)return}else{this._fadeState=1;this._subFadeState=-1;if(0>=b||0>=this._fadeProgress)this._fadeProgress=1E-6;for(var d=0,c=this._boneTimelines.length;d<c;++d)this._boneTimelines[d].fadeOut();d=0;for(c=this._slotTimelines.length;d<c;++d)this._slotTimelines[d].fadeOut();d=0;for(c=this._ffdTimelines.length;d<c;++d)this._ffdTimelines[d].fadeOut()}this.displayControl=!1;this.fadeTotalTime=1E-6<this._fadeProgress?b/this._fadeProgress:0;this._fadeTime=this.fadeTotalTime*(1-this._fadeProgress)};
a.prototype.containsBoneMask=function(b){return 0===this._boneMask.length||0<=this._boneMask.indexOf(b)};a.prototype.addBoneMask=function(b,a){void 0===a&&(a=!0);var d=this._armature.getBone(b);if(d){0>this._boneMask.indexOf(b)&&this._boneMask.push(b);if(a)for(var c=this._armature.getBones(),f=0,e=c.length;f<e;++f){var h=c[f];0>this._boneMask.indexOf(h.name)&&d.contains(h)&&this._boneMask.push(h.name)}this._updateTimelineStates()}};a.prototype.removeBoneMask=function(b,a){void 0===a&&(a=!0);var d=
this._boneMask.indexOf(b);0<=d&&this._boneMask.splice(d,1);if(a&&(d=this._armature.getBone(b))){var c=this._armature.getBones();if(0<this._boneMask.length)for(var f=0,e=c.length;f<e;++f){var h=c[f],m=this._boneMask.indexOf(h.name);0<=m&&d.contains(h)&&this._boneMask.splice(m,1)}else for(f=0,e=c.length;f<e;++f)h=c[f],d.contains(h)||this._boneMask.push(h.name)}this._updateTimelineStates()};a.prototype.removeAllBoneMask=function(){this._boneMask.length=0;this._updateTimelineStates()};Object.defineProperty(a.prototype,
"layer",{get:function(){return this._layer},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"group",{get:function(){return this._group},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"animationData",{get:function(){return this._animationData},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"isCompleted",{get:function(){return 0<this._timeline._playState},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"isPlaying",{get:function(){return this._playheadState&2&&0>=this._timeline._playState},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"currentPlayTimes",{get:function(){return this._timeline._currentPlayTimes},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"totalTime",{get:function(){return this._duration},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"currentTime",{get:function(){return this._timeline._currentTime},
set:function(b){if(0>b||b!==b)b=0;b=b%this._duration+(this._timeline._currentPlayTimes-(0<this._timeline._playState?1:0))*this._duration;if(this._time!==b){this._time=b;this._timeline.setCurrentTime(this._time);this._zOrderTimeline&&(this._zOrderTimeline._playState=-1);b=0;for(var a=this._boneTimelines.length;b<a;++b)this._boneTimelines[b]._playState=-1;b=0;for(a=this._slotTimelines.length;b<a;++b)this._slotTimelines[b]._playState=-1;b=0;for(a=this._ffdTimelines.length;b<a;++b)this._ffdTimelines[b]._playState=
-1}},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"clip",{get:function(){return this._animationData},enumerable:!0,configurable:!0});return a}(e.BaseObject);e.AnimationState=c})(dragonBones||(dragonBones={}));
(function(e){var c=function(c){function a(){return c.call(this)||this}__extends(a,c);a.prototype._onClear=function(){this._playState=-1;this._currentPlayTimes=0;this._currentTime=-1;this._timelineData=null;this._animationDutation=this._duration=this._position=this._frameCount=this._frameRate=0;this._timeScale=1;this._timeOffset=0;this._mainTimeline=this._animationState=this._armature=this._currentFrame=null};a.prototype._onUpdateFrame=function(){};a.prototype._onArriveAtFrame=function(){};a.prototype._setCurrentTime=
function(b){var a=this._playState,d;if(this._mainTimeline&&1===this._frameCount)this._playState=0<=this._mainTimeline._playState?1:-1,d=1,b=this._mainTimeline._currentTime;else if(this._mainTimeline&&1===this._timeScale&&0===this._timeOffset)this._playState=this._mainTimeline._playState,d=this._mainTimeline._currentPlayTimes,b=this._mainTimeline._currentTime;else{d=this._animationState.playTimes;var c=d*this._duration;b*=this._timeScale;0!==this._timeOffset&&(b+=this._timeOffset*this._animationDutation);
0<d&&(b>=c||b<=-c)?(0>=this._playState&&3===this._animationState._playheadState&&(this._playState=1),b=0>b?0:this._duration):(0!==this._playState&&3===this._animationState._playheadState&&(this._playState=0),0>b?(b=-b,d=Math.floor(b/this._duration),b=this._duration-b%this._duration):(d=Math.floor(b/this._duration),b%=this._duration));b+=this._position}if(this._currentPlayTimes===d&&this._currentTime===b)return!1;if(0>a&&this._playState!==a||0>=this._playState&&this._currentPlayTimes!==d)this._currentFrame=
null;this._currentPlayTimes=d;this._currentTime=b;return!0};a.prototype._init=function(b,a,d){this._armature=b;this._animationState=a;this._timelineData=d;this._mainTimeline=this._animationState._timeline;this===this._mainTimeline&&(this._mainTimeline=null);this._frameRate=this._armature.armatureData.frameRate;this._frameCount=this._timelineData.frames.length;this._position=this._animationState._position;this._duration=this._animationState._duration;this._animationDutation=this._animationState.animationData.duration;
this._timeScale=this._mainTimeline?1/this._timelineData.scale:1;this._timeOffset=this._mainTimeline?this._timelineData.offset:0};a.prototype.fadeOut=function(){};a.prototype.update=function(b){0>=this._playState&&this._setCurrentTime(b)&&(b=this._timelineData.frames[1<this._frameCount?Math.floor(this._currentTime*this._frameRate):0],this._currentFrame!==b&&(this._currentFrame=b,this._onArriveAtFrame()),this._onUpdateFrame())};return a}(e.BaseObject);e.TimelineState=c;c=function(c){function a(){return c.call(this)||
this}__extends(a,c);a._getEasingValue=function(b,a){if(0>=b)return 0;if(1<=b)return 1;var d;if(2<a)return b;if(1<a)d=.5*(1-Math.cos(b*Math.PI)),--a;else if(0<a)d=1-Math.pow(1-b,2);else if(-1<=a)a*=-1,d=Math.pow(b,2);else if(-2<=a)d=Math.acos(1-2*b)/Math.PI,a=-1*a-1;else return b;return(d-b)*a+b};a._getEasingCurveValue=function(a,c){if(0>=a)return 0;if(1<=a)return 1;var b=c.length+1,f=Math.floor(a*b),e=0===f?0:c[f-1];return e+((f===b-1?1:c[f])-e)*(a*b-f)};a.prototype._onClear=function(){c.prototype._onClear.call(this);
this._tweenProgress=0;this._tweenEasing=e.DragonBones.NO_TWEEN;this._curve=null};a.prototype._onArriveAtFrame=function(){1<this._frameCount&&(this._currentFrame.next!==this._timelineData.frames[0]||0===this._animationState.playTimes||this._animationState.currentPlayTimes<this._animationState.playTimes-1)?(this._tweenEasing=this._currentFrame.tweenEasing,this._curve=this._currentFrame.curve):(this._tweenEasing=e.DragonBones.NO_TWEEN,this._curve=null)};a.prototype._onUpdateFrame=function(){this._tweenEasing!==
e.DragonBones.NO_TWEEN?(this._tweenProgress=(this._currentTime-this._currentFrame.position)/this._currentFrame.duration,0!==this._tweenEasing&&(this._tweenProgress=a._getEasingValue(this._tweenProgress,this._tweenEasing))):this._curve?(this._tweenProgress=(this._currentTime-this._currentFrame.position)/this._currentFrame.duration,this._tweenProgress=a._getEasingCurveValue(this._tweenProgress,this._curve)):this._tweenProgress=0};return a}(c);e.TweenTimelineState=c})(dragonBones||(dragonBones={}));
(function(e){var c=function(c){function a(){return c.call(this)||this}__extends(a,c);a.toString=function(){return"[class dragonBones.AnimationTimelineState]"};a.prototype._onCrossFrame=function(a){if(this._animationState.actionEnabled)for(var b=a.actions,d=0,c=b.length;d<c;++d)this._armature._bufferAction(b[d]);for(var b=this._armature.eventDispatcher,m=a.events,d=0,c=m.length;d<c;++d){var k=m[d],h=null;switch(k.type){case 10:h=e.EventObject.FRAME_EVENT;break;case 11:h=e.EventObject.SOUND_EVENT}if(b.hasEvent(h)||
11===k.type){var w=e.BaseObject.borrowObject(e.EventObject);w.name=k.name;w.frame=a;w.data=k.data;w.animationState=this._animationState;k.bone&&(w.bone=this._armature.getBone(k.bone.name));k.slot&&(w.slot=this._armature.getSlot(k.slot.name));this._armature._bufferEvent(w,h)}}};a.prototype.update=function(a){var b=this._playState,d=this._currentPlayTimes,c=this._currentTime;if(0>=this._playState&&this._setCurrentTime(a)){var m=this._armature.eventDispatcher;0>b&&this._playState!==b&&(this._animationState.displayControl&&
this._armature._sortZOrder(null),m.hasEvent(e.EventObject.START)&&(b=e.BaseObject.borrowObject(e.EventObject),b.animationState=this._animationState,this._armature._bufferEvent(b,e.EventObject.START)));if(!(0>c)){var k;a=b=null;this._currentPlayTimes!==d?(m.hasEvent(e.EventObject.LOOP_COMPLETE)&&(b=e.BaseObject.borrowObject(e.EventObject),b.animationState=this._animationState),0<this._playState?(m.hasEvent(e.EventObject.COMPLETE)&&(a=e.BaseObject.borrowObject(e.EventObject),a.animationState=this._animationState),
k=c>this._currentTime):k=c<this._currentTime):k=c>this._currentTime;if(1<this._frameCount){if(m=this._timelineData.frames[Math.floor(this._currentTime*this._frameRate)],this._currentFrame!==m){var h=this._currentFrame;this._currentFrame=m;if(k)for(h||(k=Math.floor(c*this._frameRate),h=this._timelineData.frames[k],this._currentPlayTimes===d&&h===m&&(h=null));h&&(this._position<=h.position&&h.position<=this._position+this._duration&&this._onCrossFrame(h),b&&h===this._timelineData.frames[0]&&(this._armature._bufferEvent(b,
e.EventObject.LOOP_COMPLETE),b=null),h=h.prev,h!==m););else for(h||(k=Math.floor(c*this._frameRate),h=this._timelineData.frames[k],this._currentPlayTimes===d&&(c<=h.position?h=h.prev:h===m&&(h=null)));h&&(h=h.next,b&&h===this._timelineData.frames[0]&&(this._armature._bufferEvent(b,e.EventObject.LOOP_COMPLETE),b=null),this._position<=h.position&&h.position<=this._position+this._duration&&this._onCrossFrame(h),h!==m););}}else 0<this._frameCount&&!this._currentFrame&&(this._currentFrame=this._timelineData.frames[0],
this._currentPlayTimes===d?c<=this._currentFrame.position&&this._onCrossFrame(this._currentFrame):this._position<=this._currentFrame.position&&(!k&&b&&(this._armature._bufferEvent(b,e.EventObject.LOOP_COMPLETE),b=null),this._onCrossFrame(this._currentFrame)));b&&this._armature._bufferEvent(b,e.EventObject.LOOP_COMPLETE);a&&this._armature._bufferEvent(a,e.EventObject.COMPLETE)}}};a.prototype.setCurrentTime=function(a){this._setCurrentTime(a);this._currentFrame=null};return a}(e.TimelineState);e.AnimationTimelineState=
c;c=function(c){function a(){return c.call(this)||this}__extends(a,c);a.toString=function(){return"[class dragonBones.ZOrderTimelineState]"};a.prototype._onArriveAtFrame=function(){c.prototype._onArriveAtFrame.call(this);this._armature._sortZOrder(this._currentFrame.zOrder)};return a}(e.TimelineState);e.ZOrderTimelineState=c;c=function(c){function a(){var a=c.call(this)||this;a._transform=new e.Transform;a._durationTransform=new e.Transform;return a}__extends(a,c);a.toString=function(){return"[class dragonBones.BoneTimelineState]"};
a.prototype._onClear=function(){c.prototype._onClear.call(this);this.bone=null;this._transformDirty=!1;this._tweenScale=this._tweenRotate=this._tweenTransform=0;this._transform.identity();this._durationTransform.identity();this._originalTransform=this._boneTransform=null};a.prototype._onArriveAtFrame=function(){c.prototype._onArriveAtFrame.call(this);this._tweenScale=this._tweenRotate=this._tweenTransform=1;if(1<this._frameCount&&(this._tweenEasing!==e.DragonBones.NO_TWEEN||this._curve)){var a=this._currentFrame.transform,
f=this._currentFrame.next.transform;this._durationTransform.x=f.x-a.x;this._durationTransform.y=f.y-a.y;if(0!==this._durationTransform.x||0!==this._durationTransform.y)this._tweenTransform=2;var d=this._currentFrame.tweenRotate;if(d!==e.DragonBones.NO_TWEEN){if(d){if(0<d?f.skewY>=a.skewY:f.skewY<=a.skewY)d=0<d?d-1:d+1;this._durationTransform.skewX=f.skewX-a.skewX+e.DragonBones.PI_D*d;this._durationTransform.skewY=f.skewY-a.skewY+e.DragonBones.PI_D*d}else this._durationTransform.skewX=e.Transform.normalizeRadian(f.skewX-
a.skewX),this._durationTransform.skewY=e.Transform.normalizeRadian(f.skewY-a.skewY);if(0!==this._durationTransform.skewX||0!==this._durationTransform.skewY)this._tweenRotate=2}else this._durationTransform.skewX=0,this._durationTransform.skewY=0;if(this._currentFrame.tweenScale){if(this._durationTransform.scaleX=f.scaleX-a.scaleX,this._durationTransform.scaleY=f.scaleY-a.scaleY,0!==this._durationTransform.scaleX||0!==this._durationTransform.scaleY)this._tweenScale=2}else this._durationTransform.scaleX=
0,this._durationTransform.scaleY=0}else this._durationTransform.x=0,this._durationTransform.y=0,this._durationTransform.skewX=0,this._durationTransform.skewY=0,this._durationTransform.scaleX=0,this._durationTransform.scaleY=0};a.prototype._onUpdateFrame=function(){c.prototype._onUpdateFrame.call(this);var a,f=this._currentFrame.transform;0!==this._tweenTransform&&(a=1===this._tweenTransform?this._tweenTransform=0:this._tweenProgress,this._animationState.additiveBlending?(this._transform.x=f.x+this._durationTransform.x*
a,this._transform.y=f.y+this._durationTransform.y*a):(this._transform.x=this._originalTransform.x+f.x+this._durationTransform.x*a,this._transform.y=this._originalTransform.y+f.y+this._durationTransform.y*a),this._transformDirty=!0);0!==this._tweenRotate&&(a=1===this._tweenRotate?this._tweenRotate=0:this._tweenProgress,this._animationState.additiveBlending?(this._transform.skewX=f.skewX+this._durationTransform.skewX*a,this._transform.skewY=f.skewY+this._durationTransform.skewY*a):(this._transform.skewX=
this._originalTransform.skewX+f.skewX+this._durationTransform.skewX*a,this._transform.skewY=this._originalTransform.skewY+f.skewY+this._durationTransform.skewY*a),this._transformDirty=!0);0!==this._tweenScale&&(a=1===this._tweenScale?this._tweenScale=0:this._tweenProgress,this._animationState.additiveBlending?(this._transform.scaleX=f.scaleX+this._durationTransform.scaleX*a,this._transform.scaleY=f.scaleY+this._durationTransform.scaleY*a):(this._transform.scaleX=this._originalTransform.scaleX*(f.scaleX+
this._durationTransform.scaleX*a),this._transform.scaleY=this._originalTransform.scaleY*(f.scaleY+this._durationTransform.scaleY*a)),this._transformDirty=!0)};a.prototype._init=function(a,f,d){c.prototype._init.call(this,a,f,d);this._originalTransform=this._timelineData.originalTransform;this._boneTransform=this.bone._animationPose};a.prototype.fadeOut=function(){this._transform.skewX=e.Transform.normalizeRadian(this._transform.skewX);this._transform.skewY=e.Transform.normalizeRadian(this._transform.skewY)};
a.prototype.update=function(a){var b=this._animationState._layer,d=this._animationState._weightResult;this.bone._blendDirty?0<this.bone._blendLeftWeight&&(this.bone._blendLayer!==b&&(this.bone._blendTotalWeight>=this.bone._blendLeftWeight?this.bone._blendLeftWeight=0:(this.bone._blendLayer=b,this.bone._blendLeftWeight-=this.bone._blendTotalWeight,this.bone._blendTotalWeight=0)),d*=this.bone._blendLeftWeight,0<=d&&(c.prototype.update.call(this,a),this.bone._blendTotalWeight+=d,this._boneTransform.x+=
this._transform.x*d,this._boneTransform.y+=this._transform.y*d,this._boneTransform.skewX+=this._transform.skewX*d,this._boneTransform.skewY+=this._transform.skewY*d,this._boneTransform.scaleX+=(this._transform.scaleX-1)*d,this._boneTransform.scaleY+=(this._transform.scaleY-1)*d)):(c.prototype.update.call(this,a),this.bone._blendLayer=b,this.bone._blendLeftWeight=1,this.bone._blendTotalWeight=d,this._boneTransform.x=this._transform.x*d,this._boneTransform.y=this._transform.y*d,this._boneTransform.skewX=
this._transform.skewX*d,this._boneTransform.skewY=this._transform.skewY*d,this._boneTransform.scaleX=(this._transform.scaleX-1)*d+1,this._boneTransform.scaleY=(this._transform.scaleY-1)*d+1,this.bone._blendDirty=!0);if(this._transformDirty||0!==this._animationState._fadeState||0!==this._animationState._subFadeState)this._transformDirty=!1,this.bone.invalidUpdate()};return a}(e.TweenTimelineState);e.BoneTimelineState=c;c=function(c){function a(){var a=c.call(this)||this;a._color=new e.ColorTransform;
a._durationColor=new e.ColorTransform;return a}__extends(a,c);a.toString=function(){return"[class dragonBones.SlotTimelineState]"};a.prototype._onClear=function(){c.prototype._onClear.call(this);this.slot=null;this._colorDirty=!1;this._tweenColor=0;this._color.identity();this._durationColor.identity();this._slotColor=null};a.prototype._onArriveAtFrame=function(){c.prototype._onArriveAtFrame.call(this);if(this._animationState._isDisabled(this.slot))this._tweenEasing=e.DragonBones.NO_TWEEN,this._curve=
null,this._tweenColor=0;else{var a=this._currentFrame.displayIndex;0<=this._playState&&this.slot.displayIndex!==a&&this.slot._setDisplayIndex(a);if(0<=a){this._tweenColor=0;a=this._currentFrame.color;if(this._tweenEasing!==e.DragonBones.NO_TWEEN||this._curve){var f=this._currentFrame.next.color;a!==f&&(this._durationColor.alphaMultiplier=f.alphaMultiplier-a.alphaMultiplier,this._durationColor.redMultiplier=f.redMultiplier-a.redMultiplier,this._durationColor.greenMultiplier=f.greenMultiplier-a.greenMultiplier,
this._durationColor.blueMultiplier=f.blueMultiplier-a.blueMultiplier,this._durationColor.alphaOffset=f.alphaOffset-a.alphaOffset,this._durationColor.redOffset=f.redOffset-a.redOffset,this._durationColor.greenOffset=f.greenOffset-a.greenOffset,this._durationColor.blueOffset=f.blueOffset-a.blueOffset,0!==this._durationColor.alphaMultiplier||0!==this._durationColor.redMultiplier||0!==this._durationColor.greenMultiplier||0!==this._durationColor.blueMultiplier||0!==this._durationColor.alphaOffset||0!==
this._durationColor.redOffset||0!==this._durationColor.greenOffset||0!==this._durationColor.blueOffset)&&(this._tweenColor=2)}0!==this._tweenColor||this._slotColor.alphaMultiplier===a.alphaMultiplier&&this._slotColor.redMultiplier===a.redMultiplier&&this._slotColor.greenMultiplier===a.greenMultiplier&&this._slotColor.blueMultiplier===a.blueMultiplier&&this._slotColor.alphaOffset===a.alphaOffset&&this._slotColor.redOffset===a.redOffset&&this._slotColor.greenOffset===a.greenOffset&&this._slotColor.blueOffset===
a.blueOffset||(this._tweenColor=1)}else this._tweenEasing=e.DragonBones.NO_TWEEN,this._curve=null,this._tweenColor=0}};a.prototype._onUpdateFrame=function(){c.prototype._onUpdateFrame.call(this);var a;if(0!==this._tweenColor&&this.slot.parent._blendLayer>=this._animationState._layer){a=1===this._tweenColor?this._tweenColor=0:this._tweenProgress;var f=this._currentFrame.color;this._color.alphaMultiplier=f.alphaMultiplier+this._durationColor.alphaMultiplier*a;this._color.redMultiplier=f.redMultiplier+
this._durationColor.redMultiplier*a;this._color.greenMultiplier=f.greenMultiplier+this._durationColor.greenMultiplier*a;this._color.blueMultiplier=f.blueMultiplier+this._durationColor.blueMultiplier*a;this._color.alphaOffset=f.alphaOffset+this._durationColor.alphaOffset*a;this._color.redOffset=f.redOffset+this._durationColor.redOffset*a;this._color.greenOffset=f.greenOffset+this._durationColor.greenOffset*a;this._color.blueOffset=f.blueOffset+this._durationColor.blueOffset*a;this._colorDirty=!0}};
a.prototype._init=function(a,f,d){c.prototype._init.call(this,a,f,d);this._slotColor=this.slot._colorTransform};a.prototype.fadeOut=function(){this._tweenColor=0};a.prototype.update=function(a){c.prototype.update.call(this,a);if(0!==this._tweenColor||this._colorDirty)0!==this._animationState._fadeState||0!==this._animationState._subFadeState?(a=Math.pow(this._animationState._fadeProgress,4),this._slotColor.alphaMultiplier+=(this._color.alphaMultiplier-this._slotColor.alphaMultiplier)*a,this._slotColor.redMultiplier+=
(this._color.redMultiplier-this._slotColor.redMultiplier)*a,this._slotColor.greenMultiplier+=(this._color.greenMultiplier-this._slotColor.greenMultiplier)*a,this._slotColor.blueMultiplier+=(this._color.blueMultiplier-this._slotColor.blueMultiplier)*a,this._slotColor.alphaOffset+=(this._color.alphaOffset-this._slotColor.alphaOffset)*a,this._slotColor.redOffset+=(this._color.redOffset-this._slotColor.redOffset)*a,this._slotColor.greenOffset+=(this._color.greenOffset-this._slotColor.greenOffset)*a,this._slotColor.blueOffset+=
(this._color.blueOffset-this._slotColor.blueOffset)*a,this.slot._colorDirty=!0):this._colorDirty&&(this._colorDirty=!1,this._slotColor.alphaMultiplier=this._color.alphaMultiplier,this._slotColor.redMultiplier=this._color.redMultiplier,this._slotColor.greenMultiplier=this._color.greenMultiplier,this._slotColor.blueMultiplier=this._color.blueMultiplier,this._slotColor.alphaOffset=this._color.alphaOffset,this._slotColor.redOffset=this._color.redOffset,this._slotColor.greenOffset=this._color.greenOffset,
this._slotColor.blueOffset=this._color.blueOffset,this.slot._colorDirty=!0)};return a}(e.TweenTimelineState);e.SlotTimelineState=c;c=function(c){function a(){var a=c.call(this)||this;a._ffdVertices=[];a._durationFFDVertices=[];return a}__extends(a,c);a.toString=function(){return"[class dragonBones.FFDTimelineState]"};a.prototype._onClear=function(){c.prototype._onClear.call(this);this.slot=null;this._ffdDirty=!1;this._tweenFFD=0;this._ffdVertices.length=0;this._durationFFDVertices.length=0;this._slotFFDVertices=
null};a.prototype._onArriveAtFrame=function(){c.prototype._onArriveAtFrame.call(this);if(0<=this.slot.displayIndex&&this._animationState._isDisabled(this.slot))this._tweenEasing=e.DragonBones.NO_TWEEN,this._curve=null,this._tweenFFD=0;else{this._tweenFFD=0;if(this._tweenEasing!==e.DragonBones.NO_TWEEN||this._curve)for(var a=this._currentFrame.tweens,f=this._currentFrame.next.tweens,d=0,g=a.length;d<g;++d){var m=f[d]-a[d];this._durationFFDVertices[d]=m;0!==m&&(this._tweenFFD=2)}if(0===this._tweenFFD)for(this._tweenFFD=
1,d=0,g=this._durationFFDVertices.length;d<g;++d)this._durationFFDVertices[d]=0}};a.prototype._onUpdateFrame=function(){c.prototype._onUpdateFrame.call(this);var a;if(0!==this._tweenFFD&&this.slot.parent._blendLayer>=this._animationState._layer){a=1===this._tweenFFD?this._tweenFFD=0:this._tweenProgress;for(var f=this._currentFrame.tweens,d=0,e=f.length;d<e;++d)this._ffdVertices[d]=f[d]+this._durationFFDVertices[d]*a;this._ffdDirty=!0}};a.prototype._init=function(a,f,d){c.prototype._init.call(this,
a,f,d);this._slotFFDVertices=this.slot._ffdVertices;this._ffdVertices.length=this._timelineData.frames[0].tweens.length;this._durationFFDVertices.length=this._ffdVertices.length;a=0;for(f=this._ffdVertices.length;a<f;++a)this._ffdVertices[a]=0;a=0;for(f=this._durationFFDVertices.length;a<f;++a)this._durationFFDVertices[a]=0};a.prototype.fadeOut=function(){this._tweenFFD=0};a.prototype.update=function(a){c.prototype.update.call(this,a);if(this.slot._meshData===this._timelineData.display.mesh&&(0!==
this._tweenFFD||this._ffdDirty))if(0!==this._animationState._fadeState||0!==this._animationState._subFadeState){a=Math.pow(this._animationState._fadeProgress,4);for(var b=0,d=this._ffdVertices.length;b<d;++b)this._slotFFDVertices[b]+=(this._ffdVertices[b]-this._slotFFDVertices[b])*a;this.slot._meshDirty=!0}else if(this._ffdDirty){this._ffdDirty=!1;b=0;for(d=this._ffdVertices.length;b<d;++b)this._slotFFDVertices[b]=this._ffdVertices[b];this.slot._meshDirty=!0}};return a}(e.TweenTimelineState);e.FFDTimelineState=
c})(dragonBones||(dragonBones={}));
(function(e){var c=function(){function c(){this.time=(new Date).getTime()/e.DragonBones.SECOND_TO_MILLISECOND;this.timeScale=1;this._animatebles=[];this._clock=null}Object.defineProperty(c,"clock",{get:function(){c._clock||(c._clock=new c);return c._clock},enumerable:!0,configurable:!0});c.prototype.advanceTime=function(a){a!==a&&(a=0);0>a&&(a=(new Date).getTime()/e.DragonBones.SECOND_TO_MILLISECOND-this.time);1!==this.timeScale&&(a*=this.timeScale);this.time=0>a?this.time-a:this.time+a;if(a){for(var b=
0,c=0,d=this._animatebles.length;b<d;++b){var g=this._animatebles[b];g?(0<c&&(this._animatebles[b-c]=g,this._animatebles[b]=null),g.advanceTime(a)):c++}if(0<c){for(d=this._animatebles.length;b<d;++b)(g=this._animatebles[b])?this._animatebles[b-c]=g:c++;this._animatebles.length-=c}}};c.prototype.contains=function(a){return 0<=this._animatebles.indexOf(a)};c.prototype.add=function(a){a&&0>this._animatebles.indexOf(a)&&(this._animatebles.push(a),a.clock=this,e.DragonBones.debug&&a instanceof e.Armature&&
e.DragonBones.addArmature(a))};c.prototype.remove=function(a){var b=this._animatebles.indexOf(a);0<=b&&(this._animatebles[b]=null,a.clock=null,e.DragonBones.debug&&a instanceof e.Armature&&e.DragonBones.removeArmature(a))};c.prototype.clear=function(){for(var a=0,b=this._animatebles.length;a<b;++a){var c=this._animatebles[a];this._animatebles[a]=null;null!=c&&(c.clock=null)}};Object.defineProperty(c.prototype,"clock",{get:function(){return this._clock},set:function(a){if(this._clock!==a){var b=this._clock;
this._clock=a;b&&b.remove(this);this._clock&&this._clock.add(this)}},enumerable:!0,configurable:!0});return c}();c._clock=null;e.WorldClock=c})(dragonBones||(dragonBones={}));
(function(e){var c=function(c){function a(){return c.call(this)||this}__extends(a,c);a.toString=function(){return"[class dragonBones.EventObject]"};a.prototype._onClear=function(){this.animationState=this.slot=this.bone=this.armature=this.data=this.frame=this.name=this.type=null};return a}(e.BaseObject);c.START="start";c.LOOP_COMPLETE="loopComplete";c.COMPLETE="complete";c.FADE_IN="fadeIn";c.FADE_IN_COMPLETE="fadeInComplete";c.FADE_OUT="fadeOut";c.FADE_OUT_COMPLETE="fadeOutComplete";c.FRAME_EVENT=
"frameEvent";c.SOUND_EVENT="soundEvent";e.EventObject=c})(dragonBones||(dragonBones={}));
(function(e){var c=function(){function c(a){void 0===a&&(a=null);this.autoSearch=!1;this._dragonBonesDataMap={};this._textureAtlasDataMap={};this._dataParser=a;this._dataParser||(c._defaultParser||(c._defaultParser=new e.ObjectDataParser),this._dataParser=c._defaultParser)}c.prototype._getTextureData=function(a,b){var c=this._textureAtlasDataMap[a];if(c)for(var d=0,e=c.length;d<e;++d){var l=c[d].getTexture(b);if(l)return l}if(this.autoSearch)for(var k in this._textureAtlasDataMap)for(c=this._textureAtlasDataMap[k],
d=0,e=c.length;d<e;++d)if(l=c[d],l.autoSearch&&(l=l.getTexture(b)))return l;return null};c.prototype._fillBuildArmaturePackage=function(a,b,c,d,e){var f=null,g=null;b&&(f=this._dragonBonesDataMap[b])&&(g=f.getArmature(c));if(!g&&(!b||this.autoSearch))for(var h in this._dragonBonesDataMap)if(f=this._dragonBonesDataMap[h],!b||f.autoSearch)if(g=f.getArmature(c)){b=h;break}return g?(a.dataName=b,a.textureAtlasName=e,a.data=f,a.armature=g,a.skin=g.getSkin(d),a.skin||(a.skin=g.defaultSkin),!0):!1};c.prototype._buildBones=
function(a,b){for(var c=a.armature.sortedBones,d=0,g=c.length;d<g;++d){var l=c[d],k=e.BaseObject.borrowObject(e.Bone);k._init(l);l.parent?b.addBone(k,l.parent.name):b.addBone(k);l.ik&&(k.ikBendPositive=l.bendPositive,k.ikWeight=l.weight,k._setIK(b.getBone(l.ik.name),l.chain,l.chainIndex))}};c.prototype._buildSlots=function(a,b){var c=a.skin,d=a.armature.defaultSkin,e={},l;for(l in d.slots){var k=d.slots[l];e[k.slot.name]=k}if(c!==d)for(l in c.slots)k=c.slots[l],e[k.slot.name]=k;c=a.armature.sortedSlots;
d=0;for(l=c.length;d<l;++d){var h=c[d];if(k=e[h.name])if(k=this._generateSlot(a,k,b))b.addSlot(k,h.parent.name),k._setDisplayIndex(h.displayIndex)}};c.prototype._replaceSlotDisplay=function(a,b,c,d){0>d&&(d=c.displayIndex);if(0<=d){var e=c.displayList;e.length<=d&&(e.length=d+1);c._replacedDisplayDatas.length<=d&&(c._replacedDisplayDatas.length=d+1);c._replacedDisplayDatas[d]=b;if(1===b.type)b=this.buildArmature(b.path,a.dataName,null,a.textureAtlasName),e[d]=b;else{if(!b.texture||a.textureAtlasName)b.texture=
this._getTextureData(a.textureAtlasName?a.textureAtlasName:a.dataName,b.path);a=c.skinSlotData.displays;e[d]=b.mesh||d<a.length&&a[d].mesh?c.meshDisplay:c.rawDisplay}c.displayList=e}};c.prototype.parseDragonBonesData=function(a,b,c){void 0===b&&(b=null);void 0===c&&(c=1);a=this._dataParser.parseDragonBonesData(a,c);this.addDragonBonesData(a,b);return a};c.prototype.parseTextureAtlasData=function(a,b,c,d){void 0===c&&(c=null);void 0===d&&(d=0);var e=this._generateTextureAtlasData(null,null);this._dataParser.parseTextureAtlasData(a,
e,d);this._generateTextureAtlasData(e,b);this.addTextureAtlasData(e,c);return e};c.prototype.getDragonBonesData=function(a){return this._dragonBonesDataMap[a]};c.prototype.addDragonBonesData=function(a,b){void 0===b&&(b=null);if(a)(b=b||a.name)?this._dragonBonesDataMap[b]?console.warn("Same name data.",b):this._dragonBonesDataMap[b]=a:console.warn("Unnamed data.");else throw Error(e.DragonBones.ARGUMENT_ERROR);};c.prototype.removeDragonBonesData=function(a,b){void 0===b&&(b=!0);var c=this._dragonBonesDataMap[a];
c&&(b&&c.returnToPool(),delete this._dragonBonesDataMap[a])};c.prototype.getTextureAtlasData=function(a){return this._textureAtlasDataMap[a]};c.prototype.addTextureAtlasData=function(a,b){void 0===b&&(b=null);if(a)if(b=b||a.name){var c=this._textureAtlasDataMap[b]?this._textureAtlasDataMap[b]:this._textureAtlasDataMap[b]=[];0>c.indexOf(a)&&c.push(a)}else console.warn("Unnamed data.");else throw Error(e.DragonBones.ARGUMENT_ERROR);};c.prototype.removeTextureAtlasData=function(a,b){void 0===b&&(b=!0);
var c=this._textureAtlasDataMap[a];if(c){if(b)for(var d=0,e=c.length;d<e;++d)c[d].returnToPool();delete this._textureAtlasDataMap[a]}};c.prototype.clear=function(a){void 0===a&&(a=!0);for(var b in this._dragonBonesDataMap)a&&this._dragonBonesDataMap[b].returnToPool(),delete this._dragonBonesDataMap[b];for(b in this._textureAtlasDataMap){if(a)for(var c=this._textureAtlasDataMap[b],d=0,e=c.length;d<e;++d)c[d].returnToPool();delete this._textureAtlasDataMap[b]}};c.prototype.buildArmature=function(a,
b,c,d){void 0===b&&(b=null);void 0===c&&(c=null);void 0===d&&(d=null);var e={};if(this._fillBuildArmaturePackage(e,b,a,c,d))return a=this._generateArmature(e),this._buildBones(e,a),this._buildSlots(e,a),a.invalidUpdate(null,!0),a.advanceTime(0),a;console.warn("No armature data.",a,b?b:"");return null};c.prototype.copyAnimationsToArmature=function(a,b,c,d,g){void 0===c&&(c=null);void 0===d&&(d=null);void 0===g&&(g=!0);var f={};if(this._fillBuildArmaturePackage(f,d,b,c,null)){b=f.armature;if(g)a.animation.animations=
b.animations;else{var k={},h;for(h in a.animation.animations)k[h]=a.animation.animations[h];for(h in b.animations)k[h]=b.animations[h];a.animation.animations=k}if(f.skin){a=a.getSlots();h=0;for(b=a.length;h<b;++h)for(var k=a[h],m=k.displayList,n=0,q=m.length;n<q;++n){var p=m[n];if(p instanceof e.Armature){var r=f.skin.getSlot(k.name).displays;n<r.length&&(r=r[n],1===r.type&&this.copyAnimationsToArmature(p,r.path,c,d,g))}}return!0}}return!1};c.prototype.replaceSlotDisplay=function(a,b,c,d,e,l){void 0===
l&&(l=-1);var f={};if(this._fillBuildArmaturePackage(f,a,b,null,null)&&(a=f.skin.getSlot(c)))for(b=0,c=a.displays.length;b<c;++b){var g=a.displays[b];if(g.name===d){this._replaceSlotDisplay(f,g,e,l);break}}};c.prototype.replaceSlotDisplayList=function(a,b,c,d){var e={};if(this._fillBuildArmaturePackage(e,a,b,null,null)&&(a=e.skin.getSlot(c)))for(b=0,c=a.displays.length;b<c;++b)this._replaceSlotDisplay(e,a.displays[b],d,b)};c.prototype.getAllDragonBonesData=function(){return this._dragonBonesDataMap};
c.prototype.getAllTextureAtlasData=function(){return this._textureAtlasDataMap};return c}();c._defaultParser=null;e.BaseFactory=c})(dragonBones||(dragonBones={}));