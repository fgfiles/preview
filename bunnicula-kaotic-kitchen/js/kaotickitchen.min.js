!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).PIXI=t()}}(function(){return function t(e,i,n){function r(a,o){if(!i[a]){if(!e[a]){var l="function"==typeof require&&require;if(!o&&l)return l(a,!0);if(s)return s(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var u=i[a]={exports:{}};e[a][0].call(u.exports,function(t){var i=e[a][1][t];return r(i||t)},u,u.exports,t,e,i,n)}return i[a].exports}for(var s="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(t,e,i){function n(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}i.INT_BITS=32,i.INT_MAX=2147483647,i.INT_MIN=-1<<31,i.sign=function(t){return(t>0)-(t<0)},i.abs=function(t){var e=t>>31;return(t^e)-e},i.min=function(t,e){return e^(t^e)&-(t<e)},i.max=function(t,e){return t^(t^e)&-(t<e)},i.isPow2=function(t){return!(t&t-1||!t)},i.log2=function(t){var e,i;return e=(t>65535)<<4,e|=i=((t>>>=e)>255)<<3,e|=i=((t>>>=i)>15)<<2,(e|=i=((t>>>=i)>3)<<1)|(t>>>=i)>>1},i.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},i.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},i.countTrailingZeros=n,i.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},i.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},i.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var r=new Array(256);!function(t){for(var e=0;e<256;++e){var i=e,n=e,r=7;for(i>>>=1;i;i>>>=1)n<<=1,n|=1&i,--r;t[e]=n<<r&255}}(r),i.reverse=function(t){return r[255&t]<<24|r[t>>>8&255]<<16|r[t>>>16&255]<<8|r[t>>>24&255]},i.interleave2=function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},i.deinterleave2=function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},i.interleave3=function(t,e,i){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(i=1227133513&((i=3272356035&((i=251719695&((i=4278190335&((i&=1023)|i<<16))|i<<8))|i<<4))|i<<2))<<2},i.deinterleave3=function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},i.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>n(t)+1}},{}],2:[function(t,e,i){"use strict";function n(t,e,i){i=i||2;var n,o,l,h,u,f,_,m=e&&e.length,g=m?e[0]*i:t.length,v=r(t,0,g,i,!0),y=[];if(!v)return y;if(m&&(v=function(t,e,i,n){var a,o,l,h,u,f=[];for(a=0,o=e.length;a<o;a++)l=e[a]*n,h=a<o-1?e[a+1]*n:t.length,(u=r(t,l,h,n,!1))===u.next&&(u.steiner=!0),f.push(p(u));for(f.sort(c),a=0;a<f.length;a++)d(f[a],i),i=s(i,i.next);return i}(t,e,v,i)),t.length>80*i){n=l=t[0],o=h=t[1];for(var b=i;b<g;b+=i)u=t[b],f=t[b+1],u<n&&(n=u),f<o&&(o=f),u>l&&(l=u),f>h&&(h=f);_=Math.max(l-n,h-o)}return a(v,y,i,n,o,_),y}function r(t,e,i,n,r){var s,a;if(r===w(t,e,i,n)>0)for(s=e;s<i;s+=n)a=E(s,t[s],t[s+1],a);else for(s=i-n;s>=e;s-=n)a=E(s,t[s],t[s+1],a);return a&&g(a,a.next)&&(T(a),a=a.next),a}function s(t,e){if(!t)return t;e||(e=t);var i,n=t;do{if(i=!1,n.steiner||!g(n,n.next)&&0!==m(n.prev,n,n.next))n=n.next;else{if(T(n),(n=e=n.prev)===n.next)return null;i=!0}}while(i||n!==e);return e}function a(t,e,i,n,r,c,d){if(t){!d&&c&&function(t,e,i,n){var r=t;do{null===r.z&&(r.z=f(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,i,n,r,s,a,o,l,h=1;do{for(i=t,t=null,s=null,a=0;i;){for(a++,n=i,o=0,e=0;e<h&&(o++,n=n.nextZ);e++);for(l=h;o>0||l>0&&n;)0===o?(r=n,n=n.nextZ,l--):0!==l&&n?i.z<=n.z?(r=i,i=i.nextZ,o--):(r=n,n=n.nextZ,l--):(r=i,i=i.nextZ,o--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;i=n}s.nextZ=null,h*=2}while(a>1)}(r)}(t,n,r,c);for(var p,_,m=t;t.prev!==t.next;)if(p=t.prev,_=t.next,c?l(t,n,r,c):o(t))e.push(p.i/i),e.push(t.i/i),e.push(_.i/i),T(t),t=_.next,m=_.next;else if((t=_)===m){d?1===d?a(t=h(t,e,i),e,i,n,r,c,2):2===d&&u(t,e,i,n,r,c):a(s(t),e,i,n,r,c,1);break}}}function o(t){var e=t.prev,i=t,n=t.next;if(m(e,i,n)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(_(e.x,e.y,i.x,i.y,n.x,n.y,r.x,r.y)&&m(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function l(t,e,i,n){var r=t.prev,s=t,a=t.next;if(m(r,s,a)>=0)return!1;for(var o=r.x<s.x?r.x<a.x?r.x:a.x:s.x<a.x?s.x:a.x,l=r.y<s.y?r.y<a.y?r.y:a.y:s.y<a.y?s.y:a.y,h=r.x>s.x?r.x>a.x?r.x:a.x:s.x>a.x?s.x:a.x,u=r.y>s.y?r.y>a.y?r.y:a.y:s.y>a.y?s.y:a.y,c=f(o,l,e,i,n),d=f(h,u,e,i,n),p=t.nextZ;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&_(r.x,r.y,s.x,s.y,a.x,a.y,p.x,p.y)&&m(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(p=t.prevZ;p&&p.z>=c;){if(p!==t.prev&&p!==t.next&&_(r.x,r.y,s.x,s.y,a.x,a.y,p.x,p.y)&&m(p.prev,p,p.next)>=0)return!1;p=p.prevZ}return!0}function h(t,e,i){var n=t;do{var r=n.prev,s=n.next.next;!g(r,s)&&v(r,n,n.next,s)&&y(r,s)&&y(s,r)&&(e.push(r.i/i),e.push(n.i/i),e.push(s.i/i),T(n),T(n.next),n=t=s),n=n.next}while(n!==t);return n}function u(t,e,i,n,r,o){var l,h,u=t;do{for(var c=u.next.next;c!==u.prev;){if(u.i!==c.i&&(h=c,(l=u).next.i!==h.i&&l.prev.i!==h.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&v(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(l,h)&&y(l,h)&&y(h,l)&&function(t,e){var i=t,n=!1,r=(t.x+e.x)/2,s=(t.y+e.y)/2;do{i.y>s!=i.next.y>s&&r<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}(l,h))){var d=b(u,c);return u=s(u,u.next),d=s(d,d.next),a(u,e,i,n,r,o),void a(d,e,i,n,r,o)}c=c.next}u=u.next}while(u!==t)}function c(t,e){return t.x-e.x}function d(t,e){if(e=function(t,e){var i,n=e,r=t.x,s=t.y,a=-1/0;do{if(s<=n.y&&s>=n.next.y){var o=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(o<=r&&o>a){if(a=o,o===r){if(s===n.y)return n;if(s===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!i)return null;if(r===a)return i.prev;var l,h=i,u=i.x,c=i.y,d=1/0;n=i.next;for(;n!==h;)r>=n.x&&n.x>=u&&_(s<c?r:a,s,u,c,s<c?a:r,s,n.x,n.y)&&((l=Math.abs(s-n.y)/(r-n.x))<d||l===d&&n.x>i.x)&&y(n,t)&&(i=n,d=l),n=n.next;return i}(t,e)){var i=b(e,t);s(i,i.next)}}function f(t,e,i,n,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)/r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)/r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function p(t){var e=t,i=t;do{e.x<i.x&&(i=e),e=e.next}while(e!==t);return i}function _(t,e,i,n,r,s,a,o){return(r-a)*(e-o)-(t-a)*(s-o)>=0&&(t-a)*(n-o)-(i-a)*(e-o)>=0&&(i-a)*(s-o)-(r-a)*(n-o)>=0}function m(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function g(t,e){return t.x===e.x&&t.y===e.y}function v(t,e,i,n){return!!(g(t,e)&&g(i,n)||g(t,n)&&g(i,e))||m(t,e,i)>0!=m(t,e,n)>0&&m(i,n,t)>0!=m(i,n,e)>0}function y(t,e){return m(t.prev,t,t.next)<0?m(t,e,t.next)>=0&&m(t,t.prev,e)>=0:m(t,e,t.prev)<0||m(t,t.next,e)<0}function b(t,e){var i=new x(t.i,t.x,t.y),n=new x(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,s.next=n,n.prev=s,n}function E(t,e,i,n){var r=new x(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function T(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function x(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function w(t,e,i,n){for(var r=0,s=e,a=i-n;s<i;s+=n)r+=(t[a]-t[s])*(t[s+1]+t[a+1]),a=s;return r}e.exports=n,n.deviation=function(t,e,i,n){var r=e&&e.length,s=r?e[0]*i:t.length,a=Math.abs(w(t,0,s,i));if(r)for(var o=0,l=e.length;o<l;o++){var h=e[o]*i,u=o<l-1?e[o+1]*i:t.length;a-=Math.abs(w(t,h,u,i))}var c=0;for(o=0;o<n.length;o+=3){var d=n[o]*i,f=n[o+1]*i,p=n[o+2]*i;c+=Math.abs((t[d]-t[p])*(t[f+1]-t[d+1])-(t[d]-t[f])*(t[p+1]-t[d+1]))}return 0===a&&0===c?0:Math.abs((c-a)/a)},n.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},n=0,r=0;r<t.length;r++){for(var s=0;s<t[r].length;s++)for(var a=0;a<e;a++)i.vertices.push(t[r][s][a]);r>0&&(n+=t[r-1].length,i.holes.push(n))}return i}},{}],3:[function(t,e,i){"use strict";var n=Object.prototype.hasOwnProperty,r="~";function s(){}function a(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function o(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(r=!1)),o.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)n.call(t,e)&&i.push(r?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},o.prototype.listeners=function(t,e){var i=r?r+t:t,n=this._events[i];if(e)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var s=0,a=n.length,o=new Array(a);s<a;s++)o[s]=n[s].fn;return o},o.prototype.emit=function(t,e,i,n,s,a){var o=r?r+t:t;if(!this._events[o])return!1;var l,h,u=this._events[o],c=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,i),!0;case 4:return u.fn.call(u.context,e,i,n),!0;case 5:return u.fn.call(u.context,e,i,n,s),!0;case 6:return u.fn.call(u.context,e,i,n,s,a),!0}for(h=1,l=new Array(c-1);h<c;h++)l[h-1]=arguments[h];u.fn.apply(u.context,l)}else{var d,f=u.length;for(h=0;h<f;h++)switch(u[h].once&&this.removeListener(t,u[h].fn,void 0,!0),c){case 1:u[h].fn.call(u[h].context);break;case 2:u[h].fn.call(u[h].context,e);break;case 3:u[h].fn.call(u[h].context,e,i);break;case 4:u[h].fn.call(u[h].context,e,i,n);break;default:if(!l)for(d=1,l=new Array(c-1);d<c;d++)l[d-1]=arguments[d];u[h].fn.apply(u[h].context,l)}}return!0},o.prototype.on=function(t,e,i){var n=new a(e,i||this),s=r?r+t:t;return this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],n]:this._events[s].push(n):(this._events[s]=n,this._eventsCount++),this},o.prototype.once=function(t,e,i){var n=new a(e,i||this,!0),s=r?r+t:t;return this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],n]:this._events[s].push(n):(this._events[s]=n,this._eventsCount++),this},o.prototype.removeListener=function(t,e,i,n){var a=r?r+t:t;if(!this._events[a])return this;if(!e)return 0==--this._eventsCount?this._events=new s:delete this._events[a],this;var o=this._events[a];if(o.fn)o.fn!==e||n&&!o.once||i&&o.context!==i||(0==--this._eventsCount?this._events=new s:delete this._events[a]);else{for(var l=0,h=[],u=o.length;l<u;l++)(o[l].fn!==e||n&&!o[l].once||i&&o[l].context!==i)&&h.push(o[l]);h.length?this._events[a]=1===h.length?h[0]:h:0==--this._eventsCount?this._events=new s:delete this._events[a]}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&(0==--this._eventsCount?this._events=new s:delete this._events[e])):(this._events=new s,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=r,o.EventEmitter=o,void 0!==e&&(e.exports=o)},{}],4:[function(t,e,i){var n,r,s,a,o,l,h,u,c,d,f,p,_,m,g,v,y,b,E;n=this,r=/iPhone/i,s=/iPod/i,a=/iPad/i,o=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,l=/Android/i,h=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,u=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,c=/IEMobile/i,d=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,f=/BlackBerry/i,p=/BB10/i,_=/Opera Mini/i,m=/(CriOS|Chrome)(?=.*\bMobile\b)/i,g=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,v=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),y=function(t,e){return t.test(e)},b=function(t){var e=t||navigator.userAgent,i=e.split("[FBAN");if(void 0!==i[1]&&(e=i[0]),void 0!==(i=e.split("Twitter"))[1]&&(e=i[0]),this.apple={phone:y(r,e),ipod:y(s,e),tablet:!y(r,e)&&y(a,e),device:y(r,e)||y(s,e)||y(a,e)},this.amazon={phone:y(h,e),tablet:!y(h,e)&&y(u,e),device:y(h,e)||y(u,e)},this.android={phone:y(h,e)||y(o,e),tablet:!y(h,e)&&!y(o,e)&&(y(u,e)||y(l,e)),device:y(h,e)||y(u,e)||y(o,e)||y(l,e)},this.windows={phone:y(c,e),tablet:y(d,e),device:y(c,e)||y(d,e)},this.other={blackberry:y(f,e),blackberry10:y(p,e),opera:y(_,e),firefox:y(g,e),chrome:y(m,e),device:y(f,e)||y(p,e)||y(_,e)||y(g,e)||y(m,e)},this.seven_inch=y(v,e),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},E=function(){var t=new b;return t.Class=b,t},void 0!==e&&e.exports&&"undefined"==typeof window?e.exports=b:void 0!==e&&e.exports&&"undefined"!=typeof window?e.exports=E():n.isMobile=E()},{}],5:[function(t,e,i){"use strict";var n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var i,s,a=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),o=1;o<arguments.length;o++){for(var l in i=Object(arguments[o]))n.call(i,l)&&(a[l]=i[l]);if(Object.getOwnPropertySymbols){s=Object.getOwnPropertySymbols(i);for(var h=0;h<s.length;h++)r.call(i,s[h])&&(a[s[h]]=i[s[h]])}}return a}},{}],6:[function(t,e,i){var n=new ArrayBuffer(0),r=function(t,e,i,r){this.gl=t,this.buffer=t.createBuffer(),this.type=e||t.ARRAY_BUFFER,this.drawType=r||t.STATIC_DRAW,this.data=n,i&&this.upload(i)};r.prototype.upload=function(t,e,i){i||this.bind();var n=this.gl;t=t||this.data,e=e||0,this.data.byteLength>=t.byteLength?n.bufferSubData(this.type,e,t):n.bufferData(this.type,t,this.drawType),this.data=t},r.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)},r.createVertexBuffer=function(t,e,i){return new r(t,t.ARRAY_BUFFER,e,i)},r.createIndexBuffer=function(t,e,i){return new r(t,t.ELEMENT_ARRAY_BUFFER,e,i)},r.create=function(t,e,i,n){return new r(t,e,i,n)},r.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},e.exports=r},{}],7:[function(t,e,i){var n=t("./GLTexture"),r=function(t,e,i){this.gl=t,this.framebuffer=t.createFramebuffer(),this.stencil=null,this.texture=null,this.width=e||100,this.height=i||100};r.prototype.enableTexture=function(t){var e=this.gl;this.texture=t||new n(e),this.texture.bind(),this.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture.texture,0)},r.prototype.enableStencil=function(){if(!this.stencil){var t=this.gl;this.stencil=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencil),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.width,this.height)}},r.prototype.clear=function(t,e,i,n){this.bind();var r=this.gl;r.clearColor(t,e,i,n),r.clear(r.COLOR_BUFFER_BIT)},r.prototype.bind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer)},r.prototype.unbind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null)},r.prototype.resize=function(t,e){var i=this.gl;this.width=t,this.height=e,this.texture&&this.texture.uploadData(null,t,e),this.stencil&&(i.bindRenderbuffer(i.RENDERBUFFER,this.stencil),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t,e))},r.prototype.destroy=function(){var t=this.gl;this.texture&&this.texture.destroy(),t.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},r.createRGBA=function(t,e,i,s){var a=n.fromData(t,null,e,i);a.enableNearestScaling(),a.enableWrapClamp();var o=new r(t,e,i);return o.enableTexture(a),o.unbind(),o},r.createFloat32=function(t,e,i,s){var a=new n.fromData(t,s,e,i);a.enableNearestScaling(),a.enableWrapClamp();var o=new r(t,e,i);return o.enableTexture(a),o.unbind(),o},e.exports=r},{"./GLTexture":9}],8:[function(t,e,i){var n=t("./shader/compileProgram"),r=t("./shader/extractAttributes"),s=t("./shader/extractUniforms"),a=t("./shader/generateUniformAccessObject"),o=function(t,e,i){this.gl=t,this.program=n(t,e,i),this.attributes=r(t,this.program);var o=s(t,this.program);this.uniforms=a(t,o)};o.prototype.bind=function(){this.gl.useProgram(this.program)},o.prototype.destroy=function(){},e.exports=o},{"./shader/compileProgram":14,"./shader/extractAttributes":16,"./shader/extractUniforms":17,"./shader/generateUniformAccessObject":18}],9:[function(t,e,i){var n=function(t,e,i,n,r){this.gl=t,this.texture=t.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=e||-1,this.height=i||-1,this.format=n||t.RGBA,this.type=r||t.UNSIGNED_BYTE};n.prototype.upload=function(t){this.bind();var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var i=t.videoWidth||t.width,n=t.videoHeight||t.height;n!==this.height||i!==this.width?e.texImage2D(e.TEXTURE_2D,0,this.format,this.format,this.type,t):e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.format,this.type,t),this.width=i,this.height=n};var r=!1;n.prototype.uploadData=function(t,e,i){this.bind();var n=this.gl;if(t instanceof Float32Array){if(!r){if(!n.getExtension("OES_texture_float"))throw new Error("floating point textures not available");r=!0}this.type=n.FLOAT}else this.type=n.UNSIGNED_BYTE;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),e!==this.width||i!==this.height?n.texImage2D(n.TEXTURE_2D,0,this.format,e,i,0,this.format,this.type,t||null):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e,i,this.format,this.type,t||null),this.width=e,this.height=i},n.prototype.bind=function(t){var e=this.gl;void 0!==t&&e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)},n.prototype.unbind=function(){var t=this.gl;t.bindTexture(t.TEXTURE_2D,null)},n.prototype.minFilter=function(t){var e=this.gl;this.bind(),this.mipmap?e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR:e.NEAREST)},n.prototype.magFilter=function(t){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t?e.LINEAR:e.NEAREST)},n.prototype.enableMipmap=function(){var t=this.gl;this.bind(),this.mipmap=!0,t.generateMipmap(t.TEXTURE_2D)},n.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},n.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},n.prototype.enableWrapClamp=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)},n.prototype.enableWrapRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)},n.prototype.enableWrapMirrorRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.MIRRORED_REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.MIRRORED_REPEAT)},n.prototype.destroy=function(){this.gl.deleteTexture(this.texture)},n.fromSource=function(t,e,i){var r=new n(t);return r.premultiplyAlpha=i||!1,r.upload(e),r},n.fromData=function(t,e,i,r){var s=new n(t);return s.uploadData(e,i,r),s},e.exports=n},{}],10:[function(t,e,i){var n=t("./setVertexAttribArrays");function r(t,e){if(this.nativeVaoExtension=null,r.FORCE_NATIVE||(this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=e,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var i=t.getParameter(t.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(i),attribState:new Array(i)}}this.gl=t,this.attributes=[],this.indexBuffer=null,this.dirty=!1}r.prototype.constructor=r,e.exports=r,r.FORCE_NATIVE=!1,r.prototype.bind=function(){return this.nativeVao?(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty&&(this.dirty=!1,this.activate())):this.activate(),this},r.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},r.prototype.activate=function(){for(var t=this.gl,e=null,i=0;i<this.attributes.length;i++){var r=this.attributes[i];e!==r.buffer&&(r.buffer.bind(),e=r.buffer),t.vertexAttribPointer(r.attribute.location,r.attribute.size,r.type||t.FLOAT,r.normalized||!1,r.stride||0,r.start||0)}return n(t,this.attributes,this.nativeState),this.indexBuffer.bind(),this},r.prototype.addAttribute=function(t,e,i,n,r,s){return this.attributes.push({buffer:t,attribute:e,location:e.location,type:i||this.gl.FLOAT,normalized:n||!1,stride:r||0,start:s||0}),this.dirty=!0,this},r.prototype.addIndex=function(t){return this.indexBuffer=t,this.dirty=!0,this},r.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},r.prototype.draw=function(t,e,i){var n=this.gl;return n.drawElements(t,e,n.UNSIGNED_SHORT,i||0),this},r.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null}},{"./setVertexAttribArrays":13}],11:[function(t,e,i){e.exports=function(t,e){var i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);if(!i)throw new Error("This browser does not support webGL. Try using the canvas renderer");return i}},{}],12:[function(t,e,i){var n={createContext:t("./createContext"),setVertexAttribArrays:t("./setVertexAttribArrays"),GLBuffer:t("./GLBuffer"),GLFramebuffer:t("./GLFramebuffer"),GLShader:t("./GLShader"),GLTexture:t("./GLTexture"),VertexArrayObject:t("./VertexArrayObject"),shader:t("./shader")};void 0!==e&&e.exports&&(e.exports=n),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=n)},{"./GLBuffer":6,"./GLFramebuffer":7,"./GLShader":8,"./GLTexture":9,"./VertexArrayObject":10,"./createContext":11,"./setVertexAttribArrays":13,"./shader":19}],13:[function(t,e,i){e.exports=function(t,e,i){var n;if(i){var r=i.tempAttribState,s=i.attribState;for(n=0;n<r.length;n++)r[n]=!1;for(n=0;n<e.length;n++)r[e[n].attribute.location]=!0;for(n=0;n<s.length;n++)s[n]!==r[n]&&(s[n]=r[n],i.attribState[n]?t.enableVertexAttribArray(n):t.disableVertexAttribArray(n))}else for(n=0;n<e.length;n++){var a=e[n];t.enableVertexAttribArray(a.attribute.location)}}},{}],14:[function(t,e,i){var n=function(t,e,i){var n=t.createShader(e);return t.shaderSource(n,i),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)?n:(console.log(t.getShaderInfoLog(n)),null)};e.exports=function(t,e,i){var r=n(t,t.VERTEX_SHADER,e),s=n(t,t.FRAGMENT_SHADER,i),a=t.createProgram();return t.attachShader(a,r),t.attachShader(a,s),t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(a,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(a)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(a)),t.deleteProgram(a),a=null),t.deleteShader(r),t.deleteShader(s),a}},{}],15:[function(t,e,i){var n=function(t){for(var e=new Array(t),i=0;i<e.length;i++)e[i]=!1;return e};e.exports=function(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return n(2*e);case"bvec3":return n(3*e);case"bvec4":return n(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}}},{}],16:[function(t,e,i){var n=t("./mapType"),r=t("./mapSize"),s=function(t,e,i,n){gl.vertexAttribPointer(this.location,this.size,t||gl.FLOAT,e||!1,i||0,n||0)};e.exports=function(t,e){for(var i={},a=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),o=0;o<a;o++){var l=t.getActiveAttrib(e,o),h=n(t,l.type);i[l.name]={type:h,size:r(h),location:t.getAttribLocation(e,l.name),pointer:s}}return i}},{"./mapSize":20,"./mapType":21}],17:[function(t,e,i){var n=t("./mapType"),r=t("./defaultValue");e.exports=function(t,e){for(var i={},s=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),a=0;a<s;a++){var o=t.getActiveUniform(e,a),l=o.name.replace(/\[.*?\]/,""),h=n(t,o.type);i[l]={type:h,size:o.size,location:t.getUniformLocation(e,l),value:r(h,o.size)}}return i}},{"./defaultValue":15,"./mapType":21}],18:[function(t,e,i){var n=function(t){var e=a.replace("%%",t);return new Function(e)},r=function(t,e){var i,n=o.replace(/%%/g,t);return(i=1===e.size?l[e.type]:h[e.type])&&(n+="\nthis.gl."+i+";"),new Function("value",n)},s=function(t,e){for(var i=e,n=0;n<t.length-1;n++){var r=i[t[n]]||{data:{}};i[t[n]]=r,i=r}return i},a=["return this.data.%%.value;"].join("\n"),o=["this.data.%%.value = value;","var location = this.data.%%.location;"].join("\n"),l={float:"uniform1f(location, value)",vec2:"uniform2f(location, value[0], value[1])",vec3:"uniform3f(location, value[0], value[1], value[2])",vec4:"uniform4f(location, value[0], value[1], value[2], value[3])",int:"uniform1i(location, value)",ivec2:"uniform2i(location, value[0], value[1])",ivec3:"uniform3i(location, value[0], value[1], value[2])",ivec4:"uniform4i(location, value[0], value[1], value[2], value[3])",bool:"uniform1i(location, value)",bvec2:"uniform2i(location, value[0], value[1])",bvec3:"uniform3i(location, value[0], value[1], value[2])",bvec4:"uniform4i(location, value[0], value[1], value[2], value[3])",mat2:"uniformMatrix2fv(location, false, value)",mat3:"uniformMatrix3fv(location, false, value)",mat4:"uniformMatrix4fv(location, false, value)",sampler2D:"uniform1i(location, value)"},h={float:"uniform1fv(location, value)",vec2:"uniform2fv(location, value)",vec3:"uniform3fv(location, value)",vec4:"uniform4fv(location, value)",int:"uniform1iv(location, value)",ivec2:"uniform2iv(location, value)",ivec3:"uniform3iv(location, value)",ivec4:"uniform4iv(location, value)",bool:"uniform1iv(location, value)",bvec2:"uniform2iv(location, value)",bvec3:"uniform3iv(location, value)",bvec4:"uniform4iv(location, value)",sampler2D:"uniform1iv(location, value)"};e.exports=function(t,e){var i={data:{}};i.gl=t;for(var a=Object.keys(e),o=0;o<a.length;o++){var l=a[o],h=l.split("."),u=h[h.length-1],c=s(h,i),d=e[l];c.data[u]=d,c.gl=t,Object.defineProperty(c,u,{get:n(u),set:r(u,d)})}return i}},{}],19:[function(t,e,i){e.exports={compileProgram:t("./compileProgram"),defaultValue:t("./defaultValue"),extractAttributes:t("./extractAttributes"),extractUniforms:t("./extractUniforms"),generateUniformAccessObject:t("./generateUniformAccessObject"),mapSize:t("./mapSize"),mapType:t("./mapType")}},{"./compileProgram":14,"./defaultValue":15,"./extractAttributes":16,"./extractUniforms":17,"./generateUniformAccessObject":18,"./mapSize":20,"./mapType":21}],20:[function(t,e,i){var n={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};e.exports=function(t){return n[t]}},{}],21:[function(t,e,i){var n=null,r={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};e.exports=function(t,e){if(!n){var i=Object.keys(r);n={};for(var s=0;s<i.length;++s){var a=i[s];n[t[a]]=r[a]}}return n[e]}},{}],22:[function(t,e,i){(function(t){function e(t,e){for(var i=0,n=t.length-1;n>=0;n--){var r=t[n];"."===r?t.splice(n,1):".."===r?(t.splice(n,1),i++):i&&(t.splice(n,1),i--)}if(e)for(;i--;i)t.unshift("..");return t}var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,r=function(t){return n.exec(t).slice(1)};function s(t,e){if(t.filter)return t.filter(e);for(var i=[],n=0;n<t.length;n++)e(t[n],n,t)&&i.push(t[n]);return i}i.resolve=function(){for(var i="",n=!1,r=arguments.length-1;r>=-1&&!n;r--){var a=r>=0?arguments[r]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(i=a+"/"+i,n="/"===a.charAt(0))}return i=e(s(i.split("/"),function(t){return!!t}),!n).join("/"),(n?"/":"")+i||"."},i.normalize=function(t){var n=i.isAbsolute(t),r="/"===a(t,-1);return(t=e(s(t.split("/"),function(t){return!!t}),!n).join("/"))||n||(t="."),t&&r&&(t+="/"),(n?"/":"")+t},i.isAbsolute=function(t){return"/"===t.charAt(0)},i.join=function(){var t=Array.prototype.slice.call(arguments,0);return i.normalize(s(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},i.relative=function(t,e){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var i=t.length-1;i>=0&&""===t[i];i--);return e>i?[]:t.slice(e,i-e+1)}t=i.resolve(t).substr(1),e=i.resolve(e).substr(1);for(var r=n(t.split("/")),s=n(e.split("/")),a=Math.min(r.length,s.length),o=a,l=0;l<a;l++)if(r[l]!==s[l]){o=l;break}var h=[];for(l=o;l<r.length;l++)h.push("..");return(h=h.concat(s.slice(o))).join("/")},i.sep="/",i.delimiter=":",i.dirname=function(t){var e=r(t),i=e[0],n=e[1];return i||n?(n&&(n=n.substr(0,n.length-1)),i+n):"."},i.basename=function(t,e){var i=r(t)[2];return e&&i.substr(-1*e.length)===e&&(i=i.substr(0,i.length-e.length)),i},i.extname=function(t){return r(t)[3]};var a="b"==="ab".substr(-1)?function(t,e,i){return t.substr(e,i)}:function(t,e,i){return e<0&&(e=t.length+e),t.substr(e,i)}}).call(this,t("_process"))},{_process:23}],23:[function(t,e,i){var n,r,s=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function l(t){if(n===setTimeout)return setTimeout(t,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(t){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(t){r=o}}();var h,u=[],c=!1,d=-1;function f(){c&&h&&(c=!1,h.length?u=h.concat(u):d=-1,u.length&&p())}function p(){if(!c){var t=l(f);c=!0;for(var e=u.length;e;){for(h=u,u=[];++d<e;)h&&h[d].run();d=-1,e=u.length}h=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function _(t,e){this.fun=t,this.array=e}function m(){}s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];u.push(new _(t,e)),1!==u.length||c||l(p)},_.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=m,s.addListener=m,s.once=m,s.off=m,s.removeListener=m,s.removeAllListeners=m,s.emit=m,s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],24:[function(t,e,i){(function(t){!function(n){var r="object"==typeof i&&i&&!i.nodeType&&i,s="object"==typeof e&&e&&!e.nodeType&&e,a="object"==typeof t&&t;a.global!==a&&a.window!==a&&a.self!==a||(n=a);var o,l,h=2147483647,u=36,c=1,d=26,f=38,p=700,_=72,m=128,g="-",v=/^xn--/,y=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,E={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},T=u-c,x=Math.floor,w=String.fromCharCode;function D(t){throw new RangeError(E[t])}function S(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function I(t,e){var i=t.split("@"),n="";return i.length>1&&(n=i[0]+"@",t=i[1]),n+S((t=t.replace(b,".")).split("."),e).join(".")}function A(t){for(var e,i,n=[],r=0,s=t.length;r<s;)(e=t.charCodeAt(r++))>=55296&&e<=56319&&r<s?56320==(64512&(i=t.charCodeAt(r++)))?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),r--):n.push(e);return n}function P(t){return S(t,function(t){var e="";return t>65535&&(e+=w((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=w(t)}).join("")}function C(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function M(t,e,i){var n=0;for(t=i?x(t/p):t>>1,t+=x(t/e);t>T*d>>1;n+=u)t=x(t/T);return x(n+(T+1)*t/(t+f))}function O(t){var e,i,n,r,s,a,o,l,f,p,v,y=[],b=t.length,E=0,T=m,w=_;for((i=t.lastIndexOf(g))<0&&(i=0),n=0;n<i;++n)t.charCodeAt(n)>=128&&D("not-basic"),y.push(t.charCodeAt(n));for(r=i>0?i+1:0;r<b;){for(s=E,a=1,o=u;r>=b&&D("invalid-input"),((l=(v=t.charCodeAt(r++))-48<10?v-22:v-65<26?v-65:v-97<26?v-97:u)>=u||l>x((h-E)/a))&&D("overflow"),E+=l*a,!(l<(f=o<=w?c:o>=w+d?d:o-w));o+=u)a>x(h/(p=u-f))&&D("overflow"),a*=p;w=M(E-s,e=y.length+1,0==s),x(E/e)>h-T&&D("overflow"),T+=x(E/e),E%=e,y.splice(E++,0,T)}return P(y)}function L(t){var e,i,n,r,s,a,o,l,f,p,v,y,b,E,T,S=[];for(y=(t=A(t)).length,e=m,i=0,s=_,a=0;a<y;++a)(v=t[a])<128&&S.push(w(v));for(n=r=S.length,r&&S.push(g);n<y;){for(o=h,a=0;a<y;++a)(v=t[a])>=e&&v<o&&(o=v);for(o-e>x((h-i)/(b=n+1))&&D("overflow"),i+=(o-e)*b,e=o,a=0;a<y;++a)if((v=t[a])<e&&++i>h&&D("overflow"),v==e){for(l=i,f=u;!(l<(p=f<=s?c:f>=s+d?d:f-s));f+=u)T=l-p,E=u-p,S.push(w(C(p+T%E,0))),l=x(T/E);S.push(w(C(l,0))),s=M(i,b,n==r),i=0,++n}++i,++e}return S.join("")}if(o={version:"1.4.1",ucs2:{decode:A,encode:P},decode:O,encode:L,toASCII:function(t){return I(t,function(t){return y.test(t)?"xn--"+L(t):t})},toUnicode:function(t){return I(t,function(t){return v.test(t)?O(t.slice(4).toLowerCase()):t})}},r&&s)if(e.exports==r)s.exports=o;else for(l in o)o.hasOwnProperty(l)&&(r[l]=o[l]);else n.punycode=o}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],25:[function(t,e,i){"use strict";e.exports=function(t,e,i,r){e=e||"&",i=i||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var o=1e3;r&&"number"==typeof r.maxKeys&&(o=r.maxKeys);var l,h,u=t.length;o>0&&u>o&&(u=o);for(var c=0;c<u;++c){var d,f,p,_,m=t[c].replace(a,"%20"),g=m.indexOf(i);g>=0?(d=m.substr(0,g),f=m.substr(g+1)):(d=m,f=""),p=decodeURIComponent(d),_=decodeURIComponent(f),l=s,h=p,Object.prototype.hasOwnProperty.call(l,h)?n(s[p])?s[p].push(_):s[p]=[s[p],_]:s[p]=_}return s};var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],26:[function(t,e,i){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,i,o){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?s(a(t),function(a){var o=encodeURIComponent(n(a))+i;return r(t[a])?s(t[a],function(t){return o+encodeURIComponent(n(t))}).join(e):o+encodeURIComponent(n(t[a]))}).join(e):o?encodeURIComponent(n(o))+i+encodeURIComponent(n(t)):""};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function s(t,e){if(t.map)return t.map(e);for(var i=[],n=0;n<t.length;n++)i.push(e(t[n],n));return i}var a=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},{}],27:[function(t,e,i){"use strict";i.decode=i.parse=t("./decode"),i.encode=i.stringify=t("./encode")},{"./decode":25,"./encode":26}],28:[function(t,e,i){"use strict";var n=t("punycode"),r=t("./util");function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}i.parse=y,i.resolve=function(t,e){return y(t,!1,!0).resolve(e)},i.resolveObject=function(t,e){return t?y(t,!1,!0).resolveObject(e):e},i.format=function(t){r.isString(t)&&(t=y(t));return t instanceof s?t.format():s.prototype.format.call(t)},i.Url=s;var a=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,h=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(h),c=["%","/","?",";","#"].concat(u),d=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,_={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=t("querystring");function y(t,e,i){if(t&&r.isObject(t)&&t instanceof s)return t;var n=new s;return n.parse(t,e,i),n}s.prototype.parse=function(t,e,i){if(!r.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var s=t.indexOf("?"),o=-1!==s&&s<t.indexOf("#")?"?":"#",h=t.split(o);h[0]=h[0].replace(/\\/g,"/");var y=t=h.join(o);if(y=y.trim(),!i&&1===t.split("#").length){var b=l.exec(y);if(b)return this.path=y,this.href=y,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?v.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var E=a.exec(y);if(E){var T=(E=E[0]).toLowerCase();this.protocol=T,y=y.substr(E.length)}if(i||E||y.match(/^\/\/[^@\/]+@[^@\/]+/)){var x="//"===y.substr(0,2);!x||E&&m[E]||(y=y.substr(2),this.slashes=!0)}if(!m[E]&&(x||E&&!g[E])){for(var w,D,S=-1,I=0;I<d.length;I++){-1!==(A=y.indexOf(d[I]))&&(-1===S||A<S)&&(S=A)}-1!==(D=-1===S?y.lastIndexOf("@"):y.lastIndexOf("@",S))&&(w=y.slice(0,D),y=y.slice(D+1),this.auth=decodeURIComponent(w)),S=-1;for(I=0;I<c.length;I++){var A;-1!==(A=y.indexOf(c[I]))&&(-1===S||A<S)&&(S=A)}-1===S&&(S=y.length),this.host=y.slice(0,S),y=y.slice(S),this.parseHost(),this.hostname=this.hostname||"";var P="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!P)for(var C=this.hostname.split(/\./),M=(I=0,C.length);I<M;I++){var O=C[I];if(O&&!O.match(f)){for(var L="",R=0,k=O.length;R<k;R++)O.charCodeAt(R)>127?L+="x":L+=O[R];if(!L.match(f)){var H=C.slice(0,I),F=C.slice(I+1),N=O.match(p);N&&(H.push(N[1]),F.unshift(N[2])),F.length&&(y="/"+F.join(".")+y),this.hostname=H.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),P||(this.hostname=n.toASCII(this.hostname));var j=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+j,this.href+=this.host,P&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==y[0]&&(y="/"+y))}if(!_[T])for(I=0,M=u.length;I<M;I++){var U=u[I];if(-1!==y.indexOf(U)){var X=encodeURIComponent(U);X===U&&(X=escape(U)),y=y.split(U).join(X)}}var G=y.indexOf("#");-1!==G&&(this.hash=y.substr(G),y=y.slice(0,G));var V=y.indexOf("?");if(-1!==V?(this.search=y.substr(V),this.query=y.substr(V+1),e&&(this.query=v.parse(this.query)),y=y.slice(0,V)):e&&(this.search="",this.query={}),y&&(this.pathname=y),g[T]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){j=this.pathname||"";var W=this.search||"";this.path=j+W}return this.href=this.format(),this},s.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",n=this.hash||"",s=!1,a="";this.host?s=t+this.host:this.hostname&&(s=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&r.isObject(this.query)&&Object.keys(this.query).length&&(a=v.stringify(this.query));var o=this.search||a&&"?"+a||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||g[e])&&!1!==s?(s="//"+(s||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):s||(s=""),n&&"#"!==n.charAt(0)&&(n="#"+n),o&&"?"!==o.charAt(0)&&(o="?"+o),e+s+(i=i.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(o=o.replace("#","%23"))+n},s.prototype.resolve=function(t){return this.resolveObject(y(t,!1,!0)).format()},s.prototype.resolveObject=function(t){if(r.isString(t)){var e=new s;e.parse(t,!1,!0),t=e}for(var i=new s,n=Object.keys(this),a=0;a<n.length;a++){var o=n[a];i[o]=this[o]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var l=Object.keys(t),h=0;h<l.length;h++){var u=l[h];"protocol"!==u&&(i[u]=t[u])}return g[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!g[t.protocol]){for(var c=Object.keys(t),d=0;d<c.length;d++){var f=c[d];i[f]=t[f]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||m[t.protocol])i.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),i.pathname=p.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var _=i.pathname||"",v=i.search||"";i.path=_+v}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var y=i.pathname&&"/"===i.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),E=b||y||i.host&&t.pathname,T=E,x=i.pathname&&i.pathname.split("/")||[],w=(p=t.pathname&&t.pathname.split("/")||[],i.protocol&&!g[i.protocol]);if(w&&(i.hostname="",i.port=null,i.host&&(""===x[0]?x[0]=i.host:x.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),E=E&&(""===p[0]||""===x[0])),b)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,x=p;else if(p.length)x||(x=[]),x.pop(),x=x.concat(p),i.search=t.search,i.query=t.query;else if(!r.isNullOrUndefined(t.search)){if(w)i.hostname=i.host=x.shift(),(P=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=P.shift(),i.host=i.hostname=P.shift());return i.search=t.search,i.query=t.query,r.isNull(i.pathname)&&r.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!x.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var D=x.slice(-1)[0],S=(i.host||t.host||x.length>1)&&("."===D||".."===D)||""===D,I=0,A=x.length;A>=0;A--)"."===(D=x[A])?x.splice(A,1):".."===D?(x.splice(A,1),I++):I&&(x.splice(A,1),I--);if(!E&&!T)for(;I--;I)x.unshift("..");!E||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),S&&"/"!==x.join("/").substr(-1)&&x.push("");var P,C=""===x[0]||x[0]&&"/"===x[0].charAt(0);w&&(i.hostname=i.host=C?"":x.length?x.shift():"",(P=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=P.shift(),i.host=i.hostname=P.shift()));return(E=E||i.host&&x.length)&&!C&&x.unshift(""),x.length?i.pathname=x.join("/"):(i.pathname=null,i.path=null),r.isNull(i.pathname)&&r.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},s.prototype.parseHost=function(){var t=this.host,e=o.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{"./util":29,punycode:24,querystring:27}],29:[function(t,e,i){"use strict";e.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},{}],30:[function(t,e,i){"use strict";i.__esModule=!0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=l(t("mini-signals")),s=l(t("parse-uri")),a=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t("./async")),o=l(t("./Resource"));function l(t){return t&&t.__esModule?t:{default:t}}var h=/(#[\w\-]+)?$/,u=function(){function t(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.baseUrl=i,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._boundLoadResource=function(t,i){return e._loadResource(t,i)},this._queue=a.queue(this._boundLoadResource,n),this._queue.pause(),this.resources={},this.onProgress=new r.default,this.onError=new r.default,this.onLoad=new r.default,this.onStart=new r.default,this.onComplete=new r.default}return t.prototype.add=function(t,e,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;++s)this.add(t[s]);return this}if("object"===(void 0===t?"undefined":n(t))&&(r=e||t.callback||t.onComplete,i=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(r=i,i=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof i&&(r=i,i=null),this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new o.default(t,e,i),"function"==typeof r&&this.resources[t].onAfterMiddleware.once(r),this.loading){var a=i.parentResource,l=a.progressChunk*(a.children.length+1)/(a.children.length+2);a.children.push(this.resources[t]),a.progressChunk=l;for(var h=0;h<a.children.length;++h)a.children[h].progressChunk=l}return this._queue.push(this.resources[t]),this},t.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},t.prototype.use=function(t){return this._afterMiddleware.push(t),this},t.prototype.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},t.prototype.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;for(var e=100/this._queue._tasks.length,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=e;return this.loading=!0,this.onStart.dispatch(this),this._queue.resume(),this},t.prototype._prepareUrl=function(t){var e=(0,s.default)(t,{strictMode:!0}),i=void 0;if(i=e.protocol||!e.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var n=h.exec(i)[0];-1!==(i=i.substr(0,i.length-n.length)).indexOf("?")?i+="&"+this.defaultQueryString:i+="?"+this.defaultQueryString,i+=n}return i},t.prototype._loadResource=function(t,e){var i=this;t._dequeue=e,a.eachSeries(this._beforeMiddleware,function(e,n){e.call(i,t,function(){n(t.isComplete?{}:null)})},function(){t.isComplete?i._onLoad(t):(t._onLoadBinding=t.onComplete.once(i._onLoad,i),t.load())})},t.prototype._onComplete=function(){this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(t){var e=this;t._onLoadBinding=null,a.eachSeries(this._afterMiddleware,function(i,n){i.call(e,t,n)},function(){t.onAfterMiddleware.dispatch(t),e.progress+=t.progressChunk,e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),t._dequeue(),e._queue.idle()&&(e.progress=100,e._onComplete())})},t}();i.default=u},{"./Resource":31,"./async":32,"mini-signals":36,"parse-uri":37}],31:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=a(t("parse-uri")),s=a(t("mini-signals"));function a(t){return t&&t.__esModule?t:{default:t}}var o=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),l=null;function h(){}var u=function(){function t(e,i,n){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"string"!=typeof e||"string"!=typeof i)throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===i.indexOf("data:")),this.name=e,this.url=i,this.data=null,this.crossOrigin=!0===n.crossOrigin?"anonymous":n.crossOrigin,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=h,this._onLoadBinding=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this),this.onStart=new s.default,this.onProgress=new s.default,this.onComplete=new s.default,this.onAfterMiddleware=new s.default}return t.setExtensionLoadType=function(e,i){c(t._loadTypeMap,e,i)},t.setExtensionXhrType=function(e,i){c(t._xhrTypeMap,e,i)},t.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},t.prototype.load=function(e){var i=this;if(!this.isLoading)if(this.isComplete)e&&setTimeout(function(){return e(i)},1);else switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:o&&this.crossOrigin?this._loadXdr():this._loadXhr()}},t.prototype._hasFlag=function(t){return!!(this._flags&t)},t.prototype._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},t.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=0;e<this.url.length;++e)this.data.appendChild(this._createSource(t,this.url[e]));else this.data.appendChild(this._createSource(t,this.url));this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()}else this.abort("Unsupported element: "+t)},t.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},t.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXdrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},t.prototype._createSource=function(t,e,i){i||(i=t+"/"+e.substr(e.lastIndexOf(".")+1));var n=document.createElement("source");return n.src=e,n.type=i,n},t.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},t.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},t.prototype._xhrOnError=function(){var t=this.xhr;this.abort(d(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},t.prototype._xhrOnAbort=function(){this.abort(d(this.xhr)+" Request was aborted by the user.")},t.prototype._xdrOnTimeout=function(){this.abort(d(this.xhr)+" Request timed out.")},t.prototype._xhrOnLoad=function(){var e=this.xhr,i=void 0===e.status?e.status:200;if(200===i||204===i||0===i&&e.responseText.length>0){if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=e.responseText,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(e.responseText),this.type=t.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var n=new DOMParser;this.data=n.parseFromString(e.responseText,"text/xml")}else{var r=document.createElement("div");r.innerHTML=e.responseText,this.data=r}this.type=t.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||e.responseText;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},t.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";e=e||window.location,l||(l=document.createElement("a")),l.href=t;var i=!(t=(0,r.default)(l.href,{strictMode:!0})).port&&""===e.port||t.port===e.port,n=t.protocol?t.protocol+":":"";return t.host===e.hostname&&i&&n===e.protocol?"":"anonymous"},t.prototype._determineXhrType=function(){return t._xhrTypeMap[this._getExtension()]||t.XHR_RESPONSE_TYPE.TEXT},t.prototype._determineLoadType=function(){return t._loadTypeMap[this._getExtension()]||t.LOAD_TYPE.XHR},t.prototype._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var i=t.indexOf("/");e=t.substring(i+1,t.indexOf(";",i))}else{var n=t.indexOf("?");-1!==n&&(t=t.substring(0,n)),e=t.substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},t.prototype._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},n(t,[{key:"isDataUrl",get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)}}]),t}();function c(t,e,i){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=i)}function d(t){return t.toString().replace("object ","")}i.default=u,u.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},u.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},u.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},u.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},u._loadTypeMap={gif:u.LOAD_TYPE.IMAGE,png:u.LOAD_TYPE.IMAGE,bmp:u.LOAD_TYPE.IMAGE,jpg:u.LOAD_TYPE.IMAGE,jpeg:u.LOAD_TYPE.IMAGE,tif:u.LOAD_TYPE.IMAGE,tiff:u.LOAD_TYPE.IMAGE,webp:u.LOAD_TYPE.IMAGE,tga:u.LOAD_TYPE.IMAGE,svg:u.LOAD_TYPE.IMAGE,"svg+xml":u.LOAD_TYPE.IMAGE,mp3:u.LOAD_TYPE.AUDIO,ogg:u.LOAD_TYPE.AUDIO,wav:u.LOAD_TYPE.AUDIO,mp4:u.LOAD_TYPE.VIDEO,webm:u.LOAD_TYPE.VIDEO},u._xhrTypeMap={xhtml:u.XHR_RESPONSE_TYPE.DOCUMENT,html:u.XHR_RESPONSE_TYPE.DOCUMENT,htm:u.XHR_RESPONSE_TYPE.DOCUMENT,xml:u.XHR_RESPONSE_TYPE.DOCUMENT,tmx:u.XHR_RESPONSE_TYPE.DOCUMENT,svg:u.XHR_RESPONSE_TYPE.DOCUMENT,tsx:u.XHR_RESPONSE_TYPE.DOCUMENT,gif:u.XHR_RESPONSE_TYPE.BLOB,png:u.XHR_RESPONSE_TYPE.BLOB,bmp:u.XHR_RESPONSE_TYPE.BLOB,jpg:u.XHR_RESPONSE_TYPE.BLOB,jpeg:u.XHR_RESPONSE_TYPE.BLOB,tif:u.XHR_RESPONSE_TYPE.BLOB,tiff:u.XHR_RESPONSE_TYPE.BLOB,webp:u.XHR_RESPONSE_TYPE.BLOB,tga:u.XHR_RESPONSE_TYPE.BLOB,json:u.XHR_RESPONSE_TYPE.JSON,text:u.XHR_RESPONSE_TYPE.TEXT,txt:u.XHR_RESPONSE_TYPE.TEXT,ttf:u.XHR_RESPONSE_TYPE.BUFFER,otf:u.XHR_RESPONSE_TYPE.BUFFER},u.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="},{"mini-signals":36,"parse-uri":37}],32:[function(t,e,i){"use strict";function n(){}function r(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}i.__esModule=!0,i.eachSeries=function(t,e,i){var n=0,r=t.length;!function s(a){a||n===r?i&&i(a):e(t[n++],s)}()},i.queue=function(t,e){if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var i=0,s={_tasks:[],concurrency:e,saturated:n,unsaturated:n,buffer:e/4,empty:n,drain:n,error:n,started:!1,paused:!1,push:function(t,e){a(t,!1,e)},kill:function(){i=0,s.drain=n,s.started=!1,s._tasks=[]},unshift:function(t,e){a(t,!0,e)},process:function(){for(;!s.paused&&i<s.concurrency&&s._tasks.length;){var e=s._tasks.shift();0===s._tasks.length&&s.empty(),(i+=1)===s.concurrency&&s.saturated(),t(e.data,r(o(e)))}},length:function(){return s._tasks.length},running:function(){return i},idle:function(){return s._tasks.length+i===0},pause:function(){!0!==s.paused&&(s.paused=!0)},resume:function(){if(!1!==s.paused){s.paused=!1;for(var t=1;t<=s.concurrency;t++)s.process()}}};function a(t,e,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");if(s.started=!0,null==t&&s.idle())setTimeout(function(){return s.drain()},1);else{var r={data:t,callback:"function"==typeof i?i:n};e?s._tasks.unshift(r):s._tasks.push(r),setTimeout(function(){return s.process()},1)}}function o(t){return function(){i-=1,t.callback.apply(t,arguments),null!=arguments[0]&&s.error(arguments[0],t.data),i<=s.concurrency-s.buffer&&s.unsaturated(),s.idle()&&s.drain(),s.process()}}return s}},{}],33:[function(t,e,i){"use strict";i.__esModule=!0,i.encodeBinary=function(t){var e="",i=0;for(;i<t.length;){for(var r=[0,0,0],s=[0,0,0,0],a=0;a<r.length;++a)i<t.length?r[a]=255&t.charCodeAt(i++):r[a]=0;s[0]=r[0]>>2,s[1]=(3&r[0])<<4|r[1]>>4,s[2]=(15&r[1])<<2|r[2]>>6,s[3]=63&r[2];var o=i-(t.length-1);switch(o){case 2:s[3]=64,s[2]=64;break;case 1:s[3]=64}for(var l=0;l<s.length;++l)e+=n.charAt(s[l])}return e};var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},{}],34:[function(t,e,i){"use strict";i.__esModule=!0;var n=l(t("./Loader")),r=l(t("./Resource")),s=o(t("./async")),a=o(t("./b64"));function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function l(t){return t&&t.__esModule?t:{default:t}}n.default.Resource=r.default,n.default.async=s,n.default.base64=a,e.exports=n.default,i.default=n.default},{"./Loader":30,"./Resource":31,"./async":32,"./b64":33}],35:[function(t,e,i){"use strict";i.__esModule=!0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};i.blobMiddlewareFactory=function(){return function(t,e){if(t.data){if(t.xhr&&t.xhrType===r.default.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var i=(l=o.createObjectURL(t.data),t.blob=t.data,t.data=new Image,t.data.src=l,t.type=r.default.TYPE.IMAGE,t.data.onload=function(){o.revokeObjectURL(l),t.data.onload=null,e()},{v:void 0});if("object"===(void 0===i?"undefined":n(i)))return i.v}}else{var a=t.xhr.getResponseHeader("content-type");if(a&&0===a.indexOf("image"))return t.data=new Image,t.data.src="data:"+a+";base64,"+s.default.encodeBinary(t.xhr.responseText),t.type=r.default.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}var l;e()}else e()}};var r=a(t("../../Resource")),s=a(t("../../b64"));function a(t){return t&&t.__esModule?t:{default:t}}var o=window.URL||window.webkitURL},{"../../Resource":31,"../../b64":33}],36:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(e,i,n){void 0===i&&(i=!1),r(this,t),this._fn=e,this._once=i,this._thisArg=n,this._next=this._prev=this._owner=null}return n(t,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),t}();function a(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var o=function(){function t(){r(this,t),this._head=this._tail=void 0}return n(t,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var i=[];e;)i.push(e),e=e._next;return i}},{key:"has",value:function(t){if(!(t instanceof s))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return a(this,new s(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return a(this,new s(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof s))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this?this:(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this)}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();o.MiniSignalBinding=s,i.default=o,e.exports=i.default},{}],37:[function(t,e,i){"use strict";e.exports=function(t,e){e=e||{};for(var i={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=i.parser[e.strictMode?"strict":"loose"].exec(t),r={},s=14;s--;)r[i.key[s]]=n[s]||"";return r[i.q.name]={},r[i.key[12]].replace(i.q.parser,function(t,e,n){e&&(r[i.q.name][e]=n)}),r}},{}],38:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t("../core")),r=a(t("ismobilejs")),s=a(t("./accessibleTarget"));function a(t){return t&&t.__esModule?t:{default:t}}Object.assign(n.DisplayObject.prototype,s.default);var o=100,l=0,h=0,u=2,c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!r.default.tablet&&!r.default.phone||navigator.isCocoonJS||this.createTouchHook();var i=document.createElement("div");i.style.width=o+"px",i.style.height=o+"px",i.style.position="absolute",i.style.top=l+"px",i.style.left=h+"px",i.style.zIndex=u,this.div=i,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=e,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return t.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2,e.style.backgroundColor="#FF0000",e.title="HOOK DIV",e.addEventListener("focus",function(){t.isMobileAccessabillity=!0,t.activate(),document.body.removeChild(e)}),document.body.appendChild(e)},t.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},t.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(t){if(t.visible){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,i=e.length-1;i>=0;i--)this.updateAccessibleObjects(e[i])}},t.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),e=t.width/this.renderer.width,i=t.height/this.renderer.height,r=this.div;r.style.left=t.left+"px",r.style.top=t.top+"px",r.style.width=this.renderer.width+"px",r.style.height=this.renderer.height+"px";for(var s=0;s<this.children.length;s++){var a=this.children[s];if(a.renderId!==this.renderId)a._accessibleActive=!1,n.utils.removeItems(this.children,s,1),this.div.removeChild(a._accessibleDiv),this.pool.push(a._accessibleDiv),a._accessibleDiv=null,s--,0===this.children.length&&this.deactivate();else{r=a._accessibleDiv;var o=a.hitArea,l=a.worldTransform;a.hitArea?(r.style.left=(l.tx+o.x*l.a)*e+"px",r.style.top=(l.ty+o.y*l.d)*i+"px",r.style.width=o.width*l.a*e+"px",r.style.height=o.height*l.d*i+"px"):(o=a.getBounds(),this.capHitArea(o),r.style.left=o.x*e+"px",r.style.top=o.y*i+"px",r.style.width=o.width*e+"px",r.style.height=o.height*i+"px")}}this.renderId++}},t.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},t.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width=o+"px",e.style.height=o+"px",e.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=u,e.style.borderStyle="none",e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleTitle||t.accessibleHint||(e.title="displayObject "+this.tabIndex),t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},t.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData)},t.prototype._onFocus=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},t.prototype._onFocusOut=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},t.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},t.prototype._onMouseMove=function(){this.deactivate()},t.prototype.destroy=function(){this.div=null;for(var t=0;t<this.children.length;t++)this.children[t].div=null;window.document.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t}();i.default=c,n.WebGLRenderer.registerPlugin("accessibility",c),n.CanvasRenderer.registerPlugin("accessibility",c)},{"../core":61,"./accessibleTarget":39,ismobilejs:4}],39:[function(t,e,i){"use strict";i.__esModule=!0,i.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},{}],40:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("./accessibleTarget");Object.defineProperty(i,"accessibleTarget",{enumerable:!0,get:function(){return s(n).default}});var r=t("./AccessibilityManager");function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(i,"AccessibilityManager",{enumerable:!0,get:function(){return s(r).default}})},{"./AccessibilityManager":38,"./accessibleTarget":39}],41:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=t("pixi-gl-core"),s=t("./settings");var a=((n=s)&&n.__esModule?n:{default:n}).default.PRECISION;function o(t){if(t instanceof Array){if("precision"!==t[0].substring(0,9)){var e=t.slice(0);return e.unshift("precision "+a+" float;"),e}}else if("precision"!==t.substring(0,9))return"precision "+a+" float;\n"+t;return t}var l=function(t){function e(i,n,r){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,o(n),o(r)))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(r.GLShader);i.default=l},{"./settings":97,"pixi-gl-core":12}],42:[function(t,e,i){"use strict";i.__esModule=!0;i.VERSION="4.3.2",i.PI_2=2*Math.PI,i.RAD_TO_DEG=180/Math.PI,i.DEG_TO_RAD=Math.PI/180,i.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},i.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},i.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},i.SCALE_MODES={LINEAR:0,NEAREST:1},i.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},i.GC_MODES={AUTO:0,MANUAL:1},i.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,i.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;(charset=[\w-]+|base64))?,(.*)/i,i.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,i.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},i.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},i.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},i.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1}},{}],43:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("../math");var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?n.Rectangle.EMPTY:((t=t||new n.Rectangle(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addQuad=function(t){var e=this.minX,i=this.minY,n=this.maxX,r=this.maxY,s=t[0],a=t[1];e=s<e?s:e,i=a<i?a:i,n=s>n?s:n,r=a>r?a:r,s=t[2],a=t[3],e=s<e?s:e,i=a<i?a:i,n=s>n?s:n,r=a>r?a:r,s=t[4],a=t[5],e=s<e?s:e,i=a<i?a:i,n=s>n?s:n,r=a>r?a:r,s=t[6],a=t[7],e=s<e?s:e,i=a<i?a:i,n=s>n?s:n,r=a>r?a:r,this.minX=e,this.minY=i,this.maxX=n,this.maxY=r},t.prototype.addFrame=function(t,e,i,n,r){var s=t.worldTransform,a=s.a,o=s.b,l=s.c,h=s.d,u=s.tx,c=s.ty,d=this.minX,f=this.minY,p=this.maxX,_=this.maxY,m=a*e+l*i+u,g=o*e+h*i+c;d=m<d?m:d,f=g<f?g:f,p=m>p?m:p,_=g>_?g:_,g=o*n+h*i+c,d=(m=a*n+l*i+u)<d?m:d,f=g<f?g:f,p=m>p?m:p,_=g>_?g:_,g=o*e+h*r+c,d=(m=a*e+l*r+u)<d?m:d,f=g<f?g:f,p=m>p?m:p,_=g>_?g:_,g=o*n+h*r+c,d=(m=a*n+l*r+u)<d?m:d,f=g<f?g:f,p=m>p?m:p,_=g>_?g:_,this.minX=d,this.minY=f,this.maxX=p,this.maxY=_},t.prototype.addVertices=function(t,e,i,n){for(var r=t.worldTransform,s=r.a,a=r.b,o=r.c,l=r.d,h=r.tx,u=r.ty,c=this.minX,d=this.minY,f=this.maxX,p=this.maxY,_=i;_<n;_+=2){var m=e[_],g=e[_+1],v=s*m+o*g+h,y=l*g+a*m+u;c=v<c?v:c,d=y<d?y:d,f=v>f?v:f,p=y>p?y:p}this.minX=c,this.minY=d,this.maxX=f,this.maxY=p},t.prototype.addBounds=function(t){var e=this.minX,i=this.minY,n=this.maxX,r=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>r?t.maxY:r},t.prototype.addBoundsMask=function(t,e){var i=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,r=t.maxX<e.maxX?t.maxX:e.maxX,s=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=r&&n<=s){var a=this.minX,o=this.minY,l=this.maxX,h=this.maxY;this.minX=i<a?i:a,this.minY=n<o?n:o,this.maxX=r>l?r:l,this.maxY=s>h?s:h}},t.prototype.addBoundsArea=function(t,e){var i=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,r=t.maxX<e.x+e.width?t.maxX:e.x+e.width,s=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=r&&n<=s){var a=this.minX,o=this.minY,l=this.maxX,h=this.maxY;this.minX=i<a?i:a,this.minY=n<o?n:o,this.maxX=r>l?r:l,this.maxY=s>h?s:h}},t}();i.default=r},{"../math":66}],44:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("../utils"),a=t("./DisplayObject");var o=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return i.children=[],i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onChildrenChange=function(){},e.prototype.addChild=function(t){var e=arguments.length;if(e>1)for(var i=0;i<e;i++)this.addChild(arguments[i]);else t.parent&&t.parent.removeChild(t),t.parent=this,this.transform._parentID=-1,this._boundsID++,this.children.push(t),this.onChildrenChange(this.children.length-1),t.emit("added",this);return t},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),this.onChildrenChange(e),t.emit("added",this),t},e.prototype.swapChildren=function(t,e){if(t!==e){var i=this.getChildIndex(t),n=this.getChildIndex(e);this.children[i]=e,this.children[n]=t,this.onChildrenChange(i<n?i:n)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The supplied index is out of bounds");var i=this.getChildIndex(t);(0,s.removeItems)(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(t){var e=arguments.length;if(e>1)for(var i=0;i<e;i++)this.removeChild(arguments[i]);else{var n=this.children.indexOf(t);if(-1===n)return null;t.parent=null,(0,s.removeItems)(this.children,n,1),this.transform._parentID=-1,this._boundsID++,this.onChildrenChange(n),t.emit("removed",this)}return t},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,(0,s.removeItems)(this.children,t,1),this.onChildrenChange(t),e.emit("removed",this),e},e.prototype.removeChildren=function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0],e=arguments[1],i=t,n="number"==typeof e?e:this.children.length,r=n-i,s=void 0;if(r>0&&r<=n){s=this.children.splice(i,r);for(var a=0;a<s.length;++a)s[a].parent=null;this.onChildrenChange(t);for(var o=0;o<s.length;++o)s[o].emit("removed",this);return s}if(0===r&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var i=this.children[t];i.visible&&i.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];e.visible&&e.renderable&&(e.calculateBounds(),e._mask?(e._mask.calculateBounds(),this._bounds.addBoundsMask(e._bounds,e._mask._bounds)):e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds))}this._lastBoundsID=this._boundsID},e.prototype._calculateBounds=function(){},e.prototype.renderWebGL=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(t);else{this._renderWebGL(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].renderWebGL(t)}},e.prototype.renderAdvancedWebGL=function(t){t.flush();var e=this._filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var n=0;n<e.length;n++)e[n].enabled&&this._enabledFilters.push(e[n]);this._enabledFilters.length&&t.filterManager.pushFilter(this,this._enabledFilters)}i&&t.maskManager.pushMask(this,this._mask),this._renderWebGL(t);for(var r=0,s=this.children.length;r<s;r++)this.children[r].renderWebGL(t);t.flush(),i&&t.maskManager.popMask(this,this._mask),e&&this._enabledFilters&&this._enabledFilters.length&&t.filterManager.popFilter()},e.prototype._renderWebGL=function(t){},e.prototype._renderCanvas=function(t){},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&t.maskManager.pushMask(this._mask),this._renderCanvas(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},e.prototype.destroy=function(e){t.prototype.destroy.call(this);var i="boolean"==typeof e?e:e&&e.children,n=this.removeChildren(0,this.children.length);if(i)for(var r=0;r<n.length;++r)n[r].destroy(e)},r(e,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}}]),e}(((n=a)&&n.__esModule?n:{default:n}).default);i.default=o,o.prototype.containerUpdateTransform=o.prototype.updateTransform},{"../utils":117,"./DisplayObject":45}],45:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=c(t("eventemitter3")),s=t("../const"),a=c(t("../settings")),o=c(t("./TransformStatic")),l=c(t("./Transform")),h=c(t("./Bounds")),u=t("../math");function c(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this)),n=a.default.TRANSFORM_MODE===s.TRANSFORM_MODE.STATIC?o.default:l.default;return i.tempDisplayObjectParent=null,i.transform=new n,i.alpha=1,i.visible=!0,i.renderable=!0,i.parent=null,i.worldAlpha=1,i.filterArea=null,i._filters=null,i._enabledFilters=null,i._bounds=new h.default,i._boundsID=0,i._lastBoundsID=-1,i._boundsRect=null,i._localBoundsRect=null,i._mask=null,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),e||(this._boundsRect||(this._boundsRect=new u.Rectangle),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){var e=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,t||(this._localBoundsRect||(this._localBoundsRect=new u.Rectangle),t=this._localBoundsRect);var n=this.getBounds(!1,t);return this.parent=i,this.transform=e,n},e.prototype.toGlobal=function(t,e){return!(arguments.length<=2||void 0===arguments[2])&&arguments[2]||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,i,n){return e&&(t=e.toGlobal(t,i,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},e.prototype.renderWebGL=function(t){},e.prototype.renderCanvas=function(t){},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0],e=arguments.length<=1||void 0===arguments[1]?0:arguments[1],i=arguments.length<=2||void 0===arguments[2]?1:arguments[2],n=arguments.length<=3||void 0===arguments[3]?1:arguments[3],r=arguments.length<=4||void 0===arguments[4]?0:arguments[4],s=arguments.length<=5||void 0===arguments[5]?0:arguments[5],a=arguments.length<=6||void 0===arguments[6]?0:arguments[6],o=arguments.length<=7||void 0===arguments[7]?0:arguments[7],l=arguments.length<=8||void 0===arguments[8]?0:arguments[8];return this.position.x=t,this.position.y=e,this.scale.x=i||1,this.scale.y=n||1,this.rotation=r,this.skew.x=s,this.skew.y=a,this.pivot.x=o,this.pivot.y=l,this},e.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1},n(e,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new e),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(t){this.transform.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){this.transform.position.y=t}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(t){this.transform.position.copy(t)}},{key:"scale",get:function(){return this.transform.scale},set:function(t){this.transform.scale.copy(t)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copy(t)}},{key:"skew",get:function(){return this.transform.skew},set:function(t){this.transform.skew.copy(t)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t}},{key:"worldVisible",get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}},{key:"mask",get:function(){return this._mask},set:function(t){this._mask&&(this._mask.renderable=!0),this._mask=t,this._mask&&(this._mask.renderable=!1)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}]),e}(r.default);i.default=d,d.prototype.displayObjectUpdateTransform=d.prototype.updateTransform},{"../const":42,"../math":66,"../settings":97,"./Bounds":43,"./Transform":46,"./TransformStatic":48,eventemitter3:3}],46:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("../math"),a=t("./TransformBase");var o=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return i.position=new s.Point(0,0),i.scale=new s.Point(1,1),i.skew=new s.ObservablePoint(i.updateSkew,i,0,0),i.pivot=new s.Point(0,0),i._rotation=0,i._cx=1,i._sx=0,i._cy=0,i._sy=1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},e.prototype.updateLocalTransform=function(){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d)},e.prototype.updateTransform=function(t){var e=this.localTransform;e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d);var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._worldID++},e.prototype.setFromMatrix=function(t){t.decompose(this)},r(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),e}(((n=a)&&n.__esModule?n:{default:n}).default);i.default=o},{"../math":66,"./TransformBase":47}],47:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("../math");var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.worldTransform=new n.Matrix,this.localTransform=new n.Matrix,this._worldID=0,this._parentID=0}return t.prototype.updateLocalTransform=function(){},t.prototype.updateTransform=function(t){var e=t.worldTransform,i=this.worldTransform,n=this.localTransform;i.a=n.a*e.a+n.b*e.c,i.b=n.a*e.b+n.b*e.d,i.c=n.c*e.a+n.d*e.c,i.d=n.c*e.b+n.d*e.d,i.tx=n.tx*e.a+n.ty*e.c+e.tx,i.ty=n.tx*e.b+n.ty*e.d+e.ty,this._worldID++},t}();i.default=r,r.prototype.updateWorldTransform=r.prototype.updateTransform,r.IDENTITY=new r},{"../math":66}],48:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("../math"),a=t("./TransformBase");var o=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return i.position=new s.ObservablePoint(i.onChange,i,0,0),i.scale=new s.ObservablePoint(i.onChange,i,1,1),i.pivot=new s.ObservablePoint(i.onChange,i,0,0),i.skew=new s.ObservablePoint(i.updateSkew,i,0,0),i._rotation=0,i._cx=1,i._sx=0,i._cy=0,i._sy=1,i._localID=0,i._currentLocalID=0,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},e.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},e.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},r(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),e}(((n=a)&&n.__esModule?n:{default:n}).default);i.default=o},{"../math":66,"./TransformBase":47}],49:[function(t,e,i){"use strict";i.__esModule=!0;var n=p(t("../display/Container")),r=p(t("../textures/RenderTexture")),s=p(t("../textures/Texture")),a=p(t("./GraphicsData")),o=p(t("../sprites/Sprite")),l=t("../math"),h=t("../utils"),u=t("../const"),c=p(t("../display/Bounds")),d=p(t("./utils/bezierCurveTo")),f=p(t("../renderers/canvas/CanvasRenderer"));function p(t){return t&&t.__esModule?t:{default:t}}var _=void 0,m=new l.Matrix,g=new l.Point,v=new Float32Array(4),y=new Float32Array(4),b=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return i.fillAlpha=1,i.lineWidth=0,i.lineColor=0,i.graphicsData=[],i.tint=16777215,i._prevTint=16777215,i.blendMode=u.BLEND_MODES.NORMAL,i.currentPath=null,i._webGL={},i.isMask=!1,i.boundsPadding=0,i._localBounds=new c.default,i.dirty=0,i.fastRectDirty=-1,i.clearDirty=0,i.boundsDirty=-1,i.cachedSpriteDirty=!1,i._spriteRect=null,i._fastRect=!1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.clone=function(){var t=new e;t.renderable=this.renderable,t.fillAlpha=this.fillAlpha,t.lineWidth=this.lineWidth,t.lineColor=this.lineColor,t.tint=this.tint,t.blendMode=this.blendMode,t.isMask=this.isMask,t.boundsPadding=this.boundsPadding,t.dirty=0,t.cachedSpriteDirty=this.cachedSpriteDirty;for(var i=0;i<this.graphicsData.length;++i)t.graphicsData.push(this.graphicsData[i].clone());return t.currentPath=t.graphicsData[t.graphicsData.length-1],t.updateLocalBounds(),t},e.prototype.lineStyle=function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0],e=arguments.length<=1||void 0===arguments[1]?0:arguments[1],i=arguments.length<=2||void 0===arguments[2]?1:arguments[2];if(this.lineWidth=t,this.lineColor=e,this.lineAlpha=i,this.currentPath)if(this.currentPath.shape.points.length){var n=new l.Polygon(this.currentPath.shape.points.slice(-2));n.closed=!1,this.drawShape(n)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},e.prototype.moveTo=function(t,e){var i=new l.Polygon([t,e]);return i.closed=!1,this.drawShape(i),this},e.prototype.lineTo=function(t,e){return this.currentPath.shape.points.push(t,e),this.dirty++,this},e.prototype.quadraticCurveTo=function(t,e,i,n){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var r=this.currentPath.shape.points,s=0,a=0;0===r.length&&this.moveTo(0,0);for(var o=r[r.length-2],l=r[r.length-1],h=1;h<=20;++h){var u=h/20;s=o+(t-o)*u,a=l+(e-l)*u,r.push(s+(t+(i-t)*u-s)*u,a+(e+(n-e)*u-a)*u)}return this.dirty++,this},e.prototype.bezierCurveTo=function(t,e,i,n,r,s){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var a=this.currentPath.shape.points,o=a[a.length-2],l=a[a.length-1];return a.length-=2,(0,d.default)(o,l,t,e,i,n,r,s,a),this.dirty++,this},e.prototype.arcTo=function(t,e,i,n,r){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var s=this.currentPath.shape.points,a=s[s.length-2],o=s[s.length-1]-e,l=a-t,h=n-e,u=i-t,c=Math.abs(o*u-l*h);if(c<1e-8||0===r)s[s.length-2]===t&&s[s.length-1]===e||s.push(t,e);else{var d=o*o+l*l,f=h*h+u*u,p=o*h+l*u,_=r*Math.sqrt(d)/c,m=r*Math.sqrt(f)/c,g=_*p/d,v=m*p/f,y=_*u+m*l,b=_*h+m*o,E=l*(m+g),T=o*(m+g),x=u*(_+v),w=h*(_+v),D=Math.atan2(T-b,E-y),S=Math.atan2(w-b,x-y);this.arc(y+t,b+e,r,D,S,l*h>u*o)}return this.dirty++,this},e.prototype.arc=function(t,e,i,n,r){var s=!(arguments.length<=5||void 0===arguments[5])&&arguments[5];if(n===r)return this;!s&&r<=n?r+=2*Math.PI:s&&n<=r&&(n+=2*Math.PI);var a=r-n,o=40*Math.ceil(Math.abs(a)/(2*Math.PI));if(0===a)return this;var l=t+Math.cos(n)*i,h=e+Math.sin(n)*i,u=this.currentPath?this.currentPath.shape.points:null;u?u[u.length-2]===l&&u[u.length-1]===h||u.push(l,h):(this.moveTo(l,h),u=this.currentPath.shape.points);for(var c=a/(2*o),d=2*c,f=Math.cos(c),p=Math.sin(c),_=o-1,m=_%1/_,g=0;g<=_;++g){var v=c+n+d*(g+m*g),y=Math.cos(v),b=-Math.sin(v);u.push((f*y+p*b)*i+t,(f*-b+p*y)*i+e)}return this.dirty++,this},e.prototype.beginFill=function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0],e=arguments.length<=1||void 0===arguments[1]?1:arguments[1];return this.filling=!0,this.fillColor=t,this.fillAlpha=e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},e.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},e.prototype.drawRect=function(t,e,i,n){return this.drawShape(new l.Rectangle(t,e,i,n)),this},e.prototype.drawRoundedRect=function(t,e,i,n,r){return this.drawShape(new l.RoundedRectangle(t,e,i,n,r)),this},e.prototype.drawCircle=function(t,e,i){return this.drawShape(new l.Circle(t,e,i)),this},e.prototype.drawEllipse=function(t,e,i,n){return this.drawShape(new l.Ellipse(t,e,i,n)),this},e.prototype.drawPolygon=function(t){var e=t,i=!0;if(e instanceof l.Polygon&&(i=e.closed,e=e.points),!Array.isArray(e)){e=new Array(arguments.length);for(var n=0;n<e.length;++n)e[n]=arguments[n]}var r=new l.Polygon(e);return r.closed=i,this.drawShape(r),this},e.prototype.clear=function(){return(this.lineWidth||this.filling||this.graphicsData.length>0)&&(this.lineWidth=0,this.filling=!1,this.boundsDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},e.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===u.SHAPES.RECT&&!this.graphicsData[0].lineWidth},e.prototype._renderWebGL=function(t){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(t):(t.setObjectRenderer(t.plugins.graphics),t.plugins.graphics.render(this))},e.prototype._renderSpriteRect=function(t){var i=this.graphicsData[0].shape;if(!this._spriteRect){if(!e._SPRITE_TEXTURE){e._SPRITE_TEXTURE=r.default.create(10,10);var n=document.createElement("canvas");n.width=10,n.height=10;var a=n.getContext("2d");a.fillStyle="white",a.fillRect(0,0,10,10),e._SPRITE_TEXTURE=s.default.fromCanvas(n)}this._spriteRect=new o.default(e._SPRITE_TEXTURE)}if(16777215===this.tint)this._spriteRect.tint=this.graphicsData[0].fillColor;else{var l=v,u=y;(0,h.hex2rgb)(this.graphicsData[0].fillColor,l),(0,h.hex2rgb)(this.tint,u),l[0]*=u[0],l[1]*=u[1],l[2]*=u[2],this._spriteRect.tint=(0,h.rgb2hex)(l)}this._spriteRect.alpha=this.graphicsData[0].fillAlpha,this._spriteRect.worldAlpha=this.worldAlpha*this._spriteRect.alpha,e._SPRITE_TEXTURE._frame.width=i.width,e._SPRITE_TEXTURE._frame.height=i.height,this._spriteRect.transform.worldTransform=this.transform.worldTransform,this._spriteRect.anchor.set(-i.x/i.width,-i.y/i.height),this._spriteRect._onAnchorUpdate(),this._spriteRect._renderWebGL(t)},e.prototype._renderCanvas=function(t){!0!==this.isMask&&t.plugins.graphics.render(this)},e.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var t=this._localBounds;this._bounds.addFrame(this.transform,t.minX,t.minY,t.maxX,t.maxY)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,g);for(var e=this.graphicsData,i=0;i<e.length;++i){var n=e[i];if(n.fill&&(n.shape&&n.shape.contains(g.x,g.y)))return!0}return!1},e.prototype.updateLocalBounds=function(){var t=1/0,e=-1/0,i=1/0,n=-1/0;if(this.graphicsData.length)for(var r=0,s=0,a=0,o=0,l=0,h=0;h<this.graphicsData.length;h++){var c=this.graphicsData[h],d=c.type,f=c.lineWidth;if(r=c.shape,d===u.SHAPES.RECT||d===u.SHAPES.RREC)s=r.x-f/2,a=r.y-f/2,o=r.width+f,l=r.height+f,t=s<t?s:t,e=s+o>e?s+o:e,i=a<i?a:i,n=a+l>n?a+l:n;else if(d===u.SHAPES.CIRC)s=r.x,a=r.y,o=r.radius+f/2,l=r.radius+f/2,t=s-o<t?s-o:t,e=s+o>e?s+o:e,i=a-l<i?a-l:i,n=a+l>n?a+l:n;else if(d===u.SHAPES.ELIP)s=r.x,a=r.y,o=r.width+f/2,l=r.height+f/2,t=s-o<t?s-o:t,e=s+o>e?s+o:e,i=a-l<i?a-l:i,n=a+l>n?a+l:n;else for(var p=r.points,_=0,m=0,g=0,v=0,y=0,b=0,E=0,T=0,x=0;x+2<p.length;x+=2)s=p[x],a=p[x+1],_=p[x+2],m=p[x+3],g=Math.abs(_-s),v=Math.abs(m-a),l=f,(o=Math.sqrt(g*g+v*v))<1e-9||(b=(l/o*g+v)/2,T=(m+a)/2,t=(E=(_+s)/2)-(y=(l/o*v+g)/2)<t?E-y:t,e=E+y>e?E+y:e,i=T-b<i?T-b:i,n=T+b>n?T+b:n)}else t=0,e=0,i=0,n=0;var w=this.boundsPadding;this._localBounds.minX=t-w,this._localBounds.maxX=e+2*w,this._localBounds.minY=i-w,this._localBounds.maxY=n+2*w},e.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new a.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,t);return this.graphicsData.push(e),e.type===u.SHAPES.POLY&&(e.shape.closed=e.shape.closed||this.filling,this.currentPath=e),this.dirty++,e},e.prototype.generateCanvasTexture=function(t){var e=arguments.length<=1||void 0===arguments[1]?1:arguments[1],i=this.getLocalBounds(),n=r.default.create(i.width,i.height,t,e);_||(_=new f.default),m.tx=-i.x,m.ty=-i.y,_.render(this,n,!1,m);var a=s.default.fromCanvas(n.baseTexture._canvasRenderTarget.canvas,t);return a.baseTexture.resolution=e,a.baseTexture.update(),a},e.prototype.closePath=function(){var t=this.currentPath;return t&&t.shape&&t.shape.close(),this},e.prototype.addHole=function(){var t=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(t.shape),this.currentPath=null,this},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e);for(var i=0;i<this.graphicsData.length;++i)this.graphicsData[i].destroy();for(var n in this._webgl)for(var r=0;r<this._webgl[n].data.length;++r)this._webgl[n].data[r].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null},e}(n.default);i.default=b,b._SPRITE_TEXTURE=null},{"../const":42,"../display/Bounds":43,"../display/Container":44,"../math":66,"../renderers/canvas/CanvasRenderer":73,"../sprites/Sprite":98,"../textures/RenderTexture":108,"../textures/Texture":109,"../utils":117,"./GraphicsData":50,"./utils/bezierCurveTo":52}],50:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(e,i,n,r,s,a,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.lineWidth=e,this.lineColor=i,this.lineAlpha=n,this._lineTint=i,this.fillColor=r,this.fillAlpha=s,this._fillTint=r,this.fill=a,this.holes=[],this.shape=o,this.type=o.type}return t.prototype.clone=function(){return new t(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},t.prototype.addHole=function(t){this.holes.push(t)},t.prototype.destroy=function(){this.shape=null,this.holes=null},t}();i.default=n},{}],51:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=t("../../renderers/canvas/CanvasRenderer"),s=(n=r)&&n.__esModule?n:{default:n},a=t("../../const");var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,i=e.context,n=t.worldAlpha,r=t.transform.worldTransform,s=e.resolution;this._prevTint!==this.tint&&(this.dirty=!0),i.setTransform(r.a*s,r.b*s,r.c*s,r.d*s,r.tx*s,r.ty*s),t.dirty&&(this.updateGraphicsTint(t),t.dirty=!1),e.setBlendMode(t.blendMode);for(var o=0;o<t.graphicsData.length;o++){var l=t.graphicsData[o],h=l.shape,u=l._fillTint,c=l._lineTint;if(i.lineWidth=l.lineWidth,l.type===a.SHAPES.POLY){i.beginPath(),this.renderPolygon(h.points,h.closed,i);for(var d=0;d<l.holes.length;d++)this.renderPolygon(l.holes[d].points,!0,i);l.fill&&(i.globalAlpha=l.fillAlpha*n,i.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.fill()),l.lineWidth&&(i.globalAlpha=l.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke())}else if(l.type===a.SHAPES.RECT)(l.fillColor||0===l.fillColor)&&(i.globalAlpha=l.fillAlpha*n,i.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.fillRect(h.x,h.y,h.width,h.height)),l.lineWidth&&(i.globalAlpha=l.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.strokeRect(h.x,h.y,h.width,h.height));else if(l.type===a.SHAPES.CIRC)i.beginPath(),i.arc(h.x,h.y,h.radius,0,2*Math.PI),i.closePath(),l.fill&&(i.globalAlpha=l.fillAlpha*n,i.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.fill()),l.lineWidth&&(i.globalAlpha=l.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke());else if(l.type===a.SHAPES.ELIP){var f=2*h.width,p=2*h.height,_=h.x-f/2,m=h.y-p/2;i.beginPath();var g=f/2*.5522848,v=p/2*.5522848,y=_+f,b=m+p,E=_+f/2,T=m+p/2;i.moveTo(_,T),i.bezierCurveTo(_,T-v,E-g,m,E,m),i.bezierCurveTo(E+g,m,y,T-v,y,T),i.bezierCurveTo(y,T+v,E+g,b,E,b),i.bezierCurveTo(E-g,b,_,T+v,_,T),i.closePath(),l.fill&&(i.globalAlpha=l.fillAlpha*n,i.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.fill()),l.lineWidth&&(i.globalAlpha=l.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke())}else if(l.type===a.SHAPES.RREC){var x=h.x,w=h.y,D=h.width,S=h.height,I=h.radius,A=Math.min(D,S)/2|0;I=I>A?A:I,i.beginPath(),i.moveTo(x,w+I),i.lineTo(x,w+S-I),i.quadraticCurveTo(x,w+S,x+I,w+S),i.lineTo(x+D-I,w+S),i.quadraticCurveTo(x+D,w+S,x+D,w+S-I),i.lineTo(x+D,w+I),i.quadraticCurveTo(x+D,w,x+D-I,w),i.lineTo(x+I,w),i.quadraticCurveTo(x,w,x,w+I),i.closePath(),(l.fillColor||0===l.fillColor)&&(i.globalAlpha=l.fillAlpha*n,i.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.fill()),l.lineWidth&&(i.globalAlpha=l.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke())}}},t.prototype.updateGraphicsTint=function(t){t._prevTint=t.tint;for(var e=(t.tint>>16&255)/255,i=(t.tint>>8&255)/255,n=(255&t.tint)/255,r=0;r<t.graphicsData.length;++r){var s=t.graphicsData[r],a=0|s.fillColor,o=0|s.lineColor;s._fillTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*i*255<<8)+(255&a)/255*n*255,s._lineTint=((o>>16&255)/255*e*255<<16)+((o>>8&255)/255*i*255<<8)+(255&o)/255*n*255}},t.prototype.renderPolygon=function(t,e,i){i.moveTo(t[0],t[1]);for(var n=1;n<t.length/2;++n)i.lineTo(t[2*n],t[2*n+1]);e&&i.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();i.default=o,s.default.registerPlugin("graphics",o)},{"../../const":42,"../../renderers/canvas/CanvasRenderer":73}],52:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t,e,i,n,r,s,a,o){var l=arguments.length<=8||void 0===arguments[8]?[]:arguments[8],h=0,u=0,c=0,d=0,f=0;l.push(t,e);for(var p=1,_=0;p<=20;++p)c=(u=(h=1-(_=p/20))*h)*h,f=(d=_*_)*_,l.push(c*t+3*u*_*i+3*h*d*r+f*a,c*e+3*u*_*n+3*h*d*s+f*o);return l}},{}],53:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("../../utils"),r=t("../../const"),s=f(t("../../renderers/webgl/utils/ObjectRenderer")),a=f(t("../../renderers/webgl/WebGLRenderer")),o=f(t("./WebGLGraphicsData")),l=f(t("./shaders/PrimitiveShader")),h=f(t("./utils/buildPoly")),u=f(t("./utils/buildRectangle")),c=f(t("./utils/buildRoundedRectangle")),d=f(t("./utils/buildCircle"));function f(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return n.graphicsDataPool=[],n.primitiveShader=null,n.gl=i.gl,n.CONTEXT_UID=0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new l.default(this.gl)},e.prototype.destroy=function(){s.default.prototype.destroy.call(this);for(var t=0;t<this.graphicsDataPool.length;++t)this.graphicsDataPool[t].destroy();this.graphicsDataPool=null},e.prototype.render=function(t){var e=this.renderer,i=e.gl,r=void 0,s=t._webGL[this.CONTEXT_UID];s&&t.dirty===s.dirty||(this.updateGraphics(t),s=t._webGL[this.CONTEXT_UID]);var a=this.primitiveShader;e.bindShader(a),e.state.setBlendMode(t.blendMode);for(var o=0,l=s.data.length;o<l;o++){var h=(r=s.data[o]).shader;e.bindShader(h),h.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),h.uniforms.tint=(0,n.hex2rgb)(t.tint),h.uniforms.alpha=t.worldAlpha,e.bindVao(r.vao),r.vao.draw(i.TRIANGLE_STRIP,r.indices.length)}},e.prototype.updateGraphics=function(t){var e=this.renderer.gl,i=t._webGL[this.CONTEXT_UID];if(i||(i=t._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:e,clearDirty:-1,dirty:-1}),i.dirty=t.dirty,t.clearDirty!==i.clearDirty){i.clearDirty=t.clearDirty;for(var n=0;n<i.data.length;n++)this.graphicsDataPool.push(i.data[n]);i.data.length=0,i.lastIndex=0}for(var s=void 0,a=i.lastIndex;a<t.graphicsData.length;a++){var o=t.graphicsData[a];s=this.getWebGLData(i,0),o.type===r.SHAPES.POLY&&(0,h.default)(o,s),o.type===r.SHAPES.RECT?(0,u.default)(o,s):o.type===r.SHAPES.CIRC||o.type===r.SHAPES.ELIP?(0,d.default)(o,s):o.type===r.SHAPES.RREC&&(0,c.default)(o,s),i.lastIndex++}this.renderer.bindVao(null);for(var l=0;l<i.data.length;l++)(s=i.data[l]).dirty&&s.upload()},e.prototype.getWebGLData=function(t,e){var i=t.data[t.data.length-1];return(!i||i.points.length>32e4)&&((i=this.graphicsDataPool.pop()||new o.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState)).reset(e),t.data.push(i)),i.dirty=!0,i},e}(s.default);i.default=p,a.default.registerPlugin("graphics",p)},{"../../const":42,"../../renderers/webgl/WebGLRenderer":80,"../../renderers/webgl/utils/ObjectRenderer":90,"../../utils":117,"./WebGLGraphicsData":54,"./shaders/PrimitiveShader":55,"./utils/buildCircle":56,"./utils/buildPoly":58,"./utils/buildRectangle":59,"./utils/buildRoundedRectangle":60}],54:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=t("pixi-gl-core"),s=(n=r)&&n.__esModule?n:{default:n};var a=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gl=e,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=s.default.GLBuffer.createVertexBuffer(e),this.indexBuffer=s.default.GLBuffer.createIndexBuffer(e),this.dirty=!0,this.glPoints=null,this.glIndices=null,this.shader=i,this.vao=new s.default.VertexArrayObject(e,n).addIndex(this.indexBuffer).addAttribute(this.buffer,i.attributes.aVertexPosition,e.FLOAT,!1,24,0).addAttribute(this.buffer,i.attributes.aColor,e.FLOAT,!1,24,8)}return t.prototype.reset=function(){this.points.length=0,this.indices.length=0},t.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},t.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},t}();i.default=a},{"pixi-gl-core":12}],55:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=t("../../../Shader");var s=function(t){function e(i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(((n=r)&&n.__esModule?n:{default:n}).default);i.default=s},{"../../../Shader":41}],56:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t,e){var i=t.shape,n=i.x,r=i.y,l=void 0,h=void 0;t.type===a.SHAPES.CIRC?(l=i.radius,h=i.radius):(l=i.width,h=i.height);var u=Math.floor(30*Math.sqrt(i.radius))||Math.floor(15*Math.sqrt(i.width+i.height)),c=2*Math.PI/u;if(t.fill){var d=(0,o.hex2rgb)(t.fillColor),f=t.fillAlpha,p=d[0]*f,_=d[1]*f,m=d[2]*f,g=e.points,v=e.indices,y=g.length/6;v.push(y);for(var b=0;b<u+1;b++)g.push(n,r,p,_,m,f),g.push(n+Math.sin(c*b)*l,r+Math.cos(c*b)*h,p,_,m,f),v.push(y++,y++);v.push(y-1)}if(t.lineWidth){var E=t.points;t.points=[];for(var T=0;T<u+1;T++)t.points.push(n+Math.sin(c*T)*l,r+Math.cos(c*T)*h);(0,s.default)(t,e),t.points=E}};var n,r=t("./buildLine"),s=(n=r)&&n.__esModule?n:{default:n},a=t("../../../const"),o=t("../../../utils")},{"../../../const":42,"../../../utils":117,"./buildLine":57}],57:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t,e){var i=t.points;if(0===i.length)return;var s=new n.Point(i[0],i[1]),a=new n.Point(i[i.length-2],i[i.length-1]);if(s.x===a.x&&s.y===a.y){(i=i.slice()).pop(),i.pop();var o=(a=new n.Point(i[i.length-2],i[i.length-1])).x+.5*(s.x-a.x),l=a.y+.5*(s.y-a.y);i.unshift(o,l),i.push(o,l)}var h=e.points,u=e.indices,c=i.length/2,d=i.length,f=h.length/6,p=t.lineWidth/2,_=(0,r.hex2rgb)(t.lineColor),m=t.lineAlpha,g=_[0]*m,v=_[1]*m,y=_[2]*m,b=i[0],E=i[1],T=i[2],x=i[3],w=0,D=0,S=-(E-x),I=b-T,A=0,P=0,C=0,M=0,O=Math.sqrt(S*S+I*I);S/=O,I/=O,S*=p,I*=p,h.push(b-S,E-I,g,v,y,m),h.push(b+S,E+I,g,v,y,m);for(var L=1;L<c-1;++L){b=i[2*(L-1)],E=i[2*(L-1)+1],T=i[2*L],x=i[2*L+1],w=i[2*(L+1)],D=i[2*(L+1)+1],S=-(E-x),I=b-T,O=Math.sqrt(S*S+I*I),S/=O,I/=O,S*=p,I*=p,A=-(x-D),P=T-w,O=Math.sqrt(A*A+P*P),A/=O,P/=O;var R=-I+E-(-I+x),k=-S+T-(-S+b),H=(-S+b)*(-I+x)-(-S+T)*(-I+E),F=-(P*=p)+D-(-P+x),N=-(A*=p)+T-(-A+w),j=(-A+w)*(-P+x)-(-A+T)*(-P+D),B=R*N-F*k;if(Math.abs(B)<.1)B+=10.1,h.push(T-S,x-I,g,v,y,m),h.push(T+S,x+I,g,v,y,m);else{var U=(k*j-N*H)/B,X=(F*H-R*j)/B,G=(U-T)*(U-T)+(X-x)*(X-x);G>196*p*p?(C=S-A,M=I-P,O=Math.sqrt(C*C+M*M),C/=O,M/=O,C*=p,M*=p,h.push(T-C,x-M),h.push(g,v,y,m),h.push(T+C,x+M),h.push(g,v,y,m),h.push(T-C,x-M),h.push(g,v,y,m),d++):(h.push(U,X),h.push(g,v,y,m),h.push(T-(U-T),x-(X-x)),h.push(g,v,y,m))}}b=i[2*(c-2)],E=i[2*(c-2)+1],T=i[2*(c-1)],x=i[2*(c-1)+1],S=-(E-x),I=b-T,O=Math.sqrt(S*S+I*I),S/=O,I/=O,S*=p,I*=p,h.push(T-S,x-I),h.push(g,v,y,m),h.push(T+S,x+I),h.push(g,v,y,m),u.push(f);for(var V=0;V<d;++V)u.push(f++);u.push(f-1)};var n=t("../../../math"),r=t("../../../utils")},{"../../../math":66,"../../../utils":117}],58:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t,e){t.points=t.shape.points.slice();var i=t.points;if(t.fill&&i.length>=6){for(var a=[],o=t.holes,l=0;l<o.length;l++){var h=o[l];a.push(i.length/2),i=i.concat(h.points)}var u=e.points,c=e.indices,d=i.length/2,f=(0,r.hex2rgb)(t.fillColor),p=t.fillAlpha,_=f[0]*p,m=f[1]*p,g=f[2]*p,v=(0,s.default)(i,a,2);if(!v)return;for(var y=u.length/6,b=0;b<v.length;b+=3)c.push(v[b]+y),c.push(v[b]+y),c.push(v[b+1]+y),c.push(v[b+2]+y),c.push(v[b+2]+y);for(var E=0;E<d;E++)u.push(i[2*E],i[2*E+1],_,m,g,p)}t.lineWidth>0&&(0,n.default)(t,e)};var n=a(t("./buildLine")),r=t("../../../utils"),s=a(t("earcut"));function a(t){return t&&t.__esModule?t:{default:t}}},{"../../../utils":117,"./buildLine":57,earcut:2}],59:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t,e){var i=t.shape,n=i.x,r=i.y,o=i.width,l=i.height;if(t.fill){var h=(0,a.hex2rgb)(t.fillColor),u=t.fillAlpha,c=h[0]*u,d=h[1]*u,f=h[2]*u,p=e.points,_=e.indices,m=p.length/6;p.push(n,r),p.push(c,d,f,u),p.push(n+o,r),p.push(c,d,f,u),p.push(n,r+l),p.push(c,d,f,u),p.push(n+o,r+l),p.push(c,d,f,u),_.push(m,m,m+1,m+2,m+3,m+3)}if(t.lineWidth){var g=t.points;t.points=[n,r,n+o,r,n+o,r+l,n,r+l,n,r],(0,s.default)(t,e),t.points=g}};var n,r=t("./buildLine"),s=(n=r)&&n.__esModule?n:{default:n},a=t("../../../utils")},{"../../../utils":117,"./buildLine":57}],60:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t,e){var i=t.shape,a=i.x,l=i.y,h=i.width,u=i.height,c=i.radius,d=[];if(d.push(a,l+c),o(a,l+u-c,a,l+u,a+c,l+u,d),o(a+h-c,l+u,a+h,l+u,a+h,l+u-c,d),o(a+h,l+c,a+h,l,a+h-c,l,d),o(a+c,l,a,l,a,l+c+1e-10,d),t.fill){for(var f=(0,s.hex2rgb)(t.fillColor),p=t.fillAlpha,_=f[0]*p,m=f[1]*p,g=f[2]*p,v=e.points,y=e.indices,b=v.length/6,E=(0,n.default)(d,null,2),T=0,x=E.length;T<x;T+=3)y.push(E[T]+b),y.push(E[T]+b),y.push(E[T+1]+b),y.push(E[T+2]+b),y.push(E[T+2]+b);for(var w=0,D=d.length;w<D;w++)v.push(d[w],d[++w],_,m,g,p)}if(t.lineWidth){var S=t.points;t.points=d,(0,r.default)(t,e),t.points=S}};var n=a(t("earcut")),r=a(t("./buildLine")),s=t("../../../utils");function a(t){return t&&t.__esModule?t:{default:t}}function o(t,e,i,n,r,s){var a=arguments.length<=6||void 0===arguments[6]?[]:arguments[6],o=0,l=0,h=0,u=0,c=0,d=0;function f(t,e,i){return t+(e-t)*i}for(var p=0,_=0;p<=20;++p)o=f(t,i,_=p/20),l=f(e,n,_),h=f(i,r,_),u=f(n,s,_),c=f(o,h,_),d=f(l,u,_),a.push(c,d);return a}},{"../../../utils":117,"./buildLine":57,earcut:2}],61:[function(t,e,i){"use strict";i.__esModule=!0,i.Filter=i.SpriteMaskFilter=i.Quad=i.RenderTarget=i.ObjectRenderer=i.WebGLManager=i.Shader=i.CanvasRenderTarget=i.TextureUvs=i.VideoBaseTexture=i.BaseRenderTexture=i.RenderTexture=i.BaseTexture=i.Texture=i.CanvasGraphicsRenderer=i.GraphicsRenderer=i.GraphicsData=i.Graphics=i.TextStyle=i.Text=i.SpriteRenderer=i.CanvasTinter=i.CanvasSpriteRenderer=i.Sprite=i.TransformBase=i.TransformStatic=i.Transform=i.Container=i.DisplayObject=i.Bounds=i.glCore=i.WebGLRenderer=i.CanvasRenderer=i.ticker=i.utils=i.settings=void 0;var n=t("./const");Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(i,t,{enumerable:!0,get:function(){return n[t]}})});var r=t("./math");Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(i,t,{enumerable:!0,get:function(){return r[t]}})});var s=t("pixi-gl-core");Object.defineProperty(i,"glCore",{enumerable:!0,get:function(){return X(s).default}});var a=t("./display/Bounds");Object.defineProperty(i,"Bounds",{enumerable:!0,get:function(){return X(a).default}});var o=t("./display/DisplayObject");Object.defineProperty(i,"DisplayObject",{enumerable:!0,get:function(){return X(o).default}});var l=t("./display/Container");Object.defineProperty(i,"Container",{enumerable:!0,get:function(){return X(l).default}});var h=t("./display/Transform");Object.defineProperty(i,"Transform",{enumerable:!0,get:function(){return X(h).default}});var u=t("./display/TransformStatic");Object.defineProperty(i,"TransformStatic",{enumerable:!0,get:function(){return X(u).default}});var c=t("./display/TransformBase");Object.defineProperty(i,"TransformBase",{enumerable:!0,get:function(){return X(c).default}});var d=t("./sprites/Sprite");Object.defineProperty(i,"Sprite",{enumerable:!0,get:function(){return X(d).default}});var f=t("./sprites/canvas/CanvasSpriteRenderer");Object.defineProperty(i,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return X(f).default}});var p=t("./sprites/canvas/CanvasTinter");Object.defineProperty(i,"CanvasTinter",{enumerable:!0,get:function(){return X(p).default}});var _=t("./sprites/webgl/SpriteRenderer");Object.defineProperty(i,"SpriteRenderer",{enumerable:!0,get:function(){return X(_).default}});var m=t("./text/Text");Object.defineProperty(i,"Text",{enumerable:!0,get:function(){return X(m).default}});var g=t("./text/TextStyle");Object.defineProperty(i,"TextStyle",{enumerable:!0,get:function(){return X(g).default}});var v=t("./graphics/Graphics");Object.defineProperty(i,"Graphics",{enumerable:!0,get:function(){return X(v).default}});var y=t("./graphics/GraphicsData");Object.defineProperty(i,"GraphicsData",{enumerable:!0,get:function(){return X(y).default}});var b=t("./graphics/webgl/GraphicsRenderer");Object.defineProperty(i,"GraphicsRenderer",{enumerable:!0,get:function(){return X(b).default}});var E=t("./graphics/canvas/CanvasGraphicsRenderer");Object.defineProperty(i,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return X(E).default}});var T=t("./textures/Texture");Object.defineProperty(i,"Texture",{enumerable:!0,get:function(){return X(T).default}});var x=t("./textures/BaseTexture");Object.defineProperty(i,"BaseTexture",{enumerable:!0,get:function(){return X(x).default}});var w=t("./textures/RenderTexture");Object.defineProperty(i,"RenderTexture",{enumerable:!0,get:function(){return X(w).default}});var D=t("./textures/BaseRenderTexture");Object.defineProperty(i,"BaseRenderTexture",{enumerable:!0,get:function(){return X(D).default}});var S=t("./textures/VideoBaseTexture");Object.defineProperty(i,"VideoBaseTexture",{enumerable:!0,get:function(){return X(S).default}});var I=t("./textures/TextureUvs");Object.defineProperty(i,"TextureUvs",{enumerable:!0,get:function(){return X(I).default}});var A=t("./renderers/canvas/utils/CanvasRenderTarget");Object.defineProperty(i,"CanvasRenderTarget",{enumerable:!0,get:function(){return X(A).default}});var P=t("./Shader");Object.defineProperty(i,"Shader",{enumerable:!0,get:function(){return X(P).default}});var C=t("./renderers/webgl/managers/WebGLManager");Object.defineProperty(i,"WebGLManager",{enumerable:!0,get:function(){return X(C).default}});var M=t("./renderers/webgl/utils/ObjectRenderer");Object.defineProperty(i,"ObjectRenderer",{enumerable:!0,get:function(){return X(M).default}});var O=t("./renderers/webgl/utils/RenderTarget");Object.defineProperty(i,"RenderTarget",{enumerable:!0,get:function(){return X(O).default}});var L=t("./renderers/webgl/utils/Quad");Object.defineProperty(i,"Quad",{enumerable:!0,get:function(){return X(L).default}});var R=t("./renderers/webgl/filters/spriteMask/SpriteMaskFilter");Object.defineProperty(i,"SpriteMaskFilter",{enumerable:!0,get:function(){return X(R).default}});var k=t("./renderers/webgl/filters/Filter");Object.defineProperty(i,"Filter",{enumerable:!0,get:function(){return X(k).default}}),i.autoDetectRenderer=function(){var t=arguments.length<=0||void 0===arguments[0]?800:arguments[0],e=arguments.length<=1||void 0===arguments[1]?600:arguments[1],i=arguments[2];if(!arguments[3]&&H.isWebGLSupported())return new B.default(t,e,i);return new j.default(t,e,i)};var H=U(t("./utils")),F=U(t("./ticker")),N=X(t("./settings")),j=X(t("./renderers/canvas/CanvasRenderer")),B=X(t("./renderers/webgl/WebGLRenderer"));function U(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function X(t){return t&&t.__esModule?t:{default:t}}i.settings=N.default,i.utils=H,i.ticker=F,i.CanvasRenderer=j.default,i.WebGLRenderer=B.default},{"./Shader":41,"./const":42,"./display/Bounds":43,"./display/Container":44,"./display/DisplayObject":45,"./display/Transform":46,"./display/TransformBase":47,"./display/TransformStatic":48,"./graphics/Graphics":49,"./graphics/GraphicsData":50,"./graphics/canvas/CanvasGraphicsRenderer":51,"./graphics/webgl/GraphicsRenderer":53,"./math":66,"./renderers/canvas/CanvasRenderer":73,"./renderers/canvas/utils/CanvasRenderTarget":75,"./renderers/webgl/WebGLRenderer":80,"./renderers/webgl/filters/Filter":82,"./renderers/webgl/filters/spriteMask/SpriteMaskFilter":85,"./renderers/webgl/managers/WebGLManager":89,"./renderers/webgl/utils/ObjectRenderer":90,"./renderers/webgl/utils/Quad":91,"./renderers/webgl/utils/RenderTarget":92,"./settings":97,"./sprites/Sprite":98,"./sprites/canvas/CanvasSpriteRenderer":99,"./sprites/canvas/CanvasTinter":100,"./sprites/webgl/SpriteRenderer":102,"./text/Text":104,"./text/TextStyle":105,"./textures/BaseRenderTexture":106,"./textures/BaseTexture":107,"./textures/RenderTexture":108,"./textures/Texture":109,"./textures/TextureUvs":110,"./textures/VideoBaseTexture":111,"./ticker":113,"./utils":117,"pixi-gl-core":12}],62:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=t("./Matrix"),s=(n=r)&&n.__esModule?n:{default:n};var a=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],o=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],l=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],h=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],u=[],c=[];function d(t){return t<0?-1:t>0?1:0}!function(){for(var t=0;t<16;t++){var e=[];c.push(e);for(var i=0;i<16;i++)for(var n=d(a[t]*a[i]+l[t]*o[i]),r=d(o[t]*a[i]+h[t]*o[i]),f=d(a[t]*l[i]+l[t]*h[i]),p=d(o[t]*l[i]+h[t]*h[i]),_=0;_<16;_++)if(a[_]===n&&o[_]===r&&l[_]===f&&h[_]===p){e.push(_);break}}for(var m=0;m<16;m++){var g=new s.default;g.set(a[m],o[m],l[m],h[m],0,0),u.push(g)}}();var f={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(t){return a[t]},uY:function(t){return o[t]},vX:function(t){return l[t]},vY:function(t){return h[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return c[t][e]},sub:function(t,e){return c[t][f.inv(e)]},rotate180:function(t){return 4^t},isSwapWidthHeight:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?f.S:f.N:2*Math.abs(e)<=Math.abs(t)?t>0?f.E:f.W:e>0?t>0?f.SE:f.SW:t>0?f.NE:f.NW},matrixAppendRotationInv:function(t,e){var i=arguments.length<=2||void 0===arguments[2]?0:arguments[2],n=arguments.length<=3||void 0===arguments[3]?0:arguments[3],r=u[f.inv(e)];r.tx=i,r.ty=n,t.append(r)}};i.default=f},{"./Matrix":63}],63:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("./Point"),a=(n=s)&&n.__esModule?n:{default:n};var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this.array=null}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,i,n,r,s){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=r,this.ty=s,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},t.prototype.apply=function(t,e){e=e||new a.default;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new a.default;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,r=t.y;return e.x=this.d*i*n+-this.c*i*r+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*r+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,r=this.c,s=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=r*e-this.d*i,this.d=r*i+this.d*e,this.tx=s*e-this.ty*i,this.ty=s*i+this.ty*e,this},t.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,r=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*r,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*r,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*r+this.ty,this},t.prototype.setTransform=function(t,e,i,n,r,s,a,o,l){var h=Math.sin(a),u=Math.cos(a),c=Math.cos(l),d=Math.sin(l),f=-Math.sin(o),p=Math.cos(o),_=u*r,m=h*r,g=-h*s,v=u*s;return this.a=c*_+d*g,this.b=c*m+d*v,this.c=f*_+p*g,this.d=f*m+p*v,this.tx=t+(i*_+n*g),this.ty=e+(i*m+n*v),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,i=this.b,n=this.c,r=this.d,s=-Math.atan2(-n,r),a=Math.atan2(i,e);return Math.abs(s+a)<1e-5?(t.rotation=a,e<0&&r>=0&&(t.rotation+=t.rotation<=0?Math.PI:-Math.PI),t.skew.x=t.skew.y=0):(t.skew.x=s,t.skew.y=a),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+r*r),t.position.x=this.tx,t.position.y=this.ty,t},t.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,r=this.tx,s=t*n-e*i;return this.a=n/s,this.b=-e/s,this.c=-i/s,this.d=t/s,this.tx=(i*this.ty-n*r)/s,this.ty=-(t*this.ty-e*r)/s,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r(t,null,[{key:"IDENTITY",get:function(){return new t}},{key:"TEMP_MATRIX",get:function(){return new t}}]),t}();i.default=o},{"./Point":65}],64:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var r=function(){function t(e,i){var n=arguments.length<=2||void 0===arguments[2]?0:arguments[2],r=arguments.length<=3||void 0===arguments[3]?0:arguments[3];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._x=n,this._y=r,this.cb=e,this.scope=i}return t.prototype.set=function(t,e){var i=t||0,n=e||(0!==e?i:0);this._x===i&&this._y===n||(this._x=i,this._y=n,this.cb.call(this.scope))},t.prototype.copy=function(t){this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope))},n(t,[{key:"x",get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}]),t}();i.default=r},{}],65:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],i=arguments.length<=1||void 0===arguments[1]?0:arguments[1];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=i}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copy=function(t){this.set(t.x,t.y)},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)},t}();i.default=n},{}],66:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("./Point");Object.defineProperty(i,"Point",{enumerable:!0,get:function(){return d(n).default}});var r=t("./ObservablePoint");Object.defineProperty(i,"ObservablePoint",{enumerable:!0,get:function(){return d(r).default}});var s=t("./Matrix");Object.defineProperty(i,"Matrix",{enumerable:!0,get:function(){return d(s).default}});var a=t("./GroupD8");Object.defineProperty(i,"GroupD8",{enumerable:!0,get:function(){return d(a).default}});var o=t("./shapes/Circle");Object.defineProperty(i,"Circle",{enumerable:!0,get:function(){return d(o).default}});var l=t("./shapes/Ellipse");Object.defineProperty(i,"Ellipse",{enumerable:!0,get:function(){return d(l).default}});var h=t("./shapes/Polygon");Object.defineProperty(i,"Polygon",{enumerable:!0,get:function(){return d(h).default}});var u=t("./shapes/Rectangle");Object.defineProperty(i,"Rectangle",{enumerable:!0,get:function(){return d(u).default}});var c=t("./shapes/RoundedRectangle");function d(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(i,"RoundedRectangle",{enumerable:!0,get:function(){return d(c).default}})},{"./GroupD8":62,"./Matrix":63,"./ObservablePoint":64,"./Point":65,"./shapes/Circle":67,"./shapes/Ellipse":68,"./shapes/Polygon":69,"./shapes/Rectangle":70,"./shapes/RoundedRectangle":71}],67:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=t("./Rectangle"),s=(n=r)&&n.__esModule?n:{default:n},a=t("../../const");var o=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],i=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=arguments.length<=2||void 0===arguments[2]?0:arguments[2];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=i,this.radius=n,this.type=a.SHAPES.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.radius*this.radius,n=this.x-t,r=this.y-e;return(n*=n)+(r*=r)<=i},t.prototype.getBounds=function(){return new s.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t}();i.default=o},{"../../const":42,"./Rectangle":70}],68:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=t("./Rectangle"),s=(n=r)&&n.__esModule?n:{default:n},a=t("../../const");var o=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],i=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=arguments.length<=2||void 0===arguments[2]?0:arguments[2],r=arguments.length<=3||void 0===arguments[3]?0:arguments[3];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=i,this.width=n,this.height=r,this.type=a.SHAPES.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,n=(e-this.y)/this.height;return(i*=i)+(n*=n)<=1},t.prototype.getBounds=function(){return new s.default(this.x-this.width,this.y-this.height,this.width,this.height)},t}();i.default=o},{"../../const":42,"./Rectangle":70}],69:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=t("../Point"),s=(n=r)&&n.__esModule?n:{default:n},a=t("../../const");var o=function(){function t(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Array.isArray(i[0])&&(i=i[0]),i[0]instanceof s.default){for(var r=[],o=0,l=i.length;o<l;o++)r.push(i[o].x,i[o].y);i=r}this.closed=!0,this.points=i,this.type=a.SHAPES.POLY}return t.prototype.clone=function(){return new t(this.points.slice())},t.prototype.close=function(){var t=this.points;t[0]===t[t.length-2]&&t[1]===t[t.length-1]||t.push(t[0],t[1])},t.prototype.contains=function(t,e){for(var i=!1,n=this.points.length/2,r=0,s=n-1;r<n;s=r++){var a=this.points[2*r],o=this.points[2*r+1],l=this.points[2*s],h=this.points[2*s+1];o>e!=h>e&&t<(e-o)/(h-o)*(l-a)+a&&(i=!i)}return i},t}();i.default=o},{"../../const":42,"../Point":65}],70:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=t("../../const");var s=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],i=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=arguments.length<=2||void 0===arguments[2]?0:arguments[2],s=arguments.length<=3||void 0===arguments[3]?0:arguments[3];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=i,this.width=n,this.height=s,this.type=r.SHAPES.RECT}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},t.prototype.pad=function(t,e){t=t||0,e=e||(0!==e?t:0),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e},t.prototype.fit=function(t){this.x<t.x&&(this.width+=this.x,this.width<0&&(this.width=0),this.x=t.x),this.y<t.y&&(this.height+=this.y,this.height<0&&(this.height=0),this.y=t.y),this.x+this.width>t.x+t.width&&(this.width=t.width-this.x,this.width<0&&(this.width=0)),this.y+this.height>t.y+t.height&&(this.height=t.height-this.y,this.height<0&&(this.height=0))},t.prototype.enlarge=function(e){if(e!==t.EMPTY){var i=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),r=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);this.x=i,this.width=n-i,this.y=r,this.height=s-r}},n(t,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new t(0,0,0,0)}}]),t}();i.default=s},{"../../const":42}],71:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("../../const");var r=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],i=arguments.length<=1||void 0===arguments[1]?0:arguments[1],r=arguments.length<=2||void 0===arguments[2]?0:arguments[2],s=arguments.length<=3||void 0===arguments[3]?0:arguments[3],a=arguments.length<=4||void 0===arguments[4]?20:arguments[4];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=i,this.width=r,this.height=s,this.radius=a,this.type=n.SHAPES.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var i=t-(this.x+this.radius),n=e-(this.y+this.radius),r=this.radius*this.radius;if(i*i+n*n<=r)return!0;if((i=t-(this.x+this.width-this.radius))*i+n*n<=r)return!0;if(i*i+(n=e-(this.y+this.height-this.radius))*n<=r)return!0;if((i=t-(this.x+this.radius))*i+n*n<=r)return!0}return!1},t}();i.default=r},{"../../const":42}],72:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=t("../utils"),s=t("../math"),a=t("../const"),o=c(t("../settings")),l=c(t("../display/Container")),h=c(t("../textures/RenderTexture")),u=c(t("eventemitter3"));function c(t){return t&&t.__esModule?t:{default:t}}var d=new s.Matrix,f=function(t){function e(i,n,s,h){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var u=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));if((0,r.sayHello)(i),h)for(var c in o.default.RENDER_OPTIONS)void 0===h[c]&&(h[c]=o.default.RENDER_OPTIONS[c]);else h=o.default.RENDER_OPTIONS;return u.type=a.RENDERER_TYPE.UNKNOWN,u.width=n||800,u.height=s||600,u.view=h.view||document.createElement("canvas"),u.resolution=h.resolution||o.default.RESOLUTION,u.transparent=h.transparent,u.autoResize=h.autoResize||!1,u.blendModes=null,u.preserveDrawingBuffer=h.preserveDrawingBuffer,u.clearBeforeRender=h.clearBeforeRender,u.roundPixels=h.roundPixels,u._backgroundColor=0,u._backgroundColorRgba=[0,0,0,0],u._backgroundColorString="#000000",u.backgroundColor=h.backgroundColor||u._backgroundColor,u._tempDisplayObjectParent=new l.default,u._lastObjectRendered=u._tempDisplayObjectParent,u}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.resize=function(t,e){this.width=t*this.resolution,this.height=e*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},e.prototype.generateTexture=function(t,e,i){var n=t.getLocalBounds(),r=h.default.create(0|n.width,0|n.height,e,i);return d.tx=-n.x,d.ty=-n.y,this.render(t,r,!1,d,!0),r},e.prototype.destroy=function(t){t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=a.RENDERER_TYPE.UNKNOWN,this.width=0,this.height=0,this.view=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this.backgroundColor=0,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},n(e,[{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=(0,r.hex2string)(t),(0,r.hex2rgb)(t,this._backgroundColorRgba)}}]),e}(u.default);i.default=f},{"../const":42,"../display/Container":44,"../math":66,"../settings":97,"../textures/RenderTexture":108,"../utils":117,eventemitter3:3}],73:[function(t,e,i){"use strict";i.__esModule=!0;var n=u(t("../SystemRenderer")),r=u(t("./utils/CanvasMaskManager")),s=u(t("./utils/CanvasRenderTarget")),a=u(t("./utils/mapCanvasBlendModesToPixi")),o=t("../../utils"),l=t("../../const"),h=u(t("../../settings"));function u(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(i,n){var s=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"Canvas",i,n,s));return o.type=l.RENDERER_TYPE.CANVAS,o.rootContext=o.view.getContext("2d",{alpha:o.transparent}),o.refresh=!0,o.maskManager=new r.default(o),o.smoothProperty="imageSmoothingEnabled",o.rootContext.imageSmoothingEnabled||(o.rootContext.webkitImageSmoothingEnabled?o.smoothProperty="webkitImageSmoothingEnabled":o.rootContext.mozImageSmoothingEnabled?o.smoothProperty="mozImageSmoothingEnabled":o.rootContext.oImageSmoothingEnabled?o.smoothProperty="oImageSmoothingEnabled":o.rootContext.msImageSmoothingEnabled&&(o.smoothProperty="msImageSmoothingEnabled")),o.initPlugins(),o.blendModes=(0,a.default)(),o._activeBlendMode=null,o.context=null,o.renderingToScreen=!1,o.resize(i,n),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.render=function(t,e,i,n,r){if(this.view){this.renderingToScreen=!e,this.emit("prerender");var a=this.resolution;e?((e=e.baseTexture||e)._canvasRenderTarget||(e._canvasRenderTarget=new s.default(e.width,e.height,e.resolution),e.source=e._canvasRenderTarget.canvas,e.valid=!0),this.context=e._canvasRenderTarget.context,this.resolution=e._canvasRenderTarget.resolution):this.context=this.rootContext;var o=this.context;if(e||(this._lastObjectRendered=t),!r){var h=t.parent,u=this._tempDisplayObjectParent.transform.worldTransform;n?n.copy(u):u.identity(),t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=h}o.setTransform(1,0,0,1,0,0),o.globalAlpha=1,o.globalCompositeOperation=this.blendModes[l.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(o.fillStyle="black",o.clear()),(void 0!==i?i:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?o.clearRect(0,0,this.width,this.height):(o.fillStyle=this._backgroundColorString,o.fillRect(0,0,this.width,this.height)));var c=this.context;this.context=o,t.renderCanvas(this),this.context=c,this.resolution=a,this.emit("postrender")}},e.prototype.clear=function(t){var e=this.context;t=t||this._backgroundColorString,!this.transparent&&t?(e.fillStyle=t,e.fillRect(0,0,this.width,this.height)):e.clearRect(0,0,this.width,this.height)},e.prototype.setBlendMode=function(t){this._activeBlendMode!==t&&(this._activeBlendMode=t,this.context.globalCompositeOperation=this.blendModes[t])},e.prototype.destroy=function(e){this.destroyPlugins(),t.prototype.destroy.call(this,e),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},e.prototype.resize=function(e,i){t.prototype.resize.call(this,e,i),this.smoothProperty&&(this.rootContext[this.smoothProperty]=h.default.SCALE_MODE===l.SCALE_MODES.LINEAR)},e}(n.default);i.default=c,o.pluginTarget.mixin(c)},{"../../const":42,"../../settings":97,"../../utils":117,"../SystemRenderer":72,"./utils/CanvasMaskManager":74,"./utils/CanvasRenderTarget":75,"./utils/mapCanvasBlendModesToPixi":77}],74:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("../../../const");var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e}return t.prototype.pushMask=function(t){var e=this.renderer;e.context.save();var i=t.alpha,n=t.transform.worldTransform,r=e.resolution;e.context.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r,n.ty*r),t._texture||(this.renderGraphicsShape(t),e.context.clip()),t.worldAlpha=i},t.prototype.renderGraphicsShape=function(t){var e=this.renderer.context,i=t.graphicsData.length;if(0!==i){e.beginPath();for(var r=0;r<i;r++){var s=t.graphicsData[r],a=s.shape;if(s.type===n.SHAPES.POLY){var o=a.points;e.moveTo(o[0],o[1]);for(var l=1;l<o.length/2;l++)e.lineTo(o[2*l],o[2*l+1]);o[0]===o[o.length-2]&&o[1]===o[o.length-1]&&e.closePath()}else if(s.type===n.SHAPES.RECT)e.rect(a.x,a.y,a.width,a.height),e.closePath();else if(s.type===n.SHAPES.CIRC)e.arc(a.x,a.y,a.radius,0,2*Math.PI),e.closePath();else if(s.type===n.SHAPES.ELIP){var h=2*a.width,u=2*a.height,c=a.x-h/2,d=a.y-u/2,f=h/2*.5522848,p=u/2*.5522848,_=c+h,m=d+u,g=c+h/2,v=d+u/2;e.moveTo(c,v),e.bezierCurveTo(c,v-p,g-f,d,g,d),e.bezierCurveTo(g+f,d,_,v-p,_,v),e.bezierCurveTo(_,v+p,g+f,m,g,m),e.bezierCurveTo(g-f,m,c,v+p,c,v),e.closePath()}else if(s.type===n.SHAPES.RREC){var y=a.x,b=a.y,E=a.width,T=a.height,x=a.radius,w=Math.min(E,T)/2|0;x=x>w?w:x,e.moveTo(y,b+x),e.lineTo(y,b+T-x),e.quadraticCurveTo(y,b+T,y+x,b+T),e.lineTo(y+E-x,b+T),e.quadraticCurveTo(y+E,b+T,y+E,b+T-x),e.lineTo(y+E,b+x),e.quadraticCurveTo(y+E,b,y+E-x,b),e.lineTo(y+x,b),e.quadraticCurveTo(y,b,y,b+x),e.closePath()}}}},t.prototype.popMask=function(t){t.context.restore()},t.prototype.destroy=function(){},t}();i.default=r},{"../../../const":42}],75:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("../../../settings");var a=((n=s)&&n.__esModule?n:{default:n}).default.RESOLUTION,o=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=n||a,this.resize(e,i)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},t.prototype.destroy=function(){this.context=null,this.canvas=null},r(t,[{key:"width",get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},{key:"height",get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}]),t}();i.default=o},{"../../../settings":97}],76:[function(t,e,i){"use strict";function n(t){var e=document.createElement("canvas");e.width=6,e.height=1;var i=e.getContext("2d");return i.fillStyle=t,i.fillRect(0,0,6,1),e}i.__esModule=!0,i.default=function(){if("undefined"==typeof document)return!1;var t=n("#ff00ff"),e=n("#ffff00"),i=document.createElement("canvas");i.width=6,i.height=1;var r=i.getContext("2d");r.globalCompositeOperation="multiply",r.drawImage(t,0,0),r.drawImage(e,2,0);var s=r.getImageData(2,0,1,1);if(!s)return!1;var a=s.data;return 255===a[0]&&0===a[1]&&0===a[2]}},{}],77:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(){var t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];(0,a.default)()?(t[r.BLEND_MODES.NORMAL]="source-over",t[r.BLEND_MODES.ADD]="lighter",t[r.BLEND_MODES.MULTIPLY]="multiply",t[r.BLEND_MODES.SCREEN]="screen",t[r.BLEND_MODES.OVERLAY]="overlay",t[r.BLEND_MODES.DARKEN]="darken",t[r.BLEND_MODES.LIGHTEN]="lighten",t[r.BLEND_MODES.COLOR_DODGE]="color-dodge",t[r.BLEND_MODES.COLOR_BURN]="color-burn",t[r.BLEND_MODES.HARD_LIGHT]="hard-light",t[r.BLEND_MODES.SOFT_LIGHT]="soft-light",t[r.BLEND_MODES.DIFFERENCE]="difference",t[r.BLEND_MODES.EXCLUSION]="exclusion",t[r.BLEND_MODES.HUE]="hue",t[r.BLEND_MODES.SATURATION]="saturate",t[r.BLEND_MODES.COLOR]="color",t[r.BLEND_MODES.LUMINOSITY]="luminosity"):(t[r.BLEND_MODES.NORMAL]="source-over",t[r.BLEND_MODES.ADD]="lighter",t[r.BLEND_MODES.MULTIPLY]="source-over",t[r.BLEND_MODES.SCREEN]="source-over",t[r.BLEND_MODES.OVERLAY]="source-over",t[r.BLEND_MODES.DARKEN]="source-over",t[r.BLEND_MODES.LIGHTEN]="source-over",t[r.BLEND_MODES.COLOR_DODGE]="source-over",t[r.BLEND_MODES.COLOR_BURN]="source-over",t[r.BLEND_MODES.HARD_LIGHT]="source-over",t[r.BLEND_MODES.SOFT_LIGHT]="source-over",t[r.BLEND_MODES.DIFFERENCE]="source-over",t[r.BLEND_MODES.EXCLUSION]="source-over",t[r.BLEND_MODES.HUE]="source-over",t[r.BLEND_MODES.SATURATION]="source-over",t[r.BLEND_MODES.COLOR]="source-over",t[r.BLEND_MODES.LUMINOSITY]="source-over");return t};var n,r=t("../../../const"),s=t("./canUseNewCanvasBlendModes"),a=(n=s)&&n.__esModule?n:{default:n}},{"../../../const":42,"./canUseNewCanvasBlendModes":76}],78:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=t("../../const"),s=t("../../settings"),a=(n=s)&&n.__esModule?n:{default:n};var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=a.default.GC_MAX_IDLE,this.checkCountMax=a.default.GC_MAX_CHECK_COUNT,this.mode=a.default.GC_MODE}return t.prototype.update=function(){this.count++,this.mode!==r.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},t.prototype.run=function(){for(var t=this.renderer.textureManager,e=t._managedTextures,i=!1,n=0;n<e.length;n++){var r=e[n];!r._glRenderTargets&&this.count-r.touched>this.maxIdle&&(t.destroyTexture(r,!0),e[n]=null,i=!0)}if(i){for(var s=0,a=0;a<e.length;a++)null!==e[a]&&(e[s++]=e[a]);e.length=s}},t.prototype.unload=function(t){var e=this.renderer.textureManager;t._texture&&t._texture._glRenderTargets&&e.destroyTexture(t._texture,!0);for(var i=t.children.length-1;i>=0;i--)this.unload(t.children[i])},t}();i.default=o},{"../../const":42,"../../settings":97}],79:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=t("pixi-gl-core"),s=t("../../const"),a=t("./utils/RenderTarget"),o=(n=a)&&n.__esModule?n:{default:n},l=t("../../utils");var h=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e,this.gl=e.gl,this._managedTextures=[]}return t.prototype.bindTexture=function(){},t.prototype.getTexture=function(){},t.prototype.updateTexture=function(t,e){var i=this.gl,n=!!t._glRenderTargets;if(!t.hasLoaded)return null;var a=this.renderer.boundTextures;if(void 0===e){e=0;for(var l=0;l<a.length;++l)if(a[l]===t){e=l;break}}a[e]=t,i.activeTexture(i.TEXTURE0+e);var h=t._glTextures[this.renderer.CONTEXT_UID];if(h)n?t._glRenderTargets[this.renderer.CONTEXT_UID].resize(t.width,t.height):h.upload(t.source);else{if(n){var u=new o.default(this.gl,t.width,t.height,t.scaleMode,t.resolution);u.resize(t.width,t.height),t._glRenderTargets[this.renderer.CONTEXT_UID]=u,h=u.texture}else(h=new r.GLTexture(this.gl,null,null,null,null)).bind(e),h.premultiplyAlpha=!0,h.upload(t.source);t._glTextures[this.renderer.CONTEXT_UID]=h,t.on("update",this.updateTexture,this),t.on("dispose",this.destroyTexture,this),this._managedTextures.push(t),t.isPowerOfTwo?(t.mipmap&&h.enableMipmap(),t.wrapMode===s.WRAP_MODES.CLAMP?h.enableWrapClamp():t.wrapMode===s.WRAP_MODES.REPEAT?h.enableWrapRepeat():h.enableWrapMirrorRepeat()):h.enableWrapClamp(),t.scaleMode===s.SCALE_MODES.NEAREST?h.enableNearestScaling():h.enableLinearScaling()}return h},t.prototype.destroyTexture=function(t,e){if((t=t.baseTexture||t).hasLoaded&&t._glTextures[this.renderer.CONTEXT_UID]&&(this.renderer.unbindTexture(t),t._glTextures[this.renderer.CONTEXT_UID].destroy(),t.off("update",this.updateTexture,this),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.renderer.CONTEXT_UID],!e)){var i=this._managedTextures.indexOf(t);-1!==i&&(0,l.removeItems)(this._managedTextures,i,1)}},t.prototype.removeAll=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];e._glTextures[this.renderer.CONTEXT_UID]&&delete e._glTextures[this.renderer.CONTEXT_UID]}},t.prototype.destroy=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];this.destroyTexture(e,!0),e.off("update",this.updateTexture,this),e.off("dispose",this.destroyTexture,this)}this._managedTextures=null},t}();i.default=h},{"../../const":42,"../../utils":117,"./utils/RenderTarget":92,"pixi-gl-core":12}],80:[function(t,e,i){"use strict";i.__esModule=!0;var n=v(t("../SystemRenderer")),r=v(t("./managers/MaskManager")),s=v(t("./managers/StencilManager")),a=v(t("./managers/FilterManager")),o=v(t("./utils/RenderTarget")),l=v(t("./utils/ObjectRenderer")),h=v(t("./TextureManager")),u=v(t("../../textures/BaseTexture")),c=v(t("./TextureGarbageCollector")),d=v(t("./WebGLState")),f=v(t("./utils/mapWebGLDrawModesToPixi")),p=v(t("./utils/validateContext")),_=t("../../utils"),m=v(t("pixi-gl-core")),g=t("../../const");function v(t){return t&&t.__esModule?t:{default:t}}var y=0,b=function(t){function e(i,n){var o=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var h=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"WebGL",i,n,o));return h.type=g.RENDERER_TYPE.WEBGL,h.handleContextLost=h.handleContextLost.bind(h),h.handleContextRestored=h.handleContextRestored.bind(h),h.view.addEventListener("webglcontextlost",h.handleContextLost,!1),h.view.addEventListener("webglcontextrestored",h.handleContextRestored,!1),h._contextOptions={alpha:h.transparent,antialias:o.antialias,premultipliedAlpha:h.transparent&&"notMultiplied"!==h.transparent,stencil:!0,preserveDrawingBuffer:o.preserveDrawingBuffer},h._backgroundColorRgba[3]=h.transparent?0:1,h.maskManager=new r.default(h),h.stencilManager=new s.default(h),h.emptyRenderer=new l.default(h),h.currentRenderer=h.emptyRenderer,h.initPlugins(),o.context&&(0,p.default)(o.context),h.gl=o.context||m.default.createContext(h.view,h._contextOptions),h.CONTEXT_UID=y++,h.state=new d.default(h.gl),h.renderingToScreen=!0,h.boundTextures=null,h._activeShader=null,h._activeVao=null,h._activeRenderTarget=null,h._initContext(),h.filterManager=new a.default(h),h.drawModes=(0,f.default)(h.gl),h._nextTextureLocation=0,h.setBlendMode(0),h}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._initContext=function(){var t=this.gl;t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext();var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures=new Array(e),this.emptyTextures=new Array(e),this.textureManager=new h.default(this),this.textureGC=new c.default(this),this.state.resetToDefault(),this.rootRenderTarget=new o.default(t,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var i=new m.default.GLTexture.fromData(t,null,1,1),n={_glTextures:{}};n._glTextures[this.CONTEXT_UID]={};for(var r=0;r<e;r++){var s=new u.default;s._glTextures[this.CONTEXT_UID]=i,this.boundTextures[r]=n,this.emptyTextures[r]=s,this.bindTexture(null,r)}this.emit("context",t),this.resize(this.width,this.height)},e.prototype.render=function(t,e,i,n,r){if(this.renderingToScreen=!e,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,e||(this._lastObjectRendered=t),!r){var s=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=s}this.bindRenderTexture(e,n),this.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this._activeRenderTarget.clear(),t.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.resize=function(t,e){n.default.prototype.resize.call(this,t,e),this.rootRenderTarget.resize(t,e),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},e.prototype.setBlendMode=function(t){this.state.setBlendMode(t)},e.prototype.clear=function(t){this._activeRenderTarget.clear(t)},e.prototype.setTransform=function(t){this._activeRenderTarget.transform=t},e.prototype.bindRenderTexture=function(t,e){var i=void 0;if(t){var n=t.baseTexture;n._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(n,0),this.unbindTexture(n),(i=n._glRenderTargets[this.CONTEXT_UID]).setFrame(t.frame)}else i=this.rootRenderTarget;return i.transform=e,this.bindRenderTarget(i),this},e.prototype.bindRenderTarget=function(t){return t!==this._activeRenderTarget&&(this._activeRenderTarget=t,t.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=t.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(t.stencilMaskStack)),this},e.prototype.bindShader=function(t){return this._activeShader!==t&&(this._activeShader=t,t.bind(),t.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0)),this},e.prototype.bindTexture=function(t,e,i){if((t=(t=t||this.emptyTextures[e]).baseTexture||t).touched=this.textureGC.count,i)e=e||0;else{for(var n=0;n<this.boundTextures.length;n++)if(this.boundTextures[n]===t)return n;void 0===e&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,e=this.boundTextures.length-this._nextTextureLocation-1)}var r=this.gl,s=t._glTextures[this.CONTEXT_UID];return s?(this.boundTextures[e]=t,r.activeTexture(r.TEXTURE0+e),r.bindTexture(r.TEXTURE_2D,s.texture)):this.textureManager.updateTexture(t,e),e},e.prototype.unbindTexture=function(t){var e=this.gl;t=t.baseTexture||t;for(var i=0;i<this.boundTextures.length;i++)this.boundTextures[i]===t&&(this.boundTextures[i]=this.emptyTextures[i],e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[i]._glTextures[this.CONTEXT_UID].texture));return this},e.prototype.createVao=function(){return new m.default.VertexArrayObject(this.gl,this.state.attribState)},e.prototype.bindVao=function(t){return this._activeVao===t?this:(t?t.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=t,this)},e.prototype.reset=function(){return this.setObjectRenderer(this.emptyRenderer),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget,this.rootRenderTarget.activate(),this.state.resetToDefault(),this},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this._initContext(),this.textureManager.removeAll()},e.prototype.destroy=function(e){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),t.prototype.destroy.call(this,e),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},e}(n.default);i.default=b,_.pluginTarget.mixin(b)},{"../../const":42,"../../textures/BaseTexture":107,"../../utils":117,"../SystemRenderer":72,"./TextureGarbageCollector":78,"./TextureManager":79,"./WebGLState":81,"./managers/FilterManager":86,"./managers/MaskManager":87,"./managers/StencilManager":88,"./utils/ObjectRenderer":90,"./utils/RenderTarget":92,"./utils/mapWebGLDrawModesToPixi":95,"./utils/validateContext":96,"pixi-gl-core":12}],81:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=t("./utils/mapWebGLBlendModesToPixi"),s=(n=r)&&n.__esModule?n:{default:n};var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=e,this.maxAttribs=e.getParameter(e.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,s.default)(e),this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")}return t.prototype.push=function(){var t=this.stack[++this.stackIndex];t||(t=this.stack[this.stackIndex]=new Uint8Array(16));for(var e=0;e<this.activeState.length;e++)this.activeState[e]=t[e]},t.prototype.pop=function(){var t=this.stack[--this.stackIndex];this.setState(t)},t.prototype.setState=function(t){this.setBlend(t[0]),this.setDepthTest(t[1]),this.setFrontFace(t[2]),this.setCullFace(t[3]),this.setBlendMode(t[4])},t.prototype.setBlend=function(t){t=t?1:0,this.activeState[0]!==t&&(this.activeState[0]=t,this.gl[t?"enable":"disable"](this.gl.BLEND))},t.prototype.setBlendMode=function(t){t!==this.activeState[4]&&(this.activeState[4]=t,this.gl.blendFunc(this.blendModes[t][0],this.blendModes[t][1]))},t.prototype.setDepthTest=function(t){t=t?1:0,this.activeState[1]!==t&&(this.activeState[1]=t,this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST))},t.prototype.setCullFace=function(t){t=t?1:0,this.activeState[3]!==t&&(this.activeState[3]=t,this.gl[t?"enable":"disable"](this.gl.CULL_FACE))},t.prototype.setFrontFace=function(t){t=t?1:0,this.activeState[2]!==t&&(this.activeState[2]=t,this.gl.frontFace(this.gl[t?"CW":"CCW"]))},t.prototype.resetAttributes=function(){for(var t=0;t<this.attribState.tempAttribState.length;t++)this.attribState.tempAttribState[t]=0;for(var e=0;e<this.attribState.attribState.length;e++)this.attribState.attribState[e]=0;for(var i=1;i<this.maxAttribs;i++)this.gl.disableVertexAttribArray(i)},t.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var t=0;t<this.activeState.length;++t)this.activeState[t]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},t}();i.default=a},{"./utils/mapWebGLBlendModesToPixi":94}],82:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("./extractUniformsFromSrc"),a=(n=s)&&n.__esModule?n:{default:n},o=t("../../../utils"),l=t("../../../const");var h={},u=function(){function t(e,i,n){for(var r in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=i||t.defaultFragmentSrc,this.blendMode=l.BLEND_MODES.NORMAL,this.uniformData=n||(0,a.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={},this.uniformData)this.uniforms[r]=this.uniformData[r].value;this.glShaders={},h[this.vertexSrc+this.fragmentSrc]||(h[this.vertexSrc+this.fragmentSrc]=(0,o.uid)()),this.glShaderKey=h[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=1,this.enabled=!0}return t.prototype.apply=function(t,e,i,n){t.applyFilter(this,e,i,n)},r(t,null,[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),t}();i.default=u},{"../../../const":42,"../../../utils":117,"./extractUniformsFromSrc":83}],83:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t,e,i){var n=a(t),r=a(e);return Object.assign(n,r)};var n,r=t("pixi-gl-core");var s=((n=r)&&n.__esModule?n:{default:n}).default.shader.defaultValue;function a(t){for(var e=new RegExp("^(projectionMatrix|uSampler|filterArea)$"),i={},n=void 0,r=t.replace(/\s+/g," ").split(/\s*;\s*/),a=0;a<r.length;a++){var o=r[a].trim();if(o.indexOf("uniform")>-1){var l=o.split(" "),h=l[1],u=l[2],c=1;u.indexOf("[")>-1&&(u=(n=u.split(/\[|]/))[0],c*=Number(n[1])),u.match(e)||(i[u]={value:s(h,c),name:u,type:h})}}return i}},{"pixi-gl-core":12}],84:[function(t,e,i){"use strict";i.__esModule=!0,i.calculateScreenSpaceMatrix=function(t,e,i){var n=t.identity();return n.translate(e.x/i.width,e.y/i.height),n.scale(i.width,i.height),n},i.calculateNormalizedScreenSpaceMatrix=function(t,e,i){var n=t.identity();n.translate(e.x/i.width,e.y/i.height);var r=i.width/e.width,s=i.height/e.height;return n.scale(r,s),n},i.calculateSpriteMatrix=function(t,e,i,r){var s=r.worldTransform.copy(n.Matrix.TEMP_MATRIX),a=r._texture.baseTexture,o=t.identity(),l=i.height/i.width;o.translate(e.x/i.width,e.y/i.height),o.scale(1,l);var h=i.width/a.width,u=i.height/a.height;return s.tx/=a.width*h,s.ty/=a.width*h,s.invert(),o.prepend(s),o.scale(1,1/l),o.scale(h,u),o.translate(r.anchor.x,r.anchor.y),o};var n=t("../../../math")},{"../../../math":66}],85:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=t("../Filter"),s=(n=r)&&n.__esModule?n:{default:n},a=t("../../../../math");t("path");var o=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=new a.Matrix,r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return i.renderable=!1,r.maskSprite=i,r.maskMatrix=n,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,i){var n=this.maskSprite;this.uniforms.mask=n._texture,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n),this.uniforms.alpha=n.worldAlpha,t.applyFilter(this,e,i)},e}(s.default);i.default=o},{"../../../../math":66,"../Filter":82,path:22}],86:[function(t,e,i){"use strict";i.__esModule=!0;var n=u(t("./WebGLManager")),r=u(t("../utils/RenderTarget")),s=u(t("../utils/Quad")),a=t("../../../math"),o=u(t("../../../Shader")),l=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t("../filters/filterTransforms")),h=u(t("bit-twiddle"));function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var d=function t(){c(this,t),this.renderTarget=null,this.sourceFrame=new a.Rectangle,this.destinationFrame=new a.Rectangle,this.filters=[],this.target=null,this.resolution=1},f=function(t){function e(i){c(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return n.gl=n.renderer.gl,n.quad=new s.default(n.gl,i.state.attribState),n.shaderCache={},n.pool={},n.filterData=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.pushFilter=function(t,e){var i=this.renderer,n=this.filterData;if(!n){n=this.renderer._activeRenderTarget.filterStack;var r=new d;r.sourceFrame=r.destinationFrame=this.renderer._activeRenderTarget.size,r.renderTarget=i._activeRenderTarget,this.renderer._activeRenderTarget.filterData=n={index:0,stack:[r]},this.filterData=n}var s=n.stack[++n.index];s||(s=n.stack[n.index]=new d);var a=e[0].resolution,o=0|e[0].padding,l=t.filterArea||t.getBounds(!0),h=s.sourceFrame,u=s.destinationFrame;h.x=(l.x*a|0)/a,h.y=(l.y*a|0)/a,h.width=(l.width*a|0)/a,h.height=(l.height*a|0)/a,n.stack[0].renderTarget.transform||h.fit(n.stack[0].destinationFrame),h.pad(o),u.width=h.width,u.height=h.height;var c=this.getPotRenderTarget(i.gl,h.width,h.height,a);s.target=t,s.filters=e,s.resolution=a,s.renderTarget=c,c.setFrame(u,h),i.bindRenderTarget(c),c.clear()},e.prototype.popFilter=function(){var t=this.filterData,e=t.stack[t.index-1],i=t.stack[t.index];this.quad.map(i.renderTarget.size,i.sourceFrame).upload();var n=i.filters;if(1===n.length)n[0].apply(this,i.renderTarget,e.renderTarget,!1),this.freePotRenderTarget(i.renderTarget);else{var r=i.renderTarget,s=this.getPotRenderTarget(this.renderer.gl,i.sourceFrame.width,i.sourceFrame.height,i.resolution);s.setFrame(i.destinationFrame,i.sourceFrame),s.clear();var a=0;for(a=0;a<n.length-1;++a){n[a].apply(this,r,s,!0);var o=r;r=s,s=o}n[a].apply(this,r,e.renderTarget,!0),this.freePotRenderTarget(r),this.freePotRenderTarget(s)}t.index--,0===t.index&&(this.filterData=null)},e.prototype.applyFilter=function(t,e,i,n){var r=this.renderer,s=r.gl,a=t.glShaders[r.CONTEXT_UID];a||(t.glShaderKey?(a=this.shaderCache[t.glShaderKey])||(a=new o.default(this.gl,t.vertexSrc,t.fragmentSrc),t.glShaders[r.CONTEXT_UID]=this.shaderCache[t.glShaderKey]=a):a=t.glShaders[r.CONTEXT_UID]=new o.default(this.gl,t.vertexSrc,t.fragmentSrc),r.bindVao(null),this.quad.initVao(a)),r.bindVao(this.quad.vao),r.bindRenderTarget(i),n&&(s.disable(s.SCISSOR_TEST),r.clear(),s.enable(s.SCISSOR_TEST)),i===r.maskManager.scissorRenderTarget&&r.maskManager.pushScissorMask(null,r.maskManager.scissorData),r.bindShader(a),this.syncUniforms(a,t),r.state.setBlendMode(t.blendMode);var l=this.renderer.boundTextures[0];s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,e.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),s.bindTexture(s.TEXTURE_2D,l._glTextures[this.renderer.CONTEXT_UID].texture)},e.prototype.syncUniforms=function(t,e){var i=e.uniformData,n=e.uniforms,r=1,s=void 0;if(t.uniforms.data.filterArea){s=this.filterData.stack[this.filterData.index];var a=t.uniforms.filterArea;a[0]=s.renderTarget.size.width,a[1]=s.renderTarget.size.height,a[2]=s.sourceFrame.x,a[3]=s.sourceFrame.y,t.uniforms.filterArea=a}if(t.uniforms.data.filterClamp){s=this.filterData.stack[this.filterData.index];var o=t.uniforms.filterClamp;o[0]=0,o[1]=0,o[2]=(s.sourceFrame.width-1)/s.renderTarget.size.width,o[3]=(s.sourceFrame.height-1)/s.renderTarget.size.height,t.uniforms.filterClamp=o}for(var l in i)if("sampler2D"===i[l].type&&0!==n[l]){if(n[l].baseTexture)t.uniforms[l]=this.renderer.bindTexture(n[l].baseTexture,r);else{t.uniforms[l]=r;var h=this.renderer.gl;this.renderer.boundTextures[r]=this.renderer.emptyTextures[r],h.activeTexture(h.TEXTURE0+r),n[l].texture.bind()}r++}else if("mat3"===i[l].type)void 0!==n[l].a?t.uniforms[l]=n[l].toArray(!0):t.uniforms[l]=n[l];else if("vec2"===i[l].type)if(void 0!==n[l].x){var u=t.uniforms[l]||new Float32Array(2);u[0]=n[l].x,u[1]=n[l].y,t.uniforms[l]=u}else t.uniforms[l]=n[l];else"float"===i[l].type?t.uniforms.data[l].value!==i[l]&&(t.uniforms[l]=n[l]):t.uniforms[l]=n[l]},e.prototype.getRenderTarget=function(t,e){var i=this.filterData.stack[this.filterData.index],n=this.getPotRenderTarget(this.renderer.gl,i.sourceFrame.width,i.sourceFrame.height,e||i.resolution);return n.setFrame(i.destinationFrame,i.sourceFrame),n},e.prototype.returnRenderTarget=function(t){this.freePotRenderTarget(t)},e.prototype.calculateScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return l.calculateScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size)},e.prototype.calculateNormalizedScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return l.calculateNormalizedScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size,e.destinationFrame)},e.prototype.calculateSpriteMatrix=function(t,e){var i=this.filterData.stack[this.filterData.index];return l.calculateSpriteMatrix(t,i.sourceFrame,i.renderTarget.size,e)},e.prototype.destroy=function(){this.shaderCache=[],this.emptyPool()},e.prototype.getPotRenderTarget=function(t,e,i,n){var s=(65535&(e=h.default.nextPow2(e*n)))<<16|65535&(i=h.default.nextPow2(i*n));this.pool[s]||(this.pool[s]=[]);var a=this.pool[s].pop();if(!a){var o=this.renderer.boundTextures[0];t.activeTexture(t.TEXTURE0),a=new r.default(t,e,i,null,1),t.bindTexture(t.TEXTURE_2D,o._glTextures[this.renderer.CONTEXT_UID].texture)}return a.resolution=n,a.defaultFrame.width=a.size.width=e/n,a.defaultFrame.height=a.size.height=i/n,a},e.prototype.emptyPool=function(){for(var t in this.pool){var e=this.pool[t];if(e)for(var i=0;i<e.length;i++)e[i].destroy(!0)}this.pool={}},e.prototype.freePotRenderTarget=function(t){var e=(65535&t.size.width*t.resolution)<<16|65535&t.size.height*t.resolution;this.pool[e].push(t)},e}(n.default);i.default=f},{"../../../Shader":41,"../../../math":66,"../filters/filterTransforms":84,"../utils/Quad":91,"../utils/RenderTarget":92,"./WebGLManager":89,"bit-twiddle":1}],87:[function(t,e,i){"use strict";i.__esModule=!0;var n=s(t("./WebGLManager")),r=s(t("../filters/spriteMask/SpriteMaskFilter"));function s(t){return t&&t.__esModule?t:{default:t}}var a=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return n.scissor=!1,n.scissorData=null,n.scissorRenderTarget=null,n.enableScissor=!0,n.alphaMaskPool=[],n.alphaMaskIndex=0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.pushMask=function(t,e){if(e.texture)this.pushSpriteMask(t,e);else if(this.enableScissor&&!this.scissor&&!this.renderer.stencilManager.stencilMaskStack.length&&e.isFastRect()){var i=e.worldTransform,n=Math.atan2(i.b,i.a);(n=Math.round(n*(180/Math.PI)))%90?this.pushStencilMask(e):this.pushScissorMask(t,e)}else this.pushStencilMask(e)},e.prototype.popMask=function(t,e){e.texture?this.popSpriteMask(t,e):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(t,e):this.popStencilMask(t,e)},e.prototype.pushSpriteMask=function(t,e){var i=this.alphaMaskPool[this.alphaMaskIndex];i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new r.default(e)]),i[0].resolution=this.renderer.resolution,i[0].maskSprite=e,t.filterArea=e.getBounds(!0),this.renderer.filterManager.pushFilter(t,i),this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},e.prototype.pushStencilMask=function(t){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(t)},e.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},e.prototype.pushScissorMask=function(t,e){e.renderable=!0;var i=this.renderer._activeRenderTarget,n=e.getBounds();n.fit(i.size),e.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var r=this.renderer.resolution;this.renderer.gl.scissor(n.x*r,(i.root?i.size.height-n.y-n.height:n.y)*r,n.width*r,n.height*r),this.scissorRenderTarget=i,this.scissorData=e,this.scissor=!0},e.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var t=this.renderer.gl;t.disable(t.SCISSOR_TEST)},e}(n.default);i.default=a},{"../filters/spriteMask/SpriteMaskFilter":85,"./WebGLManager":89}],88:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=t("./WebGLManager"),s=(n=r)&&n.__esModule?n:{default:n};var a=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return n.stencilMaskStack=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.setMaskStack=function(t){this.stencilMaskStack=t;var e=this.renderer.gl;0===t.length?e.disable(e.STENCIL_TEST):e.enable(e.STENCIL_TEST)},e.prototype.pushStencil=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var e=this.renderer.gl,i=this.stencilMaskStack;0===i.length&&(e.enable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.stencilFunc(e.ALWAYS,1,1)),i.push(t),e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.INCR),this.renderer.plugins.graphics.render(t),e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.NOTEQUAL,0,i.length),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},e.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var t=this.renderer.gl,e=this.stencilMaskStack,i=e.pop();0===e.length?t.disable(t.STENCIL_TEST):(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),this.renderer.plugins.graphics.render(i),t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.NOTEQUAL,0,e.length),t.stencilOp(t.KEEP,t.KEEP,t.KEEP))},e.prototype.destroy=function(){s.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},e}(s.default);i.default=a},{"./WebGLManager":89}],89:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e,this.renderer.on("context",this.onContextChange,this)}return t.prototype.onContextChange=function(){},t.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},t}();i.default=n},{}],90:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=t("../managers/WebGLManager");var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.flush=function(){},e.prototype.render=function(t){},e}(((n=r)&&n.__esModule?n:{default:n}).default);i.default=s},{"../managers/WebGLManager":89}],91:[function(t,e,i){"use strict";i.__esModule=!0;var n=s(t("pixi-gl-core")),r=s(t("../../../utils/createIndicesForQuads"));function s(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gl=e,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var s=0;s<4;s++)this.interleaved[4*s]=this.vertices[2*s],this.interleaved[4*s+1]=this.vertices[2*s+1],this.interleaved[4*s+2]=this.uvs[2*s],this.interleaved[4*s+3]=this.uvs[2*s+1];this.indices=(0,r.default)(1),this.vertexBuffer=n.default.GLBuffer.createVertexBuffer(e,this.interleaved,e.STATIC_DRAW),this.indexBuffer=n.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.vao=new n.default.VertexArrayObject(e,i)}return t.prototype.initVao=function(t){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,t.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,t.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},t.prototype.map=function(t,e){var i=0,n=0;return this.uvs[0]=i,this.uvs[1]=n,this.uvs[2]=i+e.width/t.width,this.uvs[3]=n,this.uvs[4]=i+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=i,this.uvs[7]=n+e.height/t.height,i=e.x,n=e.y,this.vertices[0]=i,this.vertices[1]=n,this.vertices[2]=i+e.width,this.vertices[3]=n,this.vertices[4]=i+e.width,this.vertices[5]=n+e.height,this.vertices[6]=i,this.vertices[7]=n+e.height,this},t.prototype.upload=function(){for(var t=0;t<4;t++)this.interleaved[4*t]=this.vertices[2*t],this.interleaved[4*t+1]=this.vertices[2*t+1],this.interleaved[4*t+2]=this.uvs[2*t],this.interleaved[4*t+3]=this.uvs[2*t+1];return this.vertexBuffer.upload(this.interleaved),this},t.prototype.destroy=function(){var t=this.gl;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer)},t}();i.default=a},{"../../../utils/createIndicesForQuads":115,"pixi-gl-core":12}],92:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=t("../../../math"),s=t("../../../const"),a=t("../../../settings"),o=(n=a)&&n.__esModule?n:{default:n},l=t("pixi-gl-core");var h=function(){function t(e,i,n,a,h,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gl=e,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new r.Rectangle(0,0,1,1),this.resolution=h||o.default.RESOLUTION,this.projectionMatrix=new r.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new r.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.scaleMode=a||o.default.SCALE_MODE,this.root=u,this.root?(this.frameBuffer=new l.GLFramebuffer(e,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=l.GLFramebuffer.createRGBA(e,100,100),this.scaleMode===s.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(i,n)}return t.prototype.clear=function(t){var e=t||this.clearColor;this.frameBuffer.clear(e[0],e[1],e[2],e[3])},t.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},t.prototype.setFrame=function(t,e){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t},t.prototype.activate=function(){var t=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(t.enable(t.SCISSOR_TEST),t.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):t.disable(t.SCISSOR_TEST),t.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},t.prototype.calculateProjection=function(t,e){var i=this.projectionMatrix;e=e||t,i.identity(),this.root?(i.a=1/t.width*2,i.d=-1/t.height*2,i.tx=-1-e.x*i.a,i.ty=1-e.y*i.d):(i.a=1/t.width*2,i.d=1/t.height*2,i.tx=-1-e.x*i.a,i.ty=-1-e.y*i.d)},t.prototype.resize=function(t,e){if(t|=0,e|=0,this.size.width!==t||this.size.height!==e){this.size.width=t,this.size.height=e,this.defaultFrame.width=t,this.defaultFrame.height=e,this.frameBuffer.resize(t*this.resolution,e*this.resolution);var i=this.frame||this.size;this.calculateProjection(i)}},t.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},t}();i.default=h},{"../../../const":42,"../../../math":66,"../../../settings":97,"pixi-gl-core":12}],93:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t,e){var i=!e;if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");if(i){var n=document.createElement("canvas");n.width=1,n.height=1,e=s.default.createContext(n)}var r=e.createShader(e.FRAGMENT_SHADER);for(;;){var l=a.replace(/%forloop%/gi,o(t));if(e.shaderSource(r,l),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))break;t=t/2|0}i&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").loseContext();return t};var n,r=t("pixi-gl-core"),s=(n=r)&&n.__esModule?n:{default:n};var a=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function o(t){for(var e="",i=0;i<t;++i)i>0&&(e+="\nelse "),i<t-1&&(e+="if(test == "+i+".0){}");return e}},{"pixi-gl-core":12}],94:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t){var e=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];return e[n.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.ADD]=[t.ONE,t.DST_ALPHA],e[n.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR],e[n.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e};var n=t("../../../const")},{"../../../const":42}],95:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return e[n.DRAW_MODES.POINTS]=t.POINTS,e[n.DRAW_MODES.LINES]=t.LINES,e[n.DRAW_MODES.LINE_LOOP]=t.LINE_LOOP,e[n.DRAW_MODES.LINE_STRIP]=t.LINE_STRIP,e[n.DRAW_MODES.TRIANGLES]=t.TRIANGLES,e[n.DRAW_MODES.TRIANGLE_STRIP]=t.TRIANGLE_STRIP,e[n.DRAW_MODES.TRIANGLE_FAN]=t.TRIANGLE_FAN,e};var n=t("../../../const")},{"../../../const":42}],96:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t){t.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}},{}],97:[function(t,e,i){"use strict";i.__esModule=!0;var n=s(t("./utils/maxRecommendedTextures")),r=s(t("./utils/canUploadSameBuffer"));function s(t){return t&&t.__esModule?t:{default:t}}i.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,n.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@(.+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,r.default)()}},{"./utils/canUploadSameBuffer":114,"./utils/maxRecommendedTextures":118}],98:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=t("../math"),s=t("../utils"),a=t("../const"),o=h(t("../textures/Texture")),l=h(t("../display/Container"));function h(t){return t&&t.__esModule?t:{default:t}}var u=new r.Point,c=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return n._anchor=new r.ObservablePoint(n._onAnchorUpdate,n),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=a.BLEND_MODES.NORMAL,n.shader=null,n.cachedTint=16777215,n.texture=i||o.default.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n.pluginName="sprite",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._width&&(this.scale.x=(0,s.sign)(this.scale.x)*this._width/this.texture.orig.width),this._height&&(this.scale.y=(0,s.sign)(this.scale.y)*this._height/this.texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1},e.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var t=this._texture,e=this.transform.worldTransform,i=e.a,n=e.b,r=e.c,s=e.d,a=e.tx,o=e.ty,l=this.vertexData,h=t.trim,u=t.orig,c=this._anchor,d=0,f=0,p=0,_=0;h?(d=(f=h.x-c._x*u.width)+h.width,p=(_=h.y-c._y*u.height)+h.height):(d=u.width*(1-c._x),f=u.width*-c._x,p=u.height*(1-c._y),_=u.height*-c._y),l[0]=i*f+r*_+a,l[1]=s*_+n*f+o,l[2]=i*d+r*_+a,l[3]=s*_+n*d+o,l[4]=i*d+r*p+a,l[5]=s*p+n*d+o,l[6]=i*f+r*p+a,l[7]=s*p+n*f+o}},e.prototype.calculateTrimmedVertices=function(){this.vertexTrimmedData||(this.vertexTrimmedData=new Float32Array(8));var t=this._texture,e=this.vertexTrimmedData,i=t.orig,n=this._anchor,r=this.transform.worldTransform,s=r.a,a=r.b,o=r.c,l=r.d,h=r.tx,u=r.ty,c=i.width*(1-n._x),d=i.width*-n._x,f=i.height*(1-n._y),p=i.height*-n._y;e[0]=s*d+o*p+h,e[1]=l*p+a*d+u,e[2]=s*c+o*p+h,e[3]=l*p+a*c+u,e[4]=s*c+o*f+h,e[5]=l*f+a*c+u,e[6]=s*d+o*f+h,e[7]=l*f+a*d+u},e.prototype._renderWebGL=function(t){this.calculateVertices(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._x),e||(this._localBoundsRect||(this._localBoundsRect=new r.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,u);var e=this._texture.orig.width,i=this._texture.orig.height,n=-e*this.anchor.x,r=0;return u.x>n&&u.x<n+e&&(r=-i*this.anchor.y,u.y>r&&u.y<r+i)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var i="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!i)}this._texture=null,this.shader=null},e.from=function(t){return new e(o.default.from(t))},e.fromFrame=function(t){var i=s.TextureCache[t];if(!i)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return new e(i)},e.fromImage=function(t,i,n){return new e(o.default.fromImage(t,i,n))},n(e,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=(0,s.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=(0,s.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"anchor",get:function(){return this._anchor},set:function(t){this._anchor.copy(t)}},{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)}},{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,this.cachedTint=16777215,this._textureID=-1,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}]),e}(l.default);i.default=c},{"../const":42,"../display/Container":44,"../math":66,"../textures/Texture":109,"../utils":117}],99:[function(t,e,i){"use strict";i.__esModule=!0;var n=o(t("../../renderers/canvas/CanvasRenderer")),r=t("../../const"),s=t("../../math"),a=o(t("./CanvasTinter"));function o(t){return t&&t.__esModule?t:{default:t}}var l=new s.Matrix,h=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e}return t.prototype.render=function(t){var e=t._texture,i=this.renderer,n=e._frame.width,o=e._frame.height,h=t.transform.worldTransform,u=0,c=0;if(!(e.orig.width<=0||e.orig.height<=0)&&e.baseTexture.source&&(i.setBlendMode(t.blendMode),e.valid)){i.context.globalAlpha=t.worldAlpha;var d=e.baseTexture.scaleMode===r.SCALE_MODES.LINEAR;i.smoothProperty&&i.context[i.smoothProperty]!==d&&(i.context[i.smoothProperty]=d),e.trim?(u=e.trim.width/2+e.trim.x-t.anchor.x*e.orig.width,c=e.trim.height/2+e.trim.y-t.anchor.y*e.orig.height):(u=(.5-t.anchor.x)*e.orig.width,c=(.5-t.anchor.y)*e.orig.height),e.rotate&&(h.copy(l),h=l,s.GroupD8.matrixAppendRotationInv(h,e.rotate,u,c),u=0,c=0),u-=n/2,c-=o/2,i.roundPixels?(i.context.setTransform(h.a,h.b,h.c,h.d,h.tx*i.resolution|0,h.ty*i.resolution|0),u|=0,c|=0):i.context.setTransform(h.a,h.b,h.c,h.d,h.tx*i.resolution,h.ty*i.resolution);var f=e.baseTexture.resolution;16777215!==t.tint?(t.cachedTint!==t.tint&&(t.cachedTint=t.tint,t.tintedTexture=a.default.getTintedTexture(t,t.tint)),i.context.drawImage(t.tintedTexture,0,0,n*f,o*f,u*i.resolution,c*i.resolution,n*i.resolution,o*i.resolution)):i.context.drawImage(e.baseTexture.source,e._frame.x*f,e._frame.y*f,n*f,o*f,u*i.resolution,c*i.resolution,n*i.resolution,o*i.resolution)}},t.prototype.destroy=function(){this.renderer=null},t}();i.default=h,n.default.registerPlugin("sprite",h)},{"../../const":42,"../../math":66,"../../renderers/canvas/CanvasRenderer":73,"./CanvasTinter":100}],100:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=t("../../utils"),s=t("../../renderers/canvas/utils/canUseNewCanvasBlendModes");var a={getTintedTexture:function(t,e){var i=t.texture,n="#"+("00000"+(0|(e=a.roundColor(e))).toString(16)).substr(-6);if(i.tintCache=i.tintCache||{},i.tintCache[n])return i.tintCache[n];var r=a.canvas||document.createElement("canvas");if(a.tintMethod(i,e,r),a.convertTintToImage){var s=new Image;s.src=r.toDataURL(),i.tintCache[n]=s}else i.tintCache[n]=r,a.canvas=null;return r},tintWithMultiply:function(t,e,i){var n=i.getContext("2d"),r=t._frame.clone(),s=t.baseTexture.resolution;r.x*=s,r.y*=s,r.width*=s,r.height*=s,i.width=r.width,i.height=r.height,n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,r.width,r.height),n.globalCompositeOperation="multiply",n.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height)},tintWithOverlay:function(t,e,i){var n=i.getContext("2d"),r=t._frame.clone(),s=t.baseTexture.resolution;r.x*=s,r.y*=s,r.width*=s,r.height*=s,i.width=r.width,i.height=r.height,n.globalCompositeOperation="copy",n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,r.width,r.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height)},tintWithPerPixel:function(t,e,i){var n=i.getContext("2d"),s=t._frame.clone(),a=t.baseTexture.resolution;s.x*=a,s.y*=a,s.width*=a,s.height*=a,i.width=s.width,i.height=s.height,n.globalCompositeOperation="copy",n.drawImage(t.baseTexture.source,s.x,s.y,s.width,s.height,0,0,s.width,s.height);for(var o=(0,r.hex2rgb)(e),l=o[0],h=o[1],u=o[2],c=n.getImageData(0,0,s.width,s.height),d=c.data,f=0;f<d.length;f+=4)d[f+0]*=l,d[f+1]*=h,d[f+2]*=u;n.putImageData(c,0,0)},roundColor:function(t){var e=a.cacheStepsPerColorChannel,i=(0,r.hex2rgb)(t);return i[0]=Math.min(255,i[0]/e*e),i[1]=Math.min(255,i[1]/e*e),i[2]=Math.min(255,i[2]/e*e),(0,r.rgb2hex)(i)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,((n=s)&&n.__esModule?n:{default:n}).default)(),tintMethod:0};a.tintMethod=a.canUseMultiply?a.tintWithMultiply:a.tintWithPerPixel,i.default=a},{"../../renderers/canvas/utils/canUseNewCanvasBlendModes":76,"../../utils":117}],101:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vertices=new ArrayBuffer(e),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return t.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},t}();i.default=n},{}],102:[function(t,e,i){"use strict";i.__esModule=!0;var n=d(t("../../renderers/webgl/utils/ObjectRenderer")),r=d(t("../../renderers/webgl/WebGLRenderer")),s=d(t("../../utils/createIndicesForQuads")),a=d(t("./generateMultiTextureShader")),o=d(t("../../renderers/webgl/utils/checkMaxIfStatmentsInShader")),l=d(t("./BatchBuffer")),h=d(t("../../settings")),u=d(t("pixi-gl-core")),c=d(t("bit-twiddle"));function d(t){return t&&t.__esModule?t:{default:t}}var f=0,p=0,_=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));n.vertSize=5,n.vertByteSize=4*n.vertSize,n.size=h.default.SPRITE_BATCH_SIZE,n.buffers=[];for(var r=1;r<=c.default.nextPow2(n.size);r*=2)n.buffers.push(new l.default(4*r*n.vertByteSize));n.indices=(0,s.default)(n.size),n.shader=null,n.currentIndex=0,f=0,n.groups=[];for(var a=0;a<n.size;a++)n.groups[a]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return n.sprites=[],n.vertexBuffers=[],n.vaos=[],n.vaoMax=2,n.vertexCount=0,n.renderer.on("prerender",n.onPrerender,n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),h.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,o.default)(this.MAX_TEXTURES,t);var e=this.shader=(0,a.default)(t,this.MAX_TEXTURES);this.indexBuffer=u.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.renderer.bindVao(null);for(var i=0;i<this.vaoMax;i++)this.vertexBuffers[i]=u.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),this.vaos[i]=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(this.vertexBuffers[i],e.attributes.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(this.vertexBuffers[i],e.attributes.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(this.vertexBuffers[i],e.attributes.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12).addAttribute(this.vertexBuffers[i],e.attributes.aTextureId,t.FLOAT,!1,this.vertByteSize,16);this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},e.prototype.onPrerender=function(){this.vertexCount=0},e.prototype.render=function(t){this.currentIndex>=this.size&&this.flush(),t._texture._uvs&&(this.sprites[this.currentIndex++]=t)},e.prototype.flush=function(){if(0!==this.currentIndex){var t=this.renderer.gl,e=this.MAX_TEXTURES,i=c.default.nextPow2(this.currentIndex),n=c.default.log2(i),r=this.buffers[n],s=this.sprites,a=this.groups,o=r.float32View,l=r.uint32View,d=this.boundTextures,_=this.renderer.boundTextures,m=this.renderer.textureGC.count,g=0,v=void 0,y=void 0,b=1,E=0,T=a[0],x=void 0,w=void 0,D=s[0].blendMode;T.textureCount=0,T.start=0,T.blend=D,f++;var S=void 0;for(S=0;S<e;++S)d[S]=_[S],d[S]._virtalBoundId=S;for(S=0;S<this.currentIndex;++S){var I=s[S];if(v=I._texture.baseTexture,D!==I.blendMode&&(D=I.blendMode,y=null,E=e,f++),y!==v&&(y=v,v._enabled!==f)){if(E===e&&(f++,T.size=S-T.start,E=0,(T=a[b++]).blend=D,T.textureCount=0,T.start=S),v.touched=m,-1===v._virtalBoundId)for(var A=0;A<e;++A){var P=(A+p)%e,C=d[P];if(C._enabled!==f){p++,C._virtalBoundId=-1,v._virtalBoundId=P,d[P]=v;break}}v._enabled=f,T.textureCount++,T.ids[E]=v._virtalBoundId,T.textures[E++]=v}if(x=I.vertexData,w=I._texture._uvs.uvsUint32,this.renderer.roundPixels){var M=this.renderer.resolution;o[g]=(x[0]*M|0)/M,o[g+1]=(x[1]*M|0)/M,o[g+5]=(x[2]*M|0)/M,o[g+6]=(x[3]*M|0)/M,o[g+10]=(x[4]*M|0)/M,o[g+11]=(x[5]*M|0)/M,o[g+15]=(x[6]*M|0)/M,o[g+16]=(x[7]*M|0)/M}else o[g]=x[0],o[g+1]=x[1],o[g+5]=x[2],o[g+6]=x[3],o[g+10]=x[4],o[g+11]=x[5],o[g+15]=x[6],o[g+16]=x[7];l[g+2]=w[0],l[g+7]=w[1],l[g+12]=w[2],l[g+17]=w[3],l[g+3]=l[g+8]=l[g+13]=l[g+18]=I._tintRGB+(255*Math.min(I.worldAlpha,1)<<24),o[g+4]=o[g+9]=o[g+14]=o[g+19]=v._virtalBoundId,g+=20}for(T.size=S-T.start,h.default.CAN_UPLOAD_SAME_BUFFER?this.vertexBuffers[this.vertexCount].upload(r.vertices,0,!0):(this.vaoMax<=this.vertexCount&&(this.vaoMax++,this.vertexBuffers[this.vertexCount]=u.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),this.vaos[this.vertexCount]=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(this.vertexBuffers[this.vertexCount],this.shader.attributes.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(this.vertexBuffers[this.vertexCount],this.shader.attributes.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(this.vertexBuffers[this.vertexCount],this.shader.attributes.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12).addAttribute(this.vertexBuffers[this.vertexCount],this.shader.attributes.aTextureId,t.FLOAT,!1,this.vertByteSize,16)),this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(r.vertices,0,!1),this.vertexCount++),S=0;S<e;++S)_[S]._virtalBoundId=-1;for(S=0;S<b;++S){for(var O=a[S],L=O.textureCount,R=0;R<L;R++)y=O.textures[R],_[O.ids[R]]!==y&&this.renderer.bindTexture(y,O.ids[R],!0),y._virtalBoundId=-1;this.renderer.state.setBlendMode(O.blend),t.drawElements(t.TRIANGLES,6*O.size,t.UNSIGNED_SHORT,6*O.start*2)}this.currentIndex=0,this.sprites=[]}},e.prototype.start=function(){this.renderer.bindShader(this.shader),h.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this.vaoMax;e++)this.vertexBuffers[e]&&this.vertexBuffers[e].destroy(),this.vaos[e]&&this.vaos[e].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var i=0;i<this.buffers.length;++i)this.buffers[i].destroy()},e}(n.default);i.default=_,r.default.registerPlugin("sprite",_)},{"../../renderers/webgl/WebGLRenderer":80,"../../renderers/webgl/utils/ObjectRenderer":90,"../../renderers/webgl/utils/checkMaxIfStatmentsInShader":93,"../../settings":97,"../../utils/createIndicesForQuads":115,"./BatchBuffer":101,"./generateMultiTextureShader":103,"bit-twiddle":1,"pixi-gl-core":12}],103:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t,e){var i=a;i=(i=i.replace(/%count%/gi,e)).replace(/%forloop%/gi,function(t){var e="";e+="\n",e+="\n";for(var i=0;i<t;i++)i>0&&(e+="\nelse "),i<t-1&&(e+="if(textureId == "+i+".0)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+i+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"}(e));for(var n=new s.default(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n",i),r=[],o=0;o<e;o++)r[o]=o;return n.bind(),n.uniforms.uSamplers=r,n};var n,r=t("../../Shader"),s=(n=r)&&n.__esModule?n:{default:n};t("path");var a=["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n")},{"../../Shader":41,path:22}],104:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=c(t("../sprites/Sprite")),s=c(t("../textures/Texture")),a=t("../math"),o=t("../utils"),l=t("../const"),h=c(t("../settings")),u=c(t("./TextStyle"));function c(t){return t&&t.__esModule?t:{default:t}}var d={texture:!0,children:!1,baseTexture:!0},f=function(t){function e(i,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=r||document.createElement("canvas")).width=3,r.height=3;var o=s.default.fromCanvas(r);o.orig=new a.Rectangle,o.trim=new a.Rectangle;var l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,o));return l.canvas=r,l.context=l.canvas.getContext("2d"),l.resolution=h.default.RESOLUTION,l._text=null,l._style=null,l._styleListener=null,l._font="",l.text=i,l.style=n,l.localStyleID=-1,l}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateText=function(t){var i=this._style;if(this.localStyleID!==i.styleID&&(this.dirty=!0,this.localStyleID=i.styleID),this.dirty||!t){this._font=e.getFontStyle(i),this.context.font=this._font;for(var n=(i.wordWrap?this.wordWrap(this._text):this._text).split(/(?:\r\n|\r|\n)/),r=new Array(n.length),s=0,a=e.calculateFontProperties(this._font),o=0;o<n.length;o++){var l=this.context.measureText(n[o]).width+(n[o].length-1)*i.letterSpacing;r[o]=l,s=Math.max(s,l)}var h=s+i.strokeThickness;i.dropShadow&&(h+=i.dropShadowDistance),h+=2*i.padding,this.canvas.width=Math.ceil((h+this.context.lineWidth)*this.resolution);var u=this.style.lineHeight||a.fontSize+i.strokeThickness,c=Math.max(u,a.fontSize+i.strokeThickness)+(n.length-1)*u;i.dropShadow&&(c+=i.dropShadowDistance),this.canvas.height=Math.ceil((c+2*this._style.padding)*this.resolution),this.context.scale(this.resolution,this.resolution),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=this._font,this.context.strokeStyle=i.stroke,this.context.lineWidth=i.strokeThickness,this.context.textBaseline=i.textBaseline,this.context.lineJoin=i.lineJoin,this.context.miterLimit=i.miterLimit;var d=void 0,f=void 0;if(i.dropShadow){i.dropShadowBlur>0?(this.context.shadowColor=i.dropShadowColor,this.context.shadowBlur=i.dropShadowBlur):this.context.fillStyle=i.dropShadowColor;for(var p=Math.cos(i.dropShadowAngle)*i.dropShadowDistance,_=Math.sin(i.dropShadowAngle)*i.dropShadowDistance,m=0;m<n.length;m++)d=i.strokeThickness/2,f=i.strokeThickness/2+m*u+a.ascent,"right"===i.align?d+=s-r[m]:"center"===i.align&&(d+=(s-r[m])/2),i.fill&&(this.drawLetterSpacing(n[m],d+p+i.padding,f+_+i.padding),i.stroke&&i.strokeThickness&&(this.context.strokeStyle=i.dropShadowColor,this.drawLetterSpacing(n[m],d+p+i.padding,f+_+i.padding,!0),this.context.strokeStyle=i.stroke))}this.context.fillStyle=this._generateFillStyle(i,n);for(var g=0;g<n.length;g++)d=i.strokeThickness/2,f=i.strokeThickness/2+g*u+a.ascent,"right"===i.align?d+=s-r[g]:"center"===i.align&&(d+=(s-r[g])/2),i.stroke&&i.strokeThickness&&this.drawLetterSpacing(n[g],d+i.padding,f+i.padding,!0),i.fill&&this.drawLetterSpacing(n[g],d+i.padding,f+i.padding);this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,e,i){var n=!(arguments.length<=3||void 0===arguments[3])&&arguments[3],r=this._style.letterSpacing;if(0!==r)for(var s=String.prototype.split.call(t,""),a=e,o=0,l="";o<t.length;)l=s[o++],n?this.context.strokeText(l,a,i):this.context.fillText(l,a,i),a+=this.context.measureText(l).width+r;else n?this.context.strokeText(t,e,i):this.context.fillText(t,e,i)},e.prototype.updateTexture=function(){var t=this._texture,e=this._style;t.baseTexture.hasLoaded=!0,t.baseTexture.resolution=this.resolution,t.baseTexture.realWidth=this.canvas.width,t.baseTexture.realHeight=this.canvas.height,t.baseTexture.width=this.canvas.width/this.resolution,t.baseTexture.height=this.canvas.height/this.resolution,t.trim.width=t._frame.width=this.canvas.width/this.resolution,t.trim.height=t._frame.height=this.canvas.height/this.resolution,t.trim.x=-e.padding,t.trim.y=-e.padding,t.orig.width=t._frame.width-2*e.padding,t.orig.height=t._frame.height-2*e.padding,this._onTextureUpdate(),t.baseTexture.emit("update",t.baseTexture),this.dirty=!1},e.prototype.renderWebGL=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype.renderWebGL.call(this,e)},e.prototype._renderCanvas=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._renderCanvas.call(this,e)},e.prototype.wordWrap=function(t){for(var e="",i=t.split("\n"),n=this._style.wordWrapWidth,r=0;r<i.length;r++){for(var s=n,a=i[r].split(" "),o=0;o<a.length;o++){var l=this.context.measureText(a[o]).width;if(this._style.breakWords&&l>n)for(var h=a[o].split(""),u=0;u<h.length;u++){var c=this.context.measureText(h[u]).width;c>s?(e+="\n"+h[u],s=n-c):(0===u&&(e+=" "),e+=h[u],s-=c)}else{var d=l+this.context.measureText(" ").width;0===o||d>s?(o>0&&(e+="\n"),e+=a[o],s=n-l):(s-=d,e+=" "+a[o])}}r<i.length-1&&(e+="\n")}return e},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._onStyleChange=function(){this.dirty=!0},e.prototype._generateFillStyle=function(t,e){if(!Array.isArray(t.fill))return t.fill;if(navigator.isCocoonJS)return t.fill[0];var i=void 0,n=void 0,r=void 0,s=void 0,a=this.canvas.width/this.resolution,o=this.canvas.height/this.resolution;if(t.fillGradientType===l.TEXT_GRADIENT.LINEAR_VERTICAL){i=this.context.createLinearGradient(a/2,0,a/2,o),n=(t.fill.length+1)*e.length,r=0;for(var h=0;h<e.length;h++){r+=1;for(var u=0;u<t.fill.length;u++)s=r/n,i.addColorStop(s,t.fill[u]),r++}}else{i=this.context.createLinearGradient(0,o/2,a,o/2),n=t.fill.length+1,r=1;for(var c=0;c<t.fill.length;c++)s=r/n,i.addColorStop(s,t.fill[c]),r++}return i},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},d,e),t.prototype.destroy.call(this,e),this.context=null,this.canvas=null,this._style=null},e.getFontStyle=function(t){(t=t||{})instanceof u.default||(t=new u.default(t));var e="number"==typeof t.fontSize?t.fontSize+"px":t.fontSize,i=t.fontFamily;Array.isArray(t.fontFamily)||(i=t.fontFamily.split(","));for(var n=i.length-1;n>=0;n--){var r=i[n].trim();/([\"\'])[^\'\"]+\1/.test(r)||(r='"'+r+'"'),i[n]=r}return t.fontStyle+" "+t.fontVariant+" "+t.fontWeight+" "+e+" "+i.join(",")},e.calculateFontProperties=function(t){if(e.fontPropertiesCache[t])return e.fontPropertiesCache[t];var i={},n=e.fontPropertiesCanvas,r=e.fontPropertiesContext;r.font=t;var s=Math.ceil(r.measureText("|MÉq").width),a=Math.ceil(r.measureText("M").width),o=2*a;a=1.4*a|0,n.width=s,n.height=o,r.fillStyle="#f00",r.fillRect(0,0,s,o),r.font=t,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText("|MÉq",0,a);var l=r.getImageData(0,0,s,o).data,h=l.length,u=4*s,c=0,d=0,f=!1;for(c=0;c<a;++c){for(var p=0;p<u;p+=4)if(255!==l[d+p]){f=!0;break}if(f)break;d+=u}for(i.ascent=a-c,d=h-u,f=!1,c=o;c>a;--c){for(var _=0;_<u;_+=4)if(255!==l[d+_]){f=!0;break}if(f)break;d-=u}return i.descent=c-a,i.fontSize=i.ascent+i.descent,e.fontPropertiesCache[t]=i,i},n(e,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=(0,o.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=(0,o.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"style",get:function(){return this._style},set:function(t){(t=t||{})instanceof u.default?this._style=t:this._style=new u.default(t),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(t){t=String(t||" "),this._text!==t&&(this._text=t,this.dirty=!0)}}]),e}(r.default);i.default=f,f.fontPropertiesCache={},f.fontPropertiesCanvas=document.createElement("canvas"),f.fontPropertiesContext=f.fontPropertiesCanvas.getContext("2d")},{"../const":42,"../math":66,"../settings":97,"../sprites/Sprite":98,"../textures/Texture":109,"../utils":117,"./TextStyle":105}],105:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=t("../const"),s=t("../utils");var a={align:"left",breakWords:!1,dropShadow:!1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"#000000",dropShadowDistance:5,fill:"black",fillGradientType:r.TEXT_GRADIENT.LINEAR_VERTICAL,fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",wordWrap:!1,wordWrapWidth:100},o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.styleID=0,Object.assign(this,a,e)}return t.prototype.clone=function(){var e={};for(var i in a)e[i]=this[i];return new t(e)},t.prototype.reset=function(){Object.assign(this,a)},n(t,[{key:"align",get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(t){var e=h(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(t){var e=h(t);this._fill!==e&&(this._fill=e,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(t){var e=h(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}}]),t}();function l(t){return"number"==typeof t?(0,s.hex2string)(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function h(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=l(t[e]);return t}return l(t)}i.default=o},{"../const":42,"../utils":117}],106:[function(t,e,i){"use strict";i.__esModule=!0;var n=s(t("./BaseTexture")),r=s(t("../settings"));function s(t){return t&&t.__esModule?t:{default:t}}var a=r.default.RESOLUTION,o=r.default.SCALE_MODE,l=function(t){function e(){var i=arguments.length<=0||void 0===arguments[0]?100:arguments[0],n=arguments.length<=1||void 0===arguments[1]?100:arguments[1],r=arguments[2],s=arguments[3];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,null,r));return l.resolution=s||a,l.width=i,l.height=n,l.realWidth=l.width*l.resolution,l.realHeight=l.height*l.resolution,l.scaleMode=r||o,l.hasLoaded=!0,l._glRenderTargets={},l._canvasRenderTarget=null,l.valid=!1,l}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.resize=function(t,e){t===this.width&&e===this.height||(this.valid=t>0&&e>0,this.width=t,this.height=e,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},e.prototype.destroy=function(){t.prototype.destroy.call(this,!0),this.renderer=null},e}(n.default);i.default=l},{"../settings":97,"./BaseTexture":107}],107:[function(t,e,i){"use strict";i.__esModule=!0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},r=t("../utils"),s=h(t("../settings")),a=h(t("eventemitter3")),o=h(t("../utils/determineCrossOrigin")),l=h(t("bit-twiddle"));function h(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(i,n,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return o.uid=(0,r.uid)(),o.touched=0,o.resolution=a||s.default.RESOLUTION,o.width=100,o.height=100,o.realWidth=100,o.realHeight=100,o.scaleMode=n||s.default.SCALE_MODE,o.hasLoaded=!1,o.isLoading=!1,o.source=null,o.origSource=null,o.imageType=null,o.sourceScale=1,o.premultipliedAlpha=!0,o.imageUrl=null,o.isPowerOfTwo=!1,o.mipmap=s.default.MIPMAP_TEXTURES,o.wrapMode=s.default.WRAP_MODE,o._glTextures={},o._enabled=0,o._virtalBoundId=-1,i&&o.loadSource(i),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=l.default.isPow2(this.realWidth)&&l.default.isPow2(this.realHeight)),this.emit("update",this)},e.prototype.loadSource=function(t){var e=this,i=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,i&&this.source&&(this.source.onload=null,this.source.onerror=null);var r=!this.source;if(this.source=t,(t.src&&t.complete||t.getContext)&&t.width&&t.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),r&&this.emit("loaded",this);else if(!t.getContext){var s=function(){e.isLoading=!0;var n=e;if(t.onload=function(){n._updateImageType(),t.onload=null,t.onerror=null,n.isLoading&&(n.isLoading=!1,n._sourceLoaded(),"svg"!==n.imageType?n.emit("loaded",n):n._loadSvgSource())},t.onerror=function(){t.onload=null,t.onerror=null,n.isLoading&&(n.isLoading=!1,n.emit("error",n))},t.complete&&t.src){if(t.onload=null,t.onerror=null,"svg"===n.imageType)return n._loadSvgSource(),{v:void 0};e.isLoading=!1,t.width&&t.height?(e._sourceLoaded(),i&&e.emit("loaded",e)):i&&e.emit("error",e)}}();if("object"===(void 0===s?"undefined":n(s)))return s.v}},e.prototype._updateImageType=function(){if(this.imageUrl){var t=(0,r.decomposeDataUri)(this.imageUrl),e=void 0;if(t&&"image"===t.mediaType){var i=t.subType.split("+")[0];if(!(e=(0,r.getUrlFileExtension)("."+i)))throw new Error("Invalid image type in data URI.")}else(e=(0,r.getUrlFileExtension)(this.imageUrl))||(e="png");this.imageType=e}},e.prototype._loadSvgSource=function(){if("svg"===this.imageType){var t=(0,r.decomposeDataUri)(this.imageUrl);t?this._loadSvgSourceUsingDataUri(t):this._loadSvgSourceUsingXhr()}},e.prototype._loadSvgSourceUsingDataUri=function(t){var e=void 0;if("base64"===t.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");e=atob(t.data)}else e=t.data;this._loadSvgSourceUsingString(e)},e.prototype._loadSvgSourceUsingXhr=function(){var t=this,e=new XMLHttpRequest;e.onload=function(){if(e.readyState!==e.DONE||200!==e.status)throw new Error("Failed to load SVG using XHR.");t._loadSvgSourceUsingString(e.response)},e.onerror=function(){return t.emit("error",t)},e.open("GET",this.imageUrl,!0),e.send()},e.prototype._loadSvgSourceUsingString=function(t){var e=(0,r.getSvgSize)(t),i=e.width,n=e.height;if(!i||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(i*this.sourceScale),this.realHeight=Math.round(n*this.sourceScale),this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=l.default.isPow2(this.realWidth)&&l.default.isPow2(this.realHeight);var s=document.createElement("canvas");s.width=this.realWidth,s.height=this.realHeight,s._pixiId="canvas_"+(0,r.uid)(),s.getContext("2d").drawImage(this.source,0,0,i,n,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=s,r.BaseTextureCache[s._pixiId]=this,this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},e.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},e.prototype.destroy=function(){this.imageUrl&&(delete r.BaseTextureCache[this.imageUrl],delete r.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source&&this.source._pixiId&&delete r.BaseTextureCache[this.source._pixiId],this.source=null,this.dispose()},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.updateSourceImage=function(t){this.source.src=t,this.loadSource(this.source)},e.fromImage=function(t,i,n,s){var a=r.BaseTextureCache[t];if(!a){var l=new Image;void 0===i&&0!==t.indexOf("data:")&&(l.crossOrigin=(0,o.default)(t)),(a=new e(l,n)).imageUrl=t,s&&(a.sourceScale=s),a.resolution=(0,r.getResolutionOfUrl)(t),l.src=t,r.BaseTextureCache[t]=a}return a},e.fromCanvas=function(t,i){t._pixiId||(t._pixiId="canvas_"+(0,r.uid)());var n=r.BaseTextureCache[t._pixiId];return n||(n=new e(t,i),r.BaseTextureCache[t._pixiId]=n),n},e}(a.default);i.default=u},{"../settings":97,"../utils":117,"../utils/determineCrossOrigin":116,"bit-twiddle":1,eventemitter3:3}],108:[function(t,e,i){"use strict";i.__esModule=!0;var n=r(t("./BaseRenderTexture"));function r(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function e(i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=null;if(!(i instanceof n.default)){var a=arguments[1],o=arguments[2],l=arguments[3]||0,h=arguments[4]||1;console.warn("Please use RenderTexture.create("+a+", "+o+") instead of the ctor directly."),s=arguments[0],r=null,i=new n.default(a,o,l,h)}var u=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,r));return u.legacyRenderer=s,u.valid=!0,u._updateUvs(),u}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.resize=function(t,e,i){this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,i||this.baseTexture.resize(t,e),this._updateUvs()},e.create=function(t,i,r,s){return new e(new n.default(t,i,r,s))},e}(r(t("./Texture")).default);i.default=s},{"./BaseRenderTexture":106,"./Texture":109}],109:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=u(t("./BaseTexture")),s=u(t("./VideoBaseTexture")),a=u(t("./TextureUvs")),o=u(t("eventemitter3")),l=t("../math"),h=t("../utils");function u(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(i,n,r,s,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));if(o.noFrame=!1,n||(o.noFrame=!0,n=new l.Rectangle(0,0,1,1)),i instanceof e&&(i=i.baseTexture),o.baseTexture=i,o._frame=n,o.trim=s,o.valid=!1,o.requiresUpdate=!1,o._uvs=null,o.orig=r||n,o._rotate=Number(a||0),!0===a)o._rotate=2;else if(o._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return i.hasLoaded?(o.noFrame&&(n=new l.Rectangle(0,0,i.width,i.height),i.on("update",o.onBaseTextureUpdated,o)),o.frame=n):i.once("loaded",o.onBaseTextureLoaded,o),o._updateID=0,o.transform=null,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.update=function(){this.baseTexture.update()},e.prototype.onBaseTextureLoaded=function(t){this._updateID++,this.noFrame?this.frame=new l.Rectangle(0,0,t.width,t.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},e.prototype.onBaseTextureUpdated=function(t){this._updateID++,this._frame.width=t.width,this._frame.height=t.height,this.emit("update",this)},e.prototype.destroy=function(t){this.baseTexture&&(t&&(h.TextureCache[this.baseTexture.imageUrl]&&delete h.TextureCache[this.baseTexture.imageUrl],this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,this.off("dispose",this.dispose,this),this.off("update",this.update,this)},e.prototype.clone=function(){return new e(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},e.prototype._updateUvs=function(){this._uvs||(this._uvs=new a.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.fromImage=function(t,i,n,s){var a=h.TextureCache[t];return a||(a=new e(r.default.fromImage(t,i,n,s)),h.TextureCache[t]=a),a},e.fromFrame=function(t){var e=h.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return e},e.fromCanvas=function(t,i){return new e(r.default.fromCanvas(t,i))},e.fromVideo=function(t,i){return"string"==typeof t?e.fromVideoUrl(t,i):new e(s.default.fromVideo(t,i))},e.fromVideoUrl=function(t,i){return new e(s.default.fromUrl(t,i))},e.from=function(t){if("string"==typeof t){var i=h.TextureCache[t];return i||(null!==t.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?e.fromVideoUrl(t):e.fromImage(t))}return t instanceof HTMLImageElement?new e(new r.default(t)):t instanceof HTMLCanvasElement?e.fromCanvas(t):t instanceof HTMLVideoElement?e.fromVideo(t):t instanceof r.default?new e(t):t},e.addTextureToCache=function(t,e){h.TextureCache[e]=t},e.removeTextureFromCache=function(t){var e=h.TextureCache[t];return delete h.TextureCache[t],delete h.BaseTextureCache[t],e},n(e,[{key:"frame",get:function(){return this._frame},set:function(t){if(this._frame=t,this.noFrame=!1,t.x+t.width>this.baseTexture.width||t.y+t.height>this.baseTexture.height)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=t&&t.width&&t.height&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=t),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),e}(o.default);i.default=c,c.EMPTY=new c(new r.default),c.EMPTY.destroy=function(){},c.EMPTY.on=function(){},c.EMPTY.once=function(){},c.EMPTY.emit=function(){}},{"../math":66,"../utils":117,"./BaseTexture":107,"./TextureUvs":110,"./VideoBaseTexture":111,eventemitter3:3}],110:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=t("../math/GroupD8"),s=(n=r)&&n.__esModule?n:{default:n};var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return t.prototype.set=function(t,e,i){var n=e.width,r=e.height;if(i){var a=t.width/2/n,o=t.height/2/r,l=t.x/n+a,h=t.y/r+o;i=s.default.add(i,s.default.NW),this.x0=l+a*s.default.uX(i),this.y0=h+o*s.default.uY(i),i=s.default.add(i,2),this.x1=l+a*s.default.uX(i),this.y1=h+o*s.default.uY(i),i=s.default.add(i,2),this.x2=l+a*s.default.uX(i),this.y2=h+o*s.default.uY(i),i=s.default.add(i,2),this.x3=l+a*s.default.uX(i),this.y3=h+o*s.default.uY(i)}else this.x0=t.x/n,this.y0=t.y/r,this.x1=(t.x+t.width)/n,this.y1=t.y/r,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/r,this.x3=t.x/n,this.y3=(t.y+t.height)/r;this.uvsUint32[0]=(65535*this.y0&65535)<<16|65535*this.x0&65535,this.uvsUint32[1]=(65535*this.y1&65535)<<16|65535*this.x1&65535,this.uvsUint32[2]=(65535*this.y2&65535)<<16|65535*this.x2&65535,this.uvsUint32[3]=(65535*this.y3&65535)<<16|65535*this.x3&65535},t}();i.default=a},{"../math/GroupD8":62}],111:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("./BaseTexture"),a=(n=s)&&n.__esModule?n:{default:n},o=t("../utils"),l=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t("../ticker"));var h=function(t){function e(i,n){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),!i)throw new Error("No video source element specified.");(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,n));return r.width=i.videoWidth,r.height=i.videoHeight,r._autoUpdate=!0,r._isAutoUpdating=!1,r.autoPlay=!0,r.update=r.update.bind(r),r._onCanPlay=r._onCanPlay.bind(r),i.addEventListener("play",r._onPlayStart.bind(r)),i.addEventListener("pause",r._onPlayStop.bind(r)),r.hasLoaded=!1,r.__loaded=!1,r._isSourceReady()?r._onCanPlay():(i.addEventListener("canplay",r._onCanPlay),i.addEventListener("canplaythrough",r._onCanPlay)),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},e.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(l.shared.add(this.update,this),this._isAutoUpdating=!0)},e.prototype._onPlayStop=function(){this._isAutoUpdating&&(l.shared.remove(this.update,this),this._isAutoUpdating=!1)},e.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},e.prototype.destroy=function(){this._isAutoUpdating&&l.shared.remove(this.update,this),this.source&&this.source._pixiId&&(delete o.BaseTextureCache[this.source._pixiId],delete this.source._pixiId),t.prototype.destroy.call(this)},e.fromVideo=function(t,i){t._pixiId||(t._pixiId="video_"+(0,o.uid)());var n=o.BaseTextureCache[t._pixiId];return n||(n=new e(t,i),o.BaseTextureCache[t._pixiId]=n),n},e.fromUrl=function(t,i){var n=document.createElement("video");if(n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline",""),Array.isArray(t))for(var r=0;r<t.length;++r)n.appendChild(u(t[r].src||t[r],t[r].mime));else n.appendChild(u(t.src||t,t.mime));return n.load(),e.fromVideo(n,i)},r(e,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isAutoUpdating?(l.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(l.shared.add(this.update,this),this._isAutoUpdating=!0))}}]),e}(a.default);function u(t,e){e||(e="video/"+t.substr(t.lastIndexOf(".")+1));var i=document.createElement("source");return i.src=t,i.type=e,i}i.default=h,h.fromUrls=h.fromUrl},{"../ticker":113,"../utils":117,"./BaseTexture":107}],112:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=a(t("../settings")),s=a(t("eventemitter3"));function a(t){return t&&t.__esModule?t:{default:t}}var o="tick",l=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._emitter=new s.default,this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/r.default.TARGET_FPMS,this.lastTime=0,this.speed=1,this.started=!1,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._emitter.listeners(o,!0)&&(e._requestId=requestAnimationFrame(e._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._emitter.listeners(o,!0)&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e){return this._emitter.on(o,t,e),this._startIfPossible(),this},t.prototype.addOnce=function(t,e){return this._emitter.once(o,t,e),this._startIfPossible(),this},t.prototype.remove=function(t,e){return this._emitter.off(o,t,e),this._emitter.listeners(o,!0)||this._cancelIfNeeded(),this},t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.update=function(){var t=arguments.length<=0||void 0===arguments[0]?performance.now():arguments[0],e=void 0;t>this.lastTime?((e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),this.deltaTime=e*r.default.TARGET_FPMS*this.speed,this._emitter.emit(o,this.deltaTime)):this.deltaTime=this.elapsedMS=0,this.lastTime=t},n(t,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(Math.max(0,t)/1e3,r.default.TARGET_FPMS);this._maxElapsedMS=1/e}}]),t}();i.default=l},{"../settings":97,eventemitter3:3}],113:[function(t,e,i){"use strict";i.__esModule=!0,i.Ticker=i.shared=void 0;var n,r=t("./Ticker"),s=(n=r)&&n.__esModule?n:{default:n};var a=new s.default;a.autoStart=!0,i.shared=a,i.Ticker=s.default},{"./Ticker":112}],114:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(){return!(navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))}},{}],115:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t){for(var e=6*t,i=new Uint16Array(e),n=0,r=0;n<e;n+=6,r+=4)i[n+0]=r+0,i[n+1]=r+1,i[n+2]=r+2,i[n+3]=r+0,i[n+4]=r+2,i[n+5]=r+3;return i}},{}],116:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t){var e=arguments.length<=1||void 0===arguments[1]?window.location:arguments[1];if(0===t.indexOf("data:"))return"";e=e||window.location,a||(a=document.createElement("a"));a.href=t;var i=!(t=s.default.parse(a.href)).port&&""===e.port||t.port===e.port;if(t.hostname!==e.hostname||!i||t.protocol!==e.protocol)return"anonymous";return""};var n,r=t("url"),s=(n=r)&&n.__esModule?n:{default:n};var a=void 0},{url:28}],117:[function(t,e,i){"use strict";i.__esModule=!0,i.BaseTextureCache=i.TextureCache=i.pluginTarget=i.EventEmitter=i.isMobile=void 0,i.uid=function(){return++h},i.hex2rgb=function(t,e){return(e=e||[])[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e},i.hex2string=function(t){return t=t.toString(16),"#"+(t="000000".substr(0,6-t.length)+t)},i.rgb2hex=function(t){return(255*t[0]<<16)+(255*t[1]<<8)+255*t[2]},i.getResolutionOfUrl=function(t,e){var i=r.default.RETINA_PREFIX.exec(t);if(i)return parseFloat(i[1]);return void 0!==e?e:1},i.decomposeDataUri=function(t){var e=n.DATA_URI.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,encoding:e[3]?e[3].toLowerCase():void 0,data:e[4]};return},i.getUrlFileExtension=function(t){var e=n.URL_FILE_EXTENSION.exec(t);if(e)return e[1].toLowerCase();return},i.getSvgSize=function(t){var e=n.SVG_SIZE.exec(t),i={};e&&(i[e[1]]=Math.round(parseFloat(e[3])),i[e[5]]=Math.round(parseFloat(e[7])));return i},i.skipHello=function(){u=!0},i.sayHello=function(t){if(u)return;if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=["\n %c %c %c Pixi.js "+n.VERSION+" - ✰ "+t+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,e)}else window.console&&window.console.log("Pixi.js "+n.VERSION+" - "+t+" - http://www.pixijs.com/");u=!0},i.isWebGLSupported=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),n=!(!i||!i.getContextAttributes().stencil);if(i){var r=i.getExtension("WEBGL_lose_context");r&&r.loseContext()}return i=null,n}catch(t){return!1}},i.sign=function(t){return 0===t?0:t<0?-1:1},i.removeItems=function(t,e,i){var n=t.length;if(e>=n||0===i)return;for(var r=n-(i=e+i>n?n-e:i),s=e;s<r;++s)t[s]=t[s+i];t.length=r};var n=t("../const"),r=l(t("../settings")),s=l(t("eventemitter3")),a=l(t("./pluginTarget")),o=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t("ismobilejs"));function l(t){return t&&t.__esModule?t:{default:t}}var h=0,u=!1;i.isMobile=o,i.EventEmitter=s.default,i.pluginTarget=a.default;i.TextureCache={},i.BaseTextureCache={}},{"../const":42,"../settings":97,"./pluginTarget":119,eventemitter3:3,ismobilejs:4}],118:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t){if(s.default.tablet||s.default.phone)return 4;return t};var n,r=t("ismobilejs"),s=(n=r)&&n.__esModule?n:{default:n}},{ismobilejs:4}],119:[function(t,e,i){"use strict";i.__esModule=!0,i.default={mixin:function(t){var e;(e=t).__plugins={},e.registerPlugin=function(t,i){e.__plugins[t]=i},e.prototype.initPlugins=function(){for(var t in this.plugins=this.plugins||{},e.__plugins)this.plugins[t]=new e.__plugins[t](this)},e.prototype.destroyPlugins=function(){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;this.plugins=null}}}},{}],120:[function(t,e,i){"use strict";var n=u(t("./core")),r=u(t("./mesh")),s=u(t("./particles")),a=u(t("./extras")),o=u(t("./filters")),l=u(t("./prepare")),h=u(t("./loaders"));function u(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function c(t){var e=(new Error).stack;void 0===e?console.warn("Deprecation Warning: ",t):(e=e.split("\n").splice(3).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",t),console.warn(e),console.groupEnd()):(console.warn("Deprecation Warning: ",t),console.warn(e)))}n.SpriteBatch=function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")},n.AssetLoader=function(){throw new ReferenceError("The loader system was overhauled in pixi v3, please see the new PIXI.loaders.Loader class.")},Object.defineProperties(n,{Stage:{enumerable:!0,get:function(){return c("You do not need to use a PIXI Stage any more, you can simply render any container."),n.Container}},DisplayObjectContainer:{enumerable:!0,get:function(){return c("DisplayObjectContainer has been shortened to Container, please use Container from now on."),n.Container}},Strip:{enumerable:!0,get:function(){return c("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),r.Mesh}},Rope:{enumerable:!0,get:function(){return c("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),r.Rope}},ParticleContainer:{enumerable:!0,get:function(){return c("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),s.ParticleContainer}},MovieClip:{enumerable:!0,get:function(){return c("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),a.AnimatedSprite}},TilingSprite:{enumerable:!0,get:function(){return c("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),a.TilingSprite}},BitmapText:{enumerable:!0,get:function(){return c("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),a.BitmapText}},blendModes:{enumerable:!0,get:function(){return c("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),n.BLEND_MODES}},scaleModes:{enumerable:!0,get:function(){return c("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),n.SCALE_MODES}},BaseTextureCache:{enumerable:!0,get:function(){return c("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),n.utils.BaseTextureCache}},TextureCache:{enumerable:!0,get:function(){return c("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),n.utils.TextureCache}},math:{enumerable:!0,get:function(){return c("The math namespace is deprecated, please access members already accessible on PIXI."),n}},AbstractFilter:{enumerable:!0,get:function(){return c("AstractFilter has been renamed to Filter, please use PIXI.Filter"),n.Filter}},TransformManual:{enumerable:!0,get:function(){return c("TransformManual has been renamed to TransformBase, please update your pixi-spine"),n.TransformBase}},TARGET_FPMS:{enumerable:!0,get:function(){return c("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),n.settings.TARGET_FPMS},set:function(t){c("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),n.settings.TARGET_FPMS=t}},FILTER_RESOLUTION:{enumerable:!0,get:function(){return c("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),n.settings.FILTER_RESOLUTION},set:function(t){c("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),n.settings.FILTER_RESOLUTION=t}},RESOLUTION:{enumerable:!0,get:function(){return c("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),n.settings.RESOLUTION},set:function(t){c("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),n.settings.RESOLUTION=t}},MIPMAP_TEXTURES:{enumerable:!0,get:function(){return c("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),n.settings.MIPMAP_TEXTURES},set:function(t){c("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),n.settings.MIPMAP_TEXTURES=t}},SPRITE_BATCH_SIZE:{enumerable:!0,get:function(){return c("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),n.settings.SPRITE_BATCH_SIZE},set:function(t){c("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),n.settings.SPRITE_BATCH_SIZE=t}},SPRITE_MAX_TEXTURES:{enumerable:!0,get:function(){return c("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),n.settings.SPRITE_MAX_TEXTURES},set:function(t){c("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),n.settings.SPRITE_MAX_TEXTURES=t}},RETINA_PREFIX:{enumerable:!0,get:function(){return c("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),n.settings.RETINA_PREFIX},set:function(t){c("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),n.settings.RETINA_PREFIX=t}},DEFAULT_RENDER_OPTIONS:{enumerable:!0,get:function(){return c("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),n.settings.RENDER_OPTIONS}}});for(var d=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION"}],f=function(t){var e=d[t];Object.defineProperty(n[e.parent],"DEFAULT",{enumerable:!0,get:function(){return c("PIXI."+e.parent+".DEFAULT has been deprecated, please use PIXI.settings."+e.target),n.settings[e.target]},set:function(t){c("PIXI."+e.parent+".DEFAULT has been deprecated, please use PIXI.settings."+e.target),n.settings[e.target]=t}})},p=0;p<d.length;p++)f(p);Object.defineProperties(a,{MovieClip:{enumerable:!0,get:function(){return c("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),a.AnimatedSprite}}}),n.DisplayObject.prototype.generateTexture=function(t,e,i){return c("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),t.generateTexture(this,e,i)},n.Graphics.prototype.generateTexture=function(t,e){return c("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(t,e)},n.RenderTexture.prototype.render=function(t,e,i,n){this.legacyRenderer.render(t,this,i,e,!n),c("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},n.RenderTexture.prototype.getImage=function(t){return c("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(t)},n.RenderTexture.prototype.getBase64=function(t){return c("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(t)},n.RenderTexture.prototype.getCanvas=function(t){return c("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(t)},n.RenderTexture.prototype.getPixels=function(t){return c("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(t)},n.Sprite.prototype.setTexture=function(t){this.texture=t,c("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},a.BitmapText.prototype.setText=function(t){this.text=t,c("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")},n.Text.prototype.setText=function(t){this.text=t,c("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},n.Text.prototype.setStyle=function(t){this.style=t,c("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},n.Text.prototype.determineFontProperties=function(t){return c("determineFontProperties is now deprecated, please use the static calculateFontProperties method, e.g : Text.calculateFontProperties(fontStyle);"),Text.calculateFontProperties(t)},Object.defineProperties(n.TextStyle.prototype,{font:{get:function(){c("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var t="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+t+" "+this._fontFamily},set:function(t){c("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),t.indexOf("italic")>1?this._fontStyle="italic":t.indexOf("oblique")>-1?this._fontStyle="oblique":this._fontStyle="normal",t.indexOf("small-caps")>-1?this._fontVariant="small-caps":this._fontVariant="normal";var e=t.split(" "),i=-1;this._fontSize=26;for(var n=0;n<e.length;++n)if(e[n].match(/(px|pt|em|%)/)){i=n,this._fontSize=e[n];break}this._fontWeight="normal";for(var r=0;r<i;++r)if(e[r].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=e[r];break}if(i>-1&&i<e.length-1){this._fontFamily="";for(var s=i+1;s<e.length;++s)this._fontFamily+=e[s]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),n.Texture.prototype.setFrame=function(t){this.frame=t,c("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},Object.defineProperties(o,{AbstractFilter:{get:function(){return c("AstractFilter has been renamed to Filter, please use PIXI.Filter"),n.AbstractFilter}},SpriteMaskFilter:{get:function(){return c("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),n.SpriteMaskFilter}}}),n.utils.uuid=function(){return c("utils.uuid() is deprecated, please use utils.uid() from now on."),n.utils.uid()},n.utils.canUseNewCanvasBlendModes=function(){return c("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),n.CanvasTinter.canUseMultiply};var _=!0;Object.defineProperty(n.utils,"_saidHello",{set:function(t){t&&(c("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),_=t},get:function(){return _}}),Object.defineProperty(l.canvas,"UPLOADS_PER_FRAME",{set:function(){c("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return c("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),Object.defineProperty(l.webgl,"UPLOADS_PER_FRAME",{set:function(){c("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return c("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),Object.defineProperties(h.Resource.prototype,{isJson:{get:function(){return c("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===h.Loader.Resource.TYPE.JSON}},isXml:{get:function(){return c("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===h.Loader.Resource.TYPE.XML}},isImage:{get:function(){return c("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===h.Loader.Resource.TYPE.IMAGE}},isAudio:{get:function(){return c("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),this.type===h.Loader.Resource.TYPE.AUDIO}},isVideo:{get:function(){return c("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===h.Loader.Resource.TYPE.VIDEO}}}),Object.defineProperties(h.Loader.prototype,{before:{get:function(){return c("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return c("The after() method is deprecated, please use use()."),this.use}}})},{"./core":61,"./extras":131,"./filters":142,"./loaders":151,"./mesh":160,"./particles":163,"./prepare":173}],121:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t("../../core"));var r=new n.Rectangle,s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e,e.extract=this}return t.prototype.image=function(t){var e=new Image;return e.src=this.base64(t),e},t.prototype.base64=function(t){return this.canvas(t).toDataURL()},t.prototype.canvas=function(t){var e=this.renderer,i=void 0,s=void 0,a=void 0,o=void 0;t&&(o=t instanceof n.RenderTexture?t:e.generateTexture(t)),o?(i=o.baseTexture._canvasRenderTarget.context,s=o.baseTexture._canvasRenderTarget.resolution,a=o.frame):(i=e.rootContext,(a=r).width=this.renderer.width,a.height=this.renderer.height);var l=a.width*s,h=a.height*s,u=new n.CanvasRenderTarget(l,h),c=i.getImageData(a.x*s,a.y*s,l,h);return u.context.putImageData(c,0,0),u.canvas},t.prototype.pixels=function(t){var e=this.renderer,i=void 0,s=void 0,a=void 0,o=void 0;return t&&(o=t instanceof n.RenderTexture?t:e.generateTexture(t)),o?(i=o.baseTexture._canvasRenderTarget.context,s=o.baseTexture._canvasRenderTarget.resolution,a=o.frame):(i=e.rootContext,(a=r).width=e.width,a.height=e.height),i.getImageData(0,0,a.width*s,a.height*s).data},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t}();i.default=s,n.CanvasRenderer.registerPlugin("extract",s)},{"../../core":61}],122:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("./webgl/WebGLExtract");Object.defineProperty(i,"webgl",{enumerable:!0,get:function(){return s(n).default}});var r=t("./canvas/CanvasExtract");function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(i,"canvas",{enumerable:!0,get:function(){return s(r).default}})},{"./canvas/CanvasExtract":121,"./webgl/WebGLExtract":123}],123:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t("../../core"));var r=new n.Rectangle,s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e,e.extract=this}return t.prototype.image=function(t){var e=new Image;return e.src=this.base64(t),e},t.prototype.base64=function(t){return this.canvas(t).toDataURL()},t.prototype.canvas=function(t){var e=this.renderer,i=void 0,s=void 0,a=void 0,o=!1,l=void 0;t&&(l=t instanceof n.RenderTexture?t:this.renderer.generateTexture(t)),l?(s=(i=l.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,a=l.frame,o=!1):(s=(i=this.renderer.rootRenderTarget).resolution,o=!0,(a=r).width=i.size.width,a.height=i.size.height);var h=a.width*s,u=a.height*s,c=new n.CanvasRenderTarget(h,u);if(i){e.bindRenderTarget(i);var d=new Uint8Array(4*h*u),f=e.gl;f.readPixels(a.x*s,a.y*s,h,u,f.RGBA,f.UNSIGNED_BYTE,d);var p=c.context.getImageData(0,0,h,u);p.data.set(d),c.context.putImageData(p,0,0),o&&(c.context.scale(1,-1),c.context.drawImage(c.canvas,0,-u))}return c.canvas},t.prototype.pixels=function(t){var e=this.renderer,i=void 0,s=void 0,a=void 0,o=void 0;t&&(o=t instanceof n.RenderTexture?t:this.renderer.generateTexture(t)),o?(s=(i=o.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,a=o.frame):(s=(i=this.renderer.rootRenderTarget).resolution,(a=r).width=i.size.width,a.height=i.size.height);var l=a.width*s,h=a.height*s,u=new Uint8Array(4*l*h);if(i){e.bindRenderTarget(i);var c=e.gl;c.readPixels(a.x*s,a.y*s,l,h,c.RGBA,c.UNSIGNED_BYTE,u)}return u},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t}();i.default=s,n.WebGLRenderer.registerPlugin("extract",s)},{"../../core":61}],124:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t("../core"));var s=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i[0]instanceof r.Texture?i[0]:i[0].texture));return n._textures=null,n._durations=null,n.textures=i,n.animationSpeed=1,n.loop=!0,n.onComplete=null,n.onFrameChange=null,n._currentTime=0,n.playing=!1,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.stop=function(){this.playing&&(this.playing=!1,r.ticker.shared.remove(this.update,this))},e.prototype.play=function(){this.playing||(this.playing=!0,r.ticker.shared.add(this.update,this))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){var e=this.animationSpeed*t,i=this.currentFrame;if(null!==this._durations){var n=this._currentTime%1*this._durations[this.currentFrame];for(n+=e/60*1e3;n<0;)this._currentTime--,n+=this._durations[this.currentFrame];var r=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);n>=this._durations[this.currentFrame];)n-=this._durations[this.currentFrame]*r,this._currentTime+=r;this._currentTime+=n/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&this.updateTexture()},e.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.onFrameChange&&this.onFrameChange(this.currentFrame)},e.prototype.destroy=function(){this.stop(),t.prototype.destroy.call(this)},e.fromFrames=function(t){for(var i=[],n=0;n<t.length;++n)i.push(r.Texture.fromFrame(t[n]));return new e(i)},e.fromImages=function(t){for(var i=[],n=0;n<t.length;++n)i.push(r.Texture.fromImage(t[n]));return new e(i)},n(e,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(t){if(t[0]instanceof r.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}}},{key:"currentFrame",get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}}]),e}(r.Sprite);i.default=s},{"../core":61}],125:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t("../core")),a=t("../core/math/ObservablePoint"),o=(n=a)&&n.__esModule?n:{default:n};var l=function(t){function e(i){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return r._textWidth=0,r._textHeight=0,r._glyphs=[],r._font={tint:void 0!==n.tint?n.tint:16777215,align:n.align||"left",name:null,size:0},r.font=n.font,r._text=i,r.maxWidth=0,r.maxLineHeight=0,r._anchor=new o.default(function(){r.dirty=!0},r,0,0),r.dirty=!1,r.updateText(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateText=function(){for(var t=e.fonts[this._font.name],i=this._font.size/t.size,n=new s.Point,r=[],a=[],o=null,l=0,h=0,u=0,c=-1,d=0,f=0,p=0;p<this.text.length;p++){var _=this.text.charCodeAt(p);if(/(\s)/.test(this.text.charAt(p))&&(c=p,d=l),/(?:\r\n|\r|\n)/.test(this.text.charAt(p)))a.push(l),h=Math.max(h,l),u++,n.x=0,n.y+=t.lineHeight,o=null;else if(-1!==c&&this.maxWidth>0&&n.x*i>this.maxWidth)s.utils.removeItems(r,c,p-c),p=c,c=-1,a.push(d),h=Math.max(h,d),u++,n.x=0,n.y+=t.lineHeight,o=null;else{var m=t.chars[_];m&&(o&&m.kerning[o]&&(n.x+=m.kerning[o]),r.push({texture:m.texture,line:u,charCode:_,position:new s.Point(n.x+m.xOffset,n.y+m.yOffset)}),l=n.x+(m.texture.width+m.xOffset),n.x+=m.xAdvance,f=Math.max(f,m.yOffset+m.texture.height),o=_)}}a.push(l),h=Math.max(h,l);for(var g=[],v=0;v<=u;v++){var y=0;"right"===this._font.align?y=h-a[v]:"center"===this._font.align&&(y=(h-a[v])/2),g.push(y)}for(var b=r.length,E=this.tint,T=0;T<b;T++){var x=this._glyphs[T];x?x.texture=r[T].texture:(x=new s.Sprite(r[T].texture),this._glyphs.push(x)),x.position.x=(r[T].position.x+g[r[T].line])*i,x.position.y=r[T].position.y*i,x.scale.x=x.scale.y=i,x.tint=E,x.parent||this.addChild(x)}for(var w=b;w<this._glyphs.length;++w)this.removeChild(this._glyphs[w]);if(this._textWidth=h*i,this._textHeight=(n.y+t.lineHeight)*i,0!==this.anchor.x||0!==this.anchor.y)for(var D=0;D<b;D++)this._glyphs[D].x-=this._textWidth*this.anchor.x,this._glyphs[D].y-=this._textHeight*this.anchor.y;this.maxLineHeight=f*i},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},r(e,[{key:"tint",get:function(){return this._font.tint},set:function(t){this._font.tint="number"==typeof t&&t>=0?t:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(t){this._font.align=t||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copy(t)}},{key:"font",get:function(){return this._font},set:function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=t.length>=2?parseInt(t[0],10):e.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),e}(s.Container);i.default=l,l.fonts={}},{"../core":61,"../core/math/ObservablePoint":64}],126:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("../core/math/Matrix"),a=(n=s)&&n.__esModule?n:{default:n};var o=new a.default,l=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._texture=e,this.mapCoord=new a.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=void 0===i?.5:i}return t.prototype.update=function(t){var e=this._texture;if(e&&e.valid&&(t||this._lastTextureID!==e._updateID)){this._lastTextureID=e._updateID;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=e.orig,r=e.trim;r&&(o.set(n.width/r.width,0,0,n.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(o));var s=e.baseTexture,a=this.uClampFrame,l=this.clampMargin/s.resolution,h=this.clampOffset;a[0]=(e._frame.x+l+h)/s.width,a[1]=(e._frame.y+l+h)/s.height,a[2]=(e._frame.x+e._frame.width-l+h)/s.width,a[3]=(e._frame.y+e._frame.height-l+h)/s.height,this.uClampOffset[0]=h/s.realWidth,this.uClampOffset[1]=h/s.realHeight}},r(t,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture=t,this._lastTextureID=-1}}]),t}();i.default=l},{"../core/math/Matrix":63}],127:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t("../core")),s=o(t("../core/sprites/canvas/CanvasTinter")),a=o(t("./TextureTransform"));function o(t){return t&&t.__esModule?t:{default:t}}var l=new r.Point,h=function(t){function e(i){var n=arguments.length<=1||void 0===arguments[1]?100:arguments[1],s=arguments.length<=2||void 0===arguments[2]?100:arguments[2];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return o.tileTransform=new r.TransformStatic,o._width=n,o._height=s,o._canvasPattern=null,o.uvTransform=i.transform||new a.default(i),o.pluginName="tilingSprite",o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture)},e.prototype._renderWebGL=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.hasLoaded){var i=t.context,n=this.worldTransform,a=t.resolution,o=e.baseTexture,l=e.baseTexture.resolution,h=this.tilePosition.x/this.tileScale.x%e._frame.width,u=this.tilePosition.y/this.tileScale.y%e._frame.height;if(!this._canvasPattern){var c=new r.CanvasRenderTarget(e._frame.width,e._frame.height,l);16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=s.default.getTintedTexture(this,this.tint)),c.context.drawImage(this.tintedTexture,0,0)):c.context.drawImage(o.source,-e._frame.x,-e._frame.y),this._canvasPattern=c.context.createPattern(c.canvas,"repeat")}i.globalAlpha=this.worldAlpha,i.setTransform(n.a*a,n.b*a,n.c*a,n.d*a,n.tx*a,n.ty*a),i.scale(this.tileScale.x/l,this.tileScale.y/l),i.translate(h+this.anchor.x*-this._width,u+this.anchor.y*-this._height),t.setBlendMode(this.blendMode),i.fillStyle=this._canvasPattern,i.fillRect(-h,-u,this._width/this.tileScale.x*l,this._height/this.tileScale.y*l)}},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),n=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,i,n)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._x),e||(this._localBoundsRect||(this._localBoundsRect=new r.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,l);var e=this._width,i=this._height,n=-e*this.anchor._x;if(l.x>n&&l.x<n+e){var r=-i*this.anchor._y;if(l.y>r&&l.y<r+i)return!0}return!1},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.tileTransform=null,this.uvTransform=null},e.from=function(t,i,n){return new e(r.Texture.from(t),i,n)},e.fromFrame=function(t,i,n){var s=r.utils.TextureCache[t];if(!s)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);return new e(s,i,n)},e.fromImage=function(t,i,n,s,a){return new e(r.Texture.fromImage(t,s,a),i,n)},n(e,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(t){this.uvTransform.clampMargin=t,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copy(t)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copy(t)}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}}]),e}(r.Sprite);i.default=h},{"../core":61,"../core/sprites/canvas/CanvasTinter":100,"./TextureTransform":126}],128:[function(t,e,i){"use strict";var n=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t("../core"));var r=n.DisplayObject,s=new n.Matrix;r.prototype._cacheAsBitmap=!1,r.prototype._cacheData=!1;var a=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(r.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){if(this._cacheAsBitmap!==t){this._cacheAsBitmap=t;var e=void 0;t?(this._cacheData||(this._cacheData=new a),(e=this._cacheData).originalRenderWebGL=this.renderWebGL,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this._calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=e.originalRenderWebGL,this.renderCanvas=e.originalRenderCanvas,this._calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}}),r.prototype._renderCachedWebGL=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(t))},r.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.currentRenderer.flush();var i=this.getLocalBounds().clone();if(this._filters){var r=this._filters[0].padding;i.pad(r)}var a=t._activeRenderTarget,o=t.filterManager.filterStack,l=n.RenderTexture.create(0|i.width,0|i.height),h=s;h.tx=-i.x,h.ty=-i.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,t.render(this,l,!0,h,!0),t.bindRenderTarget(a),t.filterManager.filterStack=o,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this._mask=null,this.filterArea=null;var u=new n.Sprite(l);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-i.x/i.width,u.anchor.y=-i.y/i.height,u.alpha=e,u._bounds=this._bounds,this._calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.updateTransform(),this.containsPoint=u.containsPoint.bind(u)}},r.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(t))},r.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(),i=this.alpha;this.alpha=1;var r=t.context,a=n.RenderTexture.create(0|e.width,0|e.height),o=s;this.transform.worldTransform.copy(o),o.invert(),o.tx-=e.x,o.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,a,!0,o,!1),t.context=r,this.renderCanvas=this._renderCachedCanvas,this._calculateBounds=this._calculateCachedBounds,this._mask=null,this.filterArea=null;var l=new n.Sprite(a);l.transform.worldTransform=this.transform.worldTransform,l.anchor.x=-e.x/e.width,l.anchor.y=-e.y/e.height,l._bounds=this._bounds,l.alpha=i,this.updateTransform(),this.updateTransform=this.displayObjectUpdateTransform,this._cacheData.sprite=l,this.containsPoint=l.containsPoint.bind(l)}},r.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()},r.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},r.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null},r.prototype._cacheAsBitmapDestroy=function(){this.cacheAsBitmap=!1,this.destroy()}},{"../core":61}],129:[function(t,e,i){"use strict";var n=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t("../core"));n.DisplayObject.prototype.name=null,n.Container.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null}},{"../core":61}],130:[function(t,e,i){"use strict";var n=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t("../core"));n.DisplayObject.prototype.getGlobalPosition=function(){var t=arguments.length<=0||void 0===arguments[0]?new n.Point:arguments[0],e=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t}},{"../core":61}],131:[function(t,e,i){"use strict";i.__esModule=!0,i.BitmapText=i.TilingSpriteRenderer=i.TilingSprite=i.AnimatedSprite=i.TextureTransform=void 0;var n=t("./TextureTransform");Object.defineProperty(i,"TextureTransform",{enumerable:!0,get:function(){return l(n).default}});var r=t("./AnimatedSprite");Object.defineProperty(i,"AnimatedSprite",{enumerable:!0,get:function(){return l(r).default}});var s=t("./TilingSprite");Object.defineProperty(i,"TilingSprite",{enumerable:!0,get:function(){return l(s).default}});var a=t("./webgl/TilingSpriteRenderer");Object.defineProperty(i,"TilingSpriteRenderer",{enumerable:!0,get:function(){return l(a).default}});var o=t("./BitmapText");function l(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(i,"BitmapText",{enumerable:!0,get:function(){return l(o).default}}),t("./cacheAsBitmap"),t("./getChildByName"),t("./getGlobalPosition")},{"./AnimatedSprite":124,"./BitmapText":125,"./TextureTransform":126,"./TilingSprite":127,"./cacheAsBitmap":128,"./getChildByName":129,"./getGlobalPosition":130,"./webgl/TilingSpriteRenderer":132}],132:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t("../../core")),r=t("../../core/const");t("path");var s=new n.Matrix,a=new Float32Array(4),o=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return n.shader=null,n.simpleShader=null,n.quad=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new n.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    vec4 color = vec4(uColor.rgb * uColor.a, uColor.a);\n\n    gl_FragColor = sample * color ;\n}\n"),this.simpleShader=new n.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    vec4 color = vec4(uColor.rgb * uColor.a, uColor.a);\n    gl_FragColor = sample * color;\n}\n"),this.renderer.bindVao(null),this.quad=new n.Quad(t,this.renderer.state.attribState),this.quad.initVao(this.shader)},e.prototype.render=function(t){var e=this.renderer,i=this.quad;e.bindVao(i.vao);var o=i.vertices;o[0]=o[6]=t._width*-t.anchor.x,o[1]=o[3]=t._height*-t.anchor.y,o[2]=o[4]=t._width*(1-t.anchor.x),o[5]=o[7]=t._height*(1-t.anchor.y),(o=i.uvs)[0]=o[6]=-t.anchor.x,o[1]=o[3]=-t.anchor.y,o[2]=o[4]=1-t.anchor.x,o[5]=o[7]=1-t.anchor.y,i.upload();var l=t._texture,h=l.baseTexture,u=t.tileTransform.localTransform,c=t.uvTransform,d=h.isPowerOfTwo&&l.frame.width===h.width&&l.frame.height===h.height;d&&(h._glTextures[e.CONTEXT_UID]?d=h.wrapMode!==r.WRAP_MODES.CLAMP:h.wrapMode===r.WRAP_MODES.CLAMP&&(h.wrapMode=r.WRAP_MODES.REPEAT));var f=d?this.simpleShader:this.shader;e.bindShader(f);var p=l.width,_=l.height,m=t._width,g=t._height;s.set(u.a*p/m,u.b*p/g,u.c*_/m,u.d*_/g,u.tx/m,u.ty/g),s.invert(),d?s.append(c.mapCoord):(f.uniforms.uMapCoord=c.mapCoord.toArray(!0),f.uniforms.uClampFrame=c.uClampFrame,f.uniforms.uClampOffset=c.uClampOffset),f.uniforms.uTransform=s.toArray(!0);var v=a;n.utils.hex2rgb(t.tint,v),v[3]=t.worldAlpha,f.uniforms.uColor=v,f.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),f.uniforms.uSampler=e.bindTexture(l),e.setBlendMode(t.blendMode),i.vao.draw(this.renderer.gl.TRIANGLES,6,0)},e}(n.ObjectRenderer);i.default=o,n.WebGLRenderer.registerPlugin("tilingSprite",o)},{"../../core":61,"../../core/const":42,path:22}],133:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t("../../core")),s=o(t("./BlurXFilter")),a=o(t("./BlurYFilter"));function o(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(i,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return l.blurXFilter=new s.default(i,n,r,o),l.blurYFilter=new a.default(i,n,r,o),l.resolution=1,l.padding=0,l.resolution=r||1,l.quality=n||4,l.blur=i||8,l}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,i){var n=t.getRenderTarget(!0);this.blurXFilter.apply(t,e,n,!0),this.blurYFilter.apply(t,n,i,!1),t.returnRenderTarget(n)},n(e,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}}]),e}(r.Filter);i.default=l},{"../../core":61,"./BlurXFilter":134,"./BlurYFilter":135}],134:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t("../../core")),s=l(t("./generateBlurVertSource")),a=l(t("./generateBlurFragSource")),o=l(t("./getMaxBlurKernelSize"));function l(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(i,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=o||5;var l=(0,s.default)(o,!0),h=(0,a.default)(o),u=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,l,h));return u.resolution=r||1,u._quality=0,u.quality=n||4,u.strength=i||8,u.firstRun=!0,u}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,i,n){if(this.firstRun){var r=t.renderer.gl,l=(0,o.default)(r);this.vertexSrc=(0,s.default)(l,!0),this.fragmentSrc=(0,a.default)(l),this.firstRun=!1}if(this.uniforms.strength=1/i.size.width*(i.size.width/e.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,n);else{for(var h=t.getRenderTarget(!0),u=e,c=h,d=0;d<this.passes-1;d++){t.applyFilter(this,u,c,!0);var f=c;c=u,u=f}t.applyFilter(this,u,i,n),t.returnRenderTarget(h)}},n(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(r.Filter);i.default=h},{"../../core":61,"./generateBlurFragSource":136,"./generateBlurVertSource":137,"./getMaxBlurKernelSize":138}],135:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t("../../core")),s=l(t("./generateBlurVertSource")),a=l(t("./generateBlurFragSource")),o=l(t("./getMaxBlurKernelSize"));function l(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(i,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=o||5;var l=(0,s.default)(o,!1),h=(0,a.default)(o),u=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,l,h));return u.resolution=r||1,u._quality=0,u.quality=n||4,u.strength=i||8,u.firstRun=!0,u}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,i,n){if(this.firstRun){var r=t.renderer.gl,l=(0,o.default)(r);this.vertexSrc=(0,s.default)(l,!1),this.fragmentSrc=(0,a.default)(l),this.firstRun=!1}if(this.uniforms.strength=1/i.size.height*(i.size.height/e.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,n);else{for(var h=t.getRenderTarget(!0),u=e,c=h,d=0;d<this.passes-1;d++){t.applyFilter(this,u,c,!0);var f=c;c=u,u=f}t.applyFilter(this,u,i,n),t.returnRenderTarget(h)}},n(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(r.Filter);i.default=h},{"../../core":61,"./generateBlurFragSource":136,"./generateBlurVertSource":137,"./getMaxBlurKernelSize":138}],136:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t){for(var e=n[t],i=e.length,s=r,a="",o=void 0,l=0;l<t;l++){var h="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",l);o=l,l>=i&&(o=t-l-1),h=h.replace("%value%",e[o]),a+=h,a+="\n"}return s=(s=s.replace("%blur%",a)).replace("%size%",t)};var n={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},r=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n")},{}],137:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t,e){var i=Math.ceil(t/2),r=n,s="",a=void 0;a=e?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var o=0;o<t;o++){var l=a.replace("%index%",o);l=l.replace("%sampleIndex%",o-(i-1)+".0"),s+=l,s+="\n"}return r=(r=r.replace("%blur%",s)).replace("%size%",t)};var n=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n")},{}],138:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t){var e=t.getParameter(t.MAX_VARYING_VECTORS),i=15;for(;i>e;)i-=2;return i}},{}],139:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t("../../core"));t("path");var s=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\n\nvoid main(void)\n{\n\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.r = (m[0] * c.r);\n        gl_FragColor.r += (m[1] * c.g);\n        gl_FragColor.r += (m[2] * c.b);\n        gl_FragColor.r += (m[3] * c.a);\n        gl_FragColor.r += m[4] * c.a;\n\n    gl_FragColor.g = (m[5] * c.r);\n        gl_FragColor.g += (m[6] * c.g);\n        gl_FragColor.g += (m[7] * c.b);\n        gl_FragColor.g += (m[8] * c.a);\n        gl_FragColor.g += m[9] * c.a;\n\n     gl_FragColor.b = (m[10] * c.r);\n        gl_FragColor.b += (m[11] * c.g);\n        gl_FragColor.b += (m[12] * c.b);\n        gl_FragColor.b += (m[13] * c.a);\n        gl_FragColor.b += m[14] * c.a;\n\n     gl_FragColor.a = (m[15] * c.r);\n        gl_FragColor.a += (m[16] * c.g);\n        gl_FragColor.a += (m[17] * c.b);\n        gl_FragColor.a += (m[18] * c.a);\n        gl_FragColor.a += m[19] * c.a;\n\n//    gl_FragColor = vec4(m[0]);\n}\n"));return i.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._loadMatrix=function(t){var e=t;!(arguments.length<=1||void 0===arguments[1])&&arguments[1]&&(this._multiply(e,this.uniforms.m,t),e=this._colorMatrix(e)),this.uniforms.m=e},e.prototype._multiply=function(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.greyscale=function(t,e){var i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var i=Math.cos(t),n=Math.sin(t),r=(0,Math.sqrt)(1/3),s=[i+1/3*(1-i),1/3*(1-i)-r*n,1/3*(1-i)+r*n,0,0,1/3*(1-i)+r*n,i+1/3*(1-i),1/3*(1-i)-r*n,0,0,1/3*(1-i)-r*n,1/3*(1-i)+r*n,i+1/3*(1-i),0,0,0,0,0,1,0];this._loadMatrix(s,e)},e.prototype.contrast=function(t,e){var i=(t||0)+1,n=-128*(i-1),r=[i,0,0,0,n,0,i,0,0,n,0,0,i,0,n,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.saturate=function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0],e=arguments[1],i=2*t/3+1,n=-.5*(i-1),r=[i,n,n,0,0,n,i,n,0,0,n,n,i,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,e,i,n,r){t=t||.2,e=e||.15;var s=((i=i||16770432)>>16&255)/255,a=(i>>8&255)/255,o=(255&i)/255,l=((n=n||3375104)>>16&255)/255,h=(n>>8&255)/255,u=(255&n)/255,c=[.3,.59,.11,0,0,s,a,o,t,0,l,h,u,e,0,s-l,a-h,o-u,0,0];this._loadMatrix(c,r)},e.prototype.night=function(t,e){var i=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.predator=function(t,e){var i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},n(e,[{key:"matrix",get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t}}]),e}(r.Filter);i.default=s,s.prototype.grayscale=s.prototype.greyscale},{"../../core":61,path:22}],140:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t("../../core"));t("path");var s=function(t){function e(i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=new r.Matrix;i.renderable=!1;var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));return a.maskSprite=i,a.maskMatrix=s,a.uniforms.mapSampler=i.texture,a.uniforms.filterMatrix=s.toArray(!0),a.uniforms.scale={x:1,y:1},null!==n&&void 0!==n||(n=20),a.scale=new r.Point(n,n),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,i){var n=1/i.destinationFrame.width*(i.size.width/e.size.width);this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x*n,this.uniforms.scale.y=this.scale.y*n,t.applyFilter(this,e,i)},n(e,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t}}]),e}(r.Filter);i.default=s},{"../../core":61,path:22}],141:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t("../../core"));t("path");var r=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(n.Filter);i.default=r},{"../../core":61,path:22}],142:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("./fxaa/FXAAFilter");Object.defineProperty(i,"FXAAFilter",{enumerable:!0,get:function(){return c(n).default}});var r=t("./noise/NoiseFilter");Object.defineProperty(i,"NoiseFilter",{enumerable:!0,get:function(){return c(r).default}});var s=t("./displacement/DisplacementFilter");Object.defineProperty(i,"DisplacementFilter",{enumerable:!0,get:function(){return c(s).default}});var a=t("./blur/BlurFilter");Object.defineProperty(i,"BlurFilter",{enumerable:!0,get:function(){return c(a).default}});var o=t("./blur/BlurXFilter");Object.defineProperty(i,"BlurXFilter",{enumerable:!0,get:function(){return c(o).default}});var l=t("./blur/BlurYFilter");Object.defineProperty(i,"BlurYFilter",{enumerable:!0,get:function(){return c(l).default}});var h=t("./colormatrix/ColorMatrixFilter");Object.defineProperty(i,"ColorMatrixFilter",{enumerable:!0,get:function(){return c(h).default}});var u=t("./void/VoidFilter");function c(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(i,"VoidFilter",{enumerable:!0,get:function(){return c(u).default}})},{"./blur/BlurFilter":133,"./blur/BlurXFilter":134,"./blur/BlurYFilter":135,"./colormatrix/ColorMatrixFilter":139,"./displacement/DisplacementFilter":140,"./fxaa/FXAAFilter":141,"./noise/NoiseFilter":143,"./void/VoidFilter":144}],143:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t("../../core"));t("path");var s=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float noise;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    float diff = (rand(gl_FragCoord.xy) - 0.5) * noise;\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    gl_FragColor = color;\n}\n"));return i.noise=.5,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"noise",get:function(){return this.uniforms.noise},set:function(t){this.uniforms.noise=t}}]),e}(r.Filter);i.default=s},{"../../core":61,path:22}],144:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t("../../core"));t("path");var r=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"));return i.glShaderKey="void",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(n.Filter);i.default=r},{"../../core":61,path:22}],145:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t("../core"));var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.global=new n.Point,this.target=null,this.originalEvent=null}return t.prototype.getLocalPosition=function(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)},t}();i.default=r},{"../core":61}],146:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0},t.prototype._reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},t}();i.default=n},{}],147:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t("../core")),r=h(t("./InteractionData")),s=h(t("./InteractionEvent")),a=h(t("eventemitter3")),o=h(t("./interactiveTarget")),l=h(t("ismobilejs"));function h(t){return t&&t.__esModule?t:{default:t}}Object.assign(n.DisplayObject.prototype,o.default);var u=function(t){function e(i,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return a=a||{},o.renderer=i,o.autoPreventDefault=void 0===a.autoPreventDefault||a.autoPreventDefault,o.interactionFrequency=a.interactionFrequency||10,o.mouse=new r.default,o.mouse.global.set(-999999),o.pointer=new r.default,o.pointer.global.set(-999999),o.eventData=new s.default,o.interactiveDataPool=[],o.interactionDOMElement=null,o.moveWhenInside=!1,o.eventsAdded=!1,o.mouseOverRenderer=!1,o.supportsTouchEvents="ontouchstart"in window,o.supportsPointerEvents=!!window.PointerEvent,o.normalizeTouchEvents=!o.supportsPointerEvents&&o.supportsTouchEvents,o.normalizeMouseEvents=!o.supportsPointerEvents&&!l.default.any,o.onMouseUp=o.onMouseUp.bind(o),o.processMouseUp=o.processMouseUp.bind(o),o.onMouseDown=o.onMouseDown.bind(o),o.processMouseDown=o.processMouseDown.bind(o),o.onMouseMove=o.onMouseMove.bind(o),o.processMouseMove=o.processMouseMove.bind(o),o.onMouseOut=o.onMouseOut.bind(o),o.processMouseOverOut=o.processMouseOverOut.bind(o),o.onMouseOver=o.onMouseOver.bind(o),o.onPointerUp=o.onPointerUp.bind(o),o.processPointerUp=o.processPointerUp.bind(o),o.onPointerDown=o.onPointerDown.bind(o),o.processPointerDown=o.processPointerDown.bind(o),o.onPointerMove=o.onPointerMove.bind(o),o.processPointerMove=o.processPointerMove.bind(o),o.onPointerOut=o.onPointerOut.bind(o),o.processPointerOverOut=o.processPointerOverOut.bind(o),o.onPointerOver=o.onPointerOver.bind(o),o.onTouchStart=o.onTouchStart.bind(o),o.processTouchStart=o.processTouchStart.bind(o),o.onTouchEnd=o.onTouchEnd.bind(o),o.processTouchEnd=o.processTouchEnd.bind(o),o.onTouchMove=o.onTouchMove.bind(o),o.processTouchMove=o.processTouchMove.bind(o),o.defaultCursorStyle="inherit",o.currentCursorStyle="inherit",o._tempPoint=new n.Point,o.resolution=1,o.setTargetElement(o.renderer.view,o.renderer.resolution),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.setTargetElement=function(t){var e=arguments.length<=1||void 0===arguments[1]?1:arguments[1];this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents()},e.prototype.addEvents=function(){this.interactionDOMElement&&(n.ticker.shared.add(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(this.normalizeTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.normalizeMouseEvents&&(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0))),window.document.addEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onMouseOver,!0),window.addEventListener("mouseup",this.onMouseUp,!0),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.addEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.addEventListener("touchmove",this.onTouchMove,!0)),this.eventsAdded=!0)},e.prototype.removeEvents=function(){this.interactionDOMElement&&(n.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(this.normalizeTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.normalizeMouseEvents&&(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0))),window.document.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onMouseOver,!0),window.removeEventListener("mouseup",this.onMouseUp,!0),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},e.prototype.update=function(t){this._deltaTime+=t,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.interactionDOMElement&&(this.didMove?this.didMove=!1:(this.cursor=this.defaultCursorStyle,this.eventData._reset(),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!0),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor))))},e.prototype.dispatchEvent=function(t,e,i){i.stopped||(i.currentTarget=t,i.type=e,t.emit(e,i),t[e]&&t[e](i))},e.prototype.mapPositionToPoint=function(t,e,i){var n=void 0;n=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var r=navigator.isCocoonJS?1:1/this.resolution;t.x=(e-n.left)*(this.interactionDOMElement.width/n.width)*r,t.y=(i-n.top)*(this.interactionDOMElement.height/n.height)*r},e.prototype.processInteractive=function(t,e,i,n,r){if(!e||!e.visible)return!1;var s=!1,a=r=e.interactive||r;if(e.hitArea&&(a=!1),n&&e._mask&&(e._mask.containsPoint(t)||(n=!1)),n&&e.filterArea&&(e.filterArea.contains(t.x,t.y)||(n=!1)),e.interactiveChildren&&e.children)for(var o=e.children,l=o.length-1;l>=0;l--){var h=o[l];if(this.processInteractive(t,h,i,n,a)){if(!h.parent)continue;s=!0,a=!1,n=!1}}return r&&(n&&!s&&(e.hitArea?(e.worldTransform.applyInverse(t,this._tempPoint),s=e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)):e.containsPoint&&(s=e.containsPoint(t))),e.interactive&&(s&&!this.eventData.target&&(this.eventData.target=e,this.mouse.target=e,this.pointer.target=e),i(e,s))),s},e.prototype.onMouseDown=function(t){this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData._reset(),this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.autoPreventDefault&&this.mouse.originalEvent.preventDefault(),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseDown,!0);var e=2===t.button||3===t.which;this.emit(e?"rightdown":"mousedown",this.eventData)},e.prototype.processMouseDown=function(t,e){var i=this.mouse.originalEvent,n=2===i.button||3===i.which;e&&(t[n?"_isRightDown":"_isLeftDown"]=!0,this.dispatchEvent(t,n?"rightdown":"mousedown",this.eventData))},e.prototype.onMouseUp=function(t){this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData._reset(),this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseUp,!0);var e=2===t.button||3===t.which;this.emit(e?"rightup":"mouseup",this.eventData)},e.prototype.processMouseUp=function(t,e){var i=this.mouse.originalEvent,n=2===i.button||3===i.which,r=n?"_isRightDown":"_isLeftDown";e?(this.dispatchEvent(t,n?"rightup":"mouseup",this.eventData),t[r]&&(t[r]=!1,this.dispatchEvent(t,n?"rightclick":"click",this.eventData))):t[r]&&(t[r]=!1,this.dispatchEvent(t,n?"rightupoutside":"mouseupoutside",this.eventData))},e.prototype.onMouseMove=function(t){this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData._reset(),this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.didMove=!0,this.cursor=this.defaultCursorStyle,this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseMove,!0),this.emit("mousemove",this.eventData),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor)},e.prototype.processMouseMove=function(t,e){this.processMouseOverOut(t,e),this.moveWhenInside&&!e||this.dispatchEvent(t,"mousemove",this.eventData)},e.prototype.onMouseOut=function(t){this.mouseOverRenderer=!1,this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData._reset(),this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.interactionDOMElement.style.cursor=this.defaultCursorStyle,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!1),this.emit("mouseout",this.eventData)},e.prototype.processMouseOverOut=function(t,e){e&&this.mouseOverRenderer?(t._mouseOver||(t._mouseOver=!0,this.dispatchEvent(t,"mouseover",this.eventData)),t.buttonMode&&(this.cursor=t.defaultCursor)):t._mouseOver&&(t._mouseOver=!1,this.dispatchEvent(t,"mouseout",this.eventData))},e.prototype.onMouseOver=function(t){this.mouseOverRenderer=!0,this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData._reset(),this.emit("mouseover",this.eventData)},e.prototype.onPointerDown=function(t){this.normalizeToPointerData(t),this.pointer.originalEvent=t,this.eventData.data=this.pointer,this.eventData._reset(),this.mapPositionToPoint(this.pointer.global,t.clientX,t.clientY),this.autoPreventDefault&&(this.normalizeMouseEvents||this.normalizeTouchEvents)&&this.pointer.originalEvent.preventDefault(),this.processInteractive(this.pointer.global,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",this.eventData)},e.prototype.processPointerDown=function(t,e){e&&(t._pointerDown=!0,this.dispatchEvent(t,"pointerdown",this.eventData))},e.prototype.onPointerUp=function(t){this.normalizeToPointerData(t),this.pointer.originalEvent=t,this.eventData.data=this.pointer,this.eventData._reset(),this.mapPositionToPoint(this.pointer.global,t.clientX,t.clientY),this.processInteractive(this.pointer.global,this.renderer._lastObjectRendered,this.processPointerUp,!0),this.emit("pointerup",this.eventData)},e.prototype.processPointerUp=function(t,e){e?(this.dispatchEvent(t,"pointerup",this.eventData),t._pointerDown&&(t._pointerDown=!1,this.dispatchEvent(t,"pointertap",this.eventData))):t._pointerDown&&(t._pointerDown=!1,this.dispatchEvent(t,"pointerupoutside",this.eventData))},e.prototype.onPointerMove=function(t){this.normalizeToPointerData(t),this.pointer.originalEvent=t,this.eventData.data=this.pointer,this.eventData._reset(),this.mapPositionToPoint(this.pointer.global,t.clientX,t.clientY),this.processInteractive(this.pointer.global,this.renderer._lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",this.eventData)},e.prototype.processPointerMove=function(t,e){this.pointer.originalEvent.changedTouches||this.processPointerOverOut(t,e),this.moveWhenInside&&!e||this.dispatchEvent(t,"pointermove",this.eventData)},e.prototype.onPointerOut=function(t){this.normalizeToPointerData(t),this.pointer.originalEvent=t,this.eventData.data=this.pointer,this.eventData._reset(),this.mapPositionToPoint(this.pointer.global,t.clientX,t.clientY),this.processInteractive(this.pointer.global,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",this.eventData)},e.prototype.processPointerOverOut=function(t,e){e&&this.mouseOverRenderer?t._pointerOver||(t._pointerOver=!0,this.dispatchEvent(t,"pointerover",this.eventData)):t._pointerOver&&(t._pointerOver=!1,this.dispatchEvent(t,"pointerout",this.eventData))},e.prototype.onPointerOver=function(t){this.pointer.originalEvent=t,this.eventData.data=this.pointer,this.eventData._reset(),this.emit("pointerover",this.eventData)},e.prototype.onTouchStart=function(t){this.autoPreventDefault&&t.preventDefault();for(var e=t.changedTouches,i=e.length,n=0;n<i;n++){var r=e[n],s=this.getTouchData(r);s.originalEvent=t,this.eventData.data=s,this.eventData._reset(),this.processInteractive(s.global,this.renderer._lastObjectRendered,this.processTouchStart,!0),this.emit("touchstart",this.eventData),this.returnTouchData(s)}},e.prototype.processTouchStart=function(t,e){e&&(t._touchDown=!0,this.dispatchEvent(t,"touchstart",this.eventData))},e.prototype.onTouchEnd=function(t){this.autoPreventDefault&&t.preventDefault();for(var e=t.changedTouches,i=e.length,n=0;n<i;n++){var r=e[n],s=this.getTouchData(r);s.originalEvent=t,this.eventData.data=s,this.eventData._reset(),this.processInteractive(s.global,this.renderer._lastObjectRendered,this.processTouchEnd,!0),this.emit("touchend",this.eventData),this.returnTouchData(s)}},e.prototype.processTouchEnd=function(t,e){e?(this.dispatchEvent(t,"touchend",this.eventData),t._touchDown&&(t._touchDown=!1,this.dispatchEvent(t,"tap",this.eventData))):t._touchDown&&(t._touchDown=!1,this.dispatchEvent(t,"touchendoutside",this.eventData))},e.prototype.onTouchMove=function(t){this.autoPreventDefault&&t.preventDefault();for(var e=t.changedTouches,i=e.length,n=0;n<i;n++){var r=e[n],s=this.getTouchData(r);s.originalEvent=t,this.eventData.data=s,this.eventData._reset(),this.processInteractive(s.global,this.renderer._lastObjectRendered,this.processTouchMove,this.moveWhenInside),this.emit("touchmove",this.eventData),this.returnTouchData(s)}},e.prototype.processTouchMove=function(t,e){this.moveWhenInside&&!e||this.dispatchEvent(t,"touchmove",this.eventData)},e.prototype.getTouchData=function(t){var e=this.interactiveDataPool.pop()||new r.default;return e.identifier=t.identifier,this.mapPositionToPoint(e.global,t.clientX,t.clientY),navigator.isCocoonJS&&(e.global.x=e.global.x/this.resolution,e.global.y=e.global.y/this.resolution),t.globalX=e.global.x,t.globalY=e.global.y,e},e.prototype.returnTouchData=function(t){this.interactiveDataPool.push(t)},e.prototype.normalizeToPointerData=function(t){this.normalizeTouchEvents&&t.changedTouches?(void 0===t.button&&(t.button=t.touches.length?1:0),void 0===t.buttons&&(t.buttons=t.touches.length?1:0),void 0===t.isPrimary&&(t.isPrimary=1===t.touches.length),void 0===t.width&&(t.width=t.changedTouches[0].radiusX||1),void 0===t.height&&(t.height=t.changedTouches[0].radiusY||1),void 0===t.tiltX&&(t.tiltX=0),void 0===t.tiltY&&(t.tiltY=0),void 0===t.pointerType&&(t.pointerType="touch"),void 0===t.pointerId&&(t.pointerId=t.changedTouches[0].identifier||0),void 0===t.pressure&&(t.pressure=t.changedTouches[0].force||.5),void 0===t.rotation&&(t.rotation=t.changedTouches[0].rotationAngle||0),void 0===t.clientX&&(t.clientX=t.changedTouches[0].clientX),void 0===t.clientY&&(t.clientY=t.changedTouches[0].clientY),void 0===t.pageX&&(t.pageX=t.changedTouches[0].pageX),void 0===t.pageY&&(t.pageY=t.changedTouches[0].pageY),void 0===t.screenX&&(t.screenX=t.changedTouches[0].screenX),void 0===t.screenY&&(t.screenY=t.changedTouches[0].screenY),void 0===t.layerX&&(t.layerX=t.offsetX=t.clientX),void 0===t.layerY&&(t.layerY=t.offsetY=t.clientY)):this.normalizeMouseEvents&&(void 0===t.isPrimary&&(t.isPrimary=!0),void 0===t.width&&(t.width=1),void 0===t.height&&(t.height=1),void 0===t.tiltX&&(t.tiltX=0),void 0===t.tiltY&&(t.tiltY=0),void 0===t.pointerType&&(t.pointerType="mouse"),void 0===t.pointerId&&(t.pointerId=1),void 0===t.pressure&&(t.pressure=.5),void 0===t.rotation&&(t.rotation=0))},e.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactiveDataPool=null,this.interactionDOMElement=null,this.onMouseDown=null,this.processMouseDown=null,this.onMouseUp=null,this.processMouseUp=null,this.onMouseMove=null,this.processMouseMove=null,this.onMouseOut=null,this.processMouseOverOut=null,this.onMouseOver=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.onTouchStart=null,this.processTouchStart=null,this.onTouchEnd=null,this.processTouchEnd=null,this.onTouchMove=null,this.processTouchMove=null,this._tempPoint=null},e}(a.default);i.default=u,n.WebGLRenderer.registerPlugin("interaction",u),n.CanvasRenderer.registerPlugin("interaction",u)},{"../core":61,"./InteractionData":145,"./InteractionEvent":146,"./interactiveTarget":149,eventemitter3:3,ismobilejs:4}],148:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("./InteractionData");Object.defineProperty(i,"InteractionData",{enumerable:!0,get:function(){return a(n).default}});var r=t("./InteractionManager");Object.defineProperty(i,"InteractionManager",{enumerable:!0,get:function(){return a(r).default}});var s=t("./interactiveTarget");function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(i,"interactiveTarget",{enumerable:!0,get:function(){return a(s).default}})},{"./InteractionData":145,"./InteractionManager":147,"./interactiveTarget":149}],149:[function(t,e,i){"use strict";i.__esModule=!0,i.default={interactive:!1,interactiveChildren:!0,hitArea:null,buttonMode:!1,defaultCursor:"pointer",_over:!1,_isLeftDown:!1,_isRightDown:!1,_pointerOver:!1,_pointerDown:!1,_touchDown:!1}},{}],150:[function(t,e,i){"use strict";i.__esModule=!0,i.parse=o,i.default=function(){return function(t,e){if(t.data&&t.type===s.Resource.TYPE.XML)if(0!==t.data.getElementsByTagName("page").length&&0!==t.data.getElementsByTagName("info").length&&null!==t.data.getElementsByTagName("info")[0].getAttribute("face")){var i=t.isDataUrl?"":n.dirname(t.url);t.isDataUrl&&("."===i&&(i=""),this.baseUrl&&i&&("/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(i+="/"),i=i.replace(this.baseUrl,""))),i&&"/"!==i.charAt(i.length-1)&&(i+="/");var a=i+t.data.getElementsByTagName("page")[0].getAttribute("file");if(r.utils.TextureCache[a])o(t,r.utils.TextureCache[a]),e();else{var l={crossOrigin:t.crossOrigin,loadType:s.Resource.LOAD_TYPE.IMAGE,metadata:t.metadata.imageMetadata,parentResource:t};this.add(t.name+"_image",a,l,function(i){o(t,i.texture),e()})}}else e();else e()}};var n=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t("path")),r=t("../core"),s=t("resource-loader"),a=t("../extras");function o(t,e){var i={},n=t.data.getElementsByTagName("info")[0],s=t.data.getElementsByTagName("common")[0];i.font=n.getAttribute("face"),i.size=parseInt(n.getAttribute("size"),10),i.lineHeight=parseInt(s.getAttribute("lineHeight"),10),i.chars={};for(var o=t.data.getElementsByTagName("char"),l=0;l<o.length;l++){var h=parseInt(o[l].getAttribute("id"),10),u=new r.Rectangle(parseInt(o[l].getAttribute("x"),10)+e.frame.x,parseInt(o[l].getAttribute("y"),10)+e.frame.y,parseInt(o[l].getAttribute("width"),10),parseInt(o[l].getAttribute("height"),10));i.chars[h]={xOffset:parseInt(o[l].getAttribute("xoffset"),10),yOffset:parseInt(o[l].getAttribute("yoffset"),10),xAdvance:parseInt(o[l].getAttribute("xadvance"),10),kerning:{},texture:new r.Texture(e.baseTexture,u)}}for(var c=t.data.getElementsByTagName("kerning"),d=0;d<c.length;d++){var f=parseInt(c[d].getAttribute("first"),10),p=parseInt(c[d].getAttribute("second"),10),_=parseInt(c[d].getAttribute("amount"),10);i.chars[p]&&(i.chars[p].kerning[f]=_)}t.bitmapFont=i,a.BitmapText.fonts[i.font]=i}},{"../core":61,"../extras":131,path:22,"resource-loader":34}],151:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("./loader");Object.defineProperty(i,"Loader",{enumerable:!0,get:function(){return l(n).default}});var r=t("./bitmapFontParser");Object.defineProperty(i,"bitmapFontParser",{enumerable:!0,get:function(){return l(r).default}}),Object.defineProperty(i,"parseBitmapFontData",{enumerable:!0,get:function(){return r.parse}});var s=t("./spritesheetParser");Object.defineProperty(i,"spritesheetParser",{enumerable:!0,get:function(){return l(s).default}});var a=t("./textureParser");Object.defineProperty(i,"textureParser",{enumerable:!0,get:function(){return l(a).default}});var o=t("resource-loader");function l(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(i,"Resource",{enumerable:!0,get:function(){return o.Resource}})},{"./bitmapFontParser":150,"./loader":152,"./spritesheetParser":153,"./textureParser":154,"resource-loader":34}],152:[function(t,e,i){"use strict";i.__esModule=!0;var n=h(t("resource-loader")),r=t("resource-loader/lib/middlewares/parsing/blob"),s=h(t("eventemitter3")),a=h(t("./textureParser")),o=h(t("./spritesheetParser")),l=h(t("./bitmapFontParser"));function h(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,n));s.default.call(r);for(var a=0;a<e._pixiMiddleware.length;++a)r.use(e._pixiMiddleware[a]());return r.onStart.add(function(t){return r.emit("start",t)}),r.onProgress.add(function(t,e){return r.emit("progress",t,e)}),r.onError.add(function(t,e,i){return r.emit("error",t,e,i)}),r.onLoad.add(function(t,e){return r.emit("load",t,e)}),r.onComplete.add(function(t,e){return r.emit("complete",t,e)}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.addPixiMiddleware=function(t){e._pixiMiddleware.push(t)},e}(n.default);for(var c in i.default=u,s.default.prototype)u.prototype[c]=s.default.prototype[c];u._pixiMiddleware=[r.blobMiddlewareFactory,a.default,o.default,l.default];var d=n.default.Resource;d.setExtensionXhrType("fnt",d.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":150,"./spritesheetParser":153,"./textureParser":154,eventemitter3:3,"resource-loader":34,"resource-loader/lib/middlewares/parsing/blob":35}],153:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(){return function(t,e){var i=void 0,n=t.name+"_image";if(t.data&&t.type===r.Resource.TYPE.JSON&&t.data.frames&&!this.resources[n]){var s={crossOrigin:t.crossOrigin,loadType:r.Resource.LOAD_TYPE.IMAGE,metadata:t.metadata.imageMetadata,parentResource:t};i=t.isDataUrl?t.data.meta.image:a.default.dirname(t.url.replace(this.baseUrl,""))+"/"+t.data.meta.image,this.add(n,i,s,function(i){t.textures={};var n=t.data.frames,r=Object.keys(n),s=i.texture.baseTexture,a=t.data.meta.scale,h=o.utils.getResolutionOfUrl(t.url,null);null===h&&(h=void 0!==a?a:1),1!==h&&(s.resolution=h,s.update());var u=0;function c(e,i){for(var a=e;a-e<i&&a<r.length;){var l=r[a],u=n[l].frame;if(u){var c=null,d=null,f=new o.Rectangle(0,0,n[l].sourceSize.w/h,n[l].sourceSize.h/h);c=n[l].rotated?new o.Rectangle(u.x/h,u.y/h,u.h/h,u.w/h):new o.Rectangle(u.x/h,u.y/h,u.w/h,u.h/h),n[l].trimmed&&(d=new o.Rectangle(n[l].spriteSourceSize.x/h,n[l].spriteSourceSize.y/h,u.w/h,u.h/h)),t.textures[l]=new o.Texture(s,c,f,d,n[l].rotated?2:0),o.utils.TextureCache[l]=t.textures[l]}a++}}r.length<=l?(c(0,l),e()):function t(){var i;i=function(){u*l<r.length?t():e()},c(u*l,l),u++,setTimeout(i,0)}()})}else e()}};var n,r=t("resource-loader"),s=t("path"),a=(n=s)&&n.__esModule?n:{default:n},o=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t("../core"));var l=1e3},{"../core":61,path:22,"resource-loader":34}],154:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(){return function(t,e){if(t.data&&t.type===r.Resource.TYPE.IMAGE){var i=new n.BaseTexture(t.data,null,n.utils.getResolutionOfUrl(t.url));i.imageUrl=t.url,t.texture=new n.Texture(i),n.utils.BaseTextureCache[t.name]=i,n.utils.TextureCache[t.name]=t.texture,t.name!==t.url&&(n.utils.BaseTextureCache[t.url]=i,n.utils.TextureCache[t.url]=t.texture)}e()}};var n=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t("../core")),r=t("resource-loader")},{"../core":61,"resource-loader":34}],155:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t("../core"));var s=new r.Point,a=new r.Polygon,o=function(t){function e(i,n,s,a,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return l._texture=null,l.uvs=s||new Float32Array([0,0,1,0,1,1,0,1]),l.vertices=n||new Float32Array([0,0,100,0,100,100,0,100]),l.indices=a||new Uint16Array([0,1,3,2]),l.dirty=0,l.indexDirty=0,l.blendMode=r.BLEND_MODES.NORMAL,l.canvasPadding=0,l.drawMode=o||e.DRAW_MODES.TRIANGLE_MESH,l.texture=i,l.shader=null,l.tintRgb=new Float32Array([1,1,1]),l._glDatas={},l.pluginName="mesh",l}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._renderWebGL=function(t){t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){t.plugins[this.pluginName].render(this)},e.prototype._onTextureUpdate=function(){},e.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,s);for(var i=this.vertices,n=a.points,r=this.indices,o=this.indices.length,l=this.drawMode===e.DRAW_MODES.TRIANGLES?3:1,h=0;h+2<o;h+=l){var u=2*r[h],c=2*r[h+1],d=2*r[h+2];if(n[0]=i[u],n[1]=i[u+1],n[2]=i[c],n[3]=i[c+1],n[4]=i[d],n[5]=i[d+1],a.contains(s.x,s.y))return!0}return!1},n(e,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return r.utils.rgb2hex(this.tintRgb)},set:function(t){this.tintRgb=r.utils.hex2rgb(t,this.tintRgb)}}]),e}(r.Container);i.default=o,o.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":61}],156:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("./Plane");var a=10,o=function(t){function e(i,n,r,s,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,4,4)),h=l.uvs;return h[6]=h[14]=h[22]=h[30]=1,h[25]=h[27]=h[29]=h[31]=1,l._origWidth=i.width,l._origHeight=i.height,l._uvw=1/l._origWidth,l._uvh=1/l._origHeight,l.width=i.width,l.height=i.height,h[2]=h[10]=h[18]=h[26]=l._uvw*n,h[4]=h[12]=h[20]=h[28]=1-l._uvw*s,h[9]=h[11]=h[13]=h[15]=l._uvh*r,h[17]=h[19]=h[21]=h[23]=1-l._uvh*o,l.leftWidth=void 0!==n?n:a,l.rightWidth=void 0!==s?s:a,l.topHeight=void 0!==r?r:a,l.bottomHeight=void 0!==o?o:a,l}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateHorizontalVertices=function(){var t=this.vertices;t[9]=t[11]=t[13]=t[15]=this._topHeight,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices;t[2]=t[10]=t[18]=t[26]=this._leftWidth,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._renderCanvas=function(t){var e=t.context;e.globalAlpha=this.worldAlpha;var i=this.worldTransform,n=t.resolution;t.roundPixels?e.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,i.tx*n|0,i.ty*n|0):e.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,i.tx*n,i.ty*n);var r=this._texture.baseTexture,s=r.source,a=r.width,o=r.height;this.drawSegment(e,s,a,o,0,1,10,11),this.drawSegment(e,s,a,o,2,3,12,13),this.drawSegment(e,s,a,o,4,5,14,15),this.drawSegment(e,s,a,o,8,9,18,19),this.drawSegment(e,s,a,o,10,11,20,21),this.drawSegment(e,s,a,o,12,13,22,23),this.drawSegment(e,s,a,o,16,17,26,27),this.drawSegment(e,s,a,o,18,19,28,29),this.drawSegment(e,s,a,o,20,21,30,31)},e.prototype.drawSegment=function(t,e,i,n,r,s,a,o){var l=this.uvs,h=this.vertices,u=(l[a]-l[r])*i,c=(l[o]-l[s])*n,d=h[a]-h[r],f=h[o]-h[s];u<1&&(u=1),c<1&&(c=1),d<1&&(d=1),f<1&&(f=1),t.drawImage(e,l[r]*i,l[s]*n,u,c,h[r],h[s],d,f)},r(e,[{key:"width",get:function(){return this._width},set:function(t){this._width=t,this.updateVerticalVertices()}},{key:"height",get:function(){return this._height},set:function(t){this._height=t,this.updateHorizontalVertices()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(t){this._leftWidth=t;var e=this.uvs,i=this.vertices;e[2]=e[10]=e[18]=e[26]=this._uvw*t,i[2]=i[10]=i[18]=i[26]=t,this.dirty=!0}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(t){this._rightWidth=t;var e=this.uvs,i=this.vertices;e[4]=e[12]=e[20]=e[28]=1-this._uvw*t,i[4]=i[12]=i[20]=i[28]=this._width-t,this.dirty=!0}},{key:"topHeight",get:function(){return this._topHeight},set:function(t){this._topHeight=t;var e=this.uvs,i=this.vertices;e[9]=e[11]=e[13]=e[15]=this._uvh*t,i[9]=i[11]=i[13]=i[15]=t,this.dirty=!0}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t;var e=this.uvs,i=this.vertices;e[17]=e[19]=e[21]=e[23]=1-this._uvh*t,i[17]=i[19]=i[21]=i[23]=this._height-t,this.dirty=!0}}]),e}(((n=s)&&n.__esModule?n:{default:n}).default);i.default=o},{"./Plane":157}],157:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=t("./Mesh"),s=(n=r)&&n.__esModule?n:{default:n};var a=function(t){function e(i,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return a._ready=!0,a.verticesX=n||10,a.verticesY=r||10,a.drawMode=s.default.DRAW_MODES.TRIANGLES,a.refresh(),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.refresh=function(){for(var t=this.verticesX*this.verticesY,e=[],i=[],n=[],r=this.texture,s=this.verticesX-1,a=this.verticesY-1,o=r.width/s,l=r.height/a,h=0;h<t;h++)if(r._uvs){var u=h%this.verticesX,c=h/this.verticesX|0;e.push(u*o,c*l),i.push(r._uvs.x0+(r._uvs.x1-r._uvs.x0)*(u/(this.verticesX-1)),r._uvs.y0+(r._uvs.y3-r._uvs.y0)*(c/(this.verticesY-1)))}else i.push(0);for(var d=s*a,f=0;f<d;f++){var p=f%s,_=f/s|0,m=_*this.verticesX+p,g=_*this.verticesX+p+1,v=(_+1)*this.verticesX+p,y=(_+1)*this.verticesX+p+1;n.push(m,g,v),n.push(g,y,v)}this.vertices=new Float32Array(e),this.uvs=new Float32Array(i),this.colors=new Float32Array([]),this.indices=new Uint16Array(n),this.indexDirty=!0},e.prototype._onTextureUpdate=function(){s.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},e}(s.default);i.default=a},{"./Mesh":155}],158:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=t("./Mesh"),s=(n=r)&&n.__esModule?n:{default:n},a=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t("../core"));var o=function(t){function e(i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return r.points=n,r.vertices=new Float32Array(4*n.length),r.uvs=new Float32Array(4*n.length),r.colors=new Float32Array(2*n.length),r.indices=new Uint16Array(2*n.length),r._ready=!0,r.refresh(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.refresh=function(){var t=this.points;if(!(t.length<1)&&this._texture._uvs){this.vertices.length/4!==t.length&&(this.vertices=new Float32Array(4*t.length),this.uvs=new Float32Array(4*t.length),this.colors=new Float32Array(2*t.length),this.indices=new Uint16Array(2*t.length));var e=this.uvs,i=this.indices,n=this.colors,r=this._texture._uvs,s=new a.Point(r.x0,r.y0),o=new a.Point(r.x2-r.x0,r.y2-r.y0);e[0]=0+s.x,e[1]=0+s.y,e[2]=0+s.x,e[3]=Number(o.y)+s.y,n[0]=1,n[1]=1,i[0]=0,i[1]=1;for(var l=t.length,h=1;h<l;h++){var u=4*h,c=h/(l-1);e[u]=c*o.x+s.x,e[u+1]=0+s.y,e[u+2]=c*o.x+s.x,e[u+3]=Number(o.y)+s.y,n[u=2*h]=1,n[u+1]=1,i[u=2*h]=u,i[u+1]=u+1}this.dirty++,this.indexDirty++}},e.prototype._onTextureUpdate=function(){t.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},e.prototype.updateTransform=function(){var t=this.points;if(!(t.length<1)){for(var e=t[0],i=void 0,n=0,r=0,s=this.vertices,a=t.length,o=0;o<a;o++){var l=t[o],h=4*o;r=-((i=o<t.length-1?t[o+1]:l).x-e.x),n=i.y-e.y;var u=10*(1-o/(a-1));u>1&&(u=1);var c=Math.sqrt(n*n+r*r),d=this._texture.height/2;n/=c,r/=c,n*=d,r*=d,s[h]=l.x+n,s[h+1]=l.y+r,s[h+2]=l.x-n,s[h+3]=l.y-r,e=l}this.containerUpdateTransform()}},e}(s.default);i.default=o},{"../core":61,"./Mesh":155}],159:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t("../../core")),s=t("../Mesh"),a=(n=s)&&n.__esModule?n:{default:n};var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,i=e.context,n=t.worldTransform,r=e.resolution;e.roundPixels?i.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r|0,n.ty*r|0):i.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r,n.ty*r),e.setBlendMode(t.blendMode),t.drawMode===a.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(t):this._renderTriangles(t)},t.prototype._renderTriangleMesh=function(t){for(var e=t.vertices.length/2,i=0;i<e-2;i++){var n=2*i;this._renderDrawTriangle(t,n,n+2,n+4)}},t.prototype._renderTriangles=function(t){for(var e=t.indices,i=e.length,n=0;n<i;n+=3){var r=2*e[n],s=2*e[n+1],a=2*e[n+2];this._renderDrawTriangle(t,r,s,a)}},t.prototype._renderDrawTriangle=function(t,e,i,n){var r=this.renderer.context,s=t.uvs,a=t.vertices,o=t._texture;if(o.valid){var l=o.baseTexture,h=l.source,u=l.width,c=l.height,d=s[e]*l.width,f=s[i]*l.width,p=s[n]*l.width,_=s[e+1]*l.height,m=s[i+1]*l.height,g=s[n+1]*l.height,v=a[e],y=a[i],b=a[n],E=a[e+1],T=a[i+1],x=a[n+1];if(t.canvasPadding>0){var w=t.canvasPadding/t.worldTransform.a,D=t.canvasPadding/t.worldTransform.d,S=(v+y+b)/3,I=(E+T+x)/3,A=v-S,P=E-I,C=Math.sqrt(A*A+P*P);v=S+A/C*(C+w),E=I+P/C*(C+D),P=T-I,y=S+(A=y-S)/(C=Math.sqrt(A*A+P*P))*(C+w),T=I+P/C*(C+D),P=x-I,b=S+(A=b-S)/(C=Math.sqrt(A*A+P*P))*(C+w),x=I+P/C*(C+D)}r.save(),r.beginPath(),r.moveTo(v,E),r.lineTo(y,T),r.lineTo(b,x),r.closePath(),r.clip();var M=d*m+_*p+f*g-m*p-_*f-d*g,O=v*m+_*b+y*g-m*b-_*y-v*g,L=d*y+v*p+f*b-y*p-v*f-d*b,R=d*m*b+_*y*p+v*f*g-v*m*p-_*f*b-d*y*g,k=E*m+_*x+T*g-m*x-_*T-E*g,H=d*T+E*p+f*x-T*p-E*f-d*x,F=d*m*x+_*T*p+E*f*g-E*m*p-_*f*x-d*T*g;r.transform(O/M,k/M,L/M,H/M,R/M,F/M),r.drawImage(h,0,0,u*l.resolution,c*l.resolution,0,0,u,c),r.restore()}},t.prototype.renderMeshFlat=function(t){var e=this.renderer.context,i=t.vertices,n=i.length/2;e.beginPath();for(var r=1;r<n-2;++r){var s=2*r,a=i[s],o=i[s+1],l=i[s+2],h=i[s+3],u=i[s+4],c=i[s+5];e.moveTo(a,o),e.lineTo(l,h),e.lineTo(u,c)}e.fillStyle="#FF0000",e.fill(),e.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();i.default=o,r.CanvasRenderer.registerPlugin("mesh",o)},{"../../core":61,"../Mesh":155}],160:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("./Mesh");Object.defineProperty(i,"Mesh",{enumerable:!0,get:function(){return h(n).default}});var r=t("./webgl/MeshRenderer");Object.defineProperty(i,"MeshRenderer",{enumerable:!0,get:function(){return h(r).default}});var s=t("./canvas/CanvasMeshRenderer");Object.defineProperty(i,"CanvasMeshRenderer",{enumerable:!0,get:function(){return h(s).default}});var a=t("./Plane");Object.defineProperty(i,"Plane",{enumerable:!0,get:function(){return h(a).default}});var o=t("./NineSlicePlane");Object.defineProperty(i,"NineSlicePlane",{enumerable:!0,get:function(){return h(o).default}});var l=t("./Rope");function h(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(i,"Rope",{enumerable:!0,get:function(){return h(l).default}})},{"./Mesh":155,"./NineSlicePlane":156,"./Plane":157,"./Rope":158,"./canvas/CanvasMeshRenderer":159,"./webgl/MeshRenderer":161}],161:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t("../../core")),r=a(t("pixi-gl-core")),s=a(t("../Mesh"));t("path");function a(t){return t&&t.__esModule?t:{default:t}}var o=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return n.shader=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new n.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 translationMatrix;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n}\n","varying vec2 vTextureCoord;\nuniform float alpha;\nuniform vec3 tint;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * vec4(tint * alpha, alpha);\n}\n")},e.prototype.render=function(t){var e=this.renderer,i=e.gl,n=t._texture;if(n.valid){var a=t._glDatas[e.CONTEXT_UID];a||(e.bindVao(null),(a={shader:this.shader,vertexBuffer:r.default.GLBuffer.createVertexBuffer(i,t.vertices,i.STREAM_DRAW),uvBuffer:r.default.GLBuffer.createVertexBuffer(i,t.uvs,i.STREAM_DRAW),indexBuffer:r.default.GLBuffer.createIndexBuffer(i,t.indices,i.STATIC_DRAW),vao:null,dirty:t.dirty,indexDirty:t.indexDirty}).vao=new r.default.VertexArrayObject(i).addIndex(a.indexBuffer).addAttribute(a.vertexBuffer,a.shader.attributes.aVertexPosition,i.FLOAT,!1,8,0).addAttribute(a.uvBuffer,a.shader.attributes.aTextureCoord,i.FLOAT,!1,8,0),t._glDatas[e.CONTEXT_UID]=a),t.dirty!==a.dirty&&(a.dirty=t.dirty,a.uvBuffer.upload(t.uvs)),t.indexDirty!==a.indexDirty&&(a.indexDirty=t.indexDirty,a.indexBuffer.upload(t.indices)),a.vertexBuffer.upload(t.vertices),e.bindShader(a.shader),a.shader.uniforms.uSampler=e.bindTexture(n),e.state.setBlendMode(t.blendMode),a.shader.uniforms.translationMatrix=t.worldTransform.toArray(!0),a.shader.uniforms.alpha=t.worldAlpha,a.shader.uniforms.tint=t.tintRgb;var o=t.drawMode===s.default.DRAW_MODES.TRIANGLE_MESH?i.TRIANGLE_STRIP:i.TRIANGLES;e.bindVao(a.vao),a.vao.draw(o,t.indices.length,0)}},e}(n.ObjectRenderer);i.default=o,n.WebGLRenderer.registerPlugin("mesh",o)},{"../../core":61,"../Mesh":155,path:22,"pixi-gl-core":12}],162:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t("../core"));var r=function(t){function e(){var i=arguments.length<=0||void 0===arguments[0]?1500:arguments[0],r=arguments[1],s=arguments.length<=2||void 0===arguments[2]?16384:arguments[2];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return s>16384&&(s=16384),s>i&&(s=i),a._properties=[!1,!0,!1,!1,!1],a._maxSize=i,a._batchSize=s,a._glBuffers={},a._bufferToUpdate=0,a.interactiveChildren=!1,a.blendMode=n.BLEND_MODES.NORMAL,a.roundPixels=!0,a.baseTexture=null,a.setProperties(r),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.setProperties=function(t){t&&(this._properties[0]="scale"in t?!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="alpha"in t?!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},e.prototype.renderWebGL=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){return e.onChildrenChange(0)})),t.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){var e=Math.floor(t/this._batchSize);e<this._bufferToUpdate&&(this._bufferToUpdate=e)},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var e=t.context,i=this.worldTransform,n=!0,r=0,s=0,a=0,o=0,l=t.blendModes[this.blendMode];l!==e.globalCompositeOperation&&(e.globalCompositeOperation=l),e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var h=0;h<this.children.length;++h){var u=this.children[h];if(u.visible){var c=u._texture.frame;if(e.globalAlpha=this.worldAlpha*u.alpha,u.rotation%(2*Math.PI)==0)n&&(e.setTransform(i.a,i.b,i.c,i.d,i.tx*t.resolution,i.ty*t.resolution),n=!1),r=u.anchor.x*(-c.width*u.scale.x)+u.position.x+.5,s=u.anchor.y*(-c.height*u.scale.y)+u.position.y+.5,a=c.width*u.scale.x,o=c.height*u.scale.y;else{n||(n=!0),u.displayObjectUpdateTransform();var d=u.worldTransform;t.roundPixels?e.setTransform(d.a,d.b,d.c,d.d,d.tx*t.resolution|0,d.ty*t.resolution|0):e.setTransform(d.a,d.b,d.c,d.d,d.tx*t.resolution,d.ty*t.resolution),r=u.anchor.x*-c.width+.5,s=u.anchor.y*-c.height+.5,a=c.width,o=c.height}var f=u._texture.baseTexture.resolution;e.drawImage(u._texture.baseTexture.source,c.x*f,c.y*f,c.width*f,c.height*f,r*f,s*f,a*f,o*f)}}}},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._buffers)for(var i=0;i<this._buffers.length;++i)this._buffers[i].destroy();this._properties=null,this._buffers=null},e}(n.Container);i.default=r},{"../core":61}],163:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("./ParticleContainer");Object.defineProperty(i,"ParticleContainer",{enumerable:!0,get:function(){return s(n).default}});var r=t("./webgl/ParticleRenderer");function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(i,"ParticleRenderer",{enumerable:!0,get:function(){return s(r).default}})},{"./ParticleContainer":162,"./webgl/ParticleRenderer":165}],164:[function(t,e,i){"use strict";i.__esModule=!0;var n=s(t("pixi-gl-core")),r=s(t("../../core/utils/createIndicesForQuads"));function s(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(e,i,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gl=e,this.vertSize=2,this.vertByteSize=4*this.vertSize,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(var s=0;s<i.length;++s){var a=i[s];a={attribute:a.attribute,size:a.size,uploadFunction:a.uploadFunction,offset:a.offset},n[s]?this.dynamicProperties.push(a):this.staticProperties.push(a)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.gl,e=0;this.indices=(0,r.default)(this.size),this.indexBuffer=n.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i){var s=this.dynamicProperties[i];s.offset=e,e+=s.size,this.dynamicStride+=s.size}this.dynamicData=new Float32Array(this.size*this.dynamicStride*4),this.dynamicBuffer=n.default.GLBuffer.createVertexBuffer(t,this.dynamicData,t.STREAM_DRAW);var a=0;this.staticStride=0;for(var o=0;o<this.staticProperties.length;++o){var l=this.staticProperties[o];l.offset=a,a+=l.size,this.staticStride+=l.size}this.staticData=new Float32Array(this.size*this.staticStride*4),this.staticBuffer=n.default.GLBuffer.createVertexBuffer(t,this.staticData,t.STATIC_DRAW),this.vao=new n.default.VertexArrayObject(t).addIndex(this.indexBuffer);for(var h=0;h<this.dynamicProperties.length;++h){var u=this.dynamicProperties[h];this.vao.addAttribute(this.dynamicBuffer,u.attribute,t.FLOAT,!1,4*this.dynamicStride,4*u.offset)}for(var c=0;c<this.staticProperties.length;++c){var d=this.staticProperties[c];this.vao.addAttribute(this.staticBuffer,d.attribute,t.FLOAT,!1,4*this.staticStride,4*d.offset)}},t.prototype.uploadDynamic=function(t,e,i){for(var n=0;n<this.dynamicProperties.length;n++){var r=this.dynamicProperties[n];r.uploadFunction(t,e,i,this.dynamicData,this.dynamicStride,r.offset)}this.dynamicBuffer.upload()},t.prototype.uploadStatic=function(t,e,i){for(var n=0;n<this.staticProperties.length;n++){var r=this.staticProperties[n];r.uploadFunction(t,e,i,this.staticData,this.staticStride,r.offset)}this.staticBuffer.upload()},t.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.dynamicBuffer.destroy(),this.staticProperties=null,this.staticData=null,this.staticBuffer.destroy()},t}();i.default=a},{"../../core/utils/createIndicesForQuads":115,"pixi-gl-core":12}],165:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t("../../core")),r=a(t("./ParticleShader")),s=a(t("./ParticleBuffer"));function a(t){return t&&t.__esModule?t:{default:t}}var o=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return r.shader=null,r.indexBuffer=null,r.properties=null,r.tempMatrix=new n.Matrix,r.CONTEXT_UID=0,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new r.default(t),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,uploadFunction:this.uploadAlpha,offset:0}]},e.prototype.start=function(){this.renderer.bindShader(this.shader)},e.prototype.render=function(t){var e=t.children,i=t._maxSize,n=t._batchSize,r=this.renderer,s=e.length;if(0!==s){s>i&&(s=i);var a=t._glBuffers[r.CONTEXT_UID];a||(a=t._glBuffers[r.CONTEXT_UID]=this.generateBuffers(t)),this.renderer.setBlendMode(t.blendMode);var o=r.gl,l=t.worldTransform.copy(this.tempMatrix);l.prepend(r._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=l.toArray(!0),this.shader.uniforms.uAlpha=t.worldAlpha;var h=e[0]._texture.baseTexture;this.shader.uniforms.uSampler=r.bindTexture(h);for(var u=0,c=0;u<s;u+=n,c+=1){var d=s-u;d>n&&(d=n);var f=a[c];f.uploadDynamic(e,u,d),t._bufferToUpdate===c&&(f.uploadStatic(e,u,d),t._bufferToUpdate=c+1),r.bindVao(f.vao),f.vao.draw(o.TRIANGLES,6*d)}}},e.prototype.generateBuffers=function(t){for(var e=this.renderer.gl,i=[],n=t._maxSize,r=t._batchSize,a=t._properties,o=0;o<n;o+=r)i.push(new s.default(e,this.properties,a,r));return i},e.prototype.uploadVertices=function(t,e,i,n,r,s){for(var a=0,o=0,l=0,h=0,u=0;u<i;++u){var c=t[e+u],d=c._texture,f=c.scale.x,p=c.scale.y,_=d.trim,m=d.orig;_?(a=(o=_.x-c.anchor.x*m.width)+_.width,l=(h=_.y-c.anchor.y*m.height)+_.height):(a=m.width*(1-c.anchor.x),o=m.width*-c.anchor.x,l=m.height*(1-c.anchor.y),h=m.height*-c.anchor.y),n[s]=o*f,n[s+1]=h*p,n[s+r]=a*f,n[s+r+1]=h*p,n[s+2*r]=a*f,n[s+2*r+1]=l*p,n[s+3*r]=o*f,n[s+3*r+1]=l*p,s+=4*r}},e.prototype.uploadPosition=function(t,e,i,n,r,s){for(var a=0;a<i;a++){var o=t[e+a].position;n[s]=o.x,n[s+1]=o.y,n[s+r]=o.x,n[s+r+1]=o.y,n[s+2*r]=o.x,n[s+2*r+1]=o.y,n[s+3*r]=o.x,n[s+3*r+1]=o.y,s+=4*r}},e.prototype.uploadRotation=function(t,e,i,n,r,s){for(var a=0;a<i;a++){var o=t[e+a].rotation;n[s]=o,n[s+r]=o,n[s+2*r]=o,n[s+3*r]=o,s+=4*r}},e.prototype.uploadUvs=function(t,e,i,n,r,s){for(var a=0;a<i;++a){var o=t[e+a]._texture._uvs;o?(n[s]=o.x0,n[s+1]=o.y0,n[s+r]=o.x1,n[s+r+1]=o.y1,n[s+2*r]=o.x2,n[s+2*r+1]=o.y2,n[s+3*r]=o.x3,n[s+3*r+1]=o.y3,s+=4*r):(n[s]=0,n[s+1]=0,n[s+r]=0,n[s+r+1]=0,n[s+2*r]=0,n[s+2*r+1]=0,n[s+3*r]=0,n[s+3*r+1]=0,s+=4*r)}},e.prototype.uploadAlpha=function(t,e,i,n,r,s){for(var a=0;a<i;a++){var o=t[e+a].alpha;n[s]=o,n[s+r]=o,n[s+2*r]=o,n[s+3*r]=o,s+=4*r}},e.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),t.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},e}(n.ObjectRenderer);i.default=o,n.WebGLRenderer.registerPlugin("particle",o)},{"../../core":61,"./ParticleBuffer":164,"./ParticleShader":166}],166:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=t("../../core/Shader");var s=function(t){function e(i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying float vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","uniform float uAlpha;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uAlpha;","  if (color.a == 0.0) discard;","  gl_FragColor = color;","}"].join("\n")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(((n=r)&&n.__esModule?n:{default:n}).default);i.default=s},{"../../core/Shader":41}],167:[function(t,e,i){"use strict";Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:t>0?1:-1})},{}],168:[function(t,e,i){"use strict";var n,r=t("object-assign"),s=(n=r)&&n.__esModule?n:{default:n};Object.assign||(Object.assign=s.default)},{"object-assign":5}],169:[function(t,e,i){"use strict";t("./Object.assign"),t("./requestAnimationFrame"),t("./Math.sign"),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},{"./Math.sign":167,"./Object.assign":168,"./requestAnimationFrame":170}],170:[function(t,e,i){(function(t){"use strict";var e;Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),t.performance&&t.performance.now||(e=Date.now(),t.performance||(t.performance={}),t.performance.now=function(){return Date.now()-e});for(var i=Date.now(),n=["ms","moz","webkit","o"],r=0;r<n.length&&!t.requestAnimationFrame;++r){var s=n[r];t.requestAnimationFrame=t[s+"RequestAnimationFrame"],t.cancelAnimationFrame=t[s+"CancelAnimationFrame"]||t[s+"CancelRequestAnimationFrame"]}t.requestAnimationFrame||(t.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),n=16+i-e;return n<0&&(n=0),i=e,setTimeout(function(){i=Date.now(),t(performance.now())},n)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){return clearTimeout(t)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],171:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t("../core")),s=t("./limiters/CountLimiter"),a=(n=s)&&n.__esModule?n:{default:n};var o=r.ticker.shared;r.settings.UPLOADS_PER_FRAME=4;var l=function(){function t(e){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.limiter=new a.default(r.settings.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){i.queue&&i.prepareItems()},this.register(c,h),this.register(d,u)}return t.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,o.addOnce(this.tick,this))):e&&e()},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){for(var t=this.queue[0],e=!1,i=0,n=this.uploadHooks.length;i<n;i++)if(this.uploadHooks[i](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)o.addOnce(this.tick,this);else{this.ticking=!1;var r=this.completes.slice(0);this.completes.length=0;for(var s=0,a=r.length;s<a;s++)r[s]()}},t.prototype.register=function(t,e){return t&&this.addHooks.push(t),e&&this.uploadHooks.push(e),this},t.prototype.add=function(t){for(var e=0,i=this.addHooks.length;e<i&&!this.addHooks[e](t,this.queue);e++);if(t instanceof r.Container)for(var n=t.children.length-1;n>=0;n--)this.add(t.children[n]);return this},t.prototype.destroy=function(){this.ticking&&o.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}();function h(t,e){return e instanceof r.Text&&(e.updateText(!0),!0)}function u(t,e){if(e instanceof r.TextStyle){var i=r.Text.getFontStyle(e);return r.Text.fontPropertiesCache[i]||r.Text.calculateFontProperties(i),!0}return!1}function c(t,e){if(t instanceof r.Text){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function d(t,e){return t instanceof r.TextStyle&&(-1===e.indexOf(t)&&e.push(t),!0)}i.default=l},{"../core":61,"./limiters/CountLimiter":174}],172:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t("../../core")),s=t("../BasePrepare");var a=16,o=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return n.uploadHookHelper=n,n.canvas=document.createElement("canvas"),n.canvas.width=a,n.canvas.height=a,n.ctx=n.canvas.getContext("2d"),n.register(h,l),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.ctx=null,this.canvas=null},e}(((n=s)&&n.__esModule?n:{default:n}).default);function l(t,e){if(e instanceof r.BaseTexture){var i=e.source,n=0===i.width?t.canvas.width:Math.min(t.canvas.width,i.width),s=0===i.height?t.canvas.height:Math.min(t.canvas.height,i.height);return t.ctx.drawImage(i,0,0,n,s,0,0,t.canvas.width,t.canvas.height),!0}return!1}function h(t,e){if(t instanceof r.BaseTexture)return-1===e.indexOf(t)&&e.push(t),!0;if(t._texture&&t._texture instanceof r.Texture){var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}i.default=o,r.CanvasRenderer.registerPlugin("prepare",o)},{"../../core":61,"../BasePrepare":171}],173:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("./webgl/WebGLPrepare");Object.defineProperty(i,"webgl",{enumerable:!0,get:function(){return l(n).default}});var r=t("./canvas/CanvasPrepare");Object.defineProperty(i,"canvas",{enumerable:!0,get:function(){return l(r).default}});var s=t("./BasePrepare");Object.defineProperty(i,"BasePrepare",{enumerable:!0,get:function(){return l(s).default}});var a=t("./limiters/CountLimiter");Object.defineProperty(i,"CountLimiter",{enumerable:!0,get:function(){return l(a).default}});var o=t("./limiters/TimeLimiter");function l(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(i,"TimeLimiter",{enumerable:!0,get:function(){return l(o).default}})},{"./BasePrepare":171,"./canvas/CanvasPrepare":172,"./limiters/CountLimiter":174,"./limiters/TimeLimiter":175,"./webgl/WebGLPrepare":176}],174:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.maxItemsPerFrame=e,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();i.default=n},{}],175:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.maxMilliseconds=e,this.frameStart=0}return t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},t}();i.default=n},{}],176:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t("../../core")),s=t("../BasePrepare");var a=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return n.uploadHookHelper=n.renderer,n.register(h,o).register(u,l),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(((n=s)&&n.__esModule?n:{default:n}).default);function o(t,e){return e instanceof r.BaseTexture&&(e._glTextures[t.CONTEXT_UID]||t.textureManager.updateTexture(e),!0)}function l(t,e){return e instanceof r.Graphics&&((e.dirty||e.clearDirty||!e._webGL[t.plugins.graphics.CONTEXT_UID])&&t.plugins.graphics.updateGraphics(e),!0)}function h(t,e){if(t instanceof r.BaseTexture)return-1===e.indexOf(t)&&e.push(t),!0;if(t._texture&&t._texture instanceof r.Texture){var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function u(t,e){return t instanceof r.Graphics&&(e.push(t),!0)}i.default=a,r.WebGLRenderer.registerPlugin("prepare",a)},{"../../core":61,"../BasePrepare":171}],177:[function(t,e,i){(function(e){"use strict";i.__esModule=!0,i.loader=i.prepare=i.particles=i.mesh=i.loaders=i.interaction=i.filters=i.extras=i.extract=i.accessibility=void 0;var n=t("./deprecation");Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(i,t,{enumerable:!0,get:function(){return n[t]}})});var r=t("./core");Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(i,t,{enumerable:!0,get:function(){return r[t]}})}),t("./polyfill");var s=p(t("./accessibility")),a=p(t("./extract")),o=p(t("./extras")),l=p(t("./filters")),h=p(t("./interaction")),u=p(t("./loaders")),c=p(t("./mesh")),d=p(t("./particles")),f=p(t("./prepare"));function p(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}i.accessibility=s,i.extract=a,i.extras=o,i.filters=l,i.interaction=h,i.loaders=u,i.mesh=c,i.particles=d,i.prepare=f;var _=u&&u.Loader?new u.Loader:null;i.loader=_,e.PIXI=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./accessibility":40,"./core":61,"./deprecation":120,"./extract":122,"./extras":131,"./filters":142,"./interaction":148,"./loaders":151,"./mesh":160,"./particles":163,"./polyfill":169,"./prepare":173}]},{},[177])(177)});var EHDI,_gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;if((_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";var t,e,i,n,r,s,a,o,l,h,u,c,d,f,p,_;_gsScope._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var n=function(t){var e,i=[],n=t.length;for(e=0;e!==n;i.push(t[e++]));return i},r=function(t,e,i){var n,r,s=t.cycle;for(n in s)r=s[n],t[n]="function"==typeof r?r(i,e[i]):r[i%r.length];delete t.cycle},s=function(t,e,n){i.call(this,t,e,n),this._cycle=0,this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=s.prototype.render},a=1e-10,o=i._internals,l=o.isSelector,h=o.isArray,u=s.prototype=i.to({},.1,{}),c=[];s.version="1.19.1",u.constructor=s,u.kill()._gc=!1,s.killTweensOf=s.killDelayedCallsTo=i.killTweensOf,s.getTweensOf=i.getTweensOf,s.lagSmoothing=i.lagSmoothing,s.ticker=i.ticker,s.render=i.render,u.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),i.prototype.invalidate.call(this)},u.updateTo=function(t,e){var n,r=this.ratio,s=this.vars.immediateRender||t.immediateRender;for(n in e&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay)),t)this.vars[n]=t[n];if(this._initted||s)if(e)this._initted=!1,s&&this.render(0,!0,!0);else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&i._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var a=this._totalTime;this.render(0,!0,!1),this._initted=!1,this.render(a,!0,!1)}else if(this._initted=!1,this._init(),this._time>0||s)for(var o,l=1/(1-r),h=this._firstPT;h;)o=h.s+h.c,h.c*=l,h.s=o-h.c,h=h._next;return this},u.render=function(t,e,i){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var n,r,s,l,h,u,c,d,f=this._dirty?this.totalDuration():this._totalDuration,p=this._time,_=this._totalTime,m=this._cycle,g=this._duration,v=this._rawPrevTime;if(t>=f-1e-7&&t>=0?(this._totalTime=f,this._cycle=this._repeat,this._yoyo&&0!=(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=g,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(n=!0,r="onComplete",i=i||this._timeline.autoRemoveChildren),0===g&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(v<0||t<=0&&t>=-1e-7||v===a&&"isPause"!==this.data)&&v!==t&&(i=!0,v>a&&(r="onReverseComplete")),this._rawPrevTime=d=!e||t||v===t?t:a)):t<1e-7?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==_||0===g&&v>0)&&(r="onReverseComplete",n=this._reversed),t<0&&(this._active=!1,0===g&&(this._initted||!this.vars.lazy||i)&&(v>=0&&(i=!0),this._rawPrevTime=d=!e||t||v===t?t:a)),this._initted||(i=!0)):(this._totalTime=this._time=t,0!==this._repeat&&(l=g+this._repeatDelay,this._cycle=this._totalTime/l>>0,0!==this._cycle&&this._cycle===this._totalTime/l&&_<=t&&this._cycle--,this._time=this._totalTime-this._cycle*l,this._yoyo&&0!=(1&this._cycle)&&(this._time=g-this._time),this._time>g?this._time=g:this._time<0&&(this._time=0)),this._easeType?(h=this._time/g,u=this._easeType,c=this._easePower,(1===u||3===u&&h>=.5)&&(h=1-h),3===u&&(h*=2),1===c?h*=h:2===c?h*=h*h:3===c?h*=h*h*h:4===c&&(h*=h*h*h*h),1===u?this.ratio=1-h:2===u?this.ratio=h:this._time/g<.5?this.ratio=h/2:this.ratio=1-h/2):this.ratio=this._ease.getRatio(this._time/g)),p!==this._time||i||m!==this._cycle){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=p,this._totalTime=_,this._rawPrevTime=v,this._cycle=m,o.lazyTweens.push(this),void(this._lazy=[t,e]);this._time&&!n?this.ratio=this._ease.getRatio(this._time/g):n&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==p&&t>=0&&(this._active=!0),0===_&&(2===this._initted&&t>0&&this._init(),this._startAt&&(t>=0?this._startAt.render(t,e,i):r||(r="_dummyGS")),this.vars.onStart&&(0===this._totalTime&&0!==g||e||this._callback("onStart"))),s=this._firstPT;s;)s.f?s.t[s.p](s.c*this.ratio+s.s):s.t[s.p]=s.c*this.ratio+s.s,s=s._next;this._onUpdate&&(t<0&&this._startAt&&this._startTime&&this._startAt.render(t,e,i),e||(this._totalTime!==_||r)&&this._callback("onUpdate")),this._cycle!==m&&(e||this._gc||this.vars.onRepeat&&this._callback("onRepeat")),r&&(this._gc&&!i||(t<0&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(t,e,i),n&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[r]&&this._callback(r),0===g&&this._rawPrevTime===a&&d!==a&&(this._rawPrevTime=0)))}else _!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate"))},s.to=function(t,e,i){return new s(t,e,i)},s.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new s(t,e,i)},s.fromTo=function(t,e,i,n){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,new s(t,e,n)},s.staggerTo=s.allTo=function(t,e,a,o,u,d,f){o=o||0;var p,_,m,g,v=0,y=[],b=function(){a.onComplete&&a.onComplete.apply(a.onCompleteScope||this,arguments),u.apply(f||a.callbackScope||this,d||c)},E=a.cycle,T=a.startAt&&a.startAt.cycle;for(h(t)||("string"==typeof t&&(t=i.selector(t)||t),l(t)&&(t=n(t))),t=t||[],o<0&&((t=n(t)).reverse(),o*=-1),p=t.length-1,m=0;m<=p;m++){for(g in _={},a)_[g]=a[g];if(E&&(r(_,t,m),null!=_.duration&&(e=_.duration,delete _.duration)),T){for(g in T=_.startAt={},a.startAt)T[g]=a.startAt[g];r(_.startAt,t,m)}_.delay=v+(_.delay||0),m===p&&u&&(_.onComplete=b),y[m]=new s(t[m],e,_),v+=o}return y},s.staggerFrom=s.allFrom=function(t,e,i,n,r,a,o){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,s.staggerTo(t,e,i,n,r,a,o)},s.staggerFromTo=s.allFromTo=function(t,e,i,n,r,a,o,l){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,s.staggerTo(t,e,n,r,a,o,l)},s.delayedCall=function(t,e,i,n,r){return new s(e,0,{delay:t,onComplete:e,onCompleteParams:i,callbackScope:n,onReverseComplete:e,onReverseCompleteParams:i,immediateRender:!1,useFrames:r,overwrite:0})},s.set=function(t,e){return new s(t,0,e)},s.isTweening=function(t){return i.getTweensOf(t,!0).length>0};var d=function(t,e){for(var n=[],r=0,s=t._first;s;)s instanceof i?n[r++]=s:(e&&(n[r++]=s),r=(n=n.concat(d(s,e))).length),s=s._next;return n},f=s.getAllTweens=function(e){return d(t._rootTimeline,e).concat(d(t._rootFramesTimeline,e))};s.killAll=function(t,i,n,r){null==i&&(i=!0),null==n&&(n=!0);var s,a,o,l=f(0!=r),h=l.length,u=i&&n&&r;for(o=0;o<h;o++)a=l[o],(u||a instanceof e||(s=a.target===a.vars.onComplete)&&n||i&&!s)&&(t?a.totalTime(a._reversed?0:a.totalDuration()):a._enabled(!1,!1))},s.killChildTweensOf=function(t,e){if(null!=t){var r,a,u,c,d,f=o.tweenLookup;if("string"==typeof t&&(t=i.selector(t)||t),l(t)&&(t=n(t)),h(t))for(c=t.length;--c>-1;)s.killChildTweensOf(t[c],e);else{for(u in r=[],f)for(a=f[u].target.parentNode;a;)a===t&&(r=r.concat(f[u].tweens)),a=a.parentNode;for(d=r.length,c=0;c<d;c++)e&&r[c].totalTime(r[c].totalDuration()),r[c]._enabled(!1,!1)}}};var p=function(t,i,n,r){i=!1!==i,n=!1!==n;for(var s,a,o=f(r=!1!==r),l=i&&n&&r,h=o.length;--h>-1;)a=o[h],(l||a instanceof e||(s=a.target===a.vars.onComplete)&&n||i&&!s)&&a.paused(t)};return s.pauseAll=function(t,e,i){p(!0,t,e,i)},s.resumeAll=function(t,e,i){p(!1,t,e,i)},s.globalTimeScale=function(e){var n=t._rootTimeline,r=i.ticker.time;return arguments.length?(e=e||a,n._startTime=r-(r-n._startTime)*n._timeScale/e,n=t._rootFramesTimeline,r=i.ticker.frame,n._startTime=r-(r-n._startTime)*n._timeScale/e,n._timeScale=t._rootTimeline._timeScale=e,e):n._timeScale},u.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()},u.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()},u.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!=(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},u.duration=function(e){return arguments.length?t.prototype.duration.call(this,e):this._duration},u.totalDuration=function(t){return arguments.length?-1===this._repeat?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},u.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},u.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},u.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},s},!0),_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var n=function(t){e.call(this,t),this._labels={},this.autoRemoveChildren=!0===this.vars.autoRemoveChildren,this.smoothChildTiming=!0===this.vars.smoothChildTiming,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var i,n,r=this.vars;for(n in r)i=r[n],o(i)&&-1!==i.join("").indexOf("{self}")&&(r[n]=this._swapSelfInParams(i));o(r.tweens)&&this.add(r.tweens,0,r.align,r.stagger)},r=i._internals,s=n._internals={},a=r.isSelector,o=r.isArray,l=r.lazyTweens,h=r.lazyRender,u=_gsScope._gsDefine.globals,c=function(t){var e,i={};for(e in t)i[e]=t[e];return i},d=function(t,e,i){var n,r,s=t.cycle;for(n in s)r=s[n],t[n]="function"==typeof r?r(i,e[i]):r[i%r.length];delete t.cycle},f=s.pauseCallback=function(){},p=function(t){var e,i=[],n=t.length;for(e=0;e!==n;i.push(t[e++]));return i},_=n.prototype=new e;return n.version="1.19.1",_.constructor=n,_.kill()._gc=_._forcingPlayhead=_._hasPause=!1,_.to=function(t,e,n,r){var s=n.repeat&&u.TweenMax||i;return e?this.add(new s(t,e,n),r):this.set(t,n,r)},_.from=function(t,e,n,r){return this.add((n.repeat&&u.TweenMax||i).from(t,e,n),r)},_.fromTo=function(t,e,n,r,s){var a=r.repeat&&u.TweenMax||i;return e?this.add(a.fromTo(t,e,n,r),s):this.set(t,r,s)},_.staggerTo=function(t,e,r,s,o,l,h,u){var f,_,m=new n({onComplete:l,onCompleteParams:h,callbackScope:u,smoothChildTiming:this.smoothChildTiming}),g=r.cycle;for("string"==typeof t&&(t=i.selector(t)||t),a(t=t||[])&&(t=p(t)),(s=s||0)<0&&((t=p(t)).reverse(),s*=-1),_=0;_<t.length;_++)(f=c(r)).startAt&&(f.startAt=c(f.startAt),f.startAt.cycle&&d(f.startAt,t,_)),g&&(d(f,t,_),null!=f.duration&&(e=f.duration,delete f.duration)),m.to(t[_],e,f,_*s);return this.add(m,o)},_.staggerFrom=function(t,e,i,n,r,s,a,o){return i.immediateRender=0!=i.immediateRender,i.runBackwards=!0,this.staggerTo(t,e,i,n,r,s,a,o)},_.staggerFromTo=function(t,e,i,n,r,s,a,o,l){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,this.staggerTo(t,e,n,r,s,a,o,l)},_.call=function(t,e,n,r){return this.add(i.delayedCall(0,t,e,n),r)},_.set=function(t,e,n){return n=this._parseTimeOrLabel(n,0,!0),null==e.immediateRender&&(e.immediateRender=n===this._time&&!this._paused),this.add(new i(t,0,e),n)},n.exportRoot=function(t,e){null==(t=t||{}).smoothChildTiming&&(t.smoothChildTiming=!0);var r,s,a=new n(t),o=a._timeline;for(null==e&&(e=!0),o._remove(a,!0),a._startTime=0,a._rawPrevTime=a._time=a._totalTime=o._time,r=o._first;r;)s=r._next,e&&r instanceof i&&r.target===r.vars.onComplete||a.add(r,r._startTime-r._delay),r=s;return o.add(a,0),a},_.add=function(r,s,a,l){var h,u,c,d,f,p;if("number"!=typeof s&&(s=this._parseTimeOrLabel(s,0,!0,r)),!(r instanceof t)){if(r instanceof Array||r&&r.push&&o(r)){for(a=a||"normal",l=l||0,h=s,u=r.length,c=0;c<u;c++)o(d=r[c])&&(d=new n({tweens:d})),this.add(d,h),"string"!=typeof d&&"function"!=typeof d&&("sequence"===a?h=d._startTime+d.totalDuration()/d._timeScale:"start"===a&&(d._startTime-=d.delay())),h+=l;return this._uncache(!0)}if("string"==typeof r)return this.addLabel(r,s);if("function"!=typeof r)throw"Cannot add "+r+" into the timeline; it is not a tween, timeline, function, or string.";r=i.delayedCall(0,r)}if(e.prototype.add.call(this,r,s),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(p=(f=this).rawTime()>r._startTime;f._timeline;)p&&f._timeline.smoothChildTiming?f.totalTime(f._totalTime,!0):f._gc&&f._enabled(!0,!1),f=f._timeline;return this},_.remove=function(e){if(e instanceof t){this._remove(e,!1);var i=e._timeline=e.vars.useFrames?t._rootFramesTimeline:t._rootTimeline;return e._startTime=(e._paused?e._pauseTime:i._time)-(e._reversed?e.totalDuration()-e._totalTime:e._totalTime)/e._timeScale,this}if(e instanceof Array||e&&e.push&&o(e)){for(var n=e.length;--n>-1;)this.remove(e[n]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},_._remove=function(t,i){return e.prototype._remove.call(this,t,i),this._last?this._time>this.duration()&&(this._time=this._duration,this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},_.append=function(t,e){return this.add(t,this._parseTimeOrLabel(null,e,!0,t))},_.insert=_.insertMultiple=function(t,e,i,n){return this.add(t,e||0,i,n)},_.appendMultiple=function(t,e,i,n){return this.add(t,this._parseTimeOrLabel(null,e,!0,t),i,n)},_.addLabel=function(t,e){return this._labels[t]=this._parseTimeOrLabel(e),this},_.addPause=function(t,e,n,r){var s=i.delayedCall(0,f,n,r||this);return s.vars.onComplete=s.vars.onReverseComplete=e,s.data="isPause",this._hasPause=!0,this.add(s,t)},_.removeLabel=function(t){return delete this._labels[t],this},_.getLabelTime=function(t){return null!=this._labels[t]?this._labels[t]:-1},_._parseTimeOrLabel=function(e,i,n,r){var s;if(r instanceof t&&r.timeline===this)this.remove(r);else if(r&&(r instanceof Array||r.push&&o(r)))for(s=r.length;--s>-1;)r[s]instanceof t&&r[s].timeline===this&&this.remove(r[s]);if("string"==typeof i)return this._parseTimeOrLabel(i,n&&"number"==typeof e&&null==this._labels[i]?e-this.duration():0,n);if(i=i||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=this.duration());else{if(-1===(s=e.indexOf("=")))return null==this._labels[e]?n?this._labels[e]=this.duration()+i:i:this._labels[e]+i;i=parseInt(e.charAt(s-1)+"1",10)*Number(e.substr(s+1)),e=s>1?this._parseTimeOrLabel(e.substr(0,s-1),0,n):this.duration()}return Number(e)+i},_.seek=function(t,e){return this.totalTime("number"==typeof t?t:this._parseTimeOrLabel(t),!1!==e)},_.stop=function(){return this.paused(!0)},_.gotoAndPlay=function(t,e){return this.play(t,e)},_.gotoAndStop=function(t,e){return this.pause(t,e)},_.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var n,r,s,a,o,u,c,d=this._dirty?this.totalDuration():this._totalDuration,f=this._time,p=this._startTime,_=this._timeScale,m=this._paused;if(t>=d-1e-7&&t>=0)this._totalTime=this._time=d,this._reversed||this._hasPausedChild()||(r=!0,a="onComplete",o=!!this._timeline.autoRemoveChildren,0===this._duration&&(t<=0&&t>=-1e-7||this._rawPrevTime<0||1e-10===this._rawPrevTime)&&this._rawPrevTime!==t&&this._first&&(o=!0,this._rawPrevTime>1e-10&&(a="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:1e-10,t=d+1e-4;else if(t<1e-7)if(this._totalTime=this._time=0,(0!==f||0===this._duration&&1e-10!==this._rawPrevTime&&(this._rawPrevTime>0||t<0&&this._rawPrevTime>=0))&&(a="onReverseComplete",r=this._reversed),t<0)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(o=r=!0,a="onReverseComplete"):this._rawPrevTime>=0&&this._first&&(o=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:1e-10,0===t&&r)for(n=this._first;n&&0===n._startTime;)n._duration||(r=!1),n=n._next;t=0,this._initted||(o=!0)}else{if(this._hasPause&&!this._forcingPlayhead&&!e){if(t>=f)for(n=this._first;n&&n._startTime<=t&&!u;)n._duration||"isPause"!==n.data||n.ratio||0===n._startTime&&0===this._rawPrevTime||(u=n),n=n._next;else for(n=this._last;n&&n._startTime>=t&&!u;)n._duration||"isPause"===n.data&&n._rawPrevTime>0&&(u=n),n=n._prev;u&&(this._time=t=u._startTime,this._totalTime=t+this._cycle*(this._totalDuration+this._repeatDelay))}this._totalTime=this._time=this._rawPrevTime=t}if(this._time!==f&&this._first||i||o||u){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==f&&t>0&&(this._active=!0),0===f&&this.vars.onStart&&(0===this._time&&this._duration||e||this._callback("onStart")),(c=this._time)>=f)for(n=this._first;n&&(s=n._next,c===this._time&&(!this._paused||m));)(n._active||n._startTime<=c&&!n._paused&&!n._gc)&&(u===n&&this.pause(),n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)),n=s;else for(n=this._last;n&&(s=n._prev,c===this._time&&(!this._paused||m));){if(n._active||n._startTime<=f&&!n._paused&&!n._gc){if(u===n){for(u=n._prev;u&&u.endTime()>this._time;)u.render(u._reversed?u.totalDuration()-(t-u._startTime)*u._timeScale:(t-u._startTime)*u._timeScale,e,i),u=u._prev;u=null,this.pause()}n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)}n=s}this._onUpdate&&(e||(l.length&&h(),this._callback("onUpdate"))),a&&(this._gc||p!==this._startTime&&_===this._timeScale||(0===this._time||d>=this.totalDuration())&&(r&&(l.length&&h(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[a]&&this._callback(a)))}},_._hasPausedChild=function(){for(var t=this._first;t;){if(t._paused||t instanceof n&&t._hasPausedChild())return!0;t=t._next}return!1},_.getChildren=function(t,e,n,r){r=r||-9999999999;for(var s=[],a=this._first,o=0;a;)a._startTime<r||(a instanceof i?!1!==e&&(s[o++]=a):(!1!==n&&(s[o++]=a),!1!==t&&(o=(s=s.concat(a.getChildren(!0,e,n))).length))),a=a._next;return s},_.getTweensOf=function(t,e){var n,r,s=this._gc,a=[],o=0;for(s&&this._enabled(!0,!0),r=(n=i.getTweensOf(t)).length;--r>-1;)(n[r].timeline===this||e&&this._contains(n[r]))&&(a[o++]=n[r]);return s&&this._enabled(!1,!0),a},_.recent=function(){return this._recent},_._contains=function(t){for(var e=t.timeline;e;){if(e===this)return!0;e=e.timeline}return!1},_.shiftChildren=function(t,e,i){i=i||0;for(var n,r=this._first,s=this._labels;r;)r._startTime>=i&&(r._startTime+=t),r=r._next;if(e)for(n in s)s[n]>=i&&(s[n]+=t);return this._uncache(!0)},_._kill=function(t,e){if(!t&&!e)return this._enabled(!1,!1);for(var i=e?this.getTweensOf(e):this.getChildren(!0,!0,!1),n=i.length,r=!1;--n>-1;)i[n]._kill(t,e)&&(r=!0);return r},_.clear=function(t){var e=this.getChildren(!1,!0,!0),i=e.length;for(this._time=this._totalTime=0;--i>-1;)e[i]._enabled(!1,!1);return!1!==t&&(this._labels={}),this._uncache(!0)},_.invalidate=function(){for(var e=this._first;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},_._enabled=function(t,i){if(t===this._gc)for(var n=this._first;n;)n._enabled(t,!0),n=n._next;return e.prototype._enabled.call(this,t,i)},_.totalTime=function(e,i,n){this._forcingPlayhead=!0;var r=t.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,r},_.duration=function(t){return arguments.length?(0!==this.duration()&&0!==t&&this.timeScale(this._duration/t),this):(this._dirty&&this.totalDuration(),this._duration)},_.totalDuration=function(t){if(!arguments.length){if(this._dirty){for(var e,i,n=0,r=this._last,s=999999999999;r;)e=r._prev,r._dirty&&r.totalDuration(),r._startTime>s&&this._sortChildren&&!r._paused?this.add(r,r._startTime-r._delay):s=r._startTime,r._startTime<0&&!r._paused&&(n-=r._startTime,this._timeline.smoothChildTiming&&(this._startTime+=r._startTime/this._timeScale),this.shiftChildren(-r._startTime,!1,-9999999999),s=0),(i=r._startTime+r._totalDuration/r._timeScale)>n&&(n=i),r=e;this._duration=this._totalDuration=n,this._dirty=!1}return this._totalDuration}return t&&this.totalDuration()?this.timeScale(this._totalDuration/t):this},_.paused=function(e){if(!e)for(var i=this._first,n=this._time;i;)i._startTime===n&&"isPause"===i.data&&(i._rawPrevTime=0),i=i._next;return t.prototype.paused.apply(this,arguments)},_.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===t._rootFramesTimeline},_.rawTime=function(t){return t&&(this._paused||this._repeat&&this.time()>0&&this.totalProgress()<1)?this._totalTime%(this._duration+this._repeatDelay):this._paused?this._totalTime:(this._timeline.rawTime(t)-this._startTime)*this._timeScale},n},!0),_gsScope._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(t,e,i){var n=function(e){t.call(this,e),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=!0===this.vars.yoyo,this._dirty=!0},r=e._internals,s=r.lazyTweens,a=r.lazyRender,o=_gsScope._gsDefine.globals,l=new i(null,null,1,0),h=n.prototype=new t;return h.constructor=n,h.kill()._gc=!1,n.version="1.19.1",h.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),t.prototype.invalidate.call(this)},h.addCallback=function(t,i,n,r){return this.add(e.delayedCall(0,t,n,r),i)},h.removeCallback=function(t,e){if(t)if(null==e)this._kill(null,t);else for(var i=this.getTweensOf(t,!1),n=i.length,r=this._parseTimeOrLabel(e);--n>-1;)i[n]._startTime===r&&i[n]._enabled(!1,!1);return this},h.removePause=function(e){return this.removeCallback(t._internals.pauseCallback,e)},h.tweenTo=function(t,i){i=i||{};var n,r,s,a={ease:l,useFrames:this.usesFrames(),immediateRender:!1},h=i.repeat&&o.TweenMax||e;for(r in i)a[r]=i[r];return a.time=this._parseTimeOrLabel(t),n=Math.abs(Number(a.time)-this._time)/this._timeScale||.001,s=new h(this,n,a),a.onStart=function(){s.target.paused(!0),s.vars.time!==s.target.time()&&n===s.duration()&&s.duration(Math.abs(s.vars.time-s.target.time())/s.target._timeScale),i.onStart&&i.onStart.apply(i.onStartScope||i.callbackScope||s,i.onStartParams||[])},s},h.tweenFromTo=function(t,e,i){i=i||{},t=this._parseTimeOrLabel(t),i.startAt={onComplete:this.seek,onCompleteParams:[t],callbackScope:this},i.immediateRender=!1!==i.immediateRender;var n=this.tweenTo(e,i);return n.duration(Math.abs(n.vars.time-t)/this._timeScale||.001)},h.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var n,r,o,l,h,u,c,d,f=this._dirty?this.totalDuration():this._totalDuration,p=this._duration,_=this._time,m=this._totalTime,g=this._startTime,v=this._timeScale,y=this._rawPrevTime,b=this._paused,E=this._cycle;if(t>=f-1e-7&&t>=0)this._locked||(this._totalTime=f,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(r=!0,l="onComplete",h=!!this._timeline.autoRemoveChildren,0===this._duration&&(t<=0&&t>=-1e-7||y<0||1e-10===y)&&y!==t&&this._first&&(h=!0,y>1e-10&&(l="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:1e-10,this._yoyo&&0!=(1&this._cycle)?this._time=t=0:(this._time=p,t=p+1e-4);else if(t<1e-7)if(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==_||0===p&&1e-10!==y&&(y>0||t<0&&y>=0)&&!this._locked)&&(l="onReverseComplete",r=this._reversed),t<0)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(h=r=!0,l="onReverseComplete"):y>=0&&this._first&&(h=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=p||!e||t||this._rawPrevTime===t?t:1e-10,0===t&&r)for(n=this._first;n&&0===n._startTime;)n._duration||(r=!1),n=n._next;t=0,this._initted||(h=!0)}else if(0===p&&y<0&&(h=!0),this._time=this._rawPrevTime=t,this._locked||(this._totalTime=t,0!==this._repeat&&(u=p+this._repeatDelay,this._cycle=this._totalTime/u>>0,0!==this._cycle&&this._cycle===this._totalTime/u&&m<=t&&this._cycle--,this._time=this._totalTime-this._cycle*u,this._yoyo&&0!=(1&this._cycle)&&(this._time=p-this._time),this._time>p?(this._time=p,t=p+1e-4):this._time<0?this._time=t=0:t=this._time)),this._hasPause&&!this._forcingPlayhead&&!e&&t<p){if((t=this._time)>=_||this._repeat&&E!==this._cycle)for(n=this._first;n&&n._startTime<=t&&!c;)n._duration||"isPause"!==n.data||n.ratio||0===n._startTime&&0===this._rawPrevTime||(c=n),n=n._next;else for(n=this._last;n&&n._startTime>=t&&!c;)n._duration||"isPause"===n.data&&n._rawPrevTime>0&&(c=n),n=n._prev;c&&(this._time=t=c._startTime,this._totalTime=t+this._cycle*(this._totalDuration+this._repeatDelay))}if(this._cycle!==E&&!this._locked){var T=this._yoyo&&0!=(1&E),x=T===(this._yoyo&&0!=(1&this._cycle)),w=this._totalTime,D=this._cycle,S=this._rawPrevTime,I=this._time;if(this._totalTime=E*p,this._cycle<E?T=!T:this._totalTime+=p,this._time=_,this._rawPrevTime=0===p?y-1e-4:y,this._cycle=E,this._locked=!0,_=T?0:p,this.render(_,e,0===p),e||this._gc||this.vars.onRepeat&&(this._cycle=D,this._locked=!1,this._callback("onRepeat")),_!==this._time)return;if(x&&(this._cycle=E,this._locked=!0,_=T?p+1e-4:-1e-4,this.render(_,!0,!1)),this._locked=!1,this._paused&&!b)return;this._time=I,this._totalTime=w,this._cycle=D,this._rawPrevTime=S}if(this._time!==_&&this._first||i||h||c){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==m&&t>0&&(this._active=!0),0===m&&this.vars.onStart&&(0===this._totalTime&&this._totalDuration||e||this._callback("onStart")),(d=this._time)>=_)for(n=this._first;n&&(o=n._next,d===this._time&&(!this._paused||b));)(n._active||n._startTime<=this._time&&!n._paused&&!n._gc)&&(c===n&&this.pause(),n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)),n=o;else for(n=this._last;n&&(o=n._prev,d===this._time&&(!this._paused||b));){if(n._active||n._startTime<=_&&!n._paused&&!n._gc){if(c===n){for(c=n._prev;c&&c.endTime()>this._time;)c.render(c._reversed?c.totalDuration()-(t-c._startTime)*c._timeScale:(t-c._startTime)*c._timeScale,e,i),c=c._prev;c=null,this.pause()}n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)}n=o}this._onUpdate&&(e||(s.length&&a(),this._callback("onUpdate"))),l&&(this._locked||this._gc||g!==this._startTime&&v===this._timeScale||(0===this._time||f>=this.totalDuration())&&(r&&(s.length&&a(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[l]&&this._callback(l)))}else m!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate"))},h.getActive=function(t,e,i){null==t&&(t=!0),null==e&&(e=!0),null==i&&(i=!1);var n,r,s=[],a=this.getChildren(t,e,i),o=0,l=a.length;for(n=0;n<l;n++)(r=a[n]).isActive()&&(s[o++]=r);return s},h.getLabelAfter=function(t){t||0!==t&&(t=this._time);var e,i=this.getLabelsArray(),n=i.length;for(e=0;e<n;e++)if(i[e].time>t)return i[e].name;return null},h.getLabelBefore=function(t){null==t&&(t=this._time);for(var e=this.getLabelsArray(),i=e.length;--i>-1;)if(e[i].time<t)return e[i].name;return null},h.getLabelsArray=function(){var t,e=[],i=0;for(t in this._labels)e[i++]={time:this._labels[t],name:t};return e.sort(function(t,e){return t.time-e.time}),e},h.invalidate=function(){return this._locked=!1,t.prototype.invalidate.call(this)},h.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()},h.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()},h.totalDuration=function(e){return arguments.length?-1!==this._repeat&&e?this.timeScale(this.totalDuration()/e):this:(this._dirty&&(t.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},h.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!=(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},h.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},h.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},h.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},h.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.getLabelBefore(this._time+1e-8)},n},!0),t=180/Math.PI,e=[],i=[],n=[],r={},s=_gsScope._gsDefine.globals,a=function(t,e,i,n){i===n&&(i=n-(n-e)/1e6),t===e&&(e=t+(i-t)/1e6),this.a=t,this.b=e,this.c=i,this.d=n,this.da=n-t,this.ca=i-t,this.ba=e-t},o=function(t,e,i,n){var r={a:t},s={},a={},o={c:n},l=(t+e)/2,h=(e+i)/2,u=(i+n)/2,c=(l+h)/2,d=(h+u)/2,f=(d-c)/8;return r.b=l+(t-l)/4,s.b=c+f,r.c=s.a=(r.b+s.b)/2,s.c=a.a=(c+d)/2,a.b=d-f,o.b=u+(n-u)/4,a.c=o.a=(a.b+o.b)/2,[r,s,a,o]},l=function(t,r,s,a,l){var h,u,c,d,f,p,_,m,g,v,y,b,E,T=t.length-1,x=0,w=t[0].a;for(h=0;h<T;h++)u=(f=t[x]).a,c=f.d,d=t[x+1].d,l?(y=e[h],E=((b=i[h])+y)*r*.25/(a?.5:n[h]||.5),m=c-((p=c-(c-u)*(a?.5*r:0!==y?E/y:0))+(((_=c+(d-c)*(a?.5*r:0!==b?E/b:0))-p)*(3*y/(y+b)+.5)/4||0))):m=c-((p=c-(c-u)*r*.5)+(_=c+(d-c)*r*.5))/2,p+=m,_+=m,f.c=g=p,f.b=0!==h?w:w=f.a+.6*(f.c-f.a),f.da=c-u,f.ca=g-u,f.ba=w-u,s?(v=o(u,w,g,c),t.splice(x,1,v[0],v[1],v[2],v[3]),x+=4):x++,w=_;(f=t[x]).b=w,f.c=w+.4*(f.d-w),f.da=f.d-f.a,f.ca=f.c-f.a,f.ba=w-f.a,s&&(v=o(f.a,w,f.c,f.d),t.splice(x,1,v[0],v[1],v[2],v[3]))},h=function(t,n,r,s){var o,l,h,u,c,d,f=[];if(s)for(l=(t=[s].concat(t)).length;--l>-1;)"string"==typeof(d=t[l][n])&&"="===d.charAt(1)&&(t[l][n]=s[n]+Number(d.charAt(0)+d.substr(2)));if((o=t.length-2)<0)return f[0]=new a(t[0][n],0,0,t[o<-1?0:1][n]),f;for(l=0;l<o;l++)h=t[l][n],u=t[l+1][n],f[l]=new a(h,0,0,u),r&&(c=t[l+2][n],e[l]=(e[l]||0)+(u-h)*(u-h),i[l]=(i[l]||0)+(c-u)*(c-u));return f[l]=new a(t[l][n],0,0,t[l+1][n]),f},u=function(t,s,a,o,u,c){var d,f,p,_,m,g,v,y,b={},E=[],T=c||t[0];for(f in u="string"==typeof u?","+u+",":",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",null==s&&(s=1),t[0])E.push(f);if(t.length>1){for(y=t[t.length-1],v=!0,d=E.length;--d>-1;)if(f=E[d],Math.abs(T[f]-y[f])>.05){v=!1;break}v&&(t=t.concat(),c&&t.unshift(c),t.push(t[1]),c=t[t.length-3])}for(e.length=i.length=n.length=0,d=E.length;--d>-1;)f=E[d],r[f]=-1!==u.indexOf(","+f+","),b[f]=h(t,f,r[f],c);for(d=e.length;--d>-1;)e[d]=Math.sqrt(e[d]),i[d]=Math.sqrt(i[d]);if(!o){for(d=E.length;--d>-1;)if(r[f])for(g=(p=b[E[d]]).length-1,_=0;_<g;_++)m=p[_+1].da/i[_]+p[_].da/e[_]||0,n[_]=(n[_]||0)+m*m;for(d=n.length;--d>-1;)n[d]=Math.sqrt(n[d])}for(d=E.length,_=a?4:1;--d>-1;)p=b[f=E[d]],l(p,s,a,o,r[f]),v&&(p.splice(0,_),p.splice(p.length-_,_));return b},c=function(t,e,i){for(var n,r,s,a,o,l,h,u,c,d,f,p=1/i,_=t.length;--_>-1;)for(s=(d=t[_]).a,a=d.d-s,o=d.c-s,l=d.b-s,n=r=0,u=1;u<=i;u++)n=r-(r=((h=p*u)*h*a+3*(c=1-h)*(h*o+c*l))*h),e[f=_*i+u-1]=(e[f]||0)+n*n},d=_gsScope._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.7",API:2,global:!0,init:function(t,e,i){this._target=t,e instanceof Array&&(e={values:e}),this._func={},this._mod={},this._props=[],this._timeRes=null==e.timeResolution?6:parseInt(e.timeResolution,10);var n,r,s,o,l,h=e.values||[],d={},f=h[0],p=e.autoRotate||i.vars.orientToBezier;for(n in this._autoRotate=p?p instanceof Array?p:[["x","y","rotation",!0===p?0:Number(p)||0]]:null,f)this._props.push(n);for(s=this._props.length;--s>-1;)n=this._props[s],this._overwriteProps.push(n),r=this._func[n]="function"==typeof t[n],d[n]=r?t[n.indexOf("set")||"function"!=typeof t["get"+n.substr(3)]?n:"get"+n.substr(3)]():parseFloat(t[n]),l||d[n]!==h[0][n]&&(l=d);if(this._beziers="cubic"!==e.type&&"quadratic"!==e.type&&"soft"!==e.type?u(h,isNaN(e.curviness)?1:e.curviness,!1,"thruBasic"===e.type,e.correlate,l):function(t,e,i){var n,r,s,o,l,h,u,c,d,f,p,_={},m="cubic"===(e=e||"soft")?3:2,g="soft"===e,v=[];if(g&&i&&(t=[i].concat(t)),null==t||t.length<m+1)throw"invalid Bezier data";for(d in t[0])v.push(d);for(h=v.length;--h>-1;){for(_[d=v[h]]=l=[],f=0,c=t.length,u=0;u<c;u++)n=null==i?t[u][d]:"string"==typeof(p=t[u][d])&&"="===p.charAt(1)?i[d]+Number(p.charAt(0)+p.substr(2)):Number(p),g&&u>1&&u<c-1&&(l[f++]=(n+l[f-2])/2),l[f++]=n;for(c=f-m+1,f=0,u=0;u<c;u+=m)n=l[u],r=l[u+1],s=l[u+2],o=2===m?0:l[u+3],l[f++]=p=3===m?new a(n,r,s,o):new a(n,(2*r+n)/3,(2*r+s)/3,s);l.length=f}return _}(h,e.type,d),this._segCount=this._beziers[n].length,this._timeRes){var _=function(t,e){var i,n,r,s,a=[],o=[],l=0,h=0,u=(e=e>>0||6)-1,d=[],f=[];for(i in t)c(t[i],a,e);for(r=a.length,n=0;n<r;n++)l+=Math.sqrt(a[n]),f[s=n%e]=l,s===u&&(h+=l,d[s=n/e>>0]=f,o[s]=h,l=0,f=[]);return{length:h,lengths:o,segments:d}}(this._beziers,this._timeRes);this._length=_.length,this._lengths=_.lengths,this._segments=_.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(p=this._autoRotate)for(this._initialRotations=[],p[0]instanceof Array||(this._autoRotate=p=[p]),s=p.length;--s>-1;){for(o=0;o<3;o++)n=p[s][o],this._func[n]="function"==typeof t[n]&&t[n.indexOf("set")||"function"!=typeof t["get"+n.substr(3)]?n:"get"+n.substr(3)];n=p[s][2],this._initialRotations[s]=(this._func[n]?this._func[n].call(this._target):this._target[n])||0,this._overwriteProps.push(n)}return this._startRatio=i.vars.runBackwards?1:0,!0},set:function(e){var i,n,r,s,a,o,l,h,u,c,d=this._segCount,f=this._func,p=this._target,_=e!==this._startRatio;if(this._timeRes){if(u=this._lengths,c=this._curSeg,e*=this._length,r=this._li,e>this._l2&&r<d-1){for(h=d-1;r<h&&(this._l2=u[++r])<=e;);this._l1=u[r-1],this._li=r,this._curSeg=c=this._segments[r],this._s2=c[this._s1=this._si=0]}else if(e<this._l1&&r>0){for(;r>0&&(this._l1=u[--r])>=e;);0===r&&e<this._l1?this._l1=0:r++,this._l2=u[r],this._li=r,this._curSeg=c=this._segments[r],this._s1=c[(this._si=c.length-1)-1]||0,this._s2=c[this._si]}if(i=r,e-=this._l1,r=this._si,e>this._s2&&r<c.length-1){for(h=c.length-1;r<h&&(this._s2=c[++r])<=e;);this._s1=c[r-1],this._si=r}else if(e<this._s1&&r>0){for(;r>0&&(this._s1=c[--r])>=e;);0===r&&e<this._s1?this._s1=0:r++,this._s2=c[r],this._si=r}o=(r+(e-this._s1)/(this._s2-this._s1))*this._prec||0}else o=(e-(i=e<0?0:e>=1?d-1:d*e>>0)*(1/d))*d;for(n=1-o,r=this._props.length;--r>-1;)s=this._props[r],l=(o*o*(a=this._beziers[s][i]).da+3*n*(o*a.ca+n*a.ba))*o+a.a,this._mod[s]&&(l=this._mod[s](l,p)),f[s]?p[s](l):p[s]=l;if(this._autoRotate){var m,g,v,y,b,E,T,x=this._autoRotate;for(r=x.length;--r>-1;)s=x[r][2],E=x[r][3]||0,T=!0===x[r][4]?1:t,a=this._beziers[x[r][0]],m=this._beziers[x[r][1]],a&&m&&(a=a[i],m=m[i],g=a.a+(a.b-a.a)*o,g+=((y=a.b+(a.c-a.b)*o)-g)*o,y+=(a.c+(a.d-a.c)*o-y)*o,v=m.a+(m.b-m.a)*o,v+=((b=m.b+(m.c-m.b)*o)-v)*o,b+=(m.c+(m.d-m.c)*o-b)*o,l=_?Math.atan2(b-v,y-g)*T+E:this._initialRotations[r],this._mod[s]&&(l=this._mod[s](l,p)),f[s]?p[s](l):p[s]=l)}}}),f=d.prototype,d.bezierThrough=u,d.cubicToQuadratic=o,d._autoCSS=!0,d.quadraticToCubic=function(t,e,i){return new a(t,(2*e+t)/3,(2*e+i)/3,i)},d._cssRegister=function(){var t=s.CSSPlugin;if(t){var e=t._internals,i=e._parseToProxy,n=e._setPluginRatio,r=e.CSSPropTween;e._registerComplexSpecialProp("bezier",{parser:function(t,e,s,a,o,l){e instanceof Array&&(e={values:e}),l=new d;var h,u,c,f=e.values,p=f.length-1,_=[],m={};if(p<0)return o;for(h=0;h<=p;h++)c=i(t,f[h],a,o,l,p!==h),_[h]=c.end;for(u in e)m[u]=e[u];return m.values=_,(o=new r(t,"bezier",0,0,c.pt,2)).data=c,o.plugin=l,o.setRatio=n,0===m.autoRotate&&(m.autoRotate=!0),!m.autoRotate||m.autoRotate instanceof Array||(h=!0===m.autoRotate?0:Number(m.autoRotate),m.autoRotate=null!=c.end.left?[["left","top","rotation",h,!1]]:null!=c.end.x&&[["x","y","rotation",h,!1]]),m.autoRotate&&(a._transform||a._enableTransforms(!1),c.autoRotate=a._target._gsTransform,c.proxy.rotation=c.autoRotate.rotation||0,a._overwriteProps.push("rotation")),l._onInitTween(c.proxy,m,a._tween),o}})}},f._mod=function(t){for(var e,i=this._overwriteProps,n=i.length;--n>-1;)(e=t[i[n]])&&"function"==typeof e&&(this._mod[i[n]]=e)},f._kill=function(t){var e,i,n=this._props;for(e in this._beziers)if(e in t)for(delete this._beziers[e],delete this._func[e],i=n.length;--i>-1;)n[i]===e&&n.splice(i,1);if(n=this._autoRotate)for(i=n.length;--i>-1;)t[n[i][2]]&&n.splice(i,1);return this._super._kill.call(this,t)},_gsScope._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(t,e){var i,n,r,s,a=function(){t.call(this,"css"),this._overwriteProps.length=0,this.setRatio=a.prototype.setRatio},o=_gsScope._gsDefine.globals,l={},h=a.prototype=new t("css");h.constructor=a,a.version="1.19.1",a.API=2,a.defaultTransformPerspective=0,a.defaultSkewType="compensated",a.defaultSmoothOrigin=!0,h="px",a.suffixMap={top:h,right:h,bottom:h,left:h,width:h,height:h,fontSize:h,padding:h,margin:h,perspective:h,lineHeight:""};var u,c,d,f,p,_,m,g,v,y,b=/(?:\-|\.|\b)(\d|\.|e\-)+/g,E=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,T=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,x=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,w=/(?:\d|\-|\+|=|#|\.)*/g,D=/opacity *= *([^)]*)/i,S=/opacity:([^;]*)/i,I=/alpha\(opacity *=.+?\)/i,A=/^(rgb|hsl)/,P=/([A-Z])/g,C=/-([a-z])/gi,M=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,O=function(t,e){return e.toUpperCase()},L=/(?:Left|Right|Width)/i,R=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,k=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,H=/,(?=[^\)]*(?:\(|$))/gi,F=/[\s,\(]/i,N=Math.PI/180,j=180/Math.PI,B={},U={style:{}},X=_gsScope.document||{createElement:function(){return U}},G=function(t,e){return X.createElementNS?X.createElementNS(e||"http://www.w3.org/1999/xhtml",t):X.createElement(t)},V=G("div"),W=G("img"),Y=a._internals={_specialProps:l},z=(_gsScope.navigator||{}).userAgent||"",q=(v=z.indexOf("Android"),y=G("a"),d=-1!==z.indexOf("Safari")&&-1===z.indexOf("Chrome")&&(-1===v||parseFloat(z.substr(v+8,2))>3),p=d&&parseFloat(z.substr(z.indexOf("Version/")+8,2))<6,f=-1!==z.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(z)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(z))&&(_=parseFloat(RegExp.$1)),!!y&&(y.style.cssText="top:1px;opacity:.55;",/^0.55/.test(y.style.opacity))),Z=function(t){return D.test("string"==typeof t?t:(t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100:1},K=function(t){_gsScope.console&&console.log(t)},J="",Q="",$=function(t,e){var i,n,r=(e=e||V).style;if(void 0!==r[t])return t;for(t=t.charAt(0).toUpperCase()+t.substr(1),i=["O","Moz","ms","Ms","Webkit"],n=5;--n>-1&&void 0===r[i[n]+t];);return n>=0?(J="-"+(Q=3===n?"ms":i[n]).toLowerCase()+"-",Q+t):null},tt=X.defaultView?X.defaultView.getComputedStyle:function(){},et=a.getStyle=function(t,e,i,n,r){var s;return q||"opacity"!==e?(!n&&t.style[e]?s=t.style[e]:(i=i||tt(t))?s=i[e]||i.getPropertyValue(e)||i.getPropertyValue(e.replace(P,"-$1").toLowerCase()):t.currentStyle&&(s=t.currentStyle[e]),null==r||s&&"none"!==s&&"auto"!==s&&"auto auto"!==s?s:r):Z(t)},it=Y.convertToPixels=function(t,i,n,r,s){if("px"===r||!r)return n;if("auto"===r||!n)return 0;var o,l,h,u=L.test(i),c=t,d=V.style,f=n<0,p=1===n;if(f&&(n=-n),p&&(n*=100),"%"===r&&-1!==i.indexOf("border"))o=n/100*(u?t.clientWidth:t.clientHeight);else{if(d.cssText="border:0 solid red;position:"+et(t,"position")+";line-height:0;","%"!==r&&c.appendChild&&"v"!==r.charAt(0)&&"rem"!==r)d[u?"borderLeftWidth":"borderTopWidth"]=n+r;else{if(l=(c=t.parentNode||X.body)._gsCache,h=e.ticker.frame,l&&u&&l.time===h)return l.width*n/100;d[u?"width":"height"]=n+r}c.appendChild(V),o=parseFloat(V[u?"offsetWidth":"offsetHeight"]),c.removeChild(V),u&&"%"===r&&!1!==a.cacheWidths&&((l=c._gsCache=c._gsCache||{}).time=h,l.width=o/n*100),0!==o||s||(o=it(t,i,n,r,!0))}return p&&(o/=100),f?-o:o},nt=Y.calculateOffset=function(t,e,i){if("absolute"!==et(t,"position",i))return 0;var n="left"===e?"Left":"Top",r=et(t,"margin"+n,i);return t["offset"+n]-(it(t,e,parseFloat(r),r.replace(w,""))||0)},rt=function(t,e){var i,n,r,s={};if(e=e||tt(t,null))if(i=e.length)for(;--i>-1;)-1!==(r=e[i]).indexOf("-transform")&&kt!==r||(s[r.replace(C,O)]=e.getPropertyValue(r));else for(i in e)-1!==i.indexOf("Transform")&&Rt!==i||(s[i]=e[i]);else if(e=t.currentStyle||t.style)for(i in e)"string"==typeof i&&void 0===s[i]&&(s[i.replace(C,O)]=e[i]);return q||(s.opacity=Z(t)),n=qt(t,e,!1),s.rotation=n.rotation,s.skewX=n.skewX,s.scaleX=n.scaleX,s.scaleY=n.scaleY,s.x=n.x,s.y=n.y,Ft&&(s.z=n.z,s.rotationX=n.rotationX,s.rotationY=n.rotationY,s.scaleZ=n.scaleZ),s.filters&&delete s.filters,s},st=function(t,e,i,n,r){var s,a,o,l={},h=t.style;for(a in i)"cssText"!==a&&"length"!==a&&isNaN(a)&&(e[a]!==(s=i[a])||r&&r[a])&&-1===a.indexOf("Origin")&&("number"!=typeof s&&"string"!=typeof s||(l[a]="auto"!==s||"left"!==a&&"top"!==a?""!==s&&"auto"!==s&&"none"!==s||"string"!=typeof e[a]||""===e[a].replace(x,"")?s:0:nt(t,a),void 0!==h[a]&&(o=new bt(h,a,h[a],o))));if(n)for(a in n)"className"!==a&&(l[a]=n[a]);return{difs:l,firstMPT:o}},at={width:["Left","Right"],height:["Top","Bottom"]},ot=["marginLeft","marginRight","marginTop","marginBottom"],lt=function(t,e,i){if("svg"===(t.nodeName+"").toLowerCase())return(i||tt(t))[e]||0;if(t.getCTM&&Wt(t))return t.getBBox()[e]||0;var n=parseFloat("width"===e?t.offsetWidth:t.offsetHeight),r=at[e],s=r.length;for(i=i||tt(t,null);--s>-1;)n-=parseFloat(et(t,"padding"+r[s],i,!0))||0,n-=parseFloat(et(t,"border"+r[s]+"Width",i,!0))||0;return n},ht=function(t,e){if("contain"===t||"auto"===t||"auto auto"===t)return t+" ";null!=t&&""!==t||(t="0 0");var i,n=t.split(" "),r=-1!==t.indexOf("left")?"0%":-1!==t.indexOf("right")?"100%":n[0],s=-1!==t.indexOf("top")?"0%":-1!==t.indexOf("bottom")?"100%":n[1];if(n.length>3&&!e){for(n=t.split(", ").join(",").split(","),t=[],i=0;i<n.length;i++)t.push(ht(n[i]));return t.join(",")}return null==s?s="center"===r?"50%":"0":"center"===s&&(s="50%"),("center"===r||isNaN(parseFloat(r))&&-1===(r+"").indexOf("="))&&(r="50%"),t=r+" "+s+(n.length>2?" "+n[2]:""),e&&(e.oxp=-1!==r.indexOf("%"),e.oyp=-1!==s.indexOf("%"),e.oxr="="===r.charAt(1),e.oyr="="===s.charAt(1),e.ox=parseFloat(r.replace(x,"")),e.oy=parseFloat(s.replace(x,"")),e.v=t),e||t},ut=function(t,e){return"function"==typeof t&&(t=t(g,m)),"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2)):parseFloat(t)-parseFloat(e)||0},ct=function(t,e){return"function"==typeof t&&(t=t(g,m)),null==t?e:"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2))+e:parseFloat(t)||0},dt=function(t,e,i,n){var r,s,a,o,l;return"function"==typeof t&&(t=t(g,m)),null==t?o=e:"number"==typeof t?o=t:(r=360,s=t.split("_"),a=((l="="===t.charAt(1))?parseInt(t.charAt(0)+"1",10)*parseFloat(s[0].substr(2)):parseFloat(s[0]))*(-1===t.indexOf("rad")?1:j)-(l?0:e),s.length&&(n&&(n[i]=e+a),-1!==t.indexOf("short")&&(a%=r)!==a%(r/2)&&(a=a<0?a+r:a-r),-1!==t.indexOf("_cw")&&a<0?a=(a+9999999999*r)%r-(a/r|0)*r:-1!==t.indexOf("ccw")&&a>0&&(a=(a-9999999999*r)%r-(a/r|0)*r)),o=e+a),o<1e-6&&o>-1e-6&&(o=0),o},ft={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},pt=function(t,e,i){return 255*(6*(t=t<0?t+1:t>1?t-1:t)<1?e+(i-e)*t*6:t<.5?i:3*t<2?e+(i-e)*(2/3-t)*6:e)+.5|0},_t=a.parseColor=function(t,e){var i,n,r,s,a,o,l,h,u,c,d;if(t)if("number"==typeof t)i=[t>>16,t>>8&255,255&t];else{if(","===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),ft[t])i=ft[t];else if("#"===t.charAt(0))4===t.length&&(t="#"+(n=t.charAt(1))+n+(r=t.charAt(2))+r+(s=t.charAt(3))+s),i=[(t=parseInt(t.substr(1),16))>>16,t>>8&255,255&t];else if("hsl"===t.substr(0,3))if(i=d=t.match(b),e){if(-1!==t.indexOf("="))return t.match(E)}else a=Number(i[0])%360/360,o=Number(i[1])/100,n=2*(l=Number(i[2])/100)-(r=l<=.5?l*(o+1):l+o-l*o),i.length>3&&(i[3]=Number(t[3])),i[0]=pt(a+1/3,n,r),i[1]=pt(a,n,r),i[2]=pt(a-1/3,n,r);else i=t.match(b)||ft.transparent;i[0]=Number(i[0]),i[1]=Number(i[1]),i[2]=Number(i[2]),i.length>3&&(i[3]=Number(i[3]))}else i=ft.black;return e&&!d&&(n=i[0]/255,r=i[1]/255,s=i[2]/255,l=((h=Math.max(n,r,s))+(u=Math.min(n,r,s)))/2,h===u?a=o=0:(c=h-u,o=l>.5?c/(2-h-u):c/(h+u),a=h===n?(r-s)/c+(r<s?6:0):h===r?(s-n)/c+2:(n-r)/c+4,a*=60),i[0]=a+.5|0,i[1]=100*o+.5|0,i[2]=100*l+.5|0),i},mt=function(t,e){var i,n,r,s=t.match(gt)||[],a=0,o=s.length?"":t;for(i=0;i<s.length;i++)n=s[i],a+=(r=t.substr(a,t.indexOf(n,a)-a)).length+n.length,3===(n=_t(n,e)).length&&n.push(1),o+=r+(e?"hsla("+n[0]+","+n[1]+"%,"+n[2]+"%,"+n[3]:"rgba("+n.join(","))+")";return o+t.substr(a)},gt="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(h in ft)gt+="|"+h+"\\b";gt=new RegExp(gt+")","gi"),a.colorStringFilter=function(t){var e,i=t[0]+t[1];gt.test(i)&&(e=-1!==i.indexOf("hsl(")||-1!==i.indexOf("hsla("),t[0]=mt(t[0],e),t[1]=mt(t[1],e)),gt.lastIndex=0},e.defaultStringFilter||(e.defaultStringFilter=a.colorStringFilter);var vt=function(t,e,i,n){if(null==t)return function(t){return t};var r,s=e?(t.match(gt)||[""])[0]:"",a=t.split(s).join("").match(T)||[],o=t.substr(0,t.indexOf(a[0])),l=")"===t.charAt(t.length-1)?")":"",h=-1!==t.indexOf(" ")?" ":",",u=a.length,c=u>0?a[0].replace(b,""):"";return u?r=e?function(t){var e,d,f,p;if("number"==typeof t)t+=c;else if(n&&H.test(t)){for(p=t.replace(H,"|").split("|"),f=0;f<p.length;f++)p[f]=r(p[f]);return p.join(",")}if(e=(t.match(gt)||[s])[0],f=(d=t.split(e).join("").match(T)||[]).length,u>f--)for(;++f<u;)d[f]=i?d[(f-1)/2|0]:a[f];return o+d.join(h)+h+e+l+(-1!==t.indexOf("inset")?" inset":"")}:function(t){var e,s,d;if("number"==typeof t)t+=c;else if(n&&H.test(t)){for(s=t.replace(H,"|").split("|"),d=0;d<s.length;d++)s[d]=r(s[d]);return s.join(",")}if(d=(e=t.match(T)||[]).length,u>d--)for(;++d<u;)e[d]=i?e[(d-1)/2|0]:a[d];return o+e.join(h)+l}:function(t){return t}},yt=function(t){return t=t.split(","),function(e,i,n,r,s,a,o){var l,h=(i+"").split(" ");for(o={},l=0;l<4;l++)o[t[l]]=h[l]=h[l]||h[(l-1)/2>>0];return r.parse(e,o,s,a)}},bt=(Y._setPluginRatio=function(t){this.plugin.setRatio(t);for(var e,i,n,r,s,a=this.data,o=a.proxy,l=a.firstMPT;l;)e=o[l.v],l.r?e=Math.round(e):e<1e-6&&e>-1e-6&&(e=0),l.t[l.p]=e,l=l._next;if(a.autoRotate&&(a.autoRotate.rotation=a.mod?a.mod(o.rotation,this.t):o.rotation),1===t||0===t)for(l=a.firstMPT,s=1===t?"e":"b";l;){if((i=l.t).type){if(1===i.type){for(r=i.xs0+i.s+i.xs1,n=1;n<i.l;n++)r+=i["xn"+n]+i["xs"+(n+1)];i[s]=r}}else i[s]=i.s+i.xs0;l=l._next}},function(t,e,i,n,r){this.t=t,this.p=e,this.v=i,this.r=r,n&&(n._prev=this,this._next=n)}),Et=(Y._parseToProxy=function(t,e,i,n,r,s){var a,o,l,h,u,c=n,d={},f={},p=i._transform,_=B;for(i._transform=null,B=e,n=u=i.parse(t,e,n,r),B=_,s&&(i._transform=p,c&&(c._prev=null,c._prev&&(c._prev._next=null)));n&&n!==c;){if(n.type<=1&&(f[o=n.p]=n.s+n.c,d[o]=n.s,s||(h=new bt(n,"s",o,h,n.r),n.c=0),1===n.type))for(a=n.l;--a>0;)l="xn"+a,f[o=n.p+"_"+l]=n.data[l],d[o]=n[l],s||(h=new bt(n,l,o,h,n.rxp[l]));n=n._next}return{proxy:d,end:f,firstMPT:h,pt:u}},Y.CSSPropTween=function(t,e,n,r,a,o,l,h,u,c,d){this.t=t,this.p=e,this.s=n,this.c=r,this.n=l||e,t instanceof Et||s.push(this.n),this.r=h,this.type=o||0,u&&(this.pr=u,i=!0),this.b=void 0===c?n:c,this.e=void 0===d?n+r:d,a&&(this._next=a,a._prev=this)}),Tt=function(t,e,i,n,r,s){var a=new Et(t,e,i,n-i,r,-1,s);return a.b=i,a.e=a.xs0=n,a},xt=a.parseComplex=function(t,e,i,n,r,s,o,l,h,c){i=i||s||"","function"==typeof n&&(n=n(g,m)),o=new Et(t,e,0,0,o,c?2:1,null,!1,l,i,n),n+="",r&&gt.test(n+i)&&(n=[i,n],a.colorStringFilter(n),i=n[0],n=n[1]);var d,f,p,_,v,y,T,x,w,D,S,I,A,P=i.split(", ").join(",").split(" "),C=n.split(", ").join(",").split(" "),M=P.length,O=!1!==u;for(-1===n.indexOf(",")&&-1===i.indexOf(",")||(P=P.join(" ").replace(H,", ").split(" "),C=C.join(" ").replace(H,", ").split(" "),M=P.length),M!==C.length&&(M=(P=(s||"").split(" ")).length),o.plugin=h,o.setRatio=c,gt.lastIndex=0,d=0;d<M;d++)if(_=P[d],v=C[d],(x=parseFloat(_))||0===x)o.appendXtra("",x,ut(v,x),v.replace(E,""),O&&-1!==v.indexOf("px"),!0);else if(r&&gt.test(_))I=")"+((I=v.indexOf(")")+1)?v.substr(I):""),A=-1!==v.indexOf("hsl")&&q,_=_t(_,A),v=_t(v,A),(w=_.length+v.length>6)&&!q&&0===v[3]?(o["xs"+o.l]+=o.l?" transparent":"transparent",o.e=o.e.split(C[d]).join("transparent")):(q||(w=!1),A?o.appendXtra(w?"hsla(":"hsl(",_[0],ut(v[0],_[0]),",",!1,!0).appendXtra("",_[1],ut(v[1],_[1]),"%,",!1).appendXtra("",_[2],ut(v[2],_[2]),w?"%,":"%"+I,!1):o.appendXtra(w?"rgba(":"rgb(",_[0],v[0]-_[0],",",!0,!0).appendXtra("",_[1],v[1]-_[1],",",!0).appendXtra("",_[2],v[2]-_[2],w?",":I,!0),w&&(_=_.length<4?1:_[3],o.appendXtra("",_,(v.length<4?1:v[3])-_,I,!1))),gt.lastIndex=0;else if(y=_.match(b)){if(!(T=v.match(E))||T.length!==y.length)return o;for(p=0,f=0;f<y.length;f++)S=y[f],D=_.indexOf(S,p),o.appendXtra(_.substr(p,D-p),Number(S),ut(T[f],S),"",O&&"px"===_.substr(D+S.length,2),0===f),p=D+S.length;o["xs"+o.l]+=_.substr(p)}else o["xs"+o.l]+=o.l||o["xs"+o.l]?" "+v:v;if(-1!==n.indexOf("=")&&o.data){for(I=o.xs0+o.data.s,d=1;d<o.l;d++)I+=o["xs"+d]+o.data["xn"+d];o.e=I+o["xs"+d]}return o.l||(o.type=-1,o.xs0=o.e),o.xfirst||o},wt=9;for((h=Et.prototype).l=h.pr=0;--wt>0;)h["xn"+wt]=0,h["xs"+wt]="";h.xs0="",h._next=h._prev=h.xfirst=h.data=h.plugin=h.setRatio=h.rxp=null,h.appendXtra=function(t,e,i,n,r,s){var a=this,o=a.l;return a["xs"+o]+=s&&(o||a["xs"+o])?" "+t:t||"",i||0===o||a.plugin?(a.l++,a.type=a.setRatio?2:1,a["xs"+a.l]=n||"",o>0?(a.data["xn"+o]=e+i,a.rxp["xn"+o]=r,a["xn"+o]=e,a.plugin||(a.xfirst=new Et(a,"xn"+o,e,i,a.xfirst||a,0,a.n,r,a.pr),a.xfirst.xs0=0),a):(a.data={s:e+i},a.rxp={},a.s=e,a.c=i,a.r=r,a)):(a["xs"+o]+=e+(n||""),a)};var Dt=function(t,e){e=e||{},this.p=e.prefix&&$(t)||t,l[t]=l[this.p]=this,this.format=e.formatter||vt(e.defaultValue,e.color,e.collapsible,e.multi),e.parser&&(this.parse=e.parser),this.clrs=e.color,this.multi=e.multi,this.keyword=e.keyword,this.dflt=e.defaultValue,this.pr=e.priority||0},St=Y._registerComplexSpecialProp=function(t,e,i){"object"!=typeof e&&(e={parser:i});var n,r=t.split(","),s=e.defaultValue;for(i=i||[s],n=0;n<r.length;n++)e.prefix=0===n&&e.prefix,e.defaultValue=i[n]||s,new Dt(r[n],e)},It=Y._registerPluginProp=function(t){if(!l[t]){var e=t.charAt(0).toUpperCase()+t.substr(1)+"Plugin";St(t,{parser:function(t,i,n,r,s,a,h){var u=o.com.greensock.plugins[e];return u?(u._cssRegister(),l[n].parse(t,i,n,r,s,a,h)):(K("Error: "+e+" js file not loaded."),s)}})}};(h=Dt.prototype).parseComplex=function(t,e,i,n,r,s){var a,o,l,h,u,c,d=this.keyword;if(this.multi&&(H.test(i)||H.test(e)?(o=e.replace(H,"|").split("|"),l=i.replace(H,"|").split("|")):d&&(o=[e],l=[i])),l){for(h=l.length>o.length?l.length:o.length,a=0;a<h;a++)e=o[a]=o[a]||this.dflt,i=l[a]=l[a]||this.dflt,d&&(u=e.indexOf(d))!==(c=i.indexOf(d))&&(-1===c?o[a]=o[a].split(d).join(""):-1===u&&(o[a]+=" "+d));e=o.join(", "),i=l.join(", ")}return xt(t,this.p,e,i,this.clrs,this.dflt,n,this.pr,r,s)},h.parse=function(t,e,i,n,s,a,o){return this.parseComplex(t.style,this.format(et(t,this.p,r,!1,this.dflt)),this.format(e),s,a)},a.registerSpecialProp=function(t,e,i){St(t,{parser:function(t,n,r,s,a,o,l){var h=new Et(t,r,0,0,a,2,r,!1,i);return h.plugin=o,h.setRatio=e(t,n,s._tween,r),h},priority:i})},a.useSVGTransformAttr=!0;var At,Pt,Ct,Mt,Ot,Lt="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Rt=$("transform"),kt=J+"transform",Ht=$("transformOrigin"),Ft=null!==$("perspective"),Nt=Y.Transform=function(){this.perspective=parseFloat(a.defaultTransformPerspective)||0,this.force3D=!(!1===a.defaultForce3D||!Ft)&&(a.defaultForce3D||"auto")},jt=_gsScope.SVGElement,Bt=function(t,e,i){var n,r=X.createElementNS("http://www.w3.org/2000/svg",t),s=/([a-z])([A-Z])/g;for(n in i)r.setAttributeNS(null,n.replace(s,"$1-$2").toLowerCase(),i[n]);return e.appendChild(r),r},Ut=X.documentElement||{},Xt=(Ot=_||/Android/i.test(z)&&!_gsScope.chrome,X.createElementNS&&!Ot&&(Pt=Bt("svg",Ut),Mt=(Ct=Bt("rect",Pt,{width:100,height:50,x:100})).getBoundingClientRect().width,Ct.style[Ht]="50% 50%",Ct.style[Rt]="scaleX(0.5)",Ot=Mt===Ct.getBoundingClientRect().width&&!(f&&Ft),Ut.removeChild(Pt)),Ot),Gt=function(t,e,i,n,r,s){var o,l,h,u,c,d,f,p,_,m,g,v,y,b,E=t._gsTransform,T=zt(t,!0);E&&(y=E.xOrigin,b=E.yOrigin),(!n||(o=n.split(" ")).length<2)&&(0===(f=t.getBBox()).x&&0===f.y&&f.width+f.height===0&&(f={x:parseFloat(t.hasAttribute("x")?t.getAttribute("x"):t.hasAttribute("cx")?t.getAttribute("cx"):0)||0,y:parseFloat(t.hasAttribute("y")?t.getAttribute("y"):t.hasAttribute("cy")?t.getAttribute("cy"):0)||0,width:0,height:0}),o=[(-1!==(e=ht(e).split(" "))[0].indexOf("%")?parseFloat(e[0])/100*f.width:parseFloat(e[0]))+f.x,(-1!==e[1].indexOf("%")?parseFloat(e[1])/100*f.height:parseFloat(e[1]))+f.y]),i.xOrigin=u=parseFloat(o[0]),i.yOrigin=c=parseFloat(o[1]),n&&T!==Yt&&(d=T[0],f=T[1],p=T[2],_=T[3],m=T[4],g=T[5],(v=d*_-f*p)&&(l=u*(_/v)+c*(-p/v)+(p*g-_*m)/v,h=u*(-f/v)+c*(d/v)-(d*g-f*m)/v,u=i.xOrigin=o[0]=l,c=i.yOrigin=o[1]=h)),E&&(s&&(i.xOffset=E.xOffset,i.yOffset=E.yOffset,E=i),r||!1!==r&&!1!==a.defaultSmoothOrigin?(l=u-y,h=c-b,E.xOffset+=l*T[0]+h*T[2]-l,E.yOffset+=l*T[1]+h*T[3]-h):E.xOffset=E.yOffset=0),s||t.setAttribute("data-svg-origin",o.join(" "))},Vt=function(t){var e,i=G("svg",this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,r=this.nextSibling,s=this.style.cssText;if(Ut.appendChild(i),i.appendChild(this),this.style.display="block",t)try{e=this.getBBox(),this._originalGetBBox=this.getBBox,this.getBBox=Vt}catch(t){}else this._originalGetBBox&&(e=this._originalGetBBox());return r?n.insertBefore(this,r):n.appendChild(this),Ut.removeChild(i),this.style.cssText=s,e},Wt=function(t){return!(!(jt&&t.getCTM&&function(t){try{return t.getBBox()}catch(e){return Vt.call(t,!0)}}(t))||t.parentNode&&!t.ownerSVGElement)},Yt=[1,0,0,1,0,0],zt=function(t,e){var i,n,r,s,a,o,l=t._gsTransform||new Nt,h=t.style;if(Rt?n=et(t,kt,null,!0):t.currentStyle&&(n=(n=t.currentStyle.filter.match(R))&&4===n.length?[n[0].substr(4),Number(n[2].substr(4)),Number(n[1].substr(4)),n[3].substr(4),l.x||0,l.y||0].join(","):""),(i=!n||"none"===n||"matrix(1, 0, 0, 1, 0, 0)"===n)&&Rt&&((o="none"===tt(t).display)||!t.parentNode)&&(o&&(s=h.display,h.display="block"),t.parentNode||(a=1,Ut.appendChild(t)),i=!(n=et(t,kt,null,!0))||"none"===n||"matrix(1, 0, 0, 1, 0, 0)"===n,s?h.display=s:o&&Qt(h,"display"),a&&Ut.removeChild(t)),(l.svg||t.getCTM&&Wt(t))&&(i&&-1!==(h[Rt]+"").indexOf("matrix")&&(n=h[Rt],i=0),r=t.getAttribute("transform"),i&&r&&(-1!==r.indexOf("matrix")?(n=r,i=0):-1!==r.indexOf("translate")&&(n="matrix(1,0,0,1,"+r.match(/(?:\-|\b)[\d\-\.e]+\b/gi).join(",")+")",i=0))),i)return Yt;for(r=(n||"").match(b)||[],wt=r.length;--wt>-1;)s=Number(r[wt]),r[wt]=(a=s-(s|=0))?(1e5*a+(a<0?-.5:.5)|0)/1e5+s:s;return e&&r.length>6?[r[0],r[1],r[4],r[5],r[12],r[13]]:r},qt=Y.getTransform=function(t,i,n,r){if(t._gsTransform&&n&&!r)return t._gsTransform;var s,o,l,h,u,c,d=n&&t._gsTransform||new Nt,f=d.scaleX<0,p=Ft&&(parseFloat(et(t,Ht,i,!1,"0 0 0").split(" ")[2])||d.zOrigin)||0,_=parseFloat(a.defaultTransformPerspective)||0;if(d.svg=!(!t.getCTM||!Wt(t)),d.svg&&(Gt(t,et(t,Ht,i,!1,"50% 50%")+"",d,t.getAttribute("data-svg-origin")),At=a.useSVGTransformAttr||Xt),(s=zt(t))!==Yt){if(16===s.length){var m,g,v,y,b,E=s[0],T=s[1],x=s[2],w=s[3],D=s[4],S=s[5],I=s[6],A=s[7],P=s[8],C=s[9],M=s[10],O=s[12],L=s[13],R=s[14],k=s[11],H=Math.atan2(I,M);d.zOrigin&&(O=P*(R=-d.zOrigin)-s[12],L=C*R-s[13],R=M*R+d.zOrigin-s[14]),d.rotationX=H*j,H&&(m=D*(y=Math.cos(-H))+P*(b=Math.sin(-H)),g=S*y+C*b,v=I*y+M*b,P=D*-b+P*y,C=S*-b+C*y,M=I*-b+M*y,k=A*-b+k*y,D=m,S=g,I=v),H=Math.atan2(-x,M),d.rotationY=H*j,H&&(g=T*(y=Math.cos(-H))-C*(b=Math.sin(-H)),v=x*y-M*b,C=T*b+C*y,M=x*b+M*y,k=w*b+k*y,E=m=E*y-P*b,T=g,x=v),H=Math.atan2(T,E),d.rotation=H*j,H&&(E=E*(y=Math.cos(-H))+D*(b=Math.sin(-H)),g=T*y+S*b,S=T*-b+S*y,I=x*-b+I*y,T=g),d.rotationX&&Math.abs(d.rotationX)+Math.abs(d.rotation)>359.9&&(d.rotationX=d.rotation=0,d.rotationY=180-d.rotationY),d.scaleX=(1e5*Math.sqrt(E*E+T*T)+.5|0)/1e5,d.scaleY=(1e5*Math.sqrt(S*S+C*C)+.5|0)/1e5,d.scaleZ=(1e5*Math.sqrt(I*I+M*M)+.5|0)/1e5,d.rotationX||d.rotationY?d.skewX=0:(d.skewX=D||S?Math.atan2(D,S)*j+d.rotation:d.skewX||0,Math.abs(d.skewX)>90&&Math.abs(d.skewX)<270&&(f?(d.scaleX*=-1,d.skewX+=d.rotation<=0?180:-180,d.rotation+=d.rotation<=0?180:-180):(d.scaleY*=-1,d.skewX+=d.skewX<=0?180:-180))),d.perspective=k?1/(k<0?-k:k):0,d.x=O,d.y=L,d.z=R,d.svg&&(d.x-=d.xOrigin-(d.xOrigin*E-d.yOrigin*D),d.y-=d.yOrigin-(d.yOrigin*T-d.xOrigin*S))}else if(!Ft||r||!s.length||d.x!==s[4]||d.y!==s[5]||!d.rotationX&&!d.rotationY){var F=s.length>=6,N=F?s[0]:1,B=s[1]||0,U=s[2]||0,X=F?s[3]:1;d.x=s[4]||0,d.y=s[5]||0,l=Math.sqrt(N*N+B*B),h=Math.sqrt(X*X+U*U),u=N||B?Math.atan2(B,N)*j:d.rotation||0,c=U||X?Math.atan2(U,X)*j+u:d.skewX||0,Math.abs(c)>90&&Math.abs(c)<270&&(f?(l*=-1,c+=u<=0?180:-180,u+=u<=0?180:-180):(h*=-1,c+=c<=0?180:-180)),d.scaleX=l,d.scaleY=h,d.rotation=u,d.skewX=c,Ft&&(d.rotationX=d.rotationY=d.z=0,d.perspective=_,d.scaleZ=1),d.svg&&(d.x-=d.xOrigin-(d.xOrigin*N+d.yOrigin*U),d.y-=d.yOrigin-(d.xOrigin*B+d.yOrigin*X))}for(o in d.zOrigin=p,d)d[o]<2e-5&&d[o]>-2e-5&&(d[o]=0)}return n&&(t._gsTransform=d,d.svg&&(At&&t.style[Rt]?e.delayedCall(.001,function(){Qt(t.style,Rt)}):!At&&t.getAttribute("transform")&&e.delayedCall(.001,function(){t.removeAttribute("transform")}))),d},Zt=function(t){var e,i,n=this.data,r=-n.rotation*N,s=r+n.skewX*N,a=(Math.cos(r)*n.scaleX*1e5|0)/1e5,o=(Math.sin(r)*n.scaleX*1e5|0)/1e5,l=(Math.sin(s)*-n.scaleY*1e5|0)/1e5,h=(Math.cos(s)*n.scaleY*1e5|0)/1e5,u=this.t.style,c=this.t.currentStyle;if(c){i=o,o=-l,l=-i,e=c.filter,u.filter="";var d,f,p=this.t.offsetWidth,m=this.t.offsetHeight,g="absolute"!==c.position,v="progid:DXImageTransform.Microsoft.Matrix(M11="+a+", M12="+o+", M21="+l+", M22="+h,y=n.x+p*n.xPercent/100,b=n.y+m*n.yPercent/100;if(null!=n.ox&&(y+=(d=(n.oxp?p*n.ox*.01:n.ox)-p/2)-(d*a+(f=(n.oyp?m*n.oy*.01:n.oy)-m/2)*o),b+=f-(d*l+f*h)),v+=g?", Dx="+((d=p/2)-(d*a+(f=m/2)*o)+y)+", Dy="+(f-(d*l+f*h)+b)+")":", sizingMethod='auto expand')",-1!==e.indexOf("DXImageTransform.Microsoft.Matrix(")?u.filter=e.replace(k,v):u.filter=v+" "+e,0!==t&&1!==t||1===a&&0===o&&0===l&&1===h&&(g&&-1===v.indexOf("Dx=0, Dy=0")||D.test(e)&&100!==parseFloat(RegExp.$1)||-1===e.indexOf(e.indexOf("Alpha"))&&u.removeAttribute("filter")),!g){var E,T,x,S=_<8?1:-1;for(d=n.ieOffsetX||0,f=n.ieOffsetY||0,n.ieOffsetX=Math.round((p-((a<0?-a:a)*p+(o<0?-o:o)*m))/2+y),n.ieOffsetY=Math.round((m-((h<0?-h:h)*m+(l<0?-l:l)*p))/2+b),wt=0;wt<4;wt++)x=(i=-1!==(E=c[T=ot[wt]]).indexOf("px")?parseFloat(E):it(this.t,T,parseFloat(E),E.replace(w,""))||0)!==n[T]?wt<2?-n.ieOffsetX:-n.ieOffsetY:wt<2?d-n.ieOffsetX:f-n.ieOffsetY,u[T]=(n[T]=Math.round(i-x*(0===wt||2===wt?1:S)))+"px"}}},Kt=Y.set3DTransformRatio=Y.setTransformRatio=function(t){var e,i,n,r,s,a,o,l,h,u,c,d,p,_,m,g,v,y,b,E,T,x=this.data,w=this.t.style,D=x.rotation,S=x.rotationX,I=x.rotationY,A=x.scaleX,P=x.scaleY,C=x.scaleZ,M=x.x,O=x.y,L=x.z,R=x.svg,k=x.perspective,H=x.force3D,F=x.skewY,j=x.skewX;if(F&&(j+=F,D+=F),!((1!==t&&0!==t||"auto"!==H||this.tween._totalTime!==this.tween._totalDuration&&this.tween._totalTime)&&H||L||k||I||S||1!==C)||At&&R||!Ft)D||j||R?(D*=N,E=j*N,T=1e5,i=Math.cos(D)*A,s=Math.sin(D)*A,n=Math.sin(D-E)*-P,a=Math.cos(D-E)*P,E&&"simple"===x.skewType&&(e=Math.tan(E-F*N),n*=e=Math.sqrt(1+e*e),a*=e,F&&(e=Math.tan(F*N),i*=e=Math.sqrt(1+e*e),s*=e)),R&&(M+=x.xOrigin-(x.xOrigin*i+x.yOrigin*n)+x.xOffset,O+=x.yOrigin-(x.xOrigin*s+x.yOrigin*a)+x.yOffset,At&&(x.xPercent||x.yPercent)&&(m=this.t.getBBox(),M+=.01*x.xPercent*m.width,O+=.01*x.yPercent*m.height),M<(m=1e-6)&&M>-m&&(M=0),O<m&&O>-m&&(O=0)),b=(i*T|0)/T+","+(s*T|0)/T+","+(n*T|0)/T+","+(a*T|0)/T+","+M+","+O+")",R&&At?this.t.setAttribute("transform","matrix("+b):w[Rt]=(x.xPercent||x.yPercent?"translate("+x.xPercent+"%,"+x.yPercent+"%) matrix(":"matrix(")+b):w[Rt]=(x.xPercent||x.yPercent?"translate("+x.xPercent+"%,"+x.yPercent+"%) matrix(":"matrix(")+A+",0,0,"+P+","+M+","+O+")";else{if(f&&(A<(m=1e-4)&&A>-m&&(A=C=2e-5),P<m&&P>-m&&(P=C=2e-5),!k||x.z||x.rotationX||x.rotationY||(k=0)),D||j)D*=N,g=i=Math.cos(D),v=s=Math.sin(D),j&&(D-=j*N,g=Math.cos(D),v=Math.sin(D),"simple"===x.skewType&&(e=Math.tan((j-F)*N),g*=e=Math.sqrt(1+e*e),v*=e,x.skewY&&(e=Math.tan(F*N),i*=e=Math.sqrt(1+e*e),s*=e))),n=-v,a=g;else{if(!(I||S||1!==C||k||R))return void(w[Rt]=(x.xPercent||x.yPercent?"translate("+x.xPercent+"%,"+x.yPercent+"%) translate3d(":"translate3d(")+M+"px,"+O+"px,"+L+"px)"+(1!==A||1!==P?" scale("+A+","+P+")":""));i=a=1,n=s=0}u=1,r=o=l=h=c=d=0,p=k?-1/k:0,_=x.zOrigin,m=1e-6,",","0",(D=I*N)&&(g=Math.cos(D),l=-(v=Math.sin(D)),c=p*-v,r=i*v,o=s*v,u=g,p*=g,i*=g,s*=g),(D=S*N)&&(e=n*(g=Math.cos(D))+r*(v=Math.sin(D)),y=a*g+o*v,h=u*v,d=p*v,r=n*-v+r*g,o=a*-v+o*g,u*=g,p*=g,n=e,a=y),1!==C&&(r*=C,o*=C,u*=C,p*=C),1!==P&&(n*=P,a*=P,h*=P,d*=P),1!==A&&(i*=A,s*=A,l*=A,c*=A),(_||R)&&(_&&(M+=r*-_,O+=o*-_,L+=u*-_+_),R&&(M+=x.xOrigin-(x.xOrigin*i+x.yOrigin*n)+x.xOffset,O+=x.yOrigin-(x.xOrigin*s+x.yOrigin*a)+x.yOffset),M<m&&M>-m&&(M="0"),O<m&&O>-m&&(O="0"),L<m&&L>-m&&(L=0)),b=x.xPercent||x.yPercent?"translate("+x.xPercent+"%,"+x.yPercent+"%) matrix3d(":"matrix3d(",b+=(i<m&&i>-m?"0":i)+","+(s<m&&s>-m?"0":s)+","+(l<m&&l>-m?"0":l),b+=","+(c<m&&c>-m?"0":c)+","+(n<m&&n>-m?"0":n)+","+(a<m&&a>-m?"0":a),S||I||1!==C?(b+=","+(h<m&&h>-m?"0":h)+","+(d<m&&d>-m?"0":d)+","+(r<m&&r>-m?"0":r),b+=","+(o<m&&o>-m?"0":o)+","+(u<m&&u>-m?"0":u)+","+(p<m&&p>-m?"0":p)+","):b+=",0,0,0,0,1,0,",b+=M+","+O+","+L+","+(k?1+-L/k:1)+")",w[Rt]=b}};(h=Nt.prototype).x=h.y=h.z=h.skewX=h.skewY=h.rotation=h.rotationX=h.rotationY=h.zOrigin=h.xPercent=h.yPercent=h.xOffset=h.yOffset=0,h.scaleX=h.scaleY=h.scaleZ=1,St("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(t,e,i,n,s,o,l){if(n._lastParsedTransform===l)return s;n._lastParsedTransform=l;var h,u=l.scale&&"function"==typeof l.scale?l.scale:0;"function"==typeof l[i]&&(h=l[i],l[i]=e),u&&(l.scale=u(g,t));var c,d,f,p,_,v,y,b,E,T=t._gsTransform,x=t.style,w=Lt.length,D=l,S={},I="transformOrigin",A=qt(t,r,!0,D.parseTransform),P=D.transform&&("function"==typeof D.transform?D.transform(g,m):D.transform);if(n._transform=A,P&&"string"==typeof P&&Rt)(d=V.style)[Rt]=P,d.display="block",d.position="absolute",X.body.appendChild(V),c=qt(V,null,!1),A.svg&&(v=A.xOrigin,y=A.yOrigin,c.x-=A.xOffset,c.y-=A.yOffset,(D.transformOrigin||D.svgOrigin)&&(P={},Gt(t,ht(D.transformOrigin),P,D.svgOrigin,D.smoothOrigin,!0),v=P.xOrigin,y=P.yOrigin,c.x-=P.xOffset-A.xOffset,c.y-=P.yOffset-A.yOffset),(v||y)&&(b=zt(V,!0),c.x-=v-(v*b[0]+y*b[2]),c.y-=y-(v*b[1]+y*b[3]))),X.body.removeChild(V),c.perspective||(c.perspective=A.perspective),null!=D.xPercent&&(c.xPercent=ct(D.xPercent,A.xPercent)),null!=D.yPercent&&(c.yPercent=ct(D.yPercent,A.yPercent));else if("object"==typeof D){if(c={scaleX:ct(null!=D.scaleX?D.scaleX:D.scale,A.scaleX),scaleY:ct(null!=D.scaleY?D.scaleY:D.scale,A.scaleY),scaleZ:ct(D.scaleZ,A.scaleZ),x:ct(D.x,A.x),y:ct(D.y,A.y),z:ct(D.z,A.z),xPercent:ct(D.xPercent,A.xPercent),yPercent:ct(D.yPercent,A.yPercent),perspective:ct(D.transformPerspective,A.perspective)},null!=(_=D.directionalRotation))if("object"==typeof _)for(d in _)D[d]=_[d];else D.rotation=_;"string"==typeof D.x&&-1!==D.x.indexOf("%")&&(c.x=0,c.xPercent=ct(D.x,A.xPercent)),"string"==typeof D.y&&-1!==D.y.indexOf("%")&&(c.y=0,c.yPercent=ct(D.y,A.yPercent)),c.rotation=dt("rotation"in D?D.rotation:"shortRotation"in D?D.shortRotation+"_short":"rotationZ"in D?D.rotationZ:A.rotation,A.rotation,"rotation",S),Ft&&(c.rotationX=dt("rotationX"in D?D.rotationX:"shortRotationX"in D?D.shortRotationX+"_short":A.rotationX||0,A.rotationX,"rotationX",S),c.rotationY=dt("rotationY"in D?D.rotationY:"shortRotationY"in D?D.shortRotationY+"_short":A.rotationY||0,A.rotationY,"rotationY",S)),c.skewX=dt(D.skewX,A.skewX),c.skewY=dt(D.skewY,A.skewY)}for(Ft&&null!=D.force3D&&(A.force3D=D.force3D,p=!0),A.skewType=D.skewType||A.skewType||a.defaultSkewType,(f=A.force3D||A.z||A.rotationX||A.rotationY||c.z||c.rotationX||c.rotationY||c.perspective)||null==D.scale||(c.scaleZ=1);--w>-1;)((P=c[E=Lt[w]]-A[E])>1e-6||P<-1e-6||null!=D[E]||null!=B[E])&&(p=!0,s=new Et(A,E,A[E],P,s),E in S&&(s.e=S[E]),s.xs0=0,s.plugin=o,n._overwriteProps.push(s.n));return P=D.transformOrigin,A.svg&&(P||D.svgOrigin)&&(v=A.xOffset,y=A.yOffset,Gt(t,ht(P),c,D.svgOrigin,D.smoothOrigin),s=Tt(A,"xOrigin",(T?A:c).xOrigin,c.xOrigin,s,I),s=Tt(A,"yOrigin",(T?A:c).yOrigin,c.yOrigin,s,I),v===A.xOffset&&y===A.yOffset||(s=Tt(A,"xOffset",T?v:A.xOffset,A.xOffset,s,I),s=Tt(A,"yOffset",T?y:A.yOffset,A.yOffset,s,I)),P="0px 0px"),(P||Ft&&f&&A.zOrigin)&&(Rt?(p=!0,E=Ht,P=(P||et(t,E,r,!1,"50% 50%"))+"",(s=new Et(x,E,0,0,s,-1,I)).b=x[E],s.plugin=o,Ft?(d=A.zOrigin,P=P.split(" "),A.zOrigin=(P.length>2&&(0===d||"0px"!==P[2])?parseFloat(P[2]):d)||0,s.xs0=s.e=P[0]+" "+(P[1]||"50%")+" 0px",(s=new Et(A,"zOrigin",0,0,s,-1,s.n)).b=d,s.xs0=s.e=A.zOrigin):s.xs0=s.e=P):ht(P+"",A)),p&&(n._transformType=A.svg&&At||!f&&3!==this._transformType?2:3),h&&(l[i]=h),u&&(l.scale=u),s},prefix:!0}),St("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),St("borderRadius",{defaultValue:"0px",parser:function(t,e,i,s,a,o){e=this.format(e);var l,h,u,c,d,f,p,_,m,g,v,y,b,E,T,x,w=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],D=t.style;for(m=parseFloat(t.offsetWidth),g=parseFloat(t.offsetHeight),l=e.split(" "),h=0;h<w.length;h++)this.p.indexOf("border")&&(w[h]=$(w[h])),-1!==(d=c=et(t,w[h],r,!1,"0px")).indexOf(" ")&&(d=(c=d.split(" "))[0],c=c[1]),f=u=l[h],p=parseFloat(d),y=d.substr((p+"").length),(b="="===f.charAt(1))?(_=parseInt(f.charAt(0)+"1",10),f=f.substr(2),_*=parseFloat(f),v=f.substr((_+"").length-(_<0?1:0))||""):(_=parseFloat(f),v=f.substr((_+"").length)),""===v&&(v=n[i]||y),v!==y&&(E=it(t,"borderLeft",p,y),T=it(t,"borderTop",p,y),"%"===v?(d=E/m*100+"%",c=T/g*100+"%"):"em"===v?(d=E/(x=it(t,"borderLeft",1,"em"))+"em",c=T/x+"em"):(d=E+"px",c=T+"px"),b&&(f=parseFloat(d)+_+v,u=parseFloat(c)+_+v)),a=xt(D,w[h],d+" "+c,f+" "+u,!1,"0px",a);return a},prefix:!0,formatter:vt("0px 0px 0px 0px",!1,!0)}),St("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(t,e,i,n,s,a){return xt(t.style,i,this.format(et(t,i,r,!1,"0px 0px")),this.format(e),!1,"0px",s)},prefix:!0,formatter:vt("0px 0px",!1,!0)}),St("backgroundPosition",{defaultValue:"0 0",parser:function(t,e,i,n,s,a){var o,l,h,u,c,d,f="background-position",p=r||tt(t,null),m=this.format((p?_?p.getPropertyValue(f+"-x")+" "+p.getPropertyValue(f+"-y"):p.getPropertyValue(f):t.currentStyle.backgroundPositionX+" "+t.currentStyle.backgroundPositionY)||"0 0"),g=this.format(e);if(-1!==m.indexOf("%")!=(-1!==g.indexOf("%"))&&g.split(",").length<2&&(d=et(t,"backgroundImage").replace(M,""))&&"none"!==d){for(o=m.split(" "),l=g.split(" "),W.setAttribute("src",d),h=2;--h>-1;)(u=-1!==(m=o[h]).indexOf("%"))!==(-1!==l[h].indexOf("%"))&&(c=0===h?t.offsetWidth-W.width:t.offsetHeight-W.height,o[h]=u?parseFloat(m)/100*c+"px":parseFloat(m)/c*100+"%");m=o.join(" ")}return this.parseComplex(t.style,m,g,s,a)},formatter:ht}),St("backgroundSize",{defaultValue:"0 0",formatter:function(t){return ht(-1===(t+="").indexOf(" ")?t+" "+t:t)}}),St("perspective",{defaultValue:"0px",prefix:!0}),St("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),St("transformStyle",{prefix:!0}),St("backfaceVisibility",{prefix:!0}),St("userSelect",{prefix:!0}),St("margin",{parser:yt("marginTop,marginRight,marginBottom,marginLeft")}),St("padding",{parser:yt("paddingTop,paddingRight,paddingBottom,paddingLeft")}),St("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(t,e,i,n,s,a){var o,l,h;return _<9?(l=t.currentStyle,h=_<8?" ":",",o="rect("+l.clipTop+h+l.clipRight+h+l.clipBottom+h+l.clipLeft+")",e=this.format(e).split(",").join(h)):(o=this.format(et(t,this.p,r,!1,this.dflt)),e=this.format(e)),this.parseComplex(t.style,o,e,s,a)}}),St("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),St("autoRound,strictUnits",{parser:function(t,e,i,n,r){return r}}),St("border",{defaultValue:"0px solid #000",parser:function(t,e,i,n,s,a){var o=et(t,"borderTopWidth",r,!1,"0px"),l=this.format(e).split(" "),h=l[0].replace(w,"");return"px"!==h&&(o=parseFloat(o)/it(t,"borderTopWidth",1,h)+h),this.parseComplex(t.style,this.format(o+" "+et(t,"borderTopStyle",r,!1,"solid")+" "+et(t,"borderTopColor",r,!1,"#000")),l.join(" "),s,a)},color:!0,formatter:function(t){var e=t.split(" ");return e[0]+" "+(e[1]||"solid")+" "+(t.match(gt)||["#000"])[0]}}),St("borderWidth",{parser:yt("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),St("float,cssFloat,styleFloat",{parser:function(t,e,i,n,r,s){var a=t.style,o="cssFloat"in a?"cssFloat":"styleFloat";return new Et(a,o,0,0,r,-1,i,!1,0,a[o],e)}});var Jt=function(t){var e,i=this.t,n=i.filter||et(this.data,"filter")||"",r=this.s+this.c*t|0;100===r&&(-1===n.indexOf("atrix(")&&-1===n.indexOf("radient(")&&-1===n.indexOf("oader(")?(i.removeAttribute("filter"),e=!et(this.data,"filter")):(i.filter=n.replace(I,""),e=!0)),e||(this.xn1&&(i.filter=n=n||"alpha(opacity="+r+")"),-1===n.indexOf("pacity")?0===r&&this.xn1||(i.filter=n+" alpha(opacity="+r+")"):i.filter=n.replace(D,"opacity="+r))};St("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(t,e,i,n,s,a){var o=parseFloat(et(t,"opacity",r,!1,"1")),l=t.style,h="autoAlpha"===i;return"string"==typeof e&&"="===e.charAt(1)&&(e=("-"===e.charAt(0)?-1:1)*parseFloat(e.substr(2))+o),h&&1===o&&"hidden"===et(t,"visibility",r)&&0!==e&&(o=0),q?s=new Et(l,"opacity",o,e-o,s):((s=new Et(l,"opacity",100*o,100*(e-o),s)).xn1=h?1:0,l.zoom=1,s.type=2,s.b="alpha(opacity="+s.s+")",s.e="alpha(opacity="+(s.s+s.c)+")",s.data=t,s.plugin=a,s.setRatio=Jt),h&&((s=new Et(l,"visibility",0,0,s,-1,null,!1,0,0!==o?"inherit":"hidden",0===e?"hidden":"inherit")).xs0="inherit",n._overwriteProps.push(s.n),n._overwriteProps.push(i)),s}});var Qt=function(t,e){e&&(t.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),t.removeProperty(e.replace(P,"-$1").toLowerCase())):t.removeAttribute(e))},$t=function(t){if(this.t._gsClassPT=this,1===t||0===t){this.t.setAttribute("class",0===t?this.b:this.e);for(var e=this.data,i=this.t.style;e;)e.v?i[e.p]=e.v:Qt(i,e.p),e=e._next;1===t&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};St("className",{parser:function(t,e,n,s,a,o,l){var h,u,c,d,f,p=t.getAttribute("class")||"",_=t.style.cssText;if((a=s._classNamePT=new Et(t,n,0,0,a,2)).setRatio=$t,a.pr=-11,i=!0,a.b=p,u=rt(t,r),c=t._gsClassPT){for(d={},f=c.data;f;)d[f.p]=1,f=f._next;c.setRatio(1)}return t._gsClassPT=a,a.e="="!==e.charAt(1)?e:p.replace(new RegExp("(?:\\s|^)"+e.substr(2)+"(?![\\w-])"),"")+("+"===e.charAt(0)?" "+e.substr(2):""),t.setAttribute("class",a.e),h=st(t,u,rt(t),l,d),t.setAttribute("class",p),a.data=h.firstMPT,t.style.cssText=_,a=a.xfirst=s.parse(t,h.difs,a,o)}});var te=function(t){if((1===t||0===t)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var e,i,n,r,s,a=this.t.style,o=l.transform.parse;if("all"===this.e)a.cssText="",r=!0;else for(n=(e=this.e.split(" ").join("").split(",")).length;--n>-1;)i=e[n],l[i]&&(l[i].parse===o?r=!0:i="transformOrigin"===i?Ht:l[i].p),Qt(a,i);r&&(Qt(a,Rt),(s=this.t._gsTransform)&&(s.svg&&(this.t.removeAttribute("data-svg-origin"),this.t.removeAttribute("transform")),delete this.t._gsTransform))}};for(St("clearProps",{parser:function(t,e,n,r,s){return(s=new Et(t,n,0,0,s,2)).setRatio=te,s.e=e,s.pr=-10,s.data=r._tween,i=!0,s}}),h="bezier,throwProps,physicsProps,physics2D".split(","),wt=h.length;wt--;)It(h[wt]);(h=a.prototype)._firstPT=h._lastParsedTransform=h._transform=null,h._onInitTween=function(t,e,o,h){if(!t.nodeType)return!1;this._target=m=t,this._tween=o,this._vars=e,g=h,u=e.autoRound,i=!1,n=e.suffixMap||a.suffixMap,r=tt(t,""),s=this._overwriteProps;var f,_,v,y,b,E,T,x,w,D=t.style;if(c&&""===D.zIndex&&("auto"!==(f=et(t,"zIndex",r))&&""!==f||this._addLazySet(D,"zIndex",0)),"string"==typeof e&&(y=D.cssText,f=rt(t,r),D.cssText=y+";"+e,f=st(t,f,rt(t)).difs,!q&&S.test(e)&&(f.opacity=parseFloat(RegExp.$1)),e=f,D.cssText=y),e.className?this._firstPT=_=l.className.parse(t,e.className,"className",this,null,null,e):this._firstPT=_=this.parse(t,e,null),this._transformType){for(w=3===this._transformType,Rt?d&&(c=!0,""===D.zIndex&&("auto"!==(T=et(t,"zIndex",r))&&""!==T||this._addLazySet(D,"zIndex",0)),p&&this._addLazySet(D,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(w?"visible":"hidden"))):D.zoom=1,v=_;v&&v._next;)v=v._next;x=new Et(t,"transform",0,0,null,2),this._linkCSSP(x,null,v),x.setRatio=Rt?Kt:Zt,x.data=this._transform||qt(t,r,!0),x.tween=o,x.pr=-1,s.pop()}if(i){for(;_;){for(E=_._next,v=y;v&&v.pr>_.pr;)v=v._next;(_._prev=v?v._prev:b)?_._prev._next=_:y=_,(_._next=v)?v._prev=_:b=_,_=E}this._firstPT=y}return!0},h.parse=function(t,e,i,s){var a,o,h,c,d,f,p,_,v,y,b=t.style;for(a in e)"function"==typeof(f=e[a])&&(f=f(g,m)),(o=l[a])?i=o.parse(t,f,a,this,i,s,e):(d=et(t,a,r)+"",v="string"==typeof f,"color"===a||"fill"===a||"stroke"===a||-1!==a.indexOf("Color")||v&&A.test(f)?(v||(f=((f=_t(f)).length>3?"rgba(":"rgb(")+f.join(",")+")"),i=xt(b,a,d,f,!0,"transparent",i,0,s)):v&&F.test(f)?i=xt(b,a,d,f,!0,null,i,0,s):(p=(h=parseFloat(d))||0===h?d.substr((h+"").length):"",""!==d&&"auto"!==d||("width"===a||"height"===a?(h=lt(t,a,r),p="px"):"left"===a||"top"===a?(h=nt(t,a,r),p="px"):(h="opacity"!==a?0:1,p="")),(y=v&&"="===f.charAt(1))?(c=parseInt(f.charAt(0)+"1",10),f=f.substr(2),c*=parseFloat(f),_=f.replace(w,"")):(c=parseFloat(f),_=v?f.replace(w,""):""),""===_&&(_=a in n?n[a]:p),f=c||0===c?(y?c+h:c)+_:e[a],p!==_&&""!==_&&(c||0===c)&&h&&(h=it(t,a,h,p),"%"===_?(h/=it(t,a,100,"%")/100,!0!==e.strictUnits&&(d=h+"%")):"em"===_||"rem"===_||"vw"===_||"vh"===_?h/=it(t,a,1,_):"px"!==_&&(c=it(t,a,c,_),_="px"),y&&(c||0===c)&&(f=c+h+_)),y&&(c+=h),!h&&0!==h||!c&&0!==c?void 0!==b[a]&&(f||f+""!="NaN"&&null!=f)?(i=new Et(b,a,c||h||0,0,i,-1,a,!1,0,d,f)).xs0="none"!==f||"display"!==a&&-1===a.indexOf("Style")?f:d:K("invalid "+a+" tween value: "+e[a]):(i=new Et(b,a,h,c-h,i,0,a,!1!==u&&("px"===_||"zIndex"===a),0,d,f)).xs0=_)),s&&i&&!i.plugin&&(i.plugin=s);return i},h.setRatio=function(t){var e,i,n,r=this._firstPT;if(1!==t||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(t||this._tween._time!==this._tween._duration&&0!==this._tween._time||-1e-6===this._tween._rawPrevTime)for(;r;){if(e=r.c*t+r.s,r.r?e=Math.round(e):e<1e-6&&e>-1e-6&&(e=0),r.type)if(1===r.type)if(2===(n=r.l))r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2;else if(3===n)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3;else if(4===n)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4;else if(5===n)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4+r.xn4+r.xs5;else{for(i=r.xs0+e+r.xs1,n=1;n<r.l;n++)i+=r["xn"+n]+r["xs"+(n+1)];r.t[r.p]=i}else-1===r.type?r.t[r.p]=r.xs0:r.setRatio&&r.setRatio(t);else r.t[r.p]=e+r.xs0;r=r._next}else for(;r;)2!==r.type?r.t[r.p]=r.b:r.setRatio(t),r=r._next;else for(;r;){if(2!==r.type)if(r.r&&-1!==r.type)if(e=Math.round(r.s+r.c),r.type){if(1===r.type){for(n=r.l,i=r.xs0+e+r.xs1,n=1;n<r.l;n++)i+=r["xn"+n]+r["xs"+(n+1)];r.t[r.p]=i}}else r.t[r.p]=e+r.xs0;else r.t[r.p]=r.e;else r.setRatio(t);r=r._next}},h._enableTransforms=function(t){this._transform=this._transform||qt(this._target,r,!0),this._transformType=this._transform.svg&&At||!t&&3!==this._transformType?2:3};var ee=function(t){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};h._addLazySet=function(t,e,i){var n=this._firstPT=new Et(t,e,0,0,this._firstPT,2);n.e=i,n.setRatio=ee,n.data=this},h._linkCSSP=function(t,e,i,n){return t&&(e&&(e._prev=t),t._next&&(t._next._prev=t._prev),t._prev?t._prev._next=t._next:this._firstPT===t&&(this._firstPT=t._next,n=!0),i?i._next=t:n||null!==this._firstPT||(this._firstPT=t),t._next=e,t._prev=i),t},h._mod=function(t){for(var e=this._firstPT;e;)"function"==typeof t[e.p]&&t[e.p]===Math.round&&(e.r=1),e=e._next},h._kill=function(e){var i,n,r,s=e;if(e.autoAlpha||e.alpha){for(n in s={},e)s[n]=e[n];s.opacity=1,s.autoAlpha&&(s.visibility=1)}for(e.className&&(i=this._classNamePT)&&((r=i.xfirst)&&r._prev?this._linkCSSP(r._prev,i._next,r._prev._prev):r===this._firstPT&&(this._firstPT=i._next),i._next&&this._linkCSSP(i._next,i._next._next,r._prev),this._classNamePT=null),i=this._firstPT;i;)i.plugin&&i.plugin!==n&&i.plugin._kill&&(i.plugin._kill(e),n=i.plugin),i=i._next;return t.prototype._kill.call(this,s)};var ie=function(t,e,i){var n,r,s,a;if(t.slice)for(r=t.length;--r>-1;)ie(t[r],e,i);else for(r=(n=t.childNodes).length;--r>-1;)a=(s=n[r]).type,s.style&&(e.push(rt(s)),i&&i.push(s)),1!==a&&9!==a&&11!==a||!s.childNodes.length||ie(s,e,i)};return a.cascadeTo=function(t,i,n){var r,s,a,o,l=e.to(t,i,n),h=[l],u=[],c=[],d=[],f=e._internals.reservedProps;for(t=l._targets||l.target,ie(t,u,d),l.render(i,!0,!0),ie(t,c),l.render(0,!0,!0),l._enabled(!0),r=d.length;--r>-1;)if((s=st(d[r],u[r],c[r])).firstMPT){for(a in s=s.difs,n)f[a]&&(s[a]=n[a]);for(a in o={},s)o[a]=u[r][a];h.push(e.fromTo(d[r],i,o,s))}return h},t.activate([a]),a},!0),p=function(t){for(;t;)t.f||t.blob||(t.m=Math.round),t=t._next},(_=_gsScope._gsDefine.plugin({propName:"roundProps",version:"1.6.0",priority:-1,API:2,init:function(t,e,i){return this._tween=i,!0}}).prototype)._onInitAllProps=function(){for(var t,e,i,n=this._tween,r=n.vars.roundProps.join?n.vars.roundProps:n.vars.roundProps.split(","),s=r.length,a={},o=n._propLookup.roundProps;--s>-1;)a[r[s]]=Math.round;for(s=r.length;--s>-1;)for(t=r[s],e=n._firstPT;e;)i=e._next,e.pg?e.t._mod(a):e.n===t&&(2===e.f&&e.t?p(e.t._firstPT):(this._add(e.t,t,e.s,e.c),i&&(i._prev=e._prev),e._prev?e._prev._next=i:n._firstPT===e&&(n._firstPT=i),e._next=e._prev=null,n._propLookup[t]=o)),e=i;return!1},_._add=function(t,e,i,n){this._addTween(t,e,i,i+n,e,Math.round),this._overwriteProps.push(e)},_gsScope._gsDefine.plugin({propName:"attr",API:2,version:"0.6.0",init:function(t,e,i,n){var r,s;if("function"!=typeof t.setAttribute)return!1;for(r in e)"function"==typeof(s=e[r])&&(s=s(n,t)),this._addTween(t,"setAttribute",t.getAttribute(r)+"",s+"",r,!1,r),this._overwriteProps.push(r);return!0}}),_gsScope._gsDefine.plugin({propName:"directionalRotation",version:"0.3.0",API:2,init:function(t,e,i,n){"object"!=typeof e&&(e={rotation:e}),this.finals={};var r,s,a,o,l,h,u=!0===e.useRadians?2*Math.PI:360;for(r in e)"useRadians"!==r&&("function"==typeof(o=e[r])&&(o=o(n,t)),s=(h=(o+"").split("_"))[0],a=parseFloat("function"!=typeof t[r]?t[r]:t[r.indexOf("set")||"function"!=typeof t["get"+r.substr(3)]?r:"get"+r.substr(3)]()),l=(o=this.finals[r]="string"==typeof s&&"="===s.charAt(1)?a+parseInt(s.charAt(0)+"1",10)*Number(s.substr(2)):Number(s)||0)-a,h.length&&(-1!==(s=h.join("_")).indexOf("short")&&(l%=u)!==l%(u/2)&&(l=l<0?l+u:l-u),-1!==s.indexOf("_cw")&&l<0?l=(l+9999999999*u)%u-(l/u|0)*u:-1!==s.indexOf("ccw")&&l>0&&(l=(l-9999999999*u)%u-(l/u|0)*u)),(l>1e-6||l<-1e-6)&&(this._addTween(t,r,a,a+l,r),this._overwriteProps.push(r)));return!0},set:function(t){var e;if(1!==t)this._super.setRatio.call(this,t);else for(e=this._firstPT;e;)e.f?e.t[e.p](this.finals[e.p]):e.t[e.p]=this.finals[e.p],e=e._next}})._autoCSS=!0,_gsScope._gsDefine("easing.Back",["easing.Ease"],function(t){var e,i,n,r=_gsScope.GreenSockGlobals||_gsScope,s=r.com.greensock,a=2*Math.PI,o=Math.PI/2,l=s._class,h=function(e,i){var n=l("easing."+e,function(){},!0),r=n.prototype=new t;return r.constructor=n,r.getRatio=i,n},u=t.register||function(){},c=function(t,e,i,n,r){var s=l("easing."+t,{easeOut:new e,easeIn:new i,easeInOut:new n},!0);return u(s,t),s},d=function(t,e,i){this.t=t,this.v=e,i&&(this.next=i,i.prev=this,this.c=i.v-e,this.gap=i.t-t)},f=function(e,i){var n=l("easing."+e,function(t){this._p1=t||0===t?t:1.70158,this._p2=1.525*this._p1},!0),r=n.prototype=new t;return r.constructor=n,r.getRatio=i,r.config=function(t){return new n(t)},n},p=c("Back",f("BackOut",function(t){return(t-=1)*t*((this._p1+1)*t+this._p1)+1}),f("BackIn",function(t){return t*t*((this._p1+1)*t-this._p1)}),f("BackInOut",function(t){return(t*=2)<1?.5*t*t*((this._p2+1)*t-this._p2):.5*((t-=2)*t*((this._p2+1)*t+this._p2)+2)})),_=l("easing.SlowMo",function(t,e,i){e=e||0===e?e:.7,null==t?t=.7:t>1&&(t=1),this._p=1!==t?e:0,this._p1=(1-t)/2,this._p2=t,this._p3=this._p1+this._p2,this._calcEnd=!0===i},!0),m=_.prototype=new t;return m.constructor=_,m.getRatio=function(t){var e=t+(.5-t)*this._p;return t<this._p1?this._calcEnd?1-(t=1-t/this._p1)*t:e-(t=1-t/this._p1)*t*t*t*e:t>this._p3?this._calcEnd?1-(t=(t-this._p3)/this._p1)*t:e+(t-e)*(t=(t-this._p3)/this._p1)*t*t*t:this._calcEnd?1:e},_.ease=new _(.7,.7),m.config=_.config=function(t,e,i){return new _(t,e,i)},(m=(e=l("easing.SteppedEase",function(t){t=t||1,this._p1=1/t,this._p2=t+1},!0)).prototype=new t).constructor=e,m.getRatio=function(t){return t<0?t=0:t>=1&&(t=.999999999),(this._p2*t>>0)*this._p1},m.config=e.config=function(t){return new e(t)},(m=(i=l("easing.RoughEase",function(e){for(var i,n,r,s,a,o,l=(e=e||{}).taper||"none",h=[],u=0,c=0|(e.points||20),f=c,p=!1!==e.randomize,_=!0===e.clamp,m=e.template instanceof t?e.template:null,g="number"==typeof e.strength?.4*e.strength:.4;--f>-1;)i=p?Math.random():1/c*f,n=m?m.getRatio(i):i,r="none"===l?g:"out"===l?(s=1-i)*s*g:"in"===l?i*i*g:i<.5?(s=2*i)*s*.5*g:(s=2*(1-i))*s*.5*g,p?n+=Math.random()*r-.5*r:f%2?n+=.5*r:n-=.5*r,_&&(n>1?n=1:n<0&&(n=0)),h[u++]={x:i,y:n};for(h.sort(function(t,e){return t.x-e.x}),o=new d(1,1,null),f=c;--f>-1;)a=h[f],o=new d(a.x,a.y,o);this._prev=new d(0,0,0!==o.t?o:o.next)},!0)).prototype=new t).constructor=i,m.getRatio=function(t){var e=this._prev;if(t>e.t){for(;e.next&&t>=e.t;)e=e.next;e=e.prev}else for(;e.prev&&t<=e.t;)e=e.prev;return this._prev=e,e.v+(t-e.t)/e.gap*e.c},m.config=function(t){return new i(t)},i.ease=new i,c("Bounce",h("BounceOut",function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}),h("BounceIn",function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}),h("BounceInOut",function(t){var e=t<.5;return(t=e?1-2*t:2*t-1)<1/2.75?t*=7.5625*t:t=t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5})),c("Circ",h("CircOut",function(t){return Math.sqrt(1-(t-=1)*t)}),h("CircIn",function(t){return-(Math.sqrt(1-t*t)-1)}),h("CircInOut",function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)})),c("Elastic",(n=function(e,i,n){var r=l("easing."+e,function(t,e){this._p1=t>=1?t:1,this._p2=(e||n)/(t<1?t:1),this._p3=this._p2/a*(Math.asin(1/this._p1)||0),this._p2=a/this._p2},!0),s=r.prototype=new t;return s.constructor=r,s.getRatio=i,s.config=function(t,e){return new r(t,e)},r})("ElasticOut",function(t){return this._p1*Math.pow(2,-10*t)*Math.sin((t-this._p3)*this._p2)+1},.3),n("ElasticIn",function(t){return-this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2)},.3),n("ElasticInOut",function(t){return(t*=2)<1?this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2)*-.5:this._p1*Math.pow(2,-10*(t-=1))*Math.sin((t-this._p3)*this._p2)*.5+1},.45)),c("Expo",h("ExpoOut",function(t){return 1-Math.pow(2,-10*t)}),h("ExpoIn",function(t){return Math.pow(2,10*(t-1))-.001}),h("ExpoInOut",function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))})),c("Sine",h("SineOut",function(t){return Math.sin(t*o)}),h("SineIn",function(t){return 1-Math.cos(t*o)}),h("SineInOut",function(t){return-.5*(Math.cos(Math.PI*t)-1)})),l("easing.EaseLookup",{find:function(e){return t.map[e]}},!0),u(r.SlowMo,"SlowMo","ease,"),u(i,"RoughEase","ease,"),u(e,"SteppedEase","ease,"),p},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(t,e){"use strict";var i={},n=t.document,r=t.GreenSockGlobals=t.GreenSockGlobals||t;if(!r.TweenLite){var s,a,o,l,h,u,c,d=function(t){var e,i=t.split("."),n=r;for(e=0;e<i.length;e++)n[i[e]]=n=n[i[e]]||{};return n},f=d("com.greensock"),p=1e-10,_=function(t){var e,i=[],n=t.length;for(e=0;e!==n;i.push(t[e++]));return i},m=function(){},g=(u=Object.prototype.toString,c=u.call([]),function(t){return null!=t&&(t instanceof Array||"object"==typeof t&&!!t.push&&u.call(t)===c)}),v={},y=function(n,s,a,o){this.sc=v[n]?v[n].sc:[],v[n]=this,this.gsClass=null,this.func=a;var l=[];this.check=function(h){for(var u,c,f,p,_,m=s.length,g=m;--m>-1;)(u=v[s[m]]||new y(s[m],[])).gsClass?(l[m]=u.gsClass,g--):h&&u.sc.push(this);if(0===g&&a){if(f=(c=("com.greensock."+n).split(".")).pop(),p=d(c.join("."))[f]=this.gsClass=a.apply(a,l),o)if(r[f]=i[f]=p,!(_="undefined"!=typeof module&&module.exports)&&"function"==typeof define&&define.amd)define((t.GreenSockAMDPath?t.GreenSockAMDPath+"/":"")+n.split(".").pop(),[],function(){return p});else if(_)if(n===e)for(m in module.exports=i[e]=p,i)p[m]=i[m];else i[e]&&(i[e][f]=p);for(m=0;m<this.sc.length;m++)this.sc[m].check()}},this.check(!0)},b=t._gsDefine=function(t,e,i,n){return new y(t,e,i,n)},E=f._class=function(t,e,i){return e=e||function(){},b(t,[],function(){return e},i),e};b.globals=r;var T=[0,0,1,1],x=E("easing.Ease",function(t,e,i,n){this._func=t,this._type=i||0,this._power=n||0,this._params=e?T.concat(e):T},!0),w=x.map={},D=x.register=function(t,e,i,n){for(var r,s,a,o,l=e.split(","),h=l.length,u=(i||"easeIn,easeOut,easeInOut").split(",");--h>-1;)for(s=l[h],r=n?E("easing."+s,null,!0):f.easing[s]||{},a=u.length;--a>-1;)o=u[a],w[s+"."+o]=w[o+s]=r[o]=t.getRatio?t:t[o]||new t};for((o=x.prototype)._calcEnd=!1,o.getRatio=function(t){if(this._func)return this._params[0]=t,this._func.apply(null,this._params);var e=this._type,i=this._power,n=1===e?1-t:2===e?t:t<.5?2*t:2*(1-t);return 1===i?n*=n:2===i?n*=n*n:3===i?n*=n*n*n:4===i&&(n*=n*n*n*n),1===e?1-n:2===e?n:t<.5?n/2:1-n/2},a=(s=["Linear","Quad","Cubic","Quart","Quint,Strong"]).length;--a>-1;)o=s[a]+",Power"+a,D(new x(null,null,1,a),o,"easeOut",!0),D(new x(null,null,2,a),o,"easeIn"+(0===a?",easeNone":"")),D(new x(null,null,3,a),o,"easeInOut");w.linear=f.easing.Linear.easeIn,w.swing=f.easing.Quad.easeInOut;var S=E("events.EventDispatcher",function(t){this._listeners={},this._eventTarget=t||this});(o=S.prototype).addEventListener=function(t,e,i,n,r){r=r||0;var s,a,o=this._listeners[t],u=0;for(this!==l||h||l.wake(),null==o&&(this._listeners[t]=o=[]),a=o.length;--a>-1;)(s=o[a]).c===e&&s.s===i?o.splice(a,1):0===u&&s.pr<r&&(u=a+1);o.splice(u,0,{c:e,s:i,up:n,pr:r})},o.removeEventListener=function(t,e){var i,n=this._listeners[t];if(n)for(i=n.length;--i>-1;)if(n[i].c===e)return void n.splice(i,1)},o.dispatchEvent=function(t){var e,i,n,r=this._listeners[t];if(r)for((e=r.length)>1&&(r=r.slice(0)),i=this._eventTarget;--e>-1;)(n=r[e])&&(n.up?n.c.call(n.s||i,{type:t,target:i}):n.c.call(n.s||i))};var I=t.requestAnimationFrame,A=t.cancelAnimationFrame,P=Date.now||function(){return(new Date).getTime()},C=P();for(a=(s=["ms","moz","webkit","o"]).length;--a>-1&&!I;)I=t[s[a]+"RequestAnimationFrame"],A=t[s[a]+"CancelAnimationFrame"]||t[s[a]+"CancelRequestAnimationFrame"];E("Ticker",function(t,e){var i,r,s,a,o,u=this,c=P(),d=!(!1===e||!I)&&"auto",f=500,p=33,_=function(t){var e,n,l=P()-C;l>f&&(c+=l-p),C+=l,u.time=(C-c)/1e3,e=u.time-o,(!i||e>0||!0===t)&&(u.frame++,o+=e+(e>=a?.004:a-e),n=!0),!0!==t&&(s=r(_)),n&&u.dispatchEvent("tick")};S.call(u),u.time=u.frame=0,u.tick=function(){_(!0)},u.lagSmoothing=function(t,e){f=t||1e10,p=Math.min(e,f,0)},u.sleep=function(){null!=s&&(d&&A?A(s):clearTimeout(s),r=m,s=null,u===l&&(h=!1))},u.wake=function(t){null!==s?u.sleep():t?c+=-C+(C=P()):u.frame>10&&(C=P()-f+5),r=0===i?m:d&&I?I:function(t){return setTimeout(t,1e3*(o-u.time)+1|0)},u===l&&(h=!0),_(2)},u.fps=function(t){if(!arguments.length)return i;a=1/((i=t)||60),o=this.time+a,u.wake()},u.useRAF=function(t){if(!arguments.length)return d;u.sleep(),d=t,u.fps(i)},u.fps(t),setTimeout(function(){"auto"===d&&u.frame<5&&"hidden"!==n.visibilityState&&u.useRAF(!1)},1500)}),(o=f.Ticker.prototype=new f.events.EventDispatcher).constructor=f.Ticker;var M=E("core.Animation",function(t,e){if(this.vars=e=e||{},this._duration=this._totalDuration=t||0,this._delay=Number(e.delay)||0,this._timeScale=1,this._active=!0===e.immediateRender,this.data=e.data,this._reversed=!0===e.reversed,Z){h||l.wake();var i=this.vars.useFrames?q:Z;i.add(this,i._time),this.vars.paused&&this.paused(!0)}});l=M.ticker=new f.Ticker,(o=M.prototype)._dirty=o._gc=o._initted=o._paused=!1,o._totalTime=o._time=0,o._rawPrevTime=-1,o._next=o._last=o._onUpdate=o._timeline=o.timeline=null,o._paused=!1;var O=function(){h&&P()-C>2e3&&l.wake(),setTimeout(O,2e3)};O(),o.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},o.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},o.resume=function(t,e){return null!=t&&this.seek(t,e),this.paused(!1)},o.seek=function(t,e){return this.totalTime(Number(t),!1!==e)},o.restart=function(t,e){return this.reversed(!1).paused(!1).totalTime(t?-this._delay:0,!1!==e,!0)},o.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},o.render=function(t,e,i){},o.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,!this._gc&&this.timeline||this._enabled(!0),this},o.isActive=function(){var t,e=this._timeline,i=this._startTime;return!e||!this._gc&&!this._paused&&e.isActive()&&(t=e.rawTime(!0))>=i&&t<i+this.totalDuration()/this._timeScale},o._enabled=function(t,e){return h||l.wake(),this._gc=!t,this._active=this.isActive(),!0!==e&&(t&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!t&&this.timeline&&this._timeline._remove(this,!0)),!1},o._kill=function(t,e){return this._enabled(!1,!1)},o.kill=function(t,e){return this._kill(t,e),this},o._uncache=function(t){for(var e=t?this:this.timeline;e;)e._dirty=!0,e=e.timeline;return this},o._swapSelfInParams=function(t){for(var e=t.length,i=t.concat();--e>-1;)"{self}"===t[e]&&(i[e]=this);return i},o._callback=function(t){var e=this.vars,i=e[t],n=e[t+"Params"],r=e[t+"Scope"]||e.callbackScope||this;switch(n?n.length:0){case 0:i.call(r);break;case 1:i.call(r,n[0]);break;case 2:i.call(r,n[0],n[1]);break;default:i.apply(r,n)}},o.eventCallback=function(t,e,i,n){if("on"===(t||"").substr(0,2)){var r=this.vars;if(1===arguments.length)return r[t];null==e?delete r[t]:(r[t]=e,r[t+"Params"]=g(i)&&-1!==i.join("").indexOf("{self}")?this._swapSelfInParams(i):i,r[t+"Scope"]=n),"onUpdate"===t&&(this._onUpdate=e)}return this},o.delay=function(t){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+t-this._delay),this._delay=t,this):this._delay},o.duration=function(t){return arguments.length?(this._duration=this._totalDuration=t,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==t&&this.totalTime(this._totalTime*(t/this._duration),!0),this):(this._dirty=!1,this._duration)},o.totalDuration=function(t){return this._dirty=!1,arguments.length?this.duration(t):this._totalDuration},o.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(t>this._duration?this._duration:t,e)):this._time},o.totalTime=function(t,e,i){if(h||l.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(t<0&&!i&&(t+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var n=this._totalDuration,r=this._timeline;if(t>n&&!i&&(t=n),this._startTime=(this._paused?this._pauseTime:r._time)-(this._reversed?n-t:t)/this._timeScale,r._dirty||this._uncache(!1),r._timeline)for(;r._timeline;)r._timeline._time!==(r._startTime+r._totalTime)/r._timeScale&&r.totalTime(r._totalTime,!0),r=r._timeline}this._gc&&this._enabled(!0,!1),this._totalTime===t&&0!==this._duration||(H.length&&J(),this.render(t,e,!1),H.length&&J())}return this},o.progress=o.totalProgress=function(t,e){var i=this.duration();return arguments.length?this.totalTime(i*t,e):i?this._time/i:this.ratio},o.startTime=function(t){return arguments.length?(t!==this._startTime&&(this._startTime=t,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,t-this._delay)),this):this._startTime},o.endTime=function(t){return this._startTime+(0!=t?this.totalDuration():this.duration())/this._timeScale},o.timeScale=function(t){if(!arguments.length)return this._timeScale;if(t=t||p,this._timeline&&this._timeline.smoothChildTiming){var e=this._pauseTime,i=e||0===e?e:this._timeline.totalTime();this._startTime=i-(i-this._startTime)*this._timeScale/t}return this._timeScale=t,this._uncache(!1)},o.reversed=function(t){return arguments.length?(t!=this._reversed&&(this._reversed=t,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},o.paused=function(t){if(!arguments.length)return this._paused;var e,i,n=this._timeline;return t!=this._paused&&n&&(h||t||l.wake(),i=(e=n.rawTime())-this._pauseTime,!t&&n.smoothChildTiming&&(this._startTime+=i,this._uncache(!1)),this._pauseTime=t?e:null,this._paused=t,this._active=this.isActive(),!t&&0!==i&&this._initted&&this.duration()&&(e=n.smoothChildTiming?this._totalTime:(e-this._startTime)/this._timeScale,this.render(e,e===this._totalTime,!0))),this._gc&&!t&&this._enabled(!0,!1),this};var L=E("core.SimpleTimeline",function(t){M.call(this,0,t),this.autoRemoveChildren=this.smoothChildTiming=!0});(o=L.prototype=new M).constructor=L,o.kill()._gc=!1,o._first=o._last=o._recent=null,o._sortChildren=!1,o.add=o.insert=function(t,e,i,n){var r,s;if(t._startTime=Number(e||0)+t._delay,t._paused&&this!==t._timeline&&(t._pauseTime=t._startTime+(this.rawTime()-t._startTime)/t._timeScale),t.timeline&&t.timeline._remove(t,!0),t.timeline=t._timeline=this,t._gc&&t._enabled(!0,!0),r=this._last,this._sortChildren)for(s=t._startTime;r&&r._startTime>s;)r=r._prev;return r?(t._next=r._next,r._next=t):(t._next=this._first,this._first=t),t._next?t._next._prev=t:this._last=t,t._prev=r,this._recent=t,this._timeline&&this._uncache(!0),this},o._remove=function(t,e){return t.timeline===this&&(e||t._enabled(!1,!0),t._prev?t._prev._next=t._next:this._first===t&&(this._first=t._next),t._next?t._next._prev=t._prev:this._last===t&&(this._last=t._prev),t._next=t._prev=t.timeline=null,t===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},o.render=function(t,e,i){var n,r=this._first;for(this._totalTime=this._time=this._rawPrevTime=t;r;)n=r._next,(r._active||t>=r._startTime&&!r._paused)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=n},o.rawTime=function(){return h||l.wake(),this._totalTime};var R=E("TweenLite",function(e,i,n){if(M.call(this,i,n),this.render=R.prototype.render,null==e)throw"Cannot tween a null target.";this.target=e="string"!=typeof e?e:R.selector(e)||e;var r,s,a,o=e.jquery||e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType),l=this.vars.overwrite;if(this._overwrite=l=null==l?z[R.defaultOverwrite]:"number"==typeof l?l>>0:z[l],(o||e instanceof Array||e.push&&g(e))&&"number"!=typeof e[0])for(this._targets=a=_(e),this._propLookup=[],this._siblings=[],r=0;r<a.length;r++)(s=a[r])?"string"!=typeof s?s.length&&s!==t&&s[0]&&(s[0]===t||s[0].nodeType&&s[0].style&&!s.nodeType)?(a.splice(r--,1),this._targets=a=a.concat(_(s))):(this._siblings[r]=Q(s,this,!1),1===l&&this._siblings[r].length>1&&tt(s,this,null,1,this._siblings[r])):"string"==typeof(s=a[r--]=R.selector(s))&&a.splice(r+1,1):a.splice(r--,1);else this._propLookup={},this._siblings=Q(e,this,!1),1===l&&this._siblings.length>1&&tt(e,this,null,1,this._siblings);(this.vars.immediateRender||0===i&&0===this._delay&&!1!==this.vars.immediateRender)&&(this._time=-p,this.render(Math.min(0,-this._delay)))},!0),k=function(e){return e&&e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType)};(o=R.prototype=new M).constructor=R,o.kill()._gc=!1,o.ratio=0,o._firstPT=o._targets=o._overwrittenProps=o._startAt=null,o._notifyPluginsOfEnabled=o._lazy=!1,R.version="1.19.1",R.defaultEase=o._ease=new x(null,null,1,1),R.defaultOverwrite="auto",R.ticker=l,R.autoSleep=120,R.lagSmoothing=function(t,e){l.lagSmoothing(t,e)},R.selector=t.$||t.jQuery||function(e){var i=t.$||t.jQuery;return i?(R.selector=i,i(e)):void 0===n?e:n.querySelectorAll?n.querySelectorAll(e):n.getElementById("#"===e.charAt(0)?e.substr(1):e)};var H=[],F={},N=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,j=function(t){for(var e,i=this._firstPT;i;)e=i.blob?1===t?this.end:t?this.join(""):this.start:i.c*t+i.s,i.m?e=i.m(e,this._target||i.t):e<1e-6&&e>-1e-6&&!i.blob&&(e=0),i.f?i.fp?i.t[i.p](i.fp,e):i.t[i.p](e):i.t[i.p]=e,i=i._next},B=function(t,e,i,n){var r,s,a,o,l,h,u,c=[],d=0,f="",p=0;for(c.start=t,c.end=e,t=c[0]=t+"",e=c[1]=e+"",i&&(i(c),t=c[0],e=c[1]),c.length=0,r=t.match(N)||[],s=e.match(N)||[],n&&(n._next=null,n.blob=1,c._firstPT=c._applyPT=n),l=s.length,o=0;o<l;o++)u=s[o],f+=(h=e.substr(d,e.indexOf(u,d)-d))||!o?h:",",d+=h.length,p?p=(p+1)%5:"rgba("===h.substr(-5)&&(p=1),u===r[o]||r.length<=o?f+=u:(f&&(c.push(f),f=""),a=parseFloat(r[o]),c.push(a),c._firstPT={_next:c._firstPT,t:c,p:c.length-1,s:a,c:("="===u.charAt(1)?parseInt(u.charAt(0)+"1",10)*parseFloat(u.substr(2)):parseFloat(u)-a)||0,f:0,m:p&&p<4?Math.round:0}),d+=u.length;return(f+=e.substr(d))&&c.push(f),c.setRatio=j,c},U=function(t,e,i,n,r,s,a,o,l){"function"==typeof n&&(n=n(l||0,t));var h=typeof t[e],u="function"!==h?"":e.indexOf("set")||"function"!=typeof t["get"+e.substr(3)]?e:"get"+e.substr(3),c="get"!==i?i:u?a?t[u](a):t[u]():t[e],d="string"==typeof n&&"="===n.charAt(1),f={t:t,p:e,s:c,f:"function"===h,pg:0,n:r||e,m:s?"function"==typeof s?s:Math.round:0,pr:0,c:d?parseInt(n.charAt(0)+"1",10)*parseFloat(n.substr(2)):parseFloat(n)-c||0};if(("number"!=typeof c||"number"!=typeof n&&!d)&&(a||isNaN(c)||!d&&isNaN(n)||"boolean"==typeof c||"boolean"==typeof n?(f.fp=a,f={t:B(c,d?f.s+f.c:n,o||R.defaultStringFilter,f),p:"setRatio",s:0,c:1,f:2,pg:0,n:r||e,pr:0,m:0}):(f.s=parseFloat(c),d||(f.c=parseFloat(n)-f.s||0))),f.c)return(f._next=this._firstPT)&&(f._next._prev=f),this._firstPT=f,f},X=R._internals={isArray:g,isSelector:k,lazyTweens:H,blobDif:B},G=R._plugins={},V=X.tweenLookup={},W=0,Y=X.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1},z={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},q=M._rootFramesTimeline=new L,Z=M._rootTimeline=new L,K=30,J=X.lazyRender=function(){var t,e=H.length;for(F={};--e>-1;)(t=H[e])&&!1!==t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0),t._lazy=!1);H.length=0};Z._startTime=l.time,q._startTime=l.frame,Z._active=q._active=!0,setTimeout(J,1),M._updateRoot=R.render=function(){var t,e,i;if(H.length&&J(),Z.render((l.time-Z._startTime)*Z._timeScale,!1,!1),q.render((l.frame-q._startTime)*q._timeScale,!1,!1),H.length&&J(),l.frame>=K){for(i in K=l.frame+(parseInt(R.autoSleep,10)||120),V){for(t=(e=V[i].tweens).length;--t>-1;)e[t]._gc&&e.splice(t,1);0===e.length&&delete V[i]}if((!(i=Z._first)||i._paused)&&R.autoSleep&&!q._first&&1===l._listeners.tick.length){for(;i&&i._paused;)i=i._next;i||l.sleep()}}},l.addEventListener("tick",M._updateRoot);var Q=function(t,e,i){var n,r,s=t._gsTweenID;if(V[s||(t._gsTweenID=s="t"+W++)]||(V[s]={target:t,tweens:[]}),e&&((n=V[s].tweens)[r=n.length]=e,i))for(;--r>-1;)n[r]===e&&n.splice(r,1);return V[s].tweens},$=function(t,e,i,n){var r,s,a=t.vars.onOverwrite;return a&&(r=a(t,e,i,n)),(a=R.onOverwrite)&&(s=a(t,e,i,n)),!1!==r&&!1!==s},tt=function(t,e,i,n,r){var s,a,o,l;if(1===n||n>=4){for(l=r.length,s=0;s<l;s++)if((o=r[s])!==e)o._gc||o._kill(null,t,e)&&(a=!0);else if(5===n)break;return a}var h,u=e._startTime+p,c=[],d=0,f=0===e._duration;for(s=r.length;--s>-1;)(o=r[s])===e||o._gc||o._paused||(o._timeline!==e._timeline?(h=h||et(e,0,f),0===et(o,h,f)&&(c[d++]=o)):o._startTime<=u&&o._startTime+o.totalDuration()/o._timeScale>u&&((f||!o._initted)&&u-o._startTime<=2e-10||(c[d++]=o)));for(s=d;--s>-1;)if(o=c[s],2===n&&o._kill(i,t,e)&&(a=!0),2!==n||!o._firstPT&&o._initted){if(2!==n&&!$(o,e))continue;o._enabled(!1,!1)&&(a=!0)}return a},et=function(t,e,i){for(var n=t._timeline,r=n._timeScale,s=t._startTime;n._timeline;){if(s+=n._startTime,r*=n._timeScale,n._paused)return-100;n=n._timeline}return(s/=r)>e?s-e:i&&s===e||!t._initted&&s-e<2e-10?p:(s+=t.totalDuration()/t._timeScale/r)>e+p?0:s-e-p};o._init=function(){var t,e,i,n,r,s,a=this.vars,o=this._overwrittenProps,l=this._duration,h=!!a.immediateRender,u=a.ease;if(a.startAt){for(n in this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),r={},a.startAt)r[n]=a.startAt[n];if(r.overwrite=!1,r.immediateRender=!0,r.lazy=h&&!1!==a.lazy,r.startAt=r.delay=null,this._startAt=R.to(this.target,0,r),h)if(this._time>0)this._startAt=null;else if(0!==l)return}else if(a.runBackwards&&0!==l)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{for(n in 0!==this._time&&(h=!1),i={},a)Y[n]&&"autoCSS"!==n||(i[n]=a[n]);if(i.overwrite=0,i.data="isFromStart",i.lazy=h&&!1!==a.lazy,i.immediateRender=h,this._startAt=R.to(this.target,0,i),h){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=u=u?u instanceof x?u:"function"==typeof u?new x(u,a.easeParams):w[u]||R.defaultEase:R.defaultEase,a.easeParams instanceof Array&&u.config&&(this._ease=u.config.apply(u,a.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(s=this._targets.length,t=0;t<s;t++)this._initProps(this._targets[t],this._propLookup[t]={},this._siblings[t],o?o[t]:null,t)&&(e=!0);else e=this._initProps(this.target,this._propLookup,this._siblings,o,0);if(e&&R._onPluginEvent("_onInitAllProps",this),o&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),a.runBackwards)for(i=this._firstPT;i;)i.s+=i.c,i.c=-i.c,i=i._next;this._onUpdate=a.onUpdate,this._initted=!0},o._initProps=function(e,i,n,r,s){var a,o,l,h,u,c;if(null==e)return!1;for(a in F[e._gsTweenID]&&J(),this.vars.css||e.style&&e!==t&&e.nodeType&&G.css&&!1!==this.vars.autoCSS&&function(t,e){var i,n={};for(i in t)Y[i]||i in e&&"transform"!==i&&"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i&&"className"!==i&&"border"!==i||!(!G[i]||G[i]&&G[i]._autoCSS)||(n[i]=t[i],delete t[i]);t.css=n}(this.vars,e),this.vars)if(c=this.vars[a],Y[a])c&&(c instanceof Array||c.push&&g(c))&&-1!==c.join("").indexOf("{self}")&&(this.vars[a]=c=this._swapSelfInParams(c,this));else if(G[a]&&(h=new G[a])._onInitTween(e,this.vars[a],this,s)){for(this._firstPT=u={_next:this._firstPT,t:h,p:"setRatio",s:0,c:1,f:1,n:a,pg:1,pr:h._priority,m:0},o=h._overwriteProps.length;--o>-1;)i[h._overwriteProps[o]]=this._firstPT;(h._priority||h._onInitAllProps)&&(l=!0),(h._onDisable||h._onEnable)&&(this._notifyPluginsOfEnabled=!0),u._next&&(u._next._prev=u)}else i[a]=U.call(this,e,a,"get",c,a,0,null,this.vars.stringFilter,s);return r&&this._kill(r,e)?this._initProps(e,i,n,r,s):this._overwrite>1&&this._firstPT&&n.length>1&&tt(e,this,i,this._overwrite,n)?(this._kill(i,e),this._initProps(e,i,n,r,s)):(this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)&&(F[e._gsTweenID]=!0),l)},o.render=function(t,e,i){var n,r,s,a,o=this._time,l=this._duration,h=this._rawPrevTime;if(t>=l-1e-7&&t>=0)this._totalTime=this._time=l,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(n=!0,r="onComplete",i=i||this._timeline.autoRemoveChildren),0===l&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(h<0||t<=0&&t>=-1e-7||h===p&&"isPause"!==this.data)&&h!==t&&(i=!0,h>p&&(r="onReverseComplete")),this._rawPrevTime=a=!e||t||h===t?t:p);else if(t<1e-7)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==o||0===l&&h>0)&&(r="onReverseComplete",n=this._reversed),t<0&&(this._active=!1,0===l&&(this._initted||!this.vars.lazy||i)&&(h>=0&&(h!==p||"isPause"!==this.data)&&(i=!0),this._rawPrevTime=a=!e||t||h===t?t:p)),this._initted||(i=!0);else if(this._totalTime=this._time=t,this._easeType){var u=t/l,c=this._easeType,d=this._easePower;(1===c||3===c&&u>=.5)&&(u=1-u),3===c&&(u*=2),1===d?u*=u:2===d?u*=u*u:3===d?u*=u*u*u:4===d&&(u*=u*u*u*u),this.ratio=1===c?1-u:2===c?u:t/l<.5?u/2:1-u/2}else this.ratio=this._ease.getRatio(t/l);if(this._time!==o||i){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=o,this._rawPrevTime=h,H.push(this),void(this._lazy=[t,e]);this._time&&!n?this.ratio=this._ease.getRatio(this._time/l):n&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==o&&t>=0&&(this._active=!0),0===o&&(this._startAt&&(t>=0?this._startAt.render(t,e,i):r||(r="_dummyGS")),this.vars.onStart&&(0===this._time&&0!==l||e||this._callback("onStart"))),s=this._firstPT;s;)s.f?s.t[s.p](s.c*this.ratio+s.s):s.t[s.p]=s.c*this.ratio+s.s,s=s._next;this._onUpdate&&(t<0&&this._startAt&&-1e-4!==t&&this._startAt.render(t,e,i),e||(this._time!==o||n||i)&&this._callback("onUpdate")),r&&(this._gc&&!i||(t<0&&this._startAt&&!this._onUpdate&&-1e-4!==t&&this._startAt.render(t,e,i),n&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[r]&&this._callback(r),0===l&&this._rawPrevTime===p&&a!==p&&(this._rawPrevTime=0)))}},o._kill=function(t,e,i){if("all"===t&&(t=null),null==t&&(null==e||e===this.target))return this._lazy=!1,this._enabled(!1,!1);e="string"!=typeof e?e||this._targets||this.target:R.selector(e)||e;var n,r,s,a,o,l,h,u,c,d=i&&this._time&&i._startTime===this._startTime&&this._timeline===i._timeline;if((g(e)||k(e))&&"number"!=typeof e[0])for(n=e.length;--n>-1;)this._kill(t,e[n],i)&&(l=!0);else{if(this._targets){for(n=this._targets.length;--n>-1;)if(e===this._targets[n]){o=this._propLookup[n]||{},this._overwrittenProps=this._overwrittenProps||[],r=this._overwrittenProps[n]=t?this._overwrittenProps[n]||{}:"all";break}}else{if(e!==this.target)return!1;o=this._propLookup,r=this._overwrittenProps=t?this._overwrittenProps||{}:"all"}if(o){if(h=t||o,u=t!==r&&"all"!==r&&t!==o&&("object"!=typeof t||!t._tempKill),i&&(R.onOverwrite||this.vars.onOverwrite)){for(s in h)o[s]&&(c||(c=[]),c.push(s));if((c||!t)&&!$(this,i,e,c))return!1}for(s in h)(a=o[s])&&(d&&(a.f?a.t[a.p](a.s):a.t[a.p]=a.s,l=!0),a.pg&&a.t._kill(h)&&(l=!0),a.pg&&0!==a.t._overwriteProps.length||(a._prev?a._prev._next=a._next:a===this._firstPT&&(this._firstPT=a._next),a._next&&(a._next._prev=a._prev),a._next=a._prev=null),delete o[s]),u&&(r[s]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return l},o.invalidate=function(){return this._notifyPluginsOfEnabled&&R._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],M.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-p,this.render(Math.min(0,-this._delay))),this},o._enabled=function(t,e){if(h||l.wake(),t&&this._gc){var i,n=this._targets;if(n)for(i=n.length;--i>-1;)this._siblings[i]=Q(n[i],this,!0);else this._siblings=Q(this.target,this,!0)}return M.prototype._enabled.call(this,t,e),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&R._onPluginEvent(t?"_onEnable":"_onDisable",this)},R.to=function(t,e,i){return new R(t,e,i)},R.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new R(t,e,i)},R.fromTo=function(t,e,i,n){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,new R(t,e,n)},R.delayedCall=function(t,e,i,n,r){return new R(e,0,{delay:t,onComplete:e,onCompleteParams:i,callbackScope:n,onReverseComplete:e,onReverseCompleteParams:i,immediateRender:!1,lazy:!1,useFrames:r,overwrite:0})},R.set=function(t,e){return new R(t,0,e)},R.getTweensOf=function(t,e){if(null==t)return[];var i,n,r,s;if(t="string"!=typeof t?t:R.selector(t)||t,(g(t)||k(t))&&"number"!=typeof t[0]){for(i=t.length,n=[];--i>-1;)n=n.concat(R.getTweensOf(t[i],e));for(i=n.length;--i>-1;)for(s=n[i],r=i;--r>-1;)s===n[r]&&n.splice(i,1)}else for(i=(n=Q(t).concat()).length;--i>-1;)(n[i]._gc||e&&!n[i].isActive())&&n.splice(i,1);return n},R.killTweensOf=R.killDelayedCallsTo=function(t,e,i){"object"==typeof e&&(i=e,e=!1);for(var n=R.getTweensOf(t,e),r=n.length;--r>-1;)n[r]._kill(i,t)};var it=E("plugins.TweenPlugin",function(t,e){this._overwriteProps=(t||"").split(","),this._propName=this._overwriteProps[0],this._priority=e||0,this._super=it.prototype},!0);if(o=it.prototype,it.version="1.19.0",it.API=2,o._firstPT=null,o._addTween=U,o.setRatio=j,o._kill=function(t){var e,i=this._overwriteProps,n=this._firstPT;if(null!=t[this._propName])this._overwriteProps=[];else for(e=i.length;--e>-1;)null!=t[i[e]]&&i.splice(e,1);for(;n;)null!=t[n.n]&&(n._next&&(n._next._prev=n._prev),n._prev?(n._prev._next=n._next,n._prev=null):this._firstPT===n&&(this._firstPT=n._next)),n=n._next;return!1},o._mod=o._roundProps=function(t){for(var e,i=this._firstPT;i;)(e=t[this._propName]||null!=i.n&&t[i.n.split(this._propName+"_").join("")])&&"function"==typeof e&&(2===i.f?i.t._applyPT.m=e:i.m=e),i=i._next},R._onPluginEvent=function(t,e){var i,n,r,s,a,o=e._firstPT;if("_onInitAllProps"===t){for(;o;){for(a=o._next,n=r;n&&n.pr>o.pr;)n=n._next;(o._prev=n?n._prev:s)?o._prev._next=o:r=o,(o._next=n)?n._prev=o:s=o,o=a}o=e._firstPT=r}for(;o;)o.pg&&"function"==typeof o.t[t]&&o.t[t]()&&(i=!0),o=o._next;return i},it.activate=function(t){for(var e=t.length;--e>-1;)t[e].API===it.API&&(G[(new t[e])._propName]=t[e]);return!0},b.plugin=function(t){if(!(t&&t.propName&&t.init&&t.API))throw"illegal plugin definition.";var e,i=t.propName,n=t.priority||0,r=t.overwriteProps,s={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},a=E("plugins."+i.charAt(0).toUpperCase()+i.substr(1)+"Plugin",function(){it.call(this,i,n),this._overwriteProps=r||[]},!0===t.global),o=a.prototype=new it(i);for(e in o.constructor=a,a.API=t.API,s)"function"==typeof t[e]&&(o[s[e]]=t[e]);return a.version=t.version,it.activate([a]),a},s=t._gsQueue){for(a=0;a<s.length;a++)s[a]();for(o in v)v[o].func||t.console.log("GSAP encountered missing dependency: "+o)}h=!1}}("undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window,"TweenMax"),this.createjs=this.createjs||{},function(){"use strict";var t=createjs.PreloadJS=createjs.PreloadJS||{};t.version="0.6.2",t.buildDate="Thu, 26 Nov 2015 20:44:31 GMT"}(),this.createjs=this.createjs||{},createjs.extend=function(t,e){"use strict";function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i},this.createjs=this.createjs||{},createjs.promote=function(t,e){"use strict";var i=t.prototype,n=Object.getPrototypeOf&&Object.getPrototypeOf(i)||i.__proto__;if(n)for(var r in i[(e+="_")+"constructor"]=n.constructor,n)i.hasOwnProperty(r)&&"function"==typeof n[r]&&(i[e+r]=n[r]);return t},this.createjs=this.createjs||{},function(){"use strict";createjs.proxy=function(t,e){var i=Array.prototype.slice.call(arguments,2);return function(){return t.apply(e,Array.prototype.slice.call(arguments,0).concat(i))}}}(),this.createjs=this.createjs||{},createjs.indexOf=function(t,e){"use strict";for(var i=0,n=t.length;i<n;i++)if(e===t[i])return i;return-1},this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.type=t,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!e,this.cancelable=!!i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var e=t.prototype;e.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.remove=function(){this.removed=!0},e.clone=function(){return new t(this.type,this.bubbles,this.cancelable)},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.Event_constructor("error"),this.title=t,this.message=e,this.data=i}createjs.extend(t,createjs.Event).clone=function(){return new createjs.ErrorEvent(this.title,this.message,this.data)},createjs.ErrorEvent=createjs.promote(t,"Event")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this._listeners=null,this._captureListeners=null}var e=t.prototype;t.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger},e.addEventListener=function(t,e,i){var n,r=(n=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{})[t];return r&&this.removeEventListener(t,e,i),(r=n[t])?r.push(e):n[t]=[e],e},e.on=function(t,e,i,n,r,s){return e.handleEvent&&(i=i||e,e=e.handleEvent),i=i||this,this.addEventListener(t,function(t){e.call(i,t,r),n&&t.remove()},s)},e.removeEventListener=function(t,e,i){var n=i?this._captureListeners:this._listeners;if(n){var r=n[t];if(r)for(var s=0,a=r.length;s<a;s++)if(r[s]==e){1==a?delete n[t]:r.splice(s,1);break}}},e.off=e.removeEventListener,e.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},e.dispatchEvent=function(t,e,i){if("string"==typeof t){var n=this._listeners;if(!(e||n&&n[t]))return!0;t=new createjs.Event(t,e,i)}else t.target&&t.clone&&(t=t.clone());try{t.target=this}catch(t){}if(t.bubbles&&this.parent){for(var r=this,s=[r];r.parent;)s.push(r=r.parent);var a,o=s.length;for(a=o-1;a>=0&&!t.propagationStopped;a--)s[a]._dispatchEvent(t,1+(0==a));for(a=1;a<o&&!t.propagationStopped;a++)s[a]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return!t.defaultPrevented},e.hasEventListener=function(t){var e=this._listeners,i=this._captureListeners;return!!(e&&e[t]||i&&i[t])},e.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1},e.toString=function(){return"[EventDispatcher]"},e._dispatchEvent=function(t,e){var i,n=1==e?this._captureListeners:this._listeners;if(t&&n){var r=n[t.type];if(!r||!(i=r.length))return;try{t.currentTarget=this}catch(t){}try{t.eventPhase=e}catch(t){}t.removed=!1,r=r.slice();for(var s=0;s<i&&!t.immediatePropagationStopped;s++){var a=r[s];a.handleEvent?a.handleEvent(t):a(t),t.removed&&(this.off(t.type,a,1==e),t.removed=!1)}}},createjs.EventDispatcher=t}(),this.createjs=this.createjs||{},function(t){"use strict";function e(t,e){this.Event_constructor("progress"),this.loaded=t,this.total=null==e?1:e,this.progress=0==e?0:this.loaded/this.total}createjs.extend(e,createjs.Event).clone=function(){return new createjs.ProgressEvent(this.loaded,this.total)},createjs.ProgressEvent=createjs.promote(e,"Event")}(window),function(){var t="function"==typeof define&&define.amd,e={function:!0,object:!0},i=e[typeof exports]&&exports&&!exports.nodeType&&exports,n=e[typeof window]&&window||this,r=i&&e[typeof module]&&module&&!module.nodeType&&"object"==typeof global&&global;function s(t,i){t||(t=n.Object()),i||(i=n.Object());var r=t.Number||n.Number,a=t.String||n.String,o=t.Object||n.Object,l=t.Date||n.Date,h=t.SyntaxError||n.SyntaxError,u=t.TypeError||n.TypeError,c=t.Math||n.Math,d=t.JSON||n.JSON;"object"==typeof d&&d&&(i.stringify=d.stringify,i.parse=d.parse);var f,p,_,m=o.prototype,g=m.toString,v=new l(-0xc782b5b800cec);try{v=-109252==v.getUTCFullYear()&&0===v.getUTCMonth()&&1===v.getUTCDate()&&10==v.getUTCHours()&&37==v.getUTCMinutes()&&6==v.getUTCSeconds()&&708==v.getUTCMilliseconds()}catch(t){}function y(t){if(y[t]!==_)return y[t];var e;if("bug-string-char-index"==t)e="a"!="a"[0];else if("json"==t)e=y("json-stringify")&&y("json-parse");else{var n,s='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==t){var o=i.stringify,h="function"==typeof o&&v;if(h){(n=function(){return 1}).toJSON=n;try{h="0"===o(0)&&"0"===o(new r)&&'""'==o(new a)&&o(g)===_&&o(_)===_&&o()===_&&"1"===o(n)&&"[1]"==o([n])&&"[null]"==o([_])&&"null"==o(null)&&"[null,null,null]"==o([_,g,null])&&o({a:[n,!0,!1,null,"\0\b\n\f\r\t"]})==s&&"1"===o(null,n)&&"[\n 1,\n 2\n]"==o([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==o(new l(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==o(new l(864e13))&&'"-000001-01-01T00:00:00.000Z"'==o(new l(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==o(new l(-1))}catch(t){h=!1}}e=h}if("json-parse"==t){var u=i.parse;if("function"==typeof u)try{if(0===u("0")&&!u(!1)){var c=5==(n=u(s)).a.length&&1===n.a[0];if(c){try{c=!u('"\t"')}catch(t){}if(c)try{c=1!==u("01")}catch(t){}if(c)try{c=1!==u("1.")}catch(t){}}}}catch(t){c=!1}e=c}}return y[t]=!!e}if(!y("json")){var b="[object Function]",E="[object Number]",T="[object String]",x="[object Array]",w=y("bug-string-char-index");if(!v)var D=c.floor,S=[0,31,59,90,120,151,181,212,243,273,304,334],I=function(t,e){return S[e]+365*(t-1970)+D((t-1969+(e=+(e>1)))/4)-D((t-1901+e)/100)+D((t-1601+e)/400)};if((f=m.hasOwnProperty)||(f=function(t){var e,i={};return(i.__proto__=null,i.__proto__={toString:1},i).toString!=g?f=function(t){var e=this.__proto__,i=t in(this.__proto__=null,this);return this.__proto__=e,i}:(e=i.constructor,f=function(t){var i=(this.constructor||e).prototype;return t in this&&!(t in i&&this[t]===i[t])}),i=null,f.call(this,t)}),p=function(t,i){var n,r,s,a=0;for(s in(n=function(){this.valueOf=0}).prototype.valueOf=0,r=new n)f.call(r,s)&&a++;return n=r=null,a?p=2==a?function(t,e){var i,n={},r=g.call(t)==b;for(i in t)r&&"prototype"==i||f.call(n,i)||!(n[i]=1)||!f.call(t,i)||e(i)}:function(t,e){var i,n,r=g.call(t)==b;for(i in t)r&&"prototype"==i||!f.call(t,i)||(n="constructor"===i)||e(i);(n||f.call(t,i="constructor"))&&e(i)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],p=function(t,i){var n,s,a=g.call(t)==b,o=!a&&"function"!=typeof t.constructor&&e[typeof t.hasOwnProperty]&&t.hasOwnProperty||f;for(n in t)a&&"prototype"==n||!o.call(t,n)||i(n);for(s=r.length;n=r[--s];o.call(t,n)&&i(n));}),p(t,i)},!y("json-stringify")){var A={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},P=function(t,e){return("000000"+(e||0)).slice(-t)},C=function(t){for(var e='"',i=0,n=t.length,r=!w||n>10,s=r&&(w?t.split(""):t);i<n;i++){var a=t.charCodeAt(i);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:e+=A[a];break;default:if(a<32){e+="\\u00"+P(2,a.toString(16));break}e+=r?s[i]:t.charAt(i)}}return e+'"'},M=function(t,e,i,n,r,s,a){var o,l,h,c,d,m,v,y,b,w,S,A,O,L,R,k;try{o=e[t]}catch(t){}if("object"==typeof o&&o)if("[object Date]"!=(l=g.call(o))||f.call(o,"toJSON"))"function"==typeof o.toJSON&&(l!=E&&l!=T&&l!=x||f.call(o,"toJSON"))&&(o=o.toJSON(t));else if(o>-1/0&&o<1/0){if(I){for(d=D(o/864e5),h=D(d/365.2425)+1970-1;I(h+1,0)<=d;h++);for(c=D((d-I(h,0))/30.42);I(h,c+1)<=d;c++);d=1+d-I(h,c),v=D((m=(o%864e5+864e5)%864e5)/36e5)%24,y=D(m/6e4)%60,b=D(m/1e3)%60,w=m%1e3}else h=o.getUTCFullYear(),c=o.getUTCMonth(),d=o.getUTCDate(),v=o.getUTCHours(),y=o.getUTCMinutes(),b=o.getUTCSeconds(),w=o.getUTCMilliseconds();o=(h<=0||h>=1e4?(h<0?"-":"+")+P(6,h<0?-h:h):P(4,h))+"-"+P(2,c+1)+"-"+P(2,d)+"T"+P(2,v)+":"+P(2,y)+":"+P(2,b)+"."+P(3,w)+"Z"}else o=null;if(i&&(o=i.call(e,t,o)),null===o)return"null";if("[object Boolean]"==(l=g.call(o)))return""+o;if(l==E)return o>-1/0&&o<1/0?""+o:"null";if(l==T)return C(""+o);if("object"==typeof o){for(L=a.length;L--;)if(a[L]===o)throw u();if(a.push(o),S=[],R=s,s+=r,l==x){for(O=0,L=o.length;O<L;O++)A=M(O,o,i,n,r,s,a),S.push(A===_?"null":A);k=S.length?r?"[\n"+s+S.join(",\n"+s)+"\n"+R+"]":"["+S.join(",")+"]":"[]"}else p(n||o,function(t){var e=M(t,o,i,n,r,s,a);e!==_&&S.push(C(t)+":"+(r?" ":"")+e)}),k=S.length?r?"{\n"+s+S.join(",\n"+s)+"\n"+R+"}":"{"+S.join(",")+"}":"{}";return a.pop(),k}};i.stringify=function(t,i,n){var r,s,a,o;if(e[typeof i]&&i)if((o=g.call(i))==b)s=i;else if(o==x){a={};for(var l,h=0,u=i.length;h<u;l=i[h++],((o=g.call(l))==T||o==E)&&(a[l]=1));}if(n)if((o=g.call(n))==E){if((n-=n%1)>0)for(r="",n>10&&(n=10);r.length<n;r+=" ");}else o==T&&(r=n.length<=10?n:n.slice(0,10));return M("",((l={})[""]=t,l),s,a,r,"",[])}}if(!y("json-parse")){var O,L,R=a.fromCharCode,k={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},H=function(){throw O=L=null,h()},F=function(){for(var t,e,i,n,r,s=L,a=s.length;O<a;)switch(r=s.charCodeAt(O)){case 9:case 10:case 13:case 32:O++;break;case 123:case 125:case 91:case 93:case 58:case 44:return t=w?s.charAt(O):s[O],O++,t;case 34:for(t="@",O++;O<a;)if((r=s.charCodeAt(O))<32)H();else if(92==r)switch(r=s.charCodeAt(++O)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:t+=k[r],O++;break;case 117:for(e=++O,i=O+4;O<i;O++)(r=s.charCodeAt(O))>=48&&r<=57||r>=97&&r<=102||r>=65&&r<=70||H();t+=R("0x"+s.slice(e,O));break;default:H()}else{if(34==r)break;for(r=s.charCodeAt(O),e=O;r>=32&&92!=r&&34!=r;)r=s.charCodeAt(++O);t+=s.slice(e,O)}if(34==s.charCodeAt(O))return O++,t;H();default:if(e=O,45==r&&(n=!0,r=s.charCodeAt(++O)),r>=48&&r<=57){for(48==r&&((r=s.charCodeAt(O+1))>=48&&r<=57)&&H(),n=!1;O<a&&((r=s.charCodeAt(O))>=48&&r<=57);O++);if(46==s.charCodeAt(O)){for(i=++O;i<a&&((r=s.charCodeAt(i))>=48&&r<=57);i++);i==O&&H(),O=i}if(101==(r=s.charCodeAt(O))||69==r){for(43!=(r=s.charCodeAt(++O))&&45!=r||O++,i=O;i<a&&((r=s.charCodeAt(i))>=48&&r<=57);i++);i==O&&H(),O=i}return+s.slice(e,O)}if(n&&H(),"true"==s.slice(O,O+4))return O+=4,!0;if("false"==s.slice(O,O+5))return O+=5,!1;if("null"==s.slice(O,O+4))return O+=4,null;H()}return"$"},N=function(t){var e,i;if("$"==t&&H(),"string"==typeof t){if("@"==(w?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(e=[];"]"!=(t=F());i||(i=!0))i&&(","==t?"]"==(t=F())&&H():H()),","==t&&H(),e.push(N(t));return e}if("{"==t){for(e={};"}"!=(t=F());i||(i=!0))i&&(","==t?"}"==(t=F())&&H():H()),","!=t&&"string"==typeof t&&"@"==(w?t.charAt(0):t[0])&&":"==F()||H(),e[t.slice(1)]=N(F());return e}H()}return t},j=function(t,e,i){var n=B(t,e,i);n===_?delete t[e]:t[e]=n},B=function(t,e,i){var n,r=t[e];if("object"==typeof r&&r)if(g.call(r)==x)for(n=r.length;n--;)j(r,n,i);else p(r,function(t){j(r,t,i)});return i.call(t,e,r)};i.parse=function(t,e){var i,n;return O=0,L=""+t,i=N(F()),"$"!=F()&&H(),O=L=null,e&&g.call(e)==b?B(((n={})[""]=i,n),"",e):i}}}return i.runInContext=s,i}if(!r||r.global!==r&&r.window!==r&&r.self!==r||(n=r),i&&!t)s(n,i);else{var a=n.JSON,o=n.JSON3,l=!1,h=s(n,n.JSON3={noConflict:function(){return l||(l=!0,n.JSON=a,n.JSON3=o,a=o=null),h}});n.JSON={parse:h.parse,stringify:h.stringify}}t&&define(function(){return h})}.call(this),function(){var t={appendToHead:function(e){t.getHead().appendChild(e)},getHead:function(){return document.head||document.getElementsByTagName("head")[0]},getBody:function(){return document.body||document.getElementsByTagName("body")[0]}};createjs.DomUtils=t}(),function(){var t={parseXML:function(t,e){var i=null;try{if(window.DOMParser){var n=new DOMParser;i=n.parseFromString(t,e)}}catch(t){}if(!i)try{(i=new ActiveXObject("Microsoft.XMLDOM")).async=!1,i.loadXML(t)}catch(t){i=null}return i},parseJSON:function(t){if(null==t)return null;try{return JSON.parse(t)}catch(t){throw t}}};createjs.DataUtils=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this.src=null,this.type=null,this.id=null,this.maintainOrder=!1,this.callback=null,this.data=null,this.method=createjs.LoadItem.GET,this.values=null,this.headers=null,this.withCredentials=!1,this.mimeType=null,this.crossOrigin=null,this.loadTimeout=i.LOAD_TIMEOUT_DEFAULT}var e=t.prototype={},i=t;i.LOAD_TIMEOUT_DEFAULT=8e3,i.create=function(e){if("string"==typeof e){var n=new t;return n.src=e,n}if(e instanceof i)return e;if(e instanceof Object&&e.src)return null==e.loadTimeout&&(e.loadTimeout=i.LOAD_TIMEOUT_DEFAULT),e;throw new Error("Type not recognized.")},e.set=function(t){for(var e in t)this[e]=t[e];return this},createjs.LoadItem=i}(),function(){var t={ABSOLUTE_PATT:/^(?:\w+:)?\/{2}/i,RELATIVE_PATT:/^[./]*?\//i,EXTENSION_PATT:/\/?[^/]+\.(\w{1,5})$/i,parseURI:function(e){var i={absolute:!1,relative:!1};if(null==e)return i;var n,r=e.indexOf("?");return r>-1&&(e=e.substr(0,r)),t.ABSOLUTE_PATT.test(e)?i.absolute=!0:t.RELATIVE_PATT.test(e)&&(i.relative=!0),(n=e.match(t.EXTENSION_PATT))&&(i.extension=n[1].toLowerCase()),i},formatQueryString:function(t,e){if(null==t)throw new Error("You must specify data.");var i=[];for(var n in t)i.push(n+"="+escape(t[n]));return e&&(i=i.concat(e)),i.join("&")},buildPath:function(t,e){if(null==e)return t;var i=[],n=t.indexOf("?");if(-1!=n){var r=t.slice(n+1);i=i.concat(r.split("&"))}return-1!=n?t.slice(0,n)+"?"+this.formatQueryString(e,i):t+"?"+this.formatQueryString(e,i)},isCrossDomain:function(t){var e=document.createElement("a");e.href=t.src;var i=document.createElement("a");return i.href=location.href,""!=e.hostname&&(e.port!=i.port||e.protocol!=i.protocol||e.hostname!=i.hostname)},isLocal:function(t){var e=document.createElement("a");return e.href=t.src,""==e.hostname&&"file:"==e.protocol},isBinary:function(t){switch(t){case createjs.AbstractLoader.IMAGE:case createjs.AbstractLoader.BINARY:return!0;default:return!1}},isImageTag:function(t){return t instanceof HTMLImageElement},isAudioTag:function(t){return!!window.HTMLAudioElement&&t instanceof HTMLAudioElement},isVideoTag:function(t){return!!window.HTMLVideoElement&&t instanceof HTMLVideoElement},isText:function(t){switch(t){case createjs.AbstractLoader.TEXT:case createjs.AbstractLoader.JSON:case createjs.AbstractLoader.MANIFEST:case createjs.AbstractLoader.XML:case createjs.AbstractLoader.CSS:case createjs.AbstractLoader.SVG:case createjs.AbstractLoader.JAVASCRIPT:case createjs.AbstractLoader.SPRITESHEET:return!0;default:return!1}},getTypeByExtension:function(t){if(null==t)return createjs.AbstractLoader.TEXT;switch(t.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.AbstractLoader.IMAGE;case"ogg":case"mp3":case"webm":return createjs.AbstractLoader.SOUND;case"mp4":case"webm":case"ts":return createjs.AbstractLoader.VIDEO;case"json":return createjs.AbstractLoader.JSON;case"xml":return createjs.AbstractLoader.XML;case"css":return createjs.AbstractLoader.CSS;case"js":return createjs.AbstractLoader.JAVASCRIPT;case"svg":return createjs.AbstractLoader.SVG;default:return createjs.AbstractLoader.TEXT}}};createjs.RequestUtils=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.EventDispatcher_constructor(),this.loaded=!1,this.canceled=!1,this.progress=0,this.type=i,this.resultFormatter=null,this._item=t?createjs.LoadItem.create(t):null,this._preferXHR=e,this._result=null,this._rawResult=null,this._loadedItems=null,this._tagSrcAttribute=null,this._tag=null}var e=createjs.extend(t,createjs.EventDispatcher),i=t;i.POST="POST",i.GET="GET",i.BINARY="binary",i.CSS="css",i.IMAGE="image",i.JAVASCRIPT="javascript",i.JSON="json",i.JSONP="jsonp",i.MANIFEST="manifest",i.SOUND="sound",i.VIDEO="video",i.SPRITESHEET="spritesheet",i.SVG="svg",i.TEXT="text",i.XML="xml",e.getItem=function(){return this._item},e.getResult=function(t){return t?this._rawResult:this._result},e.getTag=function(){return this._tag},e.setTag=function(t){this._tag=t},e.load=function(){this._createRequest(),this._request.on("complete",this,this),this._request.on("progress",this,this),this._request.on("loadStart",this,this),this._request.on("abort",this,this),this._request.on("timeout",this,this),this._request.on("error",this,this);var t=new createjs.Event("initialize");t.loader=this._request,this.dispatchEvent(t),this._request.load()},e.cancel=function(){this.canceled=!0,this.destroy()},e.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy()),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},e.getLoadedItems=function(){return this._loadedItems},e._createRequest=function(){this._preferXHR?this._request=new createjs.XHRRequest(this._item):this._request=new createjs.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._createTag=function(t){return null},e._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},e._sendProgress=function(t){if(!this._isCanceled()){var e=null;"number"==typeof t?(this.progress=t,e=new createjs.ProgressEvent(this.progress)):(e=t,this.progress=t.loaded/t.total,e.progress=this.progress,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0)),this.hasEventListener("progress")&&this.dispatchEvent(e)}},e._sendComplete=function(){if(!this._isCanceled()){this.loaded=!0;var t=new createjs.Event("complete");t.rawResult=this._rawResult,null!=this._result&&(t.result=this._result),this.dispatchEvent(t)}},e._sendError=function(t){!this._isCanceled()&&this.hasEventListener("error")&&(null==t&&(t=new createjs.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(t))},e._isCanceled=function(){return!(null!=window.createjs&&!this.canceled)},e.resultFormatter=null,e.handleEvent=function(t){switch(t.type){case"complete":this._rawResult=t.target._response;var e=this.resultFormatter&&this.resultFormatter(this);e instanceof Function?e.call(this,createjs.proxy(this._resultFormatSuccess,this),createjs.proxy(this._resultFormatFailed,this)):(this._result=e||this._rawResult,this._sendComplete());break;case"progress":this._sendProgress(t);break;case"error":this._sendError(t);break;case"loadstart":this._sendLoadStart();break;case"abort":case"timeout":this._isCanceled()||this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_"+t.type.toUpperCase()+"_ERROR"))}},e._resultFormatSuccess=function(t){this._result=t,this._sendComplete()},e._resultFormatFailed=function(t){this._sendError(t)},e.buildPath=function(t,e){return createjs.RequestUtils.buildPath(t,e)},e.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.AbstractLoader_constructor(t,e,i),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.on("initialize",this._updateXHR,this)}var e=createjs.extend(t,createjs.AbstractLoader);e.load=function(){this._tag||(this._tag=this._createTag(this._item.src)),this._tag.preload="auto",this._tag.load(),this.AbstractLoader_load()},e._createTag=function(){},e._createRequest=function(){this._preferXHR?this._request=new createjs.XHRRequest(this._item):this._request=new createjs.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._updateXHR=function(t){t.loader.setResponseType&&t.loader.setResponseType("blob")},e._formatResult=function(t){if(this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR){var e=window.URL||window.webkitURL,i=t.getResult(!0);t.getTag().src=e.createObjectURL(i)}return t.getTag()},createjs.AbstractMediaLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t){this._item=t},e=createjs.extend(t,createjs.EventDispatcher);e.load=function(){},e.destroy=function(){},e.cancel=function(){},createjs.AbstractRequest=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this),this._addedToDOM=!1,this._startTagVisibility=null}var e=createjs.extend(t,createjs.AbstractRequest);e.load=function(){this._tag.onload=createjs.proxy(this._handleTagComplete,this),this._tag.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this),this._tag.onerror=createjs.proxy(this._handleError,this);var t=new createjs.Event("initialize");t.loader=this._tag,this.dispatchEvent(t),this._hideTag(),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag[this._tagSrcAttribute]=this._item.src,null==this._tag.parentNode&&(window.document.body.appendChild(this._tag),this._addedToDOM=!0)},e.destroy=function(){this._clean(),this._tag=null,this.AbstractRequest_destroy()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;"loaded"!=t.readyState&&"complete"!=t.readyState||this._handleTagComplete()},e._handleError=function(){this._clean(),this.dispatchEvent("error")},e._handleTagComplete=function(){this._rawResult=this._tag,this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult,this._clean(),this._showTag(),this.dispatchEvent("complete")},e._handleTimeout=function(){this._clean(),this.dispatchEvent(new createjs.Event("timeout"))},e._clean=function(){this._tag.onload=null,this._tag.onreadystatechange=null,this._tag.onerror=null,this._addedToDOM&&null!=this._tag.parentNode&&this._tag.parentNode.removeChild(this._tag),clearTimeout(this._loadTimeout)},e._hideTag=function(){this._startTagVisibility=this._tag.style.visibility,this._tag.style.visibility="hidden"},e._showTag=function(){this._tag.style.visibility=this._startTagVisibility},e._handleStalled=function(){},createjs.TagRequest=createjs.promote(t,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this)}var e=createjs.extend(t,createjs.TagRequest);e.load=function(){var t=createjs.proxy(this._handleStalled,this);this._stalledCallback=t;var e=createjs.proxy(this._handleProgress,this);this._handleProgress=e,this._tag.addEventListener("stalled",t),this._tag.addEventListener("progress",e),this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1),this.TagRequest_load()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;"loaded"!=t.readyState&&"complete"!=t.readyState||this._handleTagComplete()},e._handleStalled=function(){},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(e)}},e._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.removeEventListener("stalled",this._stalledCallback),this._tag.removeEventListener("progress",this._progressCallback),this.TagRequest__clean()},createjs.MediaTagRequest=createjs.promote(t,"TagRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractRequest_constructor(t),this._request=null,this._loadTimeout=null,this._xhrLevel=1,this._response=null,this._rawResponse=null,this._canceled=!1,this._handleLoadStartProxy=createjs.proxy(this._handleLoadStart,this),this._handleProgressProxy=createjs.proxy(this._handleProgress,this),this._handleAbortProxy=createjs.proxy(this._handleAbort,this),this._handleErrorProxy=createjs.proxy(this._handleError,this),this._handleTimeoutProxy=createjs.proxy(this._handleTimeout,this),this._handleLoadProxy=createjs.proxy(this._handleLoad,this),this._handleReadyStateChangeProxy=createjs.proxy(this._handleReadyStateChange,this),this._createXHR(t)}var e=createjs.extend(t,createjs.AbstractRequest);t.ACTIVEX_VERSIONS=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],e.getResult=function(t){return t&&this._rawResponse?this._rawResponse:this._response},e.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},e.load=function(){if(null!=this._request){null!=this._request.addEventListener?(this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1)):(this._request.onloadstart=this._handleLoadStartProxy,this._request.onprogress=this._handleProgressProxy,this._request.onabort=this._handleAbortProxy,this._request.onerror=this._handleErrorProxy,this._request.ontimeout=this._handleTimeoutProxy,this._request.onload=this._handleLoadProxy,this._request.onreadystatechange=this._handleReadyStateChangeProxy),1==this._xhrLevel&&(this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout));try{this._item.values&&this._item.method!=createjs.AbstractLoader.GET?this._item.method==createjs.AbstractLoader.POST&&this._request.send(createjs.RequestUtils.formatQueryString(this._item.values)):this._request.send()}catch(t){this.dispatchEvent(new createjs.ErrorEvent("XHR_SEND",null,t))}}else this._handleError()},e.setResponseType=function(t){"blob"===t&&(t=window.URL?"blob":"arraybuffer",this._responseType=t),this._request.responseType=t},e.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},e.getResponseHeader=function(t){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(t):null},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(e)}},e._handleLoadStart=function(t){clearTimeout(this._loadTimeout),this.dispatchEvent("loadstart")},e._handleAbort=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("XHR_ABORTED",null,t))},e._handleError=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent(t.message))},e._handleReadyStateChange=function(t){4==this._request.readyState&&this._handleLoad()},e._handleLoad=function(t){if(!this.loaded){this.loaded=!0;var e=this._checkError();if(e)this._handleError(e);else{if(this._response=this._getResponse(),"arraybuffer"===this._responseType)try{this._response=new Blob([this._response])}catch(t){if(window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,"TypeError"===t.name&&window.BlobBuilder){var i=new BlobBuilder;i.append(this._response),this._response=i.getBlob()}}this._clean(),this.dispatchEvent(new createjs.Event("complete"))}}},e._handleTimeout=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT",null,t))},e._checkError=function(){var t=parseInt(this._request.status);switch(t){case 404:case 0:return new Error(t)}return null},e._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(t){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(t){}return null},e._createXHR=function(t){var e=createjs.RequestUtils.isCrossDomain(t),i={},n=null;if(window.XMLHttpRequest)n=new XMLHttpRequest,e&&void 0===n.withCredentials&&window.XDomainRequest&&(n=new XDomainRequest);else{for(var r=0,a=s.ACTIVEX_VERSIONS.length;r<a;r++){var o=s.ACTIVEX_VERSIONS[r];try{n=new ActiveXObject(o);break}catch(t){}}if(null==n)return!1}null==t.mimeType&&createjs.RequestUtils.isText(t.type)&&(t.mimeType="text/plain; charset=utf-8"),t.mimeType&&n.overrideMimeType&&n.overrideMimeType(t.mimeType),this._xhrLevel="string"==typeof n.responseType?2:1;var l=null;if(l=t.method==createjs.AbstractLoader.GET?createjs.RequestUtils.buildPath(t.src,t.values):t.src,n.open(t.method||createjs.AbstractLoader.GET,l,!0),e&&n instanceof XMLHttpRequest&&1==this._xhrLevel&&(i.Origin=location.origin),t.values&&t.method==createjs.AbstractLoader.POST&&(i["Content-Type"]="application/x-www-form-urlencoded"),e||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),t.headers)for(var h in t.headers)i[h]=t.headers[h];for(h in i)n.setRequestHeader(h,i[h]);return n instanceof XMLHttpRequest&&void 0!==t.withCredentials&&(n.withCredentials=t.withCredentials),this._request=n,!0},e._clean=function(){clearTimeout(this._loadTimeout),null!=this._request.removeEventListener?(this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)):(this._request.onloadstart=null,this._request.onprogress=null,this._request.onabort=null,this._request.onerror=null,this._request.ontimeout=null,this._request.onload=null,this._request.onreadystatechange=null)},e.toString=function(){return"[PreloadJS XHRRequest]"},createjs.XHRRequest=createjs.promote(t,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.AbstractLoader_constructor(),this._plugins=[],this._typeCallbacks={},this._extensionCallbacks={},this.next=null,this.maintainScriptOrder=!0,this.stopOnError=!1,this._maxConnections=1,this._availableLoaders=[createjs.ImageLoader,createjs.JavaScriptLoader,createjs.CSSLoader,createjs.JSONLoader,createjs.JSONPLoader,createjs.SoundLoader,createjs.ManifestLoader,createjs.SpriteSheetLoader,createjs.XMLLoader,createjs.SVGLoader,createjs.BinaryLoader,createjs.VideoLoader,createjs.TextLoader],this._defaultLoaderLength=this._availableLoaders.length,this.init(t,e,i)}var e=createjs.extend(t,createjs.AbstractLoader),i=t;e.init=function(t,e,i){this.useXHR=!0,this.preferXHR=!0,this._preferXHR=!0,this.setPreferXHR(t),this._paused=!1,this._basePath=e,this._crossOrigin=i,this._loadStartWasDispatched=!1,this._currentlyLoadingScript=null,this._currentLoads=[],this._loadQueue=[],this._loadQueueBackup=[],this._loadItemsById={},this._loadItemsBySrc={},this._loadedResults={},this._loadedRawResults={},this._numItems=0,this._numItemsLoaded=0,this._scriptOrder=[],this._loadedScripts=[],this._lastProgress=NaN},i.loadTimeout=8e3,i.LOAD_TIMEOUT=0,i.BINARY=createjs.AbstractLoader.BINARY,i.CSS=createjs.AbstractLoader.CSS,i.IMAGE=createjs.AbstractLoader.IMAGE,i.JAVASCRIPT=createjs.AbstractLoader.JAVASCRIPT,i.JSON=createjs.AbstractLoader.JSON,i.JSONP=createjs.AbstractLoader.JSONP,i.MANIFEST=createjs.AbstractLoader.MANIFEST,i.SOUND=createjs.AbstractLoader.SOUND,i.VIDEO=createjs.AbstractLoader.VIDEO,i.SVG=createjs.AbstractLoader.SVG,i.TEXT=createjs.AbstractLoader.TEXT,i.XML=createjs.AbstractLoader.XML,i.POST=createjs.AbstractLoader.POST,i.GET=createjs.AbstractLoader.GET,e.registerLoader=function(t){if(!t||!t.canLoadItem)throw new Error("loader is of an incorrect type.");if(-1!=this._availableLoaders.indexOf(t))throw new Error("loader already exists.");this._availableLoaders.unshift(t)},e.unregisterLoader=function(t){var e=this._availableLoaders.indexOf(t);-1!=e&&e<this._defaultLoaderLength-1&&this._availableLoaders.splice(e,1)},e.setUseXHR=function(t){return this.setPreferXHR(t)},e.setPreferXHR=function(t){return this.preferXHR=0!=t&&null!=window.XMLHttpRequest,this.preferXHR},e.removeAll=function(){this.remove()},e.remove=function(t){var e=null;if(t&&!Array.isArray(t))e=[t];else if(t)e=t;else if(arguments.length>0)return;var i=!1;if(e){for(;e.length;){var n=e.pop(),r=this.getResult(n);for(s=this._loadQueue.length-1;s>=0;s--)if((a=this._loadQueue[s].getItem()).id==n||a.src==n){this._loadQueue.splice(s,1)[0].cancel();break}for(s=this._loadQueueBackup.length-1;s>=0;s--)if((a=this._loadQueueBackup[s].getItem()).id==n||a.src==n){this._loadQueueBackup.splice(s,1)[0].cancel();break}if(r)this._disposeItem(this.getItem(n));else for(var s=this._currentLoads.length-1;s>=0;s--){var a=this._currentLoads[s].getItem();if(a.id==n||a.src==n){this._currentLoads.splice(s,1)[0].cancel(),i=!0;break}}}i&&this._loadNext()}else{for(var o in this.close(),this._loadItemsById)this._disposeItem(this._loadItemsById[o]);this.init(this.preferXHR,this._basePath)}},e.reset=function(){for(var t in this.close(),this._loadItemsById)this._disposeItem(this._loadItemsById[t]);for(var e=[],i=0,n=this._loadQueueBackup.length;i<n;i++)e.push(this._loadQueueBackup[i].getItem());this.loadManifest(e,!1)},e.installPlugin=function(t){if(null!=t&&null!=t.getPreloadHandlers){this._plugins.push(t);var e=t.getPreloadHandlers();if(e.scope=t,null!=e.types)for(var i=0,n=e.types.length;i<n;i++)this._typeCallbacks[e.types[i]]=e;if(null!=e.extensions)for(i=0,n=e.extensions.length;i<n;i++)this._extensionCallbacks[e.extensions[i]]=e}},e.setMaxConnections=function(t){this._maxConnections=t,!this._paused&&this._loadQueue.length>0&&this._loadNext()},e.loadFile=function(t,e,i){if(null!=t)this._addItem(t,null,i),!1!==e?this.setPaused(!1):this.setPaused(!0);else{var n=new createjs.ErrorEvent("PRELOAD_NO_FILE");this._sendError(n)}},e.loadManifest=function(t,e,n){var r=null,s=null;if(Array.isArray(t)){if(0==t.length){var a=new createjs.ErrorEvent("PRELOAD_MANIFEST_EMPTY");return void this._sendError(a)}r=t}else if("string"==typeof t)r=[{src:t,type:i.MANIFEST}];else{if("object"!=typeof t){a=new createjs.ErrorEvent("PRELOAD_MANIFEST_NULL");return void this._sendError(a)}if(void 0!==t.src){if(null==t.type)t.type=i.MANIFEST;else if(t.type!=i.MANIFEST){var a=new createjs.ErrorEvent("PRELOAD_MANIFEST_TYPE");this._sendError(a)}r=[t]}else void 0!==t.manifest&&(r=t.manifest,s=t.path)}for(var o=0,l=r.length;o<l;o++)this._addItem(r[o],s,n);!1!==e?this.setPaused(!1):this.setPaused(!0)},e.load=function(){this.setPaused(!1)},e.getItem=function(t){return this._loadItemsById[t]||this._loadItemsBySrc[t]},e.getResult=function(t,e){var i=this._loadItemsById[t]||this._loadItemsBySrc[t];if(null==i)return null;var n=i.id;return e&&this._loadedRawResults[n]?this._loadedRawResults[n]:this._loadedResults[n]},e.getItems=function(t){var e=[];for(var i in this._loadItemsById){var n=this._loadItemsById[i],r=this.getResult(i);!0===t&&null==r||e.push({item:n,result:r,rawResult:this.getResult(i,!0)})}return e},e.setPaused=function(t){this._paused=t,this._paused||this._loadNext()},e.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();this._scriptOrder.length=0,this._loadedScripts.length=0,this.loadStartWasDispatched=!1,this._itemCount=0,this._lastProgress=NaN},e._addItem=function(t,e,i){var n=this._createLoadItem(t,e,i);if(null!=n){var r=this._createLoader(n);null!=r&&("plugins"in r&&(r.plugins=this._plugins),n._loader=r,this._loadQueue.push(r),this._loadQueueBackup.push(r),this._numItems++,this._updateProgress(),(this.maintainScriptOrder&&n.type==createjs.LoadQueue.JAVASCRIPT||!0===n.maintainOrder)&&(this._scriptOrder.push(n),this._loadedScripts.push(null)))}},e._createLoadItem=function(t,e,i){var n=createjs.LoadItem.create(t);if(null==n)return null;var r="",s=i||this._basePath;if(n.src instanceof Object){if(!n.type)return null;if(e){r=e;var a=createjs.RequestUtils.parseURI(e);null==s||a.absolute||a.relative||(r=s+r)}else null!=s&&(r=s)}else{var o=createjs.RequestUtils.parseURI(n.src);o.extension&&(n.ext=o.extension),null==n.type&&(n.type=createjs.RequestUtils.getTypeByExtension(n.ext));var l=n.src;if(!o.absolute&&!o.relative)if(e){r=e;a=createjs.RequestUtils.parseURI(e);l=e+l,null==s||a.absolute||a.relative||(r=s+r)}else null!=s&&(r=s);n.src=r+n.src}n.path=r,void 0!==n.id&&null!==n.id&&""!==n.id||(n.id=l);var h=this._typeCallbacks[n.type]||this._extensionCallbacks[n.ext];if(h){var u=h.callback.call(h.scope,n,this);if(!1===u)return null;!0===u||null!=u&&(n._loader=u),null!=(o=createjs.RequestUtils.parseURI(n.src)).extension&&(n.ext=o.extension)}return this._loadItemsById[n.id]=n,this._loadItemsBySrc[n.src]=n,null==n.crossOrigin&&(n.crossOrigin=this._crossOrigin),n},e._createLoader=function(t){if(null!=t._loader)return t._loader;for(var e=this.preferXHR,i=0;i<this._availableLoaders.length;i++){var n=this._availableLoaders[i];if(n&&n.canLoadItem(t))return new n(t,e)}return null},e._loadNext=function(){if(!this._paused){this._loadStartWasDispatched||(this._sendLoadStart(),this._loadStartWasDispatched=!0),this._numItems==this._numItemsLoaded?(this.loaded=!0,this._sendComplete(),this.next&&this.next.load&&this.next.load()):this.loaded=!1;for(var t=0;t<this._loadQueue.length&&!(this._currentLoads.length>=this._maxConnections);t++){var e=this._loadQueue[t];this._canStartLoad(e)&&(this._loadQueue.splice(t,1),t--,this._loadItem(e))}}},e._loadItem=function(t){t.on("fileload",this._handleFileLoad,this),t.on("progress",this._handleProgress,this),t.on("complete",this._handleFileComplete,this),t.on("error",this._handleError,this),t.on("fileerror",this._handleFileError,this),this._currentLoads.push(t),this._sendFileStart(t.getItem()),t.load()},e._handleFileLoad=function(t){t.target=null,this.dispatchEvent(t)},e._handleFileError=function(t){var e=new createjs.ErrorEvent("FILE_LOAD_ERROR",null,t.item);this._sendError(e)},e._handleError=function(t){var e=t.target;this._numItemsLoaded++,this._finishOrderedItem(e,!0),this._updateProgress();var i=new createjs.ErrorEvent("FILE_LOAD_ERROR",null,e.getItem());this._sendError(i),this.stopOnError?this.setPaused(!0):(this._removeLoadItem(e),this._cleanLoadItem(e),this._loadNext())},e._handleFileComplete=function(t){var e=t.target,i=e.getItem(),n=e.getResult();this._loadedResults[i.id]=n;var r=e.getResult(!0);null!=r&&r!==n&&(this._loadedRawResults[i.id]=r),this._saveLoadedItems(e),this._removeLoadItem(e),this._finishOrderedItem(e)||this._processFinishedLoad(i,e),this._cleanLoadItem(e)},e._saveLoadedItems=function(t){var e=t.getLoadedItems();if(null!==e)for(var i=0;i<e.length;i++){var n=e[i].item;this._loadItemsBySrc[n.src]=n,this._loadItemsById[n.id]=n,this._loadedResults[n.id]=e[i].result,this._loadedRawResults[n.id]=e[i].rawResult}},e._finishOrderedItem=function(t,e){var i=t.getItem();if(this.maintainScriptOrder&&i.type==createjs.LoadQueue.JAVASCRIPT||i.maintainOrder){t instanceof createjs.JavaScriptLoader&&(this._currentlyLoadingScript=!1);var n=createjs.indexOf(this._scriptOrder,i);return-1!=n&&(this._loadedScripts[n]=!0===e||i,this._checkScriptLoadOrder(),!0)}return!1},e._checkScriptLoadOrder=function(){for(var t=this._loadedScripts.length,e=0;e<t;e++){var i=this._loadedScripts[e];if(null===i)break;if(!0!==i){var n=this._loadedResults[i.id];i.type==createjs.LoadQueue.JAVASCRIPT&&createjs.DomUtils.appendToHead(n);var r=i._loader;this._processFinishedLoad(i,r),this._loadedScripts[e]=!0}}},e._processFinishedLoad=function(t,e){if(this._numItemsLoaded++,!this.maintainScriptOrder&&t.type==createjs.LoadQueue.JAVASCRIPT){var i=e.getTag();createjs.DomUtils.appendToHead(i)}this._updateProgress(),this._sendFileComplete(t,e),this._loadNext()},e._canStartLoad=function(t){if(!this.maintainScriptOrder||t.preferXHR)return!0;var e=t.getItem();if(e.type!=createjs.LoadQueue.JAVASCRIPT)return!0;if(this._currentlyLoadingScript)return!1;for(var i=this._scriptOrder.indexOf(e),n=0;n<i;){if(null==this._loadedScripts[n])return!1;n++}return this._currentlyLoadingScript=!0,!0},e._removeLoadItem=function(t){for(var e=this._currentLoads.length,i=0;i<e;i++)if(this._currentLoads[i]==t){this._currentLoads.splice(i,1);break}},e._cleanLoadItem=function(t){var e=t.getItem();e&&delete e._loader},e._handleProgress=function(t){var e=t.target;this._sendFileProgress(e.getItem(),e.progress),this._updateProgress()},e._updateProgress=function(){var t=this._numItemsLoaded/this._numItems,e=this._numItems-this._numItemsLoaded;if(e>0){for(var i=0,n=0,r=this._currentLoads.length;n<r;n++)i+=this._currentLoads[n].progress;t+=i/e*(e/this._numItems)}this._lastProgress!=t&&(this._sendProgress(t),this._lastProgress=t)},e._disposeItem=function(t){delete this._loadedResults[t.id],delete this._loadedRawResults[t.id],delete this._loadItemsById[t.id],delete this._loadItemsBySrc[t.src]},e._sendFileProgress=function(t,e){if(!this._isCanceled()&&!this._paused&&this.hasEventListener("fileprogress")){var i=new createjs.Event("fileprogress");i.progress=e,i.loaded=e,i.total=1,i.item=t,this.dispatchEvent(i)}},e._sendFileComplete=function(t,e){if(!this._isCanceled()&&!this._paused){var i=new createjs.Event("fileload");i.loader=e,i.item=t,i.result=this._loadedResults[t.id],i.rawResult=this._loadedRawResults[t.id],t.completeHandler&&t.completeHandler(i),this.hasEventListener("fileload")&&this.dispatchEvent(i)}},e._sendFileStart=function(t){var e=new createjs.Event("filestart");e.item=t,this.hasEventListener("filestart")&&this.dispatchEvent(e)},e.toString=function(){return"[PreloadJS LoadQueue]"},createjs.LoadQueue=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.TEXT)}createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.TEXT},createjs.TextLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.BINARY),this.on("initialize",this._updateXHR,this)}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.BINARY},e._updateXHR=function(t){t.loader.setResponseType("arraybuffer")},createjs.BinaryLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.CSS),this.resultFormatter=this._formatResult,this._tagSrcAttribute="href",this._tag=e?document.createElement("style"):document.createElement("link"),this._tag.rel="stylesheet",this._tag.type="text/css"}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.CSS},e._formatResult=function(t){if(this._preferXHR){var e=t.getTag();if(e.styleSheet)e.styleSheet.cssText=t.getResult(!0);else{var i=document.createTextNode(t.getResult(!0));e.appendChild(i)}}else e=this._tag;return createjs.DomUtils.appendToHead(e),e},createjs.CSSLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.IMAGE),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",createjs.RequestUtils.isImageTag(t)?this._tag=t:createjs.RequestUtils.isImageTag(t.src)?this._tag=t.src:createjs.RequestUtils.isImageTag(t.tag)&&(this._tag=t.tag),null!=this._tag?this._preferXHR=!1:this._tag=document.createElement("img"),this.on("initialize",this._updateXHR,this)}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.IMAGE},e.load=function(){if(""!=this._tag.src&&this._tag.complete)this._sendComplete();else{var t=this._item.crossOrigin;1==t&&(t="Anonymous"),null==t||createjs.RequestUtils.isLocal(this._item.src)||(this._tag.crossOrigin=t),this.AbstractLoader_load()}},e._updateXHR=function(t){t.loader.mimeType="text/plain; charset=x-user-defined-binary",t.loader.setResponseType&&t.loader.setResponseType("blob")},e._formatResult=function(t){return this._formatImage},e._formatImage=function(t,e){var i=this._tag,n=window.URL||window.webkitURL;if(this._preferXHR)if(n){var r=n.createObjectURL(this.getResult(!0));i.src=r,i.addEventListener("load",this._cleanUpURL,!1),i.addEventListener("error",this._cleanUpURL,!1)}else i.src=this._item.src;else;i.complete?t(i):(i.onload=createjs.proxy(function(){t(this._tag)},this),i.onerror=createjs.proxy(function(){e(_this._tag)},this))},e._cleanUpURL=function(t){(window.URL||window.webkitURL).revokeObjectURL(t.target.src)},createjs.ImageLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.JAVASCRIPT),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.setTag(document.createElement("script"))}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.JAVASCRIPT},e._formatResult=function(t){var e=t.getTag();return this._preferXHR&&(e.text=t.getResult(!0)),e},createjs.JavaScriptLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.JSON),this.resultFormatter=this._formatResult}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.JSON},e._formatResult=function(t){var e=null;try{e=createjs.DataUtils.parseJSON(t.getResult(!0))}catch(t){var i=new createjs.ErrorEvent("JSON_FORMAT",null,t);return this._sendError(i),t}return e},createjs.JSONLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!1,createjs.AbstractLoader.JSONP),this.setTag(document.createElement("script")),this.getTag().type="text/javascript"}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.JSONP},e.cancel=function(){this.AbstractLoader_cancel(),this._dispose()},e.load=function(){if(null==this._item.callback)throw new Error("callback is required for loading JSONP requests.");if(null!=window[this._item.callback])throw new Error("JSONP callback '"+this._item.callback+"' already exists on window. You need to specify a different callback or re-name the current one.");window[this._item.callback]=createjs.proxy(this._handleLoad,this),window.document.body.appendChild(this._tag),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag.src=this._item.src},e._handleLoad=function(t){this._result=this._rawResult=t,this._sendComplete(),this._dispose()},e._handleTimeout=function(){this._dispose(),this.dispatchEvent(new createjs.ErrorEvent("timeout"))},e._dispose=function(){window.document.body.removeChild(this._tag),delete window[this._item.callback],clearTimeout(this._loadTimeout)},createjs.JSONPLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,null,createjs.AbstractLoader.MANIFEST),this.plugins=null,this._manifestQueue=null}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.MANIFEST_PROGRESS=.25,i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.MANIFEST},e.load=function(){this.AbstractLoader_load()},e._createRequest=function(){var t=this._item.callback;this._request=null!=t?new createjs.JSONPLoader(this._item):new createjs.JSONLoader(this._item)},e.handleEvent=function(t){switch(t.type){case"complete":return this._rawResult=t.target.getResult(!0),this._result=t.target.getResult(),this._sendProgress(i.MANIFEST_PROGRESS),void this._loadManifest(this._result);case"progress":return t.loaded*=i.MANIFEST_PROGRESS,this.progress=t.loaded/t.total,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0),void this._sendProgress(t)}this.AbstractLoader_handleEvent(t)},e.destroy=function(){this.AbstractLoader_destroy(),this._manifestQueue.close()},e._loadManifest=function(t){if(t&&t.manifest){var e=this._manifestQueue=new createjs.LoadQueue;e.on("fileload",this._handleManifestFileLoad,this),e.on("progress",this._handleManifestProgress,this),e.on("complete",this._handleManifestComplete,this,!0),e.on("error",this._handleManifestError,this,!0);for(var i=0,n=this.plugins.length;i<n;i++)e.installPlugin(this.plugins[i]);e.loadManifest(t)}else this._sendComplete()},e._handleManifestFileLoad=function(t){t.target=null,this.dispatchEvent(t)},e._handleManifestComplete=function(t){this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},e._handleManifestProgress=function(t){this.progress=t.progress*(1-i.MANIFEST_PROGRESS)+i.MANIFEST_PROGRESS,this._sendProgress(this.progress)},e._handleManifestError=function(t){var e=new createjs.Event("fileerror");e.item=t.data,this.dispatchEvent(e)},createjs.ManifestLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractMediaLoader_constructor(t,e,createjs.AbstractLoader.SOUND),createjs.RequestUtils.isAudioTag(t)?this._tag=t:createjs.RequestUtils.isAudioTag(t.src)?this._tag=t:createjs.RequestUtils.isAudioTag(t.tag)&&(this._tag=createjs.RequestUtils.isAudioTag(t)?t:t.src),null!=this._tag&&(this._preferXHR=!1)}var e=createjs.extend(t,createjs.AbstractMediaLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.SOUND},e._createTag=function(t){var e=document.createElement("audio");return e.autoplay=!1,e.preload="none",e.src=t,e},createjs.SoundLoader=createjs.promote(t,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractMediaLoader_constructor(t,e,createjs.AbstractLoader.VIDEO),createjs.RequestUtils.isVideoTag(t)||createjs.RequestUtils.isVideoTag(t.src)?(this.setTag(createjs.RequestUtils.isVideoTag(t)?t:t.src),this._preferXHR=!1):this.setTag(this._createTag())}var e=t;createjs.extend(t,createjs.AbstractMediaLoader)._createTag=function(){return document.createElement("video")},e.canLoadItem=function(t){return t.type==createjs.AbstractLoader.VIDEO},createjs.VideoLoader=createjs.promote(t,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.SPRITESHEET),this._manifestQueue=null}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.SPRITESHEET_PROGRESS=.25,i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.SPRITESHEET},e.destroy=function(){this.AbstractLoader_destroy,this._manifestQueue.close()},e._createRequest=function(){var t=this._item.callback;this._request=null!=t?new createjs.JSONPLoader(this._item):new createjs.JSONLoader(this._item)},e.handleEvent=function(t){switch(t.type){case"complete":return this._rawResult=t.target.getResult(!0),this._result=t.target.getResult(),this._sendProgress(i.SPRITESHEET_PROGRESS),void this._loadManifest(this._result);case"progress":return t.loaded*=i.SPRITESHEET_PROGRESS,this.progress=t.loaded/t.total,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0),void this._sendProgress(t)}this.AbstractLoader_handleEvent(t)},e._loadManifest=function(t){if(t&&t.images){var e=this._manifestQueue=new createjs.LoadQueue(this._preferXHR,this._item.path,this._item.crossOrigin);e.on("complete",this._handleManifestComplete,this,!0),e.on("fileload",this._handleManifestFileLoad,this),e.on("progress",this._handleManifestProgress,this),e.on("error",this._handleManifestError,this,!0),e.loadManifest(t.images)}},e._handleManifestFileLoad=function(t){var e=t.result;if(null!=e){var i=this.getResult().images;i[i.indexOf(t.item.src)]=e}},e._handleManifestComplete=function(t){this._result=new createjs.SpriteSheet(this._result),this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},e._handleManifestProgress=function(t){this.progress=t.progress*(1-i.SPRITESHEET_PROGRESS)+i.SPRITESHEET_PROGRESS,this._sendProgress(this.progress)},e._handleManifestError=function(t){var e=new createjs.Event("fileerror");e.item=t.data,this.dispatchEvent(e)},createjs.SpriteSheetLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.SVG),this.resultFormatter=this._formatResult,this._tagSrcAttribute="data",e?this.setTag(document.createElement("svg")):(this.setTag(document.createElement("object")),this.getTag().type="image/svg+xml")}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.SVG},e._formatResult=function(t){var e=createjs.DataUtils.parseXML(t.getResult(!0),"text/xml"),i=t.getTag();return!this._preferXHR&&document.body.contains(i)&&document.body.removeChild(i),null!=e.documentElement?(i.appendChild(e.documentElement),i.style.visibility="visible",i):e},createjs.SVGLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.XML),this.resultFormatter=this._formatResult}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.XML},e._formatResult=function(t){return createjs.DataUtils.parseXML(t.getResult(!0),"text/xml")},createjs.XMLLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){var t=createjs.SoundJS=createjs.SoundJS||{};t.version="0.6.2",t.buildDate="Thu, 26 Nov 2015 20:44:31 GMT"}(),this.createjs=this.createjs||{},createjs.extend=function(t,e){"use strict";function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i},this.createjs=this.createjs||{},createjs.promote=function(t,e){"use strict";var i=t.prototype,n=Object.getPrototypeOf&&Object.getPrototypeOf(i)||i.__proto__;if(n)for(var r in i[(e+="_")+"constructor"]=n.constructor,n)i.hasOwnProperty(r)&&"function"==typeof n[r]&&(i[e+r]=n[r]);return t},this.createjs=this.createjs||{},createjs.indexOf=function(t,e){"use strict";for(var i=0,n=t.length;i<n;i++)if(e===t[i])return i;return-1},this.createjs=this.createjs||{},function(){"use strict";createjs.proxy=function(t,e){var i=Array.prototype.slice.call(arguments,2);return function(){return t.apply(e,Array.prototype.slice.call(arguments,0).concat(i))}}}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"BrowserDetect cannot be instantiated"}var e=t.agent=window.navigator.userAgent;t.isWindowPhone=e.indexOf("IEMobile")>-1||e.indexOf("Windows Phone")>-1,t.isFirefox=e.indexOf("Firefox")>-1,t.isOpera=null!=window.opera,t.isChrome=e.indexOf("Chrome")>-1,t.isIOS=(e.indexOf("iPod")>-1||e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1)&&!t.isWindowPhone,t.isAndroid=e.indexOf("Android")>-1&&!t.isWindowPhone,t.isBlackberry=e.indexOf("Blackberry")>-1,createjs.BrowserDetect=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this._listeners=null,this._captureListeners=null}var e=t.prototype;t.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger},e.addEventListener=function(t,e,i){var n,r=(n=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{})[t];return r&&this.removeEventListener(t,e,i),(r=n[t])?r.push(e):n[t]=[e],e},e.on=function(t,e,i,n,r,s){return e.handleEvent&&(i=i||e,e=e.handleEvent),i=i||this,this.addEventListener(t,function(t){e.call(i,t,r),n&&t.remove()},s)},e.removeEventListener=function(t,e,i){var n=i?this._captureListeners:this._listeners;if(n){var r=n[t];if(r)for(var s=0,a=r.length;s<a;s++)if(r[s]==e){1==a?delete n[t]:r.splice(s,1);break}}},e.off=e.removeEventListener,e.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},e.dispatchEvent=function(t,e,i){if("string"==typeof t){var n=this._listeners;if(!(e||n&&n[t]))return!0;t=new createjs.Event(t,e,i)}else t.target&&t.clone&&(t=t.clone());try{t.target=this}catch(t){}if(t.bubbles&&this.parent){for(var r=this,s=[r];r.parent;)s.push(r=r.parent);var a,o=s.length;for(a=o-1;a>=0&&!t.propagationStopped;a--)s[a]._dispatchEvent(t,1+(0==a));for(a=1;a<o&&!t.propagationStopped;a++)s[a]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return!t.defaultPrevented},e.hasEventListener=function(t){var e=this._listeners,i=this._captureListeners;return!!(e&&e[t]||i&&i[t])},e.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1},e.toString=function(){return"[EventDispatcher]"},e._dispatchEvent=function(t,e){var i,n=1==e?this._captureListeners:this._listeners;if(t&&n){var r=n[t.type];if(!r||!(i=r.length))return;try{t.currentTarget=this}catch(t){}try{t.eventPhase=e}catch(t){}t.removed=!1,r=r.slice();for(var s=0;s<i&&!t.immediatePropagationStopped;s++){var a=r[s];a.handleEvent?a.handleEvent(t):a(t),t.removed&&(this.off(t.type,a,1==e),t.removed=!1)}}},createjs.EventDispatcher=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.type=t,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!e,this.cancelable=!!i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var e=t.prototype;e.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.remove=function(){this.removed=!0},e.clone=function(){return new t(this.type,this.bubbles,this.cancelable)},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.Event_constructor("error"),this.title=t,this.message=e,this.data=i}createjs.extend(t,createjs.Event).clone=function(){return new createjs.ErrorEvent(this.title,this.message,this.data)},createjs.ErrorEvent=createjs.promote(t,"Event")}(),this.createjs=this.createjs||{},function(t){"use strict";function e(t,e){this.Event_constructor("progress"),this.loaded=t,this.total=null==e?1:e,this.progress=0==e?0:this.loaded/this.total}createjs.extend(e,createjs.Event).clone=function(){return new createjs.ProgressEvent(this.loaded,this.total)},createjs.ProgressEvent=createjs.promote(e,"Event")}(window),this.createjs=this.createjs||{},function(){"use strict";function t(){this.src=null,this.type=null,this.id=null,this.maintainOrder=!1,this.callback=null,this.data=null,this.method=createjs.LoadItem.GET,this.values=null,this.headers=null,this.withCredentials=!1,this.mimeType=null,this.crossOrigin=null,this.loadTimeout=i.LOAD_TIMEOUT_DEFAULT}var e=t.prototype={},i=t;i.LOAD_TIMEOUT_DEFAULT=8e3,i.create=function(e){if("string"==typeof e){var n=new t;return n.src=e,n}if(e instanceof i)return e;if(e instanceof Object&&e.src)return null==e.loadTimeout&&(e.loadTimeout=i.LOAD_TIMEOUT_DEFAULT),e;throw new Error("Type not recognized.")},e.set=function(t){for(var e in t)this[e]=t[e];return this},createjs.LoadItem=i}(),function(){var t={ABSOLUTE_PATT:/^(?:\w+:)?\/{2}/i,RELATIVE_PATT:/^[./]*?\//i,EXTENSION_PATT:/\/?[^/]+\.(\w{1,5})$/i,parseURI:function(e){var i={absolute:!1,relative:!1};if(null==e)return i;var n,r=e.indexOf("?");return r>-1&&(e=e.substr(0,r)),t.ABSOLUTE_PATT.test(e)?i.absolute=!0:t.RELATIVE_PATT.test(e)&&(i.relative=!0),(n=e.match(t.EXTENSION_PATT))&&(i.extension=n[1].toLowerCase()),i},formatQueryString:function(t,e){if(null==t)throw new Error("You must specify data.");var i=[];for(var n in t)i.push(n+"="+escape(t[n]));return e&&(i=i.concat(e)),i.join("&")},buildPath:function(t,e){if(null==e)return t;var i=[],n=t.indexOf("?");if(-1!=n){var r=t.slice(n+1);i=i.concat(r.split("&"))}return-1!=n?t.slice(0,n)+"?"+this.formatQueryString(e,i):t+"?"+this.formatQueryString(e,i)},isCrossDomain:function(t){var e=document.createElement("a");e.href=t.src;var i=document.createElement("a");return i.href=location.href,""!=e.hostname&&(e.port!=i.port||e.protocol!=i.protocol||e.hostname!=i.hostname)},isLocal:function(t){var e=document.createElement("a");return e.href=t.src,""==e.hostname&&"file:"==e.protocol},isBinary:function(t){switch(t){case createjs.AbstractLoader.IMAGE:case createjs.AbstractLoader.BINARY:return!0;default:return!1}},isImageTag:function(t){return t instanceof HTMLImageElement},isAudioTag:function(t){return!!window.HTMLAudioElement&&t instanceof HTMLAudioElement},isVideoTag:function(t){return!!window.HTMLVideoElement&&t instanceof HTMLVideoElement},isText:function(t){switch(t){case createjs.AbstractLoader.TEXT:case createjs.AbstractLoader.JSON:case createjs.AbstractLoader.MANIFEST:case createjs.AbstractLoader.XML:case createjs.AbstractLoader.CSS:case createjs.AbstractLoader.SVG:case createjs.AbstractLoader.JAVASCRIPT:case createjs.AbstractLoader.SPRITESHEET:return!0;default:return!1}},getTypeByExtension:function(t){if(null==t)return createjs.AbstractLoader.TEXT;switch(t.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.AbstractLoader.IMAGE;case"ogg":case"mp3":case"webm":return createjs.AbstractLoader.SOUND;case"mp4":case"webm":case"ts":return createjs.AbstractLoader.VIDEO;case"json":return createjs.AbstractLoader.JSON;case"xml":return createjs.AbstractLoader.XML;case"css":return createjs.AbstractLoader.CSS;case"js":return createjs.AbstractLoader.JAVASCRIPT;case"svg":return createjs.AbstractLoader.SVG;default:return createjs.AbstractLoader.TEXT}}};createjs.RequestUtils=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.EventDispatcher_constructor(),this.loaded=!1,this.canceled=!1,this.progress=0,this.type=i,this.resultFormatter=null,this._item=t?createjs.LoadItem.create(t):null,this._preferXHR=e,this._result=null,this._rawResult=null,this._loadedItems=null,this._tagSrcAttribute=null,this._tag=null}var e=createjs.extend(t,createjs.EventDispatcher),i=t;i.POST="POST",i.GET="GET",i.BINARY="binary",i.CSS="css",i.IMAGE="image",i.JAVASCRIPT="javascript",i.JSON="json",i.JSONP="jsonp",i.MANIFEST="manifest",i.SOUND="sound",i.VIDEO="video",i.SPRITESHEET="spritesheet",i.SVG="svg",i.TEXT="text",i.XML="xml",e.getItem=function(){return this._item},e.getResult=function(t){return t?this._rawResult:this._result},e.getTag=function(){return this._tag},e.setTag=function(t){this._tag=t},e.load=function(){this._createRequest(),this._request.on("complete",this,this),this._request.on("progress",this,this),this._request.on("loadStart",this,this),this._request.on("abort",this,this),this._request.on("timeout",this,this),this._request.on("error",this,this);var t=new createjs.Event("initialize");t.loader=this._request,this.dispatchEvent(t),this._request.load()},e.cancel=function(){this.canceled=!0,this.destroy()},e.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy()),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},e.getLoadedItems=function(){return this._loadedItems},e._createRequest=function(){this._preferXHR?this._request=new createjs.XHRRequest(this._item):this._request=new createjs.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._createTag=function(t){return null},e._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},e._sendProgress=function(t){if(!this._isCanceled()){var e=null;"number"==typeof t?(this.progress=t,e=new createjs.ProgressEvent(this.progress)):(e=t,this.progress=t.loaded/t.total,e.progress=this.progress,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0)),this.hasEventListener("progress")&&this.dispatchEvent(e)}},e._sendComplete=function(){if(!this._isCanceled()){this.loaded=!0;var t=new createjs.Event("complete");t.rawResult=this._rawResult,null!=this._result&&(t.result=this._result),this.dispatchEvent(t)}},e._sendError=function(t){!this._isCanceled()&&this.hasEventListener("error")&&(null==t&&(t=new createjs.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(t))},e._isCanceled=function(){return!(null!=window.createjs&&!this.canceled)},e.resultFormatter=null,e.handleEvent=function(t){switch(t.type){case"complete":this._rawResult=t.target._response;var e=this.resultFormatter&&this.resultFormatter(this);e instanceof Function?e.call(this,createjs.proxy(this._resultFormatSuccess,this),createjs.proxy(this._resultFormatFailed,this)):(this._result=e||this._rawResult,this._sendComplete());break;case"progress":this._sendProgress(t);break;case"error":this._sendError(t);break;case"loadstart":this._sendLoadStart();break;case"abort":case"timeout":this._isCanceled()||this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_"+t.type.toUpperCase()+"_ERROR"))}},e._resultFormatSuccess=function(t){this._result=t,this._sendComplete()},e._resultFormatFailed=function(t){this._sendError(t)},e.buildPath=function(t,e){return createjs.RequestUtils.buildPath(t,e)},e.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.AbstractLoader_constructor(t,e,i),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.on("initialize",this._updateXHR,this)}var e=createjs.extend(t,createjs.AbstractLoader);e.load=function(){this._tag||(this._tag=this._createTag(this._item.src)),this._tag.preload="auto",this._tag.load(),this.AbstractLoader_load()},e._createTag=function(){},e._createRequest=function(){this._preferXHR?this._request=new createjs.XHRRequest(this._item):this._request=new createjs.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._updateXHR=function(t){t.loader.setResponseType&&t.loader.setResponseType("blob")},e._formatResult=function(t){if(this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR){var e=window.URL||window.webkitURL,i=t.getResult(!0);t.getTag().src=e.createObjectURL(i)}return t.getTag()},createjs.AbstractMediaLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t){this._item=t},e=createjs.extend(t,createjs.EventDispatcher);e.load=function(){},e.destroy=function(){},e.cancel=function(){},createjs.AbstractRequest=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this),this._addedToDOM=!1,this._startTagVisibility=null}var e=createjs.extend(t,createjs.AbstractRequest);e.load=function(){this._tag.onload=createjs.proxy(this._handleTagComplete,this),this._tag.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this),this._tag.onerror=createjs.proxy(this._handleError,this);var t=new createjs.Event("initialize");t.loader=this._tag,this.dispatchEvent(t),this._hideTag(),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag[this._tagSrcAttribute]=this._item.src,null==this._tag.parentNode&&(window.document.body.appendChild(this._tag),this._addedToDOM=!0)},e.destroy=function(){this._clean(),this._tag=null,this.AbstractRequest_destroy()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;"loaded"!=t.readyState&&"complete"!=t.readyState||this._handleTagComplete()},e._handleError=function(){this._clean(),this.dispatchEvent("error")},e._handleTagComplete=function(){this._rawResult=this._tag,this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult,this._clean(),this._showTag(),this.dispatchEvent("complete")},e._handleTimeout=function(){this._clean(),this.dispatchEvent(new createjs.Event("timeout"))},e._clean=function(){this._tag.onload=null,this._tag.onreadystatechange=null,this._tag.onerror=null,this._addedToDOM&&null!=this._tag.parentNode&&this._tag.parentNode.removeChild(this._tag),clearTimeout(this._loadTimeout)},e._hideTag=function(){this._startTagVisibility=this._tag.style.visibility,this._tag.style.visibility="hidden"},e._showTag=function(){this._tag.style.visibility=this._startTagVisibility},e._handleStalled=function(){},createjs.TagRequest=createjs.promote(t,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this)}var e=createjs.extend(t,createjs.TagRequest);e.load=function(){var t=createjs.proxy(this._handleStalled,this);this._stalledCallback=t;var e=createjs.proxy(this._handleProgress,this);this._handleProgress=e,this._tag.addEventListener("stalled",t),this._tag.addEventListener("progress",e),this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1),this.TagRequest_load()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;"loaded"!=t.readyState&&"complete"!=t.readyState||this._handleTagComplete()},e._handleStalled=function(){},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(e)}},e._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.removeEventListener("stalled",this._stalledCallback),this._tag.removeEventListener("progress",this._progressCallback),this.TagRequest__clean()},createjs.MediaTagRequest=createjs.promote(t,"TagRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractRequest_constructor(t),this._request=null,this._loadTimeout=null,this._xhrLevel=1,this._response=null,this._rawResponse=null,this._canceled=!1,this._handleLoadStartProxy=createjs.proxy(this._handleLoadStart,this),this._handleProgressProxy=createjs.proxy(this._handleProgress,this),this._handleAbortProxy=createjs.proxy(this._handleAbort,this),this._handleErrorProxy=createjs.proxy(this._handleError,this),this._handleTimeoutProxy=createjs.proxy(this._handleTimeout,this),this._handleLoadProxy=createjs.proxy(this._handleLoad,this),this._handleReadyStateChangeProxy=createjs.proxy(this._handleReadyStateChange,this),this._createXHR(t)}var e=createjs.extend(t,createjs.AbstractRequest);t.ACTIVEX_VERSIONS=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],e.getResult=function(t){return t&&this._rawResponse?this._rawResponse:this._response},e.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},e.load=function(){if(null!=this._request){null!=this._request.addEventListener?(this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1)):(this._request.onloadstart=this._handleLoadStartProxy,this._request.onprogress=this._handleProgressProxy,this._request.onabort=this._handleAbortProxy,this._request.onerror=this._handleErrorProxy,this._request.ontimeout=this._handleTimeoutProxy,this._request.onload=this._handleLoadProxy,this._request.onreadystatechange=this._handleReadyStateChangeProxy),1==this._xhrLevel&&(this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout));try{this._item.values&&this._item.method!=createjs.AbstractLoader.GET?this._item.method==createjs.AbstractLoader.POST&&this._request.send(createjs.RequestUtils.formatQueryString(this._item.values)):this._request.send()}catch(t){this.dispatchEvent(new createjs.ErrorEvent("XHR_SEND",null,t))}}else this._handleError()},e.setResponseType=function(t){"blob"===t&&(t=window.URL?"blob":"arraybuffer",this._responseType=t),this._request.responseType=t},e.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},e.getResponseHeader=function(t){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(t):null},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(e)}},e._handleLoadStart=function(t){clearTimeout(this._loadTimeout),this.dispatchEvent("loadstart")},e._handleAbort=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("XHR_ABORTED",null,t))},e._handleError=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent(t.message))},e._handleReadyStateChange=function(t){4==this._request.readyState&&this._handleLoad()},e._handleLoad=function(t){if(!this.loaded){this.loaded=!0;var e=this._checkError();if(e)this._handleError(e);else{if(this._response=this._getResponse(),"arraybuffer"===this._responseType)try{this._response=new Blob([this._response])}catch(t){if(window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,"TypeError"===t.name&&window.BlobBuilder){var i=new BlobBuilder;i.append(this._response),this._response=i.getBlob()}}this._clean(),this.dispatchEvent(new createjs.Event("complete"))}}},e._handleTimeout=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT",null,t))},e._checkError=function(){var t=parseInt(this._request.status);switch(t){case 404:case 0:return new Error(t)}return null},e._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(t){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(t){}return null},e._createXHR=function(t){var e=createjs.RequestUtils.isCrossDomain(t),i={},n=null;if(window.XMLHttpRequest)n=new XMLHttpRequest,e&&void 0===n.withCredentials&&window.XDomainRequest&&(n=new XDomainRequest);else{for(var r=0,a=s.ACTIVEX_VERSIONS.length;r<a;r++){var o=s.ACTIVEX_VERSIONS[r];try{n=new ActiveXObject(o);break}catch(t){}}if(null==n)return!1}null==t.mimeType&&createjs.RequestUtils.isText(t.type)&&(t.mimeType="text/plain; charset=utf-8"),t.mimeType&&n.overrideMimeType&&n.overrideMimeType(t.mimeType),this._xhrLevel="string"==typeof n.responseType?2:1;var l=null;if(l=t.method==createjs.AbstractLoader.GET?createjs.RequestUtils.buildPath(t.src,t.values):t.src,n.open(t.method||createjs.AbstractLoader.GET,l,!0),e&&n instanceof XMLHttpRequest&&1==this._xhrLevel&&(i.Origin=location.origin),t.values&&t.method==createjs.AbstractLoader.POST&&(i["Content-Type"]="application/x-www-form-urlencoded"),e||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),t.headers)for(var h in t.headers)i[h]=t.headers[h];for(h in i)n.setRequestHeader(h,i[h]);return n instanceof XMLHttpRequest&&void 0!==t.withCredentials&&(n.withCredentials=t.withCredentials),this._request=n,!0},e._clean=function(){clearTimeout(this._loadTimeout),null!=this._request.removeEventListener?(this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)):(this._request.onloadstart=null,this._request.onprogress=null,this._request.onabort=null,this._request.onerror=null,this._request.ontimeout=null,this._request.onload=null,this._request.onreadystatechange=null)},e.toString=function(){return"[PreloadJS XHRRequest]"},createjs.XHRRequest=createjs.promote(t,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractMediaLoader_constructor(t,e,createjs.AbstractLoader.SOUND),createjs.RequestUtils.isAudioTag(t)?this._tag=t:createjs.RequestUtils.isAudioTag(t.src)?this._tag=t:createjs.RequestUtils.isAudioTag(t.tag)&&(this._tag=createjs.RequestUtils.isAudioTag(t)?t:t.src),null!=this._tag&&(this._preferXHR=!1)}var e=createjs.extend(t,createjs.AbstractMediaLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.SOUND},e._createTag=function(t){var e=document.createElement("audio");return e.autoplay=!1,e.preload="none",e.src=t,e},createjs.SoundLoader=createjs.promote(t,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(){this.interrupt=null,this.delay=null,this.offset=null,this.loop=null,this.volume=null,this.pan=null,this.startTime=null,this.duration=null},e=t.prototype={},i=t;i.create=function(t){if(t instanceof i||t instanceof Object){var e=new createjs.PlayPropsConfig;return e.set(t),e}throw new Error("Type not recognized.")},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[PlayPropsConfig]"},createjs.PlayPropsConfig=i}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"Sound cannot be instantiated"}var e=t;function i(t,e){this.init(t,e)}e.INTERRUPT_ANY="any",e.INTERRUPT_EARLY="early",e.INTERRUPT_LATE="late",e.INTERRUPT_NONE="none",e.PLAY_INITED="playInited",e.PLAY_SUCCEEDED="playSucceeded",e.PLAY_INTERRUPTED="playInterrupted",e.PLAY_FINISHED="playFinished",e.PLAY_FAILED="playFailed",e.SUPPORTED_EXTENSIONS=["mp3","ogg","opus","mpeg","wav","m4a","mp4","aiff","wma","mid"],e.EXTENSION_MAP={m4a:"mp4"},e.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([/.]*?(?:[^?]+)?\/)?((?:[^/?]+)\.(\w+))(?:\?(\S+)?)?$/,e.defaultInterruptBehavior=e.INTERRUPT_NONE,e.alternateExtensions=[],e.activePlugin=null,e._masterVolume=1,Object.defineProperty(e,"volume",{get:function(){return this._masterVolume},set:function(t){if(null==Number(t))return!1;if(t=Math.max(0,Math.min(1,t)),e._masterVolume=t,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(t))for(var i=this._instances,n=0,r=i.length;n<r;n++)i[n].setMasterVolume(t)}}),e._masterMute=!1,Object.defineProperty(e,"muted",{get:function(){return this._masterMute},set:function(t){if(null==t)return!1;if(this._masterMute=t,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(t))for(var e=this._instances,i=0,n=e.length;i<n;i++)e[i].setMasterMute(t);return!0}}),Object.defineProperty(e,"capabilities",{get:function(){return null==e.activePlugin?null:e.activePlugin._capabilities},set:function(t){return!1}}),e._pluginsRegistered=!1,e._lastID=0,e._instances=[],e._idHash={},e._preloadHash={},e._defaultPlayPropsHash={},e.addEventListener=null,e.removeEventListener=null,e.removeAllEventListeners=null,e.dispatchEvent=null,e.hasEventListener=null,e._listeners=null,createjs.EventDispatcher.initialize(e),e.getPreloadHandlers=function(){return{callback:createjs.proxy(e.initLoad,e),types:["sound"],extensions:e.SUPPORTED_EXTENSIONS}},e._handleLoadComplete=function(t){var i=t.target.getItem().src;if(e._preloadHash[i])for(var n=0,r=e._preloadHash[i].length;n<r;n++){var s=e._preloadHash[i][n];if(e._preloadHash[i][n]=!0,e.hasEventListener("fileload"))(t=new createjs.Event("fileload")).src=s.src,t.id=s.id,t.data=s.data,t.sprite=s.sprite,e.dispatchEvent(t)}},e._handleLoadError=function(t){var i=t.target.getItem().src;if(e._preloadHash[i])for(var n=0,r=e._preloadHash[i].length;n<r;n++){var s=e._preloadHash[i][n];if(e._preloadHash[i][n]=!1,e.hasEventListener("fileerror"))(t=new createjs.Event("fileerror")).src=s.src,t.id=s.id,t.data=s.data,t.sprite=s.sprite,e.dispatchEvent(t)}},e._registerPlugin=function(t){return!!t.isSupported()&&(e.activePlugin=new t,!0)},e.registerPlugins=function(t){e._pluginsRegistered=!0;for(var i=0,n=t.length;i<n;i++)if(e._registerPlugin(t[i]))return!0;return!1},e.initializeDefaultPlugins=function(){return null!=e.activePlugin||!e._pluginsRegistered&&!!e.registerPlugins([createjs.WebAudioPlugin,createjs.HTMLAudioPlugin])},e.isReady=function(){return null!=e.activePlugin},e.getCapabilities=function(){return null==e.activePlugin?null:e.activePlugin._capabilities},e.getCapability=function(t){return null==e.activePlugin?null:e.activePlugin._capabilities[t]},e.initLoad=function(t){return e._registerSound(t)},e._registerSound=function(t){if(!e.initializeDefaultPlugins())return!1;var n;if(t.src instanceof Object?(n=e._parseSrc(t.src)).src=t.path+n.src:n=e._parsePath(t.src),null==n)return!1;t.src=n.src,t.type="sound";var r=t.data,s=null;if(null!=r&&(isNaN(r.channels)?isNaN(r)||(s=parseInt(r)):s=parseInt(r.channels),r.audioSprite))for(var a,o=r.audioSprite.length;o--;)a=r.audioSprite[o],e._idHash[a.id]={src:t.src,startTime:parseInt(a.startTime),duration:parseInt(a.duration)},a.defaultPlayProps&&(e._defaultPlayPropsHash[a.id]=createjs.PlayPropsConfig.create(a.defaultPlayProps));null!=t.id&&(e._idHash[t.id]={src:t.src});var l=e.activePlugin.register(t);return i.create(t.src,s),null!=r&&isNaN(r)?t.data.channels=s||i.maxPerChannel():t.data=s||i.maxPerChannel(),l.type&&(t.type=l.type),t.defaultPlayProps&&(e._defaultPlayPropsHash[t.src]=createjs.PlayPropsConfig.create(t.defaultPlayProps)),l},e.registerSound=function(t,i,n,r,s){var a={src:t,id:i,data:n,defaultPlayProps:s};t instanceof Object&&t.src&&(r=i,a=t),(a=createjs.LoadItem.create(a)).path=r,null==r||a.src instanceof Object||(a.src=r+t);var o=e._registerSound(a);if(!o)return!1;if(e._preloadHash[a.src]||(e._preloadHash[a.src]=[]),e._preloadHash[a.src].push(a),1==e._preloadHash[a.src].length)o.on("complete",createjs.proxy(this._handleLoadComplete,this)),o.on("error",createjs.proxy(this._handleLoadError,this)),e.activePlugin.preload(o);else if(1==e._preloadHash[a.src][0])return!0;return a},e.registerSounds=function(t,e){var i=[];t.path&&(e?e+=t.path:e=t.path,t=t.manifest);for(var n=0,r=t.length;n<r;n++)i[n]=createjs.Sound.registerSound(t[n].src,t[n].id,t[n].data,e,t[n].defaultPlayProps);return i},e.removeSound=function(t,n){if(null==e.activePlugin)return!1;var r;if(t instanceof Object&&t.src&&(t=t.src),t instanceof Object?r=e._parseSrc(t):(t=e._getSrcById(t).src,r=e._parsePath(t)),null==r)return!1;for(var s in t=r.src,null!=n&&(t=n+t),e._idHash)e._idHash[s].src==t&&delete e._idHash[s];return i.removeSrc(t),delete e._preloadHash[t],e.activePlugin.removeSound(t),!0},e.removeSounds=function(t,e){var i=[];t.path&&(e?e+=t.path:e=t.path,t=t.manifest);for(var n=0,r=t.length;n<r;n++)i[n]=createjs.Sound.removeSound(t[n].src,e);return i},e.removeAllSounds=function(){e._idHash={},e._preloadHash={},i.removeAll(),e.activePlugin&&e.activePlugin.removeAllSounds()},e.loadComplete=function(t){if(!e.isReady())return!1;var i=e._parsePath(t);return t=i?e._getSrcById(i.src).src:e._getSrcById(t).src,void 0!=e._preloadHash[t]&&1==e._preloadHash[t][0]},e._parsePath=function(t){"string"!=typeof t&&(t=t.toString());var i=t.match(e.FILE_PATTERN);if(null==i)return!1;for(var n=i[4],r=i[5],s=e.capabilities,a=0;!s[r];)if(r=e.alternateExtensions[a++],a>e.alternateExtensions.length)return null;return{name:n,src:t=t.replace("."+i[5],"."+r),extension:r}},e._parseSrc=function(t){var i={name:void 0,src:void 0,extension:void 0},n=e.capabilities;for(var r in t)if(t.hasOwnProperty(r)&&n[r]){i.src=t[r],i.extension=r;break}if(!i.src)return!1;var s=i.src.lastIndexOf("/");return i.name=-1!=s?i.src.slice(s+1):i.src,i},e.play=function(t,i,n,r,s,a,o,l,h){var u;u=i instanceof Object||i instanceof createjs.PlayPropsConfig?createjs.PlayPropsConfig.create(i):createjs.PlayPropsConfig.create({interrupt:i,delay:n,offset:r,loop:s,volume:a,pan:o,startTime:l,duration:h});var c=e.createInstance(t,u.startTime,u.duration);return e._playInstance(c,u)||c._playFailed(),c},e.createInstance=function(t,n,r){if(!e.initializeDefaultPlugins())return new createjs.DefaultSoundInstance(t,n,r);var s=e._defaultPlayPropsHash[t];t=e._getSrcById(t);var a=e._parsePath(t.src),o=null;return null!=a&&null!=a.src?(i.create(a.src),null==n&&(n=t.startTime),o=e.activePlugin.create(a.src,n,r||t.duration),(s=s||e._defaultPlayPropsHash[a.src])&&o.applyPlayProps(s)):o=new createjs.DefaultSoundInstance(t,n,r),o.uniqueId=e._lastID++,o},e.stop=function(){for(var t=this._instances,e=t.length;e--;)t[e].stop()},e.setVolume=function(t){if(null==Number(t))return!1;if(t=Math.max(0,Math.min(1,t)),e._masterVolume=t,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(t))for(var i=this._instances,n=0,r=i.length;n<r;n++)i[n].setMasterVolume(t)},e.getVolume=function(){return this._masterVolume},e.setMute=function(t){if(null==t)return!1;if(this._masterMute=t,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(t))for(var e=this._instances,i=0,n=e.length;i<n;i++)e[i].setMasterMute(t);return!0},e.getMute=function(){return this._masterMute},e.setDefaultPlayProps=function(t,i){t=e._getSrcById(t),e._defaultPlayPropsHash[e._parsePath(t.src).src]=createjs.PlayPropsConfig.create(i)},e.getDefaultPlayProps=function(t){return t=e._getSrcById(t),e._defaultPlayPropsHash[e._parsePath(t.src).src]},e._playInstance=function(t,i){var n=e._defaultPlayPropsHash[t.src]||{};if(null==i.interrupt&&(i.interrupt=n.interrupt||e.defaultInterruptBehavior),null==i.delay&&(i.delay=n.delay||0),null==i.offset&&(i.offset=t.getPosition()),null==i.loop&&(i.loop=t.loop),null==i.volume&&(i.volume=t.volume),null==i.pan&&(i.pan=t.pan),0==i.delay){if(!e._beginPlaying(t,i))return!1}else{var r=setTimeout(function(){e._beginPlaying(t,i)},i.delay);t.delayTimeoutId=r}return this._instances.push(t),!0},e._beginPlaying=function(t,e){if(!i.add(t,e.interrupt))return!1;if(!t._beginPlaying(e)){var n=createjs.indexOf(this._instances,t);return n>-1&&this._instances.splice(n,1),!1}return!0},e._getSrcById=function(t){return e._idHash[t]||{src:t}},e._playFinished=function(t){i.remove(t);var e=createjs.indexOf(this._instances,t);e>-1&&this._instances.splice(e,1)},createjs.Sound=t,i.channels={},i.create=function(t,e){return null==i.get(t)&&(i.channels[t]=new i(t,e),!0)},i.removeSrc=function(t){var e=i.get(t);return null!=e&&(e._removeAll(),delete i.channels[t],!0)},i.removeAll=function(){for(var t in i.channels)i.channels[t]._removeAll();i.channels={}},i.add=function(t,e){var n=i.get(t.src);return null!=n&&n._add(t,e)},i.remove=function(t){var e=i.get(t.src);return null!=e&&(e._remove(t),!0)},i.maxPerChannel=function(){return n.maxDefault},i.get=function(t){return i.channels[t]};var n=i.prototype;n.constructor=i,n.src=null,n.max=null,n.maxDefault=100,n.length=0,n.init=function(t,e){this.src=t,this.max=e||this.maxDefault,-1==this.max&&(this.max=this.maxDefault),this._instances=[]},n._get=function(t){return this._instances[t]},n._add=function(t,e){return!!this._getSlot(e,t)&&(this._instances.push(t),this.length++,!0)},n._remove=function(t){var e=createjs.indexOf(this._instances,t);return-1!=e&&(this._instances.splice(e,1),this.length--,!0)},n._removeAll=function(){for(var t=this.length-1;t>=0;t--)this._instances[t].stop()},n._getSlot=function(e,i){var n,r;if(e!=t.INTERRUPT_NONE&&null==(r=this._get(0)))return!0;for(var s=0,a=this.max;s<a;s++){if(null==(n=this._get(s)))return!0;if(n.playState==t.PLAY_FINISHED||n.playState==t.PLAY_INTERRUPTED||n.playState==t.PLAY_FAILED){r=n;break}e!=t.INTERRUPT_NONE&&((e==t.INTERRUPT_EARLY&&n.getPosition()<r.getPosition()||e==t.INTERRUPT_LATE&&n.getPosition()>r.getPosition())&&(r=n))}return null!=r&&(r._interrupt(),this._remove(r),!0)},n.toString=function(){return"[Sound SoundChannel]"}}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e,i,n){this.EventDispatcher_constructor(),this.src=t,this.uniqueId=-1,this.playState=null,this.delayTimeoutId=null,this._volume=1,Object.defineProperty(this,"volume",{get:this.getVolume,set:this.setVolume}),this._pan=0,Object.defineProperty(this,"pan",{get:this.getPan,set:this.setPan}),this._startTime=Math.max(0,e||0),Object.defineProperty(this,"startTime",{get:this.getStartTime,set:this.setStartTime}),this._duration=Math.max(0,i||0),Object.defineProperty(this,"duration",{get:this.getDuration,set:this.setDuration}),this._playbackResource=null,Object.defineProperty(this,"playbackResource",{get:this.getPlaybackResource,set:this.setPlaybackResource}),!1!==n&&!0!==n&&this.setPlaybackResource(n),this._position=0,Object.defineProperty(this,"position",{get:this.getPosition,set:this.setPosition}),this._loop=0,Object.defineProperty(this,"loop",{get:this.getLoop,set:this.setLoop}),this._muted=!1,Object.defineProperty(this,"muted",{get:this.getMuted,set:this.setMuted}),this._paused=!1,Object.defineProperty(this,"paused",{get:this.getPaused,set:this.setPaused})},e=createjs.extend(t,createjs.EventDispatcher);e.play=function(t,e,i,n,r,s){var a;return a=t instanceof Object||t instanceof createjs.PlayPropsConfig?createjs.PlayPropsConfig.create(t):createjs.PlayPropsConfig.create({interrupt:t,delay:e,offset:i,loop:n,volume:r,pan:s}),this.playState==createjs.Sound.PLAY_SUCCEEDED?(this.applyPlayProps(a),void(this._paused&&this.setPaused(!1))):(this._cleanUp(),createjs.Sound._playInstance(this,a),this)},e.stop=function(){return this._position=0,this._paused=!1,this._handleStop(),this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,this},e.destroy=function(){this._cleanUp(),this.src=null,this.playbackResource=null,this.removeAllEventListeners()},e.applyPlayProps=function(t){return null!=t.offset&&this.setPosition(t.offset),null!=t.loop&&this.setLoop(t.loop),null!=t.volume&&this.setVolume(t.volume),null!=t.pan&&this.setPan(t.pan),null!=t.startTime&&(this.setStartTime(t.startTime),this.setDuration(t.duration)),this},e.toString=function(){return"[AbstractSoundInstance]"},e.getPaused=function(){return this._paused},e.setPaused=function(t){if(!(!0!==t&&!1!==t||this._paused==t||1==t&&this.playState!=createjs.Sound.PLAY_SUCCEEDED))return this._paused=t,t?this._pause():this._resume(),clearTimeout(this.delayTimeoutId),this},e.setVolume=function(t){return t==this._volume?this:(this._volume=Math.max(0,Math.min(1,t)),this._muted||this._updateVolume(),this)},e.getVolume=function(){return this._volume},e.setMuted=function(t){if(!0===t||!1===t)return this._muted=t,this._updateVolume(),this},e.getMuted=function(){return this._muted},e.setPan=function(t){return t==this._pan?this:(this._pan=Math.max(-1,Math.min(1,t)),this._updatePan(),this)},e.getPan=function(){return this._pan},e.getPosition=function(){return this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED||(this._position=this._calculateCurrentPosition()),this._position},e.setPosition=function(t){return this._position=Math.max(0,t),this.playState==createjs.Sound.PLAY_SUCCEEDED&&this._updatePosition(),this},e.getStartTime=function(){return this._startTime},e.setStartTime=function(t){return t==this._startTime?this:(this._startTime=Math.max(0,t||0),this._updateStartTime(),this)},e.getDuration=function(){return this._duration},e.setDuration=function(t){return t==this._duration?this:(this._duration=Math.max(0,t||0),this._updateDuration(),this)},e.setPlaybackResource=function(t){return this._playbackResource=t,0==this._duration&&this._setDurationFromSource(),this},e.getPlaybackResource=function(){return this._playbackResource},e.getLoop=function(){return this._loop},e.setLoop=function(t){null!=this._playbackResource&&(0!=this._loop&&0==t?this._removeLooping(t):0==this._loop&&0!=t&&this._addLooping(t)),this._loop=t},e._sendEvent=function(t){var e=new createjs.Event(t);this.dispatchEvent(e)},e._cleanUp=function(){clearTimeout(this.delayTimeoutId),this._handleCleanUp(),this._paused=!1,createjs.Sound._playFinished(this)},e._interrupt=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_INTERRUPTED,this._sendEvent("interrupted")},e._beginPlaying=function(t){return this.setPosition(t.offset),this.setLoop(t.loop),this.setVolume(t.volume),this.setPan(t.pan),null!=t.startTime&&(this.setStartTime(t.startTime),this.setDuration(t.duration)),null!=this._playbackResource&&this._position<this._duration?(this._paused=!1,this._handleSoundReady(),this.playState=createjs.Sound.PLAY_SUCCEEDED,this._sendEvent("succeeded"),!0):(this._playFailed(),!1)},e._playFailed=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_FAILED,this._sendEvent("failed")},e._handleSoundComplete=function(t){if(this._position=0,0!=this._loop)return this._loop--,this._handleLoop(),void this._sendEvent("loop");this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,this._sendEvent("complete")},e._handleSoundReady=function(){},e._updateVolume=function(){},e._updatePan=function(){},e._updateStartTime=function(){},e._updateDuration=function(){},e._setDurationFromSource=function(){},e._calculateCurrentPosition=function(){},e._updatePosition=function(){},e._removeLooping=function(t){},e._addLooping=function(t){},e._pause=function(){},e._resume=function(){},e._handleStop=function(){},e._handleCleanUp=function(){},e._handleLoop=function(){},createjs.AbstractSoundInstance=createjs.promote(t,"EventDispatcher"),createjs.DefaultSoundInstance=createjs.AbstractSoundInstance}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(){this._capabilities=null,this._loaders={},this._audioSources={},this._soundInstances={},this._volume=1,this._loaderClass,this._soundInstanceClass},e=t.prototype;t._capabilities=null,t.isSupported=function(){return!0},e.register=function(t){var e=this._loaders[t.src];return e&&!e.canceled?this._loaders[t.src]:(this._audioSources[t.src]=!0,this._soundInstances[t.src]=[],(e=new this._loaderClass(t)).on("complete",this._handlePreloadComplete,this),this._loaders[t.src]=e,e)},e.preload=function(t){t.on("error",this._handlePreloadError,this),t.load()},e.isPreloadStarted=function(t){return null!=this._audioSources[t]},e.isPreloadComplete=function(t){return!(null==this._audioSources[t]||1==this._audioSources[t])},e.removeSound=function(t){if(this._soundInstances[t]){for(var e=this._soundInstances[t].length;e--;){this._soundInstances[t][e].destroy()}delete this._soundInstances[t],delete this._audioSources[t],this._loaders[t]&&this._loaders[t].destroy(),delete this._loaders[t]}},e.removeAllSounds=function(){for(var t in this._audioSources)this.removeSound(t)},e.create=function(t,e,i){this.isPreloadStarted(t)||this.preload(this.register(t));var n=new this._soundInstanceClass(t,e,i,this._audioSources[t]);return this._soundInstances[t].push(n),n},e.setVolume=function(t){return this._volume=t,this._updateVolume(),!0},e.getVolume=function(){return this._volume},e.setMute=function(t){return this._updateVolume(),!0},e.toString=function(){return"[AbstractPlugin]"},e._handlePreloadComplete=function(t){var e=t.target.getItem().src;this._audioSources[e]=t.result;for(var i=0,n=this._soundInstances[e].length;i<n;i++){this._soundInstances[e][i].setPlaybackResource(this._audioSources[e])}},e._handlePreloadError=function(t){},e._updateVolume=function(){},createjs.AbstractPlugin=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.SOUND)}var e=createjs.extend(t,createjs.AbstractLoader);t.context=null,e.toString=function(){return"[WebAudioLoader]"},e._createRequest=function(){this._request=new createjs.XHRRequest(this._item,!1),this._request.setResponseType("arraybuffer")},e._sendComplete=function(e){t.context.decodeAudioData(this._rawResult,createjs.proxy(this._handleAudioDecoded,this),createjs.proxy(this._sendError,this))},e._handleAudioDecoded=function(t){this._result=t,this.AbstractLoader__sendComplete()},createjs.WebAudioLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,n,r){this.AbstractSoundInstance_constructor(t,e,n,r),this.gainNode=i.context.createGain(),this.panNode=i.context.createPanner(),this.panNode.panningModel=i._panningModel,this.panNode.connect(this.gainNode),this._updatePan(),this.sourceNode=null,this._soundCompleteTimeout=null,this._sourceNodeNext=null,this._playbackStartTime=0,this._endedHandler=createjs.proxy(this._handleSoundComplete,this)}var e=createjs.extend(t,createjs.AbstractSoundInstance),i=t;i.context=null,i._scratchBuffer=null,i.destinationNode=null,i._panningModel="equalpower",e.destroy=function(){this.AbstractSoundInstance_destroy(),this.panNode.disconnect(0),this.panNode=null,this.gainNode.disconnect(0),this.gainNode=null},e.toString=function(){return"[WebAudioSoundInstance]"},e._updatePan=function(){this.panNode.setPosition(this._pan,0,-.5)},e._removeLooping=function(t){this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)},e._addLooping=function(t){this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},e._setDurationFromSource=function(){this._duration=1e3*this.playbackResource.duration},e._handleCleanUp=function(){this.sourceNode&&this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout),this._playbackStartTime=0},e._cleanUpAudioNode=function(t){if(t){t.stop(0),t.disconnect(0);try{t.buffer=i._scratchBuffer}catch(t){}t=null}return t},e._handleSoundReady=function(t){this.gainNode.connect(i.destinationNode);var e=.001*this._duration,n=.001*this._position;n>e&&(n=e),this.sourceNode=this._createAndPlayAudioNode(i.context.currentTime-e,n),this._playbackStartTime=this.sourceNode.startTime-n,this._soundCompleteTimeout=setTimeout(this._endedHandler,1e3*(e-n)),0!=this._loop&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},e._createAndPlayAudioNode=function(t,e){var n=i.context.createBufferSource();n.buffer=this.playbackResource,n.connect(this.panNode);var r=.001*this._duration;return n.startTime=Math.max(0,t+r),n.start(n.startTime,Math.max(0,e)+.001*this._startTime,r-Math.max(0,e)),n},e._pause=function(){this._position=1e3*(i.context.currentTime-this._playbackStartTime),this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout)},e._resume=function(){this._handleSoundReady()},e._updateVolume=function(){var t=this._muted?0:this._volume;t!=this.gainNode.gain.value&&(this.gainNode.gain.value=t)},e._calculateCurrentPosition=function(){return 1e3*(i.context.currentTime-this._playbackStartTime)},e._updatePosition=function(){this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),clearTimeout(this._soundCompleteTimeout),this._paused||this._handleSoundReady()},e._handleLoop=function(){this._cleanUpAudioNode(this.sourceNode),this.sourceNode=this._sourceNodeNext,this._playbackStartTime=this.sourceNode.startTime,this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0),this._soundCompleteTimeout=setTimeout(this._endedHandler,this._duration)},e._updateDuration=function(){this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._pause(),this._resume())},createjs.WebAudioSoundInstance=createjs.promote(t,"AbstractSoundInstance")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this.AbstractPlugin_constructor(),this._panningModel=i._panningModel,this.context=i.context,this.dynamicsCompressorNode=this.context.createDynamicsCompressor(),this.dynamicsCompressorNode.connect(this.context.destination),this.gainNode=this.context.createGain(),this.gainNode.connect(this.dynamicsCompressorNode),createjs.WebAudioSoundInstance.destinationNode=this.gainNode,this._capabilities=i._capabilities,this._loaderClass=createjs.WebAudioLoader,this._soundInstanceClass=createjs.WebAudioSoundInstance,this._addPropsToClasses()}var e=createjs.extend(t,createjs.AbstractPlugin),i=t;i._capabilities=null,i._panningModel="equalpower",i.context=null,i._scratchBuffer=null,i._unlocked=!1,i.isSupported=function(){var t=createjs.BrowserDetect.isIOS||createjs.BrowserDetect.isAndroid||createjs.BrowserDetect.isBlackberry;return!("file:"==location.protocol&&!t&&!this._isFileXHRSupported())&&(i._generateCapabilities(),null!=i.context)},i.playEmptySound=function(){if(null!=i.context){var t=i.context.createBufferSource();t.buffer=i._scratchBuffer,t.connect(i.context.destination),t.start(0,0,0)}},i._isFileXHRSupported=function(){var t=!0,e=new XMLHttpRequest;try{e.open("GET","WebAudioPluginTest.fail",!1)}catch(e){return t=!1}e.onerror=function(){t=!1},e.onload=function(){t=404==this.status||200==this.status||0==this.status&&""!=this.response};try{e.send()}catch(e){t=!1}return t},i._generateCapabilities=function(){if(null==i._capabilities){var t=document.createElement("audio");if(null==t.canPlayType)return null;if(null==i.context)if(window.AudioContext)i.context=new AudioContext;else{if(!window.webkitAudioContext)return null;i.context=new webkitAudioContext}null==i._scratchBuffer&&(i._scratchBuffer=i.context.createBuffer(1,1,22050)),i._compatibilitySetUp(),"ontouchstart"in window&&"running"!=i.context.state&&(i._unlock(),document.addEventListener("mousedown",i._unlock,!0),document.addEventListener("touchend",i._unlock,!0)),i._capabilities={panning:!0,volume:!0,tracks:-1};for(var e=createjs.Sound.SUPPORTED_EXTENSIONS,n=createjs.Sound.EXTENSION_MAP,r=0,s=e.length;r<s;r++){var a=e[r],o=n[a]||a;i._capabilities[a]="no"!=t.canPlayType("audio/"+a)&&""!=t.canPlayType("audio/"+a)||"no"!=t.canPlayType("audio/"+o)&&""!=t.canPlayType("audio/"+o)}i.context.destination.numberOfChannels<2&&(i._capabilities.panning=!1)}},i._compatibilitySetUp=function(){if(i._panningModel="equalpower",!i.context.createGain){i.context.createGain=i.context.createGainNode;var t=i.context.createBufferSource();t.__proto__.start=t.__proto__.noteGrainOn,t.__proto__.stop=t.__proto__.noteOff,i._panningModel=0}},i._unlock=function(){i._unlocked||(i.playEmptySound(),"running"==i.context.state&&(document.removeEventListener("mousedown",i._unlock,!0),document.removeEventListener("touchend",i._unlock,!0),i._unlocked=!0))},e.toString=function(){return"[WebAudioPlugin]"},e._addPropsToClasses=function(){var t=this._soundInstanceClass;t.context=this.context,t._scratchBuffer=i._scratchBuffer,t.destinationNode=this.gainNode,t._panningModel=this._panningModel,this._loaderClass.context=this.context},e._updateVolume=function(){var t=createjs.Sound._masterMute?0:this._volume;t!=this.gainNode.gain.value&&(this.gainNode.gain.value=t)},createjs.WebAudioPlugin=createjs.promote(t,"AbstractPlugin")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"HTMLAudioTagPool cannot be instantiated"}var e=t;function i(t){this._tags=[]}e._tags={},e._tagPool=new i,e._tagUsed={},e.get=function(t){var i=e._tags[t];return null==i?(i=e._tags[t]=e._tagPool.get()).src=t:e._tagUsed[t]?(i=e._tagPool.get()).src=t:e._tagUsed[t]=!0,i},e.set=function(t,i){i==e._tags[t]?e._tagUsed[t]=!1:e._tagPool.set(i)},e.remove=function(t){var i=e._tags[t];return null!=i&&(e._tagPool.set(i),delete e._tags[t],delete e._tagUsed[t],!0)},e.getDuration=function(t){var i=e._tags[t];return null!=i&&i.duration?1e3*i.duration:0},createjs.HTMLAudioTagPool=t;var n=i.prototype;n.constructor=i,n.get=function(){var t;return null==(t=0==this._tags.length?this._createTag():this._tags.pop()).parentNode&&document.body.appendChild(t),t},n.set=function(t){-1==createjs.indexOf(this._tags,t)&&(this._tags.src=null,this._tags.push(t))},n.toString=function(){return"[TagPool]"},n._createTag=function(){var t=document.createElement("audio");return t.autoplay=!1,t.preload="none",t}}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i,n){this.AbstractSoundInstance_constructor(t,e,i,n),this._audioSpriteStopTime=null,this._delayTimeoutId=null,this._endedHandler=createjs.proxy(this._handleSoundComplete,this),this._readyHandler=createjs.proxy(this._handleTagReady,this),this._stalledHandler=createjs.proxy(this._playFailed,this),this._audioSpriteEndHandler=createjs.proxy(this._handleAudioSpriteLoop,this),this._loopHandler=createjs.proxy(this._handleSoundComplete,this),i?this._audioSpriteStopTime=.001*(e+i):this._duration=createjs.HTMLAudioTagPool.getDuration(this.src)}var e=createjs.extend(t,createjs.AbstractSoundInstance);e.setMasterVolume=function(t){this._updateVolume()},e.setMasterMute=function(t){this._updateVolume()},e.toString=function(){return"[HTMLAudioSoundInstance]"},e._removeLooping=function(){null!=this._playbackResource&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},e._addLooping=function(){null==this._playbackResource||this._audioSpriteStopTime||(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)},e._handleCleanUp=function(){var t=this._playbackResource;if(null!=t){t.pause(),t.loop=!1,t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1);try{t.currentTime=this._startTime}catch(t){}createjs.HTMLAudioTagPool.set(this.src,t),this._playbackResource=null}},e._beginPlaying=function(t){return this._playbackResource=createjs.HTMLAudioTagPool.get(this.src),this.AbstractSoundInstance__beginPlaying(t)},e._handleSoundReady=function(t){if(4!==this._playbackResource.readyState){var e=this._playbackResource;return e.addEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),e.addEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),e.preload="auto",void e.load()}this._updateVolume(),this._playbackResource.currentTime=.001*(this._startTime+this._position),this._audioSpriteStopTime?this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1):(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),0!=this._loop&&(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)),this._playbackResource.play()},e._handleTagReady=function(t){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),this._handleSoundReady()},e._pause=function(){this._playbackResource.pause()},e._resume=function(){this._playbackResource.play()},e._updateVolume=function(){if(null!=this._playbackResource){var t=this._muted||createjs.Sound._masterMute?0:this._volume*createjs.Sound._masterVolume;t!=this._playbackResource.volume&&(this._playbackResource.volume=t)}},e._calculateCurrentPosition=function(){return 1e3*this._playbackResource.currentTime-this._startTime},e._updatePosition=function(){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1);try{this._playbackResource.currentTime=.001*(this._position+this._startTime)}catch(t){this._handleSetPositionSeek(null)}},e._handleSetPositionSeek=function(t){null!=this._playbackResource&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},e._handleAudioSpriteLoop=function(t){this._playbackResource.currentTime<=this._audioSpriteStopTime||(this._playbackResource.pause(),0==this._loop?this._handleSoundComplete(null):(this._position=0,this._loop--,this._playbackResource.currentTime=.001*this._startTime,this._paused||this._playbackResource.play(),this._sendEvent("loop")))},e._handleLoop=function(t){0==this._loop&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},e._updateStartTime=function(){this._audioSpriteStopTime=.001*(this._startTime+this._duration),this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},e._updateDuration=function(){this._audioSpriteStopTime=.001*(this._startTime+this._duration),this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},e._setDurationFromSource=function(){this._duration=createjs.HTMLAudioTagPool.getDuration(this.src),this._playbackResource=null},createjs.HTMLAudioSoundInstance=createjs.promote(t,"AbstractSoundInstance")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this.AbstractPlugin_constructor(),this.defaultNumChannels=2,this._capabilities=i._capabilities,this._loaderClass=createjs.SoundLoader,this._soundInstanceClass=createjs.HTMLAudioSoundInstance}var e=createjs.extend(t,createjs.AbstractPlugin),i=t;i.MAX_INSTANCES=30,i._AUDIO_READY="canplaythrough",i._AUDIO_ENDED="ended",i._AUDIO_SEEKED="seeked",i._AUDIO_STALLED="stalled",i._TIME_UPDATE="timeupdate",i._capabilities=null,i.isSupported=function(){return i._generateCapabilities(),null!=i._capabilities},i._generateCapabilities=function(){if(null==i._capabilities){var t=document.createElement("audio");if(null==t.canPlayType)return null;i._capabilities={panning:!1,volume:!0,tracks:-1};for(var e=createjs.Sound.SUPPORTED_EXTENSIONS,n=createjs.Sound.EXTENSION_MAP,r=0,s=e.length;r<s;r++){var a=e[r],o=n[a]||a;i._capabilities[a]="no"!=t.canPlayType("audio/"+a)&&""!=t.canPlayType("audio/"+a)||"no"!=t.canPlayType("audio/"+o)&&""!=t.canPlayType("audio/"+o)}}},e.register=function(t){var e=createjs.HTMLAudioTagPool.get(t.src),i=this.AbstractPlugin_register(t);return i.setTag(e),i},e.removeSound=function(t){this.AbstractPlugin_removeSound(t),createjs.HTMLAudioTagPool.remove(t)},e.create=function(t,e,i){var n=this.AbstractPlugin_create(t,e,i);return n.setPlaybackResource(null),n},e.toString=function(){return"[HTMLAudioPlugin]"},e.setVolume=e.getVolume=e.setMute=null,createjs.HTMLAudioPlugin=createjs.promote(t,"AbstractPlugin")}(),function(){var t=!1,e=function(t){return t instanceof e?t:this instanceof e?void(this.EXIFwrapped=t):new e(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports.EXIF=e):this.EXIF=e;var i=e.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},n=e.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},r=e.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},s=e.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function a(t){return!!t.exifdata}function o(e,i){function n(n){var r=l(n),s=function(e){var i=new DataView(e);t&&console.log("Got file of length "+e.byteLength);if(255!=i.getUint8(0)||216!=i.getUint8(1))return t&&console.log("Not a valid JPEG"),!1;var n=2,r=e.byteLength;for(;n<r;){if(h=n,56===(l=i).getUint8(h)&&66===l.getUint8(h+1)&&73===l.getUint8(h+2)&&77===l.getUint8(h+3)&&4===l.getUint8(h+4)&&4===l.getUint8(h+5)){var s=i.getUint8(n+7);s%2!=0&&(s+=1),0===s&&(s=4);var a=n+8+s,o=i.getUint16(n+6+s);return u(e,a,o)}n++}var l,h}(n);e.exifdata=r||{},e.iptcdata=s||{},i&&i.call(e)}var r,s,a;if(e.src)if(/^data\:/i.test(e.src))n(function(t,e){e=e||t.match(/^data\:([^\;]+)\;base64,/im)[1]||"",t=t.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var i=atob(t),n=i.length,r=new ArrayBuffer(n),s=new Uint8Array(r),a=0;a<n;a++)s[a]=i.charCodeAt(a);return r}(e.src));else if(/^blob\:/i.test(e.src)){(h=new FileReader).onload=function(t){n(t.target.result)},r=e.src,s=function(t){h.readAsArrayBuffer(t)},(a=new XMLHttpRequest).open("GET",r,!0),a.responseType="blob",a.onload=function(t){200!=this.status&&0!==this.status||s(this.response)},a.send()}else{var o=new XMLHttpRequest;o.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";n(o.response),o=null},o.open("GET",e.src,!0),o.responseType="arraybuffer",o.send(null)}else if(window.FileReader&&(e instanceof window.Blob||e instanceof window.File)){var h;(h=new FileReader).onload=function(e){t&&console.log("Got file of length "+e.target.result.byteLength),n(e.target.result)},h.readAsArrayBuffer(e)}}function l(e){var i=new DataView(e);if(t&&console.log("Got file of length "+e.byteLength),255!=i.getUint8(0)||216!=i.getUint8(1))return t&&console.log("Not a valid JPEG"),!1;for(var n,r=2,s=e.byteLength;r<s;){if(255!=i.getUint8(r))return t&&console.log("Not a valid marker at offset "+r+", found: "+i.getUint8(r)),!1;if(n=i.getUint8(r+1),t&&console.log(n),225==n)return t&&console.log("Found 0xFFE1 marker"),p(i,r+4,i.getUint16(r+2));r+=2+i.getUint16(r+2)}}var h={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function u(t,e,i){for(var n,r,s,a,o=new DataView(t),l={},u=e;u<e+i;)28===o.getUint8(u)&&2===o.getUint8(u+1)&&(a=o.getUint8(u+2))in h&&((s=o.getInt16(u+3))+5,r=h[a],n=f(o,u+5,s),l.hasOwnProperty(r)?l[r]instanceof Array?l[r].push(n):l[r]=[l[r],n]:l[r]=n),u++;return l}function c(e,i,n,r,s){var a,o,l,h=e.getUint16(n,!s),u={};for(l=0;l<h;l++)a=n+12*l+2,!(o=r[e.getUint16(a,!s)])&&t&&console.log("Unknown tag: "+e.getUint16(a,!s)),u[o]=d(e,a,i,n,s);return u}function d(t,e,i,n,r){var s,a,o,l,h,u,c=t.getUint16(e+2,!r),d=t.getUint32(e+4,!r),p=t.getUint32(e+8,!r)+i;switch(c){case 1:case 7:if(1==d)return t.getUint8(e+8,!r);for(s=d>4?p:e+8,a=[],l=0;l<d;l++)a[l]=t.getUint8(s+l);return a;case 2:return f(t,s=d>4?p:e+8,d-1);case 3:if(1==d)return t.getUint16(e+8,!r);for(s=d>2?p:e+8,a=[],l=0;l<d;l++)a[l]=t.getUint16(s+2*l,!r);return a;case 4:if(1==d)return t.getUint32(e+8,!r);for(a=[],l=0;l<d;l++)a[l]=t.getUint32(p+4*l,!r);return a;case 5:if(1==d)return h=t.getUint32(p,!r),u=t.getUint32(p+4,!r),(o=new Number(h/u)).numerator=h,o.denominator=u,o;for(a=[],l=0;l<d;l++)h=t.getUint32(p+8*l,!r),u=t.getUint32(p+4+8*l,!r),a[l]=new Number(h/u),a[l].numerator=h,a[l].denominator=u;return a;case 9:if(1==d)return t.getInt32(e+8,!r);for(a=[],l=0;l<d;l++)a[l]=t.getInt32(p+4*l,!r);return a;case 10:if(1==d)return t.getInt32(p,!r)/t.getInt32(p+4,!r);for(a=[],l=0;l<d;l++)a[l]=t.getInt32(p+8*l,!r)/t.getInt32(p+4+8*l,!r);return a}}function f(t,e,i){for(var n="",r=e;r<e+i;r++)n+=String.fromCharCode(t.getUint8(r));return n}function p(e,a){if("Exif"!=f(e,a,4))return t&&console.log("Not valid EXIF data! "+f(e,a,4)),!1;var o,l,h,u,d,p=a+6;if(18761==e.getUint16(p))o=!1;else{if(19789!=e.getUint16(p))return t&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;o=!0}if(42!=e.getUint16(p+2,!o))return t&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var _=e.getUint32(p+4,!o);if(_<8)return t&&console.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(p+4,!o)),!1;if((l=c(e,p,p+_,n,o)).ExifIFDPointer)for(h in u=c(e,p,p+l.ExifIFDPointer,i,o)){switch(h){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":u[h]=s[h][u[h]];break;case"ExifVersion":case"FlashpixVersion":u[h]=String.fromCharCode(u[h][0],u[h][1],u[h][2],u[h][3]);break;case"ComponentsConfiguration":u[h]=s.Components[u[h][0]]+s.Components[u[h][1]]+s.Components[u[h][2]]+s.Components[u[h][3]]}l[h]=u[h]}if(l.GPSInfoIFDPointer)for(h in d=c(e,p,p+l.GPSInfoIFDPointer,r,o)){switch(h){case"GPSVersionID":d[h]=d[h][0]+"."+d[h][1]+"."+d[h][2]+"."+d[h][3]}l[h]=d[h]}return l}e.getData=function(t,e){return!((t instanceof Image||t instanceof HTMLImageElement)&&!t.complete)&&(a(t)?e&&e.call(t):o(t,e),!0)},e.getTag=function(t,e){if(a(t))return t.exifdata[e]},e.getAllTags=function(t){if(!a(t))return{};var e,i=t.exifdata,n={};for(e in i)i.hasOwnProperty(e)&&(n[e]=i[e]);return n},e.pretty=function(t){if(!a(t))return"";var e,i=t.exifdata,n="";for(e in i)i.hasOwnProperty(e)&&("object"==typeof i[e]?i[e]instanceof Number?n+=e+" : "+i[e]+" ["+i[e].numerator+"/"+i[e].denominator+"]\r\n":n+=e+" : ["+i[e].length+" values]\r\n":n+=e+" : "+i[e]+"\r\n");return n},e.readFromBinaryFile=function(t){return l(t)},"function"==typeof define&&define.amd&&define("exif-js",[],function(){return e})}.call(this),!window.egret){var egret_strings={4001:"Abstract class can not be instantiated!",4002:"Unnamed data!",4003:"Nonsupport version!"},Event=function(t,e,i,n){this.type=t,this.bubbles=e||!1,this.cancelable=i||!1,this.data=n},EventDispatcher=function(t){this._listenerDict={}};EventDispatcher.prototype={constructor:EventDispatcher,addEventListener:function(t,e,i,n,r,s){this._listenerDict[t]||(this._listenerDict[t]=[]),this._listenerDict[t].push({listener:e,thisObject:i,useCapture:n,priority:r,once:s})},once:function(t,e,i,n,r){this.addEventListener(t,e,i,n,r,!0)},removeEventListener:function(t,e,i,n){if(t)if(e){var r=this._listenerDict[t],s=r.indexOf(e);s>-1&&r.splice(s,1)}else this._listenerDict[t]&&(this._listenerDict[t].length=0);else this._listenerDict={}},hasEventListener:function(t){return this._listenerDict[t]},dispatchEvent:function(t){if(t&&t.type&&this._listenerDict[t.type])for(var e=this._listenerDict[t.type],i=e.slice(),n=0;n<i.length;n++){var r=i[n];if(r.dispatchOnce){var s=e.indexOf(r);s>-1&&e.splice(s,1)}r.listener&&r.listener.call(r.thisObject||this,t)}},willTrigger:function(t){return this.hasEventListener(t)}},window.egret={getString:function(t){return egret_strings[t]||"no string code"},Event:Event,EventDispatcher:EventDispatcher,registerClass:function(t,e,i){var n=t.prototype;n.__class__=e;var r=[e];i&&(r=r.concat(i));var s=n.__types__;if(n.__types__)for(var a=s.length,o=0;o<a;o++){var l=s[o];-1==r.indexOf(l)&&r.push(l)}n.__types__=r}}}window.__extends=window.__extends||function(t,e,i){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function r(){this.constructor=t}if(r.prototype=e.prototype,t.prototype=new r,i)for(var s in i)t.prototype[s]=i[s]},window.__define=window.__define||function(t,e,i,n){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:i,set:n})},function(t){var e=function(){function t(){}__define,t.prototype;return t.DATA_VERSION="4.0",t.PARENT_COORDINATE_DATA_VERSION="3.0",t.VERSION="4.3.5",t}();t.DragonBones=e,egret.registerClass(e,"dragonBones.DragonBones")}(dragonBones||(dragonBones={})),function(t){var e=function(){function e(t){this._animationStateCount=0,this._armature=t,this._animationList=[],this._animationStateList=[],this._timeScale=1,this._isPlaying=!1,this.tweenEnabled=!0}var i=__define,n=e.prototype;return n.dispose=function(){this._armature&&(this._resetAnimationStateList(),this._animationList.length=0,this._armature=null,this._animationDataList=null,this._animationList=null,this._animationStateList=null)},n._resetAnimationStateList=function(){for(var e,i=this._animationStateList.length;i--;)(e=this._animationStateList[i])._resetTimelineStateList(),t.AnimationState._returnObject(e);this._animationStateList.length=0},n.gotoAndPlay=function(i,n,r,s,a,o,l,h,u){if(void 0===n&&(n=-1),void 0===r&&(r=-1),void 0===s&&(s=NaN),void 0===a&&(a=0),void 0===o&&(o=null),void 0===l&&(l=e.SAME_LAYER_AND_GROUP),void 0===h&&(h=!0),void 0===u&&(u=!0),!this._animationDataList)return null;for(var c,d=this._animationDataList.length;d--;)if(this._animationDataList[d].name==i){c=this._animationDataList[d];break}if(!c)return null;var f,p,_=0==this._isPlaying;switch(this._isPlaying=!0,this._isFading=!0,n=n<0?c.fadeTime<0?.3:c.fadeTime:n,f=r<0?c.scale<0?1:c.scale:1e3*r/c.duration,s=isNaN(s)?c.playTimes:s,l){case e.NONE:break;case e.SAME_LAYER:for(d=this._animationStateList.length;d--;)(p=this._animationStateList[d]).layer==a&&p.fadeOut(n,h);break;case e.SAME_GROUP:for(d=this._animationStateList.length;d--;)(p=this._animationStateList[d]).group==o&&p.fadeOut(n,h);break;case e.ALL:for(d=this._animationStateList.length;d--;)(p=this._animationStateList[d]).fadeOut(n,h);break;case e.SAME_LAYER_AND_GROUP:default:for(d=this._animationStateList.length;d--;)(p=this._animationStateList[d]).layer==a&&p.group==o&&p.fadeOut(n,h)}this._lastAnimationState=t.AnimationState._borrowObject(),this._lastAnimationState._layer=a,this._lastAnimationState._group=o,this._lastAnimationState.autoTween=this.tweenEnabled,this._lastAnimationState._fadeIn(this._armature,c,n,1/f,s,u),this.addState(this._lastAnimationState);var m=this._armature.getSlots(!1);for(d=m.length;d--;){var g=m[d];g.childArmature&&g.childArmature.animation.gotoAndPlay(i,n)}return _&&this._armature.advanceTime(0),this._lastAnimationState},n.gotoAndStop=function(t,i,n,r,s,a,o,l){void 0===n&&(n=-1),void 0===r&&(r=0),void 0===s&&(s=-1),void 0===a&&(a=0),void 0===o&&(o=null),void 0===l&&(l=e.ALL);var h=this.getState(t,a);return h||(h=this.gotoAndPlay(t,r,s,NaN,a,o,l)),n>=0?h.setCurrentTime(h.totalTime*n):h.setCurrentTime(i),h.stop(),h},n.play=function(){this._animationDataList&&0!=this._animationDataList.length&&(this._lastAnimationState?this._isPlaying?this.gotoAndPlay(this._lastAnimationState.name):this._isPlaying=!0:this.gotoAndPlay(this._animationDataList[0].name))},n.stop=function(){this._isPlaying=!1},n.getState=function(t,e){void 0===e&&(e=0);for(var i=this._animationStateList.length;i--;){var n=this._animationStateList[i];if(n.name==t&&n.layer==e)return n}return null},n.hasAnimation=function(t){for(var e=this._animationDataList.length;e--;)if(this._animationDataList[e].name==t)return!0;return!1},n._advanceTime=function(t){if(this._isPlaying){var e=!1;t*=this._timeScale;for(var i=this._animationStateList.length;i--;){var n=this._animationStateList[i];n._advanceTime(t)?this.removeState(n):1!=n.fadeState&&(e=!0)}this._isFading=e}},n._updateAnimationStates=function(){for(var t=this._animationStateList.length;t--;)this._animationStateList[t]._updateTimelineStates()},n.addState=function(t){this._animationStateList.indexOf(t)<0&&(this._animationStateList.unshift(t),this._animationStateCount=this._animationStateList.length)},n.removeState=function(e){var i=this._animationStateList.indexOf(e);i>=0&&(this._animationStateList.splice(i,1),t.AnimationState._returnObject(e),this._lastAnimationState==e&&(this._animationStateList.length>0?this._lastAnimationState=this._animationStateList[0]:this._lastAnimationState=null),this._animationStateCount=this._animationStateList.length)},i(n,"movementList",function(){return this._animationList}),i(n,"movementID",function(){return this.lastAnimationName}),i(n,"lastAnimationState",function(){return this._lastAnimationState}),i(n,"lastAnimationName",function(){return this._lastAnimationState?this._lastAnimationState.name:null}),i(n,"animationList",function(){return this._animationList}),i(n,"isPlaying",function(){return this._isPlaying&&!this.isComplete}),i(n,"isComplete",function(){if(this._lastAnimationState){if(!this._lastAnimationState.isComplete)return!1;for(var t=this._animationStateList.length;t--;)if(!this._animationStateList[t].isComplete)return!1;return!0}return!0}),i(n,"timeScale",function(){return this._timeScale},function(t){(isNaN(t)||t<0)&&(t=1),this._timeScale=t}),i(n,"animationDataList",function(){return this._animationDataList},function(t){this._animationDataList=t,this._animationList.length=0;for(var e=0,i=this._animationDataList.length;e<i;e++){var n=this._animationDataList[e];this._animationList[this._animationList.length]=n.name}}),e.NONE="none",e.SAME_LAYER="sameLayer",e.SAME_GROUP="sameGroup",e.SAME_LAYER_AND_GROUP="sameLayerAndGroup",e.ALL="all",e}();t.Animation=e,egret.registerClass(e,"dragonBones.Animation")}(dragonBones||(dragonBones={})),function(t){var e=function(){function e(){this._layer=0,this._currentFrameIndex=0,this._currentFramePosition=0,this._currentFrameDuration=0,this._currentPlayTimes=0,this._totalTime=0,this._currentTime=0,this._lastTime=0,this._fadeState=0,this._playTimes=0,this._timelineStateList=[],this._slotTimelineStateList=[],this._boneMasks=[]}var i=__define,n=e.prototype;return e._borrowObject=function(){return 0==e._pool.length?new e:e._pool.pop()},e._returnObject=function(t){t.clear(),e._pool.indexOf(t)<0&&(e._pool[e._pool.length]=t)},e._clear=function(){for(var i=e._pool.length;i--;)e._pool[i].clear();e._pool.length=0,t.TimelineState._clear()},n.clear=function(){this._resetTimelineStateList(),this._boneMasks.length=0,this._armature=null,this._clip=null},n._resetTimelineStateList=function(){for(var e=this._timelineStateList.length;e--;)t.TimelineState._returnObject(this._timelineStateList[e]);for(this._timelineStateList.length=0,e=this._slotTimelineStateList.length;e--;)t.SlotTimelineState._returnObject(this._slotTimelineStateList[e]);this._slotTimelineStateList.length=0},n.containsBoneMask=function(t){return 0==this._boneMasks.length||this._boneMasks.indexOf(t)>=0},n.addBoneMask=function(t,e){if(void 0===e&&(e=!0),this.addBoneToBoneMask(t),e){var i=this._armature.getBone(t);if(i)for(var n=this._armature.getBones(!1),r=n.length;r--;){var s=n[r];i.contains(s)&&this.addBoneToBoneMask(s.name)}}return this._updateTimelineStates(),this},n.removeBoneMask=function(t,e){if(void 0===e&&(e=!0),this.removeBoneFromBoneMask(t),e){var i=this._armature.getBone(t);if(i)for(var n=this._armature.getBones(!1),r=n.length;r--;){var s=n[r];i.contains(s)&&this.removeBoneFromBoneMask(s.name)}}return this._updateTimelineStates(),this},n.removeAllMixingTransform=function(){return this._boneMasks.length=0,this._updateTimelineStates(),this},n.addBoneToBoneMask=function(t){this._clip.getTimeline(t)&&this._boneMasks.indexOf(t)<0&&this._boneMasks.push(t)},n.removeBoneFromBoneMask=function(t){var e=this._boneMasks.indexOf(t);e>=0&&this._boneMasks.splice(e,1)},n._updateTimelineStates=function(){for(var t,e,i,n=this._timelineStateList.length;n--;)t=this._timelineStateList[n],this._armature.getBone(t.name)||this.removeTimelineState(t);for(n=this._slotTimelineStateList.length;n--;)e=this._slotTimelineStateList[n],this._armature.getSlot(e.name)||this.removeSlotTimelineState(e);if(this._boneMasks.length>0){for(n=this._timelineStateList.length;n--;)t=this._timelineStateList[n],this._boneMasks.indexOf(t.name)<0&&this.removeTimelineState(t);for(n=0,i=this._boneMasks.length;n<i;n++){var r=this._boneMasks[n];this.addTimelineState(r)}}else for(n=0,i=this._clip.timelineList.length;n<i;n++){var s=this._clip.timelineList[n];this.addTimelineState(s.name)}for(n=0,i=this._clip.slotTimelineList.length;n<i;n++){var a=this._clip.slotTimelineList[n];this.addSlotTimelineState(a.name)}},n.addTimelineState=function(e){var i=this._armature.getBone(e);if(i){for(var n=0,r=this._timelineStateList.length;n<r;n++){if(this._timelineStateList[n].name==e)return}var s=t.TimelineState._borrowObject();s._fadeIn(i,this,this._clip.getTimeline(e)),this._timelineStateList.push(s)}},n.removeTimelineState=function(e){var i=this._timelineStateList.indexOf(e);this._timelineStateList.splice(i,1),t.TimelineState._returnObject(e)},n.addSlotTimelineState=function(e){var i=this._armature.getSlot(e);if(i){for(var n=0,r=this._slotTimelineStateList.length;n<r;n++){if(this._slotTimelineStateList[n].name==e)return}var s=t.SlotTimelineState._borrowObject();s._fadeIn(i,this,this._clip.getSlotTimeline(e)),this._slotTimelineStateList.push(s)}},n.removeSlotTimelineState=function(e){var i=this._slotTimelineStateList.indexOf(e);this._slotTimelineStateList.splice(i,1),t.SlotTimelineState._returnObject(e)},n.play=function(){return this._isPlaying=!0,this},n.stop=function(){return this._isPlaying=!1,this},n._fadeIn=function(t,e,i,n,r,s){return this._armature=t,this._clip=e,this._pausePlayheadInFade=s,this._name=this._clip.name,this._totalTime=this._clip.duration,this.autoTween=this._clip.autoTween,this.setTimeScale(n),this.setPlayTimes(r),this._isComplete=!1,this._currentFrameIndex=-1,this._currentPlayTimes=-1,Math.round(this._totalTime*this._clip.frameRate*.001)<2||n==1/0?this._currentTime=this._totalTime:this._currentTime=-1,this._time=0,this._boneMasks.length=0,this._isFadeOut=!1,this._fadeWeight=0,this._fadeTotalWeight=1,this._fadeState=-1,this._fadeCurrentTime=0,this._fadeBeginTime=this._fadeCurrentTime,this._fadeTotalTime=i*this._timeScale,this._isPlaying=!0,this.displayControl=!0,this.lastFrameAutoTween=!0,this.additiveBlending=!1,this.weight=1,this.fadeOutTime=i,this._updateTimelineStates(),this},n.fadeOut=function(t,e){if(!this._armature)return null;if((isNaN(t)||t<0)&&(t=0),this._pausePlayheadInFade=e,this._isFadeOut){if(t>this._fadeTotalTime/this._timeScale-(this._fadeCurrentTime-this._fadeBeginTime))return this}else for(var i=0,n=this._timelineStateList.length;i<n;i++){this._timelineStateList[i]._fadeOut()}return this._isFadeOut=!0,this._fadeTotalWeight=this._fadeWeight,this._fadeState=-1,this._fadeBeginTime=this._fadeCurrentTime,this._fadeTotalTime=this._fadeTotalWeight>=0?t*this._timeScale:0,this.displayControl=!1,this},n._advanceTime=function(t){return t*=this._timeScale,this.advanceFadeTime(t),this._fadeWeight&&this.advanceTimelinesTime(t),this._isFadeOut&&1==this._fadeState},n.advanceFadeTime=function(e){var i,n=!1,r=!1;if(this._fadeBeginTime>=0){var s=this._fadeState;this._fadeCurrentTime+=e<0?-e:e,this._fadeCurrentTime>=this._fadeBeginTime+this._fadeTotalTime?(1!=this._fadeWeight&&0!=this._fadeWeight||(s=1,this._pausePlayheadInFade&&(this._pausePlayheadInFade=!1,this._currentTime=-1)),this._fadeWeight=this._isFadeOut?0:1):this._fadeCurrentTime>=this._fadeBeginTime?(s=0,this._fadeWeight=(this._fadeCurrentTime-this._fadeBeginTime)/this._fadeTotalTime*this._fadeTotalWeight,this._isFadeOut&&(this._fadeWeight=this._fadeTotalWeight-this._fadeWeight)):(s=-1,this._fadeWeight=this._isFadeOut?1:0),this._fadeState!=s&&(-1==this._fadeState&&(n=!0),1==s&&(r=!0),this._fadeState=s)}n&&(this._isFadeOut?this._armature.hasEventListener(t.AnimationEvent.FADE_OUT)&&((i=new t.AnimationEvent(t.AnimationEvent.FADE_OUT)).animationState=this,this._armature._eventList.push(i)):(this.hideBones(),this._armature.hasEventListener(t.AnimationEvent.FADE_IN)&&((i=new t.AnimationEvent(t.AnimationEvent.FADE_IN)).animationState=this,this._armature._eventList.push(i)))),r&&(this._isFadeOut?this._armature.hasEventListener(t.AnimationEvent.FADE_OUT_COMPLETE)&&((i=new t.AnimationEvent(t.AnimationEvent.FADE_OUT_COMPLETE)).animationState=this,this._armature._eventList.push(i)):this._armature.hasEventListener(t.AnimationEvent.FADE_IN_COMPLETE)&&((i=new t.AnimationEvent(t.AnimationEvent.FADE_IN_COMPLETE)).animationState=this,this._armature._eventList.push(i)))},n.advanceTimelinesTime=function(e){this._isPlaying&&!this._pausePlayheadInFade&&(this._time+=e);var i=!1,n=!1,r=!1,s=!1,a=0,o=1e3*this._time;if(0==this._playTimes)s=!1,a=Math.ceil(Math.abs(o)/this._totalTime)||1,(o-=o>=0?Math.floor(o/this._totalTime)*this._totalTime:Math.ceil(o/this._totalTime)*this._totalTime)<0&&(o+=this._totalTime);else{var l=this._playTimes*this._totalTime;o>=l?(o=l,s=!0):o<=-l?(o=-l,s=!0):s=!1,o<0&&(o+=l),a=Math.ceil(o/this._totalTime)||1,o-=o>=0?Math.floor(o/this._totalTime)*this._totalTime:Math.ceil(o/this._totalTime)*this._totalTime,s&&(o=this._totalTime)}this._isComplete=s;var h,u=1e3*this._time/this._totalTime,c=0,d=0;for(c=0,d=this._timelineStateList.length;c<d;c++){var f=this._timelineStateList[c];f._update(u),this._isComplete=f._isComplete&&this._isComplete}for(c=0,d=this._slotTimelineStateList.length;c<d;c++){this._slotTimelineStateList[c]._update(u),this._isComplete=f._isComplete&&this._isComplete}this._currentTime!=o&&(this._currentPlayTimes!=a&&(this._currentPlayTimes>0&&a>1&&(r=!0),this._currentPlayTimes=a),this._currentTime<0&&(i=!0),this._isComplete&&(n=!0),this._lastTime=this._currentTime,this._currentTime=o,this.updateMainTimeline(s)),i&&this._armature.hasEventListener(t.AnimationEvent.START)&&((h=new t.AnimationEvent(t.AnimationEvent.START)).animationState=this,this._armature._eventList.push(h)),n?(this._armature.hasEventListener(t.AnimationEvent.COMPLETE)&&((h=new t.AnimationEvent(t.AnimationEvent.COMPLETE)).animationState=this,this._armature._eventList.push(h)),this.autoFadeOut&&this.fadeOut(this.fadeOutTime,!0)):r&&this._armature.hasEventListener(t.AnimationEvent.LOOP_COMPLETE)&&((h=new t.AnimationEvent(t.AnimationEvent.LOOP_COMPLETE)).animationState=this,this._armature._eventList.push(h))},n.updateMainTimeline=function(t){var e=this._clip.frameList;if(e.length>0){for(var i,n,r=0,s=this._clip.frameList.length;r<s;++r){if(this._currentFrameIndex<0)this._currentFrameIndex=0;else{if(!(this._currentTime<this._currentFramePosition||this._currentTime>=this._currentFramePosition+this._currentFrameDuration||this._currentTime<this._lastTime))break;if(this._currentFrameIndex++,this._lastTime=this._currentTime,this._currentFrameIndex>=e.length){if(t){this._currentFrameIndex--;break}this._currentFrameIndex=0}}n=e[this._currentFrameIndex],i&&this._armature._arriveAtFrame(i,null,this,!0),this._currentFrameDuration=n.duration,this._currentFramePosition=n.position,i=n}n&&this._armature._arriveAtFrame(n,null,this,!1)}},n.hideBones=function(){for(var t=0,e=this._clip.hideTimelineNameMap.length;t<e;t++){var i=this._clip.hideTimelineNameMap[t],n=this._armature.getBone(i);n&&n._hideSlots()}var r;for(t=0,e=this._clip.hideSlotTimelineNameMap.length;t<e;t++){r=this._clip.hideSlotTimelineNameMap[t];var s=this._armature.getSlot(r);s&&s._resetToOrigin()}},n.setAdditiveBlending=function(t){return this.additiveBlending=t,this},n.setAutoFadeOut=function(t,e){return void 0===e&&(e=-1),this.autoFadeOut=t,e>=0&&(this.fadeOutTime=e*this._timeScale),this},n.setWeight=function(t){return(isNaN(t)||t<0)&&(t=1),this.weight=t,this},n.setFrameTween=function(t,e){return this.autoTween=t,this.lastFrameAutoTween=e,this},n.setCurrentTime=function(t){return(t<0||isNaN(t))&&(t=0),this._time=t,this._currentTime=1e3*this._time,this},n.setTimeScale=function(t){return(isNaN(t)||t==1/0)&&(t=1),this._timeScale=t,this},n.setPlayTimes=function(t){return void 0===t&&(t=0),Math.round(.001*this._totalTime*this._clip.frameRate)<2?this._playTimes=t<0?-1:1:this._playTimes=t<0?-t:t,this.autoFadeOut=t<0,this},i(n,"name",function(){return this._name}),i(n,"layer",function(){return this._layer}),i(n,"group",function(){return this._group}),i(n,"clip",function(){return this._clip}),i(n,"isComplete",function(){return this._isComplete}),i(n,"isPlaying",function(){return this._isPlaying&&!this._isComplete}),i(n,"currentPlayTimes",function(){return this._currentPlayTimes<0?0:this._currentPlayTimes}),i(n,"totalTime",function(){return.001*this._totalTime}),i(n,"currentTime",function(){return this._currentTime<0?0:.001*this._currentTime}),i(n,"fadeWeight",function(){return this._fadeWeight}),i(n,"fadeState",function(){return this._fadeState}),i(n,"fadeTotalTime",function(){return this._fadeTotalTime}),i(n,"timeScale",function(){return this._timeScale}),i(n,"playTimes",function(){return this._playTimes}),e._pool=[],e}();t.AnimationState=e,egret.registerClass(e,"dragonBones.AnimationState")}(dragonBones||(dragonBones={})),function(t){var e=function(){function e(){this._totalTime=0,this._currentTime=0,this._currentFrameIndex=0,this._currentFramePosition=0,this._currentFrameDuration=0,this._updateMode=0,this._durationColor=new t.ColorTransform}__define;var i=e.prototype;return e._borrowObject=function(){return 0==e._pool.length?new e:e._pool.pop()},e._returnObject=function(t){e._pool.indexOf(t)<0&&(e._pool[e._pool.length]=t),t.clear()},e._clear=function(){for(var t=e._pool.length;t--;)e._pool[t].clear();e._pool.length=0},i.clear=function(){this._slot&&(this._slot._removeState(this),this._slot=null),this._armature=null,this._animation=null,this._animationState=null,this._timelineData=null},i._fadeIn=function(t,e,i){switch(this._slot=t,this._armature=this._slot.armature,this._animation=this._armature.animation,this._animationState=e,this._timelineData=i,this.name=i.name,this._totalTime=this._timelineData.duration,this._rawAnimationScale=this._animationState.clip.scale,this._isComplete=!1,this._blendEnabled=!1,this._tweenColor=!1,this._currentFrameIndex=-1,this._currentTime=-1,this._tweenEasing=NaN,this._weight=1,this._timelineData.frameList.length){case 0:this._updateMode=0;break;case 1:this._updateMode=1;break;default:this._updateMode=-1}this._slot._addState(this)},i._fadeOut=function(){},i._update=function(t){-1==this._updateMode?this.updateMultipleFrame(t):1==this._updateMode&&(this._updateMode=0,this.updateSingleFrame())},i.updateMultipleFrame=function(t){var e=0;t/=this._timelineData.scale,t+=this._timelineData.offset;var i=this._totalTime*t,n=this._animationState.playTimes;if(0==n)this._isComplete=!1,e=Math.ceil(Math.abs(i)/this._totalTime)||1,(i-=i>=0?Math.floor(i/this._totalTime)*this._totalTime:Math.ceil(i/this._totalTime)*this._totalTime)<0&&(i+=this._totalTime);else{var r=n*this._totalTime;i>=r?(i=r,this._isComplete=!0):i<=-r?(i=-r,this._isComplete=!0):this._isComplete=!1,i<0&&(i+=r),e=Math.ceil(i/this._totalTime)||1,this._isComplete?i=this._totalTime:i-=i>=0?Math.floor(i/this._totalTime)*this._totalTime:Math.ceil(i/this._totalTime)*this._totalTime}if(this._currentTime!=i){this._currentTime=i;for(var s,a,o=this._timelineData.frameList,l=0,h=this._timelineData.frameList.length;l<h;++l){if(this._currentFrameIndex<0)this._currentFrameIndex=0;else{if(!(this._currentTime<this._currentFramePosition||this._currentTime>=this._currentFramePosition+this._currentFrameDuration))break;if(this._currentFrameIndex++,this._currentFrameIndex>=o.length){if(this._isComplete){this._currentFrameIndex--;break}this._currentFrameIndex=0}}a=o[this._currentFrameIndex],s&&this._slot._arriveAtFrame(s,this,this._animationState,!0),this._currentFrameDuration=a.duration,this._currentFramePosition=a.position,s=a}a&&(this._slot._arriveAtFrame(a,this,this._animationState,!1),this._blendEnabled=a.displayIndex>=0,this._blendEnabled?this.updateToNextFrame(e):(this._tweenEasing=NaN,this._tweenColor=!1)),this._blendEnabled&&this.updateTween()}},i.updateToNextFrame=function(t){void 0===t&&(t=0);var e=this._currentFrameIndex+1;e>=this._timelineData.frameList.length&&(e=0);var i=this._timelineData.frameList[this._currentFrameIndex],n=this._timelineData.frameList[e],r=!1;0==e&&(!this._animationState.lastFrameAutoTween||this._animationState.playTimes&&this._animationState.currentPlayTimes>=this._animationState.playTimes&&((this._currentFramePosition+this._currentFrameDuration)/this._totalTime+t-this._timelineData.offset)*this._timelineData.scale>.999999)?(this._tweenEasing=NaN,r=!1):i.displayIndex<0||n.displayIndex<0?(this._tweenEasing=NaN,r=!1):this._animationState.autoTween?(this._tweenEasing=this._animationState.clip.tweenEasing,isNaN(this._tweenEasing)?(this._tweenEasing=i.tweenEasing,this._tweenCurve=i.curve,isNaN(this._tweenEasing)&&null==this._tweenCurve?r=!1:(10==this._tweenEasing&&(this._tweenEasing=0),r=!0)):r=!0):(this._tweenEasing=i.tweenEasing,this._tweenCurve=i.curve,!isNaN(this._tweenEasing)&&10!=this._tweenEasing||null!=this._tweenCurve?r=!0:(this._tweenEasing=NaN,r=!1)),r?i.color&&n.color?(this._durationColor.alphaOffset=n.color.alphaOffset-i.color.alphaOffset,this._durationColor.redOffset=n.color.redOffset-i.color.redOffset,this._durationColor.greenOffset=n.color.greenOffset-i.color.greenOffset,this._durationColor.blueOffset=n.color.blueOffset-i.color.blueOffset,this._durationColor.alphaMultiplier=n.color.alphaMultiplier-i.color.alphaMultiplier,this._durationColor.redMultiplier=n.color.redMultiplier-i.color.redMultiplier,this._durationColor.greenMultiplier=n.color.greenMultiplier-i.color.greenMultiplier,this._durationColor.blueMultiplier=n.color.blueMultiplier-i.color.blueMultiplier,this._durationColor.alphaOffset||this._durationColor.redOffset||this._durationColor.greenOffset||this._durationColor.blueOffset||this._durationColor.alphaMultiplier||this._durationColor.redMultiplier||this._durationColor.greenMultiplier||this._durationColor.blueMultiplier?this._tweenColor=!0:this._tweenColor=!1):i.color?(this._tweenColor=!0,this._durationColor.alphaOffset=-i.color.alphaOffset,this._durationColor.redOffset=-i.color.redOffset,this._durationColor.greenOffset=-i.color.greenOffset,this._durationColor.blueOffset=-i.color.blueOffset,this._durationColor.alphaMultiplier=1-i.color.alphaMultiplier,this._durationColor.redMultiplier=1-i.color.redMultiplier,this._durationColor.greenMultiplier=1-i.color.greenMultiplier,this._durationColor.blueMultiplier=1-i.color.blueMultiplier):n.color?(this._tweenColor=!0,this._durationColor.alphaOffset=n.color.alphaOffset,this._durationColor.redOffset=n.color.redOffset,this._durationColor.greenOffset=n.color.greenOffset,this._durationColor.blueOffset=n.color.blueOffset,this._durationColor.alphaMultiplier=n.color.alphaMultiplier-1,this._durationColor.redMultiplier=n.color.redMultiplier-1,this._durationColor.greenMultiplier=n.color.greenMultiplier-1,this._durationColor.blueMultiplier=n.color.blueMultiplier-1):this._tweenColor=!1:this._tweenColor=!1,!this._tweenColor&&this._animationState.displayControl&&(i.color?this._slot._updateDisplayColor(i.color.alphaOffset,i.color.redOffset,i.color.greenOffset,i.color.blueOffset,i.color.alphaMultiplier,i.color.redMultiplier,i.color.greenMultiplier,i.color.blueMultiplier,!0):this._slot._isColorChanged&&this._slot._updateDisplayColor(0,0,0,0,1,1,1,1,!1))},i.updateTween=function(){var e=this._timelineData.frameList[this._currentFrameIndex];if(this._tweenColor&&this._animationState.displayControl){var i=(this._currentTime-this._currentFramePosition)/this._currentFrameDuration;null!=this._tweenCurve?i=this._tweenCurve.getValueByProgress(i):this._tweenEasing&&(i=t.MathUtil.getEaseValue(i,this._tweenEasing)),e.color?this._slot._updateDisplayColor(e.color.alphaOffset+this._durationColor.alphaOffset*i,e.color.redOffset+this._durationColor.redOffset*i,e.color.greenOffset+this._durationColor.greenOffset*i,e.color.blueOffset+this._durationColor.blueOffset*i,e.color.alphaMultiplier+this._durationColor.alphaMultiplier*i,e.color.redMultiplier+this._durationColor.redMultiplier*i,e.color.greenMultiplier+this._durationColor.greenMultiplier*i,e.color.blueMultiplier+this._durationColor.blueMultiplier*i,!0):this._slot._updateDisplayColor(this._durationColor.alphaOffset*i,this._durationColor.redOffset*i,this._durationColor.greenOffset*i,this._durationColor.blueOffset*i,1+this._durationColor.alphaMultiplier*i,1+this._durationColor.redMultiplier*i,1+this._durationColor.greenMultiplier*i,1+this._durationColor.blueMultiplier*i,!0)}},i.updateSingleFrame=function(){var t=this._timelineData.frameList[0];this._slot._arriveAtFrame(t,this,this._animationState,!1),this._isComplete=!0,this._tweenEasing=NaN,this._tweenColor=!1,this._blendEnabled=t.displayIndex>=0,this._blendEnabled&&this._animationState.displayControl&&(t.color?this._slot._updateDisplayColor(t.color.alphaOffset,t.color.redOffset,t.color.greenOffset,t.color.blueOffset,t.color.alphaMultiplier,t.color.redMultiplier,t.color.greenMultiplier,t.color.blueMultiplier,!0):this._slot._isColorChanged&&this._slot._updateDisplayColor(0,0,0,0,1,1,1,1,!1))},e.HALF_PI=.5*Math.PI,e.DOUBLE_PI=2*Math.PI,e._pool=[],e}();t.SlotTimelineState=e,egret.registerClass(e,"dragonBones.SlotTimelineState")}(dragonBones||(dragonBones={})),function(t){var e=function(){function e(){this._totalTime=0,this._currentTime=0,this._lastTime=0,this._currentFrameIndex=0,this._currentFramePosition=0,this._currentFrameDuration=0,this._updateMode=0,this._transform=new t.DBTransform,this._pivot=new t.Point,this._durationTransform=new t.DBTransform,this._durationPivot=new t.Point,this._durationColor=new t.ColorTransform}__define;var i=e.prototype;return e._borrowObject=function(){return 0==e._pool.length?new e:e._pool.pop()},e._returnObject=function(t){e._pool.indexOf(t)<0&&(e._pool[e._pool.length]=t),t.clear()},e._clear=function(){for(var t=e._pool.length;t--;)e._pool[t].clear();e._pool.length=0},i.clear=function(){this._bone&&(this._bone._removeState(this),this._bone=null),this._armature=null,this._animation=null,this._animationState=null,this._timelineData=null,this._originTransform=null,this._originPivot=null},i._fadeIn=function(t,e,i){switch(this._bone=t,this._armature=this._bone.armature,this._animation=this._armature.animation,this._animationState=e,this._timelineData=i,this._originTransform=this._timelineData.originTransform,this._originPivot=this._timelineData.originPivot,this.name=i.name,this._totalTime=this._timelineData.duration,this._rawAnimationScale=this._animationState.clip.scale,this._isComplete=!1,this._tweenTransform=!1,this._tweenScale=!1,this._currentFrameIndex=-1,this._currentTime=-1,this._tweenEasing=NaN,this._weight=1,this._transform.x=0,this._transform.y=0,this._transform.scaleX=1,this._transform.scaleY=1,this._transform.skewX=0,this._transform.skewY=0,this._pivot.x=0,this._pivot.y=0,this._durationTransform.x=0,this._durationTransform.y=0,this._durationTransform.scaleX=1,this._durationTransform.scaleY=1,this._durationTransform.skewX=0,this._durationTransform.skewY=0,this._durationPivot.x=0,this._durationPivot.y=0,this._timelineData.frameList.length){case 0:this._updateMode=0;break;case 1:this._updateMode=1;break;default:this._updateMode=-1}this._bone._addState(this)},i._fadeOut=function(){this._transform.skewX=t.TransformUtil.formatRadian(this._transform.skewX),this._transform.skewY=t.TransformUtil.formatRadian(this._transform.skewY)},i._update=function(t){-1==this._updateMode?this.updateMultipleFrame(t):1==this._updateMode&&(this._updateMode=0,this.updateSingleFrame())},i.updateMultipleFrame=function(t){var e=0;t/=this._timelineData.scale,t+=this._timelineData.offset;var i=this._totalTime*t,n=this._animationState.playTimes;if(0==n)this._isComplete=!1,e=Math.ceil(Math.abs(i)/this._totalTime)||1,(i-=i>=0?Math.floor(i/this._totalTime)*this._totalTime:Math.ceil(i/this._totalTime)*this._totalTime)<0&&(i+=this._totalTime);else{var r=n*this._totalTime;i>=r?(i=r,this._isComplete=!0):i<=-r?(i=-r,this._isComplete=!0):this._isComplete=!1,i<0&&(i+=r),e=Math.ceil(i/this._totalTime)||1,this._isComplete?i=this._totalTime:i-=i>=0?Math.floor(i/this._totalTime)*this._totalTime:Math.ceil(i/this._totalTime)*this._totalTime}if(this._currentTime!=i){this._lastTime=this._currentTime,this._currentTime=i;for(var s,a,o=this._timelineData.frameList,l=0,h=this._timelineData.frameList.length;l<h;++l){if(this._currentFrameIndex<0)this._currentFrameIndex=0;else{if(!(this._currentTime<this._currentFramePosition||this._currentTime>=this._currentFramePosition+this._currentFrameDuration||this._currentTime<this._lastTime))break;if(this._currentFrameIndex++,this._lastTime=this._currentTime,this._currentFrameIndex>=o.length){if(this._isComplete){this._currentFrameIndex--;break}this._currentFrameIndex=0}}a=o[this._currentFrameIndex],s&&this._bone._arriveAtFrame(s,this,this._animationState,!0),this._currentFrameDuration=a.duration,this._currentFramePosition=a.position,s=a}a&&(this._bone._arriveAtFrame(a,this,this._animationState,!1),this.updateToNextFrame(e)),this.updateTween()}},i.updateToNextFrame=function(e){void 0===e&&(e=0);var i=this._currentFrameIndex+1;i>=this._timelineData.frameList.length&&(i=0);var n=this._timelineData.frameList[this._currentFrameIndex],r=this._timelineData.frameList[i],s=!1;0==i&&(!this._animationState.lastFrameAutoTween||this._animationState.playTimes&&this._animationState.currentPlayTimes>=this._animationState.playTimes&&((this._currentFramePosition+this._currentFrameDuration)/this._totalTime+e-this._timelineData.offset)*this._timelineData.scale>.999999)?(this._tweenEasing=NaN,s=!1):n.displayIndex<0||r.displayIndex<0?(this._tweenEasing=NaN,s=!1):this._animationState.autoTween?(this._tweenEasing=this._animationState.clip.tweenEasing,isNaN(this._tweenEasing)?(this._tweenEasing=n.tweenEasing,this._tweenCurve=n.curve,isNaN(this._tweenEasing)&&null==this._tweenCurve?s=!1:(10==this._tweenEasing&&(this._tweenEasing=0),s=!0)):s=!0):(this._tweenEasing=n.tweenEasing,this._tweenCurve=n.curve,!isNaN(this._tweenEasing)&&10!=this._tweenEasing||null!=this._tweenCurve?s=!0:(this._tweenEasing=NaN,s=!1)),s?(this._durationTransform.x=r.transform.x-n.transform.x,this._durationTransform.y=r.transform.y-n.transform.y,this._durationTransform.skewX=r.transform.skewX-n.transform.skewX,this._durationTransform.skewY=r.transform.skewY-n.transform.skewY,this._durationTransform.scaleX=r.transform.scaleX-n.transform.scaleX+r.scaleOffset.x,this._durationTransform.scaleY=r.transform.scaleY-n.transform.scaleY+r.scaleOffset.y,this._durationTransform.normalizeRotation(),0==i&&(this._durationTransform.skewX=t.TransformUtil.formatRadian(this._durationTransform.skewX),this._durationTransform.skewY=t.TransformUtil.formatRadian(this._durationTransform.skewY)),this._durationPivot.x=r.pivot.x-n.pivot.x,this._durationPivot.y=r.pivot.y-n.pivot.y,this._durationTransform.x||this._durationTransform.y||this._durationTransform.skewX||this._durationTransform.skewY||this._durationTransform.scaleX||this._durationTransform.scaleY||this._durationPivot.x||this._durationPivot.y?(this._tweenTransform=!0,this._tweenScale=n.tweenScale):(this._tweenTransform=!1,this._tweenScale=!1)):(this._tweenTransform=!1,this._tweenScale=!1),this._tweenTransform?this._tweenScale||(this._animationState.additiveBlending?(this._transform.scaleX=n.transform.scaleX,this._transform.scaleY=n.transform.scaleY):(this._transform.scaleX=this._originTransform.scaleX*n.transform.scaleX,this._transform.scaleY=this._originTransform.scaleY*n.transform.scaleY)):(this._animationState.additiveBlending?(this._transform.x=n.transform.x,this._transform.y=n.transform.y,this._transform.skewX=n.transform.skewX,this._transform.skewY=n.transform.skewY,this._transform.scaleX=n.transform.scaleX,this._transform.scaleY=n.transform.scaleY,this._pivot.x=n.pivot.x,this._pivot.y=n.pivot.y):(this._transform.x=this._originTransform.x+n.transform.x,this._transform.y=this._originTransform.y+n.transform.y,this._transform.skewX=this._originTransform.skewX+n.transform.skewX,this._transform.skewY=this._originTransform.skewY+n.transform.skewY,this._transform.scaleX=this._originTransform.scaleX*n.transform.scaleX,this._transform.scaleY=this._originTransform.scaleY*n.transform.scaleY,this._pivot.x=this._originPivot.x+n.pivot.x,this._pivot.y=this._originPivot.y+n.pivot.y),this._bone.invalidUpdate())},i.updateTween=function(){var e=this._timelineData.frameList[this._currentFrameIndex];if(this._tweenTransform){var i=(this._currentTime-this._currentFramePosition)/this._currentFrameDuration;null!=this._tweenCurve?i=this._tweenCurve.getValueByProgress(i):this._tweenEasing&&(i=t.MathUtil.getEaseValue(i,this._tweenEasing));var n=e.transform,r=e.pivot;this._animationState.additiveBlending?(this._transform.x=n.x+this._durationTransform.x*i,this._transform.y=n.y+this._durationTransform.y*i,this._transform.skewX=n.skewX+this._durationTransform.skewX*i,this._transform.skewY=n.skewY+this._durationTransform.skewY*i,this._tweenScale&&(this._transform.scaleX=n.scaleX+this._durationTransform.scaleX*i,this._transform.scaleY=n.scaleY+this._durationTransform.scaleY*i),this._pivot.x=r.x+this._durationPivot.x*i,this._pivot.y=r.y+this._durationPivot.y*i):(this._transform.x=this._originTransform.x+n.x+this._durationTransform.x*i,this._transform.y=this._originTransform.y+n.y+this._durationTransform.y*i,this._transform.skewX=this._originTransform.skewX+n.skewX+this._durationTransform.skewX*i,this._transform.skewY=this._originTransform.skewY+n.skewY+this._durationTransform.skewY*i,this._tweenScale&&(this._transform.scaleX=this._originTransform.scaleX*n.scaleX+this._durationTransform.scaleX*i,this._transform.scaleY=this._originTransform.scaleY*n.scaleY+this._durationTransform.scaleY*i),this._pivot.x=this._originPivot.x+r.x+this._durationPivot.x*i,this._pivot.y=this._originPivot.y+r.y+this._durationPivot.y*i),this._bone.invalidUpdate()}},i.updateSingleFrame=function(){var t=this._timelineData.frameList[0];this._bone._arriveAtFrame(t,this,this._animationState,!1),this._isComplete=!0,this._tweenEasing=NaN,this._tweenTransform=!1,this._tweenScale=!1,this._tweenColor=!1,this._animationState.additiveBlending?(this._transform.x=t.transform.x,this._transform.y=t.transform.y,this._transform.skewX=t.transform.skewX,this._transform.skewY=t.transform.skewY,this._transform.scaleX=t.transform.scaleX,this._transform.scaleY=t.transform.scaleY,this._pivot.x=t.pivot.x,this._pivot.y=t.pivot.y):(this._transform.x=this._originTransform.x+t.transform.x,this._transform.y=this._originTransform.y+t.transform.y,this._transform.skewX=this._originTransform.skewX+t.transform.skewX,this._transform.skewY=this._originTransform.skewY+t.transform.skewY,this._transform.scaleX=this._originTransform.scaleX*t.transform.scaleX,this._transform.scaleY=this._originTransform.scaleY*t.transform.scaleY,this._pivot.x=this._originPivot.x+t.pivot.x,this._pivot.y=this._originPivot.y+t.pivot.y),this._bone.invalidUpdate()},e.HALF_PI=.5*Math.PI,e.DOUBLE_PI=2*Math.PI,e._pool=[],e}();t.TimelineState=e,egret.registerClass(e,"dragonBones.TimelineState")}(dragonBones||(dragonBones={})),function(t){var e=function(){function t(t,e){void 0===t&&(t=-1),void 0===e&&(e=1),this._time=t>=0?t:.001*(new Date).getTime(),this._timeScale=isNaN(e)?1:e,this._animatableList=[]}var e=__define,i=t.prototype;return e(i,"time",function(){return this._time}),e(i,"timeScale",function(){return this._timeScale},function(t){(isNaN(t)||t<0)&&(t=1),this._timeScale=t}),i.contains=function(t){return this._animatableList.indexOf(t)>=0},i.add=function(t){t&&-1==this._animatableList.indexOf(t)&&this._animatableList.push(t)},i.remove=function(t){var e=this._animatableList.indexOf(t);e>=0&&(this._animatableList[e]=null)},i.clear=function(){this._animatableList.length=0},i.advanceTime=function(t){void 0===t&&(t=-1),t<0&&(t=.001*(new Date).getTime()-this._time),t*=this._timeScale,this._time+=t;var e=this._animatableList.length;if(0!=e){for(var i=0,n=0;n<e;n++){var r=this._animatableList[n];r&&(i!=n&&(this._animatableList[i]=r,this._animatableList[n]=null),r.advanceTime(t),i++)}if(i!=n){for(e=this._animatableList.length;n<e;)this._animatableList[i++]=this._animatableList[n++];this._animatableList.length=i}}},t.clock=new t,t}();t.WorldClock=e,egret.registerClass(e,"dragonBones.WorldClock",["dragonBones.IAnimatable"])}(dragonBones||(dragonBones={})),function(t){var e=function(t){function e(e){void 0===e&&(e=null),t.call(this,e)}__extends(e,t);__define,e.prototype;return e}(egret.EventDispatcher);t.EventDispatcher=e,egret.registerClass(e,"dragonBones.EventDispatcher")}(dragonBones||(dragonBones={})),function(t){var e=function(t){function e(){if(t.call(this),e._instance)throw new Error("Singleton already constructed!")}__extends(e,t);__define,e.prototype;return e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e}(t.EventDispatcher);t.SoundEventManager=e,egret.registerClass(e,"dragonBones.SoundEventManager")}(dragonBones||(dragonBones={})),function(t){var e=function(e){function i(i){e.call(this),this._display=i,this._animation=new t.Animation(this),this._slotsZOrderChanged=!1,this._slotList=[],this._boneList=[],this._eventList=[],this._delayDispose=!1,this._lockDispose=!1,this._armatureData=null}__extends(i,e);var n=__define,r=i.prototype;return n(r,"armatureData",function(){return this._armatureData}),n(r,"display",function(){return this._display}),r.getDisplay=function(){return this._display},n(r,"animation",function(){return this._animation}),r.dispose=function(){if(this._delayDispose=!0,this._animation&&!this._lockDispose){this.userData=null,this._animation.dispose();for(var e=this._slotList.length;e--;)this._slotList[e].dispose();for(e=this._boneList.length;e--;)this._boneList[e].dispose();t.TimelineState._clear(),this._armatureData=null,this._animation=null,this._slotList=null,this._boneList=null,this._eventList=null}},r.invalidUpdate=function(t){if(void 0===t&&(t=null),t){var e=this.getBone(t);e&&e.invalidUpdate()}else for(var i=this._boneList.length;i--;)this._boneList[i].invalidUpdate()},r.advanceTime=function(e){this._lockDispose=!0,this._animation._advanceTime(e),e*=this._animation.timeScale;for(var i=this._animation._isFading,n=this._boneList.length;n--;){this._boneList[n]._update(i)}for(n=this._slotList.length;n--;){var r=this._slotList[n];if(r._update(),r._isShowDisplay){var s=r.childArmature;s&&s.advanceTime(e)}}if(this._slotsZOrderChanged&&(this.updateSlotsZOrder(),this.hasEventListener(t.ArmatureEvent.Z_ORDER_UPDATED)&&this.dispatchEvent(new t.ArmatureEvent(t.ArmatureEvent.Z_ORDER_UPDATED))),this._eventList.length>0){n=0;for(var a=this._eventList.length;n<a;n++){var o=this._eventList[n];this.dispatchEvent(o)}this._eventList.length=0}this._lockDispose=!1,this._delayDispose&&this.dispose()},r.resetAnimation=function(){this.animation.stop(),this.animation._resetAnimationStateList();for(var t=0,e=this._boneList.length;t<e;t++)this._boneList[t]._removeAllStates()},r.getSlots=function(t){return void 0===t&&(t=!0),t?this._slotList.concat():this._slotList},r.getSlot=function(t){for(var e=this._slotList.length,i=0;i<e;i++){var n=this._slotList[i];if(n.name==t)return n}return null},r.getSlotByDisplay=function(t){if(t)for(var e=this._slotList.length,i=0;i<e;i++){var n=this._slotList[i];if(n.display==t)return n}return null},r.addSlot=function(t,e){var i=this.getBone(e);if(!i)throw new Error;i.addSlot(t)},r.removeSlot=function(t){if(!t||t.armature!=this)throw new Error;t.parent.removeSlot(t)},r.removeSlotByName=function(t){var e=this.getSlot(t);return e&&this.removeSlot(e),e},r.getBones=function(t){return void 0===t&&(t=!0),t?this._boneList.concat():this._boneList},r.getBone=function(t){for(var e=this._boneList.length,i=0;i<e;i++){var n=this._boneList[i];if(n.name==t)return n}return null},r.getBoneByDisplay=function(t){var e=this.getSlotByDisplay(t);return e?e.parent:null},r.addBone=function(t,e,i){var n;if(void 0===e&&(e=null),void 0===i&&(i=!1),e&&!(n=this.getBone(e)))throw new Error;n?n.addChildBone(t,i):(t.parent&&t.parent.removeChildBone(t,i),t._setArmature(this),i||this._updateAnimationAfterBoneListChanged())},r.removeBone=function(t,e){if(void 0===e&&(e=!1),!t||t.armature!=this)throw new Error;t.parent?t.parent.removeChildBone(t,e):(t._setArmature(null),e||this._updateAnimationAfterBoneListChanged(!1))},r.removeBoneByName=function(t){var e=this.getBone(t);return e&&this.removeBone(e),e},r._addBoneToBoneList=function(t){this._boneList.indexOf(t)<0&&(this._boneList[this._boneList.length]=t)},r._removeBoneFromBoneList=function(t){var e=this._boneList.indexOf(t);e>=0&&this._boneList.splice(e,1)},r._addSlotToSlotList=function(t){this._slotList.indexOf(t)<0&&(this._slotList[this._slotList.length]=t)},r._removeSlotFromSlotList=function(t){var e=this._slotList.indexOf(t);e>=0&&this._slotList.splice(e,1)},r.updateSlotsZOrder=function(){this._slotList.sort(this.sortSlot);for(var t=this._slotList.length;t--;){var e=this._slotList[t];e._isShowDisplay&&e._addDisplayToContainer(this._display)}this._slotsZOrderChanged=!1},r._updateAnimationAfterBoneListChanged=function(t){void 0===t&&(t=!0),t&&this.sortBoneList(),this._animation._updateAnimationStates()},r.sortBoneList=function(){var e=this._boneList.length;if(0!=e){for(var i=[];e--;){for(var n=0,r=this._boneList[e],s=r;s;)n++,s=s.parent;i[e]=[n,r]}for(i.sort(t.ArmatureData.sortBoneDataHelpArrayDescending),e=i.length;e--;)this._boneList[e]=i[e][1];i.length=0}},r._arriveAtFrame=function(e,n,r,s){if(e.event&&this.hasEventListener(t.FrameEvent.ANIMATION_FRAME_EVENT)){var a=new t.FrameEvent(t.FrameEvent.ANIMATION_FRAME_EVENT);a.animationState=r,a.frameLabel=e.event,this._eventList.push(a)}if(e.sound&&i._soundManager.hasEventListener(t.SoundEvent.SOUND)){var o=new t.SoundEvent(t.SoundEvent.SOUND);o.armature=this,o.animationState=r,o.sound=e.sound,i._soundManager.dispatchEvent(o)}e.action&&r.displayControl&&this.animation.gotoAndPlay(e.action)},r.sortSlot=function(t,e){return t.zOrder<e.zOrder?1:-1},r.getAnimation=function(){return this._animation},i._soundManager=t.SoundEventManager.getInstance(),i}(t.EventDispatcher);t.Armature=e,egret.registerClass(e,"dragonBones.Armature",["dragonBones.IAnimatable"])}(dragonBones||(dragonBones={})),function(t){var e=function(){function t(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0}__define;var e=t.prototype;return e.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,r=this.tx,s=t*n-e*i;this.a=n/s,this.b=-e/s,this.c=-i/s,this.d=t/s,this.tx=(i*this.ty-n*r)/s,this.ty=-(t*this.ty-e*r)/s},e.concat=function(t){var e=t.a,i=t.b,n=t.c,r=t.d,s=this.tx,a=this.ty;if(1!=e||0!=i||0!=n||1!=r){var o=this.a,l=this.b,h=this.c,u=this.d;this.a=o*e+l*n,this.b=o*i+l*r,this.c=h*e+u*n,this.d=h*i+u*r}this.tx=s*e+a*n+t.tx,this.ty=s*i+a*r+t.ty},e.copyFrom=function(t){this.tx=t.tx,this.ty=t.ty,this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d},t}();t.Matrix=e,egret.registerClass(e,"dragonBones.Matrix")}(dragonBones||(dragonBones={})),function(t){var e=function(){function e(){this.x=0,this.y=0,this.skewX=0,this.skewY=0,this.scaleX=1,this.scaleY=1}var i=__define,n=e.prototype;return i(n,"rotation",function(){return this.skewX},function(t){this.skewX=this.skewY=t}),n.copy=function(t){this.x=t.x,this.y=t.y,this.skewX=t.skewX,this.skewY=t.skewY,this.scaleX=t.scaleX,this.scaleY=t.scaleY},n.add=function(t){this.x+=t.x,this.y+=t.y,this.skewX+=t.skewX,this.skewY+=t.skewY,this.scaleX*=t.scaleX,this.scaleY*=t.scaleY},n.minus=function(t){this.x-=t.x,this.y-=t.y,this.skewX-=t.skewX,this.skewY-=t.skewY,this.scaleX/=t.scaleX,this.scaleY/=t.scaleY},n.normalizeRotation=function(){this.skewX=t.TransformUtil.normalizeRotation(this.skewX),this.skewY=t.TransformUtil.normalizeRotation(this.skewY)},n.toString=function(){return"x:"+this.x+" y:"+this.y+" skewX:"+this.skewX+" skewY:"+this.skewY+" scaleX:"+this.scaleX+" scaleY:"+this.scaleY},e}();t.DBTransform=e,egret.registerClass(e,"dragonBones.DBTransform")}(dragonBones||(dragonBones={})),function(t){var e=function(){function e(){this._globalTransformMatrix=new t.Matrix,this._global=new t.DBTransform,this._origin=new t.DBTransform,this._offset=new t.DBTransform,this._offset.scaleX=this._offset.scaleY=1,this._visible=!0,this._armature=null,this._parent=null,this.userData=null,this.inheritRotation=!0,this.inheritScale=!0,this.inheritTranslation=!0}var i=__define,n=e.prototype;return i(n,"global",function(){return this._global}),i(n,"origin",function(){return this._origin}),i(n,"offset",function(){return this._offset}),i(n,"armature",function(){return this._armature}),n._setArmature=function(t){this._armature=t},i(n,"parent",function(){return this._parent}),n._setParent=function(t){this._parent=t},n.dispose=function(){this.userData=null,this._globalTransformMatrix=null,this._global=null,this._origin=null,this._offset=null,this._armature=null,this._parent=null},n._calculateRelativeParentTransform=function(){},n._calculateParentTransform=function(){if(this.parent&&(this.inheritTranslation||this.inheritRotation||this.inheritScale)){var i=this._parent._globalTransformForChild,n=this._parent._globalTransformMatrixForChild;return this.inheritTranslation&&this.inheritRotation&&this.inheritScale||((i=e._tempParentGlobalTransform).copy(this._parent._globalTransformForChild),this.inheritTranslation||(i.x=0,i.y=0),this.inheritScale||(i.scaleX=1,i.scaleY=1),this.inheritRotation||(i.skewX=0,i.skewY=0),n=e._tempParentGlobalTransformMatrix,t.TransformUtil.transformToMatrix(i,n,!0)),{parentGlobalTransform:i,parentGlobalTransformMatrix:n}}return null},n._updateGlobal=function(){this._calculateRelativeParentTransform();var e=this._calculateParentTransform();if(null!=e){var i=e.parentGlobalTransformMatrix,n=e.parentGlobalTransform,r=this._global.x,s=this._global.y;this._global.x=i.a*r+i.c*s+i.tx,this._global.y=i.d*s+i.b*r+i.ty,this.inheritRotation&&(this._global.skewX+=n.skewX,this._global.skewY+=n.skewY),this.inheritScale&&(this._global.scaleX*=n.scaleX,this._global.scaleY*=n.scaleY)}return t.TransformUtil.transformToMatrix(this._global,this._globalTransformMatrix,!0),e},e._tempParentGlobalTransformMatrix=new t.Matrix,e._tempParentGlobalTransform=new t.DBTransform,e}();t.DBObject=e,egret.registerClass(e,"dragonBones.DBObject")}(dragonBones||(dragonBones={})),function(t){var e=function(e){function i(){e.call(this),this.applyOffsetTranslationToChild=!0,this.applyOffsetRotationToChild=!0,this.applyOffsetScaleToChild=!1,this._needUpdate=0,this._tween=new t.DBTransform,this._tweenPivot=new t.Point,this._tween.scaleX=this._tween.scaleY=1,this._boneList=[],this._slotList=[],this._timelineStateList=[],this._needUpdate=2,this._isColorChanged=!1}__extends(i,e);var n=__define,r=i.prototype;return i.initWithBoneData=function(t){var e=new i;return e.name=t.name,e.inheritRotation=t.inheritRotation,e.inheritScale=t.inheritScale,e.origin.copy(t.transform),e},r.dispose=function(){if(this._boneList){e.prototype.dispose.call(this);for(var t=this._boneList.length;t--;)this._boneList[t].dispose();for(t=this._slotList.length;t--;)this._slotList[t].dispose();this._tween=null,this._tweenPivot=null,this._boneList=null,this._slotList=null,this._timelineStateList=null}},r.contains=function(t){if(!t)throw new Error;if(t==this)return!1;for(var e=t;e!=this&&null!=e;)e=e.parent;return e==this},r.addChildBone=function(t,e){if(void 0===e&&(e=!1),!t)throw new Error;if(t==this||t.contains(this))throw new Error;t.parent!=this&&(t.parent&&t.parent.removeChildBone(t,e),this._boneList[this._boneList.length]=t,t._setParent(this),t._setArmature(this._armature),this._armature&&!e&&this._armature._updateAnimationAfterBoneListChanged())},r.removeChildBone=function(t,e){if(void 0===e&&(e=!1),!t)throw new Error;var i=this._boneList.indexOf(t);if(i<0)throw new Error;this._boneList.splice(i,1),t._setParent(null),t._setArmature(null),this._armature&&!e&&this._armature._updateAnimationAfterBoneListChanged(!1)},r.addSlot=function(t){if(!t)throw new Error;t.parent&&t.parent.removeSlot(t),this._slotList[this._slotList.length]=t,t._setParent(this),t.setArmature(this._armature)},r.removeSlot=function(t){if(!t)throw new Error;var e=this._slotList.indexOf(t);if(e<0)throw new Error;this._slotList.splice(e,1),t._setParent(null),t.setArmature(null)},r._setArmature=function(t){if(this._armature!=t){this._armature&&(this._armature._removeBoneFromBoneList(this),this._armature._updateAnimationAfterBoneListChanged(!1)),this._armature=t,this._armature&&this._armature._addBoneToBoneList(this);for(var e=this._boneList.length;e--;)this._boneList[e]._setArmature(this._armature);for(e=this._slotList.length;e--;)this._slotList[e].setArmature(this._armature)}},r.getBones=function(t){return void 0===t&&(t=!0),t?this._boneList.concat():this._boneList},r.getSlots=function(t){return void 0===t&&(t=!0),t?this._slotList.concat():this._slotList},r.invalidUpdate=function(){this._needUpdate=2},r._calculateRelativeParentTransform=function(){this._global.scaleX=this._origin.scaleX*this._tween.scaleX*this._offset.scaleX,this._global.scaleY=this._origin.scaleY*this._tween.scaleY*this._offset.scaleY,this._global.skewX=this._origin.skewX+this._tween.skewX+this._offset.skewX,this._global.skewY=this._origin.skewY+this._tween.skewY+this._offset.skewY,this._global.x=this._origin.x+this._tween.x+this._offset.x,this._global.y=this._origin.y+this._tween.y+this._offset.y},r._update=function(e){if(void 0===e&&(e=!1),this._needUpdate--,e||this._needUpdate>0||this._parent&&this._parent._needUpdate>0){this._needUpdate=1,this.blendingTimeline();var i=this._updateGlobal(),n=i?i.parentGlobalTransform:null,r=i?i.parentGlobalTransformMatrix:null,s=0!=this._offset.x||0!=this._offset.y,a=0!=this._offset.scaleX||0!=this._offset.scaleY,o=0!=this._offset.skewX||0!=this._offset.skewY;s&&!this.applyOffsetTranslationToChild||a&&!this.applyOffsetScaleToChild||o&&!this.applyOffsetRotationToChild?(this._tempGlobalTransformForChild||(this._tempGlobalTransformForChild=new t.DBTransform),this._globalTransformForChild=this._tempGlobalTransformForChild,this._tempGlobalTransformMatrixForChild||(this._tempGlobalTransformMatrixForChild=new t.Matrix),this._globalTransformMatrixForChild=this._tempGlobalTransformMatrixForChild,this._globalTransformForChild.x=this._origin.x+this._tween.x,this._globalTransformForChild.y=this._origin.y+this._tween.y,this._globalTransformForChild.scaleX=this._origin.scaleX*this._tween.scaleX,this._globalTransformForChild.scaleY=this._origin.scaleY*this._tween.scaleY,this._globalTransformForChild.skewX=this._origin.skewX+this._tween.skewX,this._globalTransformForChild.skewY=this._origin.skewY+this._tween.skewY,this.applyOffsetTranslationToChild&&(this._globalTransformForChild.x+=this._offset.x,this._globalTransformForChild.y+=this._offset.y),this.applyOffsetScaleToChild&&(this._globalTransformForChild.scaleX*=this._offset.scaleX,this._globalTransformForChild.scaleY*=this._offset.scaleY),this.applyOffsetRotationToChild&&(this._globalTransformForChild.skewX+=this._offset.skewX,this._globalTransformForChild.skewY+=this._offset.skewY),t.TransformUtil.transformToMatrix(this._globalTransformForChild,this._globalTransformMatrixForChild,!0),r&&(this._globalTransformMatrixForChild.concat(r),t.TransformUtil.matrixToTransform(this._globalTransformMatrixForChild,this._globalTransformForChild,this._globalTransformForChild.scaleX*n.scaleX>=0,this._globalTransformForChild.scaleY*n.scaleY>=0))):(this._globalTransformForChild=this._global,this._globalTransformMatrixForChild=this._globalTransformMatrix)}},r._updateColor=function(t,e,i,n,r,s,a,o,l){for(var h=this._slotList.length,u=0;u<h;u++){this._slotList[u]._updateDisplayColor(t,e,i,n,r,s,a,o)}this._isColorChanged=l},r._hideSlots=function(){for(var t=this._slotList.length,e=0;e<t;e++){this._slotList[e]._changeDisplay(-1)}},r._arriveAtFrame=function(e,n,r,s){if(r.displayControl&&(!this.displayController||this.displayController==r.name)&&r.containsBoneMask(this.name)){e.displayIndex;if(e.event&&this._armature.hasEventListener(t.FrameEvent.BONE_FRAME_EVENT)){var a=new t.FrameEvent(t.FrameEvent.BONE_FRAME_EVENT);a.bone=this,a.animationState=r,a.frameLabel=e.event,this._armature._eventList.push(a)}if(e.sound&&i._soundManager.hasEventListener(t.SoundEvent.SOUND)){var o=new t.SoundEvent(t.SoundEvent.SOUND);o.armature=this._armature,o.animationState=r,o.sound=e.sound,i._soundManager.dispatchEvent(o)}if(e.action)for(var l=this._slotList.length,h=0;h<l;h++){var u=this._slotList[h].childArmature;u&&u.animation.gotoAndPlay(e.action)}}},r._addState=function(t){this._timelineStateList.indexOf(t)<0&&(this._timelineStateList.push(t),this._timelineStateList.sort(this.sortState))},r._removeState=function(t){var e=this._timelineStateList.indexOf(t);e>=0&&this._timelineStateList.splice(e,1)},r._removeAllStates=function(){this._timelineStateList.length=0},r.blendingTimeline=function(){var t,e,i,n,r=this._timelineStateList.length;if(1==r)n=(t=this._timelineStateList[0])._animationState.weight*t._animationState.fadeWeight,t._weight=n,e=t._transform,i=t._pivot,this._tween.x=e.x*n,this._tween.y=e.y*n,this._tween.skewX=e.skewX*n,this._tween.skewY=e.skewY*n,this._tween.scaleX=1+(e.scaleX-1)*n,this._tween.scaleY=1+(e.scaleY-1)*n,this._tweenPivot.x=i.x*n,this._tweenPivot.y=i.y*n;else if(r>1){for(var s=0,a=0,o=0,l=0,h=1,u=1,c=0,d=0,f=1,p=0,_=this._timelineStateList[r-1]._animationState.layer,m=0;r--;){if(_!=(m=(t=this._timelineStateList[r])._animationState.layer)){if(p>=f){t._weight=0;break}f-=p}_=m,n=t._animationState.weight*t._animationState.fadeWeight*f,t._weight=n,n&&(e=t._transform,i=t._pivot,s+=e.x*n,a+=e.y*n,o+=e.skewX*n,l+=e.skewY*n,h+=(e.scaleX-1)*n,u+=(e.scaleY-1)*n,c+=i.x*n,d+=i.y*n,p+=n)}this._tween.x=s,this._tween.y=a,this._tween.skewX=o,this._tween.skewY=l,this._tween.scaleX=h,this._tween.scaleY=u,this._tweenPivot.x=c,this._tweenPivot.y=d}},r.sortState=function(t,e){return t._animationState.layer<e._animationState.layer?-1:1},n(r,"childArmature",function(){return this.slot?this.slot.childArmature:null}),n(r,"display",function(){return this.slot?this.slot.display:null},function(t){this.slot&&(this.slot.display=t)}),n(r,"node",function(){return this._offset}),n(r,"visible",void 0,function(t){if(this._visible!=t){this._visible=t;for(var e=this._slotList.length,i=0;i<e;i++){this._slotList[i]._updateDisplayVisible(this._visible)}}}),n(r,"slot",function(){return this._slotList.length>0?this._slotList[0]:null}),i._soundManager=t.SoundEventManager.getInstance(),i}(t.DBObject);t.Bone=e,egret.registerClass(e,"dragonBones.Bone")}(dragonBones||(dragonBones={})),function(t){var e=function(e){function i(i){if(e.call(this),this._currentDisplayIndex=0,i!=this)throw new Error(egret.getString(4001));this._displayList=[],this._timelineStateList=[],this._currentDisplayIndex=-1,this._originZOrder=0,this._tweenZOrder=0,this._offsetZOrder=0,this._isShowDisplay=!1,this._colorTransform=new t.ColorTransform,this._displayDataList=null,this._currentDisplay=null,this.inheritRotation=!0,this.inheritScale=!0}__extends(i,e);var n=__define,r=i.prototype;return r.initWithSlotData=function(t){this.name=t.name,this.blendMode=t.blendMode,this._originZOrder=t.zOrder,this._displayDataList=t.displayDataList,this._originDisplayIndex=t.displayIndex},r.dispose=function(){this._displayList&&(e.prototype.dispose.call(this),this._displayList.length=0,this._displayDataList=null,this._displayList=null,this._currentDisplay=null)},r.sortState=function(t,e){return t._animationState.layer<e._animationState.layer?-1:1},r._addState=function(t){this._timelineStateList.indexOf(t)<0&&(this._timelineStateList.push(t),this._timelineStateList.sort(this.sortState))},r._removeState=function(t){var e=this._timelineStateList.indexOf(t);e>=0&&this._timelineStateList.splice(e,1)},r.setArmature=function(t){this._armature!=t&&(this._armature&&this._armature._removeSlotFromSlotList(this),this._armature=t,this._armature?(this._armature._addSlotToSlotList(this),this._armature._slotsZOrderChanged=!0,this._addDisplayToContainer(this._armature.display)):this._removeDisplayFromContainer())},r._update=function(){this._parent._needUpdate<=0&&!this._needUpdate||(this._updateGlobal(),this._updateTransform(),this._needUpdate=!1)},r._calculateRelativeParentTransform=function(){this._global.scaleX=this._origin.scaleX*this._offset.scaleX,this._global.scaleY=this._origin.scaleY*this._offset.scaleY,this._global.skewX=this._origin.skewX+this._offset.skewX,this._global.skewY=this._origin.skewY+this._offset.skewY,this._global.x=this._origin.x+this._offset.x+this._parent._tweenPivot.x,this._global.y=this._origin.y+this._offset.y+this._parent._tweenPivot.y},r.updateChildArmatureAnimation=function(){this.childArmature&&(this._isShowDisplay?this._armature&&this._armature.animation.lastAnimationState&&this.childArmature.animation.hasAnimation(this._armature.animation.lastAnimationState.name)?this.childArmature.animation.gotoAndPlay(this._armature.animation.lastAnimationState.name):this.childArmature.animation.play():(this.childArmature.animation.stop(),this.childArmature.animation._lastAnimationState=null))},r._changeDisplay=function(t){if(void 0===t&&(t=0),t<0)this._isShowDisplay&&(this._isShowDisplay=!1,this._removeDisplayFromContainer(),this.updateChildArmatureAnimation());else if(this._displayList.length>0){var e=this._displayList.length;t>=e&&(t=e-1),this._currentDisplayIndex!=t?(this._isShowDisplay=!0,this._currentDisplayIndex=t,this._updateSlotDisplay(),this.updateChildArmatureAnimation(),this._displayDataList&&this._displayDataList.length>0&&this._currentDisplayIndex<this._displayDataList.length&&this._origin.copy(this._displayDataList[this._currentDisplayIndex].transform),this._needUpdate=!0):this._isShowDisplay||(this._isShowDisplay=!0,this._armature&&(this._armature._slotsZOrderChanged=!0,this._addDisplayToContainer(this._armature.display)),this.updateChildArmatureAnimation())}},r._updateSlotDisplay=function(){var e=-1;this._currentDisplay&&(e=this._getDisplayIndex(),this._removeDisplayFromContainer());var i=this._displayList[this._currentDisplayIndex];i?i instanceof t.Armature?this._currentDisplay=i.display:this._currentDisplay=i:this._currentDisplay=null,this._updateDisplay(this._currentDisplay),this._currentDisplay&&(this._armature&&this._isShowDisplay&&(e<0?(this._armature._slotsZOrderChanged=!0,this._addDisplayToContainer(this._armature.display)):this._addDisplayToContainer(this._armature.display,e)),this._updateDisplayBlendMode(this._blendMode),this._updateDisplayColor(this._colorTransform.alphaOffset,this._colorTransform.redOffset,this._colorTransform.greenOffset,this._colorTransform.blueOffset,this._colorTransform.alphaMultiplier,this._colorTransform.redMultiplier,this._colorTransform.greenMultiplier,this._colorTransform.blueMultiplier,!0),this._updateDisplayVisible(this._visible),this._updateTransform())},n(r,"visible",void 0,function(t){this._visible!=t&&(this._visible=t,this._updateDisplayVisible(this._visible))}),n(r,"displayList",function(){return this._displayList},function(t){if(!t)throw new Error;this._currentDisplayIndex<0&&(this._currentDisplayIndex=0);for(var e=this._displayList.length=t.length;e--;)this._displayList[e]=t[e];var i=this._currentDisplayIndex;this._currentDisplayIndex=-1,this._changeDisplay(i)}),n(r,"display",function(){return this._currentDisplay},function(t){this._currentDisplayIndex<0&&(this._currentDisplayIndex=0),this._displayList[this._currentDisplayIndex]!=t&&(this._displayList[this._currentDisplayIndex]=t,this._updateSlotDisplay(),this.updateChildArmatureAnimation(),this._updateTransform())}),r.getDisplay=function(){return this.display},r.setDisplay=function(t){this.display=t},n(r,"childArmature",function(){return this._displayList[this._currentDisplayIndex]instanceof t.Armature?this._displayList[this._currentDisplayIndex]:null},function(t){this.display=t}),n(r,"zOrder",function(){return this._originZOrder+this._tweenZOrder+this._offsetZOrder},function(t){this.zOrder!=t&&(this._offsetZOrder=t-this._originZOrder-this._tweenZOrder,this._armature&&(this._armature._slotsZOrderChanged=!0))}),n(r,"blendMode",function(){return this._blendMode},function(t){this._blendMode!=t&&(this._blendMode=t,this._updateDisplayBlendMode(this._blendMode))}),r._updateDisplay=function(t){throw new Error("")},r._getDisplayIndex=function(){throw new Error(egret.getString(4001))},r._addDisplayToContainer=function(t,e){throw void 0===e&&(e=-1),new Error(egret.getString(4001))},r._removeDisplayFromContainer=function(){throw new Error(egret.getString(4001))},r._updateTransform=function(){throw new Error(egret.getString(4001))},r._updateDisplayVisible=function(t){throw new Error(egret.getString(4001))},r._updateDisplayColor=function(t,e,i,n,r,s,a,o,l){void 0===l&&(l=!1),this._colorTransform.alphaOffset=t,this._colorTransform.redOffset=e,this._colorTransform.greenOffset=i,this._colorTransform.blueOffset=n,this._colorTransform.alphaMultiplier=r,this._colorTransform.redMultiplier=s,this._colorTransform.greenMultiplier=a,this._colorTransform.blueMultiplier=o,this._isColorChanged=l},r._updateDisplayBlendMode=function(t){throw new Error("Abstract method needs to be implemented in subclass!")},r._arriveAtFrame=function(t,e,i,n){if(i.displayControl&&i.containsBoneMask(this.parent.name)){var r=t,s=r.displayIndex;this._changeDisplay(s),this._updateDisplayVisible(r.visible),s>=0&&(isNaN(r.zOrder)||r.zOrder==this._tweenZOrder||(this._tweenZOrder=r.zOrder,this._armature._slotsZOrderChanged=!0)),t.action&&this.childArmature&&this.childArmature.animation.gotoAndPlay(t.action)}},r._updateGlobal=function(){this._calculateRelativeParentTransform(),t.TransformUtil.transformToMatrix(this._global,this._globalTransformMatrix,!0);var e=this._calculateParentTransform();return e&&(this._globalTransformMatrix.concat(e.parentGlobalTransformMatrix),t.TransformUtil.matrixToTransform(this._globalTransformMatrix,this._global,this._global.scaleX*e.parentGlobalTransform.scaleX>=0,this._global.scaleY*e.parentGlobalTransform.scaleY>=0)),e},r._resetToOrigin=function(){this._changeDisplay(this._originDisplayIndex),this._updateDisplayColor(0,0,0,0,1,1,1,1,!0)},i}(t.DBObject);t.Slot=e,egret.registerClass(e,"dragonBones.Slot")}(dragonBones||(dragonBones={})),function(t){var e=function(){function e(){this.slotTimelineCacheList=[],this.slotTimelineCacheDic={},this.frameNum=0}__define;var i=e.prototype;return e.initWithAnimationData=function(i,n){var r=new e;r.name=i.name;for(var s,a,o,l,h=i.timelineList,u=0,c=h.length;u<c;u++){s=h[u].name;for(var d=0,f=n.slotDataList.length;d<f;d++)l=(a=n.slotDataList[d]).name,a.parent==s&&null==r.slotTimelineCacheDic[l]&&((o=new t.SlotTimelineCache).name=l,r.slotTimelineCacheList.push(o),r.slotTimelineCacheDic[l]=o)}return r},i.initSlotTimelineCacheDic=function(t,e){var i;for(var n in this.slotTimelineCacheDic){var r=this.slotTimelineCacheDic[n];i=r.name,r.cacheGenerator=t[i],r.currentFrameCache=e[i]}},i.bindCacheUserSlotDic=function(t){for(var e in t)this.slotTimelineCacheDic[e].bindCacheUser(t[e])},i.addFrame=function(){this.frameNum++;for(var t=0,e=this.slotTimelineCacheList.length;t<e;t++)this.slotTimelineCacheList[t].addFrame()},i.update=function(t){for(var e=Math.floor(t*(this.frameNum-1)),i=0,n=this.slotTimelineCacheList.length;i<n;i++)this.slotTimelineCacheList[i].update(e)},e}();t.AnimationCache=e,egret.registerClass(e,"dragonBones.AnimationCache")}(dragonBones||(dragonBones={})),function(t){var e=function(){function e(){this.animationCacheDic={},this.slotFrameCacheDic={}}__define;var i=e.prototype;return e.initWithArmatureData=function(t,i){void 0===i&&(i=0);var n=new e;if(n.armatureData=t,i<=0){var r=t.animationDataList[0];r&&(n.frameRate=r.frameRate)}else n.frameRate=i;return n},i.initAllAnimationCache=function(){for(var e=this.armatureData.animationDataList.length,i=0;i<e;i++){var n=this.armatureData.animationDataList[i];this.animationCacheDic[n.name]=t.AnimationCache.initWithAnimationData(n,this.armatureData)}},i.initAnimationCache=function(e){this.animationCacheDic[e]=t.AnimationCache.initWithAnimationData(this.armatureData.getAnimationData(e),this.armatureData)},i.bindCacheUserArmatures=function(t){for(var e=t.length,i=0;i<e;i++){var n=t[i];this.bindCacheUserArmature(n)}},i.bindCacheUserArmature=function(t){var e;for(var i in t.animation.animationCacheManager=this,t._slotDic)(e=t._slotDic[i]).frameCache=this.slotFrameCacheDic[e.name]},i.setCacheGeneratorArmature=function(e){var i;for(var n in this.cacheGeneratorArmature=e,e._slotDic)i=e._slotDic[n],this.slotFrameCacheDic[i.name]=new t.SlotFrameCache;for(var r in this.animationCacheDic){this.animationCacheDic[r].initSlotTimelineCacheDic(e._slotDic,this.slotFrameCacheDic)}},i.generateAllAnimationCache=function(t){for(var e in this.animationCacheDic){var i=this.animationCacheDic[e];this.generateAnimationCache(i.name,t)}},i.generateAnimationCache=function(t,e){var i=this.cacheGeneratorArmature.enableCache;this.cacheGeneratorArmature.enableCache=!1;var n=this.animationCacheDic[t];if(n){var r=this.cacheGeneratorArmature.getAnimation().animationState,s=1/this.frameRate;e?this.cacheGeneratorArmature.getAnimation().gotoAndPlay(t,0,-1,0):this.cacheGeneratorArmature.getAnimation().gotoAndPlay(t,0,-1,1);var a,o=this.cacheGeneratorArmature.enableEventDispatch;this.cacheGeneratorArmature.enableEventDispatch=!1;do{a=r.progress,this.cacheGeneratorArmature.advanceTime(s),n.addFrame()}while(r.progress>=a&&r.progress<1);this.cacheGeneratorArmature.enableEventDispatch=o,this.resetCacheGeneratorArmature(),this.cacheGeneratorArmature.enableCache=i}},i.resetCacheGeneratorArmature=function(){this.cacheGeneratorArmature.resetAnimation()},i.getAnimationCache=function(t){return this.animationCacheDic[t]},e}();t.AnimationCacheManager=e,egret.registerClass(e,"dragonBones.AnimationCacheManager")}(dragonBones||(dragonBones={})),function(t){var e=function(){function e(){this.globalTransform=new t.DBTransform,this.globalTransformMatrix=new t.Matrix}__define;var i=e.prototype;return i.copy=function(t){this.globalTransform=t.globalTransform,this.globalTransformMatrix=t.globalTransformMatrix},i.clear=function(){this.globalTransform=e.ORIGIN_TRAMSFORM,this.globalTransformMatrix=e.ORIGIN_MATRIX},e.ORIGIN_TRAMSFORM=new t.DBTransform,e.ORIGIN_MATRIX=new t.Matrix,e}();t.FrameCache=e,egret.registerClass(e,"dragonBones.FrameCache")}(dragonBones||(dragonBones={})),function(t){var e=function(t){function e(){t.call(this),this.displayIndex=-1}__extends(e,t);__define;var i=e.prototype;return i.copy=function(e){t.prototype.copy.call(this,e),this.colorTransform=e.colorTransform,this.displayIndex=e.displayIndex},i.clear=function(){t.prototype.clear.call(this),this.colorTransform=null,this.displayIndex=-1},e}(t.FrameCache);t.SlotFrameCache=e,egret.registerClass(e,"dragonBones.SlotFrameCache")}(dragonBones||(dragonBones={})),function(t){var e=function(){function t(){this.frameCacheList=new Array}__define;var e=t.prototype;return e.addFrame=function(){},e.update=function(t){void 0===t&&(t=0),this.currentFrameCache.copy(this.frameCacheList[t])},e.bindCacheUser=function(t){t.frameCache=this.currentFrameCache},t}();t.TimelineCache=e,egret.registerClass(e,"dragonBones.TimelineCache")}(dragonBones||(dragonBones={})),function(t){var e=function(e){function i(){e.call(this)}__extends(i,e);__define;return i.prototype.addFrame=function(){var e=new t.SlotFrameCache;e.globalTransform.copy(this.cacheGenerator.global),e.globalTransformMatrix.copyFrom(this.cacheGenerator.globalTransformMatrix),this.cacheGenerator.colorChanged&&(e.colorTransform=t.ColorTransformUtil.cloneColor(this.cacheGenerator.colorTransform)),e.displayIndex=this.cacheGenerator.displayIndex,this.frameCacheList.push(e)},i}(t.TimelineCache);t.SlotTimelineCache=e,egret.registerClass(e,"dragonBones.SlotTimelineCache")}(dragonBones||(dragonBones={})),function(t){var e=function(t){function e(e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),t.call(this,e,i,n)}__extends(e,t);__define,e.prototype;return e}(egret.Event);t.Event=e,egret.registerClass(e,"dragonBones.Event")}(dragonBones||(dragonBones={})),function(t){var e=function(t){function e(e,i){void 0===i&&(i=!1),t.call(this,e)}__extends(e,t);var i=__define,n=e.prototype;return i(e,"MOVEMENT_CHANGE",function(){return e.FADE_IN}),i(n,"movementID",function(){return this.animationName}),i(n,"armature",function(){return this.target}),i(n,"animationName",function(){return this.animationState.name}),e.FADE_IN="fadeIn",e.FADE_OUT="fadeOut",e.START="start",e.COMPLETE="complete",e.LOOP_COMPLETE="loopComplete",e.FADE_IN_COMPLETE="fadeInComplete",e.FADE_OUT_COMPLETE="fadeOutComplete",e}(t.Event);t.AnimationEvent=e,egret.registerClass(e,"dragonBones.AnimationEvent")}(dragonBones||(dragonBones={})),function(t){var e=function(t){function e(e){t.call(this,e)}__extends(e,t);__define,e.prototype;return e.Z_ORDER_UPDATED="zOrderUpdated",e}(t.Event);t.ArmatureEvent=e,egret.registerClass(e,"dragonBones.ArmatureEvent")}(dragonBones||(dragonBones={})),function(t){var e=function(t){function e(e,i){void 0===i&&(i=!1),t.call(this,e)}__extends(e,t);var i=__define,n=e.prototype;return i(e,"MOVEMENT_FRAME_EVENT",function(){return e.ANIMATION_FRAME_EVENT}),i(n,"armature",function(){return this.target}),e.ANIMATION_FRAME_EVENT="animationFrameEvent",e.BONE_FRAME_EVENT="boneFrameEvent",e}(t.Event);t.FrameEvent=e,egret.registerClass(e,"dragonBones.FrameEvent")}(dragonBones||(dragonBones={})),function(t){var e=function(t){function e(e,i){void 0===i&&(i=!1),t.call(this,e)}__extends(e,t);__define,e.prototype;return e.SOUND="sound",e}(t.Event);t.SoundEvent=e,egret.registerClass(e,"dragonBones.SoundEvent")}(dragonBones||(dragonBones={})),function(t){var e=function(e){function n(t){if(e.call(this),this.dragonBonesDataDic={},this.textureAtlasDic={},t!=this)throw new Error(egret.getString(4001))}__extends(n,e);__define;var r=n.prototype;return r.dispose=function(t){if(void 0===t&&(t=!0),t){for(var e in this.dragonBonesDataDic)this.dragonBonesDataDic[e].dispose(),delete this.dragonBonesDataDic[e];for(var i in this.textureAtlasDic){var n=this.textureAtlasDic[i];if(n)for(var r=0,s=n.length;r<s;r++)n[r].dispose();delete this.textureAtlasDic[i]}}this.dragonBonesDataDic=null,this.textureAtlasDic=null},r.getDragonBonesData=function(t){return this.dragonBonesDataDic[t]},r.getSkeletonData=function(t){return this.getDragonBonesData(t)},r.addDragonBonesData=function(t,e){if(void 0===e&&(e=null),!t)throw new Error;if(!(e=e||t.name))throw new Error(egret.getString(4002));this.dragonBonesDataDic[e]=t},r.addSkeletonData=function(t,e){void 0===e&&(e=null),this.addDragonBonesData(t,e)},r.removeDragonBonesData=function(t){delete this.dragonBonesDataDic[t]},r.removeSkeletonData=function(t){delete this.dragonBonesDataDic[t]},r.getTextureAtlas=function(t){return this.textureAtlasDic[t]},r.addTextureAtlas=function(t,e){if(void 0===e&&(e=null),!t)throw new Error;if(!e&&t.hasOwnProperty("name")&&(e=t.name),!e)throw new Error(egret.getString(4002));var i=this.textureAtlasDic[e];null==i&&(i=[],this.textureAtlasDic[e]=i),-1==i.indexOf(t)&&i.push(t)},r.removeTextureAtlas=function(t){delete this.textureAtlasDic[t]},r.getTextureDisplay=function(t,e,i,n){var r,s,a,o;if(void 0===e&&(e=null),void 0===i&&(i=NaN),void 0===n&&(n=NaN),e){if(s=this.textureAtlasDic[e])for(a=0,o=s.length;a<o&&!(r=s[a]).getRegion(t);a++)r=null}else for(e in this.textureAtlasDic)if(s=this.textureAtlasDic[e]){for(a=0,o=s.length;a<o&&!(r=s[a]).getRegion(t);a++)r=null;if(null!=r)break}if(!r)return null;if(isNaN(i)||isNaN(n)){var l=this.dragonBonesDataDic[e];if(l=l||this.findFirstDragonBonesData()){var h=l.getDisplayDataByName(t);h&&(i=h.pivot.x,n=h.pivot.y)}}return this._generateDisplay(r,t,i,n)},r.buildArmature=function(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null);var r={};this.fillBuildArmatureDataPackageArmatureInfo(t,e,r),null==i&&(i=r.dragonBonesDataName);var s=r.dragonBonesData,a=r.armatureData;return a?this.buildArmatureUsingArmatureDataFromTextureAtlas(s,a,i,n):null},r.buildFastArmature=function(t,e,n,r){void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=null);var s=new i;this.fillBuildArmatureDataPackageArmatureInfo(t,e,s),null==n&&(n=s.dragonBonesDataName);var a=s.dragonBonesData,o=s.armatureData;return o?this.buildFastArmatureUsingArmatureDataFromTextureAtlas(a,o,n,r):null},r.buildArmatureUsingArmatureDataFromTextureAtlas=function(t,e,i,n){void 0===n&&(n=null);var r=this._generateArmature();return r.name=e.name,r.__dragonBonesData=t,r._armatureData=e,r.animation.animationDataList=e.animationDataList,this._buildBones(r),this._buildSlots(r,n,i),r.advanceTime(0),r},r.buildFastArmatureUsingArmatureDataFromTextureAtlas=function(t,e,i,n){void 0===n&&(n=null);var r=this._generateFastArmature();return r.name=e.name,r.__dragonBonesData=t,r._armatureData=e,r.animation.animationDataList=e.animationDataList,this._buildFastBones(r),this._buildFastSlots(r,n,i),r.advanceTime(0),r},r.copyAnimationsToArmature=function(e,i,n,r){void 0===n&&(n=null),void 0===r&&(r=!0);var s={};if(!this.fillBuildArmatureDataPackageArmatureInfo(i,n,s))return!1;var a=s.armatureData;e.animation.animationDataList=a.animationDataList;for(var o,l,h,u,c,d=a.getSkinData(""),f=e.getSlots(!1),p=0,_=f.length,m=0;m<_;m++){p=(h=(l=f[m]).displayList).length;for(var g=0;g<p;g++)(u=h[g])instanceof t.Armature&&(c=u,(o=d.getSlotData(l.name).displayDataList[g]).type==t.DisplayData.ARMATURE&&this.copyAnimationsToArmature(c,o.name,s.dragonBonesDataName,r))}return!0},r.fillBuildArmatureDataPackageArmatureInfo=function(t,e,i){if(e)return i.dragonBonesDataName=e,i.dragonBonesData=this.dragonBonesDataDic[e],i.armatureData=i.dragonBonesData.getArmatureDataByName(t),!0;for(e in this.dragonBonesDataDic)if(i.dragonBonesData=this.dragonBonesDataDic[e],i.armatureData=i.dragonBonesData.getArmatureDataByName(t),i.armatureData)return i.dragonBonesDataName=e,!0;return!1},r.fillBuildArmatureDataPackageTextureInfo=function(t,e){e.textureAtlas=this.textureAtlasDic[t||e.dragonBonesDataName]},r.findFirstDragonBonesData=function(){for(var t in this.dragonBonesDataDic){var e=this.dragonBonesDataDic[t];if(e)return e}return null},r.findFirstTextureAtlas=function(){for(var t in this.textureAtlasDic){var e=this.textureAtlasDic[t];if(e)return e}return null},r._buildBones=function(e){for(var i,n,r,s=e.armatureData.boneDataList,a=0;a<s.length;a++)i=s[a],n=t.Bone.initWithBoneData(i),(r=i.parent)&&null==e.armatureData.getBoneData(r)&&(r=null),e.addBone(n,r,!0);e._updateAnimationAfterBoneListChanged()},r._buildSlots=function(e,i,n){if(e.armatureData.getSkinData(i)){e.armatureData.setSkinData(i);for(var r,s,a,o=[],l=e.armatureData.slotDataList,h=0;h<l.length;h++)if(r=l[h],a=e.getBone(r.parent)){(s=this._generateSlot()).initWithSlotData(r),a.addSlot(s),o.length=0;for(var u=r.displayDataList.length;u--;){var c=r.displayDataList[u];switch(c.type){case t.DisplayData.ARMATURE:var d=this.buildArmatureUsingArmatureDataFromTextureAtlas(e.__dragonBonesData,e.__dragonBonesData.getArmatureDataByName(c.name),n,i);o[u]=d;break;case t.DisplayData.IMAGE:default:o[u]=this.getTextureDisplay(c.name,n,c.pivot.x,c.pivot.y)}}for(var f=0,p=o.length;f<p;f++){var _=o[f];if(_&&(_ instanceof t.Armature&&(_=_.display),_.hasOwnProperty("name")))try{_.name=s.name}catch(t){}}s.displayList=o,s._changeDisplay(r.displayIndex)}}},r._buildFastBones=function(e){for(var i,n,r=e.armatureData.boneDataList,s=0;s<r.length;s++)i=r[s],n=t.FastBone.initWithBoneData(i),e.addBone(n,i.parent)},r._buildFastSlots=function(e,i,n){if(e.armatureData.getSkinData(i)){e.armatureData.setSkinData(i);for(var r,s,a=[],o=e.armatureData.slotDataList,l=0;l<o.length;l++){a.length=0,r=o[l],(s=this._generateFastSlot()).initWithSlotData(r);for(var h=r.displayDataList.length;h--;){var u=r.displayDataList[h];switch(u.type){case t.DisplayData.ARMATURE:var c=this.buildFastArmatureUsingArmatureDataFromTextureAtlas(e.__dragonBonesData,e.__dragonBonesData.getArmatureDataByName(u.name),n,i);a[h]=c,s.hasChildArmature=!0;break;case t.DisplayData.IMAGE:default:a[h]=this.getTextureDisplay(u.name,n,u.pivot.x,u.pivot.y)}}for(var d=a.length,f=0;f<d;f++){var p=a[f];if(p&&(p instanceof t.FastArmature&&(p=p.display),p.hasOwnProperty("name")))try{p.name=s.name}catch(t){}}s.initDisplayList(a.concat()),e.addSlot(s,r.parent),s._changeDisplayIndex(r.displayIndex)}}},r._generateArmature=function(){return null},r._generateSlot=function(){return null},r._generateFastArmature=function(){return null},r._generateFastSlot=function(){return null},r._generateDisplay=function(t,e,i,n){return null},n._helpMatrix=new t.Matrix,n}(t.EventDispatcher);t.BaseFactory=e,egret.registerClass(e,"dragonBones.BaseFactory");var i=function(){function t(){}__define,t.prototype;return t}();t.BuildArmatureDataPackage=i,egret.registerClass(i,"dragonBones.BuildArmatureDataPackage")}(dragonBones||(dragonBones={})),function(t){var e=function(e){function i(i){e.call(this),this.isCacheManagerExclusive=!1,this._enableEventDispatch=!0,this.useCache=!0,this._display=i,this._animation=new t.FastAnimation(this),this._slotsZOrderChanged=!1,this._armatureData=null,this.boneList=[],this._boneDic={},this.slotList=[],this._slotDic={},this.slotHasChildArmatureList=[],this._eventList=[],this._delayDispose=!1,this._lockDispose=!1}__extends(i,e);var n=__define,r=i.prototype;return r.dispose=function(){if(this._delayDispose=!0,this._animation&&!this._lockDispose){this.userData=null,this._animation.dispose();for(var t=this.slotList.length;t--;)this.slotList[t].dispose();for(t=this.boneList.length;t--;)this.boneList[t].dispose();this.slotList.length=0,this.boneList.length=0,this._armatureData=null,this._animation=null,this.slotList=null,this.boneList=null,this._eventList=null}},r.advanceTime=function(t){this._lockDispose=!0,this._animation.advanceTime(t);var e=0;if(this._animation.animationState.isUseCache())for(this.useCache||(this.useCache=!0),e=this.slotList.length;e--;)this.slotList[e].updateByCache();else{if(this.useCache)for(this.useCache=!1,e=this.slotList.length;e--;)this.slotList[e].switchTransformToBackup();for(e=this.boneList.length;e--;)this.boneList[e].update();for(e=this.slotList.length;e--;)this.slotList[e]._update()}for(e=this.slotHasChildArmatureList.length;e--;){var i=this.slotHasChildArmatureList[e].childArmature;i&&i.advanceTime(t)}for(this._slotsZOrderChanged&&this.updateSlotsZOrder();this._eventList.length>0;)this.dispatchEvent(this._eventList.shift());this._lockDispose=!1,this._delayDispose&&this.dispose()},r.enableAnimationCache=function(e,i,n){void 0===i&&(i=null),void 0===n&&(n=!0);var r=t.AnimationCacheManager.initWithArmatureData(this.armatureData,e);if(i)for(var s=i.length,a=0;a<s;a++){var o=i[a];r.initAnimationCache(o)}else r.initAllAnimationCache();return r.setCacheGeneratorArmature(this),r.generateAllAnimationCache(n),r.bindCacheUserArmature(this),this.enableCache=!0,r},r.getBone=function(t){return this._boneDic[t]},r.getSlot=function(t){return this._slotDic[t]},r.getBoneByDisplay=function(t){var e=this.getSlotByDisplay(t);return e?e.parent:null},r.getSlotByDisplay=function(t){if(t)for(var e=0,i=this.slotList.length;e<i;e++)if(this.slotList[e].display==t)return this.slotList[e];return null},r.getSlots=function(t){return void 0===t&&(t=!0),t?this.slotList.concat():this.slotList},r._updateBonesByCache=function(){for(var t=this.boneList.length;t--;)this.boneList[t].update()},r.addBone=function(t,e){var i;void 0===e&&(e=null),e&&(i=this.getBone(e)).boneList.push(t),t.armature=this,t.setParent(i),this.boneList.unshift(t),this._boneDic[t.name]=t},r.addSlot=function(t,e){var i=this.getBone(e);if(!i)throw new Error;t.armature=this,t.setParent(i),i.slotList.push(t),t._addDisplayToContainer(this.display),this.slotList.push(t),this._slotDic[t.name]=t,t.hasChildArmature&&this.slotHasChildArmatureList.push(t)},r.updateSlotsZOrder=function(){this.slotList.sort(this.sortSlot);for(var t=this.slotList.length;t--;){var e=this.slotList[t];(e._frameCache&&e._frameCache.displayIndex>=0||!e._frameCache&&e.displayIndex>=0)&&e._addDisplayToContainer(this._display)}this._slotsZOrderChanged=!1},r.sortBoneList=function(){var e=this.boneList.length;if(0!=e){for(var i=[];e--;){for(var n=0,r=this.boneList[e],s=r;s;)n++,s=s.parent;i[e]=[n,r]}for(i.sort(t.ArmatureData.sortBoneDataHelpArrayDescending),e=i.length;e--;)this.boneList[e]=i[e][1];i.length=0}},r.arriveAtFrame=function(e,i){if(e.event&&this.hasEventListener(t.FrameEvent.ANIMATION_FRAME_EVENT)){var n=new t.FrameEvent(t.FrameEvent.ANIMATION_FRAME_EVENT);n.animationState=i,n.frameLabel=e.event,this._addEvent(n)}e.action&&this.animation.gotoAndPlay(e.action)},r.invalidUpdate=function(t){if(void 0===t&&(t=null),t){var e=this.getBone(t);e&&e.invalidUpdate()}else for(var i=this.boneList.length;i--;)this.boneList[i].invalidUpdate()},r.resetAnimation=function(){this.animation.animationState._resetTimelineStateList();for(var t=this.boneList.length,e=0;e<t;e++){this.boneList[e]._timelineState=null}this.animation.stop()},r.sortSlot=function(t,e){return t.zOrder<e.zOrder?1:-1},r.getAnimation=function(){return this._animation},n(r,"armatureData",function(){return this._armatureData}),n(r,"animation",function(){return this._animation}),n(r,"display",function(){return this._display}),n(r,"enableCache",function(){return this._enableCache},function(t){this._enableCache=t}),n(r,"enableEventDispatch",function(){return this._enableEventDispatch},function(t){this._enableEventDispatch=t}),r._addEvent=function(t){this._enableEventDispatch&&this._eventList.push(t)},i}(t.EventDispatcher);t.FastArmature=e,egret.registerClass(e,"dragonBones.FastArmature",["dragonBones.ICacheableArmature","dragonBones.IArmature","dragonBones.IAnimatable"])}(dragonBones||(dragonBones={})),function(t){var e=function(){function e(){this._globalTransformMatrix=new t.Matrix,this._global=new t.DBTransform,this._origin=new t.DBTransform,this._visible=!0,this.armature=null,this._parent=null,this.userData=null,this.inheritRotation=!0,this.inheritScale=!0,this.inheritTranslation=!0}var i=__define,n=e.prototype;return n.updateByCache=function(){this._global=this._frameCache.globalTransform,this._globalTransformMatrix=this._frameCache.globalTransformMatrix},n.switchTransformToBackup=function(){this._globalBackup||(this._globalBackup=new t.DBTransform,this._globalTransformMatrixBackup=new t.Matrix),this._global=this._globalBackup,this._globalTransformMatrix=this._globalTransformMatrixBackup},n.setParent=function(t){this._parent=t},n.dispose=function(){this.userData=null,this._globalTransformMatrix=null,this._global=null,this._origin=null,this.armature=null,this._parent=null},n._calculateParentTransform=function(){if(this.parent&&(this.inheritTranslation||this.inheritRotation||this.inheritScale)){var i=this._parent._global,n=this._parent._globalTransformMatrix;return(this.inheritTranslation||0==i.x&&0==i.y)&&(this.inheritRotation||0==i.skewX&&0==i.skewY)&&(this.inheritScale||1==i.scaleX&&1==i.scaleY)||((i=e._tempParentGlobalTransform).copy(this._parent._global),this.inheritTranslation||(i.x=0,i.y=0),this.inheritScale||(i.scaleX=1,i.scaleY=1),this.inheritRotation||(i.skewX=0,i.skewY=0),n=t.DBObject._tempParentGlobalTransformMatrix,t.TransformUtil.transformToMatrix(i,n)),e.tempOutputObj.parentGlobalTransform=i,e.tempOutputObj.parentGlobalTransformMatrix=n,e.tempOutputObj}return null},n._updateGlobal=function(){this._calculateRelativeParentTransform();var e=this._calculateParentTransform();if(null!=e){var i=e.parentGlobalTransformMatrix,n=e.parentGlobalTransform,r=this._global.x,s=this._global.y;this._global.x=i.a*r+i.c*s+i.tx,this._global.y=i.d*s+i.b*r+i.ty,this.inheritRotation&&(this._global.skewX+=n.skewX,this._global.skewY+=n.skewY),this.inheritScale&&(this._global.scaleX*=n.scaleX,this._global.scaleY*=n.scaleY)}return t.TransformUtil.transformToMatrix(this._global,this._globalTransformMatrix,!0),e},n._calculateRelativeParentTransform=function(){},i(n,"name",function(){return this._name},function(t){this._name=t}),i(n,"global",function(){return this._global}),i(n,"globalTransformMatrix",function(){return this._globalTransformMatrix}),i(n,"origin",function(){return this._origin}),i(n,"parent",function(){return this._parent}),i(n,"visible",function(){return this._visible},function(t){this._visible=t}),i(n,"frameCache",void 0,function(t){this._frameCache=t}),e._tempParentGlobalTransform=new t.DBTransform,e.tempOutputObj={},e}();t.FastDBObject=e,egret.registerClass(e,"dragonBones.FastDBObject")}(dragonBones||(dragonBones={})),function(t){var e=function(e){function i(){e.call(this),this.slotList=[],this.boneList=[],this._needUpdate=0,this._needUpdate=2,this._tweenPivot=new t.Point}__extends(i,e);var n=__define,r=i.prototype;return i.initWithBoneData=function(t){var e=new i;return e.name=t.name,e.inheritRotation=t.inheritRotation,e.inheritScale=t.inheritScale,e.origin.copy(t.transform),e},r.getBones=function(t){return void 0===t&&(t=!0),t?this.boneList.concat():this.boneList},r.getSlots=function(t){return void 0===t&&(t=!0),t?this.slotList.concat():this.slotList},r.dispose=function(){e.prototype.dispose.call(this),this._timelineState=null,this._tweenPivot=null},r.invalidUpdate=function(){this._needUpdate=2},r._calculateRelativeParentTransform=function(){this._global.copy(this._origin),this._timelineState&&this._global.add(this._timelineState._transform)},r.updateByCache=function(){e.prototype.updateByCache.call(this),this._global=this._frameCache.globalTransform,this._globalTransformMatrix=this._frameCache.globalTransformMatrix},r.update=function(t){void 0===t&&(t=!1),this._needUpdate--,(t||this._needUpdate>0||this._parent&&this._parent._needUpdate>0)&&(this._needUpdate=1,this.blendingTimeline(),this._updateGlobal())},r._hideSlots=function(){for(var t=this.slotList.length,e=0;e<t;e++){this.slotList[e].hideSlots()}},r.blendingTimeline=function(){this._timelineState&&(this._tweenPivot.x=this._timelineState._pivot.x,this._tweenPivot.y=this._timelineState._pivot.y)},r.arriveAtFrame=function(e,i){if(e.event&&this.armature.hasEventListener(t.FrameEvent.BONE_FRAME_EVENT)){var n=new t.FrameEvent(t.FrameEvent.BONE_FRAME_EVENT);n.bone=this,n.animationState=i,n.frameLabel=e.event,this.armature._addEvent(n)}},n(r,"childArmature",function(){var t=this.slot;return t?t.childArmature:null}),n(r,"display",function(){var t=this.slot;return t?t.display:null},function(t){var e=this.slot;e&&(e.display=t)}),n(r,"visible",void 0,function(t){if(this._visible!=t){this._visible=t;for(var e=0,i=this.armature.slotList.length;e<i;e++)this.armature.slotList[e].parent==this&&this.armature.slotList[e]._updateDisplayVisible(this._visible)}}),n(r,"slot",function(){return this.slotList.length>0?this.slotList[0]:null}),i}(t.FastDBObject);t.FastBone=e,egret.registerClass(e,"dragonBones.FastBone")}(dragonBones||(dragonBones={})),function(t){var e=function(e){function i(i){if(e.call(this),this._currentDisplayIndex=0,i!=this)throw new Error("Abstract class can not be instantiated!");this.hasChildArmature=!1,this._currentDisplayIndex=-1,this._originZOrder=0,this._tweenZOrder=0,this._offsetZOrder=0,this._colorTransform=new t.ColorTransform,this._isColorChanged=!1,this._displayDataList=null,this._currentDisplay=null,this.inheritRotation=!0,this.inheritScale=!0}__extends(i,e);var n=__define,r=i.prototype;return r.initWithSlotData=function(t){this.name=t.name,this.blendMode=t.blendMode,this._originZOrder=t.zOrder,this._displayDataList=t.displayDataList,this._originDisplayIndex=t.displayIndex},r.dispose=function(){this._displayList&&(e.prototype.dispose.call(this),this._displayDataList=null,this._displayList=null,this._currentDisplay=null)},r.updateByCache=function(){e.prototype.updateByCache.call(this),this._updateTransform();var i=this._frameCache.colorTransform,n=null!=i;(this.colorChanged!=n||this.colorChanged&&n&&!t.ColorTransformUtil.isEqual(this._colorTransform,i))&&(i=i||t.ColorTransformUtil.originalColor,this._updateDisplayColor(i.alphaOffset,i.redOffset,i.greenOffset,i.blueOffset,i.alphaMultiplier,i.redMultiplier,i.greenMultiplier,i.blueMultiplier,n)),this._changeDisplayIndex(this._frameCache.displayIndex)},r._update=function(){this._parent._needUpdate<=0||(this._updateGlobal(),this._updateTransform())},r._calculateRelativeParentTransform=function(){this._global.copy(this._origin),this._global.x+=this._parent._tweenPivot.x,this._global.y+=this._parent._tweenPivot.y},r.initDisplayList=function(t){this._displayList=t},r.clearCurrentDisplay=function(){if(this.hasChildArmature){var t=this.childArmature;t&&t.resetAnimation()}var e=this._getDisplayIndex();return this._removeDisplayFromContainer(),e},r._changeDisplayIndex=function(t){if(void 0===t&&(t=0),this._currentDisplayIndex!=t){var e=-1;this._currentDisplayIndex>=0&&(e=this.clearCurrentDisplay()),this._currentDisplayIndex=t,this._currentDisplayIndex>=0&&(this._origin.copy(this._displayDataList[this._currentDisplayIndex].transform),this.initCurrentDisplay(e))}},r.changeSlotDisplay=function(t){var e=this.clearCurrentDisplay();this._displayList[this._currentDisplayIndex]=t,this.initCurrentDisplay(e)},r.initCurrentDisplay=function(e){void 0===e&&(e=0);var i=this._displayList[this._currentDisplayIndex];if(i?i instanceof t.FastArmature?this._currentDisplay=i.display:this._currentDisplay=i:this._currentDisplay=null,this._updateDisplay(this._currentDisplay),this._currentDisplay&&(-1!=e?this._addDisplayToContainer(this.armature.display,e):(this.armature._slotsZOrderChanged=!0,this._addDisplayToContainer(this.armature.display)),this._blendMode&&this._updateDisplayBlendMode(this._blendMode),this._isColorChanged&&this._updateDisplayColor(this._colorTransform.alphaOffset,this._colorTransform.redOffset,this._colorTransform.greenOffset,this._colorTransform.blueOffset,this._colorTransform.alphaMultiplier,this._colorTransform.redMultiplier,this._colorTransform.greenMultiplier,this._colorTransform.blueMultiplier,!0),this._updateTransform(),i instanceof t.FastArmature)){var n=i;this.armature&&this.armature.animation.animationState&&n.animation.hasAnimation(this.armature.animation.animationState.name)?n.animation.gotoAndPlay(this.armature.animation.animationState.name):n.animation.play()}},n(r,"visible",void 0,function(t){this._visible!=t&&(this._visible=t,this._updateDisplayVisible(this._visible))}),n(r,"displayList",function(){return this._displayList},function(t){if(!t)throw new Error;var e=t[this._currentDisplayIndex],i=this._currentDisplayIndex>=0&&this._displayList[this._currentDisplayIndex]!=e;this._displayList=t,i&&this.changeSlotDisplay(e)}),n(r,"display",function(){return this._currentDisplay},function(t){this._currentDisplayIndex<0||this._displayList[this._currentDisplayIndex]!=t&&this.changeSlotDisplay(t)}),n(r,"childArmature",function(){return this._displayList[this._currentDisplayIndex]instanceof t.Armature||this._displayList[this._currentDisplayIndex]instanceof t.FastArmature?this._displayList[this._currentDisplayIndex]:null},function(t){this.display=t}),n(r,"zOrder",function(){return this._originZOrder+this._tweenZOrder+this._offsetZOrder},function(t){this.zOrder!=t&&(this._offsetZOrder=t-this._originZOrder-this._tweenZOrder,this.armature&&(this.armature._slotsZOrderChanged=!0))}),n(r,"blendMode",function(){return this._blendMode},function(t){this._blendMode!=t&&(this._blendMode=t,this._updateDisplayBlendMode(this._blendMode))}),n(r,"colorTransform",function(){return this._colorTransform}),n(r,"displayIndex",function(){return this._currentDisplayIndex}),n(r,"colorChanged",function(){return this._isColorChanged}),r._updateDisplay=function(t){throw new Error("Abstract method needs to be implemented in subclass!")},r._getDisplayIndex=function(){throw new Error("Abstract method needs to be implemented in subclass!")},r._addDisplayToContainer=function(t,e){throw void 0===e&&(e=-1),new Error("Abstract method needs to be implemented in subclass!")},r._removeDisplayFromContainer=function(){throw new Error("Abstract method needs to be implemented in subclass!")},r._updateTransform=function(){throw new Error("Abstract method needs to be implemented in subclass!")},r._updateDisplayVisible=function(t){throw new Error("Abstract method needs to be implemented in subclass!")},r._updateDisplayColor=function(t,e,i,n,r,s,a,o,l){void 0===l&&(l=!1),this._colorTransform.alphaOffset=t,this._colorTransform.redOffset=e,this._colorTransform.greenOffset=i,this._colorTransform.blueOffset=n,this._colorTransform.alphaMultiplier=r,this._colorTransform.redMultiplier=s,this._colorTransform.greenMultiplier=a,this._colorTransform.blueMultiplier=o,this._isColorChanged=l},r._updateDisplayBlendMode=function(t){throw new Error("Abstract method needs to be implemented in subclass!")},r._arriveAtFrame=function(t,e){var i=t,n=i.displayIndex;if(this._changeDisplayIndex(n),this._updateDisplayVisible(i.visible),n>=0&&(isNaN(i.zOrder)||i.zOrder==this._tweenZOrder||(this._tweenZOrder=i.zOrder,this.armature._slotsZOrderChanged=!0)),t.action){var r=this.childArmature;r&&r.getAnimation().gotoAndPlay(t.action)}},r.hideSlots=function(){this._changeDisplayIndex(-1),this._removeDisplayFromContainer(),this._frameCache&&this._frameCache.clear()},r._updateGlobal=function(){this._calculateRelativeParentTransform(),t.TransformUtil.transformToMatrix(this._global,this._globalTransformMatrix,!0);var e=this._calculateParentTransform();return e&&(this._globalTransformMatrix.concat(e.parentGlobalTransformMatrix),t.TransformUtil.matrixToTransform(this._globalTransformMatrix,this._global,this._global.scaleX*e.parentGlobalTransform.scaleX>=0,this._global.scaleY*e.parentGlobalTransform.scaleY>=0)),e},r._resetToOrigin=function(){this._changeDisplayIndex(this._originDisplayIndex),this._updateDisplayColor(0,0,0,0,1,1,1,1,!0)},i}(t.FastDBObject);t.FastSlot=e,egret.registerClass(e,"dragonBones.FastSlot",["dragonBones.ISlotCacheGenerator","dragonBones.ICacheUser"])}(dragonBones||(dragonBones={})),function(t){var e=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}__define;return t.prototype.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},t}();t.Point=e,egret.registerClass(e,"dragonBones.Point")}(dragonBones||(dragonBones={})),function(t){var e=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=t,this.y=e,this.width=i,this.height=n}__define,t.prototype;return t}();t.Rectangle=e,egret.registerClass(e,"dragonBones.Rectangle")}(dragonBones||(dragonBones={})),function(t){var e=function(){function e(){}__define,e.prototype;return e.parseDragonBonesData=function(i){if(!i)throw new Error;var n=i[t.ConstValues.A_VERSION];if((n=n.toString()).toString()!=t.DragonBones.DATA_VERSION&&n.toString()!=t.DragonBones.PARENT_COORDINATE_DATA_VERSION&&"2.3"!=n.toString())throw new Error("Nonsupport version!");var r=e.getNumber(i,t.ConstValues.A_FRAME_RATE,0)||0,s=new t.DragonBonesData;s.name=i[t.ConstValues.A_NAME],s.isGlobal="0"!=i[t.ConstValues.A_IS_GLOBAL],e.tempDragonBonesData=s;for(var a=i[t.ConstValues.ARMATURE],o=0,l=a.length;o<l;o++){var h=a[o];s.addArmatureData(e.parseArmatureData(h,r))}return e.tempDragonBonesData=null,s},e.parseArmatureData=function(i,n){var r,s,a=new t.ArmatureData;a.name=i[t.ConstValues.A_NAME];var o=i[t.ConstValues.BONE];for(r=0,s=o.length;r<s;r++){var l=o[r];a.addBoneData(e.parseBoneData(l))}var h=i[t.ConstValues.SKIN];for(r=0,s=h.length;r<s;r++)for(var u=h[r][t.ConstValues.SLOT],c=0,d=u.length;c<d;c++){var f=u[c];a.addSlotData(e.parseSlotData(f))}for(r=0,s=h.length;r<s;r++){var p=h[r];a.addSkinData(e.parseSkinData(p))}e.tempDragonBonesData.isGlobal&&t.DBDataUtil.transformArmatureData(a),a.sortBoneDataList();var _=i[t.ConstValues.ANIMATION];for(r=0,s=_.length;r<s;r++){var m=_[r],g=e.parseAnimationData(m,n);t.DBDataUtil.addHideTimeline(g,a),t.DBDataUtil.transformAnimationData(g,a,e.tempDragonBonesData.isGlobal),a.addAnimationData(g)}return a},e.parseBoneData=function(i){var n=new t.BoneData;return n.name=i[t.ConstValues.A_NAME],n.parent=i[t.ConstValues.A_PARENT],n.length=Number(i[t.ConstValues.A_LENGTH])||0,n.inheritRotation=e.getBoolean(i,t.ConstValues.A_INHERIT_ROTATION,!0),n.inheritScale=e.getBoolean(i,t.ConstValues.A_INHERIT_SCALE,!0),e.parseTransform(i[t.ConstValues.TRANSFORM],n.transform),e.tempDragonBonesData.isGlobal&&n.global.copy(n.transform),n},e.parseSkinData=function(i){var n=new t.SkinData;n.name=i[t.ConstValues.A_NAME];for(var r=i[t.ConstValues.SLOT],s=0,a=r.length;s<a;s++){var o=r[s];n.addSlotData(e.parseSkinSlotData(o))}return n},e.parseSkinSlotData=function(i){var n=new t.SlotData;n.name=i[t.ConstValues.A_NAME],n.parent=i[t.ConstValues.A_PARENT],n.zOrder=i[t.ConstValues.A_Z_ORDER],n.zOrder=e.getNumber(i,t.ConstValues.A_Z_ORDER,0)||0,n.blendMode=i[t.ConstValues.A_BLENDMODE];var r=i[t.ConstValues.DISPLAY];if(r)for(var s=0,a=r.length;s<a;s++){var o=r[s];n.addDisplayData(e.parseDisplayData(o))}return n},e.parseSlotData=function(i){var n=new t.SlotData;return n.name=i[t.ConstValues.A_NAME],n.parent=i[t.ConstValues.A_PARENT],n.zOrder=i[t.ConstValues.A_Z_ORDER],n.zOrder=e.getNumber(i,t.ConstValues.A_Z_ORDER,0)||0,n.blendMode=i[t.ConstValues.A_BLENDMODE],n.displayIndex=0,n},e.parseDisplayData=function(i){var n=new t.DisplayData;return n.name=i[t.ConstValues.A_NAME],n.type=i[t.ConstValues.A_TYPE],e.parseTransform(i[t.ConstValues.TRANSFORM],n.transform,n.pivot),null!=e.tempDragonBonesData&&e.tempDragonBonesData.addDisplayData(n),n},e.parseAnimationData=function(i,n){var r=new t.AnimationData;r.name=i[t.ConstValues.A_NAME],r.frameRate=n,r.duration=Math.round(1e3*(e.getNumber(i,t.ConstValues.A_DURATION,1)||1)/n),r.playTimes=e.getNumber(i,t.ConstValues.A_LOOP,1),r.playTimes=NaN!=r.playTimes?r.playTimes:1,r.fadeTime=e.getNumber(i,t.ConstValues.A_FADE_IN_TIME,0)||0,r.scale=e.getNumber(i,t.ConstValues.A_SCALE,1)||0,r.tweenEasing=e.getNumber(i,t.ConstValues.A_TWEEN_EASING,NaN),r.autoTween=e.getBoolean(i,t.ConstValues.A_AUTO_TWEEN,!0);var s=i[t.ConstValues.FRAME],a=0,o=0;if(s)for(a=0,o=s.length;a<o;a++){var l=s[a],h=e.parseTransformFrame(l,null,n);r.addFrame(h)}e.parseTimeline(i,r);var u,c=r.duration,d=i[t.ConstValues.TIMELINE];if(d){for(a=0,o=d.length;a<o;a++){var f=d[a],p=e.parseTransformTimeline(f,r.duration,n);p=e.parseTransformTimeline(f,r.duration,n),c=Math.min(c,p.frameList[p.frameList.length-1].duration),r.addTimeline(p);var _=e.parseSlotTimeline(f,r.duration,n);if(r.addSlotTimeline(_),r.autoTween&&!u)for(var m,g=0,v=_.frameList.length;g<v;g++)if((m=_.frameList[g])&&m.displayIndex<0){u=!0;break}}var y=r.tweenEasing;if(u){for(o=r.slotTimelineList.length,a=0;a<o;a++){var b,E,T;for(_=r.slotTimelineList[a],p=r.timelineList[a],g=0,v=_.frameList.length;g<v;g++)E=_.frameList[g],b=p.frameList[g],T=g==v-1?_.frameList[0]:_.frameList[g+1],E.displayIndex<0||T.displayIndex<0?b.tweenEasing=E.tweenEasing=NaN:10==y?b.tweenEasing=E.tweenEasing=0:isNaN(y)?10==b.tweenEasing&&(b.tweenEasing=0):b.tweenEasing=E.tweenEasing=y}r.autoTween=!1}}return r.frameList.length>0&&(c=Math.min(c,r.frameList[r.frameList.length-1].duration)),r.lastFrameDuration=c,r},e.parseSlotTimeline=function(i,n,r){var s=new t.SlotTimeline;s.name=i[t.ConstValues.A_NAME],s.scale=e.getNumber(i,t.ConstValues.A_SCALE,1)||0,s.offset=e.getNumber(i,t.ConstValues.A_OFFSET,0)||0,s.duration=n;for(var a=i[t.ConstValues.FRAME],o=0,l=a.length;o<l;o++){var h=a[o],u=e.parseSlotFrame(h,r);s.addFrame(u)}return e.parseTimeline(i,s),s},e.parseSlotFrame=function(i,n){var r=new t.SlotFrame;e.parseFrame(i,r,n),r.visible=!e.getBoolean(i,t.ConstValues.A_HIDE,!1),r.tweenEasing=e.getNumber(i,t.ConstValues.A_TWEEN_EASING,10),r.displayIndex=Math.floor(e.getNumber(i,t.ConstValues.A_DISPLAY_INDEX,0)||0),r.zOrder=e.getNumber(i,t.ConstValues.A_Z_ORDER,e.tempDragonBonesData.isGlobal?NaN:0);var s=i[t.ConstValues.COLOR_TRANSFORM];return s&&(r.color=new t.ColorTransform,e.parseColorTransform(s,r.color)),r},e.parseTransformTimeline=function(i,n,r){var s=new t.TransformTimeline;s.name=i[t.ConstValues.A_NAME],s.scale=e.getNumber(i,t.ConstValues.A_SCALE,1)||0,s.offset=e.getNumber(i,t.ConstValues.A_OFFSET,0)||0,s.originPivot.x=e.getNumber(i,t.ConstValues.A_PIVOT_X,0)||0,s.originPivot.y=e.getNumber(i,t.ConstValues.A_PIVOT_Y,0)||0,s.duration=n;for(var a,o=i[t.ConstValues.FRAME],l=0,h=o.length;l<h;l++){var u=o[l];a=l<h-1?o[l+1]:0!=l?o[0]:null;var c=e.parseTransformFrame(u,a,r);s.addFrame(c)}return e.parseTimeline(i,s),s},e.parseTransformFrame=function(i,n,r){var s=new t.TransformFrame;return e.parseFrame(i,s,r),s.visible=!e.getBoolean(i,t.ConstValues.A_HIDE,!1),s.tweenEasing=e.getNumber(i,t.ConstValues.A_TWEEN_EASING,10),s.tweenRotate=Math.floor(e.getNumber(i,t.ConstValues.A_TWEEN_ROTATE,0)||0),s.tweenScale=e.getBoolean(i,t.ConstValues.A_TWEEN_SCALE,!0),n&&-1==Math.floor(e.getNumber(n,t.ConstValues.A_DISPLAY_INDEX,0)||0)&&(s.tweenEasing=NaN),e.parseTransform(i[t.ConstValues.TRANSFORM],s.transform,s.pivot),e.tempDragonBonesData.isGlobal&&s.global.copy(s.transform),s.scaleOffset.x=e.getNumber(i,t.ConstValues.A_SCALE_X_OFFSET,0)||0,s.scaleOffset.y=e.getNumber(i,t.ConstValues.A_SCALE_Y_OFFSET,0)||0,s},e.parseTimeline=function(t,e){for(var i,n=0,r=e.frameList,s=0,a=r.length;s<a;s++)(i=r[s]).position=n,n+=i.duration;i&&(i.duration=e.duration-i.position)},e.parseFrame=function(e,i,n){void 0===n&&(n=0),i.duration=Math.round(1e3*(e[t.ConstValues.A_DURATION]||1)/n),i.action=e[t.ConstValues.A_ACTION],i.event=e[t.ConstValues.A_EVENT],i.sound=e[t.ConstValues.A_SOUND]},e.parseTransform=function(i,n,r){void 0===r&&(r=null),i&&(n&&(n.x=e.getNumber(i,t.ConstValues.A_X,0)||0,n.y=e.getNumber(i,t.ConstValues.A_Y,0)||0,n.skewX=e.getNumber(i,t.ConstValues.A_SKEW_X,0)*t.ConstValues.ANGLE_TO_RADIAN||0,n.skewY=e.getNumber(i,t.ConstValues.A_SKEW_Y,0)*t.ConstValues.ANGLE_TO_RADIAN||0,n.scaleX=e.getNumber(i,t.ConstValues.A_SCALE_X,1)||0,n.scaleY=e.getNumber(i,t.ConstValues.A_SCALE_Y,1)||0),r&&(r.x=e.getNumber(i,t.ConstValues.A_PIVOT_X,0)||0,r.y=e.getNumber(i,t.ConstValues.A_PIVOT_Y,0)||0))},e.parseColorTransform=function(i,n){i&&n&&(n.alphaOffset=e.getNumber(i,t.ConstValues.A_ALPHA_OFFSET,0),n.redOffset=e.getNumber(i,t.ConstValues.A_RED_OFFSET,0),n.greenOffset=e.getNumber(i,t.ConstValues.A_GREEN_OFFSET,0),n.blueOffset=e.getNumber(i,t.ConstValues.A_BLUE_OFFSET,0),n.alphaMultiplier=.01*e.getNumber(i,t.ConstValues.A_ALPHA_MULTIPLIER,100),n.redMultiplier=.01*e.getNumber(i,t.ConstValues.A_RED_MULTIPLIER,100),n.greenMultiplier=.01*e.getNumber(i,t.ConstValues.A_GREEN_MULTIPLIER,100),n.blueMultiplier=.01*e.getNumber(i,t.ConstValues.A_BLUE_MULTIPLIER,100))},e.getBoolean=function(t,e,i){if(t&&e in t)switch(String(t[e])){case"0":case"NaN":case"":case"false":case"null":case"undefined":return!1;case"1":case"true":default:return!0}return i},e.getNumber=function(t,e,i){if(t&&e in t)switch(String(t[e])){case"NaN":case"":case"false":case"null":case"undefined":return NaN;default:return Number(t[e])}return i},e}();t.Data3Parser=e,egret.registerClass(e,"dragonBones.Data3Parser")}(dragonBones||(dragonBones={})),function(t){var e=function(){function e(){}__define,e.prototype;return e.parseTextureAtlasData=function(i,n){void 0===n&&(n=1);for(var r,s={},a=i[t.ConstValues.SUB_TEXTURE],o=0,l=a.length;o<l;o++){var h=a[o],u=h[t.ConstValues.A_NAME],c=new t.Rectangle;c.x=e.getNumber(h,t.ConstValues.A_X,0)/n,c.y=e.getNumber(h,t.ConstValues.A_Y,0)/n,c.width=e.getNumber(h,t.ConstValues.A_WIDTH,0)/n,c.height=e.getNumber(h,t.ConstValues.A_HEIGHT,0)/n;var d="true"==h[t.ConstValues.A_ROTATED],f=e.getNumber(h,t.ConstValues.A_FRAME_WIDTH,0)/n,p=e.getNumber(h,t.ConstValues.A_FRAME_HEIGHT,0)/n;f>0&&p>0?((r=new t.Rectangle).x=e.getNumber(h,t.ConstValues.A_FRAME_X,0)/n,r.y=e.getNumber(h,t.ConstValues.A_FRAME_Y,0)/n,r.width=f,r.height=p):r=null,s[u]=new t.TextureData(c,r,d)}return s},e.parseDragonBonesData=function(i){if(!i)throw new Error;var n=i[t.ConstValues.A_VERSION];if((n=n.toString()).toString()==t.DragonBones.PARENT_COORDINATE_DATA_VERSION||"2.3"==n.toString())return t.Data3Parser.parseDragonBonesData(i);var r=e.getNumber(i,t.ConstValues.A_FRAME_RATE,0)||0,s=new t.DragonBonesData;s.name=i[t.ConstValues.A_NAME],s.isGlobal="0"!=i[t.ConstValues.A_IS_GLOBAL],e.tempDragonBonesData=s;for(var a=i[t.ConstValues.ARMATURE],o=0,l=a.length;o<l;o++){var h=a[o];s.addArmatureData(e.parseArmatureData(h,r))}return e.tempDragonBonesData=null,s},e.parseArmatureData=function(i,n){var r=new t.ArmatureData;r.name=i[t.ConstValues.A_NAME];var s,a,o=i[t.ConstValues.BONE];for(s=0,a=o.length;s<a;s++){var l=o[s];r.addBoneData(e.parseBoneData(l))}var h=i[t.ConstValues.SLOT];for(s=0,a=h.length;s<a;s++){var u=h[s];r.addSlotData(e.parseSlotData(u))}var c=i[t.ConstValues.SKIN];for(s=0,a=c.length;s<a;s++){var d=c[s];r.addSkinData(e.parseSkinData(d))}e.tempDragonBonesData.isGlobal&&t.DBDataUtil.transformArmatureData(r),r.sortBoneDataList();var f=i[t.ConstValues.ANIMATION];for(s=0,a=f.length;s<a;s++){var p=f[s],_=e.parseAnimationData(p,n);t.DBDataUtil.addHideTimeline(_,r,!0),t.DBDataUtil.transformAnimationData(_,r,e.tempDragonBonesData.isGlobal),r.addAnimationData(_)}return r},e.parseBoneData=function(i){var n=new t.BoneData;return n.name=i[t.ConstValues.A_NAME],n.parent=i[t.ConstValues.A_PARENT],n.length=Number(i[t.ConstValues.A_LENGTH])||0,n.inheritRotation=e.getBoolean(i,t.ConstValues.A_INHERIT_ROTATION,!0),n.inheritScale=e.getBoolean(i,t.ConstValues.A_INHERIT_SCALE,!0),e.parseTransform(i[t.ConstValues.TRANSFORM],n.transform),e.tempDragonBonesData.isGlobal&&n.global.copy(n.transform),n},e.parseSkinData=function(i){var n=new t.SkinData;n.name=i[t.ConstValues.A_NAME];for(var r=i[t.ConstValues.SLOT],s=0,a=r.length;s<a;s++){var o=r[s];n.addSlotData(e.parseSlotDisplayData(o))}return n},e.parseSlotData=function(i){var n=new t.SlotData;return n.name=i[t.ConstValues.A_NAME],n.parent=i[t.ConstValues.A_PARENT],n.zOrder=e.getNumber(i,t.ConstValues.A_Z_ORDER,0)||0,n.displayIndex=e.getNumber(i,t.ConstValues.A_DISPLAY_INDEX,0),n.blendMode=i[t.ConstValues.A_BLENDMODE],n},e.parseSlotDisplayData=function(i){var n=new t.SlotData;n.name=i[t.ConstValues.A_NAME],n.parent=i[t.ConstValues.A_PARENT],n.zOrder=e.getNumber(i,t.ConstValues.A_Z_ORDER,0)||0;var r=i[t.ConstValues.DISPLAY];if(r)for(var s=0,a=r.length;s<a;s++){var o=r[s];n.addDisplayData(e.parseDisplayData(o))}return n},e.parseDisplayData=function(i){var n=new t.DisplayData;return n.name=i[t.ConstValues.A_NAME],n.type=i[t.ConstValues.A_TYPE],e.parseTransform(i[t.ConstValues.TRANSFORM],n.transform,n.pivot),n.pivot.x=NaN,n.pivot.y=NaN,null!=e.tempDragonBonesData&&e.tempDragonBonesData.addDisplayData(n),n},e.parseAnimationData=function(i,n){var r=new t.AnimationData;r.name=i[t.ConstValues.A_NAME],r.frameRate=n,r.duration=Math.ceil(1e3*(e.getNumber(i,t.ConstValues.A_DURATION,1)||1)/n),r.playTimes=e.getNumber(i,t.ConstValues.A_PLAY_TIMES,1),r.playTimes=NaN!=r.playTimes?r.playTimes:1,r.fadeTime=e.getNumber(i,t.ConstValues.A_FADE_IN_TIME,0)||0,r.scale=e.getNumber(i,t.ConstValues.A_SCALE,1)||0,r.tweenEasing=e.getNumber(i,t.ConstValues.A_TWEEN_EASING,NaN),r.autoTween=e.getBoolean(i,t.ConstValues.A_AUTO_TWEEN,!0);var s=i[t.ConstValues.FRAME],a=0,o=0;if(s)for(a=0,o=s.length;a<o;a++){var l=s[a],h=e.parseTransformFrame(l,n);r.addFrame(h)}e.parseTimeline(i,r);var u=r.duration,c=i[t.ConstValues.BONE];if(c)for(a=0,o=c.length;a<o;a++){var d=c[a];if(d){var f=e.parseTransformTimeline(d,r.duration,n);f.frameList.length>0&&(u=Math.min(u,f.frameList[f.frameList.length-1].duration)),r.addTimeline(f)}}var p=i[t.ConstValues.SLOT];if(p)for(a=0,o=p.length;a<o;a++){var _=p[a];if(_){var m=e.parseSlotTimeline(_,r.duration,n);m.frameList.length>0&&(u=Math.min(u,m.frameList[m.frameList.length-1].duration),r.addSlotTimeline(m))}}return r.frameList.length>0&&(u=Math.min(u,r.frameList[r.frameList.length-1].duration)),r.lastFrameDuration=u,r},e.parseTransformTimeline=function(i,n,r){var s=new t.TransformTimeline;s.name=i[t.ConstValues.A_NAME],s.scale=e.getNumber(i,t.ConstValues.A_SCALE,1)||0,s.offset=e.getNumber(i,t.ConstValues.A_OFFSET,0)||0,s.originPivot.x=e.getNumber(i,t.ConstValues.A_PIVOT_X,0)||0,s.originPivot.y=e.getNumber(i,t.ConstValues.A_PIVOT_Y,0)||0,s.duration=n;for(var a=i[t.ConstValues.FRAME],o=0,l=a.length;o<l;o++){var h=a[o],u=e.parseTransformFrame(h,r);s.addFrame(u)}return e.parseTimeline(i,s),s},e.parseSlotTimeline=function(i,n,r){var s=new t.SlotTimeline;s.name=i[t.ConstValues.A_NAME],s.scale=e.getNumber(i,t.ConstValues.A_SCALE,1)||0,s.offset=e.getNumber(i,t.ConstValues.A_OFFSET,0)||0,s.duration=n;for(var a=i[t.ConstValues.FRAME],o=0,l=a.length;o<l;o++){var h=a[o],u=e.parseSlotFrame(h,r);s.addFrame(u)}return e.parseTimeline(i,s),s},e.parseTransformFrame=function(i,n){var r=new t.TransformFrame;return e.parseFrame(i,r,n),r.visible=!e.getBoolean(i,t.ConstValues.A_HIDE,!1),r.tweenEasing=e.getNumber(i,t.ConstValues.A_TWEEN_EASING,10),r.tweenRotate=Math.floor(e.getNumber(i,t.ConstValues.A_TWEEN_ROTATE,0)||0),r.tweenScale=e.getBoolean(i,t.ConstValues.A_TWEEN_SCALE,!0),r.displayIndex=Math.floor(e.getNumber(i,t.ConstValues.A_DISPLAY_INDEX,0)||0),e.parseTransform(i[t.ConstValues.TRANSFORM],r.transform,r.pivot),e.tempDragonBonesData.isGlobal&&r.global.copy(r.transform),r.scaleOffset.x=e.getNumber(i,t.ConstValues.A_SCALE_X_OFFSET,0)||0,r.scaleOffset.y=e.getNumber(i,t.ConstValues.A_SCALE_Y_OFFSET,0)||0,r},e.parseSlotFrame=function(i,n){var r=new t.SlotFrame;e.parseFrame(i,r,n),r.visible=!e.getBoolean(i,t.ConstValues.A_HIDE,!1),r.tweenEasing=e.getNumber(i,t.ConstValues.A_TWEEN_EASING,10),r.displayIndex=Math.floor(e.getNumber(i,t.ConstValues.A_DISPLAY_INDEX,0)||0),r.zOrder=e.getNumber(i,t.ConstValues.A_Z_ORDER,e.tempDragonBonesData.isGlobal?NaN:0);var s=i[t.ConstValues.COLOR];return s&&(r.color=new t.ColorTransform,e.parseColorTransform(s,r.color)),r},e.parseTimeline=function(t,e){for(var i,n=0,r=e.frameList,s=0,a=r.length;s<a;s++)(i=r[s]).position=n,n+=i.duration;i&&(i.duration=e.duration-i.position)},e.parseFrame=function(e,i,n){void 0===n&&(n=0),i.duration=Math.round(1e3*(e[t.ConstValues.A_DURATION]||1)/n),i.action=e[t.ConstValues.A_ACTION],i.event=e[t.ConstValues.A_EVENT],i.sound=e[t.ConstValues.A_SOUND];var r=e[t.ConstValues.A_CURVE];null!=r&&4==r.length&&(i.curve=new t.CurveData,i.curve.pointList=[new t.Point(r[0],r[1]),new t.Point(r[2],r[3])])},e.parseTransform=function(i,n,r){void 0===r&&(r=null),i&&(n&&(n.x=e.getNumber(i,t.ConstValues.A_X,0)||0,n.y=e.getNumber(i,t.ConstValues.A_Y,0)||0,n.skewX=e.getNumber(i,t.ConstValues.A_SKEW_X,0)*t.ConstValues.ANGLE_TO_RADIAN||0,n.skewY=e.getNumber(i,t.ConstValues.A_SKEW_Y,0)*t.ConstValues.ANGLE_TO_RADIAN||0,n.scaleX=e.getNumber(i,t.ConstValues.A_SCALE_X,1)||0,n.scaleY=e.getNumber(i,t.ConstValues.A_SCALE_Y,1)||0),r&&(r.x=e.getNumber(i,t.ConstValues.A_PIVOT_X,0)||0,r.y=e.getNumber(i,t.ConstValues.A_PIVOT_Y,0)||0))},e.parseColorTransform=function(i,n){n&&(n.alphaOffset=e.getNumber(i,t.ConstValues.A_ALPHA_OFFSET,0),n.redOffset=e.getNumber(i,t.ConstValues.A_RED_OFFSET,0),n.greenOffset=e.getNumber(i,t.ConstValues.A_GREEN_OFFSET,0),n.blueOffset=e.getNumber(i,t.ConstValues.A_BLUE_OFFSET,0),n.alphaMultiplier=.01*e.getNumber(i,t.ConstValues.A_ALPHA_MULTIPLIER,100),n.redMultiplier=.01*e.getNumber(i,t.ConstValues.A_RED_MULTIPLIER,100),n.greenMultiplier=.01*e.getNumber(i,t.ConstValues.A_GREEN_MULTIPLIER,100),n.blueMultiplier=.01*e.getNumber(i,t.ConstValues.A_BLUE_MULTIPLIER,100))},e.getBoolean=function(t,e,i){if(t&&e in t)switch(String(t[e])){case"0":case"NaN":case"":case"false":case"null":case"undefined":return!1;case"1":case"true":default:return!0}return i},e.getNumber=function(t,e,i){if(t&&e in t)switch(String(t[e])){case"NaN":case"":case"false":case"null":case"undefined":return NaN;default:return Number(t[e])}return i},e}();t.DataParser=e,egret.registerClass(e,"dragonBones.DataParser")}(dragonBones||(dragonBones={})),function(t){var e=function(){function t(){this.duration=0,this._frameList=[],this.duration=0,this.scale=1}var e=__define,i=t.prototype;return i.dispose=function(){for(var t=this._frameList.length;t--;)this._frameList[t].dispose();this._frameList=null},i.addFrame=function(t){if(!t)throw new Error;if(!(this._frameList.indexOf(t)<0))throw new Error;this._frameList[this._frameList.length]=t},e(i,"frameList",function(){return this._frameList}),t}();t.Timeline=e,egret.registerClass(e,"dragonBones.Timeline")}(dragonBones||(dragonBones={})),function(t){var e=function(t){function e(){t.call(this),this.frameRate=0,this.playTimes=0,this.lastFrameDuration=0,this.fadeTime=0,this.playTimes=0,this.autoTween=!0,this.tweenEasing=NaN,this.hideTimelineNameMap=[],this.hideSlotTimelineNameMap=[],this._timelineList=[],this._slotTimelineList=[]}__extends(e,t);var i=__define,n=e.prototype;return i(n,"timelineList",function(){return this._timelineList}),i(n,"slotTimelineList",function(){return this._slotTimelineList}),n.dispose=function(){t.prototype.dispose.call(this),this.hideTimelineNameMap=null;var e=0,i=0;for(e=0,i=this._timelineList.length;e<i;e++){this._timelineList[e].dispose()}for(this._timelineList=null,e=0,i=this._slotTimelineList.length;e<i;e++){this._slotTimelineList[e].dispose()}this._slotTimelineList=null},n.getTimeline=function(t){for(var e=this._timelineList.length;e--;)if(this._timelineList[e].name==t)return this._timelineList[e];return null},n.addTimeline=function(t){if(!t)throw new Error;this._timelineList.indexOf(t)<0&&(this._timelineList[this._timelineList.length]=t)},n.getSlotTimeline=function(t){for(var e=this._slotTimelineList.length;e--;)if(this._slotTimelineList[e].name==t)return this._slotTimelineList[e];return null},n.addSlotTimeline=function(t){if(!t)throw new Error;this._slotTimelineList.indexOf(t)<0&&(this._slotTimelineList[this._slotTimelineList.length]=t)},e}(t.Timeline);t.AnimationData=e,egret.registerClass(e,"dragonBones.AnimationData")}(dragonBones||(dragonBones={})),function(t){var e=function(){function t(){this._boneDataList=[],this._skinDataList=[],this._slotDataList=[],this._animationDataList=[]}var e=__define,i=t.prototype;return t.sortBoneDataHelpArray=function(t,e){return t[0]>e[0]?1:-1},t.sortBoneDataHelpArrayDescending=function(t,e){return t[0]>e[0]?-1:1},i.setSkinData=function(t){var e,i,n=0,r=this._slotDataList.length;for(n=0;n<r;n++)this._slotDataList[n].dispose();if(!t&&this._skinDataList.length>0)e=this._skinDataList[0];else for(n=0,r=this._skinDataList.length;n<r;n++)if(this._skinDataList[n].name==t){e=this._skinDataList[n];break}if(e)for(n=0,r=e.slotDataList.length,n=0;n<r;n++)if(i=this.getSlotData(e.slotDataList[n].name)){var s=0,a=e.slotDataList[n].displayDataList.length;for(s=0;s<a;s++)i.addDisplayData(e.slotDataList[n].displayDataList[s])}},i.dispose=function(){for(var t=this._boneDataList.length;t--;)this._boneDataList[t].dispose();for(t=this._skinDataList.length;t--;)this._skinDataList[t].dispose();for(t=this._slotDataList.length;t--;)this._slotDataList[t].dispose();for(t=this._animationDataList.length;t--;)this._animationDataList[t].dispose();this._boneDataList=null,this._slotDataList=null,this._skinDataList=null,this._animationDataList=null},i.getBoneData=function(t){for(var e=this._boneDataList.length;e--;)if(this._boneDataList[e].name==t)return this._boneDataList[e];return null},i.getSlotData=function(t){for(var e=this._slotDataList.length;e--;)if(this._slotDataList[e].name==t)return this._slotDataList[e];return null},i.getSkinData=function(t){if(!t&&this._skinDataList.length>0)return this._skinDataList[0];for(var e=this._skinDataList.length;e--;)if(this._skinDataList[e].name==t)return this._skinDataList[e];return null},i.getAnimationData=function(t){for(var e=this._animationDataList.length;e--;)if(this._animationDataList[e].name==t)return this._animationDataList[e];return null},i.addBoneData=function(t){if(!t)throw new Error;if(!(this._boneDataList.indexOf(t)<0))throw new Error;this._boneDataList[this._boneDataList.length]=t},i.addSlotData=function(t){if(!t)throw new Error;if(!(this._slotDataList.indexOf(t)<0))throw new Error;this._slotDataList[this._slotDataList.length]=t},i.addSkinData=function(t){if(!t)throw new Error;if(!(this._skinDataList.indexOf(t)<0))throw new Error;this._skinDataList[this._skinDataList.length]=t},i.addAnimationData=function(t){if(!t)throw new Error;this._animationDataList.indexOf(t)<0&&(this._animationDataList[this._animationDataList.length]=t)},i.sortBoneDataList=function(){var e=this._boneDataList.length;if(0!=e){for(var i=[];e--;){for(var n=this._boneDataList[e],r=0,s=n;s;)r++,s=this.getBoneData(s.parent);i[e]=[r,n]}for(i.sort(t.sortBoneDataHelpArray),e=i.length;e--;)this._boneDataList[e]=i[e][1]}},e(i,"boneDataList",function(){return this._boneDataList}),e(i,"slotDataList",function(){return this._slotDataList}),e(i,"skinDataList",function(){return this._skinDataList}),e(i,"animationDataList",function(){return this._animationDataList}),t}();t.ArmatureData=e,egret.registerClass(e,"dragonBones.ArmatureData")}(dragonBones||(dragonBones={})),function(t){var e=function(){function e(){this.length=0,this.global=new t.DBTransform,this.transform=new t.DBTransform,this.inheritRotation=!0,this.inheritScale=!1}__define;return e.prototype.dispose=function(){this.global=null,this.transform=null},e}();t.BoneData=e,egret.registerClass(e,"dragonBones.BoneData")}(dragonBones||(dragonBones={})),function(t){var e=function(){function t(){this.alphaMultiplier=1,this.alphaOffset=0,this.blueMultiplier=1,this.blueOffset=0,this.greenMultiplier=1,this.greenOffset=0,this.redMultiplier=1,this.redOffset=0}__define,t.prototype;return t}();t.ColorTransform=e,egret.registerClass(e,"dragonBones.ColorTransform")}(dragonBones||(dragonBones={})),function(t){var e=function(){function e(){this._dataChanged=!1,this._pointList=[],this.sampling=new Array(e.SamplingTimes);for(var i=0;i<e.SamplingTimes-1;i++)this.sampling[i]=new t.Point}var i=__define,n=e.prototype;return n.getValueByProgress=function(t){this._dataChanged&&this.refreshSampling();for(var i=0;i<e.SamplingTimes-1;i++){var n=this.sampling[i];if(n.x>=t){if(0==i)return n.y*t/n.x;var r=this.sampling[i-1];return r.y+(n.y-r.y)*(t-r.x)/(n.x-r.x)}}return n.y+(1-n.y)*(t-n.x)/(1-n.x)},n.refreshSampling=function(){for(var t=0;t<e.SamplingTimes-1;t++)this.bezierCurve(e.SamplingStep*(t+1),this.sampling[t]);this._dataChanged=!1},n.bezierCurve=function(t,e){var i=1-t;e.x=3*this.point1.x*t*i*i+3*this.point2.x*t*t*i+Math.pow(t,3),e.y=3*this.point1.y*t*i*i+3*this.point2.y*t*t*i+Math.pow(t,3)},i(n,"pointList",function(){return this._pointList},function(t){this._pointList=t,this._dataChanged=!0}),n.isCurve=function(){return 0!=this.point1.x||0!=this.point1.y||1!=this.point2.x||1!=this.point2.y},i(n,"point1",function(){return this.pointList[0]}),i(n,"point2",function(){return this.pointList[1]}),e.SamplingTimes=20,e.SamplingStep=.05,e}();t.CurveData=e,egret.registerClass(e,"dragonBones.CurveData")}(dragonBones||(dragonBones={})),function(t){var e=function(){function e(){this.transform=new t.DBTransform,this.pivot=new t.Point}__define;return e.prototype.dispose=function(){this.transform=null,this.pivot=null},e.ARMATURE="armature",e.IMAGE="image",e}();t.DisplayData=e,egret.registerClass(e,"dragonBones.DisplayData")}(dragonBones||(dragonBones={})),function(t){var e=function(){function t(){this._armatureDataList=[],this._displayDataDictionary={}}var e=__define,i=t.prototype;return i.dispose=function(){for(var t=0,e=this._armatureDataList.length;t<e;t++){this._armatureDataList[t].dispose()}this._armatureDataList=null,this.removeAllDisplayData(),this._displayDataDictionary=null},e(i,"armatureDataList",function(){return this._armatureDataList}),i.getArmatureDataByName=function(t){for(var e=this._armatureDataList.length;e--;)if(this._armatureDataList[e].name==t)return this._armatureDataList[e];return null},i.addArmatureData=function(t){if(!t)throw new Error;if(!(this._armatureDataList.indexOf(t)<0))throw new Error;this._armatureDataList[this._armatureDataList.length]=t},i.removeArmatureData=function(t){var e=this._armatureDataList.indexOf(t);e>=0&&this._armatureDataList.splice(e,1)},i.removeArmatureDataByName=function(t){for(var e=this._armatureDataList.length;e--;)this._armatureDataList[e].name==t&&this._armatureDataList.splice(e,1)},i.getDisplayDataByName=function(t){return this._displayDataDictionary[t]},i.addDisplayData=function(t){this._displayDataDictionary[t.name]=t},i.removeDisplayDataByName=function(t){delete this._displayDataDictionary[t]},i.removeAllDisplayData=function(){for(var t in this._displayDataDictionary)delete this._displayDataDictionary[t]},t}();t.DragonBonesData=e,egret.registerClass(e,"dragonBones.DragonBonesData")}(dragonBones||(dragonBones={})),function(t){var e=function(){function t(){this.position=0,this.duration=0,this.position=0,this.duration=0}__define;return t.prototype.dispose=function(){},t}();t.Frame=e,egret.registerClass(e,"dragonBones.Frame")}(dragonBones||(dragonBones={})),function(t){var e=function(){function t(){this._slotDataList=[]}var e=__define,i=t.prototype;return i.dispose=function(){for(var t=this._slotDataList.length;t--;)this._slotDataList[t].dispose();this._slotDataList=null},i.getSlotData=function(t){for(var e=this._slotDataList.length;e--;)if(this._slotDataList[e].name==t)return this._slotDataList[e];return null},i.addSlotData=function(t){if(!t)throw new Error;if(!(this._slotDataList.indexOf(t)<0))throw new Error;this._slotDataList[this._slotDataList.length]=t},e(i,"slotDataList",function(){return this._slotDataList}),t}();t.SkinData=e,egret.registerClass(e,"dragonBones.SkinData")}(dragonBones||(dragonBones={})),function(t){var e=function(){function t(){this._displayDataList=[],this.zOrder=0}var e=__define,i=t.prototype;return i.dispose=function(){this._displayDataList.length=0},i.addDisplayData=function(t){if(!t)throw new Error;if(!(this._displayDataList.indexOf(t)<0))throw new Error;this._displayDataList[this._displayDataList.length]=t},i.getDisplayData=function(t){for(var e=this._displayDataList.length;e--;)if(this._displayDataList[e].name==t)return this._displayDataList[e];return null},e(i,"displayDataList",function(){return this._displayDataList}),t}();t.SlotData=e,egret.registerClass(e,"dragonBones.SlotData")}(dragonBones||(dragonBones={})),function(t){var e=function(t){function e(){t.call(this),this.displayIndex=0,this.tweenEasing=10,this.displayIndex=0,this.visible=!0,this.zOrder=NaN}__extends(e,t);__define;return e.prototype.dispose=function(){t.prototype.dispose.call(this),this.color=null},e}(t.Frame);t.SlotFrame=e,egret.registerClass(e,"dragonBones.SlotFrame")}(dragonBones||(dragonBones={})),function(t){var e=function(t){function e(){t.call(this),this.offset=0}__extends(e,t);__define;return e.prototype.dispose=function(){t.prototype.dispose.call(this)},e}(t.Timeline);t.SlotTimeline=e,egret.registerClass(e,"dragonBones.SlotTimeline")}(dragonBones||(dragonBones={})),function(t){var e=function(e){function i(){e.call(this),this.tweenRotate=0,this.displayIndex=0,this.tweenEasing=10,this.tweenRotate=0,this.tweenScale=!0,this.displayIndex=0,this.visible=!0,this.zOrder=NaN,this.global=new t.DBTransform,this.transform=new t.DBTransform,this.pivot=new t.Point,this.scaleOffset=new t.Point}__extends(i,e);__define;return i.prototype.dispose=function(){e.prototype.dispose.call(this),this.global=null,this.transform=null,this.pivot=null,this.scaleOffset=null,this.color=null},i}(t.Frame);t.TransformFrame=e,egret.registerClass(e,"dragonBones.TransformFrame")}(dragonBones||(dragonBones={})),function(t){var e=function(e){function i(){e.call(this),this.originTransform=new t.DBTransform,this.originTransform.scaleX=1,this.originTransform.scaleY=1,this.originPivot=new t.Point,this.offset=0}__extends(i,e);__define;return i.prototype.dispose=function(){e.prototype.dispose.call(this),this.originTransform=null,this.originPivot=null},i}(t.Timeline);t.TransformTimeline=e,egret.registerClass(e,"dragonBones.TransformTimeline")}(dragonBones||(dragonBones={})),function(t){var e=function(){function t(t,e,i){this.region=t,this.frame=e,this.rotated=i}__define,t.prototype;return t}();t.TextureData=e,egret.registerClass(e,"dragonBones.TextureData")}(dragonBones||(dragonBones={})),function(t){var e=function(){function e(){}__define,e.prototype;return e.cloneColor=function(e){var i=new t.ColorTransform;return i.redMultiplier=e.redMultiplier,i.greenMultiplier=e.greenMultiplier,i.blueMultiplier=e.blueMultiplier,i.alphaMultiplier=e.alphaMultiplier,i.redOffset=e.redOffset,i.greenOffset=e.greenOffset,i.blueOffset=e.blueOffset,i.alphaOffset=e.alphaOffset,i},e.isEqual=function(t,e){return t.alphaOffset==e.alphaOffset&&t.redOffset==e.redOffset&&t.greenOffset==e.greenOffset&&t.blueOffset==e.blueOffset&&t.alphaMultiplier==e.alphaMultiplier&&t.redMultiplier==e.redMultiplier&&t.greenMultiplier==e.greenMultiplier&&t.blueMultiplier==e.blueMultiplier},e.minus=function(t,e,i){i.alphaOffset=t.alphaOffset-e.alphaOffset,i.redOffset=t.redOffset-e.redOffset,i.greenOffset=t.greenOffset-e.greenOffset,i.blueOffset=t.blueOffset-e.blueOffset,i.alphaMultiplier=t.alphaMultiplier-e.alphaMultiplier,i.redMultiplier=t.redMultiplier-e.redMultiplier,i.greenMultiplier=t.greenMultiplier-e.greenMultiplier,i.blueMultiplier=t.blueMultiplier-e.blueMultiplier},e.originalColor=new t.ColorTransform,e}();t.ColorTransformUtil=e,egret.registerClass(e,"dragonBones.ColorTransformUtil")}(dragonBones||(dragonBones={})),function(t){var e=function(){function t(){}__define,t.prototype;return t.ANGLE_TO_RADIAN=Math.PI/180,t.RADIAN_TO_ANGLE=180/Math.PI,t.DRAGON_BONES="dragonBones",t.ARMATURE="armature",t.SKIN="skin",t.BONE="bone",t.SLOT="slot",t.DISPLAY="display",t.ANIMATION="animation",t.TIMELINE="timeline",t.FRAME="frame",t.TRANSFORM="transform",t.COLOR_TRANSFORM="colorTransform",t.COLOR="color",t.RECTANGLE="rectangle",t.ELLIPSE="ellipse",t.TEXTURE_ATLAS="TextureAtlas",t.SUB_TEXTURE="SubTexture",t.A_ROTATED="rotated",t.A_FRAME_X="frameX",t.A_FRAME_Y="frameY",t.A_FRAME_WIDTH="frameWidth",t.A_FRAME_HEIGHT="frameHeight",t.A_VERSION="version",t.A_IMAGE_PATH="imagePath",t.A_FRAME_RATE="frameRate",t.A_NAME="name",t.A_IS_GLOBAL="isGlobal",t.A_PARENT="parent",t.A_LENGTH="length",t.A_TYPE="type",t.A_FADE_IN_TIME="fadeInTime",t.A_DURATION="duration",t.A_SCALE="scale",t.A_OFFSET="offset",t.A_LOOP="loop",t.A_PLAY_TIMES="playTimes",t.A_EVENT="event",t.A_EVENT_PARAMETERS="eventParameters",t.A_SOUND="sound",t.A_ACTION="action",t.A_HIDE="hide",t.A_AUTO_TWEEN="autoTween",t.A_TWEEN_EASING="tweenEasing",t.A_TWEEN_ROTATE="tweenRotate",t.A_TWEEN_SCALE="tweenScale",t.A_DISPLAY_INDEX="displayIndex",t.A_Z_ORDER="z",t.A_BLENDMODE="blendMode",t.A_WIDTH="width",t.A_HEIGHT="height",t.A_INHERIT_SCALE="inheritScale",t.A_INHERIT_ROTATION="inheritRotation",t.A_X="x",t.A_Y="y",t.A_SKEW_X="skX",t.A_SKEW_Y="skY",t.A_SCALE_X="scX",t.A_SCALE_Y="scY",t.A_PIVOT_X="pX",t.A_PIVOT_Y="pY",t.A_ALPHA_OFFSET="aO",t.A_RED_OFFSET="rO",t.A_GREEN_OFFSET="gO",t.A_BLUE_OFFSET="bO",t.A_ALPHA_MULTIPLIER="aM",t.A_RED_MULTIPLIER="rM",t.A_GREEN_MULTIPLIER="gM",t.A_BLUE_MULTIPLIER="bM",t.A_CURVE="curve",t.A_SCALE_X_OFFSET="scXOffset",t.A_SCALE_Y_OFFSET="scYOffset",t.A_SCALE_MODE="scaleMode",t.A_FIXED_ROTATION="fixedRotation",t}();t.ConstValues=e,egret.registerClass(e,"dragonBones.ConstValues")}(dragonBones||(dragonBones={})),function(t){var e=function(){function e(){}__define,e.prototype;return e.transformArmatureData=function(e){for(var i=e.boneDataList,n=i.length;n--;){var r=i[n];if(r.parent){var s=e.getBoneData(r.parent);s&&(r.transform.copy(r.global),t.TransformUtil.globalToLocal(r.transform,s.global))}}},e.transformArmatureDataAnimations=function(t){for(var i=t.animationDataList,n=i.length;n--;)e.transformAnimationData(i[n],t,!1)},e.transformRelativeAnimationData=function(t,e){},e.transformAnimationData=function(i,n,r){if(r){var s,a=n.getSkinData(null),o=n.boneDataList;a&&(s=a.slotDataList);for(var l=0;l<o.length;l++){var h=o[l],u=i.getTimeline(h.name),c=i.getSlotTimeline(h.name);if(u||c){var d=null;if(s)for(var f=0,p=s.length;f<p&&(d=s[f]).parent!=h.name;f++);var _=u.frameList;if(c)var m=c.frameList;var g=null,v=_.length;for(f=0;f<v;f++){var y=_[f];if(e.setFrameTransform(i,n,h,y),y.transform.x-=h.transform.x,y.transform.y-=h.transform.y,y.transform.skewX-=h.transform.skewX,y.transform.skewY-=h.transform.skewY,y.transform.scaleX/=h.transform.scaleX,y.transform.scaleY/=h.transform.scaleY,g){var b=y.transform.skewX-g.transform.skewX;g.tweenRotate?g.tweenRotate>0?(b<0&&(y.transform.skewX+=2*Math.PI,y.transform.skewY+=2*Math.PI),g.tweenRotate>1&&(y.transform.skewX+=2*Math.PI*(g.tweenRotate-1),y.transform.skewY+=2*Math.PI*(g.tweenRotate-1))):(b>0&&(y.transform.skewX-=2*Math.PI,y.transform.skewY-=2*Math.PI),g.tweenRotate<1&&(y.transform.skewX+=2*Math.PI*(g.tweenRotate+1),y.transform.skewY+=2*Math.PI*(g.tweenRotate+1))):(y.transform.skewX=g.transform.skewX+t.TransformUtil.formatRadian(y.transform.skewX-g.transform.skewX),y.transform.skewY=g.transform.skewY+t.TransformUtil.formatRadian(y.transform.skewY-g.transform.skewY))}g=y}if(c&&m){v=m.length;for(f=0;f<v;f++){var E=m[f];c.transformed||d&&(E.zOrder-=d.zOrder)}c.transformed=!0}u.transformed=!0}}}else e.transformRelativeAnimationData(i,n)},e.setFrameTransform=function(i,n,r,s){s.transform.copy(s.global);var a=n.getBoneData(r.parent);if(a){var o=i.getTimeline(a.name);if(o){for(var l=[],h=[];o;)l.push(o),h.push(a),o=(a=n.getBoneData(a.parent))?i.getTimeline(a.name):null;for(var u,c=l.length,d=new t.Matrix,f=new t.DBTransform,p=new t.Matrix;c--;)o=l[c],a=h[c],e.getTimelineTransform(o,s.position,f,!u),u?(f.x+=o.originTransform.x+a.transform.x,f.y+=o.originTransform.y+a.transform.y,f.skewX+=o.originTransform.skewX+a.transform.skewX,f.skewY+=o.originTransform.skewY+a.transform.skewY,f.scaleX*=o.originTransform.scaleX*a.transform.scaleX,f.scaleY*=o.originTransform.scaleY*a.transform.scaleY,t.TransformUtil.transformToMatrix(f,p,!0),p.concat(d),t.TransformUtil.matrixToTransform(p,u,f.scaleX*u.scaleX>=0,f.scaleY*u.scaleY>=0)):(u=new t.DBTransform).copy(f),t.TransformUtil.transformToMatrix(u,d,!0);t.TransformUtil.globalToLocal(s.transform,u)}}},e.getTimelineTransform=function(e,i,n,r){for(var s=e.frameList,a=s.length;a--;){var o=s[a];if(o.position<=i&&o.position+o.duration>i){if(a==s.length-1||i==o.position)n.copy(r?o.global:o.transform);else{var l=o.tweenEasing,h=(i-o.position)/o.duration;l&&10!=l&&(h=t.MathUtil.getEaseValue(h,l));var u=s[a+1],c=r?o.global:o.transform,d=r?u.global:u.transform;n.x=c.x+(d.x-c.x)*h,n.y=c.y+(d.y-c.y)*h,n.skewX=t.TransformUtil.formatRadian(c.skewX+(d.skewX-c.skewX)*h),n.skewY=t.TransformUtil.formatRadian(c.skewY+(d.skewY-c.skewY)*h),n.scaleX=c.scaleX+(d.scaleX-c.scaleX)*h,n.scaleY=c.scaleY+(d.scaleY-c.scaleY)*h}break}}},e.addHideTimeline=function(t,e,i){void 0===i&&(i=!1);for(var n,r=e.boneDataList,s=e.slotDataList,a=r.length;a--;){var o=r[a].name;t.getTimeline(o)||t.hideTimelineNameMap.indexOf(o)<0&&t.hideTimelineNameMap.push(o)}if(i)for(a=s.length;a--;)n=s[a].name,t.getSlotTimeline(n)||t.hideSlotTimelineNameMap.indexOf(n)<0&&t.hideSlotTimelineNameMap.push(n)},e}();t.DBDataUtil=e,egret.registerClass(e,"dragonBones.DBDataUtil")}(dragonBones||(dragonBones={})),function(t){var e=function(){function t(){}__define,t.prototype;return t.getEaseValue=function(e,i){var n=1;return i>1?(n=.5*(1-t.cos(e*Math.PI)),i-=1):i>0?n=1-Math.pow(1-e,2):i<0&&(i*=-1,n=Math.pow(e,2)),(n-e)*i+e},t.isNumber=function(t){return"number"==typeof t&&!isNaN(t)},t.sin=function(e){e*=t.RADIAN_TO_ANGLE;var i=Math.floor(e),n=i+1,r=t.sinInt(i);return(e-i)*t.sinInt(n)+(n-e)*r},t.sinInt=function(t){return(t%=360)<0&&(t+=360),t<90?db_sin_map[t]:t<180?db_sin_map[180-t]:t<270?-db_sin_map[t-180]:-db_sin_map[360-t]},t.cos=function(e){return t.sin(Math.PI/2-e)},t.ANGLE_TO_RADIAN=Math.PI/180,t.RADIAN_TO_ANGLE=180/Math.PI,t}();t.MathUtil=e,egret.registerClass(e,"dragonBones.MathUtil")}(dragonBones||(dragonBones={}));for(var dragonBones,db_sin_map={},dbMathIndex=0;dbMathIndex<=90;dbMathIndex++)db_sin_map[dbMathIndex]=Math.sin(dbMathIndex*dragonBones.MathUtil.ANGLE_TO_RADIAN);!function(t){var e=function(){function e(){}__define,e.prototype;return e.globalToLocal=function(t,i){e.transformToMatrix(t,e._helpTransformMatrix,!0),e.transformToMatrix(i,e._helpParentTransformMatrix,!0),e._helpParentTransformMatrix.invert(),e._helpTransformMatrix.concat(e._helpParentTransformMatrix),e.matrixToTransform(e._helpTransformMatrix,t,t.scaleX*i.scaleX>=0,t.scaleY*i.scaleY>=0)},e.transformToMatrix=function(e,i,n){void 0===n&&(n=!1),n?(i.a=e.scaleX*t.MathUtil.cos(e.skewY),i.b=e.scaleX*t.MathUtil.sin(e.skewY),i.c=-e.scaleY*t.MathUtil.sin(e.skewX),i.d=e.scaleY*t.MathUtil.cos(e.skewX),i.tx=e.x,i.ty=e.y):(i.a=t.MathUtil.cos(e.skewY),i.b=t.MathUtil.sin(e.skewY),i.c=-t.MathUtil.sin(e.skewX),i.d=t.MathUtil.cos(e.skewX),i.tx=e.x,i.ty=e.y)},e.matrixToTransform=function(t,e,i,n){e.x=t.tx,e.y=t.ty,e.scaleX=Math.sqrt(t.a*t.a+t.b*t.b)*(i?1:-1),e.scaleY=Math.sqrt(t.d*t.d+t.c*t.c)*(n?1:-1);var r=[];r[0]=Math.acos(t.d/e.scaleY),r[1]=-r[0],r[2]=Math.asin(-t.c/e.scaleY),r[3]=r[2]>=0?Math.PI-r[2]:r[2]-Math.PI,Number(r[0]).toFixed(4)==Number(r[2]).toFixed(4)||Number(r[0]).toFixed(4)==Number(r[3]).toFixed(4)?e.skewX=r[0]:e.skewX=r[1];var s=[];s[0]=Math.acos(t.a/e.scaleX),s[1]=-s[0],s[2]=Math.asin(t.b/e.scaleX),s[3]=s[2]>=0?Math.PI-s[2]:s[2]-Math.PI,Number(s[0]).toFixed(4)==Number(s[2]).toFixed(4)||Number(s[0]).toFixed(4)==Number(s[3]).toFixed(4)?e.skewY=s[0]:e.skewY=s[1]},e.formatRadian=function(t){return t>Math.PI&&(t-=e.DOUBLE_PI),t<-Math.PI&&(t+=e.DOUBLE_PI),t},e.normalizeRotation=function(t){return(t=(t=(t+Math.PI)%(2*Math.PI))>0?t:2*Math.PI+t)-Math.PI},e.HALF_PI=.5*Math.PI,e.DOUBLE_PI=2*Math.PI,e._helpTransformMatrix=new t.Matrix,e._helpParentTransformMatrix=new t.Matrix,e}();t.TransformUtil=e,egret.registerClass(e,"dragonBones.TransformUtil")}(dragonBones||(dragonBones={})),function(t){var e=function(){function e(e){this.animationState=new t.FastAnimationState,this._armature=e,this.animationState._armature=e,this.animationList=[],this._animationDataObj={},this._isPlaying=!1,this._timeScale=1}var i=__define,n=e.prototype;return n.dispose=function(){this._armature&&(this._armature=null,this._animationDataList=null,this.animationList=null,this.animationState=null)},n.gotoAndPlay=function(t,e,i,n){if(void 0===e&&(e=-1),void 0===i&&(i=-1),void 0===n&&(n=NaN),!this._animationDataList)return null;var r,s=this._animationDataObj[t];if(!s)return null;this._isPlaying=!0,e=e<0?s.fadeTime<0?.3:s.fadeTime:e,r=i<0?s.scale<0?1:s.scale:1e3*i/s.duration,n=isNaN(n)?s.playTimes:n,this.animationState._fadeIn(s,n,1/r,e),this._armature.enableCache&&this.animationCacheManager&&(this.animationState.animationCache=this.animationCacheManager.getAnimationCache(t));for(var a=this._armature.slotHasChildArmatureList.length;a--;){var o=this._armature.slotHasChildArmatureList[a].childArmature;o&&o.getAnimation().gotoAndPlay(t)}return this.animationState},n.gotoAndStop=function(t,e,i,n,r){return void 0===i&&(i=-1),void 0===n&&(n=0),void 0===r&&(r=-1),this.animationState.name!=t&&this.gotoAndPlay(t,n,r),i>=0?this.animationState.setCurrentTime(this.animationState.totalTime*i):this.animationState.setCurrentTime(e),this.animationState.stop(),this.animationState},n.play=function(){this._animationDataList&&(this.animationState.name?this._isPlaying?this.gotoAndPlay(this.animationState.name):this._isPlaying=!0:this.gotoAndPlay(this._animationDataList[0].name))},n.stop=function(){this._isPlaying=!1},n.advanceTime=function(t){this._isPlaying&&this.animationState._advanceTime(t*this._timeScale)},n.hasAnimation=function(t){return null!=this._animationDataObj[t]},i(n,"timeScale",function(){return this._timeScale},function(t){(isNaN(t)||t<0)&&(t=1),this._timeScale=t}),i(n,"animationDataList",function(){return this._animationDataList},function(t){this._animationDataList=t,this.animationList.length=0;for(var e=this._animationDataList.length,i=0;i<e;i++){var n=this._animationDataList[i];this.animationList.push(n.name),this._animationDataObj[n.name]=n}}),i(n,"movementList",function(){return this.animationList}),i(n,"movementID",function(){return this.lastAnimationName}),n.isPlaying=function(){return this._isPlaying&&!this.isComplete},i(n,"isComplete",function(){return this.animationState.isComplete}),i(n,"lastAnimationState",function(){return this.animationState}),i(n,"lastAnimationName",function(){return this.animationState?this.animationState.name:null}),e}();t.FastAnimation=e,egret.registerClass(e,"dragonBones.FastAnimation")}(dragonBones||(dragonBones={})),function(t){var e=function(){function e(){this._boneTimelineStateList=[],this._slotTimelineStateList=[],this._currentFrameIndex=0,this._currentFramePosition=0,this._currentFrameDuration=0,this._currentPlayTimes=0,this._totalTime=0,this._currentTime=0,this._lastTime=0,this._playTimes=0,this._fading=!1}var i=__define,n=e.prototype;return n.dispose=function(){this._resetTimelineStateList(),this._armature=null},n.play=function(){return this._isPlaying=!0,this},n.stop=function(){return this._isPlaying=!1,this},n.setCurrentTime=function(t){return(t<0||isNaN(t))&&(t=0),this._time=t,this._currentTime=1e3*this._time,this},n._resetTimelineStateList=function(){for(var e=this._boneTimelineStateList.length;e--;)t.FastBoneTimelineState.returnObject(this._boneTimelineStateList[e]);for(this._boneTimelineStateList.length=0,e=this._slotTimelineStateList.length;e--;)t.FastSlotTimelineState.returnObject(this._slotTimelineStateList[e]);this._slotTimelineStateList.length=0,this.name=null},n._fadeIn=function(t,e,i,n){this.animationData=t,this.name=this.animationData.name,this._totalTime=this.animationData.duration,this.autoTween=t.autoTween,this.setTimeScale(i),this.setPlayTimes(e),this._isComplete=!1,this._currentFrameIndex=-1,this._currentPlayTimes=-1,Math.round(this._totalTime*this.animationData.frameRate*.001)<2?this._currentTime=this._totalTime:this._currentTime=-1,this._fadeTotalTime=n*this._timeScale,this._fading=this._fadeTotalTime>0,this._isPlaying=!0,this._armature.enableCache&&this.animationCache&&this._fading&&this._boneTimelineStateList&&this.updateTransformTimeline(this.progress),this._time=0,this._progress=0,this._updateTimelineStateList(),this.hideBones()},n._updateTimelineStateList=function(){var e;this._resetTimelineStateList();for(var i=this.animationData.timelineList.length,n=0;n<i;n++){var r=this.animationData.timelineList[n];e=r.name;var s=this._armature.getBone(e);if(s){var a=t.FastBoneTimelineState.borrowObject();a.fadeIn(s,this,r),this._boneTimelineStateList.push(a)}}for(var o=this.animationData.slotTimelineList.length,l=0;l<o;l++){var h=this.animationData.slotTimelineList[l];e=h.name;var u=this._armature.getSlot(e);if(u&&u.displayList.length>0){var c=t.FastSlotTimelineState.borrowObject();c.fadeIn(u,this,h),this._slotTimelineStateList.push(c)}}},n._advanceTime=function(t){if(t*=this._timeScale,this._fading&&(this._time+=t,this._progress=this._time/this._fadeTotalTime,this._progress>=1&&(this._progress=0,this._time=0,this._fading=!1)),this._fading){for(var e=this._boneTimelineStateList.length,i=0;i<e;i++){this._boneTimelineStateList[i].updateFade(this.progress)}for(var n=this._slotTimelineStateList.length,r=0;r<n;r++){this._slotTimelineStateList[r].updateFade(this.progress)}}else this.advanceTimelinesTime(t)},n.advanceTimelinesTime=function(e){this._isPlaying&&(this._time+=e);var i,n=!1,r=!1,s=!1,a=!1,o=0,l=1e3*this._time;0==this._playTimes||l<this._playTimes*this._totalTime?(a=!1,this._progress=l/this._totalTime,o=Math.ceil(this.progress)||1,this._progress-=Math.floor(this.progress),l%=this._totalTime):(o=this._playTimes,l=this._totalTime,a=!0,this._progress=1),this._isComplete=a,this.isUseCache()?this.animationCache.update(this.progress):this.updateTransformTimeline(this.progress),this._currentTime!=l&&(this._currentPlayTimes!=o&&(this._currentPlayTimes>0&&o>1&&(r=!0),this._currentPlayTimes=o),this._currentTime<0&&(n=!0),this._isComplete&&(s=!0),this._lastTime=this._currentTime,this._currentTime=l,this.updateMainTimeline(a)),n&&this._armature.hasEventListener(t.AnimationEvent.START)&&((i=new t.AnimationEvent(t.AnimationEvent.START)).animationState=this,this._armature._addEvent(i)),s?this._armature.hasEventListener(t.AnimationEvent.COMPLETE)&&((i=new t.AnimationEvent(t.AnimationEvent.COMPLETE)).animationState=this,this._armature._addEvent(i)):r&&this._armature.hasEventListener(t.AnimationEvent.LOOP_COMPLETE)&&((i=new t.AnimationEvent(t.AnimationEvent.LOOP_COMPLETE)).animationState=this,this._armature._addEvent(i))},n.updateTransformTimeline=function(t){var e,i,n=this._boneTimelineStateList.length;if(this._isComplete){for(;n--;)(e=this._boneTimelineStateList[n]).update(t),this._isComplete=e._isComplete&&this._isComplete;for(n=this._slotTimelineStateList.length;n--;)(i=this._slotTimelineStateList[n]).update(t),this._isComplete=i._isComplete&&this._isComplete}else{for(;n--;)(e=this._boneTimelineStateList[n]).update(t);for(n=this._slotTimelineStateList.length;n--;)(i=this._slotTimelineStateList[n]).update(t)}},n.updateMainTimeline=function(t){var e=this.animationData.frameList;if(e.length>0){for(var i,n,r=0,s=this.animationData.frameList.length;r<s;++r){if(this._currentFrameIndex<0)this._currentFrameIndex=0;else{if(!(this._currentTime<this._currentFramePosition||this._currentTime>=this._currentFramePosition+this._currentFrameDuration||this._currentTime<this._lastTime))break;if(this._lastTime=this._currentTime,this._currentFrameIndex++,this._currentFrameIndex>=e.length){if(t){this._currentFrameIndex--;break}this._currentFrameIndex=0}}n=e[this._currentFrameIndex],i&&this._armature.arriveAtFrame(i,this),this._currentFrameDuration=n.duration,this._currentFramePosition=n.position,i=n}n&&this._armature.arriveAtFrame(n,this)}},n.setTimeScale=function(t){return(isNaN(t)||t==1/0)&&(t=1),this._timeScale=t,this},n.setPlayTimes=function(t){return void 0===t&&(t=0),Math.round(.001*this._totalTime*this.animationData.frameRate)<2?this._playTimes=1:this._playTimes=t,this},i(n,"playTimes",function(){return this._playTimes}),i(n,"currentPlayTimes",function(){return this._currentPlayTimes<0?0:this._currentPlayTimes}),i(n,"isComplete",function(){return this._isComplete}),i(n,"isPlaying",function(){return this._isPlaying&&!this._isComplete}),i(n,"totalTime",function(){return.001*this._totalTime}),i(n,"currentTime",function(){return this._currentTime<0?0:.001*this._currentTime}),n.isUseCache=function(){return this._armature.enableCache&&this.animationCache&&!this._fading},n.hideBones=function(){for(var t,e=this.animationData.hideTimelineNameMap.length,i=0;i<e;i++){var n=this.animationData.hideTimelineNameMap[i],r=this._armature.getBone(n);r&&r._hideSlots()}for(i=0,e=this.animationData.hideSlotTimelineNameMap.length;i<e;i++){t=this.animationData.hideSlotTimelineNameMap[i];var s=this._armature.getSlot(t);s&&s._resetToOrigin()}},i(n,"progress",function(){return this._progress}),e}();t.FastAnimationState=e,egret.registerClass(e,"dragonBones.FastAnimationState",["dragonBones.IAnimationState"])}(dragonBones||(dragonBones={})),function(t){var e=function(){function e(){this._totalTime=0,this._currentTime=0,this._lastTime=0,this._currentFrameIndex=0,this._currentFramePosition=0,this._currentFrameDuration=0,this._updateMode=0,this._transform=new t.DBTransform,this._durationTransform=new t.DBTransform,this._transformToFadein=new t.DBTransform,this._pivot=new t.Point,this._durationPivot=new t.Point}__define;var i=e.prototype;return e.borrowObject=function(){return 0==e._pool.length?new e:e._pool.pop()},e.returnObject=function(t){e._pool.indexOf(t)<0&&(e._pool[e._pool.length]=t),t.clear()},e.clear=function(){for(var t=e._pool.length;t--;)e._pool[t].clear();e._pool.length=0},i.clear=function(){this._bone&&(this._bone._timelineState=null,this._bone=null),this._animationState=null,this._timelineData=null,this._originPivot=null},i.fadeIn=function(e,i,n){switch(this._bone=e,this._animationState=i,this._timelineData=n,this.name=n.name,this._totalTime=this._timelineData.duration,this._isComplete=!1,this._tweenTransform=!1,this._currentFrameIndex=-1,this._currentTime=-1,this._tweenEasing=NaN,this._durationPivot.x=0,this._durationPivot.y=0,this._pivot.x=0,this._pivot.y=0,this._originPivot=this._timelineData.originPivot,this._timelineData.frameList.length){case 0:this._updateMode=0;break;case 1:this._updateMode=1;break;default:this._updateMode=-1}if(i._fadeTotalTime>0){this._bone._timelineState?this._transformToFadein.copy(this._bone._timelineState._transform):this._transformToFadein=new t.DBTransform;var r=this._timelineData.frameList[0];this._durationTransform.copy(r.transform),this._durationTransform.minus(this._transformToFadein)}this._bone._timelineState=this},i.updateFade=function(t){this._transform.x=this._transformToFadein.x+this._durationTransform.x*t,this._transform.y=this._transformToFadein.y+this._durationTransform.y*t,this._transform.scaleX=this._transformToFadein.scaleX*(1+(this._durationTransform.scaleX-1)*t),this._transform.scaleY=this._transformToFadein.scaleX*(1+(this._durationTransform.scaleY-1)*t),this._transform.rotation=this._transformToFadein.rotation+this._durationTransform.rotation*t,this._bone.invalidUpdate()},i.update=function(t){1==this._updateMode?(this._updateMode=0,this.updateSingleFrame()):-1==this._updateMode&&this.updateMultipleFrame(t)},i.updateSingleFrame=function(){var t=this._timelineData.frameList[0];this._bone.arriveAtFrame(t,this._animationState),this._isComplete=!0,this._tweenEasing=NaN,this._tweenTransform=!1,this._pivot.x=this._originPivot.x+t.pivot.x,this._pivot.y=this._originPivot.y+t.pivot.y,this._transform.copy(t.transform),this._bone.invalidUpdate()},i.updateMultipleFrame=function(t){var e=0;t/=this._timelineData.scale,t+=this._timelineData.offset;var i=this._totalTime*t,n=this._animationState.playTimes;if(0==n)this._isComplete=!1,e=Math.ceil(Math.abs(i)/this._totalTime)||1,(i-=Math.floor(i/this._totalTime)*this._totalTime)<0&&(i+=this._totalTime);else{var r=n*this._totalTime;i>=r?(i=r,this._isComplete=!0):i<=-r?(i=-r,this._isComplete=!0):this._isComplete=!1,i<0&&(i+=r),e=Math.ceil(i/this._totalTime)||1,this._isComplete?i=this._totalTime:i-=Math.floor(i/this._totalTime)*this._totalTime}if(this._currentTime!=i){this._lastTime=this._currentTime,this._currentTime=i;for(var s,a,o=this._timelineData.frameList,l=0,h=this._timelineData.frameList.length;l<h;++l){if(this._currentFrameIndex<0)this._currentFrameIndex=0;else{if(!(this._currentTime<this._currentFramePosition||this._currentTime>=this._currentFramePosition+this._currentFrameDuration||this._currentTime<this._lastTime))break;if(this._currentFrameIndex++,this._lastTime=this._currentTime,this._currentFrameIndex>=o.length){if(this._isComplete){this._currentFrameIndex--;break}this._currentFrameIndex=0}}a=o[this._currentFrameIndex],s&&this._bone.arriveAtFrame(s,this._animationState),this._currentFrameDuration=a.duration,this._currentFramePosition=a.position,s=a}a&&(this._bone.arriveAtFrame(a,this._animationState),this.updateToNextFrame(e)),this._tweenTransform&&this.updateTween()}},i.updateToNextFrame=function(e){void 0===e&&(e=0);var i=this._currentFrameIndex+1;i>=this._timelineData.frameList.length&&(i=0);var n=this._timelineData.frameList[this._currentFrameIndex],r=this._timelineData.frameList[i],s=!1;0==i&&this._animationState.playTimes&&this._animationState.currentPlayTimes>=this._animationState.playTimes&&((this._currentFramePosition+this._currentFrameDuration)/this._totalTime+e-this._timelineData.offset)*this._timelineData.scale>.999999?(this._tweenEasing=NaN,s=!1):this._animationState.autoTween?(this._tweenEasing=this._animationState.animationData.tweenEasing,isNaN(this._tweenEasing)?(this._tweenEasing=n.tweenEasing,this._tweenCurve=n.curve,isNaN(this._tweenEasing)&&null==this._tweenCurve?s=!1:(10==this._tweenEasing&&(this._tweenEasing=0),s=!0)):s=!0):(this._tweenEasing=n.tweenEasing,this._tweenCurve=n.curve,!isNaN(this._tweenEasing)&&10!=this._tweenEasing||null!=this._tweenCurve?s=!0:(this._tweenEasing=NaN,s=!1)),s?(this._durationTransform.x=r.transform.x-n.transform.x,this._durationTransform.y=r.transform.y-n.transform.y,this._durationTransform.skewX=r.transform.skewX-n.transform.skewX,this._durationTransform.skewY=r.transform.skewY-n.transform.skewY,this._durationTransform.scaleX=r.transform.scaleX-n.transform.scaleX+r.scaleOffset.x,this._durationTransform.scaleY=r.transform.scaleY-n.transform.scaleY+r.scaleOffset.y,this._durationPivot.x=r.pivot.x-n.pivot.x,this._durationPivot.y=r.pivot.y-n.pivot.y,this._durationTransform.normalizeRotation(),0==i&&(this._durationTransform.skewX=t.TransformUtil.formatRadian(this._durationTransform.skewX),this._durationTransform.skewY=t.TransformUtil.formatRadian(this._durationTransform.skewY)),this._durationTransform.x||this._durationTransform.y||this._durationTransform.skewX||this._durationTransform.skewY||1!=this._durationTransform.scaleX||1!=this._durationTransform.scaleY||this._durationPivot.x||this._durationPivot.y?this._tweenTransform=!0:this._tweenTransform=!1):this._tweenTransform=!1,this._tweenTransform||(this._transform.copy(n.transform),this._pivot.x=this._originPivot.x+n.pivot.x,this._pivot.y=this._originPivot.y+n.pivot.y,this._bone.invalidUpdate())},i.updateTween=function(){var e=(this._currentTime-this._currentFramePosition)/this._currentFrameDuration;this._tweenCurve?e=this._tweenCurve.getValueByProgress(e):this._tweenEasing&&(e=t.MathUtil.getEaseValue(e,this._tweenEasing));var i=this._timelineData.frameList[this._currentFrameIndex],n=i.transform,r=i.pivot;this._transform.x=n.x+this._durationTransform.x*e,this._transform.y=n.y+this._durationTransform.y*e,this._transform.skewX=n.skewX+this._durationTransform.skewX*e,this._transform.skewY=n.skewY+this._durationTransform.skewY*e,this._transform.scaleX=n.scaleX+this._durationTransform.scaleX*e,this._transform.scaleY=n.scaleY+this._durationTransform.scaleY*e,this._pivot.x=r.x+this._durationPivot.x*e,this._pivot.y=r.y+this._durationPivot.y*e,this._bone.invalidUpdate()},e._pool=[],e}();t.FastBoneTimelineState=e,egret.registerClass(e,"dragonBones.FastBoneTimelineState")}(dragonBones||(dragonBones={})),function(t){var e=function(){function e(){this._totalTime=0,this._currentTime=0,this._currentFrameIndex=0,this._currentFramePosition=0,this._currentFrameDuration=0,this._updateMode=0,this._durationColor=new t.ColorTransform}__define;var i=e.prototype;return e.borrowObject=function(){return 0==e._pool.length?new e:e._pool.pop()},e.returnObject=function(t){e._pool.indexOf(t)<0&&(e._pool[e._pool.length]=t),t.clear()},e.clear=function(){for(var t=e._pool.length;t--;)e._pool[t].clear();e._pool.length=0},i.clear=function(){this._slot=null,this._armature=null,this._animation=null,this._animationState=null,this._timelineData=null},i.fadeIn=function(t,e,i){switch(this._slot=t,this._armature=this._slot.armature,this._animation=this._armature.animation,this._animationState=e,this._timelineData=i,this.name=i.name,this._totalTime=this._timelineData.duration,this._isComplete=!1,this._blendEnabled=!1,this._tweenColor=!1,this._currentFrameIndex=-1,this._currentTime=-1,this._tweenEasing=NaN,this._weight=1,this._timelineData.frameList.length){case 0:this._updateMode=0;break;case 1:this._updateMode=1;break;default:this._updateMode=-1}},i.updateFade=function(t){},i.update=function(t){-1==this._updateMode?this.updateMultipleFrame(t):1==this._updateMode&&(this._updateMode=0,this.updateSingleFrame())},i.updateMultipleFrame=function(t){var e=0;t/=this._timelineData.scale,t+=this._timelineData.offset;var i=this._totalTime*t,n=this._animationState.playTimes;if(0==n)this._isComplete=!1,e=Math.ceil(Math.abs(i)/this._totalTime)||1,(i-=Math.floor(i/this._totalTime)*this._totalTime)<0&&(i+=this._totalTime);else{var r=n*this._totalTime;i>=r?(i=r,this._isComplete=!0):i<=-r?(i=-r,this._isComplete=!0):this._isComplete=!1,i<0&&(i+=r),e=Math.ceil(i/this._totalTime)||1,this._isComplete?i=this._totalTime:i-=Math.floor(i/this._totalTime)*this._totalTime}if(this._currentTime!=i){this._currentTime=i;for(var s,a,o=this._timelineData.frameList,l=0,h=this._timelineData.frameList.length;l<h;++l){if(this._currentFrameIndex<0)this._currentFrameIndex=0;else{if(!(this._currentTime<this._currentFramePosition||this._currentTime>=this._currentFramePosition+this._currentFrameDuration))break;if(this._currentFrameIndex++,this._currentFrameIndex>=o.length){if(this._isComplete){this._currentFrameIndex--;break}this._currentFrameIndex=0}}a=o[this._currentFrameIndex],s&&this._slot._arriveAtFrame(s,this._animationState),this._currentFrameDuration=a.duration,this._currentFramePosition=a.position,s=a}a&&(this._slot._arriveAtFrame(a,this._animationState),this._blendEnabled=a.displayIndex>=0,this._blendEnabled?this.updateToNextFrame(e):(this._tweenEasing=NaN,this._tweenColor=!1)),this._blendEnabled&&this.updateTween()}},i.updateToNextFrame=function(e){void 0===e&&(e=0);var i=this._currentFrameIndex+1;i>=this._timelineData.frameList.length&&(i=0);var n,r,s=this._timelineData.frameList[this._currentFrameIndex],a=this._timelineData.frameList[i],o=!1;(0==i&&this._animationState.playTimes&&this._animationState.currentPlayTimes>=this._animationState.playTimes&&((this._currentFramePosition+this._currentFrameDuration)/this._totalTime+e-this._timelineData.offset)*this._timelineData.scale>.999999?(this._tweenEasing=NaN,o=!1):s.displayIndex<0||a.displayIndex<0?(this._tweenEasing=NaN,o=!1):this._animationState.autoTween?(this._tweenEasing=this._animationState.animationData.tweenEasing,isNaN(this._tweenEasing)?(this._tweenEasing=s.tweenEasing,this._tweenCurve=s.curve,isNaN(this._tweenEasing)&&null==this._tweenCurve?o=!1:(10==this._tweenEasing&&(this._tweenEasing=0),o=!0)):o=!0):(this._tweenEasing=s.tweenEasing,this._tweenCurve=s.curve,!isNaN(this._tweenEasing)&&10!=this._tweenEasing||null!=this._tweenCurve?o=!0:(this._tweenEasing=NaN,o=!1)),o&&(s.color||a.color)?(t.ColorTransformUtil.minus(a.color||t.ColorTransformUtil.originalColor,s.color||t.ColorTransformUtil.originalColor,this._durationColor),this._tweenColor=0!=this._durationColor.alphaOffset||0!=this._durationColor.redOffset||0!=this._durationColor.greenOffset||0!=this._durationColor.blueOffset||0!=this._durationColor.alphaMultiplier||0!=this._durationColor.redMultiplier||0!=this._durationColor.greenMultiplier||0!=this._durationColor.blueMultiplier):this._tweenColor=!1,this._tweenColor)||(s.color?(n=s.color,r=!0):(n=t.ColorTransformUtil.originalColor,r=!1),(this._slot._isColorChanged||r)&&(t.ColorTransformUtil.isEqual(this._slot._colorTransform,n)||this._slot._updateDisplayColor(n.alphaOffset,n.redOffset,n.greenOffset,n.blueOffset,n.alphaMultiplier,n.redMultiplier,n.greenMultiplier,n.blueMultiplier,r)))},i.updateTween=function(){var e=this._timelineData.frameList[this._currentFrameIndex];if(this._tweenColor){var i=(this._currentTime-this._currentFramePosition)/this._currentFrameDuration;null!=this._tweenCurve?i=this._tweenCurve.getValueByProgress(i):this._tweenEasing&&(i=t.MathUtil.getEaseValue(i,this._tweenEasing)),e.color?this._slot._updateDisplayColor(e.color.alphaOffset+this._durationColor.alphaOffset*i,e.color.redOffset+this._durationColor.redOffset*i,e.color.greenOffset+this._durationColor.greenOffset*i,e.color.blueOffset+this._durationColor.blueOffset*i,e.color.alphaMultiplier+this._durationColor.alphaMultiplier*i,e.color.redMultiplier+this._durationColor.redMultiplier*i,e.color.greenMultiplier+this._durationColor.greenMultiplier*i,e.color.blueMultiplier+this._durationColor.blueMultiplier*i,!0):this._slot._updateDisplayColor(this._durationColor.alphaOffset*i,this._durationColor.redOffset*i,this._durationColor.greenOffset*i,this._durationColor.blueOffset*i,this._durationColor.alphaMultiplier*i+1,this._durationColor.redMultiplier*i+1,this._durationColor.greenMultiplier*i+1,this._durationColor.blueMultiplier*i+1,!0)}},i.updateSingleFrame=function(){var e,i,n=this._timelineData.frameList[0];(this._slot._arriveAtFrame(n,this._animationState),this._isComplete=!0,this._tweenEasing=NaN,this._tweenColor=!1,this._blendEnabled=n.displayIndex>=0,this._blendEnabled)&&(n.color?(e=n.color,i=!0):(e=t.ColorTransformUtil.originalColor,i=!1),(this._slot._isColorChanged||i)&&(t.ColorTransformUtil.isEqual(this._slot._colorTransform,e)||this._slot._updateDisplayColor(e.alphaOffset,e.redOffset,e.greenOffset,e.blueOffset,e.alphaMultiplier,e.redMultiplier,e.greenMultiplier,e.blueMultiplier,i)))},e.HALF_PI=.5*Math.PI,e.DOUBLE_PI=2*Math.PI,e._pool=[],e}();t.FastSlotTimelineState=e,egret.registerClass(e,"dragonBones.FastSlotTimelineState")}(dragonBones||(dragonBones={})),function(){var t=dragonBones.DataParser,e=dragonBones.TextureData,i=function(t,e,i){this._textureDatas={},this.scale=i||1,this.texture=t,this.name=e.name,this.parseData(e)};i.rotatedDic={},i.prototype={constructor:i,getTexture:function(t){var e=this._textureDatas[t];return e&&(e.texture=this.texture,e.rotated&&(i.rotatedDic[t]=1)),e},dispose:function(){this.texture=null,this._textureDatas={}},getRegion:function(t){var i=this._textureDatas[t];return i&&i instanceof e?i.region:null},getFrame:function(t){var i=this._textureDatas[t];return i&&i instanceof e?i.frame:null},parseData:function(e){this._textureDatas=t.parseTextureAtlasData(e,this.scale)}},dragonBones.TextureAtlas=i}(),function(t){Math.PI;var e=dragonBones.TextureAtlas,i=function(){t.call(this,this),this._display=null};__extends(i,t,{dispose:function(){if(this._displayList)for(var e=this._displayList.length,i=0;i<e;i++){var n=this._displayList[i];"function"==typeof n.dispose&&n.dispose()}t.prototype.dispose(),this._display=null},_updateDisplay:function(t){this._display=t},_getDisplayIndex:function(){return this._display&&this._display.parent?this._display.parent.getChildIndex(this._display):-1},_addDisplayToContainer:function(t,e){this._display&&t&&(e?t.addChildAt(this._display,e):t.addChild(this._display))},_removeDisplayFromContainer:function(){this._display&&this._display.parent&&this._display.parent.removeChild(this._display)},_updateTransform:function(){this._display&&(this._display.position.x=this._global.x,this._display.position.y=this._global.y,this._display.scale.x=this._global.scaleX,this._display.scale.y=this._global.scaleY,this._display.rotation=this._global.skewX)},_updateDisplayVisible:function(t){this._display&&this._parent&&(this._display.visible=this._parent._visible&&this._visible&&t)},_updateDisplayColor:function(e,i,n,r,s,a,o,l,h){t.prototype._updateDisplayColor.call(this,e,i,n,r,s,a,o,l,h),this._display&&(this._display.alpha=s)},_updateDisplayBlendMode:function(t){},_calculateRelativeParentTransform:function(){this._global.scaleX=this._origin.scaleX*this._offset.scaleX,this._global.scaleY=this._origin.scaleY*this._offset.scaleY,this._global.skewX=this._origin.skewX+this._offset.skewX,this._global.skewY=this._origin.skewY+this._offset.skewY,this._global.x=this._origin.x+this._offset.x+this._parent._tweenPivot.x,this._global.y=this._origin.y+this._offset.y+this._parent._tweenPivot.y,this._displayDataList&&this._currentDisplayIndex>=0&&this._displayDataList[this._currentDisplayIndex]&&1==e.rotatedDic[this._displayDataList[this._currentDisplayIndex].name]&&(this._global.skewX-=1.57,this._global.skewY-=1.57)}}),dragonBones.PixiSlot=i}(dragonBones.Slot),function(t){var e=dragonBones.Armature,i=dragonBones.PixiSlot,n=function(){t.call(this,this)};__extends(n,t,{_generateArmature:function(){return new e(new PIXI.Container)},_generateSlot:function(){return new i},_generateDisplay:function(t,e,i,n){var r=t.getTexture(e),s=r.region;this._textureCache=this._textureCache||{},this._textureCache[t.texture.src]||(this._textureCache[t.texture.src]=new PIXI.BaseTexture(t.texture));var a=new PIXI.Texture(this._textureCache[t.texture.src],new PIXI.Rectangle(s.x,s.y,s.width,s.height)),o=new PIXI.Sprite(a);if(isNaN(i)||isNaN(n)){var l=t.getFrame(e);null!=l?(i=l.width/2,n=l.height/2):(i=r.region.width/2,n=r.region.height/2)}return o.pivot.x=i,o.pivot.y=n,o}}),dragonBones.PixiFactory=n}(dragonBones.BaseFactory),(EHDI=EHDI||Object.create(null)).aka={AutoDetectRenderer:PIXI.autoDetectRenderer,CanvasRenderer:PIXI.CanvasRenderer,GLRenderer:PIXI.WebGLRenderer,AbstractFilter:PIXI.Filter,Container:PIXI.Container,Sprite:PIXI.Sprite,AnimatedSprite:PIXI.extras.AnimatedSprite,PixiText:PIXI.Text,PixiFilters:PIXI.filters,TextureCache:PIXI.utils.TextureCache,Loader:PIXI.loader,Graphics:PIXI.Graphics,Ticker:PIXI.ticker,Rectangle:PIXI.Rectangle,TilingSprite:PIXI.extras.TilingSprite},EHDI.config={isTransition:!1},Object.defineProperties(PIXI.DisplayObject.prototype,{pivotX:{get:function(){return this.pivot.x},set:function(t){this.pivot.x=t}},pivotY:{get:function(){return this.pivot.y},set:function(t){this.pivot.y=t}},scaleX:{get:function(){return this.scale.x},set:function(t){this.scale.x=t}},scaleY:{get:function(){return this.scale.y},set:function(t){this.scale.y=t}}}),(EHDI=EHDI||Object.create(null)).displays=EHDI.displays||Object.create(null),EHDI.displays.Button=function(t){this.pointerUp=t,this.pointerDown=arguments.length<=1||void 0===arguments[1]?void 0:arguments[1],this.mouseOver=arguments.length<=2||void 0===arguments[2]?void 0:arguments[2],this.disabledTexture=arguments.length<=3||void 0===arguments[3]?void 0:arguments[3],this.scaleOnPointerDown=arguments.length<=4||void 0===arguments[4]?void 0:arguments[4];var e=!1;this.onClickFunction=null,this.baseScale={x:1,y:1},EHDI.aka.Sprite.call(this,t),this.sfx=null,this.isDisabled=function(){return e},this.setDisabled=function(t){e=t},this.interactive=!0,this.anchor.x=.5,this.anchor.y=.5,this.hitArea=new PIXI.Rectangle(.5*-this.width,.5*-this.height,this.width,this.height)},EHDI.displays.Button.prototype=Object.create(EHDI.aka.Sprite.prototype),EHDI.displays.Button.prototype.touchstart=function(t){!0!==this.isDisabled()&&(this.isTouched=!0,this.touchID=t.data.identifier,this.pointerDown&&(this.texture=this.pointerDown),this.customScale?(this.baseScale.x=this.scale.x,this.baseScale.y=this.scale.y,this.scale.x=this.customScale.x,this.scale.y=this.customScale.y):this.scaleOnPointerDown&&(this.baseScale.x=this.scale.x,this.baseScale.y=this.scale.y,this.scale.x=this.scaleOnPointerDown,this.scale.y=this.scaleOnPointerDown))},EHDI.displays.Button.prototype.touchend=function(t){!0!==this.isDisabled()&&(this.pointerUp&&(this.texture=this.pointerUp),(this.customScale||this.scaleOnPointerDown)&&(this.scale.x=this.baseScale.x,this.scale.y=this.baseScale.y))},EHDI.displays.Button.prototype.touchendoutside=function(t){this.touchID===t.data.identifier&&!0!==this.isDisabled()&&(this.pointerUp&&(this.texture=this.pointerUp),(this.customScale||this.scaleOnPointerDown)&&(this.scale.x=this.baseScale.x,this.scale.y=this.baseScale.y),this.isTouched=!1)},EHDI.displays.Button.prototype.tap=function(t){!0!==this.isDisabled()&&!0!==EHDI.config.isTransition&&(this.onClickFunction&&this.isTouched&&this.onClickFunction.apply(null,this.onClickArgs),this.isTouched=!1)},EHDI.displays.Button.prototype.mouseover=function(t){!0!==this.isDisabled()&&this.mouseOver&&(this.texture=this.mouseOver)},EHDI.displays.Button.prototype.mouseout=function(t){!0!==this.isDisabled()&&(this.pointerUp&&(this.texture=this.pointerUp),(this.customScale||this.scaleOnPointerDown)&&(this.scale.x=this.baseScale.x,this.scale.y=this.baseScale.y))},EHDI.displays.Button.prototype.mousedown=function(t){!0!==this.isDisabled()&&(this.pointerDown&&(this.texture=this.pointerDown),this.customScale?(this.baseScale.x=this.scale.x,this.baseScale.y=this.scale.y,this.scale.x=this.customScale.x,this.scale.y=this.customScale.y):this.scaleOnPointerDown&&(this.baseScale.x=this.scale.x,this.baseScale.y=this.scale.y,this.scale.x=this.scaleOnPointerDown,this.scale.y=this.scaleOnPointerDown))},EHDI.displays.Button.prototype.mouseup=function(t){!0!==this.isDisabled()&&(this.pointerUp&&(this.texture=this.pointerUp),(this.customScale||this.scaleOnPointerDown)&&(this.scale.x=this.baseScale.x,this.scale.y=this.baseScale.y))},EHDI.displays.Button.prototype.click=function(t){!0!==this.isDisabled()&&!0!==EHDI.config.isTransition&&this.onClickFunction&&this.onClickFunction.apply(null,this.onClickArgs)},EHDI.displays.Button.prototype.mouseupoutside=function(t){!0!==this.isDisabled()&&(this.pointerUp&&(this.texture=this.pointerUp),this.scaleOnPointerDown&&(this.scale.x=this.baseScale.x,this.scale.y=this.baseScale.y))},EHDI.displays.Button.prototype.disable=function(t){this.setDisabled(t),this.disabledTexture&&t?(this.texture=this.disabledTexture,this.scaleOnPointerDown&&(this.scale.x=this.baseScale.x,this.scale.y=this.baseScale.y)):this.pointerUp&&!t&&(this.texture=this.pointerUp,this.scaleOnPointerDown&&(this.scale.x=this.baseScale.x,this.scale.y=this.baseScale.y))},EHDI.displays.Button.defaultSFX=null,EHDI.displays.Button.prototype.setSFX=function(t){this.sfx=t},EHDI.displays.Button.prototype.setOnClickFunction=function(t){this.onClickFunction=t,this.onClickArgs=arguments.length<=1||void 0===arguments[1]?[]:arguments[1]},EHDI.displays.Button.prototype.destroy=function(){this.onClickFunction=null,delete this.pointerUp,delete this.pointerDown,delete this.mouseOver,delete this.disabledTexture,delete this.onClickFunction,delete this.baseScale,EHDI.aka.Sprite.prototype.destroy.apply(this,arguments)},EHDI.displays.Button.prototype.dispose=function(){delete this.pointerUp,delete this.pointerDown,delete this.mouseOver,delete this.disabledTexture,delete this.onClickFunction,delete this.baseScale,this.destroy({children:!0})},(EHDI=EHDI||Object.create(null)).displays=EHDI.displays||Object.create(null),EHDI.displays.TextSprite=function(t){EHDI.aka.PixiText.call(this,t.TEXT,t.STYLE)},EHDI.displays.TextSprite.prototype=Object.create(EHDI.aka.PixiText.prototype),(EHDI=EHDI||Object.create(null)).displays=EHDI.displays||Object.create(null),EHDI.displays.TextureRectangle=function(t,e,i){var n=new PIXI.Graphics;n._sprite=null,n._width=e,n._height=i,n._color=t;var r,s,a;r=n._width,s=n._height,a=n._color,n.clear(),n.beginFill(a),n.drawRect(0,0,r,s),n.endFill();var o=n.generateCanvasTexture(1);return n.destroy(),o},EHDI.displays.TextureCircle=function(t,e){var i=new PIXI.Graphics;i._sprite=null,i._radius=e,i._color=t;var n,r;return n=i._radius,r=i._color,i.clear(),i.beginFill(r),i.drawCircle(n,n,n),i.endFill(),i.generateCanvasTexture(1)},(EHDI=EHDI||Object.create(null)).displays=EHDI.displays||Object.create(null),EHDI.displays.ToggleButton=function(t,e,i,n){this.active=!(arguments.length<=4||void 0===arguments[4])&&arguments[4],this.scaleOnPointerDown=arguments.length<=5||void 0===arguments[5]?1:arguments[5],this.baseScale={x:1,y:1},this.inactivePointerUp=t,this.inactivePointerDown=e,this.activePointerUp=i,this.activePointerDown=n,this.onClickFunction=null,!1===this.active?EHDI.aka.Sprite.call(this,t):EHDI.aka.Sprite.call(this,i),this.interactive=!0,this.anchor.x=.5,this.anchor.y=.5},EHDI.displays.ToggleButton.prototype=Object.create(EHDI.aka.Sprite.prototype),EHDI.displays.ToggleButton.prototype.touchstart=function(t){!1===this.active?this.texture=this.inactivePointerDown:this.texture=this.activePointerDown,this.scaleOnPointerDown&&(this.baseScale.x=this.scale.x,this.baseScale.y=this.scale.y,this.scale.x=this.scaleOnPointerDown,this.scale.y=this.scaleOnPointerDown)},EHDI.displays.ToggleButton.prototype.touchend=function(t){!1===this.active?this.texture=this.inactivePointerUp:this.texture=this.activePointerUp,this.scaleOnPointerDown&&(this.scale.x=this.baseScale.x,this.scale.y=this.baseScale.y)},EHDI.displays.ToggleButton.prototype.touchendoutside=function(t){!1===this.active?this.texture=this.inactivePointerUp:this.texture=this.activePointerUp,this.scaleOnPointerDown&&(this.scale.x=this.baseScale.x,this.scale.y=this.baseScale.y)},EHDI.displays.ToggleButton.prototype.tap=function(t){this.active=!this.active,!1===this.active?this.texture=this.inactivePointerUp:this.texture=this.activePointerUp,this.scaleOnPointerDown&&(this.scale.x=this.baseScale.x,this.scale.y=this.baseScale.y),this.onClickFunction&&this.onClickFunction(this.active)},EHDI.displays.ToggleButton.prototype.mouseout=function(t){!1===this.active?this.texture=this.inactivePointerUp:this.texture=this.activePointerUp,this.scaleOnPointerDown&&(this.scale.x=this.baseScale.x,this.scale.y=this.baseScale.y)},EHDI.displays.ToggleButton.prototype.mousedown=function(t){!1===this.active?this.texture=this.inactivePointerDown:this.texture=this.activePointerDown,this.scaleOnPointerDown&&(this.baseScale.x=this.scale.x,this.baseScale.y=this.scale.y,this.scale.x=this.scaleOnPointerDown,this.scale.y=this.scaleOnPointerDown)},EHDI.displays.ToggleButton.prototype.mouseup=function(t){!1===this.active?this.texture=this.inactivePointerUp:this.texture=this.activePointerUp,this.scaleOnPointerDown&&(this.scale.x=this.baseScale.x,this.scale.y=this.baseScale.y)},EHDI.displays.ToggleButton.prototype.click=function(t){this.active=!this.active,!1===this.active?this.texture=this.inactivePointerUp:this.texture=this.activePointerUp,this.scaleOnPointerDown&&(this.scale.x=this.baseScale.x,this.scale.y=this.baseScale.y),this.onClickFunction&&this.onClickFunction(this.active)},EHDI.displays.ToggleButton.prototype.mouseupoutside=function(t){!1===this.active?this.texture=this.inactivePointerUp:this.texture=this.activePointerUp,this.scaleOnPointerDown&&(this.scale.x=this.baseScale.x,this.scale.y=this.baseScale.y)},EHDI.displays.Button.prototype.destroy=function(){this.onClickFunction=null,delete this.pointerUp,delete this.pointerDown,delete this.mouseOver,delete this.disabledTexture,delete this.baseScale,EHDI.aka.Sprite.prototype.destroy.apply(this,arguments)},EHDI.displays.ToggleButton.prototype.dispose=function(){delete this.inactivePointerUp,delete this.inactivePointerDown,delete this.activePointerUp,delete this.activePointerDown,delete this.onClickFunction,delete this.baseScale,this.destroy({children:!0})},EHDI.displays.ToggleButton.prototype.setOnClickFunction=function(t){this.onClickFunction=t},(EHDI=EHDI||Object.create(null)).CameraManager=function(t){var e,i=!1,n=t,r=null,s=!1,a=function(t){var e=document.getElementById("photo");e.click(),e.onchange=function(i){var n,r=i.target.files;if(r&&r.length>0){n=r[0];var s=new FileReader;s.onload=function(e){var i=new Image,n=EXIF.readFromBinaryFile(function(t){t=t.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var e=atob(t),i=e.length,n=new Uint8Array(i),r=0;r<i;r++)n[r]=e.charCodeAt(r);return n.buffer}(this.result)).Orientation;i.src=e.target.result,i.onload=function(e){var r=new PIXI.BaseTexture(i);r.imageUrl=i.src;var s=new PIXI.Texture(r);t.apply(null,[s,n])}},s.readAsDataURL(n)}e.value=""}},o=function(){e&&cancelAnimationFrame(e),s=!0};return{getVideoSetup:function(){return i},setupVideo:function(t,a,o,l,h,u){if(!0!==i){void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(t){var e=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return e?new Promise(function(i,n){e.call(navigator,t,i,n)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),navigator.mediaDevices.getUserMedia({audio:!1,video:!0}).then(function(a){var c=document.createElement("video");c.autoplay=!0,n.style.position="absolute",c.style.position="absolute",c.style.display="none",document.getElementById("vidiv").appendChild(c),r=null,(r=document.createElement("canvas")).id="stream",r.style.position="absolute",r.width=n.width,r.height=n.height,r.style.width=n.style.width,r.style.height=n.style.height,r.style.display="block",r.style.marginTop=n.style.marginTop,r.style.marginBottom=n.style.marginBottom,r.style.marginLeft=n.style.marginLeft,r.style.marginRight=n.style.marginRight,r.style.paddingLeft=n.style.paddingLeft,r.style.paddingRight=n.style.paddingRight,r.style.paddingTop=n.style.paddingTop,r.style.paddingBottom=n.style.paddingBottom,document.getElementById("vidiv").appendChild(r);var d=document.querySelector("video");window.stream=a,d.src=URL.createObjectURL(a),d.play(),d.onloadeddata=function(){i=!0,t(),function(t,i,n,r){var a=document.getElementById("stream").getContext("2d"),o=document.body.querySelector("video"),l=1;-1!==n&&(l=n/o.videoWidth),-1!==r&&(l=r/o.videoHeight);var h=o.videoWidth*l,u=o.videoHeight*l,c=t-.5*h,d=i-.5*u;s=!1;var f=function(){!1===s&&(a.drawImage(o,c,d,h,u),requestAnimationFrame(f))};e=requestAnimationFrame(f)}(o,l,h,u)}}).catch(function(t){alert(t.name+": "+t.message),a()})}},takePhoto:function(t,e){if(e){a(function(e,i){var n=new EHDI.aka.Container,r=new EHDI.aka.Sprite(e);!function(t,e){switch(t){case 3:e.rotation=Math.PI,e.position.set(e.width,e.height);break;case 6:e.rotation=.5*Math.PI,e.position.set(e.height,0);break;case 8:e.rotation=-.5*Math.PI,e.position.set(0,e.width)}}(i,r),n.addChild(r),t.apply(null,[n])})}else{var n=document.body.querySelector("video");if(void 0!==n&&null!==n)!function(t){var e=document.createElement("canvas"),i=document.body.querySelector("video"),n=document.getElementById("stream");e.width=i.videoWidth,e.height=i.videoHeight,e.getContext("2d").drawImage(i,0,0,i.videoWidth,i.videoHeight),i.pause(),i.src="",window.stream.getTracks()[0].stop(),document.getElementById("vidiv").removeChild(i),o(),document.getElementById("vidiv").removeChild(n);var r=new Image;r.src=e.toDataURL(),r.onload=function(){var e=new PIXI.BaseTexture(r),i=new PIXI.Texture(e);t.apply(null,[i])}}(function(e){i=!1;var n=new EHDI.aka.Container,r=new EHDI.aka.Sprite(e);n.addChild(r),t.apply(null,[n])})}}}},(EHDI=EHDI||Object.create(null)).Event=function(t){this.name=t,this.callbacks=[]},EHDI.Event.prototype.registerCallback=function(t){this.callbacks.push(t)},EHDI.Event.prototype.unregisterCallback=function(t){var e=this.callbacks.indexOf(t);e>-1&&this.callbacks.splice(e,1)},EHDI.Event.prototype.clearCallbacks=function(){this.callbacks.length=0},EHDI.EventManager=function(){"use strict";"use restrict";var t=Object.create(null),e=Object.create(null),i=10;return Object.defineProperty(t,"maxListeners",{set:function(t){"number"==typeof t&&(i=t)},get:function(){return i}}),t.register=function(t){var i=new EHDI.Event(t);e[t]=i},t.unregister=function(t){if(!(t in e))throw new Error("event not found");e[t].clearCallbacks(),delete e[t]},t.dispatch=function(t,i){if(!(t in e))throw new Error("event is unregistered");for(var n=e[t].callbacks,r=0,s=n.length;r<s;r++)void 0!==i?n[r](i):n[r]()},t.addListener=function(t,n){if(!(t in e))throw new Error("event is unregistered");if(e[t].callbacks.length>=i)throw new Error("max amount of listeners limit reached, maxListener: "+i);e[t].registerCallback(n)},t.removeListener=function(t,i){if(!(t in e))throw new Error("event is unregistered");e[t].callbacks.indexOf(i)<=-1&&console.log("callback listener not found"),e[t].unregisterCallback(i)},t},(EHDI=EHDI||Object.create(null)).JSONManager=function(t,e){"use strict";"use restrict";var i=t,n=e;return{setConfigData:function(t){void 0===i&&(i=t)},setLocaleData:function(t){void 0===n&&(n=t)},getLocale:function(t){return arguments.length<1?n.data:n.data[t]},getConfig:function(){return i}}},function(){"use strict";"use restrict";(EHDI=EHDI||Object.create(null)).Assets={images:EHDI.aka.TextureCache,fonts:[]},EHDI.LoadManager=function(){var t,e,i=["json","js","xml","txt"],n=["ogg","mp3","wav"],r=["ttf","woff","woff2","otf"],s=Object.create(null),a=[],o=[],l=[],h=null,u=[],c=!1,d=0,f=0,p=0,_=[],m=[];EHDI.Assets.fetch=function(e){var i=t.getResult(e);return i||(i=EHDI.aka.Loader.resources[e]||null),i};var g=function(){o.length=0,a.length=0,_.length=0,m.length=0},v=function(t,e){return t.filter(function(t){"string"!=typeof t&&(t=t.url);var i=t.split(".").pop();return-1!==e.indexOf(i)})},y=function(t){var e=t.split("/").pop().split("."),i=e[0],n=e[1];"ttf"===n&&(n="truetype"),"otf"===n&&(n="opentype"),"eot"===n&&(n="embedded-opentype");var r=document.createElement("style"),s="@font-face {font-family: '"+i+"'; src: url('"+t+"') format('"+n+"');";r.appendChild(document.createTextNode(s)),document.body.appendChild(r),EHDI.Assets.fonts.push(i)},b=function(t,e){d=f+t.progress*o.length/p},E=function(t,e,i){console.log("PixiJS Loading Error!"),console.log(t)},T=function(t,e){g(),c=!1,l.length>0&&(l.length=0),"function"==typeof h&&h.apply(null,u)},x=function(t){var e=t.progress>1?1:t.progress;d=e*a.length/p*100,f=d},w=function(t){o.length<=0?T():e.add(o).load(T)},D=function(t){console.log("CreateJS Loading Error"),console.log(t)},S=function(e,i,n){var r,a,o,l,h,u,c,d;l=(a=(r=t.getResult(i)).locale).url,h=void 0!==a.lang?a.lang:"en",o=a.id+h,c=void 0===a.font[h]?a.font.default:a.font[h],d=[l+o+".json"],u=function(){e.setConfigData(r),e.setLocaleData(t.getResult(o)),"function"==typeof n&&n()},s.queueStrings(d),s.queueFonts(c),s.start(u)};return e=EHDI.aka.Loader,t=new createjs.LoadQueue,createjs.Sound.alternateExtensions=n,Object.defineProperty(EHDI.Assets,"cjAssets",{value:t,enumerable:!1}),t.installPlugin(createjs.Sound),t.addEventListener("progress",x),t.addEventListener("complete",w),t.addEventListener("error",D),e.on("progress",b),e.on("error",E),s.queueStrings=function(t){for(var e,i,n=[];t.length>0;)i=(e=t.pop()).split("/").pop().split(".")[0],n.push({id:i,src:e});a=a.concat(n)},s.queueFonts=function(t){for(var e;t.length>0;)(e=t.pop()).split("/").pop().split(".")[0],l.push(y(e))},s.queueAudios=function(t){for(var e,i,n=[];t.length>0;)"string"!=typeof(e=t.pop())?(i=e.id,e=e.url):i=e.split("/").pop().split(".")[0],n.push({id:i,src:e});a=a.concat(n)},s.queueImages=function(t){for(var e,i,n=[];t.length>0;)"string"!=typeof(e=t.pop())?(i=e.id,e=e.url):i=e.split("/").pop().split(".")[0],n.push({name:i,url:e});o=o.concat(n)},s.queueAssets=function(t){var e=function(t,e){return t=t.filter(function(t){return e.indexOf(t)<0})},a=v(t,r),o=v(t,n),l=v(t,i),h=e(t,a);h=e(h=e(h,l),o),s.queueFonts(a),s.queueAudios(o),s.queueStrings(l),s.queueImages(h)},s.loadConfig=function(t,e,i){if("string"!=typeof t)throw new Error("Invalid URL");if(void 0===e)throw new Error("needs JSONManager component");if(c)throw new Error("Load manager is currently running");var n=t.split("/").pop().split(".")[0];g(),s.queueStrings([t]),s.start(S,[e,n,i])},s.getProgress=function(){return d},s.start=function(i,n){if(c)throw new Error("EHDI Load manager is currently running");h=i,u=n,c=!0,d=0,f=0,p=a.length+o.length,_.length+m.length,e.reset(),function(){for(var e,i;_.length>0;)i=_.pop(),e=t.getItem(i),t.remove(e.id),"sound"===e.type&&createjs.Sound.removeSound(e.id);for(;m.length>0;)i=m.pop(),(e=EHDI.Assets.images[i]).destroy(!0);a.length>0?t.loadManifest(a):w()}()},s.unloadAssets=function(t){var e=function(t,e){return t=t.filter(function(t){return e.indexOf(t)<0})},s=v(t,r),a=v(t,n),o=v(t,i),l=e(t,a);l=e(l=e(l,o),s),_=(_=_.concat(a)).concat(o),m=m.concat(l)},s}()}(),(EHDI=EHDI||Object.create(null)).ScaleManager=function(t,e,i,n,r){var s,a,o,l,h,u,c=arguments.length<=5||void 0===arguments[5]?null:arguments[5],d=document.createElement("style");d.appendChild(document.createTextNode("html, body {padding : 0; margin : 0; overflow : hidden; width: 100%; height: 100%, position : fixed}")),document.head.appendChild(d);var f=1,p=n,_=r;function m(){s=window.innerWidth/n,a=window.innerHeight/r,i===EHDI.ScaleManager.DOCKING.WIDTH?f=s:i===EHDI.ScaleManager.DOCKING.HEIGHT?f=a:i===EHDI.ScaleManager.DOCKING.AUTO?f=Math.min(s,a):i===EHDI.ScaleManager.DOCKING.FULLSCREEN&&(f=Math.max(s,a));var o=t.view;o.style.paddingLeft=0,o.style.paddingRight=0,o.style.paddingTop=0,o.style.paddingBottom=0,o.style.display="block",p=Math.floor(n*f),_=Math.floor(r*f),e.scale.x=e.scale.y=f,p>window.innerWidth?(EHDI.screen.xOffset=.5*(window.innerWidth-p),p=window.innerWidth,EHDI.screen.viewWidth=p/f):(EHDI.screen.viewWidth=window.innerWidth/f,EHDI.screen.viewWidth>n&&(EHDI.screen.viewWidth=n),EHDI.screen.xOffset=0),_>window.innerHeight?(EHDI.screen.yOffset=.5*(window.innerHeight-_),_=window.innerHeight,EHDI.screen.viewHeight=_/f):(EHDI.screen.viewHeight=window.innerHeight/f,EHDI.screen.viewHeight>r&&(EHDI.screen.viewHeight=r),EHDI.screen.yOffset=0),EHDI.screen.centerOrigin&&e.children.forEach(function(t){t.position.set(.5*EHDI.screen.viewWidth,.5*EHDI.screen.viewHeight)}),t.resize(p,_),function(){var e=t.view;e.style.marginTop=0,e.style.marginBottom=0,e.style.marginLeft=0,e.style.marginRight=0,(i==EHDI.ScaleManager.DOCKING.HEIGHT||i==EHDI.ScaleManager.DOCKING.FULLSCREEN||i==EHDI.ScaleManager.DOCKING.AUTO&&p<window.innerWidth)&&(h=(window.innerWidth-p)/2,e.style.marginLeft=h+"px",e.style.marginRight=h+"px");(i==EHDI.ScaleManager.DOCKING.WIDTH||i==EHDI.ScaleManager.DOCKING.FULLSCREEN||i==EHDI.ScaleManager.DOCKING.AUTO&&_<window.innerHeight)&&(h=(window.innerHeight-_)/2,e.style.marginTop=h+"px",e.style.marginBottom=h+"px")}(),window.scrollTo(0,0),g(),c&&c()}function g(){return o=window.innerHeight>window.innerWidth?EHDI.ScaleManager.SCREEN_ORIENTATION.PORTRAIT:EHDI.ScaleManager.SCREEN_ORIENTATION.LANDSCAPE}return EHDI.screen=EHDI.screen||Object.create(null),g(),m(),{getScale:function(){return f},getOrientation:function(){return o},scaleToWindow:m,setResizeCallback:function(t){if("function"!=typeof t)throw new Error("insert function as parameter");c=t},addAutomaticScaling:function(t){l||window.addEventListener("resize",function(){clearTimeout(u),t=t||500,u=setTimeout(m,t),l=!0})}}},EHDI.ScaleManager.SCREEN_ORIENTATION={LANDSCAPE:0,PORTRAIT:1},EHDI.ScaleManager.DOCKING={WIDTH:0,HEIGHT:1,AUTO:2,FULLSCREEN:3},(EHDI=EHDI||Object.create(null)).scene=EHDI.scene||Object.create(null),EHDI.SceneManager=function(t,e,i,n){var r,s=arguments.length<=4||void 0===arguments[4]?document.getElementById("game-canvas"):arguments[4],a=new EHDI.aka.Container,o={view:s,antialiasing:!1,transparent:!0,resolution:window.devicePixelRatio,autoResize:!0};r=i?new EHDI.aka.CanvasRenderer(t,e,o):new EHDI.aka.AutoDetectRenderer(t,e,o),"gl-high"!==EHDI.checkGLQuality(r)&&EHDI.BrowserInfo.platformType.indexOf("iPad")>-1&&(EHDI.BrowserInfo.isLowEnd=!0);var l=t,h=e,u=[],c=null,d=new EHDI.aka.Container,f=new EHDI.aka.Container,p=new EHDI.aka.Container;return EHDI.screen=EHDI.screen||Object.create(null),EHDI.screen.stageWidth=t,EHDI.screen.stageHeight=e,EHDI.screen.centerOrigin=n,n&&(d.position.set(.5*t,.5*e),f.position.set(.5*t,.5*e),p.position.set(.5*t,.5*e)),a.addChild(d),a.addChild(f),a.addChild(p),{getStage:function(){return a},getRenderer:function(){return r},getStageWidth:function(){return l},getStageHeight:function(){return h},defaultWidth:t,defaultHeight:e,get notificationList(){return p.children},get popUpList(){return u},renderScreen:function(){r.render(a)},changeScene:function(t,e,i){if("function"==typeof t.screenWillAppear&&t.screenWillAppear(),c&&"function"==typeof c.screenWillDisappear&&c.screenWillDisappear(),e){var n=Object.create(null);EHDI.config.isTransition=!0;for(var r=Object.keys(e),s=0;s<r.length;s++)e[r[s]].hasOwnProperty("from")&&e[r[s]].hasOwnProperty("to")?(t[r[s]]=e[r[s]].from,n[r[s]]=e[r[s]].to):e[r[s]].hasOwnProperty("duration")||(n[r[s]]=e[r[s]]);d.addChild(t),n.onComplete=function(){EHDI.config.isTransition=!1,c&&("function"==typeof c.screenDidDisappear&&c.screenDidDisappear(),d.removeChild(c)),"function"==typeof t.screenDidAppear&&t.screenDidAppear(),i&&c.destroy({children:!0}),c=t},TweenLite.to(t,e.duration,n)}else d.addChild(t),c&&(d.removeChild(c),"function"==typeof c.screenDidDisappear&&c.screenDidDisappear()),"function"==typeof t.screenDidAppear&&t.screenDidAppear(),i&&c.destroy({children:!0}),c=t},pushPopUp:function(t,e){if("function"==typeof t.popUpWillAppear&&t.popUpWillAppear(),"function"==typeof c.popUpWillAppear&&0===u.length&&c.popUpWillAppear(),e){var i=Object.create(null);EHDI.config.isTransition=!0;for(var n=Object.keys(e),r=0;r<n.length;r++)e[n[r]].hasOwnProperty("from")&&e[n[r]].hasOwnProperty("to")?(t[n[r]]=e[n[r]].from,i[n[r]]=e[n[r]].to):e[n[r]].hasOwnProperty("duration")||(i[n[r]]=e[n[r]]);f.addChild(t),i.onComplete=function(){EHDI.config.isTransition=!1,"function"==typeof t.popUpDidAppear&&t.popUpDidAppear(),"function"==typeof c.popUpDidAppear&&0===u.length&&c.popUpDidAppear(),u.push(t)},TweenLite.to(t,e.duration,i)}else"function"==typeof t.popUpDidAppear&&t.popUpDidAppear(),"function"==typeof c.popUpDidAppear&&0===u.length&&c.popUpDidAppear(),u.push(t),f.addChild(t)},popPopUp:function(t,e){if(u.length<=0)throw"Pop Up list is empty!";var i=u.pop();if("function"==typeof i.popUpWillDisappear&&i.popUpWillDisappear(),"function"==typeof c.popUpWillDisappear&&0===u.length&&c.popUpWillDisappear(),t){var n=Object.create(null);EHDI.config.isTransition=!0;for(var r=Object.keys(t),s=0;s<r.length;s++)t[r[s]].hasOwnProperty("from")&&t[r[s]].hasOwnProperty("to")?(i[r[s]]=t[r[s]].from,n[r[s]]=t[r[s]].to):t[r[s]].hasOwnProperty("duration")||(n[r[s]]=t[r[s]]);n.onComplete=function(){EHDI.config.isTransition=!1,"function"==typeof i.popUpDidDisappear&&i.popUpDidDisappear(),"function"==typeof c.popUpDidDisappear&&0===u.length&&c.popUpDidDisappear(),f.removeChild(i),e&&i.destroy({children:!0})},TweenLite.to(i,t.duration,n)}else f.removeChild(i),"function"==typeof i.popUpDidDisappear&&i.popUpDidDisappear(),"function"==typeof c.popUpDidDisappear&&0===u.length&&c.popUpDidDisappear(),e&&i.destroy({children:!0})},popAllPopUps:function(t){for(;u.length>0;){var e=u.pop();"function"==typeof e.popUpWillDisappear&&e.popUpWillDisappear(),"function"==typeof c.popUpWillDisappear&&0===u.length&&c.popUpWillDisappear(),f.removeChild(e),"function"==typeof e.popUpDidDisappear&&e.popUpDidDisappear(),"function"==typeof c.popUpDidDisappear&&0===u.length&&c.popUpDidDisappear(),t&&e.destroy({children:!0})}},addNotification:function(t){p.addChild(t)},removeNotification:function(t,e){var i;p.children.indexOf(t)>-1&&(i=p.removeChild(t)),e&&i.destroy({children:!0}),i=null},popNofication:function(){return p.children.pop()},screenResize:function(){c&&"function"==typeof c.onScreenResize&&c.onScreenResize(),u.forEach(function(t){"function"==typeof t.onScreenResize&&t.onScreenResize()}),p.children.forEach(function(t){"function"==typeof t.onScreenResize&&t.onScreenResize()})}}},EHDI.scene.TransitionParameter=function(t,e){this.from=t,this.to=e},EHDI.scene.TransitionParameter.constructor=EHDI.scene.TransitionParameter,(EHDI=EHDI||Object.create(null)).SoundManager=function(t){var e=null,i=[],n=null,r=!1,s=!0,a=!0,o={bgm:1,sfx:1,vo:1},l=t||!0,h=function(){e&&(e.paused=!0),i.forEach(function(t){t.paused=!0}),n&&(n.paused=!0)},u=function(){a&&(e&&(e.paused=!1),i.forEach(function(t){t.paused=!1}),n&&(n.paused=!1))},c=function(){window.document.webkitHidden||window.document.hidden?h():u()},d=function(){window.addEventListener("blur",h),window.addEventListener("focus",u),window.addEventListener("pagehide",h),window.addEventListener("pageshow",u),window.addEventListener("webkitvisibilitychange",c),window.addEventListener("webkitvisibilitychange",c)};return l&&d(),{set enableInterrupt(t){"boolean"==typeof t&&l!==t&&((l=t)?d():(window.removeEventListener("blur",h),window.removeEventListener("focus",u),window.removeEventListener("pagehide",h),window.removeEventListener("pageshow",u),window.removeEventListener("webkitvisibilitychange",c),window.removeEventListener("webkitvisibilitychange",c)))},get enableInterrupt(){return l},set sfxVolume(t){"number"==typeof t&&(o.sfx=t,i&&i.forEach(function(t){t.volume=t.volume*o.sfx}))},get sfxVolume(){return o.sfx},set bgmVolume(t){"number"==typeof t&&(o.bgm=t,e&&(e.volume=e.volume*o.bgm))},get bgmVolume(){return o.bgm},set voVolume(t){"number"==typeof t&&(o.vo=t,n&&(n.volume=n.volume*o.vo))},get voVolume(){return o.vo},playBGM:function(t,i){if(i=i*o.bgm||o.bgm,"string"==typeof t)return e instanceof createjs.AbstractSoundInstance&&(e.stop(),e.destroy()),(e=createjs.Sound.play(t,{loop:-1})).volume=i,e.muted=r,e;throw"pass string id of BGM to be played"},stopBGM:function(){e&&(e.stop(),e.destroy(),e=null)},pauseBGM:function(){e&&(e.paused=!0)},resumeBGM:function(){e&&(e.paused=!1)},playSFX:function(t,e){if(e=e*o.sfx||o.sfx,"string"==typeof t){var n=createjs.Sound.play(t);n.volume=e,n.muted=r,i.push(n);var s=n.on("complete",function(t){var e=i.indexOf(t.currentTarget);if(e>-1){var r=i.splice(e,1)[0];n.off("complete",s),r.destroy()}});return n}throw"pass string id of SFX to be played"},stopSFX:function(t){var e=i.indexOf(t);if(e>-1){var n=i.splice(e,1)[0];n.stop(),n.destroy()}},stopAllSFX:function(){i.forEach(function(t){t.stop(),t.destroy()}),i=[]},pauseAllSFX:function(){i.forEach(function(t){t.paused=!0})},resumeAllSFX:function(){i.forEach(function(t){t.paused=!1})},playVO:function(t,e){if(e=e*o.vo||o.vo,"string"==typeof t)return(n=createjs.Sound.play(t)).volume=e,n.muted=r,n;throw"pass string ID of VO to be played"},stopVO:function(){n&&(n.stop(),n.destroy())},pauseVO:function(){n&&(n.paused=!0)},resumeVO:function(){n&&(n.paused=!1)},setMute:function(){var t=arguments.length<=0||void 0===arguments[0]?!r:arguments[0];r=t,e&&(e.muted=r),i.forEach(function(t){t.muted=r}),n&&(n.muted=r)},getMuted:function(){return r},setDeactivate:function(){var t=arguments.length<=0||void 0===arguments[0]?!s:arguments[0];s=t,e&&(e.paused=!s),i.forEach(function(t){t.paused=!s}),n&&(n.muted=!s)},autoResumeToggle:function(t){a=t}}},(EHDI=EHDI||Object.create(null)).StorageManager=function(){"use strict";"use restrict";var t="game_data",e=!0,i=JSON.parse(localStorage.getItem(t)),n=function(){return!!e&&(null===i&&null!==t?(i=Object.create(null),n=JSON.stringify(i),localStorage.setItem(t,n),!0):null!==i);var n};return(e=function(){try{return localStorage.setItem("t3st","1"),localStorage.removeItem("t3st"),!0}catch(t){return!1}}())?n():(i=Object.create(null),console.warn("Local storage is not supported. Current session will not be saved offline")),{checkLocalData:n,setDataID:function(e){(arguments.length<0||"string"!=typeof e)&&(e="game_data"),t=e,n()},getDataID:function(){return t},getLocalInfo:function(t){if("string"!=typeof t)throw"invalid key";return void 0===i[t]?null:i[t]},setLocalInfo:function(e,r){if(arguments.length<2)throw"invalid parameters";if("string"!=typeof e)throw"invalid key";i[e]=r,n()&&localStorage.setItem(t,JSON.stringify(i))},deleteLocalInfo:function(e){if("string"!=typeof e)throw"invalid key";delete i[e],localStorage.setItem(t,JSON.stringify(i))},clearLocalData:function(){var n;i=Object.create(null),e&&(n=JSON.stringify(i),localStorage.setItem(t,n))}}},(EHDI=EHDI||Object.create(null)).UpdateManager=function(t,e){"use strict";var i,n,r,s,a,o=!1,l=[],h=0,u=function(){window.requestAnimationFrame(u);var t=new Date;n||(n=(new Date).getTime());var e=t-i,c=(t.getTime()-n)/1e3;if(h++,r=Math.floor(h/c),c>1&&(n=(new Date).getTime(),h=0),l.length>0)for(var d=0;d<l.length;d++)l[d](e);i=t,o&&s.render(a)};if(arguments.length>0){if(!(t instanceof PIXI.CanvasRenderer||t instanceof PIXI.WebGLRenderer))throw new Error("Please pass renderer as parameter");if(!(e instanceof PIXI.DisplayObject))throw new Error("Stage is not a display object");o=!0,s=t,a=e}return u(),{getFPS:function(){return r},setAutoRender:function(t){o=t},isAutoRendering:function(){return o},addFrameListener:function(t){if("function"!=typeof t)throw new Error("Callback must be a function");l.push(t)},hasFrameListener:function(t){if("function"!=typeof t)throw new Error("Callback must be a function");return l.indexOf(t)>-1},removeFrameListener:function(t){if("function"!=typeof t)throw"Callback must be a function";var e=l.indexOf(t);e>-1&&l.splice(e,1)},removeAllFrameListeners:function(){l.length=0}}},function(t){"use strict";t.BrowserInfo=t.BrowserInfo||Object.create(null);var e,i,n,r,s=window.navigator,a=t.BrowserInfo,o=s.userAgent;a.platformType=s.platform,a.platformVersion="",a.browserName=s.appName,a.browserVersion=s.appVersion,a.isMobileDevice=!1,a.isIOS=!1,a.isLowEnd=!1,a.deviceType="desktop",-1!==s.platform.indexOf("iPhone")?(a.isMobileDevice=!0,a.platformType="iPhone "+(n=window.screen.height,320===(r=window.screen.width)&&480===n?"4":375===r&&667===n?"6":414===r&&736===n?"6+":320===r&&568===n?"5":n<=480?"1-3":" "),(a.platformType.indexOf("4")>-1||a.platformType.indexOf("1-3")>-1)&&(a.isLowEnd=!0),a.deviceType="phone",a.isIOS=!0,e=/OS (\d+_\d+)/g,-1!==o.search(e)&&(i=String(o.match(e)),a.platformVersion=i.replace("_","."))):-1!=s.platform.indexOf("iPod")?(a.isMobileDevice=!0,a.platformType="iPod",a.deviceType="tablet",a.isIOS=!0,e=/OS (\d+_\d+)/g,-1!==o.search(e)&&(i=String(o.match(e)),a.platformVersion=i.replace("_","."))):-1!=s.platform.indexOf("iPad")?(a.isMobileDevice=!0,a.platformType="iPad",a.deviceType="tablet",a.isIOS=!0,e=/OS (\d+_\d+)/g,-1!==o.search(e)&&(i=String(o.match(e)),a.platformVersion=i.replace("_","."))):-1!=o.indexOf("Android")?(a.isMobileDevice=!0,a.platformType="Android",a.deviceType="tablet",e=/OS (\d+_\d+)/g,-1!==o.search(e)&&(i=String(o.match(e)),a.platformVersion=i.replace("_","."))):-1!=o.indexOf("Kindle")||-1!=o.indexOf("Silk")?(a.isMobileDevice=!0,a.platformType="Android",a.deviceType="tablet"):-1!=o.indexOf("IEMobile")?(a.isMobileDevice=!0,a.platformType="IEMobile",a.deviceType="phone",e=/IEMobile\/(\d+\.\d+)/g,-1!==o.search(e)&&(a.platformVersion=String(o.match(e)))):-1!=s.platform.indexOf("Win")?(a.platformType="Windows",a.deviceType="desktop"):-1!=s.platform.indexOf("Mac")?(a.platformType="MAC",a.deviceType="desktop",e=/OS (\d+_\d+)/g,-1!==o.search(e)&&(i=String(o.match(e)),a.platformVersion=i.replace("_","."))):-1!=s.platform.indexOf("Linux")&&(a.platformType="Linux",a.deviceType="desktop");var l=function(){var t,e=s.userAgent,i=e.match(/(crios|samsungbrowser|opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(i[1]))return"IE "+((t=/\brv[ :]+(\d+)/g.exec(e)||[])[1]||"");if("Chrome"===i[1]&&null!=(t=e.match(/\b(OPR|Edge)\/(\d+)/))){if(-1!=t.indexOf("OPR"))return t.slice(1).join(" ").replace("OPR","Opera");if(-1!=t.indexOf("Edge"))return t.slice(1).join(" ").replace("Edge","Edge")}return i=i[2]?[i[1],i[2]]:[s.appName,s.appVersion,"-?"],null!=(t=e.match(/version\/(\d+)/i))&&i.splice(1,1,t[1]),i.join(" ")}();a.browserName=l.split(" ")[0],"CRIOS"===a.browserName.toUpperCase()&&(a.browserName="Chrome"),a.browserVersion=l.split(" ")[1],t.checkGLQuality=function(t){if(!t)throw new Error("pass renderer as parameters");var e=0,i=t.view.getContext("webgl")||t.view.getContext("experimental-webgl");if(!i)return"canvas";var n=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");return n&&(e=i.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),e>4?"gl-high":"gl-normal"}}(EHDI||Object.create(null)),(EHDI=EHDI||Object.create(null)).CollisionUtil=function(){},EHDI.CollisionUtil.rectToRect=function(t,e){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.height+t.y>e.y},EHDI.CollisionUtil.circleToRect=function(t,e){var i=Math.abs(t.x-e.x-.5*e.width),n=Math.abs(t.y-e.y-.5*e.height);if(i>.5*e.width+t.r)return!1;if(n>.5*e.height+t.r)return!1;if(i<=.5*e.width)return!0;if(n<=.5*e.height)return!0;var r=i-.5*e.width,s=n-.5*e.height;return r*r+s*s<=t.r*t.r},EHDI.CollisionUtil.circleToCircle=function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)<t.r+e.r},(EHDI=EHDI||Object.create(null)).NumberUtil=EHDI.NumberUtil||Object.create(null),EHDI.NumberUtil.GOLDEN_RATIO=1.61803398875,EHDI.NumberUtil.degreeToRadian=function(t){return t*(Math.PI/180)},EHDI.NumberUtil.radianToDegree=function(t){return t*(180/Math.PI)},EHDI.NumberUtil.lerp=function(t,e,i){return(1-t)*e+t*i},EHDI.NumberUtil.normalize=function(t,e,i){return(t-e)/(i-e)},EHDI.NumberUtil.map=function(t,e,i,n,r,s){if(s=void 0!==s&&s){if(t<e)return n;if(t>i)return r}return EHDI.NumberUtil.lerp(EHDI.NumberUtil.normalize(t,e,i),n,r)},EHDI.NumberUtil.clamp=function(t,e,i){return Math.max(e,Math.min(i,t))},EHDI.NumberUtil.randomRange=function(t,e){return t>e?Math.random()*(t-e)+e:Math.random()*(e-t)+t},EHDI.NumberUtil.getDigit=function(t){return t.toString().length},EHDI.NumberUtil.shuffleArray=function(t){for(var e,i,n,r,s,a=t.length-1;a>0;a--){var o=(s=a+1,Math.floor(Math.random()*s));n=a,void 0,r=(e=t)[i=o],e[i]=e[n],e[n]=r}},(EHDI=EHDI||Object.create(null)).StressTest=function(t){var e=t,i=new PIXI.Container,n=document.createElement("canvas");n.width=n.height="500px",document.body.appendChild(n);var r={view:n,antialiasing:!1,transparent:!0,resolution:window.devicePixelRatio,autoResize:!0},s=new EHDI.aka.AutoDetectRenderer(500,500,r);s.view.style.position="absolute";var a=document.createElement("div");a.style.width=a.style.height="500px",a.style.background="#FFFFFF",document.body.appendChild(a),a.style.position="absolute",a.style.zIndex=2;var o,l,h,u=this,c=[],d=[];return this.update=function(){for(var t=Date.now(),n=0;n<d.length;n++)d[n].rotation+=.3;s.render(i);var r=t-l;if(r*=.6,c.push(r),l=t,t-o<1500)window.requestAnimationFrame(function(){u.update()});else{document.body.removeChild(s.view),document.body.removeChild(a);var h=c.length/1.5;EHDI.BrowserInfo=EHDI.BrowserInfo||Object.create(null),EHDI.BrowserInfo.isLowEndDevice=h<30,e&&e()}},this.begin=function(){h=EHDI.displays.TextureRectangle(16777215,52,74);for(var t=0;t<300;t++){var e=new PIXI.Sprite(h);e.anchor.set(.5,.5),i.addChild(e),e.position.set(50,400*+Math.random(),50+400*Math.random()),d.push(e)}o=Date.now(),l=Date.now(),s.render(i),u.update()},u.begin(),u},function(t){var e,i=window,n={},r={16:!1,18:!1,17:!1,91:!1},s="all",a={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},o={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},l=function(t){return o[t]||t.toUpperCase().charCodeAt(0)},h=[];for(e=1;e<20;e++)o["f"+e]=111+e;function u(t,e){for(var i=t.length;i--;)if(t[i]===e)return i;return-1}function c(t,e){if(t.length!=e.length)return!1;for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}var d={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function f(t){var i,s,o,l,c,f;if([32,37,38,39,40].indexOf(t.keyCode)>-1&&t.preventDefault(),i=t.keyCode,-1==u(h,i)&&h.push(i),93!=i&&224!=i||(i=91),i in r)for(o in r[i]=!0,a)a[o]==i&&(m[o]=!0);else if(function(t){for(e in r)r[e]=t[d[e]]}(t),m.filter.call(this,t)&&i in n)for(f=g(),l=0;l<n[i].length;l++)if((s=n[i][l]).scope==f||"all"==s.scope){for(o in c=s.mods.length>0,r)(!r[o]&&u(s.mods,+o)>-1||r[o]&&-1==u(s.mods,+o))&&(c=!1);(0!=s.mods.length||r[16]||r[18]||r[17]||r[91])&&!c||!1===s.method(t,s)&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0))}}function p(t){var e,i=t.keyCode,n=u(h,i);if(n>=0&&h.splice(n,1),93!=i&&224!=i||(i=91),i in r)for(e in r[i]=!1,a)a[e]==i&&(m[e]=!1)}function _(){for(e in r)r[e]=!1;for(e in a)m[e]=!1}function m(t,e,i){var r,s;r=v(t),void 0===i&&(i=e,e="all");for(var a=0;a<r.length;a++)s=[],(t=r[a].split("+")).length>1&&(s=y(t),t=[t[t.length-1]]),t=t[0],(t=l(t))in n||(n[t]=[]),n[t].push({shortcut:r[a],scope:e,method:i,key:r[a],mods:s})}for(e in a)m[e]=!1;function g(){return s||"all"}function v(t){var e;return""==(e=(t=t.replace(/\s/g,"")).split(","))[e.length-1]&&(e[e.length-2]+=","),e}function y(t){for(var e=t.slice(0,t.length-1),i=0;i<e.length;i++)e[i]=a[e[i]];return e}function b(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,function(){n(i.event)})}b(i,"keydown",function(t){f(t)}),b(i,"keyup",p),b(document,"keydown",function(t){f(t)}),b(document,"keyup",p),b(i,"focus",_),b(document,"focus",_);var E=t.key;t.key=m,t.key.setScope=function(t){s=t||"all"},t.key.getScope=g,t.key.deleteScope=function(t){var e,i,r;for(e in n)for(i=n[e],r=0;r<i.length;)i[r].scope===t?i.splice(r,1):r++},t.key.filter=function(t){var e=(t.target||t.srcElement).tagName;return!("INPUT"==e||"SELECT"==e||"TEXTAREA"==e)},t.key.isPressed=function(t){return"string"==typeof t&&(t=l(t)),-1!=u(h,t)},t.key.getPressedKeyCodes=function(){return h.slice(0)},t.key.noConflict=function(){var e=t.key;return t.key=E,e},t.key.unbind=function(t,e){var i,r,s,a,o,h=[];for(i=v(t),a=0;a<i.length;a++){if((r=i[a].split("+")).length>1&&(h=y(r)),t=r[r.length-1],t=l(t),void 0===e&&(e=g()),!n[t])return;for(s=0;s<n[t].length;s++)(o=n[t][s]).scope===e&&c(o.mods,h)&&(n[t][s]={})}},"undefined"!=typeof module&&(module.exports=m);var T=function(){i.focus(),setTimeout(T,1e3)};T()}(this),(EHDI=EHDI||Object.create(null)).loadScene=function(){var t=EHDI.Assets.fetch("locale_"+EHDI.GAME.localeID);EHDI.localization.LocalizationXMLReader(t);var e=new EHDI.popup.RotatePopUp;EHDI.GAME.sceneManager.addNotification(e),EHDI.GAME.scaleManager.setResizeCallback(function(){EHDI.GAME.sceneManager.screenResize(),EHDI.BrowserInfo.isMobileDevice&&(EHDI.screen.viewWidth<EHDI.screen.viewHeight?(e.visible=!0,EHDI.GAME.gameScene&&EHDI.GAME.gameScene.pauseManager&&!EHDI.GAME.gameScene.pauseManager.isEndGame?EHDI.GAME.gameScene.pauseManager.pauseGame():EHDI.GAME.bgm&&EHDI.GAME.soundManager.pauseBGM()):(e.visible=!1,EHDI.GAME.bgm?EHDI.GAME.soundManager.resumeBGM():EHDI.GAME.bgm=EHDI.GAME.soundManager.playBGM("bunnicula_bgm",.3)))});var i=new PIXI.Container,n=new EHDI.aka.PixiText("hello world",{fontFamily:"lakkireddy"});function r(){EHDI.GAME.sceneManager.changeScene(new EHDI.scene.TitleScene,{alpha:{from:0,to:1},duration:.5})}function s(){p.width=_*EHDI.LoadManager.getProgress()/100}i.addChild(n),EHDI.GAME.JSONManager=EHDI.JSONManager();var a=function(){EHDI.GAME.soundManager.playSFX("button_sfx_01"),EHDI.GAME.sceneManager.changeScene(new EHDI.scene.TitleScene,{x:{from:-EHDI.screen.stageWidth,to:0},duration:.5},!0)};function o(){f.visible=!1;var t=new EHDI.displays.Button(EHDI.Assets.images.btn_play,null,null,null);t.setOnClickFunction(a),t.position.set(0,.3*EHDI.screen.stageHeight),this.addChild(t)}var l=new PIXI.Sprite(EHDI.displays.TextureRectangle(8925064,EHDI.screen.stageWidth,EHDI.screen.stageHeight));i.addChild(l),l.anchor.set(.5,.5);for(var h=[],u=1;u<=10;u++){var c="10";u<10&&(c="0"+u),h.push(EHDI.Assets.images["loader_animation00"+c])}var d=new PIXI.extras.AnimatedSprite(h);d.loop=!1,d.animationSpeed=.1,d.anchor.set(.4175,.695),i.addChild(d);var f=new EHDI.aka.Sprite(EHDI.Assets.images.bar_bg);f.anchor.x=.5,f.anchor.y=.5,f.position.y=.25*EHDI.screen.stageHeight,i.addChild(f);var p=new PIXI.extras.TilingSprite(EHDI.Assets.images.bar_fill,490,f.height-1);f.addChild(p),p.x=.5*-f.width,p.y=.5*-f.height;var _=p.width,m=new EHDI.aka.Sprite(EHDI.Assets.images.frame);m.anchor.set(.5,.5),f.addChild(m),EHDI.LoadManager.queueAssets(EHDI.assetsToLoad),EHDI.LoadManager.queueStrings(EHDI.gameStringsToLoad),EHDI.LoadManager.start(function(){p.width=_*EHDI.LoadManager.getProgress()/100,EHDI.GAME.updateManager.removeFrameListener(s),d.gotoAndPlay(0),EHDI.BrowserInfo.isIOS?d.onComplete=o:d.onComplete=r}),EHDI.GAME.updateManager.addFrameListener(s),i.screenDidAppear=function(){EHDI.GAME.sceneManager.screenResize()},i.screenDidDisappear=function(){f.destroy(!0)},EHDI.GAME.sceneManager.changeScene(i)},(EHDI=EHDI||Object.create(null)).displays=EHDI.displays||Object.create(null),EHDI.displays.TextureRectangle=function(t,e,i){var n=new PIXI.Graphics;n._sprite=null,n._width=e,n._height=i,n._color=t;var r,s,a;r=n._width,s=n._height,a=n._color,n.clear(),n.beginFill(a),n.drawRect(0,0,r,s),n.endFill();var o=n.generateCanvasTexture(1);return n.destroy(),o},EHDI.displays.TextureCircle=function(t,e){var i=new PIXI.Graphics;i._sprite=null,i._radius=e,i._color=t;var n,r;return n=i._radius,r=i._color,i.clear(),i.beginFill(r),i.drawCircle(n,n,n),i.endFill(),i.generateCanvasTexture(1)},(EHDI=EHDI||Object.create(null)).component=EHDI.component||Object.create(null),EHDI.component.BackgroundScrollManager=function(){EHDI.aka.Container.call(this);var t=this,e=0;this.scroll=function(i){var n=i-e;if(0!==n){for(var r=0;r<t.children.length;r++){var s=this.children[r];s.position.y+=n,s.visible&&t.position.y+s.position.y+.5*s.height<=.6*-EHDI.screen.stageHeight||t.position.y+s.position.y-.5*s.height>=.6*EHDI.screen.stageWidth?s.visible=!1:!s.visible&&t.position.y+s.position.y+.5*s.height>=.6*-EHDI.screen.stageHeight&&t.position.y+s.position.y-.5*s.height<=.6*EHDI.screen.stageHeight&&(s.visible=!0)}e=i}}},EHDI.component.BackgroundScrollManager.prototype=Object.create(EHDI.aka.Container.prototype),(EHDI=EHDI||Object.create(null)).component=EHDI.component||Object.create(null),EHDI.component.Bunnicula=function(){EHDI.aka.Container.call(this);var t=this,e=EHDI.GAME.dbFactory.buildArmature("bunnicula"),i=e.getDisplay();t.addChild(i),t.functionToCall=null,dragonBones.WorldClock.clock.add(e),this.kitchenReset=function(){e.animation.gotoAndPlay("kitchen_reset",-1,-1,1)},this.kitchenIdle=function(){e.animation.gotoAndPlay("kitchen_idle",-1,-1,0)},this.kitchenPickUp=function(){e.animation.gotoAndPlay("kitchen_pickup",-1,-1,1)},this.kitchenPickUpPotion=function(){e.animation.gotoAndPlay("kitchen_pickup_2",-1,-1,1)};this.kitchenAnticipation=function(){e.animation.gotoAndPlay("kitchen_anticipation_intro",-1,-1,1)},this.kitchenAnticipationEnd=function(){e.animation.gotoAndPlay("kitchen_anticipation_end",-1,-1,1)};e.addEventListener(dragonBones.AnimationEvent.LOOP_COMPLETE,function(t){"kitchen_idle"===t.animationName&&Math.random()<=.25&&e.animation.gotoAndPlay("kitchen_idle_2",-1,-1,1)}),e.addEventListener(dragonBones.FrameEvent.ANIMATION_FRAME_EVENT,function(i){"glowstart"===i.frameLabel?t.functionToCall():"altend"===i.frameLabel&&Math.random()<=.25&&e.animation.gotoAndPlay("kitchen_pickup_altend",-1,-1,1)}),this.kitchenIdle()},EHDI.component.Bunnicula.prototype=Object.create(EHDI.aka.Container.prototype),(EHDI=EHDI||Object.create(null)).component=EHDI.component||Object.crreate(null),EHDI.component.DiamondParticle=function(t){EHDI.aka.Sprite.call(this,EHDI.Assets.images.shine_diamond);var e=this,i=new TimelineMax({repeat:-1,yoyo:!0});e.anchor.set(.5),e.scale.set(.8),e.alpha=0,this.dispose=function(){i.kill(),i.clear()};i.add(function(){var i=EHDI.NumberUtil.randomRange(-.375,.375),n=EHDI.NumberUtil.randomRange(-1,0);e.position.set(t.width*i,t.height*n)}),i.to(e.scale,.5,{x:1,y:1},"+="+Math.random(.2,.4)),i.to(e,.5,{alpha:1},"-=0.5")},EHDI.component.DiamondParticle.prototype=Object.create(EHDI.aka.Sprite.prototype),EHDI.component.DiamondParticle.prototype.destroy=function(){this.dispose(),EHDI.aka.Sprite.prototype.destroy.apply(this,arguments)},(EHDI=EHDI||Object.create(null)).component=EHDI.component||Object.create(null),EHDI.component.HandPointer=function(){var t="tutorial_hand";EHDI.BrowserInfo.isMobileDevice||(t="tutorial_pointer"),EHDI.aka.Sprite.call(this,EHDI.Assets.images[t]),this.anchor.set(.1,.1);var e=new TimelineMax({repeat:-1,yoyo:!0});EHDI.GAME.gameScene.pauseManager.addTimelineInterrupt(e),this.reposition=function(t,i){this.visible=!0,e.kill(),e.clear(),this.position.set(t,i),e.to(this,.3,{x:this.x-25,y:this.y-15,ease:Power0.easeNone})},this.dispose=function(){EHDI.GAME.gameScene.pauseManager.removeTimelineInterrupt(e),e.kill(),e.clear()}},EHDI.component.HandPointer.prototype=Object.create(EHDI.aka.Sprite.prototype),EHDI.component.HandPointer.prototype.destroy=function(){this.dispose(),EHDI.aka.Sprite.prototype.destroy.call(this,arguments)},(EHDI=EHDI||Object.create(null)).component=EHDI.component||Object.create(null),EHDI.component.PauseManager=function(){this.isPaused=!1;var t=this,e=[],i=!0;this.isReadyOpen=!1,this.isEndGame=!1,this.pauseGame=function(){if(i&&(i=!1,EHDI.GAME.soundManager.autoResumeToggle(!1)),!t.isPaused){t.isPaused=!0;for(var n=0;n<e.length;n++)e[n].paused(!0);EHDI.GAME.sceneManager.pushPopUp(new EHDI.popup.PausePopUp,{y:new EHDI.scene.TransitionParameter(-EHDI.screen.stageHeight,0),duration:.25}),EHDI.GAME.soundManager.pauseBGM(),EHDI.GAME.soundManager.pauseAllSFX()}};var n=function(){(window.document.webkitHidden||window.document.hidden)&&t.pauseGame()};window.addEventListener("blur",this.pauseGame),window.addEventListener("pagehide",this.pauseGame),window.addEventListener("webkitvisibilitychange",n),window.addEventListener("visibilitychange",n),this.resumeGame=function(){if(EHDI.GAME.soundManager.resumeBGM(),!t.isReadyOpen){t.isPaused=!1;for(var i=0;i<e.length;i++)e[i].paused(!1);EHDI.GAME.soundManager.resumeAllSFX()}},this.readyPopUp=function(){t.isPaused=!0,t.isReadyOpen=!0;for(var i=0;i<e.length;i++)e[i].paused(!0);EHDI.GAME.sceneManager.pushPopUp(new EHDI.popup.ChecklistPopUp,{alpha:new EHDI.scene.TransitionParameter(0,1),duration:.25}),EHDI.GAME.soundManager.pauseAllSFX()},this.endGame=function(){window.removeEventListener("blur",this.pauseGame),window.removeEventListener("pagehide",this.pauseGame),window.removeEventListener("webkitvisibilitychange",n),window.removeEventListener("visibilitychange",n),EHDI.GAME.soundManager.autoResumeToggle(!0),t.isEndGame=!0},this.addTimelineInterrupt=function(t){e.push(t)},this.removeTimelineInterrupt=function(t){var i=e.indexOf(t);i>-1&&e.splice(i,1)}},EHDI.component.PauseManager.prototype=Object.create(null),(EHDI=EHDI||Object.create(null)).component=EHDI.component||Object.create(null),EHDI.component.PeekingCharacter=function(t){EHDI.aka.Container.call(this);var e=0,i=EHDI.NumberUtil.randomRange(1,5),n=this,r=EHDI.GAME.dbFactory.buildArmature(t),s=r.getDisplay(),a=(new TimelineMax,!1),o=[.15,.3];this.curPosition=0,n.addChild(s),r.animation.gotoAndPlay("kitchen_hidden",-1,-1,0),n.functionToCall=null,dragonBones.WorldClock.clock.add(r);var l=function(s){if(!EHDI.GAME.gameScene.pauseManager.isPaused&&!a&&i<=(e+=s/1e3)&&(e=0,i=EHDI.NumberUtil.randomRange(1,5),Math.random()<=.15)){var l=EHDI.GAME.gameScene.harold;"harold"===t&&(l=EHDI.GAME.gameScene.chester);var h=Math.floor(EHDI.NumberUtil.randomRange(0,2));h===l.curPosition&&l.isPeeking()||(n.curPosition=h,n.position.x=EHDI.screen.stageWidth*o[h],EHDI.GAME.soundManager.playSFX("pet_slide_in"),r.animation.gotoAndPlay("kitchen_peek",-1,-1,1),a=!0)}},h=function(t){"kitchen_peek"===t.animationName&&(a=!1)},u=function(t){"going_down"===t.frameLabel&&EHDI.GAME.soundManager.playSFX("pet_slide_out")};this.isPeeking=function(){return a},this.dispose=function(){r.removeEventListener(dragonBones.AnimationEvent.COMPLETE,h),r.removeEventListener(dragonBones.FrameEvent.ANIMATION_FRAME_EVENT,u),EHDI.GAME.updateManager.removeFrameListener(l)},r.addEventListener(dragonBones.AnimationEvent.COMPLETE,h),r.addEventListener(dragonBones.FrameEvent.ANIMATION_FRAME_EVENT,u),EHDI.GAME.updateManager.addFrameListener(l)},EHDI.component.PeekingCharacter.prototype=Object.create(EHDI.aka.Container.prototype),EHDI.component.PeekingCharacter.prototype.destroy=function(){this.dispose(),EHDI.aka.Container.prototype.destroy.apply(this,arguments)},(EHDI=EHDI||Object.create(null)).component=EHDI.component||Object.create(null),EHDI.component.PotManager=function(t){EHDI.aka.Container.call(this);var e=this,n=t,r={"000010":"a_touch_of_yuck",111111:"everything_in_it",600000:"just_beet_it","004000":"four_carrot_soup","060000":"purplicious","000600":"not_quite_spaghetti","004002":"carrot_minion","040100":"purple_propeller","000042":"jiggly_ghost",300300:"ketchup_surprise","011112":"about_face",100302:"wet_salsa","001102":"mrs_carrot","010002":"mister_eggplant","001010":"sewer_bunny_trap",110100:"infrared_spectrum","000330":"stop_and_go","003011":"carrot_cyclops",200031:"monster_stew","010010":"frankenstein_soup",100101:"i_beet_you","010102":"mrs_eggplant","001002":"mister_carrot","001040":"wet_salad"},s=["111111","600000","004000","060000","000010","000600","004002","040100","000042","300300","011112","100302","001102","010002","001010","110100","000330","003011","200031","010010","100101","010102","001002","001040"],a=0,o=0,l=0,h=0,u=0,c=0,d=new TimelineMax,f=new TimelineMax,p="",_=[],m=new EHDI.aka.Container,g=!1,v=null;this.isPotion=!1,EHDI.GAME.gameScene.pauseManager.addTimelineInterrupt(d),EHDI.GAME.gameScene.pauseManager.addTimelineInterrupt(f),this.allowInput=!0;var y=EHDI.GAME.dbFactory.buildArmature("pot");y.animation.gotoAndPlay("idle_front",-1,-1,0),dragonBones.WorldClock.clock.add(y);var b=EHDI.GAME.dbFactory.buildArmature("pot");b.animation.gotoAndPlay("idle_back",-1,-1,0),dragonBones.WorldClock.clock.add(b);y.addEventListener(dragonBones.AnimationEvent.COMPLETE,function(t){if("shake_front"===t.animationName)S(),b.animation.gotoAndPlay("shake_end_back",-1,-1,1),y.animation.gotoAndPlay("shake_end_front",-1,-1,1),EHDI.GAME.soundManager.stopSFX(v);else if("shake_end_front"===t.animationName)if(d.kill(),d.clear(),r[p])(P=EHDI.GAME.storageManager.getLocalInfo(EHDI.GAME.id))[p]!==p&&(P.unlockCount=P.unlockCount+1,P[p]=p),EHDI.GAME.storageManager.setLocalInfo(EHDI.GAME.id,P),d.addCallback(I,"+=0",["fangtastic",r[p],null,g,p,p]),d.play();else{if(T=D(p)){if((P=EHDI.GAME.storageManager.getLocalInfo(EHDI.GAME.id))[s[T]]){if(w(P[s[T]])>w(p)&&P[s[T]]!==s[T])P[s[T]]=p;else if(x(p,s[T])>1&&P[s[T]]!==s[T]){for(var i=x(C=p,s[T])-1,n=0;x(C,s[T])>i&&n<C.length;){C=p;for(var f="",_=0;_<C.length;_++)f+=n===_?parseInt(C[_])+1:parseInt(C[_]);C=f,n++}P[s[T]]=C}}else P[s[T]]=p;EHDI.GAME.storageManager.setLocalInfo(EHDI.GAME.id,P),EHDI.GAME.gameScene.pauseManager.endGame(),d.addCallback(I,"+=0",["almost",r[s[T]],A(s[T]),g,p,s[T]])}else d.addCallback(I,"+=0",["nope"]);d.play()}else if("close_front"===t.animationName){EHDI.GAME.soundManager.playSFX("bunnicula_dish_getting_ready"),(M=EHDI.GAME.dbFactory.buildArmature("pot_steam")).animation.gotoAndPlay("steam",-1,-1,0);var E=M.getDisplay();m.addChild(E),dragonBones.WorldClock.clock.add(M),b.animation.gotoAndPlay("shake_back",-1,-1,5),y.animation.gotoAndPlay("shake_front",-1,-1,5),EHDI.GAME.gameScene.bunnicula.kitchenAnticipation(),(v=EHDI.GAME.soundManager.playSFX("boiling_pot_loop")).loop=!0}else if("shake_gradient_front"===t.animationName)S(),b.animation.gotoAndPlay("shake_end_gradient_back",-1,-1,1),y.animation.gotoAndPlay("shake_end_gradient_front",-1,-1,1),EHDI.GAME.soundManager.stopSFX(v);else if("shake_end_gradient_front"===t.animationName)if(d.kill(),d.clear(),EHDI.GAME.gameScene.pauseManager.endGame(),r[p])(P=EHDI.GAME.storageManager.getLocalInfo(EHDI.GAME.id))[p]!==p&&(P.unlockCount=P.unlockCount+1,P[p]=p),EHDI.GAME.storageManager.setLocalInfo(EHDI.GAME.id,P),d.addCallback(I,"+=0",["fangtastic",r[p],null,g,p,p]),d.play();else{var T;if(T=D(p)){var P;if((P=EHDI.GAME.storageManager.getLocalInfo(EHDI.GAME.id))[s[T]]){if(w(P[s[T]])>w(p))P[s[T]]=p;else if(x(p,s[T])>1){var C;for(i=x(C=p,s[T])-1,n=0;x(C,s[T])>i&&n<C.length;){for(C=p,f="",_=0;_<C.length;_++)f+=n===_?parseInt(C[_])+1:parseInt(C[_]);C=f,n++}P[s[T]]=C}}else P[s[T]]=p;EHDI.GAME.storageManager.setLocalInfo(EHDI.GAME.id,P),EHDI.GAME.gameScene.pauseManager.endGame(),d.addCallback(I,"+=0",["almost",r[s[T]],A(s[T]),g,p,s[T]])}else d.addCallback(I,"+=0",["nope"]);d.play()}else if("close_gradient_front"===t.animationName){var M;EHDI.GAME.soundManager.playSFX("bunnicula_dish_getting_ready"),(M=EHDI.GAME.dbFactory.buildArmature("pot_steam")).animation.gotoAndPlay("steam",-1,-1,0),E=M.getDisplay(),m.addChild(E),dragonBones.WorldClock.clock.add(M),b.animation.gotoAndPlay("shake_gradient_back",-1,-1,5),y.animation.gotoAndPlay("shake_gradient_front",-1,-1,5),EHDI.GAME.gameScene.bunnicula.kitchenAnticipation(),(v=EHDI.GAME.soundManager.playSFX("boiling_pot_loop")).loop=!0}else"turn_front"===t.animationName&&a+o+l+h+u+c>=6&&e.closeLid()}),y.addEventListener(dragonBones.FrameEvent.ANIMATION_FRAME_EVENT,function(t){"reveal"===t.frameLabel&&EHDI.GAME.gameScene.bunnicula.kitchenAnticipationEnd(),"lid_hit"===t.frameLabel&&EHDI.GAME.soundManager.playSFX("pot_close")});var E=b.getDisplay();E.position.set(.24*-EHDI.screen.stageWidth,.325*EHDI.screen.stageHeight),E.zIndex=3,E.alpa=.5,n.addChild(E),E.addChild(m),m.position.y=.275*-EHDI.screen.stageHeight,m.position.x=.02*EHDI.screen.stageWidth;var T=y.getDisplay();T.position.set(.24*-EHDI.screen.stageWidth,.325*EHDI.screen.stageHeight),n.addChild(T),T.zIndex=10.2,E.interactive=!0;var x=function(t,e){for(var i=0,n=0;n<t.length;n++)i+=Math.abs(parseInt(t.charAt(n)-parseInt(e.charAt(n))));return i/2},w=function(t){for(var e=t.split(""),i=0,n=0;n<e.length;n++)i+=parseInt(e[n]);return i},D=function(t){for(var e,i,n=EHDI.GAME.storageManager.getLocalInfo(EHDI.GAME.id),r=0;r<s.length;r++){if(n[t]!==s[r])if((e=s[r],i=void 0,i=0,i+=Math.abs(a-parseInt(e.charAt(0))),i+=Math.abs(o-parseInt(e.charAt(1))),i+=Math.abs(l-parseInt(e.charAt(2))),i+=Math.abs(h-parseInt(e.charAt(3))),i+=Math.abs(u-parseInt(e.charAt(4))),(i+=Math.abs(c-parseInt(e.charAt(5))))/2)<=2&&w(t)===w(s[r]))return r}return null},S=function(){for(var t=0;t<_.length;t++)_[t].visible=!1},I=function(t,e,i,n,r,s){EHDI.GAME.sceneManager.changeScene(new EHDI.scene.PostGameScene(t,e,i,n,r,s),{alpha:{from:0,to:1},duration:.5},!0)},A=function(t){var e=t.split("");for(i=0;i<e.length;i++)e[i]=parseInt(e[i]);var n=Math.max.apply(Math,e),r=e.indexOf(n);return 0===r||3===r?"red":1===r?"purple":2===r?"orange":4===r||5===r?"green":void 0};this.closeLid=function(){e.allowInput&&(EHDI.GAME.gameScene.hand&&(EHDI.GAME.gameScene.hand.visible=!1),e.allowInput=!1,E.interactive=!1,d.add(function(){g?(b.animation.gotoAndPlay("close_gradient_back",-1,-1,1),y.animation.gotoAndPlay("close_gradient_front",-1,-1,1)):(b.animation.gotoAndPlay("close_back",-1,-1,1),y.animation.gotoAndPlay("close_front",-1,-1,1))}),d.play(),p=""+a+o+l+h+u+c)},E.touchstart=e.closeLid,E.mousedown=e.closeLid;var P=function(){e.allowInput=!0,EHDI.GAME.gameScene.nextStep&&EHDI.GAME.gameScene.nextStep()},C=function(t,i,r,s){EHDI.GAME.gameScene.hand&&(EHDI.GAME.gameScene.hand.visible=!1);var d=EHDI.GAME.dbFactory.buildArmature("ingredients");d.animation.gotoAndPlay(t+"_glowing",-1,-1,0),dragonBones.WorldClock.clock.add(d),EHDI.GAME.soundManager.playSFX("ingredient_pickup");var p=d.getDisplay();p.position.set(i,r),p.zIndex=s,n.addChild(p),_.push(p),EHDI.GAME.gameScene.updateLayerOrder();var m=E.position.x+EHDI.NumberUtil.randomRange(-.25,.25)*E.width,g=E.position.y-.259*EHDI.screen.stageHeight;f.from(p,.1,{alpha:0}),f.add(TweenMax.to(p,1.33,{bezier:{type:"cubic",values:[{x:i,y:r},{x:i-.025*EHDI.screen.stageWidth,y:r-.5*EHDI.screen.stageHeight},{x:m+.025*EHDI.screen.stageWidth,y:r-.4*EHDI.screen.stageHeight},{x:m,y:g}]},ease:Power0.easeNone})),f.add(function(){EHDI.GAME.soundManager.playSFX("place_ingredient"),d.animation.gotoAndPlay(t,-1,-1,0)}),f.add(P),a+o+l+h+u+c>=6&&f.add(e.closeLid)};this.addBeet=function(){a+o+l+h+u+c>=6||(a++,C("beet",.02*EHDI.screen.stageWidth,.15*EHDI.screen.stageHeight,5))},this.addEggplant=function(){a+o+l+h+u+c>=6||(o++,C("eggplant",.318*EHDI.screen.stageWidth,.315*EHDI.screen.stageHeight,8))},this.addCarrot=function(){a+o+l+h+u+c>=6||(l++,C("carrot",.162*EHDI.screen.stageWidth,.15*EHDI.screen.stageHeight,5))},this.addTomato=function(){a+o+l+h+u+c>=6||(h++,C("tomato",.18*EHDI.screen.stageWidth,.31*EHDI.screen.stageHeight,8))},this.addJelly=function(){a+o+l+h+u+c>=6||(u++,C("jelly",.028*EHDI.screen.stageWidth,.31*EHDI.screen.stageHeight,8))},this.addVeggieMix=function(){a+o+l+h+u+c>=6||(c++,function(t,i,r){EHDI.GAME.gameScene.hand&&(EHDI.GAME.gameScene.hand.visible=!1),e.isPotion=!0,EHDI.GAME.soundManager.playSFX("ingredient_pickup");var s=EHDI.GAME.dbFactory.buildArmature("ingredients");s.animation.gotoAndPlay("potion_glowing",-1,-1,0),dragonBones.WorldClock.clock.add(s);var d=s.getDisplay();d.position.set(t,i),d.zIndex=r,n.addChild(d),_.push(d),EHDI.GAME.gameScene.updateLayerOrder();var p=E.position.x+EHDI.NumberUtil.randomRange(.1,.25)*E.width,m=E.position.y-1.25*E.height-.2*EHDI.screen.stageHeight;f.from(d,.1,{alpha:0}),f.add(TweenMax.to(d,1.33,{bezier:{type:"cubic",values:[{x:t,y:i},{x:t-.025*EHDI.screen.stageWidth,y:i-.5*EHDI.screen.stageHeight},{x:p+.025*EHDI.screen.stageWidth,y:i-.4*EHDI.screen.stageHeight},{x:p,y:m}]},ease:Power0.easeNone})),f.add(function(){s.animation.gotoAndPlay("potion_pour",-1,-1,1)});var v=function(t){"potionfade"!==t.frameLabel||g?(EHDI.GAME.soundManager.playSFX("place_ingredient"),P(),a+o+l+h+u+c>=6&&e.closeLid()):(EHDI.GAME.soundManager.playSFX("place_ingredient"),y.animation.gotoAndPlay("turn_front",-1,-1,1),b.animation.gotoAndPlay("turn_back",-1,-1,1),g=!0,s.removeEventListener(dragonBones.FrameEvent.ANIMATION_FRAME_EVENT,v),P())};s.addEventListener(dragonBones.FrameEvent.ANIMATION_FRAME_EVENT,v)}(.295*EHDI.screen.stageWidth,.12*EHDI.screen.stageHeight,5))},this.dispose=function(){EHDI.GAME.gameScene.pauseManager.removeTimelineInterrupt(d),EHDI.GAME.gameScene.pauseManager.removeTimelineInterrupt(f),delete this.allowInput,d.kill(),d=null,f.kill(),f=null},this.disablePot=function(){E.interactive=!1},this.enablePot=function(){E.interactive=!0},this.reset=function(){if(!EHDI.GAME.gameScene.hand&&e.allowInput){e.allowInput=!1,EHDI.GAME.gameScene.bunnicula.kitchenReset(),g?(g=!1,b.animation.gotoAndPlay("turn_brown_back",-1,-1,1),y.animation.gotoAndPlay("turn_brown_front",-1,-1,1)):b.animation.gotoAndPlay("glow_reset",-1,-1,1),f.kill(),f.clear();for(var t=0;t<_.length;t++)f.to(_,1.1,{alpha:0},0);f.add(function(){for(var t=0;t<_.length;t++)_[t].visible=!1,_[t].destroy()});var i=.1;_.length<=0&&(i=1.1),f.add(function(){_=[],a=0,o=0,l=0,h=0,u=0,c=0,e.allowInput=!0},"+="+i)}}},EHDI.component.PotManager.prototype=Object.create(EHDI.aka.Container.prototype),EHDI.component.PotManager.prototype.destroy=function(){this.dispose(),EHDI.aka.Container.prototype.destroy.apply(this,arguments)},(EHDI=EHDI||Object.create(null)).component=EHDI.component||Object.crreate(null),EHDI.component.SparkleParticle=function(t,e){EHDI.aka.Sprite.call(this,EHDI.Assets.images["fx_sparkle_"+Math.floor(EHDI.NumberUtil.randomRange(1,2))]);var i=EHDI.NumberUtil.degreeToRadian(EHDI.NumberUtil.randomRange(0,360)),n=new TimelineMax({});this.anchor.set(.5),this.dispose=function(){n.kill(),n.clear()};var r=t*Math.cos(i),s=t*Math.sin(i);n.to(this,EHDI.NumberUtil.randomRange(.25,.75),{x:e.x+r,y:e.y+s,ease:Power0.easeNone}),n.to(this,.25,{alpha:0},"-=0.1"),n.add(this.destroy.bind(this))},EHDI.component.SparkleParticle.prototype=Object.create(EHDI.aka.Sprite.prototype),EHDI.component.SparkleParticle.prototype.destroy=function(){this.dispose(),EHDI.aka.Sprite.prototype.destroy.apply(this,arguments)},(EHDI=EHDI||Object.create(null)).popup=EHDI.popup||Object.create(null),EHDI.popup.ChecklistPopUp=function(){EHDI.aka.Container.call(this);var t,e,i,n=!1,r=!1,s=0,a=0,o=null,l=null,h=this,u=0,c=new TimelineMax,d=-1,f=!1,p=!1,_=[],m=!1,g={"000010":"a_touch_of_yuck",111111:"everything_in_it",600000:"just_beet_it","004000":"four_carrot_soup","060000":"purplicious","000600":"not_quite_spaghetti","004002":"carrot_minion","040100":"purple_propeller","000042":"jiggly_ghost",300300:"ketchup_surprise","011112":"about_face",100302:"wet_salsa","001102":"mrs_carrot","010002":"mister_eggplant","001010":"sewer_bunny_trap",110100:"infrared_spectrum","000330":"stop_and_go","003011":"carrot_cyclops",200031:"monster_stew","010010":"frankenstein_soup",100101:"i_beet_you","010102":"mrs_eggplant","001002":"mister_carrot","001040":"wet_salad"},v=["000010","111111","600000","004000","060000","000600","004002","040100","000042","300300","011112","100302","001102","001010","010002","110100","000330","003011","001040","010010","100101","010102","200031","001002"];this.scrollVelocity=0;var y=function(t){m||(n=!0,s=t.data.global.y/EHDI.GAME.scaleManager.getScale(),h.scrollVelocity=0,c.kill(),c.clear())},b=function(t){d>=0||(d=t.data.identifier,y(t))},E=function(t){m||(c.to(h,1,{scrollVelocity:0,ease:Power0.easeNone}),n=!1)},T=function(t){d===t.data.identifier&&(d=-1,E())},x=function(t){0!==h.scrollVelocity&&(n||m||(h.scrollVelocity<0&&a-h.scrollVelocity>u-EHDI.screen.stageHeight?h.scrollVelocity=u-EHDI.screen.stageHeight-a:h.scrollVelocity>0&&a-h.scrollVelocity<0&&(h.scrollVelocity=-a),a-=h.scrollVelocity,h.bgScrollManager.scroll(-a),(a-h.scrollVelocity>u-EHDI.screen.stageHeight||a-h.scrollVelocity<0)&&(c.kill(),c.clear(),h.scrollVelocity=0),e.position.y=a/(u-EHDI.screen.stageHeight)*(i.height-e.height)))},w=function(t){if(!m&&n&&!r){var o=t.data.global.y/EHDI.GAME.scaleManager.getScale()-s;a-o<u-EHDI.screen.stageHeight&&a-o>0?(a-=o,h.scrollVelocity=.8*o+.2*h.scrollVelocity):a-o>=u-EHDI.screen.stageHeight?(a=u-EHDI.screen.stageHeight,h.scrollVelocity=0):(a=0,h.scrollVelocity=0),h.bgScrollManager.scroll(-a),s=t.data.global.y/EHDI.GAME.scaleManager.getScale(),e.position.y=a/(u-EHDI.screen.stageHeight)*(i.height-e.height)}},D=function(t){d===t.data.identifier&&w(t)},S=function(){EHDI.GAME.updateManager.removeFrameListener(x),EHDI.GAME.updateManager.removeFrameListener(I),EHDI.GAME.soundManager.playSFX("button_sfx_01"),EHDI.GAME.gameScene.pauseManager.isReadyOpen=!1,EHDI.GAME.gameScene.pauseManager.resumeGame(),EHDI.GAME.sceneManager.popPopUp(null,!0)};this.popUpWillAppear=function(){console.log("checklist"),EHDI.GAME.soundManager.autoResumeToggle(!0),(o=new EHDI.aka.Sprite(EHDI.displays.TextureRectangle(0,EHDI.screen.stageWidth,EHDI.screen.stageHeight))).anchor.set(.5,.5),this.addChild(o),o.alpha=0,h.bgScrollManager=new EHDI.component.BackgroundScrollManager,this.addChild(h.bgScrollManager);for(var e=0;e<8;e++){var i="background_ref_";if(0===e)i+="top";else if(7===e)i+="bottom";else if(i+="middle",e%2==0)i+="_under";else{var n=Math.floor(EHDI.NumberUtil.randomRange(0,3));0===n?i+="_upper_bottle":1===n?i+="_upper_juice":2===n&&(i+="_upper_carrot")}var r=new EHDI.aka.Sprite(EHDI.Assets.images[i]);for(r.anchor.set(.5,.5),t?r.position.y=t.y+.5*t.height+.5*r.height-2:r.position.y+=.5*r.height,h.bgScrollManager.addChild(r),t=r,j=0;j<3;j++){var s=g[v[3*e+j]];EHDI.GAME.storageManager.getLocalInfo(EHDI.GAME.id)[v[3*e+j]]!==v[3*e+j]&&(s+="_shdw");var a=new EHDI.aka.Sprite(EHDI.Assets.images[s]);a.value=v[3*e+j],a.anchor.set(.5,1),r.addChild(a),_.push(a),0===e?a.position.set(.2*-EHDI.screen.stageWidth+j*EHDI.screen.stageWidth*.2,.08*EHDI.screen.stageHeight):a.position.set(.2*-EHDI.screen.stageWidth+j*EHDI.screen.stageWidth*.2,.1*-EHDI.screen.stageHeight),a.touchstart=function(t){t.target.isPointerDown=!0,y(t)},a.mousedown=function(t){t.data.target.isPointerDown=!0,y(t)},a.touchend=function(t){t.target.isPointerDown&&(E(),m=!0,EHDI.GAME.sceneManager.pushPopUp(new EHDI.popup.RecipePopUp(t.target.value,function(){m=!1}))),t.target.isPointerDown=!1},a.mouseup=function(t){t.data.target.isPointerDown&&(E(),m=!0,EHDI.GAME.soundManager.playSFX("recipe_select"),EHDI.GAME.sceneManager.pushPopUp(new EHDI.popup.RecipePopUp(t.data.target.value,function(){m=!1}))),t.data.target.isPointerDown=!1}}}h.bgScrollManager.position.y-=.5*EHDI.screen.stageHeight,u=h.bgScrollManager.height},this.popUpDidDisappear=function(){m=!1};var I=function(t){var n=100;f?n*=-1:p||f||(n=0),0!==(n*=t/1e3)&&(e.position.y+n>0&&e.position.y+n<i.height-e.height?e.position.y+=n:e.position.y+n>=i.height-e.height?e.position.y=i.height-e.height:e.position.y=0,a=e.position.y/(i.height-e.height)*(u-EHDI.screen.stageHeight),h.bgScrollManager.scroll(-a))},A=function(t){if(!m){t.preventDefault();var e=10*Math.max(-1,Math.min(1,t.wheelDelta||-t.detail));a-e<u-EHDI.screen.stageHeight&&a-e>0?(a-=e,h.scrollVelocity=.8*e+.2*h.scrollVelocity):a-e>=u-EHDI.screen.stageHeight?(a=u-EHDI.screen.stageHeight,h.scrollVelocity=0):(a=0,h.scrollVelocity=0),h.bgScrollManager.scroll(-a),c.kill(),c.clear(),c.to(h,1,{scrollVelocity:0,ease:Power0.easeNone})}};this.popUpDidAppear=function(){(l=new EHDI.displays.Button(EHDI.Assets.images.btn_back,null,null,null,.8)).setOnClickFunction(S),l.position.set(.425*-EHDI.screen.viewWidth,.375*-EHDI.screen.viewHeight),h.addChild(l),o.interactive=!0;var t=EHDI.GAME.sceneManager.getRenderer();o.mousedown=y,o.mouseup=E,o.mouseupoutside=E,o.touchstart=b,o.touchend=T,o.touchendoutside=T,t.plugins.interaction.on("mousemove",w),t.plugins.interaction.on("touchmove",D),EHDI.GAME.updateManager.addFrameListener(x),window.document.addEventListener("mousewheel",A),window.document.addEventListener("DOMMouseScroll",A);var s=new EHDI.aka.Sprite(EHDI.Assets.images.btn_up_scroll);s.anchor.set(.5),s.position.set(.425*EHDI.screen.viewWidth,.325*-EHDI.screen.viewHeight);var c=new EHDI.displays.Button(EHDI.Assets.images.btn_down_scroll,null,null,null,.8);c.position.set(.425*EHDI.screen.viewWidth,.325*EHDI.screen.viewHeight);var d=function(){f=!0,s.scale.set(.85)},m=function(){p=!0,c.scale.set(.85)},g=function(){f=!1,s.scale.set(1)},v=function(){p=!1,c.scale.set(1)};s.interactive=!0,s.hitarea=new PIXI.Rectangle(0,0,s.width,s.height),s.touchstart=d,s.mousedown=d,s.touchend=g,s.mouseup=g,s.mouseout=g,s.touchendoutside=g,c.interactive=!0,c.hitarea=new PIXI.Rectangle(0,0,c.width,c.height),c.touchstart=m,c.mousedown=m,c.touchend=v,c.mouseup=v,c.mouseout=v,c.touchendoutside=v,(i=new EHDI.aka.TilingSprite(EHDI.Assets.images.con_scroller,58,c.position.y-s.position.y-.25*s.height-.25*c.height)).position.set(.425*EHDI.screen.viewWidth-.5*i.width,s.y+.25*s.height),h.addChild(i),h.addChild(s),h.addChild(c),i.interactive=!0,(e=new EHDI.aka.Sprite(EHDI.Assets.images.scroller)).anchor.set(.5,0),e.position.set(.5*i.width,0),i.addChild(e);var P=0,C=-1,M=function(t){r=!0,P=t.data.global.y/EHDI.GAME.scaleManager.getScale()},O=function(){r=!1},L=function(t){C===t.data.identifier&&(O(),C=-1)},R=function(t){if(r&&!n){var s=t.data.global.y/EHDI.GAME.scaleManager.getScale()-P;e.position.y+s>0&&e.position.y+s<i.height-e.height?e.position.y+=s:e.position.y+s>=i.height-e.height?e.position.y=i.height-e.height:e.position.y=0,P=t.data.global.y/EHDI.GAME.scaleManager.getScale(),a=e.position.y/(i.height-e.height)*(u-EHDI.screen.stageHeight),h.bgScrollManager.scroll(-a)}};e.interactive=!0,e.touchstart=function(t){C=t.data.identifier,M(t)},e.mousedown=M,e.touchend=L,e.touchendoutside=L,e.mouseupoutside=O,e.mouseup=O,e.touchmove=function(t){C===t.data.identifier&&R(t)},e.mousemove=R,EHDI.GAME.updateManager.addFrameListener(I);for(var k=0;k<_.length;k++)_[k].interactive=!0},this.dispose=function(){for(var t=0;t<_.length;t++)_[t].interactive=!1;_=[],c.kill(),c=null;var e=EHDI.GAME.sceneManager.getRenderer();e.plugins.interaction.off("mousemove",w),e.plugins.interaction.off("touchmove",D),window.document.removeEventListener("mousewheel",A),window.document.removeEventListener("DOMMouseScroll",A)}},EHDI.popup.ChecklistPopUp.prototype=Object.create(EHDI.aka.Container.prototype),EHDI.popup.ChecklistPopUp.prototype.destroy=function(){this.dispose(),EHDI.aka.Container.prototype.destroy.apply(this,arguments)},(EHDI=EHDI||Object.create(null)).popup=EHDI.popup||Object.create(null),EHDI.popup.ConfirmPopUp=function(){var t,e;EHDI.aka.Container.call(this),this.popUpWillAppear=function(){(t=new EHDI.aka.Sprite(EHDI.displays.TextureRectangle(0,EHDI.screen.stageWidth,EHDI.screen.stageHeight))).anchor.set(.5,.5),t.alpha=0,this.addChild(t),t.interactive=!0,(e=new EHDI.aka.Sprite(EHDI.Assets.images.con_quit)).anchor.set(.5,.5),this.addChild(e),_quitLabel=new EHDI.aka.PixiText(EHDI.localization.strings["QUIT?"].content,{fontSize:EHDI.localization.strings["QUIT?"].size,align:"center",fill:"#FFFFFF",fontFamily:"lakkireddy"}),_quitLabel.anchor.set(.5,.5),_quitLabel.position.set(0,.3*-e.height),e.addChild(_quitLabel)},this.popUpDidAppear=function(){t.alpha=.5,_noButton=new EHDI.displays.Button(EHDI.Assets.images.btn_no,null,null,null,.8),_noButton.position.set(.2*-e.width,.1*e.height),e.addChild(_noButton),_noButton.setOnClickFunction(i),_yesButton=new EHDI.displays.Button(EHDI.Assets.images.btn_yes,null,null,null,.8),_yesButton.position.set(.2*e.width,.1*e.height),e.addChild(_yesButton),_yesButton.setOnClickFunction(n)};var i=function(){EHDI.GAME.soundManager.playSFX("button_sfx_01"),EHDI.GAME.sceneManager.popPopUp(null,!0)},n=function(){EHDI.GAME.soundManager.stopAllSFX(),EHDI.GAME.soundManager.playSFX("button_sfx_01"),EHDI.GAME.sceneManager.popAllPopUps(!0),EHDI.GAME.soundManager.resumeBGM(),EHDI.GAME.sceneManager.changeScene(new EHDI.scene.TitleScene,null,!0)}},EHDI.popup.ConfirmPopUp.prototype=Object.create(EHDI.aka.Container.prototype),(EHDI=EHDI||Object.create(null)).popup=EHDI.popup||Object.create(null),EHDI.popup.PausePopUp=function(){var t,e,i,n,r,s,a,o,l;EHDI.aka.Container.call(this);var h=[],u=["htp_1","htp_2"],c=0,d=new TimelineMax,f=!1,p=EHDI.interactions.Keyboard(32),_=EHDI.interactions.Keyboard(65),m=EHDI.interactions.Keyboard(76),g=function(){p.dispose(),_.dispose(),m.dispose(),EHDI.GAME.soundManager.playSFX("button_sfx_01"),f=!0,EHDI.GAME.sceneManager.popPopUp({y:new EHDI.scene.TransitionParameter(0,-EHDI.screen.stageHeight),duration:.2})};this.popUpWillAppear=function(){(t=new EHDI.aka.Sprite(EHDI.displays.TextureRectangle(0,EHDI.screen.stageWidth,EHDI.screen.stageHeight))).anchor.set(.5,.5),t.alpha=0,t.interactive=!0,this.addChild(t),(e=new EHDI.aka.Sprite(EHDI.Assets.images.con_pause)).anchor.set(.5,.5),e.position.y=.1*-EHDI.screen.stageHeight,this.addChild(e),(i=new EHDI.aka.PixiText(EHDI.localization.strings.PAUSED.content,{fontSize:EHDI.localization.strings.PAUSED.size,align:"center",fill:"#FFFFFF",fontFamily:"lakkireddy"})).anchor.set(.5,.5),i.position.set(0,.35*-e.height),e.addChild(i),(n=new EHDI.aka.Sprite(EHDI.Assets.images[u[0]])).anchor.set(.5,.5),n.position.y=.05*e.height,e.addChild(n),a=new EHDI.aka.Container,e.addChild(a);for(var r=0;r<u.length;r++){var s=new EHDI.aka.Sprite(EHDI.Assets.images[r===c?"htp_pg_1":"htp_pg_0"]);s.anchor.set(0,.5),s.position.set((s.width+.05*e.width)*r,0),a.addChild(s),h.push(s)}a.position.set(.5*-a.width,.39*e.height)},this.popUpDidAppear=function(){t.alpha=.5,(s=new EHDI.displays.Button(EHDI.Assets.images.arrow_checklist,null,null,null)).scale.set(-1,1),s.baseScale.x=-1,s.baseScale.y=1,s.customScale={x:-.9,y:.9},s.position.set(.375*-e.width,.05*e.height),e.addChild(s),s.setOnClickFunction(y),(r=new EHDI.displays.Button(EHDI.Assets.images.arrow_checklist,null,null,null,.9)).position.set(.375*e.width,.05*e.height),e.addChild(r),r.setOnClickFunction(v),(o=new EHDI.displays.Button(EHDI.Assets.images.btn_home_a,null,null,null,.8)).position.set(.2*-EHDI.screen.stageWidth,.375*EHDI.screen.viewHeight),o.setOnClickFunction(T),this.addChild(o);var i=EHDI.GAME.storageManager.getLocalInfo(EHDI.GAME.id);_soundButton=new EHDI.displays.ToggleButton(EHDI.Assets.images.btn_audio_1,EHDI.Assets.images.btn_audio_1,EHDI.Assets.images["btn_audio_0-2"],EHDI.Assets.images["btn_audio_0-2"],i.isMuted,.8),_soundButton.position.set(.2*EHDI.screen.stageWidth,.375*EHDI.screen.viewHeight),this.addChild(_soundButton),_soundButton.setOnClickFunction(x),_playButton=new EHDI.displays.Button(EHDI.Assets.images.btn_play,null,null,null,.8),_playButton.position.set(0,.375*EHDI.screen.viewHeight),this.addChild(_playButton),_playButton.setOnClickFunction(g),d.from(o.scale,.1,{x:0,y:0}),d.from(_soundButton.scale,.1,{x:0,y:0}),d.from(_playButton.scale,.1,{x:0,y:0}),d.from(s.scale,.1,{x:0,y:0}),d.from(r.scale,.1,{x:0,y:0},"-=0.1"),p.press=g,_.press=g,m.press=g};var v=function(){EHDI.GAME.soundManager.playSFX("button_sfx_01"),++c>=u.length&&(c=0),b()},y=function(){EHDI.GAME.soundManager.playSFX("button_sfx_01"),--c<0&&(c=u.length-1),b()},b=function(){d&&(d.kill(),d=new TimelineMax),l&&1!==l.alpha&&(l.alpha=1,n.destroy(),n=l,l=null);for(var t=0;t<h.length;t++)h[t].texture=EHDI.Assets.images[t===c?"htp_pg_1":"htp_pg_0"];(l=new EHDI.aka.Sprite(EHDI.Assets.images[u[c]])).anchor.set(.5,.5),l.position.y=.05*e.height,e.addChild(l),d.from(l,.5,{alpha:0}),d.add(E)},E=function(){n&&(n.destroy(),n=l,l=null)};this.popUpWillDisappear=function(){t.alpha=0},this.popUpDidDisappear=function(){p.dispose(),f&&EHDI.GAME.gameScene.pauseManager.resumeGame()};var T=function(){EHDI.GAME.soundManager.playSFX("button_sfx_01"),EHDI.GAME.sceneManager.pushPopUp(new EHDI.popup.ConfirmPopUp,{y:new EHDI.scene.TransitionParameter(-EHDI.screen.stageHeight,0),duration:.25})},x=function(t){EHDI.GAME.soundManager.setMute(t);var e=EHDI.GAME.storageManager.getLocalInfo(EHDI.GAME.id);e.isMuted=t,EHDI.GAME.storageManager.setLocalInfo(EHDI.GAME.id,e),EHDI.GAME.soundManager.playSFX("button_sfx_01")};this.onScreenResize=function(){o.position.set(.2*-EHDI.screen.stageWidth,.375*EHDI.screen.viewHeight),_soundButton.position.set(.2*EHDI.screen.stageWidth,.375*EHDI.screen.viewHeight),_playButton.position.set(0,.375*EHDI.screen.viewHeight)}},EHDI.popup.PausePopUp.prototype=Object.create(EHDI.aka.Container.prototype),(EHDI=EHDI||Object.create(null)).popup=EHDI.popup||Object.create(null),EHDI.popup.RecipePopUp=function(t,e){EHDI.aka.Container.call(this);var i,n,r=null,s=this,a=null,o=null,l=null,h=null,u=new EHDI.aka.Container,c=new EHDI.aka.Container,d=new EHDI.aka.Container,f=new TimelineMax,p=(new TimelineMax,{"000010":"a_touch_of_yuck",111111:"everything_in_it",600000:"just_beet_it","004000":"four_carrot_soup","060000":"purplicious","000600":"not_quite_spaghetti","004002":"carrot_minion","040100":"purple_propeller","000042":"jiggly_ghost",300300:"ketchup_surprise","011112":"about_face",100302:"wet_salsa","001102":"mrs_carrot","010002":"mister_eggplant","001010":"sewer_bunny_trap",110100:"infrared_spectrum","000330":"stop_and_go","003011":"carrot_cyclops",200031:"monster_stew","010010":"frankenstein_soup",100101:"i_beet_you","010102":"mrs_eggplant","001002":"mister_carrot","001040":"wet_salad"}),_=["000010","111111","600000","004000","060000","000600","004002","040100","000042","300300","011112","100302","001102","001010","010002","110100","000330","003011","001040","010010","100101","010102","200031","001002"],m=_.indexOf(t),g=function(t){s.recipeArmature&&s.recipeArmature.advanceTime(.001*t)};this.popUpWillAppear=function(){console.log("recipe");var t=new EHDI.aka.Sprite(EHDI.displays.TextureRectangle(0,1.1*EHDI.screen.stageWidth,1.1*EHDI.screen.stageHeight));t.anchor.set(.5,.5),this.addChild(t),t.interactive=!0,t.alpha=.5,(r=new EHDI.aka.Sprite(EHDI.Assets.images.window_checklist)).anchor.set(.5,.5),this.addChild(r),this.addChild(d)};var v=function(){d&&(d.destroy(),d=l,l=null)},y=function(t){var e=t||!1;f&&(f.kill(),f.clear()),l&&1!==l.alpha&&(l.alpha=1,d.destroy(),d=l,l=null),u=new EHDI.aka.Container,c=new EHDI.aka.Container,(l=new EHDI.aka.Container).addChild(u);var i=_[m].split("");if(EHDI.GAME.storageManager.getLocalInfo(EHDI.GAME.id)[_[m]]!==_[m]){(a=new EHDI.aka.Sprite(EHDI.Assets.images[p[_[m]]+"_shdw"])).anchor.set(.5,.5),a.position.set(0,.15*-r.height),a.scale.set(.85,.85),l.addChild(a);var n=function(){var t="",e=EHDI.GAME.storageManager.getLocalInfo(EHDI.GAME.id),i="000000";e[_[m]]&&(i=e[_[m]]);for(var n=0;n<_[m].length;n++)t+=Math.min(i.charAt(n),_[m].charAt(n));return t}().split(""),h=function(t){for(var e="",i=0;i<_[m].length;i++)e+=Math.abs(parseInt(_[m].charAt(i)-parseInt(t[i])));return e}(n).split(""),g=0,y=null;console.log(n),console.log(h);for(var b=0;b<i.length;b++)Math.abs(parseInt(n[b])-parseInt(i[b]));for(b=0;b<n.length;b++)for(var E=0;E<parseInt(n[b]);E++){var T="beet";switch(b){case 1:T="eggplant";break;case 2:T="carrot";break;case 3:T="tomato";break;case 4:T="jelly";break;case 5:T="potion"}if((x=new EHDI.aka.Sprite(EHDI.Assets.images[T+"_checklist"])).anchor.set(0,.5),y?x.position.set(y.position.x+y.width+28,.3*r.height):x.position.set(0,.3*r.height),u.addChild(x),g>0)(w=new EHDI.aka.Sprite(EHDI.Assets.images.add_checklist)).anchor.set(.5,.5),w.position.set(x.position.x-.5*w.width-5,.3*r.height),u.addChild(w),w;g++,y=x}y=null;for(b=0;b<h.length;b++)for(E=0;E<parseInt(h[b]);E++){T="beet";switch(b){case 1:T="eggplant";break;case 2:T="carrot";break;case 3:T="tomato";break;case 4:T="jelly";break;case 5:T="potion"}if((x=new EHDI.aka.Sprite(EHDI.Assets.images[T+"_checklist_shdw"])).anchor.set(0,.5),y?x.position.set(y.position.x+y.width+28,.3*r.height):x.position.set(18,.3*r.height),c.addChild(x),g>0)(w=new EHDI.aka.Sprite(EHDI.Assets.images.add_checklist)).anchor.set(.5,.5),w.position.set(x.position.x-.5*w.width-5,.3*r.height),c.addChild(w),w;g++,y=x}c.position.set(u.width,0),u.width>0&&(c.position.x+=10),u.addChild(c),u.position.set(.5*-u.width,5),u.width>0&&(u.position.x-=10)}else{s.recipeArmature=EHDI.GAME.dbFactory.buildArmature(p[_[m]]),s.recipeArmature.animation.gotoAndPlay("idle",-1,-1,0),(a=s.recipeArmature.getDisplay()).scale.set(.6,.6),l.addChild(a),a.position.set(0,.15*-r.height),"mrs_carrot"!==p[_[m]]&&"mrs_eggplant"!==p[_[m]]||(a.position.y+=.05*EHDI.screen.stageHeight);for(g=0,y=null,b=0;b<i.length;b++)for(E=0;E<parseInt(i[b]);E++){var x,w;T="beet";switch(b){case 1:T="eggplant";break;case 2:T="carrot";break;case 3:T="tomato";break;case 4:T="jelly";break;case 5:T="potion"}if((x=new EHDI.aka.Sprite(EHDI.Assets.images[T+"_checklist"])).anchor.set(0,.5),y?x.position.set(y.position.x+y.width+28,.3*r.height):x.position.set(0,.3*r.height),u.addChild(x),g>0)(w=new EHDI.aka.Sprite(EHDI.Assets.images.add_checklist)).anchor.set(.5,.5),w.position.set(x.position.x-.5*w.width-5,.3*r.height),u.addChild(w),w;g++,y=x}u.position.set(.5*-u.width,0)}(o=new EHDI.aka.PixiText(EHDI.localization.strings[p[_[m]]].content,{fontSize:EHDI.localization.strings[p[_[m]]].size,align:"center",fill:"#FFFFFF",fontFamily:"lakkireddy",padding:20})).anchor.set(.5,.5),l.addChild(o),o.position.set(0,.15*r.height),s.addChild(l),e?(v(),d.alpha=1):(f.to(d,.25,{alpha:0}),f.from(l,.25,{alpha:0}),f.add(v))},b=function(){EHDI.GAME.soundManager.playSFX("button_sfx_01"),++m>=_.length&&(m=0),y()},E=function(){EHDI.GAME.soundManager.playSFX("button_sfx_01"),--m<0&&(m=_.length-1),y()};this.popUpDidAppear=function(){(i=new EHDI.displays.Button(EHDI.Assets.images.arrow_checklist,null,null,null)).scale.set(-1,1),i.baseScale.x=-1,i.baseScale.y=1,i.customScale={x:-.9,y:.9},i.position.set(.375*-r.width,0),r.addChild(i),i.setOnClickFunction(E),(n=new EHDI.displays.Button(EHDI.Assets.images.arrow_checklist,null,null,null,.9)).position.set(.375*r.width,0),r.addChild(n),n.setOnClickFunction(b),y(!0);(h=new EHDI.displays.Button(EHDI.Assets.images.btn_back,null,null,null,.8)).setOnClickFunction(function(){EHDI.GAME.updateManager.removeFrameListener(g),e(),EHDI.GAME.soundManager.playSFX("button_sfx_01"),EHDI.GAME.sceneManager.popPopUp(null,!0)}),h.position.set(.425*-EHDI.screen.viewWidth,.375*-EHDI.screen.viewHeight),s.addChild(h)},this.dispose=function(){f.kill(),f=null,s.recipeArmature&&dragonBones.WorldClock.clock.remove(s.recipeArmature)}},EHDI.popup.RecipePopUp.prototype=Object.create(EHDI.aka.Container.prototype),EHDI.popup.RecipePopUp.prototype.destroy=function(){this.dispose(),EHDI.aka.Container.prototype.destroy.apply(this,arguments)},(EHDI=EHDI||Object.create(null)).popup=EHDI.popup||Object.create(null),EHDI.popup.RotatePopUp=function(){EHDI.aka.Container.call(this);var t=new EHDI.aka.Sprite(EHDI.Assets.images.icon_rotate);t.anchor.set(.5,.5),this.addChild(t);var e=new EHDI.aka.PixiText(EHDI.localization.strings.rotate.content,{fontSize:EHDI.localization.strings.rotate.size,align:"center",fill:"#FFFFFF",fontFamily:"lakkireddy",padding:.1*EHDI.localization.strings.rotate.size});e.anchor.set(.5,.5),e.position.set(0,.35*EHDI.screen.stageHeight),this.addChild(e),this.interactive=!0,this.visible=EHDI.screen.viewWidth<EHDI.screen.viewHeight},EHDI.popup.RotatePopUp.prototype=Object.create(EHDI.aka.Container.prototype),(EHDI=EHDI||Object.create(null)).popup=EHDI.popup||Object.create(null),EHDI.popup.UnlockNotif=function(){EHDI.aka.Container.call(this);var t=new TimelineMax,e=this,i=function(t){t.destroy({children:!0})};this.addUnlock=function(n,r,s,a){var o=new EHDI.aka.Sprite(EHDI.Assets.images.unlocking_window);o.anchor.set(.5,0),o.position.y=.5*-EHDI.screen.stageHeight-o.height,e.addChild(o);var l=new EHDI.aka.Sprite(EHDI.Assets.images[n]);l.anchor.set(.5,.5),l.position.set(.35*-o.width,.5*o.height),o.addChild(l);var h=new EHDI.aka.PixiText(EHDI.localization.strings[r].content,{fontSize:EHDI.localization.strings[r].size,align:"left",fill:"#FFFFFF",fontFamily:"shaglounge-webfont"});h.anchor.set(.5,.5),h.position.set(0,.4*o.height),o.addChild(h),t.to(o,.5,{y:.5*-EHDI.screen.viewHeight}),t.to(o,.5,{y:.5*-EHDI.screen.viewHeight-o.width},"+=2"),t.addCallback(i,"+=0",[o]);var u=new EHDI.aka.Sprite(EHDI.Assets.images.unlocking_window);u.anchor.set(.5,0),u.position.y=.5*-EHDI.screen.stageHeight-u.height,e.addChild(u);var c=new EHDI.aka.Sprite(EHDI.Assets.images[s]);c.anchor.set(.5,.5),c.position.set(.35*-o.width,.5*o.height),o.addChild(c);var d=new EHDI.aka.PixiText(EHDI.localization.strings[a].content,{fontSize:EHDI.localization.strings[a].size,align:"left",fill:"#FFFFFF",fontFamily:"shaglounge-webfont"});d.anchor.set(.5,.5),d.position.set(0,.4*o.height),o.addChild(d),t.to(u,.5,{y:.5*-EHDI.screen.viewHeight}),t.to(u,.5,{y:.5*-EHDI.screen.viewHeight-o.width},"-=0.5"),t.addCallback(i,"+=0",[o])}},EHDI.popup.UnlockNotif.prototype=Object.create(EHDI.aka.Container.prototype),(EHDI=EHDI||Object.create(null)).scene=EHDI.scene||Object.create(null),EHDI.scene.CompleteGameScene=function(){PIXI.Container.call(this);var t=null,e=this,i=new TimelineMax({repeat:-1}),n=new PIXI.particles.ParticleContainer(100,{scale:!0,position:!0,rotation:!0,uvs:!0,alpha:!0},100);_shineContainer=new PIXI.particles.ParticleContainer(100,{scale:!0,position:!0,rotation:!0,uvs:!0,alpha:!0},100);var r=function(t){dragonBones.WorldClock.clock.advanceTime(.001*t)};this.screenWillAppear=function(){(t=new EHDI.aka.Sprite(EHDI.Assets.images.bg_result_end)).anchor.set(.5,.5),e.addChild(t),e.shine=new EHDI.aka.Sprite(EHDI.Assets.images.fx_shine),e.shine.anchor.set(.5,.5),e.shine.position.set(0,.1*-EHDI.screen.stageHeight),e.addChild(e.shine),this.chester=EHDI.GAME.dbFactory.buildArmature("chester"),this.chester.animation.gotoAndPlay("result_complete_intro",-1,-1,1);var i=this.chester.getDisplay();i.position.set(.16*-EHDI.screen.stageWidth,0),e.addChild(i),this.harold=EHDI.GAME.dbFactory.buildArmature("harold"),this.harold.animation.gotoAndPlay("result_complete_intro",-1,-1,1);var r=this.harold.getDisplay();r.position.set(.175*EHDI.screen.stageWidth,0),e.addChild(r),e.addChild(n),this.bunnicula=EHDI.GAME.dbFactory.buildArmature("bunnicula"),this.bunnicula.animation.gotoAndPlay("result_complete_intro",-1,-1,1);var s=this.bunnicula.getDisplay();e.addChild(s);var a=new EHDI.aka.Sprite(EHDI.Assets.images.end_table);a.anchor.set(.5,1),a.position.set(0,.5*EHDI.screen.stageHeight),e.addChild(a),a.addChild(_shineContainer);for(var o=0;o<5;o++){var l=new EHDI.component.DiamondParticle(a);_shineContainer.addChild(l)}};this.screenDidAppear=function(){EHDI.GAME.soundManager.playSFX("all_ingredient_complete"),_homeButton=new EHDI.displays.Button(EHDI.Assets.images.button_home,null,null,null,.8),_homeButton.position.set(.15*-EHDI.screen.stageWidth,.375*EHDI.screen.viewHeight),this.addChild(_homeButton),_homeButton.setOnClickFunction(s),_replayButton=new EHDI.displays.Button(EHDI.Assets.images.btn_continue,null,null,null,.8),_replayButton.position.set(.15*EHDI.screen.stageWidth,.375*EHDI.screen.viewHeight),this.addChild(_replayButton),_replayButton.setOnClickFunction(a),dragonBones.WorldClock.clock.add(this.bunnicula),dragonBones.WorldClock.clock.add(this.chester),dragonBones.WorldClock.clock.add(this.harold),EHDI.GAME.updateManager.addFrameListener(r),i.add(TweenLite.to(e.shine,8,{directionalRotation:EHDI.NumberUtil.degreeToRadian(360)+"_cw",ease:Power0.easeNone}));for(var t=0;t<40;t++){var o=new EHDI.component.SparkleParticle(.4*EHDI.screen.stageHeight,{x:.1*-EHDI.screen.stageWidth,y:0});n.addChild(o),o.position.set(0,.1*-EHDI.screen.stageHeight)}},this.screenDidDisappear=function(){dragonBones.WorldClock.clock.remove(this.bunnicula),dragonBones.WorldClock.clock.remove(this.chester),dragonBones.WorldClock.clock.remove(this.harold),EHDI.GAME.updateManager.removeFrameListener(r)};var s=function(){i.kill(),EHDI.GAME.soundManager.playSFX("button_sfx_01"),EHDI.GAME.sceneManager.changeScene(new EHDI.scene.TitleScene,{alpha:{from:0,to:1},duration:.5},!0)},a=function(){i.kill(),EHDI.GAME.soundManager.playSFX("button_sfx_01"),EHDI.GAME.sceneManager.changeScene(new EHDI.scene.GameScene,{alpha:{from:0,to:1},duration:.5},!0)};this.onScreenResize=function(){_replayButton.position.set(.15*EHDI.screen.stageWidth,.375*EHDI.screen.viewHeight)}},EHDI.scene.CompleteGameScene.prototype=Object.create(EHDI.aka.Container.prototype),(EHDI=EHDI||Object.create(null)).scene=EHDI.scene||Object.create(null),EHDI.scene.GameScene=function(t){EHDI.aka.Container.call(this),EHDI.GAME.gameScene=this,this.gameLayer=new EHDI.aka.Container,this.guiLayer=new EHDI.aka.Container;var e,i,n,r=this,s=!0,a=!0;this.addChild(this.gameLayer),this.addChild(this.guiLayer),this.nextStep=null;var o=function(t){r.pauseManager.isPaused||dragonBones.WorldClock.clock.advanceTime(.001*t)},l=function(t){"going_down"===t.frameLabel&&EHDI.GAME.soundManager.playSFX("pet_slide_out")};this.screenWillAppear=function(){!function(){if(!EHDI.GAME.dbFactory){EHDI.GAME.dbFactory=new dragonBones.PixiFactory;var t=EHDI.Assets.images.bunnicula_tex.baseTexture.source,e=EHDI.Assets.cjAssets.getResult("bunnicula_tex");EHDI.GAME.dbFactory.addTextureAtlas(new dragonBones.TextureAtlas(t,e));var i=EHDI.Assets.cjAssets.getResult("bunnicula_ske");EHDI.GAME.dbFactory.addDragonBonesData(dragonBones.DataParser.parseDragonBonesData(i)),t=EHDI.Assets.images.objects_tex.baseTexture.source,e=EHDI.Assets.cjAssets.getResult("objects_tex"),EHDI.GAME.dbFactory.addTextureAtlas(new dragonBones.TextureAtlas(t,e)),i=EHDI.Assets.cjAssets.getResult("objects_ske"),EHDI.GAME.dbFactory.addDragonBonesData(dragonBones.DataParser.parseDragonBonesData(i)),t=EHDI.Assets.images.results_food_tex.baseTexture.source,e=EHDI.Assets.cjAssets.getResult("results_food_tex"),EHDI.GAME.dbFactory.addTextureAtlas(new dragonBones.TextureAtlas(t,e)),i=EHDI.Assets.cjAssets.getResult("results_food_ske"),EHDI.GAME.dbFactory.addDragonBonesData(dragonBones.DataParser.parseDragonBonesData(i))}}(),this.pauseManager=new EHDI.component.PauseManager,_bg=new EHDI.aka.Sprite(EHDI.Assets.images.background),_bg.anchor.set(.5,.5),_bg.zIndex=0,r.gameLayer.addChild(_bg),_windowArmature=EHDI.GAME.dbFactory.buildArmature("bg_fluffy"),_windowArmature.animation.gotoAndPlay("hidden",-1,-1,1);var t=_windowArmature.getDisplay();dragonBones.WorldClock.clock.add(_windowArmature),r.gameLayer.addChild(t),t.zIndex=.2,t.position.set(.225*-EHDI.screen.stageWidth,.3*-EHDI.screen.stageHeight),_windowArmature.addEventListener(dragonBones.FrameEvent.ANIMATION_FRAME_EVENT,l);var e=new EHDI.aka.Sprite(EHDI.Assets.images.window);e.anchor.set(.5,.5),e.position.set(.225*-EHDI.screen.stageWidth,.3*-EHDI.screen.stageHeight),e.zIndex=.21,r.gameLayer.addChild(e),e.interactive=!0;var i=function(){a&&(a=!1,EHDI.GAME.soundManager.playSFX("pet_slide_in"),_windowArmature.animation.gotoAndPlay("peek",-1,-1,1))};e.touchstart=i,e.mousedown=i,(u=new EHDI.aka.Sprite(EHDI.Assets.images.background_table)).anchor.set(0,1),u.position.set(.5*-EHDI.screen.stageWidth,.12*EHDI.screen.stageHeight),u.zIndex=.3,r.gameLayer.addChild(u);var n=new EHDI.displays.Button(EHDI.Assets.images.refrigerator,null,null,null,1.05);n.position.set(.1*EHDI.screen.stageWidth,.005*EHDI.screen.stageHeight-.5*n.height),n.zIndex=.31,n.setOnClickFunction(m),r.gameLayer.addChild(n);var o=EHDI.GAME.dbFactory.buildArmature("bg_milkbowl");o.animation.gotoAndPlay("idle",-1,-1,0),dragonBones.WorldClock.clock.add(o);var h=o.getDisplay();r.gameLayer.addChild(h),h.position.set(.325*EHDI.screen.stageWidth,.275*-EHDI.screen.stageHeight),h.zIndex=.4,h.interactive=!0;var u,c=function(){s&&(s=!1,EHDI.GAME.soundManager.playSFX("milk_shake"),o.animation.gotoAndPlay("shake",-1,-1,1))};h.touchstart=c,h.mousedown=c,this.bunnicula=new EHDI.component.Bunnicula,this.bunnicula.position.set(0,.1*EHDI.screen.stageHeight),this.bunnicula.zIndex=1,r.gameLayer.addChild(r.bunnicula),this.chester=new EHDI.component.PeekingCharacter("chester"),this.chester.position.set(.15*EHDI.screen.stageWidth,.1*EHDI.screen.stageHeight),this.chester.zIndex=1.1,r.gameLayer.addChild(r.chester),this.harold=new EHDI.component.PeekingCharacter("harold"),this.harold.position.set(.15*EHDI.screen.stageWidth,.1*EHDI.screen.stageHeight),this.harold.zIndex=1.2,r.gameLayer.addChild(r.harold),(u=new EHDI.aka.Sprite(EHDI.Assets.images.counter)).anchor.set(.5,1),u.position.set(0,.5*EHDI.screen.stageHeight),r.gameLayer.addChild(u),u.zIndex=2;var d=new EHDI.aka.Sprite(EHDI.Assets.images.counter_backest);d.anchor.set(.5,.533),d.position.set(.1585*EHDI.screen.stageWidth,.117*EHDI.screen.stageHeight),d.zIndex=4,this.gameLayer.addChild(d),this.potManager=new EHDI.component.PotManager(this.gameLayer),this.gameLayer.addChild(this.potManager);var f=new EHDI.aka.Sprite(EHDI.Assets.images.counter_back);f.anchor.set(.5,.707),f.position.set(.1585*EHDI.screen.stageWidth,d.y+.45*d.height),f.zIndex=6,this.gameLayer.addChild(f);var p=new EHDI.aka.Sprite(EHDI.Assets.images.counter_front);p.position.set(.17225*EHDI.screen.stageWidth,.255*EHDI.screen.stageHeight),p.anchor.set(.5,.5),p.zIndex=7,this.gameLayer.addChild(p);var _=new EHDI.aka.Sprite(EHDI.Assets.images.counter_frontest);_.anchor.set(.5,.5),_.position.set(.1755*EHDI.screen.stageWidth,.361*EHDI.screen.stageHeight),_.zIndex=9,this.gameLayer.addChild(_)};var h=function(){r.potManager.allowInput&&(r.potManager.allowInput=!1,r.bunnicula.kitchenPickUp(),r.bunnicula.functionToCall=r.potManager.addBeet)},u=function(){r.potManager.allowInput&&(r.potManager.allowInput=!1,r.bunnicula.kitchenPickUp(),r.bunnicula.functionToCall=r.potManager.addCarrot)},c=function(){r.potManager.allowInput&&(r.potManager.allowInput=!1,r.bunnicula.kitchenPickUp(),r.bunnicula.functionToCall=r.potManager.addJelly)},d=function(){r.potManager.allowInput&&(r.potManager.allowInput=!1,r.bunnicula.kitchenPickUp(),r.bunnicula.functionToCall=r.potManager.addTomato)},f=function(){r.potManager.allowInput&&(r.potManager.allowInput=!1,r.bunnicula.kitchenPickUp(),r.bunnicula.functionToCall=r.potManager.addEggplant)},p=function(){r.potManager.allowInput&&(r.potManager.allowInput=!1,r.bunnicula.kitchenPickUpPotion(),r.bunnicula.functionToCall=r.potManager.addVeggieMix)};this.screenDidAppear=function(){(e=new EHDI.displays.Button(EHDI.Assets.images.btn_pause,null,null,null,.8)).position.set(.425*EHDI.screen.viewWidth,.375*-EHDI.screen.viewHeight),e.setOnClickFunction(_),this.guiLayer.addChild(e),(i=new EHDI.displays.Button(EHDI.Assets.images.btn_checklist,null,null,null,.8)).setOnClickFunction(m),i.position.set(.425*-EHDI.screen.viewWidth,.375*-EHDI.screen.viewHeight),this.guiLayer.addChild(i),(n=new EHDI.displays.Button(EHDI.Assets.images.btn_reset,null,null,null,.8)).setOnClickFunction(r.potManager.reset),n.position.set(.325*-EHDI.screen.viewWidth,.375*-EHDI.screen.viewHeight),this.guiLayer.addChild(n);var t=new EHDI.aka.Sprite(EHDI.displays.TextureRectangle(11343183,152,75));t.anchor.set(.5,.5),t.position.set(.02*EHDI.screen.stageWidth,.15*EHDI.screen.stageHeight),this.gameLayer.addChild(t),t.alpha=0,t.zIndex=11,t.interactive=!0,t.touchstart=h,t.mousedown=h;var s=new EHDI.aka.Sprite(EHDI.displays.TextureRectangle(15362324,120,77));s.anchor.set(.5,.5),s.position.set(.162*EHDI.screen.stageWidth,.15*EHDI.screen.stageHeight),this.gameLayer.addChild(s),s.alpha=0,s.zIndex=11,s.interactive=!0,s.touchstart=u,s.mousedown=u;var a=new EHDI.aka.Sprite(EHDI.displays.TextureRectangle(3241733,123,117));a.anchor.set(.5,.5),a.position.set(.295*EHDI.screen.stageWidth,.12*EHDI.screen.stageHeight),this.gameLayer.addChild(a),a.alpha=0,a.zIndex=11,a.interactive=!0,a.touchstart=p,a.mousedown=p;var l=new EHDI.aka.Sprite(EHDI.displays.TextureRectangle(12648289,133,73));l.anchor.set(.5,.5),l.position.set(.028*EHDI.screen.stageWidth,.31*EHDI.screen.stageHeight),this.gameLayer.addChild(l),l.alpha=0,l.zIndex=11,l.interactive=!0,l.touchstart=c,l.mousedown=c;var g=new EHDI.aka.Sprite(EHDI.displays.TextureRectangle(13702421,131,78));g.anchor.set(.5,.5),g.position.set(.18*EHDI.screen.stageWidth,.31*EHDI.screen.stageHeight),this.gameLayer.addChild(g),g.alpha=0,g.zIndex=11,g.interactive=!0,g.touchstart=d,g.mousedown=d;var v=new EHDI.aka.Sprite(EHDI.displays.TextureRectangle(9908679,125,72));v.anchor.set(.5,.5),v.position.set(.318*EHDI.screen.stageWidth,.315*EHDI.screen.stageHeight),this.gameLayer.addChild(v),v.alpha=0,v.zIndex=11,v.interactive=!0,v.touchstart=f,v.mousedown=f,EHDI.GAME.updateManager.addFrameListener(o),this.updateLayerOrder();var y=EHDI.GAME.storageManager.getLocalInfo(EHDI.GAME.id);"000010"!==y["000010"]?(t.interactive=!1,s.interactive=!1,a.interactive=!1,g.interactive=!1,v.interactive=!1,r.hand=new EHDI.component.HandPointer,r.guiLayer.addChild(r.hand),r.hand.reposition(l.position.x+25,l.position.y+25),r.potManager.disablePot(),r.nextStep=function(){r.potManager.enablePot(),l.interactive=!1,r.hand.reposition(.24*-EHDI.screen.stageWidth,.275*EHDI.screen.stageHeight)}):"111111"!==y[111111]&&(l.interactive=!1,s.interactive=!1,a.interactive=!1,g.interactive=!1,v.interactive=!1,r.hand=new EHDI.component.HandPointer,r.guiLayer.addChild(r.hand),r.hand.reposition(t.position.x+25,t.position.y+25),r.potManager.disablePot(),r.nextStep=function(){t.interactive=!1,s.interactive=!0,r.hand.reposition(s.position.x+25,s.position.y+25),r.nextStep=function(){s.interactive=!1,a.interactive=!0,r.hand.reposition(a.position.x+25,a.position.y+25),r.nextStep=function(){a.interactive=!1,l.interactive=!0,r.hand.reposition(l.position.x+25,l.position.y+25),r.nextStep=function(){l.interactive=!1,g.interactive=!0,r.hand.reposition(g.position.x+25,g.position.y+25),r.nextStep=function(){g.interactive=!1,v.interactive=!0,r.hand.reposition(v.position.x+25,v.position.y+25)}}}}})},this.updateLayerOrder=function(){r.gameLayer.children.sort(function(t,e){return t.zIndex=t.zIndex||0,e.zIndex=e.zIndex||0,t.zIndex-e.zIndex})};var _=function(){r.pauseManager.pauseGame(),EHDI.GAME.soundManager.playSFX("button_sfx_01")},m=function(){r.pauseManager.readyPopUp(),EHDI.GAME.soundManager.playSFX("fridge_open")};this.screenWillDisappear=function(){this.pauseManager.endGame()},this.screenDidDisappear=function(){dragonBones.WorldClock.clock.clear(),_windowArmature.removeEventListener(dragonBones.FrameEvent.ANIMATION_FRAME_EVENT,l),EHDI.GAME.updateManager.removeFrameListener(o)},this.onScreenResize=function(){e.position.set(.425*EHDI.screen.viewWidth,.375*-EHDI.screen.viewHeight)}},EHDI.scene.GameScene.prototype=Object.create(EHDI.aka.Container.prototype),(EHDI=EHDI||Object.create(null)).scene=EHDI.scene||Object.create(null),EHDI.scene.IntroComicScene=function(t){var e,i,n,r,s,a,o,l,h,u,c,d,f,p,_;EHDI.aka.Container.call(this);var m=EHDI.interactions.Keyboard(32),g=EHDI.interactions.Keyboard(65),v=EHDI.interactions.Keyboard(76),y=this,b=new TimelineMax;this.screenWillAppear=function(){(e=new EHDI.aka.Sprite(EHDI.Assets.images.intro_page_1_bg)).anchor.set(.5,.5),y.addChild(e)},this.screenDidAppear=function(){(i=new EHDI.aka.Sprite(EHDI.Assets.images.page_1_run_jerry)).anchor.set(.5,1),i.position.set(-EHDI.screen.stageWidth,.392*EHDI.screen.stageHeight),y.addChild(i),(n=new EHDI.aka.Sprite(EHDI.Assets.images.page_1_run_tom)).anchor.set(.5,1),n.position.set(-EHDI.screen.stageWidth,.392*EHDI.screen.stageHeight),y.addChild(n),(r=new EHDI.aka.Sprite(EHDI.displays.TextureRectangle(0,EHDI.screen.stageWidth,EHDI.screen.stageHeight))).anchor.set(.5,.5),r.alpha=0,y.addChild(r),(s=new EHDI.aka.Sprite(EHDI.Assets.images.page_1_window1)).anchor.set(.5,.5),s.position.set(.15*-EHDI.screen.stageWidth,0),s.scale.set(0,0),y.addChild(s),(a=new EHDI.aka.Sprite(EHDI.Assets.images.page_1_window2)).anchor.set(.5,.5),a.position.set(.15*EHDI.screen.stageWidth,.2*-EHDI.screen.stageHeight),a.scale.set(0,0),y.addChild(a),(o=new EHDI.aka.Sprite(EHDI.Assets.images.page_1_window3)).anchor.set(.5,.5),o.position.set(.15*EHDI.screen.stageWidth,.225*EHDI.screen.stageHeight),y.addChild(o),(l=new EHDI.displays.Button(EHDI.Assets.images.next_button,EHDI.Assets.images.next_button_pressed,null,null)).position.set(.425*EHDI.screen.viewWidth,.4*EHDI.screen.viewHeight),l.setOnClickFunction(y.showPage2),y.addChild(l),b.to(i,.5,{x:.1875*EHDI.screen.stageWidth,ease:Power2.easeIn}),b.to(n,.5,{x:.1875*-EHDI.screen.stageWidth,ease:Power2.easeIn},"-=0.25"),b.to(r,.1,{alpha:.5},"+=0.2"),b.to(s.scale,.25,{x:1,y:1,ease:Bounce.easeOut}),b.to(a.scale,.25,{x:1,y:1,ease:Bounce.easeOut},"-=0.05"),b.from(o,.25,{x:-EHDI.screen.stageWidth,ease:Bounce.easeOut},"-=0.05"),m.press=y.showPage2,g.press=y.showPage2,v.press=y.showPage2},this.showPage2=function(){b.kill(),b.clear(),i.position.x=.1875*EHDI.screen.stageWidth,n.position.x=.1875*-EHDI.screen.stageWidth,s.scale.set(1,1),s.scale.set(1,1),o.position.x=.15*EHDI.screen.stageWidth,y.removeChild(l),(f=new EHDI.aka.Sprite(EHDI.Assets.images.intro_page_2_bg)).anchor.set(.5,.5),f.position.set(EHDI.screen.stageWidth,0),y.addChild(f),(c=new EHDI.aka.Sprite(EHDI.Assets.images.page_2_butch_2)).anchor.set(.5,1),c.position.set(.1*EHDI.screen.stageWidth,.2*EHDI.screen.stageHeight),f.addChild(c),(h=new EHDI.aka.Sprite(EHDI.Assets.images.intro_page_2_jerry)).anchor.set(.5,1),h.position.set(.1875*-EHDI.screen.stageWidth,.392*EHDI.screen.stageHeight),f.addChild(h),(u=new EHDI.aka.Sprite(EHDI.Assets.images.intro_page_2_tom)).anchor.set(.5,1),u.position.set(.1875*-EHDI.screen.stageWidth,.5*EHDI.screen.stageHeight+u.height),f.addChild(u),(d=new EHDI.aka.Sprite(EHDI.displays.TextureRectangle(0,EHDI.screen.stageWidth,EHDI.screen.stageHeight))).anchor.set(.5,.5),y.addChild(d),d.alpha=0,(p=new EHDI.aka.Sprite(EHDI.Assets.images.page_2_window1)).anchor.set(.5,.5),p.position.set(.15*-EHDI.screen.stageWidth,EHDI.screen.stageHeight),(_=new EHDI.aka.Sprite(EHDI.Assets.images.page_2_window2)).anchor.set(.5,.5),_.position.set(.15*EHDI.screen.stageWidth,-EHDI.screen.stageHeight),_page2panel3=new EHDI.aka.Sprite(EHDI.Assets.images.page_2_window3),_page2panel3.anchor.set(.5,1),_page2panel3.position.set(.05*-EHDI.screen.stageHeight,.06*EHDI.screen.stageHeight),_page2panel3.scale.set(0,0),y.addChild(_page2panel3),y.addChild(p),y.addChild(_),y.addChild(l),b.to(f,.5,{x:0,ease:Power2.easeOut}),b.to(u,.5,{y:.5*EHDI.screen.stageHeight,ease:Power2.easeOut}),b.add(E),b.to(d,.25,{alpha:.5},"+=0.2"),b.to(p,.25,{y:.08*EHDI.screen.stageHeight,ease:Back.easeOut}),b.to(_,.25,{y:0,ease:Back.easeOut},"-=0.25"),b.to(_page2panel3.scale,.25,{x:1,y:1,ease:Back.easeOut}),l.setOnClickFunction(T),m.press=T,g.press=T,v.press=T};var E=function(){c.texture=EHDI.Assets.images.page_2_butch_1},T=function(){m.dispose(),g.dispose(),v.dispose(),b.kill(),EHDI.GAME.sceneManager.changeScene(new EHDI.scene.GameScene(t),{alpha:{from:0,to:1},duration:.5})}},EHDI.scene.IntroComicScene.prototype=Object.create(EHDI.aka.Container.prototype),(EHDI=EHDI||Object.create(null)).scene=EHDI.scene||Object.create(null),EHDI.scene.OutroComicScene=function(t,e){var i,n,r,s,a,o,l,h,u;EHDI.aka.Container.call(this);var c=this,d=new TimelineMax;this.screenWillAppear=function(){(i=new EHDI.aka.Sprite(EHDI.Assets.images.page_1_bg)).anchor.set(.5,.5),c.addChild(i)},this.screenDidAppear=function(){(n=new EHDI.aka.Sprite(EHDI.Assets.images.page_1_jerry_run)).anchor.set(.5,.5),n.position.set(.15*-EHDI.screen.stageWidth,0),c.addChild(n),(r=new EHDI.aka.Sprite(EHDI.Assets.images["page_1_"+t+"_foot"])).anchor.set(.5,.5),r.position.set(.225*EHDI.screen.stageWidth,.15*-EHDI.screen.stageHeight),c.addChild(r),(s=new EHDI.aka.Sprite(EHDI.Assets.images.page_1_jerry_react)).anchor.set(.5,.5),s.position.set(.225*EHDI.screen.stageWidth,.15*EHDI.screen.stageHeight),c.addChild(s),(a=new EHDI.displays.Button(EHDI.Assets.images.next_button,EHDI.Assets.images.next_button_pressed,null,null)).position.set(.425*EHDI.screen.viewWidth,.4*EHDI.screen.viewHeight),a.setOnClickFunction(c.showPage2),c.addChild(a),d.from(n,.25,{x:.5*-EHDI.screen.stageWidth,ease:Power2.easeOut}),d.from(r,.25,{y:-EHDI.screen.stageHeight,rotation:EHDI.NumberUtil.degreeToRadian(15),ease:Power2.easeIn},"+=0.25"),d.from(s.scale,.25,{x:0,y:0,ease:Bounce.easeOut},"+=0.25")},this.showPage2=function(){d.kill(),d.clear(),n.position.x=.15*-EHDI.screen.stageWidth,r.position.y=.15*-EHDI.screen.stageHeight,s.scale.set(1,1),c.removeChild(a),(l=new EHDI.aka.Sprite(EHDI.Assets.images["jerry_cornered_"+t])).anchor.set(.5,.5),l.position.set(0,EHDI.screen.stageHeight),c.addChild(l),(o=new EHDI.aka.Sprite(EHDI.displays.TextureRectangle(0,EHDI.screen.stageWidth,EHDI.screen.stageHeight))).anchor.set(.5,.5),c.addChild(o),o.alpha=0,(h=new EHDI.aka.Sprite(EHDI.Assets.images["page_2_"+t])).anchor.set(.5,.5),h.position.set(.75*EHDI.screen.stageWidth,.75*-EHDI.screen.stageHeight),c.addChild(h),(u=new EHDI.aka.Sprite(EHDI.Assets.images.page_2_jerry)).anchor.set(.5,.5),u.position.set(.225*-EHDI.screen.stageWidth,.15*- -EHDI.screen.stageHeight),u.scale.set(0,0),c.addChild(u),c.addChild(a),d.to(l,.25,{x:0,y:0,ease:Power2.easeOut}),d.to(h,.1,{x:.15*EHDI.screen.stageWidth,y:0,ease:Power2.easeOut},"+=0.5"),d.to(o,.1,{alpha:.5},"-=0.1"),d.to(u.scale,.1,{x:1,y:1,ease:Bounce.easeOut},"+=0.5"),a.setOnClickFunction(f)};var f=function(){EHDI.GAME.sceneManager.changeScene(new EHDI.scene.PostGameScene(t,e),{alpha:new EHDI.scene.TransitionParameter(0,1),duration:.3})}},EHDI.scene.OutroComicScene.prototype=Object.create(EHDI.aka.Container.prototype),(EHDI=EHDI||Object.create(null)).scene=EHDI.scene||Object.create(null),EHDI.scene.PostGameScene=function(t,e,i,n,r,s){PIXI.Container.call(this);var a,o,l,h,u,c=null,d=this,f=null,p=null,_=new TimelineMax({repeat:-1}),m=new PIXI.particles.ParticleContainer(100,{scale:!0,position:!0,rotation:!0,uvs:!0,alpha:!0},100),g=!1,v=!1,y=!1,b=new TimelineMax,E=new TimelineMax,T=function(t){g||dragonBones.WorldClock.clock.advanceTime(.001*t)},x=function(t,e){var i=new EHDI.aka.Sprite(EHDI.Assets.images.con_formula);i.anchor.set(.5,0);var n=new EHDI.aka.Container,r=new EHDI.aka.Container;i.addChild(n);for(var s=e.split(""),a=function(t,e){for(var i="",n=0;n<e.length;n++)i+=Math.min(t.charAt(n),e.charAt(n));return i}(t,e).split(""),o=function(t,e){for(var i="",n=0;n<e.length;n++)i+=Math.abs(parseInt(e.charAt(n)-parseInt(t[n])));return i}(a,e).split(""),l=0,h=null,u=0;u<s.length;u++)Math.abs(parseInt(a[u])-parseInt(s[u]));for(u=0;u<a.length;u++)for(var c=0;c<parseInt(a[u]);c++){var d="beet";switch(u){case 1:d="eggplant";break;case 2:d="carrot";break;case 3:d="tomato";break;case 4:d="jelly";break;case 5:d="potion"}if((f=new EHDI.aka.Sprite(EHDI.Assets.images[d+"_checklist"])).anchor.set(0,.5),h?f.position.set(h.position.x+h.width+28,.5*i.height):f.position.set(0,.5*i.height),n.addChild(f),l>0)(p=new EHDI.aka.Sprite(EHDI.Assets.images.add_checklist)).anchor.set(.5,.5),p.position.set(f.position.x-.5*p.width-5,.5*i.height),n.addChild(p),p;l++,h=f}h=null;for(u=0;u<o.length;u++)for(c=0;c<parseInt(o[u]);c++){var f,p;d="beet";switch(u){case 1:d="eggplant";break;case 2:d="carrot";break;case 3:d="tomato";break;case 4:d="jelly";break;case 5:d="potion"}if((f=new EHDI.aka.Sprite(EHDI.Assets.images[d+"_checklist_shdw"])).anchor.set(0,.5),h?f.position.set(h.position.x+h.width+28,.5*i.height):f.position.set(18,.5*i.height),r.addChild(f),l>0)(p=new EHDI.aka.Sprite(EHDI.Assets.images.add_checklist)).anchor.set(.5,.5),p.position.set(f.position.x-.5*p.width-5,.5*i.height),r.addChild(p),p;l++,h=f}return r.position.set(n.width,.05*i.height),n.width>0&&(r.position.x+=10),n.addChild(r),n.scale.set(.85,.85),n.position.set(.5*-n.width,.05*i.height),i};this.screenWillAppear=function(){(c=new EHDI.aka.Sprite(EHDI.Assets.images["bg_result_"+t])).anchor.set(.5,.5),d.addChild(c);var _="wht";"nope"===t&&(_="blk");var g=new EHDI.aka.Sprite(EHDI.Assets.images["cloud_"+_+"1"]);g.position.set(.5*-EHDI.screen.stageWidth,.5*-EHDI.screen.stageHeight),d.addChild(g);var v=new EHDI.aka.Sprite(EHDI.Assets.images["cloud_"+_+"2"]);v.anchor.set(1,0),v.position.set(.5*EHDI.screen.stageWidth,.5*-EHDI.screen.stageHeight),d.addChild(v);var y=new EHDI.aka.Sprite(EHDI.Assets.images["cloud_"+_+"3"]);y.anchor.set(1,1),y.position.set(.5*EHDI.screen.stageWidth,.5*EHDI.screen.stageHeight),d.addChild(y);var T="brown";n&&(T="gradient");var w=new EHDI.aka.Sprite(EHDI.Assets.images["pot_"+T]);w.anchor.set(0,1),w.position.set(.5*-EHDI.screen.stageWidth,.5*EHDI.screen.stageHeight),d.addChild(w),this.smokeArmature=EHDI.GAME.dbFactory.buildArmature("pot_steam"),this.smokeArmature.animation.gotoAndPlay("steam_result_"+_,-1,-1,0);var D=this.smokeArmature.getDisplay();D.position.set(.1*-EHDI.screen.stageWidth,.3*EHDI.screen.stageHeight),d.addChild(D),d.shine=new EHDI.aka.Sprite(EHDI.Assets.images.radial_light),d.shine.anchor.set(.5,.5),d.shine.position.set(.1*-EHDI.screen.stageWidth,.075*EHDI.screen.stageHeight),"fangtastic"===t&&d.addChild(d.shine),d.shine.scale.set(.5),this.bunnicula=EHDI.GAME.dbFactory.buildArmature("bunnicula");var S=t;"fangtastic"===t?S+="_clap":"almost"===t&&(S="nope"),this.bunnicula.animation.gotoAndPlay("result_"+S+"_intro",-1,-1,1);var A=this.bunnicula.getDisplay();A.position.set(.275*EHDI.screen.stageWidth,.45*EHDI.screen.stageHeight),d.addChild(A),d.addChild(m);if((o=new EHDI.displays.Button(EHDI.Assets.images.btn_checklist,null,null,null,.8)).setOnClickFunction(I),o.position.set(.425*-EHDI.screen.viewWidth,.375*-EHDI.screen.viewHeight),this.addChild(o),"fangtastic"===t){this.effectArmature=EHDI.GAME.dbFactory.buildArmature("effect"),this.effectArmature.animation.gotoAndPlay("transition",-1,-1,1),l=new EHDI.aka.Container,d.addChild(l),h=this.effectArmature.getDisplay(),l.position.set(.1*-EHDI.screen.stageWidth,.075*EHDI.screen.stageHeight),l.addChild(h),this.cloneArmature=EHDI.GAME.dbFactory.buildArmature(e),this.cloneArmature.animation.gotoAndPlay("idle",-1,-1,0);var P=this.cloneArmature.getDisplay();l.addChild(P),P.scale.set(.5,.5),"almost"===t&&(P.alpha=.5),this.effectArmature.addEventListener(dragonBones.FrameEvent.ANIMATION_FRAME_EVENT,function(t){EHDI.GAME.soundManager.playSFX("ingredient_transfer"),d.effectArmature.animation.gotoAndPlay("move",-1,-1,0),E.to(l,1.5,{x:.425*-EHDI.screen.viewWidth,y:.375*-EHDI.screen.viewHeight}),E.to(l.scale,.25,{x:0,y:0},"-=0.5"),E.add(function(){l.visible=!1,u()})}),l.visible=!1}i&&"almost"===t?(EHDI.GAME.soundManager.playSFX("cooking_alsmost_success"),(f=new EHDI.aka.Sprite(EHDI.Assets.images[t+"_"+i])).anchor.set(.5,.5),d.addChild(f),f.position.set(.1*-EHDI.screen.stageWidth,.075*EHDI.screen.stageHeight)):e?(EHDI.GAME.soundManager.playSFX("cooking_success"),this.recipeArmature=EHDI.GAME.dbFactory.buildArmature(e),this.recipeArmature.animation.gotoAndPlay("idle",-1,-1,0),f=this.recipeArmature.getDisplay(),d.addChild(f),f.position.set(.1*-EHDI.screen.stageWidth,.075*EHDI.screen.stageHeight),d.shine.scale.set(.85),"mrs_carrot"!==e&&"mrs_eggplant"!==e||(f.position.y+=.1*EHDI.screen.stageHeight)):(EHDI.GAME.soundManager.playSFX("cooking_failed"),(f=new EHDI.aka.Sprite(EHDI.Assets.images.nope)).anchor.set(.5,.5),d.addChild(f),f.position.set(.1*-EHDI.screen.stageWidth,.075*EHDI.screen.stageHeight)),"nope"!==t&&(r||(r=s),(a=x(r,s)).position.set(0,.35*-EHDI.screen.viewHeight),d.addChild(a),(p=new EHDI.aka.Sprite(EHDI.Assets.images["container_"+t])).anchor.set(.5,.5),p.position.set(0,.4*-EHDI.screen.viewHeight),d.addChild(p),_recipeLbl=new EHDI.aka.PixiText(EHDI.localization.strings[e].content,{fontSize:EHDI.localization.strings[e].size,align:"center",fill:"#FFFFFF",fontFamily:"lakkireddy",padding:15}),_recipeLbl.anchor.set(.5,.5),p.addChild(_recipeLbl),p.interactive=!0,p.mousedown=function(){b.kill(),b.clear(),b.to(a,.5,{y:.35*-EHDI.screen.viewHeight}),b.to(a,.5,{y:.4575*-EHDI.screen.viewHeight},"+=1.5")},p.touchstart=function(){b.kill(),b.clear(),b.to(a,.5,{y:.35*-EHDI.screen.viewHeight}),b.to(a,.5,{y:.4575*-EHDI.screen.viewHeight},"+=1.5")})};this.screenDidAppear=function(){if(_homeButton=new EHDI.displays.Button(EHDI.Assets.images.button_home,null,null,null,.8),_homeButton.position.set(.15*-EHDI.screen.stageWidth,.375*EHDI.screen.viewHeight),this.addChild(_homeButton),_homeButton.setOnClickFunction(D),_replayButton=new EHDI.displays.Button(EHDI.Assets.images.btn_continue,null,null,null,.8),_replayButton.position.set(.15*EHDI.screen.stageWidth,.375*EHDI.screen.viewHeight),this.addChild(_replayButton),_replayButton.setOnClickFunction(S),dragonBones.WorldClock.clock.add(this.bunnicula),dragonBones.WorldClock.clock.add(this.smokeArmature),d.recipeArmature&&dragonBones.WorldClock.clock.add(this.recipeArmature),EHDI.GAME.updateManager.addFrameListener(T),"fangtastic"===t&&(_.to(d.shine.scale,.5,{x:1,y:1,ease:Power0.easeNone}),_.to(d.shine.scale,.5,{x:.85,y:.85,ease:Power0.easeNone})),"fangtastic"===t)for(var e=0;e<40;e++){var i=new EHDI.component.SparkleParticle(.4*EHDI.screen.stageHeight,{x:.1*-EHDI.screen.stageWidth,y:0});m.addChild(i),i.position.set(.1*-EHDI.screen.stageWidth,0)}},this.screenDidDisappear=function(){dragonBones.WorldClock.clock.remove(d.bunnicula),dragonBones.WorldClock.clock.remove(d.smokeArmature),d.recipeArmature&&dragonBones.WorldClock.clock.remove(d.recipeArmature),d.effectArmature&&dragonBones.WorldClock.clock.remove(d.effectArmature),d.cloneArmature&&dragonBones.WorldClock.clock.remove(d.cloneArmature),EHDI.GAME.updateManager.removeFrameListener(T)};var w=function(){l.visible=!0,dragonBones.WorldClock.clock.add(d.effectArmature),y=!0},D=function(){v||(u=function(){E.kill(),E=null,b.kill(),b=null,_.kill(),_=null,EHDI.GAME.soundManager.playSFX("button_sfx_01"),EHDI.GAME.sceneManager.changeScene(new EHDI.scene.TitleScene,{alpha:{from:0,to:1},duration:.5},!0)},y||"fangtastic"!==t?u():(w(),v=!0))},S=function(){v||(EHDI.GAME.soundManager.playSFX("button_sfx_01"),u=function(){E.kill(),E=null,b.kill(),b=null,_.kill(),_=null;var t=EHDI.GAME.storageManager.getLocalInfo(EHDI.GAME.id);24===t.unlockCount&&t.isFirstTimePlay?(EHDI.GAME.sceneManager.changeScene(new EHDI.scene.CompleteGameScene,{alpha:{from:0,to:1},duration:.5},!0),t.isFirstTimePlay=!1,EHDI.GAME.storageManager.setLocalInfo(EHDI.GAME.id,t)):EHDI.GAME.sceneManager.changeScene(new EHDI.scene.GameScene,{alpha:{from:0,to:1},duration:.5},!0)},y||"fangtastic"!==t?u():(v=!0,w()))};this.onScreenResize=function(){_homeButton.position.set(.2*-EHDI.screen.stageWidth,.375*EHDI.screen.viewHeight),_replayButton.position.set(.15*EHDI.screen.stageWidth,.375*EHDI.screen.viewHeight),o.position.set(.425*-EHDI.screen.viewWidth,.375*-EHDI.screen.viewHeight)},this.popUpDidDisappear=function(){g=!1,v=!1};var I=function(){v||(u=function(){g=!0,EHDI.GAME.sceneManager.pushPopUp(new EHDI.popup.ChecklistPopUp,{alpha:new EHDI.scene.TransitionParameter(0,1),duration:.25})},EHDI.GAME.soundManager.playSFX("button_sfx_01"),y||"fangtastic"!==t?u():(v=!0,w()))}},EHDI.scene.PostGameScene.prototype=Object.create(EHDI.aka.Container.prototype),(EHDI=EHDI||Object.create(null)).scene=EHDI.scene||Object.create(null),EHDI.scene.TitleScene=function(){EHDI.aka.Container.call(this);var t=EHDI.interactions.Keyboard(32),e=null,i=null,n=null,r=null,s=null,a=new TimelineMax;this.screenWillAppear=function(){var t=new EHDI.aka.Sprite(EHDI.Assets.images.background_title_screen);t.anchor.set(.5,.5),this.addChild(t)},this.screenDidAppear=function(){(r=new EHDI.aka.Sprite(EHDI.Assets.images.title_screen_characters)).anchor.set(.5,1),r.position.set(.35*EHDI.screen.stageWidth,.4*EHDI.screen.stageHeight),this.addChild(r),(s=new EHDI.aka.Sprite(EHDI.Assets.images.title_screen_bunnicula)).anchor.set(.5,1),s.position.set(.3*-EHDI.screen.stageWidth,.15*EHDI.screen.stageHeight),this.addChild(s);var h="game_logo_"+EHDI.GAME.localeID;(e=new EHDI.aka.Sprite(EHDI.Assets.images[h])).anchor.set(.5,.5),e.position.set(0,.18*-EHDI.screen.viewHeight);var u=new EHDI.aka.Sprite(EHDI.Assets.images.counter_title_screen);u.anchor.set(.5,1),u.position.set(0,.5*EHDI.screen.stageHeight),this.addChild(u),this.addChild(e);var c=new EHDI.displays.Button(EHDI.Assets.images.btn_play,null,null,null,.8);c.setOnClickFunction(o),c.position.set(0,.3*EHDI.screen.stageHeight),this.addChild(c);var d=EHDI.GAME.storageManager.getLocalInfo(EHDI.GAME.id);(i=new EHDI.displays.ToggleButton(EHDI.Assets.images.btn_audio_1,EHDI.Assets.images.btn_audio_1,EHDI.Assets.images["btn_audio_0-2"],EHDI.Assets.images["btn_audio_0-2"],d.isMuted,.8)).position.set(.425*EHDI.screen.viewWidth,.375*-EHDI.screen.viewHeight),this.addChild(i),i.setOnClickFunction(l),!EHDI.GAME.bgm&&EHDI.screen.viewWidth>EHDI.screen.viewHeight&&(EHDI.GAME.bgm=EHDI.GAME.soundManager.playBGM("bunnicula_bgm",.3)),t.press=o,a.from(r,.5,{y:EHDI.screen.stageHeight,ease:Back.easeOut}),a.from(s,.5,{y:EHDI.screen.stageHeight,ease:Back.easeOut},"-=0.5"),(n=new EHDI.aka.Sprite(EHDI.Assets.images.fg_logo)).anchor.set(.5,.5),n.position.set(.425*EHDI.screen.viewWidth,.4*EHDI.screen.viewHeight),this.addChild(n)};var o=function(){t.dispose(),EHDI.GAME.soundManager.playSFX("button_sfx_01"),EHDI.GAME.sceneManager.changeScene(new EHDI.scene.GameScene,{alpha:{from:0,to:1},duration:.5},!0)},l=function(t){EHDI.GAME.soundManager.setMute(t);var e=EHDI.GAME.storageManager.getLocalInfo(EHDI.GAME.id);e.isMuted=t,EHDI.GAME.storageManager.setLocalInfo(EHDI.GAME.id,e),EHDI.GAME.soundManager.playSFX("button_sfx_01")};this.onScreenResize=function(){e.position.set(0,.2*-EHDI.screen.viewHeight),i.position.set(.425*EHDI.screen.viewWidth,.375*-EHDI.screen.viewHeight),n.position.set(.425*EHDI.screen.viewWidth,.4*EHDI.screen.viewHeight)},this.dispose=function(){a.kill(),a.clear()}},EHDI.scene.TitleScene.prototype=Object.create(EHDI.aka.Container.prototype),EHDI.scene.TitleScene.prototype.destroy=function(){this.dispose(),EHDI.aka.Container.prototype.destroy.apply(this,arguments)},(EHDI=EHDI||Object.create(null)).gameStringsToPreLoad=["assets/localization/config.xml"],EHDI.assetsToPreLoad=["assets/font/lakkireddy.otf","assets/preloader/bar_bg.png","assets/preloader/bar_fill.png","assets/preloader/frame.png","assets/preloader/icon_rotate.png","assets/preloader/animation/loader_animation0001.png","assets/preloader/animation/loader_animation0002.png","assets/preloader/animation/loader_animation0003.png","assets/preloader/animation/loader_animation0004.png","assets/preloader/animation/loader_animation0005.png","assets/preloader/animation/loader_animation0006.png","assets/preloader/animation/loader_animation0007.png","assets/preloader/animation/loader_animation0008.png","assets/preloader/animation/loader_animation0009.png","assets/preloader/animation/loader_animation0010.png"],EHDI.gameStringsToLoad=["assets/game/bunnicula_ske.json","assets/game/bunnicula_tex.json","assets/game/objects_ske.json","assets/game/objects_tex.json","assets/postgame/results_food_tex.json","assets/postgame/results_food_ske.json"],EHDI.assetsToLoad=["assets/buttons/btn_checklist.png","assets/buttons/btn_back.png","assets/buttons/btn_yes.png","assets/buttons/button_home.png","assets/buttons/btn_home_a.png","assets/buttons/btn_pause.png","assets/buttons/btn_play.png","assets/buttons/btn_audio_1.png","assets/buttons/btn_audio_0-2.png","assets/buttons/btn_no.png","assets/buttons/btn_continue.png","assets/buttons/btn_down_scroll.png","assets/buttons/btn_up_scroll.png","assets/buttons/btn_reset.png","assets/pause/btn_htp_next.png","assets/pause/htp_pg_0.png","assets/pause/htp_pg_1.png","assets/pause/htp_1.png","assets/pause/htp_2.png","assets/pause/con_pause.png","assets/pause/con_quit.png","assets/game/background.png","assets/game/counter.png","assets/game/counter_back.png","assets/game/counter_backest.png","assets/game/counter_front.png","assets/game/counter_frontest.png","assets/game/window.png","assets/game/background_table.png","assets/game/bunnicula_tex.png","assets/game/objects_tex.png","assets/game/refrigerator.png","assets/postgame/results_food_tex.png","assets/postgame/background_almost.png","assets/postgame/background_fangtastic.png","assets/postgame/background_nope.png","assets/postgame/bg_result_almost.png","assets/postgame/bg_result_end.png","assets/postgame/end_table.png","assets/postgame/bg_result_fangtastic.png","assets/postgame/bg_result_nope.png","assets/postgame/pot_brown.png","assets/postgame/pot_gradient.png","assets/postgame/container.png","assets/postgame/container_fangtastic.png","assets/postgame/radial_light.png","assets/postgame/container_almost.png","assets/checklist/a_touch_of_yuck.png","assets/checklist/a_touch_of_yuck_shdw.png","assets/checklist/about_face.png","assets/checklist/about_face_shdw.png","assets/checklist/carrot_cyclops.png","assets/checklist/carrot_cyclops_shdw.png","assets/checklist/carrot_minion.png","assets/checklist/carrot_minion_shdw.png","assets/checklist/everything_in_it.png","assets/checklist/everything_in_it_shdw.png","assets/checklist/four_carrot_soup.png","assets/checklist/four_carrot_soup_shdw.png","assets/checklist/frankenstein_soup.png","assets/checklist/frankenstein_soup_shdw.png","assets/checklist/just_beet_it.png","assets/checklist/just_beet_it_shdw.png","assets/checklist/infrared_spectrum.png","assets/checklist/infrared_spectrum_shdw.png","assets/checklist/jiggly_ghost.png","assets/checklist/jiggly_ghost_shdw.png","assets/checklist/i_beet_you.png","assets/checklist/i_beet_you_shdw.png","assets/checklist/ketchup_surprise.png","assets/checklist/ketchup_surprise_shdw.png","assets/checklist/mister_carrot.png","assets/checklist/mister_carrot_shdw.png","assets/checklist/mister_eggplant.png","assets/checklist/mister_eggplant_shdw.png","assets/checklist/monster_stew.png","assets/checklist/monster_stew_shdw.png","assets/checklist/mrs_carrot.png","assets/checklist/mrs_carrot_shdw.png","assets/checklist/mrs_eggplant.png","assets/checklist/mrs_eggplant_shdw.png","assets/checklist/not_quite_spaghetti.png","assets/checklist/not_quite_spaghetti_shdw.png","assets/checklist/purple_propeller.png","assets/checklist/purple_propeller_shdw.png","assets/checklist/purplicious.png","assets/checklist/purplicious_shdw.png","assets/checklist/sewer_bunny_trap.png","assets/checklist/sewer_bunny_trap_shdw.png","assets/checklist/stop_and_go.png","assets/checklist/stop_and_go_shdw.png","assets/checklist/wet_salad.png","assets/checklist/wet_salad_shdw.png","assets/checklist/wet_salsa.png","assets/checklist/wet_salsa_shdw.png","assets/checklist/con_scroller.png","assets/checklist/scroller.png","assets/postgame/result/nope.png","assets/postgame/result/almost_red.png","assets/postgame/result/almost_purple.png","assets/postgame/result/almost_orange.png","assets/postgame/result/almost_green.png","assets/postgame/cloud_blk1.png","assets/postgame/cloud_blk2.png","assets/postgame/cloud_blk3.png","assets/postgame/cloud_wht1.png","assets/postgame/cloud_wht2.png","assets/postgame/cloud_wht3.png","assets/postgame/fx_shine.png","assets/postgame/fx_sparkle_1.png","assets/postgame/fx_sparkle_2.png","assets/postgame/shine_diamond.png","assets/postgame/con_formula.png","assets/title/background_title_screen.png","assets/title/counter_title_screen.png","assets/title/title_screen_characters.png","assets/title/title_screen_bunnicula.png","assets/title/fg_logo.png","assets/title/logos/game_logo_ar.png","assets/title/logos/game_logo_de.png","assets/title/logos/game_logo_en.png","assets/title/logos/game_logo_fr.png","assets/title/logos/game_logo_it.png","assets/title/logos/game_logo_pl.png","assets/title/logos/game_logo_ro.png","assets/title/logos/game_logo_tr.png","assets/checklist/background_ref_middle_under.png","assets/checklist/background_ref_middle_upper_bottle.png","assets/checklist/background_ref_middle_upper_carrot.png","assets/checklist/background_ref_middle_upper_juice.png","assets/checklist/background_ref_top.png","assets/checklist/background_ref_bottom.png","assets/checklist/details/add_checklist.png","assets/checklist/details/arrow_checklist.png","assets/checklist/details/beet_checklist.png","assets/checklist/details/beet_checklist_shdw.png","assets/checklist/details/carrot_checklist.png","assets/checklist/details/carrot_checklist_shdw.png","assets/checklist/details/eggplant_checklist.png","assets/checklist/details/eggplant_checklist_shdw.png","assets/checklist/details/jelly_checklist.png","assets/checklist/details/jelly_checklist_shdw.png","assets/checklist/details/potion_checklist.png","assets/checklist/details/potion_checklist_shdw.png","assets/checklist/details/tomato_checklist.png","assets/checklist/details/tomato_checklist_shdw.png","assets/checklist/details/window_checklist.png","assets/sfx/bgm/bunnicula_bgm.ogg","assets/sfx/sfx/place_ingredient.ogg","assets/sfx/sfx/boiling_pot_loop.ogg","assets/sfx/sfx/button_sfx_01.ogg","assets/sfx/sfx/ingredient_pickup.ogg","assets/sfx/sfx/cooking_failed.ogg","assets/sfx/sfx/cooking_success.ogg","assets/sfx/sfx/ingredient_transfer.ogg","assets/sfx/sfx/bunnicula_dish_getting_ready.ogg","assets/sfx/sfx/pot_close.ogg","assets/sfx/sfx/fridge_open.ogg","assets/sfx/sfx/milk_shake.ogg","assets/sfx/sfx/pet_slide_in.ogg","assets/sfx/sfx/pet_slide_out.ogg","assets/sfx/sfx/all_ingredient_complete.ogg","assets/sfx/sfx/cooking_alsmost_success.ogg","assets/sfx/sfx/recipe_select.ogg","assets/tutorial/tutorial_hand.png","assets/tutorial/tutorial_pointer.png"],(EHDI=EHDI||Object.create(null)).debugUtils=EHDI.debugUtils||Object.create(null),EHDI.debugUtils.debugUtilsContainer=function(t){EHDI.aka.Container.call(this);var e=new EHDI.debugUtils.FPSDisplay;e.anchor.y=1,e.position.set(.5*-EHDI.screen.viewWidth,.5*EHDI.screen.viewHeight),this.addChild(e);var i=new EHDI.aka.PixiText(t,{fontFamily:"sans-serif",fill:16777215,dropShadow:!0,fontSize:32});i.anchor.x=1,i.anchor.y=1,i.position.set(.5*EHDI.screen.viewWidth,.5*EHDI.screen.viewHeight),this.addChild(i),this.onScreenResize=function(){e.position.set(.5*-EHDI.screen.viewWidth,.5*EHDI.screen.viewHeight),i.position.set(.5*EHDI.screen.viewWidth,.5*EHDI.screen.viewHeight)}},EHDI.debugUtils.debugUtilsContainer.prototype=Object.create(EHDI.aka.Container.prototype),EHDI.debugUtils.FPSDisplay=function(){this.fps=EHDI.GAME.updateManager.getFPS(),EHDI.aka.PixiText.call(this,"FPS : "+this.fps,{fontFamily:"sans-serif",fill:16777215,dropShadow:!0,fontSize:32}),EHDI.GAME.updateManager.addFrameListener(this.updateMe.bind(this))},EHDI.debugUtils.FPSDisplay.prototype=Object.create(EHDI.aka.PixiText.prototype),EHDI.debugUtils.FPSDisplay.prototype.updateMe=function(){this.fps!==EHDI.GAME.updateManager.getFPS()&&(this.text="FPS :"+EHDI.GAME.updateManager.getFPS())},(EHDI=EHDI||Object.create(null)).interactions=EHDI.interactions||Object.create(null),EHDI.interactions.Keyboard=function(t){var e={};e.code=t,e.isDown=!1,e.isUp=!0,e.press=null,e.release=null,e.downHandler=function(t){t.keyCode===e.code&&(e.isUp&&e.press&&e.press(),e.isDown=!0,e.isUp=!1)},e.upHandler=function(t){t.keyCode===e.code&&(e.isDown&&e.release&&e.release(),e.isUp=!0,e.isDown=!1)};var i=e.downHandler.bind(e),n=e.upHandler.bind(e);return window.addEventListener("keydown",i,!1),window.addEventListener("keyup",n,!1),e.dispose=function(){window.removeEventListener("keydown",i),window.removeEventListener("keyup",n)},e},EHDI.interactions.ArrowControl=function(t,e){if(void 0===typeof e)throw new Error("Indicate speed in which you whant the sprite to move");var i=EHDI.interactions.Keyboard(38),n=EHDI.interactions.Keyboard(39),r=EHDI.interactions.Keyboard(40),s=EHDI.interactions.Keyboard(37);s.press=function(){t.vx=-e},s.release=function(){n.isDown||(t.vx=0)},n.press=function(){t.vx=e},n.release=function(){s.isDown||(t.vx=0)},i.press=function(){t.vy=-e},i.release=function(){r.isDown||(t.vy=0)},r.press=function(){t.vy=e},r.release=function(){i.isDown||(t.vy=0)}},(EHDI=EHDI||Object.create(null)).localization=EHDI.localization||Object.create(null),EHDI.localization.LocalizationXMLReader=function(t){var e=t.getElementsByTagName("item");EHDI.localization.strings=EHDI.localization.strings||Object.create(null);for(var i=0;i<e.length;i++)EHDI.localization.strings[e[i].getAttribute("id")]={content:e[i].textContent,size:parseInt(e[i].getAttribute("size"))}};