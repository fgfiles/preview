!function e(t,a,i){function s(n,r){if(!a[n]){if(!t[n]){var l="function"==typeof require&&require;if(!r&&l)return l(n,!0);if(o)return o(n,!0);var h=new Error("Cannot find module '"+n+"'");throw h.code="MODULE_NOT_FOUND",h}var u=a[n]={exports:{}};t[n][0].call(u.exports,function(e){var a=t[n][1][e];return s(a?a:e)},u,u.exports,e,t,a,i)}return a[n].exports}for(var o="function"==typeof require&&require,n=0;n<i.length;n++)s(i[n]);return s}({1:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i={basicLength:5e4,randomLength:2,randomObsDist:200,minCannonRot:-1,numStars:100,numObs:15,numBalloons:5,maxDx:100,boostPower:50,gravity:-1.4,bouncePushForward:5,yBounceFactor:2.5,bounceFactors:{beach_ball:30,bucket:22,hammock:25,parasol:35,trampoline:40,tub:25,yoga_ball:25,none:20,pit:6,spring:35,spring_2:40,"float":35,drumm:25,deck_chair_1:25,balloons:35},objTextures:{0:"beach_ball",1:"bucket",2:"hammock",3:"parasol",4:"trampoline",5:"tub",6:"yoga_ball",7:"spring",8:"float",9:"drumm",10:"deck_chair_1",11:"spring_2"},sounds:{beach_ball:"sfx_bounce_yogaball_00",bucket:"sfx_bounce_bucket_00",hammock:"sfx_bounce_hammock_00",parasol:"sfx_bounce_plastic_00",trampoline:"sfx_bounce_trampoline_00",tub:"sfx_bounce_plastic_00",yoga_ball:"sfx_bounce_yogaball_00",none:"sfx_happo_impact_00",spring:"sfx_bounce_springboard_00",spring_2:"sfx_bounce_springboard_00","float":"sfx_bounce_plastic_00",drumm:"sfx_bounce_drum_00",deck_chair_1:"sfx_bounce_hammock_00",balloons:"sfx_bounce_plastic_00"}};a["default"]=i},{}],2:[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),n=e("./Common"),r=i(n),l=e("./SplashScene"),h=i(l),u=e("./ResultsScene"),d=i(u),p=e("./GameScene"),_=i(p),c=function(){function e(){s(this,e),r["default"].copy=r["default"].assets.getJSON("copy")}return o(e,[{key:"init",value:function(){this.showSplashScene()}},{key:"showSplashScene",value:function(){var e=new h["default"];e.signals.next.add(function(){this.showGameScene()},this);var t=new p3.FadeTransition(0,1);return r["default"].scene.add(e,t),e}},{key:"showResultsScene",value:function(){var e=new d["default"];e.signals.next.add(function(){this.showGameScene()},this),e.signals.home.add(function(e){this.showSplashScene()},this);var t=new p3.FadeTransition(0,1);return r["default"].scene.add(e,t),e}},{key:"showGameScene",value:function(){r["default"].paused=!1;var e=new _["default"];e.signals.previous.add(function(e){this.showGameScene()},this),e.signals.next.add(function(e){this.showResultsScene()},this),e.signals.home.add(function(e){this.showSplashScene()},this);var t=new p3.FadeTransition(0,1);return r["default"].scene.add(e,t),e}}]),e}();a["default"]=c},{"./Common":6,"./GameScene":7,"./ResultsScene":9,"./SplashScene":10}],3:[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),n=e("./AudioParams"),r=i(n),l=function(){function e(){s(this,e),this._cache={},this._music=null,this._isMuted=!1,this._isMute=!1;var t;"undefined"!=typeof document.hidden?(t="hidden",this.visibilityChange="visibilitychange"):"undefined"!=typeof document.mozHidden?(t="mozHidden",this.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(t="msHidden",this.visibilityChange="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(t="webkitHidden",this.visibilityChange="webkitvisibilitychange"),document.addEventListener(this.visibilityChange,function(){document[t]?Howler.volume(0):Howler.volume(1)},!1)}return o(e,[{key:"addSounds",value:function(e,t,a){a=a||"";var i=void 0,s=void 0,o=void 0,n=void 0,r=void 0,l=void 0,h=void 0;for(l=0;l<e.length;++l){for(o=a+e[l],o=o.split("/"),s=o[o.length-1],n=[],h=0;h<t.length;++h)r=t[h],n.push(o.join("/")+r);i=new Howl({src:n,volume:1,loop:!1,autoplay:!1,onloaderror:function(){console.warn("Error loading sound - "+s)}}),i.name=s,this._cache[s]=i}}},{key:"removeSounds",value:function(e){for(var t,a,i,s=0;s<e.length;++s){t=e[s];for(a in this._cache)if(this._cache.hasOwnProperty(key)&&(i=this._cache[key],i.name==a)){i.unload(),delete this._cache[t];break}}}},{key:"playSound",value:function(e,t){t=t||new r["default"],"string"!=typeof e&&(e=e[Math.floor(Math.random()*e.length)]);var a=this._cache[e];return a?(a.volume(t.volume),a.loop(t.loop),t.onEnd&&a.on("end",t.onEnd),p3.Device&&p3.Device.isAndroidStockBrowser&&(a.buffer=!0),t.fadeIn>0?this.fadeIn(a,t.fadeIn):a.play(),a):(console.warn("could not find sound : "+e),null)}},{key:"playMusic",value:function(e,t){if(t=t||new r["default"],"string"!=typeof e&&(e=e[Math.floor(Math.random()*e.length)]),this._music&&this._music.name==e)return this._music;var a=this._cache[e];return a?(a.volume(t.volume),a.loop(!0),a.__onend=function(){t.callback&&t.callback.call(t.scope)},a.on("end",a.__onend),t.loopStart,t.loopEnd,p3.Device&&p3.Device.isAndroidStockBrowser&&(a.buffer=!0),t.fadeIn>0?(this._music&&this._music.name!=e&&this.fadeOut(this._music,t.fadeIn,function(e){e.stop()},this),this.fadeIn(a,t.fadeIn)):(this._music&&this.stopMusic(),a.play()),this._music=a,a):(console.warn("Could not find music - "+e),null)}},{key:"stopSound",value:function(e){var t;for(var a in this._cache)if(this._cache.hasOwnProperty(a)&&(t=this._cache[a],t.name==e)){t.stop();break}}},{key:"stopMusic",value:function(e){e=e||this._music.name,this._music&&this._music.name==e&&(this._music.__onend&&this._music.off("end",this._music.__onend),this._music.stop(),this._music=null)}},{key:"mute",value:function(e){this._isMuted=e,this._isMuted?Howler.mute(!0):Howler.mute(!1)}},{key:"fadeIn",value:function(e,t,a,i){t=t||1,e.volume(0),e.play(),e.__volume=e._volume,TweenMax.killTweensOf(e),TweenMax.to(e,t,{__volume:1,ease:Power1.easeInOut,onUpdate:function(){e.volume(e.__volume)},onUpdateScope:this,onComplete:a,onCompleteParams:[e],onCompleteScope:i})}},{key:"fadeOut",value:function(e,t,a,i){t=t||1,e.__volume=e._volume,TweenMax.killTweensOf(e),TweenMax.to(e,t,{__volume:0,ease:Power1.easeInOut,onUpdate:function(){e.volume(e.__volume)},onUpdateScope:this,onComplete:a,onCompleteParams:[e],onCompleteScope:i})}},{key:"isMute",get:function(){return this._isMute}}]),e}();a["default"]=l},{"./AudioParams":4}],4:[function(e,t,a){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),o=function(){function e(){i(this,e),this._volume=1,this._loop=!1,this._delay=0,this._fadeIn=0,this._priority=0,this._callback=null,this._scope=window}return s(e,[{key:"volume",get:function(){return this._volume},set:function(e){this._volume=e}},{key:"loop",get:function(){return this._loop},set:function(e){this._loop=e}},{key:"delay",get:function(){return this._delay},set:function(e){this._delay=e}},{key:"fadeIn",get:function(){return this._fadeIn},set:function(e){this._fadeIn=e}},{key:"priority",get:function(){return this._priority},set:function(e){this._priority=e}},{key:"callback",get:function(){return this._callback},set:function(e){this._callback=e}},{key:"scope",get:function(){return this._scope}}]),e}();a["default"]=o},{}],5:[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var r,l=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),h=function p(e,t,a){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var s=Object.getPrototypeOf(e);return null===s?void 0:p(s,t,a)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(a)},u=e("./Common"),d=(i(u),function(e){function t(e,a,i){s(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r=a,n.type=i||"fwd",n._normal=new PIXI.Sprite(e.normal||PIXI.Texture.EMPTY),n._normal.anchor=new PIXI.Point(.5,.5),n.addChild(n._normal),n._normal.visible=!1,n._over=new PIXI.Sprite(e.over||PIXI.Texture.EMPTY),n._over.anchor=new PIXI.Point(.5,.5),n.addChild(n._over),n._over.visible=!1,n._down=new PIXI.Sprite(e.down||PIXI.Texture.EMPTY),n._down.anchor=new PIXI.Point(.5,.5),n.addChild(n._down),n._down.visible=!1,n}return n(t,e),l(t,[{key:"onMouseOver",value:function(){r.isMute||r.audio.playSound("sfx_btn_rollover_00"),h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onMouseOver",this).call(this)}},{key:"onMouseDown",value:function(){r.isMute||r.audio.playSound("sfx_btn_press_00"),h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onMouseDown",this).call(this)}},{key:"onMouseOut",value:function(){h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onMouseOut",this).call(this)}},{key:"enabled",get:function(){return this._enabled},set:function(e){this._enabled=e}}]),t}(p3.Button));a["default"]=d},{"./Common":6}],6:[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function s(){}Object.defineProperty(a,"__esModule",{value:!0});var o=e("./Button"),n=i(o);a["default"]=s,s.smoothie=null,s.displayObjs=null,s.flyDist=0,s.charm=null,s.PHYSICS_TICK=1/30,s.homeURL="http://www.boomerangtv.co.uk/games",s.game_key="game_data_0lkwjtndqata_gold_v1_2",s.highScores=[0,0,0],s.view=null,s.STAGE_WIDTH=1900,s.STAGE_HEIGHT=1024,s.stage=null,s.renderer=null,s.timestep=null,s.tracking=null,s.audio=null,s.camera=null,s.copy=null,s.config=null,s.language="",s.touch=new PIXI.Point(0,0),s.touching=!1,s.paused=!1,s.isWebGL=!1,s.isFirstPlay=!0,s.debug=null,s.devDebug=!1,s.isMute=!1,s.createButton=function(e,t,a,i,o,r,l){var h=new p3.ButtonStates;null===a||void 0===a?(h.normal=s.assets.getTexture("pause_btn_frame"),h.over=s.assets.getTexture("pause_btn_frame")):"string"==typeof a?(h.normal=s.assets.getTexture("btn_"+a+"_off"),h.over=s.assets.getTexture("btn_"+a+"_over"),h.down=s.assets.getTexture("btn_"+a+"_down")):h.normal=a;var u;return"back"==a||"close"==a||"exit"==a||"home"==a||"menu"==a||"string"!=typeof a?(u=new n["default"](h,this),"string"!=typeof a&&(u.compositeSprite=a)):u=new n["default"](h,this,"fwd"),u.x=e,u.y=t,u.anchor=new PIXI.Point(.5,.5),u.animate=!0,u.signals.click.add(i,o),r&&r.addChild(u),l&&(u.icon=new PIXI.Sprite(s.assets.getTexture(l)),u.icon.anchor.set(.5),u.addChild(u.icon)),u},s.shuffleString=function(e){for(var t=e.split(""),a=t.length,i=a-1;i>0;i--){var s=Math.floor(Math.random()*(i+1)),o=t[i];t[i]=t[s],t[s]=o}return t.join("")},s.randomID=function(e){return Math.random().toString(36).substr(2,e)},s.angle=function(e,t,a,i){var s=i-t,o=a-e,n=Math.atan2(s,o);return n},s.distance=function(e,t,a,i){return Math.sqrt((e-a)*(e-a)+(t-i)*(t-i))},s.deg2rad=function(e){return e*(Math.PI/180)},s.rad2deg=function(e){return e*=180/Math.PI},s.sort=function(e,t){function a(i,s){function o(t,a){var i=e[t];e[t]=e[a],e[a]=i}function n(){var a=e[i],n=i;o(n,s);for(var r=i;r<s;r++)!t&&e[r]<a?o(n++,r):t&&e[r]>a&&o(n++,r);return o(n,s),n}if(i<s){var r=n();a(i,r-1),a(r+1,s)}}var i=e.length-1;return a(0,i),e},s.sortTiles=function(e){return e.sort(function(e,t){return e.y==t.y?e.x-t.x:e.y-t.y}),e},s.collisionOBB=function(e,t,a){return(!a||a<=0)&&(a=1),e=e.getBounds(),t=t.getBounds(),!(t.x>e.x+e.width*a||t.x+t.width*a<e.x||t.y>e.y+e.height*a||t.y+t.height*a<e.y)},s.keyboard=function(e){var t={};return t.code=e,t.isDown=!1,t.isUp=!0,t.down=void 0,t.up=void 0,t.downHandler=function(e){e.keyCode===t.code&&(t.isUp&&t.down&&t.down(),t.isDown=!0,t.isUp=!1),e.preventDefault()},t.upHandler=function(e){e.keyCode===t.code&&(t.isDown&&t.up&&t.up(),t.isDown=!1,t.isUp=!0),e.preventDefault()},window.addEventListener("keydown",t.downHandler.bind(t),!1),window.addEventListener("keyup",t.upHandler.bind(t),!1),t},s.generateRect=function(e,t,a){var i=new PIXI.Graphics;a?i.beginFill(a):i.beginFill(4095),i.drawRect(0,0,e,t),i.endFill();var o=new PIXI.Sprite(s.renderer.generateTexture(i));return o.anchor={x:.5,y:.5},i.destroy(),o},s.generateEllipse=function(e,t,a,i){var o=new PIXI.Graphics;a?o.beginFill(a):o.beginFill(16773120),o.drawEllipse(0,0,e,t),o.endFill();var n=s.renderer.generateTexture(o),r=new PIXI.Sprite(n);return r.anchor={x:.5,y:.5},o.destroy(),i?n:r},s.centreAnchor=function(e){for(var t=0;t<arguments.length;t++)arguments[t].anchor={x:.5,y:.5}},s.shuffleArr=function(e){for(var t=e.length;t;t--){var a=Math.floor(Math.random()*t),i=[e[a],e[t-1]];e[t-1]=i[0],e[a]=i[1]}return e},s.matrix=function(e,t,a){for(var i=[],s=0;s<e;s++){for(var o=[],n=0;n<t;n++)o[n]=a;i[s]=o}return i},s.array=function(e,t){for(var a=[],i=0;i<e;i++)a.push(t);return a},s.saveGame=function(){var e={highScores:s.highScores,isFirstPlay:s.isFirstPlay};localStorage.setItem(s.game_key,JSON.stringify(e))},s.loadGame=function(){var e=JSON.parse(localStorage.getItem(s.game_key));e&&(s.highScores=e.highScores,s.isFirstPlay=e.isFirstPlay)},s.vectorAdd=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},s.vectorSub=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},s.vectorMulti=function(e,t){return{x:e.x*t.x,y:e.y*t.y}},s.lerp=function(e,t,a){var i=s.vectorSub(t,e);return i.x*=a,i.y*=a,s.vectorAdd(e,i)},s.toPercent=function(e,t){return 100*(t/e)},s.lerp=function(e,t,a,i){t*=1e3;var o={startTime:Date.now(),obj:e,time:t,cb:i,target:a};return o.update=function(){var e=Date.now()-o.startTime;if(e>=o.time)return o.cb&&o.cb(),!0;var t=s.toPercent(o.time,e)/100,a=s.lerp(o.obj,o.target,t/25);o.obj.x=a.x,o.obj.y=a.y},o},s.getFrag=function(e,t){return["precision mediump float;","varying vec2 vTextureCoord;","uniform sampler2D texture;","uniform float distance;","uniform float outerStrength;","uniform float innerStrength;","uniform vec4 glowColor;","uniform float pixelWidth;","uniform float pixelHeight;","vec2 px = vec2(pixelWidth, pixelHeight);","void main(void) {","    const float PI = 3.14159265358979323846264;","    vec4 ownColor = texture2D(texture, vTextureCoord);","    vec4 curColor;","    float totalAlpha = 0.;","    float maxTotalAlpha = 0.;","    float cosAngle;","    float sinAngle;","    for (float angle = 0.; angle <= PI * 2.; angle += "+(1/e/t).toFixed(7)+") {","       cosAngle = cos(angle);","       sinAngle = sin(angle);","       for (float curDistance = 1.; curDistance <= "+t.toFixed(7)+"; curDistance++) {","           curColor = texture2D(texture, vec2(vTextureCoord.x + cosAngle * curDistance * px.x, vTextureCoord.y + sinAngle * curDistance * px.y));","           totalAlpha += (distance - curDistance) * curColor.a;","           maxTotalAlpha += (distance - curDistance);","       }","    }","    maxTotalAlpha = max(maxTotalAlpha, 0.0001);","    ownColor.a = max(ownColor.a, 0.0001);","    ownColor.rgb = ownColor.rgb / ownColor.a;","    float outerGlowAlpha = (totalAlpha / maxTotalAlpha)  * outerStrength * (1. - ownColor.a);","    float innerGlowAlpha = ((maxTotalAlpha - totalAlpha) / maxTotalAlpha) * innerStrength * ownColor.a;","    float resultAlpha = (ownColor.a + outerGlowAlpha);","    gl_FragColor = vec4(mix(mix(ownColor.rgb, glowColor.rgb, innerGlowAlpha / ownColor.a), glowColor.rgb, outerGlowAlpha / resultAlpha) * resultAlpha, resultAlpha);","}"]}},{"./Button":5}],7:[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e,t){var a=void 0;return a="string"==typeof e?new PIXI.Sprite(d["default"].assets.getTexture(e)):e instanceof PIXI.Texture?new PIXI.Sprite(e):new PIXI.Sprite(PIXI.Texture.EMPTY),a.anchor={x:.5,y:0},t&&t.addChild(a),d["default"].displayObjs.push(a),c.push(a),a}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),h=function m(e,t,a){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var s=Object.getPrototypeOf(e);return null===s?void 0:m(s,t,a)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(a)},u=e("./Common"),d=i(u),p=e("../assets/data/config"),_=i(p),c=[],f=function(e){function t(){s(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._running=!1,d["default"].displayObjs=[],e.maxCamEase=1,e.useTweenMax=!0;var a=_["default"];return e._numStars=a.numStars,e._numObs=a.numObs,e._numBalloons=a.numBalloons,e._maxDx=a.maxDx,e._boostPower=a.boostPower,e._gravity=a.gravity,e._bouncePushForward=a.bouncePushForward,e._yBounceFactor=a.yBounceFactor,e.starChance=a.starChance,e.chanceNoneObs=a.chanceNoneObs,e.basicLength=a.basicLength,e.randomLength=a.randomLength,e.randomObsDist=a.randomObsDist,e.minRotation=a.minCannonRot,e.happoBackRotation=a.happoBackRot,e.backTimeFactor=a.happoBackRotTimeFactor,e.happoForwardRotation=a.happoForwRot,e.forwardTimeFactor=a.happoForwRotTimeFactor,e._speedMin=a.happoMinSpeed,e._speedMax=a.happoMaxSpeed,e._bounceHeightFactor=a.bounceHeightFactor,e._speed=e._speedMin,e._starBurstConfig=d["default"].assets.getJSON("particles_pickup"),e.tileSize=1022,e._mapHolder=new PIXI.Container,e._gameHolder=new PIXI.Container,e._uIntHolder=new PIXI.Container,e._back=new PIXI.Container,e._bgHolder=new PIXI.Container,e._midBackHolder=new PIXI.Container,e._midHolder=new PIXI.Container,e._fgHolder=new PIXI.Container,e._particleHolder=new PIXI.Container,e._containers=[],e._floorPosition={x:0,y:p3.View.height+125},e._happo=null,e._startPos={x:0,y:p3.View.height},e._totalDist=0,e._distanceText=null,e._starsText=null,e._stars=[],e._launched=!1,e._starsCollected=0,e._particleEmitters=[],e.objTextures=a.objTextures,e.bounceFactors=a.bounceFactors,e.sounds=a.sounds,e._objects=[],e._oldObjects=[],e._sky=null,e._alien=null,e._trackTarg=new PIXI.Sprite(PIXI.Texture.EMPTY),e._gameHolder.addChild(e._trackTarg),e._blurFilter=[new PIXI.filters.BlurFilter(2,1)],e._shownAlienThisGame=!1,e._finishedIntro=!1,e._clouds=[],e._alienOffset={x:-350},e._rotTween=null,e._happos=[],e._justLaunched=!0,e}return n(t,e),l(t,[{key:"init",value:function(){this._mapHolder.addChild(this._back,this._bgHolder,this._midBackHolder,this._midHolder,this._gameHolder,this._particleHolder,this._fgHolder),this.addChild(this._mapHolder,this._uIntHolder),this._containers=[this._back,this._bgHolder,this._midBackHolder,this._midHolder,this._gameHolder,this._particleHolder,this._fgHolder,this._mapHolder,this._uIntHolder],this.initWorld(),this.initUI(),d["default"].audio.playMusic("music_ready_loop_012"),d["default"].audio.playSound("sfx_ambient_desert_loop_00",!0),this._mapHolder.scale.set(.75),this.start(),this.lastObjHei=this._floorPosition.y;this.randomise(),this._gameHolder.addChild(this._happo)}},{key:"repopulate",value:function(){this._objects=[],this._objects=this._objects.concat(this._oldObjects),this._oldObjects=[],this._objects=d["default"].shuffleArr(this._objects);for(var e in this._objects){var t=this._objects[e];t.x=this._happo.x+8e3*e+(6e3*Math.random()-3e3)+5e3,t.collided=!1}}},{key:"randomise",value:function(){for(var e=this._numStars,t=this._numObs,a=this._numBalloons,i=0;i<e;i++){var s=r("star",this._gameHolder);s.x=this._happo.x+500*i+(75*Math.random()-75)+1e3,s.y=this._floorPosition.y-5e3*Math.random()-75,this._stars.push(s)}for(var o=0;o<t;o++){var n=Math.floor(Math.random()*Object.keys(this.objTextures).length),l=r(this.objTextures[n],this._gameHolder);l.type=this.objTextures[n],o>0?l.x=this._happo.x+8e3*o+(6e3*Math.random()-3e3)+5e3:l.x=this._happo.x+1100,l.y=this._floorPosition.y+50,l.anchor.set(.5,1),l.collided=!1,this._objects.push(l)}for(var h=0;h<a;h++){var u=r("balloons",this._gameHolder);u.type="balloons",u.x=this._happo.x+8e3*h+(6e3*Math.random()-3e3)+5e3,u.y=this._floorPosition.y-1e3*Math.random()-1e3,u.anchor.set(.5,1),u.collided=!1,this._objects.push(u)}for(var d=1;d<=4;d++){var p=Math.floor(Math.random()*Object.keys(this.objTextures).length),_=r(this.objTextures[p],this._gameHolder);_.type=this.objTextures[p],_.x=this._objects[0].x+1600*d,_.y=this._floorPosition.y+50,_.anchor.set(.5,1),_.collided=!1,this._objects.push(_)}}},{key:"updateHappo",value:function(){var e=this;if(this._happo.dx>this._maxDx&&(this._happo.dx=this._maxDx),this._happo.y>this._floorPosition.y-50&&this._happo.dy>0&&(this._happo.dy=-this._happo.dy,this.justBounced=!0,delay(function(){e.justBounced=!1},.15,this),this.changedAnim||this._happo.finalAnim||(this._happo.state.setAnimation(0,"flight"+Math.ceil(9*Math.random()),!0),this.changedAnim=!0,delay(function(){e.changedAnim=!1},3,this)),this._happo.y=this._floorPosition.y-50.1,this.noneSoundPlaying||(d["default"].audio.playSound(this.sounds.none,{onEnd:function(){e.noneSoundPlaying=!1}}),this.noneSoundPlaying=!0),this._dustEmitter.emit=!0,this._happo.dx>=5&&(this._happo.rotSpeed=.2*(Math.random()-.5))),this._happo.dx<=0){if(Math.floor(this._happo.dy)<=1&&Math.ceil(this._happo.dy)>=-1&&this._happo.y>840)return this._running=!1,this._camera.update=function(){},this._gameComplete=!0,void this.gameOver()}else if(this._happo.dx<60&&!this._happo.killRotate){TweenMax.isTweening(this._happo)&&TweenMax.killTweensOf(this._happo),this._happo.killRotate=!0;var t=Math.round(this._happo.rotation/(2*Math.PI))*(2*Math.PI);TweenMax.to(this._happo,1,{rotation:t,ease:Power0.easeNone,onComplete:function(){}})}else this._happo.dx<10&&(this._happo.state.setAnimation(0,"hitground"+Math.ceil(2*Math.random())+"stop"),this._happo.finalAnim=!0);this._happo.dy>60&&(this._happo.killRotate=!1,this._happo.finalAnim=!1),this._happo.dy<1&&this._happo.dy>-1&&this._happo.y>840&&(this._happo.dy=0),this.justBounced&&(this._happo.dx-=.5,this._happo.dy+=2.5),this._happo.dx<0&&(this._happo.dx=0),this._happo.dy-=this._gravity,this._happo.x+=this._happo.dx,this._happo.y+=this._happo.dy,this._happo.killRotate||(this._happo.rotation+=this._happo.rotSpeed),this.extraContainer.position.set(this._happo.x,this._happo.y);for(var a in this._objects)if(!this._objects[a].collided&&d["default"].collisionOBB(this._happo,this._objects[a],.9)){var i=this._objects[a].type,s=this.bounceFactors[i];this._happo.dx+=this._bouncePushForward,this._happo.dy=-s*this._yBounceFactor,this._objects[a].collided=!0,this._happo.rotSpeed=.2*(Math.random()-.5),this.changedAnim||this._happo.finalAnim||(this._happo.state.setAnimation(0,"flight"+Math.ceil(9*Math.random()),!0),this.changedAnim=!0,delay(function(){e.changedAnim=!1},3,this)),d["default"].audio.playSound(this.sounds[i]),TweenMax.to(this._objects[a].scale,.1,{y:.7,x:1.25,ease:Bounce.easeOut,yoyo:!0,repeat:1});break}}},{key:"update",value:function(){var e=this;for(var t in this._clouds)this._clouds[t].x-=.05;for(var a=0;a<this._particleEmitters.length;a++)this._particleEmitters[a]&&this._particleEmitters[a].update(deltaTime);if(this.pauseBtn.enabled=this._finishedIntro,this.pauseBtn.animate=this._finishedIntro,this.pauseBtn.visible=this._finishedIntro,this._dustEmitter.updateOwnerPos(this._happo.x,this._happo.y-45),this._running&&!d["default"].paused&&!this._gameComplete){this.useTweenMax||TWEEN.update(),this._boostReadyEmitter.emit&&this._boostReadyEmitter.updateSpawnPos(this._happo.x+25,this._happo.y),this._camera.update();for(var i=this._happo.toGlobal(new PIXI.Point(.5*p3.View.width,0)),s=0;s<this._stars.length;s++)if(!(this._stars[s].collected||this._starsCollected>=60)&&d["default"].collisionOBB(this._happo,this._stars[s])){this._starsCollected++;var o=52;this._starBtnBack.removeChild(this._graphics),this._graphics.clear(),this._graphics.destroy(),this._graphics=new PIXI.Graphics,this._graphics.pivot.set(.5),this._graphics.x=.5*-o-4.5,this._graphics.y=this._graphicsY,this._graphics.lineStyle(21,16769041),this._currentFill=.5*-Math.PI+2*Math.PI/20*this._starsCollected,20===this._starsCollected&&(this._currentFill+=.05),this._graphics.arc(32,57,o,.5*-Math.PI,this._currentFill),this._starBtnBack.addChild(this._graphics,this._starBtnFront),d["default"].audio.playSound("sfx_star_pickup_00");var n=new PIXI.particles.Emitter(this._gameHolder,[d["default"].assets.getTexture("part_star")],this._starBurstConfig);if(n.updateOwnerPos(this._stars[s].x,this._stars[s].y),n.playOnceAndDestroy(),this._particleEmitters.push(n),this._stars[s].collected=!0,20===this._starsCollected&&d["default"].isFirstPlay){var r=void 0;r=p3.Device.isMobile?"finger":"cursor",this.starFinger.state.setAnimation(0,r+"_tap",!0),this._happo.state.timeScale=0,TweenMax.killTweensOf(this._happo),this._running=!1,d["default"].isFirstPlay=!1,this.starFinger.visible=!0,this.starFinger.x=this._starBtnBack.x-.5*this._starBtnBack.width,this.starFinger.y=this._starBtnBack.y,this._uIntHolder.addChild(this.starFinger)}this._starsCollected>=20&&!this._starParticles.emit&&(d["default"].audio.playSound("sfx_star_jump_ready_00"),this._starParticles.emit=!0,this._starBtnFront.texture=d["default"].assets.getTexture("btn_boost_on"),this._starBtnBack.filters=this.glowFilter,this._starTween=TweenMax.to(this._starBtnFront.scale,.5,{x:1.25,y:1.25,yoyo:!0,repeat:-1,ease:Power0.easeNone})),this._stars[s].oldPos=new PIXI.Point(this._stars[s].x,this._stars[s].y);var l=this._stars[s].getGlobalPosition();l.x-=.5*p3.View.width,this._uIntHolder.addChild(this._stars[s]),this._stars[s].position.set(l.x,l.y),this._stars[s].scale.set(.85),TweenMax.to(this._stars[s].scale,.5,{x:0,y:0,ease:Power0.easeNone}),TweenMax.to(this._stars[s],.5,{x:this._starBtnBack.x,ease:Power0.easeNone}),TweenMax.to(this._stars[s],.5,{y:this._starBtnBack.y,ease:Power1.easeOut,onComplete:function(){e._starBtnBack.scale.set(1),TweenMax.from(e._starBtnBack.scale,.5,{x:.9,y:.9,ease:Bounce.bounceOut}),e._starBtnEmitter.emit=!0}});break}if(this._launched)this._totalDist=Math.round(.007*d["default"].distance(this._startPos.x,0,this._happo.x,0)),this._distanceText.text=""+this._totalDist,this._happo.y<-550?.5===this._mapHolder.scale||TweenMax.isTweening(this._mapHolder)||TweenMax.to(this._mapHolder.scale,.5,{x:.5,y:.5,ease:Power0.easeNone}):.75===this._mapHolder.scale||TweenMax.isTweening(this._mapHolder)||TweenMax.to(this._mapHolder.scale,.25,{x:.75,y:.75,ease:Power0.easeNone});else if(this._inputData){var h=this._inputData.getLocalPosition(this);if(!isNaN(h.x)){var u=this.minRotation,p=-.2,_=d["default"].angle(this._startPos.x-500,this._startPos.y,h.x,h.y);Math.round(_)!==Math.round(this._cannon.rotation)&&d["default"].audio.playSound("sfx_cannon_move_0"+Math.round(2*Math.random())),_>u&&_<p&&(this._cannon.rotation=_,this._cannonEmitter2.rotate(d["default"].rad2deg(_)))}}if(this._launched&&this.updateHappo(),this._trackTarg.x=this._happo.x,this._trackTarg.y=this._happo.y,this._alien.x=this._happo.x+this._alienOffset.x,this.floorTiles.x<this._happo.x-.5*this.floorTiles.width&&(this.floorTiles.x=this.floorTiles.x+.25*this.floorTiles.width),this._happo.dx>0){var c=this.midTiles.toGlobal(new PIXI.Point(.5*p3.View.width,0));c.x<i.x-3*this.tileSize&&(this.midTiles.x=this.midTiles.x+2*this.tileSize),c=this.midBkTiles.toGlobal(new PIXI.Point(.5*p3.View.width,0)),c.x<i.x-3*this.tileSize&&(this.midBkTiles.x=this.midBkTiles.x+2*this.tileSize);var f=this.mountainTiles;for(var m in f){var g=f[m],y=g.toGlobal(new PIXI.Point(.5*p3.View.width,0));if(y.x<i.x-.5*g.width){g.x=f[f.length-1].x+g.width,f.splice(m,1),f.push(g);break}}}for(var w in this._objects)this._objects[w].x<this._happo.x-p3.View.width&&(this._oldObjects.push(this._objects[w]),this._objects.splice(w,1),0===this._objects.length&&this.repopulate());for(var x in this._stars)if(!TweenMax.isTweening(this._stars[x])&&this._stars[x].x<this._happo.x-p3.View.width){var b=this._stars[x];b.x=this._happo.x+500*x+(75*Math.random()-75)+1e3,b.y=this._floorPosition.y-5e3*Math.random()-75,this._stars[x].y>this._floorPosition.y-75&&(this._stars[x].y-=100*Math.random()),this._stars[x].collected=!1,this._stars[x].visible=!0,this._stars[x].scale.set(1),this._gameHolder.addChild(this._stars[x])}var v=void 0,M=void 0;for(var P in this._decos)v=this._decos[P],M=v.toGlobal(new PIXI.Point(.5*p3.View.width,0)),M.x-i.x<-p3.View.width-v.width||(v.x=this._happo.x+Math.random()*p3.View.width*2+2*p3.View.width);for(var T in this._decosMG)v=this._decosMG[T],M=v.toGlobal(new PIXI.Point(.5*p3.View.width,0)),M.x-i.x<-p3.View.width-v.width&&(v.x=v.x+Math.random()*p3.View.width*10+5*p3.View.width);for(var I in this._decosFG)v=this._decosFG[I],M=v.toGlobal(new PIXI.Point(.5*p3.View.width,0)),M.x-i.x<-p3.View.width-v.width&&(v.x=v.x+Math.random()*p3.View.width*5+5*p3.View.width);for(var k in this._decosBG)v=this._decosBG[k],M=v.toGlobal(new PIXI.Point(.5*p3.View.width,0)),M.x-i.x<-p3.View.width-v.width&&(v.x=v.x+Math.random()*p3.View.width*5+5*p3.View.width);return}}},{key:"jumpHappo",value:function(){var e=this,t=4,a=function(){var t=Math.floor(Math.random()*e._happos.length),a=e._happos[t];a.tween.pause(),TweenMax.to(a,.25,{y:a.y-25,yoyo:!0,repeat:1}),TweenMax.to(a.scale,.25,{x:a.scale.x-.05,y:a.scale.y+.05,yoyo:!0,repeat:1,onComplete:function(){a.tween.resume()}})};delay(a,t,this)}},{key:"start",value:function(){var e=this;this.jumpHappo();var t=new PIXI.spine.Spine(d["default"].assets.getSpineData("stunt_happo_standing"));t.skeleton.setToSetupPose(),t.autoUpdate=!0,t.state.setAnimation(0,"run",!0),t.scale.set(.35),t.position.set(this._startPos.x,this._startPos.y),t.y=1.5*p3.View.height-225,t.x=-725,c.push(t),this.starterHappo=t,this._gameHolder.addChild(t,this._cannon,this._canFront),TweenMax.to(t,1,{x:this._cannon.x-210,ease:Power0.easeNone,onComplete:function(){t.state.setAnimation(0,"wave"),d["default"].audio.playSound("sfx_happo_ok_00"),delay(function(){t.state.setAnimation(0,"run"),TweenMax.to(t,.5,{x:t.x+150,ease:Power0.easeNone,onComplete:function(){t.state.setAnimation(0,"idle"),t.x=55,t.y=12,t.scale.set(.2),e._cannon.addChild(t,e._cannonMainFront),t.rotation=d["default"].deg2rad(75),TweenMax.from(t,.5,{x:t.x-45}),TweenMax.from(t.scale,.5,{x:t.scale.x-.2,y:t.scale.y-.2,ease:Power1.easeOut
})}});var a=new PIXI.spine.Spine(d["default"].assets.getSpineData("tutorial"));a.skeleton.setToSetupPose(),a.autoUpdate=!0;var i=void 0;i=p3.Device.isMobile?"finger":"cursor",a.state.setAnimation(0,i+"_aim",!0),a.scale.set(.5),a.position.set(e._startPos.x+350,e._startPos.y-200),e._particleHolder.addChild(a),a.visible=!1,e.starFinger=a,delay(function(){e._launched||(e._cannon.tutLine.visible=!0,e._tutArrow.visible=!0,e._cannon.rotation=d["default"].deg2rad(-45),e.tutTween=TweenMax.to(e._cannon,.9,{rotation:d["default"].deg2rad(-15),ease:Power0.easeNone,yoyo:!0,repeat:2,delay:.5,repeatDelay:1,onComplete:function(){e._running=!0,e._finishedIntro=!0},onRepeat:function(){e._tutArrow.scale.y*=-1}}))},1.5,e),delay(function(){e._cannon.tutLine.visible=!1,e._tutArrow.visible=!1},8,e)},1,e)}})}},{key:"end",value:function(){this._running=!1,this.signals.next.dispatch(this)}},{key:"tweenAlien",value:function(){}},{key:"runCourse",value:function(){var e=this,t=!1,a=this.useTweenMax,i=!0,s=function o(){if(e._objects.length>1){var s=e._objects.length-1,n=e._objects[s],r=n.x-e._happo.x,l=r/e._speed,h=e.lastObjHei-r*e._bounceHeightFactor-75;if(e.lastBounceWasBalloon?(e.lastBounceWasBalloon=!1,t&&console.warn("balloon bounce"),h*=1.5,l*=1.5,"balloons"!==n.type&&(t&&console.log("last balloon in series"),l*=1.25)):"balloons"===n.type&&(t&&console.warn("super bounce to reach balloons"),h-=1250),e.lowLaunch){e.lowLaunch=void 0,h+=350;for(var u=0;u<e._objects.length;u++)e._objects[u].x+=800;for(var p=0;p<e._stars.length;p++)e._stars[p].x+=800}else e._justLaunched&&(e._justLaunched=!1,h+=150);e.highLaunch&&(e.highLaunch=void 0,e._happo.x-=85,e._happo.y-=15),h>e._happo.y&&(console.warn("target height is lower than the happo...."),h=e._happo.y-650),e._rotTween&&e._rotTween.kill(),e._rotTween=TweenMax.to(e._happo,l*e.backTimeFactor,{rotation:d["default"].deg2rad(e.happoBackRotation),ease:Power0.easeNone,onComplete:function(){e._rotTween=TweenMax.to(e._happo,l*e.forwardTimeFactor,{rotation:d["default"].deg2rad(e.happoForwardRotation),ease:Power0.easeNone})}}),a?(e._horTween=TweenMax.to(e._happo,l,{x:n.x,ease:Power0.easeNone,autoKill:!0,force3D:i}),e._upTween=TweenMax.to(e._happo,.5*l,{y:h,ease:Power1.easeOut,onComplete:function(){if(e.relaunched){e.relaunched=!1,e._happo.scale.set(.35);var t="flight"+Math.ceil(9*Math.random());e._happo.state.setAnimation(0,t,!0)}},force3D:i}),e._downTween=TweenMax.to(e._happo,.5*l,{y:e._objects[s].y-e._objects[s].height,ease:Power1.easeIn,delay:.5*l,force3D:i,onComplete:function(){var t=e._objects[s];"pit"!==t.type&&TweenMax.to(t.scale,.1,{y:.7,x:1.25,ease:Bounce.easeOut,yoyo:!0,repeat:1}),"pit"!==e._objects[s].type?(d["default"].audio.playSound(e.sounds[e._objects[s].type]),"none"===e._objects[s].type&&(e._dustEmitter.emit=!1,e._dustEmitter.updateSpawnPos(e._happo.x,e._happo.y-45),delay(function(){e._dustEmitter.emit=!0},.1,e))):"water"===e._objects[s].particle?(e._waterEmitter.updateSpawnPos(e._happo.x,e._happo.y),e._waterEmitter.emit=!0,d["default"].audio.playSound("sfx_bounce_puddle_00")):(e._mudEmitter.updateSpawnPos(e._happo.x,e._happo.y),e._mudEmitter.emit=!0,d["default"].audio.playSound("sfx_bounce_mud_00")),"balloons"===e._objects[s].type&&(e.lastBounceWasBalloon=!0),e.lastObjHei=e._objects[s].y,e._oldObjects.push(e._objects[s]),e._objects.pop(),e._speed*=.85,e._speed<e._speedMin&&(e._speed=e._speedMin);var a="flight"+Math.ceil(9*Math.random());e._happo.state.setAnimation(0,a,!0),e._happo.scale.set(.35),o()}})):(e._horTween=new TWEEN.Tween(e._happo).to({x:n.x},1e3*l).easing(TWEEN.Easing.Linear.None).start(),e._upTween=new TWEEN.Tween(e._happo).to({y:h},l/2*1e3).easing(TWEEN.Easing.Quadratic.Out).start(),e._downTween=new TWEEN.Tween(e._happo).to({y:n.y-n.height},l/2*1e3).easing(TWEEN.Easing.Quadratic.In),e._upTween.onComplete(function(){if(e._downTween.start(),e.relaunched){e.relaunched=!1,e._happo.scale.set(.35);var t="flight"+Math.ceil(9*Math.random());e._happo.state.setAnimation(0,t,!0)}}),e._downTween.onComplete(function(){"pit"!==n.type&&TweenMax.to(obj.scale,.1,{y:.7,x:1.25,ease:Bounce.easeOut,yoyo:!0,repeat:1}),"pit"!==n.type?(d["default"].audio.playSound(e.sounds[e._objects[0].type]),"none"===n.type&&(e._dustEmitter.emit=!1,e._dustEmitter.cleanup(),e._dustEmitter.updateSpawnPos(e._happo.x,e._happo.y-45),delay(function(){e._dustEmitter.emit=!0},.1,e))):"water"===n.particle?(e._waterEmitter.updateSpawnPos(e._happo.x,e._happo.y),e._waterEmitter.emit=!0,d["default"].audio.playSound("sfx_bounce_puddle_00")):(e._mudEmitter.updateSpawnPos(e._happo.x,e._happo.y),e._mudEmitter.emit=!0,d["default"].audio.playSound("sfx_bounce_mud_00")),"balloons"===n.type&&(e.lastBounceWasBalloon=!0),e.lastObjHei=n.y,e._oldObjects.push(e._objects[s]),e._objects.pop(),e._speed*=.85,e._speed<e._speedMin&&(e._speed=e._speedMin);var t="flight"+Math.ceil(9*Math.random());e._happo.state.setAnimation(0,t,!0),e._happo.scale.set(.35),o()}))}else e._happo.rotation=0,e.skid()};s()}},{key:"skid",value:function(){var e=this;TweenMax.killTweensOf(this._happo),this.skidding=!0,this._happo.rotation=0;var t=0,a=4,i=1200,s=function o(){var s=i/e._speed;if(t===.5*a&&Math.random()<.5){e.skidding=!1;var n=1600,l=n*e._bounceHeightFactor,h="",u=!1;Math.random()<.5?h="pond_"+Math.ceil(2*Math.random()):(h="puddle_"+Math.ceil(2*Math.random()),u=!0);var p=r(h,e._gameHolder);p.position.set(e._happo.x+n,e._floorPosition.y-65);var _=n/e._speed;return e._gameHolder.addChild(e._happo),TweenMax.to(e._happo,_,{x:p.x,ease:Power0.easeNone}),TweenMax.to(e._happo,.5*_,{y:l,ease:Power1.easeOut}),void TweenMax.to(e._happo,.5*_,{y:p.y+35,ease:Power1.easeIn,delay:.5*_,onComplete:function(){u?(e._mudEmitter.updateSpawnPos(e._happo.x,e._happo.y),e._mudEmitter.emit=!0,d["default"].audio.playSound("sfx_bounce_mud_00")):(e._waterEmitter.updateSpawnPos(e._happo.x,e._happo.y),e._waterEmitter.emit=!0,d["default"].audio.playSound("sfx_bounce_puddle_00")),e._gameComplete=!0,e._happo.visible=!1,e._camera.update=function(){},e.gameOver()}})}t<a?(TweenMax.to(e._happo,s,{x:e._happo.x+i,ease:Power0.easeNone}),TweenMax.to(e._happo,.5*s,{y:e._happo.y-.25*i,ease:Power1.easeOut}),TweenMax.to(e._happo,.5*s,{y:e._floorPosition.y,ease:Power1.easeIn,delay:.5*s,onComplete:function(){t++,i*=.75,o()}})):TweenMax.to(e._happo,10*s,{x:e._happo.x+10*i,ease:Power0.easeNone,onComplete:function(){e._gameComplete=!0,e._happo.state.setAnimation(0,"hitground"+Math.ceil(2*Math.random())+"stop"),e.skidding=!1,e._camera.update=function(){},e.gameOver()}})};s()}},{key:"initWorld",value:function(){this.initObjects(),this.initCamera(),this.initParticles()}},{key:"initCamera",value:function(){this._camera=new p3.Camera(new PIXI.Point(0,.5*p3.View.height),(!1)),this._camera.trackEase=this.maxCamEase,this._camera.y=this._camera.view.y,this._camera.bounds.height=.75*(p3.View.height-this._camera.view.y+200)-75,d["default"].camera=this._camera,this._camera.addLayer("bg",this._bgHolder,new PIXI.Point(.05,1)),this._camera.addLayer("fg",this._fgHolder,new PIXI.Point(.9,1)),this._camera.addLayer("game",this._gameHolder,new PIXI.Point(.7,1)),this._camera.addLayer("gamePart",this._particleHolder,new PIXI.Point(.7,1)),this._camera.addLayer("mid",this._midHolder,new PIXI.Point(.5,1)),this._camera.addLayer("midBk",this._midBackHolder,new PIXI.Point(.4,1)),this._camera.trackTarget({x:this._startPos.x+250,y:this._startPos.y},!0)}},{key:"addStars",value:function(){for(var e=1;e<this._objects.length;e++)if("pit"!==this._objects[e].type&&(!this._objects[e-1]||"balloons"!==this._objects[e-1].type&&"pit"!==this._objects[e-1].type))if("balloons"===this._objects[e].type){var t=r("star",this._gameHolder);t.x=this._objects[e].x;var a=this._objects[e].x-this._objects[e-1].x;t.x-=.5*a,t.y=this._objects[e].y-1.5*(a*this._bounceHeightFactor-75),t.y>this._floorPosition.y-50&&(t.visible=!1,t.collected=!0),this._stars.push(t),t=r("star",this._gameHolder),t.x=this._objects[e].x,t.x-=.75*a,t.y=this._objects[e].y-1.5*(a*this._bounceHeightFactor*.8-75),t.y>this._floorPosition.y-50&&(t.visible=!1,t.collected=!0),this._stars.push(t),t=r("star",this._gameHolder),t.x=this._objects[e].x,t.x-=.25*a,t.y=this._objects[e].y-1.5*(a*this._bounceHeightFactor*.8-25),t.y>this._floorPosition.y-50&&(t.visible=!1,t.collected=!0),this._stars.push(t)}else if(Math.random()<this.starChance){var i=r("star",this._gameHolder);i.x=this._objects[e].x;var s=this._objects[e].x-this._objects[e-1].x;i.x-=.5*s,i.y=this._objects[e].y-s*this._bounceHeightFactor-50,i.y>this._floorPosition.y-50&&(i.visible=!1,i.collected=!0),this._stars.push(i),i=r("star",this._gameHolder),i.x=this._objects[e].x,i.x-=.75*s,i.y=this._objects[e].y-s*this._bounceHeightFactor*.8-75,i.y>this._floorPosition.y-50&&(i.visible=!1,i.collected=!0),this._stars.push(i),i=r("star",this._gameHolder),i.x=this._objects[e].x,i.x-=.25*s,i.y=this._objects[e].y-s*this._bounceHeightFactor*.8-75,i.y>this._floorPosition.y-50&&(i.visible=!1,i.collected=!0),this._stars.push(i)}}},{key:"initObjects",value:function(){function e(){for(var e=this.basicLength+Math.round(Math.random()*this.randomLength),t=1,a=0,i=void 0,s=void 0,o=0;o<e;o++){if(o>2)if(o<e-4){var n=this._objects[this._objects.length-1].type;"balloons"!==n?"trampoline"===n||"spring"===n||"spring_2"===n||"float"===n?(i=r("balloons",this._gameHolder),i.type="balloons",t=1):(s=Math.floor(Math.random()*(Object.keys(this.objTextures).length+this.chanceNoneObs)),s<Object.keys(this.objTextures).length?(s=Math.floor(Math.random()*Object.keys(this.objTextures).length),i=r(this.objTextures[s],this._gameHolder),i.type=this.objTextures[s],t=1):(i=r(PIXI.Texture.EMPTY,this._gameHolder),i.type="none",i.height=45)):Math.random()<.5?(i=r("balloons",this._gameHolder),i.type="balloons",t=1):(i=r(PIXI.Texture.EMPTY,this._gameHolder),i.type="none",i.height=45)}else i=r(PIXI.Texture.EMPTY,this._gameHolder),i.type="none",i.height=45;else i=r(PIXI.Texture.EMPTY,this._gameHolder),i.type="none",i.height=45;if(o>0){var l=(100*this.bounceFactors[this._objects[this._objects.length-1].type]+Math.round(Math.random()*this.randomObsDist))*t;if(a+=l,!(t>.2))return;if(t-=.25,Math.random()<.25){s=Math.floor(Math.random()*Object.keys(this.objTextures).length);var h=r(this.objTextures[s],this._gameHolder);h.position.set(a-125+200*Math.random(),this._floorPosition.y+50),h.anchor.set(.5,1)}}i.anchor.set(.5,1),i.position.set(a,this._floorPosition.y+50),"balloons"===i.type&&(i.y=Math.random()*-350-150),i.visible=!1,this._objects.push(i)}}function t(){var e=new PIXI.extras.TilingSprite(d["default"].assets.getTexture("ground"),8*this.tileSize,275);e.position.x=-p3.View.width,e.position.y=p3.View.height-75,e.uvTransform.clampMargin=0,e.uvTransform.clampOffset=-1,e.scale.y=1.5;for(var t=[],a=0;a<5;a++){var i=r("mountains_2_bg",this._bgHolder);i.scale.set(2),i.x=-i.width+a*i.width,i.y=.5*p3.View.height-400,t.push(i)}var s=new PIXI.extras.TilingSprite(d["default"].assets.getTexture("mid_ground"),6*this.tileSize,250);s.position.x=-p3.View.width,s.position.y=p3.View.height-115,s.uvTransform.clampMargin=0,s.uvTransform.clampOffset=-1;var o=new PIXI.extras.TilingSprite(d["default"].assets.getTexture("mid_ground_2"),6*this.tileSize,102);o.position.x=-p3.View.width,o.position.y=p3.View.height-180,o.uvTransform.clampMargin=0,o.uvTransform.clampOffset=-1,c.push(e,s,o),this.floorTiles=e,this.mountainTiles=t,this.midTiles=s,this.midBkTiles=o,this._gameHolder.addChild(e),this._midHolder.addChild(s),this._midBackHolder.addChild(o),this._decos=[],this._decosMG=[],this._decosFG=[],this._decosBG=[];for(var n=void 0,l=0;l<2;l++){var h=Math.round(Math.random()+1);n=r("rock_"+h,this._bgHolder),n.x=2e3*l+1e3*Math.random(),n.y=.5*p3.View.height+Math.round(75*Math.random())+75,n.y+=50*Math.random(),n.scale.set(.1*Math.random()+.5),this._decosBG.push(n)}for(var u=0;u<2;u++)n=r("bush_midground",this._bgHolder),n.x=2e3*u+1e3*Math.random(),n.y=.5*p3.View.height+Math.round(75*Math.random())+75,n.y+=50*Math.random(),n.scale.set(.1*Math.random()+.5),this._decosBG.push(n);for(var p=0;p<2;p++)n=r("tree_midground",this._bgHolder),n.x=2e3*p+1e3*Math.random(),n.y=.5*p3.View.height+Math.round(75*Math.random())+75,n.y-=50*Math.random(),n.scale.set(.1*Math.random()+.5),this._decosBG.push(n);for(var _=0;_<1;_++)n=r("rock_fg",this._fgHolder),n.anchor.y=1,n.x=2e3*_+1e3*Math.random(),n.y=p3.View.height+n.height,n.scale.set(.25*Math.random()+.75),n.fg=!0,this._decosFG.push(n);for(var f=0;f<1;f++){var m=Math.round(Math.random()+1);n=r("rock_"+m,this._midHolder),n.x=2e3*f+1e3*Math.random(),n.y=.5*p3.View.height+Math.round(75*Math.random())+200,n.scale.set(.25*Math.random()+.75),this._decosMG.push(n)}for(var g=[],y=0;y<1;y++)n=r("tree_midground",this._midBackHolder),n.x=2e3*y+1e3*Math.random(),n.y=.5*p3.View.height+315,n.anchor.set(.5,1),n.scale.set(2),g.push(n),this._decosMG.push(n);for(var w=0;w<1;w++)n=r("bush_midground",this._midBackHolder),n.x=2e3*w+1e3*Math.random(),n.y=.5*p3.View.height+150,g.push(n),this._decosMG.push(n);g=d["default"].shuffleArr(g);for(var x=0;x<g.length;x++)this._midBackHolder.addChild(g[x]);for(var b=0;b<8;b++)n=r("cloud_b_"+Math.ceil(3*Math.random()),this._bgHolder),n.x=2e3*b+1e3*Math.random(),n.y=.5*p3.View.height-650-100*Math.random(),n.scale.set(.25*Math.random()+1),this._clouds.push(n),g.push(n),this._decosBG.push(n);for(var v=0;v<8;v++)n=r("cloud_m_"+Math.ceil(3*Math.random()),this._bgHolder),n.x=2e3*v+1e3*Math.random(),n.y=.5*p3.View.height-100-200*Math.random(),n.scale.set(.25*Math.random()+.75),this._clouds.push(n),g.push(n),this._decosBG.push(n);for(var M=0;M<8;M++)n=r("cloud_b_"+Math.ceil(3*Math.random()),this._bgHolder),n.x=1e3*M-1e3*Math.random(),n.y=.5*p3.View.height-1e3,n.scale.set(1.75*Math.random()+.75),this._clouds.push(n),g.push(n),this._decosBG.push(n);for(var P=0;P<8;P++)n=r("cloud_m_"+Math.ceil(3*Math.random()),this._bgHolder),n.x=2e3*P-1e3*Math.random(),n.y=.5*p3.View.height-2e3,n.scale.set(1.75*Math.random()+.75),this._clouds.push(n),g.push(n),this._decosBG.push(n);for(var T=0;T<8;T++)n=r("cloud_m_"+Math.ceil(3*Math.random()),this._bgHolder),n.x=2e3*T-1e3*Math.random(),n.y=.5*p3.View.height-2500-1e3*Math.random(),n.scale.set(1.75*Math.random()+.75),this._clouds.push(n),g.push(n),this._decosBG.push(n);for(var I=0;I<8;I++)n=r("cloud_b_"+Math.ceil(3*Math.random()),this._bgHolder),n.x=250*I+250*Math.random(),n.y=.5*p3.View.height-3e3-2e3*Math.random(),n.scale.set(1.75*Math.random()+.75),this._clouds.push(n),g.push(n),this._decosBG.push(n);for(var k=0;k<8;k++)n=r("cloud_m_"+Math.ceil(3*Math.random()),this._bgHolder),n.x=250*k+250*Math.random(),n.y=.5*p3.View.height-3e3-500*Math.random(),n.scale.set(1.75*Math.random()+.75),this._clouds.push(n),g.push(n),this._decosBG.push(n);for(var H=0;H<8;H++)n=r("cloud_b_"+Math.ceil(3*Math.random()),this._gameHolder),n.x=250*H+250*Math.random(),n.y=.5*p3.View.height-1200+350*Math.random(),n.scale.set(2.75*Math.random()+1.75),n.alpha=.5,g.push(n),this._decos.push(n);for(var j=0;j<8;j++)n=r("cloud_m_"+Math.ceil(3*Math.random()),this._fgHolder),n.x=250*j+250*Math.random(),n.y=.5*p3.View.height-1200+350*Math.random(),n.scale.set(2.75*Math.random()+1.75),n.alpha=.5,g.push(n),this._decosFG.push(n),n.fg=!0;for(var S=0;S<10;S++)n=this.createHappo(),n.x=1e4*S+125,n.shadow.position.set(n.x,n.y-30),"ballerina"===n.type?n.shadow.y-=10:"worker"===n.type&&(n.shadow.y-=5)}function a(){var e=this,t=r("sky");d["default"].displayObjs.pop(),t.width=2*p3.View.width,t.height=2.5*p3.View.height,t.y-=20,t.interactive=!0,t.hitArea=new PIXI.Rectangle(0,0,p3.View.width,p3.View.height),t.mousedown=t.touchstart=this.inputDown.bind(this),t.mouseup=t.mouseupoutside=t.touchend=t.touchendoutside=function(){if(!(e._launched||d["default"].paused||e.justUnpaused||!e._running||e.skidding||e._gameComplete)&&e._inputData){d["default"].audio.playSound("sfx_happo_fling_0"+Math.round(Math.random())),d["default"].audio.playSound("sfx_cannon_fire_0"+Math.round(Math.random())),e.starterHappo.visible=!1,e._starBtnBack.visible=!0,e._cannonEmitter.emit=!0,e._cannonEmitter2.emit=!0;var t=e._cannon.rotation;t<-.7&&(e._happo.x-=85,e._happo.y-=25);var a=e._inputData.getLocalPosition(e),i=d["default"].distance(e._happo.x,e._happo.y,a.x,a.y);TweenMax.from(e._happo.scale,.25,{x:.15,y:.15,ease:Power1.easeOut}),e._happo.rotation=t,e._happo.visible=!0,e._inputData=null,e._cannon.rotation=t,e._launched=!0,delay(function(){e._camera.trackTarget(e._trackTarg),e._camera.trackEase=.01,TweenMax.to(e._camera,.5,{trackEase:e.maxCamEase,ease:Power0.easeNone})},.25);var s=Math.cos(t)*i,o=Math.sin(t)*i;e._happo.dx=s/10,e._happo.dy=o/10,e._gameHolder.addChild(e._cannon)}},this._back.addChild(t),this._sky=t}t=t.bind(this),e=e.bind(this),a=a.bind(this),t(),a();var i=r("banner_start",this._gameHolder);i.y=.5*p3.View.height+25,i.x=-325;var s=void 0;s="ar"===d["default"].language||"ru"===d["default"].language||"tr"===d["default"].language?p3.simpleText(d["default"].copy.start[d["default"].language],"arial",120,null,13767682):new PIXI.extras.BitmapText(d["default"].copy.start[d["default"].language],{font:"95px Ziclets",align:"center",tint:13767682}),s.anchor.set(.5),s.x=-90,s.y=110,s.skew.y=d["default"].deg2rad(2),s.scale.x=.45,s.rotation=d["default"].deg2rad(4),i.addChild(s),"en"!==d["default"].language&&(s.scale.set(.25),s.y+=25,s.x-=5,s.rotation=d["default"].deg2rad(6));var o=r("cannon_back",this._gameHolder),n=r("cannon_main",this._gameHolder),l=r("cannon_main_2",n),h=r("cannon_front",this._gameHolder);o.position.set(this._startPos.x-130,this._startPos.y-75),n.position.set(this._startPos.x-175,this._startPos.y+25),h.position.set(this._startPos.x-130,this._startPos.y-75),o.scale.set(1.5),n.scale.set(1.5),h.scale.set(1.5);var u=r("dotted_line",n);u.anchor.set(0,.5),u.visible=!1,u.position.set(75,0),n.tutLine=u;var p=r("hand_big",u);p.anchor.set(0,.5),p.scale.set(.75),p.x=u.width,p.y=.5*p.height;var _=r("tutorial_arrow",this._gameHolder);_.anchor.set(.5),_.y=p3.View.height-75,_.x=.5*p3.View.width+125,_.scale.y=-1,_.visible=!1,this._tutArrow=_,this._alien=new PIXI.spine.Spine(d["default"].assets.getSpineData("alien")),this._alien.skeleton.setToSetupPose(),this._alien.autoUpdate=!0,this._alien.state.setAnimation(0,"idle_0",!0),this._alien.y=-1550,this._alien.x=125,this._alien.scale.set(.5),this._gameHolder.addChild(this._alien),c.push(this._alien),this._happo=new PIXI.spine.Spine(d["default"].assets.getSpineData("stunt_happo_flying")),this._happo.skeleton.setToSetupPose(),this._happo.autoUpdate=!0,this._happo.state.setAnimation(0,"flight"+Math.ceil(9*Math.random()),!0),this._happo.scale.set(.35),this._happo.position.set(this._startPos.x,this._startPos.y),this._happo.visible=!1,this._gameHolder.addChild(this._happo),this._cannon=n,this._cannonMainFront=l,this._canFront=h,n.anchor.set(.4,.5),l.anchor.set(.4,.5),this._happo.state.data.defaultMix=.5,this._happo.killRotate=!1,this._happo.finalAnim=!1,this._happo.dx=0,this._happo.dy=0,this._happo.rotSpeed=0,this.glowFilter=[new PIXI.filters.GlowFilter(10,0,0,16777215,.25)],TweenMax.to(this.glowFilter[0].uniforms,.5,{outerStrength:4,yoyo:!0,repeat:-1,ease:Power0.easeNone}),c.push(this._happo),TweenMax.to(n,3,{rotation:d["default"].deg2rad(-30),ease:Elastic.easeOut,delay:.5})}},{key:"inputDown",value:function(e){d["default"].paused||this.justUnpaused||this._gameComplete||(this._cannon.tutLine.visible&&(this._happo.state.timeScale=1,TweenMax.resumeAll(),d["default"].paused=!1,this.starFinger.visible=!1,this._cannon.tutLine.visible=!1,this._tutArrow.visible=!1,this._running=!0,this.tutTween&&this.tutTween.kill(),this._finishedIntro=!0),this.starFinger&&this.starFinger.visible&&(this.starFinger.visible=!1,this._running=!0,this._happo.state.timeScale=1),this._inputData=e.data,this._launched&&this._starsCollected>19&&(Math.random()>.5?d["default"].audio.playSound("sfx_happos_ooh_00"):d["default"].audio.playSound("sfx_happos_cheer_00"),this.relaunch(),e.target===this._starBtnBack&&(d["default"].audio.playSound("sfx_btn_press_00"),TweenMax.to(this._starBtnBack.scale,.25,{x:.9,y:.9,yoyo:!0,repeat:1,ease:Power0.easeNone}))))}},{key:"fixCourse",value:function(){for(var e=this._objects.length-2;e<this._objects.length;e++)this._objects[e].x=this._objects[e-1].x+600}},{key:"createHappo",value:function(){var e=r("shadow",this._gameHolder),t=Math.ceil(4*Math.random()),a=r("happo_"+t,this._gameHolder);return a.anchor.y=1,a.scale.set(.7),a.y=p3.View.height+a.height-115,a.tween=TweenMax.to(a.scale,1,{x:a.scale.x+.02,y:a.scale.y-.02,ease:Power0.easeNone,yoyo:!0,repeat:-1,repeatDelay:.15+.2*Math.random,delay:Math.random()}),this._happos.push(a),a.shadow=e,e.scale.set(.5),4===t?a.type="ballerina":1===t&&(a.type="worker"),a}},{key:"relaunch",value:function(){var e=this;this._boostReadyEmitter.emit=!0,delay(function(){e._boostReadyEmitter.emit=!1},2,this),this._happo.finalAnim=!1,this._happo.killRotate=!1,this._happo.dy>0&&(this._happo.dy=0),this._happo.dx+=.75*this._boostPower,this._happo.dy-=this._boostPower,this._starsCollected-=20,this._starsCollected>=20||(this._starBtnFront.texture=d["default"].assets.getTexture("btn_boost_off"),this._starTween.kill(),this._starBtnFront.scale.set(1),this._starParticles.emit=!1,this._boostReadyEmitterHappo.emit=!1,this._starBtnBack.filters=null)}},{key:"relaunchOld",value:function(){var e=55*this._starsCollected;this._happo.state.setAnimation(0,"flightboost",!0),this._happo.scale.set(.3),this._happo.rotation=d["default"].deg2rad(-25),this.relaunched=!0,this._objects.length<4?(console.log("extending course"),this.extendObstacles(10+Math.ceil(5*Math.random()))):(console.log("popping front obs"),this._objects.pop(),this._objects.pop()),this._speed=this._speedMax;for(var t=0;t<this._objects.length;t++)this._objects[t].x+=e;for(var a=1;a<this._objects.length;a++)this._objects[a].x+=800;for(var i=0,s=0;s<this._stars.length;s++)if(!this._stars[s].collected){i=s;break}for(var o=i+5;o<this._stars.length;o++)this._stars[o].x+=e+800;this._starsCollected-=20,this._starsText.text=""+this._starsCollected,this._fillMask.x=-225+7.5*(this._starsCollected%20),this._starsCollected>=20?this._fillMask.x=-75:(this._starTween.kill(),this._starIcon.scale.set(1),this._starParticles.emit=!1,this._boostReadyEmitter.emit=!1),this.runCourse()}},{key:"extendObstacles",value:function(e){this._objects=[];for(var t=e,a=this._happo.x,i=void 0,s=void 0,o=0;o<t;o++){if(o>1)if(o<t-4){var n=this._objects[this._objects.length-1].type;"balloons"!==n?"trampoline"===n||"spring"===n||"spring_2"===n||"float"===n?(i=r("balloons",this._gameHolder),i.type="balloons"):(s=Math.floor(Math.random()*(Object.keys(this.objTextures).length+this.chanceNoneObs)),s<Object.keys(this.objTextures).length?(s=Math.floor(Math.random()*Object.keys(this.objTextures).length),i=r(this.objTextures[s],this._gameHolder),i.type=this.objTextures[s]):(i=r(PIXI.Texture.EMPTY,this._gameHolder),i.type="none",i.height=45)):Math.random()<.35?(i=r("balloons",this._gameHolder),i.type="balloons"):(i=r(PIXI.Texture.EMPTY,this._gameHolder),i.type="none",i.height=45)}else i=r(PIXI.Texture.EMPTY,this._gameHolder),i.type="none",i.height=45;else i=r("balloons",this._gameHolder),i.type="balloons";if(o>0){var l=100*this.bounceFactors[this._objects[this._objects.length-1].type]+Math.round(Math.random()*this.randomObsDist);a+=l}i.anchor.set(.5,1),i.position.set(a,this._floorPosition.y+50),"balloons"===i.type&&(i.y=-450-350*Math.random()),this._objects.push(i)}this.addStars(),this._objects.reverse()}},{key:"initParticles",value:function(){var e=d["default"].assets.getJSON("particles_cannon_1");this._cannonEmitter=new PIXI.particles.Emitter(this._gameHolder,[d["default"].assets.getTexture("smoke")],e),this._cannonEmitter.emit=!1,this._cannonEmitter.updateOwnerPos(this._cannon.x,this._cannon.y),this._particleEmitters.push(this._cannonEmitter),e=d["default"].assets.getJSON("particle_cannon_directional_blast"),this._cannonEmitter2=new PIXI.particles.Emitter(this._gameHolder,[d["default"].assets.getTexture("smoke")],e),this._cannonEmitter2.emit=!1,this._cannonEmitter2.updateOwnerPos(this._cannon.x,this._cannon.y),this._particleEmitters.push(this._cannonEmitter2),e=d["default"].assets.getJSON("particles_splash_water");var t=new PIXI.particles.Emitter(this._particleHolder,[d["default"].assets.getTexture("particle_splash_water_01"),d["default"].assets.getTexture("particle_splash_water_02"),d["default"].assets.getTexture("particle_splash_water_03"),d["default"].assets.getTexture("particle_splash_water_04")],e);t.emit=!1,this._waterEmitter=t,e=d["default"].assets.getJSON("particles_splash_mud"),t=new PIXI.particles.Emitter(this._particleHolder,[d["default"].assets.getTexture("particle_splash_mud_01"),d["default"].assets.getTexture("particle_splash_mud_02"),d["default"].assets.getTexture("particle_splash_mud_03")],e),t.emit=!1,this._mudEmitter=t,e=d["default"].assets.getJSON("particles_character_boost_ready"),t=new PIXI.particles.Emitter(this._gameHolder,[d["default"].assets.getTexture("part_star")],e),t.emit=!1,this._boostReadyEmitter=t,e=d["default"].assets.getJSON("particles_dust_ground"),t=new PIXI.particles.Emitter(this._gameHolder,[d["default"].assets.getTexture("smoke")],e),t.emit=!1,this._dustEmitter=t;var a=r(PIXI.Texture.EMPTY,this._gameHolder);a.anchor.set(.5);var i=r(PIXI.Texture.EMPTY,this._gameHolder);i.anchor.set(.5),a.addChild(i),i.scale.set(2),this.extraContainer=a,this._gameHolder.addChild(a),e=d["default"].assets.getJSON("particles_boostmeter"),t=new PIXI.particles.Emitter(i,[d["default"].assets.getTexture("part_star")],e),t.emit=!1,this._boostReadyEmitterHappo=t,this._particleEmitters.push(this._waterEmitter,this._mudEmitter,this._boostReadyEmitter,this._dustEmitter)}},{key:"initUI",value:function(){var e=this,t=function(){var t=r("panel_help",e._uIntHolder);t.anchor.y=.5,t.y=.5*p3.View.height;var a=function(){d["default"].isMute=!d["default"].isMute,d["default"].audio.mute(d["default"].isMute),d["default"].isMute?e.soundBtn.icon.texture=d["default"].assets.getTexture("icon_sound_off"):e.soundBtn.icon.texture=d["default"].assets.getTexture("icon_sound_on")};e.soundBtn=d["default"].createButton(.5*p3.View.width-75,.5*-p3.View.height+65,"small",a,e,t,"icon_sound_off"),d["default"].isMute||(e.soundBtn.icon.texture=d["default"].assets.getTexture("icon_sound_on"));var i=function(){e.signals.home.dispatch(e)},s=(d["default"].createButton(.5*-p3.View.width+75,.5*-p3.View.height+65,"small",i,e,t,"icon_home"),d["default"].createButton(.5*p3.View.width-100,.5*p3.View.height-100,"big",e.pauseClick,e,t,"icon_play"),d["default"].createButton(.5*-p3.View.width+100,.5*p3.View.height-100,"big",function(){e.signals.previous.dispatch(e)},e,t,"icon_replay"),void 0);s=p3.Device.isMobile?[r("tutorial_fr_1_mobile",t),r("tutorial_fr_2_mobile",t),r("tutorial_fr_3",t)]:[r("tutorial_fr_1_desktop",t),r("tutorial_fr_2_desktop",t),r("tutorial_fr_3",t)];for(var o in s)s[o].anchor.set(.5),s[o].visible=!1;for(var n=[],l=[],h=0;h<3;h++){var u=void 0;u=p3.Device.isMobile?"_mob":"_desk";var p={fontFamily:"arial",fontSize:"27px",fill:6986709,align:"center",wordWrap:!0,wordWrapWidth:t.width-290};"en"!==d["default"].language&&(p.fontSize="22px");var _=void 0;_=new PIXI.Text(d["default"].copy["help_fr_"+(h+1)+"_desk"][d["default"].language],p),_.anchor.set(.5),n.push(_),_.y=.5*t.height-110,_.visible=!1;var c=r("pip_on",t);c.y=.5*t.height-38,c.visible=!1,c.anchor.set(.5),l.push(c),t.addChild(_)}l[0].x=-55,l[0].visible=!0,l[l.length-1].x=55;var f=0,m=function(e){s[f].visible=!1,n[f].visible=!1,l[f].visible=!1,f+=e,f>s.length-1&&(f=0),f<0&&(f=s.length-1),s[f].visible=!0,n[f].visible=!0,l[f].visible=!0};m(0);var g=r("panel_arrow_holder_l",t),y=r("panel_arrow_holder_r",t),w=d["default"].createButton(.5*-t.width+75,45,"small",function(){m(-1)},e,t,"icon_next");w.icon.scale.x=-1;var x=d["default"].createButton(.5*t.width-75,45,"small",function(){m(1)},e,t,"icon_next");e.pauseScreen=t,t.visible=!1,g.x=w.x-2,y.x=x.x+2,g.y=y.y=x.y-.5*w.height-15,e.leftPanel=g,e.leftBtn=w},a=function(){var t=r("btn_boost_bg",e._uIntHolder);t.x=.5*-p3.View.width+.5*t.width+25,t.y=p3.View.height-t.height-25,t.anchor.set(.5),t.visible=!1;var a=new PIXI.particles.Emitter(e._uIntHolder,[d["default"].assets.getTexture("part_star")],e._starBurstConfig);a.updateOwnerPos(t.x,t.y),a.emit=!1,e._starBtnEmitter=a,e._particleEmitters.push(a);var i=52;e._graphics=new PIXI.Graphics,e._graphics.pivot.set(.5),e._graphics.x=.5*-i-5,e._graphics.y=.5*-t.height+25,e._graphicsY=e._graphics.y,e._graphics.lineStyle(21,16769041),e._currentFill=.5*-Math.PI,e._graphics.arc(32,57,i,.5*-Math.PI,e._currentFill),t.addChild(e._graphics);var s=r("btn_boost_off",t);s.anchor.set(.5,.5),e._starBtnFront=s,e._starBtnBack=t,e._starBtnBack.interactive=!0,e._starBtnBack.mousedown=e._starBtnBack.touchstart=e.inputDown.bind(e);var o=d["default"].assets.getJSON("particles_boostmeter"),n=new PIXI.particles.Emitter(t,[d["default"].assets.getTexture("part_star")],o);n.emit=!1,e._starParticles=n,e._particleEmitters.push(n);var l=r("distance_panel",e._uIntHolder);l.x=.5*-p3.View.width+.5*l.width+15,l.y=15,e._distanceText=new PIXI.Text(""+e._starsCollected,{fontFamily:"arial",fontSize:"33px",fill:"white"}),e._distanceText.anchor.set(.5),e._distanceText.x=.5*l.width-55,e._distanceText.y=.5*l.height-2,l.addChild(e._distanceText),e._distPanel=l};a(),t(),this.pauseBtn=d["default"].createButton(.5*p3.View.width-75,65,"small",this.pauseClick,this,this._uIntHolder,"icon_pause")}},{key:"pauseClick",value:function(){var e=this;this.pauseBtn.interactive=!this.pauseBtn.interactive,this._distPanel.visible=!this._distPanel.visible,d["default"].paused=!d["default"].paused,this._launched&&(this._starBtnBack.visible=!this._starBtnBack.visible),d["default"].paused?(this._alien.state.timeScale=0,this.pauseBtn.visible=!1,this.pauseBtn.renderable=!1,this.pauseScreen.visible=!0,this.starterHappo.autoUpdate=!1,this._running=!1,this._happo.autoUpdate=!1,TweenMax.pauseAll(),this._mapHolder.filters=this._blurFilter,this._distanceText.visible=!1,this._sky.interactive=!1):(this._alien.state.timeScale=1,this.pauseBtn.visible=!0,this.pauseBtn.renderable=!0,this.pauseScreen.visible=!1,this.starterHappo.autoUpdate=!0,this._running=!0,this._happo.autoUpdate=!0,TweenMax.resumeAll(),this._mapHolder.filters=null,this._distanceText.visible=!0,this._sky.interactive=!0,this.justUnpaused=!0,delay(function(){e.justUnpaused=!1},1.5,this))}},{key:"gameOver",value:function(){var e=this;TweenMax.killAll(),d["default"].audio.stopMusic("music_ready_loop_012"),d["default"].audio.stopSound("sfx_ambient_desert_loop_00"),d["default"].audio.playSound("music_results_short_00"),d["default"].flyDist=this._totalDist,this._starParticles.emit=!1,this._boostReadyEmitter.emit=!1;for(var t=0;t<3;t++)if(this._totalDist>d["default"].highScores[t]){d["default"].highScores.splice(t,0,this._totalDist),d["default"].highScores.pop(),d["default"].sort(d["default"].highScores,!0),d["default"].saveGame();break}delay(function(){e.end()},2,this)}},{key:"destroy",value:function(){TweenMax.killAll();for(var e=0;e<c.length;e++)c[e].destroy(),c[e]=null,delete c[e];c.length=0;for(var a=0;a<this._containers.length;a++)this._containers[a].destroy(),this._containers[a]=null,delete this._containers[a];this._containers.length=0;for(var i=0;i<this._particleEmitters.length;i++)this._particleEmitters[i].destroy(),this._particleEmitters[i]=null,delete this._particleEmitters[i];this._particleEmitters.length=0,d["default"].renderer.plugins.sprite.sprites.length=0,h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"resize",value:function(){this.x=.5*p3.View.width;var e=this._sky;e.width=2*p3.View.width,e.height=2.5*p3.View.height;var t=this._distPanel;t.x=.5*-p3.View.width+.5*t.width+15,this.pauseBtn.x=.5*p3.View.width-75}}]),t}(p3.Scene);a["default"]=f},{"../assets/data/config":1,"./Common":6}],8:[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function s(){this.loaded=0,this._bar=null,this._barBack=null,this._bg=null,this._text=null,this._percent=null,
this._cheatyHax="%",p3.Scene.call(this)}Object.defineProperty(a,"__esModule",{value:!0});var o=e("./Common"),n=i(o);a["default"]=s,s.prototype=Object.create(p3.Scene.prototype),s.prototype.constructor=s,s.prototype.init=function(){this._bg=new PIXI.Sprite(n["default"].assets.getTexture("preloader_bg")),this.addChild(this._bg);var e=new PIXI.Graphics;e.beginFill("es"==n["default"].language?15850535:8859527),e.drawRect(0,0,n["default"].STAGE_WIDTH,n["default"].STAGE_HEIGHT),e.endFill(),this.addChild(e);var t=new PIXI.Container;t.x=.5*n["default"].STAGE_WIDTH,t.y=Math.floor(.5*p3.View.height)+50,this.addChild(t);for(var a=[],i=1;i<10;i++)a.push(n["default"].assets.getTexture("loader_animation000"+i));if(a.push(n["default"].assets.getTexture("loader_animation0010")),this._logoAnimation=new PIXI.extras.AnimatedSprite(a),this._logoAnimation.animationSpeed=.4,this._logoAnimation.gotoAndStop(0),this._logoAnimation.stop(),this._logoAnimation.loop=!1,this._logoAnimation.anchor.x=.5,this._logoAnimation.anchor.y=1,this._logoAnimation.x+=50,this._logoAnimation.y-=20,t.addChild(this._logoAnimation),this._logoAnimation.play(),this._bar=new PIXI.Sprite(n["default"].assets.getTexture("preloader_bar")),this._bar.anchor.y=.5,this._bar.x-=.5*this._bar.width,"es"==n["default"].language){var s=new PIXI.Graphics;s.beginFill(54238),s.x=this._bar.x,s.y=this._bar.y,s.drawRect(0,-this._bar.height/2,this._bar.width,this._bar.height),this._bar=s}if(this._bar.scale.x=0,t.addChild(this._bar),this._barOverlay=new PIXI.Sprite(n["default"].assets.getTexture("es"==n["default"].language?"preloader_overlay_es":"preloader_overlay")),this._barOverlay.anchor.y=.5,this._barOverlay.anchor.x=.5,t.addChild(this._barOverlay),this._text=new PIXI.Text("0%",{fontFamily:"Arial",fontSize:"38px",fill:"es"==n["default"].language?"#00d3de":"#FFFFFF"}),this._text.anchor.x=.5,this._text.position.y+=50,t.addChild(this._text),"es"==n["default"].language){this._logoAnimation.visible=!1;var o=new PIXI.Sprite(n["default"].assets.getTexture("preloader_es"));o.anchor=new PIXI.Point(.5,1),o.x=0,o.y=this._logoAnimation.y-40,t.addChild(o)}},s.prototype.destroy=function(){p3.Scene.prototype.destroy.call(this)},s.prototype.appear=function(){this.animateIn()},s.prototype.show=function(){},s.prototype.animateIn=function(e,t){},s.prototype.animateOut=function(e,t){},s.prototype.resize=function(){this.x=.5*(p3.View.width-n["default"].STAGE_WIDTH)},s.prototype.update=function(){var e=0;"es"==n["default"].language&&(e=5),this._bar.width=this._barOverlay.width*this.loaded-e,this._bar.width>this._barOverlay.width-e&&(this._bar.width=this._barOverlay.width-e),this._text.text=""+Math.round(100*this.loaded)+"%",Math.round(100*this.loaded)>100&&(this._text.text="100%")}},{"./Common":6}],9:[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e,t){var a=void 0;return"string"==typeof e?a=new PIXI.Sprite(d["default"].assets.getTexture(e)):e instanceof PIXI.Texture&&(a=new PIXI.Sprite(e)),a.anchor={x:.5,y:0},t&&t.addChild(a),a}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),h=function c(e,t,a){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var s=Object.getPrototypeOf(e);return null===s?void 0:c(s,t,a)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(a)},u=e("./Common"),d=i(u),p=[],_=function(e){function t(){s(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._bg=null,e._primaryHolder=new PIXI.Container,e._uiHolder=new PIXI.Container,e._particles=[],e._happos=[],e._containers=[],e}return n(t,e),l(t,[{key:"init",value:function(){d["default"].loadGame(),this.addChild(this._primaryHolder,this._uiHolder),this._containers=[this._primaryHolder,this._uiHolder],this._bg=r("bg",this._primaryHolder),this.initDisp(),this.initUI(),d["default"].audio.playSound("music_results_long_00"),d["default"].audio.playSound("sfx_ambient_desert_loop_00",!0),this.start()}},{key:"start",value:function(){this._running=!0,this.jumpHappo()}},{key:"end",value:function(){this._running=!1,this.signals.next.dispatch(this)}},{key:"initDisp",value:function(){var e=this.createHappo("happo_3",this._primaryHolder),t=r("banner",this._primaryHolder);t.x=168,t.y=160;var a=this.createHappo("happo_1",this._primaryHolder),i=this.createHappo("happo_4",this._primaryHolder),s=this.createHappo("happo_5",this._primaryHolder);s.x=459,s.y=111;var o=r("shadow",this._primaryHolder),n=this.createHappo("stunt_endgame",this._primaryHolder);n.x=359,n.y=p3.View.height-35,o.anchor.set(.5,1),o.position.set(n.x+15,n.y+15),a.x=-376,a.y=p3.View.height-15,i.x=575,i.y=p3.View.height-25,e.x=-150,e.y=p3.View.height-55;var l=e;l.shadow.position.set(l.x,l.y+5),l=a,l.shadow.position.set(l.x,l.y+5),l=i,l.shadow.position.set(l.x,l.y+5);var h=d["default"].flyDist.toString().length>=5,u=new PIXI.extras.BitmapText(d["default"].copy.well_done[d["default"].language],{font:"55px Ziclets",align:"center",tint:2709665}),p=new PIXI.extras.BitmapText(d["default"].copy.distance[d["default"].language],{font:"35px VAGRounded-Light",align:"center",tint:2709665}),_=new PIXI.extras.BitmapText(""+d["default"].flyDist+" M.",{font:"75px Ziclets",align:"center",tint:13767682}),c=new PIXI.extras.BitmapText(d["default"].copy.best_score[d["default"].language]+" "+d["default"].highScores[0]+" M.",{font:"35px VAGRounded-Light",align:"center",tint:2709665});u.anchor.set(.5),p.anchor=_.anchor=c.anchor=u.anchor,t.addChild(u,p,_,c),u.x=p.x=_.x=c.x=-150,u.y=75,p.y=u.y+75,_.y=p.y+35,c.y=_.y+85;var f=r("star",t),m=r("star",t);f.anchor.set(.5),m.anchor.set(.5),f.y=m.y=215,f.x=-300,f.x-=25,m.x+=25,h&&(f.x-=25,m.x+=25);var g=d["default"].assets.getJSON("particles_gameover"),y=new PIXI.particles.Emitter(this._uiHolder,[d["default"].assets.getTexture("part_1"),d["default"].assets.getTexture("part_2"),d["default"].assets.getTexture("part_3"),d["default"].assets.getTexture("part_4"),d["default"].assets.getTexture("part_5"),d["default"].assets.getTexture("part_6"),d["default"].assets.getTexture("part_7")],g);y.updateSpawnPos(25,200),this._particles.push(y),y.emit=!0}},{key:"initUI",value:function(){var e=this,t=function(){e.signals.next.dispatch(e)},a=(d["default"].createButton(0,.5*p3.View.height+225,"big",t,this,this._uiHolder,"icon_replay"),function(){d["default"].isMute=!d["default"].isMute,d["default"].audio.mute(d["default"].isMute),d["default"].isMute?e.soundBtn.icon.texture=d["default"].assets.getTexture("icon_sound_off"):e.soundBtn.icon.texture=d["default"].assets.getTexture("icon_sound_on")});this.soundBtn=d["default"].createButton(.5*p3.View.width-75,65,"small",a,this,this._uiHolder,"icon_sound_off"),d["default"].isMute||(this.soundBtn.icon.texture=d["default"].assets.getTexture("icon_sound_on"));var i=function(){e.signals.home.dispatch(e)};this.homeBtn=d["default"].createButton(.5*-p3.View.width+75,65,"small",i,this,this._uiHolder,"icon_home")}},{key:"jumpHappo",value:function(){var e=this,t=4,a=function i(){var a=Math.floor(Math.random()*e._happos.length),s=e._happos[a];s.tween.pause(),TweenMax.to(s,.25,{y:s.y-25,yoyo:!0,repeat:1}),TweenMax.to(s.scale,.25,{x:s.scale.x-.05,y:s.scale.y+.05,yoyo:!0,repeat:1,onComplete:function(){s.tween.resume()}}),delay(i,t,e)};delay(a,t,this)}},{key:"createHappo",value:function(e,t){var a=r("shadow",t);a.anchor.set(.5,1);var i=r(e,t);return i.anchor.y=1,i.scale.set(.8),i.tween=TweenMax.to(i.scale,1,{x:i.scale.x+.02,y:i.scale.y-.02,ease:Power0.easeNone,yoyo:!0,repeat:-1,repeatDelay:.15+.2*Math.random,delay:Math.random()}),"happo_5"!==e&&this._happos.push(i),i.shadow=a,i}},{key:"destroy",value:function(){d["default"].audio.stopSound("sfx_ambient_desert_loop_00"),TweenMax.killAll();for(var e=0;e<p.length;e++)p[e].destroy(),p[e]=null,delete p[e];p.length=0;for(var a=0;a<this._containers.length;a++)this._containers[a].destroy(),this._containers[a]=null,delete this._containers[a];this._containers.length=0;for(var i=0;i<this._particles.length;i++)this._particles[i].destroy(),this._particles[i]=null,delete this._particles[i];this._particles.length=0,d["default"].renderer.plugins.sprite.sprites.length=0,h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"resize",value:function(){this.x=.5*p3.View.width,this.homeBtn.x=.5*-p3.View.width+75,this.soundBtn.x=.5*p3.View.width-75}},{key:"update",value:function(){if(this.dragging){var e=this.dragging.inputData.getLocalPosition(this);this.dragging.position.set(e.x,e.y)}for(var t in this._particles)this._particles[t].update(deltaTime)}}]),t}(p3.Scene);a["default"]=_},{"./Common":6}],10:[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e,t){var a=void 0;return"string"==typeof e?a=new PIXI.Sprite(d["default"].assets.getTexture(e)):e instanceof PIXI.Texture&&(a=new PIXI.Sprite(e)),a.anchor={x:.5,y:0},t&&t.addChild(a),p.push(a),a}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),h=function c(e,t,a){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var s=Object.getPrototypeOf(e);return null===s?void 0:c(s,t,a)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(a)},u=e("./Common"),d=i(u),p=[],_=function(e){function t(){s(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.tileSize=1020,e._bg=null,e._primaryHolder=new PIXI.Container,e._uiHolder=new PIXI.Container,e._bgHolder=new PIXI.Container,e._midHolder=new PIXI.Container,e._fgHolder=new PIXI.Container,e.dragging=null,e._happos=[],e._containers=[],e.sky=null,e.soundBtn=null,e.logo=null,e}return n(t,e),l(t,[{key:"init",value:function(){var e=this;d["default"].loadGame(),this.addChild(this._bgHolder,this._midHolder,this._fgHolder,this._primaryHolder,this._uiHolder),this._containers=[this._bgHolder,this._midHolder,this._fgHolder,this._primaryHolder,this._uiHolder],this.initUI(),this.initDisp(),d["default"].audio.playMusic("music_mainmenu_loop_00"),this.addDeco(),this.start();var t=1.5;TweenMax.from(this.mountainTiles.tilePosition,t,{x:200,ease:Power1.easeOut});for(var a in this.clouds)TweenMax.from(this.clouds[a],t,{x:this.clouds[a].x+200,ease:Power1.easeOut});TweenMax.from(this.midTiles.tilePosition,t,{x:800,ease:Power1.easeOut}),TweenMax.from(this.floorTiles.tilePosition,t,{x:1200,ease:Power1.easeOut});for(var i in this.happos)TweenMax.from(this.happos[i],t,{x:this.happos[i].x+1200,ease:Power1.easeOut}),this.happos[i].shadow&&(this.happos[i].shadow.position.set(this.happos[i].x,this.happos[i].y+5),TweenMax.from(this.happos[i].shadow,t,{x:this.happos[i].x+1200,ease:Power1.easeOut}));TweenMax.from(this.banner,t,{x:this.banner.x+1200,ease:Power1.easeOut,onComplete:function(){e.finishAnim()}})}},{key:"finishAnim",value:function(){TweenMax.to(this.playBtn.scale,.5,{x:1,y:1,ease:Bounce.easeOut}),TweenMax.to(this.soundBtn.scale,.5,{x:1,y:1,ease:Bounce.easeOut}),TweenMax.to(this.logo.scale,.5,{x:.9,y:.9,ease:Bounce.easeOut})}},{key:"jumpHappo",value:function(){var e=this,t=4,a=function(){var t=Math.floor(Math.random()*e._happos.length),a=e._happos[t];a.tween.pause(),TweenMax.to(a,.25,{y:a.y-25,yoyo:!0,repeat:1}),TweenMax.to(a.scale,.25,{x:a.scale.x-.05,y:a.scale.y+.05,yoyo:!0,repeat:1,onComplete:function(){a.tween.resume()}})};delay(a,t,this)}},{key:"addDeco",value:function(){var e=r("sky",this._bgHolder);e.width=p3.View.width+200,e.height=p3.View.height+210;var t=new PIXI.extras.TilingSprite(d["default"].assets.getTexture("ground"),3*this.tileSize,275);t.position.x=-2040,t.position.y=.5*p3.View.height+50,t.scale.y=1.25;var a=new PIXI.extras.TilingSprite(d["default"].assets.getTexture("mountains_bg"),3*this.tileSize,233);a.position.x=-2040,a.position.y=.5*p3.View.height-250,a.scale.set(2);var i=new PIXI.extras.TilingSprite(d["default"].assets.getTexture("mid_ground"),3*this.tileSize,250);i.position.x=-2040,i.position.y=.5*p3.View.height,p.push(t,a,i),this.floorTiles=t,this.mountainTiles=a,this.midTiles=i,this.sky=e,this._fgHolder.addChild(t),this._bgHolder.addChild(a),this._midHolder.addChild(i),this.clouds=[];for(var s=0;s<5;s++){var o=r("cloud_b_"+Math.ceil(3*Math.random()),this._bgHolder);o.x=1e3*s-2e3*Math.random(),o.y=.5*p3.View.height-300-150*Math.random(),this.clouds.push(o)}}},{key:"start",value:function(){this._running=!0,this.jumpHappo()}},{key:"update",value:function(){if(this.dragging){var e=this.dragging.inputData.getLocalPosition(this);this.dragging.position.set(e.x,e.y)}}},{key:"end",value:function(){this._running=!1,this.signals.next.dispatch(this)}},{key:"initUI",value:function(){var e=this,t=!1,a=function(){t||(t=!0,e.signals.next.dispatch(e))},i=d["default"].createButton(0,.5*p3.View.height+225,"big",a,this,this._uiHolder,"icon_play");i.scale.set(0),this.playBtn=i;var s=function(){d["default"].isMute=!d["default"].isMute,d["default"].audio.mute(d["default"].isMute),d["default"].isMute?e.soundBtn.icon.texture=d["default"].assets.getTexture("icon_sound_off"):e.soundBtn.icon.texture=d["default"].assets.getTexture("icon_sound_on")};this.soundBtn=d["default"].createButton(.5*p3.View.width-75,65,"small",s,this,this._uiHolder,"icon_sound_off"),d["default"].isMute||(this.soundBtn.icon.texture=d["default"].assets.getTexture("icon_sound_on")),this.soundBtn.scale.set(0)}},{key:"initDisp",value:function(){var e=r("tree_transparent",this._primaryHolder);e.x=.5*-p3.View.width+125,e.y=-75;var t=r("water_hole_fg",this._primaryHolder);t.anchor.set(.5,1),t.y=p3.View.height,t.x=125;var a=r("banner",this._primaryHolder);a.x=a.y=105;var i=void 0;"ar"===d["default"].language?i=p3.simpleText(d["default"].copy.title[d["default"].language],"arial",120,null,13767682):"ru"===d["default"].language?i=p3.simpleText(d["default"].copy.title[d["default"].language],"arial",65,null,13767682):(i=new PIXI.extras.BitmapText(d["default"].copy.title[d["default"].language],{font:"95px Ziclets",align:"center",tint:13767682}),i.maxWidth=250,"hu"===d["default"].language&&(i.maxWidth=600),i.anchor.set(.5)),a.addChild(i),i.x=-140,i.y=135,a.scale.set(.8),a.y=175,"hu"===d["default"].language&&(i.y+=10),"en"!==d["default"].language&&i.scale.set(.65);var s=r("happos_logo",this._primaryHolder);s.y=15,s.scale.set(0),this.logo=s,this.banner=a;var o=this.createHappo("happo_2",this._primaryHolder);o.x=262,o.y=p3.View.height-75;var n=this.createHappo("happo_1",this._primaryHolder);n.x=-498,n.y=p3.View.height-100;var l=r("stunt_splash",this._primaryHolder);l.y=-15,l.x=75,this.happos=[n,o,l,t,e];var h=r("es"==d["default"].language?"preloader_es":"boomerang_logo",this._primaryHolder);h.x=.5*p3.View.width-.5*h.width-15,h.y=p3.View.height-h.height-15,"es"==d["default"].language&&(h.scale=new PIXI.Point(.4,.4),h.y+=170),this.bLogo=h}},{key:"destroy",value:function(){TweenMax.killAll();for(var e=0;e<p.length;e++)p[e].destroy(),p[e]=null,delete p[e];p.length=0;for(var a=0;a<this._containers.length;a++)this._containers[a].destroy(),this._containers[a]=null,delete this._containers[a];this._containers.length=0,d["default"].audio.stopMusic("music_mainmenu_loop_00"),h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"resize",value:function(){this.x=.5*p3.View.width,this.sky.width=p3.View.width+200,this.sky.height=p3.View.height+210,this.soundBtn.x=.5*p3.View.width-75,this.bLogo.x=.5*p3.View.width-.5*this.bLogo.width-15}},{key:"createHappo",value:function(e,t){var a=r("shadow",t),i=r(e,t);return i.anchor.y=1,i.tween=TweenMax.to(i.scale,1,{x:i.scale.x+.02,y:i.scale.y-.02,ease:Power0.easeNone,yoyo:!0,repeat:-1,repeatDelay:.15+.2*Math.random,delay:Math.random()}),this._happos.push(i),a.anchor.set(.5,1),i.shadow=a,p.push(i,a),i}},{key:"makeDraggable",value:function(e){var t=this;e.interactive=!0,e.mousedown=function(a){t.dragging=e,t.dragging.inputData=a.data},e.mouseup=e.mouseupoutside=function(){console.log("dragXY : "+Math.round(t.dragging.x)+", "+Math.round(t.dragging.y)),t.dragging=null}}}]),t}(p3.Scene);a["default"]=_},{"./Common":6}],11:[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,a,i,s){var o=0|s,n=new PIXI.Text(e,{fontFamily:t,fontSize:a,fill:o});return n.anchor.x=.5,i&&i.addChild(n),n}Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),r=e("./Application"),l=i(r),h=e("./AudioManager"),u=i(h),d=e("./Common"),p=i(d),_=e("./PreloaderScene"),c=i(_),f=function(){function e(t,a){s(this,e),this._width=t,this._height=a,this._preloader=null,this._game=null,window.startGame=this.startGame}return n(e,[{key:"init",value:function(){p["default"].assets=p3.AssetManager.instance,p["default"].audio=p3.Button.audio=new u["default"],p["default"].language=language,p["default"].loadGame();var e=new p3.ViewParams;e.holderId="game",e.width=this._width,e.height=this._height,e.rotateImageUrl="./assets/images/localisation/rotate_"+p["default"].language+".jpg",e.rotateImageColor="#000000",PIXI.settings.RETINA_PREFIX=/\_(?=[^_]*$)(.+)x/,PIXI.settings.MIPMAP_TEXTURES=!1,p3.Device.init(window.bowser),TweenMax.defaultOverwrite="none",TweenMax.ticker.fps(60);var t=new p3.View(e);t.signals.ready.addOnce(function(t){var a={};a.view=t,a.transparent=!1,a.antialias=!1,a.preserveDrawingBuffer=!1,a.resolution=1;var i=new PIXI.Container;p["default"].stage=i,document.onclick=function(){t.focus()},p3.Device.isCocoonJS&&(i.scale.x=window.innerHeight/e.height,i.scale.y=window.innerHeight/e.height);var s=p3.Device.isCocoonJS?new PIXI.WebGLRenderer(window.innerWidth,window.innerHeight,a):PIXI.autoDetectRenderer(this._width,this._height,a);s.backgroundColor=0,p["default"].renderer=s,p["default"].isWebGL=s instanceof PIXI.WebGLRenderer;var o=new p3.SceneManager(s);o.updateAll=!0,p["default"].scene=o,p["default"].stage.addChild(o.view),PIXI.ticker.shared.add(function(e){window.deltaTime=e/PIXI.settings.TARGET_FPMS/1e3,s.render(p["default"].stage),o.update()},this),window.delay=function(e,t,a){TweenMax.delayedCall(t,e,[],a)},window.translate=function(e){var t=p["default"].config.strings[e];return t=t&&t[p["default"].language],"undefined"!=typeof t?t:e},this.loadPreloader()},this),t.signals.resize.add(this.onCanvasResize,this),p["default"].view=t}},{key:"loadPreloader",value:function(){var e=[{name:"preloader",url:"images/preloader.json"}];"es"==p["default"].language&&(e.push({name:"preloader_es",url:"images/localisation/preloader_es.png"}),e.push({name:"preloader_overlay_es",url:"images/preloader_overlay_es.png"}));var t=[];e.length?(p["default"].assets.addFiles(e,"assets/"),p["default"].assets.signals.complete.addOnce(function(){this.createConfig(),this.loadAssets()},this),p["default"].assets.load(),p["default"].audio.addSounds(t,[".mp3",".ogg"],"")):this.loadAssets()}},{key:"loadAssets",value:function(){var e=[{name:"bg",url:"images/bg.jpg"},{name:"stunt_happo_flying",url:"images/stunt_happo_flying.json"},{name:"stunt_happo_standing",url:"images/stunt_happo_standing.json"},{name:"alien",url:"images/alien.json"},{name:"tutorial",url:"images/tutorial.json"},{name:"particle",url:"images/particle.png"},{name:"ui_1x_0",url:"images/ui_1x_0.json"},{name:"ingame_1x_0",url:"images/ingame_1x_0.json"},{name:"ingame_1x_1",url:"images/ingame_1x_1.json"},{name:"bg_assets_1x",url:"images/bg_assets_1x.json"},{name:"titles",url:"fonts/titles.xml"},{name:"copyFoo",url:"fonts/copy.xml"},{name:"copy",url:"data/copy.json"},{name:"particles_gameover",url:"particles/particles_gameover.json"},{name:"particles_dust_ground",url:"particles/particles_dust_ground.json"},{name:"particles_character_boost_ready",url:"particles/particles_character_boost_ready.json"},{name:"particle_cannon_directional_blast",url:"particles/particle_cannon_directional_blast.json"},{name:"particles_splash_mud",url:"particles/particles_splash_mud.json"},{name:"particles_splash_water",url:"particles/particles_splash_water.json"},{name:"particles_cannon_1",url:"particles/particles_cannon_1.json"},{name:"particles_cannon_2",url:"particles/particles_cannon_2.json"},{name:"particles_pickup",url:"particles/particles_pickup.json"},{name:"particles_boostmeter",url:"particles/particles_boostmeter.json"},{name:"particles_boost",url:"particles/particles_boost.json"}],t=["sfx_btn_press_00","sfx_btn_rollover_00","music_mainmenu_loop_00","music_ready_loop_012","music_results_short_00","music_results_long_00","sfx_happo_crash_00","sfx_happo_fling_00","sfx_happo_fling_01","sfx_bounce_big_00","sfx_bounce_bonus_00","sfx_happos_ooh_00","sfx_happos_cheer_00","sfx_happo_impact_00","sfx_cannon_fire_00","sfx_cannon_fire_01","sfx_cannon_move_00","sfx_cannon_move_01","sfx_cannon_move_02","sfx_bounce_bucket_00","sfx_bounce_drum_00","sfx_bounce_fear_00","sfx_bounce_hammock_00","sfx_bounce_metal_00","sfx_bounce_plastic_00","sfx_bounce_springboard_00","sfx_bounce_trampoline_00","sfx_bounce_yogaball_00","sfx_happo_ok_00","sfx_star_jump_ready_00","sfx_star_pickup_00","sfx_bounce_puddle_00","sfx_bounce_mud_00","sfx_ambient_desert_loop_00"];e.length?(this._preloader=new c["default"],p["default"].scene.add(this._preloader),p["default"].assets.addFiles(e,"assets/"),p["default"].assets.signals.progress.add(this.onLoadingProgress,this),p["default"].assets.signals.complete.addOnce(this.onLoadingCompleted,this),p["default"].assets.load(),p["default"].audio.addSounds(t,[".m4a",".mp3",".ogg"],"assets/audio/")):this.startGame()}},{key:"createConfig",value:function(){var e=(p["default"].assets,{});p["default"].config=e}},{key:"startGame",value:function(){delay(function(){this._game=new l["default"],this._game.init()},1,this)}},{key:"onLoadingProgress",value:function(e){this._preloader.loaded=e.progress/100}},{key:"onLoadingCompleted",value:function(){p["default"].assets.signals.progress.removeAll(),p["default"].assets.signals.complete.removeAll(),this._preloader.loaded=1,this.startGame()}},{key:"onCanvasResize",value:function(e){e&&(p["default"].renderer.resize(p3.View.width,p3.View.height),p["default"].scene&&p["default"].scene.resize())}}]),e}();a["default"]=f,window.p3.simpleText=o,window.Main=f},{"./Application":2,"./AudioManager":3,"./Common":6,"./PreloaderScene":8}]},{},[11]);
//# sourceMappingURL=bundle.min.js.map
