! function e(t, i, n) {
    function a(s, r) { if (!i[s]) { if (!t[s]) { var l = "function" == typeof require && require; if (!r && l) return l(s, !0); if (o) return o(s, !0); var u = new Error("Cannot find module '" + s + "'"); throw u.code = "MODULE_NOT_FOUND", u } var _ = i[s] = { exports: {} };
            t[s][0].call(_.exports, function(e) { var i = t[s][1][e]; return a(i ? i : e) }, _, _.exports, e, t, i, n) } return i[s].exports } for (var o = "function" == typeof require && require, s = 0; s < n.length; s++) a(n[s]); return a }({
    1: [function(e, t, i) { t.exports = function(e) { "string" == typeof e && (e = [e]); for (var t = [].slice.call(arguments, 1), i = [], n = 0; n < e.length - 1; n++) i.push(e[n], t[n] || ""); return i.push(e[n]), i.join("") } }, {}],
    2: [function(e, t, i) {! function(e) { var i = /iPhone/i,
                n = /iPod/i,
                a = /iPad/i,
                o = /(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,
                s = /Android/i,
                r = /(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,
                l = /(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,
                u = /Windows Phone/i,
                _ = /(?=.*\bWindows\b)(?=.*\bARM\b)/i,
                h = /BlackBerry/i,
                c = /BB10/i,
                d = /Opera Mini/i,
                p = /(CriOS|Chrome)(?=.*\bMobile\b)/i,
                f = /(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,
                y = new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)", "i"),
                v = function(e, t) { return e.test(t) },
                m = function(e) { var t = e || navigator.userAgent,
                        m = t.split("[FBAN"); if ("undefined" != typeof m[1] && (t = m[0]), m = t.split("Twitter"), "undefined" != typeof m[1] && (t = m[0]), this.apple = { phone: v(i, t), ipod: v(n, t), tablet: !v(i, t) && v(a, t), device: v(i, t) || v(n, t) || v(a, t) }, this.amazon = { phone: v(r, t), tablet: !v(r, t) && v(l, t), device: v(r, t) || v(l, t) }, this.android = { phone: v(r, t) || v(o, t), tablet: !v(r, t) && !v(o, t) && (v(l, t) || v(s, t)), device: v(r, t) || v(l, t) || v(o, t) || v(s, t) }, this.windows = { phone: v(u, t), tablet: v(_, t), device: v(u, t) || v(_, t) }, this.other = { blackberry: v(h, t), blackberry10: v(c, t), opera: v(d, t), firefox: v(f, t), chrome: v(p, t), device: v(h, t) || v(c, t) || v(d, t) || v(f, t) || v(p, t) }, this.seven_inch = v(y, t), this.any = this.apple.device || this.android.device || this.windows.device || this.other.device || this.seven_inch, this.phone = this.apple.phone || this.android.phone || this.windows.phone, this.tablet = this.apple.tablet || this.android.tablet || this.windows.tablet, "undefined" == typeof window) return this },
                g = function() { var e = new m; return e.Class = m, e }; "undefined" != typeof t && t.exports && "undefined" == typeof window ? t.exports = m : "undefined" != typeof t && t.exports && "undefined" != typeof window ? t.exports = g() : "function" == typeof define && define.amd ? define("isMobile", [], e.isMobile = g()) : e.isMobile = g() }(this) }, {}],
    3: [function(e, t, i) { Object.observe || function(e, t, i, n) { "use strict"; var a, o, s = ["add", "update", "delete", "reconfigure", "setPrototype", "preventExtensions"],
                r = t.isArray || function(e) { return function(t) { return "[object Array]" === e.call(t) } }(e.prototype.toString),
                l = t.prototype.indexOf ? t.indexOf || function(e, i, n) { return t.prototype.indexOf.call(e, i, n) } : function(e, t, i) { for (var n = i || 0; n < e.length; n++)
                        if (e[n] === t) return n; return -1 },
                u = i.Map !== n && Map.prototype.forEach ? function() { return new Map } : function() { var e = [],
                        t = []; return { size: 0, has: function(t) { return l(e, t) > -1 }, get: function(i) { return t[l(e, i)] }, set: function(i, n) { var a = l(e, i);
                            a === -1 ? (e.push(i), t.push(n), this.size++) : t[a] = n }, "delete": function(i) { var n = l(e, i);
                            n > -1 && (e.splice(n, 1), t.splice(n, 1), this.size--) }, forEach: function(i) { for (var n = 0; n < e.length; n++) i.call(arguments[1], t[n], e[n], this) } } },
                _ = e.getOwnPropertyNames ? function() { var t = e.getOwnPropertyNames; try { arguments.callee } catch (i) { var n = (t(l).join(" ") + " ").replace(/prototype |length |name /g, "").slice(0, -1).split(" ");
                        n.length && (t = function(t) { var i = e.getOwnPropertyNames(t); if ("function" == typeof t)
                                for (var a, o = 0; o < n.length;)(a = l(i, n[o++])) > -1 && i.splice(a, 1); return i }) } return t }() : function(t) { var i, n, a = []; if ("hasOwnProperty" in t)
                        for (i in t) t.hasOwnProperty(i) && a.push(i);
                    else { n = e.hasOwnProperty; for (i in t) n.call(t, i) && a.push(i) } return r(t) && a.push("length"), a },
                h = e.getPrototypeOf,
                c = e.defineProperties && e.getOwnPropertyDescriptor,
                d = i.requestAnimationFrame || i.webkitRequestAnimationFrame || function() { var e = +new Date,
                        t = e; return function(i) { return setTimeout(function() { i((t = +new Date) - e) }, 17) } }(),
                p = function(e, t, i) { var n = a.get(e);
                    n ? (y(n, e), w(e, n, t, i)) : (n = f(e), w(e, n, t, i), 1 === a.size && d(v)) },
                f = function(t, i) { var n, o = _(t),
                        s = [],
                        r = 0,
                        i = { handlers: u(), frozen: !!e.isFrozen && e.isFrozen(t), extensible: !e.isExtensible || e.isExtensible(t), proto: h && h(t), properties: o, values: s, notifier: g(t, i) }; if (c)
                        for (n = i.descriptors = []; r < o.length;) n[r] = c(t, o[r]), s[r] = t[o[r++]];
                    else
                        for (; r < o.length;) s[r] = t[o[r++]]; return a.set(t, i), i },
                y = function() { var t = c ? function(e, t, i, n, a) { var o = t.properties[i],
                                s = e[o],
                                r = t.values[i],
                                l = t.descriptors[i]; "value" in a && (r === s ? 0 === r && 1 / r !== 1 / s : r === r || s === s) && (b(e, t, { name: o, type: "update", object: e, oldValue: r }, n), t.values[i] = s), !l.configurable || a.configurable && a.writable === l.writable && a.enumerable === l.enumerable && a.get === l.get && a.set === l.set || (b(e, t, { name: o, type: "reconfigure", object: e, oldValue: r }, n), t.descriptors[i] = a) } : function(e, t, i, n) { var a = t.properties[i],
                                o = e[a],
                                s = t.values[i];
                            (s === o ? 0 === s && 1 / s !== 1 / o : s === s || o === o) && (b(e, t, { name: a, type: "update", object: e, oldValue: s }, n), t.values[i] = o) },
                        i = c ? function(e, i, n, a, o) { for (var s, r = i.length; n && r--;) null !== i[r] && (s = c(e, i[r]), n--, s ? t(e, a, r, o, s) : (b(e, a, { name: i[r], type: "delete", object: e, oldValue: a.values[r] }, o), a.properties.splice(r, 1), a.values.splice(r, 1), a.descriptors.splice(r, 1))) } : function(e, t, i, n, a) { for (var o = t.length; i && o--;) null !== t[o] && (b(e, n, { name: t[o], type: "delete", object: e, oldValue: n.values[o] }, a), n.properties.splice(o, 1), n.values.splice(o, 1), i--) }; return function(n, a, o) { if (n.handlers.size && !n.frozen) { var s, r, u, d, p, f, y, v, m = n.values,
                                g = n.descriptors,
                                w = 0; if (n.extensible)
                                if (s = n.properties.slice(), r = s.length, u = _(a), g) { for (; w < u.length;) p = u[w++], d = l(s, p), v = c(a, p), d === -1 ? (b(a, n, { name: p, type: "add", object: a }, o), n.properties.push(p), m.push(a[p]), g.push(v)) : (s[d] = null, r--, t(a, n, d, o, v));
                                    i(a, s, r, n, o), e.isExtensible(a) || (n.extensible = !1, b(a, n, { type: "preventExtensions", object: a }, o), n.frozen = e.isFrozen(a)) } else { for (; w < u.length;) p = u[w++], d = l(s, p), f = a[p], d === -1 ? (b(a, n, { name: p, type: "add", object: a }, o), n.properties.push(p), m.push(f)) : (s[d] = null, r--, t(a, n, d, o));
                                    i(a, s, r, n, o) } else if (!n.frozen) { for (; w < s.length; w++) p = s[w], t(a, n, w, o, c(a, p));
                                e.isFrozen(a) && (n.frozen = !0) } h && (y = h(a), y !== n.proto && (b(a, n, { type: "setPrototype", name: "__proto__", object: a, oldValue: n.proto }), n.proto = y)) } } }(),
                v = function() { a.size && (a.forEach(y), o.forEach(m), d(v)) },
                m = function(e, t) { var i = e.changeRecords;
                    i.length && (e.changeRecords = [], t(i)) },
                g = function(e, t) { return arguments.length < 2 && (t = a.get(e)), t && t.notifier || { notify: function(t) { t.type; var i = a.get(e); if (i) { var n, o = { object: e }; for (n in t) "object" !== n && (o[n] = t[n]);
                                b(e, i, o) } }, performChange: function(t, i) { if ("string" != typeof t) throw new TypeError("Invalid non-string changeType"); if ("function" != typeof i) throw new TypeError("Cannot perform non-function"); var o, s, r = a.get(e),
                                l = arguments[2],
                                u = l === n ? i() : i.call(l); if (r && y(r, e, t), r && u && "object" == typeof u) { s = { object: e, type: t }; for (o in u) "object" !== o && "type" !== o && (s[o] = u[o]);
                                b(e, r, s) } } } },
                w = function(e, t, i, n) { var a = o.get(i);
                    a || o.set(i, a = { observed: u(), changeRecords: [] }), a.observed.set(e, { acceptList: n.slice(), data: t }), t.handlers.set(i, a) },
                b = function(e, t, i, n) { t.handlers.forEach(function(t) { var a = t.observed.get(e).acceptList;
                        ("string" != typeof n || l(a, n) === -1) && l(a, i.type) > -1 && t.changeRecords.push(i) }) };
            a = u(), o = u(), e.observe = function(t, i, a) { if (!t || "object" != typeof t && "function" != typeof t) throw new TypeError("Object.observe cannot observe non-object"); if ("function" != typeof i) throw new TypeError("Object.observe cannot deliver to non-function"); if (e.isFrozen && e.isFrozen(i)) throw new TypeError("Object.observe cannot deliver to a frozen function object"); if (a === n) a = s;
                else if (!a || "object" != typeof a) throw new TypeError("Third argument to Object.observe must be an array of strings."); return p(t, i, a), t }, e.unobserve = function(e, t) { if (null === e || "object" != typeof e && "function" != typeof e) throw new TypeError("Object.unobserve cannot unobserve non-object"); if ("function" != typeof t) throw new TypeError("Object.unobserve cannot deliver to non-function"); var i, n = o.get(t); return n && (i = n.observed.get(e)) && (n.observed.forEach(function(e, t) { y(e.data, t) }), d(function() { m(n, t) }), 1 === n.observed.size && n.observed.has(e) ? o["delete"](t) : n.observed["delete"](e), 1 === i.data.handlers.size ? a["delete"](e) : i.data.handlers["delete"](t)), e }, e.getNotifier = function(t) { if (null === t || "object" != typeof t && "function" != typeof t) throw new TypeError("Object.getNotifier cannot getNotifier non-object"); return e.isFrozen && e.isFrozen(t) ? null : g(t) }, e.deliverChangeRecords = function(e) { if ("function" != typeof e) throw new TypeError("Object.deliverChangeRecords cannot deliver to non-function"); var t = o.get(e);
                t && (t.observed.forEach(function(e, t) { y(e.data, t) }), m(t, e)) } }(Object, Array, this) }, {}],
    4: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function c(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : c(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("./Common"),
            _ = n(u),
            h = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e.signals = { interact: new signals.Signal, interactEnd: new signals.Signal }, e.scene = null, e._view = null, e._direction = 1, e._isTalking = !1, e.on("added", e.init, e), e } return s(t, e), r(t, [{ key: "init", value: function() { this.off("added", this.init) } }, { key: "destroy", value: function() { this.signals.interact.dispose(), this.signals.interactEnd.dispose(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, { removeChildren: !0 }) } }, { key: "update", value: function(e) {} }, { key: "interact", value: function(e) { this._isTalking = !0, this.signals.interact.dispatch(this, e) } }, { key: "stopInteract", value: function(e) { this._isTalking = !1, this.signals.interactEnd.dispatch(this, e) } }, { key: "faceDirection", value: function(e) { e === -1 ? (this._direction = -1, this._view.parent.scale.x = -1) : 1 === e && (this._direction = 1, this._view.parent.scale.x = 1) } }, { key: "view", get: function() { return this._view } }, { key: "direction", get: function() { return this._direction } }, { key: "isTalking", get: function() { return this._isTalking } }, { key: "inCameraView", get: function() { var e = _["default"].camera,
                            t = this.x - (e.position.x - e.view.x); return !(t < -200 || t > P3.View.width + 200) } }]), t }(PIXI.Container);
        i["default"] = h }, { "./Common": 13 }],
    5: [function(e, t, i) {
        "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") } Object.defineProperty(i, "__esModule", { value: !0 });
        var o = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            s = e("./CertificateScene"),
            r = n(s),
            l = e("./chat/ChatManager"),
            u = n(l),
            _ = e("./Common"),
            h = n(_),
            c = e("./CreditsScene"),
            d = n(c),
            p = e("./EnterNameScene"),
            f = n(p),
            y = e("./GameScene"),
            v = n(y),
            m = e("./inventory/Inventory"),
            g = n(m),
            w = e("./inventory/InventoryItem"),
            b = n(w),
            P = e("./InventoryScene"),
            x = n(P),
            k = e("./InventoryItemScene"),
            I = n(k),
            T = e("./LocationPreloaderScene"),
            S = n(T),
            O = e("./MapScene"),
            A = n(O),
            C = e("./MinigameHelpScene"),
            E = n(C),
            j = e("./MinigameResultsScene"),
            M = n(j),
            X = e("./chat/NarratorManager"),
            B = n(X),
            D = e("./PauseScene"),
            L = n(D),
            N = e("./quests/QuestManager"),
            H = n(N),
            F = e("./QuestLogScene"),
            G = n(F),
            R = e("./SaveManager"),
            V = n(R),
            W = e("./SplashScene"),
            U = n(W),
            z = e("./Tracking"),
            q = n(z),
            Q = e("./TutorialScene"),
            Y = n(Q),
            K = e("./VideoScene"),
            $ = n(K),
            J = e("./minigames/AcornAntlers/AcornAntlersScene"),
            Z = n(J),
            ee = e("./minigames/bearcheek/BearCheekScene"),
            te = n(ee),
            ie = e("./minigames/bronco/BroncoScene"),
            ne = n(ie),
            ae = e("./minigames/bugattack/BugAttackScene"),
            oe = n(ae),
            se = e("./minigames/duckyeggs/DuckyEggsScene"),
            re = n(se),
            le = e("./minigames/flappybert/FlappyBertScene"),
            ue = n(le),
            _e = e("./minigames/frogmankick/FrogmanKickScene"),
            he = n(_e),
            ce = e("./minigames/monsterrun/MonsterRunScene"),
            de = n(ce),
            pe = e("./minigames/mountainhiking/MountainHikingScene"),
            fe = n(pe),
            ye = e("./minigames/poodleplay/PoodlePlayScene"),
            ve = n(ye),
            me = e("./minigames/puffedup/PuffedUpScene"),
            ge = n(me),
            we = e("./minigames/raftbalance/RaftBalanceScene"),
            be = n(we),
            Pe = e("./minigames/royalroar/RoyalRoarScene"),
            xe = n(Pe),
            ke = e("./minigames/swordpractice/SwordPracticeScene"),
            Ie = n(ke),
            Te = e("./minigames/swordstrike/SwordStrikeScene"),
            Se = n(Te),
            Oe = e("./minigames/turnipninja/TurnipNinjaScene"),
            Ae = n(Oe),
            Ce = e("./minigames/turniproast/TurnipRoastScene"),
            Ee = n(Ce),
            je = e("./minigames/wackagnome/WackagnomeScene"),
            Me = n(je),
            Xe = e("./minigames/witchdeflect/WitchDeflectScene"),
            Be = n(Xe),
            De = e("./minigames/wolfrun/WolfRunScene"),
            Le = n(De),
            Ne = e("./CNCookieBar"),
            He = n(Ne),
            Fe = e("ismobilejs"),
            Ge = n(Fe),
            Re = function() {
                function e() { a(this, e), this._game = null, this._transitionLayer = null }
                return o(e, [{ key: "init", value: function() { this._transitionLayer = new PIXI.Container, h["default"].stage.addChild(this._transitionLayer), this._initChat(), this._initInventory(), this._initQuestManager(), this._initNarratorManager(), this._initSaveData(), ["apac", "pt-br", "es-419"].indexOf(h["default"].language) === -1 && (h["default"].save.getCookiesPolicy() || (h["default"].cookieBar = new He["default"], h["default"].cookieBar.visible = !1, h["default"].stage.addChild(h["default"].cookieBar), delay(function() { h["default"].cookieBar.visible = !0 }, this))), idsettings.minigame.debug.length > 0 ? this.playMinigame(idsettings.minigame.debug) : this.showTutorialScene(!0) } }, { key: "showLocationPreloaderScene", value: function(e) { var t = new S["default"](e); return t.signals.next.add(function() { this.showGameScene() }, this), this.fadeTransition(function() { h["default"].scene.show(t) }, function() { t.appear() }, this), t } }, { key: "showSplashScene", value: function() { var e = new U["default"]; return e.signals.next.add(function() { this._game.alwaysUpdate = !1, h["default"].save.showTutorial ? (h["default"].scene.remove(), delay(function() { var e = this.showVideoScene(10, !1);
                                e.signals.next.addOnce(function() { this._game.nextTutorialStep() }, this, 1) }, .5, this)) : this.showMapScene(h["default"].save.unlockCertificate), h["default"].tracking.trackEvent(q["default"].EVENT_GAME_LAUNCH) }, this), e.signals.previous.add(function() { this.showCreditsScene() }, this), h["default"].scene.add(e, !1), e } }, { key: "showCreditsScene", value: function() { var e = new d["default"]; return e.autoAppear = !1, e.signals.previous.add(function() { this.showTutorialScene(this) }, this), this.fadeTransition(function() { h["default"].scene.show(e) }, function() { e.appear() }, this), e } }, { key: "showGameScene", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];
                        h["default"].paused = !1; var t = h["default"].save; return t.showTutorial && h["default"].tracking.trackEvent(q["default"].EVENT_TUTORIAL_COMPLETE), t.showTutorial = !1, t.saveGame(), h["default"].quest.completeQuest("quest1"), this._game = new v["default"](e), this._game.autoAppear = !1, this._game.alwaysUpdate = e, this._game.signals.home.add(function() { this.showSplashScene() }, this), this._game.signals.inventory.add(function(e) { this.showInventoryScene(e) }, this), this._game.signals.map.add(function() { this.showInGameMapScene() }, this), this._game.signals.quest.add(function() { this.showQuestLogScene() }, this), this._game.signals.pause.add(function() { this.showPauseScene() }, this), this._game.signals.playMinigame.add(function(e) { this.playMinigame(e) }, this), this._game.signals.playVideo.add(function(e, t) { this.showVideoScene(e, t) }, this), this.fadeTransition(function() { h["default"].scene.show(this._game) }, function() { this._game.appear() }, this), this._game } }, { key: "showTutorialScene", value: function(e) { return this._game = new Y["default"](e), this._game.autoAppear = !1, this._game.alwaysUpdate = e, this._game.signals.home.add(function() { this.showSplashScene() }, this), this._game.signals.inventory.add(function(e) { var t = this.showInventoryScene(e);
                            t.signals.previous.addOnce(function() { this._game.nextTutorialStep() }, this, 1) }, this), this._game.signals.quest.add(function() { var e = this.showQuestLogScene();
                            e.signals.previous.addOnce(function() { this._game.nextTutorialStep() }, this, 1) }, this), this._game.signals.map.add(function() { this.showInGameMapScene(), this._game.nextTutorialStep() }, this), this.fadeTransition(function() { h["default"].scene.show(this._game) }, function() { this._game.appear() }, this), this._game } }, { key: "showInventoryScene", value: function(e) { var t = new x["default"](e); return t.signals.next.add(function(e) { "True" === e.openCertificate ? this.showCertificateScene(h["default"].save.name) : this.showInventoryItemScene(e) }, this), t.signals.previous.add(function() { h["default"].scene.remove() }, this), h["default"].scene.add(t), t } }, { key: "showInventoryItemScene", value: function(e) { var t = new I["default"](e); return t.signals.next.add(function() { h["default"].scene.remove() }, this), h["default"].scene.add(t), t } }, { key: "showVideoScene", value: function(e, t) { h["default"].audio.stopMusic(), h["default"].narrator.stopNarratorSFX(), Howler.volume(0); var i = h["default"].tracking,
                            n = h["default"].chat.getLocation(h["default"].currentLocation),
                            a = n.Name.replace(/ /g, "_").toLowerCase(),
                            o = new $["default"](e); return o.signals.next.add(function(e, t) { switch (Howler.volume(1), this._game.unlockCampfire(), h["default"].scene.remove(), t) {
                                case 1:
                                    i.trackEvent(q["default"].EVENT_VIDEO_COMPLETE.replace("[LOCATION]", a)); break;
                                case 2:
                                    i.trackEvent(q["default"].EVENT_VIDEO_CLOSE.replace("[LOCATION]", a)) } }, this), this.fadeTransition(function() { h["default"].scene.add(o, !1) }, function() { o.appear() }, this), t ? i.trackEvent(q["default"].EVENT_VIDEO_REPLAY.replace("[LOCATION]", a)) : i.trackEvent(q["default"].EVENT_VIDEO_START.replace("[LOCATION]", a)), o } }, { key: "showMapScene", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
                            t = new A["default"]((!0), e); return t.autoAppear = !1, t.signals.next.add(function(e, t) { var i = h["default"].save;
                            t.ID === h["default"].currentLocation || 1 === t.ID ? (1 === t.ID && this._unloadLocationManifest(), h["default"].currentLocation = i.location = t.ID, this.showGameScene()) : (this._unloadLocationManifest(), h["default"].currentLocation = i.location = t.ID, h["default"].currentManifest = this._getLocationManifest(t.ID), this.showLocationPreloaderScene(h["default"].currentManifest)), i.saveGame() }, this), t.signals.certificate.add(function(e) { this.showEnterNameScene() }, this), this.fadeTransition(function() { h["default"].scene.show(t) }, function() { t.appear() }, this), t } }, { key: "showInGameMapScene", value: function() { h["default"].paused = !0; var e = new A["default"]; return e.signals.next.add(function(e, t) { var i = h["default"].save;
                            t.ID === h["default"].currentLocation || 1 === t.ID ? (1 === t.ID && this._unloadLocationManifest(), h["default"].currentLocation = i.location = t.ID, this.showGameScene()) : (this._unloadLocationManifest(), h["default"].currentLocation = i.location = t.ID, h["default"].currentManifest = this._getLocationManifest(t.ID), this.showLocationPreloaderScene(h["default"].currentManifest)), i.saveGame() }, this), e.signals.previous.add(function(e) { h["default"].paused = !1, h["default"].scene.remove() }, this), h["default"].scene.add(e, !0), e } }, { key: "showQuestLogScene", value: function() { var e = new G["default"]; return e.signals.previous.add(function() { h["default"].scene.remove() }, this), h["default"].scene.add(e), e } }, { key: "showPauseScene", value: function() { h["default"].paused = !0; var e = new L["default"]; return e.signals.previous.add(function() { h["default"].paused = !1, h["default"].scene.remove() }, this), h["default"].scene.add(e), e } }, { key: "showEnterNameScene", value: function() { var e = new f["default"]; return h["default"].scene.add(e, !1), e.signals.next.add(function(e, t) { h["default"].save.unlockCertificate = !1; var i = h["default"].save;
                            i.name = t, i.saveGame(), h["default"].scene.swap(this.showCertificateScene(t, !0)) }, this), e } }, { key: "showCertificateScene", value: function(e) { var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                            i = new r["default"](e, t); return i.signals.previous.add(function() { h["default"].scene.remove(), t && delay(function() { h["default"].chat.playConversation(68) }, 2, this) }, this), h["default"].scene.add(i, !1), i } }, { key: "playMinigame", value: function(e) { var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                            i = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
                        h["default"].narrator.stopNarratorSFX(); var n = h["default"].assets,
                            a = void 0,
                            o = void 0,
                            s = void 0,
                            r = void 0; switch (e) {
                            case "acornantlers":
                            case "8_1":
                            case 0:
                                e = 0, a = this.showAcornAntlersScene(t), o = Ge["default"].any ? translate("minigame_acornantlers_help_mobile") : translate("minigame_acornantlers_help"), s = "tutorial_acornantlers", r = n.texture("minigame_icon_end_8_1"); break;
                            case "bearcheek":
                            case "6_1":
                            case 1:
                                e = 1, a = this.showBearCheekScene(t), o = Ge["default"].any ? translate("minigame_bearcheek_help_mobile") : translate("minigame_bearcheek_help"), s = "tutorial_bearcheek", r = n.texture("minigame_icon_end_6_1"); break;
                            case "bronco":
                            case "2_2":
                            case 2:
                                e = 2, a = this.showBroncoScene(t), o = Ge["default"].any ? translate("minigame_buckingbronco_help_mobile") : translate("minigame_buckingbronco_help"), s = "tutorial_bronco", r = n.texture("minigame_icon_end_2_2"); break;
                            case "bugattack":
                            case "1_1":
                            case 3:
                                e = 3, a = this.showBugAttackScene(t), o = Ge["default"].any ? translate("minigame_bugattack_help_mobile") : translate("minigame_bugattack_help"), s = "tutorial_flyattack", r = n.texture("minigame_icon_end_1_1"); break;
                            case "duckyeggs":
                            case "7_2":
                            case 4:
                                e = 4, a = this.showDuckyEggsScene(t), o = Ge["default"].any ? translate("minigame_duckyeggs_help_mobile") : translate("minigame_duckyeggs_help"), s = "tutorial_duckyegg", r = n.texture("minigame_icon_end_7_2"); break;
                            case "flappybert":
                            case "6_2":
                            case 5:
                                e = 5, a = this.showFlappyBertScene(t), o = Ge["default"].any ? translate("minigame_flappybert_help_mobile") : translate("minigame_flappybert_help"), s = "tutorial_flappybert", r = n.texture("minigame_icon_end_6_2"); break;
                            case "frogmankick":
                            case "3_2":
                            case 6:
                                e = 6, a = this.showFrogmanKickScene(t), o = Ge["default"].any ? translate("minigame_frogmankick_help_mobile") : translate("minigame_frogmankick_help"), s = "tutorial_frogkick", r = n.texture("minigame_icon_end_3_2_red"); break;
                            case "mountainhiking":
                            case "10_1":
                            case 7:
                                e = 7, a = this.showMountainHikingScene(t), o = Ge["default"].any ? translate("minigame_mountainhiking_help") : translate("minigame_mountainhiking_help"), s = "tutorial_mountainhiking", r = n.texture("minigame_icon_end_10_1"); break;
                            case "poodleplay":
                            case "5_2":
                            case 8:
                                e = 8, a = this.showPoodlePlayScene(t), o = Ge["default"].any ? translate("minigame_poodleplay_help_mobile") : translate("minigame_poodleplay_help"), s = "tutorial_poodleplay", r = n.texture("minigame_icon_end_3_2_red"); break;
                            case "puffedup":
                            case "9_2":
                            case 9:
                                e = 9, a = this.showPuffedUpScene(t), o = Ge["default"].any ? translate("minigame_puffedup_help_mobile") : translate("minigame_puffedup_help"), s = "tutorial_puffedup", r = n.texture("minigame_icon_end_9_2"); break;
                            case "raftbalance":
                            case "9_1":
                            case 10:
                                e = 10, a = this.showRaftBalanceScene(t), o = Ge["default"].any ? translate("minigame_raftbalance_help_mobile") : translate("minigame_raftbalance_help"), s = "tutorial_raftbalance", r = n.texture("minigame_icon_end_9_1"); break;
                            case "royalroar":
                            case "2_1":
                            case 11:
                                e = 11, a = this.showRoyalRoarScene(t), o = Ge["default"].any ? translate("minigame_royalroar_help_mobile") : translate("minigame_royalroar_help"), s = "tutorial_royalroar", r = n.texture("minigame_icon_end_2_1"); break;
                            case "swordstrike":
                            case "3_1":
                            case 12:
                                e = 12, a = this.showSwordStrikeScene(t), o = Ge["default"].any ? translate("minigame_swordstrike_help_mobile") : translate("minigame_swordstrike_help"), s = "tutorial_swordstrike", r = n.texture("minigame_icon_end_3_1"); break;
                            case "turnipninja":
                            case "4_1":
                            case 13:
                                e = 13, a = this.showTurnipNinjaScene(t), o = Ge["default"].any ? translate("minigame_turnipninja_help_mobile") : translate("minigame_turnipninja_help"), s = "tutorial_turnipninja", r = n.texture("minigame_icon_end_4_1"); break;
                            case "turniproast":
                            case "7_1":
                            case 14:
                                e = 14, a = this.showTurnipRoastScene(t), o = Ge["default"].any ? translate("minigame_turniproast_help_mobile") : translate("minigame_turniproast_help"), s = "tutorial_turniproast", r = n.texture("minigame_icon_end_7_1"); break;
                            case "wackagnome":
                            case "whackagnome":
                            case "8_2":
                            case 15:
                                e = 15, a = this.showWackagnomeScene(t), o = Ge["default"].any ? translate("minigame_wackagnome_help_mobile") : translate("minigame_wackagnome_help"), s = "tutorial_wackagnome", r = n.texture("minigame_icon_end_8_2"); break;
                            case "witchdeflect":
                            case "4_2":
                            case 16:
                                e = 16, a = this.showWitchDeflectScene(t), o = Ge["default"].any ? translate("minigame_witchdeflect_help_mobile") : translate("minigame_witchdeflect_help"), s = "tutorial_witch_deflect", r = n.texture("minigame_icon_end_4_2"); break;
                            case "wolfrun":
                            case "5_1":
                            case 17:
                                e = 17, a = this.showWolfRunScene(t), o = Ge["default"].any ? translate("minigame_wolfrun_help_mobile") : translate("minigame_wolfrun_help"), s = "tutorial_wolfrun", r = n.texture("minigame_icon_end_3_2_red"); break;
                            case "monsterrun":
                            case "10_2":
                            case 18:
                                e = 18, a = this.showMonsterRunScene(t), o = Ge["default"].any ? translate("minigame_monsterrun_help_mobile") : translate("minigame_monsterrun_help"), s = "tutorial_mountainrun", r = n.texture("minigame_icon_end_3_2_red"); break;
                            case "swordpractice":
                            case "1_2":
                            case 19:
                                e = 19, a = this.showSwordPracticeScene(t), o = Ge["default"].any ? translate("minigame_swordpractice_help_mobile") : translate("minigame_swordpractice_help"), s = "tutorial_swordpractice", r = n.texture("minigame_icon_end_1_2") } a && (a.id = e, a.forceHelp = i, h["default"].save.saveMinigameHighscore(e), this._game && this._game.completeMinigame(e)); var l = h["default"].tracking,
                            u = l.getMinigameName(e); return a.signals.next.add(function(t) { var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
                                n = h["default"].save,
                                a = i > n.getMinigameHighscore(e),
                                o = n.saveMinigameHighscore(e, i),
                                s = n.getMinigameRank(e, i);
                            window.dataLayer = { starRating: s, gameName: h["default"].tracking.getMinigameName(t.id) }, l.trackEvent(q["default"].EVENT_STAR_RATING); var u = this.showMinigameResultsScene(i, o, r, a, s);
                            u.signals.next.addOnce(function() { this.playMinigame(e, !0, s <= 1) }, this, 1), u.signals.previous.addOnce(function() { h["default"].save.unlockCertificate ? this.showMapScene(!0) : this.fadeTransition(function() { h["default"].scene.remove(2) }, null, this) }, this, 1), u.signals.map.addOnce(function() { this.showMapScene() }, this, 1) }, this), a.signals.pause.add(function(e, t) { e.pause && e.pause(); var i = this.showMinigameHelpScene(o, s, t);
                            i.signals.next.addOnce(function() { e.resume && e.resume() }, this, 1), i.signals.previous.add(function() { h["default"].save.unlockCertificate ? this.showMapScene(!0) : this.fadeTransition(function() { h["default"].scene.remove(2) }, null, this) }, this) }, this), t ? l.trackEvent(q["default"].EVENT_MINIGAME_REPLAY.replace("[MINIGAME]", u)) : l.trackEvent(q["default"].EVENT_MINIGAME_PLAY.replace("[MINIGAME]", u)), a } }, { key: "showAcornAntlersScene", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
                            t = new Z["default"]; return t.autoAppear = !1, e ? this.fadeTransition(function() { h["default"].scene.swap(t, 2) }, function() { t.appear() }, this) : this.fadeTransition(function() { h["default"].scene.add(t, !0) }, function() { t.appear() }, this), t } }, { key: "showBearCheekScene", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
                            t = new te["default"]; return t.autoAppear = !1, e ? this.fadeTransition(function() { h["default"].scene.swap(t, 2) }, function() { t.appear() }, this) : this.fadeTransition(function() { h["default"].scene.add(t, !0) }, function() { t.appear() }, this), t } }, { key: "showBroncoScene", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
                            t = new ne["default"]; return t.autoAppear = !1, e ? this.fadeTransition(function() { h["default"].scene.swap(t, 2) }, function() { t.appear() }, this) : this.fadeTransition(function() { h["default"].scene.add(t, !0) }, function() { t.appear() }, this), t } }, { key: "showBugAttackScene", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
                            t = new oe["default"]; return t.autoAppear = !1, e ? this.fadeTransition(function() { h["default"].scene.swap(t, 2) }, function() { t.appear() }, this) : this.fadeTransition(function() { h["default"].scene.add(t, !0) }, function() { t.appear() }, this), t } }, { key: "showDuckyEggsScene", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
                            t = new re["default"]; return t.autoAppear = !1, e ? this.fadeTransition(function() { h["default"].scene.swap(t, 2) }, function() { t.appear() }, this) : this.fadeTransition(function() { h["default"].scene.add(t, !0) }, function() { t.appear() }, this), t } }, { key: "showFlappyBertScene", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
                            t = new ue["default"]; return t.autoAppear = !1, e ? this.fadeTransition(function() { h["default"].scene.swap(t, 2) }, function() { t.appear() }, this) : this.fadeTransition(function() { h["default"].scene.add(t, !0) }, function() { t.appear() }, this), t } }, { key: "showFrogmanKickScene", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
                            t = new he["default"]; return t.autoAppear = !1, e ? this.fadeTransition(function() { h["default"].scene.swap(t, 2) }, function() { t.appear() }, this) : this.fadeTransition(function() { h["default"].scene.add(t, !0) }, function() { t.appear() }, this), t } }, { key: "showMonsterRunScene", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
                            t = new de["default"]; return t.autoAppear = !1, e ? this.fadeTransition(function() { h["default"].scene.swap(t, 2) }, function() { t.appear() }, this) : this.fadeTransition(function() { h["default"].scene.add(t, !0) }, function() { t.appear() }, this), t } }, { key: "showMountainHikingScene", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
                            t = new fe["default"]; return t.autoAppear = !1, e ? this.fadeTransition(function() { h["default"].scene.swap(t, 2) }, function() { t.appear() }, this) : this.fadeTransition(function() { h["default"].scene.add(t, !0) }, function() { t.appear() }, this), t } }, { key: "showPoodlePlayScene", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
                            t = new ve["default"]; return t.autoAppear = !1, e ? this.fadeTransition(function() { h["default"].scene.swap(t, 2) }, function() { t.appear() }, this) : this.fadeTransition(function() { h["default"].scene.add(t, !0) }, function() { t.appear() }, this), t } }, { key: "showPuffedUpScene", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
                            t = new ge["default"]; return t.autoAppear = !1, e ? this.fadeTransition(function() { h["default"].scene.swap(t, 2) }, function() { t.appear() }, this) : this.fadeTransition(function() { h["default"].scene.add(t, !0) }, function() { t.appear() }, this), t } }, { key: "showRaftBalanceScene", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
                            t = new be["default"]; return t.autoAppear = !1, e ? this.fadeTransition(function() { h["default"].scene.swap(t, 2) }, function() { t.appear() }, this) : this.fadeTransition(function() { h["default"].scene.add(t, !0) }, function() { t.appear() }, this), t } }, { key: "showRoyalRoarScene", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
                            t = new xe["default"]; return t.autoAppear = !1, e ? this.fadeTransition(function() { h["default"].scene.swap(t, 2) }, function() { t.appear() }, this) : this.fadeTransition(function() { h["default"].scene.add(t, !0) }, function() { t.appear() }, this), t } }, { key: "showSwordPracticeScene", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
                            t = new Ie["default"]; return t.autoAppear = !1, e ? this.fadeTransition(function() { h["default"].scene.swap(t, 2) }, function() { t.appear() }, this) : this.fadeTransition(function() { h["default"].scene.add(t, !0) }, function() { t.appear() }, this), t } }, {
                    key: "showSwordStrikeScene",
                    value: function() {
                        var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
                            t = new Se["default"];
                        return t.autoAppear = !1, e ? this.fadeTransition(function() { h["default"].scene.swap(t, 2) }, function() { t.appear() }, this) : this.fadeTransition(function() { h["default"].scene.add(t, !0) }, function() { t.appear() }, this), t
                    }
                }, { key: "showTurnipNinjaScene", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
                            t = new Ae["default"]; return t.autoAppear = !1, e ? this.fadeTransition(function() { h["default"].scene.swap(t, 2) }, function() { t.appear() }, this) : this.fadeTransition(function() { h["default"].scene.add(t, !0) }, function() { t.appear() }, this), t } }, { key: "showTurnipRoastScene", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
                            t = new Ee["default"]; return t.autoAppear = !1, e ? this.fadeTransition(function() { h["default"].scene.swap(t, 2) }, function() { t.appear() }, this) : this.fadeTransition(function() { h["default"].scene.add(t, !0) }, function() { t.appear() }, this), t } }, { key: "showWackagnomeScene", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
                            t = new Me["default"]; return t.autoAppear = !1, e ? this.fadeTransition(function() { h["default"].scene.swap(t, 2) }, function() { t.appear() }, this) : this.fadeTransition(function() { h["default"].scene.add(t, !0) }, function() { t.appear() }, this), t } }, { key: "showWitchDeflectScene", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
                            t = new Be["default"]; return t.autoAppear = !1, e ? this.fadeTransition(function() { h["default"].scene.swap(t, 2) }, function() { t.appear() }, this) : this.fadeTransition(function() { h["default"].scene.add(t, !0) }, function() { t.appear() }, this), t } }, { key: "showWolfRunScene", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
                            t = new Le["default"]; return t.autoAppear = !1, e ? this.fadeTransition(function() { h["default"].scene.swap(t, 2) }, function() { t.appear() }, this) : this.fadeTransition(function() { h["default"].scene.add(t, !0) }, function() { t.appear() }, this), t } }, { key: "showMinigameHelpScene", value: function(e, t, i) { var n = new E["default"](e, t, i); return n.signals.next.add(function(e) { h["default"].scene.remove() }, this), h["default"].scene.add(n, !1), n } }, { key: "showMinigameResultsScene", value: function(e, t, i, n, a) { var o = new M["default"](e, t, i, n, a); return h["default"].scene.add(o, !1), o } }, { key: "fadeTransition", value: function(e, t, i) { i = i || window; var n = new P3.FadeTransition;
                        this._transitionLayer.addChild(n), n.signals["in"].add(function() { n.out(), e && e.call(i) }, this), n.signals.out.add(function() { n.destroy(), t && t.call(i) }, this), n["in"]() } }, { key: "_initChat", value: function() { var e = h["default"].assets,
                            t = new u["default"](e.json("cmdata"));
                        t.signals.item.add(this._onItemChanged, this), t.signals.location.add(this._onLocationChanged, this), h["default"].chat = t } }, { key: "_initInventory", value: function() { var e = new g["default"];
                        h["default"].inventory = e; var t = h["default"].assets,
                            i = h["default"].chat.items; for (var n in i)
                            if (i.hasOwnProperty(n)) { var a = i[n],
                                    o = new b["default"](a.Name.replace(/ /g, "_"), translate(a.LocaleName), translate(a.LocaleDescription), a.Pictures.length ? t.texture(a.Pictures[0]) : PIXI.Texture.EMPTY, a.Pictures.length ? t.texture(a.Pictures[1]) : PIXI.Texture.EMPTY, a.Order, a.IsCertificate);
                                console.log(a.Pictures[1]), e.addItem(o, "True" === a.InInventory) } } }, { key: "_initQuestManager", value: function() { var e = h["default"].config.quests,
                            t = new H["default"](e);
                        t.signals.complete.add(function() { t.isComplete("quest1") && t.isComplete("quest2") && t.isComplete("quest3") && t.isComplete("quest4") && t.isComplete("quest5") && t.isComplete("quest6") && t.isComplete("quest7") && t.isComplete("quest8") && t.isComplete("quest9") && t.isComplete("quest10") && t.isComplete("quest11") && t.isComplete("quest13") && t.isComplete("quest15") && (t.completeQuest("quest16"), h["default"].save.showQuestCelebration = !0) }, this), h["default"].stage.addChild(t), h["default"].quest = t } }, { key: "_initNarratorManager", value: function() { var e = h["default"].chat,
                            t = new B["default"](e);
                        h["default"].stage.addChild(t), h["default"].narrator = t } }, { key: "_initSaveData", value: function() { var e = new V["default"];
                        e.loadGame(), h["default"].save = e } }, { key: "_onItemChanged", value: function(e, t, i, n) { var a = h["default"].inventory; switch (t) {
                            case "update":
                                if ("InInventory" === i) { if ("True" === n) { var o = a.getItemByName(e.Name);
                                        o && a.addItem(o, !0) } h["default"].save.saveGame(); var s = h["default"].quest,
                                        r = h["default"].inventory.foundItems.length,
                                        l = h["default"].inventory.items.length;
                                    r >= 1 && s.completeQuest("quest3"), r >= 5 && s.completeQuest("quest4"), r === l && s.completeQuest("quest5") } } } }, { key: "_onLocationChanged", value: function(e, t, i, n) { switch (t) {
                            case "update":
                                "IsVisited" === i && h["default"].save.saveGame() } } }, { key: "_unloadLocationManifest", value: function() { var e = h["default"].assets,
                            t = h["default"].currentManifest; if (console.log(t), h["default"].currentManifest = null, console.log(t), console.warn("unloading textures"), t) { console.log("has manifest"); for (var i = 0; i < t.length; ++i) { var n = t[i];
                                console.log("Unloading texture : " + n.name); var a = n.url.split("."); if (a = a[a.length - 1], "json" === a) { var o = e.json(n.name); if (o.meta && o.meta.image) { var s = o.meta.image.split(".");
                                        e.unloadTexture(s[0], s[1]) } } else e.unloadTexture(n.name, a) } } } }, { key: "_getLocationManifest", value: function(e) { switch (e) {
                            case 3:
                                return [{ name: "location_ep1_sassyGnomes_bg0_1x", url: "images/location_ep1_sassyGnomes_bg0_1x.json" }, { name: "location_ep1_sassyGnomes_0_1x", url: "images/location_ep1_sassyGnomes_0_1x.json" }, { name: "ep1_swordPractice_bg", url: "images/ep1_swordPractice_bg.jpg" }, { name: "minigame_ep1_swordPractice_0_1x", url: "images/minigame_ep1_swordPractice_0_1x.json" }, { name: "ep1_flyAttack_bg", url: "images/ep1_flyAttack_bg.jpg" }, { name: "minigame_ep1_flyAttack_0_1x", url: "images/minigame_ep1_flyAttack_0_1x.json" }];
                            case 4:
                                return [{ name: "location_ep2_hissySwan_bg0_1x", url: "images/location_ep2_hissySwan_bg0_1x.json" }, { name: "location_ep2_hissySwan_0_1x", url: "images/location_ep2_hissySwan_0_1x.json" }, { name: "location_ep2_hissySwan_1_1x", url: "images/location_ep2_hissySwan_1_1x.json" }, { name: "location_ep2_hissySwan_2_1x", url: "images/location_ep2_hissySwan_2_1x.json" }, { name: "ep2_royalRoar_bg", url: "images/ep2_royalRoar_bg.jpg" }, { name: "minigame_ep2_royalRoar_0_1x", url: "images/minigame_ep2_royalRoar_0_1x.json" }, { name: "ep2_bronco_bg", url: "images/ep2_bronco_bg.jpg" }];
                            case 5:
                                return [{ name: "location_ep3_kissyFrog_bg0_1x", url: "images/location_ep3_kissyFrog_bg0_1x.json" }, { name: "location_ep3_kissyFrog_0_1x", url: "images/location_ep3_kissyFrog_0_1x.json" }, { name: "ep3_frogKick_bg_1", url: "images/ep3_frogKick_bg_1.jpg" }, { name: "ep3_frogKick_bg_2", url: "images/ep3_frogKick_bg_2.jpg" }, { name: "minigame_ep3_frogKick_0_1x", url: "images/minigame_ep3_frogKick_0_1x.json" }, { name: "ep3_swordStrike_bg", url: "images/ep3_swordStrike_bg.jpg" }, { name: "minigame_ep3_swordStrike_0_1x", url: "images/minigame_ep3_swordStrike_0_1x.json" }];
                            case 6:
                                return [{ name: "location_ep4_thiefstress_bg0_1x", url: "images/location_ep4_thiefstress_bg0_1x.json" }, { name: "location_ep4_theifstress_0_1x", url: "images/location_ep4_theifstress_0_1x.json" }, { name: "location_ep4_theifstress_1_1x", url: "images/location_ep4_theifstress_1_1x.json" }, { name: "ep4_witchDeflect_bg", url: "images/ep4_witchDeflect_bg.jpg" }, { name: "minigame_ep4_witchDeflect_0_1x", url: "images/minigame_ep4_witchDeflect_0_1x.json" }, { name: "ep4_turnipNinja_bg", url: "images/ep4_turnipNinja_bg.jpg" }, { name: "minigame_ep4_turnipNinja_0_1x", url: "images/minigame_ep4_turnipNinja_0_1x.json" }];
                            case 7:
                                return [{ name: "location_ep5_prettyPoodle_bg0_1x", url: "images/location_ep5_prettyPoodle_bg0_1x.json" }, { name: "location_ep5_prettyPoodle_0_1x", url: "images/location_ep5_prettyPoodle_0_1x.json" }, { name: "location_ep5_prettyPoodle_1_1x", url: "images/location_ep5_prettyPoodle_1_1x.json" }, { name: "ep5_poodlePlay_bg", url: "images/ep5_poodlePlay_bg.jpg" }, { name: "minigame_ep5_poodlePlay_0_1x", url: "images/minigame_ep5_poodlePlay_0_1x.json" }, { name: "ep5_wolfRun_bg", url: "images/ep5_wolfRun_bg.jpg" }, { name: "minigame_ep5_wolfRun_0_1x", url: "images/minigame_ep5_wolfRun_0_1x.json" }];
                            case 8:
                                return [{ name: "location_ep6_raspberryFairy_bg0_1x", url: "images/location_ep6_raspberryFairy_bg0_1x.json" }, { name: "location_ep6_raspberryfairy_0_1x", url: "images/location_ep6_raspberryfairy_0_1x.json" }, { name: "location_ep6_raspberryfairy_1_1x", url: "images/location_ep6_raspberryfairy_1_1x.json" }, { name: "ep6_bearCheek_bg", url: "images/ep6_bearCheek_bg.jpg" }, { name: "ep6_flappyBert_bg_1", url: "images/ep6_flappyBert_bg_1.jpg" }, { name: "ep6_flappyBert_bg_2", url: "images/ep6_flappyBert_bg_2.jpg" }, { name: "minigame_ep6_flappyBert_0_1x", url: "images/minigame_ep6_flappyBert_0_1x.json" }];
                            case 9:
                                return [{ name: "location_ep7_pluckyduck_bg0_1x", url: "images/location_ep7_pluckyduck_bg0_1x.json" }, { name: "location_ep7_pluckyDuck_0_1x", url: "images/location_ep7_pluckyDuck_0_1x.json" }, { name: "ep7_duckyEggs_bg", url: "images/ep7_duckyEggs_bg.jpg" }, { name: "minigame_ep7_duckyEggs_0_1x", url: "images/minigame_ep7_duckyEggs_0_1x.json" }, { name: "ep7_turnipRoast_bg", url: "images/ep7_turnipRoast_bg.jpg" }, { name: "minigame_ep7_turnipRoast_0_1x", url: "images/minigame_ep7_turnipRoast_0_1x.json" }];
                            case 10:
                                return [{ name: "location_ep8_talkingTree_bg0_1x", url: "images/location_ep8_talkingTree_bg0_1x.json" }, { name: "location_ep8_talkingTree_0_1x", url: "images/location_ep8_talkingTree_0_1x.json" }, { name: "location_ep8_talkingTree_1_1x", url: "images/location_ep8_talkingTree_1_1x.json" }, { name: "ep8_wackagnome_bg", url: "images/ep8_wackagnome_bg.jpg" }, { name: "minigame_ep8_wackagnome_0_1x", url: "images/minigame_ep8_wackagnome_0_1x.json" }, { name: "ep8_acornAntlers_bg", url: "images/ep8_acornAntlers_bg.jpg" }, { name: "minigame_ep8_acornAntlers_0_1x", url: "images/minigame_ep8_acornAntlers_0_1x.json" }];
                            case 11:
                                return [{ name: "location_ep9_promDate_bg0_1x", url: "images/location_ep9_promDate_bg0_1x.json" }, { name: "location_ep9_promDate_0_1x", url: "images/location_ep9_promDate_0_1x.json" }, { name: "ep9_raftBalance_bg", url: "images/ep9_raftBalance_bg.jpg" }, { name: "minigame_ep9_raftBalance_0_1x", url: "images/minigame_ep9_raftBalance_0_1x.json" }, { name: "ep9_puffedUp_bg", url: "images/ep9_puffedUp_bg.jpg" }];
                            case 12:
                                return [{ name: "location_ep10_moanyMountain_bg0_1x", url: "images/location_ep10_moanyMountain_bg0_1x.json" }, { name: "location_ep10_moanyMountain_0_1x", url: "images/location_ep10_moanyMountain_0_1x.json" }, { name: "location_ep10_moanyMountain_1_1x", url: "images/location_ep10_moanyMountain_1_1x.json" }, { name: "ep10_monsterRun_bg_1", url: "images/ep10_monsterRun_bg_1.jpg" }, { name: "ep10_monsterRun_bg_2", url: "images/ep10_monsterRun_bg_2.jpg" }, { name: "minigame_ep10_monsterRun_0_1x", url: "images/minigame_ep10_monsterRun_0_1x.json" }, { name: "ep10_mountainHiking_bg", url: "images/ep10_mountainHiking_bg.jpg" }, { name: "minigame_ep10_mountainHiking_0_1x", url: "images/minigame_ep10_mountainHiking_0_1x.json" }, { name: "minigame_ep10_mountainHiking_1_1x", url: "images/minigame_ep10_mountainHiking_1_1x.json" }] } return [] } }]), e
            }();
        i["default"] = Re
    }, { "./CNCookieBar": 8, "./CertificateScene": 11, "./Common": 13, "./CreditsScene": 14, "./EnterNameScene": 15, "./GameScene": 16, "./InventoryItemScene": 19, "./InventoryScene": 20, "./LocationPreloaderScene": 22, "./MapScene": 24, "./MinigameHelpScene": 26, "./MinigameResultsScene": 27, "./PauseScene": 31, "./QuestLogScene": 33, "./SaveManager": 34, "./SplashScene": 36, "./Tracking": 39, "./TutorialScene": 41, "./VideoScene": 43, "./chat/ChatManager": 44, "./chat/NarratorManager": 47, "./inventory/Inventory": 75, "./inventory/InventoryItem": 76, "./minigames/AcornAntlers/AcornAntlersScene": 77, "./minigames/bearcheek/BearCheekScene": 83, "./minigames/bronco/BroncoScene": 87, "./minigames/bugattack/BugAttackScene": 92, "./minigames/duckyeggs/DuckyEggsScene": 96, "./minigames/flappybert/FlappyBertScene": 102, "./minigames/frogmankick/FrogmanKickScene": 105, "./minigames/monsterrun/MonsterRunScene": 118, "./minigames/mountainhiking/MountainHikingScene": 128, "./minigames/poodleplay/PoodlePlayScene": 135, "./minigames/puffedup/PuffedUpScene": 141, "./minigames/raftbalance/RaftBalanceScene": 148, "./minigames/royalroar/RoyalRoarScene": 152, "./minigames/swordpractice/SwordPracticeScene": 155, "./minigames/swordstrike/SwordStrikeScene": 161, "./minigames/turnipninja/TurnipNinjaScene": 167, "./minigames/turniproast/TurnipRoastScene": 173, "./minigames/wackagnome/WackagnomeScene": 176, "./minigames/witchdeflect/WitchDeflectScene": 181, "./minigames/wolfrun/WolfRunScene": 190, "./quests/QuestManager": 194, ismobilejs: 2 }],
    6: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("./Common"),
            _ = n(u),
            h = e("./NPC"),
            c = n(h),
            d = function(e) {
                function t(e, i) { a(this, t); var n = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, PIXI.Texture.EMPTY, i));
                    n.moveSpeed = 2200, n.velocity = new P3.Vector2, n.leader = null, n._arriveRadius = 200, n._followDistance = 160, n._skipFrame = 0, n._hoverY = 332, n._hoverTime = 0, n._hoverFrequency = .02, n._hoverAmplitude = 40, n._skipFrame = 0; var s = _["default"].assets,
                        r = new PIXI.Container; return n.addChild(r), n._view = new PIXI.spine.Spine(s.spineData("bert_front")), n._view.position.set(0, e.y), n._view.scale.set(.4, .4), n._view.skeleton.setToSetupPose(), n._view.autoUpdate = !1, n._view.update(0), r.addChild(n._view), n._view.state.addListener({ event: n._onAnimationEvent.bind(n) }), n } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this._view.state.setAnimation(0, "idle_fly", !0) } }, { key: "destroy", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "update", value: function(e) { if (this.leader) { var t = new PIXI.Point(this.leader.x, this.leader.y);
                            this.leader.direction && (this._isTalking ? t.x += 1.5 * this._followDistance * this.leader.direction : t.x += this._followDistance * -this.leader.direction); var i = Math.min(1, Math.abs(t.x - this.x) / this._arriveRadius);
                            t.y = this._hoverY + Math.sin(++this._hoverTime * this._hoverFrequency) * this._hoverAmplitude * i; var n = new P3.Vector2(t.x - this.x, t.y - this.y),
                                a = Math.abs(n.x),
                                o = this.moveSpeed; if (a < this._arriveRadius && (o = this.moveSpeed * a / this._arriveRadius), a < 1) { this.velocity.x = 0; var s = Math.sign(this.leader.x - this.x);
                                this.faceDirection(s) } else { var r = Math.sign(n.x);
                                this.faceDirection(r), n.normalize(), n.scaleBy(o), this.velocity.x += n.x * e, this.velocity.y += n.y * e, this.velocity.scaleBy(.92), this.x += this.velocity.x * e, this.y += this.velocity.y * e } } this._skipFrame++ % 2 === 0 && this._view.update(2 * e) } }, { key: "interact", value: function(e) { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "interact", this).call(this, e) } }, { key: "stopInteract", value: function(e) { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "stopInteract", this).call(this, e) } }, { key: "_playFlapSFX", value: function() { this.inCameraView && _["default"].audio.playSound(["sfx_flap_00", "sfx_flap_01"]) } }, { key: "_onAnimationEvent", value: function(e, t) { "sfx_flap" === t.data.name && this._playFlapSFX() } }, { key: "moving", get: function() { return this._moving } }]), t }(c["default"]);
        i["default"] = d }, { "./Common": 13, "./NPC": 30 }],
    7: [function(e, t, i) { "use strict";

        function n() { if (a.apple && !a.other.chrome) { var e = this.getSpec(); if (e) { this.height = e[0], window.addEventListener("resize", this.onResize.bind(this)), this.div = document.createElement("div"), this.div.style.backgroundColor = "#000000", this.div.style.position = "absolute", this.div.style.top = "0", this.div.style.left = "0", this.div.style.width = "100%", this.div.style.height = "9999999999999999px"; var t = idsettings;
                    this.image = new Image, this.image.src = t.assets.paths[t.assets.path] + "/images/brim.jpg", this.image.style.position = "absolute", this.image.style.top = "-35px", this.image.width = 0, this.div.appendChild(this.image), this.brimMode = !0, document.body.appendChild(this.div),
                        function() { var e;
                            document.addEventListener("touchstart", function(t) { this.brimMode && (e = !0, t.preventDefault(), t.returnValue = !1) }, !1), document.addEventListener("touchmove", function(t) { this.brimMode && (e && (t.preventDefault(), t.returnValue = !1), e = !1) }, !1) }(), this.onResize() } } } var a = e("ismobilejs");
        t.exports = n, n.prototype.getSpec = function() { for (var e = [
                    [320, 480, 2, "iPhone 4"],
                    [320, 568, 2, "iPhone 5 or 5s"],
                    [375, 667, 2, "iPhone 6"],
                    [414, 736, 3, "iPhone 6 plus"]
                ], t = 0; t < e.length; t++) { var i = e[t],
                    n = window.screen.height == i[0] && window.screen.width == i[1] || window.screen.width == i[0] && window.screen.height == i[1]; if (n) return i } return null }, n.prototype.showBrim = function() { this.div.style.visibility = "visible", this.div.style.height = "9999999999999999px" }, n.prototype.showGame = function() { this.div.style.visibility = "hidden", this.div.style.height = this.height + 1 + "px", window.scrollTo(0, 0) }, n.prototype.onResize = function() { window.innerHeight > window.innerWidth || window.innerHeight === this.height ? this.showGame() : this.showBrim(), this.image.width = window.innerWidth, window.scrollTo(0, 0) } }, { ismobilejs: 2 }],
    8: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("./Common"),
            u = n(l),
            _ = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._accepted = !1, e._bg = new PIXI.Sprite(PIXI.Texture.WHITE), e._bg.tint = 0, e._bg.interactive = !0, e.addChild(e._bg), e._label = new PIXI.Text(translate("cookies_policy_0") + " " + translate("cookies_policy_1"), { fontSize: 52, fontFamily: "Arial", fontWeight: "bold", align: "left", fill: 16777215, wordWrap: !0 }), e._label.position.set(20, 10), e._label.scale.set(.25), e.addChild(e._label), e._acceptButton = e._createButton(translate("cookies_policy_accept")), e._acceptButton.on("click", e.onAcceptButtonClick, e), e._acceptButton.on("tap", e.onAcceptButtonClick, e), e.addChild(e._acceptButton), e._infoButton = e._createButton(translate("cookies_policy_info")), e._infoButton.on("click", e.onInfoButtonClick, e), e._infoButton.on("tap", e.onInfoButtonClick, e), e.addChild(e._infoButton), e.resize(), e } return s(t, e), r(t, [{ key: "resize", value: function() { this._bg.width = P3.View.width, this._bg.height = 100, this._label.style.wordWrapWidth = 4 * Math.max(600, .6 * P3.View.width), this._acceptButton.position.set(P3.View.width - 340, 30), this._infoButton.position.set(this._acceptButton.x + this._acceptButton.width + 10, 30) } }, { key: "_createButton", value: function(e) { var t = new PIXI.Container;
                        t.interactive = !0, t.buttonMode = !0; var i = 140,
                            n = 40; return t.image = new PIXI.Sprite(PIXI.Texture.WHITE), t.image.width = i, t.image.height = n, t.addChild(t.image), t.label = new PIXI.Text(e, { fontSize: 52, fontFamily: "Arial", align: "center", fill: 0, wordWrap: !0, wordWrapWidth: 4 * i }), t.label.position.set(.5 * t.image.width, .5 * t.image.height), t.label.anchor.set(.5, .5), t.label.scale.set(.25), t.addChild(t.label), t } }, { key: "onAcceptButtonClick", value: function(e) { this._accepted ? (this.visible = !1, u["default"].save.saveCookiesPolicy()) : (this._accepted = !0, this._label.text = translate("cookies_policy_2") + " " + translate("cookies_policy_3"), this._acceptButton.label.text = translate("cookies_policy_close")) } }, { key: "onInfoButtonClick", value: function(e) { window.open(translate("cookies_policy_url"), "_blank") } }]), t }(PIXI.Container);
        i["default"] = _ }, { "./Common": 13 }],
    9: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("./Common"),
            _ = n(u),
            h = e("ismobilejs"),
            c = n(h),
            d = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e.loaded = 0, e._bar = null, e._text = null, e._playButton = null, e._finishedLoading = !1, e } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this); var e = _["default"].assets,
                            i = new PIXI.Graphics;
                        i.clear(), i.beginFill(0), i.drawRect(0, 0, _["default"].STAGE_WIDTH, _["default"].STAGE_HEIGHT), i.endFill(), this.addChild(i); var n = new PIXI.Sprite(e.texture("fg_preloader"));
                        n.x = .5 * _["default"].STAGE_WIDTH - 10, n.y = .5 * _["default"].STAGE_HEIGHT + 4, n.anchor = new PIXI.Point(.5, .5), this.addChild(n); var a = new PIXI.Container;
                        a.x = .5 * _["default"].STAGE_WIDTH, a.y = .5 * _["default"].STAGE_HEIGHT + 46, this.addChild(a), this._bar = new PIXI.Container, this._bar.y = 90, this._bar.scale = new PIXI.Point(.9, .9), this._bar.anchor = new PIXI.Point(.5, .5), a.addChild(this._bar), this._bar.fill = new PIXI.Sprite(e.texture("preloader_fill")), this._bar.fill.anchor = new PIXI.Point(.5, .5), this._bar.addChild(this._bar.fill), this._bar.fill.mask = new PIXI.Graphics, this._bar.fill.mask.x = .5 * -this._bar.fill.texture.width, this._bar.fill.mask.scale.x = 0, this._bar.fill.mask.beginFill(16711680), this._bar.fill.mask.drawRect(0, .5 * -this._bar.fill.texture.height, this._bar.fill.texture.width, this._bar.fill.texture.height), this._bar.fill.addChild(this._bar.fill.mask), this._bar.frame = new PIXI.Sprite(e.texture("preloader_overlay")), this._bar.frame.x = -260, this._bar.frame.anchor = new PIXI.Point(.5, .5), this._bar.addChild(this._bar.frame), this._createPlayButton(), Howler.ctx && Howler.ctx.resume && Howler.ctx.resume() } }, { key: "resize", value: function() { this.x = .5 * (P3.View.width - _["default"].STAGE_WIDTH) } }, { key: "update", value: function() { var e = Math.min(1, this.loaded); if (this._bar.fill.mask.scale.x += .4 * (e - this._bar.fill.mask.scale.x), e >= 1 && !this._finishedLoading) { this._finishedLoading = !0; var t = this.addTween(new TimelineMax);
                            t.append(TweenMax.to(this._bar.scale, .2, { x: 0, y: 0, ease: Power1.easeInOut, onComplete: function() { this._bar.visible = !1 }, onCompleteScope: this })), this._playButton.scale.set(0), t.append(TweenMax.to(this._playButton.scale, .34, { x: 1, y: 1, ease: Back.easeOut, easeParams: [2], onStart: function() { this._playButton.visible = !0 }, onStartScope: this })) } } }, { key: "_createPlayButton", value: function() { var e = _["default"].assets;
                        this._playButton = P3.Button.create(e.texture("btn_primary_blue_large_off"), e.texture("btn_primary_blue_large_over"), e.texture("btn_primary_blue_large_over"), e.texture("icon_large_play")), this._playButton.x = .5 * _["default"].STAGE_WIDTH, this._playButton.y = 580, this._playButton.visible = !1, this._playButton.overSoundName = "sfx_ui_rollover_00", this._playButton.clickSoundName = "sfx_ui_click_01", this._playButton.signals.click.add(this._onPlayButtonClick, this), this.addChild(this._playButton) } }, { key: "_onPlayButtonClick", value: function(e) { Howler.ctx && Howler.ctx.resume && Howler.ctx.resume(), this._playButton.interactive = !1, console.log(c["default"].android), c["default"].android.device && screenfull.enabled && (screenfull.request(), setTimeout(function() { _["default"].view.resize() }, 1e3)), this.signals.next.dispatch(this) } }]), t }(P3.Scene);
        i["default"] = d }, { "./Common": 13, ismobilejs: 2 }],
    10: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function f(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : f(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("./Common"),
            _ = n(u),
            h = e("./NPC"),
            c = n(h),
            d = e("ismobilejs"),
            p = (n(d), function(e) {
                function t(e) { var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : -1;
                    a(this, t); var n = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, i)); return n._flames = null, n._emitter = null, n._burning = !0, n._loopSFX = null, n.hitArea = new PIXI.Rectangle((-170), 160, 340, 80), n.lookAtInteract = !1, n } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this._createFlamesAnimation(), this._createEmitter(), this.wantChat = !0, this._loopSFX = _["default"].audio.playSound("sfx_fire_loop_00", { loop: !0 }) } }, { key: "destroy", value: function() { this._emitter.destroy(), this._loopSFX && (this._loopSFX.destroy(), this._loopSFX = null), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "update", value: function(e) { this._emitter.update(e), this._loopSFX && this._setAudioPosStereo(this._loopSFX, this, _["default"].camera) } }, { key: "interact", value: function(e) { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "interact", this).call(this, e), this._burning ? (this._burning = !1, this._flames.visible = !1, this._emitter.emit = !1, this._loopSFX.stop(), _["default"].audio.playSound("sfx_fire_extinguish_00")) : (this._burning = !0, this._emitter.emit = !0, this._flames.scale = new PIXI.Point, TweenMax.killTweensOf(this._flames.scale), TweenMax.to(this._flames.scale, .2, { x: 4, ease: Back.easeOut, easeParams: [2], onStart: function() { this._flames.visible = !0 }, onStartScope: this }), TweenMax.to(this._flames.scale, .3, { y: 4, ease: Back.easeOut, easeParams: [2] }), this._loopSFX.play(), _["default"].audio.playSound("sfx_fire_relight_00")) } }, { key: "pauseLoopSFX", value: function() { this._loopSFX && this._loopSFX.pause() } }, { key: "resumeLoopSFX", value: function() { this._loopSFX && this._loopSFX.play() } }, { key: "_createFlamesAnimation", value: function() { for (var e = _["default"].assets, t = new P3.MovieClipSequence, i = [], n = 0; n < 16; ++n) i.push(e.texture("fx_campfire_" + P3.utils.padNum(n, 2)));
                        t.addTextures(i), this._flames = new P3.MovieClip(t), this._flames.y = 220, this._flames.scale = new PIXI.Point(4, 4), this._flames.anchor = new PIXI.Point(.5, .94), this._flames.animationSpeed = 8, this._flames.looping = !0, this._flames.blendMode = PIXI.BLEND_MODES.ADD, this._flames.play(), this.addChild(this._flames) } }, { key: "_createEmitter", value: function() { var e = _["default"].assets,
                            t = e.json("particle_emitter_fire_sparks_00"),
                            i = new PIXI.Container;
                        i.y = 180, this.addChild(i), this._emitter = new PIXI.particles.Emitter(i, [e.texture("particle_fire_sparks_00"), e.texture("particle_fire_sparks_01"), e.texture("particle_fire_sparks_02"), e.texture("particle_fire_sparks_03")], t) } }, { key: "_setAudioPosStereo", value: function(e, t, i, n, a) { n = n || 0, a = a || 320; var o = t.x;
                        o = Math.max(0, Math.abs(o - n - i.position.x) / a), o = Math.max(0, Math.min(1, 1 + (1 - o))), e.howl.volume(o, e.id) } }, { key: "flames", get: function() { return this._flames } }, { key: "emitter", get: function() { return this._emitter } }, { key: "buring", get: function() { return this._burning } }]), t }(c["default"]));
        i["default"] = p }, { "./Common": 13, "./NPC": 30, ismobilejs: 2 }],
    11: [function(e, t, i) {
        "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 });
        var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("./Common"),
            _ = n(u),
            h = e("./Tracking"),
            c = n(h),
            d = function(e) {
                function t() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "A.A.A.",
                        i = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
                    a(this, t); var n = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, i)); return n._overlay = null, n._certificate = null, n._titleLabel = null, n._descLabel = null, n._nameLabel = null, n._printButton = null, n._saveButton = null, n._closeButton = null, n._name = e, n._narratorTimer = null, n._firstTime = i, n }
                return s(t, e), r(t, [{ key: "init", value: function() { this._overlay = new PIXI.Graphics, this._overlay.interactive = !0, this.addChild(this._overlay); var e = new PIXI.Container;
                        this.addChild(e); var t = _["default"].assets;
                        this._certificate = new PIXI.Sprite(t.texture("certificate")), this._certificate.anchor = new PIXI.Point(.5, .5), e.addChild(this._certificate), this._createTitleLabel(), this._createDescLabel(), this._createNameLabel(); var i = new PIXI.RenderTexture.create(this._certificate.parent.width, this._certificate.parent.height, PIXI.settings.SCALE_MODE.DEFAULT, 1);
                        this._certificate.x = .5 * this._certificate.texture.width, this._certificate.y = .5 * this._certificate.texture.height, _["default"].renderer.render(this._certificate.parent, i), this._certificate.texture = i, this._certificate.x = .5 * _["default"].STAGE_WIDTH, this._certificate.y = .5 * P3.View.height, this._createPrintButton(), this._createSaveButton(), this._createCloseButton() } }, {
                    key: "destroy",
                    value: function() {
                        _["default"].narrator.stopNarratorSFX(), this._narratorTimer && (this._narratorTimer.kill(),
                            this._narratorTimer = null), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this)
                    }
                }, { key: "resize", value: function() { this.x = .5 * (P3.View.width - _["default"].STAGE_WIDTH), this._overlay.clear(), this._overlay.beginFill(0, .8), this._overlay.drawRect(.5 * (_["default"].STAGE_WIDTH - P3.View.width), 0, P3.View.width, P3.View.height), this._overlay.endFill(), this._closeButton.x = .5 * (_["default"].STAGE_WIDTH + P3.View.width) - 100, this._closeButton.y = 100, this._saveButton.x = this._closeButton.x - 120, this._saveButton.y = this._closeButton.y, this._printButton.x = this._saveButton.x - 120, this._printButton.y = this._saveButton.y } }, { key: "appear", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "appear", this).call(this), this._firstTime && (this._narratorTimer = delay(function() { _["default"].chat.playConversation(69) }, 1, this)) } }, { key: "_createTitleLabel", value: function() { webfont ? (this._titleLabel = new PIXI.Text(translate("item_certificate_name"), { fontSize: "46px", fontFamily: "Arial", align: "center", fill: 0 }), this._titleLabel.x = -16, this._titleLabel.y = -70, this._titleLabel.anchor.set(.5), this._certificate.addChild(this._titleLabel)) : (this._titleLabel = new PIXI.extras.BitmapText(translate("item_certificate_name"), { font: "50px Alghera Pro", align: "center" }), this._titleLabel.x = -16, this._titleLabel.y = -70, this._titleLabel.anchor.set(.5), this._titleLabel.tint = 0, this._certificate.addChild(this._titleLabel)) } }, { key: "_createDescLabel", value: function() { webfont ? (this._descLabel = new PIXI.Text(translate("item_certificate_description"), { fontSize: "26px", fontFamily: "Arial", align: "center", fill: 0, wordWrap: !0, wordWrapWidth: 640 }), this._descLabel.x = -16, this._descLabel.y = -16, this._descLabel.anchor.set(.5, 0), this._certificate.addChild(this._descLabel)) : (this._descLabel = new PIXI.extras.BitmapText(translate("item_certificate_description"), { font: "30px Alghera Pro", align: "center" }), this._descLabel.x = -16, this._descLabel.y = -16, this._descLabel.anchor.set(.5, 0), this._descLabel.tint = 8814410, this._descLabel.maxWidth = 640, this._certificate.addChild(this._descLabel)) } }, { key: "_createNameLabel", value: function() { webfont ? (this._nameLabel = new PIXI.Text(this._name, { fontSize: "46px", fontFamily: "Arial", align: "center", fill: 0 }), this._nameLabel.x = -16, this._nameLabel.y = 154, this._nameLabel.anchor.set(.5), this._certificate.addChild(this._nameLabel)) : (this._nameLabel = new PIXI.extras.BitmapText(this._name, { font: "50px Alghera Pro", align: "center" }), this._nameLabel.x = -16, this._nameLabel.y = 154, this._nameLabel.anchor.set(.5), this._nameLabel.tint = 0, this._certificate.addChild(this._nameLabel)) } }, { key: "_createPrintButton", value: function() { var e = _["default"].assets;
                        this._printButton = P3.Button.create(e.texture("btn_primary_small_off"), e.texture("btn_primary_small_over"), e.texture("btn_primary_small_over"), e.texture("icon_print")), this._printButton.overSoundName = "sfx_ui_rollover_00", this._printButton.clickSoundName = "sfx_ui_click_01", this._printButton.signals.click.add(this._onPrintButtonClick, this), this.addChild(this._printButton) } }, { key: "_createSaveButton", value: function() { var e = _["default"].assets;
                        this._saveButton = P3.Button.create(e.texture("btn_primary_small_off"), e.texture("btn_primary_small_over"), e.texture("btn_primary_small_over"), e.texture("icon_download")), this._saveButton.overSoundName = "sfx_ui_rollover_00", this._saveButton.clickSoundName = "sfx_ui_click_01", this._saveButton.signals.click.add(this._onSaveButtonClick, this), this.addChild(this._saveButton) } }, { key: "_createCloseButton", value: function() { var e = _["default"].assets;
                        this._closeButton = P3.Button.create(e.texture("btn_primary_small_off"), e.texture("btn_primary_small_over"), e.texture("btn_primary_small_over"), e.texture("icon_close")), this._closeButton.overSoundName = "sfx_ui_rollover_00", this._closeButton.clickSoundName = "sfx_ui_click_01", this._closeButton.signals.click.add(this._onCloseButtonClick, this), this.addChild(this._closeButton) } }, { key: "_onPrintButtonClick", value: function(e) { var t = _["default"].renderer.extract.canvas(this._certificate.texture),
                            i = window.open(); if (i) { i.document.body.appendChild(t); var n = "@page {size: landscape; margin-top: 1.4cm; margin-left: 2.3cm;}",
                                a = i.document.head || i.document.getElementsByTagName("head")[0],
                                o = document.createElement("style");
                            o.type = "text/css", o.media = "print", o.styleSheet ? o.styleSheet.cssText = n : o.appendChild(document.createTextNode(n)), a.appendChild(o), i.print(), i.close(), _["default"].tracking.trackEvent(c["default"].EVENT_PRINT_CERTIFICATE) } } }, { key: "_onSaveButtonClick", value: function(e) { var t = _["default"].config.settings,
                            i = _["default"].renderer.extract.canvas(this._certificate.texture);
                        i.toBlob && i.toBlob(function(e) { saveAs(e, t.certificate.name), _["default"].tracking.trackEvent(c["default"].EVENT_DOWNLOAD_CERTIFICATE) }, t.certificate.type) } }, { key: "_onCloseButtonClick", value: function(e) { this.signals.previous.dispatch(this) } }]), t
            }(P3.Scene);
        i["default"] = d
    }, { "./Common": 13, "./Tracking": 39 }],
    12: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function c(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : c(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("./Common"),
            _ = n(u),
            h = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._emitter1 = null, e._emitter2 = null, e.interactive = !1, e.interactiveChildren = !1, e._initEmitter1(), e._initEmitter2(), e } return s(t, e), r(t, [{ key: "destroy", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, { removeChildren: !0 }) } }, { key: "play", value: function() { this._emitter1.emit = !0, this._emitter2.emit = !0 } }, { key: "update", value: function(e) { this._emitter1.update(e), this._emitter2.update(e), this._emitter1.emit && this._emitter2.emit || this.children.length || (this.destroy(), console.log("destroyed click effect")) } }, { key: "_initEmitter1", value: function() { var e = _["default"].assets,
                            t = e.json("effect_click_001");
                        this._emitter1 = new PIXI.particles.Emitter(this, [e.texture("click_1")], t), this._emitter1.emit = !1 } }, { key: "_initEmitter2", value: function() { var e = _["default"].assets,
                            t = _["default"].assets.json("effect_click_002");
                        this._emitter2 = new PIXI.particles.Emitter(this, [e.texture("click_2_001"), e.texture("click_2_002"), e.texture("click_2_003"), e.texture("click_2_004"), e.texture("click_2_005"), e.texture("click_2_006"), e.texture("click_2_007"), e.texture("click_2_008"), e.texture("click_2_009"), e.texture("click_2_010"), e.texture("click_2_011"), e.texture("click_2_012")], t), this._emitter2.emit = !1 } }]), t }(PIXI.Container);
        i["default"] = h }, { "./Common": 13 }],
    13: [function(e, t, i) { "use strict";

        function n(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") } Object.defineProperty(i, "__esModule", { value: !0 }); var a = function o() { n(this, o) };
        i["default"] = a, a.STAGE_WIDTH = 1900, a.STAGE_HEIGHT = 768, a.PHYSICS_TICK = 1 / 30, a.stage = null, a.renderer = null, a.audio = null, a.camera = null, a.copy = null, a.config = null, a.language = "en", a.paused = !1, a.isWebGL = !1, a.isFirstTime = !0, a.blankTexture = PIXI.Texture.EMPTY, a.currentLocation = 1 }, {}],
    14: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("./Common"),
            u = n(l),
            _ = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._closeButton = null, e._textHolder = null, e._textLineOffset = 0, e } return s(t, e), r(t, [{ key: "init", value: function() { var e = u["default"].assets,
                            t = new PIXI.Sprite(e.texture("bg_credits", "jpg"));
                        t.width = u["default"].STAGE_WIDTH, this.addChild(t), this._textHolder = new PIXI.Container, this._textHolder.x = .5 * u["default"].STAGE_WIDTH, this._textHolder.y = P3.View.height, this.addChild(this._textHolder), this.addTitle("THE HEROIC QUEST OF\nTHE VALIANT PRINCE IVANDOE"), this.addNewLine(), this.addTitle("Created by"), this.addName("Eva Lee Wallberg"), this.addName("Christian Bving-Andersen"), this.addNewLine(), this.addTitle("Directed by"), this.addName("Christian Bving-Andersen"), this.addName("Eva Lee Wallberg"), this.addNewLine(), this.addTitle("Written by"), this.addName("Christian Bving-Andersen"), this.addName("Eva Lee Wallberg"), this.addName("Daniel Lennard"), this.addNewLine(), this.addTitle("English Voices"), this.addNewHalfLine(), this.addVoiceActor("Prince Ivandoe", "Rasmus Hardiker"), this.addVoiceActor("", "Laus Hybye"), this.addNewQuarterLine(), this.addVoiceActor("Bert", "Rasmus Hardiker"), this.addNewQuarterLine(), this.addVoiceActor("Frogman", "Hugo Harrison"), this.addNewQuarterLine(), this.addVoiceActor("Poodle", "Steve Furst"), this.addNewQuarterLine(), this.addVoiceActor("Swan Prince", "Alex Jordan"), this.addNewQuarterLine(), this.addVoiceActor("Rodent", "Alex Jordan"), this.addNewQuarterLine(), this.addVoiceActor("Gnomes", "Dustin Demri-Burns"), this.addVoiceActor("", "Alex Jordan"), this.addVoiceActor("", "Christian Bving-Andersen"), this.addNewQuarterLine(), this.addVoiceActor("Mountain", "Brian Blessed"), this.addNewQuarterLine(), this.addVoiceActor("Creature", "Kerry Howard"), this.addNewQuarterLine(), this.addVoiceActor("Troll Woman", "Kerry Howard"), this.addNewQuarterLine(), this.addVoiceActor("King Axalotyl", "Rob Rackstraw"), this.addNewQuarterLine(), this.addVoiceActor("Princess Syllabob", "Rasmus Hardiker"), this.addVoiceActor("", "Rob Rackstraw"), this.addNewQuarterLine(), this.addVoiceActor("Puffer Fish Maids", "Rasmus Hardiker"), this.addNewQuarterLine(), this.addVoiceActor("Jezebel", "Laura Aikman"), this.addNewQuarterLine(), this.addVoiceActor("Poe", "Laura Aikman"), this.addNewLine(), this.addTitle("Intro Song"), this.addNewHalfLine(), this.addTitle("Lead Vocal Performed by"), this.addName("Damian Humbley"), this.addNewHalfLine(), this.addTitle("Logo Voice"), this.addName("Martin Buch"), this.addNewLine(), this.addTitle("Danish Voices"), this.addNewHalfLine(), this.addVoiceActor("Prince Ivandoe", "Laus Hybye"), this.addNewQuarterLine(), this.addVoiceActor("Bert", "Emil Blak Olsen"), this.addNewQuarterLine(), this.addVoiceActor("Frogman", "Pelle Emil Hebsgaard"), this.addNewQuarterLine(), this.addVoiceActor("Poodle", "Sigurd Holmen le Dous"), this.addNewQuarterLine(), this.addVoiceActor("Swan Prince", "Sigurd Holmen le Dous"), this.addNewQuarterLine(), this.addVoiceActor("Rodent", "Benjamin Hasselflug"), this.addNewQuarterLine(), this.addVoiceActor("Gnomes", "Benjamin Hasselflug"), this.addVoiceActor("", "Pelle Emil Hebsgaard"), this.addVoiceActor("", "Emil Blak Olsen"), this.addNewQuarterLine(), this.addVoiceActor("Mountain", "Nis Bank-Mikkelsen"), this.addNewQuarterLine(), this.addVoiceActor("Lovestruck Creature", "Pelle Emil Hebsgaard"), this.addNewQuarterLine(), this.addVoiceActor("Troll Woman", "Julie Agnete Vang"), this.addNewQuarterLine(), this.addVoiceActor("King Axalotyl", "Peter Zhelder"), this.addNewQuarterLine(), this.addVoiceActor("Lady Badger", "Pelle Emil Hebsgaard"), this.addNewQuarterLine(), this.addVoiceActor("Hansi", "Pelle Emil Hebsgaard"), this.addNewQuarterLine(), this.addVoiceActor("Fritzi", "Sigurd Holmen le Dous"), this.addNewQuarterLine(), this.addVoiceActor("Bear", "Peter Zhelder"), this.addNewQuarterLine(), this.addVoiceActor("Puffer Fish Maids", "Sara Ekander Poulsen"), this.addNewQuarterLine(), this.addVoiceActor("Jezebel", "Sara Ekander Poulsen"), this.addNewQuarterLine(), this.addVoiceActor("Poe", "Julie Agnete Vang"), this.addNewLine(), this.addTitle("Intro Song"), this.addNewHalfLine(), this.addTitle("Lead Vocal Performed by"), this.addName("Simon Duus"), this.addNewLine(), this.addTitle("Swedish Voices"), this.addNewHalfLine(), this.addVoiceActor("Prince Ivandoe", "Nicklas Berglund"), this.addNewQuarterLine(), this.addVoiceActor("Bert", "Adam Portnoff"), this.addNewQuarterLine(), this.addVoiceActor("Frogman", "Anton Olofson Raeder"), this.addNewQuarterLine(), this.addVoiceActor("Poodle", "Oscar Harryson"), this.addNewQuarterLine(), this.addVoiceActor("Swan Prince", "Oscar Harryson"), this.addNewQuarterLine(), this.addVoiceActor("Rodent", "Anton Olofson Raeder"), this.addNewQuarterLine(), this.addVoiceActor("Gnomes", "Oscar Harryson"), this.addVoiceActor("", "Anton Olofson Raeder"), this.addNewQuarterLine(), this.addVoiceActor("Mountain", "Oscar Harryson"), this.addNewQuarterLine(), this.addVoiceActor("Lovestruck Creature", "Anton Olofson Raeder"), this.addNewQuarterLine(), this.addVoiceActor("Troll Woman", "Vicki Benckert"), this.addNewQuarterLine(), this.addVoiceActor("King Axalotyl", "Oscar Harryson"), this.addNewQuarterLine(), this.addVoiceActor("Princess Syllabob", "Vicki Benckert"), this.addNewQuarterLine(), this.addVoiceActor("Lady Badger", "Vicki Benckert"), this.addNewQuarterLine(), this.addVoiceActor("Hansi", "Anton Olofson Raeder"), this.addNewQuarterLine(), this.addVoiceActor("Fritzi", "Oscar Harryson"), this.addNewQuarterLine(), this.addVoiceActor("Bear", "Oscar Harryson"), this.addNewQuarterLine(), this.addVoiceActor("Puffer Fish Maids", "Vicki Benckert"), this.addNewQuarterLine(), this.addVoiceActor("Jezebel", "Vicki Benckert"), this.addNewQuarterLine(), this.addVoiceActor("Poe", "Vicki Benckert"), this.addNewLine(), this.addTitle("Intro Song"), this.addNewHalfLine(), this.addTitle("Lead Vocal Performed by"), this.addName("Nicklas Berglund"), this.addNewHalfLine(), this.addTitle("Choir 1 & 2"), this.addName("Adam Portnoff"), this.addNewHalfLine(), this.addTitle("Choir 3 & 4"), this.addName("Oscar Harryson"), this.addNewHalfLine(), this.addTitle("Logo Voice"), this.addName("Magnus Wedrup"), this.addNewLine(), this.addTitle("Norwegian Voices"), this.addNewHalfLine(), this.addVoiceActor("Prince Ivandoe", "Leo Meieran"), this.addNewQuarterLine(), this.addVoiceActor("Bert", "Victor Sotberg"), this.addNewQuarterLine(), this.addVoiceActor("Frogman", "Henrik Horge"), this.addNewQuarterLine(), this.addVoiceActor("Poodle", "yvind B. Lyse"), this.addNewQuarterLine(), this.addVoiceActor("Swan Prince", "Henrik Horge"), this.addNewQuarterLine(), this.addVoiceActor("Rodent", "yvind B. Lyse"), this.addNewQuarterLine(), this.addVoiceActor("Gnomes", "Henrik Horge"), this.addNewQuarterLine(), this.addVoiceActor("Mountain", "yvind B. Lyse"), this.addNewQuarterLine(), this.addVoiceActor("Lovestruck Creature", "Henrik Horge"), this.addNewQuarterLine(), this.addVoiceActor("Troll Woman", "Christel Marie Blunck"), this.addNewQuarterLine(), this.addVoiceActor("King Axalotyl", "yvind B. Lyse"), this.addNewQuarterLine(), this.addVoiceActor("Princess Syllabob", "Christel Marie Blunck"), this.addNewQuarterLine(), this.addVoiceActor("Lady Badger", "Henrik Horge"), this.addNewQuarterLine(), this.addVoiceActor("Hansi", "Henrik Horge"), this.addNewQuarterLine(), this.addVoiceActor("Fritzi", "yvind B. Lyse"), this.addNewQuarterLine(), this.addVoiceActor("Bear", "yvind B. Lyse"), this.addNewQuarterLine(), this.addVoiceActor("Puffer Fish Maids", "Christel Marie Blunck"), this.addNewQuarterLine(), this.addVoiceActor("Jezebel", "Christel Marie Blunck"), this.addNewQuarterLine(), this.addVoiceActor("Poe", "Christel Marie Blunck"), this.addNewLine(), this.addTitle("Intro Song"), this.addNewHalfLine(), this.addTitle("Lead Vocal Performed by"), this.addName("yvind B. Lyse"), this.addNewHalfLine(), this.addTitle("Backing vocal"), this.addName("Henrik Horge"), this.addNewHalfLine(), this.addTitle("Logo Voice"), this.addName("yvind B. Lyse"), this.addNewLine(), this.addTitle("Storyboard"), this.addName("Kenneth Ladekjr"), this.addName("Eva Lee Wallberg"), this.addName("Christian Bving-Andersen"), this.addNewLine(), this.addTitle("Editor"), this.addName("Bo Juhl"), this.addName("Rikke Malene Nielsen"), this.addNewLine(), this.addTitle("Editing Consultant"), this.addName("Anthony Hull"), this.addNewLine(), this.addTitle("Art Director"), this.addName("Birk Von Brockdorff"), this.addNewLine(), this.addTitle("Character and Title Designer"), this.addName("Mikkel Sommer"), this.addNewLine(), this.addTitle("Logo Designer"), this.addName("Ryan Robinson"), this.addNewLine(), this.addTitle("Lead Set Builder and Set Dresser"), this.addName("Katja Moll"), this.addNewLine(), this.addTitle("Set Builder and Set Dresser"), this.addName("Rune Alexandersen"), this.addNewLine(), this.addTitle("Set Building Intern"), this.addName("Rasmus Broe and Maja Ballund"), this.addNewLine(), this.addTitle("Layout and Set Building Assistant"), this.addName("Birk Von Brockdorff"), this.addNewLine(), this.addTitle("Cinematographer"), this.addName("Johan Oettinger"), this.addName("Jonathan Elsborg"), this.addNewLine(), this.addTitle("Cinematographer Intern"), this.addName("Katrine Glenhammer"), this.addNewLine(), this.addTitle("Background Design and Matte Painter"), this.addName("Birk Von Brockdorff"), this.addNewLine(), this.addTitle("Lead Compositing"), this.addName("Birk Von Brockdorff"), this.addNewLine(), this.addTitle("Compositing"), this.addName("Guillaume Dousse"), this.addName("Jessica Nicholls"), this.addName("Cedric Marquis"), this.addNewLine(), this.addTitle("Compositing and Scripting Consultant"), this.addName("Andreas Severin and Victoria Jardine"), this.addNewLine(), this.addTitle("Pipeline and Technician"), this.addName("Christian Gyldmark"), this.addNewLine(), this.addTitle("Animation"), this.addName("Henrik Snniksen"), this.addName("Tina Lykke Thorn"), this.addName("Eva Lee Wallberg"), this.addName("Mikkel Vedel"), this.addName("Simone Cirillo"), this.addName("Christian Bving-Andersen"), this.addName("Marion Delpech"), this.addName("Christoffer Elsborg Kramme"), this.addName("Kenneth Ladekjr"), this.addName("Mikkel Mainz Elkjr"), this.addNewLine(), this.addTitle("FX Animation"), this.addName("Thibaud Petitpas"), this.addName("Marion Delpech"), this.addName("Mehdi Aouichaoui"), this.addNewLine(), this.addTitle("Animation Intro"), this.addName("Kenneth Ladekjr"), this.addNewLine(), this.addTitle("Clean-up and Coloring Intro"), this.addName("Julie Astrup and Nicoline de Selsted Lind"), this.addNewLine(), this.addTitle("Clean-up Artists"), this.addName("Mikkel Mainz Elkjr"), this.addName("Tor. C Engdal"), this.addName("Giulia Sara Bellunato"), this.addName("Michael Logar"), this.addName("Tania Sandroni"), this.addName("Kris Brown"), this.addName("Michael Logar"), this.addNewLine(), this.addTitle("Animation Interns"), this.addName("Julie Astrup"), this.addName("Alice Blaskevic"), this.addName("Leonard Ferrer"), this.addName("Niccolo Picello"), this.addName("Lea Pietrzyk"), this.addNewLine(), this.addTitle("Production Manager Sun Creature"), this.addName("Charlotte Sanchez"), this.addNewLine(), this.addTitle("Production Managers Cartoon Network"), this.addName("Helen Stern and Lisa Smith"), this.addNewLine(), this.addTitle("Interns"), this.addName("Margot Leger"), this.addName("Stina Lee Willadsen"), this.addNewLine(), this.addTitle("Original music composed and recorded by"), this.addName("Mathias Valiant, Morten Dalsgaard and Johan Petersen"), this.addNewLine(), this.addTitle("Voice Director"), this.addName("Adam Long"), this.addName("Richard Overall"), this.addNewLine(), this.addTitle("Sound Design and Mix"), this.addName("Thomas Arent"), this.addNewLine(), this.addTitle("Digital Post-Production"), this.addName("Dicentia"), this.addNewLine(), this.addTitle("UK Recordist"), this.addName("James OBrien, Fitzrovia Post"), this.addNewLine(), this.addTitle("Producers for Sun Creature"), this.addName("Charlotte de la Gournerie"), this.addName("Petter Lindblad"), this.addNewLine(), this.addTitle("Creative Producer for Cartoon Network"), this.addName("Daniel Lennard"), this.addNewLine(), this.addTitle("Executive Producers for Cartoon Network"), this.addName("Sarah Fell"), this.addName("Patricia Hidalgo"), this.addNewLine(), this.addTitle("Executive Producer for Cartoon Network Nordic"), this.addName("Jeanette Reutzer"), this.addNewLine(), this.addTitle("Ivandoe Adventure Game"), this.addNewHalfLine(), this.addTitle("Developer"), this.addName("Playerthree"), this.addNewLine(), this.addTitle("Producer"), this.addName("Martha Henson"), this.addNewLine(), this.addTitle("English Narrator"), this.addName("Stephen Gray"), this.addNewLine(), this.addTitle("Danish Narrator"), this.addName("Morten Hemmingsen"), this.addNewLine(), this.addTitle("Swedish Narrator"), this.addName("Mathias Henning"), this.addNewLine(), this.addTitle("Norwegian Narrator"), this.addName("Preben Olram"), this.addNewLine(), this.addTitle("Localisation Producer"), this.addName("Antonio Grasso"), this.addNewLine(), this.addTitle("Script Writor and Show Consultant"), this.addName("Daniel Leonnard"), this.addNewLine(), this.addTitle("Game Consultant"), this.addName("Trevor Klein"), this.addNewLine(), this.addTitle("Illustrator"), this.addName("Mikkel Sommer"), this.addNewLine(), this.addTitle("Digital Production Crew"), this.addName("Marc Goodchild"), this.addName("Eliana Sato"), this.addName("Rebecca Bell"), this.addName("Mark Taynton"), this.addName("Bernardo Resende"), this.addNewLine(), this.addNewLine(), this.addTitle("THE HEROIC QUEST OF THE VALIANT PRINCE IVANDOE"), this.addName("This program is produced with the support of"), this.addName("the Public Service Puljen"), this.addNewLine(), this.addNewLine(), this.addName("Copyright  2019 Forestry Games"), this.addName("All rights reserved 2019"), this._createCloseButton() } }, { key: "resize", value: function() { this.x = .5 * (P3.View.width - u["default"].STAGE_WIDTH), this._closeButton.x = .5 * (u["default"].STAGE_WIDTH + P3.View.width) - 100, this._closeButton.y = 100 } }, { key: "appear", value: function() { this.addTween(TweenMax.to(this._textHolder, Math.abs(-this._textHolder.height - 100) / 200, { y: -this._textHolder.height - 100, ease: Power0.easeNone, onComplete: function() { this.signals.previous.dispatch() }, onCompleteScope: this })), u["default"].audio.playMusic("music_credits_00") } }, { key: "addTitle", value: function(e) { var t = new PIXI.extras.BitmapText(e.toUpperCase(), { font: "38px Alghera Pro", align: "center" });
                        t.y = this._textLineOffset, t.pivot.x = .5 * t.textWidth, t.tint = 8682827, this._textHolder.addChild(t), this._textLineOffset += t.textHeight + 16 } }, { key: "addName", value: function(e) { var t = new PIXI.extras.BitmapText(e.toUpperCase(), { font: "38px Alghera Pro", align: "center" });
                        t.y = this._textLineOffset, t.pivot.x = .5 * t.textWidth, t.tint = 0, this._textHolder.addChild(t), this._textLineOffset += t.textHeight + 4 } }, { key: "addVoiceActor", value: function(e, t) { var i = new PIXI.extras.BitmapText(e.toUpperCase(), { font: "38px Alghera Pro", align: "left" });
                        i.x = -380, i.y = this._textLineOffset, i.tint = 13204064, this._textHolder.addChild(i); var n = new PIXI.extras.BitmapText(t.toUpperCase(), { font: "38px Alghera Pro", align: "left" });
                        n.y = this._textLineOffset, n.tint = 0, this._textHolder.addChild(n), this._textLineOffset += i.textHeight } }, { key: "addLogo", value: function(e) { var t = new PIXI.Sprite(e);
                        t.y = this._textLineOffset, t.anchor.set(.5), this._textHolder.addChild(t), this._textLineOffset += t.texture.height } }, { key: "addNewLine", value: function() { this._textLineOffset += 80 } }, { key: "addNewHalfLine", value: function() { this._textLineOffset += 40 } }, { key: "addNewQuarterLine", value: function() { this._textLineOffset += 20 } }, { key: "_createCloseButton", value: function() { var e = u["default"].assets;
                        this._closeButton = P3.Button.create(e.texture("btn_primary_small_off"), e.texture("btn_primary_small_over"), e.texture("btn_primary_small_over"), e.texture("icon_close")), this._closeButton.overSoundName = "sfx_ui_rollover_00", this._closeButton.clickSoundName = "sfx_ui_click_01", this._closeButton.signals.click.add(this._onCloseButtonClick, this), this.addChild(this._closeButton) } }, { key: "_onCloseButtonClick", value: function(e) { this._closeButton.interactive = !1, this.signals.previous.dispatch(this) } }]), t }(P3.Scene);
        i["default"] = _ }, { "./Common": 13 }],
    15: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function c(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : c(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("./Common"),
            _ = n(u),
            h = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._name = "", e } return s(t, e), r(t, [{ key: "init", value: function() { this._overlay = new PIXI.Sprite(PIXI.Texture.WHITE), this._overlay.interactive = !0, this._overlay.visible = !1, this._overlay.tint = 0, this.addChild(this._overlay); var e = _["default"].assets;
                        this._panel = new PIXI.Sprite(e.texture("certificate_text_panel")), this._panel.x = _["default"].STAGE_WIDTH / 2, this._panel.y = _["default"].STAGE_HEIGHT / 2, this._panel.anchor.set(.5), this._panel.visible = !1, this.addChild(this._panel), this._emblem = new PIXI.Sprite(e.texture("certificate_text_panel_crest")), this._emblem.y = -220, this._emblem.anchor.set(.5), this._emblem.visible = !1, this._panel.addChild(this._emblem); var t = e.json("particle_emitter_name_entry_00"),
                            i = new PIXI.Container;
                        this._panel.addChild(i), this._panel.emitter = new PIXI.particles.Emitter(i, [e.texture("particle_sparkle")], t), this._panel.emitter.emit = !0, this._createTitle(), this._fieldArea = new PIXI.Sprite(PIXI.Texture.EMPTY), this._fieldArea.width = 570, this._fieldArea.height = 80, this._fieldArea.x = -this._fieldArea.width / 2, this._fieldArea.y = -this._fieldArea.height / 2 + 8, this._fieldArea.tint = 0, this._panel.addChild(this._fieldArea), this._createPlayButton(), $("body").append('<input id="certificate_name" type="text" value="" maxlength="20" style="position:absolute; border:0; padding:0; text-align:center; background:none; user-select:none;" />'), $("#certificate_name").focus(), $("#certificate_name").on("blur", function() { $("#certificate_name").focus() }), $("#certificate_name").on("keydown keyup change", function() { var e = $.trim($("#certificate_name").val());
                            this._name !== e && (this._name = e, "" !== this._name && 0 === this._playButton.scale.x ? (this._playButton.interactive = !0, TweenMax.to(this._playButton.scale, .34, { x: 1, y: 1, ease: Back.easeOut, easeParams: [2] })) : "" === this._name && 0 !== this._playButton.scale.x && (this._playButton.interactive = !1, TweenMax.to(this._playButton.scale, .2, { x: 0, y: 0, ease: Back.easeIn, easeParams: [1] }))) }.bind(this)) } }, { key: "destroy", value: function(e) { $("#certificate_name").detach(), TweenMax.killTweensOf(this._playButton.scale), this._narratorTimer && (this._narratorTimer.kill(), this._narratorTimer = null), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "appear", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "appear", this).call(this), this._narratorTimer = delay(function() { _["default"].chat.playConversation(61) }, 1, this) } }, { key: "resize", value: function() { this.x = .5 * (P3.View.width - _["default"].STAGE_WIDTH), this._overlay.x = .5 * (_["default"].STAGE_WIDTH - P3.View.width), this._overlay.y = 0, this._overlay.width = P3.View.width, this._overlay.height = P3.View.height; var e = P3.View.width / $(window).width(),
                            t = this._fieldArea.toGlobal(new PIXI.Point(0, 0));
                        $("#certificate_name").css("top", Math.round(t.y / e)), $("#certificate_name").css("left", Math.round(t.x / e)), $("#certificate_name").css("width", this._fieldArea.width / e), $("#certificate_name").css("height", this._fieldArea.height / e), $("#certificate_name").css("font-size", this._fieldArea.height / e * .7) } }, { key: "update", value: function() { var e = deltaTime;
                        this._panel.emitter.update(e) } }, { key: "animateIn", value: function(e, t) { var i = this.addTween(new TimelineMax);
                        this._overlay.alpha = 0, i.insert(TweenMax.to(this._overlay, .2, { delay: .2, alpha: .8, ease: Power1.easeInOut, onStart: function() { this._overlay.visible = !0 }, onStartScope: this })), this._panel.scale.set(0), i.insert(TweenMax.to(this._panel.scale, .34, { delay: .4, x: 1, y: 1, ease: Back.easeOut, easeParams: [2], onStart: function() { this._panel.visible = !0 }, onStartScope: this })); var n = this._panel.y;
                        this._panel.y += 100, i.insert(TweenMax.to(this._panel, .34, { delay: .4, y: n, ease: Power1.easeInOut })), this._emblem.scale.set(0), i.insert(TweenMax.to(this._emblem.scale, .34, { delay: .6, x: 1, y: 1, ease: Back.easeOut, easeParams: [1], onStart: function() { this._emblem.visible = !0 }, onStartScope: this })) } }, { key: "_createTitle", value: function() { var e = translate("enter_name_title");
                        webfont ? this._title = new PIXI.Text(e, { fontSize: "48px", fontFamily: "Arial", align: "center", fill: 16777215 }) : this._title = new PIXI.extras.BitmapText(e, { font: "50px Alghera Pro", align: "center" }), this._title.anchor.set(.5), this._title.y = -80, this._panel.addChild(this._title) } }, { key: "_createPlayButton", value: function() { var e = _["default"].assets;
                        this._playButton = P3.Button.create(e.texture("btn_primary_large_off"), e.texture("btn_primary_large_over"), e.texture("btn_primary_large_over"), e.texture("icon_large_certificate")), this._playButton.y = .5 * this._panel.height, this._playButton.scale.set(0), this._playButton.overSoundName = "sfx_ui_rollover_00", this._playButton.clickSoundName = "sfx_ui_click_01", this._playButton.signals.click.add(this._onPlayButtonClick, this), this._panel.addChild(this._playButton) } }, { key: "_onPlayButtonClick", value: function(e) { this._name = $.trim($("#certificate_name").val()), "" != this._name && ($("#certificate_name").attr("readonly", !0), this._playButton.signals.click.removeAll(), this.signals.next.dispatch(this, this._name)) } }]), t }(P3.Scene);
        i["default"] = h }, { "./Common": 13 }],
    16: [function(e, t, i) {
        "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) {
            if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, {
                constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 }
            }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
        }
        Object.defineProperty(i, "__esModule", { value: !0 });
        var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function _e(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : _e(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("./Bert"),
            _ = n(u),
            h = e("./Campfire"),
            c = n(h),
            d = e("./chat/ChatPopup"),
            p = n(d),
            f = e("./ClickEffect"),
            y = n(f),
            v = e("./Common"),
            m = n(v),
            g = e("./gags/GagZone"),
            w = n(g),
            b = e("./Hud"),
            P = n(b),
            x = e("./Item"),
            k = n(x),
            I = e("./gags/BogeyGag"),
            T = n(I),
            S = e("./gags/CostumeGag"),
            O = n(S),
            A = e("./gags/LadybugGag"),
            C = n(A),
            E = e("./gags/DuckGag"),
            j = n(E),
            M = e("./gags/RodentSquireGag"),
            X = n(M),
            B = e("./gags/RavenGag"),
            D = n(B),
            L = e("./gags/GnomesGag"),
            N = n(L),
            H = e("./gags/PufferGag"),
            F = n(H),
            G = e("./gags/PoodleGag"),
            R = n(G),
            V = e("./gags/SquirrelGag"),
            W = n(V),
            U = e("./gags/FrogPrinceGag"),
            z = n(U),
            q = e("./NPC"),
            Q = n(q),
            Y = e("./MapSignpost"),
            K = n(Y),
            $ = e("./MinigameStandard"),
            J = n($),
            Z = e("./Player"),
            ee = n(Z),
            te = e("./TiledMap"),
            ie = n(te),
            ne = e("./Tracking"),
            ae = n(ne),
            oe = e("./Trigger"),
            se = n(oe),
            re = e("./VideoBanner"),
            le = n(re),
            ue = function(e) {
                function t() { var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];
                    a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return i.signals.inventory = new signals.Signal, i.signals.map = new signals.Signal, i.signals.quest = new signals.Signal, i.signals.certificate = new signals.Signal, i.signals.playMinigame = new signals.Signal, i.signals.playVideo = new signals.Signal, i._showSplash = e, i._location = null, i._map = null, i._player = null, i._bert = null, i._campfire = null, i._videoBanner = null, i._interactArea = null, i._interactBlocker = null, i._hud = null, i._actors = [], i._items = [], i._triggers = [], i._gagZones = [], i._gags = [], i._standards = [], i._ambientSFX = null, i._musicSFX = null, i._clickEffects = [], i._running = !1, i._fairyDustEmitter = null, i } return s(t, e), r(t, [{ key: "init", value: function() { var e = m["default"].chat;
                        e.signals.conversation.add(this._onConversation, this), e.signals.conversationEnd.add(this._onConversationEnd, this), e.signals.playMinigame.add(this._onPlayMinigame, this), e.signals.playVideo.add(this._onPlayVideo, this); var t = m["default"].quest;
                        t.signals.progress.add(this._onQuestProgress, this), t.signals.complete.add(this._onQuestComplete, this), this._location = e.getLocation(m["default"].currentLocation); var i = new P3.Camera(new PIXI.Point(.5 * P3.View.width, 0));
                        i.setTarget(new PIXI.Point), m["default"].camera = i; var n = m["default"].assets;
                        this._map = new ie["default"](n.json(this._location.Scene), i, .5), this.addChild(this._map), i.bounds.x = i.view.x, i.bounds.width = this._map.sceneWidth - i.view.x, this._createHud(), this._createInteractArea(), this._createInteractBlocker(), this._map.fairyDust && this._createFairyDustEmitter(), this.parseCharacters(), this.parseItems(), this.parseTriggers(), this.parseZones(), this.parseMisc(), this.spawnGag(), this._player && this._bert && (this._bert.leader = this._player, this._bert.parent.addChildAt(this._bert, this._player.parent.getChildIndex(this._player))), this._showSplash || m["default"].tracking.trackEvent(ae["default"].EVENT_VISIT_LOCATION.replace("[LOCATION]", this._location.Name.replace(/ /g, "_").toLowerCase())) } }, { key: "destroy", value: function() { this.signals.inventory.dispose(), this.signals.map.dispose(), this.signals.quest.dispose(), this.signals.certificate.dispose(), this.signals.playMinigame.dispose(); var e = m["default"].chat;
                        e.signals.conversation.remove(this._onConversation, this), e.signals.conversationEnd.remove(this._onConversationEnd, this), e.signals.playMinigame.remove(this._onPlayMinigame, this), e.signals.playVideo.remove(this._onPlayVideo, this), this._hud.destroy(), this.stopAmbientSFX(), this._fairyDustEmitter && (this._fairyDustEmitter.destroy(), this._fairyDustEmitter = null), m["default"].narrator.stopNarratorSFX(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, { children: !0 }) } }, { key: "resize", value: function() { this._hud.resize() } }, { key: "update", value: function() { var e = deltaTime;
                        this._updateActors(e), this._updateItems(e), this._updateTriggers(e), this._updateGags(e), this._hud.update(e), m["default"].chat.inConversation || this.cameraFocusPlayer(), m["default"].camera.update(e), this._updateClickEffects(e), this._updateFairyDustEmitter(e) } }, { key: "appear", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "appear", this).call(this), this.start(), this.playAmbientSFX(), this.playMusicSFX(), this._showSplash && this.signals.home.dispatch(this) } }, { key: "show", value: function() { this.resumeGame(), this.playAmbientSFX(), this.playMusicSFX(), this._updateMinigameStandards(), this._campfire && this._campfire.resumeLoopSFX(), this._hud.pauseButton.enabled = !0, this._hud.inventoryButton.enabled = !0, this._hud.mapButton.enabled = !0, this._hud.pauseButton.enabled = !0, m["default"].save.isLocationComplete(this._location.ID) && this._hud.animateMapButton() } }, { key: "hide", value: function() { this.stopAmbientSFX(), this._campfire && this._campfire.pauseLoopSFX() } }, { key: "start", value: function() { this._running = !0, this._interactBlocker.visible = !1 } }, { key: "end", value: function() { this._running = !1, this._interactBlocker.visible = !0, this.signals.next.dispatch(this) } }, { key: "resumeGame", value: function() { TweenMax.resumeAll(!0, !0, !0) } }, { key: "pauseGame", value: function() { TweenMax.pauseAll(!0, !0, !0) } }, { key: "parseCharacters", value: function() { var e = this._map.getLayer("characters"); if (!e) return void console.warn("Scene has no 'characters' layer."); for (var t = [], i = e.children.length, n = 0; n < i; ++n) { var a = e.children[n];
                            a.properties.isPlayer ? this._player ? console.warn("Scene can not have more than one player.") : this._player = this.addPlayer(a.name, new PIXI.Point(a.x, a.y), new PIXI.Point(.5 * a.width, .5 * a.height)) : a.properties.isCompanion ? this._bert ? console.warn("Scene can not have more than one companion.") : this._bert = this.addCompanion(a.name, new PIXI.Point(a.x, a.y), new PIXI.Point(.5 * a.width, .5 * a.height), a.type, a.properties.wantChat) : a.properties.isCampfire ? this._campfire ? console.warn("Scene can not have more than one campfire.") : this._campfire = this.addCampfire(a.name, new PIXI.Point(a.x, a.y), new PIXI.Point(.5 * a.width, .5 * a.height), a.texture) : this.addNPC(a.name, new PIXI.Point(a.x, a.y), new PIXI.Point(.5 * a.width, .5 * a.height), a.texture, a.type, a.properties.wantChat), t.push(a) } for (var o = t.length - 1; o >= 0; --o) { var s = t[o];
                            s.destroy({ removeChildren: !0 }) } this._player || console.warn("Scene has no player.") } }, { key: "parseItems", value: function() { var e = this._map.getLayer("items"); if (!e) return void console.warn("Scene has no 'items' layer."); for (var t = [], i = e.children.length, n = 0; n < i; ++n) { var a = e.children[n];
                            m["default"].inventory.hasItemByName(a.name) || this.addItem(a.name, new PIXI.Point(a.x, a.y), new PIXI.Point(.5 * a.width, .5 * a.height), a.texture, a.type), t.push(a) } for (var o = t.length - 1; o >= 0; --o) { var s = t[o];
                            s.destroy({ removeChildren: !0 }) } } }, { key: "parseTriggers", value: function() { var e = this._map.getLayer("triggers"); if (!e) return void console.warn("Scene has no 'triggers' layer."); for (var t = [], i = e.children.length, n = 0; n < i; ++n) { var a = e.children[n];
                            this.addTrigger(a.name, a.position, a.width, a.height, a.type, a.properties.once, a.properties.delay), t.push(a) } for (var o = t.length - 1; o >= 0; --o) { var s = t[o];
                            s.destroy({ removeChildren: !0 }) } } }, { key: "parseZones", value: function() { var e = this._map.getLayer("zones"); if (!e) return void console.warn("Scene has no 'zones' layer."); for (var t = [], i = e.children.length, n = 0; n < i; ++n) { var a = e.children[n];
                            this.addGagZone(a.name, a.position, a.width, a.height), t.push(a) } for (var o = t.length - 1; o >= 0; --o) { var s = t[o];
                            s.destroy({ removeChildren: !0 }) } } }, { key: "parseMisc", value: function() { var e = this._map.getLayer("misc"); if (!e) return void console.warn("Scene has no 'misc' layer."); for (var t = [], i = [], n = e.children.length, a = 0; a < n; ++a) { var o = e.children[a]; if (o.properties.isStandard) { var s = o.parent.getChildIndex(o),
                                    r = this.addMinigameStandard(o.name, new PIXI.Point(o.x, o.y), new PIXI.Point(.5 * o.width, .5 * o.height), o.type, o.properties.minigameId);
                                i.push({ target: r, index: s }), t.push(o) } else if (o.properties.isBanner) { if (!this._videoBanner) { var l = o.parent.getChildIndex(o);
                                    this._videoBanner = this.addVideoBanner(o.name, new PIXI.Point(o.x, o.y), new PIXI.Point(.5 * o.width, .5 * o.height), o.type), "True" === this._location.IsCamped && this._videoBanner.unlock(), this._videoBanner.parent.addChildAt(this._videoBanner, l), i.push({ target: this._videoBanner, index: l }) } t.push(o) } else o.properties.isMapSignpost && (this.addMapSignpost(o.name, new PIXI.Point(o.x, o.y), new PIXI.Point(.5 * o.width, .5 * o.height)), t.push(o)) } for (var u in i) { var _ = i[u];
                            _.target.parent.addChildAt(_.target, _.index) } for (var h = t.length - 1; h >= 0; --h) { var c = t[h];
                            c.destroy({ removeChildren: !0 }) } } }, { key: "addPlayer", value: function(e, t, i) { var n = new ee["default"](i);
                        n.name = e, n.x = t.x + i.x, n.y = t.y + i.y, n.signals.interact.add(this._onPlayerInteract, this), this._map.getLayer("characters").addChild(n), this._actors.push(n); var a = m["default"].camera; return a.target.x = n.x, a.setTarget(a.target, !0), n } }, { key: "addCompanion", value: function(e, t, i, n, a) { var o = new _["default"](i, n); return o.name = e, o.x = t.x + i.x, o.y = t.y + i.y, o.wantChat = a, o.signals.click.add(this._onNPCClick, this), this._map.getLayer("characters").addChild(o), this._actors.push(o), o } }, { key: "addCampfire", value: function(e, t, i, n) { var a = new c["default"](n); return a.name = e, a.x = t.x + i.x, a.y = t.y + i.y, a.signals.click.add(this._onNPCClick, this), a.signals.interact.add(function() { this._player.campfire(a.burning) }, this), this._map.getLayer("characters").addChild(a), this._actors.push(a), 1 === m["default"].currentLocation && (a.hitArea = new PIXI.Rectangle((-180), 80, 340, 80), a.flames.y -= 86, a.emitter.parent.y -= 86, this._map.getLayer("gags").addChildAt(a, 0)), a } }, { key: "addNPC", value: function(e, t, i, n, a, o) { var s = new Q["default"](n, a); return s.name = e, s.x = t.x + i.x, s.y = t.y + i.y, s.wantChat = o, s.signals.click.add(this._onNPCClick, this), this._map.getLayer("characters").addChild(s), this._actors.push(s), s } }, { key: "addItem", value: function(e, t, i, n, a) { var o = new k["default"](n, a); return o.name = e, o.x = t.x + i.x, o.y = t.y + i.y, console.log(o), o.signals.click.add(this._onItemClick, this), this._map.getLayer("items").addChild(o), this._items.push(o), o } }, { key: "addTrigger", value: function(e, t, i, n) { var a = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : -1,
                            o = !(arguments.length > 5 && void 0 !== arguments[5]) || arguments[5],
                            s = arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : 0,
                            r = new se["default"](e, a); return r.x = t.x, r.y = t.y, r.width = i, r.height = n, r.triggerOnce = o, r.delay = s, r.signals.trigger.add(this._onTrigger, this), this._triggers.push(r), r } }, { key: "addGagZone", value: function(e, t, i, n) { var a = new w["default"](e); return a.x = t.x, a.y = t.y, a.width = i, a.height = n, this._gagZones.push(a), a } }, { key: "addMinigameStandard", value: function(e, t, i) { var n = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : -1,
                            a = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : -1,
                            o = new J["default"](n, a); return o.name = e, o.position.set(t.x + i.x, t.y + i.y), o.signals.play.add(this._onMinigameStandardPlay, this), this._map.getLayer("misc").addChild(o), this._standards.push(o), this._standards.sort(function(e, t) { return e.x > t.x }), o } }, { key: "addVideoBanner", value: function(e, t, i) { var n = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : -1,
                            a = new le["default"](n); return a.name = e, a.position.set(t.x + i.x, t.y + i.y), a.signals.play.add(this._onVideoBannerPlay, this), this._map.getLayer("misc").addChild(a), a } }, { key: "addMapSignpost", value: function(e, t, i) { var n = new K["default"]; return n.name = e, n.position.set(t.x + i.x, t.y + i.y), n.signals.click.add(this._onMapSignpostClick, this), this._map.getLayer("misc").addChild(n), n } }, { key: "cameraFocusActor", value: function(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : .1,
                            i = m["default"].camera;
                        i.ease.x = t, i.target.x = e.x } }, { key: "cameraFocusConversation", value: function(e, t) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : .2; if (e && t) { var n = t.x - e.x,
                                a = m["default"].camera;
                            a.ease.x = i, a.target.x = e.x + .5 * n - .2 * n } } }, { key: "cameraFocusPlayer", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : .8; if (this._player) { var t = m["default"].camera;
                            t.smoothness.x = e, t.target.x = this._player.x } } }, { key: "playConversation", value: function(e) { e !== -1 && m["default"].chat.playConversation(e) } }, { key: "collectItem", value: function(e) { var t = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1],
                            i = m["default"].chat; if (i.giveItem(e.name), t) { e.interactive = !1, e.buttonMode = !1; var n = this._hud.toLocal(new PIXI.Point(e.x, e.y), e.parent);
                            e.x = n.x, e.y = n.y, this._hud.addChild(e), TweenMax.killTweensOf(e); var a = .8,
                                o = new TimelineMax({ onComplete: function() { e.visible = !1 } });
                            o.insert(TweenMax.to(e, a, { bezier: [{ x: this._hud.inventoryButton.x + 100, y: this._hud.inventoryButton.y - 100 }, { x: this._hud.inventoryButton.x, y: this._hud.inventoryButton.y }], ease: Power1.easeInOut })), o.insert(TweenMax.to(e, a, { rotation: P3.math.randomSign() * Math.PI * 2, ease: Power1.easeIn })), o.insert(TweenMax.to(e.scale, .92 * a, { x: 0, y: 0, ease: Back.easeIn, easeParams: [1] })) } else e.visible = !1;
                        console.log("collected item:", e.name), m["default"].tracking.trackEvent(ae["default"].EVENT_ITEM_FOUND.replace("[ITEM]", e.name.replace("'", "").toLowerCase())) } }, { key: "playMusicSFX", value: function() { var e = m["default"].audio;
                        this._musicSFX ? e.playMusic(this._musicSFX.howl.name) : this._musicSFX = e.playMusic(["music_gentle_exploring_00", "music_gentle_loop_ambient_00", "music_gentle_loop_ambient_01", "music_gentle_loop_ambient_02", "music_gentle_loop_ambient_03", "music_gentle_loop_ambient_04", "music_gentle_loop_ambient_05"]) } }, { key: "playAmbientSFX", value: function() { this.stopAmbientSFX(); var e = this._map.ambientSFX || "sfx_ambient_forest_00";
                        this._ambientSFX = m["default"].audio.playSound(e, { loop: !0 }) } }, { key: "stopAmbientSFX", value: function() { this._ambientSFX && (this._ambientSFX.stop(), this._ambientSFX = null) } }, { key: "spawnAtCampfire", value: function() { if (!this._campfire) return void console.warn("Scene does not have a campfire to spawn at."); if ("False" === this._location.IsCamped) return void console.warn("Can not spawn at campfire."); var e = this._bert.x - this._player.x;
                        this._player.x = this._campfire.x - 120, this._player.resetPosition(), this._bert.x = this._player.x + e; var t = m["default"].camera;
                        t.target.x = this._player.x, t.setTarget(t.target, !0) } }, { key: "spawnGag", value: function() { var e = this._map.getLayer("gags"); if (!e) return void console.warn("Scene has no 'gags' layer."); for (var t = !1, i = 0; i < this._gagZones.length; ++i) { var n = this._gagZones[i],
                                a = 1; if (Math.random() < a) { var o = new PIXI.Point(n.x + Math.random() * n.width, n.y + n.height),
                                    s = [2, 7]; if (!this._showSplash && !t) { var r = m["default"].save;
                                    r.isLocationComplete(3) && s.push(1), r.isLocationComplete(4) && s.push(6), r.isLocationComplete(6) && s.push(5), r.isLocationComplete(7) && s.push(3), r.isLocationComplete(11) && s.push(4), r.isLocationComplete(9) && s.push(0), r.isLocationComplete(5) && s.push(8), r.isLocationComplete(12) && s.push(9), r.isLocationComplete(8) && s.push(10) } var l = P3.utils.selectRandom(s),
                                    u = void 0; switch (l) {
                                    case 0:
                                        u = new j["default"](e, this._player), t = !0; break;
                                    case 1:
                                        u = new N["default"](e, this._player), t = !0; break;
                                    case 2:
                                        u = new C["default"](e, this._player); break;
                                    case 3:
                                        u = new R["default"](e, this._player), t = !0; break;
                                    case 4:
                                        u = new F["default"](e, this._player), t = !0; break;
                                    case 5:
                                        u = new D["default"](e, this._player), t = !0; break;
                                    case 6:
                                        u = new X["default"](e, this._player), t = !0; break;
                                    case 7:
                                        u = new W["default"](e, this._player); break;
                                    case 8:
                                        u = new z["default"](e, this._player), t = !0; break;
                                    case 9:
                                        u = new T["default"](e, this._player), t = !0; break;
                                    case 10:
                                        u = new O["default"](e, this._player), t = !0 } u && (void 0 !== l && (u.id = l), u.create(o), this._gags.push(u)) } } 1 !== m["default"].currentLocation && this._campfire && this._campfire.parent.addChild(this._campfire) } }, { key: "unlockCampfire", value: function() { var e = m["default"].chat;
                        e.unlockCampfire(m["default"].currentLocation), m["default"].save.saveGame(), this._videoBanner && this._videoBanner.unlock(), this.completeVideoQuests() } }, { key: "unlockLocation", value: function(e) { var t = m["default"].chat.getLocation(e); "True" === t.IsLocked && (t.IsLocked = "False") } }, { key: "unlockNextLocation", value: function() { for (var e = "" !== this._location.Children ? this._location.Children.split(",") : [], t = 0; t < e.length; ++t) this.unlockLocation(e[t]);
                        m["default"].save.saveGame() } }, { key: "unlockCertificate", value: function() { var e = m["default"].chat;
                        e.hasItem("Certificate") || (m["default"].save.unlockCertificate = !0, e.giveItem("Certificate")) } }, { key: "completeMinigame", value: function(e) { var t = m["default"].save.getMinigameData(this._location.ID); if (t.first !== -1 && t.second !== -1) { this.unlockNextLocation(); var i = m["default"].save;
                            i.isLocationComplete(3) && i.isLocationComplete(4) && i.isLocationComplete(5) && i.isLocationComplete(6) && i.isLocationComplete(7) && i.isLocationComplete(8) && i.isLocationComplete(9) && i.isLocationComplete(10) && i.isLocationComplete(11) && this.unlockLocation(12), 12 === this._location.ID && (this.unlockCertificate(), m["default"].quest.completeQuest("quest13")) } this.completeMinigameQuests() } }, { key: "completeMinigameQuests", value: function() { var e = 0,
                            t = m["default"].chat.locations; for (var i in t)
                            if (t.hasOwnProperty(i)) { var n = t[i],
                                    a = m["default"].save.getMinigameData(n.ID);
                                a.first !== -1 && ++e, a.second !== -1 && ++e } e >= 1 && m["default"].quest.completeQuest("quest6"), e >= 5 && m["default"].quest.completeQuest("quest7"), 10 === e && m["default"].quest.completeQuest("quest8") } }, { key: "completeVideoQuests", value: function() { var e = 0,
                            t = m["default"].chat.locations; for (var i in t)
                            if (t.hasOwnProperty(i)) { var n = t[i];
                                1 !== n.ID && "True" === n.IsCamped && ++e } e >= 1 && m["default"].quest.completeQuest("quest9"), e >= 5 && m["default"].quest.completeQuest("quest10"), 10 === e && m["default"].quest.completeQuest("quest11") } }, { key: "showHud", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];
                        e ? (this._hud.alpha = 0, TweenMax.to(this._hud, .24, { alpha: 1, ease: Power1.easeInOut, onStart: function() { this._hud.visible = !0 }, onStartScope: this })) : this._hud.visible = !0 } }, { key: "hideHud", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];
                        e ? TweenMax.to(this._hud, .24, { alpha: 0, ease: Power1.easeInOut, onComplete: function() { this._hud.visible = !1 }, onCompleteScope: this }) : this._hud.visible = !1 } }, { key: "lockHud", value: function() { this._hud.interactive = !1, this._hud.interactiveChildren = !1 } }, { key: "unlockHud", value: function() { this._hud.interactive = !0, this._hud.interactiveChildren = !0 } }, { key: "_createHud", value: function() { this._hud = new P["default"], this._hud.inventoryButton.signals.click.add(this._onInventoryButtonClick, this), this._hud.mapButton.signals.click.add(this._onMapButtonClick, this), this._hud.questButton.signals.click.add(this._onQuestButtonClick, this), this._hud.pauseButton.signals.click.add(this._onPauseButtonClick, this), this.addChild(this._hud) } }, { key: "_createInteractArea", value: function() { var e = this._map.getLayer("misc"); return e ? (this._interactArea = new PIXI.Container, this._interactArea.interactive = !0, this._interactArea.hitArea = new PIXI.Rectangle(0, 0, P3.View.width, P3.View.height), this._interactArea.click = this._interactArea.tap = this._onMouseClick.bind(this), void e.parent.addChildAt(this._interactArea, e.parent.getChildIndex(e))) : void console.warn("Scene has no 'gags' layer.") } }, { key: "_createInteractBlocker", value: function() { var e = this._map.getLayer("items"); return e ? (this._interactBlocker = new PIXI.Container, this._interactBlocker.interactive = !0, this._interactBlocker.hitArea = new PIXI.Rectangle(0, 0, P3.View.width, P3.View.height), void e.parent.addChild(this._interactBlocker)) : void console.warn("Scene has no 'items' layer.") } }, { key: "_createFairyDustEmitter", value: function() { if (!this._fairyDustEmitter) { var e = this._map.getLayer("background"); if (!e) return void console.warn("Scene has no 'background' layer."); var t = m["default"].assets,
                                i = t.json("particle_emitter_fairdust_01"),
                                n = new PIXI.Container;
                            e.addChild(n), this._fairyDustEmitter = new PIXI.particles.Emitter(n, [t.texture("particle_fairy_dust_00"), t.texture("particle_fairy_dust_01")], i), this._fairyDustEmitter.emit = !0 } } }, { key: "_updateActors", value: function(e) { for (var t = 0; t < this._actors.length; ++t) { var i = this._actors[t];
                            i.update(e) } } }, { key: "_updateItems", value: function(e) { for (var t = 0; t < this._items.length; ++t) { var i = this._items[t];
                            i.update(e) } } }, { key: "_updateTriggers", value: function(e) { if (this._player)
                            for (var t = 0; t < this._triggers.length; ++t) { var i = this._triggers[t],
                                    n = new PIXI.Rectangle(i.x, i.y, i.width, i.height);
                                n.contains(this._player.x, this._player.y) && i.activate() } } }, { key: "_updateGags", value: function(e) { for (var t = 0; t < this._gags.length; ++t) { var i = this._gags[t];
                            i.update(e) } } }, { key: "_updateMinigameStandards", value: function() { var e = m["default"].save.getMinigameData(this._location.ID),
                            t = this._standards[0];
                        t && e.first !== -1 && t.unlock(); var i = this._standards[1];
                        i && e.second !== -1 && i.unlock() } }, { key: "_updateFairyDustEmitter", value: function(e) { if (this._fairyDustEmitter) { this._fairyDustEmitter.update(e); var t = this._map.camera,
                                i = this._map.getLayer("background"); if (i) { var n = t.findLayer(i, !1);
                                n && (this._fairyDustEmitter.updateOwnerPos((t.position.x - t.view.x) * n.parallax.x, 0), this._fairyDustEmitter.spawnRect.x = 0, this._fairyDustEmitter.spawnRect.width = P3.View.width) } } } }, { key: "_playClickEffect", value: function(e, t) { var i = new y["default"];
                        i.x = e, i.y = t, i.play(), this._map.getLayer("characters").addChild(i), this._clickEffects.push(i) } }, { key: "_updateClickEffects", value: function(e) { for (var t = this._clickEffects.length - 1; t >= 0; --t) { var i = this._clickEffects[t];
                            i.parent ? i.update(e) : this._clickEffects.splice(t, 1) } } }, { key: "_onConversation", value: function(e, t, i, n) { var a = void 0; "Skald" !== t.Name && (a = new p["default"](t.Name, n), a.x = .5 * m["default"].STAGE_WIDTH, a.y = P3.View.height - 120, this._hud.addChild(a)), a && a.signals.click.addOnce(function() { a.destroy(), m["default"].chat.nextPhrase() }, this) } }, { key: "_onConversationEnd", value: function(e, t, i) { var n = this.getActor(t.Name),
                            a = this.getActor(i.Name);
                        n && n.stopInteract(a), a && a.stopInteract(n) } }, { key: "_onMouseClick", value: function(e) { var t = m["default"].camera,
                            i = e.data.getLocalPosition(m["default"].stage),
                            n = i.x + (t.position.x - t.view.x);
                        this._player && this._player.moveTo(n), console.log("moving to:", n), this._playClickEffect(n, i.y) } }, { key: "_onNPCClick", value: function(e) { this._player && this._player.moveTo(e), console.log("moving to npc:", e.name) } }, { key: "_onItemClick", value: function(e) { this._player && this._player.moveTo(e), console.log("moving to item:", e.name) } }, { key: "_onPlayerInteract", value: function(e, t) { t.interact(e), t instanceof Q["default"] ? this.playConversation(t.chatId) : t instanceof k["default"] && (this.collectItem(t), this.playConversation(t.chatId), this._player.pickupItem(), this._hud.inventoryButton.emitter.emit = !0, this._hud.animateButtonOnce(this._hud.inventoryButton), m["default"].audio.playSound("vo_ivandoe_pickup_item_00")) } }, { key: "_onInventoryButtonClick", value: function(e) { this._hud.pauseButton.enabled = !1, this._hud.inventoryButton.enabled = !1, this._hud.mapButton.enabled = !1, this._hud.pauseButton.enabled = !1, this.signals.inventory.dispatch(m["default"].inventory) } }, { key: "_onMapButtonClick", value: function(e) { this._hud.pauseButton.enabled = !1, this._hud.inventoryButton.enabled = !1, this._hud.mapButton.enabled = !1, this._hud.pauseButton.enabled = !1, this.signals.map.dispatch(this) } }, { key: "_onQuestButtonClick", value: function(e) { this._hud.pauseButton.enabled = !1, this._hud.inventoryButton.enabled = !1, this._hud.mapButton.enabled = !1, this._hud.pauseButton.enabled = !1, this.signals.quest.dispatch(this) } }, { key: "_onPauseButtonClick", value: function(e) { this._hud.pauseButton.enabled = !1, this._hud.inventoryButton.enabled = !1, this._hud.mapButton.enabled = !1, this._hud.pauseButton.enabled = !1, this.signals.pause.dispatch(this) } }, { key: "_onTrigger", value: function(e) { e.chatId !== -1 && (this._player.moveTo(this._player.x), this.playConversation(e.chatId)) } }, { key: "_onPlayMinigame", value: function(e) { this.signals.playMinigame.dispatch(e) } }, { key: "_onPlayVideo", value: function(e, t) { this.signals.playVideo.dispatch(e, t) } }, { key: "_onQuestProgress", value: function(e, t) { console.log("quest progress", e, t) } }, { key: "_onQuestComplete", value: function(e) { this._hud.questButton.emitter.emit = !0, console.log("quest complete", e) } }, { key: "_onMinigameStandardPlay", value: function(e) { e !== -1 && this.playConversation(e) } }, { key: "_onVideoBannerPlay", value: function(e) { e !== -1 && this.playConversation(e) } }, { key: "_onMapSignpostClick", value: function(e) { this.signals.map.dispatch(this) } }, { key: "getActor", value: function(e) { for (var t = 0; t < this._actors.length; ++t) { var i = this._actors[t]; if (i.name === e) return i } return null } }, { key: "getItem", value: function(e) { for (var t = 0; t < this._items.length; ++t) { var i = this._items[t]; if (i.name === e) return i } return null } }]), t }(P3.Scene);
        i["default"] = ue
    }, { "./Bert": 6, "./Campfire": 10, "./ClickEffect": 12, "./Common": 13, "./Hud": 17, "./Item": 21, "./MapSignpost": 25, "./MinigameStandard": 29, "./NPC": 30, "./Player": 32, "./TiledMap": 37, "./Tracking": 39, "./Trigger": 40, "./VideoBanner": 42, "./chat/ChatPopup": 45, "./gags/BogeyGag": 52, "./gags/CostumeGag": 53, "./gags/DuckGag": 56, "./gags/FrogPrinceGag": 58, "./gags/GagZone": 59, "./gags/GnomesGag": 61, "./gags/LadybugGag": 63, "./gags/PoodleGag": 65, "./gags/PufferGag": 67, "./gags/RavenGag": 69, "./gags/RodentSquireGag": 71, "./gags/SquirrelGag": 73 }],
    17: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function c(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : c(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("./Common"),
            _ = n(u),
            h = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)),
                        i = _["default"].assets;
                    e._inventoryButton = P3.Button.create(i.texture("btn_primary_small_off"), i.texture("btn_primary_small_over"), i.texture("btn_primary_small_over"), i.texture("icon_inventory")), e._inventoryButton.x = .5 * _["default"].STAGE_WIDTH, e._inventoryButton.y = 100, e._inventoryButton.overSoundName = "sfx_ui_rollover_00", e._inventoryButton.clickSoundName = "sfx_ui_click_01", e.addChild(e._inventoryButton); var n = new PIXI.Container;
                    n.position.set(e._inventoryButton.x, e._inventoryButton.y), e.addChild(n); var s = _["default"].assets.json("particle_button_highlight_01"); return e._inventoryButton.emitter = new PIXI.particles.Emitter(n, [i.texture("particle_sparkle")], s), e._inventoryButton.emitter.emit = !1, e._mapButton = P3.Button.create(i.texture("btn_primary_small_off"), i.texture("btn_primary_small_over"), i.texture("btn_primary_small_over"), i.texture("icon_map")), e._mapButton.x = .5 * _["default"].STAGE_WIDTH, e._mapButton.y = 100, e._mapButton.overSoundName = "sfx_ui_rollover_00", e._mapButton.clickSoundName = "sfx_ui_click_01", e.addChild(e._mapButton), n = new PIXI.Container, n.position.set(e._mapButton.x, e._mapButton.y), e.addChild(n), s = _["default"].assets.json("particle_button_highlight_00"), e._mapButton.emitter = new PIXI.particles.Emitter(n, [i.texture("particle_sparkle")], s), e._mapButton.emitter.emit = !1, e._questButton = P3.Button.create(i.texture("btn_primary_small_off"), i.texture("btn_primary_small_over"), i.texture("btn_primary_small_over"), i.texture("icon_quest")), e._questButton.x = .5 * _["default"].STAGE_WIDTH, e._questButton.y = 100, e._questButton.overSoundName = "sfx_ui_rollover_00", e._questButton.clickSoundName = "sfx_ui_click_01", e.addChild(e._questButton), n = new PIXI.Container, n.position.set(e._questButton.x, e._questButton.y), e.addChild(n), s = _["default"].assets.json("particle_button_highlight_01"), e._questButton.emitter = new PIXI.particles.Emitter(n, [i.texture("particle_sparkle")], s), e._questButton.emitter.emit = !1, e._pauseButton = P3.Button.create(i.texture("btn_primary_small_off"), i.texture("btn_primary_small_over"), i.texture("btn_primary_small_over"), i.texture("icon_pause")), e._pauseButton.x = .5 * _["default"].STAGE_WIDTH, e._pauseButton.y = 100, e._pauseButton.overSoundName = "sfx_ui_rollover_00", e._pauseButton.clickSoundName = "sfx_ui_click_01", e.addChild(e._pauseButton), e } return s(t, e), r(t, [{ key: "destroy", value: function() { this._inventoryButton.destroy(), this._inventoryButton.emitter.destroy(), this._mapButton.destroy(), this._mapButton.emitter.destroy(), this._questButton.destroy(), this._questButton.emitter.destroy(), this._pauseButton.destroy(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, { removeChildren: !0 }) } }, { key: "resize", value: function() { this.x = .5 * (P3.View.width - _["default"].STAGE_WIDTH), this._mapButton.x = .5 * (_["default"].STAGE_WIDTH - P3.View.width) + 100, this._mapButton.emitter.parent.x = this._mapButton.x, this._questButton.x = this._mapButton.x + 120, this._questButton.emitter.parent.x = this._questButton.x, this._inventoryButton.x = this._questButton.x + 120, this._inventoryButton.emitter.parent.x = this._inventoryButton.x, this._pauseButton.x = .5 * (_["default"].STAGE_WIDTH + P3.View.width) - 100 } }, { key: "update", value: function(e) { this._inventoryButton.emitter.update(e), this._mapButton.emitter.update(e), this._questButton.emitter.update(e) } }, { key: "animateButton", value: function(e) { var t = .34,
                            i = .18,
                            n = _["default"].scene.top;
                        e.wiggle = n.addTween(TweenMax.to(e, .5 * t, { rotation: .5 * i, ease: Power2.easeInOut, onComplete: function() { var t = n.addTween(new TimelineMax);
                                t.insert(TweenMax.to(e, .4, { rotation: -i, ease: Power2.easeInOut, yoyo: !0, repeat: -1 })) } })); var a = new TimelineMax({ yoyo: !0, repeat: -1 });
                        e.attract = n.addTween(a.append(TweenMax.delayedCall(1, function() { e.animateOver() }, null, this))) } }, { key: "stopAnimateButton", value: function(e) { e.wiggle && (e.wiggle.kill(), e.wiggle = null, TweenMax.to(e, .2, { rotation: 0, ease: Power1.easeInOut })), e.attract && (e.attract.kill(), e.attract = null), this._tutArrow && this._tutArrow.visible && this._killArrow() } }, { key: "animateButtonOnce", value: function(e) { var t = this,
                            i = .34,
                            n = .18,
                            a = _["default"].scene.top;
                        e.wiggle = a.addTween(TweenMax.to(e, .5 * i, { rotation: .5 * n, ease: Power2.easeInOut, onComplete: function() { var i = new TimelineMax;
                                i.insert(TweenMax.to(e, .4, { rotation: -n, ease: Power2.easeInOut, yoyo: !0, repeat: 3, onComplete: function() { t.stopAnimateButton(e) } })) } })) } }, { key: "animateMapButton", value: function() { var e = _["default"].assets,
                            t = this._mapButton.states.clone();
                        t.normal = e.texture("btn_primary_small_blue_off"), t.over = e.texture("btn_primary_small_blue_over"), this._mapButton.setStates(t), this._mapButton.emitter.emit = !0, this.animateButton(this._mapButton) } }, { key: "inventoryButton", get: function() { return this._inventoryButton } }, { key: "mapButton", get: function() { return this._mapButton } }, { key: "questButton", get: function() { return this._questButton } }, { key: "pauseButton", get: function() { return this._pauseButton } }]), t }(PIXI.Container);
        i["default"] = h }, { "./Common": 13 }],
    18: [function(e, t, i) {
        "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) {
            if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, {
                constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 }
            }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
        }
        Object.defineProperty(i, "__esModule", { value: !0 });
        var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function c(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : c(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("./Actor"),
            _ = n(u),
            h = function(e) {
                function t() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : -1;
                    a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return i.signals.click = new signals.Signal, i._chatId = e, i._isFocused = !1, i._glowFilter = null, i.interactive = !0, i.buttonMode = !0, i } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this._glowFilter = new PIXI.filters.GlowFilter(16, 2, 1, 16777215, 1), this.click = this.tap = this._onClick.bind(this) } }, { key: "destroy", value: function() { this.click = this.tap = null, this.signals.click.dispose(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "focus", value: function(e) { this._isFocused = !0, this.showGlow() } }, { key: "stopFocus", value: function(e) { this._isFocused = !1, this.hideGlow() } }, { key: "showGlow", value: function() {!this._view } }, { key: "hideGlow", value: function() {!this._view } }, { key: "_onClick", value: function(e) { this.signals.click.dispatch(this) } }, { key: "chatId", get: function() { return this._chatId } }, { key: "isFocused", get: function() { return this._isFocused } }]), t }(_["default"]);
        i["default"] = h
    }, { "./Actor": 4 }],
    19: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("./Common"),
            u = n(l),
            _ = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return i._item = e, i._blurImage = null, i._overlay = null, i._interactArea = null, i._panel = null, i._nameLabel = null, i._descLabel = null, i } return s(t, e), r(t, [{ key: "init", value: function() { this._overlay = new PIXI.Graphics, this._overlay.interactive = !0, this.addChild(this._overlay), this._interactArea = new PIXI.Graphics, this._interactArea.interactive = !0, this._interactArea.buttonMode = !0, this._interactArea.hitArea = new PIXI.Rectangle(0, 0, P3.View.width, P3.View.height), this._interactArea.pointerdown = this._onPointerDown.bind(this), this.addChild(this._interactArea), this._createPanel(), this._createBlurImage() } }, { key: "resize", value: function() { this.x = .5 * (P3.View.width - u["default"].STAGE_WIDTH), this._overlay.clear(), this._overlay.beginFill(0, 0), this._overlay.drawRect(.5 * (u["default"].STAGE_WIDTH - P3.View.width), 0, P3.View.width, P3.View.height), this._overlay.endFill(), this._interactArea.hitArea.x = .5 * (u["default"].STAGE_WIDTH - P3.View.width), this._interactArea.hitArea.width = P3.View.width } }, { key: "animateIn", value: function(e, t) { this._blurImage.alpha = 0, TweenMax.to(this._blurImage, .2, { alpha: 1, ease: Power1.easeInOut, onStart: function() { this._blurImage.visible = !0 }, onStartScope: this }), this._panel.scale = new PIXI.Point(.5, .5), TweenMax.to(this._panel.scale, .34, { delay: .1, x: 1, y: 1, ease: Back.easeOut, easeParams: [2], onStart: function() { this._panel.visible = !0 }, onStartScope: this }) } }, { key: "animateOut", value: function(e, t) { var i = new TimelineMax({ onComplete: e, onCompleteScope: t });
                        i.insert(TweenMax.to(this._blurImage, .2, { alpha: 0, ease: Power1.easeInOut, onComplete: function() { this._blurImage.visible = !1 }, onCompleteScope: this })), i.insert(TweenMax.to(this._panel, .2, { alpha: 0, ease: Power1.easeInOut, onComplete: function() { this._panel.visible = !1 }, onCompleteScope: this })) } }, { key: "_createPanel", value: function() { this._panel = new PIXI.Container, this._panel.x = .5 * u["default"].STAGE_WIDTH, this._panel.y = .5 * u["default"].STAGE_HEIGHT, this._panel.visible = !1, this.addChild(this._panel); var e = u["default"].assets,
                            t = new PIXI.Sprite(e.texture("inventory_popup"));
                        t.anchor = new PIXI.Point(.5, .5), this._panel.addChild(t), this._createImage(), this._createNameLabel(), this._createDescLabel() } }, { key: "_createNameLabel", value: function() { if (webfont) { var e = void 0;
                            e = this._item.name.replace(/ '/, '"'), e = e.replace(/' (a-z)/, '"'), this._nameLabel = new PIXI.Text(e, { fontSize: "34px", fontFamily: "Arial", fill: 0, align: "center" }), this._nameLabel.y = 60, this._nameLabel.pivot.x = .5 * this._nameLabel.width, this._nameLabel.pivot.y = .5 * this._nameLabel.height, this._panel.addChild(this._nameLabel) } else { var t = void 0;
                            t = this._item.name.replace(/ '/, '"'), t = t.replace(/' (a-z)/, '"'), this._nameLabel = new PIXI.extras.BitmapText(t, { font: "38px Alghera Pro", align: "center" }), this._nameLabel.y = 60, this._nameLabel.pivot.x = .5 * this._nameLabel.textWidth, this._nameLabel.pivot.y = .5 * this._nameLabel.textHeight, this._nameLabel.tint = 0, this._panel.addChild(this._nameLabel) } } }, { key: "_createDescLabel", value: function() { if (webfont) { var e = void 0;
                            e = this._item.description.replace(/ '/, '"'), e = e.replace(/' (a-z)/, '"'), this._descLabel = new PIXI.Text(e, { fontSize: "24px", fontFamily: "Arial", fill: 0, align: "center", wordWrap: !0, wordWrapWidth: 420 }), this._descLabel.y = 132, this._descLabel.pivot.x = .5 * this._descLabel.width, this._descLabel.pivot.y = .5 * this._descLabel.height, this._panel.addChild(this._descLabel) } else { var t = new PIXI.Container;
                            t.y = 132, this._panel.addChild(t); var i = void 0;
                            i = this._item.description.replace(/ '/, '"'), i = i.replace(/' (a-z)/, '"'), this._descLabel = new PIXI.extras.BitmapText(i, { font: "28px Alghera Pro", align: "center" }), this._descLabel.pivot.y = .5 * this._descLabel.textHeight, this._descLabel.maxWidth = 420, this._descLabel.tint = 0, t.addChild(this._descLabel), t.pivot.x = .5 * this._descLabel.width } } }, { key: "_createImage", value: function() { var e = P3.Button.create(this._item.inventoryTexture);
                        e.y = -104, e.anchor = new PIXI.Point(.5, .5), this._panel.addChild(e) } }, { key: "_createBlurImage", value: function() { var e = u["default"].scene.view,
                            t = new PIXI.filters.BlurFilter;
                        t.blur = 4, t.quality = 3, e.filters = [t], e.filterArea = new PIXI.Rectangle(0, 0, P3.View.width, P3.View.height); var i = new PIXI.RenderTexture.create(P3.View.width, P3.View.height, PIXI.settings.SCALE_MODE.DEFAULT, 1);
                        u["default"].renderer.render(u["default"].scene.view, i), this._blurImage = new PIXI.Sprite(i), this._blurImage.visible = !1, u["default"].scene.view.addChild(this._blurImage), e.filters = null, e.filterArea = null } }, { key: "_onPointerDown", value: function(e) { this._interactArea.interactive = !1, this.animateOut(function() { this.signals.next.dispatch(this) }, this) } }]), t }(P3.Scene);
        i["default"] = _ }, { "./Common": 13 }],
    20: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("./Common"),
            _ = n(u),
            h = e("./inventory/Inventory"),
            c = (n(h), e("./inventory/InventoryItem")),
            d = (n(c), function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return i._inventory = e, i._overlay = null, i._panel = null, i._itemContainer = null, i._titlePanel = null, i._titleLabel = null, i._pagePanel = null, i._closeButton = null, i._nextPageButton = null, i._prevPageButton = null, i._pageIndex = 0, i._itemsPerPage = 20, i._columnsPerPage = 5, i._itemSpacing = new PIXI.Point(114, 110), i } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this._overlay = new PIXI.Graphics, this._overlay.interactive = !0, this._overlay.visible = !1, this.addChild(this._overlay), this._createPanel(), this.showPage(this._pageIndex), console.log("inventory pages:", this.pages) } }, { key: "resize", value: function() { this.x = .5 * (P3.View.width - _["default"].STAGE_WIDTH), this._overlay.clear(), this._overlay.beginFill(0, .6), this._overlay.drawRect(.5 * (_["default"].STAGE_WIDTH - P3.View.width), 0, P3.View.width, P3.View.height), this._overlay.endFill() } }, { key: "show", value: function() {} }, { key: "animateIn", value: function(e, t) { var i = new TimelineMax({ onComplete: e, onCompleteScope: t });
                        this.addTween(i), i.insert(TweenMax.from(this._overlay, .24, { alpha: 0, ease: Power1.easeInOut, onStart: function() { this._overlay.visible = !0 }, onStartScope: this })), i.insert(TweenMax.from(this._panel.scale, .4, { delay: .14, x: 0, y: 0, ease: Back.easeOut, easeParams: [1], onStart: function() { this._panel.visible = !0 }, onStartScope: this })), i.insert(TweenMax.from(this._titlePanel.scale, .34, { delay: .26, x: .5, y: .5, ease: Back.easeOut, easeParams: [1], onStart: function() { this._titlePanel.visible = !0 }, onStartScope: this })), i.insert(TweenMax.from(this._pagePanel.scale, .34, { delay: .28, x: .5, y: .5, ease: Back.easeOut, easeParams: [1], onStart: function() { this._pagePanel.visible = !0 }, onStartScope: this })), i.insert(TweenMax.from(this._closeButton.scale, .34, { delay: .32, x: 0, y: 0, ease: Back.easeOut, easeParmas: [1], onStart: function() { this._closeButton.visible = !0 }, onStartScope: this })) } }, { key: "showPage", value: function(e) { this.clearPage(); for (var t = _["default"].assets, i = this._inventory.items, n = [], a = [], o = 0; o < i.length; ++o) { var s = i[o];
                            this._inventory.hasItem(s) ? n.push(s) : a.push(s) } i = n.concat(a); for (var r = 0; r < i.length; ++r)
                            if (Math.floor(r / this._itemsPerPage) === e) { var l = i[r],
                                    u = this._createItemButton(l); if (u.x = r % this._columnsPerPage * this._itemSpacing.x, u.y = Math.floor((r - this._itemsPerPage * e) / this._columnsPerPage) * this._itemSpacing.y, u.signals.click.add(this._onItemButtonClick, this), this._itemContainer.addChild(u), !this._inventory.hasItem(l)) { var h = new PIXI.filters.ColorMatrixFilter;
                                    h.desaturate(), u.interactive = !1, u.alpha = .6, u.filters = [h] } } for (var c = i.length; c < this._itemsPerPage; ++c)
                            if (Math.floor(c / this._itemsPerPage) === e) { var d = new PIXI.Sprite(t.texture("item_container_empty"));
                                d.x = c % this._columnsPerPage * this._itemSpacing.x, d.y = Math.floor((c - this._itemsPerPage * e) / this._columnsPerPage) * this._itemSpacing.y, d.anchor = new PIXI.Point(.5, .5), this._itemContainer.addChild(d) } this._nextPageButton.visible = e < this.pages - 1, this._prevPageButton.visible = e > 0; for (var p = 0; p < this._pagePanel.indicators.length; ++p) { var f = this._pagePanel.indicators[p];
                            f.texture = e === p ? t.texture("pagination_on") : t.texture("pagination_off") } } }, { key: "clearPage", value: function() { for (var e = this._itemContainer.children.length - 1; e >= 0; --e) { var t = this._itemContainer.children[e];
                            t.destroy({ removeChildren: !0 }) } } }, { key: "_createPanel", value: function() { this._panel = new PIXI.Container, this._panel.x = .5 * _["default"].STAGE_WIDTH, this._panel.y = .5 * _["default"].STAGE_HEIGHT + 20, this._panel.visible = !1, this.addChild(this._panel); var e = _["default"].assets;
                        this._panel.bg = new PIXI.Sprite(e.texture("inventory_panel")), this._panel.bg.anchor = new PIXI.Point(.5, .5), this._panel.addChild(this._panel.bg), this._panel.leftBar = new PIXI.Sprite(e.texture("inventory_bar_l")), this._panel.leftBar.x = -328, this._panel.leftBar.y = -4, this._panel.leftBar.anchor = new PIXI.Point(.5, .5), this._panel.addChild(this._panel.leftBar), this._panel.rightBar = new PIXI.Sprite(e.texture("inventory_bar_r")), this._panel.rightBar.x = 328, this._panel.rightBar.y = -4, this._panel.rightBar.anchor = new PIXI.Point(.5, .5), this._panel.addChild(this._panel.rightBar), this._itemContainer = new PIXI.Container, this._itemContainer.x = .5 * -((this._columnsPerPage - 1) * this._itemSpacing.x), this._itemContainer.y = -172, this._panel.addChild(this._itemContainer), this._createTitlePanel(), this._createPagePanel(), this._createCloseButton(), this._createNextPageButton(), this._createPrevPageButton() } }, { key: "_createTitlePanel", value: function() { this._titlePanel = new PIXI.Container, this._titlePanel.y = -316, this._titlePanel.visible = !1, this._panel.addChild(this._titlePanel); var e = _["default"].assets;
                        this._titlePanel.bg = new PIXI.Sprite(e.texture("title_panel")), this._titlePanel.bg.anchor = new PIXI.Point(.5, .5), this._titlePanel.addChild(this._titlePanel.bg), webfont ? (this._titleLabel = new PIXI.Text(translate("inventory_title"), { fontSize: "40px", fontFamily: "Arial", fill: 0, align: "center" }), this._titleLabel.y = -12, this._titleLabel.anchor.set(.5), this._titlePanel.addChild(this._titleLabel)) : (this._titleLabel = new PIXI.extras.BitmapText(translate("inventory_title"), { font: "44px Alghera Pro", align: "center" }), this._titleLabel.y = -8, this._titleLabel.anchor.set(.5), this._titleLabel.tint = 0, this._titlePanel.addChild(this._titleLabel)) } }, { key: "_createPagePanel", value: function() { this._pagePanel = new PIXI.Container, this._pagePanel.y = 300, this._pagePanel.visible = !1, this._panel.addChild(this._pagePanel); var e = _["default"].assets,
                            t = new PIXI.Sprite(e.texture("pagination_panel"));
                        t.anchor = new PIXI.Point(.5, .5), this._pagePanel.addChild(t), this._pagePanel.indicators = []; for (var i = 54, n = new PIXI.Point((-6), (-6)), a = 0; a < this.pages; ++a) { var o = new PIXI.Sprite(e.texture("pagination_off"));
                            o.x = a * i - (this.pages - 1) * i * .5 + n.x, o.y = n.y, o.anchor = new PIXI.Point(.5, .5), this._pagePanel.addChild(o), this._pagePanel.indicators.push(o) } } }, { key: "_createItemButton", value: function(e) { var t = _["default"].assets,
                            i = P3.Button.create(t.texture("item_container"), t.texture("item_container_selected"), t.texture("item_container_selected")),
                            n = new PIXI.Sprite(e.inventoryTexture); return n.scale = new PIXI.Point(.5, .5), n.anchor = new PIXI.Point(.5, .5), i.animation.addChild(n), i.item = e, i.overSoundName = "sfx_ui_rollover_00", i.clickSoundName = "sfx_ui_click_01", i } }, { key: "_createCloseButton", value: function() { var e = _["default"].assets;
                        this._closeButton = P3.Button.create(e.texture("btn_primary_small_off"), e.texture("btn_primary_small_over"), e.texture("btn_primary_small_over"), e.texture("icon_close")), this._closeButton.x = .5 * this._panel.bg.texture.width - 8, this._closeButton.y = .5 * -this._panel.bg.texture.height + 8, this._closeButton.overSoundName = "sfx_ui_rollover_00", this._closeButton.clickSoundName = "sfx_ui_click_01", this._closeButton.visible = !1, this._closeButton.signals.click.add(this._onCloseButtonClick, this), this._panel.addChild(this._closeButton) } }, { key: "_createNextPageButton", value: function() { var e = _["default"].assets;
                        this._nextPageButton = P3.Button.create(e.texture("btn_next_off"), e.texture("btn_next_over"), e.texture("btn_next_over"), e.texture("icon_next")), this._nextPageButton.x = 332, this._nextPageButton.overSoundName = "sfx_ui_rollover_00", this._nextPageButton.clickSoundName = "sfx_ui_click_01", this._nextPageButton.signals.click.add(this._onNextPageButtonClick, this), this._panel.addChild(this._nextPageButton) } }, { key: "_createPrevPageButton", value: function() { var e = _["default"].assets;
                        this._prevPageButton = P3.Button.create(e.texture("btn_previous_off"), e.texture("btn_previous_over"), e.texture("btn_previous_over"), e.texture("icon_previous")), this._prevPageButton.x = -332, this._prevPageButton.overSoundName = "sfx_ui_rollover_00", this._prevPageButton.clickSoundName = "sfx_ui_click_01", this._prevPageButton.signals.click.add(this._onPrevPageButtonClick, this), this._panel.addChild(this._prevPageButton) } }, { key: "_onCloseButtonClick", value: function(e) { this._closeButton.interactive = !1, this.signals.previous.dispatch(this) } }, { key: "_onNextPageButtonClick", value: function(e) {++this._pageIndex >= this.pages && (this._pageIndex = 0), this.showPage(this._pageIndex) } }, { key: "_onPrevPageButtonClick", value: function(e) {--this._pageIndex < 0 && (this._pageIndex = this.pages - 1), this.showPage(this._pageIndex) } }, { key: "_onItemButtonClick", value: function(e) { this.signals.next.dispatch(e.item) } }, { key: "inventory", get: function() { return this._inventory } }, { key: "pages", get: function() { return Math.floor(this._inventory.items.length / this._itemsPerPage) + 1 } }]), t }(P3.Scene));
        i["default"] = d }, { "./Common": 13, "./inventory/Inventory": 75, "./inventory/InventoryItem": 76 }],
    21: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("./Common"),
            _ = n(u),
            h = e("./Interactable"),
            c = n(h),
            d = function(e) {
                function t(e) { var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : -1;
                    a(this, t); var n = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, i)); return n._shadow = null, n._view = new PIXI.Sprite(e), n._view.anchor = new PIXI.Point(.5, .5), n.addChild(n._view), n } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this._createShadow(), this._floatAnimation() } }, { key: "update", value: function(e) { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "update", this).call(this, e), this._updateShadow() } }, { key: "_createShadow", value: function() { var e = _["default"].assets;
                        this._shadow = new PIXI.Sprite(e.texture("shadow")), this._shadow.y = 590, this._shadow.scale.set(.4), this._shadow.anchor.set(.5), this.parent.addChildAt(this._shadow, this.parent.getChildIndex(this)) } }, { key: "_updateShadow", value: function() { this._shadow.x = this.x, this._shadow.alpha = Math.abs(this._shadow.y - this.y) / 120 * .4, this._shadow.visible = this.visible } }, { key: "_floatAnimation", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 2,
                            t = 16,
                            i = new TimelineMax({ repeat: -1 });
                        i.append(TweenMax.to(this._view, .5 * e, { y: this._view.y - .5 * t, ease: Power1.easeOut })), i.append(TweenMax.to(this._view, e, { y: this._view.y + t, ease: Power1.easeInOut })), i.append(TweenMax.to(this._view, .5 * e, { y: this._view.y, ease: Power1.easeIn })) } }]), t }(c["default"]);
        i["default"] = d }, { "./Common": 13, "./Interactable": 18 }],
    22: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("./Common"),
            u = n(l),
            _ = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return i._manifest = e, i._animation = null, i._grass = null, i._loadingLabel = null, i } return s(t, e), r(t, [{ key: "init", value: function() { var e = u["default"].assets,
                            t = new PIXI.Sprite(e.texture("ui_loader")); if (this.addChild(t), this._createAnimation(), this._createLoadingLabel(), this._manifest.length) { var i = u["default"].config.settings;
                            e.addFiles(this._manifest, i.assets.paths[i.assets.path]), e.signals.progress.add(this._onLoadingProgress, this), e.signals.complete.addOnce(this._onLoadingComplete, this), e.load() } else this._onLoadingComplete() } }, { key: "resize", value: function() { this.x = .5 * (P3.View.width - u["default"].STAGE_WIDTH) } }, { key: "update", value: function() { var e = deltaTime;
                        this._animation.update(e), this._grass.update(e) } }, { key: "_createAnimation", value: function() { var e = u["default"].assets,
                            t = new PIXI.Container;
                        t.x = .5 * u["default"].STAGE_WIDTH, t.y = 340, this.addChild(t); var i = new PIXI.Sprite(e.texture("loading_patch"));
                        i.anchor = new PIXI.Point(.5, .5), t.addChild(i); var n = void 0;
                        n = new P3.MovieClipSequence, n.addTextures([e.texture("loading_grass_001"), e.texture("loading_grass_002"), e.texture("loading_grass_003"), e.texture("loading_grass_004")]), this._grass = new P3.MovieClip(n), this._grass.anchor = new PIXI.Point(.5, .5), this._grass.animationSpeed = 4, this._grass.looping = !0, this._grass.play(), t.addChild(this._grass), n = new P3.MovieClipSequence, n.addTextures([e.texture("loading_001"), e.texture("loading_002"), e.texture("loading_003"), e.texture("loading_004")]), this._animation = new P3.MovieClip(n), this._animation.anchor = new PIXI.Point(.5, .5), this._animation.animationSpeed = 4, this._animation.looping = !0, this._animation.play(), t.addChild(this._animation) } }, { key: "_createLoadingLabel", value: function() { webfont || (this._loadingLabel = new PIXI.extras.BitmapText(translate("loading_title"), { font: "44px Alghera Pro", align: "center" }), this._loadingLabel.x = .5 * u["default"].STAGE_WIDTH, this._loadingLabel.y = .5 * P3.View.height + 200, this._loadingLabel.anchor.set(.5), this._loadingLabel.tint = 0, this.addChild(this._loadingLabel)) } }, { key: "_onLoadingProgress", value: function(e) { console.log(Math.round(e.progress) + "%") } }, { key: "_onLoadingComplete", value: function() { delay(function() { this.signals.next.dispatch(this) }, 4, this) } }]), t }(P3.Scene);
        i["default"] = _ }, { "./Common": 13 }],
    23: [function(e, t, i) {
        "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") } Object.defineProperty(i, "__esModule", { value: !0 });
        var o = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            s = e("./Application"),
            r = n(s),
            l = e("./Brim"),
            u = n(l),
            _ = e("./CNPreloaderScene"),
            h = n(_),
            c = e("./Common"),
            d = n(c),
            p = e("ismobilejs"),
            f = (n(p), e("./Tracking")),
            y = n(f),
            v = function() {
                function e(t, i) { a(this, e), this._width = t, this._height = i, this._game = null, this._preloader = null }
                return o(e, [{ key: "init", value: function() { var e = new P3.AudioManager;
                        d["default"].audio = P3.Button.audio = e; var t = new P3.AssetManager(["ogg", "mp3"]);
                        t.signals.audioFile.add(e.addSound, e), d["default"].assets = t, P3.AssetManager.prototype.unloadTexture = function(e, t) { t = "." + (t || "png"); var i = this._resources[e];
                            e = i.url, e = e.replace(/\.[^\/.]+$/, ""); var n = PIXI.utils.TextureCache[e + t];
                            n.destroy(!0) }, d["default"].tracking = new y["default"], d["default"].language = language, d["default"].tabActive = !0, PIXI.settings.RETINA_PREFIX = /\_(?=[^_]*$)(.+)x/, PIXI.settings.MIPMAP_TEXTURES = !1, TweenMax.defaultOverwrite = "none", this.createConfig(); var i = (new u["default"], d["default"].config.settings),
                            n = { width: this._width, height: this._height, holderId: "game", portrait: !1, rotateImageUrl: i.assets.paths[i.assets.path] + "/images/localisation/rotate_" + (["apac"].indexOf(d["default"].language) !== -1 ? "en" : language) + ".jpg", rotateImageColor: "#000000", aspectRatioFillHeight: !0 },
                            a = new P3.View(n);
                        a.signals.ready.addOnce(function(e) { var t = {};
                            t.view = e, t.transparent = !1, t.antialias = !1, t.preserveDrawingBuffer = !1, t.resolution = 1; var i = new PIXI.Container;
                            d["default"].stage = i; var n = new P3.Input;
                            n.init(i, e), d["default"].input = n, P3.utils.isCocoonJS() && (i.scale.x = window.innerHeight / t.height, i.scale.y = window.innerHeight / t.height); var a = P3.utils.isCocoonJS() ? new PIXI.WebGLRenderer(window.innerWidth, window.innerHeight, t) : PIXI.autoDetectRenderer(this._width, this._height, t);
                            a.backgroundColor = 0, d["default"].renderer = a, d["default"].isWebGL = a instanceof PIXI.WebGLRenderer; var o = new P3.SceneManager(a);
                            d["default"].scene = o, d["default"].stage.addChild(o.view); var s = new PIXI.Graphics;
                            s.beginFill(16777215), s.drawRect(0, 0, 1, 1), s.endFill(), d["default"].blankTexture = s.generateTexture(), PIXI.ticker.shared.add(function(e) { window.deltaTime = e / PIXI.settings.TARGET_FPMS / 1e3, o.update(), d["default"].chat && d["default"].chat.update(), d["default"].narrator && d["default"].narrator.update(), a.render(d["default"].stage), n.update() }, this), window.delay = function(e, t, i) { return TweenMax.delayedCall(t, e, [], i) }, window.delayarg = function(e, t, i, n) { return TweenMax.delayedCall(t, e, i, n) }, window.translate = function(e) { var t = d["default"].language,
                                    i = d["default"].config.strings[e]; return i = i && i[t], ["za", "mecom", "apac"].indexOf(d["default"].language) !== -1 && "undefined" == typeof i && (i = d["default"].config.strings[e], i = i && i.en), "undefined" != typeof i ? i : e }, this.loadPreloader() }, this), a.signals.resize.add(this.onCanvasResize, this), a.init(), d["default"].view = a } }, { key: "loadPreloader", value: function() { var e = [{ name: "fg_preloader", url: "images/fg_preloader.jpg" }, { name: "fg_preloader_1x", url: "images/fg_preloader_1x.json" }, { name: "ui_buttons_1x", url: "images/ui_buttons_1x.json" }, { name: "strings", url: "data/strings.json" }, { name: "cmdata", url: "data/gold.json" }, { name: "quests", url: "data/quests.json" }, { name: "alghera_30_map", url: "fonts/alghera_30_map.xml" }, { name: "alghera_60_generic", url: "fonts/alghera_60_generic.xml" }, { name: "alghera_120_generic", url: "fonts/alghera_120_generic.xml" }]; if (e.length) { var t = d["default"].config.settings;
                            d["default"].assets.addFiles(e, t.assets.paths[t.assets.path]), d["default"].assets.signals.complete.addOnce(function() { var e = d["default"].config,
                                    t = d["default"].assets;
                                e.strings = t.json("strings"), e.quests = t.json("quests"), this.loadAssets() }, this), d["default"].assets.load() } else this.loadAssets() } }, {
                    key: "loadAssets",
                    value: function() {
                        var e = !(null === idsettings.minigame.debug),
                            t = ["za", "mecom", "apac"].indexOf(d["default"].language) !== -1 ? "en" : d["default"].language,
                            i = [{ name: "char_narrator", url: "spine/char_narrator.json" }, { name: "ivandoe_front", url: "spine/ivandoe_front.json" }, { name: "ivandoe_front_025", url: "spine/ivandoe_front_025.json" }, { name: "bert_front", url: "spine/bert_front.json" }, { name: "bert_front_1", url: "spine/bert_front_1.json" }, { name: "ladybird", url: "spine/ladybird.json" }, { name: "puffer", url: "spine/puffer.json" }, { name: "puffer_025", url: "spine/puffer_025.json" }, { name: "squirrel", url: "spine/squirrel.json" }, { name: "gnome", url: "spine/gnome.json" }, { name: "raven", url: "spine/raven.json" }, { name: "squirehamster", url: "spine/squirehamster.json" }, { name: "duck", url: "spine/duck.json" }, { name: "poodle_run", url: "spine/poodle_run.json" }, { name: "char_babysnot", url: "spine/char_babysnot.json" }, { name: "gag_raspberry", url: "spine/gag_raspberry.json" }, { name: "witch", url: "spine/witch.json" }, { name: "snot_monster", url: "spine/snot_monster.json" }, { name: "fly", url: "spine/fly.json" }, { name: "bearface", url: "spine/bearface.json" }, { name: "wolf", url: "spine/wolf.json" }, { name: "frogprince", url: "spine/frogprince.json" }, { name: "bronco_horse", url: "spine/bronco_horse.json" }, { name: "tutorial_acornantlers", url: "spine/tutorial/tutorial_acornantlers.json" }, { name: "tutorial_bearcheek", url: "spine/tutorial/tutorial_bearcheek.json" }, { name: "tutorial_bronco", url: "spine/tutorial/tutorial_bronco.json" }, { name: "tutorial_duckyegg", url: "spine/tutorial/tutorial_duckyegg.json" }, { name: "tutorial_flappybert", url: "spine/tutorial/tutorial_flappybert.json" }, { name: "tutorial_flyattack", url: "spine/tutorial/tutorial_flyattack.json" }, { name: "tutorial_frogkick", url: "spine/tutorial/tutorial_frogkick.json" }, { name: "tutorial_mountainhiking", url: "spine/tutorial/tutorial_mountainhiking.json" }, { name: "tutorial_mountainrun", url: "spine/tutorial/tutorial_mountainrun.json" }, { name: "tutorial_poodleplay", url: "spine/tutorial/tutorial_poodleplay.json" }, { name: "tutorial_puffedup", url: "spine/tutorial/tutorial_puffedup.json" }, { name: "tutorial_raftbalance", url: "spine/tutorial/tutorial_raftbalance.json" }, { name: "tutorial_royalroar", url: "spine/tutorial/tutorial_royalroar.json" }, { name: "tutorial_swordpractice", url: "spine/tutorial/tutorial_swordpractice.json" }, { name: "tutorial_swordstrike", url: "spine/tutorial/tutorial_swordstrike.json" }, { name: "tutorial_turnipninja", url: "spine/tutorial/tutorial_turnipninja.json" }, { name: "tutorial_turniproast", url: "spine/tutorial/tutorial_turniproast.json" }, { name: "tutorial_wackagnome", url: "spine/tutorial/tutorial_wackagnome.json" }, { name: "tutorial_witch_deflect", url: "spine/tutorial/tutorial_witch_deflect.json" }, { name: "tutorial_wolfrun", url: "spine/tutorial/tutorial_wolfrun.json" }, { name: "tutorial_ivandoe", url: "spine/tutorial/tutorial_ivandoe.json" }, { name: "bert", url: "images/bert.png" }, { name: "title", url: "images/localisation/title_" + t + ".png" }, { name: "ui_loader", url: "images/ui_loader.jpg" }, { name: "ui_loader_1x", url: "images/ui_loader_1x.json" }, { name: "ui_game_1x", url: "images/ui_game_1x.json" }, { name: "ui_inventory_1x", url: "images/ui_inventory_1x.json" }, { name: "ui_shared_1x", url: "images/ui_shared_1x.json" }, { name: "ui_map_1x", url: "images/ui_map_1x.json" }, { name: "ui_panels_0_1x", url: "images/ui_panels_0_1x.json" }, { name: "bg_map", url: "images/bg_map.jpg" }, { name: "bg_map_mist", url: "images/bg_map_mist.jpg" }, { name: "bg_credits", url: "images/bg_credits.jpg" }, { name: "trigger", url: "images/trigger.png" }, { name: "skald_trigger", url: "images/skald_trigger.png" }, { name: "gag_zone", url: "images/gag_zone.png" }, { name: "fx_splash_1x", url: "images/fx_splash_1x.json" }, { name: "effect_click_001", url: "particles/click_001.json" }, { name: "effect_click_002", url: "particles/click_002.json" }, { name: "turnip_slice", url: "particles/turnip_slice.json" }, { name: "particle_emitter_fire_sparks_00", url: "particles/particle_emitter_fire_sparks_00.json" }, { name: "particle_emitter_fogbank_02", url: "particles/particle_emitter_fogbank_02.json" }, { name: "particle_emitter_fairdust_01", url: "particles/particle_emitter_fairdust_01.json" }, { name: "particle_snot_sneezeblast_00", url: "particles/particle_snot_sneezeblast_00.json" }, { name: "particle_button_highlight_00", url: "particles/particle_button_highlight_00.json" }, { name: "particle_button_highlight_01", url: "particles/particle_button_highlight_01.json" }, { name: "particle_emitter_score_burst_00", url: "particles/particle_emitter_score_burst_00.json" }, { name: "particle_turnip_smoke_burning_00", url: "particles/particle_turnip_smoke_burning_00.json" }, {
                                name: "particle_turnip_smoke_starting_00",
                                url: "particles/particle_turnip_smoke_starting_00.json"
                            }, { name: "particle_emitter_name_entry_00", url: "particles/particle_emitter_name_entry_00.json" }, { name: "particle_emitter_bert_feathers", url: "particles/particle_emitter_bert_feathers.json" }, { name: "particle_emitter_map_attract", url: "particles/particle_emitter_map_attract.json" }, { name: "particle_emitter_gnome_hit", url: "particles/particle_emitter_gnome_hit.json" }, { name: "particle_emitter_bear_ivandoe_dodge", url: "particles/particle_emitter_bear_ivandoe_dodge.json" }, { name: "particle_emitter_bear_ivandoe_lose", url: "particles/particle_emitter_bear_ivandoe_lose.json" }, { name: "particle_turnip_smoke_danger_00", url: "particles/particle_turnip_smoke_danger_00.json" }, { name: "particle_turnip_smoke_cooking_00", url: "particles/particle_turnip_smoke_cooking_00.json" }, { name: "particle_turnip_smoke_burnt_00", url: "particles/particle_turnip_smoke_burnt_00.json" }, { name: "particle_frogman_ripples", url: "particles/particle_frogman_ripples.json" }, { name: "startLocation", url: "data/startLocation.json" }, { name: "ep1_sassyGnomes", url: "data/ep1_sassyGnomes.json" }, { name: "ep2_hissySwan", url: "data/ep2_hissySwan.json" }, { name: "ep3_kissyFrog", url: "data/ep3_kissyFrog.json" }, { name: "ep4_thiefstress", url: "data/ep4_thiefstress.json" }, { name: "ep5_prettyPoodle", url: "data/ep5_prettyPoodle.json" }, { name: "ep6_raspberryFairy", url: "data/ep6_raspberryFairy.json" }, { name: "ep7_pluckyDuck", url: "data/ep7_pluckyDuck.json" }, { name: "ep8_talkingTree", url: "data/ep8_talkingTree.json" }, { name: "ep9_promDate", url: "data/ep9_promDate.json" }, { name: "ep10_moanyMountain", url: "data/ep10_moanyMountain.json" }, { name: "location_ep0_splash_bg0_1x", url: "images/location_ep0_splash_bg0_1x.json" }, { name: "location_splash_0_1x", url: "images/location_splash_0_1x.json" }, { name: "location_splash_1_1x", url: "images/location_splash_1_1x.json" }, { name: "location_splash_2_1x", url: "images/location_splash_2_1x.json" }, { name: "music_introduction_dramatic_00", url: "audio/music_introduction_dramatic_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "music_introduction_epic_ivandoe_00", url: "audio/music_introduction_epic_ivandoe_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "music_loop_dramatic_00", url: "audio/music_loop_dramatic_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "music_loop_dramatic_action_01", url: "audio/music_loop_dramatic_action_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "music_loop_dramatic_action_02", url: "audio/music_loop_dramatic_action_02" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "music_loop_dramatic_tense_00", url: "audio/music_loop_dramatic_tense_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "music_loop_gentle_fun_00", url: "audio/music_loop_gentle_fun_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "music_loop_quirky_00", url: "audio/music_loop_quirky_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "music_loop_quirky_01", url: "audio/music_loop_quirky_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "music_loop_frantic_fun_00", url: "audio/music_loop_frantic_fun_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "music_gentle_loop_ambient_00", url: "audio/music_gentle_loop_ambient_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "music_gentle_loop_ambient_01", url: "audio/music_gentle_loop_ambient_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "music_gentle_loop_ambient_02", url: "audio/music_gentle_loop_ambient_02" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "music_gentle_loop_ambient_03", url: "audio/music_gentle_loop_ambient_03" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "music_gentle_loop_ambient_04", url: "audio/music_gentle_loop_ambient_04" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "music_gentle_loop_ambient_05", url: "audio/music_gentle_loop_ambient_05" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "music_loop_pause_01", url: "audio/music_loop_pause_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "music_certificate_sting_00", url: "audio/music_certificate_sting_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "music_loop_dramatic_peak_00", url: "audio/music_loop_dramatic_peak_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "music_fail_stab_00", url: "audio/music_fail_stab_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "music_fail_stab_01", url: "audio/music_fail_stab_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "music_epic_reveal_00", url: "audio/music_epic_reveal_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "music_loop_mystery_00", url: "audio/music_loop_mystery_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "music_gentle_exploring_00", url: "audio/music_gentle_exploring_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "music_credits_00", url: "audio/music_credits_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_ambient_forest_00", url: "audio/sfx_ambient_forest_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_ambient_forest_02", url: "audio/sfx_ambient_forest_02" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_ambient_forest_clean_loop_00", url: "audio/sfx_ambient_forest_clean_loop_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_ambient_mountain_wind_loop_00", url: "audio/sfx_ambient_mountain_wind_loop_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_ambient_mountaintop_00", url: "audio/sfx_ambient_mountaintop_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_ambient_night_forest_loop_00", url: "audio/sfx_ambient_night_forest_loop_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_ambience_lake_loop_01", url: "audio/sfx_ambience_lake_loop_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_ambience_pond_loop_00", url: "audio/sfx_ambience_pond_loop_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_footstep_00", url: "audio/sfx_footstep_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_footstep_01", url: "audio/sfx_footstep_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_footstep_02", url: "audio/sfx_footstep_02" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_footstep_03", url: "audio/sfx_footstep_03" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_footstep_04", url: "audio/sfx_footstep_04" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_ui_click_01", url: "audio/sfx_ui_click_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_ui_rollover_00", url: "audio/sfx_ui_rollover_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_achievement_unlocked_00", url: "audio/sfx_achievement_unlocked_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_swipe_00", url: "audio/sfx_swipe_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_swipe_01", url: "audio/sfx_swipe_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_snotmonster_scream_00", url: "audio/sfx_snotmonster_scream_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_snotmonster_squelch_loop_01", url: "audio/sfx_snotmonster_squelch_loop_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_symbol_board_hit_00", url: "audio/sfx_symbol_board_hit_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_symbol_board_turn_00", url: "audio/sfx_symbol_board_turn_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_raft_move_00", url: "audio/sfx_raft_move_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_raft_move_01", url: "audio/sfx_raft_move_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_raft_move_02", url: "audio/sfx_raft_move_02" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_raft_move_03", url: "audio/sfx_raft_move_03" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_raft_move_04", url: "audio/sfx_raft_move_04" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_ivandoe_splash_00", url: "audio/sfx_ivandoe_splash_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_bounce_00", url: "audio/sfx_bounce_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_bounce_01", url: "audio/sfx_bounce_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_bounce_03", url: "audio/sfx_bounce_03" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_bounce_04", url: "audio/sfx_bounce_04" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_bounce_05", url: "audio/sfx_bounce_05" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_bounce_06", url: "audio/sfx_bounce_06" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_rock_hit_ivandoe_00", url: "audio/sfx_rock_hit_ivandoe_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_rock_land_00", url: "audio/sfx_rock_land_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_rock_land_01", url: "audio/sfx_rock_land_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_rock_land_02", url: "audio/sfx_rock_land_02" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_rock_land_03", url: "audio/sfx_rock_land_03" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_rock_tumble_00", url: "audio/sfx_rock_tumble_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_rock_tumble_01", url: "audio/sfx_rock_tumble_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_rock_tumble_02", url: "audio/sfx_rock_tumble_02" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_fire_extinguish_00", url: "audio/sfx_fire_extinguish_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_fire_loop_00", url: "audio/sfx_fire_loop_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_fire_relight_00", url: "audio/sfx_fire_relight_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_poodle_run_loop_00", url: "audio/sfx_poodle_run_loop_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_frogprince_splash_00", url: "audio/sfx_frogprince_splash_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_flygame_attackrun_00", url: "audio/sfx_flygame_attackrun_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_flygame_hitfly_00", url: "audio/sfx_flygame_hitfly_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_squirrels_angry_loop_00", url: "audio/sfx_squirrels_angry_loop_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_squirrels_throw_00", url: "audio/sfx_squirrels_throw_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_squirrels_throw_01", url: "audio/sfx_squirrels_throw_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_squirrels_throw_02", url: "audio/sfx_squirrels_throw_02" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_squirrel_acorn_hit_00", url: "audio/sfx_squirrel_acorn_hit_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_squirrels_win_00", url: "audio/sfx_squirrels_win_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_puffer_deflate_trigger_00", url: "audio/sfx_puffer_deflate_trigger_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_puffer_bounce_00", url: "audio/sfx_puffer_bounce_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_puffer_bounce_01", url: "audio/sfx_puffer_bounce_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_puffer_bounce_02", url: "audio/sfx_puffer_bounce_02" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_bert_cough_00", url: "audio/vo_bert_cough_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_bert_pain_00", url: "audio/vo_bert_pain_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_bert_reaction_00", url: "audio/vo_bert_reaction_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_bert_relief_00", url: "audio/vo_bert_relief_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_bert_scared_00", url: "audio/vo_bert_scared_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_bert_scared_01", url: "audio/vo_bert_scared_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_bert_surprise_00", url: "audio/vo_bert_surprise_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_bert_yelp_00", url: "audio/vo_bert_yelp_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_mountain_end_sneeze_02", url: "audio/sfx_mountain_end_sneeze_02" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_ivandoe_giggle_00", url: "audio/vo_ivandoe_giggle_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_ivandoe_heh_00", url: "audio/vo_ivandoe_heh_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_ivandoe_sigh_00", url: "audio/vo_ivandoe_sigh_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_ivandoe_attack_00", url: "audio/vo_ivandoe_attack_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_ivandoe_determined_00", url: "audio/vo_ivandoe_determined_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_ivandoe_strain_00", url: "audio/vo_ivandoe_strain_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_ivandoe_strain_01", url: "audio/vo_ivandoe_strain_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_ivandoe_yelps_00", url: "audio/vo_ivandoe_yelps_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_ivandoe_pickup_item_00", url: "audio/vo_ivandoe_pickup_item_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_ivandoe_swipe_00", url: "audio/vo_ivandoe_swipe_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_ivandoe_swipe_01", url: "audio/vo_ivandoe_swipe_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_ivandoe_swipe_02", url: "audio/vo_ivandoe_swipe_02" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_ivandoe_swipe_03", url: "audio/vo_ivandoe_swipe_03" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_ivandoe_yell_00", url: "audio/vo_ivandoe_yell_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_ivandoe_yell_01", url: "audio/vo_ivandoe_yell_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_ivandoe_pain_00", url: "audio/vo_ivandoe_pain_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_ivandoe_mountain_scream_00", url: "audio/vo_ivandoe_mountain_scream_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_ivandoe_mountain_scream_01", url: "audio/vo_ivandoe_mountain_scream_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_ivandoe_mountain_scream_02", url: "audio/vo_ivandoe_mountain_scream_02" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_ivandoe_cough_00", url: "audio/vo_ivandoe_cough_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_ivandoe_breath_in_00", url: "audio/vo_ivandoe_breath_in_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_ivandoe_land_00", url: "audio/vo_ivandoe_land_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_ivandoe_land_01", url: "audio/vo_ivandoe_land_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_ivandoe_land_02", url: "audio/vo_ivandoe_land_02" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_ivandoe_laugh_00", url: "audio/vo_ivandoe_laugh_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_poodle_running_00", url: "audio/vo_poodle_running_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_poodle_panting_00", url: "audio/vo_poodle_panting_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_poodle_start_00", url: "audio/vo_poodle_start_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_poodle_pickupstick_00", url: "audio/vo_poodle_pickupstick_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_poodle_endangry_00", url: "audio/vo_poodle_endangry_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_poodle_end_01", url: "audio/vo_poodle_end_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_poodle_end_00", url: "audio/vo_poodle_end_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_gnome_hahaha_00", url: "audio/vo_gnome_hahaha_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_gnome_hahaha_01", url: "audio/vo_gnome_hahaha_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_gnome_poked_01", url: "audio/vo_gnome_poked_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_gnome_poked_03", url: "audio/vo_gnome_poked_03" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_gnome_poked_06", url: "audio/vo_gnome_poked_06" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_gnome_snigger_00", url: "audio/vo_gnome_snigger_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_gnome_snigger_01", url: "audio/vo_gnome_snigger_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_gnome_snigger_02", url: "audio/vo_gnome_snigger_02" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_gnome_snigger_03", url: "audio/vo_gnome_snigger_03" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_gnome_snigger_04", url: "audio/vo_gnome_snigger_04" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_gnome_snigger_05", url: "audio/vo_gnome_snigger_05" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_gnome_snigger_06", url: "audio/vo_gnome_snigger_06" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_gnome_snigger_07", url: "audio/vo_gnome_snigger_07" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_gnome_snigger_08", url: "audio/vo_gnome_snigger_08" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_gnome_snigger_09", url: "audio/vo_gnome_snigger_09" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_gnome_snigger_10", url: "audio/vo_gnome_snigger_10" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_gnome_snigger_11", url: "audio/vo_gnome_snigger_11" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_gnome_snigger_12", url: "audio/vo_gnome_snigger_12" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_crow_caw_00", url: "audio/sfx_crow_caw_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_crow_caw_01", url: "audio/sfx_crow_caw_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_wolf_howl_00", url: "audio/vo_wolf_howl_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_wolf_bite_00", url: "audio/vo_wolf_bite_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_frogman_bleugh_00", url: "audio/vo_frogman_bleugh_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_frogman_surprise_00", url: "audio/vo_frogman_surprise_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_frogman_surprise_01", url: "audio/vo_frogman_surprise_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_frogman_transform_00", url: "audio/vo_frogman_transform_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_frogman_kicked_00", url: "audio/vo_frogman_kicked_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_frogman_kicked_01", url: "audio/vo_frogman_kicked_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_frogman_kicked_02", url: "audio/vo_frogman_kicked_02" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_squire_yay_00", url: "audio/vo_squire_yay_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_ivandoe_kingly_bellow_cut_00", url: "audio/vo_ivandoe_kingly_bellow_cut_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_ivandoe_kingly_bellow_ending_00", url: "audio/vo_ivandoe_kingly_bellow_ending_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_duck_quack_00", url: "audio/sfx_duck_quack_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_flap_00", url: "audio/sfx_flap_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_flap_01", url: "audio/sfx_flap_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_bogey_giggle_00", url: "audio/sfx_bogey_giggle_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_bogey_giggle_01", url: "audio/sfx_bogey_giggle_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_bogey_giggle_02", url: "audio/sfx_bogey_giggle_02" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_bogey_poke_00", url: "audio/sfx_bogey_poke_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_bogey_poke_01", url: "audio/sfx_bogey_poke_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_bogey_scream_00", url: "audio/sfx_bogey_scream_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_ladybird_wing_flex_00", url: "audio/sfx_ladybird_wing_flex_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_ladybird_flying_loop_00", url: "audio/sfx_ladybird_flying_loop_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_witch_flying_loop_00", url: "audio/sfx_witch_flying_loop_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_witch_fire_spell_00", url: "audio/sfx_witch_fire_spell_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_witch_fire_spell_01", url: "audio/sfx_witch_fire_spell_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_witch_spell_deflect_00", url: "audio/sfx_witch_spell_deflect_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_witch_spell_deflect_01", url: "audio/sfx_witch_spell_deflect_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_witch_spell_deflect_02", url: "audio/sfx_witch_spell_deflect_02" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_witch_spell_deflect_03", url: "audio/sfx_witch_spell_deflect_03" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_witch_spell_hit_00", url: "audio/sfx_witch_spell_hit_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_bronco_throw_00", url: "audio/sfx_bronco_throw_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_egg_splat_00", url: "audio/sfx_egg_splat_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_egg_splat_01", url: "audio/sfx_egg_splat_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_egg_splat_02", url: "audio/sfx_egg_splat_02" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_bert_hit_wood_00", url: "audio/sfx_bert_hit_wood_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_bear_angry_00", url: "audio/sfx_bear_angry_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_bear_attack_centre", url: "audio/sfx_bear_attack_centre" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_bear_attack_left", url: "audio/sfx_bear_attack_left" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_bear_attack_right", url: "audio/sfx_bear_attack_right" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_bear_hit_ivandoe", url: "audio/sfx_bear_hit_ivandoe" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_bronco_loop_00", url: "audio/sfx_bronco_loop_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_wolf_growl_00", url: "audio/sfx_wolf_growl_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_time_plus_five_00", url: "audio/sfx_time_plus_five_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_turnip_split_00", url: "audio/sfx_turnip_split_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_turnip_split_01", url: "audio/sfx_turnip_split_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_turnip_split_02", url: "audio/sfx_turnip_split_02" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_turnip_split_03", url: "audio/sfx_turnip_split_03" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_new_highscore", url: "audio/sfx_new_highscore" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_punch_hit_00", url: "audio/sfx_punch_hit_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_flygame_flyby_00", url: "audio/sfx_flygame_flyby_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_flygame_flyby_01", url: "audio/sfx_flygame_flyby_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_flygame_flyby_02", url: "audio/sfx_flygame_flyby_02" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_ivandoe_hit_obstacle", url: "audio/sfx_ivandoe_hit_obstacle" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_smackdown_00", url: "audio/sfx_smackdown_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "sfx_eat_turnip", url: "audio/sfx_eat_turnip" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_chap01_gnomes_intro_02", url: "audio/narrator/" + t + "/vo_narrator_chap01_gnomes_intro_02" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_chap01_gnomes_return_02", url: "audio/narrator/" + t + "/vo_narrator_chap01_gnomes_return_02" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_chap02_swan_intro_00", url: "audio/narrator/" + t + "/vo_narrator_chap02_swan_intro_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_chap02_swan_return_01", url: "audio/narrator/" + t + "/vo_narrator_chap02_swan_return_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_chap03_frog_intro_00", url: "audio/narrator/" + t + "/vo_narrator_chap03_frog_intro_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_chap03_frog_return_00", url: "audio/narrator/" + t + "/vo_narrator_chap03_frog_return_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_chap04_thief_intro_00", url: "audio/narrator/" + t + "/vo_narrator_chap04_thief_intro_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_chap04_thief_return_00", url: "audio/narrator/" + t + "/vo_narrator_chap04_thief_return_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_chap05_poodle_intro_01", url: "audio/narrator/" + t + "/vo_narrator_chap05_poodle_intro_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_chap05_poodle_return_00", url: "audio/narrator/" + t + "/vo_narrator_chap05_poodle_return_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_chap06_fairy_intro_01", url: "audio/narrator/" + t + "/vo_narrator_chap06_fairy_intro_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_chap06_fairy_return_00", url: "audio/narrator/" + t + "/vo_narrator_chap06_fairy_return_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_chap07_duck_intro_00", url: "audio/narrator/" + t + "/vo_narrator_chap07_duck_intro_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_chap07_duck_return_00", url: "audio/narrator/" + t + "/vo_narrator_chap07_duck_return_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_chap08_tree_intro_00", url: "audio/narrator/" + t + "/vo_narrator_chap08_tree_intro_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_chap08_tree_return_00", url: "audio/narrator/" + t + "/vo_narrator_chap08_tree_return_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_chap09_lake_intro_00", url: "audio/narrator/" + t + "/vo_narrator_chap09_lake_intro_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_chap09_lake_return_01", url: "audio/narrator/" + t + "/vo_narrator_chap09_lake_return_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_chap10_mountain_intro_01", url: "audio/narrator/" + t + "/vo_narrator_chap10_mountain_intro_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_chap10_mountain_return_01", url: "audio/narrator/" + t + "/vo_narrator_chap10_mountain_return_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_map_intro_00", url: "audio/narrator/" + t + "/vo_narrator_map_intro_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_map_intro_01", url: "audio/narrator/" + t + "/vo_narrator_map_intro_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_intro_clickplay_00", url: "audio/narrator/" + t + "/vo_narrator_intro_clickplay_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_titleintro_02b", url: "audio/narrator/" + t + "/vo_narrator_titleintro_02b" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_titleintro_02c", url: "audio/narrator/" + t + "/vo_narrator_titleintro_02c" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_incidental_tryagain_00", url: "audio/narrator/" + t + "/vo_narrator_incidental_tryagain_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_incidental_tryagain_01", url: "audio/narrator/" + t + "/vo_narrator_incidental_tryagain_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_incidental_coughs_00", url: "audio/narrator/" + t + "/vo_narrator_incidental_coughs_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_incidental_coughs_01", url: "audio/narrator/" + t + "/vo_narrator_incidental_coughs_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_incidental_lookoutgnomes_00", url: "audio/narrator/" + t + "/vo_narrator_incidental_lookoutgnomes_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_incidental_nevergiveup_00", url: "audio/narrator/" + t + "/vo_narrator_incidental_nevergiveup_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_incidental_tastesuccess_00", url: "audio/narrator/" + t + "/vo_narrator_incidental_tastesuccess_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_incidental_runaway_00", url: "audio/narrator/" + t + "/vo_narrator_incidental_runaway_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_incidental_wellplayed_00", url: "audio/narrator/" + t + "/vo_narrator_incidental_wellplayed_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_incidental_wellplayed_01", url: "audio/narrator/" + t + "/vo_narrator_incidental_wellplayed_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_incidental_excellentwork_00", url: "audio/narrator/" + t + "/vo_narrator_incidental_excellentwork_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_incidental_curses_00", url: "audio/narrator/" + t + "/vo_narrator_incidental_curses_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_incidental_curses_01", url: "audio/narrator/" + t + "/vo_narrator_incidental_curses_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_incidental_bravo_00", url: "audio/narrator/" + t + "/vo_narrator_incidental_bravo_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_incidental_bravo_01", url: "audio/narrator/" + t + "/vo_narrator_incidental_bravo_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_incidental_goodchoice_00", url: "audio/narrator/" + t + "/vo_narrator_incidental_goodchoice_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_incidental_beware_00", url: "audio/narrator/" + t + "/vo_narrator_incidental_beware_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_incidental_beware_01", url: "audio/narrator/" + t + "/vo_narrator_incidental_beware_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_incidental_beware_02", url: "audio/narrator/" + t + "/vo_narrator_incidental_beware_02" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_incidental_ohdear_00", url: "audio/narrator/" + t + "/vo_narrator_incidental_ohdear_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_incidental_ohdear_01", url: "audio/narrator/" + t + "/vo_narrator_incidental_ohdear_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_incidental_questsaved_00", url: "audio/narrator/" + t + "/vo_narrator_incidental_questsaved_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_incidental_questsaved_01", url: "audio/narrator/" + t + "/vo_narrator_incidental_questsaved_01" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_incidental_thrilling_00", url: "audio/narrator/" + t + "/vo_narrator_incidental_thrilling_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_incidental_monumental_00", url: "audio/narrator/" + t + "/vo_narrator_incidental_monumental_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_endgame_intro_00", url: "audio/narrator/" + t + "/vo_narrator_endgame_intro_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_endgame_return_00", url: "audio/narrator/" + t + "/vo_narrator_endgame_return_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_tutorial_walkaround_00", url: "audio/narrator/" + t + "/vo_narrator_tutorial_walkaround_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_tutorial_collectitems_00", url: "audio/narrator/" + t + "/vo_narrator_tutorial_collectitems_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_tutorial_inventory_00", url: "audio/narrator/" + t + "/vo_narrator_tutorial_inventory_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_tutorial_map_00", url: "audio/narrator/" + t + "/vo_narrator_tutorial_map_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_tutorial_questlog_00", url: "audio/narrator/" + t + "/vo_narrator_tutorial_questlog_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }, { name: "vo_narrator_certificate_00", url: "audio/narrator/" + t + "/vo_narrator_certificate_00" + P3.AssetManager.AUDIO_FILE_EXTENSION }];
                        if (e && i.push({ name: "ep1_flyAttack_bg", url: "images/ep1_flyAttack_bg.jpg" }, { name: "ep1_swordPractice_bg", url: "images/ep1_swordPractice_bg.jpg" }, { name: "ep2_bronco_bg", url: "images/ep2_bronco_bg.jpg" }, { name: "ep2_royalRoar_bg", url: "images/ep2_royalRoar_bg.jpg" }, { name: "ep3_frogKick_bg_1", url: "images/ep3_frogKick_bg_1.jpg" }, { name: "ep3_frogKick_bg_2", url: "images/ep3_frogKick_bg_2.jpg" }, { name: "ep3_swordStrike_bg", url: "images/ep3_swordStrike_bg.jpg" }, { name: "ep4_turnipNinja_bg", url: "images/ep4_turnipNinja_bg.jpg" }, { name: "ep4_witchDeflect_bg", url: "images/ep4_witchDeflect_bg.jpg" }, { name: "ep5_wolfRun_bg", url: "images/ep5_wolfRun_bg.jpg" }, { name: "ep6_bearCheek_bg", url: "images/ep6_bearCheek_bg.jpg" }, { name: "ep6_flappyBert_bg_1", url: "images/ep6_flappyBert_bg_1.jpg" }, { name: "ep6_flappyBert_bg_2", url: "images/ep6_flappyBert_bg_2.jpg" }, { name: "ep7_duckyEggs_bg", url: "images/ep7_duckyEggs_bg.jpg" }, { name: "ep7_turnipRoast_bg", url: "images/ep7_turnipRoast_bg.jpg" }, { name: "ep8_acornAntlers_bg", url: "images/ep8_acornAntlers_bg.jpg" }, { name: "ep8_wackagnome_bg", url: "images/ep8_wackagnome_bg.jpg" }, { name: "ep9_puffedUp_bg", url: "images/ep9_puffedUp_bg.jpg" }, { name: "ep9_raftBalance_bg", url: "images/ep9_raftBalance_bg.jpg" }, { name: "ep10_monsterRun_bg_1", url: "images/ep10_monsterRun_bg_1.jpg" }, { name: "ep10_monsterRun_bg_2", url: "images/ep10_monsterRun_bg_2.jpg" }, { name: "ep10_mountainHiking_bg", url: "images/ep10_mountainHiking_bg.jpg" }, { name: "minigame_ep1_flyAttack_0_1x", url: "images/minigame_ep1_flyAttack_0_1x.json" }, { name: "minigame_ep1_swordPractice_0_1x", url: "images/minigame_ep1_swordPractice_0_1x.json" }, { name: "minigame_ep2_royalRoar_0_1x", url: "images/minigame_ep2_royalRoar_0_1x.json" }, { name: "minigame_ep3_frogKick_0_1x", url: "images/minigame_ep3_frogKick_0_1x.json" }, {
                                name: "minigame_ep3_swordStrike_0_1x",
                                url: "images/minigame_ep3_swordStrike_0_1x.json"
                            }, { name: "minigame_ep4_turnipNinja_0_1x", url: "images/minigame_ep4_turnipNinja_0_1x.json" }, { name: "minigame_ep4_witchDeflect_0_1x", url: "images/minigame_ep4_witchDeflect_0_1x.json" }, { name: "minigame_ep5_wolfRun_0_1x", url: "images/minigame_ep5_wolfRun_0_1x.json" }, { name: "minigame_ep6_flappyBert_0_1x", url: "images/minigame_ep6_flappyBert_0_1x.json" }, { name: "minigame_ep7_duckyEggs_0_1x", url: "images/minigame_ep7_duckyEggs_0_1x.json" }, { name: "minigame_ep7_turnipRoast_0_1x", url: "images/minigame_ep7_turnipRoast_0_1x.json" }, { name: "minigame_ep8_acornAntlers_0_1x", url: "images/minigame_ep8_acornAntlers_0_1x.json" }, { name: "minigame_ep8_wackagnome_0_1x", url: "images/minigame_ep8_wackagnome_0_1x.json" }, { name: "minigame_ep9_raftBalance_0_1x", url: "images/minigame_ep9_raftBalance_0_1x.json" }, { name: "minigame_ep10_monsterRun_0_1x", url: "images/minigame_ep10_monsterRun_0_1x.json" }, { name: "minigame_ep10_mountainHiking_0_1x", url: "images/minigame_ep10_mountainHiking_0_1x.json" }, { name: "minigame_ep10_mountainHiking_1_1x", url: "images/minigame_ep10_mountainHiking_1_1x.json" }, { name: "ep5_poodlePlay_bg", url: "images/ep5_poodlePlay_bg.jpg" }, { name: "minigame_ep5_poodlePlay_0_1x", url: "images/minigame_ep5_poodlePlay_0_1x.json" }), i.length) { this._preloader = new h["default"], d["default"].scene.show(this._preloader); var n = d["default"].config.settings;
                            d["default"].assets.addFiles(i, n.assets.paths[n.assets.path]), d["default"].assets.signals.progress.add(this.onLoadingProgress, this), d["default"].assets.signals.complete.addOnce(this.onLoadingCompleted, this), d["default"].assets.load() } else this.startGame()
                    }
                }, { key: "createConfig", value: function() { var e = (d["default"].assets, {});
                        e.settings = window.idsettings, d["default"].config = e, console.log(e) } }, { key: "startGame", value: function() { delay(function() { this._game = new r["default"], this._game.init() }, 1, this) } }, { key: "onLoadingProgress", value: function(e) { this._preloader.loaded = e.progress / 100 } }, { key: "onLoadingCompleted", value: function() { d["default"].assets.signals.progress.removeAll(), d["default"].assets.signals.complete.removeAll(), this._preloader.loaded = 1, this._preloader.signals.next.add(function() { this.startGame(0) }, this) } }, { key: "onCanvasResize", value: function(e) { e ? (d["default"].renderer.resize(P3.View.width, P3.View.height), d["default"].scene && (d["default"].scene.resize(), d["default"].quest && d["default"].quest.resize(), d["default"].narrator && d["default"].narrator.resize(), d["default"].cookieBar && d["default"].cookieBar.resize()), Howler.volume(1)) : Howler.volume(0) } }]), e
            }();
        i["default"] = v
    }, { "./Application": 5, "./Brim": 7, "./CNPreloaderScene": 9, "./Common": 13, "./Tracking": 39, ismobilejs: 2 }],
    24: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("./Common"),
            _ = n(u),
            h = e("./filters/MapFogFilter"),
            c = n(h),
            d = function(e) {
                function t() { var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
                        i = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
                    a(this, t); var n = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return n.signals.certificate = new signals.Signal, n._closeButton = null, n._locationContainer = null, n._bg = null, n._mapHolder = null, n._map = null, n._mapSmooth = new PIXI.Point, n._fill = null, n._compass = null, n._ivandoe = null, n._fogReveal = null, n._fogRevealSprite = null, n._hideCloseButton = e, n._showCertificate = i, n._dragOffset = new PIXI.Point, n._dragging = !1, n._mapEase = .12, n._introAnimation = !1, n._emitters = [], n } return s(t, e), r(t, [{ key: "init", value: function() { this._createMap(), this._createFog(), this._createCloseButton(), this._parseMap(), this._mapHolder.scale.set(.64, .64), this.animateIntro() } }, { key: "destroy", value: function() { this.signals.certificate.dispose(), TweenMax.killTweensOf(this._ivandoe.scale), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "resize", value: function() { this.x = .5 * (P3.View.width - _["default"].STAGE_WIDTH), this._closeButton.x = .5 * (_["default"].STAGE_WIDTH + P3.View.width) - 100, this._closeButton.y = 100, this._bg.width = 3 * P3.View.width, this._bg.height = 3 * P3.View.height } }, { key: "update", value: function() { this._mapHolder.x += (this._mapSmooth.x - this._mapHolder.x) * this._mapEase, this._mapHolder.y += (this._mapSmooth.y - this._mapHolder.y) * this._mapEase; var e = deltaTime;
                        this._updateEmitters(e) } }, { key: "appear", value: function() { _["default"].audio.playMusic("music_loop_mystery_00"), delay(function() { _["default"].chat.playConversation(18), this._onMouseUp(null) }, .5, this), delay(function() { _["default"].quest.completeQuest("quest2") }, 1, this), this._showCertificate && this.signals.certificate.dispatch(this) } }, { key: "animateIn", value: function(e, t) {} }, { key: "animateOut", value: function(e, t) {} }, { key: "dragMap", value: function(e, t) { this._mapSmooth.x = e + this._dragOffset.x, this._mapSmooth.y = t + this._dragOffset.y, this.limitBounds() } }, { key: "limitBounds", value: function() { var e = this._fill.texture.width * this._fill.scale.x * .8,
                            t = this._fill.texture.height * this._fill.scale.y * .8;
                        this._mapSmooth.x > .5 * (_["default"].STAGE_WIDTH - P3.View.width) + e && (this._mapSmooth.x = .5 * (_["default"].STAGE_WIDTH - P3.View.width) + e), this._mapSmooth.x < .5 * (_["default"].STAGE_WIDTH + P3.View.width) - e && (this._mapSmooth.x = .5 * (_["default"].STAGE_WIDTH + P3.View.width) - e), this._mapSmooth.y > t && (this._mapSmooth.y = t), this._mapSmooth.y < P3.View.height - t && (this._mapSmooth.y = P3.View.height - t) } }, { key: "animateIntro", value: function() { this._introAnimation = !0; var e = new TimelineMax({ onComplete: function() { this._introAnimation = !1 }, onCompleteScope: this });
                        this.addTween(e), e.insert(TweenMax.to(this._mapSmooth, 2, { delay: 1, x: this._mapHolder.x - this._ivandoe.x, y: this._mapHolder.y - this._ivandoe.y, ease: Power1.easeInOut, onUpdate: function() { this.limitBounds() }, onUpdateScope: this })), e.insert(TweenMax.to(this._mapHolder.scale, 2, { delay: 1, x: 1, y: 1, ease: Power1.easeInOut })) } }, { key: "_parseMap", value: function() { var e = _["default"].chat.locations;
                        this._createRevealArea(new PIXI.Point(4, (-440)), 140); for (var t in e)
                            if (e.hasOwnProperty(t)) { var i = e[t]; if ("False" === i.IsLocked || _["default"].config.settings.map.unlocked) { var n = new PIXI.Point(parseInt(i.MapPositionX), parseInt(i.MapPositionY)),
                                        a = "False" === i.IsVisited && _["default"].currentLocation !== i.ID,
                                        o = this._createLocation(i.ID, translate(i.LocaleName), n, "True" === i.IsCamped, a); if (this._locationContainer.addChild(o), i.ID === _["default"].save.location) { this._currentLocation = o; var s = _["default"].assets,
                                            r = new P3.MovieClipSequence;
                                        r.addTextures([s.texture("ivandoe_001"), s.texture("ivandoe_002")]), this._ivandoe = new P3.MovieClip(r), this._ivandoe.position.set(n.x + 90, n.y - 40), this._ivandoe.anchor.set(.5), this._ivandoe.animationSpeed = .6, this._ivandoe.looping = !0, this._ivandoe.play(), this._map.addChild(this._ivandoe), r = new P3.MovieClipSequence, r.addTextures([s.texture("bert_001"), s.texture("bert_002")]), this._ivandoe.bert = new P3.MovieClip(r), this._ivandoe.bert.position.set(30, -26), this._ivandoe.bert.anchor.set(.5), this._ivandoe.bert.animationSpeed = 4, this._ivandoe.bert.looping = !0, this._ivandoe.bert.play(), this._ivandoe.addChild(this._ivandoe.bert), this.addTween(TweenMax.to(this._ivandoe.bert, 2, { y: this._ivandoe.bert.y + 4, ease: Power1.easeInOut, yoyo: !0, repeat: -1 })) } this._createRevealArea(n, i.MapFogRadius) } } _["default"].renderer.render(this._fogReveal.parent, this._fogRevealSprite.texture) } }, { key: "_createMap", value: function() { var e = _["default"].assets;
                        this._mapHolder = new PIXI.Container, this._mapHolder.x = .5 * _["default"].STAGE_WIDTH, this._mapHolder.y = .5 * P3.View.height, this._mapHolder.interactive = !0, this._mapHolder.hitArea = new PIXI.Rectangle(.5 * -Number.MAX_VALUE, .5 * -Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE), this._mapHolder.mousedown = this._mapHolder.touchstart = this._onMouseDown.bind(this), this._mapHolder.mouseup = this._mapHolder.mouseupoutside = this._mapHolder.touchend = this._onMouseUp.bind(this), this._mapHolder.mousemove = this._mapHolder.touchmove = this._onMouseMove.bind(this), this.addChild(this._mapHolder), this._bg = new PIXI.extras.TilingSprite(e.texture("wood_tile"), 256, 256), this._bg.anchor = new PIXI.Point(.5, .5), this._mapHolder.addChild(this._bg), this._map = new PIXI.Sprite(e.texture("bg_map_mist")), this._map.width = 2111, this._map.height = 1118, this._map.anchor = new PIXI.Point(.5, .5), this._mapHolder.addChild(this._map), this._fill = new PIXI.Sprite(e.texture("bg_map")), this._fill.anchor = new PIXI.Point(.5, .5), this._map.addChild(this._fill), this._mapSmooth.set(this._mapHolder.x, this._mapHolder.y), this._locationContainer = new PIXI.Container, this._map.addChild(this._locationContainer), this._compass = new PIXI.Sprite(e.texture("compass")), this._compass.anchor = new PIXI.Point(.5, .5), this._map.addChild(this._compass) } }, { key: "_createFog", value: function() { var e = new PIXI.Container;
                        this._fogReveal = new PIXI.Container, this._fogReveal.x = this._map.texture.width * this._map.scale.x * .5, this._fogReveal.y = this._map.texture.height * this._map.scale.y * .5, e.addChild(this._fogReveal); var t = new PIXI.RenderTexture.create(this._map.texture.width * this._map.scale.x, this._map.texture.height * this._map.scale.y, PIXI.settings.SCALE_MODE.DEFAULT, 1);
                        this._fogRevealSprite = new PIXI.Sprite(t), this._fogRevealSprite.anchor = new PIXI.Point(.5, .5), this._map.addChild(this._fogRevealSprite); var i = new c["default"](this._fogRevealSprite);!_["default"].save.isMapComplete() && (this._fill.filters = [i]) } }, { key: "_createCloseButton", value: function() { var e = _["default"].assets;
                        this._closeButton = P3.Button.create(e.texture("btn_primary_small_off"), e.texture("btn_primary_small_over"), e.texture("btn_primary_small_over"), e.texture("icon_close")), this._closeButton.visible = !this._hideCloseButton, this._closeButton.overSoundName = "sfx_ui_rollover_00", this._closeButton.clickSoundName = "sfx_ui_click_01", this._closeButton.signals.click.add(this._onCloseButtonClick, this), this.addChild(this._closeButton) } }, { key: "_createLocation", value: function(e, t, i, n, a) { var o = new PIXI.Container;
                        o.id = e, o.x = i.x, o.y = i.y; var s = _["default"].assets;
                        o.button = new P3.Button.create(s.texture("marker_base_off")), o.button.y = -34, o.button.overSoundName = "sfx_ui_rollover_00", o.button.clickSoundName = "sfx_ui_click_01", o.button.signals.click.add(this._onLocationButtonClick, this), o.addChild(o.button); var r = _["default"].save.getMinigameData(e),
                            l = new PIXI.Sprite(s.texture("marker_game_l"));
                        l.anchor = new PIXI.Point(.5, .5), l.visible = r.first !== -1, o.button.addChild(l); var u = new PIXI.Sprite(s.texture("marker_game_r"));
                        u.anchor = new PIXI.Point(.5, .5), u.visible = r.second !== -1, o.button.addChild(u); var h = new PIXI.Sprite(n ? s.texture("marker_flag_on") : s.texture("marker_flag_off")); if (h.anchor = new PIXI.Point(.5, .5), o.button.addChild(h), a) { var c = s.json("particle_button_highlight_00"),
                                d = new PIXI.Container;
                            d.y = -20, o.addChild(d); var p = new PIXI.particles.Emitter(d, [s.texture("particle_sparkle")], c);
                            p.emit = !0, this._emitters.push(p) } var f = new PIXI.Sprite(s.texture("marker_text")); if (f.y = 40, f.anchor = new PIXI.Point(.5, .5), o.addChild(f), webfont) { var y = new PIXI.Text(t, { fontSize: "24px", fontFamily: "Arial", align: "center", fill: 0, wordWrap: !0, wordWrapWidth: 140 });
                            y.anchor.set(.5), f.addChild(y) } else { var v = new PIXI.extras.BitmapText(t, { font: "26px Alghera Pro Map", align: "center" });
                            v.anchor.set(.5), v.maxWidth = 140, f.addChild(v) } return o } }, { key: "_updateEmitters", value: function(e) { for (var t = 0; t < this._emitters.length; ++t) { var i = this._emitters[t];
                            i.update(e) } } }, { key: "_createRevealArea", value: function(e, t) { var i = _["default"].assets,
                            n = new PIXI.Sprite(i.texture("map_mask")); return n.position.set(e.x, e.y), n.width = 2 * t, n.height = 2 * t, n.anchor = new PIXI.Point(.5, .5), this._fogReveal.addChild(n), n } }, { key: "_onLocationButtonClick", value: function(e) { var t = _["default"].chat,
                            i = t.getLocation(e.parent.id);
                        this._closeButton.interactive = !1; for (var n = 0; n < this._locationContainer.children.length; ++n) { var a = this._locationContainer.children[n];
                            a.button.enabled = !1 } if (e.parent !== this._currentLocation) { var o = new P3.Vector2(e.parent.x - this._currentLocation.x, e.parent.y - this._currentLocation.y),
                                s = o.length;
                            this._ivandoe.scale.x = -Math.sign(o.x), this.addTween(TweenMax.to(this._ivandoe, s / 160, { x: e.parent.x + 90, y: e.parent.y - 40, ease: Power1.easeIn })) } _["default"].narrator.stopNarratorSFX(), _["default"].audio.playSound(["vo_narrator_incidental_goodchoice_00", "vo_narrator_incidental_bravo_00", "vo_narrator_incidental_bravo_01", "vo_narrator_incidental_beware_00", "vo_narrator_incidental_beware_01", "vo_narrator_incidental_beware_02"]), this.addTween(delay(function() { this.signals.next.dispatch(this, i) }, 1, this)) } }, { key: "_onCloseButtonClick", value: function(e) { this.signals.previous.dispatch(this) } }, { key: "_onMouseDown", value: function(e) { var t = e.data.getLocalPosition(this);
                        this._dragOffset.set(this._mapHolder.x - t.x, this._mapHolder.y - t.y), this._dragging = !0 } }, { key: "_onMouseUp", value: function(e) { this._dragging = !1 } }, { key: "_onMouseMove", value: function(e) { if (!this._introAnimation) { var t = e.data.getLocalPosition(this);
                            this._dragging && this.dragMap(t.x, t.y) } } }]), t }(P3.Scene);
        i["default"] = d }, { "./Common": 13, "./filters/MapFogFilter": 49 }],
    25: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("./Actor"),
            _ = n(u),
            h = e("./Common"),
            c = n(h),
            d = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)),
                        i = c["default"].assets; return e._view = new PIXI.Sprite(i.texture("marker_game_map")), e._view.anchor = new PIXI.Point(.5, .5), e.addChild(e._view), e.interactive = !0, e.buttonMode = !0, e.click = e.tap = e._onMouseClick.bind(e), e.signals.click = new signals.Signal, e } return s(t, e), r(t, [{ key: "destroy", value: function() { this.click = this.tap = null, this.signals.click.dispose(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "_onMouseClick", value: function(e) { this.signals.click.dispatch(this) } }]), t }(_["default"]);
        i["default"] = d }, { "./Actor": 4, "./Common": 13 }],
    26: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("./Common"),
            _ = n(u),
            h = e("ismobilejs"),
            c = n(h),
            d = function(e) {
                function t() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "",
                        i = arguments[1],
                        n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
                    a(this, t); var s = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return s._text = e || "", s._animationName = i, s._firstTime = n, s._overlay = null, s._panel = null, s._helpLabel = null, s._playButton = null, s._closeButton = null, s._muteButton = null, s } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this._overlay = new PIXI.Graphics, this._overlay.interactive = !0, this.addChild(this._overlay), this._createPanel(), this._createAnimation(), this._createPlayButton(), this._createCloseButton(), this._createMuteButton(), this._animation.state.setAnimation(0, this._animationName, !0), this._ivandoe.state.setAnimation(0, this._animationName, !0) } }, { key: "destroy", value: function() { this._animation.destroy({ children: !0 }), this._ivandoe.destroy({ children: !0 }), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "resize", value: function() { this.x = .5 * (P3.View.width - _["default"].STAGE_WIDTH), this._overlay.clear(), this._overlay.beginFill(0, .6), this._overlay.drawRect(.5 * (_["default"].STAGE_WIDTH - P3.View.width), 0, P3.View.width, P3.View.height), this._overlay.endFill(), this._closeButton.x = .5 * (_["default"].STAGE_WIDTH - P3.View.width) + 100, this._closeButton.y = 100, this._muteButton.x = .5 * (_["default"].STAGE_WIDTH + P3.View.width) - 100, this._muteButton.y = 100 } }, { key: "appear", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "appear", this).call(this); var e = _["default"].config.settings.minigame.play_button_delay;
                        this._playButton.visible || (this._playButton.scale.set(0), this._tweenList.add(TweenMax.to(this._playButton.scale, .24, { delay: e, x: 1, y: 1, ease: Back.easeOut, easeParams: [2], onStart: function() { this._playButton.visible = !0 }, onStartScope: this }))) } }, { key: "update", value: function() { var e = deltaTime;
                        this._animation.update(e), this._ivandoe.update(e) } }, { key: "animateIn", value: function(e, t) { var i = new TimelineMax({ onComplete: e, onCompleteScope: t });
                        this._overlay.alpha = 0, i.insert(TweenMax.to(this._overlay, .34, { alpha: 1, ease: Power1.easeInOut, onStart: function() { this._overlay.visible = !0 }, onStartScope: this })), this._panel.scale.set(0), i.insert(TweenMax.to(this._panel.scale, .34, { delay: .1, x: 1, y: 1, ease: Back.easeOut, easeParams: [2], onStart: function() { this._panel.visible = !0 }, onStartScope: this })), this._muteButton.scale.set(0), i.insert(TweenMax.to(this._muteButton.scale, .24, { delay: .3, x: 1, y: 1, ease: Back.easeOut, easeParams: [1], onStart: function() { this._muteButton.visible = !0 }, onStartScope: this })), this._firstTime || (this._closeButton.scale.set(0), i.insert(TweenMax.to(this._closeButton.scale, .24, { delay: .34, x: 1, y: 1, ease: Back.easeOut, easeParams: [1], onStart: function() { this._closeButton.visible = !0 }, onStartScope: this }))) } }, { key: "animateOut", value: function(e, t) { var i = new TimelineMax({ onComplete: e, onCompleteScope: t });
                        i.insert(TweenMax.to(this, .24, { alpha: 0, ease: Power1.easeInOut, onComplete: function() { this._overlay.visible = !1 }, onCompleteScope: this })) } }, { key: "_createPanel", value: function() { this._panel = new PIXI.Container, this._panel.x = .5 * _["default"].STAGE_WIDTH, this._panel.y = .5 * _["default"].STAGE_HEIGHT - 40, this._panel.visible = !1, this.addChild(this._panel); var e = _["default"].assets,
                            t = new PIXI.Sprite(e.texture("panel_paper"));
                        t.anchor = new PIXI.Point(.5, .5), this._panel.addChild(t), this._panel.content = new PIXI.Container, this._panel.addChild(this._panel.content); var i = new PIXI.Sprite(e.texture("panel_bar_top"));
                        i.x = 0, i.y = -254, i.anchor = new PIXI.Point(.5, .5), this._panel.addChild(i); var n = new PIXI.Sprite(e.texture("panel_bar_btm"));
                        n.x = 0, n.y = 270, n.anchor = new PIXI.Point(.5, .5), this._panel.addChild(n) } }, { key: "_createAnimation", value: function() { var e = _["default"].assets,
                            t = new PIXI.Container;
                        this._panel.content.addChild(t), this._animation = new PIXI.spine.Spine(e.spineData(this._animationName)), this._animation.position.set(0, 0), this._animation.scale.set(.5, .5), this._animation.skeleton.setToSetupPose(), this._animation.skeleton.setSkin(null), this._animation.autoUpdate = !1, this._animation.update(0), t.addChild(this._animation), this._animation.state.addListener({ complete: this.onAnimationComplete.bind(this) }), this._ivandoe = new PIXI.spine.Spine(e.spineData("tutorial_ivandoe")), this._ivandoe.position.set(0, 0), this._ivandoe.scale.set(.5, .5), this._ivandoe.skeleton.setToSetupPose(), this._ivandoe.skeleton.setSkin(null), this._ivandoe.skeleton.setSkinByName(c["default"].any ? "finger" : "cursor"), this._ivandoe.autoUpdate = !1, this._ivandoe.update(0), t.addChild(this._ivandoe), t.mask = new PIXI.Sprite(PIXI.Texture.WHITE), t.mask.position.set(-2, 8), t.mask.width = 648, t.mask.height = 500, t.mask.anchor.set(.5, .5), t.mask.tint = 16711680, this._panel.addChild(t.mask) } }, { key: "_createHelpLabel", value: function() { if (webfont) this._helpLabel = new PIXI.Text(translate(this._text), { fontSize: "24px", fontFamily: "Arial", align: "center", fill: 0, wordWrap: !0, wordWrapWidth: 580 }), this._helpLabel.y = 120, this._helpLabel.pivot.x = .5 * this._helpLabel.width, this._panel.addChild(this._helpLabel);
                        else { var e = new PIXI.Container;
                            e.y = 120, this._panel.addChild(e), this._helpLabel = new PIXI.extras.BitmapText(translate(this._text), { font: "28px Alghera Pro", align: "center" }), this._helpLabel.maxWidth = 580, this._helpLabel.tint = 0, e.addChild(this._helpLabel), e.pivot.x = .5 * e.width } } }, { key: "_createPlayButton", value: function() { var e = _["default"].assets;
                        this._playButton = P3.Button.create(e.texture("btn_primary_blue_large_off"), e.texture("btn_primary_blue_large_over"), e.texture("btn_primary_blue_large_over"), e.texture("icon_large_play")), this._playButton.y = .5 * this._panel.height + 20, this._playButton.visible = !this._firstTime, this._playButton.overSoundName = "sfx_ui_rollover_00", this._playButton.clickSoundName = "sfx_ui_click_01", this._playButton.signals.click.add(this.onPlayButtonClick, this), this._panel.addChild(this._playButton) } }, { key: "_createCloseButton", value: function() { var e = _["default"].assets;
                        this._closeButton = P3.Button.create(e.texture("btn_primary_small_off"), e.texture("btn_primary_small_over"), e.texture("btn_primary_small_over"), e.texture("icon_back")), this._closeButton.visible = !1, this._closeButton.overSoundName = "sfx_ui_rollover_00", this._closeButton.clickSoundName = "sfx_ui_click_01", this._closeButton.signals.click.add(this.onCloseButtonClick, this), this.addChild(this._closeButton) } }, { key: "_createMuteButton", value: function() { var e = _["default"].assets,
                            t = new P3.ButtonStates;
                        t.normal = e.texture("btn_primary_small_off"), t.over = e.texture("btn_primary_small_over"), t.down = e.texture("btn_primary_small_over"), t.icon = e.texture("icon_sound"), t.iconAlt = e.texture("icon_mute"), this._muteButton = new P3.MuteButton(t), this._muteButton.visible = !1, this._muteButton.overSoundName = "sfx_ui_rollover_00", this._muteButton.clickSoundName = "sfx_ui_click_01", this.addChild(this._muteButton) } }, { key: "onPlayButtonClick", value: function(e) { this._playButton.interactive = !1, this._closeButton.interactive = !1, this.animateOut(function() { this.signals.next.dispatch(this) }, this) } }, { key: "onCloseButtonClick", value: function(e) { this._playButton.interactive = !1, this._closeButton.interactive = !1, this.signals.previous.dispatch(this) } }, { key: "onAnimationComplete", value: function(e) {} }]), t }(P3.Scene);
        i["default"] = d }, { "./Common": 13, ismobilejs: 2 }],
    27: [function(e, t, i) {
        "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 });
        var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function c(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : c(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("./Common"),
            _ = n(u),
            h = function(e) {
                function t() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0,
                        i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
                        n = arguments[2],
                        s = arguments.length > 3 && void 0 !== arguments[3] && arguments[3],
                        r = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : 0;
                    a(this, t); var l = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return l.signals.map = new signals.Signal, l._score = e, l._highscore = i, l._iconTexture = n || PIXI.Texture.EMPTY, l._rank = r, l._overlay = null, l._panel = null, l._text = null, l._titlePanel = null, l._scorePanel = null, l._highscorePanel = null, l._playButton = null, l._replayButton = null, l._closeButton = null, l._highScoreIsNew = s, l._tweens = [], l }
                return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this._overlay = new PIXI.Graphics, this._overlay.interactive = !0, this._overlay.visible = !1, this.addChild(this._overlay), this._rank > 1 ? this._text = P3.utils.selectRandom([{ str: translate("minigame_results_title_good1"), vo: "vo_narrator_incidental_wellplayed_00" }, { str: translate("minigame_results_title_good1"), vo: "vo_narrator_incidental_wellplayed_01" }, { str: translate("minigame_results_title_good2"), vo: "vo_narrator_incidental_bravo_00" }, { str: translate("minigame_results_title_good2"), vo: "vo_narrator_incidental_bravo_01" }]) : this._text = P3.utils.selectRandom([{ str: translate("minigame_results_title_bad1"), vo: "vo_narrator_incidental_tryagain_00" }, { str: translate("minigame_results_title_bad2"), vo: "vo_narrator_incidental_tryagain_01" }]), this._createPanel(), this._createReplayButton(), this._createCloseButton() } }, { key: "destroy", value: function() { this.signals.map.dispose(), this._replayButton.destroy(), this._closeButton.destroy(); for (var e = 0; e < this._tweens.length; ++e) this._tweens[e].kill();
                        this._tweens.length = 0, l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "resize", value: function() { this.x = .5 * (P3.View.width - _["default"].STAGE_WIDTH), this._overlay.clear(), this._overlay.beginFill(0, .6), this._overlay.drawRect(.5 * (_["default"].STAGE_WIDTH - P3.View.width), 0, P3.View.width, P3.View.height), this._overlay.endFill(), this._closeButton.position.set(.5 * (_["default"].STAGE_WIDTH + P3.View.width) - 100, P3.View.height - 140) } }, { key: "animateIn", value: function(e, t) { t = t || window; var i = this.addTween(new TimelineMax({ onComplete: function() { var i = new TimelineMax({ onComplete: function() { this._highScoreIsNew && this._particleBurst(), e && e.call(t) }, onCompleteScope: this });
                                this._highscorePanel.scale.set(0), i.insert(TweenMax.to(this._highscorePanel.scale, .34, { x: 1, y: 1, ease: Back.easeOut, easeParams: [1], onStart: function() { this._highscorePanel.visible = !0 }, onStartScope: this, onComplete: function() { this._highscorePanel.icon.scale.set(0), this._tweens.push(TweenMax.to(this._highscorePanel.icon.scale, .34, { x: 1, y: 1, ease: Back.easeOut, easeParams: [3], onStart: function() { this._highscorePanel.icon.visible = !0 }, onStartScope: this })) }, onCompleteScope: this })), this._scorePanel.scale.set(0), i.insert(TweenMax.to(this._scorePanel.scale, .34, { delay: .2, x: 1, y: 1, ease: Back.easeOut, easeParams: [1], onStart: function() { this._scorePanel.visible = !0 }, onStartScope: this, onComplete: function() { this._scorePanel.icon.scale.set(0), this._tweens.push(TweenMax.to(this._scorePanel.icon.scale, .34, { x: 1, y: 1, ease: Back.easeOut, easeParams: [3], onStart: function() { this._scorePanel.icon.visible = !0 }, onStartScope: this })) }, onCompleteScope: this })), this._rankPanel.scale.set(0), i.insert(TweenMax.to(this._rankPanel.scale, .34, { delay: .4, x: 1, y: 1, ease: Back.easeOut, easeParams: [1], onStart: function() { this._rankPanel.visible = !0 }, onStartScope: this, onComplete: function() { for (var e = this, t = [this._rankPanel.star1, this._rankPanel.star2, this._rankPanel.star3], i = function(i) { var n = t[i],
                                                    a = new TimelineMax({ delay: .2 * i });
                                                e._tweens.push(a), a.append(TweenMax.to(n.scale, .12, { x: 1.4, y: 1.4, ease: Power0.easeNone, onStart: function() { var e = _["default"].assets;
                                                        n.texture = e.texture(2 === i ? "minigame_icon_star" : "minigame_icon_star_small") } })), a.append(TweenMax.to(n.scale, .18, { x: 1, y: 1, ease: Back.easeOut, easeParams: [1] })) }, n = 0; n < this._rank; ++n) i(n) }, onCompleteScope: this })), this._titlePanel.scale.set(0), i.insert(TweenMax.to(this._titlePanel.scale, .34, { delay: 1.2, x: 1, y: 1, ease: Back.easeOut, easeParams: [2], onStart: function() { this._titlePanel.visible = !0 }, onStartScope: this })) }, onCompleteScope: this }));
                        this._tweens.push(i), this._overlay.alpha = 0, i.insert(TweenMax.to(this._overlay, .34, { alpha: 1, ease: Power1.easeInOut, onStart: function() { this._overlay.visible = !0 }, onStartScope: this })), this._panel.scale = new PIXI.Point, i.insert(TweenMax.to(this._panel.scale, .4, { delay: .4, x: 1, y: 1, ease: Back.easeOut, easeParams: [2], onStart: function() { this._panel.visible = !0 }, onStartScope: this })) } }, { key: "_createPanel", value: function() { this._panel = new PIXI.Container, this._panel.x = .5 * _["default"].STAGE_WIDTH, this._panel.y = .5 * _["default"].STAGE_HEIGHT, this._panel.visible = !1, this.addChild(this._panel); var e = _["default"].assets,
                            t = new PIXI.Sprite(e.texture("minigame_end_panel"));
                        t.anchor = new PIXI.Point(.5, .5), this._panel.addChild(t), this._createScorePanel(), this._createHighscorePanel(), this._createRankPanel(), this._createTitlePanel() } }, { key: "_createTitlePanel", value: function() { var e = _["default"].assets,
                            t = new PIXI.Sprite(e.texture("minigame_end_panel_message"));
                        t.position.set(0, 128), t.anchor.set(.5), t.visible = !1, webfont ? (t.label = new PIXI.Text(this._text.str, { fontSize: "40px", fontFamily: "Arial", fill: 0, align: "center" }), t.label.position.set(0, 0), t.label.anchor.set(.5), t.addChild(t.label)) : (t.label = new PIXI.extras.BitmapText(this._text.str, { font: "44px Alghera Pro", align: "center" }), t.label.position.set(0, 4), t.label.anchor.set(.5), t.label.tint = 0, t.addChild(t.label)), this._titlePanel = t, this._panel.addChild(this._titlePanel) } }, {
                    key: "_createScorePanel",
                    value: function() {
                        var e = _["default"].assets,
                            t = new PIXI.Sprite(e.texture("minigame_end_panel_stats"));
                        t.position.set(130, -148), t.anchor.set(.5), t.visible = !1, webfont ? (t.label = new PIXI.Text(this._score.toString(), { fontSize: "56px", fontFamily: "Arial", fill: 0, align: "center" }), t.label.position.set(30, 0), t.label.anchor.set(.5), t.addChild(t.label)) : (t.label = new PIXI.extras.BitmapText(this._score.toString(), { font: "60px Alghera Pro", align: "center" }), t.label.position.set(30, 4), t.label.anchor.set(.5), t.label.tint = 0, t.addChild(t.label)), t.icon = new PIXI.Sprite(this._iconTexture), t.icon.position.set(-68, 0), t.icon.anchor.set(.5),
                            t.icon.visible = !1, t.addChild(t.icon), this._scorePanel = t, this._panel.addChild(this._scorePanel)
                    }
                }, { key: "_createHighscorePanel", value: function() { var e = _["default"].assets,
                            t = new PIXI.Sprite(e.texture("minigame_end_panel_stats"));
                        t.position.set(-130, -148), t.anchor.set(.5), t.visible = !1, webfont ? (t.label = new PIXI.Text(this._highscore.toString(), { fontSize: "56px", fontFamily: "Arial", fill: 0, align: "center" }), t.label.position.set(30, 0), t.label.anchor.set(.5), t.addChild(t.label)) : (t.label = new PIXI.extras.BitmapText(this._highscore.toString(), { font: "60px Alghera Pro", align: "center" }), t.label.position.set(30, 4), t.label.anchor.set(.5), t.label.tint = 0, t.addChild(t.label)), t.icon = new PIXI.Sprite(e.texture("minigame_icon_end_best")), t.icon.position.set(-68, 0), t.icon.anchor.set(.5), t.icon.visible = !1, t.addChild(t.icon), this._highscorePanel = t, this._panel.addChild(this._highscorePanel) } }, { key: "_createRankPanel", value: function() { var e = _["default"].assets,
                            t = new PIXI.Sprite(e.texture("minigame_end_panel_stars"));
                        t.position.set(0, -8), t.anchor.set(.5), t.visible = !1, t.star1 = new PIXI.Sprite(e.texture("minigame_icon_star_small_empty")), t.star1.position.set(-120, 16), t.star1.anchor.set(.5), t.addChild(t.star1), t.star2 = new PIXI.Sprite(e.texture("minigame_icon_star_small_empty")), t.star2.position.set(120, 16), t.star2.anchor.set(.5), t.addChild(t.star2), t.star3 = new PIXI.Sprite(e.texture("minigame_icon_star_empty")), t.star3.anchor.set(.5), t.addChild(t.star3), this._rankPanel = t, this._panel.addChild(this._rankPanel) } }, { key: "_createPlayButton", value: function() { var e = _["default"].assets;
                        this._playButton = P3.Button.create(e.texture("btn_primary_small_off"), e.texture("btn_primary_small_over"), e.texture("btn_primary_small_over"), e.texture("icon_play")), this._playButton.x = 220, this._playButton.y = .5 * this._panel.height - 70, this._playButton.overSoundName = "sfx_ui_rollover_00", this._playButton.clickSoundName = "sfx_ui_click_01", this._playButton.signals.click.add(this._onCloseButtonClick, this), this._panel.addChild(this._playButton) } }, { key: "_createReplayButton", value: function() { var e = _["default"].assets;
                        this._replayButton = P3.Button.create(e.texture("btn_primary_small_off"), e.texture("btn_primary_small_over"), e.texture("btn_primary_small_over"), e.texture("icon_replay")), this._replayButton.y = .5 * this._panel.height - 40, this._replayButton.overSoundName = "sfx_ui_rollover_00", this._replayButton.clickSoundName = "sfx_ui_click_01", this._replayButton.signals.click.add(this._onReplayButtonClick, this), this._panel.addChild(this._replayButton) } }, { key: "_createCloseButton", value: function() { var e = _["default"].assets;
                        this._closeButton = P3.Button.create(e.texture("btn_primary_small_off"), e.texture("btn_primary_small_over"), e.texture("btn_primary_small_over"), e.texture("icon_back")), this._closeButton.scale.x = -1, this._closeButton.overSoundName = "sfx_ui_rollover_00", this._closeButton.clickSoundName = "sfx_ui_click_01", this._closeButton.signals.click.add(this._onCloseButtonClick, this), this.addChild(this._closeButton) } }, { key: "_particleBurst", value: function() { var e = _["default"].assets,
                            t = e.json("particle_emitter_score_burst_00"),
                            i = new PIXI.particles.Emitter(this, [e.texture("particle_acorn")], t);
                        i.autoUpdate = !0, i.updateOwnerPos(.5 * _["default"].STAGE_WIDTH, 215), i.playOnceAndDestroy() } }, { key: "_onReplayButtonClick", value: function(e) { this.signals.next.dispatch(this) } }, { key: "_onCloseButtonClick", value: function(e) { this.signals.previous.dispatch(this) } }, { key: "_onMapButtonClick", value: function(e) { this.signals.map.dispatch(this) } }, { key: "score", get: function() { return this._score } }, { key: "highscore", get: function() { return this._highscore } }]), t
            }(P3.Scene);
        i["default"] = h
    }, { "./Common": 13 }],
    28: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function y(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : y(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("./Common"),
            _ = n(u),
            h = e("ismobilejs"),
            c = n(h),
            d = e("./quests/QuestPopup"),
            p = n(d),
            f = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e.id = -1, e.forceHelp = !1, e._hud = null, e._score = 0, e._graceTime = 0, e._graceDuration = 2.4, e._grace = !0, e._running = !1, e._gameover = !1, e._tutorialPointer = null, e._inTut = !1, e._newHighscorePopup = null, e._newHighscore = !1, e } return s(t, e), r(t, [{ key: "init", value: function() { console.warn("minigame init") } }, { key: "destroy", value: function() { this._newHighscorePopup.destroy(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "update", value: function() { if (this._grace) { var e = deltaTime;
                            this._graceTime >= this._graceDuration ? (this._grace = !1, console.warn("minigame grace over"), this.start()) : this._graceTime += e } this.checkNewHighscore() } }, { key: "checkNewHighscore", value: function() { if (!this._newHighscore) { var e = _["default"].save.getMinigameHighscore(this.id); if (e > 0 && this._score > e) { this._newHighscore = !0; var t = this._newHighscorePopup;
                                t.animation = new TimelineMax({ onComplete: function() { t.visible = !1 }, onCompleteScope: this }), this._tweenList.add(t.animation), t.scale.set(0), t.animation.append(TweenMax.to(t.scale, .4, { delay: .2, x: 1, y: 1, ease: Back.easeOut, easeParams: [2], onStart: function() { t.visible = !0 }, onStartScope: this })), t.animation.append(TweenMax.to(t, .4, { delay: 2, alpha: 0, ease: Power1.easeInOut })), _["default"].audio.playSound("sfx_new_highscore") } } } }, { key: "appear", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "appear", this).call(this), _["default"].audio.playSound("music_introduction_epic_ivandoe_00"), console.warn("played sound"); var e = _["default"].assets.texture("quest_popup_icon_highscore_1");
                        this._newHighscorePopup = new p["default"](translate("minigame_new_highscore"), e), this._newHighscorePopup.position.set(.5 * P3.View.width, 60), this._newHighscorePopup.visible = !1, _["default"].stage.addChild(this._newHighscorePopup) } }, { key: "start", value: function() { this._score = 0, this._running = !0, console.warn("minigame start") } }, { key: "end", value: function() { this._running = !1, console.warn("minigame end"), this.signals.next.dispatch(this, this._score) } }, { key: "playEndVO", value: function(e) { var t = _["default"].save.getMinigameRank(this.id, e); switch (t) {
                            default:
                            case 0:
                                _["default"].audio.playSound(P3.utils.selectRandom(["vo_narrator_incidental_curses_0" + P3.math.randomInt(0, 1), "vo_narrator_incidental_ohdear_0" + P3.math.randomInt(0, 1), "vo_narrator_incidental_tryagain_0" + P3.math.randomInt(0, 1)])); break;
                            case 1:
                                _["default"].audio.playSound("vo_narrator_incidental_tastesuccess_00"); break;
                            case 2:
                                _["default"].audio.playSound("vo_narrator_incidental_wellplayed_0" + P3.math.randomInt(0, 1)); break;
                            case 3:
                                _["default"].audio.playSound("vo_narrator_incidental_excellentwork_00") } } }, { key: "_initTutorialPointer", value: function(e) { e = e || this; var t = "pointer_cursor";
                        c["default"].any && (t = "pointer_hand"); var i = new PIXI.Sprite(_["default"].assets.texture(t)); return i.visible = !1, e.addChild(i), this._tutorialPointer = i, i } }, { key: "_animatePointer", value: function(e) { var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
                        this._tutorialPointer.position = e, this._tutorialPointer.visible = !0, t ? TweenMax.to(this._tutorialPointer, .5, { x: this._tutorialPointer.x + 125, y: this._tutorialPointer.y - 125, yoyo: !0, repeat: -1, delay: .5, repeatDelay: .5, ease: Power1.easeInOut }) : TweenMax.to(this._tutorialPointer.scale, .5, { x: .7, y: .7, yoyo: !0, repeat: -1, delay: .5, repeatDelay: .5, ease: Power1.easeInOut }) } }, { key: "_killPointer", value: function() { TweenMax.killTweensOf(this._tutorialPointer), this._tutorialPointer.visible = !1 } }, { key: "_isFirstPlay", value: function() { var e = _["default"].save.getMinigameHighscore(this.id); return 0 === e || this.forceHelp } }, { key: "_tutorial", value: function() { throw new Error("tutorial method must be implemented in minigame scene!") } }, { key: "_onPauseButtonClick", value: function(e) { this._gameover || this.signals.pause.dispatch(this, !1) } }, { key: "score", get: function() { return this._score } }, { key: "highscore", get: function() { var e = Math.max(this._score, _["default"].save.getMinigameHighscore(this.id)); return 0 === e ? "-" : e } }]), t }(P3.Scene);
        i["default"] = f }, { "./Common": 13, "./quests/QuestPopup": 195, ismobilejs: 2 }],
    29: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("./Actor"),
            _ = n(u),
            h = e("./Common"),
            c = n(h),
            d = function(e) {
                function t(e, i) { a(this, t); var n = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    n.signals.play = new signals.Signal, n._chatId = e, n._minigameId = i, n._flag = null, n._icon = null, n._playButton = null; var s = c["default"].assets; return n._view = new PIXI.Sprite(s.texture("marker_game")), n._view.anchor = new PIXI.Point(.5, .5), n.addChild(n._view), n._createIcon(i), n._createFlag(), n._createRank(), n._createPlayButton(), n } return s(t, e), r(t, [{ key: "destroy", value: function() { this.signals.play.dispose(), this._playButton.destroy(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "unlock", value: function() { var e = c["default"].assets,
                            t = this._playButton.states.clone();
                        t.icon = e.texture("icon_replay"), this._playButton.setStates(t), this._flag.visible = !0, this._flag.play(), this.updateRank() } }, { key: "updateRank", value: function() { var e = c["default"].assets,
                            t = c["default"].save,
                            i = t.getMinigameHighscore(this._minigameId),
                            n = c["default"].save.getMinigameRank(this._minigameId, i); switch (n) {
                            case 1:
                                this._rank.image.texture = e.texture("marker_game_score_001"); break;
                            case 2:
                                this._rank.image.texture = e.texture("marker_game_score_002"); break;
                            case 3:
                                this._rank.image.texture = e.texture("marker_game_score_003") } } }, { key: "_createIcon", value: function(e) { var t = c["default"].assets,
                            i = PIXI.Texture.EMPTY; switch (e) {
                            case 0:
                                i = t.texture("marker_game_acornAntlers"); break;
                            case 1:
                                i = t.texture("marker_game_bearCheek"); break;
                            case 2:
                                i = t.texture("marker_game_bronco"); break;
                            case 3:
                                i = t.texture("marker_game_flyAttack"); break;
                            case 4:
                                i = t.texture("marker_game_duckyEggs"); break;
                            case 5:
                                i = t.texture("marker_game_flappyBert"); break;
                            case 6:
                                i = t.texture("marker_game_frogKick"); break;
                            case 7:
                                i = t.texture("marker_game_mountainHiking"); break;
                            case 8:
                                i = t.texture("marker_game_poodlePlay"); break;
                            case 9:
                                i = t.texture("marker_game_puffedUp"); break;
                            case 10:
                                i = t.texture("marker_game_raftBalance"); break;
                            case 11:
                                i = t.texture("marker_game_royalRoar"); break;
                            case 12:
                                i = t.texture("marker_game_swordStrike"); break;
                            case 13:
                                i = t.texture("marker_game_turnipNinja"); break;
                            case 14:
                                i = t.texture("marker_game_turnipRoast"); break;
                            case 15:
                                i = t.texture("marker_game_wackagnome"); break;
                            case 16:
                                i = t.texture("marker_game_witchDeflect"); break;
                            case 17:
                                i = t.texture("marker_game_wolfRun"); break;
                            case 18:
                                i = t.texture("marker_game_monsterRun"); break;
                            case 19:
                                i = t.texture("marker_game_swordPractice") } this._icon = new PIXI.Sprite(i), this._icon.anchor.set(.5), this._view.addChild(this._icon) } }, { key: "_createFlag", value: function() { var e = c["default"].assets,
                            t = new P3.MovieClipSequence;
                        t.addTextures([e.texture("marker_flag_001"), e.texture("marker_flag_002"), e.texture("marker_flag_003"), e.texture("marker_flag_004"), e.texture("marker_flag_005"), e.texture("marker_flag_006")]), this._flag = new P3.MovieClip(t), this._flag.position.set(26, -252), this._flag.anchor.set(.5), this._flag.animationSpeed = 8, this._flag.looping = !0, this._flag.visible = !1, this.addChild(this._flag) } }, { key: "_createRank", value: function() { var e = c["default"].assets;
                        this._rank = new PIXI.Container, this._rank.position.set(-6, -22), this.addChild(this._rank), this._rank.bg = new PIXI.Sprite(e.texture("marker_game_score_000")), this._rank.bg.anchor.set(.5), this._rank.addChild(this._rank.bg), this._rank.image = new PIXI.Sprite(PIXI.Texture.EMPTY), this._rank.image.anchor.set(.5), this._rank.addChild(this._rank.image), this.updateRank() } }, { key: "_createPlayButton", value: function() { var e = c["default"].assets;
                        this._playButton = P3.Button.create(e.texture("btn_primary_small_blue_off"), e.texture("btn_primary_small_blue_over"), e.texture("btn_primary_small_blue_over"), e.texture("icon_play")), this._playButton.x = -6, this._playButton.y = 46, this._playButton.overSoundName = "sfx_ui_rollover_00", this._playButton.clickSoundName = "sfx_ui_click_01", this._playButton.signals.click.add(this._onPlayButtonClick, this), this.addChild(this._playButton) } }, { key: "_onPlayButtonClick", value: function(e) { this.signals.play.dispatch(this._chatId) } }, { key: "chatId", get: function() { return parseInt(this._chatId) } }, { key: "minigameId", get: function() { return parseInt(this._minigameId) } }]), t }(_["default"]);
        i["default"] = d }, { "./Actor": 4, "./Common": 13 }],
    30: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function c(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : c(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("./Interactable"),
            _ = n(u),
            h = function(e) {
                function t(e) { var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : -1;
                    a(this, t); var n = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, i)); return n.lookAtInteract = !0, n._view = new PIXI.Sprite(e), n._view.anchor = new PIXI.Point(.5, .5), n.addChild(n._view), n._wantChat = !1, n } return s(t, e), r(t, [{ key: "interact", value: function(e) { if (this.lookAtInteract) { var i = Math.sign(e.x - this.x);
                            this.faceDirection(i) } l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "interact", this).call(this, e) } }, { key: "stopInteract", value: function(e) { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "stopInteract", this).call(this, e) } }, { key: "_onClick", value: function(e) { this.signals.click.dispatch(this) } }, { key: "wantChat", get: function() { return this._wantChat }, set: function(e) { this._wantChat = e, this._wantChat ? (this.interactive = !0, this.buttonMode = !0) : (this.interactive = !1, this.buttonMode = !1) } }]), t }(_["default"]);
        i["default"] = h }, { "./Interactable": 18 }],
    31: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function c(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : c(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("./Common"),
            _ = n(u),
            h = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._overlay = null, e._panel = null, e._titlePanel = null, e._titleLabel = null, e._infoLabel = null, e._playButton = null, e._muteButton = null, e._nextPageButton = null, e._prevPageButton = null, e._helpArr = [], e._pageIndex = 0, e } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this._overlay = new PIXI.Graphics, this._overlay.interactive = !0, this._overlay.visible = !1, this.addChild(this._overlay); var e = _["default"].assets;
                        this._helpArr = [{ text: translate("pause_help1"), texture: e.texture("help_001") }, { text: translate("pause_help2"), texture: e.texture("help_002") }, { text: translate("pause_help3"), texture: e.texture("help_003") }, { text: translate("pause_help4"), texture: e.texture("help_004") }, { text: translate("pause_help5"), texture: e.texture("help_005") }], this._createPanel(), this._createMuteButton(), this.showPage(this._pageIndex) } }, { key: "resize", value: function() { this.x = .5 * (P3.View.width - _["default"].STAGE_WIDTH), this._overlay.clear(), this._overlay.beginFill(0, .6), this._overlay.drawRect(.5 * (_["default"].STAGE_WIDTH - P3.View.width), 0, P3.View.width, P3.View.height), this._overlay.endFill(), this._muteButton.x = .5 * (_["default"].STAGE_WIDTH + P3.View.width) - 100, this._muteButton.y = 100 } }, { key: "appear", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "appear", this).call(this), _["default"].audio.playMusic("music_loop_pause_01") } }, { key: "animateIn", value: function(e, t) { var i = new TimelineMax({ onComplete: e, onCompleteScope: t });
                        this.addTween(i), i.insert(TweenMax.from(this._overlay, .24, { alpha: 0, ease: Power1.easeInOut, onStart: function() { this._overlay.visible = !0 }, onStartScope: this })), i.insert(TweenMax.from(this._panel.scale, .4, { delay: .14, x: 0, y: 0, ease: Back.easeOut, easeParams: [1], onStart: function() { this._panel.visible = !0 }, onStartScope: this })), i.insert(TweenMax.from(this._titlePanel.scale, .34, { delay: .26, x: .5, y: .5, ease: Back.easeOut, easeParams: [1], onStart: function() { this._titlePanel.visible = !0 }, onStartScope: this })), i.insert(TweenMax.from(this._playButton.scale, .34, { delay: .32, x: 0, y: 0, ease: Back.easeOut, easeParmas: [1], onStart: function() { this._playButton.visible = !0 }, onStartScope: this })) } }, { key: "showPage", value: function(e) { var t = this._helpArr[e];
                        this._infoLabel.text = t.text, webfont ? this._infoLabel.pivot.x = .5 * this._infoLabel.width : (this._infoLabel.validate(), this._infoLabel.parent.pivot.x = .5 * this._infoLabel.textWidth), this._panel.image.texture = t.texture, this._nextPageButton.visible = e < this._helpArr.length - 1, this._prevPageButton.visible = e > 0 } }, { key: "_createPanel", value: function() { this._panel = new PIXI.Container, this._panel.x = .5 * _["default"].STAGE_WIDTH, this._panel.y = .5 * _["default"].STAGE_HEIGHT, this._panel.visible = !1, this.addChild(this._panel); var e = _["default"].assets;
                        this._panel.bg = new PIXI.Sprite(e.texture("pause_panel")), this._panel.bg.anchor = new PIXI.Point(.5, .5), this._panel.addChild(this._panel.bg), this._panel.image = new PIXI.Sprite(PIXI.Texture.EMPTY), this._panel.image.anchor = new PIXI.Point(.5, .5), this._panel.addChild(this._panel.image), this._createTitlePanel(), this._createInfoLabel(), this._createPlayButton(), this._createNextPageButton(), this._createPrevPageButton() } }, { key: "_createTitlePanel", value: function() { this._titlePanel = new PIXI.Container, this._titlePanel.y = -268, this._titlePanel.visible = !1, this._panel.addChild(this._titlePanel); var e = _["default"].assets;
                        this._titlePanel.bg = new PIXI.Sprite(e.texture("title_panel")), this._titlePanel.bg.anchor = new PIXI.Point(.5, .5), this._titlePanel.addChild(this._titlePanel.bg), webfont ? (this._titleLabel = new PIXI.Text(translate("pause_title"), { fontSize: "40px", fontFamily: "Arial", fill: 0, align: "center" }), this._titleLabel.y = -12, this._titleLabel.anchor.set(.5), this._titlePanel.addChild(this._titleLabel)) : (this._titleLabel = new PIXI.extras.BitmapText(translate("pause_title"), { font: "44px Alghera Pro", align: "center" }), this._titleLabel.y = -8, this._titleLabel.anchor.set(.5), this._titleLabel.tint = 0, this._titlePanel.addChild(this._titleLabel)) } }, { key: "_createInfoLabel", value: function() { if (webfont) this._infoLabel = new PIXI.Text("", { fontSize: "26px", fontFamily: "Arial", fill: 0, align: "center", wordWrap: !0, wordWrapWidth: 640 }), this._infoLabel.y = 126, this._panel.addChild(this._infoLabel);
                        else { var e = new PIXI.Container;
                            e.y = 126, this._panel.addChild(e), this._infoLabel = new PIXI.extras.BitmapText("", { font: "30px Alghera Pro", align: "center" }), this._infoLabel.maxWidth = 640, this._infoLabel.tint = 0, e.addChild(this._infoLabel) } } }, { key: "_createPlayButton", value: function() { var e = _["default"].assets;
                        this._playButton = P3.Button.create(e.texture("btn_primary_blue_large_off"), e.texture("btn_primary_blue_large_over"), e.texture("btn_primary_blue_large_over"), e.texture("icon_large_play")), this._playButton.x = 420, this._playButton.y = 260, this._playButton.overSoundName = "sfx_ui_rollover_00", this._playButton.clickSoundName = "sfx_ui_click_01", this._playButton.visible = !1, this._playButton.signals.click.add(this._onPlayButtonClick, this), this._panel.addChild(this._playButton) } }, { key: "_createMuteButton", value: function() { var e = _["default"].assets,
                            t = new P3.ButtonStates;
                        t.normal = e.texture("btn_primary_small_off"), t.over = e.texture("btn_primary_small_over"), t.down = e.texture("btn_primary_small_over"), t.icon = e.texture("icon_sound"), t.iconAlt = e.texture("icon_mute"), this._muteButton = new P3.MuteButton(t), this._muteButton.overSoundName = "sfx_ui_rollover_00", this._muteButton.clickSoundName = "sfx_ui_click_01", this.addChild(this._muteButton) } }, { key: "_createNextPageButton", value: function() { var e = _["default"].assets;
                        this._nextPageButton = P3.Button.create(e.texture("btn_next_off"), e.texture("btn_next_over"), e.texture("btn_next_over"), e.texture("icon_next")), this._nextPageButton.x = 462, this._nextPageButton.visible = !1, this._nextPageButton.overSoundName = "sfx_ui_rollover_00", this._nextPageButton.clickSoundName = "sfx_ui_click_01", this._nextPageButton.signals.click.add(this._onNextPageButtonClick, this), this._panel.addChild(this._nextPageButton) } }, { key: "_createPrevPageButton", value: function() { var e = _["default"].assets;
                        this._prevPageButton = P3.Button.create(e.texture("btn_previous_off"), e.texture("btn_previous_over"), e.texture("btn_previous_over"), e.texture("icon_previous")), this._prevPageButton.x = -462, this._prevPageButton.visible = !1, this._prevPageButton.overSoundName = "sfx_ui_rollover_00", this._prevPageButton.clickSoundName = "sfx_ui_click_01", this._prevPageButton.signals.click.add(this._onPrevPageButtonClick, this), this._panel.addChild(this._prevPageButton) } }, { key: "_onPlayButtonClick", value: function(e) { this._playButton.interactive = !1, this._muteButton.interactive = !1, this._nextPageButton.interactive = !1, this._prevPageButton.interactive = !1, this.signals.previous.dispatch(this) } }, { key: "_onNextPageButtonClick", value: function(e) { this.showPage(++this._pageIndex) } }, { key: "_onPrevPageButtonClick", value: function(e) { this.showPage(--this._pageIndex) } }]), t }(P3.Scene);
        i["default"] = h }, { "./Common": 13 }],
    32: [function(e, t, i) {
        "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 });
        var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function y(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : y(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("./Actor"),
            _ = n(u),
            h = e("./Common"),
            c = n(h),
            d = e("./Interactable"),
            p = n(d),
            f = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    i.moveSpeed = 340, i.interactDist = 240, i.disableMovement = !1, i._target = 0, i._moving = !1, i._velocity = new P3.Vector2, i._lastPosition = new PIXI.Point, i._skipFrame = 0, i._swordDrawn = !1, i._drawSwordSFX = null, i._drawSwordSFXDelay = null, i._shadow = null, i._fairy = !1, i.interactive = !0, i.buttonMode = !0, i.signals.arrive = new signals.Signal; var n = c["default"].assets,
                        s = new PIXI.Container;
                    i.addChild(s), i._view = new PIXI.spine.Spine(n.spineData("ivandoe_front")), i._view.position.set(0, e.y), i._view.scale.set(.4, .4), i._view.skeleton.setToSetupPose(), i._view.skeleton.setSkin(null), i._view.skeleton.setSkinByName("standard"), i._view.autoUpdate = !1, i._view.update(0), s.addChild(i._view); for (var r = ["idle_posing_1", "idle_posing_2", "idle_posing_3", "idle_posing_4", "draw_sword", "draw_sword_walk", "retract_sword", "frog_kick_hit", "throw_acorn", "idle_find_item", "idle_start_fire", "idle_stop_fire"], l = 0; l < r.length; ++l)
                        for (var u = 0; u < r.length; ++u) l !== u && i._view.state.data.setMix(r[l], r[u], .2); return i.hitArea = new PIXI.Circle(0, 24, 100), i._view.state.addListener({ event: i._onAnimationEvent.bind(i), complete: i._onAnimationComplete.bind(i) }), i }
                return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this._target = this.x, this._lastPosition.set(this.x, this.y), this._playIdleAnimation(), this._createShadow(), this.click = this.tap = this._onClick.bind(this) } }, { key: "destroy", value: function() { this.signals.arrive.dispose(), this.click = this.tap = null, l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "moveTo", value: function(e) { if (!this.disableMovement) { var t = this._target;
                            this._target = e, this._target instanceof p["default"] && this._target.focus(this), t instanceof p["default"] && t.stopFocus(this) } } }, { key: "stopMoving", value: function() { this.moveTo(this.x), this._moving = !1 } }, { key: "interact", value: function(e) { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "interact", this).call(this, e) } }, { key: "stopInteract", value: function(e) { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "stopInteract", this).call(this, e) } }, { key: "update", value: function(e) { var i = 0;
                        i = this._target instanceof p["default"] ? this._target.x - this.x : this._target - this.x; var n = Math.sign(i); if (this._target instanceof p["default"])
                            if (Math.abs(i) > 0 && Math.abs(i) < this.interactDist) { i = 0; var a = this._target;
                                this.moveTo(this.x), this.interact(a), this.signals.arrive.dispatch(this) } else this.x += Math.sign(i) * this.moveSpeed * e;
                        else this.x += Math.sign(i) * this.moveSpeed * e, Math.abs(i) > 0 && Math.abs(i) < this.moveSpeed * e && (i = 0, this.x = this._target, this.signals.arrive.dispatch(this)); var o = Math.sign(i);
                        0 === o || this._moving ? 0 === o && this._moving && (this._moving = !1, this._playIdleAnimation(), console.log("animate idle")) : (this._moving = !0, this._playWalkAnimation(), console.log("animate walking")), this.faceDirection(n), this._skipFrame++ % 2 === 0 && this._view.update(2 * e), this._velocity.set(this.x - this._lastPosition.x, this.y - this._lastPosition.y), this._lastPosition.set(this.x, this.y), this._updateShadow(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "update", this).call(this, e) } }, { key: "pickupItem", value: function() { this.stopMoving(), this._playItemAnimation() } }, { key: "drawSword", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];
                        this._fairy || (this.stopMoving(), this._swordDrawn = !0, this._view.state.setAnimation(0, "draw_sword", !1), this._playIdleAnimation(!0), !e && this._playDrawSwordSFX(), console.log("drawing sword")) } }, { key: "sheathSword", value: function() { this._fairy || (this.stopMoving(), this._cancelDrawSwordSFX(), this._swordDrawn = !1, this._view.state.setAnimation(0, "retract_sword", !1), this._playIdleAnimation(!0), console.log("sheathing sword")) } }, { key: "kick", value: function(e) { this.stopMoving(), this.faceDirection(e), this._view.state.setAnimation(0, "idle_kick_squirrel", !1), this._playIdleAnimation(!0), console.log("kicking something") } }, { key: "throwAcorn", value: function(e) { this.stopMoving(), this.faceDirection(e), this._view.state.setAnimation(0, "throw_acorn", !1), this._playIdleAnimation(!0), console.log("thrown acorn") } }, { key: "scared", value: function(e) { this.stopMoving(), this.faceDirection(e), this._view.state.setAnimation(0, "gag_ladybirds", !1), this._playIdleAnimation(!0), c["default"].audio.playSound("vo_ivandoe_yelps_00"), console.log("scared") } }, { key: "campfire", value: function(e) { this.stopMoving(), e ? this._view.state.setAnimation(0, "idle_start_fire", !1) : this._view.state.setAnimation(0, "idle_stop_fire", !1), this._playIdleAnimation(!0) } }, { key: "resetPosition", value: function() { this._lastPosition = new PIXI.Point(this.position.x, this.position.y), this._velocity.set(0, 0), this.moveTo(this.x) } }, { key: "setRaspberryFairy", value: function(e) { this._fairy = e, e ? (this._swordDrawn = !1, this._view.skeleton.setSkin(null), this._view.skeleton.setSkinByName("fairy")) : (this._view.skeleton.setSkin(null), this._view.skeleton.setSkinByName("standard")) } }, { key: "_createShadow", value: function() { var e = c["default"].assets;
                        this._shadow = new PIXI.Sprite(e.texture("shadow")), this._shadow.y = this.y + 184, this._shadow.anchor.set(.5), this.parent.addChildAt(this._shadow, this.parent.getChildIndex(this)) } }, { key: "_updateShadow", value: function() { this._shadow.x = this.x, this._shadow.visible = this.visible } }, { key: "_playWalkAnimation", value: function() { this._swordDrawn ? this._view.state.setAnimation(0, "draw_sword_walk", !0) : this._view.state.setAnimation(0, "walk", !0) } }, {
                    key: "_playIdleAnimation",
                    value: function() {
                        var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];
                        this._swordDrawn ? e ? this._view.state.addAnimation(0, "draw_sword_idle", !0, 0) : this._view.state.setAnimation(0, "draw_sword_idle", !0) : e ? this._view.state.addAnimation(0, P3.utils.selectRandom(["idle_posing_1", "idle_posing_2", "idle_posing_3", "idle_turnip_eating"]), !1, 0) : this._view.state.setAnimation(0, P3.utils.selectRandom(["idle_posing_1", "idle_posing_2", "idle_posing_3", "idle_turnip_eating"]), !1);
                    }
                }, { key: "_playItemAnimation", value: function() { this._view.state.setAnimation(0, "idle_find_item", !1), this._playIdleAnimation(!0) } }, { key: "_playDrawSwordSFX", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1;
                        this._drawSwordSFXDelay = delay(function() { this._drawSwordSFXDelay = null, c["default"].audio.playSound(["vo_ivandoe_attack_00", "vo_ivandoe_attack_00", "vo_ivandoe_determined_00", "vo_ivandoe_determined_00", "vo_ivandoe_determined_00", "vo_ivandoe_determined_00", "vo_ivandoe_determined_00", "vo_ivandoe_quest_on_00", "vo_ivandoe_quest_on_00"]) }, e) } }, { key: "_stopDrawSwordSFX", value: function() { this._drawSwordSFX && (this._drawSwordSFX.stop(), this._drawSwordSFX = null) } }, { key: "_cancelDrawSwordSFX", value: function() { this._drawSwordSFXDelay && (this._drawSwordSFXDelay.kill(), this._drawSwordSFXDelay = null) } }, { key: "_playFootstepSFX", value: function() { this.inCameraView && c["default"].audio.playSound(["sfx_footstep_00", "sfx_footstep_01", "sfx_footstep_02", "sfx_footstep_03", "sfx_footstep_04"]) } }, { key: "_playSwipeSFX", value: function() { this.inCameraView && c["default"].audio.playSound("sfx_swipe_0" + P3.math.randomInt(0, 1)) } }, { key: "_playKickSFX", value: function() { this.inCameraView && c["default"].audio.playSound("sfx_punch_hit_00") } }, { key: "_playEatTurnipSFX", value: function() { this.inCameraView && c["default"].audio.playSound("sfx_eat_turnip") } }, { key: "_onClick", value: function(e) { this._swordDrawn ? this.sheathSword() : this.drawSword() } }, { key: "_onAnimationEvent", value: function(e, t) { "sfx_footstep" === t.data.name ? this._playFootstepSFX() : "sfx_swipe" === t.data.name ? this._playSwipeSFX() : "sfx_kick" === t.data.name ? this._playKickSFX() : "sfx_eat_turnip" === t.data.name && this._playEatTurnipSFX() } }, { key: "_onAnimationComplete", value: function(e) { var t = e.animation.name;
                        ["idle_posing_1", "idle_posing_2", "idle_posing_3", "idle_turnip_eating"].indexOf(t) !== -1 && this._playIdleAnimation() } }, { key: "velocity", get: function() { return this._velocity } }, { key: "swordDrawn", get: function() { return this._swordDrawn } }]), t
            }(_["default"]);
        i["default"] = f
    }, { "./Actor": 4, "./Common": 13, "./Interactable": 18 }],
    33: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function y(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : y(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("./Common"),
            _ = n(u),
            h = e("./ui/ScrollBar"),
            c = n(h),
            d = e("./ui/ScrollView"),
            p = n(d),
            f = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._overlay = null, e._panel = null, e._entryContainer = null, e._titlePanel = null, e._titleLabel = null, e._scrollBar = null, e._scrollView = null, e } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this._overlay = new PIXI.Graphics, this._overlay.interactive = !0, this._overlay.visible = !1, this.addChild(this._overlay), this._createPanel(), this.showPage(0), _["default"].input.signals.mouseUp.add(this._onMouseUp, this) } }, { key: "destroy", value: function() { _["default"].input.signals.mouseUp.remove(this._onMouseUp, this), this._scrollBar.signals.scroll.remove(this._onScrollBarScroll, this), this._scrollView.signals.scroll.remove(this._onScrollViewScroll, this), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "resize", value: function() { this.x = .5 * (P3.View.width - _["default"].STAGE_WIDTH), this._overlay.clear(), this._overlay.beginFill(0, .6), this._overlay.drawRect(.5 * (_["default"].STAGE_WIDTH - P3.View.width), 0, P3.View.width, P3.View.height), this._overlay.endFill() } }, { key: "appear", value: function() { this.animateIn(function() { _["default"].save.showQuestCelebration && (_["default"].save.showQuestCelebration = !1, _["default"].save.saveGame(), this._showParticleCelebration()) }, this) } }, { key: "update", value: function() { var e = deltaTime;
                        this._scrollView.update(e) } }, { key: "animateIn", value: function(e, t) { var i = new TimelineMax({ onComplete: e, onCompleteScope: t });
                        this.addTween(i), i.insert(TweenMax.from(this._overlay, .24, { alpha: 0, ease: Power1.easeInOut, onStart: function() { this._overlay.visible = !0 }, onStartScope: this })), i.insert(TweenMax.from(this._panel.scale, .4, { delay: .14, x: 0, y: 0, ease: Back.easeOut, easeParams: [1], onStart: function() { this._panel.visible = !0 }, onStartScope: this })), i.insert(TweenMax.from(this._titlePanel.scale, .34, { delay: .26, x: .5, y: .5, ease: Back.easeOut, easeParams: [1], onStart: function() { this._titlePanel.visible = !0 }, onStartScope: this })), i.insert(TweenMax.from(this._closeButton.scale, .34, { delay: .32, x: 0, y: 0, ease: Back.easeOut, easeParmas: [1], onStart: function() { this._closeButton.visible = !0 }, onStartScope: this })) } }, { key: "showPage", value: function(e) { for (var t = 108, i = _["default"].quest.list, n = 0; n < i.length; ++n) { var a = i[n],
                                o = this._createQuestEntry(a.name, a.description, a.defaultTexture, a.complete);
                            o.x = .5 * o.width, o.y = .5 * o.height + n * t, this._entryContainer.addChild(o), this._scrollView.contentHeight = .5 * o.height + o.height * n - this._scrollView.frameHeight + 26 } } }, { key: "_createPanel", value: function() { this._panel = new PIXI.Container, this._panel.x = .5 * _["default"].STAGE_WIDTH, this._panel.y = .5 * _["default"].STAGE_HEIGHT + 20, this._panel.visible = !1, this.addChild(this._panel); var e = _["default"].assets;
                        this._panel.bg = new PIXI.Sprite(e.texture("panel_paper")), this._panel.bg.anchor = new PIXI.Point(.5, .5), this._panel.addChild(this._panel.bg), this._panel.topBar = new PIXI.Sprite(e.texture("panel_bar_top")), this._panel.topBar.x = 0, this._panel.topBar.y = -254, this._panel.topBar.anchor = new PIXI.Point(.5, .5), this._panel.addChild(this._panel.topBar), this._panel.bottomBar = new PIXI.Sprite(e.texture("panel_bar_btm")), this._panel.bottomBar.x = 0, this._panel.bottomBar.y = 270, this._panel.bottomBar.anchor = new PIXI.Point(.5, .5), this._panel.addChild(this._panel.bottomBar), this._scrollView = new p["default"](584, 460, 0, 0), this._scrollView.x = -298, this._scrollView.y = -224, this._scrollView.signals.scroll.add(this._onScrollViewScroll, this), this._panel.addChild(this._scrollView), this._entryContainer = new PIXI.Container, this._scrollView.content.addChild(this._entryContainer), this._scrollBar = new c["default"], this._scrollBar.x = 340, this._scrollBar.y = .5 * -this._scrollBar.height + 24, this._scrollBar.signals.scroll.add(this._onScrollBarScroll, this), this._panel.addChild(this._scrollBar), this._createTitlePanel(), this._createCloseButton() } }, { key: "_createTitlePanel", value: function() { this._titlePanel = new PIXI.Container, this._titlePanel.y = -316, this._titlePanel.visible = !1, this._panel.addChild(this._titlePanel); var e = _["default"].assets;
                        this._titlePanel.bg = new PIXI.Sprite(e.texture("title_panel")), this._titlePanel.bg.anchor = new PIXI.Point(.5, .5), this._titlePanel.addChild(this._titlePanel.bg), webfont ? (this._titleLabel = new PIXI.Text(translate("quest_log_title"), { fontSize: "40px", fontFamily: "Arial", fill: 0, align: "center" }), this._titleLabel.y = -12, this._titleLabel.anchor.set(.5), this._titlePanel.addChild(this._titleLabel)) : (this._titleLabel = new PIXI.extras.BitmapText(translate("quest_log_title"), { font: "44px Alghera Pro", align: "center" }), this._titleLabel.y = -8, this._titleLabel.anchor.set(.5), this._titleLabel.tint = 0, this._titlePanel.addChild(this._titleLabel)) } }, { key: "_createCloseButton", value: function() { var e = _["default"].assets;
                        this._closeButton = P3.Button.create(e.texture("btn_primary_small_off"), e.texture("btn_primary_small_over"), e.texture("btn_primary_small_over"), e.texture("icon_close")), this._closeButton.x = .5 * this._panel.bg.texture.width - 8, this._closeButton.y = .5 * -this._panel.bg.texture.height + 8, this._closeButton.overSoundName = "sfx_ui_rollover_00", this._closeButton.clickSoundName = "sfx_ui_click_01", this._closeButton.visible = !1, this._closeButton.signals.click.add(this._onCloseButtonClick, this), this._panel.addChild(this._closeButton) } }, { key: "_createQuestEntry", value: function(e, t, i) { var n = arguments.length > 3 && void 0 !== arguments[3] && arguments[3];
                        i = i || PIXI.Texture.EMPTY; var a = _["default"].assets,
                            o = new PIXI.Sprite(a.texture("quest_container")); if (o.anchor = new PIXI.Point(.5, .5), o.icon = new PIXI.Sprite(i), o.icon.x = -230, o.icon.scale = new PIXI.Point(.5, .5), o.icon.anchor = new PIXI.Point(.5, .5), o.addChild(o.icon), webfont) o.label = new PIXI.Text(translate(e), { fontSize: "24px", fontFamily: "Arial", fill: n ? 0 : 6710886, align: "center", wordWrap: !0, wordWrapWidth: 300 }), o.label.anchor.set(.5), o.addChild(o.label);
                        else { var s = new PIXI.Container;
                            s.x = 12, o.addChild(s), o.label = new PIXI.extras.BitmapText(translate(e), { font: "28px Alghera Pro", align: "center" }), o.label.tint = n ? 0 : 6710886, o.label.maxWidth = 300, s.addChild(o.label), s.pivot.x = .5 * s.width, s.pivot.y = .5 * s.height } var r = new PIXI.Sprite(a.texture("quest_tickbox")); if (r.x = 224, r.anchor = new PIXI.Point(.5, .5), o.addChild(r), r.tick = new PIXI.Sprite(a.texture("quest_tick")), r.tick.anchor = new PIXI.Point(.5, .5), r.tick.visible = n, r.addChild(r.tick), !n) { var l = new PIXI.filters.ColorMatrixFilter;
                            l.desaturate(), o.filters = [l] } return o } }, { key: "_showParticleCelebration", value: function() { var e = this,
                            t = new PIXI.Container;
                        this.addChild(t); var i = _["default"].assets,
                            n = i.json("particle_emitter_score_burst_00"),
                            a = new PIXI.particles.Emitter(t, [i.texture("particle_acorn")], n);
                        a.updateOwnerPos(this._panel.x, 340), a.playOnceAndDestroy(); for (var o = 4, s = 280, r = function(n) { var a = i.json("particle_emitter_gnome_hit");
                                e._tweenList.add(delay(function() { var e = Math.random() * Math.PI * 2,
                                        n = Math.random() * s,
                                        o = new PIXI.particles.Emitter(t, [i.texture("particle_star_reward")], a);
                                    o.updateOwnerPos(this._panel.x + Math.cos(e) * n, this._panel.y + Math.sin(e) * n), o.playOnceAndDestroy() }, .2 * n, e)) }, l = 0; l < o; ++l) r(l);
                        _["default"].audio.playSound("music_introduction_fanfare_00") } }, { key: "_onCloseButtonClick", value: function(e) { this._closeButton.interactive = !1, this.signals.previous.dispatch(this) } }, { key: "_onMouseUp", value: function(e) { this._scrollView._onMouseUp(e) } }, { key: "_onScrollViewScroll", value: function(e, t) { var i = t.y / this._scrollView.contentHeight * this._scrollBar.innerHeight;
                        this._scrollBar.scroll(i) } }, { key: "_onScrollBarScroll", value: function(e, t) { var i = t * this._scrollView.contentHeight;
                        this._scrollView.scroll(0, i, !0) } }]), t }(P3.Scene);
        i["default"] = f }, { "./Common": 13, "./ui/ScrollBar": 197, "./ui/ScrollView": 198 }],
    34: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") } Object.defineProperty(i, "__esModule", { value: !0 }); var o = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            s = e("./Common"),
            r = n(s),
            l = function() {
                function e() { a(this, e), this.signals = { save: new signals.Signal, load: new signals.Signal }, this.name = "", this.gags = [], this.location = r["default"].currentLocation, this.showTutorial = !0, this.unlockCertificate = !1, this.showQuestCelebration = !1, this._minigameHighscores = {} } return o(e, [{ key: "saveGame", value: function() { var e = {};
                        e.inventory = r["default"].inventory.toObject(), e.locations = this._saveLocations(), e.quests = r["default"].quest.toObject(), e.minigames = this._saveMinigameHighscores(), e.name = this.name, e.gags = this.gags, e.location = this.location, e.tutorial = this.showTutorial, e.certificate = this.unlockCertificate, e.celebration = this.showQuestCelebration, e.hash = md5(JSON.stringify(e) + "dd8036ae6012266cf575c5aacb8443ad"), console.log(e.hash); var t = r["default"].config.settings.storage;
                        window.localStorage[t.id + t.version] = JSON.stringify(e), this.signals.save.dispatch(this) } }, { key: "loadGame", value: function() { var e = r["default"].config.settings.storage,
                            t = window.localStorage[e.id + e.version]; if (!t) return this.saveGame(), this.loadGame(), !1;
                        t = JSON.parse(t); var i = t.hash; return delete t.hash, i !== md5(JSON.stringify(t) + "dd8036ae6012266cf575c5aacb8443ad") ? (this.clearGame(), this.loadGame(), !1) : (this._loadInventory(t), this._loadQuests(t), this._loadLocations(t), this._loadMinigameHIghscores(t), this.name = t.name, this.gags = t.gags, this.location = t.location, this.showTutorial = t.tutorial, this.unlockCertificate = t.certificate, this.showQuestCelebration = t.celebration, this.signals.load.dispatch(this), !0) } }, { key: "clearGame", value: function() { var e = r["default"].config.settings.storage;
                        window.localStorage.removeItem(e.id + e.version) } }, { key: "saveMinigameHighscore", value: function(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
                            i = this._minigameHighscores[e]; if (!i) return this._minigameHighscores[e] = { score: t }, void this.saveMinigameHighscore(e, t); var n = i.score; return t > n && (i.score = t), this.saveGame(), i.score } }, { key: "getMinigameHighscore", value: function(e) { var t = this._minigameHighscores[e]; return t ? t.score : -1 } }, { key: "getMinigameRank", value: function(e, t) { var i = r["default"].config,
                            n = i.settings.minigame.ranks[e]; if (3 === n.length) switch (!0) {
                            case t >= n[2]:
                                return 3;
                            case t >= n[1]:
                                return 2;
                            case t >= n[0]:
                                return 1;
                            default:
                                return 0 }
                        return 0 } }, { key: "getMinigameData", value: function(e) { var t = { first: -1, second: -1 }; switch (e) {
                            case 3:
                                t.first = this.getMinigameHighscore(19), t.second = this.getMinigameHighscore(3); break;
                            case 4:
                                t.first = this.getMinigameHighscore(11), t.second = this.getMinigameHighscore(2); break;
                            case 5:
                                t.first = this.getMinigameHighscore(12), t.second = this.getMinigameHighscore(6); break;
                            case 6:
                                t.first = this.getMinigameHighscore(13), t.second = this.getMinigameHighscore(16); break;
                            case 7:
                                t.first = this.getMinigameHighscore(17), t.second = this.getMinigameHighscore(8); break;
                            case 8:
                                t.first = this.getMinigameHighscore(1), t.second = this.getMinigameHighscore(5); break;
                            case 9:
                                t.first = this.getMinigameHighscore(4), t.second = this.getMinigameHighscore(14); break;
                            case 10:
                                t.first = this.getMinigameHighscore(0), t.second = this.getMinigameHighscore(15); break;
                            case 11:
                                t.first = this.getMinigameHighscore(10), t.second = this.getMinigameHighscore(9); break;
                            case 12:
                                t.first = this.getMinigameHighscore(7), t.second = this.getMinigameHighscore(18) } return t } }, { key: "isLocationComplete", value: function(e) { var t = this.getMinigameData(e); return t.first !== -1 && t.second !== -1 } }, { key: "isMapComplete", value: function() { return this.isLocationComplete(3) && this.isLocationComplete(4) && this.isLocationComplete(5) && this.isLocationComplete(6) && this.isLocationComplete(7) && this.isLocationComplete(8) && this.isLocationComplete(9) && this.isLocationComplete(10) && this.isLocationComplete(11) && this.isLocationComplete(12) } }, { key: "saveCookiesPolicy", value: function() { var e = r["default"].config.settings.storage;
                        window.localStorage[e.id + "cookies_" + e.version] = !0 } }, { key: "getCookiesPolicy", value: function() { var e = r["default"].config.settings.storage,
                            t = window.localStorage[e.id + "cookies_" + e.version]; return !!t && t } }, { key: "_saveLocations", value: function() { var e = r["default"].chat,
                            t = {}; for (var i in e.locations)
                            if (e.locations.hasOwnProperty(i)) { var n = e.locations[i];
                                t[n.Name.replace(/ /g, "_")] = { isCamped: "True" === n.IsCamped, isLocked: "True" === n.IsLocked, isVisited: "True" === n.IsVisited } } return t } }, { key: "_saveMinigameHighscores", value: function() { var e = {}; for (var t in this._minigameHighscores)
                            if (this._minigameHighscores.hasOwnProperty(t)) { var i = this._minigameHighscores[t];
                                e[t] = { score: i.score } } return e } }, { key: "_loadInventory", value: function(e) { e = P3.utils.copyObject(e.inventory, !0); var t = r["default"].chat,
                            i = []; for (var n in e) { var a = e[n];
                            a.id = n, i.push(a) } i.sort(function(e, t) { return e - t }); for (var o = 0; o < i.length; ++o) { var s = i[o];
                            s.inInventory && (t.items[s.id].InInventory = "True") } } }, { key: "_loadQuests", value: function(e) { e = P3.utils.copyObject(e.quests, !0), r["default"].quest.load(e) } }, { key: "_loadLocations", value: function(e) { e = P3.utils.copyObject(e.locations, !0); var t = r["default"].chat; for (var i in e)
                            if (e.hasOwnProperty(i)) { var n = e[i],
                                    a = t.getLocationByName(i);
                                a.IsCamped = n.isCamped ? "True" : "False", a.IsLocked = n.isLocked ? "True" : "False", a.IsVisited = n.isVisited ? "True" : "False" } } }, { key: "_loadMinigameHIghscores", value: function(e) { e = P3.utils.copyObject(e.minigames, !0);
                        r["default"].chat; for (var t in e)
                            if (e.hasOwnProperty(t)) { var i = e[t];
                                this.saveMinigameHighscore(t, i.score) } } }]), e }();
        i["default"] = l }, { "./Common": 13 }],
    35: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") } Object.defineProperty(i, "__esModule", { value: !0 }); var o = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            s = e("./Common"),
            r = n(s),
            l = function() {
                function e() { a(this, e), this._simplex = new u, this._trauma = 0, this._useRotation = !1, this._shakeTarget = null, this._shakeStart = null, this._shakeTime = -1, this._traumaFade = .5, this._maxOffsetX = 15, this._maxOffsetY = 15, this._maxRot = .01 * Math.PI, this._shaking = !1, this._seed = Math.random(), this._step = 0, this._centre = null, this._onShakeEnd = null } return o(e, [{ key: "update", value: function(e) { if (this._useRotation && this._centre && this._shakeTarget.pivot.set(this._centre.x + (this._shakeTarget.x - .5 * r["default"].STAGE_WIDTH), this._centre.y + (this._shakeTarget.y - .5 * r["default"].STAGE_HEIGHT)), this._shakeTarget && this._shaking) { this._resetTarget(); var t = this._trauma * this._maxOffsetX * this._simplex.noise(this._seed, this._step),
                                i = this._trauma * this._maxOffsetY * this._simplex.noise(this._seed + 1, this._step); if (this._shakeTarget.x += t, this._shakeTarget.y += i, this._useRotation) { var n = this._trauma * this._maxRot * this._simplex.noise(this._seed + 2, this._step);
                                this._shakeTarget.rotation += n } this._trauma -= e * this._traumaFade, this._step++, this._trauma < 0 && this._end() } } }, { key: "setTarget", value: function(e) { e = e || this._shakeTarget, this._shakeTarget = e, this._shakeStart = new PIXI.Point(e.x, e.y), this._shakeStartRot = e.rotation, this._step = 0 } }, { key: "setRotCentre", value: function(e) { this._centre = e } }, { key: "_end", value: function() { this._resetTarget(), this._shaking = !1, this._onShakeEnd && this._onShakeEnd() } }, { key: "_resetTarget", value: function() { this._shakeTarget.position.set(this._shakeStart.x, this._shakeStart.y), this._shakeTarget.rotation = this._shakeStartRot } }, { key: "trauma", get: function() { return this._trauma }, set: function(e) { this._shakeTarget && !this._shaking && (this._shakeStart = new PIXI.Point(this._shakeTarget.x, this._shakeTarget.y)), this._shaking = !0, this._trauma = e, this._trauma > 1 && (this._trauma = 1) } }, { key: "useRotation", get: function() { return this._useRotation }, set: function(e) { this._useRotation = e } }, { key: "maxOffsetX", get: function() { return this._maxOffsetX }, set: function(e) { this._maxOffsetX = e } }, { key: "maxOffsetY", get: function() { return this._maxOffsetY }, set: function(e) { this._maxOffsetY = e } }, { key: "maxRot", get: function() { return this._maxRot }, set: function(e) { this._maxRot = e } }, { key: "traumaFade", get: function() { return this._traumaFade }, set: function(e) { this._traumaFade = e } }, { key: "onShakeEnd", set: function(e) { this._onShakeEnd = e } }]), e }();
        i["default"] = l; var u = function() {
            function e() { a(this, e), this._grad3 = [
                    [1, 1, 0],
                    [-1, 1, 0],
                    [1, -1, 0],
                    [-1, -1, 0],
                    [1, 0, 1],
                    [-1, 0, 1],
                    [1, 0, -1],
                    [-1, 0, -1],
                    [0, 1, 1],
                    [0, -1, 1],
                    [0, 1, -1],
                    [0, -1, -1]
                ], this._p = [151, 160, 137, 91, 90, 15, 131, 13, 201, 95, 96, 53, 194, 233, 7, 225, 140, 36, 103, 30, 69, 142, 8, 99, 37, 240, 21, 10, 23, 190, 6, 148, 247, 120, 234, 75, 0, 26, 197, 62, 94, 252, 219, 203, 117, 35, 11, 32, 57, 177, 33, 88, 237, 149, 56, 87, 174, 20, 125, 136, 171, 168, 68, 175, 74, 165, 71, 134, 139, 48, 27, 166, 77, 146, 158, 231, 83, 111, 229, 122, 60, 211, 133, 230, 220, 105, 92, 41, 55, 46, 245, 40, 244, 102, 143, 54, 65, 25, 63, 161, 1, 216, 80, 73, 209, 76, 132, 187, 208, 89, 18, 169, 200, 196, 135, 130, 116, 188, 159, 86, 164, 100, 109, 198, 173, 186, 3, 64, 52, 217, 226, 250, 124, 123, 5, 202, 38, 147, 118, 126, 255, 82, 85, 212, 207, 206, 59, 227, 47, 16, 58, 17, 182, 189, 28, 42, 223, 183, 170, 213, 119, 248, 152, 2, 44, 154, 163, 70, 221, 153, 101, 155, 167, 43, 172, 9, 129, 22, 39, 253, 19, 98, 108, 110, 79, 113, 224, 232, 178, 185, 112, 104, 218, 246, 97, 228, 251, 34, 242, 193, 238, 210, 144, 12, 191, 179, 162, 241, 81, 51, 145, 235, 249, 14, 239, 107, 49, 192, 214, 31, 181, 199, 106, 157, 184, 84, 204, 176, 115, 121, 50, 45, 127, 4, 150, 254, 138, 236, 205, 93, 222, 114, 67, 29, 24, 72, 243, 141, 128, 195, 78, 66, 215, 61, 156, 180], this._perm = new Array(512), this.init() } return o(e, [{ key: "init", value: function() { for (var e = 0; e < this._perm.length; e++) this._perm[e] = this._p[255 & e] } }, { key: "noise", value: function(t, i) { var n = void 0,
                        a = void 0,
                        o = void 0,
                        s = .5 * (Math.sqrt(3) - 1),
                        r = (t + i) * s,
                        l = Math.floor(t + r),
                        u = Math.floor(i + r),
                        _ = (3 - Math.sqrt(3)) / 6,
                        h = (l + u) * _,
                        c = l - h,
                        d = u - h,
                        p = t - c,
                        f = i - d,
                        y = void 0,
                        v = void 0;
                    p > f ? (y = 1, v = 0) : (y = 0, v = 1); var m = p - y + _,
                        g = f - v + _,
                        w = p - 1 + 2 * _,
                        b = f - 1 + 2 * _,
                        P = 255 & l,
                        x = 255 & u,
                        k = this._perm[P + this._perm[x]] % 12,
                        I = this._perm[P + y + this._perm[x + v]] % 12,
                        T = this._perm[P + 1 + this._perm[x + 1]] % 12,
                        S = .5 - p * p - f * f;
                    S < 0 ? n = 0 : (S *= S, n = S * S * e.dotProduct(this._grad3[k][0], this._grad3[k][1], p, f)); var O = .5 - m * m - g * g;
                    O < 0 ? a = 0 : (O *= O, a = O * O * e.dotProduct(this._grad3[I][0], this._grad3[I][1], m, g)); var A = .5 - w * w - b * b; return A < 0 ? o = 0 : (A *= A, o = A * A * e.dotProduct(this._grad3[T][0], this._grad3[T][1], w, b)), 70 * (n + a + o) } }], [{ key: "dotProduct", value: function(e, t, i, n) { return e * i + t * n } }]), e }() }, { "./Common": 13 }],
    36: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function c(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : c(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("./Common"),
            _ = n(u),
            h = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._overlay = null, e._title = null, e._playButton = null, e._muteButton = null, e._creditsButton = null, e._voSFX = null, e } return s(t, e), r(t, [{ key: "init", value: function() { this._overlay = new PIXI.Graphics, this._overlay.interactive = !0, this.addChild(this._overlay), this._createTitle(), this._createPlayButton(), this._createMuteButton(), this._createCreditsButton(), this._createSmallPrint() } }, { key: "destroy", value: function() { this._voSFX && (this._voSFX.destroy(), this._voSFX = null), this._removeSmallPrint(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "appear", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "appear", this).call(this), this._voSFX = _["default"].audio.playSound("vo_narrator_intro_clickplay_00") } }, { key: "resize", value: function() { this.x = .5 * (P3.View.width - _["default"].STAGE_WIDTH), this._overlay.clear(), this._overlay.beginFill(0, 0), this._overlay.drawRect(.5 * (_["default"].STAGE_WIDTH - P3.View.width), 0, P3.View.width, P3.View.height), this._overlay.endFill(), this._muteButton.x = .5 * (_["default"].STAGE_WIDTH + P3.View.width) - 100, this._muteButton.y = 100, this._creditsButton.x = this._muteButton.x - 120, this._creditsButton.y = this._muteButton.y } }, { key: "update", value: function() {} }, { key: "animateIn", value: function(e, t) { var i = new TimelineMax({ onComplete: e, onCompleteScope: t }),
                            n = this._title.y;
                        this._title.y = this._title.y + 80, i.insert(TweenMax.to(this._title, .4, { y: n, ease: Back.easeOut, easeParams: [1] })), this._title.alpha = 0, i.insert(TweenMax.to(this._title, .34, { alpha: 1, ease: Power1.easeInOut, onStart: function() { this._title.visible = !0 }, onStartScope: this })), this._playButton.interactive = !1, this._playButton.scale = new PIXI.Point, i.insert(TweenMax.to(this._playButton.scale, .4, { delay: .2, x: 1, y: 1, ease: Back.easeOut, easeParams: [2], onStart: function() { this._playButton.visible = !0 }, onStartScope: this, onComplete: function() { this._playButton.interactive = !0 }, onCompleteScope: this })), this._creditsButton.interactive = !1, this._creditsButton.scale = new PIXI.Point, i.insert(TweenMax.to(this._creditsButton.scale, .4, { delay: .3, x: 1, y: 1, ease: Back.easeOut, easeParams: [1], onStart: function() { this._creditsButton.visible = !0 }, onStartScope: this, onComplete: function() { this._creditsButton.interactive = !0 }, onCompleteScope: this })), this._muteButton.interactive = !1, this._muteButton.scale = new PIXI.Point, i.insert(TweenMax.to(this._muteButton.scale, .4, { delay: .4, x: 1, y: 1, ease: Back.easeOut, easeParams: [1], onStart: function() { this._muteButton.visible = !0 }, onStartScope: this, onComplete: function() { this._muteButton.interactive = !0 }, onCompleteScope: this })) } }, { key: "animateOut", value: function(e, t) { var i = new TimelineMax({ onComplete: e, onCompleteScope: t });
                        i.insert(TweenMax.to(this, .34, { alpha: 0, ease: Power1.easeInOut })) } }, { key: "_createTitle", value: function() { var e = _["default"].assets;
                        this._title = new PIXI.Sprite(e.texture("title")), this._title.x = .5 * _["default"].STAGE_WIDTH - 36, this._title.y = 240, this._title.anchor = new PIXI.Point(.5, .5), this._title.visible = !1, this.addChild(this._title) } }, { key: "_createPlayButton", value: function() { var e = _["default"].assets;
                        this._playButton = P3.Button.create(e.texture("btn_primary_blue_large_off"), e.texture("btn_primary_blue_large_over"), e.texture("btn_primary_blue_large_over"), e.texture("icon_large_play")), this._playButton.x = .5 * _["default"].STAGE_WIDTH, this._playButton.y = 520, this._playButton.visible = !1, this._playButton.overSoundName = "sfx_ui_rollover_00", this._playButton.clickSoundName = "sfx_ui_click_01", this._playButton.signals.click.add(this._onPlayButtonClick, this), this.addChild(this._playButton) } }, { key: "_createMuteButton", value: function() { var e = _["default"].assets,
                            t = new P3.ButtonStates;
                        t.normal = e.texture("btn_primary_small_off"), t.over = e.texture("btn_primary_small_over"), t.down = e.texture("btn_primary_small_over"), t.icon = e.texture("icon_sound"), t.iconAlt = e.texture("icon_mute"), this._muteButton = new P3.MuteButton(t), this._muteButton.visible = !1, this._muteButton.overSoundName = "sfx_ui_rollover_00", this._muteButton.clickSoundName = "sfx_ui_click_01", this.addChild(this._muteButton) } }, { key: "_createCreditsButton", value: function() { var e = _["default"].assets;
                        this._creditsButton = P3.Button.create(e.texture("btn_primary_small_off"), e.texture("btn_primary_small_over"), e.texture("btn_primary_small_over"), e.texture("icon_credits")), this._creditsButton.x = .5 * _["default"].STAGE_WIDTH, this._creditsButton.y = 620, this._creditsButton.visible = !1, this._creditsButton.overSoundName = "sfx_ui_rollover_00", this._creditsButton.clickSoundName = "sfx_ui_click_01", this._creditsButton.signals.click.add(this._onCreditsButtonClick, this), this.addChild(this._creditsButton) } }, { key: "_createSmallPrint", value: function() { var e = _["default"].config.settings,
                            t = e.assets.paths[e.assets.path],
                            i = "ar" === language ? "rtl" : "ltr";
                        $("body").append('FG') } }, { key: "_removeSmallPrint", value: function() { $("#footer").remove() } }, { key: "_onPlayButtonClick", value: function(e) { this._playButton.interactive = !1, this._creditsButton.interactive = !1, this.animateOut(function() { this.signals.next.dispatch(this) }, this) } }, { key: "_onCreditsButtonClick", value: function(e) { this._playButton.interactive = !1, this._creditsButton.interactive = !1, this.signals.previous.dispatch(this) } }]), t }(P3.Scene);
        i["default"] = h }, { "./Common": 13 }],
    37: [function(e, t, i) {
        "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 });
        var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("./Common"),
            u = n(l),
            _ = e("./TiledTileset"),
            h = n(_),
            c = function(e) {
                function t(e, i, n) { a(this, t); var s = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return s._data = e, s._camera = i, s._resolution = n, s._tilesets = [], s._layers = [], s._sceneWidth = 0, s._ambientSFX = null, s._fairyDust = !1, s._parseData(), s }
                return s(t, e), r(t, [{ key: "_parseData", value: function() { console.log(this._data), this._sceneWidth = this._data.properties.sceneWidth || 0, this._ambientSFX = this._data.properties.ambientSFX || null, this._fairyDust = this._data.properties.fairyDust || !1, this._parseTilesets(), this._parseLayers() } }, { key: "_parseTilesets", value: function() { for (var e = 0; e < this._data.tilesets.length; ++e) { var t = this._data.tilesets[e],
                                i = new h["default"](t.name, t.firstgid, t.tilewidth, t.tileheight, t.margin, t.spacing);
                            this._tilesets.push(i); for (var n in t.tiles) { var a = t.tiles[n],
                                    o = a.image.match(/[^\/]+$/)[0].match(/[^.]+/)[0];
                                i.tiles[n] = u["default"].assets.texture(o) } } console.log("tilesets:", this._tilesets) } }, {
                    key: "_parseLayers",
                    value: function() {
                        for (var e = 0; e < this._data.layers.length; ++e) {
                            var t = this._data.layers[e],
                                i = new PIXI.Container;
                            if (i.name = t.name, i.x = t.x * this._resolution, i.y = t.y * this._resolution, i.alpha = t.opacity, i.visible = t.visible, this.addChild(i), this._layers.push(i), this._camera) { var n = new PIXI.Point;
                                n.x = t.properties && t.properties.parallaxX ? t.properties.parallaxX : 1, n.y = t.properties && t.properties.parallaxY ? t.properties.parallaxY : 1, this._camera.addLayer(new P3.CameraLayer(i, n)) }
                            for (var a = 0; a < t.objects.length; ++a) {
                                var o = t.objects[a],
                                    s = this.getTexture(o.gid),
                                    r = new PIXI.Sprite(s);
                                r.name = o.name, r.type = o.type || -1, r.x = o.x * this._resolution, r.y = (o.y - o.height) * this._resolution, r.width = o.width * this._resolution, r.height = o.height * this._resolution, r.properties = Object.assign({}, o.properties), i.addChild(r)
                            }
                        }
                        console.log("layers:", this._layers)
                    }
                }, { key: "getTexture", value: function(e) { for (var t = this._tilesets.length - 1; t >= 0; --t) { var i = this._tilesets[t]; if (i.firstGid <= e) { var n = e - i.firstGid; return i.tiles[n] } } return PIXI.Texture.EMPTY } }, { key: "getLayer", value: function(e) { for (var t = 0; t < this._layers.length; ++t) { var i = this._layers[t]; if (i.name === e) return i } } }, { key: "data", get: function() { return this._data } }, { key: "camera", get: function() { return this._camera } }, { key: "resolution", get: function() { return this._resolution } }, { key: "sceneWidth", get: function() { return this._sceneWidth } }, { key: "ambientSFX", get: function() { return this._ambientSFX } }, { key: "fairyDust", get: function() { return this._fairyDust } }]), t
            }(PIXI.Container);
        i["default"] = c
    }, { "./Common": 13, "./TiledTileset": 38 }],
    38: [function(e, t, i) { "use strict";

        function n(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") } Object.defineProperty(i, "__esModule", { value: !0 }); var a = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            o = function() {
                function e(t, i, a, o) { var s = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : 0,
                        r = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : 0;
                    n(this, e), this.tiles = {}, this._name = t, this._firstGid = i, this._tileWidth = a, this._tileHeight = o, this._margin = s, this._spacing = r } return a(e, [{ key: "name", get: function() { return this._name } }, { key: "firstGid", get: function() { return this._firstGid } }, { key: "tileWidth", get: function() { return this._tileWidth } }, { key: "tileHeight", get: function() { return this._tileHeight } }, { key: "margin", get: function() { return this._margin } }, { key: "spacing", get: function() { return this._spacing } }]), e }();
        i["default"] = o }, {}],
    39: [function(e, t, i) { "use strict";

        function n(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") } Object.defineProperty(i, "__esModule", { value: !0 }); var a = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            o = function() {
                function e() { n(this, e) } return a(e, [{ key: "trackEvent", value: function(e) { "undefined" != typeof Bootstrapper && Bootstrapper.ensEvent.trigger(e), console.log("event tracked:", e) } }, { key: "getMinigameName", value: function(e) { switch (e) {
                            case 0:
                                return "acorn_antlers";
                            case 1:
                                return "bear_cheek";
                            case 2:
                                return "bronco";
                            case 3:
                                return "bug_attack";
                            case 4:
                                return "ducky_eggs";
                            case 5:
                                return "flappy_bert";
                            case 6:
                                return "frogman_kick";
                            case 7:
                                return "mountain_hiking";
                            case 8:
                                return "poodle_play";
                            case 9:
                                return "puffed_up";
                            case 10:
                                return "raft_balance";
                            case 11:
                                return "royal_roar";
                            case 12:
                                return "sword_strike";
                            case 13:
                                return "turnip_ninja";
                            case 14:
                                return "turnip_roast";
                            case 15:
                                return "whacka_gnome";
                            case 16:
                                return "witch_deflect";
                            case 17:
                                return "wolf_run";
                            case 18:
                                return "monster_run";
                            case 19:
                                return "sword_practice" } } }]), e }();
        i["default"] = o, o.EVENT_GAME_LAUNCH = "game-launch", o.EVENT_TUTORIAL_COMPLETE = "tutorial-complete", o.EVENT_DOWNLOAD_CERTIFICATE = "certificate_download", o.EVENT_PRINT_CERTIFICATE = "certificate_print", o.EVENT_VIDEO_START = "[LOCATION]-video-start", o.EVENT_VIDEO_COMPLETE = "[LOCATION]-video-complete", o.EVENT_VIDEO_REPLAY = "[LOCATION]-video-replay", o.EVENT_VIDEO_CLOSE = "[LOCATION]-video-close", o.EVENT_MINIGAME_PLAY = "[MINIGAME]-minigame-play", o.EVENT_MINIGAME_REPLAY = "[MINIGAME]-minigame-replay", o.EVENT_VISIT_LOCATION = "[LOCATION]-visit", o.EVENT_ITEM_FOUND = "[ITEM]-found", o.EVENT_STAR_RATING = "ivan-doe-star-rating" }, {}],
    40: [function(e, t, i) { "use strict";

        function n(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") } Object.defineProperty(i, "__esModule", { value: !0 }); var a = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            o = function() {
                function e(t, i) { n(this, e), this.signals = { trigger: new signals.Signal }, this.position = new PIXI.Point, this.width = 0, this.height = 0, this.triggerOnce = !1, this.delay = 0, this._name = t, this._chatId = i, this._isActivated = !1, this._hasTriggered = !1 } return a(e, [{ key: "destroy", value: function() { this.signals.trigger.dispose() } }, { key: "activate", value: function() { this._isActivated || this.triggerOnce && this._hasTriggered || (this._isActivated = !0, this.delay <= 0 ? (this._isActivated = !1, this._hasTriggered = !0, this.signals.trigger.dispatch(this)) : delay(function() { this._isActivated = !1, this._hasTriggered = !0, this.signals.trigger.dispatch(this) }, this.delay, this)) } }, { key: "name", get: function() { return this._name } }, { key: "chatId", get: function() { return this._chatId } }, { key: "hasTriggered", get: function() { return this._hasTriggered } }]), e }();
        i["default"] = o }, {}],
    41: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function w(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : w(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("./Common"),
            _ = n(u),
            h = e("./GameScene"),
            c = n(h),
            d = e("./NPC"),
            p = n(d),
            f = e("./Item"),
            y = n(f),
            v = e("ismobilejs"),
            m = n(v),
            g = function(e) {
                function t() { var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];
                    a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e)); return i._tutorialStep = 0, i._cameraIgnoreIvandoe = !0, i._sword = null, i._tutArrow = null, i._tutRemindDelay = 6, i._tutRemindTime = -Number.MAX_SAFE_INTEGER, i._signpost = null, i } return s(t, e), r(t, [{ key: "init", value: function() { if (_["default"].save.showTutorial) { var e = _["default"].inventory,
                                i = e.getItemByName("Turnip");
                            e.removeItem(i, !1), i = _["default"].chat.getItemByName("Turnip"), i.InInventory = "False" } l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this); var n = _["default"].camera;
                        n.target.x = 1800, n.setTarget(n.target, !0), this._hud.inventoryButton.visible = !1, this._hud.mapButton.visible = !1, this._hud.questButton.visible = !1, this._hud.pauseButton.visible = !1, this._items.length && (this._sword = this._items[0]), this._tutArrow = this._createArrow(), this._animateAmbientCamera() } }, { key: "update", value: function() { if (l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "update", this).call(this), 2 === this._tutorialStep) { var e = Math.abs(this._sword.x - this._player.x);
                            e < 500 && (this._sword.interactive = !0, this.nextTutorialStep()) } this._tutRemindTime += deltaTime, this._tutRemindTime > this._tutRemindDelay && (this._tutRemindTime = 0, this._tutArrow.visible && _["default"].audio.playSound("vo_bert_cough_00")) } }, { key: "start", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "start", this).call(this), this._interactBlocker.visible = !0, this._sword && (this._sword.interactive = !1) } }, { key: "cameraFocusPlayer", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : .032;
                        this._cameraIgnoreIvandoe || l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "cameraFocusPlayer", this).call(this, e) } }, { key: "collectItem", value: function(e) { var i = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1];
                        l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "collectItem", this).call(this, e, i), this._killArrow(), this.nextTutorialStep() } }, { key: "nextTutorialStep", value: function() { var e = _["default"].chat; switch (this._tutorialStep++) {
                            case 0:
                                var t = _["default"].camera;
                                TweenMax.killTweensOf(t.target), t.target.x = 1800, this._player.visible = this._bert.visible = !0, this._player.signals.arrive.addOnce(function() {
                                    function t(i, n, a, o) { 4 === i.ID && (e.signals.conversation.remove(t, this), delay(function() { this._interactBlocker.visible = !1 }, 2, this)) } this._cameraIgnoreIvandoe = !1, this.playConversation(1), this.nextTutorialStep(), e.signals.conversation.add(t, this), e.signals.conversationEnd.addOnce(function(e, t, i) { this._bert.leader = new PIXI.Point(3310), this._swapArrowLayer(!0), this._animateArrow({ x: 1140, y: this._player.y }), this._tutRemindTime = 0 }, this) }, this), this._player.moveTo(1800); break;
                            case 1:
                                break;
                            case 2:
                                this._player.resetPosition(), this.playConversation(7), this._swapArrowLayer(), this._animateArrow({ x: this._sword.x, y: this._sword.y }), this._bert.leader = new PIXI.Point(this._sword.x); break;
                            case 3:
                                this._bert.leader = this._player, this._interactBlocker.visible = !0; var i = this._hud.inventoryButton;
                                i.scale = new PIXI.Point, TweenMax.to(i.scale, .34, { x: 1, y: 1, ease: Back.easeOut, easeParams: [2], onStart: function() { i.visible = !0 }, onStartScope: this, onComplete: function() { this._hud.animateButton(i), i.signals.down.addOnce(this._hud.stopAnimateButton, this), this._swapArrowLayer(!0), this._animateArrow({ x: this._hud.inventoryButton.x, y: this._hud.inventoryButton.y }), this._hud.inventoryButton.emitter.emit = !0 }, onCompleteScope: this }), this.playConversation(54); break;
                            case 4:
                                this._hud.inventoryButton.interactive = !1, this._hud.inventoryButton.emitter.emit = !1, delay(function() { var e = this._hud.questButton;
                                    e.scale = new PIXI.Point, TweenMax.to(e.scale, .34, { x: 1, y: 1, ease: Back.easeOut, easeParams: [2], onStart: function() { e.visible = !0 }, onStartScope: this, onComplete: function() { this._hud.animateButton(e), e.signals.down.addOnce(this._hud.stopAnimateButton, this), this._animateArrow({ x: this._hud.questButton.x, y: this._hud.questButton.y }), this._hud.questButton.emitter.emit = !0 }, onCompleteScope: this }), this.playConversation(57) }, 1, this); break;
                            case 5:
                                this._hud.inventoryButton.interactive = !1, this._hud.inventoryButton.emitter.emit = !1, this._hud.questButton.interactive = !1, this._hud.questButton.emitter.emit = !1, delay(function() { var e = this._hud.mapButton;
                                    e.scale = new PIXI.Point, TweenMax.to(e.scale, .34, { x: 1, y: 1, ease: Back.easeOut, easeParams: [2], onStart: function() { e.visible = !0 }, onStartScope: this, onComplete: function() { this._hud.animateButton(e), e.signals.down.addOnce(this._hud.stopAnimateButton, this), this._animateArrow({ x: this._hud.mapButton.x, y: this._hud.mapButton.y }), this._hud.mapButton.emitter.emit = !0 }, onCompleteScope: this }), this.playConversation(55) }, 1, this); break;
                            case 6:
                                this._hud.inventoryButton.interactive = !0, this._hud.inventoryButton.emitter.emit = !1, this._hud.questButton.interactive = !0, this._hud.questButton.emitter.emit = !1, this._hud.mapButton.emitter.emit = !1, this._interactBlocker.visible = !1, this._signpost.interactive = !0 } } }, { key: "addMapSignpost", value: function(e, i, n) { this._signpost = l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "addMapSignpost", this).call(this, e, i, n), this._signpost.interactive = !1 } }, { key: "_animateAmbientCamera", value: function() { var e = _["default"].camera,
                            t = 60,
                            i = e.target.x;
                        TweenMax.to(e.target, .5 * t, { delay: 4, x: i + 600, ease: Power1.easeInOut, onComplete: function() { TweenMax.to(e.target, t, { x: i - 1100, ease: Power1.easeInOut, yoyo: !0, repeat: -1 }) }, onCompleteScope: this }) } }, { key: "_animateArrow", value: function(e) { TweenMax.killTweensOf(this._tutArrow.scale), this._tutArrow.scale.set(1), this._tutArrow.position = e, this._tutArrow.visible = !0, TweenMax.to(this._tutArrow.scale, .5, { x: .7, y: .7, yoyo: !0, repeat: -1, delay: .5, repeatDelay: .5, ease: Power1.easeInOut }), this._tutRemindTime = 0 } }, { key: "_swapArrowLayer", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0]; if (e) this._hud.addChild(this._tutArrow);
                        else { var t = this._map.getLayer("characters");
                            t.addChild(this._tutArrow) } } }, { key: "_killArrow", value: function() { this._tutArrow.visible = !1 } }, { key: "_createArrow", value: function() { var e = "pointer_cursor";
                        m["default"].any && (e = "pointer_hand"); var t = new PIXI.Sprite(_["default"].assets.texture(e));
                        t.visible = !1; var i = this._map.getLayer("characters"); return i.addChild(t), t } }, { key: "_onMouseClick", value: function(e) { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "_onMouseClick", this).call(this, e), this._tutArrow && this._tutArrow.visible && this._killArrow() } }, { key: "_onPlayerInteract", value: function(e, t) { t.interact(e), t instanceof p["default"] ? this.playConversation(t.chatId) : t instanceof y["default"] && (this.collectItem(t), this.playConversation(t.chatId), this._player.pickupItem(), _["default"].audio.playSound("vo_ivandoe_pickup_item_00")) } }, { key: "_onQuestComplete", value: function(e) { console.log("quest complete", e) } }]), t }(c["default"]);
        i["default"] = g }, { "./Common": 13, "./GameScene": 16, "./Item": 21, "./NPC": 30, ismobilejs: 2 }],
    42: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("./Actor"),
            _ = n(u),
            h = e("./Common"),
            c = n(h),
            d = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    i.signals.play = new signals.Signal, i._id = e, i._flag = null, i._playButton = null; var n = c["default"].assets; return i._view = new PIXI.Sprite(n.texture("marker_video")), i._view.anchor = new PIXI.Point(.5, .5), i.addChild(i._view), i._createStones(), i._createFlag(), i._createPlayButton(), i } return s(t, e), r(t, [{ key: "destroy", value: function() { this.signals.play.dispose(), this._playButton.destroy(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "unlock", value: function() { var e = c["default"].assets,
                            t = this._playButton.states.clone();
                        t.icon = e.texture("icon_replay"), this._playButton.setStates(t), this._playButton.interactive = !0, this._flag.visible = !0, this._flag.play() } }, { key: "_createStones", value: function() { var e = c["default"].assets,
                            t = new PIXI.Sprite(e.texture("stone_circle_front"));
                        t.y = 220, t.anchor.set(.5), this.addChild(t); var i = new PIXI.Sprite(e.texture("stone_circle_back"));
                        i.y = t.y, i.anchor.set(.5), this.addChildAt(i, 0) } }, { key: "_createFlag", value: function() { var e = c["default"].assets,
                            t = new P3.MovieClipSequence;
                        t.addTextures([e.texture("marker_flag_001"), e.texture("marker_flag_002"), e.texture("marker_flag_003"), e.texture("marker_flag_004"), e.texture("marker_flag_005"), e.texture("marker_flag_006")]), this._flag = new P3.MovieClip(t), this._flag.position.set(33, -247), this._flag.anchor.set(.5), this._flag.animationSpeed = 8, this._flag.looping = !0, this._flag.visible = !1, this.addChild(this._flag) } }, { key: "_createPlayButton", value: function() { var e = c["default"].assets;
                        this._playButton = P3.Button.create(e.texture("btn_primary_blue_large_square_off"), e.texture("btn_primary_blue_large_square_over"), e.texture("btn_primary_blue_large_square_over"), e.texture("icon_play")), this._playButton.x = 2, this._playButton.y = -12, this._playButton.interactive = !1, this._playButton.overSoundName = "sfx_ui_rollover_00", this._playButton.clickSoundName = "sfx_ui_click_01", this._playButton.signals.click.add(this._onPlayButtonClick, this), this.addChild(this._playButton) } }, { key: "_onPlayButtonClick", value: function(e) { this.signals.play.dispatch(this._id) } }, { key: "id", get: function() { return this._id } }]), t }(_["default"]);
        i["default"] = d }, { "./Actor": 4, "./Common": 13 }],
    43: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function y(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : y(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("./Common"),
            _ = n(u),
            h = e("ismobilejs"),
            c = n(h),
            d = e("./ui/HTMLButton"),
            p = n(d),
            f = function(e) {
                function t() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0;
                    a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return i.holder = null, i.panel = null, i.playArrow = null, i._overlay = null, i._id = e, i._video = null, i._closeButton = null, i._playButton = null, i._isFullScreen = !0, i._defaultVideoSize = new PIXI.Point(640, 360), i._nonFullScreenSize = new PIXI.Point(0, 0), i } return s(t, e), r(t, [{ key: "init", value: function() { this._overlay = new PIXI.Graphics, this._overlay.interactive = !0, this.addChild(this._overlay), this.holder = $("<div id='ivandoe_video_holder' style='position:absolute; width:100%; height:100%; left:0px; top:0px;'>                    <video id='ivandoe_video' class='video-js vjs-default-skin' width='" + this._defaultVideoSize.x + "' height='" + this._defaultVideoSize.y + "'                    controls>                    <source src='" + this.getVideoURL("mp4") + ".mp4' type='video/mp4' />                    </video>                </div>"), $("#game").append(this.holder), this._video = videojs("ivandoe_video", { autoplay: !c["default"].any, preload: !c["default"].any }, function() { this._video.on("ended", function() { this.signals.next.dispatch(this, 1) }.bind(this)), this._video.on("error", function() { this.signals.next.dispatch(this, 2) }.bind(this)), this._video.on("timeupdate", function() { this.playArrow && this.playArrow.hide() }.bind(this)) }.bind(this)), this._video.requestFullscreen = this.onFullScreenPress.bind(this); var e = $("<div style='position:absolute;'></div>"),
                            t = this.getTextureForHTML("video_panel"),
                            i = .8; if (e.css("background-image", "url('" + t.url + "')"), e.css("background-position", -t.tx + "px " + -t.ty + "px"), e.css("width", t.tw + "px"), e.css("height", t.th + "px"), e.css("left", -((t.tw - this._defaultVideoSize.x) / 2) + "px"), e.css("top", -((t.th - this._defaultVideoSize.y) / 2) + "px"), this.panel = e, this.setElementScale(e, i), $("#ivandoe_video_holder").prepend(e), this._closeButton = new p["default"]("close", "icon_close", "btn_primary_small_off", "btn_primary_small_over"), this._closeButton.init(), this._closeButton.set(e, t.tw, 0), this._closeButton.signals.clicked.addOnce(function() { this.signals.next.dispatch(this, 2) }, this), 10 == this._id && this._closeButton.element.hide(), this._playButton = new p["default"]("play", "icon_play", "btn_primary_small_off", "btn_primary_small_over", new PIXI.Point(5, 0)), this._playButton.init(), this._playButton.set($(".vjs-big-play-button"), $(".vjs-big-play-button").width() / 2, $(".vjs-big-play-button").height() / 2), this._nonFullScreenSize.x = t.tw + this._closeButton.width, this._nonFullScreenSize.y = t.th + this._closeButton.height, c["default"].any) { $(".vjs-control-bar").css("top", "80%"); var n = $('<div class="vjs-control-padder"></div>');
                            n.css("top", $(".vjs-control-bar").height()), $(".vjs-control-bar").append(n), this.playArrow = $("<div id='video_arrow' style='position:absolute;'></div>"), t = this.getTextureForHTML("video_arrow"), this.playArrow.css("background-image", "url('" + t.url + "')"), this.playArrow.css("background-position", -t.tx + "px " + -t.ty + "px"), this.playArrow.css("width", t.tw + "px"), this.playArrow.css("height", t.th + "px"), this.playArrow.css("left", $(".vjs-play-control").width() / 2 + "px"), this.playArrow.css("bottom", "21%"), $("#ivandoe_video").append(this.playArrow) } } }, { key: "destroy", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this), $("#ivandoe_video_holder").remove(), this._video.dispose() } }, { key: "resize", value: function() { if (this.x = .5 * (P3.View.width - _["default"].STAGE_WIDTH), this._overlay.clear(), this._overlay.beginFill(0, .6), this._overlay.drawRect(.5 * (_["default"].STAGE_WIDTH - P3.View.width), 0, P3.View.width, P3.View.height), this._overlay.endFill(), this._isFullScreen) { this.setElementScale(this.holder, 1); var e = 1;
                            c["default"].phone && (e = 1 / window.devicePixelRatio); var i = this._closeButton.width * e,
                                n = this._closeButton.height * e;
                            this._closeButton.set(this.holder, this.holder.width() - 1.3 * i / 2, 1.3 * n / 2), c["default"].phone && this._closeButton.setElementScale(this._closeButton.element, e), c["default"].any || ($("#ivandoe_video").css("width", $(window).width() + "px"), $("#ivandoe_video").css("height", $(window).height() + "px")) } else { if (this.holder.css({ left: ($(window).width() - this._defaultVideoSize.x) / 2 + "px", top: ($(window).height() - this._defaultVideoSize.y) / 2 + "px" }), this._closeButton.set(this.panel, this.panel.width(), 0), this._closeButton.setElementScale(this._closeButton.element, 1), $(window).width() < this._nonFullScreenSize.x || $(window).height() < this._nonFullScreenSize.y) { var a = $(window).width() / this._nonFullScreenSize.x,
                                    o = $(window).height() / this._nonFullScreenSize.y;
                                this.setElementScale(this.holder, Math.min(a, o)) } else this.setElementScale(this.holder, 1);
                            c["default"].any || ($("#ivandoe_video").css("width", this._defaultVideoSize.x + "px"), $("#ivandoe_video").css("height", this._defaultVideoSize.y + "px")) } l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "resize", this).call(this) } }, { key: "onFullScreenPress", value: function() { this._isFullScreen = !this._isFullScreen, this._isFullScreen ? $("#ivandoe_video_holder").css({ width: "100%", height: "100%", left: "0px", top: "0px" }) : $("#ivandoe_video_holder").css({ width: this._defaultVideoSize.x + "px", height: this._defaultVideoSize.y + "px" }), this.resize() } }, { key: "getVideoURL", value: function(e) { var t = _["default"].config.settings.videos.path; switch (language) {
                            case "apac":
                            case "mecom":
                            case "en":
                                t = t.concat("uk/"); break;
                            case "da":
                                t = t.concat("dk/"); break;
                            case "pt-br":
                                t = t.concat("ptbr/"); break;
                            case "es-419":
                                t = t.concat("es419/"); break;
                            default:
                                t = t.concat(language + "/") } var i = void 0; switch (this._id) {
                            case 0:
                                i = "IV101_Frogman_FULL"; break;
                            case 1:
                                i = "IV102_NewSquire_FULL"; break;
                            case 2:
                                i = "IV103_Poodle_FULL"; break;
                            case 3:
                                i = "IV104_PrinceOff_FULL"; break;
                            case 4:
                                i = "IV105_TalkingTree_FULL"; break;
                            case 5:
                                i = "IV106_Mountain_FULL"; break;
                            case 6:
                                i = "IV107_Trollwoman_FULL"; break;
                            case 7:
                                i = "IV108_Underwater_FULL"; break;
                            case 8:
                                i = "IV109_Robbery_FULL"; break;
                            case 9:
                                i = "IV110_Bridge_FULL"; break;
                            case 10:
                                i = "Title" } var n = this.getLanguage(),
                            a = "mp4" === e ? "H264" : "WEBM",
                            o = this.getVideoResolution(e); return t + i + "_" + n + "_" + a + "_" + o } }, { key: "getLanguage", value: function() { switch (language) {
                            case "da":
                                return "DAN";
                            case "se":
                                return "SWE";
                            case "no":
                                return "NOR";
                            case "pl":
                                return "POL";
                            case "nl":
                                return "DUT";
                            case "ro":
                                return "ROM";
                            case "ru":
                                return "RUS";
                            case "de":
                                return "GER";
                            case "hu":
                                return "HUN";
                            case "cz":
                                return "CZE";
                            case "bg":
                                return "BUL";
                            case "fr":
                                return "FRE";
                            case "it":
                                return "ITA";
                            case "pt":
                                return "POR";
                            case "es":
                                return "SPA";
                            case "ar":
                                return "ARA";
                            case "tr":
                                return "TUR";
                            case "za":
                                return "AFR";
                            case "pt-br":
                                return "PTBR";
                            case "es-419":
                                return "ES419";
                            default:
                                return "ENG" } } }, { key: "getVideoResolution", value: function(e) { return c["default"].phone || "webm" === e ? "BASICSMALL464" : c["default"].tablet ? "LARGE" : "HD720" } }, { key: "getTextureForHTML", value: function(e) { var t = _["default"].assets.texture(e),
                            i = t._frame.width,
                            n = t._frame.height,
                            a = t._frame.x,
                            o = t._frame.y,
                            s = t.baseTexture.imageUrl; return { tw: i, th: n, tx: a, ty: o, url: s } } }, { key: "setElementScale", value: function(e, t) { e.css({ "-webkit-transform": "scale(" + t + ")" }), e.css({ "-moz-transform": "scale(" + t + ")" }), e.css({ "-o-transform": "scale(" + t + ")" }), e.css({ transform: "scale(" + t + ")" }) } }]), t }(P3.Scene);
        i["default"] = f }, { "./Common": 13, "./ui/HTMLButton": 196, ismobilejs: 2 }],
    44: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") } Object.defineProperty(i, "__esModule", { value: !0 }); var o = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            s = e("./DialogSystem"),
            r = n(s);
        e("object.observe"); var l = function() {
            function e(t) { a(this, e), this.signals = { conversation: new signals.Signal, conversationEnd: new signals.Signal, giveQuest: new signals.Signal, progressQuest: new signals.Signal, completeQuest: new signals.Signal, actor: new signals.Signal, item: new signals.Signal, location: new signals.Signal, variable: new signals.Signal, playMinigame: new signals.Signal, playVideo: new signals.Signal }, this._inConversation = !1, this._ds = new r["default"], this._ds.signals.conversationEnd.add(this._onConversationEnd, this), this._ds.signals.node.add(this._onNode, this), this._ds.signals.choice.add(this._onChoice, this), this._ds.signals.giveQuest.add(this._onGiveQuest, this), this._ds.signals.progressQuest.add(this._onProgressQuest, this), this._ds.signals.completeQuest.add(this._onCompleteQuest, this), this._ds.signals.playMinigame.add(this._onPlayMinigame, this), this._ds.signals.playVideo.add(this._onPlayVideo, this), this._ds.parse(t), this._initObservers() } return o(e, [{ key: "destroy", value: function() { this.signals.conversation.dispose(), this.signals.conversationEnd.dispose(), this.signals.giveQuest.dispose(), this.signals.progressQuest.dispose(), this.signals.completeQuest.dispose(), this.signals.actor.dispose(), this.signals.item.dispose(), this.signals.location.dispose(), this.signals.variable.dispose(), this.signals.playMinigame.dispose(), this.signals.playVideo.dispose(), this._ds.destroy() } }, { key: "update", value: function() { this._ds.update() } }, { key: "playConversation", value: function(e) { this._inConversation = !0; var t = this._ds.getConversation(e);
                    console.warn("conversation start", t), this._ds.playConversation(this._ds.getConversationIndex(e)) } }, { key: "nextPhrase", value: function() { this._ds._nextPhrase() } }, { key: "giveItem", value: function(e) { var t = this._ds.items[e];
                    t && (t.InInventory = "True") } }, { key: "takeItem", value: function(e) { var t = this._ds.items[e];
                    t && (t.InInventory = "False") } }, { key: "hasItem", value: function(e) { var t = this._ds.items[e]; return t && "True" === t.InInventory } }, { key: "visitLocation", value: function(e) { var t = this._ds.getLocation(e);
                    t && (t.IsVisited = "True") } }, { key: "unlockCampfire", value: function(e) { var t = this._ds.getLocation(e);
                    t && (t.IsCamped = "True") } }, { key: "_initObservers", value: function() { for (var e in this._ds.actors)
                        if (this._ds.actors.hasOwnProperty(e)) { var t = this._ds.actors[e];
                            Object.observe(t, this._onActorPropertyChange.bind(this)) } for (var i in this._ds.items)
                        if (this._ds.items.hasOwnProperty(i)) { var n = this._ds.items[i];
                            Object.observe(n, this._onItemPropertyChange.bind(this)) } for (var a in this._ds.locations)
                        if (this._ds.locations.hasOwnProperty(a)) { var o = this._ds.locations[a];
                            Object.observe(o, this._onLocationPropertyChange.bind(this)) } Object.observe(this._ds.variables, this._onVariablePropertyChange.bind(this)) } }, { key: "_onConversationEnd", value: function(e) { this._inConversation = !1; var t = this._ds.getConversation(e);
                    console.warn("conversation end", t); var i = this._ds.getActor(t.Fields.Actor),
                        n = this._ds.getActor(t.Fields.Conversant);
                    this.signals.conversationEnd.dispatch(e, i, n) } }, { key: "_onNode", value: function(e, t) { console.warn("node", e, t); var i = this._ds.getActor(e.Fields.Actor),
                        n = this._ds.getActor(e.Fields.Conversant);
                    this.signals.conversation.dispatch(e, i, n, t) } }, { key: "_onChoice", value: function() {} }, { key: "_onGiveQuest", value: function(e) { this.signals.giveQuest.dispatch(e) } }, { key: "_onProgressQuest", value: function(e, t) { this.signals.progressQuest.dispatch(e, t) } }, { key: "_onCompleteQuest", value: function(e) { this.signals.completeQuest.dispatch(e) } }, { key: "_onActorPropertyChange", value: function(e) { for (var t = 0; t < e.length; ++t) { var i = e[t];
                        console.log({ object: i.object, type: i.type, name: i.name, value: i.object[i.name] }), this.signals.actor.dispatch(i.object, i.type, i.name, i.object[i.name]) } } }, { key: "_onItemPropertyChange", value: function(e) { for (var t = 0; t < e.length; ++t) { var i = e[t];
                        console.log({ object: i.object, type: i.type, name: i.name, value: i.object[i.name] }), this.signals.item.dispatch(i.object, i.type, i.name, i.object[i.name]) } } }, { key: "_onLocationPropertyChange", value: function(e) { for (var t = 0; t < e.length; ++t) { var i = e[t];
                        console.log({ object: i.object, type: i.type, name: i.name, value: i.object[i.name] }), this.signals.location.dispatch(i.object, i.type, i.name, i.object[i.name]) } } }, { key: "_onVariablePropertyChange", value: function(e) { for (var t = 0; t < e.length; ++t) { var i = e[t];
                        console.log({ object: i.object, type: i.type, name: i.name, value: i.object[i.name] }), this.signals.variable.dispatch(i.object, i.type, i.name, i.object[i.name]) } } }, { key: "_onPlayMinigame", value: function(e) { this.signals.playMinigame.dispatch(e) } }, { key: "_onPlayVideo", value: function(e) { var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
                    this.signals.playVideo.dispatch(e, t) } }, { key: "getActor", value: function(e) { return this._ds.getActor(e) } }, { key: "getActorByName", value: function(e) { return this._ds.actors[e] } }, { key: "getItem", value: function(e) { return this._ds.getItem(e) } }, { key: "getItemByName", value: function(e) { return this._ds.items[e] } }, { key: "getLocation", value: function(e) { return this._ds.getLocation(e) } }, { key: "getLocationByName", value: function(e) { return this._ds.locations[e] } }, { key: "actors", get: function() { return this._ds.actors } }, { key: "items", get: function() { return this._ds.items } }, { key: "locations", get: function() { return this._ds.locations } }, { key: "inConversation", get: function() { return this._inConversation } }]), e }();
        i["default"] = l }, { "./DialogSystem": 46, "object.observe": 3 }],
    45: [function(e, t, i) {
        "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 });
        var r = function() {
                function e(e, t) {
                    for (var i = 0; i < t.length; i++) {
                        var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0),
                            Object.defineProperty(e, n.key, n)
                    }
                }
                return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t }
            }(),
            l = function c(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : c(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../Common"),
            _ = n(u),
            h = function(e) {
                function t(e, i, n) { a(this, t); var s = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return s.signals = { click: new signals.Signal }, s._bg = null, s._nameLabel = null, s._phraseLabel = null, s._createBg(), s._createPhraseLabel(i), _["default"].input.signals.mouseClick.add(s._onMouseClick, s), s } return s(t, e), r(t, [{ key: "destroy", value: function() { _["default"].input.signals.mouseClick.remove(this._onMouseClick, this), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, { removeChildren: !0 }) } }, { key: "_createBg", value: function() { var e = _["default"].assets;
                        this._bg = new PIXI.Sprite(e.texture("chat_panel")), this._bg.anchor = new PIXI.Point(.5, .5), this.addChild(this._bg) } }, { key: "_createNameLabel", value: function(e) { this._nameLabel = new PIXI.Text(e, { fontSize: "26px", fontFamily: "Arial", fill: 0, align: "center", wordWrap: !0, wordWrapWidth: 600 }), this._nameLabel.y = -34, this._nameLabel.pivot.x = .5 * this._nameLabel.width, this._nameLabel.pivot.y = .5 * this._nameLabel.height, this.addChild(this._nameLabel) } }, { key: "_createPhraseLabel", value: function(e) { if (webfont) this._phraseLabel = new PIXI.Text(e, { fontSize: "26px", fontFamily: "Arial", fill: 0, align: "center", wordWrap: !0, wordWrapWidth: 700 }), this._phraseLabel.x = 20, this._phraseLabel.y = 16, this._phraseLabel.pivot.x = .5 * this._phraseLabel.width, this._phraseLabel.pivot.y = .5 * this._phraseLabel.height, this.addChild(this._phraseLabel);
                        else { var t = new PIXI.Container;
                            t.y = 17, this.addChild(t), this._phraseLabel = new PIXI.extras.BitmapText(e, { font: "30px Alghera Pro", align: "center" }), this._phraseLabel.x = 20, this._phraseLabel.maxWidth = 700, this._phraseLabel.tint = 0, t.addChild(this._phraseLabel), t.pivot.x = .5 * t.width, t.pivot.y = .5 * t.height } } }, { key: "_onMouseClick", value: function(e) { this.signals.click.dispatch(this) } }]), t }(PIXI.Container);
        i["default"] = h
    }, { "../Common": 13 }],
    46: [function(require, module, exports) { "use strict";

        function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function GiveItem(e) {}

        function TakeItem(e) {}

        function HasItem(e) {}

        function WasDisplayed(e) {}

        function HasVisited(e) {}

        function VisitLocation(e) {}

        function CampLocation(e) {}

        function IsCamped(e) {}

        function GiveQuest(e) {}

        function ProgressQuest(e, t) {}

        function CompleteQuest(e) {}

        function PlayMinigame(e) {}

        function PlayVideo(e) {}

        function PlayAnimation() {} Object.defineProperty(exports, "__esModule", { value: !0 }); var _createClass = function() {
            function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                    n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }();
        exports.GiveItem = GiveItem, exports.TakeItem = TakeItem, exports.HasItem = HasItem, exports.WasDisplayed = WasDisplayed, exports.HasVisited = HasVisited, exports.VisitLocation = VisitLocation, exports.CampLocation = CampLocation, exports.IsCamped = IsCamped, exports.GiveQuest = GiveQuest, exports.ProgressQuest = ProgressQuest, exports.CompleteQuest = CompleteQuest, exports.PlayMinigame = PlayMinigame, exports.PlayVideo = PlayVideo, exports.PlayAnimation = PlayAnimation; var DialogSystem = function() {
            function DialogSystem() { _classCallCheck(this, DialogSystem), this.signals = { conversationEnd: new signals.Signal, node: new signals.Signal, choice: new signals.Signal, giveQuest: new signals.Signal, progressQuest: new signals.Signal, completeQuest: new signals.Signal, playMinigame: new signals.Signal, playVideo: new signals.Signal }, this._conversations = [], this._currentConversation = null, this._currentNode = null, this._currentLocation = null, this._currentPhrases = [], this._currentPhraseIndex = 0, this._activeLocalizationField = "Dialogue Text", this._scheduledNode = null, this._initScriptFunctionHooks() } return _createClass(DialogSystem, [{ key: "destroy", value: function() { this.signals.conversationEnd.dispose(), this.signals.node.dispose(), this.signals.choice.dispose(), this.signals.change.dispose(), this.signals.giveQuest.dispose(), this.signals.progressQuest.dispose(), this.signals.completeQuest.dispose(), this.signals.playMinigame.dispose(), this.signals.playVideo.dispose() } }, { key: "update", value: function() { if (this._scheduledNode) { var e = this._scheduledNode;
                        this._scheduledNode = null, this._playNode(e) } } }, { key: "parse", value: function(e) { console.log(e), this._parseActors(e), this._parseItems(e), this._parseLocations(e), this._parseConversations(e), this._parseVariables(e) } }, { key: "playConversation", value: function(e) { this._setConversation(e), this._playNextNode() } }, { key: "stopConversation", value: function() { this._scheduledNode = null, this.signals.conversationEnd.dispatch(this._currentConversation.ID) } }, { key: "_initScriptFunctionHooks", value: function() { var e = this;
                    exports.GiveItem = GiveItem = function(e) { Item[e].InInventory = "True" }, exports.TakeItem = TakeItem = function(e) { Item[e].InInventory = "False" }, exports.HasItem = HasItem = function(e) { return "True" === Item[e].InInventory }, exports.WasDisplayed = WasDisplayed = function(e) { return "WasDisplayed" === Dialog[e].SimStatus }, exports.HasVisited = HasVisited = function(e) { return "True" === Location[e].IsVisited }, exports.VisitLocation = VisitLocation = function(e) { Location[e].IsVisited = "True" }, exports.CampLocation = CampLocation = function(e) { Location[e].IsCamped = "True" }, exports.IsCamped = IsCamped = function(e) { return "True" === Location[e].IsCamped }, exports.GiveQuest = GiveQuest = function(t) { e.signals.giveQuest.dispatch(t) }, exports.ProgressQuest = ProgressQuest = function(t, i) { e.signals.progressQuest.dispatch(t, i) }, exports.CompleteQuest = CompleteQuest = function(t) { e.signals.completeQuest.dispatch(t) }, exports.PlayMinigame = PlayMinigame = function(t) { e.signals.playMinigame.dispatch(t) }, exports.PlayVideo = PlayVideo = function(t) { var i = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
                        e.signals.playVideo.dispatch(t, i) } } }, { key: "_parseActors", value: function(e) { for (var t = 0; t < e.Assets.Actors.length; ++t) { var i = P3.utils.copyObject(e.Assets.Actors[t], !0),
                            n = i.Fields.Name.replace(/ /g, "_"),
                            a = i.Fields;
                        a.ID = i.ID, Actor[n] = a, this._parsePictures(a) } console.log("actors:", this.actors) } }, { key: "_parseItems", value: function(e) { for (var t = 0; t < e.Assets.Items.length; ++t) { var i = P3.utils.copyObject(e.Assets.Items[t], !0),
                            n = i.Fields.Name.replace(/ /g, "_"),
                            a = i.Fields;
                        a.ID = i.ID, Item[n] = a, this._parsePictures(a) } console.log("items:", this.items) } }, { key: "_parseLocations", value: function(e) { for (var t = 0; t < e.Assets.Locations.length; ++t) { var i = P3.utils.copyObject(e.Assets.Locations[t], !0),
                            n = i.Fields.Name.replace(/ /g, "_"),
                            a = i.Fields;
                        a.ID = i.ID, Location[n] = a, this._parsePictures(a) } console.log("locations:", this.locations) } }, { key: "_parseConversations", value: function(e) { for (var t = 0; t < e.Assets.Conversations.length; ++t) { var i = P3.utils.copyObject(e.Assets.Conversations[t], !0);
                        this._conversations.push(i), ConversationDialogTable[t] = null; for (var n = 0; n < i.DialogNodes.length; ++n) { var a = i.DialogNodes[n];
                            a.Fields.hasOwnProperty("Audio Files") && this._parseAudio(a.Fields) } } console.log("Conversations:", this._conversations) } }, { key: "_parseVariables", value: function(e) { for (var t = 0; t < e.Assets.UserVariables.length; ++t) { var i = P3.utils.copyObject(e.Assets.UserVariables[t], !0),
                            n = i.Fields["Initial Value"]; if ("false" === n.toLowerCase().trim()) n = "False";
                        else if ("true" === n.toLowerCase().trim()) n = "True";
                        else { var a = parseInt(n);
                            isNaN(a) || (n = n.trim().length !== a.toString().trim().length ? i.Fields["Initial Value"] : a) } Variable[i.Fields.Name] = n } } }, { key: "_parseConditions", value: function(e) { for (var t = [], i = 0; i < e.length; ++i) { var n = e[i];
                        this._checkCondition(n) && t.push(n) } return t } }, { key: "_parsePictures", value: function(e) { for (var t = /([^\[||"||\]||;]+)/g, i = [], n = void 0; n = t.exec(e.Pictures);) n = /[^.]+/.exec(/[^\\]*$/.exec(n[0])[0])[0], i.push(n);
                    e.Pictures = i } }, { key: "_parseAudio", value: function(e) { for (var t = /[;\[]([^;\[\]]*)/g, i = [], n = void 0; n = t.exec(e["Audio Files"]);) n[1] && (n = /[^.]+/.exec(/[^\\]*$/.exec(n[1])[0])[0], i.push(n));
                    e.Audio = i } }, { key: "_setConversation", value: function(e) { if (this._currentConversation = this._conversations[e], this._currentNode = this._currentConversation.DialogNodes[0], this._setLocation(this._currentConversation.Fields.Location), ConversationDialogTable[e]) exports.Dialog = Dialog = ConversationDialogTable[e];
                    else { exports.Dialog = Dialog = []; for (var t = 0; t < this._currentConversation.DialogNodes.length; ++t) { var i = this._currentConversation.DialogNodes[t];
                            Dialog[i.ID] = {}, i.ConditionsString = i.ConditionsString.replace(/~=/gm, "!="), i.ConditionsString = i.ConditionsString.replace(/AND |and /gm, "&& "), i.ConditionsString = i.ConditionsString.replace(/OR |or /gm, "|| "), i.ConditionsString = i.ConditionsString.replace(/ AND| and/gm, " &&"), i.ConditionsString = i.ConditionsString.replace(/ OR| or/gm, " ||"), i.ConditionsString = i.ConditionsString.replace(/=[ ]*['"]*true['"]*/gim, '= "True"'), i.ConditionsString = i.ConditionsString.replace(/=[ ]*['"]*false['"]*/gim, '= "False"'), i.ConditionsString = i.ConditionsString.replace(/(\r\n|\n|\r)/gm, " "), i.ConditionsString = i.ConditionsString.replace(/[ "'\[\]\(\)][lL][tT][eE][ "'\[\]\(\)]|[ "'\[\]\(\)][lL][eE][ "'\[\]\(\)]/gm, "<="), i.ConditionsString = i.ConditionsString.replace(/[ "'\[\]\(\)][gG][tT][eE][ "'\[\]\(\)]|[ "'\[\]\(\)][gG][eE][ "'\[\]\(\)]/gm, ">="), i.ConditionsString = i.ConditionsString.replace(/[ "'\[\]\(\)][lL][tT][ "'\[\]\(\)]/gm, "<"), i.ConditionsString = i.ConditionsString.replace(/[ "'\[\]\(\)][gG][tT][ "'\[\]\(\)]/gm, ">"), i.UserScript = i.UserScript.replace(/(\r\n|\n|\r)/gm, "; "), i.UserScript = i.UserScript.replace(/=[ ]*['"]*false['"]*/gim, '= "False"'), i.UserScript = i.UserScript.replace(/=[ ]*['"]*true['"]*/gim, '= "True"'), ConversationDialogTable[e] = Dialog } } } }, { key: "_setLocation", value: function(e) { if (void 0 !== e && null !== e && e !== -1) { var t = e;
                        t && (this._currentLocation = t) } } }, { key: "_playNextNode", value: function() { return this._conversations.length ? (this._currentConversation || this._setConversation(0), void this._playNode(this._currentNode)) : void console.warn("No conversations to play!") } }, { key: "_playNode", value: function _playNode(node) { return this._currentNode = node, null !== node.UserScript && "" !== node.UserScript && eval(node.UserScript), Dialog[node.ID].SimStatus = "WasDisplayed", this._setLocation(node.Fields.Location), null === node.Fields[this._activeLocalizationField] || "" === node.Fields[this._activeLocalizationField] ? void this._stopNode(node) : void this._playPhrase(node.Fields[this._activeLocalizationField].split("|"), 0) } }, { key: "_stopNode", value: function(e) { if (0 === e.OutgoingLinks.length) return void this.stopConversation(); if (1 === e.OutgoingLinks.length && e.OutgoingLinks[0].DestinationConvoID !== this._currentConversation.ID) return this._setConversation(this.getConversationIndex(e.OutgoingLinks[0].DesinationConvoID)), void this._scheduleNode(this.getNode(e.OutgoingLinks[0].DestinationDialogID)); if (1 === e.OutgoingLinks.length) { var t = this.getNode(e.OutgoingLinks[0].DestinationDialogID); if (!this._checkCondition(t)) return void this.stopConversation() } var i = this._readGroup(e, null);
                    1 !== i.length || e.IsGroup || i[0].Fields["Menu Text"].indexOf("[f]") !== -1 ? 1 === i.length ? this.stopConversation() : console.warn("No multiple choice support!") : this._scheduleNode(i[0]) } }, { key: "_scheduleNode", value: function(e) { this._scheduledNode = e } }, { key: "_playPhrase", value: function(e, t) { if (this._currentPhrases = e, this._currentPhraseIndex = t, t < e.length) { var i = this._currentPhrases[this._currentPhraseIndex];
                        this.signals.node.dispatch(this._currentNode, i) } else this._stopNode(this._currentNode) } }, { key: "_nextPhrase", value: function() {++this._currentPhraseIndex, this._playPhrase(this._currentPhrases, this._currentPhraseIndex) } }, { key: "_checkCondition", value: function _checkCondition(node) { return null === node.ConditionsString || "" === node.ConditionsString || !!eval(node.ConditionsString) } }, { key: "_readGroup", value: function(e, t) { t = t || []; for (var i = this._selectGroupNodeChildren(e), n = 0; n < i.length; ++n) { var a = i[n];
                        a.IsGroup ? this._readGroup(a, t) : t.push(a) } return t } }, { key: "_selectGroupNodeChildren", value: function(e) { for (var t = this.getNodeChildren(e), i = this._orderNodesByPriority(t), n = 0; n < i.length; ++n)
                        if (i[n] = this._parseConditions(i[n]), i[n].length > 0) return i[n]; return [] } }, { key: "_orderNodesByPriority", value: function(e) { for (var t = [
                            [],
                            [],
                            [],
                            [],
                            [],
                            []
                        ], i = 0; i < e.length; ++i) { var n = e[i];
                        n.ConditionPriority > 0 && t[n.ConditionPriority].push(n) } return t } }, { key: "getActor", value: function(e) { for (var t in Actor)
                        if (Actor.hasOwnProperty(t)) { var i = Actor[t]; if (parseInt(i.ID) === parseInt(e)) return i } return null } }, { key: "getItem", value: function(e) { for (var t in Item)
                        if (Item.hasOwnProperty(t)) { var i = Item[t]; if (parseInt(i.ID) === parseInt(e)) return i } return null } }, { key: "getLocation", value: function(e) { for (var t in Location)
                        if (Location.hasOwnProperty(t)) { var i = Location[t]; if (parseInt(i.ID) === parseInt(e)) return i } return null } }, { key: "getUserVariable", value: function(e) { return Variable[e] } }, { key: "getConversation", value: function(e) { for (var t = 0; t < this._conversations.length; ++t) { var i = this._conversations[t]; if (parseInt(i.ID) === parseInt(e)) return i } return null } }, { key: "getConversationIndex", value: function(e) { for (var t = 0; t < this._conversations.length; ++t) { var i = this._conversations[t]; if (parseInt(i.ID) === parseInt(e)) return t } return -1 } }, { key: "getNode", value: function(e) { for (var t = 0; t < this._currentConversation.DialogNodes.length; ++t) { var i = this._currentConversation.DialogNodes[t]; if (parseInt(i.ID) === parseInt(e)) return i } return null } }, { key: "getNodeChildren", value: function(e) { for (var t = [], i = 0; i < e.OutgoingLinks.length; ++i) t.push(this.getNode(e.OutgoingLinks[i].DestinationDialogID)); return t } }, { key: "actors", get: function() { return Actor } }, { key: "items", get: function() { return Item } }, { key: "locations", get: function() { return Location } }, { key: "variables", get: function() { return Variable } }, { key: "currentConversation", get: function() { return this._currentConversation } }, { key: "currentNode", get: function() { return this._currentNode } }, { key: "currentLocation", get: function() { return this._currentLocation } }, { key: "currentPhrases", get: function() { return this._currentPhrases } }, { key: "currentPhraseIndex", get: function() { return this._currentPhraseIndex } }]), DialogSystem }();
        exports["default"] = DialogSystem; var Actor = exports.Actor = {},
            Item = exports.Item = {},
            Location = exports.Location = {},
            Variable = exports.Variable = {},
            Dialog = exports.Dialog = [],
            ConversationDialogTable = exports.ConversationDialogTable = [] }, {}],
    47: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../Common"),
            _ = n(u),
            h = e("./NarratorPopup"),
            c = n(h),
            d = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return i._chat = e, i._chat.signals.conversation.add(i._onConversation, i), i._chat.signals.conversationEnd.add(i._onConversationEnd, i), i._narratorName = "Skald", i._popup = null, i._voSFX = null, i._voDelay = null, i._animatePopup = !0, i } return s(t, e), r(t, [{ key: "destroy", value: function() { this._chat.signals.conversation.dispose(), this._chat.signals.conversationEnd.dispose(), this.stopNarratorSFX(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, { removeChildren: !0 }) } }, { key: "resize", value: function() { this._popup && (this._popup.x = .5 * P3.View.width, this._popup.hitArea = new PIXI.Rectangle(.5 * -P3.View.width, (-this._popup.y), P3.View.width, P3.View.height)) } }, { key: "update", value: function() { var e = deltaTime;
                        this._popup && this._popup.update(e) } }, { key: "stopNarratorSFX", value: function() { this._voDelay && (this._voDelay.kill(), this._voDelay = null), this._voSFX && (this._voSFX.destroy(), this._voSFX = null) } }, { key: "_createPopup", value: function(e, t) { var i = new c["default"](e, t); return i.x = .5 * P3.View.width, i.y = P3.View.height - 120, this.addChild(i), i } }, { key: "_nextPopup", value: function() { this._removePopup(), this._chat.nextPhrase() } }, { key: "_removePopup", value: function() { if (this._popup)
                            if (this._popup.isLastNode) { var e = this._popup;
                                this._popup = null, e.animateOut(function() { e.destroy() }) } else this._popup.destroy(), this._popup = null } }, { key: "_onConversation", value: function(e, t, i, n) { if (t.Name === this._narratorName) { this._removePopup(), this._popup = this._createPopup(t.Name, translate(e.Fields.LocaleDialogue)), this._popup.signals.click.addOnce(this._nextPopup.bind(this)), this._animatePopup && (this._animatePopup = !1, this._popup.animateIn()), 0 === e.OutgoingLinks.length && (this._popup.isLastNode = !0); var a = e.Fields.Audio.length ? P3.utils.selectRandom(e.Fields.Audio) : null;
                            a && (this.stopNarratorSFX(), this._voDelay = delay(function() { this._popup && (this._voSFX = _["default"].audio.playSound(a, { callback: function() { this._popup && (this._popup.animateNextButton(), this._popup.playAvatarIdleAnimation()) }, scope: this })), this._popup && this._popup.playAvatarTalkAnimation() }, .4, this)), this._popup.playAvatarIdleAnimation() } } }, { key: "_onConversationEnd", value: function(e, t, i, n) { this._animatePopup = !0 } }]), t }(PIXI.Container);
        i["default"] = d }, { "../Common": 13, "./NarratorPopup": 48 }],
    48: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../Common"),
            _ = n(u),
            h = e("./ChatPopup"),
            c = n(h),
            d = function(e) {
                function t(e, i) { a(this, t); var n = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, i)); return n._avatar = null, n._nextButton = null, n._tweenList = new P3.utils.TweenList, n._createAvatar(), n._createNextButton(), n } return s(t, e), r(t, [{ key: "destroy", value: function() { this._tweenList.destroy(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, { removeChildren: !0 }) } }, { key: "update", value: function(e) { this._avatar.update(e) } }, { key: "animateIn", value: function(e, t) { var i = new TimelineMax;
                        this._tweenList.add(i), i.insert(TweenMax.from(this._avatar, .34, { y: 280, ease: Back.easeOut, easeParams: [1], onComplete: e, onCompleteScope: t })) } }, { key: "animateOut", value: function(e, t) { var i = new TimelineMax;
                        this._tweenList.add(i), this._bg.visible = !1, this._phraseLabel.visible = !1, i.insert(TweenMax.to(this._avatar, .34, { y: 280, ease: Back.easeIn, easeParams: [1], onComplete: e, onCompleteScope: t })) } }, { key: "playAvatarIdleAnimation", value: function() { this._avatar.state.setAnimation(0, "idle", !0) } }, { key: "playAvatarTalkAnimation", value: function() { this._avatar.state.setAnimation(0, "talk_" + P3.math.randomInt(1, 3), !0) } }, { key: "animateNextButton", value: function() { this._nextButton.scale = new PIXI.Point, this._tweenList.add(TweenMax.to(this._nextButton.scale, .24, { x: 1, y: 1, ease: Back.easeOut, easeParams: [2], onStart: function() { this._nextButton.visible = !0 }, onStartScope: this })) } }, { key: "_createBg", value: function() { var e = _["default"].assets;
                        this._bg = new PIXI.Sprite(e.texture("narrator_panel")), this._bg.x = 54, this._bg.anchor = new PIXI.Point(.5, .5), this._bg.interactive = !0, this.addChild(this._bg) } }, { key: "_createAvatar", value: function() { var e = new PIXI.Container;
                        e.position.set(-444, 260), this.addChild(e); var t = _["default"].assets;
                        this._avatar = new PIXI.spine.Spine(t.spineData("char_narrator")), this._avatar.skeleton.setToSetupPose(), this._avatar.skeleton.setSkin(null), this._avatar.state.setAnimation(0, "idle", !0), this._avatar.autoUpdate = !1, this._avatar.update(0), this._avatar.scale.set(.5), e.addChild(this._avatar), this._avatar.stateData.setMix("idle", "talk_1", .2), this._avatar.stateData.setMix("idle", "talk_2", .2), this._avatar.stateData.setMix("idle", "talk_3", .2), this._avatar.stateData.setMix("talk_1", "idle", .2), this._avatar.stateData.setMix("talk_2", "idle", .2), this._avatar.stateData.setMix("talk_3", "idle", .2) } }, { key: "_createNextButton", value: function() { var e = _["default"].assets;
                        this._nextButton = P3.Button.create(e.texture("btn_primary_small_off"), e.texture("btn_primary_small_over"), e.texture("btn_primary_small_over"), e.texture("icon_play")), this._nextButton.x = 426, this._nextButton.y = -46, this._nextButton.visible = !1, this._nextButton.overSoundName = "sfx_ui_rollover_00", this._nextButton.clickSoundName = "sfx_ui_click_01", this.addChild(this._nextButton) } }]), t }(c["default"]);
        i["default"] = d }, { "../Common": 13, "./ChatPopup": 45 }],
    49: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("glslify"),
            u = (n(l), function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, null, "precision lowp float;\n\nvarying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nvoid main() {\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    vec4 map = texture2D(mapSampler, vFilterCoord);\n    float alpha = map.a;\n    gl_FragColor = color * vec4(1.0 * alpha, 1.0 * alpha, 1.0 * alpha, alpha);\n}")); return e.renderable = !1, i.maskSprite = e, i.maskMatrix = new PIXI.Matrix, i.uniforms.mapSampler = e._texture, i.uniforms.filterMatrix = i.maskMatrix, i.uniforms.scale = { x: 1, y: 1 }, i } return s(t, e), r(t, [{ key: "apply", value: function(e, t, i) { var n = 1 / i.destinationFrame.width * (i.size.width / t.size.width);
                        this.uniforms.filterMatrix = e.calculateSpriteMatrix(this.maskMatrix, this.maskSprite), this.uniforms.scale.x = n, this.uniforms.scale.y = n, e.applyFilter(this, t, i) } }, { key: "map", get: function() { return this.uniforms.mapSampler }, set: function(e) { this.uniforms.mapSampler = e } }]), t }(PIXI.Filter));
        i["default"] = u }, { glslify: 1 }],
    50: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") } Object.defineProperty(i, "__esModule", { value: !0 }); var o = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            s = e("../Common"),
            r = n(s),
            l = function() {
                function e(t, i) { a(this, e), this.id = -1, this._parent = t, this._player = i } return o(e, [{ key: "create", value: function(e) {} }, { key: "update", value: function(e) {} }, { key: "unlock", value: function() { var e = r["default"].save;
                        this.id !== -1 && e.gags.indexOf(this.id) === -1 && (e.gags.push(this.id), e.saveGame(), console.warn("seen gag first time:", this.id)), e.gags.length >= 10 && r["default"].quest.completeQuest("quest15") } }, { key: "parent", get: function() { return this._parent } }, { key: "player", get: function() { return this._player } }]), e }();
        i["default"] = l }, { "../Common": 13 }],
    51: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../Actor"),
            _ = n(u),
            h = e("../Common"),
            c = n(h),
            d = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    i._player = e, i._start = 0, i._target = 0, i._targetTime = 0, i._moveSpeed = 30, i._moving = !1, i._gag = !1, i._pokeCount = 0, i._skipFrame = 0; var n = c["default"].assets,
                        s = new PIXI.Container; return i.addChild(s), i._view = new PIXI.spine.Spine(n.spineData("char_babysnot")), i._view.position.set(0, 0), i._view.skeleton.setToSetupPose(), i._view.skeleton.setSkin(null), i._view.autoUpdate = !1, i._view.scale.set(.4), i._view.update(0), s.addChild(i._view), i._view.state.addListener({ complete: i._onAnimationComplete.bind(i) }), i._view.stateData.setMix("idle", "move", .2), i._view.stateData.setMix("idle2", "move", .2), i._view.stateData.setMix("move", "idle", .2), i._view.stateData.setMix("move", "idle2", .2), i._view.stateData.setMix("gag", "idle", .2), i._view.stateData.setMix("gag", "idle2", .2), i._view.stateData.setMix("move", "poke", .2), i._view.stateData.setMix("move", "giggle", .2), i._view.stateData.setMix("move", "gag", .2), i._view.stateData.setMix("idle", "poke", .2), i._view.stateData.setMix("idle", "giggle", .2), i._view.stateData.setMix("idle", "gag", .2), i.interactive = !0, i.buttonMode = !0, i } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this._start = this.x, this._nextTarget(), this._playIdleAnimation(), this._createShadow(), this.click = this.tap = this._onMouseClick.bind(this) } }, { key: "destroy", value: function() { this.click = this.tap = null, l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "update", value: function(e) { if (this._view.update(e), !this._gag) { var t = this._target - this.x,
                                i = Math.sign(t),
                                n = this._angry ? 2 * this._moveSpeed : this._moveSpeed;
                            this.x += Math.sign(t) * n * e, Math.abs(t) < n * e && (t = 0, this.x = this._target), this._attacking || this.x === this._target && (this._angry ? this._nextTarget() : this._targetTime <= 0 ? this._nextTarget() : this._targetTime -= e); var a = Math.sign(t);
                            0 === a || this._moving ? 0 === a && this._moving && (this._moving = !1, this._playIdleAnimation()) : (this._moving = !0, this._angry ? this._playRunAnimation() : this._playWalkAnimation()), this.faceDirection(-i) } this._skipFrame++ % 2 === 0 && this._view.update(2 * e), this._updateShadow() } }, { key: "_createShadow", value: function() { var e = c["default"].assets;
                        this._shadow = new PIXI.Sprite(e.texture("shadow")), this._shadow.y = this.y, this._shadow.scale.set(1), this._shadow.anchor.set(.5), this.parent.addChildAt(this._shadow, this.parent.getChildIndex(this)) } }, { key: "_updateShadow", value: function() { this._shadow.x = this.x, this._shadow.visible = this.visible } }, { key: "_nextTarget", value: function() { this._target = this._start + P3.math.random(-80, 80), this._targetTime = this._angry ? 0 : 1 + 3 * Math.random() } }, { key: "_playIdleAnimation", value: function() { this._view.state.setAnimation(0, P3.utils.selectRandom(["idle", "idle2"]), !0) } }, { key: "_playWalkAnimation", value: function() { this._view.state.setAnimation(0, "move", !0) } }, { key: "_playPokeAnimation", value: function() { this._view.state.setAnimation(0, P3.utils.selectRandom(["giggle", "poke"]), !1), this._view.state.addAnimation(0, P3.utils.selectRandom(["idle", "idle2"]), !0, 0) } }, { key: "_playGagAnimation", value: function() { this._view.state.setAnimation(0, "gag", !1), this._view.state.addAnimation(0, P3.utils.selectRandom(["idle", "idle2"]), !0, 0) } }, { key: "_onAnimationComplete", value: function(e) {
                        ["poke", "giggle", "gag"].indexOf(e.animation.name) && (this._gag = !1) } }, { key: "_onMouseClick", value: function(e) { var t = Math.sign(this._player.x - this.x);
                        this.faceDirection(-t), this._gag = !0, this._pokeCount++ >= 3 ? (this._pokeCount = 0, this._playGagAnimation(), c["default"].audio.playSound("sfx_bogey_scream_00")) : (this._playPokeAnimation(), c["default"].audio.playSound(["sfx_bogey_giggle_00", "sfx_bogey_giggle_01", "sfx_bogey_giggle_02", "sfx_bogey_poke_00", "sfx_bogey_poke_01"])), this.signals.interact.dispatch(this) } }, { key: "player", get: function() { return this._player } }]), t }(_["default"]);
        i["default"] = d }, { "../Actor": 4, "../Common": 13 }],
    52: [function(e, t, i) {
        "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 });
        var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("./BaseGag"),
            u = n(l),
            _ = e("../Common"),
            h = (n(_), e("./Bogey")),
            c = n(h),
            d = function(e) {
                function t(e, i) { a(this, t); var n = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, i)); return n._bogey = null, n }
                return s(t, e), r(t, [{ key: "create", value: function(e) { this._bogey = new c["default"](this._player), this._bogey.position = new PIXI.Point(e.x + P3.math.random(-200, 200), e.y), this._bogey.anchor = new PIXI.Point(.5, .5), this._bogey.signals.interact.addOnce(this._onBogeyInteract, this), this._parent.addChild(this._bogey) } }, { key: "update", value: function(e) { this._bogey.update(e) } }, {
                    key: "_onBogeyInteract",
                    value: function(e) { this.unlock() }
                }]), t
            }(u["default"]);
        i["default"] = d
    }, { "../Common": 13, "./BaseGag": 50, "./Bogey": 51 }],
    53: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("./BaseGag"),
            u = n(l),
            _ = e("../Common"),
            h = n(_),
            c = e("./CostumeRock"),
            d = n(c),
            p = function(e) {
                function t(e, i) { a(this, t); var n = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, i)); return n._rock = null, n } return s(t, e), r(t, [{ key: "create", value: function(e) { this._rock = new d["default"], this._rock.position.set(e.x, e.y), this._rock.signals.click.add(this._onRockClick, this), this._rock.signals.interact.add(this._onRockInteract, this), this._player.parent.addChild(this._rock) } }, { key: "update", value: function(e) { this._rock.update(e) } }, { key: "changeClothes", value: function() { this._rock.signals.clothesOn.addOnce(function() { this._player.disableMovement = !1, this._player.setRaspberryFairy(!0) }, this), this._rock.signals.clothesOff.addOnce(function() { this._player.disableMovement = !1, this._player.setRaspberryFairy(!1) }, this), this._rock.changeClothes() } }, { key: "_onRockClick", value: function(e) { this._player.moveTo(e) } }, { key: "_onRockInteract", value: function(e) { this.unlock(), this._player.disableMovement = !0; var t = h["default"].scene.top;
                        t.addTween(delay(function() { this._player.signals.arrive.addOnce(function() { this.changeClothes() }, this), this._player.disableMovement = !1, this._player.moveTo(this._rock.x), this._player.disableMovement = !0 }, .4, this)) } }]), t }(u["default"]);
        i["default"] = p }, { "../Common": 13, "./BaseGag": 50, "./CostumeRock": 54 }],
    54: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../Common"),
            _ = n(u),
            h = e("../Interactable"),
            c = n(h),
            d = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, -1));
                    e._changeClothes = !1; var i = _["default"].assets,
                        n = new PIXI.Container; return e.addChild(n), e._view = new PIXI.spine.Spine(i.spineData("gag_raspberry")), e._view.position.set(0, 0), e._view.skeleton.setToSetupPose(), e._view.skeleton.setSkin(null), e._view.autoUpdate = !1, e._view.scale.set(.4), e._view.update(0), n.addChild(e._view), e._view.state.addListener({ complete: e._onAnimationComplete.bind(e) }), e.hitArea = new PIXI.Rectangle((-60), (-320), 200, 340), e.signals.clothesOn = new signals.Signal, e.signals.clothesOff = new signals.Signal, e } return s(t, e), r(t, [{ key: "destroy", value: function() { this.signals.clothesOn.dispose(), this.signals.clothesOff.dispose(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "update", value: function(e) { this._view.update(e) } }, { key: "changeClothes", value: function() { this._changeClothes = !this._changeClothes, this._changeClothes ? this._playClothesOnAnimation() : this._playClothesOffAnimation() } }, { key: "_playClothesOnAnimation", value: function() { this._view.state.setAnimation(0, "clothes_on", !1) } }, { key: "_playClothesOffAnimation", value: function() { this._view.state.setAnimation(0, "clothes_off", !1) } }, { key: "_onAnimationComplete", value: function(e) { "clothes_on" === e.animation.name ? this.signals.clothesOn.dispatch(this) : "clothes_off" === e.animation.name && this.signals.clothesOff.dispatch(this) } }]), t }(c["default"]);
        i["default"] = d }, { "../Common": 13, "../Interactable": 18 }],
    55: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../Actor"),
            _ = n(u),
            h = e("../Common"),
            c = n(h),
            d = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    i._player = e, i._start = 0, i._target = 0, i._targetTime = 0, i._moveSpeed = 200, i._moving = !1, i._angry = !1, i._attackTime = 0, i._attacking = !1, i._angryTime = 0, i._quackTime = 6, i._skipFrame = 0, i._interactCount = 0, i._tweens = []; var n = c["default"].assets,
                        s = new PIXI.Container; return i.addChild(s), i._view = new PIXI.spine.Spine(n.spineData("duck")), i._view.position.set(0, 0), i._view.skeleton.setToSetupPose(), i._view.skeleton.setSkin(null), i._view.autoUpdate = !1, i._view.scale.set(.4), i._view.update(0), s.addChild(i._view), i._view.state.addListener({ event: i._onAnimationEvent.bind(i) }), i._view.stateData.setMix("egg_attack", "idle-stand", .2), i._view.stateData.setMix("egg_attack", "idle-stand2", .2), i._view.stateData.setMix("egg_attack", "idle-stand4", .2), i._view.stateData.setMix("walk", "idle-stand", .2), i._view.stateData.setMix("walk", "idle-stand2", .2), i._view.stateData.setMix("walk", "idle-stand4", .2), i._view.stateData.setMix("walk", "idle-sit", .2), i._view.stateData.setMix("idle-stand", "walk", .2), i._view.stateData.setMix("idle-stand2", "walk", .2), i._view.stateData.setMix("idle-stand4", "walk", .2), i._view.stateData.setMix("idle-sit", "walk", .2), i._view.stateData.setMix("run", "walk", .2), i._view.stateData.setMix("walk", "run", .2), i._view.stateData.setMix("idle-stand", "idle-fly", .2), i._view.stateData.setMix("idle-stand2", "idle-fly", .2), i._view.stateData.setMix("idle-stand4", "idle-fly", .2), i._view.stateData.setMix("idle-sit", "idle-fly", .2), i.interactive = !0, i.buttonMode = !0, i.signals.attack = new signals.Signal, i.signals.flyStart = new signals.Signal, i.signals.flyStop = new signals.Signal, i } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this._start = this.x, this._nextTarget(), this._playIdleAnimation(), this._createShadow(), this.click = this.tap = this._onMouseClick.bind(this) } }, { key: "destroy", value: function() { this.signals.attack.dispose(), this.signals.flyStart.dispose(), this.signals.flyStop.dispose(), this.click = this.tap = null; for (var e = 0; e < this._tweens.length; ++e) { var i = this._tweens[e];
                            i.kill() } this._tweens.length = 0, l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "update", value: function(e) { if (!this._flying) { var t = this._target - this.x,
                                i = Math.sign(t),
                                n = this._angry ? 2 * this._moveSpeed : this._moveSpeed;
                            this.x += Math.sign(t) * n * e, Math.abs(t) < n * e && (t = 0, this.x = this._target), this._attacking || this.x === this._target && (this._angry ? this._nextTarget() : this._targetTime <= 0 ? this._nextTarget() : this._targetTime -= e), this._angry && (this._angryTime <= 0 ? (this._angry = !1, this._nextTarget(), this._playWalkAnimation()) : this._angryTime -= e), this._attacking && (this._attackTime <= 0 ? this._attacking = !1 : this._attackTime -= e), this.inCameraView && (this._quackTime <= 0 ? this._playQuackSFX() : this._quackTime -= e); var a = Math.sign(t);
                            0 === a || this._moving ? 0 === a && this._moving && (this._moving = !1, this._playIdleAnimation()) : (this._moving = !0, this._angry ? this._playRunAnimation() : this._playWalkAnimation()), this.faceDirection(i) } this._skipFrame++ % 2 === 0 && this._view.update(2 * e), this._updateShadow() } }, { key: "attack", value: function() { this._quackTime = 0, this._attackTime = 2, this._attacking = !0, this._target = this.x, this._view.state.setAnimation(0, "egg_attack", !1), this._view.state.addAnimation(0, "idle-stand", !0, 0); var e = this._player.x - this.x;
                        this.faceDirection(-Math.sign(e)), this.signals.attack.dispatch(this) } }, { key: "angry", value: function() { this._angry || (this._angry = !0, this._angryTime = 6, this._nextTarget(), this._playRunAnimation()) } }, { key: "flyAway", value: function() { this._flying = !0, this._playFlyAnimation(); var e = .5 * -Math.PI + P3.math.random(.2 * Math.PI, .26 * Math.PI) * P3.math.randomSign(),
                            t = new P3.Vector2(Math.cos(e), Math.sin(e));
                        t.scaleBy(2e3), this.faceDirection(Math.sign(this.x + t.x - this.x)); var i = new TimelineMax;
                        this._tweens.push(i), i.insert(TweenMax.to(this, 2, { x: this.x + t.x, y: this.y + t.y, ease: Power1.easeIn, onStart: function() { this.signals.flyStart.dispatch(this) }, onStartParams: [this], onStartScope: this, onComplete: function() { this.signals.flyStop.dispatch(this) }, onCompleteParams: [this], onCompleteScope: this })) } }, { key: "_createShadow", value: function() { var e = c["default"].assets;
                        this._shadow = new PIXI.Sprite(e.texture("shadow")), this._shadow.y = this.y, this._shadow.scale.set(.6), this._shadow.anchor.set(.5), this.parent.addChildAt(this._shadow, this.parent.getChildIndex(this)) } }, { key: "_updateShadow", value: function() { this._shadow.x = this.x, this._shadow.alpha = 1 - Math.abs(this._shadow.y - this.y) / 120, this._shadow.visible = this.visible } }, { key: "_nextTarget", value: function() { this._target = this._start + P3.math.random(-280, 280), this._targetTime = this._angry ? 0 : 1 + 3 * Math.random() } }, { key: "_playIdleAnimation", value: function() { this._view.state.setAnimation(0, P3.utils.selectRandom(["idle-sit", "idle-stand", "idle-stand2", "idle-stand4"]), !0) } }, { key: "_playWalkAnimation", value: function() { this._view.state.setAnimation(0, "walk", !0) } }, { key: "_playRunAnimation", value: function() { this._view.state.setAnimation(0, "run", !0) } }, { key: "_playFlyAnimation", value: function() { this._view.state.setAnimation(0, "idle-fly", !0) } }, { key: "_playQuackSFX", value: function() { this._quackTime = 4 + 6 * Math.random(), this._angry && (this._quackTime *= .4), Math.random() < .8 && c["default"].audio.playSound("sfx_duck_quack_00") } }, { key: "_playFlapSFX", value: function() { this.inCameraView && c["default"].audio.playSound(["sfx_flap_00", "sfx_flap_01"]) } }, { key: "_onAnimationEvent", value: function(e, t) { "sfx_flap" === t.data.name && this._playFlapSFX() } }, { key: "_onMouseClick", value: function(e) { this._flying || (++this._interactCount, this._interactCount >= 3 ? this.flyAway() : Math.random() < .5 ? this.angry() : this.attack(), this.signals.interact.dispatch(this)) } }, { key: "player", get: function() { return this._player } }]), t }(_["default"]);
        i["default"] = d }, { "../Actor": 4, "../Common": 13 }],
    56: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("./BaseGag"),
            u = n(l),
            _ = e("../Common"),
            h = n(_),
            c = e("./Duck"),
            d = n(c),
            p = function(e) {
                function t(e, i) { a(this, t); var n = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, i)); return n._duck = null, n } return s(t, e), r(t, [{ key: "create", value: function(e) { this._duck = new d["default"](this._player), this._duck.position = new PIXI.Point(e.x + P3.math.random(-200, 200), e.y), this._duck.anchor = new PIXI.Point(.5, .5), this._duck.signals.interact.addOnce(this._onDuckInteract, this), this._duck.signals.attack.add(this._onDuckAttack, this), this._duck.signals.flyStop.add(this._onDuckFlyStop, this), this._parent.addChild(this._duck) } }, { key: "throwEgg", value: function() { var e = h["default"].assets,
                            t = new PIXI.Sprite(e.texture("gag_egg"));
                        t.position.set(this._duck.x, this._duck.y - 60), t.anchor = new PIXI.Point(.5, .5), this._parent.addChild(t); var i = 1e3,
                            n = Math.abs(this._player.x - this._duck.x),
                            a = n / i;
                        TweenMax.to(t, a, { x: this._player.x, ease: Power0.easeNone, onComplete: function() { t.destroy({ children: !0 }) } }) } }, { key: "update", value: function(e) { this._duck.parent && this._duck.update(e) } }, { key: "_onDuckInteract", value: function(e) { this.unlock() } }, { key: "_onDuckAttack", value: function(e) { this.throwEgg() } }, { key: "_onDuckFlyStop", value: function(e) { e.destroy() } }]), t }(u["default"]);
        i["default"] = p }, { "../Common": 13, "./BaseGag": 50, "./Duck": 55 }],
    57: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../Actor"),
            _ = n(u),
            h = e("../Common"),
            c = n(h),
            d = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    i._player = e, i._start = 0, i._moveSpeed = 420, i._kicked = !1, i._state = 0, i._floor = 0, i._friction = .9, i._bounce = .24, i._gravity = 1e3, i._skipFrame = 0, i.velocity = new P3.Vector2; var n = c["default"].assets,
                        s = new PIXI.Container; return i.addChild(s), i._view = new PIXI.spine.Spine(n.spineData("frogprince")), i._view.position.set(0, 0), i._view.skeleton.setToSetupPose(), i._view.skeleton.setSkin(null), i._view.autoUpdate = !1, i._view.scale.set(.4), i._view.update(0), s.addChild(i._view), i._view.stateData.setMix("idle_angry", "kicked", .2), i._view.stateData.setMix("run-angry-fast", "idle_angry", .2), i._view.stateData.setMix("kicked", "run-angry-fast", .2), i.interactive = !0, i.buttonMode = !0, i.hitArea = new PIXI.Circle(0, (-40), 60), i } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this._start = this.x, this._floor = this.y, this._state = t.STATE_IDLE, this.idle(), this._createShadow(), this.click = this.tap = this._onMouseClick.bind(this) } }, { key: "destroy", value: function() { this.click = this.tap = null, l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "update", value: function(e) { switch (this._state) {
                            case t.STATE_IDLE:
                                this.faceDirection(-Math.sign(this._player.x - this.x)); break;
                            case t.STATE_KICKED:
                                Math.abs(this.velocity.x) < 8 && this.run(); break;
                            case t.STATE_RUN:
                                var i = this._start - this.x,
                                    n = this._moveSpeed;
                                this.x += Math.sign(i) * n * e, Math.abs(i) < n * e && (i = 0, this.x = this._start, this.idle()) } this.velocity.y += this._gravity * e, this.x += this.velocity.x * e, this.y += this.velocity.y * e, this.y > this._floor && (this.y = this._floor, this.velocity.x *= this._friction, this.velocity.y *= -this._bounce), Math.abs(this.velocity.x) < .01 && (this.velocity.x = 0), Math.abs(this.velocity.y) < .01 && (this.velocity.y = 0), this._skipFrame++ % 2 === 0 && this._view.update(2 * e), this._updateShadow() } }, { key: "idle", value: function() { this._state = t.STATE_IDLE, this._kicked = !1, this.velocity.set(0), this._playIdleAnimation() } }, { key: "run", value: function() { this._state = t.STATE_RUN, this._playRunAnimation() } }, { key: "kick", value: function(e) { this._kicked || (this._kicked = !0, this._state = t.STATE_KICKED, this.velocity.x = 400 * e, this.velocity.y = -800, this.faceDirection(e), this._playKickAnimation(), this._player.kick(e)) } }, { key: "_createShadow", value: function() { var e = c["default"].assets;
                        this._shadow = new PIXI.Sprite(e.texture("shadow")), this._shadow.y = this.y, this._shadow.scale.set(.2), this._shadow.anchor.set(.5), this.parent.addChildAt(this._shadow, this.parent.getChildIndex(this)) } }, { key: "_updateShadow", value: function() { this._shadow.x = this.x, this._shadow.alpha = .4 * (1 - Math.abs(this._shadow.y - this.y) / 120), this._shadow.visible = this.visible } }, { key: "_playIdleAnimation", value: function() { this._view.state.setAnimation(0, "idle_angry", !0) } }, { key: "_playRunAnimation", value: function() { this._view.state.setAnimation(0, "run-angry-fast", !0) } }, { key: "_playKickAnimation", value: function() { this._view.state.setAnimation(0, "kicked", !0) } }, { key: "_onMouseClick", value: function(e) { var t = this.x - this._player.x;
                        Math.abs(t) < 200 && (this.kick(Math.sign(t)), c["default"].audio.playSound(["vo_frogman_bleugh_00", "vo_frogman_surprise_00", "vo_frogman_surprise_01", "vo_frogman_transform_00"])) } }, { key: "player", get: function() { return this._player } }, { key: "state", get: function() { return this._state } }, { key: "kicked", get: function() { return this._kicked } }]), t }(_["default"]);
        i["default"] = d, d.STATE_IDLE = 0, d.STATE_RUN = 1, d.STATE_KICKED = 2 }, { "../Actor": 4, "../Common": 13 }],
    58: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("./BaseGag"),
            u = n(l),
            _ = e("../Common"),
            h = (n(_), e("./FrogPrince")),
            c = n(h),
            d = function(e) {
                function t(e, i) { a(this, t); var n = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, i)); return n._prince = null, n } return s(t, e), r(t, [{ key: "create", value: function(e) { this._prince = new c["default"](this._player), this._prince.position = new PIXI.Point(e.x + P3.math.random(-200, 200), e.y), this._prince.anchor = new PIXI.Point(.5, .5), this._prince.signals.interact.addOnce(this._onPrinceInteract, this), this._parent.addChild(this._prince) } }, { key: "update", value: function(e) { this._prince.update(e) } }, { key: "_onPrinceInteract", value: function(e) { this.unlock() } }]), t }(u["default"]);
        i["default"] = d }, { "../Common": 13, "./BaseGag": 50, "./FrogPrince": 57 }],
    59: [function(e, t, i) { "use strict";

        function n(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") } Object.defineProperty(i, "__esModule", { value: !0 }); var a = function o(e) { n(this, o), this.position = new PIXI.Point, this.width = 0, this.height = 0, this._name = e };
        i["default"] = a }, {}],
    60: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../Actor"),
            _ = n(u),
            h = e("../Common"),
            c = n(h),
            d = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    i._player = e, i._start = 0, i._target = 0, i._state = 0, i._moveSpeed = 620, i._moving = !1, i._acorn = null, i._skipFrame = 0; var n = c["default"].assets,
                        s = new PIXI.Container; return i.addChild(s), i._view = new PIXI.spine.Spine(n.spineData("gnome")), i._view.position.set(0, 0), i._view.skeleton.setToSetupPose(), i._view.skeleton.setSkinByName("gnome1"), i._view.autoUpdate = !1, i._view.update(0), i._view.scale.set(.4), s.addChild(i._view), i._view.state.addListener({ event: i._onAnimationEvent.bind(i), complete: i._onAnimationComplete.bind(i) }), i._view.stateData.setMix("idle", "idle2", .2), i._view.stateData.setMix("idle", "idle3", .2), i._view.stateData.setMix("idle2", "idle", .2), i._view.stateData.setMix("idle2", "idle3", .2), i._view.stateData.setMix("idle3", "idle", .2), i._view.stateData.setMix("idle3", "idle2", .2), i.interactive = !0, i.buttonMode = !0, i.signals.startClean = new signals.Signal, i.signals.stopClean = new signals.Signal, i } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this.idle(), this._createShadow(), this.click = this.tap = this._onMouseClick.bind(this) } }, { key: "destroy", value: function() { this.signals.startClean.dispose(), this.signals.stopClean.dispose(), this.click = this.tap = null, l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "update", value: function(e) { switch (this._state) {
                            case t.STATE_IDLE:
                                this.faceDirection(-Math.sign(this._player.x - this.x)); break;
                            case t.STATE_GO_HOME:
                            case t.STATE_GOTO_ACORN:
                                var i = this._target - this.x,
                                    n = Math.sign(i),
                                    a = this._moveSpeed;
                                this.x += Math.sign(i) * a * e, Math.abs(i) < a * e && (i = 0, this.x = this._target); var o = Math.sign(i); switch (0 === o || this._moving ? 0 === o && this._moving && (this._moving = !1, this._playIdleAnimation()) : (this._moving = !0, this._playRunAnimation()), this._state) {
                                    case t.STATE_GOTO_ACORN:
                                        0 === o && this.clean(); break;
                                    case t.STATE_GO_HOME:
                                        0 === o && this.idle() } this.faceDirection(-n); break;
                            case t.STATE_CLEAN:
                        } this._skipFrame++ % 2 === 0 && this._view.update(3 * e), this._updateShadow() } }, { key: "idle", value: function() { this._start = this.x, this._target = this._start, this._state = t.STATE_IDLE, this._playIdleAnimation() } }, { key: "goto", value: function(e) { this._acorn = e, this._state = t.STATE_GOTO_ACORN; var i = Math.sign(this._acorn.x - this.x);
                        this._target = this._acorn.x - 100 * i } }, { key: "clean", value: function() { this._state = t.STATE_CLEAN, this._playCleanAnimation() } }, { key: "home", value: function() { this._target = this._start, this._state = t.STATE_GO_HOME } }, { key: "removeAcorn", value: function() { this._acorn && (this._acorn.destroy(), this._acorn = null) } }, { key: "_createShadow", value: function() { var e = c["default"].assets;
                        this._shadow = new PIXI.Sprite(e.texture("shadow")), this._shadow.y = this.y, this._shadow.scale.set(.9), this._shadow.anchor.set(.5), this.parent.addChildAt(this._shadow, this.parent.getChildIndex(this)) } }, { key: "_updateShadow", value: function() { this._shadow.x = this.x, this._shadow.alpha = 1 - Math.abs(this._shadow.y - this.y) / 120, this._shadow.visible = this.visible } }, { key: "_playIdleAnimation", value: function() { this._view.state.setAnimation(0, P3.utils.selectRandom(["idle", "idle2", "idle3"]), !1) } }, { key: "_playRunAnimation", value: function() { this._view.state.setAnimation(0, P3.utils.selectRandom(["run1", "run2"]), !0) } }, { key: "_playCleanAnimation", value: function() { this._view.state.setAnimation(0, P3.utils.selectRandom(["cleanup1", "cleanup2"]), !1) } }, { key: "_onAnimationEvent", value: function(e, t) { "cleanup" === t.data.name && this.removeAcorn() } }, { key: "_onAnimationComplete", value: function(e) { this._state === t.STATE_IDLE && ["idle", "idle2", "idle3"].indexOf(e.animation.name) !== -1 ? this._playIdleAnimation() : this._state === t.STATE_CLEAN && ["cleanup1", "cleanup2"].indexOf(e.animation.name) !== -1 && (this.home(), this.signals.stopClean.dispatch(this)) } }, { key: "_onMouseClick", value: function(e) { c["default"].audio.playSound(["vo_gnome_poked_01", "vo_gnome_poked_03", "vo_gnome_poked_06"]), this._state === t.STATE_IDLE && (this.signals.startClean.dispatch(this), this.signals.interact.dispatch(this)) } }]), t }(_["default"]);
        i["default"] = d, d.STATE_IDLE = 0, d.STATE_GOTO_ACORN = 1, d.STATE_CLEAN = 2, d.STATE_GO_HOME = 3 }, { "../Actor": 4, "../Common": 13 }],
    61: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("./BaseGag"),
            u = n(l),
            _ = e("../Common"),
            h = n(_),
            c = e("./Gnome"),
            d = n(c),
            p = function(e) {
                function t(e, i) { a(this, t); var n = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, i)); return n._gnome = null, n._acornThrown = !1, n } return s(t, e), r(t, [{ key: "create", value: function(e) { this._gnome = new d["default"](this._player), this._gnome.position = new PIXI.Point(e.x + P3.math.random(-250, 250), e.y + P3.math.random(0, 15)), this._gnome.anchor = new PIXI.Point(.5, .5), this._gnome.signals.startClean.add(this._onGnomeCleanStart, this), this._gnome.signals.stopClean.add(this._onGnomeCleanStop, this), this._gnome.signals.interact.addOnce(this._onGnomeInteract, this), this._parent.addChild(this._gnome) } }, { key: "update", value: function(e) { this._gnome.update(e) } }, { key: "throwAcorn", value: function() { var e = h["default"].assets,
                            t = new PIXI.Sprite(e.texture("gag_acorn"));
                        t.x = this._player.x, t.y = this._player.y, t.anchor.set(.5, .5), this._player.parent.addChild(t); var i = P3.math.randomSign();
                        this._player.throwAcorn(i), TweenMax.to(t, 1, { rotation: 2 * Math.PI * P3.math.randomSign(), ease: Power0.easeNone, repeat: -1 }); var n = t.y + 180,
                            a = new TimelineMax({ onComplete: function() { TweenMax.killTweensOf(t), this._gnome["goto"](t) }, onCompleteScope: this }),
                            o = 600,
                            s = t.y - 260,
                            r = Math.abs(s) / o;
                        a.append(TweenMax.to(t, r, { y: n - 260, ease: Power1.easeOut })); var l = Math.abs(n - s) / o;
                        a.append(TweenMax.to(t, l, { y: n, ease: Power1.easeIn })), TweenMax.to(t, r + l, { x: t.x + 200 * i, ease: Power0.easeNone }) } }, { key: "_onGnomeCleanStart", value: function(e) { this._acornThrown || (this._acornThrown = !0, this.throwAcorn()) } }, { key: "_onGnomeCleanStop", value: function(e) { this._acornThrown = !1 } }, { key: "_onGnomeInteract", value: function(e) { this.unlock() } }]), t }(u["default"]);
        i["default"] = p }, { "../Common": 13, "./BaseGag": 50, "./Gnome": 60 }],
    62: [function(e, t, i) {
        "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 });
        var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../Actor"),
            _ = n(u),
            h = e("../Common"),
            c = n(h),
            d = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    e._start = 0, e._target = 0, e._targetTime = 0, e._moveSpeed = 200, e._moving = !1, e._flying = !1, e._skipFrame = 0, e._flyLoopSFX = null, e._tweens = []; var i = c["default"].assets,
                        n = new PIXI.Container; return e.addChild(n), e._view = new PIXI.spine.Spine(i.spineData("ladybird")), e._view.position.set(0, 0), e._view.skeleton.setToSetupPose(), e._view.skeleton.setSkin(null), e._view.autoUpdate = !1, e._view.update(0), n.addChild(e._view), e.interactive = !0, e.buttonMode = !0, e.hitArea = new PIXI.Circle(0, (-40), 40), e.signals.flyStart = new signals.Signal, e.signals.flyStop = new signals.Signal, e }
                return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this._start = this.x, this._nextTarget(), this._createShadow(), this._view.state.setAnimation(0, "walk", !0), this.click = this.tap = this._onMouseClick.bind(this) } }, { key: "destroy", value: function() { this.signals.flyStart.dispose(), this.signals.flyStop.dispose(), this.click = this.tap = null; for (var e = 0; e < this._tweens.length; ++e) { var i = this._tweens[e];
                            i.kill() } this._tweens.length = 0, this._stopFlyLoopSFX(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, {
                    key: "update",
                    value: function(e) {
                        if (!this._flying) {
                            var t = this._target - this.x,
                                i = Math.sign(t);
                            this.x += Math.sign(t) * this._moveSpeed * e,
                                Math.abs(t) < this._moveSpeed * e && (t = 0, this.x = this._target), this.x === this._target && (this._targetTime <= 0 ? this._nextTarget() : this._targetTime -= e);
                            var n = Math.sign(t);
                            0 === n || this._moving ? 0 === n && this._moving && (this._moving = !1, this._playIdleAnimation()) : (this._moving = !0, this._playWalkAnimation()), this.faceDirection(i)
                        }
                        this._skipFrame++ % 2 === 0 && this._view.update(2 * e), this._updateShadow()
                    }
                }, { key: "flyAway", value: function() { this._flying = !0, this._playFlyAnimation(), this._playFlyLoopSFX(); var e = .5 * -Math.PI + P3.math.random(.2 * Math.PI, .26 * Math.PI) * P3.math.randomSign(),
                            t = new P3.Vector2(Math.cos(e), Math.sin(e));
                        t.scaleBy(2e3), this.faceDirection(Math.sign(this.x + t.x - this.x)); var i = new TimelineMax;
                        this._tweens.push(i), i.insert(TweenMax.to(this, 2, { x: this.x + t.x, y: this.y + t.y, ease: Power1.easeIn, onStart: function() { this.signals.flyStart.dispatch(this) }, onStartParams: [this], onStartScope: this, onComplete: function() { this.signals.flyStop.dispatch(this) }, onCompleteParams: [this], onCompleteScope: this })) } }, { key: "_createShadow", value: function() { var e = c["default"].assets;
                        this._shadow = new PIXI.Sprite(e.texture("shadow")), this._shadow.y = this.y, this._shadow.scale.set(.3), this._shadow.anchor.set(.5), this.parent.addChildAt(this._shadow, this.parent.getChildIndex(this)) } }, { key: "_updateShadow", value: function() { this._shadow.x = this.x, this._shadow.alpha = 1 - Math.abs(this._shadow.y - this.y) / 120, this._shadow.visible = this.visible } }, { key: "_nextTarget", value: function() { this._target = this._start + P3.math.random(-280, 280), this._targetTime = 2 * Math.random() } }, { key: "_playIdleAnimation", value: function() { this._view.state.setAnimation(0, "idle", !0) } }, { key: "_playWalkAnimation", value: function() { this._view.state.setAnimation(0, "walk", !0) } }, { key: "_playFlyAnimation", value: function() { this._view.state.setAnimation(0, "fly", !0) } }, { key: "_playFlyLoopSFX", value: function() { this._stopFlyLoopSFX(), this._flyLoopSFX = c["default"].audio.playSound("sfx_ladybird_flying_loop_00", { loop: !0 }) } }, { key: "_stopFlyLoopSFX", value: function() { this._flyLoopSFX && this._flyLoopSFX.destroy() } }, { key: "_onMouseClick", value: function(e) { this._flying || this.flyAway() } }]), t
            }(_["default"]);
        i["default"] = d
    }, { "../Actor": 4, "../Common": 13 }],
    63: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("./BaseGag"),
            u = n(l),
            _ = e("../Common"),
            h = (n(_), e("./Ladybug")),
            c = n(h),
            d = function(e) {
                function t(e, i) { a(this, t); var n = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, i)); return n._ladybugs = [], n } return s(t, e), r(t, [{ key: "create", value: function(e) { for (var t = 0; t < P3.math.random(1, 3); ++t) { var i = new c["default"];
                            i.position = new PIXI.Point(e.x + P3.math.random(-200, 200), e.y), i.anchor = new PIXI.Point(.5, .5), i.signals.flyStart.add(this._onLadybugFlyStart, this), i.signals.flyStop.add(this._onLadybugFlyStop, this), this._parent.addChild(i), this._ladybugs.push(i) } } }, { key: "update", value: function(e) { for (var t = this._ladybugs.length - 1; t >= 0; --t) { var i = this._ladybugs[t];
                            i.parent ? i.update(e) : (this._ladybugs.splice(t, 1), console.log("ladybug removed")) } } }, { key: "_onLadybugFlyStart", value: function(e) { this.unlock(); var t = Math.sign(e.x - this._player.x);
                        this._player.scared(-t) } }, { key: "_onLadybugFlyStop", value: function(e) { e.destroy() } }]), t }(u["default"]);
        i["default"] = d }, { "../Common": 13, "./BaseGag": 50, "./Ladybug": 62 }],
    64: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../Actor"),
            _ = n(u),
            h = e("../Common"),
            c = n(h),
            d = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    e._start = 0, e._target = 0, e._targetTime = 0, e._moveSpeed = 640, e._moving = !1, e._excited = !1, e._exciteTime = 0, e._skipFrame = 0, e._shadow = null; var i = c["default"].assets,
                        n = new PIXI.Container; return e.addChild(n), e._view = new PIXI.spine.Spine(i.spineData("poodle_run")), e._view.position.set(0, 0), e._view.skeleton.setToSetupPose(), e._view.skeleton.setSkin(null), e._view.autoUpdate = !1, e._view.scale.set(.4), e._view.update(0), n.addChild(e._view), e._view.stateData.setMix("run_wo_stick", "idle1", .2), e._view.stateData.setMix("idle1", "run_wo_stick", .2), e._view.stateData.setMix("idle1", "idle1", .2), e._view.stateData.setMix("idle2", "run_wo_stick", .2), e.interactive = !0, e.buttonMode = !0, e } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this._start = this._target = this.x, this._playIdleAnimation(), this._createShadow(), this.click = this.tap = this._onMouseClick.bind(this) } }, { key: "destroy", value: function() { this.click = this.tap = null, this.stopSFX(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "update", value: function(e) { var t = this._target - this.x,
                            i = Math.sign(t),
                            n = this._moveSpeed;
                        this.x += Math.sign(t) * n * e, Math.abs(t) < this._moveSpeed * e && (t = 0, this.x = this._target), this._excited && this.x === this._target && (this._angry ? this._nextTarget() : this._targetTime <= 0 ? this._nextTarget() : this._targetTime -= e), this._excited && (this._exciteTime <= 0 ? (this._excited = !1, this.stopSFX()) : this._exciteTime -= e); var a = Math.sign(t);
                        0 === a || this._moving ? 0 === a && this._moving && (this._moving = !1, this._playIdleAnimation()) : (this._moving = !0, this._playRunAnimation()), this.faceDirection(i), this._skipFrame++ % 2 === 0 && this._view.update(2 * e), this._updateShadow() } }, { key: "excite", value: function() { this._excited = !0, this._exciteTime = 5, this._targetTime = 2, this._playExciteAnimation(), this.playSFX() } }, { key: "playSFX", value: function() { this.stopSFX(), this._voSFX = c["default"].audio.playSound(["vo_poodle_panting_00", "vo_poodle_running_00"]) } }, { key: "stopSFX", value: function() { this._voSFX && (this._voSFX.destroy(), this._voSFX = null) } }, { key: "_createShadow", value: function() { var e = c["default"].assets;
                        this._shadow = new PIXI.Sprite(e.texture("shadow")), this._shadow.y = this.y, this._shadow.scale.set(.9), this._shadow.anchor.set(.5), this.parent.addChildAt(this._shadow, this.parent.getChildIndex(this)) } }, { key: "_updateShadow", value: function() { this._shadow.x = this.x, this._shadow.visible = this.visible } }, { key: "_nextTarget", value: function() { this._target = this._start + P3.math.random(-280, 280), this._targetTime = this._angry ? 0 : 2 * Math.random() } }, { key: "_playIdleAnimation", value: function() { this._view.state.setAnimation(0, "idle1", !0) } }, { key: "_playExciteAnimation", value: function() { this._view.state.setAnimation(0, "idle2", !0) } }, { key: "_playRunAnimation", value: function() { this._view.state.setAnimation(0, "run_wo_stick", !0) } }, { key: "_onMouseClick", value: function(e) { this._excited || (this._excited = !0, this.excite(), this.signals.interact.dispatch(this)) } }]), t }(_["default"]);
        i["default"] = d }, { "../Actor": 4, "../Common": 13 }],
    65: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("./BaseGag"),
            u = n(l),
            _ = e("./Poodle"),
            h = n(_),
            c = function(e) {
                function t(e, i) { a(this, t); var n = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, i)); return n._poodle = null, n } return s(t, e), r(t, [{ key: "create", value: function(e) { this._poodle = new h["default"], this._poodle.position = new PIXI.Point(e.x + P3.math.random(-200, 200), e.y), this._poodle.anchor = new PIXI.Point(.5, .5), this._poodle.signals.interact.addOnce(this._onPoodleInteract, this), this._parent.addChild(this._poodle) } }, { key: "update", value: function(e) { this._poodle.update(e) } }, { key: "_onPoodleInteract", value: function(e) { this.unlock() } }]), t }(u["default"]);
        i["default"] = c }, { "./BaseGag": 50, "./Poodle": 64 }],
    66: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../Actor"),
            _ = n(u),
            h = e("../Common"),
            c = n(h),
            d = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    i._targetPosition = null, i._seek = !1, i._dx = 0, i._startScale = null, i._nodes = [], i._skipFrame = 0, i._tweens = []; var n = c["default"].assets,
                        s = new PIXI.Container; return i.addChild(s), i._view = new PIXI.spine.Spine(n.spineData("puffer")), i._view.position.set(0, 0), i._view.skeleton.setToSetupPose(), i._view.skeleton.setSkin(null), i._view.autoUpdate = !1, i._view.update(0), i._view.scale.set(.4), s.addChild(i._view), i } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this.interactive = !0, this.buttonMode = !0, this.click = this.tap = this._onMouseClick.bind(this), this.initNodes(), this.startTween(), this._playIdleAnimation() } }, { key: "initNodes", value: function() { this._nodes = [{ x: this.x, y: this.y }, { x: this.x - 100, y: this.y }, { x: this.x, y: this.y - 50 }, { x: this.x + 100, y: this.y }, { x: this.x, y: this.y }] } }, { key: "startTween", value: function() { this._tweens.push(TweenMax.to(this, 10, { x: this.x - 125, ease: Power1.easeInOut, yoyo: !0, repeat: -1 })), this._tweens.push(TweenMax.to(this, 2.5, { y: this.y - 25, ease: Power1.easeInOut, yoyo: !0, repeat: -1 })) } }, { key: "startBezierTween", value: function() { this._tweens.push(TweenMax.to(this, 10, { bezier: { type: "cubic", values: this._nodes }, ease: Power1.easeInOut, yoyo: !0, repeat: -1 })) } }, { key: "destroy", value: function() { this.click = this.tap = null; for (var e = 0; e < this._tweens.length; ++e) { var i = this._tweens[e];
                            i.kill() } this._tweens.length = 0, l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "update", value: function(e) { this._skipFrame++ % 2 === 0 && this._view.update(2 * e) } }, { key: "_playIdleAnimation", value: function() { this._view.state.setAnimation(0, "idle_float", !0) } }, { key: "_playDeflateAnimation", value: function() { this._view.state.setAnimation(0, "deflate", !1) } }, { key: "_onMouseClick", value: function(e) { var t = this;
                        TweenMax.killTweensOf(this), this._playDeflateAnimation(), this._tweens.push(TweenMax.to(this, .25, { bezier: [{ x: this.x + 50, y: this.y + 50 }, { x: this.x + 0, y: this.y + 100 }, { x: this.x - 50, y: this.y + 50 }, { x: this.x, y: this.y }], ease: Power0.easeNone, repeat: -1 })), this._tweens.push(TweenMax.to(this.view.scale, 2, { x: 0, y: 0, ease: Power0.easeNone })); var i = 1;
                        Math.random() < .5 && (i = -1), this._tweens.push(TweenMax.to(this.view, 2, { y: this.view.y - 250, ease: Power2.easeOut, onComplete: function() { t.visible = !1 } })), c["default"].audio.playSound("sfx_puffer_deflate_trigger_00"), this.signals.interact.dispatch(this) } }]), t }(_["default"]);
        i["default"] = d }, { "../Actor": 4, "../Common": 13 }],
    67: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("./BaseGag"),
            u = n(l),
            _ = e("../Common"),
            h = (n(_), e("./Puffer")),
            c = n(h),
            d = function(e) {
                function t(e, i) { a(this, t); var n = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, i)); return n._puffer = null, n } return s(t, e), r(t, [{ key: "create", value: function(e) { this._puffer = new c["default"], this._puffer.position = new PIXI.Point(e.x + P3.math.random(-200, 200), e.y - 125), this._puffer.anchor = new PIXI.Point(.5, .5), this._puffer.signals.interact.addOnce(this._onPufferInteract, this), this._puffer.init(), this._parent.addChild(this._puffer) } }, { key: "update", value: function(e) { this._puffer.update(e) } }, { key: "_onPufferInteract", value: function(e) { this.unlock() } }]), t }(u["default"]);
        i["default"] = d }, { "../Common": 13, "./BaseGag": 50, "./Puffer": 66 }],
    68: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../Actor"),
            _ = n(u),
            h = e("../Common"),
            c = n(h),
            d = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    i._player = e, i._start = 0, i._target = 0, i._targetTime = 0, i._moveSpeed = 90, i._moving = !1, i._flying = !1, i._swapping = !1, i._howling = !1, i._flyTime = 0, i._cawTime = 0, i._cawSFX = null, i._skipFrame = 0, i._tweens = []; var n = c["default"].assets,
                        s = new PIXI.Container; return i.addChild(s), i._view = new PIXI.spine.Spine(n.spineData("raven")), i._view.position.set(0, 0), i._view.scale.set(.4), i._view.skeleton.setToSetupPose(), i._view.skeleton.setSkin(null), i._view.autoUpdate = !1, i._view.update(0), s.addChild(i._view), i._view.state.addListener({ event: i._onAnimationEvent.bind(i), complete: i._onAnimationComplete.bind(i) }), i._view.stateData.setMix("idle", "walk", .2), i._view.stateData.setMix("walk", "idle", .2), i._view.stateData.setMix("idle", "fly", .2), i._view.stateData.setMix("fly", "idle", .2), i._view.stateData.setMix("idle", "idle_howl", .2), i._view.stateData.setMix("idle_howl", "idle", .2), i._view.stateData.setMix("fly", "fly_howl", .2), i._view.stateData.setMix("fly_howl", "fly", .2), i.interactive = !0, i.buttonMode = !0, i } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this._start = this.x, this._nextTarget(), this._flyTime = 8, this._cawTime = P3.math.random(1, 6), this._createShadow(), this._playIdleAnimation(), this.click = this.tap = this._onMouseClick.bind(this) } }, { key: "destroy", value: function() { this.click = this.tap = null; for (var e = 0; e < this._tweens.length; ++e) { var i = this._tweens[e];
                            i.kill() } this._tweens.length = 0, l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "update", value: function(e) { var t = this._target - this.x,
                            i = Math.sign(t); if (!this._howling && !this._swapping) { var n = this._flying ? 2 * this._moveSpeed : this._moveSpeed;
                            this.x += Math.sign(t) * n * e, Math.abs(t) < n * e && (t = 0, this.x = this._target) } this._howling || this.x !== this._target || (this._targetTime <= 0 ? this._nextTarget() : this._targetTime -= e), this._flyTime <= 0 ? this.fly() : this._flyTime -= e, !this._howling && this.inCameraView && (this._cawTime <= 0 ? (this._cawTime = P3.math.random(1, 6), this._playCawSFX()) : this._cawTime -= e); var a = Math.sign(t);
                        0 === a || this._moving ? 0 === a && this._moving && !this._howling && (this._moving = !1, !this._flying && this._playIdleAnimation()) : (this._moving = !0, this._playWalkAnimation()), this.faceDirection(-i), this._skipFrame++ % 2 === 0 && this._view.update(3 * e), this._updateShadow() } }, { key: "howl", value: function() { this._howling = !0, this._target = this.x, this._flyTime = Math.max(4, this._flyTime), this._playHowlAnimation() } }, { key: "fly", value: function() { this._flyTime = 4 + 8 * Math.random(), this._swapping = !0, this._flying ? this._tweens.push(TweenMax.to(this._view.parent, 1, { y: 0, ease: Back.easeIn, easeParams: [1], onComplete: function() { this._flying = !1, this._swapping = !1, this._moving ? this._playWalkAnimation() : this._playIdleAnimation() }, onCompleteScope: this })) : (this._flying = !0, this._tweens.push(TweenMax.to(this._view.parent, 1.4, { y: -160, ease: Back.easeOut, easeParams: [2], onComplete: function() { this._swapping = !1 }, onCompleteScope: this })), this._playIdleAnimation()) } }, { key: "_createShadow", value: function() { var e = c["default"].assets;
                        this._shadow = new PIXI.Sprite(e.texture("shadow")), this._shadow.y = this.y, this._shadow.scale.set(.5), this._shadow.anchor.set(.5), this.parent.addChildAt(this._shadow, this.parent.getChildIndex(this)) } }, { key: "_updateShadow", value: function() { this._shadow.x = this.x, this._shadow.alpha = 1 - Math.abs(this._shadow.y - this.y) / 120, this._shadow.visible = this.visible } }, { key: "_nextTarget", value: function() { this._target = this._start + P3.math.random(-280, 280), this._targetTime = 1 + 3 * Math.random() } }, { key: "_playIdleAnimation", value: function() { this._flying ? this._view.state.setAnimation(0, "fly", !0) : this._view.state.setAnimation(0, "idle", !0) } }, { key: "_playWalkAnimation", value: function() { this._flying || this._view.state.setAnimation(0, "walk", !0) } }, { key: "_playHowlAnimation", value: function() { this._flying ? (this._view.state.setAnimation(0, "fly_howl", !1), this._view.state.addAnimation(0, "fly", !0, 0)) : this._view.state.setAnimation(0, "idle_howl", !1) } }, { key: "_playCawSFX", value: function() { this._stopCawSFX(), this._cawTime = 3 + 8 * Math.random(), Math.random() < .6 && (this._cawSFX = c["default"].audio.playSound(["sfx_crow_caw_00", "sfx_crow_caw_01"])) } }, { key: "_stopCawSFX", value: function() { this._cawSFX && (this._cawSFX.destroy(), this._cawSFX = null) } }, { key: "_playFlapSFX", value: function() { this.inCameraView && c["default"].audio.playSound(["sfx_flap_00", "sfx_flap_01"]) } }, { key: "_onAnimationEvent", value: function(e, t) { "sfx_flap" === t.data.name && this._playFlapSFX() } }, { key: "_onAnimationComplete", value: function(e) {
                        ["idle_howl", "fly_howl"].indexOf(e.animation.name) !== -1 && (this._howling = !1, console.log("!!!!")) } }, { key: "_onMouseClick", value: function(e) { this._swapping || this._howling || (this.howl(), this._stopCawSFX(), c["default"].audio.playSound("vo_wolf_howl_00")), this.signals.interact.dispatch(this) } }]), t }(_["default"]);
        i["default"] = d }, { "../Actor": 4, "../Common": 13 }],
    69: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("./BaseGag"),
            u = n(l),
            _ = e("../Common"),
            h = (n(_), e("./Raven")),
            c = n(h),
            d = function(e) {
                function t(e, i) { a(this, t); var n = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, i)); return n._raven = null, n } return s(t, e), r(t, [{ key: "create", value: function(e) { this._raven = new c["default"](this._player), this._raven.position = new PIXI.Point(e.x + P3.math.random(-200, 200), e.y), this._raven.anchor = new PIXI.Point(.5, .5), this._raven.signals.interact.addOnce(this._onRavenInteract, this), this._parent.addChild(this._raven) } }, { key: "update", value: function(e) { this._raven.update(e) } }, { key: "_onRavenInteract", value: function(e) { this.unlock() } }]), t }(u["default"]);
        i["default"] = d }, { "../Common": 13, "./BaseGag": 50, "./Raven": 68 }],
    70: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../Actor"),
            _ = n(u),
            h = e("../Common"),
            c = n(h),
            d = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    i._player = e, i._start = 0, i._target = 0, i._targetTime = 0, i._moveSpeed = 60, i._moving = !1, i._angryTime = 0, i._angry = !1, i._skipFrame = 0; var n = c["default"].assets,
                        s = new PIXI.Container; return i.addChild(s), i._view = new PIXI.spine.Spine(n.spineData("squirehamster")), i._view.position.set(0, 0), i._view.skeleton.setToSetupPose(), i._view.skeleton.setSkin(null), i._view.autoUpdate = !1, i._view.scale.set(.4), i._view.update(0), s.addChild(i._view), i._view.stateData.setMix("idle", "walk", .2), i._view.stateData.setMix("idle2", "walk", .2), i._view.stateData.setMix("idle", "run-happy-fast", .2), i._view.stateData.setMix("idle2", "run-happy-fast", .2), i._view.stateData.setMix("run-happy-fast", "walk", .2), i.interactive = !0, i.buttonMode = !0, i } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this._start = this.x, this._nextTarget(), this._playIdleAnimation(), this._createShadow(), this.click = this.tap = this._onMouseClick.bind(this) } }, { key: "destroy", value: function() { this.click = this.tap = null, l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "update", value: function(e) { var t = this._target - this.x,
                            i = Math.sign(t),
                            n = this._angry ? 5 * this._moveSpeed : this._moveSpeed;
                        this.x += Math.sign(t) * n * e, Math.abs(t) < n * e && (t = 0, this.x = this._target), this.x === this._target && (this._angry ? this._nextTarget() : this._targetTime <= 0 ? this._nextTarget() : this._targetTime -= e), this._angry && (this._angryTime <= 0 ? (this._angry = !1, this._nextTarget(), this._playWalkAnimation()) : this._angryTime -= e); var a = Math.sign(t);
                        0 === a || this._moving ? 0 === a && this._moving && (this._moving = !1, this._playIdleAnimation()) : (this._moving = !0, this._angry ? this._playRunAnimation() : this._playWalkAnimation()), this.faceDirection(i), this._skipFrame++ % 2 === 0 && this._view.update(2 * e), this._updateShadow() } }, { key: "angry", value: function() { this._angry || (this._angry = !0, this._angryTime = 6, this._nextTarget(), this._playRunAnimation()) } }, { key: "_createShadow", value: function() { var e = c["default"].assets;
                        this._shadow = new PIXI.Sprite(e.texture("shadow")), this._shadow.y = this.y, this._shadow.scale.set(.34), this._shadow.anchor.set(.5), this.parent.addChildAt(this._shadow, this.parent.getChildIndex(this)) } }, { key: "_updateShadow", value: function() { this._shadow.x = this.x, this._shadow.alpha = 1 - Math.abs(this._shadow.y - this.y) / 120, this._shadow.visible = this.visible } }, { key: "_nextTarget", value: function() { this._target = this._start + P3.math.random(-280, 280), this._targetTime = this._angry ? 0 : 1 + 3 * Math.random() } }, { key: "_playIdleAnimation", value: function() { this._view.state.setAnimation(0, P3.utils.selectRandom(["idle", "idle2"]), !0) } }, { key: "_playWalkAnimation", value: function() { this._view.state.setAnimation(0, "walk", !0) } }, { key: "_playRunAnimation", value: function() { this._view.state.setAnimation(0, "run-happy-fast", !0) } }, { key: "_onMouseClick", value: function() { this.angry(), c["default"].audio.playSound("vo_squire_yay_00"), this.signals.interact.dispatch(this) } }]), t }(_["default"]);
        i["default"] = d }, { "../Actor": 4, "../Common": 13 }],
    71: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("./BaseGag"),
            u = n(l),
            _ = e("./RodentSquire"),
            h = n(_),
            c = function(e) {
                function t(e, i) { a(this, t); var n = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, i)); return n._squire = null, n } return s(t, e), r(t, [{ key: "create", value: function(e) { this._squire = new h["default"], this._squire.position = new PIXI.Point(e.x + P3.math.random(-200, 200), e.y), this._squire.anchor = new PIXI.Point(.5, .5), this._squire.signals.interact.addOnce(this._onSquireInteract, this), this._parent.addChild(this._squire) } }, { key: "update", value: function(e) { this._squire.update(e) } }, { key: "_onSquireInteract", value: function(e) { this.unlock() } }]), t }(u["default"]);
        i["default"] = c }, { "./BaseGag": 50, "./RodentSquire": 70 }],
    72: [function(e, t, i) {
        "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 });
        var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../Actor"),
            _ = n(u),
            h = e("../Common"),
            c = n(h),
            d = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    i._player = e, i._start = 0, i._target = 0, i._targetTime = 0, i._moveSpeed = 340, i._moving = !1, i._kicked = !1, i._skipFrame = 0, i._tweens = []; var n = c["default"].assets,
                        s = new PIXI.Container; return i.addChild(s), i._view = new PIXI.spine.Spine(n.spineData("squirrel")), i._view.position.set(0, 0), i._view.skeleton.setToSetupPose(), i._view.skeleton.setSkin(null), i._view.autoUpdate = !1, i._view.scale.set(.4), i._view.update(0), s.addChild(i._view), i._view.stateData.setMix("idle", "run", .2), i._view.stateData.setMix("run", "runstop", .2), i.interactive = !0, i.buttonMode = !0, i }
                return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this._start = this.x, this._nextTarget(), this._playIdleAnimation(), this._createShadow(), this.click = this.tap = this._onMouseClick.bind(this) } }, { key: "destroy", value: function() { this.click = this.tap = null; for (var e = 0; e < this._tweens.length; ++e) { var i = this._tweens[e];
                            i.kill() } this._tweens.length = 0, l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, {
                    key: "update",
                    value: function(e) {
                        if (!this._kicked) {
                            var t = this._target - this.x,
                                i = Math.sign(t),
                                n = this._angry ? 5 * this._moveSpeed : this._moveSpeed;
                            this.x += Math.sign(t) * n * e,
                                Math.abs(t) < n * e && (t = 0, this.x = this._target), this.x === this._target && (this._targetTime <= 0 ? this._nextTarget() : this._targetTime -= e);
                            var a = Math.sign(t);
                            0 === a || this._moving ? 0 === a && this._moving && (this._moving = !1, this._playIdleAnimation()) : (this._moving = !0, this._playRunAnimation()), this.faceDirection(i)
                        }
                        this._skipFrame++ % 2 === 0 && this._view.update(2 * e), this._updateShadow()
                    }
                }, { key: "kick", value: function(e) { this._playKickAnimation(); var t = c["default"].scene.top,
                            i = new TimelineMax;
                        this._tweens.push(t.addTween(i.insert(TweenMax.to(this, .75, { x: this.x + 350 * e, y: this.y - 800, ease: Power0.easeNone, onComplete: function() { this.visible = !1 }, onCompleteScope: this })))), this._tweens.push(t.addTween(i.insert(TweenMax.to(this, .4, { rotation: 2 * Math.PI, ease: Power0.easeNone, repeat: 3 })))) } }, { key: "_createShadow", value: function() { var e = c["default"].assets;
                        this._shadow = new PIXI.Sprite(e.texture("shadow")), this._shadow.y = this.y, this._shadow.scale.set(.54), this._shadow.anchor.set(.5), this.parent.addChildAt(this._shadow, this.parent.getChildIndex(this)) } }, { key: "_updateShadow", value: function() { this._shadow.x = this.x, this._shadow.alpha = 1 - Math.abs(this._shadow.y - this.y) / 120, this._shadow.visible = this.visible } }, { key: "_nextTarget", value: function() { this._target = this._start + P3.math.random(-280, 280), this._targetTime = 1 + 3 * Math.random() } }, { key: "_playIdleAnimation", value: function() { this._view.state.setAnimation(0, "runstop", !1), this._view.state.addAnimation(0, "idle", !0, 0) } }, { key: "_playRunAnimation", value: function() { this._view.state.setAnimation(0, "run", !0) } }, { key: "_playKickAnimation", value: function() { this._view.state.setAnimation(0, "kicked", !0) } }, { key: "_onMouseClick", value: function(e) { if (!this._kicked) { var t = this.x - this._player.x; if (Math.abs(t) < 200) { this._kicked = !0; var i = Math.sign(t);
                                this._player.kick(i), this.kick(i) } c["default"].audio.playSound("sfx_squirrels_win_00"), this.signals.interact.dispatch(this) } } }]), t
            }(_["default"]);
        i["default"] = d
    }, { "../Actor": 4, "../Common": 13 }],
    73: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("./BaseGag"),
            u = n(l),
            _ = e("../Common"),
            h = (n(_), e("./Squirrel")),
            c = n(h),
            d = function(e) {
                function t(e, i) { a(this, t); var n = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, i)); return n._squirrel = null, n } return s(t, e), r(t, [{ key: "create", value: function(e) { this._squirrel = new c["default"](this._player), this._squirrel.position = new PIXI.Point(e.x + P3.math.random(-200, 200), e.y), this._squirrel.anchor = new PIXI.Point(.5, .5), this._squirrel.signals.interact.addOnce(this._onSquirrelInteract, this), this._parent.addChild(this._squirrel) } }, { key: "update", value: function(e) { this._squirrel.update(e) } }, { key: "_onSquirrelInteract", value: function(e) { this.unlock() } }]), t }(u["default"]);
        i["default"] = d }, { "../Common": 13, "./BaseGag": 50, "./Squirrel": 72 }],
    74: [function(e, t, i) {
        (function(t) { "use strict";

            function i(e) { return e && e.__esModule ? e : { "default": e } } var n = e("./Main"),
                a = i(n);
            t.Main = a["default"] }).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}) }, { "./Main": 23 }],
    75: [function(e, t, i) { "use strict";

        function n(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") } Object.defineProperty(i, "__esModule", { value: !0 }); var a = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            o = function() {
                function e(t) { n(this, e), this._items = [], this._cache = {} } return a(e, [{ key: "addItem", value: function(e) { var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];!this.hasItem(e) && t && (this._items.push(e), console.log("added item '" + e.name + "'")), this._cache[e.id] || (this._cache[e.id] = e, console.log("cached item '" + e.name + "'")) } }, { key: "removeItem", value: function(e) { var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
                        t && delete this._cache[e.name]; var i = this.getItemIndex(e); return i === -1 ? (console.warn("Item not found '" + e.name + "'"), !1) : (this._items.splice(i, 1), !0) } }, { key: "hasItem", value: function(e) { return this.getItemIndex(e) !== -1 } }, { key: "hasItemByName", value: function(e) { var t = this.getItemByName(e); return this.hasItem(t) } }, { key: "getItem", value: function(e) { return this._cache[e] } }, { key: "getItemByName", value: function(e) { return this.getItem(e.replace(/ /g, "_")) } }, { key: "getItemIndex", value: function(e) { return this._items.indexOf(e) } }, { key: "toObject", value: function() { var e = {}; for (var t in this._cache) { var i = this._cache[t];
                            e[i.id] = { name: i.name, inInventory: this.hasItem(i) } } return e } }, { key: "items", get: function() { var e = []; for (var t in this._cache) { var i = this._cache[t];
                            e.push(i) } return e.sort(function(e, t) { return e.order - t.order }), e } }, { key: "foundItems", get: function() { var e = []; for (var t in this._items) { var i = this._cache[t];
                            e.push(i) } return e.sort(function(e, t) { return e.order - t.order }), e } }]), e }();
        i["default"] = o }, {}],
    76: [function(e, t, i) { "use strict";

        function n(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") } Object.defineProperty(i, "__esModule", { value: !0 }); var a = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            o = function() {
                function e(t, i) { var a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : "",
                        o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : PIXI.Texture.EMPTY,
                        s = (arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : PIXI.Texture.EMPTY, arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : 0),
                        r = arguments.length > 6 && void 0 !== arguments[6] && arguments[6];
                    n(this, e), this._id = t, this._name = i, this._description = a, this._texture = o, this._inventoryTexture = o, this._order = s, this._openCertificate = r } return a(e, [{ key: "id", get: function() { return this._id } }, { key: "name", get: function() { return this._name } }, { key: "description", get: function() { return this._description } }, { key: "texture", get: function() { return this._texture } }, { key: "inventoryTexture", get: function() { return this._inventoryTexture } }, { key: "order", get: function() { return this._order } }, { key: "openCertificate", get: function() { return this._openCertificate } }]), e }();
        i["default"] = o }, {}],
    77: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function P(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : P(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Common"),
            _ = n(u),
            h = e("./Hud"),
            c = n(h),
            d = e("./Ivandoe"),
            p = n(d),
            f = e("./Bert"),
            y = n(f),
            v = e("./AcornEmitter"),
            m = n(v),
            g = e("../../MinigameScene"),
            w = n(g),
            b = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._lanes = [.5 * _["default"].STAGE_WIDTH - 175, .5 * _["default"].STAGE_WIDTH - 75, .5 * _["default"].STAGE_WIDTH + 55, .5 * _["default"].STAGE_WIDTH + 175], e._collider = null, e._bgHolder = new PIXI.Container, e._primaryHolder = new PIXI.Container, e._fgHolder = new PIXI.Container, e._particleHolder = new PIXI.Container, e._uiHolder = new PIXI.Container, e._bg = P3.createSprite("ep8_acornAntlers_bg", e._bgHolder), e._bg.width = _["default"].STAGE_WIDTH, e._hud = new c["default"](e._uiHolder), e._ivandoe = new p["default"](e._lanes), e._bert = new y["default"](e._hud, e._lanes), e._acornEmitter1 = new m["default"](.5 * _["default"].STAGE_WIDTH - 425, 205, e._primaryHolder, 0), e._acornEmitter2 = new m["default"](.5 * _["default"].STAGE_WIDTH - 185, 45, e._primaryHolder, 1), e._acornEmitter3 = new m["default"](.5 * _["default"].STAGE_WIDTH + 265, 45, e._primaryHolder, 2), e._acornEmitter3._view.scale.x = -e._acornEmitter3._view.scale.x, e._acornEmitter4 = new m["default"](.5 * _["default"].STAGE_WIDTH + 475, 255, e._primaryHolder, 3), e._acornEmitter4._view.scale.x = -e._acornEmitter4._view.scale.x, e._emitters = [e._acornEmitter1, e._acornEmitter2, e._acornEmitter3, e._acornEmitter4], e._stopEmission = !1, e._paused = !1, e._inTut = !1, e._angryLoop = null, e._particles = null, e._emissionTime = 1.5, e._newSquirrelTime = 15, e._activeLanes = 2, e._endTime = 0, e } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this); var e = P3.createSprite("ep8_acornAntlers/mg_left", this._fgHolder);
                        e.x = .5 * _["default"].STAGE_WIDTH - 805, e.y = 0; var i = P3.createSprite("ep8_acornAntlers/mg_top_left", this._fgHolder);
                        i.x = .5 * _["default"].STAGE_WIDTH - 405; var n = P3.createSprite("ep8_acornAntlers/mg_right", this._fgHolder);
                        n.x = .5 * _["default"].STAGE_WIDTH + 215, n.y = 0; var a = P3.createSprite("ep8_acornAntlers/mg_top_right", this._fgHolder);
                        a.x = .5 * _["default"].STAGE_WIDTH + 175, this._primaryHolder.addChild(this._ivandoe, this._bert), this._uiHolder.addChild(this._hud), this.addChild(this._bgHolder, this._primaryHolder, this._fgHolder, this._particleHolder, this._uiHolder), this._hud.pauseButton.signals.click.add(this._onPauseButtonClick, this), this._hud.setScore(this.score), this._hud.setHiScore(this.highscore), this._bg.interactive = !0, this._bg.hitArea = new PIXI.Rectangle(0, 0, _["default"].STAGE_WIDTH, _["default"].STAGE_HEIGHT), this._bg.mousedown = this._bg.touchstart = this._inputdown.bind(this), this._particles = this._initParticles(), this._colliderRad = 165, this._collider = new PIXI.Sprite(PIXI.Texture.EMPTY), this._collider.x = .5 * _["default"].STAGE_WIDTH - 125, this._collider.y = .5 * _["default"].STAGE_HEIGHT + 55, this._fgHolder.addChild(this._collider), this._timeTillEmission = this._emissionTime, this._acornEmitter1.active = !1, this._acornEmitter1._view.scale.set(0), this._acornEmitter4.active = !1, this._acornEmitter4._view.scale.set(0) } }, { key: "destroy", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "resize", value: function() { this.x = .5 * (P3.View.width - _["default"].STAGE_WIDTH), this._hud.resize() } }, { key: "update", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "update", this).call(this), this._gameEnding && (this._endTime += deltaTime, this._endTime > 2 && (_["default"].audio.playSound("sfx_squirrels_win_00"), this.end(), this._endTime = -Number.MAX_SAFE_INTEGER)), this._bert.updateView(), this._ivandoe.updateView(), this._particles.update(deltaTime); var e = !this._grace && !this._inTut; if (this._acornEmitter1.update(e), this._acornEmitter2.update(e), this._acornEmitter3.update(e), this._acornEmitter4.update(e), !this._grace && !this._inTut) { this._bert.update(), this._ivandoe.update(); for (var i = 0; i < this._emitters.length; i++) this._doAcorns(this._emitters[i].activeAcorns, this._ivandoe); if (this._newSquirrelTime -= deltaTime, this._newSquirrelTime <= 0 && (this._newSquirrelTime = 25, this._acornEmitter1.active ? this._acornEmitter4.active || (this._acornEmitter4.active = !0, this._beginSpeedingUp = !0, this._activeLanes = 4, TweenMax.to(this._acornEmitter4._view.scale, .5, { x: -.55, y: .55, ease: Back.easeOut })) : (this._acornEmitter1.active = !0, this._activeLanes = 3, TweenMax.to(this._acornEmitter1._view.scale, .5, { x: .55, y: .55, ease: Back.easeOut }))), !this._stopEmission && (this._timeTillEmission -= deltaTime, this._timeTillEmission <= 0)) { var n = P3.math.randomInt(0, this._activeLanes - 1);
                                0 === n ? n = 2 : 2 === n && (n = 0), this._tutorialEmission && (n = 1, this._tutorialEmission = !1), this._emitters[n].emit(), this._beginSpeedingUp && this._emissionTime > .75 && (this._emissionTime -= .05), this._timeTillEmission = this._emissionTime + P3.math.random(-.25, .25) } } } }, { key: "appear", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "appear", this).call(this), this._isFirstPlay() && this.signals.pause.dispatch(this, !0) } }, { key: "start", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "start", this).call(this), this._isFirstPlay() ? this._tutorial() : this._beginGame(), _["default"].audio.playMusic("music_loop_quirky_01"), this._angryLoop = _["default"].audio.playSound("sfx_squirrels_angry_loop_00", !0) } }, { key: "end", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "end", this).call(this), this.playEndVO(this._score), this._running = !1, _["default"].audio.stopMusic(), _["default"].audio.playSound("music_fail_stab_00"), this._angryLoop.howl.stop(), this._hud.setHiScore(this.highscore) } }, { key: "_beginGame", value: function() { this._newSquirrelTime = 15, this._running = !0, this._beginAnim() } }, { key: "_beginAnim", value: function() { var e = this;
                        delay(function() { e._ivandoe.laneChanger() }, 3, this) } }, { key: "pause", value: function() { this._paused = !0 } }, { key: "resume", value: function() { this._paused = !1 } }, { key: "_doAcorns", value: function(e, t) { for (var i = e.length, n = 0; n < i; n++)
                            if (e[n]) { if (e[n].y > P3.View.height) { e[n].visible = !1, e.splice(n, 1); break } if (e[n].collide) { if (_["default"].collisionOBB(e[n], this._bert.view, .75)) { this._bert.hit(), this._score++, this._hud.setScore(this.score), e[n].dx = -e[n].dx, e[n].dy = .5 * -e[n].dy, e[n].tint = 12632256, e[n].collide = !1, e[n].rotVel = P3.math.random(.1, -.1); break } if (this._circleCollide(e[n], this._collider)) { if (console.log("hit"), t._finish) return;
                                        t.hurt(), this._bert.gameOver(), this._stopEmission = !0, e[n].dy = .5 * -e[n].dy, e[n].collide = !1, e[n].rotVel = P3.math.random(.1, -.1), this._gameEnding = !0; break } } } } }, { key: "_circleCollide", value: function(e, t) { var i = e.width,
                            n = this._colliderRad; return _["default"].distance(e.x, e.y, t.x + 145, t.y + 205) < i + n } }, { key: "_emissionController", value: function() { if (!this._stopEmission) { if (!this._running || this._paused) return void delay(this._emissionController, .5, this); var e = P3.math.randomInt(0, 3);
                            this._emitters[e].emit(), delay(this._emissionController, this._emissionTime, this), this._emissionTime > 2 && (this._emissionTime -= .03) } } }, { key: "_inputdown", value: function(e) { this._inTut && (this._inTut = !1, this._killPointer(), this._beginGame()), this._running && this._bert.input(e) } }, { key: "_tutorial", value: function() { var e = this;
                        this._initTutorialPointer(), this._tutorialEmission = !0, delay(function() { return e._timeTillEmission = !1 }, 4), delay(function() { e._animatePointer(new PIXI.Point(e._lanes[1], 350)), e._inTut = !0 }, 2.45) } }, { key: "_initParticles", value: function() { var e = _["default"].assets,
                            t = e.json("particle_emitter_fairdust_01");
                        t.spawnRect.w = _["default"].STAGE_WIDTH, t.spawnRect.h = P3.View.height; var i = new PIXI.particles.Emitter(this._particleHolder, [e.texture("particle_fairy_dust_00"), e.texture("particle_fairy_dust_01")], t); return i.emit = !0, i } }]), t }(w["default"]);
        i["default"] = b }, { "../../Common": 13, "../../MinigameScene": 28, "./AcornEmitter": 78, "./Bert": 79, "./Hud": 80, "./Ivandoe": 81 }],
    78: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") } Object.defineProperty(i, "__esModule", { value: !0 }); var o = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            s = e("../../Common"),
            r = n(s),
            l = function() {
                function e(t, i, n, o) { var s = this;
                    a(this, e), this._lane = o, this._gravity = -.25, this._x = t, this._y = i, this._acornPool = r["default"].array(35), this._counter = -1, this._emitter = function() { for (var e = 0; e < s._acornPool.length; e++) { s._acornPool[e] = P3.createSprite("ep8_acornAntlers/acorn", n), s._acornPool[e].scale.set(.75), s._acornPool[e].anchor.set(.5), s._acornPool[e].collide = !0, s._acornPool[e].visible = !1; var t = s._acornPool[e]; switch (s._acornPool[e].dy = -4, s._lane) {
                                case 0:
                                    t.dx = 4.5; break;
                                case 1:
                                    t.dx = 1.5; break;
                                case 2:
                                    t.dx = -3.15; break;
                                case 3:
                                    t.dx = -5.5, t.dy = -5.5; break;
                                default:
                                    console.warn("unknown lane in acorn emitter : " + s._lane) } s._acornPool[e].rotVel = P3.math.random(.1, -.1), s._acornPool[e].position.set(s._x, s._y) } return function() { if (s._counter++, s._acornPool[s._counter]) return s._acornPool[s._counter]; for (var e = 0; e < s._acornPool.length; e++) { s._acornPool[e].collide = !0, s._acornPool[e].visible = !1; var t = s._acornPool[e]; switch (s._acornPool[e].dy = -4, s._lane) {
                                    case 0:
                                        t.dx = 4.5; break;
                                    case 1:
                                        t.dx = 1.5; break;
                                    case 2:
                                        t.dx = -3.15; break;
                                    case 3:
                                        t.dx = -5.5, t.dy = -5.5; break;
                                    default:
                                        console.warn("unknown lane in acorn emitter : " + s._lane) } s._acornPool[e].rotVel = P3.math.random(.1, -.1), s._acornPool[e].position.set(s._x, s._y) } return s._activeAcorns.length = 0, s._counter = 0, s._acornPool[s._counter] } }(), this._activeAcorns = [], this._view = new PIXI.spine.Spine(r["default"].assets.spineData("squirrel")), this._view.scale.set(.55, .55), this._view.skeleton.setToSetupPose(), this._view.autoUpdate = !1, this._view.update(0), this._view.position.set(t, i + 105), n.addChild(this._view), this._skipFrame = 0, this.active = !0, this.init() } return o(e, [{ key: "init", value: function() { this.drawAcornAnimation() } }, { key: "update", value: function(e) { if (e)
                            for (var t = this._activeAcorns.length, i = 0; i < t; i++) this._activeAcorns[i].dy -= this._gravity, this._activeAcorns[i].x += this._activeAcorns[i].dx, this._activeAcorns[i].y += this._activeAcorns[i].dy, this._activeAcorns[i].rotation += this._activeAcorns[i].rotVel;
                        this._skipFrame++ % 2 === 0 && this._view.update(2 * deltaTime) } }, { key: "emit", value: function() { if (this.active) { var e = this._emitter();
                            e.visible = !0, this._activeAcorns.push(e), r["default"].audio.playSound(["sfx_squirrels_throw_00", "sfx_squirrels_throw_01", "sfx_squirrels_throw_02"]), this.throwAcornAnimation() } } }, { key: "drawAcornAnimation", value: function() { this._view.state.setAnimation(0, "throw_reset", !1), this._view.state.addAnimation(0, "throw_ready", !0, 0) } }, { key: "throwAcornAnimation", value: function() { this._view.state.setAnimation(0, "throw", !1), this._view.state.addAnimation(0, "throw_reset", !0, 0), this._view.state.addAnimation(0, "throw_ready", !0, 0) } }, { key: "activeAcorns", get: function() { return this._activeAcorns } }]), e }();
        i["default"] = l }, { "../../Common": 13 }],
    79: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("../../Actor"),
            u = n(l),
            _ = e("../../Common"),
            h = n(_),
            c = function(e) {
                function t(e, i) { a(this, t); var n = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return n._view = new PIXI.spine.Spine(h["default"].assets.spineData("bert_front")), n._view.x = .5 * h["default"].STAGE_WIDTH - 75, n._view.y = .5 * P3.View.height + 45, n._view.scale.set(.6, .6), n._view.skeleton.setToSetupPose(), n._view.state.setAnimation(0, "fly_acorn_idle", !0), n._view.autoUpdate = !1, n._view.update(0), n._view.stateData.defaultMix = .15, n.addChild(n._view), n._startScale = n._view.scale.x, n._hud = e, n._lanes = i, n._targLaneId = 0, n._target = n._lanes[n._targLaneId], n._dx = 0, n._moveSpeed = 1200, n._skipFrame = 0, n.init(), n } return s(t, e), r(t, [{ key: "init", value: function() { this._view.state.addListener({ event: this._onAnimationEvent.bind(this) }), this._view.x = this._lanes[0] } }, { key: "updateView", value: function() { this._skipFrame++ % 2 === 0 && this._view.update(2 * deltaTime) } }, { key: "update", value: function() { var e = h["default"].input;
                        (e.isKeyPressed(37) ? !e.isKeyPressed(39) : e.isKeyPressed(39)) && (e.isKeyPressed(37) ? (this._targLaneId--, this._targLaneId < 0 && (this._targLaneId = 0), this._target = this._lanes[this._targLaneId], this._view.scale.x = -this._startScale) : e.isKeyPressed(39) && (this._targLaneId++, this._targLaneId > 3 && (this._targLaneId = 3), this._target = this._lanes[this._targLaneId], this._view.scale.x = this._startScale)), this._view.x < this._target - 10 ? this._dx = this._moveSpeed * deltaTime : this._view.x > this._target + 10 ? this._dx = -this._moveSpeed * deltaTime : this._dx = 0, this._view.x += this._dx } }, { key: "animationSwitcher", value: function() {} }, { key: "input", value: function(e) { for (var t = [], i = 0; i < this._lanes.length; i++) { var n = h["default"].distance(e.data.global.x - .5 * (P3.View.width - h["default"].STAGE_WIDTH), 0, this._lanes[i], 0);
                            t.push({ dist: n, lane: i }) } h["default"].sortDists(t), this._target = this._lanes[t[0].lane], this._target < this._view.x ? this._view.scale.x = -this._startScale : this._view.scale.x = this._startScale } }, { key: "gameOver", value: function() { this._view.state.setAnimation(0, "fly_acorn_lose", !0) } }, { key: "hit", value: function() { this._view.state.setAnimation(0, "fly_acorn_hit", !0), this._view.state.addAnimation(0, "idle_fly", !0, 0), h["default"].audio.playSound(["sfx_squirrel_acorn_hit_00", "sfx_squirrel_acorn_hit_01"]) } }, { key: "_playFlapSFX", value: function() { h["default"].audio.playSound(["sfx_flap_00", "sfx_flap_01"]) } }, { key: "_onAnimationEvent", value: function(e, t) { "sfx_flap" === t.data.name && this._playFlapSFX() } }]), t }(u["default"]);
        i["default"] = c }, { "../../Actor": 4, "../../Common": 13 }],
    80: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) }

        function r(e, t) { var i = void 0; return "string" == typeof e ? i = new PIXI.Sprite(h["default"].assets.texture(e)) : e instanceof PIXI.Texture ? i = new PIXI.Sprite(e) : (console.warn("texture neither a string nor a PIXI.Texture, falling back to empty texture"), i = new PIXI.Sprite(PIXI.Texture.EMPTY)), t && t.addChild(i), i }

        function l(e, t, i, n, a) { var o = 0 | a,
                s = new PIXI.Text(e, { fontFamily: t, fontSize: i, fill: o }); return n && n.addChild(s), s } Object.defineProperty(i, "__esModule", { value: !0 }); var u = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            _ = e("../../Common"),
            h = n(_),
            c = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return i._holder = e, i._pauseButton = null, i.init(), i } return s(t, e), u(t, [{ key: "init", value: function() { this._createScorePanel("minigame_icon_ep8_1"), this._createHiScorePanel(), this._createPauseButton() } }, { key: "resize", value: function() { this._score.x = .5 * (h["default"].STAGE_WIDTH - P3.View.width) + 80, this._score.y = 10, this._hiscore.x = .5 * h["default"].STAGE_WIDTH, this._hiscore.y = 60, this._pauseButton.x = .5 * (h["default"].STAGE_WIDTH + P3.View.width) - 100, this._pauseButton.y = 100 } }, { key: "_createScorePanel", value: function(e) { this._score = new PIXI.Container, this._score.visible = !1, this.addChild(this._score); var t = new PIXI.Sprite(h["default"].assets.texture("minigame_generic_panel"));
                        this._score.addChild(t); var i = new PIXI.Sprite(h["default"].assets.texture(e));
                        this._score.addChild(i), webfont ? (this._score.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "left", fill: 16777215 }), this._score.label.x = 110, this._score.label.y = 60, this._score.label.anchor.set(.5), this._score.addChild(this._score.label)) : (this._score.label = new PIXI.extras.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), this._score.label.x = 110, this._score.label.y = 66, this._score.label.anchor.set(.5), this._score.addChild(this._score.label)) } }, { key: "setScore", value: function(e) { this._score.visible = !0, this._score.label.text = "" + e } }, { key: "_createHiScorePanel", value: function() { this._hiscore = new PIXI.Container, this._hiscore.visible = !1, this.addChild(this._hiscore); var e = new PIXI.Sprite(h["default"].assets.texture("minigame_generic_panel"));
                        e.anchor.set(.5), this._hiscore.addChild(e); var t = new PIXI.Sprite(h["default"].assets.texture("minigame_icon_best"));
                        t.anchor.set(.5), this._hiscore.addChild(t), webfont ? (this._hiscore.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "center", fill: 16777215 }), this._hiscore.label.y = 15, this._hiscore.label.anchor.set(.5), this._hiscore.addChild(this._hiscore.label)) : (this._hiscore.label = new PIXI.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), this._hiscore.label.y = 18, this._hiscore.label.anchor.set(.5), this._hiscore.addChild(this._hiscore.label)) } }, { key: "setHiScore", value: function(e) { this._hiscore.visible = !0, this._hiscore.label.text = e.toString() } }, { key: "_createPauseButton", value: function() { var e = h["default"].assets,
                            t = new P3.ButtonStates;
                        t.normal = e.texture("btn_primary_small_off"), t.over = e.texture("btn_primary_small_over"), t.down = e.texture("btn_primary_small_over"), t.icon = e.texture("icon_help"), this._pauseButton = new P3.Button(t), this.addChild(this._pauseButton) } }, { key: "pauseButton", get: function() { return this._pauseButton } }]), t }(PIXI.Container);
        i["default"] = c, P3.createSprite = r, P3.simpleText = l, h["default"].matrix = function(e, t, i) { for (var n = [], a = 0; a < e; a++) { for (var o = [], s = 0; s < t; s++) o[s] = i;
                n[a] = o } return n }, h["default"].array = function(e, t) { for (var i = [], n = 0; n < e; n++) i.push(t); return i }, h["default"].collisionOBB = function(e, t, i, n, a) { return (!i || i <= 0) && (i = 1), e = e.getBounds(), t = t.getBounds(), n = n || 1, a = a || 1, !(t.x > e.x + e.width * i * n || t.x + t.width * i * n < e.x || t.y > e.y + e.height * i * a || t.y + t.height * i * a < e.y) }, h["default"].distance = function(e, t, i, n) { return Math.sqrt((e - i) * (e - i) + (t - n) * (t - n)) }, h["default"].sortDists = function(e, t) {
            function i(n, a) {
                function o(t, i) { var n = e[t];
                    e[t] = e[i], e[i] = n }

                function s() { var i = e[n],
                        s = n;
                    o(s, a); for (var r = n; r < a; r++) !t && e[r].dist < i.dist ? o(s++, r) : t && e[r].dist > i.dist && o(s++, r); return o(s, a), s } if (n < a) { var r = s();
                    i(n, r - 1), i(r + 1, a) } } var n = e.length - 1; return i(0, n), e } }, { "../../Common": 13 }],
    81: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];

                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Actor"),
            _ = n(u),
            h = e("../../Common"),
            c = n(h),
            d = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return i._view = new PIXI.spine.Spine(c["default"].assets.spineData("ivandoe_front")), i._view.scale.set(.75, .75), i._view.skeleton.setToSetupPose(), i._view.skeleton.setSkin(null), i._view.skeleton.setSkinByName("standard"), i._view.state.setAnimation(0, "idle_think", !0), i._view.autoUpdate = !1, i._view.update(0), i._view.stateData.defaultMix = .15, i.addChild(i._view), i._startScale = i._view.scale.x, i._skipFrame = 0, i._lanes = e, i._finish = !1, i._changeTime = 3e3, i._startTime = Date.now(), i._target = i._lanes[1], i._dx = 0, i._moveSpeed = 200, i } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this._view.x = .5 * c["default"].STAGE_WIDTH, this._view.y = P3.View.height + 350 } }, { key: "updateView", value: function() { this._skipFrame++ % 2 === 0 && this._view.update(deltaTime) } }, { key: "update", value: function() { return } }, { key: "hurt", value: function() { this._finish || (this._view.state.setAnimation(0, "hit_head", !1), this._finish = !0, c["default"].audio.playSound("sfx_squirrel_acorn_hit_ivandoe_00"), c["default"].audio.playSound("vo_ivandoe_strain_00"), TweenMax.killTweensOf(this._view)) } }, { key: "laneChanger", value: function() { return } }]), t }(_["default"]);
        i["default"] = d }, { "../../Actor": 4, "../../Common": 13 }],
    82: [function(e, t, i) {
        "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 });
        var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("../../Actor"),
            u = n(l),
            _ = e("../../Common"),
            h = n(_),
            c = function(e) {
                function t(e) {
                    a(this, t);
                    var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    i._onDodge = e.onDodge, i._onDodgeFail = e.onDodgeFail, i._onCheckHit = e.onCheckHit, i._view = new PIXI.spine.Spine(h["default"].assets.spineData("bearface")), i._view.scale.set(.4, .4), i._view.skeleton.setToSetupPose(), i._view.autoUpdate = !1, i._view.update(0), i.position.set(.5 * h["default"].STAGE_WIDTH + 50, P3.View.height + 50), i.addChild(i._view), i._view.state.setAnimation(0, "idle" + P3.math.randomInt(1, 3), !1);
                    var n = i._view.stateData;
                    return n.setMix("idle1", "idle_ready_left1", .1), n.setMix("idle2", "idle_ready_left1", .1), n.setMix("idle3", "idle_ready_left1", .1), n.setMix("idle1", "idle_ready_right1", .1), n.setMix("idle2", "idle_ready_right1", .1),
                        n.setMix("idle3", "idle_ready_right1", .1), n.defaultMix = .2, i._startX = i._view.x, i.state = "init", i.attackDir = "none", i._maxDelay = 2.5, i._minDelay = 1, i.changeState(i.state), i.gameover = !1, i._isWindup = !1, i._minSwitchTime = 2.5, i._maxSwitchTime = 3, i._switchDelay = P3.math.random(i._minSwitchTime, i._maxSwitchTime), i._minWindupTime = 1.5, i._maxWindupTime = 4, i._windupLength = P3.math.random(i._minWindupTime, i._maxWindupTime), i._minSignalLength = 1.5, i._maxSignalLength = 2, i._signalLength = P3.math.random(i._minSignalLength, i._maxSignalLength), i._skipFrame = 0, i._view.state.addListener({ event: function(e, t) { return i._onAnimationEvent(e, t) } }), i.minDistractedTime = .5, i.maxDistractedTime = 1, i.minIdleTime = 2, i.maxIdleTime = 4, i.attackTimeScale = .25, i.round = 0, i.swipes = -1, i
                }
                return s(t, e), r(t, [{ key: "begin", value: function() { this._view.state.setAnimation(0, "idle" + P3.math.randomInt(1, 3), !1), this.changeState("idle") } }, { key: "update", value: function(e) { this._inTutorial || this._skipFrame++ % 2 !== 0 ? this._inTutorial && console.log("in tut") : this.isAttacking ? this._view.update(2 * e * this.attackTimeScale) : this._view.update(2 * e) } }, { key: "tutorialSwipe", value: function() { var e = this;
                        this.isAttacking = !0, this.attackDir = "right", this.changeAnim("attack", !1), this._view.state.addAnimation(0, "idle" + P3.math.randomInt(1, 3), !0, 0), this.isTutorialSwipe = !0, delay(function() { e._inTutorial = !0, e.isAttacking = !1 }, .2) } }, { key: "tutorialDistracted", value: function() { var e = this;
                        this._view.state.setAnimation(0, "idle_distracted1", !0), this.state = "distracted", this.isTutorialDistract = !0, delay(function() { e._inTutorial = !0 }, .25) } }, { key: "changeState", value: function(e) { var t = this; if (!this.gameover && !this._inTutorial) switch (this.state = e, this.state) {
                            case "idle":
                                if (this.isTutorialSwipe || this.isTutorialDistract) return;
                                this.isAttacking = !1, this._view.state.addAnimation(0, "idle" + P3.math.randomInt(1, 3), !0, 0), this.round++, this.swipes = Math.ceil(.5 * this.round), this.attackCall = delay(function() { Math.random() < .95 ? (t.attackDir = Math.random() < .5 ? "left" : "right", t.changeState("attack")) : t.changeState("distracted") }, P3.math.random(this.minIdleTime, this.maxIdleTime)); break;
                            case "attack":
                                this.isAttacking = !0, h["default"].audio.playSound("sfx_bear_attack_" + this.attackDir), this.changeAnim("attack"); break;
                            case "distracted":
                                this._view.state.setAnimation(0, "idle_distracted1", !0), this.idleCall = delay(function() { t.changeState("idle") }, P3.math.random(this.minDistractedTime, this.maxDistractedTime)); break;
                            default:
                                console.warn("unknown bear state : " + this.state) } } }, { key: "attemptPoke", value: function() { return this.attackCall && this.attackCall.kill && this.attackCall.kill(), this.idleCall && this.idleCall.kill && this.idleCall.kill(), console.log("attempting poke"), this.isAttacking = !1, "distracted" === this.state ? (this._view.state.setAnimation(0, "idle_poked1", !1), this.changeState("idle"), !0) : (this._view.state.setAnimation(0, "idle_defend1", !1), this.changeState("idle"), !1) } }, { key: "changeAnim", value: function(e) { var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
                        this.view.state.setAnimation(0, "idle_" + e + "_" + this.attackDir + "1", t) } }, { key: "checkHit", value: function() { return this._onCheckHit(this.attackDir) } }, { key: "hitIvandoe", value: function() { this._view.state.setAnimation(0, "idle_attack_" + this.attackDir + "1_hit", !1), this._view.state.addAnimation(0, "idle" + P3.math.randomInt(1, 3), !0, 0), this._onDodgeFail(this.attackDir) } }, { key: "missIvandoe", value: function() { this._view.state.setAnimation(0, "idle_attack_" + this.attackDir + "1_miss", !1), this._view.state.addAnimation(0, "idle" + P3.math.randomInt(1, 3), !0, 0), this._onDodge() } }, { key: "_onAnimationEvent", value: function(e, t) { var i = this; switch (t.data.name) {
                            case "impact":
                                if ("attack" !== this.state) return;
                                console.error("impact"), this.swipes--, this.round % 2 === 0 && this.attackTimeScale < .5 && (this.attackTimeScale += .01), this.isAttacking = !1, this.checkHit() ? this.hitIvandoe() : (this.missIvandoe(), 0 === this.round || 0 === this.swipes ? delay(function() { i.changeState("idle") }, 1) : (this.attackDir = "left" === this.attackDir ? "right" : "left", delay(function() { i.changeState("attack") }, 1))); break;
                            default:
                                console.warn("unknown event name : " + t.data.name) } } }]), t
            }(u["default"]);
        i["default"] = c
    }, { "../../Actor": 4, "../../Common": 13 }],
    83: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function b(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : b(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Common"),
            _ = n(u),
            h = e("./Hud"),
            c = n(h),
            d = e("./Ivandoe"),
            p = (n(d), e("./Bear")),
            f = n(p),
            y = e("../../MinigameScene"),
            v = n(y),
            m = e("./../../Shake"),
            g = n(m),
            w = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    e._bgHolder = new PIXI.Container, e._primaryHolder = new PIXI.Container, e._uiHolder = new PIXI.Container, e._hud = new c["default"](e._uiHolder), e._bg = P3.createSprite("ep6_bearCheek_bg", e._bgHolder), e._bg.width = 1.05 * _["default"].STAGE_WIDTH, e._bg.scale.y = 1.05, e._ivandoe = new PIXI.spine.Spine(_["default"].assets.spineData("ivandoe_front")), e._ivandoe.scale.set(.75, .75), e._ivandoe.skeleton.setToSetupPose(), e._ivandoe.skeleton.setSkin(null), e._ivandoe.skeleton.setSkinByName("standard"), e._ivandoe.autoUpdate = !1, e._ivandoe.stateData.defaultMix = .2, e._ivandoe.state.setAnimation(0, "bear_ivan_idle", !0), e._ivandoeStartScale = e._ivandoe.scale.x; var i = { onDodge: function(t) { return e._onDodgeSucceeded(t) }, onDodgeFail: function(t) { return e._onDodgeFailed(t) }, onCheckHit: function(t, i) { return e._onCheckHit(t, i) } }; return e._bear = new f["default"](i), e._skipFrame = 0, e._inTut = !1, e._particles = null, e._particleHolder = new PIXI.Container, e._inputLocked = !0, e._isShake = !1, e._shakePrimary = new g["default"], e._shakeBg = new g["default"], e._isShake = !1, e._shakeTime = 0, e._shakeTimeEnd = 1, e._shakeStrength = new PIXI.Point(6, 1), e._pokeStart = null, e._pokeAttempts = 0, e } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this.initShake(), this._primaryHolder.addChild(this._bear, this._ivandoe), this._uiHolder.addChild(this._hud), this.addChild(this._bgHolder, this._primaryHolder, this._particleHolder, this._uiHolder), this._ivandoe.x = .5 * _["default"].STAGE_WIDTH, this._ivandoe.y = 1.5 * P3.View.height, this._hud.setScore(this.score), this._hud.setHiScore(this.highscore), this._hud.pauseButton.signals.click.add(this._onPauseButtonClick, this), this._bgHolder.interactive = !0, this._bgHolder.hitArea = new PIXI.Rectangle(0, 0, _["default"].STAGE_WIDTH, _["default"].STAGE_HEIGHT), this._bgHolder.mousedown = this._bgHolder.touchstart = this._onInput.bind(this), this._particles = this._initParticles(this._particleHolder); var e = new PIXI.Sprite(PIXI.Texture.EMPTY);
                        e.width = 245, e.height = 245, e.anchor.set(.5), this._primaryHolder.addChild(e), e.x = .5 * _["default"].STAGE_WIDTH, e.y = .5 * _["default"].STAGE_HEIGHT - 115, e.interactive = !0, e.mousedown = e.touchstart = this._onPokeAttempt.bind(this); var i = _["default"].assets,
                            n = i.json("particle_emitter_bear_ivandoe_dodge"),
                            a = new PIXI.particles.Emitter(this._particleHolder, [i.texture("particle_star_reward")], n);
                        a.emit = !1, this._dodgeEmitter = a, i = _["default"].assets, n = i.json("particle_emitter_bear_ivandoe_lose"), a = new PIXI.particles.Emitter(this._particleHolder, [i.texture("particle_star_reward")], n), a.emit = !1, this._loseEmitter = a, this._ivandoe.x = .5 * _["default"].STAGE_WIDTH - 200, this._ivandoe.x = .5 * _["default"].STAGE_WIDTH - 200 } }, { key: "initShake", value: function() { this._primaryHolder.pivot = new PIXI.Point(.5 * _["default"].STAGE_WIDTH, .5 * _["default"].STAGE_HEIGHT), this._bgHolder.pivot = new PIXI.Point(.5 * _["default"].STAGE_WIDTH, .5 * _["default"].STAGE_HEIGHT), this._primaryHolder.x = .5 * _["default"].STAGE_WIDTH, this._primaryHolder.y = .5 * _["default"].STAGE_HEIGHT, this._bgHolder.x = .5 * _["default"].STAGE_WIDTH, this._bgHolder.y = .5 * _["default"].STAGE_HEIGHT, this._shakePrimary.setTarget(this._primaryHolder), this._shakeBg.setTarget(this._bgHolder), this._shakeBg.setRotCentre(new PIXI.Point(.5 * _["default"].STAGE_WIDTH, .5 * _["default"].STAGE_HEIGHT)), this._shakePrimary.setRotCentre(new PIXI.Point(.5 * _["default"].STAGE_WIDTH, .5 * _["default"].STAGE_HEIGHT)), this._shakeBg.useRotation = !0, this._shakePrimary.useRotation = !0 } }, { key: "destroy", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "resize", value: function() { this.x = .5 * (P3.View.width - _["default"].STAGE_WIDTH), this._hud.resize() } }, { key: "update", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "update", this).call(this), this._particles.update(deltaTime), this._loseEmitter.update(deltaTime), this._dodgeEmitter.update(deltaTime), this._skipFrame++ % 2 === 0 && this._ivandoe.update(2 * deltaTime), this._bear.update(deltaTime), this._shakePrimary.update(deltaTime), this._shakeBg.update(deltaTime), this._running && (this._isShake && (this._shakeTime += deltaTime, this._shakeTime >= this._shakeTimeEnd && (this._shakeTime = 0, this._isShake = !1)), this._inputLocked || (_["default"].input.isKeyPressed(32) && this._onPokeAttempt(), _["default"].input.isKeyPressed(37) && this._onInput({ data: { global: { x: .5 * P3.View.width - 100, y: 0 } } }), _["default"].input.isKeyPressed(39) && this._onInput({ data: { global: { x: .5 * P3.View.width + 100, y: 0 } } }))) } }, { key: "appear", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "appear", this).call(this), this._isFirstPlay() && this.signals.pause.dispatch(this, !0) } }, { key: "shake", value: function() { this._shakePrimary.trauma = .5, this._shakeBg.trauma = .5 } }, { key: "start", value: function() { _["default"].audio.playMusic("music_loop_dramatic_action_01"), this._running = !0, this._inputLocked = !1, this._bear.begin(); var e = this._isFirstPlay();
                        e ? this._tutorial() : this._beginGame() } }, { key: "end", value: function() { this._running && (l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "end", this).call(this), this._hud.setHiScore(this.highscore), this.playEndVO(this._score), this._running = !1, _["default"].audio.stopMusic(), _["default"].audio.playSound("music_fail_stab_00")) } }, { key: "_beginGame", value: function() { var e = this;
                        _["default"].audio.playSound("sfx_bear_angry_00"), this._ivandoe.state.setAnimation(0, "bear_ivan_poke", !0), this._ivandoe.state.addAnimation(0, "bear_ivan_idle", !0, 0), delay(function() { e._bear.view.state.setAnimation(0, "idle_missed1", !0), e._bear.view.state.addAnimation(0, "idle" + P3.math.randomInt(1, 3), !0, 0), delay(function() { e._inTut || (e._inputLocked = !1) }, .75, e) }, .45, this) } }, { key: "_tutorial", value: function() { this._inTut = !0, this._initTutorialPointer(), this._animatePointer(new PIXI.Point(.5 * _["default"].STAGE_WIDTH + 275, P3.View.height - 225)), this._bear.tutorialSwipe() } }, { key: "_tutorial2", value: function() { var e = this;
                        this.doneTut2 = !0, this._bear.isTutorialSwipe = !1, this._animatePointer({ x: .5 * _["default"].STAGE_WIDTH, y: .5 * _["default"].STAGE_HEIGHT - 185 }), delay(function() { e._bear.tutorialDistracted() }, 1) } }, { key: "_initParticles", value: function(e) { var t = _["default"].assets,
                            i = t.json("particle_emitter_fairdust_01");
                        i.spawnRect.w = _["default"].STAGE_WIDTH, i.spawnRect.h = P3.View.height; var n = new PIXI.particles.Emitter(e, [t.texture("particle_fairy_dust_00"), t.texture("particle_fairy_dust_01")], i); return n.emit = !0, n } }, { key: "_onCheckHit", value: function(e, t) { return t ? { attackDir: e, dodgeDir: this._dodgeDir } : (console.log("dir", e), console.warn("ivandoe x pos", this._ivandoe.x + " : " + .5 * _["default"].STAGE_WIDTH), "left" === e ? this._ivandoe.x > .5 * _["default"].STAGE_WIDTH + 115 : this._ivandoe.x < .5 * _["default"].STAGE_WIDTH - 115) } }, { key: "_onInput", value: function(e) { var t = this; if (this._running && !this._inputLocked) { console.log(e.data.global.x); var i = e.data.global.x < .5 * P3.View.width ? -200 : 200;
                            TweenMax.to(this._ivandoe, .15, { x: .5 * _["default"].STAGE_WIDTH + i, ease: Sine.easeInOut, onComplete: function() { t._dodgeDir = "" } }), this._inTut && !this.doneTut2 && (this._bear._inTutorial = !1, this._tutorial2()), i > 0 ? (this._ivandoe.scale.x = -this._ivandoeStartScale, this._dodgeDir = "right") : (this._ivandoe.scale.x = this._ivandoeStartScale, this._dodgeDir = "left") } } }, { key: "_onPokeAttempt", value: function() { var e = this; if (this._bear._inTutorial = !1, !this.doneTut2 || this._isPoking) return void console.log("skippinh poke");
                        this._isPoking = !0, delay(function() { e._isPoking = !1 }, 1), _["default"].audio.playSound("sfx_swipe_0" + P3.math.randomInt(0, 1)), this._ivandoe.state.setAnimation(0, "bear_ivan_poke", !1), this._ivandoe.state.addAnimation(0, "bear_ivan_idle", !0, 0); var t = this._bear.attemptPoke(); if (console.log("attempt poke"), console.log(t), t) { this._score += 3, this._hud.setScore(this.score), this._pokeAttempts = 0; var i = new PIXI.Container,
                                n = _["default"].assets,
                                a = n.json("particle_emitter_gnome_hit"),
                                o = new PIXI.particles.Emitter(i, [n.texture("particle_star_reward")], a);
                            this._primaryHolder.addChild(i), i.x = .5 * _["default"].STAGE_WIDTH, i.y = .5 * _["default"].STAGE_HEIGHT, o.emit = !0, o.autoUpdate = !0, o.playOnceAndDestroy() } else { this._pokeAttempts++; var s = "attack";
                            this._pokeAttempts > 2 && (this._ivandoe.x > .5 * _["default"].STAGE_WIDTH ? (this._bear.view.state.setAnimation(0, "idle_" + s + "_left1", !1), this._onDodgeFailed("left")) : (this._bear.view.state.setAnimation(0, "idle_" + s + "_right1", !1), this._onDodgeFailed("right"))) } this._bear.isTutorialDistract && (this._bear.isTutorialDistract = !1, this._bear.isTutorialSwipe = !1, this._bear._inTutorial = !1, this._killPointer(), this._bear.changeState("idle")) } }, { key: "_onDodgeSucceeded", value: function() { this._pokeAttempts = 0, this._score++, this._hud.setScore(this.score) } }, { key: "_onDodgeFailed", value: function(e) { var t = this;
                        this._ending || (console.log(this._ivandoe.x), console.log(.5 * _["default"].STAGE_WIDTH), console.log("on left", this._ivandoe.x < .5 * _["default"].STAGE_WIDTH), console.log("game ending"), this._bear.gameover = !0, this._ending = !0, TweenMax.killTweensOf(this._ivandoe), "left" === e ? TweenMax.to(this._ivandoe, .45, { y: this._ivandoe.y + 400, x: this._ivandoe.x - 400, onComplete: function() { t.end() }, onStart: function() { t.shake(), t._ivandoe.state.setAnimation(0, "bear_ivan_hit", !1), _["default"].audio.playSound("sfx_bear_hit_ivandoe"), t._loseEmitter.updateOwnerPos(t._ivandoe.x, _["default"].STAGE_HEIGHT - 225), t._loseEmitter.emit = !0 } }) : TweenMax.to(this._ivandoe, .45, { y: this._ivandoe.y + 400, x: this._ivandoe.x + 400, onComplete: function() { t.end() }, onStart: function() { t.shake(), t._ivandoe.state.setAnimation(0, "bear_ivan_hit", !1), _["default"].audio.playSound("sfx_bear_hit_ivandoe"), t._loseEmitter.updateOwnerPos(t._ivandoe.x, _["default"].STAGE_HEIGHT - 225), t._loseEmitter.emit = !0 } })) } }]), t }(v["default"]);
        i["default"] = w }, { "../../Common": 13, "../../MinigameScene": 28, "./../../Shake": 35, "./Bear": 82, "./Hud": 84, "./Ivandoe": 85 }],
    84: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("../../Common"),
            u = n(l),
            _ = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return i._holder = e, i._pauseButton = null, i.init(), i } return s(t, e), r(t, [{ key: "init", value: function() { this._createScorePanel("minigame_icon_ep6_1"), this._createHiScorePanel(), this._createPauseButton() } }, { key: "resize", value: function() { this._score.x = .5 * (u["default"].STAGE_WIDTH - P3.View.width) + 80, this._score.y = 10, this._hiscore.x = .5 * u["default"].STAGE_WIDTH, this._hiscore.y = 60, this._pauseButton.x = .5 * (u["default"].STAGE_WIDTH + P3.View.width) - 100, this._pauseButton.y = 100 } }, { key: "_createScorePanel", value: function(e) { this._score = new PIXI.Container, this._score.visible = !1, this.addChild(this._score); var t = new PIXI.Sprite(u["default"].assets.texture("minigame_generic_panel"));
                        this._score.addChild(t); var i = new PIXI.Sprite(u["default"].assets.texture(e));
                        this._score.addChild(i), webfont ? (this._score.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "left", fill: 16777215 }), this._score.label.x = 110, this._score.label.y = 60, this._score.label.anchor.set(.5), this._score.addChild(this._score.label)) : (this._score.label = new PIXI.extras.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), this._score.label.x = 110, this._score.label.y = 66, this._score.label.anchor.set(.5), this._score.addChild(this._score.label)) } }, { key: "setScore", value: function(e) { this._score.visible = !0, this._score.label.text = "" + e } }, { key: "_createHiScorePanel", value: function() { this._hiscore = new PIXI.Container, this._hiscore.visible = !1, this.addChild(this._hiscore); var e = new PIXI.Sprite(u["default"].assets.texture("minigame_generic_panel"));
                        e.anchor.set(.5), this._hiscore.addChild(e); var t = new PIXI.Sprite(u["default"].assets.texture("minigame_icon_best"));
                        t.anchor.set(.5), this._hiscore.addChild(t), webfont ? (this._hiscore.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "center", fill: 16777215 }), this._hiscore.label.y = 15, this._hiscore.label.anchor.set(.5), this._hiscore.addChild(this._hiscore.label)) : (this._hiscore.label = new PIXI.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), this._hiscore.label.y = 18, this._hiscore.label.anchor.set(.5), this._hiscore.addChild(this._hiscore.label)) } }, { key: "setHiScore", value: function(e) { this._hiscore.visible = !0, this._hiscore.label.text = e.toString() } }, { key: "_createPauseButton", value: function() { var e = u["default"].assets,
                            t = new P3.ButtonStates;
                        t.normal = e.texture("btn_primary_small_off"), t.over = e.texture("btn_primary_small_over"), t.down = e.texture("btn_primary_small_over"), t.icon = e.texture("icon_help"), this._pauseButton = new P3.Button(t), this.addChild(this._pauseButton) } }, { key: "pauseButton", get: function() { return this._pauseButton } }]), t }(PIXI.Container);
        i["default"] = _ }, { "../../Common": 13 }],
    85: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Actor"),
            _ = n(u),
            h = e("../../Common"),
            c = n(h),
            d = function(e) {
                function t(e, i, n, s) { a(this, t); var r = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return r._end = e, r._hitFunc = n, r._hud = i, r._shake = s, r._view = new PIXI.spine.Spine(c["default"].assets.spineData("ivandoe_front")), r._view.scale.set(.75, .75), r._view.skeleton.setToSetupPose(), r._view.skeleton.setSkin(null), r._view.skeleton.setSkinByName("standard"), r._view.autoUpdate = !1, r._view.stateData.defaultMix = .15, r._view.state.setAnimation(0, "bear_ivan_idle", !0), r._view.update(0), r.addChild(r._view), r._startScale = r._view.scale.x, r._currPlace = "centre", r._places = { left: -175, right: 175 }, r._inputLocked = !1, r._bear = null, r.init(), r } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this.x = .5 * c["default"].STAGE_WIDTH, this._view.y = 1.5 * P3.View.height } }, { key: "update", value: function() {} }, { key: "checkHit", value: function(e) { var t = this; if (this._inputLocked = !0, delay(function() { t._inputLocked = !1 }, .5, this), "centre" === this._currPlace || this._currPlace === e) return c["default"].audio.playSound("sfx_bear_hit_ivandoe"), this._view.state.setAnimation(0, "bear_ivan_hit", !1), "left" === e && (this._view.scale.x = -this._view.scale.x), this._shake(), delay(function() { t._end() }, 1, this), "gameover"; var i = ""; return Math.random() < .5 ? (i = "poke", this._hitFunc()) : (i = "dodge", this._hitFunc()), i } }, { key: "input", value: function(e) {} }, { key: "setBearAttacking", value: function(e) { e === !1 && (this._currPlace = "centre") } }, { key: "places", get: function() { return this._places } }, { key: "bear", set: function(e) { this._bear = e } }]), t }(_["default"]);
        i["default"] = d }, { "../../Actor": 4, "../../Common": 13 }],
    86: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("../../Actor"),
            u = n(l),
            _ = e("../../Common"),
            h = n(_),
            c = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._view = new PIXI.spine.Spine(h["default"].assets.spineData("bert_front")), e._view.scale.set(.4, .4), e._view.skeleton.setToSetupPose(), e._view.state.setAnimation(0, "idle_fly", !0), e._view.stateData.defaultMix = .15, e._view.autoUpdate = !1, e._view.update(0), e.addChild(e._view), e._target = .5 * P3.View.width, e._dx = 0, e._moveSpeed = 225, e._skipFrame = 0, e._startTime = Date.now(), e._animInterval = P3.math.random(3e3, 6e3), e._targets = [.5 * h["default"].STAGE_WIDTH - 225, .5 * h["default"].STAGE_WIDTH + 225], e._target = e._targets[1], e._dir = 1, e.init(), e } return s(t, e), r(t, [{ key: "init", value: function() { this._view.state.addListener({ event: this._onAnimationEvent.bind(this) }) } }, { key: "update", value: function() { var e = this;
                        this._skipFrame++ % 2 === 0 && this._view.update(2 * deltaTime); var t = Date.now(); if (t > this._startTime + this._animInterval && (this._startTime = t, this._switchAnim()), this._target) { var i = 0;
                            this.x < this._target ? (i = this._moveSpeed, 1 !== this._dir && (this._dir = 1, this._target = this._targets[1], this._view.scale.x = -this._view.scale.x, this._target = null, delay(function() { e._target = e._targets[1] }, 2, this))) : this.x > this._target && (i = -this._moveSpeed, this._dir !== -1 && (this._dir = -1, this._target = this._targets[0], this._view.scale.x = -this._view.scale.x, this._target = null, delay(function() { e._target = e._targets[0] }, 2, this))), this._dx = i * deltaTime, this.x += this._dx } } }, { key: "_switchAnim", value: function() { var e = ["fly_determined", "fly_determined_fast", "idle_fly"];
                        this._view.state.setAnimation(0, e[P3.math.randomInt(0, e.length - 1)], !0), this._animInterval = P3.math.random(3e3, 6e3) } }, { key: "_playFlapSFX", value: function() { h["default"].audio.playSound(["sfx_flap_00", "sfx_flap_01"]) } }, { key: "_onAnimationEvent", value: function(e, t) { "sfx_flap" === t.data.name && this._playFlapSFX() } }, { key: "target", set: function(e) { this._target = e } }]), t }(u["default"]);
        i["default"] = c }, { "../../Actor": 4, "../../Common": 13 }],
    87: [function(e, t, i) {
        "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 });
        var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function k(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : k(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Common"),
            _ = n(u),
            h = e("./Horse"),
            c = n(h),
            d = e("./Hud"),
            p = n(d),
            f = e("./Ivandoe"),
            y = n(f),
            v = e("./Bert"),
            m = n(v),
            g = e("../../MinigameScene"),
            w = n(g),
            b = e("../../Shake"),
            P = n(b),
            x = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._interactArea = null, e._balance = 0, e._balanceVelocity = 0, e._tilt = .1, e._tiltTimer = 0, e._tiltScale = .5, e._counterTilt = 5, e._ivandoe = null, e._horse = null, e._startTime = -9007199254740991, e._bounceLoopStart = -9007199254740991, e._touch = null, e._particles = null, e._particleHolder = new PIXI.Container, e._tutPos = -1, e._isShake = !1, e._shakeTime = 0, e._shakeTimeEnd = 1, e._shakeStrength = new PIXI.Point(6, 0), e._shake1 = new P["default"], e._shake2 = new P["default"], e._speedUp = 0, e._speedUpTimer = 15, e._isPause = !1, e }
                return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this); var e = _["default"].assets,
                            i = new PIXI.Sprite(e.texture("ep2_bronco_bg", "jpg"));
                        i.width = 1.05 * _["default"].STAGE_WIDTH, i.scale.y = 1.05, this._holder = new PIXI.Container, this.addChild(this._holder), this._holder.addChild(i); var n = new PIXI.Container;
                        this.addChild(n), this._holder2 = n, this._horse = new c["default"], this._horse.x = .5 * _["default"].STAGE_WIDTH, this._horse.y = .5 * _["default"].STAGE_HEIGHT, n.addChild(this._horse), this._ivandoe = new y["default"], this._ivandoe.x = .5 * _["default"].STAGE_WIDTH, this._ivandoe.y = .5 * _["default"].STAGE_HEIGHT, n.addChild(this._ivandoe), this._bert = new m["default"], this._bert.x = .5 * _["default"].STAGE_WIDTH - 150, this._bert.y = 205, this.addChild(this._bert, this._particleHolder), this._interactArea = new PIXI.Graphics, this._interactArea.interactive = !0, this._interactArea.hitArea = new PIXI.Rectangle(0, 0, P3.View.width, P3.View.height), this._interactArea.pointerdown = this._interactArea.touchstart = this._onPointerDown.bind(this), this._interactArea.pointerup = this._interactArea.touchend = this._interactArea.touchendoutside = this._onPointerUp.bind(this), this.addChild(this._interactArea), this._hud = new p["default"], this._hud.setScore(this._score), this._hud.setHiScore(_["default"].save.getMinigameHighscore(this.id)), this.addChild(this._hud), this._hud.pauseButton.signals.click.add(this._onPauseButtonClick, this), this._particles = this._initParticles(this._particleHolder); var a = this._horse.view.skeleton.findBone("barrel");
                        a.data.rotation = 8 * -this._balance - 180, this._shake1.setTarget(this._holder), this._shake2.setTarget(this._holder2), this._shake1.setRotCentre(new PIXI.Point(.5 * _["default"].STAGE_WIDTH, .5 * _["default"].STAGE_HEIGHT)), this._shake2.setRotCentre(new PIXI.Point(.5 * _["default"].STAGE_WIDTH, .5 * _["default"].STAGE_HEIGHT)), this._shake1.useRotation = !0, this._shake2.useRotation = !0, this._shake1.maxRot = .02 * Math.PI, this._shake2.maxRot = .02 * Math.PI, this._shake1.maxOffsetX = 30, this._shake1.maxOffsetY = 30, this._shake2.maxOffsetX = 30, this._shake2.maxOffsetY = 30, this._holder.pivot = new PIXI.Point(.5 * _["default"].STAGE_WIDTH, .5 * _["default"].STAGE_HEIGHT), this._holder2.pivot = new PIXI.Point(.5 * _["default"].STAGE_WIDTH, .5 * _["default"].STAGE_HEIGHT), this._holder.x = .5 * _["default"].STAGE_WIDTH, this._holder2.x = .5 * _["default"].STAGE_WIDTH, this._holder.y = .5 * _["default"].STAGE_HEIGHT, this._holder2.y = .5 * _["default"].STAGE_HEIGHT } }, { key: "destroy", value: function() { this._interactArea.pointerdown = null, this._interactArea.pointerup = null, l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "resize", value: function() { this.x = .5 * (P3.View.width - _["default"].STAGE_WIDTH), this._interactArea.hitArea.x = .5 * (_["default"].STAGE_WIDTH - P3.View.width), this._interactArea.hitArea.width = P3.View.width, this._hud.resize() } }, { key: "appear", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "appear", this).call(this), this._isFirstPlay() && this.signals.pause.dispatch(this, !0) } }, { key: "update", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "update", this).call(this); var e = deltaTime; if (this._ivandoe.update(e + this._speedUp), this._horse.update(e + this._speedUp), this._bert.update(e), this._particles.update(e), this._shake1.update(e), this._shake2.update(e), this._running) { var i = Date.now();
                            i > this._bounceLoopStart + 400 && (this._bounceLoopStart = i, _["default"].audio.playSound(["sfx_bounce_00", "sfx_bounce_01", "sfx_bounce_03", "sfx_bounce_04", "sfx_bounce_05", "sfx_bounce_06"])) } if (!this._grace && !this._gameover && !this._inTut) { this._updateScore(), this._hud.leftArrow.visible = !1, this._hud.rightArrow.visible = !1, this._touch && (this._touch.x < .5 * P3.View.width ? (this._balanceVelocity -= this._counterTilt * this._tiltScale * e, this._hud.leftArrow.visible = !0) : this._touch.x > .5 * P3.View.width && (this._balanceVelocity += this._counterTilt * this._tiltScale * e, this._hud.rightArrow.visible = !0)), this._balanceVelocity += this._tilt * e, this._balanceVelocity *= .999, this._balance += this._balanceVelocity * e, this._hud.setBalance(this._balance), this._ivandoe.setBalancePosition(this._balance), this._tiltTimer <= 0 ? (this._tiltTimer = 4 * Math.random(), this._tilt = P3.math.random(-1.24 * this._tiltScale, 1.24 * this._tiltScale)) : this._tiltTimer -= e, this._speedUpTimer <= 0 ? this._speedUpTimer = 15 : this._speedUpTimer -= e, this._tiltScale += .024 * e, this._speedUp < .005 && (this._speedUp += 8e-5 * e); var n = this._horse.view.skeleton.findBone("barrel");
                            n.data.rotation = 8 * -this._balance - 180, Math.abs(this._balance) >= 1 && (this._gameover = !0, this._ivandoe.view.state.setAnimation(0, "death_throw_1", !1), delay(this.end.bind(this), 1, this), TweenMax.to(this._ivandoe.scale, .5, { x: 1.25, y: 1.25, ease: Power0.easeNone }), this.thrownAway()) } this._isShake } }, { key: "shake", value: function() { this._shake1.trauma = .5, this._shake2.trauma = .5 } }, {
                    key: "thrownAway",
                    value: function() {
                        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1,
                            t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0;
                        _["default"].audio.playSound("sfx_bronco_throw_00"), _["default"].audio.playSound("vo_ivandoe_yell_01"), this.shake(), this._flightTimeline = new TimelineMax({
                            delay: t
                        });
                        var i = this._ivandoe.y;
                        this._flightTimeline.to(this._ivandoe, 1 * e / 3, { y: i - 140, ease: Sine.easeOut }, 0), this._flightTimeline.to(this._ivandoe, 2 * e / 3, { y: i + 1200, ease: Sine.easeIn }, e / 3), this._flightTimeline.to(this._ivandoe.scale, e, { x: 2, y: 2, ease: Sine.easeInOut }, 0)
                    }
                }, { key: "pause", value: function() { this._broncoLoop && this._broncoLoop.stop() } }, { key: "resume", value: function() { this._broncoLoop && this._broncoLoop.play() } }, { key: "start", value: function() { this._running = !0, this._horse.view.state.setAnimation(0, "running", !0), this._ivandoe.view.state.setAnimation(0, "rodeo_bounce_centre", !0), this._bounceLoopStart = this._startTime = Date.now(), this._isFirstPlay() ? this._tutorial() : l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "start", this).call(this), _["default"].audio.playMusic("music_loop_frantic_fun_00"), this._broncoLoop = _["default"].audio.playSound("sfx_bronco_loop_00", { loop: !0 }) } }, { key: "end", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "end", this).call(this), this.playEndVO(this._score), _["default"].audio.stopMusic(), _["default"].audio.playSound("music_fail_stab_01"), this._hud.setHiScore(this.highscore), this._broncoLoop.stop() } }, { key: "_tutorial", value: function() { var e = this;
                        this._tutPos = 0, this._initTutorialPointer(this), delay(function() { e._inTut = !0; var t = 35 * Math.min(1, Math.max(-1, e._balance)) * .5,
                                i = { x: .5 * _["default"].STAGE_WIDTH, y: .5 * P3.View.height };
                            Math.sign(t) === -1 ? i.x += 275 : i.x -= 275, e._animatePointer(i) }, 1, this) } }, { key: "_updateScore", value: function() { var e = Date.now();
                        e > this._startTime + 1e3 && (this._startTime = e, this._hud.setScore(++this._score)) } }, { key: "_onPointerDown", value: function(e) { var t = this;
                        this._touch = e.data.getLocalPosition(_["default"].stage), this._inTut && this._tutPos < 1 ? (this._killPointer(), this._inTut = !1, delay(function() { t._tutPos++, t._inTut = !0; var e = 35 * Math.min(1, Math.max(-1, t._balance)) * .5,
                                i = { x: .5 * _["default"].STAGE_WIDTH, y: .5 * P3.View.height };
                            Math.sign(e) === -1 ? i.x += 275 : i.x -= 275, t._animatePointer(i) }, .5, this)) : this._tutorialPointer && (this._killPointer(), this._inTut = !1) } }, { key: "_onPointerMove", value: function(e) { this._touch = e.data.getLocalPosition(_["default"].stage) } }, { key: "_onPointerUp", value: function(e) { this._touch = null } }, { key: "_initParticles", value: function(e) { var t = _["default"].assets,
                            i = t.json("particle_emitter_fairdust_01");
                        i.spawnRect.w = _["default"].STAGE_WIDTH, i.spawnRect.h = P3.View.height; var n = new PIXI.particles.Emitter(e, [t.texture("particle_fairy_dust_00"), t.texture("particle_fairy_dust_01")], i); return n.emit = !0, n } }]), t
            }(w["default"]);
        i["default"] = x
    }, { "../../Common": 13, "../../MinigameScene": 28, "../../Shake": 35, "./Bert": 86, "./Horse": 88, "./Hud": 89, "./Ivandoe": 90 }],
    88: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Actor"),
            _ = n(u),
            h = e("../../Common"),
            c = n(h),
            d = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    e._skipFrame = 0; var i = c["default"].assets,
                        n = new PIXI.Container; return e.addChild(n), e._view = new PIXI.spine.Spine(i.spineData("bronco_horse")), e._view.scale.set(.4, .4), e._view.skeleton.setToSetupPose(), e._view.skeleton.setSkin(null), e._view.stateData.defaultMix = .15, e._view.autoUpdate = !1, e._view.update(0), n.addChild(e._view), e.faceDirection(1), e } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this._view.state.setAnimation(0, "idle", !0) } }, { key: "destroy", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "update", value: function(e) { this._skipFrame++ % 2 === 0 && this._view.update(2 * e) } }]), t }(_["default"]);
        i["default"] = d }, { "../../Actor": 4, "../../Common": 13 }],
    89: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("../../Common"),
            u = n(l),
            _ = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._balanceBar = null, e._scoreLabel = null, e._pauseButton = null, e.init(), e } return s(t, e), r(t, [{ key: "init", value: function() { this._createScorePanel("minigame_icon_ep2_2"), this._createHiScorePanel(), this._createBalanceBar(), this._createPauseButton(), this.setBalance(0) } }, { key: "resize", value: function() { this._score.x = .5 * (u["default"].STAGE_WIDTH - P3.View.width) + 80, this._score.y = 10, this._hiscore.x = .5 * u["default"].STAGE_WIDTH, this._hiscore.y = 60, this._pauseButton.x = .5 * (u["default"].STAGE_WIDTH + P3.View.width) - 100, this._pauseButton.y = 100 } }, { key: "_createBalanceBar", value: function() { var e = u["default"].assets;
                        this._balanceBar = new PIXI.Container, this._balanceBar.x = .5 * u["default"].STAGE_WIDTH, this._balanceBar.y = 640, this.addChild(this._balanceBar), this._balanceBar.bg = new PIXI.Sprite(e.texture("balance_bar")), this._balanceBar.bg.anchor = new PIXI.Point(.5, .5), this._balanceBar.addChild(this._balanceBar.bg); var t = new PIXI.Sprite(e.texture("balance_bar_arrow"));
                        t.anchor.set(.5), this._balanceBar.addChild(t); var i = new PIXI.Sprite(e.texture("balance_bar_arrow"));
                        i.anchor.set(.5), this._balanceBar.addChild(i), this._balanceBar.leftFill = t, this._balanceBar.rightFill = i, t.x = .5 * -this._balanceBar.width + 30, t.y = -45, t.scale.x = -1, i.x = .5 * this._balanceBar.width - 30, i.y = -45, t.visible = i.visible = !1, this._balanceBar.indicator = new PIXI.Sprite(e.texture("balance_neddle")), this._balanceBar.indicator.anchor = new PIXI.Point(.5, .5), this._balanceBar.addChild(this._balanceBar.indicator) } }, { key: "_createPauseButton", value: function() { var e = u["default"].assets,
                            t = new P3.ButtonStates;
                        t.normal = e.texture("btn_primary_small_off"), t.over = e.texture("btn_primary_small_over"), t.down = e.texture("btn_primary_small_over"), t.icon = e.texture("icon_help"), this._pauseButton = new P3.Button(t), this.addChild(this._pauseButton) } }, { key: "_createScorePanel", value: function(e) { this._score = new PIXI.Container, this._score.visible = !1, this.addChild(this._score); var t = new PIXI.Sprite(u["default"].assets.texture("minigame_generic_panel"));
                        this._score.addChild(t); var i = new PIXI.Sprite(u["default"].assets.texture(e));
                        this._score.addChild(i), webfont ? (this._score.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "left", fill: 16777215 }), this._score.label.x = 110, this._score.label.y = 60, this._score.label.anchor.set(.5), this._score.addChild(this._score.label)) : (this._score.label = new PIXI.extras.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), this._score.label.x = 110, this._score.label.y = 66, this._score.label.anchor.set(.5), this._score.addChild(this._score.label)) } }, { key: "setScore", value: function(e) { this._score.visible = !0, this._score.label.text = "" + e } }, { key: "_createHiScorePanel", value: function() { this._hiscore = new PIXI.Container, this._hiscore.visible = !1, this.addChild(this._hiscore); var e = new PIXI.Sprite(u["default"].assets.texture("minigame_generic_panel"));
                        e.anchor.set(.5), this._hiscore.addChild(e); var t = new PIXI.Sprite(u["default"].assets.texture("minigame_icon_best"));
                        t.anchor.set(.5), this._hiscore.addChild(t), webfont ? (this._hiscore.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "center", fill: 16777215 }), this._hiscore.label.y = 15, this._hiscore.label.anchor.set(.5), this._hiscore.addChild(this._hiscore.label)) : (this._hiscore.label = new PIXI.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), this._hiscore.label.y = 18, this._hiscore.label.anchor.set(.5), this._hiscore.addChild(this._hiscore.label)) } }, { key: "setHiScore", value: function(e) { this._hiscore.visible = !0, this._hiscore.label.text = e.toString() } }, { key: "setBalance", value: function(e) { var t = u["default"].assets,
                            i = .5 * -Math.PI + 35 * Math.min(1, Math.max(-1, e)) * .5 * PIXI.DEG_TO_RAD;
                        this._balanceBar.indicator.x = 940 * Math.cos(i), this._balanceBar.indicator.y = 940 + 940 * Math.sin(i), this._balanceBar.indicator.rotation = i + .5 * Math.PI, this._balanceBar.indicator.texture = t.texture("balance_neddle"); var n = this._balanceBar.indicator.rotation;
                        n > .1 ? n < .2 ? this._balanceBar.indicator.texture = t.texture("balance_neddle2") : this._balanceBar.indicator.texture = t.texture("balance_neddle3") : n < -.1 && (n > -.2 ? this._balanceBar.indicator.texture = t.texture("balance_neddle2") : this._balanceBar.indicator.texture = t.texture("balance_neddle3")) } }, { key: "leftArrow", get: function() { return this._balanceBar.leftFill } }, { key: "rightArrow", get: function() { return this._balanceBar.rightFill } }, { key: "pauseButton", get: function() { return this._pauseButton } }]), t }(PIXI.Container);
        i["default"] = _ }, { "../../Common": 13 }],
    90: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Actor"),
            _ = n(u),
            h = e("../../Common"),
            c = n(h),
            d = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    e._skipFrame = 0; var i = c["default"].assets,
                        n = new PIXI.Container; return e.addChild(n), e._view = new PIXI.spine.Spine(i.spineData("ivandoe_front")), e._view.scale.set(.4, .4), e._view.skeleton.setToSetupPose(), e._view.skeleton.setSkin(null), e._view.skeleton.setSkinByName("standard"), e._view.autoUpdate = !1, e._view.stateData.defaultMix = .15, e._view.state.setAnimation(0, "rodeo_idle", !0), e._view.update(0), n.addChild(e._view), e._currentState = "", e.faceDirection(1), e } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this) } }, { key: "destroy", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "update", value: function(e) { this._skipFrame++ % 2 === 0 && this._view.update(2 * e) } }, { key: "setBalancePosition", value: function(e) { var t = 35 * Math.min(1, Math.max(-1, e)) * .5;
                        Math.abs(t) > 6.5 ? (this.view.x = 80 * Math.sign(t), Math.sign(t) === -1 ? t > -10 ? ("mid_left" !== this._currentState && (this._view.state.setAnimation(0, "rodeo_bounce_centre2", !0), console.log("mid left")), this._currentState = "mid_left") : ("left" !== this._currentState && (this._view.state.setAnimation(0, "rodeo_bounce_left" + P3.math.randomInt(1, 2), !0), console.log("left")), this._currentState = "left") : t < 10 ? ("mid_right" !== this._currentState && (this._view.state.setAnimation(0, "rodeo_bounce_centre2", !0), console.log("mid right")), this._currentState = "mid_right") : ("right" !== this._currentState && (this._view.state.setAnimation(0, "rodeo_bounce_right" + P3.math.randomInt(1, 2), !0), console.log("right")), this._currentState = "right")) : (this.view.x = 0, "centre" !== this._currentState && this._view.state.setAnimation(0, "rodeo_bounce_centre", !0), this._currentState = "centre") } }]), t }(_["default"]);
        i["default"] = d }, { "../../Actor": 4, "../../Common": 13 }],
    91: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function d(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : d(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Actor"),
            _ = (n(u), e("../../Common")),
            h = n(_),
            c = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    e._viewScale = .65; var i = h["default"].assets;
                    e._view = new PIXI.spine.Spine(i.spineData("fly")), e._view.scale.set(e._viewScale, e._viewScale), e._view.skeleton.setToSetupPose(), e._view.skeleton.setSkin(null), e._view.stateData.defaultMix = .15, e._view.state.setAnimation(0, "fly", !0), e._view.autoUpdate = !1, e._view.update(0), e.addChild(e._view), e._paths = [
                        [{ x: 0, y: .25 * h["default"].STAGE_HEIGHT }, { x: .15 * h["default"].STAGE_WIDTH, y: .15 * h["default"].STAGE_HEIGHT }, { x: .25 * h["default"].STAGE_WIDTH, y: .35 * h["default"].STAGE_HEIGHT }, { x: .35 * h["default"].STAGE_WIDTH, y: .55 * h["default"].STAGE_HEIGHT }, { x: .55 * h["default"].STAGE_WIDTH, y: .15 * h["default"].STAGE_HEIGHT }, { x: .75 * h["default"].STAGE_WIDTH, y: .45 * h["default"].STAGE_HEIGHT }, { x: h["default"].STAGE_WIDTH, y: .25 * h["default"].STAGE_HEIGHT }],
                        [{ x: 0, y: .25 * h["default"].STAGE_HEIGHT }, { x: .15 * h["default"].STAGE_WIDTH, y: .15 * h["default"].STAGE_HEIGHT }, { x: .35 * h["default"].STAGE_WIDTH, y: .75 * h["default"].STAGE_HEIGHT }, { x: .55 * h["default"].STAGE_WIDTH, y: .15 * h["default"].STAGE_HEIGHT }, { x: .75 * h["default"].STAGE_WIDTH, y: .45 * h["default"].STAGE_HEIGHT }, { x: h["default"].STAGE_WIDTH, y: .25 * h["default"].STAGE_HEIGHT }],
                        [{ x: 0, y: .25 * h["default"].STAGE_HEIGHT }, { x: .15 * h["default"].STAGE_WIDTH, y: .15 * h["default"].STAGE_HEIGHT }, { x: .15 * h["default"].STAGE_WIDTH, y: .35 * h["default"].STAGE_HEIGHT }, { x: .35 * h["default"].STAGE_WIDTH, y: .75 * h["default"].STAGE_HEIGHT }, { x: .55 * h["default"].STAGE_WIDTH, y: .15 * h["default"].STAGE_HEIGHT }, { x: .15 * h["default"].STAGE_WIDTH, y: .45 * h["default"].STAGE_HEIGHT }, { x: .35 * h["default"].STAGE_WIDTH, y: .75 * h["default"].STAGE_HEIGHT }, { x: .55 * h["default"].STAGE_WIDTH, y: .15 * h["default"].STAGE_HEIGHT }, { x: .75 * h["default"].STAGE_WIDTH, y: .45 * h["default"].STAGE_HEIGHT }, { x: h["default"].STAGE_WIDTH, y: .25 * h["default"].STAGE_HEIGHT }],
                        [{ x: 0, y: .25 * h["default"].STAGE_HEIGHT }, { x: .15 * h["default"].STAGE_WIDTH, y: .15 * h["default"].STAGE_HEIGHT }, { x: .35 * h["default"].STAGE_WIDTH, y: .15 * h["default"].STAGE_HEIGHT }, { x: .45 * h["default"].STAGE_WIDTH, y: .35 * h["default"].STAGE_HEIGHT }, { x: .75 * h["default"].STAGE_WIDTH, y: .15 * h["default"].STAGE_HEIGHT }, { x: h["default"].STAGE_WIDTH, y: .25 * h["default"].STAGE_HEIGHT }],
                        [{ x: 0, y: .25 * h["default"].STAGE_HEIGHT }, { x: .45 * h["default"].STAGE_WIDTH, y: .75 * h["default"].STAGE_HEIGHT }, { x: h["default"].STAGE_WIDTH, y: .25 * h["default"].STAGE_HEIGHT }],
                        [{ x: 0, y: .25 * h["default"].STAGE_HEIGHT }, { x: .35 * h["default"].STAGE_WIDTH, y: .35 * h["default"].STAGE_HEIGHT }, { x: h["default"].STAGE_WIDTH, y: .25 * h["default"].STAGE_HEIGHT }]
                    ], e._pathTime = 6, e.hitArea = new PIXI.Circle(0, 0, 160), e._skipFrame = 0; var n = new PIXI.Graphics; return n.beginFill(14442078), n.drawCircle(0, 0, 10), n.endFill(), e._circleTexture = h["default"].renderer.generateTexture(n), n.destroy(), e._trailSprites = [], e.collisionRadius = 75, e.isDead = !1, e.complete = !1, e } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this) } }, { key: "destroy", value: function() { this._audio && (this._audio.destroy(), this._audio = null), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "dead", value: function() { if (!this.isDead) { this._pathTween && this._pathTween.kill(), TweenMax.killTweensOf(this), this.clearTrail(), this.isDead = !0; "left" === this.dir ? 1 : -1;
                            this.visible = !1, this._audio && this._audio.howl.stop() } } }, { key: "update", value: function(e) { this.isDead || (this._skipFrame++ % 2 === 0 && this._view.update(2 * deltaTime), this._makeTrail()) } }, { key: "followPath", value: function() { var e = this,
                            t = P3.math.randomInt(0, this._paths.length - 1),
                            i = this._paths[t];
                        this._view.scale.x = this._viewScale, this._view.scale.y = this._viewScale, this.dir = "right", Math.random() < .5 && (t < 4 ? this._view.scale.y = -this._viewScale : this._view.scale.x = -this._viewScale, i = i.reverse(), this.x = h["default"].STAGE_WIDTH, this.dir = "left"); var n = 2 === t ? this._pathTime + 2 : this._pathTime;
                        t < 4 ? this._pathTween = TweenMax.to(this, n, { bezier: { type: "soft", values: i, autoRotate: ["x", "y", "rotation", .01 * Math.PI, !0] }, ease: Power1.easeInOut, onComplete: function() { e._pathTween = null, e._audio && e._audio.stop(), e.complete = !0 } }) : (this.x = i[0].x, this.y = i[0].y, this._pathTween = TweenMax.to(this, .25 * n, { x: i[1].x, y: i[1].y, ease: Power1.easeOut, onComplete: function() { e._pathTween = TweenMax.to(e, .25 * n, { x: i[2].x, y: i[2].y, delay: 1, ease: Power1.easeIn, onComplete: function() { e._pathTween = null, e._audio && e._audio.stop(), e.complete = !0 } }) } })), this._audio = h["default"].audio.playSound("sfx_flygame_flyby_0" + P3.math.randomInt(0, 2), { loop: !0 }) } }, { key: "_makeTrail", value: function() { if (!this.transform) return console.warn("attempting update of bug with null transform"), void(this._audio && this._audio.howl.stop()); var e = this.y,
                            t = P3.createSprite(this._circleTexture, this.parent);
                        t.alpha = .2, t.anchor.set(.5), t.position.set(this.x, e), this._trailSprites.push(t); var i = t.width;
                        t = P3.createSprite(PIXI.Texture.WHITE, this.parent), t.width = t.height = .75 * i, t.tint = 14442078, t.alpha = .2, t.anchor.set(.5), t.position.set(this.x, e), this._trailSprites.push(t), this.parent.addChild(this); for (var n = 0; n < this._trailSprites.length; n++) this._trailSprites[n].alpha -= .01, this._trailSprites[n].alpha <= 0 && (this.parent.removeChild(this._trailSprites[n]), this._trailSprites[n].destroy(), this._trailSprites.splice(n, 1)) } }, { key: "killAudio", value: function() { this._audio && this._audio.howl.stop() } }, { key: "clearTrail", value: function() { if (!this.parent) return void console.warn("attempting clear trail of bug with no parent"); for (var e = 0; e < this._trailSprites.length; e++) this.parent.removeChild(this._trailSprites[e]), this._trailSprites[e].destroy();
                        this._trailSprites.length = 0 } }, { key: "_onMouseClick", value: function(e) { this.signals.splat.dispatch(this) } }, { key: "playAngryAnimation", value: function() { this._view.state.setAnimation(0, "fly_angry", !0) } }, { key: "killTween", value: function() { this._pathTween && this._pathTween.kill() } }, { key: "pause", value: function() { this._pathTween && this._pathTween.pause(), this._audio && this._audio.howl.pause() } }, { key: "resume", value: function() { this._pathTween && this._pathTween.play(), this._audio && this._audio.howl.play() } }, { key: "setAimAssistVisibility", value: function(e) { this._aimAssistTarget.visible = e } }, { key: "destroy", value: function() { this.killAudio(), this.killTween(), this._audio && this._audio.howl.stop(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "target", get: function() { return this._target } }]), t }(PIXI.Container);
        i["default"] = c }, { "../../Actor": 4, "../../Common": 13 }],
    92: [function(e, t, i) {
        "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 });
        var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function w(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : w(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("./Bug"),
            _ = n(u),
            h = e("../../Common"),
            c = n(h),
            d = e("./Hud"),
            p = n(d),
            f = e("./Ivandoe"),
            y = n(f),
            v = e("../../MinigameScene"),
            m = n(v),
            g = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._particles = null, e._particleHolder = new PIXI.Container, e._tutPos = 0, e._minReleaseTime = 1, e._maxReleaseTime = 2, e._bugReleaseTime = P3.math.randomInt(e._minReleaseTime, e._maxReleaseTime), e._bugs = [], e._isPause = !1, e._slashVelocity = new P3.Vector2, e._swipeTime = 0, e._swipeStart = new PIXI.Point, e._time = 21, e._pickups = [], e._pickupDropTime = P3.math.random(5, 10), e._gravity = 20, e._pieces = [], e._gameLifeTimeBugs = [], e }
                return s(t, e), r(t, [{ key: "init", value: function() { var e = c["default"].assets,
                            t = new PIXI.Sprite(e.texture("ep1_flyAttack_bg", "jpg"));
                        t.width = c["default"].STAGE_WIDTH, this.addChild(t), this._game = new PIXI.Container, this.addChild(this._game, this._particleHolder), this._hud = new p["default"], this._hud.setLives(this._lives), this._hud.setScore(this.score), this._hud.setHiScore(this.highscore), this.addChild(this._hud), this._ivandoe = new y["default"], this._ivandoe.x = .5 * c["default"].STAGE_WIDTH, this._ivandoe.y = 720, this._game.addChild(this._ivandoe), this._interactArea = new PIXI.Graphics, this._interactArea.interactive = !0, this._interactArea.hitArea = new PIXI.Rectangle(0, 0, P3.View.width, P3.View.height), this._interactArea.mousedown = this._interactArea.touchstart = this._onMouseDown.bind(this), this._interactArea.mouseup = this._interactArea.touchend = this._onMouseUp.bind(this), this._interactArea.mousemove = this._interactArea.touchmove = this._onMouseMove.bind(this), this._game.addChild(this._interactArea), this._hud.pauseButton.signals.click.add(this._onPauseButtonClick, this), this._particles = this._initParticles(this._particleHolder), this._score = 0, this._createPickups() } }, { key: "destroy", value: function() { for (var e = 0; e < this._bugs.length; ++e) { var i = this._bugs[e];
                            i.destroy() } this._bugs.length = 0, l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "resize", value: function() { this.x = .5 * (P3.View.width - c["default"].STAGE_WIDTH), this._hud.resize(), this._interactArea.hitArea.x = .5 * (c["default"].STAGE_WIDTH - P3.View.width), this._interactArea.hitArea.width = P3.View.width } }, { key: "appear", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "appear", this).call(this), this._isFirstPlay() && this.signals.pause.dispatch(this, !0) } }, { key: "update", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "update", this).call(this); var e = deltaTime;
                        this._ivandoe.update(e), this._particles.update(e); for (var i = 0; i < this._pieces.length; i++) { var n = this._pieces[i]; if (n && n.transform && (n.x += n.velocity.x * e, n.y += n.velocity.y * e, n.angularVelocity *= .99, n.rotation += n.angularVelocity * e, n.velocity.y += this._gravity, n.y > c["default"].STAGE_HEIGHT + 200)) { n.destroy(); break } } this._tutorialPause || (this._bugReleaseTime -= e, this._bugReleaseTime <= 0 && (this._bugReleaseTime = P3.math.randomInt(this._minReleaseTime, this._maxReleaseTime), this._createBug()), this._time <= 0 ? this.end() : this._time -= e, this._hud.setTime(Math.round(this._time))); for (var a = this._bugs.length - 1; a >= 0; --a) { var o = this._bugs[a];
                            o.update(e), !this._tutorialPause && o.complete && (o.clearTrail(), this._game.removeChild(o), o.killAudio(), this._bugs.splice(a, 1), o.destroy()) } if (this._pickupDropTime -= deltaTime, this._pickupDropTime <= 0) { this._pickupDropTime = P3.math.random(5, 10); for (var s = 0; s < this._pickups.length; s++)
                                if (!this._pickups[s].active) { this._pickups[s].active = !0, this._pickups[s].visible = !0; break } } for (var r = 0; r < this._pickups.length; r++) { var u = this._pickups[r];
                            u.active && (u.x += u.dx * deltaTime, u.y += u.dy * deltaTime, u.rotation += u.rotSpeed * deltaTime, u.dy += this._gravity) } } }, { key: "pause", value: function() { this._isPause = !0; for (var e = 0; e < this._bugs.length; e++) this._bugs[e].pause() } }, { key: "resume", value: function() { this._isPause = !1; for (var e = 0; e < this._bugs.length; e++) this._bugs[e].resume() } }, { key: "start", value: function() { var e = this._isFirstPlay();
                        e ? this._tutorial() : this._running = !0, c["default"].audio.playMusic("music_loop_dramatic_00") } }, { key: "_createBug", value: function() { var e = new _["default"]; return this._game.addChild(e), e.followPath(), this._bugs.push(e), this._gameLifeTimeBugs.push(e), e } }, { key: "end", value: function() { for (var e = 0; e < this._gameLifeTimeBugs.length; e++) this._gameLifeTimeBugs[e] && this._gameLifeTimeBugs[e].killAudio && this._gameLifeTimeBugs[e].killAudio(); for (var i = 0; i < this._bugs.length; i++) this._bugs[i].pause(), this._bugs[i].killAudio(), this._bugs[i].killTween(), TweenMax.killTweensOf(this._bugs[i]);
                        l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "end", this).call(this), this.playEndVO(this._score), this._ivandoe.view.state.setAnimation(0, "flies_lose", !1), c["default"].audio.stopMusic(), c["default"].audio.playSound("music_fail_stab_00"), this._hud.setHiScore(this.highscore) } }, { key: "_tutorial", value: function() { var e = this; if (!this._tutComplete) { this._initTutorialPointer(this); for (var t = 0; t < this._bugs.length; t++) this._bugs[t].pause();
                            this._tutorialPause = !0; var i = this._createBug(!0);
                            delay(function() { e._tutComplete || (i.pause(), e._animatePointer({ x: i.x - 80, y: i.y + 70 }, !0)) }, 3) } } }, { key: "_endTutorial", value: function() { this._tutComplete = !0; for (var e = 0; e < this._bugs.length; e++) this._bugs[e].resume();
                        this._tutorialPause = !1, this._killPointer() } }, { key: "_onPointerDown", value: function(e) { var t = this; if (!this._swiping) { this._swiping = !0, c["default"].audio.playSound("sfx_swipe_0" + P3.math.randomInt(0, 1)), this._ivandoe.view.state.setAnimation(0, "flies_strike"), this._ivandoe.view.state.addAnimation(0, "flies_idle", !0, 0); var i = Math.sign(e.data.global.x - this._ivandoe.x + .5 * (c["default"].STAGE_WIDTH - P3.View.width));
                            this._ivandoe.faceDirection(i), delay(function() { t._swiping = !1 }, .5, this) } } }, { key: "_initParticles", value: function(e) { var t = c["default"].assets,
                            i = t.json("particle_emitter_fairdust_01");
                        i.spawnRect.w = c["default"].STAGE_WIDTH, i.spawnRect.h = P3.View.height; var n = new PIXI.particles.Emitter(e, [t.texture("particle_fairy_dust_00"), t.texture("particle_fairy_dust_01")], i); return n.emit = !0, n } }, { key: "_onMouseDown", value: function(e) { this._slashing = !0; var t = e.data.getLocalPosition(this._game);
                        this._slashLastPos = new P3.Vector2(t.x, t.y), this._slashBeginPos = new PIXI.Point(t.x, t.y) } }, { key: "_onMouseUp", value: function(e) {
                        function t(e, t, i, n) { var a = n - t,
                                o = i - e; return Math.atan2(a, o) } var i = e.data.getLocalPosition(this._game),
                            n = t(this._slashBeginPos.x, this._slashBeginPos.y, i.x, i.y),
                            a = .5 * (this._slashBeginPos.x + i.x),
                            o = .5 * (this._slashBeginPos.y + i.y);
                        this._createSwipeAnimation(a, o, n), this._slashing = !1, this._slashLastPos = null, Math.random() < .4 && c["default"].audio.playSound(["vo_ivandoe_swipe_00", "vo_ivandoe_swipe_01", "vo_ivandoe_swipe_02", "vo_ivandoe_swipe_03"]), c["default"].audio.playSound(["sfx_swipe_00", "sfx_swipe_01"]) } }, { key: "_onMouseMove", value: function(e) {
                        function t(e, t, i, n) { var a = n - t,
                                o = i - e; return Math.atan2(a, o) } if (this._slashing && !this._isPause) { var i = e.data.getLocalPosition(this);
                            this._slashVelocity.set(i.x - this._slashLastPos.x, i.y - this._slashLastPos.y), this._slashLastPos = i.clone(); var n = c["default"].assets,
                                a = void 0; if (this._slashVelocity.length > 20) { for (var o = 0; o < this._bugs.length; o++)
                                    if (a = this._bugs[o], a.parent && !a.isDead) { var s = new P3.Vector2(a.x - i.x, a.y - i.y); if (s.length < a.collisionRadius) { c["default"].audio.playSound(["sfx_swipe_00", "sfx_swipe_01"]), this._tutorialPause && this._endTutorial(), this._onBugDead(a); var r = new PIXI.Sprite(n.texture(P3.utils.selectRandom(["ep1_flyattack/fly_squashed_001", "ep1_flyattack/fly_squashed_002", "ep1_flyattack/fly_squashed_003"])));
                                            r.scale.set(1.4); var l = Math.sign(a.scale.y);
                                            r.scale.x *= l, r.anchor = new PIXI.Point(.5, .5), this._game.addChild(r), r.x = a.x, r.y = a.y, a.dead(); var u = t(this._slashBeginPos.x, this._slashBeginPos.y, i.x, i.y);
                                            r.rotSpeed = P3.math.random(-2, 2), r.dx = P3.math.randomInt(-300, 300), r.dy = 0, u < 0 && (r.dy = -300), this._pickups.push(r), r.active = !0, this._hud.setScore(++this._score), this._ivandoe.view.state.setAnimation(0, "flies_strike"), this._ivandoe.view.state.addAnimation(0, "flies_idle", !0, 0) } else this._ivandoe.view.state.setAnimation(0, "flies_miss"), this._ivandoe.view.state.addAnimation(0, "flies_idle", !0, 0) } for (var _ = 0; _ < this._pickups.length; _++)
                                    if (a = this._pickups[_], a.parent && !a.isDead) { var h = new P3.Vector2(a.x - i.x, a.y - i.y); if (h.length < a.collisionRadius) { c["default"].audio.playSound(["sfx_swipe_00", "sfx_swipe_01"]), n = c["default"].assets; var d = n.json("turnip_slice"),
                                                p = new PIXI.particles.Emitter(this._game, [n.texture("ep1_flyattack/plus5_particle_001"), n.texture("ep1_flyattack/plus5_particle_002"), n.texture("ep1_flyattack/plus5_particle_003"), n.texture("ep1_flyattack/plus5_particle_004")], d);
                                            p.autoUpdate = !0, p.updateOwnerPos(a.x, a.y), p.playOnceAndDestroy(); var f = n.texture("ep1_flyattack/plus5_front"),
                                                y = n.texture("ep1_flyattack/plus5_back"),
                                                v = new PIXI.Sprite(f);
                                            v.x = a.x, v.y = a.y, v.rotation = a.rotation, v.velocity = new PIXI.Point(a.dx, a.dy), v.velocity.x += P3.math.random(-200, 200), v.velocity.y += P3.math.random(-200, 200), v.angularVelocity = a.rotSpeed + P3.math.random(-20, 20), v.anchor.set(.5), this._game.addChild(v), this._pieces.push(v); var m = new PIXI.Sprite(y);
                                            m.x = a.x, m.y = a.y, m.rotation = a.rotation, m.velocity = new PIXI.Point(a.dx, a.dy), m.velocity.x += P3.math.random(-200, 200), m.velocity.y += P3.math.random(-200, 200), m.angularVelocity = a.rotSpeed + P3.math.random(-20, 20), m.anchor.set(.5), this._game.addChild(m), this._pieces.push(m), this._time += 5, this._time = Math.round(this._time), this._hud.setTime(this._time), a.visible = !1, a.isDead = !0, c["default"].audio.playSound("sfx_time_plus_five_00") } } } } } }, { key: "_onBugDead", value: function(e) { e.killAudio(); var t = Math.sign(e.x - this._ivandoe.x);
                        this._ivandoe.faceDirection(t) } }, {
                    key: "_createSwipeAnimation",
                    value: function(e, t, i) { var n = c["default"].assets,
                            a = new P3.MovieClipSequence;
                        a.addTextures([n.texture("ep1_flyattack/swipe1"), n.texture("ep1_flyattack/swipe2"), n.texture("ep1_flyattack/swipe3"), n.texture("ep1_flyattack/swipe4"), n.texture("ep1_flyattack/swipe5"), n.texture("ep1_flyattack/swipe6"), n.texture("ep1_flyattack/swipe7"), n.texture("ep1_flyattack/swipe8"), n.texture("ep1_flyattack/swipe9"), n.texture("ep1_flyattack/swipe10"), n.texture("ep1_flyattack/swipe11"), n.texture("ep1_flyattack/swipe12")]); var o = new P3.MovieClip(a);
                        o.position.set(e, t), o.rotation = i, o.anchor = new PIXI.Point(.5, .5), o.animationSpeed = 80, o.play(), this._game.addChild(o) }
                }, { key: "_createPickups", value: function() { for (var e = 5, t = c["default"].assets, i = 0; i < e; i++) { var n = P3.utils.sprite(t.texture("ep1_flyattack/plus5"), this._game, new PIXI.Point(.5, .5));
                            Math.random() < .5 ? (n.x = .5 * c["default"].STAGE_WIDTH - 350, n.dx = 300) : (n.x = .5 * c["default"].STAGE_WIDTH + 350, n.dx = -300), n.rotSpeed = P3.math.random(-1, 1), n.dy = -1200, n.y = c["default"].STAGE_HEIGHT, n.visible = !1, n.active = !1, n.collisionRadius = 55, this._pickups.push(n) } } }]), t
            }(m["default"]);
        i["default"] = g
    }, { "../../Common": 13, "../../MinigameScene": 28, "./Bug": 91, "./Hud": 93, "./Ivandoe": 94 }],
    93: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("../../Common"),
            u = n(l),
            _ = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._livesLabel = null, e._scoreLabel = null, e._pauseButton = null, e.init(), e } return s(t, e), r(t, [{ key: "init", value: function() { this._createScorePanel("minigame_icon_ep1_1"), this._createTimePanel(), this._createHiScorePanel(), this._createLivesPanel(), this._createPauseButton() } }, { key: "resize", value: function() { this._lives.x = .5 * (u["default"].STAGE_WIDTH - P3.View.width), this._lives.y = 30, this._score.x = .5 * (u["default"].STAGE_WIDTH - P3.View.width) + 80, this._score.y = this._lives.y, this._time.x = .5 * (u["default"].STAGE_WIDTH - P3.View.width) + 80, this._time.y = this._score.y + 80, this._hiscore.x = .5 * u["default"].STAGE_WIDTH, this._hiscore.y = 60, this._pauseButton.x = .5 * (u["default"].STAGE_WIDTH + P3.View.width) - 100, this._pauseButton.y = 100 } }, { key: "_createPauseButton", value: function() { var e = u["default"].assets,
                            t = new P3.ButtonStates;
                        t.normal = e.texture("btn_primary_small_off"), t.over = e.texture("btn_primary_small_over"), t.down = e.texture("btn_primary_small_over"), t.icon = e.texture("icon_help"), this._pauseButton = new P3.Button(t), this.addChild(this._pauseButton) } }, { key: "_createLivesPanel", value: function() { this._lives = new PIXI.Container, this._lives.visible = !1, this.addChild(this._lives); var e = new PIXI.Sprite(u["default"].assets.texture("minigame_lives_panel"));
                        this._lives.addChild(e), this._lives.icons = []; for (var t = 0; t < 3; t++) { var i = new PIXI.Sprite(u["default"].assets.texture("minigame_lives_icon_00" + (t + 1) + "_on"));
                            i.anchor.set(.5), i.x = 70 + 55 * t, i.y = 40, this._lives.addChild(i), this._lives.icons.push(i) } } }, { key: "setLives", value: function(e) { for (var t = 0; t < this._lives.icons.length; t++) this._lives.icons[t].texture = u["default"].assets.texture("minigame_lives_icon_00" + (t + 1) + "_" + (t < e ? "on" : "off")) } }, { key: "_createTimePanel", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "minigame_icon_time";
                        this._time = new PIXI.Container, this._time.visible = !1, this.addChild(this._time); var t = new PIXI.Sprite(u["default"].assets.texture("minigame_generic_panel"));
                        this._time.addChild(t); var i = new PIXI.Sprite(u["default"].assets.texture(e));
                        this._time.addChild(i), webfont ? (this._time.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "left", fill: 16777215 }), this._time.label.x = 110, this._time.label.y = 60, this._time.label.anchor.set(.5), this._time.addChild(this._time.label)) : (this._time.label = new PIXI.extras.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), this._time.label.x = 110, this._time.label.y = 66, this._time.label.anchor.set(.5), this._time.addChild(this._time.label)) } }, { key: "setTime", value: function(e) { this._time.visible = !0, this._time.label.text = "" + e } }, { key: "_createScorePanel", value: function(e) { this._score = new PIXI.Container, this._score.visible = !1, this.addChild(this._score); var t = new PIXI.Sprite(u["default"].assets.texture("minigame_generic_panel"));
                        this._score.addChild(t); var i = new PIXI.Sprite(u["default"].assets.texture(e));
                        this._score.addChild(i), webfont ? (this._score.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "left", fill: 16777215 }), this._score.label.x = 110, this._score.label.y = 60, this._score.label.anchor.set(.5), this._score.addChild(this._score.label)) : (this._score.label = new PIXI.extras.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), this._score.label.x = 110, this._score.label.y = 66, this._score.label.anchor.set(.5), this._score.addChild(this._score.label)) } }, { key: "setScore", value: function(e) { this._score.visible = !0, this._score.label.text = "" + e } }, { key: "_createHiScorePanel", value: function() { this._hiscore = new PIXI.Container, this._hiscore.visible = !1, this.addChild(this._hiscore); var e = new PIXI.Sprite(u["default"].assets.texture("minigame_generic_panel"));
                        e.anchor.set(.5), this._hiscore.addChild(e); var t = new PIXI.Sprite(u["default"].assets.texture("minigame_icon_best"));
                        t.anchor.set(.5), this._hiscore.addChild(t), webfont ? (this._hiscore.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "center", fill: 16777215 }), this._hiscore.label.y = 15, this._hiscore.label.anchor.set(.5), this._hiscore.addChild(this._hiscore.label)) : (this._hiscore.label = new PIXI.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), this._hiscore.label.y = 18, this._hiscore.label.anchor.set(.5), this._hiscore.addChild(this._hiscore.label)) } }, { key: "setHiScore", value: function(e) { this._hiscore.visible = !0, this._hiscore.label.text = e.toString() } }, { key: "pauseButton", get: function() { return this._pauseButton } }]), t }(PIXI.Container);
        i["default"] = _ }, { "../../Common": 13 }],
    94: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Actor"),
            _ = n(u),
            h = e("../../Common"),
            c = n(h),
            d = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    e._skipFrame = 0; var i = c["default"].assets,
                        n = new PIXI.Container; return e.addChild(n), e._view = new PIXI.spine.Spine(i.spineData("ivandoe_front")), e._view.scale.set(.4, .4), e._view.skeleton.setToSetupPose(), e._view.skeleton.setSkin(null), e._view.skeleton.setSkinByName("standard"), e._view.stateData.defaultMix = .15, e._view.autoUpdate = !1, e._view.update(0), n.addChild(e._view), e._shadow = new PIXI.Sprite(c["default"].assets.texture("shadow")), e._shadow.anchor.set(.5), e._shadow.blendMode = 2, e._shadow.alpha = .35, e._shadow.scale.set(.8), n.addChildAt(e._shadow, 0), e.faceDirection(-1), e.visible = !1, e } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this._view.state.setAnimation(0, "flies_idle", !0) } }, { key: "destroy", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "update", value: function(e) { this._skipFrame++ % 2 === 0 && this._view.update(2 * e) } }]), t }(_["default"]);
        i["default"] = d }, { "../../Actor": 4, "../../Common": 13 }],
    95: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function y(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : y(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Actor"),
            _ = n(u),
            h = e("../../Common"),
            c = n(h),
            d = e("./Egg"),
            p = n(d),
            f = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    i._lanes = e, i._isAttacking = !1, i._launchOffset = new PIXI.Point(40, (-20)), i._launchDelay = 1.4, i._launchCount = 0, i._launchTime = 0, i._burstDelay = .46, i._burstCount = 0, i._burstCountMax = 1, i._burstTime = i._burstDelay; var n = new PIXI.Container; return i.addChild(n), i._view = new PIXI.spine.Spine(c["default"].assets.spineData("duck")), i._view.scale.set(-.5, .5), i._view.skeleton.setToSetupPose(), i._view.skeleton.setSkin(null), i._view.skeleton.setSkinByName("default"), i._view.stateData.defaultMix = .15, i._view.autoUpdate = !1, i._view.update(0), n.addChild(i._view), i._skipFrame = 0, i._shadow = new PIXI.Sprite(c["default"].assets.texture("shadow")), i._shadow.anchor.set(.5), i._shadow.blendMode = 2, i._shadow.alpha = .35, i._shadow.scale.set(.5), n.addChildAt(i._shadow, 0), i.signals.egg = new signals.Signal, i._invertAnimation = 1, i } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this.idleSit() } }, { key: "destroy", value: function(e) { this.signals.egg.dispose(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "update", value: function(e) { this._isAttacking && (this._launchTime >= this._launchDelay ? this._burstTime >= this._burstDelay ? (this._burstCount++, this._burstCount <= this._burstCountMax ? (this._burstTime = 0, this.attack(), this.signals.egg.dispatch(this.launchEgg())) : (this._launchTime = 0, this._burstCount = 0, this._launchCount++, this._burstCountMax = Math.ceil(this._launchCount / 5))) : this._burstTime += e : this._launchTime += e), this._skipFrame++ % 2 === 0 && this._view.update(2 * e * this._invertAnimation) } }, { key: "launchEgg", value: function() { c["default"].audio.playSound("sfx_duck_quack_00"); var e = [new P3.Vector2(220, (-1040)), new P3.Vector2(460, (-1160)), new P3.Vector2(620, (-1380))],
                            t = new p["default"]; return t.position.set(this.x + this._launchOffset.x, this.y + this._launchOffset.y), t.velocity = e[P3.math.randomInt(0, 2)], t.angularVelocity = 6 * P3.math.randomSign(), t } }, { key: "idleSit", value: function() { this._view.state.setAnimation(0, "idle-sit", !0) } }, { key: "stand", value: function() { this._view.state.setAnimation(0, "idle-sit_to_stand", !1), this._view.state.addAnimation(0, "idle-stand", !0, 0) } }, { key: "attack", value: function() { this._view.state.setAnimation(0, "egg_attack", !1), this._view.state.addAnimation(0, "egg_idle", !0) } }, { key: "win", value: function() { this._view.state.setAnimation(0, "idle-sit", !0) } }, { key: "isAttacking", set: function(e) { this._isAttacking = e } }]), t }(_["default"]);
        i["default"] = f }, { "../../Actor": 4, "../../Common": 13, "./Egg": 97 }],
    96: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function b(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : b(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Common"),
            _ = n(u),
            h = e("./Ivandoe"),
            c = n(h),
            d = e("./Ducky"),
            p = n(d),
            f = e("./Hud"),
            y = n(f),
            v = e("./InteractiveArea"),
            m = (n(v), e("../../MinigameScene")),
            g = n(m),
            w = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._score = 0, e._lives = 3, e._eggHits = 0, e._states = { GRACE: 1, GAMEPLAY: 2, GAMEOVER: 3, INACTIVE: -1 }, e._gamestate = null, e._gamestateTime = 0, e._nextGamestate = e._states.INACTIVE, e._graceTime = 1, e._eggs = [], e._particles = null, e._particleHolder = new PIXI.Container, e._lanes = [.5 * _["default"].STAGE_WIDTH - 100 - 85, .5 * _["default"].STAGE_WIDTH + 225 - 85, .5 * _["default"].STAGE_WIDTH + 550 - 85], e._currentLane = 1, e } return s(t, e), r(t, [{ key: "init", value: function() { var e = this;
                        l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this); var i = new PIXI.Sprite(_["default"].assets.texture("ep7_duckyEggs_bg", "jpg"));
                        i.width = _["default"].STAGE_WIDTH, this.addChild(i), this.initStones(), this._ivandoe = new c["default"], this._ivandoe.x = this._lanes[1], this._ivandoe.y = 700, this.addChild(this._ivandoe); var n = new PIXI.Sprite(_["default"].assets.texture("ep7_duckyEggs/boulder"));
                        n.x = .5 * _["default"].STAGE_WIDTH - 525, n.y = this._ivandoe.y + 20, n.anchor = new PIXI.Point(.5, 1), this.addChild(n), this._ducky = new p["default"](this._lanes), this._ducky.x = n.x + 30, this._ducky.y = n.y - 180, this._ducky.signals.egg.add(this._onDuckyEgg, this), this.addChild(this._ducky), this.addChild(this._particleHolder), this._interactiveArea = new PIXI.Container, this._interactiveArea.interactive = !0, this._interactiveArea.hitArea = new PIXI.Rectangle(0, 0, _["default"].STAGE_WIDTH, _["default"].STAGE_HEIGHT), this._interactiveArea.mousedown = this._interactiveArea.touchstart = function(t) { if (!e._ivandoe.isMovingToTarget) { var i = t.data.getLocalPosition(e);
                                i.x < e._ivandoe.x - 50 ? e._currentLane > 0 && e._currentLane-- : i.x > e._ivandoe.x + 50 && e._currentLane < 2 && e._currentLane++, e._ivandoe.moveTo(e._lanes[e._currentLane]), e._inTut && (e._inTut = !1, e._killPointer()) } }, this.addChild(this._interactiveArea), this._hud = new y["default"], this._hud.setScore(this.score), this._hud.setHiScore(this.highscore), this._hud.setLives(this._lives), this.addChild(this._hud), this._hud.pauseButton.signals.click.add(this._onPauseButtonClick, this), this._particles = this._initParticles(this._particleHolder) } }, { key: "initStones", value: function() { for (var e = _["default"].assets, t = 0; t < this._lanes.length; t++) { var i = new PIXI.Sprite(e.texture("ep7_duckyEggs/stepping_stone_00" + (t + 1)));
                            i.anchor.set(.5, 1), i.x = this._lanes[t], i.y = _["default"].STAGE_HEIGHT - 25, this.addChild(i) } } }, { key: "destroy", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "resize", value: function() { this.x = .5 * (P3.View.width - _["default"].STAGE_WIDTH), this._hud.resize() } }, { key: "appear", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "appear", this).call(this), this._isFirstPlay() && this.signals.pause.dispatch(this, !0), this._nextGamestate = this._states.GRACE } }, { key: "update", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "update", this).call(this); var e = deltaTime; if (this._ivandoe.update(e), this._ducky.update(e), this._updateEggs(e), this._particles.update(e), this._inTut) return void(_["default"].input.isKeyDown(37) ? (this._inTut = !1, this._killPointer()) : _["default"].input.isKeyDown(39) && (this._inTut = !1, this._killPointer())); switch (this._nextGamestate ? (this._gamestate = this._nextGamestate, this._gamestateTime = 0, this._nextGamestate = null) : this._gamestateTime += e, this._gamestate) {
                            case this._states.GRACE:
                                0 == this._gamestateTime || this._gamestateTime > this._graceTime && (this._nextGamestate = this._states.GAMEPLAY); break;
                            case this._states.GAMEPLAY:
                                0 == this._gamestateTime && (this._ducky.stand(), this._ducky.isAttacking = !0, _["default"].audio.playMusic("music_loop_gentle_fun_00")), this._ivandoe.isMovingToTarget || (_["default"].input.isKeyPressed(37) ? (this._currentLane > 0 && this._currentLane--, this._ivandoe.moveTo(this._lanes[this._currentLane])) : _["default"].input.isKeyPressed(39) && (this._currentLane < 2 && this._currentLane++, this._ivandoe.moveTo(this._lanes[this._currentLane]))), this._collisionEggs(), 0 == this._lives && (this._nextGamestate = this._states.GAMEOVER); break;
                            case this._states.GAMEOVER:
                                0 == this._gamestateTime ? (this._ivandoe.death(), this._ducky.isAttacking = !1, this._ducky.win(), _["default"].audio.stopMusic(), _["default"].audio.playSound("music_fail_stab_01")) : this._gamestateTime > 2 && (this.end(), this._nextGamestate = this._states.INACTIVE) } } }, { key: "start", value: function() { this._isFirstPlay() && this._tutorial() } }, { key: "end", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "end", this).call(this), this._hud.setHiScore(this.highscore), this.playEndVO(this._score), TweenMax.killAll() } }, { key: "_updateEggs", value: function(e) { for (var t = this._eggs.length - 1; t >= 0; t--) { var i = this._eggs[t];
                            i.parent ? i.update(e) : this._eggs.splice(t, 1) } } }, { key: "_collisionEggs", value: function() { for (var e = this._eggs.length - 1; e >= 0; e--)
                            if (!this._eggs[e].isCracked) { var t = this._ivandoe.collide(this._eggs[e].collisionBox);
                                t && (this._lives--, this._hud.setLives(this._lives), this._eggs[e].destroy(), this._eggs.splice(e, 1), _["default"].audio.playSound(["vo_ivandoe_strain_00", "vo_ivandoe_strain_01", "vo_ivandoe_yelps_00"]), this._eggHits++, this._ivandoe.view.skeleton.setAttachment("eggsplat" + this._eggHits, "egg/egg_splat_1")) } } }, { key: "_onDuckyEgg", value: function(e) { e.signals.splat.add(function() { this._score++, this._hud.setScore(this.score) }, this), this._ducky.parent.addChildAt(e, this._ducky.parent.getChildIndex(this._ducky)), this._eggs.push(e) } }, { key: "_onPauseButtonClick", value: function(e) { this.signals.pause.dispatch(this, !1) } }, { key: "_initParticles", value: function(e) { var t = _["default"].assets,
                            i = t.json("particle_emitter_fairdust_01");
                        i.spawnRect.w = _["default"].STAGE_WIDTH, i.spawnRect.h = P3.View.height; var n = new PIXI.particles.Emitter(e, [t.texture("particle_fairy_dust_00"), t.texture("particle_fairy_dust_01")], i); return n.emit = !0, n } }, { key: "_tutorial", value: function() { this._inTut = !0, this._initTutorialPointer(this), this._animatePointer({ x: this._ivandoe.x + 250 + 85, y: this._ivandoe.y - 150 }) } }]), t }(g["default"]);
        i["default"] = w }, { "../../Common": 13, "../../MinigameScene": 28, "./Ducky": 95, "./Hud": 98, "./InteractiveArea": 99, "./Ivandoe": 100 }],
    97: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Actor"),
            _ = n(u),
            h = e("../../Common"),
            c = n(h),
            d = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e.gravity = 2e3, e.floor = 690, e.velocity = new P3.Vector2, e.angularVelocity = 0, e.collisionRadius = 24, e._cracked = !1, e._view = new PIXI.Sprite(c["default"].assets.texture("ep7_duckyEggs/egg")), e._view.anchor.set(.5), e.addChild(e._view), e._shadow = new PIXI.Sprite(c["default"].assets.texture("shadow")), e._shadow.anchor.set(.5), e._shadow.alpha = .35, e._shadow.scale.set(.2), e.addChildAt(e._shadow, 0), e._collisionBox = new PIXI.Rectangle((-10), (-10), 20, 20), e.signals.splat = new signals.Signal, e } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this) } }, { key: "destroy", value: function(e) { TweenMax.killTweensOf(this), this.signals.splat.dispose(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "update", value: function(e) { this._cracked || (this.velocity.y += this.gravity * e), this.x += this.velocity.x * e, this.y += this.velocity.y * e, this.angularVelocity *= .99, this._view.rotation += this.angularVelocity * e, this.y >= this.floor && (this._cracked || this.splat()); var t = this.floor - this.y;
                        this._shadow.y = t, this._shadow.scale.set((1e3 - t) / 1e3 * .2) } }, { key: "splat", value: function() { c["default"].audio.playSound(["sfx_egg_splat_00", "sfx_egg_splat_01", "sfx_egg_splat_02"]), this._cracked = !0, this._view.texture = c["default"].assets.texture("ep7_duckyEggs/egg_smashed"), this.y = this.floor, this._view.rotation = 0, this.velocity.set(0, 0), this.angularVelocity = 0, TweenMax.to(this, 1, { delay: 1, alpha: 0, ease: Power1.easeInOut, onComplete: function() { this.destroy() }, onCompleteScope: this }), this.signals.splat.dispatch(this) } }, { key: "collisionBox", get: function() { return new PIXI.Rectangle(this.x + this._view.x + this._collisionBox.x, this.y + this._view.y + this._collisionBox.y, this._collisionBox.width, this._collisionBox.height) } }, { key: "isCracked", get: function() { return this._cracked } }]), t }(_["default"]);
        i["default"] = d }, { "../../Actor": 4, "../../Common": 13 }],
    98: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("../../Common"),
            u = n(l),
            _ = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e.init(), e } return s(t, e), r(t, [{ key: "init", value: function() { this.createLivesPanel(), this.initScorePanel("minigame_icon_ep7_2"), this.initHiScorePanel(), this._createPauseButton() } }, { key: "resize", value: function() { this._lives.x = .5 * (u["default"].STAGE_WIDTH - P3.View.width), this._lives.y = 30, this._score.x = .5 * (u["default"].STAGE_WIDTH - P3.View.width) + 80, this._score.y = this._lives.y + 80, this._hiscore.x = .5 * u["default"].STAGE_WIDTH, this._hiscore.y = 60, this._pauseButton.x = .5 * (u["default"].STAGE_WIDTH + P3.View.width) - 100, this._pauseButton.y = 100 } }, { key: "createLivesPanel", value: function() { this._lives = new PIXI.Container, this._lives.visible = !1, this.addChild(this._lives); var e = new PIXI.Sprite(u["default"].assets.texture("minigame_lives_panel"));
                        this._lives.addChild(e), this._lives.icons = []; for (var t = 0; t < 3; t++) { var i = new PIXI.Sprite(u["default"].assets.texture("minigame_lives_icon_00" + (t + 1) + "_on"));
                            i.anchor.set(.5), i.x = 70 + 55 * t, i.y = 40, this._lives.addChild(i), this._lives.icons.push(i) } } }, { key: "setLives", value: function(e) { this._lives.visible = !0; for (var t = 0; t < this._lives.icons.length; t++) this._lives.icons[t].texture = u["default"].assets.texture("minigame_lives_icon_00" + (t + 1) + "_" + (t < e ? "on" : "off")) } }, { key: "initScorePanel", value: function(e) { this._score = new PIXI.Container, this._score.visible = !1, this.addChild(this._score); var t = new PIXI.Sprite(u["default"].assets.texture("minigame_generic_panel"));
                        this._score.addChild(t); var i = new PIXI.Sprite(u["default"].assets.texture(e));
                        this._score.addChild(i), webfont ? (this._score.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "left", fill: 16777215 }), this._score.label.x = 110, this._score.label.y = 60, this._score.label.anchor.set(.5), this._score.addChild(this._score.label)) : (this._score.label = new PIXI.extras.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), this._score.label.x = 110, this._score.label.y = 66, this._score.label.anchor.set(.5), this._score.addChild(this._score.label)) } }, { key: "setScore", value: function(e) { this._score.visible = !0, this._score.label.text = "" + e } }, { key: "initHiScorePanel", value: function() { this._hiscore = new PIXI.Container, this._hiscore.visible = !1, this.addChild(this._hiscore); var e = new PIXI.Sprite(u["default"].assets.texture("minigame_generic_panel"));
                        e.anchor.set(.5), this._hiscore.addChild(e); var t = new PIXI.Sprite(u["default"].assets.texture("minigame_icon_best"));
                        t.anchor.set(.5), this._hiscore.addChild(t), webfont ? (this._hiscore.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "center", fill: 16777215 }), this._hiscore.label.y = 15, this._hiscore.label.anchor.set(.5), this._hiscore.addChild(this._hiscore.label)) : (this._hiscore.label = new PIXI.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), this._hiscore.label.y = 18, this._hiscore.label.anchor.set(.5), this._hiscore.addChild(this._hiscore.label)) } }, { key: "setHiScore", value: function(e) { this._hiscore.visible = !0, this._hiscore.label.text = e.toString() } }, { key: "_createPauseButton", value: function() { var e = u["default"].assets,
                            t = new P3.ButtonStates;
                        t.normal = e.texture("btn_primary_small_off"), t.over = e.texture("btn_primary_small_over"), t.down = e.texture("btn_primary_small_over"), t.icon = e.texture("icon_help"), this._pauseButton = new P3.Button(t), this.addChild(this._pauseButton) } }, { key: "pauseButton", get: function() { return this._pauseButton } }]), t }(PIXI.Container);
        i["default"] = _ }, { "../../Common": 13 }],
    99: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function c(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : c(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Common"),
            _ = n(u),
            h = function(e) {
                function t() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1;
                    a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    i._interactiveAreas = []; for (var n = 0; n < e; n++) { var s = new PIXI.Sprite(PIXI.Texture.BLANK);
                        s.x = _["default"].STAGE_WIDTH / e * n, s.width = _["default"].STAGE_WIDTH / e, s.height = _["default"].STAGE_HEIGHT, s.interactive = !0, s.signals = {}, s.signals.clicked = new signals.Signal, s.signals.released = new signals.Signal, s.mousedown = s.touchstart = function(e) { this.signals.clicked.dispatch(this, e) }.bind(s), s.mouseup = s.touchend = function(e) { this.signals.released.dispatch(this, e) }.bind(s), s.mouseupoutisde = s.touchendoutside = function(e) { this.signals.released.dispatch(this, e) }.bind(s), i.addChild(s), i._interactiveAreas.push(s) } return i } return s(t, e), r(t, [{ key: "init", value: function() {} }, { key: "resize", value: function() {} }, { key: "destroy", value: function(e) { for (var i = 0; i < this._interactiveAreas.length; i++)
                            for (var n in this._interactiveAreas[i].signals) this._interactiveAreas[i].signals[n].dispose();
                        l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "getArea", value: function(e) { return this._interactiveAreas[e] } }, { key: "removeAllEvents", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null; if (null === e)
                            for (var e = 0; e < this._interactiveAreas.length; e++)
                                for (var t in this._interactiveAreas[e].signals) this._interactiveAreas[e].signals[t].removeAll();
                        else
                            for (var t in this._interactiveAreas[e].signals) this._interactiveAreas[e].signals[t].removeAll() } }]), t }(PIXI.Container);
        i["default"] = h }, { "../../Common": 13 }],
    100: [function(e, t, i) {
        "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 });
        var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) {
                null === e && (e = Function.prototype);
                var n = Object.getOwnPropertyDescriptor(e, t);
                if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) }
                if ("value" in n) return n.value;
                var o = n.get;
                if (void 0 !== o) return o.call(i)
            },
            u = e("../../Actor"),
            _ = n(u),
            h = e("../../Common"),
            c = n(h),
            d = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    e._isMoving = !1, e._movementDirection = 0, e._movementSpeed = 1200, e._movementLimit = [800, 1300]; var i = new PIXI.Container; return e.addChild(i), e._view = new PIXI.spine.Spine(c["default"].assets.spineData("ivandoe_front")), e._view.scale.set(.4), e._view.skeleton.setToSetupPose(), e._view.skeleton.setSkin(null), e._view.skeleton.setSkinByName("standard"), e._view.stateData.defaultMix = .15, e._view.autoUpdate = !1, e._view.update(0), e._skipFrame = 0, i.addChild(e._view), e._shadow = new PIXI.Sprite(c["default"].assets.texture("shadow")), e._shadow.anchor.set(.5), e._shadow.blendMode = 2, e._shadow.alpha = .35, e._shadow.scale.set(.8), i.addChildAt(e._shadow, 0), e._collisionBox = new PIXI.Rectangle((-50), (-260), 100, 260), e.faceDirection(1), e } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this._view.state.setAnimation(0, "idle_posing_1", !0), this._view.state.addListener({ event: this._onAnimationEvent.bind(this) }) } }, { key: "destroy", value: function(e) { this._timeline && this._timeline.kill(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "update", value: function(e) { 0 != this._movementDirection ? (this.walk(), this._view.scale.x = Math.sign(this._movementDirection) * Math.abs(this._view.scale.x), this.x += this._movementSpeed * this._movementDirection * e, this._movementTarget && (this._movementDirection == -1 && this.x < this._movementTarget || 1 == this._movementDirection && this.x > this._movementTarget) && (this.x = this._movementTarget, this.idle())) : this.idle(), this._shadow.x = this._view.x, this._collisionGraphic && (this._collisionGraphic.x = this._view.x, this._collisionGraphic.y = this._view.y), this._skipFrame++ % 2 === 0 && this._view.update(2 * e) } }, { key: "move", value: function(e) { this._movementDirection = e, this._movementTarget = null } }, { key: "moveTo", value: function(e) { this._movementDirection = Math.sign(e - this.x), this._movementTarget = e } }, { key: "walk", value: function() { this._isMoving || (this._isMoving = !0, this._view.state.setAnimation(0, "jump_fast_fwd", !0), TweenMax.to(this, .15, { y: this.y - 25, yoyo: !0, repeat: 1, ease: Sine.easeInOut })) } }, { key: "idle", value: function() { this._isMoving && (this._isMoving = !1, this._movementDirection = 0, this._view.state.setAnimation(0, "idle_posing_1", !0, 0)) } }, { key: "death", value: function() { arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1;
                        this.idle(), this._view.state.setAnimation(0, "hit_head", !0) } }, { key: "collide", value: function(e) { var t = this.collisionBox; return !(e.x + e.width < t.x) && (!(e.x > t.x + this._collisionBox.width) && (!(e.y + e.height < t.y) && !(e.y > t.y + this._collisionBox.height))) } }, { key: "_playFootstepSFX", value: function() { c["default"].audio.playSound(["sfx_footstep_00", "sfx_footstep_01", "sfx_footstep_02", "sfx_footstep_03", "sfx_footstep_04"]) } }, { key: "_onAnimationEvent", value: function(e, t) { "sfx_footstep" === t.data.name && this._playFootstepSFX() } }, { key: "collisionBox", get: function() { return new PIXI.Rectangle(this.x + this._view.x + this._collisionBox.x, this.y + this._view.y + this._collisionBox.y, this._collisionBox.width, this._collisionBox.height) } }, { key: "worldX", get: function() { return this.x + this._view.x } }, { key: "isMovingToTarget", get: function() { return 0 !== this._movementDirection } }, { key: "isAtLeftLimit", get: function() { return this.x == this._movementLimit[0] } }, { key: "isAtRightLimit", get: function() { return this.x == this._movementLimit[1] } }]), t }(_["default"]);
        i["default"] = d
    }, { "../../Actor": 4, "../../Common": 13 }],
    101: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Actor"),
            _ = n(u),
            h = e("../../Common"),
            c = n(h),
            d = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    e.velocity = new P3.Vector2, e.falling = !1, e._gravity = 75, e._moveSpeed = 240, e._flapStrength = 1e3, e._skipFrame = 0; var i = c["default"].assets,
                        n = new PIXI.Container; return e.addChild(n), e._view = new PIXI.spine.Spine(i.spineData("bert_front")), e._view.position.set(0, 40), e._view.scale.set(.5, .5), e._view.skeleton.setToSetupPose(), e._view.stateData.defaultMix = .15, e._view.autoUpdate = !1, e._view.update(0), n.addChild(e._view), e.signals.flap = new signals.Signal, e.dead = !1, e._collider = new PIXI.Sprite(PIXI.Texture.WHITE), e._view.state.addListener({ event: e._onAnimationEvent.bind(e) }), e } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this._view.state.setAnimation(0, "fly_determined_fast", !0), this.addChild(this._collider), this._collider.anchor.set(.5), this._collider.width = 35, this._collider.height = 35, this._collider.y = -15, this._collider.tint = 255, this._collider.alpha = .5, this._collider.rotation = .25 * Math.PI, this._collider.renderable = !1, this.velocity.x = 340 } }, { key: "destroy", value: function() { this.signals.flap.dispose(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "update", value: function(e) { var t = 800;
                        this.velocity.y < t && this.falling && (this.velocity.y += this._gravity), this.x += this.velocity.x * e, this.y += this.velocity.y * e, this._skipFrame++ % 2 === 0 && this._view.update(2 * e) } }, { key: "flap", value: function(e) { this.dead || (this.velocity.y = -this._flapStrength, this.falling = !0, this.signals.flap.dispatch(this), this._view.state.setAnimation(0, "fly_flappy_click", !1), this._view.state.addAnimation(0, "fly_flappy_glide", !0, 0)) } }, { key: "_playFlapSFX", value: function() { c["default"].audio.playSound(["sfx_flap_00", "sfx_flap_01"]) } }, { key: "_onAnimationEvent", value: function(e, t) { "sfx_flap" === t.data.name && this._playFlapSFX() } }, { key: "collider", get: function() { return this._collider } }, { key: "view", get: function() { return this._view } }]), t }(_["default"]);
        i["default"] = d }, { "../../Actor": 4, "../../Common": 13 }],
    102: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function m(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : m(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("./../../Common"),
            _ = n(u),
            h = e("./FlappyBert"),
            c = n(h),
            d = e("./Hud"),
            p = n(d),
            f = e("../../MinigameScene"),
            y = n(f),
            v = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._offsetSize = 1e3, e._bg = null, e._game = null, e._fg = null, e._camera = null, e._player = null, e._obstacles = [], e._topObstacleOffset = 0, e._bottomObstacleOffset = 0, e._bgTiles = [], e._fgTiles = [], e._bgTileOffset = 0, e._fgTileOffset = 0, e._floorY = _["default"].STAGE_HEIGHT - 25, e._startX = -1, e._bgInitCount = 0, e._bgTileWidth = -1, e._popouts = [], e._spawnedObstacles = 0, e._obstacleOffset = 0, e._minGap = 200, e._maxGap = 350, e } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this._bg = new PIXI.Container, this.addChild(this._bg), this._game = new PIXI.Container, this.addChild(this._game), this._fg = new PIXI.Container, this.addChild(this._fg), this._hud = new p["default"], this._hud.setScore(this.score), this._hud.setHiScore(this.highscore), this.addChild(this._hud), this._hud.pauseButton.signals.click.add(this._onPauseButtonClick, this), this._camera = new P3.Camera(new PIXI.Point(260)), this._camera.ease = new PIXI.Point(1, 1), this._camera.addLayer(new P3.CameraLayer(this._bg, new PIXI.Point(.35, .35))), this._camera.addLayer(new P3.CameraLayer(this._game, new PIXI.Point(1, 1))), this._camera.addLayer(new P3.CameraLayer(this._fg, new PIXI.Point(1.45, 1.45))), this._camera.setTarget(new PIXI.Point), this._player = new c["default"], this._player.x = 400, this._player.y = .4 * P3.View.height, this._player.signals.flap.add(this._onPlayerFlap, this), this._game.addChild(this._player);
                        _["default"].assets.texture("ep6_flappyBert_bg_2");
                        this._bgTileWidth = 1480, this._initBgTiles(), this._initFgTiles(), this._initPointerInput(); var e = _["default"].assets,
                            i = [e.texture("particle_bert_feather_00"), e.texture("particle_bert_feather_01"), e.texture("particle_bert_feather_02")],
                            n = _["default"].assets.json("particle_emitter_bert_feathers");
                        this._featherEmitter = new PIXI.particles.Emitter(this._game, i, n), this._featherEmitter.emit = !1 } }, { key: "update", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "update", this).call(this); var e = deltaTime; if (_["default"].input.isKeyPressed(32) && (this._player.flap(e), this._inTut && (this._inTut = !1, this._killPointer())), this._featherEmitter.update(e), !this._inTut) { if (!this._grace && !this._player.falling, this._player.update(e), this._player.y < 0 && (this._player.y = 0), this._player.y > P3.View.height && !this._gameover && (this._player.y = P3.View.height), this._startX !== -1 && (this._score = Math.floor((this._player.x - this._startX) / 100), this._hud.setScore(this.score)), this._camera.target.x = this._player.x, this._camera.update(e), this._player.y > this._floorY && !this._gameover && this.dead(), this._updateBgTiles(), this._updateFgTiles(), !this._grace) { this._updateObstacles(); for (var i = 0; i < this._popouts.length; i++) { var n = this._popouts[i];
                                    n.x < this._player.x + 500 && this._popoutObstacle(n) } }!this._gameover && this._checkCollisions() } } }, { key: "appear", value: function() { var e = this;
                        l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "appear", this).call(this), this._isFirstPlay() && this.signals.pause.dispatch(this, !0), delay(function() { e._player.falling || e._player.flap(deltaTime) }, 3, this) } }, { key: "resize", value: function() { this._hud.resize() } }, { key: "start", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "start", this).call(this), this._topObstacleOffset = 200, this._bottomObstacleOffset = 800, this._obstacleOffset = 500, this._startX = this._player.x, this._isFirstPlay() && this._tutorial(), _["default"].audio.playMusic("music_loop_dramatic_00") } }, { key: "end", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "end", this).call(this), this.playEndVO(this._score), this._hud.setHiScore(this.highscore), _["default"].audio.playSound(["vo_bert_pain_00", "vo_bert_scared_00", "vo_bert_scared_01", "vo_bert_surprise_00", "vo_bert_yelp_00"]), _["default"].audio.stopMusic(), _["default"].audio.playSound("music_fail_stab_01") } }, { key: "dead", value: function() { var e = this;
                        this._player.dead || (_["default"].audio.playSound(["vo_bert_pain_00", "vo_bert_reaction_00", "vo_bert_yelp_00"]), _["default"].audio.playSound(["sfx_bert_hit_wood_00"]), console.warn("ending"), this._featherEmitter.updateOwnerPos(this._player.x, this._player.y), this._featherEmitter.emit = !0, this._player.dead = !0, this._player.view.state.setAnimation(0, "fly_flappy_die", !1), this._gameover = !0, delay(function() { e.end() }, 1, this)) } }, { key: "_createObstacle", value: function(e) { var t = this._camera.position.x + this._camera.view.x + P3.View.width,
                            i = P3.math.randomInt(1, 4),
                            n = void 0,
                            a = new PIXI.Sprite(_["default"].assets.texture("ep6_flappyBert/obstacle_top_00" + i)); switch (a.position.set(t, P3.math.randomInt(-600, -100)), a.anchor.set(.5, 0), this._game.addChild(a), this._obstacles.push(a), i > 2 && (a.rotation = Math.PI * P3.math.random(-.1, .1)), a.colliders = [], i) {
                            case 1:
                                n = new PIXI.Sprite(PIXI.Texture.WHITE), n.tint = 16711680, n.alpha = .5, n.width = a.width, n.height = 75, n.anchor = a.anchor, n.y = a.height - 115, n.rotation = .05 * -Math.PI, a.addChild(n), n.renderable = !1, a.colliders.push(n), n = new PIXI.Sprite(PIXI.Texture.WHITE), n.tint = 16711680, n.alpha = .5, n.width = 25, n.height = a.height - 150, n.anchor = a.anchor, n.x = -45, n.y = 75, a.addChild(n), n.renderable = !1, a.colliders.push(n); break;
                            case 2:
                                n = new PIXI.Sprite(PIXI.Texture.WHITE), n.tint = 16711680, n.alpha = .5, n.width = a.width - 25, n.height = 75, n.anchor = a.anchor, n.y = a.height - 115, n.rotation = .05 * Math.PI, a.addChild(n), n.renderable = !1, a.colliders.push(n), n = new PIXI.Sprite(PIXI.Texture.WHITE), n.tint = 16711680, n.alpha = .5, n.width = 25, n.height = a.height - 150, n.anchor = a.anchor, n.x = -100, n.y = 25, a.addChild(n), n.renderable = !1, a.colliders.push(n); break;
                            case 3:
                                n = new PIXI.Sprite(PIXI.Texture.WHITE), n.tint = 16711680, n.alpha = .5, n.width = a.width - 45, n.height = a.height - 125, n.anchor = a.anchor, n.x = 25, n.rotation = .02 * Math.PI, a.addChild(n), n.renderable = !1, a.colliders.push(n), n = new PIXI.Sprite(PIXI.Texture.WHITE), n.tint = 16711680, n.alpha = .5, n.width = 25, n.height = 125, n.anchor.set(.5), n.x = -55, n.y = a.height - 65, a.addChild(n), n.renderable = !1, a.colliders.push(n), n = new PIXI.Sprite(PIXI.Texture.WHITE), n.tint = 16711680, n.alpha = .5, n.width = 25, n.height = 125, n.anchor.set(.5), n.x = 55, n.y = a.height - 65, n.rotation = .05 * -Math.PI, a.addChild(n), n.renderable = !1, a.colliders.push(n); break;
                            case 4:
                                n = new PIXI.Sprite(PIXI.Texture.WHITE), n.tint = 16711680, n.alpha = .5, n.width = a.width - 45, n.height = a.height - 125, n.anchor = a.anchor, n.x = 25, n.rotation = .02 * Math.PI, a.addChild(n), n.renderable = !1, a.colliders.push(n), n = new PIXI.Sprite(PIXI.Texture.WHITE), n.tint = 16711680, n.alpha = .5, n.width = 5, n.height = 125, n.anchor.set(.5), n.y = a.height - 75, n.rotation = .05 * -Math.PI, a.addChild(n), n.renderable = !1, a.colliders.push(n) } var o = P3.math.randomInt(this._minGap, this._maxGap);
                        i = P3.math.randomInt(1, 4); var s = new PIXI.Sprite(_["default"].assets.texture("ep6_flappyBert/obstacle_btm_00" + i)); switch (s.position.set(t, a.y + a.height + o), s.anchor.set(.5, 0), this._game.addChild(s), this._obstacles.push(s), s.rotation = Math.PI * P3.math.random(-.1, .1), s.colliders = [], i) {
                            case 1:
                                n = new PIXI.Sprite(PIXI.Texture.WHITE), n.tint = 16711680, n.alpha = .5, n.width = .5 * s.width, n.height = s.height, n.anchor = s.anchor, n.y = 15, s.addChild(n), n.renderable = !1, s.colliders.push(n); break;
                            case 2:
                                n = new PIXI.Sprite(PIXI.Texture.WHITE), n.tint = 16711680, n.alpha = .5, n.width = 25, n.height = s.height - 150, n.anchor = s.anchor, n.x = -100, n.y = 25, s.addChild(n), n.renderable = !1, s.colliders.push(n), n = new PIXI.Sprite(PIXI.Texture.WHITE), n.tint = 16711680, n.alpha = .5, n.width = 25, n.height = s.height - 150, n.anchor = s.anchor, n.x = -50, n.y = 25, s.addChild(n), n.renderable = !1, s.colliders.push(n), n = new PIXI.Sprite(PIXI.Texture.WHITE), n.tint = 16711680, n.alpha = .5, n.width = 25, n.height = s.height - 150, n.anchor = s.anchor, n.y = 25, s.addChild(n), n.renderable = !1, s.colliders.push(n), n = new PIXI.Sprite(PIXI.Texture.WHITE), n.tint = 16711680, n.alpha = .5, n.width = 25, n.height = s.height - 150, n.anchor = s.anchor, n.x = 50, n.y = 25, s.addChild(n), n.renderable = !1, s.colliders.push(n), n = new PIXI.Sprite(PIXI.Texture.WHITE), n.tint = 16711680, n.alpha = .5, n.width = 25, n.height = s.height - 150, n.anchor = s.anchor, n.x = 100, n.y = 25, s.addChild(n), n.renderable = !1, s.colliders.push(n); break;
                            case 3:
                                n = new PIXI.Sprite(PIXI.Texture.WHITE), n.tint = 16711680, n.alpha = .5, n.width = .5 * s.width, n.height = s.height, n.anchor = s.anchor, n.x = -45, n.y = 15, n.rotation = .05 * -Math.PI, s.addChild(n), n.renderable = !1, s.colliders.push(n); break;
                            case 4:
                                n = new PIXI.Sprite(PIXI.Texture.WHITE), n.tint = 16711680, n.alpha = .5, n.width = s.width - 45, n.height = s.height - 125, n.anchor = s.anchor, n.x = 25, n.rotation = .02 * Math.PI, s.addChild(n), n.renderable = !1, s.colliders.push(n), n = new PIXI.Sprite(PIXI.Texture.WHITE), n.tint = 16711680, n.alpha = .5, n.width = 15, n.height = 125, n.anchor.set(.5), n.y = s.height - 75, n.rotation = .05 * -Math.PI, s.addChild(n), n.renderable = !1, s.colliders.push(n) } } }, { key: "_createPopout", value: function(e) { var t = this._camera.position.x + this._camera.view.x + P3.View.width,
                            i = new PIXI.Sprite(_["default"].assets.texture("ep6_flappyBert/obstacle_top_surprise_001"));
                        i.position.set(t, P3.math.randomInt(-600, -100)), i.anchor.set(.5, 0), this._game.addChild(i), this._obstacles.push(i), this._popouts.push(i), i.rotation = Math.PI * P3.math.random(-.1, .1); var n = new PIXI.Sprite(PIXI.Texture.WHITE);
                        n.tint = 16711680, n.alpha = .5, n.width = i.width, n.height = i.height - 25, n.anchor = i.anchor, i.addChild(n), n.renderable = !1, i.colliders = [n]; var a = P3.math.randomInt(this._minGap, this._maxGap),
                            o = new PIXI.Sprite(_["default"].assets.texture("ep6_flappyBert/obstacle_btm_surprise_001"));
                        o.position.set(t, i.y + i.height + a), o.anchor.set(.5, 0), this._game.addChild(o), this._obstacles.push(o), this._popouts.push(o), o.rotation = Math.PI * P3.math.random(-.1, .1), n = new PIXI.Sprite(PIXI.Texture.WHITE), n.tint = 16711680, n.alpha = .5, n.width = o.width, n.height = o.height, n.anchor = o.anchor, o.addChild(n), n.renderable = !1, o.colliders = [n], i.location = new PIXI.Point(i.x, i.y), o.location = new PIXI.Point(o.x, o.y), i.y -= .5 * i.height, o.y += .5 * o.height } }, { key: "_createBgTile", value: function() { var e = _["default"].assets,
                            t = "ep6_flappyBert_bg_1";
                        this._bgInitCount++ % 2 === 0 && (t = "ep6_flappyBert_bg_2"); var i = new PIXI.Sprite(e.texture(t));
                        i.x = this._bgTileOffset, this._bgTileWidth = i.width, this._bg.addChild(i), this._bgTiles.push(i), this._bgTileOffset += i.texture.width } }, { key: "_createFgTile", value: function() { var e = _["default"].assets,
                            t = new PIXI.Sprite(e.texture("ep6_flappyBert/fg" + Math.round(Math.random() + 1)));
                        t.x = this._fgTileOffset, t.y = P3.View.height - t.texture.height, this._fg.addChild(t), this._fgTiles.push(t), this._fgTileOffset += t.texture.width } }, { key: "_popoutObstacle", value: function(e) { if (e.location) { var t = e.location;
                            TweenMax.to(e, .35, { y: t.y, ease: Back.easeOut }), e.location = null } } }, { key: "_removeBgTile", value: function() { var e = this._bgTiles.shift();
                        e.destroy() } }, { key: "_removeFgTile", value: function() { var e = this._fgTiles.shift();
                        e.destroy() } }, { key: "_initPointerInput", value: function() { var e = this;
                        this._bg.interactive = !0, this._bg.pointerdown = this._bg.touchstart = function() { return e._onPointerDown() } } }, { key: "_initBgTiles", value: function() { for (var e = (_["default"].assets, Math.floor(P3.View.width / this._bgTileWidth) + 1), t = 0; t < e; ++t) this._createBgTile() } }, { key: "_initFgTiles", value: function() { for (var e = 0; e < 1; ++e) this._createFgTile() } }, { key: "_updateBgTiles", value: function() { var e = this._camera.findLayer(this._bg, !1),
                            t = (this._camera.position.x - this._camera.view.x) * e.parallax.x + P3.View.width;
                        t > this._bgTileOffset && this._createBgTile(); var i = (_["default"].assets, Math.floor(P3.View.width / this._bgTileWidth) + 2);
                        this._bgTiles.length > i && this._removeBgTile() } }, { key: "_updateFgTiles", value: function() { var e = this._camera.findLayer(this._fg, !1),
                            t = (this._camera.position.x - this._camera.view.x) * e.parallax.x + P3.View.width;
                        t > this._fgTileOffset && this._createFgTile(); var i = _["default"].assets,
                            n = i.texture("ep6_flappyBert/fg" + Math.round(Math.random() + 1)),
                            a = Math.floor(P3.View.width / n.width) + 2;
                        this._fgTiles.length > a && this._removeFgTile() } }, { key: "_updateObstacles", value: function() { var e = this,
                            t = this._camera.position.x; return 1 === this._spawnedObstacles ? (this._done || delay(function() { e._obstacleOffset += .5 * e._offsetSize, e._spawnedObstacles++ }, 3), void(this._done = !0)) : void(t > this._obstacleOffset && (this._spawnedObstacles < 5 ? this._createObstacle() : Math.random() < .8 ? this._createObstacle() : this._createPopout(), this._obstacleOffset += this._offsetSize, this._spawnedObstacles++, this._spawnedObstacles % 5 === 0 && (this._minGap > 150 && (this._minGap -= 25), this._maxGap > 250 && (this._maxGap -= 25)))) } }, { key: "_checkCollisions", value: function() { for (var e = 0; e < this._obstacles.length; ++e)
                            for (var t = this._obstacles[e], i = 0; i < t.colliders.length; i++) { var n = t.colliders[i]; if (this.collide(n, this._player.collider)) return void this.dead() } } }, { key: "_onPlayerFlap", value: function() { this._graceDuration = 0 } }, { key: "_onPointerDown", value: function() { this._player.flap(deltaTime), this._inTut && (this._inTut = !1, this._killPointer()) } }, { key: "_initParticles", value: function(e) { var t = _["default"].assets,
                            i = t.json("particle_emitter_fairdust_01");
                        i.spawnRect.w = _["default"].STAGE_WIDTH, i.spawnRect.h = P3.View.height; var n = new PIXI.particles.Emitter(e, [t.texture("particle_fairy_dust_00"), t.texture("particle_fairy_dust_01")], i); return n.emit = !0, n } }, { key: "_tutorial", value: function() { this._inTut = !0, this._initTutorialPointer(this._game), this._animatePointer({ x: this._player.x + 125, y: this._player.y + 125 }) } }, { key: "collide", value: function(e, t) { if (this.collideAABB(e, t)) { var i = this.collideSAT(e, t); if (i) return i } return !1 } }, { key: "collideAABB", value: function(e, t) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : new PIXI.Point(1, 1); return e = e.getBounds(), t = t.getBounds(), !(t.x > e.x + e.width * i.x || t.x + t.width * i.x < e.x || t.y > e.y + e.height * i.y || t.y + t.height * i.y < e.y) } }, { key: "collideSAT", value: function(e, t) {
                        function i(e) { for (var t = _["default"].matrix(4, 2), i = 0, n = 0; n < e.length; n += 2) t[i][0] = e[n], t[i][1] = e[n + 1], i++; return t } for (var n = i(void 0 === e.points ? e.vertexData : e.points), a = i(void 0 === t.points ? t.vertexData : t.points), o = n.length, s = a.length, r = { x: 0, y: 0 }, l = void 0, u = void 0, h = void 0, c = void 0, d = void 0, p = void 0, f = void 0, y = void 0, v = void 0, m = void 0, g = 0; g < o; g++) { v = n[g === o - 1 ? 0 : g + 1], m = n[g], r.x = -(v[1] - m[1]), r.y = v[0] - m[0], l = Math.sqrt(r.x * r.x + r.y * r.y), r.x /= l, r.y /= l, u = h = -1, c = d = -1; for (var w = 0; w < o; ++w) y = n[w][0] * r.x + n[w][1] * r.y, (y > c || c === -1) && (c = y), (y < u || u === -1) && (u = y); for (var b = 0; b < s; ++b) y = a[b][0] * r.x + a[b][1] * r.y, (y > d || d === -1) && (d = y), (y < h || h === -1) && (h = y); if (p = u < h ? h - c : u - d, p > 0) return !1;
                            p > f && (f = p) } for (var P = 0; P < s; P++) { v = a[P === s - 1 ? 0 : P + 1], m = a[P], r.x = -(v[1] - m[1]), r.y = v[0] - m[0], l = Math.sqrt(r.x * r.x + r.y * r.y), r.x /= l, r.y /= l, u = h = -1, c = d = -1; for (var x = 0; x < o; ++x) y = n[x][0] * r.x + n[x][1] * r.y, (y > c || c === -1) && (c = y), (y < u || u === -1) && (u = y); for (var k = 0; k < s; ++k) y = a[k][0] * r.x + a[k][1] * r.y, (y > d || d === -1) && (d = y), (y < h || h === -1) && (h = y); if (p = u < h ? h - c : u - d, p > 0) return !1;
                            p > f && (f = p) } return { overlap: f } } }]), t }(y["default"]);
        i["default"] = v }, { "../../MinigameScene": 28, "./../../Common": 13, "./FlappyBert": 101, "./Hud": 103 }],
    103: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("../../Common"),
            u = n(l),
            _ = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._pauseButton = null, e.init(), e } return s(t, e), r(t, [{ key: "init", value: function() { this._createScorePanel("minigame_icon_ep6_2"), this._createHiScorePanel(), this._createPauseButton() } }, { key: "resize", value: function() { this._score.x = 80, this._score.y = 10, this._hiscore.x = .5 * P3.View.width, this._hiscore.y = 60, this._pauseButton.x = P3.View.width - 100, this._pauseButton.y = 100 } }, { key: "_createScorePanel", value: function(e) { this._score = new PIXI.Container, this._score.visible = !1, this.addChild(this._score); var t = new PIXI.Sprite(u["default"].assets.texture("minigame_generic_panel"));
                        this._score.addChild(t); var i = new PIXI.Sprite(u["default"].assets.texture(e));
                        this._score.addChild(i), webfont ? (this._score.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "left", fill: 16777215 }), this._score.label.x = 110, this._score.label.y = 60, this._score.label.anchor.set(.5), this._score.addChild(this._score.label)) : (this._score.label = new PIXI.extras.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), this._score.label.x = 110, this._score.label.y = 66, this._score.label.anchor.set(.5), this._score.addChild(this._score.label)) } }, { key: "setScore", value: function(e) { this._score.visible = !0, this._score.label.text = "" + e } }, { key: "_createHiScorePanel", value: function() { this._hiscore = new PIXI.Container, this._hiscore.visible = !1, this.addChild(this._hiscore); var e = new PIXI.Sprite(u["default"].assets.texture("minigame_generic_panel"));
                        e.anchor.set(.5), this._hiscore.addChild(e); var t = new PIXI.Sprite(u["default"].assets.texture("minigame_icon_best"));
                        t.anchor.set(.5), this._hiscore.addChild(t), webfont ? (this._hiscore.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "center", fill: 16777215 }), this._hiscore.label.y = 15, this._hiscore.label.anchor.set(.5), this._hiscore.addChild(this._hiscore.label)) : (this._hiscore.label = new PIXI.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), this._hiscore.label.y = 18, this._hiscore.label.anchor.set(.5), this._hiscore.addChild(this._hiscore.label)) } }, { key: "setHiScore", value: function(e) { this._hiscore.visible = !0, this._hiscore.label.text = e.toString() } }, { key: "_createPauseButton", value: function() { var e = u["default"].assets,
                            t = new P3.ButtonStates;
                        t.normal = e.texture("btn_primary_small_off"), t.over = e.texture("btn_primary_small_over"), t.down = e.texture("btn_primary_small_over"), t.icon = e.texture("icon_help"), this._pauseButton = new P3.Button(t), this.addChild(this._pauseButton) } }, { key: "pauseButton", get: function() { return this._pauseButton } }]), t }(PIXI.Container);
        i["default"] = _ }, { "../../Common": 13 }],
    104: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Actor"),
            _ = n(u),
            h = e("../../Common"),
            c = n(h),
            d = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    i.hitRock = !1, i._kickStrength = new PIXI.Point, i._world = e; var n = new PIXI.Container;
                    i.addChild(n), i._view = new PIXI.spine.Spine(c["default"].assets.spineData("frogprince")), i._view.scale.set(.4), i._view.skeleton.setToSetupPose(), i._view.skeleton.setSkin(null), i._view.skeleton.setSkinByName("default"), i._view.stateData.defaultMix = .15, i._view.autoUpdate = !1, i._view.update(0), n.addChild(i._view), i._skipFrame = 0; for (var s = ["run-angry-fast", "run-jump", "kicked"], r = 0; r < s.length; r++)
                        for (var l = 0; l < s.length; l++) r != l && i._view.state.data.setMix(s[r], s[l], .1); return i.faceDirection(1), i } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this.idle(), this._view.state.addListener({ event: this._onAnimationEvent.bind(this) }) } }, { key: "destroy", value: function(e) { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "update", value: function(e) { this._collisionGraphic && (this._collisionGraphic.x = this._view.x, this._collisionGraphic.y = this._view.y), this._skipFrame++ % 2 === 0 && this._view.update(2 * e) } }, { key: "idle", value: function() { this._view.state.setAnimation(0, "idle_angry", !0) } }, { key: "run", value: function() { this._view.state.setAnimation(0, "run-angry-fast", !0), this._frogFootstepLoop = c["default"].audio.playSound("sfx_poodle_run_loop_00", !0) } }, { key: "jump", value: function() { this._view.state.setAnimation(0, "run-jump", !1), this._frogFootstepLoop && this._frogFootstepLoop.howl.stop() } }, { key: "kicked", value: function(e) { this._view.state.setAnimation(0, "kicked", !0); var t = this._world.powerGauge,
                            i = new PIXI.Point(t.parent.position.x, t.parent.position.y),
                            n = t.rotation + t.parent.rotation,
                            a = new P3.Vector2(Math.cos(n), Math.sin(n));
                        a.scaleBy(1200 * t.strength * Math.pow(e, 2)); var o = new PIXI.Point(i.x + a.x, i.y + a.y),
                            s = new PIXI.Point(o.x + a.x, o.y + -a.y),
                            r = 500 + (s.x - i.x),
                            l = -o.y,
                            u = new P3.Vector2(this.x + .5 * r - this.x, l - this.y),
                            _ = 1400,
                            h = u.length / _;
                        this._kickStrength.set(r, l), this._kickTimeline = new TimelineMax({ onComplete: function() { this._kickTimeline = null }, onCompleteScope: this }), this._kickTimeline.to(this, 2 * h, { x: this.x + r, ease: Linear.easeNone }, 0), this._kickTimeline.to(this, h, { y: -l, ease: Sine.easeOut }, 0), this._kickTimeline.to(this, h, { y: this._world.getGroundY(0) + 200, ease: Sine.easeIn }, h), this._frogFootstepLoop && this._frogFootstepLoop.howl.stop(), c["default"].audio.playSound(["vo_frogman_kicked_00", "vo_frogman_kicked_01", "vo_frogman_kicked_02"]) } }, { key: "bounce", value: function() { if (!this.hitRock) { this._kickStrength.x *= .84, this._kickStrength.y *= .6; var e = this._kickStrength.x,
                                t = this._kickStrength.y,
                                i = new P3.Vector2(this.x + .5 * e - this.x, t - this.y),
                                n = 1400,
                                a = i.length / n;
                            this._kickTimeline.kill(), this._kickTimeline = new TimelineMax({ onComplete: function() { this._kickTimeline = null }, onCompleteScope: this }), this._kickTimeline.to(this, 2 * a, { x: this.x + e, ease: Linear.easeNone }, 0), this._kickTimeline.to(this, a, { y: -t, ease: Sine.easeOut }, 0), this._kickTimeline.to(this, a, { y: this._world.getGroundY(0) + 200, ease: Sine.easeIn }, a) } } }, { key: "smash", value: function() { var e = -320,
                            t = 200,
                            i = new P3.Vector2(this.x + .5 * e - this.x, t - this.y),
                            n = 600,
                            a = i.length / n;
                        this.hitRock = !1, this._kickTimeline.kill(), this._kickTimeline = new TimelineMax({ onComplete: function() { this._kickTimeline = null }, onCompleteScope: this }), this._kickTimeline.to(this, 2 * a, { x: this.x + e, ease: Linear.easeNone }, 0), this._kickTimeline.to(this, a, { y: -t, ease: Sine.easeOut }, 0), this._kickTimeline.to(this, a, { y: this._world.getGroundY(0) + 200, ease: Sine.easeIn }, a) } }, { key: "pause", value: function() { this._kickTimeline && this._kickTimeline.pause() } }, { key: "resume", value: function() { this._kickTimeline && this._kickTimeline.resume() } }, { key: "_playFootstepSFX", value: function() { c["default"].audio.playSound(["sfx_footstep_00", "sfx_footstep_01", "sfx_footstep_02", "sfx_footstep_03", "sfx_footstep_04"]) } }, { key: "_onAnimationEvent", value: function(e, t) { "sfx_footstep" === t.data.name && this._playFootstepSFX() } }]), t }(_["default"]);
        i["default"] = d }, { "../../Actor": 4, "../../Common": 13 }],
    105: [function(e, t, i) {
        "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 });
        var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function w(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : w(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Common"),
            _ = n(u),
            h = e("./World"),
            c = n(h),
            d = e("./Hud"),
            p = n(d),
            f = e("./InteractiveArea"),
            y = n(f),
            v = e("../../MinigameScene"),
            m = n(v),
            g = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._states = { GRACE: 1, INTRO: 2, GAMEPLAY: 3, KICK: 4, KICK_RESULT: 5, KISS: 6, GAMEOVER: 7, POWER: 8, INACTIVE: -1 }, e._gamestate = null, e._gamestateTime = 0, e._nextGamestate = e._states.INACTIVE, e._graceDuration = 0, e._lives = 3, e._tutorial = !1, e._paused = !1, e._roundScore = 0, e._frogmanJumpDistance = 180, e._frogmanKickRange = 400, e._frogmanKickStrength = 0, e._kickSet = !1, e } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this._world = new c["default"], this.addChild(this._world), this._interactiveArea = new y["default"](1), this.addChild(this._interactiveArea), this._hud = new p["default"], this._hud.setScore(0, 0), this._hud.setScore(0, 1), this._hud.setScore(0, 2), this._hud.setHighscore(this.highscore), this.addChild(this._hud), this._hud.pauseButton.signals.click.add(this.onPauseButtonClick, this) } }, { key: "destroy", value: function(e) { this._frogmanTimeline && this._frogmanTimeline.kill(), this._walkTimeline && this._walkTimeline.kill(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, { children: !0 }) } }, { key: "resize", value: function() { this.x = .5 * (P3.View.width - _["default"].STAGE_WIDTH), this._hud.resize() } }, { key: "appear", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "appear", this).call(this), this._isFirstPlay() && this.signals.pause.dispatch(this, !0), this._nextGamestate = this._states.GRACE } }, { key: "update", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "update", this).call(this); var e = deltaTime; switch (this._paused && (e = 0), this._world.update(e), this._nextGamestate ? (this._gamestate = this._nextGamestate, this._gamestateTime = 0, this._nextGamestate = null) : this._gamestateTime += e, this._gamestate) {
                            case this._states.GRACE:
                                this._gamestateTime > this._graceDuration && (this._nextGamestate = this._states.INTRO); break;
                            case this._states.INTRO:
                                0 === this._gamestateTime ? console.log("set power state") : this._gamestateTime > (this._isFirstPlay() ? 0 : 3.2) && (this._nextGamestate = this._states.POWER); break;
                            case this._states.POWER:
                                if (0 === this._gamestateTime) { this._world.avatar.aim(), this._world.rippleFX.updateOwnerPos(this._world.avatar.x + 1020, this._world.avatar.y + 30); var i = { value: this._world.rippleFX.ownerPos.x };
                                    this._tweenList.add(TweenMax.to(i, 1, { delay: .4, value: this._world.avatar.x + 640, ease: Power1.easeOut, onStart: function() { this._world.rippleFX.emit = !0 }, onStartScope: this, onUpdate: function() { this._world.rippleFX.updateOwnerPos(i.value, this._world.rippleFX.ownerPos.y) }, onUpdateScope: this })), this._world.changeFocusTarget(this._world.avatar, 1, 0), this._world.changeFocusPoint(new PIXI.Point(.35, this._world.focusPoint.y), 1, 0), this._world.focusActive.y = !1, this._roundScore = 0, this._hud.setScore(this._roundScore, 3 - this._lives), this._kickSet = !1, this._world.resetObstacles(), this._world.powerGauge.fadeIn(function() { this._world.powerGauge.startAngleAnimation() }, this), this._frogmanKickStrength = 0, this._world.powerGauge.setPower(0), this._interactiveArea.getArea(0).signals.clicked.removeAll(), this._interactiveArea.getArea(0).signals.clicked.add(function() { this._world.powerGauge.stopAngleAnimation(), this._nextGamestate = this._states.GAMEPLAY }.bind(this)), this._debug = new PIXI.Graphics, this._world.layerMg.addChild(this._debug), _["default"].audio.playMusic("music_loop_frantic_fun_00") } else { var n = new PIXI.Point(this._world.powerGauge.parent.position.x, this._world.powerGauge.parent.position.y),
                                        a = this._world.powerGauge.rotation + this._world.powerGauge.parent.rotation,
                                        o = new P3.Vector2(Math.cos(a), Math.sin(a));
                                    o.scaleBy(1200 * this._world.powerGauge.strength); var s = new PIXI.Point(n.x + o.x, n.y + o.y),
                                        r = new PIXI.Point(s.x + o.x, s.y + -o.y);
                                    new PIXI.Point(P3.math.lerp(n.x, r.x, .5), P3.math.lerp(n.y, r.y, .5)) } break;
                            case this._states.GAMEPLAY:
                                if (0 === this._gamestateTime) this.frogmanRun(), this._kicked = !1, this._interactiveArea.getArea(0).signals.clicked.removeAll(), this._interactiveArea.getArea(0).signals.clicked.add(function() { this.setKick() }.bind(this));
                                else { var u = this._world.frogman.x - this._world.avatar.x - this._frogmanJumpDistance;
                                    this._kickSet || (this._frogmanKickStrength = Math.pow(Math.max(0, 1 - u / this._frogmanKickRange), 3), this._world.powerGauge.setPower(this._frogmanKickStrength)), console.log("distance:", u, "strength:", this._frogmanKickStrength), this._isFirstPlay() && !this._tutorial && this._frogmanKickStrength > .75 && this.tutorial(), _["default"].input.isKeyPressed(32) && this.setKick(), u <= 0 && this._frogmanKickStrength > 0 && this._kickSet && this.kick() } break;
                            case this._states.KISS:
                                0 === this._gamestateTime && (--this._lives, this._world.powerGauge.fadeOut(), this._world.focusTarget = new PIXI.Point(this._world.avatar.x, this._world.avatar.y), this._score += this._roundScore, this.walkBackToPosition(3, function() { 0 === this._lives ? this._nextGamestate = this._states.GAMEOVER : this._nextGamestate = this._states.POWER }, this)); break;
                            case this._states.KICK:
                                0 === this._gamestateTime ? (this._world.powerGauge.fadeOut(), this._world.changeFocusTarget(this._world.frogman, 1, 0), this._world.changeFocusPoint(new PIXI.Point(.6, this._world.focusPoint.y), 1, 0)) : (this._updateDistance(), this._world.collideFrogmanWithObstacles(), this._world.frogman.y > this._world.getGroundY(0) + 100 && (this._nextGamestate = this._states.KICK_RESULT)); break;
                            case this._states.KICK_RESULT:
                                0 === this._gamestateTime ? (--this._lives, this._world.addMarker(this._world.frogman.x, 0), this._score += this._roundScore) : 0 === this._lives && this._gamestateTime > 3 ? this._nextGamestate = this._states.GAMEOVER : this._lives > 0 && this._gamestateTime > 1 && (this._nextGamestate = this._states.POWER); break;
                            case this._states.GAMEOVER:
                                0 === this._gamestateTime && (0 !== this._score ? (this._world.changeFocusTarget(this._world.avatar, 2, 0), this._world.changeFocusPoint(new PIXI.Point(.5, this._world.focusPoint.y), 2, 0), this._world.changeZoom(1.3, 2), this._world.avatar.celebrate()) : this.walkBackToPosition(1, function() { this._world.changeFocusTarget(this._world.avatar, 2, 0), this._world.changeFocusPoint(new PIXI.Point(.5, this._world.focusPoint.y), 2, 0), this._world.changeZoom(1.3, 2), this._world.avatar.celebrate() }, this), _["default"].audio.stopMusic(), _["default"].audio.playSound("music_fail_stab_01")), this._gamestateTime > 4 && (this._nextGamestate = this._states.INACTIVE, this.end()) } } }, { key: "end", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "end", this).call(this), this.playEndVO(this._score), this._hud.setHighscore(this.highscore) } }, { key: "kick", value: function() { this._kicked || this._tutorial && this._gamestate === this._states.GAMEPLAY && (this.tutorialEnd(), this._kicked = !0, this._frogmanTimeline && (this._frogmanTimeline.kill(), this._frogmanTimeline = null), this._world.avatar.kick(), this._world.frogman.kicked(this._frogmanKickStrength), this._nextGamestate = this._states.KICK) } }, { key: "setKick", value: function() { if (!this._kickSet && this._tutorial && this._gamestate === this._states.GAMEPLAY) { this.tutorialEnd(), this._kickSet = !0; var e = this._world.frogman.x - this._world.avatar.x - this._frogmanJumpDistance;
                            e > this._frogmanKickRange && this._world.avatar.miss() } } }, { key: "frogmanRun", value: function() { var e = this,
                            t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0;
                        this._world.frogman.visible = !0, this._world.frogman.x = -450, this._world.frogman.y = this._world.avatar.y + 200, this._world.frogman.hitRock = !1, this._world.frogman.idle(), this._frogmanTimeline = new TimelineMax({ delay: t }), this._tweenList.add(delay(function() { e._world.splashFX.position.set(e._world.frogman.x - 130, e._world.avatar.y - 100), e._world.splashFX.visible = !0, e._world.splashFX.gotoAndPlay(0), _["default"].audio.playSound("sfx_frogprince_splash_00"), e._world.rippleFX.emit = !1 }, .15, this)), this._frogmanTimeline.to(this._world.frogman, .5, { y: this._world.avatar.y, ease: Sine.easeOut }), this._frogmanTimeline.to(this._world.frogman, 1.5, { x: this._world.avatar.x + 100, ease: Sine.easeIn, onStartScope: this, onStart: function() {!this._kickSet && this._world.avatar.powerup(), this._world.frogman.run(), this._world.powerGauge.fadeIn() } }, .5), this._frogmanTimeline.to(this._world.frogman, .3, { y: this._world.avatar.y - 120, ease: Sine.easeOut, onStartScope: this, onStart: function() { this._world.frogman.jump() } }, 1.8), this._frogmanTimeline.to(this._world.frogman, 1, { x: this._world.avatar.x - 600, ease: Sine.easeOut, onStartScope: this, onStart: function() { this._nextGamestate = this._states.KISS } }, 2), this._frogmanTimeline.to(this._world.avatar, 1, { x: this._world.avatar.x - 550, ease: Sine.easeOut, onStartScope: this, onStart: function() { this._world.avatar.kissed() }, onCompleteScope: this, onComplete: function() { this._world.frogman.visible = !1 } }, 2) } }, { key: "walkBackToPosition", value: function(e, t, i) { this._walkTimeline = new TimelineMax({ delay: e || 0, onCompleteScope: i, onComplete: t }), this._walkTimeline.to(this._world.avatar, 1, { x: -1050, ease: Linear.easeNone, onStartScope: this, onStart: function() { this._world.avatar.walk() }, onCompleteScope: this, onComplete: function() { this._world.avatar.idle() } }) } }, { key: "pause", value: function() { this._frogmanTimeline && this._frogmanTimeline.pause(), this._walkTimeline && this._walkTimeline.pause(), this._world.frogman.pause() } }, { key: "resume", value: function() { this._frogmanTimeline && this._frogmanTimeline.resume(), this._walkTimeline && this._walkTimeline.resume(), this._world.frogman.resume() } }, { key: "tutorial", value: function() { this._paused = !0, this._tutorial = !0, TweenMax.pauseAll(), this._initTutorialPointer(this._world), this._animatePointer({ x: this._world.frogman.x, y: this._world.frogman.y - this._world.frogman.height / 2 }) } }, { key: "tutorialEnd", value: function() { this._paused && (this._killPointer(), this._paused = !1, TweenMax.resumeAll()) } }, { key: "_updateDistance", value: function() { this._roundScore = Math.round(Math.max(0, this._world.frogman.x - this._world.avatar.x) / 140), this._hud.setScore(this._roundScore, 3 - this._lives) } }, { key: "onPauseButtonClick", value: function(e) { this.signals.pause.dispatch(this) } }]), t }(m["default"]);
        i["default"] = g
    }, { "../../Common": 13, "../../MinigameScene": 28, "./Hud": 106, "./InteractiveArea": 107, "./World": 111 }],
    106: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function c(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : c(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Common"),
            _ = n(u),
            h = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._livesPanel = null, e._scorePanel = null, e._highscorePanel = null, e._pauseButton = null, e.init(), e } return s(t, e), r(t, [{ key: "init", value: function() { this._createHighscorePanel(), this._scorePanel = new PIXI.Container, this.addChild(this._scorePanel), this._scorePanel.first = this._createScorePanel(), this._scorePanel.first.position.set(0, 0), this._scorePanel.addChild(this._scorePanel.first), this._scorePanel.second = this._createScorePanel(), this._scorePanel.second.position.set(0, 80), this._scorePanel.addChild(this._scorePanel.second), this._scorePanel.third = this._createScorePanel(), this._scorePanel.third.position.set(0, 160), this._scorePanel.addChild(this._scorePanel.third), this._createPauseButton() } }, { key: "destroy", value: function() { this._pauseButton.destroy(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "resize", value: function() { this._scorePanel.x = .5 * (_["default"].STAGE_WIDTH - P3.View.width), this._scorePanel.y = 74, this._highscorePanel.x = .5 * _["default"].STAGE_WIDTH, this._highscorePanel.y = 60, this._pauseButton.x = .5 * (_["default"].STAGE_WIDTH + P3.View.width) - 100, this._pauseButton.y = 100 } }, { key: "setLives", value: function(e) { for (var t = _["default"].assets, i = 0; i < this._livesPanel.icons.length; i++) this._livesPanel.icons[i].texture = t.texture("minigame_tries_icon_00" + (i + 1) + "_" + (i < e ? "on" : "off")) } }, { key: "setScore", value: function(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
                            i = [this._scorePanel.first, this._scorePanel.second, this._scorePanel.third],
                            n = i[t];
                        n.label.text = e.toString() } }, { key: "setHighscore", value: function(e) { this._highscorePanel.label.text = e.toString() } }, { key: "_createScorePanel", value: function() { var e = _["default"].assets,
                            t = new PIXI.Container; return t.background = new PIXI.Sprite(e.texture("minigame_frogkick_panel")), t.background.anchor.set(0, .5), t.addChild(t.background), t.icon = new PIXI.Sprite(e.texture("minigame_icon_ep3_2")), t.icon.position.set(0, 0), t.icon.anchor.set(0, .5), t.addChild(t.icon), webfont ? (t.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "left", fill: 16777215 }), t.label.position.set(124, 0), t.label.anchor.set(.5), t.addChild(t.label)) : (t.label = new PIXI.extras.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), t.label.position.set(124, 4), t.label.anchor.set(.5), t.addChild(t.label)), t } }, { key: "_createHighscorePanel", value: function() { var e = _["default"].assets,
                            t = new PIXI.Container;
                        t.background = new PIXI.Sprite(e.texture("minigame_generic_panel")), t.background.anchor.set(.5), t.addChild(t.background), t.icon = new PIXI.Sprite(e.texture("minigame_icon_best")), t.icon.anchor.set(.5), t.addChild(t.icon), webfont ? (t.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "center", fill: 16777215 }), t.label.y = 15, t.label.anchor.set(.5), t.addChild(t.label)) : (t.label = new PIXI.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), t.label.y = 18, t.label.anchor.set(.5), t.addChild(t.label)), this._highscorePanel = t, this.addChild(this._highscorePanel) } }, { key: "_createPauseButton", value: function() { var e = _["default"].assets,
                            t = new P3.ButtonStates;
                        t.normal = e.texture("btn_primary_small_off"), t.over = e.texture("btn_primary_small_over"), t.down = e.texture("btn_primary_small_over"), t.icon = e.texture("icon_help"), this._pauseButton = new P3.Button(t), this.addChild(this._pauseButton) } }, { key: "pauseButton", get: function() { return this._pauseButton } }]), t }(PIXI.Container);
        i["default"] = h }, { "../../Common": 13 }],
    107: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function c(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : c(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Common"),
            _ = n(u),
            h = function(e) {
                function t() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1;
                    a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    i._interactiveAreas = []; for (var n = 0; n < e; n++) { var s = new PIXI.Sprite(PIXI.Texture.EMPTY);
                        s.x = _["default"].STAGE_WIDTH / e * n, s.width = _["default"].STAGE_WIDTH / e, s.height = _["default"].STAGE_HEIGHT, s.interactive = !0, s.signals = {}, s.signals.clicked = new signals.Signal, s.signals.released = new signals.Signal, s.mousedown = s.touchstart = function() { this.signals.clicked.dispatch(this) }.bind(s), s.mouseup = s.touchend = function() { this.signals.released.dispatch(this) }.bind(s), s.mouseupoutisde = s.touchendoutside = function() { this.signals.released.dispatch(this) }.bind(s), i.addChild(s), i._interactiveAreas.push(s) } return i } return s(t, e), r(t, [{ key: "init", value: function() {} }, { key: "resize", value: function() {} }, { key: "destroy", value: function(e) { for (var i = 0; i < this._interactiveAreas.length; i++)
                            for (var n in this._interactiveAreas[i].signals) this._interactiveAreas[i].signals[n].dispose();
                        l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "getArea", value: function(e) { return this._interactiveAreas[e] } }, { key: "removeAllEvents", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null; if (null === e)
                            for (var e = 0; e < this._interactiveAreas.length; e++)
                                for (var t in this._interactiveAreas[e].signals) this._interactiveAreas[e].signals[t].removeAll();
                        else
                            for (var t in this._interactiveAreas[e].signals) this._interactiveAreas[e].signals[t].removeAll() } }]), t }(PIXI.Container);
        i["default"] = h }, { "../../Common": 13 }],
    108: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Actor"),
            _ = n(u),
            h = e("../../Common"),
            c = n(h),
            d = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    i._world = e, i._shadow = new PIXI.Sprite(c["default"].assets.texture("shadow")), i._shadow.anchor.set(.5), i._shadow.alpha = 1, i._shadow.scale.set(1.3), i.addChildAt(i._shadow, 0); var n = new PIXI.Container;
                    i.addChild(n), i._view = new PIXI.spine.Spine(c["default"].assets.spineData("ivandoe_front")), i._view.scale.set(.4), i._view.skeleton.setToSetupPose(), i._view.skeleton.setSkin(null), i._view.skeleton.setSkinByName("standard"), i._view.stateData.defaultMix = .15, i._view.autoUpdate = !1, i._view.update(0), n.addChild(i._view), i._skipFrame = 0; for (var s = ["idle_posing_1", "walk-smooth", "frog_kick_hit", "frog_kick_idle", "frog_kick_kissed", "frog_kick_miss", "frog_kick_powerup"], r = 0; r < s.length; r++)
                        for (var l = 0; l < s.length; l++) r != l && i._view.state.data.setMix(s[r], s[l], .1); return i.faceDirection(1), i } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this.idle(), this._view.state.addListener({ event: this._onAnimationEvent.bind(this) }) } }, { key: "destroy", value: function(e) { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "update", value: function(e) { this._collisionGraphic && (this._collisionGraphic.x = this._view.x, this._collisionGraphic.y = this._view.y), this._skipFrame++ % 2 === 0 && this._view.update(2 * e) } }, { key: "idle", value: function() { this._view.state.setAnimation(0, "idle_posing_1", !0, 0) } }, { key: "aim", value: function() { this._view.state.setAnimation(0, "frog_kick_idle", !0, 0) } }, { key: "kissed", value: function() { this._view.state.setAnimation(0, "frog_kick_kissed", !1, 0), c["default"].audio.playSound("vo_bert_yelp_00") } }, { key: "walk", value: function() { this._view.state.setAnimation(0, "walk-smooth", !0, 0) } }, { key: "powerup", value: function() { this._view.state.setAnimation(0, "frog_kick_powerup", !1, 0) } }, { key: "kick", value: function() { this._view.state.setAnimation(0, "frog_kick_hit", !1, 0), this._view.state.addAnimation(0, "idle_posing_1", !0, 0), c["default"].audio.playSound("sfx_rock_hit_ivandoe_00") } }, { key: "miss", value: function() { this._view.state.setAnimation(0, "frog_kick_miss", !1, 0), this._view.state.addAnimation(0, "idle_posing_1", !0, 0) } }, { key: "celebrate", value: function() { this._view.state.setAnimation(0, "draw_sword", !1, 0), this._view.state.addAnimation(0, "draw_sword_idle", !0, 0), c["default"].audio.playSound("vo_ivandoe_laugh_00") } }, { key: "_playFootstepSFX", value: function() { c["default"].audio.playSound(["sfx_footstep_00", "sfx_footstep_01", "sfx_footstep_02", "sfx_footstep_03", "sfx_footstep_04"]) } }, { key: "_onAnimationEvent", value: function(e, t) { "sfx_footstep" === t.data.name && this._playFootstepSFX() } }]), t }(_["default"]);
        i["default"] = d }, { "../../Actor": 4, "../../Common": 13 }],
    109: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function c(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : c(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Common"),
            _ = n(u),
            h = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)),
                        n = ["ep3_frogKick/marker_red", "ep3_frogKick/marker_green", "ep3_frogKick/marker_blue"],
                        s = new PIXI.Sprite(_["default"].assets.texture(n[e])); return s.anchor = new PIXI.Point(.5, .5), s.scale.set(.8), i.addChild(s), i.alpha = 0, i } return s(t, e), r(t, [{ key: "destroy", value: function(e) { this._animateTimeline && this._animateTimeline.kill(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "animateIn", value: function() { this._animateTimeline = new TimelineMax, this._animateTimeline.fromTo(this, .4, { y: this.y + 240 }, { y: this.y, alpha: 1, ease: Back.easeOut }) } }, { key: "update", value: function(e) {} }]), t }(PIXI.Container);
        i["default"] = h }, { "../../Common": 13 }],
    110: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function c(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : c(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Common"),
            _ = n(u),
            h = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._bg = new PIXI.Sprite(_["default"].assets.texture("ep3_frogKick/powerbar_back")), e._bg.anchor.set(-1, .5), e.addChild(e._bg), e._fill = new PIXI.Sprite(_["default"].assets.texture("ep3_frogKick/powerbar_fill")), e._fill.anchor.set(-1, .5), e.addChild(e._fill), e._fillMask = new PIXI.Sprite(PIXI.Texture.WHITE), e._fillMask.x = e._fill.width, e._fillMask.anchor.set(0, .5), e._fillMask.width = 1e-6, e._fillMask.height = e._fill.height, e._fill.addChild(e._fillMask), e._fill.mask = e._fillMask, e._frame = new PIXI.Sprite(_["default"].assets.texture("ep3_frogKick/powerbar_frame")), e._frame.anchor.set(-1, .5), e.addChild(e._frame), e.alpha = 0, e._rotationFrequency = .06, e._rotationAmplitude = .34, e._rotationEnabled = !1, e._theta = Math.random() * (2 * Math.PI), e.rotation = Math.sin(e._theta * e._rotationFrequency) * e._rotationAmplitude, e } return s(t, e), r(t, [{ key: "destroy", value: function(e) { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "fadeIn", value: function(e, t) { this.setPower(0), TweenMax.to(this, .34, { alpha: 1, ease: Power1.easeInOut, onComplete: e, onCompleteScope: t }) } }, { key: "fadeOut", value: function(e, t) { TweenMax.to(this, .24, { alpha: 0, ease: Power1.easeInOut, onComplete: e, onCompleteScope: t }) } }, { key: "update", value: function(e) { this._rotationEnabled && (this.rotation = Math.sin(++this._theta * this._rotationFrequency) * this._rotationAmplitude) } }, { key: "setPower", value: function(e) { this._fillMask.width = this._fill.width * e } }, { key: "startAngleAnimation", value: function() { this._rotationEnabled = !0 } }, { key: "stopAngleAnimation", value: function() { this._rotationEnabled = !1 } }, { key: "strength", get: function() { var e = this.rotation / this._rotationAmplitude,
                            t = Math.sign(e); return e = .6 + (1 - Math.abs(e)), 1 === t && (e /= 1.8), e } }]), t }(PIXI.Container);
        i["default"] = h }, { "../../Common": 13 }],
    111: [function(e, t, i) {
        "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 });
        var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function P(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : P(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Common"),
            _ = n(u),
            h = e("./Ivandoe"),
            c = n(h),
            d = e("./Frogman"),
            p = n(d),
            f = e("./PowerGauge"),
            y = n(f),
            v = e("./Marker"),
            m = n(v),
            g = e("./WorldLayer"),
            w = n(g),
            b = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    e.inclination = 0 * PIXI.DEG_TO_RAD, e.focusTarget = null, e.focusPoint = new PIXI.Point(.35, .85), e.focusPosition = new PIXI.Point(0, 0), e.focusActive = { x: !0, y: !0 }, e.focusPointTween = null, e.zoom = 1, e.zoomTarget = 1, e.zoomTween = null, e._isShake = !1, e._shakeTime = 0, e._shakeTimeEnd = 1, e._shakeStrength = new PIXI.Point(10, 10), e.layers = [], e.layerBg = e.createLayer("bg", .7), e.layerBg.setBackground([_["default"].assets.texture("ep3_frogKick_bg_2", "jpg")], new PIXI.Point(0, 150), 1540), e.layerMg = e.createLayer("mg", 0), e.layerMg.setBackground([_["default"].assets.texture("ep3_frogKick/mg_back_2")], new PIXI.Point(0, 170)); var i = new PIXI.Sprite(_["default"].assets.texture("ep3_frogKick/mg_back_1"));
                    i.anchor.set(1, 1), i.y = 170, e.layerMg.addChild(i), e.avatar = new c["default"](e), e.avatar.x = -1050, e.avatar.y = e.getGroundY(0), e.layerMg.addChild(e.avatar), e.focusTarget = e.avatar, e.frogman = new p["default"](e), e.frogman.visible = !1, e.layerMg.addChild(e.frogman); for (var n = [], s = 1; s < 38; s++) { var r = "00";
                        s < 10 && (r += "0"); var l = _["default"].assets.texture("splashsmall" + r + s);
                        n.push(l) } e.splashFX = new PIXI.extras.AnimatedSprite(n), e.splashFX.loop = !1, e.splashFX.visible = !1, e.splashFX.animationSpeed = .8, e.layerMg.addChild(e.splashFX); var u = new PIXI.Container;
                    e.layerMg.addChild(u); var h = _["default"].assets.json("particle_frogman_ripples");
                    e.rippleFX = new PIXI.particles.Emitter(u, [_["default"].assets.texture("particle_frogman_ripples")], h), e.rippleFX.emit = !1, e.layerWater = e.createLayer("water", 0), e.layerWater.setBackground([_["default"].assets.texture("ep3_frogKick/mg_front_2")], new PIXI.Point(0, 170)); var d = new PIXI.Sprite(_["default"].assets.texture("ep3_frogKick/mg_front_1")); return d.anchor.set(1, 1), d.y = 165, e.layerWater.addChild(d), u = new PIXI.Container, u.x = e.avatar.x - 60, u.y = e.avatar.y - 90, u.rotation = -22 * PIXI.DEG_TO_RAD, e.layerWater.addChild(u), e.powerGauge = new y["default"], u.addChild(e.powerGauge), e.layerFg = e.createLayer("fg", -.7), e.layerFg.setBackground([_["default"].assets.texture("ep3_frogKick/fg_003"), _["default"].assets.texture("ep3_frogKick/fg_002")], new PIXI.Point(0, 200)), e._particles = e.initParticles(e.layerWater), e._obstacles = [], e.addObstacles(), e }
                return s(t, e), r(t, [{
                    key: "update",
                    value: function(e) {
                        var t = new PIXI.Point(this.focusTarget.x, this.focusTarget.y);
                        this.avatar.update(e), this.frogman.update(e), this.powerGauge.update(e), this.rippleFX.update(e), this._isShake && (this._shakeTime += e, this._shakeTime >= this._shakeTimeEnd && (this._shakeTime = 0, this._isShake = !1)), this.focusActive.x && (this.focusPosition.x = this.focusTarget.x), this.focusActive.y && (this.focusPosition.y = this.focusTarget.y), this.x = _["default"].STAGE_WIDTH * this.focusPoint.x - this.focusPosition.x * this.zoom,
                            this.y = _["default"].STAGE_HEIGHT * this.focusPoint.y - this.focusPosition.y * this.zoom, this._isShake && (this.x += P3.math.randomInt(-1, 1) * (this._shakeStrength.x * (1 - this._shakeTime / this._shakeTimeEnd)), this.y += P3.math.randomInt(-1, 1) * (this._shakeStrength.y * (1 - this._shakeTime / this._shakeTimeEnd))), this.scale.x = this.zoom, this.scale.y = this.zoom;
                        for (var i = new PIXI.Point(this.focusActive.x ? this.focusTarget.x - t.x : 0, this.focusActive.y ? this.focusTarget.y - t.y : 0), n = 0; n < this.layers.length; n++) this.layers[n].update(e, i);
                        this._particles && (this._particles.updateOwnerPos(this.focusPosition.x + _["default"].STAGE_WIDTH * (.5 - this.focusPoint.x), this.focusPosition.y + _["default"].STAGE_HEIGHT * (.5 - this.focusPoint.y)), this._particles.update(e))
                    }
                }, { key: "destroy", value: function(e) { this.zoomTween && this.zoomTween.kill(), this.focusPointTween && this.focusPointTween.kill(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "changeZoom", value: function(e, t, i) { null != this.zoomTween && this.zoomTween.kill(), e != this.zoom && (this.zoomTween = new TimelineMax, this.zoomTween.to(this, t, { zoom: e, ease: Sine.easeInOut }, i ? i : 0), this.zoomTarget = e) } }, { key: "changeFocusPoint", value: function(e, t, i) { null != this.focusPointTween && this.focusPointTween.kill(), this.focusPoint.x == e.x && this.focusPoint.y == e.y || (this.focusPointTween = new TimelineMax, this.focusPointTween.to(this.focusPoint, t, { x: e.x, y: e.y, ease: Sine.easeInOut }, i ? i : 0)) } }, { key: "changeFocusTarget", value: function(e, t, i) { null != this.focusTargetTween && this.focusTargetTween.kill(), this.focusTargetTween = new TimelineMax({ delay: i, onCompleteScope: this, onComplete: function() { this.focusTarget = e } }), this.focusTarget = new PIXI.Point(this.focusPosition.x, this.focusPosition.y), this.focusTargetTween.oldTarget = new PIXI.Point(this.focusPosition.x, this.focusPosition.y), this.focusTargetTween.newTarget = e, this.focusTargetTween.value = 0, this.focusTargetTween.to(this.focusTargetTween, t, { value: 1, ease: Sine.easeInOut, onUpdateScope: this, onUpdate: function() { this.focusTarget.x = this.focusTargetTween.oldTarget.x + (this.focusTargetTween.newTarget.x - this.focusTargetTween.oldTarget.x) * this.focusTargetTween.value, this.focusTarget.y = this.focusTargetTween.oldTarget.y + (this.focusTargetTween.newTarget.y - this.focusTargetTween.oldTarget.y) * this.focusTargetTween.value } }, 0) } }, { key: "shake", value: function(e, t) { this._isShake = !0, this._shakeTime = 0, this._shakeTimeEnd = e, this._shakeStrength = t } }, { key: "createLayer", value: function(e, t) { var i = new w["default"](this, e, t); return this.layers.push(i), this.addChild(i), i } }, { key: "addObstacles", value: function() { for (var e = P3.math.randomInt(26, 30), t = P3.math.randomInt(8, 12), i = P3.math.random(200, 340), n = [], a = 0; a < e + t; ++a) { var o = new PIXI.Point;
                            i += P3.math.random(240, 440), o.x = i, o.y = this.getGroundY(o.x), n.push(o) } n = P3.utils.shuffleArray(n); for (var s = _["default"].assets, r = 0; r < e; ++r) { var l = new PIXI.Sprite(s.texture("ep3_frogKick/lilly_pad_1"));
                            l.type = "lilypad", l.x = n[this._obstacles.length].x, l.y = n[this._obstacles.length].y + P3.math.random(-8, 8), l.anchor.set(.5), l.scale.x = P3.math.randomSign(), l.isHit = !1, this.layerMg.addChildAt(l, this.frogman.parent.getChildIndex(this.frogman)), this._obstacles.push(l), l.collisionRect = new PIXI.Sprite(PIXI.Texture.WHITE), l.collisionRect.anchor.set(.5), l.collisionRect.width = 200, l.collisionRect.height = 20, l.collisionRect.alpha = .5, l.collisionRect.tint = 16711680, l.collisionRect.visible = !1, l.addChild(l.collisionRect) } for (var u = 0; u < t; ++u) { var h = new PIXI.Sprite(s.texture("ep3_frogKick/rock_1"));
                            h.type = "rock", h.x = n[this._obstacles.length].x, h.y = n[this._obstacles.length].y + P3.math.random(-8, 8), h.anchor.set(.5), h.scale.x = P3.math.randomSign(), h.isHit = !1, this.layerMg.addChildAt(h, this.frogman.parent.getChildIndex(this.frogman)), this._obstacles.push(h), h.collisionRect = new PIXI.Sprite(PIXI.Texture.WHITE), h.collisionRect.anchor.set(.5), h.collisionRect.width = 200, h.collisionRect.height = 20, h.collisionRect.alpha = .5, h.collisionRect.tint = 16711680, h.collisionRect.visible = !1, h.addChild(h.collisionRect) } } }, { key: "collideFrogmanWithObstacles", value: function() { for (var e = 0; e < this._obstacles.length; ++e) { var t = this._obstacles[e],
                                i = new PIXI.Rectangle(t.x - .5 * t.collisionRect.width, t.y - .5 * t.collisionRect.height, t.collisionRect.width, t.collisionRect.height); if (!t.isHit && i.x <= this.frogman.x && this.frogman.x <= i.x + i.width && i.y <= this.frogman.y && this.frogman.y <= i.y + i.height) { switch (t.isHit = !0, t.type) {
                                    case "lilypad":
                                        this.frogman.bounce(); break;
                                    case "rock":
                                        this.frogman.smash() } _["default"].audio.playSound(["sfx_puffer_bounce_00", "sfx_puffer_bounce_01", "sfx_puffer_bounce_02"]) } } } }, { key: "resetObstacles", value: function() { for (var e = 0; e < this._obstacles.length; ++e) { var t = this._obstacles[e];
                            t.isHit = !1 } } }, { key: "addMarker", value: function(e, t) { var i = this,
                            n = new m["default"](t);
                        n.x = e, n.y = this.getGroundY(e), n.animateIn(), this.layerMg.addChildAt(n, this.layerMg.children.length - 1), delay(function() { i.splashFX.position.set(n.x - 130, n.y - 75), i.splashFX.visible = !0, i.splashFX.gotoAndPlay(0), _["default"].audio.playSound("sfx_frogprince_splash_00") }, .15, this) } }, { key: "initParticles", value: function(e) { var t = _["default"].assets.json("particle_emitter_fairdust_01");
                        t.spawnRect.w = _["default"].STAGE_WIDTH, t.spawnRect.h = _["default"].STAGE_HEIGHT, t.spawnRect.x = -_["default"].STAGE_WIDTH / 2, t.spawnRect.y = -_["default"].STAGE_HEIGHT / 2; var i = new PIXI.particles.Emitter(e, [_["default"].assets.texture("particle_fairy_dust_00"), _["default"].assets.texture("particle_fairy_dust_01")], t); return i.emit = !0, i } }, { key: "getGroundY", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0; return -Math.sin(this.inclination) * e + 50 } }, { key: "rightLimit", get: function() { return this.focusPosition.x + _["default"].STAGE_WIDTH / this.zoom * (1 - this.focusPoint.x + .5) } }, { key: "leftLimit", get: function() { return this.focusPosition.x - _["default"].STAGE_WIDTH / this.zoom * (this.focusPoint.x + .5) } }]), t
            }(PIXI.Container);
        i["default"] = b
    }, { "../../Common": 13, "./Frogman": 104, "./Ivandoe": 108, "./Marker": 109, "./PowerGauge": 110, "./WorldLayer": 112 }],
    112: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function h(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : h(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Common"),
            _ = (n(u), function(e) {
                function t(e, i, n) { a(this, t); var s = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return s._world = e, s._name = i, s._parallax = n || 0, s._backgroundTextures = null, s._backgroundDelta = new PIXI.Point(0, 0), s._backgroundWidth = 0, s._backgroundSprites = [], s._backgroundContainer = new PIXI.Container, s.addChild(s._backgroundContainer), s._objects = [], s._objectsContainer = new PIXI.Container, s.addChild(s._objectsContainer), s } return s(t, e), r(t, [{ key: "destroy", value: function(e) { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "update", value: function(e, t) { this.x += t.x * this._parallax, this.y = -Math.sin(this._world.inclination) * this.x; for (var i = this._objects.length - 1; i >= 0; i--) this._objects[i].x < this._world.leftLimit ? this.removeObject(this._objects[i]) : this._objects[i].update(e);
                        this.updateBackground() } }, { key: "updateBackground", value: function() { if (this._backgroundTextures) { for (var e = this._backgroundWidth, t = (this._backgroundTextures[0].height, 0), i = Math.floor((this._world.leftLimit - this.x) / e); i <= Math.ceil((this._world.rightLimit - this.x) / e); i++) { if (!this._backgroundSprites[t]) { var n = new PIXI.Sprite(this._backgroundTextures[0]);
                                    n.width = this._backgroundWidth, n.anchor.set(0, 1), this._backgroundSprites.push(n), this._backgroundContainer.addChild(n) } this._backgroundSprites[t].texture = this._backgroundTextures[Math.abs(i) % this._backgroundTextures.length], this._backgroundSprites[t].x = Math.floor(i * e + this._backgroundDelta.x) - 1 * i, this._backgroundSprites[t].y = Math.floor(-Math.sin(this._world.inclination) * (i * e) + this._backgroundDelta.y), t++ } for (; t < this._backgroundSprites.length; t++) this._backgroundSprites[t].visible = !1 } } }, { key: "setBackground", value: function(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : new PIXI.Point(0, 0),
                            i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0;
                        this._backgroundTextures = e, this._backgroundDelta = t, this._backgroundWidth = i || e[0].width } }, { key: "addObject", value: function(e, t) { t ? this._objectsContainer.addChildAt(e, 0) : this._objectsContainer.addChild(e), this._objects.push(e) } }, { key: "removeObject", value: function(e) { var t = this._objects.indexOf(e);
                        t != -1 && (this._objectsContainer.removeChild(e), this._objects.splice(t, 1)) } }, { key: "getObjectsOfType", value: function(e) { for (var t = [], i = this._objects.length - 1; i >= 0; i--) this._objects[i]._type == e && t.push(this._objects[i]); return t } }]), t }(PIXI.Container));
        i["default"] = _ }, { "../../Common": 13 }],
    113: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Actor"),
            _ = n(u),
            h = e("../../Common"),
            c = n(h),
            d = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    i._world = e; var n = new PIXI.Container; return i.addChild(n), i._view = new PIXI.spine.Spine(c["default"].assets.spineData("bert_front")), i._view.scale.set(.4), i._view.skeleton.setToSetupPose(), i._view.skeleton.setSkin(null), i._view.skeleton.setSkinByName("default"), i._view.state.setAnimation(0, "idle_fly", !0), i._view.stateData.defaultMix = .15, i._view.autoUpdate = !1, i._view.update(0), n.addChild(i._view), i._skipFrame = 0, i._view.state.data.setMix("idle_fly", "fly_determined_fast", .1), i._view.state.data.setMix("idle_fly", "fly_determined", .1), i._view.state.data.setMix("fly_determined", "fly_determined_fast", .1), i.init(), i } return s(t, e), r(t, [{ key: "init", value: function() { TweenMax.to(this._view, 1, { y: this._view.y + 50, ease: Sine.easeInOut, yoyo: !0, repeat: -1 }), TweenMax.fromTo(this._view, 1.5, { x: -50 }, { x: 100, ease: Sine.easeInOut, yoyo: !0, repeat: -1 }), this._view.state.addListener({ event: this._onAnimationEvent.bind(this) }) } }, { key: "destroy", value: function(e) { TweenMax.killTweensOf(this._view), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "update", value: function(e) { this._target && (this.x = this._target.x + 100, this.y = this._target.y - 350), this._skipFrame++ % 2 === 0 && this._view.update(2 * e) } }, { key: "follow", value: function(e) { this._target = e } }, { key: "run", value: function() { this._view.state.setAnimation(0, "fly_determined_fast", !0) } }, { key: "flyAhead", value: function(e) { TweenMax.killTweensOf(this._view), TweenMax.to(this, 2, { x: this.x + e, y: this._target.y, ease: Sine.easeOut, onCompleteScope: this, onComplete: function() { this._view.state.setAnimation(0, "idle_stand_tunnel_end", !0), this._view.scale.x *= -1, this._view.y = 0 } }), this._target = null } }, { key: "blownAway", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1,
                            t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0;
                        this._target = null, this._flightTimeline = new TimelineMax({ delay: t, onStartScope: this, onStart: function() { this._view.state.addAnimation(0, "idle_stand_tunnel_sneezed", !0) } }), this._flightTimeline.to(this, e, { x: this.x, ease: Sine.easeIn }, 0), this._flightTimeline.to(this._view, e, { y: this._view.y - 500, ease: Sine.easeInOut }, 0), this._flightTimeline.to(this._view, e, { rotation: 3.25 * -Math.PI, ease: Sine.easeInOut }, 0) } }, { key: "flyAway", value: function() { this._target = null, TweenMax.killTweensOf(this._view), TweenMax.to(this._view, 1.5, { x: this._view.x + 900, y: this._view.y - 200, ease: Sine.easeOut }) } }, { key: "_playFlapSFX", value: function() { c["default"].audio.playSound(["sfx_flap_00", "sfx_flap_01"]) } }, { key: "_onAnimationEvent", value: function(e, t) { "sfx_flap" === t.data.name && this._playFlapSFX() } }]), t }(_["default"]);
        i["default"] = d }, { "../../Actor": 4, "../../Common": 13 }],
    114: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("../../Common"),
            u = n(l),
            _ = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e.init(), e } return s(t, e), r(t, [{ key: "init", value: function() { this.initScorePanel("minigame_icon_ep10_2"), this._createHiScorePanel(), this._createPauseButton() } }, { key: "resize", value: function() { this._score.x = .5 * (u["default"].STAGE_WIDTH - P3.View.width) + 80, this._score.y = 10, this._hiscore.x = .5 * u["default"].STAGE_WIDTH, this._hiscore.y = 60, this._pauseButton.x = .5 * (u["default"].STAGE_WIDTH + P3.View.width) - 100, this._pauseButton.y = 100 } }, { key: "initScorePanel", value: function(e) { this._score = new PIXI.Container, this._score.visible = !1, this.addChild(this._score); var t = new PIXI.Sprite(u["default"].assets.texture("minigame_generic_panel"));
                        this._score.addChild(t); var i = new PIXI.Sprite(u["default"].assets.texture(e));
                        this._score.addChild(i), webfont ? (this._score.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "left", fill: 16777215 }), this._score.label.x = 110, this._score.label.y = 60, this._score.label.anchor.set(.5), this._score.addChild(this._score.label)) : (this._score.label = new PIXI.extras.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), this._score.label.x = 110, this._score.label.y = 66, this._score.label.anchor.set(.5), this._score.addChild(this._score.label)) } }, { key: "_createHiScorePanel", value: function() { this._hiscore = new PIXI.Container, this._hiscore.visible = !1, this.addChild(this._hiscore); var e = new PIXI.Sprite(u["default"].assets.texture("minigame_generic_panel"));
                        e.anchor.set(.5), this._hiscore.addChild(e); var t = new PIXI.Sprite(u["default"].assets.texture("minigame_icon_best"));
                        t.anchor.set(.5), this._hiscore.addChild(t), webfont ? (this._hiscore.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "center", fill: 16777215 }), this._hiscore.label.y = 15, this._hiscore.label.anchor.set(.5), this._hiscore.addChild(this._hiscore.label)) : (this._hiscore.label = new PIXI.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), this._hiscore.label.y = 18, this._hiscore.label.anchor.set(.5), this._hiscore.addChild(this._hiscore.label)) } }, { key: "setScore", value: function(e) { this._score.visible = !0, this._score.label.text = "" + e } }, { key: "setHiScore", value: function(e) { this._hiscore.visible = !0, this._hiscore.label.text = e.toString() } }, { key: "_createPauseButton", value: function() { var e = u["default"].assets,
                            t = new P3.ButtonStates;
                        t.normal = e.texture("btn_primary_small_off"), t.over = e.texture("btn_primary_small_over"), t.down = e.texture("btn_primary_small_over"), t.icon = e.texture("icon_help"), this._pauseButton = new P3.Button(t), this.addChild(this._pauseButton) } }, { key: "pauseButton", get: function() { return this._pauseButton } }]), t }(PIXI.Container);
        i["default"] = _ }, { "../../Common": 13 }],
    115: [function(e, t, i) { arguments[4][107][0].apply(i, arguments) }, { "../../Common": 13, dup: 107 }],
    116: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Actor"),
            _ = n(u),
            h = e("../../Common"),
            c = n(h),
            d = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    i._world = e, i._isGrounded = !0, i._jumpTime = .45, i._jumpHeight = 300, i._jumpSpeed = 2 * i._jumpHeight / i._jumpTime, i._jumpY = 0, i._gravity = i._jumpSpeed / i._jumpTime, i._velocity = new P3.Vector2(500, 0), i._dead = !1, i._falling = !1, i._hit = !1, i._shadow = new PIXI.Sprite(c["default"].assets.texture("shadow")), i._shadow.anchor.set(.5), i._shadow.alpha = .5, i._shadow.scale.set(.65), i.addChildAt(i._shadow, 0); var n = new PIXI.Container; return i.addChild(n), i._view = new PIXI.spine.Spine(c["default"].assets.spineData("ivandoe_front")), i._view.scale.set(.3), i._view.skeleton.setToSetupPose(), i._view.skeleton.setSkin(null), i._view.skeleton.setSkinByName("standard"), i._view.autoUpdate = !1, i._view.stateData.defaultMix = .15, i._view.update(0), n.addChild(i._view), i._skipFrame = 0, i._view.state.data.setMix("run_fast_chased_hop", "run_fast_chased", .1), i._view.state.data.setMix("run_fast_chased", "death_throw_1", .1), i._view.state.data.setMix("jump_fast_chased", "run_fast_chased", .1), i._collisionBox = new PIXI.Rectangle((-40), (-240), 80, 240), i.faceDirection(1), i } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this.idle(), this._view.state.addListener({ event: this._onAnimationEvent.bind(this) }) } }, { key: "destroy", value: function(e) { this._animationTimeline && this._animationTimeline.kill(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "update", value: function(e) { this.x += this._velocity.x * e, this.y = this._world.getGroundY(this.x), this._isGrounded ? this._falling ? (this._velocity.y += this._gravity * e, this._jumpY += this._velocity.y * e, this._view.y = this._jumpY) : (this._velocity.y = 0, this.y = this._world.getGroundY(this.x)) : (this._velocity.y += this._gravity * e, this._jumpY += this._velocity.y * e, this.y + this._jumpY >= this._world.getGroundY(this.x) && this.land(), this._view.y = this._jumpY, this._shadow.scale.set(.65 * (1 + this._jumpY / 1e3))), this._collisionGraphic && (this._collisionGraphic.x = this._view.x, this._collisionGraphic.y = this._view.y), this._skipFrame++ % 2 === 0 && this._view.update(2 * e) } }, { key: "idle", value: function() { this._velocity.x = 0, this._velocity.y = 0, this._view.state.setAnimation(0, "idle_posing_1", !0) } }, { key: "run", value: function() { this._velocity.x = 500, this._view.state.setAnimation(0, "run_fast_chased", !0) } }, { key: "jump", value: function() { this._isGrounded && (this._hit || (this._isGrounded = !1, this._velocity.y = -this._jumpSpeed, this._jumpY = 0, this._view.state.setAnimation(0, "jump_fast_chased", !1))) } }, { key: "land", value: function() { this._isGrounded || (this._isGrounded = !0, this._jumpY = 0, this._shadow.scale.set(1), this._dead || (this._view.state.setAnimation(0, "run_fast_chased", !0), this._world.shake(.2, new PIXI.Point(4, 8)))) } }, { key: "fall", value: function() { this._falling = !0, this._view.state.setAnimation(0, "death_throw_1", !0), this._shadow.visible = !1, this._animationTimeline = new TimelineMax, this._animationTimeline.to(this._velocity, .5, { x: 0, ease: Sine.easeInOut }, 0) } }, { key: "death", value: function() { this._velocity.x = 0, this._dead = !0, this._animationTimeline && this._animationTimeline.kill() } }, { key: "hit", value: function() { this._hit = !0, this._view.state.setAnimation(0, "run_fast_chased_hop", !0), this._animationTimeline = new TimelineMax({ onCompleteScope: this, onComplete: function() { this._dead || (this._hit = !1, this.run()) } }), this._animationTimeline.fromTo(this._velocity, 1.5, { x: this._velocity.x / 2 }, { x: this._velocity.x / 4, ease: Sine.easeInOut }, 0) } }, { key: "stopRunning", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 2,
                            t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0; return this._animationTimeline = new TimelineMax({ delay: t, onCompleteScope: this, onComplete: function() { this._view.state.setAnimation(0, "draw_sword", !1), this._view.state.timeScale = 1, this._world.focusTarget = new PIXI.Point(this.x, this.y) } }), this._animationTimeline.to(this._view.state, e, { timeScale: .5, ease: Sine.easeIn }, 0), this._animationTimeline.to(this._view.state, 0, { onStartScope: this, onStart: function() { this._view.state.setAnimation(0, "walk", !0, t + e / 2) } }, e / 2), this._animationTimeline.to(this._velocity, e, { x: 0, ease: Sine.easeInOut }, 0), this._velocity.x * (e / 2 + t) } }, { key: "blownAway", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1,
                            t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0;
                        this._flightTimeline = new TimelineMax({ delay: t, onStartScope: this, onStart: function() { this._gravity = 0, this._velocity.x = 0, this._velocity.y = 0 } }), this._flightTimeline.to(this, e, { x: this.x, ease: Sine.easeIn }, 0), this._flightTimeline.to(this._view, e, { y: this._view.y - 400, ease: Sine.easeInOut }, 0), this._flightTimeline.to(this._view, e, { rotation: 1.25 * -Math.PI, ease: Sine.easeInOut }, 0) } }, { key: "thrownAway", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1,
                            t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0;
                        this._falling = !0, this._isGrounded = !0, this._view.state.setAnimation(0, "death_throw_1", !0), this._shadow.visible = !1, this._flightTimeline = new TimelineMax({ delay: t }), this._flightTimeline.to(this, 1 * e / 3, { _jumpY: this._jumpY - 140, ease: Sine.easeOut }, 0), this._flightTimeline.to(this, 2 * e / 3, { _jumpY: this._jumpY + 500, ease: Sine.easeIn, onStartScope: this, onStart: function() { this._world.layerFg2.addChild(this) } }, e / 3), this._flightTimeline.to(this.scale, e, { x: 2, y: 2, ease: Sine.easeInOut }, 0) } }, { key: "collide", value: function(e) { var t = this.collisionBox; return !(e.x + e.width < t.x) && (!(e.x > t.x + this._collisionBox.width) && (!(e.y + e.height < t.y) && !(e.y > t.y + this._collisionBox.height))) } }, { key: "_playFootstepSFX", value: function() { c["default"].audio.playSound(["sfx_footstep_00", "sfx_footstep_01", "sfx_footstep_02", "sfx_footstep_03", "sfx_footstep_04"]) } }, { key: "_onAnimationEvent", value: function(e, t) { "sfx_footstep" === t.data.name && this._playFootstepSFX() } }, { key: "isGrounded", get: function() { return this._isGrounded } }, { key: "collisionBox", get: function() { return new PIXI.Rectangle(this.x + this._view.x + this._collisionBox.x, this.y + this._view.y + this._collisionBox.y, this._collisionBox.width, this._collisionBox.height) } }]), t }(_["default"]);
        i["default"] = d }, { "../../Actor": 4, "../../Common": 13 }],
    117: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Actor"),
            _ = n(u),
            h = e("../../Common"),
            c = n(h),
            d = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    i._world = e, i._velocity = new P3.Vector2(0, 0), i._running = !1; var n = new PIXI.Container; return i.addChild(n), i._view = new PIXI.spine.Spine(c["default"].assets.spineData("snot_monster")), i._view.scale.set(.45), i._view.skeleton.setToSetupPose(), i._view.skeleton.setSkin(null), i._view.skeleton.setSkinByName("default"), i._view.autoUpdate = !1, i._view.x -= 350, i._view.y += 100, i._view.stateData.defaultMix = .15, i._view.update(0), n.addChild(i._view), i._skipFrame = 0, i } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this._view.state.setAnimation(0, "idle", !1) } }, { key: "destroy", value: function(e) { this._animationTimeline && this._animationTimeline.kill(), this.stopSounds(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "update", value: function(e) { if (this.x += this._velocity.x * e, this.y = this._world.getGroundY(this.x), this._running && (this.x = Math.max(this.x, this._target.x - 700)), this._sfx) { var t = Math.abs(this._world.focusPosition.x - this.x),
                                i = Math.max(0, 1 - t / 1800);
                            this._sfx.howl.volume(i, this._sfx.id) } this._skipFrame++ % 2 === 0 && this._view.update(2 * e) } }, { key: "shout", value: function() { this._view.state.setAnimation(0, "shout", !1), this._view.state.addAnimation(0, "idle", !0), c["default"].audio.playSound("sfx_snotmonster_scream_00"), this._world.shake(3, new PIXI.Point(20, 20), .3) } }, { key: "run", value: function(e) { this._target = e, this._running = !0, this._velocity.x = 430, this._sfx = c["default"].audio.playSound("sfx_snotmonster_squelch_loop_01", { loop: !0 }), this._view.state.setAnimation(0, "chase", !0) } }, { key: "targetReached", value: function() { this._velocity.x = 0, this._view.state.setAnimation(0, "end", !0), this.stopSounds() } }, { key: "stopRunning", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 2,
                            t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0;
                        this._running = !1, this._animationTimeline = new TimelineMax({ delay: t }), this._animationTimeline.to(this._velocity, e, { x: -800, ease: Sine.easeInOut }, 0), this.stopSounds() } }, { key: "stopSounds", value: function() { this._sfx && (this._sfx.howl.stop(this._sfx.id), this._sfx = null) } }, { key: "pause", value: function() { this._sfx && this._sfx.stop() } }, { key: "resume", value: function() { this._sfx && this._sfx.play() } }]), t }(_["default"]);
        i["default"] = d }, { "../../Actor": 4, "../../Common": 13 }],
    118: [function(e, t, i) {
        "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 });
        var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function b(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : b(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Common"),
            _ = n(u),
            h = e("./Ivandoe"),
            c = (n(h), e("./World")),
            d = n(c),
            p = e("./Hud"),
            f = n(p),
            y = e("./InteractiveArea"),
            v = n(y),
            m = e("../../MinigameScene"),
            g = n(m),
            w = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._states = { GRACE: 1, INTRO: 2, GAMEPLAY: 3, GAMEOVER_MONSTER: 4, GAMEOVER_PIT: 5, END: 6, INACTIVE: -1 }, e._gamestate = null, e._gamestateTime = 0, e._nextGamestate = e._states.INACTIVE, e._graceTime = 1, e._completed = !1, e._tutorial = !1, e._paused = !1, e }
                return s(t, e), r(t, [{ key: "init", value: function() { this._world = new d["default"], this.addChild(this._world), this._interactiveArea = new v["default"](1), this.addChild(this._interactiveArea), this._hud = new f["default"], this.addChild(this._hud), this._hud.pauseButton.signals.click.add(this._onPauseButtonClick, this), this._hud.setScore(this._score), this._hud.setHiScore(this.highscore) } }, { key: "destroy", value: function(e) { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, { children: !0 }) } }, { key: "resize", value: function() { this.x = .5 * (P3.View.width - _["default"].STAGE_WIDTH), this._hud.resize() } }, { key: "appear", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "appear", this).call(this), this._isFirstPlay() && this.signals.pause.dispatch(this, !0), this._nextGamestate = this._states.GRACE } }, { key: "show", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "show", this).call(this), TweenMax.resumeAll() } }, { key: "pause", value: function() { this._world.monster.pause() } }, { key: "resume", value: function() { this._world.monster.resume() } }, {
                    key: "update",
                    value: function() {
                        var e = deltaTime;
                        switch (this._paused && (e = 0), this._world.update(e), this._nextGamestate ? (this._gamestate = this._nextGamestate, this._gamestateTime = 0, this._nextGamestate = null) : this._gamestateTime += e, this._gamestate) {
                            case this._states.GRACE:
                                this._gamestateTime > this._graceTime && (this._nextGamestate = this._states.INTRO);
                                break;
                            case this._states.INTRO:
                                0 == this._gamestateTime && (this._world.changeFocusPoint(new PIXI.Point(.65, this._world.focusPoint.y), 3, 1), this._introTimeline = new TimelineMax({ onCompleteScope: this, onComplete: function() { this._nextGamestate = this._states.GAMEPLAY } }), this._introTimeline.fromTo(this._world.monster, 3, { x: this._world.avatar.x - 2e3 }, {
                                    x: this._world.avatar.x - 400,
                                    ease: Sine.easeOut,
                                    onCompleteScope: this,
                                    onComplete: function() { this._world.monster.shout() }
                                }), this._introTimeline.to(this._world.avatar.scale, 1e-4, { x: -1, ease: Sine.easeInOut }, 3.5), this._introTimeline.to(this._world.avatar.scale, 1e-4, { x: 1, ease: Sine.easeInOut }, 4), this._introTimeline.to(this._world.bert.scale, 1e-4, { x: -1, ease: Sine.easeInOut }, 3.5), this._introTimeline.to(this._world.bert.scale, 1e-4, { x: 1, ease: Sine.easeInOut }, 4));
                                break;
                            case this._states.GAMEPLAY:
                                if (0 == this._gamestateTime) _["default"].audio.playSound("vo_ivandoe_yell_00"), this._world.changeFocusPoint(new PIXI.Point(.4, this._world.focusPoint.y), 1), this._obstacleDelay = 2, this._world.avatar.run(), this._world.bert.run(), this._world.monster.run(this._world.avatar), this._bgm = _["default"].audio.playMusic("music_loop_dramatic_peak_00"), this._interactiveArea.getArea(0).signals.clicked.add(function() { this.jump() }.bind(this));
                                else { if (this._score = parseInt(this.distance), this._hud.setScore(this.distance), this._hud.setScore(this.distance + "/" + this.targetDistance), this.distance >= this.targetDistance) { this._interactiveArea.removeAllEvents(), this._nextGamestate = this._states.END; break } if (this._obstacleDelay -= e, this._obstacleDelay <= 0 && this.distance < this.targetDistance - 10 && (this._obstacleDelay = P3.math.random(1.5, 3) * (1 - .6 * (this.distance / this.targetDistance)), this._world.createObstacle()), this._world.avatar.isGrounded)
                                        for (var t = this._world.layerMg.getObjectsOfType("obstacle"), i = 0; i < t.length; i++)
                                            if (t[i].interactive && (!this._tutorial && t[i].x - this._world.avatar.x < 200 && this.tutorial(), this._world.avatar.collide(t[i].collisionBox))) { t[i].interactive = !1, this._obstacleDelay += 1.5, this._world.avatar.hit(), _["default"].audio.playSound("vo_ivandoe_pain_00"); break } for (var n = this._world.layerMg.getObjectsOfType("pit"), i = 0; i < n.length; i++) !this._tutorial && n[i].x - this._world.avatar.x < 200 && this.tutorial(), this._world.avatar.collide(n[i].collisionBox) && (this._interactiveArea.removeAllEvents(), this._nextGamestate = this._states.GAMEOVER_PIT, _["default"].audio.playSound("vo_ivandoe_mountain_scream_0" + P3.math.randomInt(0, 2)));
                                    this._world.monster.x >= this._world.avatar.x && (this._interactiveArea.removeAllEvents(), this._nextGamestate = this._states.GAMEOVER_MONSTER, _["default"].audio.playSound("vo_ivandoe_mountain_scream_0" + P3.math.randomInt(0, 2))), _["default"].input.isKeyPressed(32) && this.jump() }
                                break;
                            case this._states.GAMEOVER_MONSTER:
                                0 == this._gamestateTime && (this._world.avatar.death(), this._world.avatar.thrownAway(), this._world.bert.flyAway(), this._world.monster.targetReached(), _["default"].audio.stopMusic(), _["default"].audio.playSound("music_fail_stab_01")), this._gamestateTime > 3 && (this._nextGamestate = this._states.INACTIVE, this.end());
                                break;
                            case this._states.GAMEOVER_PIT:
                                0 == this._gamestateTime && (this._world.monster.stopRunning(), this._world.avatar.fall(), this._world.bert.flyAway(), this._world.changeFocusPoint(new PIXI.Point(.5, this._world.focusPoint.y), 2), _["default"].audio.stopMusic(), _["default"].audio.playSound("music_fail_stab_01")), this._gamestateTime > 3 && (this._nextGamestate = this._states.INACTIVE, this.end());
                                break;
                            case this._states.END:
                                if (0 == this._gamestateTime) { this._completed = !0, this._world.changeFocusPoint(new PIXI.Point(.5, this._world.focusPoint.y), 3, 1), this._world.monster.stopRunning(); var a = this._world.avatar.stopRunning(3, 2);
                                    this._world.target.x = .6 * (this._world.avatar.x + a + 700), this._world.target.visible = !0, this._world.bert.flyAhead(a + 150); var o = 8;
                                    this._world.avatar.blownAway(1, o), this._world.bert.blownAway(1, o), this._world.shake(.3, new PIXI.Point(6, 6), o - 1.9), this._world.shake(.3, new PIXI.Point(8, 8), o - 1.6), this._world.shake(.7, new PIXI.Point(12, 12), o - 1.2), this._world.shake(1, new PIXI.Point(20, 10), o), TweenMax.to(this, .001, { delay: o - 1.8, onStartScope: this, onStart: function() { _["default"].audio.playSound("sfx_mountain_end_sneeze_02") } }), TweenMax.to(this, .001, { delay: o - .5, onStartScope: this, onStart: function() { var e = new PIXI.particles.Emitter(this._world.layerChara, [_["default"].assets.texture("particle_snot")], _["default"].assets.json("particle_snot_sneezeblast_00"));
                                            e.updateOwnerPos(this._world.avatar.x + a + 600, -100), e.autoUpdate = !0, e.playOnceAndDestroy() } }), _["default"].audio.stopMusic(), _["default"].audio.playSound("music_epic_reveal_00") } this._gamestateTime > 9 && (this._nextGamestate = this._states.INACTIVE, this.end())
                        }
                    }
                }, { key: "start", value: function() {} }, { key: "end", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "end", this).call(this), this._hud.setHiScore(this.highscore), this.playEndVO(this._score) } }, { key: "jump", value: function() { this._tutorial && (this.tutorialEnd(), this._world.avatar.jump()) } }, { key: "tutorial", value: function() { this._paused = !0, this._tutorial = !0, TweenMax.pauseAll(), this._world.removeShake(), this._initTutorialPointer(this._world), this._animatePointer({ x: this._world.avatar.x + 100, y: this._world.avatar.y - this._world.avatar.height / 2 - 50 }) } }, { key: "tutorialEnd", value: function() { this._paused && (this._killPointer(), this._paused = !1, TweenMax.resumeAll()) } }, { key: "_onPauseButtonClick", value: function(e) { TweenMax.pauseAll(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "_onPauseButtonClick", this).call(this, e) } }, { key: "distance", get: function() { return this._completed ? this.targetDistance : Math.min(Math.floor(this._world.avatar.x / 100), this.targetDistance) } }, { key: "targetDistance", get: function() { var e = this.highscore.length ? 0 : this.highscore; return Math.max(250, 50 * (Math.floor(e / 50) + 1)) } }]), t
            }(g["default"]);
        i["default"] = w
    }, { "../../Common": 13, "../../MinigameScene": 28, "./Hud": 114, "./InteractiveArea": 115, "./Ivandoe": 116, "./World": 122 }],
    119: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Actor"),
            _ = n(u),
            h = e("../../Common"),
            c = n(h),
            d = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return i._world = e, i._type = "obstacle", i._sprite = new PIXI.Sprite(c["default"].assets.texture(P3.utils.selectRandom(["ep10_monsterRun/obstacle_001", "ep10_monsterRun/obstacle_002", "ep10_monsterRun/obstacle_003"]))), i._sprite.anchor.set(.5, 1), i.addChild(i._sprite), i.interactive = !0, i._collisionBox = new PIXI.Rectangle(.25 * -i._sprite.width, (-40), .5 * i._sprite.width, 40), i } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this) } }, { key: "destroy", value: function(e) { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "update", value: function(e) {} }, { key: "collisionBox", get: function() { return new PIXI.Rectangle(this.x + this._collisionBox.x, this.y + this._collisionBox.y, this._collisionBox.width, this._collisionBox.height) } }]), t }(_["default"]);
        i["default"] = d }, { "../../Actor": 4, "../../Common": 13 }],
    120: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Actor"),
            _ = n(u),
            h = e("../../Common"),
            c = n(h),
            d = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return i._world = e, i._type = "pit", i._sprite = new PIXI.Sprite(c["default"].assets.texture(P3.utils.selectRandom(["ep10_monsterRun/obstacle_hole_back"]))), i._sprite.anchor.set(.5, .4), i.addChild(i._sprite), i._spriteFg = new PIXI.Sprite(c["default"].assets.texture(P3.utils.selectRandom(["ep10_monsterRun/obstacle_hole_front"]))), i._spriteFg.anchor.set(.5, .4), i._world.layerMg2.addChild(i._spriteFg), i._collisionBox = new PIXI.Rectangle(.1 * -i._sprite.width, (-5), .25 * i._sprite.width, 5), i } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this) } }, { key: "destroy", value: function(e) { this._spriteFg.parent.removeChild(this._spriteFg), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "update", value: function(e) { this._spriteFg.x = this.x, this._spriteFg.y = this.y } }, { key: "collisionBox", get: function() { return new PIXI.Rectangle(this.x + this._collisionBox.x, this.y + this._collisionBox.y, this._collisionBox.width, this._collisionBox.height) } }]), t }(_["default"]);
        i["default"] = d }, { "../../Actor": 4, "../../Common": 13 }],
    121: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Actor"),
            _ = n(u),
            h = e("../../Common"),
            c = n(h),
            d = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._view = new PIXI.Sprite(c["default"].assets.texture("ep10_monsterRun/finish_hole")), e._view.anchor = new PIXI.Point(0, 1), e._view.x -= e._view.width, e._view.y += 100, e.addChild(e._view), e } return s(t, e), r(t, [{ key: "destroy", value: function(e) { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "flyAway", value: function() { arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1, arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0 } }]), t }(_["default"]);
        i["default"] = d }, { "../../Actor": 4, "../../Common": 13 }],
    122: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function T(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : T(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Common"),
            _ = n(u),
            h = e("./Ivandoe"),
            c = n(h),
            d = e("./Bert"),
            p = n(d),
            f = e("./Monster"),
            y = n(f),
            v = e("./Target"),
            m = n(v),
            g = e("./Obstacle"),
            w = n(g),
            b = e("./Pit"),
            P = n(b),
            x = e("./WorldLayer"),
            k = n(x),
            I = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e.inclination = 0 * PIXI.DEG_TO_RAD, e.focusTarget = null, e.focusPoint = new PIXI.Point(.5, .85), e.focusPosition = new PIXI.Point(0, 0), e.focusActive = { x: !0, y: !0 }, e.focusPointTween = null, e.zoom = 1.2, e.zoomTarget = 1, e.zoomTween = null, e._isShake = !1, e._shakeTime = 0, e._shakeTimeEnd = 1, e._shakeStrength = new PIXI.Point(10, 10), e.layers = [], e.layerBg = e.createLayer("bg", .4), e.layerBg.setBackground([_["default"].assets.texture("ep10_monsterRun_bg_1", "jpg"), _["default"].assets.texture("ep10_monsterRun_bg_2", "jpg")], new PIXI.Point(0, 150)), e.layerMg = e.createLayer("mg", 0), e.layerMg.setBackground([_["default"].assets.texture("ep10_monsterRun/mg_001"), _["default"].assets.texture("ep10_monsterRun/mg_002")], new PIXI.Point(0, 150)), e.layerHole = e.createLayer("hole", .4), e.layerChara = e.createLayer("chara", 0), e.monster = new y["default"](e), e.monster.x = -1200, e.monster.y = e.getGroundY(e.monster.x), e.layerChara.addChild(e.monster), e.avatar = new c["default"](e), e.avatar.y = e.getGroundY(0), e.layerChara.addChild(e.avatar), e.focusTarget = e.avatar, e.bert = new p["default"](e), e.bert.follow(e.avatar), e.layerChara.addChild(e.bert), e.target = new m["default"](e), e.target.x = 0, e.target.y = e.getGroundY(e.target.x), e.target.visible = !1, e.layerHole.addChild(e.target), e.layerMg2 = e.createLayer("mg", 0), e.layerFg = e.createLayer("fg", -.4), e.layerFg.setBackground([_["default"].assets.texture("ep10_monsterRun/fg_001"), _["default"].assets.texture("ep10_monsterRun/fg_002")], new PIXI.Point(0, 200)), e.layerFg2 = e.createLayer("fg2", 0), e } return s(t, e), r(t, [{ key: "update", value: function(e) { var t = new PIXI.Point(this.focusTarget.x, this.focusTarget.y);
                        this.avatar.update(e), this.bert.update(e), this.monster.update(e), this._isShake && (this._shakeTime += e, this._shakeTime >= this._shakeTimeEnd && (this._shakeTime = 0, this._isShake = !1)), this.focusActive.x && (this.focusPosition.x = this.focusTarget.x), this.focusActive.y && (this.focusPosition.y = this.focusTarget.y), this.x = _["default"].STAGE_WIDTH * this.focusPoint.x - this.focusPosition.x * this.zoom, this.y = _["default"].STAGE_HEIGHT * this.focusPoint.y - this.focusPosition.y * this.zoom, this._isShake && (this.x += P3.math.randomInt(-1, 1) * (this._shakeStrength.x * (1 - this._shakeTime / this._shakeTimeEnd)), this.y += P3.math.randomInt(-1, 1) * (this._shakeStrength.y * (1 - this._shakeTime / this._shakeTimeEnd))), this.scale.x = this.zoom, this.scale.y = this.zoom; for (var i = new PIXI.Point(this.focusActive.x ? this.focusTarget.x - t.x : 0, this.focusActive.y ? this.focusTarget.y - t.y : 0), n = 0; n < this.layers.length; n++) this.layers[n].update(e, i) } }, { key: "destroy", value: function(e) { this.zoomTween && this.zoomTween.kill(), this.focusPointTween && this.focusPointTween.kill(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "changeZoom", value: function(e, t, i) { null != this.zoomTween && this.zoomTween.kill(), e != this.zoom && (this.zoomTween = new TimelineMax, this.zoomTween.to(this, t, { zoom: e, ease: Sine.easeInOut }, i ? i : 0), this.zoomTarget = e) } }, { key: "changeFocusPoint", value: function(e, t, i) { null != this.focusPointTween && this.focusPointTween.kill(), this.focusPoint.x == e.x && this.focusPoint.y == e.y || (this.focusPointTween = new TimelineMax, this.focusPointTween.to(this.focusPoint, t, { x: e.x, y: e.y, ease: Sine.easeInOut }, i ? i : 0)) } }, { key: "shake", value: function(e, t, i) { return this._shakeDelayTimeline && this._shakeDelayTimeline.kill(), i ? (this._shakeDelayTimeline = new TimelineMax, void this._shakeDelayTimeline.to(this, .01, { onStartScope: this, onStart: function() { this.shake(e, t) } }, i)) : (this._isShake = !0, this._shakeTime = 0, this._shakeTimeEnd = e, void(this._shakeStrength = t)) } }, { key: "removeShake", value: function() { this._shakeDelayTimeline && (this._shakeDelayTimeline.kill(), this._shakeDelayTimeline = null), this._isShake = !1 } }, { key: "createLayer", value: function(e, t) { var i = new k["default"](this, e, t); return this.layers.push(i), this.addChild(i), i } }, { key: "createObstacle", value: function() { var e = Math.random(); if (e < .35) var t = new P["default"](this);
                        else var t = new w["default"](this);
                        t.x = this.avatar.x + 1e3, t.y = this.getGroundY(t.x), this.layerMg.addObject(t) } }, { key: "getGroundY", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0; return -Math.sin(this.inclination) * e + 50 } }, { key: "rightLimit", get: function() { return this.focusPosition.x + _["default"].STAGE_WIDTH / this.zoom * (1 - this.focusPoint.x + .5) } }, { key: "leftLimit", get: function() { return this.focusPosition.x - _["default"].STAGE_WIDTH / this.zoom * (this.focusPoint.x + .5) } }]), t }(PIXI.Container);
        i["default"] = I }, { "../../Common": 13, "./Bert": 113, "./Ivandoe": 116, "./Monster": 117, "./Obstacle": 119, "./Pit": 120, "./Target": 121, "./WorldLayer": 123 }],
    123: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function h(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : h(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Common"),
            _ = (n(u), function(e) {
                function t(e, i, n) { a(this, t); var s = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return s._world = e, s._name = i, s._parallax = n || 0, s._backgroundTextures = null, s._backgroundDelta = new PIXI.Point(0, 0), s._backgroundSprites = [], s._backgroundContainer = new PIXI.Container, s.addChild(s._backgroundContainer), s._objects = [], s._objectsContainer = new PIXI.Container, s.addChild(s._objectsContainer), s } return s(t, e), r(t, [{ key: "destroy", value: function(e) { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "update", value: function(e, t) { this.x += t.x * this._parallax, this.y = -Math.sin(this._world.inclination) * this.x; for (var i = this._objects.length - 1; i >= 0; i--) this._objects[i].x < this._world.leftLimit ? this.removeObject(this._objects[i]) : this._objects[i].update(e);
                        this.updateBackground() } }, { key: "updateBackground", value: function() { if (this._backgroundTextures) { for (var e = this._backgroundTextures[0].width, t = (this._backgroundTextures[0].height, 0), i = Math.floor((this._world.leftLimit - this.x) / e); i <= Math.ceil((this._world.rightLimit - this.x) / e); i++) { if (!this._backgroundSprites[t]) { var n = new PIXI.Sprite(this._backgroundTextures[0]);
                                    n.anchor.set(0, 1), this._backgroundSprites.push(n), this._backgroundContainer.addChild(n) } this._backgroundSprites[t].texture = this._backgroundTextures[Math.abs(i) % this._backgroundTextures.length], this._backgroundSprites[t].x = Math.floor(i * e + this._backgroundDelta.x) - 1 * i, this._backgroundSprites[t].y = Math.floor(-Math.sin(this._world.inclination) * (i * e) + this._backgroundDelta.y), t++ } for (; t < this._backgroundSprites.length; t++) this._backgroundSprites[t].visible = !1 } } }, { key: "setBackground", value: function(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : new PIXI.Point(0, 0);
                        this._backgroundTextures = e, this._backgroundDelta = t } }, { key: "addObject", value: function(e) { this._objectsContainer.addChild(e), this._objects.push(e) } }, { key: "removeObject", value: function(e) { var t = this._objects.indexOf(e);
                        t != -1 && (this._objectsContainer.removeChild(e), this._objects.splice(t, 1)) } }, { key: "getObjectsOfType", value: function(e) { for (var t = [], i = this._objects.length - 1; i >= 0; i--) this._objects[i]._type == e && t.push(this._objects[i]); return t } }]), t }(PIXI.Container));
        i["default"] = _ }, { "../../Common": 13 }],
    124: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Actor"),
            _ = n(u),
            h = e("../../Common"),
            c = n(h),
            d = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    i._world = e; var n = new PIXI.Container; return i.addChild(n), i._view = new PIXI.spine.Spine(c["default"].assets.spineData("bert_front")), i._view.scale.set(.4), i._view.skeleton.setToSetupPose(), i._view.skeleton.setSkin(null), i._view.skeleton.setSkinByName("default"), i._view.state.setAnimation(0, "idle_fly", !0), i._view.stateData.defaultMix = .15, i._view.autoUpdate = !1, i._view.update(0), n.addChild(i._view), i._skipFrame = 0, i._view.state.data.setMix("idle_fly", "fly_determined_fast", .1), i._view.state.data.setMix("idle_fly", "fly_determined", .1), i._view.state.data.setMix("fly_determined", "fly_determined_fast", .1), i._animationDelay = P3.math.random(3, 6), i.init(), i } return s(t, e), r(t, [{ key: "init", value: function() { TweenMax.to(this._view, 1, { y: this._view.y + 50, ease: Sine.easeInOut, yoyo: !0, repeat: -1 }), TweenMax.fromTo(this._view, 1.5, { x: -50 }, { x: 100, ease: Sine.easeInOut, yoyo: !0, repeat: -1 }), this._view.state.addListener({ event: this._onAnimationEvent.bind(this) }) } }, { key: "destroy", value: function(e) { TweenMax.killTweensOf(this._view), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "update", value: function(e, t) { this.x = t.x, this.y = t.y - 400, this._skipFrame++ % 2 === 0 && this._view.update(2 * e), this._animationDelay -= e, this._animationDelay < 0 && this._switchAnimation() } }, { key: "flyAway", value: function() { TweenMax.killTweensOf(this._view), TweenMax.to(this._view, 1.5, { x: this._view.x + 900, y: this._view.y - 600, ease: Sine.easeOut }) } }, { key: "_switchAnimation", value: function() { var e = ["fly_determined", "fly_determined_fast", "idle_fly"];
                        this._view.state.setAnimation(0, e[P3.math.randomInt(0, e.length - 1)], !0), this._animationDelay = P3.math.random(3, 6) } }, { key: "_playFlapSFX", value: function() { c["default"].audio.playSound(["sfx_flap_00", "sfx_flap_01"]) } }, { key: "_onAnimationEvent", value: function(e, t) { "sfx_flap" === t.data.name && this._playFlapSFX() } }]), t }(_["default"]);
        i["default"] = d }, { "../../Actor": 4, "../../Common": 13 }],
    125: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("../../Common"),
            u = n(l),
            _ = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e.init(), e } return s(t, e), r(t, [{ key: "init", value: function() { this.initScorePanel("minigame_icon_ep10_1"), this.initHiScorePanel(), this._createPauseButton() } }, { key: "resize", value: function() { this._score.x = .5 * (u["default"].STAGE_WIDTH - P3.View.width) + 80, this._score.y = 10, this._hiscore.x = .5 * u["default"].STAGE_WIDTH, this._hiscore.y = 60, this._pauseButton.x = .5 * (u["default"].STAGE_WIDTH + P3.View.width) - 100, this._pauseButton.y = 100 } }, { key: "initScorePanel", value: function(e) { this._score = new PIXI.Container, this._score.visible = !1, this.addChild(this._score); var t = new PIXI.Sprite(u["default"].assets.texture("minigame_generic_panel"));
                        this._score.addChild(t); var i = new PIXI.Sprite(u["default"].assets.texture(e));
                        this._score.addChild(i), webfont ? (this._score.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "left", fill: 16777215 }), this._score.label.x = 110, this._score.label.y = 60, this._score.label.anchor.set(.5), this._score.addChild(this._score.label)) : (this._score.label = new PIXI.extras.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), this._score.label.x = 110, this._score.label.y = 66, this._score.label.anchor.set(.5), this._score.addChild(this._score.label)) } }, { key: "setScore", value: function(e) { this._score.visible = !0, this._score.label.text = "" + e } }, { key: "initHiScorePanel", value: function() { this._hiscore = new PIXI.Container, this._hiscore.visible = !1, this.addChild(this._hiscore); var e = new PIXI.Sprite(u["default"].assets.texture("minigame_generic_panel"));
                        e.anchor.set(.5), this._hiscore.addChild(e); var t = new PIXI.Sprite(u["default"].assets.texture("minigame_icon_best"));
                        t.anchor.set(.5), this._hiscore.addChild(t), webfont ? (this._hiscore.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "center", fill: 16777215 }), this._hiscore.label.y = 15, this._hiscore.label.anchor.set(.5), this._hiscore.addChild(this._hiscore.label)) : (this._hiscore.label = new PIXI.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), this._hiscore.label.y = 18, this._hiscore.label.anchor.set(.5), this._hiscore.addChild(this._hiscore.label)) } }, { key: "setHiScore", value: function(e) { this._hiscore.visible = !0, this._hiscore.label.text = e.toString() } }, { key: "_createPauseButton", value: function() { var e = u["default"].assets,
                            t = new P3.ButtonStates;
                        t.normal = e.texture("btn_primary_small_off"), t.over = e.texture("btn_primary_small_over"), t.down = e.texture("btn_primary_small_over"), t.icon = e.texture("icon_help"), this._pauseButton = new P3.Button(t), this.addChild(this._pauseButton) } }, { key: "pauseButton", get: function() { return this._pauseButton } }]), t }(PIXI.Container);
        i["default"] = _ }, { "../../Common": 13 }],
    126: [function(e, t, i) { arguments[4][107][0].apply(i, arguments) }, { "../../Common": 13, dup: 107 }],
    127: [function(e, t, i) {
        "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 });
        var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Actor"),
            _ = n(u),
            h = e("../../Common"),
            c = n(h),
            d = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    i._world = e, i._isGrounded = !0, i._jumpTime = .45, i._jumpHeight = 300, i._jumpSpeed = 2 * i._jumpHeight / i._jumpTime, i._jumpY = 0, i._gravity = i._jumpSpeed / i._jumpTime, i._velocity = new P3.Vector2(500, 0), i._dead = !1, i._falling = !1, i._shadow = new PIXI.Sprite(c["default"].assets.texture("shadow")), i._shadow.anchor.set(.5), i._shadow.alpha = .5, i._shadow.scale.set(.7), i._shadow.rotation = -i._world.inclination, i.addChildAt(i._shadow, 0); var n = new PIXI.Container; return i.addChild(n), i._view = new PIXI.spine.Spine(c["default"].assets.spineData("ivandoe_front_025")), i._view.scale.set(.3), i._view.skeleton.setToSetupPose(), i._view.skeleton.setSkin(null), i._view.skeleton.setSkinByName("standard"), i._view.stateData.defaultMix = .15, i._view.autoUpdate = !1, i._view.update(0), i._skipFrame = 0, n.addChild(i._view), i._collisionBox = new PIXI.Rectangle((-40), (-240), 80, 240), i.faceDirection(1), i }
                return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this._view.state.setAnimation(0, "run_slow", !0), this._view.state.addListener({ event: this._onAnimationEvent.bind(this) }) } }, { key: "destroy", value: function(e) { this._flightTimeline && this._flightTimeline.kill(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "update", value: function(e) { this.x += this._velocity.x * e, this.y = this._world.getGroundY(this.x), this._isGrounded ? this._falling ? (this._velocity.y += this._gravity * e, this._jumpY += this._velocity.y * e, this._view.y = this._jumpY) : (this._velocity.y = 0, this.y = this._world.getGroundY(this.x)) : (this._velocity.y += this._gravity * e, this._jumpY += this._velocity.y * e, this.y + this._jumpY >= this._world.getGroundY(this.x) && this.land(), this._view.y = this._jumpY, this._shadow.scale.set(.7 + this._jumpY / 1e3)), this._collisionGraphic && (this._collisionGraphic.x = this._view.x, this._collisionGraphic.y = this._view.y), this._skipFrame++ % 2 === 0 && this._view.update(2 * e) } }, {
                    key: "jump",
                    value: function() {
                        this._isGrounded && (this._isGrounded = !1, this._velocity.y = -this._jumpSpeed, this._jumpY = 0, this._view.state.setAnimation(0, "jump_fast_fwd", !1))
                    }
                }, { key: "land", value: function() { this._isGrounded || (this._isGrounded = !0, this._jumpY = 0, this._shadow.scale.set(.7), this._dead || this._view.state.setAnimation(0, "run_slow", !0)) } }, { key: "death", value: function() { this._velocity.x = 0, this._view.state.setAnimation(0, "idle_posing_1", !0), this._dead = !0 } }, { key: "thrownAway", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1,
                            t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0;
                        this._falling = !0, this._isGrounded = !0, this._view.state.setAnimation(0, "death_throw_1", !0), this._shadow.visible = !1, this._flightTimeline = new TimelineMax({ delay: t }), this._flightTimeline.to(this, 1 * e / 3, { _jumpY: this._jumpY - 140, ease: Sine.easeOut }, 0), this._flightTimeline.to(this, 2 * e / 3, { _jumpY: this._jumpY + 500, ease: Sine.easeIn, onStartScope: this, onStart: function() { this._world.layerFg2.addChild(this) } }, e / 3), this._flightTimeline.to(this.scale, e, { x: 2, y: 2, ease: Sine.easeInOut }, 0) } }, { key: "collide", value: function(e) { var t = this.collisionBox; return !(e.x + e.width < t.x) && (!(e.x > t.x + this._collisionBox.width) && (!(e.y + e.height < t.y) && !(e.y > t.y + this._collisionBox.height))) } }, { key: "_playFootstepSFX", value: function() { c["default"].audio.playSound(["sfx_footstep_00", "sfx_footstep_01", "sfx_footstep_02", "sfx_footstep_03", "sfx_footstep_04"]) } }, { key: "_onAnimationEvent", value: function(e, t) { "sfx_footstep" === t.data.name && this._playFootstepSFX() } }, { key: "isGrounded", get: function() { return this._isGrounded } }, { key: "collisionBox", get: function() { return new PIXI.Rectangle(this.x + this._view.x + this._collisionBox.x, this.y + this._view.y + this._collisionBox.y, this._collisionBox.width, this._collisionBox.height) } }]), t
            }(_["default"]);
        i["default"] = d
    }, { "../../Actor": 4, "../../Common": 13 }],
    128: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function b(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : b(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Common"),
            _ = n(u),
            h = e("./Ivandoe"),
            c = (n(h), e("./World")),
            d = n(c),
            p = e("./Hud"),
            f = n(p),
            y = e("./InteractiveArea"),
            v = n(y),
            m = e("../../MinigameScene"),
            g = n(m),
            w = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._states = { GRACE: 1, GAMEPLAY: 2, GAMEOVER: 3, INACTIVE: -1 }, e._gamestate = null, e._gamestateTime = 0, e._nextGamestate = e._states.INACTIVE, e._graceTime = 0, e._tutorial = !1, e._paused = !1, e } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this._world = new d["default"], this.addChild(this._world), this._lights = new PIXI.Sprite(_["default"].assets.texture("ep10_mountainHiking/fixed_lighting copy")), this._lights.blendMode = 1, this.addChild(this._lights), this._interactiveArea = new v["default"](1), this.addChild(this._interactiveArea), this._hud = new f["default"], this._hud.setScore(this.score), this._hud.setHiScore(this.highscore), this.addChild(this._hud), this._hud.pauseButton.signals.click.add(this._onPauseButtonClick, this) } }, { key: "destroy", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "resize", value: function() { this.x = .5 * (P3.View.width - _["default"].STAGE_WIDTH), this._hud.resize() } }, { key: "appear", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "appear", this).call(this), this._isFirstPlay() && this.signals.pause.dispatch(this, !0), this._nextGamestate = this._states.GRACE } }, { key: "show", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "show", this).call(this), TweenMax.resumeAll() } }, { key: "update", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "update", this).call(this); var e = deltaTime; switch (this._paused && (e = 0), this._world.update(e), this._nextGamestate ? (this._gamestate = this._nextGamestate, this._gamestateTime = 0, this._nextGamestate = null) : this._gamestateTime += e, this._gamestate) {
                            case this._states.GRACE:
                                this._gamestateTime > this._graceTime && (this._nextGamestate = this._states.GAMEPLAY); break;
                            case this._states.GAMEPLAY:
                                if (0 == this._gamestateTime) this._obstacleDelay = 0, this._obstacleCount = 0, _["default"].audio.playMusic("music_loop_dramatic_tense_00"), this._interactiveArea.getArea(0).signals.clicked.add(function() { this.jump() }.bind(this));
                                else { this._obstacleDelay += e, this._obstacleDelay > 1 && (this._obstacleDelay -= 1, this._world.createObstacle(0 === this._obstacleCount), this._obstacleCount++); for (var i = this._world.layerMg.getObjectsOfType("obstacle"), n = i.length - 1; n >= 0; n--) !this._tutorial && i[n].x - this._world.avatar.x < 350 && this.tutorial(), this._world.avatar.collide(i[n].collisionBox) && (this._interactiveArea.removeAllEvents(), this._nextGamestate = this._states.GAMEOVER, _["default"].audio.playSound("sfx_rock_hit_ivandoe_00")) } _["default"].input.isKeyPressed(32) && this.jump(); break;
                            case this._states.GAMEOVER:
                                0 == this._gamestateTime && (this._world.avatar.death(), this._world.avatar.thrownAway(), this._world.bert.flyAway(), _["default"].audio.stopMusic(), _["default"].audio.playSound("music_fail_stab_00")), this._gamestateTime > 3 && (this._nextGamestate = this._states.INACTIVE, this.end()) } this._score = this.distance, this._hud.setScore(this.score) } }, { key: "end", value: function() { for (var e = this._world.layerMg.getObjectsOfType("obstacle"), i = 0; i < e.length; i++) e[i].stop();
                        this._hud.setHiScore(this.highscore), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "end", this).call(this), this.playEndVO(this._score) } }, { key: "jump", value: function() { this._tutorial && (this.tutorialEnd(), this._world.avatar.jump()) } }, { key: "tutorial", value: function() { this._paused = !0, this._tutorial = !0, TweenMax.pauseAll(), this._world.removeShake(), this._initTutorialPointer(this._world), this._animatePointer({ x: this._world.avatar.x + 100, y: this._world.avatar.y - this._world.avatar.height / 2 - 100 }) } }, { key: "tutorialEnd", value: function() { this._paused && (this._killPointer(), this._paused = !1, TweenMax.resumeAll()) } }, { key: "pause", value: function() { for (var e = this._world.layerMg.getObjectsOfType("obstacle"), t = 0; t < e.length; t++) e[t].pause() } }, { key: "resume", value: function() { for (var e = this._world.layerMg.getObjectsOfType("obstacle"), t = 0; t < e.length; t++) e[t].resume() } }, { key: "_onPauseButtonClick", value: function(e) { TweenMax.pauseAll(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "_onPauseButtonClick", this).call(this, e) } }, { key: "distance", get: function() { return Math.floor(this._world.avatar.x / 100) } }]), t }(g["default"]);
        i["default"] = w }, { "../../Common": 13, "../../MinigameScene": 28, "./Hud": 125, "./InteractiveArea": 126, "./Ivandoe": 127, "./World": 130 }],
    129: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Actor"),
            _ = n(u),
            h = e("../../Common"),
            c = n(h),
            d = function(e) {
                function t(e, i) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null,
                        s = arguments[3],
                        r = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : 1;
                    a(this, t); var l = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    l._world = e, l._type = "obstacle", l._behavior = n, l._bounceContainer = new PIXI.Container, l.addChild(l._bounceContainer), l._sprite = new PIXI.Sprite(i || c["default"].assets.texture("ep10_mountainHiking/obstacle_001")), l._sprite.anchor.set(.5), l._sprite.y -= .5 * l._sprite.height, l._bounceContainer.addChild(l._sprite); var u = new PIXI.Container; return u.scale.set(r), l.addChildAt(u, 0), l._shadow = new PIXI.Sprite(c["default"].assets.texture("shadow")), l._shadow.anchor.set(.5), l._shadow.scale.set(.6), l._shadow.alpha = .5, l._shadow.rotation = -l._world.inclination, u.addChild(l._shadow), l._collisionBox = s || new PIXI.Rectangle((-40), (-100), 80, 80), l } return s(t, e), r(t, [{ key: "init", value: function() { switch (l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this._behaviors = { ROLL: 1, BOUNCE: 2, BOUNCE_FAST: 3, BOUNCE_FAKE: 4 }, this._behavior || (this._behavior = P3.math.randomInt(1, 4)), this._velocity = new PIXI.Point(500, 0), this._behavior) {
                            case this._behaviors.ROLL:
                                this._sfx = c["default"].audio.playSound("sfx_rock_tumble_0" + P3.math.randomInt(0, 2), { loop: !0 }); break;
                            case this._behaviors.BOUNCE:
                            case this._behaviors.BOUNCE_FAST:
                                var e = this._world.avatar.x,
                                    i = this.x,
                                    n = e + (i - e) * (this._world.avatar._velocity.x / (this._world.avatar._velocity.x + this._velocity.x)),
                                    a = (n - e) / this._world.avatar._velocity.x;
                                this._bounceY = 0; var o = 5;
                                this._behavior == this._behaviors.BOUNCE_FAST && (o += 2), this._timeline = new TimelineMax; for (var s = 0; s < o; s++) { this._timeline.to(this, a / o, { _bounceY: this._behavior === this._behaviors.BOUNCE_FAST ? .8 : 1, ease: Quad.easeOut }, a / o * (2 * s)); var r = { _bounceY: 0, ease: Quad.easeIn };
                                    s == Math.floor(o / 2) - 1 && (r.onCompleteScope = this, r.onComplete = function() { this._sfx = c["default"].audio.playSound("sfx_rock_land_0" + P3.math.randomInt(0, 3)), this._world.shake(.3, new PIXI.Point(6, 10)) }), this._timeline.to(this, a / o, r, a / o * (2 * s + 1)) } break;
                            case this._behaviors.BOUNCE_FAKE:
                                var e = this._world.avatar.x,
                                    i = this.x,
                                    n = e + (i - e) * (this._world.avatar._velocity.x / (this._world.avatar._velocity.x + this._velocity.x)),
                                    a = (n - e) / this._world.avatar._velocity.x;
                                this._bounceY = 0; var o = 5;
                                this._timeline = new TimelineMax({ onCompleteScope: this, onComplete: function() { this._sfx = this._sfx = c["default"].audio.playSound("sfx_rock_tumble_0" + P3.math.randomInt(0, 2), { loop: !0 }), this._behavior = this._behaviors.ROLL, this._bounceContainer.y = 500 * -this._bounceY } }); for (var s = 0; s < Math.floor(o / 2); s++) { this._timeline.to(this, a / o, { _bounceY: .65, ease: Quad.easeOut }, a / o * (2 * s)); var r = { _bounceY: 0, ease: Quad.easeIn };
                                    1 == s && (r.onCompleteScope = this, r.onComplete = function() { this._sfx = c["default"].audio.playSound("sfx_rock_land_0" + P3.math.randomInt(0, 3)), this._world.shake(.2, new PIXI.Point(4, 8)) }), this._timeline.to(this, a / o, r, a / o * (2 * s + 1)) } } } }, { key: "destroy", value: function(e) { this.stop(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "stop", value: function() { this._sfx && this._sfx.howl.stop(this._sfx.id), this._timeline && this._timeline.kill() } }, { key: "pause", value: function() { this._sfx && this._sfx.stop(), this._timeline && this._timeline.pause() } }, { key: "resume", value: function() { this._sfx && this._sfx.play(), this._timeline && this._timeline.resume() } }, { key: "update", value: function(e) { switch (this._behavior) {
                            case this._behaviors.ROLL:
                                this.x -= this._velocity.x * e, this.y = this._world.getGroundY(this.x), this._sprite.rotation -= 2 * e * Math.PI; break;
                            case this._behaviors.BOUNCE:
                            case this._behaviors.BOUNCE_FAKE:
                            case this._behaviors.BOUNCE_FAST:
                                this.x -= this._velocity.x * e, this.y = this._world.getGroundY(this.x), this._bounceContainer.y = 500 * -this._bounceY, this._sprite.rotation -= 1 * e * Math.PI, this._shadow.scale.set(.6 - .3 * this._bounceY) } if (this._collisionGraphic && (this._collisionGraphic.x = this._bounceContainer.x, this._collisionGraphic.y = this._bounceContainer.y), this._sfx) { var t = Math.abs(this._world.focusPosition.x - this.x),
                                i = Math.max(0, 1 - t / 1200);
                            this._sfx.howl.volume(i, this._sfx.id) } } }, { key: "collisionBox", get: function() { return new PIXI.Rectangle(this.x + this._bounceContainer.x + this._collisionBox.x, this.y + this._bounceContainer.y + this._collisionBox.y, this._collisionBox.width, this._collisionBox.height) } }]), t }(_["default"]);
        i["default"] = d }, { "../../Actor": 4, "../../Common": 13 }],
    130: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function w(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : w(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Common"),
            _ = n(u),
            h = e("./Ivandoe"),
            c = n(h),
            d = e("./Bert"),
            p = n(d),
            f = e("./Obstacle"),
            y = n(f),
            v = e("./WorldLayer"),
            m = n(v),
            g = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e.inclination = 15.5 * PIXI.DEG_TO_RAD, e.focusPoint = new PIXI.Point(.4, .8), e.focusPosition = new PIXI.Point(0, 0), e.focusActive = { x: !0, y: !0 }, e.focusPointTween = null, e.zoom = .8, e.zoomTarget = 1, e.zoomTween = null, e._isShake = !1, e._shakeTime = 0, e._shakeTimeEnd = 1, e._shakeStrength = new PIXI.Point(10, 10), e.layers = [], e.layerBg = e.createLayer("bg", .4), e.layerBg.setBackground([_["default"].assets.texture("ep10_mountainHiking_bg", "jpg")], new PIXI.Point(0, (-500))), e.layerMg = e.createLayer("mg", 0), e.layerMg.setBackground([_["default"].assets.texture("ep10_mountainHiking/mg")]), e.avatar = new c["default"](e), e.avatar.y = e.getGroundY(0), e.layerMg.addChild(e.avatar), e.bert = new p["default"](e), e.layerMg.addChild(e.bert), e.layerFg = e.createLayer("fg", -.4), e.layerFg.setBackground([_["default"].assets.texture("ep10_mountainHiking/fg")], new PIXI.Point(0, 0)), e.layerFg2 = e.createLayer("fg2", 0), e._particles = e.initParticles(e.layerMg), e } return s(t, e), r(t, [{ key: "update", value: function(e) { var t = new PIXI.Point(this.avatar.x, this.avatar.y);
                        this.avatar.update(e), this.bert.update(e, this.avatar), this._isShake && (this._shakeTime += e, this._shakeTime >= this._shakeTimeEnd && (this._shakeTime = 0, this._isShake = !1)), this.focusActive.x && (this.focusPosition.x = this.avatar.x), this.focusActive.y && (this.focusPosition.y = this.avatar.y), this.x = _["default"].STAGE_WIDTH * this.focusPoint.x - this.focusPosition.x * this.zoom, this.y = _["default"].STAGE_HEIGHT * this.focusPoint.y - this.focusPosition.y * this.zoom, this._isShake && (this.x += P3.math.randomInt(-1, 1) * (this._shakeStrength.x * (1 - this._shakeTime / this._shakeTimeEnd)), this.y += P3.math.randomInt(-1, 1) * (this._shakeStrength.y * (1 - this._shakeTime / this._shakeTimeEnd))), this.scale.x = this.zoom, this.scale.y = this.zoom; for (var i = new PIXI.Point(this.focusActive.x ? this.avatar.x - t.x : 0, this.focusActive.y ? this.avatar.y - t.y : 0), n = 0; n < this.layers.length; n++) this.layers[n].update(e, i);
                        this._particles && (this._particles.updateOwnerPos(this.focusPosition.x + _["default"].STAGE_WIDTH * (.5 - this.focusPoint.x), this.focusPosition.y + _["default"].STAGE_HEIGHT * (.5 - this.focusPoint.y)), this._particles.update(e)) } }, { key: "destroy", value: function(e) { this.zoomTween && this.zoomTween.kill(), this.focusPointTween && this.focusPointTween.kill(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "changeZoom", value: function(e, t, i) { null != this.zoomTween && this.zoomTween.kill(), e != this.zoom && (this.zoomTween = new TimelineMax, this.zoomTween.to(this, t, { zoom: e, ease: Sine.easeInOut }, i ? i : 0), this.zoomTarget = e) } }, { key: "changeFocusPoint", value: function(e, t, i) { null != this.focusPointTween && this.focusPointTween.kill(), this.focusPoint.equal(e) || (this.focusPointTween = new TimelineMax, this.focusPointTween.to(this.focusPoint, t, { x: e.x, y: e.y, ease: Sine.easeInOut }, i ? i : 0)) } }, { key: "shake", value: function(e, t, i) { return this._shakeDelayTimeline && this._shakeDelayTimeline.kill(), i ? (this._shakeDelayTimeline = new TimelineMax, void this._shakeDelayTimeline.to(this, .01, { onStartScope: this, onStart: function() { this.shake(e, t) } }, i)) : (this._isShake = !0, this._shakeTime = 0, this._shakeTimeEnd = e, void(this._shakeStrength = t)) } }, { key: "removeShake", value: function() { this._shakeDelayTimeline && (this._shakeDelayTimeline.kill(), this._shakeDelayTimeline = null), this._isShake = !1 } }, { key: "createLayer", value: function(e, t) { var i = new m["default"](this, e, t); return this.layers.push(i), this.addChild(i), i } }, { key: "createObstacle", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
                            t = e ? 0 : P3.utils.selectRandom([0, 1, 2]),
                            i = void 0,
                            n = void 0,
                            a = void 0,
                            o = void 0,
                            s = void 0; switch (t) {
                            case 0:
                                i = _["default"].assets.texture("ep10_mountainHiking/obstacle_001"), n = P3.utils.selectRandom([1, 2, 2, 2, 2, 4, 4]), a = new PIXI.Rectangle((-40), (-100), 80, 80), o = 1.4, s = 0; break;
                            case 1:
                                i = _["default"].assets.texture("ep10_mountainHiking/obstacle_000"), n = P3.utils.selectRandom([2, 2, 3, 3, 3, 4]), a = new PIXI.Rectangle((-40), (-100), 80, 80), o = 1, s = 0; break;
                            case 2:
                                i = _["default"].assets.texture("ep10_mountainHiking/obstacle_002"), n = P3.utils.selectRandom([1, 1, 1, 1, 4]), a = new PIXI.Rectangle((-70), (-140), 140, 140), o = 2, s = 4 } e && (n = 1); var r = new y["default"](this, i, n, a, o);
                        r.x = this.avatar.x + 3e3, r.y = this.getGroundY(r.x), this.layerMg.addObject(r) } }, { key: "initParticles", value: function(e) { var t = _["default"].assets.json("particle_emitter_fairdust_01");
                        t.spawnRect.w = _["default"].STAGE_WIDTH, t.spawnRect.h = _["default"].STAGE_HEIGHT, t.spawnRect.x = -_["default"].STAGE_WIDTH / 2, t.spawnRect.y = -_["default"].STAGE_HEIGHT / 2; var i = new PIXI.particles.Emitter(e, [_["default"].assets.texture("particle_fairy_dust_00"), _["default"].assets.texture("particle_fairy_dust_01")], t); return i.emit = !0, i } }, { key: "getGroundY", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0; return -Math.sin(this.inclination) * e - 450 } }, { key: "rightLimit", get: function() { return this.focusPosition.x + _["default"].STAGE_WIDTH / this.zoom * (1 - this.focusPoint.x + .5) } }, { key: "leftLimit", get: function() { return this.focusPosition.x - _["default"].STAGE_WIDTH / this.zoom * (this.focusPoint.x + .5) } }]), t }(PIXI.Container);
        i["default"] = g }, { "../../Common": 13, "./Bert": 124, "./Ivandoe": 127, "./Obstacle": 129, "./WorldLayer": 131 }],
    131: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function h(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : h(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Common"),
            _ = (n(u), function(e) {
                function t(e, i, n) { a(this, t); var s = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return s._world = e, s._name = i, s._parallax = n || 0, s._backgroundTextures = null, s._backgroundDelta = new PIXI.Point(0, 0), s._backgroundSprites = [], s._backgroundContainer = new PIXI.Container, s.addChild(s._backgroundContainer), s._objects = [], s._objectsContainer = new PIXI.Container, s.addChild(s._objectsContainer), s } return s(t, e), r(t, [{ key: "destroy", value: function(e) { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "update", value: function(e, t) { this.x += t.x * this._parallax, this.y = -Math.sin(this._world.inclination) * this.x; for (var i = this._objects.length - 1; i >= 0; i--) this._objects[i].x < this._world.leftLimit ? this.removeObject(this._objects[i]) : this._objects[i].update(e);
                        this.updateBackground() } }, { key: "updateBackground", value: function() { if (this._backgroundTextures) { for (var e = this._backgroundTextures[0].width, t = (this._backgroundTextures[0].height, 0), i = Math.floor((this._world.leftLimit - this.x) / e); i <= Math.ceil((this._world.rightLimit - this.x) / e); i++) { if (!this._backgroundSprites[t]) { var n = new PIXI.Sprite(this._backgroundTextures[0]);
                                    n.anchor.set(0, 1), this._backgroundSprites.push(n), this._backgroundContainer.addChild(n) } this._backgroundSprites[t].texture = this._backgroundTextures[Math.abs(i) % this._backgroundTextures.length], this._backgroundSprites[t].x = Math.floor(i * e + this._backgroundDelta.x) - 1 * i, this._backgroundSprites[t].y = Math.floor(-Math.sin(this._world.inclination) * (i * e) + this._backgroundDelta.y), t++ } for (; t < this._backgroundSprites.length; t++) this._backgroundSprites[t].visible = !1 } } }, { key: "setBackground", value: function(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : new PIXI.Point(0, 0);
                        this._backgroundTextures = e, this._backgroundDelta = t } }, { key: "addObject", value: function(e) { this._objectsContainer.addChild(e), this._objects.push(e) } }, { key: "removeObject", value: function(e) { var t = this._objects.indexOf(e);
                        t != -1 && (this._objectsContainer.removeChild(e), this._objects.splice(t, 1), e.destroy({ children: !0 })) } }, { key: "getObjectsOfType", value: function(e) { for (var t = [], i = this._objects.length - 1; i >= 0; i--) this._objects[i]._type == e && t.push(this._objects[i]); return t } }]), t }(PIXI.Container));
        i["default"] = _ }, { "../../Common": 13 }],
    132: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("../../Common"),
            u = n(l),
            _ = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._scorePanel = null, e._highscorePanel = null, e._pauseButton = null, e.init(), e } return s(t, e), r(t, [{ key: "init", value: function() { this._createHighscorePanel(), this._scorePanel = new PIXI.Container, this.addChild(this._scorePanel), this._scorePanel.first = this._createScorePanel(), this._scorePanel.first.position.set(0, 0), this._scorePanel.addChild(this._scorePanel.first), this._scorePanel.second = this._createScorePanel(), this._scorePanel.second.position.set(0, 80), this._scorePanel.addChild(this._scorePanel.second), this._scorePanel.third = this._createScorePanel(), this._scorePanel.third.position.set(0, 160), this._scorePanel.addChild(this._scorePanel.third), this._createPauseButton() } }, { key: "resize", value: function() { this._scorePanel.x = 0, this._scorePanel.y = 74, this._highscorePanel.x = .5 * P3.View.width, this._highscorePanel.y = 60, this._pauseButton.x = P3.View.width - 100, this._pauseButton.y = 100 } }, { key: "setLives", value: function(e) { for (var t = u["default"].assets, i = 0; i < this._livesPanel.icons.length; i++) this._livesPanel.icons[i].texture = t.texture("minigame_tries_icon_00" + (i + 1) + "_" + (i < e ? "on" : "off")) } }, { key: "setScore", value: function(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
                            i = [this._scorePanel.first, this._scorePanel.second, this._scorePanel.third],
                            n = i[t];
                        n.label.text = e.toString() } }, { key: "setHighscore", value: function(e) { this._highscorePanel.label.text = e.toString() } }, { key: "_createHighscorePanel", value: function() { var e = u["default"].assets,
                            t = new PIXI.Container;
                        t.background = new PIXI.Sprite(e.texture("minigame_generic_panel")), t.background.anchor.set(.5), t.addChild(t.background), t.icon = new PIXI.Sprite(e.texture("minigame_icon_best")), t.icon.anchor.set(.5), t.addChild(t.icon), webfont ? (t.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "center", fill: 16777215 }), t.label.y = 15, t.label.anchor.set(.5), t.addChild(t.label)) : (t.label = new PIXI.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), t.label.y = 18, t.label.anchor.set(.5), t.addChild(t.label)), this._highscorePanel = t, this.addChild(this._highscorePanel) } }, { key: "_createPauseButton", value: function() { var e = u["default"].assets,
                            t = new P3.ButtonStates;
                        t.normal = e.texture("btn_primary_small_off"), t.over = e.texture("btn_primary_small_over"), t.down = e.texture("btn_primary_small_over"), t.icon = e.texture("icon_help"), this._pauseButton = new P3.Button(t), this.addChild(this._pauseButton) } }, { key: "_createScorePanel", value: function() { var e = u["default"].assets,
                            t = new PIXI.Container; return t.background = new PIXI.Sprite(e.texture("minigame_frogkick_panel")), t.background.anchor.set(0, .5), t.addChild(t.background), t.icon = new PIXI.Sprite(e.texture("minigame_icon_ep3_2")), t.icon.position.set(0, 0), t.icon.anchor.set(0, .5), t.addChild(t.icon), webfont ? (t.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "left", fill: 16777215 }), t.label.position.set(124, 0), t.label.anchor.set(.5), t.addChild(t.label)) : (t.label = new PIXI.extras.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), t.label.position.set(124, 4), t.label.anchor.set(.5), t.addChild(t.label)), t } }, { key: "pauseButton", get: function() { return this._pauseButton } }]), t }(PIXI.Container);
        i["default"] = _ }, { "../../Common": 13 }],
    133: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Actor"),
            _ = n(u),
            h = e("../../Common"),
            c = n(h),
            d = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    e.signals["throw"] = new signals.Signal, e._skipFrame = 0; var i = c["default"].assets,
                        n = new PIXI.Container; return e.addChild(n), e._view = new PIXI.spine.Spine(i.spineData("ivandoe_front")), e._view.scale.set(.4, .4), e._view.skeleton.setToSetupPose(), e._view.skeleton.setSkin(null), e._view.skeleton.setSkinByName("standard"), e._view.stateData.defaultMix = .15, e._view.autoUpdate = !1, e._view.update(0), n.addChild(e._view), e._shadow = new PIXI.Sprite(c["default"].assets.texture("shadow")), e._shadow.anchor.set(.5), e._shadow.blendMode = 2, e._shadow.alpha = .35, e._shadow.scale.set(.8), n.addChildAt(e._shadow, 0), e.faceDirection(1), e } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this._view.state.setAnimation(0, "poodle_throw_idle", !0), this.y += 175, this._view.state.addListener({ event: this._onAnimationEvent.bind(this) }) } }, { key: "destroy", value: function() { this.signals["throw"].dispose(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "update", value: function(e) { this._skipFrame++ % 2 === 0 && this._view.update(2 * e) } }, { key: "playThrowStickAnimation", value: function() { this._view.state.setAnimation(0, "poodle_throw_release", !1), this._view.state.addAnimation(0, "idle_posing_" + P3.math.randomInt(1, 3), !0, 0) } }, { key: "playPickupStickAnimation", value: function() { this._view.state.setAnimation(0, "poodle_throw_pickup", !1), this._view.state.addAnimation(0, "poodle_throw_idle", !0, 0) } }, { key: "_onAnimationEvent", value: function(e, t) { "throw_stick" === t.data.name && this.signals["throw"].dispatch(this) } }]), t }(_["default"]);
        i["default"] = d }, { "../../Actor": 4, "../../Common": 13 }],
    134: [function(e, t, i) {
        "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 });
        var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Actor"),
            _ = n(u),
            h = e("../../Common"),
            c = n(h),
            d = function(e) {
                function t() {
                    a(this, t);
                    var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    e.signals.arrive = new signals.Signal, e.moveSpeed = t.SLOW_SPEED, e.target = 0, e._velocity = new P3.Vector2,
                        e._lastPosition = new PIXI.Point;
                    var i = c["default"].assets;
                    return e._view = new PIXI.spine.Spine(i.spineData("poodle_run")), e._view.scale.set(.4, .4), e._view.skeleton.setToSetupPose(), e._view.state.setAnimation(0, "idle1", !0), e._view.stateData.defaultMix = .15, e._view.stateData.setMix("idle1", "run_wo_stick", .1), e._view.stateData.setMix("idle2", "run_wo_stick", .1), e._view.stateData.setMix("run_wo_stick", "run_pickup", .1), e._view.stateData.setMix("run_pickup", "idle_wi_stick", .1), e._view.stateData.setMix("idle_wi_stick", "run_wi_stick", .1), e._view.stateData.setMix("idle1", "idle_to_turn", .1), e._view.stateData.setMix("idle2", "idle_to_turn", .1), e._view.stateData.setMix("idle_to_turn", "run_wo_stick", .1), e._view.stateData.setMix("run_wi_stick", "dropstick-end", .1), e._view.stateData.setMix("dropstick-end", "idle-end", .1), e._view.autoUpdate = !1, e._view.update(0), e.addChild(e._view), e._skipFrame = 0, e.faceDirection(-1), e
                }
                return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this.target = this.x, this._lastPosition.set(this.x, this.y) } }, { key: "destroy", value: function() { this.signals.arrive.dispose(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "update", value: function(e) { var t = "number" == typeof this.target ? this.target - this.x : this.target.x - this.x,
                            i = Math.sign(t);
                        this.faceDirection(i), this.x += Math.sign(t) * this.moveSpeed * e, Math.abs(t) < this.moveSpeed * e && (this.x = "number" == typeof this.target ? this.target : this.target.x, this.signals.arrive.dispatch(this, this.target)), this._velocity.set(this.x - this._lastPosition.x, this.y - this._lastPosition.y), this._lastPosition.set(this.x, this.y), this._skipFrame++ % 2 === 0 && this._view.update(2 * e) } }, { key: "playIdleAnimation", value: function() { this._view.state.setAnimation(0, "idle" + P3.math.randomInt(1, 2), !0) } }, { key: "playPickupStickAnimation", value: function() { this._view.state.setAnimation(0, "run_pickup", !1), this._view.state.addAnimation(0, "idle_wi_stick", !0, 0) } }, { key: "playTurnAnimation", value: function() { this._view.state.setAnimation(0, "idle_to_turn", !1) } }, { key: "playRunAnimation", value: function() { this._view.state.setAnimation(0, "run_wo_stick", !0) } }, { key: "playRunStickAnimation", value: function() { this._view.state.setAnimation(0, "run_wi_stick", !0) } }, { key: "playDropStickAnimation", value: function() { this._view.state.setAnimation(0, "dropstick-end", !1), this._view.state.addAnimation(0, "idle-end", !0, 0) } }, { key: "velocity", get: function() { return this._velocity } }]), t
            }(_["default"]);
        i["default"] = d, d.FAST_SPEED = 2e3, d.SLOW_SPEED = 1200
    }, { "../../Actor": 4, "../../Common": 13 }],
    135: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function k(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : k(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Common"),
            _ = n(u),
            h = e("./Hud"),
            c = n(h),
            d = e("./Poodle"),
            p = n(d),
            f = e("./Ivandoe"),
            y = n(f),
            v = e("./Stick"),
            m = n(v),
            g = e("../../MinigameScene"),
            w = n(g),
            b = e("./PowerGauge"),
            P = n(b),
            x = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._graceDuration = 6, e._roundScore = 0, e._game = null, e._fg = null, e._mg = null, e._bg = null, e._interactArea = null, e._bgTiles = [], e._mgTiles = [], e._fgTiles = [], e._camera = null, e._ivandoe = null, e._poodle = null, e._poodleStart = new PIXI.Point, e._cameraStart = new PIXI.Point(1200), e._stickStart = new PIXI.Point, e._grabbedStick = !1, e._stick = null, e._throwAngle = .15 * -Math.PI, e._throwPowerMin = 2400, e._throwPowerMax = 4400, e._throwTorqueMin = 10, e._throwTorqueMax = 20, e._cameraFollowPoodle = !1, e._attempt = 0, e._flags = [], e._runHowl = null, e._fogEmitter = null, e._powerGauge = null, e._powerGaugeMode = -1, e._powerGaugeStrength = 0, e._powerGaugeTheta = 0, e } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this._bg = new PIXI.Container, this.addChild(this._bg), this._mg = new PIXI.Container, this.addChild(this._mg), this._game = new PIXI.Container, this.addChild(this._game), this._fg = new PIXI.Container, this.addChild(this._fg), this._interactArea = new PIXI.Container, this._interactArea.interactive = !0, this._interactArea.hitArea = new PIXI.Rectangle(0, 0, P3.View.width, P3.View.height), this._interactArea.mousedown = this._interactArea.touchstart = this._onMouseDown.bind(this), this.addChild(this._interactArea), this._hud = new c["default"], this.addChild(this._hud), this._hud.setScore(this.score, 0), this._hud.setScore(this.score, 1), this._hud.setScore(this.score, 2), this._hud.setHighscore(this.highscore), this._hud.pauseButton.signals.click.add(this._onPauseButtonClick, this), this._camera = new P3.Camera(new PIXI.Point(.5 * P3.View.width + 160)), this._camera.smoothness.x = .8, this._camera.addLayer(new P3.CameraLayer(this._bg, new PIXI.Point(.8, .8))), this._camera.addLayer(new P3.CameraLayer(this._mg, new PIXI.Point(1, 1))), this._camera.addLayer(new P3.CameraLayer(this._game, new PIXI.Point(1, 1))), this._camera.addLayer(new P3.CameraLayer(this._fg, new PIXI.Point(2, 2))), this._camera.setTarget(this._cameraStart.clone(), !0), this._initBgTiles(), this._initMgTiles(), this._initFgTiles(), this._ivandoe = new y["default"], this._ivandoe.x = 800, this._ivandoe.y = 480, this._ivandoe.signals["throw"].add(this.onIvandoeThrowStick, this), this._game.addChild(this._ivandoe), this._poodle = new p["default"], this._poodle.x = 1280, this._poodle.y = 665, this._game.addChild(this._poodle), this._poodleStart.set(this._poodle.x, this._poodle.y), this._stick = new m["default"], this._stick.x = 898, this._stick.y = 434, this._stick.floor = 654, this._stick.visible = !1, this._game.addChild(this._stick), this._stickStart.set(this._stick.x, this._stick.y), this._fogEmitter = this.initParticles(this._game); var e = new PIXI.Container;
                        e.x = 680, e.y = 480, e.rotation = -26 * PIXI.DEG_TO_RAD, this._game.addChild(e), this._powerGauge = new P["default"], e.addChild(this._powerGauge) } }, { key: "destroy", value: function() { this._interactArea.mousedown = this._interactArea.touchstart = null, this._runHowl && this._runHowl.destroy(), this._voRunSFX && this._voRunSFX.destroy(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "resize", value: function() { this._interactArea.hitArea.width = P3.View.width, this._hud.resize() } }, { key: "pause", value: function() { this._runHowl && this._runHowl.pause(), this._voRunStartSFX && this._voRunStartSFX.pause(), this._voRunSFX && this._voRunSFX.pause(), this._throwTimeline && this._throwTimeline.pause(), this._grabTimeline && this._grabTimeline.pause(), this._resetTimeline && this._resetTimeline.pause(), this._endTimeline && this._endTimeline.pause(), this._tutorialDelay && this._tutorialDelay.pause() } }, { key: "resume", value: function() { this._runHowl && this._runHowl.play(), this._voRunStartSFX && this._voRunStartSFX.play(), this._voRunSFX && this._voRunSFX.play(), this._throwTimeline && this._throwTimeline.resume(), this._grabTimeline && this._grabTimeline.resume(), this._resetTimeline && this._resetTimeline.resume(), this._endTimeline && this._endTimeline.resume(), this._tutorialDelay && this._tutorialDelay.resume() } }, { key: "update", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "update", this).call(this); var e = deltaTime; if (this._powerGauge.update(e), 1 === this._powerGaugeMode && 2 !== this._powerGaugeMode) { .5 * -Math.PI;
                            this._powerGaugeStrength = Math.pow(.02 * ++this._powerGaugeTheta % 1, 3), this._powerGauge.setPower(this._powerGaugeStrength) } this._cameraFollowPoodle && (this._camera.target.x = this._poodle.x + 18 * this._poodle.velocity.x), this.checkPoodleNearStick(), this._ivandoe.update(e), this._poodle.update(e), this._stick.update(e), this._camera.update(e), this._fogEmitter.update(e), this._cullBgTiles(), this._cullMgTiles(), this._cullFgTiles(), this._updateDistance() } }, { key: "appear", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "appear", this).call(this), this._isFirstPlay() && (this._graceDuration = .4, this.signals.pause.dispatch(this, !0)) } }, { key: "show", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "show", this).call(this), this._runHowl && this._runHowl.pause && this._runHowl.play() } }, { key: "start", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "start", this).call(this), this._powerGauge.fadeIn(function() { this._powerGaugeMode = 0, this._powerGauge.startAngleAnimation() }, this), this._isFirstPlay() && this._tutorial(), _["default"].audio.playMusic("music_loop_frantic_fun_00") } }, { key: "end", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "end", this).call(this), this.playEndVO(this._score), this._hud.setHighscore(this.highscore), this._voRunSFX && this._voRunSFX.destroy(), _["default"].audio.stopMusic(), _["default"].audio.playSound("music_fail_stab_01") } }, { key: "gameOver", value: function() { var e = this;
                        this._runHowl && this._runHowl.stop(), this._poodle.playDropStickAnimation(), this._endTimeline = new TimelineMax({ onComplete: function() { this._endTimeline = null } }), this._tweenList.add(this._endTimeline), this._endTimeline.insert(delay(function() { e.end() }, 1.5, this)), _["default"].audio.playSound("vo_poodle_endangry_00") } }, { key: "resetPowerGauge", value: function() { this._powerGaugeStrength = 0, this._powerGaugeTheta = 0, this._powerGauge.setPower(0) } }, { key: "throwStick", value: function() { if (!this._stick.thrown) { _["default"].audio.playSound(["vo_ivandoe_swipe_00", "vo_ivandoe_swipe_01", "vo_ivandoe_swipe_02", "vo_ivandoe_swipe_03"]), this._stick.thrown = !0, this._stick.grounded = !1, this._stick.visible = !0; var e = this._powerGauge.parent.rotation + this._powerGauge.rotation;
                            console.log("angle:", e * PIXI.DEG_TO_RAD), this._stick.velocity.set(Math.cos(e), Math.sin(e)), this._stick.velocity.scaleBy(this._throwPowerMin + this._powerGaugeStrength * (this._throwPowerMax - this._throwPowerMin)), this._stick.torque = P3.math.random(this._throwTorqueMin, this._throwTorqueMax), this._poodle.playTurnAnimation(), this._throwTimeline = new TimelineMax({ onComplete: function() { this._throwTimeline = null } }), this._tweenList.add(this._throwTimeline), this._throwTimeline.insert(delay(function() { this._poodle.target = this._stick, this._poodle.playRunAnimation(), this._runHowl && this._runHowl.howl.playing() || (this._runHowl = _["default"].audio.playSound("sfx_poodle_run_loop_00", { loop: !0 })) }, .4, this)), this._throwTimeline.insert(delay(function() { this._cameraFollowPoodle = !0, this._poodle.moveSpeed = p["default"].FAST_SPEED }, 1, this)), this._voRunStartSFX = _["default"].audio.playSound("vo_poodle_start_00", { callback: function() { this._voRunSFX = _["default"].audio.playSound("vo_poodle_running_00", { loop: !0 }), this._voRunStartSFX = null }, scope: this, destroyOnComplete: !0 }) } } }, { key: "nextThrow", value: function() { this.resetPowerGauge(), this._stick.position.set(this._stickStart.x, this._stickStart.y), this._stick.thrown = !1, this._grabbedStick = !1, this._poodle.moveSpeed = p["default"].SLOW_SPEED, this._poodle.playIdleAnimation(), this._ivandoe.playPickupStickAnimation(), this._runHowl && this._runHowl.stop(), this._voRunSFX && this._voRunSFX.destroy(), this._powerGauge.fadeIn(function() { this._powerGaugeMode = 0, this._powerGauge.startAngleAnimation() }, this) } }, { key: "checkPoodleNearStick", value: function() { var e = this; if (!this._grabbedStick) { var t = this._stick.x - this._poodle.x; if (this._stick.grounded && Math.abs(t) < 12) { this._grabbedStick = !0, this._poodle.target.x = this._poodle.x, this._cameraFollowPoodle = !1, this._runHowl && this._runHowl.stop(), this._poodle.playPickupStickAnimation(), this._grabTimeline = new TimelineMax({ onComplete: function() { this._grabTimeline = null } }), this._tweenList.add(this._grabTimeline), this._grabTimeline.insert(delay(function() { e._stick.visible = !1 }, .25, this)), this._grabTimeline.insert(delay(function() { this.poodleGrabStick() }, 2, this)), this._grabTimeline.insert(delay(function() { this.placeFlag() }, 1, this)); var i = _["default"].audio;
                                this._voRunSFX && (this._voRunSFX.destroy(), i.playSound("vo_poodle_pickupstick_00")) } } } }, { key: "poodleGrabStick", value: function() { this._runHowl && this._runHowl.howl.playing() || (this._runHowl = _["default"].audio.playSound("sfx_poodle_run_loop_00", { loop: !0 })), this._voRunSFX = _["default"].audio.playSound("vo_poodle_running_00", { loop: !0 }), this._poodle.moveSpeed = p["default"].SLOW_SPEED, this._poodle.target = this._poodleStart.x, this._poodle.playRunStickAnimation(), this._poodle.signals.arrive.addOnce(function() { this._score += this._roundScore, this._attempt < 2 ? (++this._attempt, _["default"].audio.playSound(["vo_poodle_end_00", "vo_poodle_end_01"]), this.nextThrow()) : this.gameOver() }, this), 2 === this._attempt && (this._ivandoe.visible = !1, this._powerGauge.visible = !1), this._resetTimeline = new TimelineMax({ onComplete: function() { this._resetTimeline = null } }), this._tweenList.add(this._resetTimeline), this._resetTimeline.insert(TweenMax.to(this._camera.target, .6, { delay: 1, x: this._cameraStart.x, ease: Power1.easeInOut, onStart: function() { this._poodle.moveSpeed = p["default"].FAST_SPEED }, onStartScope: this, onComplete: function() { var e = this._camera.position.x + this._camera.view.x + P3.View.width + 200;
                                this._poodle.x > e && (this._poodle.x = e) }, onCompleteScope: this })) } }, { key: "placeFlag", value: function() { var e = _["default"].assets,
                            t = new PIXI.Sprite(e.texture("ep5_poodlePlay/marker_red"));
                        t.position.set(this._stick.x + 20, 620), t.anchor = new PIXI.Point(.5, .5), this._game.addChild(t); var i = t.y;
                        t.y -= 240, t.alpha = 0, TweenMax.to(t, .4, { y: i, alpha: 1, ease: Power2.easeIn }) } }, { key: "_updateDistance", value: function() { this._roundScore = Math.round(Math.max(0, this._stick.x - this._stickStart.x) / 140), this._hud.setScore(this._roundScore, this._attempt) } }, { key: "_initBgTiles", value: function() { for (var e = 0; e < 8; ++e) { var t = this._createBgTile();
                            t.x = e * t.width } } }, { key: "_initMgTiles", value: function() { for (var e = 0; e < 8; ++e) { var t = this._createMgTile();
                            t.x = e * t.width } } }, { key: "_initFgTiles", value: function() { for (var e = 0; e < 16; ++e) { var t = this._createFgTile();
                            t.x = e * t.width } } }, { key: "_createBgTile", value: function() { var e = _["default"].assets,
                            t = new PIXI.Sprite(e.texture("ep5_poodlePlay_bg", "jpg")); return t.width = 1540, this._bg.addChild(t), this._bgTiles.push(t), t } }, { key: "_createMgTile", value: function() { var e = _["default"].assets,
                            t = new PIXI.Sprite(e.texture(P3.utils.selectRandom(["ep5_poodlePlay/mg_1", "ep5_poodlePlay/mg_1"]))); return this._mg.addChild(t), this._mgTiles.push(t), t } }, { key: "_createFgTile", value: function() { var e = _["default"].assets,
                            t = new PIXI.Sprite(e.texture("ep5_poodlePlay/fg")); return t.y = P3.View.height, t.anchor = new PIXI.Point(0, 1), this._fg.addChild(t), this._fgTiles.push(t), t } }, { key: "_cullBgTiles", value: function() { for (var e = this._camera.findLayer(this._bg), t = 1 / e.parallax.x, i = 0; i < this._bgTiles.length; ++i) { var n = this._bgTiles[i],
                                a = n.x * t - this._camera.position.x + this._camera.view.x;
                            n.visible = a >= -n.width * t && a <= P3.View.width * t, n.x = Math.floor(n.x) } } }, { key: "_cullMgTiles", value: function() { for (var e = this._camera.findLayer(this._mg), t = 1 / e.parallax.x, i = 0; i < this._mgTiles.length; ++i) { var n = this._mgTiles[i],
                                a = n.x * t - this._camera.position.x + this._camera.view.x;
                            n.visible = a >= -n.width * t && a <= P3.View.width * t } } }, { key: "_cullFgTiles", value: function() { for (var e = this._camera.findLayer(this._fg), t = 1 / e.parallax.x, i = 0; i < this._fgTiles.length; ++i) { var n = this._fgTiles[i],
                                a = n.x * t - this._camera.position.x + this._camera.view.x;
                            n.visible = a >= -n.width * t && a <= P3.View.width * t } } }, { key: "_tutorial", value: function() { var e = this;
                        this._inTut = !0, this._initTutorialPointer(this._game), this._tutorialDelay = this._tweenList.add(delay(function() { e._tutorialDelay = null, e._powerGauge.stopAngleAnimation(), e._animatePointer({ x: e._powerGauge.parent.x + 320, y: e._powerGauge.parent.y - 120 }) }, 1, this)) } }, { key: "initParticles", value: function(e) { var t = _["default"].assets.json("particle_emitter_fogbank_02");
                        t.lifetime.min = 230, t.lifetime.max = 260, t.maxParticles = 800, t.spawnRect.w = 5 * _["default"].STAGE_WIDTH, t.frequency = 4, t.spawnRect.x = 4.5 * _["default"].STAGE_WIDTH, t.spawnRect.y = P3.View.height - 165; var i = new PIXI.particles.Emitter(e, [_["default"].assets.texture("fog_particle")], t); return i.update(999999), i.emit = !0, i } }, { key: "_onMouseDown", value: function(e) { var t = this; if (this._running) switch (this._powerGaugeMode) {
                            case 0:
                                this._inTut ? this._tutorialPointer.visible && (this._powerGaugeMode = 1, this._tutorialPointer.visible = !1, this._tutorialDelay = this._tweenList.add(delay(function() { t._tutorialDelay = null, t._powerGaugeMode = 2, t._animatePointer({ x: t._powerGauge.parent.x + 320, y: t._powerGauge.parent.y - 120 }) }, .66, this))) : (this._powerGaugeMode = 1, this._powerGauge.stopAngleAnimation()); break;
                            case 1:
                                this._inTut || (this._powerGaugeMode = -1, this._powerGauge.fadeOut(), this._ivandoe.playThrowStickAnimation()); break;
                            case 2:
                                this._powerGaugeMode = -1, this._powerGauge.fadeOut(), this._ivandoe.playThrowStickAnimation(), this._killPointer(), this._inTut = !1 } } }, { key: "onIvandoeThrowStick", value: function() { this.throwStick() } }]), t }(w["default"]);
        i["default"] = x }, { "../../Common": 13, "../../MinigameScene": 28, "./Hud": 132, "./Ivandoe": 133, "./Poodle": 134, "./PowerGauge": 136, "./Stick": 137 }],
    136: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function c(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : c(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Common"),
            _ = n(u),
            h = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._bg = new PIXI.Sprite(_["default"].assets.texture("ep5_poodlePlay/powerbar_back")), e._bg.anchor.set(-1, .5), e.addChild(e._bg), e._fill = new PIXI.Sprite(_["default"].assets.texture("ep5_poodlePlay/powerbar_fill")), e._fill.anchor.set(-1, .5), e.addChild(e._fill), e._fillMask = new PIXI.Sprite(PIXI.Texture.WHITE), e._fillMask.x = e._fill.width, e._fillMask.anchor.set(0, .5), e._fillMask.width = 1e-6, e._fillMask.height = e._fill.height, e._fill.addChild(e._fillMask), e._fill.mask = e._fillMask, e._frame = new PIXI.Sprite(_["default"].assets.texture("ep5_poodlePlay/powerbar_frame")), e._frame.anchor.set(-1, .5), e.addChild(e._frame), e.alpha = 0, e._rotationFrequency = .06, e._rotationAmplitude = .24, e._rotationEnabled = !1, e._theta = Math.random() * (2 * Math.PI), e.rotation = Math.sin(e._theta * e._rotationFrequency) * e._rotationAmplitude, e } return s(t, e), r(t, [{ key: "destroy", value: function(e) { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "fadeIn", value: function(e, t) { this.setPower(0), TweenMax.to(this, .34, { alpha: 1, ease: Power1.easeInOut, onComplete: e, onCompleteScope: t }) } }, { key: "fadeOut", value: function(e, t) { TweenMax.to(this, .24, { alpha: 0, ease: Power1.easeInOut, onComplete: e, onCompleteScope: t }) } }, { key: "update", value: function(e) { this._rotationEnabled && (this.rotation = Math.sin(++this._theta * this._rotationFrequency) * this._rotationAmplitude) } }, { key: "setPower", value: function(e) { this._fillMask.width = this._fill.width * e } }, { key: "startAngleAnimation", value: function() { this._rotationEnabled = !0 } }, { key: "stopAngleAnimation", value: function() { this._rotationEnabled = !1 } }, { key: "angle", get: function() { return 1 - .64 * Math.abs(this.rotation / this._rotationAmplitude) } }]), t }(PIXI.Container);
        i["default"] = h }, { "../../Common": 13 }],
    137: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Actor"),
            _ = n(u),
            h = e("../../Common"),
            c = n(h),
            d = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    e.velocity = new P3.Vector2, e.torque = 0, e.floor = 0, e.thrown = !1, e.grounded = !1, e._gravity = 1e3, e._restitution = .14; var i = c["default"].assets; return e._view = new PIXI.Sprite(i.texture("ep5_poodlePlay/stick")), e._view.anchor = new PIXI.Point(.5, .5), e.addChild(e._view), e } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this) } }, { key: "destroy", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "update", value: function(e) { this.thrown && (this.velocity.y += this._gravity * e, this.velocity.x *= .994, this.x += this.velocity.x * e, this.y += this.velocity.y * e, this.torque *= .994, this.rotation += this.torque * e, this.y > this.floor && (this.y = this.floor, this.velocity.x *= .84, this.velocity.y *= -this._restitution, this.rotation = this.torque = 0, this.grounded = !0)) } }]), t }(_["default"]);
        i["default"] = d }, { "../../Actor": 4, "../../Common": 13 }],
    138: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Actor"),
            _ = n(u),
            h = e("../../Common"),
            c = n(h),
            d = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)),
                        i = new PIXI.Container; return e.addChild(i), e._view = new PIXI.spine.Spine(c["default"].assets.spineData("bert_front")), e._view.scale.set(.35), e._view.skeleton.setToSetupPose(), e._view.skeleton.setSkin(null), e._view.skeleton.setSkinByName("default"), e._view.stateData.defaultMix = .15, e._view.autoUpdate = !1, e._view.y = -400, e._view.update(0), e._skipFrame = 0, i.addChild(e._view), e._timeline = new TimelineMax, e._timeline.fromTo(e._view, 3, { x: -400 }, { x: 400, ease: Sine.easeInOut, repeat: -1, yoyo: !0, onRepeatScope: e, onRepeat: function() { this._view.scale.x *= -1 } }, 0), e._timeline.fromTo(e._view, .9, { y: -350 }, { y: -450, ease: Sine.easeInOut, repeat: -1, yoyo: !0 }, 0), e.faceDirection(1), e } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this._view.state.setAnimation(0, "fly_worried_fast", !0), this._view.state.addListener({ event: this._onAnimationEvent.bind(this) }) } }, { key: "destroy", value: function(e) { this._timeline && this._timeline.kill(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "update", value: function(e) { this._skipFrame++ % 2 === 0 && this._view.update(2 * e) } }, { key: "_playFlapSFX", value: function() { c["default"].audio.playSound(["sfx_flap_00", "sfx_flap_01"]) } }, { key: "_onAnimationEvent", value: function(e, t) { "sfx_flap" === t.data.name && this._playFlapSFX() } }]), t }(_["default"]);
        i["default"] = d }, { "../../Actor": 4, "../../Common": 13 }],
    139: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("../../Common"),
            u = n(l),
            _ = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e.init(), e } return s(t, e), r(t, [{ key: "init", value: function() { this.initScorePanel("minigame_icon_ep9_2"), this.initHiScorePanel(), this._createPauseButton() } }, { key: "resize", value: function() { this._score.x = .5 * (u["default"].STAGE_WIDTH - P3.View.width) + 80, this._score.y = 10, this._hiscore.x = .5 * u["default"].STAGE_WIDTH, this._hiscore.y = 60, this._pauseButton.x = .5 * (u["default"].STAGE_WIDTH + P3.View.width) - 100, this._pauseButton.y = 100 } }, { key: "initScorePanel", value: function(e) { this._score = new PIXI.Container, this._score.visible = !1, this.addChild(this._score); var t = new PIXI.Sprite(u["default"].assets.texture("minigame_generic_panel"));
                        this._score.addChild(t); var i = new PIXI.Sprite(u["default"].assets.texture(e));
                        this._score.addChild(i), webfont ? (this._score.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "left", fill: 16777215 }), this._score.label.x = 110, this._score.label.y = 60, this._score.label.anchor.set(.5), this._score.addChild(this._score.label)) : (this._score.label = new PIXI.extras.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), this._score.label.x = 110, this._score.label.y = 66, this._score.label.anchor.set(.5), this._score.addChild(this._score.label)) } }, { key: "setScore", value: function(e) { this._score.visible = !0, this._score.label.text = "" + e } }, { key: "initHiScorePanel", value: function() { this._hiscore = new PIXI.Container, this._hiscore.visible = !1, this.addChild(this._hiscore); var e = new PIXI.Sprite(u["default"].assets.texture("minigame_generic_panel"));
                        e.anchor.set(.5), this._hiscore.addChild(e); var t = new PIXI.Sprite(u["default"].assets.texture("minigame_icon_best"));
                        t.anchor.set(.5), this._hiscore.addChild(t), webfont ? (this._hiscore.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "center", fill: 16777215 }), this._hiscore.label.y = 15, this._hiscore.label.anchor.set(.5), this._hiscore.addChild(this._hiscore.label)) : (this._hiscore.label = new PIXI.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), this._hiscore.label.y = 18, this._hiscore.label.anchor.set(.5), this._hiscore.addChild(this._hiscore.label)) } }, { key: "setHiScore", value: function(e) { this._hiscore.visible = !0, this._hiscore.label.text = e.toString() } }, { key: "_createPauseButton", value: function() { var e = u["default"].assets,
                            t = new P3.ButtonStates;
                        t.normal = e.texture("btn_primary_small_off"), t.over = e.texture("btn_primary_small_over"), t.down = e.texture("btn_primary_small_over"), t.icon = e.texture("icon_help"), this._pauseButton = new P3.Button(t), this.addChild(this._pauseButton) } }, { key: "pauseButton", get: function() { return this._pauseButton } }]), t }(PIXI.Container);
        i["default"] = _ }, { "../../Common": 13 }],
    140: [function(e, t, i) {
        "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 });
        var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function c(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : c(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Common"),
            _ = n(u),
            h = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return i._lanes = e, i._currentLane = 2, i._isMoving = !1, i._view = new PIXI.spine.Spine(_["default"].assets.spineData("ivandoe_front_025")), i._view.scale.set(.3), i._view.skeleton.setToSetupPose(), i._view.skeleton.setSkin(null), i._view.skeleton.setSkinByName("standard"), i._view.stateData.defaultMix = .15, i._view.autoUpdate = !1, i._view.update(0), i._skipFrame = 0, i.addChild(i._view), i._viewScale = i._view.scale.x, i._collider = new PIXI.Sprite(PIXI.Texture.WHITE), i._collider.width = .25 * i._view.width, i._collider.height = 55, i._collider.tint = 255, i._collider.anchor.set(.5, 1), i.addChild(i._collider), i._collider.renderable = !1, i.init(), i }
                return s(t, e), r(t, [{ key: "init", value: function() { this.faceDirection(1), this.x = this._lanes[this._currentLane], this._view.state.setAnimation(0, "puffer_pose_idle", !0) } }, { key: "destroy", value: function(e) { this._timeline && this._timeline.kill(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "faceDirection", value: function(e) { this._view.scale.x = e * this._viewScale } }, { key: "update", value: function(e) { this._skipFrame++ % 2 === 0 && this._view.update(2 * e) } }, {
                    key: "move",
                    value: function(e, t) {
                        var i = this;
                        if (!this._isMoving) {
                            this._isMoving = !0, this._view.state.setAnimation(0, "puffer_pose_step_" + (Math.sign(e) == -1 ? "left" : "right"), !1, 0),
                                _["default"].audio.playSound(["sfx_footstep_00", "sfx_footstep_01", "sfx_footstep_02", "sfx_footstep_03", "sfx_footstep_04"]), this._currentLane += e, this._currentLane < 0 ? this._currentLane = 0 : this._currentLane > this._lanes.length - 1 && (this._currentLane = this._lanes.length - 1);
                            var n = this._lanes[this._currentLane];
                            TweenMax.to(this, .3, { x: n, ease: Sine.easeInOut, onComplete: function() { t && t > 0 ? e === -1 && 1 === t ? i.idle() : (i._isMoving = !1, i.distance = t, i.distance--, i.move(e, i.distance)) : i.idle() } })
                        }
                    }
                }, { key: "idle", value: function() { this._isMoving = !1, this._view.state.setAnimation(0, "puffer_pose_idle", !0, 0) } }, { key: "death", value: function(e, t) { TweenMax.killTweensOf(this), e = e || 1, this._isMoving = !0, this._view.state.setAnimation(0, "death_throw_1", !0), _["default"].audio.playSound("vo_ivandoe_yelps_00"), this._timeline && this._timeline.kill(), this._timeline = new TimelineMax, this._timeline.to(this, 1 * e / 3, { y: this.y - 250, ease: Sine.easeOut }, 0), this._timeline.to(this, 2 * e / 3, { y: this.y + 675, ease: Sine.easeIn }, e / 3), this._timeline.to(this.scale, e, { x: 2, y: 2, ease: Sine.easeInOut, onComplete: function() { return t() } }, 0) } }, { key: "currentLane", get: function() { return this._currentLane } }, { key: "collider", get: function() { return this._collider } }]), t
            }(PIXI.Container);
        i["default"] = h
    }, { "../../Common": 13 }],
    141: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function x(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : x(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Common"),
            _ = n(u),
            h = e("./Hud"),
            c = n(h),
            d = e("./Ivandoe"),
            p = n(d),
            f = e("./Bert"),
            y = n(f),
            v = e("./PufferFish"),
            m = (n(v), e("./PufferController")),
            g = n(m),
            w = e("../../MinigameScene"),
            b = n(w),
            P = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._score = 0, e._bgHolder = new PIXI.Container, e._gameHolder = new PIXI.Container, e._particleHolder = new PIXI.Container, e._uiHolder = new PIXI.Container, e._numLanes = 5, e._lanes = new Array(e._numLanes), e._time = 0, e } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this.addChild(this._bgHolder, this._gameHolder, this._particleHolder, this._uiHolder); var e = _["default"].assets,
                            i = new PIXI.Sprite(e.texture("ep9_puffedUp_bg", "jpg"));
                        i.width = _["default"].STAGE_WIDTH, this._bgHolder.addChild(i), this.initLanes(), this._ivandoe = new p["default"](this._lanes), this._ivandoe.y = _["default"].STAGE_HEIGHT - 75, this._gameHolder.addChild(this._ivandoe), this._bert = new y["default"], this._bert.x = .55 * _["default"].STAGE_WIDTH, this._bert.y = 700, this._gameHolder.addChild(this._bert), this._particles = this._initParticles(); var n = new PIXI.Container;
                        this._gameHolder.addChild(n), n.hitArea = new PIXI.Rectangle(0, 0, _["default"].STAGE_WIDTH, _["default"].STAGE_HEIGHT), n.interactive = !0, n.buttonMode = !0, n.mousedown = n.touchstart = this._onInputDown.bind(this); var a = { onEnd: this.onEnd.bind(this), onImpact: this._onImpact.bind(this) };
                        this._pufferController = new g["default"](this._gameHolder, this._lanes, this._ivandoe, a), this._hud = new c["default"], this._hud.setScore(this.score), this._hud.setHiScore(this.highscore), this._uiHolder.addChild(this._hud), this._hud.pauseButton.signals.click.add(this._onPauseButtonClick, this) } }, { key: "initLanes", value: function() { for (var e = 200, t = 0; t < this._lanes.length; t++) this._lanes[t] = .5 * _["default"].STAGE_WIDTH - this._lanes.length / 2 * e + t * e + .5 * e } }, { key: "destroy", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "resize", value: function() { this.x = .5 * (P3.View.width - _["default"].STAGE_WIDTH), this._hud.resize() } }, { key: "appear", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "appear", this).call(this), this._isFirstPlay() && this.signals.pause.dispatch(this, !0) } }, { key: "show", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "show", this).call(this), TweenMax.resumeAll() } }, { key: "update", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "update", this).call(this), this._bert.update(deltaTime), this._ivandoe.update(deltaTime), this._inTut || this._pufferController.update(deltaTime), _["default"].input.isKeyPressed(65) || _["default"].input.isKeyPressed(37) ? (this.madeMove = !0, this._ivandoe.move(-1), this._inTut && this._tutEnd()) : (_["default"].input.isKeyPressed(68) || _["default"].input.isKeyPressed(39)) && (this.madeMove = !0, this._ivandoe.move(1), this._inTut && this._tutEnd()) } }, { key: "start", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "start", this).call(this); var e = this._isFirstPlay();
                        e ? this._tutorial() : this._pufferController.setState("RELEASE"), _["default"].audio.playMusic("music_loop_dramatic_00") } }, { key: "end", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "end", this).call(this), this._hud.setHiScore(this.highscore), this.playEndVO(this._score), TweenMax.killAll(), _["default"].audio.stopMusic() } }, { key: "onEnd", value: function() { var e = this;
                        this._ivandoe.death(1, function() { e.end() }) } }, { key: "_tutEnd", value: function() { var e = this;
                        this._pufferController.isLocked = !0, delay(function() { e._pufferController.isLocked = !1 }, 2), this._inTut = !1, this._killPointer(), this._pufferController.setState("RELEASE"); var t = this.tutorialTweens; if (t)
                            for (var i = 0; i < t.length; i++) t[i].resume() } }, { key: "_initParticles", value: function() { this._particleHolder = new PIXI.Container, this._particleHolder.position.set(P3.View.width, 575), this.addChild(this._particleHolder); var e = _["default"].assets.json("particle_emitter_fogbank_02"),
                            t = new PIXI.particles.Emitter(this._particleHolder, [_["default"].assets.texture("fog_particle")], e); return t.emit = !0, t.update(20), t } }, { key: "_onImpact", value: function() { this._score++, this._hud.setScore(this.score), _["default"].audio.playSound("sfx_puffer_bounce_0" + P3.math.randomInt(0, 2)) } }, { key: "_onInputDown", value: function(e) { this.madeMove = !0; for (var t = e.data.getLocalPosition(this._gameHolder).x, i = [], n = 0; n < this._lanes.length; n++) { var a = { dist: Number.MAX_SAFE_INTEGER, laneId: n };
                            a.dist = Math.abs(this._lanes[n] - t), i.push(a) } i.sort(function(e, t) { return e.dist - t.dist }); var o = i[0].laneId,
                            s = Math.abs(o - this._ivandoe.currentLane); if (o !== this._ivandoe.currentLane) { var r = o < this._ivandoe.currentLane ? -1 : 1;
                            1 === r && s--, this._ivandoe.move(r, s), this._inTut && this._tutEnd() } } }, { key: "_tutorial", value: function() { var e = this;
                        this._initTutorialPointer(), this._inTut = !0; var t = this._pufferController.createPuffer(2, !1);
                        this._pufferController.isLocked = !0, delay(function() { if (console.log(t), !e.madeMove) { var i = TweenMax.getTweensOf(t);
                                e.tutorialTweens = i, console.log(i); for (var n = 0; n < i.length; n++) i[n].pause();
                                e._animatePointer(new PIXI.Point(e._lanes[3], _["default"].STAGE_HEIGHT - 150)) } }, 1.8) } }, { key: "_onPauseButtonClick", value: function(e) { TweenMax.pauseAll(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "_onPauseButtonClick", this).call(this, e) } }]), t }(b["default"]);
        i["default"] = P }, { "../../Common": 13, "../../MinigameScene": 28, "./Bert": 138, "./Hud": 139, "./Ivandoe": 140, "./PufferController": 142, "./PufferFish": 143 }],
    142: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") } Object.defineProperty(i, "__esModule", { value: !0 }); var o = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            s = e("./PufferFish"),
            r = n(s),
            l = e("../../Common"),
            u = n(l),
            _ = function() {
                function e(t, i, n, o) { a(this, e), this._gameHolder = t, this._lanes = i, this._ivandoe = n, this._onEnd = o.onEnd, this._onImpact = o.onImpact, this._state = -1, this._states = { INIT: -1, RELEASE: 0, HOLD: 1, END: 2 }, this._minHoldTime = 2, this._maxHoldTime = 4, this._holdTime = -1, this._activePuffers = [], this._fallSpeed = 1400, this._gameover = !1, this._releaseCount = 0, this._inTut = !1, this._floorY = u["default"].STAGE_HEIGHT - 185, this.setState("INIT") } return o(e, [{ key: "setState", value: function(e) { this._state = this._states[e], this.changeState() } }, { key: "changeState", value: function() { var e = this; switch (this._state) {
                            case -1:
                                this._holdTime = P3.math.randomInt(this._minHoldTime, this._maxHoldTime); break;
                            case 0:
                                var t = Math.random() < .5 ? P3.math.randomInt(0, this._lanes.length - 1) : this._ivandoe.currentLane; if (Math.random() < .75 || this._releaseCount < 3) this.createPuffer(t);
                                else { this.createPuffer(t, !0); var i = t + 2;
                                    i > this._lanes.length - 1 && (i = 0), delay(function() { e.createPuffer(i, !0) }, .15) } delay(function() { e.setState("HOLD") }, 1); break;
                            case 1:
                                delay(function() { e.setState("RELEASE"), e._holdTime = P3.math.randomInt(e._minHoldTime, e._maxHoldTime) }, this._holdTime); break;
                            case 2:
                                this._gameover = !0, this._onEnd(); break;
                            default:
                                console.warn("unknown state : " + this._state) } } }, { key: "createPuffer", value: function(e, t) { var i = this; if (!this.isLocked) { var n = new r["default"];
                            n.x = this._lanes[e], n.y = -n.height, n.shadow.x = n.x, n.shadow.y = this._floorY + 105, this._gameHolder.addChildAt(n.shadow, 0), this._gameHolder.addChild(n), this._activePuffers.push(n); var a = 1.5,
                                o = u["default"].scene.top; return o.addTween(TweenMax.to(n.shadow.scale, a, { x: .9, y: .9, ease: Power0.easeNone, onComplete: function() { if (t) i.singleBounceAnimation(n);
                                    else if (i._releaseCount > 8)
                                        if (Math.random() < .5) i.singleBounceAnimation(n);
                                        else if (Math.random() < .9) i.doubleBounceAnimation(n);
                                    else { i.doubleBounceAnimation(n); var e = Math.random() < .5 ? P3.math.randomInt(0, i._lanes.length - 1) : i._ivandoe.currentLane;
                                        delay(function() { return i.createPuffer(e) }, .15) } else i.singleBounceAnimation(n) } })), this._releaseCount > 0 && this._releaseCount % 2 === 0 && (this._minHoldTime > .5 && (this._minHoldTime -= .1), this._maxHoldTime > 2.5 && (this._maxHoldTime -= .1)), this._releaseCount++, n } } }, { key: "rotateAnimation", value: function(e, t) { var i = P3.math.randomSign(),
                            n = void 0;
                        n = Math.random() < .5 ? 1 : 1.5, Math.random() < .5 && (n -= .5), e.rotTween = TweenMax.to(e, t, { rotation: 2 * Math.PI * i * n, ease: Power0.easeNone }) } }, { key: "singleBounceAnimation", value: function(e) { var t = this,
                            i = e.shadow,
                            n = new PIXI.Point(e.x, this._floorY),
                            a = u["default"].distance(e.x, e.y, n.x, n.y),
                            o = a / this._fallSpeed;
                        TweenMax.to(i.scale, o, { x: 1, y: 1, ease: Power0.easeNone }), this.rotateAnimation(e, o); var s = u["default"].scene.top;
                        s.addTween(TweenMax.to(e, o, { x: n.x, y: n.y, ease: Power0.easeNone, onComplete: function() { t.impactAnimation(e), n.x < .5 * u["default"].STAGE_WIDTH ? n.x = 0 : n.x = u["default"].STAGE_WIDTH, n.y = .25 * u["default"].STAGE_HEIGHT, a = u["default"].distance(e.x, e.y, n.x, n.y), o = a / t._fallSpeed, t.rotateAnimation(e, o), TweenMax.to(i, o, { y: u["default"].STAGE_HEIGHT, ease: Power0.easeNone }), s.addTween(TweenMax.to(e, o, { x: n.x, ease: Power0.easeNone })), s.addTween(TweenMax.to(e, o, { y: n.y, ease: Sine.easeOut, onComplete: function() { t.cleanupPuffer(e) } })) } })) } }, { key: "doubleBounceAnimation", value: function(e) { var t = this,
                            i = new PIXI.Point(e.x, this._floorY),
                            n = e.shadow,
                            a = u["default"].distance(e.x, e.y, i.x, i.y),
                            o = a / this._fallSpeed;
                        TweenMax.to(n.scale, o, { x: 1, y: 1, ease: Power0.easeNone }), this.rotateAnimation(e, o); var s = u["default"].scene.top;
                        s.addTween(TweenMax.to(e, o, { x: i.x, y: i.y, ease: Power0.easeNone, onComplete: function() { t.impactAnimation(e), i.x = t._lanes[t._ivandoe.currentLane], i.y = .1 * u["default"].STAGE_HEIGHT, a = u["default"].distance(e.x, e.y, i.x, i.y), o = a / t._fallSpeed, t.rotateAnimation(e, 2 * o), TweenMax.to(n.scale, o, { x: .9, y: .9, ease: Power0.easeNone }), s.addTween(TweenMax.to(e, 2 * o, { x: i.x, ease: Power0.easeNone })), s.addTween(TweenMax.to(e, o, { y: i.y, ease: Sine.easeOut, onComplete: function() { TweenMax.to(n.scale, o, { x: 1, y: 1, ease: Power0.easeNone }), TweenMax.to(e, o, { y: t._floorY, ease: Sine.easeIn, onComplete: function() { t.impactAnimation(e), i.x < .5 * u["default"].STAGE_WIDTH ? i.x = 0 : i.x = u["default"].STAGE_WIDTH, i.y = -350, a = u["default"].distance(e.x, e.y, i.x, i.y), o = a / t._fallSpeed, t.rotateAnimation(e, o), TweenMax.to(n, o, { y: u["default"].STAGE_HEIGHT, ease: Power0.easeNone }), s.addTween(TweenMax.to(e, o, { x: i.x, ease: Power0.easeNone })), s.addTween(TweenMax.to(e, o, { y: i.y, ease: Sine.easeOut, onComplete: function() { t.cleanupPuffer(e) } })) } }) } })) } })) } }, { key: "impactAnimation", value: function(e) { TweenMax.to(e.scale, .05, { x: 1.2, y: .8, ease: Sine.easeInOut, onComplete: function() { TweenMax.to(e.scale, .2, { x: 1, y: 1, ease: Back.easeOut }) } }), this._onImpact() } }, { key: "cleanupPuffer", value: function(e) { e.rotTween.kill(); var t = this._activePuffers.indexOf(e);
                        e.shadow.destroy(), e.destroy(), this._activePuffers[t] = null, this._activePuffers.splice(t, 1) } }, { key: "update", value: function(e) { if (!this._gameover)
                            for (var t = 0; t < this._activePuffers.length; t++) { var i = this._activePuffers[t];
                                i.update(e), i.shadow.x = i.x, this.collide(i.collider, this._ivandoe.collider) && this.setState("END") } } }, { key: "pauseAll", value: function() { for (var e = 0; e < this._activePuffers.length; e++); } }, { key: "collide", value: function(e, t) { if (this.collideAABB(e, t)) { var i = this.collideSAT(e, t); if (i) return i } return !1 } }, { key: "collideAABB", value: function(e, t) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : new PIXI.Point(1, 1); return e = e.getBounds(), t = t.getBounds(), !(t.x > e.x + e.width * i.x || t.x + t.width * i.x < e.x || t.y > e.y + e.height * i.y || t.y + t.height * i.y < e.y) } }, { key: "collideSAT", value: function(e, t) {
                        function i(e) { for (var t = u["default"].matrix(4, 2), i = 0, n = 0; n < e.length; n += 2) t[i][0] = e[n], t[i][1] = e[n + 1], i++; return t } for (var n = i(void 0 === e.points ? e.vertexData : e.points), a = i(void 0 === t.points ? t.vertexData : t.points), o = n.length, s = a.length, r = { x: 0, y: 0 }, l = void 0, _ = void 0, h = void 0, c = void 0, d = void 0, p = void 0, f = void 0, y = void 0, v = void 0, m = void 0, g = 0; g < o; g++) { v = n[g === o - 1 ? 0 : g + 1], m = n[g], r.x = -(v[1] - m[1]), r.y = v[0] - m[0], l = Math.sqrt(r.x * r.x + r.y * r.y), r.x /= l, r.y /= l, _ = h = -1, c = d = -1; for (var w = 0; w < o; ++w) y = n[w][0] * r.x + n[w][1] * r.y, (y > c || c === -1) && (c = y), (y < _ || _ === -1) && (_ = y); for (var b = 0; b < s; ++b) y = a[b][0] * r.x + a[b][1] * r.y, (y > d || d === -1) && (d = y), (y < h || h === -1) && (h = y); if (p = _ < h ? h - c : _ - d, p > 0) return !1;
                            p > f && (f = p) } for (var P = 0; P < s; P++) { v = a[P === s - 1 ? 0 : P + 1], m = a[P], r.x = -(v[1] - m[1]), r.y = v[0] - m[0], l = Math.sqrt(r.x * r.x + r.y * r.y), r.x /= l, r.y /= l, _ = h = -1, c = d = -1; for (var x = 0; x < o; ++x) y = n[x][0] * r.x + n[x][1] * r.y, (y > c || c === -1) && (c = y), (y < _ || _ === -1) && (_ = y); for (var k = 0; k < s; ++k) y = a[k][0] * r.x + a[k][1] * r.y, (y > d || d === -1) && (d = y), (y < h || h === -1) && (h = y); if (p = _ < h ? h - c : _ - d, p > 0) return !1;
                            p > f && (f = p) } return { overlap: f } } }, { key: "activePuffers", get: function() { return this._activePuffers } }]), e }();
        i["default"] = _ }, { "../../Common": 13, "./PufferFish": 143 }],
    143: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("../../Common"),
            u = n(l),
            _ = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._shadow = new PIXI.Sprite(u["default"].assets.texture("shadow")), e._shadow.anchor.set(.5), e._shadow.blendMode = 2, e._shadow.alpha = .75, e._shadow.scale.set(0), e._view = new PIXI.spine.Spine(u["default"].assets.spineData("puffer_025")), e._view.scale.set(.25), e._view.skeleton.setToSetupPose(), e._view.skeleton.setSkin(null), e._view.skeleton.setSkinByName("default"), e._view.autoUpdate = !1, e._view.update(0), e.addChild(e._view), e._view.state.data.setMix("idle_float", "deflate", .2), e._skipFrame = 0, e._collider = new PIXI.Sprite(PIXI.Texture.WHITE), e._collider.width = .5 * e._view.width, e._collider.height = .5 * e._view.height, e._collider.tint = 16711680, e._collider.anchor.set(.5), e.addChild(e._collider), e._collider.renderable = !1, e.init(), e } return s(t, e), r(t, [{ key: "init", value: function() {} }, { key: "update", value: function(e) { this._skipFrame++ % 2 === 0 && this._view.update(2 * e) } }, { key: "shadow", get: function() { return this._shadow } }, { key: "collider", get: function() { return this._collider } }]), t }(PIXI.Container);
        i["default"] = _ }, { "../../Common": 13 }],
    144: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("../../Actor"),
            u = n(l),
            _ = e("../../Common"),
            h = n(_),
            c = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._view = new PIXI.spine.Spine(h["default"].assets.spineData("bert_front")), e._view.scale.set(.4, .4), e._view.skeleton.setToSetupPose(), e._view.state.setAnimation(0, "idle_fly", !0), e._view.stateData.defaultMix = .15, e._view.autoUpdate = !1, e._view.update(0), e.addChild(e._view), e._target = .5 * P3.View.width, e._dx = 0, e._moveSpeed = 225, e._skipFrame = 0, e._startTime = Date.now(), e._animInterval = P3.math.random(3e3, 6e3), e._targets = [.5 * h["default"].STAGE_WIDTH - 225, .5 * h["default"].STAGE_WIDTH + 225], e._target = e._targets[1], e._dir = 1, e.init(), e } return s(t, e), r(t, [{ key: "init", value: function() { this._view.state.addListener({ event: this._onAnimationEvent.bind(this) }) } }, { key: "update", value: function() { var e = this; if (this._skipFrame++ % 2 === 0 && this._view.update(2 * deltaTime), this._target) { var t = 0;
                            this.x < this._target ? (t = this._moveSpeed, 1 !== this._dir && (this._dir = 1, this._view.scale.x = -this._view.scale.x, this._target = null, delay(function() { e._target = e._targets[1] }, 2, this))) : this.x > this._target && (t = -this._moveSpeed, this._dir !== -1 && (this._dir = -1, this._view.scale.x = -this._view.scale.x, this._target = null, delay(function() { e._target = e._targets[0] }, 2, this))), this._dx = t * deltaTime, this.x += this._dx } } }, { key: "_switchAnim", value: function() { var e = ["fly_determined", "fly_determined_fast", "idle_fly"];
                        this._view.state.setAnimation(0, e[P3.math.randomInt(0, e.length - 1)], !0), this._animInterval = P3.math.random(3e3, 6e3) } }, { key: "setAnim", value: function(e) { switch (e) {
                            case "center":
                                this._view.state.setAnimation(0, "idle_fly_happy", !0); break;
                            case "left_1":
                            case "right_1":
                                this._view.state.setAnimation(0, "idle_fly_worried", !0); break;
                            case "left_2":
                            case "right_2":
                                this._view.state.setAnimation(0, "fly_worried_fast", !0); break;
                            case "dead":
                                this._view.state.setAnimation(0, "fly_acorn_hit", !1), this._view.state.addAnimation(0, "turnip_lose", !0, 0); break;
                            default:
                                console.warn("unknown anim type in bert raft balance") } } }, { key: "_playFlapSFX", value: function() { h["default"].audio.playSound(["sfx_flap_00", "sfx_flap_01"]) } }, { key: "_onAnimationEvent", value: function(e, t) { "sfx_flap" === t.data.name && this._playFlapSFX() } }, { key: "target", set: function(e) { this._target = e } }]), t }(u["default"]);
        i["default"] = c }, { "../../Actor": 4, "../../Common": 13 }],
    145: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("../../Common"),
            u = n(l),
            _ = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._balanceBar = null, e._scoreLabel = null, e._pauseButton = null, e.init(), e } return s(t, e), r(t, [{ key: "init", value: function() { this._createScorePanel("minigame_icon_ep9_1"), this._createHiScorePanel(), this._createBalanceBar(), this._createPauseButton(), this.setBalance(0) } }, { key: "resize", value: function() { this._score.x = .5 * (u["default"].STAGE_WIDTH - P3.View.width) + 80, this._score.y = 10, this._hiscore.x = .5 * u["default"].STAGE_WIDTH, this._hiscore.y = 60, this._pauseButton.x = .5 * (u["default"].STAGE_WIDTH + P3.View.width) - 100, this._pauseButton.y = 100 } }, { key: "_createBalanceBar", value: function() { var e = u["default"].assets;
                        this._balanceBar = new PIXI.Container, this._balanceBar.x = .5 * u["default"].STAGE_WIDTH, this._balanceBar.y = 640, this.addChild(this._balanceBar), this._balanceBar.bg = new PIXI.Sprite(e.texture("balance_bar")), this._balanceBar.bg.anchor = new PIXI.Point(.5, .5), this._balanceBar.addChild(this._balanceBar.bg); var t = new PIXI.Sprite(e.texture("balance_bar_arrow"));
                        t.anchor.set(.5), this._balanceBar.addChild(t); var i = new PIXI.Sprite(e.texture("balance_bar_arrow"));
                        i.anchor.set(.5), this._balanceBar.addChild(i), this._balanceBar.leftFill = t, this._balanceBar.rightFill = i, t.x = .5 * -this._balanceBar.width + 30, t.y = -45, t.scale.x = -1, i.x = .5 * this._balanceBar.width - 30, i.y = -45, t.visible = i.visible = !1, this._balanceBar.indicator = new PIXI.Sprite(e.texture("balance_neddle")), this._balanceBar.indicator.anchor = new PIXI.Point(.5, .5), this._balanceBar.addChild(this._balanceBar.indicator) } }, { key: "_createPauseButton", value: function() { var e = u["default"].assets,
                            t = new P3.ButtonStates;
                        t.normal = e.texture("btn_primary_small_off"), t.over = e.texture("btn_primary_small_over"), t.down = e.texture("btn_primary_small_over"), t.icon = e.texture("icon_help"), this._pauseButton = new P3.Button(t), this.addChild(this._pauseButton) } }, { key: "_createScorePanel", value: function(e) { this._score = new PIXI.Container, this._score.visible = !1, this.addChild(this._score); var t = new PIXI.Sprite(u["default"].assets.texture("minigame_generic_panel"));
                        this._score.addChild(t); var i = new PIXI.Sprite(u["default"].assets.texture(e));
                        this._score.addChild(i), webfont ? (this._score.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "left", fill: 16777215 }), this._score.label.x = 110, this._score.label.y = 60, this._score.label.anchor.set(.5), this._score.addChild(this._score.label)) : (this._score.label = new PIXI.extras.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), this._score.label.x = 110, this._score.label.y = 66, this._score.label.anchor.set(.5), this._score.addChild(this._score.label)) } }, { key: "setScore", value: function(e) { this._score.visible = !0, this._score.label.text = "" + e } }, { key: "_createHiScorePanel", value: function() { this._hiscore = new PIXI.Container, this._hiscore.visible = !1, this.addChild(this._hiscore); var e = new PIXI.Sprite(u["default"].assets.texture("minigame_generic_panel"));
                        e.anchor.set(.5), this._hiscore.addChild(e); var t = new PIXI.Sprite(u["default"].assets.texture("minigame_icon_best"));
                        t.anchor.set(.5), this._hiscore.addChild(t), webfont ? (this._hiscore.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "center", fill: 16777215 }), this._hiscore.label.y = 15, this._hiscore.label.anchor.set(.5), this._hiscore.addChild(this._hiscore.label)) : (this._hiscore.label = new PIXI.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), this._hiscore.label.y = 18, this._hiscore.label.anchor.set(.5), this._hiscore.addChild(this._hiscore.label)) } }, { key: "setHiScore", value: function(e) { this._hiscore.visible = !0, this._hiscore.label.text = e.toString() } }, { key: "setBalance", value: function(e) { var t = .5 * -Math.PI + 35 * Math.min(1, Math.max(-1, e)) * .5 * PIXI.DEG_TO_RAD;
                        this._balanceBar.indicator.x = 940 * Math.cos(t), this._balanceBar.indicator.y = 940 + 940 * Math.sin(t), this._balanceBar.indicator.rotation = t + .5 * Math.PI; var i = u["default"].assets;
                        this._balanceBar.indicator.texture = i.texture("balance_neddle"); var n = this._balanceBar.indicator.rotation;
                        n > .1 ? n < .2 ? this._balanceBar.indicator.texture = i.texture("balance_neddle2") : this._balanceBar.indicator.texture = i.texture("balance_neddle3") : n < -.1 && (n > -.2 ? this._balanceBar.indicator.texture = i.texture("balance_neddle2") : this._balanceBar.indicator.texture = i.texture("balance_neddle3")) } }, { key: "leftArrow", get: function() { return this._balanceBar.leftFill } }, { key: "rightArrow", get: function() { return this._balanceBar.rightFill } }, { key: "pauseButton", get: function() { return this._pauseButton } }]), t }(PIXI.Container);
        i["default"] = _ }, { "../../Common": 13 }],
    146: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Actor"),
            _ = n(u),
            h = e("../../Common"),
            c = n(h),
            d = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    i._bert = e, i._skipFrame = 0; var n = c["default"].assets,
                        s = new PIXI.Container; return i.addChild(s), i._view = new PIXI.spine.Spine(n.spineData("ivandoe_front")), i._view.scale.set(.4, .4), i._view.skeleton.setToSetupPose(), i._view.skeleton.setSkin(null), i._view.skeleton.setSkinByName("standard"), i._view.stateData.defaultMix = .15, i._view.autoUpdate = !1, i._view.update(0), s.addChild(i._view), i._view.stateData.setMix("raft_balance_start", "raft_balance_centre", .2), i._view.stateData.setMix("raft_balance_right1", "raft_balance_centre", .2), i._view.stateData.setMix("raft_balance_right2", "raft_balance_centre", .2), i._view.stateData.setMix("raft_balance_left1", "raft_balance_centre", .2), i._view.stateData.setMix("raft_balance_left2", "raft_balance_centre", .2), i._view.stateData.setMix("raft_balance_start", "raft_balance_left1", .2), i._view.stateData.setMix("raft_balance_start", "raft_balance_left2", .2), i._view.stateData.setMix("raft_balance_start", "raft_balance_right1", .2), i._view.stateData.setMix("raft_balance_start", "raft_balance_right2", .2), i._view.stateData.setMix("raft_balance_centre", "raft_balance_left1", .2), i._view.stateData.setMix("raft_balance_centre", "raft_balance_left2", .2), i._view.stateData.setMix("raft_balance_centre", "raft_balance_right1", .2), i._view.stateData.setMix("raft_balance_centre", "raft_balance_right2", .2), i.faceDirection(1), i.setBalancePosition(0), i._currentState = "centre", i } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this._view.state.setAnimation(0, "raft_balance_start", !0) } }, { key: "destroy", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "update", value: function(e) { this._skipFrame++ % 2 === 0 && this._view.update(2 * e) } }, { key: "_playFootsteps", value: function() { c["default"].audio.playSound(["sfx_footstep_00", "sfx_footstep_01", "sfx_footstep_02", "sfx_footstep_03", "sfx_footstep_04"]) } }, { key: "setBalancePosition", value: function(e) { var t = 35 * Math.min(1, Math.max(-1, e)) * .5,
                            i = void 0;
                        Math.abs(t) > 6.5 ? (i = 160 * Math.sign(t), Math.sign(t) === -1 ? ("left" !== this._currentState && (this._view.state.setAnimation(0, "raft_balance_left" + P3.math.randomInt(1, 2), !0), this._playFootsteps(), this._bert.setAnim("left_2")), this._currentState = "left") : ("right" !== this._currentState && (this._view.state.setAnimation(0, "raft_balance_right" + P3.math.randomInt(1, 2), !0), this._playFootsteps(), this._bert.setAnim("right_2")), this._currentState = "right")) : Math.abs(t) > 3.5 ? (i = 80 * Math.sign(t), Math.sign(t) === -1 ? ("left" !== this._currentState && (this._view.state.setAnimation(0, "raft_balance_left" + P3.math.randomInt(1, 2), !0), this._playFootsteps(), this._bert.setAnim("left_1")), this._currentState = "left") : ("right" !== this._currentState && (this._view.state.setAnimation(0, "raft_balance_right" + P3.math.randomInt(1, 2), !0), this._playFootsteps(), this._bert.setAnim("right_1")), this._currentState = "right")) : (this.view.x = 0, "center" !== this._currentState && (this._view.state.setAnimation(0, "raft_balance_centre", !0), this._playFootsteps(), this._bert.setAnim("center")), this._currentState = "center"), i && TweenMax.to(this.view, .15, { x: i, ease: Power1.easeOut }) } }]), t }(_["default"]);
        i["default"] = d }, { "../../Actor": 4, "../../Common": 13 }],
    147: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = e("../../Actor"),
            l = n(r),
            u = e("../../Common"),
            _ = n(u),
            h = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)),
                        i = _["default"].assets; return e._view = new PIXI.Sprite(i.texture("ep9_raftBalance/raft")), e._view.anchor = new PIXI.Point(.5, .5), e.addChild(e._view), e.faceDirection(1), e } return s(t, e), t }(l["default"]);
        i["default"] = h }, { "../../Actor": 4, "../../Common": 13 }],
    148: [function(e, t, i) {
        "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) {
            if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !t || "object" != typeof t && "function" != typeof t ? e : t
        }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 });
        var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function P(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : P(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Common"),
            _ = n(u),
            h = e("./Hud"),
            c = n(h),
            d = e("./Ivandoe"),
            p = n(d),
            f = e("./Bert"),
            y = n(f),
            v = e("./Raft"),
            m = n(v),
            g = e("../../MinigameScene"),
            w = n(g),
            b = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._balance = 0, e._balanceVelocity = 0, e._tilt = .1, e._tiltTimer = 0, e._tiltScale = 1, e._counterTilt = 5, e._ivandoe = null, e._bert = null, e._raft = null, e._startTime = null, e._particles = null, e._splashFX = null, e._tutPos = 0, e } return s(t, e), r(t, [{ key: "init", value: function() { var e = _["default"].assets,
                            t = new PIXI.Sprite(e.texture("ep9_raftBalance_bg", "jpg"));
                        t.width = _["default"].STAGE_WIDTH, this.addChild(t); var i = new PIXI.Container;
                        i.x = .5 * _["default"].STAGE_WIDTH, i.y = 630, this.addChild(i), TweenMax.to(i, 1, { y: i.y + 8, ease: Power1.easeInOut, yoyo: !0, repeat: -1 }), this._raft = new m["default"], this._raft.y = -120, i.addChild(this._raft), this._bert = new y["default"], this._bert.x = 275, this._bert.y = 195, this.addChild(this._bert), this._ivandoe = new p["default"](this._bert), this._ivandoe.x = -20, this._ivandoe.y = -94, i.addChild(this._ivandoe); var n = new PIXI.Sprite(e.texture("ep9_raftBalance/fg"));
                        n.y = P3.View.height - n.height, n.width = _["default"].STAGE_WIDTH, this.addChild(n), this._holder = new PIXI.Container, this.addChild(this._holder), this._hud = new c["default"], this._hud.setScore(this.score), this._hud.setHiScore(this.highscore), this.addChild(this._hud), this._hud.pauseButton.signals.click.add(this._onPauseButtonClick, this), this._particles = this._initParticles(), this._particles.updateOwnerPos(P3.View.width, 625), this._particles.update(2e3); for (var a = [], o = 1; o < 38; o++) { var s = "00";
                            o < 10 && (s += "0"); var r = _["default"].assets.texture("splashsmall" + s + o);
                            a.push(r) } this._splashFX = new PIXI.extras.AnimatedSprite(a), this._splashFX.loop = !1, this._splashFX.visible = !1, this._splashFX.animationSpeed = .8, this._holder.addChild(this._splashFX), this._splashFX.scale.set(2) } }, { key: "destroy", value: function() { TweenMax.killTweensOf(this._raft.parent), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "resize", value: function() { this.x = .5 * (P3.View.width - _["default"].STAGE_WIDTH), this._hud.resize(), this._particles.updateOwnerPos(P3.View.width, 625) } }, { key: "update", value: function() { var e = this;
                        l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "update", this).call(this); var i = deltaTime;
                        this._ivandoe.update(i), this._bert.update(i), this._particles.update(i); var n = _["default"].input; if (n.touch && this._inTut && (this._killPointer(), this._inTut = !1, this._tutPos < 1 && delay(function() { e._inTut = !0; var t = 35 * Math.min(1, Math.max(-1, e._balance)) * .5,
                                    i = { x: .5 * _["default"].STAGE_WIDTH, y: .5 * P3.View.height };
                                Math.sign(t) === -1 ? i.x += 275 : i.x -= 275, e._animatePointer(i) }, .5, this), this._tutPos++), !this._grace && !this._gameover && !this._inTut) { this._hud.leftArrow.visible = !1, this._hud.rightArrow.visible = !1; var a = _["default"].input;
                            a.touch && (a.touch.x < .5 * P3.View.width ? (this._balanceVelocity -= this._counterTilt * this._tiltScale * i, this._hud.leftArrow.visible = !0) : a.touch.x > .5 * P3.View.width && (this._balanceVelocity += this._counterTilt * this._tiltScale * i, this._hud.rightArrow.visible = !0), this._inTut && (this._killPointer(), this._inTut = !1)); var o = Date.now();
                            o > this._startTime + 1e3 && (this._startTime = o, this._hud.setScore(++this._score), _["default"].audio.playSound("sfx_raft_move_0" + P3.math.randomInt(0, 4))), this._balanceVelocity += this._tilt * i, this._balanceVelocity *= .999, this._balance += this._balanceVelocity * i, this._hud.setBalance(this._balance), this._ivandoe.setBalancePosition(this._balance), this._tiltTimer <= 0 ? (this._tiltTimer = 4 * Math.random(), this._tilt = P3.math.random(-1.24 * this._tiltScale, 1.24 * this._tiltScale)) : this._tiltTimer -= i, this._tiltScale += .024 * i, this._raft.parent.rotation = .18 * this._balance, Math.abs(this._balance) >= 1 && this._gameEnding() } } }, { key: "_gameEnding", value: function() { var e = this; if (this._ivandoe.view.state.setAnimation(0, "death_throw_1", !1), this._bert.setAnim("dead"), this._gameover = !0, delay(this.end.bind(this), 1, this), _["default"].audio.playSound("sfx_ivandoe_splash_00"), this._balance < 0) { var t = .1;
                            TweenMax.to(this._ivandoe, t, { y: this._ivandoe.y - 60, ease: Power1.easeOut, onComplete: function() { TweenMax.to(e._ivandoe, 8 * t, { y: e._ivandoe.y + 480, ease: Power1.easeIn, onComplete: function() {} }) } }), TweenMax.to(this._ivandoe, t + 8 * t, { x: this._ivandoe.x - 340, ease: Power0.easeNone }), delay(function() { e._splashFX.position.set(.5 * P3.View.width - 375, 245), e._splashFX.visible = !0, e._splashFX.play() }, 4 * t, this) } else { var i = .1;
                            TweenMax.to(this._ivandoe, i, { y: this._ivandoe.y - 60, ease: Power1.easeOut, onComplete: function() { TweenMax.to(e._ivandoe, 8 * i, { y: e._ivandoe.y + 480, ease: Power1.easeIn, onComplete: function() {} }) } }), TweenMax.to(this._ivandoe, i + 8 * i, { x: this._ivandoe.x + 340, ease: Power0.easeNone }), delay(function() { e._splashFX.position.set(.5 * P3.View.width + 450, 245), e._splashFX.visible = !0, e._splashFX.play() }, 4 * i, this) } } }, { key: "appear", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "appear", this).call(this), this._isFirstPlay() && this.signals.pause.dispatch(this, !0) } }, { key: "start", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "start", this).call(this), this._startTime = Date.now(), _["default"].audio.playMusic("music_loop_dramatic_tense_00"), this._isFirstPlay() && this._tutorial() } }, { key: "end", value: function() { this._running && (this._hud.setHiScore(this.highscore), _["default"].audio.stopMusic(), _["default"].audio.playSound("music_fail_stab_00"), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "end", this).call(this), this.playEndVO(this._score)) } }, { key: "_tutorial", value: function() { var e = this;
                        this._tutPos = 0, this._initTutorialPointer(this), delay(function() { e._inTut = !0; var t = 35 * Math.min(1, Math.max(-1, e._balance)) * .5,
                                i = { x: .5 * _["default"].STAGE_WIDTH, y: .5 * P3.View.height };
                            Math.sign(t) === -1 ? i.x += 275 : i.x -= 275, e._animatePointer(i) }, 1, this) } }, { key: "_initParticles", value: function() { var e = _["default"].assets,
                            t = e.json("particle_emitter_fogbank_02"),
                            i = new PIXI.particles.Emitter(this._holder, [e.texture("fog_particle")], t); return i.emit = !0, i } }]), t }(w["default"]);
        i["default"] = b
    }, { "../../Common": 13, "../../MinigameScene": 28, "./Bert": 144, "./Hud": 145, "./Ivandoe": 146, "./Raft": 147 }],
    149: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("../../Common"),
            u = n(l),
            _ = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._scoreLabel = null, e._attemptsLabel = null, e._pauseButton = null, e._scoreLabels = [], e.init(), e } return s(t, e), r(t, [{ key: "init", value: function() { this._createScorePanel("", 30), this._createScorePanel("", 110), this._createScorePanel("", 190), this._createHiScorePanel(), this._createLivesPanel(), this._createPauseButton() } }, { key: "resize", value: function() { this._lives.x = .5 * (u["default"].STAGE_WIDTH - P3.View.width), this._lives.y = 30, this._hiscore.x = .5 * u["default"].STAGE_WIDTH, this._hiscore.y = 60, this._pauseButton.x = .5 * (u["default"].STAGE_WIDTH + P3.View.width) - 100, this._pauseButton.y = 100 } }, { key: "_createLivesPanel", value: function() { this._lives = new PIXI.Container, this._lives.visible = !1, this.addChild(this._lives); var e = new PIXI.Sprite(u["default"].assets.texture("minigame_lives_panel"));
                        this._lives.addChild(e), this._lives.icons = []; for (var t = 0; t < 3; t++) { var i = new PIXI.Sprite(u["default"].assets.texture("minigame_tries_icon_00" + (t + 1) + "_on"));
                            i.anchor.set(.5), i.x = 70 + 55 * t, i.y = 40, this._lives.addChild(i), this._lives.icons.push(i) } } }, { key: "setLives", value: function(e) { for (var t = 0; t < this._lives.icons.length; t++) this._lives.icons[t].texture = u["default"].assets.texture("minigame_tries_icon_00" + (t + 1) + "_" + (t < e ? "on" : "off")) } }, { key: "_createScorePanel", value: function(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
                            i = new PIXI.Container;
                        this.addChild(i); var n = new PIXI.Sprite(u["default"].assets.texture("minigame_royalroar_panel"));
                        i.addChild(n); var a = new PIXI.Sprite(u["default"].assets.texture("minigame_royalroar_icon"));
                        i.addChild(a), a.y = 15, webfont ? (i.label = new PIXI.Text("" + e, { fontSize: "36px", fontFamily: "Arial", align: "left", fill: 16777215 }), i.label.x = 125, i.label.y = 55, i.label.anchor.set(.5), i.addChild(i.label)) : (i.label = new PIXI.extras.BitmapText("" + e, { font: "40px Alghera Pro", align: "center" }), i.label.x = 125, i.label.y = 55, i.label.anchor.set(.5), i.addChild(i.label)), i.x = .5 * (u["default"].STAGE_WIDTH - P3.View.width), i.y = t, this._scoreLabels.push(i) } }, { key: "setScore", value: function(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0;
                        this._scoreLabels[t].label.text = e.toString() } }, { key: "_createHiScorePanel", value: function() { this._hiscore = new PIXI.Container, this._hiscore.visible = !1, this.addChild(this._hiscore); var e = new PIXI.Sprite(u["default"].assets.texture("minigame_generic_panel"));
                        e.anchor.set(.5), this._hiscore.addChild(e); var t = new PIXI.Sprite(u["default"].assets.texture("minigame_icon_best"));
                        t.anchor.set(.5), this._hiscore.addChild(t), webfont ? (this._hiscore.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "center", fill: 16777215 }), this._hiscore.label.y = 15, this._hiscore.label.anchor.set(.5), this._hiscore.addChild(this._hiscore.label)) : (this._hiscore.label = new PIXI.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), this._hiscore.label.y = 18, this._hiscore.label.anchor.set(.5), this._hiscore.addChild(this._hiscore.label)) } }, { key: "setHiScore", value: function(e) { this._hiscore.visible = !0, this._hiscore.label.text = e.toString() } }, { key: "_createPauseButton", value: function() { var e = u["default"].assets,
                            t = new P3.ButtonStates;
                        t.normal = e.texture("btn_primary_small_off"), t.over = e.texture("btn_primary_small_over"), t.down = e.texture("btn_primary_small_over"), t.icon = e.texture("icon_help"), this._pauseButton = new P3.Button(t), this.addChild(this._pauseButton) } }, { key: "pauseButton", get: function() { return this._pauseButton } }]), t }(PIXI.Container);
        i["default"] = _ }, { "../../Common": 13 }],
    150: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Actor"),
            _ = n(u),
            h = e("../../Common"),
            c = n(h),
            d = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    e._skipFrame = 0; var i = c["default"].assets,
                        n = new PIXI.Container; return e.addChild(n), e._view = new PIXI.spine.Spine(i.spineData("ivandoe_front")), e._view.scale.set(.4, .4), e._view.skeleton.setToSetupPose(), e._view.skeleton.setSkin(null), e._view.skeleton.setSkinByName("standard"), e._view.autoUpdate = !1, e._view.update(0), e._view.state.setAnimation(0, "royal_roar_idle", !0), n.addChild(e._view), e._view.stateData.defaultMix = .2, e._view.state.addListener({ event: function(e) { "royal_roar_idle" === e.animation.name ? c["default"].audio.playSound("vo_ivandoe_cough_00") : c["default"].audio.playSound("vo_ivandoe_breath_in_00") } }), e.faceDirection(-1), e._animDir = 1, e } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this) } }, { key: "destroy", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "update", value: function(e) { this._skipFrame++ % 2 === 0 && this._view.update(2 * e * this._animDir) } }, { key: "animDir", set: function(e) { this._animDir = e } }]), t }(_["default"]);
        i["default"] = d }, { "../../Actor": 4, "../../Common": 13 }],
    151: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function c(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : c(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Common"),
            _ = n(u),
            h = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    e = 0; var n = new PIXI.Sprite(_["default"].assets.texture("minigame_royalroar_panel"));
                    i.addChild(n); var s = ["minigame_royalroar_icon", "minigame_royalroar_icon", "minigame_royalroar_icon"],
                        r = new PIXI.Sprite(_["default"].assets.texture(s[e])); return r.anchor = new PIXI.Point(.5, .5), r.scale.set(.8), i.addChild(r), i.alpha = 0, i } return s(t, e), r(t, [{ key: "destroy", value: function(e) { this._animateTimeline && this._animateTimeline.kill(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "animateIn", value: function() { this._animateTimeline = new TimelineMax, this._animateTimeline.fromTo(this, .4, { y: this.y + 240 }, { y: this.y, alpha: 1, ease: Back.easeOut }) } }, { key: "update", value: function(e) {} }]), t }(PIXI.Container);
        i["default"] = h }, { "../../Common": 13 }],
    152: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function g(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : g(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Common"),
            _ = n(u),
            h = e("./Hud"),
            c = n(h),
            d = e("./Ivandoe"),
            p = n(d),
            f = e("../../MinigameScene"),
            y = n(f),
            v = e("./Marker"),
            m = (n(v), function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._game = null, e._interactArea = null, e._roarVolume = 0, e._roarDuration = 0, e._meterState = 0, e._meterPower = 0, e._meterPowerSet = 0, e._meterPowerMax = 190, e._meter = null, e._meterTween = null, e._volumeIndicator = null, e._durationIndicator = null, e._lockVolume = !1, e._lockDuration = !1, e._ivandoe = null, e._attempts = 3, e._canRoar = !1, e._tutPos = -1, e._isDrainMeter = !1, e._bert = null, e } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this); var e = _["default"].assets,
                            i = new PIXI.Sprite(e.texture("ep2_royalRoar_bg", "jpg"));

                        i.width = _["default"].STAGE_WIDTH, this.addChild(i), this._game = new PIXI.Container, this.addChild(this._game), this._interactArea = new PIXI.Container, this._interactArea.interactive = !0, this._interactArea.hitArea = new PIXI.Rectangle(0, 0, P3.View.width, P3.View.height), this._interactArea.pointerdown = this._onMouseDown.bind(this), this.addChild(this._interactArea), this._hud = new c["default"], this._hud.setLives(this._attempts), this._hud.setScore(0, 0), this._hud.setScore(0, 1), this._hud.setScore(0, 2), this._hud.setHiScore(this.highscore), this._hud.pauseButton.signals.click.add(this._onPauseButtonClick, this), this._createMeter(), this.resetMeter(), this._ivandoe = new p["default"], this._ivandoe.x = .5 * _["default"].STAGE_WIDTH - 8, this._ivandoe.y = 580, this._game.addChild(this._ivandoe), this._bert = this._initBert(), this._bert.x = .5 * _["default"].STAGE_WIDTH - 345, this._bert.y = 680, this._game.addChild(this._bert), this.addChild(this._hud) } }, { key: "_initBert", value: function() { var e = new PIXI.spine.Spine(_["default"].assets.spineData("bert_front")); return e.scale.set(.42, .42), e.skeleton.setToSetupPose(), e.autoUpdate = !1, e.update(0), e.state.setAnimation(0, "roar_stand_idle", !0), e.stateData.defaultMix = .2, e } }, { key: "destroy", value: function() { this._meterTween && (this._meterTween.kill(), this._meterTween = null), this._interactArea.mousedown = this._interactArea.touchstart = null, l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this), TweenMax.killTweensOf(this) } }, { key: "resize", value: function() { this.x = .5 * (P3.View.width - _["default"].STAGE_WIDTH), this._interactArea.x = .5 * (_["default"].STAGE_WIDTH - P3.View.width), this._interactArea.hitArea.width = P3.View.width, this._hud.resize() } }, { key: "update", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "update", this).call(this); var e = deltaTime;
                        this._ivandoe.update(e), this._bert.update(e) } }, { key: "appear", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "appear", this).call(this), this._isFirstPlay() && this.signals.pause.dispatch(this, !0) } }, { key: "setVolume", value: function() { this._lockVolume = !0; var e = Math.abs(this._meterPowerMax - this._meterPower);
                        this._roarVolume = 1 - e / this._meterPowerMax, console.log("volume:", this._roarVolume) } }, { key: "setDuration", value: function() { this._lockDuration = !0; var e = 22,
                            t = Math.abs(e - this._meterPower);
                        this._roarAccuracy = Math.max(0, 1 - t / 22.5), this._roarDuration = this._roarAccuracy * this._roarVolume, console.log("duration:", this._roarDuration) } }, { key: "setMeterState", value: function() { var e = this; switch (console.log("meterState : " + this._meterState), this._meterState) {
                            case -1:
                                this._hud.setLives(this._attempts - 1), this._meterState = 0, this._ivandoe.animDir = -1, this._lockInput = !0, delay(function() { e._lockInput = !1, e._ivandoe.animDir = 1, e._finishRoar(0), e._ivandoe.view.state.setAnimation(0, "royal_roar_idle", !0), e.resetMeter() }, this._meterTween.currentTime, this); break;
                            case 0:
                                this._meterState++, this.startMeter(), this._ivandoe.view.state.setAnimation(0, "royal_roar_breath_in", !1), this._bert.state.setAnimation(0, "roar_stand_breath_in", !1); break;
                            case 1:
                                this._meterState++, this.setVolume(), this._ivandoe.animDir = 0; break;
                            case 2:
                                if (this._meterState++, this._ivandoe.animDir = 1, this.setDuration(), this._roarDuration > 0) { this._canRoar && (this._canRoar = !1, this.doRoar()), this.stopMeter(); var t = 3.7 * this._roarDuration;
                                    this._meterTween = TweenMax.to(this._volumeIndicator, t, { rotation: this._durationIndicator.rotation, ease: Power0.easeNone, onUpdate: function() { e._meterPowerSet = e._volumeIndicator.rotation * PIXI.RAD_TO_DEG - 68, e._updateMeter() }, onComplete: function() { e._finishRoar() } }) } break;
                            default:
                                console.error("state out of range", this.meterState) } } }, { key: "_finishRoar", value: function() { var e = this,
                            t = 10 * this._roarDuration;
                        t = parseFloat(t.toFixed(1)), this._score += t, this._score = parseFloat(this._score.toFixed(1)), this._hud.setScore(t, 3 - this._attempts--), this._roarVolume > .9 && this._roarDuration > .7 && _["default"].audio.playSound("vo_ivandoe_kingly_roar_00"), 0 !== this._attempts ? (this._lockInput = !0, delay(function() { e._lockInput = !1, e.resetMeter() }, this._roarDuration + 1, this)) : (this._lockInput = !0, delay(function() { e._lockInput = !1, e.end() }, 1, this)), this._ivandoe.view.state.setAnimation(0, "royal_roar_end", !1), this._ivandoe.view.state.addAnimation(0, "royal_roar_idle", !0, 0), this._roarSFX && this._roarSFX.stop && this._roarSFX.stop(), _["default"].audio.playSound("vo_ivandoe_kingly_bellow_ending_00") } }, { key: "doRoar", value: function() { this._bert.state.setAnimation(0, "roar_stand_yell", !1), this._bert.state.addAnimation(0, "roar_stand_idle", !0, 0), this._ivandoe.view.state.setAnimation(0, "royal_roar_yell", !1), this._roarSFX = _["default"].audio.playSound("vo_ivandoe_kingly_bellow_cut_00") } }, { key: "_updateMeter", value: function() { var e = 68,
                            t = 280,
                            i = 1,
                            n = [];
                        n.push(new PIXI.Point); for (var a = 44; a <= Math.floor(this._meterPowerSet * i); ++a) { var o = 1 / i * a;
                            n.push(new PIXI.Point(Math.cos((e + o) * PIXI.DEG_TO_RAD) * t, Math.sin((e + o) * PIXI.DEG_TO_RAD) * t)) } n.push(new PIXI.Point), this._meter.fill.mask.clear(), this._meter.fill.mask.beginFill(16711680, .5), this._meter.fill.mask.drawPolygon(n), this._meter.fill.mask.endFill(), !this._lockVolume && (this._volumeIndicator.rotation = (e + this._meterPowerSet) * PIXI.DEG_TO_RAD), !this._lockDuration && (this._durationIndicator.rotation = (e + this._meterPower) * PIXI.DEG_TO_RAD) } }, { key: "_drainMeter", value: function() { for (var e = 68, t = 280, i = 1, n = [new PIXI.Point], a = 44; a <= Math.floor(this._meterPowerDrain * i); ++a) { var o = 1 / i * a;
                            n.push(new PIXI.Point(Math.cos((e + o) * PIXI.DEG_TO_RAD) * t, Math.sin((e + o) * PIXI.DEG_TO_RAD) * t)) } n.push(new PIXI.Point), this._meter.fill.mask.clear(), this._meter.fill.mask.beginFill(16711680, .5), this._meter.fill.mask.drawPolygon(n), this._meter.fill.mask.endFill() } }, { key: "startMeter", value: function() { var e = this;
                        this._meterTween && this._meterTween.kill && (this._meterPower = 0, this._meterTween.kill()), this.stopMeter(), this._canRoar = !0, this._meterTween = TweenMax.to(this, 1, { _meterPower: this._meterPowerMax, ease: Power0.easeNone, yoyo: !0, repeat: 1, onUpdate: function() { this._lockVolume || (this._meterPowerSet = this._meterPower), this._updateMeter() }, onUpdateScope: this, onComplete: function() { 0 === e._roarDuration && (console.log("missed"), e._meterState = -1, e.setMeterState()) } }) } }, { key: "stopMeter", value: function() { this._meterTween && (this._meterTween.kill(), this._meterTween = null), TweenMax.killTweensOf(this._meterTween) } }, { key: "resetMeter", value: function() { this._roarDuration = 0, this._roarVolume = 0, this._lockVolume = !1, this._lockDuration = !1, this._meterState = 0, this._meterPower = 0, this._meterPowerSet = 0, this._updateMeter() } }, { key: "start", value: function() { this._isFirstPlay() && this._tutorial(), this._gameStarted = !0, _["default"].audio.playMusic("music_loop_quirky_01") } }, { key: "end", value: function() { _["default"].audio.stopMusic(), _["default"].audio.playSound("music_fail_stab_00"), this._hud.setHiScore(parseFloat(this.highscore.toFixed(1))), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "end", this).call(this), this.playEndVO(3 * this._score) } }, { key: "pause", value: function() { this._meterTween && this._meterTween.pause() } }, { key: "resume", value: function() { this._meterTween && this._meterTween.resume() } }, { key: "_createMeter", value: function() { var e = _["default"].assets;
                        this._meter = new PIXI.Container, this._meter.x = .5 * _["default"].STAGE_WIDTH, this._meter.y = .5 * _["default"].STAGE_HEIGHT, this.addChild(this._meter), this._meter.bg = new PIXI.Sprite(e.texture("ep2_royalRoar/bar_back")), this._meter.bg.anchor = new PIXI.Point(.5, .5), this._meter.addChild(this._meter.bg), this._meter.fill = new PIXI.Sprite(e.texture("ep2_royalRoar/bar_fill")), this._meter.fill.anchor = new PIXI.Point(.5, .5), this._meter.addChild(this._meter.fill), this._meter.fill.mask = new PIXI.Graphics, this._meter.addChild(this._meter.fill.mask), this._volumeIndicator = new PIXI.Sprite(e.texture("ep2_royalRoar/bar_power")), this._volumeIndicator.anchor = new PIXI.Point(.5, .5), this._meter.addChild(this._volumeIndicator), this._durationIndicator = new PIXI.Sprite(e.texture("ep2_royalRoar/bar_accuracy")), this._durationIndicator.anchor = new PIXI.Point(.5, .5), this._meter.addChild(this._durationIndicator) } }, { key: "_onMouseDown", value: function(e) { var t = this;
                        this._gameStarted && (this._lockInput || (this._inTut ? (this._tutPos++, this._killPointer(), 0 === this._tutPos ? (this.setVolume(), this._ivandoe.animDir = 0, this._meterTween.resume(), this._lockInput = !0, delay(function() { t._lockInput = !1, t._inTut && (t._meterTween.pause(), t._animatePointer({ x: .5 * _["default"].STAGE_WIDTH - 175, y: .5 * P3.View.height })) }, .85, this)) : 1 === this._tutPos ? (this._meterState = 2, this.setMeterState()) : 2 === this._tutPos ? (this.setMeterState(), this._inTut = !1) : this._inTut = !1) : this._grace || this.setMeterState())) } }, { key: "_tutorial", value: function() { var e = this;
                        this._initTutorialPointer(), this._inTut = !0, this.startMeter(), this._lockInput = !0, delay(function() { e._lockInput = !1, e._meterTween.pause(), e._animatePointer({ x: .5 * _["default"].STAGE_WIDTH - 175, y: .5 * P3.View.height }) }, 1.008, this) } }]), t }(y["default"]));
        i["default"] = m }, { "../../Common": 13, "../../MinigameScene": 28, "./Hud": 149, "./Ivandoe": 150, "./Marker": 151 }],
    153: [function(e, t, i) {
        "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 });
        var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("../../Common"),
            u = n(l),
            _ = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return i._combinationLimit = e, i.init(), i }
                return s(t, e), r(t, [{ key: "init", value: function() { this.initScorePanel("minigame_icon_ep1_2"), this.initHiScorePanel(), this._panelsContainer = new PIXI.Container, this._panelsContainer.y = u["default"].STAGE_HEIGHT, this.addChild(this._panelsContainer), this._panels = []; for (var e = 0; e < this._combinationLimit; e++) { var t = new PIXI.Sprite(u["default"].assets.texture("ep1_swordPractice/bert_panel_front"));
                            t.anchor.set(.5, .9), t.x = t.width * e, t.y = t.height, t.visible = !1, this._panelsContainer.addChild(t), this._panels.push(t), t.symbol = new PIXI.Sprite(u["default"].assets.texture("ep1_swordPractice/shape_001")), t.symbol.anchor.set(.5, .9), t.symbol.tint = 16711680, t.addChild(t.symbol) } this._view = new PIXI.spine.Spine(u["default"].assets.spineData("bert_front")), this._view.scale.set(.6), this._view.scale.x *= -1, this._view.skeleton.setToSetupPose(), this._view.skeleton.setSkin(null), this._view.skeleton.setSkinByName("default"), this._view.autoUpdate = !1, this._view.x = u["default"].STAGE_WIDTH / 2 + 400, this._view.y = u["default"].STAGE_HEIGHT - 100, this._view.update(0), this._view.state.setAnimation(0, "idle_fly", !0), this._skipFrame = 0, this.addChild(this._view), this._createPauseButton() } }, { key: "shutdown", value: function(e) { this._timeline && this._timeline.kill(), this["super"](e) } }, { key: "update", value: function(e) { this._skipFrame++ % 2 === 0 && this._view.update(2 * e) } }, { key: "resize", value: function() { this._score.x = .5 * (u["default"].STAGE_WIDTH - P3.View.width) + 80, this._score.y = 10, this._hiscore.x = .5 * u["default"].STAGE_WIDTH, this._hiscore.y = 60, this._pauseButton.x = .5 * (u["default"].STAGE_WIDTH + P3.View.width) - 100, this._pauseButton.y = 100 } }, { key: "initScorePanel", value: function(e) { this._score = new PIXI.Container, this._score.visible = !1, this.addChild(this._score); var t = new PIXI.Sprite(u["default"].assets.texture("minigame_generic_panel"));
                        this._score.addChild(t); var i = new PIXI.Sprite(u["default"].assets.texture(e));
                        this._score.addChild(i), webfont ? (this._score.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "left", fill: 16777215 }), this._score.label.x = 110, this._score.label.y = 60, this._score.label.anchor.set(.5), this._score.addChild(this._score.label)) : (this._score.label = new PIXI.extras.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), this._score.label.x = 110, this._score.label.y = 66, this._score.label.anchor.set(.5), this._score.addChild(this._score.label)) } }, { key: "setScore", value: function(e) { this._score.visible = !0, this._score.label.text = "" + e } }, { key: "initHiScorePanel", value: function() { this._hiscore = new PIXI.Container, this._hiscore.visible = !1, this.addChild(this._hiscore); var e = new PIXI.Sprite(u["default"].assets.texture("minigame_generic_panel"));
                        e.anchor.set(.5), this._hiscore.addChild(e); var t = new PIXI.Sprite(u["default"].assets.texture("minigame_icon_best"));
                        t.anchor.set(.5), this._hiscore.addChild(t), webfont ? (this._hiscore.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "center", fill: 16777215 }), this._hiscore.label.y = 15, this._hiscore.label.anchor.set(.5), this._hiscore.addChild(this._hiscore.label)) : (this._hiscore.label = new PIXI.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), this._hiscore.label.y = 18, this._hiscore.label.anchor.set(.5), this._hiscore.addChild(this._hiscore.label)) } }, { key: "setHiScore", value: function(e) { this._hiscore.visible = !0, this._hiscore.label.text = "" + e } }, {
                    key: "showCombination",
                    value: function(e, t, i, n, a) {
                        var o = Math.min(e.length, this._combinationLimit);
                        this._panelsContainer.x = u["default"].STAGE_WIDTH / 2 + (this._panels[0].width - 10) * (-o / 2 + .5), this._timeline && this._timeline.kill(), this._timeline = new TimelineMax({ onComplete: n, onCompleteScope: a });
                        for (var s = .15, r = 0; r < this._panels.length; r++) this._panels[r].texture = u["default"].assets.texture("ep1_swordPractice/bert_panel_front"), r < o ? (this._panels[r].visible = !0,
                            this._panels[r].symbol.visible = !0, this._panels[r].symbol.y = 0, this._panels[r].symbol.texture = u["default"].assets.texture(t[e[r]].textureBert), this._panels[r].symbol.tint = t[e[r]].color, this._timeline.fromTo(this._panels[r], .5, { y: this._panels[r].height }, { y: 0, ease: Back.easeOut }, r * s), this._timeline.to(this._panels[r].scale, .2, { x: 0, ease: Sine.easeIn, onCompleteScope: this, onCompleteParams: [this._panels[r]], onComplete: function(e) { u["default"].audio.playSound("sfx_symbol_board_turn_00"), e.symbol.visible = !1, e.texture = u["default"].assets.texture("ep1_swordPractice/bert_panel_back") } }, o * s + i + .1 * r), this._timeline.to(this._panels[r].scale, .2, { x: 1, ease: Sine.easeOut }, o * s + i + .1 * r + .2)) : this._panels[r].visible = !1;
                        this._timeline.to(this._view, 1, { x: this._panelsContainer.x + this._panels[o - 1].x + this._panels[0].width, ease: Sine.easeOut }, 0)
                    }
                }, { key: "showInputPanelResult", value: function(e, t) { this._panels[e].symbol.visible = !0, this._panels[e].symbol.y = -56, this._panels[e].symbol.texture = u["default"].assets.texture(t ? "ep1_swordPractice/bert_panel_tick" : "ep1_swordPractice/bert_panel_cross"), this._panels[e].symbol.tint = t ? 7199597 : 14898517, t || this._view.state.setAnimation(0, "react_fly_lose", !0) } }, { key: "waitInputPanel", value: function(e) { TweenMax.to(this._view, 0 == e ? 1 : .5, { x: this._panelsContainer.x + this._panels[e].x + .65 * this._panels[0].width, ease: Sine.easeOut }) } }, { key: "hideInputPanels", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0;
                        this._timeline && this._timeline.kill(), this._timeline = new TimelineMax({ delay: e }); for (var t = 0; t < this._panels.length; t++) this._timeline.to(this._panels[t], .25, { y: this._panels[t].height, ease: Back.easeIn }, .1 * t) } }, { key: "_createPauseButton", value: function() { var e = u["default"].assets,
                            t = new P3.ButtonStates;
                        t.normal = e.texture("btn_primary_small_off"), t.over = e.texture("btn_primary_small_over"), t.down = e.texture("btn_primary_small_over"), t.icon = e.texture("icon_help"), this._pauseButton = new P3.Button(t), this.addChild(this._pauseButton) } }, { key: "pauseButton", get: function() { return this._pauseButton } }]), t
            }(PIXI.Container);
        i["default"] = _
    }, { "../../Common": 13 }],
    154: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Actor"),
            _ = n(u),
            h = e("../../Common"),
            c = n(h),
            d = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    e._skipFrame = 0; var i = c["default"].assets,
                        n = new PIXI.Container; return e.addChild(n), e._view = new PIXI.spine.Spine(i.spineData("ivandoe_front")), e._view.scale.set(.4, .4), e._view.skeleton.setToSetupPose(), e._view.skeleton.setSkin(null), e._view.skeleton.setSkinByName("standard"), e._view.stateData.defaultMix = .15, e._view.autoUpdate = !1, e._view.update(0), n.addChild(e._view), e._shadow = new PIXI.Sprite(c["default"].assets.texture("shadow")), e._shadow.anchor.set(.5), e._shadow.blendMode = 2, e._shadow.alpha = .35, e._shadow.scale.set(.8), n.addChildAt(e._shadow, 0), e._view.state.data.setMix("idle_posing_1", "draw_sword", .2), e._view.state.data.setMix("swordplay_idle", "retract_sword", .2), e._view.state.data.setMix("swordplay_idle", "swordplay_strike_high", .1), e._view.state.data.setMix("swordplay_idle", "swordplay_strike_low", .1), e._view.state.data.setMix("swordplay_strike_high", "retract_sword", .2), e._view.state.data.setMix("swordplay_strike_low", "retract_sword", .2), e._view.state.data.setMix("swordplay_strike_high", "swordplay_lose", .2), e._view.state.data.setMix("swordplay_strike_low", "swordplay_lose", .2), e._view.state.data.setMix("swordplay_idle", "retract_sword", .2), e.faceDirection(1), e } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this._view.state.setAnimation(0, "idle_posing_1", !0), this._view.state.addListener({ event: this._onAnimationEvent.bind(this) }) } }, { key: "destroy", value: function(e) { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "update", value: function(e) { this._skipFrame++ % 2 === 0 && this._view.update(2 * e) } }, { key: "drawSword", value: function() { this._view.state.setAnimation(0, "draw_sword", !1, 0), this._view.state.addAnimation(0, "swordplay_watch", !0, 0) } }, { key: "watchCombination", value: function() { this._view.state.setAnimation(0, "swordplay_watch", !0, 0) } }, { key: "idle", value: function() { this._view.state.setAnimation(0, "swordplay_idle", !0, 0) } }, { key: "hitSword", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "high";
                        this._view.state.setAnimation(0, "swordplay_strike_" + e, !1, 0), this._view.state.addAnimation(0, "swordplay_idle", !0, 0), c["default"].audio.playSound("sfx_symbol_board_hit_00"), c["default"].audio.playSound("sfx_swipe_0" + P3.math.randomInt(0, 1)) } }, { key: "retractSword", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0; return e > 0 ? void TweenMax.to(this, 0, { delay: e, onStartScope: this, onStart: function() { this.retractSword() } }) : (this._view.state.setAnimation(0, "retract_sword", !1, 0), void this._view.state.addAnimation(0, "idle_posing_1", !0, 0)) } }, { key: "gameOver", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0; return e > 0 ? void TweenMax.to(this, 0, { delay: e, onStartScope: this, onStart: function() { this.gameOver() } }) : void this._view.state.setAnimation(0, "swordplay_lose", !0, 0) } }, { key: "_playSwipeSFX", value: function() { c["default"].audio.playSound("sfx_swipe_0" + P3.math.randomInt(0, 1)) } }, { key: "_onAnimationEvent", value: function(e, t) { "sfx_swipe" === t.data.name ? this._playSwipeSFX() : "sfx_yell" === t.data.name && c["default"].audio.playSound("vo_ivandoe_yell_00") } }]), t }(_["default"]);
        i["default"] = d }, { "../../Actor": 4, "../../Common": 13 }],
    155: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function m(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : m(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Common"),
            _ = n(u),
            h = e("./Ivandoe"),
            c = n(h),
            d = e("./Hud"),
            p = n(d),
            f = e("../../MinigameScene"),
            y = n(f),
            v = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._combination = [], e._combinationLimit = 8, e._combinationCount = 1, e._score = 0, e._symbols = [{ texture: "ep1_swordPractice/shape_001", textureBert: "ep1_swordPractice/shape_001_icon", color: 16777215 }, { texture: "ep1_swordPractice/shape_004", textureBert: "ep1_swordPractice/shape_004_icon", color: 16777215 }, { texture: "ep1_swordPractice/shape_002", textureBert: "ep1_swordPractice/shape_002_icon", color: 16777215 }, { texture: "ep1_swordPractice/shape_003", textureBert: "ep1_swordPractice/shape_003_icon", color: 16777215 }], e._states = { GRACE: 1, COMBINATION: 2, WAITING_INPUT: 3, CORRECT_INPUT: 4, GAMEOVER: 5, INACTIVE: -1 }, e._gamestate = null, e._gamestateTime = 0, e._nextGamestate = e._states.INACTIVE, e._graceTime = 2, e._particles = null, e._particleHolder = new PIXI.Container, e._symbolsUnlocked = 2, e } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this); var e = new PIXI.Sprite(_["default"].assets.texture("ep1_swordPractice_bg", "jpg"));
                        e.width = _["default"].STAGE_WIDTH, this.addChild(e), this._game = new PIXI.Container, this.addChild(this._game), this.addChild(this._particleHolder), this._posts = []; var i = new PIXI.Sprite(_["default"].assets.texture("ep1_swordPractice/post_l"));
                        i.anchor.set(.5, 1), i.x = .5 * _["default"].STAGE_WIDTH - 300, i.y = 680, this._game.addChild(i), i.panel = new PIXI.Sprite(_["default"].assets.texture("ep1_swordPractice/panel")), i.panel.anchor.set(.5), i.panel.x = -15, i.panel.y = -300, i.addChild(i.panel), i.symbol = new PIXI.Sprite(_["default"].assets.texture(this._symbols[0].texture)), i.symbol.anchor.set(.5), i.symbol.tint = this._symbols[0].color, i.panel.addChild(i.symbol), i.intearctiveArea = new PIXI.Sprite(_["default"].assets.texture(this._symbols[0].texture)), i.intearctiveArea.anchor.set(.5), i.intearctiveArea.alpha = 0, i.intearctiveArea.index = 0, i.intearctiveArea.interactive = !0, i.intearctiveArea.buttonMode = !0, i.intearctiveArea.mousedown = i.intearctiveArea.touchstart = function(e) { this.onPostTouch(e) }.bind(this), i.symbol.addChild(i.intearctiveArea); var n = new PIXI.Sprite(_["default"].assets.texture("ep1_swordPractice/post_l_mask"));
                        n.anchor.set(.5, 1), n.x = i.x, n.y = i.y, this._game.addChild(n); var a = new PIXI.Sprite(_["default"].assets.texture("ep1_swordPractice/panel_top"));
                        a.anchor.set(.5, 0), a.x = .5 * _["default"].STAGE_WIDTH - 150, a.y = 0, this._game.addChild(a), a.symbol = new PIXI.Sprite(_["default"].assets.texture(this._symbols[2].texture)), a.symbol.anchor.set(.5), a.symbol.tint = this._symbols[1].color, a.symbol.x = 0, a.symbol.y = 190, a.addChild(a.symbol), a.intearctiveArea = new PIXI.Sprite(_["default"].assets.texture(this._symbols[2].texture)), a.intearctiveArea.anchor.set(.5), a.intearctiveArea.alpha = 0, a.intearctiveArea.index = 2, a.intearctiveArea.interactive = !0, a.intearctiveArea.buttonMode = !0, a.intearctiveArea.mousedown = a.intearctiveArea.touchstart = function(e) { this.onPostTouch(e) }.bind(this), a.symbol.addChild(a.intearctiveArea), this._leftTopPanel = a, a.homePos = new PIXI.Point(a.x, a.y), a.y -= a.height; var o = new PIXI.Sprite(_["default"].assets.texture("ep1_swordPractice/panel_top"));
                        o.anchor.set(.5, 0), o.x = .5 * _["default"].STAGE_WIDTH + 150, o.y = 0, o.scale.x = -1, this._game.addChild(o), o.symbol = new PIXI.Sprite(_["default"].assets.texture(this._symbols[3].texture)), o.symbol.anchor.set(.5), o.symbol.tint = this._symbols[2].color, o.symbol.y = 190, o.addChild(o.symbol), o.intearctiveArea = new PIXI.Sprite(_["default"].assets.texture(this._symbols[3].texture)), o.intearctiveArea.anchor.set(.5), o.intearctiveArea.alpha = 0, o.intearctiveArea.index = 3, o.intearctiveArea.interactive = !0, o.intearctiveArea.buttonMode = !0, o.intearctiveArea.mousedown = o.intearctiveArea.touchstart = function(e) { this.onPostTouch(e) }.bind(this), o.symbol.addChild(o.intearctiveArea), this._rightTopPanel = o, o.homePos = new PIXI.Point(o.x, o.y), o.y -= o.height; var s = new PIXI.Sprite(_["default"].assets.texture("ep1_swordPractice/post_r"));
                        s.anchor.set(.5, 1), s.x = .5 * _["default"].STAGE_WIDTH + 300, s.y = 630, this._game.addChild(s), s.panel = new PIXI.Sprite(_["default"].assets.texture("ep1_swordPractice/panel")), s.panel.anchor.set(.5), s.panel.x = 10, s.panel.y = -270, s.addChild(s.panel), s.symbol = new PIXI.Sprite(_["default"].assets.texture(this._symbols[1].texture)), s.symbol.anchor.set(.5), s.symbol.tint = this._symbols[3].color, s.panel.addChild(s.symbol), s.intearctiveArea = new PIXI.Sprite(_["default"].assets.texture(this._symbols[1].texture)), s.intearctiveArea.anchor.set(.5), s.intearctiveArea.alpha = 0, s.intearctiveArea.index = 1, s.intearctiveArea.interactive = !0, s.intearctiveArea.buttonMode = !0, s.intearctiveArea.mousedown = s.intearctiveArea.touchstart = function(e) { this.onPostTouch(e) }.bind(this), s.symbol.addChild(s.intearctiveArea); var n = new PIXI.Sprite(_["default"].assets.texture("ep1_swordPractice/post_r_mask"));
                        n.anchor.set(.5, 1), n.x = s.x, n.y = s.y, this._game.addChild(n), this._posts = [i, s, a, o], this._ivandoe = new c["default"], this._ivandoe.x = .5 * _["default"].STAGE_WIDTH, this._ivandoe.y = 620, this._game.addChild(this._ivandoe), this._hud = new p["default"](this._combinationLimit), this._hud.setScore(this.score), this._hud.setHiScore(this.highscore), this.addChild(this._hud), this._hud.pauseButton.signals.click.add(this._onPauseButtonClick, this), this._particles = this._initParticles(this._particleHolder) } }, { key: "destroy", value: function() { for (var e = 0; e < this._posts.length; e++) this._posts[e].timeline && this._posts[e].timeline.kill();
                        l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "resize", value: function() { this.x = .5 * (P3.View.width - _["default"].STAGE_WIDTH), this._hud.resize() } }, { key: "appear", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "appear", this).call(this), this._isFirstPlay() && this.signals.pause.dispatch(this, !0), this._nextGamestate = this._states.GRACE } }, { key: "show", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "show", this).call(this), TweenMax.resumeAll() } }, { key: "update", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "update", this).call(this); var e = deltaTime; switch (this._ivandoe.update(e), this._hud.update(e), this._particles.update(e), this._nextGamestate ? (this._gamestate = this._nextGamestate, this._gamestateTime = 0, this._nextGamestate = null) : this._gamestateTime += e, this._gamestate) {
                            case this._states.GRACE:
                                0 == this._gamestateTime ? this._ivandoe.drawSword() : this._gamestateTime > this._graceTime && (this._nextGamestate = this._states.COMBINATION, _["default"].audio.playMusic("music_loop_quirky_00")); break;
                            case this._states.COMBINATION:
                                if (0 == this._gamestateTime) { this._ivandoe.watchCombination(), this._hud.setScore(this.score), this._combination = this._randomCombination(); var i = Math.max(.5, 2 - .1 * Math.max(0, this._combinationCount - 8));
                                    this._hud.showCombination(this._combination, this._symbols, i, function() { this._nextGamestate = this._states.WAITING_INPUT }, this) } break;
                            case this._states.WAITING_INPUT:
                                0 == this._gamestateTime && (this._combinationIndex = 0, this._hud.waitInputPanel(this._combinationIndex), this._ivandoe.idle()); break;
                            case this._states.CORRECT_INPUT:
                                0 == this._gamestateTime ? (this._hud.hideInputPanels(1), this._score += this._combinationCount, this._hud.setScore(this.score), this._combinationCount++, this._symbolsUnlocked < 4 && this._combinationCount > 3 + this._symbolsUnlocked && (this._symbolsUnlocked++, this._combinationCount = this._symbolsUnlocked - 1, 3 === this._symbolsUnlocked ? (TweenMax.to(this._leftTopPanel, .35, { y: this._leftTopPanel.homePos.y, ease: Back.easeOut }), TweenMax.to(this._leftTopPanel, .175, { rotation: .1 * Math.PI, ease: Sine.easeInOut, yoyo: !0, repeat: 1 })) : 4 === this._symbolsUnlocked && (TweenMax.to(this._rightTopPanel, .35, { y: this._rightTopPanel.homePos.y, ease: Back.easeOut }), TweenMax.to(this._rightTopPanel, .175, { rotation: .1 * Math.PI, ease: Sine.easeInOut, yoyo: !0, repeat: 1 })))) : this._gamestateTime > 2 && (this._nextGamestate = this._states.COMBINATION); break;
                            case this._states.GAMEOVER:
                                0 == this._gamestateTime ? (this._ivandoe.gameOver(.5), _["default"].audio.stopMusic(), _["default"].audio.playSound("music_fail_stab_01")) : this._gamestateTime > 2 && (this.end(), this._nextGamestate = this._states.INACTIVE); break;
                            case this._states.INACTIVE:
                        } } }, { key: "start", value: function() {} }, { key: "end", value: function() { this._hud.setHiScore(this.highscore), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "end", this).call(this), this.playEndVO(this._score) } }, { key: "onPostTouch", value: function(e) { if (this._gamestate == this._states.WAITING_INPUT) { var t = e.currentTarget.index,
                                i = this._combination[this._combinationIndex] == t;
                            this.hitPost(t), this._hud.showInputPanelResult(this._combinationIndex, i), i ? (this._score++, this._hud.setScore(this._score), this._combinationIndex++, this._combinationIndex >= this._combination.length ? this._nextGamestate = this._states.CORRECT_INPUT : this._hud.waitInputPanel(this._combinationIndex)) : this._nextGamestate = this._states.GAMEOVER } } }, { key: "hitPost", value: function(e) { this._posts[e].timeline && this._posts[e].timeline.kill(); var t = this._posts[e].x > this._ivandoe.x ? 1 : -1;
                        t *= 0 == e || 3 == e ? -1 : 1, this._ivandoe.scale.x = this._posts[e].x > this._ivandoe.x ? 1 : -1, this._ivandoe.hitSword(0 == e || 1 == e ? "low" : "high"); var i = new TimelineMax;
                        i.to(this._posts[e], .15, { rotation: t * -20 * PIXI.DEG_TO_RAD, ease: Sine.easeOut }), i.to(this._posts[e], .15, { rotation: 15 * t * PIXI.DEG_TO_RAD, ease: Sine.easeInOut }), i.to(this._posts[e], .15, { rotation: t * -10 * PIXI.DEG_TO_RAD, ease: Sine.easeInOut }), i.to(this._posts[e], .15, { rotation: 5 * t * PIXI.DEG_TO_RAD, ease: Sine.easeInOut }), i.to(this._posts[e], .15, { rotation: 0 * t * PIXI.DEG_TO_RAD, ease: Sine.easeInOut }), this._posts[e].timeline = i } }, { key: "_randomCombination", value: function() { for (var e = [], t = 0; t < Math.min(this._combinationLimit, this._combinationCount); t++) e.push(P3.math.randomInt(0, this._symbolsUnlocked - 1)); return e } }, { key: "_onPauseButtonClick", value: function(e) { this.signals.pause.dispatch(this, !1) } }, { key: "_initParticles", value: function(e) { var t = _["default"].assets,
                            i = t.json("particle_emitter_fairdust_01");
                        i.spawnRect.w = _["default"].STAGE_WIDTH, i.spawnRect.h = P3.View.height; var n = new PIXI.particles.Emitter(e, [t.texture("particle_fairy_dust_00"), t.texture("particle_fairy_dust_01")], i); return n.emit = !0, n } }, { key: "_onPauseButtonClick", value: function(e) { TweenMax.pauseAll(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "_onPauseButtonClick", this).call(this, e) } }]), t }(y["default"]);
        i["default"] = v }, { "../../Common": 13, "../../MinigameScene": 28, "./Hud": 153, "./Ivandoe": 154 }],
    156: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Actor"),
            _ = n(u),
            h = e("../../Common"),
            c = n(h),
            d = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    i._world = e, i._dead = !1; var n = new PIXI.Container; return i.addChild(n), i._view = new PIXI.spine.Spine(c["default"].assets.spineData("bert_front")), i._view.scale.set(.4), i._view.skeleton.setToSetupPose(), i._view.skeleton.setSkin(null), i._view.skeleton.setSkinByName("default"), i._view.state.setAnimation(0, "idle_fly", !0), i._view.autoUpdate = !1, i._view.update(0), n.addChild(i._view), i._skipFrame = 0, i._view.state.data.setMix("idle_fly", "fly_determined_fast", .1), i._view.state.data.setMix("idle_fly", "fly_determined", .1), i._view.state.data.setMix("fly_determined", "fly_determined_fast", .1), i._animationDelay = P3.math.random(3, 6), i.init(), i } return s(t, e), r(t, [{ key: "init", value: function() { TweenMax.to(this._view, 1, { y: this._view.y + 50, ease: Sine.easeInOut, yoyo: !0, repeat: -1 }), TweenMax.fromTo(this._view, 1.5, { x: -50 }, { x: 100, ease: Sine.easeInOut, yoyo: !0, repeat: -1 }), this._view.state.addListener({ event: this._onAnimationEvent.bind(this) }) } }, { key: "destroy", value: function(e) { TweenMax.killTweensOf(this._view), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "update", value: function(e, t) { this.x = t.x, this._skipFrame++ % 2 === 0 && this._view.update(2 * e), this._dead || (this._animationDelay -= e, this._animationDelay < 0 && this._switchAnimation()) } }, { key: "death", value: function() { this._view.state.setAnimation(0, "react_fly_lose", !0), this._dead = !0, TweenMax.killTweensOf(this._view) } }, { key: "_switchAnimation", value: function() { var e = ["fly_determined", "fly_determined_fast", "idle_fly"];
                        this._view.state.setAnimation(0, e[P3.math.randomInt(0, e.length - 1)], !0), this._animationDelay = P3.math.random(3, 6) } }, { key: "_playFlapSFX", value: function() { c["default"].audio.playSound(["sfx_flap_00", "sfx_flap_01"]) } }, { key: "_onAnimationEvent", value: function(e, t) { "sfx_flap" === t.data.name && this._playFlapSFX() } }]), t }(_["default"]);
        i["default"] = d }, { "../../Actor": 4, "../../Common": 13 }],
    157: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("../../Common"),
            u = n(l),
            _ = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e.init(), e } return s(t, e), r(t, [{ key: "init", value: function() { this.createLivesPanel(), this.initScorePanel("minigame_icon_ep3_1"), this.initHiScorePanel(), this._createPauseButton() } }, { key: "resize", value: function() { this._lives.x = .5 * (u["default"].STAGE_WIDTH - P3.View.width), this._lives.y = 30, this._score.x = .5 * (u["default"].STAGE_WIDTH - P3.View.width) + 80, this._score.y = this._lives.y, this._hiscore.x = .5 * u["default"].STAGE_WIDTH, this._hiscore.y = 60, this._pauseButton.x = .5 * (u["default"].STAGE_WIDTH + P3.View.width) - 100, this._pauseButton.y = 100 } }, { key: "createLivesPanel", value: function() { this._lives = new PIXI.Container, this._lives.visible = !1, this.addChild(this._lives); var e = new PIXI.Sprite(u["default"].assets.texture("minigame_lives_panel"));
                        this._lives.addChild(e), this._lives.icons = []; for (var t = 0; t < 3; t++) { var i = new PIXI.Sprite(u["default"].assets.texture("minigame_lives_icon_00" + (t + 1) + "_on"));
                            i.anchor.set(.5), i.x = 70 + 55 * t, i.y = 40, this._lives.addChild(i), this._lives.icons.push(i) } } }, { key: "setLives", value: function(e) { this._lives.visible = !1; for (var t = 0; t < this._lives.icons.length; t++) this._lives.icons[t].texture = u["default"].assets.texture("minigame_lives_icon_00" + (t + 1) + "_" + (t < e ? "on" : "off")) } }, { key: "initScorePanel", value: function(e) { this._score = new PIXI.Container, this._score.visible = !1, this.addChild(this._score); var t = new PIXI.Sprite(u["default"].assets.texture("minigame_generic_panel"));
                        this._score.addChild(t); var i = new PIXI.Sprite(u["default"].assets.texture(e));
                        this._score.addChild(i), webfont ? (this._score.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "left", fill: 16777215 }), this._score.label.x = 110, this._score.label.y = 60, this._score.label.anchor.set(.5), this._score.addChild(this._score.label)) : (this._score.label = new PIXI.extras.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), this._score.label.x = 110, this._score.label.y = 66, this._score.label.anchor.set(.5), this._score.addChild(this._score.label)) } }, { key: "setScore", value: function(e) { this._score.visible = !0, this._score.label.text = "" + e } }, { key: "initHiScorePanel", value: function() { this._hiscore = new PIXI.Container, this._hiscore.visible = !1, this.addChild(this._hiscore); var e = new PIXI.Sprite(u["default"].assets.texture("minigame_generic_panel"));
                        e.anchor.set(.5), this._hiscore.addChild(e); var t = new PIXI.Sprite(u["default"].assets.texture("minigame_icon_best"));
                        t.anchor.set(.5), this._hiscore.addChild(t), webfont ? (this._hiscore.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "center", fill: 16777215 }), this._hiscore.label.y = 15, this._hiscore.label.anchor.set(.5), this._hiscore.addChild(this._hiscore.label)) : (this._hiscore.label = new PIXI.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), this._hiscore.label.y = 18, this._hiscore.label.anchor.set(.5), this._hiscore.addChild(this._hiscore.label)) } }, { key: "setHiScore", value: function(e) { this._hiscore.visible = !0, this._hiscore.label.text = e.toString() } }, { key: "_createPauseButton", value: function() { var e = u["default"].assets,
                            t = new P3.ButtonStates;
                        t.normal = e.texture("btn_primary_small_off"), t.over = e.texture("btn_primary_small_over"), t.down = e.texture("btn_primary_small_over"), t.icon = e.texture("icon_help"), this._pauseButton = new P3.Button(t), this.addChild(this._pauseButton) } }, { key: "pauseButton", get: function() { return this._pauseButton } }]), t }(PIXI.Container);
        i["default"] = _ }, { "../../Common": 13 }],
    158: [function(e, t, i) { arguments[4][107][0].apply(i, arguments) }, { "../../Common": 13, dup: 107 }],
    159: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Actor"),
            _ = n(u),
            h = e("../../Common"),
            c = n(h),
            d = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    i._world = e, i._velocity = new P3.Vector2(300, 0), i._velocityMulti = 1, i._dead = !1, i._falling = !1, i._hit = !1, i._shadow = new PIXI.Sprite(c["default"].assets.texture("shadow")), i._shadow.anchor.set(.5), i._shadow.alpha = 1, i._shadow.scale.set(1.3), i.addChildAt(i._shadow, 0); var n = new PIXI.Container;
                    i.addChild(n), i._view = new PIXI.spine.Spine(c["default"].assets.spineData("ivandoe_front")), i._view.scale.set(.4), i._view.skeleton.setToSetupPose(), i._view.skeleton.setSkin(null), i._view.skeleton.setSkinByName("standard"), i._view.stateData.defaultMix = .15, i._view.autoUpdate = !1, i._view.update(0), n.addChild(i._view), i._skipFrame = 0; for (var s = ["swordstrike_hit", "swordstrike_walk", "swordstrike_miss", "swordstrike_lose", "swordplay_lose"], r = 0; r < s.length; r++)
                        for (var l = 0; l < s.length; l++) r != l && i._view.state.data.setMix(s[r], s[l], .1); return i._collisionBox = new PIXI.Rectangle((-40), (-240), 80, 240), i.faceDirection(1), i } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this.idle(), this._view.state.addListener({ event: this._onAnimationEvent.bind(this) }) } }, { key: "destroy", value: function(e) { this._animationTimeline && this._animationTimeline.kill(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "update", value: function(e, t) { this._dead || (this.x += this._velocity.x * this._velocityMulti * e), this.y = this._world.getGroundY(this.x), this._collisionGraphic && (this._collisionGraphic.x = this._view.x, this._collisionGraphic.y = this._view.y), this._skipFrame++ % 2 === 0 && this._view.update(2 * t) } }, { key: "idle", value: function() { this._velocityMulti = 0, this._velocity.y = 0, this._view.state.setAnimation(0, "idle_posing_1", !0) } }, { key: "drawSword", value: function() { this._dead || this._view.state.setAnimation(0, "draw_sword", !1, 0) } }, { key: "walk", value: function() { this._dead || (this._velocityMulti = 1, this._view.state.setAnimation(0, "swordstrike_walk", !0), this._isRunning = !1) } }, { key: "run", value: function() { this._dead || (this._view.state.setAnimation(0, "swordstrike_run", !0), this._isRunning = !0) } }, { key: "strike", value: function() { this._dead || (this._view.state.setAnimation(0, "swordstrike_hit", !1, 0), this._isRunning ? this._view.state.addAnimation(0, "swordstrike_run", !0, 0) : this._view.state.addAnimation(0, "swordstrike_walk", !0, 0)) } }, { key: "miss", value: function() { this._dead || (this._view.state.setAnimation(0, "swordstrike_miss", !1, 0), this._view.state.addAnimation(0, "swordstrike_walk", !0, 0)) } }, { key: "hit", value: function() { this._dead || (this._view.state.setAnimation(0, "swordstrike_lose", !1, 0), this._velocityMulti = 0, this._hit = !0, this._animationTimeline = new TimelineMax({ onCompleteScope: this, onComplete: function() { this._hit = !1, this._velocityMulti = 1, this._view.state.setAnimation(0, "swordstrike_walk", !0, 0) } }), this._animationTimeline.to(this, .7, { x: this.x - 200, ease: Linear.easeNone }, 0), c["default"].audio.playSound("vo_bert_pain_00")) } }, { key: "death", value: function() { this._dead || (this._view.state.setAnimation(0, "swordstrike_lose", !1, 0), this._velocityMulti = 0, this._velocity = 0, this._dead = !0, this._animationTimeline = new TimelineMax({ onCompleteScope: this, onComplete: function() { this._view.state.addAnimation(0, "swordplay_lose", !0, 0) } }), this._animationTimeline.to(this, 16 / 30, { x: this.x - 200, ease: Linear.easeNone }, 0), c["default"].audio.playSound("vo_bert_yelp_00"), c["default"].audio.playSound("sfx_smackdown_00")) } }, { key: "collide", value: function(e) { var t = this.collisionBox; return !(e.x + e.width < t.x) && (!(e.x > t.x + this._collisionBox.width) && (!(e.y + e.height < t.y) && !(e.y > t.y + this._collisionBox.height))) } }, { key: "increaseVelocity", value: function(e) { this._velocity.x += e } }, { key: "_playFootstepSFX", value: function() { c["default"].audio.playSound(["sfx_footstep_00", "sfx_footstep_01", "sfx_footstep_02", "sfx_footstep_03", "sfx_footstep_04"]) } }, { key: "_onAnimationEvent", value: function(e, t) { "sfx_footstep" === t.data.name && this._playFootstepSFX() } }, { key: "isGrounded", get: function() { return this._isGrounded } }, { key: "isHit", get: function() { return this._hit } }, { key: "isDead", get: function() { return this._dead } }, { key: "collisionBox", get: function() { return new PIXI.Rectangle(this.x + this._view.x + this._collisionBox.x, this.y + this._view.y + this._collisionBox.y, this._collisionBox.width, this._collisionBox.height) } }]), t }(_["default"]);
        i["default"] = d }, { "../../Actor": 4, "../../Common": 13 }],
    160: [function(e, t, i) {
        "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) {
            if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !t || "object" != typeof t && "function" != typeof t ? e : t
        }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 });
        var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Actor"),
            _ = n(u),
            h = e("../../Common"),
            c = n(h),
            d = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    i._world = e, i._type = "obstacle", i._popup = !1; var n = P3.math.randomInt(1, 4); return Math.random() < .1 && (i.isSpeedup = !0, n = 5), i._sprite = new PIXI.Sprite(c["default"].assets.texture("ep3_swordStrike/target_00" + n)), i._sprite.anchor.set(.5, 1), i._sprite.rotation = Math.PI / 2, i._sprite.scale.x = .25, i.addChild(i._sprite), i.interactive = !0, i._collisionBox = new PIXI.Rectangle(.25 * -i._sprite.width, (-40), .5 * i._sprite.width, 40), i.signals.attackPerformed = new signals.Signal, i } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this) } }, { key: "destroy", value: function(e) { this._popupTimeline && this._popupTimeline.kill(), this._flyTimeline && this._flyTimeline.kill(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "update", value: function(e) {} }, { key: "popup", value: function(e) { this._popup || (e = e || 2, c["default"].audio.playSound("sfx_symbol_board_turn_00"), this._popup = !0, this._popupTimeline = new TimelineMax, this._popupTimeline.to(this._sprite, e / 4, { rotation: -Math.PI / 3, ease: Quad.easeOut }, 0 * e / 4), this._popupTimeline.to(this._sprite, e / 4, { rotation: +Math.PI / 6, ease: Quad.easeInOut }, 1 * e / 4), this._popupTimeline.to(this._sprite, e / 4, { rotation: -Math.PI / 9, ease: Quad.easeInOut }, 2 * e / 4), this._popupTimeline.to(this._sprite, e / 4, { rotation: 0, ease: Quad.easeInOut }, 3 * e / 4), this._popupTimeline.to(this._sprite.scale, e / 5, { x: 1, ease: Sine.easeOut, onCompleteScope: this, onComplete: function() { this.signals.attackPerformed.dispatch(this) } }, 0)) } }, { key: "hit", value: function() { this._popupTimeline && this._popupTimeline.kill(), this._sprite.anchor.set(.5), this._sprite.y -= this._sprite.height / 2, this._flyTimeline = new TimelineMax, this._flyTimeline.to(this._sprite, 1, { rotation: 8 * Math.PI, ease: Linear.easeNone }, 0), this._flyTimeline.to(this, 1, { x: this.x + 800, y: this.y - 800, ease: Sine.easeOut }, 0) } }, { key: "collisionBox", get: function() { return new PIXI.Rectangle(this.x + this._collisionBox.x, this.y + this._collisionBox.y, this._collisionBox.width, this._collisionBox.height) } }, { key: "poppedUp", get: function() { return this._popup } }, { key: "canBeHit", get: function() { return this._sprite.rotation < 0 } }]), t }(_["default"]);
        i["default"] = d
    }, { "../../Actor": 4, "../../Common": 13 }],
    161: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function b(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : b(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Common"),
            _ = n(u),
            h = e("./Ivandoe"),
            c = (n(h), e("./World")),
            d = n(c),
            p = e("./Hud"),
            f = n(p),
            y = e("./InteractiveArea"),
            v = n(y),
            m = e("../../MinigameScene"),
            g = n(m),
            w = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._states = { GRACE: 1, INTRO: 2, GAMEPLAY: 3, GAMEOVER: 4, INACTIVE: -1 }, e._gamestate = null, e._gamestateTime = 0, e._nextGamestate = e._states.INACTIVE, e._graceDuration = 1, e._lives = 1, e._tutorial = !1, e._paused = !1, e._speedup = 0, e } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this._world = new d["default"], this.addChild(this._world), this._interactiveArea = new v["default"](1), this.addChild(this._interactiveArea), this._hud = new f["default"], this._hud.setScore(0), this._hud.setHiScore(this.highscore), this._hud.setLives(this._lives), this.addChild(this._hud), this._hud.pauseButton.signals.click.add(this._onPauseButtonClick, this) } }, { key: "destroy", value: function(e) { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, { children: !0 }) } }, { key: "resize", value: function() { this.x = .5 * (P3.View.width - _["default"].STAGE_WIDTH), this._hud.resize() } }, { key: "appear", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "appear", this).call(this), this._isFirstPlay() && this.signals.pause.dispatch(this, !0), this._nextGamestate = this._states.GRACE } }, { key: "update", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "update", this).call(this); var e = deltaTime;
                        this._paused && (e = 0); var i = e; switch (e += this._speedup, this._world.update(e, i), this._nextGamestate ? (this._gamestate = this._nextGamestate, this._gamestateTime = 0, this._nextGamestate = null) : this._gamestateTime += e, this._gamestate) {
                            case this._states.GRACE:
                                this._gamestateTime > this._graceDuration && (this._nextGamestate = this._states.INTRO); break;
                            case this._states.INTRO:
                                0 == this._gamestateTime ? this._world.avatar.drawSword() : this._gamestateTime > 1.5 && (this._nextGamestate = this._states.GAMEPLAY); break;
                            case this._states.GAMEPLAY:
                                if (0 == this._gamestateTime) this._world.changeFocusPoint(new PIXI.Point(.35, this._world.focusPoint.y), 2), this._world.changeZoom(1.25, 2), this._world.avatar.walk(), this._obstacleDelay = 2, this._obstacle = null, this._attackDelay = 0, _["default"].audio.playMusic("music_loop_quirky_01"), this._interactiveArea.getArea(0).signals.clicked.add(function() { this.strike() }.bind(this));
                                else { this._attackDelay -= e, !this._tutorial && this._obstacle && this._obstacle.canBeHit && this.tutorial(), this._obstacleDelay -= e, this._obstacleDelay <= 0 && (this._obstacleDelay = Math.max(1, P3.math.random(1.5, 3) * (1 - .75 * Math.min(1, this.score / 20))), this._world.createObstacle()); for (var n = this._world.layerMg.getObjectsOfType("obstacle"), a = 0; a < n.length; a++)
                                        if (n[a].interactive && !n[a].poppedUp) { var o = n[a].x - this._world.avatar.x; if (o > 0 && o < 400) { var s = Math.max(1.5, (2.3 - .03 * this._score) * P3.math.random(.8, 1.2));
                                                this._obstacle = n[a], this._obstacle.popup(s), this._obstacle.signals.attackPerformed.addOnce(this.characterHit, this) } } _["default"].input.isKeyPressed(32) && this.strike() } break;
                            case this._states.GAMEOVER:
                                0 == this._gamestateTime && (this._world.avatar.death(), this._world.bert.death(), _["default"].audio.stopMusic(), _["default"].audio.playSound("music_fail_stab_00")), this._gamestateTime > 3 && (this._nextGamestate = this._states.INACTIVE, this.end()) } } }, { key: "end", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "end", this).call(this), this._hud.setHiScore(this.highscore), this.playEndVO(this._score) } }, { key: "strike", value: function() { var e = this;
                        this._attackDelay > 0 || this._world.avatar.isHit || this._world.avatar.isDead || this._tutorial && (this.tutorialEnd(), this._attackDelay = .5, _["default"].audio.playSound("vo_ivandoe_swipe_0" + P3.math.randomInt(0, 3)), this._obstacle && this._obstacle.canBeHit ? (this._world.avatar.strike(), this._obstacle.hit(), this._score++, 0 !== this._speedup && this._score++, this._hud.setScore(this._score), this._obstacle.isSpeedup && 0 === this._speedup && (this._speedup = .01, this._world.avatar.run(), delay(function() { e._world.avatar.walk(), e._speedup = 0 }, 5)), _["default"].audio.playSound("sfx_symbol_board_hit_00"), this._obstacle = null) : this._world.avatar.miss()) } }, { key: "characterHit", value: function(e) { e.isSpeedup || (this._obstacle = null, this._lives--, this._hud.setLives(this._lives), this._obstacleDelay += 2, this._nextGamestate = this._states.GAMEOVER) } }, { key: "tutorial", value: function() { this._paused = !0, this._tutorial = !0, TweenMax.pauseAll(), this._initTutorialPointer(this._world), this._animatePointer({ x: this._obstacle.x, y: this._obstacle.y - this._obstacle.height / 2 }) } }, { key: "tutorialEnd", value: function() { this._paused && (this._killPointer(), this._paused = !1, TweenMax.resumeAll()) } }]), t }(g["default"]);
        i["default"] = w }, { "../../Common": 13, "../../MinigameScene": 28, "./Hud": 157, "./InteractiveArea": 158, "./Ivandoe": 159, "./World": 162 }],
    162: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function w(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : w(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Common"),
            _ = n(u),
            h = e("./Ivandoe"),
            c = n(h),
            d = e("./Bert"),
            p = n(d),
            f = e("./Obstacle"),
            y = n(f),
            v = e("./WorldLayer"),
            m = n(v),
            g = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e.inclination = 0 * PIXI.DEG_TO_RAD, e.focusTarget = null, e.focusPoint = new PIXI.Point(.5, .85), e.focusPosition = new PIXI.Point(0, 0), e.focusActive = { x: !0, y: !0 }, e.focusPointTween = null, e.zoom = 1.2, e.zoomTarget = 1, e.zoomTween = null, e._isShake = !1, e._shakeTime = 0, e._shakeTimeEnd = 1, e._shakeStrength = new PIXI.Point(10, 10), e.layers = [], e.layerBg = e.createLayer("bg", .7), e.layerBg.setBackground([_["default"].assets.texture("ep3_swordStrike_bg", "jpg")], new PIXI.Point(0, 150), 1540), e.layerMg = e.createLayer("mg", 0), e.layerMg.setBackground([_["default"].assets.texture("ep3_swordStrike/mg_001")], new PIXI.Point(0, 150)), e.avatar = new c["default"](e), e.avatar.y = e.getGroundY(0), e.layerMg.addChild(e.avatar), e.focusTarget = e.avatar, e.bert = new p["default"](e), e.bert.y = e.avatar.y - 400, e.bert.x = e.avatar.x, e.layerMg.addChild(e.bert), e.layerFg = e.createLayer("fg", -.7), e.layerFg.setBackground([_["default"].assets.texture("ep3_swordStrike/fg_001")], new PIXI.Point(0, 200)), e._particles = e.initParticles(e.layerMg), e } return s(t, e), r(t, [{ key: "update", value: function(e, t) { var i = new PIXI.Point(this.focusTarget.x, this.focusTarget.y);
                        this.avatar.update(e, t), this.bert.update(t, this.avatar), this._isShake && (this._shakeTime += e, this._shakeTime >= this._shakeTimeEnd && (this._shakeTime = 0, this._isShake = !1)), this.focusActive.x && (this.focusPosition.x = this.focusTarget.x), this.focusActive.y && (this.focusPosition.y = this.focusTarget.y), this.x = _["default"].STAGE_WIDTH * this.focusPoint.x - this.focusPosition.x * this.zoom, this.y = _["default"].STAGE_HEIGHT * this.focusPoint.y - this.focusPosition.y * this.zoom, this._isShake && (this.x += P3.math.randomInt(-1, 1) * (this._shakeStrength.x * (1 - this._shakeTime / this._shakeTimeEnd)), this.y += P3.math.randomInt(-1, 1) * (this._shakeStrength.y * (1 - this._shakeTime / this._shakeTimeEnd))), this.scale.x = this.zoom, this.scale.y = this.zoom; for (var n = new PIXI.Point(this.focusActive.x ? this.focusTarget.x - i.x : 0, this.focusActive.y ? this.focusTarget.y - i.y : 0), a = 0; a < this.layers.length; a++) this.layers[a].update(e, n);
                        this._particles && (this._particles.updateOwnerPos(this.focusPosition.x + _["default"].STAGE_WIDTH * (.5 - this.focusPoint.x), this.focusPosition.y + _["default"].STAGE_HEIGHT * (.5 - this.focusPoint.y)), this._particles.update(e)) } }, { key: "destroy", value: function(e) { this.zoomTween && this.zoomTween.kill(), this.focusPointTween && this.focusPointTween.kill(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "changeZoom", value: function(e, t, i) { null != this.zoomTween && this.zoomTween.kill(), e != this.zoom && (this.zoomTween = new TimelineMax, this.zoomTween.to(this, t, { zoom: e, ease: Sine.easeInOut }, i ? i : 0), this.zoomTarget = e) } }, { key: "changeFocusPoint", value: function(e, t, i) { null != this.focusPointTween && this.focusPointTween.kill(), this.focusPoint.x == e.x && this.focusPoint.y == e.y || (this.focusPointTween = new TimelineMax, this.focusPointTween.to(this.focusPoint, t, { x: e.x, y: e.y, ease: Sine.easeInOut }, i ? i : 0)) } }, { key: "shake", value: function(e, t) { this._isShake = !0, this._shakeTime = 0, this._shakeTimeEnd = e, this._shakeStrength = t } }, { key: "createLayer", value: function(e, t) { var i = new m["default"](this, e, t); return this.layers.push(i), this.addChild(i), i } }, { key: "createObstacle", value: function() { var e = new y["default"](this);
                        e.x = this.avatar.x + 1e3, e.y = this.getGroundY(e.x), this.layerMg.addObject(e, !0) } }, { key: "initParticles", value: function(e) { var t = _["default"].assets.json("particle_emitter_fairdust_01");
                        t.spawnRect.w = _["default"].STAGE_WIDTH, t.spawnRect.h = _["default"].STAGE_HEIGHT, t.spawnRect.x = -_["default"].STAGE_WIDTH / 2, t.spawnRect.y = -_["default"].STAGE_HEIGHT / 2; var i = new PIXI.particles.Emitter(e, [_["default"].assets.texture("particle_fairy_dust_00"), _["default"].assets.texture("particle_fairy_dust_01")], t); return i.emit = !0, i } }, { key: "getGroundY", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0; return -Math.sin(this.inclination) * e + 50 } }, { key: "rightLimit", get: function() { return this.focusPosition.x + _["default"].STAGE_WIDTH / this.zoom * (1 - this.focusPoint.x + .5) } }, { key: "leftLimit", get: function() { return this.focusPosition.x - _["default"].STAGE_WIDTH / this.zoom * (this.focusPoint.x + .5) } }]), t }(PIXI.Container);
        i["default"] = g }, { "../../Common": 13, "./Bert": 156, "./Ivandoe": 159, "./Obstacle": 160, "./WorldLayer": 163 }],
    163: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function h(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : h(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Common"),
            _ = (n(u), function(e) {
                function t(e, i, n) { a(this, t); var s = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return s._world = e, s._name = i, s._parallax = n || 0, s._backgroundTextures = null, s._backgroundDelta = new PIXI.Point(0, 0), s._backgroundWidth = 0, s._backgroundSprites = [], s._backgroundContainer = new PIXI.Container, s.addChild(s._backgroundContainer), s._objects = [], s._objectsContainer = new PIXI.Container, s.addChild(s._objectsContainer), s } return s(t, e), r(t, [{ key: "destroy", value: function(e) { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "update", value: function(e, t) { this.x += t.x * this._parallax, this.y = -Math.sin(this._world.inclination) * this.x; for (var i = this._objects.length - 1; i >= 0; i--) this._objects[i].x < this._world.leftLimit ? this.removeObject(this._objects[i]) : this._objects[i].update(e);
                        this.updateBackground() } }, { key: "updateBackground", value: function() { if (this._backgroundTextures) { for (var e = this._backgroundWidth, t = (this._backgroundTextures[0].height, 0), i = Math.floor((this._world.leftLimit - this.x) / e); i <= Math.ceil((this._world.rightLimit - this.x) / e); i++) { if (!this._backgroundSprites[t]) { var n = new PIXI.Sprite(this._backgroundTextures[0]);
                                    n.width = this._backgroundWidth, n.anchor.set(0, 1), this._backgroundSprites.push(n), this._backgroundContainer.addChild(n) } this._backgroundSprites[t].texture = this._backgroundTextures[Math.abs(i) % this._backgroundTextures.length], this._backgroundSprites[t].x = Math.floor(i * e + this._backgroundDelta.x) - 1 * i, this._backgroundSprites[t].y = Math.floor(-Math.sin(this._world.inclination) * (i * e) + this._backgroundDelta.y), t++ } for (; t < this._backgroundSprites.length; t++) this._backgroundSprites[t].visible = !1 } } }, { key: "setBackground", value: function(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : new PIXI.Point(0, 0),
                            i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0;
                        this._backgroundTextures = e, this._backgroundDelta = t, this._backgroundWidth = i || e[0].width } }, { key: "addObject", value: function(e, t) { t ? this._objectsContainer.addChildAt(e, 0) : this._objectsContainer.addChild(e), this._objects.push(e) } }, { key: "removeObject", value: function(e) { var t = this._objects.indexOf(e);
                        t != -1 && (this._objectsContainer.removeChild(e), this._objects.splice(t, 1)) } }, { key: "getObjectsOfType", value: function(e) { for (var t = [], i = this._objects.length - 1; i >= 0; i--) this._objects[i]._type == e && t.push(this._objects[i]); return t } }]), t }(PIXI.Container));
        i["default"] = _ }, { "../../Common": 13 }],
    164: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) }

        function r() { return .5 * (c["default"].STAGE_WIDTH - P3.View.width) }

        function l() { return .5 * (c["default"].STAGE_WIDTH + P3.View.width) } Object.defineProperty(i, "__esModule", { value: !0 }); var u = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            _ = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            h = e("../../Common"),
            c = n(h),
            d = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e.collisionRadius = 125, e._view = new PIXI.spine.Spine(c["default"].assets.spineData("bert_front")), e._view.state.setAnimation(0, "fly_worried_fast", !0), e._view.scale.set(.75), e._view.autoUpdate = !1, e._flyAnimation = null, e._deathAnimation = null, e.x = r() - 250, e.y = .5 * c["default"].STAGE_HEIGHT, e._startPosition = new PIXI.Point(e.x, e.y), e.addChild(e._view), e._view.state.addListener({ event: e._onAnimationEvent.bind(e) }), e.exitScene(), e } return s(t, e), u(t, [{ key: "destroy", value: function() { this._flyAnimation && (this._flyAnimation.kill(), this._flyAnimation = null), this._deathAnimation && (this._deathAnimation.kill(), this._deathAnimation = null), _(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, { removeChildren: !0 }) } }, { key: "enterScene", value: function() { var e = this; if (this._flyAnimation && (this._flyAnimation.kill(), this._flyAnimation = null), this.visible = !0, this.dead = !1, Math.random() < .5) this.dir = "right", this._flyAnimation = TweenMax.to(this, 4, { bezier: { type: "soft", values: [{ x: r() - 250, y: 350 }, { x: .25 * c["default"].STAGE_WIDTH - 150, y: 150 }, { x: .75 * c["default"].STAGE_WIDTH + 150, y: 450 }, { x: l() + 150, y: -100 }], autoRotate: ["x", "y", "rotation", 0, !0] }, ease: Power0.easeNone, onComplete: function() { return e.exitScene() } });
                        else { var t = [{ x: r() - 250, y: 575 }, { x: .45 * c["default"].STAGE_WIDTH + 150, y: 150 }, { x: .85 * c["default"].STAGE_WIDTH + 250, y: 450 }, { x: l() + 150, y: c["default"].STAGE_HEIGHT - 200 }];
                            this.dir = "left", t = t.reverse(), this._view.scale.y = -.75, this.x = c["default"].STAGE_WIDTH, this._flyAnimation = TweenMax.to(this, 4, { bezier: { type: "soft", values: t, autoRotate: ["x", "y", "rotation", 0, !0] }, ease: Power0.easeNone, onComplete: function() { return e.exitScene() } }) } } }, { key: "exitScene", value: function() { this._view.state.setAnimation(0, "fly_worried_fast", !0), this._view.scale.x = .75, this._view.scale.y = .75, this.visible = !1, this.x = this._startPosition.x, this.y = this._startPosition.y } }, { key: "death", value: function() { var e = this;
                        this._flyAnimation && (this._flyAnimation.kill(), this._flyAnimation = null), this._deathAnimation && (this._deathAnimation.kill(), this._deathAnimation = null); var t = "left" === this.dir ? 1 : -1;
                        this._deathAnimation = TweenMax.to(this, 1.25, { x: this.x - 350 * t, y: this.y + 800, ease: Power0.easeNone, onComplete: function() { return e.exitScene() } }) } }, { key: "update", value: function(e) { this._view.update(e) } }, { key: "pause", value: function() { this._flyAnimation && this._flyAnimation.pause(), this._deathAnimation && this._deathAnimation.pause() } }, { key: "resume", value: function() { this._flyAnimation && this._flyAnimation.resume(), this._deathAnimation && this._deathAnimation.resume() } }, { key: "_playFlapSFX", value: function() { c["default"].audio.playSound(["sfx_flap_00", "sfx_flap_01"]) } }, { key: "_onAnimationEvent", value: function(e, t) { "sfx_flap" === t.data.name && this._playFlapSFX() } }]), t }(PIXI.Container);
        i["default"] = d }, { "../../Common": 13 }],
    165: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("../../Common"),
            u = n(l),
            _ = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._score = null, e._time = null, e._hiscore = null, e._pauseButton = null, e.init(), e } return s(t, e), r(t, [{ key: "init", value: function() { this._createScorePanel("minigame_icon_ep4_1"), this._createHiScorePanel(), this._createTimePanel(), this._createPauseButton() } }, { key: "resize", value: function() { this._score.x = .5 * (u["default"].STAGE_WIDTH - P3.View.width) + 80, this._score.y = 10, this._time.x = .5 * (u["default"].STAGE_WIDTH - P3.View.width) + 80, this._time.y = 100, this._hiscore.x = .5 * u["default"].STAGE_WIDTH, this._hiscore.y = 60, this._pauseButton.x = .5 * (u["default"].STAGE_WIDTH + P3.View.width) - 100, this._pauseButton.y = 100 } }, { key: "_createTimePanel", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "minigame_icon_time";
                        this._time = new PIXI.Container, this._time.visible = !1, this.addChild(this._time); var t = new PIXI.Sprite(u["default"].assets.texture("minigame_generic_panel"));
                        this._time.addChild(t); var i = new PIXI.Sprite(u["default"].assets.texture(e));
                        this._time.addChild(i), webfont ? (this._time.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "left", fill: 16777215 }), this._time.label.x = 110, this._time.label.y = 60, this._time.label.anchor.set(.5), this._time.addChild(this._time.label)) : (this._time.label = new PIXI.extras.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), this._time.label.x = 110, this._time.label.y = 66, this._time.label.anchor.set(.5), this._time.addChild(this._time.label)) } }, { key: "setTime", value: function(e) { this._time.visible = !0, this._time.label.text = "" + e } }, { key: "flashScorePanel", value: function() { var e = this,
                            t = new PIXI.filters.GlowFilter(15, 0, 1, 16777215, .5);
                        this._score.filters = [t], TweenMax.to(t, .2, { outerStrength: 4, yoyo: !0, repeat: 1, onComplete: function() { e._score.filters = null } }) } }, { key: "_createScorePanel", value: function(e) { this._score = new PIXI.Container, this._score.visible = !1, this.addChild(this._score); var t = new PIXI.Sprite(u["default"].assets.texture("minigame_generic_panel"));
                        this._score.addChild(t); var i = new PIXI.Sprite(u["default"].assets.texture(e));
                        this._score.addChild(i), webfont ? (this._score.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "left", fill: 16777215 }), this._score.label.x = 110, this._score.label.y = 60, this._score.label.anchor.set(.5), this._score.addChild(this._score.label)) : (this._score.label = new PIXI.extras.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), this._score.label.x = 110, this._score.label.y = 66, this._score.label.anchor.set(.5), this._score.addChild(this._score.label)) } }, { key: "_createHiScorePanel", value: function() { this._hiscore = new PIXI.Container, this._hiscore.visible = !1, this.addChild(this._hiscore); var e = new PIXI.Sprite(u["default"].assets.texture("minigame_generic_panel"));
                        e.anchor.set(.5), this._hiscore.addChild(e); var t = new PIXI.Sprite(u["default"].assets.texture("minigame_icon_best"));
                        t.anchor.set(.5), this._hiscore.addChild(t), webfont ? (this._hiscore.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "center", fill: 16777215 }), this._hiscore.label.y = 15, this._hiscore.label.anchor.set(.5), this._hiscore.addChild(this._hiscore.label)) : (this._hiscore.label = new PIXI.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), this._hiscore.label.y = 18, this._hiscore.label.anchor.set(.5), this._hiscore.addChild(this._hiscore.label)) } }, { key: "_createPauseButton", value: function() { var e = u["default"].assets,
                            t = new P3.ButtonStates;
                        t.normal = e.texture("btn_primary_small_off"), t.over = e.texture("btn_primary_small_over"), t.down = e.texture("btn_primary_small_over"), t.icon = e.texture("icon_help"), this._pauseButton = new P3.Button(t), this.addChild(this._pauseButton) } }, { key: "setScore", value: function(e) { this._score.visible = !0, this._score.label.text = e.toString() } }, { key: "setHiScore", value: function(e) { this._hiscore.visible = !0, this._hiscore.label.text = e.toString() } }, { key: "pauseButton", get: function() { return this._pauseButton } }]), t }(PIXI.Container);
        i["default"] = _ }, { "../../Common": 13 }],
    166: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("../../Actor"),
            u = n(l),
            _ = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return i.gravity = 1e3, i.velocity = new P3.Vector2, i.angularVelocity = 0, i.collisionRadius = 54, i.sliceable = !0, i._view = new PIXI.Sprite(e), i._view.anchor = new PIXI.Point(.5, .5), i.addChild(i._view), i.bert = null, i } return s(t, e), r(t, [{ key: "update", value: function(e) { this.velocity.y += this.gravity * e, this.x += this.velocity.x * e, this.y += this.velocity.y * e, this.angularVelocity *= .99, this.rotation += this.angularVelocity * e, this.y > P3.View.height + 200 && this.destroy(), this.bert && this.bert.update(e) } }]), t }(u["default"]);
        i["default"] = _ }, { "../../Actor": 4 }],
    167: [function(e, t, i) {
        "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 });
        var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function P(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : P(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Common"),
            _ = n(u),
            h = e("./Hud"),
            c = n(h),
            d = e("./Turnip"),
            p = n(d),
            f = e("./Bert"),
            y = n(f),
            v = e("../../MinigameScene"),
            m = n(v),
            g = e("./../../Shake"),
            w = n(g),
            b = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._hudLayer = new PIXI.Container, e._gameLayer = new PIXI.Container, e._swipeTime = 0, e._swipeStart = new PIXI.Point, e._turnips = [], e._launchDelay = 1.4, e._launchCount = 0, e._launchTime = 0, e._burstDelay = .32, e._burstCount = 0, e._burstCountMax = 1, e._burstTime = e._burstDelay, e._slashVelocity = new P3.Vector2, e._slashLastPos = null, e._slashing = !1, e._time = 20, e._particles = null, e._particleHolder = new PIXI.Container, e._pickups = [], e._timeToNextPickup = P3.math.randomInt(8, 10), e._shake = new w["default"], e._pickupsShown = 0, e }
                return s(t, e), r(t, [{
                    key: "init",
                    value: function() {
                        l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this);
                        var e = _["default"].assets,
                            i = new PIXI.Sprite(e.texture("ep4_turnipNinja_bg", "jpg"));
                        i.width = 1.05 * _["default"].STAGE_WIDTH, i.scale.y = 1.05, this._gameLayer.addChild(i), this._gameLayer.pivot.set(.5 * _["default"].STAGE_WIDTH, .5 * _["default"].STAGE_HEIGHT), this._gameLayer.x = .5 * _["default"].STAGE_WIDTH, this._gameLayer.y = .5 * _["default"].STAGE_HEIGHT, this._shake.setTarget(this._gameLayer), this._shake.useRotation = !0;
                        var n = new PIXI.Point(.5 * _["default"].STAGE_WIDTH, .5 * _["default"].STAGE_HEIGHT);
                        this._shake.setRotCentre(n), this.initPickups();
                        var a = new PIXI.Container;
                        this._bert = new y["default"], a.addChild(this._bert), this._interactArea = new PIXI.Graphics, this._interactArea.interactive = !0, this._interactArea.hitArea = new PIXI.Rectangle(0, 0, P3.View.width, P3.View.height), this._interactArea.mousedown = this._interactArea.touchstart = this._onMouseDown.bind(this), this._interactArea.mousemove = this._interactArea.touchmove = this._onMouseMove.bind(this), this._interactArea.mouseup = this._interactArea.touchend = this._interactArea.touchendoutside = this._onMouseUp.bind(this), this.addChild(this._interactArea), this._hud = new c["default"], this._hud.setTime(this._time), this._hud.setScore(this.score), this._hud.setHiScore(this.highscore), this._hudLayer.addChild(this._hud), this._hud.pauseButton.signals.click.add(this._onPauseButtonClick, this), this.addChild(this._gameLayer, a, this._particleHolder, this._hudLayer), this._particles = this._initParticles(this._particleHolder)
                    }
                }, { key: "destroy", value: function() { this._interactArea.mousedown = this._interactArea.touchstart = null, this._interactArea.mousemove = this._interactArea.touchmove = null, this._interactArea.mouseup = this._interactArea.touchup = null, l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "resize", value: function() { this.x = .5 * (P3.View.width - _["default"].STAGE_WIDTH), this._interactArea.hitArea.x = .5 * (_["default"].STAGE_WIDTH - P3.View.width), this._interactArea.hitArea.width = P3.View.width, this._hud.resize() } }, { key: "pause", value: function() { this._bert && this._bert.pause() } }, { key: "resume", value: function() { this._bert && this._bert.resume() } }, { key: "appear", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "appear", this).call(this), this._isFirstPlay() && this.signals.pause.dispatch(this, !0), _["default"].audio.stopMusic() } }, { key: "update", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "update", this).call(this); var e = deltaTime;
                        this._particles.update(e), this._shake.update(e), this._bert && this._bert.update(e), this._inTut || (this._updateTurnips(e), this._grace || (this._pickups.length > 0 && this._timeToNextPickup <= 0 ? (this.dropPickup(), this._bert.enterScene(), this._timeToNextPickup = P3.math.randomInt(8, 10)) : this._timeToNextPickup -= e, this._launchTime >= this._launchDelay ? this._burstTime >= this._burstDelay ? this._burstCount++ < this._burstCountMax ? (this._burstTime = 0, this.throwTurnip(this._burstCountMax, this._burstCount)) : (this._launchTime = 0, this._burstCount = 0, ++this._launchCount % 2 === 0 && (this._burstCountMax = P3.math.randomInt(1, 4))) : this._burstTime += e : this._launchTime += e, this._time <= 0 ? this.end() : this._time -= e, this._hud.setTime(Math.round(this._time)))) } }, { key: "start", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "start", this).call(this); var e = !0;
                        e && this._tutorial(), _["default"].audio.playMusic("music_loop_frantic_fun_00") } }, { key: "end", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "end", this).call(this), this.playEndVO(this._score), this._hud.setHiScore(this.highscore), this._bert && this._bert.pause(), _["default"].audio.stopMusic(), _["default"].audio.playSound("music_fail_stab_00") } }, { key: "initPickups", value: function() { for (var e = 0; e < 5; e++) { var t = new PIXI.Container,
                                i = new PIXI.Sprite(PIXI.Texture.WHITE);
                            i.width = 75, i.height = 75, i.anchor.set(.5); var n = void 0;
                            n = webfont ? new PIXI.Text("x5", { fontSize: "48px", fontFamily: "Arial", align: "center", fill: 0 }) : new PIXI.extras.BitmapText("x5", { font: "50px Alghera Pro", align: "center" }), n.anchor.set(.5), t.addChild(i, n), t.visible = !1, t.interactive = !0, t.mousedown = t.touchstart = this._onPickupDown.bind(this), this.addChild(t), this._pickups.push(t) } } }, { key: "dropPickup", value: function() { return } }, { key: "throwTurnip", value: function(e, t) { var i = this._createTurnip(); if (e > 2) { var n = e % 6; switch (n) {
                                case 0:
                                    i.x = 0, i.y = .75 * P3.View.height + 350, i.velocity.x = 800, i.velocity.y = P3.math.random(-1240, -1080); break;
                                case 1:
                                    i.x = P3.View.width + i.view.width + 150, i.y = .75 * P3.View.height + 150, i.velocity.x = -800, i.velocity.y = P3.math.random(-800, -1e3); break;
                                case 2:
                                    t % 3 === 0 ? i.velocity.x = 0 : t % 3 === 1 ? i.velocity.x = 200 : t % 3 === 2 && (i.velocity.x = -200), i.x = .5 * _["default"].STAGE_WIDTH, i.y = P3.View.height + 200, i.velocity.y = P3.math.random(-1240, -1080); break;
                                case 3:
                                    i.x = .75 * _["default"].STAGE_WIDTH, i.y = P3.View.height + 200, i.velocity.x = P3.math.random(-400, 0), i.velocity.y = P3.math.random(-1240, -1080); break;
                                case 4:
                                    i.x = .25 * _["default"].STAGE_WIDTH, i.y = P3.View.height + 200, i.velocity.x = P3.math.random(400, 0), i.velocity.y = P3.math.random(-1240, -1080); break;
                                case 5:
                                    t % 2 === 0 ? (i.x = _["default"].STAGE_WIDTH + 100, i.velocity.x = -600) : (i.x = 0, i.velocity.x = 600), i.y = .75 * P3.View.height + 100, i.velocity.y = P3.math.random(-900, -1e3); break;
                                default:
                                    i.x = .5 * _["default"].STAGE_WIDTH + P3.math.random(-420, 420), i.y = P3.View.height + 200, i.velocity.x = .5 * _["default"].STAGE_WIDTH - i.x + P3.math.random(-140, 60), i.velocity.y = P3.math.random(-1240, -1080) } } else i.x = .5 * _["default"].STAGE_WIDTH + P3.math.random(-420, 420), i.y = P3.View.height + 200, i.velocity.x = .5 * _["default"].STAGE_WIDTH - i.x + P3.math.random(-140, 60), i.velocity.y = P3.math.random(-1240, -1080);
                        i.angularVelocity = 8 * P3.math.randomSign(), i.velocity.y -= 50, this._turnips.push(i) } }, { key: "sliceTurnip", value: function(e) { this._didSliceTurnip = !0, e.isBert || (++this._score, e.isBonus ? _["default"].audio.playSound("sfx_time_plus_five_00") : _["default"].audio.playSound("sfx_turnip_split_0" + P3.math.randomInt(0, 3))), this._hud.setScore(this.score); var t = PIXI.Texture.EMPTY,
                            i = PIXI.Texture.EMPTY; if (e.isBert) { e.bert.state.setAnimation(0, "fly_flappy_die", !0); var n = _["default"].assets,
                                a = [n.texture("particle_bert_feather_00"), n.texture("particle_bert_feather_01"), n.texture("particle_bert_feather_02")],
                                o = _["default"].assets.json("particle_emitter_bert_feathers"),
                                s = new PIXI.particles.Emitter(this._particleHolder, a, o); return s.autoUpdate = !0, s.playOnceAndDestroy(), void s.updateOwnerPos(e.x, e.y) } e.isBonus && (this._time += 5, this._hud.setTime(this._time)); var r = _["default"].assets; switch (e.view.texture) {
                            case r.texture("ep4_turnipNinja/turnip2"):
                                t = r.texture("ep4_turnipNinja/turnip2_front"), i = r.texture("ep4_turnipNinja/turnip2_back"); break;
                            case r.texture("ep4_turnipNinja/turnip4"):
                                t = r.texture("ep4_turnipNinja/turnip4_front"), i = r.texture("ep4_turnipNinja/turnip4_back"); break;
                            case r.texture("ep4_turnipNinja/plus5"):
                                t = r.texture("ep4_turnipNinja/plus5_front"), i = r.texture("ep4_turnipNinja/plus5_back") } var l = new p["default"](t);
                        l.x = e.x, l.y = e.y, l.rotation = e.rotation, l.velocity = e.velocity.clone(), l.velocity.x += P3.math.random(-200, 200), l.velocity.y += P3.math.random(-200, 200), l.angularVelocity = e.angularVelocity + P3.math.random(-20, 20), l.sliceable = !1, this._gameLayer.addChild(l), this._turnips.push(l); var u = new p["default"](i);
                        u.x = e.x, u.y = e.y, u.rotation = e.rotation, u.velocity = e.velocity.clone(), u.velocity.x += P3.math.random(-200, 200), u.velocity.y += P3.math.random(-200, 200), u.angularVelocity = e.angularVelocity + P3.math.random(-20, 20), u.sliceable = !1, this._gameLayer.addChild(u), this._turnips.push(u); var h = r.json("turnip_slice"),
                            c = null;
                        c = e.isBonus ? new PIXI.particles.Emitter(this._gameLayer, [r.texture("ep4_turnipNinja/plus5_particle_001"), r.texture("ep4_turnipNinja/plus5_particle_002"), r.texture("ep4_turnipNinja/plus5_particle_003"), r.texture("ep4_turnipNinja/plus5_particle_004")], h) : new PIXI.particles.Emitter(this._gameLayer, [r.texture("ep4_turnipNinja/turnip_particle_001"), r.texture("ep4_turnipNinja/turnip_particle_002"), r.texture("ep4_turnipNinja/turnip_particle_003"), r.texture("ep4_turnipNinja/turnip_particle_004"), r.texture("ep4_turnipNinja/turnip_particle_005"), r.texture("ep4_turnipNinja/turnip_particle_006")], h), c.autoUpdate = !0, c.updateOwnerPos(e.x, e.y), c.playOnceAndDestroy(), e.destroy() } }, { key: "_createTurnip", value: function() { var e = void 0,
                            t = _["default"].assets,
                            i = void 0; if (this._pickupsShown < 5) { var n = Math.random();
                            i = n < .5 ? 1 : n < .9 ? 3 : -1 } else i = Math.random() < .5 ? 1 : 3; var a = !1; switch (i) {
                            case 0:
                                e = t.texture("ep4_turnipNinja/turnip1"); break;
                            case 1:
                                e = t.texture("ep4_turnipNinja/turnip2"); break;
                            case 2:
                                e = t.texture("ep4_turnipNinja/turnip3"); break;
                            case 3:
                                e = t.texture("ep4_turnipNinja/turnip4"); break;
                            case -1:
                                e = t.texture("ep4_turnipNinja/plus5"), a = !0, this._pickupsShown++; break;
                            default:
                                console.warn("unknown style in _createTurnip") } var o = new p["default"](e); return o.isBonus = a, this._gameLayer.addChild(o), o } }, { key: "_createSwipeAnimation", value: function(e, t, i) { var n = _["default"].assets,
                            a = new P3.MovieClipSequence;
                        a.addTextures([n.texture("ep4_turnipNinja/swipe1"), n.texture("ep4_turnipNinja/swipe2"), n.texture("ep4_turnipNinja/swipe3"), n.texture("ep4_turnipNinja/swipe4"), n.texture("ep4_turnipNinja/swipe5"), n.texture("ep4_turnipNinja/swipe6"), n.texture("ep4_turnipNinja/swipe7"), n.texture("ep4_turnipNinja/swipe8"), n.texture("ep4_turnipNinja/swipe9"), n.texture("ep4_turnipNinja/swipe10"), n.texture("ep4_turnipNinja/swipe11"), n.texture("ep4_turnipNinja/swipe12")]); var o = new P3.MovieClip(a);
                        o.position.set(e, t), o.rotation = i, o.anchor = new PIXI.Point(.5, .5), o.animationSpeed = 80, o.play(), this._gameLayer.addChild(o) } }, { key: "_updateTurnips", value: function(e) { for (var t = this._turnips.length - 1; t >= 0; --t) { var i = this._turnips[t];
                            i.parent ? i.update(e) : this._turnips.splice(t, 1) } } }, { key: "_tutorial", value: function() { var e = this;
                        this._inTut = !1, this._initTutorialPointer(this._hudLayer), delay(function() { e._turnips[0] && !e._didSliceTurnip && (e._inTut = !0, e._animatePointer({ x: e._turnips[0].x - 70, y: e._turnips[0].y + 70 }, !0)) }, 2, this) } }, { key: "_onMouseDown", value: function(e) { this._slashing = !0; var t = e.data.getLocalPosition(this._gameLayer);
                        this._slashLastPos = new P3.Vector2(t.x, t.y), this._slashBeginPos = new PIXI.Point(t.x, t.y) } }, { key: "_onMouseUp", value: function(e) {
                        function t(e, t, i, n) { var a = n - t,
                                o = i - e; return Math.atan2(a, o) } var i = e.data.getLocalPosition(this._gameLayer),
                            n = t(this._slashBeginPos.x, this._slashBeginPos.y, i.x, i.y),
                            a = .5 * (this._slashBeginPos.x + i.x),
                            o = .5 * (this._slashBeginPos.y + i.y);
                        this._createSwipeAnimation(a, o, n), Math.random() < .4 && _["default"].audio.playSound(["vo_ivandoe_swipe_00", "vo_ivandoe_swipe_01", "vo_ivandoe_swipe_02", "vo_ivandoe_swipe_03"]), _["default"].audio.playSound(["sfx_swipe_00", "sfx_swipe_01"]), this._slashing = !1, this._slashLastPos = null } }, { key: "_onMouseMove", value: function(e) { if (this._slashing && this._running) { var t = e.data.getLocalPosition(this);
                            this._slashVelocity.set(t.x - this._slashLastPos.x, t.y - this._slashLastPos.y), this._slashLastPos = t.clone(); var i = void 0; if (this._slashVelocity.length > 20) { for (var n = 0; n < this._turnips.length; ++n)
                                    if (i = this._turnips[n], i.parent && i.sliceable) { var a = new P3.Vector2(i.x - t.x, i.y - t.y);
                                        a.length < i.collisionRadius && (this.sliceTurnip(i), this._inTut && (this._inTut = !1, this._killPointer())) } i = this._bert; var o = new P3.Vector2(i.x - t.x, i.y - t.y); if (!i.dead && o.length < i.collisionRadius) { i.dead = !0, _["default"].audio.playSound(["vo_bert_scared_00"]), this._hud.flashScorePanel(); var s = void 0;
                                    webfont ? s = new PIXI.Text("-5", { fontSize: "60px", fontFamily: "Arial", align: "left", fill: 16711680 }) : (s = new PIXI.extras.BitmapText("-5", { font: "66px Alghera Pro", align: "center" }), s.tint = 16711680), this._gameLayer.addChild(s), s.x = this._bert.x, s.y = this._bert.y, TweenMax.to(s, 2.5, { y: s.y - 175, alpha: 0, ease: Power2.easeInOut }), this._bert._view.state.setAnimation(0, "fly_flappy_die", !0); var r = _["default"].assets,
                                        l = [r.texture("particle_bert_feather_00"), r.texture("particle_bert_feather_01"), r.texture("particle_bert_feather_02")],
                                        u = _["default"].assets.json("particle_emitter_bert_feathers"),
                                        h = new PIXI.particles.Emitter(this._particleHolder, l, u);
                                    h.autoUpdate = !0, h.playOnceAndDestroy(), h.updateOwnerPos(i.x, i.y), this._bert.death(), this._score -= 3, this._score < 0 && (this._score = 0), this._shake.trauma = .5, this._hud.setScore(this.score) } } } } }, { key: "_onPickupDown", value: function(e) { e.target.visible = !1, this._time += 6 } }, { key: "_initParticles", value: function(e) { var t = _["default"].assets,
                            i = t.json("particle_emitter_fairdust_01");
                        i.spawnRect.w = _["default"].STAGE_WIDTH, i.spawnRect.h = P3.View.height; var n = new PIXI.particles.Emitter(e, [t.texture("particle_fairy_dust_00"), t.texture("particle_fairy_dust_01")], i); return n.emit = !0, n } }]), t
            }(m["default"]);
        i["default"] = b
    }, { "../../Common": 13, "../../MinigameScene": 28, "./../../Shake": 35, "./Bert": 164, "./Hud": 165, "./Turnip": 166 }],
    168: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("../../Actor"),
            u = n(l),
            _ = e("../../Common"),
            h = n(_),
            c = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return i._view = new PIXI.spine.Spine(h["default"].assets.spineData("bert_front")), i._view.y = -125, i._view.x = -175, i._view.scale.set(.75, .75), i._view.skeleton.setToSetupPose(), i._view.autoUpdate = !1, i._view.stateData.defaultMix = .2, i._view.state.setAnimation(0, "turnip_happy", !0), i._view.update(0), i._skipFrame = 0, i.incScore = e, i._view.state.addListener({ event: function(e, t) { "sfx_flap" === t.data.name && h["default"].audio.playSound(["sfx_flap_00", "sfx_flap_01"]) } }), i } return s(t, e), r(t, [{ key: "update", value: function() { this._skipFrame++ % 2 === 0 && this._view.update(2 * deltaTime) } }]), t }(u["default"]);
        i["default"] = c }, { "../../Actor": 4, "../../Common": 13 }],
    169: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("../../Common"),
            u = n(l),
            _ = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    e._base = P3.createSprite("campfire_day", e), e._base.anchor.set(.5); for (var i = u["default"].assets, n = [], s = 0; s < 16; ++s) n.push(i.texture("fx_campfire_" + P3.utils.padNum(s, 2))); var r = new P3.MovieClipSequence; return r.addTextures(n), e._flames = new P3.MovieClip(r), e._flames.y = 200, e._flames.scale = new PIXI.Point(4, 4), e._flames.anchor = new PIXI.Point(.5, .94), e._flames.animationSpeed = 8, e._flames.looping = !0, e._flames.blendMode = PIXI.BLEND_MODES.ADD, e._flames.play(), e.addChild(e._flames), e._particles = e._initParticles(), e._particles.updateOwnerPos(0, 225), e.x = .5 * u["default"].STAGE_WIDTH, e.y = P3.View.height - 225, e } return s(t, e), r(t, [{ key: "update", value: function() { this._particles.update(deltaTime) } }, { key: "_initParticles", value: function() { for (var e = u["default"].assets, t = [], i = 0; i <= 5; i++) t.push(e.texture("particle_fire_sparks_0" + i)); var n = e.json("particle_emitter_fire_sparks_00"),
                            a = new PIXI.particles.Emitter(this, t, n); return a.emit = !0, a } }, { key: "fx", get: function() { return this._flames } }]), t }(PIXI.Container);
        i["default"] = _ }, { "../../Common": 13 }],
    170: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") } Object.defineProperty(i, "__esModule", { value: !0 }); var o = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            s = e("../../Common"),
            r = n(s),
            l = e("./Turnip"),
            u = n(l),
            _ = function() {
                function e(t, i, n) { a(this, e), this._grillView = P3.createSprite(PIXI.Texture.EMPTY, t), this._grillView.anchor.set(.5, 1), this._grillView.position.set(.5 * P3.View.width, P3.View.height - 250), this._turnips = [], this._holder = t, this._bert = n, this._bertStartScale = this._bert.view.scale.x, this._endFunc = i, this._cooking = !1, this.init() } return o(e, [{ key: "init", value: function() { this._createTurnips(), this._grillView.addChild(this._bert.view) } }, { key: "update", value: function() { if (this._cooking)
                            for (var e = this._turnips.length, t = 0; t < e; t++) this._turnips[t].update() } }, { key: "resize", value: function() { this._grillView.x = .5 * r["default"].STAGE_WIDTH - 250 } }, { key: "startCooking", value: function() { this._cooking = !0; for (var e = 0; e < this._turnips.length; e++); } }, { key: "unlock", value: function() { for (var e = 0; e < this._turnips.length; e++) this._turnips[e].locked = !1 } }, { key: "endCooking", value: function() { this._cooking = !1 } }, { key: "_createTurnips", value: function() { for (var e = 9, t = r["default"].assets.texture("ep7_turnipRoast/turnip_state1"), i = 0, n = 0, a = 0; a < e; a++) { i = a % 3 * 150; var o = new u["default"](t, this._grillView, this._endFunc, this._bert);
                            o.x = i + 100, o.y = n - 370, o.anchor.set(.5), o.interactive = !0, o.pointerdown = o.touchstart = this._turnipdown.bind(this), o.id = a, o.setAnimationPos(), this._turnips.push(o), a % 3 === 2 && (n += 150), a > 2 && (o.visible = !1) } } }, { key: "_turnipdown", value: function(e) { var t = this; if (!TweenMax.isTweening(this._bert.view) && this._cooking) { this._bert.view.state.setAnimation(0, "turnip_fly_about", !0); var i = []; if (Math.random() < .2) { for (var n = 0; n < this._turnips.length; n++) this._turnips[n].visible || i.push(this._turnips[n]);
                                i.length > 0 && delay(function() { var e = i[P3.math.randomInt(0, i.length - 1)];
                                    TweenMax.from(e.scale, .25, { x: 0, y: 0 }), e.visible = !0 }, .75) } var a = e.target,
                                o = { x: a.position.x, y: a.position.y };
                            a.isReady ? a.pickReady() : TweenMax.to(this._bert.view, .2, { x: o.x, y: o.y + 15, ease: Power3.easeOut, onComplete: function() { a.flip(); var e = { x: -175, y: -125 };
                                    t._bert.view.x > 250 && (e.x = 675), TweenMax.to(t._bert.view, .2, { x: e.x, y: e.y + 35, ease: Power3.easeIn, delay: .15, onComplete: function() { t._bert.view.state.setAnimation(0, "turnip_happy", !0), t._bert.view.x > 0 ? t._bert.view.scale.x = -t._bertStartScale : t._bert.view.scale.x = t._bertStartScale } }) } }) } } }, { key: "turnips", get: function() { return this._turnips } }, { key: "grillView", get: function() { return this._grillView } }]), e }();
        i["default"] = _ }, { "../../Common": 13, "./Turnip": 172 }],
    171: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("../../Common"),
            u = n(l),
            _ = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return i._holder = e, i._pauseButton = null, i.init(), i } return s(t, e), r(t, [{ key: "init", value: function() { this._createScorePanel("minigame_icon_ep7_1"), this._createHiScorePanel(), this._createPauseButton() } }, { key: "resize", value: function() { this._score.x = .5 * (u["default"].STAGE_WIDTH - P3.View.width) + 80, this._score.y = 10, this._hiscore.x = .5 * u["default"].STAGE_WIDTH, this._hiscore.y = 60, this._pauseButton.x = .5 * (u["default"].STAGE_WIDTH + P3.View.width) - 100, this._pauseButton.y = 100 } }, { key: "_createScorePanel", value: function(e) { this._score = new PIXI.Container, this._score.visible = !1, this.addChild(this._score); var t = new PIXI.Sprite(u["default"].assets.texture("minigame_generic_panel"));
                        this._score.addChild(t); var i = new PIXI.Sprite(u["default"].assets.texture(e));
                        this._score.addChild(i), webfont ? (this._score.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "left", fill: 16777215 }), this._score.label.x = 110, this._score.label.y = 60, this._score.label.anchor.set(.5), this._score.addChild(this._score.label)) : (this._score.label = new PIXI.extras.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), this._score.label.x = 110, this._score.label.y = 66, this._score.label.anchor.set(.5), this._score.addChild(this._score.label)) } }, { key: "_createHiScorePanel", value: function() { this._hiscore = new PIXI.Container, this._hiscore.visible = !1, this.addChild(this._hiscore); var e = new PIXI.Sprite(u["default"].assets.texture("minigame_generic_panel"));
                        e.anchor.set(.5), this._hiscore.addChild(e); var t = new PIXI.Sprite(u["default"].assets.texture("minigame_icon_best"));
                        t.anchor.set(.5), this._hiscore.addChild(t), webfont ? (this._hiscore.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "center", fill: 16777215 }), this._hiscore.label.y = 15, this._hiscore.label.anchor.set(.5), this._hiscore.addChild(this._hiscore.label)) : (this._hiscore.label = new PIXI.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), this._hiscore.label.y = 18, this._hiscore.label.anchor.set(.5), this._hiscore.addChild(this._hiscore.label)) } }, { key: "setScore", value: function(e) { this._score.visible = !0, this._score.label.text = "" + e } }, { key: "setHiScore", value: function(e) { this._hiscore.visible = !0, this._hiscore.label.text = e.toString() } }, { key: "_createPauseButton", value: function() { var e = u["default"].assets,
                            t = new P3.ButtonStates;
                        t.normal = e.texture("btn_primary_small_off"), t.over = e.texture("btn_primary_small_over"), t.down = e.texture("btn_primary_small_over"), t.icon = e.texture("icon_help"), this._pauseButton = new P3.Button(t), this.addChild(this._pauseButton) } }, { key: "pauseButton", get: function() { return this._pauseButton } }]), t }(PIXI.Container);
        i["default"] = _ }, { "../../Common": 13 }],
    172: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("../../Common"),
            u = n(l),
            _ = "ep7_turnipRoast/turnip_",
            h = function(e) {
                function t(e, i, n, s, r) { a(this, t); var l = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e));
                    i.addChild(l), l._holder = i, l._id = null, l._endFunc = n, l._states = [0, 0], l._currentSide = 0, l._bert = s, l._isReady = !1, l._startTime = 0, l.minChangeTime = 3, l.maxChangeTime = 16, l._changeTime = P3.math.randomInt(l.minChangeTime, l.maxChangeTime), l._animSpeed = .2; for (var _ = u["default"].assets, h = [], c = 1; c <= 5; c++) h.push(_.texture("ep7_turnipRoast/turnip_turn_" + P3.utils.padNum(c, 3))); var d = new P3.MovieClipSequence;
                    d.addTextures(h), l._flipAnimation = new PIXI.extras.AnimatedSprite(h), l._flipAnimation.animationSpeed = l._animSpeed, l._flipAnimation.loop = !1, l._holder.addChild(l._flipAnimation), l._flipAnimation.visible = !1, l._flipAnimation.anchor.set(.5); for (var p = [], f = 0; f < 16; ++f) p.push(_.texture("fx_campfire_" + P3.utils.padNum(f, 2))); var y = new P3.MovieClipSequence; return y.addTextures(p), l._flames = new P3.MovieClip(y), l._flames.scale.set(1.5), l._flames.anchor = new PIXI.Point(.5, .94), l._flames.animationSpeed = 16, l._flames.looping = !0, l._flames.blendMode = PIXI.BLEND_MODES.ADD, l._flames.visible = !1, l._emitterSmoking = null, l._emitterBurning = null, l._delayTime = Number.POSITIVE_INFINITY, l._initParticles(), l.addChild(l._flames), l.locked = !0, l._startTime = 0, l } return s(t, e), r(t, [{ key: "setAnimationPos", value: function() { this._flipAnimation.x = this.x, this._flipAnimation.y = this.y } }, { key: "update", value: function() { this.visible && !this.locked && (this._startTime += deltaTime, this._startTime > this._changeTime && (this._startTime = 0, this._changeTime = P3.math.randomInt(this.minChangeTime, this.maxChangeTime), this.minChangeTime > 2 && (this.minChangeTime -= .01), this.maxChangeTime > 5 && (this.maxChangeTime -= .01), this.changeState()), this._emitterSmoking.update(deltaTime), this._emitterBurning.update(deltaTime), this._emitterBurnt.update(deltaTime)) } }, { key: "changeState", value: function() { var e = this;
                        this.visible && !this.locked && (this._emitterSmoking.emit = !0, this._emitterBurning.emit = !1, this._emitterSmoking.cleanup(), this._states[this._currentSide]++, 0 === this._currentSide ? (0 === this._states[1] && 0 === this._states[0] && (this.texture = u["default"].assets.texture(_ + "state1")), 1 === this._states[1] && 0 === this._states[0] && (this.texture = u["default"].assets.texture(_ + "state3")), 0 === this._states[1] && 1 === this._states[0] && (this.texture = u["default"].assets.texture(_ + "state2"), this._emitterSmoking.emit = !0, delay(function() { e._emitterSmoking.emit = !1, e._emitterSmoking.cleanup(), e._startSmoking(0 === e._currentSide) }, this._changeTime / 1e3 * .5, this)), 1 === this._states[1] && 1 === this._states[0] && (this.texture = u["default"].assets.texture(_ + "state4"), this._isReady = !0, this._emitterSmoking.emit = !0, delay(function() { e._emitterSmoking.cleanup(), e._startSmoking(!0) }, this._changeTime / 1e3 * .5, this))) : (0 === this._states[0] && 0 === this._states[1] && (this.texture = u["default"].assets.texture(_ + "state1")), 1 === this._states[0] && 0 === this._states[1] && (this.texture = u["default"].assets.texture(_ + "state3")), 0 === this._states[0] && 1 === this._states[1] && (this.texture = u["default"].assets.texture(_ + "state2"), this._emitterSmoking.emit = !0, delay(function() { e._emitterSmoking.cleanup(), e._startSmoking(1 === e._currentSide) }, this._changeTime / 1e3 * .5, this)), 1 === this._states[0] && 1 === this._states[1] && (this.texture = u["default"].assets.texture(_ + "state4"), this._isReady = !0, this._emitterSmoking.emit = !0, delay(function() { e._emitterSmoking.emit = !1, e._emitterSmoking.cleanup(), e._startSmoking(!0) }, this._changeTime / 1e3 * .5, this))), this._states[this._currentSide] >= 2 && (this.ignite(), this._endFunc())) } }, { key: "_startSmoking", value: function(e) { e && (1 !== this._states[0] && 1 !== this._states[1] || (this._emitterBurning.emit = !0, this._emitterSmoking.emit = !1)) } }, { key: "pickReady", value: function() { var e = this;
                        u["default"].audio.playSound("vo_bert_relief_00"), this._bert.view.state.setAnimation(0, "turnip_fly_about", !0), this._emitterSmoking.emit = !1, this._emitterBurning.emit = !1, this._isReady = !1, this._states[0] = 0, this._states[1] = 0, this._currentSide = 0; var t = new PIXI.Point(this._bert.view.x, this._bert.view.y);
                        TweenMax.to(this._bert.view, .25, { x: this.x, y: this.y, ease: Power3.easeOut, onComplete: function() { e.texture = u["default"].assets.texture(_ + "state1"); var i = P3.createSprite("ep7_turnipRoast/turnip_state4");
                                i.x = e._bert.view.x, i.y = e._bert.view.y, i.anchor.set(.5), e._holder.addChild(i), e._bert.view.state.setAnimation(0, "turnip_remove", !1), e._bert.view.state.addAnimation(0, "turnip_fly_about", !0, 0), TweenMax.from(e.scale, .25, { x: 0, y: 0 }), TweenMax.to(i, .45, { x: -300 + P3.math.randomInt(-60, 60), rotation: (Math.random() - .5) * Math.PI * 2, ease: Power0.easeNone }), TweenMax.to(i, .125, { y: i.y - 135, ease: Power3.easeOut, onComplete: function() { TweenMax.to(i, .325, { y: 125, ease: Power3.easeIn, onComplete: function() { TweenMax.to(i, .15, { y: i.y + 25, ease: Bounce.easeOut }) } }) } }); var n = u["default"].distance(e._bert.view.x, e._bert.view.y, t.x, t.y),
                                    a = 4e3,
                                    o = n / a;
                                TweenMax.to(e._bert.view, o, { x: t.x, y: t.y, ease: Power3.easeIn, onComplete: function() { e._bert.view.state.setAnimation(0, "turnip_happy", !0) } }) } }), this._bert.incScore() } }, { key: "flip", value: function() { var e = this;
                        this._emitterSmoking.emit = !1, this._emitterBurning.emit = !1, (this._states[0] > 0 || this._states[1] > 0) && this._states[0] < 2 && this._states[1] < 2 && (0 === this._currentSide ? this._currentSide = 1 : this._currentSide = 0, this.visible = !1, this._flipAnimation.visible = !0, 0 === this._currentSide ? (this._flipAnimation.animationSpeed = -this._animSpeed, this._flipAnimation.gotoAndPlay(4)) : (this._flipAnimation.animationSpeed = this._animSpeed, this._flipAnimation.gotoAndPlay(0)), delay(function() { e.visible = !0, e._flipAnimation.visible = !1 }, .5, this), 0 === this._currentSide ? 1 === this._states[1] && 0 === this._states[0] ? this.texture = u["default"].assets.texture(_ + "state3") : 0 === this._states[1] && 1 === this._states[0] && (this.texture = u["default"].assets.texture(_ + "state2")) : 1 === this._states[0] && 0 === this._states[1] ? this.texture = u["default"].assets.texture(_ + "state3") : 0 === this._states[0] && 1 === this._states[1] && (this.texture = u["default"].assets.texture(_ + "state2"))) } }, { key: "ignite", value: function() { this.visible && !this.locked && (u["default"].audio.playSound(["vo_bert_scared_00", "vo_bert_scared_01"]), this._emitterBurning.emit = !1, this._emitterSmoking.emit = !1, this._emitterBurnt.emit = !0, this._emitterBurnt.update(2), this.texture = u["default"].assets.texture(_ + "state5"), this._flames.visible = !0, this._flames.play()) } }, { key: "_initParticles", value: function() { var e = u["default"].assets,
                            t = e.json("particle_turnip_smoke_cooking_00");
                        this._emitterSmoking = new PIXI.particles.Emitter(this, [e.texture("particle_smoke_00")], t), this._emitterSmoking.emit = !0, t = e.json("particle_turnip_smoke_danger_00"), this._emitterBurning = new PIXI.particles.Emitter(this, [e.texture("particle_smoke_01")], t), this._emitterBurning.emit = !1, t = e.json("particle_turnip_smoke_burnt_00"), this._emitterBurnt = new PIXI.particles.Emitter(this, [e.texture("particle_smoke_01")], t), this._emitterBurnt.emit = !1 } }, { key: "delay", value: function(e, t) { e || console.error("no callback passed to delay"), this._delayTime = t, this._delayCB = e } }, { key: "updateDelay", value: function() { this._delayTime -= deltaTime, this._delayTime <= 0 && (this._delayTime = Number.POSITIVE_INFINITY, this._delayCB()) } }, { key: "id", get: function() { return this._id }, set: function(e) { this._id = e } }, { key: "isReady", get: function() { return this._isReady }, set: function(e) { this._isReady = e } }, { key: "startTime", set: function(e) { this._startTime = e } }]), t }(PIXI.Sprite);
        i["default"] = h }, { "../../Common": 13 }],
    173: [function(e, t, i) {
        "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 });
        var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function P(e, t, i) {
                null === e && (e = Function.prototype);
                var n = Object.getOwnPropertyDescriptor(e, t);
                if (void 0 === n) {
                    var a = Object.getPrototypeOf(e);
                    return null === a ? void 0 : P(a, t, i)
                }
                if ("value" in n) return n.value;
                var o = n.get;
                if (void 0 !== o) return o.call(i)
            },
            u = e("../../Common"),
            _ = n(u),
            h = e("./Hud"),
            c = n(h),
            d = e("./Grill"),
            p = n(d),
            f = e("./Bert"),
            y = n(f),
            v = e("./FireFX"),
            m = n(v),
            g = e("../../MinigameScene"),
            w = n(g),
            b = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._bgHolder = new PIXI.Container, e._primaryHolder = new PIXI.Container, e._uiHolder = new PIXI.Container, e._hud = new c["default"](e._uiHolder), e._bg = P3.createSprite("ep7_turnipRoast_bg", e._bgHolder), e._bg.width = _["default"].STAGE_WIDTH, e._bert = new y["default"](e.incScore.bind(e)), e._grill = new p["default"](e._primaryHolder, e._gameOver.bind(e), e._bert), e._fire = new m["default"], e._fireLoop = null, e._skipFrame = 0, e } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this._primaryHolder.addChild(this._fire), this._uiHolder.addChild(this._hud), this.addChild(this._bgHolder, this._primaryHolder, this._uiHolder); var e = new PIXI.Sprite(_["default"].assets.texture("ep7_turnipRoast/turnip_frame"));
                        e.position.set(.5 * _["default"].STAGE_WIDTH, 450), e.anchor.set(.5), this._bgHolder.addChild(e), this._ivandoe = new PIXI.spine.Spine(_["default"].assets.spineData("ivandoe_front")), this._ivandoe.skeleton.setToSetupPose(), this._ivandoe.autoUpdate = !1, this._ivandoe.skeleton.setSkin(null), this._ivandoe.skeleton.setSkinByName("standard"), this._ivandoe.stateData.defaultMix = .2, this._ivandoe.state.setAnimation(0, "idle_turnip_eating", !0), this._ivandoe.update(0), this._ivandoe.scale.set(.45), this._ivandoe.x = .5 * _["default"].STAGE_WIDTH - 555, this._ivandoe.y = .5 * _["default"].STAGE_HEIGHT + 275, this._bgHolder.addChild(this._ivandoe), this._hud.setScore(this.score), this._hud.setHiScore(this.highscore), this._hud.pauseButton.signals.click.add(this._onPauseButtonClick, this), console.log("turnip init") } }, { key: "destroy", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "resize", value: function() { this.x = .5 * (P3.View.width - _["default"].STAGE_WIDTH), this._hud.resize(), this._grill.resize() } }, { key: "pause", value: function() { this._fireLoop && this._fireLoop.stop() } }, { key: "resume", value: function() { this._fireLoop && this._fireLoop.play() } }, { key: "update", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "update", this).call(this), this._fire.update(), this._bert.update(), this._grace || this._inTut || this._grill.update(), this._skipFrame++ % 2 === 0 && this._ivandoe.update(2 * deltaTime) } }, { key: "appear", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "appear", this).call(this), this._isFirstPlay() && this.signals.pause.dispatch(this, !0), _["default"].audio.playSound("vo_bert_cough_00"), this._fireLoop = _["default"].audio.playSound("sfx_fire_loop_00", { loop: !0 }) } }, { key: "start", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "start", this).call(this), this._isFirstPlay() ? this._tutorial() : (this._grill.unlock(), this._bert.view.state.setAnimation(0, "fly_determined_fast", !0), this._grill.startCooking()), _["default"].audio.playMusic("music_loop_frantic_fun_00") } }, { key: "end", value: function() { this._fire.fx.stop(), this._fireLoop && this._fireLoop.stop && this._fireLoop.stop(), this._hud.setHiScore(this.highscore), _["default"].audio.stopMusic(), _["default"].audio.playSound("music_fail_stab_00"), this._running = !1, l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "end", this).call(this), this.playEndVO(this._score) } }, { key: "_gameOver", value: function() { var e = this;
                        this._gameover || (this._gameover = !0, this._bert.view.state.setAnimation(0, "turnip_lose", !0), this._grill.endCooking(), delay(function() { e.end() }, 2, this)) } }, { key: "incScore", value: function() { this._score++, this._hud.setScore(this.score) } }, { key: "_tutorial", value: function() { var e = this;
                        this._inTut = !0, this._initTutorialPointer(this._grill.grillView); var t = this._grill.turnips[0];
                        t.changeState(), this._animatePointer({ x: t.x + 75, y: t.y + 75 }), this._grill.grillView.interactive = !0, this._grill.grillView.mousedown = this._grill.grillView.touchstart = function() { e._grill.unlock(), e._bert.view.state.setAnimation(0, "fly_determined_fast", !0), e._grill.startCooking(), e._inTut = !1, e._grill.grillView.interactive = !1, e._killPointer(), e._grill._turnipdown({ target: t }) } } }]), t }(w["default"]);
        i["default"] = b
    }, { "../../Common": 13, "../../MinigameScene": 28, "./Bert": 168, "./FireFX": 169, "./Grill": 170, "./Hud": 171 }],
    174: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Actor"),
            _ = n(u),
            h = e("../../Common"),
            c = n(h),
            d = function(e) {
                function t(e, i) { a(this, t); var n = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    n._particleHolder = i, n.signals.show = new signals.Signal, n.signals.hide = new signals.Signal, n.signals.slap = new signals.Signal, n._hidden = !0, n._hideTimer = null, n._view = new PIXI.Sprite(e), n._view.x = -n._view.texture.width, n._view.anchor = new PIXI.Point(0, .5), n._view.visible = !1, n.addChild(n._view); var s = 180,
                        r = 280; return n._view.mask = new PIXI.Graphics, n._view.mask.rotation = .5 * Math.PI, n._view.mask.beginFill(16711680, .5), n._view.mask.drawRect(.5 * -s, -r, s, r), n._view.mask.endFill(), n.addChild(n._view.mask), n._activeTween = null, n.isPickup = !1, n } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this.mousedown = this.touchstart = this._onClick.bind(this), this.isPickup || this.show(!0) } }, { key: "initParticles", value: function() { var e = c["default"].assets,
                            t = e.json("particle_emitter_gnome_hit"),
                            i = new PIXI.particles.Emitter(this._particleHolder, [e.texture("particle_star_reward")], t);
                        i.emit = !1, i.updateOwnerPos(this.emitterLocation.x, this.emitterLocation.y), this._emitter = i } }, { key: "destroy", value: function() { TweenMax.killTweensOf(this._view.scale), this.signals.show.dispose(), this.signals.hide.dispose(), this.signals.slap.dispose(), this.click = this.tap = null, this._hideTimer && (this._hideTimer.kill(), this._hideTimer = null), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this) } }, { key: "animate", value: function() { TweenMax.killTweensOf(this._view.scale), this._view.scale.y = 1, this._activeTween = TweenMax.to(this._view.scale, .2, { y: .94, ease: Power2.easeInOut, yoyo: !0, repeat: -1, onComplete: function() { this._activeTween = null } }), this.scene.addTween(this._activeTween) } }, { key: "show", value: function(e) { TweenMax.killTweensOf(this._view); var t = e ? .45 : .22;
                        this._activeTween = TweenMax.to(this._view, t, { x: 0, ease: Back.easeOut, easeParams: [.6], onStart: function() { this._view.visible = !0, this._hidden = !1 }, onStartScope: this, onComplete: function() { this.interactive = !0, this.buttonMode = !0, this.hide(P3.math.random(.2, 1)), this._activeTween = null }, onCompleteScope: this }), this.scene.addTween(this._activeTween), this.signals.show.dispatch(this) } }, { key: "hide", value: function() { var e = this,
                            t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0,
                            i = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
                        TweenMax.killTweensOf(this._view); var n = this._view.scale.x,
                            a = this._view.scale.y;
                        TweenMax.to(this._view.scale, .1, { x: n + .1, y: a + .1, yoyo: !0, repeat: 1, onComplete: function() { e._activeTween = TweenMax.to(e._view, .14, { delay: t, x: -e._view.texture.width, ease: Back.easeIn, easeParams: [.6], onStart: function() { this._hideTimer && (this._hideTimer.kill(), this._hideTimer = null), this.interactive = !1, this.buttonMode = !1 }, onStartScope: e, onComplete: function() { this._view.visible = !1, this._activeTween = null, this._hidden = !0, i || c["default"].audio.playSound(["vo_gnome_snigger_00", "vo_gnome_snigger_01", "vo_gnome_snigger_02", "vo_gnome_snigger_03", "vo_gnome_snigger_04", "vo_gnome_snigger_05", "vo_gnome_snigger_06", "vo_gnome_snigger_07", "vo_gnome_snigger_08", "vo_gnome_snigger_09", "vo_gnome_snigger_10", "vo_gnome_snigger_11", "vo_gnome_snigger_12"]) }, onCompleteScope: e }), e.scene.addTween(e._activeTween), e.signals.hide.dispatch(e) } }) } }, { key: "_onClick", value: function(e) { this.hidden || (this._hidden = !0, this.signals.slap.dispatch(this), this.hide(0, !0)) } }, { key: "hidden", get: function() { return this._hidden } }, { key: "activeTween", get: function() { return this._activeTween } }, { key: "emitter", get: function() { return this._emitter } }]), t }(_["default"]);
        i["default"] = d }, { "../../Actor": 4, "../../Common": 13 }],
    175: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("../../Common"),
            u = n(l),
            _ = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._scoreLabel = null, e._timeLabel = null, e._pauseButton = null, e.init(), e } return s(t, e), r(t, [{ key: "init", value: function() { this._createScorePanel("minigame_icon_ep8_2"), this._createHiScorePanel(), this._createTimePanel(), this._createPauseButton() } }, { key: "resize", value: function() { this._score.x = .5 * (u["default"].STAGE_WIDTH - P3.View.width) + 80, this._score.y = 10, this._time.x = .5 * (u["default"].STAGE_WIDTH - P3.View.width) + 80, this._time.y = 110, this._hiscore.x = .5 * u["default"].STAGE_WIDTH, this._hiscore.y = 60, this._pauseButton.x = .5 * (u["default"].STAGE_WIDTH + P3.View.width) - 100, this._pauseButton.y = 100 } }, { key: "_createTimePanel", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "minigame_icon_time";
                        this._time = new PIXI.Container, this._time.visible = !1, this.addChild(this._time); var t = new PIXI.Sprite(u["default"].assets.texture("minigame_generic_panel"));
                        this._time.addChild(t); var i = new PIXI.Sprite(u["default"].assets.texture(e));
                        this._time.addChild(i), webfont ? (this._time.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "left", fill: 16777215 }), this._time.label.x = 110, this._time.label.y = 60, this._time.label.anchor.set(.5), this._time.addChild(this._time.label)) : (this._time.label = new PIXI.extras.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), this._time.label.x = 110, this._time.label.y = 66, this._time.label.anchor.set(.5), this._time.addChild(this._time.label)) } }, { key: "setTime", value: function(e) { this._time.visible = !0, this._time.label.text = "" + e } }, { key: "_createScorePanel", value: function(e) { this._score = new PIXI.Container, this._score.visible = !1, this.addChild(this._score); var t = new PIXI.Sprite(u["default"].assets.texture("minigame_generic_panel"));
                        this._score.addChild(t); var i = new PIXI.Sprite(u["default"].assets.texture(e));
                        this._score.addChild(i), webfont ? (this._score.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "left", fill: 16777215 }), this._score.label.x = 110, this._score.label.y = 60, this._score.label.anchor.set(.5), this._score.addChild(this._score.label)) : (this._score.label = new PIXI.extras.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), this._score.label.x = 110, this._score.label.y = 66, this._score.label.anchor.set(.5), this._score.addChild(this._score.label)) } }, { key: "setScore", value: function(e) { this._score.visible = !0, this._score.label.text = "" + e } }, { key: "_createHiScorePanel", value: function() { this._hiscore = new PIXI.Container, this._hiscore.visible = !1, this.addChild(this._hiscore); var e = new PIXI.Sprite(u["default"].assets.texture("minigame_generic_panel"));
                        e.anchor.set(.5), this._hiscore.addChild(e); var t = new PIXI.Sprite(u["default"].assets.texture("minigame_icon_best"));
                        t.anchor.set(.5), this._hiscore.addChild(t), webfont ? (this._hiscore.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "center", fill: 16777215 }), this._hiscore.label.y = 15, this._hiscore.label.anchor.set(.5), this._hiscore.addChild(this._hiscore.label)) : (this._hiscore.label = new PIXI.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), this._hiscore.label.y = 18, this._hiscore.label.anchor.set(.5), this._hiscore.addChild(this._hiscore.label)) } }, { key: "setHiScore", value: function(e) { this._hiscore.visible = !0, this._hiscore.label.text = e.toString() } }, { key: "_createPauseButton", value: function() { var e = u["default"].assets,
                            t = new P3.ButtonStates;
                        t.normal = e.texture("btn_primary_small_off"), t.over = e.texture("btn_primary_small_over"), t.down = e.texture("btn_primary_small_over"), t.icon = e.texture("icon_help"), this._pauseButton = new P3.Button(t), this.addChild(this._pauseButton) } }, { key: "pauseButton", get: function() { return this._pauseButton } }]), t }(PIXI.Container);
        i["default"] = _ }, { "../../Common": 13 }],
    176: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function m(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : m(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Common"),
            _ = n(u),
            h = e("./Gnome"),
            c = n(h),
            d = e("./Hud"),
            p = n(d),
            f = e("../../MinigameScene"),
            y = n(f),
            v = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._overlay = null, e._bert = null, e._gnomes = [], e._showCount = 0, e._showTime = 0, e._showDelayMin = .2, e._showDelayMax = 2, e._time = 20, e._particles = null, e._particleHolder = new PIXI.Container, e._skipFrame = 0, e._bertStartScale = null, e._pickups = [], e._timeToNextPickup = P3.math.randomInt(5, 15), e._pickupsShownCount = 0, e } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this); var e = _["default"].assets,
                            i = new PIXI.Sprite(e.texture("ep8_wackagnome_bg", "jpg"));
                        i.width = _["default"].STAGE_WIDTH, this.addChild(i), i.interactive = !0, i.mousedown = i.touchstart = function() { _["default"].audio.playSound(["vo_gnome_snigger_00", "vo_gnome_snigger_01", "vo_gnome_snigger_02", "vo_gnome_snigger_03", "vo_gnome_snigger_04", "vo_gnome_snigger_05", "vo_gnome_snigger_06", "vo_gnome_snigger_07", "vo_gnome_snigger_08", "vo_gnome_snigger_09", "vo_gnome_snigger_10", "vo_gnome_snigger_11", "vo_gnome_snigger_12"]) }, this._overlay = new PIXI.Sprite(e.texture("ep8_wackagnome/mask")), this.addChild(this._overlay), this._bert = new PIXI.spine.Spine(_["default"].assets.spineData("bert_front_1")), this._bert.scale.set(2, 2), this._bert.skeleton.setToSetupPose(), this._bert.state.setAnimation(0, "idle_gnome_hit_centre", !0), this._bert.autoUpdate = !1, this._bert.update(0); var n = this._bert.stateData;
                        n.defaultMix = .2, this._bert.state.addListener({ event: function(e, t) { "sfx_flap" === t.data.name && _["default"].audio.playSound(["sfx_flap_00", "sfx_flap_01"]) } }), this._bert.x = .5 * _["default"].STAGE_WIDTH, this._bert.y = P3.View.height + 50, this._hud = new p["default"], this._hud.setTime(this._time), this._hud.setScore(this.score), this._hud.setHiScore(this.highscore), this.addChild(this._bert, this._particleHolder, this._hud), this._hud.pauseButton.signals.click.add(this._onPauseButtonClick, this); var a = this._createGnome(e.texture("ep8_wackagnome/bottom1"), new PIXI.Point(.5 * _["default"].STAGE_WIDTH - 340, 474), 164 * PIXI.DEG_TO_RAD, !0);
                        a.emitterLocation = new PIXI.Point(.5 * _["default"].STAGE_WIDTH - 445, 500), a.initParticles(); var o = this._createGnome(e.texture("ep8_wackagnome/gnome1"), new PIXI.Point(.5 * _["default"].STAGE_WIDTH - 426, 298), -50 * PIXI.DEG_TO_RAD);
                        o.emitterLocation = new PIXI.Point(.5 * _["default"].STAGE_WIDTH - 345, 195), o.initParticles(); var s = this._createGnome(e.texture("ep8_wackagnome/gnome2"), new PIXI.Point(.5 * _["default"].STAGE_WIDTH - 286, 457), -30 * PIXI.DEG_TO_RAD);
                        s.emitterLocation = new PIXI.Point(.5 * _["default"].STAGE_WIDTH - 225, 415), s.initParticles(); var r = this._createGnome(e.texture("ep8_wackagnome/bottom2"), new PIXI.Point(.5 * _["default"].STAGE_WIDTH - 210, 210), 4 * PIXI.DEG_TO_RAD, !0);
                        r.emitterLocation = new PIXI.Point(.5 * _["default"].STAGE_WIDTH - 115, 210), r.initParticles(); var u = this._createGnome(e.texture("ep8_wackagnome/gnome3"), new PIXI.Point(.5 * _["default"].STAGE_WIDTH + 48, 240), -64 * PIXI.DEG_TO_RAD);
                        u.emitterLocation = new PIXI.Point(.5 * _["default"].STAGE_WIDTH + 75, 175), u.initParticles(); var h = this._createGnome(e.texture("ep8_wackagnome/gnome4"), new PIXI.Point(.5 * _["default"].STAGE_WIDTH + 74, 438), -130 * PIXI.DEG_TO_RAD);
                        h.emitterLocation = new PIXI.Point(.5 * _["default"].STAGE_WIDTH + 15, 385), h.initParticles(); var c = this._createGnome(e.texture("ep8_wackagnome/gnome5"), new PIXI.Point(.5 * _["default"].STAGE_WIDTH + 170, 410), -52 * PIXI.DEG_TO_RAD);
                        c.emitterLocation = new PIXI.Point(.5 * _["default"].STAGE_WIDTH + 255, 345), c.initParticles(); var d = this._createGnome(e.texture("ep8_wackagnome/bottom4"), new PIXI.Point(.5 * _["default"].STAGE_WIDTH + 488, 186), 166 * PIXI.DEG_TO_RAD, !0);
                        d.emitterLocation = new PIXI.Point(.5 * _["default"].STAGE_WIDTH + 385, 210), d.initParticles(); var f = this._createGnome(e.texture("ep8_wackagnome/gnome6"), new PIXI.Point(.5 * _["default"].STAGE_WIDTH + 464, 474), -126 * PIXI.DEG_TO_RAD);
                        f.emitterLocation = new PIXI.Point(.5 * _["default"].STAGE_WIDTH + 415, 415), f.initParticles(); var y = this._createGnome(e.texture("ep8_wackagnome/plus5_target"), new PIXI.Point(.5 * _["default"].STAGE_WIDTH + 170, 410), -52 * PIXI.DEG_TO_RAD, null, !0);
                        y.emitterLocation = new PIXI.Point(.5 * _["default"].STAGE_WIDTH + 255, 345), y.initParticles(), y.pairedIndex = this._gnomes.indexOf(c), this._particles = this._initParticles(this._particleHolder), this._bertStartScale = this._bert.scale.x, this.startPos = new PIXI.Point(this._bert.x, this._bert.y), this._bert.x = 350, this._bert.y = _["default"].STAGE_HEIGHT + 350, this._bert.scale.set(.5) } }, { key: "resize", value: function() { this.x = .5 * (P3.View.width - _["default"].STAGE_WIDTH), this._hud.resize() } }, { key: "appear", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "appear", this).call(this), _["default"].audio.playSound("vo_narrator_incidental_lookoutgnomes_00"), this._isFirstPlay() && this.signals.pause.dispatch(this, !0), TweenMax.to(this._bert, .5, { x: this.startPos.x, y: this.startPos.y, ease: Power2.easeOut }), TweenMax.to(this._bert.scale, .5, { x: this._bertStartScale, y: this._bertStartScale, ease: Power2.easeOut }) } }, { key: "update", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "update", this).call(this); var e = deltaTime;
                        this._particles.update(e); for (var i = 0; i < this._gnomes.length; i++) this._gnomes[i].emitter.update(e);
                        this._skipFrame++ % 2 === 0 && this._bert.update(2 * e), this._grace || this._inTut || (this._pickups.length > 0 && this._timeToNextPickup <= 0 ? (this.dropPickup(), this._timeToNextPickup = P3.math.randomInt(5, 15)) : this._timeToNextPickup -= e, this._showTime <= 0 ? (this._showTime = P3.math.random(this._showDelayMin, this._showDelayMax), this.showGnome()) : this._showTime -= e, this._time <= 0 ? this.end() : this._time -= e, this._hud.setTime(Math.round(this._time))) } }, { key: "start", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "start", this).call(this), this._isFirstPlay() ? this._tutorial() : (this._showTime = P3.math.random(this._showDelayMin, this._showDelayMax), this.showGnome()), _["default"].audio.playMusic("music_loop_frantic_fun_00") } }, { key: "end", value: function() { _["default"].audio.stopMusic(), _["default"].audio.playSound("music_fail_stab_01"), this._hud.setHiScore(this.highscore), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "end", this).call(this), this.playEndVO(this._score) } }, { key: "pause", value: function() {} }, { key: "resume", value: function() {} }, { key: "initPickups", value: function() { return } }, { key: "dropPickup", value: function() { return } }, { key: "showGnome", value: function() { if (!(this._showCount > 5 || this.pickupActive)) { var e = this._gnomes.length; if (this._time < 5 && !this._shownPickup) { var t = this._pickups[P3.math.randomInt(0, this._pickups.length - 1)];
                                t.show(), this._shownPickup = !0 } else { for (var i = void 0; e-- > 0;)
                                    if (i = P3.utils.selectRandom(this._gnomes), i.isPickup) { if (!this.pickupActive && this._pickupsShownCount < 5 && i.hidden) break } else if (i.hidden) break;
                                i.show() } } } }, { key: "_createGnome", value: function(e, t) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0,
                            n = arguments.length > 3 && void 0 !== arguments[3] && arguments[3],
                            a = arguments.length > 4 && void 0 !== arguments[4] && arguments[4],
                            o = new c["default"](e, this._particleHolder); return o.scene = this, o.position.set(t.x, t.y), o.rotation = i, o.signals.show.add(this._onGnomeShow, this), o.signals.hide.add(this._onGnomeHide, this), o.signals.slap.add(this._onGnomeSlap, this), o.isPickup = a, a && this._pickups.push(o), n && o.animate(), this.addChildAt(o, this._overlay.parent.getChildIndex(this._overlay)), this._gnomes.push(o), o } }, { key: "_onGnomeShow", value: function(e) {++this._showCount, e.isPickup && (console.log("pickup active"), this.pickupActive = !0, this._shownPickup = !0, this._pickupsShownCount++) } }, { key: "_onGnomeHide", value: function(e) {--this._showCount, e.isPickup && (console.log("pickup inactive"), this.pickupActive = !1) } }, { key: "_onGnomeSlap", value: function(e) { this._running && (++this._score, this._hud.setScore(this.score), e.x < .4 * _["default"].STAGE_WIDTH ? this._bert.state.setAnimation(0, "idle_gnome_hit_left", !0) : e.x > .6 * _["default"].STAGE_WIDTH ? this._bert.state.setAnimation(0, "idle_gnome_hit_right", !0) : this._bert.state.setAnimation(0, "idle_gnome_hit_centre", !0), e.emitter.emit = !0, e.isPickup ? (this.pickupActive = !1, this._onPickupDown()) : _["default"].audio.playSound(["vo_gnome_poked_01", "vo_gnome_poked_03", "vo_gnome_poked_06"])) } }, { key: "_tutorial", value: function() { var e = this;
                        this._inTut = !0; var t = this._gnomes[0];
                        t.show(), this._initTutorialPointer(), this._animatePointer({ x: t.x - 55, y: t.y }), delay(function() { t.activeTween.pause() }, .15, this), t.view.interactive = !0, t.view.mousedown = t.view.touchstart = function() { t.hide(), e._inTut = !1, e._killPointer(), t.view.interactive = !1 } } }, { key: "_onPauseButtonClick", value: function(e) { this.signals.pause.dispatch(this, !1) } }, { key: "_onPickupDown", value: function() { this._time += 6, _["default"].audio.playSound("sfx_time_plus_five_00") } }, { key: "_initParticles", value: function(e) { var t = _["default"].assets,
                            i = t.json("particle_emitter_fairdust_01");
                        i.spawnRect.w = _["default"].STAGE_WIDTH, i.spawnRect.h = P3.View.height; var n = new PIXI.particles.Emitter(e, [t.texture("particle_fairy_dust_00"), t.texture("particle_fairy_dust_01")], i); return n.emit = !0, n } }]), t }(y["default"]);
        i["default"] = v }, { "../../Common": 13, "../../MinigameScene": 28, "./Gnome": 174, "./Hud": 175 }],
    177: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("../../Actor"),
            u = n(l),
            _ = e("../../Common"),
            h = n(_),
            c = function(e) {
                function t(e, i) { a(this, t); var n = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return n._bertOffset = 50, n._endFunc = i.end, n._incScoreFunc = i.score, n._view = new PIXI.spine.Spine(h["default"].assets.spineData("bert_front")), n._view.scale.set(.5, .5), n._view.skeleton.setToSetupPose(), n._view.stateData.defaultMix = .15, n._view.autoUpdate = !1, n._view.update(0), n.addChild(n._view), n._lanes = e, n._targLaneId = 1, n._target = n._lanes[n._targLaneId], n._dy = 0, n._moveSpeed = 1100, n._finish = !1, n.start = !1, n._collider = P3.utils.sprite(PIXI.Texture.WHITE, n, new PIXI.Point(.5, .5)), n.init(), n } return s(t, e), r(t, [{ key: "init", value: function() { this._collider.width = 5, this._collider.height = 75, this._collider.x = -25, this._collider.renderable = !1, this._view.state.setAnimation(0, "idle_fly_worried_mirror", !0), this.x = -300, this.y = this._lanes[2] - this._bertOffset, this._target = this._lanes[this._targLaneId] - this._bertOffset, this.update() } }, { key: "begin", value: function() { this._view.state.addListener({ event: function(e, t) { "sfx_flap" === t.data.name && h["default"].audio.playSound(["sfx_flap_00", "sfx_flap_01"]) } }), this.start = !0 } }, { key: "resize", value: function() { this.start && (this.x = 225 - .5 * (P3.View.width - h["default"].STAGE_WIDTH)) } }, { key: "update", value: function(e, t) { if (this.start) { var i = h["default"].input;
                            i.isKeyPressed(38) ? (this._view.state.setAnimation(0, "fly_worried_fast_mirror", !0), this._targLaneId--, this._targLaneId < 0 && (this._targLaneId = 0), this._target = this._lanes[this._targLaneId] - this._bertOffset) : i.isKeyPressed(40) && (this._view.state.setAnimation(0, "fly_worried_fast_mirror", !0), this._targLaneId++, this._targLaneId > 2 && (this._targLaneId = 2), this._target = this._lanes[this._targLaneId] - this._bertOffset), this.y < this._target - 10 ? this._dy = this._moveSpeed : this.y > this._target + 10 ? this._dy = -this._moveSpeed : (0 !== this._dy && this._view.state.setAnimation(0, "idle_fly_worried_mirror", !0), this._dy = 0), this.y += this._dy * deltaTime; for (var n = e.length, a = 0; a < n; a++)
                                if (e[a]) { if (h["default"].collisionOBB(e[a], this._collider)) { e[a].alive = !1, this._incScoreFunc(); var o = 900; if (e[a].isDiag ? h["default"].audio.playSound("sfx_witch_spell_deflect_03") : h["default"].audio.playSound(["sfx_witch_spell_deflect_00", "sfx_witch_spell_deflect_01", "sfx_witch_spell_deflect_02"]), Math.random() < .5) { e[a].rotation = .75 * Math.PI; var s = { x: .5 * -(P3.View.width - h["default"].STAGE_WIDTH) + .5 * P3.View.width + 375, y: -150 },
                                                r = h["default"].distance(s.x, s.y, e[a].x, e[a].y),
                                                l = r / o;
                                            TweenMax.to(e[a], l, { x: s.x, y: s.y, ease: Power0.easeNone }), TweenMax.to(e[a].scale, l, { x: .25, y: .25, ease: Power0.easeNone }) } else { e[a].rotation = .75 * -Math.PI; var u = { x: .5 * -(P3.View.width - h["default"].STAGE_WIDTH) + .5 * P3.View.width + 375, y: P3.View.height + 150 },
                                                _ = h["default"].distance(u.x, u.y, e[a].x, e[a].y),
                                                c = _ / o;
                                            TweenMax.to(e[a], c, { x: u.x, y: u.y, ease: Power0.easeNone }), TweenMax.to(e[a].scale, c, { x: .25, y: .25, ease: Power0.easeNone }) } e.splice(a, 1), this._view.state.setAnimation(0, "idle_fly_worried_mirror_hit", !1), this._view.state.addAnimation(0, "idle_fly_worried_mirror", !0, 0); break } if (h["default"].collisionOBB(e[a], t.view, null, .45)) { this._finish || (this._view.state.setAnimation(0, "idle_fly_worried_mirror_lost", !0), t.hurt(), e[a].visible = !1, this._endFunc()), this._finish = !0; break } } } } }, { key: "_animationSwitcher", value: function() {} }, { key: "input", value: function(e) { for (var t = [], i = 0; i < 3; i++) { var n = h["default"].distance(e.data.global.y, 0, this._lanes[i], 0);
                            t.push({ dist: n, lane: i }) } h["default"].sortDists(t), this._target = this._lanes[t[0].lane] - this._bertOffset, this._view.state.setAnimation(0, "fly_worried_fast_mirror", !0) } }]), t }(u["default"]);
        i["default"] = c }, { "../../Actor": 4, "../../Common": 13 }],
    178: [function(e, t, i) {
        "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 });
        var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("../../Common"),
            u = n(l),
            _ = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return i._holder = e, i._pauseButton = null, i.init(), i }
                return s(t, e), r(t, [{ key: "init", value: function() { this._createScorePanel("minigame_icon_ep4_2"), this._createHiScorePanel(), this._createPauseButton() } }, { key: "resize", value: function() { this._score.x = .5 * (u["default"].STAGE_WIDTH - P3.View.width) + 80, this._score.y = 10, this._hiscore.x = .5 * u["default"].STAGE_WIDTH, this._hiscore.y = 60, this._pauseButton.x = .5 * (u["default"].STAGE_WIDTH + P3.View.width) - 100, this._pauseButton.y = 100 } }, { key: "_createScorePanel", value: function(e) { this._score = new PIXI.Container, this._score.visible = !1, this.addChild(this._score); var t = new PIXI.Sprite(u["default"].assets.texture("minigame_generic_panel"));
                        this._score.addChild(t); var i = new PIXI.Sprite(u["default"].assets.texture(e));
                        this._score.addChild(i), webfont ? (this._score.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "left", fill: 16777215 }), this._score.label.x = 110, this._score.label.y = 60, this._score.label.anchor.set(.5), this._score.addChild(this._score.label)) : (this._score.label = new PIXI.extras.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), this._score.label.x = 110, this._score.label.y = 66, this._score.label.anchor.set(.5), this._score.addChild(this._score.label)) } }, { key: "setScore", value: function(e) { this._score.visible = !0, this._score.label.text = "" + e } }, {
                    key: "_createHiScorePanel",
                    value: function() {
                        this._hiscore = new PIXI.Container, this._hiscore.visible = !1, this.addChild(this._hiscore);
                        var e = new PIXI.Sprite(u["default"].assets.texture("minigame_generic_panel"));
                        e.anchor.set(.5), this._hiscore.addChild(e);
                        var t = new PIXI.Sprite(u["default"].assets.texture("minigame_icon_best"));
                        t.anchor.set(.5), this._hiscore.addChild(t), webfont ? (this._hiscore.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "center", fill: 16777215 }), this._hiscore.label.y = 15, this._hiscore.label.anchor.set(.5), this._hiscore.addChild(this._hiscore.label)) : (this._hiscore.label = new PIXI.BitmapText("0", {
                            font: "40px Alghera Pro",
                            align: "center"
                        }), this._hiscore.label.y = 18, this._hiscore.label.anchor.set(.5), this._hiscore.addChild(this._hiscore.label))
                    }
                }, { key: "setHiScore", value: function(e) { this._hiscore.visible = !0, this._hiscore.label.text = e.toString() } }, { key: "_createPauseButton", value: function() { var e = u["default"].assets,
                            t = new P3.ButtonStates;
                        t.normal = e.texture("btn_primary_small_off"), t.over = e.texture("btn_primary_small_over"), t.down = e.texture("btn_primary_small_over"), t.icon = e.texture("icon_help"), this._pauseButton = new P3.Button(t), this.addChild(this._pauseButton) } }, { key: "pauseButton", get: function() { return this._pauseButton } }]), t
            }(PIXI.Container);
        i["default"] = _
    }, { "../../Common": 13 }],
    179: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Actor"),
            _ = n(u),
            h = e("../../Common"),
            c = n(h),
            d = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._view = new PIXI.spine.Spine(c["default"].assets.spineData("ivandoe_front")), e._view.scale.set(.45, .45), e._view.skeleton.setToSetupPose(), e._view.skeleton.setSkin(null), e._view.skeleton.setSkinByName("standard"), e._view.state.setAnimation(0, "witch_ivan_idle1", !0), e._view.stateData.defaultMix = .15, e._view.autoUpdate = !1, e._view.update(0), e.addChild(e._view), e._view.state.addListener({ event: e._onAnimationEvent.bind(e) }), e._finish = !1, e } return s(t, e), r(t, [{ key: "hurt", value: function() { c["default"].audio.playSound("vo_ivandoe_strain_00"), c["default"].audio.playSound("sfx_witch_spell_hit_00"), this._view.state.setAnimation(0, "witch_ivan_lose", !1), this._finish = !0, TweenMax.to(this, 3, { y: this.y - 400, ease: Power0.easeNone }) } }, { key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this._changeAnim() } }, { key: "resize", value: function() {} }, { key: "_changeAnim", value: function() { var e = this;
                        this._finish || (this._view.state.setAnimation(0, "witch_ivan_idle" + P3.math.randomInt(1, 2), !0), delay(function() { e._changeAnim() }, P3.math.randomInt(2, 6), this)) } }, { key: "_playSwipeSFX", value: function() { c["default"].audio.playSound("sfx_swipe_0" + P3.math.randomInt(0, 1)) } }, { key: "_onAnimationEvent", value: function(e, t) { "sfx_swipe" === t.data.name && this._playSwipeSFX() } }, { key: "finish", set: function(e) { this._finish = e } }]), t }(_["default"]);
        i["default"] = d }, { "../../Actor": 4, "../../Common": 13 }],
    180: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Actor"),
            _ = n(u),
            h = e("../../Common"),
            c = n(h),
            d = function(e) {
                function t(e, i) { a(this, t); var n = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    n._view = new PIXI.spine.Spine(c["default"].assets.spineData("witch")), n._view.scale.set(.45, .45), n._view.skeleton.setToSetupPose(), n._view.state.setAnimation(0, "fly_idle", !0), n._view.autoUpdate = !1, n._view.stateData.defaultMix = .15, n._view.update(0), n._view.scale.x = -n._view.scale.x, n.addChild(n._view), n._holder = i, n._lanes = e, n._activeProjectiles = [], n._projectilePool = c["default"].array(25), n._projectileSpeed = 400, n._maxProjectileSpeed = 650, n._counter = -1; for (var s = c["default"].assets, r = [], l = 0; l <= 3; l++) r.push(s.texture("ep4_witchDeflect/magic_" + P3.utils.padNum(l, 2))); for (var u = [], _ = 0; _ <= 3; _++) u.push(s.texture("ep4_witchDeflect/magic_diagonal_" + P3.utils.padNum(_, 2))); return n._emitter = function() { for (var e = 0; e < n._projectilePool.length; e++) e < 3 ? (n._projectilePool[e] = new PIXI.extras.AnimatedSprite(u), n._projectilePool[e].isDiag = !0) : n._projectilePool[e] = new PIXI.extras.AnimatedSprite(r), n._projectilePool[e].loop = !0, n._projectilePool[e].animationSpeed = .2, n._projectilePool[e].play(), i.addChild(n._projectilePool[e]), n._projectilePool[e].blendMode = PIXI.BLEND_MODES.ADD, n._projectilePool[e].anchor.set(.5), n._projectilePool[e].collide = !0, n._projectilePool[e].visible = !1, n._projectilePool[e].alive = !1, n._projectilePool[e].dx = 0, n._projectilePool[e].dy = 0, n._projectilePool[e].position.set(n._x, n._y), n._projectilePool[e].scale.set(2.5); return function() { if (n._counter++, n._projectilePool[n._counter]) return n._projectilePool[n._counter]; for (var e = 0; e < n._projectilePool.length; e++) n._projectilePool[e].visible || (n._projectilePool[e].rotation = 0, n._projectilePool[e].collide = !0, n._projectilePool[e].visible = !1, n._projectilePool[e].alive = !1, n._projectilePool[e].dx = 0, n._projectilePool[e].dy = 0, n._projectilePool[e].position.set(n._x, n._y), n._projectilePool[e].scale.set(2.5)); for (var t = 0; t < n._activeProjectiles.length; t++) n._activeProjectiles[t].visible || n._activeProjectiles.splice(t, 1); return n._counter = 0, n._projectilePool = n.shuffleArray(n._projectilePool), n._projectilePool[n._counter] } }(), n._skipFrame = 0, n._finished = !1, n._maxChangeTime = .75, n._minChangeTime = 1.8, n._changeTime = P3.math.random(n._minChangeTime, n._maxChangeTime), n._target = null, n._moveSpeed = 125, n._dy = n._moveSpeed, n._bert = null, n._startPos = null, n._finishIntro = !1, n._activeLane = -1, n._burstSize = 1, n._burstDelay = 1, n._sleepTime = 5, n._time = 0, n._difficultyTimeIncrement = 8, n._projectileFlyTime = -1, n.init(), n } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this.x = .5 * -(P3.View.width - c["default"].STAGE_WIDTH) + P3.View.width - 115, this.y = this._lanes[1], this._startPos = { x: this.x, y: this.y }, this.x += 600, this.y -= 600, this._projectilePool = this.shuffleArray(this._projectilePool) } }, { key: "shuffleArray", value: function(e) { for (var t = e.length; t > 0;) { var i = Math.floor(Math.random() * t);
                            t--; var n = e[t];
                            e[t] = e[i], e[i] = n } return e } }, { key: "appear", value: function() { TweenMax.to(this, 1, { x: this._startPos.x, y: this._startPos.y, ease: Power2.easeOut }) } }, { key: "update", value: function() { var e = this; if (this._skipFrame++ % 2 === 0 && this.view.update(2 * deltaTime), this._finishIntro) { this._time += deltaTime; for (var t = this._activeProjectiles.length, i = 0; i < t; i++)
                                if (this._activeProjectiles[i].alive) { if (this._activeProjectiles[i].x < -100) { this._activeProjectiles.alive = !1, this._activeProjectiles.visible = !1, this._activeProjectiles.splice(i, 1); break } this._activeProjectiles[i].x += this._activeProjectiles[i].dx * deltaTime, this._activeProjectiles[i].y += this._activeProjectiles[i].dy * deltaTime } if (this._finished) return void(this._endAnimation || (this._view.state.setAnimation(0, "fly_win", !0), this._endAnimation = TweenMax.to(this, .35, { x: this.x - 75, onComplete: function() { e.view.scale.x = -e.view.scale.x, TweenMax.to(e, 1, { x: e.x + 600, y: e.y - 600, delay: .5, ease: Power2.easeIn }) }, delay: 1, ease: Power2.easeOut }))); if (this._animationChanger(), this._changeTime -= deltaTime, this._changeTime <= 0) { if (this._changeTime = P3.math.random(this._minChangeTime, this._maxChangeTime), this._maxChangeTime > .8 && (this._maxChangeTime -= .1), this._minChangeTime > .2 && (this._maxChangeTime -= .05), this._sleeping) return;
                                this._changerLocked = !1, this._sleeping = !0, delay(function() { return e._sleeping = !1 }, this._burstDelay * this._burstSize + 2); for (var n = function(t) { delay(function() { return e._laneChanger(function() { e._changerLocked = !0, e._view.state.setAnimation(0, "fly_angry", !1), e.y <= e._lanes[0] ? e._view.state.addAnimation(0, "fly_idle_high", !0, 0) : e.y <= e._lanes[1] ? e._view.state.addAnimation(0, "fly_idle_middle", !0, 0) : e._view.state.addAnimation(0, "fly_idle_low", !0, 0) }, t) }, e._burstDelay * t) }, a = 0; a < this._burstSize; a++) n(a);
                                this._time > this._difficultyTimeIncrement && (this._difficultyTimeIncrement += 8, this._burstSize < 7 && this._burstSize++, this._burstDelay > .5 && (this._burstDelay -= .1), this._projectileSpeed < this._maxProjectileSpeed && (this._projectileSpeed += 25)) } } } }, { key: "_animationChanger", value: function() { this._changerLocked || (this.y <= this._lanes[0] ? (0 !== this._activeLane && this._view.state.setAnimation(0, "fly_idle_high", !0), this._activeLane = 0) : this.y <= this._lanes[1] ? (1 !== this._activeLane && this._view.state.setAnimation(0, "fly_idle_middle", !0), this._activeLane = 1) : (2 !== this._activeLane && this._view.state.setAnimation(0, "fly_idle_low", !0), this._activeLane = 2)) } }, { key: "pause", value: function() { this._tweenMain && this._tweenMain.pause(), this._tweenSecondary && this._tweenSecondary.pause(), this._isPause = !0 } }, { key: "resume", value: function() { this._tweenMain && this._tweenMain.play(), this._tweenSecondary && this._tweenSecondary.play(), this._isPause = !1 } }, { key: "_pickFireLane", value: function(e) { for (var t = -1;;)
                            if (t = P3.math.randomInt(0, this._lanes.length - 1), t !== e) break; return this._lanes[t] } }, { key: "_getLaneInterceptVelocity", value: function(e, t) { var i = { x: t.x, y: t.y },
                            n = { x: this._bert.x, y: e - 30 },
                            a = c["default"].distance(i.x, i.y, n.x, n.y),
                            o = c["default"].distance(i.x, 0, n.x, 0),
                            s = o / a,
                            r = (n.x - i.x) / a,
                            l = (n.y - i.y) / a; return { x: r * (this._projectileSpeed * s), y: l * (this._projectileSpeed * s) } } }, { key: "_laneChanger", value: function(e, t) { var i = this; if (!this._finished && !this._isPause) { var n = P3.math.randomInt(0, 2),
                                a = this._lanes[n];
                            this._target = a; var o = 800,
                                s = c["default"].distance(0, this.y, 0, a),
                                r = s / o;
                            this._tweenMain = TweenMax.to(this, r, { y: a, ease: Power0.easeNone, onComplete: function() { i._fire(n), t >= i._burstSize - 1 && e() } }), 0 === n ? this._tweenSecondary = TweenMax.to(this._view, r, { y: 25, ease: Power0.easeNone }) : 2 === n ? this._tweenSecondary = TweenMax.to(this._view, r, { y: -25, ease: Power0.easeNone }) : this._tweenSecondary = TweenMax.to(this._view, r, { y: 0, ease: Power0.easeNone }) } } }, { key: "resize", value: function() { this._finishIntro && (this.x = .5 * -(P3.View.width - c["default"].STAGE_WIDTH) + P3.View.width - 115) } }, { key: "_fire", value: function(e) { var t = this._emitter(); if (t.rotation = 0, t.alive = !0, t.visible = !0, t.x = this.x - 200, t.y = this.y - 55, t.scale.set(2.5), t.isDiag) { var i = this._pickFireLane(e),
                                n = this._getLaneInterceptVelocity(i, t);
                            t.dx = n.x, t.dy = n.y } else t.dx = -this._projectileSpeed, t.dy = 0;
                        this._activeProjectiles.push(t), this.y <= this._lanes[0] ? (this._view.state.setAnimation(0, "fly_shoot_high", !1), this._view.state.addAnimation(0, "fly_idle_high", !0, 0)) : this.y <= this._lanes[1] ? (this._view.state.setAnimation(0, "fly_shoot_middle", !1), this._view.state.addAnimation(0, "fly_idle_middle", !0, 0)) : (this._view.state.setAnimation(0, "fly_shoot_low", !1), this._view.state.addAnimation(0, "fly_idle_low", !0, 0)), c["default"].audio.playSound(["sfx_witch_fire_spell_00", "sfx_witch_fire_spell_01"]) } }, { key: "projectiles", get: function() { return this._activeProjectiles } }, { key: "finished", set: function(e) { this._finished = e } }, { key: "bert", set: function(e) { this._bert = e } }, { key: "finishedIntro", set: function(e) { this._finishIntro = e } }]), t }(_["default"]);
        i["default"] = d }, { "../../Actor": 4, "../../Common": 13 }],
    181: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function P(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : P(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Common"),
            _ = n(u),
            h = e("./Hud"),
            c = n(h),
            d = e("./Ivandoe"),
            p = n(d),
            f = e("./Bert"),
            y = n(f),
            v = e("./Witch"),
            m = n(v),
            g = e("../../MinigameScene"),
            w = n(g),
            b = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)),
                        i = 130; return e._lanes = [.5 * P3.View.height - 125 + i, .5 * P3.View.height + i, .5 * P3.View.height + 125 + i], e._bgHolder = new PIXI.Container, e._primaryHolder = new PIXI.Container, e._uiHolder = new PIXI.Container, e._ivandoe = new p["default"], e._bg = P3.createSprite("ep4_witchDeflect_bg", e._bgHolder), e._projectileHolder = new PIXI.Container, e._witch = new m["default"](e._lanes, e._projectileHolder), e._bert = new y["default"](e._lanes, { end: e.gameOver.bind(e), score: e.incScore.bind(e) }), e._witch.bert = e._bert, e._skipFrame = 0, e._hud = new c["default"](e._uiHolder), e } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this._bg.width = _["default"].STAGE_WIDTH, this._primaryHolder.addChild(this._ivandoe, this._bert, this._witch), this._uiHolder.addChild(this._hud), this.addChild(this._bgHolder, this._primaryHolder, this._projectileHolder, this._uiHolder), this._hud.pauseButton.signals.click.add(this._onPauseButtonClick, this), this._hud.setScore(this.score), this._hud.setHiScore(this.highscore), this._bg.interactive = !0, this._bg.mousedown = this._bg.touchstart = this._inputdown.bind(this), this._ivandoe.x = .5 * (P3.View.width - _["default"].STAGE_WIDTH), this._ivandoe.y = P3.View.height - 75 } }, { key: "destroy", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this), this._witchLoop && this._witchLoop.stop && this._witchLoop.stop(), _["default"].audio.stopMusic() } }, { key: "resize", value: function() { this.x = .5 * (P3.View.width - _["default"].STAGE_WIDTH), this._hud.resize(), this._ivandoe.resize(), this._bert.resize(), this._witch.resize() } }, { key: "update", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "update", this).call(this), this._isPause || (this._skipFrame++ % 2 === 0 && (this._bert.view.update(2 * deltaTime), this._ivandoe.view.update(2 * deltaTime)), this._grace || this._inTut || (this._witch.update(), this._bert.update(this._witch.projectiles, this._ivandoe))) } }, { key: "appear", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "appear", this).call(this), this._isFirstPlay() && this.signals.pause.dispatch(this, !0) } }, { key: "pause", value: function() { this._witchLoop && this._witchLoop.pause(), this._witch.pause(), this._isPause = !0 } }, { key: "resume", value: function() { this._witchLoop && this._witchLoop.play(), this._witch.resume(), this._isPause = !1 } }, { key: "start", value: function() { var e = this;
                        l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "start", this).call(this), this._isFirstPlay() ? this._tutorial() : this._ivandoe.init(), this._ivandoe.x = .5 * (P3.View.width - _["default"].STAGE_WIDTH) + 250, this._ivandoe.view.state.setAnimation(0, "walk", !0), TweenMax.to(this._ivandoe, 1, { x: 75 - .5 * (P3.View.width - _["default"].STAGE_WIDTH), ease: Power0.easeNone, onComplete: function() { e._bert.begin(), e._witch.appear(), e._ivandoe.view.state.setAnimation(0, "witch_ivan_idle1", !0), TweenMax.to(e._bert, 1, { x: 200 - .5 * (P3.View.width - _["default"].STAGE_WIDTH), ease: Power2.easeOut, onComplete: function() { delay(function() { e._witch.finishedIntro = !0 }, 1, e) } }) } }), _["default"].audio.playMusic("music_loop_dramatic_tense_00"), this._witchLoop = _["default"].audio.playSound("sfx_witch_flying_loop_00", { loop: !0 }), this._witchLoop.howl.volume(0); var i = { vol: 0 };
                        TweenMax.to(i, .5, { vol: 1, ease: Power0.easeNone, onUpdate: function() { e._witchLoop.howl.volume(i.vol) }, delay: .1 }) } }, { key: "end", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "end", this).call(this), this.playEndVO(this._score), TweenMax.killTweensOf(this._witch), this._ivandoe.finish = !0, this._running = !1, this._hud.setHiScore(this.highscore), this._witchLoop && this._witchLoop.stop && this._witchLoop.stop(), _["default"].audio.stopMusic(), console.log("end game") } }, { key: "gameOver", value: function() { this._gameover || (this._gameover = !0, this._witch.finished = !0, delay(this.end, 3, this)) } }, { key: "incScore", value: function() { this._score++, this._hud.setScore(this.score) } }, { key: "_tutorial", value: function() { var e = this;
                        this._inTut = !0, delay(function() { e._initTutorialPointer(e._primaryHolder), e._animatePointer({ x: 550, y: e._lanes[0] }) }, 1.5) } }, { key: "_inputdown", value: function(e) { this._inTut && (this._inTut = !1, this._killPointer()), this._running && this._bert.input(e) } }]), t }(w["default"]);
        i["default"] = b }, { "../../Common": 13, "../../MinigameScene": 28, "./Bert": 177, "./Hud": 178, "./Ivandoe": 179, "./Witch": 180 }],
    182: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Actor"),
            _ = n(u),
            h = e("../../Common"),
            c = n(h),
            d = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    i._world = e; var n = new PIXI.Container; return i.addChild(n), i._view = new PIXI.spine.Spine(c["default"].assets.spineData("bert_front")), i._view.scale.set(.4), i._view.skeleton.setToSetupPose(), i._view.skeleton.setSkin(null), i._view.skeleton.setSkinByName("default"), i._view.state.setAnimation(0, "idle_fly", !0), i._view.autoUpdate = !1, i._view.update(0), n.addChild(i._view), i._skipFrame = 0, i._view.state.data.setMix("idle_fly", "fly_determined_fast", .1), i._view.state.data.setMix("idle_fly", "fly_determined", .1), i._view.state.data.setMix("fly_determined", "fly_determined_fast", .1), i._animationDelay = P3.math.random(3, 6), i.init(), i } return s(t, e), r(t, [{ key: "init", value: function() { TweenMax.to(this._view, 1, { y: this._view.y + 50, ease: Sine.easeInOut, yoyo: !0, repeat: -1 }), TweenMax.fromTo(this._view, 1.5, { x: -50 }, { x: 100, ease: Sine.easeInOut, yoyo: !0, repeat: -1 }) } }, { key: "destroy", value: function(e) { TweenMax.killTweensOf(this._view), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "update", value: function(e, t) { this.x = t.x, this._skipFrame++ % 2 === 0 && this._view.update(2 * e), this._animationDelay -= e, this._animationDelay < 0 && this._switchAnimation() } }, { key: "flyAway", value: function() { TweenMax.killTweensOf(this._view), TweenMax.to(this._view, 1, { x: this._view.x + 600, y: this._view.y - 400, ease: Sine.easeOut }) } }, { key: "_switchAnimation", value: function() { var e = ["fly_determined", "fly_determined_fast", "idle_fly"];
                        this._view.state.setAnimation(0, e[P3.math.randomInt(0, e.length - 1)], !0), this._animationDelay = P3.math.random(3, 6) } }]), t }(_["default"]);
        i["default"] = d }, { "../../Actor": 4, "../../Common": 13 }],
    183: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("../../Common"),
            u = n(l),
            _ = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return i._world = e, i._avatar = e.avatar, i._view = new PIXI.spine.Spine(u["default"].assets.spineData("duck")), i._view.scale.set(.4, .4), i._view.skeleton.setToSetupPose(), i._view.autoUpdate = !1, i._view.update(0), i._view.state.setAnimation(0, "idle-fly", !0), i.addChild(i._view), i._state = -1, i._skipFrame = 0, i._collided = !1, i._waitingPickup = !1, i.init(), i } return s(t, e), r(t, [{ key: "init", value: function() { this.changeState() } }, { key: "update", value: function() { this._skipFrame++ % 2 === 0 && this._view.update(2 * deltaTime); var e = this._avatar;
                        e._dead && (this.visible = !1), this.x = e.x, !this._collided && this._waitingPickup && u["default"].collisionOBB(this._view, e.collider) && (this._collided = !0, e.isMounted = !0, this.setState(1), this._world.monster.slowDown()), e.isMounted && (e._view.y = this._view.y + .5 * e._view.height + 40) } }, { key: "setState", value: function(e) { this._state = e, this.changeState() } }, { key: "changeState", value: function() { var e = this,
                            t = void 0; switch (this._state) {
                            case -1:
                                this._view.x = .5 * -u["default"].STAGE_WIDTH, this._view.y = -200, this._collided = !1; break;
                            case 0:
                                console.warn("swoop"), u["default"].audio.playSound("sfx_duck_quack_00"), t = [{ x: .5 * -u["default"].STAGE_WIDTH, y: .5 * -u["default"].STAGE_HEIGHT }, { x: .25 * -u["default"].STAGE_WIDTH, y: .25 * -u["default"].STAGE_HEIGHT }, { x: 0, y: -350 }], TweenMax.to(this._view, 4, { bezier: { type: "soft", values: t, autoRotate: ["x", "y", "rotation", .01 * Math.PI, !0] }, ease: Power1.easeInOut, onComplete: function() { e._view.state.setAnimation(0, "idle-fly_ready", !0), e._waitingPickup = !0, delay(function() { e._avatar.isMounted || e.setState(2) }, P3.math.randomInt(1, 2)) } }); break;
                            case 1:
                                this._view.state.setAnimation(0, "idle-fly_carry", !0), this._avatar.view.state.setAnimation(0, "jump_duck_carry", !0), TweenMax.to(this._view, 1, { y: this._view.y - 75, ease: Sine.easeInOut }), delay(function() { e._avatar.isMounted && 2 !== e._state && (e._avatar.isMounted = !1, e._avatar.fallFromDuck(), e.setState(2)) }, P3.math.random(3, 5)), u["default"].audio.playSound("vo_ivandoe_laugh_00"); break;
                            case 2:
                                this._view.state.setAnimation(0, "idle-fly", !0), console.warn("leave view"), this._waitingPickup = !1, t = [{ x: .25 * u["default"].STAGE_WIDTH, y: .25 * -u["default"].STAGE_HEIGHT }, { x: .5 * u["default"].STAGE_WIDTH + 300, y: -200 }], TweenMax.to(this._view, 4, { bezier: { type: "soft", values: t, autoRotate: ["x", "y", "rotation", .01 * Math.PI, !0] }, ease: Power1.easeInOut, onComplete: function() { return e.setState(-1) } }); break;
                            default:
                                console.warn("unknown state : " + this._state) } } }]), t }(PIXI.Container);
        i["default"] = _ }, { "../../Common": 13 }],
    184: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("../../Common"),
            u = n(l),
            _ = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e.init(), e } return s(t, e), r(t, [{ key: "init", value: function() { this.initScorePanel("minigame_icon_ep5_1"), this._createHiScorePanel(), this._createPauseButton() } }, { key: "resize", value: function() { this._score.x = .5 * (u["default"].STAGE_WIDTH - P3.View.width) + 80, this._score.y = 10, this._hiscore.x = .5 * u["default"].STAGE_WIDTH, this._hiscore.y = 60, this._pauseButton.x = .5 * (u["default"].STAGE_WIDTH + P3.View.width) - 100, this._pauseButton.y = 100 } }, { key: "initScorePanel", value: function(e) { this._score = new PIXI.Container, this._score.visible = !1, this.addChild(this._score); var t = new PIXI.Sprite(u["default"].assets.texture("minigame_generic_panel"));
                        this._score.addChild(t); var i = new PIXI.Sprite(u["default"].assets.texture(e));
                        this._score.addChild(i), webfont ? (this._score.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "left", fill: 16777215 }), this._score.label.x = 110, this._score.label.y = 60, this._score.label.anchor.set(.5), this._score.addChild(this._score.label)) : (this._score.label = new PIXI.extras.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), this._score.label.x = 110, this._score.label.y = 66, this._score.label.anchor.set(.5), this._score.addChild(this._score.label)) } }, { key: "setScore", value: function(e) { this._score.visible = !0, this._score.label.text = "" + e } }, { key: "_createHiScorePanel", value: function() { this._hiscore = new PIXI.Container, this._hiscore.visible = !1, this.addChild(this._hiscore); var e = new PIXI.Sprite(u["default"].assets.texture("minigame_generic_panel"));
                        e.anchor.set(.5), this._hiscore.addChild(e); var t = new PIXI.Sprite(u["default"].assets.texture("minigame_icon_best"));
                        t.anchor.set(.5), this._hiscore.addChild(t), webfont ? (this._hiscore.label = new PIXI.Text("0", { fontSize: "36px", fontFamily: "Arial", align: "center", fill: 16777215 }), this._hiscore.label.y = 15, this._hiscore.label.anchor.set(.5), this._hiscore.addChild(this._hiscore.label)) : (this._hiscore.label = new PIXI.BitmapText("0", { font: "40px Alghera Pro", align: "center" }), this._hiscore.label.y = 18, this._hiscore.label.anchor.set(.5), this._hiscore.addChild(this._hiscore.label)) } }, { key: "setHiScore", value: function(e) { this._hiscore.visible = !0, this._hiscore.label.text = e.toString() } }, { key: "_createPauseButton", value: function() { var e = u["default"].assets,
                            t = new P3.ButtonStates;
                        t.normal = e.texture("btn_primary_small_off"), t.over = e.texture("btn_primary_small_over"), t.down = e.texture("btn_primary_small_over"), t.icon = e.texture("icon_help"), this._pauseButton = new P3.Button(t), this.addChild(this._pauseButton) } }, { key: "pauseButton", get: function() { return this._pauseButton } }]), t }(PIXI.Container);
        i["default"] = _ }, { "../../Common": 13 }],
    185: [function(e, t, i) { arguments[4][107][0].apply(i, arguments) }, { "../../Common": 13, dup: 107 }],
    186: [function(e, t, i) {
        "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 });
        var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Actor"),
            _ = n(u),
            h = e("../../Common"),
            c = n(h),
            d = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    i._world = e, i._isGrounded = !0, i._jumpTime = .45, i._jumpHeight = 300, i._jumpSpeed = 2 * i._jumpHeight / i._jumpTime, i._jumpY = 0, i._gravity = i._jumpSpeed / i._jumpTime, i._velocity = new P3.Vector2(500, 0), i._velocityMulti = 1, i._dead = !1, i._falling = !1, i._hit = !1, i._shadow = new PIXI.Sprite(c["default"].assets.texture("shadow")), i._shadow.anchor.set(.5), i._shadow.alpha = .5, i._shadow.scale.set(.65), i.addChildAt(i._shadow, 0); var n = new PIXI.Container; return i.addChild(n), i._view = new PIXI.spine.Spine(c["default"].assets.spineData("ivandoe_front")), i._view.scale.set(.3), i._view.skeleton.setToSetupPose(), i._view.skeleton.setSkin(null), i._view.skeleton.setSkinByName("standard"), i._view.stateData.defaultMix = .15, i._view.autoUpdate = !1, i._view.update(0), n.addChild(i._view), i._skipFrame = 0, i._view.state.data.setMix("run_fast_chased_hop", "run_fast_chased", .1), i._view.state.data.setMix("run_fast_chased", "death_throw_1", .1), i._view.state.data.setMix("jump_fast_chased", "run_fast_chased", .1), i._collisionBox = new PIXI.Rectangle((-40), (-240), 80, 240), i._collisionGraphic = new PIXI.Graphics, i.addChild(i._collisionGraphic), i._collisionGraphic.lineStyle(2, 16191773), i._collisionGraphic.drawRect(i._collisionBox.x, i._collisionBox.y, i._collisionBox.width, i._collisionBox.height), i._collisionGraphic.renderable = !1, i.isMounted = !1, i.faceDirection(1), i }
                return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this.idle(), this._view.state.addListener({ event: this._onAnimationEvent.bind(this) }) } }, { key: "destroy", value: function(e) { this._animationTimeline && this._animationTimeline.kill(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, {
                    key: "update",
                    value: function(e) {
                        this._skipFrame++ % 2 === 0 && this._view.update(2 * e);
                        var t = 1;
                        return this.isMounted && (t = 1.5), this.x += this._velocity.x * this._velocityMulti * e * t, this.y = this._world.getGroundY(this.x), this.isMounted ? (this._velocity.y = 0, void(this._shadow.visible = !1)) : (this._shadow.visible = !0, this._isGrounded ? this._falling ? (this._velocity.y += this._gravity * e, this._jumpY += this._velocity.y * e, this._view.y = this._jumpY) : (this._velocity.y = 0, this.y = this._world.getGroundY(this.x)) : (this._velocity.y += this._gravity * e,
                            this._jumpY += this._velocity.y * e, this.y + this._jumpY >= this._world.getGroundY(this.x) && this.land(), this._view.y = this._jumpY, this._shadow.scale.set(.65 * (1 + this._jumpY / 1e3))), void(this._collisionGraphic && (this._collisionGraphic.x = this._view.x, this._collisionGraphic.y = this._view.y)))
                    }
                }, { key: "idle", value: function() { this._velocityMulti = 0, this._velocity.y = 0, this._view.state.setAnimation(0, "idle_posing_1", !0) } }, { key: "run", value: function() { this._velocityMulti = 1, this._view.state.setAnimation(0, "run_fast_chased", !0) } }, { key: "jump", value: function() { this._isGrounded && (this._hit || (this._isGrounded = !1, this._velocity.y = -this._jumpSpeed, this._jumpY = 0, this._view.state.setAnimation(0, "jump_fast_chased", !1))) } }, { key: "fallFromDuck", value: function() { this._view.state.setAnimation(0, "jump_fast_chased", !1) } }, { key: "land", value: function() { this._isGrounded || (this._isGrounded = !0, this._jumpY = 0, this._shadow.scale.set(1), c["default"].audio.playSound(["vo_ivandoe_land_00", "vo_ivandoe_land_01", "vo_ivandoe_land_02"]), this._dead || (this._view.state.setAnimation(0, "run_fast_chased", !0), this._world.shake(.2, new PIXI.Point(4, 8)))) } }, { key: "fall", value: function() { this._falling = !0, this._view.state.setAnimation(0, "death_throw_1", !0), this._shadow.visible = !1, this._animationTimeline = new TimelineMax, this._animationTimeline.to(this, .5, { _velocityMulti: 0, ease: Sine.easeInOut }, 0) } }, { key: "death", value: function() { this._velocity.x = 0, this._dead = !0, this._animationTimeline && this._animationTimeline.kill() } }, { key: "hit", value: function() { this._hit = !0, this._view.state.setAnimation(0, "run_fast_chased_hop", !0), this._animationTimeline = new TimelineMax({ onCompleteScope: this, onComplete: function() { this._dead || (this._hit = !1, this.run()) } }), this._animationTimeline.fromTo(this, 1.5, { _velocityMulti: .5 }, { _velocityMulti: .25, ease: Sine.easeInOut }, 0) } }, { key: "thrownAway", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1,
                            t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0;
                        this._falling = !0, this._isGrounded = !0, this._view.state.setAnimation(0, "death_throw_1", !0), this._shadow.visible = !1, this._flightTimeline = new TimelineMax({ delay: t }), this._flightTimeline.to(this, 1 * e / 3, { _jumpY: this._jumpY - 140, ease: Sine.easeOut }, 0), this._flightTimeline.to(this, 2 * e / 3, { _jumpY: this._jumpY + 500, ease: Sine.easeIn, onStartScope: this, onStart: function() { this._world.layerFg2.addChild(this) } }, e / 3), this._flightTimeline.to(this.scale, e, { x: 2, y: 2, ease: Sine.easeInOut }, 0) } }, { key: "collide", value: function(e) { var t = this.collisionBox; return !(e.x + e.width < t.x) && (!(e.x > t.x + this._collisionBox.width) && (!(e.y + e.height < t.y) && !(e.y > t.y + this._collisionBox.height))) } }, { key: "increaseVelocity", value: function(e) { this._velocity.x += e } }, { key: "_playFootstepSFX", value: function() { c["default"].audio.playSound(["sfx_footstep_00", "sfx_footstep_01", "sfx_footstep_02", "sfx_footstep_03", "sfx_footstep_04"]) } }, { key: "_onAnimationEvent", value: function(e, t) { "sfx_footstep" === t.data.name && this._playFootstepSFX() } }, { key: "isGrounded", get: function() { return this._isGrounded } }, { key: "collisionBox", get: function() { return new PIXI.Rectangle(this.x + this._view.x + this._collisionBox.x, this.y + this._view.y + this._collisionBox.y, this._collisionBox.width, this._collisionBox.height) } }, { key: "collider", get: function() { return this._collisionGraphic } }]), t
            }(_["default"]);
        i["default"] = d
    }, { "../../Actor": 4, "../../Common": 13 }],
    187: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Actor"),
            _ = n(u),
            h = e("../../Common"),
            c = n(h),
            d = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                    i._world = e, i._velocity = new P3.Vector2(0, 0), i._running = !1, i._maxDistance = 700, i._shadow = new PIXI.Sprite(c["default"].assets.texture("shadow")), i._shadow.anchor.set(.85, .5), i._shadow.alpha = .5, i._shadow.scale.set(.65), i.addChildAt(i._shadow, 0); var n = new PIXI.Container; return i.addChild(n), i._view = new PIXI.spine.Spine(c["default"].assets.spineData("wolf")), i._view.scale.set(.3), i._view.skeleton.setToSetupPose(), i._view.skeleton.setSkin(null), i._view.skeleton.setSkinByName("default"), i._view.stateData.defaultMix = .15, i._view.autoUpdate = !1, i._view.x -= 200, i._view.update(0), n.addChild(i._view), i._skipFrame = 0, i._view.state.data.setMix("idle_lose", "run_slow", .2), i._shadow.width = .8 * i._view.width, i._view.state.addListener({ event: function(e, t) { return i._onAnimationEvent(e, t) } }), i } return s(t, e), r(t, [{ key: "_onAnimationEvent", value: function(e, t) { switch (t.data.name) {
                            case "sfx_footstep":
                                c["default"].audio.playSound("sfx_footstep_0" + P3.math.randomInt(0, 4)); break;
                            default:
                                console.warn("unknown event name : " + t.data.name) } } }, { key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this.y = this._world.getGroundY(this.x), this._view.state.setAnimation(0, "enter_scene", !1) } }, { key: "destroy", value: function(e) { this._animationTimeline && this._animationTimeline.kill(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "update", value: function(e) { this.x += this._velocity.x * e, this._running && (this.x = Math.max(this.x, this._target.x - this._maxDistance)), this._skipFrame++ % 2 === 0 && this._view.update(2 * e) } }, { key: "run", value: function(e) { var t = this;
                        this.x = e.x - 800, this._view.state.setAnimation(0, "enter_scene", !1); var i = .5;
                        TweenMax.to(this, .5 * i, { y: this.y - 175, yoyo: !0, repeat: 1, ease: Power2.easeOut, yoyoEase: Power2.easeIn }), TweenMax.to(this, i, { x: e.x - 275, ease: Power0.easeNone, onComplete: function() { c["default"].audio.playSound("sfx_wolf_growl_00"), delay(function() { t._view.state.setAnimation(0, "run_slow", !0), t._target = e, t._running = !0, t._velocity.x = 430, c["default"].audio.playSound("vo_ivandoe_yelps_00") }, .25) } }) } }, { key: "targetReached", value: function() { this._velocity.x = 0, this._view.state.setAnimation(0, "wolf_wins", !0) } }, { key: "increaseVelocity", value: function(e) { this._velocity.x += e } }, { key: "slowDown", value: function() { this._maxDistance += 200, this._velocity.x *= .9 } }, { key: "maxDistance", set: function(e) { this._maxDistance = e } }]), t }(_["default"]);
        i["default"] = d }, { "../../Actor": 4, "../../Common": 13 }],
    188: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Actor"),
            _ = n(u),
            h = e("../../Common"),
            c = n(h),
            d = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return i._world = e, i._type = "obstacle", i._sprite = new PIXI.Sprite(c["default"].assets.texture(P3.utils.selectRandom(["ep5_wolfRun/obstacle_001", "ep5_wolfRun/obstacle_002", "ep5_wolfRun/obstacle_003", "ep5_wolfRun/obstacle_004", "ep5_wolfRun/obstacle_005", "ep5_wolfRun/obstacle_006", "ep5_wolfRun/obstacle_007", "ep5_wolfRun/obstacle_008", "ep5_wolfRun/obstacle_009"]))), i._sprite.anchor.set(.5, .9), i._sprite.scale.set(P3.math.random(.7, 1)), i.addChild(i._sprite), i.interactive = !0, i._collisionBox = new PIXI.Rectangle(.25 * -i._sprite.width, (-40), .5 * i._sprite.width, 40), i._collisionGraphic = new PIXI.Graphics, i.addChild(i._collisionGraphic), i._collisionGraphic.lineStyle(2, 16191773), i._collisionGraphic.drawRect(i._collisionBox.x, i._collisionBox.y, i._collisionBox.width, i._collisionBox.height), i._collisionGraphic.renderable = !1, i } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this) } }, { key: "destroy", value: function(e) { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "update", value: function(e) {} }, { key: "collisionBox", get: function() { return new PIXI.Rectangle(this.x + this._collisionBox.x, this.y + this._collisionBox.y, this._collisionBox.width, this._collisionBox.height) } }]), t }(_["default"]);
        i["default"] = d }, { "../../Actor": 4, "../../Common": 13 }],
    189: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function p(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : p(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Actor"),
            _ = n(u),
            h = e("../../Common"),
            c = n(h),
            d = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)),
                        i = c["default"].assets;
                    e._view = new PIXI.Sprite(i.texture(P3.utils.selectRandom(["ep10_monsterRun/obstacle_001"]))), e._view.anchor = new PIXI.Point(.5, 1), e.addChild(e._view), e._feather = new PIXI.Container, e._feather.y = -200, e.addChild(e._feather); var n = new PIXI.Sprite(i.texture("icon_quest")); return n.anchor.set(.5), e._feather.addChild(n), e._featherTimeline = new TimelineMax, e._featherTimeline.fromTo(n, 3, { y: -35 }, { y: 35, ease: Sine.easeInOut, repeat: -1, yoyo: !0 }, 0).seek(Math.random()), e } return s(t, e), r(t, [{ key: "destroy", value: function(e) { this._featherTimeline && this._featherTimeline.kill(), this._flightTimeline && this._flightTimeline.kill(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "flyAway", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1,
                            t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0;
                        this._flightTimeline = new TimelineMax({ delay: t, onStartScope: this, onStart: function() { this._featherTimeline && this._featherTimeline.kill() } }), this._flightTimeline.to(this._feather, e, { x: this._feather.x - 1e3, ease: Sine.easeIn }, 0), this._flightTimeline.to(this._feather, e, { y: this._feather.y - 200, ease: Sine.easeInOut }, 0), this._flightTimeline.to(this._feather, e, { rotation: 4 * -Math.PI, ease: Sine.easeInOut }, 0) } }]), t }(_["default"]);
        i["default"] = d }, { "../../Actor": 4, "../../Common": 13 }],
    190: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function x(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : x(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Common"),
            _ = n(u),
            h = e("./Ivandoe"),
            c = (n(h), e("./Duck")),
            d = n(c),
            p = e("./World"),
            f = n(p),
            y = e("./Hud"),
            v = n(y),
            m = e("./InteractiveArea"),
            g = n(m),
            w = e("../../MinigameScene"),
            b = n(w),
            P = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e._states = { GRACE: 1, INTRO: 2, GAMEPLAY: 3, GAMEOVER_MONSTER: 4, INACTIVE: -1 }, e._gamestate = null, e._gamestateTime = 0, e._nextGamestate = e._states.INACTIVE, e._graceTime = 2, e._tutorial = !1, e._paused = !1, e._duckDelay = -1, e._monsterClose = !0, e } return s(t, e), r(t, [{ key: "init", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "init", this).call(this), this._world = new f["default"], this.addChild(this._world), this._duck = new d["default"](this._world), this._world.addChild(this._duck), this._interactiveArea = new g["default"](1), this.addChild(this._interactiveArea), this._hud = new v["default"], this._hud.setScore(0), this._hud.setHiScore(this.highscore), this.addChild(this._hud), this._hud.pauseButton.signals.click.add(this._onPauseButtonClick, this) } }, { key: "destroy", value: function(e) { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, { children: !0 }) } }, { key: "resize", value: function() { this.x = .5 * (P3.View.width - _["default"].STAGE_WIDTH), this._hud.resize() } }, { key: "appear", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "appear", this).call(this), this._isFirstPlay() && this.signals.pause.dispatch(this, !0), this._nextGamestate = this._states.GRACE, _["default"].audio.playSound("vo_wolf_howl_00") } }, { key: "show", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "show", this).call(this), TweenMax.resumeAll() } }, { key: "update", value: function() { var e = this;
                        l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "update", this).call(this); var i = deltaTime; switch (this._paused && (i = 0), this._world.update(i), this._duck.update(this._world.avatar), this._nextGamestate ? (this._gamestate = this._nextGamestate, this._gamestateTime = 0, this._nextGamestate = null) : this._gamestateTime += i, this._gamestate) {
                            case this._states.GRACE:
                                this._gamestateTime > this._graceTime && (this._nextGamestate = this._states.INTRO); break;
                            case this._states.INTRO:
                                0 == this._gamestateTime ? this._world.monster.run(this._world.avatar) : this._gamestateTime > 1 && (this._nextGamestate = this._states.GAMEPLAY), this._duckDelay = P3.math.randomInt(10, 10); break;
                            case this._states.GAMEPLAY:
                                if (0 == this._gamestateTime) _["default"].audio.playSound("vo_narrator_incidental_runaway_00"), this._world.changeFocusPoint(new PIXI.Point(.4, this._world.focusPoint.y), 1), this._obstacleDelay = 2, this._world.avatar.run(), _["default"].audio.playMusic("music_loop_dramatic_action_02"), this._interactiveArea.getArea(0).signals.clicked.add(function() { e.jump() });
                                else { if (this._score = this.distance, this._hud.setScore(this.score), this._world.avatar.increaseVelocity(3 * i), this._world.monster.increaseVelocity(3 * i), this._world.monster.maxDistance = 700 - 300 * Math.min(1, this.distance / 500), this._duckDelay -= i, this._duckDelay <= 0 && (this._duckDelay = P3.math.randomInt(30, 60), this._duck.setState(0)), this._world.createObstaclePattern(), this._world.avatar.isGrounded)
                                        for (var n = this._world.layerMg.getObjectsOfType("obstacle"), a = 0; a < n.length; a++)
                                            if (!this._tutorial && n[a].x - this._world.avatar.x < 200 && this.tutorial(), n[a].interactive && this._world.avatar.collide(n[a].collisionBox)) { n[a].interactive = !1, this._obstacleDelay += 1.5, this._world.avatar.hit(), _["default"].audio.playSound("vo_ivandoe_pain_00"), _["default"].audio.playSound("sfx_ivandoe_hit_obstacle"); break } for (var o = this._world.layerMg.getObjectsOfType("pit"), a = 0; a < o.length; a++) this._world.avatar.collide(o[a].collisionBox) && (this._interactiveArea.removeAllEvents(), this._nextGamestate = this._states.GAMEOVER_PIT); var s = Math.abs(this._world.monster.x - this._world.avatar.x);
                                    s < 300 ? this._monsterClose || (this._monsterClose = !0, _["default"].audio.playSound("sfx_wolf_growl_00")) : this._monsterClose = !1, this._world.monster.x >= this._world.avatar.x && (this._interactiveArea.removeAllEvents(), this._nextGamestate = this._states.GAMEOVER_MONSTER), _["default"].input.isKeyPressed(32) && this.jump() } break;
                            case this._states.GAMEOVER_MONSTER:
                                0 == this._gamestateTime && (this._world.avatar.death(), this._world.avatar.thrownAway(), this._world.bert.flyAway(), this._world.monster.targetReached(), _["default"].audio.stopMusic(), _["default"].audio.playSound("music_fail_stab_00"), _["default"].audio.playSound("vo_wolf_bite_00")), this._gamestateTime > 3 && (this._nextGamestate = this._states.INACTIVE, this.end()) } } }, { key: "end", value: function() { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "end", this).call(this), this.playEndVO(this._score), this._hud.setHiScore(this.highscore) } }, { key: "jump", value: function() { this._tutorial && (this._world.avatar.isMounted === !0 && (this._world.avatar.isMounted = !1, this._duck.setState(2)), this.tutorialEnd(), this._world.avatar.jump()) } }, { key: "tutorial", value: function() { this._paused = !0, this._tutorial = !0, TweenMax.pauseAll(), this._world.removeShake(), this._initTutorialPointer(this._world), this._animatePointer({ x: this._world.avatar.x + 100, y: this._world.avatar.y - this._world.avatar.height / 2 - 50 }) } }, { key: "tutorialEnd", value: function() { this._paused && (this._killPointer(), this._paused = !1, TweenMax.resumeAll()) } }, { key: "_onPauseButtonClick", value: function(e) { TweenMax.pauseAll(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "_onPauseButtonClick", this).call(this, e) } }, { key: "distance", get: function() { return Math.floor(this._world.avatar.x / 100) } }]), t }(b["default"]);
        i["default"] = P }, { "../../Common": 13, "../../MinigameScene": 28, "./Duck": 183, "./Hud": 184, "./InteractiveArea": 185, "./Ivandoe": 186, "./World": 191 }],
    191: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function k(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : k(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Common"),
            _ = n(u),
            h = e("./Ivandoe"),
            c = n(h),
            d = e("./Bert"),
            p = n(d),
            f = e("./Monster"),
            y = n(f),
            v = e("./Target"),
            m = n(v),
            g = e("./Obstacle"),
            w = n(g),
            b = e("./WorldLayer"),
            P = n(b),
            x = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e.inclination = 0 * PIXI.DEG_TO_RAD, e.focusTarget = null, e.focusPoint = new PIXI.Point(.5, .85), e.focusPosition = new PIXI.Point(0, 0), e.focusActive = { x: !0, y: !0 }, e.focusPointTween = null, e.zoom = 1.2, e.zoomTarget = 1, e.zoomTween = null, e._isShake = !1, e._shakeTime = 0, e._shakeTimeEnd = 1, e._shakeStrength = new PIXI.Point(10, 10), e.layers = [], e.layerBg = e.createLayer("bg", .7), e.layerBg.setBackground([_["default"].assets.texture("ep5_wolfRun_bg", "jpg")], new PIXI.Point(0, 150), 1540), e.layerMg = e.createLayer("mg", 0), e.layerMg.setBackground([_["default"].assets.texture("ep5_wolfRun/mg")], new PIXI.Point(0, 150)), e.monster = new y["default"](e), e.monster.x = -1200, e.monster.y = e.getGroundY(e.monster.x), e.layerMg.addChild(e.monster), e.avatar = new c["default"](e), e.avatar.y = e.getGroundY(0), e.layerMg.addChild(e.avatar), e.focusTarget = e.avatar, e.bert = new p["default"](e), e.bert.y = e.avatar.y - 300, e.bert.x = e.avatar.x, e.layerMg.addChild(e.bert), e.target = new m["default"](e), e.target.x = 0, e.target.y = e.getGroundY(e.target.x), e.target.visible = !1, e.layerMg.addChild(e.target), e.layerMg2 = e.createLayer("mg", 0), e.layerFg = e.createLayer("fg", -.7), e.layerFg.setBackground([_["default"].assets.texture("ep5_wolfRun/fg")], new PIXI.Point(0, 200)), e.layerFg2 = e.createLayer("fg2", 0), e._particles = e.initParticles(e.layerMg2), e._lastObstacleX = null, e._patternsDropped = 0, e } return s(t, e), r(t, [{ key: "update", value: function(e) { var t = new PIXI.Point(this.focusTarget.x, this.focusTarget.y);
                        this.avatar.update(e), this.bert.update(e, this.avatar), this.monster.update(e), this._isShake && (this._shakeTime += e, this._shakeTime >= this._shakeTimeEnd && (this._shakeTime = 0, this._isShake = !1)), this.focusActive.x && (this.focusPosition.x = this.focusTarget.x), this.focusActive.y && (this.focusPosition.y = this.focusTarget.y), this.x = _["default"].STAGE_WIDTH * this.focusPoint.x - this.focusPosition.x * this.zoom, this.y = _["default"].STAGE_HEIGHT * this.focusPoint.y - this.focusPosition.y * this.zoom, this._isShake && (this.x += P3.math.randomInt(-1, 1) * (this._shakeStrength.x * (1 - this._shakeTime / this._shakeTimeEnd)), this.y += P3.math.randomInt(-1, 1) * (this._shakeStrength.y * (1 - this._shakeTime / this._shakeTimeEnd))), this.scale.x = this.zoom, this.scale.y = this.zoom; for (var i = new PIXI.Point(this.focusActive.x ? this.focusTarget.x - t.x : 0, this.focusActive.y ? this.focusTarget.y - t.y : 0), n = 0; n < this.layers.length; n++) this.layers[n].update(e, i);
                        this._particles && (this._particles.updateOwnerPos(this.focusPosition.x + _["default"].STAGE_WIDTH * (.5 - this.focusPoint.x), this.focusPosition.y + _["default"].STAGE_HEIGHT * (.5 - this.focusPoint.y)), this._particles.update(e)) } }, { key: "destroy", value: function(e) { this.zoomTween && this.zoomTween.kill(), this.focusPointTween && this.focusPointTween.kill(), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "changeZoom", value: function(e, t, i) { null != this.zoomTween && this.zoomTween.kill(), e != this.zoom && (this.zoomTween = new TimelineMax, this.zoomTween.to(this, t, { zoom: e, ease: Sine.easeInOut }, i ? i : 0), this.zoomTarget = e) } }, { key: "changeFocusPoint", value: function(e, t, i) { null != this.focusPointTween && this.focusPointTween.kill(), this.focusPoint.x == e.x && this.focusPoint.y == e.y || (this.focusPointTween = new TimelineMax, this.focusPointTween.to(this.focusPoint, t, { x: e.x, y: e.y, ease: Sine.easeInOut }, i ? i : 0)) } }, { key: "shake", value: function(e, t, i) { return this._shakeDelayTimeline && this._shakeDelayTimeline.kill(), i ? (this._shakeDelayTimeline = new TimelineMax, void this._shakeDelayTimeline.to(this, .01, { onStartScope: this, onStart: function() { this.shake(e, t) } }, i)) : (this._isShake = !0, this._shakeTime = 0, this._shakeTimeEnd = e, void(this._shakeStrength = t)) } }, { key: "removeShake", value: function() { this._shakeDelayTimeline && (this._shakeDelayTimeline.kill(), this._shakeDelayTimeline = null), this._isShake = !1 } }, { key: "createLayer", value: function(e, t) { var i = new P["default"](this, e, t); return this.layers.push(i), this.addChild(i), i } }, { key: "createObstacle", value: function() { var e = new w["default"](this);
                        e.x = this.avatar.x + 1e3, e.y = this.getGroundY(e.x), this.layerMg.addObject(e) } }, { key: "createObstaclePattern", value: function() { if (!(this.avatar.x < this._lastObstacleX)) { var e = void 0;
                            e = this._patternsDropped < 5 ? P3.math.randomInt(0, 1) : this._patternsDropped < 10 ? P3.math.randomInt(0, 2) : P3.math.randomInt(0, 3), null === this._lastObstacleX && (e = 0); var t = null === this._lastObstacleX ? this.avatar.x : this._lastObstacleX,
                                i = void 0;
                            this._patternsDropped++; var n = 15; switch (e) {
                                case 0:
                                    i = new w["default"](this), i.x = this.avatar.x + 1200, i.y = this.getGroundY(i.x) + n, this.layerMg.addObject(i), this._lastObstacleX = i.x; break;
                                case 1:
                                    i = new w["default"](this), i.x = t + 2e3, i.y = this.getGroundY(i.x) + n, this.layerMg.addObject(i), i = new w["default"](this), i.x = t + 2500 + .5 * i.width, i.y = this.getGroundY(i.x) + n, this.layerMg.addObject(i), this._lastObstacleX = i.x; break;
                                case 2:
                                    i = new w["default"](this), i.x = t + 2e3, i.y = this.getGroundY(i.x) + n, this.layerMg.addObject(i), i = new w["default"](this), i.x = t + 2800 + .5 * i.width, i.y = this.getGroundY(i.x) + n, this.layerMg.addObject(i), i = new w["default"](this), i.x = t + 3300 + .5 * i.width, i.y = this.getGroundY(i.x) + n, this.layerMg.addObject(i), this._lastObstacleX = i.x; break;
                                case 3:
                                    i = new w["default"](this), i.x = t + 2e3, i.y = this.getGroundY(i.x) + n, this.layerMg.addObject(i), i = new w["default"](this), i.x = t + 2600 + .5 * i.width, i.y = this.getGroundY(i.x) + n, this.layerMg.addObject(i), i = new w["default"](this), i.x = t + 3200 + .5 * i.width, i.y = this.getGroundY(i.x) + n, this.layerMg.addObject(i), i = new w["default"](this), i.x = t + 3800 + .5 * i.width, i.y = this.getGroundY(i.x) + n, this.layerMg.addObject(i), this._lastObstacleX = i.x } } } }, { key: "initParticles", value: function(e) { var t = _["default"].assets.json("particle_emitter_fairdust_01");
                        t.spawnRect.w = _["default"].STAGE_WIDTH, t.spawnRect.h = _["default"].STAGE_HEIGHT, t.spawnRect.x = -_["default"].STAGE_WIDTH / 2, t.spawnRect.y = -_["default"].STAGE_HEIGHT / 2; var i = new PIXI.particles.Emitter(e, [_["default"].assets.texture("particle_fairy_dust_00"), _["default"].assets.texture("particle_fairy_dust_01")], t); return i.emit = !0, i } }, { key: "getGroundY", value: function() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0; return -Math.sin(this.inclination) * e + 50 } }, { key: "rightLimit", get: function() { return this.focusPosition.x + _["default"].STAGE_WIDTH / this.zoom * (1 - this.focusPoint.x + .5) } }, { key: "leftLimit", get: function() { return this.focusPosition.x - _["default"].STAGE_WIDTH / this.zoom * (this.focusPoint.x + .5) } }]), t }(PIXI.Container);
        i["default"] = x }, { "../../Common": 13, "./Bert": 182, "./Ivandoe": 186, "./Monster": 187, "./Obstacle": 188, "./Target": 189, "./WorldLayer": 192 }],
    192: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function h(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : h(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../../Common"),
            _ = (n(u), function(e) {
                function t(e, i, n) { a(this, t); var s = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return s._world = e, s._name = i, s._parallax = n || 0, s._backgroundTextures = null, s._backgroundDelta = new PIXI.Point(0, 0), s._backgroundWidth = 0, s._backgroundSprites = [], s._backgroundContainer = new PIXI.Container, s.addChild(s._backgroundContainer), s._objects = [], s._objectsContainer = new PIXI.Container, s.addChild(s._objectsContainer), s } return s(t, e), r(t, [{ key: "destroy", value: function(e) { l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, e) } }, { key: "update", value: function(e, t) { this.x += t.x * this._parallax, this.y = -Math.sin(this._world.inclination) * this.x; for (var i = this._objects.length - 1; i >= 0; i--) this._objects[i].x < this._world.leftLimit ? this.removeObject(this._objects[i]) : this._objects[i].update(e);
                        this.updateBackground() } }, { key: "updateBackground", value: function() { if (this._backgroundTextures) { for (var e = this._backgroundWidth, t = (this._backgroundTextures[0].height, 0), i = Math.floor((this._world.leftLimit - this.x) / e); i <= Math.ceil((this._world.rightLimit - this.x) / e); i++) { if (!this._backgroundSprites[t]) { var n = new PIXI.Sprite(this._backgroundTextures[0]);
                                    n.width = this._backgroundWidth, n.anchor.set(0, 1), this._backgroundSprites.push(n), this._backgroundContainer.addChild(n) } this._backgroundSprites[t].texture = this._backgroundTextures[Math.abs(i) % this._backgroundTextures.length], this._backgroundSprites[t].x = Math.floor(i * e + this._backgroundDelta.x) - 1 * i, this._backgroundSprites[t].y = Math.floor(-Math.sin(this._world.inclination) * (i * e) + this._backgroundDelta.y), t++ } for (; t < this._backgroundSprites.length; t++) this._backgroundSprites[t].visible = !1 } } }, { key: "setBackground", value: function(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : new PIXI.Point(0, 0),
                            i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0;
                        this._backgroundTextures = e, this._backgroundDelta = t, this._backgroundWidth = i || e[0].width } }, { key: "addObject", value: function(e) { this._objectsContainer.addChild(e), this._objects.push(e) } }, { key: "removeObject", value: function(e) { var t = this._objects.indexOf(e);
                        t != -1 && (this._objectsContainer.removeChild(e), this._objects.splice(t, 1)) } }, { key: "getObjectsOfType", value: function(e) { for (var t = [], i = this._objects.length - 1; i >= 0; i--) this._objects[i]._type == e && t.push(this._objects[i]); return t } }]), t }(PIXI.Container));
        i["default"] = _ }, { "../../Common": 13 }],
    193: [function(e, t, i) { "use strict";

        function n(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") } Object.defineProperty(i, "__esModule", { value: !0 }); var a = function o(e) { n(this, o), this.name = e, this.description = "", this.value = !1, this.targetValue = !0, this.active = !1, this.complete = !1, this.defaultTexture = PIXI.Texture.EMPTY, this.popupTexture = PIXI.Texture.EMPTY };
        i["default"] = a }, {}],
    194: [function(e, t, i) {
        "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) {
            if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);
        }
        Object.defineProperty(i, "__esModule", { value: !0 });
        var r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) { return typeof e } : function(e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e },
            l = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            u = function v(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : v(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            _ = e("../Common"),
            h = n(_),
            c = e("./Quest"),
            d = n(c),
            p = e("./QuestPopup"),
            f = n(p),
            y = function(e) {
                function t(e) { a(this, t); var i = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return i.signals = { accept: new signals.Signal, progress: new signals.Signal, complete: new signals.Signal }, i._data = e, i._quests = {}, i._list = [], i._queue = [], i._parseQuests(e), i } return s(t, e), l(t, [{ key: "destroy", value: function() { this.signals.complete.dispose(), u(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, { children: !0 }) } }, { key: "resize", value: function() { this.popup && (this.popup.x = .5 * P3.View.width) } }, { key: "load", value: function(e) { for (var t in e) { var i = e[t],
                                n = this._quests[t];
                            n.complete = i.complete } } }, { key: "giveQuest", value: function(e) { var t = this._quests[e];
                        t && !t.active && (t.active = !0, this.signals.accept.dispatch(t)) } }, { key: "progressQuest", value: function(e) { var t = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1],
                            i = this._quests[e]; if (i && i.active && !i.complete) { if (("undefined" == typeof t ? "undefined" : r(t)) !== r(i.targetValue)) throw new Error("Invalid quest value type."); "boolean" == typeof t ? i.value = t : isNaN(t) || (i.value += t), this.signals.progress.dispatch(i, t), i.value >= i.targetValue && (i.complete = !0, this.signals.complete.dispatch(i)) } } }, { key: "completeQuest", value: function(e) { var t = this._quests[e];
                        t && t.active && !t.complete && (t.value = t.targetValue, t.complete = !0, this.signals.complete.dispatch(t), console.log(translate("achievement_unlocked")), this._queuePopup(this._createPopup(translate("narrator_quest5"), t.popupTexture)), h["default"].audio.playSound("sfx_achievement_unlocked_00"), h["default"].chat.inConversation || delay(function() { h["default"].audio.playSound(["vo_narrator_incidental_questsaved_00", "vo_narrator_incidental_questsaved_01"]) }, 1, this), console.log("quest complete:", t.name), h["default"].save.saveGame()) } }, { key: "isComplete", value: function(e) { var t = this._quests[e]; return !!t && t.complete } }, { key: "_parseQuests", value: function(e) { var t = h["default"].assets; for (var i in e)
                            if (e.hasOwnProperty(i)) { var n = e[i],
                                    a = new d["default"](n.name);
                                a.description = n.description, a.value = n.value, a.targetValue = n.targetValue, a.active = n.active, a.complete = n.complete, a.defaultTexture = t.texture(n.textures["default"]), a.popupTexture = t.texture(n.textures.popup), this._quests[i] = a, this._list.push(a) } } }, { key: "_createPopup", value: function(e, t) { var i = new f["default"](e, t); return i.x = .5 * P3.View.width, i.y = 120, i } }, { key: "_queuePopup", value: function(e) { this._queue.push(e), 1 === this._queue.length && this._nextPopup() } }, { key: "_nextPopup", value: function() { if (0 !== this._queue.length) { var e = this.popup;
                            e.animation || (e.animation = new TimelineMax({ onComplete: function() { this._queue.shift(), e.destroy(), this._nextPopup() }, onCompleteScope: this }), e.scale.set(0), e.animation.append(TweenMax.to(e.scale, .4, { delay: .2, x: 1, y: 1, ease: Back.easeOut, easeParams: [2] })), e.animation.append(TweenMax.to(e, .4, { delay: 2, alpha: 0, ease: Power1.easeInOut })), this.addChild(e)) } } }, { key: "toObject", value: function() { var e = {}; for (var t in this._quests) { var i = this._quests[t];
                            e[t] = { complete: i.complete } } return e } }, { key: "list", get: function() { return this._list.slice(0) } }, { key: "popup", get: function() { return this._queue.length > 0 ? this._queue[0] : null } }]), t }(PIXI.Container);
        i["default"] = y
    }, { "../Common": 13, "./Quest": 193, "./QuestPopup": 195 }],
    195: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = e("../Common"),
            u = n(l),
            _ = function(e) {
                function t(e, i) { a(this, t); var n = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return n._panel = null, n._nameLabel = null, n._icon = null, n._createBg(), n._createNameLabel(e), n._createIcon(i), n } return s(t, e), r(t, [{ key: "_createBg", value: function() { var e = u["default"].assets;
                        this._bg = new PIXI.Sprite(e.texture("achivement_popup")), this._bg.anchor = new PIXI.Point(.5, .5), this.addChild(this._bg) } }, { key: "_createNameLabel", value: function(e) { webfont ? (this._nameLabel = new PIXI.Text(e, { fontSize: "24px", fontFamily: "Arial", fill: 0, align: "center", wordWrap: !0, wordWrapWidth: 540 }), this._nameLabel.y = -2, this._nameLabel.anchor.set(.5, .5), this.addChild(this._nameLabel)) : (this._nameLabel = new PIXI.extras.BitmapText(e, { font: "28px Alghera Pro", align: "center" }), this._nameLabel.y = -2, this._nameLabel.anchor.set(.5, .5), this._nameLabel.tint = 0, this.addChild(this._nameLabel)) } }, { key: "_createIcon", value: function(e) { this._icon = new PIXI.Sprite(e), this._icon.x = Math.min(.5 * -(this._nameLabel.textWidth + this._icon.width), -160), this._icon.y = -4, this._icon.anchor = new PIXI.Point(.5, .5), this.addChild(this._icon) } }]), t }(PIXI.Container);
        i["default"] = _ }, { "../Common": 13 }],
    196: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") } Object.defineProperty(i, "__esModule", { value: !0 }); var o = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            s = e("../Common"),
            r = n(s),
            l = e("ismobilejs"),
            u = n(l),
            _ = function() {
                function e(t, i, n, o, s) { a(this, e), this.id = t, this.icon = i, this.off = n, this.over = o, this.iconOffset = s, this.element = null, this.iconElement = null, this.offElement = null, this.overElement = null, this.width = 0, this.height = 0, this.iconScale = 1, this.buttonScale = 1, this.signals = { clicked: new signals.Signal } } return o(e, [{ key: "init", value: function() { this.element = $("<div style='position:absolute;'></div>"), this.iconElement = this.setElement(this.icon, this.iconOffset || new PIXI.Point(0, 0)), this.offElement = this.setElement(this.off, new PIXI.Point(0, 0)), this.overElement = this.setElement(this.over, new PIXI.Point(0, 0)), $(this.overElement).hide(), this.element.append(this.offElement), this.element.append(this.overElement), this.element.append(this.iconElement), this.iconElement.on("click", this.onClick.bind(this)), u["default"].any || (this.iconElement.on("mouseover", this.onRollover.bind(this)), this.iconElement.on("mouseout", this.onRollout.bind(this))), this.iconElement.css("cursor", "pointer") } }, { key: "set", value: function(e, t, i) { this.element.css("left", t + "px"), this.element.css("top", i + "px"), e.append(this.element) } }, { key: "setElement", value: function(e, t) { var i = r["default"].assets.texture(e),
                            n = i._frame.width,
                            a = i._frame.height,
                            o = i._frame.x,
                            s = i._frame.y,
                            l = i.baseTexture.imageUrl,
                            u = $("<div style='position:absolute;'></div>"); return u.css("background-image", "url('" + l + "')"), u.css("background-position", -o + "px " + -s + "px"), u.css("width", n + "px"), u.css("height", a + "px"), u.css("left", -(n / 2) + t.x + "px"), u.css("top", -(a / 2) + t.y + "px"), this.width < n && (this.width = n), this.height < a && (this.height = a), u } }, { key: "setElementScale", value: function(e, t) { e.css({ "-webkit-transform": "scale(" + t + ")" }), e.css({ "-moz-transform": "scale(" + t + ")" }), e.css({ "-o-transform": "scale(" + t + ")" }), e.css({ transform: "scale(" + t + ")" }) } }, { key: "onClick", value: function() { this.signals.clicked.dispatch() } }, { key: "onRollover", value: function() { $(this.overElement).show(), TweenMax.to(this, .5, { buttonScale: 1.1, ease: Back.easeOut, onUpdateScope: this, onUpdate: function() { this.setElementScale(this.overElement, this.buttonScale), this.setElementScale(this.offElement, this.buttonScale) } }), TweenMax.to(this, .5, { iconScale: 1.4, ease: Elastic.easeOut, onUpdateScope: this, onUpdate: function() { this.setElementScale(this.iconElement, this.iconScale) } }) } }, { key: "onRollout", value: function() { $(this.overElement).hide(), TweenMax.to(this, .5, { buttonScale: 1, ease: Back.easeIn, onUpdateScope: this, onUpdate: function() { this.setElementScale(this.overElement, this.buttonScale), this.setElementScale(this.offElement, this.buttonScale) } }), TweenMax.to(this, .5, { iconScale: 1, ease: Sine.easeInOut, onUpdateScope: this, onUpdate: function() { this.setElementScale(this.iconElement, this.iconScale) } }) } }]), e }();
        i["default"] = _ }, { "../Common": 13, ismobilejs: 2 }],
    197: [function(e, t, i) { "use strict";

        function n(e) { return e && e.__esModule ? e : { "default": e } }

        function a(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function o(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function s(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var r = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            l = function c(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : c(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            u = e("../Common"),
            _ = n(u),
            h = function(e) {
                function t() { a(this, t); var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e.signals = { start: new signals.Signal, stop: new signals.Signal, scroll: new signals.Signal }, e._offset = new PIXI.Point, e._pressed = !1, e._track = null, e._handle = null, e._upButton = null, e._downButton = null, e._onMouseScrollBind = null, e.init(), e } return s(t, e), r(t, [{ key: "init", value: function() { var e = this;
                        this.interactive = !0; var t = _["default"].assets;
                        this._track = new PIXI.Sprite(t.texture("slider")), this._track.anchor = new PIXI.Point(.5, 0), this.addChild(this._track), this._handle = new PIXI.Sprite(t.texture("slider_btn")), this._handle.y = Math.round(.5 * this._handle.height), this._handle.anchor = new PIXI.Point(.5, .5), this._handle.interactive = !0, this._handle.mousedown = this._handle.touchstart = this._onHandleMouseDown.bind(this), this._handle.mouseup = this._handle.mouseupoutside = this._handle.touchend = this._handle.touchendoutside = this._onHandleMouseUp.bind(this), this._handle.mousemove = this._handle.touchmove = this._onHandleMouseMove.bind(this), this.addChild(this._handle), this._onMouseScrollBind = function(t) { e._onMouseScroll.call(e, t) }, document.addEventListener("mousewheel", this._onMouseScrollBind, !1) } }, { key: "destroy", value: function() { this.signals.start.dispose(), this.signals.stop.dispose(), this.signals.scroll.dispose(), this._handle.mousedown = this._handle.touchstart = null, this._handle.mouseup = this._handle.mouseupoutside = this._handle.touchend = this._handle.touchendoutside = null, this._handle.mousemove = this._handle.touchmove = null, document.removeEventListener("mousewheel", this._onMouseScrollBind), l(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, { removeChildren: !0 }) } }, { key: "scroll", value: function(e) { var t = Math.round(.5 * this._handle.height);
                        e += .5 * this._handle.height - 6, e = e < t ? t : e, e = e > this._track.texture.height - t ? this._track.texture.height - t : e, this._handle.y = e } }, { key: "reset", value: function() { this.scroll(0) } }, { key: "_onHandleMouseDown", value: function(e) { this._pressed = !0, this._offset = e.data.getLocalPosition(this._handle), this.signals.start.dispatch(this) } }, { key: "_onHandleMouseUp", value: function(e) { this._pressed = !1, this.signals.stop.dispatch(this) } }, { key: "_onHandleMouseMove", value: function(e) { if (this._pressed) { var t = e.data.getLocalPosition(this),
                                i = t.y - this._offset.y - .5 * this._handle.height;
                            this.scroll(i); var n = Math.round(.5 * this._handle.height),
                                a = Math.max(0, Math.min(1, i / (this._track.texture.height - n - n)));
                            this.signals.scroll.dispatch(this, a) } } }, { key: "_onMouseScroll", value: function(e) { var t = .4 * e.deltaY,
                            i = this._handle.y - this._offset.y - .5 * this._handle.height;
                        this.scroll(i + t); var n = Math.round(.5 * this._handle.height),
                            a = Math.max(0, Math.min(1, i / (this._track.texture.height - n - n)));
                        this.signals.scroll.dispatch(this, a) } }, { key: "innerHeight", get: function() { return this._track.texture.height - this._handle.height } }]), t }(PIXI.Container);
        i["default"] = h }, { "../Common": 13 }],
    198: [function(e, t, i) { "use strict";

        function n(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

        function a(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }

        function o(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } Object.defineProperty(i, "__esModule", { value: !0 }); var s = function() {
                function e(e, t) { for (var i = 0; i < t.length; i++) { var n = t[i];
                        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n) } } return function(t, i, n) { return i && e(t.prototype, i), n && e(t, n), t } }(),
            r = function u(e, t, i) { null === e && (e = Function.prototype); var n = Object.getOwnPropertyDescriptor(e, t); if (void 0 === n) { var a = Object.getPrototypeOf(e); return null === a ? void 0 : u(a, t, i) } if ("value" in n) return n.value; var o = n.get; if (void 0 !== o) return o.call(i) },
            l = function(e) {
                function t(e, i, o, s) { n(this, t); var r = a(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return r.signals = { start: new signals.Signal, stop: new signals.Signal, scroll: new signals.Signal }, r.contentWidth = o, r.contentHeight = s, r._reference = new PIXI.Point, r._velocity = new PIXI.Point, r._amplitude = new PIXI.Point, r._target = new PIXI.Point, r._offset = new PIXI.Point, r._frame = new PIXI.Point, r._time = Date.now(), r._content = null, r._frameWidth = e, r._frameHeight = i, r._pressed = !1, r.init(), r } return o(t, e), s(t, [{ key: "init", value: function() { var e = new PIXI.Graphics;
                        e.beginFill(16711680), e.drawRect(0, 0, this._frameWidth, this._frameHeight), e.endFill(), this.addChild(e), this._content = new PIXI.Container, this._content.mask = e, this.addChild(this._content), this.hitArea = new PIXI.Rectangle(0, 0, this._frameWidth, this._frameHeight), this.interactive = !0, this.mousedown = this.touchstart = this._onMouseDown.bind(this), this.mouseup = this.touchend = this._onMouseUp.bind(this), this.mousemove = this.touchmove = this._onMouseMove.bind(this) } }, { key: "destroy", value: function() { this.signals.start.dispose(), this.signals.stop.dispose(), this.signals.scroll.dispose(), this.mousedown = this.touchstart = null, this.mouseup = this.touchend = null, this.mousemove = this.touchmove = null, r(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "destroy", this).call(this, { removeChildren: !0 }) } }, { key: "update", value: function(e) { this._pressed ? this._track() : this._autoScroll(e) } }, { key: "scroll", value: function(e, t) { var i = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
                        this._offset.x = e > this.contentWidth ? this.contentWidth : e < 0 ? 0 : e, this._offset.y = t > this.contentHeight ? this.contentHeight : t < 0 ? 0 : t, this._content.x = -this._offset.x, this._content.y = -this._offset.y, i && (this._amplitude.set(0, 0), this._target.set(0, 0), this._velocity.set(0, 0)) } }, { key: "reset", value: function() { this.scroll(0, 0, !0) } }, { key: "_track", value: function() { var e = Date.now(),
                            t = e - this._time;
                        this._time = e; var i = new PIXI.Point(this._offset.x - this._frame.x, this._offset.y - this._frame.y);
                        this._frame = this._offset.clone(); var n = new PIXI.Point(1e3 * i.x / (1 + t), 1e3 * i.y / (1 + t));
                        this._velocity = new PIXI.Point(.4 * n.x + .2 * this._velocity.x, .4 * n.y + .2 * this._velocity.y) } }, { key: "_autoScroll", value: function() { if (this._amplitude.x || this._amplitude.y) { var e = Date.now() - this._time,
                                t = new PIXI.Point(-this._amplitude.x * Math.exp(-e / 325), -this._amplitude.y * Math.exp(-e / 325));
                            t.x > .5 || t.x < -.5 || t.y > .5 || t.y < -.5 ? this.scroll(this._target.x + t.x, this._target.y + t.y) : this.scroll(this._target.x, this._target.y), this.signals.scroll.dispatch(this, new PIXI.Point(Math.abs(this._content.x), Math.abs(this._content.y))) } } }, { key: "_onMouseDown", value: function(e) { this._pressed = !0, this._reference = e.data.getLocalPosition(this), this._velocity = new PIXI.Point, this._amplitude = new PIXI.Point, this._frame = this._offset.clone(), this._time = Date.now(), this.signals.start.dispatch(this) } }, { key: "_onMouseUp", value: function(e) { this._pressed = !1, e && ((this._velocity.x > 10 || this._velocity.x < -10 || this._velocity.y > 10 || this._velocity.y < -10) && (this._amplitude = new PIXI.Point(.6 * this._velocity.x, .6 * this._velocity.y), this._target = new PIXI.Point(Math.round(this._offset.x + this._amplitude.x), Math.round(this._offset.y + this._amplitude.y)), this._time = Date.now()), this._reference = e.data.getLocalPosition(this)), this.signals.stop.dispatch(this) } }, { key: "_onMouseMove", value: function(e) { if (this._pressed) { var t = e.data.getLocalPosition(this),
                                i = new PIXI.Point(this._reference.x - t.x, this._reference.y - t.y);
                            (i.x > 2 || i.x < 2 || i.y > 2 || i.y < -2) && (this._reference = t.clone(), this.scroll(this._offset.x + i.x, this._offset.y + i.y), this.signals.scroll.dispatch(this, new PIXI.Point(Math.abs(this._content.x), Math.abs(this._content.y)))) } } }, { key: "content", get: function() { return this._content } }, { key: "frameWidth", get: function() { return this._frameWidth } }, { key: "frameHeight", get: function() { return this._frameHeight } }, { key: "pressed", get: function() { return this._pressed } }]), t }(PIXI.Container);
        i["default"] = l }, {}]
}, {}, [74]);
//# sourceMappingURL=bundle.min.js.map