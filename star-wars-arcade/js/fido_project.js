function hasCanvasSupport(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))}function gameStart(){window.valid=!0}define("fido/app/Fallback",["require","exports","module"],function(t,e,i){var r=function(t){this.domElement=t||document.body;var e={message:'<p>Uh-oh! It looks like you need to update your browser before you\'ll be able to play this game</p><p>In the meantime, check out <a href="#brand_url">this</a> or <a href="#cbeebies_games_url">this</a>.',brand_url:"http://www.someurl.tld/",games_url:"http://www.someurl.tld/",enabled:!0},i=e.message;i=i.replace("#brand_url",e.brand_url),i=i.replace("#games_url",e.games_url),this.active=!1,this.checkDevice(navigator.userAgent),this.checkCanvas(),this.checkCookies()};r.prototype.constructor=r,r.prototype={checkDevice:function(t){for(var e=[/(Mobile\/8C148)/,/(Mobile\/8C148a)/,/(Mobile\/8A293)/,/(Mobile\/8A306)/,/(Mobile\/8A400)/,/(Mobile\/8B117)/,/(Mobile\/8E128)/,/(Mobile\/8E200)/,/(Mobile\/8E303)/,/(Mobile\/8E401)/,/(Mobile\/8E600)/,/(Mobile\/8E501)/,/(Mobile\/8G4)/,/(Mobile\/8H7)/,/(Mobile\/8J2)/,/(Mobile\/8K2)/,/(Mobile\/8L1)/,/(Mobile\/9A334)/,/(Mobile\/10A523)/,/(Mobile\/9A405)/],i=0;i<e.length;i++)if(t.match(e[i])){var r=ASSET_URL+"img/unsupported.jpg";return this.createBigImage(r),!1}if(/iP[ao]d|iPhone/i.test(t)){var n=parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||!1;if(n<6){var r=ASSET_URL+"img/unsupported.jpg";return this.createBigImage(r),!1}}},checkCanvas:function(){if(!this.hasCanvasSupport()){var t=ASSET_URL+"img/unsupported.jpg";return this.createBigImage(t),!1}return!0},hasCanvasSupport:function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))},checkCookies:function(){if(!this.cookiesEnabled()){var t=ASSET_URL+"img/cookies.jpg";this.createBigImage(t)}},cookiesEnabled:function(){var t=!!navigator.cookieEnabled;return"undefined"!=typeof navigator.cookieEnabled||t||(document.cookie="testcookie",t=document.cookie.indexOf("testcookie")!=-1),t},createBigImage2:function(t){var e=document.createElement("div");e.style.backgroundPosition="50% 50%",e.style.backgroundColor="#3b3b3b",e.style.backgroundRepeat="no-repeat",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.bottom="0",e.style.right="0",e.style.zIndex=1e5,e.height="100%",e.width="100%",e.style.backgroundImage="url("+t+")",this.domElement.appendChild(e),this.active=!0},createBigImage:function(t){var e=new Image;e.style.backgroundPosition="50% 50%",e.style.backgroundColor="#3b3b3b",e.style.backgroundRepeat="no-repeat",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.bottom="0",e.style.right="0",e.style.zIndex=1e5,e.src=t,this.domElement.appendChild(e),window.onresize=function(){var t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,i=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,r=t/750;r>1&&(r=1),e.width=750*r,e.height=500*r,e.style.left=t/2-750*r/2+"px",e.style.top=i/2-500*r/2+"px"},window.onresize(),this.active=!0}},i.exports=r});var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){_gsScope._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var r=function(t){var e,i=[],r=t.length;for(e=0;e!==r;i.push(t[e++]));return i},n=function(t,e,r){i.call(this,t,e,r),this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=n.prototype.render},s=1e-10,o=i._internals,a=o.isSelector,h=o.isArray,l=n.prototype=i.to({},.1,{}),c=[];n.version="1.17.0",l.constructor=n,l.kill()._gc=!1,n.killTweensOf=n.killDelayedCallsTo=i.killTweensOf,n.getTweensOf=i.getTweensOf,n.lagSmoothing=i.lagSmoothing,n.ticker=i.ticker,n.render=i.render,l.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),i.prototype.invalidate.call(this)},l.updateTo=function(t,e){var r,n=this.ratio,s=this.vars.immediateRender||t.immediateRender;e&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(r in t)this.vars[r]=t[r];if(this._initted||s)if(e)this._initted=!1,s&&this.render(0,!0,!0);else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&i._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var o=this._time;this.render(0,!0,!1),this._initted=!1,this.render(o,!0,!1)}else if(this._time>0||s){this._initted=!1,this._init();for(var a,h=1/(1-n),l=this._firstPT;l;)a=l.s+l.c,l.c*=h,l.s=a-l.c,l=l._next}return this},l.render=function(t,e,i){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var r,n,a,h,l,c,u,d,p=this._dirty?this.totalDuration():this._totalDuration,f=this._time,m=this._totalTime,g=this._cycle,v=this._duration,_=this._rawPrevTime;if(t>=p?(this._totalTime=p,this._cycle=this._repeat,this._yoyo&&0!==(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=v,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(r=!0,n="onComplete",i=i||this._timeline.autoRemoveChildren),0===v&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(0===t||0>_||_===s)&&_!==t&&(i=!0,_>s&&(n="onReverseComplete")),this._rawPrevTime=d=!e||t||_===t?t:s)):1e-7>t?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==m||0===v&&_>0)&&(n="onReverseComplete",r=this._reversed),0>t&&(this._active=!1,0===v&&(this._initted||!this.vars.lazy||i)&&(_>=0&&(i=!0),this._rawPrevTime=d=!e||t||_===t?t:s)),this._initted||(i=!0)):(this._totalTime=this._time=t,0!==this._repeat&&(h=v+this._repeatDelay,this._cycle=this._totalTime/h>>0,0!==this._cycle&&this._cycle===this._totalTime/h&&this._cycle--,this._time=this._totalTime-this._cycle*h,this._yoyo&&0!==(1&this._cycle)&&(this._time=v-this._time),this._time>v?this._time=v:0>this._time&&(this._time=0)),this._easeType?(l=this._time/v,c=this._easeType,u=this._easePower,(1===c||3===c&&l>=.5)&&(l=1-l),3===c&&(l*=2),1===u?l*=l:2===u?l*=l*l:3===u?l*=l*l*l:4===u&&(l*=l*l*l*l),this.ratio=1===c?1-l:2===c?l:.5>this._time/v?l/2:1-l/2):this.ratio=this._ease.getRatio(this._time/v)),f===this._time&&!i&&g===this._cycle)return void(m!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate")));if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=f,this._totalTime=m,this._rawPrevTime=_,this._cycle=g,o.lazyTweens.push(this),void(this._lazy=[t,e]);this._time&&!r?this.ratio=this._ease.getRatio(this._time/v):r&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==f&&t>=0&&(this._active=!0),0===m&&(2===this._initted&&t>0&&this._init(),this._startAt&&(t>=0?this._startAt.render(t,e,i):n||(n="_dummyGS")),this.vars.onStart&&(0!==this._totalTime||0===v)&&(e||this._callback("onStart"))),a=this._firstPT;a;)a.f?a.t[a.p](a.c*this.ratio+a.s):a.t[a.p]=a.c*this.ratio+a.s,a=a._next;this._onUpdate&&(0>t&&this._startAt&&this._startTime&&this._startAt.render(t,e,i),e||(this._totalTime!==m||r)&&this._callback("onUpdate")),this._cycle!==g&&(e||this._gc||this.vars.onRepeat&&this._callback("onRepeat")),n&&(!this._gc||i)&&(0>t&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(t,e,i),r&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[n]&&this._callback(n),0===v&&this._rawPrevTime===s&&d!==s&&(this._rawPrevTime=0))},n.to=function(t,e,i){return new n(t,e,i)},n.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new n(t,e,i)},n.fromTo=function(t,e,i,r){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,new n(t,e,r)},n.staggerTo=n.allTo=function(t,e,s,o,l,u,d){o=o||0;var p,f,m,g,v=s.delay||0,_=[],y=function(){s.onComplete&&s.onComplete.apply(s.onCompleteScope||this,arguments),l.apply(d||s.callbackScope||this,u||c)};for(h(t)||("string"==typeof t&&(t=i.selector(t)||t),a(t)&&(t=r(t))),t=t||[],0>o&&(t=r(t),t.reverse(),o*=-1),p=t.length-1,m=0;p>=m;m++){f={};for(g in s)f[g]=s[g];f.delay=v,m===p&&l&&(f.onComplete=y),_[m]=new n(t[m],e,f),v+=o}return _},n.staggerFrom=n.allFrom=function(t,e,i,r,s,o,a){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,n.staggerTo(t,e,i,r,s,o,a)},n.staggerFromTo=n.allFromTo=function(t,e,i,r,s,o,a,h){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,n.staggerTo(t,e,r,s,o,a,h)},n.delayedCall=function(t,e,i,r,s){return new n(e,0,{delay:t,onComplete:e,onCompleteParams:i,callbackScope:r,onReverseComplete:e,onReverseCompleteParams:i,immediateRender:!1,useFrames:s,overwrite:0})},n.set=function(t,e){return new n(t,0,e)},n.isTweening=function(t){return i.getTweensOf(t,!0).length>0};var u=function(t,e){for(var r=[],n=0,s=t._first;s;)s instanceof i?r[n++]=s:(e&&(r[n++]=s),r=r.concat(u(s,e)),n=r.length),s=s._next;return r},d=n.getAllTweens=function(e){return u(t._rootTimeline,e).concat(u(t._rootFramesTimeline,e))};n.killAll=function(t,i,r,n){null==i&&(i=!0),null==r&&(r=!0);var s,o,a,h=d(0!=n),l=h.length,c=i&&r&&n;for(a=0;l>a;a++)o=h[a],(c||o instanceof e||(s=o.target===o.vars.onComplete)&&r||i&&!s)&&(t?o.totalTime(o._reversed?0:o.totalDuration()):o._enabled(!1,!1))},n.killChildTweensOf=function(t,e){if(null!=t){var s,l,c,u,d,p=o.tweenLookup;if("string"==typeof t&&(t=i.selector(t)||t),a(t)&&(t=r(t)),h(t))for(u=t.length;--u>-1;)n.killChildTweensOf(t[u],e);else{s=[];for(c in p)for(l=p[c].target.parentNode;l;)l===t&&(s=s.concat(p[c].tweens)),l=l.parentNode;for(d=s.length,u=0;d>u;u++)e&&s[u].totalTime(s[u].totalDuration()),s[u]._enabled(!1,!1)}}};var p=function(t,i,r,n){i=i!==!1,r=r!==!1,n=n!==!1;for(var s,o,a=d(n),h=i&&r&&n,l=a.length;--l>-1;)o=a[l],(h||o instanceof e||(s=o.target===o.vars.onComplete)&&r||i&&!s)&&o.paused(t)};return n.pauseAll=function(t,e,i){p(!0,t,e,i)},n.resumeAll=function(t,e,i){p(!1,t,e,i)},n.globalTimeScale=function(e){var r=t._rootTimeline,n=i.ticker.time;return arguments.length?(e=e||s,r._startTime=n-(n-r._startTime)*r._timeScale/e,r=t._rootFramesTimeline,n=i.ticker.frame,r._startTime=n-(n-r._startTime)*r._timeScale/e,r._timeScale=t._rootTimeline._timeScale=e,e):r._timeScale},l.progress=function(t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},l.totalProgress=function(t){return arguments.length?this.totalTime(this.totalDuration()*t,!1):this._totalTime/this.totalDuration()},l.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!==(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},l.duration=function(e){return arguments.length?t.prototype.duration.call(this,e):this._duration},l.totalDuration=function(t){return arguments.length?-1===this._repeat?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},l.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},l.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},l.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},n},!0),_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var r=function(t){e.call(this,t),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var i,r,n=this.vars;for(r in n)i=n[r],h(i)&&-1!==i.join("").indexOf("{self}")&&(n[r]=this._swapSelfInParams(i));h(n.tweens)&&this.add(n.tweens,0,n.align,n.stagger)},n=1e-10,s=i._internals,o=r._internals={},a=s.isSelector,h=s.isArray,l=s.lazyTweens,c=s.lazyRender,u=[],d=_gsScope._gsDefine.globals,p=function(t){var e,i={};for(e in t)i[e]=t[e];return i},f=o.pauseCallback=function(t,e,i,r){var s,o=t._timeline,a=o._totalTime,h=t._startTime,l=0>t._rawPrevTime||0===t._rawPrevTime&&o._reversed,c=l?0:n,d=l?n:0;if(e||!this._forcingPlayhead){for(o.pause(h),s=t._prev;s&&s._startTime===h;)s._rawPrevTime=d,s=s._prev;for(s=t._next;s&&s._startTime===h;)s._rawPrevTime=c,s=s._next;e&&e.apply(r||o.vars.callbackScope||o,i||u),(this._forcingPlayhead||!o._paused)&&o.seek(a)}},m=function(t){var e,i=[],r=t.length;for(e=0;e!==r;i.push(t[e++]));return i},g=r.prototype=new e;return r.version="1.17.0",g.constructor=r,g.kill()._gc=g._forcingPlayhead=!1,g.to=function(t,e,r,n){var s=r.repeat&&d.TweenMax||i;return e?this.add(new s(t,e,r),n):this.set(t,r,n)},g.from=function(t,e,r,n){return this.add((r.repeat&&d.TweenMax||i).from(t,e,r),n)},g.fromTo=function(t,e,r,n,s){var o=n.repeat&&d.TweenMax||i;return e?this.add(o.fromTo(t,e,r,n),s):this.set(t,n,s)},g.staggerTo=function(t,e,n,s,o,h,l,c){var u,d=new r({onComplete:h,onCompleteParams:l,callbackScope:c,smoothChildTiming:this.smoothChildTiming});for("string"==typeof t&&(t=i.selector(t)||t),t=t||[],a(t)&&(t=m(t)),s=s||0,0>s&&(t=m(t),t.reverse(),s*=-1),u=0;t.length>u;u++)n.startAt&&(n.startAt=p(n.startAt)),d.to(t[u],e,p(n),u*s);return this.add(d,o)},g.staggerFrom=function(t,e,i,r,n,s,o,a){return i.immediateRender=0!=i.immediateRender,i.runBackwards=!0,this.staggerTo(t,e,i,r,n,s,o,a)},g.staggerFromTo=function(t,e,i,r,n,s,o,a,h){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,this.staggerTo(t,e,r,n,s,o,a,h)},g.call=function(t,e,r,n){return this.add(i.delayedCall(0,t,e,r),n)},g.set=function(t,e,r){return r=this._parseTimeOrLabel(r,0,!0),null==e.immediateRender&&(e.immediateRender=r===this._time&&!this._paused),this.add(new i(t,0,e),r)},r.exportRoot=function(t,e){t=t||{},null==t.smoothChildTiming&&(t.smoothChildTiming=!0);var n,s,o=new r(t),a=o._timeline;for(null==e&&(e=!0),a._remove(o,!0),o._startTime=0,o._rawPrevTime=o._time=o._totalTime=a._time,n=a._first;n;)s=n._next,e&&n instanceof i&&n.target===n.vars.onComplete||o.add(n,n._startTime-n._delay),n=s;return a.add(o,0),o},g.add=function(n,s,o,a){var l,c,u,d,p,f;if("number"!=typeof s&&(s=this._parseTimeOrLabel(s,0,!0,n)),!(n instanceof t)){if(n instanceof Array||n&&n.push&&h(n)){for(o=o||"normal",a=a||0,l=s,c=n.length,u=0;c>u;u++)h(d=n[u])&&(d=new r({tweens:d})),this.add(d,l),"string"!=typeof d&&"function"!=typeof d&&("sequence"===o?l=d._startTime+d.totalDuration()/d._timeScale:"start"===o&&(d._startTime-=d.delay())),l+=a;return this._uncache(!0)}if("string"==typeof n)return this.addLabel(n,s);if("function"!=typeof n)throw"Cannot add "+n+" into the timeline; it is not a tween, timeline, function, or string.";n=i.delayedCall(0,n)}if(e.prototype.add.call(this,n,s),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(p=this,f=p.rawTime()>n._startTime;p._timeline;)f&&p._timeline.smoothChildTiming?p.totalTime(p._totalTime,!0):p._gc&&p._enabled(!0,!1),p=p._timeline;return this},g.remove=function(e){if(e instanceof t)return this._remove(e,!1);if(e instanceof Array||e&&e.push&&h(e)){for(var i=e.length;--i>-1;)this.remove(e[i]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},g._remove=function(t,i){e.prototype._remove.call(this,t,i);var r=this._last;return r?this._time>r._startTime+r._totalDuration/r._timeScale&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},g.append=function(t,e){return this.add(t,this._parseTimeOrLabel(null,e,!0,t))},g.insert=g.insertMultiple=function(t,e,i,r){return this.add(t,e||0,i,r)},g.appendMultiple=function(t,e,i,r){return this.add(t,this._parseTimeOrLabel(null,e,!0,t),i,r)},g.addLabel=function(t,e){return this._labels[t]=this._parseTimeOrLabel(e),this},g.addPause=function(t,e,r,n){var s=i.delayedCall(0,f,["{self}",e,r,n],this);return s.data="isPause",this.add(s,t)},g.removeLabel=function(t){return delete this._labels[t],this},g.getLabelTime=function(t){return null!=this._labels[t]?this._labels[t]:-1},g._parseTimeOrLabel=function(e,i,r,n){var s;if(n instanceof t&&n.timeline===this)this.remove(n);else if(n&&(n instanceof Array||n.push&&h(n)))for(s=n.length;--s>-1;)n[s]instanceof t&&n[s].timeline===this&&this.remove(n[s]);if("string"==typeof i)return this._parseTimeOrLabel(i,r&&"number"==typeof e&&null==this._labels[i]?e-this.duration():0,r);if(i=i||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=this.duration());else{if(s=e.indexOf("="),-1===s)return null==this._labels[e]?r?this._labels[e]=this.duration()+i:i:this._labels[e]+i;i=parseInt(e.charAt(s-1)+"1",10)*Number(e.substr(s+1)),e=s>1?this._parseTimeOrLabel(e.substr(0,s-1),0,r):this.duration()}return Number(e)+i},g.seek=function(t,e){return this.totalTime("number"==typeof t?t:this._parseTimeOrLabel(t),e!==!1)},g.stop=function(){return this.paused(!0)},g.gotoAndPlay=function(t,e){return this.play(t,e)},g.gotoAndStop=function(t,e){return this.pause(t,e)},g.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var r,s,o,a,h,u=this._dirty?this.totalDuration():this._totalDuration,d=this._time,p=this._startTime,f=this._timeScale,m=this._paused;if(t>=u)this._totalTime=this._time=u,this._reversed||this._hasPausedChild()||(s=!0,a="onComplete",h=!!this._timeline.autoRemoveChildren,0===this._duration&&(0===t||0>this._rawPrevTime||this._rawPrevTime===n)&&this._rawPrevTime!==t&&this._first&&(h=!0,this._rawPrevTime>n&&(a="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:n,t=u+1e-4;else if(1e-7>t)if(this._totalTime=this._time=0,(0!==d||0===this._duration&&this._rawPrevTime!==n&&(this._rawPrevTime>0||0>t&&this._rawPrevTime>=0))&&(a="onReverseComplete",s=this._reversed),0>t)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(h=s=!0,a="onReverseComplete"):this._rawPrevTime>=0&&this._first&&(h=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:n,0===t&&s)for(r=this._first;r&&0===r._startTime;)r._duration||(s=!1),r=r._next;t=0,this._initted||(h=!0)}else this._totalTime=this._time=this._rawPrevTime=t;if(this._time!==d&&this._first||i||h){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==d&&t>0&&(this._active=!0),0===d&&this.vars.onStart&&0!==this._time&&(e||this._callback("onStart")),this._time>=d)for(r=this._first;r&&(o=r._next,!this._paused||m);)(r._active||r._startTime<=this._time&&!r._paused&&!r._gc)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=o;else for(r=this._last;r&&(o=r._prev,!this._paused||m);)(r._active||d>=r._startTime&&!r._paused&&!r._gc)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=o;this._onUpdate&&(e||(l.length&&c(),this._callback("onUpdate"))),a&&(this._gc||(p===this._startTime||f!==this._timeScale)&&(0===this._time||u>=this.totalDuration())&&(s&&(l.length&&c(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[a]&&this._callback(a)))}},g._hasPausedChild=function(){for(var t=this._first;t;){if(t._paused||t instanceof r&&t._hasPausedChild())return!0;t=t._next}return!1},g.getChildren=function(t,e,r,n){n=n||-9999999999;for(var s=[],o=this._first,a=0;o;)n>o._startTime||(o instanceof i?e!==!1&&(s[a++]=o):(r!==!1&&(s[a++]=o),t!==!1&&(s=s.concat(o.getChildren(!0,e,r)),a=s.length))),o=o._next;return s},g.getTweensOf=function(t,e){var r,n,s=this._gc,o=[],a=0;for(s&&this._enabled(!0,!0),r=i.getTweensOf(t),n=r.length;--n>-1;)(r[n].timeline===this||e&&this._contains(r[n]))&&(o[a++]=r[n]);return s&&this._enabled(!1,!0),o},g.recent=function(){return this._recent},g._contains=function(t){for(var e=t.timeline;e;){if(e===this)return!0;e=e.timeline}return!1},g.shiftChildren=function(t,e,i){i=i||0;for(var r,n=this._first,s=this._labels;n;)n._startTime>=i&&(n._startTime+=t),n=n._next;if(e)for(r in s)s[r]>=i&&(s[r]+=t);return this._uncache(!0)},g._kill=function(t,e){if(!t&&!e)return this._enabled(!1,!1);for(var i=e?this.getTweensOf(e):this.getChildren(!0,!0,!1),r=i.length,n=!1;--r>-1;)i[r]._kill(t,e)&&(n=!0);return n},g.clear=function(t){var e=this.getChildren(!1,!0,!0),i=e.length;for(this._time=this._totalTime=0;--i>-1;)e[i]._enabled(!1,!1);return t!==!1&&(this._labels={}),this._uncache(!0)},g.invalidate=function(){for(var e=this._first;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},g._enabled=function(t,i){if(t===this._gc)for(var r=this._first;r;)r._enabled(t,!0),r=r._next;return e.prototype._enabled.call(this,t,i)},g.totalTime=function(){this._forcingPlayhead=!0;var e=t.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,e},g.duration=function(t){return arguments.length?(0!==this.duration()&&0!==t&&this.timeScale(this._duration/t),this):(this._dirty&&this.totalDuration(),this._duration)},g.totalDuration=function(t){if(!arguments.length){if(this._dirty){for(var e,i,r=0,n=this._last,s=999999999999;n;)e=n._prev,n._dirty&&n.totalDuration(),n._startTime>s&&this._sortChildren&&!n._paused?this.add(n,n._startTime-n._delay):s=n._startTime,0>n._startTime&&!n._paused&&(r-=n._startTime,this._timeline.smoothChildTiming&&(this._startTime+=n._startTime/this._timeScale),this.shiftChildren(-n._startTime,!1,-9999999999),s=0),i=n._startTime+n._totalDuration/n._timeScale,i>r&&(r=i),n=e;this._duration=this._totalDuration=r,this._dirty=!1}return this._totalDuration}return 0!==this.totalDuration()&&0!==t&&this.timeScale(this._totalDuration/t),this},g.paused=function(e){if(!e)for(var i=this._first,r=this._time;i;)i._startTime===r&&"isPause"===i.data&&(i._rawPrevTime=0),i=i._next;return t.prototype.paused.apply(this,arguments)},g.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===t._rootFramesTimeline},g.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},r},!0),_gsScope._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(t,e,i){var r=function(e){t.call(this,e),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._dirty=!0},n=1e-10,s=e._internals,o=s.lazyTweens,a=s.lazyRender,h=new i(null,null,1,0),l=r.prototype=new t;return l.constructor=r,l.kill()._gc=!1,r.version="1.17.0",l.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),t.prototype.invalidate.call(this)},l.addCallback=function(t,i,r,n){return this.add(e.delayedCall(0,t,r,n),i)},l.removeCallback=function(t,e){if(t)if(null==e)this._kill(null,t);else for(var i=this.getTweensOf(t,!1),r=i.length,n=this._parseTimeOrLabel(e);--r>-1;)i[r]._startTime===n&&i[r]._enabled(!1,!1);return this},l.removePause=function(e){return this.removeCallback(t._internals.pauseCallback,e)},l.tweenTo=function(t,i){i=i||{};var r,n,s,o={ease:h,useFrames:this.usesFrames(),immediateRender:!1};for(n in i)o[n]=i[n];return o.time=this._parseTimeOrLabel(t),r=Math.abs(Number(o.time)-this._time)/this._timeScale||.001,s=new e(this,r,o),o.onStart=function(){s.target.paused(!0),s.vars.time!==s.target.time()&&r===s.duration()&&s.duration(Math.abs(s.vars.time-s.target.time())/s.target._timeScale),i.onStart&&s._callback("onStart")},s},l.tweenFromTo=function(t,e,i){i=i||{},t=this._parseTimeOrLabel(t),i.startAt={onComplete:this.seek,onCompleteParams:[t],callbackScope:this},i.immediateRender=i.immediateRender!==!1;var r=this.tweenTo(e,i);return r.duration(Math.abs(r.vars.time-t)/this._timeScale||.001)},l.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var r,s,h,l,c,u,d=this._dirty?this.totalDuration():this._totalDuration,p=this._duration,f=this._time,m=this._totalTime,g=this._startTime,v=this._timeScale,_=this._rawPrevTime,y=this._paused,x=this._cycle;if(t>=d)this._locked||(this._totalTime=d,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(s=!0,l="onComplete",c=!!this._timeline.autoRemoveChildren,0===this._duration&&(0===t||0>_||_===n)&&_!==t&&this._first&&(c=!0,_>n&&(l="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:n,this._yoyo&&0!==(1&this._cycle)?this._time=t=0:(this._time=p,t=p+1e-4);else if(1e-7>t)if(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==f||0===p&&_!==n&&(_>0||0>t&&_>=0)&&!this._locked)&&(l="onReverseComplete",s=this._reversed),0>t)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(c=s=!0,l="onReverseComplete"):_>=0&&this._first&&(c=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=p||!e||t||this._rawPrevTime===t?t:n,0===t&&s)for(r=this._first;r&&0===r._startTime;)r._duration||(s=!1),r=r._next;t=0,this._initted||(c=!0)}else 0===p&&0>_&&(c=!0),this._time=this._rawPrevTime=t,this._locked||(this._totalTime=t,0!==this._repeat&&(u=p+this._repeatDelay,this._cycle=this._totalTime/u>>0,0!==this._cycle&&this._cycle===this._totalTime/u&&this._cycle--,this._time=this._totalTime-this._cycle*u,this._yoyo&&0!==(1&this._cycle)&&(this._time=p-this._time),this._time>p?(this._time=p,t=p+1e-4):0>this._time?this._time=t=0:t=this._time));if(this._cycle!==x&&!this._locked){var w=this._yoyo&&0!==(1&x),b=w===(this._yoyo&&0!==(1&this._cycle)),T=this._totalTime,S=this._cycle,A=this._rawPrevTime,C=this._time;if(this._totalTime=x*p,x>this._cycle?w=!w:this._totalTime+=p,this._time=f,this._rawPrevTime=0===p?_-1e-4:_,this._cycle=x,this._locked=!0,f=w?0:p,this.render(f,e,0===p),e||this._gc||this.vars.onRepeat&&this._callback("onRepeat"),b&&(f=w?p+1e-4:-1e-4,this.render(f,!0,!1)),this._locked=!1,this._paused&&!y)return;this._time=C,this._totalTime=T,this._cycle=S,this._rawPrevTime=A}if(!(this._time!==f&&this._first||i||c))return void(m!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate")));if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==m&&t>0&&(this._active=!0),0===m&&this.vars.onStart&&0!==this._totalTime&&(e||this._callback("onStart")),this._time>=f)for(r=this._first;r&&(h=r._next,!this._paused||y);)(r._active||r._startTime<=this._time&&!r._paused&&!r._gc)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=h;else for(r=this._last;r&&(h=r._prev,!this._paused||y);)(r._active||f>=r._startTime&&!r._paused&&!r._gc)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=h;this._onUpdate&&(e||(o.length&&a(),this._callback("onUpdate"))),l&&(this._locked||this._gc||(g===this._startTime||v!==this._timeScale)&&(0===this._time||d>=this.totalDuration())&&(s&&(o.length&&a(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[l]&&this._callback(l)))},l.getActive=function(t,e,i){null==t&&(t=!0),null==e&&(e=!0),null==i&&(i=!1);var r,n,s=[],o=this.getChildren(t,e,i),a=0,h=o.length;for(r=0;h>r;r++)n=o[r],n.isActive()&&(s[a++]=n);return s},l.getLabelAfter=function(t){t||0!==t&&(t=this._time);var e,i=this.getLabelsArray(),r=i.length;for(e=0;r>e;e++)if(i[e].time>t)return i[e].name;return null},l.getLabelBefore=function(t){null==t&&(t=this._time);for(var e=this.getLabelsArray(),i=e.length;--i>-1;)if(t>e[i].time)return e[i].name;return null},l.getLabelsArray=function(){var t,e=[],i=0;for(t in this._labels)e[i++]={time:this._labels[t],name:t};return e.sort(function(t,e){return t.time-e.time}),e},l.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()},l.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()},l.totalDuration=function(e){return arguments.length?-1===this._repeat?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(t.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},l.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!==(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},l.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},l.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},l.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},l.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.getLabelBefore(this._time+1e-8)},r},!0),function(){var t=180/Math.PI,e=[],i=[],r=[],n={},s=_gsScope._gsDefine.globals,o=function(t,e,i,r){this.a=t,this.b=e,this.c=i,this.d=r,this.da=r-t,this.ca=i-t,this.ba=e-t},a=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",h=function(t,e,i,r){var n={a:t},s={},o={},a={c:r},h=(t+e)/2,l=(e+i)/2,c=(i+r)/2,u=(h+l)/2,d=(l+c)/2,p=(d-u)/8;return n.b=h+(t-h)/4,s.b=u+p,n.c=s.a=(n.b+s.b)/2,s.c=o.a=(u+d)/2,o.b=d-p,a.b=c+(r-c)/4,o.c=a.a=(o.b+a.b)/2,[n,s,o,a]},l=function(t,n,s,o,a){var l,c,u,d,p,f,m,g,v,_,y,x,w,b=t.length-1,T=0,S=t[0].a;for(l=0;b>l;l++)p=t[T],c=p.a,u=p.d,d=t[T+1].d,a?(y=e[l],x=i[l],w=.25*(x+y)*n/(o?.5:r[l]||.5),f=u-(u-c)*(o?.5*n:0!==y?w/y:0),m=u+(d-u)*(o?.5*n:0!==x?w/x:0),g=u-(f+((m-f)*(3*y/(y+x)+.5)/4||0))):(f=u-.5*(u-c)*n,m=u+.5*(d-u)*n,g=u-(f+m)/2),f+=g,m+=g,p.c=v=f,p.b=0!==l?S:S=p.a+.6*(p.c-p.a),p.da=u-c,p.ca=v-c,p.ba=S-c,s?(_=h(c,S,v,u),t.splice(T,1,_[0],_[1],_[2],_[3]),T+=4):T++,S=m;p=t[T],p.b=S,p.c=S+.4*(p.d-S),p.da=p.d-p.a,p.ca=p.c-p.a,p.ba=S-p.a,s&&(_=h(p.a,S,p.c,p.d),t.splice(T,1,_[0],_[1],_[2],_[3]))},c=function(t,r,n,s){var a,h,l,c,u,d,p=[];if(s)for(t=[s].concat(t),h=t.length;--h>-1;)"string"==typeof(d=t[h][r])&&"="===d.charAt(1)&&(t[h][r]=s[r]+Number(d.charAt(0)+d.substr(2)));if(a=t.length-2,0>a)return p[0]=new o(t[0][r],0,0,t[-1>a?0:1][r]),p;for(h=0;a>h;h++)l=t[h][r],c=t[h+1][r],p[h]=new o(l,0,0,c),n&&(u=t[h+2][r],e[h]=(e[h]||0)+(c-l)*(c-l),i[h]=(i[h]||0)+(u-c)*(u-c));return p[h]=new o(t[h][r],0,0,t[h+1][r]),p},u=function(t,s,o,h,u,d){var p,f,m,g,v,_,y,x,w={},b=[],T=d||t[0];u="string"==typeof u?","+u+",":a,null==s&&(s=1);for(f in t[0])b.push(f);if(t.length>1){for(x=t[t.length-1],y=!0,p=b.length;--p>-1;)if(f=b[p],Math.abs(T[f]-x[f])>.05){y=!1;break}y&&(t=t.concat(),d&&t.unshift(d),t.push(t[1]),d=t[t.length-3])}for(e.length=i.length=r.length=0,p=b.length;--p>-1;)f=b[p],n[f]=-1!==u.indexOf(","+f+","),w[f]=c(t,f,n[f],d);for(p=e.length;--p>-1;)e[p]=Math.sqrt(e[p]),i[p]=Math.sqrt(i[p]);if(!h){for(p=b.length;--p>-1;)if(n[f])for(m=w[b[p]],_=m.length-1,g=0;_>g;g++)v=m[g+1].da/i[g]+m[g].da/e[g],
r[g]=(r[g]||0)+v*v;for(p=r.length;--p>-1;)r[p]=Math.sqrt(r[p])}for(p=b.length,g=o?4:1;--p>-1;)f=b[p],m=w[f],l(m,s,o,h,n[f]),y&&(m.splice(0,g),m.splice(m.length-g,g));return w},d=function(t,e,i){e=e||"soft";var r,n,s,a,h,l,c,u,d,p,f,m={},g="cubic"===e?3:2,v="soft"===e,_=[];if(v&&i&&(t=[i].concat(t)),null==t||g+1>t.length)throw"invalid Bezier data";for(d in t[0])_.push(d);for(l=_.length;--l>-1;){for(d=_[l],m[d]=h=[],p=0,u=t.length,c=0;u>c;c++)r=null==i?t[c][d]:"string"==typeof(f=t[c][d])&&"="===f.charAt(1)?i[d]+Number(f.charAt(0)+f.substr(2)):Number(f),v&&c>1&&u-1>c&&(h[p++]=(r+h[p-2])/2),h[p++]=r;for(u=p-g+1,p=0,c=0;u>c;c+=g)r=h[c],n=h[c+1],s=h[c+2],a=2===g?0:h[c+3],h[p++]=f=3===g?new o(r,n,s,a):new o(r,(2*n+r)/3,(2*n+s)/3,s);h.length=p}return m},p=function(t,e,i){for(var r,n,s,o,a,h,l,c,u,d,p,f=1/i,m=t.length;--m>-1;)for(d=t[m],s=d.a,o=d.d-s,a=d.c-s,h=d.b-s,r=n=0,c=1;i>=c;c++)l=f*c,u=1-l,r=n-(n=(l*l*o+3*u*(l*a+u*h))*l),p=m*i+c-1,e[p]=(e[p]||0)+r*r},f=function(t,e){e=e>>0||6;var i,r,n,s,o=[],a=[],h=0,l=0,c=e-1,u=[],d=[];for(i in t)p(t[i],o,e);for(n=o.length,r=0;n>r;r++)h+=Math.sqrt(o[r]),s=r%e,d[s]=h,s===c&&(l+=h,s=r/e>>0,u[s]=d,a[s]=l,h=0,d=[]);return{length:l,lengths:a,segments:u}},m=_gsScope._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.4",API:2,global:!0,init:function(t,e,i){this._target=t,e instanceof Array&&(e={values:e}),this._func={},this._round={},this._props=[],this._timeRes=null==e.timeResolution?6:parseInt(e.timeResolution,10);var r,n,s,o,a,h=e.values||[],l={},c=h[0],p=e.autoRotate||i.vars.orientToBezier;this._autoRotate=p?p instanceof Array?p:[["x","y","rotation",p===!0?0:Number(p)||0]]:null;for(r in c)this._props.push(r);for(s=this._props.length;--s>-1;)r=this._props[s],this._overwriteProps.push(r),n=this._func[r]="function"==typeof t[r],l[r]=n?t[r.indexOf("set")||"function"!=typeof t["get"+r.substr(3)]?r:"get"+r.substr(3)]():parseFloat(t[r]),a||l[r]!==h[0][r]&&(a=l);if(this._beziers="cubic"!==e.type&&"quadratic"!==e.type&&"soft"!==e.type?u(h,isNaN(e.curviness)?1:e.curviness,!1,"thruBasic"===e.type,e.correlate,a):d(h,e.type,l),this._segCount=this._beziers[r].length,this._timeRes){var m=f(this._beziers,this._timeRes);this._length=m.length,this._lengths=m.lengths,this._segments=m.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(p=this._autoRotate)for(this._initialRotations=[],p[0]instanceof Array||(this._autoRotate=p=[p]),s=p.length;--s>-1;){for(o=0;3>o;o++)r=p[s][o],this._func[r]="function"==typeof t[r]&&t[r.indexOf("set")||"function"!=typeof t["get"+r.substr(3)]?r:"get"+r.substr(3)];r=p[s][2],this._initialRotations[s]=this._func[r]?this._func[r].call(this._target):this._target[r]}return this._startRatio=i.vars.runBackwards?1:0,!0},set:function(e){var i,r,n,s,o,a,h,l,c,u,d=this._segCount,p=this._func,f=this._target,m=e!==this._startRatio;if(this._timeRes){if(c=this._lengths,u=this._curSeg,e*=this._length,n=this._li,e>this._l2&&d-1>n){for(l=d-1;l>n&&e>=(this._l2=c[++n]););this._l1=c[n-1],this._li=n,this._curSeg=u=this._segments[n],this._s2=u[this._s1=this._si=0]}else if(this._l1>e&&n>0){for(;n>0&&(this._l1=c[--n])>=e;);0===n&&this._l1>e?this._l1=0:n++,this._l2=c[n],this._li=n,this._curSeg=u=this._segments[n],this._s1=u[(this._si=u.length-1)-1]||0,this._s2=u[this._si]}if(i=n,e-=this._l1,n=this._si,e>this._s2&&u.length-1>n){for(l=u.length-1;l>n&&e>=(this._s2=u[++n]););this._s1=u[n-1],this._si=n}else if(this._s1>e&&n>0){for(;n>0&&(this._s1=u[--n])>=e;);0===n&&this._s1>e?this._s1=0:n++,this._s2=u[n],this._si=n}a=(n+(e-this._s1)/(this._s2-this._s1))*this._prec}else i=0>e?0:e>=1?d-1:d*e>>0,a=(e-i*(1/d))*d;for(r=1-a,n=this._props.length;--n>-1;)s=this._props[n],o=this._beziers[s][i],h=(a*a*o.da+3*r*(a*o.ca+r*o.ba))*a+o.a,this._round[s]&&(h=Math.round(h)),p[s]?f[s](h):f[s]=h;if(this._autoRotate){var g,v,_,y,x,w,b,T=this._autoRotate;for(n=T.length;--n>-1;)s=T[n][2],w=T[n][3]||0,b=T[n][4]===!0?1:t,o=this._beziers[T[n][0]],g=this._beziers[T[n][1]],o&&g&&(o=o[i],g=g[i],v=o.a+(o.b-o.a)*a,y=o.b+(o.c-o.b)*a,v+=(y-v)*a,y+=(o.c+(o.d-o.c)*a-y)*a,_=g.a+(g.b-g.a)*a,x=g.b+(g.c-g.b)*a,_+=(x-_)*a,x+=(g.c+(g.d-g.c)*a-x)*a,h=m?Math.atan2(x-_,y-v)*b+w:this._initialRotations[n],p[s]?f[s](h):f[s]=h)}}}),g=m.prototype;m.bezierThrough=u,m.cubicToQuadratic=h,m._autoCSS=!0,m.quadraticToCubic=function(t,e,i){return new o(t,(2*e+t)/3,(2*e+i)/3,i)},m._cssRegister=function(){var t=s.CSSPlugin;if(t){var e=t._internals,i=e._parseToProxy,r=e._setPluginRatio,n=e.CSSPropTween;e._registerComplexSpecialProp("bezier",{parser:function(t,e,s,o,a,h){e instanceof Array&&(e={values:e}),h=new m;var l,c,u,d=e.values,p=d.length-1,f=[],g={};if(0>p)return a;for(l=0;p>=l;l++)u=i(t,d[l],o,a,h,p!==l),f[l]=u.end;for(c in e)g[c]=e[c];return g.values=f,a=new n(t,"bezier",0,0,u.pt,2),a.data=u,a.plugin=h,a.setRatio=r,0===g.autoRotate&&(g.autoRotate=!0),!g.autoRotate||g.autoRotate instanceof Array||(l=g.autoRotate===!0?0:Number(g.autoRotate),g.autoRotate=null!=u.end.left?[["left","top","rotation",l,!1]]:null!=u.end.x&&[["x","y","rotation",l,!1]]),g.autoRotate&&(o._transform||o._enableTransforms(!1),u.autoRotate=o._target._gsTransform),h._onInitTween(u.proxy,g,o._tween),a}})}},g._roundProps=function(t,e){for(var i=this._overwriteProps,r=i.length;--r>-1;)(t[i[r]]||t.bezier||t.bezierThrough)&&(this._round[i[r]]=e)},g._kill=function(t){var e,i,r=this._props;for(e in this._beziers)if(e in t)for(delete this._beziers[e],delete this._func[e],i=r.length;--i>-1;)r[i]===e&&r.splice(i,1);return this._super._kill.call(this,t)}}(),_gsScope._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(t,e){var i,r,n,s,o=function(){t.call(this,"css"),this._overwriteProps.length=0,this.setRatio=o.prototype.setRatio},a=_gsScope._gsDefine.globals,h={},l=o.prototype=new t("css");l.constructor=o,o.version="1.17.0",o.API=2,o.defaultTransformPerspective=0,o.defaultSkewType="compensated",o.defaultSmoothOrigin=!0,l="px",o.suffixMap={top:l,right:l,bottom:l,left:l,width:l,height:l,fontSize:l,padding:l,margin:l,perspective:l,lineHeight:""};var c,u,d,p,f,m,g=/(?:\d|\-\d|\.\d|\-\.\d)+/g,v=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,_=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,y=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,x=/(?:\d|\-|\+|=|#|\.)*/g,w=/opacity *= *([^)]*)/i,b=/opacity:([^;]*)/i,T=/alpha\(opacity *=.+?\)/i,S=/^(rgb|hsl)/,A=/([A-Z])/g,C=/-([a-z])/gi,E=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,M=function(t,e){return e.toUpperCase()},P=/(?:Left|Right|Width)/i,L=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,R=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,O=/,(?=[^\)]*(?:\(|$))/gi,I=Math.PI/180,D=180/Math.PI,B={},k=document,F=function(t){return k.createElementNS?k.createElementNS("http://www.w3.org/1999/xhtml",t):k.createElement(t)},j=F("div"),N=F("img"),U=o._internals={_specialProps:h},H=navigator.userAgent,X=function(){var t=H.indexOf("Android"),e=F("a");return d=-1!==H.indexOf("Safari")&&-1===H.indexOf("Chrome")&&(-1===t||Number(H.substr(t+8,1))>3),f=d&&6>Number(H.substr(H.indexOf("Version/")+8,1)),p=-1!==H.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(H)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(H))&&(m=parseFloat(RegExp.$1)),!!e&&(e.style.cssText="top:1px;opacity:.55;",/^0.55/.test(e.style.opacity))}(),G=function(t){return w.test("string"==typeof t?t:(t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100:1},q=function(t){window.console&&void 0},Y="",z="",W=function(t,e){e=e||j;var i,r,n=e.style;if(void 0!==n[t])return t;for(t=t.charAt(0).toUpperCase()+t.substr(1),i=["O","Moz","ms","Ms","Webkit"],r=5;--r>-1&&void 0===n[i[r]+t];);return r>=0?(z=3===r?"ms":i[r],Y="-"+z.toLowerCase()+"-",z+t):null},V=k.defaultView?k.defaultView.getComputedStyle:function(){},J=o.getStyle=function(t,e,i,r,n){var s;return X||"opacity"!==e?(!r&&t.style[e]?s=t.style[e]:(i=i||V(t))?s=i[e]||i.getPropertyValue(e)||i.getPropertyValue(e.replace(A,"-$1").toLowerCase()):t.currentStyle&&(s=t.currentStyle[e]),null==n||s&&"none"!==s&&"auto"!==s&&"auto auto"!==s?s:n):G(t)},Z=U.convertToPixels=function(t,i,r,n,s){if("px"===n||!n)return r;if("auto"===n||!r)return 0;var a,h,l,c=P.test(i),u=t,d=j.style,p=0>r;if(p&&(r=-r),"%"===n&&-1!==i.indexOf("border"))a=r/100*(c?t.clientWidth:t.clientHeight);else{if(d.cssText="border:0 solid red;position:"+J(t,"position")+";line-height:0;","%"!==n&&u.appendChild)d[c?"borderLeftWidth":"borderTopWidth"]=r+n;else{if(u=t.parentNode||k.body,h=u._gsCache,l=e.ticker.frame,h&&c&&h.time===l)return h.width*r/100;d[c?"width":"height"]=r+n}u.appendChild(j),a=parseFloat(j[c?"offsetWidth":"offsetHeight"]),u.removeChild(j),c&&"%"===n&&o.cacheWidths!==!1&&(h=u._gsCache=u._gsCache||{},h.time=l,h.width=100*(a/r)),0!==a||s||(a=Z(t,i,r,n,!0))}return p?-a:a},K=U.calculateOffset=function(t,e,i){if("absolute"!==J(t,"position",i))return 0;var r="left"===e?"Left":"Top",n=J(t,"margin"+r,i);return t["offset"+r]-(Z(t,e,parseFloat(n),n.replace(x,""))||0)},Q=function(t,e){var i,r,n,s={};if(e=e||V(t,null))if(i=e.length)for(;--i>-1;)n=e[i],(-1===n.indexOf("-transform")||St===n)&&(s[n.replace(C,M)]=e.getPropertyValue(n));else for(i in e)(-1===i.indexOf("Transform")||Tt===i)&&(s[i]=e[i]);else if(e=t.currentStyle||t.style)for(i in e)"string"==typeof i&&void 0===s[i]&&(s[i.replace(C,M)]=e[i]);return X||(s.opacity=G(t)),r=kt(t,e,!1),s.rotation=r.rotation,s.skewX=r.skewX,s.scaleX=r.scaleX,s.scaleY=r.scaleY,s.x=r.x,s.y=r.y,Ct&&(s.z=r.z,s.rotationX=r.rotationX,s.rotationY=r.rotationY,s.scaleZ=r.scaleZ),s.filters&&delete s.filters,s},$=function(t,e,i,r,n){var s,o,a,h={},l=t.style;for(o in i)"cssText"!==o&&"length"!==o&&isNaN(o)&&(e[o]!==(s=i[o])||n&&n[o])&&-1===o.indexOf("Origin")&&("number"==typeof s||"string"==typeof s)&&(h[o]="auto"!==s||"left"!==o&&"top"!==o?""!==s&&"auto"!==s&&"none"!==s||"string"!=typeof e[o]||""===e[o].replace(y,"")?s:0:K(t,o),void 0!==l[o]&&(a=new pt(l,o,l[o],a)));if(r)for(o in r)"className"!==o&&(h[o]=r[o]);return{difs:h,firstMPT:a}},tt={width:["Left","Right"],height:["Top","Bottom"]},et=["marginLeft","marginRight","marginTop","marginBottom"],it=function(t,e,i){var r=parseFloat("width"===e?t.offsetWidth:t.offsetHeight),n=tt[e],s=n.length;for(i=i||V(t,null);--s>-1;)r-=parseFloat(J(t,"padding"+n[s],i,!0))||0,r-=parseFloat(J(t,"border"+n[s]+"Width",i,!0))||0;return r},rt=function(t,e){(null==t||""===t||"auto"===t||"auto auto"===t)&&(t="0 0");var i=t.split(" "),r=-1!==t.indexOf("left")?"0%":-1!==t.indexOf("right")?"100%":i[0],n=-1!==t.indexOf("top")?"0%":-1!==t.indexOf("bottom")?"100%":i[1];return null==n?n="center"===r?"50%":"0":"center"===n&&(n="50%"),("center"===r||isNaN(parseFloat(r))&&-1===(r+"").indexOf("="))&&(r="50%"),t=r+" "+n+(i.length>2?" "+i[2]:""),e&&(e.oxp=-1!==r.indexOf("%"),e.oyp=-1!==n.indexOf("%"),e.oxr="="===r.charAt(1),e.oyr="="===n.charAt(1),e.ox=parseFloat(r.replace(y,"")),e.oy=parseFloat(n.replace(y,"")),e.v=t),e||t},nt=function(t,e){return"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2)):parseFloat(t)-parseFloat(e)},st=function(t,e){return null==t?e:"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2))+e:parseFloat(t)},ot=function(t,e,i,r){var n,s,o,a,h,l=1e-6;return null==t?a=e:"number"==typeof t?a=t:(n=360,s=t.split("_"),h="="===t.charAt(1),o=(h?parseInt(t.charAt(0)+"1",10)*parseFloat(s[0].substr(2)):parseFloat(s[0]))*(-1===t.indexOf("rad")?1:D)-(h?0:e),s.length&&(r&&(r[i]=e+o),-1!==t.indexOf("short")&&(o%=n,o!==o%(n/2)&&(o=0>o?o+n:o-n)),-1!==t.indexOf("_cw")&&0>o?o=(o+9999999999*n)%n-(0|o/n)*n:-1!==t.indexOf("ccw")&&o>0&&(o=(o-9999999999*n)%n-(0|o/n)*n)),a=e+o),l>a&&a>-l&&(a=0),a},at={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},ht=function(t,e,i){return t=0>t?t+1:t>1?t-1:t,0|255*(1>6*t?e+6*(i-e)*t:.5>t?i:2>3*t?e+6*(i-e)*(2/3-t):e)+.5},lt=o.parseColor=function(t){var e,i,r,n,s,o;return t&&""!==t?"number"==typeof t?[t>>16,255&t>>8,255&t]:(","===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),at[t]?at[t]:"#"===t.charAt(0)?(4===t.length&&(e=t.charAt(1),i=t.charAt(2),r=t.charAt(3),t="#"+e+e+i+i+r+r),t=parseInt(t.substr(1),16),[t>>16,255&t>>8,255&t]):"hsl"===t.substr(0,3)?(t=t.match(g),n=Number(t[0])%360/360,s=Number(t[1])/100,o=Number(t[2])/100,i=.5>=o?o*(s+1):o+s-o*s,e=2*o-i,t.length>3&&(t[3]=Number(t[3])),t[0]=ht(n+1/3,e,i),t[1]=ht(n,e,i),t[2]=ht(n-1/3,e,i),t):(t=t.match(g)||at.transparent,t[0]=Number(t[0]),t[1]=Number(t[1]),t[2]=Number(t[2]),t.length>3&&(t[3]=Number(t[3])),t)):at.black},ct="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";for(l in at)ct+="|"+l+"\\b";ct=RegExp(ct+")","gi");var ut=function(t,e,i,r){if(null==t)return function(t){return t};var n,s=e?(t.match(ct)||[""])[0]:"",o=t.split(s).join("").match(_)||[],a=t.substr(0,t.indexOf(o[0])),h=")"===t.charAt(t.length-1)?")":"",l=-1!==t.indexOf(" ")?" ":",",c=o.length,u=c>0?o[0].replace(g,""):"";return c?n=e?function(t){var e,d,p,f;if("number"==typeof t)t+=u;else if(r&&O.test(t)){for(f=t.replace(O,"|").split("|"),p=0;f.length>p;p++)f[p]=n(f[p]);return f.join(",")}if(e=(t.match(ct)||[s])[0],d=t.split(e).join("").match(_)||[],p=d.length,c>p--)for(;c>++p;)d[p]=i?d[0|(p-1)/2]:o[p];return a+d.join(l)+l+e+h+(-1!==t.indexOf("inset")?" inset":"")}:function(t){var e,s,d;if("number"==typeof t)t+=u;else if(r&&O.test(t)){for(s=t.replace(O,"|").split("|"),d=0;s.length>d;d++)s[d]=n(s[d]);return s.join(",")}if(e=t.match(_)||[],d=e.length,c>d--)for(;c>++d;)e[d]=i?e[0|(d-1)/2]:o[d];return a+e.join(l)+h}:function(t){return t}},dt=function(t){return t=t.split(","),function(e,i,r,n,s,o,a){var h,l=(i+"").split(" ");for(a={},h=0;4>h;h++)a[t[h]]=l[h]=l[h]||l[(h-1)/2>>0];return n.parse(e,a,s,o)}},pt=(U._setPluginRatio=function(t){this.plugin.setRatio(t);for(var e,i,r,n,s=this.data,o=s.proxy,a=s.firstMPT,h=1e-6;a;)e=o[a.v],a.r?e=Math.round(e):h>e&&e>-h&&(e=0),a.t[a.p]=e,a=a._next;if(s.autoRotate&&(s.autoRotate.rotation=o.rotation),1===t)for(a=s.firstMPT;a;){if(i=a.t,i.type){if(1===i.type){for(n=i.xs0+i.s+i.xs1,r=1;i.l>r;r++)n+=i["xn"+r]+i["xs"+(r+1)];i.e=n}}else i.e=i.s+i.xs0;a=a._next}},function(t,e,i,r,n){this.t=t,this.p=e,this.v=i,this.r=n,r&&(r._prev=this,this._next=r)}),ft=(U._parseToProxy=function(t,e,i,r,n,s){var o,a,h,l,c,u=r,d={},p={},f=i._transform,m=B;for(i._transform=null,B=e,r=c=i.parse(t,e,r,n),B=m,s&&(i._transform=f,u&&(u._prev=null,u._prev&&(u._prev._next=null)));r&&r!==u;){if(1>=r.type&&(a=r.p,p[a]=r.s+r.c,d[a]=r.s,s||(l=new pt(r,"s",a,l,r.r),r.c=0),1===r.type))for(o=r.l;--o>0;)h="xn"+o,a=r.p+"_"+h,p[a]=r.data[h],d[a]=r[h],s||(l=new pt(r,h,a,l,r.rxp[h]));r=r._next}return{proxy:d,end:p,firstMPT:l,pt:c}},U.CSSPropTween=function(t,e,r,n,o,a,h,l,c,u,d){this.t=t,this.p=e,this.s=r,this.c=n,this.n=h||e,t instanceof ft||s.push(this.n),this.r=l,this.type=a||0,c&&(this.pr=c,i=!0),this.b=void 0===u?r:u,this.e=void 0===d?r+n:d,o&&(this._next=o,o._prev=this)}),mt=function(t,e,i,r,n,s){var o=new ft(t,e,i,r-i,n,(-1),s);return o.b=i,o.e=o.xs0=r,o},gt=o.parseComplex=function(t,e,i,r,n,s,o,a,h,l){i=i||s||"",o=new ft(t,e,0,0,o,l?2:1,null,(!1),a,i,r),r+="";var u,d,p,f,m,_,y,x,w,b,T,A,C=i.split(", ").join(",").split(" "),E=r.split(", ").join(",").split(" "),M=C.length,P=c!==!1;for((-1!==r.indexOf(",")||-1!==i.indexOf(","))&&(C=C.join(" ").replace(O,", ").split(" "),E=E.join(" ").replace(O,", ").split(" "),M=C.length),M!==E.length&&(C=(s||"").split(" "),M=C.length),o.plugin=h,o.setRatio=l,u=0;M>u;u++)if(f=C[u],m=E[u],x=parseFloat(f),x||0===x)o.appendXtra("",x,nt(m,x),m.replace(v,""),P&&-1!==m.indexOf("px"),!0);else if(n&&("#"===f.charAt(0)||at[f]||S.test(f)))A=","===m.charAt(m.length-1)?"),":")",f=lt(f),m=lt(m),w=f.length+m.length>6,w&&!X&&0===m[3]?(o["xs"+o.l]+=o.l?" transparent":"transparent",o.e=o.e.split(E[u]).join("transparent")):(X||(w=!1),o.appendXtra(w?"rgba(":"rgb(",f[0],m[0]-f[0],",",!0,!0).appendXtra("",f[1],m[1]-f[1],",",!0).appendXtra("",f[2],m[2]-f[2],w?",":A,!0),w&&(f=4>f.length?1:f[3],o.appendXtra("",f,(4>m.length?1:m[3])-f,A,!1)));else if(_=f.match(g)){if(y=m.match(v),!y||y.length!==_.length)return o;for(p=0,d=0;_.length>d;d++)T=_[d],b=f.indexOf(T,p),o.appendXtra(f.substr(p,b-p),Number(T),nt(y[d],T),"",P&&"px"===f.substr(b+T.length,2),0===d),p=b+T.length;o["xs"+o.l]+=f.substr(p)}else o["xs"+o.l]+=o.l?" "+f:f;if(-1!==r.indexOf("=")&&o.data){for(A=o.xs0+o.data.s,u=1;o.l>u;u++)A+=o["xs"+u]+o.data["xn"+u];o.e=A+o["xs"+u]}return o.l||(o.type=-1,o.xs0=o.e),o.xfirst||o},vt=9;for(l=ft.prototype,l.l=l.pr=0;--vt>0;)l["xn"+vt]=0,l["xs"+vt]="";l.xs0="",l._next=l._prev=l.xfirst=l.data=l.plugin=l.setRatio=l.rxp=null,l.appendXtra=function(t,e,i,r,n,s){var o=this,a=o.l;return o["xs"+a]+=s&&a?" "+t:t||"",i||0===a||o.plugin?(o.l++,o.type=o.setRatio?2:1,o["xs"+o.l]=r||"",a>0?(o.data["xn"+a]=e+i,o.rxp["xn"+a]=n,o["xn"+a]=e,o.plugin||(o.xfirst=new ft(o,"xn"+a,e,i,o.xfirst||o,0,o.n,n,o.pr),o.xfirst.xs0=0),o):(o.data={s:e+i},o.rxp={},o.s=e,o.c=i,o.r=n,o)):(o["xs"+a]+=e+(r||""),o)};var _t=function(t,e){e=e||{},this.p=e.prefix?W(t)||t:t,h[t]=h[this.p]=this,this.format=e.formatter||ut(e.defaultValue,e.color,e.collapsible,e.multi),e.parser&&(this.parse=e.parser),this.clrs=e.color,this.multi=e.multi,this.keyword=e.keyword,this.dflt=e.defaultValue,this.pr=e.priority||0},yt=U._registerComplexSpecialProp=function(t,e,i){"object"!=typeof e&&(e={parser:i});var r,n,s=t.split(","),o=e.defaultValue;for(i=i||[o],r=0;s.length>r;r++)e.prefix=0===r&&e.prefix,e.defaultValue=i[r]||o,n=new _t(s[r],e)},xt=function(t){if(!h[t]){var e=t.charAt(0).toUpperCase()+t.substr(1)+"Plugin";yt(t,{parser:function(t,i,r,n,s,o,l){var c=a.com.greensock.plugins[e];return c?(c._cssRegister(),h[r].parse(t,i,r,n,s,o,l)):(q("Error: "+e+" js file not loaded."),s)}})}};l=_t.prototype,l.parseComplex=function(t,e,i,r,n,s){var o,a,h,l,c,u,d=this.keyword;if(this.multi&&(O.test(i)||O.test(e)?(a=e.replace(O,"|").split("|"),h=i.replace(O,"|").split("|")):d&&(a=[e],h=[i])),h){for(l=h.length>a.length?h.length:a.length,o=0;l>o;o++)e=a[o]=a[o]||this.dflt,i=h[o]=h[o]||this.dflt,d&&(c=e.indexOf(d),u=i.indexOf(d),c!==u&&(-1===u?a[o]=a[o].split(d).join(""):-1===c&&(a[o]+=" "+d)));e=a.join(", "),i=h.join(", ")}return gt(t,this.p,e,i,this.clrs,this.dflt,r,this.pr,n,s)},l.parse=function(t,e,i,r,s,o){return this.parseComplex(t.style,this.format(J(t,this.p,n,!1,this.dflt)),this.format(e),s,o)},o.registerSpecialProp=function(t,e,i){yt(t,{parser:function(t,r,n,s,o,a){var h=new ft(t,n,0,0,o,2,n,(!1),i);return h.plugin=a,h.setRatio=e(t,r,s._tween,n),h},priority:i})},o.useSVGTransformAttr=d||p;var wt,bt="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Tt=W("transform"),St=Y+"transform",At=W("transformOrigin"),Ct=null!==W("perspective"),Et=U.Transform=function(){this.perspective=parseFloat(o.defaultTransformPerspective)||0,this.force3D=!(o.defaultForce3D===!1||!Ct)&&(o.defaultForce3D||"auto")},Mt=window.SVGElement,Pt=function(t,e,i){var r,n=k.createElementNS("http://www.w3.org/2000/svg",t),s=/([a-z])([A-Z])/g;for(r in i)n.setAttributeNS(null,r.replace(s,"$1-$2").toLowerCase(),i[r]);return e.appendChild(n),n},Lt=k.documentElement,Rt=function(){var t,e,i,r=m||/Android/i.test(H)&&!window.chrome;return k.createElementNS&&!r&&(t=Pt("svg",Lt),e=Pt("rect",t,{width:100,height:50,x:100}),i=e.getBoundingClientRect().width,e.style[At]="50% 50%",e.style[Tt]="scaleX(0.5)",r=i===e.getBoundingClientRect().width&&!(p&&Ct),Lt.removeChild(t)),r}(),Ot=function(t,e,i,r,n){var s,a,h,l,c,u,d,p,f,m,g,v,_,y,x=t._gsTransform,w=Bt(t,!0);x&&(_=x.xOrigin,y=x.yOrigin),(!r||2>(s=r.split(" ")).length)&&(d=t.getBBox(),e=rt(e).split(" "),s=[(-1!==e[0].indexOf("%")?parseFloat(e[0])/100*d.width:parseFloat(e[0]))+d.x,(-1!==e[1].indexOf("%")?parseFloat(e[1])/100*d.height:parseFloat(e[1]))+d.y]),i.xOrigin=l=parseFloat(s[0]),i.yOrigin=c=parseFloat(s[1]),r&&w!==Dt&&(u=w[0],d=w[1],p=w[2],f=w[3],m=w[4],g=w[5],v=u*f-d*p,a=l*(f/v)+c*(-p/v)+(p*g-f*m)/v,h=l*(-d/v)+c*(u/v)-(u*g-d*m)/v,l=i.xOrigin=s[0]=a,c=i.yOrigin=s[1]=h),x&&(n||n!==!1&&o.defaultSmoothOrigin!==!1?(a=l-_,h=c-y,x.xOffset+=a*w[0]+h*w[2]-a,x.yOffset+=a*w[1]+h*w[3]-h):x.xOffset=x.yOffset=0),t.setAttribute("data-svg-origin",s.join(" "))},It=function(t){return!!(Mt&&"function"==typeof t.getBBox&&t.getCTM&&(!t.parentNode||t.parentNode.getBBox&&t.parentNode.getCTM))},Dt=[1,0,0,1,0,0],Bt=function(t,e){var i,r,n,s,o,a=t._gsTransform||new Et,h=1e5;if(Tt?r=J(t,St,null,!0):t.currentStyle&&(r=t.currentStyle.filter.match(L),r=r&&4===r.length?[r[0].substr(4),Number(r[2].substr(4)),Number(r[1].substr(4)),r[3].substr(4),a.x||0,a.y||0].join(","):""),i=!r||"none"===r||"matrix(1, 0, 0, 1, 0, 0)"===r,(a.svg||t.getBBox&&It(t))&&(i&&-1!==(t.style[Tt]+"").indexOf("matrix")&&(r=t.style[Tt],i=0),n=t.getAttribute("transform"),i&&n&&(-1!==n.indexOf("matrix")?(r=n,i=0):-1!==n.indexOf("translate")&&(r="matrix(1,0,0,1,"+n.match(/(?:\-|\b)[\d\-\.e]+\b/gi).join(",")+")",i=0))),i)return Dt;for(n=(r||"").match(/(?:\-|\b)[\d\-\.e]+\b/gi)||[],vt=n.length;--vt>-1;)s=Number(n[vt]),n[vt]=(o=s-(s|=0))?(0|o*h+(0>o?-.5:.5))/h+s:s;return e&&n.length>6?[n[0],n[1],n[4],n[5],n[12],n[13]]:n},kt=U.getTransform=function(t,i,r,s){if(t._gsTransform&&r&&!s)return t._gsTransform;var a,h,l,c,u,d,p=r?t._gsTransform||new Et:new Et,f=0>p.scaleX,m=2e-5,g=1e5,v=Ct?parseFloat(J(t,At,i,!1,"0 0 0").split(" ")[2])||p.zOrigin||0:0,_=parseFloat(o.defaultTransformPerspective)||0;if(p.svg=!(!t.getBBox||!It(t)),p.svg&&(Ot(t,J(t,At,n,!1,"50% 50%")+"",p,t.getAttribute("data-svg-origin")),wt=o.useSVGTransformAttr||Rt),a=Bt(t),a!==Dt){if(16===a.length){var y,x,w,b,T,S=a[0],A=a[1],C=a[2],E=a[3],M=a[4],P=a[5],L=a[6],R=a[7],O=a[8],I=a[9],B=a[10],k=a[12],F=a[13],j=a[14],N=a[11],U=Math.atan2(L,B);p.zOrigin&&(j=-p.zOrigin,k=O*j-a[12],F=I*j-a[13],j=B*j+p.zOrigin-a[14]),p.rotationX=U*D,U&&(b=Math.cos(-U),T=Math.sin(-U),y=M*b+O*T,x=P*b+I*T,w=L*b+B*T,O=M*-T+O*b,I=P*-T+I*b,B=L*-T+B*b,N=R*-T+N*b,M=y,P=x,L=w),U=Math.atan2(O,B),p.rotationY=U*D,U&&(b=Math.cos(-U),T=Math.sin(-U),y=S*b-O*T,x=A*b-I*T,w=C*b-B*T,I=A*T+I*b,B=C*T+B*b,N=E*T+N*b,S=y,A=x,C=w),U=Math.atan2(A,S),p.rotation=U*D,U&&(b=Math.cos(-U),T=Math.sin(-U),S=S*b+M*T,x=A*b+P*T,P=A*-T+P*b,L=C*-T+L*b,A=x),p.rotationX&&Math.abs(p.rotationX)+Math.abs(p.rotation)>359.9&&(p.rotationX=p.rotation=0,p.rotationY+=180),p.scaleX=(0|Math.sqrt(S*S+A*A)*g+.5)/g,p.scaleY=(0|Math.sqrt(P*P+I*I)*g+.5)/g,p.scaleZ=(0|Math.sqrt(L*L+B*B)*g+.5)/g,p.skewX=0,p.perspective=N?1/(0>N?-N:N):0,p.x=k,p.y=F,p.z=j,p.svg&&(p.x-=p.xOrigin-(p.xOrigin*S-p.yOrigin*M),p.y-=p.yOrigin-(p.yOrigin*A-p.xOrigin*P))}else if(!(Ct&&!s&&a.length&&p.x===a[4]&&p.y===a[5]&&(p.rotationX||p.rotationY)||void 0!==p.x&&"none"===J(t,"display",i))){var H=a.length>=6,X=H?a[0]:1,G=a[1]||0,q=a[2]||0,Y=H?a[3]:1;p.x=a[4]||0,p.y=a[5]||0,l=Math.sqrt(X*X+G*G),c=Math.sqrt(Y*Y+q*q),u=X||G?Math.atan2(G,X)*D:p.rotation||0,d=q||Y?Math.atan2(q,Y)*D+u:p.skewX||0,Math.abs(d)>90&&270>Math.abs(d)&&(f?(l*=-1,d+=0>=u?180:-180,u+=0>=u?180:-180):(c*=-1,d+=0>=d?180:-180)),p.scaleX=l,p.scaleY=c,p.rotation=u,p.skewX=d,Ct&&(p.rotationX=p.rotationY=p.z=0,p.perspective=_,p.scaleZ=1),p.svg&&(p.x-=p.xOrigin-(p.xOrigin*X+p.yOrigin*q),p.y-=p.yOrigin-(p.xOrigin*G+p.yOrigin*Y))}p.zOrigin=v;for(h in p)m>p[h]&&p[h]>-m&&(p[h]=0)}return r&&(t._gsTransform=p,p.svg&&(wt&&t.style[Tt]?e.delayedCall(.001,function(){Ut(t.style,Tt)}):!wt&&t.getAttribute("transform")&&e.delayedCall(.001,function(){t.removeAttribute("transform")}))),p},Ft=function(t){var e,i,r=this.data,n=-r.rotation*I,s=n+r.skewX*I,o=1e5,a=(0|Math.cos(n)*r.scaleX*o)/o,h=(0|Math.sin(n)*r.scaleX*o)/o,l=(0|Math.sin(s)*-r.scaleY*o)/o,c=(0|Math.cos(s)*r.scaleY*o)/o,u=this.t.style,d=this.t.currentStyle;if(d){i=h,h=-l,l=-i,e=d.filter,u.filter="";var p,f,g=this.t.offsetWidth,v=this.t.offsetHeight,_="absolute"!==d.position,y="progid:DXImageTransform.Microsoft.Matrix(M11="+a+", M12="+h+", M21="+l+", M22="+c,b=r.x+g*r.xPercent/100,T=r.y+v*r.yPercent/100;if(null!=r.ox&&(p=(r.oxp?.01*g*r.ox:r.ox)-g/2,f=(r.oyp?.01*v*r.oy:r.oy)-v/2,b+=p-(p*a+f*h),T+=f-(p*l+f*c)),_?(p=g/2,f=v/2,y+=", Dx="+(p-(p*a+f*h)+b)+", Dy="+(f-(p*l+f*c)+T)+")"):y+=", sizingMethod='auto expand')",u.filter=-1!==e.indexOf("DXImageTransform.Microsoft.Matrix(")?e.replace(R,y):y+" "+e,(0===t||1===t)&&1===a&&0===h&&0===l&&1===c&&(_&&-1===y.indexOf("Dx=0, Dy=0")||w.test(e)&&100!==parseFloat(RegExp.$1)||-1===e.indexOf(e.indexOf("Alpha"))&&u.removeAttribute("filter")),!_){var S,A,C,E=8>m?1:-1;for(p=r.ieOffsetX||0,f=r.ieOffsetY||0,r.ieOffsetX=Math.round((g-((0>a?-a:a)*g+(0>h?-h:h)*v))/2+b),r.ieOffsetY=Math.round((v-((0>c?-c:c)*v+(0>l?-l:l)*g))/2+T),vt=0;4>vt;vt++)A=et[vt],S=d[A],i=-1!==S.indexOf("px")?parseFloat(S):Z(this.t,A,parseFloat(S),S.replace(x,""))||0,C=i!==r[A]?2>vt?-r.ieOffsetX:-r.ieOffsetY:2>vt?p-r.ieOffsetX:f-r.ieOffsetY,u[A]=(r[A]=Math.round(i-C*(0===vt||2===vt?1:E)))+"px"}}},jt=U.set3DTransformRatio=U.setTransformRatio=function(t){var e,i,r,n,s,o,a,h,l,c,u,d,f,m,g,v,_,y,x,w,b,T,S,A=this.data,C=this.t.style,E=A.rotation,M=A.rotationX,P=A.rotationY,L=A.scaleX,R=A.scaleY,O=A.scaleZ,D=A.x,B=A.y,k=A.z,F=A.svg,j=A.perspective,N=A.force3D;if(!((1!==t&&0!==t||"auto"!==N||this.tween._totalTime!==this.tween._totalDuration&&this.tween._totalTime)&&N||k||j||P||M)||wt&&F||!Ct)return void(E||A.skewX||F?(E*=I,T=A.skewX*I,S=1e5,e=Math.cos(E)*L,n=Math.sin(E)*L,i=Math.sin(E-T)*-R,s=Math.cos(E-T)*R,T&&"simple"===A.skewType&&(_=Math.tan(T),_=Math.sqrt(1+_*_),i*=_,s*=_,A.skewY&&(e*=_,n*=_)),F&&(D+=A.xOrigin-(A.xOrigin*e+A.yOrigin*i)+A.xOffset,B+=A.yOrigin-(A.xOrigin*n+A.yOrigin*s)+A.yOffset,wt&&(A.xPercent||A.yPercent)&&(m=this.t.getBBox(),D+=.01*A.xPercent*m.width,B+=.01*A.yPercent*m.height),m=1e-6,m>D&&D>-m&&(D=0),m>B&&B>-m&&(B=0)),x=(0|e*S)/S+","+(0|n*S)/S+","+(0|i*S)/S+","+(0|s*S)/S+","+D+","+B+")",F&&wt?this.t.setAttribute("transform","matrix("+x):C[Tt]=(A.xPercent||A.yPercent?"translate("+A.xPercent+"%,"+A.yPercent+"%) matrix(":"matrix(")+x):C[Tt]=(A.xPercent||A.yPercent?"translate("+A.xPercent+"%,"+A.yPercent+"%) matrix(":"matrix(")+L+",0,0,"+R+","+D+","+B+")");if(p&&(m=1e-4,m>L&&L>-m&&(L=O=2e-5),m>R&&R>-m&&(R=O=2e-5),!j||A.z||A.rotationX||A.rotationY||(j=0)),E||A.skewX)E*=I,g=e=Math.cos(E),v=n=Math.sin(E),A.skewX&&(E-=A.skewX*I,g=Math.cos(E),v=Math.sin(E),"simple"===A.skewType&&(_=Math.tan(A.skewX*I),_=Math.sqrt(1+_*_),g*=_,v*=_,A.skewY&&(e*=_,n*=_))),i=-v,s=g;else{if(!(P||M||1!==O||j||F))return void(C[Tt]=(A.xPercent||A.yPercent?"translate("+A.xPercent+"%,"+A.yPercent+"%) translate3d(":"translate3d(")+D+"px,"+B+"px,"+k+"px)"+(1!==L||1!==R?" scale("+L+","+R+")":""));e=s=1,i=n=0}l=1,r=o=a=h=c=u=0,d=j?-1/j:0,f=A.zOrigin,m=1e-6,w=",",b="0",E=P*I,E&&(g=Math.cos(E),v=Math.sin(E),a=-v,c=d*-v,r=e*v,o=n*v,l=g,d*=g,e*=g,n*=g),E=M*I,E&&(g=Math.cos(E),v=Math.sin(E),_=i*g+r*v,y=s*g+o*v,h=l*v,u=d*v,r=i*-v+r*g,o=s*-v+o*g,l*=g,d*=g,i=_,s=y),1!==O&&(r*=O,o*=O,l*=O,d*=O),1!==R&&(i*=R,s*=R,h*=R,u*=R),1!==L&&(e*=L,n*=L,a*=L,c*=L),(f||F)&&(f&&(D+=r*-f,B+=o*-f,k+=l*-f+f),F&&(D+=A.xOrigin-(A.xOrigin*e+A.yOrigin*i)+A.xOffset,B+=A.yOrigin-(A.xOrigin*n+A.yOrigin*s)+A.yOffset),m>D&&D>-m&&(D=b),m>B&&B>-m&&(B=b),m>k&&k>-m&&(k=0)),x=A.xPercent||A.yPercent?"translate("+A.xPercent+"%,"+A.yPercent+"%) matrix3d(":"matrix3d(",x+=(m>e&&e>-m?b:e)+w+(m>n&&n>-m?b:n)+w+(m>a&&a>-m?b:a),x+=w+(m>c&&c>-m?b:c)+w+(m>i&&i>-m?b:i)+w+(m>s&&s>-m?b:s),M||P?(x+=w+(m>h&&h>-m?b:h)+w+(m>u&&u>-m?b:u)+w+(m>r&&r>-m?b:r),x+=w+(m>o&&o>-m?b:o)+w+(m>l&&l>-m?b:l)+w+(m>d&&d>-m?b:d)+w):x+=",0,0,0,0,1,0,",x+=D+w+B+w+k+w+(j?1+-k/j:1)+")",C[Tt]=x};l=Et.prototype,l.x=l.y=l.z=l.skewX=l.skewY=l.rotation=l.rotationX=l.rotationY=l.zOrigin=l.xPercent=l.yPercent=l.xOffset=l.yOffset=0,l.scaleX=l.scaleY=l.scaleZ=1,yt("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(t,e,i,r,s,a,h){if(r._lastParsedTransform===h)return s;r._lastParsedTransform=h;var l,c,u,d,p,f,m,g,v,_=t._gsTransform,y=r._transform=kt(t,n,!0,h.parseTransform),x=t.style,w=1e-6,b=bt.length,T=h,S={},A="transformOrigin";if("string"==typeof T.transform&&Tt)u=j.style,u[Tt]=T.transform,u.display="block",u.position="absolute",k.body.appendChild(j),l=kt(j,null,!1),k.body.removeChild(j),null!=T.xPercent&&(l.xPercent=st(T.xPercent,y.xPercent)),null!=T.yPercent&&(l.yPercent=st(T.yPercent,y.yPercent));else if("object"==typeof T){if(l={scaleX:st(null!=T.scaleX?T.scaleX:T.scale,y.scaleX),scaleY:st(null!=T.scaleY?T.scaleY:T.scale,y.scaleY),scaleZ:st(T.scaleZ,y.scaleZ),x:st(T.x,y.x),y:st(T.y,y.y),z:st(T.z,y.z),xPercent:st(T.xPercent,y.xPercent),yPercent:st(T.yPercent,y.yPercent),perspective:st(T.transformPerspective,y.perspective)},m=T.directionalRotation,null!=m)if("object"==typeof m)for(u in m)T[u]=m[u];else T.rotation=m;"string"==typeof T.x&&-1!==T.x.indexOf("%")&&(l.x=0,l.xPercent=st(T.x,y.xPercent)),"string"==typeof T.y&&-1!==T.y.indexOf("%")&&(l.y=0,l.yPercent=st(T.y,y.yPercent)),l.rotation=ot("rotation"in T?T.rotation:"shortRotation"in T?T.shortRotation+"_short":"rotationZ"in T?T.rotationZ:y.rotation,y.rotation,"rotation",S),Ct&&(l.rotationX=ot("rotationX"in T?T.rotationX:"shortRotationX"in T?T.shortRotationX+"_short":y.rotationX||0,y.rotationX,"rotationX",S),l.rotationY=ot("rotationY"in T?T.rotationY:"shortRotationY"in T?T.shortRotationY+"_short":y.rotationY||0,y.rotationY,"rotationY",S)),l.skewX=null==T.skewX?y.skewX:ot(T.skewX,y.skewX),l.skewY=null==T.skewY?y.skewY:ot(T.skewY,y.skewY),(c=l.skewY-y.skewY)&&(l.skewX+=c,l.rotation+=c)}for(Ct&&null!=T.force3D&&(y.force3D=T.force3D,f=!0),y.skewType=T.skewType||y.skewType||o.defaultSkewType,p=y.force3D||y.z||y.rotationX||y.rotationY||l.z||l.rotationX||l.rotationY||l.perspective,p||null==T.scale||(l.scaleZ=1);--b>-1;)i=bt[b],d=l[i]-y[i],(d>w||-w>d||null!=T[i]||null!=B[i])&&(f=!0,s=new ft(y,i,y[i],d,s),i in S&&(s.e=S[i]),s.xs0=0,s.plugin=a,r._overwriteProps.push(s.n));return d=T.transformOrigin,y.svg&&(d||T.svgOrigin)&&(g=y.xOffset,v=y.yOffset,Ot(t,rt(d),l,T.svgOrigin,T.smoothOrigin),s=mt(y,"xOrigin",(_?y:l).xOrigin,l.xOrigin,s,A),s=mt(y,"yOrigin",(_?y:l).yOrigin,l.yOrigin,s,A),(g!==y.xOffset||v!==y.yOffset)&&(s=mt(y,"xOffset",_?g:y.xOffset,y.xOffset,s,A),s=mt(y,"yOffset",_?v:y.yOffset,y.yOffset,s,A)),d=wt?null:"0px 0px"),(d||Ct&&p&&y.zOrigin)&&(Tt?(f=!0,i=At,d=(d||J(t,i,n,!1,"50% 50%"))+"",s=new ft(x,i,0,0,s,(-1),A),s.b=x[i],s.plugin=a,Ct?(u=y.zOrigin,d=d.split(" "),y.zOrigin=(d.length>2&&(0===u||"0px"!==d[2])?parseFloat(d[2]):u)||0,s.xs0=s.e=d[0]+" "+(d[1]||"50%")+" 0px",s=new ft(y,"zOrigin",0,0,s,(-1),s.n),s.b=u,s.xs0=s.e=y.zOrigin):s.xs0=s.e=d):rt(d+"",y)),f&&(r._transformType=y.svg&&wt||!p&&3!==this._transformType?2:3),s},prefix:!0}),yt("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),yt("borderRadius",{defaultValue:"0px",parser:function(t,e,i,s,o){e=this.format(e);var a,h,l,c,u,d,p,f,m,g,v,_,y,x,w,b,T=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],S=t.style;for(m=parseFloat(t.offsetWidth),g=parseFloat(t.offsetHeight),a=e.split(" "),h=0;T.length>h;h++)this.p.indexOf("border")&&(T[h]=W(T[h])),u=c=J(t,T[h],n,!1,"0px"),-1!==u.indexOf(" ")&&(c=u.split(" "),u=c[0],c=c[1]),d=l=a[h],p=parseFloat(u),_=u.substr((p+"").length),y="="===d.charAt(1),y?(f=parseInt(d.charAt(0)+"1",10),d=d.substr(2),f*=parseFloat(d),v=d.substr((f+"").length-(0>f?1:0))||""):(f=parseFloat(d),v=d.substr((f+"").length)),""===v&&(v=r[i]||_),v!==_&&(x=Z(t,"borderLeft",p,_),w=Z(t,"borderTop",p,_),"%"===v?(u=100*(x/m)+"%",c=100*(w/g)+"%"):"em"===v?(b=Z(t,"borderLeft",1,"em"),u=x/b+"em",c=w/b+"em"):(u=x+"px",c=w+"px"),
y&&(d=parseFloat(u)+f+v,l=parseFloat(c)+f+v)),o=gt(S,T[h],u+" "+c,d+" "+l,!1,"0px",o);return o},prefix:!0,formatter:ut("0px 0px 0px 0px",!1,!0)}),yt("backgroundPosition",{defaultValue:"0 0",parser:function(t,e,i,r,s,o){var a,h,l,c,u,d,p="background-position",f=n||V(t,null),g=this.format((f?m?f.getPropertyValue(p+"-x")+" "+f.getPropertyValue(p+"-y"):f.getPropertyValue(p):t.currentStyle.backgroundPositionX+" "+t.currentStyle.backgroundPositionY)||"0 0"),v=this.format(e);if(-1!==g.indexOf("%")!=(-1!==v.indexOf("%"))&&(d=J(t,"backgroundImage").replace(E,""),d&&"none"!==d)){for(a=g.split(" "),h=v.split(" "),N.setAttribute("src",d),l=2;--l>-1;)g=a[l],c=-1!==g.indexOf("%"),c!==(-1!==h[l].indexOf("%"))&&(u=0===l?t.offsetWidth-N.width:t.offsetHeight-N.height,a[l]=c?parseFloat(g)/100*u+"px":100*(parseFloat(g)/u)+"%");g=a.join(" ")}return this.parseComplex(t.style,g,v,s,o)},formatter:rt}),yt("backgroundSize",{defaultValue:"0 0",formatter:rt}),yt("perspective",{defaultValue:"0px",prefix:!0}),yt("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),yt("transformStyle",{prefix:!0}),yt("backfaceVisibility",{prefix:!0}),yt("userSelect",{prefix:!0}),yt("margin",{parser:dt("marginTop,marginRight,marginBottom,marginLeft")}),yt("padding",{parser:dt("paddingTop,paddingRight,paddingBottom,paddingLeft")}),yt("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(t,e,i,r,s,o){var a,h,l;return 9>m?(h=t.currentStyle,l=8>m?" ":",",a="rect("+h.clipTop+l+h.clipRight+l+h.clipBottom+l+h.clipLeft+")",e=this.format(e).split(",").join(l)):(a=this.format(J(t,this.p,n,!1,this.dflt)),e=this.format(e)),this.parseComplex(t.style,a,e,s,o)}}),yt("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),yt("autoRound,strictUnits",{parser:function(t,e,i,r,n){return n}}),yt("border",{defaultValue:"0px solid #000",parser:function(t,e,i,r,s,o){return this.parseComplex(t.style,this.format(J(t,"borderTopWidth",n,!1,"0px")+" "+J(t,"borderTopStyle",n,!1,"solid")+" "+J(t,"borderTopColor",n,!1,"#000")),this.format(e),s,o)},color:!0,formatter:function(t){var e=t.split(" ");return e[0]+" "+(e[1]||"solid")+" "+(t.match(ct)||["#000"])[0]}}),yt("borderWidth",{parser:dt("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),yt("float,cssFloat,styleFloat",{parser:function(t,e,i,r,n){var s=t.style,o="cssFloat"in s?"cssFloat":"styleFloat";return new ft(s,o,0,0,n,(-1),i,(!1),0,s[o],e)}});var Nt=function(t){var e,i=this.t,r=i.filter||J(this.data,"filter")||"",n=0|this.s+this.c*t;100===n&&(-1===r.indexOf("atrix(")&&-1===r.indexOf("radient(")&&-1===r.indexOf("oader(")?(i.removeAttribute("filter"),e=!J(this.data,"filter")):(i.filter=r.replace(T,""),e=!0)),e||(this.xn1&&(i.filter=r=r||"alpha(opacity="+n+")"),-1===r.indexOf("pacity")?0===n&&this.xn1||(i.filter=r+" alpha(opacity="+n+")"):i.filter=r.replace(w,"opacity="+n))};yt("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(t,e,i,r,s,o){var a=parseFloat(J(t,"opacity",n,!1,"1")),h=t.style,l="autoAlpha"===i;return"string"==typeof e&&"="===e.charAt(1)&&(e=("-"===e.charAt(0)?-1:1)*parseFloat(e.substr(2))+a),l&&1===a&&"hidden"===J(t,"visibility",n)&&0!==e&&(a=0),X?s=new ft(h,"opacity",a,e-a,s):(s=new ft(h,"opacity",100*a,100*(e-a),s),s.xn1=l?1:0,h.zoom=1,s.type=2,s.b="alpha(opacity="+s.s+")",s.e="alpha(opacity="+(s.s+s.c)+")",s.data=t,s.plugin=o,s.setRatio=Nt),l&&(s=new ft(h,"visibility",0,0,s,(-1),null,(!1),0,0!==a?"inherit":"hidden",0===e?"hidden":"inherit"),s.xs0="inherit",r._overwriteProps.push(s.n),r._overwriteProps.push(i)),s}});var Ut=function(t,e){e&&(t.removeProperty?(("ms"===e.substr(0,2)||"webkit"===e.substr(0,6))&&(e="-"+e),t.removeProperty(e.replace(A,"-$1").toLowerCase())):t.removeAttribute(e))},Ht=function(t){if(this.t._gsClassPT=this,1===t||0===t){this.t.setAttribute("class",0===t?this.b:this.e);for(var e=this.data,i=this.t.style;e;)e.v?i[e.p]=e.v:Ut(i,e.p),e=e._next;1===t&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};yt("className",{parser:function(t,e,r,s,o,a,h){var l,c,u,d,p,f=t.getAttribute("class")||"",m=t.style.cssText;if(o=s._classNamePT=new ft(t,r,0,0,o,2),o.setRatio=Ht,o.pr=-11,i=!0,o.b=f,c=Q(t,n),u=t._gsClassPT){for(d={},p=u.data;p;)d[p.p]=1,p=p._next;u.setRatio(1)}return t._gsClassPT=o,o.e="="!==e.charAt(1)?e:f.replace(RegExp("\\s*\\b"+e.substr(2)+"\\b"),"")+("+"===e.charAt(0)?" "+e.substr(2):""),t.setAttribute("class",o.e),l=$(t,c,Q(t),h,d),t.setAttribute("class",f),o.data=l.firstMPT,t.style.cssText=m,o=o.xfirst=s.parse(t,l.difs,o,a)}});var Xt=function(t){if((1===t||0===t)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var e,i,r,n,s,o=this.t.style,a=h.transform.parse;if("all"===this.e)o.cssText="",n=!0;else for(e=this.e.split(" ").join("").split(","),r=e.length;--r>-1;)i=e[r],h[i]&&(h[i].parse===a?n=!0:i="transformOrigin"===i?At:h[i].p),Ut(o,i);n&&(Ut(o,Tt),s=this.t._gsTransform,s&&(s.svg&&this.t.removeAttribute("data-svg-origin"),delete this.t._gsTransform))}};for(yt("clearProps",{parser:function(t,e,r,n,s){return s=new ft(t,r,0,0,s,2),s.setRatio=Xt,s.e=e,s.pr=-10,s.data=n._tween,i=!0,s}}),l="bezier,throwProps,physicsProps,physics2D".split(","),vt=l.length;vt--;)xt(l[vt]);l=o.prototype,l._firstPT=l._lastParsedTransform=l._transform=null,l._onInitTween=function(t,e,a){if(!t.nodeType)return!1;this._target=t,this._tween=a,this._vars=e,c=e.autoRound,i=!1,r=e.suffixMap||o.suffixMap,n=V(t,""),s=this._overwriteProps;var l,p,m,g,v,_,y,x,w,T=t.style;if(u&&""===T.zIndex&&(l=J(t,"zIndex",n),("auto"===l||""===l)&&this._addLazySet(T,"zIndex",0)),"string"==typeof e&&(g=T.cssText,l=Q(t,n),T.cssText=g+";"+e,l=$(t,l,Q(t)).difs,!X&&b.test(e)&&(l.opacity=parseFloat(RegExp.$1)),e=l,T.cssText=g),this._firstPT=p=e.className?h.className.parse(t,e.className,"className",this,null,null,e):this.parse(t,e,null),this._transformType){for(w=3===this._transformType,Tt?d&&(u=!0,""===T.zIndex&&(y=J(t,"zIndex",n),("auto"===y||""===y)&&this._addLazySet(T,"zIndex",0)),f&&this._addLazySet(T,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(w?"visible":"hidden"))):T.zoom=1,m=p;m&&m._next;)m=m._next;x=new ft(t,"transform",0,0,null,2),this._linkCSSP(x,null,m),x.setRatio=Tt?jt:Ft,x.data=this._transform||kt(t,n,!0),x.tween=a,x.pr=-1,s.pop()}if(i){for(;p;){for(_=p._next,m=g;m&&m.pr>p.pr;)m=m._next;(p._prev=m?m._prev:v)?p._prev._next=p:g=p,(p._next=m)?m._prev=p:v=p,p=_}this._firstPT=g}return!0},l.parse=function(t,e,i,s){var o,a,l,u,d,p,f,m,g,v,_=t.style;for(o in e)p=e[o],a=h[o],a?i=a.parse(t,p,o,this,i,s,e):(d=J(t,o,n)+"",g="string"==typeof p,"color"===o||"fill"===o||"stroke"===o||-1!==o.indexOf("Color")||g&&S.test(p)?(g||(p=lt(p),p=(p.length>3?"rgba(":"rgb(")+p.join(",")+")"),i=gt(_,o,d,p,!0,"transparent",i,0,s)):!g||-1===p.indexOf(" ")&&-1===p.indexOf(",")?(l=parseFloat(d),f=l||0===l?d.substr((l+"").length):"",(""===d||"auto"===d)&&("width"===o||"height"===o?(l=it(t,o,n),f="px"):"left"===o||"top"===o?(l=K(t,o,n),f="px"):(l="opacity"!==o?0:1,f="")),v=g&&"="===p.charAt(1),v?(u=parseInt(p.charAt(0)+"1",10),p=p.substr(2),u*=parseFloat(p),m=p.replace(x,"")):(u=parseFloat(p),m=g?p.replace(x,""):""),""===m&&(m=o in r?r[o]:f),p=u||0===u?(v?u+l:u)+m:e[o],f!==m&&""!==m&&(u||0===u)&&l&&(l=Z(t,o,l,f),"%"===m?(l/=Z(t,o,100,"%")/100,e.strictUnits!==!0&&(d=l+"%")):"em"===m?l/=Z(t,o,1,"em"):"px"!==m&&(u=Z(t,o,u,m),m="px"),v&&(u||0===u)&&(p=u+l+m)),v&&(u+=l),!l&&0!==l||!u&&0!==u?void 0!==_[o]&&(p||"NaN"!=p+""&&null!=p)?(i=new ft(_,o,u||l||0,0,i,(-1),o,(!1),0,d,p),i.xs0="none"!==p||"display"!==o&&-1===o.indexOf("Style")?p:d):q("invalid "+o+" tween value: "+e[o]):(i=new ft(_,o,l,u-l,i,0,o,c!==!1&&("px"===m||"zIndex"===o),0,d,p),i.xs0=m)):i=gt(_,o,d,p,!0,null,i,0,s)),s&&i&&!i.plugin&&(i.plugin=s);return i},l.setRatio=function(t){var e,i,r,n=this._firstPT,s=1e-6;if(1!==t||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(t||this._tween._time!==this._tween._duration&&0!==this._tween._time||this._tween._rawPrevTime===-1e-6)for(;n;){if(e=n.c*t+n.s,n.r?e=Math.round(e):s>e&&e>-s&&(e=0),n.type)if(1===n.type)if(r=n.l,2===r)n.t[n.p]=n.xs0+e+n.xs1+n.xn1+n.xs2;else if(3===r)n.t[n.p]=n.xs0+e+n.xs1+n.xn1+n.xs2+n.xn2+n.xs3;else if(4===r)n.t[n.p]=n.xs0+e+n.xs1+n.xn1+n.xs2+n.xn2+n.xs3+n.xn3+n.xs4;else if(5===r)n.t[n.p]=n.xs0+e+n.xs1+n.xn1+n.xs2+n.xn2+n.xs3+n.xn3+n.xs4+n.xn4+n.xs5;else{for(i=n.xs0+e+n.xs1,r=1;n.l>r;r++)i+=n["xn"+r]+n["xs"+(r+1)];n.t[n.p]=i}else-1===n.type?n.t[n.p]=n.xs0:n.setRatio&&n.setRatio(t);else n.t[n.p]=e+n.xs0;n=n._next}else for(;n;)2!==n.type?n.t[n.p]=n.b:n.setRatio(t),n=n._next;else for(;n;){if(2!==n.type)if(n.r&&-1!==n.type)if(e=Math.round(n.s+n.c),n.type){if(1===n.type){for(r=n.l,i=n.xs0+e+n.xs1,r=1;n.l>r;r++)i+=n["xn"+r]+n["xs"+(r+1)];n.t[n.p]=i}}else n.t[n.p]=e+n.xs0;else n.t[n.p]=n.e;else n.setRatio(t);n=n._next}},l._enableTransforms=function(t){this._transform=this._transform||kt(this._target,n,!0),this._transformType=this._transform.svg&&wt||!t&&3!==this._transformType?2:3};var Gt=function(){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};l._addLazySet=function(t,e,i){var r=this._firstPT=new ft(t,e,0,0,this._firstPT,2);r.e=i,r.setRatio=Gt,r.data=this},l._linkCSSP=function(t,e,i,r){return t&&(e&&(e._prev=t),t._next&&(t._next._prev=t._prev),t._prev?t._prev._next=t._next:this._firstPT===t&&(this._firstPT=t._next,r=!0),i?i._next=t:r||null!==this._firstPT||(this._firstPT=t),t._next=e,t._prev=i),t},l._kill=function(e){var i,r,n,s=e;if(e.autoAlpha||e.alpha){s={};for(r in e)s[r]=e[r];s.opacity=1,s.autoAlpha&&(s.visibility=1)}return e.className&&(i=this._classNamePT)&&(n=i.xfirst,n&&n._prev?this._linkCSSP(n._prev,i._next,n._prev._prev):n===this._firstPT&&(this._firstPT=i._next),i._next&&this._linkCSSP(i._next,i._next._next,n._prev),this._classNamePT=null),t.prototype._kill.call(this,s)};var qt=function(t,e,i){var r,n,s,o;if(t.slice)for(n=t.length;--n>-1;)qt(t[n],e,i);else for(r=t.childNodes,n=r.length;--n>-1;)s=r[n],o=s.type,s.style&&(e.push(Q(s)),i&&i.push(s)),1!==o&&9!==o&&11!==o||!s.childNodes.length||qt(s,e,i)};return o.cascadeTo=function(t,i,r){var n,s,o,a,h=e.to(t,i,r),l=[h],c=[],u=[],d=[],p=e._internals.reservedProps;for(t=h._targets||h.target,qt(t,c,d),h.render(i,!0,!0),qt(t,u),h.render(0,!0,!0),h._enabled(!0),n=d.length;--n>-1;)if(s=$(d[n],c[n],u[n]),s.firstMPT){s=s.difs;for(o in r)p[o]&&(s[o]=r[o]);a={};for(o in s)a[o]=c[n][o];l.push(e.fromTo(d[n],i,a,s))}return l},t.activate([o]),o},!0),function(){var t=_gsScope._gsDefine.plugin({propName:"roundProps",priority:-1,API:2,init:function(t,e,i){return this._tween=i,!0}}),e=t.prototype;e._onInitAllProps=function(){for(var t,e,i,r=this._tween,n=r.vars.roundProps instanceof Array?r.vars.roundProps:r.vars.roundProps.split(","),s=n.length,o={},a=r._propLookup.roundProps;--s>-1;)o[n[s]]=1;for(s=n.length;--s>-1;)for(t=n[s],e=r._firstPT;e;)i=e._next,e.pg?e.t._roundProps(o,!0):e.n===t&&(this._add(e.t,t,e.s,e.c),i&&(i._prev=e._prev),e._prev?e._prev._next=i:r._firstPT===e&&(r._firstPT=i),e._next=e._prev=null,r._propLookup[t]=a),e=i;return!1},e._add=function(t,e,i,r){this._addTween(t,e,i,i+r,e,!0),this._overwriteProps.push(e)}}(),function(){var t=/(?:\d|\-|\+|=|#|\.)*/g,e=/[A-Za-z%]/g;_gsScope._gsDefine.plugin({propName:"attr",API:2,version:"0.4.0",init:function(i,r){var n,s,o,a,h;if("function"!=typeof i.setAttribute)return!1;this._target=i,this._proxy={},this._start={},this._end={},this._suffix={};for(n in r)this._start[n]=this._proxy[n]=s=i.getAttribute(n)+"",this._end[n]=o=r[n]+"",this._suffix[n]=a=e.test(o)?o.replace(t,""):e.test(s)?s.replace(t,""):"",a&&(h=o.indexOf(a),-1!==h&&(o=o.substr(0,h))),this._addTween(this._proxy,n,parseFloat(s),o,n)||(this._suffix[n]=""),"="===o.charAt(1)&&(this._end[n]=this._firstPT.s+this._firstPT.c+a),this._overwriteProps.push(n);return!0},set:function(t){this._super.setRatio.call(this,t);for(var e,i=this._overwriteProps,r=i.length,n=1===t?this._end:t?this._proxy:this._start,s=n===this._proxy;--r>-1;)e=i[r],this._target.setAttribute(e,n[e]+(s?this._suffix[e]:""))}})}(),_gsScope._gsDefine.plugin({propName:"directionalRotation",version:"0.2.1",API:2,init:function(t,e){"object"!=typeof e&&(e={rotation:e}),this.finals={};var i,r,n,s,o,a,h=e.useRadians===!0?2*Math.PI:360,l=1e-6;for(i in e)"useRadians"!==i&&(a=(e[i]+"").split("_"),r=a[0],n=parseFloat("function"!=typeof t[i]?t[i]:t[i.indexOf("set")||"function"!=typeof t["get"+i.substr(3)]?i:"get"+i.substr(3)]()),s=this.finals[i]="string"==typeof r&&"="===r.charAt(1)?n+parseInt(r.charAt(0)+"1",10)*Number(r.substr(2)):Number(r)||0,o=s-n,a.length&&(r=a.join("_"),-1!==r.indexOf("short")&&(o%=h,o!==o%(h/2)&&(o=0>o?o+h:o-h)),-1!==r.indexOf("_cw")&&0>o?o=(o+9999999999*h)%h-(0|o/h)*h:-1!==r.indexOf("ccw")&&o>0&&(o=(o-9999999999*h)%h-(0|o/h)*h)),(o>l||-l>o)&&(this._addTween(t,i,n,n+o,i),this._overwriteProps.push(i)));return!0},set:function(t){var e;if(1!==t)this._super.setRatio.call(this,t);else for(e=this._firstPT;e;)e.f?e.t[e.p](this.finals[e.p]):e.t[e.p]=this.finals[e.p],e=e._next}})._autoCSS=!0,_gsScope._gsDefine("easing.Back",["easing.Ease"],function(t){var e,i,r,n=_gsScope.GreenSockGlobals||_gsScope,s=n.com.greensock,o=2*Math.PI,a=Math.PI/2,h=s._class,l=function(e,i){var r=h("easing."+e,function(){},!0),n=r.prototype=new t;return n.constructor=r,n.getRatio=i,r},c=t.register||function(){},u=function(t,e,i,r){var n=h("easing."+t,{easeOut:new e,easeIn:new i,easeInOut:new r},!0);return c(n,t),n},d=function(t,e,i){this.t=t,this.v=e,i&&(this.next=i,i.prev=this,this.c=i.v-e,this.gap=i.t-t)},p=function(e,i){var r=h("easing."+e,function(t){this._p1=t||0===t?t:1.70158,this._p2=1.525*this._p1},!0),n=r.prototype=new t;return n.constructor=r,n.getRatio=i,n.config=function(t){return new r(t)},r},f=u("Back",p("BackOut",function(t){return(t-=1)*t*((this._p1+1)*t+this._p1)+1}),p("BackIn",function(t){return t*t*((this._p1+1)*t-this._p1)}),p("BackInOut",function(t){return 1>(t*=2)?.5*t*t*((this._p2+1)*t-this._p2):.5*((t-=2)*t*((this._p2+1)*t+this._p2)+2)})),m=h("easing.SlowMo",function(t,e,i){e=e||0===e?e:.7,null==t?t=.7:t>1&&(t=1),this._p=1!==t?e:0,this._p1=(1-t)/2,this._p2=t,this._p3=this._p1+this._p2,this._calcEnd=i===!0},!0),g=m.prototype=new t;return g.constructor=m,g.getRatio=function(t){var e=t+(.5-t)*this._p;return this._p1>t?this._calcEnd?1-(t=1-t/this._p1)*t:e-(t=1-t/this._p1)*t*t*t*e:t>this._p3?this._calcEnd?1-(t=(t-this._p3)/this._p1)*t:e+(t-e)*(t=(t-this._p3)/this._p1)*t*t*t:this._calcEnd?1:e},m.ease=new m(.7,.7),g.config=m.config=function(t,e,i){return new m(t,e,i)},e=h("easing.SteppedEase",function(t){t=t||1,this._p1=1/t,this._p2=t+1},!0),g=e.prototype=new t,g.constructor=e,g.getRatio=function(t){return 0>t?t=0:t>=1&&(t=.999999999),(this._p2*t>>0)*this._p1},g.config=e.config=function(t){return new e(t)},i=h("easing.RoughEase",function(e){e=e||{};for(var i,r,n,s,o,a,h=e.taper||"none",l=[],c=0,u=0|(e.points||20),p=u,f=e.randomize!==!1,m=e.clamp===!0,g=e.template instanceof t?e.template:null,v="number"==typeof e.strength?.4*e.strength:.4;--p>-1;)i=f?Math.random():1/u*p,r=g?g.getRatio(i):i,"none"===h?n=v:"out"===h?(s=1-i,n=s*s*v):"in"===h?n=i*i*v:.5>i?(s=2*i,n=.5*s*s*v):(s=2*(1-i),n=.5*s*s*v),f?r+=Math.random()*n-.5*n:p%2?r+=.5*n:r-=.5*n,m&&(r>1?r=1:0>r&&(r=0)),l[c++]={x:i,y:r};for(l.sort(function(t,e){return t.x-e.x}),a=new d(1,1,null),p=u;--p>-1;)o=l[p],a=new d(o.x,o.y,a);this._prev=new d(0,0,0!==a.t?a:a.next)},!0),g=i.prototype=new t,g.constructor=i,g.getRatio=function(t){var e=this._prev;if(t>e.t){for(;e.next&&t>=e.t;)e=e.next;e=e.prev}else for(;e.prev&&e.t>=t;)e=e.prev;return this._prev=e,e.v+(t-e.t)/e.gap*e.c},g.config=function(t){return new i(t)},i.ease=new i,u("Bounce",l("BounceOut",function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}),l("BounceIn",function(t){return 1/2.75>(t=1-t)?1-7.5625*t*t:2/2.75>t?1-(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}),l("BounceInOut",function(t){var e=.5>t;return t=e?1-2*t:2*t-1,t=1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5})),u("Circ",l("CircOut",function(t){return Math.sqrt(1-(t-=1)*t)}),l("CircIn",function(t){return-(Math.sqrt(1-t*t)-1)}),l("CircInOut",function(t){return 1>(t*=2)?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)})),r=function(e,i,r){var n=h("easing."+e,function(t,e){this._p1=t>=1?t:1,this._p2=(e||r)/(1>t?t:1),this._p3=this._p2/o*(Math.asin(1/this._p1)||0),this._p2=o/this._p2},!0),s=n.prototype=new t;return s.constructor=n,s.getRatio=i,s.config=function(t,e){return new n(t,e)},n},u("Elastic",r("ElasticOut",function(t){return this._p1*Math.pow(2,-10*t)*Math.sin((t-this._p3)*this._p2)+1},.3),r("ElasticIn",function(t){return-(this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2))},.3),r("ElasticInOut",function(t){return 1>(t*=2)?-.5*this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2):.5*this._p1*Math.pow(2,-10*(t-=1))*Math.sin((t-this._p3)*this._p2)+1},.45)),u("Expo",l("ExpoOut",function(t){return 1-Math.pow(2,-10*t)}),l("ExpoIn",function(t){return Math.pow(2,10*(t-1))-.001}),l("ExpoInOut",function(t){return 1>(t*=2)?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))})),u("Sine",l("SineOut",function(t){return Math.sin(t*a)}),l("SineIn",function(t){return-Math.cos(t*a)+1}),l("SineInOut",function(t){return-.5*(Math.cos(Math.PI*t)-1)})),h("easing.EaseLookup",{find:function(e){return t.map[e]}},!0),c(n.SlowMo,"SlowMo","ease,"),c(i,"RoughEase","ease,"),c(e,"SteppedEase","ease,"),f},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(t,e){var i=t.GreenSockGlobals=t.GreenSockGlobals||t;if(!i.TweenLite){var r,n,s,o,a,h=function(t){var e,r=t.split("."),n=i;for(e=0;r.length>e;e++)n[r[e]]=n=n[r[e]]||{};return n},l=h("com.greensock"),c=1e-10,u=function(t){var e,i=[],r=t.length;for(e=0;e!==r;i.push(t[e++]));return i},d=function(){},p=function(){var t=Object.prototype.toString,e=t.call([]);return function(i){return null!=i&&(i instanceof Array||"object"==typeof i&&!!i.push&&t.call(i)===e)}}(),f={},m=function(r,n,s,o){this.sc=f[r]?f[r].sc:[],f[r]=this,this.gsClass=null,this.func=s;var a=[];this.check=function(l){for(var c,u,d,p,g=n.length,v=g;--g>-1;)(c=f[n[g]]||new m(n[g],[])).gsClass?(a[g]=c.gsClass,v--):l&&c.sc.push(this);if(0===v&&s)for(u=("com.greensock."+r).split("."),d=u.pop(),p=h(u.join("."))[d]=this.gsClass=s.apply(s,a),o&&(i[d]=p,"function"==typeof define&&define.amd?define((t.GreenSockAMDPath?t.GreenSockAMDPath+"/":"")+r.split(".").pop(),[],function(){return p}):r===e&&"undefined"!=typeof module&&module.exports&&(module.exports=p)),g=0;this.sc.length>g;g++)this.sc[g].check()},this.check(!0)},g=t._gsDefine=function(t,e,i,r){return new m(t,e,i,r)},v=l._class=function(t,e,i){return e=e||function(){},g(t,[],function(){return e},i),e};g.globals=i;var _=[0,0,1,1],y=[],x=v("easing.Ease",function(t,e,i,r){this._func=t,this._type=i||0,this._power=r||0,this._params=e?_.concat(e):_},!0),w=x.map={},b=x.register=function(t,e,i,r){for(var n,s,o,a,h=e.split(","),c=h.length,u=(i||"easeIn,easeOut,easeInOut").split(",");--c>-1;)for(s=h[c],n=r?v("easing."+s,null,!0):l.easing[s]||{},o=u.length;--o>-1;)a=u[o],w[s+"."+a]=w[a+s]=n[a]=t.getRatio?t:t[a]||new t};for(s=x.prototype,s._calcEnd=!1,s.getRatio=function(t){if(this._func)return this._params[0]=t,this._func.apply(null,this._params);var e=this._type,i=this._power,r=1===e?1-t:2===e?t:.5>t?2*t:2*(1-t);return 1===i?r*=r:2===i?r*=r*r:3===i?r*=r*r*r:4===i&&(r*=r*r*r*r),1===e?1-r:2===e?r:.5>t?r/2:1-r/2},r=["Linear","Quad","Cubic","Quart","Quint,Strong"],n=r.length;--n>-1;)s=r[n]+",Power"+n,b(new x(null,null,1,n),s,"easeOut",!0),b(new x(null,null,2,n),s,"easeIn"+(0===n?",easeNone":"")),b(new x(null,null,3,n),s,"easeInOut");w.linear=l.easing.Linear.easeIn,w.swing=l.easing.Quad.easeInOut;var T=v("events.EventDispatcher",function(t){this._listeners={},this._eventTarget=t||this});s=T.prototype,s.addEventListener=function(t,e,i,r,n){n=n||0;var s,h,l=this._listeners[t],c=0;for(null==l&&(this._listeners[t]=l=[]),h=l.length;--h>-1;)s=l[h],s.c===e&&s.s===i?l.splice(h,1):0===c&&n>s.pr&&(c=h+1);l.splice(c,0,{c:e,s:i,up:r,pr:n}),this!==o||a||o.wake()},s.removeEventListener=function(t,e){var i,r=this._listeners[t];if(r)for(i=r.length;--i>-1;)if(r[i].c===e)return void r.splice(i,1)},s.dispatchEvent=function(t){var e,i,r,n=this._listeners[t];if(n)for(e=n.length,i=this._eventTarget;--e>-1;)r=n[e],r&&(r.up?r.c.call(r.s||i,{type:t,target:i}):r.c.call(r.s||i))};var S=t.requestAnimationFrame,A=t.cancelAnimationFrame,C=Date.now||function(){return(new Date).getTime()},E=C();for(r=["ms","moz","webkit","o"],n=r.length;--n>-1&&!S;)S=t[r[n]+"RequestAnimationFrame"],A=t[r[n]+"CancelAnimationFrame"]||t[r[n]+"CancelRequestAnimationFrame"];v("Ticker",function(t,e){var i,r,n,s,h,l=this,u=C(),p=e!==!1&&S,f=500,m=33,g="tick",v=function(t){var e,o,a=C()-E;a>f&&(u+=a-m),E+=a,l.time=(E-u)/1e3,e=l.time-h,(!i||e>0||t===!0)&&(l.frame++,h+=e+(e>=s?.004:s-e),o=!0),t!==!0&&(n=r(v)),o&&l.dispatchEvent(g)};T.call(l),l.time=l.frame=0,l.tick=function(){v(!0)},l.lagSmoothing=function(t,e){f=t||1/c,m=Math.min(e,f,0)},l.sleep=function(){null!=n&&(p&&A?A(n):clearTimeout(n),r=d,n=null,l===o&&(a=!1))},l.wake=function(){null!==n?l.sleep():l.frame>10&&(E=C()-f+5),r=0===i?d:p&&S?S:function(t){return setTimeout(t,0|1e3*(h-l.time)+1)},l===o&&(a=!0),v(2)},l.fps=function(t){return arguments.length?(i=t,s=1/(i||60),h=this.time+s,void l.wake()):i},l.useRAF=function(t){return arguments.length?(l.sleep(),p=t,void l.fps(i)):p},l.fps(t),setTimeout(function(){p&&5>l.frame&&l.useRAF(!1)},1500)}),s=l.Ticker.prototype=new l.events.EventDispatcher,s.constructor=l.Ticker;var M=v("core.Animation",function(t,e){if(this.vars=e=e||{},this._duration=this._totalDuration=t||0,this._delay=Number(e.delay)||0,this._timeScale=1,this._active=e.immediateRender===!0,this.data=e.data,this._reversed=e.reversed===!0,G){a||o.wake();var i=this.vars.useFrames?X:G;i.add(this,i._time),this.vars.paused&&this.paused(!0)}});o=M.ticker=new l.Ticker,s=M.prototype,s._dirty=s._gc=s._initted=s._paused=!1,s._totalTime=s._time=0,s._rawPrevTime=-1,s._next=s._last=s._onUpdate=s._timeline=s.timeline=null,s._paused=!1;var P=function(){a&&C()-E>2e3&&o.wake(),setTimeout(P,2e3)};P(),s.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},s.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},s.resume=function(t,e){return null!=t&&this.seek(t,e),this.paused(!1)},s.seek=function(t,e){return this.totalTime(Number(t),e!==!1)},s.restart=function(t,e){return this.reversed(!1).paused(!1).totalTime(t?-this._delay:0,e!==!1,!0)},s.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},s.render=function(){},s.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,(this._gc||!this.timeline)&&this._enabled(!0),this},s.isActive=function(){var t,e=this._timeline,i=this._startTime;return!e||!this._gc&&!this._paused&&e.isActive()&&(t=e.rawTime())>=i&&i+this.totalDuration()/this._timeScale>t},s._enabled=function(t,e){return a||o.wake(),this._gc=!t,this._active=this.isActive(),e!==!0&&(t&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!t&&this.timeline&&this._timeline._remove(this,!0)),!1},s._kill=function(){return this._enabled(!1,!1)},s.kill=function(t,e){return this._kill(t,e),this},s._uncache=function(t){for(var e=t?this:this.timeline;e;)e._dirty=!0,e=e.timeline;return this},s._swapSelfInParams=function(t){for(var e=t.length,i=t.concat();--e>-1;)"{self}"===t[e]&&(i[e]=this);return i},s._callback=function(t){var e=this.vars;e[t].apply(e[t+"Scope"]||e.callbackScope||this,e[t+"Params"]||y)},s.eventCallback=function(t,e,i,r){if("on"===(t||"").substr(0,2)){var n=this.vars;if(1===arguments.length)return n[t];null==e?delete n[t]:(n[t]=e,n[t+"Params"]=p(i)&&-1!==i.join("").indexOf("{self}")?this._swapSelfInParams(i):i,n[t+"Scope"]=r),"onUpdate"===t&&(this._onUpdate=e)}return this},s.delay=function(t){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+t-this._delay),this._delay=t,this):this._delay},s.duration=function(t){return arguments.length?(this._duration=this._totalDuration=t,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==t&&this.totalTime(this._totalTime*(t/this._duration),!0),this):(this._dirty=!1,this._duration)},s.totalDuration=function(t){return this._dirty=!1,arguments.length?this.duration(t):this._totalDuration},s.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(t>this._duration?this._duration:t,e)):this._time},s.totalTime=function(t,e,i){if(a||o.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>t&&!i&&(t+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var r=this._totalDuration,n=this._timeline;if(t>r&&!i&&(t=r),this._startTime=(this._paused?this._pauseTime:n._time)-(this._reversed?r-t:t)/this._timeScale,n._dirty||this._uncache(!1),n._timeline)for(;n._timeline;)n._timeline._time!==(n._startTime+n._totalTime)/n._timeScale&&n.totalTime(n._totalTime,!0),n=n._timeline}this._gc&&this._enabled(!0,!1),(this._totalTime!==t||0===this._duration)&&(this.render(t,e,!1),D.length&&Y())}return this},s.progress=s.totalProgress=function(t,e){return arguments.length?this.totalTime(this.duration()*t,e):this._time/this.duration()},s.startTime=function(t){return arguments.length?(t!==this._startTime&&(this._startTime=t,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,t-this._delay)),this):this._startTime},s.endTime=function(t){return this._startTime+(0!=t?this.totalDuration():this.duration())/this._timeScale},s.timeScale=function(t){if(!arguments.length)return this._timeScale;if(t=t||c,this._timeline&&this._timeline.smoothChildTiming){var e=this._pauseTime,i=e||0===e?e:this._timeline.totalTime();this._startTime=i-(i-this._startTime)*this._timeScale/t}return this._timeScale=t,this._uncache(!1)},s.reversed=function(t){return arguments.length?(t!=this._reversed&&(this._reversed=t,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},s.paused=function(t){if(!arguments.length)return this._paused;var e,i,r=this._timeline;return t!=this._paused&&r&&(a||t||o.wake(),e=r.rawTime(),i=e-this._pauseTime,!t&&r.smoothChildTiming&&(this._startTime+=i,this._uncache(!1)),this._pauseTime=t?e:null,this._paused=t,this._active=this.isActive(),!t&&0!==i&&this._initted&&this.duration()&&this.render(r.smoothChildTiming?this._totalTime:(e-this._startTime)/this._timeScale,!0,!0)),this._gc&&!t&&this._enabled(!0,!1),this};var L=v("core.SimpleTimeline",function(t){M.call(this,0,t),this.autoRemoveChildren=this.smoothChildTiming=!0});s=L.prototype=new M,s.constructor=L,s.kill()._gc=!1,s._first=s._last=s._recent=null,s._sortChildren=!1,s.add=s.insert=function(t,e){var i,r;if(t._startTime=Number(e||0)+t._delay,t._paused&&this!==t._timeline&&(t._pauseTime=t._startTime+(this.rawTime()-t._startTime)/t._timeScale),t.timeline&&t.timeline._remove(t,!0),t.timeline=t._timeline=this,t._gc&&t._enabled(!0,!0),i=this._last,this._sortChildren)for(r=t._startTime;i&&i._startTime>r;)i=i._prev;return i?(t._next=i._next,i._next=t):(t._next=this._first,this._first=t),t._next?t._next._prev=t:this._last=t,t._prev=i,this._recent=t,this._timeline&&this._uncache(!0),this},s._remove=function(t,e){return t.timeline===this&&(e||t._enabled(!1,!0),t._prev?t._prev._next=t._next:this._first===t&&(this._first=t._next),t._next?t._next._prev=t._prev:this._last===t&&(this._last=t._prev),t._next=t._prev=t.timeline=null,t===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},s.render=function(t,e,i){var r,n=this._first;for(this._totalTime=this._time=this._rawPrevTime=t;n;)r=n._next,(n._active||t>=n._startTime&&!n._paused)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)),n=r},s.rawTime=function(){return a||o.wake(),this._totalTime};var R=v("TweenLite",function(e,i,r){if(M.call(this,i,r),this.render=R.prototype.render,null==e)throw"Cannot tween a null target.";this.target=e="string"!=typeof e?e:R.selector(e)||e;var n,s,o,a=e.jquery||e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType),h=this.vars.overwrite;if(this._overwrite=h=null==h?H[R.defaultOverwrite]:"number"==typeof h?h>>0:H[h],(a||e instanceof Array||e.push&&p(e))&&"number"!=typeof e[0])for(this._targets=o=u(e),this._propLookup=[],this._siblings=[],n=0;o.length>n;n++)s=o[n],s?"string"!=typeof s?s.length&&s!==t&&s[0]&&(s[0]===t||s[0].nodeType&&s[0].style&&!s.nodeType)?(o.splice(n--,1),this._targets=o=o.concat(u(s))):(this._siblings[n]=z(s,this,!1),1===h&&this._siblings[n].length>1&&V(s,this,null,1,this._siblings[n])):(s=o[n--]=R.selector(s),"string"==typeof s&&o.splice(n+1,1)):o.splice(n--,1);else this._propLookup={},this._siblings=z(e,this,!1),1===h&&this._siblings.length>1&&V(e,this,null,1,this._siblings);(this.vars.immediateRender||0===i&&0===this._delay&&this.vars.immediateRender!==!1)&&(this._time=-c,this.render(-this._delay))},!0),O=function(e){return e&&e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType)},I=function(t,e){var i,r={};for(i in t)U[i]||i in e&&"transform"!==i&&"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i&&"className"!==i&&"border"!==i||!(!F[i]||F[i]&&F[i]._autoCSS)||(r[i]=t[i],delete t[i]);t.css=r};s=R.prototype=new M,s.constructor=R,s.kill()._gc=!1,s.ratio=0,s._firstPT=s._targets=s._overwrittenProps=s._startAt=null,s._notifyPluginsOfEnabled=s._lazy=!1,R.version="1.17.0",R.defaultEase=s._ease=new x(null,null,1,1),R.defaultOverwrite="auto",R.ticker=o,R.autoSleep=120,R.lagSmoothing=function(t,e){o.lagSmoothing(t,e)},R.selector=t.$||t.jQuery||function(e){var i=t.$||t.jQuery;return i?(R.selector=i,i(e)):"undefined"==typeof document?e:document.querySelectorAll?document.querySelectorAll(e):document.getElementById("#"===e.charAt(0)?e.substr(1):e)};var D=[],B={},k=R._internals={isArray:p,isSelector:O,lazyTweens:D},F=R._plugins={},j=k.tweenLookup={},N=0,U=k.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1},H={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},X=M._rootFramesTimeline=new L,G=M._rootTimeline=new L,q=30,Y=k.lazyRender=function(){var t,e=D.length;for(B={};--e>-1;)t=D[e],t&&t._lazy!==!1&&(t.render(t._lazy[0],t._lazy[1],!0),t._lazy=!1);D.length=0};G._startTime=o.time,X._startTime=o.frame,G._active=X._active=!0,setTimeout(Y,1),M._updateRoot=R.render=function(){var t,e,i;if(D.length&&Y(),G.render((o.time-G._startTime)*G._timeScale,!1,!1),X.render((o.frame-X._startTime)*X._timeScale,!1,!1),D.length&&Y(),o.frame>=q){q=o.frame+(parseInt(R.autoSleep,10)||120);for(i in j){for(e=j[i].tweens,t=e.length;--t>-1;)e[t]._gc&&e.splice(t,1);0===e.length&&delete j[i]}if(i=G._first,(!i||i._paused)&&R.autoSleep&&!X._first&&1===o._listeners.tick.length){for(;i&&i._paused;)i=i._next;i||o.sleep()}}},o.addEventListener("tick",M._updateRoot);var z=function(t,e,i){var r,n,s=t._gsTweenID;if(j[s||(t._gsTweenID=s="t"+N++)]||(j[s]={target:t,tweens:[]}),e&&(r=j[s].tweens,r[n=r.length]=e,i))for(;--n>-1;)r[n]===e&&r.splice(n,1);return j[s].tweens},W=function(t,e,i,r){var n,s,o=t.vars.onOverwrite;return o&&(n=o(t,e,i,r)),o=R.onOverwrite,
o&&(s=o(t,e,i,r)),n!==!1&&s!==!1},V=function(t,e,i,r,n){var s,o,a,h;if(1===r||r>=4){for(h=n.length,s=0;h>s;s++)if((a=n[s])!==e)a._gc||a._kill(null,t,e)&&(o=!0);else if(5===r)break;return o}var l,u=e._startTime+c,d=[],p=0,f=0===e._duration;for(s=n.length;--s>-1;)(a=n[s])===e||a._gc||a._paused||(a._timeline!==e._timeline?(l=l||J(e,0,f),0===J(a,l,f)&&(d[p++]=a)):u>=a._startTime&&a._startTime+a.totalDuration()/a._timeScale>u&&((f||!a._initted)&&2e-10>=u-a._startTime||(d[p++]=a)));for(s=p;--s>-1;)if(a=d[s],2===r&&a._kill(i,t,e)&&(o=!0),2!==r||!a._firstPT&&a._initted){if(2!==r&&!W(a,e))continue;a._enabled(!1,!1)&&(o=!0)}return o},J=function(t,e,i){for(var r=t._timeline,n=r._timeScale,s=t._startTime;r._timeline;){if(s+=r._startTime,n*=r._timeScale,r._paused)return-100;r=r._timeline}return s/=n,s>e?s-e:i&&s===e||!t._initted&&2*c>s-e?c:(s+=t.totalDuration()/t._timeScale/n)>e+c?0:s-e-c};s._init=function(){var t,e,i,r,n,s=this.vars,o=this._overwrittenProps,a=this._duration,h=!!s.immediateRender,l=s.ease;if(s.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),n={};for(r in s.startAt)n[r]=s.startAt[r];if(n.overwrite=!1,n.immediateRender=!0,n.lazy=h&&s.lazy!==!1,n.startAt=n.delay=null,this._startAt=R.to(this.target,0,n),h)if(this._time>0)this._startAt=null;else if(0!==a)return}else if(s.runBackwards&&0!==a)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{0!==this._time&&(h=!1),i={};for(r in s)U[r]&&"autoCSS"!==r||(i[r]=s[r]);if(i.overwrite=0,i.data="isFromStart",i.lazy=h&&s.lazy!==!1,i.immediateRender=h,this._startAt=R.to(this.target,0,i),h){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=l=l?l instanceof x?l:"function"==typeof l?new x(l,s.easeParams):w[l]||R.defaultEase:R.defaultEase,s.easeParams instanceof Array&&l.config&&(this._ease=l.config.apply(l,s.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(t=this._targets.length;--t>-1;)this._initProps(this._targets[t],this._propLookup[t]={},this._siblings[t],o?o[t]:null)&&(e=!0);else e=this._initProps(this.target,this._propLookup,this._siblings,o);if(e&&R._onPluginEvent("_onInitAllProps",this),o&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),s.runBackwards)for(i=this._firstPT;i;)i.s+=i.c,i.c=-i.c,i=i._next;this._onUpdate=s.onUpdate,this._initted=!0},s._initProps=function(e,i,r,n){var s,o,a,h,l,c;if(null==e)return!1;B[e._gsTweenID]&&Y(),this.vars.css||e.style&&e!==t&&e.nodeType&&F.css&&this.vars.autoCSS!==!1&&I(this.vars,e);for(s in this.vars){if(c=this.vars[s],U[s])c&&(c instanceof Array||c.push&&p(c))&&-1!==c.join("").indexOf("{self}")&&(this.vars[s]=c=this._swapSelfInParams(c,this));else if(F[s]&&(h=new F[s])._onInitTween(e,this.vars[s],this)){for(this._firstPT=l={_next:this._firstPT,t:h,p:"setRatio",s:0,c:1,f:!0,n:s,pg:!0,pr:h._priority},o=h._overwriteProps.length;--o>-1;)i[h._overwriteProps[o]]=this._firstPT;(h._priority||h._onInitAllProps)&&(a=!0),(h._onDisable||h._onEnable)&&(this._notifyPluginsOfEnabled=!0)}else this._firstPT=i[s]=l={_next:this._firstPT,t:e,p:s,f:"function"==typeof e[s],n:s,pg:!1,pr:0},l.s=l.f?e[s.indexOf("set")||"function"!=typeof e["get"+s.substr(3)]?s:"get"+s.substr(3)]():parseFloat(e[s]),l.c="string"==typeof c&&"="===c.charAt(1)?parseInt(c.charAt(0)+"1",10)*Number(c.substr(2)):Number(c)-l.s||0;l&&l._next&&(l._next._prev=l)}return n&&this._kill(n,e)?this._initProps(e,i,r,n):this._overwrite>1&&this._firstPT&&r.length>1&&V(e,this,i,this._overwrite,r)?(this._kill(i,e),this._initProps(e,i,r,n)):(this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration)&&(B[e._gsTweenID]=!0),a)},s.render=function(t,e,i){var r,n,s,o,a=this._time,h=this._duration,l=this._rawPrevTime;if(t>=h)this._totalTime=this._time=h,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(r=!0,n="onComplete",i=i||this._timeline.autoRemoveChildren),0===h&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(0===t||0>l||l===c&&"isPause"!==this.data)&&l!==t&&(i=!0,l>c&&(n="onReverseComplete")),this._rawPrevTime=o=!e||t||l===t?t:c);else if(1e-7>t)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==a||0===h&&l>0)&&(n="onReverseComplete",r=this._reversed),0>t&&(this._active=!1,0===h&&(this._initted||!this.vars.lazy||i)&&(l>=0&&(l!==c||"isPause"!==this.data)&&(i=!0),this._rawPrevTime=o=!e||t||l===t?t:c)),this._initted||(i=!0);else if(this._totalTime=this._time=t,this._easeType){var u=t/h,d=this._easeType,p=this._easePower;(1===d||3===d&&u>=.5)&&(u=1-u),3===d&&(u*=2),1===p?u*=u:2===p?u*=u*u:3===p?u*=u*u*u:4===p&&(u*=u*u*u*u),this.ratio=1===d?1-u:2===d?u:.5>t/h?u/2:1-u/2}else this.ratio=this._ease.getRatio(t/h);if(this._time!==a||i){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=a,this._rawPrevTime=l,D.push(this),void(this._lazy=[t,e]);this._time&&!r?this.ratio=this._ease.getRatio(this._time/h):r&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==a&&t>=0&&(this._active=!0),0===a&&(this._startAt&&(t>=0?this._startAt.render(t,e,i):n||(n="_dummyGS")),this.vars.onStart&&(0!==this._time||0===h)&&(e||this._callback("onStart"))),s=this._firstPT;s;)s.f?s.t[s.p](s.c*this.ratio+s.s):s.t[s.p]=s.c*this.ratio+s.s,s=s._next;this._onUpdate&&(0>t&&this._startAt&&t!==-1e-4&&this._startAt.render(t,e,i),e||(this._time!==a||r)&&this._callback("onUpdate")),n&&(!this._gc||i)&&(0>t&&this._startAt&&!this._onUpdate&&t!==-1e-4&&this._startAt.render(t,e,i),r&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[n]&&this._callback(n),0===h&&this._rawPrevTime===c&&o!==c&&(this._rawPrevTime=0))}},s._kill=function(t,e,i){if("all"===t&&(t=null),null==t&&(null==e||e===this.target))return this._lazy=!1,this._enabled(!1,!1);e="string"!=typeof e?e||this._targets||this.target:R.selector(e)||e;var r,n,s,o,a,h,l,c,u,d=i&&this._time&&i._startTime===this._startTime&&this._timeline===i._timeline;if((p(e)||O(e))&&"number"!=typeof e[0])for(r=e.length;--r>-1;)this._kill(t,e[r],i)&&(h=!0);else{if(this._targets){for(r=this._targets.length;--r>-1;)if(e===this._targets[r]){a=this._propLookup[r]||{},this._overwrittenProps=this._overwrittenProps||[],n=this._overwrittenProps[r]=t?this._overwrittenProps[r]||{}:"all";break}}else{if(e!==this.target)return!1;a=this._propLookup,n=this._overwrittenProps=t?this._overwrittenProps||{}:"all"}if(a){if(l=t||a,c=t!==n&&"all"!==n&&t!==a&&("object"!=typeof t||!t._tempKill),i&&(R.onOverwrite||this.vars.onOverwrite)){for(s in l)a[s]&&(u||(u=[]),u.push(s));if((u||!t)&&!W(this,i,e,u))return!1}for(s in l)(o=a[s])&&(d&&(o.f?o.t[o.p](o.s):o.t[o.p]=o.s,h=!0),o.pg&&o.t._kill(l)&&(h=!0),o.pg&&0!==o.t._overwriteProps.length||(o._prev?o._prev._next=o._next:o===this._firstPT&&(this._firstPT=o._next),o._next&&(o._next._prev=o._prev),o._next=o._prev=null),delete a[s]),c&&(n[s]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return h},s.invalidate=function(){return this._notifyPluginsOfEnabled&&R._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],M.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-c,this.render(-this._delay)),this},s._enabled=function(t,e){if(a||o.wake(),t&&this._gc){var i,r=this._targets;if(r)for(i=r.length;--i>-1;)this._siblings[i]=z(r[i],this,!0);else this._siblings=z(this.target,this,!0)}return M.prototype._enabled.call(this,t,e),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&R._onPluginEvent(t?"_onEnable":"_onDisable",this)},R.to=function(t,e,i){return new R(t,e,i)},R.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new R(t,e,i)},R.fromTo=function(t,e,i,r){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,new R(t,e,r)},R.delayedCall=function(t,e,i,r,n){return new R(e,0,{delay:t,onComplete:e,onCompleteParams:i,callbackScope:r,onReverseComplete:e,onReverseCompleteParams:i,immediateRender:!1,lazy:!1,useFrames:n,overwrite:0})},R.set=function(t,e){return new R(t,0,e)},R.getTweensOf=function(t,e){if(null==t)return[];t="string"!=typeof t?t:R.selector(t)||t;var i,r,n,s;if((p(t)||O(t))&&"number"!=typeof t[0]){for(i=t.length,r=[];--i>-1;)r=r.concat(R.getTweensOf(t[i],e));for(i=r.length;--i>-1;)for(s=r[i],n=i;--n>-1;)s===r[n]&&r.splice(i,1)}else for(r=z(t).concat(),i=r.length;--i>-1;)(r[i]._gc||e&&!r[i].isActive())&&r.splice(i,1);return r},R.killTweensOf=R.killDelayedCallsTo=function(t,e,i){"object"==typeof e&&(i=e,e=!1);for(var r=R.getTweensOf(t,e),n=r.length;--n>-1;)r[n]._kill(i,t)};var Z=v("plugins.TweenPlugin",function(t,e){this._overwriteProps=(t||"").split(","),this._propName=this._overwriteProps[0],this._priority=e||0,this._super=Z.prototype},!0);if(s=Z.prototype,Z.version="1.10.1",Z.API=2,s._firstPT=null,s._addTween=function(t,e,i,r,n,s){var o,a;return null!=r&&(o="number"==typeof r||"="!==r.charAt(1)?Number(r)-Number(i):parseInt(r.charAt(0)+"1",10)*Number(r.substr(2)))?(this._firstPT=a={_next:this._firstPT,t:t,p:e,s:i,c:o,f:"function"==typeof t[e],n:n||e,r:s},a._next&&(a._next._prev=a),a):void 0},s.setRatio=function(t){for(var e,i=this._firstPT,r=1e-6;i;)e=i.c*t+i.s,i.r?e=Math.round(e):r>e&&e>-r&&(e=0),i.f?i.t[i.p](e):i.t[i.p]=e,i=i._next},s._kill=function(t){var e,i=this._overwriteProps,r=this._firstPT;if(null!=t[this._propName])this._overwriteProps=[];else for(e=i.length;--e>-1;)null!=t[i[e]]&&i.splice(e,1);for(;r;)null!=t[r.n]&&(r._next&&(r._next._prev=r._prev),r._prev?(r._prev._next=r._next,r._prev=null):this._firstPT===r&&(this._firstPT=r._next)),r=r._next;return!1},s._roundProps=function(t,e){for(var i=this._firstPT;i;)(t[this._propName]||null!=i.n&&t[i.n.split(this._propName+"_").join("")])&&(i.r=e),i=i._next},R._onPluginEvent=function(t,e){var i,r,n,s,o,a=e._firstPT;if("_onInitAllProps"===t){for(;a;){for(o=a._next,r=n;r&&r.pr>a.pr;)r=r._next;(a._prev=r?r._prev:s)?a._prev._next=a:n=a,(a._next=r)?r._prev=a:s=a,a=o}a=e._firstPT=n}for(;a;)a.pg&&"function"==typeof a.t[t]&&a.t[t]()&&(i=!0),a=a._next;return i},Z.activate=function(t){for(var e=t.length;--e>-1;)t[e].API===Z.API&&(F[(new t[e])._propName]=t[e]);return!0},g.plugin=function(t){if(!(t&&t.propName&&t.init&&t.API))throw"illegal plugin definition.";var e,i=t.propName,r=t.priority||0,n=t.overwriteProps,s={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},o=v("plugins."+i.charAt(0).toUpperCase()+i.substr(1)+"Plugin",function(){Z.call(this,i,r),this._overwriteProps=n||[]},t.global===!0),a=o.prototype=new Z(i);a.constructor=o,o.API=t.API;for(e in s)"function"==typeof t[e]&&(a[s[e]]=t[e]);return o.version=t.version,Z.activate([o]),o},r=t._gsQueue){for(n=0;r.length>n;n++)r[n]();for(s in f)f[s].func||t.console.log("GSAP encountered missing dependency: com.greensock."+s)}a=!1}}("undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window,"TweenMax"),define("TWEEN",function(){}),!function(){var t={},e=null,i=!0,r=!1;try{"undefined"!=typeof AudioContext?e=new AudioContext:"undefined"!=typeof webkitAudioContext?e=new webkitAudioContext:i=!1}catch(n){i=!1}if(!i)if("undefined"!=typeof Audio)try{new Audio}catch(n){r=!0}else r=!0;if(i){var s="undefined"==typeof e.createGain?e.createGainNode():e.createGain();s.gain.value=1,s.connect(e.destination)}var o=function(t){this._volume=1,this._muted=!1,this.usingWebAudio=i,this.ctx=e,this.noAudio=r,this._howls=[],this._codecs=t,this.iOSAutoEnable=!0};o.prototype={volume:function(t){var e=this;if(t=parseFloat(t),t>=0&&1>=t){e._volume=t,i&&(s.gain.value=t);for(var r in e._howls)if(e._howls.hasOwnProperty(r)&&e._howls[r]._webAudio===!1)for(var n=0;n<e._howls[r]._audioNode.length;n++)e._howls[r]._audioNode[n].volume=e._howls[r]._volume*e._volume;return e}return i?s.gain.value:e._volume},mute:function(){return this._setMuted(!0),this},unmute:function(){return this._setMuted(!1),this},_setMuted:function(t){var e=this;e._muted=t,i&&(s.gain.value=t?0:e._volume);for(var r in e._howls)if(e._howls.hasOwnProperty(r)&&e._howls[r]._webAudio===!1)for(var n=0;n<e._howls[r]._audioNode.length;n++)e._howls[r]._audioNode[n].muted=t},codecs:function(t){return this._codecs[t]},_enableiOSAudio:function(){var t=this;if(!e||!t._iOSEnabled&&/iPhone|iPad|iPod/i.test(navigator.userAgent)){t._iOSEnabled=!1;var i=function(){var r=e.createBuffer(1,1,22050),n=e.createBufferSource();n.buffer=r,n.connect(e.destination),"undefined"==typeof n.start?n.noteOn(0):n.start(0),setTimeout(function(){(n.playbackState===n.PLAYING_STATE||n.playbackState===n.FINISHED_STATE)&&(t._iOSEnabled=!0,t.iOSAutoEnable=!1,window.removeEventListener("touchstart",i,!1))},0)};return window.addEventListener("touchstart",i,!1),t}}};var a=null,h={};r||(a=new Audio,h={mp3:!!a.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!a.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!a.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!a.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/m4a;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(a.canPlayType("audio/x-mp4;")||a.canPlayType("audio/mp4;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")});var l=new o(h),c=function(t){var r=this;r._autoplay=t.autoplay||!1,r._buffer=t.buffer||!1,r._duration=t.duration||0,r._format=t.format||null,r._loop=t.loop||!1,r._loaded=!1,r._sprite=t.sprite||{},r._src=t.src||"",r._pos3d=t.pos3d||[0,0,-.5],r._volume=void 0!==t.volume?t.volume:1,r._urls=t.urls||[],r._rate=t.rate||1,r._model=t.model||null,r._onload=[t.onload||function(){}],r._onloaderror=[t.onloaderror||function(){}],r._onend=[t.onend||function(){}],r._onpause=[t.onpause||function(){}],r._onplay=[t.onplay||function(){}],r._onendTimer=[],r._webAudio=i&&!r._buffer,r._audioNode=[],r._webAudio&&r._setupAudioNode(),"undefined"!=typeof e&&e&&l.iOSAutoEnable&&l._enableiOSAudio(),l._howls.push(r),r.load()};if(c.prototype={load:function(){var t=this,e=null;if(r)return void t.on("loaderror");for(var i=0;i<t._urls.length;i++){var n,s;if(t._format)n=t._format;else{if(s=t._urls[i],n=/^data:audio\/([^;,]+);/i.exec(s),n||(n=/\.([^.]+)$/.exec(s.split("?",1)[0])),!n)return void t.on("loaderror");n=n[1].toLowerCase()}if(h[n]){e=t._urls[i];break}}if(!e)return void t.on("loaderror");if(t._src=e,t._webAudio)u(t,e);else{var a=new Audio;a.addEventListener("error",function(){a.error&&4===a.error.code&&(o.noAudio=!0),t.on("loaderror",{type:a.error?a.error.code:0})},!1),t._audioNode.push(a),a.src=e,a._pos=0,a.preload="auto",a.volume=l._muted?0:t._volume*l.volume();var c=function(){t._duration=Math.ceil(10*a.duration)/10,0===Object.getOwnPropertyNames(t._sprite).length&&(t._sprite={_default:[0,1e3*t._duration]}),t._loaded||(t._loaded=!0,t.on("load")),t._autoplay&&t.play(),a.removeEventListener("canplaythrough",c,!1)};a.addEventListener("canplaythrough",c,!1),a.load()}return t},urls:function(t){var e=this;return t?(e.stop(),e._urls="string"==typeof t?[t]:t,e._loaded=!1,e.load(),e):e._urls},play:function(t,i){var r=this;return"function"==typeof t&&(i=t),t&&"function"!=typeof t||(t="_default"),r._loaded?r._sprite[t]?(r._inactiveNode(function(n){n._sprite=t;var s=n._pos>0?n._pos:r._sprite[t][0]/1e3,o=0;r._webAudio?(o=r._sprite[t][1]/1e3-n._pos,n._pos>0&&(s=r._sprite[t][0]/1e3+s)):o=r._sprite[t][1]/1e3-(s-r._sprite[t][0]/1e3);var a,h=!(!r._loop&&!r._sprite[t][2]),c="string"==typeof i?i:Math.round(Date.now()*Math.random())+"";if(function(){var e={id:c,sprite:t,loop:h};a=setTimeout(function(){!r._webAudio&&h&&r.stop(e.id).play(t,e.id),r._webAudio&&!h&&(r._nodeById(e.id).paused=!0,r._nodeById(e.id)._pos=0,r._clearEndTimer(e.id)),r._webAudio||h||r.stop(e.id),r.on("end",c)},1e3*o),r._onendTimer.push({timer:a,id:e.id})}(),r._webAudio){var u=r._sprite[t][0]/1e3,d=r._sprite[t][1]/1e3;n.id=c,n.paused=!1,f(r,[h,u,d],c),r._playStart=e.currentTime,n.gain.value=r._volume,"undefined"==typeof n.bufferSource.start?h?n.bufferSource.noteGrainOn(0,s,86400):n.bufferSource.noteGrainOn(0,s,o):h?n.bufferSource.start(0,s,86400):n.bufferSource.start(0,s,o)}else{if(4!==n.readyState&&(n.readyState||!navigator.isCocoonJS))return r._clearEndTimer(c),function(){var e=r,s=t,o=i,a=n,h=function(){e.play(s,o),a.removeEventListener("canplaythrough",h,!1)};a.addEventListener("canplaythrough",h,!1)}(),r;n.readyState=4,n.id=c,n.currentTime=s,n.muted=l._muted||n.muted,n.volume=r._volume*l.volume(),setTimeout(function(){n.play()},0)}return r.on("play"),"function"==typeof i&&i(c),r}),r):("function"==typeof i&&i(),r):(r.on("load",function(){r.play(t,i)}),r)},pause:function(t){var e=this;if(!e._loaded)return e.on("play",function(){e.pause(t)}),e;e._clearEndTimer(t);var i=t?e._nodeById(t):e._activeNode();if(i)if(i._pos=e.pos(null,t),e._webAudio){if(!i.bufferSource||i.paused)return e;i.paused=!0,"undefined"==typeof i.bufferSource.stop?i.bufferSource.noteOff(0):i.bufferSource.stop(0)}else i.pause();return e.on("pause"),e},stop:function(t){var e=this;if(!e._loaded)return e.on("play",function(){e.stop(t)}),e;e._clearEndTimer(t);var i=t?e._nodeById(t):e._activeNode();if(i)if(i._pos=0,e._webAudio){if(!i.bufferSource||i.paused)return e;i.paused=!0,"undefined"==typeof i.bufferSource.stop?i.bufferSource.noteOff(0):i.bufferSource.stop(0)}else isNaN(i.duration)||(i.pause(),i.currentTime=0);return e},mute:function(t){var e=this;if(!e._loaded)return e.on("play",function(){e.mute(t)}),e;var i=t?e._nodeById(t):e._activeNode();return i&&(e._webAudio?i.gain.value=0:i.muted=!0),e},unmute:function(t){var e=this;if(!e._loaded)return e.on("play",function(){e.unmute(t)}),e;var i=t?e._nodeById(t):e._activeNode();return i&&(e._webAudio?i.gain.value=e._volume:i.muted=!1),e},volume:function(t,e){var i=this;if(t=parseFloat(t),t>=0&&1>=t){if(i._volume=t,!i._loaded)return i.on("play",function(){i.volume(t,e)}),i;var r=e?i._nodeById(e):i._activeNode();return r&&(i._webAudio?r.gain.value=t:r.volume=t*l.volume()),i}return i._volume},loop:function(t){var e=this;return"boolean"==typeof t?(e._loop=t,e):e._loop},sprite:function(t){var e=this;return"object"==typeof t?(e._sprite=t,e):e._sprite},pos:function(t,i){var r=this;if(!r._loaded)return r.on("load",function(){r.pos(t)}),"number"==typeof t?r:r._pos||0;t=parseFloat(t);var n=i?r._nodeById(i):r._activeNode();if(n)return t>=0?(r.pause(i),n._pos=t,r.play(n._sprite,i),r):r._webAudio?n._pos+(e.currentTime-r._playStart):n.currentTime;if(t>=0)return r;for(var s=0;s<r._audioNode.length;s++)if(r._audioNode[s].paused&&4===r._audioNode[s].readyState)return r._webAudio?r._audioNode[s]._pos:r._audioNode[s].currentTime},pos3d:function(t,e,i,r){var n=this;if(e="undefined"!=typeof e&&e?e:0,i="undefined"!=typeof i&&i?i:-.5,!n._loaded)return n.on("play",function(){n.pos3d(t,e,i,r)}),n;if(!(t>=0||0>t))return n._pos3d;if(n._webAudio){var s=r?n._nodeById(r):n._activeNode();s&&(n._pos3d=[t,e,i],s.panner.setPosition(t,e,i),s.panner.panningModel=n._model||"HRTF")}return n},fade:function(t,e,i,r,n){var s=this,o=Math.abs(t-e),a=t>e?"down":"up",h=o/.01,l=i/h;if(!s._loaded)return s.on("load",function(){s.fade(t,e,i,r,n)}),s;s.volume(t,n);for(var c=1;h>=c;c++)!function(){var t=s._volume+("up"===a?.01:-.01)*c,i=Math.round(1e3*t)/1e3,o=e;setTimeout(function(){s.volume(i,n),i===o&&r&&r()},l*c)}()},fadeIn:function(t,e,i){return this.volume(0).play().fade(0,t,e,i)},fadeOut:function(t,e,i,r){var n=this;return n.fade(n._volume,t,e,function(){i&&i(),n.pause(r),n.on("end")},r)},_nodeById:function(t){for(var e=this,i=e._audioNode[0],r=0;r<e._audioNode.length;r++)if(e._audioNode[r].id===t){i=e._audioNode[r];break}return i},_activeNode:function(){for(var t=this,e=null,i=0;i<t._audioNode.length;i++)if(!t._audioNode[i].paused){e=t._audioNode[i];break}return t._drainPool(),e},_inactiveNode:function(t){for(var e=this,i=null,r=0;r<e._audioNode.length;r++)if(e._audioNode[r].paused&&4===e._audioNode[r].readyState){t(e._audioNode[r]),i=!0;break}if(e._drainPool(),!i){var n;if(e._webAudio)n=e._setupAudioNode(),t(n);else{e.load(),n=e._audioNode[e._audioNode.length-1];var s=navigator.isCocoonJS?"canplaythrough":"loadedmetadata",o=function(){n.removeEventListener(s,o,!1),t(n)};n.addEventListener(s,o,!1)}}},_drainPool:function(){var t,e=this,i=0;for(t=0;t<e._audioNode.length;t++)e._audioNode[t].paused&&i++;for(t=e._audioNode.length-1;t>=0&&!(5>=i);t--)e._audioNode[t].paused&&(e._webAudio&&e._audioNode[t].disconnect(0),i--,e._audioNode.splice(t,1))},_clearEndTimer:function(t){for(var e=this,i=0,r=0;r<e._onendTimer.length;r++)if(e._onendTimer[r].id===t){i=r;break}var n=e._onendTimer[i];n&&(clearTimeout(n.timer),e._onendTimer.splice(i,1))},_setupAudioNode:function(){var t=this,i=t._audioNode,r=t._audioNode.length;return i[r]="undefined"==typeof e.createGain?e.createGainNode():e.createGain(),i[r].gain.value=t._volume,i[r].paused=!0,i[r]._pos=0,i[r].readyState=4,i[r].connect(s),i[r].panner=e.createPanner(),i[r].panner.panningModel=t._model||"equalpower",i[r].panner.setPosition(t._pos3d[0],t._pos3d[1],t._pos3d[2]),i[r].panner.connect(i[r]),i[r]},on:function(t,e){var i=this,r=i["_on"+t];if("function"==typeof e)r.push(e);else for(var n=0;n<r.length;n++)e?r[n].call(i,e):r[n].call(i);return i},off:function(t,e){var i=this,r=i["_on"+t],n=e?e.toString():null;if(n){for(var s=0;s<r.length;s++)if(n===r[s].toString()){r.splice(s,1);break}}else i["_on"+t]=[];return i},unload:function(){for(var e=this,i=e._audioNode,r=0;r<e._audioNode.length;r++)i[r].paused||(e.stop(i[r].id),e.on("end",i[r].id)),e._webAudio?i[r].disconnect(0):i[r].src="";for(r=0;r<e._onendTimer.length;r++)clearTimeout(e._onendTimer[r].timer);var n=l._howls.indexOf(e);null!==n&&n>=0&&l._howls.splice(n,1),delete t[e._src],e=null}},i)var u=function(e,i){if(i in t)return e._duration=t[i].duration,void p(e);if(/^data:[^;]+;base64,/.test(i)){for(var r=atob(i.split(",")[1]),n=new Uint8Array(r.length),s=0;s<r.length;++s)n[s]=r.charCodeAt(s);d(n.buffer,e,i)}else{var o=new XMLHttpRequest;o.open("GET",i,!0),o.responseType="arraybuffer",o.onload=function(){d(o.response,e,i)},o.onerror=function(){e._webAudio&&(e._buffer=!0,e._webAudio=!1,e._audioNode=[],delete e._gainNode,delete t[i],e.load())};try{o.send()}catch(a){o.onerror()}}},d=function(i,r,n){e.decodeAudioData(i,function(e){e&&(t[n]=e,p(r,e))},function(t){r.on("loaderror")})},p=function(t,e){t._duration=e?e.duration:t._duration,0===Object.getOwnPropertyNames(t._sprite).length&&(t._sprite={_default:[0,1e3*t._duration]}),t._loaded||(t._loaded=!0,t.on("load")),t._autoplay&&t.play()},f=function(i,r,n){var s=i._nodeById(n);s.bufferSource=e.createBufferSource(),s.bufferSource.buffer=t[i._src],s.bufferSource.connect(s.panner),s.bufferSource.loop=r[0],r[0]&&(s.bufferSource.loopStart=r[1],s.bufferSource.loopEnd=r[1]+r[2]),s.bufferSource.playbackRate.value=i._rate};"function"==typeof define&&define.amd&&define("HOWLER",[],function(){return{Howler:l,Howl:c}}),"undefined"!=typeof exports&&(exports.Howler=l,exports.Howl=c),"undefined"!=typeof window&&(window.Howler=l,window.Howl=c)}(),function(t,e){function i(i,r){function n(t){return pt.preferFlash&&ot&&!pt.ignoreFlash&&pt.flash[t]!==e&&pt.flash[t]}function s(t){return function(e){var i,r=this._s;return i=r&&r._a?t.call(this,e):null}}this.setupOptions={url:i||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,html5Test:/^(probably|maybe)$/i,preferFlash:!1,noSWFCache:!1,idPrefix:"sound"},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},opus:{type:["audio/ogg; codecs=opus","audio/opus"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.movieID="sm2-container",this.id=r||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20140901",this.version=null,this.movieURL=null,this.altURL=null,this.swfLoaded=!1,this.enabled=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.muted=!1,this.didFlashBlock=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={},this.html5={usingFlash:null},this.flash={},this.html5Only=!1,this.ignoreFlash=!1;var o,a,h,l,c,u,d,p,f,m,g,v,_,y,x,w,b,T,S,A,C,E,M,P,L,R,O,I,D,B,k,F,j,N,U,H,X,G,q,Y,z,W,V,J,Z,K,Q,$,tt,et,it,rt,nt,st,ot,at,ht,lt,ct,ut,dt,pt=this,ft=null,mt=null,gt=navigator.userAgent,vt=t.location.href.toString(),_t=document,yt=[],xt=!1,wt=!1,bt=!1,Tt=!1,St=!1,At=8,Ct=null,Et=null,Mt=!1,Pt=!1,Lt=0,Rt=null,Ot=[],It=null,Dt=Array.prototype.slice,Bt=!1,kt=0,Ft=gt.match(/(ipad|iphone|ipod)/i),jt=gt.match(/android/i),Nt=gt.match(/msie/i),Ut=gt.match(/webkit/i),Ht=gt.match(/safari/i)&&!gt.match(/chrome/i),Xt=gt.match(/opera/i),Gt=gt.match(/(mobile|pre\/|xoom)/i)||Ft||jt,qt=!vt.match(/usehtml5audio/i)&&!vt.match(/sm2\-ignorebadua/i)&&Ht&&!gt.match(/silk/i)&&gt.match(/OS X 10_6_([3-7])/i),Yt=(t.console!==e&&console.log!==e,_t.hasFocus!==e?_t.hasFocus():null),zt=Ht&&(_t.hasFocus===e||!_t.hasFocus()),Wt=!zt,Vt=/(mp3|mp4|mpa|m4a|m4b)/i,Jt=1e3,Zt="about:blank",Kt="data:audio/wave;base64,/UklGRiYAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQIAAAD//w==",Qt=_t.location?_t.location.protocol.match(/http/i):null,$t=Qt?"":"http://",te=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,ee=["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","m4b","mp4v","3gp","3g2"],ie=new RegExp("\\.("+ee.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!Qt,H={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"},this.hasHTML5=function(){try{return Audio!==e&&(Xt&&opera!==e&&opera.version()<10?new Audio(null):new Audio).canPlayType!==e}catch(t){return!1}}(),this.setup=function(t){var i=!pt.url;return t!==e&&bt&&It&&pt.ok()&&(t.flashVersion!==e||t.url!==e||t.html5Test!==e),f(t),t&&(i&&P&&t.url!==e&&pt.beginDelayedInit(),P||t.url===e||"complete"!==_t.readyState||setTimeout(E,1)),pt},this.ok=function(){return It?bt&&!Tt:pt.useHTML5Audio&&pt.hasHTML5},this.supported=this.ok,this.getMovie=function(e){return a(e)||_t[e]||t[e]},this.createSound=function(t,i){function r(){return s=X(s),pt.sounds[s.id]=new o(s),pt.soundIDs.push(s.id),pt.sounds[s.id]}var n,s,a=null;if(!bt||!pt.ok())return!1;if(i!==e&&(t={id:t,url:i}),s=p(t),s.url=J(s.url),void 0===s.id&&(s.id=pt.setupOptions.idPrefix+kt++),Y(s.id,!0))return pt.sounds[s.id];if(Q(s))a=r(),a._setup_html5(s);else{if(pt.html5Only)return r();if(pt.html5.usingFlash&&s.url&&s.url.match(/data\:/i))return r();u>8&&null===s.isMovieStar&&(s.isMovieStar=!!(s.serverURL||!!s.type&&s.type.match(te)||s.url&&s.url.match(ie))),s=G(s,n),a=r(),8===u?mt._createSound(s.id,s.loops||1,s.usePolicyFile):(mt._createSound(s.id,s.url,s.usePeakData,s.useWaveformData,s.useEQData,s.isMovieStar,!!s.isMovieStar&&s.bufferTime,s.loops||1,s.serverURL,s.duration||null,s.autoPlay,!0,s.autoLoad,s.usePolicyFile),s.serverURL||(a.connected=!0,s.onconnect&&s.onconnect.apply(a))),s.serverURL||!s.autoLoad&&!s.autoPlay||a.load(s)}return!s.serverURL&&s.autoPlay&&a.play(),a},this.destroySound=function(t,e){if(!Y(t))return!1;var i,r=pt.sounds[t];for(r._iO={},r.stop(),r.unload(),i=0;i<pt.soundIDs.length;i++)if(pt.soundIDs[i]===t){pt.soundIDs.splice(i,1);break}return e||r.destruct(!0),r=null,delete pt.sounds[t],!0},this.load=function(t,e){return!!Y(t)&&pt.sounds[t].load(e)},this.unload=function(t){return!!Y(t)&&pt.sounds[t].unload()},this.onPosition=function(t,e,i,r){return!!Y(t)&&pt.sounds[t].onposition(e,i,r)},this.onposition=this.onPosition,this.clearOnPosition=function(t,e,i){return!!Y(t)&&pt.sounds[t].clearOnPosition(e,i)},this.play=function(t,e){var i=null,r=e&&!(e instanceof Object);if(!bt||!pt.ok())return!1;if(Y(t,r))r&&(e={url:e});else{if(!r)return!1;r&&(e={url:e}),e&&e.url&&(e.id=t,i=pt.createSound(e).play())}return null===i&&(i=pt.sounds[t].play(e)),i},this.start=this.play,this.setPosition=function(t,e){return!!Y(t)&&pt.sounds[t].setPosition(e)},this.stop=function(t){return!!Y(t)&&pt.sounds[t].stop()},this.stopAll=function(){var t;for(t in pt.sounds)pt.sounds.hasOwnProperty(t)&&pt.sounds[t].stop()},this.pause=function(t){return!!Y(t)&&pt.sounds[t].pause()},this.pauseAll=function(){var t;for(t=pt.soundIDs.length-1;t>=0;t--)pt.sounds[pt.soundIDs[t]].pause()},this.resume=function(t){return!!Y(t)&&pt.sounds[t].resume()},this.resumeAll=function(){var t;for(t=pt.soundIDs.length-1;t>=0;t--)pt.sounds[pt.soundIDs[t]].resume()},this.togglePause=function(t){return!!Y(t)&&pt.sounds[t].togglePause()},this.setPan=function(t,e){return!!Y(t)&&pt.sounds[t].setPan(e)},this.setVolume=function(t,e){return!!Y(t)&&pt.sounds[t].setVolume(e)},this.mute=function(t){var e=0;if(t instanceof String&&(t=null),t)return!!Y(t)&&pt.sounds[t].mute();for(e=pt.soundIDs.length-1;e>=0;e--)pt.sounds[pt.soundIDs[e]].mute();return pt.muted=!0,!0},this.muteAll=function(){pt.mute()},this.unmute=function(t){var e;if(t instanceof String&&(t=null),t)return!!Y(t)&&pt.sounds[t].unmute();for(e=pt.soundIDs.length-1;e>=0;e--)pt.sounds[pt.soundIDs[e]].unmute();return pt.muted=!1,!0},this.unmuteAll=function(){pt.unmute()},this.toggleMute=function(t){return!!Y(t)&&pt.sounds[t].toggleMute()},this.getMemoryUse=function(){var t=0;return mt&&8!==u&&(t=parseInt(mt._getMemoryUse(),10)),t},this.disable=function(i){var r;if(i===e&&(i=!1),Tt)return!1;for(Tt=!0,r=pt.soundIDs.length-1;r>=0;r--)B(pt.sounds[pt.soundIDs[r]]);return d(i),nt.remove(t,"load",_),!0},this.canPlayMIME=function(t){var e;return pt.hasHTML5&&(e=$({type:t})),!e&&It&&(e=t&&pt.ok()?!!((u>8?t.match(te):null)||t.match(pt.mimePattern)):null),e},this.canPlayURL=function(t){var e;return pt.hasHTML5&&(e=$({url:t})),!e&&It&&(e=t&&pt.ok()?!!t.match(pt.filePattern):null),e},this.canPlayLink=function(t){return!(t.type===e||!t.type||!pt.canPlayMIME(t.type))||pt.canPlayURL(t.href)},this.getSoundById=function(t,e){if(!t)return null;var i=pt.sounds[t];return i},this.onready=function(e,i){var r="onready",n=!1;if("function"!=typeof e)throw j("needFunction",r);return i||(i=t),g(r,e,i),v(),n=!0,n},this.ontimeout=function(e,i){var r="ontimeout",n=!1;if("function"!=typeof e)throw j("needFunction",r);return i||(i=t),g(r,e,i),v({type:r}),n=!0,n},this._writeDebug=function(t,e){return!0},this._wD=this._writeDebug,this._debug=function(){},
this.reboot=function(e,i){var r,n,s;for(r=pt.soundIDs.length-1;r>=0;r--)pt.sounds[pt.soundIDs[r]].destruct();if(mt)try{Nt&&(Et=mt.innerHTML),Ct=mt.parentNode.removeChild(mt)}catch(o){}if(Et=Ct=It=mt=null,pt.enabled=P=bt=Mt=Pt=xt=wt=Tt=Bt=pt.swfLoaded=!1,pt.soundIDs=[],pt.sounds={},kt=0,e)yt=[];else for(r in yt)if(yt.hasOwnProperty(r))for(n=0,s=yt[r].length;n<s;n++)yt[r][n].fired=!1;return pt.html5={usingFlash:null},pt.flash={},pt.html5Only=!1,pt.ignoreFlash=!1,t.setTimeout(function(){C(),i||pt.beginDelayedInit()},20),pt},this.reset=function(){return pt.reboot(!0,!0)},this.getMoviePercent=function(){return mt&&"PercentLoaded"in mt?mt.PercentLoaded():null},this.beginDelayedInit=function(){St=!0,E(),setTimeout(function(){return!Pt&&(R(),A(),Pt=!0,!0)},20),y()},this.destruct=function(){pt.disable(!0)},o=function(t){var i,r,n,s,o,a,h,l,c,d,f=this,m=!1,g=[],v=0,_=null;c={duration:null,time:null},this.id=t.id,this.sID=this.id,this.url=t.url,this.options=p(t),this.instanceOptions=this.options,this._iO=this.instanceOptions,this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,d=!this.url,this.id3={},this._debug=function(){},this.load=function(t){var i,r=null;if(t!==e?f._iO=p(t,f.options):(t=f.options,f._iO=t,_&&_!==f.url&&(f._iO.url=f.url,f.url=null)),f._iO.url||(f._iO.url=f.url),f._iO.url=J(f._iO.url),f.instanceOptions=f._iO,i=f._iO,!i.url&&!f.url)return f;if(i.url===f.url&&0!==f.readyState&&2!==f.readyState)return 3===f.readyState&&i.onload&&dt(f,function(){i.onload.apply(f,[!!f.duration])}),f;if(f.loaded=!1,f.readyState=1,f.playState=0,f.id3={},Q(i))r=f._setup_html5(i),r._called_load||(f._html5_canplay=!1,f.url!==i.url&&(f._a.src=i.url,f.setPosition(0)),f._a.autobuffer="auto",f._a.preload="auto",f._a._called_load=!0);else{if(pt.html5Only)return f;if(f._iO.url&&f._iO.url.match(/data\:/i))return f;try{f.isHTML5=!1,f._iO=G(X(i)),f._iO.autoPlay&&(f._iO.position||f._iO.from)&&(f._iO.autoPlay=!1),i=f._iO,8===u?mt._load(f.id,i.url,i.stream,i.autoPlay,i.usePolicyFile):mt._load(f.id,i.url,!!i.stream,!!i.autoPlay,i.loops||1,!!i.autoLoad,i.usePolicyFile)}catch(n){O({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}}return f.url=i.url,f},this.unload=function(){return 0!==f.readyState&&(f.isHTML5?(s(),f._a&&(f._a.pause(),_=et(f._a))):8===u?mt._unload(f.id,Zt):mt._unload(f.id),i()),f},this.destruct=function(t){f.isHTML5?(s(),f._a&&(f._a.pause(),et(f._a),Bt||n(),f._a._s=null,f._a=null)):(f._iO.onfailure=null,mt._destroySound(f.id)),t||pt.destroySound(f.id,!0)},this.play=function(t,i){var r,n,s,h,c,g,v=!0,_=null;if(i=i===e||i,t||(t={}),f.url&&(f._iO.url=f.url),f._iO=p(f._iO,f.options),f._iO=p(t,f._iO),f._iO.url=J(f._iO.url),f.instanceOptions=f._iO,!f.isHTML5&&f._iO.serverURL&&!f.connected)return f.getAutoPlay()||f.setAutoPlay(!0),f;if(Q(f._iO)&&(f._setup_html5(f._iO),o()),1!==f.playState||f.paused||(r=f._iO.multiShot,r||(f.isHTML5&&f.setPosition(f._iO.position),_=f)),null!==_)return _;if(t.url&&t.url!==f.url&&(f.readyState||f.isHTML5||8!==u||!d?f.load(f._iO):d=!1),f.loaded||(0===f.readyState?(f.isHTML5||pt.html5Only?f.isHTML5?f.load(f._iO):_=f:(f._iO.autoPlay=!0,f.load(f._iO)),f.instanceOptions=f._iO):2===f.readyState&&(_=f)),null!==_)return _;if(!f.isHTML5&&9===u&&f.position>0&&f.position===f.duration&&(t.position=0),f.paused&&f.position>=0&&(!f._iO.serverURL||f.position>0))f.resume();else{if(f._iO=p(t,f._iO),(!f.isHTML5&&null!==f._iO.position&&f._iO.position>0||null!==f._iO.from&&f._iO.from>0||null!==f._iO.to)&&0===f.instanceCount&&0===f.playState&&!f._iO.serverURL){if(s=function(){f._iO=p(t,f._iO),f.play(f._iO)},f.isHTML5&&!f._html5_canplay?(f.load({_oncanplay:s}),_=!1):f.isHTML5||f.loaded||f.readyState&&2===f.readyState||(f.load({onload:s}),_=!1),null!==_)return _;f._iO=l()}(!f.instanceCount||f._iO.multiShotEvents||f.isHTML5&&f._iO.multiShot&&!Bt||!f.isHTML5&&u>8&&!f.getAutoPlay())&&f.instanceCount++,f._iO.onposition&&0===f.playState&&a(f),f.playState=1,f.paused=!1,f.position=f._iO.position===e||isNaN(f._iO.position)?0:f._iO.position,f.isHTML5||(f._iO=G(X(f._iO))),f._iO.onplay&&i&&(f._iO.onplay.apply(f),m=!0),f.setVolume(f._iO.volume,!0),f.setPan(f._iO.pan,!0),f.isHTML5?f.instanceCount<2?(o(),n=f._setup_html5(),f.setPosition(f._iO.position),n.play()):(h=new Audio(f._iO.url),c=function(){nt.remove(h,"ended",c),f._onfinish(f),et(h),h=null},g=function(){nt.remove(h,"canplay",g);try{h.currentTime=f._iO.position/Jt}catch(t){}h.play()},nt.add(h,"ended",c),void 0!==f._iO.volume&&(h.volume=Math.max(0,Math.min(1,f._iO.volume/100))),f.muted&&(h.muted=!0),f._iO.position?nt.add(h,"canplay",g):h.play()):(v=mt._start(f.id,f._iO.loops||1,9===u?f.position:f.position/Jt,f._iO.multiShot||!1),9!==u||v||f._iO.onplayerror&&f._iO.onplayerror.apply(f))}return f},this.start=this.play,this.stop=function(t){var e,i=f._iO;return 1===f.playState&&(f._onbufferchange(0),f._resetOnPosition(0),f.paused=!1,f.isHTML5||(f.playState=0),h(),i.to&&f.clearOnPosition(i.to),f.isHTML5?f._a&&(e=f.position,f.setPosition(0),f.position=e,f._a.pause(),f.playState=0,f._onTimer(),s()):(mt._stop(f.id,t),i.serverURL&&f.unload()),f.instanceCount=0,f._iO={},i.onstop&&i.onstop.apply(f)),f},this.setAutoPlay=function(t){f._iO.autoPlay=t,f.isHTML5||(mt._setAutoPlay(f.id,t),t&&(f.instanceCount||1!==f.readyState||f.instanceCount++))},this.getAutoPlay=function(){return f._iO.autoPlay},this.setPosition=function(t){t===e&&(t=0);var i,r,n=f.isHTML5?Math.max(t,0):Math.min(f.duration||f._iO.duration,Math.max(t,0));if(f.position=n,r=f.position/Jt,f._resetOnPosition(f.position),f._iO.position=n,f.isHTML5){if(f._a){if(f._html5_canplay){if(f._a.currentTime!==r)try{f._a.currentTime=r,(0===f.playState||f.paused)&&f._a.pause()}catch(s){}}else if(r)return f;f.paused&&f._onTimer(!0)}}else i=9===u?f.position:r,f.readyState&&2!==f.readyState&&mt._setPosition(f.id,i,f.paused||!f.playState,f._iO.multiShot);return f},this.pause=function(t){return f.paused||0===f.playState&&1!==f.readyState?f:(f.paused=!0,f.isHTML5?(f._setup_html5().pause(),s()):(t||t===e)&&mt._pause(f.id,f._iO.multiShot),f._iO.onpause&&f._iO.onpause.apply(f),f)},this.resume=function(){var t=f._iO;return f.paused?(f.paused=!1,f.playState=1,f.isHTML5?(f._setup_html5().play(),o()):(t.isMovieStar&&!t.serverURL&&f.setPosition(f.position),mt._pause(f.id,t.multiShot)),!m&&t.onplay?(t.onplay.apply(f),m=!0):t.onresume&&t.onresume.apply(f),f):f},this.togglePause=function(){return 0===f.playState?(f.play({position:9!==u||f.isHTML5?f.position/Jt:f.position}),f):(f.paused?f.resume():f.pause(),f)},this.setPan=function(t,i){return t===e&&(t=0),i===e&&(i=!1),f.isHTML5||mt._setPan(f.id,t),f._iO.pan=t,i||(f.pan=t,f.options.pan=t),f},this.setVolume=function(t,i){return t===e&&(t=100),i===e&&(i=!1),f.isHTML5?f._a&&(pt.muted&&!f.muted&&(f.muted=!0,f._a.muted=!0),f._a.volume=Math.max(0,Math.min(1,t/100))):mt._setVolume(f.id,pt.muted&&!f.muted||f.muted?0:t),f._iO.volume=t,i||(f.volume=t,f.options.volume=t),f},this.mute=function(){return f.muted=!0,f.isHTML5?f._a&&(f._a.muted=!0):mt._setVolume(f.id,0),f},this.unmute=function(){f.muted=!1;var t=f._iO.volume!==e;return f.isHTML5?f._a&&(f._a.muted=!1):mt._setVolume(f.id,t?f._iO.volume:f.options.volume),f},this.toggleMute=function(){return f.muted?f.unmute():f.mute()},this.onPosition=function(t,i,r){return g.push({position:parseInt(t,10),method:i,scope:r!==e?r:f,fired:!1}),f},this.onposition=this.onPosition,this.clearOnPosition=function(t,e){var i;if(t=parseInt(t,10),isNaN(t))return!1;for(i=0;i<g.length;i++)t===g[i].position&&(e&&e!==g[i].method||(g[i].fired&&v--,g.splice(i,1)))},this._processOnPosition=function(){var t,e,i=g.length;if(!i||!f.playState||v>=i)return!1;for(t=i-1;t>=0;t--)e=g[t],!e.fired&&f.position>=e.position&&(e.fired=!0,v++,e.method.apply(e.scope,[e.position]),i=g.length);return!0},this._resetOnPosition=function(t){var e,i,r=g.length;if(!r)return!1;for(e=r-1;e>=0;e--)i=g[e],i.fired&&t<=i.position&&(i.fired=!1,v--);return!0},l=function(){var t,e,i=f._iO,r=i.from,n=i.to;return e=function(){f.clearOnPosition(n,e),f.stop()},t=function(){null===n||isNaN(n)||f.onPosition(n,e)},null===r||isNaN(r)||(i.position=r,i.multiShot=!1,t()),i},a=function(){var t,e=f._iO.onposition;if(e)for(t in e)e.hasOwnProperty(t)&&f.onPosition(parseInt(t,10),e[t])},h=function(){var t,e=f._iO.onposition;if(e)for(t in e)e.hasOwnProperty(t)&&f.clearOnPosition(parseInt(t,10))},o=function(){f.isHTML5&&z(f)},s=function(){f.isHTML5&&W(f)},i=function(t){t||(g=[],v=0),m=!1,f._hasTimer=null,f._a=null,f._html5_canplay=!1,f.bytesLoaded=null,f.bytesTotal=null,f.duration=f._iO&&f._iO.duration?f._iO.duration:null,f.durationEstimate=null,f.buffered=[],f.eqData=[],f.eqData.left=[],f.eqData.right=[],f.failures=0,f.isBuffering=!1,f.instanceOptions={},f.instanceCount=0,f.loaded=!1,f.metadata={},f.readyState=0,f.muted=!1,f.paused=!1,f.peakData={left:0,right:0},f.waveformData={left:[],right:[]},f.playState=0,f.position=null,f.id3={}},i(),this._onTimer=function(t){var e,i,r=!1,n={};if(f._hasTimer||t)return f._a&&(t||(f.playState>0||1===f.readyState)&&!f.paused)&&(e=f._get_html5_duration(),e!==c.duration&&(c.duration=e,f.duration=e,r=!0),f.durationEstimate=f.duration,i=f._a.currentTime*Jt||0,i!==c.time&&(c.time=i,r=!0),(r||t)&&f._whileplaying(i,n,n,n,n)),r},this._get_html5_duration=function(){var t=f._iO,e=f._a&&f._a.duration?f._a.duration*Jt:t&&t.duration?t.duration:null,i=e&&!isNaN(e)&&e!==1/0?e:null;return i},this._apply_loop=function(t,e){t.loop=e>1?"loop":""},this._setup_html5=function(t){var e,n=p(f._iO,t),s=Bt?ft:f._a,o=decodeURI(n.url);if(Bt?o===decodeURI(st)&&(e=!0):o===decodeURI(_)&&(e=!0),s){if(s._s)if(Bt)s._s&&s._s.playState&&!e&&s._s.stop();else if(!Bt&&o===decodeURI(_))return f._apply_loop(s,n.loops),s;e||(_&&i(!1),s.src=n.url,f.url=n.url,_=n.url,st=n.url,s._called_load=!1)}else n.autoLoad||n.autoPlay?(f._a=new Audio(n.url),f._a.load()):f._a=Xt&&opera.version()<10?new Audio(null):new Audio,s=f._a,s._called_load=!1,Bt&&(ft=s);return f.isHTML5=!0,f._a=s,s._s=f,r(),f._apply_loop(s,n.loops),n.autoLoad||n.autoPlay?f.load():(s.autobuffer=!1,s.preload="auto"),s},r=function(){function t(t,e,i){return f._a?f._a.addEventListener(t,e,i||!1):null}if(f._a._added_events)return!1;var e;f._a._added_events=!0;for(e in lt)lt.hasOwnProperty(e)&&t(e,lt[e]);return!0},n=function(){function t(t,e,i){return f._a?f._a.removeEventListener(t,e,i||!1):null}var e;f._a._added_events=!1;for(e in lt)lt.hasOwnProperty(e)&&t(e,lt[e])},this._onload=function(t){var e=!!t||!f.isHTML5&&8===u&&f.duration;return f.loaded=e,f.readyState=e?3:2,f._onbufferchange(0),f._iO.onload&&dt(f,function(){f._iO.onload.apply(f,[e])}),!0},this._onbufferchange=function(t){return 0!==f.playState&&(!(t&&f.isBuffering||!t&&!f.isBuffering)&&(f.isBuffering=1===t,f._iO.onbufferchange&&f._iO.onbufferchange.apply(f,[t]),!0))},this._onsuspend=function(){return f._iO.onsuspend&&f._iO.onsuspend.apply(f),!0},this._onfailure=function(t,e,i){f.failures++,f._iO.onfailure&&1===f.failures&&f._iO.onfailure(t,e,i)},this._onwarning=function(t,e,i){f._iO.onwarning&&f._iO.onwarning(t,e,i)},this._onfinish=function(){var t=f._iO.onfinish;f._onbufferchange(0),f._resetOnPosition(0),f.instanceCount&&(f.instanceCount--,f.instanceCount||(h(),f.playState=0,f.paused=!1,f.instanceCount=0,f.instanceOptions={},f._iO={},s(),f.isHTML5&&(f.position=0)),f.instanceCount&&!f._iO.multiShotEvents||t&&dt(f,function(){t.apply(f)}))},this._whileloading=function(t,e,i,r){var n=f._iO;f.bytesLoaded=t,f.bytesTotal=e,f.duration=Math.floor(i),f.bufferLength=r,f.isHTML5||n.isMovieStar?f.durationEstimate=f.duration:n.duration?f.durationEstimate=f.duration>n.duration?f.duration:n.duration:f.durationEstimate=parseInt(f.bytesTotal/f.bytesLoaded*f.duration,10),f.isHTML5||(f.buffered=[{start:0,end:f.duration}]),(3!==f.readyState||f.isHTML5)&&n.whileloading&&n.whileloading.apply(f)},this._whileplaying=function(t,i,r,n,s){var o,a=f._iO;return!isNaN(t)&&null!==t&&(f.position=Math.max(0,t),f._processOnPosition(),!f.isHTML5&&u>8&&(a.usePeakData&&i!==e&&i&&(f.peakData={left:i.leftPeak,right:i.rightPeak}),a.useWaveformData&&r!==e&&r&&(f.waveformData={left:r.split(","),right:n.split(",")}),a.useEQData&&s!==e&&s&&s.leftEQ&&(o=s.leftEQ.split(","),f.eqData=o,f.eqData.left=o,s.rightEQ!==e&&s.rightEQ&&(f.eqData.right=s.rightEQ.split(",")))),1===f.playState&&(f.isHTML5||8!==u||f.position||!f.isBuffering||f._onbufferchange(0),a.whileplaying&&a.whileplaying.apply(f)),!0)},this._oncaptiondata=function(t){f.captiondata=t,f._iO.oncaptiondata&&f._iO.oncaptiondata.apply(f,[t])},this._onmetadata=function(t,e){var i,r,n={};for(i=0,r=t.length;i<r;i++)n[t[i]]=e[i];f.metadata=n,f._iO.onmetadata&&f._iO.onmetadata.call(f,f.metadata)},this._onid3=function(t,e){var i,r,n=[];for(i=0,r=t.length;i<r;i++)n[t[i]]=e[i];f.id3=p(f.id3,n),f._iO.onid3&&f._iO.onid3.apply(f)},this._onconnect=function(t){t=1===t,f.connected=t,t&&(f.failures=0,Y(f.id)&&(f.getAutoPlay()?f.play(e,f.getAutoPlay()):f._iO.autoLoad&&f.load()),f._iO.onconnect&&f._iO.onconnect.apply(f,[t]))},this._ondataerror=function(t){f.playState>0&&f._iO.ondataerror&&f._iO.ondataerror.apply(f)}},L=function(){return _t.body||_t.getElementsByTagName("div")[0]},a=function(t){return _t.getElementById(t)},p=function(t,i){var r,n,s=t||{};r=i===e?pt.defaultOptions:i;for(n in r)r.hasOwnProperty(n)&&s[n]===e&&("object"!=typeof r[n]||null===r[n]?s[n]=r[n]:s[n]=p(s[n],r[n]));return s},dt=function(e,i){e.isHTML5||8!==u?i():t.setTimeout(i,0)},m={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1},f=function(t,i){var r,n=!0,s=i!==e,o=pt.setupOptions,a=m;for(r in t)if(t.hasOwnProperty(r))if("object"!=typeof t[r]||null===t[r]||t[r]instanceof Array||t[r]instanceof RegExp)s&&a[i]!==e?pt[i][r]=t[r]:o[r]!==e?(pt.setupOptions[r]=t[r],pt[r]=t[r]):a[r]===e?n=!1:pt[r]instanceof Function?pt[r].apply(pt,t[r]instanceof Array?t[r]:[t[r]]):pt[r]=t[r];else{if(a[r]!==e)return f(t[r],r);n=!1}return n},nt=function(){function e(t){var e=Dt.call(t),i=e.length;return s?(e[1]="on"+e[1],i>3&&e.pop()):3===i&&e.push(!1),e}function i(t,e){var i=t.shift(),r=[o[e]];s?i[r](t[0],t[1]):i[r].apply(i,t)}function r(){i(e(arguments),"add")}function n(){i(e(arguments),"remove")}var s=t.attachEvent,o={add:s?"attachEvent":"addEventListener",remove:s?"detachEvent":"removeEventListener"};return{add:r,remove:n}}(),lt={abort:s(function(){}),canplay:s(function(){var t,i=this._s;if(i._html5_canplay)return!0;if(i._html5_canplay=!0,i._onbufferchange(0),t=i._iO.position===e||isNaN(i._iO.position)?null:i._iO.position/Jt,this.currentTime!==t)try{this.currentTime=t}catch(r){}i._iO._oncanplay&&i._iO._oncanplay()}),canplaythrough:s(function(){var t=this._s;t.loaded||(t._onbufferchange(0),t._whileloading(t.bytesLoaded,t.bytesTotal,t._get_html5_duration()),t._onload(!0))}),durationchange:s(function(){var t,e=this._s;t=e._get_html5_duration(),isNaN(t)||t===e.duration||(e.durationEstimate=e.duration=t)}),ended:s(function(){var t=this._s;t._onfinish()}),error:s(function(){this._s._onload(!1)}),loadeddata:s(function(){var t=this._s;t._loaded||Ht||(t.duration=t._get_html5_duration())}),loadedmetadata:s(function(){}),loadstart:s(function(){this._s._onbufferchange(1)}),play:s(function(){this._s._onbufferchange(0)}),playing:s(function(){this._s._onbufferchange(0)}),progress:s(function(t){var e,i,r=this._s,n=0,s=("progress"===t.type,t.target.buffered),o=t.loaded||0,a=t.total||1;if(r.buffered=[],s&&s.length){for(e=0,i=s.length;e<i;e++)r.buffered.push({start:s.start(e)*Jt,end:s.end(e)*Jt});n=(s.end(0)-s.start(0))*Jt,o=Math.min(1,n/(t.target.duration*Jt))}isNaN(o)||(r._whileloading(o,a,r._get_html5_duration()),o&&a&&o===a&&lt.canplaythrough.call(this,t))}),ratechange:s(function(){}),suspend:s(function(t){var e=this._s;lt.progress.call(this,t),e._onsuspend()}),stalled:s(function(){}),timeupdate:s(function(){this._s._onTimer()}),waiting:s(function(){var t=this._s;t._onbufferchange(1)})},Q=function(t){var e;return e=!(!t||!(t.type||t.url||t.serverURL))&&(!(t.serverURL||t.type&&n(t.type))&&(t.type?$({type:t.type}):$({url:t.url})||pt.html5Only||t.url.match(/data\:/i)))},et=function(t){var e;return t&&(e=Ht?Zt:pt.html5.canPlayType("audio/wav")?Kt:Zt,t.src=e,void 0!==t._called_unload&&(t._called_load=!1)),Bt&&(st=null),e},$=function(t){if(!pt.useHTML5Audio||!pt.hasHTML5)return!1;var i,r,s,o,a=t.url||null,h=t.type||null,l=pt.audioFormats;if(h&&pt.html5[h]!==e)return pt.html5[h]&&!n(h);if(!tt){tt=[];for(o in l)l.hasOwnProperty(o)&&(tt.push(o),l[o].related&&(tt=tt.concat(l[o].related)));tt=new RegExp("\\.("+tt.join("|")+")(\\?.*)?$","i")}return s=a?a.toLowerCase().match(tt):null,s&&s.length?s=s[1]:h?(r=h.indexOf(";"),s=(r!==-1?h.substr(0,r):h).substr(6)):i=!1,s&&pt.html5[s]!==e?i=pt.html5[s]&&!n(s):(h="audio/"+s,i=pt.html5.canPlayType({type:h}),pt.html5[s]=i,i=i&&pt.html5[h]&&!n(h)),i},rt=function(){function t(t){var e,i,r=!1,n=!1;if(!o||"function"!=typeof o.canPlayType)return r;if(t instanceof Array){for(s=0,i=t.length;s<i;s++)(pt.html5[t[s]]||o.canPlayType(t[s]).match(pt.html5Test))&&(n=!0,pt.html5[t[s]]=!0,pt.flash[t[s]]=!!t[s].match(Vt));r=n}else e=!(!o||"function"!=typeof o.canPlayType)&&o.canPlayType(t),r=!(!e||!e.match(pt.html5Test));return r}if(!pt.useHTML5Audio||!pt.hasHTML5)return pt.html5.usingFlash=!0,It=!0,!1;var i,r,n,s,o=Audio!==e?Xt&&opera.version()<10?new Audio(null):new Audio:null,a={};n=pt.audioFormats;for(i in n)if(n.hasOwnProperty(i)&&(r="audio/"+i,a[i]=t(n[i].type),a[r]=a[i],i.match(Vt)?(pt.flash[i]=!0,pt.flash[r]=!0):(pt.flash[i]=!1,pt.flash[r]=!1),n[i]&&n[i].related))for(s=n[i].related.length-1;s>=0;s--)a["audio/"+n[i].related[s]]=a[i],pt.html5[n[i].related[s]]=a[i],pt.flash[n[i].related[s]]=a[i];return a.canPlayType=o?t:null,pt.html5=p(pt.html5,a),pt.html5.usingFlash=K(),It=pt.html5.usingFlash,!0},S={},j=function(){},X=function(t){return 8===u&&t.loops>1&&t.stream&&(t.stream=!1),t},G=function(t,e){return t&&!t.usePolicyFile&&(t.onid3||t.usePeakData||t.useWaveformData||t.useEQData)&&(t.usePolicyFile=!0),t},q=function(t){},h=function(){return!1},B=function(t){var e;for(e in t)t.hasOwnProperty(e)&&"function"==typeof t[e]&&(t[e]=h);e=null},k=function(t){t===e&&(t=!1),(Tt||t)&&pt.disable(t)},F=function(t){var e,i=null;if(t)if(t.match(/\.swf(\?.*)?$/i)){if(i=t.substr(t.toLowerCase().lastIndexOf(".swf?")+4))return t}else t.lastIndexOf("/")!==t.length-1&&(t+="/");return e=(t&&t.lastIndexOf("/")!==-1?t.substr(0,t.lastIndexOf("/")+1):"./")+pt.movieURL,pt.noSWFCache&&(e+="?ts="+(new Date).getTime()),e},b=function(){u=parseInt(pt.flashVersion,10),8!==u&&9!==u&&(pt.flashVersion=u=At);var t=pt.debugMode||pt.debugFlash?"_debug.swf":".swf";pt.useHTML5Audio&&!pt.html5Only&&pt.audioFormats.mp4.required&&u<9&&(pt.flashVersion=u=9),pt.version=pt.versionNumber+(pt.html5Only?" (HTML5-only mode)":9===u?" (AS3/Flash 9)":" (AS2/Flash 8)"),u>8?(pt.defaultOptions=p(pt.defaultOptions,pt.flash9Options),pt.features.buffering=!0,pt.defaultOptions=p(pt.defaultOptions,pt.movieStarOptions),pt.filePatterns.flash9=new RegExp("\\.(mp3|"+ee.join("|")+")(\\?.*)?$","i"),pt.features.movieStar=!0):pt.features.movieStar=!1,pt.filePattern=pt.filePatterns[8!==u?"flash9":"flash8"],pt.movieURL=(8===u?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",t),pt.features.peakData=pt.features.waveformData=pt.features.eqData=u>8},I=function(t,e){return!!mt&&void mt._setPolling(t,e)},D=function(){},Y=this.getSoundById,U=function(){var t=[];return pt.debugMode&&t.push(H.sm2Debug),pt.debugFlash&&t.push(H.flashDebug),pt.useHighPerformance&&t.push(H.highPerf),t.join(" ")},N=function(){var t=(j("fbHandler"),pt.getMoviePercent()),e=H,i={type:"FLASHBLOCK"};return!pt.html5Only&&void(pt.ok()?pt.oMC&&(pt.oMC.className=[U(),e.swfDefault,e.swfLoaded+(pt.didFlashBlock?" "+e.swfUnblocked:"")].join(" ")):(It&&(pt.oMC.className=U()+" "+e.swfDefault+" "+(null===t?e.swfTimedout:e.swfError)),pt.didFlashBlock=!0,v({type:"ontimeout",ignoreInit:!0,error:i}),O(i)))},g=function(t,i,r){yt[t]===e&&(yt[t]=[]),yt[t].push({method:i,scope:r||null,fired:!1})},v=function(t){if(t||(t={type:pt.ok()?"onready":"ontimeout"}),!bt&&t&&!t.ignoreInit)return!1;if("ontimeout"===t.type&&(pt.ok()||Tt&&!t.ignoreInit))return!1;var e,i,r={success:t&&t.ignoreInit?pt.ok():!Tt},n=t&&t.type?yt[t.type]||[]:[],s=[],o=[r],a=It&&!pt.ok();for(t.error&&(o[0].error=t.error),e=0,i=n.length;e<i;e++)n[e].fired!==!0&&s.push(n[e]);if(s.length)for(e=0,i=s.length;e<i;e++)s[e].scope?s[e].method.apply(s[e].scope,o):s[e].method.apply(this,o),a||(s[e].fired=!0);return!0},_=function(){t.setTimeout(function(){pt.useFlashBlock&&N(),v(),"function"==typeof pt.onload&&pt.onload.apply(t),pt.waitForWindowLoad&&nt.add(t,"load",_)},1)},at=function(){if(ot!==e)return ot;var i,r,n,s=!1,o=navigator,a=o.plugins,h=t.ActiveXObject;if(a&&a.length)r="application/x-shockwave-flash",n=o.mimeTypes,n&&n[r]&&n[r].enabledPlugin&&n[r].enabledPlugin.description&&(s=!0);else if(h!==e&&!gt.match(/MSAppHost/i)){try{i=new h("ShockwaveFlash.ShockwaveFlash")}catch(l){i=null}s=!!i,i=null}return ot=s,s},K=function(){var t,e,i=pt.audioFormats,r=Ft&&!!gt.match(/os (1|2|3_0|3_1)\s/i);if(r?(pt.hasHTML5=!1,pt.html5Only=!0,pt.oMC&&(pt.oMC.style.display="none")):pt.useHTML5Audio&&(pt.html5&&pt.html5.canPlayType||(pt.hasHTML5=!1)),pt.useHTML5Audio&&pt.hasHTML5){Z=!0;for(e in i)i.hasOwnProperty(e)&&i[e].required&&(pt.html5.canPlayType(i[e].type)?pt.preferFlash&&(pt.flash[e]||pt.flash[i[e].type])&&(t=!0):(Z=!1,t=!0))}return pt.ignoreFlash&&(t=!1,Z=!0),pt.html5Only=pt.hasHTML5&&pt.useHTML5Audio&&!t,!pt.html5Only},J=function(t){var e,i,r,n=0;if(t instanceof Array){for(e=0,i=t.length;e<i;e++)if(t[e]instanceof Object){if(pt.canPlayMIME(t[e].type)){n=e;break}}else if(pt.canPlayURL(t[e])){n=e;break}t[n].url&&(t[n]=t[n].url),r=t[n]}else r=t;return r},z=function(t){t._hasTimer||(t._hasTimer=!0,!Gt&&pt.html5PollingInterval&&(null===Rt&&0===Lt&&(Rt=setInterval(V,pt.html5PollingInterval)),Lt++))},W=function(t){t._hasTimer&&(t._hasTimer=!1,!Gt&&pt.html5PollingInterval&&Lt--)},V=function(){var t;if(null!==Rt&&!Lt)return clearInterval(Rt),Rt=null,!1;for(t=pt.soundIDs.length-1;t>=0;t--)pt.sounds[pt.soundIDs[t]].isHTML5&&pt.sounds[pt.soundIDs[t]]._hasTimer&&pt.sounds[pt.soundIDs[t]]._onTimer()},O=function(i){i=i!==e?i:{},"function"==typeof pt.onerror&&pt.onerror.apply(t,[{type:i.type!==e?i.type:null}]),i.fatal!==e&&i.fatal&&pt.disable()},ht=function(){if(!qt||!at())return!1;var t,e,i=pt.audioFormats;for(e in i)if(i.hasOwnProperty(e)&&("mp3"===e||"mp4"===e)&&(pt.html5[e]=!1,i[e]&&i[e].related))for(t=i[e].related.length-1;t>=0;t--)pt.html5[i[e].related[t]]=!1},this._setSandboxType=function(t){},this._externalInterfaceOK=function(t){if(pt.swfLoaded)return!1;pt.swfLoaded=!0,zt=!1,qt&&ht(),setTimeout(c,Nt?100:1)},R=function(t,i){function r(){}function n(t,e){return'<param name="'+t+'" value="'+e+'" />'}if(xt&&wt)return!1;if(pt.html5Only)return b(),r(),pt.oMC=a(pt.movieID),c(),xt=!0,wt=!0,!1;var s,o,h,l,u,d,p,f,m=i||pt.url,g=pt.altURL||m,v="JS/Flash audio component (SoundManager 2)",_=L(),y=U(),x=null,w=_t.getElementsByTagName("html")[0];if(x=w&&w.dir&&w.dir.match(/rtl/i),t=t===e?pt.id:t,b(),pt.url=F(Qt?m:g),i=pt.url,pt.wmode=!pt.wmode&&pt.useHighPerformance?"transparent":pt.wmode,null!==pt.wmode&&(gt.match(/msie 8/i)||!Nt&&!pt.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(Ot.push(S.spcWmode),pt.wmode=null),s={name:t,id:t,src:i,quality:"high",allowScriptAccess:pt.allowScriptAccess,bgcolor:pt.bgColor,pluginspage:$t+"www.macromedia.com/go/getflashplayer",title:v,type:"application/x-shockwave-flash",wmode:pt.wmode,hasPriority:"true"},pt.debugFlash&&(s.FlashVars="debug=1"),pt.wmode||delete s.wmode,Nt)o=_t.createElement("div"),l=['<object id="'+t+'" data="'+i+'" type="'+s.type+'" title="'+s.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+$t+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',n("movie",i),n("AllowScriptAccess",pt.allowScriptAccess),n("quality",s.quality),pt.wmode?n("wmode",pt.wmode):"",n("bgcolor",pt.bgColor),n("hasPriority","true"),pt.debugFlash?n("FlashVars",s.FlashVars):"","</object>"].join("");else{o=_t.createElement("embed");for(h in s)s.hasOwnProperty(h)&&o.setAttribute(h,s[h])}if(D(),y=U(),_=L())if(pt.oMC=a(pt.movieID)||_t.createElement("div"),pt.oMC.id)f=pt.oMC.className,pt.oMC.className=(f?f+" ":H.swfDefault)+(y?" "+y:""),pt.oMC.appendChild(o),Nt&&(u=pt.oMC.appendChild(_t.createElement("div")),u.className=H.swfBox,u.innerHTML=l),wt=!0;else{if(pt.oMC.id=pt.movieID,pt.oMC.className=H.swfDefault+" "+y,d=null,u=null,pt.useFlashBlock||(pt.useHighPerformance?d={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(d={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},x&&(d.left=Math.abs(parseInt(d.left,10))+"px"))),Ut&&(pt.oMC.style.zIndex=1e4),!pt.debugFlash)for(p in d)d.hasOwnProperty(p)&&(pt.oMC.style[p]=d[p]);try{Nt||pt.oMC.appendChild(o),_.appendChild(pt.oMC),Nt&&(u=pt.oMC.appendChild(_t.createElement("div")),u.className=H.swfBox,u.innerHTML=l),wt=!0}catch(T){throw new Error(j("domError")+" \n"+T.toString())}}return xt=!0,r(),!0},A=function(){return pt.html5Only?(R(),!1):!mt&&(!!pt.url&&(mt=pt.getMovie(pt.id),mt||(Ct?(Nt?pt.oMC.innerHTML=Et:pt.oMC.appendChild(Ct),Ct=null,xt=!0):R(pt.id,pt.url),mt=pt.getMovie(pt.id)),"function"==typeof pt.oninitmovie&&setTimeout(pt.oninitmovie,1),!0))},y=function(){setTimeout(x,1e3)},w=function(){t.setTimeout(function(){pt.setup({preferFlash:!1}).reboot(),pt.didFlashBlock=!0,pt.beginDelayedInit()},1)},x=function(){var e,i=!1;return!!pt.url&&(!Mt&&(Mt=!0,nt.remove(t,"load",y),!(ot&&zt&&!Yt)&&(bt||(e=pt.getMoviePercent(),e>0&&e<100&&(i=!0)),void setTimeout(function(){return e=pt.getMoviePercent(),i?(Mt=!1,t.setTimeout(y,1),!1):void(!bt&&Wt&&(null===e?pt.useFlashBlock||0===pt.flashLoadTimeout?pt.useFlashBlock&&N():!pt.useFlashBlock&&Z?w():v({type:"ontimeout",ignoreInit:!0,error:{type:"INIT_FLASHBLOCK"}}):0===pt.flashLoadTimeout||(!pt.useFlashBlock&&Z?w():k(!0))))},pt.flashLoadTimeout))))},T=function(){function e(){nt.remove(t,"focus",T)}return Yt||!zt?(e(),!0):(Wt=!0,Yt=!0,Mt=!1,y(),e(),!0)},ut=function(){},ct=function(){},d=function(e){if(bt)return!1;if(pt.html5Only)return bt=!0,_(),!0;var i,r=pt.useFlashBlock&&pt.flashLoadTimeout&&!pt.getMoviePercent(),n=!0;return r||(bt=!0),i={type:!ot&&It?"NO_FLASH":"INIT_TIMEOUT"},(Tt||e)&&(pt.useFlashBlock&&pt.oMC&&(pt.oMC.className=U()+" "+(null===pt.getMoviePercent()?H.swfTimedout:H.swfError)),v({type:"ontimeout",error:i,ignoreInit:!0}),O(i),n=!1),Tt||(pt.waitForWindowLoad&&!St?nt.add(t,"load",_):_()),n},l=function(){var t,i=pt.setupOptions;for(t in i)i.hasOwnProperty(t)&&(pt[t]===e?pt[t]=i[t]:pt[t]!==i[t]&&(pt.setupOptions[t]=pt[t]))},c=function(){function e(){nt.remove(t,"load",pt.beginDelayedInit)}if(bt)return!1;if(pt.html5Only)return bt||(e(),pt.enabled=!0,d()),!0;A();try{mt._externalInterfaceTest(!1),I(!0,pt.flashPollingInterval||(pt.useHighPerformance?10:50)),pt.debugMode||mt._disableDebug(),pt.enabled=!0,pt.html5Only||nt.add(t,"unload",h)}catch(i){return O({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),k(!0),d(),!1}return d(),e(),!0},E=function(){return!P&&(P=!0,l(),D(),!ot&&pt.hasHTML5&&pt.setup({useHTML5Audio:!0,preferFlash:!1}),rt(),!ot&&It&&(Ot.push(S.needFlash),pt.setup({flashLoadTimeout:1})),_t.removeEventListener&&_t.removeEventListener("DOMContentLoaded",E,!1),A(),!0)},it=function(){return"complete"===_t.readyState&&(E(),_t.detachEvent("onreadystatechange",it)),!0},M=function(){St=!0,E(),nt.remove(t,"load",M)},C=function(){Gt&&(pt.setupOptions.useHTML5Audio=!0,pt.setupOptions.preferFlash=!1,(Ft||jt&&!gt.match(/android\s2\.3/i))&&(Ft&&(pt.ignoreFlash=!0),Bt=!0))},C(),at(),nt.add(t,"focus",T),nt.add(t,"load",y),nt.add(t,"load",M),_t.addEventListener?_t.addEventListener("DOMContentLoaded",E,!1):_t.attachEvent?_t.attachEvent("onreadystatechange",it):O({type:"NO_DOM2_EVENTS",fatal:!0})}if(!t||!t.document)throw new Error("SoundManager requires a browser with window and document objects.");var r=null;void 0!==t.SM2_DEFER&&SM2_DEFER||(r=new i),"object"==typeof module&&module&&"object"==typeof module.exports?(t.soundManager=r,module.exports.SoundManager=i,module.exports.soundManager=r):"function"==typeof define&&define.amd?define("SM2",r):(t.SoundManager=i,t.soundManager=r)}(window),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define("PIXI",[],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.PIXI=t()}}(function(){var t;return function e(t,i,r){function n(o,a){if(!i[o]){if(!t[o]){var h="function"==typeof require&&require;if(!a&&h)return h(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[o]={exports:{}};t[o][0].call(c.exports,function(e){var i=t[o][1][e];return n(i?i:e)},c,c.exports,e,t,i,r)}return i[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)n(r[o]);return n}({1:[function(t,e,i){(function(i){t("./polyfill");var r=e.exports=t("./core");r.extras=t("./extras"),r.filters=t("./filters"),r.interaction=t("./interaction"),r.loaders=t("./loaders"),r.mesh=t("./mesh"),r.flip=t("./flip"),r.loader=new r.loaders.Loader,Object.assign(r,t("./deprecation")),i.PIXI=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./core":29,"./deprecation":78,"./extras":85,"./filters":102,"./flip":118,"./interaction":127,"./loaders":130,"./mesh":136,"./polyfill":140}],2:[function(e,i,r){(function(e){!function(){function r(t){var e=!1;return function(){if(e)throw new Error("Callback was already called.");e=!0,t.apply(n,arguments)}}var n,s,o={};n=this,null!=n&&(s=n.async),o.noConflict=function(){return n.async=s,o};var a=Object.prototype.toString,h=Array.isArray||function(t){return"[object Array]"===a.call(t)},l=function(t,e){for(var i=0;i<t.length;i+=1)e(t[i],i,t)},c=function(t,e){if(t.map)return t.map(e);var i=[];return l(t,function(t,r,n){i.push(e(t,r,n))}),i},u=function(t,e,i){return t.reduce?t.reduce(e,i):(l(t,function(t,r,n){i=e(i,t,r,n)}),i)},d=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e};"undefined"!=typeof e&&e.nextTick?(o.nextTick=e.nextTick,"undefined"!=typeof setImmediate?o.setImmediate=function(t){setImmediate(t)}:o.setImmediate=o.nextTick):"function"==typeof setImmediate?(o.nextTick=function(t){setImmediate(t)},o.setImmediate=o.nextTick):(o.nextTick=function(t){setTimeout(t,0)},o.setImmediate=o.nextTick),o.each=function(t,e,i){function n(e){e?(i(e),i=function(){}):(s+=1,s>=t.length&&i())}if(i=i||function(){},!t.length)return i();var s=0;l(t,function(t){e(t,r(n))})},o.forEach=o.each,o.eachSeries=function(t,e,i){if(i=i||function(){},!t.length)return i();var r=0,n=function(){e(t[r],function(e){e?(i(e),i=function(){}):(r+=1,r>=t.length?i():n())})};n()},o.forEachSeries=o.eachSeries,o.eachLimit=function(t,e,i,r){var n=p(e);n.apply(null,[t,i,r])},o.forEachLimit=o.eachLimit;var p=function(t){return function(e,i,r){if(r=r||function(){},!e.length||t<=0)return r();var n=0,s=0,o=0;!function a(){if(n>=e.length)return r();for(;o<t&&s<e.length;)s+=1,o+=1,i(e[s-1],function(t){t?(r(t),r=function(){}):(n+=1,o-=1,n>=e.length?r():a())})}()}},f=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[o.each].concat(e))}},m=function(t,e){return function(){var i=Array.prototype.slice.call(arguments);return e.apply(null,[p(t)].concat(i))}},g=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[o.eachSeries].concat(e))}},v=function(t,e,i,r){if(e=c(e,function(t,e){return{index:e,value:t}}),r){var n=[];t(e,function(t,e){i(t.value,function(i,r){n[t.index]=r,e(i)})},function(t){r(t,n)})}else t(e,function(t,e){i(t.value,function(t){e(t)})})};o.map=f(v),o.mapSeries=g(v),o.mapLimit=function(t,e,i,r){return _(e)(t,i,r)};var _=function(t){return m(t,v)};o.reduce=function(t,e,i,r){
o.eachSeries(t,function(t,r){i(e,t,function(t,i){e=i,r(t)})},function(t){r(t,e)})},o.inject=o.reduce,o.foldl=o.reduce,o.reduceRight=function(t,e,i,r){var n=c(t,function(t){return t}).reverse();o.reduce(n,e,i,r)},o.foldr=o.reduceRight;var y=function(t,e,i,r){var n=[];e=c(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){i(t.value,function(i){i&&n.push(t),e()})},function(t){r(c(n.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};o.filter=f(y),o.filterSeries=g(y),o.select=o.filter,o.selectSeries=o.filterSeries;var x=function(t,e,i,r){var n=[];e=c(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){i(t.value,function(i){i||n.push(t),e()})},function(t){r(c(n.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};o.reject=f(x),o.rejectSeries=g(x);var w=function(t,e,i,r){t(e,function(t,e){i(t,function(i){i?(r(t),r=function(){}):e()})},function(t){r()})};o.detect=f(w),o.detectSeries=g(w),o.some=function(t,e,i){o.each(t,function(t,r){e(t,function(t){t&&(i(!0),i=function(){}),r()})},function(t){i(!1)})},o.any=o.some,o.every=function(t,e,i){o.each(t,function(t,r){e(t,function(t){t||(i(!1),i=function(){}),r()})},function(t){i(!0)})},o.all=o.every,o.sortBy=function(t,e,i){o.map(t,function(t,i){e(t,function(e,r){e?i(e):i(null,{value:t,criteria:r})})},function(t,e){if(t)return i(t);var r=function(t,e){var i=t.criteria,r=e.criteria;return i<r?-1:i>r?1:0};i(null,c(e.sort(r),function(t){return t.value}))})},o.auto=function(t,e){e=e||function(){};var i=d(t),r=i.length;if(!r)return e();var n={},s=[],a=function(t){s.unshift(t)},c=function(t){for(var e=0;e<s.length;e+=1)if(s[e]===t)return void s.splice(e,1)},p=function(){r--,l(s.slice(0),function(t){t()})};a(function(){if(!r){var t=e;e=function(){},t(null,n)}}),l(i,function(i){var r=h(t[i])?t[i]:[t[i]],s=function(t){var r=Array.prototype.slice.call(arguments,1);if(r.length<=1&&(r=r[0]),t){var s={};l(d(n),function(t){s[t]=n[t]}),s[i]=r,e(t,s),e=function(){}}else n[i]=r,o.setImmediate(p)},f=r.slice(0,Math.abs(r.length-1))||[],m=function(){return u(f,function(t,e){return t&&n.hasOwnProperty(e)},!0)&&!n.hasOwnProperty(i)};if(m())r[r.length-1](s,n);else{var g=function(){m()&&(c(g),r[r.length-1](s,n))};a(g)}})},o.retry=function(t,e,i){var r=5,n=[];"function"==typeof t&&(i=e,e=t,t=r),t=parseInt(t,10)||r;var s=function(r,s){for(var a=function(t,e){return function(i){t(function(t,r){i(!t||e,{err:t,result:r})},s)}};t;)n.push(a(e,!(t-=1)));o.series(n,function(t,e){e=e[e.length-1],(r||i)(e.err,e.result)})};return i?s():s},o.waterfall=function(t,e){if(e=e||function(){},!h(t)){var i=new Error("First argument to waterfall must be an array of functions");return e(i)}if(!t.length)return e();var r=function(t){return function(i){if(i)e.apply(null,arguments),e=function(){};else{var n=Array.prototype.slice.call(arguments,1),s=t.next();s?n.push(r(s)):n.push(e),o.setImmediate(function(){t.apply(null,n)})}}};r(o.iterator(t))()};var b=function(t,e,i){if(i=i||function(){},h(e))t.map(e,function(t,e){t&&t(function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),e.call(null,t,i)})},i);else{var r={};t.each(d(e),function(t,i){e[t](function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),r[t]=n,i(e)})},function(t){i(t,r)})}};o.parallel=function(t,e){b({map:o.map,each:o.each},t,e)},o.parallelLimit=function(t,e,i){b({map:_(e),each:p(e)},t,i)},o.series=function(t,e){if(e=e||function(){},h(t))o.mapSeries(t,function(t,e){t&&t(function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),e.call(null,t,i)})},e);else{var i={};o.eachSeries(d(t),function(e,r){t[e](function(t){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),i[e]=n,r(t)})},function(t){e(t,i)})}},o.iterator=function(t){var e=function(i){var r=function(){return t.length&&t[i].apply(null,arguments),r.next()};return r.next=function(){return i<t.length-1?e(i+1):null},r};return e(0)},o.apply=function(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e.concat(Array.prototype.slice.call(arguments)))}};var T=function(t,e,i,r){var n=[];t(e,function(t,e){i(t,function(t,i){n=n.concat(i||[]),e(t)})},function(t){r(t,n)})};o.concat=f(T),o.concatSeries=g(T),o.whilst=function(t,e,i){t()?e(function(r){return r?i(r):void o.whilst(t,e,i)}):i()},o.doWhilst=function(t,e,i){t(function(r){if(r)return i(r);var n=Array.prototype.slice.call(arguments,1);e.apply(null,n)?o.doWhilst(t,e,i):i()})},o.until=function(t,e,i){t()?i():e(function(r){return r?i(r):void o.until(t,e,i)})},o.doUntil=function(t,e,i){t(function(r){if(r)return i(r);var n=Array.prototype.slice.call(arguments,1);e.apply(null,n)?i():o.doUntil(t,e,i)})},o.queue=function(t,e){function i(t,e,i,r){return t.started||(t.started=!0),h(e)||(e=[e]),0==e.length?o.setImmediate(function(){t.drain&&t.drain()}):void l(e,function(e){var n={data:e,callback:"function"==typeof r?r:null};i?t.tasks.unshift(n):t.tasks.push(n),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),o.setImmediate(t.process)})}void 0===e&&(e=1);var n=0,s={tasks:[],concurrency:e,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(t,e){i(s,t,!1,e)},kill:function(){s.drain=null,s.tasks=[]},unshift:function(t,e){i(s,t,!0,e)},process:function(){if(!s.paused&&n<s.concurrency&&s.tasks.length){var e=s.tasks.shift();s.empty&&0===s.tasks.length&&s.empty(),n+=1;var i=function(){n-=1,e.callback&&e.callback.apply(e,arguments),s.drain&&s.tasks.length+n===0&&s.drain(),s.process()},o=r(i);t(e.data,o)}},length:function(){return s.tasks.length},running:function(){return n},idle:function(){return s.tasks.length+n===0},pause:function(){s.paused!==!0&&(s.paused=!0)},resume:function(){if(s.paused!==!1){s.paused=!1;for(var t=1;t<=s.concurrency;t++)o.setImmediate(s.process)}}};return s},o.priorityQueue=function(t,e){function i(t,e){return t.priority-e.priority}function r(t,e,i){for(var r=-1,n=t.length-1;r<n;){var s=r+(n-r+1>>>1);i(e,t[s])>=0?r=s:n=s-1}return r}function n(t,e,n,s){return t.started||(t.started=!0),h(e)||(e=[e]),0==e.length?o.setImmediate(function(){t.drain&&t.drain()}):void l(e,function(e){var a={data:e,priority:n,callback:"function"==typeof s?s:null};t.tasks.splice(r(t.tasks,a,i)+1,0,a),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),o.setImmediate(t.process)})}var s=o.queue(t,e);return s.push=function(t,e,i){n(s,t,e,i)},delete s.unshift,s},o.cargo=function(t,e){var i=!1,r=[],n={tasks:r,payload:e,saturated:null,empty:null,drain:null,drained:!0,push:function(t,i){h(t)||(t=[t]),l(t,function(t){r.push({data:t,callback:"function"==typeof i?i:null}),n.drained=!1,n.saturated&&r.length===e&&n.saturated()}),o.setImmediate(n.process)},process:function s(){if(!i){if(0===r.length)return n.drain&&!n.drained&&n.drain(),void(n.drained=!0);var o="number"==typeof e?r.splice(0,e):r.splice(0,r.length),a=c(o,function(t){return t.data});n.empty&&n.empty(),i=!0,t(a,function(){i=!1;var t=arguments;l(o,function(e){e.callback&&e.callback.apply(null,t)}),s()})}},length:function(){return r.length},running:function(){return i}};return n};var S=function(t){return function(e){var i=Array.prototype.slice.call(arguments,1);e.apply(null,i.concat([function(e){var i=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(e?console.error:console[t]&&l(i,function(t){}))}]))}};o.log=S("log"),o.dir=S("dir"),o.memoize=function(t,e){var i={},r={};e=e||function(t){return t};var n=function(){var n=Array.prototype.slice.call(arguments),s=n.pop(),a=e.apply(null,n);a in i?o.nextTick(function(){s.apply(null,i[a])}):a in r?r[a].push(s):(r[a]=[s],t.apply(null,n.concat([function(){i[a]=arguments;var t=r[a];delete r[a];for(var e=0,n=t.length;e<n;e++)t[e].apply(null,arguments)}])))};return n.memo=i,n.unmemoized=t,n},o.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},o.times=function(t,e,i){for(var r=[],n=0;n<t;n++)r.push(n);return o.map(r,e,i)},o.timesSeries=function(t,e,i){for(var r=[],n=0;n<t;n++)r.push(n);return o.mapSeries(r,e,i)},o.seq=function(){var t=arguments;return function(){var e=this,i=Array.prototype.slice.call(arguments),r=i.pop();o.reduce(t,i,function(t,i,r){i.apply(e,t.concat([function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);r(t,e)}]))},function(t,i){r.apply(e,[t].concat(i))})}},o.compose=function(){return o.seq.apply(null,Array.prototype.reverse.call(arguments))};var A=function(t,e){var i=function(){var i=this,r=Array.prototype.slice.call(arguments),n=r.pop();return t(e,function(t,e){t.apply(i,r.concat([e]))},n)};if(arguments.length>2){var r=Array.prototype.slice.call(arguments,2);return i.apply(this,r)}return i};o.applyEach=f(A),o.applyEachSeries=g(A),o.forever=function(t,e){function i(r){if(r){if(e)return e(r);throw r}t(i)}i()},"undefined"!=typeof i&&i.exports?i.exports=o:"undefined"!=typeof t&&t.amd||(n.async=o)}()}).call(this,e("_process"))},{_process:4}],3:[function(t,e,i){(function(t){function e(t,e){for(var i=0,r=t.length-1;r>=0;r--){var n=t[r];"."===n?t.splice(r,1):".."===n?(t.splice(r,1),i++):i&&(t.splice(r,1),i--)}if(e)for(;i--;i)t.unshift("..");return t}function r(t,e){if(t.filter)return t.filter(e);for(var i=[],r=0;r<t.length;r++)e(t[r],r,t)&&i.push(t[r]);return i}var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,s=function(t){return n.exec(t).slice(1)};i.resolve=function(){for(var i="",n=!1,s=arguments.length-1;s>=-1&&!n;s--){var o=s>=0?arguments[s]:t.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(i=o+"/"+i,n="/"===o.charAt(0))}return i=e(r(i.split("/"),function(t){return!!t}),!n).join("/"),(n?"/":"")+i||"."},i.normalize=function(t){var n=i.isAbsolute(t),s="/"===o(t,-1);return t=e(r(t.split("/"),function(t){return!!t}),!n).join("/"),t||n||(t="."),t&&s&&(t+="/"),(n?"/":"")+t},i.isAbsolute=function(t){return"/"===t.charAt(0)},i.join=function(){var t=Array.prototype.slice.call(arguments,0);return i.normalize(r(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},i.relative=function(t,e){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var i=t.length-1;i>=0&&""===t[i];i--);return e>i?[]:t.slice(e,i-e+1)}t=i.resolve(t).substr(1),e=i.resolve(e).substr(1);for(var n=r(t.split("/")),s=r(e.split("/")),o=Math.min(n.length,s.length),a=o,h=0;h<o;h++)if(n[h]!==s[h]){a=h;break}for(var l=[],h=a;h<n.length;h++)l.push("..");return l=l.concat(s.slice(a)),l.join("/")},i.sep="/",i.delimiter=":",i.dirname=function(t){var e=s(t),i=e[0],r=e[1];return i||r?(r&&(r=r.substr(0,r.length-1)),i+r):"."},i.basename=function(t,e){var i=s(t)[2];return e&&i.substr(-1*e.length)===e&&(i=i.substr(0,i.length-e.length)),i},i.extname=function(t){return s(t)[3]};var o="b"==="ab".substr(-1)?function(t,e,i){return t.substr(e,i)}:function(t,e,i){return e<0&&(e=t.length+e),t.substr(e,i)}}).call(this,t("_process"))},{_process:4}],4:[function(t,e,i){function r(){c=!1,a.length?l=a.concat(l):u=-1,l.length&&n()}function n(){if(!c){var t=setTimeout(r);c=!0;for(var e=l.length;e;){for(a=l,l=[];++u<e;)a[u].run();u=-1,e=l.length}a=null,c=!1,clearTimeout(t)}}function s(t,e){this.fun=t,this.array=e}function o(){}var a,h=e.exports={},l=[],c=!1,u=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.push(new s(t,e)),1!==l.length||c||setTimeout(n,0)},s.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=o,h.addListener=o,h.once=o,h.off=o,h.removeListener=o,h.removeAllListeners=o,h.emit=o,h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],5:[function(e,i,r){(function(e){!function(n){function s(t){throw RangeError(D[t])}function o(t,e){for(var i=t.length,r=[];i--;)r[i]=e(t[i]);return r}function a(t,e){var i=t.split("@"),r="";i.length>1&&(r=i[0]+"@",t=i[1]),t=t.replace(I,".");var n=t.split("."),s=o(n,e).join(".");return r+s}function h(t){for(var e,i,r=[],n=0,s=t.length;n<s;)e=t.charCodeAt(n++),e>=55296&&e<=56319&&n<s?(i=t.charCodeAt(n++),56320==(64512&i)?r.push(((1023&e)<<10)+(1023&i)+65536):(r.push(e),n--)):r.push(e);return r}function l(t){return o(t,function(t){var e="";return t>65535&&(t-=65536,e+=F(t>>>10&1023|55296),t=56320|1023&t),e+=F(t)}).join("")}function c(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:T}function u(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function d(t,e,i){var r=0;for(t=i?k(t/E):t>>1,t+=k(t/e);t>B*A>>1;r+=T)t=k(t/B);return k(r+(B+1)*t/(t+C))}function p(t){var e,i,r,n,o,a,h,u,p,f,m=[],g=t.length,v=0,_=P,y=M;for(i=t.lastIndexOf(L),i<0&&(i=0),r=0;r<i;++r)t.charCodeAt(r)>=128&&s("not-basic"),m.push(t.charCodeAt(r));for(n=i>0?i+1:0;n<g;){for(o=v,a=1,h=T;n>=g&&s("invalid-input"),u=c(t.charCodeAt(n++)),(u>=T||u>k((b-v)/a))&&s("overflow"),v+=u*a,p=h<=y?S:h>=y+A?A:h-y,!(u<p);h+=T)f=T-p,a>k(b/f)&&s("overflow"),a*=f;e=m.length+1,y=d(v-o,e,0==o),k(v/e)>b-_&&s("overflow"),_+=k(v/e),v%=e,m.splice(v++,0,_)}return l(m)}function f(t){var e,i,r,n,o,a,l,c,p,f,m,g,v,_,y,x=[];for(t=h(t),g=t.length,e=P,i=0,o=M,a=0;a<g;++a)m=t[a],m<128&&x.push(F(m));for(r=n=x.length,n&&x.push(L);r<g;){for(l=b,a=0;a<g;++a)m=t[a],m>=e&&m<l&&(l=m);for(v=r+1,l-e>k((b-i)/v)&&s("overflow"),i+=(l-e)*v,e=l,a=0;a<g;++a)if(m=t[a],m<e&&++i>b&&s("overflow"),m==e){for(c=i,p=T;f=p<=o?S:p>=o+A?A:p-o,!(c<f);p+=T)y=c-f,_=T-f,x.push(F(u(f+y%_,0))),c=k(y/_);x.push(F(u(c,0))),o=d(i,v,r==n),i=0,++r}++i,++e}return x.join("")}function m(t){return a(t,function(t){return R.test(t)?p(t.slice(4).toLowerCase()):t})}function g(t){return a(t,function(t){return O.test(t)?"xn--"+f(t):t})}var v="object"==typeof r&&r&&!r.nodeType&&r,_="object"==typeof i&&i&&!i.nodeType&&i,y="object"==typeof e&&e;y.global!==y&&y.window!==y&&y.self!==y||(n=y);var x,w,b=2147483647,T=36,S=1,A=26,C=38,E=700,M=72,P=128,L="-",R=/^xn--/,O=/[^\x20-\x7E]/,I=/[\x2E\u3002\uFF0E\uFF61]/g,D={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},B=T-S,k=Math.floor,F=String.fromCharCode;if(x={version:"1.3.2",ucs2:{decode:h,encode:l},decode:p,encode:f,toASCII:g,toUnicode:m},"function"==typeof t&&"object"==typeof t.amd&&t.amd)t("punycode",[],function(){return x});else if(v&&_)if(i.exports==v)_.exports=x;else for(w in x)x.hasOwnProperty(w)&&(v[w]=x[w]);else n.punycode=x}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(t,e,i){function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,i,s){e=e||"&",i=i||"=";var o={};if("string"!=typeof t||0===t.length)return o;var a=/\+/g;t=t.split(e);var h=1e3;s&&"number"==typeof s.maxKeys&&(h=s.maxKeys);var l=t.length;h>0&&l>h&&(l=h);for(var c=0;c<l;++c){var u,d,p,f,m=t[c].replace(a,"%20"),g=m.indexOf(i);g>=0?(u=m.substr(0,g),d=m.substr(g+1)):(u=m,d=""),p=decodeURIComponent(u),f=decodeURIComponent(d),r(o,p)?n(o[p])?o[p].push(f):o[p]=[o[p],f]:o[p]=f}return o};var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],7:[function(t,e,i){function r(t,e){if(t.map)return t.map(e);for(var i=[],r=0;r<t.length;r++)i.push(e(t[r],r));return i}var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,i,a){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?r(o(t),function(o){var a=encodeURIComponent(n(o))+i;return s(t[o])?r(t[o],function(t){return a+encodeURIComponent(n(t))}).join(e):a+encodeURIComponent(n(t[o]))}).join(e):a?encodeURIComponent(n(a))+i+encodeURIComponent(n(t)):""};var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},{}],8:[function(t,e,i){i.decode=i.parse=t("./decode"),i.encode=i.stringify=t("./encode")},{"./decode":6,"./encode":7}],9:[function(t,e,i){function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function n(t,e,i){if(t&&l(t)&&t instanceof r)return t;var n=new r;return n.parse(t,e,i),n}function s(t){return h(t)&&(t=n(t)),t instanceof r?t.format():r.prototype.format.call(t)}function o(t,e){return n(t,!1,!0).resolve(e)}function a(t,e){return t?n(t,!1,!0).resolveObject(e):e}function h(t){return"string"==typeof t}function l(t){return"object"==typeof t&&null!==t}function c(t){return null===t}function u(t){return null==t}var d=t("punycode");i.parse=n,i.resolve=o,i.resolveObject=a,i.format=s,i.Url=r;var p=/^([a-z0-9.+-]+:)/i,f=/:[0-9]*$/,m=["<",">",'"',"`"," ","\r","\n","\t"],g=["{","}","|","\\","^","`"].concat(m),v=["'"].concat(g),_=["%","/","?",";","#"].concat(v),y=["/","?","#"],x=255,w=/^[a-z0-9A-Z_-]{0,63}$/,b=/^([a-z0-9A-Z_-]{0,63})(.*)$/,T={javascript:!0,"javascript:":!0},S={javascript:!0,"javascript:":!0},A={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},C=t("querystring");r.prototype.parse=function(t,e,i){if(!h(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t;r=r.trim();var n=p.exec(r);if(n){n=n[0];var s=n.toLowerCase();this.protocol=s,r=r.substr(n.length)}if(i||n||r.match(/^\/\/[^@\/]+@[^@\/]+/)){var o="//"===r.substr(0,2);!o||n&&S[n]||(r=r.substr(2),this.slashes=!0)}if(!S[n]&&(o||n&&!A[n])){for(var a=-1,l=0;l<y.length;l++){var c=r.indexOf(y[l]);c!==-1&&(a===-1||c<a)&&(a=c)}var u,f;f=a===-1?r.lastIndexOf("@"):r.lastIndexOf("@",a),f!==-1&&(u=r.slice(0,f),r=r.slice(f+1),this.auth=decodeURIComponent(u)),a=-1;for(var l=0;l<_.length;l++){var c=r.indexOf(_[l]);c!==-1&&(a===-1||c<a)&&(a=c)}a===-1&&(a=r.length),this.host=r.slice(0,a),r=r.slice(a),this.parseHost(),this.hostname=this.hostname||"";var m="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!m)for(var g=this.hostname.split(/\./),l=0,E=g.length;l<E;l++){var M=g[l];if(M&&!M.match(w)){for(var P="",L=0,R=M.length;L<R;L++)P+=M.charCodeAt(L)>127?"x":M[L];if(!P.match(w)){var O=g.slice(0,l),I=g.slice(l+1),D=M.match(b);D&&(O.push(D[1]),I.unshift(D[2])),I.length&&(r="/"+I.join(".")+r),this.hostname=O.join(".");break}}}if(this.hostname.length>x?this.hostname="":this.hostname=this.hostname.toLowerCase(),!m){for(var B=this.hostname.split("."),k=[],l=0;l<B.length;++l){var F=B[l];k.push(F.match(/[^A-Za-z0-9_-]/)?"xn--"+d.encode(F):F)}this.hostname=k.join(".")}var j=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+j,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==r[0]&&(r="/"+r))}if(!T[s])for(var l=0,E=v.length;l<E;l++){var U=v[l],H=encodeURIComponent(U);H===U&&(H=escape(U)),r=r.split(U).join(H)}var X=r.indexOf("#");X!==-1&&(this.hash=r.substr(X),r=r.slice(0,X));var G=r.indexOf("?");if(G!==-1?(this.search=r.substr(G),this.query=r.substr(G+1),e&&(this.query=C.parse(this.query)),r=r.slice(0,G)):e&&(this.search="",this.query={}),r&&(this.pathname=r),A[s]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var j=this.pathname||"",F=this.search||"";this.path=j+F}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",r=this.hash||"",n=!1,s="";this.host?n=t+this.host:this.hostname&&(n=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&l(this.query)&&Object.keys(this.query).length&&(s=C.stringify(this.query));var o=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||A[e])&&n!==!1?(n="//"+(n||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):n||(n=""),r&&"#"!==r.charAt(0)&&(r="#"+r),o&&"?"!==o.charAt(0)&&(o="?"+o),i=i.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),o=o.replace("#","%23"),e+n+i+o+r},r.prototype.resolve=function(t){return this.resolveObject(n(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if(h(t)){var e=new r;e.parse(t,!1,!0),t=e}var i=new r;if(Object.keys(this).forEach(function(t){i[t]=this[t]},this),i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(e){"protocol"!==e&&(i[e]=t[e])}),A[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i;if(t.protocol&&t.protocol!==i.protocol){if(!A[t.protocol])return Object.keys(t).forEach(function(e){i[e]=t[e]}),i.href=i.format(),i;if(i.protocol=t.protocol,t.host||S[t.protocol])i.pathname=t.pathname;else{for(var n=(t.pathname||"").split("/");n.length&&!(t.host=n.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==n[0]&&n.unshift(""),n.length<2&&n.unshift(""),i.pathname=n.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var s=i.pathname||"",o=i.search||"";i.path=s+o}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var a=i.pathname&&"/"===i.pathname.charAt(0),l=t.host||t.pathname&&"/"===t.pathname.charAt(0),d=l||a||i.host&&t.pathname,p=d,f=i.pathname&&i.pathname.split("/")||[],n=t.pathname&&t.pathname.split("/")||[],m=i.protocol&&!A[i.protocol];if(m&&(i.hostname="",i.port=null,i.host&&(""===f[0]?f[0]=i.host:f.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===n[0]?n[0]=t.host:n.unshift(t.host)),t.host=null),d=d&&(""===n[0]||""===f[0])),l)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,f=n;else if(n.length)f||(f=[]),f.pop(),f=f.concat(n),i.search=t.search,i.query=t.query;else if(!u(t.search)){if(m){i.hostname=i.host=f.shift();var g=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@");g&&(i.auth=g.shift(),i.host=i.hostname=g.shift())}return i.search=t.search,i.query=t.query,c(i.pathname)&&c(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!f.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var v=f.slice(-1)[0],_=(i.host||t.host)&&("."===v||".."===v)||""===v,y=0,x=f.length;x>=0;x--)v=f[x],"."==v?f.splice(x,1):".."===v?(f.splice(x,1),y++):y&&(f.splice(x,1),y--);if(!d&&!p)for(;y--;y)f.unshift("..");!d||""===f[0]||f[0]&&"/"===f[0].charAt(0)||f.unshift(""),_&&"/"!==f.join("/").substr(-1)&&f.push("");var w=""===f[0]||f[0]&&"/"===f[0].charAt(0);if(m){i.hostname=i.host=w?"":f.length?f.shift():"";var g=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@");g&&(i.auth=g.shift(),i.host=i.hostname=g.shift())}return d=d||i.host&&f.length,d&&!w&&f.unshift(""),f.length?i.pathname=f.join("/"):(i.pathname=null,i.path=null),c(i.pathname)&&c(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},r.prototype.parseHost=function(){var t=this.host,e=f.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{punycode:5,querystring:8}],10:[function(t,e,i){function r(t,e,i){i=i||2;var r=e&&e.length,a=r?e[0]*i:t.length,h=s(t,n(t,0,a,i,!0)),l=[];if(!h)return l;var u,d,p,f,m,g,v;if(r&&(h=c(t,e,h,i)),t.length>80*i){u=p=t[0],d=f=t[1];for(var _=i;_<a;_+=i)m=t[_],g=t[_+1],m<u&&(u=m),g<d&&(d=g),m>p&&(p=m),g>f&&(f=g);v=Math.max(p-u,f-d)}return o(t,h,l,i,u,d,v),l}function n(t,e,i,r,n){var s,o,a,h=0;for(s=e,o=i-r;s<i;s+=r)h+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;if(n===h>0)for(s=e;s<i;s+=r)a=A(s,a);else for(s=i-r;s>=e;s-=r)a=A(s,a);return a}function s(t,e,i){i||(i=e);var r,n=e;do if(r=!1,n.steiner||!y(t,n.i,n.next.i)&&0!==_(t,n.prev.i,n.i,n.next.i))n=n.next;else{if(n.prev.next=n.next,n.next.prev=n.prev,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ),n=i=n.prev,n===n.next)return null;r=!0}while(r||n!==i);return i}function o(t,e,i,r,n,c,u,d){if(e){d||void 0===n||p(t,e,n,c,u);for(var f,m,g=e;e.prev!==e.next;)if(f=e.prev,m=e.next,a(t,e,n,c,u))i.push(f.i/r),i.push(e.i/r),i.push(m.i/r),m.prev=f,f.next=m,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ),e=m.next,g=m.next;else if(e=m,e===g){d?1===d?(e=h(t,e,i,r),o(t,e,i,r,n,c,u,2)):2===d&&l(t,e,i,r,n,c,u):o(t,s(t,e),i,r,n,c,u,1);break}}}function a(t,e,i,r,n){var s=e.prev.i,o=e.i,a=e.next.i,h=t[s],l=t[s+1],c=t[o],u=t[o+1],d=t[a],p=t[a+1],f=h*u-l*c,g=h*p-l*d,v=d*u-p*c,_=f-g-v;if(_<=0)return!1;var y,x,w,b,T,S,A,C=p-l,E=h-d,M=l-u,P=c-h;if(void 0!==i){var L=h<c?h<d?h:d:c<d?c:d,R=l<u?l<p?l:p:u<p?u:p,O=h>c?h>d?h:d:c>d?c:d,I=l>u?l>p?l:p:u>p?u:p,D=m(L,R,i,r,n),B=m(O,I,i,r,n);for(A=e.nextZ;A&&A.z<=B;)if(y=A.i,A=A.nextZ,y!==s&&y!==a&&(x=t[y],w=t[y+1],b=C*x+E*w-g,b>=0&&(T=M*x+P*w+f,T>=0&&(S=_-b-T,S>=0&&(b&&T||b&&S||T&&S)))))return!1;for(A=e.prevZ;A&&A.z>=D;)if(y=A.i,A=A.prevZ,y!==s&&y!==a&&(x=t[y],w=t[y+1],b=C*x+E*w-g,b>=0&&(T=M*x+P*w+f,T>=0&&(S=_-b-T,S>=0&&(b&&T||b&&S||T&&S)))))return!1}else for(A=e.next.next;A!==e.prev;)if(y=A.i,A=A.next,x=t[y],w=t[y+1],b=C*x+E*w-g,b>=0&&(T=M*x+P*w+f,T>=0&&(S=_-b-T,S>=0&&(b&&T||b&&S||T&&S))))return!1;return!0}function h(t,e,i,r){var n=e;do{var s=n.prev,o=n.next.next;if(s.i!==o.i&&x(t,s.i,n.i,n.next.i,o.i)&&b(t,s,o)&&b(t,o,s)){i.push(s.i/r),i.push(n.i/r),i.push(o.i/r),s.next=o,o.prev=s;var a=n.prevZ,h=n.nextZ&&n.nextZ.nextZ;a&&(a.nextZ=h),h&&(h.prevZ=a),n=e=o}n=n.next}while(n!==e);return n}function l(t,e,i,r,n,a,h){var l=e;do{for(var c=l.next.next;c!==l.prev;){if(l.i!==c.i&&v(t,l,c)){var u=S(l,c);return l=s(t,l,l.next),u=s(t,u,u.next),o(t,l,i,r,n,a,h),void o(t,u,i,r,n,a,h)}c=c.next}l=l.next}while(l!==e)}function c(t,e,i,r){var o,a,h,l,c,d=[];for(o=0,a=e.length;o<a;o++)h=e[o]*r,l=o<a-1?e[o+1]*r:t.length,c=n(t,h,l,r,!1),c===c.next&&(c.steiner=!0),c=s(t,c),c&&d.push(g(t,c));for(d.sort(function(e,i){return t[e.i]-t[i.i]}),o=0;o<d.length;o++)u(t,d[o],i),i=s(t,i,i.next);return i}function u(t,e,i){if(i=d(t,e,i)){var r=S(i,e);s(t,r,r.next)}}function d(t,e,i){var r,n,s,o=i,a=e.i,h=t[a],l=t[a+1],c=-(1/0);do{if(n=o.i,s=o.next.i,l<=t[n+1]&&l>=t[s+1]){var u=t[n]+(l-t[n+1])*(t[s]-t[n])/(t[s+1]-t[n+1]);u<=h&&u>c&&(c=u,r=t[n]<t[s]?o:o.next)}o=o.next}while(o!==i);if(!r)return null;var d,p,f,m,g,v,_=t[r.i],y=t[r.i+1],x=h*y-l*_,w=h*l-l*c,T=l-l,S=h-c,A=l-y,C=_-h,E=x-w-(c*y-l*_),M=E<=0?-1:1,P=r,L=1/0;for(o=r.next;o!==P;)d=t[o.i],p=t[o.i+1],f=h-d,f>=0&&d>=_&&(m=(T*d+S*p-w)*M,m>=0&&(g=(A*d+C*p+x)*M,g>=0&&E*M-m-g>=0&&(v=Math.abs(l-p)/f,v<L&&b(t,o,e)&&(r=o,L=v)))),o=o.next;return r}function p(t,e,i,r,n){var s=e;do null===s.z&&(s.z=m(t[s.i],t[s.i+1],i,r,n)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==e);s.prevZ.nextZ=null,s.prevZ=null,f(s)}function f(t){var e,i,r,n,s,o,a,h,l=1;do{for(i=t,t=null,s=null,o=0;i;){for(o++,r=i,a=0,e=0;e<l&&(a++,r=r.nextZ,r);e++);for(h=l;a>0||h>0&&r;)0===a?(n=r,r=r.nextZ,h--):0!==h&&r?i.z<=r.z?(n=i,i=i.nextZ,a--):(n=r,r=r.nextZ,h--):(n=i,i=i.nextZ,a--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;i=r}s.nextZ=null,l*=2}while(o>1);return t}function m(t,e,i,r,n){return t=1e3*(t-i)/n,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=1e3*(e-r)/n,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function g(t,e){var i=e,r=e;do t[i.i]<t[r.i]&&(r=i),i=i.next;while(i!==e);return r}function v(t,e,i){return!w(t,e,e.i,i.i)&&b(t,e,i)&&b(t,i,e)&&T(t,e,e.i,i.i)}function _(t,e,i,r){var n=(t[i+1]-t[e+1])*(t[r]-t[i])-(t[i]-t[e])*(t[r+1]-t[i+1]);return n>0?1:n<0?-1:0}function y(t,e,i){return t[e]===t[i]&&t[e+1]===t[i+1]}function x(t,e,i,r,n){return _(t,e,i,r)!==_(t,e,i,n)&&_(t,r,n,e)!==_(t,r,n,i)}function w(t,e,i,r){var n=e;do{var s=n.i,o=n.next.i;if(s!==i&&o!==i&&s!==r&&o!==r&&x(t,s,o,i,r))return!0;n=n.next}while(n!==e);return!1}function b(t,e,i){return _(t,e.prev.i,e.i,e.next.i)===-1?_(t,e.i,i.i,e.next.i)!==-1&&_(t,e.i,e.prev.i,i.i)!==-1:_(t,e.i,i.i,e.prev.i)===-1||_(t,e.i,e.next.i,i.i)===-1}function T(t,e,i,r){var n=e,s=!1,o=(t[i]+t[r])/2,a=(t[i+1]+t[r+1])/2;do{var h=n.i,l=n.next.i;t[h+1]>a!=t[l+1]>a&&o<(t[l]-t[h])*(a-t[h+1])/(t[l+1]-t[h+1])+t[h]&&(s=!s),n=n.next}while(n!==e);return s}function S(t,e){var i=new C(t.i),r=new C(e.i),n=t.next,s=e.prev;return t.next=e,e.prev=t,i.next=n,n.prev=i,r.next=i,i.prev=r,s.next=r,r.prev=s,r}function A(t,e){var i=new C(t);return e?(i.next=e.next,i.prev=e,e.next.prev=i,e.next=i):(i.prev=i,i.next=i),i}function C(t){this.i=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}e.exports=r},{}],11:[function(t,e,i){function r(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function n(){}var s="function"!=typeof Object.create&&"~";n.prototype._events=void 0,n.prototype.listeners=function(t,e){var i=s?s+t:t,r=this._events&&this._events[i];if(e)return!!r;if(!r)return[];if(this._events[i].fn)return[this._events[i].fn];for(var n=0,o=this._events[i].length,a=new Array(o);n<o;n++)a[n]=this._events[i][n].fn;return a},n.prototype.emit=function(t,e,i,r,n,o){var a=s?s+t:t;if(!this._events||!this._events[a])return!1;var h,l,c=this._events[a],u=arguments.length;if("function"==typeof c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,i),!0;case 4:return c.fn.call(c.context,e,i,r),!0;case 5:return c.fn.call(c.context,e,i,r,n),!0;case 6:return c.fn.call(c.context,e,i,r,n,o),!0}for(l=1,h=new Array(u-1);l<u;l++)h[l-1]=arguments[l];c.fn.apply(c.context,h)}else{var d,p=c.length;for(l=0;l<p;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),u){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,i);break;default:if(!h)for(d=1,h=new Array(u-1);d<u;d++)h[d-1]=arguments[d];c[l].fn.apply(c[l].context,h)}}return!0},n.prototype.on=function(t,e,i){var n=new r(e,i||this),o=s?s+t:t;return this._events||(this._events=s?{}:Object.create(null)),this._events[o]?this._events[o]instanceof Array?this._events[o].push(n):this._events[o]=[this._events[o],n]:this._events[o]=n,this},n.prototype.once=function(t,e,i){var n=new r(e,i||this,(!0)),o=s?s+t:t;return this._events||(this._events=s?{}:Object.create(null)),this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],n]:this._events[o].push(n):this._events[o]=n,this},n.prototype.removeListener=function(t,e,i,r){var n=s?s+t:t;if(!this._events||!this._events[n])return this;var o=this._events[n],a=[];if(e)if(o.fn)(o.fn!==e||r&&!o.once||i&&o.context!==i)&&a.push(o);else for(var h=0,l=o.length;h<l;h++)(o[h].fn!==e||r&&!o[h].once||i&&o[h].context!==i)&&a.push(o[h]);return a.length?this._events[n]=1===a.length?a[0]:a:delete this._events[n],this},n.prototype.removeAllListeners=function(t){return this._events?(t?delete this._events[s?s+t:t]:this._events=s?{}:Object.create(null),this):this},n.prototype.off=n.prototype.removeListener,n.prototype.addListener=n.prototype.on,n.prototype.setMaxListeners=function(){return this},n.prefixed=s,e.exports=n},{}],12:[function(e,i,r){!function(e){var i={};"undefined"==typeof r?"function"==typeof t&&"object"==typeof t.amd&&t.amd?i.exports={}:i.exports="undefined"!=typeof window?window:e:i.exports=r,function(t){if(!e)var e=1e-6;if(!i)var i="undefined"!=typeof Float32Array?Float32Array:Array;if(!r)var r=Math.random;var n={};n.setMatrixArrayType=function(t){i=t},"undefined"!=typeof t&&(t.glMatrix=n);var s=Math.PI/180;n.toRadian=function(t){return t*s};var o={};o.create=function(){var t=new i(2);return t[0]=0,t[1]=0,t},o.clone=function(t){var e=new i(2);return e[0]=t[0],e[1]=t[1],e},o.fromValues=function(t,e){var r=new i(2);return r[0]=t,r[1]=e,r},o.copy=function(t,e){
return t[0]=e[0],t[1]=e[1],t},o.set=function(t,e,i){return t[0]=e,t[1]=i,t},o.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t},o.subtract=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t},o.sub=o.subtract,o.multiply=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t},o.mul=o.multiply,o.divide=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t},o.div=o.divide,o.min=function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t},o.max=function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t},o.scale=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t},o.scaleAndAdd=function(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t},o.distance=function(t,e){var i=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(i*i+r*r)},o.dist=o.distance,o.squaredDistance=function(t,e){var i=e[0]-t[0],r=e[1]-t[1];return i*i+r*r},o.sqrDist=o.squaredDistance,o.length=function(t){var e=t[0],i=t[1];return Math.sqrt(e*e+i*i)},o.len=o.length,o.squaredLength=function(t){var e=t[0],i=t[1];return e*e+i*i},o.sqrLen=o.squaredLength,o.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},o.normalize=function(t,e){var i=e[0],r=e[1],n=i*i+r*r;return n>0&&(n=1/Math.sqrt(n),t[0]=e[0]*n,t[1]=e[1]*n),t},o.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},o.cross=function(t,e,i){var r=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=r,t},o.lerp=function(t,e,i,r){var n=e[0],s=e[1];return t[0]=n+r*(i[0]-n),t[1]=s+r*(i[1]-s),t},o.random=function(t,e){e=e||1;var i=2*r()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t},o.transformMat2=function(t,e,i){var r=e[0],n=e[1];return t[0]=i[0]*r+i[2]*n,t[1]=i[1]*r+i[3]*n,t},o.transformMat2d=function(t,e,i){var r=e[0],n=e[1];return t[0]=i[0]*r+i[2]*n+i[4],t[1]=i[1]*r+i[3]*n+i[5],t},o.transformMat3=function(t,e,i){var r=e[0],n=e[1];return t[0]=i[0]*r+i[3]*n+i[6],t[1]=i[1]*r+i[4]*n+i[7],t},o.transformMat4=function(t,e,i){var r=e[0],n=e[1];return t[0]=i[0]*r+i[4]*n+i[12],t[1]=i[1]*r+i[5]*n+i[13],t},o.forEach=function(){var t=o.create();return function(e,i,r,n,s,o){var a,h;for(i||(i=2),r||(r=0),h=n?Math.min(n*i+r,e.length):e.length,a=r;a<h;a+=i)t[0]=e[a],t[1]=e[a+1],s(t,t,o),e[a]=t[0],e[a+1]=t[1];return e}}(),o.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},"undefined"!=typeof t&&(t.vec2=o);var a={};a.create=function(){var t=new i(3);return t[0]=0,t[1]=0,t[2]=0,t},a.clone=function(t){var e=new i(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},a.fromValues=function(t,e,r){var n=new i(3);return n[0]=t,n[1]=e,n[2]=r,n},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},a.set=function(t,e,i,r){return t[0]=e,t[1]=i,t[2]=r,t},a.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t},a.subtract=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t},a.sub=a.subtract,a.multiply=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t},a.mul=a.multiply,a.divide=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t},a.div=a.divide,a.min=function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t},a.max=function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t},a.scale=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t},a.scaleAndAdd=function(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t},a.distance=function(t,e){var i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2];return Math.sqrt(i*i+r*r+n*n)},a.dist=a.distance,a.squaredDistance=function(t,e){var i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2];return i*i+r*r+n*n},a.sqrDist=a.squaredDistance,a.length=function(t){var e=t[0],i=t[1],r=t[2];return Math.sqrt(e*e+i*i+r*r)},a.len=a.length,a.squaredLength=function(t){var e=t[0],i=t[1],r=t[2];return e*e+i*i+r*r},a.sqrLen=a.squaredLength,a.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},a.normalize=function(t,e){var i=e[0],r=e[1],n=e[2],s=i*i+r*r+n*n;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s),t},a.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},a.cross=function(t,e,i){var r=e[0],n=e[1],s=e[2],o=i[0],a=i[1],h=i[2];return t[0]=n*h-s*a,t[1]=s*o-r*h,t[2]=r*a-n*o,t},a.lerp=function(t,e,i,r){var n=e[0],s=e[1],o=e[2];return t[0]=n+r*(i[0]-n),t[1]=s+r*(i[1]-s),t[2]=o+r*(i[2]-o),t},a.random=function(t,e){e=e||1;var i=2*r()*Math.PI,n=2*r()-1,s=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(i)*s,t[1]=Math.sin(i)*s,t[2]=n*e,t},a.transformMat4=function(t,e,i){var r=e[0],n=e[1],s=e[2];return t[0]=i[0]*r+i[4]*n+i[8]*s+i[12],t[1]=i[1]*r+i[5]*n+i[9]*s+i[13],t[2]=i[2]*r+i[6]*n+i[10]*s+i[14],t},a.transformMat3=function(t,e,i){var r=e[0],n=e[1],s=e[2];return t[0]=r*i[0]+n*i[3]+s*i[6],t[1]=r*i[1]+n*i[4]+s*i[7],t[2]=r*i[2]+n*i[5]+s*i[8],t},a.transformQuat=function(t,e,i){var r=e[0],n=e[1],s=e[2],o=i[0],a=i[1],h=i[2],l=i[3],c=l*r+a*s-h*n,u=l*n+h*r-o*s,d=l*s+o*n-a*r,p=-o*r-a*n-h*s;return t[0]=c*l+p*-o+u*-h-d*-a,t[1]=u*l+p*-a+d*-o-c*-h,t[2]=d*l+p*-h+c*-a-u*-o,t},a.rotateX=function(t,e,i,r){var n=[],s=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],s[0]=n[0],s[1]=n[1]*Math.cos(r)-n[2]*Math.sin(r),s[2]=n[1]*Math.sin(r)+n[2]*Math.cos(r),t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t},a.rotateY=function(t,e,i,r){var n=[],s=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],s[0]=n[2]*Math.sin(r)+n[0]*Math.cos(r),s[1]=n[1],s[2]=n[2]*Math.cos(r)-n[0]*Math.sin(r),t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t},a.rotateZ=function(t,e,i,r){var n=[],s=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],s[0]=n[0]*Math.cos(r)-n[1]*Math.sin(r),s[1]=n[0]*Math.sin(r)+n[1]*Math.cos(r),s[2]=n[2],t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t},a.forEach=function(){var t=a.create();return function(e,i,r,n,s,o){var a,h;for(i||(i=3),r||(r=0),h=n?Math.min(n*i+r,e.length):e.length,a=r;a<h;a+=i)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}}(),a.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},"undefined"!=typeof t&&(t.vec3=a);var h={};h.create=function(){var t=new i(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},h.clone=function(t){var e=new i(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},h.fromValues=function(t,e,r,n){var s=new i(4);return s[0]=t,s[1]=e,s[2]=r,s[3]=n,s},h.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},h.set=function(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t},h.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t},h.subtract=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t},h.sub=h.subtract,h.multiply=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t},h.mul=h.multiply,h.divide=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t},h.div=h.divide,h.min=function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t},h.max=function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t},h.scale=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t},h.scaleAndAdd=function(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t},h.distance=function(t,e){var i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2],s=e[3]-t[3];return Math.sqrt(i*i+r*r+n*n+s*s)},h.dist=h.distance,h.squaredDistance=function(t,e){var i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2],s=e[3]-t[3];return i*i+r*r+n*n+s*s},h.sqrDist=h.squaredDistance,h.length=function(t){var e=t[0],i=t[1],r=t[2],n=t[3];return Math.sqrt(e*e+i*i+r*r+n*n)},h.len=h.length,h.squaredLength=function(t){var e=t[0],i=t[1],r=t[2],n=t[3];return e*e+i*i+r*r+n*n},h.sqrLen=h.squaredLength,h.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},h.normalize=function(t,e){var i=e[0],r=e[1],n=e[2],s=e[3],o=i*i+r*r+n*n+s*s;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t[3]=e[3]*o),t},h.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},h.lerp=function(t,e,i,r){var n=e[0],s=e[1],o=e[2],a=e[3];return t[0]=n+r*(i[0]-n),t[1]=s+r*(i[1]-s),t[2]=o+r*(i[2]-o),t[3]=a+r*(i[3]-a),t},h.random=function(t,e){return e=e||1,t[0]=r(),t[1]=r(),t[2]=r(),t[3]=r(),h.normalize(t,t),h.scale(t,t,e),t},h.transformMat4=function(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3];return t[0]=i[0]*r+i[4]*n+i[8]*s+i[12]*o,t[1]=i[1]*r+i[5]*n+i[9]*s+i[13]*o,t[2]=i[2]*r+i[6]*n+i[10]*s+i[14]*o,t[3]=i[3]*r+i[7]*n+i[11]*s+i[15]*o,t},h.transformQuat=function(t,e,i){var r=e[0],n=e[1],s=e[2],o=i[0],a=i[1],h=i[2],l=i[3],c=l*r+a*s-h*n,u=l*n+h*r-o*s,d=l*s+o*n-a*r,p=-o*r-a*n-h*s;return t[0]=c*l+p*-o+u*-h-d*-a,t[1]=u*l+p*-a+d*-o-c*-h,t[2]=d*l+p*-h+c*-a-u*-o,t},h.forEach=function(){var t=h.create();return function(e,i,r,n,s,o){var a,h;for(i||(i=4),r||(r=0),h=n?Math.min(n*i+r,e.length):e.length,a=r;a<h;a+=i)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}}(),h.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},"undefined"!=typeof t&&(t.vec4=h);var l={};l.create=function(){var t=new i(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},l.clone=function(t){var e=new i(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},l.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},l.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},l.transpose=function(t,e){if(t===e){var i=e[1];t[1]=e[2],t[2]=i}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},l.invert=function(t,e){var i=e[0],r=e[1],n=e[2],s=e[3],o=i*s-n*r;return o?(o=1/o,t[0]=s*o,t[1]=-r*o,t[2]=-n*o,t[3]=i*o,t):null},l.adjoint=function(t,e){var i=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=i,t},l.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},l.multiply=function(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3],a=i[0],h=i[1],l=i[2],c=i[3];return t[0]=r*a+s*h,t[1]=n*a+o*h,t[2]=r*l+s*c,t[3]=n*l+o*c,t},l.mul=l.multiply,l.rotate=function(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3],a=Math.sin(i),h=Math.cos(i);return t[0]=r*h+s*a,t[1]=n*h+o*a,t[2]=r*-a+s*h,t[3]=n*-a+o*h,t},l.scale=function(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3],a=i[0],h=i[1];return t[0]=r*a,t[1]=n*a,t[2]=s*h,t[3]=o*h,t},l.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},l.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},l.LDU=function(t,e,i,r){return t[2]=r[2]/r[0],i[0]=r[0],i[1]=r[1],i[3]=r[3]-t[2]*i[1],[t,e,i]},"undefined"!=typeof t&&(t.mat2=l);var c={};c.create=function(){var t=new i(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},c.clone=function(t){var e=new i(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},c.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},c.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},c.invert=function(t,e){var i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],h=i*s-r*n;return h?(h=1/h,t[0]=s*h,t[1]=-r*h,t[2]=-n*h,t[3]=i*h,t[4]=(n*a-s*o)*h,t[5]=(r*o-i*a)*h,t):null},c.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},c.multiply=function(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],h=e[5],l=i[0],c=i[1],u=i[2],d=i[3],p=i[4],f=i[5];return t[0]=r*l+s*c,t[1]=n*l+o*c,t[2]=r*u+s*d,t[3]=n*u+o*d,t[4]=r*p+s*f+a,t[5]=n*p+o*f+h,t},c.mul=c.multiply,c.rotate=function(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],h=e[5],l=Math.sin(i),c=Math.cos(i);return t[0]=r*c+s*l,t[1]=n*c+o*l,t[2]=r*-l+s*c,t[3]=n*-l+o*c,t[4]=a,t[5]=h,t},c.scale=function(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],h=e[5],l=i[0],c=i[1];return t[0]=r*l,t[1]=n*l,t[2]=s*c,t[3]=o*c,t[4]=a,t[5]=h,t},c.translate=function(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],h=e[5],l=i[0],c=i[1];return t[0]=r,t[1]=n,t[2]=s,t[3]=o,t[4]=r*l+s*c+a,t[5]=n*l+o*c+h,t},c.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},c.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},"undefined"!=typeof t&&(t.mat2d=c);var u={};u.create=function(){var t=new i(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},u.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},u.clone=function(t){var e=new i(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},u.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},u.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},u.transpose=function(t,e){if(t===e){var i=e[1],r=e[2],n=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=r,t[7]=n}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},u.invert=function(t,e){var i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],h=e[6],l=e[7],c=e[8],u=c*o-a*l,d=-c*s+a*h,p=l*s-o*h,f=i*u+r*d+n*p;return f?(f=1/f,t[0]=u*f,t[1]=(-c*r+n*l)*f,t[2]=(a*r-n*o)*f,t[3]=d*f,t[4]=(c*i-n*h)*f,t[5]=(-a*i+n*s)*f,t[6]=p*f,t[7]=(-l*i+r*h)*f,t[8]=(o*i-r*s)*f,t):null},u.adjoint=function(t,e){var i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],h=e[6],l=e[7],c=e[8];return t[0]=o*c-a*l,t[1]=n*l-r*c,t[2]=r*a-n*o,t[3]=a*h-s*c,t[4]=i*c-n*h,t[5]=n*s-i*a,t[6]=s*l-o*h,t[7]=r*h-i*l,t[8]=i*o-r*s,t},u.determinant=function(t){var e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],a=t[6],h=t[7],l=t[8];return e*(l*s-o*h)+i*(-l*n+o*a)+r*(h*n-s*a)},u.multiply=function(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],h=e[5],l=e[6],c=e[7],u=e[8],d=i[0],p=i[1],f=i[2],m=i[3],g=i[4],v=i[5],_=i[6],y=i[7],x=i[8];return t[0]=d*r+p*o+f*l,t[1]=d*n+p*a+f*c,t[2]=d*s+p*h+f*u,t[3]=m*r+g*o+v*l,t[4]=m*n+g*a+v*c,t[5]=m*s+g*h+v*u,t[6]=_*r+y*o+x*l,t[7]=_*n+y*a+x*c,t[8]=_*s+y*h+x*u,t},u.mul=u.multiply,u.translate=function(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],h=e[5],l=e[6],c=e[7],u=e[8],d=i[0],p=i[1];return t[0]=r,t[1]=n,t[2]=s,t[3]=o,t[4]=a,t[5]=h,t[6]=d*r+p*o+l,t[7]=d*n+p*a+c,t[8]=d*s+p*h+u,t},u.rotate=function(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],h=e[5],l=e[6],c=e[7],u=e[8],d=Math.sin(i),p=Math.cos(i);return t[0]=p*r+d*o,t[1]=p*n+d*a,t[2]=p*s+d*h,t[3]=p*o-d*r,t[4]=p*a-d*n,t[5]=p*h-d*s,t[6]=l,t[7]=c,t[8]=u,t},u.scale=function(t,e,i){var r=i[0],n=i[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},u.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},u.fromQuat=function(t,e){var i=e[0],r=e[1],n=e[2],s=e[3],o=i+i,a=r+r,h=n+n,l=i*o,c=r*o,u=r*a,d=n*o,p=n*a,f=n*h,m=s*o,g=s*a,v=s*h;return t[0]=1-u-f,t[3]=c-v,t[6]=d+g,t[1]=c+v,t[4]=1-l-f,t[7]=p-m,t[2]=d-g,t[5]=p+m,t[8]=1-l-u,t},u.normalFromMat4=function(t,e){var i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],h=e[6],l=e[7],c=e[8],u=e[9],d=e[10],p=e[11],f=e[12],m=e[13],g=e[14],v=e[15],_=i*a-r*o,y=i*h-n*o,x=i*l-s*o,w=r*h-n*a,b=r*l-s*a,T=n*l-s*h,S=c*m-u*f,A=c*g-d*f,C=c*v-p*f,E=u*g-d*m,M=u*v-p*m,P=d*v-p*g,L=_*P-y*M+x*E+w*C-b*A+T*S;return L?(L=1/L,t[0]=(a*P-h*M+l*E)*L,t[1]=(h*C-o*P-l*A)*L,t[2]=(o*M-a*C+l*S)*L,t[3]=(n*M-r*P-s*E)*L,t[4]=(i*P-n*C+s*A)*L,t[5]=(r*C-i*M-s*S)*L,t[6]=(m*T-g*b+v*w)*L,t[7]=(g*x-f*T-v*y)*L,t[8]=(f*b-m*x+v*_)*L,t):null},u.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},u.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},"undefined"!=typeof t&&(t.mat3=u);var d={};d.create=function(){var t=new i(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},d.clone=function(t){var e=new i(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},d.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},d.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},d.transpose=function(t,e){if(t===e){var i=e[1],r=e[2],n=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=n,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},d.invert=function(t,e){var i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],h=e[6],l=e[7],c=e[8],u=e[9],d=e[10],p=e[11],f=e[12],m=e[13],g=e[14],v=e[15],_=i*a-r*o,y=i*h-n*o,x=i*l-s*o,w=r*h-n*a,b=r*l-s*a,T=n*l-s*h,S=c*m-u*f,A=c*g-d*f,C=c*v-p*f,E=u*g-d*m,M=u*v-p*m,P=d*v-p*g,L=_*P-y*M+x*E+w*C-b*A+T*S;return L?(L=1/L,t[0]=(a*P-h*M+l*E)*L,t[1]=(n*M-r*P-s*E)*L,t[2]=(m*T-g*b+v*w)*L,t[3]=(d*b-u*T-p*w)*L,t[4]=(h*C-o*P-l*A)*L,t[5]=(i*P-n*C+s*A)*L,t[6]=(g*x-f*T-v*y)*L,t[7]=(c*T-d*x+p*y)*L,t[8]=(o*M-a*C+l*S)*L,t[9]=(r*C-i*M-s*S)*L,t[10]=(f*b-m*x+v*_)*L,t[11]=(u*x-c*b-p*_)*L,t[12]=(a*A-o*E-h*S)*L,t[13]=(i*E-r*A+n*S)*L,t[14]=(m*y-f*w-g*_)*L,t[15]=(c*w-u*y+d*_)*L,t):null},d.adjoint=function(t,e){var i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],h=e[6],l=e[7],c=e[8],u=e[9],d=e[10],p=e[11],f=e[12],m=e[13],g=e[14],v=e[15];return t[0]=a*(d*v-p*g)-u*(h*v-l*g)+m*(h*p-l*d),t[1]=-(r*(d*v-p*g)-u*(n*v-s*g)+m*(n*p-s*d)),t[2]=r*(h*v-l*g)-a*(n*v-s*g)+m*(n*l-s*h),t[3]=-(r*(h*p-l*d)-a*(n*p-s*d)+u*(n*l-s*h)),t[4]=-(o*(d*v-p*g)-c*(h*v-l*g)+f*(h*p-l*d)),t[5]=i*(d*v-p*g)-c*(n*v-s*g)+f*(n*p-s*d),t[6]=-(i*(h*v-l*g)-o*(n*v-s*g)+f*(n*l-s*h)),t[7]=i*(h*p-l*d)-o*(n*p-s*d)+c*(n*l-s*h),t[8]=o*(u*v-p*m)-c*(a*v-l*m)+f*(a*p-l*u),t[9]=-(i*(u*v-p*m)-c*(r*v-s*m)+f*(r*p-s*u)),t[10]=i*(a*v-l*m)-o*(r*v-s*m)+f*(r*l-s*a),t[11]=-(i*(a*p-l*u)-o*(r*p-s*u)+c*(r*l-s*a)),t[12]=-(o*(u*g-d*m)-c*(a*g-h*m)+f*(a*d-h*u)),t[13]=i*(u*g-d*m)-c*(r*g-n*m)+f*(r*d-n*u),t[14]=-(i*(a*g-h*m)-o*(r*g-n*m)+f*(r*h-n*a)),t[15]=i*(a*d-h*u)-o*(r*d-n*u)+c*(r*h-n*a),t},d.determinant=function(t){var e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],a=t[6],h=t[7],l=t[8],c=t[9],u=t[10],d=t[11],p=t[12],f=t[13],m=t[14],g=t[15],v=e*o-i*s,_=e*a-r*s,y=e*h-n*s,x=i*a-r*o,w=i*h-n*o,b=r*h-n*a,T=l*f-c*p,S=l*m-u*p,A=l*g-d*p,C=c*m-u*f,E=c*g-d*f,M=u*g-d*m;return v*M-_*E+y*C+x*A-w*S+b*T},d.multiply=function(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],h=e[5],l=e[6],c=e[7],u=e[8],d=e[9],p=e[10],f=e[11],m=e[12],g=e[13],v=e[14],_=e[15],y=i[0],x=i[1],w=i[2],b=i[3];return t[0]=y*r+x*a+w*u+b*m,t[1]=y*n+x*h+w*d+b*g,t[2]=y*s+x*l+w*p+b*v,t[3]=y*o+x*c+w*f+b*_,y=i[4],x=i[5],w=i[6],b=i[7],t[4]=y*r+x*a+w*u+b*m,t[5]=y*n+x*h+w*d+b*g,t[6]=y*s+x*l+w*p+b*v,t[7]=y*o+x*c+w*f+b*_,y=i[8],x=i[9],w=i[10],b=i[11],t[8]=y*r+x*a+w*u+b*m,t[9]=y*n+x*h+w*d+b*g,t[10]=y*s+x*l+w*p+b*v,t[11]=y*o+x*c+w*f+b*_,y=i[12],x=i[13],w=i[14],b=i[15],t[12]=y*r+x*a+w*u+b*m,t[13]=y*n+x*h+w*d+b*g,t[14]=y*s+x*l+w*p+b*v,t[15]=y*o+x*c+w*f+b*_,t},d.mul=d.multiply,d.translate=function(t,e,i){var r,n,s,o,a,h,l,c,u,d,p,f,m=i[0],g=i[1],v=i[2];return e===t?(t[12]=e[0]*m+e[4]*g+e[8]*v+e[12],t[13]=e[1]*m+e[5]*g+e[9]*v+e[13],t[14]=e[2]*m+e[6]*g+e[10]*v+e[14],t[15]=e[3]*m+e[7]*g+e[11]*v+e[15]):(r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],h=e[5],l=e[6],c=e[7],u=e[8],d=e[9],p=e[10],f=e[11],t[0]=r,t[1]=n,t[2]=s,t[3]=o,t[4]=a,t[5]=h,t[6]=l,t[7]=c,t[8]=u,t[9]=d,t[10]=p,t[11]=f,t[12]=r*m+a*g+u*v+e[12],t[13]=n*m+h*g+d*v+e[13],t[14]=s*m+l*g+p*v+e[14],t[15]=o*m+c*g+f*v+e[15]),t},d.scale=function(t,e,i){var r=i[0],n=i[1],s=i[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},d.rotate=function(t,i,r,n){var s,o,a,h,l,c,u,d,p,f,m,g,v,_,y,x,w,b,T,S,A,C,E,M,P=n[0],L=n[1],R=n[2],O=Math.sqrt(P*P+L*L+R*R);return Math.abs(O)<e?null:(O=1/O,P*=O,L*=O,R*=O,s=Math.sin(r),o=Math.cos(r),a=1-o,h=i[0],l=i[1],c=i[2],u=i[3],d=i[4],p=i[5],f=i[6],m=i[7],g=i[8],v=i[9],_=i[10],y=i[11],x=P*P*a+o,w=L*P*a+R*s,b=R*P*a-L*s,T=P*L*a-R*s,S=L*L*a+o,A=R*L*a+P*s,C=P*R*a+L*s,E=L*R*a-P*s,M=R*R*a+o,t[0]=h*x+d*w+g*b,t[1]=l*x+p*w+v*b,t[2]=c*x+f*w+_*b,t[3]=u*x+m*w+y*b,t[4]=h*T+d*S+g*A,t[5]=l*T+p*S+v*A,t[6]=c*T+f*S+_*A,t[7]=u*T+m*S+y*A,t[8]=h*C+d*E+g*M,t[9]=l*C+p*E+v*M,t[10]=c*C+f*E+_*M,t[11]=u*C+m*E+y*M,i!==t&&(t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]),t)},d.rotateX=function(t,e,i){var r=Math.sin(i),n=Math.cos(i),s=e[4],o=e[5],a=e[6],h=e[7],l=e[8],c=e[9],u=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*n+l*r,t[5]=o*n+c*r,t[6]=a*n+u*r,t[7]=h*n+d*r,t[8]=l*n-s*r,t[9]=c*n-o*r,t[10]=u*n-a*r,t[11]=d*n-h*r,t},d.rotateY=function(t,e,i){var r=Math.sin(i),n=Math.cos(i),s=e[0],o=e[1],a=e[2],h=e[3],l=e[8],c=e[9],u=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*n-l*r,t[1]=o*n-c*r,t[2]=a*n-u*r,t[3]=h*n-d*r,t[8]=s*r+l*n,t[9]=o*r+c*n,t[10]=a*r+u*n,t[11]=h*r+d*n,t},d.rotateZ=function(t,e,i){var r=Math.sin(i),n=Math.cos(i),s=e[0],o=e[1],a=e[2],h=e[3],l=e[4],c=e[5],u=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*n+l*r,t[1]=o*n+c*r,t[2]=a*n+u*r,t[3]=h*n+d*r,t[4]=l*n-s*r,t[5]=c*n-o*r,t[6]=u*n-a*r,t[7]=d*n-h*r,t},d.fromRotationTranslation=function(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3],a=r+r,h=n+n,l=s+s,c=r*a,u=r*h,d=r*l,p=n*h,f=n*l,m=s*l,g=o*a,v=o*h,_=o*l;return t[0]=1-(p+m),t[1]=u+_,t[2]=d-v,t[3]=0,t[4]=u-_,t[5]=1-(c+m),t[6]=f+g,t[7]=0,t[8]=d+v,t[9]=f-g,t[10]=1-(c+p),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},d.fromQuat=function(t,e){var i=e[0],r=e[1],n=e[2],s=e[3],o=i+i,a=r+r,h=n+n,l=i*o,c=r*o,u=r*a,d=n*o,p=n*a,f=n*h,m=s*o,g=s*a,v=s*h;return t[0]=1-u-f,t[1]=c+v,t[2]=d-g,t[3]=0,t[4]=c-v,t[5]=1-l-f,t[6]=p+m,t[7]=0,t[8]=d+g,t[9]=p-m,t[10]=1-l-u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},d.frustum=function(t,e,i,r,n,s,o){var a=1/(i-e),h=1/(n-r),l=1/(s-o);return t[0]=2*s*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*s*h,t[6]=0,t[7]=0,t[8]=(i+e)*a,t[9]=(n+r)*h,t[10]=(o+s)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*l,t[15]=0,t},d.perspective=function(t,e,i,r,n){var s=1/Math.tan(e/2),o=1/(r-n);return t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(n+r)*o,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*n*r*o,t[15]=0,t},d.ortho=function(t,e,i,r,n,s,o){var a=1/(e-i),h=1/(r-n),l=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*h,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+i)*a,t[13]=(n+r)*h,t[14]=(o+s)*l,t[15]=1,t},d.lookAt=function(t,i,r,n){var s,o,a,h,l,c,u,p,f,m,g=i[0],v=i[1],_=i[2],y=n[0],x=n[1],w=n[2],b=r[0],T=r[1],S=r[2];return Math.abs(g-b)<e&&Math.abs(v-T)<e&&Math.abs(_-S)<e?d.identity(t):(u=g-b,p=v-T,f=_-S,m=1/Math.sqrt(u*u+p*p+f*f),u*=m,p*=m,f*=m,s=x*f-w*p,o=w*u-y*f,a=y*p-x*u,m=Math.sqrt(s*s+o*o+a*a),m?(m=1/m,s*=m,o*=m,a*=m):(s=0,o=0,a=0),h=p*a-f*o,l=f*s-u*a,c=u*o-p*s,m=Math.sqrt(h*h+l*l+c*c),m?(m=1/m,h*=m,l*=m,c*=m):(h=0,l=0,c=0),t[0]=s,t[1]=h,t[2]=u,t[3]=0,t[4]=o,t[5]=l,t[6]=p,t[7]=0,t[8]=a,t[9]=c,t[10]=f,t[11]=0,t[12]=-(s*g+o*v+a*_),t[13]=-(h*g+l*v+c*_),t[14]=-(u*g+p*v+f*_),t[15]=1,t)},d.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},d.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},"undefined"!=typeof t&&(t.mat4=d);var p={};p.create=function(){var t=new i(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},p.rotationTo=function(){var t=a.create(),e=a.fromValues(1,0,0),i=a.fromValues(0,1,0);return function(r,n,s){var o=a.dot(n,s);return o<-.999999?(a.cross(t,e,n),a.length(t)<1e-6&&a.cross(t,i,n),a.normalize(t,t),p.setAxisAngle(r,t,Math.PI),r):o>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(a.cross(t,n,s),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+o,p.normalize(r,r))}}(),p.setAxes=function(){var t=u.create();return function(e,i,r,n){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=n[0],t[4]=n[1],t[7]=n[2],t[2]=-i[0],t[5]=-i[1],t[8]=-i[2],p.normalize(e,p.fromMat3(e,t))}}(),p.clone=h.clone,p.fromValues=h.fromValues,p.copy=h.copy,p.set=h.set,p.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},p.setAxisAngle=function(t,e,i){i=.5*i;var r=Math.sin(i);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(i),t},p.add=h.add,p.multiply=function(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3],a=i[0],h=i[1],l=i[2],c=i[3];return t[0]=r*c+o*a+n*l-s*h,t[1]=n*c+o*h+s*a-r*l,t[2]=s*c+o*l+r*h-n*a,t[3]=o*c-r*a-n*h-s*l,t},p.mul=p.multiply,p.scale=h.scale,p.rotateX=function(t,e,i){i*=.5;var r=e[0],n=e[1],s=e[2],o=e[3],a=Math.sin(i),h=Math.cos(i);return t[0]=r*h+o*a,t[1]=n*h+s*a,t[2]=s*h-n*a,t[3]=o*h-r*a,t},p.rotateY=function(t,e,i){i*=.5;var r=e[0],n=e[1],s=e[2],o=e[3],a=Math.sin(i),h=Math.cos(i);return t[0]=r*h-s*a,t[1]=n*h+o*a,t[2]=s*h+r*a,t[3]=o*h-n*a,t},p.rotateZ=function(t,e,i){i*=.5;var r=e[0],n=e[1],s=e[2],o=e[3],a=Math.sin(i),h=Math.cos(i);return t[0]=r*h+n*a,t[1]=n*h-r*a,t[2]=s*h+o*a,t[3]=o*h-s*a,t},p.calculateW=function(t,e){var i=e[0],r=e[1],n=e[2];return t[0]=i,t[1]=r,t[2]=n,t[3]=-Math.sqrt(Math.abs(1-i*i-r*r-n*n)),t},p.dot=h.dot,p.lerp=h.lerp,p.slerp=function(t,e,i,r){var n,s,o,a,h,l=e[0],c=e[1],u=e[2],d=e[3],p=i[0],f=i[1],m=i[2],g=i[3];return s=l*p+c*f+u*m+d*g,s<0&&(s=-s,p=-p,f=-f,m=-m,g=-g),1-s>1e-6?(n=Math.acos(s),o=Math.sin(n),a=Math.sin((1-r)*n)/o,h=Math.sin(r*n)/o):(a=1-r,h=r),t[0]=a*l+h*p,t[1]=a*c+h*f,t[2]=a*u+h*m,t[3]=a*d+h*g,t},p.invert=function(t,e){var i=e[0],r=e[1],n=e[2],s=e[3],o=i*i+r*r+n*n+s*s,a=o?1/o:0;return t[0]=-i*a,t[1]=-r*a,t[2]=-n*a,t[3]=s*a,t},p.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},p.length=h.length,p.len=p.length,p.squaredLength=h.squaredLength,p.sqrLen=p.squaredLength,p.normalize=h.normalize,p.fromMat3=function(t,e){var i,r=e[0]+e[4]+e[8];if(r>0)i=Math.sqrt(r+1),t[3]=.5*i,i=.5/i,t[0]=(e[7]-e[5])*i,t[1]=(e[2]-e[6])*i,t[2]=(e[3]-e[1])*i;else{var n=0;e[4]>e[0]&&(n=1),e[8]>e[3*n+n]&&(n=2);var s=(n+1)%3,o=(n+2)%3;i=Math.sqrt(e[3*n+n]-e[3*s+s]-e[3*o+o]+1),t[n]=.5*i,i=.5/i,t[3]=(e[3*o+s]-e[3*s+o])*i,t[s]=(e[3*s+n]+e[3*n+s])*i,t[o]=(e[3*o+n]+e[3*n+o])*i}return t},p.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},"undefined"!=typeof t&&(t.quat=p)}(i.exports)}(this)},{}],13:[function(t,e,i){function r(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}e.exports=Object.assign||function(t,e){for(var i,n,s=r(t),o=1;o<arguments.length;o++){i=arguments[o],n=Object.keys(Object(i));for(var a=0;a<n.length;a++)s[n[a]]=i[n[a]]}return s}},{}],14:[function(t,e,i){arguments[4][11][0].apply(i,arguments)},{dup:11}],15:[function(t,e,i){function r(t,e){a.call(this),e=e||10,this.baseUrl=t||"",this.progress=0,this.loading=!1,this._progressChunk=0,this._beforeMiddleware=[],this._afterMiddleware=[],this._boundLoadResource=this._loadResource.bind(this),this._boundOnLoad=this._onLoad.bind(this),this._buffer=[],this._numToLoad=0,this._queue=n.queue(this._boundLoadResource,e),this.resources={}}var n=t("async"),s=t("url"),o=t("./Resource"),a=t("eventemitter3");r.prototype=Object.create(a.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.add=r.prototype.enqueue=function(t,e,i,r){if(Array.isArray(t)){for(var n=0;n<t.length;++n)this.add(t[n]);return this}if("object"==typeof t&&(r=e||t.callback||t.onComplete,i=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(r=i,i=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof i&&(r=i,i=null),this.resources[t])throw new Error('Resource with name "'+t+'" already exists.');return e=this._handleBaseUrl(e),this.resources[t]=new o(t,e,i),"function"==typeof r&&this.resources[t].once("afterMiddleware",r),this._numToLoad++,this._queue.started?(this._queue.push(this.resources[t]),this._progressChunk=(100-this.progress)/(this._queue.length()+this._queue.running())):(this._buffer.push(this.resources[t]),this._progressChunk=100/this._buffer.length),this},r.prototype._handleBaseUrl=function(t){var e=s.parse(t);return e.protocol||0===e.pathname.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&t.lastIndexOf("/")!==t.length-1?this.baseUrl+"/"+t:this.baseUrl+t},r.prototype.before=r.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},r.prototype.after=r.prototype.use=function(t){return this._afterMiddleware.push(t),this},r.prototype.reset=function(){this.progress=0,this.loading=!1,this._progressChunk=0,this._buffer.length=0,this._numToLoad=0,this._queue.kill(),this._queue.started=!1,this.resources={}},r.prototype.load=function(t){if("function"==typeof t&&this.once("complete",t),this._queue.started)return this;this.emit("start",this);for(var e=0;e<this._buffer.length;++e)this._queue.push(this._buffer[e]);return this._buffer.length=0,this},r.prototype._loadResource=function(t,e){var i=this;t._dequeue=e,this._runMiddleware(t,this._beforeMiddleware,function(){t.load(i._boundOnLoad)})},r.prototype._onComplete=function(){this.emit("complete",this,this.resources)},r.prototype._onLoad=function(t){this.progress+=this._progressChunk,this.emit("progress",this,t),t.error?this.emit("error",t.error,this,t):this.emit("load",this,t),this._runMiddleware(t,this._afterMiddleware,function(){t.emit("afterMiddleware",t),this._numToLoad--,0===this._numToLoad&&this._onComplete()}),t._dequeue()},r.prototype._runMiddleware=function(t,e,i){var r=this;n.eachSeries(e,function(e,i){e.call(r,t,i)},i.bind(this,t))},r.LOAD_TYPE=o.LOAD_TYPE,r.XHR_READY_STATE=o.XHR_READY_STATE,r.XHR_RESPONSE_TYPE=o.XHR_RESPONSE_TYPE},{"./Resource":16,async:2,eventemitter3:14,url:9}],16:[function(t,e,i){function r(t,e,i){if(o.call(this),i=i||{},"string"!=typeof t||"string"!=typeof e)throw new Error("Both name and url are required for constructing a resource.");this.name=t,this.url=e,this.isDataUrl=0===this.url.indexOf("data:"),this.data=null,this.crossOrigin=i.crossOrigin===!0?"anonymous":null,this.loadType=i.loadType||this._determineLoadType(),this.xhrType=i.xhrType,this.error=null,this.xhr=null,this.isJson=!1,this.isXml=!1,this.isImage=!1,this.isAudio=!1,this.isVideo=!1,this._dequeue=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this)}function n(t){return t.toString().replace("object ","")}function s(t,e,i){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=i)}var o=t("eventemitter3"),a=t("url"),h=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),l=null;r.prototype=Object.create(o.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.complete=function(){this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError),this.data.removeEventListener("load",this._boundComplete),this.data.removeEventListener("progress",this._boundOnProgress),this.data.removeEventListener("canplaythrough",this._boundComplete)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError),this.xhr.removeEventListener("abort",this._boundXhrOnAbort),this.xhr.removeEventListener("progress",this._boundOnProgress),this.xhr.removeEventListener("load",this._boundXhrOnLoad)):(this.xhr.onerror=null,
this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.emit("complete",this)},r.prototype.load=function(t){switch(this.emit("start",this),t&&this.once("complete",t),"string"!=typeof this.crossOrigin&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case r.LOAD_TYPE.IMAGE:this._loadImage();break;case r.LOAD_TYPE.AUDIO:this._loadElement("audio");break;case r.LOAD_TYPE.VIDEO:this._loadElement("video");break;case r.LOAD_TYPE.XHR:default:h&&this.crossOrigin?this._loadXdr():this._loadXhr()}},r.prototype._loadImage=function(){this.data=new Image,this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.data.src=this.url,this.isImage=!0,this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},r.prototype._loadElement=function(t){if(this.data=document.createElement(t),Array.isArray(this.url))for(var e=0;e<this.url.length;++e)this.data.appendChild(this._createSource(t,this.url[e]));else this.data.appendChild(this._createSource(t,this.url));this["is"+t[0].toUpperCase()+t.substring(1)]=!0,this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()},r.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),this.xhrType===r.XHR_RESPONSE_TYPE.JSON||this.xhrType===r.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=r.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},r.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXdrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){t.send()},0)},r.prototype._createSource=function(t,e,i){i||(i=t+"/"+e.substr(e.lastIndexOf(".")+1));var r=document.createElement("source");return r.src=e,r.type=i,r},r.prototype._onError=function(t){this.error=new Error("Failed to load element using "+t.target.nodeName),this.complete()},r.prototype._onProgress=function(t){t&&t.lengthComputable&&this.emit("progress",this,t.loaded/t.total)},r.prototype._xhrOnError=function(){this.error=new Error(n(this.xhr)+" Request failed. Status: "+this.xhr.status+', text: "'+this.xhr.statusText+'"'),this.complete()},r.prototype._xhrOnAbort=function(){this.error=new Error(n(this.xhr)+" Request was aborted by the user."),this.complete()},r.prototype._xdrOnTimeout=function(){this.error=new Error(n(this.xhr)+" Request timed out."),this.complete()},r.prototype._xhrOnLoad=function(){var t=this.xhr,e=void 0!==t.status?t.status:200;if(200===e||204===e||0===e&&t.responseText.length>0)if(this.xhrType===r.XHR_RESPONSE_TYPE.TEXT)this.data=t.responseText;else if(this.xhrType===r.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(t.responseText),this.isJson=!0}catch(i){this.error=new Error("Error trying to parse loaded json:",i)}else if(this.xhrType===r.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var n=new DOMParser;this.data=n.parseFromString(t.responseText,"text/xml")}else{var s=document.createElement("div");s.innerHTML=t.responseText,this.data=s}this.isXml=!0}catch(i){this.error=new Error("Error trying to parse loaded xml:",i)}else this.data=t.response||t.responseText;else this.error=new Error("["+t.status+"]"+t.statusText+":"+t.responseURL);this.complete()},r.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";e=e||window.location,l||(l=document.createElement("a")),l.href=t,t=a.parse(l.href);var i=!t.port&&""===e.port||t.port===e.port;return t.hostname===e.hostname&&i&&t.protocol===e.protocol?"":"anonymous"},r.prototype._determineXhrType=function(){return r._xhrTypeMap[this._getExtension()]||r.XHR_RESPONSE_TYPE.TEXT},r.prototype._determineLoadType=function(){return r._loadTypeMap[this._getExtension()]||r.LOAD_TYPE.XHR},r.prototype._getExtension=function(){var t,e=this.url;if(this.isDataUrl){var i=e.indexOf("/");t=e.substring(i+1,e.indexOf(";",i))}else t=e.substring(e.lastIndexOf(".")+1);return t},r.prototype._getMimeFromXhrType=function(t){switch(t){case r.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case r.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case r.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case r.XHR_RESPONSE_TYPE.JSON:return"application/json";case r.XHR_RESPONSE_TYPE.DEFAULT:case r.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},r.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},r.XHR_READY_STATE={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},r.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},r._loadTypeMap={gif:r.LOAD_TYPE.IMAGE,png:r.LOAD_TYPE.IMAGE,bmp:r.LOAD_TYPE.IMAGE,jpg:r.LOAD_TYPE.IMAGE,jpeg:r.LOAD_TYPE.IMAGE,tif:r.LOAD_TYPE.IMAGE,tiff:r.LOAD_TYPE.IMAGE,webp:r.LOAD_TYPE.IMAGE,tga:r.LOAD_TYPE.IMAGE},r._xhrTypeMap={xhtml:r.XHR_RESPONSE_TYPE.DOCUMENT,html:r.XHR_RESPONSE_TYPE.DOCUMENT,htm:r.XHR_RESPONSE_TYPE.DOCUMENT,xml:r.XHR_RESPONSE_TYPE.DOCUMENT,tmx:r.XHR_RESPONSE_TYPE.DOCUMENT,tsx:r.XHR_RESPONSE_TYPE.DOCUMENT,svg:r.XHR_RESPONSE_TYPE.DOCUMENT,gif:r.XHR_RESPONSE_TYPE.BLOB,png:r.XHR_RESPONSE_TYPE.BLOB,bmp:r.XHR_RESPONSE_TYPE.BLOB,jpg:r.XHR_RESPONSE_TYPE.BLOB,jpeg:r.XHR_RESPONSE_TYPE.BLOB,tif:r.XHR_RESPONSE_TYPE.BLOB,tiff:r.XHR_RESPONSE_TYPE.BLOB,webp:r.XHR_RESPONSE_TYPE.BLOB,tga:r.XHR_RESPONSE_TYPE.BLOB,json:r.XHR_RESPONSE_TYPE.JSON,text:r.XHR_RESPONSE_TYPE.TEXT,txt:r.XHR_RESPONSE_TYPE.TEXT},r.setExtensionLoadType=function(t,e){s(r._loadTypeMap,t,e)},r.setExtensionXhrType=function(t,e){s(r._xhrTypeMap,t,e)}},{eventemitter3:14,url:9}],17:[function(t,e,i){e.exports={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encodeBinary:function(t){for(var e,i="",r=new Array(4),n=0,s=0,o=0;n<t.length;){for(e=new Array(3),s=0;s<e.length;s++)n<t.length?e[s]=255&t.charCodeAt(n++):e[s]=0;switch(r[0]=e[0]>>2,r[1]=(3&e[0])<<4|e[1]>>4,r[2]=(15&e[1])<<2|e[2]>>6,r[3]=63&e[2],o=n-(t.length-1)){case 2:r[3]=64,r[2]=64;break;case 1:r[3]=64}for(s=0;s<r.length;s++)i+=this._keyStr.charAt(r[s])}return i}}},{}],18:[function(t,e,i){e.exports=t("./Loader"),e.exports.Resource=t("./Resource"),e.exports.middleware={caching:{memory:t("./middlewares/caching/memory")},parsing:{blob:t("./middlewares/parsing/blob")}}},{"./Loader":15,"./Resource":16,"./middlewares/caching/memory":19,"./middlewares/parsing/blob":20}],19:[function(t,e,i){var r={};e.exports=function(){return function(t,e){r[t.url]?(t.data=r[t.url],t.complete()):(t.once("complete",function(){r[this.url]=this.data}),e())}}},{}],20:[function(t,e,i){var r=t("../../Resource"),n=t("../../b64");window.URL=window.URL||window.webkitURL,e.exports=function(){return function(t,e){if(!t.data)return e();if(t.xhr&&t.xhrType===r.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var i=URL.createObjectURL(t.data);t.blob=t.data,t.data=new Image,t.data.src=i,t.isImage=!0,t.data.onload=function(){URL.revokeObjectURL(i),t.data.onload=null,e()}}}else{var s=t.xhr.getResponseHeader("content-type");s&&0===s.indexOf("image")&&(t.data=new Image,t.data.src="data:"+s+";base64,"+n.encodeBinary(t.xhr.responseText),t.isImage=!0,t.data.onload=function(){t.data.onload=null,e()})}else e()}}},{"../../Resource":16,"../../b64":17}],21:[function(t,e,i){e.exports={name:"pixi.js",version:"3.0.6",description:"Pixi.js is a fast lightweight 2D library that works across all devices.",author:"Mat Groves",contributors:["Chad Engler <chad@pantherdev.com>","Richard Davey <rdavey@gmail.com>"],main:"./src/index.js",homepage:"http://goodboydigital.com/",bugs:"https://github.com/GoodBoyDigital/pixi.js/issues",license:"MIT",repository:{type:"git",url:"https://github.com/GoodBoyDigital/pixi.js.git"},scripts:{test:"gulp && testem ci",docs:"jsdoc -c ./gulp/util/jsdoc.conf.json -R README.md"},files:["bin/","src/"],dependencies:{async:"^0.9.0",brfs:"^1.4.0","gl-matrix":"^2.1.0",earcut:"^2.0.0",eventemitter3:"^1.1.0","object-assign":"^2.0.0","resource-loader":"^1.6.0"},devDependencies:{browserify:"^10.2.1",chai:"^2.3.0",del:"^1.2.0",gulp:"^3.8.11","gulp-cached":"^1.1.0","gulp-concat":"^2.5.2","gulp-debug":"^2.0.1","gulp-jshint":"^1.10.0","gulp-mirror":"^0.4.0","gulp-plumber":"^1.0.1","gulp-rename":"^1.2.2","gulp-sourcemaps":"^1.5.2","gulp-uglify":"^1.2.0","gulp-util":"^3.0.4","jaguarjs-jsdoc":"git+https://github.com/davidshimjs/jaguarjs-jsdoc.git",jsdoc:"^3.3.0-beta3","jshint-summary":"^0.4.0",minimist:"^1.1.1",mocha:"^2.2.5","require-dir":"^0.3.0","run-sequence":"^1.1.0",testem:"^0.8.3","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0",watchify:"^3.2.1"},browserify:{transform:["brfs"]}}},{}],22:[function(t,e,i){var r={VERSION:t("../../package.json").version,PI_2:2*Math.PI,RAD_TO_DEG:180/Math.PI,DEG_TO_RAD:Math.PI/180,TARGET_FPMS:.06,RENDERER_TYPE:{UNKNOWN:0,WEBGL:1,CANVAS:2},BLEND_MODES:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},DRAW_MODES:{POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},SCALE_MODES:{DEFAULT:0,LINEAR:0,NEAREST:1},RETINA_PREFIX:/@(.+)x/,RESOLUTION:1,FILTER_RESOLUTION:1,DEFAULT_RENDER_OPTIONS:{view:null,resolution:1,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1},SHAPES:{POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},SPRITE_BATCH_SIZE:2e3};e.exports=r},{"../../package.json":21}],23:[function(t,e,i){function r(){s.call(this),this.children=[]}var n=t("../math"),s=t("./DisplayObject"),o=t("../textures/RenderTexture"),a=new n.Matrix;r.prototype=Object.create(s.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{width:{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;0!==e?this.scale.x=t/e:this.scale.x=1,this._width=t}},height:{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;0!==e?this.scale.y=t/e:this.scale.y=1,this._height=t}}}),r.prototype.addChild=function(t){return this.addChildAt(t,this.children.length)},r.prototype.addChildAt=function(t,e){if(t===this)return t;if(e>=0&&e<=this.children.length)return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),t;throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length)},r.prototype.swapChildren=function(t,e){if(t!==e){var i=this.getChildIndex(t),r=this.getChildIndex(e);if(i<0||r<0)throw new Error("swapChildren: Both the supplied DisplayObjects must be children of the caller.");this.children[i]=e,this.children[r]=t}},r.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(e===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return e},r.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The supplied index is out of bounds");var i=this.getChildIndex(t);this.children.splice(i,1),this.children.splice(e,0,t)},r.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Supplied index "+t+" does not exist in the child list, or the supplied DisplayObject is not a child of the caller");return this.children[t]},r.prototype.removeChild=function(t){var e=this.children.indexOf(t);if(e!==-1)return this.removeChildAt(e)},r.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,this.children.splice(t,1),e},r.prototype.removeChildren=function(t,e){var i=t||0,r="number"==typeof e?e:this.children.length,n=r-i;if(n>0&&n<=r){for(var s=this.children.splice(i,n),o=0;o<s.length;++o)s[o].parent=null;return s}if(0===n&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},r.prototype.generateTexture=function(t,e,i){var r=this.getLocalBounds(),n=new o(t,0|r.width,0|r.height,i,e);return a.tx=-r.x,a.ty=-r.y,n.render(this,a),n},r.prototype.updateTransform=function(){if(this.visible){this.displayObjectUpdateTransform();for(var t=0,e=this.children.length;t<e;++t)this.children[t].updateTransform()}},r.prototype.containerUpdateTransform=r.prototype.updateTransform,r.prototype.getBounds=function(){if(!this._currentBounds){if(0===this.children.length)return n.Rectangle.EMPTY;for(var t,e,i,r=1/0,s=1/0,o=-(1/0),a=-(1/0),h=!1,l=0,c=this.children.length;l<c;++l){var u=this.children[l];u.visible&&(h=!0,t=this.children[l].getBounds(),r=r<t.x?r:t.x,s=s<t.y?s:t.y,e=t.width+t.x,i=t.height+t.y,o=o>e?o:e,a=a>i?a:i)}if(!h)return n.Rectangle.EMPTY;var d=this._bounds;d.x=r,d.y=s,d.width=o-r,d.height=a-s,this._currentBounds=d}return this._currentBounds},r.prototype.containerGetBounds=r.prototype.getBounds,r.prototype.getLocalBounds=function(){var t=this.worldTransform;this.worldTransform=n.Matrix.IDENTITY;for(var e=0,i=this.children.length;e<i;++e)this.children[e].updateTransform();return this.worldTransform=t,this._currentBounds=null,this.getBounds(n.Matrix.IDENTITY)},r.prototype.renderWebGL=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){var e,i;if(this._mask||this._filters){for(t.currentRenderer.flush(),this._filters&&t.filterManager.pushFilter(this,this._filters),this._mask&&t.maskManager.pushMask(this,this._mask),t.currentRenderer.start(),this._renderWebGL(t),e=0,i=this.children.length;e<i;e++)this.children[e].renderWebGL(t);t.currentRenderer.flush(),this._mask&&t.maskManager.popMask(this,this._mask),this._filters&&t.filterManager.popFilter(),t.currentRenderer.start()}else for(this._renderWebGL(t),e=0,i=this.children.length;e<i;++e)this.children[e].renderWebGL(t)}},r.prototype._renderWebGL=function(t){},r.prototype._renderCanvas=function(t){},r.prototype.renderCanvas=function(t){if(this.visible&&!(this.alpha<=0)&&this.renderable){this._mask&&t.maskManager.pushMask(this._mask,t),this._renderCanvas(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},r.prototype.destroy=function(t){if(s.prototype.destroy.call(this),t)for(var e=0,i=this.children.length;e<i;++e)this.children[e].destroy(t);this.removeChildren(),this.children=null}},{"../math":32,"../textures/RenderTexture":70,"./DisplayObject":24}],24:[function(t,e,i){function r(){o.call(this),this.position=new n.Point,this.scale=new n.Point(1,1),this.pivot=new n.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.renderable=!0,this.parent=null,this.worldAlpha=1,this.worldTransform=new n.Matrix,this.filterArea=null,this._sr=0,this._cr=1,this._bounds=new n.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null,this._cacheAsBitmap=!1,this._cachedObject=null}var n=t("../math"),s=t("../textures/RenderTexture"),o=t("eventemitter3"),a=t("../const"),h=new n.Matrix;r.prototype=Object.create(o.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{x:{get:function(){return this.position.x},set:function(t){this.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t}},worldVisible:{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}},mask:{get:function(){return this._mask},set:function(t){this._mask&&(this._mask.renderable=!0),this._mask=t,this._mask&&(this._mask.renderable=!1)}},filters:{get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}}),r.prototype.updateTransform=function(){var t,e,i,r,n,s,o=this.parent.worldTransform,h=this.worldTransform;this.rotation%a.PI_2?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),t=this._cr*this.scale.x,e=this._sr*this.scale.x,i=-this._sr*this.scale.y,r=this._cr*this.scale.y,n=this.position.x,s=this.position.y,(this.pivot.x||this.pivot.y)&&(n-=this.pivot.x*t+this.pivot.y*i,s-=this.pivot.x*e+this.pivot.y*r),h.a=t*o.a+e*o.c,h.b=t*o.b+e*o.d,h.c=i*o.a+r*o.c,h.d=i*o.b+r*o.d,h.tx=n*o.a+s*o.c+o.tx,h.ty=n*o.b+s*o.d+o.ty):(t=this.scale.x,r=this.scale.y,n=this.position.x-this.pivot.x*t,s=this.position.y-this.pivot.y*r,h.a=t*o.a,h.b=t*o.b,h.c=r*o.c,h.d=r*o.d,h.tx=n*o.a+s*o.c+o.tx,h.ty=n*o.b+s*o.d+o.ty),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._currentBounds=null},r.prototype.displayObjectUpdateTransform=r.prototype.updateTransform,r.prototype.getBounds=function(t){return n.Rectangle.EMPTY},r.prototype.getLocalBounds=function(){return this.getBounds(n.Matrix.IDENTITY)},r.prototype.toGlobal=function(t){return this.displayObjectUpdateTransform(),this.worldTransform.apply(t)},r.prototype.toLocal=function(t,e){return e&&(t=e.toGlobal(t)),this.displayObjectUpdateTransform(),this.worldTransform.applyInverse(t)},r.prototype.renderWebGL=function(t){},r.prototype.renderCanvas=function(t){},r.prototype.generateTexture=function(t,e,i){var r=this.getLocalBounds(),n=new s(t,0|r.width,0|r.height,e,i);return h.tx=-r.x,h.ty=-r.y,n.render(this,h),n},r.prototype.destroy=function(){this.position=null,this.scale=null,this.pivot=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.worldTransform=null,this.filterArea=null}},{"../const":22,"../math":32,"../textures/RenderTexture":70,eventemitter3:11}],25:[function(t,e,i){function r(){n.call(this),this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint=16777215,this._prevTint=16777215,this.blendMode=c.BLEND_MODES.NORMAL,this.currentPath=null,this._webGL={},this.isMask=!1,this.boundsPadding=0,this._localBounds=new l.Rectangle(0,0,1,1),this.dirty=!0,this.glDirty=!1,this.boundsDirty=!0,this.cachedSpriteDirty=!1}var n=t("../display/Container"),s=t("../textures/Texture"),o=t("../renderers/canvas/utils/CanvasBuffer"),a=t("../renderers/canvas/utils/CanvasGraphics"),h=t("./GraphicsData"),l=t("../math"),c=t("../const"),u=new l.Point;r.prototype=Object.create(n.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{}),r.prototype.clone=function(){var t=new r;t.renderable=this.renderable,t.fillAlpha=this.fillAlpha,t.lineWidth=this.lineWidth,t.lineColor=this.lineColor,t.tint=this.tint,t.blendMode=this.blendMode,t.isMask=this.isMask,t.boundsPadding=this.boundsPadding,t.dirty=this.dirty,t.glDirty=this.glDirty,t.cachedSpriteDirty=this.cachedSpriteDirty;for(var e=0;e<this.graphicsData.length;++e)t.graphicsData.push(this.graphicsData[e].clone());return t.currentPath=t.graphicsData[t.graphicsData.length-1],t.updateLocalBounds(),t},r.prototype.lineStyle=function(t,e,i){return this.lineWidth=t||0,this.lineColor=e||0,this.lineAlpha=void 0===i?1:i,this.currentPath&&(this.currentPath.shape.points.length?this.drawShape(new l.Polygon(this.currentPath.shape.points.slice(-2))):(this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha)),this},r.prototype.moveTo=function(t,e){return this.drawShape(new l.Polygon([t,e])),this},r.prototype.lineTo=function(t,e){return this.currentPath.shape.points.push(t,e),this.dirty=!0,this},r.prototype.quadraticCurveTo=function(t,e,i,r){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var n,s,o=20,a=this.currentPath.shape.points;0===a.length&&this.moveTo(0,0);for(var h=a[a.length-2],l=a[a.length-1],c=0,u=1;u<=o;++u)c=u/o,n=h+(t-h)*c,s=l+(e-l)*c,a.push(n+(t+(i-t)*c-n)*c,s+(e+(r-e)*c-s)*c);return this.dirty=this.boundsDirty=!0,this},r.prototype.bezierCurveTo=function(t,e,i,r,n,s){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var o,a,h,l,c,u=20,d=this.currentPath.shape.points,p=d[d.length-2],f=d[d.length-1],m=0,g=1;g<=u;++g)m=g/u,o=1-m,a=o*o,h=a*o,l=m*m,c=l*m,d.push(h*p+3*a*m*t+3*o*l*i+c*n,h*f+3*a*m*e+3*o*l*r+c*s);return this.dirty=this.boundsDirty=!0,this},r.prototype.arcTo=function(t,e,i,r,n){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var s=this.currentPath.shape.points,o=s[s.length-2],a=s[s.length-1],h=a-e,l=o-t,c=r-e,u=i-t,d=Math.abs(h*u-l*c);if(d<1e-8||0===n)s[s.length-2]===t&&s[s.length-1]===e||s.push(t,e);else{var p=h*h+l*l,f=c*c+u*u,m=h*c+l*u,g=n*Math.sqrt(p)/d,v=n*Math.sqrt(f)/d,_=g*m/p,y=v*m/f,x=g*u+v*l,w=g*c+v*h,b=l*(v+_),T=h*(v+_),S=u*(g+y),A=c*(g+y),C=Math.atan2(T-w,b-x),E=Math.atan2(A-w,S-x);this.arc(x+t,w+e,n,C,E,l*c>u*h)}return this.dirty=this.boundsDirty=!0,this},r.prototype.arc=function(t,e,i,r,n,s){if(s=s||!1,r===n)return this;!s&&n<=r?n+=2*Math.PI:s&&r<=n&&(r+=2*Math.PI);var o=s?(r-n)*-1:n-r,a=40*Math.ceil(Math.abs(o)/(2*Math.PI));if(0===o)return this;var h=t+Math.cos(r)*i,l=e+Math.sin(r)*i;this.currentPath?s&&this.filling?this.currentPath.shape.points.push(t,e):this.currentPath.shape.points.push(h,l):s&&this.filling?this.moveTo(t,e):this.moveTo(h,l);for(var c=this.currentPath.shape.points,u=o/(2*a),d=2*u,p=Math.cos(u),f=Math.sin(u),m=a-1,g=m%1/m,v=0;v<=m;v++){var _=v+g*v,y=u+r+d*_,x=Math.cos(y),w=-Math.sin(y);c.push((p*x+f*w)*i+t,(p*-w+f*x)*i+e)}return this.dirty=this.boundsDirty=!0,this},r.prototype.beginFill=function(t,e){return this.filling=!0,this.fillColor=t||0,this.fillAlpha=void 0===e?1:e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},r.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},r.prototype.drawRect=function(t,e,i,r){return this.drawShape(new l.Rectangle(t,e,i,r)),this},r.prototype.drawRoundedRect=function(t,e,i,r,n){return this.drawShape(new l.RoundedRectangle(t,e,i,r,n)),this},r.prototype.drawCircle=function(t,e,i){return this.drawShape(new l.Circle(t,e,i)),this},r.prototype.drawEllipse=function(t,e,i,r){return this.drawShape(new l.Ellipse(t,e,i,r)),this},r.prototype.drawPolygon=function(t){var e=t;if(!Array.isArray(e)){e=new Array(arguments.length);for(var i=0;i<e.length;++i)e[i]=arguments[i]}return this.drawShape(new l.Polygon(e)),this},r.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this},r.prototype.generateTexture=function(t,e,i){e=e||1;var r=this.getLocalBounds(),n=new o(r.width*e,r.height*e),h=s.fromCanvas(n.canvas,i);return h.baseTexture.resolution=e,n.context.scale(e,e),n.context.translate(-r.x,-r.y),a.renderGraphics(this,n.context),h},r.prototype._renderWebGL=function(t){this.glDirty&&(this.dirty=!0,this.glDirty=!1),t.setObjectRenderer(t.plugins.graphics),t.plugins.graphics.render(this)},r.prototype._renderCanvas=function(t){if(this.isMask!==!0){this._prevTint!==this.tint&&(this.dirty=!0,this._prevTint=this.tint);var e=t.context,i=this.worldTransform;this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,e.globalCompositeOperation=t.blendModes[t.currentBlendMode]);var r=t.resolution;e.setTransform(i.a*r,i.b*r,i.c*r,i.d*r,i.tx*r,i.ty*r),a.renderGraphics(this,e)}},r.prototype.getBounds=function(t){if(!this._currentBounds){if(!this.renderable)return l.Rectangle.EMPTY;this.boundsDirty&&(this.updateLocalBounds(),this.glDirty=!0,this.cachedSpriteDirty=!0,this.boundsDirty=!1);var e=this._localBounds,i=e.x,r=e.width+e.x,n=e.y,s=e.height+e.y,o=t||this.worldTransform,a=o.a,h=o.b,c=o.c,u=o.d,d=o.tx,p=o.ty,f=a*r+c*s+d,m=u*s+h*r+p,g=a*i+c*s+d,v=u*s+h*i+p,_=a*i+c*n+d,y=u*n+h*i+p,x=a*r+c*n+d,w=u*n+h*r+p,b=f,T=m,S=f,A=m;S=g<S?g:S,S=_<S?_:S,S=x<S?x:S,A=v<A?v:A,A=y<A?y:A,A=w<A?w:A,b=g>b?g:b,b=_>b?_:b,b=x>b?x:b,T=v>T?v:T,T=y>T?y:T,T=w>T?w:T,this._bounds.x=S,this._bounds.width=b-S,this._bounds.y=A,this._bounds.height=T-A,this._currentBounds=this._bounds}return this._currentBounds},r.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,u);for(var e=this.graphicsData,i=0;i<e.length;i++){var r=e[i];if(r.fill&&r.shape&&r.shape.contains(u.x,u.y))return!0}return!1},r.prototype.updateLocalBounds=function(){var t=1/0,e=-(1/0),i=1/0,r=-(1/0);if(this.graphicsData.length)for(var n,s,o,a,h,l,u=0;u<this.graphicsData.length;u++){var d=this.graphicsData[u],p=d.type,f=d.lineWidth;if(n=d.shape,p===c.SHAPES.RECT||p===c.SHAPES.RREC)o=n.x-f/2,a=n.y-f/2,h=n.width+f,l=n.height+f,t=o<t?o:t,e=o+h>e?o+h:e,i=a<i?a:i,r=a+l>r?a+l:r;else if(p===c.SHAPES.CIRC)o=n.x,a=n.y,h=n.radius+f/2,l=n.radius+f/2,t=o-h<t?o-h:t,e=o+h>e?o+h:e,i=a-l<i?a-l:i,r=a+l>r?a+l:r;else if(p===c.SHAPES.ELIP)o=n.x,a=n.y,h=n.width+f/2,l=n.height+f/2,t=o-h<t?o-h:t,e=o+h>e?o+h:e,i=a-l<i?a-l:i,r=a+l>r?a+l:r;else{s=n.points;for(var m=0;m<s.length;m+=2)o=s[m],a=s[m+1],t=o-f<t?o-f:t,e=o+f>e?o+f:e,i=a-f<i?a-f:i,r=a+f>r?a+f:r}}else t=0,e=0,i=0,r=0;var g=this.boundsPadding;this._localBounds.x=t-g,this._localBounds.width=e-t+2*g,this._localBounds.y=i-g,this._localBounds.height=r-i+2*g},r.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new h(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,t);return this.graphicsData.push(e),e.type===c.SHAPES.POLY&&(e.shape.closed=this.filling,this.currentPath=e),this.dirty=this.boundsDirty=!0,e},r.prototype.destroy=function(){n.prototype.destroy.apply(this,arguments);for(var t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();for(var e in this._webgl)for(var i=0;i<this._webgl[e].data.length;++i)this._webgl[e].data[i].destroy();this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null}},{"../const":22,"../display/Container":23,"../math":32,"../renderers/canvas/utils/CanvasBuffer":44,"../renderers/canvas/utils/CanvasGraphics":45,"../textures/Texture":71,"./GraphicsData":26}],26:[function(t,e,i){function r(t,e,i,r,n,s,o){this.lineWidth=t,this.lineColor=e,this.lineAlpha=i,this._lineTint=e,this.fillColor=r,this.fillAlpha=n,this._fillTint=r,this.fill=s,this.shape=o,this.type=o.type}r.prototype.constructor=r,e.exports=r,r.prototype.clone=function(){return new r(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},r.prototype.destroy=function(){this.shape=null}},{}],27:[function(t,e,i){function r(t){a.call(this,t),this.graphicsDataPool=[],this.primitiveShader=null,this.complexPrimitiveShader=null}var n=t("../../utils"),s=t("../../math"),o=t("../../const"),a=t("../../renderers/webgl/utils/ObjectRenderer"),h=t("../../renderers/webgl/WebGLRenderer"),l=t("./WebGLGraphicsData"),c=t("earcut");r.prototype=Object.create(a.prototype),r.prototype.constructor=r,e.exports=r,h.registerPlugin("graphics",r),r.prototype.onContextChange=function(){},r.prototype.destroy=function(){a.prototype.destroy.call(this);for(var t=0;t<this.graphicsDataPool.length;++t)this.graphicsDataPool[t].destroy();this.graphicsDataPool=null},r.prototype.render=function(t){var e,i=this.renderer,r=i.gl,s=i.shaderManager.plugins.primitiveShader;t.dirty&&this.updateGraphics(t,r);var o=t._webGL[r.id];i.blendModeManager.setBlendMode(t.blendMode);for(var a=0;a<o.data.length;a++)1===o.data[a].mode?(e=o.data[a],i.stencilManager.pushStencil(t,e,i),r.uniform1f(i.shaderManager.complexPrimitiveShader.uniforms.alpha._location,t.worldAlpha*e.alpha),r.drawElements(r.TRIANGLE_FAN,4,r.UNSIGNED_SHORT,2*(e.indices.length-4)),i.stencilManager.popStencil(t,e,i)):(e=o.data[a],s=i.shaderManager.primitiveShader,i.shaderManager.setShader(s),r.uniformMatrix3fv(s.uniforms.translationMatrix._location,!1,t.worldTransform.toArray(!0)),r.uniformMatrix3fv(s.uniforms.projectionMatrix._location,!1,i.currentRenderTarget.projectionMatrix.toArray(!0)),r.uniform3fv(s.uniforms.tint._location,n.hex2rgb(t.tint)),r.uniform1f(s.uniforms.alpha._location,t.worldAlpha),r.bindBuffer(r.ARRAY_BUFFER,e.buffer),r.vertexAttribPointer(s.attributes.aVertexPosition,2,r.FLOAT,!1,24,0),r.vertexAttribPointer(s.attributes.aColor,4,r.FLOAT,!1,24,8),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e.indexBuffer),r.drawElements(r.TRIANGLE_STRIP,e.indices.length,r.UNSIGNED_SHORT,0))},r.prototype.updateGraphics=function(t){var e=this.renderer.gl,i=t._webGL[e.id];i||(i=t._webGL[e.id]={lastIndex:0,data:[],gl:e}),t.dirty=!1;var r;if(t.clearDirty){for(t.clearDirty=!1,r=0;r<i.data.length;r++){var n=i.data[r];n.reset(),this.graphicsDataPool.push(n)}i.data=[],i.lastIndex=0}var s;for(r=i.lastIndex;r<t.graphicsData.length;r++){var a=t.graphicsData[r];if(a.type===o.SHAPES.POLY){if(a.points=a.shape.points.slice(),a.shape.closed&&(a.points[0]===a.points[a.points.length-2]&&a.points[1]===a.points[a.points.length-1]||a.points.push(a.points[0],a.points[1])),a.fill&&a.points.length>=6)if(a.points.length<12){s=this.switchMode(i,0);var h=this.buildPoly(a,s);h||(s=this.switchMode(i,1),this.buildComplexPoly(a,s))}else s=this.switchMode(i,1),this.buildComplexPoly(a,s);a.lineWidth>0&&(s=this.switchMode(i,0),this.buildLine(a,s))}else s=this.switchMode(i,0),a.type===o.SHAPES.RECT?this.buildRectangle(a,s):a.type===o.SHAPES.CIRC||a.type===o.SHAPES.ELIP?this.buildCircle(a,s):a.type===o.SHAPES.RREC&&this.buildRoundedRectangle(a,s);i.lastIndex++}for(r=0;r<i.data.length;r++)s=i.data[r],s.dirty&&s.upload()},r.prototype.switchMode=function(t,e){var i;return t.data.length?(i=t.data[t.data.length-1],(i.points.length>32e4||i.mode!==e||1===e)&&(i=this.graphicsDataPool.pop()||new l(t.gl),i.mode=e,t.data.push(i))):(i=this.graphicsDataPool.pop()||new l(t.gl),i.mode=e,t.data.push(i)),i.dirty=!0,i},r.prototype.buildRectangle=function(t,e){var i=t.shape,r=i.x,s=i.y,o=i.width,a=i.height;if(t.fill){var h=n.hex2rgb(t.fillColor),l=t.fillAlpha,c=h[0]*l,u=h[1]*l,d=h[2]*l,p=e.points,f=e.indices,m=p.length/6;p.push(r,s),p.push(c,u,d,l),p.push(r+o,s),p.push(c,u,d,l),p.push(r,s+a),p.push(c,u,d,l),p.push(r+o,s+a),p.push(c,u,d,l),f.push(m,m,m+1,m+2,m+3,m+3)}if(t.lineWidth){var g=t.points;t.points=[r,s,r+o,s,r+o,s+a,r,s+a,r,s],this.buildLine(t,e),t.points=g}},r.prototype.buildRoundedRectangle=function(t,e){var i=t.shape,r=i.x,s=i.y,o=i.width,a=i.height,h=i.radius,l=[];if(l.push(r,s+h),this.quadraticBezierCurve(r,s+a-h,r,s+a,r+h,s+a,l),this.quadraticBezierCurve(r+o-h,s+a,r+o,s+a,r+o,s+a-h,l),this.quadraticBezierCurve(r+o,s+h,r+o,s,r+o-h,s,l),this.quadraticBezierCurve(r+h,s,r,s,r,s+h+1e-10,l),t.fill){var u=n.hex2rgb(t.fillColor),d=t.fillAlpha,p=u[0]*d,f=u[1]*d,m=u[2]*d,g=e.points,v=e.indices,_=g.length/6,y=c(l,null,2),x=0;for(x=0;x<y.length;x+=3)v.push(y[x]+_),v.push(y[x]+_),v.push(y[x+1]+_),v.push(y[x+2]+_),v.push(y[x+2]+_);for(x=0;x<l.length;x++)g.push(l[x],l[++x],p,f,m,d)}if(t.lineWidth){var w=t.points;t.points=l,this.buildLine(t,e),t.points=w}},r.prototype.quadraticBezierCurve=function(t,e,i,r,n,s,o){function a(t,e,i){var r=e-t;return t+r*i}for(var h,l,c,u,d,p,f=20,m=o||[],g=0,v=0;v<=f;v++)g=v/f,h=a(t,i,g),l=a(e,r,g),c=a(i,n,g),u=a(r,s,g),d=a(h,c,g),p=a(l,u,g),m.push(d,p);return m},r.prototype.buildCircle=function(t,e){var i,r,s=t.shape,a=s.x,h=s.y;t.type===o.SHAPES.CIRC?(i=s.radius,r=s.radius):(i=s.width,r=s.height);var l=40,c=2*Math.PI/l,u=0;if(t.fill){var d=n.hex2rgb(t.fillColor),p=t.fillAlpha,f=d[0]*p,m=d[1]*p,g=d[2]*p,v=e.points,_=e.indices,y=v.length/6;for(_.push(y),u=0;u<l+1;u++)v.push(a,h,f,m,g,p),v.push(a+Math.sin(c*u)*i,h+Math.cos(c*u)*r,f,m,g,p),_.push(y++,y++);_.push(y-1)}if(t.lineWidth){var x=t.points;for(t.points=[],u=0;u<l+1;u++)t.points.push(a+Math.sin(c*u)*i,h+Math.cos(c*u)*r);this.buildLine(t,e),
t.points=x}},r.prototype.buildLine=function(t,e){var i=0,r=t.points;if(0!==r.length){if(t.lineWidth%2)for(i=0;i<r.length;i++)r[i]+=.5;var o=new s.Point(r[0],r[1]),a=new s.Point(r[r.length-2],r[r.length-1]);if(o.x===a.x&&o.y===a.y){r=r.slice(),r.pop(),r.pop(),a=new s.Point(r[r.length-2],r[r.length-1]);var h=a.x+.5*(o.x-a.x),l=a.y+.5*(o.y-a.y);r.unshift(h,l),r.push(h,l)}var c,u,d,p,f,m,g,v,_,y,x,w,b,T,S,A,C,E,M,P,L,R,O,I=e.points,D=e.indices,B=r.length/2,k=r.length,F=I.length/6,j=t.lineWidth/2,N=n.hex2rgb(t.lineColor),U=t.lineAlpha,H=N[0]*U,X=N[1]*U,G=N[2]*U;for(d=r[0],p=r[1],f=r[2],m=r[3],_=-(p-m),y=d-f,O=Math.sqrt(_*_+y*y),_/=O,y/=O,_*=j,y*=j,I.push(d-_,p-y,H,X,G,U),I.push(d+_,p+y,H,X,G,U),i=1;i<B-1;i++)d=r[2*(i-1)],p=r[2*(i-1)+1],f=r[2*i],m=r[2*i+1],g=r[2*(i+1)],v=r[2*(i+1)+1],_=-(p-m),y=d-f,O=Math.sqrt(_*_+y*y),_/=O,y/=O,_*=j,y*=j,x=-(m-v),w=f-g,O=Math.sqrt(x*x+w*w),x/=O,w/=O,x*=j,w*=j,S=-y+p-(-y+m),A=-_+f-(-_+d),C=(-_+d)*(-y+m)-(-_+f)*(-y+p),E=-w+v-(-w+m),M=-x+f-(-x+g),P=(-x+g)*(-w+m)-(-x+f)*(-w+v),L=S*M-E*A,Math.abs(L)<.1?(L+=10.1,I.push(f-_,m-y,H,X,G,U),I.push(f+_,m+y,H,X,G,U)):(c=(A*P-M*C)/L,u=(E*C-S*P)/L,R=(c-f)*(c-f)+(u-m)+(u-m),R>19600?(b=_-x,T=y-w,O=Math.sqrt(b*b+T*T),b/=O,T/=O,b*=j,T*=j,I.push(f-b,m-T),I.push(H,X,G,U),I.push(f+b,m+T),I.push(H,X,G,U),I.push(f-b,m-T),I.push(H,X,G,U),k++):(I.push(c,u),I.push(H,X,G,U),I.push(f-(c-f),m-(u-m)),I.push(H,X,G,U)));for(d=r[2*(B-2)],p=r[2*(B-2)+1],f=r[2*(B-1)],m=r[2*(B-1)+1],_=-(p-m),y=d-f,O=Math.sqrt(_*_+y*y),_/=O,y/=O,_*=j,y*=j,I.push(f-_,m-y),I.push(H,X,G,U),I.push(f+_,m+y),I.push(H,X,G,U),D.push(F),i=0;i<k;i++)D.push(F++);D.push(F-1)}},r.prototype.buildComplexPoly=function(t,e){var i=t.points.slice();if(!(i.length<6)){var r=e.indices;e.points=i,e.alpha=t.fillAlpha,e.color=n.hex2rgb(t.fillColor);for(var s,o,a=1/0,h=-(1/0),l=1/0,c=-(1/0),u=0;u<i.length;u+=2)s=i[u],o=i[u+1],a=s<a?s:a,h=s>h?s:h,l=o<l?o:l,c=o>c?o:c;i.push(a,l,h,l,h,c,a,c);var d=i.length/2;for(u=0;u<d;u++)r.push(u)}},r.prototype.buildPoly=function(t,e){var i=t.points;if(!(i.length<6)){var r=e.points,s=e.indices,o=i.length/2,a=n.hex2rgb(t.fillColor),h=t.fillAlpha,l=a[0]*h,u=a[1]*h,d=a[2]*h,p=c(i,null,2);if(!p)return!1;var f=r.length/6,m=0;for(m=0;m<p.length;m+=3)s.push(p[m]+f),s.push(p[m]+f),s.push(p[m+1]+f),s.push(p[m+2]+f),s.push(p[m+2]+f);for(m=0;m<o;m++)r.push(i[2*m],i[2*m+1],l,u,d,h);return!0}}},{"../../const":22,"../../math":32,"../../renderers/webgl/WebGLRenderer":48,"../../renderers/webgl/utils/ObjectRenderer":62,"../../utils":76,"./WebGLGraphicsData":28,earcut:10}],28:[function(t,e,i){function r(t){this.gl=t,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.mode=1,this.alpha=1,this.dirty=!0,this.glPoints=null,this.glIndices=null}r.prototype.constructor=r,e.exports=r,r.prototype.reset=function(){this.points.length=0,this.indices.length=0},r.prototype.upload=function(){var t=this.gl;this.glPoints=new Float32Array(this.points),t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferData(t.ARRAY_BUFFER,this.glPoints,t.STATIC_DRAW),this.glIndices=new Uint16Array(this.indices),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.glIndices,t.STATIC_DRAW),this.dirty=!1},r.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.gl.deleteBuffer(this.buffer),this.gl.deleteBuffer(this.indexBuffer),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null}},{}],29:[function(t,e,i){var r=e.exports=Object.assign(t("./const"),t("./math"),{utils:t("./utils"),math:t("./math"),ticker:t("./ticker"),DisplayObject:t("./display/DisplayObject"),Container:t("./display/Container"),Sprite:t("./sprites/Sprite"),ParticleContainer:t("./particles/ParticleContainer"),SpriteRenderer:t("./sprites/webgl/SpriteRenderer"),ParticleRenderer:t("./particles/webgl/ParticleRenderer"),Text:t("./text/Text"),Graphics:t("./graphics/Graphics"),GraphicsData:t("./graphics/GraphicsData"),GraphicsRenderer:t("./graphics/webgl/GraphicsRenderer"),Texture:t("./textures/Texture"),BaseTexture:t("./textures/BaseTexture"),RenderTexture:t("./textures/RenderTexture"),VideoBaseTexture:t("./textures/VideoBaseTexture"),TextureUvs:t("./textures/TextureUvs"),CanvasRenderer:t("./renderers/canvas/CanvasRenderer"),CanvasGraphics:t("./renderers/canvas/utils/CanvasGraphics"),CanvasBuffer:t("./renderers/canvas/utils/CanvasBuffer"),WebGLRenderer:t("./renderers/webgl/WebGLRenderer"),ShaderManager:t("./renderers/webgl/managers/ShaderManager"),Shader:t("./renderers/webgl/shaders/Shader"),ObjectRenderer:t("./renderers/webgl/utils/ObjectRenderer"),RenderTarget:t("./renderers/webgl/utils/RenderTarget"),AbstractFilter:t("./renderers/webgl/filters/AbstractFilter"),autoDetectRenderer:function(t,e,i,n){return t=t||800,e=e||600,!n&&r.utils.isWebGLSupported()?new r.WebGLRenderer(t,e,i):new r.CanvasRenderer(t,e,i)}})},{"./const":22,"./display/Container":23,"./display/DisplayObject":24,"./graphics/Graphics":25,"./graphics/GraphicsData":26,"./graphics/webgl/GraphicsRenderer":27,"./math":32,"./particles/ParticleContainer":38,"./particles/webgl/ParticleRenderer":40,"./renderers/canvas/CanvasRenderer":43,"./renderers/canvas/utils/CanvasBuffer":44,"./renderers/canvas/utils/CanvasGraphics":45,"./renderers/webgl/WebGLRenderer":48,"./renderers/webgl/filters/AbstractFilter":49,"./renderers/webgl/managers/ShaderManager":55,"./renderers/webgl/shaders/Shader":60,"./renderers/webgl/utils/ObjectRenderer":62,"./renderers/webgl/utils/RenderTarget":64,"./sprites/Sprite":66,"./sprites/webgl/SpriteRenderer":67,"./text/Text":68,"./textures/BaseTexture":69,"./textures/RenderTexture":70,"./textures/Texture":71,"./textures/TextureUvs":72,"./textures/VideoBaseTexture":73,"./ticker":75,"./utils":76}],30:[function(t,e,i){function r(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0}var n=t("./Point");r.prototype.constructor=r,e.exports=r,r.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},r.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},r.prototype.apply=function(t,e){e=e||new n;var i=t.x,r=t.y;return e.x=this.a*i+this.c*r+this.tx,e.y=this.b*i+this.d*r+this.ty,e},r.prototype.applyInverse=function(t,e){e=e||new n;var i=1/(this.a*this.d+this.c*-this.b),r=t.x,s=t.y;return e.x=this.d*i*r+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*s+-this.b*i*r+(-this.ty*this.a+this.tx*this.b)*i,e},r.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},r.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},r.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),r=this.a,n=this.c,s=this.tx;return this.a=r*e-this.b*i,this.b=r*i+this.b*e,this.c=n*e-this.d*i,this.d=n*i+this.d*e,this.tx=s*e-this.ty*i,this.ty=s*i+this.ty*e,this},r.prototype.append=function(t){var e=this.a,i=this.b,r=this.c,n=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*i+t.b*n,this.c=t.c*e+t.d*r,this.d=t.c*i+t.d*n,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*i+t.ty*n+this.ty,this},r.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var i=this.a,r=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},r.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,r=this.d,n=this.tx,s=t*r-e*i;return this.a=r/s,this.b=-e/s,this.c=-i/s,this.d=t/s,this.tx=(i*this.ty-r*n)/s,this.ty=-(t*this.ty-e*n)/s,this},r.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},r.prototype.clone=function(){var t=new r;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.IDENTITY=new r,r.TEMP_MATRIX=new r},{"./Point":31}],31:[function(t,e,i){function r(t,e){this.x=t||0,this.y=e||0}r.prototype.constructor=r,e.exports=r,r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.copy=function(t){this.set(t.x,t.y)},r.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},r.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)}},{}],32:[function(t,e,i){e.exports={Point:t("./Point"),Matrix:t("./Matrix"),Circle:t("./shapes/Circle"),Ellipse:t("./shapes/Ellipse"),Polygon:t("./shapes/Polygon"),Rectangle:t("./shapes/Rectangle"),RoundedRectangle:t("./shapes/RoundedRectangle")}},{"./Matrix":30,"./Point":31,"./shapes/Circle":33,"./shapes/Ellipse":34,"./shapes/Polygon":35,"./shapes/Rectangle":36,"./shapes/RoundedRectangle":37}],33:[function(t,e,i){function r(t,e,i){this.x=t||0,this.y=e||0,this.radius=i||0,this.type=s.SHAPES.CIRC}var n=t("./Rectangle"),s=t("../../const");r.prototype.constructor=r,e.exports=r,r.prototype.clone=function(){return new r(this.x,this.y,this.radius)},r.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.x-t,r=this.y-e,n=this.radius*this.radius;return i*=i,r*=r,i+r<=n},r.prototype.getBounds=function(){return new n(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}},{"../../const":22,"./Rectangle":36}],34:[function(t,e,i){function r(t,e,i,r){this.x=t||0,this.y=e||0,this.width=i||0,this.height=r||0,this.type=s.SHAPES.ELIP}var n=t("./Rectangle"),s=t("../../const");r.prototype.constructor=r,e.exports=r,r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,r=(e-this.y)/this.height;return i*=i,r*=r,i+r<=1},r.prototype.getBounds=function(){return new n(this.x-this.width,this.y-this.height,this.width,this.height)}},{"../../const":22,"./Rectangle":36}],35:[function(t,e,i){function r(t){var e=t;if(!Array.isArray(e)){e=new Array(arguments.length);for(var i=0;i<e.length;++i)e[i]=arguments[i]}if(e[0]instanceof n){for(var r=[],o=0,a=e.length;o<a;o++)r.push(e[o].x,e[o].y);e=r}this.closed=!0,this.points=e,this.type=s.SHAPES.POLY}var n=t("../Point"),s=t("../../const");r.prototype.constructor=r,e.exports=r,r.prototype.clone=function(){return new r(this.points.slice())},r.prototype.contains=function(t,e){for(var i=!1,r=this.points.length/2,n=0,s=r-1;n<r;s=n++){var o=this.points[2*n],a=this.points[2*n+1],h=this.points[2*s],l=this.points[2*s+1],c=a>e!=l>e&&t<(h-o)*(e-a)/(l-a)+o;c&&(i=!i)}return i}},{"../../const":22,"../Point":31}],36:[function(t,e,i){function r(t,e,i,r){this.x=t||0,this.y=e||0,this.width=i||0,this.height=r||0,this.type=n.SHAPES.RECT}var n=t("../../const");r.prototype.constructor=r,e.exports=r,r.EMPTY=new r(0,0,0,0),r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)}},{"../../const":22}],37:[function(t,e,i){function r(t,e,i,r,s){this.x=t||0,this.y=e||0,this.width=i||0,this.height=r||0,this.radius=s||20,this.type=n.SHAPES.RREC}var n=t("../../const");r.prototype.constructor=r,e.exports=r,r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height,this.radius)},r.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height)}},{"../../const":22}],38:[function(t,e,i){function r(t,e){n.call(this),this._properties=[!1,!0,!1,!1,!1],this._size=t||15e3,this._buffers=null,this._updateStatic=!1,this.interactiveChildren=!1,this.blendMode=s.BLEND_MODES.NORMAL,this.roundPixels=!0,this.setProperties(e)}var n=t("../display/Container"),s=t("../const");r.prototype=Object.create(n.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.setProperties=function(t){t&&(this._properties[0]="scale"in t?!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="alpha"in t?!!t.alpha:this._properties[4])},r.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},r.prototype.renderWebGL=function(t){this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(t.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},r.prototype.addChildAt=function(t,e){if(t===this)return t;if(e>=0&&e<=this.children.length)return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),this._updateStatic=!0,t;throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length)},r.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,this.children.splice(t,1),this._updateStatic=!0,e},r.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var e=t.context,i=this.worldTransform,r=!0,n=0,s=0,o=0,a=0;e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var h=0;h<this.children.length;++h){var l=this.children[h];if(l.visible){var c=l.texture.frame;if(e.globalAlpha=this.worldAlpha*l.alpha,l.rotation%(2*Math.PI)===0)r&&(e.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),r=!1),n=l.anchor.x*(-c.width*l.scale.x)+l.position.x+.5,s=l.anchor.y*(-c.height*l.scale.y)+l.position.y+.5,o=c.width*l.scale.x,a=c.height*l.scale.y;else{r||(r=!0),l.displayObjectUpdateTransform();var u=l.worldTransform;t.roundPixels?e.setTransform(u.a,u.b,u.c,u.d,0|u.tx,0|u.ty):e.setTransform(u.a,u.b,u.c,u.d,u.tx,u.ty),n=l.anchor.x*-c.width+.5,s=l.anchor.y*-c.height+.5,o=c.width,a=c.height}e.drawImage(l.texture.baseTexture.source,c.x,c.y,c.width,c.height,n,s,o,a)}}}},r.prototype.destroy=function(){if(n.prototype.destroy.apply(this,arguments),this._buffers)for(var t=0;t<this._buffers.length;++t)this._buffers.destroy();this._properties=null,this._buffers=null}},{"../const":22,"../display/Container":23}],39:[function(t,e,i){function r(t,e,i){this.gl=t,this.vertSize=2,this.vertByteSize=4*this.vertSize,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var r=0;r<e.length;r++){var n=e[r];n.dynamic?this.dynamicProperties.push(n):this.staticProperties.push(n)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.initBuffers()}r.prototype.constructor=r,e.exports=r,r.prototype.initBuffers=function(){var t,e,i=this.gl,r=0;for(this.dynamicStride=0,t=0;t<this.dynamicProperties.length;t++)e=this.dynamicProperties[t],e.offset=r,r+=e.size,this.dynamicStride+=e.size;this.dynamicData=new Float32Array(this.size*this.dynamicStride*4),this.dynamicBuffer=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,this.dynamicBuffer),i.bufferData(i.ARRAY_BUFFER,this.dynamicData,i.DYNAMIC_DRAW);var n=0;for(this.staticStride=0,t=0;t<this.staticProperties.length;t++)e=this.staticProperties[t],e.offset=n,n+=e.size,this.staticStride+=e.size;this.staticData=new Float32Array(this.size*this.staticStride*4),this.staticBuffer=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,this.staticBuffer),i.bufferData(i.ARRAY_BUFFER,this.staticData,i.DYNAMIC_DRAW)},r.prototype.uploadDynamic=function(t,e,i){for(var r=this.gl,n=0;n<this.dynamicProperties.length;n++){var s=this.dynamicProperties[n];s.uploadFunction(t,e,i,this.dynamicData,this.dynamicStride,s.offset)}r.bindBuffer(r.ARRAY_BUFFER,this.dynamicBuffer),r.bufferSubData(r.ARRAY_BUFFER,0,this.dynamicData)},r.prototype.uploadStatic=function(t,e,i){for(var r=this.gl,n=0;n<this.staticProperties.length;n++){var s=this.staticProperties[n];s.uploadFunction(t,e,i,this.staticData,this.staticStride,s.offset)}r.bindBuffer(r.ARRAY_BUFFER,this.staticBuffer),r.bufferSubData(r.ARRAY_BUFFER,0,this.staticData)},r.prototype.bind=function(){var t,e,i=this.gl;for(i.bindBuffer(i.ARRAY_BUFFER,this.dynamicBuffer),t=0;t<this.dynamicProperties.length;t++)e=this.dynamicProperties[t],i.vertexAttribPointer(e.attribute,e.size,i.FLOAT,!1,4*this.dynamicStride,4*e.offset);for(i.bindBuffer(i.ARRAY_BUFFER,this.staticBuffer),t=0;t<this.staticProperties.length;t++)e=this.staticProperties[t],i.vertexAttribPointer(e.attribute,e.size,i.FLOAT,!1,4*this.staticStride,4*e.offset)},r.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.gl.deleteBuffer(this.dynamicBuffer),this.staticProperties=null,this.staticData=null,this.gl.deleteBuffer(this.staticBuffer)}},{}],40:[function(t,e,i){function r(t){n.call(this,t),this.size=15e3;var e=6*this.size;this.indices=new Uint16Array(e);for(var i=0,r=0;i<e;i+=6,r+=4)this.indices[i+0]=r+0,this.indices[i+1]=r+1,this.indices[i+2]=r+2,this.indices[i+3]=r+0,this.indices[i+4]=r+2,this.indices[i+5]=r+3;this.shader=null,this.indexBuffer=null,this.properties=null,this.tempMatrix=new h.Matrix}var n=t("../../renderers/webgl/utils/ObjectRenderer"),s=t("../../renderers/webgl/WebGLRenderer"),o=t("./ParticleShader"),a=t("./ParticleBuffer"),h=t("../../math");r.prototype=Object.create(n.prototype),r.prototype.constructor=r,e.exports=r,s.registerPlugin("particle",r),r.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new o(this.renderer.shaderManager),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),this.properties=[{attribute:this.shader.attributes.aVertexPosition,dynamic:!1,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,dynamic:!0,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,dynamic:!1,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,dynamic:!1,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,dynamic:!1,size:1,uploadFunction:this.uploadAlpha,offset:0}]},r.prototype.start=function(){var t=this.renderer.gl;t.activeTexture(t.TEXTURE0),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.shader;this.renderer.shaderManager.setShader(e)},r.prototype.render=function(t){var e=t.children,i=e.length,r=t._size;if(0!==i){i>r&&(i=r),t._buffers||(t._buffers=this.generateBuffers(t)),this.renderer.blendModeManager.setBlendMode(t.blendMode);var n=this.renderer.gl,s=t.worldTransform.copy(this.tempMatrix);s.prepend(this.renderer.currentRenderTarget.projectionMatrix),n.uniformMatrix3fv(this.shader.uniforms.projectionMatrix._location,!1,s.toArray(!0)),n.uniform1f(this.shader.uniforms.uAlpha._location,t.worldAlpha);var o=t._updateStatic,a=e[0]._texture.baseTexture;if(a._glTextures[n.id])n.bindTexture(n.TEXTURE_2D,a._glTextures[n.id]);else{if(!this.renderer.updateTexture(a))return;this.properties[0].dynamic&&this.properties[3].dynamic||(o=!0)}for(var h=0,l=0;l<i;l+=this.size){var c=i-l;c>this.size&&(c=this.size);var u=t._buffers[h++];u.uploadDynamic(e,l,c),o&&u.uploadStatic(e,l,c),u.bind(this.shader),n.drawElements(n.TRIANGLES,6*c,n.UNSIGNED_SHORT,0),this.renderer.drawCount++}t._updateStatic=!1}},r.prototype.generateBuffers=function(t){var e,i=this.renderer.gl,r=[],n=t._size;for(e=0;e<t._properties.length;e++)this.properties[e].dynamic=t._properties[e];for(e=0;e<n;e+=this.size)r.push(new a(i,this.properties,this.size,this.shader));return r},r.prototype.uploadVertices=function(t,e,i,r,n,s){for(var o,a,h,l,c,u,d,p,f,m=0;m<i;m++)o=t[e+m],a=o._texture,l=o.scale.x,c=o.scale.y,a.trim?(h=a.trim,d=h.x-o.anchor.x*h.width,u=d+a.crop.width,f=h.y-o.anchor.y*h.height,p=f+a.crop.height):(u=a._frame.width*(1-o.anchor.x),d=a._frame.width*-o.anchor.x,p=a._frame.height*(1-o.anchor.y),f=a._frame.height*-o.anchor.y),r[s]=d*l,r[s+1]=f*c,r[s+n]=u*l,r[s+n+1]=f*c,r[s+2*n]=u*l,r[s+2*n+1]=p*c,r[s+3*n]=d*l,r[s+3*n+1]=p*c,s+=4*n},r.prototype.uploadPosition=function(t,e,i,r,n,s){for(var o=0;o<i;o++){var a=t[e+o].position;r[s]=a.x,r[s+1]=a.y,r[s+n]=a.x,r[s+n+1]=a.y,r[s+2*n]=a.x,r[s+2*n+1]=a.y,r[s+3*n]=a.x,r[s+3*n+1]=a.y,s+=4*n}},r.prototype.uploadRotation=function(t,e,i,r,n,s){for(var o=0;o<i;o++){var a=t[e+o].rotation;r[s]=a,r[s+n]=a,r[s+2*n]=a,r[s+3*n]=a,s+=4*n}},r.prototype.uploadUvs=function(t,e,i,r,n,s){for(var o=0;o<i;o++){var a=t[e+o]._texture._uvs;a?(r[s]=a.x0,r[s+1]=a.y0,r[s+n]=a.x1,r[s+n+1]=a.y1,r[s+2*n]=a.x2,r[s+2*n+1]=a.y2,r[s+3*n]=a.x3,r[s+3*n+1]=a.y3,s+=4*n):(r[s]=0,r[s+1]=0,r[s+n]=0,r[s+n+1]=0,r[s+2*n]=0,r[s+2*n+1]=0,r[s+3*n]=0,r[s+3*n+1]=0,s+=4*n)}},r.prototype.uploadAlpha=function(t,e,i,r,n,s){for(var o=0;o<i;o++){var a=t[e+o].alpha;r[s]=a,r[s+n]=a,r[s+2*n]=a,r[s+3*n]=a,s+=4*n}},r.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),n.prototype.destroy.apply(this,arguments),this.shader.destroy(),this.indices=null,this.tempMatrix=null}},{"../../math":32,"../../renderers/webgl/WebGLRenderer":48,"../../renderers/webgl/utils/ObjectRenderer":62,"./ParticleBuffer":39,"./ParticleShader":41}],41:[function(t,e,i){function r(t){n.call(this,t,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying float vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","uniform float uAlpha;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor * uAlpha ;","}"].join("\n"),{uAlpha:{type:"1f",value:1}},{aPositionCoord:0,aRotation:0})}var n=t("../../renderers/webgl/shaders/TextureShader");r.prototype=Object.create(n.prototype),r.prototype.constructor=r,e.exports=r},{"../../renderers/webgl/shaders/TextureShader":61}],42:[function(t,e,i){function r(t,e,i,r){if(a.call(this),n.sayHello(t),r)for(var h in o.DEFAULT_RENDER_OPTIONS)"undefined"==typeof r[h]&&(r[h]=o.DEFAULT_RENDER_OPTIONS[h]);else r=o.DEFAULT_RENDER_OPTIONS;this.type=o.RENDERER_TYPE.UNKNOWN,this.width=e||800,this.height=i||600,this.view=r.view||document.createElement("canvas"),this.resolution=r.resolution,this.transparent=r.transparent,this.autoResize=r.autoResize||!1,this.blendModes=null,this.preserveDrawingBuffer=r.preserveDrawingBuffer,this.clearBeforeRender=r.clearBeforeRender,this._backgroundColor=0,this._backgroundColorRgb=[0,0,0],this._backgroundColorString="#000000",this.backgroundColor=r.backgroundColor||this._backgroundColor,this._tempDisplayObjectParent={worldTransform:new s.Matrix,worldAlpha:1,children:[]},this._lastObjectRendered=this._tempDisplayObjectParent}var n=t("../utils"),s=t("../math"),o=t("../const"),a=t("eventemitter3");r.prototype=Object.create(a.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{backgroundColor:{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=n.hex2string(t),n.hex2rgb(t,this._backgroundColorRgb)}}}),r.prototype.resize=function(t,e){this.width=t*this.resolution,this.height=e*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},r.prototype.destroy=function(t){t&&this.view.parent&&this.view.parent.removeChild(this.view),this.type=o.RENDERER_TYPE.UNKNOWN,this.width=0,this.height=0,this.view=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this._backgroundColor=0,this._backgroundColorRgb=null,this._backgroundColorString=null}},{"../const":22,"../math":32,"../utils":76,eventemitter3:11}],43:[function(t,e,i){function r(t,e,i){n.call(this,"Canvas",t,e,i),this.type=h.RENDERER_TYPE.CANVAS,this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.maskManager=new s,this.roundPixels=!1,this.currentScaleMode=h.SCALE_MODES.DEFAULT,this.currentBlendMode=h.BLEND_MODES.NORMAL,this.smoothProperty="imageSmoothingEnabled",this.context.imageSmoothingEnabled||(this.context.webkitImageSmoothingEnabled?this.smoothProperty="webkitImageSmoothingEnabled":this.context.mozImageSmoothingEnabled?this.smoothProperty="mozImageSmoothingEnabled":this.context.oImageSmoothingEnabled?this.smoothProperty="oImageSmoothingEnabled":this.context.msImageSmoothingEnabled&&(this.smoothProperty="msImageSmoothingEnabled")),this.initPlugins(),this._mapBlendModes(),this._tempDisplayObjectParent={worldTransform:new a.Matrix,worldAlpha:1},this.resize(t,e)}var n=t("../SystemRenderer"),s=t("./utils/CanvasMaskManager"),o=t("../../utils"),a=t("../../math"),h=t("../../const");r.prototype=Object.create(n.prototype),r.prototype.constructor=r,e.exports=r,o.pluginTarget.mixin(r),r.prototype.render=function(t){var e=t.parent;this._lastObjectRendered=t,t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=e,this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.currentBlendMode=h.BLEND_MODES.NORMAL,this.context.globalCompositeOperation=this.blendModes[h.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width,this.height):(this.context.fillStyle=this._backgroundColorString,this.context.fillRect(0,0,this.width,this.height))),this.renderDisplayObject(t,this.context)},r.prototype.destroy=function(t){this.destroyPlugins(),n.prototype.destroy.call(this,t),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.roundPixels=!1,this.currentScaleMode=0,this.currentBlendMode=0,this.smoothProperty=null},r.prototype.renderDisplayObject=function(t,e){var i=this.context;this.context=e,t.renderCanvas(this),this.context=i},r.prototype._mapBlendModes=function(){this.blendModes||(this.blendModes={},o.canUseNewCanvasBlendModes()?(this.blendModes[h.BLEND_MODES.NORMAL]="source-over",this.blendModes[h.BLEND_MODES.ADD]="lighter",this.blendModes[h.BLEND_MODES.MULTIPLY]="multiply",this.blendModes[h.BLEND_MODES.SCREEN]="screen",this.blendModes[h.BLEND_MODES.OVERLAY]="overlay",this.blendModes[h.BLEND_MODES.DARKEN]="darken",this.blendModes[h.BLEND_MODES.LIGHTEN]="lighten",this.blendModes[h.BLEND_MODES.COLOR_DODGE]="color-dodge",this.blendModes[h.BLEND_MODES.COLOR_BURN]="color-burn",this.blendModes[h.BLEND_MODES.HARD_LIGHT]="hard-light",this.blendModes[h.BLEND_MODES.SOFT_LIGHT]="soft-light",this.blendModes[h.BLEND_MODES.DIFFERENCE]="difference",this.blendModes[h.BLEND_MODES.EXCLUSION]="exclusion",this.blendModes[h.BLEND_MODES.HUE]="hue",this.blendModes[h.BLEND_MODES.SATURATION]="saturate",this.blendModes[h.BLEND_MODES.COLOR]="color",this.blendModes[h.BLEND_MODES.LUMINOSITY]="luminosity"):(this.blendModes[h.BLEND_MODES.NORMAL]="source-over",this.blendModes[h.BLEND_MODES.ADD]="lighter",this.blendModes[h.BLEND_MODES.MULTIPLY]="source-over",this.blendModes[h.BLEND_MODES.SCREEN]="source-over",this.blendModes[h.BLEND_MODES.OVERLAY]="source-over",this.blendModes[h.BLEND_MODES.DARKEN]="source-over",this.blendModes[h.BLEND_MODES.LIGHTEN]="source-over",this.blendModes[h.BLEND_MODES.COLOR_DODGE]="source-over",this.blendModes[h.BLEND_MODES.COLOR_BURN]="source-over",this.blendModes[h.BLEND_MODES.HARD_LIGHT]="source-over",this.blendModes[h.BLEND_MODES.SOFT_LIGHT]="source-over",this.blendModes[h.BLEND_MODES.DIFFERENCE]="source-over",this.blendModes[h.BLEND_MODES.EXCLUSION]="source-over",this.blendModes[h.BLEND_MODES.HUE]="source-over",this.blendModes[h.BLEND_MODES.SATURATION]="source-over",this.blendModes[h.BLEND_MODES.COLOR]="source-over",this.blendModes[h.BLEND_MODES.LUMINOSITY]="source-over"))}},{"../../const":22,"../../math":32,"../../utils":76,"../SystemRenderer":42,"./utils/CanvasMaskManager":46}],44:[function(t,e,i){function r(t,e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=t,this.canvas.height=e}r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{width:{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},height:{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}}),r.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},r.prototype.resize=function(t,e){this.canvas.width=t,this.canvas.height=e},r.prototype.destroy=function(){this.context=null,this.canvas=null}},{}],45:[function(t,e,i){var r=t("../../../const"),n={};e.exports=n,n.renderGraphics=function(t,e){var i=t.worldAlpha;t.dirty&&(this.updateGraphicsTint(t),t.dirty=!1);for(var n=0;n<t.graphicsData.length;n++){var s=t.graphicsData[n],o=s.shape,a=s._fillTint,h=s._lineTint;if(e.lineWidth=s.lineWidth,s.type===r.SHAPES.POLY){e.beginPath();var l=o.points;e.moveTo(l[0],l[1]);for(var c=1;c<l.length/2;c++)e.lineTo(l[2*c],l[2*c+1]);o.closed&&e.lineTo(l[0],l[1]),l[0]===l[l.length-2]&&l[1]===l[l.length-1]&&e.closePath(),s.fill&&(e.globalAlpha=s.fillAlpha*i,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),s.lineWidth&&(e.globalAlpha=s.lineAlpha*i,e.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),e.stroke())}else if(s.type===r.SHAPES.RECT)(s.fillColor||0===s.fillColor)&&(e.globalAlpha=s.fillAlpha*i,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fillRect(o.x,o.y,o.width,o.height)),s.lineWidth&&(e.globalAlpha=s.lineAlpha*i,e.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),e.strokeRect(o.x,o.y,o.width,o.height));else if(s.type===r.SHAPES.CIRC)e.beginPath(),e.arc(o.x,o.y,o.radius,0,2*Math.PI),e.closePath(),s.fill&&(e.globalAlpha=s.fillAlpha*i,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),s.lineWidth&&(e.globalAlpha=s.lineAlpha*i,e.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),e.stroke());else if(s.type===r.SHAPES.ELIP){var u=2*o.width,d=2*o.height,p=o.x-u/2,f=o.y-d/2;e.beginPath();var m=.5522848,g=u/2*m,v=d/2*m,_=p+u,y=f+d,x=p+u/2,w=f+d/2;e.moveTo(p,w),e.bezierCurveTo(p,w-v,x-g,f,x,f),e.bezierCurveTo(x+g,f,_,w-v,_,w),e.bezierCurveTo(_,w+v,x+g,y,x,y),e.bezierCurveTo(x-g,y,p,w+v,p,w),e.closePath(),s.fill&&(e.globalAlpha=s.fillAlpha*i,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),s.lineWidth&&(e.globalAlpha=s.lineAlpha*i,e.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),e.stroke())}else if(s.type===r.SHAPES.RREC){var b=o.x,T=o.y,S=o.width,A=o.height,C=o.radius,E=Math.min(S,A)/2|0;C=C>E?E:C,e.beginPath(),e.moveTo(b,T+C),e.lineTo(b,T+A-C),e.quadraticCurveTo(b,T+A,b+C,T+A),e.lineTo(b+S-C,T+A),e.quadraticCurveTo(b+S,T+A,b+S,T+A-C),e.lineTo(b+S,T+C),e.quadraticCurveTo(b+S,T,b+S-C,T),e.lineTo(b+C,T),e.quadraticCurveTo(b,T,b,T+C),e.closePath(),(s.fillColor||0===s.fillColor)&&(e.globalAlpha=s.fillAlpha*i,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),s.lineWidth&&(e.globalAlpha=s.lineAlpha*i,e.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),e.stroke())}}},n.renderGraphicsMask=function(t,e){var i=t.graphicsData.length;if(0!==i){e.beginPath();for(var n=0;n<i;n++){var s=t.graphicsData[n],o=s.shape;if(s.type===r.SHAPES.POLY){var a=o.points;e.moveTo(a[0],a[1]);for(var h=1;h<a.length/2;h++)e.lineTo(a[2*h],a[2*h+1]);a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&e.closePath()}else if(s.type===r.SHAPES.RECT)e.rect(o.x,o.y,o.width,o.height),
e.closePath();else if(s.type===r.SHAPES.CIRC)e.arc(o.x,o.y,o.radius,0,2*Math.PI),e.closePath();else if(s.type===r.SHAPES.ELIP){var l=2*o.width,c=2*o.height,u=o.x-l/2,d=o.y-c/2,p=.5522848,f=l/2*p,m=c/2*p,g=u+l,v=d+c,_=u+l/2,y=d+c/2;e.moveTo(u,y),e.bezierCurveTo(u,y-m,_-f,d,_,d),e.bezierCurveTo(_+f,d,g,y-m,g,y),e.bezierCurveTo(g,y+m,_+f,v,_,v),e.bezierCurveTo(_-f,v,u,y+m,u,y),e.closePath()}else if(s.type===r.SHAPES.RREC){var x=o.x,w=o.y,b=o.width,T=o.height,S=o.radius,A=Math.min(b,T)/2|0;S=S>A?A:S,e.moveTo(x,w+S),e.lineTo(x,w+T-S),e.quadraticCurveTo(x,w+T,x+S,w+T),e.lineTo(x+b-S,w+T),e.quadraticCurveTo(x+b,w+T,x+b,w+T-S),e.lineTo(x+b,w+S),e.quadraticCurveTo(x+b,w,x+b-S,w),e.lineTo(x+S,w),e.quadraticCurveTo(x,w,x,w+S),e.closePath()}}}},n.updateGraphicsTint=function(t){if(16777215!==t.tint)for(var e=(t.tint>>16&255)/255,i=(t.tint>>8&255)/255,r=(255&t.tint)/255,n=0;n<t.graphicsData.length;n++){var s=t.graphicsData[n],o=0|s.fillColor,a=0|s.lineColor;s._fillTint=((o>>16&255)/255*e*255<<16)+((o>>8&255)/255*i*255<<8)+(255&o)/255*r*255,s._lineTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*i*255<<8)+(255&a)/255*r*255}}},{"../../../const":22}],46:[function(t,e,i){function r(){}var n=t("./CanvasGraphics");r.prototype.constructor=r,e.exports=r,r.prototype.pushMask=function(t,e){e.context.save();var i=t.alpha,r=t.worldTransform,s=e.resolution;e.context.setTransform(r.a*s,r.b*s,r.c*s,r.d*s,r.tx*s,r.ty*s),t.texture||(n.renderGraphicsMask(t,e.context),e.context.clip()),t.worldAlpha=i},r.prototype.popMask=function(t){t.context.restore()},r.prototype.destroy=function(){}},{"./CanvasGraphics":45}],47:[function(t,e,i){var r=t("../../../utils"),n={};e.exports=n,n.getTintedTexture=function(t,e){var i=t.texture;e=n.roundColor(e);var r="#"+("00000"+(0|e).toString(16)).substr(-6);if(i.tintCache=i.tintCache||{},i.tintCache[r])return i.tintCache[r];var s=n.canvas||document.createElement("canvas");if(n.tintMethod(i,e,s),n.convertTintToImage){var o=new Image;o.src=s.toDataURL(),i.tintCache[r]=o}else i.tintCache[r]=s,n.canvas=null;return s},n.tintWithMultiply=function(t,e,i){var r=i.getContext("2d"),n=t.crop;i.width=n.width,i.height=n.height,r.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),r.fillRect(0,0,n.width,n.height),r.globalCompositeOperation="multiply",r.drawImage(t.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),r.globalCompositeOperation="destination-atop",r.drawImage(t.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height)},n.tintWithOverlay=function(t,e,i){var r=i.getContext("2d"),n=t.crop;i.width=n.width,i.height=n.height,r.globalCompositeOperation="copy",r.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),r.fillRect(0,0,n.width,n.height),r.globalCompositeOperation="destination-atop",r.drawImage(t.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height)},n.tintWithPerPixel=function(t,e,i){var n=i.getContext("2d"),s=t.crop;i.width=s.width,i.height=s.height,n.globalCompositeOperation="copy",n.drawImage(t.baseTexture.source,s.x,s.y,s.width,s.height,0,0,s.width,s.height);for(var o=r.hex2rgb(e),a=o[0],h=o[1],l=o[2],c=n.getImageData(0,0,s.width,s.height),u=c.data,d=0;d<u.length;d+=4)u[d+0]*=a,u[d+1]*=h,u[d+2]*=l;n.putImageData(c,0,0)},n.roundColor=function(t){var e=n.cacheStepsPerColorChannel,i=r.hex2rgb(t);return i[0]=Math.min(255,i[0]/e*e),i[1]=Math.min(255,i[1]/e*e),i[2]=Math.min(255,i[2]/e*e),r.rgb2hex(i)},n.cacheStepsPerColorChannel=8,n.convertTintToImage=!1,n.canUseMultiply=r.canUseNewCanvasBlendModes(),n.tintMethod=n.canUseMultiply?n.tintWithMultiply:n.tintWithPerPixel},{"../../../utils":76}],48:[function(t,e,i){function r(t,e,i){i=i||{},n.call(this,"WebGL",t,e,i),this.type=f.RENDERER_TYPE.WEBGL,this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),this.view.addEventListener("webglcontextlost",this.handleContextLost,!1),this.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1),this._useFXAA=!!i.forceFXAA&&i.antialias,this._FXAAFilter=null,this._contextOptions={alpha:this.transparent,antialias:i.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:i.preserveDrawingBuffer},this.drawCount=0,this.shaderManager=new s(this),this.maskManager=new o(this),this.stencilManager=new a(this),this.filterManager=new h(this),this.blendModeManager=new l(this),this.currentRenderTarget=null,this.currentRenderer=new u(this),this.initPlugins(),this._createContext(),this._initContext(),this._mapGlModes(),this._renderTargetStack=[]}var n=t("../SystemRenderer"),s=t("./managers/ShaderManager"),o=t("./managers/MaskManager"),a=t("./managers/StencilManager"),h=t("./managers/FilterManager"),l=t("./managers/BlendModeManager"),c=t("./utils/RenderTarget"),u=t("./utils/ObjectRenderer"),d=t("./filters/FXAAFilter"),p=t("../../utils"),f=t("../../const");r.prototype=Object.create(n.prototype),r.prototype.constructor=r,e.exports=r,p.pluginTarget.mixin(r),r.glContextId=0,r.prototype._createContext=function(){var t=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);if(this.gl=t,!t)throw new Error("This browser does not support webGL. Try using the canvas renderer");this.glContextId=r.glContextId++,t.id=this.glContextId,t.renderer=this},r.prototype._initContext=function(){var t=this.gl;t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),this.renderTarget=new c(t,this.width,this.height,null,this.resolution,(!0)),this.setRenderTarget(this.renderTarget),this.emit("context",t),this.resize(this.width,this.height),this._useFXAA||(this._useFXAA=this._contextOptions.antialias&&!t.getContextAttributes().antialias),this._useFXAA&&(window.console.warn("FXAA antialiasing being used instead of native antialiasing"),this._FXAAFilter=[new d])},r.prototype.render=function(t){if(!this.gl.isContextLost()){this.drawCount=0,this._lastObjectRendered=t,this._useFXAA&&(this._FXAAFilter[0].uniforms.resolution.value.x=this.width,this._FXAAFilter[0].uniforms.resolution.value.y=this.height,t.filterArea=this.renderTarget.size,t.filters=this._FXAAFilter);var e=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=e;var i=this.gl;this.setRenderTarget(this.renderTarget),this.clearBeforeRender&&(this.transparent?i.clearColor(0,0,0,0):i.clearColor(this._backgroundColorRgb[0],this._backgroundColorRgb[1],this._backgroundColorRgb[2],1),i.clear(i.COLOR_BUFFER_BIT)),this.renderDisplayObject(t,this.renderTarget)}},r.prototype.renderDisplayObject=function(t,e,i){this.setRenderTarget(e),i&&e.clear(),this.filterManager.setFilterStack(e.filterStack),t.renderWebGL(this),this.currentRenderer.flush()},r.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},r.prototype.setRenderTarget=function(t){this.currentRenderTarget!==t&&(this.currentRenderTarget=t,this.currentRenderTarget.activate(),this.stencilManager.setMaskStack(t.stencilMaskStack))},r.prototype.resize=function(t,e){n.prototype.resize.call(this,t,e),this.filterManager.resize(t,e),this.renderTarget.resize(t,e),this.currentRenderTarget===this.renderTarget&&(this.renderTarget.activate(),this.gl.viewport(0,0,this.width,this.height))},r.prototype.updateTexture=function(t){if(t=t.baseTexture||t,t.hasLoaded){var e=this.gl;return t._glTextures[e.id]||(t._glTextures[e.id]=e.createTexture(),t.on("update",this.updateTexture,this),t.on("dispose",this.destroyTexture,this)),e.bindTexture(e.TEXTURE_2D,t._glTextures[e.id]),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultipliedAlpha),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t.scaleMode===f.SCALE_MODES.LINEAR?e.LINEAR:e.NEAREST),t.mipmap&&t.isPowerOfTwo?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.scaleMode===f.SCALE_MODES.LINEAR?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST),e.generateMipmap(e.TEXTURE_2D)):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.scaleMode===f.SCALE_MODES.LINEAR?e.LINEAR:e.NEAREST),t.isPowerOfTwo?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),t._glTextures[e.id]}},r.prototype.destroyTexture=function(t){t=t.baseTexture||t,t.hasLoaded&&t._glTextures[this.gl.id]&&this.gl.deleteTexture(t._glTextures[this.gl.id])},r.prototype.handleContextLost=function(t){t.preventDefault()},r.prototype.handleContextRestored=function(){this._initContext();for(var t in p.BaseTextureCache)p.BaseTextureCache[t]._glTextures.length=0},r.prototype.destroy=function(t){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),n.prototype.destroy.call(this,t),this.uuid=0,this.shaderManager.destroy(),this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.shaderManager=null,this.maskManager=null,this.filterManager=null,this.blendModeManager=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.drawCount=0,this.gl=null},r.prototype._mapGlModes=function(){var t=this.gl;this.blendModes||(this.blendModes={},this.blendModes[f.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.ADD]=[t.SRC_ALPHA,t.DST_ALPHA],this.blendModes[f.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.SCREEN]=[t.SRC_ALPHA,t.ONE],this.blendModes[f.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA]),this.drawModes||(this.drawModes={},this.drawModes[f.DRAW_MODES.POINTS]=t.POINTS,this.drawModes[f.DRAW_MODES.LINES]=t.LINES,this.drawModes[f.DRAW_MODES.LINE_LOOP]=t.LINE_LOOP,this.drawModes[f.DRAW_MODES.LINE_STRIP]=t.LINE_STRIP,this.drawModes[f.DRAW_MODES.TRIANGLES]=t.TRIANGLES,this.drawModes[f.DRAW_MODES.TRIANGLE_STRIP]=t.TRIANGLE_STRIP,this.drawModes[f.DRAW_MODES.TRIANGLE_FAN]=t.TRIANGLE_FAN)}},{"../../const":22,"../../utils":76,"../SystemRenderer":42,"./filters/FXAAFilter":50,"./managers/BlendModeManager":52,"./managers/FilterManager":53,"./managers/MaskManager":54,"./managers/ShaderManager":55,"./managers/StencilManager":56,"./utils/ObjectRenderer":62,"./utils/RenderTarget":64}],49:[function(t,e,i){function r(t,e,i){this.shaders=[],this.padding=0,this.uniforms=i||{},this.vertexSrc=t||n.defaultVertexSrc,this.fragmentSrc=e||n.defaultFragmentSrc}var n=t("../shaders/TextureShader");r.prototype.constructor=r,e.exports=r,r.prototype.getShader=function(t){var e=t.gl,i=this.shaders[e.id];return i||(i=new n(t.shaderManager,this.vertexSrc,this.fragmentSrc,this.uniforms,this.attributes),this.shaders[e.id]=i),i},r.prototype.applyFilter=function(t,e,i,r){var n=this.getShader(t);t.filterManager.applyFilter(n,e,i,r)},r.prototype.syncUniform=function(t){for(var e=0,i=this.shaders.length;e<i;++e)this.shaders[e].syncUniform(t)}},{"../shaders/TextureShader":61}],50:[function(t,e,i){function r(){n.call(this,"\nprecision mediump float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform vec2 resolution;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvarying vec2 vResolution;\n\n//texcoords computed in vertex step\n//to avoid dependent texture reads\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n            out vec2 v_rgbNW, out vec2 v_rgbNE,\n            out vec2 v_rgbSW, out vec2 v_rgbSE,\n            out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n   vResolution = resolution;\n\n   //compute the texture coords and send them to varyings\n   texcoords(aTextureCoord * resolution, resolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'precision lowp float;\n\n\n/**\nBasic FXAA implementation based on the code on geeks3d.com with the\nmodification that the texture2DLod stuff was removed since it\'s\nunsupported by WebGL.\n\n--\n\nFrom:\nhttps://github.com/mitsuhiko/webgl-meincraft\n\nCopyright (c) 2011 by Armin Ronacher.\n\nSome rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are\nmet:\n\n    * Redistributions of source code must retain the above copyright\n      notice, this list of conditions and the following disclaimer.\n\n    * Redistributions in binary form must reproduce the above\n      copyright notice, this list of conditions and the following\n      disclaimer in the documentation and/or other materials provided\n      with the distribution.\n\n    * The names of the contributors may not be used to endorse or\n      promote products derived from this software without specific\n      prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\nLIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\nA PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\nOWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\nSPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\nLIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\nDATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\nTHEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n#ifndef FXAA_REDUCE_MIN\n    #define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n    #define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n    #define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n            vec2 v_rgbNW, vec2 v_rgbNE,\n            vec2 v_rgbSW, vec2 v_rgbSE,\n            vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n              dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n        texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n        texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vResolution;\n\n//texcoords computed in vertex step\n//to avoid dependent texture reads\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform sampler2D uSampler;\n\n\nvoid main(void){\n\n    gl_FragColor = fxaa(uSampler, vTextureCoord * vResolution, vResolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n}\n',{resolution:{type:"v2",value:{x:1,y:1}}})}var n=t("./AbstractFilter");r.prototype=Object.create(n.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.applyFilter=function(t,e,i){var r=t.filterManager,n=this.getShader(t);r.applyFilter(n,e,i)}},{"./AbstractFilter":49}],51:[function(t,e,i){function r(t){var e=new s.Matrix;n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    original *= (masky.r * masky.a * alpha * clip);\n    gl_FragColor = original;\n}\n",{mask:{type:"sampler2D",value:t._texture},alpha:{type:"f",value:1},otherMatrix:{type:"mat3",value:e.toArray(!0)}}),this.maskSprite=t,this.maskMatrix=e}var n=t("./AbstractFilter"),s=t("../../../math");r.prototype=Object.create(n.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.applyFilter=function(t,e,i){var r=t.filterManager;this.uniforms.mask.value=this.maskSprite._texture,r.calculateMappedMatrix(e.frame,this.maskSprite,this.maskMatrix),this.uniforms.otherMatrix.value=this.maskMatrix.toArray(!0),this.uniforms.alpha.value=this.maskSprite.worldAlpha;var n=this.getShader(t);r.applyFilter(n,e,i)},Object.defineProperties(r.prototype,{map:{get:function(){return this.uniforms.mask.value},set:function(t){this.uniforms.mask.value=t}},offset:{get:function(){return this.uniforms.offset.value},set:function(t){this.uniforms.offset.value=t}}})},{"../../../math":32,"./AbstractFilter":49}],52:[function(t,e,i){function r(t){n.call(this,t),this.currentBlendMode=99999}var n=t("./WebGLManager");r.prototype=Object.create(n.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.setBlendMode=function(t){if(this.currentBlendMode===t)return!1;this.currentBlendMode=t;var e=this.renderer.blendModes[this.currentBlendMode];return this.renderer.gl.blendFunc(e[0],e[1]),!0}},{"./WebGLManager":57}],53:[function(t,e,i){function r(t){n.call(this,t),this.filterStack=[],this.filterStack.push({renderTarget:t.currentRenderTarget,filter:[],bounds:null}),this.texturePool=[],this.textureSize=new h.Rectangle(0,0,t.width,t.height),this.currentFrame=null}var n=t("./WebGLManager"),s=t("../utils/RenderTarget"),o=t("../../../const"),a=t("../utils/Quad"),h=t("../../../math");r.prototype=Object.create(n.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.onContextChange=function(){this.texturePool.length=0;var t=this.renderer.gl;this.quad=new a(t)},r.prototype.setFilterStack=function(t){this.filterStack=t},r.prototype.pushFilter=function(t,e){var i=t.filterArea?t.filterArea.clone():t.getBounds();i.x=0|i.x,i.y=0|i.y,i.width=0|i.width,i.height=0|i.height;var r=0|e[0].padding;if(i.x-=r,i.y-=r,i.width+=2*r,i.height+=2*r,this.renderer.currentRenderTarget.transform){var n=this.renderer.currentRenderTarget.transform;i.x+=n.tx,i.y+=n.ty,this.capFilterArea(i),i.x-=n.tx,i.y-=n.ty}else this.capFilterArea(i);if(i.width>0&&i.height>0){this.currentFrame=i;var s=this.getRenderTarget();this.renderer.setRenderTarget(s),s.clear(),this.filterStack.push({renderTarget:s,filter:e})}else this.filterStack.push({renderTarget:null,filter:e})},r.prototype.popFilter=function(){var t=this.filterStack.pop(),e=this.filterStack[this.filterStack.length-1],i=t.renderTarget;if(t.renderTarget){var r=e.renderTarget,n=this.renderer.gl;this.currentFrame=i.frame,this.quad.map(this.textureSize,i.frame),n.bindBuffer(n.ARRAY_BUFFER,this.quad.vertexBuffer),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.quad.indexBuffer);var s=t.filter;if(n.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aVertexPosition,2,n.FLOAT,!1,0,0),n.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aTextureCoord,2,n.FLOAT,!1,0,32),n.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aColor,4,n.FLOAT,!1,0,64),this.renderer.blendModeManager.setBlendMode(o.BLEND_MODES.NORMAL),1===s.length)s[0].uniforms.dimensions&&(s[0].uniforms.dimensions.value[0]=this.renderer.width,s[0].uniforms.dimensions.value[1]=this.renderer.height,s[0].uniforms.dimensions.value[2]=this.quad.vertices[0],s[0].uniforms.dimensions.value[3]=this.quad.vertices[5]),s[0].applyFilter(this.renderer,i,r),this.returnRenderTarget(i);else{for(var a=i,h=this.getRenderTarget(!0),l=0;l<s.length-1;l++){var c=s[l];c.uniforms.dimensions&&(c.uniforms.dimensions.value[0]=this.renderer.width,c.uniforms.dimensions.value[1]=this.renderer.height,c.uniforms.dimensions.value[2]=this.quad.vertices[0],c.uniforms.dimensions.value[3]=this.quad.vertices[5]),c.applyFilter(this.renderer,a,h);var u=a;a=h,h=u}s[s.length-1].applyFilter(this.renderer,a,r),this.returnRenderTarget(a),this.returnRenderTarget(h)}return t.filter}},r.prototype.getRenderTarget=function(t){var e=this.texturePool.pop()||new s(this.renderer.gl,this.textureSize.width,this.textureSize.height,o.SCALE_MODES.LINEAR,this.renderer.resolution*o.FILTER_RESOLUTION);return e.frame=this.currentFrame,t&&e.clear(!0),e},r.prototype.returnRenderTarget=function(t){this.texturePool.push(t)},r.prototype.applyFilter=function(t,e,i,r){var n=this.renderer.gl;this.renderer.setRenderTarget(i),r&&i.clear(),this.renderer.shaderManager.setShader(t),t.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(!0),t.syncUniforms(),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,e.texture),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0)},r.prototype.calculateMappedMatrix=function(t,e,i){var r=e.worldTransform.copy(h.Matrix.TEMP_MATRIX),n=e._texture.baseTexture,s=i.identity(),o=this.textureSize.height/this.textureSize.width;s.translate(t.x/this.textureSize.width,t.y/this.textureSize.height),s.scale(1,o);var a=this.textureSize.width/n.width,l=this.textureSize.height/n.height;return r.tx/=n.width*a,r.ty/=n.width*a,r.invert(),s.prepend(r),s.scale(1,1/o),s.scale(a,l),s.translate(e.anchor.x,e.anchor.y),s},r.prototype.capFilterArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.textureSize.width&&(t.width=this.textureSize.width-t.x),t.y+t.height>this.textureSize.height&&(t.height=this.textureSize.height-t.y)},r.prototype.resize=function(t,e){this.textureSize.width=t,this.textureSize.height=e;for(var i=0;i<this.texturePool.length;i++)this.texturePool[i].resize(t,e)},r.prototype.destroy=function(){this.filterStack=null,this.offsetY=0;for(var t=0;t<this.texturePool.length;t++)this.texturePool[t].destroy();this.texturePool=null}},{"../../../const":22,"../../../math":32,"../utils/Quad":63,"../utils/RenderTarget":64,"./WebGLManager":57}],54:[function(t,e,i){function r(t){n.call(this,t),this.stencilStack=[],this.reverse=!0,this.count=0,this.alphaMaskPool=[]}var n=t("./WebGLManager"),s=t("../filters/SpriteMaskFilter");r.prototype=Object.create(n.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.pushMask=function(t,e){e.texture?this.pushSpriteMask(t,e):this.pushStencilMask(t,e)},r.prototype.popMask=function(t,e){e.texture?this.popSpriteMask(t,e):this.popStencilMask(t,e)},r.prototype.pushSpriteMask=function(t,e){var i=this.alphaMaskPool.pop();i||(i=[new s(e)]),i[0].maskSprite=e,this.renderer.filterManager.pushFilter(t,i)},r.prototype.popSpriteMask=function(){var t=this.renderer.filterManager.popFilter();this.alphaMaskPool.push(t)},r.prototype.pushStencilMask=function(t,e){this.renderer.stencilManager.pushMask(e)},r.prototype.popStencilMask=function(t,e){this.renderer.stencilManager.popMask(e)}},{"../filters/SpriteMaskFilter":51,"./WebGLManager":57}],55:[function(t,e,i){function r(t){n.call(this,t),this.maxAttibs=10,this.attribState=[],this.tempAttribState=[];for(var e=0;e<this.maxAttibs;e++)this.attribState[e]=!1;this.stack=[],this._currentId=-1,this.currentShader=null}var n=t("./WebGLManager"),s=t("../shaders/TextureShader"),o=t("../shaders/ComplexPrimitiveShader"),a=t("../shaders/PrimitiveShader"),h=t("../../../utils");r.prototype=Object.create(n.prototype),r.prototype.constructor=r,h.pluginTarget.mixin(r),e.exports=r,r.prototype.onContextChange=function(){this.initPlugins();var t=this.renderer.gl;this.maxAttibs=t.getParameter(t.MAX_VERTEX_ATTRIBS),this.attribState=[];for(var e=0;e<this.maxAttibs;e++)this.attribState[e]=!1;this.defaultShader=new s(this),this.primitiveShader=new a(this),this.complexPrimitiveShader=new o(this)},r.prototype.setAttribs=function(t){var e;for(e=0;e<this.tempAttribState.length;e++)this.tempAttribState[e]=!1;for(var i in t)this.tempAttribState[t[i]]=!0;var r=this.renderer.gl;for(e=0;e<this.attribState.length;e++)this.attribState[e]!==this.tempAttribState[e]&&(this.attribState[e]=this.tempAttribState[e],this.attribState[e]?r.enableVertexAttribArray(e):r.disableVertexAttribArray(e))},r.prototype.setShader=function(t){return this._currentId!==t.uuid&&(this._currentId=t.uuid,this.currentShader=t,this.renderer.gl.useProgram(t.program),this.setAttribs(t.attributes),!0)},r.prototype.destroy=function(){n.prototype.destroy.call(this),this.destroyPlugins(),this.attribState=null,this.tempAttribState=null}},{"../../../utils":76,"../shaders/ComplexPrimitiveShader":58,"../shaders/PrimitiveShader":59,"../shaders/TextureShader":61,"./WebGLManager":57}],56:[function(t,e,i){function r(t){n.call(this,t),this.stencilMaskStack=null}var n=t("./WebGLManager"),s=t("../../../utils");r.prototype=Object.create(n.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.setMaskStack=function(t){this.stencilMaskStack=t;var e=this.renderer.gl;0===t.stencilStack.length?e.disable(e.STENCIL_TEST):e.enable(e.STENCIL_TEST)},r.prototype.pushStencil=function(t,e){this.renderer.currentRenderTarget.attachStencilBuffer();var i=this.renderer.gl,r=this.stencilMaskStack;this.bindGraphics(t,e,this.renderer),0===r.stencilStack.length&&(i.enable(i.STENCIL_TEST),i.clear(i.STENCIL_BUFFER_BIT),r.reverse=!0,r.count=0),r.stencilStack.push(e);var n=r.count;i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.ALWAYS,0,255),i.stencilOp(i.KEEP,i.KEEP,i.INVERT),1===e.mode?(i.drawElements(i.TRIANGLE_FAN,e.indices.length-4,i.UNSIGNED_SHORT,0),r.reverse?(i.stencilFunc(i.EQUAL,255-n,255),i.stencilOp(i.KEEP,i.KEEP,i.DECR)):(i.stencilFunc(i.EQUAL,n,255),i.stencilOp(i.KEEP,i.KEEP,i.INCR)),i.drawElements(i.TRIANGLE_FAN,4,i.UNSIGNED_SHORT,2*(e.indices.length-4)),r.reverse?i.stencilFunc(i.EQUAL,255-(n+1),255):i.stencilFunc(i.EQUAL,n+1,255),r.reverse=!r.reverse):(r.reverse?(i.stencilFunc(i.EQUAL,n,255),i.stencilOp(i.KEEP,i.KEEP,i.INCR)):(i.stencilFunc(i.EQUAL,255-n,255),i.stencilOp(i.KEEP,i.KEEP,i.DECR)),i.drawElements(i.TRIANGLE_STRIP,e.indices.length,i.UNSIGNED_SHORT,0),r.reverse?i.stencilFunc(i.EQUAL,n+1,255):i.stencilFunc(i.EQUAL,255-(n+1),255)),i.colorMask(!0,!0,!0,!0),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),r.count++},r.prototype.bindGraphics=function(t,e){this._currentGraphics=t;var i,r=this.renderer.gl;1===e.mode?(i=this.renderer.shaderManager.complexPrimitiveShader,this.renderer.shaderManager.setShader(i),r.uniformMatrix3fv(i.uniforms.translationMatrix._location,!1,t.worldTransform.toArray(!0)),r.uniformMatrix3fv(i.uniforms.projectionMatrix._location,!1,this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),r.uniform3fv(i.uniforms.tint._location,s.hex2rgb(t.tint)),r.uniform3fv(i.uniforms.color._location,e.color),r.uniform1f(i.uniforms.alpha._location,t.worldAlpha),r.bindBuffer(r.ARRAY_BUFFER,e.buffer),r.vertexAttribPointer(i.attributes.aVertexPosition,2,r.FLOAT,!1,8,0),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e.indexBuffer)):(i=this.renderer.shaderManager.primitiveShader,this.renderer.shaderManager.setShader(i),r.uniformMatrix3fv(i.uniforms.translationMatrix._location,!1,t.worldTransform.toArray(!0)),r.uniformMatrix3fv(i.uniforms.projectionMatrix._location,!1,this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),r.uniform3fv(i.uniforms.tint._location,s.hex2rgb(t.tint)),r.uniform1f(i.uniforms.alpha._location,t.worldAlpha),r.bindBuffer(r.ARRAY_BUFFER,e.buffer),r.vertexAttribPointer(i.attributes.aVertexPosition,2,r.FLOAT,!1,24,0),r.vertexAttribPointer(i.attributes.aColor,4,r.FLOAT,!1,24,8),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e.indexBuffer))},r.prototype.popStencil=function(t,e){var i=this.renderer.gl,r=this.stencilMaskStack;if(r.stencilStack.pop(),r.count--,0===r.stencilStack.length)i.disable(i.STENCIL_TEST);else{var n=r.count;this.bindGraphics(t,e,this.renderer),i.colorMask(!1,!1,!1,!1),1===e.mode?(r.reverse=!r.reverse,r.reverse?(i.stencilFunc(i.EQUAL,255-(n+1),255),i.stencilOp(i.KEEP,i.KEEP,i.INCR)):(i.stencilFunc(i.EQUAL,n+1,255),i.stencilOp(i.KEEP,i.KEEP,i.DECR)),i.drawElements(i.TRIANGLE_FAN,4,i.UNSIGNED_SHORT,2*(e.indices.length-4)),i.stencilFunc(i.ALWAYS,0,255),i.stencilOp(i.KEEP,i.KEEP,i.INVERT),i.drawElements(i.TRIANGLE_FAN,e.indices.length-4,i.UNSIGNED_SHORT,0),r.reverse?i.stencilFunc(i.EQUAL,n,255):i.stencilFunc(i.EQUAL,255-n,255)):(r.reverse?(i.stencilFunc(i.EQUAL,n+1,255),i.stencilOp(i.KEEP,i.KEEP,i.DECR)):(i.stencilFunc(i.EQUAL,255-(n+1),255),i.stencilOp(i.KEEP,i.KEEP,i.INCR)),i.drawElements(i.TRIANGLE_STRIP,e.indices.length,i.UNSIGNED_SHORT,0),r.reverse?i.stencilFunc(i.EQUAL,n,255):i.stencilFunc(i.EQUAL,255-n,255)),i.colorMask(!0,!0,!0,!0),i.stencilOp(i.KEEP,i.KEEP,i.KEEP)}},r.prototype.destroy=function(){n.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},r.prototype.pushMask=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),
t.dirty&&this.renderer.plugins.graphics.updateGraphics(t,this.renderer.gl),t._webGL[this.renderer.gl.id].data.length&&this.pushStencil(t,t._webGL[this.renderer.gl.id].data[0],this.renderer)},r.prototype.popMask=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.popStencil(t,t._webGL[this.renderer.gl.id].data[0],this.renderer)}},{"../../../utils":76,"./WebGLManager":57}],57:[function(t,e,i){function r(t){this.renderer=t,this.renderer.on("context",this.onContextChange,this)}r.prototype.constructor=r,e.exports=r,r.prototype.onContextChange=function(){},r.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null}},{}],58:[function(t,e,i){function r(t){n.call(this,t,["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"),{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},color:{type:"3f",value:[0,0,0]},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0})}var n=t("./Shader");r.prototype=Object.create(n.prototype),r.prototype.constructor=r,e.exports=r},{"./Shader":60}],59:[function(t,e,i){function r(t){n.call(this,t,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform float flipY;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"),{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aColor:0})}var n=t("./Shader");r.prototype=Object.create(n.prototype),r.prototype.constructor=r,e.exports=r},{"./Shader":60}],60:[function(t,e,i){function r(t,e,i,r,s){if(!e||!i)throw new Error("Pixi.js Error. Shader requires vertexSrc and fragmentSrc");this.uuid=n.uuid(),this.gl=t.renderer.gl,this.shaderManager=t,this.program=null,this.uniforms=r||{},this.attributes=s||{},this.textureCount=1,this.vertexSrc=e,this.fragmentSrc=i,this.init()}var n=t("../../../utils");r.prototype.constructor=r,e.exports=r,r.prototype.init=function(){this.compile(),this.gl.useProgram(this.program),this.cacheUniformLocations(Object.keys(this.uniforms)),this.cacheAttributeLocations(Object.keys(this.attributes))},r.prototype.cacheUniformLocations=function(t){for(var e=0;e<t.length;++e)this.uniforms[t[e]]._location=this.gl.getUniformLocation(this.program,t[e])},r.prototype.cacheAttributeLocations=function(t){for(var e=0;e<t.length;++e)this.attributes[t[e]]=this.gl.getAttribLocation(this.program,t[e])},r.prototype.compile=function(){var t=this.gl,e=this._glCompile(t.VERTEX_SHADER,this.vertexSrc),i=this._glCompile(t.FRAGMENT_SHADER,this.fragmentSrc),r=t.createProgram();return t.attachShader(r,e),t.attachShader(r,i),t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS)||(""!==t.getProgramInfoLog(r),t.deleteProgram(r),r=null),t.deleteShader(e),t.deleteShader(i),this.program=r},r.prototype.syncUniform=function(t){var e,i,r=t._location,s=t.value,o=this.gl;switch(t.type){case"b":case"bool":case"boolean":o.uniform1i(r,s?1:0);break;case"i":case"1i":o.uniform1i(r,s);break;case"f":case"1f":o.uniform1f(r,s);break;case"2f":o.uniform2f(r,s[0],s[1]);break;case"3f":o.uniform3f(r,s[0],s[1],s[2]);break;case"4f":o.uniform4f(r,s[0],s[1],s[2],s[3]);break;case"v2":o.uniform2f(r,s.x,s.y);break;case"v3":o.uniform3f(r,s.x,s.y,s.z);break;case"v4":o.uniform4f(r,s.x,s.y,s.z,s.w);break;case"1iv":o.uniform1iv(r,s);break;case"2iv":o.uniform2iv(r,s);break;case"3iv":o.uniform3iv(r,s);break;case"4iv":o.uniform4iv(r,s);break;case"1fv":o.uniform1fv(r,s);break;case"2fv":o.uniform2fv(r,s);break;case"3fv":o.uniform3fv(r,s);break;case"4fv":o.uniform4fv(r,s);break;case"m2":case"mat2":case"Matrix2fv":o.uniformMatrix2fv(r,t.transpose,s);break;case"m3":case"mat3":case"Matrix3fv":o.uniformMatrix3fv(r,t.transpose,s);break;case"m4":case"mat4":case"Matrix4fv":o.uniformMatrix4fv(r,t.transpose,s);break;case"c":"number"==typeof s&&(s=n.hex2rgb(s)),o.uniform3f(r,s[0],s[1],s[2]);break;case"iv1":o.uniform1iv(r,s);break;case"iv":o.uniform3iv(r,s);break;case"fv1":o.uniform1fv(r,s);break;case"fv":o.uniform3fv(r,s);break;case"v2v":for(t._array||(t._array=new Float32Array(2*s.length)),e=0,i=s.length;e<i;++e)t._array[2*e]=s[e].x,t._array[2*e+1]=s[e].y;o.uniform2fv(r,t._array);break;case"v3v":for(t._array||(t._array=new Float32Array(3*s.length)),e=0,i=s.length;e<i;++e)t._array[3*e]=s[e].x,t._array[3*e+1]=s[e].y,t._array[3*e+2]=s[e].z;o.uniform3fv(r,t._array);break;case"v4v":for(t._array||(t._array=new Float32Array(4*s.length)),e=0,i=s.length;e<i;++e)t._array[4*e]=s[e].x,t._array[4*e+1]=s[e].y,t._array[4*e+2]=s[e].z,t._array[4*e+3]=s[e].w;o.uniform4fv(r,t._array);break;case"t":case"sampler2D":if(!t.value||!t.value.baseTexture.hasLoaded)break;o.activeTexture(o["TEXTURE"+this.textureCount]);var a=t.value.baseTexture._glTextures[o.id];a||(this.initSampler2D(t),a=t.value.baseTexture._glTextures[o.id]),o.bindTexture(o.TEXTURE_2D,a),o.uniform1i(t._location,this.textureCount),this.textureCount++}},r.prototype.syncUniforms=function(){this.textureCount=1;for(var t in this.uniforms)this.syncUniform(this.uniforms[t])},r.prototype.initSampler2D=function(t){var e=this.gl,i=t.value.baseTexture;if(i.hasLoaded)if(t.textureData){var r=t.textureData;i._glTextures[e.id]=e.createTexture(),e.bindTexture(e.TEXTURE_2D,i._glTextures[e.id]),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultipliedAlpha),e.texImage2D(e.TEXTURE_2D,0,r.luminance?e.LUMINANCE:e.RGBA,e.RGBA,e.UNSIGNED_BYTE,i.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,r.magFilter?r.magFilter:e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,r.wrapS?r.wrapS:e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,r.wrapS?r.wrapS:e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,r.wrapT?r.wrapT:e.CLAMP_TO_EDGE)}else this.shaderManager.renderer.updateTexture(i)},r.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.gl=null,this.uniforms=null,this.attributes=null,this.vertexSrc=null,this.fragmentSrc=null},r.prototype._glCompile=function(t,e){var i=this.gl.createShader(t);return this.gl.shaderSource(i,e),this.gl.compileShader(i),this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS)?i:null}},{"../../../utils":76}],61:[function(t,e,i){function r(t,e,i,s,o){var a={uSampler:{type:"sampler2D",value:0},projectionMatrix:{type:"mat3",value:new Float32Array([1,0,0,0,1,0,0,0,1])}};if(s)for(var h in s)a[h]=s[h];var l={aVertexPosition:0,aTextureCoord:0,aColor:0};if(o)for(var c in o)l[c]=o[c];e=e||r.defaultVertexSrc,i=i||r.defaultFragmentSrc,n.call(this,t,e,i,a,l)}var n=t("./Shader");r.prototype=Object.create(n.prototype),r.prototype.constructor=r,e.exports=r,r.defaultVertexSrc=["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"].join("\n"),r.defaultFragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"].join("\n")},{"./Shader":60}],62:[function(t,e,i){function r(t){n.call(this,t)}var n=t("../managers/WebGLManager");r.prototype=Object.create(n.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.start=function(){},r.prototype.stop=function(){this.flush()},r.prototype.flush=function(){},r.prototype.render=function(t){}},{"../managers/WebGLManager":57}],63:[function(t,e,i){function r(t){this.gl=t,this.vertices=new Float32Array([0,0,200,0,200,200,0,200]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),this.indices=new Uint16Array([0,1,2,0,3,2]),this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,128,t.DYNAMIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),this.upload()}r.prototype.constructor=r,r.prototype.map=function(t,e){var i=0,r=0;this.uvs[0]=i,this.uvs[1]=r,this.uvs[2]=i+e.width/t.width,this.uvs[3]=r,this.uvs[4]=i+e.width/t.width,this.uvs[5]=r+e.height/t.height,this.uvs[6]=i,this.uvs[7]=r+e.height/t.height,i=e.x,r=e.y,this.vertices[0]=i,this.vertices[1]=r,this.vertices[2]=i+e.width,this.vertices[3]=r,this.vertices[4]=i+e.width,this.vertices[5]=r+e.height,this.vertices[6]=i,this.vertices[7]=r+e.height,this.upload()},r.prototype.upload=function(){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices),t.bufferSubData(t.ARRAY_BUFFER,32,this.uvs),t.bufferSubData(t.ARRAY_BUFFER,64,this.colors)},e.exports=r},{}],64:[function(t,e,i){var r=t("../../../math"),n=t("../../../utils"),s=t("../../../const"),o=t("./StencilMaskStack"),a=function(t,e,i,a,h,l){if(this.gl=t,this.frameBuffer=null,this.texture=null,this.size=new r.Rectangle(0,0,1,1),this.resolution=h||s.RESOLUTION,this.projectionMatrix=new r.Matrix,this.transform=null,this.frame=null,this.stencilBuffer=null,this.stencilMaskStack=new o,this.filterStack=[{renderTarget:this,filter:[],bounds:this.size}],this.scaleMode=a||s.SCALE_MODES.DEFAULT,this.root=l,!this.root){this.frameBuffer=t.createFramebuffer(),this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,a===s.SCALE_MODES.LINEAR?t.LINEAR:t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,a===s.SCALE_MODES.LINEAR?t.LINEAR:t.NEAREST);var c=n.isPowerOfTwo(e,i);c?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0)}this.resize(e,i)};a.prototype.constructor=a,e.exports=a,a.prototype.clear=function(t){var e=this.gl;t&&e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)},a.prototype.attachStencilBuffer=function(){if(!this.stencilBuffer&&!this.root){var t=this.gl;this.stencilBuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencilBuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.size.width*this.resolution,this.size.height*this.resolution)}},a.prototype.activate=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer);var e=this.frame||this.size;this.calculateProjection(e),this.transform&&this.projectionMatrix.append(this.transform),t.viewport(0,0,e.width*this.resolution,e.height*this.resolution)},a.prototype.calculateProjection=function(t){var e=this.projectionMatrix;e.identity(),this.root?(e.a=1/t.width*2,e.d=-1/t.height*2,e.tx=-1-t.x*e.a,e.ty=1-t.y*e.d):(e.a=1/t.width*2,e.d=1/t.height*2,e.tx=-1-t.x*e.a,e.ty=-1-t.y*e.d)},a.prototype.resize=function(t,e){if(t=0|t,e=0|e,this.size.width!==t||this.size.height!==e){if(this.size.width=t,this.size.height=e,!this.root){var i=this.gl;i.bindTexture(i.TEXTURE_2D,this.texture),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t*this.resolution,e*this.resolution,0,i.RGBA,i.UNSIGNED_BYTE,null),this.stencilBuffer&&(i.bindRenderbuffer(i.RENDERBUFFER,this.stencilBuffer),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t*this.resolution,e*this.resolution))}var r=this.frame||this.size;this.calculateProjection(r)}},a.prototype.destroy=function(){var t=this.gl;t.deleteFramebuffer(this.frameBuffer),t.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null}},{"../../../const":22,"../../../math":32,"../../../utils":76,"./StencilMaskStack":65}],65:[function(t,e,i){function r(){this.stencilStack=[],this.reverse=!0,this.count=0}r.prototype.constructor=r,e.exports=r},{}],66:[function(t,e,i){function r(t){o.call(this),this.anchor=new n.Point,this._texture=null,this._width=0,this._height=0,this.tint=16777215,this.blendMode=l.BLEND_MODES.NORMAL,this.shader=null,this.cachedTint=16777215,this.texture=t||s.EMPTY}var n=t("../math"),s=t("../textures/Texture"),o=t("../display/Container"),a=t("../renderers/canvas/utils/CanvasTinter"),h=t("../utils"),l=t("../const"),c=new n.Point;r.prototype=Object.create(o.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{width:{get:function(){return this.scale.x*this.texture._frame.width},set:function(t){this.scale.x=t/this.texture._frame.width,this._width=t}},height:{get:function(){return this.scale.y*this.texture._frame.height},set:function(t){this.scale.y=t/this.texture._frame.height,this._height=t}},texture:{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,this.cachedTint=16777215,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}}),r.prototype._onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width),this._height&&(this.scale.y=this._height/this.texture.frame.height)},r.prototype._renderWebGL=function(t){var e=this.worldTransform;this._texture.frame.width*e.a;t.setObjectRenderer(t.plugins.sprite),t.plugins.sprite.render(this)},r.prototype.getBounds=function(t){if(!this._currentBounds){var e,i,r,n,s=this._texture._frame.width,o=this._texture._frame.height,a=s*(1-this.anchor.x),h=s*-this.anchor.x,l=o*(1-this.anchor.y),c=o*-this.anchor.y,u=t||this.worldTransform,d=u.a,p=u.b,f=u.c,m=u.d,g=u.tx,v=u.ty;if(0===p&&0===f)d<0&&(d*=-1),m<0&&(m*=-1),e=d*h+g,i=d*a+g,r=m*c+v,n=m*l+v;else{var _=d*h+f*c+g,y=m*c+p*h+v,x=d*a+f*c+g,w=m*c+p*a+v,b=d*a+f*l+g,T=m*l+p*a+v,S=d*h+f*l+g,A=m*l+p*h+v;e=_,e=x<e?x:e,e=b<e?b:e,e=S<e?S:e,r=y,r=w<r?w:r,r=T<r?T:r,r=A<r?A:r,i=_,i=x>i?x:i,i=b>i?b:i,i=S>i?S:i,n=y,n=w>n?w:n,n=T>n?T:n,n=A>n?A:n}if(this.children.length){var C=this.containerGetBounds();a=C.x,h=C.x+C.width,l=C.y,c=C.y+C.height,e=e<a?e:a,r=r<l?r:l,i=i>h?i:h,n=n>c?n:c}var E=this._bounds;E.x=e,E.width=i-e,E.y=r,E.height=n-r,this._currentBounds=E}return this._currentBounds},r.prototype.getLocalBounds=function(){return this._bounds.x=-this._texture._frame.width*this.anchor.x,this._bounds.y=-this._texture._frame.height*this.anchor.y,this._bounds.width=this._texture._frame.width,this._bounds.height=this._texture._frame.height,this._bounds},r.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,c);var e,i=this._texture._frame.width,r=this._texture._frame.height,n=-i*this.anchor.x;return c.x>n&&c.x<n+i&&(e=-r*this.anchor.y,c.y>e&&c.y<e+r)},r.prototype._renderCanvas=function(t){if(!(this.texture.crop.width<=0||this.texture.crop.height<=0)&&(this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,t.context.globalCompositeOperation=t.blendModes[t.currentBlendMode]),this.texture.valid)){var e,i,r,n,s=this._texture,o=this.worldTransform,h=s.baseTexture.resolution/t.resolution;if(t.context.globalAlpha=this.worldAlpha,t.smoothProperty&&t.currentScaleMode!==s.baseTexture.scaleMode&&(t.currentScaleMode=s.baseTexture.scaleMode,t.context[t.smoothProperty]=t.currentScaleMode===l.SCALE_MODES.LINEAR),s.rotate){var c=o.a,u=o.b;o.a=-o.c,o.b=-o.d,o.c=c,o.d=u,r=s.crop.height,n=s.crop.width,e=s.trim?s.trim.y-this.anchor.y*s.trim.height:this.anchor.y*-s._frame.height,i=s.trim?s.trim.x-this.anchor.x*s.trim.width:this.anchor.x*-s._frame.width}else r=s.crop.width,n=s.crop.height,e=s.trim?s.trim.x-this.anchor.x*s.trim.width:this.anchor.x*-s._frame.width,i=s.trim?s.trim.y-this.anchor.y*s.trim.height:this.anchor.y*-s._frame.height;t.roundPixels?(t.context.setTransform(o.a,o.b,o.c,o.d,o.tx*t.resolution|0,o.ty*t.resolution|0),e=0|e,i=0|i):t.context.setTransform(o.a,o.b,o.c,o.d,o.tx*t.resolution,o.ty*t.resolution);var h=s.baseTexture.resolution;16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=a.getTintedTexture(this,this.tint)),t.context.drawImage(this.tintedTexture,0,0,r*h,n*h,e*t.resolution,i*t.resolution,r*t.resolution,n*t.resolution)):t.context.drawImage(s.baseTexture.source,s.crop.x*h,s.crop.y*h,r*h,n*h,e*t.resolution,i*t.resolution,r*t.resolution,n*t.resolution)}},r.prototype.destroy=function(t,e){o.prototype.destroy.call(this),this.anchor=null,t&&this._texture.destroy(e),this._texture=null,this.shader=null},r.fromFrame=function(t){var e=h.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return new r(e)},r.fromImage=function(t,e,i){return new r(s.fromImage(t,e,i))}},{"../const":22,"../display/Container":23,"../math":32,"../renderers/canvas/utils/CanvasTinter":47,"../textures/Texture":71,"../utils":76}],67:[function(t,e,i){function r(t){n.call(this,t),this.vertSize=5,this.vertByteSize=4*this.vertSize,this.size=o.SPRITE_BATCH_SIZE;var e=4*this.size*this.vertByteSize,i=6*this.size;this.vertices=new ArrayBuffer(e),this.positions=new Float32Array(this.vertices),this.colors=new Uint32Array(this.vertices),this.indices=new Uint16Array(i);for(var r=0,s=0;r<i;r+=6,s+=4)this.indices[r+0]=s+0,this.indices[r+1]=s+1,this.indices[r+2]=s+2,this.indices[r+3]=s+0,this.indices[r+4]=s+2,this.indices[r+5]=s+3;this.currentBatchSize=0,this.sprites=[],this.shader=null}var n=t("../../renderers/webgl/utils/ObjectRenderer"),s=t("../../renderers/webgl/WebGLRenderer"),o=t("../../const");r.prototype=Object.create(n.prototype),r.prototype.constructor=r,e.exports=r,s.registerPlugin("sprite",r),r.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=this.renderer.shaderManager.defaultShader,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),this.currentBlendMode=99999},r.prototype.render=function(t){var e=t._texture;this.currentBatchSize>=this.size&&this.flush();var i=e._uvs;if(i){var r,n,s,o,a=t.anchor.x,h=t.anchor.y;if(e.trim){var l=e.trim;n=l.x-a*l.width,r=n+e.crop.width,o=l.y-h*l.height,s=o+e.crop.height}else r=e._frame.width*(1-a),n=e._frame.width*-a,s=e._frame.height*(1-h),o=e._frame.height*-h;var c=this.currentBatchSize*this.vertByteSize,u=t.worldTransform,d=u.a,p=u.b,f=u.c,m=u.d,g=u.tx,v=u.ty,_=this.colors,y=this.positions;this.renderer.roundPixels?(y[c]=d*n+f*o+g|0,y[c+1]=m*o+p*n+v|0,y[c+5]=d*r+f*o+g|0,y[c+6]=m*o+p*r+v|0,y[c+10]=d*r+f*s+g|0,y[c+11]=m*s+p*r+v|0,y[c+15]=d*n+f*s+g|0,y[c+16]=m*s+p*n+v|0):(y[c]=d*n+f*o+g,y[c+1]=m*o+p*n+v,y[c+5]=d*r+f*o+g,y[c+6]=m*o+p*r+v,y[c+10]=d*r+f*s+g,y[c+11]=m*s+p*r+v,y[c+15]=d*n+f*s+g,y[c+16]=m*s+p*n+v),y[c+2]=i.x0,y[c+3]=i.y0,y[c+7]=i.x1,y[c+8]=i.y1,y[c+12]=i.x2,y[c+13]=i.y2,y[c+17]=i.x3,y[c+18]=i.y3;var x=t.tint;_[c+4]=_[c+9]=_[c+14]=_[c+19]=(x>>16)+(65280&x)+((255&x)<<16)+(255*t.worldAlpha<<24),this.sprites[this.currentBatchSize++]=t}},r.prototype.flush=function(){if(0!==this.currentBatchSize){var t,e=this.renderer.gl;if(this.currentBatchSize>.5*this.size)e.bufferSubData(e.ARRAY_BUFFER,0,this.vertices);else{var i=this.positions.subarray(0,this.currentBatchSize*this.vertByteSize);e.bufferSubData(e.ARRAY_BUFFER,0,i)}for(var r,n,s,o,a=0,h=0,l=null,c=this.renderer.blendModeManager.currentBlendMode,u=null,d=!1,p=!1,f=0,m=this.currentBatchSize;f<m;f++)o=this.sprites[f],r=o._texture.baseTexture,n=o.blendMode,s=o.shader||this.shader,d=c!==n,p=u!==s,(l!==r||d||p)&&(this.renderBatch(l,a,h),h=f,a=0,l=r,d&&(c=n,this.renderer.blendModeManager.setBlendMode(c)),p&&(u=s,t=u.shaders?u.shaders[e.id]:u,t||(t=u.getShader(this.renderer)),this.renderer.shaderManager.setShader(t),t.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(!0),t.syncUniforms(),e.activeTexture(e.TEXTURE0))),a++;this.renderBatch(l,a,h),this.currentBatchSize=0}},r.prototype.renderBatch=function(t,e,i){if(0!==e){var r=this.renderer.gl;t._glTextures[r.id]?r.bindTexture(r.TEXTURE_2D,t._glTextures[r.id]):this.renderer.updateTexture(t),r.drawElements(r.TRIANGLES,6*e,r.UNSIGNED_SHORT,6*i*2),this.renderer.drawCount++}},r.prototype.start=function(){var t=this.renderer.gl;t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.vertByteSize;t.vertexAttribPointer(this.shader.attributes.aVertexPosition,2,t.FLOAT,!1,e,0),t.vertexAttribPointer(this.shader.attributes.aTextureCoord,2,t.FLOAT,!1,e,8),t.vertexAttribPointer(this.shader.attributes.aColor,4,t.UNSIGNED_BYTE,!0,e,16)},r.prototype.destroy=function(){this.renderer.gl.deleteBuffer(this.vertexBuffer),this.renderer.gl.deleteBuffer(this.indexBuffer),this.shader.destroy(),this.renderer=null,this.vertices=null,this.positions=null,this.colors=null,this.indices=null,this.vertexBuffer=null,this.indexBuffer=null,this.sprites=null,this.shader=null}},{"../../const":22,"../../renderers/webgl/WebGLRenderer":48,"../../renderers/webgl/utils/ObjectRenderer":62}],68:[function(t,e,i){function r(t,e,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i||h.RESOLUTION,this._text=null,this._style=null;var r=s.fromCanvas(this.canvas);r.trim=new o.Rectangle,n.call(this,r),this.text=t,this.style=e}var n=t("../sprites/Sprite"),s=t("../textures/Texture"),o=t("../math"),a=t("../utils"),h=t("../const");r.prototype=Object.create(n.prototype),r.prototype.constructor=r,e.exports=r,r.fontPropertiesCache={},r.fontPropertiesCanvas=document.createElement("canvas"),r.fontPropertiesContext=r.fontPropertiesCanvas.getContext("2d"),Object.defineProperties(r.prototype,{width:{get:function(){return this.dirty&&this.updateText(),this.scale.x*this._texture._frame.width},set:function(t){this.scale.x=t/this._texture._frame.width,this._width=t}},height:{get:function(){return this.dirty&&this.updateText(),this.scale.y*this._texture._frame.height},set:function(t){this.scale.y=t/this._texture._frame.height,this._height=t}},style:{get:function(){return this._style},set:function(t){t=t||{},"number"==typeof t.fill&&(t.fill=a.hex2string(t.fill)),"number"==typeof t.stroke&&(t.stroke=a.hex2string(t.stroke)),"number"==typeof t.dropShadowColor&&(t.dropShadowColor=a.hex2string(t.dropShadowColor)),t.font=t.font||"bold 20pt Arial",t.fill=t.fill||"black",t.align=t.align||"left",t.stroke=t.stroke||"black",t.strokeThickness=t.strokeThickness||0,t.wordWrap=t.wordWrap||!1,t.wordWrapWidth=t.wordWrapWidth||100,t.dropShadow=t.dropShadow||!1,t.dropShadowColor=t.dropShadowColor||"#000000",t.dropShadowAngle=t.dropShadowAngle||Math.PI/6,t.dropShadowDistance=t.dropShadowDistance||5,t.padding=t.padding||0,t.textBaseline=t.textBaseline||"alphabetic",t.lineJoin=t.lineJoin||"miter",t.miterLimit=t.miterLimit||10,this._style=t,this.dirty=!0}},text:{get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}}}),r.prototype.updateText=function(){var t=this._style;this.context.font=t.font;for(var e=t.wordWrap?this.wordWrap(this._text):this._text,i=e.split(/(?:\r\n|\r|\n)/),r=new Array(i.length),n=0,s=this.determineFontProperties(t.font),o=0;o<i.length;o++){var a=this.context.measureText(i[o]).width;r[o]=a,n=Math.max(n,a)}var h=n+t.strokeThickness;t.dropShadow&&(h+=t.dropShadowDistance),this.canvas.width=(h+this.context.lineWidth)*this.resolution;var l=this.style.lineHeight||s.fontSize+t.strokeThickness,c=l*i.length;t.dropShadow&&(c+=t.dropShadowDistance),this.canvas.height=(c+2*this._style.padding)*this.resolution,this.context.scale(this.resolution,this.resolution),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=t.font,this.context.strokeStyle=t.stroke,this.context.lineWidth=t.strokeThickness,this.context.textBaseline=t.textBaseline,this.context.lineJoin=t.lineJoin,this.context.miterLimit=t.miterLimit;var u,d;if(t.dropShadow){this.context.fillStyle=t.dropShadowColor;var p=Math.cos(t.dropShadowAngle)*t.dropShadowDistance,f=Math.sin(t.dropShadowAngle)*t.dropShadowDistance;for(o=0;o<i.length;o++)u=t.strokeThickness/2,d=t.strokeThickness/2+o*l+s.ascent,"right"===t.align?u+=n-r[o]:"center"===t.align&&(u+=(n-r[o])/2),t.fill&&this.context.fillText(i[o],u+p,d+f+this._style.padding)}for(this.context.fillStyle=t.fill,o=0;o<i.length;o++)u=t.strokeThickness/2,d=t.strokeThickness/2+o*l+s.ascent,"right"===t.align?u+=n-r[o]:"center"===t.align&&(u+=(n-r[o])/2),t.stroke&&t.strokeThickness&&this.context.strokeText(i[o],u,d+this._style.padding),t.fill&&this.context.fillText(i[o],u,d+this._style.padding);this.updateTexture()},r.prototype.updateTexture=function(){var t=this._texture;t.baseTexture.hasLoaded=!0,t.baseTexture.resolution=this.resolution,t.baseTexture.width=this.canvas.width/this.resolution,t.baseTexture.height=this.canvas.height/this.resolution,t.crop.width=t._frame.width=this.canvas.width/this.resolution,t.crop.height=t._frame.height=this.canvas.height/this.resolution,t.trim.x=0,t.trim.y=-this._style.padding,t.trim.width=t._frame.width,t.trim.height=t._frame.height-2*this._style.padding,this._width=this.canvas.width/this.resolution,this._height=this.canvas.height/this.resolution,t.baseTexture.emit("update",t.baseTexture),this.dirty=!1},r.prototype.renderWebGL=function(t){this.dirty&&this.updateText(),n.prototype.renderWebGL.call(this,t)},r.prototype._renderCanvas=function(t){this.dirty&&this.updateText(),n.prototype._renderCanvas.call(this,t)},r.prototype.determineFontProperties=function(t){var e=r.fontPropertiesCache[t];if(!e){e={};var i=r.fontPropertiesCanvas,n=r.fontPropertiesContext;n.font=t;var s=Math.ceil(n.measureText("|Mq").width),o=Math.ceil(n.measureText("M").width),a=2*o;o=1.4*o|0,i.width=s,i.height=a,n.fillStyle="#f00",n.fillRect(0,0,s,a),n.font=t,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText("|Mq",0,o);var h,l,c=n.getImageData(0,0,s,a).data,u=c.length,d=4*s,p=0,f=!1;for(h=0;h<o;h++){for(l=0;l<d;l+=4)if(255!==c[p+l]){f=!0;break}if(f)break;p+=d}for(e.ascent=o-h,p=u-d,f=!1,h=a;h>o;h--){for(l=0;l<d;l+=4)if(255!==c[p+l]){f=!0;break}if(f)break;p-=d}e.descent=h-o,e.fontSize=e.ascent+e.descent,r.fontPropertiesCache[t]=e}return e},r.prototype.wordWrap=function(t){for(var e="",i=t.split("\n"),r=this._style.wordWrapWidth,n=0;n<i.length;n++){for(var s=r,o=i[n].split(" "),a=0;a<o.length;a++){var h=this.context.measureText(o[a]).width,l=h+this.context.measureText(" ").width;0===a||l>s?(a>0&&(e+="\n"),e+=o[a],s=r-h):(s-=l,e+=" "+o[a])}n<i.length-1&&(e+="\n")}return e},r.prototype.getBounds=function(t){return this.dirty&&this.updateText(),n.prototype.getBounds.call(this,t)},r.prototype.destroy=function(t){this.context=null,this.canvas=null,this._style=null,this._texture.destroy(void 0===t||t)}},{"../const":22,"../math":32,"../sprites/Sprite":66,"../textures/Texture":71,"../utils":76}],69:[function(t,e,i){function r(t,e,i){o.call(this),this.uuid=n.uuid(),this.resolution=i||1,this.width=100,this.height=100,this.realWidth=100,this.realHeight=100,this.scaleMode=e||s.SCALE_MODES.DEFAULT,this.hasLoaded=!1,this.isLoading=!1,this.source=null,this.premultipliedAlpha=!0,this.imageUrl=null,this.isPowerOfTwo=!1,this.mipmap=!1,this._glTextures=[],t&&this.loadSource(t)}var n=t("../utils"),s=t("../const"),o=t("eventemitter3");r.prototype=Object.create(o.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.update=function(){this.realWidth=this.source.naturalWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.height,this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=n.isPowerOfTwo(this.realWidth,this.realHeight),this.emit("update",this)},r.prototype.loadSource=function(t){var e=this.isLoading;if(this.hasLoaded=!1,this.isLoading=!1,e&&this.source&&(this.source.onload=null,this.source.onerror=null),this.source=t,(this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this._sourceLoaded();else if(!t.getContext){this.isLoading=!0;var i=this;t.onload=function(){t.onload=null,t.onerror=null,i.isLoading&&(i.isLoading=!1,i._sourceLoaded(),i.emit("loaded",i))},t.onerror=function(){t.onload=null,t.onerror=null,i.isLoading&&(i.isLoading=!1,i.emit("error",i))},t.complete&&t.src&&(this.isLoading=!1,t.onload=null,t.onerror=null,t.width&&t.height?(this._sourceLoaded(),e&&this.emit("loaded",this)):e&&this.emit("error",this))}},r.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},r.prototype.destroy=function(){this.imageUrl?(delete n.BaseTextureCache[this.imageUrl],delete n.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")):this.source&&this.source._pixiId&&delete n.BaseTextureCache[this.source._pixiId],this.source=null,this.dispose()},r.prototype.dispose=function(){this.emit("dispose",this),this._glTextures.length=0},r.prototype.updateSourceImage=function(t){this.source.src=t,this.loadSource(this.source)},r.fromImage=function(t,e,i){var s=n.BaseTextureCache[t];if(void 0===e&&0!==t.indexOf("data:")&&(e=!0),!s){var o=new Image;s=new r(o,i),s.imageUrl=t,o.src=t,n.BaseTextureCache[t]=s,s.resolution=n.getResolutionOfUrl(t)}return s},r.fromCanvas=function(t,e){t._pixiId||(t._pixiId="canvas_"+n.uuid());var i=n.BaseTextureCache[t._pixiId];return i||(i=new r(t,e),n.BaseTextureCache[t._pixiId]=i),i}},{"../const":22,"../utils":76,eventemitter3:11}],70:[function(t,e,i){function r(t,e,i,r,u){if(!t)throw new Error("Unable to create RenderTexture, you must pass a renderer into the constructor.");e=e||100,i=i||100,u=u||c.RESOLUTION;var d=new n;if(d.width=e,d.height=i,d.resolution=u,d.scaleMode=r||c.SCALE_MODES.DEFAULT,d.hasLoaded=!0,s.call(this,d,new l.Rectangle(0,0,e,i)),this.width=e,this.height=i,this.resolution=u,this.render=null,this.renderer=t,this.renderer.type===c.RENDERER_TYPE.WEBGL){var p=this.renderer.gl;this.textureBuffer=new o(p,this.width,this.height,d.scaleMode,this.resolution),this.baseTexture._glTextures[p.id]=this.textureBuffer.texture,this.filterManager=new a(this.renderer),this.filterManager.onContextChange(),this.filterManager.resize(e,i),this.render=this.renderWebGL,this.renderer.currentRenderer.start(),this.renderer.currentRenderTarget.activate()}else this.render=this.renderCanvas,this.textureBuffer=new h(this.width*this.resolution,this.height*this.resolution),this.baseTexture.source=this.textureBuffer.canvas;this.valid=!0,this._updateUvs()}var n=t("./BaseTexture"),s=t("./Texture"),o=t("../renderers/webgl/utils/RenderTarget"),a=t("../renderers/webgl/managers/FilterManager"),h=t("../renderers/canvas/utils/CanvasBuffer"),l=t("../math"),c=t("../const"),u=new l.Matrix;r.prototype=Object.create(s.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.resize=function(t,e,i){t===this.width&&e===this.height||(this.valid=t>0&&e>0,this.width=this._frame.width=this.crop.width=t,this.height=this._frame.height=this.crop.height=e,i&&(this.baseTexture.width=this.width,
this.baseTexture.height=this.height),this.valid&&(this.textureBuffer.resize(this.width,this.height),this.filterManager&&this.filterManager.resize(this.width,this.height)))},r.prototype.clear=function(){this.valid&&(this.renderer.type===c.RENDERER_TYPE.WEBGL&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear())},r.prototype.renderWebGL=function(t,e,i,r){if(this.valid){if(r=void 0===r||r,this.textureBuffer.transform=e,this.textureBuffer.activate(),t.worldAlpha=1,r){t.worldTransform.identity(),t.currentBounds=null;var n,s,o=t.children;for(n=0,s=o.length;n<s;++n)o[n].updateTransform()}var a=this.renderer.filterManager;this.renderer.filterManager=this.filterManager,this.renderer.renderDisplayObject(t,this.textureBuffer,i),this.renderer.filterManager=a}},r.prototype.renderCanvas=function(t,e,i,r){if(this.valid){r=!!r;var n=t.worldTransform,s=u;s.identity(),e&&s.append(e),t.worldTransform=s,t.worldAlpha=1;var o,a,h=t.children;for(o=0,a=h.length;o<a;++o)h[o].updateTransform();i&&this.textureBuffer.clear(),t.worldTransform=n;var l=this.textureBuffer.context,c=this.renderer.resolution;this.renderer.resolution=this.resolution,this.renderer.renderDisplayObject(t,l),this.renderer.resolution=c}},r.prototype.destroy=function(){s.prototype.destroy.call(this,!0),this.textureBuffer.destroy(),this.filterManager&&this.filterManager.destroy(),this.renderer=null},r.prototype.getImage=function(){var t=new Image;return t.src=this.getBase64(),t},r.prototype.getBase64=function(){return this.getCanvas().toDataURL()},r.prototype.getCanvas=function(){if(this.renderer.type===c.RENDERER_TYPE.WEBGL){var t=this.renderer.gl,e=this.textureBuffer.size.width,i=this.textureBuffer.size.height,r=new Uint8Array(4*e*i);t.bindFramebuffer(t.FRAMEBUFFER,this.textureBuffer.frameBuffer),t.readPixels(0,0,e,i,t.RGBA,t.UNSIGNED_BYTE,r),t.bindFramebuffer(t.FRAMEBUFFER,null);var n=new h(e,i),s=n.context.getImageData(0,0,e,i);return s.data.set(r),n.context.putImageData(s,0,0),n.canvas}return this.textureBuffer.canvas},r.prototype.getPixels=function(){var t,e;if(this.renderer.type===c.RENDERER_TYPE.WEBGL){var i=this.renderer.gl;t=this.textureBuffer.size.width,e=this.textureBuffer.size.height;var r=new Uint8Array(4*t*e);return i.bindFramebuffer(i.FRAMEBUFFER,this.textureBuffer.frameBuffer),i.readPixels(0,0,t,e,i.RGBA,i.UNSIGNED_BYTE,r),i.bindFramebuffer(i.FRAMEBUFFER,null),r}return t=this.textureBuffer.canvas.width,e=this.textureBuffer.canvas.height,this.textureBuffer.canvas.getContext("2d").getImageData(0,0,t,e).data},r.prototype.getPixel=function(t,e){if(this.renderer.type===c.RENDERER_TYPE.WEBGL){var i=this.renderer.gl,r=new Uint8Array(4);return i.bindFramebuffer(i.FRAMEBUFFER,this.textureBuffer.frameBuffer),i.readPixels(t,e,1,1,i.RGBA,i.UNSIGNED_BYTE,r),i.bindFramebuffer(i.FRAMEBUFFER,null),r}return this.textureBuffer.canvas.getContext("2d").getImageData(t,e,1,1).data}},{"../const":22,"../math":32,"../renderers/canvas/utils/CanvasBuffer":44,"../renderers/webgl/managers/FilterManager":53,"../renderers/webgl/utils/RenderTarget":64,"./BaseTexture":69,"./Texture":71}],71:[function(t,e,i){function r(t,e,i,n,s){a.call(this),this.noFrame=!1,e||(this.noFrame=!0,e=new h.Rectangle(0,0,1,1)),t instanceof r&&(t=t.baseTexture),this.baseTexture=t,this._frame=e,this.trim=n,this.valid=!1,this.requiresUpdate=!1,this._uvs=null,this.width=0,this.height=0,this.crop=i||e,this.rotate=!!s,t.hasLoaded?(this.noFrame&&(e=new h.Rectangle(0,0,t.width,t.height),t.on("update",this.onBaseTextureUpdated,this)),this.frame=e):t.once("loaded",this.onBaseTextureLoaded,this)}var n=t("./BaseTexture"),s=t("./VideoBaseTexture"),o=t("./TextureUvs"),a=t("eventemitter3"),h=t("../math"),l=t("../utils");r.prototype=Object.create(a.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{frame:{get:function(){return this._frame},set:function(t){if(this._frame=t,this.noFrame=!1,this.width=t.width,this.height=t.height,!this.trim&&!this.rotate&&(t.x+t.width>this.baseTexture.width||t.y+t.height>this.baseTexture.height))throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=t&&t.width&&t.height&&this.baseTexture.hasLoaded,this.trim?(this.width=this.trim.width,this.height=this.trim.height,this._frame.width=this.trim.width,this._frame.height=this.trim.height):this.crop=t,this.valid&&this._updateUvs()}}}),r.prototype.update=function(){this.baseTexture.update()},r.prototype.onBaseTextureLoaded=function(t){this.noFrame?this.frame=new h.Rectangle(0,0,t.width,t.height):this.frame=this._frame,this.emit("update",this)},r.prototype.onBaseTextureUpdated=function(t){this._frame.width=t.width,this._frame.height=t.height,this.emit("update",this)},r.prototype.destroy=function(t){this.baseTexture&&(t&&this.baseTexture.destroy(),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.crop=null,this.valid=!1},r.prototype.clone=function(){return new r(this.baseTexture,this.frame,this.crop,this.trim,this.rotate)},r.prototype._updateUvs=function(){this._uvs||(this._uvs=new o),this._uvs.set(this.crop,this.baseTexture,this.rotate)},r.fromImage=function(t,e,i){var s=l.TextureCache[t];return s||(s=new r(n.fromImage(t,e,i)),l.TextureCache[t]=s),s},r.fromFrame=function(t){var e=l.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return e},r.fromCanvas=function(t,e){return new r(n.fromCanvas(t,e))},r.fromVideo=function(t,e){return"string"==typeof t?r.fromVideoUrl(t,e):new r(s.fromVideo(t,e))},r.fromVideoUrl=function(t,e){return new r(s.fromUrl(t,e))},r.addTextureToCache=function(t,e){l.TextureCache[e]=t},r.removeTextureFromCache=function(t){var e=l.TextureCache[t];return delete l.TextureCache[t],delete l.BaseTextureCache[t],e},r.EMPTY=new r(new n)},{"../math":32,"../utils":76,"./BaseTexture":69,"./TextureUvs":72,"./VideoBaseTexture":73,eventemitter3:11}],72:[function(t,e,i){function r(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1}e.exports=r,r.prototype.set=function(t,e,i){var r=e.width,n=e.height;i?(this.x0=(t.x+t.height)/r,this.y0=t.y/n,this.x1=(t.x+t.height)/r,this.y1=(t.y+t.width)/n,this.x2=t.x/r,this.y2=(t.y+t.width)/n,this.x3=t.x/r,this.y3=t.y/n):(this.x0=t.x/r,this.y0=t.y/n,this.x1=(t.x+t.width)/r,this.y1=t.y/n,this.x2=(t.x+t.width)/r,this.y2=(t.y+t.height)/n,this.x3=t.x/r,this.y3=(t.y+t.height)/n)}},{}],73:[function(t,e,i){function r(t,e){if(!t)throw new Error("No video source element specified.");(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),s.call(this,t,e),this.autoUpdate=!1,this._onUpdate=this._onUpdate.bind(this),this._onCanPlay=this._onCanPlay.bind(this),t.complete||(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("play",this._onPlayStart.bind(this)),t.addEventListener("pause",this._onPlayStop.bind(this))),this.__loaded=!1}function n(t,e){e||(e="video/"+t.substr(t.lastIndexOf(".")+1));var i=document.createElement("source");return i.src=t,i.type=e,i}var s=t("./BaseTexture"),o=t("../utils");r.prototype=Object.create(s.prototype),r.prototype.constructor=r,e.exports=r,r.prototype._onUpdate=function(){this.autoUpdate&&(window.requestAnimationFrame(this._onUpdate),this.update())},r.prototype._onPlayStart=function(){this.autoUpdate||(window.requestAnimationFrame(this._onUpdate),this.autoUpdate=!0)},r.prototype._onPlayStop=function(){this.autoUpdate=!1},r.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.source.play(),this.__loaded||(this.__loaded=!0,this.emit("loaded",this)))},r.prototype.destroy=function(){this.source&&this.source._pixiId&&(delete o.BaseTextureCache[this.source._pixiId],delete this.source._pixiId),s.prototype.destroy.call(this)},r.fromVideo=function(t,e){t._pixiId||(t._pixiId="video_"+o.uuid());var i=o.BaseTextureCache[t._pixiId];return i||(i=new r(t,e),o.BaseTextureCache[t._pixiId]=i),i},r.fromUrl=function(t,e){var i=document.createElement("video");if(Array.isArray(t))for(var s=0;s<t.length;++s)i.appendChild(n(t.src||t,t.mime));else i.appendChild(n(t.src||t,t.mime));return i.load(),i.play(),r.fromVideo(i,e)},r.fromUrls=r.fromUrl},{"../utils":76,"./BaseTexture":69}],74:[function(t,e,i){function r(){var t=this;this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._emitter.listeners(o,!0)&&(t._requestId=requestAnimationFrame(t._tick)))},this._emitter=new s,this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/n.TARGET_FPMS,this.lastTime=0,this.speed=1,this.started=!1}var n=t("../const"),s=t("eventemitter3"),o="tick";Object.defineProperties(r.prototype,{FPS:{get:function(){return 1e3/this.elapsedMS}},minFPS:{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(Math.max(0,t)/1e3,n.TARGET_FPMS);this._maxElapsedMS=1/e}}}),r.prototype._requestIfNeeded=function(){null===this._requestId&&this._emitter.listeners(o,!0)&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},r.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},r.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},r.prototype.add=function(t,e){return this._emitter.on(o,t,e),this._startIfPossible(),this},r.prototype.addOnce=function(t,e){return this._emitter.once(o,t,e),this._startIfPossible(),this},r.prototype.remove=function(t,e){return this._emitter.off(o,t,e),this._emitter.listeners(o,!0)||this._cancelIfNeeded(),this},r.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},r.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},r.prototype.update=function(t){var e;t=t||performance.now(),e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),this.deltaTime=e*n.TARGET_FPMS*this.speed,this._emitter.emit(o,this.deltaTime),this.lastTime=t},e.exports=r},{"../const":22,eventemitter3:11}],75:[function(t,e,i){var r=t("./Ticker"),n=new r;n.autoStart=!0,e.exports={shared:n,Ticker:r}},{"./Ticker":74}],76:[function(t,e,i){var r=t("../const"),n=e.exports={_uid:0,_saidHello:!1,pluginTarget:t("./pluginTarget"),async:t("async"),uuid:function(){return++n._uid},hex2rgb:function(t,e){return e=e||[],e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e},hex2string:function(t){return t=t.toString(16),t="000000".substr(0,6-t.length)+t,"#"+t},rgb2hex:function(t){return(255*t[0]<<16)+(255*t[1]<<8)+255*t[2]},canUseNewCanvasBlendModes:function(){if("undefined"==typeof document)return!1;var t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",e="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",i=new Image;i.src=t+"AP804Oa6"+e;var r=new Image;r.src=t+"/wCKxvRF"+e;var n=document.createElement("canvas");n.width=6,n.height=1;var s=n.getContext("2d");s.globalCompositeOperation="multiply",s.drawImage(i,0,0),s.drawImage(r,2,0);var o=s.getImageData(2,0,1,1).data;return 255===o[0]&&0===o[1]&&0===o[2]},getNextPowerOfTwo:function(t){if(t>0&&0===(t&t-1))return t;for(var e=1;e<t;)e<<=1;return e},isPowerOfTwo:function(t,e){return t>0&&0===(t&t-1)&&e>0&&0===(e&e-1)},getResolutionOfUrl:function(t){var e=r.RETINA_PREFIX.exec(t);return e?parseFloat(e[1]):1},sayHello:function(t){if(!n._saidHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=["\n %c %c %c Pixi.js "+r.VERSION+" -  "+t+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,e)}else window.console&&window.console.log("Pixi.js "+r.VERSION+" - "+t+" - http://www.pixijs.com/");n._saidHello=!0}},isWebGLSupported:function(){var t={stencil:!0};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t);return!(!i||!i.getContextAttributes().stencil)}catch(r){return!1}},TextureCache:{},BaseTextureCache:{}}},{"../const":22,"./pluginTarget":77,async:2}],77:[function(t,e,i){function r(t){t.__plugins={},t.registerPlugin=function(e,i){t.__plugins[e]=i},t.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var e in t.__plugins)this.plugins[e]=new t.__plugins[e](this)},t.prototype.destroyPlugins=function(){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;this.plugins=null}}e.exports={mixin:function(t){r(t)}}},{}],78:[function(t,e,i){var r=t("./core"),n=t("./mesh"),s=t("./extras"),o=t("./core/utils");r.SpriteBatch=function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")},r.AssetLoader=function(){throw new ReferenceError("The loader system was overhauled in pixi v3, please see the new PIXI.loaders.Loader class.")},Object.defineProperties(r,{Stage:{get:function(){return r.Container}},DisplayObjectContainer:{get:function(){return r.Container}},Strip:{get:function(){return n.Mesh}},Rope:{get:function(){return n.Rope}},MovieClip:{get:function(){return s.MovieClip}},TilingSprite:{get:function(){return s.TilingSprite}},BitmapText:{get:function(){return s.BitmapText}},blendModes:{get:function(){return r.BLEND_MODES}},scaleModes:{get:function(){return r.SCALE_MODES}},BaseTextureCache:{get:function(){return o.BaseTextureCache}},TextureCache:{get:function(){return o.TextureCache}}}),r.Sprite.prototype.setTexture=function(t){this.texture=t},s.BitmapText.prototype.setText=function(t){this.text=t},r.Text.prototype.setText=function(t){this.text=t},r.Text.prototype.setStyle=function(t){this.style=t},r.Texture.prototype.setFrame=function(t){this.frame=t}},{"./core":29,"./core/utils":76,"./extras":85,"./mesh":136}],79:[function(t,e,i){function r(t,e){n.Container.call(this),e=e||{},this.textWidth=0,this.textHeight=0,this._glyphs=[],this._font={tint:void 0!==e.tint?e.tint:16777215,align:e.align||"left",name:null,size:0},this.font=e.font,this._text=t,this.maxWidth=0,this.dirty=!1,this.updateText()}var n=t("../core");r.prototype=Object.create(n.Container.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{tint:{get:function(){return this._font.tint},set:function(t){this._font.tint="number"==typeof t&&t>=0?t:16777215,this.dirty=!0}},align:{get:function(){return this._font.align},set:function(t){this._font.align=t||"left",this.dirty=!0}},font:{get:function(){return this._font},set:function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=t.length>=2?parseInt(t[0],10):r.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)}},text:{get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}}}),r.prototype.updateText=function(){for(var t=r.fonts[this._font.name],e=new n.math.Point,i=null,s=[],o=0,a=0,h=[],l=0,c=this._font.size/t.size,u=-1,d=0;d<this.text.length;d++){var p=this.text.charCodeAt(d);if(u=/(\s)/.test(this.text.charAt(d))?d:u,/(?:\r\n|\r|\n)/.test(this.text.charAt(d)))h.push(o),a=Math.max(a,o),l++,e.x=0,e.y+=t.lineHeight,i=null;else if(u!==-1&&this.maxWidth>0&&e.x*c>this.maxWidth)s.splice(u,d-u),d=u,u=-1,h.push(o),a=Math.max(a,o),l++,e.x=0,e.y+=t.lineHeight,i=null;else{var f=t.chars[p];f&&(i&&f.kerning[i]&&(e.x+=f.kerning[i]),s.push({texture:f.texture,line:l,charCode:p,position:new n.math.Point(e.x+f.xOffset,e.y+f.yOffset)}),o=e.x+(f.texture.width+f.xOffset),e.x+=f.xAdvance,i=p)}}h.push(o),a=Math.max(a,o);var m=[];for(d=0;d<=l;d++){var g=0;"right"===this._font.align?g=a-h[d]:"center"===this._font.align&&(g=(a-h[d])/2),m.push(g)}var v=s.length,_=this.tint;for(d=0;d<v;d++){var y=this._glyphs[d];y?y.texture=s[d].texture:(y=new n.Sprite(s[d].texture),this._glyphs.push(y)),y.position.x=(s[d].position.x+m[s[d].line])*c,y.position.y=s[d].position.y*c,y.scale.x=y.scale.y=c,y.tint=_,y.parent||this.addChild(y)}for(d=v;d<this._glyphs.length;++d)this.removeChild(this._glyphs[d]);this.textWidth=a*c,this.textHeight=(e.y+t.lineHeight)*c},r.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},r.prototype.getLocalBounds=function(){return this.validate(),n.Container.prototype.getLocalBounds.call(this)},r.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},r.fonts={}},{"../core":29}],80:[function(t,e,i){function r(t){n.Sprite.call(this,t[0]),this._textures=t,this.animationSpeed=1,this.loop=!0,this.onComplete=null,this._currentTime=0,this.playing=!1}var n=t("../core");r.prototype=Object.create(n.Sprite.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{totalFrames:{get:function(){return this._textures.length}},textures:{get:function(){return this._textures},set:function(t){this._textures=t,this.texture=this._textures[Math.floor(this._currentTime)%this._textures.length]}},currentFrame:{get:function(){return Math.floor(this._currentTime)%this._textures.length}}}),r.prototype.stop=function(){this.playing&&(this.playing=!1,n.ticker.shared.remove(this.update,this))},r.prototype.play=function(){this.playing||(this.playing=!0,n.ticker.shared.add(this.update,this))},r.prototype.gotoAndStop=function(t){this.stop(),this._currentTime=t;var e=Math.floor(this._currentTime);this._texture=this._textures[e%this._textures.length]},r.prototype.gotoAndPlay=function(t){this._currentTime=t,this.play()},r.prototype.update=function(t){this._currentTime+=this.animationSpeed*t;var e=Math.floor(this._currentTime);e<0?this.loop?this._texture=this._textures[this._textures.length-1+e%this._textures.length]:(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this.loop||e<this._textures.length?this._texture=this._textures[e%this._textures.length]:e>=this._textures.length&&(this.gotoAndStop(this.textures.length-1),this.onComplete&&this.onComplete())},r.prototype.destroy=function(){this.stop(),n.Sprite.prototype.destroy.call(this)},r.fromFrames=function(t){for(var e=[],i=0;i<t.length;++i)e.push(new n.Texture.fromFrame(t[i]));return new r(e)},r.fromImages=function(t){for(var e=[],i=0;i<t.length;++i)e.push(new n.Texture.fromImage(t[i]));return new r(e)}},{"../core":29}],81:[function(t,e,i){function r(t,e,i){n.Sprite.call(this,t),this.tileScale=new n.math.Point(1,1),this.tilePosition=new n.math.Point(0,0),this._width=e||100,this._height=i||100,this._uvs=new n.TextureUvs,this._canvasPattern=null,this.shader=new n.AbstractFilter(["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","uniform vec4 uFrame;","uniform vec4 uTransform;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vec2 coord = aTextureCoord;","   coord -= uTransform.xy;","   coord /= uTransform.zw;","   coord /= uFrame.zw;","   vTextureCoord = coord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform vec4 uFrame;","void main(void){","   vec2 coord = fract(vTextureCoord);","   coord *= uFrame.zw;","   coord += uFrame.xy;","   gl_FragColor =  texture2D(uSampler, coord) * vColor ;","}"].join("\n"),{uFrame:{type:"4fv",value:[0,0,1,1]},uTransform:{type:"4fv",value:[0,0,1,1]}})}var n=t("../core"),s=new n.Point;r.prototype=Object.create(n.Sprite.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{width:{get:function(){return this._width},set:function(t){this._width=t}},height:{get:function(){return this._height},set:function(t){this._height=t}}}),r.prototype._onTextureUpdate=function(){},r.prototype._renderWebGL=function(t){var e=this._texture;if(e&&e._uvs){var i=e._uvs,r=e._frame.width,n=e._frame.height,s=e.baseTexture.width,o=e.baseTexture.height;e._uvs=this._uvs,e._frame.width=this.width,e._frame.height=this.height,this.shader.uniforms.uFrame.value[0]=i.x0,this.shader.uniforms.uFrame.value[1]=i.y0,this.shader.uniforms.uFrame.value[2]=i.x1-i.x0,this.shader.uniforms.uFrame.value[3]=i.y2-i.y0,this.shader.uniforms.uTransform.value[0]=this.tilePosition.x%(r*this.tileScale.x)/this._width,this.shader.uniforms.uTransform.value[1]=this.tilePosition.y%(n*this.tileScale.y)/this._height,this.shader.uniforms.uTransform.value[2]=s/this._width*this.tileScale.x,this.shader.uniforms.uTransform.value[3]=o/this._height*this.tileScale.y,t.setObjectRenderer(t.plugins.sprite),t.plugins.sprite.render(this),e._uvs=i,e._frame.width=r,e._frame.height=n}},r.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.hasLoaded){var i=t.context,r=this.worldTransform,s=t.resolution,o=e.baseTexture,a=this.tilePosition.x%(e._frame.width*this.tileScale.x),h=this.tilePosition.y%(e._frame.height*this.tileScale.y);if(!this._canvasPattern){var l=new n.CanvasBuffer(e._frame.width,e._frame.height);l.context.drawImage(o.source,-e._frame.x,-e._frame.y),this._canvasPattern=l.context.createPattern(l.canvas,"repeat")}i.globalAlpha=this.worldAlpha,i.setTransform(r.a*s,r.b*s,r.c*s,r.d*s,r.tx*s,r.ty*s),i.scale(this.tileScale.x,this.tileScale.y),i.translate(a+this.anchor.x*-this._width,h+this.anchor.y*-this._height),this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,i.globalCompositeOperation=t.blendModes[t.currentBlendMode]),i.fillStyle=this._canvasPattern,i.fillRect(-a,-h,this._width/this.tileScale.x,this._height/this.tileScale.y)}},r.prototype.getBounds=function(){var t,e,i,r,n=this._width,s=this._height,o=n*(1-this.anchor.x),a=n*-this.anchor.x,h=s*(1-this.anchor.y),l=s*-this.anchor.y,c=this.worldTransform,u=c.a,d=c.b,p=c.c,f=c.d,m=c.tx,g=c.ty,v=u*a+p*l+m,_=f*l+d*a+g,y=u*o+p*l+m,x=f*l+d*o+g,w=u*o+p*h+m,b=f*h+d*o+g,T=u*a+p*h+m,S=f*h+d*a+g;t=v,t=y<t?y:t,t=w<t?w:t,t=T<t?T:t,i=_,i=x<i?x:i,i=b<i?b:i,i=S<i?S:i,e=v,e=y>e?y:e,e=w>e?w:e,e=T>e?T:e,r=_,r=x>r?x:r,r=b>r?b:r,r=S>r?S:r;var A=this._bounds;return A.x=t,A.width=e-t,A.y=i,A.height=r-i,this._currentBounds=A,A},r.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,s);var e,i=this._width,r=this._height,n=-i*this.anchor.x;return s.x>n&&s.x<n+i&&(e=-r*this.anchor.y,s.y>e&&s.y<e+r)},r.prototype.destroy=function(){n.Sprite.prototype.destroy.call(this),this.tileScale=null,this._tileScaleOffset=null,this.tilePosition=null,this._uvs=null},r.fromFrame=function(t,e,i){var s=n.utils.TextureCache[t];if(!s)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);return new r(s,e,i)},r.fromImage=function(t,e,i,s,o){return new r(n.Texture.fromImage(t,s,o),e,i)}},{"../core":29}],82:[function(t,e,i){var r=t("../core"),n=r.DisplayObject,s=new r.Matrix;n.prototype._cacheAsBitmap=!1,n.prototype._originalRenderWebGL=null,n.prototype._originalRenderCanvas=null,n.prototype._originalUpdateTransform=null,n.prototype._originalHitTest=null,n.prototype._originalDestroy=null,n.prototype._cachedSprite=null,Object.defineProperties(n.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap!==t&&(this._cacheAsBitmap=t,t?(this._originalRenderWebGL=this.renderWebGL,this._originalRenderCanvas=this.renderCanvas,this._originalUpdateTransform=this.updateTransform,this._originalGetBounds=this.getBounds,this._originalDestroy=this.destroy,this._originalContainsPoint=this.containsPoint,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(this._cachedSprite&&this._destroyCachedDisplayObject(),this.renderWebGL=this._originalRenderWebGL,this.renderCanvas=this._originalRenderCanvas,this.getBounds=this._originalGetBounds,this.destroy=this._originalDestroy,this.updateTransform=this._originalUpdateTransform,this.containsPoint=this._originalContainsPoint))}}}),n.prototype._renderCachedWebGL=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cachedSprite.worldAlpha=this.worldAlpha,t.setObjectRenderer(t.plugins.sprite),t.plugins.sprite.render(this._cachedSprite))},n.prototype._initCachedDisplayObject=function(t){if(!this._cachedSprite){t.currentRenderer.flush();var e=this.getLocalBounds().clone();if(this._filters){var i=this._filters[0].padding;e.x-=i,e.y-=i,e.width+=2*i,e.height+=2*i}var n=t.currentRenderTarget,o=t.filterManager.filterStack,a=new r.RenderTexture(t,0|e.width,0|e.height),h=s;h.tx=-e.x,h.ty=-e.y,this.renderWebGL=this._originalRenderWebGL,a.render(this,h,!0,!0),t.setRenderTarget(n),t.filterManager.filterStack=o,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this.getBounds=this._getCachedBounds,this._cachedSprite=new r.Sprite(a),this._cachedSprite.worldTransform=this.worldTransform,this._cachedSprite.anchor.x=-(e.x/e.width),this._cachedSprite.anchor.y=-(e.y/e.height),this.updateTransform(),this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)}},n.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cachedSprite.worldAlpha=this.worldAlpha,this._cachedSprite.renderCanvas(t))},n.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cachedSprite){var e=this.getLocalBounds(),i=t.context,n=new r.RenderTexture(t,0|e.width,0|e.height),o=s;o.tx=-e.x,o.ty=-e.y,this.renderCanvas=this._originalRenderCanvas,n.render(this,o,!0),t.context=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.getBounds=this._getCachedBounds,this._cachedSprite=new r.Sprite(n),this._cachedSprite.worldTransform=this.worldTransform,this._cachedSprite.anchor.x=-(e.x/e.width),this._cachedSprite.anchor.y=-(e.y/e.height),this.updateTransform(),this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)}},n.prototype._getCachedBounds=function(){return this._cachedSprite._currentBounds=null,this._cachedSprite.getBounds()},n.prototype._destroyCachedDisplayObject=function(){this._cachedSprite._texture.destroy(),this._cachedSprite=null},n.prototype._cacheAsBitmapDestroy=function(){this.cacheAsBitmap=!1,this._originalDestroy()}},{"../core":29}],83:[function(t,e,i){var r=t("../core");r.DisplayObject.prototype.name=null,r.Container.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null}},{"../core":29}],84:[function(t,e,i){var r=t("../core");r.DisplayObject.prototype.getGlobalPosition=function(t){return t=t||new r.Point,this.parent?(this.displayObjectUpdateTransform(),t.x=this.worldTransform.tx,t.y=this.worldTransform.ty):(t.x=this.position.x,t.y=this.position.y),t}},{"../core":29}],85:[function(t,e,i){t("./cacheAsBitmap"),t("./getChildByName"),t("./getGlobalPosition"),e.exports={MovieClip:t("./MovieClip"),TilingSprite:t("./TilingSprite"),BitmapText:t("./BitmapText")}},{"./BitmapText":79,"./MovieClip":80,"./TilingSprite":81,"./cacheAsBitmap":82,"./getChildByName":83,"./getGlobalPosition":84}],86:[function(t,e,i){function r(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nuniform vec4 dimensions;\nuniform float pixelSize;\nuniform sampler2D uSampler;\n\nfloat character(float n, vec2 p)\n{\n    p = floor(p*vec2(4.0, -4.0) + 2.5);\n    if (clamp(p.x, 0.0, 4.0) == p.x && clamp(p.y, 0.0, 4.0) == p.y)\n    {\n        if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;\n    }\n    return 0.0;\n}\n\nvoid main()\n{\n    vec2 uv = gl_FragCoord.xy;\n\n    vec3 col = texture2D(uSampler, floor( uv / pixelSize ) * pixelSize / dimensions.xy).rgb;\n\n    float gray = (col.r + col.g + col.b) / 3.0;\n\n    float n =  65536.0;             // .\n    if (gray > 0.2) n = 65600.0;    // :\n    if (gray > 0.3) n = 332772.0;   // *\n    if (gray > 0.4) n = 15255086.0; // o\n    if (gray > 0.5) n = 23385164.0; // &\n    if (gray > 0.6) n = 15252014.0; // 8\n    if (gray > 0.7) n = 13199452.0; // @\n    if (gray > 0.8) n = 11512810.0; // #\n\n    vec2 p = mod( uv / ( pixelSize * 0.5 ), 2.0) - vec2(1.0);\n    col = col * character(n, p);\n\n    gl_FragColor = vec4(col, 1.0);\n}\n",{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"1f",value:8}})}var n=t("../../core");r.prototype=Object.create(n.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(t){this.uniforms.pixelSize.value=t}}})},{"../../core":29}],87:[function(t,e,i){function r(){n.AbstractFilter.call(this),this.blurXFilter=new s,this.blurYFilter=new o,this.defaultFilter=new n.AbstractFilter}var n=t("../../core"),s=t("../blur/BlurXFilter"),o=t("../blur/BlurYFilter");r.prototype=Object.create(n.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.applyFilter=function(t,e,i){var r=t.filterManager.getRenderTarget(!0);this.defaultFilter.applyFilter(t,e,i),this.blurXFilter.applyFilter(t,e,r),t.blendModeManager.setBlendMode(n.BLEND_MODES.SCREEN),this.blurYFilter.applyFilter(t,r,i),t.blendModeManager.setBlendMode(n.BLEND_MODES.NORMAL),t.filterManager.returnRenderTarget(r)},Object.defineProperties(r.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t}},blurX:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}},blurY:{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t}}})},{"../../core":29,"../blur/BlurXFilter":90,"../blur/BlurYFilter":91}],88:[function(t,e,i){function r(t,e){n.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform float dirX;\nuniform float dirY;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[3];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[0] = aTextureCoord + vec2( (0.004 * strength) * dirX, (0.004 * strength) * dirY );\n    vBlurTexCoords[1] = aTextureCoord + vec2( (0.008 * strength) * dirX, (0.008 * strength) * dirY );\n    vBlurTexCoords[2] = aTextureCoord + vec2( (0.012 * strength) * dirX, (0.012 * strength) * dirY );\n\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[3];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vTextureCoord     ) * 0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0]) * 0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1]) * 0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2]) * 0.004431848411938341;\n}\n",{strength:{type:"1f",value:1},dirX:{type:"1f",value:t||0},dirY:{type:"1f",value:e||0}}),this.defaultFilter=new n.AbstractFilter,
this.passes=1,this.dirX=t||0,this.dirY=e||0,this.strength=4}var n=t("../../core");r.prototype=Object.create(n.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.applyFilter=function(t,e,i,r){var n=this.getShader(t);if(this.uniforms.strength.value=this.strength/4/this.passes*(e.frame.width/e.size.width),1===this.passes)t.filterManager.applyFilter(n,e,i,r);else{var s=t.filterManager.getRenderTarget(!0);t.filterManager.applyFilter(n,e,s,r);for(var o=0;o<this.passes-2;o++)t.filterManager.applyFilter(n,s,s,r);t.filterManager.applyFilter(n,s,i,r),t.filterManager.returnRenderTarget(s)}},Object.defineProperties(r.prototype,{blur:{get:function(){return this.strength},set:function(t){this.padding=.5*t,this.strength=t}},dirX:{get:function(){return this.dirX},set:function(t){this.uniforms.dirX.value=t}},dirY:{get:function(){return this.dirY},set:function(t){this.uniforms.dirY.value=t}}})},{"../../core":29}],89:[function(t,e,i){function r(){n.AbstractFilter.call(this),this.blurXFilter=new s,this.blurYFilter=new o}var n=t("../../core"),s=t("./BlurXFilter"),o=t("./BlurYFilter");r.prototype=Object.create(n.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.applyFilter=function(t,e,i){var r=t.filterManager.getRenderTarget(!0);this.blurXFilter.applyFilter(t,e,r),this.blurYFilter.applyFilter(t,r,i),t.filterManager.returnRenderTarget(r)},Object.defineProperties(r.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(t){this.padding=.5*Math.abs(t),this.blurXFilter.blur=this.blurYFilter.blur=t}},passes:{get:function(){return this.blurXFilter.passes},set:function(t){this.blurXFilter.passes=this.blurYFilter.passes=t}},blurX:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}},blurY:{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t}}})},{"../../core":29,"./BlurXFilter":90,"./BlurYFilter":91}],90:[function(t,e,i){function r(){n.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(-0.012 * strength, 0.0);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(-0.008 * strength, 0.0);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(-0.004 * strength, 0.0);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2( 0.004 * strength, 0.0);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2( 0.008 * strength, 0.0);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2( 0.012 * strength, 0.0);\n\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n}\n",{strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}var n=t("../../core");r.prototype=Object.create(n.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.applyFilter=function(t,e,i,r){var n=this.getShader(t);if(this.uniforms.strength.value=this.strength/4/this.passes*(e.frame.width/e.size.width),1===this.passes)t.filterManager.applyFilter(n,e,i,r);else{for(var s=t.filterManager.getRenderTarget(!0),o=e,a=s,h=0;h<this.passes-1;h++){t.filterManager.applyFilter(n,o,a,!0);var l=a;a=o,o=l}t.filterManager.applyFilter(n,o,i,r),t.filterManager.returnRenderTarget(s)}},Object.defineProperties(r.prototype,{blur:{get:function(){return this.strength},set:function(t){this.padding=.5*Math.abs(t),this.strength=t}}})},{"../../core":29}],91:[function(t,e,i){function r(){n.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(0.0, -0.012 * strength);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(0.0, -0.008 * strength);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(0.0, -0.004 * strength);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2(0.0,  0.004 * strength);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2(0.0,  0.008 * strength);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2(0.0,  0.012 * strength);\n\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n}\n",{strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}var n=t("../../core");r.prototype=Object.create(n.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.applyFilter=function(t,e,i,r){var n=this.getShader(t);if(this.uniforms.strength.value=Math.abs(this.strength)/4/this.passes*(e.frame.height/e.size.height),1===this.passes)t.filterManager.applyFilter(n,e,i,r);else{for(var s=t.filterManager.getRenderTarget(!0),o=e,a=s,h=0;h<this.passes-1;h++){t.filterManager.applyFilter(n,o,a,!0);var l=a;a=o,o=l}t.filterManager.applyFilter(n,o,i,r),t.filterManager.returnRenderTarget(s)}},Object.defineProperties(r.prototype,{blur:{get:function(){return this.strength},set:function(t){this.padding=.5*Math.abs(t),this.strength=t}}})},{"../../core":29}],92:[function(t,e,i){function r(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 delta;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta * percent);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n",{delta:{type:"v2",value:{x:.1,y:0}}})}var n=t("../../core");r.prototype=Object.create(n.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r},{"../../core":29}],93:[function(t,e,i){function r(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[25];\n\nvoid main(void)\n{\n\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.r = (m[0] * c.r);\n        gl_FragColor.r += (m[1] * c.g);\n        gl_FragColor.r += (m[2] * c.b);\n        gl_FragColor.r += (m[3] * c.a);\n        gl_FragColor.r += m[4];\n\n    gl_FragColor.g = (m[5] * c.r);\n        gl_FragColor.g += (m[6] * c.g);\n        gl_FragColor.g += (m[7] * c.b);\n        gl_FragColor.g += (m[8] * c.a);\n        gl_FragColor.g += m[9];\n\n     gl_FragColor.b = (m[10] * c.r);\n        gl_FragColor.b += (m[11] * c.g);\n        gl_FragColor.b += (m[12] * c.b);\n        gl_FragColor.b += (m[13] * c.a);\n        gl_FragColor.b += m[14];\n\n     gl_FragColor.a = (m[15] * c.r);\n        gl_FragColor.a += (m[16] * c.g);\n        gl_FragColor.a += (m[17] * c.b);\n        gl_FragColor.a += (m[18] * c.a);\n        gl_FragColor.a += m[19];\n\n}\n",{m:{type:"1fv",value:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]}})}var n=t("../../core");r.prototype=Object.create(n.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,r.prototype._loadMatrix=function(t,e){e=!!e;var i=t;e&&(this._multiply(i,this.uniforms.m.value,t),i=this._colorMatrix(i)),this.uniforms.m.value=i},r.prototype._multiply=function(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19],t},r.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},r.prototype.brightness=function(t,e){var i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},r.prototype.greyscale=function(t,e){var i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},r.prototype.grayscale=r.prototype.greyscale,r.prototype.blackAndWhite=function(t){var e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var i=Math.cos(t),r=Math.sin(t),n=.213,s=.715,o=.072,a=[n+i*(1-n)+r*-n,s+i*-s+r*-s,o+i*-o+r*(1-o),0,0,n+i*-n+.143*r,s+i*(1-s)+.14*r,o+i*-o+r*-.283,0,0,n+i*-n+r*-(1-n),s+i*-s+r*s,o+i*(1-o)+r*o,0,0,0,0,0,1,0];this._loadMatrix(a,e)},r.prototype.contrast=function(t,e){var i=(t||0)+1,r=-128*(i-1),n=[i,0,0,0,r,0,i,0,0,r,0,0,i,0,r,0,0,0,1,0];this._loadMatrix(n,e)},r.prototype.saturate=function(t,e){var i=2*(t||0)/3+1,r=(i-1)*-.5,n=[i,r,r,0,0,r,i,r,0,0,r,r,i,0,0,0,0,0,1,0];this._loadMatrix(n,e)},r.prototype.desaturate=function(t){this.saturate(-1)},r.prototype.negative=function(t){var e=[0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.sepia=function(t){var e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.technicolor=function(t){var e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.polaroid=function(t){var e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.toBGR=function(t){var e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.kodachrome=function(t){var e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.browni=function(t){var e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.vintage=function(t){var e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.colorTone=function(t,e,i,r,n){t=t||.2,e=e||.15,i=i||16770432,r=r||3375104;var s=(i>>16&255)/255,o=(i>>8&255)/255,a=(255&i)/255,h=(r>>16&255)/255,l=(r>>8&255)/255,c=(255&r)/255,u=[.3,.59,.11,0,0,s,o,a,t,0,h,l,c,e,0,s-h,o-l,a-c,0,0];this._loadMatrix(u,n)},r.prototype.night=function(t,e){t=t||.1;var i=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},r.prototype.predator=function(t,e){var i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)},r.prototype.lsd=function(t){var e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.reset=function(){var t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)},Object.defineProperties(r.prototype,{matrix:{get:function(){return this.uniforms.m.value},set:function(t){this.uniforms.m.value=t}}})},{"../../core":29}],94:[function(t,e,i){function r(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float step;\n\nvoid main(void)\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    color = floor(color * step) / step;\n\n    gl_FragColor = color;\n}\n",{step:{type:"1f",value:5}})}var n=t("../../core");r.prototype=Object.create(n.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{step:{get:function(){return this.uniforms.step.value},set:function(t){this.uniforms.step.value=t}}})},{"../../core":29}],95:[function(t,e,i){function r(t,e,i){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying mediump vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 texelSize;\nuniform float matrix[9];\n\nvoid main(void)\n{\n   vec4 c11 = texture2D(uSampler, vTextureCoord - texelSize); // top left\n   vec4 c12 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - texelSize.y)); // top center\n   vec4 c13 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y - texelSize.y)); // top right\n\n   vec4 c21 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y)); // mid left\n   vec4 c22 = texture2D(uSampler, vTextureCoord); // mid center\n   vec4 c23 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y)); // mid right\n\n   vec4 c31 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y + texelSize.y)); // bottom left\n   vec4 c32 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + texelSize.y)); // bottom center\n   vec4 c33 = texture2D(uSampler, vTextureCoord + texelSize); // bottom right\n\n   gl_FragColor =\n       c11 * matrix[0] + c12 * matrix[1] + c13 * matrix[2] +\n       c21 * matrix[3] + c22 * matrix[4] + c23 * matrix[5] +\n       c31 * matrix[6] + c32 * matrix[7] + c33 * matrix[8];\n\n   gl_FragColor.a = c22.a;\n}\n",{matrix:{type:"1fv",value:new Float32Array(t)},texelSize:{type:"v2",value:{x:1/e,y:1/i}}})}var n=t("../../core");r.prototype=Object.create(n.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{matrix:{get:function(){return this.uniforms.matrix.value},set:function(t){this.uniforms.matrix.value=new Float32Array(t)}},width:{get:function(){return 1/this.uniforms.texelSize.value.x},set:function(t){this.uniforms.texelSize.value.x=1/t}},height:{get:function(){return 1/this.uniforms.texelSize.value.y},set:function(t){this.uniforms.texelSize.value.y=1/t}}})},{"../../core":29}],96:[function(t,e,i){function r(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);\n\n    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n\n    if (lum < 1.00)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.75)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.50)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.3)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n}\n")}var n=t("../../core");r.prototype=Object.create(n.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r},{"../../core":29}],97:[function(t,e,i){function r(t){var e=new n.math.Matrix;t.renderable=!1,n.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMapCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vMapCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vMapCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nvoid main(void)\n{\n   vec4 original =  texture2D(uSampler, vTextureCoord);\n   vec4 map =  texture2D(mapSampler, vMapCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y));\n}\n",{mapSampler:{type:"sampler2D",value:t.texture},otherMatrix:{type:"mat3",value:e.toArray(!0)},scale:{type:"v2",value:{x:1,y:1}}}),this.maskSprite=t,this.maskMatrix=e,this.scale=new n.math.Point(20,20)}var n=t("../../core");r.prototype=Object.create(n.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.applyFilter=function(t,e,i){var r=t.filterManager;r.calculateMappedMatrix(e.frame,this.maskSprite,this.maskMatrix),this.uniforms.otherMatrix.value=this.maskMatrix.toArray(!0),this.uniforms.scale.value.x=this.scale.x*(1/e.frame.width),this.uniforms.scale.value.y=this.scale.y*(1/e.frame.height);var n=this.getShader(t);r.applyFilter(n,e,i)},Object.defineProperties(r.prototype,{map:{get:function(){return this.uniforms.mapSampler.value},set:function(t){this.uniforms.mapSampler.value=t}}})},{"../../core":29}],98:[function(t,e,i){function r(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec4 dimensions;\nuniform sampler2D uSampler;\n\nuniform float angle;\nuniform float scale;\n\nfloat pattern()\n{\n   float s = sin(angle), c = cos(angle);\n   vec2 tex = vTextureCoord * dimensions.xy;\n   vec2 point = vec2(\n       c * tex.x - s * tex.y,\n       s * tex.x + c * tex.y\n   ) * scale;\n   return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\nvoid main()\n{\n   vec4 color = texture2D(uSampler, vTextureCoord);\n   float average = (color.r + color.g + color.b) / 3.0;\n   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);\n}\n",{scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}})}var n=t("../../core");r.prototype=Object.create(n.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{scale:{get:function(){return this.uniforms.scale.value},set:function(t){this.uniforms.scale.value=t}},angle:{get:function(){return this.uniforms.angle.value},set:function(t){this.uniforms.angle.value=t}}})},{"../../core":29}],99:[function(t,e,i){function r(){n.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform vec2 offset;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition+offset), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(0.0, -0.012 * strength);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(0.0, -0.008 * strength);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(0.0, -0.004 * strength);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2(0.0,  0.004 * strength);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2(0.0,  0.008 * strength);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2(0.0,  0.012 * strength);\n\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform vec3 color;\nuniform float alpha;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec4 sum = vec4(0.0);\n\n    sum += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    sum += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    sum += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    sum += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    sum += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    sum += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    sum += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n\n    gl_FragColor = vec4( color.rgb * sum.a * alpha, sum.a * alpha );\n}\n",{blur:{type:"1f",value:1/512},color:{type:"c",value:[0,0,0]},alpha:{type:"1f",value:.7},offset:{type:"2f",value:[5,5]},strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}var n=t("../../core");r.prototype=Object.create(n.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.applyFilter=function(t,e,i,r){var n=this.getShader(t);if(this.uniforms.strength.value=this.strength/4/this.passes*(e.frame.height/e.size.height),1===this.passes)t.filterManager.applyFilter(n,e,i,r);else{for(var s=t.filterManager.getRenderTarget(!0),o=e,a=s,h=0;h<this.passes-1;h++){t.filterManager.applyFilter(n,o,a,r);var l=a;a=o,o=l}t.filterManager.applyFilter(n,o,i,r),t.filterManager.returnRenderTarget(s)}},Object.defineProperties(r.prototype,{blur:{get:function(){return this.strength},set:function(t){this.padding=.5*t,this.strength=t}}})},{"../../core":29}],100:[function(t,e,i){function r(){n.AbstractFilter.call(this),this.blurXFilter=new s,this.blurYTintFilter=new o,this.defaultFilter=new n.AbstractFilter,this.padding=30,this._dirtyPosition=!0,this._angle=45*Math.PI/180,this._distance=10,this.alpha=.75,this.hideObject=!1,this.blendMode=n.BLEND_MODES.MULTIPLY}var n=t("../../core"),s=t("../blur/BlurXFilter"),o=t("./BlurYTintFilter");r.prototype=Object.create(n.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.applyFilter=function(t,e,i){var r=t.filterManager.getRenderTarget(!0);this._dirtyPosition&&(this._dirtyPosition=!1,this.blurYTintFilter.uniforms.offset.value[0]=Math.sin(this._angle)*this._distance,this.blurYTintFilter.uniforms.offset.value[1]=Math.cos(this._angle)*this._distance),this.blurXFilter.applyFilter(t,e,r),t.blendModeManager.setBlendMode(this.blendMode),this.blurYTintFilter.applyFilter(t,r,i),t.blendModeManager.setBlendMode(n.BLEND_MODES.NORMAL),this.hideObject||this.defaultFilter.applyFilter(t,e,i),t.filterManager.returnRenderTarget(r)},Object.defineProperties(r.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYTintFilter.blur=t}},blurX:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}},blurY:{get:function(){return this.blurYTintFilter.blur},set:function(t){this.blurYTintFilter.blur=t}},color:{get:function(){return n.utils.rgb2hex(this.blurYTintFilter.uniforms.color.value)},set:function(t){this.blurYTintFilter.uniforms.color.value=n.utils.hex2rgb(t)}},alpha:{get:function(){return this.blurYTintFilter.uniforms.alpha.value},set:function(t){this.blurYTintFilter.uniforms.alpha.value=t}},distance:{get:function(){return this._distance},set:function(t){this._dirtyPosition=!0,this._distance=t}},angle:{get:function(){return this._angle},set:function(t){this._dirtyPosition=!0,this._angle=t}}})},{"../../core":29,"../blur/BlurXFilter":90,"./BlurYTintFilter":99}],101:[function(t,e,i){function r(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float gray;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);\n}\n",{gray:{type:"1f",value:1}})}var n=t("../../core");r.prototype=Object.create(n.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{gray:{get:function(){return this.uniforms.gray.value},set:function(t){this.uniforms.gray.value=t}}})},{"../../core":29}],102:[function(t,e,i){e.exports={AbstractFilter:t("../core/renderers/webgl/filters/AbstractFilter"),FXAAFilter:t("../core/renderers/webgl/filters/FXAAFilter"),SpriteMaskFilter:t("../core/renderers/webgl/filters/SpriteMaskFilter"),AsciiFilter:t("./ascii/AsciiFilter"),BloomFilter:t("./bloom/BloomFilter"),BlurFilter:t("./blur/BlurFilter"),BlurXFilter:t("./blur/BlurXFilter"),BlurYFilter:t("./blur/BlurYFilter"),BlurDirFilter:t("./blur/BlurDirFilter"),ColorMatrixFilter:t("./color/ColorMatrixFilter"),ColorStepFilter:t("./color/ColorStepFilter"),ConvolutionFilter:t("./convolution/ConvolutionFilter"),CrossHatchFilter:t("./crosshatch/CrossHatchFilter"),DisplacementFilter:t("./displacement/DisplacementFilter"),DotScreenFilter:t("./dot/DotScreenFilter"),GrayFilter:t("./gray/GrayFilter"),DropShadowFilter:t("./dropshadow/DropShadowFilter"),InvertFilter:t("./invert/InvertFilter"),NoiseFilter:t("./noise/NoiseFilter"),NormalMapFilter:t("./normal/NormalMapFilter"),PixelateFilter:t("./pixelate/PixelateFilter"),RGBSplitFilter:t("./rgb/RGBSplitFilter"),ShockwaveFilter:t("./shockwave/ShockwaveFilter"),SepiaFilter:t("./sepia/SepiaFilter"),SmartBlurFilter:t("./blur/SmartBlurFilter"),TiltShiftFilter:t("./tiltshift/TiltShiftFilter"),TiltShiftXFilter:t("./tiltshift/TiltShiftXFilter"),TiltShiftYFilter:t("./tiltshift/TiltShiftYFilter"),TwistFilter:t("./twist/TwistFilter")}},{"../core/renderers/webgl/filters/AbstractFilter":49,"../core/renderers/webgl/filters/FXAAFilter":50,"../core/renderers/webgl/filters/SpriteMaskFilter":51,"./ascii/AsciiFilter":86,"./bloom/BloomFilter":87,"./blur/BlurDirFilter":88,"./blur/BlurFilter":89,"./blur/BlurXFilter":90,"./blur/BlurYFilter":91,"./blur/SmartBlurFilter":92,"./color/ColorMatrixFilter":93,"./color/ColorStepFilter":94,"./convolution/ConvolutionFilter":95,"./crosshatch/CrossHatchFilter":96,"./displacement/DisplacementFilter":97,"./dot/DotScreenFilter":98,"./dropshadow/DropShadowFilter":100,"./gray/GrayFilter":101,"./invert/InvertFilter":103,"./noise/NoiseFilter":104,"./normal/NormalMapFilter":105,"./pixelate/PixelateFilter":106,"./rgb/RGBSplitFilter":107,"./sepia/SepiaFilter":108,"./shockwave/ShockwaveFilter":109,"./tiltshift/TiltShiftFilter":111,"./tiltshift/TiltShiftXFilter":112,"./tiltshift/TiltShiftYFilter":113,"./twist/TwistFilter":114}],103:[function(t,e,i){function r(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform float invert;\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);\n}\n",{invert:{type:"1f",value:1}})}var n=t("../../core");r.prototype=Object.create(n.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{invert:{get:function(){return this.uniforms.invert.value},set:function(t){this.uniforms.invert.value=t}}})},{"../../core":29}],104:[function(t,e,i){function r(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float noise;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    float diff = (rand(vTextureCoord) - 0.5) * noise;\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    gl_FragColor = color;\n}\n",{noise:{type:"1f",value:.5}})}var n=t("../../core");r.prototype=Object.create(n.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{noise:{get:function(){return this.uniforms.noise.value},set:function(t){this.uniforms.noise.value=t}}})},{"../../core":29}],105:[function(t,e,i){function r(t){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D displacementMap;\nuniform sampler2D uSampler;\n\nuniform vec4 dimensions;\n\nconst vec2 Resolution = vec2(1.0,1.0);      //resolution of screen\nuniform vec3 LightPos;    //light position, normalized\nconst vec4 LightColor = vec4(1.0, 1.0, 1.0, 1.0);      //light RGBA -- alpha is intensity\nconst vec4 AmbientColor = vec4(1.0, 1.0, 1.0, 0.5);    //ambient RGBA -- alpha is intensity\nconst vec3 Falloff = vec3(0.0, 1.0, 0.2);         //attenuation coefficients\n\nuniform vec3 LightDir; // = vec3(1.0, 0.0, 1.0);\n\nuniform vec2 mapDimensions; // = vec2(256.0, 256.0);\n\n\nvoid main(void)\n{\n    vec2 mapCords = vTextureCoord.xy;\n\n    vec4 color = texture2D(uSampler, vTextureCoord.st);\n    vec3 nColor = texture2D(displacementMap, vTextureCoord.st).rgb;\n\n\n    mapCords *= vec2(dimensions.x/512.0, dimensions.y/512.0);\n\n    mapCords.y *= -1.0;\n    mapCords.y += 1.0;\n\n    // RGBA of our diffuse color\n    vec4 DiffuseColor = texture2D(uSampler, vTextureCoord);\n\n    // RGB of our normal map\n    vec3 NormalMap = texture2D(displacementMap, mapCords).rgb;\n\n    // The delta position of light\n    // vec3 LightDir = vec3(LightPos.xy - (gl_FragCoord.xy / Resolution.xy), LightPos.z);\n    vec3 LightDir = vec3(LightPos.xy - (mapCords.xy), LightPos.z);\n\n    // Correct for aspect ratio\n    // LightDir.x *= Resolution.x / Resolution.y;\n\n    // Determine distance (used for attenuation) BEFORE we normalize our LightDir\n    float D = length(LightDir);\n\n    // normalize our vectors\n    vec3 N = normalize(NormalMap * 2.0 - 1.0);\n    vec3 L = normalize(LightDir);\n\n    // Pre-multiply light color with intensity\n    // Then perform 'N dot L' to determine our diffuse term\n    vec3 Diffuse = (LightColor.rgb * LightColor.a) * max(dot(N, L), 0.0);\n\n    // pre-multiply ambient color with intensity\n    vec3 Ambient = AmbientColor.rgb * AmbientColor.a;\n\n    // calculate attenuation\n    float Attenuation = 1.0 / ( Falloff.x + (Falloff.y*D) + (Falloff.z*D*D) );\n\n    // the calculation which brings it all together\n    vec3 Intensity = Ambient + Diffuse * Attenuation;\n    vec3 FinalColor = DiffuseColor.rgb * Intensity;\n    gl_FragColor = vColor * vec4(FinalColor, DiffuseColor.a);\n\n    // gl_FragColor = vec4(1.0, 0.0, 0.0, Attenuation); // vColor * vec4(FinalColor, DiffuseColor.a);\n\n/*\n    // normalise color\n    vec3 normal = normalize(nColor * 2.0 - 1.0);\n\n    vec3 deltaPos = vec3( (light.xy - gl_FragCoord.xy) / resolution.xy, light.z );\n\n    float lambert = clamp(dot(normal, lightDir), 0.0, 1.0);\n\n    float d = sqrt(dot(deltaPos, deltaPos));\n    float att = 1.0 / ( attenuation.x + (attenuation.y*d) + (attenuation.z*d*d) );\n\n    vec3 result = (ambientColor * ambientIntensity) + (lightColor.rgb * lambert) * att;\n    result *= color.rgb;\n\n    gl_FragColor = vec4(result, 1.0);\n*/\n}\n",{
displacementMap:{type:"sampler2D",value:t},scale:{type:"2f",value:{x:15,y:15}},offset:{type:"2f",value:{x:0,y:0}},mapDimensions:{type:"2f",value:{x:1,y:1}},dimensions:{type:"4f",value:[0,0,0,0]},LightPos:{type:"3f",value:[0,1,0]}}),t.baseTexture._powerOf2=!0,t.baseTexture.hasLoaded?this.onTextureLoaded():t.baseTexture.once("loaded",this.onTextureLoaded,this)}var n=t("../../core");r.prototype=Object.create(n.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.displacementMap.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.displacementMap.value.height},Object.defineProperties(r.prototype,{map:{get:function(){return this.uniforms.displacementMap.value},set:function(t){this.uniforms.displacementMap.value=t}},scale:{get:function(){return this.uniforms.scale.value},set:function(t){this.uniforms.scale.value=t}},offset:{get:function(){return this.uniforms.offset.value},set:function(t){this.uniforms.offset.value=t}}})},{"../../core":29}],106:[function(t,e,i){function r(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 dimensions;\nuniform vec2 pixelSize;\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord;\n\n    vec2 size = dimensions.xy / pixelSize;\n\n    vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;\n\n    gl_FragColor = texture2D(uSampler, color);\n}\n",{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"v2",value:{x:10,y:10}}})}var n=t("../../core");r.prototype=Object.create(n.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(t){this.uniforms.pixelSize.value=t}}})},{"../../core":29}],107:[function(t,e,i){function r(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 dimensions;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nvoid main(void)\n{\n   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;\n   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;\n   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;\n   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;\n}\n",{red:{type:"v2",value:{x:20,y:20}},green:{type:"v2",value:{x:-20,y:20}},blue:{type:"v2",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}})}var n=t("../../core");r.prototype=Object.create(n.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{red:{get:function(){return this.uniforms.red.value},set:function(t){this.uniforms.red.value=t}},green:{get:function(){return this.uniforms.green.value},set:function(t){this.uniforms.green.value=t}},blue:{get:function(){return this.uniforms.blue.value},set:function(t){this.uniforms.blue.value=t}}})},{"../../core":29}],108:[function(t,e,i){function r(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float sepia;\n\nconst mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);\n}\n",{sepia:{type:"1f",value:1}})}var n=t("../../core");r.prototype=Object.create(n.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{sepia:{get:function(){return this.uniforms.sepia.value},set:function(t){this.uniforms.sepia.value=t}}})},{"../../core":29}],109:[function(t,e,i){function r(){n.AbstractFilter.call(this,null,"precision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nuniform vec2 center;\nuniform vec3 params; // 10.0, 0.8, 0.1\nuniform float time;\n\nvoid main()\n{\n    vec2 uv = vTextureCoord;\n    vec2 texCoord = uv;\n\n    float dist = distance(uv, center);\n\n    if ( (dist <= (time + params.z)) && (dist >= (time - params.z)) )\n    {\n        float diff = (dist - time);\n        float powDiff = 1.0 - pow(abs(diff*params.x), params.y);\n\n        float diffTime = diff  * powDiff;\n        vec2 diffUV = normalize(uv - center);\n        texCoord = uv + (diffUV * diffTime);\n    }\n\n    gl_FragColor = texture2D(uSampler, texCoord);\n}\n",{center:{type:"v2",value:{x:.5,y:.5}},params:{type:"v3",value:{x:10,y:.8,z:.1}},time:{type:"1f",value:0}})}var n=t("../../core");r.prototype=Object.create(n.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{center:{get:function(){return this.uniforms.center.value},set:function(t){this.uniforms.center.value=t}},params:{get:function(){return this.uniforms.params.value},set:function(t){this.uniforms.params.value=t}},time:{get:function(){return this.uniforms.time.value},set:function(t){this.uniforms.time.value=t}}})},{"../../core":29}],110:[function(t,e,i){function r(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float blur;\nuniform float gradientBlur;\nuniform vec2 start;\nuniform vec2 end;\nuniform vec2 delta;\nuniform vec2 texSize;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\n    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n",{blur:{type:"1f",value:100},gradientBlur:{type:"1f",value:600},start:{type:"v2",value:{x:0,y:window.innerHeight/2}},end:{type:"v2",value:{x:600,y:window.innerHeight/2}},delta:{type:"v2",value:{x:30,y:30}},texSize:{type:"v2",value:{x:window.innerWidth,y:window.innerHeight}}}),this.updateDelta()}var n=t("../../core");r.prototype=Object.create(n.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.updateDelta=function(){this.uniforms.delta.value.x=0,this.uniforms.delta.value.y=0},Object.defineProperties(r.prototype,{blur:{get:function(){return this.uniforms.blur.value},set:function(t){this.uniforms.blur.value=t}},gradientBlur:{get:function(){return this.uniforms.gradientBlur.value},set:function(t){this.uniforms.gradientBlur.value=t}},start:{get:function(){return this.uniforms.start.value},set:function(t){this.uniforms.start.value=t,this.updateDelta()}},end:{get:function(){return this.uniforms.end.value},set:function(t){this.uniforms.end.value=t,this.updateDelta()}}})},{"../../core":29}],111:[function(t,e,i){function r(){n.AbstractFilter.call(this),this.tiltShiftXFilter=new s,this.tiltShiftYFilter=new o}var n=t("../../core"),s=t("./TiltShiftXFilter"),o=t("./TiltShiftYFilter");r.prototype=Object.create(n.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.applyFilter=function(t,e,i){var r=t.filterManager.getRenderTarget(!0);this.tiltShiftXFilter.applyFilter(t,e,r),this.tiltShiftYFilter.applyFilter(t,r,i),t.filterManager.returnRenderTarget(r)},Object.defineProperties(r.prototype,{blur:{get:function(){return this.tiltShiftXFilter.blur},set:function(t){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=t}},gradientBlur:{get:function(){return this.tiltShiftXFilter.gradientBlur},set:function(t){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=t}},start:{get:function(){return this.tiltShiftXFilter.start},set:function(t){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=t}},end:{get:function(){return this.tiltShiftXFilter.end},set:function(t){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=t}}})},{"../../core":29,"./TiltShiftXFilter":112,"./TiltShiftYFilter":113}],112:[function(t,e,i){function r(){n.call(this)}var n=t("./TiltShiftAxisFilter");r.prototype=Object.create(n.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.updateDelta=function(){var t=this.uniforms.end.value.x-this.uniforms.start.value.x,e=this.uniforms.end.value.y-this.uniforms.start.value.y,i=Math.sqrt(t*t+e*e);this.uniforms.delta.value.x=t/i,this.uniforms.delta.value.y=e/i}},{"./TiltShiftAxisFilter":110}],113:[function(t,e,i){function r(){n.call(this)}var n=t("./TiltShiftAxisFilter");r.prototype=Object.create(n.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.updateDelta=function(){var t=this.uniforms.end.value.x-this.uniforms.start.value.x,e=this.uniforms.end.value.y-this.uniforms.start.value.y,i=Math.sqrt(t*t+e*e);this.uniforms.delta.value.x=-e/i,this.uniforms.delta.value.y=t/i}},{"./TiltShiftAxisFilter":110}],114:[function(t,e,i){function r(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\n\nvoid main(void)\n{\n   vec2 coord = vTextureCoord - offset;\n   float dist = length(coord);\n\n   if (dist < radius)\n   {\n       float ratio = (radius - dist) / radius;\n       float angleMod = ratio * ratio * angle;\n       float s = sin(angleMod);\n       float c = cos(angleMod);\n       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);\n   }\n\n   gl_FragColor = texture2D(uSampler, coord+offset);\n}\n",{radius:{type:"1f",value:.5},angle:{type:"1f",value:5},offset:{type:"v2",value:{x:.5,y:.5}}})}var n=t("../../core");r.prototype=Object.create(n.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{offset:{get:function(){return this.uniforms.offset.value},set:function(t){this.uniforms.offset.value=t}},radius:{get:function(){return this.uniforms.radius.value},set:function(t){this.uniforms.radius.value=t}},angle:{get:function(){return this.uniforms.angle.value},set:function(t){this.uniforms.angle.value=t}}})},{"../../core":29}],115:[function(t,e,i){function r(){n.Container.call(this),this.position=new o.Point3d(0,0,0),this.scale=new o.Point3d(1,1,1),this.rotation=new o.Point3d(0,0,0),this.worldTransform3d=s.mat4.create(),this.is3d=!0}var n=t("../core"),s=t("gl-matrix"),o=t("./math");r.prototype=Object.create(n.Container.prototype),r.prototype.constructor=r,r.prototype.updateTransform=function(){this.parent.convertFrom2dTo3d?this.parent.convertFrom2dTo3d(!0):this.parent.worldTransform3d||(this.parent.worldTransform3d=s.mat4.create()),this.updateTransform3d()},r.prototype.updateTransform3d=function(){this.displayObjectUpdateTransform3d();var t,e;for(t=0,e=this.children.length;t<e;++t)this.children[t].updateTransform3d()},r.prototype.renderWebGL=function(t){this.renderWebGL3d(t)},e.exports=r},{"../core":29,"./math":120,"gl-matrix":12}],116:[function(t,e,i){function r(t){n.Graphics.call(this,t),this.position=new o.Point3d(0,0,0),this.scale=new o.Point3d(1,1,1),this.rotation=new o.Point3d(0,0,0),this.worldTransform3d=s.mat4.create(),this.is3d=!0}var n=t("../core"),s=t("gl-matrix"),o=t("./math");new n.Point;r.prototype=Object.create(n.Graphics.prototype),r.prototype.constructor=r,r.prototype.updateTransform=function(){this.parent.convertFrom2dTo3d?this.parent.convertFrom2dTo3d(!0):this.parent.worldTransform3d||(this.parent.worldTransform3d=s.mat4.create()),this.updateTransform3d()},r.prototype.updateTransform3d=function(){this.displayObjectUpdateTransform3d();var t,e;for(t=0,e=this.children.length;t<e;++t)this.children[t].updateTransform3d()},r.prototype.renderWebGL=function(t){this.renderWebGL3d(t)},e.exports=r},{"../core":29,"./math":120,"gl-matrix":12}],117:[function(t,e,i){function r(t){n.Sprite.call(this,t),this.position=new o.Point3d(0,0,0),this.scale=new o.Point3d(1,1,1),this.rotation=new o.Point3d(0,0,0),this.worldTransform3d=s.mat4.create(),this.is3d=!0}var n=t("../core"),s=t("gl-matrix"),o=t("./math");new n.Point;r.prototype=Object.create(n.Sprite.prototype),r.prototype.constructor=r,r.prototype.updateTransform=function(){this.parent.convertFrom2dTo3d?this.parent.convertFrom2dTo3d(!0):this.parent.worldTransform3d||(this.parent.worldTransform3d=s.mat4.create()),this.updateTransform3d()},r.prototype.updateTransform3d=function(){this.displayObjectUpdateTransform3d();var t,e;for(t=0,e=this.children.length;t<e;++t)this.children[t].updateTransform3d()},r.prototype.renderWebGL=function(t){this.renderWebGL3d(t)},r.fromFrame=function(t){var e=n.utils.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache'+this);return new r(e)},r.fromImage=function(t,e,i){return new r(n.Texture.fromImage(t,e,i))},e.exports=r},{"../core":29,"./math":120,"gl-matrix":12}],118:[function(t,e,i){e.exports={Container3d:t("./Container3d"),Sprite3d:t("./Sprite3d"),Sprite3dRenderer:t("./webgl/Sprite3dRenderer"),Graphics3d:t("./Graphics3d"),Graphics3dRenderer:t("./webgl/Graphics3dRenderer")};var r=t("../core"),n=t("gl-matrix"),s=t("./math"),o=n.mat4.create(),a=n.quat.create(),h=new r.Point;r.Container.prototype.worldTransform3d=null,r.Container.prototype.depthBias=0,r.Container.prototype._customMatrix=null,r.Container.prototype.displayObjectUpdateTransform3d=function(){if(this._customMatrix)n.mat4.multiply(this.worldTransform3d,this.parent.worldTransform3d,this._customMatrix);else{var t=a,e=this.rotation.x,i=this.rotation.y,r=this.rotation.z,s=Math.cos(e/2),h=Math.cos(i/2),l=Math.cos(r/2),c=Math.sin(e/2),u=Math.sin(i/2),d=Math.sin(r/2);t[0]=c*h*l+s*u*d,t[1]=s*u*l-c*h*d,t[2]=s*h*d+c*u*l,t[3]=s*h*l-c*u*d,o[0]=this.position.x,o[1]=this.position.y,o[2]=this.position.z,n.mat4.fromRotationTranslation(this.worldTransform3d,t,o),o[0]=this.scale.x,o[1]=this.scale.y,o[2]=this.scale.z,n.mat4.scale(this.worldTransform3d,this.worldTransform3d,o),n.mat4.multiply(this.worldTransform3d,this.parent.worldTransform3d,this.worldTransform3d)}this.worldAlpha=this.alpha*this.parent.worldAlpha},r.Container.prototype.setMatrix=function(t){this._customMatrix=t},r.Container.prototype.convertFrom2dTo3d=function(t){this.worldTransform3d||(this.worldTransform3d=n.mat4.create());var e=this.worldTransform;if(t){this.displayObjectUpdateTransform();var i=n.mat4.identity(this.worldTransform3d);return i[0]=e.a,i[1]=e.b,i[4]=e.c,i[5]=e.d,i[12]=e.tx,void(i[13]=e.ty)}var r,s,o,a,h,l,c=this.parent.worldTransform;this.rotation%Math.PI*2?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),r=this._cr*this.scale.x,s=this._sr*this.scale.x,o=-this._sr*this.scale.y,a=this._cr*this.scale.y,h=this.position.x,l=this.position.y,(this.pivot.x||this.pivot.y)&&(h-=this.pivot.x*r+this.pivot.y*o,l-=this.pivot.x*s+this.pivot.y*a),e.a=r*c.a+s*c.c,e.b=r*c.b+s*c.d,e.c=o*c.a+a*c.c,e.d=o*c.b+a*c.d,e.tx=h*c.a+l*c.c+c.tx,e.ty=h*c.b+l*c.d+c.ty):(r=this.scale.x,s=0,a=this.scale.y,o=0,h=this.position.x-this.pivot.x*r,l=this.position.y-this.pivot.y*a,e.a=r*c.a,e.b=r*c.b,e.c=a*c.c,e.d=a*c.d,e.tx=h*c.a+l*c.c+c.tx,e.ty=h*c.b+l*c.d+c.ty),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._currentBounds=null;var i=n.mat4.identity(this.worldTransform3d);i[0]=r,i[1]=s,i[4]=o,i[5]=a,i[12]=h,i[13]=l},r.Container.prototype.updateTransform3d=function(){this.convertFrom2dTo3d(),n.mat4.multiply(this.worldTransform3d,this.parent.worldTransform3d,this.worldTransform3d);var t,e;for(t=0,e=this.children.length;t<e;++t)this.children[t].updateTransform3d()},r.Container.prototype.renderWebGL3d=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters){for(t.currentRenderer.flush(),this._filters&&t.filterManager.pushFilter(this,this._filters),this._mask&&t.maskManager.pushMask(this,this._mask),t.currentRenderer.start(),this._renderWebGL3d(t),e=0,i=this.children.length;e<i;e++)this.children[e].renderWebGL3d(t);t.currentRenderer.flush(),this._mask&&t.maskManager.popMask(this,this._mask),this._filters&&t.filterManager.popFilter(),t.currentRenderer.start()}else{this._renderWebGL3d(t);var e,i;for(e=0,i=this.children.length;e<i;++e)this.children[e].renderWebGL3d(t)}},r.Container.prototype._renderWebGL3d=function(){},r.Sprite.prototype.containsPoint=function(t,e){if(this.worldTransform3d)return this.containsPoint3d(t,e);this.worldTransform.applyInverse(t,h);var i,r=this._texture._frame.width,n=this._texture._frame.height,s=-r*this.anchor.x;return h.x>s&&h.x<s+r&&(i=-n*this.anchor.y,h.y>i&&h.y<i+n)},r.Sprite.prototype.containsPoint3d=function(t,e){var i=s.getRayFromScreen(t,e),r=s.get2DContactPoint(i,this);if(!r)return!1;var n,o=this._texture._frame.width,a=this._texture._frame.height,h=-o*this.anchor.x;return r.x>h&&r.x<h+o&&(n=-a*this.anchor.y,r.y>n&&r.y<n+a)},r.Sprite.prototype._renderWebGL3d=function(t){t.setObjectRenderer(t.plugins.sprite3d),t.plugins.sprite3d.render(this)},r.Graphics.prototype._renderWebGL3d=function(t){this.glDirty&&(this.dirty=!0,this.glDirty=!1),t.setObjectRenderer(t.plugins.graphics3d),t.plugins.graphics3d.render(this)},r.Text.prototype._renderWebGL3d=function(t){this.dirty&&this.updateText(),t.setObjectRenderer(t.plugins.sprite3d),t.plugins.sprite3d.render(this)}},{"../core":29,"./Container3d":115,"./Graphics3d":116,"./Sprite3d":117,"./math":120,"./webgl/Graphics3dRenderer":121,"./webgl/Sprite3dRenderer":123,"gl-matrix":12}],119:[function(t,e,i){function r(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0}r.prototype.constructor=r,e.exports=r,r.prototype.clone=function(){return new r(this.x,this.y,this.z)},r.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)}},{}],120:[function(t,e,i){var r=t("gl-matrix"),n=t("./Point3d"),s=r.vec3,o=r.mat4,a=r.mat3,a=r.mat3,h=t("../../core");e.exports={Point3d:n,intersectPlane:function(t,e,i,r,n){var o=s.dot(t,r);if(o>1e-6){var a=s.sub(s.create(),e,i);return n=s.dot(a,t),n/=o}return null},getRayFromScreen:function(t,e){var i=s.create(),r=window.combinedMatrix;if(!r)return[[0,0,0],[0,0,0]];var n=o.invert(o.create(),r);i[0]=t.x/(.5*e.width)-1,i[1]=1-t.y/(.5*e.height),i[2]=0;var a=s.transformMat4(s.create(),i,n);i[2]=.99,i=this.projectionTransformMat4(s.create(),i,n);var h=s.subtract(s.create(),i,a);return h=s.normalize(s.create(),h),[a,h]},projectionTransformMat4:function(t,e,i){var r=e[0],n=e[1],s=e[2],o=i[3]*r+i[7]*n+i[11]*s+i[15];return o=o||1,t[0]=(i[0]*r+i[4]*n+i[8]*s+i[12])/o,t[1]=(i[1]*r+i[5]*n+i[9]*s+i[13])/o,t[2]=(i[2]*r+i[6]*n+i[10]*s+i[14])/o,t},get2DContactPoint:function(t,e){var i=a.normalFromMat4(a.create(),e.worldTransform3d);if(i){var r=[i[6],i[7],i[8]];r[2]<0&&(r[2]*=-1);var n=[e.worldTransform3d[12],e.worldTransform3d[13],e.worldTransform3d[14]],l=this.intersectPlane(r,n,t[0],t[1],1e6);if(l){var c=s.scale(s.create(),t[1],l),u=s.add(s.create(),t[0],c),d=o.invert(o.create(),e.worldTransform3d),p=s.transformMat4(s.create(),u,d);return new h.Point(p[0],p[1])}return null}}}},{"../../core":29,"./Point3d":119,"gl-matrix":12}],121:[function(t,e,i){function r(t){n.call(this,t),this.shader3d=null,this.perspectiveMatrix=[1,0,0,0,0,1,0,0,0,0,1,1,0,0,0,1],this.projection3d=h.mat4.create()}var n=t("../../core/graphics/webgl/GraphicsRenderer"),s=t("../../core/renderers/webgl/WebGLRenderer"),o=t("./Primitive3dShader"),a=t("../../core/utils"),h=t("gl-matrix");r.prototype=Object.create(n.prototype),r.prototype.constructor=r,r.prototype.render=function(t){var e,i=this.renderer,r=i.gl,n=this.shader3d;t.dirty&&this.updateGraphics(t,r);var s=t._webGL[r.id];i.blendModeManager.setBlendMode(t.blendMode);for(var o=0;o<s.data.length;o++)if(1===s.data[o].mode)e=s.data[o],i.stencilManager.pushStencil(t,e,i),r.uniform1f(i.shaderManager.complexPrimitiveShader.uniforms.alpha._location,t.worldAlpha*e.alpha),r.drawElements(r.TRIANGLE_FAN,4,r.UNSIGNED_SHORT,2*(e.indices.length-4)),i.stencilManager.popStencil(t,e,i);else{e=s.data[o],n=this.shader3d,i.shaderManager.setShader(n);var l=this.renderer.currentRenderTarget.projectionMatrix,c=this.projection3d;c[0]=l.a,c[5]=l.d,c[10]=2/1700,c[12]=l.tx,c[13]=l.ty;var u=h.mat4.multiply(h.mat4.create(),this.perspectiveMatrix,c);r.uniformMatrix4fv(n.uniforms.projectionMatrix3d._location,!1,u),r.uniformMatrix4fv(n.uniforms.translationMatrix3d._location,!1,t.worldTransform3d),r.uniform3fv(n.uniforms.tint._location,a.hex2rgb(t.tint)),r.uniform1f(n.uniforms.alpha._location,t.worldAlpha),r.bindBuffer(r.ARRAY_BUFFER,e.buffer),r.vertexAttribPointer(n.attributes.aVertexPosition,2,r.FLOAT,!1,24,0),r.vertexAttribPointer(n.attributes.aColor,4,r.FLOAT,!1,24,8),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e.indexBuffer),r.drawElements(r.TRIANGLE_STRIP,e.indices.length,r.UNSIGNED_SHORT,0)}},r.prototype.onContextChange=function(){this.renderer.gl;this.shader3d=new o(this.renderer.shaderManager)},e.exports=r,s.registerPlugin("graphics3d",r)},{"../../core/graphics/webgl/GraphicsRenderer":27,"../../core/renderers/webgl/WebGLRenderer":48,"../../core/utils":76,"./Primitive3dShader":122,"gl-matrix":12}],122:[function(t,e,i){function r(t){n.call(this,t,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat4 projectionMatrix3d;","uniform mat4 translationMatrix3d;","uniform float alpha;","uniform float flipY;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = projectionMatrix3d * translationMatrix3d * vec4(aVertexPosition, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"),{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},translationMatrix3d:{type:"mat4",value:new Float32Array(16)},projectionMatrix3d:{type:"mat4",value:new Float32Array(16)}},{aVertexPosition:0,aColor:0})}var n=t("../../core/renderers/webgl/shaders/Shader");r.prototype=Object.create(n.prototype),r.prototype.constructor=r,e.exports=r},{"../../core/renderers/webgl/shaders/Shader":60}],123:[function(t,e,i){function r(t){n.call(this,t),this.vertSize=6,this.vertByteSize=4*this.vertSize,this.size=l.SPRITE_BATCH_SIZE;var e=4*this.size*this.vertByteSize,i=7*this.size;this.vertices=new ArrayBuffer(e),this.positions=new Float32Array(this.vertices),this.colors=new Uint32Array(this.vertices),this.indices=new Uint16Array(i),this.lastIndexCount=0;for(var r=0,s=0;r<i;r+=6,s+=4)this.indices[r+0]=s+0,this.indices[r+1]=s+1,this.indices[r+2]=s+2,this.indices[r+3]=s+0,this.indices[r+4]=s+2,this.indices[r+5]=s+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.textures=[],this.blendModes=[],this.shaders=[],this.sprites=[],this.shader=null,this.perspectiveMatrix=[1,0,0,0,0,1,0,0,0,0,1,1,0,0,0,1],this.projection3d=a.mat4.create(),this.combinedMatrix=a.mat4.create()}var n=t("../../core/renderers/webgl/utils/ObjectRenderer"),s=t("../../core/renderers/webgl/shaders/Shader"),o=t("../../core/renderers/webgl/WebGLRenderer"),a=t("gl-matrix"),h=t("./Sprite3dShader"),l=t("../../core/const");r.prototype=Object.create(n.prototype),r.prototype.constructor=r,e.exports=r,o.registerPlugin("sprite3d",r),r.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new h(this.renderer.shaderManager),this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),this.currentBlendMode=99999},r.prototype.render=function(t){var e=t._texture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=e.baseTexture);var i=e._uvs;if(i){var r,n,s,o,a=t.anchor.x,h=t.anchor.y;if(e.trim){var l=e.trim;n=l.x-a*l.width,r=n+e.crop.width,o=l.y-h*l.height,s=o+e.crop.height}else r=e._frame.width*(1-a),n=e._frame.width*-a,s=e._frame.height*(1-h),o=e._frame.height*-h;var c=this.currentBatchSize*this.vertByteSize,u=t.worldTransform3d,d=u[0],p=u[1],f=u[2],m=u[4],g=u[5],v=u[6],_=u[12],y=u[13],x=u[14],w=this.colors,b=this.positions;this.renderer.roundPixels?(b[c]=d*n+m*o+_|0,b[c+1]=p*n+g*o+y|0,b[c+2]=f*n+v*o+x|0,b[c+6]=d*r+m*o+_|0,b[c+7]=p*r+g*o+y|0,b[c+8]=f*r+v*o+x|0,b[c+12]=d*r+m*s+_|0,b[c+13]=p*r+g*s+y|0,b[c+14]=f*r+v*s+x|0,b[c+18]=d*n+m*s+_|0,b[c+19]=p*n+g*s+y|0,b[c+20]=f*n+v*s+x|0):(b[c]=d*n+m*o+_,b[c+1]=p*n+g*o+y,b[c+2]=f*n+v*o+x,b[c+6]=d*r+m*o+_,b[c+7]=p*r+g*o+y,b[c+8]=f*r+v*o+x,b[c+12]=d*r+m*s+_,b[c+13]=p*r+g*s+y,b[c+14]=f*r+v*s+x,b[c+18]=d*n+m*s+_,b[c+19]=p*n+g*s+y,b[c+20]=f*n+v*s+x),b[c+3]=i.x0,b[c+4]=i.y0,b[c+9]=i.x1,b[c+10]=i.y1,b[c+15]=i.x2,b[c+16]=i.y2,b[c+21]=i.x3,b[c+22]=i.y3;var T=t.tint;w[c+5]=w[c+11]=w[c+17]=w[c+23]=(T>>16)+(65280&T)+((255&T)<<16)+(255*t.worldAlpha<<24),this.sprites[this.currentBatchSize++]=t}},r.prototype.flush=function(){if(0!==this.currentBatchSize){var t,e=this.renderer.gl;if(this.currentBatchSize>.5*this.size)e.bufferSubData(e.ARRAY_BUFFER,0,this.vertices);else{var i=this.positions.subarray(0,this.currentBatchSize*this.vertByteSize);e.bufferSubData(e.ARRAY_BUFFER,0,i)}for(var r,n,o,h,l=0,c=0,u=null,d=this.renderer.blendModeManager.currentBlendMode,p=null,f=!1,m=!1,g=0,v=this.currentBatchSize;g<v;g++){if(h=this.sprites[g],r=h._texture.baseTexture,n=h.blendMode,o=h.shader||this.shader,f=d!==n,m=p!==o,(u!==r||f||m)&&(this.renderBatch(u,l,c),c=g,l=0,u=r,f&&(d=n,this.renderer.blendModeManager.setBlendMode(d)),m)){p=o,t=p.shaders?p.shaders[e.id]:p,t||(t=new s(this.renderer.shaderManager,null,p.fragmentSrc,p.uniforms),p.shaders[e.id]=t),this.renderer.shaderManager.setShader(t);var _=this.renderer.currentRenderTarget.projectionMatrix,y=this.projection3d;y[0]=_.a,y[5]=_.d,y[10]=2/1700,y[12]=_.tx,y[13]=_.ty;var x=a.mat4.multiply(a.mat4.create(),this.perspectiveMatrix,y);this.combinedMatrix=x,window.combinedMatrix=x,e.uniformMatrix4fv(t.uniforms.projectionMatrix3d._location,!1,x)}l++}this.renderBatch(u,l,c),this.currentBatchSize=0}},r.prototype.renderBatch=function(t,e,i){if(0!==e){var r=this.renderer.gl;t._glTextures[r.id]?r.bindTexture(r.TEXTURE_2D,t._glTextures[r.id]):this.renderer.updateTexture(t),r.drawElements(r.TRIANGLES,6*e,r.UNSIGNED_SHORT,6*i*2),this.renderer.drawCount++}},r.prototype.start=function(){var t=this.renderer.gl;t.activeTexture(t.TEXTURE0),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.vertByteSize;t.vertexAttribPointer(this.shader.attributes.aVertexPosition,3,t.FLOAT,!1,e,0),t.vertexAttribPointer(this.shader.attributes.aTextureCoord,2,t.FLOAT,!1,e,12),t.vertexAttribPointer(this.shader.attributes.aColor,4,t.UNSIGNED_BYTE,!0,e,20)},r.prototype.stop=function(){var t=this.renderer.gl;this.flush(),t.disable(t.DEPTH_TEST)},r.prototype.destroy=function(){this.renderer.gl.deleteBuffer(this.vertexBuffer),this.renderer.gl.deleteBuffer(this.indexBuffer),this.shader.destroy(),this.renderer=null,this.vertices=null,this.positions=null,this.colors=null,this.indices=null,this.vertexBuffer=null,this.indexBuffer=null,this.currentBaseTexture=null,this.drawing=!1,this.textures=null,this.blendModes=null,this.shaders=null,this.sprites=null,this.shader=null}},{"../../core/const":22,"../../core/renderers/webgl/WebGLRenderer":48,"../../core/renderers/webgl/shaders/Shader":60,"../../core/renderers/webgl/utils/ObjectRenderer":62,"./Sprite3dShader":124,"gl-matrix":12}],124:[function(t,e,i){function r(t,e,i,r,s){var o={uSampler:{type:"sampler2D",value:0},projectionMatrix3d:{type:"mat4",value:new Float32Array(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}};if(r)for(var a in r)o[a]=r[a];var h={aVertexPosition:0,aTextureCoord:0,aColor:0};if(s)for(var l in s)h[l]=s[l];e=e||["precision lowp float;","attribute vec3 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat4 projectionMatrix3d;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   gl_Position = projectionMatrix3d * vec4(aVertexPosition, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"].join("\n"),i=i||["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"].join("\n"),n.call(this,t,e,i,o,h)}var n=t("../../core/renderers/webgl/shaders/Shader");r.prototype=Object.create(n.prototype),r.prototype.constructor=r,e.exports=r},{"../../core/renderers/webgl/shaders/Shader":60}],125:[function(t,e,i){function r(){this.global=new n.Point,this.target=null,this.originalEvent=null}var n=t("../core");r.prototype.constructor=r,e.exports=r,r.prototype.getLocalPosition=function(t,e,i){var r=t.worldTransform,s=i?i:this.global,o=r.a,a=r.c,h=r.tx,l=r.b,c=r.d,u=r.ty,d=1/(o*c+a*-l);return e=e||new n.math.Point,e.x=c*d*s.x+-a*d*s.x+(u*a-h*c)*d,e.y=o*d*s.y+-l*d*s.y+(-u*o+h*l)*d,e}},{"../core":29}],126:[function(t,e,i){function r(t,e){e=e||{},this.renderer=t,this.autoPreventDefault=void 0===e.autoPreventDefault||e.autoPreventDefault,this.interactionFrequency=e.interactionFrequency||10,this.mouse=new s,this.eventData={stopped:!1,target:null,type:null,data:this.mouse,stopPropagation:function(){this.stopped=!0}},this.interactiveDataPool=[],this.interactionDOMElement=null,this.eventsAdded=!1,this.onMouseUp=this.onMouseUp.bind(this),this.processMouseUp=this.processMouseUp.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.processMouseDown=this.processMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.processMouseMove=this.processMouseMove.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.processMouseOverOut=this.processMouseOverOut.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.processTouchStart=this.processTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.processTouchEnd=this.processTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.processTouchMove=this.processTouchMove.bind(this),this.last=0,this.currentCursorStyle="inherit",this._tempPoint=new n.Point,this.resolution=1,this.setTargetElement(this.renderer.view,this.renderer.resolution)}var n=t("../core"),s=t("./InteractionData");Object.assign(n.DisplayObject.prototype,t("./interactiveTarget")),r.prototype.constructor=r,e.exports=r,r.prototype.setTargetElement=function(t,e){this.removeEvents(),this.interactionDOMElement=t,this.resolution=e||1,this.addEvents()},r.prototype.addEvents=function(){this.interactionDOMElement&&(n.ticker.shared.add(this.update,this),window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"),window.document.addEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.addEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.addEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.addEventListener("touchmove",this.onTouchMove,!0),window.addEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!0)},r.prototype.removeEvents=function(){this.interactionDOMElement&&(n.ticker.shared.remove(this.update),window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""),window.document.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),
this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),this.interactionDOMElement=null,window.removeEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!1)},r.prototype.update=function(t){if(this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);this.cursor="inherit",this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!0),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor)}},r.prototype.dispatchEvent=function(t,e,i){i.stopped||(i.target=t,i.type=e,t.emit(e,i),t[e]&&t[e](i))},r.prototype.mapPositionToPoint=function(t,e,i){var r=this.interactionDOMElement.getBoundingClientRect();t.x=(e-r.left)*(this.interactionDOMElement.width/r.width)/this.resolution,t.y=(i-r.top)*(this.interactionDOMElement.height/r.height)/this.resolution},r.prototype.processInteractive=function(t,e,i,r,n){if(!e.visible)return!1;var s=e.children,o=!1;if(n=n||e.interactive,e.interactiveChildren)for(var a=s.length-1;a>=0;a--)!o&&r?o=this.processInteractive(t,s[a],i,!0,n):this.processInteractive(t,s[a],i,!1,!1);return n&&(r&&(e.hitArea?(e.worldTransform.applyInverse(t,this._tempPoint),o=e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)):e.containsPoint&&(o=e.containsPoint(t,this.renderer))),e.interactive&&i(e,o)),o},r.prototype.onMouseDown=function(t){this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.autoPreventDefault&&this.mouse.originalEvent.preventDefault(),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseDown,!0)},r.prototype.processMouseDown=function(t,e){var i=this.mouse.originalEvent,r=2===i.button||3===i.which;e&&(t[r?"_isRightDown":"_isLeftDown"]=!0,this.dispatchEvent(t,r?"rightdown":"mousedown",this.eventData))},r.prototype.onMouseUp=function(t){this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseUp,!0)},r.prototype.processMouseUp=function(t,e){var i=this.mouse.originalEvent,r=2===i.button||3===i.which,n=r?"_isRightDown":"_isLeftDown";e?(this.dispatchEvent(t,r?"rightup":"mouseup",this.eventData),t[n]&&(t[n]=!1,this.dispatchEvent(t,r?"rightclick":"click",this.eventData))):t[n]&&(t[n]=!1,this.dispatchEvent(t,r?"rightupoutside":"mouseupoutside",this.eventData))},r.prototype.onMouseMove=function(t){this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.didMove=!0,this.cursor="inherit",this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseMove,!0),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor)},r.prototype.processMouseMove=function(t,e){this.dispatchEvent(t,"mousemove",this.eventData),this.processMouseOverOut(t,e)},r.prototype.onMouseOut=function(t){this.mouse.originalEvent=t,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.interactionDOMElement.style.cursor="inherit",this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!1)},r.prototype.processMouseOverOut=function(t,e){e?(t._over||(t._over=!0,this.dispatchEvent(t,"mouseover",this.eventData)),t.buttonMode&&(this.cursor=t.defaultCursor)):t._over&&(t._over=!1,this.dispatchEvent(t,"mouseout",this.eventData))},r.prototype.onTouchStart=function(t){this.autoPreventDefault&&t.preventDefault();for(var e=t.changedTouches,i=e.length,r=0;r<i;r++){var n=e[r],s=this.getTouchData(n);s.originalEvent=t,this.eventData.data=s,this.eventData.stopped=!1,this.processInteractive(s.global,this.renderer._lastObjectRendered,this.processTouchStart,!0),this.returnTouchData(s)}},r.prototype.processTouchStart=function(t,e){e&&(t._touchDown=!0,this.dispatchEvent(t,"touchstart",this.eventData))},r.prototype.onTouchEnd=function(t){this.autoPreventDefault&&t.preventDefault();for(var e=t.changedTouches,i=e.length,r=0;r<i;r++){var n=e[r],s=this.getTouchData(n);s.originalEvent=t,this.eventData.data=s,this.eventData.stopped=!1,this.processInteractive(s.global,this.renderer._lastObjectRendered,this.processTouchEnd,!0),this.returnTouchData(s)}},r.prototype.processTouchEnd=function(t,e){e?(this.dispatchEvent(t,"touchend",this.eventData),t._touchDown&&(t._touchDown=!1,this.dispatchEvent(t,"tap",this.eventData))):t._touchDown&&(t._touchDown=!1,this.dispatchEvent(t,"touchendoutside",this.eventData))},r.prototype.onTouchMove=function(t){this.autoPreventDefault&&t.preventDefault();for(var e=t.changedTouches,i=e.length,r=0;r<i;r++){var n=e[r],s=this.getTouchData(n);s.originalEvent=t,this.eventData.data=s,this.eventData.stopped=!1,this.processInteractive(s.global,this.renderer._lastObjectRendered,this.processTouchMove,!1),this.returnTouchData(s)}},r.prototype.processTouchMove=function(t,e){e=e,this.dispatchEvent(t,"touchmove",this.eventData)},r.prototype.getTouchData=function(t){var e=this.interactiveDataPool.pop();return e||(e=new s),e.identifier=t.identifier,this.mapPositionToPoint(e.global,t.clientX,t.clientY),navigator.isCocoonJS&&(e.global.x=e.global.x/this.resolution,e.global.y=e.global.y/this.resolution),t.globalX=e.global.x,t.globalY=e.global.y,e},r.prototype.returnTouchData=function(t){this.interactiveDataPool.push(t)},r.prototype.destroy=function(){this.removeEvents(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactiveDataPool=null,this.interactionDOMElement=null,this.onMouseUp=null,this.processMouseUp=null,this.onMouseDown=null,this.processMouseDown=null,this.onMouseMove=null,this.processMouseMove=null,this.onMouseOut=null,this.processMouseOverOut=null,this.onTouchStart=null,this.processTouchStart=null,this.onTouchEnd=null,this.processTouchEnd=null,this.onTouchMove=null,this.processTouchMove=null,this._tempPoint=null},n.WebGLRenderer.registerPlugin("interaction",r),n.CanvasRenderer.registerPlugin("interaction",r)},{"../core":29,"./InteractionData":125,"./interactiveTarget":128}],127:[function(t,e,i){e.exports={InteractionData:t("./InteractionData"),InteractionManager:t("./InteractionManager"),interactiveTarget:t("./interactiveTarget")}},{"./InteractionData":125,"./InteractionManager":126,"./interactiveTarget":128}],128:[function(t,e,i){var r={interactive:!1,buttonMode:!1,interactiveChildren:!0,defaultCursor:"pointer",_over:!1,_touchDown:!1};e.exports=r},{}],129:[function(t,e,i){function r(t,e){var i={},r=t.data.getElementsByTagName("info")[0],n=t.data.getElementsByTagName("common")[0];i.font=r.getAttribute("face"),i.size=parseInt(r.getAttribute("size"),10),i.lineHeight=parseInt(n.getAttribute("lineHeight"),10),i.chars={};for(var o=t.data.getElementsByTagName("char"),h=0;h<o.length;h++){var l=parseInt(o[h].getAttribute("id"),10),c=new s.math.Rectangle(parseInt(o[h].getAttribute("x"),10)+e.frame.x,parseInt(o[h].getAttribute("y"),10)+e.frame.y,parseInt(o[h].getAttribute("width"),10),parseInt(o[h].getAttribute("height"),10));i.chars[l]={xOffset:parseInt(o[h].getAttribute("xoffset"),10),yOffset:parseInt(o[h].getAttribute("yoffset"),10),xAdvance:parseInt(o[h].getAttribute("xadvance"),10),kerning:{},texture:new s.Texture(e.baseTexture,c)}}var u=t.data.getElementsByTagName("kerning");for(h=0;h<u.length;h++){var d=parseInt(u[h].getAttribute("first"),10),p=parseInt(u[h].getAttribute("second"),10),f=parseInt(u[h].getAttribute("amount"),10);i.chars[p].kerning[d]=f}t.bitmapFont=i,a.BitmapText.fonts[i.font]=i}var n=t("resource-loader").Resource,s=t("../core"),o=t("../core/utils"),a=t("../extras"),h=t("path");e.exports=function(){return function(t,e){if(!t.data||!t.isXml)return e();if(0===t.data.getElementsByTagName("page").length||0===t.data.getElementsByTagName("info").length||null===t.data.getElementsByTagName("info")[0].getAttribute("face"))return e();var i=h.dirname(t.url);"."===i&&(i=""),this.baseUrl&&i&&("/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(i+="/"),i=i.replace(this.baseUrl,"")),i&&"/"!==i.charAt(i.length-1)&&(i+="/");var s=i+t.data.getElementsByTagName("page")[0].getAttribute("file");if(o.TextureCache[s])r(t,o.TextureCache[s]),e();else{var a={crossOrigin:t.crossOrigin,loadType:n.LOAD_TYPE.IMAGE};this.add(t.name+"_image",s,a,function(i){r(t,i.texture),e()})}}}},{"../core":29,"../core/utils":76,"../extras":85,path:3,"resource-loader":18}],130:[function(t,e,i){e.exports={Loader:t("./loader"),bitmapFontParser:t("./bitmapFontParser"),spritesheetParser:t("./spritesheetParser"),textureParser:t("./textureParser"),Resource:t("resource-loader").Resource}},{"./bitmapFontParser":129,"./loader":131,"./spritesheetParser":132,"./textureParser":133,"resource-loader":18}],131:[function(t,e,i){function r(t,e){n.call(this,t,e);for(var i=0;i<r._pixiMiddleware.length;++i)this.use(r._pixiMiddleware[i]())}var n=t("resource-loader"),s=t("./textureParser"),o=t("./spritesheetParser"),a=t("./bitmapFontParser");r.prototype=Object.create(n.prototype),r.prototype.constructor=r,e.exports=r,r._pixiMiddleware=[n.middleware.parsing.blob,s,o,a],r.addPixiMiddleware=function(t){r._pixiMiddleware.push(t)};var h=n.Resource;h.setExtensionXhrType("fnt",h.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":129,"./spritesheetParser":132,"./textureParser":133,"resource-loader":18}],132:[function(t,e,i){var r=t("resource-loader").Resource,n=t("path"),s=t("../core");e.exports=function(){return function(t,e){if(!t.data||!t.isJson||!t.data.frames)return e();var i={crossOrigin:t.crossOrigin,loadType:r.LOAD_TYPE.IMAGE},o=n.dirname(t.url.replace(this.baseUrl,"")),a=s.utils.getResolutionOfUrl(t.url);this.add(t.name+"_image",o+"/"+t.data.meta.image,i,function(i){t.textures={};var r=t.data.frames;for(var n in r){var o=r[n].frame;if(o){var h=null,l=null;if(h=r[n].rotated?new s.math.Rectangle(o.x,o.y,o.h,o.w):new s.math.Rectangle(o.x,o.y,o.w,o.h),r[n].trimmed&&(l=new s.math.Rectangle(r[n].spriteSourceSize.x/a,r[n].spriteSourceSize.y/a,r[n].sourceSize.w/a,r[n].sourceSize.h/a)),r[n].rotated){var c=h.width;h.width=h.height,h.height=c}h.x/=a,h.y/=a,h.width/=a,h.height/=a,t.textures[n]=new s.Texture(i.texture.baseTexture,h,h.clone(),l,r[n].rotated),s.utils.TextureCache[n]=t.textures[n]}}e()})}}},{"../core":29,path:3,"resource-loader":18}],133:[function(t,e,i){var r=t("../core");e.exports=function(){return function(t,e){t.data&&t.isImage&&(t.texture=new r.Texture(new r.BaseTexture(t.data,null,r.utils.getResolutionOfUrl(t.url))),r.utils.TextureCache[t.url]=t.texture),e()}}},{"../core":29}],134:[function(t,e,i){function r(t,e,i,s,o){n.Container.call(this),this._texture=null,this.uvs=i||new Float32Array([0,1,1,1,1,0,0,1]),this.vertices=e||new Float32Array([0,0,100,0,100,100,0,100]),this.indices=s||new Uint16Array([0,1,2,3]),this.dirty=!0,this.blendMode=n.BLEND_MODES.NORMAL,this.canvasPadding=0,this.drawMode=o||r.DRAW_MODES.TRIANGLE_MESH,this.texture=t}var n=t("../core");r.prototype=Object.create(n.Container.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{texture:{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}}),r.prototype._renderWebGL=function(t){t.setObjectRenderer(t.plugins.mesh),t.plugins.mesh.render(this)},r.prototype._renderCanvas=function(t){var e=t.context,i=this.worldTransform;t.roundPixels?e.setTransform(i.a,i.b,i.c,i.d,0|i.tx,0|i.ty):e.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),this.drawMode===r.DRAW_MODES.TRIANGLE_MESH?this._renderCanvasTriangleMesh(e):this._renderCanvasTriangles(e)},r.prototype._renderCanvasTriangleMesh=function(t){for(var e=this.vertices,i=this.uvs,r=e.length/2,n=0;n<r-2;n++){var s=2*n;this._renderCanvasDrawTriangle(t,e,i,s,s+2,s+4)}},r.prototype._renderCanvasTriangles=function(t){for(var e=this.vertices,i=this.uvs,r=this.indices,n=r.length,s=0;s<n;s+=3){var o=2*r[s],a=2*r[s+1],h=2*r[s+2];this._renderCanvasDrawTriangle(t,e,i,o,a,h)}},r.prototype._renderCanvasDrawTriangle=function(t,e,i,r,n,s){var o=this._texture.baseTexture.source,a=this._texture.baseTexture.width,h=this._texture.baseTexture.height,l=e[r],c=e[n],u=e[s],d=e[r+1],p=e[n+1],f=e[s+1],m=i[r]*a,g=i[n]*a,v=i[s]*a,_=i[r+1]*h,y=i[n+1]*h,x=i[s+1]*h;if(this.canvasPadding>0){var w=this.canvasPadding/this.worldTransform.a,b=this.canvasPadding/this.worldTransform.d,T=(l+c+u)/3,S=(d+p+f)/3,A=l-T,C=d-S,E=Math.sqrt(A*A+C*C);l=T+A/E*(E+w),d=S+C/E*(E+b),A=c-T,C=p-S,E=Math.sqrt(A*A+C*C),c=T+A/E*(E+w),p=S+C/E*(E+b),A=u-T,C=f-S,E=Math.sqrt(A*A+C*C),u=T+A/E*(E+w),f=S+C/E*(E+b)}t.save(),t.beginPath(),t.moveTo(l,d),t.lineTo(c,p),t.lineTo(u,f),t.closePath(),t.clip();var M=m*y+_*v+g*x-y*v-_*g-m*x,P=l*y+_*u+c*x-y*u-_*c-l*x,L=m*c+l*v+g*u-c*v-l*g-m*u,R=m*y*u+_*c*v+l*g*x-l*y*v-_*g*u-m*c*x,O=d*y+_*f+p*x-y*f-_*p-d*x,I=m*p+d*v+g*f-p*v-d*g-m*f,D=m*y*f+_*p*v+d*g*x-d*y*v-_*g*f-m*p*x;t.transform(P/M,O/M,L/M,I/M,R/M,D/M),t.drawImage(o,0,0),t.restore()},r.prototype.renderMeshFlat=function(t){var e=this.context,i=t.vertices,r=i.length/2;e.beginPath();for(var n=1;n<r-2;n++){var s=2*n,o=i[s],a=i[s+2],h=i[s+4],l=i[s+1],c=i[s+3],u=i[s+5];e.moveTo(o,l),e.lineTo(a,c),e.lineTo(h,u)}e.fillStyle="#FF0000",e.fill(),e.closePath()},r.prototype._onTextureUpdate=function(){this.updateFrame=!0},r.prototype.getBounds=function(t){for(var e=t||this.worldTransform,i=e.a,r=e.b,s=e.c,o=e.d,a=e.tx,h=e.ty,l=-(1/0),c=-(1/0),u=1/0,d=1/0,p=this.vertices,f=0,m=p.length;f<m;f+=2){var g=p[f],v=p[f+1],_=i*g+s*v+a,y=o*v+r*g+h;u=_<u?_:u,d=y<d?y:d,l=_>l?_:l,c=y>c?y:c}if(u===-(1/0)||c===1/0)return n.math.Rectangle.EMPTY;var x=this._bounds;return x.x=u,x.width=l-u,x.y=d,x.height=c-d,this._currentBounds=x,x},r.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":29}],135:[function(t,e,i){function r(t,e){n.call(this,t),this.points=e,this.vertices=new Float32Array(4*e.length),this.uvs=new Float32Array(4*e.length),this.colors=new Float32Array(2*e.length),this.indices=new Uint16Array(2*e.length),this._ready=!0,this.refresh()}var n=t("./Mesh"),s=t("../core");r.prototype=Object.create(n.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.refresh=function(){var t=this.points;if(!(t.length<1)&&this._texture._uvs){var e=this.uvs,i=this.indices,r=this.colors,n=this._texture._uvs,o=new s.math.Point(n.x0,n.y0),a=new s.math.Point(n.x2-n.x0,n.y2-n.y0);e[0]=0+o.x,e[1]=0+o.y,e[2]=0+o.x,e[3]=1*a.y+o.y,r[0]=1,r[1]=1,i[0]=0,i[1]=1;for(var h,l,c,u=t.length,d=1;d<u;d++)h=t[d],l=4*d,c=d/(u-1),e[l]=c*a.x+o.x,e[l+1]=0+o.y,e[l+2]=c*a.x+o.x,e[l+3]=1*a.y+o.y,l=2*d,r[l]=1,r[l+1]=1,l=2*d,i[l]=l,i[l+1]=l+1;this.dirty=!0}},r.prototype._onTextureUpdate=function(){n.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},r.prototype.updateTransform=function(){var t=this.points;if(!(t.length<1)){for(var e,i,r,n,s,o,a=t[0],h=0,l=0,c=this.vertices,u=t.length,d=0;d<u;d++)i=t[d],r=4*d,e=d<t.length-1?t[d+1]:i,l=-(e.x-a.x),h=e.y-a.y,n=10*(1-d/(u-1)),n>1&&(n=1),s=Math.sqrt(h*h+l*l),o=this._texture.height/2,h/=s,l/=s,h*=o,l*=o,c[r]=i.x+h,c[r+1]=i.y+l,c[r+2]=i.x-h,c[r+3]=i.y-l,a=i;this.containerUpdateTransform()}}},{"../core":29,"./Mesh":134}],136:[function(t,e,i){e.exports={Mesh:t("./Mesh"),Rope:t("./Rope"),MeshRenderer:t("./webgl/MeshRenderer"),MeshShader:t("./webgl/MeshShader")}},{"./Mesh":134,"./Rope":135,"./webgl/MeshRenderer":137,"./webgl/MeshShader":138}],137:[function(t,e,i){function r(t){n.call(this,t),this.indices=new Uint16Array(15e3);for(var e=0,i=0;e<15e3;e+=6,i+=4)this.indices[e+0]=i+0,this.indices[e+1]=i+1,this.indices[e+2]=i+2,this.indices[e+3]=i+0,this.indices[e+4]=i+2,this.indices[e+5]=i+3}var n=t("../../core/renderers/webgl/utils/ObjectRenderer"),s=t("../../core/renderers/webgl/WebGLRenderer"),o=t("../Mesh");r.prototype=Object.create(n.prototype),r.prototype.constructor=r,e.exports=r,s.registerPlugin("mesh",r),r.prototype.onContextChange=function(){},r.prototype.render=function(t){t._vertexBuffer||this._initWebGL(t);var e=this.renderer,i=e.gl,r=t._texture.baseTexture,n=e.shaderManager.plugins.meshShader,s=t.drawMode===o.DRAW_MODES.TRIANGLE_MESH?i.TRIANGLE_STRIP:i.TRIANGLES;e.blendModeManager.setBlendMode(t.blendMode),i.uniformMatrix3fv(n.uniforms.translationMatrix._location,!1,t.worldTransform.toArray(!0)),i.uniformMatrix3fv(n.uniforms.projectionMatrix._location,!1,e.currentRenderTarget.projectionMatrix.toArray(!0)),i.uniform1f(n.uniforms.alpha._location,t.worldAlpha),t.dirty?(t.dirty=!1,i.bindBuffer(i.ARRAY_BUFFER,t._vertexBuffer),i.bufferData(i.ARRAY_BUFFER,t.vertices,i.STATIC_DRAW),i.vertexAttribPointer(n.attributes.aVertexPosition,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,t._uvBuffer),i.bufferData(i.ARRAY_BUFFER,t.uvs,i.STATIC_DRAW),i.vertexAttribPointer(n.attributes.aTextureCoord,2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),r._glTextures[i.id]?i.bindTexture(i.TEXTURE_2D,r._glTextures[i.id]):this.renderer.updateTexture(r),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t._indexBuffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,t.indices,i.STATIC_DRAW)):(i.bindBuffer(i.ARRAY_BUFFER,t._vertexBuffer),i.bufferSubData(i.ARRAY_BUFFER,0,t.vertices),i.vertexAttribPointer(n.attributes.aVertexPosition,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,t._uvBuffer),i.vertexAttribPointer(n.attributes.aTextureCoord,2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),r._glTextures[i.id]?i.bindTexture(i.TEXTURE_2D,r._glTextures[i.id]):this.renderer.updateTexture(r),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t._indexBuffer),i.bufferSubData(i.ELEMENT_ARRAY_BUFFER,0,t.indices)),i.drawElements(s,t.indices.length,i.UNSIGNED_SHORT,0)},r.prototype._initWebGL=function(t){var e=this.renderer.gl;t._vertexBuffer=e.createBuffer(),t._indexBuffer=e.createBuffer(),t._uvBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,t._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,t.vertices,e.DYNAMIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,t._uvBuffer),e.bufferData(e.ARRAY_BUFFER,t.uvs,e.STATIC_DRAW),t.colors&&(t._colorBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,t._colorBuffer),e.bufferData(e.ARRAY_BUFFER,t.colors,e.STATIC_DRAW)),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,t.indices,e.STATIC_DRAW)},r.prototype.flush=function(){},r.prototype.start=function(){var t=this.renderer.shaderManager.plugins.meshShader;this.renderer.shaderManager.setShader(t)},r.prototype.destroy=function(){}},{"../../core/renderers/webgl/WebGLRenderer":48,"../../core/renderers/webgl/utils/ObjectRenderer":62,"../Mesh":134}],138:[function(t,e,i){function r(t){n.Shader.call(this,t,["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","uniform float alpha;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * alpha ;","}"].join("\n"),{alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aTextureCoord:0})}var n=t("../../core");r.prototype=Object.create(n.Shader.prototype),r.prototype.constructor=r,e.exports=r,n.ShaderManager.registerPlugin("meshShader",r)},{"../../core":29}],139:[function(t,e,i){Object.assign||(Object.assign=t("object-assign"))},{"object-assign":13}],140:[function(t,e,i){t("./Object.assign"),t("./requestAnimationFrame")},{"./Object.assign":139,"./requestAnimationFrame":141}],141:[function(t,e,i){(function(t){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!t.performance||!t.performance.now){var e=Date.now();t.performance||(t.performance={}),t.performance.now=function(){return Date.now()-e}}for(var i=Date.now(),r=["ms","moz","webkit","o"],n=0;n<r.length&&!t.requestAnimationFrame;++n)t.requestAnimationFrame=t[r[n]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[r[n]+"CancelAnimationFrame"]||t[r[n]+"CancelRequestAnimationFrame"];t.requestAnimationFrame||(t.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),r=16+i-e;return r<0&&(r=0),i=e,setTimeout(function(){i=Date.now(),t(performance.now())},r)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){clearTimeout(t)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)}),function(t){function e(t,e,i,r,n){this._listener=e,this._isOnce=i,this.context=r,this._signal=t,this._priority=n||0}function i(t,e){if("function"!=typeof t)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",e))}function r(){this._bindings=[],this._prevParams=null;var t=this;this.dispatch=function(){r.prototype.dispatch.apply(t,arguments)}}e.prototype={active:!0,params:null,execute:function(t){var e,i;return this.active&&this._listener&&(i=this.params?this.params.concat(t):t,e=this._listener.apply(this.context,i),this._isOnce&&this.detach()),e},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},r.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(t,i,r,n){var s,o=this._indexOfListener(t,r);if(o!==-1){if(s=this._bindings[o],s.isOnce()!==i)throw new Error("You cannot add"+(i?"":"Once")+"() then add"+(i?"Once":"")+"() the same listener without removing the relationship first.")}else s=new e(this,t,i,r,n),this._addBinding(s);return this.memorize&&this._prevParams&&s.execute(this._prevParams),s},_addBinding:function(t){var e=this._bindings.length;do--e;while(this._bindings[e]&&t._priority<=this._bindings[e]._priority);this._bindings.splice(e+1,0,t)},_indexOfListener:function(t,e){for(var i,r=this._bindings.length;r--;)if(i=this._bindings[r],i._listener===t&&i.context===e)return r;return-1},has:function(t,e){return this._indexOfListener(t,e)!==-1},add:function(t,e,r){return i(t,"add"),this._registerListener(t,!1,e,r)},addOnce:function(t,e,r){return i(t,"addOnce"),this._registerListener(t,!0,e,r)},remove:function(t,e){i(t,"remove");var r=this._indexOfListener(t,e);return r!==-1&&(this._bindings[r]._destroy(),this._bindings.splice(r,1)),t},removeAll:function(){for(var t=this._bindings.length;t--;)this._bindings[t]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(t){if(this.active){var e,i=Array.prototype.slice.call(arguments),r=this._bindings.length;if(this.memorize&&(this._prevParams=i),r){e=this._bindings.slice(),this._shouldPropagate=!0;do r--;while(e[r]&&this._shouldPropagate&&e[r].execute(i)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var n=r;n.Signal=r,"function"==typeof define&&define.amd?define("signals",[],function(){return n}):"undefined"!=typeof module&&module.exports?module.exports=n:t.signals=n}(this),define("fido/loader/Cache",["require","exports","module"],function(t,e,i){var r=function(){this._json={},this._text={}};r.prototype.addJson=function(t,e){this._json[e]=t},r.prototype.addText=function(t,e){this._text[e]=t},r.prototype.getJson=function(t){return this._json[t]?this._json[t]:null},r.prototype.getText=function(t){if(this._text[t])return this._text[t]},i.exports=new r}),function(t,e,i){function r(t,e,i){return t.call.apply(t.bind,arguments)}function n(t,e,i){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function s(t,e,i){return s=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?r:n,s.apply(null,arguments)}function o(t,e){this.J=t,this.t=e||t,this.C=this.t.document}function a(t,i,r){t=t.C.getElementsByTagName(i)[0],t||(t=e.documentElement),t&&t.lastChild&&t.insertBefore(r,t.lastChild)}function h(t,e){function i(){t.C.body?e():setTimeout(i,0)}i()}function l(t,e,i){e=e||[],i=i||[];for(var r=t.className.split(/\s+/),n=0;n<e.length;n+=1){for(var s=!1,o=0;o<r.length;o+=1)if(e[n]===r[o]){s=!0;break}s||r.push(e[n])}for(e=[],n=0;n<r.length;n+=1){for(s=!1,o=0;o<i.length;o+=1)if(r[n]===i[o]){s=!0;break}s||e.push(r[n])}t.className=e.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function c(t,e){for(var i=t.className.split(/\s+/),r=0,n=i.length;r<n;r++)if(i[r]==e)return!0;return!1}function u(t){if("string"==typeof t.ma)return t.ma;var e=t.t.location.protocol;return"about:"==e&&(e=t.J.location.protocol),"https:"==e?"https:":"http:"}function d(t,e){var i=t.createElement("link",{rel:"stylesheet",href:e}),r=!1;i.onload=function(){r||(r=!0)},i.onerror=function(){r||(r=!0)},a(t,"head",i)}function p(e,i,r,n){var s=e.C.getElementsByTagName("head")[0];if(s){var o=e.createElement("script",{src:i}),a=!1;return o.onload=o.onreadystatechange=function(){a||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(a=!0,r&&r(null),o.onload=o.onreadystatechange=null,"HEAD"==o.parentNode.tagName&&s.removeChild(o))},s.appendChild(o),t.setTimeout(function(){a||(a=!0,r&&r(Error("Script load timeout")))},n||5e3),o}return null}function f(t,e){this.X=t,this.fa=e}function m(t,e,i,r){this.c=null!=t?t:null,this.g=null!=e?e:null,this.A=null!=i?i:null,this.e=null!=r?r:null}function g(t){t=Q.exec(t);var e=null,i=null,r=null,n=null;return t&&(null!==t[1]&&t[1]&&(e=parseInt(t[1],10)),null!==t[2]&&t[2]&&(i=parseInt(t[2],10)),null!==t[3]&&t[3]&&(r=parseInt(t[3],10)),null!==t[4]&&t[4]&&(n=/^[0-9]+$/.test(t[4])?parseInt(t[4],10):t[4])),new m(e,i,r,n)}function v(t,e,i,r,n,s,o,a){this.M=t,this.k=a}function _(t){this.a=t}function y(t){var e=b(t.a,/(iPod|iPad|iPhone|Android|Windows Phone|BB\d{2}|BlackBerry)/,1);return""!=e?(/BB\d{2}/.test(e)&&(e="BlackBerry"),e):(t=b(t.a,/(Linux|Mac_PowerPC|Macintosh|Windows|CrOS|PlayStation|CrKey)/,1),""!=t?("Mac_PowerPC"==t?t="Macintosh":"PlayStation"==t&&(t="Linux"),t):"Unknown")}function x(t){var e=b(t.a,/(OS X|Windows NT|Android) ([^;)]+)/,2);if(e||(e=b(t.a,/Windows Phone( OS)? ([^;)]+)/,2))||(e=b(t.a,/(iPhone )?OS ([\d_]+)/,2)))return e;if(e=b(t.a,/(?:Linux|CrOS|CrKey) ([^;)]+)/,1))for(var e=e.split(/\s/),i=0;i<e.length;i+=1)if(/^[\d\._]+$/.test(e[i]))return e[i];return(t=b(t.a,/(BB\d{2}|BlackBerry).*?Version\/([^\s]*)/,2))?t:"Unknown"}function w(t){var e=y(t),i=g(x(t)),r=g(b(t.a,/AppleWeb(?:K|k)it\/([\d\.\+]+)/,1)),n="Unknown",s=new m,s="Unknown",o=!1;return/OPR\/[\d.]+/.test(t.a)?n="Opera":-1!=t.a.indexOf("Chrome")||-1!=t.a.indexOf("CrMo")||-1!=t.a.indexOf("CriOS")?n="Chrome":/Silk\/\d/.test(t.a)?n="Silk":"BlackBerry"==e||"Android"==e?n="BuiltinBrowser":-1!=t.a.indexOf("PhantomJS")?n="PhantomJS":-1!=t.a.indexOf("Safari")?n="Safari":-1!=t.a.indexOf("AdobeAIR")?n="AdobeAIR":-1!=t.a.indexOf("PlayStation")&&(n="BuiltinBrowser"),"BuiltinBrowser"==n?s="Unknown":"Silk"==n?s=b(t.a,/Silk\/([\d\._]+)/,1):"Chrome"==n?s=b(t.a,/(Chrome|CrMo|CriOS)\/([\d\.]+)/,2):-1!=t.a.indexOf("Version/")?s=b(t.a,/Version\/([\d\.\w]+)/,1):"AdobeAIR"==n?s=b(t.a,/AdobeAIR\/([\d\.]+)/,1):"Opera"==n?s=b(t.a,/OPR\/([\d.]+)/,1):"PhantomJS"==n&&(s=b(t.a,/PhantomJS\/([\d.]+)/,1)),s=g(s),o="AdobeAIR"==n?2<s.c||2==s.c&&5<=s.g:"BlackBerry"==e?10<=i.c:"Android"==e?2<i.c||2==i.c&&1<i.g:526<=r.c||525<=r.c&&13<=r.g,new v(n,0,0,0,0,0,0,new f(o,536>r.c||536==r.c&&11>r.g))}function b(t,e,i){return(t=t.match(e))&&t[i]?t[i]:""}function T(t){this.la=t||"-"}function S(t,e){this.M=t,this.Y=4,this.N="n";var i=(e||"n4").match(/^([nio])([1-9])$/i);i&&(this.N=i[1],this.Y=parseInt(i[2],10))}function A(t){return t.N+t.Y}function C(t){var e=4,i="n",r=null;return t&&((r=t.match(/(normal|oblique|italic)/i))&&r[1]&&(i=r[1].substr(0,1).toLowerCase()),(r=t.match(/([1-9]00|normal|bold)/i))&&r[1]&&(/bold/i.test(r[1])?e=7:/[1-9]00/.test(r[1])&&(e=parseInt(r[1].substr(0,1),10)))),i+e}function E(t,e){this.d=t,this.p=t.t.document.documentElement,this.P=e,this.j="wf",this.h=new T("-"),this.ga=!1!==e.events,this.B=!1!==e.classes}function M(t){if(t.B){var e=c(t.p,t.h.e(t.j,"active")),i=[],r=[t.h.e(t.j,"loading")];e||i.push(t.h.e(t.j,"inactive")),l(t.p,i,r)}P(t,"inactive")}function P(t,e,i){t.ga&&t.P[e]&&(i?t.P[e](i.getName(),A(i)):t.P[e]())}function L(){this.w={}}function R(t,e){this.d=t,this.G=e,this.m=this.d.createElement("span",{"aria-hidden":"true"},this.G)}function O(t){a(t.d,"body",t.m)}function I(t){var e;e=[];for(var i=t.M.split(/,\s*/),r=0;r<i.length;r++){var n=i[r].replace(/['"]/g,"");-1==n.indexOf(" ")?e.push(n):e.push("'"+n+"'")}return e=e.join(","),i="normal","o"===t.N?i="oblique":"i"===t.N&&(i="italic"),"display:block;position:absolute;top:-999px;left:-999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+e+";"+("font-style:"+i+";font-weight:"+(t.Y+"00")+";")}function D(t,e,i,r,n,s,o,a){this.Z=t,this.ja=e,this.d=i,this.s=r,this.G=a||"BESbswy",this.k=n,this.I={},this.W=s||3e3,this.ba=o||null,this.F=this.D=null,t=new R(this.d,this.G),O(t);for(var h in tt)tt.hasOwnProperty(h)&&(e=new S(tt[h],A(this.s)),e=I(e),t.m.style.cssText=e,this.I[tt[h]]=t.m.offsetWidth);t.remove()}function B(t,e,i){for(var r in tt)if(tt.hasOwnProperty(r)&&e===t.I[tt[r]]&&i===t.I[tt[r]])return!0;return!1}function k(t){var e=t.D.m.offsetWidth,i=t.F.m.offsetWidth;e===t.I.serif&&i===t.I["sans-serif"]||t.k.fa&&B(t,e,i)?K()-t.na>=t.W?t.k.fa&&B(t,e,i)&&(null===t.ba||t.ba.hasOwnProperty(t.s.getName()))?j(t,t.Z):j(t,t.ja):F(t):j(t,t.Z)}function F(t){setTimeout(s(function(){k(this)},t),25)}function j(t,e){t.D.remove(),t.F.remove(),e(t.s)}function N(t,e,i,r){this.d=e,this.u=i,this.R=0,this.da=this.aa=!1,this.W=r,this.k=t.k}function U(t,e,i,r,n){if(i=i||{},0===e.length&&n)M(t.u);else for(t.R+=e.length,n&&(t.aa=n),n=0;n<e.length;n++){var o=e[n],a=i[o.getName()],h=t.u,c=o;h.B&&l(h.p,[h.h.e(h.j,c.getName(),A(c).toString(),"loading")]),P(h,"fontloading",c),h=null,h=new D(s(t.ha,t),s(t.ia,t),t.d,o,t.k,t.W,r,a),h.start()}}function H(t){0==--t.R&&t.aa&&(t.da?(t=t.u,t.B&&l(t.p,[t.h.e(t.j,"active")],[t.h.e(t.j,"loading"),t.h.e(t.j,"inactive")]),P(t,"active")):M(t.u))}function X(t){this.J=t,this.v=new L,this.oa=new _(t.navigator.userAgent),this.a=this.oa.parse(),this.T=this.U=0,this.Q=this.S=!0}function G(t,e,i,r,n){var s=0==--t.U;(t.Q||t.S)&&setTimeout(function(){U(e,i,r||null,n||null,s)},0)}function q(t,e,i){this.O=t?t:e+et,this.q=[],this.V=[],this.ea=i||""}function Y(t){this.q=t,this.ca=[],this.L={}}function z(t,e){this.a=new _(navigator.userAgent).parse(),this.d=t,this.f=e}function W(t,e){this.d=t,this.f=e,this.o=[]}function V(t,e){
this.d=t,this.f=e,this.o=[]}function J(t,e){this.d=t,this.f=e,this.o=[]}function Z(t,e){this.d=t,this.f=e}var K=Date.now||function(){return+new Date};o.prototype.createElement=function(t,e,i){if(t=this.C.createElement(t),e)for(var r in e)e.hasOwnProperty(r)&&("style"==r?t.style.cssText=e[r]:t.setAttribute(r,e[r]));return i&&t.appendChild(this.C.createTextNode(i)),t};var Q=/^([0-9]+)(?:[\._-]([0-9]+))?(?:[\._-]([0-9]+))?(?:[\._+-]?(.*))?$/;m.prototype.compare=function(t){return this.c>t.c||this.c===t.c&&this.g>t.g||this.c===t.c&&this.g===t.g&&this.A>t.A?1:this.c<t.c||this.c===t.c&&this.g<t.g||this.c===t.c&&this.g===t.g&&this.A<t.A?-1:0},m.prototype.toString=function(){return[this.c,this.g||"",this.A||"",this.e||""].join("")},v.prototype.getName=function(){return this.M};var $=new v("Unknown",0,0,0,0,0,0,new f((!1),(!1)));_.prototype.parse=function(){var t;if(-1!=this.a.indexOf("MSIE")||-1!=this.a.indexOf("Trident/")){t=y(this);var e=g(x(this)),i=null,r=b(this.a,/Trident\/([\d\w\.]+)/,1),i=g(-1!=this.a.indexOf("MSIE")?b(this.a,/MSIE ([\d\w\.]+)/,1):b(this.a,/rv:([\d\w\.]+)/,1));""!=r&&g(r),t=new v("MSIE",0,0,0,0,0,0,new f("Windows"==t&&6<=i.c||"Windows Phone"==t&&8<=e.c,(!1)))}else if(-1!=this.a.indexOf("Opera"))t:if(t=g(b(this.a,/Presto\/([\d\w\.]+)/,1)),g(x(this)),null!==t.c||g(b(this.a,/rv:([^\)]+)/,1)),-1!=this.a.indexOf("Opera Mini/"))t=g(b(this.a,/Opera Mini\/([\d\.]+)/,1)),t=new v("OperaMini",0,0,0,y(this),0,0,new f((!1),(!1)));else{if(-1!=this.a.indexOf("Version/")&&(t=g(b(this.a,/Version\/([\d\.]+)/,1)),null!==t.c)){t=new v("Opera",0,0,0,y(this),0,0,new f(10<=t.c,(!1)));break t}t=g(b(this.a,/Opera[\/ ]([\d\.]+)/,1)),t=null!==t.c?new v("Opera",0,0,0,y(this),0,0,new f(10<=t.c,(!1))):new v("Opera",0,0,0,y(this),0,0,new f((!1),(!1)))}else/OPR\/[\d.]+/.test(this.a)?t=w(this):/AppleWeb(K|k)it/.test(this.a)?t=w(this):-1!=this.a.indexOf("Gecko")?(t="Unknown",e=new m,g(x(this)),e=!1,-1!=this.a.indexOf("Firefox")?(t="Firefox",e=g(b(this.a,/Firefox\/([\d\w\.]+)/,1)),e=3<=e.c&&5<=e.g):-1!=this.a.indexOf("Mozilla")&&(t="Mozilla"),i=g(b(this.a,/rv:([^\)]+)/,1)),e||(e=1<i.c||1==i.c&&9<i.g||1==i.c&&9==i.g&&2<=i.A),t=new v(t,0,0,0,y(this),0,0,new f(e,(!1)))):t=$;return t},T.prototype.e=function(t){for(var e=[],i=0;i<arguments.length;i++)e.push(arguments[i].replace(/[\W_]+/g,"").toLowerCase());return e.join(this.la)},S.prototype.getName=function(){return this.M},R.prototype.remove=function(){var t=this.m;t.parentNode&&t.parentNode.removeChild(t)};var tt={ra:"serif",qa:"sans-serif",pa:"monospace"};D.prototype.start=function(){this.D=new R(this.d,this.G),O(this.D),this.F=new R(this.d,this.G),O(this.F),this.na=K();var t=new S(this.s.getName()+",serif",A(this.s)),t=I(t);this.D.m.style.cssText=t,t=new S(this.s.getName()+",sans-serif",A(this.s)),t=I(t),this.F.m.style.cssText=t,k(this)},N.prototype.ha=function(t){var e=this.u;e.B&&l(e.p,[e.h.e(e.j,t.getName(),A(t).toString(),"active")],[e.h.e(e.j,t.getName(),A(t).toString(),"loading"),e.h.e(e.j,t.getName(),A(t).toString(),"inactive")]),P(e,"fontactive",t),this.da=!0,H(this)},N.prototype.ia=function(t){var e=this.u;if(e.B){var i=c(e.p,e.h.e(e.j,t.getName(),A(t).toString(),"active")),r=[],n=[e.h.e(e.j,t.getName(),A(t).toString(),"loading")];i||r.push(e.h.e(e.j,t.getName(),A(t).toString(),"inactive")),l(e.p,r,n)}P(e,"fontinactive",t),H(this)},X.prototype.load=function(t){this.d=new o(this.J,t.context||this.J),this.S=!1!==t.events,this.Q=!1!==t.classes;var e=new E(this.d,t),i=[],r=t.timeout;e.B&&l(e.p,[e.h.e(e.j,"loading")]),P(e,"loading");var n,i=this.v,a=this.d,h=[];for(n in t)if(t.hasOwnProperty(n)){var c=i.w[n];c&&h.push(c(t[n],a))}for(i=h,this.T=this.U=i.length,t=new N(this.a,this.d,e,r),r=0,n=i.length;r<n;r++)a=i[r],a.K(this.a,s(this.ka,this,a,e,t))},X.prototype.ka=function(t,e,i,r){var n=this;r?t.load(function(t,e,r){G(n,i,t,e,r)}):(t=0==--this.U,this.T--,t&&0==this.T?M(e):(this.Q||this.S)&&U(i,[],{},null,t))};var et="//fonts.googleapis.com/css";q.prototype.e=function(){if(0==this.q.length)throw Error("No fonts to load!");if(-1!=this.O.indexOf("kit="))return this.O;for(var t=this.q.length,e=[],i=0;i<t;i++)e.push(this.q[i].replace(/ /g,"+"));return t=this.O+"?family="+e.join("%7C"),0<this.V.length&&(t+="&subset="+this.V.join(",")),0<this.ea.length&&(t+="&text="+encodeURIComponent(this.ea)),t};var it={latin:"BESbswy",cyrillic:"&#1081;&#1103;&#1046;",greek:"&#945;&#946;&#931;",khmer:"&#x1780;&#x1781;&#x1782;",Hanuman:"&#x1780;&#x1781;&#x1782;"},rt={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},nt={i:"i",italic:"i",n:"n",normal:"n"},st=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;Y.prototype.parse=function(){for(var t=this.q.length,e=0;e<t;e++){var i=this.q[e].split(":"),r=i[0].replace(/\+/g," "),n=["n4"];if(2<=i.length){var s,o=i[1];if(s=[],o)for(var o=o.split(","),a=o.length,h=0;h<a;h++){var l;if(l=o[h],l.match(/^[\w-]+$/)){l=st.exec(l.toLowerCase());var c=void 0;if(null==l)c="";else{if(c=void 0,c=l[1],null==c||""==c)c="4";else var u=rt[c],c=u?u:isNaN(c)?"4":c.substr(0,1);l=l[2],c=[null==l||""==l?"n":nt[l],c].join("")}l=c}else l="";l&&s.push(l)}0<s.length&&(n=s),3==i.length&&(i=i[2],s=[],i=i?i.split(","):s,0<i.length&&(i=it[i[0]])&&(this.L[r]=i))}for(this.L[r]||(i=it[r])&&(this.L[r]=i),i=0;i<n.length;i+=1)this.ca.push(new S(r,n[i]))}};var ot={Arimo:!0,Cousine:!0,Tinos:!0};z.prototype.K=function(t,e){e(t.k.X)},z.prototype.load=function(t){var e=this.d;"MSIE"==this.a.getName()&&1!=this.f.blocking?h(e,s(this.$,this,t)):this.$(t)},z.prototype.$=function(t){for(var e=this.d,i=new q(this.f.api,u(e),this.f.text),r=this.f.families,n=r.length,s=0;s<n;s++){var o=r[s].split(":");3==o.length&&i.V.push(o.pop());var a="";2==o.length&&""!=o[1]&&(a=":"),i.q.push(o.join(a))}r=new Y(r),r.parse(),d(e,i.e()),t(r.ca,r.L,ot)},W.prototype.H=function(t){var e=this.d;return u(this.d)+(this.f.api||"//f.fontdeck.com/s/css/js/")+(e.t.location.hostname||e.J.location.hostname)+"/"+t+".js"},W.prototype.K=function(t,e){var i=this.f.id,r=this.d.t,n=this;i?(r.__webfontfontdeckmodule__||(r.__webfontfontdeckmodule__={}),r.__webfontfontdeckmodule__[i]=function(t,i){for(var r=0,s=i.fonts.length;r<s;++r){var o=i.fonts[r];n.o.push(new S(o.name,C("font-weight:"+o.weight+";font-style:"+o.style)))}e(t)},p(this.d,this.H(i),function(t){t&&e(!1)})):e(!1)},W.prototype.load=function(t){t(this.o)},V.prototype.H=function(t){var e=u(this.d);return(this.f.api||e+"//use.typekit.net")+"/"+t+".js"},V.prototype.K=function(t,e){var i=this.f.id,r=this.d.t,n=this;i?p(this.d,this.H(i),function(t){if(t)e(!1);else{if(r.Typekit&&r.Typekit.config&&r.Typekit.config.fn){t=r.Typekit.config.fn;for(var i=0;i<t.length;i+=2)for(var s=t[i],o=t[i+1],a=0;a<o.length;a++)n.o.push(new S(s,o[a]));try{r.Typekit.load({events:!1,classes:!1})}catch(h){}}e(!0)}},2e3):e(!1)},V.prototype.load=function(t){t(this.o)},J.prototype.K=function(t,e){var i=this,r=i.f.projectId,n=i.f.version;if(r){var s=i.d.t;p(this.d,i.H(r,n),function(n){if(n)e(!1);else{if(s["__mti_fntLst"+r]&&(n=s["__mti_fntLst"+r]()))for(var o=0;o<n.length;o++)i.o.push(new S(n[o].fontfamily));e(t.k.X)}}).id="__MonotypeAPIScript__"+r}else e(!1)},J.prototype.H=function(t,e){var i=u(this.d),r=(this.f.api||"fast.fonts.net/jsapi").replace(/^.*http(s?):(\/\/)?/,"");return i+"//"+r+"/"+t+".js"+(e?"?v="+e:"")},J.prototype.load=function(t){t(this.o)},Z.prototype.load=function(t){var e,i,r=this.f.urls||[],n=this.f.families||[],s=this.f.testStrings||{};for(e=0,i=r.length;e<i;e++)d(this.d,r[e]);for(r=[],e=0,i=n.length;e<i;e++){var o=n[e].split(":");if(o[1])for(var a=o[1].split(","),h=0;h<a.length;h+=1)r.push(new S(o[0],a[h]));else r.push(new S(o[0]))}t(r,s)},Z.prototype.K=function(t,e){return e(t.k.X)};var at=new X(this);at.v.w.custom=function(t,e){return new Z(e,t)},at.v.w.fontdeck=function(t,e){return new W(e,t)},at.v.w.monotype=function(t,e){return new J(e,t)},at.v.w.typekit=function(t,e){return new V(e,t)},at.v.w.google=function(t,e){return new z(e,t)},this.WebFont||(this.WebFont={},this.WebFont.load=s(at.load,at),this.WebFontConfig&&at.load(this.WebFontConfig))}(this,document),define("fido/loader/WebFontLoader",function(){}),define("fido/loader/Loader",["require","exports","module","PIXI","signals","fido/loader/Cache","fido/loader/WebFontLoader"],function(t,e,i){var r=t("PIXI"),n=t("signals"),s=t("fido/loader/Cache"),o=(t("fido/loader/WebFontLoader"),function(){this.crossdomain=!1,window.XDomainRequest&&this.crossdomain?(this.ajaxRequest=new window.XDomainRequest,this.ajaxRequest.timeout=3e3,this.ajaxRequest.onerror=function(){},this.ajaxRequest.ontimeout=function(){},this.ajaxRequest.onprogress=function(){}):window.XMLHttpRequest&&(this.ajaxRequest=new window.XMLHttpRequest),this.ajaxRequest.onload=this._onFileLoaded.bind(this),this.ajaxRequest.onreadystatechange=function(t){},this.fileCount=0,this.filesToLoad=[],this.fontsToLoad=[],this.pixiAssetsToLoad=[],this.soundsToLoad=[],this.customToLoad=[],this.onComplete=new n,this.onProgress=new n});o.prototype.addFonts=function(t){this.fontsToLoad=this.fontsToLoad.concat(t)},o.prototype.addText=function(t,e){var i={url:t,id:e,type:o.TEXT};this.filesToLoad.push(i)},o.prototype.addJson=function(t,e){var i={url:t,id:e,type:o.JSON};this.filesToLoad.push(i)},o.prototype.addPixiAssets=function(t){this.pixiAssetsToLoad=this.pixiAssetsToLoad.concat(t)},o.prototype.addCSS=function(t){var e=document.createElement("link");e.type="text/css",e.rel="stylesheet",e.href=t,document.getElementsByTagName("head")[0].appendChild(e)},o.prototype.addCustom=function(t){var e={object:t,type:o.CUSTOM};this.filesToLoad.push(e)},o.prototype.load=function(){this._loadFonts()},o.prototype._loadFiles=function(){this.fileCount=0,this.filesToLoad.length?this._loadNextFile():this._loadPixiAssets()},o.prototype._loadNextFile=function(){var t=this.filesToLoad[this.fileCount];t.type===o.CUSTOM?(t.object.onLoaded.addOnce(this._onFileLoaded,this),t.object.load()):(this.ajaxRequest.open("GET",t.url,!0),this.ajaxRequest.send())},o.prototype._onFileLoaded=function(){var t=this.filesToLoad[this.fileCount];if(t.type===o.CUSTOM);else if(200!==this.ajaxRequest.status);else switch(t.type){case o.TEXT:var e=this.ajaxRequest.responseText;s.addText(e,t.id);break;case o.JSON:var i=JSON.parse(this.ajaxRequest.responseText);s.addJson(i,t.id)}this.fileCount++,this._onProgress(),this.fileCount===this.filesToLoad.length?this._loadPixiAssets():this._loadNextFile()},o.prototype._loadPixiAssets=function(){return 0===this.pixiAssetsToLoad.length?void this._onComplete():(this.pixiAssetLoader=new r.loaders.Loader,this.pixiAssetLoader.add(this.pixiAssetsToLoad),this.pixiAssetLoader.on("progress",this._onProgress,this),void this.pixiAssetLoader.load(this._onComplete.bind(this)))},o.prototype._loadFonts=function(){return 0===this.fontsToLoad.length?void this._loadFiles():(WebFont.load({custom:{families:this.fontsToLoad,urls:[ASSET_URL+"./css/fonts.css"]},active:function(){for(var t=0;t<this.fontsToLoad.length;t++){var e=new r.Text("cheeky",{font:"32px "+this.fontsToLoad[t]});e.updateText()}}.bind(this)}),void this._loadFiles())},o.prototype._onComplete=function(t,e){r.loadedResources=e,this.onProgress.dispatch(1),this.onComplete.dispatch()},o.prototype._onProgress=function(){var t=(this.filesToLoad.length+this.pixiAssetsToLoad.length,this.fileCount);this.pixiAssetLoader&&(t=this.pixiAssetLoader.progress),this.onProgress.dispatch(.01*t)},o.TEXT=0,o.JSON=1,o.CUSTOM=2,i.exports=o}),define("fido/app/transitions/AlphaTransition",["require","exports","module"],function(t,e,i){AlphaTransition=function(){},AlphaTransition.constructor=AlphaTransition,AlphaTransition.prototype.begin=function(t,e,i){this.screenManager=t,this.currentScreen=e,this.nextScreen=i,this.currentScreen?(this.currentScreen.onHide&&this.currentScreen.onHide(),TweenLite.to(this.currentScreen,.4,{alpha:0,onComplete:this.onFadeout.bind(this)})):this.onFadeout()},AlphaTransition.prototype.onFadeout=function(){this.currentScreen&&(this.currentScreen.onHidden&&this.currentScreen.onHidden(),this.screenManager.container.removeChild(this.currentScreen),this.currentScreen.alpha=1),this.nextScreen.alpha=0,this.nextScreen.onShow&&this.nextScreen.onShow(),this.nextScreen.resize&&this.nextScreen.resize(this.screenManager.w,this.screenManager.h),TweenLite.to(this.nextScreen,.4,{alpha:1,onComplete:this.onFadein.bind(this)}),this.screenManager.container.addChild(this.nextScreen)},AlphaTransition.prototype.onFadein=function(){this.nextScreen.onShown&&this.nextScreen.onShown(),this.screenManager.onTransitionComplete()},AlphaTransition.prototype.resize=function(t,e){this.w=t,this.h=e},i.exports=AlphaTransition}),define("fido/app/transitions/ColorTransition",["require","exports","module"],function(t,e,i){ColorTransition=function(){this.colorRect=(new PIXI.Graphics).beginFill(0).drawRect(0,0,2e3,1e3),this.colorRect.alpha=0},ColorTransition.constructor=ColorTransition,ColorTransition.prototype.begin=function(t,e,i){this.screenManager=t,this.currentScreen=e,this.nextScreen=i,this.screenManager.container.addChild(this.colorRect),this.currentScreen?(this.currentScreen.onHide&&this.currentScreen.onHide(),TweenLite.to(this.colorRect,.4,{alpha:1,onComplete:this.onFadeout.bind(this)})):this.onFadeout()},ColorTransition.prototype.onFadeout=function(){this.currentScreen&&(this.currentScreen.onHidden&&this.currentScreen.onHidden(),this.screenManager.container.removeChild(this.currentScreen),this.currentScreen.alpha=1),this.nextScreen.onShow&&this.nextScreen.onShow(),this.nextScreen.resize&&this.nextScreen.resize(this.screenManager.w,this.screenManager.h),this.screenManager.container.addChild(this.nextScreen),this.screenManager.container.addChild(this.colorRect),TweenLite.to(this.colorRect,.4,{alpha:0,onComplete:this.onFadein.bind(this)})},ColorTransition.prototype.onFadein=function(){this.screenManager.container.removeChild(this.colorRect),this.nextScreen.onShown&&this.nextScreen.onShown(),this.screenManager.onTransitionComplete()},ColorTransition.prototype.resize=function(t,e){this.w===t&&this.h===e||(this.w=t,this.h=e,this.colorRect.scale.x=t/100,this.colorRect.scale.y=e/100)},i.exports=ColorTransition}),define("fido/app/ScreenManager",["require","exports","module","PIXI","./transitions/AlphaTransition","./transitions/ColorTransition"],function(t,e,i){var r=t("PIXI"),n=t("./transitions/AlphaTransition"),s=t("./transitions/ColorTransition"),o=function(t,e,i){this.container=t||new r.Container,this.screens={},this.currentScreen,this.fading=!1,this.w=e||400,this.h=i||400,this.history=[],this.defaultTransition=Device.instance.iPad||Device.instance.isMobile?new s:new n,this.transition=this.defaultTransition,this.active=!1};o.constructor=o,o.prototype.gotoScreenByID=function(t,e){var i=this.screens[t];if(!i)throw new Error("screen not found with id : "+t);this.gotoScreen(i,e)},o.prototype.addScreen=function(t,e){this.screens[e]=t,t.id=e,t.screenManager=this},o.prototype.goBack=function(){this.history.pop();var t=this.history.pop();t&&this.gotoScreen(t)},o.prototype.getScreenId=function(t){for(var e in this.screens)if(this.screens[e]===t)return e;return null},o.prototype.gotoScreen=function(t,e){if(this.currentScreen!==t&&(this.history.push(t),this.nextScreen=t,!this.active)){this.active=!0,this.transition=t.transition||this.defaultTransition,this.transition.onResize&&this.transition.onResize(this.w,this.h);var i=this.currentScreen;this.nextScreen&&this.nextScreen.resize&&this.nextScreen.resize(this.w,this.h),this.currentScreen=t,this.transition.begin(this,i,this.nextScreen)}},o.prototype.onTransitionComplete=function(){this.active=!1,this.currentScreen!=this.nextScreen&&this.gotoScreen(this.nextScreen)},o.prototype.resize=function(t,e){this.w=t,this.h=e,this.transition.onResize&&this.transition.onResize(t,e),this.currentScreen&&this.currentScreen.resize&&this.currentScreen.resize(t,e)},i.exports=o}),define("fido/system/Ticker",["require","exports","module","signals"],function(t,e,i){var r=t("signals"),n=function(t){this.onUpdate=new r,this.updateBind=this.update.bind(this),this.active=!1,this.maxDelta=t||2,this.deltaTime=1,this.timeElapsed=0,this.lastTime=0,this.speed=1};n.prototype.start=function(){this.active||(this.active=!0,requestAnimationFrame(this.updateBind))},n.prototype.stop=function(){this.active&&(this.active=!1)},n.prototype.update=function(){if(this.active){requestAnimationFrame(this.updateBind);var t=(new Date).getTime(),e=t-this.lastTime;e>100&&(e=100),this.deltaTime=.06*e,this.deltaTime*=this.speed,this.deltaTime>this.maxDelta&&(this.deltaTime=this.maxDelta),this.onUpdate.dispatch(this.deltaTime),this.lastTime=t}},n.prototype.add=function(t,e){this.onUpdate.add(t,e)},n.prototype.remove=function(t,e){this.onUpdate.remove(t,e)},n.instance=new n,i.exports=n}),define("fido/system/Device",["require","exports","module"],function(t,e,i){Device=function(){this.arora=!1,this.chrome=!1,this.chromeIOS=!1,this.epiphany=!1,this.firefox=!1,this.mobileSafari=!1,this.ie=!1,this.ieVersion=0,this.trident=!1,this.tridentVersion=0,this.midori=!1,this.opera=!1,this.safari=!1,this.silk=!1,this.webApp=!1,this.cocoonJS=!1,this.android=!1,this.chromeOS=!1,this.iOS=!1,this.linux=!1,this.macOS=!1,this.windows=!1,this.desktop=!1,this.pixelRatio=0,this.iPhone=!1,this.iPhone4=!1,this.iPad=!1,this.blob=!1,this.canvas=!1,this.localStorage=!1,this.file=!1,this.fileSystem=!1,this.webGL=!1,this.worker=!1,this.audioData=!1,this.webAudio=!1,this.ogg=!1,this.opus=!1,this.mp3=!1,this.wav=!1,this.m4a=!1,this.webm=!1;var t=navigator.userAgent;this._checkBrowser(t),this._checkOS(t),this._checkDevice(t),this._checkAudio(),this._checkFeatures(),this._checkIsMobile(),this._checkIsTouch()},Device.prototype._checkBrowser=function(t){/Arora/.test(t)?this.arora=!0:/CriOS/.test(t)?this.chromeIOS=!0:/Opera|OPR|op/.test(t)?(this.opera=!0,this.chrome=!1):/Chrome/.test(t)?this.chrome=!0:/Epiphany/.test(t)?this.epiphany=!0:/Firefox/.test(t)?this.firefox=!0:/Mobile Safari/.test(t)?this.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(t)||navigator.userAgent.match(/Trident.*rv[ :]*11\./)?(this.ie=!0,this.ieVersion=parseInt(RegExp.$1,10)):/Midori/.test(t)?this.midori=!0:/Safari/.test(t)?this.safari=!0:/\bSilk\b/.test(t)?this.silk=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(t)&&(this.ie=!0,this.trident=!0,this.tridentVersion=parseInt(RegExp.$1,10),this.ieVersion=parseInt(RegExp.$3,10)),navigator.standalone&&(this.webApp=!0),navigator.isCocoonJS&&(this.cocoonJS=!0)},Device.prototype._checkOS=function(t){/Android/.test(t)?this.android=!0:/CrOS/.test(t)?this.chromeOS=!0:/iP[ao]d|iPhone/i.test(t)?(this.iOS=!0,this.iOS_version=parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||!1):/Linux/.test(t)?this.linux=!0:/Mac OS/.test(t)?this.macOS=!0:/Windows/.test(t)&&(this.windows=!0),(this.windows||this.macOS||this.linux||this.chromeOS)&&(this.desktop=!0)},Device.prototype._checkDevice=function(){this.pixelRatio=window.devicePixelRatio||1,this.iPhone=navigator.userAgent.toLowerCase().indexOf("iphone")!==-1,this.iPhone4=2===this.pixelRatio&&this.iPhone,this.iPhone4&&(this.iPhone4=480==window.screen.height&&320==window.screen.width||480==window.screen.width&&320==window.screen.height),this.iPad=navigator.userAgent.toLowerCase().indexOf("ipad")!==-1},Device.prototype._checkFeatures=function(){"undefined"!=typeof window.Blob&&(this.blob=!0),this.canvas=!!window.CanvasRenderingContext2D;try{this.localStorage=!!localStorage.getItem}catch(t){this.localStorage=!1}this.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),this.fileSystem=!!window.requestFileSystem,this.webGL=function(){try{var t=document.createElement("canvas");return!!window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch(e){return!1}}(),(this.android||this.ie)&&(this.webGL=!1),this.worker=!!window.Worker,("ontouchstart"in document.documentElement||window.navigator.msPointerEnabled)&&(this.touch=!0)},Device.prototype._checkAudio=function(){this.audioData=!!window.Audio,this.webaudio=!(!window.AudioContext&&!window.webkitAudioContext);var t=document.createElement("audio"),e=!1;try{(e=!!t.canPlayType)&&(t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(this.ogg=!0),t.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(this.mp3=!0),t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"")&&(this.wav=!0),(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/aac;").replace(/^no$/,""))&&(this.m4a=!0))}catch(i){}},Device.prototype._checkIsMobile=function(){var t=!1;!function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),this.isMobile=t,this.mobile=t},Device.prototype._checkIsTouch=function(){this.isTouch="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0},Device.prototype.getInfo=function(){var t="DEVICE OUTPUT\n\n";return t+="---\n",t+="Browser Info :: \n",t+="Arora : "+this.arora+"\n",t+="Chrome : "+this.chrome+"\n",t+="Epiphany : "+this.epiphany+"\n",t+="Firefox : "+this.firefox+"\n",t+="Mobile Safari : "+this.mobileSafari+"\n",t+="IE : "+this.ie,t+=this.ie?" (Version "+this.ieVersion+")\n":"\n",t+="Midori : "+this.midori+"\n",t+="Opera : "+this.opera+"\n",t+="Safari : "+this.safari+"\n",t+="Web App : "+this.webApp+"\n",t+="CocoonJS : "+this.cocoonJS+"\n",t+="Android : "+this.android+"\n",t+="---\n",t+="Operating System :: \n",t+="Chrome OS : "+this.chromeOS+"\n",t+="iOS : "+this.iOS+"\n",t+="Linux : "+this.linux+"\n",t+="Mac OS : "+this.macOS+"\n",t+="Windows : "+this.windows+"\n",t+="Desktop : "+this.desktop+"\n",t+="---\n",t+="Device Type : \n",t+="Pixel Ratio : "+this.pixelRatio+"\n",t+="iPhone : "+this.iPhone+"\n",t+="iPhone 4 : "+this.iPhone4+"\n",t+="iPad : "+this.iPad+"\n",t+="---\n",t+="Features :: \n",t+="Blob : "+this.blob+"\n",t+="Canvas : "+this.canvas+"\n",t+="LocalStorage : "+this.localStorage+"\n",t+="File : "+this.file+"\n",t+="File System : "+this.fileSystem+"\n",t+="WebGL : "+this.webGL+"\n",t+="Workers : "+this.worker+"\n",t+="---\n",t+="Audio :: \n",t+="AudioData : "+this.audioData+"\n",t+="WebAudio : "+this.webAudio+"\n",t+="Supports .ogg : "+this.ogg+"\n",t+="Supports Opus : "+this.opus+"\n",t+="Supports .mp3 : "+this.mp3+"\n",t+="Supports .wav : "+this.wav+"\n",t+="Supports .m4a : "+this.m4a+"\n",t+="Supports .webm : "+this.webm},Object.defineProperty(Device.prototype,"ie9",{get:function(){return this.ie&&9===this.ieVersion}}),Object.defineProperty(Device.prototype,"useSM2",{get:function(){return this.ie||this.opera}}),Device.instance=new Device,i.exports=Device}),define("fido/utils/FrameWait",["require","exports","module"],function(t,e,i){var r=function(){this.updateBind=this.update.bind(this),this.waits=[]};r.prototype.wait=function(t,e){var i={callback:t,count:e||2};this.waits.push(i),requestAnimationFrame(this.updateBind)},r.prototype.update=function(){for(var t=this.waits.length-1;t>=0;t--){var e=this.waits[t];e.count--,e.count<=0&&(e.callback(),this.waits.splice(t,1))}this.waits.length>0&&requestAnimationFrame(this.updateBind)},i.exports=new r}),define("fido/app/LoaderScreen",["require","exports","module","PIXI","fido/system/Ticker","fido/utils/FrameWait","signals"],function(t,e,i){var r=t("PIXI"),n=t("fido/system/Ticker"),s=t("fido/utils/FrameWait"),o=t("signals"),a=function(t){r.Container.call(this),this.app=t,this.easeLoad=0,this.targetLoad=0,this.onReady=new o,this.onComplete=new o,this.initLoader()};a.prototype=Object.create(r.Container.prototype),a.prototype.initLoader=function(){n.instance.add(this.update,this),this.resize(this.w,this.h),s.wait(this.showLoader.bind(this))},a.prototype.showLoader=function(){this.onReady.dispatch()},a.prototype.update=function(){this.easeLoad+=.3*(this.targetLoad-this.easeLoad),this.easeLoad>.99&&(this.easeLoad=1,n.instance.remove(this.update,this),this.onComplete.dispatch())},a.prototype.updateProgress=function(t){this.targetLoad=t},a.prototype.onHide=function(){n.instance.remove(this.update,this)},a.prototype.resize=function(t,e){this.w=t,this.h=e,this.barBg},i.exports=a}),define("fido/app/OrientationManager",["require","exports","module","fido/system/Ticker","fido/system/Device","signals","fido/app/App"],function(t,e,i){var r=t("fido/system/Ticker"),n=t("fido/system/Device"),s=t("signals"),o=(t("fido/app/App"),function(t){if(this.mode=t,this.onRotationChanged=new s,this.rotationWarning=!0,this.orientation,this.rotateScreen=document.createElement("div"),this.rotateScreen.style.backgroundPosition="50% 50%",this.rotateScreen.style.backgroundColor="#3b3b3b",this.rotateScreen.style.backgroundRepeat="no-repeat",this.rotateScreen.style.position="absolute",this.rotateScreen.style.backgroundSize="cover",this.rotateScreen.style.top="0",this.rotateScreen.style.left="0",this.rotateScreen.style.bottom="0",this.rotateScreen.style.right="0",this.rotateScreen.style.zIndex=1e7,this.rotateScreen.style.display="none",this.rotateScreen.height="100%",this.rotateScreen.width="100%",this.changeRotationImage(ASSET_URL+"img/orientation_iphone.png"),n.instance.iPad&&this.changeRotationImage(ASSET_URL+"img/orientation_ipad.png"),document.body.appendChild(this.rotateScreen),n.instance.firefox){var e=window.matchMedia("(orientation: portrait)");e.addListener(this.checkOrientationChangesFirefox.bind(this))}this.supportsOrientationChange="onorientationchange"in window,this.supportsOrientationChange&&(this.orientation=window.orientation,window.addEventListener("orientationchange",this.checkOrientationChanges.bind(this),!1),this.checkOrientationChanges()),this.supportsOrientationEvent="DeviceOrientationEvent"in window});o.prototype.constructor=o,o.prototype.checkOrientationResize=function(t){},o.prototype.changeRotationImage=function(t){this.rotateScreen.style.backgroundImage="url("+t+")"},o.prototype.checkOrientationChangesFirefox=function(){var t=screen.orientation||screen.mozOrientation||screen.msOrientation;"landscape-primary"===t?this.orientation=90:"landscape-secondary"===t&&(this.orientation=-90),this.onRotationChanged.dispatch(this.orientation)},o.prototype.checkOrientationChanges=function(){this.orientation=window.orientation,this.onRotationChanged.dispatch(window.orientation)},o.prototype.check=function(t,e){if(!n.instance.desktop){var i=0===this.mode?t<e:t>e;i?(r.instance.stop(),this.rotateScreen.style.display="block"):(r.instance.start(),this.rotateScreen.style.display="none")}},o.prototype.updateDeviceOrientation=function(t){this.alpha=t.alpha,this.beta=t.beta,this.gamma=t.gamma},i.exports=o}),define("fido/app/TranslationManager",["require","exports","module","fido/loader/Cache"],function(t,e,i){var r=t("fido/loader/Cache"),n=function(t,e){this.debug=e.debug||!1,this.app=t,this.app.preloader.addJson(e.stringsUrl||ASSET_URL+"json/strings.json","strings"),this.app.preloader.onComplete.addOnce(this.onPreloaderComplete,this)};n.prototype.constructor=n,n.prototype.onPreloaderComplete=function(){if(window.translations=r.getJson("strings").strings,this.debug)for(var t in window.translations)window.translations[t]+=window.translations[t]},i.exports=n}),define("fido/app/App",["require","exports","module","PIXI","fido/loader/Loader","fido/app/ScreenManager","fido/system/Ticker","fido/system/Device","fido/app/LoaderScreen","fido/app/OrientationManager","fido/app/TranslationManager","signals"],function(t,e,i){var r=t("PIXI"),n=t("fido/loader/Loader"),s=t("fido/app/ScreenManager"),o=t("fido/system/Ticker"),a=t("fido/system/Device"),h=t("fido/app/LoaderScreen"),l=t("fido/app/OrientationManager"),c=t("fido/app/TranslationManager"),u=t("signals"),d=function(t){t=t||d.defaultOptions,this.options={};for(var e in d.defaultOptions)this.options[e]=t[e]||d.defaultOptions[e];this.setupPixi(),o.instance.start(),o.instance.add(this.update,this),this.screenManager=new s(null,300,300),this.preloader=new n,this.loader=new n,this.translation=new c(this,t),this.onReady=new u,this.options.orientationMode!==d.orientationModes.BOTH&&(this.orientationManager=new l(this.options.orientationMode)),this.stage.addChild(this.screenManager.container)};d.prototype.setupPixi=function(){var t=this.options;t.forceCanvas||a.instance.android&&!a.instance.chrome?(this.renderer=new r.CanvasRenderer(t.width,t.height),this.renderer.clearBeforeRender=!0):this.renderer=r.autoDetectRenderer(t.width,t.height),window.WEBGL=r.isWebGL=this.renderer instanceof r.WebGLRenderer,window.renderer=this.renderer,this.view=this.renderer.view,this.stage=new r.Container,this.view.style.position="absolute",this.view.addEventListener("mousedown",function(){window.focus()},!0),r.stage=this.stage},d.prototype.update=function(){this.renderer.render(this.stage)},d.prototype.startup=function(){this.options.config&&this.preloader.addJson(this.options.config,"config"),this.preloader.onComplete.addOnce(this.onPreloadComplete,this),this.preloader.load()},d.prototype.onPreloadComplete=function(){this.loaderScreen=new this.options.loaderScreen(this),this.loaderScreen.onReady.addOnce(this.onLoaderScreenReady,this),this.loaderScreen.onComplete.addOnce(this.onLoaderScreenComplete,this),this.onPreload&&this.onPreload(),this.screenManager.addScreen(this.loaderScreen,"loader"),this.screenManager.gotoScreenByID("loader")},d.prototype.onLoaderScreenReady=function(){this.loader.onComplete.addOnce(this.onAssetsLoaded,this),this.loader.onProgress.add(this.onProgresss,this),this.loader.load()},d.prototype.onAssetsLoaded=function(){},d.prototype.onProgresss=function(t){this.loaderScreen.updateProgress(t)},d.prototype.onLoaderScreenComplete=function(){this.onReady.dispatch()},d.prototype.resize=function(t,e){this.orientationManager&&this.orientationManager.check(t,e),this.options.resizeMode===d.resizeModes.DEFUALT?(this.renderer.resize(t,e),
this.view.style.width="auto",this.view.style.height="auto"):this["this"].options.resizeMode===d.resizeModes.CSS_RESIZE_PRESERVE_RATIO||this.options.resizeMode===d.resizeModes.CSS_RESIZE&&(this.view.style.width=t+"px",this.view.style.height=e+"px")},d.resizeModes={DEFUALT:0,CSS_RESIZE_PRESERVE_RATIO:1,CSS_RESIZE:2},d.orientationModes={LANDSCAPE:0,PORTRAIT:1,BOTH:2},d.defaultOptions={width:800,height:600,forceCanvas:!1,backgroundColor:16777215,resizeMode:d.resizeModes.DEFUALT,orientationMode:d.orientationModes.LANDSCAPE,loaderScreen:h,config:null},i.exports=d}),define("fido/system/VisibilityChecker",["require","exports","module","signals"],function(t,e,i){var r=t("signals"),n=function(){"undefined"!=typeof document.hidden?(this.hidden="hidden",this.visibilityChange="visibilitychange"):"undefined"!=typeof document.mozHidden?(this.hidden="mozHidden",this.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(this.hidden="msHidden",this.visibilityChange="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(this.hidden="webkitHidden",this.visibilityChange="webkitvisibilitychange"),this.onHide=new r,this.onShow=new r,this.init()};n.prototype.handleVisibilityChange=function(){document[this.hidden]?this.onHide.dispatch():this.onShow.dispatch()},n.prototype.init=function(){document.addEventListener(this.visibilityChange,this.handleVisibilityChange.bind(this),!1)},i.exports=new n}),define("fido/sound/SoundManagerTwo",["require","exports","module","signals","fido/system/VisibilityChecker","SM2"],function(t,e,i){var r=t("signals"),n=t("fido/system/VisibilityChecker"),s=t("SM2"),o=function(){this.disabled=!1,this.preload=!0,this.sounds={},this.groups={},this.globalVolume=1,this.isMuted=!1,this.onFade=new r,this.onMuteToggle=new r};o.prototype.addSound=function(t,e,i){if(!this.disabled&&!this.sounds[e]){i=i||{};var r=s.createSound({url:t+".mp3",autoPlay:i.autoplay||!1,volume:i.volume?100*i.volume:100,loops:i.loop?1/0:1});r.__volume=r.volume,this.sounds[e]=r}},o.prototype.addGroup=function(t,e){if(!this.disabled&&!this.groups[e]){var i={index:0,type:0,sounds:t};this.groups[e]=i}},o.prototype.play=function(t){return this.disabled||!this.sounds[t]?void!this.sounds[t]:void(this.sounds[t].needsLooping?this.loopSound(this.sounds[t]):this.sounds[t].play())},o.prototype.pause=function(t){this.disabled||this.sounds[t].pause()},o.prototype.isPaused=function(t){return this.sounds[t].paused},o.prototype.getSound=function(){return!1},o.prototype.resume=function(t){this.disabled||this.sounds[t].resume()},o.prototype.pauseAll=function(){for(var t in this.sounds)this.sounds[t].pause()},o.prototype.resumeAll=function(){for(var t in this.sounds)this.sounds[t].resume()},o.prototype.fadeTo=function(t,e,i,r){"undefined"==typeof i&&(i=2.5),"undefined"==typeof r&&(r=null),"undefined"!=typeof e&&this.setVolume(t,e)},o.prototype.isPlaying=function(t){return 1===this.sounds[t].playState},o.prototype.playGroup=function(t){if(!this.disabled){var e=this.groups[t],i=Math.random()*e.sounds.length|0;this.sounds[e.sounds[i]].play()}},o.prototype.setVolume=function(t,e){if(!this.disabled){var i=this.sounds[t],r=100*e;i.setVolume(r*this.globalVolume)}},o.prototype.stop=function(t){this.disabled||this.sounds[t].stop()},o.prototype.setGlobalVolume=function(t){this.globalVolume=t;for(var e in this.sounds){var i=this.sounds[e];this.setVolume(e,.1*i.volume)}},o.prototype.mute=function(t){"undefined"==typeof t&&(t=!0),this.isMuted=!0,s.mute(),t&&this.onMuteToggle.dispatch(!0)},o.prototype.unmute=function(t){"undefined"==typeof t&&(t=!0),this.isMuted=!1,s.unmute(),t&&this.onMuteToggle.dispatch(!1)},o.prototype.check=function(){this.lastSeen=Date.now();var t=function(){lastSeen=Date.now(),setTimeout(t,50)};t();var i=document.getElementById("music");i.addEventListener("timeupdate",function(){Date.now()-e.lastSeen>100&&this.pause()},!1)},o.sfx=o.music=new o,n.onHide.add(s.mute,s),n.onShow.add(s.unmute,s),i.exports=o}),define("fido/sound/SoundManager",["require","exports","module","signals","fido/system/VisibilityChecker"],function(t,e,i){var r=t("signals"),n=t("fido/system/VisibilityChecker"),s=function(){this.disabled=!1,this.preload=!0,this.currentSound=null,this.sounds={},this.groups={},this.globalVolume=1,this.isMuted=!1,window.onfocus=this._onFocus.bind(this),this.onMuteToggle=new r};s.prototype._onFocus=function(){this.isMuted?this.mute():this.unmute()},s.prototype.addSound=function(t,e,i){if(!this.disabled&&!this.sounds[e]){i=i||{};var r=new Howl({urls:[t+".mp3",t+".ogg"],autoplay:i.autoplay||!1,loop:i.loop||!1,volume:i.volume||1});r.realVolume=i.volume||1,this.sounds[e]=r}},s.prototype.addSounds=function(t,e){for(var i=0;i<t.length;i++){var r=t[i];this.addSound(e+r,r)}},s.prototype.addGroup=function(t,e){if(!this.disabled&&!this.groups[e]){var i={index:0,type:0,sounds:t};this.groups[e]=i}},s.prototype.getSoundAtId=function(t){return this.sounds[t]},s.prototype.getSound=function(t){return this.currentSound},s.prototype.play=function(t,e){return this.disabled||!this.sounds[t]?void!this.sounds[t]:(e&&this.sounds[t].volume(e),this.sounds[t].play(),this.currentSound=this.sounds[t],this.currentSound)},s.prototype.fadeTo=function(t,e,i){if("undefined"==typeof i&&(i=2.5),"undefined"==typeof callback&&(callback=null),"undefined"!=typeof e){var r=this.sounds[t];r&&TweenLite.to(r,i,{_volume:e,onUpdate:this.actuallyChangeVolume.bind(this),onComplete:this.stopAndReset.bind(this),onCompleteParams:[t],onUpdateParams:["{self}",t]})}},s.prototype.actuallyChangeVolume=function(t,e){this.setVolume(e,t.target._volume)},s.prototype.stopAndReset=function(t){this.stop(t),this.setVolume(t,1),this.stop(t)},s.prototype.isPlaying=function(t){if(!this.disabled)return!this.sounds[t]._audioNode[0].paused},s.prototype.playGroup=function(t){if(!this.disabled&&this.groups[t]){var e=this.groups[t],i=Math.random()*e.sounds.length|0;this.sounds[e.sounds[i]].play(),this.currentSound=this.sounds[e.sounds[i]]}},s.prototype.setVolume=function(t,e){if(!this.disabled){var i=this.sounds[t];i.realVolume=e,i.volume(e*this.globalVolume)}},s.prototype.stop=function(t){!this.disabled&&this.sounds[t]&&this.sounds[t].stop()},s.prototype.stopAll=function(){if(!this.disabled)for(var t in this.sounds)this.sounds[t].stop()},s.prototype.setPlaybackSpeed=function(t,e){if(!this.disabled){var i=this.sounds[t];i._playbackSpeed=e;var r="music"==t?0:1;i._webAudio&&Howler._howls[r]._audioNode[0]&&(Howler._howls[r]._audioNode[0].bufferSource.playbackRate.value=e)}},s.prototype.getPlaybackSpeed=function(t){if(!this.disabled){var e=this.sounds[t];return e._playbackSpeed||1}},s.prototype.setGlobalVolume=function(t){this.globalVolume=t;for(var e in this.sounds){var i=this.sounds[e];i.volume(i.realVolume*t)}},s.prototype.mute=function(){this.isMuted=!0,Howler.mute(),this.onMuteToggle.dispatch(!0)},s.prototype.unmute=function(){this.isMuted=!1,Howler.unmute(),this.onMuteToggle.dispatch(!1)},s.prototype.check=function(){this.lastSeen=Date.now();var t=function(){lastSeen=Date.now(),setTimeout(t,50)};t();var i=document.getElementById("music");i.addEventListener("timeupdate",function(){Date.now()-e.lastSeen>100&&this.pause()},!1)},s.sfx=new s,s.music=new s,s.sfx.disabled=!Howler.usingWebAudio,n.onHide.add(Howler.mute,Howler),n.onShow.add(function(){s.sfx.isMuted||Howler.unmute()}),i.exports=s}),define("fido/sound/SoundBridge",["require","exports","module","fido/system/Device","fido/sound/SoundManagerTwo","fido/sound/SoundManager"],function(t,e,i){var r=t("fido/system/Device");if(r.instance.useSM2)var n=t("fido/sound/SoundManagerTwo");else var n=t("fido/sound/SoundManager");if(window.noSound)var s={play:function(){},stop:function(){},setVolume:function(){},getVolume:function(){},addSound:function(){}},n={music:s,sfx:s};i.exports=n}),define("fido/ui/buttons/AbstractButton",["require","exports","module","signals","PIXI"],function(t,e,i){var r=t("signals"),n=t("PIXI"),s=function(){n.Container.call(this),this.view=this,this.onPress=new r,this.onDown=new r,this.onUp=new r,this.onHover=new r,this.onOut=new r,this.mousedown=this.touchstart=this.onDown.dispatch.bind(this,this),this.mouseup=this.touchend=this.onUp.dispatch.bind(this,this),this.click=this.tap=this.onPress.dispatch.bind(this,this),this.mouseover=this.onHover.dispatch.bind(this,this),this.touchendoutside=this.mouseupoutside=this.mouseout=this.onOut.dispatch.bind(this,this),this.onDown.add(this.down,this),this.onUp.add(this.up,this),this.onHover.add(this.hover,this),this.onOut.add(this.out,this),this._scale=new n.Point,this.enable()};s.prototype=Object.create(n.Container.prototype),s.prototype.constructor=s,s.prototype.setSize=function(t){switch(t){case"small":this.scale.set(.5);break;case"big":this.scale.set(2);break;default:this.scale.set(1)}},s.prototype.enable=function(){this.interactive=!0,this.buttonMode=!0},s.prototype.disable=function(){this.interactive=!1,this.buttonMode=!1},s.prototype.down=function(t,e){},s.prototype.up=function(t,e){},s.prototype.hover=function(t,e){},s.prototype.out=function(t,e){},s.prototype.show=function(){this.visible=!0,this.enable()},s.prototype.hide=function(){this.disable(),this.visible=!1},i.exports=s}),define("starwars/buttons/IconButton",["require","exports","module","PIXI","fido/ui/buttons/AbstractButton","fido/sound/SoundManager"],function(t,e,i){var r=t("PIXI"),n=t("fido/ui/buttons/AbstractButton"),s=t("fido/sound/SoundManager"),o=function(t){n.call(this),this.cacheAsBitmap=!0,this.background=new r.Sprite.fromFrame("border_disc_blue.png"),this.background.anchor.set(.5),this.addChild(this.background),this.icon=new r.Sprite,this.icon.anchor.set(.5),this.addChild(this.icon),this.setIcon(t)};o.prototype=Object.create(n.prototype),o.prototype.constructor=o,Object.defineProperty(o.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._updateFromBackgroundColor()}}),o.prototype._updateFromBackgroundColor=function(){this.background.texture=r.Texture.fromFrame("border_disc_"+this._backgroundColor+".png")},o.prototype.setIcon=function(t){t&&(this.cacheAsBitmap=!1,this.icon.texture=r.Texture.fromFrame(t),this.cacheAsBitmap=!0)},o.prototype.setSize=function(t){switch(t){case"small":this.scale.set(.5);break;case"big":this.scale.set(2);break;default:this.scale.set(1)}},o.prototype.show=function(t){var e=this.cacheAsBitmap;this.cacheAsBitmap=!1,this.visible=!0,this.enable(),r.isWebGL?(t=t||.4,TweenLite.to(this.icon,t,{alpha:1,onComplete:function(){this.enable(),this.cacheAsBitmap=e},onCompleteScope:this,ease:Power4.easeOut}),TweenLite.to(this.icon.scale,t,{x:1,y:1,ease:Back.easeOut}),TweenLite.to(this.background,.5*t,{alpha:1,ease:Power4.easeOut}),TweenLite.to(this.background.scale,.5*t,{x:1,y:1,ease:Back.easeOut})):(this.icon.alpha=1,this.background.alpha=1,this.icon.scale.x=this.icon.scale.y=1,this.background.scale.x=this.background.scale.y=1,this.cacheAsBitmap=e)},o.prototype.hide=function(t){var e=this.cacheAsBitmap;this.cacheAsBitmap=!1,this.disable(),r.isWebGL?(t=t||.2,TweenLite.to(this.icon,t,{alpha:0,onComplete:function(){this.visible=!1,this.cacheAsBitmap=e},onCompleteScope:this,ease:Power2.easeIn}),TweenLite.to(this.icon.scale,t,{x:0,y:0,ease:Power2.easeIn}),TweenLite.to(this.background,t,{alpha:0,ease:Power2.easeIn}),TweenLite.to(this.background.scale,t,{x:0,y:0,ease:Power2.easeIn})):(this.icon.alpha=0,this.background.alpha=0,this.icon.scale.x=this.icon.scale.y=0,this.background.scale.x=this.background.scale.y=0)},o.prototype.down=function(){n.prototype.down.call(this)},o.prototype.up=function(){s.sfx.play("selectbeep")},o.prototype.hover=function(){var t=this.cacheAsBitmap;this.cacheAsBitmap=!1;var e=.4;TweenLite.to(this.icon.scale,e,{x:1.3,y:1.3,onComplete:function(){this.cacheAsBitmap=t},onCompleteScope:this,ease:Elastic.easeOut}),TweenLite.to(this.background.scale,.5*e,{x:1.2,y:1.2,ease:Power4.easeOut})},o.prototype.out=function(){var t=this.cacheAsBitmap;this.cacheAsBitmap=!1;var e=.2;TweenLite.to(this.icon.scale,e,{x:1,y:1,onComplete:function(){this.cacheAsBitmap=t},onCompleteScope:this,ease:Power2.easeOut}),TweenLite.to(this.background.scale,e,{x:1,y:1,ease:Power2.easeOut})},i.exports=o}),define("starwars/buttons/GoldenButton",["require","exports","module","PIXI","./IconButton","fido/system/Device"],function(t,e,i){var r=t("PIXI"),n=t("./IconButton"),s=(t("fido/system/Device"),function(t,e){n.call(this,t),this._backgroundColor="blue",e=e||{},this.rings=[];for(var i=0;i<3;i++){var s=new r.Sprite.fromFrame("inner_detail_blue_large"+(i||"")+".png");s.anchor.set(.5),s.blendMode=r.isWebGL?r.BLEND_MODES.ADD:0,s._defaultAlpha=.3,s.alpha=s._defaultAlpha,s._defaultScale=1;var o=i%2?1:-1;TweenMax.to(s,10+10*Math.random(),{rotation:2*Math.PI*o,ease:Linear.easeOut,repeat:-1}),this.addChild(s),this.rings.push(s)}this.outerRingContainer=new r.Container,this.addChild(this.outerRingContainer),this.outerRing=new r.Sprite.fromFrame("ring_large.png"),this.outerRing.anchor.set(.5),this.outerRingContainer.addChild(this.outerRing),this.groove=new r.Sprite.fromFrame("big_button_groove.png"),this.groove.anchor.set(.5),this.outerRingContainer.addChild(this.groove),this.setSize("normal"),r.isWebGL||this.addChild(this.icon)});s.prototype=Object.create(n.prototype),s.prototype.constructor=s,Object.defineProperty(s.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._updateFromBackgroundColor()}}),s.prototype.hideRings=function(){for(var t=0;t<this.rings.length;t++)this.rings[t].visible=!1},s.prototype.showRings=function(){for(var t=0;t<this.rings.length;t++)this.rings[t].visible=!0},s.prototype._updateFromBackgroundColor=function(){"blue"!==this._backgroundColor&&(this.icon.blendMode=r.isWebGL&&r.isWebGL?r.BLEND_MODES.ADD:0),this.background.texture=r.Texture.fromFrame("inner_disc_"+this._backgroundColor+"_small.png")},s.prototype.setSize=function(t){for(var e=0;e<this.rings.length;e++){var i=this.rings[e];i._defaultScale="small"===t?.5:1,i.scale.set(i._defaultScale)}"small"===t?(this._updateFromBackgroundColor(),this.outerRing.texture=r.Texture.fromFrame("ring_small.png"),this.groove.texture=r.Texture.fromFrame("small_button_groove.png"),this.hideRings()):(this.background.texture=r.Texture.fromFrame("inner_disc_blue_large.png"),this.outerRing.texture=r.Texture.fromFrame("ring_large.png"),this.scale.set("big"===t?1.5:1),this.showRings())},s.prototype.show=function(t){t=t||.4,n.prototype.show.call(this,t),r.isWebGL?(TweenLite.to(this.outerRingContainer,.95*t,{alpha:1,delay:.05*t,ease:Power2.easeOut}),TweenLite.to(this.outerRingContainer.scale,.95*t,{x:1,y:1,delay:.05*t,ease:Back.easeOut}),TweenLite.to(this.groove,.95*t,{rotation:0,delay:.05*t,ease:Back.easeOut}),TweenLite.to(this.icon,t,{rotation:0,ease:Back.easeOut})):(this.outerRingContainer.alpha=1,this.outerRingContainer.scale.x=this.outerRingContainer.scale.y=1,this.groove.rotation=0,this.icon.rotation=0)},s.prototype.hide=function(t){t=t||.2,n.prototype.hide.call(this,t),r.isWebGL?(TweenLite.to(this.outerRingContainer,t,{alpha:0,ease:Power2.easeIn}),TweenLite.to(this.outerRingContainer.scale,t,{x:0,y:0,ease:Back.easeIn}),TweenLite.to(this.groove,t,{rotation:.25*-Math.PI,ease:Back.easeIn}),TweenLite.to(this.icon,t,{rotation:.25*Math.PI,ease:Back.easeIn})):(this.outerRingContainer.alpha=0,this.outerRingContainer.scale.x=this.outerRingContainer.scale.y=0,this.groove.rotation=.25*-Math.PI,this.icon.rotation=.25*Math.PI)},s.prototype.hover=function(){var t=.8;this.cacheAsBitmap=!1,TweenLite.to(this.icon.scale,t,{x:1.3,y:1.3,onComplete:function(){},onCompleteScope:this,ease:Elastic.easeOut}),TweenLite.to(this.background.scale,.5*t,{x:1.1,y:1.1,ease:Power4.easeOut}),TweenLite.to(this.outerRingContainer.scale,.5*t,{x:1.1,y:1.1,ease:Power4.easeOut}),TweenLite.to(this.groove,.5*t,{rotation:.5*Math.PI,ease:Back.easeOut});for(var e=0;e<this.rings.length;e++){var i=this.rings[e];TweenLite.to(i,.5*t,{alpha:2*i._defaultAlpha,ease:Power4.easeOut});var r=(1-.2*e)*i._defaultScale;i._defaultScale<1&&(r+=.4*i._defaultScale),TweenLite.to(i.scale,.5*t,{x:r,y:r,ease:Power4.easeOut})}},s.prototype.out=function(){var t=.2;this.cacheAsBitmap=!1,TweenLite.to(this.icon.scale,t,{x:1,y:1,onComplete:function(){this.cacheAsBitmap=!0},onCompleteScope:this,ease:Power2.easeOut}),TweenLite.to(this.background.scale,t,{x:1,y:1,ease:Power2.easeOut}),TweenLite.to(this.outerRingContainer.scale,t,{x:1,y:1,ease:Power2.easeOut}),TweenLite.to(this.groove,t,{rotation:0,ease:Power2.easeOut});for(var e=0;e<this.rings.length;e++){var i=this.rings[e];TweenLite.to(i,t,{alpha:i._defaultAlpha,ease:Power2.easeOut}),TweenLite.to(i.scale,t,{x:i._defaultScale,y:i._defaultScale,ease:Power2.easeOut})}},i.exports=s}),define("fido/utils/CircleMask",["require","exports","module","PIXI"],function(t,e,i){var r=t("PIXI"),n=function(){r.Graphics.call(this),this.thickness=10,this.startRads=0,this.endRads=Math.PI,this.xRadius=100,this.yRadius=100,this._ratio=0,this.redraw()};n.prototype=Object.create(r.Graphics.prototype),Object.defineProperty(n.prototype,"ratio",{get:function(){return this._ratio},set:function(t){this._ratio=t,this._ratio>1?this._ratio=1:this._ratio<0&&(this._ratio=0),this.redraw()}}),n.prototype.redraw=function(){var t=this._ratio*Math.PI*2;t*=.3,this.clear(),this.beginFill(16711680);var e=8,i=2*Math.PI/e,r=Math.ceil(8*this._ratio);8*this._ratio%1;this.moveTo(0,0);for(var n=0;n<r;n++){var s=n*i;this.lineTo(Math.sin(s)*-100,Math.cos(s)*-100)}var s=this._ratio*Math.PI*2;this.lineTo(Math.sin(s)*-100,Math.cos(s)*-100),this.endFill()},i.exports=n}),define("starwars/loader/LoadingBar",["require","exports","module","PIXI","../buttons/GoldenButton","fido/utils/CircleMask"],function(t,e,i){var r=t("PIXI"),n=t("../buttons/GoldenButton"),s=t("fido/utils/CircleMask"),o=function(){r.Container.call(this),this.background=new n,this.background.disable(),this.background.x=1,this.addChild(this.background);var t=new r.Sprite.fromFrame("inline_circle_loader_button.png");t.scale.set(.74),t.anchor.x=.5,t.anchor.y=.5,t.tint=0,this.addChild(t),this.circleMask=new s,this.circleMask.scale.x*=-1,this.addChild(this.circleMask);var e=new r.Sprite.fromFrame("inline_circle_loader_button.png");e.scale.set(.74),e.anchor.x=.5,e.anchor.y=.5,e.mask=this.circleMask,this.addChild(e),this.percentageText=new r.Text("100",{font:"36px "+window.MAIN_FONT,fill:"#FAC943",dropShadow:!0,dropShadowAngle:Math.PI/2,dropShadowDistance:3,dropShadowColor:"rgba(0, 0, 0, .4)"}),this.percentageText.anchor.set(.5),this.percentageText.x=2,this.addChild(this.percentageText)};o.prototype=Object.create(r.Container.prototype),o.prototype.constructor=o,o.prototype.setProgress=function(t){this.circleMask.ratio=t+.02,this.percentageText.text=Math.floor(100*t)},i.exports=o}),define("text",["module"],function(t){var e,i,r,n,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],a=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,h=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,l="undefined"!=typeof location&&location.href,c=l&&location.protocol&&location.protocol.replace(/\:/,""),u=l&&location.hostname,d=l&&(location.port||void 0),p={},f=t.config&&t.config()||{};return e={version:"2.0.14",strip:function(t){if(t){t=t.replace(a,"");var e=t.match(h);e&&(t=e[1])}else t="";return t},jsEscape:function(t){return t.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:f.createXhr||function(){var t,e,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(e=0;e<3;e+=1){i=o[e];try{t=new ActiveXObject(i)}catch(r){}if(t){o=[i];break}}return t},parseName:function(t){var e,i,r,n=!1,s=t.lastIndexOf("."),o=0===t.indexOf("./")||0===t.indexOf("../");return s!==-1&&(!o||s>1)?(e=t.substring(0,s),i=t.substring(s+1)):e=t,r=i||e,s=r.indexOf("!"),s!==-1&&(n="strip"===r.substring(s+1),r=r.substring(0,s),i?i=r:e=r),{moduleName:e,ext:i,strip:n}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(t,i,r,n){var s,o,a,h=e.xdRegExp.exec(t);return!h||(s=h[2],o=h[3],o=o.split(":"),a=o[1],o=o[0],!(s&&s!==i||o&&o.toLowerCase()!==r.toLowerCase()||(a||o)&&a!==n))},finishLoad:function(t,i,r,n){r=i?e.strip(r):r,f.isBuild&&(p[t]=r),n(r)},load:function(t,i,r,n){if(n&&n.isBuild&&!n.inlineText)return void r();f.isBuild=n&&n.isBuild;var s=e.parseName(t),o=s.moduleName+(s.ext?"."+s.ext:""),a=i.toUrl(o),h=f.useXhr||e.useXhr;return 0===a.indexOf("empty:")?void r():void(!l||h(a,c,u,d)?e.get(a,function(i){e.finishLoad(t,s.strip,i,r)},function(t){r.error&&r.error(t)}):i([o],function(t){e.finishLoad(s.moduleName+"."+s.ext,s.strip,t,r)}))},write:function(t,i,r,n){if(p.hasOwnProperty(i)){var s=e.jsEscape(p[i]);r.asModule(t+"!"+i,"define(function () { return '"+s+"';});\n")}},writeFile:function(t,i,r,n,s){var o=e.parseName(i),a=o.ext?"."+o.ext:"",h=o.moduleName+a,l=r.toUrl(o.moduleName+a)+".js";e.load(h,r,function(i){var r=function(t){return n(l,t)};r.asModule=function(t,e){return n.asModule(t,l,e)},e.write(t,h,r,s)},s)}},"node"===f.env||!f.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(i=require.nodeRequire("fs"),e.get=function(t,e,r){try{var n=i.readFileSync(t,"utf8");"\ufeff"===n[0]&&(n=n.substring(1)),e(n)}catch(s){r&&r(s)}}):"xhr"===f.env||!f.env&&e.createXhr()?e.get=function(t,i,r,n){var s,o=e.createXhr();if(o.open("GET",t,!0),n)for(s in n)n.hasOwnProperty(s)&&o.setRequestHeader(s.toLowerCase(),n[s]);f.onXhr&&f.onXhr(o,t),o.onreadystatechange=function(e){var n,s;4===o.readyState&&(n=o.status||0,n>399&&n<600?(s=new Error(t+" HTTP status: "+n),s.xhr=o,r&&r(s)):i(o.responseText),f.onXhrComplete&&f.onXhrComplete(o,t))},o.send(null)}:"rhino"===f.env||!f.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?e.get=function(t,e){var i,r,n="utf-8",s=new java.io.File(t),o=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),n)),h="";try{for(i=new java.lang.StringBuffer,r=a.readLine(),r&&r.length()&&65279===r.charAt(0)&&(r=r.substring(1)),null!==r&&i.append(r);null!==(r=a.readLine());)i.append(o),i.append(r);h=String(i.toString())}finally{a.close()}e(h)}:("xpconnect"===f.env||!f.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(r=Components.classes,n=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,e.get=function(t,e){var i,o,a,h={};s&&(t=t.replace(/\//g,"\\")),a=new FileUtils.File(t);try{i=r["@mozilla.org/network/file-input-stream;1"].createInstance(n.nsIFileInputStream),i.init(a,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(n.nsIConverterInputStream),o.init(i,"utf-8",i.available(),n.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(i.available(),h),o.close(),i.close(),e(h.value)}catch(l){throw new Error((a&&a.path||"")+": "+l)}}),e}),define("text!starwars/shaders/lightspeed.glsl",[],function(){return"precision highp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nuniform float intensity;\nuniform float starPositionOffset;\nuniform vec2 offset;\nuniform vec4 dimensions;\nuniform float scale;\n\nfloat rand(float n){\n  return fract(sin(n) * 43758.5453123);\n}\n\nvec4 mapStar(vec2 position, float intensity, float angleOffset) {\n\n  vec4 color = vec4(vec3(0.), 1.);\n\n  float angle = atan(position.y, position.x) + angleOffset;\n\n  float angleNumber = 20.;\n\n  float random = rand(floor(angle * angleNumber) * 100.);\n\n  float distance = random;\n  distance += starPositionOffset * .001;\n  distance = fract(distance);\n\n  float fragDistance = length(position);\n\n  float size = smoothstep(-.1, 2., intensity);\n\n  float bounded = step(distance, fragDistance) * step(fragDistance, distance + size);\n  bounded += step(fragDistance, fract(distance + size)) * step(fract(distance + size), distance);\n\n  color.rgb = mix(vec3(0.), vec3(1.), bounded);\n\n  color.r *= .3;\n  color.g *= .7 + random * .3;\n  color.b *= 2.;\n\n  // hard edges\n  float angleCenter = abs(fract(angle * angleNumber) * 2. - 1.);\n  color.a = step(angleCenter, smoothstep(-.2, 1., intensity));\n\n  // smooth gradient\n  color.a *= 1. - angleCenter;\n\n  color.a *= smoothstep(0., 1., fragDistance);\n  color.a *= cos(pow(random, 5.) * starPositionOffset * .001) * .5 + .5;\n\n  return color;\n}\n\nvoid main() {\n  vec2 position = (vTextureCoord * 2. - 1.) * (1. / scale);\n  position *= dimensions.y / dimensions.x;\n  position += offset * (1. / scale);\n\n  vec4 color = vec4(vec3(0.05), 1.);\n\n  for(float i = 0.; i < 2.; i++) {\n  \tvec4 starColor = mapStar(position, intensity, i * 20.);\n    color.rgb += starColor.rgb * starColor.a;\n  }\n\n\tgl_FragColor = color;\n}\n"}),define("starwars/filters/LightSpeedFilter",["require","exports","module","PIXI","fido/system/Ticker","text!../shaders/lightspeed.glsl"],function(t,e,i){function r(){this.speed=1,n.AbstractFilter.call(this,null,o,{intensity:{type:"f",value:0},starPositionOffset:{type:"f",value:0},scale:{type:"f",value:1},offset:{type:"2fv",value:[0,0]},dimensions:{type:"4fv",value:[0,0,0,0]}}),this.start()}var n=t("PIXI"),s=t("fido/system/Ticker"),o=t("text!../shaders/lightspeed.glsl");r.prototype=Object.create(n.AbstractFilter.prototype),r.prototype.constructor=r,r.prototype.start=function(){s.instance.add(this.update,this)},r.prototype.stop=function(){s.instance.remove(this.update,this)},r.prototype.setIntensity=function(t){this.uniforms.intensity.value=t},r.prototype.enterLightSpeed=function(t){t=t||3,TweenLite.to(this.uniforms.intensity,t,{value:1,ease:Power3.easeIn})},r.prototype.leaveLightSpeed=function(t){t=t||1,TweenLite.to(this.uniforms.intensity,t,{value:0,ease:Power3.easeOut})},r.prototype.update=function(){this.uniforms.starPositionOffset.value+=this.speed+40*this.intensity},Object.defineProperties(r.prototype,{intensity:{get:function(){return this.uniforms.intensity.value},set:function(t){this.uniforms.intensity.value=t}}}),i.exports=r}),define("fido/app/Screen",["require","exports","module","PIXI"],function(t,e,i){var r=t("PIXI"),n=function(t){this.app=t,this.id="",r.Container.call(this)};n.prototype=Object.create(r.Container.prototype),n.prototype.onHide=function(){},n.prototype.onHidden=function(){},n.prototype.onShow=function(){},n.prototype.onShown=function(){},n.prototype.resize=function(t,e){},i.exports=n}),define("starwars/filters/GlowFilter",["require","exports","module","PIXI"],function(t,e,i){function r(t,e,i,r,s,o,a){n.AbstractFilter.call(this,null,["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float distance;","uniform float outerStrength;","uniform float innerStrength;","uniform vec4 glowColor;","uniform float pixelWidth;","uniform float pixelHeight;","vec2 px = vec2(pixelWidth, pixelHeight);","void main(void) {","    const float PI = 3.14159265358979323846264;","    vec4 ownColor = texture2D(uSampler, vTextureCoord);","    vec4 curColor;","    float totalAlpha = 0.0;","    float maxTotalAlpha = 0.0;","    float cosAngle;","    float sinAngle;","    for (float angle = 0.0; angle <= PI * 2.0; angle += "+(1/a/i).toFixed(7)+") {","       cosAngle = cos(angle);","       sinAngle = sin(angle);","       for (float curDistance = 1.0; curDistance <= "+i.toFixed(7)+"; curDistance++) {","           curColor = texture2D(uSampler, vec2(vTextureCoord.x + cosAngle * curDistance * px.x, vTextureCoord.y + sinAngle * curDistance * px.y));","           totalAlpha += (distance - curDistance) * curColor.a;","           maxTotalAlpha += (distance - curDistance);","       }","    }","    maxTotalAlpha = max(maxTotalAlpha, 0.0001);","    ownColor.a = max(ownColor.a, 0.0001);","    ownColor.rgb = ownColor.rgb / ownColor.a;","    float outerGlowAlpha = (totalAlpha / maxTotalAlpha)  * outerStrength * (1. - ownColor.a);","    float innerGlowAlpha = ((maxTotalAlpha - totalAlpha) / maxTotalAlpha) * innerStrength * ownColor.a;","    float resultAlpha = (ownColor.a + outerGlowAlpha);","    gl_FragColor = vec4(mix(mix(ownColor.rgb, glowColor.rgb, innerGlowAlpha / ownColor.a), glowColor.rgb, outerGlowAlpha / resultAlpha) * resultAlpha, resultAlpha);","}"].join("\n"),{distance:{type:"1f",value:i},outerStrength:{type:"1f",value:0},innerStrength:{type:"1f",value:0},glowColor:{type:"4f",value:new Float32Array([0,0,0,1])},pixelWidth:{type:"1f",value:0},pixelHeight:{type:"1f",value:0}}),a=Math.pow(a,1/3),this.quality=a,this.uniforms.distance.value*=a,t*=a,e*=a,this.color=o,this.outerStrength=r,this.innerStrength=s,this.viewWidth=t,this.viewHeight=e}var n=t("PIXI");r.prototype=Object.create(n.AbstractFilter.prototype),r.prototype.constructor=r,Object.defineProperties(r.prototype,{color:{get:function(){return n.utils.rgb2hex(this.uniforms.glowColor.value)},set:function(t){n.utils.hex2rgb(t,this.uniforms.glowColor.value)}},outerStrength:{get:function(){return this.uniforms.outerStrength.value},set:function(t){this.uniforms.outerStrength.value=t}},innerStrength:{get:function(){return this.uniforms.innerStrength.value},set:function(t){this.uniforms.innerStrength.value=t}},viewWidth:{get:function(){return 1/this.uniforms.pixelWidth.value},set:function(t){this.uniforms.pixelWidth.value=1/t}},viewHeight:{get:function(){return 1/this.uniforms.pixelHeight.value},set:function(t){this.uniforms.pixelHeight.value=1/t}}}),i.exports=r}),define("starwars/app/FontUtils",["require","exports","module"],function(t,e,i){var r=function(){};r.prototype.init=function(){window.FONTS_EXTENDED?(window.MAIN_FONT="Arial",window.SECONDARY_FONT="Arial"):(window.MAIN_FONT="naked_power_rgregular",window.SECONDARY_FONT="naked_powerlight")},i.exports=new r}),define("starwars/loader/LoaderScreen",["require","exports","module","PIXI","fido/system/Ticker","./LoadingBar","../filters/LightSpeedFilter","signals","fido/app/Screen","fido/loader/Loader","../filters/GlowFilter","starwars/buttons/GoldenButton","fido/system/Device","fido/loader/Cache","starwars/app/FontUtils"],function(t,e,i){var r=t("PIXI"),n=t("fido/system/Ticker"),s=t("./LoadingBar"),o=t("../filters/LightSpeedFilter"),a=t("signals"),h=t("fido/app/Screen"),l=t("fido/loader/Loader"),c=t("../filters/GlowFilter"),u=t("starwars/buttons/GoldenButton"),d=t("fido/system/Device"),p=t("fido/loader/Cache"),f=t("starwars/app/FontUtils"),m=function(t){h.call(this,t),this.progress=0,this.easedProgress=0,this.counter=0,this.loader=new l,this.loader.addPixiAssets([SHARED_ASSET_URL+"images/ui_elements_shared.json",SHARED_ASSET_URL+"images/ui_elements_rebels.json",SHARED_ASSET_URL+"images/jedi_font.xml"]),p.getJson("config").config||(p.getJson("config").config=p.getJson("config")),window.FONTS_EXTENDED="true"===p.getJson("config").config.FONTS_EXTENDED,f.init(),this.loader.addJson(SHARED_ASSET_URL+"json/events.json","events"),this.loader.addCSS(SHARED_ASSET_URL+"css/fonts.css"),this.loader.onComplete.add(this.onAssetsLoaded,this),this.loader.load(),t.loader.onProgress.add(this.onProgress,this),this.onReady=new a,this.onComplete=new a,this.touchContinue=!d.instance.desktop&&!window.activateOnStart};m.prototype=Object.create(h.prototype),m.prototype.constructor=m,m.prototype.onAssetsLoaded=function(){r.isWebGL&&(this.lightSpeedFilter=new o),this.background=new r.Sprite.fromFrame("canvas_hyperspace.png"),r.isWebGL||(this.background.anchor.set(.5),this.background.position.x=this.app.safeSize.width/2,this.background.position.y=this.app.safeSize.height/2),this.background.filters=r.isWebGL?[this.lightSpeedFilter]:null,this.addChild(this.background);var t=new r.Text("Naked Powerlight",{font:"20px "+ +window.SECONDARY_FONT});t.updateText(),window.FONTS_EXTENDED?this.text=new r.Text(translations.STR_LOADING.toUpperCase(),{font:"30px "+window.MAIN_FONT,
fill:"#fed95c",stroke:"#fddd54",strokeThickness:1}):this.text=new r.extras.BitmapText(translations.STR_LOADING.toLowerCase(),{font:"30px Star Jedi",align:"right"}),r.isWebGL&&(this.text.filters=[new c(256,256,2,1,0,9536030,1)]),this.text.pivot.x=.5*this.text.width,this.text.pivot.y=.5*this.text.height,this.addChild(this.text),this.starWarsLoader=new s,this.addChild(this.starWarsLoader),this.app.loader.load(),this.touchContinue&&(this.continueButton=new u("icon_play.png"),this.continueButton.onPress.add(function(){d.instance.android&&(document.body.requestFullScreen?document.body.requestFullScreen():document.body.mozRequestFullScreen?document.body.mozRequestFullScreen():document.body.webkitRequestFullScreen&&document.body.webkitRequestFullScreen()),this.continueButton.interactive=!1,TweenLite.to(this.continueButton.view.scale,.4,{x:0,y:0,ease:Back.easeIn}),TweenLite.to(this.continueButton.view,.3,{alpha:0,ease:Sine.easeIn,delay:.1}),this.onComplete.dispatch()},this)),this.resize(),n.instance.add(this.update,this)},m.prototype.update=function(){this.counter+=.05;var t=.2*(this.progress-this.easedProgress);t>.01&&(t=.01),this.easedProgress+=t;var e=this.easeInOutExpo(100*this.easedProgress,0,1,60);r.isWebGL?(this.background.position.x=Math.random()*e*2,this.background.position.y=Math.random()*e*2,this.lightSpeedFilter.setIntensity(e)):this.background.scale.set(this.easedProgress>.99?6:6*this.easedProgress),this.starWarsLoader.setProgress(this.easedProgress>.99?1:this.easedProgress),this.easedProgress>.99&&(n.instance.remove(this.update,this),this.complete()),this.text.alpha=.5*Math.abs(Math.cos(this.counter))+.5},m.prototype.easeInOutExpo=function(t,e,i,r){return t/=r/2,t<1?i/2*Math.pow(2,10*(t-1))+e:(t--,i/2*(-Math.pow(2,-10*t)+2)+e)},m.prototype.complete=function(){setTimeout(function(){this.touchContinue?(this.addChild(this.continueButton),this.continueButton.alpha=0,TweenLite.to(this.continueButton.view,.3,{alpha:1})):this.onComplete.dispatch()}.bind(this),1500),r.isWebGL&&this.lightSpeedFilter.leaveLightSpeed(),r.isWebGl||TweenLite.to(this.background.scale,1,{x:12,y:12,onComplete:function(){TweenLite.to(this.background.scale,.2,{x:0,y:0,ease:Power3.easeOut})}.bind(this),ease:Power3.easeOut});var t=.6,e=.6,i=.05;TweenLite.to(this.text.scale,t,{x:0,y:0,delay:e,ease:Back.easeIn}),TweenLite.to(this.text,t,{y:.5*this.screenHeight,delay:e,ease:Back.easeIn}),TweenLite.to(this.text,t,{alpha:0,delay:e,ease:Power2.easeIn}),TweenLite.to(this.starWarsLoader,t,{alpha:0,delay:e+i,ease:Power2.easeIn}),TweenLite.to(this.starWarsLoader.scale,t,{x:0,y:0,delay:e+i,ease:Back.easeIn,onComplete:function(){this.app.renderer.clearBeforeRender=!0}.bind(this)})},m.prototype.onProgress=function(t){this.progress=t},m.prototype.onHide=function(){n.instance.remove(this.update,this)},m.prototype.resize=function(t,e){this.screenWidth=t||this.screenWidth,this.screenHeight=e||this.screenHeight,this.starWarsLoader&&(this.starWarsLoader.x=.5*this.screenWidth,this.starWarsLoader.y=.5*this.screenHeight),this.text&&(this.text.x=.5*this.screenWidth,this.text.y=.5*this.screenHeight+.5*this.starWarsLoader.height),this.background&&r.isWebGL&&(this.background.width=this.screenWidth,this.background.height=this.screenHeight),this.continueButton&&(this.continueButton.view.position.x=this.screenWidth/2,this.continueButton.view.position.y=this.screenHeight/2)},i.exports=m}),define("text!starwars/shaders/glitch.glsl",[],function(){return"precision highp float;\n\n#define PI 3.141592653589793\n#define PI2 6.283185307179586\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 dimensions;\n\nuniform float time;\nuniform float seed;\nuniform float verticalLinesIntensity;\nuniform float horizontalLinesIntensity;\nuniform float flashIntensity;\nuniform float noiseIntensity;\nuniform float glitchOffset;\nuniform float glitchIntensity;\n\nvec3 rgb2hsv(vec3 c){\n    vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n        vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n        vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n\n        float d = q.x - min(q.w, q.y);\n        float e = 1.0e-10;\n        return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\nvec3 hsv2rgb(vec3 c){\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nfloat rand(float n){return fract(sin(n) * 43758.5453123);}\n\nvec4 horizontalGlitch() {\n  vec4 color = vec4(0.);\n  vec2 uv = vTextureCoord;\n  float offset = (rand(uv.y + time) - .5) * (glitchOffset / dimensions.x);\n  uv.x += offset * glitchIntensity;\n  // @damien help !!\n  //uv.x = min(max(0.0,uv.x),1.0);\n  color = texture2D(uSampler, uv);\n  return color;\n}\n\nvec3 toStarWarsBlue(vec3 hsvColor) {\n  hsvColor.x = .59;\n  hsvColor.y = hsvColor.y * .7 + .15;\n  return hsvColor;\n}\n\nvoid main(void)\n{\n  vec4 color = horizontalGlitch();\n\n  float offsetedTime = time + seed;\n\n  vec2 fragCoord = vTextureCoord * dimensions.xy;\n  fragCoord.y *= -1.;\n\n  vec3 hsvColor = rgb2hsv(color.rgb);\n\n  // hsvColor = toStarWarsBlue(hsvColor);\n\n  // noise\n  float noise = rand(1. + fragCoord.y + fragCoord.x * offsetedTime);\n  hsvColor.z += noise * .2 * noiseIntensity;\n\n  // vertical lines\n  hsvColor.z += .2 * step(mod(fragCoord.x, 3.), 1.) * verticalLinesIntensity;\n\n  // horizontal lines\n  float offset = rand(fragCoord.y * fragCoord.x + fragCoord.x * offsetedTime) * 10.;\n  float ratio = step(rand(50. + fragCoord.y + fragCoord.x * offsetedTime), .2);\n  float timeShift = cos(offsetedTime) * 200.;\n  hsvColor.z += .4 * step(mod(fragCoord.y + offset + offsetedTime * 400. + timeShift, 200.), 10.) * ratio * horizontalLinesIntensity;\n\n  // horizontal rectangles\n  float offset3 = rand(ceil(fragCoord.y * 0.01));\n  hsvColor.z += .15 * step(mod(fragCoord.y + offsetedTime * 15000., 2000. + 10000. * offset3), 400. + 800. * offset3) * flashIntensity;\n\n  color.rgb = hsv2rgb(hsvColor);\n  color.rgb *= color.a;\n\n\tgl_FragColor = color;\n\n\n}\n"}),define("starwars/filters/GlitchFilter",["require","exports","module","PIXI","fido/system/Ticker","text!../shaders/glitch.glsl"],function(t,e,i){var r=t("PIXI"),n=t("fido/system/Ticker"),s=t("text!../shaders/glitch.glsl"),o=function(){r.AbstractFilter.call(this,null,s,{time:{type:"f",value:0},dimensions:{type:"4fv",value:[0,0,0,0]},seed:{type:"f",value:100*Math.random()},glitchOffset:{type:"f",value:4},glitchIntensity:{type:"f",value:0},noiseIntensity:{type:"f",value:1},verticalLinesIntensity:{type:"f",value:1},horizontalLinesIntensity:{type:"f",value:1},flashIntensity:{type:"f",value:1}}),this.start()};o.prototype=Object.create(r.AbstractFilter.prototype),o.prototype.constructor=o,o.prototype.start=function(){function t(){var t=this.timeline.timeScale();t=t>1?.5+Math.random():4+4*Math.random(),this.timeline.timeScale(t)}this.timeline=new TimelineMax({repeat:-1,onRepeat:t,onRepeatScope:this}),t.call(this),this.timeline.to(this.uniforms.glitchIntensity,.4,{value:1,delay:4,ease:Power3.easeInOut}),this.timeline.to(this.uniforms.glitchIntensity,.4,{value:0,ease:Power3.easeInOut}),n.instance.add(this.update,this)},o.prototype.stop=function(){this.timeline.kill(),n.instance.remove(this.update,this)},o.prototype.update=function(t){this.uniforms.time.value+=t/100},i.exports=o}),define("starwars/buttons/HighlightButton",["require","exports","module","PIXI","../filters/GlitchFilter","./IconButton"],function(t,e,i){var r=t("PIXI"),n=t("../filters/GlitchFilter"),s=t("./IconButton"),o=function(t,e,i){if(s.call(this,t),i=i||{},i.hasGlitchFilter=void 0===i.hasGlitchFilter||i.hasGlitchFilter,this.cacheAsBitmap=!0,this.highlight=e?new r.Sprite.fromFrame(e):new r.Sprite,this.highlight.anchor.set(.5),this.highlight.alpha=0,this.highlight.blendMode=r.isWebGL&&r.isWebGL?r.BLEND_MODES.ADD:0,i.hasGlitchFilter){var o=new n;o.uniforms.verticalLinesIntensity.value=0,this.highlight.filters=[o]}this.addChild(this.highlight),r.isWebGL?(this.cacheAsBitmap=!1,this.buttonContainer=new r.flip.Container3d,this.reflect=new r.flip.Container3d,this.backgroundReflect=new r.Sprite(this.background.texture),this.backgroundReflect.scale=this.background.scale,this.backgroundReflect.anchor.set(.5),this.reflect.addChild(this.backgroundReflect),this.iconReflect=new r.Sprite(this.icon.texture),this.iconReflect.anchor.set(.5),this.iconReflect.scale=this.icon.scale,this.reflect.addChild(this.iconReflect),this.reflect.alpha=0,this.buttonContainer.addChild(this.reflect),this.button=new r.flip.Container3d,this.button.addChild(this.background),this.button.addChild(this.icon),this.buttonContainer.addChild(this.button)):(this.buttonContainer=new r.Container,this.reflect=new r.Sprite,this.buttonContainer.addChild(this.background),this.buttonContainer.addChild(this.icon)),this.addChild(this.buttonContainer)};o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.setButtonRotation=function(t,e,i){window.WEBGL&&this.buttonContainer.rotation.set(t,e,i)},o.prototype.setHighlight=function(t){this.highlight.texture=r.Texture.fromFrame(t)},o.prototype.hide=function(t){t=t||.2,s.prototype.hide.call(this,t),TweenLite.to(this.highlight,t,{alpha:0,ease:Power2.easeIn})},o.prototype.hover=function(){var t=.4;TweenLite.to(this.highlight,t,{alpha:.9,ease:Power2.easeOut}),window.WEBGL&&(TweenLite.to(this.reflect,t,{alpha:.5,ease:Power2.easeOut}),TweenLite.to(this.button.position,t,{z:-8,ease:Power2.easeOut}))},o.prototype.out=function(){var t=.2;TweenLite.to(this.highlight,t,{alpha:0}),window.WEBGL&&(TweenLite.to(this.reflect,t,{alpha:1}),TweenLite.to(this.button.position,t,{z:0,ease:Power2.easeOut}))},i.exports=o}),define("fido/system/LocalStorage",["require","exports","module"],function(t,e,i){var r=function(t){this.id=t||"com.goodboydigital",this.canSave=!1;try{localStorage.setItem(this.id+".access",!0),localStorage.removeItem(this.id+".access",!0),this.canSave=!0}catch(e){}};r.prototype.store=function(t,e){this.canSave&&localStorage.setItem(this.id+"."+t,e)},r.prototype.get=function(t){if(this.canSave)return localStorage.getItem(this.id+"."+t)},r.prototype.storeObject=function(t,e){this.canSave&&localStorage.setItem(this.id+"."+t,JSON.stringify(e))},r.prototype.getObject=function(t){if(this.canSave)return JSON.parse(localStorage.getItem(this.id+"."+t))},r.prototype.remove=function(t){this.canSave&&localStorage.removeItem(this.id+"."+t)},r.prototype.reset=function(){if(this.canSave)for(var t in localStorage)t.indexOf(this.id+".")!==-1&&localStorage.removeItem(t)},i.exports=r}),define("starwars/NameUtils",["require","exports","module","PIXI","fido/loader/Cache","fido/system/LocalStorage"],function(t,e,i){var r=(t("PIXI"),t("fido/loader/Cache")),n=t("fido/system/LocalStorage"),s={};s.getUserName=function(){var t=r.getJson("config").COOKIES_BUNDLE_ID;r.getJson("config").config&&(t=r.getJson("config").config.ARCADE_COOKIES_BUNDLE_ID);var e=new n(t),i=e.getObject("userName");return i||(i="AAA"),i},s.setUserName=function(t){var e=r.getJson("config").COOKIES_BUNDLE_ID;r.getJson("config").config&&(e=r.getJson("config").config.ARCADE_COOKIES_BUNDLE_ID);var i=new n(e);i.storeObject("userName",t)},i.exports=s}),define("com/arcade/app/buttons/UserNameButton",["require","exports","module","fido/ui/buttons/AbstractButton","starwars/NameUtils"],function(t,e,i){var r=t("fido/ui/buttons/AbstractButton"),n=t("starwars/NameUtils"),s=function(t,e){r.call(this),this.app=t,this.style=e||{},this.letters=[],this.flip=new PIXI.Container,this.addChild(this.flip);for(var i=0;i<3;i++){var n=new PIXI.Text("_",this.style);this.style.letterSpacing=this.style.letterSpacing||2*n.width,n.x+=(i-1)*this.style.letterSpacing,n.anchor.set(.5),this.letters.push(n),this.flip.addChild(n)}this.pivot.x=1.5,this.onPress.add(this.onButtonPress,this),this.app.overlayManager.screens.name.onNameUpdated.add(this.update,this);var s=this.flip.width,o=this.flip.height;this.hitArea=new PIXI.Rectangle(.5*-s,.5*-o,s,o),this.update()};s.prototype=Object.create(r.prototype),s.prototype.constructor=s,s.prototype.update=function(t){t=n.getUserName();for(var e=0;e<this.letters.length;e++)this.letters[e].text=t[e]||""},s.prototype.onButtonPress=function(){this.app.overlayManager.show("name")},i.exports=s}),define("fido/physics/particles/ParticleSystem",["require","exports","module","PIXI"],function(t,e,i){var r=t("PIXI"),n=function(t){r.Container.call(this),this.bounds=t||new r.Rectangle(0,0,1024,1024),this.particleHalfWidthMax=0,this.particleHalfHeightMax=0,this.particles=[]};n.prototype=Object.create(r.Container.prototype),n.prototype.constructor=n,n.prototype.add=function(t){var e=.5*t.width,i=.5*t.width;this.particleHalfWidthMax=Math.max(e,this.particleHalfWidthMax),this.particleHalfHeightMax=Math.max(i,this.particleHalfHeightMax),this.particles.push(t),this.addChild(t)},n.prototype.update=function(){for(var t=0;t<this.particles.length;t++){var e=this.particles[t];e.update(),(e.x<this.bounds.x-this.particleHalfWidthMax||e.x>this.bounds.x+this.bounds.width+this.particleHalfWidthMax||e.y<this.bounds.y-this.particleHalfHeightMax||e.y>this.bounds.y+this.bounds.height+this.particleHalfHeightMax)&&e.kill()}},i.exports=n}),define("fido/physics/particles/Particle",["require","exports","module","signals","PIXI"],function(t,e,i){var r=t("signals"),n=t("PIXI"),s=function(){n.Container.call(this),this.velocity=new n.Point,this.rotationVelocity=0,this.life=this.currentLife=1/0,this._isDead=!1,this.onDead=new r};s.prototype=Object.create(n.Container.prototype),s.prototype.constructor=s,Object.defineProperty(s.prototype,"isDead",{enumerable:!0,configurable:!1,get:function(){return this._isDead},set:function(){throw new Error("Particle.isDead is read-only")}}),s.prototype.relive=function(){this.currentLife=this.life,this._isDead=!1},s.prototype.kill=function(){this.currentLife=0,this._isDead=!0,this.onDead.dispatch(this)},s.prototype.update=function(){this._isDead||(this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.rotation+=this.rotationVelocity,this.currentLife--,this.currentLife<1&&this.kill())},i.exports=s}),define("fido/physics/particles/Dust",["require","exports","module","./ParticleSystem","./Particle"],function(t,e,i){var r=t("./ParticleSystem"),n=t("./Particle");Dust=function(t,e){r.call(this,t),e=e||{},e.radius=e.radius||2,e.color=e.color||16777215,this._origin=new PIXI.Point,this._lastPosition=new PIXI.Point,this._time=0;var i=(new PIXI.Graphics).beginFill(e.color).drawCircle(0,0,e.radius),s=i.generateTexture(),o=150;PIXI.isWebGL||(o=0);for(var a=0;a<o;a++){var h=new n,l=new PIXI.Sprite(s);l.anchor.set(.5),l.blendMode=PIXI.BLEND_MODES.ADD,h.addChild(l),this.add(h)}this.resetParticles()},Dust.prototype=Object.create(r.prototype),Dust.prototype.constructor=Dust,Dust.prototype.resetParticles=function(){for(var t=0;t<this.particles.length;t++){var e=this.particles[t];e._alpha=.3+.4*Math.random(),e.x=this.bounds.x+this.bounds.width*Math.random(),e.y=this.bounds.y+this.bounds.height*Math.random(),e.z=Math.random(),e.velocity.set(Math.random()*e.z-.5,Math.random()*e.z-.5)}},Dust.prototype.update=function(t,e){this._time+=.01,t=t||this._origin,e=e||0;var i=t.x-this._lastPosition.x,r=t.y-this._lastPosition.y;this._lastPosition.copy(t);for(var n=0;n<this.particles.length;n++){var s=this.particles[n];s.update(),s.scale.set(s.z+e),s.x+=i*s.scale.x,s.y+=r*s.scale.x,s.alpha=(.4*Math.cos(3*(this._time+1*n))+.7)*s._alpha,s.x<this.bounds.x?s.x+=this.bounds.width:s.x>this.bounds.x+this.bounds.width?s.x-=this.bounds.width:s.y<this.bounds.y?s.y+=this.bounds.height:s.y>this.bounds.y+this.bounds.height&&(s.y-=this.bounds.height)}},i.exports=Dust}),define("com/arcade/app/elements/hangar/Hologram",["require","exports","module","PIXI","starwars/filters/GlitchFilter","starwars/buttons/IconButton","fido/system/Device"],function(t,e,i){var r=t("PIXI"),n=t("starwars/filters/GlitchFilter"),s=t("starwars/buttons/IconButton"),o=t("fido/system/Device"),a=function(t){r.Container.call(this),this.app=t,this.hologramFrames=[{id:"c3po",img:"hologram_c3po.png",sentences:["c3po"]},{id:"lando",img:"hologram_chewie.png",sentences:["lando"]},{id:"hera",img:"hologram_hera.png",sentences:["hera"]},{id:"r2d2",img:"hologram_r2d2.png",sentences:["r2d2"]},{id:"kanan",img:"hologram_kanan.png",sentences:["yoda"]}],this.emitter=new r.Sprite.fromFrame("hologram_emitter.png"),this.emitter.anchor.set(.5),this.addChild(this.emitter),this.halo=new r.Sprite.fromFrame("hologram_emitter_light.png"),this.halo.anchor.set(.5,1),this.halo.x=15,this.halo.y=-10,this.halo.blendMode=r.BLEND_MODES.ADD,this.addChild(this.halo),this.character=new r.Sprite,this.character.buttonMode=!0,this.character.anchor.set(.5,1),this.character.alpha=.9,this.character.interactive=!0,this.talkButton=new s("icon_speak.png"),this.talkButton.onPress.add(this.onMouseDown,this),this.talkButton.position.y=-(this.halo.height/2)+80,this.talkButton.position.x=7,this.count=0,this.copy="..",this.flicker=!0,r.isWebGL&&o.instance.desktop&&(this.character.filters=[new n]),this.addChild(this.character),this.character.visible=!1,this.halo.visible=!1};a.prototype=Object.create(r.Container.prototype),a.prototype.constructor=a,a.prototype.onMouseDown=function(){this.app.alertPanelManager.showCustom(translations[this.copy[this.count++%2]],{canComeBack:!0})},a.prototype.updateTransform=function(){this.containerUpdateTransform(),this.flicker&&(this.character.alpha=.8+.2*Math.random())},a.prototype.setData=function(t,e){this.copy=e,this.character.visible=!0,this.halo.visible=!0,this.addChild(this.talkButton);for(var i=0;i<this.hologramFrames.length;i++)t===this.hologramFrames[i].id&&this.changeHologram(i)},a.prototype.changeHologram=function(t){switch(this.character.texture=r.Texture.fromFrame(this.hologramFrames[t].img),this.hologramFrames[t].img){case"hologram_r2d2.png":this.character.y=-25,this.character.x=7;break;default:this.character.y=-14,this.character.x=0}},i.exports=a}),function(t){function e(){this._callbacks=[]}function i(t){function i(t){return function(){s+=1,n[t]=Array.prototype.slice.call(arguments),s===o&&r.done(n)}}var r=new e,n=[];if(!t||!t.length)return r.done(n),r;for(var s=0,o=t.length,a=0;a<o;a++)t[a].then(i(a));return r}function r(t,i){var n=new e;return 0===t.length?n.done.apply(n,i):t[0].apply(null,i).then(function(){t.splice(0,1),r(t,arguments).then(function(){n.done.apply(n,arguments)})}),n}function n(t){var e="";if("string"==typeof t)e=t;else{var i=encodeURIComponent;for(var r in t)t.hasOwnProperty(r)&&(e+="&"+i(r)+"="+i(t[r]))}return e}function s(){var t;if(window.XMLHttpRequest)t=new XMLHttpRequest;else if(window.ActiveXObject)try{t=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){t=new ActiveXObject("Microsoft.XMLHTTP")}return t}function o(t,i,r,o){function a(){l.abort(),u.done(h.ETIMEOUT,"",l)}var l,c,u=new e;r=r||{},o=o||{};try{l=s()}catch(d){return u.done(h.ENOXHR,""),u}"GET"===t&&r?(c=n(r),i+="?"+c,c=null):"POST"===t&&r&&(c=JSON.stringify(r)),l.open(t,i),r!=c&&"GET"===t&&l.setRequestHeader("Content-type","application/x-www-form-urlencoded");for(var p in o)o.hasOwnProperty(p)&&l.setRequestHeader(p,o[p]);var f=h.ajaxTimeout;if(f)var m=setTimeout(a,f);return l.onreadystatechange=function(){if(f&&clearTimeout(m),4===l.readyState){var t=!l.status||(l.status<200||l.status>=300)&&304!==l.status;u.done(t,l.responseText,l)}},l.send(c),u}function a(t){return function(e,i,r){return o(t,e,i,r)}}e.prototype.then=function(t,i){var r;return this._isdone?r=t.apply(i,this.result):(r=new e,this._callbacks.push(function(){var e=t.apply(i,arguments);e&&"function"==typeof e.then&&e.then(r.done,r)})),r},e.prototype.done=function(){this.result=arguments,this._isdone=!0;for(var t=0;t<this._callbacks.length;t++)this._callbacks[t].apply(null,arguments);this._callbacks=[]};var h={Promise:e,join:i,chain:r,ajax:o,get:a("GET"),post:a("POST"),put:a("PUT"),del:a("DELETE"),ENOXHR:1,ETIMEOUT:2,ajaxTimeout:0};"function"==typeof define&&define.amd?define("starwars/tracking/promise",[],function(){return h}):t.promise=h}(this),function(){function t(){document.cookie="testcookie";var t=document.cookie.indexOf("testcookie")!==-1,e=!!navigator.cookieEnabled;return t&&e}var e=this,i=i||{};i.tempCookie={};var r=t();i.setCookie=function(t,e,n){if(r){var s=new Date;s.setDate(s.getDate()+n);var o=escape(e)+(null==n?"":"; expires="+s.toUTCString());document.cookie=t+"="+o}else i.tempCookie[t]=e},i.getCookie=function(t){if(r){var e=document.cookie,n=e.indexOf(" "+t+"=");if(n===-1&&(n=e.indexOf(t+"=")),n===-1)e=null;else{n=e.indexOf("=",n)+1;var s=e.indexOf(";",n);s===-1&&(s=e.length),e=unescape(e.substring(n,s))}return e}return i.tempCookie[t]},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=i),exports.COOKIE_HELPER=i):"undefined"!=typeof define&&define.amd?define("starwars/tracking/CookieHelper",i):e.COOKIE_HELPER=i}.call(this),define("tracker",["require","exports","module","starwars/tracking/promise","starwars/tracking/CookieHelper","fido/system/Device"],function(t,e,i){var r=t("starwars/tracking/promise"),n=t("starwars/tracking/CookieHelper"),s=t("fido/system/Device"),o=o||{};o.host="https://api.disney.com/datatech/serverlog/v1/json",o.headers={"Content-Type":"application/json",Authorization:"FD BB838628-FD2E-42E9-9833-155C2F416DE8:3286AB989D759BB4DAC3392D994071A454F45F1A16DD942F"},o.app="starwarsarcade_bd_bd",o.user_id=null,o.app_locale="en_GB",o.tag=null,o.transaction_id=null,o.browser_id=null,o.network="bd",o.view_network="bd",o.newUser=!1,o.init=function(t,e){o.browser_id=o.getBrowserId(),o.user_id=o.browser_id,o.transaction_id=o.getSessionId(),o.app_locale=t,o.keepSessionAlive(),o.gameId=e},o.keepSessionAlive=function(){o.intervalREG&&clearTimeout(o.intervalREG),o.intervalREG=setTimeout(o.refreshSession,18e5)},o.refreshSession=function(){o.transaction_id=o.getNewId(),n.setCookie("trsid",o.transaction_id),o.keepSessionAlive()},o.trackClickedLink=function(){var t=o.getDefaultParams();t.tag="clicked_link",t.method="clicked_link",t.is_new_user=o.newUser?1:0,t.tracking_code="NULL",t.track_url="NULL",t.referrer_url="NULL",o.sendRequest(o.host,t,o.headers)},o.trackDeviceInfo=function(){var t=o.getDefaultParams();t.tag="device_info",t.method="device_info",t.machine="NULL",t.model=s.instance.isMobile?"phone":s.instance.desktop?"desktop":"tablet",t.os_version=s.instance.desktop?"other":s.instance.safari?"safari":s.instance.android?"android":"other",t.m_token="NULL",t.device_id="NULL",t.ios_vendor_id="NULL",t.ios_advertising_id="NULL",t.google_advertising_id="NULL",o.sendRequest(o.host,t,o.headers)},o.trackGameAction=function(t,e,i,r){o.keepSessionAlive();var n=o.getDefaultParams();n.tag="game_action",n.method="game_action",n.context=t,n.action=e,n.type=i,n.message=r,n.level="0",o.sendRequest(o.host,n,o.headers)},o.getDefaultParams=function(){var t={};return t.app=o.app,t.user_id=o.user_id,t.browser_id=o.browser_id,t.app_locale=o.app_locale,t.transaction_id=o.transaction_id,t.network=o.network,t.view_network=o.view_network,t},o.sendRequest=function(t,e,i){r.post(t,e,i).then(function(t,e,i){})},o.getBrowserId=function(){var t,e=n.getCookie("brwid");return e&&e.length>30?t=e:(o.newUser=!0,t=o.getNewId(),n.setCookie("brwid",t)),t},o.getSessionId=function(){var t=o.getNewId();return n.setCookie("trsid",t),t},o.getNewId=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,i="x"===t?e:3&e|8;return i.toString(16)})};var a={trackAction:function(t,e){s.instance.local||o.trackGameAction(o.gameId,t||"","NULL",e)},init:function(t,e){s.instance.local||(o.init(t,e),o.trackClickedLink(),o.trackDeviceInfo())},trackClick:function(){}};i.exports=a}),define("com/arcade/app/elements/hangar/items/HangarItem",["require","exports","module","PIXI","tracker"],function(t,e,i){var r=t("PIXI"),n=function(t,e){r.Container.call(this),this.name=e||"";var i=/img\//.test(t)?"fromImage":"fromFrame";this.animationDuration=1,this.highlight=null,this.sprite=new r.Sprite[i](t),this.sprite.anchor.set(.5),this.addChild(this.sprite)};n.prototype=Object.create(r.Container.prototype),n.prototype.constructor=n,n.prototype.setSize=function(t,e){this.sprite.width=t||this.sprite.width,this.sprite.height=e||this.sprite.height},n.prototype.hide=function(t,e){var i="left"===t?1:-1;e=e||this.animationDuration,TweenLite.to(this,e,{x:i*this.sprite.width,onCompleteScope:this,onComplete:function(){this.visible=!1}})},n.prototype.show=function(e,i){t("tracker").trackAction("shop_item_select","item_"+this.name),this.visible=!0,i=i||this.animationDuration;var r="left"===e?1:-1;TweenLite.fromTo(this,i,{x:r*this.sprite.width},{x:0})},i.exports=n}),define("com/arcade/app/elements/hangar/items/CeilingItem",["require","exports","module","PIXI","./HangarItem","fido/sound/SoundBridge"],function(t,e,i){var r=t("PIXI"),n=t("./HangarItem"),s=t("fido/sound/SoundBridge"),o=function(t){if(n.call(this,t),window.WEBGL){var e=new r.flip.Container3d;this.sprite.width=640,this.sprite.height=430,e.addChild(this.sprite),e.y=12,e.rotation.x=.513*Math.PI,this.addChild(e)}};o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.show=function(t,e){n.prototype.show.call(this,t,e),0!==e&&s.sfx.play("changescene")},o.prototype.setSize=function(t,e){window.WEBGL||(this.sprite.width=t||this.sprite.width,this.sprite.height=e||this.sprite.height)},i.exports=o}),define("com/arcade/app/elements/hangar/items/FloorItem",["require","exports","module","PIXI","./HangarItem","fido/sound/SoundBridge"],function(t,e,i){var r=t("PIXI"),n=t("./HangarItem"),s=t("fido/sound/SoundBridge"),o=function(t){if(n.call(this,t),window.WEBGL){var e=new r.flip.Container3d;this.sprite.width=660,this.sprite.height=700,e.addChild(this.sprite),e.x=8,e.y=-50,e.scale.x=1.01,e.rotation.x=.438*-Math.PI,this.addChild(e)}};o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.show=function(t,e){n.prototype.show.call(this,t,e),0!==e&&s.sfx.play("changescene")},o.prototype.setSize=function(t,e){window.WEBGL||(this.sprite.width=t||this.sprite.width,this.sprite.height=e||this.sprite.height)},i.exports=o}),define("fido/physics/Rope",["require","exports","module","PIXI"],function(t,e,i){var r=t("PIXI"),n=function(t){if(r.Container.call(this),this.startX=t.startX||0,this.startY=t.startY||0,t.texture){switch(this.texture=t.texture,this.type=t.type||"default",this.fallBackLineColor=t.fallBackLineColor||16711680,this.fallBackLineWidth=t.fallBackLineWidth||3,this.forces=[],this.fixed=!1,this.usesTexture=r.isWebGL,this.type){case"fixed":this.fixed=!0}this.gravity=t.gravity||3.4,this.linkLength=0,this.endX=t.endX||0,this.endY=t.endY||0,this.joints=t.joints||8,this.iterations=t.iterations||1,this.hasAttachment=t.hasAttachment||!1,this.radius=t.radius||150,this.friction=t.friction||.02,this.pX=[],this.pY=[],this.oX=[],this.oY=[],this.links=[],this.size=0,this.clickOffsetX=0,this.clickOffsetY=0}};n.prototype=Object.create(r.Container.prototype),n.constructor=n,n.prototype.build=function(t){this.size=t,this.linkLength=this.size/this.joints;for(var e=0,i=-this.linkLength,n=0;n<=this.joints;n++)this.pX[n]=this.startX+e*n+n,this.pY[n]=this.startY+i*n,this.oX[n]=this.startX+e*n,this.oY[n]=this.startY+i*n,this.links[n]=new r.Point(20*n,20*n);if(this.usesTexture)this.strip=new r.mesh.Rope(this.texture,this.links);else{this.strip=new r.Graphics,this.strip.moveTo(this.startX,this.startY),this.strip.lineStyle(5,this.fallBackLineColor);for(var s=0;s<this.links.length;s++)this.strip.lineTo(this.links[s].x,this.links[s].y)}this.addChild(this.strip)},n.prototype.update=function(t,e,i){if(this.pX[0]=this.startX,this.pY[0]=this.startY,this.fixed?(this.pX[this.joints]=this.endX,this.pY[this.joints]=this.endY):this.dragging&&(this.endX=e-this.clickOffsetX,this.endY=i-this.clickOffsetY,this.pX[this.joints]=this.endX,this.pY[this.joints]=this.endY,this.pX[0]=this.startX,this.pY[0]=this.startY),this.verlet(),this.satisfyConstraints(),t&&this.detect(t),this.satisfyJoints(),this.links[0].x=this.startX,this.links[0].y=this.startY,this.fixed&&(this.links[this.links.length-1].x=this.endX,this.links[this.links.length-1].y=this.endY),!this.usesTexture){this.strip.clear(),this.strip.moveTo(this.links[0].x,this.links[0].y),this.strip.lineStyle(this.fallBackLineWidth,this.fallBackLineColor);var r=this.links.length;this.hasAttachment===!0&&(r-=1);for(var n=1;n<r;n++)this.strip.lineTo(this.links[n].x,this.links[n].y)}},n.prototype.satisfyJoints=function(){for(var t=0;t<=this.joints;t++)this.links[t].x=this.pX[t],this.links[t].y=this.pY[t]},n.prototype.detect=function(t){for(var e,i=150,r=2;r<joints-1;r++){e=this.links[r];var n=t.x-this.pX[r],s=t.y-this.pY[r],o=Math.sqrt(n*n+s*s);if(o<i){var a=-n/o,h=-s/o;this.pX[r]=this.oX[r]=t.x+a*i,this.pY[r]=this.oY[r]=t.y+h*i}}},n.prototype.getAngle=function(t,e,i,r){var n=t-i,s=e-r;return Math.atan2(s,n)},n.prototype.verlet=function(){for(var t=1;t<=this.joints;t++){for(var e=this.pX[t],i=this.pY[t],r=this.pX[t]-this.oX[t],n=this.pY[t]-this.oY[t]+this.gravity,s=0;s<this.forces.length;s++){var o=this.forces[s];r+=o.x,n+=o.y}this.pX[t]+=(1-this.friction)*r,this.pY[t]+=(1-this.friction)*n,this.oX[t]=e,this.oY[t]=i}},n.prototype.satisfyConstraints=function(){for(var t=0,e=1;e<=this.iterations;e++)for(var i=1;i<=this.joints;i++){i===this.joints&&this.dragging&&(this.pX[i]=this.endX,this.pY[i]=this.endY);var r=this.pX[i]-this.pX[i-1],n=this.pY[i]-this.pY[i-1],s=Math.sqrt(r*r+n*n);t=i===this.joints&&this.hasAttachment===!0?s-this.radius:s-this.linkLength;var o=t*r/s/2,a=t*n/s/2;if(this.pX[i]-=o,this.pY[i]-=a,this.pX[i-1]+=o,this.pY[i-1]+=a,i<this.joints){var r=this.pX[i+1]-this.pX[i-1],n=this.pY[i+1]-this.pY[i-1],s=Math.sqrt(r*r+n*n),h=this.size/this.joints;if(s<h){var t=s-h,o=t*r/s/2,a=t*n/s/2;this.pX[i+1]-=o,this.pY[i+1]-=a,this.pX[i-1]+=o,this.pY[i-1]+=a}}}},n.prototype.updateStartX=function(t){this.startX=t},n.prototype.updateStartY=function(t){this.startY=t},n.prototype.updateRadius=function(t){this.radius=t},n.prototype.updateEndX=function(t){this.endX=t},n.prototype.updateEndY=function(t){this.endY=t},n.prototype.addStartX=function(t){this.startX+=t},n.prototype.reset=function(t){this.linkLength=this.size/this.joints;for(var e=t?20:-20,i=-this.linkLength,r=0;r<=this.joints;r++)this.pX[r]=this.startX+e*r+r,this.pY[r]=this.startY+i*r,this.oX[r]=this.startX+e*r,this.oY[r]=this.startY+i*r},n.prototype.destroy=function(){this.container.removeChild(this.strip),this.pX=null,this.pY=null,this.oX=null,this.oY=null,this.links=null},n.prototype.setLength=function(t,e){t*=.8;var i=this.endX-this.startX,r=this.endY-this.startY;if(i/=this.joints,r/=this.joints,this.linkLength=t/this.joints,e)for(var n=0;n<this.joints;n++)this.pX[n]=this.oX[n]=this.startX+i*n,this.pY[n]=this.oY[n]=this.startY+r*n},i.exports=n}),define("com/arcade/app/elements/hangar/items/SpaceshipItem",["require","exports","module","PIXI","./HangarItem","fido/physics/Rope","starwars/buttons/HighlightButton","fido/system/Ticker","fido/sound/SoundBridge"],function(t,e,i){var r=t("PIXI"),n=t("./HangarItem"),s=t("fido/physics/Rope"),o=(t("starwars/buttons/HighlightButton"),t("fido/system/Ticker")),a=t("fido/sound/SoundBridge"),h=function(t){switch(n.call(this,t),this._time=Math.random()*Math.PI,this._ropeLength=250,t){case"ships_xwing.png":this.sprite.anchor.set(.6,.42);break;case"ships_slave1.png":this.sprite.anchor.set(.55,.5);break;case"ships_tie.png":this.sprite.anchor.set(.54,.5);break;case"ships_ghost.png":this.sprite.anchor.set(.45,.5);break;case"ships_falcon.png":this.sprite.anchor.set(.58,.5)}this.rope=new s({texture:new r.Texture.fromImage(ASSET_URL+"img/game/hangar/rope.png"),startX:0,startY:0,joints:10,iterations:8,gravity:.98,friction:.04,fallBackLineColor:4207916,fallBackLineWidth:2}),this.rope.build(this._ropeLength),this.rope.update(),this.addChildAt(this.rope,0)};h.prototype=Object.create(n.prototype),
h.prototype.constructor=h,h.prototype.hide=function(t,e){e=e||this.animationDuration,TweenLite.to(this,e,{alpha:0,onComplete:function(){o.instance.remove(this.update,this)},onCompleteScope:this}),TweenLite.to(this.rope,.3*e,{startY:-500})},h.prototype.hide,h.prototype.show=function(t,e){0!==e&&a.sfx.play("clickthrough"),e=e||this.animationDuration,TweenLite.to(this,e,{alpha:1}),TweenLite.to(this.rope,.6*e,{startY:-this._ropeLength-60+30}),this.rope.reset();for(var i=Math.cos(.4*Math.PI)*(this._ropeLength/this.rope.pX.length)*("left"===t?1:-1),r=Math.sin(.4*Math.PI)*(this._ropeLength/this.rope.pX.length),n=0;n<this.rope.pX.length;n++)this.rope.pX[n]=this.rope.oX[n]=i*n,this.rope.pY[n]=this.rope.oY[n]=this.rope.startY+r*n;o.instance.add(this.update,this)},h.prototype.update=function(){this._time+=.1,this.rope.startX=Math.cos(.6*this._time),this.rope.update();var t=this.rope.getAngle(this.rope.pX[this.rope.joints-1],this.rope.pY[this.rope.joints-1],this.rope.pX[this.rope.joints],this.rope.pY[this.rope.joints])+.5*Math.PI;this.sprite.rotation+=.1*(t-this.sprite.rotation),this.sprite.x=this.rope.pX[this.rope.joints],this.sprite.y=this.rope.pY[this.rope.joints],this.highlight&&(this.highlight.anchor.copy(this.sprite.anchor),this.highlight.x=this.sprite.x,this.highlight.y=this.sprite.y,this.highlight.rotation=this.sprite.rotation)},i.exports=h}),define("com/arcade/app/elements/hangar/items/TableItem",["require","exports","module","./HangarItem","fido/sound/SoundBridge"],function(t,e,i){var r=t("./HangarItem"),n=t("fido/sound/SoundBridge"),s=function(t){r.call(this,t),this.animationDuration=.4,this.sprite.y=90,this.sprite.anchor.y=1};s.prototype=Object.create(r.prototype),s.prototype.constructor=s,s.prototype.hide=function(t,e){e=e||this.animationDuration;var i="left"===t?1:-1;TweenLite.to(this.sprite,e,{x:200*i,alpha:0,onCompleteScope:this,onComplete:function(){this.visible=!1}})},s.prototype.show=function(t,e){0!==e&&n.sfx.play("clickthrough"),e=e||this.animationDuration;var i="left"===t?1:-1;this.visible=!0,this.highlight.position.y=this.sprite.y-.5*this.sprite.height,TweenLite.fromTo(this.sprite,e,{x:200*i,alpha:0},{x:0,alpha:1})},i.exports=s}),define("com/arcade/app/elements/hangar/items/wallanimations/WallAnimation",["require","exports","module","PIXI"],function(t,e,i){var r=t("PIXI"),n=function(t,e){r.Container.call(this)};n.prototype=Object.create(r.Container.prototype),n.prototype.constructor=n,n.prototype.start=function(){},n.prototype.stop=function(){},i.exports=n}),define("com/arcade/app/elements/hangar/items/wallanimations/SmokeParticleSystem",["require","exports","module","PIXI","fido/physics/particles/Particle","fido/physics/particles/ParticleSystem"],function(t,e,i){var r=t("PIXI"),n=t("fido/physics/particles/Particle"),s=t("fido/physics/particles/ParticleSystem"),o=function(t){s.call(this,t);for(var e=0;e<50;e++){var i=new n,o=new r.Sprite.fromFrame("smoke.png");o.anchor.set(.5),o.alpha=.9,o.blendMode=r.isWebGL?r.BLEND_MODES.ADD:0,i.addChild(o),i.onDead.add(this.resetParticle,this),this.add(i),this.resetParticle(i)}};o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.resetParticle=function(t){t.x=this.bounds.x+this.bounds.width*Math.random(),t.y=this.bounds.y+this.bounds.height+.25*this.particleHalfHeightMax,t.rotationVelocity=(.01+.01*Math.random())*(Math.random()<.5?1:-1),t.velocity.set(Math.random()-.5,-Math.random()),t.scale.set(.5+.5*Math.random()),t.life=100+Math.floor(200*Math.random()),t.alpha=0,t.relive()},o.prototype.update=function(){s.prototype.update.call(this);for(var t=0;t<this.particles.length;t++){var e=this.particles[t];e.alpha=Math.min((e.life-e.currentLife)/10,1),e.alpha=Math.min(e.currentLife/60,e.alpha)}},i.exports=o}),define("com/arcade/app/elements/hangar/items/wallanimations/CarboniteWallAnimation",["require","exports","module","PIXI","./SmokeParticleSystem","./WallAnimation","fido/system/Ticker"],function(t,e,i){var r=t("PIXI"),n=t("./SmokeParticleSystem"),s=t("./WallAnimation"),o=t("fido/system/Ticker"),a=function(t,e){s.call(this,t,e),this.lightSabers=new r.Sprite.fromFrame("Sabers.png"),this.lightSabers.position.set(-42,-80),this.addChild(this.lightSabers),this.particleSystem=new n(new r.Rectangle(.5*-t,.5*-e,t,e)),this.addChild(this.particleSystem),this.foreground=new r.Sprite.fromFrame("carbonite_fore.png"),this.foreground.anchor.set(.5),this.addChild(this.foreground)};a.prototype=Object.create(s.prototype),a.prototype.constructor=a,a.prototype.start=function(){o.instance.add(this.update,this)},a.prototype.stop=function(){o.instance.remove(this.update,this)},a.prototype.update=function(){this.lightSabers.alpha=.7+.3*Math.random(),this.particleSystem.update()},i.exports=a}),define("com/arcade/app/elements/hangar/items/wallanimations/FalconWallAnimation",["require","exports","module","PIXI","./SmokeParticleSystem","starwars/filters/LightSpeedFilter","./WallAnimation"],function(t,e,i){var r=t("PIXI"),n=(t("./SmokeParticleSystem"),t("starwars/filters/LightSpeedFilter")),s=t("./WallAnimation"),o=function(t,e){s.call(this,t,e),this._isLightSpeeding=!0,this.lightSpeedFilter=new n,this.lightSpeedFilter.uniforms.offset.value=[.34,.5],this.lightSpeedFilter.uniforms.scale.value=.25,this.background=new r.Sprite.fromFrame("canvas_hyperspace.png"),this.background.anchor.set(.5),this.background.scale.set(.5),this.background.width=t,this.background.height=e,this.addChild(this.background),this.lightSpeedFilter.enterLightSpeed(),this.interactive=!0,this.buttonMode=!0,this.on("click",this.toggleLightSpeed.bind(this)),this.foreground=new r.Sprite.fromImage(ASSET_URL+"img/game/hangar/walls/falcon_window.png"),this.foreground.anchor.set(.5),this.addChild(this.foreground)};o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.start=function(){this.background.filters=r.isWebGL?[this.lightSpeedFilter]:null},o.prototype.stop=function(){this.background.filters=null},o.prototype.toggleLightSpeed=function(){this._isLightSpeeding=!this._isLightSpeeding,r.isWebGL?this._isLightSpeeding?this.lightSpeedFilter.leaveLightSpeed():this.lightSpeedFilter.enterLightSpeed():TweenMax.to(this.background,1,{alpha:this._isLightSpeeding?1:0})},o.prototype.update=function(t){},i.exports=o}),define("com/arcade/app/elements/hangar/items/wallanimations/SnowParticleSystem",["require","exports","module","PIXI","fido/physics/particles/Particle","fido/physics/particles/ParticleSystem"],function(t,e,i){var r=t("PIXI"),n=t("fido/physics/particles/Particle"),s=t("fido/physics/particles/ParticleSystem"),o=function(t){s.call(this,t);for(var e=(new r.Graphics).beginFill(16777215).drawCircle(0,0,2),i=e.generateTexture(),o=0;o<200;o++){var a=new n,h=new r.Sprite(i);h.anchor.set(.5),h.blendMode=r.isWebGL?r.BLEND_MODES.ADD:0,a.addChild(h),a.onDead.add(this.resetParticle,this),this.add(a),this.resetParticle(a)}};o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.resetParticle=function(t){t.x=this.bounds.x+this.bounds.width*Math.random(),t.y=this.bounds.y,t.velocity.set(.5*Math.random()-.25,Math.random()),t.scale.set(Math.random()),t.alpha=.5+.5*Math.random(),t.life=300+300*Math.random(),t.relive()},o.prototype.update=function(){s.prototype.update.call(this);for(var t=0;t<this.particles.length;t++){var e=this.particles[t];e.alpha=Math.min(e.currentLife/50,e.alpha)}},i.exports=o}),define("com/arcade/app/elements/hangar/items/wallanimations/HothWallAnimation",["require","exports","module","PIXI","./SnowParticleSystem","./WallAnimation","fido/system/Ticker"],function(t,e,i){var r=t("PIXI"),n=t("./SnowParticleSystem"),s=t("./WallAnimation"),o=t("fido/system/Ticker"),a=function(t,e){s.call(this,t,e),this.wallWidth=t,this.wallHeight=e,this.particleSystem=new n(new r.Rectangle(.5*-this.wallWidth,.5*-this.wallHeight,this.wallWidth,this.wallHeight)),this.addChild(this.particleSystem),this._timeouts={imperialShoot:0,speeders:[]},this.speeders=[];for(var i=0;i<3;i++){var o=new r.Sprite.fromFrame("speeders_small.png");o.anchor.set(.5),this.speeders.push(o),this.addChild(o)}this.laser1=new r.Sprite.fromFrame("Hoth_Laser.png"),this.laser1.blendMode=r.isWebGL?r.BLEND_MODES.ADD:0,this.laser1.anchor.set(1,.5),this.laser1.x=55,this.laser1.y=-4,this.addChild(this.laser1),this.laser2=new r.Sprite.fromFrame("Hoth_Laser.png"),this.laser2.blendMode=r.isWebGL?r.BLEND_MODES.ADD:0,this.laser2.x=65,this.laser2.y=-4,this.laser2.anchor.set(1,.5),this.addChild(this.laser2),this.foreground=new r.Sprite.fromFrame("doors.png"),this.foreground.anchor.set(.5),this.addChild(this.foreground),this.timeline=this.buildImperialShootTimeline(),this.buttonMode=!0,this.on("click",this.launchImperialWalkerShootAnimation.bind(this))};a.prototype=Object.create(s.prototype),a.prototype.constructor=a,a.prototype.start=function(){this.interactive=!0;for(var t=0;t<this.speeders.length;t++){var e=this.speeders[t];this.launchSpeederAnimation(e,t,.5*-this.wallWidth-e.width,.5*this.wallWidth+e.width)}this.launchImperialWalkerShootAnimation(),o.instance.add(this.update,this)},a.prototype.stop=function(){this.interactive=!1,clearTimeout(this._timeouts.imperialShoot);for(var t=0;t<this._timeouts.speeders.length;t++)clearTimeout(this._timeouts.speeders[t]);o.instance.remove(this.update,this)},a.prototype.buildImperialShootTimeline=function(){function t(t,e){var i=new TimelineMax;return i.fromTo(t.scale,.05,{x:0},{x:1,ease:Linear.easeInOut}),i.fromTo(t,.2,{x:e},{x:e-300,ease:Linear.easeInOut}),i}var e=new TimelineMax;return e.add(t(this.laser1,this.laser1.x)),e.add(t(this.laser2,this.laser2.x),.2),e},a.prototype.launchImperialWalkerShootAnimation=function(){this.timeline.restart(),clearTimeout(this._timeouts.imperialShoot),this._timeouts.imperialShoot=setTimeout(this.launchImperialWalkerShootAnimation.bind(this),2e3+2e3*Math.random())},a.prototype.launchSpeederAnimation=function(t,e,i,r){function n(){var o=Math.random()>.5,a=Math.random()>.5;fromY=-30-Math.random()*(a?80:40),toY=-30-Math.random()*(a?40:80),t.scale.set(.2*Math.random()+.9),t.scale.x*=o?1:-1,TweenMax.fromTo(t,1+Math.random(),{x:o?r:i,y:fromY},{x:o?i:r,y:toY,onComplete:function(){s[e]=setTimeout(function(){n()},2e3+2e3*Math.random())},ease:Linear.easeInOut})}var s=this._timeouts.speeders;n()},a.prototype.update=function(t){this.particleSystem.update()},i.exports=a}),define("com/arcade/app/elements/hangar/items/wallanimations/EmpireWallAnimation",["require","exports","module","PIXI","./WallAnimation","fido/system/Ticker"],function(t,e,i){var r=t("PIXI"),n=t("./WallAnimation"),s=t("fido/system/Ticker"),o=function(t,e){n.call(this,t,e),this._angle=0,this.background=new r.Sprite.fromFrame("Empire_BG.png"),this.background.anchor.set(.5),this.addChild(this.background),this.deathStar=new r.Sprite.fromFrame("Death_Star.png"),this.deathStar.anchor.set(.5),this.addChild(this.deathStar),this.starDestroyer1=new r.Sprite.fromFrame("Star_destroyer.png"),this.starDestroyer1.anchor.set(.5),this.addChild(this.starDestroyer1),this.starDestroyer2=new r.Sprite.fromFrame("Star_destroyer.png"),this.starDestroyer2.anchor.set(.5),this.starDestroyer2.scale.set(.5),this.starDestroyer2.scale.x*=-1,this.foreground=new r.Sprite.fromFrame("Empire_FG.png"),this.foreground.anchor.set(.5),this.addChild(this.foreground)};o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.start=function(){s.instance.add(this.update,this)},o.prototype.stop=function(){s.instance.remove(this.update,this)},o.prototype.update=function(){this._angle+=.005,this.background.position.set(10*Math.cos(this._angle),20*Math.sin(this._angle)),this.deathStar.position.set(-100+15*Math.cos(this._angle),20+30*Math.sin(this._angle)),this.starDestroyer1.position.set(80+30*Math.cos(this._angle),-40+60*Math.sin(this._angle))},i.exports=o}),define("com/arcade/app/elements/hangar/items/wallanimations/LothalWallAnimation",["require","exports","module","PIXI","./WallAnimation","fido/system/Ticker"],function(t,e,i){var r=t("PIXI"),n=t("./WallAnimation"),s=t("fido/system/Ticker"),o=function(t,e){n.call(this,t,e),this._time=0,this.wallWidth=t,this.wallHeight=e,this.container=new r.Container,this.addChild(this.container);var i=new r.Sprite.fromFrame("Lothal_BG.png");i.anchor.set(.5),this.container.addChild(i),this.starDestroyer=new r.Sprite.fromFrame("stardestroyersmall.png"),this.starDestroyer.anchor.set(.5),this.container.addChild(this.starDestroyer),this.ties=[];for(var s=0;s<3;s++){var o=new r.Sprite.fromFrame("TIE.png");o.anchor.set(.5),this.ties.push(o),this.container.addChild(o)}};o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.start=function(){for(var t=0;t<this.ties.length;t++)this.launchTieAnimation(this.ties[t]);s.instance.add(this.update,this)},o.prototype.stop=function(){for(var t=0;t<this.ties.length;t++)TweenMax.killTweensOf(this.ties[t]);s.instance.remove(this.update,this)},o.prototype.update=function(){this._time+=.005,this.starDestroyer.position.set(-150+10*Math.cos(this._time),-30-2*Math.sin(this._time))},o.prototype.launchTieAnimation=function(t){TweenMax.killTweensOf(t);var e=1.5+.5*Math.random(),i=3+3*Math.random(),r=Math.random()<.5,n=(Math.random()<.5,Math.random()<.1);TweenMax.fromTo(t.scale,e,{x:0,y:0},{x:1,y:1,delay:i,ease:Power3.easeIn}),TweenMax.fromTo(t,e,{alpha:0},{alpha:1,delay:i,ease:Power4.easeOut});var s=.6*Math.random()-.3;s-=.1,TweenMax.fromTo(t,e,{x:20*Math.random()-10,y:20*Math.random()-10,rotation:s},{bezier:[{x:140*Math.random()*(r?1:-1),y:30*Math.random()},{x:(.5*this.wallWidth+200)*(r?1:-1),y:.5*-this.wallHeight-100}],rotation:s+(.5+Math.random())*(n?7:1)*(r?1:-1),delay:i,onComplete:function(){this.launchTieAnimation(t)},onCompleteScope:this,ease:Power3.easeIn});var o=.1,a=i+.9*e;TweenMax.to(this.container,o,{x:5*Math.random()*(r?-1:1),y:5*Math.random(),delay:a}),TweenMax.to(this.container,2*o,{x:0,y:0,delay:a+o,ease:Back.easeOut})},i.exports=o}),define("com/arcade/app/elements/hangar/items/WallItem",["require","exports","module","PIXI","./HangarItem","./wallanimations/WallAnimation","fido/sound/SoundBridge","starwars/filters/GlitchFilter","./wallanimations/CarboniteWallAnimation","./wallanimations/FalconWallAnimation","./wallanimations/HothWallAnimation","./wallanimations/EmpireWallAnimation","./wallanimations/LothalWallAnimation"],function(t,e,i){var r=t("PIXI"),n=t("./HangarItem"),s=t("./wallanimations/WallAnimation"),o=t("fido/sound/SoundBridge"),a=t("starwars/filters/GlitchFilter"),h={"wall-carbonite":t("./wallanimations/CarboniteWallAnimation"),"wall-falcon":t("./wallanimations/FalconWallAnimation"),"wall-hoth":t("./wallanimations/HothWallAnimation"),"wall-empire":t("./wallanimations/EmpireWallAnimation"),"wall-lothal":t("./wallanimations/LothalWallAnimation")},l=function(t,e){n.call(this,t,e),this.time=0,this.animation=new(h[this.name]||s)(this.sprite.width,this.sprite.height);var i=new r.Graphics;i.beginFill(16711680),i.drawRect(.5*-this.sprite.width,.5*-this.sprite.height,this.sprite.width,this.sprite.height),this.addChild(i),this.animation.mask=i,this.addChild(this.animation),this.addOverlay=new r.Sprite.fromImage(ASSET_URL+"img/game/hangar/walls/"+e.replace("wall-","")+"_multiply.jpg"),this.addOverlay.anchor.set(.5),this.addOverlay.scale.set(2),this.addOverlay.blendMode=r.BLEND_MODES.MULTIPLY,r.isWebGL?(this.addChild(this.addOverlay),this.glitchFilter=new a,this.glitchFilter.uniforms.flashIntensity.value=0,this.glitchFilter.uniforms.verticalLinesIntensity.value=.1,this.glitchFilter.uniforms.horizontalLinesIntensity.value=.1,this.glitchFilter.uniforms.noiseIntensity.value=0,this.glitchFilter.uniforms.glitchOffset.value=3):this.addOverlay.alpha=0};l.prototype=Object.create(n.prototype),l.prototype.constructor=l,l.prototype.hide=function(t,e){this.animation.stop(),r.isWebGL&&(this.glitchFilter.stop(),TweenLite.to(this.addOverlay,2,{alpha:0})),n.prototype.hide.call(this,t,e)},l.prototype.show=function(t,e){n.prototype.show.call(this,t,e),0!==e&&o.sfx.play("changescene"),this.animation.start(),r.isWebGL&&(this.glitchFilter.start(),TweenLite.to(this.addOverlay,2,{alpha:1}))},i.exports=l}),define("fido/physics/DoubleSpring",["require","exports","module"],function(t,e,i){var r=function(){this.x=0,this.ax=0,this.dx=0,this.tx=0,this.y=0,this.ay=0,this.dy=0,this.ty=0,this.max=30,this.damp=.75,this.springiness=.09,this.max=160,this.damp=.85,this.springiness=.29};r.constructor=r,r.prototype.update=function(){this.ax=(this.tx-this.x)*this.springiness,this.dx+=this.ax,this.dx*=this.damp,this.dx<-this.max?this.dx=-this.max:this.dx>this.max&&(this.dx=this.max),this.x+=this.dx,this.ay=(this.ty-this.y)*this.springiness,this.dy+=this.ay,this.dy*=this.damp,this.dy<-this.max?this.dy=-this.max:this.dy>this.max&&(this.dy=this.max),this.y+=this.dy},r.prototype.reset=function(){this.x=0,this.ax=0,this.dx=0,this.tx=0,this.y=0,this.ay=0,this.dy=0,this.ty=0},i.exports=r}),define("fido/physics/Spring",["require","exports","module"],function(t,e,i){var r=function(){this.x=0,this.ax=0,this.dx=0,this.tx=0,this.max=160,this.damp=.8,this.springiness=.1};r.prototype.update=function(){this.ax=(this.tx-this.x)*this.springiness,this.dx+=this.ax,this.dx*=this.damp,this.dx<-this.max?this.dx=-this.max:this.dx>this.max&&(this.dx=this.max),this.x+=this.dx},r.prototype.reset=function(){this.x=0,this.ax=0,this.dx=0,this.tx=0},i.exports=r}),define("fido/ui/PixiScrollbar",["require","exports","module","../physics/Spring","fido/system/Ticker","./PixiTrackpad"],function(t,e,i){var r=(t("../physics/Spring"),t("fido/system/Ticker"));t("./PixiTrackpad");PixiScrollBar=function(t){this.topMargin=15,this.bottomMargin=15,this.yTouchOffset=0,this.dragging=!1,this.trackpad=t.trackpad,this.targetPosition={x:0,y:0},this.container=t.target,this.guideLine=new PIXI.Sprite,this.guideLine.anchor.set(1,0),this.guideLine.position.x=630,this.guideLine.position.y=1,this.guideLine.height=229,this.guideLine.hitArea=new PIXI.Rectangle((-10),0,40,300),this.guideLine.interactive=!1,this.guideLine.buttonMode=!1,this.guideButton=new PIXI.Sprite,this.guideButton.anchor.set(1,.5),this.guideButton.position.x=642,this.guideButton.hitArea=new PIXI.Rectangle((-100),(-100),400,300),this.guideButton.position.y=this.topMargin+.5*this.guideButton.height,this.guideButton.interactive=!0,this.guideButton.buttonMode=!0,this.container.addChild(this.guideLine),this.container.addChild(this.guideButton),this.guideButton.touchstart=this.guideButton.mousedown=this.onDown.bind(this),this.guideButton.touchend=this.guideButton.touchendoutside=this.guideButton.mouseup=this.guideButton.mouseupoutside=this.onUp.bind(this),this.guideButton.mousemove=this.guideButton.touchmove=this.onMove.bind(this),this.panelHeight=this.container.viewHeight,this.scrollHeight=this.container.scrollHeight-this.panelHeight,this.scrollableDistance=this.panelHeight-this.topMargin-this.bottomMargin-this.guideButton.height,this.scrollBarRatio=this.scrollHeight/this.scrollableDistance,r.instance.add(this.update,this)},PixiScrollBar.prototype.onDown=function(t){alert(2),this.dragging=!0,this.yTouchOffset=t.data.getLocalPosition(this.guideButton).y,this.onMove(t)},PixiScrollBar.prototype.onUp=function(){alert(2434),this.dragging=!1,this.yTouchOffset=0},PixiScrollBar.prototype.onMove=function(t){this.dragging===!0&&(this.targetPosition=t.data.getLocalPosition(this.container),this.targetPosition.y<this.topMargin+.5*this.guideButton.height&&(this.targetPosition.y=this.topMargin+.5*this.guideButton.height),this.targetPosition.y>this.scrollableDistance+this.topMargin+.5*this.guideButton.height&&(this.targetPosition.y=this.scrollableDistance+this.topMargin+.5*this.guideButton.height))},PixiScrollBar.prototype.update=function(){if(this.dragging){var t=-((this.guideButton.position.y-this.topMargin-.5*this.guideButton.height)*this.scrollBarRatio);this.trackpad.easeToPosition(0,t),this.guideButton.position.y=this.targetPosition.y}else this.guideButton.position.y=this.trackpad.valueY*-1/this.scrollBarRatio+this.topMargin+.5*this.guideButton.height},i.exports=PixiScrollBar}),define("fido/ui/PixiTrackpad",["require","exports","module","../physics/DoubleSpring","./PixiScrollbar","fido/system/Device","signals"],function(t,e,i){var r=t("../physics/DoubleSpring"),n=t("./PixiScrollbar"),s=t("fido/system/Device"),o=t("signals");PixiTrackpad=function(t){this.spring=new r,this.onScrollUpdate=new o;var e=t.scrollbarClass||n;this.target=t.target,this.value=0,this.easingValue=0,this.dragOffset=0,this.dragging=!1,this.speed=0,this.size=1024,this.maxSlots=1,this.capMovement=!0,this.prevPosition=0,this.valueY=0,this.easingValueY=0,this.dragOffsetY=0,this.speedY=0,this.prevPositionY=0,this.didMove=!1,this.didMoveY=!1,this.target.interactive=!0,this.scrollMin=-(1/0),this.scrollMax=0,this.scrollMinY=-(1/0),this.scrollMaxY=0,this.snapTo=!1,t.scrollbar===!0&&s.instance.mobile===!1&&s.instance.iPad===!1&&(this.scrollBar=new e({target:t.scrollTarget,trackpad:this})),this._onDownBinded=this.onDown.bind(this),this._onUpBinded=this.onUp.bind(this),this._onMoveBinded=this.onMove.bind(this),this.target.on("touchstart",this._onDownBinded).on("mousedown",this._onDownBinded)},PixiTrackpad.constructor=PixiTrackpad,PixiTrackpad.prototype.unlock=function(){this.locked=!1,this.speed=0,this.easingValue=this.value,this.easingValueY=this.valueY,this.speedY=0,this.speedX=0,window.onmousewheel=this.onMouseWheel.bind(this)},PixiTrackpad.prototype.lock=function(){this.locked=!0,window.onmousewheel=null},PixiTrackpad.prototype.update=function(){if(this.value+=.3*(this.easingValue-this.value),this.valueY+=.3*(this.easingValueY-this.valueY),!this.locked)if(this.dragging){var t=this.easingValue-this.prevPosition;t*=.7,this.speed+=.5*(t-this.speed),this.prevPosition=this.easingValue;var e=this.easingValueY-this.prevPositionY;e*=.7,this.speedY+=.5*(e-this.speedY),this.prevPositionY=this.easingValueY}else this.snapTo?(this.spring.update(),this.easingValue=this.spring.x,this.easingValueY=this.spring.y,this.capMovement&&(this.easingValue>this.scrollMax?this.easingValue+=.3*(this.scrollMax-this.easingValue):this.easingValue<this.scrollMin&&(this.easingValue+=.3*(this.scrollMin-this.easingValue)),this.easingValueY>this.scrollMaxY?this.easingValueY+=.3*(this.scrollMaxY-this.easingValueY):this.easingValueY<this.scrollMinY&&(this.easingValueY+=.3*(this.scrollMinY-this.easingValueY)))):(this.speed*=.95,this.easingValue+=this.speed,this.speedY*=.95,this.easingValueY+=this.speedY,this.capMovement&&(this.easingValue>this.scrollMax?this.easingValue+=.3*(this.scrollMax-this.easingValue):this.easingValue<this.scrollMin&&(this.easingValue+=.3*(this.scrollMin-this.easingValue)),this.easingValueY>this.scrollMaxY?this.easingValueY+=.3*(this.scrollMaxY-this.easingValueY):this.easingValueY<this.scrollMinY&&(this.easingValueY+=.3*(this.scrollMinY-this.easingValueY))))},PixiTrackpad.prototype.stop=function(){this.speed=0,this.speedY=0,this.value=this.prevPosition=this.easingValue,this.valueY=this.prevPositionY=this.easingValueY},PixiTrackpad.prototype.setPosition=function(t,e){this.value=this.easingValue=t,this.valueY=this.easingValueY=e},PixiTrackpad.prototype.easeToPosition=function(t,e){this.easingValue=t,this.easingValueY=e},PixiTrackpad.prototype.onDown=function(t){this.locked||(this.speed=0,this.speedY=0,this.stop(),this.didMove=!1,this.didMoveY=!1,this.checkX=t.data.global.x,this.checkY=t.data.global.y,this.dragging=!0,this.dragOffset=t.data.global.x-this.value,this.dragOffsetY=t.data.global.y-this.valueY,this.target.on("touchend",this._onUpBinded).on("touchendoutside",this._onUpBinded).on("mouseup",this._onUpBinded).on("mouseupoutside",this._onUpBinded).on("touchmove",this._onMoveBinded).on("mousemove",this._onMoveBinded))},PixiTrackpad.prototype.onMouseWheel=function(t){this.target.interactive&&(t.preventDefault?t.preventDefault():t.returnValue=!1,this.locked||(this.speed=.15*t.wheelDeltaX,this.speedY=.15*t.wheelDeltaY))},PixiTrackpad.prototype.onUp=function(){if(!this.locked){if(this.dragging=!1,this.snapTo){if(this.didMove){this.spring.dx=this.speed;var t;t=this.speed<0?Math.floor(this.easingValue/this.size):Math.ceil(this.easingValue/this.size),this.capMovement&&(t>0?t=0:t<-this.maxSlots&&(t=-this.maxSlots)),this.spring.tx=t*this.size,this.spring.dy=this.speedY,t=this.speedY<0?Math.floor(this.easingValueY/this.size):Math.ceil(this.easingValueY/this.size),this.capMovement&&(t>0?t=0:t<-this.maxSlots&&(t=-this.maxSlots)),this.spring.ty=t*this.size}this.spring.x=this.easingValue,this.spring.y=this.easingValueY}this.cap(),this.target.off("touchend",this._onUpBinded).off("touchendoutside",this._onUpBinded).off("mouseup",this._onUpBinded).off("mouseupoutside",this._onUpBinded).off("touchmove",this._onMoveBinded).off("mousemove",this._onMoveBinded)}},PixiTrackpad.prototype.cap=function(){this.capMovement&&(this.snapTo&&(this.spring.tx>this.scrollMax?this.spring.tx=this.scrollMax:this.spring.tx<this.scrollMin&&(this.spring.tx=this.scrollMin)),this.snapTo&&(this.spring.ty>this.scrollMaxY?this.spring.ty=this.scrollMaxY:this.spring.ty<this.scrollMinY&&(this.spring.ty=this.scrollMinY)))},PixiTrackpad.prototype.setSlot=function(t,e){this.spring.tx=t*-this.size,e&&(this.value=this.easingValue=this.spring.x=this.spring.tx),this.cap()},PixiTrackpad.prototype.setSlotY=function(t){this.spring.ty=t*-this.size,this.cap()},PixiTrackpad.prototype.nextSlot=function(){this.spring.tx-=this.size,this.spring.tx<-(this.maxSlots*this.size)&&(this.spring.tx=-(this.maxSlots*this.size)),this.cap()},PixiTrackpad.prototype.nextSlotY=function(){this.spring.ty-=this.size,this.spring.ty<-(this.maxSlots*this.size)&&(this.spring.ty=-(this.maxSlots*this.size)),this.cap()},PixiTrackpad.prototype.previousSlot=function(){this.spring.tx+=this.size,this.cap()},PixiTrackpad.prototype.previousSlotY=function(){this.spring.ty+=this.size,this.cap()},PixiTrackpad.prototype.setSize=function(t){this.size=t,this.scrollbar&&this.scrollBar.setSize(t)},PixiTrackpad.prototype.setSlots=function(t){this.maxSlots=t-1},PixiTrackpad.prototype.onMove=function(t){if(!this.locked){var e;e=Math.abs(this.checkX-t.data.global.x),e>10&&(this.didMove=!0),e=Math.abs(this.checkY-t.data.global.y),e>10&&(this.didMove=!0),this.easingValue=t.data.global.x-this.dragOffset,this.easingValueY=t.data.global.y-this.dragOffsetY,this.capMovement&&(this.easingValue>this.scrollMax?this.easingValue=this.scrollMax+.3*(this.easingValue-this.scrollMax):this.easingValue<this.scrollMin&&(this.easingValue=this.scrollMin+.3*(this.easingValue-this.scrollMin)),this.easingValueY>this.scrollMaxY?this.easingValueY=this.scrollMaxY+.3*(this.easingValueY-this.scrollMaxY):this.easingValueY<this.scrollMinY&&(this.easingValueY=this.scrollMinY+.3*(this.easingValueY-this.scrollMinY)))}},i.exports=PixiTrackpad}),define("fido/utils/Utils",["require","exports","module","PIXI"],function(t,e,i){var r=t("PIXI"),n={};n.trimTexture=function(t,e,i,r,n){e=e||0,i=i||0,r=r||0,n=n||0;var s=t._frame;s.x+=e,s.y+=r,s.width-=e+i,s.height-=r+n,t.frame=s,t._updateUvs()},n.getTexturesFromFrames=function(t){for(var e=[],i=0;i<t.length;i++)e.push(new r.Texture.fromFrame(t[i]));return e},n.getTexturesFromImages=function(t){for(var e=[],i=0;i<t.length;i++)e.push(new r.Texture.fromImage(t[i]));return e},n.getTexturesFromFramesWithPrefix=function(t,e,i,n){var s=[];void 0==i&&(i=0);for(var o=0;o<e;o++){var a=o+i,h=t.replace("%%",a<10?"0"+a:a);if(n)var h=t.replace("%%",a);s.push(new r.Texture.fromFrame(h))}return s},n.formatTime=function(t){if(999999===t)return"00:00:00";var t=t/.06,e=t/60/1e3|0;t-=60*e*1e3;var i=t/1e3|0;t-=1e3*i;var r=t/10|0;return t-=10*r,(e<10?"0":"")+e+":"+(i<10?"0":"")+i+":"+(r<10?"0":"")+r},n.formatTimeSeconds=function(t){if(999999===t)return"00:00";var t=t/.06,e=t/60/1e3|0;t-=60*e*1e3;var i=t/1e3|0;return t-=1e3*i,(e<10?"0":"")+e+":"+(i<10?"0":"")+i},n.pad=function(t,e){var i="0000"+t;return i.substr(i.length-e)},n.shuffle=function(t){for(var e=t.length-1;e>0;e--){var i=Math.floor(Math.random()*(e+1)),r=t[e];t[e]=t[i],t[i]=r}return t},n.formatScore=function(t){for(var e=t.toString().split(""),i="",r=e.length,n=r%3-1,s=0;s<r;s++)i+=e[s],(s-n)%3==0&&s!=r-1&&(i+=",");return i},n.formatNumber=function(t){if(ones=t%10,tens=Math.floor(t/10)%10,1==tens)return t+"th";switch(ones){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd";default:return t+"th"}},n.formatName=function(t){for(var e=t.split(" "),i=e.length-1;i>=0;i--)0!==e[i].length&&(wordArray=e[i].split(""),wordArray[0]=wordArray[0].toUpperCase(),e[i]=wordArray.join(""));return word=e.join(" "),word},window.console||(window.console={log:function(t){}}),n.get_query=function(t){for(var e=location.href,i=e.substring(e.indexOf("?")+1).split("&"),r=0,n={};r<i.length;r++)i[r]=i[r].split("="),n[i[r][0]]=decodeURIComponent(i[r][1]);return!!n.hasOwnProperty(t)&&n[t]},n.toCamelCase=function(t){var e=/\s([a-z]|[A-Z])/,i=t.trim();return i=i.toLowerCase(),i=i.replace(e,function(t,e){return e.toUpperCase()})},n.defaults=function(t,e){t=t||{};for(var i in e)i in t||(t[i]=e[i]);return t},n.fitText=n.resizeText=function(t,e,i,r){r=r||"w",t.scale.set(1),i&&(t.text=i);var n=0;n="w"===r?e/t.width:e/t.height,n>1&&(n=1),t.scale.set(n)},n.resizeMultipleTexts=function(t,e,i){for(var r=0;r<t.length;r++){var n=t[r];n.scale.set(1)}var s=0;if(i)for(var r=0;r<t.length;r++){var n=t[r];n.text=i[r]}for(var r=0;r<t.length;r++){var n=t[r];n.width>s&&(s=n.width)}var o=e/s;o>1&&(o=1);for(var r=0;r<t.length;r++)t[r].scale.set(o)},i.exports=n}),define("com/arcade/app/elements/hangar/HangarItemSwitcher",["require","exports","module","PIXI","starwars/buttons/IconButton","starwars/buttons/HighlightButton","./items/HangarItem","./items/CeilingItem","./items/FloorItem","./items/SpaceshipItem","./items/TableItem","./items/WallItem","fido/ui/PixiTrackpad","fido/system/Ticker","signals","fido/sound/SoundBridge","fido/utils/Utils"],function(t,e,i){var r=t("PIXI"),n=t("starwars/buttons/IconButton"),s=t("starwars/buttons/HighlightButton"),o={};o.HangarItem=t("./items/HangarItem"),o.CeilingItem=t("./items/CeilingItem"),o.FloorItem=t("./items/FloorItem"),o.SpaceshipItem=t("./items/SpaceshipItem"),o.TableItem=t("./items/TableItem"),o.WallItem=t("./items/WallItem");var a=t("fido/ui/PixiTrackpad"),h=t("fido/system/Ticker"),l=t("signals"),c=t("fido/sound/SoundBridge"),u=t("fido/utils/Utils"),d=function(t,e,i){r.Container.call(this),this.name="",this.currentItemID=this.lastItemID=0,this.opened=!1,this.uiHidden=!1,this.items=[],this.shopSystem=t,this.group=t.getGroupAt(e),this.onOpened=new l,this.onClosed=new l,this.onItemChange=new l,this._arrowsOffsetX=i.arrowsOffsetX||0,this._arrowsOffsetY=i.arrowsOffsetY||0,this._buttonsOffsetY=i.buttonsOffsetY||80,this._textOffsetY=i.textOffsetY||0,this._highlightFrame=i.highlightFrame,this.itemsContainer=new r.Container;var h,c;for(c=0;c<this.group.getNumItems();c++){var u=this.group.getItemAt(c);h=new o[i.itemClassName||"HangarItem"](u.imageUrl,u.id),this.itemsContainer.addChild(h),h.hide(),u.used&&(this.currentItemID=this.lastItemID=c),this.items.push(h)}if(this.addChild(this.itemsContainer),this.itemWidth=this.items[0].width,this.itemHeight=this.items[0].height,this.hitZone=new r.Graphics,this.hitZone.beginFill(16711680),this.hitZone.drawRect(0,0,1,1),this.hitZone.pivot.set(.5),this.hitZone.alpha=0,this.hitZone.width=this.itemWidth,this.hitZone.height=this.itemHeight,this.addChild(this.hitZone),this.leftArrow=new n("icon_prev.png"),this.leftArrow.onPress.add(this.previous,this),this.leftArrow.pivot.y=this._arrowsOffsetY,this.addChild(this.leftArrow),this.rightArrow=new n("icon_next.png"),this.rightArrow.onPress.add(this.next,this),this.rightArrow.pivot.y=this._arrowsOffsetY,this.addChild(this.rightArrow),this.hideArrows(),this.editButton=new s("icon_customise.png",null,{hasGlitchFilter:!1}),i.editButtonOffset&&(this.editButton.buttonContainer.x=i.editButtonOffset.x,this.editButton.buttonContainer.y=i.editButtonOffset.y),i.editButtonRotation&&this.editButton.setButtonRotation(i.editButtonRotation.x,i.editButtonRotation.y,i.editButtonRotation.z),this.editButton.hitArea=new r.Rectangle(.5*-this.itemWidth,.5*-this.itemHeight,this.itemWidth,this.itemHeight),
this.editButton.onPress.add(this.open,this),this.addChild(this.editButton),this.textContainer=new r.Container,i.hasTextBackground){var d=new r.Sprite.fromFrame("tek_panel.png");d.anchor.set(.5),this.textContainer.addChild(d)}this.coinIcon=new r.Sprite.fromFrame("coin_ui.png"),this.coinIcon.anchor.set(.5),this.coinIcon.scale.set(.7),this.coinIcon.y=-20,this.coinIcon.x=-25,this.textContainer.addChild(this.coinIcon),this.priceText=new r.Text("",{font:"30px "+window.MAIN_FONT,fill:"#FFCC01",dropShadow:!0,dropShadowAngle:Math.PI/2,dropShadowDistance:3,dropShadowColor:"rgba(0, 0, 0, .3)"}),this.priceText.anchor.set(.5),this.priceText.x=25,this.priceText.y=-20,this.textContainer.addChild(this.priceText),this.ownedText=new r.Text(translations.STR_OWNED,{font:"30px "+window.MAIN_FONT,fill:"#FFCC01",dropShadow:!0,dropShadowAngle:Math.PI/2,dropShadowDistance:3,dropShadowColor:"rgba(0, 0, 0, .3)"}),this.ownedText.anchor.set(.5),this.ownedText.y=-20,this.textContainer.addChild(this.ownedText),this.description=new r.Text("",{font:"24px "+window.MAIN_FONT,fill:"#c6f8ff",dropShadow:!0,dropShadowAngle:Math.PI/2.5,dropShadowDistance:2,dropShadowColor:"rgba(0, 0, 0, .3)"}),this.description.anchor.set(.5),this.description.y=20,this.textContainer.addChild(this.description),this.textContainer.alpha=0,this.textContainer.y=-this._textOffsetY,this.addChild(this.textContainer),this.useButton=new n("icon_tick.png"),this.useButton.x=50,this.useButton.backgroundColor="green",this.useButton.hide(),this.addChild(this.useButton),this.closeButton=new n("icon_close.png"),this.closeButton.hide(),this.closeButton.backgroundColor="red",this.closeButton.x=-50,this.closeButton.onPress.add(this.close,this),this.addChild(this.closeButton),this.useButton.onPress.add(this.buyCurrentItem,this),this.trackpad=new a({target:this.hitZone}),this.hitZone.interactive=!1,i.darkenOnOpen=!1,i.darkenOnOpen&&(this.darkBackground=new r.Sprite.fromImage("ui_bg_darken.png"),this.darkBackground.anchor.set(.5),this.darkBackground.alpha=0,this.darkBackground.tint=0,this.addChildAt(this.darkBackground,0)),this.switchTo(this.currentItemID,void 0,0)};d.prototype=Object.create(r.Container.prototype),d.prototype.constructor=d,d.prototype.setItemsSize=function(t,e){for(var i=0;i<this.items.length;i++)this.items[i].setSize(t,e);this.editButton.hitArea.x=.5*-t,this.editButton.hitArea.y=.5*-e,this.editButton.hitArea.width=t,this.editButton.hitArea.height=e,this.itemWidth=t,this.itemHeight=e,this.hitZone.width=t,this.hitZone.height=e},d.prototype.next=function(){this.switchTo((this.currentItemID+1)%this.items.length,"right")},d.prototype.previous=function(){this.switchTo(this.currentItemID<=0?this.items.length-1:this.currentItemID-1,"left")},d.prototype.switchTo=function(t,e,i){var r=this.items[this.currentItemID];r.hide("left"===e?"left":"right",i),this.currentItemID=t;var n=this.items[this.currentItemID];this.editButton.setHighlight(this._highlightFrame.replace("${name}",this.group.getItemAt(this.currentItemID).imageUrl.split(".")[0])),n.highlight=this.editButton.highlight,n.show("left"===e?"right":"left",i),this.onItemChange.dispatch(this,n.animationDuration),this._updateItem()},d.prototype.onPointerDown=function(){h.instance.add(this.update,this)},d.prototype.onPointerUp=function(){h.instance.remove(this.update,this)},d.prototype.update=function(){this.trackpad.update(),Math.abs(this.trackpad.speed)>10&&(this.trackpad.speed<0?this.next():this.previous(),this.trackpad.stop(),h.instance.remove(this.update,this))},d.prototype.open=function(){if(!this.opened){this.opened=!0,this.editButton.hide();var t=.4;this._showArrows(t),TweenLite.to(this.useButton,t,{onStart:function(){this.useButton.show(t)},onStartScope:this,delay:.1,y:this._buttonsOffsetY}),TweenLite.to(this.closeButton,t,{onStart:function(){this.closeButton.show(t)},onStartScope:this,delay:.05,y:this._buttonsOffsetY}),this._updateItem(),TweenLite.to(this.textContainer,t,{alpha:1}),this.darkBackground&&TweenLite.to(this.darkBackground,t,{alpha:1}),this.addSwipeEvents(),this.onOpened.dispatch(this)}},d.prototype.close=function(){if(this.opened){this.opened=!1,this.removeSwipeEvents(),this.editButton.show();var t=.2;this.hideArrows(t),TweenLite.to(this.useButton,t,{onStart:function(){this.useButton.hide(t)},onStartScope:this,y:.5*this._buttonsOffsetY}),TweenLite.to(this.closeButton,t,{onStart:function(){this.closeButton.hide(t)},onStartScope:this,y:.5*this._buttonsOffsetY}),TweenLite.to(this.textContainer,t,{alpha:0}),this.darkBackground&&TweenLite.to(this.darkBackground,.2*t,{alpha:0}),this.currentItemID!==this.lastItemID&&this.switchTo(this.lastItemID),this.onClosed.dispatch(this)}},d.prototype.showUI=function(){this.uiHidden=!1,this.close(),this.editButton.show()},d.prototype.hideUI=function(){this.uiHidden=!0,this.close(),this.editButton.hide()},d.prototype.hideArrows=function(t){TweenLite.to(this.rightArrow,t,{onStart:function(){this.rightArrow.hide(t)},onStartScope:this,x:.5*(.5*this.itemWidth+this._arrowsOffsetX)}),TweenLite.to(this.leftArrow,t,{onStart:function(){this.leftArrow.hide(t)},onStartScope:this,x:.5*-(.5*this.itemWidth+this._arrowsOffsetX)})},d.prototype._showArrows=function(t){TweenLite.to(this.rightArrow,t,{onStart:function(){this.rightArrow.show(t)},onStartScope:this,x:.5*this.itemWidth+this._arrowsOffsetX}),TweenLite.to(this.leftArrow,t,{onStart:function(){this.leftArrow.show(t)},onStartScope:this,x:-(.5*this.itemWidth+this._arrowsOffsetX)})},d.prototype._updateItem=function(){if(this.opened){var t=this.group.getItemAt(this.currentItemID);this.description.text=t.description.toUpperCase(),u.fitText(this.description,430),TweenLite.fromTo(this.description,.4,{alpha:0,y:5},{alpha:1,y:20});var e=this.shopSystem.getMoney(),i=this.group.getItemAt(this.currentItemID);e<i.price?this.priceText.style.fill="#002331":this.priceText.style.fill="#FFCC01",this.priceText.text=t.price,TweenLite.fromTo(this.priceText,.2,{alpha:0},{alpha:1});var r=t.purchased||0===t.price;TweenLite.to(this.priceText,.4,{alpha:r?0:1}),TweenLite.to(this.coinIcon,.4,{alpha:r?0:1}),TweenLite.to(this.ownedText,.4,{alpha:r?1:0}),this.shopSystem.getMoney()<t.price?(this.useButton.disable(),TweenLite.to(this.useButton,.4,{alpha:.5}),TweenLite.fromTo(this.coinIcon.scale,.6,{x:1,y:1},{x:.7,y:.7,ease:Elastic.easeOut}),TweenLite.fromTo(this.priceText.scale,.6,{x:1.3,y:1.3},{x:1,y:1,ease:Elastic.easeOut})):(this.useButton.enable(),TweenLite.to(this.useButton,.4,{alpha:1}))}},d.prototype.buyCurrentItem=function(){this.group.getItemAt(this.lastItemID).used=!1;var t=this.group.getItemAt(this.currentItemID);if(t.used=!0,!t.purchased){if(this.shopSystem.getMoney()<t.price)return;this.shopSystem.buyItem(t)}c.sfx.play("selectbeep"),this.lastItemID=this.currentItemID,this.close(),this.shopSystem.saveToStorage()},d.prototype.addSwipeEvents=function(){this._onPointerDownBinded=this.onPointerDown.bind(this),this._onPointerUpBinded=this.onPointerUp.bind(this),this.hitZone.interactive=!0,this.hitZone.on("mousedown",this._onPointerDownBinded).on("touchstart",this._onPointerDownBinded).on("mouseup",this._onPointerUpBinded).on("touchend",this._onPointerUpBinded).on("mouseupoutside",this._onPointerUpBinded).on("touchendoutside",this._onPointerUpBinded)},d.prototype.removeSwipeEvents=function(){h.instance.remove(this.update,this),this.hitZone.interactive=!1,this.hitZone.off("mousedown",this._onPointerDownBinded).off("touchstart",this._onPointerDownBinded).off("mouseup",this._onPointerUpBinded).off("touchend",this._onPointerUpBinded).off("mouseupoutside",this._onPointerUpBinded).off("touchendoutside",this._onPointerUpBinded)},i.exports=d}),define("com/arcade/app/elements/hangar/HangarUIMovieClip",["require","exports","module","PIXI","fido/system/Ticker"],function(t,e,i){var r=t("PIXI"),n=t("fido/system/Ticker"),s=function(t,e){this.textures=[];for(var i=0;i<e;i++)this.textures.push(new r.Texture.fromFrame(t+(i+1)+".png"));if(this.frameTime=2,this._currentFrameTime=0,r.Sprite.call(this,this.textures[0]),r.isWebGL){new r.filters.BloomFilter}this.play()};s.prototype=Object.create(r.Sprite.prototype),s.prototype.constructor=s,s.prototype.play=function(){n.instance.add(this.update,this)},s.prototype.stop=function(){n.instance.remove(this.update,this)},s.prototype.update=function(t){this._currentFrameTime+=t,this._currentFrameTime<this.frameTime||(this._currentFrameTime=0,Math.random()<2*Math.random()&&(this.texture=this.textures[Math.floor(Math.random()*this.textures.length)]))},i.exports=s}),define("com/arcade/app/elements/hangar/HangarDisplayTable",["require","exports","module","PIXI","./HangarUIMovieClip"],function(t,e,i){var r=t("PIXI"),n=t("./HangarUIMovieClip"),s=function(){r.Container.call(this),this.sprite=new r.Sprite.fromFrame("display-table.png"),this.sprite.anchor.set(.5),this.addChild(this.sprite),this.ui=new n("display_table_ui",4),this.ui.x=-100,this.ui.y=10,this.addChild(this.ui)};s.prototype=Object.create(r.Container.prototype),s.prototype.constructor=s,i.exports=s}),define("fido/goals/Goals",["require","exports","module","signals","fido/loader/Cache","fido/system/LocalStorage"],function(t,e,i){var r=t("signals"),n=t("fido/loader/Cache"),s=t("fido/system/LocalStorage"),o=function(t){this.config=null,this.achievementUnlocked=new r,this.allAchievementsCollected=new r,this.allLevelsComplete=new r,this.onSave=new r,this.debug=!1,this.noSave=!1,this.totalAchievements=0,this.achievedInGroup=0,this.achievementList={},this.groups=[],this.groupHash={},this.totalGroups=0,this.currentGroup="",this.currentGroupIndex=0,this.active=!0,this.storage=new s(t),this.save=this.getSave()};o.prototype.validate=function(t){var e=t.goals,i=t.groups,r={};for(var n in i)for(var s=i[n],o=0;o<s.achievements.length;o++){var a=s.achievements[o];e[a]&&(r[a]||(r[a]=!0))}},o.prototype.saveLoaded=function(){this.achievementList&&(this.achievementList=this.merge(this.achievementList,this.save.medals))},o.prototype.merge=function(t,e){for(var i,r={},n=0,s=arguments.length;n<s;n++)for(i in arguments[n])arguments[n].hasOwnProperty(i)&&(r[i]=arguments[n][i]);return r},o.prototype.load=function(t,e){if(this.config=t||n.getJson("goals"),e)for(var i in this.config.goals){var r=this.config.goals[i];r.desc=e[r.desc],r.id=i}this.config||(t?this.config=t:(this.config={goals:{},groups:{level1:{desc:"Dummy empty object, must have the 'achievement' property and it must be an array",achievements:[]}}},this.noSave=!0)),this.validate(this.config);var s=Object.keys(this.config.groups);this.totalGroups=s.length,""===this.save.currentGroup||this.noSave?this.loadGroup(s[0]):(this.currentGroup=this.save.currentGroup,this.loadGroup(this.currentGroup))},o.prototype.loadNextGroup=function(){var t=this.getGroupIndex(this.currentGroup);if(t!==-1){if(t++,t>=this.totalGroups)return this.allLevelsComplete.dispatch(),this.active=!1,!1;var e=Object.keys(this.config.groups),i=e[t];return this.loadGroup(i),this.saveStatus(),this.currentGroupIndex=t-1,!0}this.active=!1},o.prototype.getGroupIndex=function(t){var e=Object.keys(this.config.groups);return e.indexOf(t)},o.prototype.getGroupByName=function(t){return this.groupHash[t]},o.prototype.loadGroup=function(t){this.currentGroup=t;for(var e=this.config.groups[t],i=0;i<e.achievements.length;i++){var r=e.achievements[i],n=this.config.goals[r];n.achieved=!1,this.debug,this.achievementList.hasOwnProperty(n.property)===!1&&(this.achievementList[n.property]=[]),n.completion=n.value/n.target*100,n.group=t,this.achievementList[n.property].push(n),this.totalAchievements++}this.reset(),this.achievementList=this.merge(this.achievementList,this.save.medals);var e=[];for(var s in this.achievementList)for(var o=this.achievementList[s],i=0;i<o.length;i++){var n=o[i];n.group===t&&e.push(n)}this.groups.push(e);var a=this.config.groups[t];this.groupHash[t]={desc:a.desc,achievements:e},this.debug},o.prototype.getLastAchievements=function(){return this.groups[this.groups.length-1]},o.prototype.increment=function(t,e){this.update(t,e,!0)},o.prototype.update=function(t,e,i){if(this.active){var r=!1;if(this.achievementList.hasOwnProperty(t))for(var n=this.achievementList[t],s=0;s<n.length;s++){var o=n[s];if(o.achieved===!1)switch(r=!0,i?o.value+=e:o.value=Math.max(o.value,e),o.type){case"=":o.completion=Math.floor(o.value/o.target*100),o.value>=o.target&&(o.completion=100,o.achieved=!0,this.receiveAchievement(o))}}r===!0&&this.isListComplete()&&(this.debug,this.allAchievementsCollected.dispatch())}},o.prototype.isListComplete=function(){for(var t in this.achievementList)if(this.achievementList.hasOwnProperty(t))for(var e=this.achievementList[t],i=0;i<e.length;i++){var r=e[i];if(r.achieved===!1)return!1}return!0},o.prototype.reset=function(){for(var t in this.achievementList)if(this.achievementList.hasOwnProperty(t))for(var e=this.achievementList[t],i=0;i<e.length;i++){var r=e[i];r.achieved!==!1||r.cumulative&&r.cumulative!==!1||(r.completion=0,r.value=0)}},o.prototype.receiveAchievement=function(t){this.debug,this.achievementUnlocked.dispatch(t),this.saveStatus()},o.prototype.goalsRemaining=function(){return this.achievementList.length-this.goalsCompleted()},o.prototype.getAll=function(){return JSON.parse(JSON.stringify(this.achievementList))},o.prototype.getAllGroups=function(){var t=this.config,e=[];for(var i in this.achievementList){var r=this.achievementList[i];e.push(r)}e=e.reduce(function(t,e){return t.concat(e)}),descs=e.reduce(function(t,e){return t[e.desc]=e,t},{});var n=[];for(var i in t.groups)for(var s=t.groups[i],o=0;o<s.achievements.length;o++){var a=s.achievements[o];if(t.goals.hasOwnProperty(a)){var h=t.goals[a];descs.hasOwnProperty(h.desc)&&(h.completion=descs[h.desc].completion||0,h.achieved=descs[h.desc].achieved||!1),n.push(h)}}return n},o.prototype.goalsCompleted=function(){var t=0;for(var e in this.achievementList)for(var i=this.achievementList[e],r=0;r<i.length;r++){var n=i[r];n.achieved===!0&&t++}return t},o.prototype.getSave=function(){var t=this.storage.getObject("save");return t?t:(t=new a,this.storage.storeObject("save",t),t)},o.prototype.saveStatus=function(){this.noSave||(this.debug,this.save.medals=this.achievementList,this.save.currentGroup=this.currentGroup,this.storage.storeObject("save",this.save),this.onSave.dispatch())},o.prototype.saveAndReset=function(){this.reset(),this.saveStatus()};var a=function(){this.medals={},this.currentGroup=""};i.exports=o}),define("fido/goals/Trophies",["require","exports","module","signals","fido/loader/Cache","fido/system/LocalStorage","fido/utils/Utils","fido/goals/Goals"],function(t,e,i){var r=t("signals"),n=(t("fido/loader/Cache"),t("fido/system/LocalStorage"),t("fido/utils/Utils")),s=t("fido/goals/Goals"),o=function(t){var e={medals:{durasteel:10,bronze:20,silver:30,gold:40},images:{durasteel:"trophy_rebels_steel.png",bronze:"trophy_rebels_bronze.png",silver:"trophy_rebels_silver.png",gold:"trophy_rebels_gold.png"},names:{durasteel:translations.STR_TROPHY_DURASTEEL,bronze:translations.STR_TROPHY_BRONZE,silver:translations.STR_TROPHY_SILVER,gold:translations.STR_TROPHY_GOLD},goals_storage:null,goal_system:null,game_name:null};this.options=n.defaults(t,e),this.trophies=[],this.options.goal_system?this.goals=this.options.goal_system:(this.goals=new s(this.options.goals_storage),this.goals.load()),this.onTrophyEarned=new r};o.prototype.init=function(){var t=this.goals.goalsCompleted();for(var e in this.options.medals){var i=this.options.medals[e],r={name:this.options.names[e],earned:i<=t,target:i,image:this.options.images[e]};this.trophies.push(r)}this.goals.achievementUnlocked.add(this.onAchievement,this)},o.prototype.onAchievement=function(t){for(var e=this.goals.goalsCompleted(),i=0;i<this.trophies.length;i++){var r=this.trophies[i],n=r.target<=e;n!==r.earned&&(r.earned=!0,this.onTrophyEarned.dispatch(r))}},o.prototype.getTrophies=function(){return this.trophies.slice()},o.prototype.getEarned=function(){for(var t=[],e=0;e<this.trophies.length;e++)this.trophies[e].earned&&t.push(this.trophies[e]);return t},o.prototype.getTotal=function(){return this.trophies.length},o.prototype.getName=function(){return this.options.game_name?this.options.game_name:""},o.prototype.getGoalsCompleted=function(){return this.goals.goalsCompleted()},o.prototype.getTotalGoals=function(){return this.goals.getLastAchievements().length},o.prototype.trophiesEarned=function(){for(var t=0,e=0;e<this.trophies.length;e++)this.trophies[e].earned&&t++;return t},i.exports=o}),define("com/arcade/app/system/TrophyManager",["require","exports","module","signals","fido/loader/Cache","fido/system/LocalStorage","fido/utils/Utils","fido/goals/Goals","fido/goals/Trophies"],function(t,e,i){var r=(t("signals"),t("fido/loader/Cache"),t("fido/system/LocalStorage"),t("fido/utils/Utils"),t("fido/goals/Goals"),t("fido/goals/Trophies")),n=function(t){var e=new r({goals_storage:t.REBELS_STORAGE_ID,game_name:t.REBELS_GAME_NAME});e.init();new r({goals_storage:t.DAGOBAH_STORAGE_ID,game_name:t.DAGOBAH_GAME_NAME});this.systems=[],this.systems.push(e)};n.ids={Rebels:0,Dagobah:1,GameThree:2},n.prototype.init=function(){var t=this.goals.goalsCompleted();for(var e in this.options.medals){var i=this.options.medals[e],r={name:e,earned:i<=t,target:i};this.trophies.push(r)}this.goals.achievementUnlocked.add(this.onAchievement,this)},n.prototype.getTotalEarned=function(){for(var t=0,e=0;e<this.systems.length;e++)t+=this.systems[e].trophiesEarned();return t},n.prototype.getTotal=function(){for(var t=0,e=0;e<this.systems.length;e++)t+=this.systems[e].getTotal();return t},n.prototype.getTrophiesFor=function(t){return this.systems[t]?this.systems[t].getTrophies():[]},n.prototype.getNameOf=function(t){return this.systems[t]?this.systems[t].getName():null},n.prototype.getTotalGoalsOf=function(t){return this.systems[t]?this.systems[t].getTotalGoals():[]},n.prototype.getAchievedOf=function(t){return this.systems[t]?this.systems[t].getGoalsCompleted():[]},n.prototype.getEarnedFor=function(t){return this.systems[t]?this.systems[t].getEarned():[]},i.exports=n}),define("com/arcade/app/elements/hangar/TrophyShelf",["require","exports","module","PIXI","com/arcade/app/system/TrophyManager"],function(t,e,i){var r=t("PIXI"),n=t("com/arcade/app/system/TrophyManager"),s=function(){r.Container.call(this),this.top=new r.Sprite.fromImage(ASSET_URL+"img/game/hangar/trophies/top_shelf_4trophy.png"),this.bottom=new r.Sprite.fromImage(ASSET_URL+"img/game/hangar/trophies/bottom_shelf_4trophy.png"),this.bottom.x=-3,this.bottom.y=70,this.addChild(this.top),this.addChild(this.bottom)};s.prototype=Object.create(r.Container.prototype),s.prototype.setData=function(){var t=n.instance.getEarnedFor(n.ids.Rebels).length;0===t?this.top.visible=!1:(this.top.visible=!0,this.top.texture=r.Texture.fromFrame("top_shelf_"+t+"trophy.png"));var t=n.instance.getEarnedFor(n.ids.Dagobah).length;0===t?this.bottom.visible=!1:(this.bottom.visible=!0,this.bottom.texture=r.Texture.fromFrame("bottom_shelf_"+t+"trophy.png"))},i.exports=s}),define("com/arcade/app/elements/hangar/HangarItemsSwitcherOptions",["require","exports","module"],function(t,e,i){i.exports={ceilings:{itemClassName:"CeilingItem",x:-7,y:-220,highlightFrame:"highlight_ceiling.png",hasTextBackground:!0,arrowsOffsetX:-200,arrowsOffsetY:-80,textOffsetY:-180,editButtonOffset:{x:0,y:0},editButtonRotation:{x:.45*Math.PI,y:0,z:0},container:{width:780,height:100,y:-222}},floors:{itemClassName:"FloorItem",x:-86,y:232,highlightFrame:"highlight_floor.png",hasTextBackground:!0,arrowsOffsetX:-100,textOffsetY:200,editButtonOffset:{x:-50,y:-100},editButtonRotation:{x:.42*-Math.PI,y:0,z:0},container:{width:970,height:280,x:-80,y:233}},walls:{itemClassName:"WallItem",hasTextBackground:!0,textOffsetY:160,x:-8,y:-42,highlightFrame:"highlight_wall.png",editButtonOffset:{x:-200,y:-60},container:{width:550,height:220}},items:{itemClassName:"TableItem",highlightFrame:"${name}_highlight.png",darkenOnOpen:!0,hasTextBackground:!0,x:47,y:144,buttonsOffsetY:120,textOffsetY:130,arrowsOffsetX:40,editButtonOffset:{x:70,y:70}},spaceships:{itemClassName:"SpaceshipItem",highlightFrame:"${name}_highlight.png",darkenOnOpen:!0,hasTextBackground:!0,x:240,y:-85,buttonsOffsetY:80,textOffsetY:-180,arrowsOffsetX:50,editButtonOffset:{x:0,y:40}}}}),define("com/arcade/app/screens/HangarScreen",["require","exports","module","PIXI","starwars/buttons/GoldenButton","starwars/buttons/HighlightButton","com/arcade/app/buttons/UserNameButton","fido/physics/particles/Dust","fido/system/Ticker","com/arcade/app/elements/hangar/Hologram","com/arcade/app/elements/hangar/HangarItemSwitcher","com/arcade/app/elements/hangar/HangarUIMovieClip","com/arcade/app/elements/hangar/HangarDisplayTable","starwars/filters/GlowFilter","fido/app/Screen","com/arcade/app/elements/hangar/TrophyShelf","fido/sound/SoundBridge","fido/utils/FrameWait","signals","com/arcade/app/elements/hangar/HangarItemsSwitcherOptions","tracker","tracker","tracker"],function(t,e,r){var n=t("PIXI"),s=t("starwars/buttons/GoldenButton"),o=t("starwars/buttons/HighlightButton"),a=t("com/arcade/app/buttons/UserNameButton"),h=t("fido/physics/particles/Dust"),l=t("fido/system/Ticker"),c=t("com/arcade/app/elements/hangar/Hologram"),u=t("com/arcade/app/elements/hangar/HangarItemSwitcher"),d=t("com/arcade/app/elements/hangar/HangarUIMovieClip"),p=t("com/arcade/app/elements/hangar/HangarDisplayTable"),f=(t("starwars/filters/GlowFilter"),t("fido/app/Screen")),m=t("com/arcade/app/elements/hangar/TrophyShelf"),g=(t("fido/sound/SoundBridge"),t("fido/utils/FrameWait"),t("signals")),v=t("com/arcade/app/elements/hangar/HangarItemsSwitcherOptions"),_=function(t){f.call(this,t),this.onShowComplete=new g,this.container=new n.Container,this.addChild(this.container),this.background=new n.Sprite.fromImage(ASSET_URL+"img/game/hangar/hangar_room_shell.png"),this.background.anchor.set(.5),this.container.addChild(this.background),this.displayTable=new p,this.displayTable.x=47,this.displayTable.y=246,this.container.addChild(this.displayTable),this.trophies=new m,this.trophies.x=304,this.trophies.y=-58,this.container.addChild(this.trophies),this.rewardsButton=new o("icon_medal.png","holo_highlight_trophies.png"),this.rewardsButton.x=346,this.rewardsButton.y=22,this.rewardsButton.setButtonRotation(.1,1.5,0),this.container.addChild(this.rewardsButton),this.doorButton=new o("icon_exit.png","holo_highlight_exit.png"),this.doorButton.position.x=-436,this.doorButton.position.y=87,this.doorButton.setButtonRotation(.1,-1.5,0),this.container.addChild(this.doorButton),this.userNameButton=new a(this.app,{font:"20px "+window.MAIN_FONT,fill:"#FA5F07",letterSpacing:20}),this.userNameButton.x=-425,this.userNameButton.y=-68,this.userNameButton.flip.rotation.x=.04*Math.PI,this.userNameButton.flip.rotation.y=.5*-Math.PI,this.userNameButton.rotation=-.05,this.container.addChild(this.userNameButton),this.trophyTechUI=new d("trophy_tech_ui",6),this.trophyTechUI.x=332,this.trophyTechUI.y=186,this.trophyTechUI.anchor.set(.5),this.container.addChild(this.trophyTechUI),this.dust=new h(null,{color:12232312}),this.container.addChild(this.dust),this.buildItemSwitchers(),this.hologram=new c(this.app),this.hologram.x=-280,this.hologram.y=300,this.container.addChild(this.hologram),this.addLight=new n.Sprite.fromImage(ASSET_URL+"img/game/hangar/hangar_add_light.png"),this.addLight.anchor.set(.5),this.addLight.blendMode=n.BLEND_MODES.ADD,this.container.addChild(this.addLight),this.rimLight=new n.Sprite.fromImage(ASSET_URL+"img/game/hangar/hangar_rim_light.png"),this.rimLight.anchor.set(.5),this.rimLight.blendMode=n.BLEND_MODES.ADD,this.container.addChild(this.rimLight),this.goDown();for(var e=0;e<this.itemSwitchers.length;e++){var i=this.itemSwitchers[e],r=new n.Container;r.x=i.x,r.y=i.y,r.addChild(i.leftArrow),r.addChild(i.rightArrow),r.addChild(i.textContainer),r.addChild(i.useButton),r.addChild(i.closeButton),this.container.addChild(r)}this.editButton=new s("icon_customise.png"),this.editButton.setSize("small"),this.editButton.x=-410,this.editButton.y=280,this.editButton.onPress.add(this.toggleEditMode,this),this.container.addChild(this.editButton),this.leaveEditMode()};_.prototype=Object.create(f.prototype),_.prototype.buildItemSwitchers=function(){this.itemSwitchers=[];for(var t=this.app.shopSystem.getNumGroups(),e=0;e<t;e++){var i=this.app.shopSystem.getGroupAt(e).name,r=v[i],n=new u(this.app.shopSystem,e,r);if(n.name=i,n.x=r.x,n.y=r.y,r.container&&(n.itemsContainer.position.set(r.container.x||r.x,r.container.y||r.y),n.setItemsSize(r.container.width,r.container.height),this.container.addChildAt(n.itemsContainer,0)),"walls"===i)for(var s=0;s<n.items.length;s++)this.container.addChild(n.items[s].addOverlay);n.onOpened.add(this.onItemSwitcherOpened,this),n.onClosed.add(this.onItemSwitcherClosed,this),n.onItemChange.add(this.shake,this),this.container.addChild(n),this.itemSwitchers.push(n)}},_.prototype.shake=function(t,e){/ceiling|wall|floor/.test(t.name)&&TweenLite.to({progress:0},e,{progress:1,onUpdate:function(){this.container.rotation=.05*(.04*Math.random()-.02-this.container.rotation),this.hologram.rotation=.05*(.04*Math.random()-.02-this.hologram.rotation);for(var e=(1.03+.04*Math.random()-.02,0);e<this.itemSwitchers.length;e++)if(t=this.itemSwitchers[e],t.rotation=.05*(.04*Math.random()-.02-t.rotation),"spaceships"===t.name){var i=t.items[t.currentItemID];i.rope.pX[6]+=8*Math.random()-4}},onUpdateScope:this,onComplete:function(){TweenLite.to(this.container,.8,{rotation:0}),TweenLite.to(this.hologram,.8,{rotation:0});for(var t=0;t<this.itemSwitchers.length;t++)TweenLite.to(this.itemSwitchers[t],.8,{rotation:0});TweenLite.to(this.container.scale,.8,{x:1,y:1})},onCompleteScope:this})},_.prototype.onRewardsButtonPress=function(){this.leaveEditMode(),this.app.overlayManager.show("rewards"),t("tracker").trackAction("view_trophies")},_.prototype.enterEditMode=function(){for(this.doorButton.hide(),this.hologram.talkButton.hide(),this.rewardsButton.hide(),this.userNameButton.disable(),this.editButton.setIcon("icon_close.png"),this.editButton.backgroundColor="red",i=0;i<this.itemSwitchers.length;i++)this.itemSwitchers[i].showUI();TweenLite.to(this.container.scale,1,{x:1.02,y:1.02})},_.prototype.leaveEditMode=function(){for(this.doorButton.show(),this.rewardsButton.show(),this.hologram.talkButton.show(),this.userNameButton.enable(),this.editButton.setIcon("icon_customise.png"),this.editButton.backgroundColor="blue",i=0;i<this.itemSwitchers.length;i++)this.itemSwitchers[i].hideUI();TweenLite.to(this.container.scale,1,{x:1,y:1})},_.prototype.toggleEditMode=function(){for(var e,i=0;i<this.itemSwitchers.length;i++)this.itemSwitchers[i].uiHidden||(e=!0);e?this.leaveEditMode():(this.enterEditMode(),t("tracker").trackAction("shop_start"))},_.prototype.onItemSwitcherOpened=function(t){this.editButton.hide();for(var e=0;e<this.itemSwitchers.length;e++){var i=this.itemSwitchers[e];i!==t&&i.hideUI()}},_.prototype.onItemSwitcherClosed=function(t){if(!t.uiHidden){this.editButton.show();for(var e=0;e<this.itemSwitchers.length;e++){var i=this.itemSwitchers[e];i!==t&&i.showUI()}}},_.prototype.getItemSwitcherByName=function(t){for(var e=0;e<this.itemSwitchers.length;e++){var i=this.itemSwitchers[e];if(i.name===t)return i}return null},_.prototype.onHangarDoorPressed=function(){this.app.screenManager.gotoScreenByID("arcade")},_.prototype.onShow=function(){t("tracker").trackAction("my_room"),this.screenActive=!0,this.trophies.setData(),this.userNameButton.update(),this.app.topMenu.show(),l.instance.add(this.update,this)},_.prototype.onShown=function(){this.doorButton.onPress.add(this.onHangarDoorPressed,this),this.rewardsButton.onPress.add(this.onRewardsButtonPress,this),this.onShowComplete.dispatch()},_.prototype.onHide=function(){this.leaveEditMode(),this.doorButton.onPress.remove(this.onHangarDoorPressed,this),this.rewardsButton.onPress.remove(this.onRewardsButtonPress,this)},_.prototype.onHidden=function(){l.instance.remove(this.update,this)},_.prototype.update=function(){this.dust.update()},_.prototype.goDown=function(){},_.prototype.resize=function(t,e){this.container.x=.5*t,this.container.y=372.5-(745-e),this.w=t,this.h=e;this.container.y;this.dust.bounds.x=.5*-t,this.dust.bounds.y=.5*-e,this.dust.bounds.width=t,this.dust.bounds.height=e,this.dust.resetParticles()},r.exports=_}),define("fido/app/transitions/DigitalTransition",["require","exports","module"],function(t,e,i){DigitalTransition=function(){},DigitalTransition.constructor=DigitalTransition,DigitalTransition.prototype.begin=function(t,e,i){this.screenManager=t,this.currentScreen=e,this.nextScreen=i,this.currentScreen?(this.currentScreen.onHide&&this.currentScreen.onHide(),TweenLite.to(this.currentScreen.scale,.1,{x:1.5,y:0,ease:Sine.easeOut,onComplete:this.onFadeout.bind(this)})):this.onFadeout()},DigitalTransition.prototype.onFadeout=function(){this.currentScreen&&(this.currentScreen.onHidden&&this.currentScreen.onHidden(),this.screenManager.container.removeChild(this.currentScreen),this.currentScreen.alpha=1),this.nextScreen.scale.y=0,this.nextScreen.onShow&&this.nextScreen.onShow(),this.nextScreen.resize&&this.nextScreen.resize(this.screenManager.w,this.screenManager.h),TweenLite.to(this.nextScreen.scale,.4,{x:1,y:1,ease:Elastic.easeOut,onComplete:this.onFadein.bind(this)}),this.screenManager.container.addChild(this.nextScreen)},DigitalTransition.prototype.onFadein=function(){this.nextScreen.onShown&&this.nextScreen.onShown(),this.screenManager.onTransitionComplete()},DigitalTransition.prototype.resize=function(t,e){this.w=t,this.h=e},i.exports=DigitalTransition}),define("starwars/filters/GlitchCathodic",["require","exports","module","PIXI"],function(t,e,i){function r(){n.AbstractFilter.call(this,null,["precision highp float;","uniform sampler2D Texture0;","uniform float time;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main()","{","vec4 color = texture2D(Texture0, vTextureCoord).rgba;","color -= abs(sin(vTextureCoord.y * 200.0 + time * 2.5)) * 0.04; // (1) ","color -= abs(sin(vTextureCoord.y * 400.0 - time * 5.0)) * 0.02; // (2)","gl_FragColor = color;","}"].join("\n"),{time:{type:"f",value:1}})}var n=t("PIXI");r.prototype=Object.create(n.AbstractFilter.prototype),r.prototype.constructor=r,Object.defineProperties(r.prototype,{time:{get:function(){return this.uniforms.time.value},set:function(t){this.uniforms.time=t}}}),i.exports=r}),define("starwars/overlays/AlertPanel",["require","exports","module","PIXI","signals","fido/app/ScreenManager","fido/app/transitions/DigitalTransition","starwars/buttons/GoldenButton","fido/app/Screen","starwars/filters/GlitchCathodic","fido/system/Ticker"],function(t,e,i){var r=t("PIXI"),n=t("signals"),s=(t("fido/app/ScreenManager"),t("fido/app/transitions/DigitalTransition"),t("starwars/buttons/GoldenButton")),o=(t("fido/app/Screen"),t("starwars/filters/GlitchCathodic"),t("fido/system/Ticker")),a=function(t,e){r.Container.call(this),this.app=t,this.blur=e,this.onShow=new n,this.onHide=new n,this.positionRatio=1,this.counter=0,this.container=new r.Sprite,this.container.anchor.set(.5),this.container.position.x=this.app.safeSize.width/2,this.container.position.y=this.app.safeSize.height/2,this.view=new r.Container,r.isWebGL&&this.blur?(this.black=(new r.Graphics).beginFill(6962028).drawRect(0,0,100,100),this.black.alpha=.7,this.black.interactive=!0,this.black.blendMode=r.BLEND_MODES.MULTIPLY,this.black.hitArea=new r.Rectangle(0,0,1e4,1e4)):(this.black=(new r.Graphics).beginFill(5592405).drawRect(0,0,100,100),this.black.alpha=0,this.black.interactive=!0,this.black.hitArea=new r.Rectangle(0,0,1e4,1e4)),this.view.visible=!1,!Device.instance.ie&&this.blur&&r.isWebGL&&(this.rt=new r.RenderTexture(this.app.renderer,1136,745,0,.25),this.bg=new r.Sprite(this.rt),this.view.addChild(this.bg),this.blurX=new r.filters.BlurXFilter,this.blurX.blur=30,this.blurY=new r.filters.BlurYFilter,this.blurY.blur=30,this.blurX.passes=8,this.blurY.passes=8),this.view.addChild(this.black),this.view.addChild(this.container),this.bg2=new r.Sprite.fromFrame("generic_comms_panel.png"),
this.bg2.anchor.set(.5),this.container.addChild(this.bg2),this.nextButton=new s("icon_play.png"),this.nextButton.setSize("small"),this.nextButton.onPress.add(this.next,this),this.nextButton.x=this.bg2.width/2-10,this.nextButton.y=this.bg2.height/2-25,this.bg2.addChild(this.nextButton);var i={font:"40px "+window.MAIN_FONT,fill:"#eeffff",stroke:"#fddd54",strokeThickness:1};this.formatInfo={font:"20px "+window.MAIN_FONT,fill:"#eeffff",wordWrap:!0,lineHeight:28,wordWrapWidth:.8*this.bg2.width,align:"center"},this.formatInfoWithImage={font:"24px "+window.SECONDARY_FONT,fill:"#eeffff",wordWrap:!0,lineHeight:28,wordWrapWidth:.7*this.bg2.width,align:"left"},this.title=new r.Text("",i),this.title.anchor.x=this.title.anchor.y=.5,this.title.position.y=-this.bg2.height/2-25,this.sprite=new r.Sprite,this.sprite.anchor.y=.5,this.sprite.position.x=-this.bg2.width/2+20,this.sprite.position.y=0,this.info=new r.Text("",this.formatInfo),this.info.anchor.x=.5,this.info.anchor.y=.5,this.container.addChild(this.title),this.container.addChild(this.sprite),this.container.addChild(this.info)};a.prototype=Object.create(r.Container.prototype),a.prototype.setPosition=function(t){this.positionRatio=t||this.positionRatio,this.container.position.x=this.app.safeSize.width/2*this.positionRatio,this.container.position.y=this.app.safeSize.height/2*this.positionRatio},a.prototype.resize=function(t,e){this.black.scale.set(t/100,e/100)},a.prototype.update=function(){this.counter-=.04,r.isWebGL},a.prototype.next=function(){this.index+1>=this.data.length?this.hide():(this.index++,this.display(this.index))},a.prototype.display=function(t){var e=this.data[t];this.title.text=e.title||"",e.img?(this.info.style=this.formatInfoWithImage,this.info.position.x=30,this.sprite.visible=!0,this.sprite.texture=new r.Texture.fromFrame(e.img)):(this.info.style=this.formatInfo,this.info.position.x=0,this.sprite.visible=!1),this.info.text=translations[e.text]||e.text;var i=.75*this.bg2.height/this.info.height;this.info.scale.set(Math.min(i,1)),TweenLite.fromTo(this.info,.4,{alpha:0},{alpha:1}),TweenLite.fromTo(this.info,.4,{y:-10},{y:0,ease:Back.easeOut})},a.prototype.hide=function(){this.onHide.dispatch(),r.isWebGL?(TweenLite.to(this.container.scale,.1,{x:1.5,y:0,ease:Sine.easeOut}),TweenLite.to(this.view,.3,{alpha:0,onComplete:function(){this.view.visible=!1,o.instance.remove(this.update,this)}.bind(this)})):(this.container.scale.x=1.5,this.container.scale.y=0,this.view.visible=!1,o.instance.remove(this.update,this))},a.prototype.show=function(t,e){if(o.instance.add(this.update,this),e=e||{},this.nextButton.visible=e.hasNextButton!==!1,this.black.visible=this.nextButton.visible,this.setPosition(),this.container.position.x+=e.offsetX||0,this.container.position.y+=e.offsetY||0,this.onShow.dispatch(),!Device.instance.ie&&this.blur&&r.isWebGL){var i=this.app.stage;i.filters=[this.blurX,this.blurY],this.rt.render(i),this.bg.visible=!0,i.filters=null}this.view.visible=!0,this.view.alpha=0,this.container.scale.set(1.5,0),r.isWebGL?(TweenLite.to(this.view,.3,{alpha:1}),TweenLite.to(this.container.scale,.4,{delay:.2,x:1,y:1,ease:Elastic.easeOut})):(this.view.alpha=1,this.container.scale.x=this.container.scale.y=1),this.index=0,this.data=t,this.display(this.index)},i.exports=a}),define("starwars/app/AlertPanelManager",["require","exports","module","PIXI","starwars/overlays/AlertPanel","fido/system/LocalStorage","signals"],function(t,e,i){var r=t("PIXI"),n=t("starwars/overlays/AlertPanel"),s=t("fido/system/LocalStorage"),o=t("signals"),a=function(t,e,i){this.app=t,e||(e="com.disney.arcade.panels_"),this.currentPanelId="",this.onHide=new o,this.onShow=new o,this.view=new r.Container,this.canComeBack=!1,this.alertPanel=new n(t,i),this.alertPanel.onHide.add(this.onPanelHidden,this),this.view.addChild(this.alertPanel.view),this.localStorage=new s(e),this.save={alertPanels:{}}};a.prototype.constructor=a,a.prototype.load=function(t){var e=this.localStorage.getObject("savePanels");if(e)this.save=e;else{for(var i in t){var r=t[i];this.save.alertPanels[i]=r;for(var n=0;n<r.length;n++)this.save.alertPanels[i]=r[n]}this.localStorage.storeObject("savePanels",this.save)}for(var i in t)for(var s=t[i].slides,n=0;n<s.length;n++){var o=s[n];this.save.alertPanels[i].slides[n].text=o.text}},a.prototype.onPanelHidden=function(){this.setAlertPanelState(this.currentPanelId,!1),this.onHide.dispatch()},a.prototype.setAlertPanelState=function(t,e){var i=this.save.alertPanels[t];i&&(i.state=e),this.saveToStorage()},a.prototype.show=function(t,e){e=e||{},this.canComeBack=e.canComeBack,void 0===this.canComeBack&&(this.canComeBack=!1),this.currentPanelId=t;var i=this.save.alertPanels[this.currentPanelId];i&&i.state&&(this.onShow.dispatch(),this.alertPanel.show(i.slides,e))},a.prototype.showCustom=function(t,e){this.alertPanel.show([{text:t}],e)},a.prototype.hide=function(t){this.save.alertPanels[this.currentPanelId];this.alertPanel.hide()},a.prototype.getState=function(t){var e=this.save.alertPanels[t];if(e)return e.state},a.prototype.addEvents=function(t){var e=this.save.alertPanels.events;if(!e||""!==e.lastAccess&&e.lastAccess!==(new Date).toDateString()){for(var e={lastAccess:"",slides:[]},i=0;i<t.length;i++)e.slides.push({text:t[i]});this.save.alertPanels.events=e}},a.prototype.showEvents=function(){var t=this.save.alertPanels.events,e=(new Date).toDateString();t.lastAccess!==e&&(this.onShow.dispatch(),this.alertPanel.show(t.slides),t.lastAccess=e,this.saveToStorage())},a.prototype.resize=function(t,e){this.alertPanel.resize(t,e)},a.prototype.saveToStorage=function(){this.canComeBack||this.localStorage.storeObject("savePanels",this.save)},i.exports=a}),define("com/arcade/app/screens/TitleScreen",["require","exports","module","PIXI","starwars/buttons/GoldenButton","fido/system/Device"],function(t,e,i){var r=t("PIXI"),n=t("starwars/buttons/GoldenButton"),s=t("fido/system/Device"),o=function(t){this.app=t,r.Container.call(this),this.title=new r.Text(translations.STR_STARWARS_ARCADE,{font:"54px sans-serif",fill:"white"}),this.title.anchor.set(.5),this.addChild(this.title),this.playButton=new n("icon_play_large.png"),this.addChild(this.playButton.view),this.playButton.onPress.add(this.onButtonPressed,this),s.instance.desktop||(this.backButton=new n,this.backButton.view.y=64,this.backButton.view.x=76,this.backButton.onPress.add(this.goBackToMainSite,this),this.addChild(this.backButton.view))};o.prototype=Object.create(r.Container.prototype),o.prototype.goBackToMainSite=function(){window.location.href="http://www.disney.co.uk"},o.prototype.onButtonPressed=function(){s.instance.android&&(document.body.requestFullScreen?document.body.requestFullScreen():document.body.mozRequestFullScreen?document.body.mozRequestFullScreen():document.body.webkitRequestFullScreen&&document.body.webkitRequestFullScreen()),this.screenManager.gotoScreenByID("arcade")},o.prototype.onShow=function(){this.app.topMenu.hide(),this.title.scale.set(0),TweenLite.to(this.title.scale,1,{x:1,y:1,ease:Elastic.easeOut,delay:.2}),this.playButton.view.scale.set(0),TweenLite.to(this.playButton.view.scale,1,{x:1,y:1,ease:Elastic.easeOut,delay:.5})},o.prototype.onShown=function(){},o.prototype.resize=function(t,e){this.title.position.set(t/2,e/2-100),this.playButton.view.position.set(t/2,e/2+100)},i.exports=o}),define("fido/swfy/Swfy",["require","exports","module","PIXI","signals"],function(t,e,i){var r=t("PIXI"),n=t("signals");Swfy=function(){r.Container.call(this),this.sprites=[],this.currentFrame=0,this.onComplete=new n,this.finished=!0},Swfy.constructor=Swfy,Swfy.prototype=Object.create(r.Container.prototype),Swfy.prototype.setAnimation=function(t,e){if(t!==this.currentAnimation){if(this.currentAnimation)for(var i in this.currentAnimation){var n=this.currentAnimation[i];this.removeChild(n.sprite)}this.currentAnimation=t,this.totalFrames=0;for(var i in t){var n=t[i];if(!n.sprite){var s=e[n.view];s||(s=n.isImage?r.Sprite.fromImage(ASSET_URL+n.view):r.Sprite.fromFrame(n.view)),n.sprite=s,n.custom?s.pivot.x=10:n.custom2&&(s.pivot.x=-10,s.pivot.y=-20)}n.sprite.visible=!1,this.addChild(n.sprite),this.totalFrames=Math.max(this.totalFrames,n.endFrame)}for(var i in t){var n=t[i];this.addChildAt(n.sprite,n.depth)}this.totalFrames-=2}},Swfy.prototype.reset=function(){this.currentFrame=0,this.finished=!1},Swfy.prototype.setRatio=function(t){t<0?t=0:t>1&&(t=1),this.currentFrame=t*this.totalFrames},Swfy.prototype.updateTransform=function(){if(this.finished)return void r.Container.prototype.updateTransform.call(this);this.currentFrame>=this.totalFrames&&(this.currentFrame=this.totalFrames);var t=this.currentFrame;for(var e in this.currentAnimation){var i=this.currentAnimation[e];if(t>=i.startFrame&&t<i.endFrame){i.sprite.visible=!0;var n=t-i.startFrame,s=Math.floor(n),o=Math.ceil(n),a=n-s,h=i.position[2*s],l=i.position[2*o],c=h+(l-h)*a,u=i.position[2*s+1],d=i.position[2*o+1],p=u+(d-u)*a;i.sprite.position.x=c,i.sprite.position.y=p;var f=1,m=1;if(i.scale){var g=i.scale[2*s],v=i.scale[2*o];f=g+(v-g)*a;var _=i.scale[2*s+1],y=i.scale[2*o+1];m=_+(y-_)*a}i.sprite.scale.x=f,i.sprite.scale.y=m;var x=1;if(i.alpha){var w=i.alpha[s],b=i.alpha[o];x=w+(b-w)*a}if(i.sprite.alpha=x,i.rotation){var T=i.rotation[s],S=i.rotation[o];interRotation=T+(S-T)*a,i.sprite.rotation=interRotation*(Math.PI/180)}}else i.sprite.visible=!1}r.Container.prototype.updateTransform.call(this)},i.exports=Swfy}),define("com/arcade/app/elements/arcade/ArcadeAnimationData",["require","exports","module"],function(t,e,i){i.exports={mc0:{view:"img/arcade_animation/bg_blur.jpg",isImage:!0,depth:0,startFrame:0,endFrame:138,position:[482.45,134.95,476.75,131.8,470.65,129.4,464.25,127.3,457.75,125.5,451.15,123.75,444.55,122.3,437.8,120.8,431.1,119.45,424.3,118.2,417.55,117,410.7,115.8,403.85,114.7,397,113.65,390.15,112.7,383.25,111.75,376.35,110.8,369.4,110,362.55,109.15,355.6,108.4,348.65,107.7,341.75,107,334.8,106.35,327.85,105.7,320.9,105.15,313.9,104.65,307,104.2,300.05,103.75,293.15,103.45,286.15,103.1,279.2,102.9,272.35,102.75,265.35,102.65,258.4,102.65,251.55,102.75,244.7,102.95,237.85,103.35,231,103.95,224.2,104.7,217.55,105.95,210.75,109.85,203.95,113.75,197.15,117.6,190.4,121.5,183.55,125.4,176.75,129.25,171.2,130.75,165.65,132.3,159.9,133.8,154.25,135.3,148.5,136.8,142.75,138.2,136.95,139.65,131.1,141.05,125.2,142.45,119.3,143.8,113.35,145.15,107.35,146.5,101.35,147.8,95.3,149.1,89.2,150.4,83.05,151.65,76.85,152.85,70.7,154.15,64.4,155.3,58.15,156.5,51.8,157.7,45.5,158.8,39.1,159.95,32.7,161.05,26.15,162.15,19.75,163.25,13.15,164.3,6.65,165.3,0,166.4,-6.65,167.35,-13.3,168.35,-20.05,169.35,-26.85,170.3,-33.6,171.25,-40.4,172.1,-47.25,173,-54.2,173.9,-61.15,174.75,-68.05,175.55,-75.1,176.45,-82.15,177.2,-89.2,178,-96.35,178.75,-103.5,179.45,-110.75,180.25,-117.9,180.95,-125.15,181.65,-132.5,182.3,-139.85,183,-147.2,183.6,-154.65,184.25,-162.1,184.8,-169.55,185.45,-177.1,186,-184.65,186.55,-192.3,187.05,-199.85,187.55,-207.6,188.05,-215.3,188.5,-223.05,189,-230.8,189.4,-238.7,189.85,-246.5,190.2,-254.45,190.65,-262.3,191,-270.3,191.35,-278.35,191.7,-278.35,191.7,-278.35,191.7,-278.35,191.7,-278.35,191.7,-278.35,191.7,-278.35,191.7,-278.35,191.7,-278.35,191.7,-278.35,191.7,-278.35,191.7,-278.35,191.7,-278.35,191.7,-278.35,191.7,-278.35,191.7,-278.35,191.7,-278.35,191.7,-278.35,191.7,-278.35,191.7,-278.35,191.7,-278.35,191.7,-278.35,191.7,-278.35,191.7,-278.35,191.7,-278.35,191.7,-278.35,191.7],scale:[.718,.718,.721,.721,.723,.723,.726,.726,.729,.729,.732,.732,.734,.734,.737,.737,.74,.74,.743,.743,.746,.746,.748,.748,.751,.751,.754,.754,.757,.757,.759,.759,.762,.762,.765,.765,.768,.768,.771,.771,.773,.773,.776,.776,.779,.779,.782,.782,.784,.784,.787,.787,.79,.79,.793,.793,.796,.796,.798,.798,.801,.801,.804,.804,.807,.807,.809,.809,.812,.812,.815,.815,.818,.818,.821,.821,.823,.823,.826,.826,.829,.829,.832,.832,.835,.835,.837,.837,.84,.84,.843,.843,.846,.846,.848,.848,.851,.851,.854,.854,.857,.857,.86,.86,.862,.862,.865,.865,.868,.868,.871,.871,.873,.873,.876,.876,.879,.879,.882,.882,.885,.885,.887,.887,.89,.89,.893,.893,.896,.896,.898,.898,.901,.901,.904,.904,.907,.907,.91,.91,.912,.912,.915,.915,.918,.918,.921,.921,.923,.923,.926,.926,.929,.929,.932,.932,.935,.935,.937,.937,.94,.94,.943,.943,.946,.946,.949,.949,.951,.951,.954,.954,.957,.957,.96,.96,.962,.962,.965,.965,.968,.968,.971,.971,.974,.974,.976,.976,.979,.979,.982,.982,.985,.985,.987,.987,.99,.99,.993,.993,.996,.996,.999,.999,1.001,1.001,1.004,1.004,1.007,1.007,1.01,1.01,1.012,1.012,1.015,1.015,1.018,1.018,1.021,1.021,1.024,1.024,1.026,1.026,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029,1.029]},mc1:{view:"mainscene",isImage:!1,depth:1,startFrame:0,endFrame:265,position:[-2.85,-175.1,-6.95,-177.95,-11.05,-180.95,-15.1,-184.1,-19.25,-186.95,-23.85,-188.85,-28.65,-190.3,-33.5,-191.4,-38.5,-192.1,-43.6,-192.35,-48.75,-192.2,-53.8,-191.6,-59.05,-190.7,-64.25,-189.65,-69.4,-188.4,-74.65,-186.9,-79.9,-185.2,-85,-183.4,-90.2,-181.5,-95.4,-179.55,-100.6,-177.55,-105.7,-175.4,-110.9,-173.25,-116.05,-171,-121.15,-168.65,-126.25,-166.15,-131.35,-163.6,-136.45,-160.8,-141.55,-157.85,-146.5,-154.55,-151.45,-151.05,-156.25,-147.3,-161.05,-143.4,-165.85,-139.4,-170.65,-135.35,-175.35,-131.1,-180,-126.85,-184.65,-122.45,-189.2,-117.9,-193.7,-113.15,-198.2,-108.25,-202.45,-103.05,-206.6,-97.5,-210.7,-91.95,-214.9,-86.5,-219,-81.1,-223.25,-75.75,-227.55,-70.55,-231.9,-65.4,-236.25,-60.3,-240.75,-55.4,-251.8,-53.65,-263.1,-51.9,-274.3,-50.2,-285.55,-48.55,-296.8,-46.9,-308,-45.2,-319.3,-43.65,-330.6,-42.05,-341.85,-40.5,-353.15,-39,-364.5,-37.5,-375.8,-36.1,-387.2,-34.75,-398.6,-33.4,-409.85,-32.25,-421.35,-31.4,-433,-30.65,-444.55,-30,-456.15,-29.45,-467.75,-28.95,-479.4,-28.5,-490.95,-28.05,-502.6,-27.7,-514.25,-27.4,-525.9,-27.15,-537.5,-27,-549.25,-26.9,-560.95,-26.8,-572.65,-26.9,-584.35,-27.05,-596.1,-27.3,-607.75,-27.7,-619.55,-28.4,-631.35,-29.45,-643.25,-30.55,-655.05,-31.7,-666.75,-32.95,-678.55,-34.3,-690.35,-35.7,-702.15,-37.15,-714,-38.7,-725.75,-40.25,-737.55,-41.9,-749.3,-43.55,-761.15,-45.3,-772.9,-47.15,-784.7,-49,-796.45,-50.95,-808.2,-53,-820,-55.05,-831.75,-57.25,-843.4,-59.55,-855.15,-61.9,-866.9,-64.4,-878.6,-66.9,-890.3,-69.6,-901.9,-72.35,-913.6,-75.1,-925.2,-77.9,-936.85,-80.8,-948.55,-83.7,-960.15,-86.65,-971.75,-89.6,-983.35,-92.55,-994.95,-95.6,-1006.55,-98.65,-1018.15,-101.75,-1029.8,-104.85,-1041.4,-107.95,-1052.95,-111.05,-1064.55,-114.2,-1076.15,-117.3,-1087.65,-120.5,-1099.2,-123.7,-1110.85,-126.9,-1122.4,-130.15,-1133.95,-133.4,-1145.5,-136.65,-1157.05,-139.95,-1168.65,-143.3,-1180.15,-146.65,-1190.1,-149.65,-1200.1,-152.5,-1210.15,-155.4,-1220.2,-158.2,-1230.2,-161.05,-1240.3,-163.8,-1250.35,-166.55,-1260.45,-169.2,-1270.5,-171.85,-1280.6,-174.4,-1290.7,-176.95,-1300.85,-179.4,-1311,-181.85,-1321.15,-184.2,-1331.3,-186.5,-1341.5,-188.7,-1351.65,-190.85,-1361.9,-192.95,-1372.15,-194.9,-1382.4,-196.8,-1392.65,-198.55,-1402.95,-200.25,-1413.25,-201.85,-1423.5,-203.35,-1433.8,-204.7,-1444.15,-206,-1454.5,-207.1,-1464.8,-208.1,-1475.15,-208.95,-1485.5,-209.7,-1495.85,-210.25,-1506.2,-210.7,-1516.6,-211,-1526.95,-211.15,-1537.25,-211.1,-1547.6,-210.95,-1557.95,-210.6,-1568.25,-210.1,-1578.55,-209.45,-1588.8,-208.65,-1599.15,-207.75,-1609.35,-206.6,-1619.6,-205.4,-1629.7,-203.95,-1639.9,-202.4,-1650.05,-200.75,-1660.1,-199,-1670.1,-197.05,-1680.15,-195.05,-1690.15,-192.9,-1700.1,-190.7,-1710.05,-188.3,-1719.95,-185.9,-1729.8,-183.35,-1739.65,-180.75,-1749.5,-178.05,-1759.25,-175.3,-1768.95,-172.45,-1778.75,-169.55,-1803.65,-168.65,-1828.6,-167.8,-1853.55,-167,-1878.5,-166.35,-1903.6,-165.8,-1928.6,-165.25,-1953.75,-164.8,-1978.8,-164.45,-2003.9,-164.2,-2029.1,-163.95,-2054.2,-163.85,-2079.4,-163.8,-2104.65,-163.85,-2129.9,-163.95,-2155.15,-164.1,-2180.45,-164.4,-2205.7,-164.8,-2231.05,-165.15,-2256.4,-165.6,-2281.8,-166.2,-2307.1,-166.85,-2332.55,-167.55,-2358,-168.35,-2383.4,-169.25,-2408.85,-170.2,-2434.35,-171.15,-2459.8,-172.25,-2485.25,-173.4,-2510.85,-174.65,-2536.35,-176,-2561.9,-177.35,-2587.45,-178.8,-2613,-180.35,-2638.55,-181.9,-2664.15,-183.6,-2689.75,-185.4,-2715.35,-187.2,-2741.05,-189.1,-2766.7,-191.05,-2792.3,-193.1,-2817.95,-195.15,-2843.7,-197.4,-2869.25,-199.65,-2895.05,-202,-2920.7,-204.4,-2946.4,-206.9,-2972.1,-209.45,-2997.85,-212.1,-3023.55,-214.8,-3049.25,-217.6,-3075.05,-220.5,-3100.75,-223.4,-3126.5,-226.45,-3152.3,-229.55,-3178.05,-232.75,-3203.75,-236.05,-3229.6,-239.3,-3255.35,-242.75,-3281.05,-246.25,-3306.9,-249.85,-3332.65,-253.5,-3358.45,-257.3,-3384.2,-261.15,-3410,-265.05,-3435.8,-269.1,-3461.6,-273.2,-3487.35,-277.4,-3513.15,-281.8,-3538.9,-286.2,-3564.65,-290.7,-3590.45,-295.3,-3616.2,-300,-3641.95,-304.85,-3667.7,-309.85],scale:[.574,.574,.573,.573,.571,.571,.57,.57,.568,.568,.567,.567,.565,.565,.564,.564,.562,.562,.561,.561,.56,.56,.558,.558,.557,.557,.555,.555,.554,.554,.552,.552,.551,.551,.549,.549,.548,.548,.546,.546,.545,.545,.543,.543,.542,.542,.54,.54,.539,.539,.537,.537,.536,.536,.534,.534,.533,.533,.531,.531,.53,.53,.528,.528,.527,.527,.525,.525,.524,.524,.522,.522,.521,.521,.519,.519,.518,.518,.516,.516,.515,.515,.513,.513,.512,.512,.51,.51,.509,.509,.507,.507,.506,.506,.504,.504,.503,.503,.501,.501,.5,.5,.501,.501,.503,.503,.504,.504,.506,.506,.507,.507,.509,.509,.51,.51,.512,.512,.513,.513,.515,.515,.516,.516,.518,.518,.519,.519,.521,.521,.522,.522,.524,.524,.525,.525,.527,.527,.528,.528,.53,.53,.531,.531,.533,.533,.534,.534,.536,.536,.537,.537,.539,.539,.54,.54,.541,.541,.543,.543,.544,.544,.546,.546,.547,.547,.549,.549,.55,.55,.552,.552,.553,.553,.555,.555,.556,.556,.558,.558,.559,.559,.561,.561,.562,.562,.564,.564,.565,.565,.567,.567,.568,.568,.57,.57,.571,.571,.573,.573,.574,.574,.576,.576,.577,.577,.579,.579,.58,.58,.581,.581,.583,.583,.584,.584,.586,.586,.587,.587,.589,.589,.59,.59,.592,.592,.593,.593,.595,.595,.596,.596,.598,.598,.599,.599,.601,.601,.602,.602,.604,.604,.605,.605,.607,.607,.608,.608,.61,.61,.611,.611,.613,.613,.614,.614,.616,.616,.617,.617,.619,.619,.62,.62,.62,.62,.621,.621,.621,.621,.622,.622,.622,.622,.623,.623,.623,.623,.624,.624,.624,.624,.625,.625,.625,.625,.626,.626,.626,.626,.627,.627,.627,.627,.628,.628,.628,.628,.629,.629,.629,.629,.63,.63,.63,.63,.631,.631,.631,.631,.632,.632,.632,.632,.633,.633,.633,.633,.634,.634,.634,.634,.635,.635,.635,.635,.636,.636,.636,.636,.637,.637,.637,.637,.638,.638,.638,.638,.639,.639,.639,.639,.64,.64,.64,.64,.641,.641,.641,.641,.642,.642,.642,.642,.643,.643,.643,.643,.644,.644,.644,.644,.645,.645,.645,.645,.646,.646,.646,.646,.647,.647,.647,.647,.648,.648,.648,.648,.648,.648,.649,.649,.654,.654,.658,.658,.663,.663,.667,.667,.672,.672,.677,.677,.681,.681,.686,.686,.691,.691,.695,.695,.7,.7,.704,.704,.709,.709,.714,.714,.718,.718,.723,.723,.728,.728,.732,.732,.737,.737,.741,.741,.746,.746,.751,.751,.755,.755,.76,.76,.764,.764,.769,.769,.774,.774,.778,.778,.783,.783,.788,.788,.792,.792,.797,.797,.801,.801,.806,.806,.811,.811,.815,.815,.82,.82,.824,.824,.829,.829,.834,.834,.838,.838,.843,.843,.848,.848,.852,.852,.857,.857,.861,.861,.866,.866,.871,.871,.875,.875,.88,.88,.885,.885,.889,.889,.894,.894,.898,.898,.903,.903,.908,.908,.912,.912,.917,.917,.921,.921,.926,.926,.931,.931,.935,.935,.94,.94,.945,.945,.949,.949,.954,.954,.958,.958,.963,.963,.968,.968,.972,.972,.977,.977,.982,.982,.986,.986,.991,.991]},mc2:{view:"lamp",isImage:!0,depth:2,startFrame:0,endFrame:265,position:[648,-228,639.35,-231.7,629.75,-233.9,619.75,-235.35,609.5,-236.35,599.1,-237,588.6,-237.4,577.95,-237.6,567.2,-237.65,556.4,-237.5,545.6,-237.25,534.7,-236.9,523.75,-236.4,512.8,-235.8,501.8,-235.1,490.8,-234.3,479.8,-233.45,468.75,-232.45,457.65,-231.4,446.55,-230.25,435.45,-229.05,424.3,-227.75,413.2,-226.35,402,-224.85,390.95,-223.3,379.75,-221.65,368.6,-219.9,357.45,-218.1,346.3,-216.15,334.05,-216.4,321.8,-216.45,309.55,-216.5,297.3,-216.4,285.1,-216.15,272.8,-215.75,260.6,-215.3,248.4,-214.65,236.15,-213.8,224,-212.85,211.85,-211.6,199.7,-210.2,187.6,-208.4,175.55,-206.4,163.55,-204,151.65,-201.05,139.7,-197.6,128,-193.3,114.05,-190.2,100.15,-187.15,86.2,-184.35,72.25,-181.75,58.2,-179.25,44.25,-176.95,30.25,-174.8,16.2,-172.8,2.15,-170.95,-11.9,-169.3,-26,-167.8,-40.1,-166.5,-54.2,-165.3,-68.3,-164.3,-82.4,-163.4,-96.6,-162.75,-110.75,-162.25,-124.95,-161.95,-139.2,-161.75,-153.4,-161.75,-167.7,-161.9,-181.95,-162.2,-196.2,-162.65,-210.5,-163.3,-224.8,-164.15,-239.1,-165.1,-253.5,-166.2,-267.95,-167.5,-293.15,-167.1,-319,-166.75,-345.4,-166.4,-372.3,-166.05,-399.8,-165.8,-428,-165.5,-456.9,-165.3,-486.7,-165.1,-517.6,-164.95,-549.95,-164.85,-584.3,-164.9,-621.75,-165.05,-665.05,-165.45,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5],scale:[1,1,.992,.992,.985,.985,.977,.977,.97,.97,.962,.962,.955,.955,.947,.947,.94,.94,.932,.932,.925,.925,.917,.917,.91,.91,.902,.902,.895,.895,.887,.887,.88,.88,.872,.872,.865,.865,.857,.857,.85,.85,.842,.842,.835,.835,.827,.827,.82,.82,.813,.813,.805,.805,.797,.797,.79,.79,.794,.794,.797,.797,.801,.801,.805,.805,.808,.808,.812,.812,.816,.816,.82,.82,.823,.823,.827,.827,.831,.831,.834,.834,.838,.838,.842,.842,.845,.845,.849,.849,.853,.853,.857,.857,.86,.86,.864,.864,.868,.868,.871,.871,.875,.875,.879,.879,.882,.882,.886,.886,.89,.89,.893,.893,.897,.897,.901,.901,.905,.905,.908,.908,.912,.912,.916,.916,.919,.919,.923,.923,.927,.927,.93,.93,.934,.934,.938,.938,.942,.942,.945,.945,.949,.949,.953,.953,.956,.956,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96]},mc3:{view:"wires1",isImage:!0,depth:3,startFrame:0,endFrame:265,position:[353.05,-125.5,313.25,-127.7,273.45,-129.65,233.65,-131.35,193.85,-132.8,154,-134.05,114.15,-135.25,74.35,-136.55,34.55,-137.9,-5.35,-139.5,-45.15,-141.5,-84.95,-144.05,-124.65,-147.3,-164.35,-151.1,-203.9,-155.7,-243.45,-160.95,-282.7,-167.05,-321.95,-173.75,-361,-181.15,-388.9,-184.1,-416.9,-185.5,-445,-185.8,-473.05,-185.4,-501.1,-184.65,-529.2,-183.75,-557.25,-182.85,-585.3,-182.1,-613.35,-181.7,-641.45,-181.85,-669.4,-182.45,-697.3,-183.5,-725.25,-184.9,-753.15,-186.55,-781,-188.45,-808.85,-190.6,-836.7,-192.9,-864.55,-195.35,-892.4,-197.9,-920.25,-200.5,-948.05,-203.15,-975.9,-205.8,-1003.7,-208.4,-1031.6,-210.9,-1059.4,-213.25,-1087.3,-215.5,-1115.15,-217.45,-1143.05,-219.15,-1171,-220.5,-1198.95,-221.4,-1226.85,-221.75,-1254.8,-221.5,-1282.75,-220.35,-1310.6,-218.25,-1338.35,-214.85,-1365.85,-209.85,-1392.9,-202.8,-1419.1,-193.1,-1436.15,-189.3,-1453.15,-185.45,-1470.2,-181.65,-1487.3,-178.1,-1504.75,-176.75,-1522.25,-177.25,-1539.7,-178,-1557.15,-177.55,-1574.6,-176.3,-1591.95,-174.6,-1609.35,-172.7,-1626.7,-170.8,-1644.1,-168.9,-1661.45,-167,-1678.85,-165.1,-1696.25,-163.15,-1720.05,-160.3,-1743.9,-157.95,-1767.8,-156.25,-1791.75,-155.5,-1815.7,-156.05,-1839.6,-158.2,-1863.25,-162.05,-1886.9,-165.65,-1910.65,-169.2,-1933.9,-172.3,-1957.1,-175.3,-1980.35,-178.25,-2003.6,-181.2,-2026.9,-184.1,-2050.15,-186.95,-2073.4,-189.8,-2096.65,-192.6,-2119.9,-195.4,-2143.2,-198.2,-2166.45,-200.9,-2189.75,-203.65,-2213.05,-206.3,-2236.3,-208.95,-2259.6,-211.6,-2282.9,-214.15,-2306.15,-216.7,-2329.5,-219.2,-2352.8,-221.7,-2376.1,-224.1,-2399.4,-226.45,-2422.75,-228.8,-2446.05,-231.05,-2469.4,-233.25,-2492.75,-235.35,-2516.1,-237.35,-2539.45,-239.3,-2562.8,-241.05,-2586.2,-242.7,-2609.55,-244.15,-2633,-245.35,-2656.4,-246.2,-2679.85,-246.45,-2692.1,-246.35,-2704.35,-246.15,-2716.65,-245.95,-2728.9,-245.65,-2741.15,-245.35,-2753.4,-245,-2765.7,-244.6,-2777.9,-244.1,-2790.2,-243.6,-2802.45,-243.05,-2814.7,-242.45,-2826.95,-241.8,-2839.2,-241.15,-2851.4,-240.4,-2863.7,-239.65,-2875.9,-238.8,-2888.15,-237.95,-2900.35,-237.05,-2912.6,-236.1,-2924.85,-235.15,-2937.05,-234.1,-2949.3,-233.05,-2961.5,-231.95,-2973.7,-230.8,-2985.9,-229.6,-2998.15,-228.35,-3010.35,-227.1,-3022.5,-225.8,-3034.7,-224.45,-3046.9,-223.1,-3059.1,-221.65,-3071.25,-220.2,-3083.45,-218.7,-3095.6,-217.15,-3107.75,-215.6,-3119.9,-213.95,-3132.1,-212.3,-3144.2,-210.6,-3156.35,-208.85,-3168.5,-207.1,-3180.65,-205.25,-3192.75,-203.4,-3204.85,-201.5,-3217,-199.55,-3229.1,-197.55,-3241.2,-195.5,-3253.25,-193.4,-3265.35,-191.25,-3277.4,-189,-3289.45,-186.7,-3301.5,-184.35,-3313.5,-181.85,-3325.55,-179.2,-3337.35,-176.1,-3355.65,-170.35,-3374.35,-166.15,-3393.25,-162.85,-3412.25,-160.2,-3431.35,-158.15,-3450.45,-156.6,-3469.65,-155.55,-3488.8,-154.95,-3508,-154.8,-3527.2,-155.1,-3546.35,-155.85,-3565.5,-157.1,-3584.6,-158.9,-3603.65,-161.15,-3622.65,-164.05,-3641.5,-167.5,-3660.25,-171.6,-3678.85,-176.35,-3697.2,-181.9,-3715.3,-188.3,-3733.1,-195.55,-3750.45,-203.75,-3767.25,-213,-3786.3,-214.75,-3805.45,-216.35,-3824.55,-217.95,-3843.7,-219.55,-3862.85,-221.1,-3881.95,-222.65,-3901.05,-224.25,-3920.2,-225.8,-3939.35,-227.3,-3958.45,-228.85,-3977.6,-230.35,-3996.7,-231.85,-4015.85,-233.35,-4035,-234.8,-4054.15,-236.25,-4073.25,-237.7,-4092.4,-239.1,-4111.55,-240.5,-4130.7,-241.85,-4149.85,-243.15,-4169,-244.4,-4188.15,-245.55,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1,-4207.35,-246.1],scale:[1,1,1.006,1.006,1.011,1.011,1.017,1.017,1.022,1.022,1.028,1.028,1.033,1.033,1.039,1.039,1.044,1.044,1.05,1.05,1.056,1.056,1.061,1.061,1.067,1.067,1.072,1.072,1.078,1.078,1.083,1.083,1.089,1.089,1.094,1.094,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1,1.1]
},mc4:{view:"wires2",isImage:!0,depth:4,startFrame:0,endFrame:170,position:[-609.05,-227.5,-655.55,-231.1,-701.95,-236.35,-748.2,-243.05,-794.15,-250.9,-840.05,-259.8,-885.7,-269.55,-931.2,-280,-976.6,-290.9,-1021.95,-301.95,-1067.4,-312.75,-1113.1,-322.5,-1151.05,-327.15,-1189.3,-328.7,-1227.55,-328.35,-1265.85,-326.65,-1304.05,-324.1,-1342.2,-320.85,-1380.3,-317.2,-1418.4,-313.15,-1456.45,-308.9,-1494.45,-304.5,-1532.55,-300,-1570.5,-295.5,-1608.55,-291,-1646.6,-286.5,-1684.65,-282.15,-1722.7,-277.9,-1760.75,-273.8,-1798.35,-269.85,-1836,-266,-1873.6,-262.15,-1911.25,-258.4,-1948.85,-254.75,-1986.5,-251.1,-2024.15,-247.55,-2061.85,-244,-2099.45,-240.55,-2137.1,-237.1,-2174.85,-233.75,-2212.5,-230.45,-2250.15,-227.25,-2287.8,-224.1,-2325.5,-220.95,-2363.2,-217.9,-2400.9,-214.95,-2438.65,-212.05,-2476.35,-209.3,-2514.1,-206.75,-2551.85,-204.4,-2589.6,-202.55,-2627.4,-203.3,-2665.1,-206.05,-2702.8,-209.2,-2740.45,-212.55,-2778.15,-216.05,-2815.75,-219.55,-2853.4,-223.1,-2891.1,-226.65,-2928.7,-230.15,-2966.4,-233.65,-3004.05,-237.15,-3041.7,-240.55,-3079.35,-243.95,-3117.05,-247.25,-3154.7,-250.45,-3192.4,-253.5,-3230.1,-256.45,-3267.8,-259.15,-3305.6,-261.6,-3343.35,-263.7,-3381.1,-265.25,-3418.95,-265.8,-3474.95,-266.9,-3531,-268.2,-3587.05,-269.75,-3643.05,-271.4,-3699.15,-273.15,-3755.15,-275,-3811.1,-276.95,-3867.2,-278.95,-3923.2,-281,-3979.2,-283.1,-4035.15,-285.25,-4091.2,-287.45,-4147.25,-289.65,-4203.25,-291.9,-4259.3,-294.15,-4315.3,-296.5,-4371.35,-298.75,-4427.35,-301.15,-4483.35,-303.45,-4539.35,-305.8,-4595.4,-308.2,-4651.4,-310.6,-4707.35,-313,-4763.45,-315.4,-4819.45,-317.8,-4875.45,-320.2,-4931.45,-322.6,-4987.5,-325,-5043.45,-327.35,-5099.5,-329.75,-5155.5,-332.05,-5211.55,-334.3,-5267.55,-336.55,-5323.55,-338.5,-5379.6,-339.45,-5411.95,-343.65,-5444.3,-347.9,-5476.75,-352.15,-5509.15,-356.4,-5541.5,-360.65,-5573.9,-364.9,-5606.25,-369.1,-5638.65,-373.3,-5671.05,-377.5,-5703.4,-381.7,-5735.8,-385.9,-5768.25,-390.1,-5800.6,-394.25,-5833.05,-398.35,-5865.45,-402.5,-5897.8,-406.65,-5930.25,-410.75,-5962.6,-414.9,-5995.05,-418.95,-6027.45,-423.05,-6059.85,-427,-6092.3,-431.05,-6124.7,-435,-6157.15,-438.9,-6189.6,-442.75,-6222.05,-446.6,-6254.5,-450.2,-6287,-453.6,-6319.65,-455.75,-6319.65,-455.75,-6319.65,-455.75,-6319.65,-455.75,-6319.65,-455.75,-6319.65,-455.75,-6319.65,-455.75,-6319.65,-455.75,-6319.65,-455.75,-6319.65,-455.75,-6319.65,-455.75,-6319.65,-455.75,-6319.65,-455.75,-6319.65,-455.75,-6319.65,-455.75,-6319.65,-455.75,-6319.65,-455.75,-6319.65,-455.75,-6319.65,-455.75,-6319.65,-455.75,-6319.65,-455.75,-6319.65,-455.75,-6319.65,-455.75,-6319.65,-455.75,-6319.65,-455.75,-6319.65,-455.75,-6319.65,-455.75,-6319.65,-455.75,-6319.65,-455.75,-6319.65,-455.75,-6319.65,-455.75,-6319.65,-455.75,-6319.65,-455.75,-6319.65,-455.75],scale:[1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.3,1.309,1.309,1.317,1.317,1.326,1.326,1.334,1.334,1.343,1.343,1.351,1.351,1.36,1.36,1.369,1.369,1.377,1.377,1.386,1.386,1.394,1.394,1.403,1.403,1.411,1.411,1.42,1.42,1.429,1.429,1.437,1.437,1.446,1.446,1.454,1.454,1.463,1.463,1.471,1.471,1.48,1.48,1.489,1.489,1.497,1.497,1.506,1.506,1.514,1.514,1.523,1.523,1.531,1.531,1.54,1.54,1.549,1.549,1.557,1.557,1.566,1.566,1.574,1.574,1.583,1.583,1.591,1.591,1.6,1.6,1.607,1.607,1.614,1.614,1.621,1.621,1.628,1.628,1.634,1.634,1.641,1.641,1.648,1.648,1.655,1.655,1.662,1.662,1.669,1.669,1.676,1.676,1.683,1.683,1.69,1.69,1.697,1.697,1.703,1.703,1.71,1.71,1.717,1.717,1.724,1.724,1.731,1.731,1.738,1.738,1.745,1.745,1.752,1.752,1.759,1.759,1.766,1.766,1.772,1.772,1.779,1.779,1.786,1.786,1.793,1.793,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8,1.8]},mc5:{view:"top_flair.png",isImage:!1,depth:5,startFrame:0,endFrame:265,position:[648,-228,639.35,-231.7,629.75,-233.9,619.75,-235.35,609.5,-236.35,599.1,-237,588.6,-237.4,577.95,-237.6,567.2,-237.65,556.4,-237.5,545.6,-237.25,534.7,-236.9,523.75,-236.4,512.8,-235.8,501.8,-235.1,490.8,-234.3,479.8,-233.45,468.75,-232.45,457.65,-231.4,446.55,-230.25,435.45,-229.05,424.3,-227.75,413.2,-226.35,402,-224.85,390.95,-223.3,379.75,-221.65,368.6,-219.9,357.45,-218.1,346.3,-216.15,334.05,-216.4,321.8,-216.45,309.55,-216.5,297.3,-216.4,285.1,-216.15,272.8,-215.75,260.6,-215.3,248.4,-214.65,236.15,-213.8,224,-212.85,211.85,-211.6,199.7,-210.2,187.6,-208.4,175.55,-206.4,163.55,-204,151.65,-201.05,139.7,-197.6,128,-193.3,114.05,-190.2,100.15,-187.15,86.2,-184.35,72.25,-181.75,58.2,-179.25,44.25,-176.95,30.25,-174.8,16.2,-172.8,2.15,-170.95,-11.9,-169.3,-26,-167.8,-40.1,-166.5,-54.2,-165.3,-68.3,-164.3,-82.4,-163.4,-96.6,-162.75,-110.75,-162.25,-124.95,-161.95,-139.2,-161.75,-153.4,-161.75,-167.7,-161.9,-181.95,-162.2,-196.2,-162.65,-210.5,-163.3,-224.8,-164.15,-239.1,-165.1,-253.5,-166.2,-267.95,-167.5,-293.15,-167.1,-319,-166.75,-345.4,-166.4,-372.3,-166.05,-399.8,-165.8,-428,-165.5,-456.9,-165.3,-486.7,-165.1,-517.6,-164.95,-549.95,-164.85,-584.3,-164.9,-621.75,-165.05,-665.05,-165.45,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5,-743.95,-167.5],scale:[1,1,.992,.992,.985,.985,.977,.977,.97,.97,.962,.962,.955,.955,.947,.947,.94,.94,.932,.932,.925,.925,.917,.917,.91,.91,.902,.902,.895,.895,.887,.887,.88,.88,.872,.872,.865,.865,.857,.857,.85,.85,.842,.842,.835,.835,.827,.827,.82,.82,.813,.813,.805,.805,.797,.797,.79,.79,.794,.794,.797,.797,.801,.801,.805,.805,.808,.808,.812,.812,.816,.816,.82,.82,.823,.823,.827,.827,.831,.831,.834,.834,.838,.838,.842,.842,.845,.845,.849,.849,.853,.853,.857,.857,.86,.86,.864,.864,.868,.868,.871,.871,.875,.875,.879,.879,.882,.882,.886,.886,.89,.89,.893,.893,.897,.897,.901,.901,.905,.905,.908,.908,.912,.912,.916,.916,.919,.919,.923,.923,.927,.927,.93,.93,.934,.934,.938,.938,.942,.942,.945,.945,.949,.949,.953,.953,.956,.956,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96,.96]},mc6:{view:"foreground",isImage:!0,depth:6,startFrame:0,endFrame:265,position:[1,495.65,-7.35,493.8,-15.95,491.85,-24.6,490.05,-33.35,488.6,-42.05,487.5,-50.75,486.6,-59.45,486.1,-68.2,485.8,-76.9,485.75,-85.6,486.05,-94.35,486.5,-103.1,487.25,-111.9,488.25,-120.6,489.4,-129.35,490.85,-138.05,492.55,-146.85,494.45,-155.55,496.6,-164.3,498.95,-173.05,501.5,-181.8,504.3,-190.6,507.3,-199.3,510.5,-218.8,510.7,-238.3,510.4,-257.75,509.7,-277.2,508.75,-296.7,507.45,-316.2,505.9,-335.65,504.15,-355.1,502.2,-374.6,500.05,-394.05,497.85,-413.5,495.5,-433,493,-452.45,490.55,-471.95,487.95,-491.45,485.3,-510.9,482.75,-530.4,480.15,-549.9,477.6,-569.4,475.1,-588.8,472.55,-608.3,470.1,-627.7,467.8,-647.2,465.55,-666.7,463.4,-686.15,461.3,-705.65,459.4,-725.1,457.65,-744.55,455.9,-764.05,454.4,-783.55,453.1,-803,451.9,-822.5,450.85,-841.95,450.05,-861.45,449.45,-880.9,449,-900.3,448.8,-919.8,448.75,-939.25,448.95,-958.75,449.45,-978.2,449.95,-997.7,450.55,-1017.1,451.2,-1036.6,451.85,-1056.05,452.55,-1075.55,453.15,-1095,453.85,-1114.5,454.6,-1133.95,455.3,-1153.45,456,-1172.85,456.8,-1192.3,457.6,-1211.75,458.4,-1231.2,459.2,-1250.7,460,-1270.15,460.8,-1289.65,461.7,-1309.1,462.5,-1328.55,463.4,-1348,464.3,-1367.45,465.2,-1386.9,466.05,-1406.4,467,-1425.85,467.9,-1445.25,468.8,-1464.7,469.75,-1484.15,470.6,-1503.6,471.55,-1523.05,472.55,-1542.5,473.5,-1561.95,474.4,-1581.45,475.4,-1600.9,476.4,-1620.3,477.35,-1639.75,478.3,-1659.2,479.3,-1678.65,480.3,-1698.1,481.3,-1717.55,482.25,-1737,483.25,-1756.45,484.25,-1775.9,485.25,-1795.3,486.2,-1814.75,487.2,-1834.2,488.2,-1853.65,489.2,-1873.1,490.15,-1892.55,491.15,-1911.95,492.15,-1931.4,493.15,-1950.8,494.05,-1970.25,495.1,-1989.65,496.05,-2009.1,497,-2028.55,498,-2047.95,498.9,-2067.4,499.85,-2086.8,500.85,-2106.25,501.8,-2125.65,502.7,-2145.1,503.65,-2164.55,504.55,-2184,505.5,-2203.4,506.4,-2222.85,507.3,-2242.2,508.2,-2261.6,509.1,-2281.05,509.95,-2300.45,510.8,-2319.9,511.7,-2339.3,512.55,-2358.75,513.35,-2378.15,514.2,-2397.55,515,-2416.95,515.85,-2436.35,516.6,-2455.8,517.35,-2475.2,518.2,-2494.65,518.95,-2514.05,519.65,-2533.4,520.4,-2552.75,521.1,-2572.2,521.8,-2591.6,522.75,-2611,523.9,-2630.4,525.5,-2649.8,527.45,-2669.2,529.65,-2688.55,532,-2708,534.75,-2727.4,537.65,-2746.8,540.75,-2766.15,544,-2785.55,547.4,-2804.9,550.95,-2824.3,554.55,-2843.7,558.15,-2863.05,561.85,-2882.45,565.55,-2901.85,569.25,-2921.2,572.9,-2940.6,576.45,-2960,579.9,-2979.35,583.3,-2998.75,586.45,-3018.05,589.45,-3037.45,592.3,-3056.85,594.9,-3076.15,597.2,-3095.5,599.15,-3114.9,600.85,-3134.25,602.15,-3153.6,603.15,-3172.95,603.8,-3192.3,604.5,-3211.65,605.3,-3231,606,-3250.4,606.7,-3269.75,607.45,-3289.05,608.2,-3308.4,608.9,-3327.75,609.65,-3347.05,610.35,-3366.35,611.1,-3385.7,611.85,-3405.05,612.55,-3424.4,613.3,-3443.7,614.05,-3463,614.8,-3482.35,615.5,-3501.65,616.25,-3521,617,-3540.3,617.75,-3559.6,618.5,-3578.95,619.2,-3598.25,619.95,-3617.45,620.7,-3636.75,621.45,-3656.05,622.2,-3675.35,622.95,-3694.65,623.65,-3713.95,624.45,-3733.25,625.15,-3752.5,625.9,-3771.8,626.7,-3791.05,627.45,-3810.35,628.1,-3829.6,628.9,-3848.85,629.65,-3868.15,630.45,-3887.35,631.15,-3906.55,631.9,-3925.8,632.7,-3945.05,633.45,-3964.3,634.15,-3983.55,634.95,-4002.75,635.7,-4022,636.45,-4041.2,637.25,-4060.4,637.95,-4079.6,638.7,-4098.8,639.5,-4118,640.3,-4137.2,641,-4156.35,641.8,-4175.5,642.55,-4194.7,643.3,-4213.8,644.05,-4232.95,644.8,-4252.1,645.6,-4271.25,646.4,-4290.4,647.1,-4309.5,647.85,-4328.65,648.7,-4347.7,649.45,-4366.8,650.15,-4385.85,650.95,-4404.95,651.75,-4423.95,652.5,-4443,653.25,-4462,654.05,-4481.05,654.8,-4500,655.6,-4519,656.35,-4537.95,657.15,-4556.9,657.9,-4575.8,658.7,-4594.7,659.45,-4613.6,660.2,-4632.45,661,-4651.25,661.8,-4670,662.6,-4688.7,663.3,-4707.4,664.1,-4726.05,664.9,-4744.6,665.65,-4763.15,666.4,-4781.55,667.2,-4799.85,667.95,-4818,668.75,-4835.95,669.5,-4853.6,670.25],scale:[2,2,1.987,1.987,1.974,1.974,1.961,1.961,1.948,1.948,1.935,1.935,1.922,1.922,1.909,1.909,1.896,1.896,1.883,1.883,1.87,1.87,1.857,1.857,1.843,1.843,1.83,1.83,1.817,1.817,1.804,1.804,1.791,1.791,1.778,1.778,1.765,1.765,1.752,1.752,1.739,1.739,1.726,1.726,1.713,1.713,1.7,1.7,1.707,1.707,1.714,1.714,1.721,1.721,1.729,1.729,1.736,1.736,1.743,1.743,1.75,1.75,1.757,1.757,1.764,1.764,1.771,1.771,1.778,1.778,1.786,1.786,1.793,1.793,1.8,1.8,1.807,1.807,1.814,1.814,1.821,1.821,1.828,1.828,1.836,1.836,1.843,1.843,1.85,1.85,1.857,1.857,1.864,1.864,1.871,1.871,1.878,1.878,1.885,1.885,1.893,1.893,1.9,1.9,1.907,1.907,1.914,1.914,1.921,1.921,1.928,1.928,1.935,1.935,1.942,1.942,1.95,1.95,1.957,1.957,1.964,1.964,1.971,1.971,1.978,1.978,1.985,1.985,1.992,1.992,2,2,2.007,2.007,2.014,2.014,2.021,2.021,2.028,2.028,2.035,2.035,2.042,2.042,2.049,2.049,2.057,2.057,2.064,2.064,2.071,2.071,2.078,2.078,2.085,2.085,2.092,2.092,2.099,2.099,2.106,2.106,2.114,2.114,2.121,2.121,2.128,2.128,2.135,2.135,2.142,2.142,2.149,2.149,2.156,2.156,2.164,2.164,2.171,2.171,2.178,2.178,2.185,2.185,2.192,2.192,2.199,2.199,2.206,2.206,2.213,2.213,2.221,2.221,2.228,2.228,2.235,2.235,2.242,2.242,2.249,2.249,2.256,2.256,2.263,2.263,2.271,2.271,2.278,2.278,2.285,2.285,2.292,2.292,2.299,2.299,2.306,2.306,2.313,2.313,2.32,2.32,2.328,2.328,2.335,2.335,2.342,2.342,2.349,2.349,2.356,2.356,2.363,2.363,2.37,2.37,2.377,2.377,2.385,2.385,2.392,2.392,2.399,2.399,2.406,2.406,2.413,2.413,2.42,2.42,2.427,2.427,2.435,2.435,2.442,2.442,2.449,2.449,2.456,2.456,2.463,2.463,2.47,2.47,2.477,2.477,2.484,2.484,2.492,2.492,2.499,2.499,2.506,2.506,2.513,2.513,2.52,2.52,2.527,2.527,2.534,2.534,2.541,2.541,2.549,2.549,2.556,2.556,2.563,2.563,2.57,2.57,2.577,2.577,2.584,2.584,2.591,2.591,2.599,2.599,2.606,2.606,2.613,2.613,2.62,2.62,2.627,2.627,2.634,2.634,2.641,2.641,2.648,2.648,2.656,2.656,2.663,2.663,2.67,2.67,2.677,2.677,2.684,2.684,2.691,2.691,2.698,2.698,2.705,2.705,2.713,2.713,2.72,2.72,2.727,2.727,2.734,2.734,2.741,2.741,2.748,2.748,2.755,2.755,2.763,2.763,2.77,2.77,2.777,2.777,2.784,2.784,2.791,2.791,2.798,2.798,2.805,2.805,2.812,2.812,2.82,2.82,2.827,2.827,2.834,2.834,2.841,2.841,2.848,2.848,2.855,2.855,2.862,2.862,2.869,2.869,2.877,2.877,2.884,2.884,2.891,2.891,2.898,2.898,2.905,2.905,2.912,2.912,2.919,2.919,2.927,2.927,2.934,2.934,2.941,2.941,2.948,2.948,2.955,2.955,2.962,2.962,2.969,2.969,2.976,2.976,2.984,2.984,2.991,2.991,2.998,2.998,3.005,3.005,3.012,3.012,3.019,3.019,3.026,3.026,3.034,3.034,3.041,3.041,3.048,3.048,3.055,3.055,3.062,3.062,3.069,3.069,3.076,3.076,3.083,3.083,3.091,3.091,3.098,3.098,3.105,3.105,3.112,3.112,3.119,3.119,3.126,3.126,3.133,3.133,3.14,3.14,3.148,3.148,3.155,3.155,3.162,3.162,3.169,3.169,3.176,3.176,3.183,3.183,3.19,3.19,3.198,3.198,3.205,3.205,3.212,3.212,3.219,3.219,3.226,3.226,3.233,3.233,3.24,3.24,3.247,3.247,3.255,3.255,3.262,3.262,3.269,3.269,3.276,3.276,3.283,3.283,3.29,3.29,3.297,3.297,3.304,3.304,3.312,3.312,3.319,3.319,3.326,3.326,3.333,3.333,3.34,3.34,3.347,3.347,3.354,3.354,3.362,3.362,3.369,3.369,3.376,3.376,3.383,3.383,3.39,3.39,3.397,3.397,3.404,3.404,3.411,3.411,3.419,3.419]}}}),define("com/arcade/app/elements/arcade/Wires",["require","exports","module","PIXI"],function(t,e,i){var r=t("PIXI"),n=function(){r.Container.call(this),this.hitArea=new r.Rectangle(0,0,0,0);var t=new r.Texture.fromFrame("skinny_cable.png"),e=new r.Texture.fromFrame("basic_cable.png"),i=new r.Texture.fromFrame("wire_cable.png");this.instance=new r.Sprite(t),this.setTransform(this.instance,-256.1,60,.848,.508),this.instance_1=new r.Sprite(e),this.setTransform(this.instance_1,3829.7,72.1,.755,1),this.instance_2=new r.Sprite(t),this.setTransform(this.instance_2,3063.1,46,1,.446),this.instance_3=new r.Sprite(t),this.setTransform(this.instance_3,3411.2,46,1,.446),this.instance_4=new r.Sprite(e),this.setTransform(this.instance_4,2623.4,72.1,1.305,.823),this.instance_5=new r.Sprite(e),this.setTransform(this.instance_5,2153.6,72.1,.631,1),this.instance_6=new r.Sprite(i),this.setTransform(this.instance_6,2521,72.1,.738,.738),this.instance_7=new r.Sprite(t),this.setTransform(this.instance_7,2231,0,1,.844),this.instance_8=new r.Sprite(t),this.setTransform(this.instance_8,1840.4,60,.355,.508),this.instance_9=new r.Sprite(e),this.setTransform(this.instance_9,2377.9,72.1),this.instance_10=new r.Sprite(t),this.setTransform(this.instance_10,1868.4,60,1,.446),this.instance_11=new r.Sprite(t),this.setTransform(this.instance_11,840.2,60,1,.446),this.instance_12=new r.Sprite(t),this.setTransform(this.instance_12,1188.3,60,1,.446),this.instance_13=new r.Sprite(i),this.setTransform(this.instance_13,1476.4,86.1,.731,.607),this.instance_14=new r.Sprite(e),this.setTransform(this.instance_14,400.4,86.1,1.305,.823),this.instance_15=new r.Sprite(e),this.setTransform(this.instance_15,1060,86.1,.462,.823),this.instance_16=new r.Sprite(i),this.setTransform(this.instance_16,298.1,86.1,.738,.738),this.instance_17=new r.Sprite(t),this.setTransform(this.instance_17,8,14,1,.844),this.addChild(this.instance),this.addChild(this.instance_1),this.addChild(this.instance_2),this.addChild(this.instance_3),this.addChild(this.instance_4),this.addChild(this.instance_5),this.addChild(this.instance_6),this.addChild(this.instance_7),this.addChild(this.instance_8),this.addChild(this.instance_9),this.addChild(this.instance_10),this.addChild(this.instance_11),this.addChild(this.instance_12),this.addChild(this.instance_13),this.addChild(this.instance_14),this.addChild(this.instance_15),this.addChild(this.instance_16),this.addChild(this.instance_17)};n.prototype=Object.create(r.Container.prototype),n.prototype.setTransform=function(t,e,i,r,n){t.position.set(e,i),t.scale.set(r||1,n||1)},i.exports=n}),define("com/arcade/app/elements/arcade/Light",["require","exports","module","PIXI"],function(t,e,i){var r=t("PIXI"),n=function(t){r.Container.call(this),this.turnOnDuration=1,this.turnOffDuration=.1,this._isOn=!0,this._time=0,this.switchable=!1,this.dark=new r.Sprite.fromFrame("ui_bg_darken.png"),this.dark.tint=3355443,this.dark.scale.set(4),this.dark.anchor.set(.5),this.dark.blendMode=r.isWebGL?r.BLEND_MODES.MULTIPLY:r.BLEND_MODES.NORMAL,this.dark.hitArea=new r.Rectangle(0,0,0,0),r.isWebGL?this.addChild(this.dark):this.dark.visible=!1,this.light=new r.Sprite(t),this.light.anchor.set(.5),this.light.blendMode=r.BLEND_MODES.ADD,this.addChild(this.light)};n.prototype=Object.create(r.Container.prototype),n.prototype.constructor=n,n.prototype.update=function(){return this.dark.alpha=1-this.light.alpha,this._isOn?(this._time+=.005,void(this.light.alpha=.95+.05*Math.cos(10*this._time))):void(this._time=0)},n.prototype.toggle=function(){this._isOn?this.turnOff():this.turnOn()},n.prototype.turnOn=function(t){t=t||this.turnOnDuration,TweenMax.to(this.light,t,{alpha:1,onComplete:function(){this._isOn=!0},onCompleteScope:this,ease:Power2.easeOut})},n.prototype.turnOff=function(t){this._isOn=!1,t=t||this.turnOffDuration,TweenLite.to(this.light,t,{alpha:0,ease:Power2.easeOut})},Object.defineProperties(n.prototype,{switchable:{get:function(){return this._switchable},set:function(t){this._switchable=t,this.interactive=this._switchable,this.buttonMode=this._switchable,this._switchable?(this.on("click",this._toggleBinded=this.toggle.bind(this)),this.on("tap",this._toggleBinded=this.toggle.bind(this))):(this.off("click",this._toggleBinded),this.off("tap",this._toggleBinded))}}}),i.exports=n}),define("com/arcade/app/elements/arcade/BlinkingLight",["require","exports","module","./Light"],function(t,e,i){var r=t("./Light"),n=function(t){r.call(this,t),this.turnOnDuration=.8,this.timeline=new TimelineMax({onComplete:function(){this._isOn=!0},onCompleteScope:this})};n.prototype=Object.create(r.prototype),n.prototype.constructor=n,n.prototype.update=function(){r.prototype.update.call(this),this._isOn&&(this.light.alpha+=.1*(.8+.2*Math.random()-this.light.alpha))},n.prototype.turnOn=function(t){t=t||this.turnOnDuration,this.timeline.kill();for(var e=0;e<5;e++)this.timeline.to(this.light,.1*Math.random(),{alpha:Math.random(),ease:Power2.easeInOut});this.timeline.to(this.light,.4,{alpha:1,ease:Power2.easeOut}),this.timeline.duration(t)},n.prototype.turnOff=function(t){this.timeline.kill(),t=t||this.turnOffDuration,r.prototype.turnOff.call(this,t)},i.exports=n}),define("com/arcade/app/elements/arcade/LightSaber",["require","exports","module","PIXI","./BlinkingLight","fido/physics/Rope","fido/sound/SoundBridge"],function(t,e,i){var r=t("PIXI"),n=t("./BlinkingLight"),s=(t("fido/physics/Rope"),t("fido/sound/SoundBridge")),o=function(t,e,i){n.call(this,t),this.world=e,this.color=i,this.hitArea=new r.Rectangle(.25*-this.light.width,.5*-this.light.height,.5*this.light.width,this.light.height),this.interactive=!0,this.buttonMode=!0,this.didMove=!1,this.displacementSprite=new r.Sprite.fromImage(ASSET_URL+"img/game/arcade/lightsaber-wave-map.jpg"),this.displacementSprite.hitArea=new r.Rectangle(0,0,0,0),this.displacementSprite.anchor.set(.5),this.displacementSprite.scale.set(0),this.colorSprite=new r.Sprite.fromImage(ASSET_URL+"img/game/arcade/ui_bg_lighten.png"),this.colorSprite.hitArea=new r.Rectangle(0,0,0,0),this.colorSprite.blendMode=r.BLEND_MODES.MULTIPLY,this.colorSprite.anchor.set(.5),this.colorSprite.scale.set(0),this.flash=new r.Sprite.fromFrame("ui_bg_darken.png"),this.flash.scale.set(4),this.flash.anchor.set(.5),this.flash.blendMode=r.BLEND_MODES.ADD,this.flash.hitArea=new r.Rectangle(0,0,0,0),this.flash.alpha=0,this.addChild(this.flash),r.isWebGL&&(this.addChild(this.displacementSprite),this.addChild(this.colorSprite),this.displacementFilter=new r.filters.DisplacementFilter(this.displacementSprite)),this.effectTimeline=new TimelineMax,this.effectTimeline.fromTo(this.displacementSprite.scale,3,{x:0,y:0},{x:100,y:100,onComplete:function(){this.world.filters=null},onCompleteScope:this,ease:Linear.easeOut}),this.effectTimeline.fromTo(this.colorSprite.scale,.4,{x:0,y:0},{x:20,y:20,ease:Expo.easeOut},.1),this.effectTimeline.fromTo(this.colorSprite,2,{alpha:1},{alpha:0},1),this.on("click",this.onClick.bind(this)),this.on("tap",this.onClick.bind(this))};o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.onClick=function(){this.didMove||(s.sfx.play("lightsaber_ignite"),r.isWebGL&&(this.world.filters=[this.displacementFilter]),TweenMax.to(this.flash,.1,{alpha:1}),TweenMax.to(this.flash,.6,{alpha:0,delay:.1}),this.colorSprite.tint=this.color,this.effectTimeline.restart())},i.exports=o}),define("com/arcade/app/elements/arcade/HangedItem",["require","exports","module","PIXI","fido/physics/Rope"],function(t,e,i){var r=t("PIXI"),n=t("fido/physics/Rope"),s=function(t){r.Container.call(this),this.item=new r.Sprite(t),this.item.anchor.set(.5),this.addChild(this.item),this.rope=new n({texture:new r.Texture.fromImage(ASSET_URL+"img/game/hangar/rope.png"),startX:0,startY:0,joints:5,iterations:8,gravity:.9,friction:.05,fallBackLineColor:15651723,fallBackLineWidth:3}),this.rope.build(300),this.rope.update(),this.addChildAt(this.rope,0)};s.prototype=Object.create(r.Container.prototype),s.prototype.constructor=s,s.prototype.update=function(){this.rope.update();var t=this.rope.getAngle(this.rope.pX[this.rope.joints-1],this.rope.pY[this.rope.joints-1],this.rope.pX[this.rope.joints],this.rope.pY[this.rope.joints])+.5*Math.PI;this.item.rotation+=.1*(t-this.item.rotation),this.item.x=this.rope.pX[this.rope.joints],this.item.y=this.rope.pY[this.rope.joints]},i.exports=s}),define("com/arcade/app/elements/arcade/HangedToy",["require","exports","module","PIXI","./HangedItem","fido/sound/SoundBridge"],function(t,e,i){var r=t("PIXI"),n=t("./HangedItem"),s=t("fido/sound/SoundBridge"),o=function(t,e,i){this.texture=new r.Texture.fromFrame(t),this.shootTexture=new r.Texture.fromFrame(e),this.isShooting=!0,n.call(this,this.texture),i&&(this.item.interactive=!0,this.item.buttonMode=!0,this.item.mousedown=this.item.touchstart=function(){s.sfx.play(i)})};o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.update=function(){n.prototype.update.call(this),Math.random()<.2&&this.isShooting?this.item._texture=this.shootTexture:this.item._texture=this.texture},i.exports=o}),define("com/arcade/app/elements/arcade/PinkButton",["require","exports","module","PIXI","fido/ui/buttons/AbstractButton","fido/system/Ticker","fido/sound/SoundBridge"],function(t,e,i){var r=t("PIXI"),n=t("fido/ui/buttons/AbstractButton"),s=t("fido/system/Ticker"),o=t("fido/sound/SoundBridge"),a=function(){n.call(this),this.sprite=new r.Sprite.fromFrame("wall_button_up.png"),this.sprite.anchor.set(.5),this.addChild(this.sprite),this.glow=new r.Sprite.fromFrame("wall_button_glow.png"),this.glow.anchor.set(.5),this.glow.alpha=.6,this.glow.blendMode=r.BLEND_MODES.ADD,this.glow.position.set(-6,-20),this.addChild(this.glow);var t=new r.Sprite;this.addChild(t),this.downTexture=r.Texture.fromFrame("wall_button_press.png"),this.upTexture=r.Texture.fromFrame("wall_button_up.png"),this.count=0,this.glowScale=1,s.instance.add(this.update,this)};a.prototype=Object.create(n.prototype),a.prototype.down=function(){this.sprite.texture=this.downTexture,o.sfx.playGroup("random")},a.prototype.up=function(){this.sprite.texture=this.upTexture},a.prototype.hover=function(){},a.prototype.out=function(){},a.prototype.update=function(){this.count+=.05,this.glow.alpha=.7+Math.cos(this.count)*Math.sin(this.count)*.3,this.glow.scale.x=this.glowScale+.2*Math.abs(Math.cos(.1*this.count)*Math.sin(.1*this.count)),this.glow.scale.y=this.glowScale+.2*Math.abs(Math.cos(.1*this.count)*Math.sin(.1*this.count))};var h=function(){this.context=new AudioContext;var t=(!!AudioContext,this.context),e=2*t.sampleRate;noiseBuffer=t.createBuffer(1,e,t.sampleRate),output=noiseBuffer.getChannelData(0);for(var i=0;i<e;i++)output[i]=2*Math.random()-1};h.prototype.play=function(){this.whiteNoise=this.context.createBufferSource(),this.whiteNoise.buffer=noiseBuffer,this.whiteNoise.loop=!1,this.whiteNoise.connect(this.context.destination),this.whiteNoise.start(0)},h.prototype.stop=function(){this.whiteNoise.stop()},i.exports=a}),define("com/arcade/app/elements/arcade/ArcadeTicker",["require","exports","module","PIXI","fido/loader/Cache"],function(t,e,i){function r(){var t={font:"42px "+window.MAIN_FONT,fill:"#acdef7"};n.Text.call(this,"",t),this.anchor.y=.5,this.cachedWidth=0,this.setText("hello")}var n=t("PIXI"),s=t("fido/loader/Cache"),o=function(){n.Container.call(this),this.objPool=[],this.activeObjects=[],this.hitArea=new n.Rectangle(0,0,0,0),this.max=0;var t=new n.Sprite.fromFrame("ticker_rear_bg.png");this.addChild(t),this.middle=.5*t.height*this.scale.y-6,this.container=new n.Container,this.addChild(this.container);var e=new n.Sprite.fromFrame("ticker_top_frame.png");this.addChild(e);var i=new n.Sprite.fromFrame("ticker_text_add_glow.png");i.anchor.x=.5,i.x=.5*e.width,i.blendMode=n.isWebGL?n.BLEND_MODES.ADD:0,this.addChild(i),this.sentences=[" "],this.max=e.width-25,this.masker=(new n.Graphics).beginFill(16773120,.4).drawRect(3,0,e.width-7,e.height),this.container.mask=this.masker,this.container.addChild(this.masker),this.queueIndex=0,this.flipped="true"===s.getJson("config").FLIP_LANGUAGE};o.prototype=Object.create(n.Container.prototype),o.prototype.start=function(t){this.active=!0,this.sentences=t||["Nothing to see here"],this.createText(0)},o.prototype.createText=function(t){var e=this.objPool.pop();this.queueIndex++,e||(e=new r),this.activeObjects.push(e),e.setText(this.sentences[this.queueIndex%this.sentences.length]),e.x=t,this.flipped&&(e.x-=e.width),e.y=this.middle,this.container.addChild(e)},o.prototype.update=function(){if(this.active)if(this.flipped){for(var t=0;t<this.activeObjects.length;t++)this.activeObjects[t].x+=2;var e=this.activeObjects[0];e&&e.x>=this.max&&(e.mask=null,this.objPool.push(e),this.container.removeChild(e),this.activeObjects.splice(0,1));var e=this.activeObjects[this.activeObjects.length-1];e.x>0&&this.createText(e.x-130)}else{for(var t=0;t<this.activeObjects.length;t++)this.activeObjects[t].x-=2;var e=this.activeObjects[0];e&&e.x<=-e.cachedWidth&&(e.mask=null,this.objPool.push(e),this.container.removeChild(e),this.activeObjects.splice(0,1));var e=this.activeObjects[this.activeObjects.length-1];e.x+e.width<this.max&&this.createText(e.x+e.width+130)}},r.prototype=Object.create(n.Text.prototype),r.prototype.setText=function(t){this.text=t.toUpperCase(),this.cachedWidth=this.width},i.exports=o}),define("fido/utils/Math2",["require","exports","module"],function(t,e,i){var r={};r.TWO_PI=2*Math.PI,r.random=function(t,e){return t=t||0,e=void 0===e?1:e,t+Math.random()*(e-t)},r.randomInt=function(t,e){return t+Math.random()*(e-t)|0},r.randomSeed=function(t,e,i){min=t,max=e,i=i||1,i=(9301*i+49297)%233280;var r=i/233280;return min+r*(max-min)},r.randomChance=function(t,e){return r.randomSeed(0,1,e)>t},r.cap=function(t,e,i){return t<e?e:t>i?i:t},r.sign=function(t){return t<0?-1:t>0?1:0},r.randomChoice=function(t,e){return Math.random()<.5?t:e},r.map=function(t,e,i,r,n){return(n-r)*((t-e)/(i-e))+r},r.smallestAngle=function(t,e){t%=2*Math.PI,t<0&&(t+=2*Math.PI);var i=e-t,r=e+2*Math.PI-t,n=e-2*Math.PI-t,s=Math.abs(i),o=Math.abs(r),a=Math.abs(n),h=i;return o<s&&o<a?h=r:a<s&&a<o&&(h=n),h},r.wrap=function(t,e,i){var r=i-e;return t-=e,t%=r,t<0&&(t+=r),t+=e},i.exports=r}),define("fido/effects/GlitchEffect",["require","exports","module","PIXI","fido/system/Ticker","fido/utils/Math2","fido/physics/DoubleSpring"],function(t,e,i){var r=t("PIXI"),n=(t("fido/system/Ticker"),
t("fido/utils/Math2"),t("fido/physics/DoubleSpring")),s=function(){if(r.Container.call(this),r.isWebGL){var t=new r.Sprite.fromImage(ASSET_URL+"img/game/glitch.png");t.scale.set(1.12),this.displacementSprite=t,this.addChildAt(t,0),this.displacementFilter=new r.filters.DisplacementFilter(t),this.displacementFilter.scale.x=1,this.displacementFilter.scale.y=.5,this.filters=[this.displacementFilter],this.count=0,this.spring=new n,this.count2=0}this.flickering=!0};s.prototype=Object.create(r.Container.prototype),s.prototype.toggle=function(t){t&&r.isWebGL?this.filters=[this.displacementFilter]:t?this.flickering=!0:(this.filters=null,this.flickering=!1)},s.prototype.updateTransform=function(){this.visible&&(r.isWebGL&&(this.spring.update(),this.count++,this.count>200&&(this.spring.dx=.75*(5+10*Math.random()),this.count=200*Math.random(),this.spring.dy=5*Math.random()),this.displacementFilter.scale.x=this.spring.x*this.worldTransform.a,this.displacementFilter.scale.y=this.spring.y*this.worldTransform.a,this.displacementSprite.scale.y=1+1*Math.sin(this.count2)),this.count2+=.1,this.flickering&&(this.alpha=.9+.1*Math.random()),r.Container.prototype.updateTransform.call(this))},s.prototype.glitch=function(){this.count=0,r.isWebGL&&(this.spring.dx=15+30*Math.random(),this.spring.dy=5+5*Math.random())},s.prototype.resize=function(t,e){r.isWebGL&&(this.displacementSprite.width=t,this.displacementSprite.height=e)},i.exports=s}),define("com/arcade/app/elements/arcade/AdvertisingMonitor",["require","exports","module","PIXI","fido/loader/Cache","fido/system/Device","starwars/filters/GlitchFilter","fido/effects/GlitchEffect","fido/ui/PixiTrackpad","starwars/buttons/GoldenButton","fido/app/ScreenManager"],function(t,e,i){var r=t("PIXI"),n=t("fido/loader/Cache"),s=t("fido/system/Device"),o=t("starwars/filters/GlitchFilter"),a=t("fido/effects/GlitchEffect"),h=(t("fido/ui/PixiTrackpad"),t("starwars/buttons/GoldenButton"),t("fido/app/ScreenManager")),l=function(t){r.Container.call(this),this.app=t,this.data=n.getJson("commsscreen"),this.currentUrl="",this.currentScreen=0,this.currentData=this.data.screens[this.currentScreen],this.frame=new r.Sprite.fromFrame("screen_frame.png"),this.frame.y=25,this.frame.anchor.set(.5);var e=this.frame.width-100,i=this.frame.height-150;this.didMove=!1,this.imageContainer=new r.Container,this.imageContainer.interactive=!0,this.addChild(this.imageContainer),this.background=(new r.Graphics).beginFill(0).drawRect(.5*-e,.5*-i,e,i),this.imageContainer.addChild(this.background),this.screenManager=new h,this.imageContainer.addChild(this.screenManager.container),this.screenManager.container.position.set(-500,-250);var l=(new r.Graphics).beginFill(0).drawRect(.5*-e,.5*-i,e,i);this.addChild(l),this.imageContainer.mask=l,arcadeLogo=r.Sprite.fromFrame("star_wars_arcade_logo.png"),arcadeLogo.anchor.set(.5),arcadeLogo.alpha=.5;var c=/img\//.test(this.currentData.IMAGE_URL)?"fromImage":"fromFrame";this.image=new r.Sprite[c](this.currentData.IMAGE_URL),this.image.anchor.set(.5),r.isWebGL&&s.instance.desktop&&(this.glitchEffect=new a,this.glitchEffect.flickering=!1,this.glitchEffect.displacementSprite.position.y=-250,this.glitchEffect.resize(1e3,500),this.addChild(this.glitchEffect),this.glitchEffect.addChild(this.imageContainer),this.glitchFilter=new o,this.glitchFilter.uniforms.flashIntensity.value=0,this.glitchFilter.uniforms.horizontalLinesIntensity.value=.2),this.title=new r.Text(this.currentData.TITLE,{font:"34px "+window.MAIN_FONT,fill:"white",align:"left",wordWrap:!0,wordWrapWidth:.4*e}),this.title.anchor.set(.5,0),this.title.x=.25*e,this.title.y=.4*-i,this.addChild(this.title),this.text=new r.Text(this.currentData.TEXT,{font:"24px "+window.SECENDARY_FONT,fill:"white",align:"left",wordWrap:!0,wordWrapWidth:.4*e}),this.text.anchor.set(.5,0),this.text.x=.25*e,this.text.y=.35*-i+this.title.height,this.addChild(this.text),this.addChild(this.frame),this.count=0,this.frequency=10,this.frame.interactive=!0,this.frame.click=this.frame.tap=this.goToLink.bind(this),this.frame.buttonMode=!0,this.leftArrow=new r.Sprite.fromFrame("comms_ui_left.png"),this.leftArrow.anchor.set(.5),this.leftArrow.position.y=100,this.leftArrow.scale.set(.8),this.leftArrow.interactive=!0,this.leftArrow.buttonMode=!0,this.leftArrow.position.x=-this.imageContainer.width/2+50,this.leftArrow.mouseover=this.scaleButton.bind(this,this.leftArrow,1),this.leftArrow.mouseout=this.scaleButton.bind(this,this.leftArrow,.8),this.leftArrow.click=this.leftArrow.tap=this.prevScreen.bind(this),this.addChild(this.leftArrow),this.rightArrow=new r.Sprite.fromFrame("comms_ui_right.png"),this.rightArrow.anchor.set(.5),this.rightArrow.position.y=100,this.rightArrow.scale.set(.8),this.rightArrow.interactive=!0,this.rightArrow.buttonMode=!0,this.rightArrow.position.x=this.imageContainer.width/2-50,this.rightArrow.mouseover=this.scaleButton.bind(this,this.rightArrow,1),this.rightArrow.mouseout=this.scaleButton.bind(this,this.rightArrow,.8),this.rightArrow.click=this.rightArrow.tap=this.nextScreen.bind(this),this.addChild(this.rightArrow),this.buttonMode=!0,this.count=0,this.imagePool=[new r.Sprite,new r.Sprite],this.nextScreen()};l.prototype=Object.create(r.Container.prototype),l.prototype.constructor=l,l.prototype.scaleButton=function(t,e){TweenLite.killTweensOf(t.scale),TweenLite.to(t.scale,.4,{x:e,y:e,ease:Back.easeOut.config(1.1)})},l.prototype.goToLink=function(){this.app.arcadeScreen.trackpad.didMove||this.currentUrl&&(this.app.overlayManager.screens.warningPopup.internalLink=this.internalLink,this.app.overlayManager.screens.warningPopup.url=this.currentUrl,this.app.overlayManager.show("warningPopup"))},l.prototype.update=function(){this.count++,this.count>=60*this.frequency&&this.changeScreen(1)},l.prototype.prevScreen=function(){this.changeScreen(-1)},l.prototype.nextScreen=function(){this.changeScreen(1)},l.prototype.changeScreen=function(t){this.count=0,this.currentScreen+=t,this.currentScreen<0?this.currentScreen=this.data.screens.length-1:this.currentScreen>this.data.screens.length-1&&(this.currentScreen=0),this.currentData=this.data.screens[this.currentScreen],this.setData()},l.prototype.setData=function(){TweenLite.killTweensOf(this.image),this.title.text=this.currentData.TITLE,this.text.text=this.currentData.TEXT,this.currentUrl=this.currentData.URL,this.internalLink=this.currentData.INTERNAL;var t=/img\//.test(this.currentData.IMAGE_URL)?"fromImage":"fromFrame",e=new r.Sprite[t](this.currentData.IMAGE_URL,(!0));this.screenManager.gotoScreen(e)},l.prototype.addImage=function(t){this.data.screens.push({TITLE:"",TEXT:"",IMAGE_URL:t})},l.prototype.turnOn=function(){this.glitchFilter,TweenLite.to(this.image,1,{alpha:1})},l.prototype.turnOff=function(){this.imageContainer.filters=null,TweenLite.to(this.image,1,{alpha:0})},i.exports=l}),define("com/arcade/app/elements/arcade/Chopper",["require","exports","module","PIXI","fido/sound/SoundBridge"],function(t,e,i){var r=t("PIXI"),n=t("fido/sound/SoundBridge"),s=function(t,e,i){r.Container.call(this),this.speed=i||1,this.bounds=t,this.direction="right",this.container=new r.Container,this.addChild(this.container),this.shadow=new r.Sprite.fromFrame("chopper_shadow.png"),this.shadow.anchor.set(.5),this.container.addChild(this.shadow),this.sprite=new r.Sprite.fromFrame(e),this.sprite.anchor.set(.5,1),this.container.addChild(this.sprite),this.container.x=this.bounds.x+this.bounds.width*Math.random(),this.container.y=this.bounds.y+this.bounds.height*Math.random(),this.launchMoveAnimation(),this.interactive=!0,this.buttonMode=!0,this.isChopper=!0,this.on("click",this.makeAngry.bind(this)),this.on("tap",this.makeAngry.bind(this))};s.prototype=Object.create(r.Container.prototype),s.prototype.constructor=s,s.prototype.makeAngry=function(){this.isChopper?n.sfx.playGroup("chopper"):n.sfx.play("mouse"),TweenMax.killTweensOf(this.container);for(var t=new TimelineMax({onComplete:function(){this.launchMoveAnimation()},onCompleteScope:this}),e=0;e<6;e++)t.to(this.sprite,.1,{y:(e%2?"+=":"-=")+10,rotation:5===e?0:.1*Math.random()-.05})},s.prototype.launchMoveAnimation=function(){var t;if(this.container.x>this.bounds.x+this.bounds.width-200?this.direction="left":this.container.x<this.bounds.x+200&&(this.direction="right"),"right"===this.direction){var e=Math.max(this.bounds.x,this.container.x);t=e+(this.bounds.x+this.bounds.width-e)*Math.random()}else{var e=Math.max(this.bounds.x,this.container.x);t=this.bounds.x+(e-this.bounds.x)*Math.random()}var i=this.bounds.y+this.bounds.height*Math.random(),r=t-this.container.x;if(Math.abs(r)<200)return void this.launchMoveAnimation();var n=i-this.container.y,s=Math.sqrt(r*r+n*n);TweenMax.to(this.container,s/(200*this.speed),{x:t,y:i,onStart:function(){this.container.scale.x=t<this.container.x?1:-1},onStartScope:this,onComplete:this.launchMoveAnimation,onCompleteScope:this,delay:2*Math.random()/this.speed,ease:Power1.easeInOut})},i.exports=s}),define("text!com/arcade/app/shaders/video-mask.glsl",[],function(){return"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform sampler2D uSamplerMask;\n\nvoid main(void) {\n    vec2 uvs = vTextureCoord.xy;\n    vec4 fragment = texture2D(uSampler, vTextureCoord);\n    vec4 fragmentMask = texture2D(uSamplerMask, vTextureCoord);\n\n    //fragment.rgb += (vec3(1.) - fragment.rgb * .2) * fragment.a;\n    gl_FragColor = fragment * fragmentMask.r ;// * .05;\n}\n"}),define("com/arcade/app/filters/VideoMaskFilter",["require","exports","module","PIXI","text!com/arcade/app/shaders/video-mask.glsl"],function(t,e,i){var r=t("PIXI"),n=t("text!com/arcade/app/shaders/video-mask.glsl"),s=function(t){r.AbstractFilter.call(this,null,n,{uSamplerMask:{type:"sampler2D",value:t}})};s.prototype=Object.create(r.AbstractFilter.prototype),s.prototype.constructor=s,i.exports=s});var Aes={};Aes.cipher=function(t,e){for(var i=4,r=e.length/i-1,n=[[],[],[],[]],s=0;s<4*i;s++)n[s%4][Math.floor(s/4)]=t[s];n=Aes.addRoundKey(n,e,0,i);for(var o=1;o<r;o++)n=Aes.subBytes(n,i),n=Aes.shiftRows(n,i),n=Aes.mixColumns(n,i),n=Aes.addRoundKey(n,e,o,i);n=Aes.subBytes(n,i),n=Aes.shiftRows(n,i),n=Aes.addRoundKey(n,e,r,i);for(var a=new Array(4*i),s=0;s<4*i;s++)a[s]=n[s%4][Math.floor(s/4)];return a},Aes.keyExpansion=function(t){for(var e=4,i=t.length/4,r=i+6,n=new Array(e*(r+1)),s=new Array(4),o=0;o<i;o++){var a=[t[4*o],t[4*o+1],t[4*o+2],t[4*o+3]];n[o]=a}for(var o=i;o<e*(r+1);o++){n[o]=new Array(4);for(var h=0;h<4;h++)s[h]=n[o-1][h];if(o%i==0){s=Aes.subWord(Aes.rotWord(s));for(var h=0;h<4;h++)s[h]^=Aes.rCon[o/i][h]}else i>6&&o%i==4&&(s=Aes.subWord(s));for(var h=0;h<4;h++)n[o][h]=n[o-i][h]^s[h]}return n},Aes.subBytes=function(t,e){for(var i=0;i<4;i++)for(var r=0;r<e;r++)t[i][r]=Aes.sBox[t[i][r]];return t},Aes.shiftRows=function(t,e){for(var i=new Array(4),r=1;r<4;r++){for(var n=0;n<4;n++)i[n]=t[r][(n+r)%e];for(var n=0;n<4;n++)t[r][n]=i[n]}return t},Aes.mixColumns=function(t,e){for(var i=0;i<4;i++){for(var r=new Array(4),n=new Array(4),s=0;s<4;s++)r[s]=t[s][i],n[s]=128&t[s][i]?t[s][i]<<1^283:t[s][i]<<1;t[0][i]=n[0]^r[1]^n[1]^r[2]^r[3],t[1][i]=r[0]^n[1]^r[2]^n[2]^r[3],t[2][i]=r[0]^r[1]^n[2]^r[3]^n[3],t[3][i]=r[0]^n[0]^r[1]^r[2]^n[3]}return t},Aes.addRoundKey=function(t,e,i,r){for(var n=0;n<4;n++)for(var s=0;s<r;s++)t[n][s]^=e[4*i+s][n];return t},Aes.subWord=function(t){for(var e=0;e<4;e++)t[e]=Aes.sBox[t[e]];return t},Aes.rotWord=function(t){for(var e=t[0],i=0;i<3;i++)t[i]=t[i+1];return t[3]=e,t},Aes.sBox=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],Aes.rCon=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]],Aes.Ctr={},Aes.Ctr.encrypt=function(t,e,i){var r=16;if(128!=i&&192!=i&&256!=i)return"";t=Utf8.encode(t),e=Utf8.encode(e);for(var n=i/8,s=new Array(n),o=0;o<n;o++)s[o]=isNaN(e.charCodeAt(o))?0:e.charCodeAt(o);var a=Aes.cipher(s,Aes.keyExpansion(s));a=a.concat(a.slice(0,n-16));for(var h=new Array(r),l=(new Date).getTime(),c=l%1e3,u=Math.floor(l/1e3),d=Math.floor(65535*Math.random()),o=0;o<2;o++)h[o]=c>>>8*o&255;for(var o=0;o<2;o++)h[o+2]=d>>>8*o&255;for(var o=0;o<4;o++)h[o+4]=u>>>8*o&255;for(var p="",o=0;o<8;o++)p+=String.fromCharCode(h[o]);for(var f=Aes.keyExpansion(a),m=Math.ceil(t.length/r),g=new Array(m),v=0;v<m;v++){for(var _=0;_<4;_++)h[15-_]=v>>>8*_&255;for(var _=0;_<4;_++)h[15-_-4]=v/4294967296>>>8*_;for(var y=Aes.cipher(h,f),x=v<m-1?r:(t.length-1)%r+1,w=new Array(x),o=0;o<x;o++)w[o]=y[o]^t.charCodeAt(v*r+o),w[o]=String.fromCharCode(w[o]);g[v]=w.join("")}var b=p+g.join("");return b=Base64.encode(b)},Aes.Ctr.decrypt=function(t,e,i){var r=16;if(128!=i&&192!=i&&256!=i)return"";t=Base64.decode(t),e=Utf8.encode(e);for(var n=i/8,s=new Array(n),o=0;o<n;o++)s[o]=isNaN(e.charCodeAt(o))?0:e.charCodeAt(o);var a=Aes.cipher(s,Aes.keyExpansion(s));a=a.concat(a.slice(0,n-16));var h=new Array(8);ctrTxt=t.slice(0,8);for(var o=0;o<8;o++)h[o]=ctrTxt.charCodeAt(o);for(var l=Aes.keyExpansion(a),c=Math.ceil((t.length-8)/r),u=new Array(c),d=0;d<c;d++)u[d]=t.slice(8+d*r,8+d*r+r);t=u;for(var p=new Array(t.length),d=0;d<c;d++){for(var f=0;f<4;f++)h[15-f]=d>>>8*f&255;for(var f=0;f<4;f++)h[15-f-4]=(d+1)/4294967296-1>>>8*f&255;for(var m=Aes.cipher(h,l),g=new Array(t[d].length),o=0;o<t[d].length;o++)g[o]=m[o]^t[d].charCodeAt(o),g[o]=String.fromCharCode(g[o]);p[d]=g.join("")}var v=p.join("");return v=Utf8.decode(v)};var Base64={};Base64.code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Base64.encode=function(t,e){e="undefined"!=typeof e&&e;var i,r,n,s,o,a,h,l,c,u,d,p=[],f="",m=Base64.code;if(u=e?t.encodeUTF8():t,c=u.length%3,c>0)for(;c++<3;)f+="=",u+="\0";for(c=0;c<u.length;c+=3)i=u.charCodeAt(c),r=u.charCodeAt(c+1),n=u.charCodeAt(c+2),s=i<<16|r<<8|n,o=s>>18&63,a=s>>12&63,h=s>>6&63,l=63&s,p[c/3]=m.charAt(o)+m.charAt(a)+m.charAt(h)+m.charAt(l);return d=p.join(""),d=d.slice(0,d.length-f.length)+f},Base64.decode=function(t,e){e="undefined"!=typeof e&&e;var i,r,n,s,o,a,h,l,c,u,d=[],p=Base64.code;u=e?t.decodeUTF8():t;for(var f=0;f<u.length;f+=4)s=p.indexOf(u.charAt(f)),o=p.indexOf(u.charAt(f+1)),a=p.indexOf(u.charAt(f+2)),h=p.indexOf(u.charAt(f+3)),l=s<<18|o<<12|a<<6|h,i=l>>>16&255,r=l>>>8&255,n=255&l,d[f/4]=String.fromCharCode(i,r,n),64==h&&(d[f/4]=String.fromCharCode(i,r)),64==a&&(d[f/4]=String.fromCharCode(i));return c=d.join(""),e?c.decodeUTF8():c};var Utf8={};Utf8.encode=function(t){var e=t.replace(/[\u0080-\u07ff]/g,function(t){var e=t.charCodeAt(0);return String.fromCharCode(192|e>>6,128|63&e)});return e=e.replace(/[\u0800-\uffff]/g,function(t){var e=t.charCodeAt(0);return String.fromCharCode(224|e>>12,128|e>>6&63,128|63&e)})},Utf8.decode=function(t){var e=t.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(t){var e=(15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2);return String.fromCharCode(e)});return e=e.replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(t){var e=(31&t.charCodeAt(0))<<6|63&t.charCodeAt(1);return String.fromCharCode(e)})},define("libs/AES",function(){}),function(t){"function"==typeof define?define("libs/qwest",t):"undefined"!=typeof module?module.exports=t:this.qwest=t}(function(){var win=window,limit=null,requests=0,request_stack=[],getXHR=function(){return win.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},version2=""===getXHR().responseType,qwest=function(method,url,data,options,before){data=data||null,options=options||{};var typeSupported=!1,xhr=getXHR(),async=void 0===options.async||!!options.async,cache=options.cache,type=options.type?options.type.toLowerCase():"json",user=options.user||"",password=options.password||"",headers={"X-Requested-With":"XMLHttpRequest"},accepts={xml:"application/xml, text/xml",html:"text/html",json:"application/json, text/javascript",js:"application/javascript, text/javascript"},toUpper=function(t,e,i){return e+i.toUpperCase()},vars="",i,j,parseError="parseError",serialized,success_stack=[],error_stack=[],complete_stack=[],response,success,error,func,promises={success:function(t){return async?success_stack.push(t):success&&t.apply(xhr,[response]),promises},error:function(t){return async?error_stack.push(t):error&&t.apply(xhr,[response]),promises},complete:function(t){return async?complete_stack.push(t):t.apply(xhr),promises}},promises_limit={success:function(t){return request_stack[request_stack.length-1].success.push(t),promises_limit},error:function(t){return request_stack[request_stack.length-1].error.push(t),promises_limit},complete:function(t){return request_stack[request_stack.length-1].complete.push(t),promises_limit}},handleResponse=function(){var i,req,p;if(--requests,request_stack.length){for(req=request_stack.shift(),p=qwest(req.method,req.url,req.data,req.options,req.before),i=0;func=req.success[i];++i)p.success(func);for(i=0;func=req.error[i];++i)p.error(func);for(i=0;func=req.complete[i];++i)p.complete(func)}try{if(!/^2/.test(xhr.status))throw xhr.status+" ("+xhr.statusText+")";var responseText="responseText",responseXML="responseXML";if(typeSupported&&void 0!==xhr.response)response=xhr.response;else switch(type){case"json":try{response=win.JSON?win.JSON.parse(xhr[responseText]):eval("("+xhr[responseText]+")")}catch(e){throw"Error while parsing JSON body"}break;case"js":response=eval(xhr[responseText]);break;case"xml":if(!xhr[responseXML]||xhr[responseXML][parseError]&&xhr[responseXML][parseError].errorCode&&xhr[responseXML][parseError].reason)throw"Error while parsing XML body";response=xhr[responseXML];break;default:response=xhr[responseText]}if(success=!0,async)for(i=0;func=success_stack[i];++i)func.apply(xhr,[response])}catch(e){if(error=!0,response="Request to '"+url+"' aborted: "+e,async)for(i=0;func=error_stack[i];++i)func.apply(xhr,[response])}if(async)for(i=0;func=complete_stack[i];++i)func.apply(xhr)};if(limit&&requests==limit)return request_stack.push({method:method,url:url,data:data,options:options,before:before,success:[],error:[],complete:[]}),promises_limit;if(++requests,win.ArrayBuffer&&(data instanceof ArrayBuffer||data instanceof Blob||data instanceof Document||data instanceof FormData))"GET"==method&&(data=null);else{var values=[],enc=encodeURIComponent;for(i in data)void 0!==data[i]&&values.push(enc(i)+(data[i].pop?"[]":"")+"="+enc(data[i]));data=values.join("&"),serialized=!0}if("GET"==method&&(vars+=data),null==cache&&(cache="POST"==method),cache||(vars&&(vars+="&"),vars+="__t="+Date.now()),vars&&(url+=(/\?/.test(url)?"&":"?")+vars),xhr.open(method,url,async,user,password),type&&version2)try{xhr.responseType=type,typeSupported=xhr.responseType==type}catch(e){}version2?xhr.onload=handleResponse:xhr.onreadystatechange=function(){4==xhr.readyState&&handleResponse()};for(i in headers)j=i.replace(/(^|-)([^-])/g,toUpper),headers[j]=headers[i],delete headers[i],xhr.setRequestHeader(j,headers[j]);return!headers["Content-Type"]&&serialized&&"POST"==method&&xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),headers.Accept||xhr.setRequestHeader("Accept",accepts[type]),before&&before.apply(xhr),xhr.send("POST"==method?data:null),promises};return{get:function(t,e,i,r){return qwest("GET",t,e,i,r)},post:function(t,e,i,r){return qwest("POST",t,e,i,r)},xhr2:version2,limit:function(t){limit=t}}}()),define("libs/GBAPI",["require","exports","module","./AES","./qwest"],function(t,e,i){var r=(t("./AES"),t("./qwest")),n=function(){this.targetFile="xxx",this.sharedKey=null,this.lastEncryption=!1,this.defaultGame=0,this.defaultPerPage=20,this.defaultPageNumber=1,this.highestScore=-1};n.prototype.setTargetFile=function(t){this.targetFile=t},n.prototype.setSharedKey=function(t){this.sharedKey=t},n.prototype.checkCanSubmitScore=function(t,e,i){this.highestScore===-1?this.getScores({game:e||this.defaultGame,perPage:1,pageNumber:20,date:0},function(e){e.results.length?this.highestScore=parseInt(e.results[0].score_int):this.highestScore=0,i(t>this.highestScore)}.bind(this)):i(t>this.highestScore)},n.prototype.sendScore=function(t,e){if(this._keyIsValid()){var i=" .|:=-=:|. ",r=Aes.Ctr.encrypt(t.game||"",this.sharedKey,256),n=Aes.Ctr.encrypt(t.name,this.sharedKey,256),s=Aes.Ctr.encrypt(t.score,this.sharedKey,256),o=Aes.Ctr.encrypt(r+i+n+i+s,this.sharedKey,256),t={val:o};this.lastEncryption=t,this._makeCall("add",t,e)}},n.prototype.getScores=function(t,e){var i=new Date,r=0;if(t.date===n.TODAY){var s=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0);r=s.getTime()/1e3}else if(t.date===n.WEEK){var o=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0),a=o.getDay()||7;1!==a&&o.setHours(-24*(a-1)),r=Math.floor(o.getTime()/1e3)}t.game=t.game||this.defaultGame,t.perPage=t.perPage||this.defaultPerPage,t.pageNumber=t.pageNumber||this.defaultPageNumber,t.startTimestamp=r,t.endTimestamp=0,this._makeCall("get",t,e)},n.prototype._makeCall=function(t,e,i){r.post(this.targetFile,{f:t,params:JSON.stringify(e)},{type:"json"}).success(function(t){"function"==typeof i&&i(t)}).error(function(t){})},n.prototype._keyIsValid=function(){return null!==this.sharedKey&&""!==this.sharedKey&&"undefined"!=typeof this.sharedKey},n.instance=new n,n.TODAY=0,n.WEEK=1,n.ALL=2,i.exports=n}),define("com/arcade/app/system/ScoreManager",["require","exports","module","libs/GBAPI","signals","fido/loader/Cache","fido/utils/Utils"],function(t,e,i){var r=t("libs/GBAPI"),n=t("signals"),s=t("fido/loader/Cache"),o=t("fido/utils/Utils"),a=function(){this.onScoresRecieved=new n};a.prototype.getScores=function(){},a.prototype.loadScores=function(){var t={game:s.getJson("config").TICKER_SCORE_ID[0],perPage:10,pageNumber:1,date:0};r.instance.getScores(t,this.onScoresLoaded.bind(this))},a.prototype.onScoresLoaded=function(t){if(!t.error){var e=[],i=t.results,r="";window.FLIP_LANGUAGE||(r+=window.translations.STR_TICKER+"    ");var n=r,a=/en_/i.test(s.getJson("config").LOCALE);if(i.length>0)for(var h=i.length,l=0;l<h;l++)if(window.FLIP_LANGUAGE){var c=h-l;n+="    ",0!==l&&(n+=", "),n+=i[h-l-1].score_int+" : "+i[h-l-1].name_str.toUpperCase()+" . "+c}else{var c=a?o.formatNumber(l+1):l+1;n+=c+". "+i[l].name_str.toUpperCase()+": "+i[l].score_int,l<i.length&&(n+=", "),n+="    "}else n=window.translations.STR_TICKER_NOSCORES.toUpperCase();window.FLIP_LANGUAGE&&(n+="    "+window.translations.STR_TICKER),e.push(n),this.onScoresRecieved.dispatch(e)}},a.prototype.generateString=function(){},i.exports=a}),define("com/arcade/app/elements/arcade/MainScene",["require","exports","module","PIXI","fido/system/Device","./Light","./BlinkingLight","./LightSaber","./HangedToy","./PinkButton","./ArcadeTicker","./AdvertisingMonitor","./Chopper","com/arcade/app/buttons/UserNameButton","starwars/buttons/HighlightButton","starwars/filters/GlitchFilter","starwars/buttons/IconButton","fido/sound/SoundBridge","com/arcade/app/filters/VideoMaskFilter","../../system/ScoreManager"],function(t,e,i){var r=t("PIXI"),n=t("fido/system/Device"),s=t("./Light"),o=t("./BlinkingLight"),a=t("./LightSaber"),h=t("./HangedToy"),l=t("./PinkButton"),c=t("./ArcadeTicker"),u=t("./AdvertisingMonitor"),d=t("./Chopper"),p=t("com/arcade/app/buttons/UserNameButton"),f=t("starwars/buttons/HighlightButton"),m=t("starwars/filters/GlitchFilter"),g=t("starwars/buttons/IconButton"),v=t("fido/sound/SoundBridge"),_=t("com/arcade/app/filters/VideoMaskFilter"),y=t("../../system/ScoreManager"),x=function(t){r.Container.call(this),this.app=t,this.isScrolling=!1,this._previousX=0,this.doorRight=new r.Sprite.fromFrame("door_right.png"),this.doorRight.position.set(602,501),this.addChild(this.doorRight),this.doorLeft=new r.Sprite.fromFrame("door_left.png"),this.doorLeft.position.set(390,501),this.addChild(this.doorLeft),this.arcadeSceneBigLeft=new r.Sprite.fromImage(ASSET_URL+"img/game/arcade_scene_left@0.6x.png"),this.addChild(this.arcadeSceneBigLeft),this.arcadeSceneBigRight=new r.Sprite.fromImage(ASSET_URL+"img/game/arcade_scene_right@0.6x.jpg"),this.arcadeSceneBigRight.position.set(1648,0),this.addChild(this.arcadeSceneBigRight),this.arcadeRight=new r.Sprite.fromFrame("arcade_right.png"),this.arcadeRight.position.set(2967,530),this.addChild(this.arcadeRight),0===window.gameMode?this.arcadeMiddle=new r.Sprite.fromFrame("arcade_middle_rebels.png"):this.arcadeMiddle=new r.Sprite.fromFrame("arcade_middle.png"),this.arcadeMiddle.position.set(2380,491),this.addChild(this.arcadeMiddle);var e=new m;if(e.uniforms.flashIntensity.value=0,e.uniforms.verticalLinesIntensity.value=.1,e.uniforms.horizontalLinesIntensity.value=.3,e.uniforms.noiseIntensity.value=0,e.uniforms.glitchOffset.value=3,0===window.gameMode)var i=new r.Sprite.fromFrame("canvas_game_attract.png");else var i=new r.Sprite.fromFrame("canvas_runner_attract.png");i.anchor.set(.5),i.position.set(this.arcadeMiddle.x+.5*this.arcadeMiddle.width,this.arcadeMiddle.y+184),this.addChildAt(i,this.getChildIndex(this.arcadeMiddle)-1);var s;if(!n.instance.iPhone&&WEBGL){s=0===window.gameMode?new r.Texture.fromVideoUrl(ASSET_URL+"vid/rebels_attract.mp4"):new r.Texture.fromVideoUrl(ASSET_URL+"vid/triple_attract.mp4"),s.baseTexture.source.loop=!0,s.baseTexture.source.muted=!0;var o=new r.Sprite(s);o.shader=new _(new r.Texture.fromImage(ASSET_URL+"vid/triple_attract_mask.png")),o.anchor.set(.5),o.position.copy(i.position),o.position.x-=20,o.position.y+=34,i.position.x-=20,i.position.y+=34,i.texture=r.Texture.fromImage(ASSET_URL+"vid/triple_attract_fallback.png"),this.addChildAt(o,this.getChildIndex(i)+1)}else i.position.x-=20,i.position.y+=34,i.texture=r.Texture.fromImage(ASSET_URL+"vid/triple_attract_fallback.png");var a=new r.Sprite.fromFrame("arcade_middle_off.png");if(a.position.set(2380,491),0===window.gameMode){this.arcadeLeft=new r.Sprite.fromFrame("arcade_left_cab_off.png"),this.arcadeLeft.position.set(1863,522),this.addChild(this.arcadeLeft);var v=new r.Sprite.fromFrame("left_crate.png");v.position.set(1839,718),this.addChild(v)}else this.arcadeLeft=new r.Sprite.fromFrame("arcade_left.png"),this.arcadeLeft.position.set(1863,522),this.addChild(this.arcadeLeft);var x=new r.Sprite.fromFrame("rebels_poster.png");x.position.set(835,549),this.addChild(x);var w=new l;w.position.set(150,679),this.addChild(w),this.advertisingMonitor=new u(this.app),this.advertisingMonitor.position.set(4264,693),this.advertisingMonitor.turnOff(),this.addChild(this.advertisingMonitor),this.ticker=new c,this.ticker.position.set(2052,352),this.addChild(this.ticker),this.scoreManager=new y,this.scoreManager.onScoresRecieved.addOnce(function(t){this.ticker.start(t)},this),this.userNameButton=new p(window.app,{font:"80px "+window.MAIN_FONT,fill:"#FA5F07",letterSpacing:70}),this.userNameButton.position.set(540,430),this.addChild(this.userNameButton),this.gameButtons=[];for(var b=[{sprite:this.arcadeLeft},{sprite:this.arcadeMiddle},{sprite:this.arcadeRight}],T=0;T<3;T++){var S=b[T],A=new g("icon_play.png");A.name="game"+(T+1);var C=S.sprite.width,E=S.sprite.height;A.x=S.sprite.x+.5*C+100*(1-T),A.y=S.sprite.y+.75*E,A.hitArea=new r.Rectangle(.5*-C,.75*-E,C,E),A.scale.set(1.2),this.addChild(A),this.gameButtons.push(A)}if(this.hangarButton=new f("icon_exit.png","arcade_door_highlight.png"),this.hangarButton.position.set(570,850),this.hangarButton.scale.set(1.2),this.hangarButton.highlight.scale.set(1.7),this.addChild(this.hangarButton),this.ornaments=new r.Container,this.addChild(this.ornaments),window.halloween){var M=[];M.push({x:329,y:507}),M.push({x:1101,y:185}),M.push({x:918,y:860}),M.push({x:3113,y:150}),M.push({x:3053,y:904});for(var T=0;T<M.length;T++){var P=new r.Sprite.fromFrame("cutout_"+(T+1)+".png");this.ornaments.addChild(P),P.x=M[T].x,P.y=M[T].y,P.hitArea=new r.Rectangle}}if(window.christmas){var M=[];M.push({x:0,y:1218}),M.push({x:651,y:1218}),M.push({x:1651,y:878}),M.push({x:2222,y:837}),M.push({x:3078,y:572}),M.push({x:0,y:182}),M.push({x:932,y:120}),M.push({x:2218,y:149}),M.push({x:3667,y:125});for(var T=0;T<M.length;T++){var P=new r.Sprite.fromFrame("cutout_christmas_"+(T+1)+".png");this.ornaments.addChild(P),P.x=M[T].x,P.y=M[T].y,P.hitArea=new r.Rectangle}var L=new r.Sprite.fromFrame("christmas_tree.png");this.ornaments.addChild(L),L.x=-170,L.y=620,L.hitArea=new r.Rectangle;var R=new r.Sprite.fromFrame("christmas_tree.png");this.ornaments.addChild(R),R.x=4650,R.y=620,R.hitArea=new r.Rectangle}this.chopper=new d(new r.Rectangle((-250),1250,5300,200),"chopper.png"),this.addChild(this.chopper),this.mousebot=new d(new r.Rectangle((-250),1500,5300,(-50)),"mousebot.png",3),this.mousebot.isChopper=!1,this.addChild(this.mousebot),this.tieToy=new h("chase_tie_off.png","chase_tie_shoot.png","TIE_noise"),window.christmas&&(this.tieToy=new h("chase_tie_xmas_off.png","chase_tie_xmas_shoot.png","TIE_noise")),this.tieToy.y=-100,this.tieToy.rope.forces.push(new r.Point),this.tieToy.rope.startX=-500,this.tieToy.scale.set(1.7),this.tieToy.item.scale.x=-1,this.addChild(this.tieToy),this.xwingToy=new h("chase_xwing_off.png","chase_xwing_shoot.png","xwing_shoot"),window.christmas&&(this.xwingToy=new h("chase_xwing_xmas_off.png","chase_xwing_xmas_shoot.png","xwing_shoot")),this.xwingToy.y=-100,this.xwingToy.rope.startX=-1e3,this.xwingToy.item.scale.x=-1,this.xwingToy.rope.forces.push(new r.Point),this.xwingToy.scale.set(1.7),this.addChild(this.xwingToy),this.droidToy=new h("chase_ito.png","chase_ito.png","ito_droid"),window.christmas&&(this.droidToy=new h("it_o.png","it_o.png","ito_droid")),this.droidToy.y=-100,this.droidToy.rope.startX=-3e3,this.droidToy.item.scale.x=-1,this.droidToy.rope.forces.push(new r.Point),this.droidToy.scale.set(1.7),this.addChild(this.droidToy);try{this.scoreManager.loadScores()}catch(O){alert("SCORE FAIL")}};x.prototype=Object.create(r.Container.prototype),x.prototype.createLights=function(){this.lights=[];var t=new o(new r.Texture.fromFrame("space_neon.png"));t._turnOnDelay=2,t.position.set(3662,669),t.dark.scale.set(2),t.switchable=!0,t.turnOff(),this.lights.push(t),this.addChildAt(t,this.getChildIndex(this.arcadeSceneBigRight)+1),window.sith?this.lightSaberBlue=new a(new r.Texture.fromFrame("right_red_sithsaturday.png"),this,16755370):window.halloween?this.lightSaberBlue=new a(new r.Texture.fromFrame("right_orange_halloween.png"),this,16755370):this.lightSaberBlue=new a(new r.Texture.fromFrame("right_blue.png"),this,11184895),this.lightSaberBlue.light.anchor.set(.65,.47),this.lightSaberBlue._turnOnDelay=3,this.lightSaberBlue.position.set(3484,562),this.lightSaberBlue.turnOff(),this.lights.push(this.lightSaberBlue),this.addChildAt(this.lightSaberBlue,this.getChildIndex(this.arcadeRight)+1),window.halloween?this.lightSaberRed=new a(new r.Texture.fromFrame("left_orange_halloween.png"),this,16755370):this.lightSaberRed=new a(new r.Texture.fromFrame("left_red.png"),this,16755370),this.lightSaberRed.light.anchor.set(.35,.44),this.lightSaberRed._turnOnDelay=3,this.lightSaberRed.position.set(1796,561),this.lightSaberRed.turnOff(),this.lights.push(this.lightSaberRed),this.addChildAt(this.lightSaberRed,this.getChildIndex(this.arcadeLeft)+1);var e=new o(new r.Texture.fromFrame("strip_light_right.png"));e._turnOnDelay=1,e.position.set(4345,979),e.turnOff(),this.lights.push(e),this.addChildAt(e,this.getChildIndex(this.arcadeSceneBigRight)+1);
var i=new o(new r.Texture.fromFrame("strip_light_left.png"));if(i._turnOnDelay=1,i.position.set(860,979),i.turnOff(),this.lights.push(i),this.addChildAt(i,this.getChildIndex(this.arcadeSceneBigRight)+1),window.sith)var n=new o(new r.Texture.fromFrame("imperial_floor.png"));else var n=new o(new r.Texture.fromFrame("rebels_floor.png"));n._turnOnDelay=0,n.position.set(2627,1058),n.turnOff(),n.turnOnDuration=4,this.lights.push(n),this.addChildAt(n,this.getChildIndex(this.arcadeSceneBigRight)+1);var h=new s(new r.Texture.fromFrame("wall_lights_on_right.png"));h._turnOnDelay=0,h.position.set(4315,194),h.turnOff(),this.lights.push(h),this.addChildAt(h,this.getChildIndex(this.arcadeSceneBigRight)+1);var l=new s(new r.Texture.fromFrame("wall_lights_on_mid.png"));l._turnOnDelay=2,l.position.set(2627,266),l.turnOff(),this.lights.push(l),this.addChildAt(l,this.getChildIndex(this.arcadeSceneBigRight)+1);var c=new s(new r.Texture.fromFrame("wall_lights_on_left.png"));c._turnOnDelay=0,c.position.set(752,194),c.turnOff(),this.lights.push(c),this.addChildAt(c,this.getChildIndex(this.arcadeSceneBigRight)+1);for(var u=0;u<this.lights.length;u++){var d=this.lights[u];d!==t&&(d.dark.position.copy(d.position),this.addChild(d.dark))}},x.prototype.update=function(){this.ticker.update(),this.advertisingMonitor.update(),this.updateToy(this.tieToy,200),this.tieToy.isShooting=1===this.tieToy.item.scale.x,this.updateToy(this.xwingToy,-200),this.xwingToy.isShooting=this.xwingToy.item.scale.x===-1,this.updateToy(this.droidToy,-1800),this.droidToy.isShooting=this.droidToy.item.scale.x===-1;for(var t=0;t<this.lights.length;t++){var e=this.lights[t];e.update()}this._previousX=this.x,this.lightSaberBlue.didMove=this.isScrolling,this.lightSaberRed.didMove=this.isScrolling},x.prototype.updateToy=function(t,e){var i=-500,r=5500;t.rope.forces[0].x=.05*(this.x-this._previousX)*Math.random()*.1;var n=1+.5*(Math.sin(.01*t.rope.startX)+1),s=t.item.scale.x===-1?4:-4;t.rope.startX+=s*n,t.rope.startX>r+e?(t.item.scale.x=1,t.rope.startX=r+e):t.rope.startX<i+e&&(t.item.scale.x=-1,t.rope.startX=i+e),t.rope.startY<-20?t.rope.startY=-20:t.rope.startY>20&&(t.rope.startY=20),t.update()},x.prototype.turnOn=function(){v.sfx.play("neonstartup");for(var t=0;t<this.lights.length;t++){var e=this.lights[t];setTimeout(e.turnOn.bind(e),600*e._turnOnDelay)}setTimeout(this.advertisingMonitor.turnOn.bind(this.advertisingMonitor),4e3)},i.exports=x}),define("com/arcade/app/elements/arcade/Lamp",["require","exports","module","PIXI","./BlinkingLight","fido/physics/Rope"],function(t,e,i){var r=t("PIXI"),n=t("./BlinkingLight"),s=t("fido/physics/Rope"),o=function(){n.call(this,new r.Texture.fromFrame("lamp_light.png")),this.container=new r.Container,this.addChild(this.container),this.light.anchor.set(.5,0),this.light.x=2,this.light.y=65,this.light.hitArea=new r.Rectangle(0,0,0,0),this.container.addChild(this.light),this.sprite=new r.Sprite.fromFrame("lamp.png"),this.sprite.anchor.set(.5,0),this.container.addChild(this.sprite),this.flair=new r.Sprite.fromFrame("lamp_flare.png"),this.flair.anchor.set(.5),this.flair.y=55,this.flair.hitArea=new r.Rectangle(0,0,0,0),this.flair.blendMode=r.isWebGL?r.BLEND_MODES.ADD:0,this.container.addChild(this.flair),this.switchable=!0,this.rope=new s({texture:new r.Texture.fromImage(ASSET_URL+"img/game/hangar/rope.png"),startX:0,startY:-400,joints:5,iterations:8,gravity:.98,friction:.1,fallBackLineColor:4207916,fallBackLineWidth:3}),this.rope.build(300),this.rope.update(),this.addChildAt(this.rope,0)};o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.turnOn=function(t){n.prototype.turnOn.call(this,t),this.sprite.texture=r.Texture.fromFrame("lamp_on.png")},o.prototype.turnOff=function(t){n.prototype.turnOff.call(this,t),this.sprite.texture=r.Texture.fromFrame("lamp.png")},o.prototype.update=function(){n.prototype.update.call(this),this.flair.alpha=this.light.alpha,this.rope.update();var t=this.rope.getAngle(this.rope.pX[this.rope.joints-1],this.rope.pY[this.rope.joints-1],this.rope.pX[this.rope.joints],this.rope.pY[this.rope.joints])+.5*Math.PI;this.container.rotation+=.1*(t-this.container.rotation),this.container.x=this.rope.pX[this.rope.joints],this.container.y=this.rope.pY[this.rope.joints]},i.exports=o}),define("com/arcade/app/elements/arcade/Arcade",["require","exports","module","PIXI","fido/swfy/Swfy","./ArcadeAnimationData","./Wires","./MainScene","./Lamp","./Light","starwars/buttons/IconButton","starwars/filters/GlowFilter","fido/utils/Utils","fido/physics/particles/Dust"],function(t,e,i){var r=t("PIXI"),n=t("fido/swfy/Swfy"),s=t("./ArcadeAnimationData"),o=t("./Wires"),a=t("./MainScene"),h=t("./Lamp"),l=(t("./Light"),t("starwars/buttons/IconButton"),t("starwars/filters/GlowFilter"),t("fido/utils/Utils"),t("fido/physics/particles/Dust")),c=function(t){r.Container.call(this),this.swfy=new n,this.addChild(this.swfy),this.app=t,this.mainScene=new a(this.app);var e=new r.Sprite.fromFrame("top_flair.png");e.pivot.x=223,e.pivot.y=-302,e.blendMode=r.isWebGL?r.BLEND_MODES.ADD:0,this.lampContainer=new r.Container,this._lampContainerPreviousX=0,this.lamp=new h,this.lamp.y=370,this.lamp.rope.forces.push(new r.Point),this.lamp.turnOff(),this.lampContainer.addChild(this.lamp);var i=new r.Container,c=new r.Sprite.fromImage(ASSET_URL+"img/arcade_animation/foreground.png");c.hitArea=new r.Rectangle(0,0,0,0);var u=new r.Sprite.fromImage(ASSET_URL+"img/arcade_animation/foreground.png");u.hitArea=new r.Rectangle(0,0,0,0),u.x=1063,i.addChild(c),i.addChild(u);var d={mainscene:this.mainScene,wires1:new o,wires2:new o,lamp:this.lampContainer,topFlair:e,foreground:i};this.swfy.setAnimation(s,d),this.swfy.reset(),this.dust=new l(null,{color:12232312}),this.children[0].addChildAt(this.dust,this.children[0].getChildIndex(i)),this.isScrolling=!1};c.prototype=Object.create(r.Container.prototype),c.prototype.turnOn=function(){this.mainScene.turnOn(),setTimeout(function(){this.lamp.turnOn()}.bind(this),1e3)},c.prototype.update=function(t){this.swfy.setRatio(t),this.mainScene.isScrolling=this.isScrolling,this.mainScene.update(),this.dust.update(this.mainScene.position,this.mainScene.scale.x-.5);var e=.04*(this.lampContainer.x-this._lampContainerPreviousX);e>.3?e=.3:e<-.3&&(e=.3),this.lamp.rope.forces[0].x=e,this.lamp.update(),this._lampContainerPreviousX=this.lampContainer.x},c.prototype.resize=function(t,e){this.dust.bounds.width=t,this.dust.bounds.height=e,this.dust.resetParticles()},i.exports=c}),define("starwars/buttons/ScrollButton",["require","exports","module","PIXI","fido/ui/buttons/AbstractButton","../filters/GlitchFilter"],function(t,e,i){var r=t("PIXI"),n=t("fido/ui/buttons/AbstractButton"),s=(t("../filters/GlitchFilter"),function(){n.call(this),this.background=new r.Sprite.fromFrame("arcade_scroll_left_tab.png"),this.background.anchor.set(0,.5),this.addChild(this.background),this.icon=new r.Sprite.fromFrame("arcade_scroll_left_arrow.png"),this.icon.anchor.set(.5),this.icon.x=30,this.addChild(this.icon)});s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.show=function(t){t=t||.4,this.enable(),this.visible=!0,TweenLite.to(this,.4,{alpha:1}),TweenLite.to(this.background,t,{x:0,alpha:1}),TweenLite.to(this.icon,t,{x:30,alpha:1})},s.prototype.hide=function(t){t=t||.4,this.disable(),TweenLite.to(this.background,t,{x:-this.background.width,alpha:0,onComplete:function(){this.visible=!1},onCompleteScope:this}),TweenLite.to(this.icon,t,{x:-this.background.width,alpha:0})},s.prototype.hover=function(){TweenLite.to(this.background.scale,.2,{x:1.1,y:1.1,ease:Back.easeOut}),TweenLite.to(this.icon.scale,.2,{x:1.1,y:1.1,ease:Back.easeOut}),TweenLite.to(this.icon,.2,{x:25,ease:Back.easeOut})},s.prototype.out=function(){TweenLite.to(this.background.scale,.2,{x:1,y:1}),TweenLite.to(this.icon,.2,{x:30})},i.exports=s}),define("starwars/events/EventPlanner",["require","exports","module"],function(t,e,i){function r(){this.eventMap={},this.properties={}}var n={sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6};r.prototype.isHappening=function(t){t=t.toLowerCase();for(var e in this.properties)if(e.toLowerCase()==t)return!0;return!1},r.prototype.load=function(t){this.eventMap=t.events,this.dates=t.dates;for(var e=0;e<this.dates.length;e++)for(var i=this.dates[e],r=0;r<i.ids.length;r++){var n=i.ids[r];this.eventMap.hasOwnProperty(n)||(i.ids.splice(r,1),r--)}this.parseEvents()},r.prototype.parseEvents=function(){for(var t=0;t<this.dates.length;t++){var e=this.dates[t],i=!1;if("day"===e.type?i=this.checkDay(e.condition):"range"===e.type&&Object.keys(e.condition).length<2?i=this.checkSingleDate(e.condition.start):"range"===e.type&&2===Object.keys(e.condition).length&&(i=this.checkRange(e.condition.start,e.condition.end)),i)for(var r=0;r<e.ids.length;r++){var n=e.ids[r];this.properties[n]=this.eventMap[n]}}},r.prototype.checkSingleDate=function(t){var e=(t.split("/"),new Date(d1[2],d1[1]-1,d1[0]),new Date);return date===e},r.prototype.checkDay=function(t){t=t.toLowerCase();var e=(new Date).getDay();return n[t]===e},r.prototype.checkRange=function(t,e){var i=t.split("/"),r=e.split("/"),n=new Date(i[2],i[1]-1,i[0]),s=new Date(r[2],r[1]-1,r[0]),o=new Date;return o<=s&&o>=n},i.exports=new r}),define("com/arcade/app/screens/ArcadeScreen",["require","exports","module","PIXI","fido/system/Ticker","fido/ui/PixiTrackpad","com/arcade/app/elements/arcade/Arcade","starwars/filters/GlowFilter","starwars/buttons/GoldenButton","starwars/buttons/IconButton","starwars/buttons/ScrollButton","fido/physics/particles/Dust","fido/app/Screen","fido/sound/SoundBridge","fido/utils/FrameWait","starwars/events/EventPlanner","signals","fido/loader/Cache","fido/system/Device","tracker","tracker"],function(t,e,i){var r=t("PIXI"),n=t("fido/system/Ticker"),s=t("fido/ui/PixiTrackpad"),o=t("com/arcade/app/elements/arcade/Arcade"),a=(t("starwars/filters/GlowFilter"),t("starwars/buttons/GoldenButton"),t("starwars/buttons/IconButton"),t("starwars/buttons/ScrollButton")),h=(t("fido/physics/particles/Dust"),t("fido/app/Screen")),l=t("fido/sound/SoundBridge"),c=(t("fido/utils/FrameWait"),t("starwars/events/EventPlanner")),u=t("signals"),d=t("fido/loader/Cache"),p=(t("fido/system/Device"),function(t){h.call(this,t),this.onIntroComplete=new u,this.onScrollComplete=new u,this._commsScreenTutorialDisplayed=!1,this._arrowsActive=!0,this.container=new r.Container,this.addChild(this.container),this.arcade=new o(t),this.container.addChild(this.arcade),this.logo=new r.Sprite.fromImage(ASSET_URL+"img/localised/star_wars_arcade_logo.png"),this.logo.visible=!1,this.logo.anchor.set(.5),this.container.addChild(this.logo),this.leftArrow=new a,this.leftArrow.hide(),this.addChild(this.leftArrow),this.rightArrow=new a,this.rightArrow.hide(),this.rightArrow.rotation=Math.PI,this.addChild(this.rightArrow),this.trackpad=new s({target:this}),this.trackpad.scrollMin=-5e3,this.centerPosition=this.trackpad.scrollMin/2+290,this.trackpad.setPosition(this.centerPosition)});p.prototype=Object.create(h.prototype),p.prototype.constructor=p,p.prototype.onHangarButtonPressed=function(){this.app.screenManager.gotoScreenByID("hangar")},p.prototype.onGameButtonPressed=function(t){if(!this.trackpad.didMove){var e=d.getJson("config");switch(t.name){case"game1":window.location.href=e.GAME2_URL+"?arcade=true";break;case"game2":0===window.gameMode?window.location.href=e.GAME2_URL+"?arcade=true":window.location.href=e.GAME3_URL+"?arcade=true";break;case"game3":window.location.href=e.GAME1_URL+"?arcade=true"}}},p.prototype.playIntro=function(t){this.container.interactiveChildren=!1,this._arrowsActive=!1;var e=new TimelineMax({delay:t,onComplete:function(){this.logo.visible=!1,this.container.interactiveChildren=!0,this._arrowsActive=!0,this.rightArrow.show(),this.leftArrow.show(),this.displayBox(),this.onIntroComplete.dispatch(),l.music.play("arcademusic")},onCompleteScope:this});this.logo.visible=!0,e.fromTo(this.logo,1,{alpha:0},{alpha:1,onStart:function(){l.sfx.play("sw_fanfare")},onStartScope:this}),e.fromTo(this.logo.scale,1,{x:1,y:1},{x:2,y:2,ease:Elastic.easeOut},0),e.to(this.logo,1,{alpha:0},2),e.to(this.logo.scale,2,{x:3,y:3,ease:Power2.easeIn},1),e.from(this.container.scale,7,{x:.45,y:.45,ease:Power2.easeInOut,onStart:function(){setTimeout(function(){this.arcade.turnOn()}.bind(this),1e3)},onStartScope:this},1)},p.prototype.displayBox=function(){this.app.tutorialManager.isDone&&setTimeout(function(){var t=[],e=Object.keys(c.properties);if(e.length>0){var i=c.properties[e[0]];t.push(translations[i.message])}t.length>0&&(this.app.alertPanelManager.addEvents(t),this.app.alertPanelManager.showEvents())}.bind(this),10)},p.prototype.scrollLeft=function(){this.scrollTo(Math.min(this.trackpad.value-.5*this.trackpad.scrollMin+100,0),!0)},p.prototype.scrollRight=function(){this.scrollTo(Math.max(this.trackpad.value+.5*this.trackpad.scrollMin+100,this.trackpad.scrollMin),!0)},p.prototype.goToAdvertisingMonitor=function(){this.trackpad.value=this.trackpad.easingValue=this.trackpad.scrollMin,this.update()},p.prototype.goToArcadeMachines=function(){this.trackpad.value=this.trackpad.easingValue=this.centerPosition,this.update()},p.prototype.scrollTo=function(t,e){if(e){var i=Math.floor(3*t/this.trackpad.scrollMin);switch(i){case 0:t=0;break;case 1:t=this.centerPosition;break;case 2:t=this.trackpad.scrollMin}}TweenLite.to(this.trackpad,3,{value:t,easingValue:t,onStart:function(){this.trackpad.lock()},onStartScope:this,onComplete:function(){this.trackpad.unlock(),this.onScrollComplete.dispatch()},onCompleteScope:this})},p.prototype.onShow=function(){t("tracker").trackAction("arcade"),this.app.trackerStorage.get("arcadeloaded")||(this.app.trackerStorage.store("arcadeloaded",!0),t("tracker").trackAction("new_arcade")),this.arcade.mainScene.userNameButton.update(),this.app.topMenu.show(),n.instance.add(this.update,this)},p.prototype.onShown=function(){this.leftArrow.onPress.add(this.scrollLeft,this),this.rightArrow.onPress.add(this.scrollRight,this),this.arcade.mainScene.hangarButton.onPress.add(this.onHangarButtonPressed,this);for(var t=0;t<this.arcade.mainScene.gameButtons.length;t++)this.arcade.mainScene.gameButtons[t].onPress.add(this.onGameButtonPressed,this)},p.prototype.onHide=function(){n.instance.remove(this.update,this),this.leftArrow.onPress.remove(this.scrollLeft,this),this.rightArrow.onPress.remove(this.scrollRight,this),this.arcade.mainScene.hangarButton.onPress.remove(this.onHangarButtonPressed,this);for(var t=0;t<this.arcade.mainScene.gameButtons.length;t++)this.arcade.mainScene.gameButtons[t].onPress.remove(this.onGameButtonPressed,this)},p.prototype.update=function(){this.trackpad.value;this.trackpad.update(),this.arcade.isScrolling=this.trackpad.didMove,this.trackpad.value<this.trackpad.scrollMin+300&&!this._commsScreenTutorialDisplayed&&(this._commsScreenTutorialDisplayed=!0,this.app.alertPanelManager.show("commsscreen")),this._arrowsActive&&(this.trackpad.value>-100?this.leftArrow.interactive&&this.leftArrow.hide():this.leftArrow.interactive||this.leftArrow.show(),this.trackpad.value<this.trackpad.scrollMin+100?this.rightArrow.interactive&&this.rightArrow.hide():this.rightArrow.interactive||this.rightArrow.show()),this.arcade.update(this.trackpad.value/this.trackpad.scrollMin)},p.prototype.resize=function(t,e){this.screenWidth=t,this.screenHeight=e;var i=.5*this.screenWidth,r=.5*this.screenHeight;this.container.x=i,this.container.y=r,this.arcade.x=-i,this.arcade.y=-r,this.leftArrow.y=r,this.rightArrow.y=r,this.rightArrow.x=this.screenWidth,this.arcade.resize(this.screenWidth,this.screenHeight)},i.exports=p}),define("com/arcade/app/screens/GameScreen",["require","exports","module","fido/app/Screen"],function(t,e,i){var r=t("fido/app/Screen"),n=function(t,e){r.call(this,t),this.url=e};n.prototype=Object.create(r.prototype),n.prototype.onShow=function(){window.open(this.url+"?arcade=true","_blank")},n.prototype.onShown=function(){},i.exports=n}),define("com/arcade/app/system/TutorialManager",["require","exports","module","fido/system/Ticker","fido/sound/SoundBridge"],function(t,e,i){var r=(t("fido/system/Ticker"),t("fido/sound/SoundBridge")),n=function(t){if(this.app=t,this.isDone=!!this.app.localStorage.get("tutorialdone"),!this.isDone){this._interactiveElements=[],this._currentStep=0,this.highlightArrow=new PIXI.Container,this.highlightArrow.alpha=0,this.app.stage.addChild(this.highlightArrow);var e=new PIXI.Sprite.fromFrame("tut_pointer.png");e.anchor.set(.5,0),e.rotation=Math.PI,this.highlightArrowTimeline=new TimelineMax({repeat:-1,paused:!0}),this.highlightArrowTimeline.to(e,1,{y:-20,ease:Power1.easeInOut}),this.highlightArrowTimeline.to(e,1,{y:0,ease:Power1.easeInOut}),this.highlightArrow.addChild(e);var i=this.app.screenManager.screens.arcade,n=this.app.screenManager.screens.hangar,s=n.getItemSwitcherByName("spaceships").items[0],o=this.stepDone.bind(this);this.steps=[function(){this.app.topMenu.setMode("tutorial"),i.onIntroComplete.addOnce(o),s.hide(),s.highlight.visible=!1},function(){this.app.alertPanelManager.show("arcade"),this.app.localStorage.store("tutorialdone",!0),this.app.alertPanelManager.onHide.addOnce(o),i._arrowsActive=!1,i.rightArrow.hide(),i.leftArrow.hide()},function(){this.removeInteractivity(i),i.scrollTo(0,!0),i.onScrollComplete.addOnce(o)},function(){i.interactive=!1,this.removeInteractivity(i.arcade.mainScene.userNameButton),this.app.alertPanelManager.show("arcade",{x:0}),this.app.alertPanelManager.show("hangardoor",{hasNextButton:!1,offsetX:200}),this.setHighlightOn(i.arcade.mainScene.hangarButton),i.arcade.mainScene.hangarButton.onPress.addOnce(function(){i.interactive=!0,this.app.alertPanelManager.hide(),this.hideHighlight()}.bind(this)),n.rewardsButton.hide(),n.doorButton.hide(),n.editButton.hide(),n.hologram.visible=!1,n.getItemSwitcherByName("items").visible=!1,n.onShowComplete.addOnce(o)},function(){this.app.alertPanelManager.show("hangarwelcome"),this.app.alertPanelManager.onHide.addOnce(o)},function(){this.app.overlayManager.screens.name.hasClose=!1,this.app.overlayManager.show("name"),this.app.overlayManager.screens.name.hasClose=!0,this.app.overlayManager.onHide.addOnce(o)},function(){this.app.alertPanelManager.show("customize",{hasNextButton:!1}),n.editButton.show(),this.setHighlightOn(n.editButton),this.removeInteractivity(n,n.editButton),n.editButton.onPress.addOnce(function(){this.app.alertPanelManager.hide(),o()}.bind(this))},function(){n.editButton.hide();for(var t=0;t<n.itemSwitchers.length;t++){var e=n.itemSwitchers[t];e.hideUI()}this.app.alertPanelManager.show("addtokens"),this.app.alertPanelManager.onHide.addOnce(function(){setTimeout(o,100)}),setTimeout(function(){this.app.topMenu.setMode("tutorial,token"),this.app.topMenu.addCoin(10)}.bind(this),2e3)},function(){this.app.alertPanelManager.show("spaceshipbutton",{hasNextButton:!1,offsetX:-200});var t=n.getItemSwitcherByName("spaceships");t.showUI(),this.setHighlightOn(t),t.editButton.onPress.addOnce(function(){this.app.alertPanelManager.hide(),o()}.bind(this))},function(){s.show("left"),this.app.alertPanelManager.show("buyspaceship",{hasNextButton:!1,offsetX:-200});var t=n.getItemSwitcherByName("spaceships");t.hideArrows(),t.closeButton.hitArea=new PIXI.Rectangle(0,0,0,0),t.closeButton.alpha=.5,this.setHighlightOn(t.useButton),t.useButton.onPress.addOnce(function(){this.app.alertPanelManager.hide(),t.closeButton.hitArea=null,t.closeButton.alpha=1,n.leaveEditMode(),o()}.bind(this))},function(){this.removeInteractivity(n,n.doorButton),this.app.alertPanelManager.show("gotoarcade",{hasNextButton:!1}),this.setHighlightOn(n.doorButton),n.doorButton.onPress.addOnce(function(){this.app.alertPanelManager.hide(),i.goToArcadeMachines(),o()}.bind(this))},function(){setTimeout(function(){this.app.alertPanelManager.show("play")},1e3),this.removeInteractivity(i),this.app.alertPanelManager.onHide.addOnce(function(){r.sfx.play("sw_fanfare"),o()})},function(){n.getItemSwitcherByName("items").visible=!0,i._arrowsActive=!0,this.app.localStorage.store("tutorialdone",!0),this.app.topMenu.setMode("arcade")}],this.steps[this._currentStep].call(this)}};n.prototype.setHighlightOn=function(t){requestAnimationFrame(function(){this.highlightArrow.x=t.worldTransform.tx,this.highlightArrow.y=t.worldTransform.ty-40,this.highlightArrowTimeline.resume(),TweenLite.to(this.highlightArrow,.4,{alpha:1})}.bind(this))},n.prototype.hideHighlight=function(){this.highlightArrowTimeline.pause(),TweenLite.to(this.highlightArrow,.4,{alpha:0})},n.prototype.stepDone=function(){this.restoreInteractivity(),this.hideHighlight(),this.steps[++this._currentStep].call(this)},n.prototype.restoreInteractivity=function(){for(var t=0;t<this._interactiveElements.length;t++){var e=this._interactiveElements[t];e.interactive=!0}this._interactiveElements=[]},n.prototype.removeInteractivity=function(t,e){this.traverse(t,function(t){t!==e&&t.interactive&&(t.interactive=!1,this._interactiveElements.push(t))}.bind(this))},n.prototype.traverse=function(t,e){var i=e(t)===!1;if(!i)for(var r=0;r<t.children.length;r++){var n=t.children[r];n.children&&this.traverse.call(this,n,e)}},n.prototype.debugInteractivity=function(t){return t.interactive?(this.traverse(t,function(t){t.tint=65280}),!1):void this.traverse(t,function(t){t.tint=16777215})},n.prototype.update=function(){this.traverse(this.app.screenManager.screens.arcade,this.debugInteractivity.bind(this)),this.traverse(this.app.screenManager.screens.hangar,this.debugInteractivity.bind(this))},i.exports=n}),define("fido/shop/ItemGroup",["require","exports","module"],function(t,e,i){var r=function(t,e){"undefined"==typeof e&&(e=[]),"undefined"==typeof t&&(t=""),this._items=e,this.name=t};r.prototype={addItems:function(t){for(var e=0;e<t.length;e++)this.addItem(t[e])},addItem:function(t){this._items.push(t)},hasItem:function(t){var e=this._items.indexOf(t);if(e!==-1)return!0},getItem:function(t){if(this.hasItem(t))return t},getNumItems:function(){return this._items.length},getItemAt:function(t){return t<0||t>this._items.length-1?null:this._items[t]},getBoughtItems:function(){for(var t=[],e=0;e<this._items.length;e++)this._items[e].purchased&&t.push(this._items[e]);return t},unlockNext:function(t){var e=this._items.indexOf(t);e+1<this._items.length&&this._items[e+1].unlock()},lockItem:function(t){targetItem=this.getItem(t),targetItem.lock()},unlockItem:function(t){targetItem=this.getItem(t),targetItem.unlock()}},i.exports=r}),define("fido/shop/Item",["require","exports","module","PIXI"],function(t,e,i){var r=t("PIXI"),n=function(t,e){var i={currentLevel:1,price:100,thumbnail:new r.Text("IMAGE",{font:"6px Arial"}),image:new r.Text("IMAGE",{font:"10px Arial"}),name:"Magic box",description:"Description of the super-magical awesome expensive thing"};if(t){for(var n in i)"undefined"==typeof t[n]&&(t[n]=i[n]);this.options=t}else this.options=i;this.thumbnail=this.options.thumbnail,this.description=this.options.description,this.imageUrl=this.options.imageUrl,this.name=this.options.name,this.id=this.options.id,this.purchased=!1,this.used=!1,this.locked=!1,this.price=100,this.system=e,this.init()};n.prototype.constructor=n,n.prototype.init=function(){this.price=this.options.price},n.prototype.bought=function(){this.purchased=!0},n.prototype.use=function(){this.used=!0},n.prototype.lock=function(){this.locked=!0},n.prototype.unlock=function(){this.locked=!1},i.exports=n}),define("fido/shop/ShopSystem",["require","exports","module","signals","fido/system/LocalStorage","fido/shop/ItemGroup","fido/shop/Item"],function(t,e,i){var r=t("signals"),n=t("fido/system/LocalStorage"),s=t("fido/shop/ItemGroup"),o=t("fido/shop/Item"),a=function(t){this.translation=!0;var e={startAmount:300,localStorageBundleId:""};if(t){for(var i in e)"undefined"==typeof t[i]&&(t[i]=e[i]);this.options=t}else this.options=e;this._wallet=this.options.startAmount,this._items=[],this._groups=[],this._discount=1,this._multipliers=[],this.onChange=new r,this.onChange.add(this.saveToStorage,this),this.localStorage=new n(this.options.localStorageBundleId),this.onLoaded=new r,this.loadSaveData()};a.prototype={buyItem:function(t){if(this._items.indexOf(t)!==-1){if(this.canBuyItem(t)){this.spendMoney(t.price),t.bought();var e=this.findParentGroup(t);return e&&e.unlockNext(t),this.onChange.dispatch(),!0}return!1}return!1},canBuyItem:function(t){return!t.purchased&&this._wallet>=t.price},applyDiscount:function(t){this._multipliers.push(1-t/100);for(var e=1,i=0;i<this._multipliers.length;i++)e*=this._multipliers[i];this._discount=t;for(var i=0;i<this._items.length;i++){var r=this._items[i];r.price*=1-this._discount,r.price=Math.floor(r.price)}},spendMoney:function(t){this._wallet-=t,this.onChange.dispatch()},earnMoney:function(t){this._wallet+=t,this.onChange.dispatch()},_setMoney:function(t){this._wallet=t,this.onChange.dispatch()},getMoney:function(){return this._wallet},findParentGroup:function(t){for(var e=0;e<this._groups.length;e++)if(this._groups[e].hasItem(t))return this._groups[e];return!1},createGroup:function(t,e){var i=new s(t,e);return this._groups.push(i),i},getNumGroups:function(){return this._groups.length},getGroupAt:function(t){return t<0||t>this._groups.length-1?null:this._groups[t]},addItems:function(t){for(var e=0;e<t.length;e++)this.addItem(t[e])},addItem:function(t){this._items.push(t)},getNumItems:function(){return this._items.length},getAtId:function(t){for(var e=0,i=this._items.length;e<i;e++)if(this._items[e].id===t)return this._items[e]},loadFromJson:function(t){for(var e=Object.keys(t.groups),i=e.length,r=0;r<i;r++)for(var n=this.createGroup(e[r]),s=0;s<t.groups[e[r]].length;s++){var a=t.groups[e[r]][s],h={id:a.id,currentLevel:1,price:a.price,thumbnail:a.thumbnail,imageUrl:a.imageUrl,description:this.translation?translations[a.description]:a.description},l=new o(h,this);this.addItem(l),n.addItem(l)}},updateFromSave:function(){if(this.hasStoredData()){for(var t=this.loadSaveData(),e=0;e<t.items.length;e++){var i=t.items[e],r=this.getAtId(i.id);r&&(i.locked?r.lock():r.unlock(),i.purchased&&r.bought(),i.used&&r.use())}t.amount&&t.amount!==this.getMoney()?this._setMoney(t.amount):this.onChange.dispatch()}},createSaveData:function(){for(var t={items:[],amount:this.getMoney()},e=0;e<this._items.length;e++){var i=this._items[e],r={id:i.id,used:i.used,purchased:i.purchased,locked:i.locked};t.items.push(r)}return t},loadSaveData:function(){var t=this.localStorage.getObject("shop");return t?(this.onLoaded.dispatch(),t):null},hasStoredData:function(){return null!==this.loadSaveData()},saveToStorage:function(){var t=this.createSaveData();this.localStorage.storeObject("shop",t)},removeStorage:function(){this.localStorage.remove("shop")},parse:function(t,e){if("function"==typeof t){var i=t.call(e,this._items,this._groups,this);return i}}},i.exports=a}),define("fido/shop/RewardSystem",["require","exports","module","fido/system/LocalStorage","signals"],function(t,e,i){var r=t("fido/system/LocalStorage"),n=t("signals"),s=function(t,e){this.rewards=t||[],this.options={localStorageBundleId:""};for(var i in this.options)this.options[i]=e[i]||this.options[i];this.localStorage=new r(this.options.localStorageBundleId),this._loadFromLocalStorage(),this.onChange=new n,this.onChange.add(this._saveToLocalStorage,this)};s.prototype.win=function(t){this.getRewardById(t).owned=!0,this.onChange.dispatch()},s.prototype.lose=function(t){this.getRewardById(t).owned=!1,this.onChange.dispatch()},s.prototype.getRewardById=function(t){for(var e=0;e<this.rewards.length;e++){var i=this.rewards[e];if(i.id===t)return i}return null},s.prototype._saveToLocalStorage=function(){this.localStorage.storeObject("rewards",this.rewards)},s.prototype._loadFromLocalStorage=function(){var t=this.localStorage.getObject("rewards");if(t)for(var e=0;e<t.length;e++){var i=t[e],r=this.getRewardById(i.id);r&&(r.owned=r.owned||i.owned)}},i.exports=s}),define("text!starwars/shaders/swipe.glsl",[],function(){return"precision highp float;\n\n#define PI 3.141592653589\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nuniform float progress;\nuniform vec4 dimensions;\n\nvoid main() {\n  vec2 position = vTextureCoord * 2. - 1.;\n  float angle   = atan(position.y, position.x);\n  float progressAngle = progress * PI * 2.5 - PI * 1.25;\n\n  vec4 color = vec4(0.);\n\n  if(angle > progressAngle) {\n    color = mix(vec4(0.), texture2D(uSampler, vTextureCoord), smoothstep(0., 1., (angle - progressAngle)));\n  }\n\n  gl_FragColor = color;\n}\n"}),define("starwars/filters/SwipeFilter",["require","exports","module","PIXI","text!../shaders/swipe.glsl"],function(t,e,i){function r(){n.AbstractFilter.call(this,null,s,{progress:{type:"f",value:0},dimensions:{type:"4fv",value:[0,0,0,0]}})}var n=t("PIXI"),s=t("text!../shaders/swipe.glsl");r.prototype=Object.create(n.filters.AbstractFilter.prototype),r.prototype.constructor=r,Object.defineProperties(r.prototype,{progress:{get:function(){return this.uniforms.progress.value},set:function(t){this.uniforms.progress.value=t}}}),i.exports=r}),define("starwars/transitions/SwipeTransition",["require","exports","module","starwars/filters/SwipeFilter"],function(t,e,i){var r=t("starwars/filters/SwipeFilter"),n=new t("fido/utils/FrameWait"),s=new r,o=new PIXI.Rectangle(0,0,1e4,1e4);SwipeTransition=function(){},SwipeTransition.constructor=SwipeTransition,SwipeTransition.prototype.begin=function(t,e,i){e.onHide&&e.onHide(),e.filterArea=o,e.filters=[s],t.container.addChildAt(i,0),i.onShow&&i.onShow(),s.progress=0,n.wait(function(){TweenLite.fromTo(s,2,{progress:0},{progress:1,onComplete:function(){t.container.removeChild(e),e.onHidden&&e.onHidden(),i.onShown&&i.onShown(),e.filters=null,t.onTransitionComplete()}})})},SwipeTransition.prototype.resize=function(t,e){this.width=t,this.height=e},i.exports=SwipeTransition}),define("fido/app/Brim",["require","exports","module","fido/system/Ticker","fido/system/Device","signals"],function(t,e,i){var r=t("fido/system/Ticker"),n=t("fido/system/Device"),s=(t("signals"),function(t){if(n.instance.isMobile&&n.instance.safari&&(!n.instance.iOS||!n.instance.chromeIOS)&&n.instance.webGL){var e=this.getSpec();e&&(this.activeCache=!1,this.height=e[0],window.addEventListener("resize",this.onResize.bind(this)),this.div=document.createElement("div"),this.div.style.backgroundColor="#000000",this.div.style.position="absolute",this.div.style.top="0",this.div.style.left="0",this.div.style.width="100%",this.div.style.height="9999999999999999px",this.image=new Image,this.image.src=ASSET_URL+"img/brim.png",this.image.style.position="absolute",this.image.style.top="-40px",this.image.width=500,this.div.appendChild(this.image),this.brimMode=!0,this.p=document.createElement("div"),this.p.innerHTML="oops! swipe up to keep playing!",this.p.style.position="absolute",this.p.style.top="100px",this.p.style.left=0,this.p.style.width="100%",this.p.style.fontSize="1.5rem",this.p.style.fontFamily="Exo2, sans-serif",this.p.style.color="white",this.p.style.textAlign="center",this.p.style.position="absolute",this.p.style.padding=0,document.body.appendChild(this.div),function(){var t;document.addEventListener("touchstart",function(e){this.brimMode&&(t=!0,e.preventDefault(),e.returnValue=!1)},!1),document.addEventListener("touchmove",function(e){this.brimMode&&(t&&(e.preventDefault(),e.returnValue=!1),t=!1)},!1)}(),this.onResize())}});s.prototype.getSpec=function(){for(var t=[[320,480,2,"iPhone 4"],[320,568,2,"iPhone 5 or 5s"],[375,667,2,"iPhone 6"],[414,736,3,"iPhone 6 plus"]],e=0;e<t.length;e++){var i=t[e],r=window.screen.height==i[0]&&window.screen.width==i[1]||window.screen.width==i[0]&&window.screen.height==i[1];if(r)return i}return null},s.prototype.showBrim=function(){this.div.style.visibility="visible",this.div.style.height="9999999999999999px",r.game&&(this.activeCache=r.game.active)},s.prototype.showGame=function(){this.div.style.visibility="hidden",r.game&&this.activeCache&&r.game.start(),this.div.style.height=this.height+1+"px",window.scrollTo(0,0);
},s.prototype.onResize=function(){window.innerHeight>window.innerWidth||window.innerHeight===this.height?this.showGame():this.showBrim(),this.image.width=window.innerWidth,window.scrollTo(0,0)},i.exports=new s}),define("starwars/hud/PopUp",["require","exports","module","PIXI","fido/goals/Goals","fido/sound/SoundManager","fido/utils/FrameWait"],function(t,e,i){var r=t("PIXI"),n=(t("fido/goals/Goals"),t("fido/sound/SoundManager")),s=t("fido/utils/FrameWait"),o=function(){r.Container.call(this),this.goalPanel=new r.Container,this.goalBkg=new r.Sprite.fromFrame("achieve_panel.png"),this.goalBkg.anchor.x=.5,this.goalPanel.addChild(this.goalBkg),this.achievementBullet=r.Texture.fromFrame("challenge_bullet_on.png"),this.goalStar=new r.Sprite(this.achievementBullet),this.goalStar.y=.5*this.goalBkg.height+5,this.goalStar.anchor.set(.5),this.goalPanel.addChild(this.goalStar),this.goalText=new r.Text("hi",{font:"24px "+window.MAIN_FONT,align:"center",fill:"#f3f3eb"}),this.goalText.anchor.set(.5),this.goalText.y=.5*this.goalBkg.height+5,this.goalPanel.addChild(this.goalText),this.addChild(this.goalPanel),this.goalPanel.pivot.y=-40,this.queue=[],this.processing=!1,this.current=null};o.prototype=Object.create(r.Container.prototype),o.prototype.receiveAchievement=function(t){t.type="achievement",this.queue.push(t),this.processQueue()},o.prototype.receiveTrophy=function(t){t.type="trophy",this.queue.push(t),this.processQueue()},o.prototype.processQueue=function(){if(!this.processing){var t=this.queue.pop();if(this.processing=!0,!t)return this.goalPanel.visible=!1,this.processing=!1,void(this.current=null);this.current=t,"achievement"===t.type?this.showAchievement(t):"trophy"===t.type&&this.showTrophy(t)}},o.prototype.showAchievement=function(t){this.goalText.text=t.desc,this.goalText.scale.set(1);var e=Math.min(.85*this.goalBkg.width/this.goalText.width,1);this.goalText.scale.set(e),this.goalStar.x=-(.5*this.goalText.width+5),this.goalText.x=10,this.goalStar.texture=this.achievementBullet,this.goalPanel.visible=!0,this.reveal()},o.prototype.showTrophy=function(t){var e={durasteel:"STR_TROPHY_DURASTEEL",bronze:"STR_TROPHY_BRONZE",silver:"STR_TROPHY_SILVER",gold:"STR_TROPHY_GOLD"};!window.translations[e[t.name]];var i=window.translations[e[t.name]];this.goalText.text=i?i:t.name,this.goalText.scale.set(1);var n=Math.min(.85*this.goalBkg.width/this.goalText.width,1);this.goalText.scale.set(n),this.goalStar.x=-(.5*this.goalText.width+20),this.goalStar.texture=r.Texture.fromFrame(t.image),this.goalPanel.visible=!0,this.reveal()},o.prototype.reveal=function(){r.isWebGL?TweenLite.to(this.goalPanel.pivot,.4,{y:18,easeOut:Expo.easeOut,delay:.2,onComplete:function(){n.sfx.play("earned_achievement"),TweenLite.to(this.goalPanel.pivot,.4,{y:-40,easeOut:Expo.easeIn,delay:6,onComplete:function(){this.processing=!1,this.processQueue()}.bind(this)})}.bind(this)}):(n.sfx.play("earned_achievement"),this.goalPanel.pivot.y=18,s.wait(function(){this.goalPanel.pivot.y=-40,this.processing=!1,this.processQueue()}.bind(this),360))},o.prototype.restart=function(){this.processing=!1,this.goalPanel.visible=!0,this.current&&this.queue.push(this.current),this.processQueue()},o.prototype.stop=function(){this.processing=!0,TweenLite.killTweensOf(this.goalPanel.pivot),r.isWebGL?TweenLite.to(this.goalPanel.pivot,.4,{y:-40,easeOut:Expo.easeIn,overwrite:!0}):this.goalPanel.pivot.y=-40},i.exports=o}),define("starwars/app/TopMenu",["require","exports","module","PIXI","starwars/buttons/GoldenButton","fido/sound/SoundBridge","fido/system/Device","starwars/hud/PopUp","fido/goals/Goals","fido/goals/Trophies"],function(t,e,i){var r=t("PIXI"),n=t("starwars/buttons/GoldenButton"),s=t("fido/sound/SoundBridge"),o=(t("fido/system/Device"),t("starwars/hud/PopUp")),a=t("fido/goals/Goals"),h=t("fido/goals/Trophies"),l=function(t){this.app=t,r.Container.call(this),this.mode="",this.alpha=0,this.muteButton=new n("icon_mute.png"),this.muteButton.cacheAsBitmap=!1,this.muteButton.visible=!1,this.muteButton.cacheAsBitmap=!0,this.muteButton.setSize("small"),this.addChild(this.muteButton.view),this.muteButton.onPress.add(this.onButtonPressed,this),this.pauseButton=new n("icon_pause.png"),this.pauseButton.cacheAsBitmap=!1,this.pauseButton.visible=!1,this.pauseButton.cacheAsBitmap=!0,this.pauseButton.setSize("small"),this.addChild(this.pauseButton.view),this.pauseButton.onPress.add(this.onButtonPressed,this),this.helpButton=new n("icon_help.png"),this.helpButton.cacheAsBitmap=!1,this.helpButton.visible=!1,this.helpButton.cacheAsBitmap=!0,this.helpButton.setSize("small"),this.addChild(this.helpButton.view),this.helpButton.onPress.add(this.onButtonPressed,this),this.backButton=new n("icon_next.png"),this.backButton.scale.x*=-1,this.backButton.cacheAsBitmap=!1,this.backButton.visible=!1,this.backButton.cacheAsBitmap=!0,this.backButton.setSize("small"),this.backButton.onPress.add(this.onButtonPressed,this),this.addChild(this.backButton.view),this.homeButton=new n("inner_disc_red_small.png"),this.homeButton.cacheAsBitmap=!1,this.homeButton.visible=!1,this.homeButton.cacheAsBitmap=!0,this.homeButton.setSize("small"),this.homeButton.view.x=82,this.homeButton.view.y=64,this.homeButton.onPress.add(this.onButtonPressed,this),this.addChild(this.homeButton.view),this.hamburgerButton=new n("icon_burger.png"),this.hamburgerButton.cacheAsBitmap=!1,this.hamburgerButton.visible=!1,this.hamburgerButton.cacheAsBitmap=!0,this.hamburgerButton.setSize("small"),this.hamburgerButton.view.x=80,this.hamburgerButton.view.y=64,this.hamburgerButton.onPress.add(this.onButtonPressed,this),this.addChild(this.hamburgerButton.view),this.coinContainer=new r.Container,this.coinContainer.visible=!1,this.coinContainer.x=175,this.coinContainer.y=60,this.addChild(this.coinContainer),this.coinsText=new r.extras.BitmapText(this.app.shopSystem.getMoney().toString(),{font:"38px Star Jedi"}),this.coinsText.pivot.y=.5*this.coinsText.height,this.coinsText.x=40,this.coinsText.y=-14,this.coinContainer.addChild(this.coinsText),this.coins=[];for(var e=0;e<10;e++){var i=new r.Sprite.fromFrame("hangar_token_3D_10.png");i.visible=!1,i.anchor.set(.5),this.coins.push(i),this.addChild(i)}this.coinIcon=new r.Sprite.fromFrame("coin_ui.png"),this.coinIcon.anchor.set(.5),this.coinContainer.addChild(this.coinIcon),this.goalPanel=new o,this.addChild(this.goalPanel),a.instance.achievementUnlocked.add(this.showCurrentGoal,this),h.instance.onTrophyEarned.add(this.showTrophy,this),this.app.shopSystem.onChange.add(this.onShopSystemChange,this),s.sfx.onMuteToggle.add(this.onMuteToggle,this),s.music.onMuteToggle.add(this.onMuteToggle,this),this.setMode("normal")};l.prototype=Object.create(r.Container.prototype),l.prototype.showCurrentGoal=function(t){this.goalPanel.receiveAchievement(t)},l.prototype.showTrophy=function(t){this.goalPanel.receiveTrophy(t)},l.prototype.onShopSystemChange=function(){this.coinsText.text=this.app.shopSystem.getMoney().toString()},l.prototype.show=function(t){t=void 0!==t?t:.4,this.interactive=!0,this.interactiveChildren=!0,TweenLite.to(this,t,{alpha:1})},l.prototype.hide=function(t){t=void 0!==t?t:.4,this.interactive=!1,this.interactiveChildren=!1,t?TweenLite.to(this,t,{alpha:0}):this.alpha=0},l.prototype.setMode=function(t){this.mode=t;var e="Rebels"===this.app.id||"Runner"===this.app.id||"Fighter"===this.app.id;/game/.test(t)?this.pauseButton.show():this.pauseButton.hide(),this.hamburgerButton.visible=!!(/arcade/.test(t)||/title/.test(t)&&e),/pause|normal|arcade|title|levels|tutorial/.test(t)?this.muteButton.show():this.muteButton.hide(),/pause|normal|arcade|title|levels/.test(t)?this.helpButton.show():this.helpButton.hide(),/pause/.test(t)?this.backButton.show():this.backButton.hide(),/pause/.test(t)?this.homeButton.show():this.homeButton.hide(),/arcade|token/.test(t)?(this.coinContainer.visible=!0,TweenMax.to(this.coinContainer,.4,{alpha:1})):TweenMax.to(this.coinContainer,.4,{alpha:0,onComplete:function(){this.coinContainer.visible=!1},onCompleteScope:this})},l.prototype.getMode=function(){return this.mode},l.prototype.onButtonPressed=function(t){t===this.pauseButton?this.app.overlayManager.show("pause"):t===this.backButton?this.app.overlayManager.show("pause"):t===this.hamburgerButton?this.app.overlayManager.show("menu"):t===this.homeButton?(this.app.overlayManager.hide(),this.app.screenManager.show("title")):t===this.helpButton?this.app.overlayManager.show("tutorial"):t===this.muteButton&&this.toggleMute()},l.prototype.addCoin=function(t,e){function i(t){t.visible=!1,this.app.shopSystem.earnMoney(10),s.sfx.play("coin_count")}t=t||10,e||(e=new r.Sprite,e.x=.5*this.screenWidth,e.y=.5*this.screenHeight,e.scale.set(3),e.alpha=0);for(var n=this.coinIcon.scale.x,o=Math.floor(t/10),a=0;a<o;a++){var h=this.coins[a];h.x=e.x,h.y=e.y,h.alpha=e.alpha,h.scale.copy(e.scale),h.visible=!0;var l=.2+.1*Math.random(),c=.1*a+.1*Math.random();TweenLite.to(h,l,{bezier:[{x:h.x+.5*(this.coinContainer.x-h.x),y:h.y+.5*(this.coinContainer.y-h.y)-50},{x:this.coinContainer.x,y:this.coinContainer.y}],width:this.coinIcon.width,height:this.coinIcon.height,alpha:this.coinIcon.alpha,delay:c,onCompleteScope:this,onCompleteParams:[h],onComplete:i}),TweenLite.to(this.coinIcon.scale,.1,{x:2*n,y:2*n,delay:l+c}),TweenLite.to(this.coinIcon.scale,1,{x:n,y:n,ease:Elastic.easeOut,delay:l+c+.1})}},l.prototype.goBack=function(){this.app.overlayManager.hide(),this.app.screenManager.goBack()},l.prototype.toggleMute=function(){var t;return s.sfx.isMuted&&s.music.isMuted?(s.music.unmute(),s.sfx.unmute(),t=!1):(s.music.mute(),s.sfx.mute(),t=!0),this.onMuteToggle(),t},l.prototype.onMuteToggle=function(){s.sfx.isMuted&&s.music.isMuted?this.muteButton.setIcon("icon_mute_off.png"):this.muteButton.setIcon("icon_mute.png")},l.prototype.onShown=function(){},l.prototype.resize=function(t,e){if(this.screenWidth=t,this.screenHeight=e,this.backButton.view.x=82,this.backButton.view.y=64,this.goalPanel.x=t/2,this.goalPanel.y=e-35,this.isMobile){var i=100,r=20;this.muteButton.position.set(t-i-r,64),this.helpButton.view.position.set(t-i-r-110,64),this.pauseButton.view.x=this.muteButton.x,this.pauseButton.view.y=this.muteButton.y}else{var i=45,r=30;this.muteButton.position.set(t-i-r,64),this.helpButton.view.position.set(t-i-r-110,64),this.pauseButton.view.x=this.muteButton.x,this.pauseButton.view.y=this.muteButton.y}},i.exports=l}),define("starwars/OverlayManager",["require","exports","module","PIXI","signals","fido/app/ScreenManager","fido/app/transitions/DigitalTransition","starwars/buttons/GoldenButton","fido/app/Screen"],function(t,e,i){var r=t("PIXI"),n=t("signals"),s=t("fido/app/ScreenManager"),o=t("fido/app/transitions/DigitalTransition"),a=t("starwars/buttons/GoldenButton"),h=t("fido/app/Screen"),l=function(t){this.app=t,this.view=new r.Container,s.call(this),this.defaultTransition=new o,this.addScreen(new h,"empty"),this.screens.empty.hasClose=!1,this.currentScreen=this.screens.empty,this.onShow=new n,this.onHide=new n,r.isWebGL?(this.black=(new r.Graphics).beginFill(6962028).drawRect(0,0,100,100),this.black.alpha=.7,this.black.interactive=!0,this.black.blendMode=r.isWebGL?r.BLEND_MODES.MULTIPLY:0,this.black.hitArea=new r.Rectangle(0,0,1e4,1e4)):(this.black=(new r.Graphics).beginFill(0).drawRect(0,0,100,100),this.black.alpha=.6,this.black.interactive=!0,this.black.hitArea=new r.Rectangle(0,0,1e4,1e4)),this.view.visible=!1,!Device.instance.ie&&r.isWebGL&&(this.rt=new r.RenderTexture(this.app.renderer,1136,745,0,.25),this.bg=new r.Sprite(this.rt),this.view.addChild(this.bg),this.blurX=new r.filters.BlurXFilter,this.blurX.blur=30,this.blurY=new r.filters.BlurYFilter,this.blurY.blur=30,this.blurX.passes=8,this.blurY.passes=8),this.closeButton=new a("icon_close.png"),this.closeButton.setSize("small"),this.closeButton.backgroundColor="red",this.closeButton.onPress.add(this.goBack,this),this.closeButton.hide(),this.closeButton.x=this.app.safeSize.width/2+240,this.closeButton.y=this.app.safeSize.height/2-190,this.view.addChild(this.black),this.view.addChild(this.container),this.view.addChild(this.closeButton),this.app.screenManager.container.filterArea=new r.Rectangle(0,0,1e4,1e4)};l.prototype=Object.create(s.prototype),l.prototype.goBack=function(){if(this.currentScreen.backToCompletionScreen)this.completionScreen.animateStars=!1,this.gotoScreenByID("completion");else if(this.currentScreen.backToEndlessCompletionScreen)this.gotoScreenByID("endless");else{this.history.pop();var t=this.history.pop();t?this.gotoScreen(t):this.hide()}},l.prototype.glitch=function(){},l.prototype.show=function(t){var e=this.app.screenManager.container;e.filters=[this.blurX,this.blurY],!Device.instance.ie&&r.isWebGL&&this.rt.render(e),e.filters=null,this.history=[],this.gotoScreenByID(t,!0),this.onShow.dispatch(),this.view.visible=!0,this.view.alpha=0,TweenLite.to(this.view,.3,{alpha:1})},l.prototype.gotoScreen=function(t){t===this.screens.empty&&(t.transition=this.currentScreen.transition);var e=(void 0===t.hasBackground||t.hasBackground===!0)&&t!==this.screens.empty;!Device.instance.ie&&r.isWebGL&&(this.bg.visible=e),this.black.visible=e,void 0===t.hasClose||t.hasClose===!0?this.closeButton.show():this.closeButton.hide(),s.prototype.gotoScreen.call(this,t)},l.prototype.hide=function(){this.history=[],this.closeButton.hide(),TweenLite.to(this.view,.3,{alpha:0,onComplete:function(){this.gotoScreenByID("empty"),this.view.visible=!1,this.onHide.dispatch()}.bind(this)})},l.prototype.resize=function(t,e){this.black.scale.set(t/100,e/100),s.prototype.resize.call(this,t,e)},l.prototype.onFadeout=function(){this.currentScreen&&(this.currentScreen.onHidden&&this.currentScreen.onHidden(),this.container.removeChild(this.currentScreen)),this.currentScreen=this.nextScreen,this.currentScreen.alpha=0,this.currentScreen.onShow&&this.currentScreen.onShow(),this.currentScreen.resize&&this.currentScreen.resize(this.w,this.h),TweenLite.to(this.currentScreen,.4,{alpha:1,onComplete:this.onFadein.bind(this)}),this.container.addChild(this.currentScreen)},i.exports=l}),define("com/arcade/app/buttons/TextButton",["require","exports","module","PIXI","starwars/buttons/GoldenButton"],function(t,e,i){var r=t("PIXI"),n=t("starwars/buttons/GoldenButton"),s=function(t){n.call(this),this.text=t,this._textSprite=new r.Text(this.text,{font:"30px sans-serif",fill:"#FFFFFF"}),this._textSprite.anchor.set(.5),this.view.addChild(this._textSprite)};s.prototype=Object.create(n.prototype),s.prototype.setText=function(t){this.text=t,this._textSprite.text=t},i.exports=s}),define("com/arcade/app/overlay/rewards/RewardItem",["require","exports","module","PIXI","com/arcade/app/buttons/TextButton","signals"],function(t,e,i){var r=t("PIXI"),n=(t("com/arcade/app/buttons/TextButton"),t("signals"),function(t){r.Container.call(this),this.data=t;var e=/img\//.test(this.data.thumbnail)?"fromImage":"fromFrame";return this.sprite=new r.Sprite[e](this.data.thumbnail),this.sprite.anchor.set(.5),this.addChild(this.sprite),this.padlock=new r.Sprite.fromImage(ASSET_URL+"img/game/padlock.png"),this.padlock.anchor.set(.5),this.padlock.scale.set(.2),this.addChild(this.padlock),this.update(),this});n.prototype=Object.create(r.Container.prototype),n.prototype.update=function(){this.padlock.visible=!this.data.owned,this.sprite.tint=this.data.owned?16777215*Math.random():6710886},i.exports=n}),define("starwars/effects/interferences/LogoRebel",["require","exports","module","PIXI"],function(t,e,i){var r=t("PIXI"),n=function(t){r.Container.call(this),this.counter=0,this.logo=new r.Sprite,this.logo.anchor.set(.5),this.logo.position.y=-70,this.positions=[],this.addChild(this.logo)};n.prototype=Object.create(r.Container.prototype),n.prototype.random=function(t,e){this.logo.position=this.positions[Math.floor(Math.random()*this.positions.length)]},n.prototype.reset=function(t,e){this.logo.texture=new r.Texture.fromFrame("logorebels.png"),this.positions=[new r.Point(-t/2+this.logo.width/2+30,-e/2+this.logo.height/2+10),new r.Point(-t/2+this.logo.width/2+20,e/2-this.logo.height/2-10),new r.Point(t/2-this.logo.width/2-20,e/2-this.logo.height/2-10),new r.Point(t/2-this.logo.width/2-30,-e/2+this.logo.height/2+10)]},n.prototype.updateTransform=function(){r.Container.prototype.updateTransform.call(this),this.counter+=1,this.logo.alpha=Math.abs(.3*Math.sin(.5*Math.tan(this.counter)))+.3},i.exports=n}),define("starwars/effects/interferences/Line",["require","exports","module","PIXI","signals"],function(t,e,i){var r=t("PIXI"),n=t("signals"),s=function(t){r.Container.call(this),this.heightLine=t,this.counter=0,this.isBlinking=!1,this.blinkLives=3,this.onHide=new n;var e=new r.Graphics;e.beginFill(16777215).drawRect(0,0,1,this.heightLine),this.line=new r.Sprite(e.generateTexture()),this.line.anchor.set(.5),this.line.tint="0x2996ad",this.addChild(this.line),this.squares=[];for(var i=0;i<3;i++){var s=new r.Graphics;s.beginFill(16777215).drawRect(0,0,100*Math.random()+20,30*Math.random()+5);var o=new r.Sprite(s.generateTexture());o.tint="0x2996ad",o.position.y=-this.heightLine/2+Math.random()*this.heightLine,o.alpha=.7*Math.random()+.2,o.speed=5*Math.random()-2.5;var a=Math.random()>.5?0:1;a?o.anchor.x=0:o.anchor.x=1,this.line.addChild(o),this.squares.push(o)}};s.prototype=Object.create(r.Container.prototype),s.prototype.reset=function(){this.blinkLives=3,this.alpha=1,this.isBlinking=!1,this.isDead=!1;for(var t=0;t<this.squares.length;t++)this.squares[t].speed=5*Math.random()-2.5},s.prototype.disappear=function(){this.isBlinking=!0},s.prototype.updateTransform=function(){if(r.Container.prototype.updateTransform.call(this),this.counter+=1,!this.isDead){this.isBlinking&&(this.counter%4===0&&this.blinkLives>=0?(this.blinkLives--,this.alpha=this.alpha>0?0:1):(this.alpha=0,this.isDead=!0,this.onHide.dispatch()));for(var t=0;t<this.squares.length;t++){var e=this.squares[t];e.position.y+=e.speed,(e.position.y>=this.heightLine/2-50||e.position.y<=-this.heightLine/2-e.height)&&(e.position.y=-this.heightLine/2+Math.random()*this.heightLine,e.speed=5*Math.random()-2.5,e.alpha=.7*Math.random()+.2,e.scale.x=.2*Math.random()+.8,e.scale.y=.2*Math.random()+.8)}}},i.exports=s}),define("starwars/effects/interferences/TechnoLines",["require","exports","module","PIXI","./Line"],function(t,e,i){var r=t("PIXI"),n=t("./Line"),s=function(){r.Container.call(this),this.dimensions={width:400,height:400},this.counter=0,this.lines=[]};s.prototype=Object.create(r.Container.prototype),s.prototype.reset=function(t,e){this.dimensions.width=t,this.dimensions.height=e,this.counter=0,this.lines=[];for(var i=0;i<3;i++){var r=new n(this.dimensions.height);r.life=100*Math.random(),r.position.x=Math.random()*this.dimensions.width-this.dimensions.width/2,r.onHide.add(this.replace.bind(this,r)),this.lines.push(r),this.addChild(r)}},s.prototype.replace=function(t){t.position.x=Math.random()*this.dimensions.width-this.dimensions.width/2,t.life=100*Math.random(),t.reset()},s.prototype.updateTransform=function(){r.Container.prototype.updateTransform.call(this),this.counter+=1;for(var t=0;t<this.lines.length;t++){var e=this.lines[t];e.life>=0?e.life--:e.disappear()}this.alpha=Math.abs(.3*Math.sin(Math.tan(this.counter)))+.65},i.exports=s}),define("starwars/effects/interferences/Chip",["require","exports","module","PIXI","./Chip"],function(t,e,i){var r=t("PIXI"),n=t("./Chip"),n=function(t,e){r.Container.call(this),this.counter=0,this.lifeMove=100*Math.random(),this.lifeScale=100*Math.random(),this.dimensions={width:t||200,height:e||200},this.posx=0,this.posy=0,this.widthTarget=100*Math.random()+50,this.heightTarget=100*Math.random()+50,this.tl=new r.Sprite.fromFrame("corner_top_left.png"),this.addChild(this.tl),this.tr=new r.Sprite.fromFrame("corner_top_right.png"),this.addChild(this.tr),this.bl=new r.Sprite.fromFrame("corner_bottom_left.png"),this.addChild(this.bl),this.br=new r.Sprite.fromFrame("corner_bottom_right.png"),this.addChild(this.br)};n.prototype=Object.create(r.Container.prototype),n.prototype.reset=function(t,e){this.dimensions={width:t,height:e}},n.prototype.animateMovement=function(){var t=.9*(Math.random()*this.dimensions.width-this.dimensions.width/2),e=.9*(Math.random()*this.dimensions.height-this.dimensions.height/2);TweenLite.to(this,.2,{posx:t,posy:e,onComplete:function(){this.isMoving=!1,this.lifeMove=150*Math.random()+30}.bind(this)})},n.prototype.animateScale=function(){var t=40*Math.random()+20,e=40*Math.random()+20;TweenLite.to(this,.2,{widthTarget:t,heightTarget:e,onComplete:function(){this.isScaling=!1,this.lifeScale=110*Math.random()}.bind(this)})},n.prototype.updateTransform=function(){r.Container.prototype.updateTransform.call(this),this.counter+=1,this.lifeScale>=0&&!this.isScaling?this.lifeScale--:this.isScaling||(this.isScaling=!0,this.animateScale()),this.lifeMove>=0&&!this.isMoving?this.lifeMove--:this.isMoving||(this.isMoving=!0,this.animateMovement()),this.tl.position.x=-this.widthTarget/2+this.posx,this.tl.position.y=-this.heightTarget/2+this.posy,this.tr.position.x=this.widthTarget/2+this.posx,this.tr.position.y=-this.heightTarget/2+this.posy,this.bl.position.x=-this.widthTarget/2+this.posx,this.bl.position.y=this.heightTarget/2+this.posy,this.br.position.x=this.widthTarget/2+this.posx,this.br.position.y=this.heightTarget/2+this.posy,this.alpha=Math.abs(.4*Math.sin(Math.tan(this.counter)))+.1},i.exports=n}),define("starwars/effects/interferences/TargetCorners",["require","exports","module","PIXI","./Chip"],function(t,e,i){var r=t("PIXI"),n=t("./Chip"),s=function(t){r.Container.call(this),this.numberOfChips=t,this.chips=[]};s.prototype=Object.create(r.Container.prototype),s.prototype.reset=function(t,e){this.chips=[];for(var i=0;i<this.numberOfChips;i++){var r=new n;r.reset(t,e),this.addChild(r),this.chips.push(r)}},i.exports=s}),define("starwars/effects/interferences/GridLetters",["require","exports","module","PIXI","./Line"],function(t,e,i){var r=t("PIXI"),n=(t("./Line"),function(t,e){r.Container.call(this),this.letters=[],this.lettersRef="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("")});n.prototype=Object.create(r.Container.prototype),n.prototype.reset=function(t,e){this.counter=0;for(var i=0,n=0,s=0;s<5;s++){for(var o=0;o<10;o++){var a=new r.extras.BitmapText(this.lettersRef[Math.floor(Math.random()*this.lettersRef.length)],{font:"12px Aurek-Besh Narrow"});a.position.x=i,a.position.y=n,a.isFadingOut=!1,a.counter=Math.floor(20*Math.random()),a.divide=Math.floor(5*Math.random()+3),a.alpha=.4*Math.random()+.2,this.addChild(a),this.letters.push(a),i+=12}i=0,n+=20}this.pivot.x=this.width/2,this.pivot.y=this.height/2},n.prototype.random=function(t,e){this.position.x=Math.random()*t-t/2,this.position.y=Math.random()*e-e/2},n.prototype.updateTransform=function(){r.Container.prototype.updateTransform.call(this),this.counter+=1;for(var t=0;t<this.letters.length;t++)l=this.letters[t],l.counter++,l.counter%l.divide===0&&(l.text=this.lettersRef[Math.floor(Math.random()*this.lettersRef.length)]),l.counter%l.divide!==0||l.isFadingOut?l.alpha>=.1?(l.isFadingOut=!0,l.alpha*=.99):l.isFadingOut=!1:(l.alpha=1,l.isFadingOut=!0)},i.exports=n}),define("starwars/effects/interferences/Diagram",["require","exports","module","PIXI"],function(t,e,i){var r=t("PIXI"),n=function(t){r.Container.call(this),this.bars=[],this.numberOfBars=t||5};n.prototype=Object.create(r.Container.prototype),n.prototype.random=function(t,e){this.position.x=-t/2+this.width/2+Math.random()*(t-this.width)},n.prototype.reset=function(t,e){this.bars=[];for(var i=0,n=0,s=0;s<this.numberOfBars;s++){var o=8*Math.random()+2,a=new r.Graphics;a.beginFill(16777215).drawRect(0,0,o,40).endFill();var h=new r.Sprite(a.generateTexture());h.counter=100*Math.random(),h.anchor.y=1,h.timeBeforeSleep=100*Math.random()+50,h.timeBeforeWake=null,h.amplitude=Math.random()+.5,i+=n+2,h.position.x=i,n=o,this.addChild(h),this.bars.push(h)}this.position.y=e/2-this.height/2+8},n.prototype.updateTransform=function(){r.Container.prototype.updateTransform.call(this);for(var t=0;t<this.bars.length;t++){var e=this.bars[t];if(e.timeBeforeSleep>0&&null===e.timeBeforeWake){e.timeBeforeSleep--;var i=.5*Math.random();e.counter+=i,e.scale.y=Math.abs(Math.cos(e.counter/4)*e.amplitude)}else e.timeBeforeSleep<=0&&null===e.timeBeforeWake?e.timeBeforeWake=50*Math.random():e.timeBeforeWake>=0?e.timeBeforeWake--:(e.timeBeforeWake=null,e.timeBeforeSleep=100*Math.random()+50);e.alpha=Math.abs(.3*Math.sin(Math.tan(e.counter)))+.2}},i.exports=n}),define("starwars/overlays/OverlayTitle",["require","exports","module","PIXI"],function(t,e,i){var r=t("PIXI"),n=function(){r.Container.call(this),this.title=null,window.FONTS_EXTENDED?(this.title=new r.Text("",{font:"45px "+window.MAIN_FONT,fill:"#fed95c",stroke:"#fddd54",strokeThickness:1}),this.title.anchor.x=.5,this.blurredTitle=new r.Text("",{font:"45px "+window.MAIN_FONT,fill:"#ffbc29"}),this.blurredTitle.anchor.x=.5,this.blurredTitle.alpha=.8,this.blurredTitle.position=this.title.position,this.addChild(this.title),this.addChild(this.blurredTitle),this.blurFilter=new r.filters.BlurFilter,this.blurFilter.passes=5,this.blurFilter.blur=40):(this.title=new r.extras.BitmapText("",{font:"46px Star Jedi"}),this.title.pivot.y=68,this.addChild(this.title))};n.prototype=Object.create(r.Container.prototype),n.prototype.onHide=function(){window.FONTS_EXTENDED&&(this.blurredTitle.filters=null)},Object.defineProperties(n.prototype,{text:{get:function(){return this.title.text},set:function(t){window.FONTS_EXTENDED?(this.title.text=t.toUpperCase(),this.blurredTitle.text=this.title.text,this.blurredTitle.filters=r.isWebGL?[this.blurFilter]:null):(this.title.text=t.toLowerCase(),this.title.position.x=-this.title.width/2);var e=420/this.title.width;this.scale.set(Math.min(e,1))}}}),i.exports=n}),define("starwars/overlays/Overlay",["require","exports","module","PIXI","fido/system/Ticker","../filters/GlitchCathodic","../effects/interferences/LogoRebel","../effects/interferences/TechnoLines","../effects/interferences/TargetCorners","../effects/interferences/GridLetters","../effects/interferences/Diagram","starwars/overlays/OverlayTitle","fido/app/Screen","fido/system/Device"],function(t,e,i){var r=t("PIXI"),n=t("fido/system/Ticker"),s=t("../filters/GlitchCathodic"),o=t("../effects/interferences/LogoRebel"),a=t("../effects/interferences/TechnoLines"),h=t("../effects/interferences/TargetCorners"),l=t("../effects/interferences/GridLetters"),c=t("../effects/interferences/Diagram"),u=t("starwars/overlays/OverlayTitle"),d=t("fido/app/Screen"),p=t("fido/system/Device"),f=null,m=null,g=null,v=null,_=null,y=function(t,e){d.call(this),this.app=t,this.counter=0,this.hasClose=!1,this.disableFilters=e||!1,this.screen=new r.Sprite.fromFrame("inner_panel_blue_medium.png"),this.screen.anchor.set(.5),this.screen.position.y=-10,this.addChild(this.screen),this.currentInterference=null,f||!r.isWebGL||p.instance.iOS||this.disableFilters||(f=new a,f.reset(this.screen.width,this.screen.height),m=new h(2),m.reset(this.screen.width,this.screen.height),g=new l,g.reset(this.screen.width,this.screen.height),v=new c(12),v.reset(this.screen.width,this.screen.height),_=new o(8),_.reset(this.screen.width,this.screen.height)),this.containerInterference=new r.Container,this.screen.addChild(this.containerInterference),this.interferences=[m,g,v,_],this.bg=new r.Sprite.fromFrame("panel_frame_medium.png"),this.bg.anchor.set(.5),this.addChild(this.bg),!r.isWebGL||p.instance.iOS||this.disableFilters||(this.glitchFilter=new s,this.screen.filters=[this.glitchFilter]),this.title=new u,this.title.position.y=.5*-this.bg.height-this.title.height+5,this.addChild(this.title);var i=[-207.5,-194,213.5,-188,242.5,-166,260.5,135,228.5,164,-232.5,164,-260.5,142,-239.5,-171],n=new r.Graphics;n.clear().beginFill(16777215).drawPolygon(i),this.screen.mask=n,this.bg.addChild(n)};y.prototype=Object.create(d.prototype),y.prototype.onShow=function(){n.instance.add(this.update,this),this.app.topMenu.hide(),r.isWebGL&&!p.instance.iOS&&(this.containerInterference.alpha=.5,this.containerInterference.addChild(f),this.currentInterference=this.interferences[Math.floor(Math.random()*this.interferences.length)],this.currentInterference.random&&this.currentInterference.random(this.screen.width,this.screen.height),this.containerInterference.addChild(this.currentInterference))},y.prototype.update=function(){!r.isWebGL||p.instance.iOS||this.disableFilters||(this.counter-=.04,this.glitchFilter.uniforms.time.value=this.counter)},y.prototype.onHide=function(){r.isWebGL&&!p.instance.iOS&&this.containerInterference.removeChild(this.currentInterference),this.app.topMenu.show()},y.prototype.onHidden=function(){n.instance.remove(this.update,this)},y.prototype.resize=function(t,e){this.w=t,this.h=e,this.x=t/2,this.y=e/2},i.exports=y}),define("com/arcade/app/overlay/rewards/RewardsOverlay",["require","exports","module","PIXI","./RewardItem","starwars/overlays/Overlay"],function(t,e,i){var r=(t("PIXI"),t("./RewardItem")),n=t("starwars/overlays/Overlay"),s=function(t){n.call(this,t),this.rewardSystem=this.app.rewardSystem,this.hasClose=!0;var e=160,i=160,s=-160,o=-100;this.rewardItems=[];for(var a=0;a<this.rewardSystem.rewards.length;a++){var h=this.rewardSystem.rewards[a],l=new r(h);l.x=e*(a%3)+s,l.y=i*Math.floor(a/3)+o,l.scale.set(.8),this.addChild(l)}this.rewardSystem.onChange.add(this.update,this)};s.prototype=Object.create(n.prototype),s.prototype.update=function(){for(var t=0;t<this.rewardItems.length;t++){var e=this.rewardItems[t];e.update()}},s.prototype.resize=function(t,e){this.x=t/2,this.y=e/2},i.exports=s}),define("starwars/overlays/AchievementBoard",["require","exports","module","PIXI","fido/utils/Utils","fido/system/Ticker","fido/loader/Cache"],function(t,e,i){var r=t("PIXI"),n=(t("fido/utils/Utils"),t("fido/system/Ticker"),t("fido/loader/Cache")),s=function(t){r.Container.call(this),this.list=[],this.realHeight=0,this.viewHeight=t.frameHeight||240,this.viewWidth=t.frameWidth||800,this.scoreViewHeight=t.lineHeight||40,this.padding="object"==typeof t.padding?t.padding:{top:0,right:0,bottom:0,left:0},this.container=new r.Container,this.addChild(this.container),this.maskGraphic=(new r.Graphics).beginFill(16711680,.4).drawRect(-5,40,this.viewWidth,this.viewHeight),this.addChild(this.maskGraphic),this.container.mask=this.maskGraphic,this.containerScrollbar=new r.Container,this.containerScrollbar.position.x=5,this.containerScrollbar.viewHeight=t.frameHeight||240,this.containerScrollbar.viewWidth=t.frameWidth||800,this.addChild(this.containerScrollbar),this.containerScrollbar.realHeight=this.containerScrollbar.viewHeight+2*this.scoreViewHeight,this.realHeight=this.containerScrollbar.viewHeight+1.4*this.scoreViewHeight;for(var e=Math.floor(this.containerScrollbar.realHeight/this.scoreViewHeight),i=0;i<e;i++){var n=new o(i);this.container.addChild(n),n.position.y=i*this.scoreViewHeight,this.list.push(n)}this.dirty=!0};s.constructor=s,s.prototype=Object.create(r.Container.prototype),Object.defineProperty(s.prototype,"scrollPosition",{get:function(){return this._scrollPosition},set:function(t){this._scrollPosition=t,this.updateScrollPosition()}}),s.prototype.onShow=function(){OverlayScreen.prototype.onShow.call(this),r.isWebGL&&(this.containerInterference.alpha=.2)},s.prototype.setData=function(t){this.data=t;for(var e=0;e<this.list.length;e++){var i=this.list[e];i.id=99999}this.alpha=0,TweenLite.to(this,.3,{alpha:1}),this.scrollHeight=t.length*this.scoreViewHeight+this.padding.top+this.padding.bottom,this.dirty=!0,this.updateScrollPosition()},s.prototype.updateScrollPosition=function(){if(this.data){for(var t=0;t<this.list.length;t++){var e=this.list[t];e.position.y=t*this.scoreViewHeight+this._scrollPosition+this.padding.top,e.position.y+=this.scoreViewHeight;var i=Math.floor((e.position.y+40)/this.realHeight);i*=this.list.length,i-=t,i*=-1,e.id!=i&&(e.id=i,0!==i?(e.visible=e.id>=0&&e.id<this.data.length,e.visible&&e.setData(this.data[i])):e.visible=!1),e.position.y%=this.realHeight,e.position.y<0&&(e.position.y+=this.realHeight),e.position.y-=this.scoreViewHeight;
}this.dirty=!1}},s.prototype.disappear=function(){for(var t=0;t<this.list.length;t++){var e=this.list[t];TweenLite.to(e,.4,{alpha:0}),TweenLite.to(this.containerScrollbar.position,.4,{x:200})}},s.prototype.appear=function(){for(var t=0;t<this.list.length;t++){var e=this.list[t];TweenLite.to(e,.4,{alpha:1}),TweenLite.to(this.containerScrollbar.position,.4,{x:5})}};var o=function(t){r.Container.call(this),this.lineHeight=90,this.x=150,this.marker=new r.Sprite.fromFrame("icon_pause.png"),this.dotOn=r.Texture.fromFrame("challenge_bullet_on.png"),this.dotOff=r.Texture.fromFrame("challenge_bullet_off.png"),this.styleAchieved={font:"18px "+window.MAIN_FONT,fill:"#ccffff",align:window.FLIP_LANGUAGE?"right":"left",wordWrap:!0,lineHeight:21,wordWrapWidth:315},this.styleNonAchieved={font:"18px "+window.MAIN_FONT,fill:"#87b2c4",align:window.FLIP_LANGUAGE?"right":"left",wordWrap:!0,lineHeight:21,wordWrapWidth:315},this.labelNumber=new r.Text("0",this.styleNonAchieved),this.labelNumber.position.x=60,this.labelNumber.anchor.y=0,this.labelNumber.y=this.lineHeight/2,this.labelName=new r.Text("0",this.styleNonAchieved),this.labelName.position.x=92,this.labelName.anchor.y=0,this.labelName.y=this.lineHeight/2,this.marker.anchor.x=.5,this.marker.anchor.y=0,this.marker.x=30,this.marker.y=this.lineHeight/2-2+2,this.marker.alpha=.6,this.addChild(this.marker),this.addChild(this.labelNumber),this.addChild(this.labelName),this.flipPercentage="true"===n.getJson("config").FLIP_PERCENT,window.FLIP_LANGUAGE&&(this.marker.position.x=400,this.labelName.anchor.x=1,this.labelName.position.x=355,this.labelNumber.anchor.x=1,this.labelNumber.position.x=380)};o.constructor=o,o.prototype=Object.create(r.Container.prototype),o.prototype.setData=function(t){t.achieved?(this.marker.texture=this.dotOn,this.labelName.style=this.styleAchieved,this.labelNumber.style=this.styleAchieved,this.marker.texture=this.dotOn,this.marker.alpha=1):(this.marker.texture=this.dotOff,this.labelName.style=this.styleNonAchieved,this.labelNumber.style=this.styleNonAchieved,this.marker.alpha=.6),window.FLIP_LANGUAGE?(this.labelNumber.text="."+this.id,this.labelName.text="(%"+Math.round(t.completion)+") "+t.desc.toUpperCase()):(this.labelNumber.text=this.id+".",this.flipPercentage?this.labelName.text=t.desc.toUpperCase()+" (%"+Math.round(t.completion)+")":this.labelName.text=t.desc.toUpperCase()+" ("+Math.round(t.completion)+"%)")},i.exports=s}),define("fido/ui/PixiScrollbar_",["require","exports","module","fido/utils/Math2","PIXI"],function(t,e,i){var r=t("fido/utils/Math2"),n=t("PIXI"),s=new n.Point,o=function(t){t=t||{},this.value=0,this._ratio=0,this.dragOffset=0,this.dragPosition=0,this.draggerHeight=t.draggerHeight||30,this.dragLength=t.dragLength||300,n.Container.call(this),this.bar=t.bar||(new n.Graphics).beginFill(16711680).drawRect(0,0,20,this.dragLength),this.dragger=t.dragger||(new n.Graphics).beginFill(16776960).drawRect(0,-this.draggerHeight/2,20,this.draggerHeight),this.addChild(this.bar),this.addChild(this.dragger),this.dragger.position.y=this.draggerHeight/2,this.interactive=!0,this.buttonMode=!0,this.mousedown=this.onDown.bind(this),this.onUp=this.onUp.bind(this),this.onMove=this.onMove.bind(this),this.onUpdate=null};o.prototype=Object.create(n.Container.prototype),o.prototype.updateTransform=function(){var t=this.draggerHeight/2+this.ratio*(this.dragLength-this.draggerHeight);this.dragger.position.y+=.5*(t-this.dragger.position.y),this.containerUpdateTransform()},Object.defineProperties(o.prototype,{ratio:{get:function(){return this._ratio},set:function(t){this._ratio=r.cap(t,0,1)}}}),o.prototype.updateRatio=function(t){this._ratio=r.map(t,this.draggerHeight/2,this.dragLength-this.draggerHeight/2,0,1),this._ratio=r.cap(this.ratio,0,1),this.onUpdate()},o.prototype.onDown=function(t){var e=t.data.getLocalPosition(this,s).y;this.updateRatio(e),this.isDragging=!0,this.mousemove=this.onMove,this.mouseup=this.mouseupoutside=this.onUp},o.prototype.onUp=function(){this.isDragging=!1,this.mousemove=null,this.mouseup=this.mouseupoutside=null},o.prototype.onMove=function(t){var e=t.data.getLocalPosition(this,s).y;this.updateRatio(e)},i.exports=o}),define("starwars/ui/ScrollBarStarwars",["require","exports","module","fido/ui/PixiScrollbar_","fido/utils/Math2"],function(t,e,i){var r=t("fido/ui/PixiScrollbar_"),n=t("fido/utils/Math2");ScrollBarStarwars=function(t){var e=new PIXI.Sprite.fromFrame("scrollbar_tab.png");e.anchor.set(.5),e.pivot.y=-84,e.pivot.x=1;var i=new PIXI.Sprite.fromFrame("scrollbar_bg.png");i.anchor.set(.5,0),i.pivot.y=25;var t={dragLength:227,draggerHeight:62,bar:i,dragger:e};r.call(this,t)},ScrollBarStarwars.prototype=Object.create(r.prototype),ScrollBarStarwars.prototype.updateTransform=function(){var t=this.draggerHeight/2+this.ratio*(this.dragLength-this.draggerHeight);this.dragger.position.y+=.5*(t-this.dragger.position.y),this.dragger.position.x=n.map(this.ratio,0,1,0,12)+5,this.containerUpdateTransform()},i.exports=ScrollBarStarwars}),define("fido/ui/PixiScrollCombo",["require","exports","module","../physics/Spring","fido/system/Ticker","./PixiTrackpad","fido/utils/Math2"],function(t,e,i){var r=(t("../physics/Spring"),t("fido/system/Ticker"),t("./PixiTrackpad"),t("fido/utils/Math2"));PixiScrollCombo=function(t){this.min=t.min||0,this.max=t.max||500,this.trackpad=t.trackpad,this.trackpad.scrollMinY=-this.max,this.trackpad.scrollMaxY=this.min,this.trackpad.capMovement=!0,this.trackpad.easeToPosition(0,this.min),this.scrollbar=t.scrollbar,Device.instance.desktop||(this.scrollbar.visible=!1),this.scrollbar.onUpdate=this.onScrollUpdate.bind(this),this.value=0},Object.defineProperties(PixiScrollCombo.prototype,{value:{get:function(){return this._value},set:function(t){this._value=t,this.trackpad.easeToPosition(0,t)}}}),PixiScrollCombo.prototype.update=function(){this.trackpad.update(),this._value=this.trackpad.valueY,this.scrollbar.ratio=r.map(-this.trackpad.valueY,this.min,this.max,0,1)},PixiScrollCombo.prototype.onScrollUpdate=function(){var t=r.map(this.scrollbar.ratio,1,0,-this.max,this.min);this.trackpad.easeToPosition(0,t)},i.exports=PixiScrollCombo}),define("com/arcade/app/overlay/rewards/TrophyList",["require","exports","module","PIXI","starwars/overlays/Overlay","starwars/overlays/AchievementBoard","starwars/ui/ScrollBarStarwars","fido/ui/PixiTrackpad","fido/utils/Utils","fido/goals/Goals","fido/system/Device","fido/system/Ticker","fido/ui/PixiScrollbar_","fido/ui/PixiScrollCombo","fido/goals/Trophies","fido/loader/Cache","fido/utils/FrameWait"],function(t,e,i){var r=t("PIXI"),n=(t("starwars/overlays/Overlay"),t("starwars/overlays/AchievementBoard")),s=t("starwars/ui/ScrollBarStarwars"),o=t("fido/ui/PixiTrackpad"),a=(t("fido/utils/Utils"),t("fido/goals/Goals")),h=t("fido/system/Device"),l=(t("fido/system/Ticker"),t("fido/ui/PixiScrollbar_"),t("fido/ui/PixiScrollCombo")),c=t("fido/goals/Trophies"),u=(t("fido/loader/Cache"),t("fido/utils/FrameWait"),function(t,e,i){r.Container.call(this),this.dimensions={width:700,height:360},this.goals=new a(t),this.goals.load(e,i);var u={frameWidth:600,frameHeight:285,lineHeight:60,padding:{top:0,right:0,bottom:0,left:0}};this.leaderboard=new n(u),this.leaderboard.alpha=0,this.addChild(this.leaderboard),this.hitArea=new r.Rectangle((-(.5*this.dimensions.width)),(-(.5*this.dimensions.height)),this.dimensions.width-40,this.dimensions.height),this.leaderboard.position.x=-380,this.leaderboard.position.y=-200,h.instance.desktop||(this.leaderboard.x=-390),this.trackRect=new r.Container,this.trackRect.hitArea=new r.Rectangle((-350),(-180),700,360),this.addChild(this.trackRect);var d={target:this.trackRect},p=new o(d);this.trophies=new c({goal_system:this.goals}),this.trophies.init(),this.trophySprites=[],this.trophyContainer=new r.Container,this.addChild(this.trophyContainer);for(var f=0;f<4;f++){var m=new r.Sprite;m.x=-180+100*f,m.y=-140,this.trophyContainer.addChild(m),this.trophySprites.push(m)}var g=new s;g.position.set(205,-128),this.addChild(g);var v=new l({scrollbar:g,trackpad:p,min:30,max:7700});this.scrollCombo=v,this.scrollCombo.value=30,this.firstLaunch=!0;var _=new r.Sprite.fromFrame("ui_bottom_text_panel.png");_.anchor.x=.5,_.anchor.y=1,_.position.y=183,this.addChild(_),this.textBottom=new r.Text("",{font:"25px "+window.MAIN_FONT,fill:"#09717c"}),this.textBottom.anchor.set(.5),this.textBottom.position.y=-_.height/2-5,_.addChild(this.textBottom),this.hasClose=!0});u.prototype=Object.create(r.Container.prototype),u.prototype.update=function(){this.scrollCombo.update(),this.trophyContainer.y=this.scrollCombo.value-35,this.leaderboard.scrollPosition=this.scrollCombo.value},u.prototype.show=function(){this.update(),this.onDataRecieved()},u.prototype.hide=function(){this.scrollCombo.value=30,this.update()},u.prototype.onDataRecieved=function(t){for(var e=this.goals.getAllGroups(),t=[],i=0,n="trophy_generic_none.png",s=this.trophies.getTrophies(),o={durasteel:"trophy_generic_steel.png",bronze:"trophy_generic_bronze.png",silver:"trophy_generic_silver.png",gold:"trophy_generic_gold.png"},a=0;a<s.length;a++){var h=s[a];if(h.earned){var l=o[h.name];l||(l=n),this.trophySprites[a].texture=r.Texture.fromFrame(l)}else this.trophySprites[a].texture=r.Texture.fromFrame(n)}this.scrollCombo.max=55*e.length+40;for(var c=0,a=0;a<e.length;a++){var u=e[a];u.achieved&&i++,u.completion||(u.completion=0),u.hidden||(c++,t.push(u))}this.textBottom.scale.set(1),this.textBottom.text=i+" / "+c+" "+translations.STR_OVERLAY_CHALLENGES_INFO;var d=320/this.textBottom.width;d=Math.min(1,d),this.textBottom.scale.set(d),t.unshift({achieved:!0,desc:"empty",completion:0}),this.leaderboard.setData(t),this.leaderboard.alpha=1},u.prototype.resize=function(t,e){this.w=t,this.h=e,this.x=t/2,this.y=e/2},i.exports=u}),define("com/arcade/app/overlay/rewards/TrophyScreen",["require","exports","module","PIXI","starwars/overlays/Overlay","starwars/overlays/AchievementBoard","starwars/ui/ScrollBarStarwars","fido/ui/PixiTrackpad","fido/utils/Utils","fido/goals/Goals","fido/system/Device","fido/system/Ticker","fido/ui/PixiScrollbar_","fido/ui/PixiScrollCombo","fido/goals/Trophies","fido/loader/Cache","fido/utils/FrameWait","./TrophyList"],function(t,e,i){var r=t("PIXI"),n=t("starwars/overlays/Overlay"),s=(t("starwars/overlays/AchievementBoard"),t("starwars/ui/ScrollBarStarwars"),t("fido/ui/PixiTrackpad"),t("fido/utils/Utils"),t("fido/goals/Goals"),t("fido/system/Device"),t("fido/system/Ticker")),o=(t("fido/ui/PixiScrollbar_"),t("fido/ui/PixiScrollCombo"),t("fido/goals/Trophies"),t("fido/loader/Cache")),a=(t("fido/utils/FrameWait"),t("./TrophyList")),h=function(t){n.call(this,t),this.title.text=window.translations.STR_TROPHIES_TITLE,this.dimensions={width:700,height:360},this.hasClose=!0,this.currentScreenId=0,this.lists=[],this.buttons=[];var e=[window.translations.STR_TROPHIES_GAME1,window.translations.STR_TROPHIES_GAME2,window.translations.STR_TROPHIES_GAME3],i={font:"18px "+window.MAIN_FONT,fill:"#000000",align:"left"},s={font:"18px "+window.MAIN_FONT,fill:"#87b2c4",align:"left"},h=o.getJson("config"),l=[{id:h.REBELS_STORAGE_ID,json:o.getJson("rebelsGoals"),jsonStrings:o.getJson("rebelsGoals_strings").strings}];window.gameMode>0&&l.push({id:h.DAGOBAH_STORAGE_ID,json:o.getJson("runnerGoals"),jsonStrings:o.getJson("runnerGoals_strings").strings}),window.gameMode>1&&l.push({id:h.FIGHTER_STORAGE_ID,json:o.getJson("fighterGoals"),jsonStrings:o.getJson("fighterGoals_strings").strings});for(var c=0;c<l.length;c++){var u=l[c],d=new a(u.id,u.json,u.jsonStrings);d.y=40,this.screen.addChild(d),this.lists.push(d);var p=new r.Container;p.interactive=!0,p.buttonMode=!0,p.click=p.tap=this._onDown.bind(this,p,c,!1),p.position.y=-160,this.addChild(p);var f=new r.Sprite.fromFrame("ui_leaderboard_button_off.png");f.anchor.set(.5),f.position.x=-140+140*c;var m=new r.Sprite.fromFrame("leaderboard_tab_off.png");m.anchor.set(.5),m.position.x=-140+140*c;var g=new r.Text(e[c],s);g.anchor.set(.5);var v=new r.Text(e[c],i);v.anchor.set(.5),v.visible=!1,window.gameMode&&(m.addChild(g),m.addChild(v),p.addChild(f),p.addChild(m));var _={bg:f,fg:m,textActive:v,textInactive:g};this.buttons.push(_)}};h.prototype=Object.create(n.prototype),h.prototype.update=function(){n.prototype.update.call(this),this.lists[this.currentScreenId].update()},h.prototype._onDown=function(t,e,i){if(e!==this.currentScreenId||i){var n=this.buttons[this.currentScreenId];n.bg.texture=new r.Texture.fromFrame("ui_leaderboard_button_off.png"),n.fg.texture=new r.Texture.fromFrame("leaderboard_tab_off.png"),n.textActive.visible=!1,n.textInactive.visible=!0,this.lists[this.currentScreenId].hide(),this.lists[this.currentScreenId].visible=!1;var t=this.buttons[e];t.bg.texture=new r.Texture.fromFrame("ui_leaderboard_button_on.png"),t.fg.texture=new r.Texture.fromFrame("leaderboard_tab_on.png"),t.textActive.visible=!0,t.textInactive.visible=!1,this.currentScreenId=e,this.lists[e].visible=!0,this.lists[e].show()}},h.prototype.onHide=function(){n.prototype.onHide.call(this)},h.prototype.onShow=function(){n.prototype.onShow.call(this);for(var t=0;t<this.lists.length;t++)this.lists[t].visible=!1;this.lists[0].visible=!0,this.lists[0].show(),r.isWebGL&&(this.containerInterference.alpha=.2),s.instance.add(this.update,this)},h.prototype.onHidden=function(){s.instance.remove(this.update,this)},h.prototype.resize=function(t,e){this.w=t,this.h=e,this.x=t/2,this.y=e/2},i.exports=h}),define("com/arcade/app/overlay/CoinOverlay",["require","exports","module","PIXI","fido/system/Ticker","fido/app/transitions/AlphaTransition","signals","starwars/filters/GlowFilter","fido/utils/FrameWait","fido/sound/SoundBridge"],function(t,e,i){var r=t("PIXI"),n=(t("fido/system/Ticker"),t("fido/app/transitions/AlphaTransition")),s=t("signals"),o=t("starwars/filters/GlowFilter"),a=(t("fido/utils/FrameWait"),t("fido/sound/SoundBridge")),h=function(t){this.app=t,r.Container.call(this),this.transition=new n,this.hasBackground=!r.isWebGL,this.hasClose=!1,this.onCoinSpinned=new s,window.FONTS_EXTENDED?this.text=new r.Text(translations.STR_SPIN_COIN,{font:"30px "+window.MAIN_FONT,fill:"#fed95c",stroke:"#fddd54",strokeThickness:1}):this.text=new r.extras.BitmapText(translations.STR_SPIN_COIN,{font:"30px Star Jedi"});var e=Math.min(1,800/this.text.width);this.text.scale.set(e),r.isWebGL&&(this.text.filters=[new o(256,256,2,1,0,9536030,1)]),this.text.pivot.x=this.text.width*(1/e)*.5,this.text.pivot.y=this.text.height*(1/e)*.5,this.addChild(this.text),this.coinSpriteContainer=r.isWebGL?new r.flip.Container3d:new r.Container,this.addChild(this.coinSpriteContainer),this.coinText=new r.extras.BitmapText("x",{font:"60px Star Jedi"}),this.coinText.alpha=0,this.coinSpriteContainer.addChild(this.coinText),this.coinTextures=[];for(var i=0;i<19;i++)this.coinTextures.push(new r.Texture.fromFrame("hangar_token_3D_2sides_"+("0"+(i+1)).slice(-2)+".png"));this.coinSprite=new r.Sprite(this.coinTextures[18]),this.coinSprite.anchor.set(.5),this.coinSpriteContainer.addChild(this.coinSprite),this.hitArea=new r.Rectangle(0,0,1/0,1/0),this.interactive=!0};h.prototype=Object.create(r.Container.prototype),h.prototype.spinCoin=function(){this.off("click",this._spinCoinBinded),this.off("tap",this._spinCoinBinded),a.sfx.play("coin_flip");var t=Math.random()>.5?10:Math.random()>.5?50:100,e=Math.floor(t/10),i=1.4;TweenLite.to(this.text,.4*i,{alpha:0}),this.coinText.text="x"+e+"!",this.coinText.updateText(),this.coinText.pivot.y=this.coinText.height,e>1&&(TweenLite.to(this.coinText,.2*i,{alpha:1,x:100,delay:.8*i}),TweenLite.from(this.coinText.scale,.2*i,{x:0,y:0,delay:.8*i,ease:Back.easeOut}));var r={value:0};TweenLite.to(r,i,{value:1,onUpdate:function(){this.coinSprite.texture=this.coinTextures[Math.floor((8+4*r.value*this.coinTextures.length)%this.coinTextures.length)]},onUpdateScope:this,onCompleteScope:this,onComplete:function(){if(a.sfx.play("coin_stop"),e>1){this.text.scale.set(1),this.text.text=translations.STR_FORCE_WITH_YOU,this.text.updateText();var i=Math.min(1,800/this.text.width);this.text.scale.set(i),this.text.pivot.x=this.text.width*(1/i)*.5,this.text.pivot.y=this.text.height*(1/i)*.5,TweenLite.to(this.text,.4,{alpha:1}),TweenLite.from(this.text.scale,.8,{x:0,y:0,ease:Elastic.easeOut})}setTimeout(function(){this.onCoinSpinned.dispatch(t)}.bind(this),1e3)},ease:Back.easeOut})},h.prototype.onShow=function(){var t=.5,e=.5;TweenLite.from(this.text.scale,2*t,{x:0,y:0,delay:e,ease:Elastic.easeOut,onComplete:this.showWelcomeAlertPanel.bind(this)})},h.prototype.showWelcomeAlertPanel=function(){return this.app.alertPanelManager.getState("welcome")?(this.app.alertPanelManager.show("welcome"),void this.app.alertPanelManager.onHide.addOnce(this.addEvents.bind(this))):void this.addEvents()},h.prototype.addEvents=function(){a.sfx.play("coin_fanfare"),this.on("click",this._spinCoinBinded=this.spinCoin.bind(this)),this.on("tap",this._spinCoinBinded=this.spinCoin.bind(this))},h.prototype.resize=function(t,e){this.screenWidth=t,this.screenHeight=e,this.text.position.set(.5*t,.5*e+.5*this.coinSprite.height+40),this.coinSpriteContainer.position.set(.5*t,.5*e)},i.exports=h}),define("fido/app/transitions/NoTransition",["require","exports","module"],function(t,e,i){var r=function(){};r.constructor=r,r.prototype.begin=function(t,e,i){e.onHide&&e.onHide(),e.onHidden&&e.onHidden(),t.container.addChildAt(i,0),t.container.removeChild(e),i.onShow&&i.onShow(),i.onShown&&i.onShown(),t.onTransitionComplete()},r.prototype.resize=function(t,e){this.width=t,this.height=e},i.exports=r}),define("starwars/overlays/menu/MenuButton",["require","exports","module","PIXI","fido/ui/buttons/AbstractButton","fido/app/transitions/NoTransition","./MenuButton"],function(t,e,i){var r=t("PIXI"),n=t("fido/ui/buttons/AbstractButton"),s=(t("fido/app/transitions/NoTransition"),t("./MenuButton")),s=function(t,e){n.call(this),this.sprite=new r.Sprite.fromFrame(t),this.addChild(this.sprite),this.text=new r.Text(e.toUpperCase(),{font:"14px "+window.MAIN_FONT,fill:"#83DCF2",align:"center",wordWrap:!0,wordWrapWidth:this.sprite.width}),this.text.anchor.set(.5,0),this.text.x=.5*this.sprite.width,this.text.y=this.sprite.height,this.addChild(this.text),this.hitArea=new r.Rectangle(0,0,this.width,this.height)};s.prototype=Object.create(n.prototype),s.prototype.constructor=s,i.exports=s}),define("starwars/overlays/menu/MenuOverlay",["require","exports","module","PIXI","fido/app/Screen","fido/app/transitions/NoTransition","starwars/buttons/GoldenButton","./MenuButton","starwars/filters/GlitchFilter","fido/app/transitions/NoTransition","fido/loader/Cache","fido/loader/Cache","tracker","tracker","tracker","tracker"],function(t,e,i){var r=t("PIXI"),n=t("fido/app/Screen"),s=t("fido/app/transitions/NoTransition"),o=t("starwars/buttons/GoldenButton"),a=t("./MenuButton"),h=t("starwars/filters/GlitchFilter"),s=t("fido/app/transitions/NoTransition"),l=function(e){n.call(this,e),this.rewardSystem=this.app.rewardSystem,this.transition=new s,this.hasClose=!1,this.background=(new r.Graphics).beginFill(0).drawRect(0,0,1136,130),this.addChild(this.background);var i=new h;i.uniforms.flashIntensity.value=0,i.uniforms.verticalLinesIntensity.value=.2,i.uniforms.horizontalLinesIntensity.value=.2,i.uniforms.noiseIntensity.value=.2,this.closeButton=new o("icon_close.png"),this.closeButton.backgroundColor="red",this.closeButton.setSize("small"),this.closeButton.x=100,this.closeButton.y=.5*this.background.height,this.closeButton.onPress.add(this.hide,this),this.addChild(this.closeButton);var l=["Runner","Rebels","Fighter"];0===window.gameMode&&(l=["Rebels"]);for(var c=!1,u=0;u<l.length;u++)this.app.id===l[u]&&(c=!0);var d=t("fido/loader/Cache").getJson("config").config,p={Rebels:{frame:"top_nav_rebels.png",text:translations.STR_BUTTON_REBELS,screenID:"game2",url:Device.instance.desktop?d.GAME2_URL:d.GAME2_URL_MOBILE},Runner:{frame:"top_nav_yoda.png",text:translations.STR_BUTTON_YODA,screenID:"game1",url:Device.instance.desktop?d.GAME1_URL:d.GAME1_URL_MOBILE},Fighter:{frame:"top_nav_fighter.png",text:translations.STR_BUTTON_FIGHTER,screenID:"game3",url:Device.instance.desktop?d.GAME3_URL:d.GAME3_URL_MOBILE}};if(c){this.buttonsData=[{frame:"top_nav_arcade.png",text:translations.STR_BUTTON_ARCADE,screenID:"arcade",url:Device.instance.desktop?d.ARCADE_URL:d.ARCADE_URL_MOBILE}];for(var u=0;u<l.length;u++)this.app.id!==l[u]&&this.buttonsData.push(p[l[u]])}else{var d=t("fido/loader/Cache").getJson("config");this.buttonsData=[{frame:"top_nav_arcade.png",text:translations.STR_BUTTON_ARCADE,screenID:"arcade",url:""},{frame:"top_nav_room.png",text:translations.STR_BUTTON_ROOM,screenID:"hangar",url:""}];for(var u=0;u<l.length;u++)this.buttonsData.push(p[l[u]])}this.buttons=[],this.buttonMask=new r.Graphics,this.buttonMask.beginFill(16711680),this.buttonMask.drawRect(0,0,1200,this.background.height),this.addChild(this.buttonMask);var f=new r.Container;f.mask=this.buttonMask,this.addChild(f);for(var u=0;u<this.buttonsData.length;u++){var m=this.buttonsData[u],g=new a(m.frame,m.text);g._screenID=m.screenID,g._url=m.url,g.onPress.add(this.onButtonPress,this),this.buttons.push(g),f.addChild(g)}};l.prototype=Object.create(n.prototype),l.prototype.constructor=l,l.prototype.onButtonPress=function(e){if(this.hide(),"Arcade"!==this.app.id){var i=t("tracker");i.isNew?t("tracker").track("game_action","game_switch",{game_tier2:e._screenID}):t("tracker").trackAction("arcade_game_switch",e._screenID),window.location.href=e._url}else"Arcade"===this.app.id&&("arcade"===e._screenID?(this.app.screenManager.screens.arcade.goToArcadeMachines(),this.app.screenManager.gotoScreenByID(e._screenID)):""!==e._url?window.location.href=e._url:this.app.screenManager.gotoScreenByID(e._screenID))},l.prototype.hide=function(){var t=.4;TweenMax.to(this,t,{y:-this.background.height,onComplete:function(){var t=this.app.overlayManager.history.pop();if(t=this.app.overlayManager.history.pop()){var e=new r.Container;e.transition=new s,this.app.overlayManager.gotoScreen(e),this.app.overlayManager.gotoScreen(t)}else this.app.overlayManager.hide()},onCompleteScope:this}),!Device.instance.ie&&r.isWebGL&&TweenMax.to(this.app.overlayManager.bg,t,{y:0})},l.prototype.resize=function(t,e){this.background.width=t},l.prototype.onHide=function(){"Arcade"!==this.app.id&&this.app.topMenu.show()},l.prototype.onShow=function(){"Arcade"!==this.app.id&&this.app.topMenu.hide(),t("tracker").trackAction("view_hamburger");var e=.4,i=.2;TweenMax.fromTo(this,e,{y:-this.background.height},{y:0,delay:i,ease:Power2.easeInOut}),!Device.instance.ie&&r.isWebGL&&TweenMax.to(this.app.overlayManager.bg,e,{y:this.background.height,delay:i,ease:Power2.easeInOut});for(var n=0,s=0;s<this.buttons.length;s++){var o=this.buttons[s];o._screenID!==this.app.screenManager.currentScreen.id?(o.visible=!0,o.x=220+220*n,n++,TweenMax.fromTo(o,.3,{y:100,alpha:0},{y:6,alpha:1,delay:i+.3*e+.1*n,ease:Power2.easeOut}),TweenMax.from(o.text,.3,{y:o.text.y-10,alpha:0,delay:i+.5*e+.1*n,ease:Power2.easeOut})):o.visible=!1}},i.exports=l}),define("com/arcade/app/overlay/WarningPopup/WarningPopupOverlay",["require","exports","module","PIXI","com/arcade/app/buttons/TextButton","fido/app/Screen","fido/app/transitions/NoTransition","signals"],function(t,e,i){var r=t("PIXI"),n=(t("com/arcade/app/buttons/TextButton"),t("fido/app/Screen")),s=t("fido/app/transitions/NoTransition"),o=t("signals"),a=function(t){n.call(this,t),this.transition=new s,this.url="",this.bg=new r.Sprite.fromFrame("bg_alert.png"),this.bg.anchor.set(.5),this.addChild(this.bg),this.title=new r.Text(translations.STR_WARNING_TITLE,{align:"left",fill:"#000000",font:"22px sans-serif",wordWrap:!0,wordWrapWidth:.7*this.bg.width}),this.title.position.x=-this.bg.width/2+50,this.title.anchor.set(0,.5),this.title.position.y=-this.bg.height/2+40+15,this.addChild(this.title),this.info=new r.Text(translations.STR_WARNING_TEXT,{font:"16px sans-serif",align:"left",fill:"#4f4f4f",wordWrap:!0,wordWrapWidth:.8*this.bg.width+20}),this.info.position.x=-this.bg.width/2+50,this.info.position.y=this.title.position.y+this.title.height/2+10;var e=.6*this.bg.height/this.info.height;this.info.scale.set(Math.min(e,1)),this.addChild(this.info),this.buttonNo=new h("Go Back","bg_button_no.png","#156cdd"),this.buttonNo.position.x=-this.bg.width/2+this.buttonNo.width/2+50,this.buttonNo.position.y=this.bg.height/2-50,this.buttonNo.onPress.add(this.onButtonPressed,this),this.addChild(this.buttonNo),this.buttonYes=new h("Yes, Continue","bg_button_yes.png","#ffffff"),this.buttonYes.onPress.add(this.onButtonPressed,this),this.buttonYes.position.x=this.buttonNo.position.x+this.buttonYes.width/2+80,this.buttonYes.position.y=this.buttonNo.position.y,this.addChild(this.buttonYes),this.hasClose=!1,this.position.x=this.app.safeSize.width/2,this.position.y=this.app.safeSize.height/2};a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.prototype.onButtonPressed=function(t){t===this.buttonYes?(window.open(this.url,"_blank"),this.app.overlayManager.hide()):this.app.overlayManager.hide()},a.prototype.hide=function(){},a.prototype.resize=function(t,e){},a.prototype.onShow=function(){this.internalLink?(this.title.text=translations.STR_WARNING_TITLE,this.info.visible=!0):(this.title.text=translations.STR_WARNING_INTERNAL,this.info.visible=!1)};var h=function(t,e,i){r.Container.call(this),this.onPress=new o,this.buttonMode=!0;var n=new r.Sprite.fromFrame(e);n.anchor.set(.5),this.addChild(n);var t=new r.Text(t,{align:"center",font:"16px sans-serif",fill:i});t.anchor.set(.5),n.addChild(t),this.interactive=!0,this.click=this.tap=this.onButtonPressed.bind(this)};h.prototype=Object.create(r.Container.prototype),h.prototype.constructor=h,h.prototype.onButtonPressed=function(){this.onPress.dispatch(this)},i.exports=a}),define("starwars/overlays/Swears",["require","exports","module"],function(t,e,i){var r="cG9veGl0dXNhdHl2dHlsdG9ndGl0c3lsc3B5c3Bhc25vc2lrc2V4c2Vkc2F1cmV2cmFwcWtrcHVscHVlcG9wcGlrcGV3cGVzcGVrb3N0b3Jtb29ob25zbnNibmVrbmVpbXVzbXVrbW9wbWFjbHVzbGVta3Vra3Vna29wa2tra2lza2lkanVzaWJvaHlzaHVlaG9yaG9saG9laGFwZ29hZ251Z2VyZ2F5ZnJhZmlzZmFuZmFnZWxnZWdvZWdnZHlyc2V4ZG9tZG9nYnJ5c2V4bmFpYm9icG90cGlzcGlrem9ieHh4YmlsYmlhbHVsa3V0YmFna2FrYmFmYXNzZ3Zkc2F1eHh4YXJnYXBvbnVzcHFweHh4YXBlYXBhc2V4dGlzcHJzZnVrc2V4cGF1c2V4c2V4c2d1c2V4bnVzbnVhZ2F5cGVlcGF0a2trc2V4eHh4bmlnZGVsZ2F5a3Vra2tramFwbm9wcGlzZ29kZmFrZ2F5Y3VsZnV0ZnVrc2V4YW1vZm9rY29uc2Vnc2V4ZnVjcmFqZmFnZmNrY3VzZmFnaHVqa2F0c2V4amViaGVyZ2F5aHVqZ2F5a3VyZmlzZ2F5ZGljZ2VqZmFuZ2VqcGF1Zm9zZmFrYXNvc2lrcGtrZ2F5ZnV0ZWRpY3VzYnVtYXNzY3VyYm9pY3ljYm9rYW1rYmxiYXNzYW5vbmdhdG5hYnJhbWxmbG9ibm9ianJraXNscGRhZG9hcHRhbmlicmliZG1iam9icnViY3Vta250ZGllc3VrbGlrcHN5a29rYnV0aml6YmNoY29rZGlrc2h0Y250aXJhbHNkc3RkbXVmbWxmd3RmeHRjYW5sd2NrZnVxZnV4Y29jY29xa294a29ja29ra29xY2FjY2FrY2Fxa2Fja2Fra2FxZGlxZGl4ZGNrcG5zbmdyZHNodHd0YmNoY2x0a3Vta2x0c3Vjc3Vrc3Vxc2NrbGlrbGljbGlxbGNranp6Z2V5Z2VpZ2FpdmFndmduc2p2ZmFwcHJubG9samV3eWlkam9vZ3ZycGlzcHNzc25tZmt1ZmN1ZnF1aG9yc2x0amFwd29wa2lra3lra3lja3lxZHlrZHlxZHljanl6cHJrcHJjcHJxbWljbWlrbWlxbXljbXlrbXlxZ3VjZ3VrZ3VxZ2l6Z3p6c3h4c3hpc3hlc3h5d2Fjd2Frd2Fxd2NrdGhjdmFqdmpuYXpucGNwZG1ub3JsYW5zbWZmcGhrcGhjcGhxdG9rdG9jdG9xcmFjcmFrcmFxcmNrc2Fjc2Frc2FxcG1zbmFkbmR6bmRzc29sc29iZm9iZ2FnZ29pZ29vZ295Z3l6aXVkamlzbGF5bGV6bHlra3lsbnlwb2NkdG9zdHVndHl0d2V0d2l6d2x5eml0",n={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(t){var e,i,r,s,o,a,h,l="",c=0;for(t=n._utf8_encode(t);c<t.length;)e=t.charCodeAt(c++),i=t.charCodeAt(c++),r=t.charCodeAt(c++),s=e>>2,o=(3&e)<<4|i>>4,a=(15&i)<<2|r>>6,h=63&r,isNaN(i)?a=h=64:isNaN(r)&&(h=64),l=l+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(a)+this._keyStr.charAt(h);return l},decode:function(t){var e,i,r,s,o,a,h,l="",c=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<t.length;)s=this._keyStr.indexOf(t.charAt(c++)),o=this._keyStr.indexOf(t.charAt(c++)),a=this._keyStr.indexOf(t.charAt(c++)),h=this._keyStr.indexOf(t.charAt(c++)),e=s<<2|o>>4,i=(15&o)<<4|a>>2,r=(3&a)<<6|h,l+=String.fromCharCode(e),64!=a&&(l+=String.fromCharCode(i)),64!=h&&(l+=String.fromCharCode(r));return l=n._utf8_decode(l)},_utf8_encode:function(t){t=t.replace(/\r\n/g,"\n");for(var e="",i=0;i<t.length;i++){var r=t.charCodeAt(i);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e},_utf8_decode:function(t){for(var e="",i=0,r=c1=c2=0;i<t.length;)r=t.charCodeAt(i),r<128?(e+=String.fromCharCode(r),i++):r>191&&r<224?(c2=t.charCodeAt(i+1),e+=String.fromCharCode((31&r)<<6|63&c2),i+=2):(c2=t.charCodeAt(i+1),c3=t.charCodeAt(i+2),e+=String.fromCharCode((15&r)<<12|(63&c2)<<6|63&c3),i+=3);return e}},s=n.decode(r),o=s.match(/.{1,3}/g);i.exports=o}),define("fido/game/NameInput",["require","exports","module","signals","PIXI","fido/ui/PixiTrackpad","fido/sound/SoundManager"],function(t,e,i){var r=t("signals"),n=t("PIXI"),s=t("fido/ui/PixiTrackpad"),o=t("fido/sound/SoundManager"),a=function(){n.Container.call(this),this.letterScrollers=[];var t=0,e=135,i=new n.Sprite.fromFrame("ui_entername_panel.png");i.anchor.set(.5),i.position.x=35,i.position.y=70,this.addChild(i);for(var s=[t-e,t,t+e],o=0;o<3;o++){var a=new c;this.addChild(a),a.x=s[o],a.y=11,a.onLetterUpdate.add(this.onNameUpdate,this),this.letterScrollers.push(a)}this.onNameUpdate=new r,this.pivot.x=this.width/2-e};a.prototype=Object.create(n.Container.prototype),a.prototype.reset=function(){for(var t=0;t<this.letterScrollers.length;t++)this.letterScrollers[t].reset()},a.prototype.onNameUpdate=function(){for(var t="",e=0;e<this.letterScrollers.length;e++)t+=this.letterScrollers[e].currentLetter;this.word=t,this.onNameUpdate.dispatch(t)},a.prototype.setName=function(t){this.reset();var e,i=t.split(""),r="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),n=[],s=0;for(e=0;e<i.length;e++){s=0;for(var o=0;o<r.length;o++)r[o]===i[e]?n.push(s):s++}for(e=0;e<this.letterScrollers.length;e++)this.letterScrollers[e].goToLetterId(n[e])},a.prototype.update=function(){};var h=120,l=135,c=function(){n.Container.call(this),this.onLetterUpdate=new r,this.letters="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),this.masky=(new n.Graphics).beginFill(16711680).drawRect(-20,-5,110,128),this.addChild(this.masky),this.hitArea=new n.Rectangle(0,(-5),89,130),this.trackpad=new s({target:this}),this.trackpad.snapTo=!0,this.trackpad.size=h,this.trackpad.maxSlots=1e8,this.trackpad.capMovement=!1,this.trackpad.spring.springiness=.9,this.trackpad.spring.damp=.5,this.options=[],this.optionContainer=new n.Container,this.addChild(this.optionContainer),this.optionContainer.mask=this.masky,this.lastId=0;for(var t=3,e=0;e<t;e++){var i=new n.Container;i.text=new n.Text("HI",{font:"124px "+window.SECONDARY_FONT,fill:"#aae5ff"}),i.addChild(i.text),i.text.x=35,i.text.y=47,i.text.anchor.set(.5),this.optionContainer.addChild(i),i.interactive=!0,i.buttonMode=!0,i.id=1e6,this.options.push(i)}this.lastId=999999999,this.nextButton=new n.Sprite.fromFrame("ui_entername_off.png"),this.nextButton.anchor.set(.5),this.nextButton.interactive=!0,this.nextButton.buttonMode=!0,this.nextButton.click=this.nextButton.tap=this.onNextPressed.bind(this),this.nextButton.mousedown=this.nextButton.touchstart=this.changeTexture.bind(this,this.nextButton,"ui_entername_on.png"),this.nextButton.mouseupoutside=this.nextButton.touchendoutside=this.nextButton.mouseup=this.nextButton.touchend=this.changeTexture.bind(this,this.nextButton,"ui_entername_off.png"),this.addChild(this.nextButton),this.nextButton.y=-43,this.nextButton.x=32,this.prevButton=new n.Sprite.fromFrame("ui_entername_off.png"),this.prevButton.anchor.set(.5),this.prevButton.scale.y*=-1,this.prevButton.interactive=!0,this.prevButton.buttonMode=!0,this.prevButton.mousedown=this.prevButton.touchstart=this.changeTexture.bind(this,this.prevButton,"ui_entername_on.png"),this.prevButton.mouseupoutside=this.prevButton.touchendoutside=this.prevButton.mouseup=this.prevButton.touchend=this.changeTexture.bind(this,this.prevButton,"ui_entername_off.png"),
this.prevButton.click=this.prevButton.tap=this.onPrevPressed.bind(this),this.addChild(this.prevButton),this.prevButton.x=35,this.prevButton.y=158};c.prototype=Object.create(n.Container.prototype),c.prototype.changeTexture=function(t,e){t.texture=new n.Texture.fromFrame(e)},c.prototype.updateTransform=function(){this.trackpad.update();for(var t=this.options.length*h,e=0;e<this.options.length;e++){var i=this.options[e];i.position.y=e*h+this.trackpad.valueY+l;var r=Math.floor(i.position.y/t);if(r*=this.options.length,r*=-1,r+=e,r!==i.id){i.id=r;var s=r%this.letters.length;s<0&&(s+=this.letters.length),i.letter=this.letters[s],i.text.text=this.letters[s]}i.position.y%=t,i.position.y<0&&(i.position.y+=t),i.position.y-=h}var o=this.trackpad.spring.ty/-this.trackpad.size|0,a=o%this.options.length;a<0&&(a+=this.options.length);var c=this.options[a];this.currentLetter!==c.letter&&(this.currentLetter=c.letter,this.onLetterUpdate.dispatch(c.letter)),n.Container.prototype.updateTransform.call(this)},c.prototype.onNextPressed=function(){this.trackpad.previousSlotY(),o.sfx.play("selectbeep")},c.prototype.onPrevPressed=function(){this.trackpad.nextSlotY(),o.sfx.play("selectbeep")},c.prototype.goToLetterId=function(t){this.trackpad.setSlotY(t),this.trackpad.spring.dy=0,this.trackpad.speedY=0,this.trackpad.valueY=this.trackpad.easingValueY=this.trackpad.spring.y=this.trackpad.spring.ty},c.prototype.onOptionPressed=function(t){!this.trackpad.didMove},c.prototype.reset=function(){for(var t=0;t<this.options.length;t++)this.options[t].id=9999,this.options[t].text.text="!"},i.exports=a}),define("starwars/buttons/TextButton",["require","exports","module","PIXI","fido/ui/buttons/AbstractButton"],function(t,e,i){var r=t("PIXI"),n=t("fido/ui/buttons/AbstractButton"),s=function(t){n.call(this),this.background=new r.Sprite.fromFrame("ui_bottom_text_button_off.png"),this.background.anchor.set(.5),this.addChild(this.background),this.backgroundOn=new r.Sprite.fromFrame("ui_bottom_text_button_on.png"),this.backgroundOn.anchor.set(.5),this.backgroundOn.alpha=0,this.addChild(this.backgroundOn),this.text=new r.Text(t.toUpperCase(),{font:"30px "+window.MAIN_FONT,align:"center",fill:"#aae5ff"}),this.text.anchor.x=.5,this.text.anchor.y=.5,this.text.scale.set(Math.min(1,.8*this.background.width/this.text.width)),this.addChild(this.text)};s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.down=function(){var t=.2;TweenLite.to(this.backgroundOn,t,{alpha:1,ease:Power2.easeOut})},s.prototype.up=function(){var t=.2;TweenLite.to(this.backgroundOn,t,{alpha:0,ease:Power2.easeOut})},s.prototype.hover=function(){var t=.2;TweenLite.to(this.backgroundOn,t,{alpha:.5,ease:Power2.easeOut})},s.prototype.out=function(){var t=.2;TweenLite.to(this.backgroundOn,t,{alpha:0,ease:Power2.easeOut})},i.exports=s}),define("starwars/overlays/NameOverlay",["require","exports","module","./Swears","fido/game/NameInput","starwars/buttons/TextButton","signals","starwars/overlays/Overlay","fido/sound/SoundManager","libs/GBAPI","starwars/NameUtils","fido/system/Ticker"],function(t,e,i){var r=t("./Swears"),n=t("fido/game/NameInput"),s=t("starwars/buttons/TextButton"),o=t("signals"),a=t("starwars/overlays/Overlay"),h=t("fido/sound/SoundManager"),l=(t("libs/GBAPI"),t("starwars/NameUtils")),c=t("fido/system/Ticker"),u=function(t){a.call(this,t),this.swearRegEx=RegExp(r.join("|")),this.nameInput=new n,this.nameInput.x=40,this.nameInput.y=-118,this.addChild(this.nameInput),this.nameInput.onNameUpdate.add(this.onNameUpdate,this),this.submitButton,this.title.text=translations.STR_OVERLAY_NAME.toLowerCase(),this.submitButton=new s(translations.STR_SAVE_NAME),this.hasClose=!1,this.submitButton.y=118,this.submitButton.onPress.add(this.onSubmitPressed,this),this.addChild(this.submitButton),this.name=l.getUserName(),this.onNameUpdated=new o};u.prototype=Object.create(a.prototype),u.prototype.onSubmitPressed=function(){l.setUserName(this.name),h.sfx.play("selectbeep")},u.prototype.onHide=function(){this.onNameUpdated.dispatch(this.name),c.instance.remove(this.update,this)},u.prototype.onNameUpdate=function(t){var e=!this.swearRegEx.test(t.toLowerCase());this.name=t,e?(this.nameInput.alpha=1,this.submitButton.interactive=!0,this.submitButton.alpha=1):(this.nameInput.alpha=.5,this.submitButton.interactive=!1,this.submitButton.alpha=.5),this.onNameUpdated.dispatch(t)},u.prototype.onShow=function(){c.instance.add(this.update,this),this.name=l.getUserName(),this.nameInput.setName(this.name),this.submitButton.interactive=!0,TweenLite.to(this.submitButton.scale,.1,{x:1,y:1,ease:Back.easeIn}),TweenLite.to(this.nameInput,.1,{alpha:1,ease:Sine.easeIn})},u.prototype.resize=function(t,e){this.w=t,this.h=e,this.x=t/2,this.y=e/2},i.exports=u}),define("fido/ui/Dots",["require","exports","module","../physics/Spring","fido/system/Ticker","./PixiTrackpad","signals"],function(t,e,i){var r=(t("../physics/Spring"),t("fido/system/Ticker"),t("./PixiTrackpad"),t("signals"));Dots=function(t){PIXI.Container.call(this),this.deselectedAlpha=.5,this.dots=[],this.currentDot=null,this.build(t),this.onSelect=new r},Dots.prototype=Object.create(PIXI.Container.prototype),Dots.prototype.build=function(t){this.deselectedAlpha=t.alpha||.5;for(var e=0;e<this.dots.length;e++)this.removeChild(this.dots[e]);this.dots=[];for(var i=(t.size-1)*t.padding,e=0;e<t.size;e++){var r=new PIXI.Sprite(t.texture);r.id=e,r.alpha=this.deselectedAlpha,r.anchor.set(.5),this.addChild(r),r.x=e*t.padding-i/2,t.interactive&&(r.interactive=!0,r.buttonMode=!0,r.click=this.onDotSelected.bind(this)),this.dots.push(r)}this.select(0)},Dots.prototype.onDotSelected=function(t){this.onSelect.dispatch(t.target.id)},Dots.prototype.select=function(t){if(this.currentDot){if(this.currentDot.id===t)return;TweenLite.to(this.currentDot,.3,{alpha:this.deselectedAlpha,ease:Sine.easeOut})}this.currentDot=this.dots[t],TweenLite.to(this.currentDot,.3,{alpha:1,ease:Sine.easeOut})},i.exports=Dots}),define("fido/ui/Carousel",["require","exports","module","PIXI","fido/ui/buttons/AbstractButton","fido/system/Device","fido/ui/PixiTrackpad","fido/ui/Dots","signals","fido/system/Ticker","fido/utils/Utils"],function(t,e,i){var r=t("PIXI"),n=(t("fido/ui/buttons/AbstractButton"),t("fido/system/Device"),t("fido/ui/PixiTrackpad"),t("fido/ui/Dots"),t("signals"),t("fido/system/Ticker"),t("fido/utils/Utils"),function(t,e){r.Container.call(this),this.itemWidth=e.itemWidth,this.offset=e.offset||0,this.padding=e.padding,this.useMask=e.useMask,this.bounds=e.bounds,this.edgePadding=30,this.hitArea=this.bounds,this.trackpad=new PixiTrackpad({target:this}),this.trackpad.snapTo=!0,this.trackpad.size=this.itemWidth+this.padding,this.trackpad.maxSlots=t.length-1,this.trackpad.spring.damp=.6,this.trackpad.capMovement=!0,e.fitBounds?(this.trackpad.scrollMin=-t.length*this.trackpad.size+this.bounds.width/2+this.itemWidth/2-this.edgePadding,this.trackpad.scrollMax=-this.bounds.width/2+this.itemWidth/2+this.edgePadding):(this.trackpad.scrollMin=-t.length*this.trackpad.size,this.trackpad.scrollMax=0),this.trackpad.cap(),this.lastIndex=0,this.items=t,this.itemContainer=new r.Container,this.addChild(this.itemContainer);for(var i=0;i<t.length;i++){var n=t[i];this.itemContainer.addChild(n)}if(this.useMask){var s=(new r.Graphics).beginFill(16711680).drawRect(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height);this.addChildAt(s,0),this.itemContainer.mask=s}});n.prototype=Object.create(r.Container.prototype),Object.defineProperty(n.prototype,"scrollPosition",{get:function(){return this._scrollPosition},set:function(t){this._scrollPosition=t;for(var e=(this.itemWidth*this.items.length,this.itemWidth+this.padding),i=0;i<this.items.length;i++){var r=this.items[i];r.x=e*i-this._scrollPosition,r.x+=this.bounds.width/2-this.itemWidth/2+this.bounds.x,r.x+=this.offset}}}),n.prototype.updateTransform=function(){if(this.visible){this.trackpad.update(),this.scrollPosition=-this.trackpad.value;var t=0|-(this.trackpad.spring.tx/this.trackpad.size);this.dots&&this.lastIndex!=t&&(this.dots.select(t),this.lastIndex=t),this.trackpad.didMove&&(this.userActive=!0),r.Container.prototype.updateTransform.call(this)}},n.prototype.setDots=function(t){this.dots=t,this.dots.onSelect.add(this.onDotSelected,this)},n.prototype.setButtons=function(t,e){this.leftButton=t,this.rightButton=e,this.leftButton.onPress.add(this.onButtonPressed,this),this.rightButton.onPress.add(this.onButtonPressed,this)},n.prototype.onButtonPressed=function(t){t===this.leftButton?this.trackpad.previousSlot():t===this.rightButton&&this.trackpad.nextSlot()},n.prototype.onDotSelected=function(t){this.userActive=!0,this.trackpad.setSlot(t)},i.exports=n}),define("starwars/ui/Dots",["require","exports","module","fido/ui/Dots"],function(t,e,i){var r=t("fido/ui/Dots");Dots=function(t){this.textureUnselected=new PIXI.Texture.fromFrame("tutorial_bullet_off.png"),this.textureSelected=new PIXI.Texture.fromFrame("tutorial_bullet_on.png"),t.texture=this.textureUnselected,t.alpha=1,r.call(this,t)},Dots.prototype=Object.create(r.prototype),Dots.prototype.select=function(t){if(this.currentDot){if(this.currentDot.id===t)return;this.currentDot.texture=this.textureUnselected}this.currentDot=this.dots[t],this.currentDot.alpha=1,this.currentDot.texture=this.textureSelected},i.exports=Dots}),define("starwars/overlays/TutorialOverlay",["require","exports","module","PIXI","starwars/overlays/Overlay","fido/sound/SoundManager","starwars/buttons/GoldenButton","fido/system/Ticker","fido/ui/Carousel","starwars/ui/Dots","fido/loader/Cache"],function(t,e,i){var r=t("PIXI"),n=t("starwars/overlays/Overlay"),s=(t("fido/sound/SoundManager"),t("starwars/buttons/GoldenButton")),o=t("fido/system/Ticker"),a=t("fido/ui/Carousel"),h=t("starwars/ui/Dots"),l=t("fido/loader/Cache"),c=function(t){n.call(this,t),this.title.text=translations.STR_OVERLAY_TUTORIAL,this.count=0,this.slides=l.getJson("howToPlay").slides,window.flipLanguage&&this.slides.reverse(),this.panels=[];var e=new r.Graphics;e.beginFill(0).drawRect(-250,-173,500,240),this.screen.addChild(e);for(var i=0;i<this.slides.length;i++){var o=this.slides[i],c=new r.Sprite.fromImage(ASSET_URL+o.img);c.anchor.set(0,.5),c.y=110;var u={fill:"#ccffff",font:"18px "+window.MAIN_FONT,align:"center",wordWrap:!0,lineHeight:24,wordWrapWidth:433.5},d="";d=Device.instance.desktop&&translations[o.text+"_DESKTOP"]?translations[o.text+"_DESKTOP"]:!Device.instance.desktop&&translations[o.text+"_MOBILE"]?translations[o.text+"_MOBILE"]:translations[o.text];var p=new r.Text(d,u);p.height>83&&p.scale.set(83/p.height),p.anchor.set(.5),p.x=255,p.y=190,c.addChild(p),c.helpText=p,this.panels.push(c)}var f={itemWidth:510,padding:0,useMask:!0,bounds:new r.Rectangle((-255),0,510,352)};this.carousel=new a(this.panels,f),this.carousel.y=-180,window.flipLanguage&&this.carousel.trackpad.setSlot(this.slides.length-1);var m=new r.Sprite.fromFrame("ui_instructions_text_panel.png");m.anchor.x=m.anchor.y=.5,m.position.y=120,this.screen.addChild(m),this.screen.addChild(this.carousel);var g={size:this.panels.length,step:10,padding:17,interactive:!0,alpha:1};this.dots=new h(g),this.addChild(this.dots),this.dots.x=0,this.dots.y=34,this.dots.scale.set(1.4),this.leftArrow=new s("icon_prev.png"),this.leftArrow.setSize("small"),this.addChild(this.leftArrow.view),this.rightArrow=new s("icon_next.png"),this.rightArrow.setSize("small"),this.addChild(this.rightArrow.view),this.leftArrow.x=-260,this.leftArrow.y=112,this.rightArrow.x=-this.leftArrow.x,this.rightArrow.y=this.leftArrow.y,this.carousel.setDots(this.dots),this.carousel.setButtons(this.leftArrow,this.rightArrow),this.imgHeroe=new r.Sprite,this.imgHeroe.position.y=-this.imgHeroe.height+20,this.imgHeroe.position.x=-this.bg.width/2+20,this.screen.addChild(this.imgHeroe),this.hasClose=!0};c.prototype=Object.create(n.prototype),c.prototype.update=function(){n.prototype.update.call(this),this.count+=1,this.imgHeroe.alpha=Math.abs(.3*Math.sin(.5*Math.tan(this.count)))+.7},c.prototype.onNextPressed=function(){this.trackpad.nextSlot(),this.currentPage++,this.pageTwoTimeout=Math.round((new Date).getTime()/1e3),o.instance.add(this.update,this)},c.prototype.onPreviousPressed=function(){this.trackpad.previousSlot(),this.currentPage--,o.instance.remove(this.update,this)},c.prototype.onShow=function(){n.prototype.onShow.call(this);this.count=0,this.containerInterference.alpha=.5},c.prototype.onPress=function(t){},c.prototype.resize=function(t,e){this.w=t,this.h=e,this.x=t/2,this.y=e/2},i.exports=c}),define("starwars/events/EventController",["require","exports","module"],function(t,e,i){function r(t,e){this.planner=t,this.app=e}r.prototype.start=function(){for(var t in this.planner.properties){var e=this.planner.properties[t];switch(e.image&&this.app.arcadeScreen.arcade.mainScene.advertisingMonitor.addImage(ASSET_URL+e.image),e.hologram&&this.app.hangerScreen.hologram.setData(e.hologram,[e.hologram_text,e.hologram_tip]),t){case"WookieWedesnday":break;case"TokenTuesday":break;case"ForceFriday":this.app.shopSystem.applyDiscount(.25);break;case"SithSaturday":window.sith=!0;break;case"Halloween":window.halloween=!0;break;case"Christmas":}}},i.exports=r}),define("starwars/HangerTokenUtils",["require","exports","module","PIXI","fido/loader/Cache","fido/system/LocalStorage"],function(t,e,i){var r=(t("PIXI"),t("fido/loader/Cache")),n=t("fido/system/LocalStorage"),s={};s.addToken=function(t){var e=r.getJson("config").config.ARCADE_COOKIES_BUNDLE_ID,i=new n(e),s=i.getObject("tokensToAdd");s||(s=0),s+=t,i.storeObject("tokensToAdd",s)},s.getTokens=function(){var t=r.getJson("config").COOKIES_BUNDLE_ID,e=new n(t),i=e.getObject("tokensToAdd");return i||(i=0),e.storeObject("tokensToAdd",0),i},i.exports=s}),define("APP_root",["require","exports","module","PIXI","fido/app/App","fido/system/Ticker","fido/system/Device","fido/sound/SoundBridge","starwars/loader/LoaderScreen","com/arcade/app/screens/HangarScreen","fido/utils/Utils","starwars/app/AlertPanelManager","com/arcade/app/screens/TitleScreen","com/arcade/app/screens/ArcadeScreen","com/arcade/app/screens/GameScreen","com/arcade/app/system/TutorialManager","fido/shop/ShopSystem","fido/shop/RewardSystem","fido/loader/Cache","fido/system/LocalStorage","starwars/transitions/SwipeTransition","fido/goals/Goals","fido/goals/Trophies","signals","fido/app/Brim","libs/GBAPI","starwars/app/TopMenu","starwars/OverlayManager","com/arcade/app/overlay/rewards/RewardsOverlay","com/arcade/app/overlay/rewards/TrophyScreen","com/arcade/app/overlay/CoinOverlay","starwars/overlays/menu/MenuOverlay","com/arcade/app/overlay/WarningPopup/WarningPopupOverlay","starwars/overlays/NameOverlay","starwars/overlays/TutorialOverlay","com/arcade/app/system/TrophyManager","starwars/events/EventPlanner","starwars/events/EventController","starwars/HangerTokenUtils","tracker","tracker"],function(t,e,i){var r=t("PIXI");window.PIXI=r;var n=t("fido/app/App"),s=(t("fido/system/Ticker"),t("fido/system/Device")),o=t("fido/sound/SoundBridge"),a=t("starwars/loader/LoaderScreen"),h=t("com/arcade/app/screens/HangarScreen"),l=t("fido/utils/Utils"),c=t("starwars/app/AlertPanelManager"),u=t("com/arcade/app/screens/TitleScreen"),d=t("com/arcade/app/screens/ArcadeScreen"),p=t("com/arcade/app/screens/GameScreen"),f=t("com/arcade/app/system/TutorialManager"),m=t("fido/shop/ShopSystem"),g=(t("fido/shop/RewardSystem"),t("fido/loader/Cache")),v=t("fido/system/LocalStorage"),_=t("starwars/transitions/SwipeTransition"),y=t("fido/goals/Goals"),x=t("fido/goals/Trophies"),w=t("signals"),b=(t("fido/app/Brim"),t("libs/GBAPI")),T=t("starwars/app/TopMenu"),S=t("starwars/OverlayManager"),A=(t("com/arcade/app/overlay/rewards/RewardsOverlay"),t("com/arcade/app/overlay/rewards/TrophyScreen")),C=t("com/arcade/app/overlay/CoinOverlay"),E=t("starwars/overlays/menu/MenuOverlay"),M=t("com/arcade/app/overlay/WarningPopup/WarningPopupOverlay"),P=t("starwars/overlays/NameOverlay"),L=t("starwars/overlays/TutorialOverlay"),R=t("com/arcade/app/system/TrophyManager"),O=t("starwars/events/EventPlanner"),I=t("starwars/events/EventController"),D=t("starwars/HangerTokenUtils"),B=function(){this.id="Arcade";var t=s.instance.ie||s.instance.iOS&&s.instance.isMobile,e={config:ASSET_URL+"json/config.json",stringsUrl:ASSET_URL+"strings/strings.json",forceCanvas:t,loaderScreen:a};window.app=this,window.cheat=!1,this.mouse={x:0,y:0,active:!1},n.call(this,e),this.renderer.backgroundColor=0,this.renderer.clearBeforeRender=!0,this.safeSize={width:1136,height:640},this.maxSize={width:1136,height:745},window.lowRes=!s.instance.desktop;var i=window.lowRes?"@0.6x":"",r=[SHARED_ASSET_URL+"images/aurek_besh.xml",SHARED_ASSET_URL+"images/ui_elements_shared.json",ASSET_URL+"img/game/ui_elements_arcade"+i+".json",ASSET_URL+"img/localised/tutorials/screen_1.jpg",ASSET_URL+"img/localised/tutorials/screen_2.jpg",ASSET_URL+"img/localised/tutorials/screen_3.jpg",ASSET_URL+"img/localised/tutorials/screen_4.jpg",ASSET_URL+"img/localised/tutorials/screen_5.jpg",ASSET_URL+"img/localised/tutorials/screen_6.jpg",ASSET_URL+"img/localised/tutorials/screen_7.jpg",ASSET_URL+"img/localised/tutorials/screen_8.jpg",ASSET_URL+"img/localised/tutorials/screen_9.jpg",ASSET_URL+"img/localised/tutorials/screen_10.jpg",ASSET_URL+"img/localised/star_wars_arcade_logo.png",ASSET_URL+"img/game/hangar/hangar.json",ASSET_URL+"img/arcade_animation/bg_blur.jpg",ASSET_URL+"img/arcade_animation/foreground.png",ASSET_URL+"img/game/hangar/hangar_holograms.json",ASSET_URL+"img/game/hangar/hangar_spaceships.json",ASSET_URL+"img/game/hangar/hangar_collectibles.json",ASSET_URL+"img/game/hangar/hangar_room_shell.png",ASSET_URL+"img/game/hangar/ceilings/ceiling_carbonite.jpg",ASSET_URL+"img/game/hangar/ceilings/ceiling_empire.jpg",ASSET_URL+"img/game/hangar/ceilings/ceiling_falcon.jpg",ASSET_URL+"img/game/hangar/ceilings/ceiling_hoth.jpg",ASSET_URL+"img/game/hangar/ceilings/ceiling_lothal.jpg",ASSET_URL+"img/game/hangar/floors/floor_carbonite.jpg",ASSET_URL+"img/game/hangar/floors/floor_empire.jpg",ASSET_URL+"img/game/hangar/floors/floor_falcon.jpg",ASSET_URL+"img/game/hangar/floors/floor_hoth.jpg",ASSET_URL+"img/game/hangar/floors/floor_lothal.jpg",ASSET_URL+"img/game/hangar/walls/wall_carbonite.json",ASSET_URL+"img/game/hangar/walls/wall_empire.json",ASSET_URL+"img/game/hangar/walls/wall_hoth.json",ASSET_URL+"img/game/hangar/walls/wall_lothal.json",ASSET_URL+"img/game/hangar/walls/falcon_window.png",ASSET_URL+"img/game/arcade_scene_components@0.6x.json",ASSET_URL+"img/game/arcade_scene_left@0.6x.png",ASSET_URL+"img/game/arcade_scene_right@0.6x.jpg"];window.halloween&&(window.lowRes?(r.push(ASSET_URL+"img/game/seasonals/halloween_0.json"),r.push(ASSET_URL+"img/game/seasonals/halloween_1.json")):(r.push(ASSET_URL+"img/game/seasonals/halloween_0.json"),r.push(ASSET_URL+"img/game/seasonals/halloween_1.json"))),this.loader.addPixiAssets(r),this.loader.addJson(ASSET_URL+"json/shop_data.json","shopData"),this.loader.addJson(ASSET_URL+"json/commsscreen.json","commsscreen"),this.loader.addJson(ASSET_URL+"json/how_to_play.json","howToPlay"),this.loader.addJson(ASSET_URL+"json/alert_panels.json","alertPanels"),this.loader.addJson(SHARED_ASSET_URL+"json/rebels-goals.json","rebelsGoals"),this.loader.addJson(SHARED_ASSET_URL+"json/runner-goals.json","runnerGoals"),this.loader.addJson(SHARED_ASSET_URL+"json/fighter-goals.json","fighterGoals"),this.loader.addJson(SHARED_ASSET_URL+"strings/rebels-goals-strings.json","rebelsGoals_strings"),this.loader.addJson(SHARED_ASSET_URL+"strings/runner-goals-strings.json","runnerGoals_strings"),this.loader.addJson(SHARED_ASSET_URL+"strings/fighter-goals-strings.json","fighterGoals_strings"),this.onReady.add(this.onEventsLoaded,this),this.onSoundReady=new w,s.instance.useSM2?this.onSoundReady.add(this.loadSounds,this):this.loadSounds(),this.startup()};B.prototype=Object.create(n.prototype),B.prototype.onEventsLoaded=function(){var t=g.getJson("events");O.load(t);var e=[],i=new r.loaders.Loader;O.properties.Halloween&&(window.halloween=!0),window.halloween&&(window.lowRes?(e.push(ASSET_URL+"img/game/seasonals/halloween_0.json"),e.push(ASSET_URL+"img/game/seasonals/halloween_1.json")):(e.push(ASSET_URL+"img/game/seasonals/halloween_0.json"),e.push(ASSET_URL+"img/game/seasonals/halloween_1.json"))),O.properties.Christmas&&(window.christmas=!0),window.christmas&&(window.lowRes?e.push(ASSET_URL+"img/game/seasonals/christmas0@0.6x.json"):e.push(ASSET_URL+"img/game/seasonals/christmas0@0.6x.json")),e.length>0?(i.add(e),i.on("complete",this.onAppReady.bind(this)),i.load()):this.onAppReady()},B.prototype.onPreload=function(){},B.prototype.onAppReady=function(){var e=g.getJson("config"),i=window.links;for(var r in i)e[r]=i[r];window.translations=g.getJson("strings").strings,window.gameMode=Number(e.GAME_MODE),window.FLIP_LANGUAGE=window.flipLanguage="true"===e.FLIP_LANGUAGE,window.FONTS_EXTENDED="true"===e.FONTS_EXTENDED,b.instance.setTargetFile(e.SCORE_PATH),b.instance.setSharedKey("1234"),this.shopSystem=new m({startAmount:0,localStorageBundleId:e.COOKIES_BUNDLE_ID});var n=g.getJson("shopData");this.shopSystem.loadFromJson(n),this.shopSystem.updateFromSave(),this.shopSystem.earnMoney(D.getTokens()),"true"===l.get_query("cheat")&&this.shopSystem.earnMoney(1e4),y.instance=new y,x.instance=new x({storage_key:e.REBELS_STORAGE_ID}),x.instance.init(),R.instance=new R(e),this.localStorage=new v(e.COOKIES_BUNDLE_ID),this.overlayManager=new S(this),this.overlayManager.addScreen(new C(app),"coin"),this.overlayManager.addScreen(new A(app),"rewards"),this.overlayManager.addScreen(new E(app),"menu"),this.overlayManager.addScreen(new M(app),"warningPopup"),this.overlayManager.addScreen(new P(app),"name"),this.overlayManager.addScreen(new L(app),"tutorial"),this.overlayManager.screens.coin.onCoinSpinned.addOnce(this.onCoinSpinned.bind(this)),this.overlayManager.screens.name.submitButton.onPress.add(this.onNameSubmited,this),this.topMenu=new T(this),this.topMenu.hide(0),this.topMenu.setMode("arcade"),this.stage.addChild(this.topMenu),window.WEBGL&&(this.screenManager.defaultTransition=new _),this.arcadeScreen=new d(this),this.hangerScreen=new h(this),this.screenManager.addScreen(new u(this),"title"),this.screenManager.addScreen(this.arcadeScreen,"arcade"),this.screenManager.addScreen(this.hangerScreen,"hangar"),this.screenManager.addScreen(new p(this,e.GAME1_URL),"game1"),this.screenManager.addScreen(new p(this,e.GAME2_URL),"game2"),this.screenManager.addScreen(new p(this,e.GAME3_URL),"game3");var s=new I(O,this);s.start(),this.arcadeScreen.arcade.mainScene.createLights(),this.stage.addChild(this.overlayManager.view),this.alertPanelManager=new c(this,"com.disney.arcade.panels_"),this.alertPanelManager.load(g.getJson("alertPanels")),this.stage.addChild(this.alertPanelManager.view),this.resize(this.w,this.h),this.tutorialManager=new f(this),this.localStorage.get("lastAccessDate")!==(new Date).toDateString()&&this.tutorialManager.isDone?setTimeout(function(){this.overlayManager.show("coin")}.bind(this),1e3):setTimeout(function(){this.start(),this.screenManager.screens.arcade.playIntro(2)}.bind(this),1400),this.stage.addChild(this.overlayManager.view),this.alertPanelManager=new c(this,"com.disney.arcade.panels_"),this.alertPanelManager.load(g.getJson("alertPanels")),this.stage.addChild(this.alertPanelManager.view),this.alertPanelManager.view.parent=this.screenManager.container;var o=t("tracker");o.init(e.LOCALE,"starwarsarcade_bd_bd"),o.trackAction("load"),this.trackerStorage=new v("com.goodboy.arcade.track"),this.trackerStorage.get("loaded")||(this.trackerStorage.store("loaded",!0),o.trackAction("new_load")),this.resize(this.w,this.h)},B.prototype.onNameSubmited=function(e){this.overlayManager.hide("name"),t("tracker").trackAction("my_name_entry")},B.prototype.onCoinSpinned=function(t){this.localStorage.store("lastAccessDate",(new Date).toDateString()),this.start(),this.screenManager.screens.arcade.playIntro(4),setTimeout(function(){this.overlayManager.hide("coin"),this.topMenu.addCoin(t,this.overlayManager.screens.coin.coinSpriteContainer)}.bind(this),2e3)},B.prototype.start=function(){l.get_query("fastplay")?this.screenManager.gotoScreenByID("arcade"):l.get_query("goto")?this.screenManager.gotoScreenByID(l.get_query("goto")):this.screenManager.gotoScreenByID("arcade")},B.prototype.loadSounds=function(){o.music.addSound(ASSET_URL+"snd/arcademusic","arcademusic",{loop:!0,volume:.9}),o.sfx.addSound(ASSET_URL+"snd/sw_fanfare","sw_fanfare"),o.sfx.addSound(ASSET_URL+"snd/changescene","changescene"),o.sfx.addSound(ASSET_URL+"snd/clickthrough","clickthrough"),o.sfx.addSound(ASSET_URL+"snd/comsscreen","comsscreen"),o.sfx.addSound(ASSET_URL+"snd/hologram","hologram"),o.sfx.addSound(ASSET_URL+"snd/selectbeep","selectbeep"),o.sfx.addSound(ASSET_URL+"snd/uipausemenu","uipausemenu"),o.sfx.addSound(ASSET_URL+"snd/neonstartup","neonstartup"),o.sfx.addSound(ASSET_URL+"snd/ito_droid","ito_droid"),o.sfx.addSound(ASSET_URL+"snd/mousedroid","mouse",{volume:1.8}),o.sfx.addSound(ASSET_URL+"snd/random/chopper1","chopper1",{volume:1.8}),o.sfx.addSound(ASSET_URL+"snd/random/chopper2","chopper2",{volume:1.8}),o.sfx.addSound(ASSET_URL+"snd/random/Blaster_Pistol_Fire_Officer","Blaster_Pistol_Fire_Officer",{volume:2}),o.sfx.addSound(ASSET_URL+"snd/random/005","005",{volume:2}),o.sfx.addSound(ASSET_URL+"snd/random/TIE_noise","TIE_noise",{volume:2}),o.sfx.addSound(ASSET_URL+"snd/xwing_shoot","xwing_shoot",{volume:1}),o.sfx.addSound(ASSET_URL+"snd/random/BRTHVaderSlow","BRTHVaderSlow",{volume:2}),o.sfx.addSound(ASSET_URL+"snd/random/lightsaber_ignite","lightsaber_ignite",{volume:2}),o.sfx.addSound(ASSET_URL+"snd/random/exp_GEN_vehicle_01","exp_GEN_vehicle_01",{volume:1.8}),o.sfx.addSound(ASSET_URL+"snd/random/exp_GREN_Large","exp_GREN_Large",{volume:1.8}),o.sfx.addSound(ASSET_URL+"snd/random/exp_GREN_Medium","exp_GREN_Medium",{volume:1.8}),o.sfx.addSound(ASSET_URL+"snd/random/exp_GREN_small","exp_GREN_small",{volume:1.8}),o.sfx.addSound(ASSET_URL+"snd/random/forcebutton","forcebutton",{volume:1.8}),o.sfx.addSound(ASSET_URL+"snd/random/forcecrate","forcecrate",{volume:1.8}),o.sfx.addSound(ASSET_URL+"snd/random/forceon","forceon",{volume:1.8}),o.sfx.addSound(ASSET_URL+"snd/random/forceout","forceout",{volume:1.8}),o.sfx.addSound(ASSET_URL+"snd/random/forceout2","forceout2",{volume:1.8}),o.sfx.addSound(ASSET_URL+"snd/random/sabgrenexplode","sabgrenexplode",{volume:1.8}),o.sfx.addSound(ASSET_URL+"snd/random/sabjump","sabjump",{volume:1.8}),o.sfx.addSound(ASSET_URL+"snd/random/sabminethrow","sabminethrow",{volume:1.8}),o.sfx.addSound(ASSET_URL+"snd/random/Vader_Breath","Vader_Breath",{volume:1.8}),o.sfx.addSound(ASSET_URL+"snd/random/vent","vent",{volume:1.8}),o.sfx.addSound(ASSET_URL+"snd/random/zebjump","zebjump",{volume:1.8}),o.sfx.addSound(ASSET_URL+"snd/random/zebjump2","zebjump2",{volume:1.8}),o.sfx.addSound(ASSET_URL+"snd/random/zebjump3","zebjump3",{volume:1.8}),o.sfx.addSound(ASSET_URL+"snd/random/zebpush","zebpush",{volume:1.8}),o.sfx.addSound(ASSET_URL+"snd/coin_fanfare","coin_fanfare",{volume:1.8}),o.sfx.addSound(ASSET_URL+"snd/coin_count","coin_count",{volume:1.8}),o.sfx.addSound(ASSET_URL+"snd/coin_flip","coin_flip",{volume:1.8}),o.sfx.addGroup(["chopper1","Blaster_Pistol_Fire_Officer","005","TIE_noise","BRTHVaderSlow","lightsaber_ignite"],"random"),o.sfx.addGroup(["chopper1","chopper2"],"chopper")},B.prototype.resize=function(t,e){this.w=t,this.h=e;var i=1;s.instance.isMobile&&(i=window.devicePixelRatio?window.devicePixelRatio:window.screen.deviceXDPI/window.screen.logicalXDPI,window.devicePixelRatio>2&&(window.devicePixelRatio=2)),i>2&&(i=2);var r=t/this.safeSize.width<e/this.safeSize.height?t/this.safeSize.width:e/this.safeSize.height,n=Math.min(this.maxSize.width*r,t),o=Math.min(this.maxSize.height*r,e);this.renderer.resize(n*i|0,o*i|0),this.view.style.width=n+"px",this.view.style.height=o+"px",this.view.style.left=t/2-n/2+"px",this.view.style.top=e/2-o/2+"px",this.screenManager.resize(n/r,o/r),this.overlayManager&&(this.overlayManager.resize(n/r,o/r),this.overlayManager.view.scale.set(r*i)),this.alertPanelManager&&this.alertPanelManager.resize(n/r,o/r),this.topMenu&&(this.topMenu.scale.set(r*i),this.topMenu.resize(n/r,o/r)),this.screenManager.container.scale.set(r*i)},i.exports=B});var Stats=function(){var t=Date.now(),e=t,i=0,r=1/0,n=0,s=0,o=1/0,a=0,h=0,l=0,c=document.createElement("div");c.id="stats",c.addEventListener("mousedown",function(t){t.preventDefault(),_(++l%2)},!1),c.style.cssText="width:80px;opacity:0.9;cursor:pointer";var u=document.createElement("div");u.id="fps",u.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",c.appendChild(u);var d=document.createElement("div");d.id="fpsText",d.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",d.innerHTML="FPS",u.appendChild(d);var p=document.createElement("div");for(p.id="fpsGraph",p.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",u.appendChild(p);74>p.children.length;){var f=document.createElement("span");f.style.cssText="width:1px;height:30px;float:left;background-color:#113",p.appendChild(f)}var m=document.createElement("div");m.id="ms",m.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",c.appendChild(m);var g=document.createElement("div");g.id="msText",g.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",g.innerHTML="MS",m.appendChild(g);var v=document.createElement("div");for(v.id="msGraph",v.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",m.appendChild(v);74>v.children.length;)f=document.createElement("span"),f.style.cssText="width:1px;height:30px;float:left;background-color:#131",v.appendChild(f);var _=function(t){switch(l=t){case 0:u.style.display="block",m.style.display="none";break;case 1:u.style.display="none",m.style.display="block"}};return{REVISION:11,domElement:c,setMode:_,begin:function(){t=Date.now()},end:function(){var l=Date.now();i=l-t,r=Math.min(r,i),n=Math.max(n,i),g.textContent=i+" MS ("+r+"-"+n+")";var c=Math.min(30,30-30*(i/200));return v.appendChild(v.firstChild).style.height=c+"px",h++,l>e+1e3&&(s=Math.round(1e3*h/(l-e)),o=Math.min(o,s),a=Math.max(a,s),d.textContent=s+" FPS ("+o+"-"+a+")",c=Math.min(30,30-30*(s/100)),p.appendChild(p.firstChild).style.height=c+"px",e=l,h=0),l},update:function(){t=this.end()}}};define("stats",function(){}),this.createjs=this.createjs||{},function(){var t=createjs.PreloadJS=createjs.PreloadJS||{};t.version="0.6.0",t.buildDate="Thu, 11 Dec 2014 23:32:09 GMT"}(),this.createjs=this.createjs||{},createjs.extend=function(t,e){function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i},this.createjs=this.createjs||{},createjs.promote=function(t,e){var i=t.prototype,r=Object.getPrototypeOf&&Object.getPrototypeOf(i)||i.__proto__;if(r){i[(e+="_")+"constructor"]=r.constructor;for(var n in r)i.hasOwnProperty(n)&&"function"==typeof r[n]&&(i[e+n]=r[n])}return t},this.createjs=this.createjs||{},createjs.indexOf=function(t,e){for(var i=0,r=t.length;r>i;i++)if(e===t[i])return i;return-1},this.createjs=this.createjs||{},function(){createjs.proxy=function(t,e){var i=Array.prototype.slice.call(arguments,2);return function(){return t.apply(e,Array.prototype.slice.call(arguments,0).concat(i))}}}(),this.createjs=this.createjs||{},function(){function t(){throw"BrowserDetect cannot be instantiated"}var e=t.agent=window.navigator.userAgent;t.isWindowPhone=e.indexOf("IEMobile")>-1||e.indexOf("Windows Phone")>-1,t.isFirefox=e.indexOf("Firefox")>-1,t.isOpera=null!=window.opera,t.isChrome=e.indexOf("Chrome")>-1,t.isIOS=(e.indexOf("iPod")>-1||e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1)&&!t.isWindowPhone,t.isAndroid=e.indexOf("Android")>-1&&!t.isWindowPhone,t.isBlackberry=e.indexOf("Blackberry")>-1,createjs.BrowserDetect=t}(),this.createjs=this.createjs||{},function(){function t(t,e,i){
this.type=t,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!e,this.cancelable=!!i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var e=t.prototype;e.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.remove=function(){this.removed=!0},e.clone=function(){return new t(this.type,this.bubbles,this.cancelable)},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=t}(),this.createjs=this.createjs||{},function(){function t(t,e,i){this.Event_constructor("error"),this.title=t,this.message=e,this.data=i}var e=createjs.extend(t,createjs.Event);e.clone=function(){return new createjs.ErrorEvent(this.title,this.message,this.data)},createjs.ErrorEvent=createjs.promote(t,"Event")}(),this.createjs=this.createjs||{},function(){function t(){this._listeners=null,this._captureListeners=null}var e=t.prototype;t.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger},e.addEventListener=function(t,e,i){var r;r=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var n=r[t];return n&&this.removeEventListener(t,e,i),n=r[t],n?n.push(e):r[t]=[e],e},e.on=function(t,e,i,r,n,s){return e.handleEvent&&(i=i||e,e=e.handleEvent),i=i||this,this.addEventListener(t,function(t){e.call(i,t,n),r&&t.remove()},s)},e.removeEventListener=function(t,e,i){var r=i?this._captureListeners:this._listeners;if(r){var n=r[t];if(n)for(var s=0,o=n.length;o>s;s++)if(n[s]==e){1==o?delete r[t]:n.splice(s,1);break}}},e.off=e.removeEventListener,e.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},e.dispatchEvent=function(t){if("string"==typeof t){var e=this._listeners;if(!e||!e[t])return!1;t=new createjs.Event(t)}else t.target&&t.clone&&(t=t.clone());try{t.target=this}catch(i){}if(t.bubbles&&this.parent){for(var r=this,n=[r];r.parent;)n.push(r=r.parent);var s,o=n.length;for(s=o-1;s>=0&&!t.propagationStopped;s--)n[s]._dispatchEvent(t,1+(0==s));for(s=1;o>s&&!t.propagationStopped;s++)n[s]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return t.defaultPrevented},e.hasEventListener=function(t){var e=this._listeners,i=this._captureListeners;return!!(e&&e[t]||i&&i[t])},e.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1},e.toString=function(){return"[EventDispatcher]"},e._dispatchEvent=function(t,e){var i,r=1==e?this._captureListeners:this._listeners;if(t&&r){var n=r[t.type];if(!n||!(i=n.length))return;try{t.currentTarget=this}catch(s){}try{t.eventPhase=e}catch(s){}t.removed=!1,n=n.slice();for(var o=0;i>o&&!t.immediatePropagationStopped;o++){var a=n[o];a.handleEvent?a.handleEvent(t):a(t),t.removed&&(this.off(t.type,a,1==e),t.removed=!1)}}},createjs.EventDispatcher=t}(),this.createjs=this.createjs||{},function(){function t(t,e){this.Event_constructor("progress"),this.loaded=t,this.total=null==e?1:e,this.progress=0==e?0:this.loaded/this.total}var e=createjs.extend(t,createjs.Event);e.clone=function(){return new createjs.ProgressEvent(this.loaded,this.total)},createjs.ProgressEvent=createjs.promote(t,"Event")}(window),function(){function t(e,r){function s(t){if(s[t]!==g)return s[t];var e;if("bug-string-char-index"==t)e="a"!="a"[0];else if("json"==t)e=s("json-stringify")&&s("json-parse");else{var i,n='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==t){var h=r.stringify,c="function"==typeof h&&y;if(c){(i=function(){return 1}).toJSON=i;try{c="0"===h(0)&&"0"===h(new o)&&'""'==h(new a)&&h(_)===g&&h(g)===g&&h()===g&&"1"===h(i)&&"[1]"==h([i])&&"[null]"==h([g])&&"null"==h(null)&&"[null,null,null]"==h([g,_,null])&&h({a:[i,!0,!1,null,"\0\b\n\f\r\t"]})==n&&"1"===h(null,i)&&"[\n 1,\n 2\n]"==h([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==h(new l((-864e13)))&&'"+275760-09-13T00:00:00.000Z"'==h(new l(864e13))&&'"-000001-01-01T00:00:00.000Z"'==h(new l((-621987552e5)))&&'"1969-12-31T23:59:59.999Z"'==h(new l((-1)))}catch(u){c=!1}}e=c}if("json-parse"==t){var d=r.parse;if("function"==typeof d)try{if(0===d("0")&&!d(!1)){i=d(n);var p=5==i.a.length&&1===i.a[0];if(p){try{p=!d('"\t"')}catch(u){}if(p)try{p=1!==d("01")}catch(u){}if(p)try{p=1!==d("1.")}catch(u){}}}}catch(u){p=!1}e=p}}return s[t]=!!e}e||(e=n.Object()),r||(r=n.Object());var o=e.Number||n.Number,a=e.String||n.String,h=e.Object||n.Object,l=e.Date||n.Date,c=e.SyntaxError||n.SyntaxError,u=e.TypeError||n.TypeError,d=e.Math||n.Math,p=e.JSON||n.JSON;"object"==typeof p&&p&&(r.stringify=p.stringify,r.parse=p.parse);var f,m,g,v=h.prototype,_=v.toString,y=new l((-0xc782b5b800cec));try{y=-109252==y.getUTCFullYear()&&0===y.getUTCMonth()&&1===y.getUTCDate()&&10==y.getUTCHours()&&37==y.getUTCMinutes()&&6==y.getUTCSeconds()&&708==y.getUTCMilliseconds()}catch(x){}if(!s("json")){var w="[object Function]",b="[object Date]",T="[object Number]",S="[object String]",A="[object Array]",C="[object Boolean]",E=s("bug-string-char-index");if(!y)var M=d.floor,P=[0,31,59,90,120,151,181,212,243,273,304,334],L=function(t,e){return P[e]+365*(t-1970)+M((t-1969+(e=+(e>1)))/4)-M((t-1901+e)/100)+M((t-1601+e)/400)};if((f=v.hasOwnProperty)||(f=function(t){var e,i={};return(i.__proto__=null,i.__proto__={toString:1},i).toString!=_?f=function(t){var e=this.__proto__,i=t in(this.__proto__=null,this);return this.__proto__=e,i}:(e=i.constructor,f=function(t){var i=(this.constructor||e).prototype;return t in this&&!(t in i&&this[t]===i[t])}),i=null,f.call(this,t)}),m=function(t,e){var r,n,s,o=0;(r=function(){this.valueOf=0}).prototype.valueOf=0,n=new r;for(s in n)f.call(n,s)&&o++;return r=n=null,o?m=2==o?function(t,e){var i,r={},n=_.call(t)==w;for(i in t)n&&"prototype"==i||f.call(r,i)||!(r[i]=1)||!f.call(t,i)||e(i)}:function(t,e){var i,r,n=_.call(t)==w;for(i in t)n&&"prototype"==i||!f.call(t,i)||(r="constructor"===i)||e(i);(r||f.call(t,i="constructor"))&&e(i)}:(n=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],m=function(t,e){var r,s,o=_.call(t)==w,a=!o&&"function"!=typeof t.constructor&&i[typeof t.hasOwnProperty]&&t.hasOwnProperty||f;for(r in t)o&&"prototype"==r||!a.call(t,r)||e(r);for(s=n.length;r=n[--s];a.call(t,r)&&e(r));}),m(t,e)},!s("json-stringify")){var R={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},O="000000",I=function(t,e){return(O+(e||0)).slice(-t)},D="\\u00",B=function(t){for(var e='"',i=0,r=t.length,n=!E||r>10,s=n&&(E?t.split(""):t);r>i;i++){var o=t.charCodeAt(i);switch(o){case 8:case 9:case 10:case 12:case 13:case 34:case 92:e+=R[o];break;default:if(32>o){e+=D+I(2,o.toString(16));break}e+=n?s[i]:t.charAt(i)}}return e+'"'},k=function(t,e,i,r,n,s,o){var a,h,l,c,d,p,v,y,x,w,E,P,R,O,D,F;try{a=e[t]}catch(j){}if("object"==typeof a&&a)if(h=_.call(a),h!=b||f.call(a,"toJSON"))"function"==typeof a.toJSON&&(h!=T&&h!=S&&h!=A||f.call(a,"toJSON"))&&(a=a.toJSON(t));else if(a>-1/0&&1/0>a){if(L){for(d=M(a/864e5),l=M(d/365.2425)+1970-1;L(l+1,0)<=d;l++);for(c=M((d-L(l,0))/30.42);L(l,c+1)<=d;c++);d=1+d-L(l,c),p=(a%864e5+864e5)%864e5,v=M(p/36e5)%24,y=M(p/6e4)%60,x=M(p/1e3)%60,w=p%1e3}else l=a.getUTCFullYear(),c=a.getUTCMonth(),d=a.getUTCDate(),v=a.getUTCHours(),y=a.getUTCMinutes(),x=a.getUTCSeconds(),w=a.getUTCMilliseconds();a=(0>=l||l>=1e4?(0>l?"-":"+")+I(6,0>l?-l:l):I(4,l))+"-"+I(2,c+1)+"-"+I(2,d)+"T"+I(2,v)+":"+I(2,y)+":"+I(2,x)+"."+I(3,w)+"Z"}else a=null;if(i&&(a=i.call(e,t,a)),null===a)return"null";if(h=_.call(a),h==C)return""+a;if(h==T)return a>-1/0&&1/0>a?""+a:"null";if(h==S)return B(""+a);if("object"==typeof a){for(O=o.length;O--;)if(o[O]===a)throw u();if(o.push(a),E=[],D=s,s+=n,h==A){for(R=0,O=a.length;O>R;R++)P=k(R,a,i,r,n,s,o),E.push(P===g?"null":P);F=E.length?n?"[\n"+s+E.join(",\n"+s)+"\n"+D+"]":"["+E.join(",")+"]":"[]"}else m(r||a,function(t){var e=k(t,a,i,r,n,s,o);e!==g&&E.push(B(t)+":"+(n?" ":"")+e)}),F=E.length?n?"{\n"+s+E.join(",\n"+s)+"\n"+D+"}":"{"+E.join(",")+"}":"{}";return o.pop(),F}};r.stringify=function(t,e,r){var n,s,o,a;if(i[typeof e]&&e)if((a=_.call(e))==w)s=e;else if(a==A){o={};for(var h,l=0,c=e.length;c>l;h=e[l++],a=_.call(h),(a==S||a==T)&&(o[h]=1));}if(r)if((a=_.call(r))==T){if((r-=r%1)>0)for(n="",r>10&&(r=10);n.length<r;n+=" ");}else a==S&&(n=r.length<=10?r:r.slice(0,10));return k("",(h={},h[""]=t,h),s,o,n,"",[])}}if(!s("json-parse")){var F,j,N=a.fromCharCode,U={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},H=function(){throw F=j=null,c()},X=function(){for(var t,e,i,r,n,s=j,o=s.length;o>F;)switch(n=s.charCodeAt(F)){case 9:case 10:case 13:case 32:F++;break;case 123:case 125:case 91:case 93:case 58:case 44:return t=E?s.charAt(F):s[F],F++,t;case 34:for(t="@",F++;o>F;)if(n=s.charCodeAt(F),32>n)H();else if(92==n)switch(n=s.charCodeAt(++F)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:t+=U[n],F++;break;case 117:for(e=++F,i=F+4;i>F;F++)n=s.charCodeAt(F),n>=48&&57>=n||n>=97&&102>=n||n>=65&&70>=n||H();t+=N("0x"+s.slice(e,F));break;default:H()}else{if(34==n)break;for(n=s.charCodeAt(F),e=F;n>=32&&92!=n&&34!=n;)n=s.charCodeAt(++F);t+=s.slice(e,F)}if(34==s.charCodeAt(F))return F++,t;H();default:if(e=F,45==n&&(r=!0,n=s.charCodeAt(++F)),n>=48&&57>=n){for(48==n&&(n=s.charCodeAt(F+1),n>=48&&57>=n)&&H(),r=!1;o>F&&(n=s.charCodeAt(F),n>=48&&57>=n);F++);if(46==s.charCodeAt(F)){for(i=++F;o>i&&(n=s.charCodeAt(i),n>=48&&57>=n);i++);i==F&&H(),F=i}if(n=s.charCodeAt(F),101==n||69==n){for(n=s.charCodeAt(++F),(43==n||45==n)&&F++,i=F;o>i&&(n=s.charCodeAt(i),n>=48&&57>=n);i++);i==F&&H(),F=i}return+s.slice(e,F)}if(r&&H(),"true"==s.slice(F,F+4))return F+=4,!0;if("false"==s.slice(F,F+5))return F+=5,!1;if("null"==s.slice(F,F+4))return F+=4,null;H()}return"$"},G=function(t){var e,i;if("$"==t&&H(),"string"==typeof t){if("@"==(E?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(e=[];t=X(),"]"!=t;i||(i=!0))i&&(","==t?(t=X(),"]"==t&&H()):H()),","==t&&H(),e.push(G(t));return e}if("{"==t){for(e={};t=X(),"}"!=t;i||(i=!0))i&&(","==t?(t=X(),"}"==t&&H()):H()),(","==t||"string"!=typeof t||"@"!=(E?t.charAt(0):t[0])||":"!=X())&&H(),e[t.slice(1)]=G(X());return e}H()}return t},q=function(t,e,i){var r=Y(t,e,i);r===g?delete t[e]:t[e]=r},Y=function(t,e,i){var r,n=t[e];if("object"==typeof n&&n)if(_.call(n)==A)for(r=n.length;r--;)q(n,r,i);else m(n,function(t){q(n,t,i)});return i.call(t,e,n)};r.parse=function(t,e){var i,r;return F=0,j=""+t,i=G(X()),"$"!=X()&&H(),F=j=null,e&&_.call(e)==w?Y((r={},r[""]=i,r),"",e):i}}}return r.runInContext=t,r}var e="function"==typeof define&&define.amd,i={"function":!0,object:!0},r=i[typeof exports]&&exports&&!exports.nodeType&&exports,n=i[typeof window]&&window||this,s=r&&i[typeof module]&&module&&!module.nodeType&&"object"==typeof global&&global;if(!s||s.global!==s&&s.window!==s&&s.self!==s||(n=s),r&&!e)t(n,r);else{var o=n.JSON,a=n.JSON3,h=!1,l=t(n,n.JSON3={noConflict:function(){return h||(h=!0,n.JSON=o,n.JSON3=a,o=a=null),l}});n.JSON={parse:l.parse,stringify:l.stringify}}e&&define("preloader",[],function(){return l})}.call(this),function(){var t={};t.parseXML=function(t,e){var i=null;try{if(window.DOMParser){var r=new DOMParser;i=r.parseFromString(t,e)}else i=new ActiveXObject("Microsoft.XMLDOM"),i.async=!1,i.loadXML(t)}catch(n){}return i},t.parseJSON=function(t){if(null==t)return null;try{return JSON.parse(t)}catch(e){throw e}},createjs.DataUtils=t}(),this.createjs=this.createjs||{},function(){function t(){this.src=null,this.type=null,this.id=null,this.maintainOrder=!1,this.callback=null,this.data=null,this.method=createjs.LoadItem.GET,this.values=null,this.headers=null,this.withCredentials=!1,this.mimeType=null,this.crossOrigin=null,this.loadTimeout=8e3}var e=t.prototype={},i=t;i.create=function(e){if("string"==typeof e){var r=new t;return r.src=e,r}if(e instanceof i)return e;if(e instanceof Object)return e;throw new Error("Type not recognized.")},e.set=function(t){for(var e in t)this[e]=t[e];return this},createjs.LoadItem=i}(),function(){var t={};t.ABSOLUTE_PATT=/^(?:\w+:)?\/{2}/i,t.RELATIVE_PATT=/^[.\/]*?\//i,t.EXTENSION_PATT=/\/?[^\/]+\.(\w{1,5})$/i,t.parseURI=function(e){var i={absolute:!1,relative:!1};if(null==e)return i;var r=e.indexOf("?");r>-1&&(e=e.substr(0,r));var n;return t.ABSOLUTE_PATT.test(e)?i.absolute=!0:t.RELATIVE_PATT.test(e)&&(i.relative=!0),(n=e.match(t.EXTENSION_PATT))&&(i.extension=n[1].toLowerCase()),i},t.formatQueryString=function(t,e){if(null==t)throw new Error("You must specify data.");var i=[];for(var r in t)i.push(r+"="+escape(t[r]));return e&&(i=i.concat(e)),i.join("&")},t.buildPath=function(t,e){if(null==e)return t;var i=[],r=t.indexOf("?");if(-1!=r){var n=t.slice(r+1);i=i.concat(n.split("&"))}return-1!=r?t.slice(0,r)+"?"+this._formatQueryString(e,i):t+"?"+this._formatQueryString(e,i)},t.isCrossDomain=function(t){var e=document.createElement("a");e.href=t.src;var i=document.createElement("a");i.href=location.href;var r=""!=e.hostname&&(e.port!=i.port||e.protocol!=i.protocol||e.hostname!=i.hostname);return r},t.isLocal=function(t){var e=document.createElement("a");return e.href=t.src,""==e.hostname&&"file:"==e.protocol},t.isBinary=function(t){switch(t){case createjs.AbstractLoader.IMAGE:case createjs.AbstractLoader.BINARY:return!0;default:return!1}},t.isImageTag=function(t){return t instanceof HTMLImageElement},t.isAudioTag=function(t){return!!window.HTMLAudioElement&&t instanceof HTMLAudioElement},t.isVideoTag=function(t){return window.HTMLVideoElement?t instanceof HTMLVideoElement:void 0},t.isText=function(t){switch(t){case createjs.AbstractLoader.TEXT:case createjs.AbstractLoader.JSON:case createjs.AbstractLoader.MANIFEST:case createjs.AbstractLoader.XML:case createjs.AbstractLoader.CSS:case createjs.AbstractLoader.SVG:case createjs.AbstractLoader.JAVASCRIPT:return!0;default:return!1}},t.getTypeByExtension=function(t){if(null==t)return createjs.AbstractLoader.TEXT;switch(t.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.AbstractLoader.IMAGE;case"ogg":case"mp3":case"webm":return createjs.AbstractLoader.SOUND;case"mp4":case"webm":case"ts":return createjs.AbstractLoader.VIDEO;case"json":return createjs.AbstractLoader.JSON;case"xml":return createjs.AbstractLoader.XML;case"css":return createjs.AbstractLoader.CSS;case"js":return createjs.AbstractLoader.JAVASCRIPT;case"svg":return createjs.AbstractLoader.SVG;default:return createjs.AbstractLoader.TEXT}},createjs.RequestUtils=t}(),this.createjs=this.createjs||{},function(){function t(t,e,i){this.EventDispatcher_constructor(),this.loaded=!1,this.canceled=!1,this.progress=0,this.type=i,this.resultFormatter=null,this._item=t?createjs.LoadItem.create(t):null,this._preferXHR=e,this._result=null,this._rawResult=null,this._loadedItems=null,this._tagSrcAttribute=null,this._tag=null}var e=createjs.extend(t,createjs.EventDispatcher),i=t;i.POST="POST",i.GET="GET",i.BINARY="binary",i.CSS="css",i.IMAGE="image",i.JAVASCRIPT="javascript",i.JSON="json",i.JSONP="jsonp",i.MANIFEST="manifest",i.SOUND="sound",i.VIDEO="video",i.SPRITESHEET="spritesheet",i.SVG="svg",i.TEXT="text",i.XML="xml",e.getItem=function(){return this._item},e.getResult=function(t){return t?this._rawResult:this._result},e.getTag=function(){return this._tag},e.setTag=function(t){this._tag=t},e.load=function(){this._createRequest(),this._request.on("complete",this,this),this._request.on("progress",this,this),this._request.on("loadStart",this,this),this._request.on("abort",this,this),this._request.on("timeout",this,this),this._request.on("error",this,this);var t=new createjs.Event("initialize");t.loader=this._request,this.dispatchEvent(t),this._request.load()},e.cancel=function(){this.canceled=!0,this.destroy()},e.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy()),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},e.getLoadedItems=function(){return this._loadedItems},e._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._createTag=function(){return null},e._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},e._sendProgress=function(t){if(!this._isCanceled()){var e=null;"number"==typeof t?(this.progress=t,e=new createjs.ProgressEvent(this.progress)):(e=t,this.progress=t.loaded/t.total,e.progress=this.progress,(isNaN(this.progress)||1/0==this.progress)&&(this.progress=0)),this.hasEventListener("progress")&&this.dispatchEvent(e)}},e._sendComplete=function(){if(!this._isCanceled()){this.loaded=!0;var t=new createjs.Event("complete");t.rawResult=this._rawResult,null!=this._result&&(t.result=this._result),this.dispatchEvent(t)}},e._sendError=function(t){!this._isCanceled()&&this.hasEventListener("error")&&(null==t&&(t=new createjs.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(t))},e._isCanceled=function(){return!(null!=window.createjs&&!this.canceled)},e.resultFormatter=null,e.handleEvent=function(t){switch(t.type){case"complete":this._rawResult=t.target._response;var e=this.resultFormatter&&this.resultFormatter(this),i=this;e instanceof Function?e(function(t){i._result=t,i._sendComplete()}):(this._result=e||this._rawResult,this._sendComplete());break;case"progress":this._sendProgress(t);break;case"error":this._sendError(t);break;case"loadstart":this._sendLoadStart();break;case"abort":case"timeout":this._isCanceled()||this.dispatchEvent(t.type)}},e.buildPath=function(t,e){return createjs.RequestUtils.buildPath(t,e)},e.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){function t(t,e,i){this.AbstractLoader_constructor(t,e,i),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src"}var e=createjs.extend(t,createjs.AbstractLoader);e.load=function(){this._tag||(this._tag=this._createTag(this._item.src)),this._tag.preload="auto",this._tag.load(),this.AbstractLoader_load()},e._createTag=function(){},e._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._formatResult=function(t){return this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR&&(t.getTag().src=t.getResult(!0)),t.getTag()},createjs.AbstractMediaLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){var t=function(t){this._item=t},e=createjs.extend(t,createjs.EventDispatcher);e.load=function(){},e.destroy=function(){},e.cancel=function(){},createjs.AbstractRequest=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){function t(t,e,i){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this),this._addedToDOM=!1,this._startTagVisibility=null}var e=createjs.extend(t,createjs.AbstractRequest);e.load=function(){null==this._tag.parentNode&&(window.document.body.appendChild(this._tag),this._addedToDOM=!0),this._tag.onload=createjs.proxy(this._handleTagComplete,this),this._tag.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this);var t=new createjs.Event("initialize");t.loader=this._tag,this.dispatchEvent(t),this._hideTag(),this._tag[this._tagSrcAttribute]=this._item.src},e.destroy=function(){this._clean(),this._tag=null,this.AbstractRequest_destroy()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;("loaded"==t.readyState||"complete"==t.readyState)&&this._handleTagComplete()},e._handleTagComplete=function(){this._rawResult=this._tag,this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult,this._clean(),this._showTag(),this.dispatchEvent("complete")},e._clean=function(){this._tag.onload=null,this._tag.onreadystatechange=null,this._addedToDOM&&null!=this._tag.parentNode&&this._tag.parentNode.removeChild(this._tag)},e._hideTag=function(){this._startTagVisibility=this._tag.style.visibility,this._tag.style.visibility="hidden"},e._showTag=function(){this._tag.style.visibility=this._startTagVisibility},e._handleStalled=function(){},createjs.TagRequest=createjs.promote(t,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){function t(t,e,i){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this)}var e=createjs.extend(t,createjs.TagRequest);e.load=function(){this._tag.onstalled=createjs.proxy(this._handleStalled,this),this._tag.onprogress=createjs.proxy(this._handleProgress,this),this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1),this.TagRequest_load()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;("loaded"==t.readyState||"complete"==t.readyState)&&this._handleTagComplete()},e._handleStalled=function(){},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(e)}},e._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._tag.onprogress=null,this.TagRequest__clean()},createjs.MediaTagRequest=createjs.promote(t,"TagRequest")}(),this.createjs=this.createjs||{},function(){function t(t){this.AbstractRequest_constructor(t),this._request=null,this._loadTimeout=null,this._xhrLevel=1,this._response=null,this._rawResponse=null,this._canceled=!1,this._handleLoadStartProxy=createjs.proxy(this._handleLoadStart,this),this._handleProgressProxy=createjs.proxy(this._handleProgress,this),this._handleAbortProxy=createjs.proxy(this._handleAbort,this),this._handleErrorProxy=createjs.proxy(this._handleError,this),this._handleTimeoutProxy=createjs.proxy(this._handleTimeout,this),this._handleLoadProxy=createjs.proxy(this._handleLoad,this),this._handleReadyStateChangeProxy=createjs.proxy(this._handleReadyStateChange,this),!this._createXHR(t)}var e=createjs.extend(t,createjs.AbstractRequest);t.ACTIVEX_VERSIONS=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],e.getResult=function(t){return t&&this._rawResponse?this._rawResponse:this._response},e.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},e.load=function(){if(null==this._request)return void this._handleError();this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1),1==this._xhrLevel&&(this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout));try{this._item.values&&this._item.method!=createjs.AbstractLoader.GET?this._item.method==createjs.AbstractLoader.POST&&this._request.send(createjs.RequestUtils.formatQueryString(this._item.values)):this._request.send()}catch(t){this.dispatchEvent(new createjs.ErrorEvent("XHR_SEND",null,t))}},e.setResponseType=function(t){this._request.responseType=t},e.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},e.getResponseHeader=function(t){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(t):null},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(e)}},e._handleLoadStart=function(){clearTimeout(this._loadTimeout),this.dispatchEvent("loadstart")},e._handleAbort=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("XHR_ABORTED",null,t))},e._handleError=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent(t.message))},e._handleReadyStateChange=function(){4==this._request.readyState&&this._handleLoad()},e._handleLoad=function(){if(!this.loaded){this.loaded=!0;var t=this._checkError();if(t)return void this._handleError(t);this._response=this._getResponse(),this._clean(),this.dispatchEvent(new createjs.Event("complete"))}},e._handleTimeout=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT",null,t))},e._checkError=function(){var t=parseInt(this._request.status);switch(t){case 404:case 0:return new Error(t)}return null},e._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(t){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(t){}return null},e._createXHR=function(t){var e=createjs.RequestUtils.isCrossDomain(t),i={},r=null;if(window.XMLHttpRequest)r=new XMLHttpRequest,e&&void 0===r.withCredentials&&window.XDomainRequest&&(r=new XDomainRequest);else{for(var n=0,o=s.ACTIVEX_VERSIONS.length;o>n;n++){s.ACTIVEX_VERSIONS[n];try{r=new ActiveXObject(axVersions);break}catch(a){}}if(null==r)return!1}t.mimeType&&r.overrideMimeType&&r.overrideMimeType(t.mimeType),this._xhrLevel="string"==typeof r.responseType?2:1;var h=null;if(h=t.method==createjs.AbstractLoader.GET?createjs.RequestUtils.buildPath(t.src,t.values):t.src,r.open(t.method||createjs.AbstractLoader.GET,h,!0),e&&r instanceof XMLHttpRequest&&1==this._xhrLevel&&(i.Origin=location.origin),t.values&&t.method==createjs.AbstractLoader.POST&&(i["Content-Type"]="application/x-www-form-urlencoded"),e||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),t.headers)for(var l in t.headers)i[l]=t.headers[l];for(l in i)r.setRequestHeader(l,i[l]);return r instanceof XMLHttpRequest&&void 0!==t.withCredentials&&(r.withCredentials=t.withCredentials),this._request=r,!0},e._clean=function(){clearTimeout(this._loadTimeout),this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)},e.toString=function(){return"[PreloadJS XHRRequest]"},createjs.XHRRequest=createjs.promote(t,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){function t(t,e,i){this.AbstractLoader_constructor(),this.init(t,e,i)}var e=createjs.extend(t,createjs.AbstractLoader),i=t;e.init=function(t,e,i){this.useXHR=!0,this.preferXHR=!0,this._preferXHR=!0,this.setPreferXHR(t),this.stopOnError=!1,this.maintainScriptOrder=!0,this.next=null,this._paused=!1,this._basePath=e,this._crossOrigin=i,this._typeCallbacks={},this._extensionCallbacks={},this._loadStartWasDispatched=!1,this._maxConnections=1,this._currentlyLoadingScript=null,this._currentLoads=[],this._loadQueue=[],this._loadQueueBackup=[],this._loadItemsById={},this._loadItemsBySrc={},this._loadedResults={},this._loadedRawResults={},this._numItems=0,this._numItemsLoaded=0,this._scriptOrder=[],this._loadedScripts=[],this._lastProgress=NaN,this._availableLoaders=[createjs.ImageLoader,createjs.JavaScriptLoader,createjs.CSSLoader,createjs.JSONLoader,createjs.JSONPLoader,createjs.SoundLoader,createjs.ManifestLoader,createjs.SpriteSheetLoader,createjs.XMLLoader,createjs.SVGLoader,createjs.BinaryLoader,createjs.VideoLoader,createjs.TextLoader],this._defaultLoaderLength=this._availableLoaders.length},i.loadTimeout=8e3,i.LOAD_TIMEOUT=0,i.BINARY=createjs.AbstractLoader.BINARY,i.CSS=createjs.AbstractLoader.CSS,i.IMAGE=createjs.AbstractLoader.IMAGE,i.JAVASCRIPT=createjs.AbstractLoader.JAVASCRIPT,i.JSON=createjs.AbstractLoader.JSON,i.JSONP=createjs.AbstractLoader.JSONP,i.MANIFEST=createjs.AbstractLoader.MANIFEST,i.SOUND=createjs.AbstractLoader.SOUND,i.VIDEO=createjs.AbstractLoader.VIDEO,i.SVG=createjs.AbstractLoader.SVG,i.TEXT=createjs.AbstractLoader.TEXT,i.XML=createjs.AbstractLoader.XML,i.POST=createjs.AbstractLoader.POST,i.GET=createjs.AbstractLoader.GET,e.registerLoader=function(t){if(!t||!t.canLoadItem)throw new Error("loader is of an incorrect type.");if(-1!=this._availableLoaders.indexOf(t))throw new Error("loader already exists.");this._availableLoaders.unshift(t)},e.unregisterLoader=function(t){var e=this._availableLoaders.indexOf(t);-1!=e&&e<this._defaultLoaderLength-1&&this._availableLoaders.splice(e,1)},e.setUseXHR=function(t){return this.setPreferXHR(t)},e.setPreferXHR=function(t){return this.preferXHR=0!=t&&null!=window.XMLHttpRequest,this.preferXHR},e.removeAll=function(){this.remove()},e.remove=function(t){var e=null;if(!t||t instanceof Array){if(t)e=t;else if(arguments.length>0)return}else e=[t];var i=!1;if(e){for(;e.length;){var r=e.pop(),n=this.getResult(r);for(s=this._loadQueue.length-1;s>=0;s--)if(o=this._loadQueue[s].getItem(),o.id==r||o.src==r){this._loadQueue.splice(s,1)[0].cancel();break}for(s=this._loadQueueBackup.length-1;s>=0;s--)if(o=this._loadQueueBackup[s].getItem(),o.id==r||o.src==r){this._loadQueueBackup.splice(s,1)[0].cancel();break}if(n)delete this._loadItemsById[n.id],delete this._loadItemsBySrc[n.src],this._disposeItem(n);else for(var s=this._currentLoads.length-1;s>=0;s--){var o=this._currentLoads[s].getItem();if(o.id==r||o.src==r){this._currentLoads.splice(s,1)[0].cancel(),i=!0;break}}}i&&this._loadNext()}else{this.close();for(var a in this._loadItemsById)this._disposeItem(this._loadItemsById[a]);this.init(this.preferXHR,this._basePath)}},e.reset=function(){this.close();for(var t in this._loadItemsById)this._disposeItem(this._loadItemsById[t]);for(var e=[],i=0,r=this._loadQueueBackup.length;r>i;i++)e.push(this._loadQueueBackup[i].getItem());this.loadManifest(e,!1)},e.installPlugin=function(t){if(null!=t&&null!=t.getPreloadHandlers){var e=t.getPreloadHandlers();if(e.scope=t,null!=e.types)for(var i=0,r=e.types.length;r>i;i++)this._typeCallbacks[e.types[i]]=e;if(null!=e.extensions)for(i=0,r=e.extensions.length;r>i;i++)this._extensionCallbacks[e.extensions[i]]=e}},e.setMaxConnections=function(t){this._maxConnections=t,!this._paused&&this._loadQueue.length>0&&this._loadNext()},e.loadFile=function(t,e,i){if(null==t){var r=new createjs.ErrorEvent("PRELOAD_NO_FILE");return void this._sendError(r)}this._addItem(t,null,i),this.setPaused(e===!1)},e.loadManifest=function(t,e,r){var n=null,s=null;if(t instanceof Array){if(0==t.length){var o=new createjs.ErrorEvent("PRELOAD_MANIFEST_EMPTY");return void this._sendError(o)}n=t}else if("string"==typeof t)n=[{src:t,type:i.MANIFEST}];else{if("object"!=typeof t){var o=new createjs.ErrorEvent("PRELOAD_MANIFEST_NULL");return void this._sendError(o)}if(void 0!==t.src){if(null==t.type)t.type=i.MANIFEST;else if(t.type!=i.MANIFEST){var o=new createjs.ErrorEvent("PRELOAD_MANIFEST_TYPE");this._sendError(o)}n=[t]}else void 0!==t.manifest&&(n=t.manifest,s=t.path)}for(var a=0,h=n.length;h>a;a++)this._addItem(n[a],s,r);
this.setPaused(e===!1)},e.load=function(){this.setPaused(!1)},e.getItem=function(t){return this._loadItemsById[t]||this._loadItemsBySrc[t]},e.getResult=function(t,e){var i=this._loadItemsById[t]||this._loadItemsBySrc[t];if(null==i)return null;var r=i.id;return e&&this._loadedRawResults[r]?this._loadedRawResults[r]:this._loadedResults[r]},e.getItems=function(t){for(var e=[],i=0,r=this._loadQueueBackup.length;r>i;i++){var n=this._loadQueueBackup[i],s=n.getItem();(t!==!0||n.loaded)&&e.push({item:s,result:this.getResult(s.id),rawResult:this.getResult(s.id,!0)})}return e},e.setPaused=function(t){this._paused=t,this._paused||this._loadNext()},e.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();this._scriptOrder.length=0,this._loadedScripts.length=0,this.loadStartWasDispatched=!1,this._itemCount=0,this._lastProgress=NaN},e._addItem=function(t,e,i){var r=this._createLoadItem(t,e,i);if(null!=r){var n=this._createLoader(r);null!=n&&(r._loader=n,this._loadQueue.push(n),this._loadQueueBackup.push(n),this._numItems++,this._updateProgress(),(this.maintainScriptOrder&&r.type==createjs.LoadQueue.JAVASCRIPT||r.maintainOrder===!0)&&(this._scriptOrder.push(r),this._loadedScripts.push(null)))}},e._createLoadItem=function(t,e,r){var n=createjs.LoadItem.create(t);if(null==n)return null;var s=createjs.RequestUtils.parseURI(n.src);s.extension&&(n.ext=s.extension),null==n.type&&(n.type=createjs.RequestUtils.getTypeByExtension(n.ext));var o="",a=r||this._basePath,h=n.src;if(!s.absolute&&!s.relative)if(e){o=e;var l=createjs.RequestUtils.parseURI(e);h=e+h,null==a||l.absolute||l.relative||(o=a+o)}else null!=a&&(o=a);n.src=o+n.src,n.path=o,(void 0===n.id||null===n.id||""===n.id)&&(n.id=h);var c=this._typeCallbacks[n.type]||this._extensionCallbacks[n.ext];if(c){var u=c.callback.call(c.scope,n,this);if(u===!1)return null;u===!0||null!=u&&(n._loader=u),s=createjs.RequestUtils.parseURI(n.src),null!=s.extension&&(n.ext=s.extension)}return this._loadItemsById[n.id]=n,this._loadItemsBySrc[n.src]=n,null==n.loadTimeout&&(n.loadTimeout=i.loadTimeout),null==n.crossOrigin&&(n.crossOrigin=this._crossOrigin),n},e._createLoader=function(t){if(null!=t._loader)return t._loader;for(var e=this.preferXHR,i=0;i<this._availableLoaders.length;i++){var r=this._availableLoaders[i];if(r&&r.canLoadItem(t))return new r(t,e)}return null},e._loadNext=function(){if(!this._paused){this._loadStartWasDispatched||(this._sendLoadStart(),this._loadStartWasDispatched=!0),this._numItems==this._numItemsLoaded?(this.loaded=!0,this._sendComplete(),this.next&&this.next.load&&this.next.load()):this.loaded=!1;for(var t=0;t<this._loadQueue.length&&!(this._currentLoads.length>=this._maxConnections);t++){var e=this._loadQueue[t];this._canStartLoad(e)&&(this._loadQueue.splice(t,1),t--,this._loadItem(e))}}},e._loadItem=function(t){t.on("fileload",this._handleFileLoad,this),t.on("progress",this._handleProgress,this),t.on("complete",this._handleFileComplete,this),t.on("error",this._handleError,this),t.on("fileerror",this._handleFileError,this),this._currentLoads.push(t),this._sendFileStart(t.getItem()),t.load()},e._handleFileLoad=function(t){t.target=null,this.dispatchEvent(t)},e._handleFileError=function(t){var e=new createjs.ErrorEvent("FILE_LOAD_ERROR",null,t.item);this._sendError(e)},e._handleError=function(t){var e=t.target;this._numItemsLoaded++,this._finishOrderedItem(e,!0),this._updateProgress();var i=new createjs.ErrorEvent("FILE_LOAD_ERROR",null,e.getItem());this._sendError(i),this.stopOnError||(this._removeLoadItem(e),this._loadNext())},e._handleFileComplete=function(t){var e=t.target,i=e.getItem(),r=e.getResult();this._loadedResults[i.id]=r;var n=e.getResult(!0);null!=n&&n!==r&&(this._loadedRawResults[i.id]=n),this._saveLoadedItems(e),this._removeLoadItem(e),this._finishOrderedItem(e)||this._processFinishedLoad(i,e)},e._saveLoadedItems=function(t){var e=t.getLoadedItems();if(null!==e)for(var i=0;i<e.length;i++){var r=e[i].item;this._loadItemsBySrc[r.src]=r,this._loadItemsById[r.id]=r,this._loadedResults[r.id]=e[i].result,this._loadedRawResults[r.id]=e[i].rawResult}},e._finishOrderedItem=function(t,e){var i=t.getItem();if(this.maintainScriptOrder&&i.type==createjs.LoadQueue.JAVASCRIPT||i.maintainOrder){t instanceof createjs.JavaScriptLoader&&(this._currentlyLoadingScript=!1);var r=createjs.indexOf(this._scriptOrder,i);return-1!=r&&(this._loadedScripts[r]=e===!0||i,this._checkScriptLoadOrder(),!0)}return!1},e._checkScriptLoadOrder=function(){for(var t=this._loadedScripts.length,e=0;t>e;e++){var i=this._loadedScripts[e];if(null===i)break;if(i!==!0){var r=this._loadedResults[i.id];i.type==createjs.LoadQueue.JAVASCRIPT&&(document.body||document.getElementsByTagName("body")[0]).appendChild(r);var n=i._loader;this._processFinishedLoad(i,n),this._loadedScripts[e]=!0}}},e._processFinishedLoad=function(t,e){this._numItemsLoaded++,this._updateProgress(),this._sendFileComplete(t,e),this._loadNext()},e._canStartLoad=function(t){if(!this.maintainScriptOrder||t.preferXHR)return!0;var e=t.getItem();if(e.type!=createjs.LoadQueue.JAVASCRIPT)return!0;if(this._currentlyLoadingScript)return!1;for(var i=this._scriptOrder.indexOf(e),r=0;i>r;){var n=this._loadedScripts[r];if(null==n)return!1;r++}return this._currentlyLoadingScript=!0,!0},e._removeLoadItem=function(t){var e=t.getItem();delete e._loader;for(var i=this._currentLoads.length,r=0;i>r;r++)if(this._currentLoads[r]==t){this._currentLoads.splice(r,1);break}},e._handleProgress=function(t){var e=t.target;this._sendFileProgress(e.getItem(),e.progress),this._updateProgress()},e._updateProgress=function(){var t=this._numItemsLoaded/this._numItems,e=this._numItems-this._numItemsLoaded;if(e>0){for(var i=0,r=0,n=this._currentLoads.length;n>r;r++)i+=this._currentLoads[r].progress;t+=i/e*(e/this._numItems)}this._lastProgress!=t&&(this._sendProgress(t),this._lastProgress=t)},e._disposeItem=function(t){delete this._loadedResults[t.id],delete this._loadedRawResults[t.id],delete this._loadItemsById[t.id],delete this._loadItemsBySrc[t.src]},e._sendFileProgress=function(t,e){if(this._isCanceled())return void this._cleanUp();if(this.hasEventListener("fileprogress")){var i=new createjs.Event("fileprogress");i.progress=e,i.loaded=e,i.total=1,i.item=t,this.dispatchEvent(i)}},e._sendFileComplete=function(t,e){if(!this._isCanceled()){var i=new createjs.Event("fileload");i.loader=e,i.item=t,i.result=this._loadedResults[t.id],i.rawResult=this._loadedRawResults[t.id],t.completeHandler&&t.completeHandler(i),this.hasEventListener("fileload")&&this.dispatchEvent(i)}},e._sendFileStart=function(t){var e=new createjs.Event("filestart");e.item=t,this.hasEventListener("filestart")&&this.dispatchEvent(e)},e.toString=function(){return"[PreloadJS LoadQueue]"},createjs.LoadQueue=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.TEXT)}var e=(createjs.extend(t,createjs.AbstractLoader),t);e.canLoadItem=function(t){return t.type==createjs.AbstractLoader.TEXT},createjs.TextLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.BINARY),this.on("initialize",this._updateXHR,this)}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.BINARY},e._updateXHR=function(t){t.loader.setResponseType("arraybuffer")},createjs.BinaryLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.CSS),this.resultFormatter=this._formatResult,this._tagSrcAttribute="href",this._tag=document.createElement(e?"style":"link"),this._tag.rel="stylesheet",this._tag.type="text/css"}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.CSS},e._formatResult=function(t){if(this._preferXHR){var e=t.getTag(),i=document.getElementsByTagName("head")[0];if(i.appendChild(e),e.styleSheet)e.styleSheet.cssText=t.getResult(!0);else{var r=document.createTextNode(t.getResult(!0));e.appendChild(r)}}else e=this._tag;return e},createjs.CSSLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.IMAGE),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",createjs.RequestUtils.isImageTag(t)?this._tag=t:createjs.RequestUtils.isImageTag(t.src)?this._tag=t.src:createjs.RequestUtils.isImageTag(t.tag)&&(this._tag=t.tag),null!=this._tag?this._preferXHR=!1:this._tag=document.createElement("img"),this.on("initialize",this._updateXHR,this)}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.IMAGE},e.load=function(){if(""!=this._tag.src&&this._tag.complete)return void this._sendComplete();var t=this._item.crossOrigin;1==t&&(t="Anonymous"),null==t||createjs.RequestUtils.isLocal(this._item.src)||(this._tag.crossOrigin=t),this.AbstractLoader_load()},e._updateXHR=function(t){t.loader.mimeType="text/plain; charset=x-user-defined-binary",t.loader.setResponseType&&t.loader.setResponseType("blob")},e._formatResult=function(t){var e=this;return function(i){var r=e._tag,n=window.URL||window.webkitURL;if(e._preferXHR)if(n){var s=n.createObjectURL(t.getResult(!0));r.src=s,r.onload=function(){n.revokeObjectURL(e.src)}}else r.src=t.getItem().src;r.complete?i(r):r.onload=function(){i(this)}}},createjs.ImageLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.JAVASCRIPT),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.setTag(document.createElement("script"))}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.JAVASCRIPT},e._formatResult=function(t){var e=t.getTag();return this._preferXHR&&(e.text=t.getResult(!0)),e},createjs.JavaScriptLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.JSON),this.resultFormatter=this._formatResult}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.JSON&&!t._loadAsJSONP},e._formatResult=function(t){var e=null;try{e=createjs.DataUtils.parseJSON(t.getResult(!0))}catch(i){var r=new createjs.ErrorEvent("JSON_FORMAT",null,i);return this._sendError(r),i}return e},createjs.JSONLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){function t(t){this.AbstractLoader_constructor(t,!1,createjs.AbstractLoader.JSONP),this.setTag(document.createElement("script")),this.getTag().type="text/javascript"}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.JSONP||t._loadAsJSONP},e.cancel=function(){this.AbstractLoader_cancel(),this._dispose()},e.load=function(){if(null==this._item.callback)throw new Error("callback is required for loading JSONP requests.");if(null!=window[this._item.callback])throw new Error("JSONP callback '"+this._item.callback+"' already exists on window. You need to specify a different callback or re-name the current one.");window[this._item.callback]=createjs.proxy(this._handleLoad,this),window.document.body.appendChild(this._tag),this._tag.src=this._item.src},e._handleLoad=function(t){this._result=this._rawResult=t,this._sendComplete(),this._dispose()},e._dispose=function(){window.document.body.removeChild(this._tag),delete window[this._item.callback]},createjs.JSONPLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){function t(t){this.AbstractLoader_constructor(t,null,createjs.AbstractLoader.MANIFEST),this._manifestQueue=null}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.MANIFEST_PROGRESS=.25,i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.MANIFEST},e.load=function(){this.AbstractLoader_load()},e._createRequest=function(){var t=this._item.callback;this._request=null!=t?new createjs.JSONPLoader(this._item):new createjs.JSONLoader(this._item)},e.handleEvent=function(t){switch(t.type){case"complete":return this._rawResult=t.target.getResult(!0),this._result=t.target.getResult(),this._sendProgress(i.MANIFEST_PROGRESS),void this._loadManifest(this._result);case"progress":return t.loaded*=i.MANIFEST_PROGRESS,this.progress=t.loaded/t.total,(isNaN(this.progress)||1/0==this.progress)&&(this.progress=0),void this._sendProgress(t)}this.AbstractLoader_handleEvent(t)},e.destroy=function(){this.AbstractLoader_destroy(),this._manifestQueue.close()},e._loadManifest=function(t){if(t&&t.manifest){var e=this._manifestQueue=new createjs.LoadQueue;e.on("fileload",this._handleManifestFileLoad,this),e.on("progress",this._handleManifestProgress,this),e.on("complete",this._handleManifestComplete,this,!0),e.on("error",this._handleManifestError,this,!0),e.loadManifest(t)}else this._sendComplete()},e._handleManifestFileLoad=function(t){t.target=null,this.dispatchEvent(t)},e._handleManifestComplete=function(){this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},e._handleManifestProgress=function(t){this.progress=t.progress*(1-i.MANIFEST_PROGRESS)+i.MANIFEST_PROGRESS,this._sendProgress(this.progress)},e._handleManifestError=function(t){var e=new createjs.Event("fileerror");e.item=t.data,this.dispatchEvent(e)},createjs.ManifestLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){function t(t,e){this.AbstractMediaLoader_constructor(t,e,createjs.AbstractLoader.SOUND),createjs.RequestUtils.isAudioTag(t)?this._tag=t:createjs.RequestUtils.isAudioTag(t.src)?this._tag=t:createjs.RequestUtils.isAudioTag(t.tag)&&(this._tag=createjs.RequestUtils.isAudioTag(t)?t:t.src),null!=this._tag&&(this._preferXHR=!1)}var e=createjs.extend(t,createjs.AbstractMediaLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.SOUND},e._createTag=function(t){var e=document.createElement("audio");return e.autoplay=!1,e.preload="none",e.src=t,e},createjs.SoundLoader=createjs.promote(t,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){function t(t,e){this.AbstractMediaLoader_constructor(t,e,createjs.AbstractLoader.VIDEO),createjs.RequestUtils.isVideoTag(t)||createjs.RequestUtils.isVideoTag(t.src)?(this.setTag(createjs.RequestUtils.isVideoTag(t)?t:t.src),this._preferXHR=!1):this.setTag(this._createTag())}var e=createjs.extend(t,createjs.AbstractMediaLoader),i=t;e._createTag=function(){return document.createElement("video")},i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.VIDEO},createjs.VideoLoader=createjs.promote(t,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){function t(t){this.AbstractLoader_constructor(t,null,createjs.AbstractLoader.SPRITESHEET),this._manifestQueue=null}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.SPRITESHEET_PROGRESS=.25,i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.SPRITESHEET},e.destroy=function(){this.AbstractLoader_destroy,this._manifestQueue.close()},e._createRequest=function(){var t=this._item.callback;this._request=null!=t&&t instanceof Function?new createjs.JSONPLoader(this._item):new createjs.JSONLoader(this._item)},e.handleEvent=function(t){switch(t.type){case"complete":return this._rawResult=t.target.getResult(!0),this._result=t.target.getResult(),this._sendProgress(i.SPRITESHEET_PROGRESS),void this._loadManifest(this._result);case"progress":return t.loaded*=i.SPRITESHEET_PROGRESS,this.progress=t.loaded/t.total,(isNaN(this.progress)||1/0==this.progress)&&(this.progress=0),void this._sendProgress(t)}this.AbstractLoader_handleEvent(t)},e._loadManifest=function(t){if(t&&t.images){var e=this._manifestQueue=new createjs.LoadQueue;e.on("complete",this._handleManifestComplete,this,!0),e.on("fileload",this._handleManifestFileLoad,this),e.on("progress",this._handleManifestProgress,this),e.on("error",this._handleManifestError,this,!0),e.loadManifest(t.images)}},e._handleManifestFileLoad=function(t){var e=t.result;if(null!=e){var i=this.getResult().images,r=i.indexOf(t.item.src);i[r]=e}},e._handleManifestComplete=function(){this._result=new createjs.SpriteSheet(this._result),this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},e._handleManifestProgress=function(t){this.progress=t.progress*(1-i.SPRITESHEET_PROGRESS)+i.SPRITESHEET_PROGRESS,this._sendProgress(this.progress)},e._handleManifestError=function(t){var e=new createjs.Event("fileerror");e.item=t.data,this.dispatchEvent(e)},createjs.SpriteSheetLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.SVG),this.resultFormatter=this._formatResult,this._tagSrcAttribute="data",e?this.setTag(document.createElement("svg")):(this.setTag(document.createElement("object")),this.getTag().type="image/svg+xml"),this.getTag().style.visibility="hidden"}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.SVG},e._formatResult=function(t){var e=createjs.DataUtils.parseXML(t.getResult(!0),"text/xml"),i=t.getTag();return!this._preferXHR&&document.body.contains(i)&&document.body.removeChild(i),null!=e.documentElement?(i.appendChild(e.documentElement),i.style.visibility="visible",i):e},createjs.SVGLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.XML),this.resultFormatter=this._formatResult}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.XML},e._formatResult=function(t){return createjs.DataUtils.parseXML(t.getResult(!0),"text/xml")},createjs.XMLLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){var t=createjs.SoundJS=createjs.SoundJS||{};t.version="0.6.0",t.buildDate="Thu, 11 Dec 2014 23:32:09 GMT"}(),this.createjs=this.createjs||{},createjs.extend=function(t,e){function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i},this.createjs=this.createjs||{},createjs.promote=function(t,e){var i=t.prototype,r=Object.getPrototypeOf&&Object.getPrototypeOf(i)||i.__proto__;if(r){i[(e+="_")+"constructor"]=r.constructor;for(var n in r)i.hasOwnProperty(n)&&"function"==typeof r[n]&&(i[e+n]=r[n])}return t},this.createjs=this.createjs||{},createjs.indexOf=function(t,e){for(var i=0,r=t.length;r>i;i++)if(e===t[i])return i;return-1},this.createjs=this.createjs||{},function(){createjs.proxy=function(t,e){var i=Array.prototype.slice.call(arguments,2);return function(){return t.apply(e,Array.prototype.slice.call(arguments,0).concat(i))}}}(),this.createjs=this.createjs||{},function(){var t=!!Object.defineProperty,e={};try{Object.defineProperty(e,"bar",{get:function(){return this._bar},set:function(t){this._bar=t}})}catch(i){t=!1}createjs.definePropertySupported=t}(),this.createjs=this.createjs||{},function(){function t(){throw"BrowserDetect cannot be instantiated"}var e=t.agent=window.navigator.userAgent;t.isWindowPhone=e.indexOf("IEMobile")>-1||e.indexOf("Windows Phone")>-1,t.isFirefox=e.indexOf("Firefox")>-1,t.isOpera=null!=window.opera,t.isChrome=e.indexOf("Chrome")>-1,t.isIOS=(e.indexOf("iPod")>-1||e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1)&&!t.isWindowPhone,t.isAndroid=e.indexOf("Android")>-1&&!t.isWindowPhone,t.isBlackberry=e.indexOf("Blackberry")>-1,createjs.BrowserDetect=t}(),this.createjs=this.createjs||{},function(){function t(){this._listeners=null,this._captureListeners=null}var e=t.prototype;t.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger},e.addEventListener=function(t,e,i){var r;r=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var n=r[t];return n&&this.removeEventListener(t,e,i),n=r[t],n?n.push(e):r[t]=[e],e},e.on=function(t,e,i,r,n,s){return e.handleEvent&&(i=i||e,e=e.handleEvent),i=i||this,this.addEventListener(t,function(t){e.call(i,t,n),r&&t.remove()},s)},e.removeEventListener=function(t,e,i){var r=i?this._captureListeners:this._listeners;if(r){var n=r[t];if(n)for(var s=0,o=n.length;o>s;s++)if(n[s]==e){1==o?delete r[t]:n.splice(s,1);break}}},e.off=e.removeEventListener,e.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},e.dispatchEvent=function(t){if("string"==typeof t){var e=this._listeners;if(!e||!e[t])return!1;t=new createjs.Event(t)}else t.target&&t.clone&&(t=t.clone());try{t.target=this}catch(i){}if(t.bubbles&&this.parent){for(var r=this,n=[r];r.parent;)n.push(r=r.parent);var s,o=n.length;for(s=o-1;s>=0&&!t.propagationStopped;s--)n[s]._dispatchEvent(t,1+(0==s));for(s=1;o>s&&!t.propagationStopped;s++)n[s]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return t.defaultPrevented},e.hasEventListener=function(t){var e=this._listeners,i=this._captureListeners;return!!(e&&e[t]||i&&i[t])},e.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1},e.toString=function(){return"[EventDispatcher]"},e._dispatchEvent=function(t,e){var i,r=1==e?this._captureListeners:this._listeners;if(t&&r){var n=r[t.type];if(!n||!(i=n.length))return;try{t.currentTarget=this}catch(s){}try{t.eventPhase=e}catch(s){}t.removed=!1,n=n.slice();for(var o=0;i>o&&!t.immediatePropagationStopped;o++){var a=n[o];a.handleEvent?a.handleEvent(t):a(t),t.removed&&(this.off(t.type,a,1==e),t.removed=!1)}}},createjs.EventDispatcher=t}(),this.createjs=this.createjs||{},function(){function t(t,e,i){this.type=t,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!e,this.cancelable=!!i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var e=t.prototype;e.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.remove=function(){this.removed=!0},e.clone=function(){return new t(this.type,this.bubbles,this.cancelable)},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=t}(),this.createjs=this.createjs||{},function(){function t(t,e,i){this.Event_constructor("error"),this.title=t,this.message=e,this.data=i}var e=createjs.extend(t,createjs.Event);e.clone=function(){return new createjs.ErrorEvent(this.title,this.message,this.data)},createjs.ErrorEvent=createjs.promote(t,"Event")}(),this.createjs=this.createjs||{},function(){function t(t,e){this.Event_constructor("progress"),this.loaded=t,this.total=null==e?1:e,this.progress=0==e?0:this.loaded/this.total}var e=createjs.extend(t,createjs.Event);e.clone=function(){return new createjs.ProgressEvent(this.loaded,this.total)},createjs.ProgressEvent=createjs.promote(t,"Event")}(window),this.createjs=this.createjs||{},function(){function t(){this.src=null,this.type=null,this.id=null,this.maintainOrder=!1,this.callback=null,this.data=null,this.method=createjs.LoadItem.GET,this.values=null,this.headers=null,this.withCredentials=!1,this.mimeType=null,this.crossOrigin="Anonymous",this.loadTimeout=8e3}var e=t.prototype={},i=t;i.create=function(e){if("string"==typeof e){var r=new t;return r.src=e,r}if(e instanceof i)return e;if(e instanceof Object)return e;throw new Error("Type not recognized.")},e.set=function(t){for(var e in t)this[e]=t[e];return this},createjs.LoadItem=i}(),function(){var t={};t.ABSOLUTE_PATT=/^(?:\w+:)?\/{2}/i,t.RELATIVE_PATT=/^[.\/]*?\//i,t.EXTENSION_PATT=/\/?[^\/]+\.(\w{1,5})$/i,t.parseURI=function(e){var i={absolute:!1,relative:!1};if(null==e)return i;var r=e.indexOf("?");r>-1&&(e=e.substr(0,r));var n;return t.ABSOLUTE_PATT.test(e)?i.absolute=!0:t.RELATIVE_PATT.test(e)&&(i.relative=!0),(n=e.match(t.EXTENSION_PATT))&&(i.extension=n[1].toLowerCase()),i},t.formatQueryString=function(t,e){if(null==t)throw new Error("You must specify data.");var i=[];for(var r in t)i.push(r+"="+escape(t[r]));return e&&(i=i.concat(e)),i.join("&")},t.buildPath=function(t,e){if(null==e)return t;var i=[],r=t.indexOf("?");if(-1!=r){var n=t.slice(r+1);i=i.concat(n.split("&"))}return-1!=r?t.slice(0,r)+"?"+this._formatQueryString(e,i):t+"?"+this._formatQueryString(e,i)},t.isCrossDomain=function(t){var e=document.createElement("a");e.href=t.src;var i=document.createElement("a");i.href=location.href;var r=""!=e.hostname&&(e.port!=i.port||e.protocol!=i.protocol||e.hostname!=i.hostname);return r},t.isLocal=function(t){var e=document.createElement("a");return e.href=t.src,""==e.hostname&&"file:"==e.protocol},t.isBinary=function(t){switch(t){case createjs.AbstractLoader.IMAGE:case createjs.AbstractLoader.BINARY:return!0;default:return!1}},t.isImageTag=function(t){return t instanceof HTMLImageElement},t.isAudioTag=function(t){return!!window.HTMLAudioElement&&t instanceof HTMLAudioElement},t.isVideoTag=function(t){return window.HTMLVideoElement?t instanceof HTMLVideoElement:void 0},t.isText=function(t){switch(t){case createjs.AbstractLoader.TEXT:case createjs.AbstractLoader.JSON:case createjs.AbstractLoader.MANIFEST:case createjs.AbstractLoader.XML:case createjs.AbstractLoader.CSS:case createjs.AbstractLoader.SVG:case createjs.AbstractLoader.JAVASCRIPT:return!0;default:return!1}},t.getTypeByExtension=function(t){if(null==t)return createjs.AbstractLoader.TEXT;switch(t.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.AbstractLoader.IMAGE;case"ogg":case"mp3":case"webm":return createjs.AbstractLoader.SOUND;case"mp4":case"webm":case"ts":return createjs.AbstractLoader.VIDEO;case"json":return createjs.AbstractLoader.JSON;case"xml":return createjs.AbstractLoader.XML;case"css":return createjs.AbstractLoader.CSS;case"js":return createjs.AbstractLoader.JAVASCRIPT;case"svg":return createjs.AbstractLoader.SVG;default:return createjs.AbstractLoader.TEXT}},createjs.RequestUtils=t}(),this.createjs=this.createjs||{},function(){function t(t,e,i){this.EventDispatcher_constructor(),this.loaded=!1,this.canceled=!1,this.progress=0,this.type=i,this.resultFormatter=null,this._item=t?createjs.LoadItem.create(t):null,this._preferXHR=e,this._result=null,this._rawResult=null,this._loadedItems=null,this._tagSrcAttribute=null,this._tag=null}var e=createjs.extend(t,createjs.EventDispatcher),i=t;i.POST="POST",i.GET="GET",i.BINARY="binary",i.CSS="css",i.IMAGE="image",i.JAVASCRIPT="javascript",i.JSON="json",i.JSONP="jsonp",i.MANIFEST="manifest",i.SOUND="sound",i.VIDEO="video",i.SPRITESHEET="spritesheet",i.SVG="svg",i.TEXT="text",i.XML="xml",e.getItem=function(){return this._item},e.getResult=function(t){return t?this._rawResult:this._result},e.getTag=function(){return this._tag},e.setTag=function(t){this._tag=t},e.load=function(){this._createRequest(),this._request.on("complete",this,this),this._request.on("progress",this,this),this._request.on("loadStart",this,this),this._request.on("abort",this,this),this._request.on("timeout",this,this),this._request.on("error",this,this);var t=new createjs.Event("initialize");t.loader=this._request,this.dispatchEvent(t),this._request.load()},e.cancel=function(){this.canceled=!0,this.destroy()},e.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy()),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},e.getLoadedItems=function(){return this._loadedItems},e._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._createTag=function(){return null},e._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},e._sendProgress=function(t){if(!this._isCanceled()){var e=null;"number"==typeof t?(this.progress=t,e=new createjs.ProgressEvent(this.progress)):(e=t,this.progress=t.loaded/t.total,e.progress=this.progress,(isNaN(this.progress)||1/0==this.progress)&&(this.progress=0)),this.hasEventListener("progress")&&this.dispatchEvent(e)}},e._sendComplete=function(){if(!this._isCanceled()){this.loaded=!0;var t=new createjs.Event("complete");t.rawResult=this._rawResult,null!=this._result&&(t.result=this._result),this.dispatchEvent(t)}},e._sendError=function(t){!this._isCanceled()&&this.hasEventListener("error")&&(null==t&&(t=new createjs.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(t))},e._isCanceled=function(){return!(null!=window.createjs&&!this.canceled)},e.resultFormatter=null,e.handleEvent=function(t){switch(t.type){case"complete":this._rawResult=t.target._response;var e=this.resultFormatter&&this.resultFormatter(this),i=this;e instanceof Function?e(function(t){i._result=t,i._sendComplete()}):(this._result=e||this._rawResult,this._sendComplete());break;case"progress":this._sendProgress(t);break;case"error":this._sendError(t);break;case"loadstart":this._sendLoadStart();break;case"abort":case"timeout":this._isCanceled()||this.dispatchEvent(t.type)}},e.buildPath=function(t,e){return createjs.RequestUtils.buildPath(t,e)},e.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){function t(t,e,i){this.AbstractLoader_constructor(t,e,i),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src"}var e=createjs.extend(t,createjs.AbstractLoader);e.load=function(){this._tag||(this._tag=this._createTag(this._item.src)),this._tag.preload="auto",this._tag.load(),this.AbstractLoader_load()},e._createTag=function(){},e._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._formatResult=function(t){return this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR&&(t.getTag().src=t.getResult(!0)),t.getTag()},createjs.AbstractMediaLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){var t=function(t){this._item=t},e=createjs.extend(t,createjs.EventDispatcher);e.load=function(){},e.destroy=function(){},e.cancel=function(){},createjs.AbstractRequest=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){function t(t,e,i){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this),this._addedToDOM=!1,this._startTagVisibility=null}var e=createjs.extend(t,createjs.AbstractRequest);e.load=function(){null==this._tag.parentNode&&(window.document.body.appendChild(this._tag),this._addedToDOM=!0),this._tag.onload=createjs.proxy(this._handleTagComplete,this),this._tag.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this);var t=new createjs.Event("initialize");t.loader=this._tag,this.dispatchEvent(t),this._hideTag(),this._tag[this._tagSrcAttribute]=this._item.src},e.destroy=function(){this._clean(),this._tag=null,this.AbstractRequest_destroy()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;("loaded"==t.readyState||"complete"==t.readyState)&&this._handleTagComplete();
},e._handleTagComplete=function(){this._rawResult=this._tag,this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult,this._clean(),this._showTag(),this.dispatchEvent("complete")},e._clean=function(){this._tag.onload=null,this._tag.onreadystatechange=null,this._addedToDOM&&null!=this._tag.parentNode&&this._tag.parentNode.removeChild(this._tag)},e._hideTag=function(){this._startTagVisibility=this._tag.style.visibility,this._tag.style.visibility="hidden"},e._showTag=function(){this._tag.style.visibility=this._startTagVisibility},e._handleStalled=function(){},createjs.TagRequest=createjs.promote(t,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){function t(t,e,i){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this)}var e=createjs.extend(t,createjs.TagRequest);e.load=function(){this._tag.onstalled=createjs.proxy(this._handleStalled,this),this._tag.onprogress=createjs.proxy(this._handleProgress,this),this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1),this.TagRequest_load()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;("loaded"==t.readyState||"complete"==t.readyState)&&this._handleTagComplete()},e._handleStalled=function(){},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(e)}},e._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._tag.onprogress=null,this.TagRequest__clean()},createjs.MediaTagRequest=createjs.promote(t,"TagRequest")}(),this.createjs=this.createjs||{},function(){function t(t){this.AbstractRequest_constructor(t),this._request=null,this._loadTimeout=null,this._xhrLevel=1,this._response=null,this._rawResponse=null,this._canceled=!1,this._handleLoadStartProxy=createjs.proxy(this._handleLoadStart,this),this._handleProgressProxy=createjs.proxy(this._handleProgress,this),this._handleAbortProxy=createjs.proxy(this._handleAbort,this),this._handleErrorProxy=createjs.proxy(this._handleError,this),this._handleTimeoutProxy=createjs.proxy(this._handleTimeout,this),this._handleLoadProxy=createjs.proxy(this._handleLoad,this),this._handleReadyStateChangeProxy=createjs.proxy(this._handleReadyStateChange,this),!this._createXHR(t)}var e=createjs.extend(t,createjs.AbstractRequest);t.ACTIVEX_VERSIONS=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],e.getResult=function(t){return t&&this._rawResponse?this._rawResponse:this._response},e.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},e.load=function(){if(null==this._request)return void this._handleError();this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1),1==this._xhrLevel&&(this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout));try{this._item.values&&this._item.method!=createjs.AbstractLoader.GET?this._item.method==createjs.AbstractLoader.POST&&this._request.send(createjs.RequestUtils.formatQueryString(this._item.values)):this._request.send()}catch(t){this.dispatchEvent(new createjs.ErrorEvent("XHR_SEND",null,t))}},e.setResponseType=function(t){this._request.responseType=t},e.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},e.getResponseHeader=function(t){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(t):null},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(e)}},e._handleLoadStart=function(){clearTimeout(this._loadTimeout),this.dispatchEvent("loadstart")},e._handleAbort=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("XHR_ABORTED",null,t))},e._handleError=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent(t.message))},e._handleReadyStateChange=function(){4==this._request.readyState&&this._handleLoad()},e._handleLoad=function(){if(!this.loaded){this.loaded=!0;var t=this._checkError();if(t)return void this._handleError(t);this._response=this._getResponse(),this._clean(),this.dispatchEvent(new createjs.Event("complete"))}},e._handleTimeout=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT",null,t))},e._checkError=function(){var t=parseInt(this._request.status);switch(t){case 404:case 0:return new Error(t)}return null},e._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(t){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(t){}return null},e._createXHR=function(t){var e=createjs.RequestUtils.isCrossDomain(t),i={},r=null;if(window.XMLHttpRequest)r=new XMLHttpRequest,e&&void 0===r.withCredentials&&window.XDomainRequest&&(r=new XDomainRequest);else{for(var n=0,o=s.ACTIVEX_VERSIONS.length;o>n;n++){s.ACTIVEX_VERSIONS[n];try{r=new ActiveXObject(axVersions);break}catch(a){}}if(null==r)return!1}t.mimeType&&r.overrideMimeType&&r.overrideMimeType(t.mimeType),this._xhrLevel="string"==typeof r.responseType?2:1;var h=null;if(h=t.method==createjs.AbstractLoader.GET?createjs.RequestUtils.buildPath(t.src,t.values):t.src,r.open(t.method||createjs.AbstractLoader.GET,h,!0),e&&r instanceof XMLHttpRequest&&1==this._xhrLevel&&(i.Origin=location.origin),t.values&&t.method==createjs.AbstractLoader.POST&&(i["Content-Type"]="application/x-www-form-urlencoded"),e||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),t.headers)for(var l in t.headers)i[l]=t.headers[l];for(l in i)r.setRequestHeader(l,i[l]);return r instanceof XMLHttpRequest&&void 0!==t.withCredentials&&(r.withCredentials=t.withCredentials),this._request=r,!0},e._clean=function(){clearTimeout(this._loadTimeout),this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)},e.toString=function(){return"[PreloadJS XHRRequest]"},createjs.XHRRequest=createjs.promote(t,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){function t(t,e){this.AbstractMediaLoader_constructor(t,e,createjs.AbstractLoader.SOUND),createjs.RequestUtils.isAudioTag(t)?this._tag=t:createjs.RequestUtils.isAudioTag(t.src)?this._tag=t:createjs.RequestUtils.isAudioTag(t.tag)&&(this._tag=createjs.RequestUtils.isAudioTag(t)?t:t.src),null!=this._tag&&(this._preferXHR=!1)}var e=createjs.extend(t,createjs.AbstractMediaLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.SOUND},e._createTag=function(t){var e=document.createElement("audio");return e.autoplay=!1,e.preload="none",e.src=t,e},createjs.SoundLoader=createjs.promote(t,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){function t(){throw"Sound cannot be instantiated"}function e(t,e){this.init(t,e)}var i=t;i.INTERRUPT_ANY="any",i.INTERRUPT_EARLY="early",i.INTERRUPT_LATE="late",i.INTERRUPT_NONE="none",i.PLAY_INITED="playInited",i.PLAY_SUCCEEDED="playSucceeded",i.PLAY_INTERRUPTED="playInterrupted",i.PLAY_FINISHED="playFinished",i.PLAY_FAILED="playFailed",i.SUPPORTED_EXTENSIONS=["mp3","ogg","mpeg","wav","m4a","mp4","aiff","wma","mid"],i.EXTENSION_MAP={m4a:"mp4"},i.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([\/.]*?(?:[^?]+)?\/)?((?:[^\/?]+)\.(\w+))(?:\?(\S+)?)?$/,i.defaultInterruptBehavior=i.INTERRUPT_NONE,i.alternateExtensions=[],i.activePlugin=null,i._pluginsRegistered=!1,i._lastID=0,i._masterVolume=1,i._masterMute=!1,i._instances=[],i._idHash={},i._preloadHash={},i.addEventListener=null,i.removeEventListener=null,i.removeAllEventListeners=null,i.dispatchEvent=null,i.hasEventListener=null,i._listeners=null,createjs.EventDispatcher.initialize(i),i.getPreloadHandlers=function(){return{callback:createjs.proxy(i.initLoad,i),types:["sound"],extensions:i.SUPPORTED_EXTENSIONS}},i._handleLoadComplete=function(t){var e=t.target.getItem().src;if(i._preloadHash[e])for(var r=0,n=i._preloadHash[e].length;n>r;r++){var s=i._preloadHash[e][r];if(i._preloadHash[e][r]=!0,i.hasEventListener("fileload")){var t=new createjs.Event("fileload");t.src=s.src,t.id=s.id,t.data=s.data,t.sprite=s.sprite,i.dispatchEvent(t)}}},i._handleLoadError=function(t){var e=t.target.getItem().src;if(i._preloadHash[e])for(var r=0,n=i._preloadHash[e].length;n>r;r++){var s=i._preloadHash[e][r];if(i._preloadHash[e][r]=!1,i.hasEventListener("fileerror")){var t=new createjs.Event("fileerror");t.src=s.src,t.id=s.id,t.data=s.data,t.sprite=s.sprite,i.dispatchEvent(t)}}},i._registerPlugin=function(t){return!!t.isSupported()&&(i.activePlugin=new t,!0)},i.registerPlugins=function(t){i._pluginsRegistered=!0;for(var e=0,r=t.length;r>e;e++)if(i._registerPlugin(t[e]))return!0;return!1},i.initializeDefaultPlugins=function(){return null!=i.activePlugin||!i._pluginsRegistered&&!!i.registerPlugins([createjs.WebAudioPlugin,createjs.HTMLAudioPlugin])},i.isReady=function(){return null!=i.activePlugin},i.getCapabilities=function(){return null==i.activePlugin?null:i.activePlugin._capabilities},i.getCapability=function(t){return null==i.activePlugin?null:i.activePlugin._capabilities[t]},i.initLoad=function(t){return i._registerSound(t)},i._registerSound=function(t){if(!i.initializeDefaultPlugins())return!1;var r=i._parsePath(t.src);if(null==r)return!1;t.src=r.src,t.type="sound";var n=t.data,s=i.activePlugin.defaultNumChannels||null;if(null!=n&&(isNaN(n.channels)?isNaN(n)||(s=parseInt(n)):s=parseInt(n.channels),n.audioSprite))for(var o,a=n.audioSprite.length;a--;)o=n.audioSprite[a],i._idHash[o.id]={src:t.src,startTime:parseInt(o.startTime),duration:parseInt(o.duration)};null!=t.id&&(i._idHash[t.id]={src:t.src});var h=i.activePlugin.register(t,s);return e.create(t.src,s),null!=n&&isNaN(n)?t.data.channels=s||e.maxPerChannel():t.data=s||e.maxPerChannel(),h.type&&(t.type=h.type),h},i.registerSound=function(t,e,r,n){var s={src:t,id:e,data:r};t instanceof Object&&(n=e,s=t),s=createjs.LoadItem.create(s),null!=n&&(s.src=n+t);var o=i._registerSound(s);if(!o)return!1;if(i._preloadHash[s.src]||(i._preloadHash[s.src]=[]),i._preloadHash[s.src].push(s),1==i._preloadHash[s.src].length)o.on("complete",createjs.proxy(this._handleLoadComplete,this)),o.on("error",createjs.proxy(this._handleLoadError,this)),i.activePlugin.preload(o);else if(1==i._preloadHash[s.src][0])return!0;return s},i.registerSounds=function(t,e){var i=[];t.path&&(e?e+=t.path:e=t.path);for(var r=0,n=t.length;n>r;r++)i[r]=createjs.Sound.registerSound(t[r].src,t[r].id,t[r].data,e);return i},i.registerManifest=function(t,e){try{}catch(i){}return this.registerSounds(t,e)},i.removeSound=function(t,r){if(null==i.activePlugin)return!1;t instanceof Object&&(t=t.src),t=i._getSrcById(t).src,null!=r&&(t=r+t);var n=i._parsePath(t);if(null==n)return!1;t=n.src;for(var s in i._idHash)i._idHash[s].src==t&&delete i._idHash[s];return e.removeSrc(t),delete i._preloadHash[t],i.activePlugin.removeSound(t),!0},i.removeSounds=function(t,e){var i=[];t.path&&(e?e+=t.path:e=t.path);for(var r=0,n=t.length;n>r;r++)i[r]=createjs.Sound.removeSound(t[r].src,e);return i},i.removeManifest=function(t,e){try{}catch(r){}return i.removeSounds(t,e)},i.removeAllSounds=function(){i._idHash={},i._preloadHash={},e.removeAll(),i.activePlugin&&i.activePlugin.removeAllSounds()},i.loadComplete=function(t){if(!i.isReady())return!1;var e=i._parsePath(t);return t=e?i._getSrcById(e.src).src:i._getSrcById(t).src,1==i._preloadHash[t][0]},i._parsePath=function(t){"string"!=typeof t&&(t=t.toString());var e=t.match(i.FILE_PATTERN);if(null==e)return!1;for(var r=e[4],n=e[5],s=i.getCapabilities(),o=0;!s[n];)if(n=i.alternateExtensions[o++],o>i.alternateExtensions.length)return null;t=t.replace("."+e[5],"."+n);var a={name:r,src:t,extension:n};return a},i.play=function(t,e,r,n,s,o,a,h,l){e instanceof Object&&(r=e.delay,n=e.offset,s=e.loop,o=e.volume,a=e.pan,h=e.startTime,l=e.duration,e=e.interrupt);var c=i.createInstance(t,h,l),u=i._playInstance(c,e,r,n,s,o,a);return u||c._playFailed(),c},i.createInstance=function(t,r,n){if(!i.initializeDefaultPlugins())return new createjs.DefaultSoundInstance(t,r,n);t=i._getSrcById(t);var s=i._parsePath(t.src),o=null;return null!=s&&null!=s.src?(e.create(s.src),null==r&&(r=t.startTime),o=i.activePlugin.create(s.src,r,n||t.duration)):o=new createjs.DefaultSoundInstance(t,r,n),o.uniqueId=i._lastID++,o},i.setVolume=function(t){if(null==Number(t))return!1;if(t=Math.max(0,Math.min(1,t)),i._masterVolume=t,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(t))for(var e=this._instances,r=0,n=e.length;n>r;r++)e[r].setMasterVolume(t)},i.getVolume=function(){return i._masterVolume},i.setMute=function(t){if(null==t)return!1;if(this._masterMute=t,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(t))for(var e=this._instances,i=0,r=e.length;r>i;i++)e[i].setMasterMute(t);return!0},i.getMute=function(){return this._masterMute},i.stop=function(){for(var t=this._instances,e=t.length;e--;)t[e].stop()},i._playInstance=function(t,e,r,n,s,o,a){if(e instanceof Object&&(r=e.delay,n=e.offset,s=e.loop,o=e.volume,a=e.pan,e=e.interrupt),e=e||i.defaultInterruptBehavior,null==r&&(r=0),null==n&&(n=t.getPosition()),null==s&&(s=t.loop),null==o&&(o=t.volume),null==a&&(a=t.pan),0==r){var h=i._beginPlaying(t,e,n,s,o,a);if(!h)return!1}else{var l=setTimeout(function(){i._beginPlaying(t,e,n,s,o,a)},r);t.delayTimeoutId=l}return this._instances.push(t),!0},i._beginPlaying=function(t,i,r,n,s,o){if(!e.add(t,i))return!1;var a=t._beginPlaying(r,n,s,o);if(!a){var h=createjs.indexOf(this._instances,t);return h>-1&&this._instances.splice(h,1),!1}return!0},i._getSrcById=function(t){return i._idHash[t]||{src:t}},i._playFinished=function(t){e.remove(t);var i=createjs.indexOf(this._instances,t);i>-1&&this._instances.splice(i,1)},createjs.Sound=t,e.channels={},e.create=function(t,i){var r=e.get(t);return null==r&&(e.channels[t]=new e(t,i),!0)},e.removeSrc=function(t){var i=e.get(t);return null!=i&&(i._removeAll(),delete e.channels[t],!0)},e.removeAll=function(){for(var t in e.channels)e.channels[t]._removeAll();e.channels={}},e.add=function(t,i){var r=e.get(t.src);return null!=r&&r._add(t,i)},e.remove=function(t){var i=e.get(t.src);return null!=i&&(i._remove(t),!0)},e.maxPerChannel=function(){return r.maxDefault},e.get=function(t){return e.channels[t]};var r=e.prototype;r.constructor=e,r.src=null,r.max=null,r.maxDefault=100,r.length=0,r.init=function(t,e){this.src=t,this.max=e||this.maxDefault,-1==this.max&&(this.max=this.maxDefault),this._instances=[]},r._get=function(t){return this._instances[t]},r._add=function(t,e){return!!this._getSlot(e,t)&&(this._instances.push(t),this.length++,!0)},r._remove=function(t){var e=createjs.indexOf(this._instances,t);return-1!=e&&(this._instances.splice(e,1),this.length--,!0)},r._removeAll=function(){for(var t=this.length-1;t>=0;t--)this._instances[t].stop()},r._getSlot=function(e){var i,r;if(e!=t.INTERRUPT_NONE&&(r=this._get(0),null==r))return!0;for(var n=0,s=this.max;s>n;n++){if(i=this._get(n),null==i)return!0;if(i.playState==t.PLAY_FINISHED||i.playState==t.PLAY_INTERRUPTED||i.playState==t.PLAY_FAILED){r=i;break}e!=t.INTERRUPT_NONE&&(e==t.INTERRUPT_EARLY&&i.getPosition()<r.getPosition()||e==t.INTERRUPT_LATE&&i.getPosition()>r.getPosition())&&(r=i)}return null!=r&&(r._interrupt(),this._remove(r),!0)},r.toString=function(){return"[Sound SoundChannel]"}}(),this.createjs=this.createjs||{},function(){var t=function(t,e,i,r){this.EventDispatcher_constructor(),this.src=t,this.uniqueId=-1,this.playState=null,this.delayTimeoutId=null,this._startTime=Math.max(0,e||0),this._volume=1,createjs.definePropertySupported&&Object.defineProperty(this,"volume",{get:this.getVolume,set:this.setVolume}),this._pan=0,createjs.definePropertySupported&&Object.defineProperty(this,"pan",{get:this.getPan,set:this.setPan}),this._duration=Math.max(0,i||0),createjs.definePropertySupported&&Object.defineProperty(this,"duration",{get:this.getDuration,set:this.setDuration}),this._playbackResource=null,createjs.definePropertySupported&&Object.defineProperty(this,"playbackResource",{get:this.getPlaybackResource,set:this.setPlaybackResource}),r!==!1&&r!==!0&&this.setPlaybackResource(r),this._position=0,createjs.definePropertySupported&&Object.defineProperty(this,"position",{get:this.getPosition,set:this.setPosition}),this._loop=0,createjs.definePropertySupported&&Object.defineProperty(this,"loop",{get:this.getLoop,set:this.setLoop}),this._muted=!1,createjs.definePropertySupported&&Object.defineProperty(this,"muted",{get:this.getMuted,set:this.setMuted}),this._paused=!1,createjs.definePropertySupported&&Object.defineProperty(this,"paused",{get:this.getPaused,set:this.setPaused})},e=createjs.extend(t,createjs.EventDispatcher);e.play=function(t,e,i,r,n,s){return this.playState==createjs.Sound.PLAY_SUCCEEDED?(t instanceof Object&&(i=t.offset,r=t.loop,n=t.volume,s=t.pan),null!=i&&this.setPosition(i),null!=r&&this.setLoop(r),null!=n&&this.setVolume(n),null!=s&&this.setPan(s),void(this._paused&&this.setPaused(!1))):(this._cleanUp(),createjs.Sound._playInstance(this,t,e,i,r,n,s),this)},e.pause=function(){return!this._paused&&this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this.setPaused(!0),!0)},e.resume=function(){return!!this._paused&&(this.setPaused(!1),!0)},e.stop=function(){return this._position=0,this._paused=!1,this._handleStop(),this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,this},e.destroy=function(){this._cleanUp(),this.src=null,this.playbackResource=null,this.removeAllEventListeners()},e.toString=function(){return"[AbstractSoundInstance]"},e.getPaused=function(){return this._paused},e.setPaused=function(t){return t!==!0&&t!==!1||this._paused==t||1==t&&this.playState!=createjs.Sound.PLAY_SUCCEEDED?void 0:(this._paused=t,t?this._pause():this._resume(),clearTimeout(this.delayTimeoutId),this)},e.setVolume=function(t){return t==this._volume?this:(this._volume=Math.max(0,Math.min(1,t)),this._muted||this._updateVolume(),this)},e.getVolume=function(){return this._volume},e.setMute=function(t){this.setMuted(t)},e.getMute=function(){return this._muted},e.setMuted=function(t){return t===!0||t===!1?(this._muted=t,this._updateVolume(),this):void 0},e.getMuted=function(){return this._muted},e.setPan=function(t){return t==this._pan?this:(this._pan=Math.max(-1,Math.min(1,t)),this._updatePan(),this)},e.getPan=function(){return this._pan},e.getPosition=function(){return this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED?this._position:this._calculateCurrentPosition()},e.setPosition=function(t){return this._position=Math.max(0,t),this.playState==createjs.Sound.PLAY_SUCCEEDED&&this._updatePosition(),this},e.getDuration=function(){return this._duration},e.setDuration=function(t){return t==this._duration?this:(this._duration=Math.max(0,t||0),this._updateDuration(),this)},e.setPlaybackResource=function(t){return this._playbackResource=t,0==this._duration&&this._setDurationFromSource(),this},e.getPlaybackResource=function(){return this._playbackResource},e.getLoop=function(){return this._loop},e.setLoop=function(t){null!=this._playbackResource&&(0!=this._loop&&0==t&&this._removeLooping(t),0==this._loop&&0!=t&&this._addLooping(t)),this._loop=t},e._sendEvent=function(t){var e=new createjs.Event(t);this.dispatchEvent(e)},e._cleanUp=function(){clearTimeout(this.delayTimeoutId),this._handleCleanUp(),this._paused=!1,createjs.Sound._playFinished(this)},e._interrupt=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_INTERRUPTED,this._sendEvent("interrupted")},e._beginPlaying=function(t,e,i,r){return this.setPosition(t),this.setLoop(e),this.setVolume(i),this.setPan(r),null!=this._playbackResource&&this._position<this._duration?(this._paused=!1,this._handleSoundReady(),this.playState=createjs.Sound.PLAY_SUCCEEDED,this._sendEvent("succeeded"),!0):(this._playFailed(),!1)},e._playFailed=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_FAILED,this._sendEvent("failed")},e._handleSoundComplete=function(){return this._position=0,0!=this._loop?(this._loop--,this._handleLoop(),void this._sendEvent("loop")):(this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,void this._sendEvent("complete"))},e._handleSoundReady=function(){},e._updateVolume=function(){},e._updatePan=function(){},e._updateDuration=function(){},e._setDurationFromSource=function(){},e._calculateCurrentPosition=function(){},e._updatePosition=function(){},e._removeLooping=function(){},e._addLooping=function(){},e._pause=function(){},e._resume=function(){},e._handleStop=function(){},e._handleCleanUp=function(){},e._handleLoop=function(){},createjs.AbstractSoundInstance=createjs.promote(t,"EventDispatcher"),createjs.DefaultSoundInstance=createjs.AbstractSoundInstance}(),this.createjs=this.createjs||{},function(){var t=function(){this._capabilities=null,this._loaders={},this._audioSources={},this._soundInstances={},this._loaderClass,this._soundInstanceClass},e=t.prototype;t._capabilities=null,t.isSupported=function(){return!0},e.register=function(t){if(this._audioSources[t.src]=!0,this._soundInstances[t.src]=[],this._loaders[t.src])return this._loaders[t.src];var e=new this._loaderClass(t);return e.on("complete",createjs.proxy(this._handlePreloadComplete,this)),this._loaders[t.src]=e,e},e.preload=function(t){t.on("error",createjs.proxy(this._handlePreloadError,this)),t.load()},e.isPreloadStarted=function(t){return null!=this._audioSources[t]},e.isPreloadComplete=function(t){return!(null==this._audioSources[t]||1==this._audioSources[t])},e.removeSound=function(t){if(this._soundInstances[t]){for(var e=this._soundInstances[t].length;e--;){var i=this._soundInstances[t][e];i.destroy()}delete this._soundInstances[t],delete this._audioSources[t],this._loaders[t]&&this._loaders[t].destroy(),delete this._loaders[t]}},e.removeAllSounds=function(){for(var t in this._audioSources)this.removeSound(t)},e.create=function(t,e,i){this.isPreloadStarted(t)||this.preload(this.register(t));var r=new this._soundInstanceClass(t,e,i,this._audioSources[t]);return this._soundInstances[t].push(r),r},e.setVolume=function(t){return this._volume=t,this._updateVolume(),!0},e.getVolume=function(){return this._volume},e.setMute=function(){return this._updateVolume(),!0},e.toString=function(){return"[AbstractPlugin]"},e._handlePreloadComplete=function(t){var e=t.target.getItem().src;this._audioSources[e]=t.result;for(var i=0,r=this._soundInstances[e].length;r>i;i++){var n=this._soundInstances[e][i];n.setPlaybackResource(this._audioSources[e])}},e._handlePreloadError=function(){},e._updateVolume=function(){},createjs.AbstractPlugin=t}(),this.createjs=this.createjs||{},function(){function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.SOUND)}var e=createjs.extend(t,createjs.AbstractLoader);t.context=null,e.toString=function(){return"[WebAudioLoader]"},e._createRequest=function(){this._request=new createjs.XHRRequest(this._item,(!1)),this._request.setResponseType("arraybuffer")},e._sendComplete=function(){t.context.decodeAudioData(this._rawResult,createjs.proxy(this._handleAudioDecoded,this),createjs.proxy(this._handleError,this))},e._handleAudioDecoded=function(t){this._result=t,this.AbstractLoader__sendComplete()},createjs.WebAudioLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){function t(t,e,r,n){this.AbstractSoundInstance_constructor(t,e,r,n),this.gainNode=i.context.createGain(),this.panNode=i.context.createPanner(),this.panNode.panningModel=i._panningModel,this.panNode.connect(this.gainNode),this.sourceNode=null,this._soundCompleteTimeout=null,this._sourceNodeNext=null,this._playbackStartTime=0,this._endedHandler=createjs.proxy(this._handleSoundComplete,this)}var e=createjs.extend(t,createjs.AbstractSoundInstance),i=t;i.context=null,i.destinationNode=null,i._panningModel="equalpower",e.destroy=function(){this.AbstractSoundInstance_destroy(),this.panNode.disconnect(0),this.panNode=null,this.gainNode.disconnect(0),this.gainNode=null},e.toString=function(){return"[WebAudioSoundInstance]"},e._updatePan=function(){this.panNode.setPosition(this._pan,0,-.5)},e._removeLooping=function(){this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)},e._addLooping=function(){this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},e._setDurationFromSource=function(){this._duration=1e3*this.playbackResource.duration},e._handleCleanUp=function(){this.sourceNode&&this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout),this._playbackStartTime=0},e._cleanUpAudioNode=function(t){return t&&(t.stop(0),t.disconnect(0),t=null),t},e._handleSoundReady=function(){this.gainNode.connect(i.destinationNode);var t=.001*this._duration,e=.001*this._position;this.sourceNode=this._createAndPlayAudioNode(i.context.currentTime-t,e),this._playbackStartTime=this.sourceNode.startTime-e,this._soundCompleteTimeout=setTimeout(this._endedHandler,1e3*(t-e)),0!=this._loop&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},e._createAndPlayAudioNode=function(t,e){var r=i.context.createBufferSource();r.buffer=this.playbackResource,r.connect(this.panNode);var n=.001*this._duration;return r.startTime=t+n,r.start(r.startTime,e+.001*this._startTime,n-e),r},e._pause=function(){this._position=1e3*(i.context.currentTime-this._playbackStartTime),this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout)},e._resume=function(){this._handleSoundReady()},e._updateVolume=function(){var t=this._muted?0:this._volume;t!=this.gainNode.gain.value&&(this.gainNode.gain.value=t)},e._calculateCurrentPosition=function(){return 1e3*(i.context.currentTime-this._playbackStartTime)},e._updatePosition=function(){this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),clearTimeout(this._soundCompleteTimeout),this._paused||this._handleSoundReady()},e._handleLoop=function(){this._cleanUpAudioNode(this.sourceNode),this.sourceNode=this._sourceNodeNext,this._playbackStartTime=this.sourceNode.startTime,this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0),this._soundCompleteTimeout=setTimeout(this._endedHandler,this._duration)},e._updateDuration=function(){this._pause(),this._resume()},createjs.WebAudioSoundInstance=createjs.promote(t,"AbstractSoundInstance")}(),this.createjs=this.createjs||{},function(){function t(){this.AbstractPlugin_constructor(),this._panningModel=i._panningModel,this._volume=1,this.context=i.context,this.dynamicsCompressorNode=this.context.createDynamicsCompressor(),this.dynamicsCompressorNode.connect(this.context.destination),this.gainNode=this.context.createGain(),this.gainNode.connect(this.dynamicsCompressorNode),createjs.WebAudioSoundInstance.destinationNode=this.gainNode,this._capabilities=i._capabilities,this._loaderClass=createjs.WebAudioLoader,this._soundInstanceClass=createjs.WebAudioSoundInstance,this._addPropsToClasses()}var e=createjs.extend(t,createjs.AbstractPlugin),i=t;i._capabilities=null,i._panningModel="equalpower",i.context=null,i.isSupported=function(){var t=createjs.BrowserDetect.isIOS||createjs.BrowserDetect.isAndroid||createjs.BrowserDetect.isBlackberry;return!("file:"==location.protocol&&!t&&!this._isFileXHRSupported())&&(i._generateCapabilities(),null!=i.context)},i.playEmptySound=function(){var t=i.context.createBufferSource();t.buffer=i.context.createBuffer(1,1,22050),t.connect(i.context.destination),t.start(0,0,0)},i._isFileXHRSupported=function(){var t=!0,e=new XMLHttpRequest;try{e.open("GET","WebAudioPluginTest.fail",!1)}catch(i){return t=!1}e.onerror=function(){t=!1},e.onload=function(){t=404==this.status||200==this.status||0==this.status&&""!=this.response};try{e.send()}catch(i){t=!1}return t},i._generateCapabilities=function(){if(null==i._capabilities){var t=document.createElement("audio");if(null==t.canPlayType)return null;if(null==i.context)if(window.AudioContext)i.context=new AudioContext;else{if(!window.webkitAudioContext)return null;i.context=new webkitAudioContext}i._compatibilitySetUp(),i.playEmptySound(),i._capabilities={panning:!0,volume:!0,tracks:-1};for(var e=createjs.Sound.SUPPORTED_EXTENSIONS,r=createjs.Sound.EXTENSION_MAP,n=0,s=e.length;s>n;n++){var o=e[n],a=r[o]||o;i._capabilities[o]="no"!=t.canPlayType("audio/"+o)&&""!=t.canPlayType("audio/"+o)||"no"!=t.canPlayType("audio/"+a)&&""!=t.canPlayType("audio/"+a)}i.context.destination.numberOfChannels<2&&(i._capabilities.panning=!1)}},i._compatibilitySetUp=function(){if(i._panningModel="equalpower",!i.context.createGain){i.context.createGain=i.context.createGainNode;var t=i.context.createBufferSource();t.__proto__.start=t.__proto__.noteGrainOn,t.__proto__.stop=t.__proto__.noteOff,i._panningModel=0}},e.toString=function(){return"[WebAudioPlugin]"},e._addPropsToClasses=function(){var t=this._soundInstanceClass;t.context=this.context,t.destinationNode=this.gainNode,t._panningModel=this._panningModel,this._loaderClass.context=this.context},e._updateVolume=function(){var t=createjs.Sound._masterMute?0:this._volume;t!=this.gainNode.gain.value&&(this.gainNode.gain.value=t)},createjs.WebAudioPlugin=createjs.promote(t,"AbstractPlugin")}(),this.createjs=this.createjs||{},function(){function t(t){this.src=t,this.length=0,this.available=0,this.tags=[],this.duration=0}var e=t.prototype;e.constructor=t;var i=t;i.tags={},i.get=function(e){var r=i.tags[e];return null==r&&(r=i.tags[e]=new t(e)),r},i.remove=function(t){var e=i.tags[t];return null!=e&&(e.removeAll(),delete i.tags[t],!0)},i.getInstance=function(t){var e=i.tags[t];return null==e?null:e.get()},i.setInstance=function(t,e){var r=i.tags[t];return null==r?null:r.set(e)},i.getDuration=function(t){var e=i.tags[t];return null==e?0:e.getDuration()},e.add=function(t){this.tags.push(t),this.length++,this.available++},e.removeAll=function(){for(var t;this.length--;)t=this.tags[this.length],t.parentNode&&t.parentNode.removeChild(t),delete this.tags[this.length];this.src=null,this.tags.length=0},e.get=function(){if(0==this.tags.length)return null;this.available=this.tags.length;var t=this.tags.pop();return null==t.parentNode&&document.body.appendChild(t),t},e.set=function(t){var e=createjs.indexOf(this.tags,t);-1==e&&this.tags.push(t),this.available=this.tags.length},e.getDuration=function(){return this.duration||(this.duration=1e3*this.tags[this.tags.length-1].duration),this.duration},e.toString=function(){return"[HTMLAudioTagPool]"},createjs.HTMLAudioTagPool=t}(),this.createjs=this.createjs||{},
function(){function t(t,e,i,r){this.AbstractSoundInstance_constructor(t,e,i,r),this._audioSpriteStopTime=null,this._delayTimeoutId=null,this._endedHandler=createjs.proxy(this._handleSoundComplete,this),this._readyHandler=createjs.proxy(this._handleTagReady,this),this._stalledHandler=createjs.proxy(this.playFailed,this),this._audioSpriteEndHandler=createjs.proxy(this._handleAudioSpriteLoop,this),this._loopHandler=createjs.proxy(this._handleSoundComplete,this),i?this._audioSpriteStopTime=.001*(e+i):this._duration=createjs.HTMLAudioTagPool.getDuration(this.src)}var e=createjs.extend(t,createjs.AbstractSoundInstance);e.setMasterVolume=function(){this._updateVolume()},e.setMasterMute=function(){this._updateVolume()},e.toString=function(){return"[HTMLAudioSoundInstance]"},e._removeLooping=function(){null!=this._playbackResource&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},e._addLooping=function(){null==this._playbackResource||this._audioSpriteStopTime||(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)},e._handleCleanUp=function(){var t=this._playbackResource;if(null!=t){t.pause(),t.loop=!1,t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1);try{t.currentTime=this._startTime}catch(e){}createjs.HTMLAudioTagPool.setInstance(this.src,t),this._playbackResource=null}},e._beginPlaying=function(t,e,i,r){return this._playbackResource=createjs.HTMLAudioTagPool.getInstance(this.src),this.AbstractSoundInstance__beginPlaying(t,e,i,r)},e._handleSoundReady=function(){if(4!==this._playbackResource.readyState){var t=this._playbackResource;return t.addEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),t.addEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),t.preload="auto",void t.load()}this._updateVolume(),this._playbackResource.currentTime=.001*(this._startTime+this._position),this._audioSpriteStopTime?this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1):(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),0!=this._loop&&(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)),this._playbackResource.play()},e._handleTagReady=function(){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),this._handleSoundReady()},e._pause=function(){this._playbackResource.pause()},e._resume=function(){this._playbackResource.play()},e._updateVolume=function(){if(null!=this._playbackResource){var t=this._muted||createjs.Sound._masterMute?0:this._volume*createjs.Sound._masterVolume;t!=this._playbackResource.volume&&(this._playbackResource.volume=t)}},e._calculateCurrentPosition=function(){return 1e3*this._playbackResource.currentTime-this._startTime},e._updatePosition=function(){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1);try{this._playbackResource.currentTime=.001*(this._position+this._startTime)}catch(t){this._handleSetPositionSeek(null)}},e._handleSetPositionSeek=function(){null!=this._playbackResource&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},e._handleAudioSpriteLoop=function(){this._playbackResource.currentTime<=this._audioSpriteStopTime||(this._playbackResource.pause(),0==this._loop?this._handleSoundComplete(null):(this._position=0,this._loop--,this._playbackResource.currentTime=.001*this._startTime,this._paused||this._playbackResource.play(),this._sendEvent("loop")))},e._handleLoop=function(){0==this._loop&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},e._updateDuration=function(){this._audioSpriteStopTime=.001*(startTime+duration),this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},createjs.HTMLAudioSoundInstance=createjs.promote(t,"AbstractSoundInstance")}(),this.createjs=this.createjs||{},function(){function t(){this.AbstractPlugin_constructor(),this.defaultNumChannels=2,this._capabilities=i._capabilities,this._loaderClass=createjs.SoundLoader,this._soundInstanceClass=createjs.HTMLAudioSoundInstance}var e=createjs.extend(t,createjs.AbstractPlugin),i=t;i.MAX_INSTANCES=30,i._AUDIO_READY="canplaythrough",i._AUDIO_ENDED="ended",i._AUDIO_SEEKED="seeked",i._AUDIO_STALLED="stalled",i._TIME_UPDATE="timeupdate",i._capabilities=null,i.enableIOS=!1,i.isSupported=function(){return i._generateCapabilities(),null!=i._capabilities},i._generateCapabilities=function(){if(null==i._capabilities){var t=document.createElement("audio");if(null==t.canPlayType)return null;i._capabilities={panning:!0,volume:!0,tracks:-1};for(var e=createjs.Sound.SUPPORTED_EXTENSIONS,r=createjs.Sound.EXTENSION_MAP,n=0,s=e.length;s>n;n++){var o=e[n],a=r[o]||o;i._capabilities[o]="no"!=t.canPlayType("audio/"+o)&&""!=t.canPlayType("audio/"+o)||"no"!=t.canPlayType("audio/"+a)&&""!=t.canPlayType("audio/"+a)}}},e.register=function(t,e){for(var i=createjs.HTMLAudioTagPool.get(t.src),r=null,n=0;e>n;n++)r=this._createTag(t.src),i.add(r);var s=this.AbstractPlugin_register(t,e);return s.setTag(r),s},e.removeSound=function(t){this.AbstractPlugin_removeSound(t),createjs.HTMLAudioTagPool.remove(t)},e.create=function(t,e,i){var r=this.AbstractPlugin_create(t,e,i);return r.setPlaybackResource(null),r},e.toString=function(){return"[HTMLAudioPlugin]"},e.setVolume=e.getVolume=e.setMute=null,e._createTag=function(t){var e=document.createElement("audio");return e.autoplay=!1,e.preload="none",e.src=t,e},createjs.HTMLAudioPlugin=createjs.promote(t,"AbstractPlugin")}(),define("soundjs",function(){}),window.ASSET_URL="media/",config={app:"com/arcade/app/ArcadeApp"},window.console||(window.console={log:function(t){}}),window.console.log||(window.console.log=function(t){}),require.config({baseUrl:"./js",paths:{PIXI:"libs/pixi",TWEEN:"libs/TweenMax.min",SM2:"libs/soundmanager2/script/soundmanager2-nodebug",HOWLER:"libs/howler.min",signals:"../node_modules/signals/dist/signals",starwars:"../node_modules/starwars-common/scripts",fido:"../node_modules/fido.js",preloader:"libs/soundjs/preloadjs-0.6.0.min",soundjs:"libs/soundjs/soundjs-0.6.0.min",fido:"../node_modules/fido.js","browser-request":"../node_modules/browser-request/index",APP_root:"com/arcade/app/ArcadeApp",stats:"libs/stats.min",tracker:"../node_modules/starwars-common/scripts/tracking/Tracker"}}),window.DEVICE_SCALE=window.devicePixelRatio||1,hasCanvasSupport()?(window.valid||"localhost"==document.location.hostname||"dev.goodboydigital.com"==document.location.hostname||"work.goodboydigital.com"==document.location.hostname)&&require(["TWEEN","HOWLER","SM2","PIXI","APP_root","stats","fido/system/Device","preloader","soundjs"],function(t,e,i,r,n,s,o){function a(){document.getElementById("container");o.instance.iOS&&o.instance.iOS_version<7||window.scrollTo(0,0),h.resize(window.innerWidth,window.innerHeight)}o.instance.useSM2&&(i.defaultOptions.autoLoad=!0,i.setup({url:"libs/arzvhaebfazdsc/soundmanager2/swf/",flashVersion:9,onready:function(){h.onSoundReady.dispatch()},ontimeout:function(){window.noSound=!0}}));var h=new n;window.app=h;var l=document.getElementById("container");l.appendChild(h.view),l.style.background="black",h.view.style.position="absolute",h.view.style.top=0,h.view.style.left=0,window.addEventListener("resize",function(){setTimeout(a,100),setTimeout(a,200)}),setTimeout(a,100),setTimeout(a,200)}):require(["fido/app/Fallback"],function(){new Fallback(document.body)}),define("Boot",function(){});