(window.webpackJsonp = window.webpackJsonp || []).push([
    [1], { 127: function(t, e, n) { var i;! function(n) { "use strict"; var o, a = void 0,
                    s = {},
                    r = { backspace: 8, tab: 9, enter: 13, return: 13, shift: 16, "⇧": 16, control: 17, ctrl: 17, "⌃": 17, alt: 18, option: 18, "⌥": 18, pause: 19, capslock: 20, esc: 27, space: 32, pageup: 33, pagedown: 34, end: 35, home: 36, left: 37, L: 37, "←": 37, up: 38, U: 38, "↑": 38, right: 39, R: 39, "→": 39, down: 40, D: 40, "↓": 40, insert: 45, delete: 46, 0: 48, 1: 49, 2: 50, 3: 51, 4: 52, 5: 53, 6: 54, 7: 55, 8: 56, 9: 57, a: 65, b: 66, c: 67, d: 68, e: 69, f: 70, g: 71, h: 72, i: 73, j: 74, k: 75, l: 76, m: 77, n: 78, o: 79, p: 80, q: 81, r: 82, s: 83, t: 84, u: 85, v: 86, w: 87, x: 88, y: 89, z: 90, "⌘": 91, command: 91, kp_0: 96, kp_1: 97, kp_2: 98, kp_3: 99, kp_4: 100, kp_5: 101, kp_6: 102, kp_7: 103, kp_8: 104, kp_9: 105, kp_multiply: 106, kp_plus: 107, kp_minus: 109, kp_decimal: 110, kp_divide: 111, f1: 112, f2: 113, f3: 114, f4: 115, f5: 116, f6: 117, f7: 118, f8: 119, f9: 120, f10: 121, f11: 122, f12: 123, equal: 187, "=": 187, comma: 188, ",": 188, minus: 189, "-": 189, period: 190, ".": 190 },
                    h = function() {},
                    l = {},
                    c = { startX: null, startY: null, endX: null, endY: null };

                function u(t) { for (var e in s) s[e].keydown(t) }

                function p(t) { var e, n, i, o, a;
                    c.endX = t.changedTouches[0].screenX, c.endY = t.changedTouches[0].screenY, a = (e = c).endX - e.startX, n = e.endY - e.startY, i = Math.abs(a), o = Math.abs(n), (Math.abs(a) > 100 || Math.abs(n) > 100) && (o > 1.5 * i ? n > 100 ? u(r.down) : n < -100 && u(r.up) : i > 1.5 * o && (a > 100 ? u(r.right) : a < -100 && u(r.left))) }

                function d(t) { var e = void 0; for (e in l) l[e] = !1 }

                function f(t, e, n) { t.addEventListener ? t.addEventListener(e, n, !1) : t.attachEvent && (t["e" + e + n] = n, t[e + n] = function() { t["e" + e + n](window.event) }, t.attachEvent("on" + e, t[e + n])) }(o = function(t, e, n, i) { var o = void 0; for (this.str = t, this.next = e || h, this.fail = n || h, this.done = i || h, this.seq = t.split(" "), this.keys = [], o = 0; o < this.seq.length; ++o) this.keys.push(r[this.seq[o]]);
                    this.idx = 0 }).prototype.keydown = function(t) { var e = this.idx;
                    t === this.keys[e] ? (this.next(this.str, this.seq[e], e, this.seq), a.__next(this.str, this.seq[e], e, this.seq), ++this.idx === this.keys.length && (this.done(this.str), a.__done(this.str), this.reset())) : e > 0 && (this.reset(), this.fail(this.str), a.__fail(this.str)) }, o.prototype.reset = function() { this.idx = 0 }, (a = function(t, e) { var n = void 0,
                        i = void 0,
                        a = void 0; "function" == typeof e ? a = e : null !== e && void 0 !== e && (n = e.next, i = e.fail, a = e.done, e.description), s[t] = new o(t, n, i, a) }).disable = function(t) { delete s[t] }, f(window, "keydown", function(t) { var e = void 0,
                        n = t ? t.keyCode : event.keyCode; if (!l[n])
                        for (e in l[n] = !0, s) s[e].keydown(n) }), f(window, "keyup", function(t) { var e = t ? t.keyCode : event.keyCode;
                    l[e] = !1 }), f(window, "blur", d), f(window, "focus", d), ("ontouchstart" in window || navigator.maxTouchPoints > 0 || navigator.msMaxTouchPoints > 0) && (f(window, "touchstart", function(t) { c.startX = t.touches[0].screenX, c.startY = t.touches[0].screenY }), f(window, "touchend", function(t) { p(t) })), a.__next = h, a.next = function(t) { a.__next = null === t ? h : t }, a.__fail = h, a.fail = function(t) { a.__fail = null === t ? h : t }, a.__done = h, a.done = function(t) { a.__done = null === t ? h : t }, a.reset = function(t) { var e = s[t];
                    e instanceof o ? e.reset() : console.warn("cheet: Unknown sequence: " + t) }, n.cheet = a, void 0 === (i = function() { return a }.apply(e, [])) || (t.exports = i) }(this) }, 128: function(t, e, n) {
            (function(t) { var i, o, a = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) { return typeof t } : function(t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t };! function() {
                    function s(t, e) { var n = h("div", null, "qs_label", e); return n.innerHTML = t, n }

                    function r(t, e, n, i) { var o = h("input", e, n, i); return o.type = t, o }

                    function h(t, e, n, i) { var o = document.createElement(t); if (o) return o.id = e, n && (o.className = n), i && i.appendChild(o), o }

                    function l() { return -1 != navigator.userAgent.indexOf("rv:11") || -1 != navigator.userAgent.indexOf("MSIE") } var c = !1,
                        u = ".qs_main{background-color:#dddddd;text-align:left;position:absolute;width:200px;font:12px sans-serif;box-shadow:5px 5px 8px rgba(0,0,0,0.35);user-select:none;-webkit-user-select:none;color:#000000;border:none}.qs_content{background-color:#cccccc;overflow-y:auto}.qs_title_bar{background-color:#eeeeee;user-select:none;-webkit-user-select:none;cursor:pointer;padding:5px;font-weight:bold;border:none;color:#000000}.qs_container{margin:5px;padding:5px;background-color:#eeeeee;border:none;position:relative}.qs_container_selected{border:none;background-color:#ffffff}.qs_range{-webkit-appearance:none;-moz-appearance:none;width:100%;height:17px;padding:0;margin:0;background-color:transparent;border:none;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.qs_range:focus{outline:none;border:none}.qs_range::-webkit-slider-runnable-track{width:100%;height:15px;cursor:pointer;background:#cccccc;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.qs_range:focus::-webkit-slider-runnable-track{background:#cccccc}.qs_range::-webkit-slider-thumb{-webkit-appearance:none;height:15px;width:15px;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;background:#999999;cursor:pointer;margin-top:0}.qs_range::-moz-range-track{width:100%;height:15px;cursor:pointer;background:#cccccc;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.qs_range::-moz-range-thumb{height:15px;width:15px;border:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;background:#999999;cursor:pointer}.qs_range::-ms-track{width:100%;height:15px;cursor:pointer;visibility:hidden;background:transparent}.qs_range::-ms-thumb{height:15px;width:15px;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;background:#999999;cursor:pointer;border:none}.qs_range::-ms-fill-lower{background:#cccccc;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.qs_range:focus::-ms-fill-lower{background:#cccccc}.qs_range::-ms-fill-upper{background:#cccccc;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.qs_range:focus::-ms-fill-upper{background:#cccccc}.qs_button{background-color:#f6f6f6;color:#000000;height:30px;border:1px solid #aaaaaa;font:12px sans-serif}.qs_button:active{background-color:#ffffff;border:1px solid #aaaaaa}.qs_button:focus{border:1px solid #aaaaaa;outline:none}.qs_checkbox{cursor:pointer;display:inline}.qs_checkbox input{position:absolute;left:-99999px}.qs_checkbox span{height:16px;width:100%;display:block;text-indent:20px;background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAALklEQVQ4T2OcOXPmfwYKACPIgLS0NLKMmDVrFsOoAaNhMJoOGBioFwZkZUWoJgApdFaxjUM1YwAAAABJRU5ErkJggg==') no-repeat}.qs_checkbox input:checked+span{background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAvElEQVQ4T63Tyw2EIBAA0OFKBxBL40wDRovAUACcKc1IB1zZDAkG18GYZTmSmafzgTnnMgwchoDWGlJKheGcP3JtnPceCqCUAmttSZznuYtgchsXQrgC+77DNE0kUpPbmBOoJaBOIVQylnqWgAAeKhDve/AN+EaklJBzhhgjWRoJVGTbNjiOowAIret6a+4jYIwpX8aDwLIs74C2D0IIYIyVP6Gm898m9kbVm85ljHUTf16k4VUefkwDrxk+zoUEwCt0GbUAAAAASUVORK5CYII=') no-repeat}.qs_checkbox_label{position:absolute;top:7px;left:30px}.qs_label{margin-bottom:3px;user-select:none;-webkit-user-select:none;cursor:default;font:12px sans-serif}.qs_text_input{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;width:100%;padding:0 0 0 5px;height:24px;border:1px inset #ffffff;background-color:#ffffff;color:#000000;font-size:12px}.qs_text_input:focus{outline:none;background:#ffffff;border:1px inset #ffffff}.qs_select{background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAp0lEQVRIS+2SsQ3FIAwF7RVYhA5mgQFhFuhYhJKWL0eKxI8SGylKZ0p4+OBsHGNM+HChAiS7qkgyBKrovaLeOxhjbgtxZ+cFtgelFMg5QwgBvPd/EO5sDbKAlBLUWo/8CjmL075zDmKMj6rEKbpCqBL9aqc4ZUQAhVbInBMQUXz5Vg/WfxOktXZsWWtZLds9uIqlqaH1NFV3jdhSJA47E1CAaE8ViYp+wGiWMZ/T+cgAAAAASUVORK5CYII=') no-repeat right #f6f6f6;-webkit-appearance:none;-moz-appearance:none;appearance:none;color:#000000;width:100%;height:24px;border:1px solid #aaaaaa;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;padding:0 5px;-moz-outline:none;font-size:14px}.qs_select option{font-size:14px}.qs_select::-ms-expand{display:none}.qs_select:focus{outline:none}.qs_number{height:24px}.qs_image{width:100%}.qs_progress{width:100%;height:15px;background-color:#cccccc;border:none;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.qs_progress_value{height:100%;background-color:#999999}.qs_textarea{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;resize:vertical;width:100%;padding:3px 5px;border:1px inset #ffffff;background-color:#ffffff;color:#000000;font-size:12px}.qs_textarea:focus{outline:none;background:#ffffff;border:1px inset #ffffff}.qs_color{position:absolute;left:-999999px}.qs_color_label{width:100%;height:20px;display:block;border:1px solid #aaaaaa;cursor:pointer;padding:0 0 0 5px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.qs_file_chooser{position:absolute;left:-999999px}.qs_file_chooser_label{background-color:#f6f6f6;color:#000000;height:30px;border:1px solid #aaaaaa;font:12px sans-serif;width:100%;display:block;cursor:pointer;padding:7px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}",
                        p = { _version: "3.0.2", _topZ: 1, _panel: null, _titleBar: null, _content: null, _startX: 0, _startY: 0, _hidden: !1, _collapsed: !1, _controls: null, _keyCode: -1, _draggable: !0, _collapsible: !0, _globalChangeHandler: null, useExtStyleSheet: function() { c = !0 }, create: function(t, e, n, i) { var o = Object.create(this); return o._init(t, e, n, i), o }, destroy: function() { for (var t in this._panel.parentElement && this._panel.parentElement.removeChild(this._panel), this) this[t] = null }, _init: function(t, e, n, i) { c || function() { var t = document.createElement("style");
                                    t.innerText = u, document.head.appendChild(t), c = !0 }(), this._bindHandlers(), this._createPanel(t, e, i), this._createTitleBar(n || "QuickSettings"), this._createContent() }, _bindHandlers: function() { this._startDrag = this._startDrag.bind(this), this._drag = this._drag.bind(this), this._endDrag = this._endDrag.bind(this), this._doubleClickTitle = this._doubleClickTitle.bind(this), this._onKeyUp = this._onKeyUp.bind(this) }, getValuesAsJSON: function(t) { var e = {}; for (var n in this._controls) this._controls[n].getValue && (e[n] = this._controls[n].getValue()); return t && (e = JSON.stringify(e)), e }, setValuesFromJSON: function(t) { for (var e in "string" == typeof t && (t = JSON.parse(t)), t) this._controls[e] && this._controls[e].setValue && this._controls[e].setValue(t[e]); return this }, saveInLocalStorage: function(t) { return this._localStorageName = t, this._readFromLocalStorage(t), this }, clearLocalStorage: function(t) { return localStorage.removeItem(t), this }, _saveInLocalStorage: function(t) { localStorage.setItem(t, this.getValuesAsJSON(!0)) }, _readFromLocalStorage: function(t) { var e = localStorage.getItem(t);
                                e && this.setValuesFromJSON(e) }, _createPanel: function(t, e, n) { this._panel = h("div", null, "qs_main", n || document.body), this._panel.style.zIndex = ++p._topZ, this.setPosition(t || 0, e || 0), this._controls = {} }, _createTitleBar: function(t) { this._titleBar = h("div", null, "qs_title_bar", this._panel), this._titleBar.textContent = t, this._titleBar.addEventListener("mousedown", this._startDrag), this._titleBar.addEventListener("dblclick", this._doubleClickTitle) }, _createContent: function() { this._content = h("div", null, "qs_content", this._panel) }, _createContainer: function() { var t = h("div", null, "qs_container"); return t.addEventListener("focus", function() { this.className += " qs_container_selected" }, !0), t.addEventListener("blur", function() { var t = this.className.indexOf(" qs_container_selected");
                                    t > -1 && (this.className = this.className.substr(0, t)) }, !0), this._content.appendChild(t), t }, setPosition: function(t, e) { return this._panel.style.left = t + "px", this._panel.style.top = Math.max(e, 0) + "px", this }, setSize: function(t, e) { return this._panel.style.width = t + "px", this._content.style.width = t + "px", this._content.style.height = e - this._titleBar.offsetHeight + "px", this }, setWidth: function(t) { return this._panel.style.width = t + "px", this._content.style.width = t + "px", this }, setHeight: function(t) { return this._content.style.height = t - this._titleBar.offsetHeight + "px", this }, setDraggable: function(t) { return this._draggable = t, this._draggable || this._collapsible ? this._titleBar.style.cursor = "pointer" : this._titleBar.style.cursor = "default", this }, _startDrag: function(t) { this._draggable && (this._panel.style.zIndex = ++p._topZ, document.addEventListener("mousemove", this._drag), document.addEventListener("mouseup", this._endDrag), this._startX = t.clientX, this._startY = t.clientY), t.preventDefault() }, _drag: function(t) { var e = parseInt(this._panel.style.left),
                                    n = parseInt(this._panel.style.top),
                                    i = t.clientX,
                                    o = t.clientY;
                                this.setPosition(e + i - this._startX, n + o - this._startY), this._startX = i, this._startY = o, t.preventDefault() }, _endDrag: function(t) { document.removeEventListener("mousemove", this._drag), document.removeEventListener("mouseup", this._endDrag), t.preventDefault() }, setGlobalChangeHandler: function(t) { return this._globalChangeHandler = t, this }, _callGCH: function(t) { this._localStorageName && this._saveInLocalStorage(this._localStorageName), this._globalChangeHandler && this._globalChangeHandler(t) }, hide: function() { return this._panel.style.visibility = "hidden", this._hidden = !0, this }, show: function() { return this._panel.style.visibility = "visible", this._panel.style.zIndex = ++p._topZ, this._hidden = !1, this }, toggleVisibility: function() { return this._hidden ? this.show() : this.hide(), this }, setCollapsible: function(t) { return this._collapsible = t, this._draggable || this._collapsible ? this._titleBar.style.cursor = "pointer" : this._titleBar.style.cursor = "default", this }, collapse: function() { return this._panel.removeChild(this._content), this._collapsed = !0, this }, expand: function() { return this._panel.appendChild(this._content), this._collapsed = !1, this }, toggleCollapsed: function() { return this._collapsed ? this.expand() : this.collapse(), this }, setKey: function(t) { return this._keyCode = t.toUpperCase().charCodeAt(0), document.addEventListener("keyup", this._onKeyUp), this }, _onKeyUp: function(t) { t.keyCode === this._keyCode && ["INPUT", "SELECT", "TEXTAREA"].indexOf(t.target.tagName) < 0 && this.toggleVisibility() }, _doubleClickTitle: function() { this._collapsible && this.toggleCollapsed() }, removeControl: function(t) { if (this._controls[t]) var e = this._controls[t].container; return e && e.parentElement && e.parentElement.removeChild(e), this._controls[t] = null, this }, enableControl: function(t) { return this._controls[t] && (this._controls[t].control.disabled = !1), this }, disableControl: function(t) { return this._controls[t] && (this._controls[t].control.disabled = !0), this }, hideControl: function(t) { return this._controls[t] && (this._controls[t].container.style.display = "none"), this }, showControl: function(t) { return this._controls[t] && (this._controls[t].container.style.display = "block"), this }, overrideStyle: function(t, e, n) { return this._controls[t] && (this._controls[t].control.style[e] = n), this }, hideTitle: function(t) { var e = this._controls[t].label; return e && (e.style.display = "none"), this }, showTitle: function(t) { var e = this._controls[t].label; return e && (e.style.display = "block"), this }, hideAllTitles: function() { for (var t in this._controls) { var e = this._controls[t].label;
                                    e && (e.style.display = "none") } return this }, showAllTitles: function() { for (var t in this._controls) { var e = this._controls[t].label;
                                    e && (e.style.display = "block") } return this }, getValue: function(t) { return this._controls[t].getValue() }, setValue: function(t, e) { return this._controls[t].setValue(e), this._callGCH(t), this }, addBoolean: function(t, e, n) { var i = this._createContainer(),
                                    o = h("label", null, "qs_checkbox_label", i);
                                o.textContent = t, o.setAttribute("for", t); var a = h("label", null, "qs_checkbox", i);
                                a.setAttribute("for", t); var s = r("checkbox", t, null, a);
                                s.checked = e, h("span", null, null, a), this._controls[t] = { container: i, control: s, getValue: function() { return this.control.checked }, setValue: function(t) { this.control.checked = t, n && n(t) } }; var l = this; return s.addEventListener("change", function() { n && n(s.checked), l._callGCH(t) }), this }, bindBoolean: function(t, e, n) { return this.addBoolean(t, e, function(e) { n[t] = e }) }, addButton: function(t, e) { var n = this._createContainer(),
                                    i = r("button", t, "qs_button", n);
                                i.value = t, this._controls[t] = { container: n, control: i }; var o = this; return i.addEventListener("click", function() { e && e(i), o._callGCH(t) }), this }, addColor: function(t, e, n) { if (function() { var t = navigator.userAgent.toLowerCase(); return !(t.indexOf("chrome") > -1 || t.indexOf("firefox") > -1 || t.indexOf("epiphany") > -1) && t.indexOf("safari/") > -1 }() || navigator.userAgent.toLowerCase().indexOf("edge") > -1 || l()) return this.addText(t, e, n); var i = this._createContainer(),
                                    o = s("<b>" + t + ":</b> " + e, i),
                                    a = r("color", t, "qs_color", i);
                                a.value = e || "#ff0000"; var c = h("label", null, "qs_color_label", i);
                                c.setAttribute("for", t), c.style.backgroundColor = a.value, this._controls[t] = { container: i, control: a, colorLabel: c, label: o, title: t, getValue: function() { return this.control.value }, setValue: function(t) { this.control.value = t, this.colorLabel.style.backgroundColor = a.value, this.label.innerHTML = "<b>" + this.title + ":</b> " + this.control.value, n && n(t) } }; var u = this; return a.addEventListener("input", function() { o.innerHTML = "<b>" + t + ":</b> " + a.value, c.style.backgroundColor = a.value, n && n(a.value), u._callGCH(t) }), this }, bindColor: function(t, e, n) { return this.addColor(t, e, function(e) { n[t] = e }) }, addDate: function(t, e, n) { var i = void 0; if (e instanceof Date) { var o = e.getFullYear(),
                                        a = e.getMonth() + 1;
                                    a < 10 && (a = "0" + a), i = o + "-" + a + "-" + e.getDate() } else i = e; if (l()) return this.addText(t, i, n); var h = this._createContainer(),
                                    c = s("<b>" + t + "</b>", h),
                                    u = r("date", t, "qs_text_input", h);
                                u.value = i || "", this._controls[t] = { container: h, control: u, label: c, getValue: function() { return this.control.value }, setValue: function(t) { var e = void 0; if (t instanceof Date) { var i = t.getFullYear(),
                                                o = t.getMonth() + 1;
                                            o < 10 && (o = "0" + o); var a = t.getDate();
                                            a < 10 && (a = "0" + a), e = i + "-" + o + "-" + a } else e = t;
                                        this.control.value = e || "", n && n(e) } }; var p = this; return u.addEventListener("input", function() { n && n(u.value), p._callGCH(t) }), this }, bindDate: function(t, e, n) { return this.addDate(t, e, function(e) { n[t] = e }) }, addDropDown: function(t, e, n) { for (var i = this._createContainer(), o = s("<b>" + t + "</b>", i), a = h("select", null, "qs_select", i), r = 0; r < e.length; r++) { var l = h("option"),
                                        c = e[r];
                                    c.label ? (l.value = c.value, l.innerText = c.label) : (l.label = c, l.innerText = c), a.add(l) } var u = this; return a.addEventListener("change", function() { var i = a.selectedIndex,
                                        o = a.options;
                                    n && n({ index: i, label: o[i].label, value: e[i].value || e[i] }), u._callGCH(t) }), this._controls[t] = { container: i, control: a, label: o, getValue: function() { var t = this.control.selectedIndex; return { index: t, label: this.control.options[t].label, value: e[t].value || e[t] } }, setValue: function(t) { var i;
                                        i = null != t.index ? t.index : t; var o = this.control.options;
                                        this.control.selectedIndex = i, n && n({ index: i, label: o[i].label, value: e[i].value || e[i] }) } }, this }, bindDropDown: function(t, e, n) { return this.addDropDown(t, e, function(e) { n[t] = e.value }) }, addElement: function(t, e) { var n = this._createContainer(),
                                    i = s("<b>" + t + "</b>", n); return n.appendChild(e), this._controls[t] = { container: n, label: i }, this }, addFileChooser: function(t, e, n, i) { var o = this._createContainer(),
                                    a = s("<b>" + t + "</b>", o),
                                    l = r("file", t, "qs_file_chooser", o);
                                n && (l.accept = n); var c = h("label", null, "qs_file_chooser_label", o);
                                c.setAttribute("for", t), c.textContent = e || "Choose a file...", this._controls[t] = { container: o, control: l, label: a, getValue: function() { return this.control.files[0] } }; var u = this; return l.addEventListener("change", function() { l.files && l.files.length && (c.textContent = l.files[0].name, i && i(l.files[0]), u._callGCH(t)) }), this }, addHTML: function(t, e) { var n = this._createContainer(),
                                    i = s("<b>" + t + ":</b> ", n),
                                    o = h("div", null, null, n); return o.innerHTML = e, this._controls[t] = { container: n, label: i, control: o, getValue: function() { return this.control.innerHTML }, setValue: function(t) { this.control.innerHTML = t } }, this }, addImage: function(t, e, n) { var i = this._createContainer(),
                                    o = s("<b>" + t + "</b>", i); return img = h("img", null, "qs_image", i), img.src = e, this._controls[t] = { container: i, control: img, label: o, getValue: function() { return this.control.src }, setValue: function(t) { this.control.src = t, n && img.addEventListener("load", function e() { img.removeEventListener("load", e), n(t) }) } }, this }, addRange: function(t, e, n, i, o, a) { return this._addNumber("range", t, e, n, i, o, a) }, addNumber: function(t, e, n, i, o, a) { return this._addNumber("number", t, e, n, i, o, a) }, _addNumber: function(t, e, n, i, o, a, h) { var c = this._createContainer(),
                                    u = s("", c),
                                    p = r(t, e, "range" === t ? "qs_range" : "qs_text_input qs_number", c);
                                p.min = n || 0, p.max = i || 100, p.step = a || 1, p.value = o || 0, u.innerHTML = "<b>" + e + ":</b> " + p.value, this._controls[e] = { container: c, control: p, label: u, title: e, callback: h, getValue: function() { return parseFloat(this.control.value) }, setValue: function(t) { this.control.value = t, this.label.innerHTML = "<b>" + this.title + ":</b> " + this.control.value, h && h(parseFloat(t)) } }; var d = "input"; "range" === t && l() && (d = "change"); var f = this; return p.addEventListener(d, function() { u.innerHTML = "<b>" + e + ":</b> " + p.value, h && h(parseFloat(p.value)), f._callGCH(e) }), this }, bindRange: function(t, e, n, i, o, a) { return this.addRange(t, e, n, i, o, function(e) { a[t] = e }) }, bindNumber: function(t, e, n, i, o, a) { return this.addNumber(t, e, n, i, o, function(e) { a[t] = e }) }, setRangeParameters: function(t, e, n, i) { return this.setNumberParameters(t, e, n, i) }, setNumberParameters: function(t, e, n, i) { var o = this._controls[t],
                                    a = o.control.value; return o.control.min = e, o.control.max = n, o.control.step = i, o.control.value !== a && o.callback && o.callback(o.control.value), this }, addPassword: function(t, e, n) { return this._addText("password", t, e, n) }, bindPassword: function(t, e, n) { return this.addPassword(t, e, function(e) { n[t] = e }) }, addProgressBar: function(t, e, n, i) { var o = this._createContainer(),
                                    a = s("", o),
                                    r = h("div", null, "qs_progress", o),
                                    l = h("div", null, "qs_progress_value", r); return l.style.width = n / e * 100 + "%", a.innerHTML = "numbers" === i ? "<b>" + t + ":</b> " + n + " / " + e : "percent" === i ? "<b>" + t + ":</b> " + Math.round(n / e * 100) + "%" : "<b>" + t + "</b>", this._controls[t] = { container: o, control: r, valueDiv: l, valueDisplay: i, label: a, value: n, max: e, title: t, getValue: function() { return this.value }, setValue: function(t) { this.value = Math.max(0, Math.min(t, this.max)), this.valueDiv.style.width = this.value / this.max * 100 + "%", "numbers" === this.valueDisplay ? this.label.innerHTML = "<b>" + this.title + ":</b> " + this.value + " / " + this.max : "percent" === this.valueDisplay && (this.label.innerHTML = "<b>" + this.title + ":</b> " + Math.round(this.value / this.max * 100) + "%") } }, this }, setProgressMax: function(t, e) { var n = this._controls[t]; return n.max = e, n.value = Math.min(n.value, n.max), n.valueDiv.style.width = n.value / n.max * 100 + "%", "numbers" === n.valueDisplay ? n.label.innerHTML = "<b>" + n.title + ":</b> " + n.value + " / " + n.max : "percent" === n.valueDisplay ? n.label.innerHTML = "<b>" + n.title + ":</b> " + Math.round(n.value / n.max * 100) + "%" : n.label.innerHTML = "<b>" + n.title + "</b>", this }, addText: function(t, e, n) { return this._addText("text", t, e, n) }, _addText: function(t, e, n, i) { var o = void 0,
                                    a = this._createContainer(),
                                    l = s("<b>" + e + "</b>", a); "textarea" === t ? (o = h("textarea", e, "qs_textarea", a)).rows = 5 : o = r(t, e, "qs_text_input", a), o.value = n || "", this._controls[e] = { container: a, control: o, label: l, getValue: function() { return this.control.value }, setValue: function(t) { this.control.value = t, i && i(t) } }; var c = this; return o.addEventListener("input", function() { i && i(o.value), c._callGCH(e) }), this }, bindText: function(t, e, n) { return this.addText(t, e, function(e) { n[t] = e }) }, addTextArea: function(t, e, n) { return this._addText("textarea", t, e, n) }, setTextAreaRows: function(t, e) { return this._controls[t].control.rows = e, this }, bindTextArea: function(t, e, n) { return this.addTextArea(t, e, function(e) { n[t] = e }) }, addTime: function(t, e, n) { var i = void 0; if (e instanceof Date) { var o = e.getHours();
                                    o < 10 && (o = "0" + o); var a = e.getMinutes();
                                    a < 10 && (a = "0" + a); var h = e.getSeconds();
                                    h < 10 && (h = "0" + h), i = o + ":" + a + ":" + h } else i = e; if (l()) return this.addText(t, i, n); var c = this._createContainer(),
                                    u = s("<b>" + t + "</b>", c),
                                    p = r("time", t, "qs_text_input", c);
                                p.value = i || "", this._controls[t] = { container: c, control: p, label: u, getValue: function() { return this.control.value }, setValue: function(t) { var e = void 0; if (t instanceof Date) { var i = t.getHours();
                                            i < 10 && (i = "0" + i); var o = t.getMinutes();
                                            o < 10 && (o = "0" + o); var a = t.getSeconds();
                                            a < 10 && (a = "0" + a), e = i + ":" + o + ":" + a } else e = t;
                                        this.control.value = e || "", n && n(e) } }; var d = this; return p.addEventListener("input", function() { n && n(p.value), d._callGCH(t) }), this }, bindTime: function(t, e, n) { return this.addTime(t, e, function(e) { n[t] = e }) } }; "object" == a(e) && "object" == a(t) ? t.exports = p : void 0 === (o = "function" == typeof(i = p) ? i.call(e, n, e, t) : i) || (t.exports = o) }() }).call(this, n(133)(t)) }, 132: function(t, e, n) { "use strict";
            n.r(e);
            n(139); var i = n(131),
                o = n.n(i),
                a = n(130),
                s = n.n(a),
                r = n(129),
                h = n.n(r),
                l = "game-holder",
                c = "canvas_container absolute_center page_background trap",
                u = 1280,
                p = 720,
                d = .03,
                f = .02,
                g = ["1"],
                m = "STATE_BOOT",
                y = "STATE_LOAD",
                b = "STATE_GAME",
                w = "STATE_CHARACTER_INTRO",
                v = "STATE_WELCOME",
                C = "STATE_LEVELEND",
                _ = "STATE_LEVELLOSE",
                S = "STATE_GAMEEND",
                k = "STATE_CUTSCENE",
                T = "PLAYER_ONE",
                x = "superstarregular",
                E = "superstarregular",
                O = "#ed1c24",
                P = "#2d3467",
                A = "#ffffff",
                I = "#ffd700",
                D = "#34bbf7",
                L = "#ffffff",
                M = "#f62e21",
                R = "rgba(135,136,138,1)",
                j = "#fe9901",
                N = "#ffffff",
                G = "#000000",
                B = "GAME_LOAD_FULL",
                W = "GAME_LOAD_LAZY",
                H = "GAME_LOAD_BATCH",
                z = { type: Phaser.CANVAS, parent: l, width: u, height: p },
                F = n(66); var U = function(t) {
                    function e() { return function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e),
                            function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.apply(this, arguments)) } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                        t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.preload = function(t) { this.fontsReady = !1, this.loadComplete = !1, t.load.baseURL = this.game.urls.getAssetsDirectory(), t.load.crossOrigin = "anonymous", t.load.pack("boot", "assetpack.json", null, this), F.load({ custom: { families: [x], urls: [this.game.urls.getFontsDirectory("superstar_memesbruh03.css")] }, active: this.fontsLoaded.bind(this), inactive: this.fontsLoaded.bind(this) }), this.game = t, t.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL, t.scale.fullScreenScaleMode = Phaser.ScaleManager.SHOW_ALL, t.scale.pageAlignHorizontally = !0, t.scale.pageAlignVertically = !0, t.stage.disableVisibilityChange = !0, t.scale.forceOrientation(!0, !1), this.firstRunPortrait = t.scale.isGamePortrait }, e.prototype.fontsLoaded = function() { this.fontsReady = !0 }, e.prototype.create = function(t) { this.stage.backgroundColor = "0x000000", this.loadComplete = !0 }, e.prototype.update = function(t) { this.checkLoading(t) }, e.prototype.checkLoading = function(t) { this.loadComplete && this.fontsReady && (t.addCopy(this.game.cache.getXML("copy_xml")), t.controller.startLoad()) }, e }(Phaser.State),
                V = Object.assign || function(t) { for (var e = 1; e < arguments.length; e++) { var n = arguments[e]; for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (t[i] = n[i]) } return t },
                q = function(t, e, n, i, o, a) { var s = function(t) { var e = t.font,
                            n = t.size,
                            i = t.clr,
                            o = t.options,
                            a = void 0 === o ? {} : o; return V({ font: n + "px " + e, fill: i, boundsAlignH: a.boundsAlignH || "center", boundsAlignV: a.boundsAlignV || "middle" }, a) }({ font: e, size: n, clr: i, options: arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : {} }); return t.make.text(o, a, "", s) }; var Y = function(t) {
                function e(n) {! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var i = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, n)); return i.track = i.game.make.image(), i.track.loadTexture("loader", "cn_preloader_bar.png"), i.track.x = -.5 * i.track.width, i.fill = i.game.make.image(0, 10), i.fill.loadTexture("loader", "cn_preloader_pattern.jpg"), i.track.addChild(i.fill), i.masker = i.game.make.graphics(), i.masker.beginFill(0), i.masker.drawRect(0, 0, i.fill.width, i.fill.height), i.masker.x = i.fill.x - .5 * i.fill.width, i.masker.y = i.fill.y, i.add(i.fill), i.add(i.masker), i.add(i.track), i.loadPosition = -128, i.loadOffset = 0, i } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.update = function() { this.loadOffset += 5, this.fill.x = this.loadOffset % 128 + this.loadPosition - .4 * this.fill.width }, e.prototype.setProgress = function(t) { this.masker.x = this.fill.width * t - .5 * this.fill.width }, e }(Phaser.Group); var K = function(t) {
                function e(n) { var i = n.game,
                        o = n.colour,
                        a = n.alpha,
                        s = n.blockInput,
                        r = void 0 === s || s;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var h = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, i)); return h.beginFill(o, a), h.drawRect(0, 0, h.game.defaultWidth, h.game.defaultHeight), h.inputEnabled = r, h } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e }(Phaser.Graphics); var X = function(t) {
                    function e() { return function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e),
                            function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.apply(this, arguments)) } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                        t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.preload = function(t) { this.container = t.add.group(), this.background = new K({ game: t, colour: "#000000", alpha: 1, blockInput: !1 }), this.background.anchor.set(.5), this.container.add(this.background), this.loadComplete = !1, this.fontsReady = !1, this.assetsReady = !1, this.state = 0, F.load({ custom: { families: [E], urls: [t.urls.getFontsDirectory("superstar_memesbruh03.css")] }, active: this.fontsLoaded.bind(this), inactive: this.fontsLoaded.bind(this) }), t.load.baseURL = t.urls.getAssetsDirectory(), t.load.crossOrigin = "anonymous", t.load.pack("load", "assetpack.json", null, this), t.load.pack("audio", "assetpack_audio.json", null, this), t.device.ie && t.load.pack("audioIE", "assetpack_audio.json", null, this), t.load.pack("sprites_64", "assetpack_audio.json", null, this), this.positionContainer(), t.windowEventController.handleWindowResize(), t.scale.onSizeChange.add(this.positionContainer, this), this.loadBar = new Y(this.game), this.loadBar.position.set(.5 * this.game.defaultWidth, .75 * this.game.defaultHeight), this.container.add(this.loadBar), this.loadImage = this.game.make.sprite(0, 0, "loader", "cn_preloader_bg.jpg"), this.loadImage.anchor.set(.5), this.loadImage.position.set(.5 * this.game.defaultWidth, .35 * this.game.defaultHeight), this.container.add(this.loadImage) }, e.prototype.positionContainer = function() { var t = .5 * (this.game.width - this.game.defaultWidth),
                            e = .5 * (this.game.height - this.game.defaultHeight);
                        this.background.scale.set(Math.max(this.game.height / this.game.defaultHeight, this.game.width / this.game.defaultWidth)), this.background.x = .5 * -(this.game.width - this.game.defaultWidth), this.container.position.set(t, e) }, e.prototype.loadUpdate = function(t) { this.loadBar.update(), this.loadBar.setProgress(this.game.load.progress / 100) }, e.prototype.create = function(t) { this.assetsReady = !0, this.game.sounds.touchLock() }, e.prototype.fontsLoaded = function() { this.fontsReady = !0, this.checkLoading() }, e.prototype.update = function(t) { this.checkLoading(t) }, e.prototype.checkLoading = function(t) { if (!this.loadComplete && this.assetsReady && this.fontsReady) { var e = this.game.cache.getJSON("app_config");
                            e && (this.loadBar.setProgress(1), this.game.controller.init({ config: e }), this.game.controller.showWelcomeScreen(), this.loadComplete = !0) } }, e.prototype.shutdown = function(t) { t.scale.onSizeChange.remove(this.positionContainer, this), this.container.destroy(!0), this.container = null }, e }(Phaser.State),
                J = function(t, e) { var n = Math.abs(t),
                        i = Math.max(0, e - Math.floor(n).toString().length),
                        o = Math.pow(10, i).toString().substr(1); return t < 0 && (o = "-" + o), o + n },
                Q = function(t) { t = t.toString(); for (var e = /(-?\d+)(\d{3})/; e.test(t);) t = t.replace(e, "$1,$2"); return t };! function(t) {
                function e(n) { var i = n.game;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var o = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, i));
                    o.bg = o.game.make.image(0, 0, "ui", "timerbg"), o.minutesDisplay = q(o.game, x, 42, O, 78, -12), o.minutesDisplay.stroke = P, o.minutesDisplay.strokeThickness = 9, o.minutesDisplay.setShadow(3, 3, P, 0); var a = o.minutesDisplay.y + 9; return o.secondsDisplay = q(o.game, x, 32, O, 170, a), o.secondsDisplay.stroke = P, o.secondsDisplay.strokeThickness = 9, o.secondsDisplay.setShadow(3, 3, P, 0), o.add(o.bg), o.add(o.minutesDisplay), o.add(o.secondsDisplay), o.reset(), o }(function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) })(e, t), e.prototype.reset = function() { this.setTime(0) }, e.prototype.setTime = function(t) { var e = Math.floor(t / 1e3) % 60,
                        n = Math.floor(t / 6e4) % 60;
                    this.render(n, e) }, e.prototype.render = function(t, e) { this.minutesDisplay.text = J(t, 2), this.secondsDisplay.text = J(e, 2) }, e.prototype.destroy = function() { var e = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0];
                    arguments[1];
                    this.minutesDisplay = null, this.secondsDisplay = null, t.prototype.destroy.call(this, e) } }(Phaser.Group); var Z = "title_music",
                $ = "road_ambience"; var tt = function(t) {
                function e(n) { var i = n.game,
                        o = n.id,
                        a = (n.sfxID, n.position),
                        s = n.skin,
                        r = (n.ariaLabelID, n.spritesheet),
                        h = n.defaultScale;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var l = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, i, 0, 0, r || "buttons")); return l.setFrames(s, s, s, s), l.id = o, l.input.useHandCursor = !0, l.game.time.events.add(10, l.init, l), l.grouped = !!a && a.grouped, l.defaultScale = h || 1, l.grouped || (a && (l.xpos = a.x, l.ypos = a.y), l.anchor.set(.5), l.updatePosition()), l.enable(), l } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.init = function() {}, e.prototype.updatePosition = function() { this.position.set(this.game.width * this.xpos, this.game.height * this.ypos) }, e.prototype.enable = function() { this.onInputDown.add(this.onDown, this), this.onInputOver.add(this.onOver, this), this.onInputOut.add(this.onOut, this) }, e.prototype.disable = function() { this.onInputDown.forget(), this.onInputDown.dispose(), this.onInputDown.removeAll(), this.onInputOver.forget(), this.onInputOver.dispose(), this.onInputOver.removeAll(), this.onInputOut.forget(), this.onInputOut.dispose(), this.onInputOut.removeAll() }, e.prototype.onOver = function() { this.scale.set(1.2 * this.defaultScale) }, e.prototype.onOut = function() { this.scale.set(1 * this.defaultScale) }, e.prototype.onDown = function() { this.game.sounds.playSFX("click_mouse_over") }, e.prototype.destroy = function() { var e = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0];
                    this.disable(), t.prototype.destroy.call(this, e) }, e }(Phaser.Button); var et = function(t) {
                function e(n) { var i = n.game,
                        o = n.id,
                        a = (n.sfxID, n.position),
                        s = n.skins;
                    n.ariaLabelID;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var r = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, i, 0, 0, "buttons")); return r.id = o, r.skins = s, r.input.useHandCursor = !0, r.game.time.events.add(10, r.init, r), r.game.controller.uiModel.onAudioIsChanged.add(r.updateDisplayStatus, r), r.grouped = a.grouped, r.grouped || (r.xpos = a.x, r.ypos = a.y, r.anchor.set(.5), r.updatePosition()), r.updateDisplayStatus({ isMuted: r.game.controller.uiModel.getIsMuted() }), r.enable(), r } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.init = function() {}, e.prototype.enable = function() { this.onInputDown.add(this.onDown, this), this.onInputOver.add(this.onOver, this), this.onInputOut.add(this.onOut, this) }, e.prototype.disable = function() { this.onInputDown.forget(), this.onInputDown.dispose(), this.onInputDown.removeAll(), this.onInputOver.forget(), this.onInputOver.dispose(), this.onInputOver.removeAll(), this.onInputOut.forget(), this.onInputOut.dispose(), this.onInputOut.removeAll() }, e.prototype.onOver = function() { this.scale.set(1.2) }, e.prototype.onOut = function() { this.scale.set(1) }, e.prototype.onDown = function() { this.game.sounds.playSFX("click_mouse_over") }, e.prototype.updatePosition = function() { this.position.set(this.game.width * this.xpos, this.game.height * this.ypos) }, e.prototype.updateDisplayStatus = function(t) { var e = t.isMuted,
                        n = e ? this.skins.muted : this.skins.unmuted;
                    this.setFrames(n, n, n, n), this.game.sound.mute = e, this.game.sounds.allowMusic = this.game.sounds.allowEffects = !e }, e.prototype.destroy = function() { var e = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0];
                    this.disable(), this.game.controller.uiModel.onAudioIsChanged.remove(this.updateDisplayStatus, this), t.prototype.destroy.call(this, e) }, e }(Phaser.Button); var nt = function(t) {
                function e(n) {! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var i = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, n)); return i.state = null, i.buttons = {}, i } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.init = function(t) { this.buttonsConfig = t, this.createButtonGroups() }, e.prototype.positionElements = function() { var t = this.game.screenPaddingX,
                        e = this.game.screenPaddingY;
                    this.positionButtonGroups(t, e) }, e.prototype.positionButtonGroups = function(t, e) { var n = this,
                        i = this.game.width,
                        o = this.game.height;
                    this.buttonGroups.forEach(function(a) { n.positionButtonGroupButtons(a, e); var s = i - t - a.groupWidth,
                            r = o - a.groupHeight - e,
                            h = i / 2 - a.groupWidth / 2,
                            l = o / 2 - a.groupHeight / 2; switch (a.screenPosition) {
                            case "TOP_LEFT":
                                a.x = t, a.y = e; break;
                            case "TOP_RIGHT":
                                a.x = s, a.y = e; break;
                            case "BOTTOM_LEFT":
                                a.x = t, a.y = r; break;
                            case "BOTTOM_RIGHT":
                                a.x = s, a.y = r; break;
                            case "BOTTOM_CENTER":
                                a.x = h, a.y = r; break;
                            case "CENTER":
                                a.x = h, a.y = l } }) }, e.prototype.positionButtonGroupButtons = function(t, e) { var n = this;
                    t.groupWidth = 0, t.groupHeight = 0, t.buttons.forEach(function(i, o) { if ("UNGROUPED" === t.screenPosition) i.updatePosition();
                        else { if (i.x = 0 === o ? i.x : t.groupWidth + e, t.groupWidth = i.x + i.width, t.groupHeight = Math.max(t.groupHeight, i.height), i.padding_left) { var a = n.game.defaultWidth * i.padding_left;
                                i.x += a, t.groupWidth += a } if (i.padding_bottom) { var s = n.game.defaultHeight * i.padding_bottom;
                                i.y -= s, t.groupHeight += s } } }) }, e.prototype.createButtonGroups = function() { this.btnsTopLeft = this.createButtonGroup("TOP_LEFT"), this.btnsTopRight = this.createButtonGroup("TOP_RIGHT"), this.btnsBottomLeft = this.createButtonGroup("BOTTOM_LEFT"), this.btnsBottomRight = this.createButtonGroup("BOTTOM_RIGHT"), this.btnsBottomCenter = this.createButtonGroup("BOTTOM_CENTER"), this.btnsCenter = this.createButtonGroup("CENTER"), this.btnsUngrouped = this.createButtonGroup("UNGROUPED"), this.buttonGroups = [this.btnsTopLeft, this.btnsTopRight, this.btnsBottomLeft, this.btnsBottomRight, this.btnsBottomCenter, this.btnsCenter, this.btnsUngrouped], this.buttonGroupLookup = { TOP_LEFT: this.btnsTopLeft, TOP_RIGHT: this.btnsTopRight, TOP_RIGHT_2: this.btnsTopRight, BOTTOM_LEFT: this.btnsBottomLeft, BOTTOM_RIGHT: this.btnsBottomRight, BOTTOM_CENTER: this.btnsBottomCenter, CENTER: this.btnsCenter, UNGROUPED: this.btnsUngrouped } }, e.prototype.createButtonGroup = function(t) { var e = this.game.make.group(); return e.groupWidth = 0, e.groupHeight = 0, e.buttons = [], e.screenPosition = t, this.add(e), e }, e.prototype.addToButtonGroup = function(t, e) { var n = this.buttonGroupLookup[t];
                    n.add(e), e.buttonGroup = n, n.buttons.push(e) }, e.prototype.destroyButtons = function() { var t = this;
                    Object.keys(this.buttons).map(function(e, n) { var i = t.buttons[e]; return i.buttonGroup.buttons.splice(i.buttonGroup.buttons.indexOf(i), 1), i.onInputDown.remove(t.handleButtonInteraction, t), i.destroy(!0), i = null }), this.buttons = {} }, e.prototype.createButtons = function(t) { var e = this;
                    this.buttons = {}, t.forEach(function(t) { e.createButton(t) }) }, e.prototype.createButton = function(t) { var e = this.buttonsConfig[t]; if (e) { var n = e.id,
                            i = e.sfx_id,
                            o = e.skin,
                            a = e.position,
                            s = e.ariaLabelID,
                            r = e.skins;
                        console.log("creating button : " + n); var h = { game: this.game, id: n, position: a, sfx_id: i, skin: o, ariaLabelID: s },
                            l = void 0; return "btn_sound" === n ? (h.skins = r, l = new et(h)) : l = new tt(h), this.buttons[n] = l, l.onInputDown.add(this.handleButtonInteraction, this), a.grouped ? this.addToButtonGroup(a.id, l) : this.addToButtonGroup("UNGROUPED", l), l } }, e.prototype.renderButtons = function(t, e) { this.handleButtonInteraction = e, this.destroyButtons(), this.createButtons(t) }, e.prototype.destroy = function() {!(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0], arguments[1];
                    t.prototype.destroy.call(this, !0) }, e }(Phaser.Group); var it = function(t) {
                    function e(n) { var i = n.game,
                            o = n.title;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var a = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, i)); return a.loadTexture(e.SPRITESHEET, o), a } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                        t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e }(Phaser.Image),
                ot = it;
            it.SPRITESHEET = "titles", it.HELLO = "title_hello", it.HOWTOPLAY = "title_howtoplay", it.JOINED_GNASHER = "title_joined_gnasher", it.JOINED_GNIPPER = "title_joined_gnipper", it.JOINED_ROBOTODOG = "title_joined_robotdog", it.JOINED_RUBI = "title_joined_rubi", it.OHNO = "title_ohno", it.WELLDONE = "title_welldone", it.YOUDIDIT = "title_youdidit"; var at = function() {
                function t(t, e) { for (var n = 0; n < e.length; n++) { var i = e[n];
                        i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i) } } return function(e, n, i) { return n && t(e.prototype, n), i && t(e, i), e } }(); var st = function(t) {
                    function e(n) { var i = n.game,
                            o = n.score,
                            a = void 0 === o ? 0 : o,
                            s = n.target,
                            r = void 0 === s ? 100 : s,
                            h = n.scoreColour,
                            l = void 0 === h ? I : h,
                            c = n.targetColour,
                            u = void 0 === c ? L : c;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var p = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, i)); return p.score = a, p.icon = p.game.make.sprite(0, 0, "ui", "icon_paper"), p.icon.x = 0, p.icon.y = 0, p.add(p.icon), p.scoreDisplay = q(p.game, x, 150, l), p.scoreDisplay.y = .5 * p.icon.height - 100, p.scoreDisplay.x = p.icon.width + 10, p.scoreDisplay.text = Q(a), p.add(p.scoreDisplay), p.scoreTargetDisplay = q(p.game, x, 55, u), p.scoreTargetDisplay.text = "/ " + r, p.scoreTargetDisplay.x = p.scoreDisplay.x + p.scoreDisplay.width + 10, p.scoreTargetDisplay.y = p.scoreDisplay.y + 70, p.add(p.scoreTargetDisplay), p.onUpdate = new Phaser.Signal, p.onAnimatedScoreComplete = new Phaser.Signal, p.onAnimatedScoreUpdated = new Phaser.Signal, p } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                        t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.setScore = function(t) { this.score = t, this.setScoreDisplayText(this.score) }, e.prototype.animateScore = function(t, e) { this.animatedScoreTarget = t; var n = this.game.add.tween(this).to({ animatedScoreTarget: e }, 1e3, Phaser.Easing.Exponential.Out, !0);
                        n.onUpdateCallback(this.handleAnimatedScoreUpdate, this), n.onComplete.addOnce(this.handleAnimatedScoreComplete, this) }, e.prototype.handleAnimatedScoreUpdate = function() { this.setScoreDisplayText(Math.ceil(this.animatedScoreTarget)), this.onAnimatedScoreUpdated.dispatch() }, e.prototype.handleAnimatedScoreComplete = function() { this.setScoreDisplayText(Math.ceil(this.animatedScoreTarget)), this.onAnimatedScoreComplete.dispatch() }, e.prototype.setScoreDisplayText = function(t) { this.scoreDisplay.text = Q(t), this.scoreTargetDisplay.x = this.scoreDisplay.x + this.scoreDisplay.width + 10 }, e.prototype.destroy = function() { this.icon.destroy(!0), this.scoreDisplay.destroy(!0), this.scoreTargetDisplay.destroy(!0), this.icon = null, this.scoreDisplay = null, this.scoreTargetDisplay = null, t.prototype.destroy.call(this, !0) }, at(e, [{ key: "width", get: function() { return this.scoreTargetDisplay.x + this.scoreTargetDisplay.width } }, { key: "height", get: function() { return this.scoreDisplay.height } }]), e }(Phaser.Group),
                rt = function() {
                    function t(t, e) { for (var n = 0; n < e.length; n++) { var i = e[n];
                            i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i) } } return function(e, n, i) { return n && t(e.prototype, n), i && t(e, i), e } }();! function(t) {
                function e(n) { var i = n.game,
                        o = n.score,
                        a = void 0 === o ? 0 : o;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var s = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, i)); return s.frame = s.game.make.sprite(0, 0, "ui", "frame_highscore"), s.add(s.frame), s.frameCenterY = .5 * s.frame.height, s.starIcon = s.game.make.sprite(0, 0, "ui", "icon_highscore"), s.starIcon.scale.set(30 / s.starIcon.height), s.starIcon.x = 40, s.starIcon.y = .5 * s.frame.height - .5 * s.starIcon.height, s.add(s.starIcon), s.copyDisplay = q(s.game, x, 38, D), s.copyDisplay.text = s.game.copy.getCopy("best").toUpperCase(), s.copyDisplay.x = s.starIcon.x + s.starIcon.width + 20, s.copyDisplay.y = s.frameCenterY - .5 * s.copyDisplay.height, s.add(s.copyDisplay), s.paperIcon = s.game.make.image(0, 0, "ui", "icon_paper"), s.paperIcon.anchor.set(0, .5), s.paperIcon.x = .5 * s.frame.width, s.paperIcon.y = .5 * s.frame.height, s.paperIcon.scale.set(45 / s.paperIcon.height), s.add(s.paperIcon), s.scoreDisplay = q(s.game, x, 54, D), s.scoreDisplay.x = s.paperIcon.x + s.paperIcon.width + 20, s.scoreDisplay.y = .15 * s.frame.height, s.scoreDisplay.text = Q(a), s.add(s.scoreDisplay), s }(function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) })(e, t), e.prototype.setScore = function(t) { this.scoreDisplay.text = t, this.scoreTargetDisplay.x = this.scoreDisplay.x + this.scoreDisplay.width + 10 }, e.prototype.destroy = function() { this.frame.destroy(!0), this.starIcon.destroy(!0), this.paperIcon.destroy(!0), this.copyDisplay.destroy(!0), this.scoreDisplay.destroy(!0), this.frame = null, this.starIcon = null, this.paperIcon = null, this.copyDisplay = null, this.scoreDisplay = null, t.prototype.destroy.call(this, !0) }, rt(e, [{ key: "width", get: function() { return this.frame.width } }, { key: "height", get: function() { return this.frame.height } }]) }(Phaser.Group); var ht = function() {
                function t(t, e) { for (var n = 0; n < e.length; n++) { var i = e[n];
                        i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i) } } return function(e, n, i) { return n && t(e.prototype, n), i && t(e, i), e } }(); var lt = function(t) {
                    function e(n) { var i = n.game,
                            o = n.message,
                            a = n.onClose,
                            s = void 0 !== a && a,
                            r = n.onCloseScope,
                            h = void 0 !== r && r;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var l = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, i)),
                            c = l.game.controller.config.getIntroMessageById(o); return l.background = new K({ game: i, colour: "#000000", alpha: .3 }), l.add(l.background), l.container = l.game.make.group(), l.add(l.container), l.panel = l.game.make.image(0, 0, "ui", "panel_generic"), l.container.add(l.panel), l.character = l.game.make.image(0, 0, c.image.spritesheet, c.image.frame), l.character.y = 0, l.character.x = .5 * l.panel.width - .5 * l.character.width, l.container.addAt(l.character, 0), l.title = new ot({ game: i, title: ot[c.title] }), l.title.x = .5 * l.panel.width - .5 * l.title.width, l.title.y = .7 * l.character.height, l.container.add(l.title), l.copy = q(l.game, E, 33, A, 60, 0, { wordWrap: !0, wordWrapWidth: .8 * l.panel.width }), l.copy.angle = -2.5, l.copy.text = l.game.copy.getCopy(c.copy), l.copy.y = l.title.y + l.title.height + 40, l.container.add(l.copy), l.panel.y = l.title.y + .25 * l.title.height, l.btnContinue = new tt({ game: l.game, id: "btn_continue", skin: "btn_continue" }), l.btnContinue.x = .5 * l.panel.width, l.btnContinue.y = l.panel.y + l.panel.height - l.btnContinue.height, l.btnContinue.onInputDown.add(l.handleContinue, l), l.container.addChild(l.btnContinue), l.panel.height = l.btnContinue.y - l.panel.y, l.onClose = s, l.onCloseScope = h, l.game.scale.onSizeChange.add(l.handleScreenResize, l), l.fixedToCamera = !0, l.handleScreenResize(), l } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                        t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.handleScreenResize = function() { this.container.x = .5 * this.game.width - .5 * this.width, this.container.y = .5 * this.game.height - .5 * this.height }, e.prototype.handleContinue = function() { this.onClose && this.onClose.apply(this.onCloseScope), this.destroy() }, e.prototype.destroy = function() { this.btnContinue.onInputDown.remove(this.handleContinue, this), this.game.scale.onSizeChange.remove(this.handleScreenResize, this), this.btnContinue.destroy(!0), this.title.destroy(!0), this.character.destroy(!0), this.panel.destroy(!0), this.container.destroy(!0), this.btnContinue = null, this.title = null, this.character = null, this.panel = null, this.container = null, t.prototype.destroy.call(this, !0) }, ht(e, [{ key: "height", get: function() { return this.panel.height + this.panel.y } }, { key: "width", get: function() { return this.panel.width } }]), e }(Phaser.Group),
                ct = function() {
                    function t(t, e) { for (var n = 0; n < e.length; n++) { var i = e[n];
                            i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i) } } return function(e, n, i) { return n && t(e.prototype, n), i && t(e, i), e } }(); var ut = function(t) {
                function e(n) { var i = n.game,
                        o = n.score,
                        a = void 0 === o ? 0 : o;
                    n.target;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var s = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, i)); return s.icon = s.game.make.sprite(0, 0, "ui", "icon_clock"), s.icon.x = 0, s.icon.y = 0, s.add(s.icon), s.timeDisplay = q(s.game, x, 150, I), s.timeDisplay.y = .5 * s.icon.height - 100, s.timeDisplay.x = s.icon.width + 20, s.timeDisplay.text = a, s.add(s.timeDisplay), s.setTime(0), s } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.setTime = function(t) { var e = Math.floor(t / 6e4),
                        n = (t % 6e4 / 1e3).toFixed(0);
                    this.timeDisplay.text = J(e, 2) + ":" + J(n, 2) }, e.prototype.destroy = function() { this.icon.destroy(!0), this.timeDisplay.destroy(!0), this.icon = null, this.timeDisplay = null, t.prototype.destroy.call(this, !0) }, ct(e, [{ key: "width", get: function() { return this.timeDisplay.x + this.timeDisplay.width } }, { key: "height", get: function() { return this.timeDisplay.height } }]), e }(Phaser.Group); var pt = function(t) {
                    function e(n) { var i = n.game,
                            o = n.levelData;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var a = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, i)); return a.fixedToCamera = !0, a.backing = a.game.make.graphics(), a.backing.beginFill(0, 1), a.backing.drawRect(0, 0, a.game.defaultWidth, 85), a.add(a.backing), a.timeDisplay = new ut({ game: i }), a.timeDisplay.scale.set(50 / a.timeDisplay.height), a.timeDisplay.x = .5 * a.game.width - a.timeDisplay.width * a.timeDisplay.scale.x - 25, a.timeDisplay.y = 20, a.add(a.timeDisplay), a.scoreDisplay = new st({ game: i, target: o.collectTarget }), a.scoreDisplay.x = .5 * a.game.width + 25, a.scoreDisplay.y = 20, a.scoreDisplay.scale.set(60 / a.scoreDisplay.height), a.add(a.scoreDisplay), a } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                        t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.updateStats = function(t, e) { this.timeDisplay.setTime(t), this.scoreDisplay.setScore(e) }, e }(Phaser.Group),
                dt = function() {
                    function t(t, e) { for (var n = 0; n < e.length; n++) { var i = e[n];
                            i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i) } } return function(e, n, i) { return n && t(e.prototype, n), i && t(e, i), e } }(); var ft = function(t) {
                    function e(n) { var i = n.game;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var o = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, i)); return o.background = new K({ game: i, colour: "#000000", alpha: .3 }), o.background.width = o.game.width, o.background.height = o.game.height, o.add(o.background), o.container = o.game.make.group(), o.add(o.container), o.panel = o.game.make.image(0, 0, "ui", "panel_generic"), o.container.add(o.panel), o.btnClose = new tt({ game: o.game, id: "btn_close", skin: "btn_close" }), o.btnClose.x = .95 * o.panel.width, o.btnClose.y = o.btnClose.height / 4, o.btnClose.onInputDown.add(o.closePopup, o), o.container.addChild(o.btnClose), o.upperText = q(o.game, E, 72, A, 60, 0, { wordWrap: !0, wordWrapWidth: .9 * o.panel.width, boundsAlignH: "center", boundsAlignV: "middle", align: "center" }), o.upperText.anchor.set(.5), o.upperText.text = o.game.copy.getCopy("how_to_play"), o.upperText.x = o.panel.x + .5 * o.panel.width, o.upperText.y = o.panel.y + 80, o.container.add(o.upperText), o.instructionImage = o.game.make.image(0, 0, "instruction_01"), o.instructionImage.anchor.set(.5), o.instructionImage.x = .5 * o.panel.width, o.instructionImage.scale.set(.9), o.instructionImage.y = o.upperText.y + .5 * o.upperText.height + .55 * o.instructionImage.height, o.container.add(o.instructionImage), o.lowerText = q(o.game, E, 33, A, 60, 0, { wordWrap: !0, wordWrapWidth: .95 * o.panel.width, align: "center" }), o.lowerText.anchor.set(.5), o.lowerText.text = o.game.copy.getCopy("how_to_play_body"), o.lowerText.x = .5 * o.panel.width, o.lowerText.y = o.instructionImage.y + o.instructionImage.height / 2 + 100, o.container.add(o.lowerText), o.onClose = new Phaser.Signal, o.game.scale.onSizeChange.add(o.handleScreenResize, o), o.handleScreenResize(), o } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                        t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.handleScreenResize = function() { this.container.x = .5 * this.game.width - .5 * this.width, this.container.y = .5 * this.game.height - .5 * this.height, this.background.width = this.game.width, this.background.height = this.game.height }, e.prototype.handleReplay = function() { this.game.controller.replayLevel(), this.destroy() }, e.prototype.handleNextLevel = function() { this.game.controller.nextLevel(), this.destroy() }, e.prototype.handleTryAgain = function() { this.game.controller.replayLevel(), this.destroy() }, e.prototype.closePopup = function() { this.onClose.dispatch(), this.destroy(!0) }, e.prototype.destroy = function() { this.game.scale.onSizeChange.remove(this.handleScreenResize, this), this.btnClose.onInputDown.remove(this.closePopup, this), this.btnClose.destroy(!0), this.panel.destroy(!0), this.container.destroy(!0), this.btnClose = null, this.panel = null, this.container = null, t.prototype.destroy.call(this, !0) }, dt(e, [{ key: "height", get: function() { return this.panel.height + this.panel.y } }, { key: "width", get: function() { return this.panel.width } }]), e }(Phaser.Group),
                gt = function() {
                    function t(t, e) { for (var n = 0; n < e.length; n++) { var i = e[n];
                            i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i) } } return function(e, n, i) { return n && t(e.prototype, n), i && t(e, i), e } }(); var mt = function(t) {
                function e(n) { var i = n.game,
                        o = n.score,
                        a = void 0 === o ? 0 : o,
                        s = n.labelCopy,
                        r = n.scoreColour,
                        h = void 0 === r ? I : r,
                        l = n.scoreFontSize,
                        c = void 0 === l ? 75 : l;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var u = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, i)); return u.score = a, u.label = q(u.game, x, 50, A), u.label.text = s || "", u.add(u.label), u.scoreDisplay = q(u.game, x, c, h), u.scoreDisplay.text = Q(a), u.scoreDisplay.x = u.label.width + 20, u.add(u.scoreDisplay), u.label.y = .5 * u.scoreDisplay.height - .5 * u.label.height, u.onUpdate = new Phaser.Signal, u.onAnimatedScoreComplete = new Phaser.Signal, u.onAnimatedScoreUpdated = new Phaser.Signal, u } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.setScore = function(t) { this.score = t, this.setScoreDisplayText(this.score) }, e.prototype.animateScore = function(t, e, n) { this.animatedTween && this.animatedTween.stop(), this.animatedScoreTarget = t, this.animatedTween = this.game.add.tween(this).to({ animatedScoreTarget: e }, n || 1e3, Phaser.Easing.Exponential.Out, !0), this.animatedTween.onUpdateCallback(this.handleAnimatedScoreUpdate, this), this.animatedTween.onComplete.addOnce(this.handleAnimatedScoreComplete, this) }, e.prototype.handleAnimatedScoreUpdate = function() { this.setScoreDisplayText(Math.ceil(this.animatedScoreTarget)), this.onAnimatedScoreUpdated.dispatch() }, e.prototype.handleAnimatedScoreComplete = function() { this.setScoreDisplayText(Math.ceil(this.animatedScoreTarget)), this.onAnimatedScoreComplete.dispatch() }, e.prototype.setScoreDisplayText = function(t) { this.scoreDisplay.text = Q(t) }, e.prototype.destroy = function() { this.scoreDisplay.destroy(!0), this.scoreDisplay = null, t.prototype.destroy.call(this, !0) }, gt(e, [{ key: "width", get: function() { return this.scoreDisplay.x + this.scoreDisplay.width } }, { key: "height", get: function() { return this.scoreDisplay.height } }]), e }(Phaser.Group); var yt = function(t) {
                    function e(n) { var i = n.game;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var o = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, i)); return o.anchor.set(.5), o.loadTexture("starburst"), o.anim = o.animations.add("play"), o.animations.play("play", 24, !1), o.anim.onComplete.add(o.handleAnimationComplete, o), o } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                        t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.handleAnimationComplete = function() { this.destroy(!0) }, e }(Phaser.Sprite),
                bt = function() {
                    function t(t, e) { for (var n = 0; n < e.length; n++) { var i = e[n];
                            i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i) } } return function(e, n, i) { return n && t(e.prototype, n), i && t(e, i), e } }(); var wt = function(t) {
                    function e(n) { var i = n.game,
                            o = n.isLastLevel;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var a = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, i)); return a.isLastLevel = o, a.background = new K({ game: i, colour: "#000000", alpha: .5 }), a.add(a.background), a.container = a.game.make.group(), a.add(a.container), a.panel = a.game.make.image(0, 0, "ui", "panel_generic"), a.container.add(a.panel), a.title = new ot({ game: i, title: ot.WELLDONE }), a.title.x = .5 * a.panel.width - .5 * a.title.width, a.container.add(a.title), a.panel.y = a.title.y + .3 * a.title.height, o ? (a.btnContinue = new tt({ game: a.game, id: "btn_continue", skin: "btn_continue" }), a.btnContinue.x = .5 * a.panel.width, a.btnContinue.y = a.btnReplay.y - a.btnReplay.height - .25 * a.btnContinue.height, a.btnContinue.onInputDown.add(a.handleNextLevel, a)) : (a.btnContinue = new tt({ game: a.game, id: "btn_nextlevel", skin: "btn_nextlevel" }), a.btnContinue.x = .5 * a.panel.width, a.btnContinue.y = a.btnReplay.y - a.btnReplay.height - .25 * a.btnContinue.height, a.btnContinue.onInputDown.add(a.handleNextLevel, a)), a.game.scale.onSizeChange.add(a.handleScreenResize, a), a.fixedToCamera = !0, a.handleScreenResize(), a } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                        t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.handleScreenResize = function() { this.container.x = .5 * this.game.width - .5 * this.width, this.container.y = .5 * this.game.height - .5 * this.height }, e.prototype.handleReplay = function() { this.game.controller.replayLevel(), this.destroy() }, e.prototype.handleNextLevel = function() { this.game.controller.nextLevel(), this.destroy() }, e.prototype.handleTryAgain = function() { this.game.controller.replayLevel(), this.destroy() }, e.prototype.destroy = function() { this.game.scale.onSizeChange.remove(this.handleScreenResize, this), this.btnTryAgain && (this.btnTryAgain.onInputDown.remove(this.handleTryAgain, this), this.btnTryAgain.destroy(!0)), this.btnContinue && (this.btnContinue.onInputDown.remove(this.handleNextLevel, this), this.btnContinue.destroy(!0)), this.btnReplay && (this.btnReplay.onInputDown.remove(this.handleReplay, this), this.btnReplay.destroy(!0)), this.title.destroy(!0), this.panel.destroy(!0), this.container.destroy(!0), this.btnTryAgain = null, this.btnContinue = null, this.btnReplay = null, this.highScoreDisplay = null, this.scoreDisplay = null, this.title = null, this.character = null, this.panel = null, this.container = null, t.prototype.destroy.call(this, !0) }, bt(e, [{ key: "height", get: function() { return this.panel.height + this.panel.y } }, { key: "width", get: function() { return this.panel.width } }]), e }(Phaser.Group),
                vt = function() {
                    function t(t, e) { for (var n = 0; n < e.length; n++) { var i = e[n];
                            i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i) } } return function(e, n, i) { return n && t(e.prototype, n), i && t(e, i), e } }(); var Ct = function(t) {
                    function e(n) { var i = n.game,
                            o = n.totalLevelScore,
                            a = n.newGameScore,
                            s = n.collectTarget;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var r = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, i)); return r.totalLevelScore = o, r.newGameScore = a, r.collectTarget = s, r.background = new K({ game: i, colour: "#000000", alpha: .5 }), r.add(r.background), r.container = r.game.make.group(), r.add(r.container), r.panel = r.game.make.image(0, 0, "ui", "panel_generic"), r.container.add(r.panel), r.character = r.game.make.image(0, 0, "modal_characters", "modal_char_levelfail"), r.character.y = 0, r.character.x = .5 * r.panel.width - .5 * r.character.width, r.container.addAt(r.character, 0), r.title = new ot({ game: i, title: ot.OHNO }), r.title.x = .5 * r.panel.width - .5 * r.title.width, r.title.y = .75 * r.character.height, r.container.add(r.title), r.panel.y = r.title.y + .3 * r.title.height, r.scoreDisplay = new st({ game: i, score: 0, target: r.collectTarget, scoreColour: M }), r.scoreDisplay.x = .5 * r.panel.width - .5 * r.scoreDisplay.width, r.scoreDisplay.y = r.title.y + r.title.height + 50, r.container.addChild(r.scoreDisplay), r.totalScoreDisplay = new mt({ game: r.game, score: r.newGameScore, labelCopy: r.game.copy.getCopy("total_score") + " : " }), r.totalScoreDisplay.x = .5 * r.panel.width - .5 * r.totalScoreDisplay.width, r.totalScoreDisplay.y = r.scoreDisplay.y + r.scoreDisplay.height + 20, r.btnTryAgain = new tt({ game: r.game, id: "btn_tryagain", skin: "btn_tryagain" }), r.btnTryAgain.x = .5 * r.panel.width, r.btnTryAgain.y = r.totalScoreDisplay.y + r.totalScoreDisplay.height + .75 * r.btnTryAgain.height, r.btnTryAgain.onInputDown.add(r.handleTryAgain, r), r.panel.height = r.btnTryAgain.y - r.panel.y, r.game.scale.onSizeChange.add(r.handleScreenResize, r), r.fixedToCamera = !0, r.handleScreenResize(), r.scoreDisplay.onAnimatedScoreUpdated.add(r.handleAnimatedScoreUpdate, r), r.scoreDisplay.onAnimatedScoreComplete.add(r.handleAnimatedScoreComplete, r), r.scoreDisplay.animateScore(0, r.totalLevelScore), r } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                        t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.handleScreenResize = function() { this.container.x = .5 * this.game.width - .5 * this.width, this.container.y = .5 * this.game.height - .5 * this.height }, e.prototype.handleAnimatedScoreUpdate = function() { this.scoreDisplay.x = .5 * this.panel.width - .5 * this.scoreDisplay.width }, e.prototype.handleAnimatedScoreComplete = function() { this.handleAnimatedScoreUpdate(), this.container.add(this.totalScoreDisplay), this.addStarBurst(this.panel.width / 2, this.totalScoreDisplay.y), this.container.add(this.btnTryAgain) }, e.prototype.addStarBurst = function(t, e) { var n = new yt({ game: this.game });
                        n.scale.set(2), n.position.set(t, e), this.container.add(n) }, e.prototype.handleTryAgain = function() { this.game.controller.replayLevel(), this.destroy() }, e.prototype.destroy = function() { this.game.scale.onSizeChange.remove(this.handleScreenResize, this), this.btnTryAgain.onInputDown.remove(this.handleTryAgain, this), this.btnTryAgain.destroy(!0), this.scoreDisplay.destroy(!0), this.title.destroy(!0), this.character.destroy(!0), this.panel.destroy(!0), this.container.destroy(!0), this.btnTryAgain = null, this.btnNextLevel = null, this.btnReplay = null, this.highScoreDisplay = null, this.scoreDisplay = null, this.title = null, this.character = null, this.panel = null, this.container = null, t.prototype.destroy.call(this, !0) }, vt(e, [{ key: "height", get: function() { return this.panel.height + this.panel.y } }, { key: "width", get: function() { return this.panel.width } }]), e }(Phaser.Group),
                _t = function() {
                    function t(t, e) { for (var n = 0; n < e.length; n++) { var i = e[n];
                            i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i) } } return function(e, n, i) { return n && t(e.prototype, n), i && t(e, i), e } }(); var St = function(t) {
                    function e(n) { var i = n.game;
                        n.message, n.onClose, n.onCloseScope;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var o = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, i)); return o.background = new K({ game: i, colour: "#000000", alpha: .3 }), o.background.width = o.game.width, o.background.height = o.game.height, o.add(o.background), o.container = o.game.make.group(), o.add(o.container), o.panel = o.game.make.image(0, 0, "ui", "panel_generic"), o.container.add(o.panel), o.btnContinue = new tt({ game: o.game, id: "btn_play", skin: "btn_play", defaultScale: .7 }), o.btnContinue.x = .5 * o.panel.width, o.btnContinue.y = o.panel.y + .4 * o.panel.height, o.btnContinue.scale.set(.7), o.btnContinue.onInputDown.add(o.handleContinue, o), o.container.addChild(o.btnContinue), o.btnRestart = new tt({ game: o.game, id: "btn_replay", skin: "btn_replay", defaultScale: .7 }), o.btnRestart.y = o.panel.y + .65 * o.panel.height, o.btnRestart.x = .5 * o.panel.width, o.btnRestart.scale.set(.7), o.btnRestart.onInputDown.add(o.handleRestart, o), o.container.addChild(o.btnRestart), o.mainCopy = q(o.game, x, 62, N, 0, 0, { wordWrap: !0, wordWrapWidth: .9 * o.panel.width, align: "center" }), o.mainCopy.text = o.game.copy.getCopy("pause"), o.mainCopy.anchor.set(.5), o.mainCopy.position.set(o.panel.x + .5 * o.panel.width, o.panel.y + .1 * o.panel.height), o.container.addChild(o.mainCopy), o.onion = o.game.make.image(0, 0, "ui", "onion_pause"), o.onion.anchor.set(0, 1), o.onion.scale.set(.7), o.onion.position.set(o.panel.x + .15 * o.onion.width, o.panel.y + .7 * o.panel.height), o.container.addChild(o.onion), o.apple = o.game.make.image(0, 0, "ui", "apple_pause"), o.apple.anchor.set(1, 1), o.apple.scale.set(.7), o.apple.position.set(o.panel.x + o.panel.width - .15 * o.apple.width, o.panel.y + .7 * o.panel.height), o.container.addChild(o.apple), o.panel.height = o.btnRestart.y + o.btnRestart.height, o.game.scale.onSizeChange.add(o.handleScreenResize, o), o.handleScreenResize(), o } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                        t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.handleScreenResize = function() { this.container.x = .5 * this.game.width - .5 * this.width, this.container.y = .5 * this.game.height - .5 * this.height, this.background.width = this.game.width, this.background.height = this.game.height }, e.prototype.handleCredits = function() { this.game.controller.showGameCredits() }, e.prototype.handleRestart = function() { this.game.controller.restartLevel() }, e.prototype.handleContinue = function() { this.game.controller.resumeGame() }, e.prototype.destroy = function() { this.game.scale.onSizeChange.remove(this.handleScreenResize, this), this.btnContinue.onInputDown.remove(this.handleContinue, this), this.btnRestart.onInputDown.remove(this.handleContinue, this), this.btnRestart.destroy(!0), this.btnContinue.destroy(!0), this.panel.destroy(!0), this.container.destroy(!0), this.btnContinue = null, this.btnRestart = null, this.panel = null, this.container = null, t.prototype.destroy.call(this, !0) }, _t(e, [{ key: "height", get: function() { return this.panel.height + this.panel.y } }, { key: "width", get: function() { return this.panel.width } }]), e }(Phaser.Group),
                kt = function() {
                    function t(t, e) { for (var n = 0; n < e.length; n++) { var i = e[n];
                            i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i) } } return function(e, n, i) { return n && t(e.prototype, n), i && t(e, i), e } }(); var Tt = function(t) {
                    function e(n) { var i = n.game,
                            o = n.message;
                        n.onClose, n.onCloseScope;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var a = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, i));
                        a.game.controller.config.getIntroMessageById(o); return a.background = new K({ game: i, colour: "#000000", alpha: .3 }), a.add(a.background), a.container = a.game.make.group(), a.add(a.container), a.panel = a.game.make.image(0, 0, "ui", "panel_generic"), a.container.add(a.panel), a.copy = q(a.game, E, 27, R), a.copy.text = a.game.copy.getCopy("developed_by").toUpperCase(), a.copy.y = 50, a.copy.x = .5 * a.panel.width - .5 * a.copy.width, a.container.add(a.copy), a.logo = a.game.make.image(0, 0, "logo_forestrygames"), a.logo.anchor.set(.5, 0), a.logo.x = a.panel.width / 2, a.logo.y = a.copy.y + a.copy.height, a.container.add(a.logo), a.btnClose = new tt({ game: a.game, id: "btn_continue", skin: "btn_close" }), a.btnClose.y = 0, a.btnClose.x = .92 * a.panel.width, a.btnClose.onInputDown.add(a.handleClose, a), a.container.addChild(a.btnClose), a.panel.height = a.logo.y + a.logo.height + 100, a.game.scale.onSizeChange.add(a.handleScreenResize, a), a.fixedToCamera = !0, a.handleScreenResize(), a } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                        t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.handleScreenResize = function() { this.container.x = .5 * this.game.width - .5 * this.width, this.container.y = .5 * this.game.height - .5 * this.height }, e.prototype.handleClose = function() { this.game.controller.closeGameCredits() }, e.prototype.destroy = function() { this.game.scale.onSizeChange.remove(this.handleScreenResize, this), this.btnClose.onInputDown.remove(this.handleClose, this), this.btnClose.destroy(!0), this.logo.destroy(!0), this.panel.destroy(!0), this.container.destroy(!0), this.btnClose = null, this.logo = null, this.panel = null, this.container = null, t.prototype.destroy.call(this, !0) }, kt(e, [{ key: "height", get: function() { return this.panel.height + this.panel.y } }, { key: "width", get: function() { return this.panel.width } }]), e }(Phaser.Group),
                xt = function() {
                    function t(t, e) { for (var n = 0; n < e.length; n++) { var i = e[n];
                            i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i) } } return function(e, n, i) { return n && t(e.prototype, n), i && t(e, i), e } }(); var Et = function(t) {
                    function e(n) { var i = n.game;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var o = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, i)); return o.game = i, o.background = o.game.make.sprite(0, 0, "rotate", "rotate_screen_bg.jpg"), o.background.inputEnabled = !0, o.add(o.background), o.iconNo = o.game.make.sprite(0, 0, "rotate", "icon_no.png"), o.iconNo.anchor.set(.5), o.iconNo.scale.set(.5), o.add(o.iconNo), o.iconRotate = o.game.make.sprite(0, 0, "rotate", "icon_rotate.png"), o.iconRotate.anchor.set(.5, 0), o.iconRotate.scale.set(.5), o.add(o.iconRotate), o.iconYes = o.game.make.sprite(0, 0, "rotate", "icon_yes.png"), o.iconYes.anchor.set(.5), o.iconYes.scale.set(.5), o.add(o.iconYes), o.apple = o.game.make.sprite(0, 0, "rotate", "rotate_apple.png"), o.apple.anchor.set(1, .5), o.apple.scale.set(.5), o.add(o.apple), o.onion = o.game.make.sprite(0, 0, "rotate", "rotate_onion.png"), o.onion.anchor.set(0, .5), o.onion.scale.set(.5), o.add(o.onion), o.game.scale.onSizeChange.add(o.handleScreenResize, o), o.handleScreenResize(), o } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                        t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.handleScreenResize = function() { this.iconNo.position.set(.5 * this.game.width, .25 * this.game.height), this.iconRotate.position.set(.5 * this.game.width, .5 * this.game.height), this.iconYes.position.set(.5 * this.game.width, .75 * this.game.height), this.apple.position.set(this.game.width, .25 * this.game.height), this.onion.position.set(0, .6 * this.game.height), this.background.width = this.game.width, this.background.height = this.game.height }, e.prototype.destroy = function() { this.background.destroy(!0), this.game.scale.onSizeChange.remove(this.handleScreenResize, this), this.background = null, t.prototype.destroy.call(this, !0) }, xt(e, [{ key: "height", get: function() { return this.background.height } }, { key: "width", get: function() { return this.background.width } }]), e }(Phaser.Group),
                Ot = "VIEW_SCREEN_INSTRUCTIONS",
                Pt = Object.assign || function(t) { for (var e = 1; e < arguments.length; e++) { var n = arguments[e]; for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (t[i] = n[i]) } return t }; var At = function(t) {
                function e(n) {! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var i = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, n)); return i.previousStates = [], i.state = null, i.enabled = !1, i.active = !0, i.visible = !1, i.screenIsRotated = !1, i.alpha = 0, i.bindedHandleButtonInteraction = i.handleButtonInteraction.bind(i), i } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.init = function(t) { this.hudButtons = new nt(this.game), this.hudButtons.init(t), this.createModal(), this.add(this.hudButtons), this.sendToBack(this.hudButtons), this.enable() }, e.prototype.fadeIn = function() { this.alpha = 0, this.visible = !0, this.game.add.tween(this).to({ alpha: 1 }, 250).start() }, e.prototype.isWelcomeScreen = function() { return null === this.state || this.state.id === e.WELCOME }, e.prototype.setScreenIsRotated = function(t) { this.screenIsRotated = t }, e.prototype.show = function() { this.visible = !0 }, e.prototype.hide = function() { this.visible = !0 }, e.prototype.enable = function() { this.enabled = !0 }, e.prototype.disable = function() { this.enabled = !1 }, e.prototype.activate = function(t) { var n = t.id,
                        i = void 0 === n ? e.PLAYING : n,
                        o = t.isModal,
                        a = void 0 !== o && o,
                        s = this.game.stage.children.length,
                        r = this.screenIsRotated ? s - 2 : s - 1;
                    this.game.stage.addChildAt(this, r), this.active = !0, this.configure({ id: i, isModal: a }), this.visible = !0, this.game.scale.onSizeChange.add(this.positionElements, this) }, e.prototype.deactivate = function() { this.reset(), this.active = !1, this.visible = !1, this.game.scale.onSizeChange.remove(this.positionElements, this), this.game.stage.removeChild(this) }, e.prototype.configure = function(t) { var n = t.id,
                        i = void 0 === n ? e.PLAYING : n,
                        o = t.isModal,
                        a = void 0 !== o && o,
                        s = t.isVisible,
                        r = void 0 === s || s;
                    this.saveState(this.state), this.state = { id: i, isModal: a }; var h = e.STATES[this.state.id];
                    this.hudButtons.renderButtons(h, this.bindedHandleButtonInteraction), this.showModal(this.state.isModal), this.visible = r, this.positionElements() }, e.prototype.reset = function() { this.state = null, this.previousStates = [] }, e.prototype.createModal = function() {}, e.prototype.showModal = function(t) {}, e.prototype.showLevelWin = function(t) { var e = t.isLastLevel;
                    this.levelEnd = new wt({ game: this.game, isLastLevel: e }), this.add(this.levelEnd) }, e.prototype.showLevelFail = function(t) { var e = t.totalLevelScore,
                        n = t.newGameScore,
                        i = t.collectTarget;
                    this.levelEnd = new Ct({ game: this.game, totalLevelScore: e, newGameScore: n, collectTarget: i }), this.add(this.levelEnd) }, e.prototype.closeLevelEnd = function() { this.levelEnd && this.levelEnd.destroy() }, e.prototype.showGamePause = function() { this.hudGamePause = new St({ game: this.game }), this.addChild(this.hudGamePause) }, e.prototype.closeGamePause = function() { this.hudGamePause && this.hudGamePause.destroy(!0) }, e.prototype.showGameIntro = function(t, e) { this.gameIntro = new lt({ game: this.game, onClose: t, onCloseScope: e }), this.add(this.gameIntro) }, e.prototype.showGameIntroMessage = function(t, e, n) { this.gameIntro = new lt({ game: this.game, message: t, onClose: e, onCloseScope: n }), this.add(this.gameIntro) }, e.prototype.closeGameIntro = function() { this.gameIntro && this.gameIntro.destroy() }, e.prototype.showRotateScreen = function() { this.hudRotateScreen || this.game.state.current !== m && (this.hudRotateScreen = new Et({ game: this.game }), this.addChild(this.hudRotateScreen)) }, e.prototype.closeRotateScreen = function() { this.hudRotateScreen && (this.game.state.current === v && (this.game.controller.gamePaused = !1), this.game.state.current !== m && (this.hudRotateScreen.destroy(!0), this.hudRotateScreen = null)) }, e.prototype.showGameCredits = function() { this.hudGameCredits = new Tt({ game: this.game }), this.add(this.hudGameCredits) }, e.prototype.closeGameCredits = function() { this.hudGameCredits && this.hudGameCredits.destroy(!0) }, e.prototype.showGamePlayHud = function(t) { this.gamePlayHud || (this.gamePlayHud = new pt({ game: this.game, levelData: t }), this.addAt(this.gamePlayHud, 0)) }, e.prototype.hideGamePlayHud = function() { this.gamePlayHud && (this.gamePlayHud.destroy(), this.gamePlayHud = null) }, e.prototype.updateGamePlayHud = function(t, e) { this.gamePlayHud && this.gamePlayHud.updateStats(t, e) }, e.prototype.showInstructions = function() { this.gameInstructions || (this.gameInstructions = new ft({ game: this.game }), this.gameInstructions.onClose.add(this.handleInstructionClose, this), this.add(this.gameInstructions)) }, e.prototype.handleInstructionClose = function() { this.gameInstructions.onClose.remove(this.handleInstructionClose, this), this.gameInstructions = null }, e.prototype.updateTimeProgress = function(t) {}, e.prototype.showTimer = function() {}, e.prototype.hideTimer = function() {}, e.prototype.positionElements = function() { var t = this.game.screenPaddingX,
                        e = this.game.screenPaddingY;
                    this.hudButtons.positionButtonGroups(t, e), this.modalBG && (this.modalBG.width = this.game.width, this.modalBG.height = this.game.height, this.modalBG.position.set(0)), this.timer && this.timer.position.set(.5 * (this.game.width - this.timer.width), e) }, e.prototype.handleButtonInteraction = function(t) { this.handleSelectedButton(t.id) }, e.prototype.handleSelectedButton = function(t) { if (this.game.sounds.checkAudioContext(), this.enabled && !this.screenIsRotated) switch (t) {
                        case "btn_play":
                            this.game.track("GAME_PLAY"), this.game.controller.showGameIntro(); break;
                        case "btn_pause":
                            this.game.track("GAME_PAUSE"), this.game.controller.pauseGame(); break;
                        case "btn_levelend_continue":
                            this.configure({ id: e.EMPTY }), this.game.controller.nextLevel(); break;
                        case "btn_paused_continue":
                            this.game.track("GAME_RESUME"), this.configure({ id: e.PLAYING }), this.game.controller.resumeGame(); break;
                        case "btn_gameend_restart":
                            this.game.track("GAME_REPLAY"), this.configure({ id: e.EMPTY }), this.game.controller.restartGame(); break;
                        case "btn_paused_restart":
                            this.configure({ id: e.EMPTY }), this.game.controller.restartGame(), this.game.track("GAME_RESTART"); break;
                        case "btn_paused_credits":
                            this.configure({ id: e.CREDITS, isModal: !1 }), this.game.controller.showCredits(), this.game.track("VIEW_SCREEN_CREDITS"); break;
                        case "btn_home":
                            this.game.track("GAME_EXIT"), this.game.controller.quitGame(); break;
                        case "btn_help":
                            console.log("SHOW INSTRUCTIONS"), this.showInstructions(); break;
                        case "btn_sound":
                            this.game.track(this.game.controller.uiModel.getIsMuted() ? "AUDIO_ON" : "AUDIO_OFF"), this.game.controller.uiModel.toggleAudio() } else console.info("HUD DISABLED : ignoring button", t) }, e.prototype.saveState = function(t) { t && this.previousStates.push(Pt({}, t)) }, e.prototype.retrievePreviousState = function() { return this.previousStates.pop() || null }, e.prototype.destroy = function() {!(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0], arguments[1];
                    t.prototype.destroy.call(this, !0) }, e }(Phaser.Group);
            At.EMPTY = "EMPTY", At.WELCOME = "WELCOME", At.PAUSE = "PAUSE", At.CREDITS = "CREDITS", At.PLAYING = "PLAYING", At.LEVELEND = "LEVELEND", At.GAMEEND = "GAMEEND", At.CUTSCENE = "GAMEEND", At.STATES = { EMPTY: [], WELCOME: ["help", "sound"], PAUSE: ["back", "sound"], CREDITS: ["home", "sound"], PLAYING: ["pause", "sound"], LEVELEND: ["home", "sound"], GAMEEND: ["sound"], GAMEOVER: ["home", "sound"], CUTSCENE: ["sound"], GAMEOVER_BILLY: ["home", "sound"] }; var It = At; var Dt = function(t) {
                function e() { return function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e),
                        function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.apply(this, arguments)) } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.init = function(t) {}, e.prototype.preload = function(t) {}, e.prototype.create = function(t) { this.game = t, this.background = this.game.make.image(0, 0, "bg_main"), this.background.anchor.set(.5, .5), this.game.add.existing(this.background), this.container = this.game.add.group(), this.logo = this.game.make.image(0, 0, "logo_game"), this.logo.anchor.set(.5), this.logo.scale.set(.6), this.logo.position.set(.5 * this.game.defaultWidth, .25 * this.game.defaultHeight), this.cnLogo = this.game.make.image(0, 0, "logo_FG"), this.cnLogo.anchor.set(0, 1), this.cnLogo.scale.set(.5), this.cnLogo.position.set(this.cnLogo.width / 4, this.game.defaultHeight - this.cnLogo.height / 4), this.cnLogo.inputEnabled = !0, this.cnLogo.events.onInputDown.add(this.cartoonSiteLink, this), this.cnLogo.input.useHandCursor = !0, this.game.add.existing(this.cnLogo), this.createCharacters(), this.btnPlay = new tt({ game: this.game, id: "btn_play", skin: "btn_play" }), this.btnPlay.anchor.set(.5), this.btnPlay.x = .5 * this.game.defaultWidth, this.btnPlay.y = .75 * this.game.defaultHeight, this.btnPlay.onInputDown.add(this.handlePlayGame, this), this.container.add(this.btnPlay), this.game.windowEventController.handleWindowResize(), this.game.scale.onSizeChange.add(this.positionContainer, this), this.positionContainer(), this.game.add.existing(this.container), this.game.hud.activate({ id: It.WELCOME }), this.game.hud.fadeIn(), this.container.add(this.logo), this.game.sounds.playBackgroundMusic(), this.state = e.STATE_SPAWN, this.waitTime = 0, this.timer = 0, this.paused = !1, this.game.controller.gameModel.warningComplete = !1, this.game.controller.gameModel.tutorialComplete = !1, Phaser.Device.desktop || (this.bindedHandleFullscreenRequest = this.handleRequestFullscreen.bind(this), this.game.canvas.addEventListener("click", this.bindedHandleFullscreenRequest)) }, e.prototype.handleRequestFullscreen = function() { this.game.scale.startFullScreen(!1), this.game.aspectController.updateGameSize(), this.game.canvas.removeEventListener("click", this.bindedHandleFullscreenRequest) }, e.prototype.createCharacters = function() { this.apple = this.game.make.sprite(0, 0, "title_characters", "apple_walk0001.png"), this.apple.anchor.set(.5, 1), this.apple.animations.add("run", Phaser.Animation.generateFrameNames("apple_walk", 0, 6, ".png", 4), 24, !0), this.apple.animations.play("run"), this.apple.position.set(-250, .78 * this.game.defaultHeight), this.container.add(this.apple), this.onion = this.game.make.sprite(0, 0, "title_characters", "onion_walk0001.png"), this.onion.anchor.set(.5, 1), this.onion.animations.add("run", Phaser.Animation.generateFrameNames("onion_walk", 0, 6, ".png", 4), 24, !0), this.onion.animations.play("run"), this.onion.position.set(-250, .78 * this.game.defaultHeight), this.container.add(this.onion), this.cat = this.game.make.sprite(0, 0, "title_characters", "cat_walk0001.png"), this.cat.anchor.set(.5, 1), this.cat.animations.add("run", Phaser.Animation.generateFrameNames("cat_walk", 0, 3, ".png", 4), 24, !0), this.cat.animations.play("run"), this.cat.position.set(-250, .78 * this.game.defaultHeight), this.container.add(this.cat) }, e.prototype.positionContainer = function() { var t = .5 * (this.game.width - this.game.defaultWidth);
                    this.background.scale.set(Math.max(this.game.height / this.game.defaultHeight, this.game.width / this.game.defaultWidth)), this.background.position.set(this.game.width / 2, this.game.height / 2), this.container.position.set(t, 0) }, e.prototype.cartoonSiteLink = function() { window.open(this.game.copy.getCopy("cn_site_link"), "_blank") }, e.prototype.update = function() { this.game.controller.gamePaused || this.state === e.STATE_SPAWN && this.spawnRandomCharacter() }, e.prototype.spawnRandomCharacter = function() { var t = this.game.rnd.integerInRange(0, 2),
                        n = this.apple; switch (t) {
                        case 0:
                            n = this.apple; break;
                        case 1:
                            n = this.onion; break;
                        case 2:
                            n = this.cat } var i = -1; switch (this.game.rnd.integerInRange(0, 1)) {
                        case 0:
                            i = -1; break;
                        case 1:
                            i = 1 } var o = void 0; - 1 === i && (n.x = 1.5 * this.game.width, o = this.game.add.tween(n).to({ x: -500 }, 2e3, Phaser.Easing.Linear.None, !0), n.scale.x = -1), 1 === i && (n.x = -500, o = this.game.add.tween(n).to({ x: 1.5 * this.game.width }, 2e3, Phaser.Easing.Linear.None, !0), n.scale.x = 1), o.onComplete.add(this.randomWaitTime, this), this.state = e.STATE_RUN }, e.prototype.randomWaitTime = function() { var t = this,
                        n = this.game.rnd.integerInRange(500, 2e3);
                    this.game.time.events.add(n, function() { t.state = e.STATE_SPAWN }, this).autoDestroy = !0 }, e.prototype.handlePlayGame = function() { this.game.controller.startCutscene() }, e.prototype.shutdown = function(t) { t.scale.onSizeChange.remove(this.positionContainer, this), this.btnPlay.onInputDown.remove(this.handlePlayGame, this), this.background.destroy(!0), this.container.destroy(!0), this.logo.destroy(!0), this.apple.destroy(!0), this.onion.destroy(!0), this.cat.destroy(!0), this.btnPlay.destroy(!0), this.background = null, this.container = null, this.logo = null, this.apple = null, this.onion = null, this.cat = null, this.btnPlay = null }, e }(Phaser.State);
            Dt.STATE_SPAWN = "Welcome.STATE_SPAWN", Dt.STATE_RUN = "Welcome.STATE_RUN", Dt.STATE_WAIT = "Welcome.STATE_WAIT"; var Lt = Dt; var Mt = function() {
                function t(e) {! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.game = e, this.timePrev = 0, this.timeStep = 0, this.timeStart = 0, this.timeTotal = 0, this.active = !1, this.game.onPause.add(this.handleGamePaused, this), this.game.onResume.add(this.handleGameResumed, this), this.reset() } return t.prototype.handleGamePaused = function() { this.active && (this.timePaused = this.game.time.now) }, t.prototype.handleGameResumed = function() { this.active && (this.timePrev += this.game.time.now - this.timePaused) }, t.prototype.reset = function() { this.timePrev = this.game.time.now, this.timeStep = 0, this.timeTotal = 0, this.active = !1 }, t.prototype.start = function() { this.reset(), this.active = !0, this.timeStart = this.game.time.now }, t.prototype.stop = function() { this.active = !1 }, t.prototype.update = function() { return !1 === this.active ? 0 : (this.timeStep = this.game.time.now - this.timePrev, this.timePrev = this.game.time.now, this.timeTotal += this.timeStep, this.timeStep) }, t.prototype.destroy = function() { this.game.onPause.remove(this.handleGamePaused, this), this.game.onResume.remove(this.handleGameResumed, this), this.game = null, this.timePrev = null, this.timeStep = null, this.timeStart = null, this.timeTotal = null, this.active = !1 }, t }();
            Object.assign;! function(t) {
                function e(n) { var i = n.game,
                        o = n.spritesheet,
                        a = n.tiles,
                        s = n.offset,
                        r = n.decorations,
                        h = n.minHeight,
                        l = n.maxHeight,
                        c = n.flipTile,
                        u = void 0 !== c && c,
                        p = n.anchor,
                        d = void 0 === p ? { x: 0, y: 0 } : p;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var f = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, i)); return f.spritesheet = o, f.decorations = r, f.tiles = a, f.offset = s || { x: 0, y: 0 }, f.minHeight = h, f.maxHeight = l, f.tilesActive = [], f.tilesPool = [], f.decorationPool = [], f.tileAnchor = d, f.flipTile = u, f.fillContent(f.maxHeight), f }(function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) })(e, t), e.prototype.fillContent = function(t) { for (var e = t; e > 0;) { var n = this.generateTile();
                        n.y = e + this.offset.y - n.height, n.x = this.offset.x, this.flipTile && (n.scale.set(-1, 1), n.x += Math.abs(n.width)), this.tilesActive.push(n), this.addAt(n, 0), e = n.y } }, e.prototype.generateTile = function() { var t = this.tilesPool.shift() || this.game.make.image(); if (this.randomlyDecorateSprite(t, this.tiles), t.anchor.set(this.tileAnchor.x, this.tileAnchor.y), this.decorations && this.decorations.length > 0 && Math.random() > .5) { var e = this.decorationPool.shift() || this.game.make.image();
                        this.randomlyDecorateSprite(e, this.decorations), e.y = Math.random() > .5 ? .25 * t.height : .75 * t.y, e.x = t.width * (-1 * t.anchor.x), t.decoration = e, t.addChild(e) } return t }, e.prototype.randomlyDecorateSprite = function(t, e) { var n = e[Math.floor(Math.random() * e.length)]; return t.loadTexture(this.spritesheet, n), t }, e.prototype.updateScoll = function(t) { var e = this,
                        n = !1;
                    this.tilesActive = this.tilesActive.reduce(function(i, o) { return o.y += t, o.y > e.maxHeight ? e.clearTile(o) : i.push(o), (!1 === n || o.y < n) && (n = o.y), i }, []), n && this.fillContent(n) }, e.prototype.clearTile = function(t) { t.decoration && (this.decorationPool.push(t.decoration), t.removeChild(t.decoration), t.decoration = !1), this.remove(t), this.tilesPool.push(t) } }(Phaser.Group); var Rt = function(t) {
                function e(n) { var i = n.game,
                        o = n.dir,
                        a = void 0 === o ? 1 : o,
                        s = n.moveSpeed,
                        r = void 0 === s ? 0 : s,
                        h = n.vehicleVariations;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var l = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, i, 0, 0)); return l.game = i, l.vehicleVariations = h, l.game = i, l.dir = a, l.costume = l.game.make.sprite(0, 0, "vehicles", "car_010001.png"), l.costume.animations.add("car01", Phaser.Animation.generateFrameNames("car_01", 0, 9, ".png", 4), 24, !0), l.costume.animations.add("car02", Phaser.Animation.generateFrameNames("car_02", 0, 9, ".png", 4), 24, !0), l.costume.animations.add("truck01", Phaser.Animation.generateFrameNames("truck_01", 0, 2, ".png", 4), 24, !0), l.costume.animations.add("truck02", Phaser.Animation.generateFrameNames("truck_02", 0, 2, ".png", 4), 24, !0), l.costume.animations.add("van01", Phaser.Animation.generateFrameNames("van_01", 0, 2, ".png", 4), 24, !0), l.costume.animations.add("van02", Phaser.Animation.generateFrameNames("van_02", 0, 2, ".png", 4), 24, !0), l.chooseRandomVehicle(), l.addChild(l.costume), l.OVERALL_HEIGHT = l.costume.height, l.OVERALL_WIDTH = l.costume.width, l.START_HEIGHT = 50, l.WIDTH = 140, l.HEIGHT = 120, l.OFFSET = 10, l.scale.set(l.dir, 1), l.moveSpeed = r, l } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.move = function(t) { var e = this.moveSpeed * t;
                    this.position.x += e * this.dir, this.checkOutOfBounds() }, e.prototype.getWorldBounds = function() { var t = this.costume.getBounds(); return t.width = .95 * t.width, t.x += .025 * t.width, t.y += this.game.camera.view.y, t }, e.prototype.stopAnimation = function() { this.costume.animations.stop() }, e.prototype.startAnimation = function() { this.costume.animations.play(this.vehicleType, 24, !0) }, e.prototype.chooseRandomVehicle = function() { var t = this.game.rnd.integerInRange(1, this.vehicleVariations),
                        e = this.game.rnd.integerInRange(1, 2); switch (t) {
                        case 1:
                            this.costume.animations.play("car0" + e), this.vehicleType = "car0" + e; break;
                        case 2:
                            this.costume.animations.play("truck0" + e), this.vehicleType = "truck0" + e; break;
                        case 3:
                            this.costume.animations.play("van0" + e), this.vehicleType = "van0" + e } }, e.prototype.getInnerVehicleBounds = function() { var t = this,
                        e = [],
                        n = []; return (e = this.game.controller.config.getVehicleBounds(this.vehicleType)).forEach(function(e, i) { var o = e.x + t.position.x;
                        n.push({ x: o, y: e.y + t.position.y, width: e.width, height: e.height, fixPosition: e.y + +t.position.y + e.fixPosition }) }), -1 === this.dir && n.forEach(function(t, i) { var o = t.x;
                        0 !== i && (o = n[i - 1].x - e[i - 1].width), t.x = o }), n }, e.prototype.checkOutOfBounds = function() { 1 === this.dir ? this.position.x - this.costume.width - 25 > this.game.width && (this.position.x = -this.costume.width - this.game.rnd.integerInRange(5, 40), this.chooseRandomVehicle()) : this.position.x + this.costume.width - 25 < 0 && (this.position.x = 1.25 * this.game.width + this.costume.width + this.game.rnd.integerInRange(5, 40), this.chooseRandomVehicle()) }, e }(Phaser.Graphics); var jt = function(t) {
                    function e(n) { var i = n.game,
                            o = n.rowNum,
                            a = n.carCount,
                            s = void 0 === a ? 2 : a,
                            r = n.minMoveSpeed,
                            h = n.maxMoveSpeed,
                            l = n.vehicleVariations,
                            c = void 0 === l ? 3 : l;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var u = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, i));
                        u.cars = [], u.game = i, u.carCount = s, u.vehicleVariations = c, u.MIN_MOVE_SPEED = r, u.MAX_MOVE_SPEED = h, u.rowNum = o; var p = 1; return 0 !== o && o % 2 == 1 && (p = -1), u.dir = p, u.MOVE_SPEED = u.game.rnd.integerInRange(u.MIN_MOVE_SPEED + 10 * (o + 1), u.MAX_MOVE_SPEED + 10 * (o + 1)), u.game.log("MOVE SPEED", "Lane : " + u.rowNum, "Move Speed : " + u.MOVE_SPEED, "Direction : " + u.dir, "Car count : " + u.carCount), u.rowPosY = u.game.sceneHeight - 82, u.rowPosY -= 239 * (u.rowNum + 1), u.createCars(), u } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                        t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.createCars = function() { for (var t = 0; t < this.carCount; t++) { var e = new Rt({ game: this.game, dir: this.dir, moveSpeed: this.MOVE_SPEED, vehicleVariations: this.vehicleVariations });
                            this.cars.push(e); var n = 0;
                            n = 0 === t ? this.game.rnd.integerInRange(0, this.game.defaultWidth / 3) : this.game.rnd.integerInRange(this.game.defaultWidth / 3 * 2, this.game.defaultWidth), n += this.game.rnd.integerInRange(200, 300), e.position.x = n, e.position.y = this.rowPosY, this.addChild(e) } }, e.prototype.random = function(t, e) { return this.game.rnd.integerInRange(t, e) }, e.prototype.updateCars = function(t) { var e = this;
                        this.cars.forEach(function(n) { n.move(t, e.MOVE_SPEED) }) }, e.prototype.stopCars = function() { this.cars.forEach(function(t) { t.stopAnimation() }) }, e.prototype.startCars = function() { this.cars.forEach(function(t) { t.startAnimation() }) }, e }(Phaser.Group),
                Nt = Object.assign || function(t) { for (var e = 1; e < arguments.length; e++) { var n = arguments[e]; for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (t[i] = n[i]) } return t }; var Gt = function(t) {
                function e(n) { var i = n.game,
                        o = n.levelData;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var a = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, i)); return a.game = i, a.levelData = Nt({}, o), a.rows = [], a.fastLaneCount = a.levelData.fastLaneCount, a.fastLanesSpawned = 0, a.createLevel(), a.startRoad = a.game.make.sprite(0, 0, "road_start"), a.startRoad.position.set(0, i.sceneHeight - a.startRoad.height), a.roadLanes = a.game.make.sprite(0, 0, "road_lane_tile"), a.createTiles(), a.addChild(a.startRoad), a.endRoad = a.game.make.sprite(0, 0, "road_end"), a.addChild(a.endRoad), a.addChild(a.laneContainer), a } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.createTiles = function() { this.laneContainer = this.game.make.group(); for (var t = 0; t < this.game.defaultWidth; t += this.roadLanes.width)
                        for (var e = 319; e < this.game.sceneHeight - 120; e += this.roadLanes.height) { var n = this.game.make.sprite(t, e, "road_lane_tile");
                            this.laneContainer.add(n) } }, e.prototype.createLevel = function() { this.createRows() }, e.prototype.createRows = function() { for (var t = 0; t < this.levelData.laneCount; t++) { if (0 != t)
                            if (this.fastLanesSpawned < this.fastLaneCount)
                                if (this.game.rnd.integerInRange(0, 10) > 3) { var e = new jt({ game: this.game, rowNum: t, carCount: 1, minMoveSpeed: this.levelData.fastLaneMinSpeed, maxMoveSpeed: this.levelData.fastLaneMaxSpeed, vehicleVariations: this.levelData.vehicleVariations });
                                    this.rows.push(e), this.fastLanesSpawned++; continue } var n = new jt({ game: this.game, rowNum: t, minMoveSpeed: this.levelData.minMoveSpeed, maxMoveSpeed: this.levelData.maxMoveSpeed, vehicleVariations: this.levelData.vehicleVariations });
                        this.rows.push(n) } }, e.prototype.updateMap = function(t) { this.rows.forEach(function(e) { e.updateCars(t) }) }, e.prototype.stopCarAnimations = function() { this.rows.forEach(function(t) { t.stopCars() }) }, e.prototype.startCarAnimations = function() { this.rows.forEach(function(t) { t.startCars() }) }, e.prototype.getRowPosY = function(t) { return this.rows[t].rowPosY }, e.prototype.destroy = function() { this.rows.forEach(function(t) { t.destroy(!0) }), this.rows = null, this.laneContainer.destroy(!0), t.prototype.destroy.call(this) }, e }(Phaser.Group); var Bt = function() {
                function t(e) { var n = e.game;
                    e.debug;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.game = n, this.debugger = this.game.make.graphics() } return t.prototype.clearDebugger = function() { this.debugger && this.debugger.clear() }, t.prototype.checkCollisions = function(t, e) { var n = this,
                        i = t.getWorldBounds(); return this.renderBounds(i, !1), e.reduce(function(t, e) { var o = e.getWorldBounds(); return i.intersects(o) ? (n.renderBounds(o, !0), t.push(e)) : n.renderBounds(o, !1), t }, []) }, t.prototype.renderBounds = function(t, e) {}, t }(); var Wt = function(t) {
                function e(n) { var i = n.game,
                        o = n.width,
                        a = n.height,
                        s = n.debug,
                        r = void 0 !== s && s;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var h = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, i)); return h.inputEnabled = !0, h.hitArea = new Phaser.Rectangle(0, 0, o || h.game.defaultWidth, a || h.game.defaultHeight), h.tapsRegistered = 0, h.onTap = new Phaser.Signal, r && (h.debugGraphic = h.game.make.graphics(), h.debugGraphic.beginFill(16711680, .25), h.debugGraphic.drawRect(0, 0, h.hitArea.width, h.hitArea.height), h.addChild(h.debugGraphic)), h } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.reset = function() { this.tapsRegistered = 0 }, e.prototype.activate = function() { this.events.onInputDown.add(this.handleTap, this) }, e.prototype.deactivate = function() { this.events.onInputDown.remove(this.handleTap, this) }, e.prototype.handleTap = function(t, e) { this.tapsRegistered++; var n = this.game.input.activePointer.x,
                        i = this.game.input.activePointer.y;
                    this.onTap.dispatch({ taps_registered: this.tapsRegistered, x: n, y: i }) }, e.prototype.destroy = function() { this.deactivate(), t.prototype.destroy.call(this, !0) }, e }(Phaser.Sprite);! function(t) {
                function e(n) { var i = n.game;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var o = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, i)); return o.loadTexture("instructions", "finger_tap_icon"), o.duration = 0, o }(function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) })(e, t), e.prototype.update = function() { this.duration += this.game.time.elapsedMS; var t = Math.sin(.01 * this.duration) + 1;
                    this.alpha = t / 2 } }(Phaser.Sprite); var Ht = function() {
                function t(t, e) { for (var n = 0; n < e.length; n++) { var i = e[n];
                        i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i) } } return function(e, n, i) { return n && t(e.prototype, n), i && t(e, i), e } }();! function(t) {
                function e(n) {! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var i = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, n)); return i.background = new K({ game: n, colour: "#000000", alpha: .5 }), i.add(i.background), i.container = i.game.make.group(), i.add(i.container), i.panel = i.game.make.image(0, 0, "ui", "panel_generic"), i.container.add(i.panel), i.count = q(i.game, x, 350, L), i.count.y = 50, i.count.x = i.panel.width / 2, i.count.text = 3, i.container.add(i.count), i.panel.height = i.count.y + 500, i.game.scale.onSizeChange.add(i.handleScreenResize, i), i.fixedToCamera = !0, i.handleScreenResize(), i.duration = 0, i.onComplete = new Phaser.Signal, i }(function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) })(e, t), e.prototype.handleScreenResize = function() { this.container.x = .5 * this.game.width - .5 * this.width, this.container.y = .5 * this.game.height - .5 * this.height }, e.prototype.update = function() { this.count.x = .5 * this.panel.width - .5 * this.count.width, this.duration < 3e3 ? (this.duration += this.game.time.elapsedMS, this.count.text = 3 - Math.floor(this.duration / 1e3)) : this.dispatchedComplete || (this.count.text = 0, this.dispatchedComplete = !0, this.onComplete.dispatch()) }, e.prototype.destroy = function() { t.prototype.destroy.call(this, !0) }, Ht(e, [{ key: "height", get: function() { return this.panel.height + this.panel.y } }, { key: "width", get: function() { return this.panel.width } }]) }(Phaser.Group);! function(t) {
                function e(n) { var i = n.game;
                    n.mapController, n.dennis;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var o = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, i)); return o.onComplete = new Phaser.Signal, o.active = !0, o.control = o.game.make.image(0, 0, ""), o }(function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) })(e, t), e.prototype.nextStep = function() { switch (this.state) {
                        case e.STATE_IDLE:
                    } }, e.prototype.dispatchComplete = function() { this.active = !1, this.countdown.onComplete.remove(this.dispatchComplete, this), this.onComplete.dispatch() }, e.prototype.update = function() { this.state }, e.prototype.destroy = function() { this.countdown.destroy(), t.prototype.destroy.call(this, !0) } }(Phaser.Group); var zt = function(t) {
                    function e(n) { var i = n.game,
                            o = n.gameState,
                            a = n.character,
                            s = void 0 === a ? "apple" : a;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var r = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, i, 0, 0)); return r.character = s, r.costume = r.game.make.sprite(0, 0, "cat", "cat_stand.png"), r.costume.animations.add("jump", Phaser.Animation.generateFrameNames("cat_jump", 0, 14, ".png", 4), 30, !1), r.costume.animations.add("lose", Phaser.Animation.generateFrameNames("cat_lose", 0, 2, ".png", 4), 30, !0), r.game = i, r.gameState = o, r.JUMP_TIME = 400, r.costume.anchor.set(.5, 1), r.costume.scale.set(.5), r.addChild(r.costume), r.onPlatform = !0, r.state = e.STATE_START, r.currentRow = -1, r } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                        t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.jump = function(t) { if (this.onPlatform && this.state !== e.STATE_LOSE && this.state !== e.STATE_WIN) { this.onPlatform = !1, this.state = e.STATE_JUMP, this.game.sounds.playSFX("jump"), this.currentRow++; var n = this.y; if (t) n -= this.y - 319 * .8;
                            else n -= this.y - this.gameState.mapController.getRowPosY(this.currentRow) - 119.5;
                            this.tween = this.game.add.tween(this).to({ y: n }, this.JUMP_TIME, Phaser.Easing.Quadratic.InOut, !0), this.tween.onComplete.add(this.onJumpEnd, this), this.costume.animations.stop(), this.costume.animations.play("jump") } }, e.prototype.getWorldBounds = function() { var t = this.costume.getBounds(); return t.y += this.game.camera.view.y, t }, e.prototype.onJumpEnd = function() { this.onPlatform = !0, this.gameState.checkLanding(this.currentRow) }, e.prototype.setMovement = function(t) { var n = t.dir,
                            i = t.moveSpeed;
                        this.dir = n, this.moveSpeed = i, this.state = e.STATE_LAND, this.costume.loadTexture("cat", "cat_stand.png") }, e.prototype.moveWithCar = function() { this.x += this.dir * this.moveSpeed * this.gameState.timeStep }, e.prototype.updateHeroMovement = function() { switch (this.state) {
                            case e.STATE_LAND:
                                this.moveWithCar(), this.checkOutOfBounds() } }, e.prototype.checkOutOfBounds = function() { this.state === e.STATE_LAND && (this.x + .75 * this.costume.width < 0 || this.x - .75 * this.costume.width > this.game.defaultWidth) && (this.game.sounds.playSFX(this.character + "_lose"), this.onLoseEnd()) }, e.prototype.updatePauseStatus = function(t) { t ? (this.costume.animations.paused = !0, this.tween && this.tween.pause()) : (this.costume.animations.paused = !1, this.tween && this.tween.resume()) }, e.prototype.handleLose = function() { var t = this;
                        this.state = e.STATE_LOSE, this.costume.animations.play("lose", 24, !0), this.game.sounds.playSFX(this.character + "_lose"), this.loopCount = 0, this.costume.animations.getAnimation("lose").onLoop.add(function() { t.loopCount++, t.loopCount > 5 && t.onLoseEnd() }, this) }, e.prototype.onLoseEnd = function() { this.game.controller.showLevelEnd({ win: !1 }) }, e.prototype.handleWin = function() { this.state = e.STATE_WIN }, e.prototype.destroy = function() { this.costume.destroy(!0), this.costume = null, this.state = null, t.prototype.destroy.call(this, !0) }, e }(Phaser.Sprite),
                Ft = zt;
            zt.STATE_START = "Hero.STATE_START", zt.STATE_JUMP = "Hero.STATE_JUMP", zt.STATE_LAND = "Hero.STATE_LAND", zt.STATE_LOSE = "Hero.STATE_LOSE", zt.STATE_WIN = "Hero.STATE_WIN"; var Ut = function() {
                function t(t, e) { for (var n = 0; n < e.length; n++) { var i = e[n];
                        i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i) } } return function(e, n, i) { return n && t(e.prototype, n), i && t(e, i), e } }(); var Vt = function(t) {
                function e(n) { var i = n.game;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var o = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, i)); return o.game = i, o.container = o.game.make.group(), o.fixedToCamera = !0, o.background = new K({ game: o.game, colour: "#000000", alpha: .7, blockInput: !0 }), o.add(o.background), o.panel = o.game.make.image(0, 0, "ui", "panel_warning"), o.panel.scale.set(.8), o.btnPlay = new tt({ game: o.game, id: "btn_play", skin: "btn_play", defaultScale: .5 }), o.btnPlay.scale.set(.5), o.btnPlay.position.set(.5 * o.panel.width, .5 * o.panel.height), o.titleCopy = q(o.game, x, 84, j, 0, 0, { align: "center", stroke: G, strokeThickness: 6 }), o.titleCopy.text = o.game.copy.getCopy("warning"), o.titleCopy.anchor.set(.5), o.titleCopy.position.set(.5 * o.panel.width, o.panel.y), o.titleCopy.setShadow(3, 3, "rgba(0,0,0,0.5)", 0), o.bodyCopy = q(o.game, x, 32, N, 0, 0, { align: "center", stroke: G, strokeThickness: 6, wordWrap: !0, wordWrapWidth: .9 * o.panel.width }), o.bodyCopy.text = o.game.copy.getCopy("warning_body"), o.bodyCopy.anchor.set(.5), o.bodyCopy.position.set(.5 * o.panel.width, o.panel.y + .2 * o.panel.height), o.bodyCopy.setShadow(3, 3, "rgba(0,0,0,0.5)", 0), o.container.add(o.panel), o.container.add(o.btnPlay), o.container.add(o.titleCopy), o.container.add(o.bodyCopy), o.add(o.container), o.game.scale.onSizeChange.add(o.handleScreenResize, o), o.handleScreenResize(), o } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.handleScreenResize = function() { this.container.x = .5 * this.game.width - .5 * this.width, this.container.y = .5 * this.game.height - .5 * this.height, this.background.width = this.game.width, this.background.height = this.game.height }, e.prototype.destroy = function() { this.btnPlay.onInputDown.removeAll(), this.game.scale.onSizeChange.remove(this.handleScreenResize, this), t.prototype.destroy.call(this, !0) }, Ut(e, [{ key: "height", get: function() { return this.panel.height + this.panel.y } }, { key: "width", get: function() { return this.panel.width } }]), e }(Phaser.Group); var qt = function(t) {
                function e() { return function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e),
                        function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.apply(this, arguments)) } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.init = function(t) { var e = t.levelData,
                        n = (t.showTutorial, t.playerLevel);
                    this.levelData = e, this.playerLevel = n, this.game.log("Start Level", "level : " + this.playerLevel, this.levelData), this.laneCount = this.levelData.laneCount, this.rowGap = 120, this.rows = [], this.currentLane = -1, this.game.sounds.stopBackgroundMusic(), this.game.sounds.playGameMusic(), this.gameContainer = this.game.add.group() }, e.prototype.create = function(t) { this.game = t, this.game.sceneHeight = 401 + this.laneCount / 2 * 478, this.game.rowCount = this.laneCount, this.createControllers(), this.createListeners(), this.createScene(), 0 == this.game.controller.gameModel.tutorialComplete && (this.game.hud.showInstructions(), console.log("show tutorail"), this.game.hud.gameInstructions.onClose.add(this.handleTutorialComplete, this, 1)), !1 === this.game.controller.gameModel.warningComplete && (this.warningPanel = new Vt({ game: this.game }), this.warningPanel.btnPlay.onInputDown.add(this.handleWarningComplete, this), this.game.add.existing(this.warningPanel), this.warningPanel.position.set(0, 0), this.updatePauseStatus({ paused: !0, fromUI: !1 })), this.handleStartGame() }, e.prototype.createControllers = function() { this.collisionController = new Bt({ game: this.game, debug: !0 }), this.collisionController.debugger && this.game.add.existing(this.collisionController.debugger), this.timeController = new Mt(this.game), this.mapController = new Gt({ game: this.game, levelData: this.levelData }), this.gameContainer.add(this.mapController.roadLanes), this.gameContainer.addChild(this.mapController), this.gameContainer.addMultiple(this.mapController.rows) }, e.prototype.createListeners = function() { this.game.controller.uiModel.onPauseIsChanged.add(this.updatePauseStatus, this), this.isPaused = !1, this.tapArea = new Wt({ game: this.game, width: this.game.width, height: this.game.height, debug: !1 }), this.tapArea.onTap.add(this.handleUserInput, this), this.tapArea.fixedToCamera = !0, this.game.add.existing(this.tapArea), this.bindedWindowBlur = this.handleWindowBlur.bind(this), window.addEventListener("blur", this.bindedWindowBlur), this.jumpKey = this.game.input.keyboard.addKey(Phaser.Keyboard.UP), this.jumpKey.onDown.add(this.handleUserInput, this), this.game.windowEventController.handleWindowResize(), this.game.scale.onSizeChange.add(this.handleSizeChange, this), this.handleSizeChange() }, e.prototype.createScene = function() { var t = this.game.controller.gameModel.getChosenCharacter(); switch (this.game.hero = new Ft({ game: this.game, gameState: this, character: t }, this), this.game.hero.position.set(.5 * this.game.defaultWidth, 0), this.game.hero.y = this.game.sceneHeight - .25 * this.game.hero.costume.height, this.chosenCharacter = this.game.make.sprite(0, 0, t), this.chosenCharacter.animations.add("idle", Phaser.Animation.generateFrameNames(t + "_lose", 0, 9, ".png", 4), 30, !0), t) {
                        case "apple":
                            this.chosenCharacter.animations.add("win", Phaser.Animation.generateFrameNames(t + "_win", 0, 41, ".png", 4), 24, !0); break;
                        case "onion":
                            this.chosenCharacter.animations.add("win", Phaser.Animation.generateFrameNames(t + "_win", 0, 19, ".png", 4), 24, !0) } this.chosenCharacter.anchor.set(.5, 1), this.chosenCharacter.scale.set(.7), this.chosenCharacter.animations.play("idle", 24, !0), this.chosenCharacter.position.set(.5 * this.game.defaultWidth, 240), this.gameContainer.add(this.chosenCharacter), this.gameContainer.addChildAt(this.game.hero, 0), this.gameContainer.bringToTop(this.game.hero), this.createCamera() }, e.prototype.createCamera = function() { this.game.world.setBounds(0, 0, this.game.width, this.game.sceneHeight * this.gameContainer.scale.x), this.game.camera.follow(this.game.hero, Phaser.Camera.FOLLOW_LOCKON, .1, .1), this.game.camera.deadzone = new Phaser.Rectangle(0, 600, this.game.defaultWidth, 1) }, e.prototype.handleStartGame = function() { this.gameActive = !0, this.tapArea.activate(), this.timeController.start() }, e.prototype.handleIntroComplete = function() { this.handleStartGame() }, e.prototype.handleUserInput = function() { this.gameActive && !this.isPaused && this.game.hero.jump(this.currentLane === this.laneCount - 1) }, e.prototype.handleRestart = function() { this.game.hero.currentRow = -1, this.game.controller.restartLevel() }, e.prototype.handleLose = function() { this.game.sounds.playSFX("tyre_squeal", { volume: .3 }), this.game.sounds.playSFX("lose"), this.game.hero.handleLose(), this.mapController.stopCarAnimations() }, e.prototype.handleLevelComplete = function() { this.game.hero.state = Ft.STATE_WIN, this.game.controller.showLevelEnd({ win: !0, character: this.game.hero.character }) }, e.prototype.handleWindowBlur = function() { this.game.controller.pauseGame() }, e.prototype.handleSizeChange = function() { var t = this.game.width / this.game.defaultWidth;
                    this.gameContainer.scale.set(Math.max(1, t)), this.gameContainer.x = 0, this.gameContainer.y = this.game.height - this.game.defaultHeight, this.game.world.setBounds(0, 0, this.game.width, this.game.sceneHeight * this.gameContainer.scale.x), this.tapArea.hitArea.width = this.game.width, this.tapArea.hitArea.height = this.game.height }, e.prototype.handleWarningComplete = function() { this.updatePauseStatus({ paused: !1 }), this.game.controller.gameModel.warningComplete = !0, this.warningPanel.destroy(), this.warningPanel = null }, e.prototype.handleTutorialComplete = function() { this.game.controller.gameModel.tutorialComplete = !0, console.log("tutorial complete"), this.game.hud.gameInstructions.onClose.remove(this.handleTutorialComplete, this) }, e.prototype.update = function() {!this.isPaused && this.gameActive && (this.timeStep = this.timeController.update() / 1e3, this.game.hero.updateHeroMovement(), this.game.hero.state !== Ft.STATE_LOSE && this.mapController.updateMap(this.timeStep)) }, e.prototype.checkLanding = function(t) { if (this.currentLane = t, t < this.laneCount) { this.collisionController.clearDebugger(); var e = this.collisionController.checkCollisions(this.game.hero, this.mapController.rows[t].cars); if (e.length > 0) { var n = e[0].dir,
                                i = e[0].moveSpeed,
                                o = e[0].getInnerVehicleBounds();
                            this.fixLanding(o, n), this.game.hero.setMovement({ dir: n, moveSpeed: i }) } else this.handleLose() } else this.game.hero.visible = !1, this.game.hero.handleWin(), this.chosenCharacter.animations.play("win", 24, !1), this.game.sounds.playSFX("cat_meow"), this.chosenCharacter.animations.getAnimation("win").onComplete.add(this.handleLevelComplete, this) }, e.prototype.fixLanding = function(t, e) { var n = this,
                        i = this.game.hero.position.x;
                    t.forEach(function(t, o) { 1 === e ? i >= t.x && i <= t.x + t.width && (n.game.hero.position.y = t.fixPosition) : i <= t.x && i >= t.x - t.width && (n.game.hero.position.y = t.fixPosition) }) }, e.prototype.render = function() {}, e.prototype.updatePauseStatus = function(t) { var e = t.paused;
                    t.fromUI && 0 == e && this.warningPanel || (this.isPaused = e, this.isPaused ? (this.timeController.handleGamePaused(), this.mapController.stopCarAnimations(), this.chosenCharacter.animations.paused = !0, this.game.hero.updatePauseStatus(!0)) : (this.timeController.start(), this.game.hero.state != Ft.STATE_LOSE && this.mapController.startCarAnimations(), this.chosenCharacter.animations.paused = !1, this.game.hero.updatePauseStatus(!1), this.game.sounds.playGameMusic())) }, e.prototype.shutdown = function(t) { this.game.scale.onSizeChange.remove(this.handleSizeChange, this), window.removeEventListener("blur", this.bindedWindowBlur), this.game.controller.uiModel.onPauseIsChanged.remove(this.updatePauseStatus, this), this.tapArea.onTap.remove(this.handleUserInput, this), this.jumpKey.onDown.remove(this.handleUserInput, this), this.chosenCharacter.animations.getAnimation("win").onComplete.remove(this.handleLevelComplete, this), this.game.hud.hideGamePlayHud(), this.timeController.destroy(!0), this.mapController.destroy(!0), this.tapArea.destroy(!0), this.game.hero.destroy(!0), this.chosenCharacter.destroy(!0), this.gameContainer.destroy(!0), this.gameActive = !1, this.collisionController = null, this.timeController = null, this.mapController = null, this.tapArea = null, this.jumpKey = null, this.game.hero = null, this.chosenCharacter = null, this.gameContainer = null }, e }(Phaser.State); var Yt = function(t) {
                function e() { return function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e),
                        function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.apply(this, arguments)) } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.init = function() {}, e.prototype.create = function(t) { this.game = t, this.background = this.game.make.image(0, 0, "bg_street"), this.background.anchor.set(.5, .5), this.game.add.existing(this.background), this.container = this.game.make.group(), this.createCharacters(), this.createButton(), this.createPanel(), this.game.hud.activate({ id: It.WELCOME }), this.selectedCharacter = "", this.btnPlay.visible = !1, this.selectedCharacterArrow = this.game.make.image(), this.selectedCharacterArrow.loadTexture("char_select", "char_select_arrow.png"), this.selectedCharacterArrow.anchor.set(.5), this.selectedCharacterArrow.visible = !1, this.game.world.bringToTop(this.container), this.game.add.existing(this.selectedCharacterArrow), this.game.sounds.playBackgroundMusic(), t.windowEventController.handleWindowResize(), t.scale.onSizeChange.add(this.positionContainer, this), this.positionContainer() }, e.prototype.createCharacters = function() { this.onion = this.game.make.sprite(0, 0, "char_select", "onion_select_start0001.png"), this.onion.animations.add("start", Phaser.Animation.generateFrameNames("onion_select_start", 0, 9, ".png", 4), 24, !0), this.onion.animations.add("chosen", Phaser.Animation.generateFrameNames("onion_select_chosen", 0, 9, ".png", 4), 12, !0), this.onion.animations.add("waiting", Phaser.Animation.generateFrameNames("onion_select_not_chosen", 0, 0, ".png", 0), 24, !0), this.onion.animations.play("start"), this.onion.anchor.set(.5, 1), this.onion.inputEnabled = !0, this.onion.events.onInputDown.add(this.handleSelectOnion, this), this.onion.events.onInputOver.add(this.changeCursorPointer, this), this.onion.events.onInputOut.add(this.changeCursorNormal, this), this.onion.position.set(.65 * this.game.defaultWidth, .9 * this.game.defaultHeight), this.game.add.existing(this.onion), this.apple = this.game.make.sprite(0, 0, "char_select", "apple_select_start0001.png"), this.apple.animations.add("start", Phaser.Animation.generateFrameNames("apple_select_start", 0, 9, ".png", 4), 24, !0), this.apple.animations.add("chosen", Phaser.Animation.generateFrameNames("apple_select_chosen", 0, 9, ".png", 4), 12, !0), this.apple.animations.add("waiting", Phaser.Animation.generateFrameNames("apple_select_not_chosen", 0, 1, ".png", 0), 24, !0), this.apple.animations.play("start"), this.apple.anchor.set(.5, 1), this.apple.inputEnabled = !0, this.apple.events.onInputDown.add(this.handleSelectApple, this), this.apple.events.onInputOver.add(this.changeCursorPointer, this), this.apple.events.onInputOut.add(this.changeCursorNormal, this), this.apple.position.set(.25 * this.game.defaultWidth, .9 * this.game.defaultHeight), this.game.add.existing(this.apple) }, e.prototype.createButton = function() { this.btnPlay = new tt({ game: this.game, id: "btn_play", skin: "btn_play" }), this.btnPlay.x = .5 * this.game.defaultWidth, this.btnPlay.y = .75 * this.game.defaultHeight, this.btnPlay.anchor.set(.5), this.btnPlay.onInputDown.add(this.handlePlayGame, this), this.game.add.existing(this.btnPlay) }, e.prototype.createPanel = function() { this.mainCopy = q(this.game, x, 68, j, 0, 0, { align: "center", stroke: G, strokeThickness: 6 }), this.mainCopy.text = this.game.copy.getCopy("character_select"), this.mainCopy.anchor.set(.5), this.mainCopy.setShadow(3, 3, "rgba(0,0,0,0.5)", 0), this.game.add.existing(this.mainCopy) }, e.prototype.handleSelectOnion = function() { this.selectedCharacter !== e.SELECTED_ONION && (this.btnPlay.visible || (this.btnPlay.visible = !0, this.selectedCharacterArrow.visible = !0), this.selectedCharacter = e.SELECTED_ONION, this.selectedCharacterArrow.position.set(this.onion.x, this.onion.y - 1.1 * this.onion.height), this.onion.animations.play("chosen"), this.apple.loadTexture("char_select", "apple_select_not_chosen.png"), this.game.sounds.playSFX("onion_chosen")) }, e.prototype.handleSelectApple = function() { this.selectedCharacter !== e.SELECTED_APPLE && (this.btnPlay.visible || (this.btnPlay.visible = !0, this.selectedCharacterArrow.visible = !0), this.selectedCharacter = e.SELECTED_APPLE, this.selectedCharacterArrow.position.set(this.apple.x, this.apple.y - 1.25 * this.apple.height), this.apple.animations.play("chosen"), this.onion.loadTexture("char_select", "onion_select_not_chosen.png"), this.game.sounds.playSFX("apple_chosen")) }, e.prototype.handlePlayGame = function() { this.game.controller.gameModel.setChosenCharacter(this.selectedCharacter), this.game.controller.startNewGame() }, e.prototype.positionContainer = function() { var t = .5 * (this.game.width - this.game.defaultWidth),
                        n = Math.max(this.game.height / this.game.defaultHeight, this.game.width / this.game.defaultWidth);
                    this.background.scale.set(n), this.background.position.set(.5 * this.game.width, .5 * this.game.height); var i = 1 - n;
                    i /= 4, this.onion.position.set(.75 * this.game.width, this.game.height * (.9 - i)), this.apple.position.set(.25 * this.game.width, this.game.height * (.9 - i)), this.selectedCharacterArrow.position.set(this.selectedCharacter == e.SELECTED_APPLE ? this.apple.x : this.onion.x, this.selectedCharacter == e.SELECTED_APPLE ? this.apple.y - 1.25 * this.apple.height : this.onion.y - 1.1 * this.onion.height), this.mainCopy.position.set(.5 * this.game.width, this.game.height * (.2 + i)), this.btnPlay.position.set(.5 * this.game.width, .75 * this.game.height), this.container.position.set(t, 0) }, e.prototype.changeCursorNormal = function() { this.game.canvas.style.cursor = "default" }, e.prototype.changeCursorPointer = function() { this.game.canvas.style.cursor = "pointer" }, e.prototype.shutDown = function() { game.scale.onSizeChange.remove(this.positionContainer, this), this.apple.events.onInputDown.remove(this.handleSelectApple, this), this.onion.events.onInputDown.remove(this.handleSelectOnion, this), this.apple.events.onInputOver.remove(this.changeCursorPointer, this), this.apple.events.onInputOut.remove(this.changeCursorNormal, this), this.onion.events.onInputOver.remove(this.changeCursorPointer, this), this.onion.events.onInputOut.remove(this.changeCursorNormal, this), this.background.destroy(!0), this.container.destroy(!0), this.apple.destroy(!0), this.onion.destroy(!0), this.mainCopy.destroy(!0), this.btnPlay.destroy(!0), this.selectedCharacterArrow.destroy(!0), this.background = null, this.container = null, this.apple = null, this.onion = null, this.mainCopy = null, this.btnPlay = null, this.selectedCharacterArrow = !0, this.selectedCharacter = null }, e }(Phaser.State);
            Yt.SELECTED_ONION = "CharacterIntro.SELECTED_ONION", Yt.SELECTED_APPLE = "CharacterIntro.SELECTED_APPLE"; var Kt = Yt; var Xt = function(t) {
                function e() { return function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e),
                        function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.apply(this, arguments)) } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.init = function(t) { var e = t.character;
                    this.character = e }, e.prototype.preload = function(t) {}, e.prototype.create = function(t) { this.game = t, this.background = t.make.image(0, 0, "bg_level_end"), this.background.anchor.set(0, 1), this.game.add.existing(this.background), this.container = t.add.group(), this.game.hud.activate({ id: It.LEVELEND }), this.game.hud.fadeIn(), this.game.sounds.playSFX("musical_moment"), this.createCharacters(), this.createText(), this.game.windowEventController.handleWindowResize(), this.game.scale.onSizeChange.add(this.positionContainer, this), this.positionContainer(), this.btnPlay = new tt({ game: this.game, id: "btn_play", skin: "btn_play" }), this.btnPlay.x = .5 * this.game.defaultWidth, this.btnPlay.y = .75 * this.game.defaultHeight, this.btnPlay.onInputDown.add(this.handlePlayGame, this), this.container.add(this.btnPlay), this.game.sounds.playGameMusic() }, e.prototype.createCharacters = function() { switch (this.character) {
                        case "apple":
                            this.winCostume = this.game.make.sprite(0, 0, "level_end_apple", "apple_dance0001.png"), this.winCostume.animations.add("win", Phaser.Animation.generateFrameNames("apple_dance", 0, 41, ".png", 4), 24, !0), this.winCostume.anchor.set(.5, 1), this.winCostume.position.set(.3 * this.game.defaultWidth, .9 * this.game.defaultHeight); break;
                        case "onion":
                            this.winCostume = this.game.make.sprite(0, 0, "level_end_onion", "onion_dance0001.png"), this.winCostume.animations.add("win", Phaser.Animation.generateFrameNames("onion_dance", 0, 19, ".png", 4), 24, !0), this.winCostume.anchor.set(.5, 1), this.winCostume.position.set(.3 * this.game.defaultWidth, .9 * this.game.defaultHeight) } this.winCostume.play("win"), this.game.add.existing(this.winCostume) }, e.prototype.createText = function() { this.mainCopy = q(this.game, x, 78, j, 0, 0, { align: "center", stroke: G, strokeThickness: 6 }), this.mainCopy.text = this.game.copy.getCopy("level") + " " + this.game.controller.gameModel.getCurrentLevel() + " " + this.game.copy.getCopy("complete"), this.mainCopy.anchor.set(.5), this.mainCopy.angle = -5, this.mainCopy.setShadow(3, 3, "rgba(0,0,0,0.5)", 0), this.mainCopy.scale.set(100), this.game.add.existing(this.mainCopy), this.tweenText() }, e.prototype.tweenText = function() { this.scaleTweenDown = this.game.add.tween(this.mainCopy.scale).to({ x: .7, y: .7 }, 500, Phaser.Easing.Quartic.Out, !0), this.scaleTweenUp = this.game.add.tween(this.mainCopy.scale).to({ x: 1, y: 1 }, 150, Phaser.Easing.Quartic.Out, !1), this.scaleTweenDown.chain(this.scaleTweenUp), this.scaleTweenDown.onComplete.add(this.playStampSound, this) }, e.prototype.playStampSound = function() { this.game.sounds.playSFX("stamp") }, e.prototype.positionContainer = function() { var t = .5 * (this.game.width - this.game.defaultWidth),
                        e = .5 * (this.game.height - this.game.defaultHeight);
                    this.container.position.set(t, e); var n = Math.max(this.game.height / this.game.defaultHeight, this.game.width / this.game.defaultWidth);
                    this.background.scale.set(n), this.background.position.set(0, this.game.height); var i = 1 - n;
                    i /= 4, this.winCostume.position.set(.3 * this.game.width, this.game.height * (.9 + i)), this.mainCopy.position.set(.5 * this.game.width, .21 * this.game.height) }, e.prototype.handlePlayGame = function() { this.game.controller.gameModel.levelUp(), this.game.controller.startLevel(this.game.controller.gameModel.getCurrentLevel()) }, e.prototype.shutdown = function(t) { t.scale.onSizeChange.remove(this.positionContainer, this), this.btnPlay.onInputDown.remove(this.handlePlayGame, this), this.scaleTweenDown.onComplete.remove(this.playStampSound, this), this.background.destroy(!0), this.container.destroy(!0), this.winCostume.destroy(!0), this.mainCopy.destroy(!0), this.btnPlay.destroy(!0), this.background = null, this.container = null, this.posterMain = null, this.posterSmall = null, this.winCostume = null, this.mainCopy = null, this.smallCopy = null, this.btnPlay = null }, e }(Phaser.State); var Jt = function(t) {
                function e() { return function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e),
                        function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.apply(this, arguments)) } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.preload = function(t) {}, e.prototype.create = function(t) { this.game = t, this.background = t.make.image(0, 0, "bg_level_end"), this.background.anchor.set(0, 1), this.game.add.existing(this.background), this.container = t.add.group(), this.createPoster(), this.createText(), this.createScene(), this.game.hud.activate({ id: It.LEVELEND }), this.game.hud.fadeIn(), this.game.windowEventController.handleWindowResize(), this.game.scale.onSizeChange.add(this.positionContainer, this), this.positionContainer(), this.btnPlay = new tt({ game: this.game, id: "btn_replay", skin: "btn_replay" }), this.btnPlay.x = .5 * this.game.defaultWidth, this.btnPlay.y = .75 * this.game.defaultHeight, this.btnPlay.onInputDown.add(this.handlePlayGame, this), this.container.add(this.btnPlay), this.game.sounds.playGameMusic(), this.playCatSound() }, e.prototype.createScene = function() { this.cat = this.game.make.sprite(0, 0, "level_lose", "cat_stand.png"), this.cat.anchor.set(.5, 1), this.catAnim = this.cat.animations.add("lose", Phaser.Animation.generateFrameNames("cat_lose", 0, 10, ".png", 4), 24, !1), this.catAnim.onComplete.add(this.stopCatAnimation, this), this.car = this.game.make.sprite(0, 0, "level_lose", "car.png"), this.car.anchor.set(0, 1), this.cat.position.set(.3 * this.game.defaultWidth, .9 * this.game.defaultHeight), this.container.add(this.cat), this.car.position.set(this.game.defaultWidth, this.game.defaultHeight), this.container.add(this.car), this.tweenCar() }, e.prototype.createPoster = function() {}, e.prototype.createText = function() { this.mainCopy = q(this.game, x, 78, j, 0, 0, { align: "center", stroke: G, strokeThickness: 6 }), this.mainCopy.text = this.game.copy.getCopy("level") + " " + this.game.controller.gameModel.getCurrentLevel() + " " + this.game.copy.getCopy("failed"), this.mainCopy.anchor.set(.5), this.mainCopy.angle = -5, this.mainCopy.setShadow(3, 3, "rgba(0,0,0,0.5)", 0), this.mainCopy.scale.set(100), this.game.add.existing(this.mainCopy), this.tweenText() }, e.prototype.tweenText = function() { this.scaleTweenDown = this.game.add.tween(this.mainCopy.scale).to({ x: .7, y: .7 }, 500, Phaser.Easing.Quartic.Out, !0), this.scaleTweenUp = this.game.add.tween(this.mainCopy.scale).to({ x: 1, y: 1 }, 150, Phaser.Easing.Quartic.Out, !1), this.scaleTweenDown.chain(this.scaleTweenUp), this.scaleTweenDown.onComplete.add(this.playStampSound, this) }, e.prototype.tweenCar = function() { this.car.position.x = this.game.width;
                    this.game.add.tween(this.car).to({ x: -2e3 }, 500, Phaser.Easing.Linear.None, !0);
                    this.game.time.events.add(400, this.playCatAnimation, this).autoDestroy = !0 }, e.prototype.playStampSound = function() { this.game.sounds.playSFX("stamp") }, e.prototype.playCatAnimation = function() { this.cat.animations.play("lose") }, e.prototype.playCatSound = function() { this.game.sounds.playSFX("cat_meow", { volume: .6 }), this.game.time.events.add(this.game.rnd.integerInRange(2e3, 5e3), this.playCatSound, this).autoDestroy = !0 }, e.prototype.stopCatAnimation = function() { this.cat.loadTexture("level_lose", "cat_stand.png"); var t = this.game.rnd.integerInRange(400, 2e3);
                    this.game.time.events.add(t, this.tweenCar, this).autoDestroy = !0 }, e.prototype.positionContainer = function() { var t = .5 * (this.game.width - this.game.defaultWidth),
                        e = .5 * (this.game.height - this.game.defaultHeight);
                    this.container.position.set(t, e); var n = Math.max(this.game.height / this.game.defaultHeight, this.game.width / this.game.defaultWidth);
                    this.background.scale.set(n), this.background.position.set(0, this.game.height), this.mainCopy.position.set(.5 * this.game.width, .21 * this.game.height) }, e.prototype.handlePlayGame = function() { this.game.controller.startLevel(this.game.controller.gameModel.getCurrentLevel()) }, e.prototype.shutdown = function(t) { t.scale.onSizeChange.remove(this.positionContainer, this), this.btnPlay.onInputDown.remove(this.handlePlayGame, this), this.catAnim.onComplete.remove(this.stopCatAnimation, this), this.scaleTweenDown.onComplete.remove(this.playStampSound, this), this.background.destroy(!0), this.container.destroy(!0), this.cat.destroy(!0), this.car.destroy(!0), this.mainCopy.destroy(!0), this.btnPlay.destroy(!0), this.background = null, this.container = null, this.posterMain = null, this.posterSmall = null, this.cat = null, this.car = null, this.mainCopy = null, this.smallCopy = null, this.btnPlay = null }, e }(Phaser.State); var Qt = function(t) {
                function e() { return function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e),
                        function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.apply(this, arguments)) } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.init = function(t) { var e = t.character;
                    this.character = e }, e.prototype.preload = function(t) {}, e.prototype.create = function(t) { this.game = t, this.background = t.make.image(0, 0, "bg_roof"), this.background.anchor.set(.5, .5), this.background.position.set(0, this.game.height), this.game.add.existing(this.background), this.container = t.add.group(), this.createCharacters(), this.btnHome = new tt({ game: this.game, id: "btn_home", skin: "btn_home", defaultScale: 1.3 }), this.btnHome.x = .5 * this.game.defaultWidth, this.btnHome.y = .75 * this.game.defaultHeight, this.btnHome.scale.set(1.3), this.btnHome.onInputDown.add(this.handlePlayGame, this), this.container.add(this.btnHome), this.copy = q(this.game, x, 84, j), this.copy.stroke = G, this.copy.strokeThickness = 6, this.copy.text = this.game.copy.getCopy("game") + " " + this.game.copy.getCopy("complete"), this.copy.anchor.set(.5), this.copy.setShadow(3, 3, "rgba(0,0,0,0.5)", 0), this.copy.position.set(.5 * this.game.width, .2 * this.game.height), this.game.add.existing(this.copy), this.game.windowEventController.handleWindowResize(), this.game.scale.onSizeChange.add(this.positionContainer, this), this.positionContainer(), this.game.hud.activate({ id: It.GAMEEND }), this.game.hud.fadeIn(), this.game.sounds.playSFX("game_complete") }, e.prototype.createCharacters = function() { switch (this.character) {
                        case "apple":
                            this.apple = this.game.make.sprite(0, 0, "apple_complete_a", "apple_complete_a0001.png"), this.apple.animations.add("dance", Phaser.Animation.generateFrameNames("apple_complete_a", 0, 41, ".png", 4), 24, !0), this.onion = this.game.make.sprite(0, 0, "onion_complete_b", "onion_complete_b0001.png"), this.onion.animations.add("dance", Phaser.Animation.generateFrameNames("onion_complete_b", 0, 29, ".png", 4), 24, !0); break;
                        case "onion":
                            this.onion = this.game.make.sprite(0, 0, "onion_complete_a", "onion_complete_a0001.png"), this.onion.animations.add("dance", Phaser.Animation.generateFrameNames("onion_complete_a", 0, 19, ".png", 4), 24, !0), this.apple = this.game.make.sprite(0, 0, "apple_complete_b", "apple_complete_b0001.png"), this.apple.animations.add("dance", Phaser.Animation.generateFrameNames("apple_complete_b", 0, 29, ".png", 4), 24, !0) } this.apple.anchor.set(.5, 1), this.onion.anchor.set(.5, 1), this.apple.animations.play("dance"), this.onion.animations.play("dance"), this.apple.position.set(.35 * this.game.defaultWidth, .8 * this.game.defaultHeight), this.onion.position.set(.65 * this.game.defaultWidth, .8 * this.game.defaultHeight), this.container.add(this.apple), this.container.add(this.onion) }, e.prototype.positionContainer = function() { var t = .5 * (this.game.width - this.game.defaultWidth),
                        e = .5 * (this.game.height - this.game.defaultHeight);
                    this.container.position.set(t, e), this.background.scale.set(Math.max(this.game.height / this.game.defaultHeight, this.game.width / this.game.defaultWidth)), this.background.position.set(.5 * this.game.width, .5 * this.game.height); var n = 1 - Math.max(this.game.height / this.game.defaultHeight, this.game.width / this.game.defaultWidth);
                    n /= 4, this.copy.position.set(.5 * this.game.width, this.game.height * (.2 + n)) }, e.prototype.handlePlayGame = function() { this.game.controller.showWelcomeScreen() }, e.prototype.shutdown = function(t) { t.scale.onSizeChange.remove(this.positionContainer, this), this.btnHome.onInputDown.remove(this.handlePlayGame, this), this.background.destroy(!0), this.container.destroy(!0), this.btnHome.destroy(!0), this.apple.destroy(!0), this.onion.destroy(!0), this.copy.destroy(!0), this.background = null, this.container = null, this.btnHome = null, this.apple = null, this.onion = null, this.copy = null }, e }(Phaser.State); var Zt = function(t) {
                function e() { return function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e),
                        function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.apply(this, arguments)) } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.init = function() {}, e.prototype.preload = function(t) {}, e.prototype.create = function(t) { this.game = t, this.background = this.game.make.image(0, 0, "bg_laptop_screen"), this.container = this.game.add.group(), this.container.add(this.background), this.game.hud.activate({ id: It.CUTSCENE }), this.createVideo(), this.game.sounds.stopBackgroundMusic(), this.btnSkip = new tt({ game: this.game, id: "btn_play", skin: "btn_play" }), this.btnSkip.anchor.set(.5, 1), this.btnSkip.onInputDown.add(this.skipVideo, this), this.game.add.existing(this.btnSkip), this.game.windowEventController.handleWindowResize(), this.game.scale.onSizeChange.add(this.positionContainer, this), this.positionContainer() }, e.prototype.skipVideo = function() { this.game.controller.startCharacterSelect() }, e.prototype.createVideo = function() { this.video = this.game.add.video("cat_intro"), this.video.play(!1), this.video.onComplete.add(this.onVideoEnd, this), this.videoImage = this.video.addToWorld(250, 89, 0, 0, 435 / 540, 435 / 540), this.container.addChildAt(this.videoImage, 0) }, e.prototype.onVideoEnd = function() { this.game.time.events.add(500, this.skipVideo, this).autoDestroy = !0 }, e.prototype.positionContainer = function() { var t = this.game.width / this.background.width;
                    this.container.scale.set(Math.max(1, t)), t > 1 ? (this.container.x = (this.game.width - this.background.width * t) / 2, this.container.y = 0) : (this.container.x = (this.game.width - this.background.width) / 2, this.container.y = 0), this.btnSkip.position.set(.5 * this.game.width, .95 * this.game.height) }, e.prototype.start = function() {}, e.prototype.update = function(t) {}, e.prototype.shutdown = function(t) { this.game.scale.onSizeChange.remove(this.positionContainer, this), this.video.onComplete.remove(this.onVideoEnd, this), this.btnSkip.onInputDown.remove(this.skipVideo, this), this.video.destroy(), this.videoImage.destroy(), this.container.destroy(), this.background.destroy() }, e }(Phaser.State); var $t = function() {
                function t(e) { var n = e.settings;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.settings = n, this.paused = !1, this.onAudioIsChanged = new Phaser.Signal, this.onPauseIsChanged = new Phaser.Signal } return t.prototype.toggleAudio = function() { var t = this.settings.toggleAudio();
                    t.isMuted, this.onAudioIsChanged.dispatch(t) }, t.prototype.getAudio = function() { return this.settings.getAudio() }, t.prototype.getIsMuted = function() { return this.settings.getIsMuted() }, t.prototype.setPaused = function(t) { this.paused = t, this.onPauseIsChanged.dispatch({ paused: this.paused, fromUI: !0 }) }, t.prototype.destroy = function() { this.onAudioIsChanged.forget(), this.onAudioIsChanged.dispose(), this.onAudioIsChanged.removeAll(), this.onPauseIsChanged.forget(), this.onPauseIsChanged.dispose(), this.onPauseIsChanged.removeAll(), Function.prototype.destroy.call(this) }, t }(); var te = function(t) {
                function e(n) { var i = n.id,
                        o = n.game,
                        a = n.sheet;
                    n.index, n.hasRays;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var s = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, o)); return s.sheet = a, s.loadTexture(s.sheet, i), s } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.init = function(t) { var e = t.position;
                    this.position.set(e.x, e.y), this.alpha = 0 }, e.prototype.show = function() { this.scale.set(.5), this.game.add.tween(this.scale).to({ x: 1, y: 1 }, e.ANIM_DURATION, "Cubic.easeOut", !0), this.game.add.tween(this).to({ alpha: 1 }, .75 * e.ANIM_DURATION, "Cubic.easeIn", !0) }, e.prototype.destroy = function() { t.prototype.destroy.call(this, !0) }, e }(Phaser.Sprite);
            te.ANIM_DURATION = 500; var ee = te; var ne = function(t) {
                function e(n) { var i = n.game,
                        o = n.id,
                        a = n.x,
                        s = n.y,
                        r = (n.sfxID, n.skin);
                    n.ariaLabelID;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var h = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, i, a, s, "buttons")); return h.setFrames(r, r, r, r), h.id = o, h.input.useHandCursor = !0, h.game.time.events.add(1, h.init, h), h.anchor.set(.5), h.enable(), h } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.init = function() { this.enable() }, e.prototype.enable = function() { this.onInputDown.add(this.onDown, this) }, e.prototype.disable = function() { this.onInputDown.forget(), this.onInputDown.dispose(), this.onInputDown.removeAll() }, e.prototype.onDown = function() { this.game.sounds.playSFX("click_mouse_over") }, e.prototype.destroy = function() { var e = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0];
                    this.disable(), t.prototype.destroy.call(this, e) }, e }(Phaser.Button); var ie = function(t) {
                function e(n) { var i = n.game,
                        o = n.closeBtnData;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var a = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, i));
                    a.game.track(Ot); var s = "instructions"; return a.panels = [new ee({ id: "instructions01", game: a.game, sheet: s, index: 0 }), new ee({ id: "instructions02", game: a.game, sheet: s, index: 1 }), new ee({ id: "instructions03", game: a.game, sheet: s, index: 2 }), new ee({ id: "instructions04", game: a.game, sheet: s, index: 3 })], a.background = a.game.make.image(0, 0, "bg_fade"), a.background.anchor.set(0), a.add(a.background), a.background.inputEnabled = !0, a.background.input.priorityID = 0, a.background.input.useHandCursor = !1, a.panelContainer = a.game.make.group(), a.add(a.panelContainer), a.addPanels(), a.createCloseButton(o), a.positionElements(), a } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.createCloseButton = function(t) { if (t) { var e = t.id,
                            n = t.sfx_id,
                            i = t.skin,
                            o = t.ariaLabelID,
                            a = { game: this.game, id: e, x: 0, y: 0, sfx_id: n, skin: i, ariaLabelID: o };
                        this.closeButton = new ne(a), this.closeButton.onInputDown.add(this.handleClose, this); var s = this.panels[0].width + 100,
                            r = this.panels[this.panels.length - 1].y + this.panels[this.panels.length - 1].height + 40;
                        this.closeButton.position.set(s, r) } }, e.prototype.handleClose = function() { this.game.controller.closeInstructions() }, e.prototype.positionElements = function() { this.background.width = this.game.width, this.background.height = this.game.height, this.panelContainer.position.set(.5 * (this.game.width - this.panelContainer.width), .04 * this.game.height) }, e.prototype.activate = function() { this.game.scale.onSizeChange.add(this.positionElements, this); var t = this.game.stage.children.length;
                    this.game.stage.addChildAt(this, t), this.cnt = 0, this.timer = this.game.time.events.repeat(e.ANIM_DURATION, this.panels.length, this.showPanel, this), this.showPanel() }, e.prototype.deactivate = function() { this.game.scale.onSizeChange.remove(this.positionElements, this), this.game.world.remove(this) }, e.prototype.addPanels = function() { var t = this.panels.entries(),
                        n = Array.isArray(t),
                        i = 0; for (t = n ? t : t[Symbol.iterator]();;) { var o; if (n) { if (i >= t.length) break;
                            o = t[i++] } else { if ((i = t.next()).done) break;
                            o = i.value } var a = o,
                            s = a[0],
                            r = a[1],
                            h = e.content[s];
                        r.init(h), this.panelContainer.add(r) } }, e.prototype.showPanel = function() { this.game.sounds.playSFX("INSTRUCTION_WOOSH"), this.cnt < this.panels.length ? (this.panels[this.cnt].show(), this.cnt++) : this.panelContainer.add(this.closeButton) }, e.prototype.destroy = function() { this.timer && this.game.time.events.remove(this.timer), this.panelContainer.destroy(!0), this.panelContainer = null; var e = this.panels,
                        n = Array.isArray(e),
                        i = 0; for (e = n ? e : e[Symbol.iterator]();;) { var o; if (n) { if (i >= e.length) break;
                            o = e[i++] } else { if ((i = e.next()).done) break;
                            o = i.value } var a = o;
                        a.destroy(), a = null } this.closeButton.destroy(!0), this.closeButton = null, this.background = null, this.deactivate(), t.prototype.destroy.call(this, !0) }, e }(Phaser.Group);
            ie.content = [{ position: { x: 0, y: 0 } }, { position: { x: 75, y: 165 } }, { position: { x: 265, y: 220 } }, { position: { x: 75, y: 400 } }], ie.ANIM_DURATION = 1e3; var oe = ie,
                ae = Object.assign || function(t) { for (var e = 1; e < arguments.length; e++) { var n = arguments[e]; for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (t[i] = n[i]) } return t }; var se = function() {
                function t(e) { var n = e.settings,
                        i = e.gameData;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.settings = n, this.data = ae({}, i), this.id = T, this.forceInstructions = !0, this.tutorialComplete = !1, this.warningComplete = !1, this.selectedCharacter = "", this.level = 1, this.reset(), this.init() } return t.prototype.init = function() { this.saveSlots = this.loadSlotsData(), this.saveSlots || this.initSaveSlots(); var t = this.loadSimpleSave(this.id);
                    t ? this.deserialize(t) : (this.createNewSaveSlot(this.id), this.savePlayerData(this.id, this.serialize())) }, t.prototype.reset = function() { this.level = 1, this.currentLevelScores = [] }, t.prototype.setInstructionsViewed = function() { this.forceInstructions = !1, this.savePlayerData(this.id, this.serialize()) }, t.prototype.setTutorialIsComplete = function() { this.tutorialComplete = !0, this.savePlayerData(this.id, this.serialize()) }, t.prototype.setChosenCharacter = function(t) { switch (t) {
                        case Kt.SELECTED_APPLE:
                            this.selectedCharacter = "apple"; break;
                        case Kt.SELECTED_ONION:
                            this.selectedCharacter = "onion"; break;
                        default:
                            console.log("CHARACTER SELECTED IS INVALID") } }, t.prototype.getChosenCharacter = function() { return this.selectedCharacter }, t.prototype.getCurrentLevelTimeResults = function() { return { current: this.levelTimes[this.level - 1], best: this.bestLevelTimes[this.level - 1] } }, t.prototype.getCurrentLevel = function() { return this.level }, t.prototype.getCurrentLevelID = function() { return g[this.level - 1] }, t.prototype.getGameIsComplete = function() { return this.level === g.length }, t.prototype.getIsTutorialMode = function() { return !this.tutorialComplete }, t.prototype.getGameScore = function() { return this.currentLevelScores.reduce(function(t, e) { return t + e }, 0) }, t.prototype.getBestScore = function() { return this.bestGameScore }, t.prototype.levelUp = function() { return this.level++, this.level }, t.prototype.saveLevelScore = function(t, e) { this.currentLevelScores[t - 1] = e, this.bestLevelScores[t - 1] = Math.max(this.bestLevelScores[t - 1], e), this.savePlayerData(this.id, this.serialize()) }, t.prototype.saveGameScore = function(t) { this.bestGameScore = Math.max(this.bestGameScore, t), this.savePlayerData(this.id, this.serialize()) }, t.prototype.saveLevelTime = function(t) { var e = this.bestLevelTimes[this.level - 1] || t,
                        n = t < e,
                        i = Math.min(t, e); return this.bestLevelTimes[this.level - 1] = i, this.levelTimes[this.level - 1] = t, this.savePlayerData(this.id, this.serialize()), n }, t.prototype.deserialize = function(t) { var e = JSON.parse(t); for (var n in e) null == this[n] && void 0 == this[n] || (this[n] = e[n]) }, t.prototype.serialize = function() { var t = { id: this.id, forceInstructions: this.forceInstructions, bestLevelTimes: this.bestLevelTimes, tutorialComplete: this.tutorialComplete }; return JSON.stringify(t) }, t.prototype.initSaveSlots = function() { if (!this.loadSlotsData()) { var t = JSON.stringify({ slots: [] });
                        this.settings.setGameData("slots", t) } }, t.prototype.loadSlotsData = function() { var t = this.settings.getAllSettings().gameData.slots; return !!t && JSON.parse(t) }, t.prototype.createNewSaveSlot = function(t) { var e = this.loadSlotsData();
                    e.slots.push(t); var n = JSON.stringify(e);
                    this.settings.setGameData("slots", n) }, t.prototype.deleteSaveSlot = function(t) { var e = this.loadSlotsData(),
                        n = e.slots.indexOf(t);
                    e.slots.splice(n, 1); var i = JSON.stringify(e);
                    this.settings.setGameData("slots", i), this.settings.setGameData("save" + t, null) }, t.prototype.savePlayerData = function(t, e) { this.settings.setGameData("save" + t, e) }, t.prototype.loadSimpleSave = function(t) { return this.settings.getAllSettings().gameData["save" + t] }, t }(); var re = function(t) {
                function e(n) { var i = n.game,
                        o = n.closeBtnData;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var a = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, i)); return a.background = a.game.make.image(0, 0, "bg_fade"), a.background.anchor.set(0), a.add(a.background), a.background.inputEnabled = !0, a.background.input.priorityID = 0, a.background.input.useHandCursor = !1, a.panelContainer = a.game.make.group(), a.add(a.panelContainer), a.panel = a.game.make.image(0, 0, "ui", "credits"), a.panel.anchor.set(0, .5), a.panelContainer.add(a.panel), a.createCloseButton(o), a.positionElements(), a } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.createCloseButton = function(t) { if (t) { var e = t.id,
                            n = t.sfx_id,
                            i = t.skin,
                            o = t.ariaLabelID,
                            a = { game: this.game, id: e, x: 0, y: 0, sfx_id: n, skin: i, ariaLabelID: o };
                        this.closeButton = new ne(a), this.closeButton.onInputDown.add(this.handleClose, this), this.panelContainer.add(this.closeButton); var s = .5 * this.panel.width,
                            r = .5 * this.panel.height + 60;
                        this.closeButton.position.set(s, r) } }, e.prototype.handleClose = function() { this.game.controller.closeCredits() }, e.prototype.positionElements = function() { this.background.width = this.game.width, this.background.height = this.game.height, this.panelContainer.position.set(.5 * (this.game.width - this.panelContainer.width), .48 * this.game.height) }, e.prototype.activate = function() { this.game.scale.onSizeChange.add(this.positionElements, this); var t = this.game.stage.children.length;
                    this.game.stage.addChildAt(this, t) }, e.prototype.deactivate = function() { this.game.scale.onSizeChange.remove(this.positionElements, this), this.game.world.remove(this) }, e.prototype.destroy = function() { this.panelContainer.destroy(!0), this.panelContainer = null, this.panel = null, this.closeButton.destroy(!0), this.closeButton = null, this.background = null, this.deactivate(), t.prototype.destroy.call(this, !0) }, e }(Phaser.Group); var he = function t(e) { var n = e.config;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.spritesheet = n.spritesheet, this.vehicleVariations = n.vehicleVariations, this.laneCount = n.laneCount, this.minMoveSpeed = n.minMoveSpeed, this.maxMoveSpeed = n.maxMoveSpeed, this.fastLaneCount = n.fastLaneCount, this.fastLaneMinSpeed = n.fastLaneMinSpeed, this.fastLaneMaxSpeed = n.fastLaneMaxSpeed },
                le = Object.assign || function(t) { for (var e = 1; e < arguments.length; e++) { var n = arguments[e]; for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (t[i] = n[i]) } return t }; var ce = function() {
                function t(e) { var n = e.game,
                        i = e.config;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.data = le({}, i), this.allow_game_logs = !0, this.game = this.data.game, this.start_at_level = this.game.start_at_level, this.invincible_mode = !1, this.audio = this.data.audio, this.audioIE = this.data.audioIE, this.audioSprites = this.data.audioSprites, this.screenhud = this.data.screenhud, this.buttons = this.data.buttons, this.levels = [], this.levels = this.data.game_levels.reduce(function(t, e) { return t.push(new he({ game: n, config: e })), t }, []), this.vehicleBounds = [], this.vehicleBounds = this.data.vehicleBounds.reduce(function(t, e) { var n = le({}, e); return t.push(n), t }, []) } return t.prototype.getIntroMessageById = function(t) { return this.introMessages[t] }, t.prototype.getLevelData = function(t) { return this.levels[t - 1] }, t.prototype.getLevelCount = function() { return this.levels.length }, t.prototype.getVehicleBounds = function(t) { var e = {}; return this.vehicleBounds.forEach(function(n) { n.id === t && (e = n.bounds) }), e }, t }(); var ue = function(t) {
                function e(n) { var i = n.game;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var o = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, i)); return o.background = o.game.make.image(0, 0, "bg_generic"), o.add(o.background), o.maskp = o.game.add.graphics(), o.maskp.beginFill(0, 1), o.maskp.drawCircle(0, 0, 10), o.maskp.endFill(), o.maskp.anchor.set(.5), o.maskp.position.set(.5 * o.game.width, .5 * o.game.height), o.addChild(o.maskp), o.background.mask = o.maskp, o.maskp.diameter = 1, o.onInComplete = new Phaser.Signal, o.onOutComplete = new Phaser.Signal, o } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.init = function() {}, e.prototype.startIn = function() { var t = this,
                        e = { step: 0 },
                        n = this.game.add.tween(e).to({ step: 1280 }, 1250, Phaser.Easing.Circular.Out);
                    n.onUpdateCallback(function() { t.maskp.beginFill(0, 0), t.maskp.drawCircle(0, 0, e.step), t.maskp.endFill() }), n.start(), n.onComplete.addOnce(this.startInComplete, this) }, e.prototype.startInComplete = function() { this.onInComplete.dispatch(this) }, e.prototype.startOut = function() { var t = this,
                        e = { step: 0 },
                        n = this.game.add.tween(e).to({ step: 1280 }, 1250, Phaser.Easing.Circular.In);
                    n.onUpdateCallback(function() { t.maskp.clear(), t.maskp.beginFill(0, 0), t.maskp.drawCircle(0, 0, 1280 - e.step), t.maskp.endFill() }), n.start(), n.onComplete.addOnce(this.startOutComplete, this) }, e.prototype.startOutComplete = function() { this.onOutComplete.dispatch(this) }, e.prototype.destroy = function() { var e = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0];
                    arguments[1];
                    this.onInComplete.forget(), this.onInComplete.dispose(), this.onInComplete.removeAll(), this.onOutComplete.forget(), this.onOutComplete.dispose(), this.onOutComplete.removeAll(), this.background = null, this.maskp = null, t.prototype.destroy.call(this, e) }, e }(Phaser.Group); var pe = function(t) {
                function e(n) { var i = n.game;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var o = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, i)); return o.background = o.game.make.image(0, 0, "bg_generic"), o.add(o.background), o.render = o.render.bind(o), o.w = .5 * o.game.defaultWidth, o.h = .5 * o.game.defaultHeight, o.max = o.w + 100, o.outer = o.generateOuter(), o.maskp = o.game.add.graphics(), o.addChild(o.maskp), o.background.mask = o.maskp, o.render(o.max), o.onInComplete = new Phaser.Signal, o.onOutComplete = new Phaser.Signal, o.game.input.enabled = !1, o } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.generateOuter = function() { var t = this.game.defaultWidth,
                        e = this.game.defaultHeight; return [0, 0, t, 0, t, e, 0, e, 0, 0] }, e.prototype.generatePolygon = function(t) { var n = [],
                        i = void 0; for (i = 1; i <= e.NUMBER_SIDES; i++) n.push(this.w + t * Math.cos(2 * i * Math.PI / e.NUMBER_SIDES)), n.push(this.h + t * Math.sin(2 * i * Math.PI / e.NUMBER_SIDES)); return n.push(n[0]), n.push(n[1]), n }, e.prototype.render = function(t) { var e = this.generatePolygon(t),
                        n = [].concat(this.outer, e),
                        i = new Phaser.Polygon(n);
                    this.maskp.clear(), this.maskp.beginFill(0, 1), this.maskp.drawPolygon(i.points), this.maskp.endFill() }, e.prototype.init = function() {}, e.prototype.startIn = function() { var t = this,
                        n = { step: this.max },
                        i = this.game.add.tween(n).to({ step: 0 }, e.DURATION, Phaser.Easing.Circular.Out);
                    i.onUpdateCallback(function() { t.render(n.step) }), i.start(), i.onComplete.addOnce(this.startInComplete, this) }, e.prototype.startInComplete = function() { this.onInComplete.dispatch(this) }, e.prototype.startOut = function() { var t = this,
                        n = { step: 0 },
                        i = this.game.add.tween(n).to({ step: this.max }, e.DURATION, Phaser.Easing.Circular.In);
                    i.onUpdateCallback(function() { t.render(n.step) }), i.start(), i.onComplete.addOnce(this.startOutComplete, this) }, e.prototype.startOutComplete = function() { this.game.input.enabled = !0, this.onOutComplete.dispatch(this) }, e.prototype.destroy = function() { var e = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0];
                    arguments[1];
                    this.game.tweens.removeFrom(this, !0), this.game.tweens.removeFrom(this), this.onInComplete.forget(), this.onInComplete.dispose(), this.onInComplete.removeAll(), this.onOutComplete.forget(), this.onOutComplete.dispose(), this.onOutComplete.removeAll(), this.background = null, this.maskp = null, t.prototype.destroy.call(this, e) }, e }(Phaser.Group);
            pe.DURATION = 1e3, pe.NUMBER_SIDES = 16; var de = pe; var fe = function(t) {
                function e(n) { var i = n.game;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var o = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, i)); return o.background = o.game.make.image(0, 0, "bg_generic"), o.add(o.background), o.render = o.render.bind(o), o.w = .5 * o.game.defaultWidth, o.h = .5 * o.game.defaultHeight, o.outer = o.generateOuter(), o.maskp = o.game.add.graphics(), o.maskp.anchor.set(.5), o.maskp.position.set(o.w, o.h), o.addChild(o.maskp), o.background.mask = o.maskp, o.render(10), o.onInComplete = new Phaser.Signal, o.onOutComplete = new Phaser.Signal, o.game.input.enabled = !1, o } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.generateOuter = function() { var t = -this.w,
                        e = -this.h,
                        n = this.w,
                        i = this.h; return [t, e, n, e, n, i, t, i, t, e] }, e.prototype.render = function(t) { var e = this.w / this.h,
                        n = Math.min(0, -(this.w - t * e)),
                        i = Math.min(0, -(this.h - t)),
                        o = Math.max(0, this.w - t * e),
                        a = Math.max(0, this.h - t),
                        s = [];
                    0 !== i && 0 !== a && (s = [n, i, o, i, o, a, n, a, n, i]); var r = [].concat(this.outer, s),
                        h = new Phaser.Polygon(r);
                    this.maskp.clear(), this.maskp.beginFill(0, 1), this.maskp.drawPolygon(h.points), this.maskp.endFill() }, e.prototype.init = function() {}, e.prototype.startIn = function() { var t = this,
                        n = { step: 0 },
                        i = this.game.add.tween(n).to({ step: this.h + 1 }, e.DURATION, Phaser.Easing.Circular.Out);
                    i.onUpdateCallback(function() { t.render(n.step) }), i.start(), i.onComplete.addOnce(this.startInComplete, this) }, e.prototype.startInComplete = function() { this.onInComplete.dispatch(this) }, e.prototype.startOut = function() { var t = this,
                        n = { step: this.h + 1 },
                        i = this.game.add.tween(n).to({ step: 0 }, e.DURATION, Phaser.Easing.Circular.In);
                    i.onUpdateCallback(function() { t.render(n.step) }), i.start(), i.onComplete.addOnce(this.startOutComplete, this) }, e.prototype.startOutComplete = function() { this.game.input.enabled = !0, this.onOutComplete.dispatch(this) }, e.prototype.destroy = function() { var e = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0];
                    arguments[1];
                    this.game.tweens.removeFrom(this, !0), this.game.tweens.removeFrom(this), this.onInComplete.forget(), this.onInComplete.dispose(), this.onInComplete.removeAll(), this.onOutComplete.forget(), this.onOutComplete.dispose(), this.onOutComplete.removeAll(), this.background = null, this.maskp = null, t.prototype.destroy.call(this, e) }, e }(Phaser.Group);
            fe.DURATION = 500; var ge = fe; var me = function(t) {
                function e(n) { var i = n.game;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var o = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, i)); return o.maskp = o.game.add.graphics(), o.maskp.beginFill(16777215, 1), o.maskp.drawRect(0, 0, o.game.width, o.game.height), o.maskp.endFill(), o.maskp.anchor.set(.5), o.maskp.position.set(0, 0), o.maskp.alpha = 0, o.addChild(o.maskp), o.onInComplete = new Phaser.Signal, o.onOutComplete = new Phaser.Signal, o } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.init = function() {}, e.prototype.startIn = function() { var t = this.game.add.tween(this.maskp).to({ alpha: 1 }, 200, "Cubic.easeInOut", !1);
                    t.onComplete.addOnce(this.startInComplete, this), t.start() }, e.prototype.startInComplete = function() { this.onInComplete.dispatch(this) }, e.prototype.startOut = function() { var t = this.game.add.tween(this.maskp).to({ alpha: 0 }, 200, "Cubic.easeInOut", !1);
                    t.onComplete.addOnce(this.startOutComplete, this), t.start() }, e.prototype.startOutComplete = function() { this.onOutComplete.dispatch(this) }, e.prototype.destroy = function() { var e = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0];
                    arguments[1];
                    this.onInComplete.forget(), this.onInComplete.dispose(), this.onInComplete.removeAll(), this.onOutComplete.forget(), this.onOutComplete.dispose(), this.onOutComplete.removeAll(), this.maskp = null, t.prototype.destroy.call(this, e) }, e }(Phaser.Group); var ye = function(t) {
                function e(n) { var i = n.game,
                        o = n.enabled;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var a = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, i)); return a.enabled = o, a.onTransitionInComplete = new Phaser.Signal, a.onTransitionOutComplete = new Phaser.Signal, a } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                    t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.startTransition = function(t) { var n = t.type,
                        i = void 0 === n ? e.POLY_MASK : n; if (this.game.stage.addChild(this), this.enabled) { switch (i) {
                            case e.CIRCLE_MASK:
                                this.transition = new ue({ game: this.game }); break;
                            case e.POLY_MASK:
                                this.transition = new de({ game: this.game }); break;
                            case e.RECT_MASK:
                                this.transition = new ge({ game: this.game }); break;
                            case e.LOW_FI:
                                this.transition = new me({ game: this.game }); break;
                            default:
                                this.transition = new me({ game: this.game }) } this.addChild(this.transition) } this.transition ? (this.transitionStart(), this.game.scale.onSizeChange.add(this.positionElements, this), this.positionElements()) : this.onTransitionInComplete.dispatch() }, e.prototype.positionElements = function() { var t = .5 * (this.game.width - this.game.defaultWidth),
                        e = .5 * (this.game.height - this.game.defaultHeight);
                    this.position.set(t, e) }, e.prototype.transitionStart = function() { this.transition.onInComplete.addOnce(this.transitionInComplete, this), this.transition.onOutComplete.addOnce(this.transitionOutComplete, this), this.transition.init(), this.transition.startIn(0) }, e.prototype.transitionInComplete = function(t) { t && t.onInComplete.removeAll(), this.onTransitionInComplete.dispatch() }, e.prototype.transitionEnd = function() { this.transition ? this.transition.startOut() : this.transitionOutComplete() }, e.prototype.transitionOutComplete = function(t) { t && t.onOutComplete.removeAll(), this.game.scale.onSizeChange.remove(this.positionElements, this), this.onTransitionOutComplete.dispatch() }, e.prototype.destroy = function() { this.game.scale.onSizeChange.remove(this.positionElements, this), this.game.tweens.removeFrom(this, !0), this.game.tweens.removeFrom(this), this.onTransitionOutComplete.forget(), this.onTransitionOutComplete.dispose(), this.onTransitionOutComplete.removeAll(), this.onTransitionInComplete.forget(), this.onTransitionInComplete.dispose(), this.onTransitionInComplete.removeAll(), this.transition && this.transition.destroy(), this.transition = null, t.prototype.destroy.call(this, !0) }, e }(Phaser.Sprite);
            ye.CIRCLE_MASK = "CIRCLE_MASK", ye.POLY_MASK = "POLY_MASK", ye.RECT_MASK = "RECT_MASK", ye.LOW_FI = "LOW_FI"; var be = function() { var t = we(); return t === ve || t === Ce || t === _e },
                we = function() { if (/iPhone/.test(navigator.userAgent) && !window.MSStream) { var t = (window.screen.width > window.screen.height ? window.screen.height : window.screen.width) / (window.screen.width > window.screen.height ? window.screen.width : window.screen.height),
                            e = window.devicePixelRatio; return t == 320 / 480 && 1 == e ? ve : t == 640 / 960 && 2 == e ? Ce : t == 640 / 1136 && 2 == e ? _e : t == 750 / 1334 && 2 == e ? Se : t == 640 / 1136 && 2 == e ? ke : .5625 == t && 3 == e ? Te : t == 1125 / 2001 && 3 == e ? xe : t == 375 / 812 && 3 == e ? Ee : "" } return "" },
                ve = "iPhone 1/3g/3gs",
                Ce = "iPhone 4/4s",
                _e = "iPhone 5/5c/5s",
                Se = "iPhone 6/6s/7/8",
                ke = "iPhone 6/6s/7/8 (Display Zoom)",
                Te = "iPhone 6/6s/7 Plus/8 Plus",
                xe = "iPhone 6/6s/7 Plus/8 Plus (Display Zoom)",
                Ee = "iPhone X"; var Oe = function() {
                function t() {! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t); var e = screen.width,
                        n = screen.height; switch (this.isOldIpad = 1 == window.devicePixelRatio && (1024 == e && 768 == n || 768 == e && 1024 == n) && void 0 === window.androidBridge, this.isOldIphone = be(), this.isKindle = this.isKindle(), this.isNexus7 = navigator.userAgent.indexOf("Nexus 7") > -1, this.isGalaxyTab4 = navigator.userAgent.indexOf("SM-T530") > -1 || navigator.userAgent.indexOf("SM-T330") > -1 || navigator.userAgent.indexOf("GT-N8010") > -1, this.isSmallScreen = e <= 768 || n <= 768, this.requiresLightVersion = !Phaser.Device.desktop && this.doesRequireLightVersion(), !0 === Phaser.Device.desktop ? this.gameLoadType = W : this.gameLoadType = this.requiresLightVersion ? H : W, this.allowTransitionTweens = 0 == this.requiresLightVersion, this.getParameterByName("loadtype")) {
                        case H:
                            this.gameLoadType = H; break;
                        case W:
                            this.gameLoadType = W; break;
                        case B:
                            this.gameLoadType = B } } return t.prototype.getAppRenderTpye = function() { var t = Phaser.AUTO; return (this.isOldAppleDevice() || this.isIE()) && (t = Phaser.CANVAS), t }, t.prototype.getAppTransitionType = function() { return t.TRANSITIONS_NONE }, t.prototype.getParameterByName = function(t, e) { e || (e = window.location.href), t = t.replace(/[\[\]]/g, "\\$&"); var n = new RegExp("[?&]" + t + "(=([^&#]*)|&|#|$)").exec(e); return n ? n[2] ? decodeURIComponent(n[2].replace(/\+/g, " ")) : "" : null }, t.prototype.doesRequireLightVersion = function() { return !!(this.isOldIpad || this.isOldIphone || this.isKindle || this.isGalaxyTab4 || this.isNexus7) }, t.prototype.isOldAppleDevice = function() { return this.isOldIpad || this.isOldIphone }, t.prototype.isIE = function() { return "Microsoft Internet Explorer" == navigator.appName || !(!navigator.userAgent.match(/Trident/) && !navigator.userAgent.match(/rv:11/)) }, t.prototype.isKindle = function() { for (var t = ["KFSUWI", "KFAUWI", "KFDOWI", "KFGIWI", "KFFOWI", "KFMEWI", "KFTBWI", "KFARWI", "KFASWI", "KFSAWA", "KFSAWI", "KFAPWA", "KFAPWI", "KFAPWA", "KFAPWI", "KFSOWI", "KFJWA", "KFJWI", "KFTT", "KFOT", "Kindle Fire"], e = 0; e < t.length; e++)
                        if (navigator.userAgent.indexOf(t[e]) > -1) return !0; return !1 }, t.prototype.applyLightSettings = function(t) { this.requiresLightVersion = t }, t }();
            Oe.TRANSITIONS_FULL = "TRANSITIONS_FULL", Oe.TRANSITIONS_LOWFI = "TRANSITIONS_LOWFI", Oe.TRANSITIONS_NONE = "TRANSITIONS_NONE"; var Pe = Oe; var Ae = function() {
                    function t(e) { var n = e.game,
                            i = e.transitionType,
                            o = void 0 === i ? Pe.TRANSITIONS_FULL : i;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.game = n, this.transitionType = o, this.transitionToState = !1, this.transitionToParams = !1, this.onTransitionComplete = new Phaser.Signal, this.isStateTransition = !1 } return t.prototype.clearCurrentState = function() { this.game.state.clearCurrentState() }, t.prototype.switchStates = function() { var t;
                        (t = this.game.state).start.apply(t, [this.transitionToState].concat(this.transitionToParams)), this.game.state.onStateChange.addOnce(this.handleStateChanged, this) }, t.prototype.handleStateChanged = function() { this.game.camera.x = 0, this.game.camera.y = 0, this.game.hud.show() }, t.prototype.transitionOut = function() { this.transitions.transitionEnd() }, t.prototype.onTransitionInComplete = function() { this.switchStates() }, t.prototype.onTransitionOutComplete = function() { this.onTransitionComplete.dispatch(), this.transitions.destroy(), this.transitions = null, this.isStateTransition = !1 }, t.prototype.startState = function(t) { var e = t.nextState,
                            n = t.nextStateParams;
                        this.transitionToState = e, this.transitionToParams = n, this.isStateTransition = !0, this.switchStates() }, t }(),
                Ie = n(128),
                De = n.n(Ie); var Le = function() {
                    function t(e) {! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.game = e, this.wrapper = document.createElement("div"), this.wrapper.className = "cheat-window", this.bindedCloseWindow = this.closeWindow.bind(this), this.bindedOpenWindow = this.openWindow.bind(this), this.btnClose = document.createElement("div"), this.btnClose.className = "btn-close", this.wrapper.appendChild(this.btnClose), this.btnClose.addEventListener("click", this.bindedCloseWindow), this.returnToWelcomeOnClose = !1, document.body.appendChild(this.wrapper), this.gameConfig = this.game.controller.configModel, this.createGameSettingsMenu() } return t.prototype.createGameSettingsMenu = function() { return De.a.create(0, 0, "Game Settings", this.wrapper) }, t.prototype.closeWindow = function() { this.wrapper.style.display = "none", this.game.controller.showWelcomeScreen() }, t.prototype.openWindow = function() { this.wrapper.style.display = "block " }, t }(),
                Me = n(127),
                Re = n.n(Me); var je = function() {
                    function t(e) {! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.game = e, Re()("↑ ↑ ↓ ↓ ← →", { done: this.handleOpenCheatWindow.bind(this), description: "Open Cheat Window" }) } return t.prototype.handleOpenCheatWindow = function() { this.game.controller.cheatController.openWindow() }, t }(),
                Ne = function() {
                    function t(t, e) { for (var n = 0; n < e.length; n++) { var i = e[n];
                            i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i) } } return function(e, n, i) { return n && t(e.prototype, n), i && t(e, i), e } }(); var Ge = function() {
                function t(e) { var n = e.game,
                        i = e.settings,
                        o = e.hud,
                        a = e.deviceController;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.game = n, this.settings = i, this.hud = o, this.deviceController = a } return t.prototype.init = function(t) { var e = t.config;
                    this.config = new ce({ game: this.game, config: e }), this._gameModel = new se({ settings: this.settings, gameData: this.config.game }), this.stateController = new Ae({ game: this.game, transitionType: this.deviceController.getAppTransitionType() }), this.cheatController = new Le(this.game), this.shortcutController = new je(this.game), this.game.sounds.addSounds(this.config.audio), this.game.device.ie ? (console.log("IE"), this.game.sounds.addSounds(this.config.audioIE)) : this.game.sounds.addAudioSprites(this.config.audioSprites), this.uiModel = new $t({ settings: this.settings }), this.hud.init(this.config.screenhud), this.gamePaused = !1 }, t.prototype.startBoot = function() { this.game.state.start(m, !0, !1) }, t.prototype.startLoad = function() { this.game.state.start(y, !0, !1) }, t.prototype.startCharacterSelect = function() { this.game.state.start(w, !0, !1) }, t.prototype.startCutscene = function() { this.game.state.start(k, !0, !1) }, t.prototype.showWelcomeScreen = function() { this.game.sounds.dimBackgroundMusic(!1), this.stateController.startState({ nextState: v, nextStateParams: [!0, !1] }) }, t.prototype.showInstructions = function() { var t = this.config.buttons.instructionsClose;
                    this.instructions = new oe({ game: this.game, closeBtnData: t }), this.gameModel.setInstructionsViewed(), this.instructions.activate() }, t.prototype.closeInstructions = function() { this.instructions.destroy() }, t.prototype.showGameIntro = function() { this.hud.configure({ id: It.EMPTY }), this.stateController.startState({ nextState: "STATE_GAME_INTRO", nextStateParams: [!0, !1] }) }, t.prototype.setTutorialIsComplete = function() { this.gameModel.setTutorialIsComplete() }, t.prototype.showCredits = function() { var t = this.config.buttons.creditsBack;
                    this.credits = new re({ game: this.game, closeBtnData: t }), this.credits.activate() }, t.prototype.closeCredits = function() { this.hud.configure({ id: It.PAUSE, isModal: !0 }), this.credits.destroy() }, t.prototype.startNewGame = function() { this.gameModel.reset(), this.startLevel() }, t.prototype.startLevel = function(t) { this.game.sounds.dimBackgroundMusic(!0), t && (this.gameModel.level = t); var e = this.config.levels[this.gameModel.level - 1];
                    this.stateController.startState({ nextState: b, nextStateParams: [!0, !1, { levelData: e, playerLevel: this.gameModel.level, showTutorial: this.gameModel.getIsTutorialMode() }] }), this.hud.configure({ id: It.PLAYING, isVisible: !1 }) }, t.prototype.replayLevel = function() { console.log(this), this.stateController.startState({ nextState: b, nextStateParams: [!0, !1] }) }, t.prototype.nextLevel = function() { this.gameModel.level === this.config.levels.length ? this.showGameComplete() : (this.gameModel.levelUp(), this.playLevel()) }, t.prototype.showGameEnd = function() { this.game.sounds.dimBackgroundMusic(!1), this.stateController.startState({ nextState: S, nextStateParams: [!0, !1] }), this.hud.configure({ id: It.GAMEEND, isVisible: !1 }) }, t.prototype.showLevelEnd = function(t) { var e = t.win;
                    e ? this.gameModel.getCurrentLevel() === this.configModel.getLevelCount() ? this.stateController.startState({ nextState: S, nextStateParams: [!0, !1, { win: e, character: this.gameModel.selectedCharacter }] }) : this.stateController.startState({ nextState: C, nextStateParams: [!0, !1, { win: e, character: this.gameModel.selectedCharacter }] }) : this.stateController.startState({ nextState: _, nextStateParams: [!0, !1] }) }, t.prototype.showGameOver = function() { this.stateController.startState({ nextState: S, nextStateParams: [!0, !1] }), this.hud.configure({ id: It.GAMEEND, isVisible: !1 }) }, t.prototype.quitGame = function() { this.hud.deactivate(), this.gameModel.reset(), this.showWelcomeScreen() }, t.prototype.restartGame = function() { this.gameModel.reset(), this.startLevel() }, t.prototype.pauseGame = function() { this.gamePaused || (this.gamePaused = !0, this.game.state.current === b && (this.hud.disable(), this.showPauseScreenHud())) }, t.prototype.showPauseScreenHud = function() { this.uiModel.setPaused(!0), this.hud.enable(), this.hud.activate({ id: It.PAUSE, isModal: !0 }), this.game.track("VIEW_SCREEN_PAUSE"), this.hud.showGamePause() }, t.prototype.resumeGame = function() { this.gamePaused = !1, this.game.state.current === b && (this.hud.configure({ id: It.PLAYING }), this.hud.closeGamePause(), this.uiModel.setPaused(!1)) }, t.prototype.restartLevel = function() { console.log(this), this.resumeGame(), this.startLevel() }, t.prototype.showGameCredits = function() { this.hud.closeGamePause(), this.hud.activate({ id: It.PAUSE, isModal: !0 }), this.hud.showGameCredits() }, t.prototype.closeGameCredits = function() { this.hud.closeGameCredits(), this.hud.activate({ id: It.PAUSE, isModal: !0 }), this.hud.showGamePause() }, Ne(t, [{ key: "configModel", get: function() { return this.config } }, { key: "gameModel", get: function() { return this._gameModel } }]), t }(); var Be = function() {
                function t(e) {! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.game = e } return t.prototype.getBaseDirectory = function() { return "./" }, t.prototype.resolveRelatveUrl = function(t) { return this.getBaseDirectory() + t }, t.prototype.getAssetsDirectory = function(t) { return t ? this.resolveRelatveUrl("assets/" + t) : this.resolveRelatveUrl("assets/") }, t.prototype.getFontsDirectory = function(t) { return this.getAssetsDirectory("fonts/" + t) }, t }(); var We = function() {
                    function t(e) { var n = e.game,
                            i = e.isMuted,
                            o = void 0 !== i && i;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.game = n, this.sounds = {}, this.sprites = {}, this._allowMusic = !o, this._allowEffects = !o, this.backgroundMusic = { id: Z, volume: t.TITLEMUSIC_VOLUME }, this.gameMusic = { id: $, volume: t.GAMEMUSIC_VOLUME }, Object.defineProperty(this, "allowMusic", { get: function() { return this._allowMusic }, set: function(t) { this._allowMusic = t, this._allowMusic ? this.game.state.current === b || this.game.state.current === _ || this.game.state.current === C ? this.playGameMusic() : this.playBackgroundMusic() : this.pauseBackgroundMusic() } }), Object.defineProperty(this, "allowEffects", { get: function() { return this._allowEffects }, set: function(t) { for (var e in this._allowEffects = t, this.sounds) e != this.backgroundMusic.id && (this.sounds[e].mute = 0 == this._allowEffects) } }) } return t.prototype.touchLock = function() { this.game.sound.usingWebAudio && "suspended" === this.game.sound.context.state && (console.info("AudioContext is suspended"), this.game.sound.setTouchLock(), this.isTouchLocked = !0) }, t.prototype.checkAudioContext = function() { var t = this;
                        this.isTouchLocked && this.game.sound.usingWebAudio && (console.info("AudioContext attempting resume"), this.game.sound.context.resume().then(function() { console.info("AudioContext resumed successfully"), t.isTouchLocked = "suspended" === t.game.sound.context.state })) }, t.prototype.addSounds = function(t) { var e = t,
                            n = Array.isArray(e),
                            i = 0; for (e = n ? e : e[Symbol.iterator]();;) { var o; if (n) { if (i >= e.length) break;
                                o = e[i++] } else { if ((i = e.next()).done) break;
                                o = i.value } var a = o;
                            this.addSound(a, a) } }, t.prototype.addSound = function(t, e) { this.sounds[t] = this.game.add.audio(e) }, t.prototype.addAudioSprites = function(t) { var e = t,
                            n = Array.isArray(e),
                            i = 0; for (e = n ? e : e[Symbol.iterator]();;) { var o; if (n) { if (i >= e.length) break;
                                o = e[i++] } else { if ((i = e.next()).done) break;
                                o = i.value } var a = o;
                            this.addAudioSprite({ id: a }) } }, t.prototype.addAudioSprite = function(t) { var e = t.id;
                        this.sprites[e] = this.game.add.audioSprite(e), this.sprites[e].allowMultiple = !0 }, t.prototype.audioSpritesAreDecoded = function() { var t = this.sprites,
                            e = Array.isArray(t),
                            n = 0; for (t = e ? t : t[Symbol.iterator]();;) { var i; if (e) { if (n >= t.length) break;
                                i = t[n++] } else { if ((n = t.next()).done) break;
                                i = n.value } var o = i.sounds,
                                a = Array.isArray(o),
                                s = 0; for (o = a ? o : o[Symbol.iterator]();;) { var r; if (a) { if (s >= o.length) break;
                                    r = o[s++] } else { if ((s = o.next()).done) break;
                                    r = s.value } if (!r.isDecoded) return !1 } } return !0 }, t.prototype.sfxExists = function(t, e) { var n = this.sprites[e] && this.sprites[e].sounds[t]; return n || console.warn("Cant find " + t + " in audiosprite " + e + ", has it been added? (config.json and assetpack)"), n }, t.prototype.soundExists = function(t) { var e = this.sounds[t]; return e || console.warn("Cant find " + t + ", has it been added? (config.json and assetpack)"), e }, t.prototype.playSFX = function(t) { var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : { volume: 1, loop: !1, delay: null, onComplete: null, onCompleteScope: null, spriteID: "games_sfx_base" },
                            n = e.volume,
                            i = e.loop,
                            o = void 0 !== i && i,
                            a = e.ignoreIfPlaying,
                            s = void 0 !== a && a,
                            r = e.delay,
                            h = void 0 === r ? null : r,
                            l = e.onComplete,
                            c = void 0 === l ? null : l,
                            u = e.onCompleteScope,
                            p = void 0 === u ? null : u,
                            d = e.spriteID,
                            f = void 0 === d ? "games_sfx_base" : d; if (this.checkAudioContext(), this.game.device.ie) return this.playSound(t, e), !0; if (this.sprites[f] && "games_sfx_base" === f && this.sprites[f].sounds[t], h) return e.delay = null, this.game.time.events.add(h, this.playSFX, this, t, e).autoDestroy = !0, !0; if (this._allowEffects && !this.isTouchLocked) { if (!this.sfxExists(t, f)) return !1; if (s && this.sprites[f].get(t).isPlaying) return !1;
                            this.sprites[f].get(t).loop = o, this.sprites[f].get(t).markers[t].loop = o, this.sprites[f].play(t, n), c && this.sprites[f].sounds[t].onStop.addOnce(c, p) } else { if (!c) return !1; var g = new Phaser.Signal;
                            g.addOnce(c, p), g.dispatch() } return !0 }, t.prototype.stopSFX = function(t) { var e = (arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : { spriteID: "games_sfx_base" }).spriteID,
                            n = void 0 === e ? "games_sfx_base" : e;
                        this.sprites[n] && "games_sfx_base" === n && (this.sprites[n].sounds[t] || (n = GAME_SFX_EXTRA)), this.sfxExists(t, n) && this.sprites[n].stop(t) }, t.prototype.stopAllSFX = function() { for (var t in this.sprites) this.sprites[t].stop() }, t.prototype.stopBackgroundMusic = function() { var t = this.backgroundMusic.id;
                        this.stopSound(t) }, t.prototype.playBackgroundMusic = function() { this.checkAudioContext(); var t = this.backgroundMusic,
                            e = t.id,
                            n = t.volume,
                            i = this.sounds[e];
                        this.stopSound(this.gameMusic.id), i && this.game.hud.isWelcomeScreen() && (this._allowMusic && !this.isTouchLocked ? i.paused || i.isPlaying || (this.backgroundAudio = i.play("", 0, 0, !0), this.backgroundAudio.volume = n) : i.paused && (i.volume = 0, i.resume(), i.fadeTo(500, n))) }, t.prototype.playGameMusic = function() { this.checkAudioContext(); var t = this.gameMusic,
                            e = t.id,
                            n = t.volume,
                            i = this.sounds[e];
                        this.stopSound(this.backgroundMusic.id), i && (this._allowMusic && !this.isTouchLocked ? i.paused || i.isPlaying || (this.backgroundAudio = i.play("", 0, 0, !0), this.backgroundAudio.volume = n) : i.paused && (i.volume = 0, i.resume(), i.fadeTo(500, n))) }, t.prototype.dimBackgroundMusic = function(t) { var e = this.backgroundMusic,
                            n = e.id,
                            i = e.volume,
                            o = this.sounds[n];
                        o.volume = t ? i / 4 : i }, t.prototype.pauseBackgroundMusic = function() { var t = this.backgroundMusic.id; if (this.game.hud.isWelcomeScreen()) { var e = this.sounds[t];
                            e && e.pause() } }, t.prototype.playSound = function(t) { var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : { volume: 1, loop: !1, delay: null, onComplete: null, onCompleteScope: null },
                            n = (e.volume, e.loop, e.ignoreIfPlaying),
                            i = void 0 !== n && n;
                        e.delay, e.onComplete, e.onCompleteScope; return !(!this._allowEffects || this.isTouchLocked) && (!!this.soundExists(t) && ((!i || !this.sounds[t].isPlaying) && (this.sounds[t].play(), !0))) }, t.prototype.stopSound = function(t) { this.sounds[t] && (this.sounds[t].pausedPosition = 0, this.sounds[t].stop()) }, t.prototype.isSoundPlaying = function(t) { return !!this.sounds[t] && this.sounds[t].isPlaying }, t.prototype.stopAllSounds = function() { for (var t in this.sounds) this.sounds[t].stop() }, t.prototype.setVolume = function(t, e) { this.backgroundMusic.id == t ? (this.backgroundMusic.volume = e, this.sounds[t].fadeTo(1e3, e)) : this.sounds[t].volume = e }, t }(),
                He = We;
            We.TITLEMUSIC_VOLUME = .2, We.GAMEMUSIC_VOLUME = 1; var ze = Object.assign || function(t) { for (var e = 1; e < arguments.length; e++) { var n = arguments[e]; for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (t[i] = n[i]) } return t }; var Fe = function() {
                function t(e) {! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.copy = {}; for (var n = e.getElementsByTagName("item"), i = 0; i < n.length; i++) this.copy[n[i].getAttribute("id")] = n[i].childNodes[0].nodeValue } return t.prototype.getCopy = function(t) { return this.copy[t] || "copy not found [ " + t + " ]" }, t.prototype.getCopyNoDefault = function(t) { return this.copy[t] || null }, t.prototype.createFontStyle = function(t) { var e = t.font,
                        n = t.font_size,
                        i = t.font_colour,
                        o = t.options,
                        a = void 0 === o ? {} : o; return ze({ font: n + "px " + e, fill: i, boundsAlignH: a.boundsAlignH || "center", boundsAlignV: a.boundsAlignV || "middle" }, a) }, t }(); var Ue = function() {
                function t(e) { var n = e.game;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.game = n } return t.prototype.updateGameSize = function() { if (this.game.scale) { var t = window.innerWidth / window.innerHeight,
                            e = Math.min(this.game.defaultHeight * t);
                        t < 1.3 ? this.displayRotateScreen() : this.game.hud.hudRotateScreen && this.game.hud.closeRotateScreen(), this.game.scale.setGameSize(e, this.game.defaultHeight), this.game.scale.setUserScale(window.innerHeight / this.game.defaultHeight) } }, t.prototype.displayRotateScreen = function() { this.game.state.current !== b && this.game.state.current !== v || this.game.controller.pauseGame(), this.game.hud.showRotateScreen(), this.game.world.bringToTop(this.game.hud.hudRotateScreen) }, t }(); var Ve = function() {
                    function t(e) { var n = e.game,
                            i = e.activate;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), this.game = n, this.bindedHandleWindowResize = this.handleWindowResize.bind(this), this.bindedWindowBlur = this.handleWindowBlur.bind(this), this.bindedWindowFocus = this.handleWindowFocus.bind(this), this.bindedVisibilityChange = this.handleVisibilityChange.bind(this), i && this.activate() } return t.prototype.activate = function() { window.addEventListener("resize", this.bindedHandleWindowResize), window.addEventListener("blur", this.bindedWindowBlur), window.addEventListener("focus", this.bindedWindowFocus), window.addEventListener("visibilitychange", this.bindedVisibilityChange) }, t.prototype.deactivate = function() { window.removeEventListener("resize", this.bindedHandleWindowResize), window.removeEventListener("blur", this.bindedWindowBlur), window.removeEventListener("focus", this.bindedWindowFocus), window.removeEventListener("visibilitychange", this.bindedVisibilityChange) }, t.prototype.handleWindowBlur = function() {}, t.prototype.handleWindowFocus = function() {}, t.prototype.handleVisibilityChange = function() {}, t.prototype.handleWindowResize = function() { this.game.aspectController.updateGameSize() }, t }(),
                qe = function(t) { var e = t.reduce(function(t, e, n) { return t.push(e.label), t }, []),
                        n = t.reduce(function(t, e, n) { return [].concat(t, e.output) }, []),
                        i = Xe(n);
                    i.labelMax = Ke(e); var o = t,
                        a = Array.isArray(o),
                        s = 0; for (o = a ? o : o[Symbol.iterator]();;) { var r; if (a) { if (s >= o.length) break;
                            r = o[s++] } else { if ((s = o.next()).done) break;
                            r = s.value } var h = r;
                        h.limits = i, Ye(h) } },
                Ye = function(t) { var e, n = t.label,
                        i = t.output,
                        o = t.limits,
                        a = 'font-family: monospace; src: local("Menlo");',
                        s = a + "background-color:red; font-weight: bold; padding:3px 10px; color:white",
                        r = ['font-family: monospace; src: local("Menlo");background-color:gainsboro; padding:3px 6px 3px 12px; color:black', 'font-family: monospace; src: local("Menlo");background-color:palegreen; font-weight: bold; padding:3px 6px; color:black'],
                        h = o || Xe(i),
                        l = "%c" + Ze(n, o.labelMax) + Je(i, h),
                        c = i.reduce(function(t, e, n) { return [].concat(t, r) }, []);
                    (e = console).info.apply(e, [l, s].concat(c)) },
                Ke = function(t) { return t.reduce(function(t, e, n) { return t = Math.max(t, e.toString().length) }, 0) },
                Xe = function(t) { return t.reduce(function(t, e, n) { return t.key = Math.max(t.key, e.key.toString().length), t.val = Math.max(t.val, e.val.toString().length), t }, { key: 0, val: 0 }) },
                Je = function(t, e) { return t.reduce(function(t, n, i) { return t += "%c" + Qe(n.key, e.key) + "%c" + Ze(n.val, e.val) }, "") },
                Qe = function(t) { var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 10; return "" + " ".repeat(Math.max(e - t.toString().length, 0)) + t },
                Ze = function(t) { var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 10; return "" + t + " ".repeat(Math.max(e - t.toString().length, 0)) },
                $e = function() {
                    function t(t, e) { for (var n = 0; n < e.length; n++) { var i = e[n];
                            i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i) } } return function(e, n, i) { return n && t(e.prototype, n), i && t(e, i), e } }(); var tn = function(t) {
                    function e(n) { var i = n.width,
                            o = n.height,
                            a = n.type,
                            s = n.parent,
                            r = void 0 === s ? l : s,
                            h = n.settings,
                            g = n.deviceController;! function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, e); var T = function(t, e) { if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !e || "object" != typeof e && "function" != typeof e ? t : e }(this, t.call(this, i, o, a, r, null, !0)),
                            x = document.getElementById(r);
                        x && (x.className = c), T.defaultWidth = u, T.defaultHeight = p, T.offsetWidth = 0, T.offsetHeight = 0, T._screenPaddingY = Math.max(T.width, T.height) * f, T._screenPaddingX = Math.max(T.width, T.height) * d, T._hud = new It(T), T._controller = new Ge({ game: T, settings: h, hud: T._hud, deviceController: g }), T._sounds = new He({ game: T, isMuted: h.getIsMuted() }), T._aspectController = new Ue({ game: T }), T._windowEventController = new Ve({ game: T, activate: !0 }), T._urls = new Be(T), T._settings = h, T._deviceController = g, T.state.add(m, U, !1), T.state.add(y, X, !1), T.state.add(v, Lt, !1), T.state.add(b, qt, !1), T.state.add(w, Kt, !1), T.state.add(C, Xt, !1), T.state.add(_, Jt, !1), T.state.add(S, Qt, !1), T.state.add(k, Zt, !1); var E = ["AUTO", "CANVAS", "WEBGL", "WEBGL_MULTI", "HEADLESS"][T.renderType] || "UNKNOWN",
                            O = [{ key: "Is old:", val: g.requiresLightVersion }, { key: "Transitions:", val: g.allowTransitionTweens }, { key: "Load type:", val: g.gameLoadType }, { key: "Renderer:", val: E }]; return qe([{ label: "Webpack", output: [{ key: "DEBUG:", val: !0 }, { key: "WATCH:", val: !1 }, { key: "SHORTCUTS:", val: !0 }, { key: "Node Env:", val: "production" }] }, { label: "Device", output: O }]), T.controller.startBoot(), T } return function(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                        t.prototype = Object.create(e && e.prototype, { constructor: { value: t, enumerable: !1, writable: !0, configurable: !0 } }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e) }(e, t), e.prototype.addCopy = function(t) { this._copy = new Fe(t) }, e.prototype.track = function(t) { window.WiseTrack && window.WiseTrack.track(t) }, e.prototype.log = function(t) { var e = "color: orange; font-weight: bold"; if (-1 !== t.indexOf("Starting Game")) console.log("\n%c" + t, e, "\n ");
                        else { for (var n = arguments.length, i = Array(n > 1 ? n - 1 : 0), o = 1; o < n; o++) i[o - 1] = arguments[o]; if (i) { var a, s = [];
                                i.forEach(function(t) { s.push(t), s.push("\n") }), (a = console).log.apply(a, ["\n%c" + t, e, "\n\n"].concat(s, ["\n "])) } else console.log("\n%c" + t, e, "\n ") } }, $e(e, [{ key: "settings", get: function() { return this._settings } }, { key: "deviceController", get: function() { return this._deviceController } }, { key: "hud", get: function() { return this._hud } }, { key: "copy", get: function() { return this._copy } }, { key: "controller", get: function() { return this._controller } }, { key: "sounds", get: function() { return this._sounds } }, { key: "aspectController", get: function() { return this._aspectController } }, { key: "windowEventController", get: function() { return this._windowEventController } }, { key: "urls", get: function() { return this._urls } }, { key: "screenPaddingY", set: function(t) { this._screenPaddingY = t }, get: function() { return this._screenPaddingY } }, { key: "screenPaddingX", set: function(t) { this._screenPaddingX = t }, get: function() { return this._screenPaddingX } }]), e }(Phaser.Game),
                en = n(50),
                nn = n.n(en); var on = null,
                an = function() {
                    function t() { return function(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }(this, t), on || (this._storageIsAllowed = nn.a.canUse(), this._storageIsAllowed || console.warn("LOCAL STORAGE DISABLED"), this._loadLocalData(), on = this), on } return t.prototype.destroy = function() { on = null }, t.prototype.toggleAudio = function() { var t = !this.getAudio(); return this._setAudio(t), { isMuted: !t } }, t.prototype.setAudio = function(t) { this._setAudio(t) }, t.prototype.getAudio = function() { return this.getAllSettings().audio }, t.prototype.getIsMuted = function() { return !this.getAllSettings().audio }, t.prototype.getAllSettings = function() { var t = JSON.parse(JSON.stringify(this.globalSettings)); return t.audio = !t.muted, this._isStorageAllowed() ? t.gameData = this.gameSettings : console.warn("getAllSettings : storage disabled"), t }, t.prototype.setGameData = function(t, e) { this._isStorageAllowed() ? (this.gameSettings[t] = e, nn.a.set("dennisGAME", JSON.stringify(this.gameSettings))) : console.warn("setGameData : storage disabled") }, t.prototype._setAudio = function(t) { this.globalSettings.muted = !t, this._saveGlobalSettings() }, t.prototype._loadLocalData = function() { this._isStorageAllowed() && (this.globalSettings = this._parseLocalStorage("dennisUI"), this.gameSettings = this._parseLocalStorage("dennisGAME") || {}, this.globalSettings || (this.globalSettings = this._getDefaultSettings(), this._saveGlobalSettings())) }, t.prototype._saveGlobalSettings = function() { this._isStorageAllowed() && nn.a.set("dennisUI", JSON.stringify(this.globalSettings)) }, t.prototype._isStorageAllowed = function() { return this._storageIsAllowed }, t.prototype._getDefaultSettings = function() { var t = { muted: !1 }; return t }, t.prototype._parseLocalStorage = function(t) { var e = nn.a.get(t); try { return JSON.parse(e) } catch (t) {} return null }, t }(),
                sn = function(t, e) { void 0 === t && console.error("Library Missing :\t", e) };
            sn(o.a, "PIXI"), sn(s.a, "p2"), sn(h.a, "Phaser"); var rn = new Pe;
            z.settings = new an({}), z.deviceController = rn, z.type = rn.getAppRenderTpye(), window.app = new tn(z) }, 139: function(t, e, n) {}, 342: function(t, e, n) { n(341), t.exports = n(132) }, 66: function(t, e, n) { var i;! function() {
                function o(t, e, n) { return t.call.apply(t.bind, arguments) }

                function a(t, e, n) { if (!t) throw Error(); if (2 < arguments.length) { var i = Array.prototype.slice.call(arguments, 2); return function() { var n = Array.prototype.slice.call(arguments); return Array.prototype.unshift.apply(n, i), t.apply(e, n) } } return function() { return t.apply(e, arguments) } }

                function s(t, e, n) { return (s = Function.prototype.bind && -1 != Function.prototype.bind.toString().indexOf("native code") ? o : a).apply(null, arguments) } var r = Date.now || function() { return +new Date }; var h = !!window.FontFace;

                function l(t, e, n, i) { if (e = t.c.createElement(e), n)
                        for (var o in n) n.hasOwnProperty(o) && ("style" == o ? e.style.cssText = n[o] : e.setAttribute(o, n[o])); return i && e.appendChild(t.c.createTextNode(i)), e }

                function c(t, e, n) {
                    (t = t.c.getElementsByTagName(e)[0]) || (t = document.documentElement), t.insertBefore(n, t.lastChild) }

                function u(t) { t.parentNode && t.parentNode.removeChild(t) }

                function p(t, e, n) { e = e || [], n = n || []; for (var i = t.className.split(/\s+/), o = 0; o < e.length; o += 1) { for (var a = !1, s = 0; s < i.length; s += 1)
                            if (e[o] === i[s]) { a = !0; break } a || i.push(e[o]) } for (e = [], o = 0; o < i.length; o += 1) { for (a = !1, s = 0; s < n.length; s += 1)
                            if (i[o] === n[s]) { a = !0; break } a || e.push(i[o]) } t.className = e.join(" ").replace(/\s+/g, " ").replace(/^\s+|\s+$/, "") }

                function d(t, e) { for (var n = t.className.split(/\s+/), i = 0, o = n.length; i < o; i++)
                        if (n[i] == e) return !0; return !1 }

                function f(t) { if ("string" == typeof t.f) return t.f; var e = t.m.location.protocol; return "about:" == e && (e = t.a.location.protocol), "https:" == e ? "https:" : "http:" }

                function g(t, e, n) {
                    function i() { r && o && a && (r(s), r = null) } e = l(t, "link", { rel: "stylesheet", href: e, media: "all" }); var o = !1,
                        a = !0,
                        s = null,
                        r = n || null;
                    h ? (e.onload = function() { o = !0, i() }, e.onerror = function() { o = !0, s = Error("Stylesheet failed to load"), i() }) : setTimeout(function() { o = !0, i() }, 0), c(t, "head", e) }

                function m(t, e, n, i) { var o = t.c.getElementsByTagName("head")[0]; if (o) { var a = l(t, "script", { src: e }),
                            s = !1; return a.onload = a.onreadystatechange = function() { s || this.readyState && "loaded" != this.readyState && "complete" != this.readyState || (s = !0, n && n(null), a.onload = a.onreadystatechange = null, "HEAD" == a.parentNode.tagName && o.removeChild(a)) }, o.appendChild(a), setTimeout(function() { s || (s = !0, n && n(Error("Script load timeout"))) }, i || 5e3), a } return null }

                function y() { this.a = 0, this.c = null }

                function b(t) { return t.a++,
                        function() { t.a--, v(t) } }

                function w(t, e) { t.c = e, v(t) }

                function v(t) { 0 == t.a && t.c && (t.c(), t.c = null) }

                function C(t) { this.a = t || "-" }

                function _(t, e) { this.c = t, this.f = 4, this.a = "n"; var n = (e || "n4").match(/^([nio])([1-9])$/i);
                    n && (this.a = n[1], this.f = parseInt(n[2], 10)) }

                function S(t) { var e = [];
                    t = t.split(/,\s*/); for (var n = 0; n < t.length; n++) { var i = t[n].replace(/['"]/g, ""); - 1 != i.indexOf(" ") || /^\d/.test(i) ? e.push("'" + i + "'") : e.push(i) } return e.join(",") }

                function k(t) { return t.a + t.f }

                function T(t) { var e = "normal"; return "o" === t.a ? e = "oblique" : "i" === t.a && (e = "italic"), e }

                function x(t) { var e = 4,
                        n = "n",
                        i = null; return t && ((i = t.match(/(normal|oblique|italic)/i)) && i[1] && (n = i[1].substr(0, 1).toLowerCase()), (i = t.match(/([1-9]00|normal|bold)/i)) && i[1] && (/bold/i.test(i[1]) ? e = 7 : /[1-9]00/.test(i[1]) && (e = parseInt(i[1].substr(0, 1), 10)))), n + e }

                function E(t) { if (t.g) { var e = d(t.f, t.a.c("wf", "active")),
                            n = [],
                            i = [t.a.c("wf", "loading")];
                        e || n.push(t.a.c("wf", "inactive")), p(t.f, n, i) } O(t, "inactive") }

                function O(t, e, n) { t.j && t.h[e] && (n ? t.h[e](n.c, k(n)) : t.h[e]()) }

                function P(t, e) { this.c = t, this.f = e, this.a = l(this.c, "span", { "aria-hidden": "true" }, this.f) }

                function A(t) { c(t.c, "body", t.a) }

                function I(t) { return "display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:" + S(t.c) + ";font-style:" + T(t) + ";font-weight:" + t.f + "00;" }

                function D(t, e, n, i, o, a) { this.g = t, this.j = e, this.a = i, this.c = n, this.f = o || 3e3, this.h = a || void 0 }

                function L(t, e, n, i, o, a, s) { this.v = t, this.B = e, this.c = n, this.a = i, this.s = s || "BESbswy", this.f = {}, this.w = o || 3e3, this.u = a || null, this.o = this.j = this.h = this.g = null, this.g = new P(this.c, this.s), this.h = new P(this.c, this.s), this.j = new P(this.c, this.s), this.o = new P(this.c, this.s), t = I(t = new _(this.a.c + ",serif", k(this.a))), this.g.a.style.cssText = t, t = I(t = new _(this.a.c + ",sans-serif", k(this.a))), this.h.a.style.cssText = t, t = I(t = new _("serif", k(this.a))), this.j.a.style.cssText = t, t = I(t = new _("sans-serif", k(this.a))), this.o.a.style.cssText = t, A(this.g), A(this.h), A(this.j), A(this.o) } C.prototype.c = function(t) { for (var e = [], n = 0; n < arguments.length; n++) e.push(arguments[n].replace(/[\W_]+/g, "").toLowerCase()); return e.join(this.a) }, D.prototype.start = function() { var t = this.c.m.document,
                        e = this,
                        n = r(),
                        i = new Promise(function(i, o) {! function a() { r() - n >= e.f ? o() : t.fonts.load(function(t) { return T(t) + " " + t.f + "00 300px " + S(t.c) }(e.a), e.h).then(function(t) { 1 <= t.length ? i() : setTimeout(a, 25) }, function() { o() }) }() }),
                        o = new Promise(function(t, n) { setTimeout(n, e.f) });
                    Promise.race([o, i]).then(function() { e.g(e.a) }, function() { e.j(e.a) }) }; var M = { D: "serif", C: "sans-serif" },
                    R = null;

                function j() { if (null === R) { var t = /AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);
                        R = !!t && (536 > parseInt(t[1], 10) || 536 === parseInt(t[1], 10) && 11 >= parseInt(t[2], 10)) } return R }

                function N(t, e, n) { for (var i in M)
                        if (M.hasOwnProperty(i) && e === t.f[M[i]] && n === t.f[M[i]]) return !0; return !1 }

                function G(t) { var e, n = t.g.a.offsetWidth,
                        i = t.h.a.offsetWidth;
                    (e = n === t.f.serif && i === t.f["sans-serif"]) || (e = j() && N(t, n, i)), e ? r() - t.A >= t.w ? j() && N(t, n, i) && (null === t.u || t.u.hasOwnProperty(t.a.c)) ? B(t, t.v) : B(t, t.B) : function(t) { setTimeout(s(function() { G(this) }, t), 50) }(t) : B(t, t.v) }

                function B(t, e) { setTimeout(s(function() { u(this.g.a), u(this.h.a), u(this.j.a), u(this.o.a), e(this.a) }, t), 0) }

                function W(t, e, n) { this.c = t, this.a = e, this.f = 0, this.o = this.j = !1, this.s = n } L.prototype.start = function() { this.f.serif = this.j.a.offsetWidth, this.f["sans-serif"] = this.o.a.offsetWidth, this.A = r(), G(this) }; var H = null;

                function z(t) { 0 == --t.f && t.j && (t.o ? ((t = t.a).g && p(t.f, [t.a.c("wf", "active")], [t.a.c("wf", "loading"), t.a.c("wf", "inactive")]), O(t, "active")) : E(t.a)) }

                function F(t) { this.j = t, this.a = new function() { this.c = {} }, this.h = 0, this.f = this.g = !0 }

                function U(t, e, n, i, o) { var a = 0 == --t.h;
                    (t.f || t.g) && setTimeout(function() { var t = o || null,
                            r = i || {}; if (0 === n.length && a) E(e.a);
                        else { e.f += n.length, a && (e.j = a); var h, l = []; for (h = 0; h < n.length; h++) { var c = n[h],
                                    u = r[c.c],
                                    d = e.a,
                                    f = c;
                                d.g && p(d.f, [d.a.c("wf", f.c, k(f).toString(), "loading")]), O(d, "fontloading", f), d = null, null === H && (H = !!window.FontFace && (!(f = /Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent)) || 42 < parseInt(f[1], 10))), d = H ? new D(s(e.g, e), s(e.h, e), e.c, c, e.s, u) : new L(s(e.g, e), s(e.h, e), e.c, c, e.s, t, u), l.push(d) } for (h = 0; h < l.length; h++) l[h].start() } }, 0) }

                function V(t, e) { this.c = t, this.a = e }

                function q(t, e) { this.c = t, this.a = e } W.prototype.g = function(t) { var e = this.a;
                    e.g && p(e.f, [e.a.c("wf", t.c, k(t).toString(), "active")], [e.a.c("wf", t.c, k(t).toString(), "loading"), e.a.c("wf", t.c, k(t).toString(), "inactive")]), O(e, "fontactive", t), this.o = !0, z(this) }, W.prototype.h = function(t) { var e = this.a; if (e.g) { var n = d(e.f, e.a.c("wf", t.c, k(t).toString(), "active")),
                            i = [],
                            o = [e.a.c("wf", t.c, k(t).toString(), "loading")];
                        n || i.push(e.a.c("wf", t.c, k(t).toString(), "inactive")), p(e.f, i, o) } O(e, "fontinactive", t), z(this) }, F.prototype.load = function(t) { this.c = new function(t, e) { this.a = t, this.m = e || t, this.c = this.m.document }(this.j, t.context || this.j), this.g = !1 !== t.events, this.f = !1 !== t.classes,
                        function(t, e, n) { var i = [],
                                o = n.timeout;! function(t) { t.g && p(t.f, [t.a.c("wf", "loading")]), O(t, "loading") }(e); var i = function(t, e, n) { var i, o = []; for (i in e)
                                        if (e.hasOwnProperty(i)) { var a = t.c[i];
                                            a && o.push(a(e[i], n)) } return o }(t.a, n, t.c),
                                a = new W(t.c, e, o); for (t.h = i.length, e = 0, n = i.length; e < n; e++) i[e].load(function(e, n, i) { U(t, a, e, n, i) }) }(this, new function(t, e) { this.c = t, this.f = t.m.document.documentElement, this.h = e, this.a = new C("-"), this.j = !1 !== e.events, this.g = !1 !== e.classes }(this.c, t), t) }, V.prototype.load = function(t) { var e = this,
                        n = e.a.projectId,
                        i = e.a.version; if (n) { var o = e.c.m;
                        m(this.c, function(t, e, n) { return f(t.c) + "//" + (t = (t.a.api || "fast.fonts.net/jsapi").replace(/^.*http(s?):(\/\/)?/, "")) + "/" + e + ".js" + (n ? "?v=" + n : "") }(e, n, i), function(i) { i ? t([]) : (o["__MonotypeConfiguration__" + n] = function() { return e.a }, function e() { if (o["__mti_fntLst" + n]) { var i, a = o["__mti_fntLst" + n](),
                                        s = []; if (a)
                                        for (var r = 0; r < a.length; r++) { var h = a[r].fontfamily;
                                            void 0 != a[r].fontStyle && void 0 != a[r].fontWeight ? (i = a[r].fontStyle + a[r].fontWeight, s.push(new _(h, i))) : s.push(new _(h)) } t(s) } else setTimeout(function() { e() }, 50) }()) }).id = "__MonotypeAPIScript__" + n } else t([]) }, q.prototype.load = function(t) { var e, n, i = this.a.urls || [],
                        o = this.a.families || [],
                        a = this.a.testStrings || {},
                        s = new y; for (e = 0, n = i.length; e < n; e++) g(this.c, i[e], b(s)); var r = []; for (e = 0, n = o.length; e < n; e++)
                        if ((i = o[e].split(":"))[1])
                            for (var h = i[1].split(","), l = 0; l < h.length; l += 1) r.push(new _(i[0], h[l]));
                        else r.push(new _(i[0]));
                    w(s, function() { t(r, a) }) }; var Y = "//fonts.googleapis.com/css"; var K = { latin: "BESbswy", "latin-ext": "çöüğş", cyrillic: "йяЖ", greek: "αβΣ", khmer: "កខគ", Hanuman: "កខគ" },
                    X = { thin: "1", extralight: "2", "extra-light": "2", ultralight: "2", "ultra-light": "2", light: "3", regular: "4", book: "4", medium: "5", "semi-bold": "6", semibold: "6", "demi-bold": "6", demibold: "6", bold: "7", "extra-bold": "8", extrabold: "8", "ultra-bold": "8", ultrabold: "8", black: "9", heavy: "9", l: "3", r: "4", b: "7" },
                    J = { i: "i", italic: "i", n: "n", normal: "n" },
                    Q = /^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;

                function Z(t, e) { this.c = t, this.a = e } var $ = { Arimo: !0, Cousine: !0, Tinos: !0 };

                function tt(t, e) { this.c = t, this.a = e }

                function et(t, e) { this.c = t, this.f = e, this.a = [] } Z.prototype.load = function(t) { var e = new y,
                        n = this.c,
                        i = new function(t, e, n) { this.c = t || e + Y, this.a = [], this.f = [], this.g = n || "" }(this.a.api, f(n), this.a.text),
                        o = this.a.families;! function(t, e) { for (var n = e.length, i = 0; i < n; i++) { var o = e[i].split(":");
                            3 == o.length && t.f.push(o.pop()); var a = "";
                            2 == o.length && "" != o[1] && (a = ":"), t.a.push(o.join(a)) } }(i, o); var a = new function(t) { this.f = t, this.a = [], this.c = {} }(o);! function(t) { for (var e = t.f.length, n = 0; n < e; n++) { var i = t.f[n].split(":"),
                                o = i[0].replace(/\+/g, " "),
                                a = ["n4"]; if (2 <= i.length) { var s; if (s = [], r = i[1])
                                    for (var r, h = (r = r.split(",")).length, l = 0; l < h; l++) { var c; if ((c = r[l]).match(/^[\w-]+$/))
                                            if (null == (p = Q.exec(c.toLowerCase()))) c = "";
                                            else { if (c = null == (c = p[2]) || "" == c ? "n" : J[c], null == (p = p[1]) || "" == p) p = "4";
                                                else var u = X[p],
                                                    p = u || (isNaN(p) ? "4" : p.substr(0, 1));
                                                c = [c, p].join("") } else c = "";
                                        c && s.push(c) } 0 < s.length && (a = s), 3 == i.length && (s = [], 0 < (i = (i = i[2]) ? i.split(",") : s).length && (i = K[i[0]]) && (t.c[o] = i)) } for (t.c[o] || (i = K[o]) && (t.c[o] = i), i = 0; i < a.length; i += 1) t.a.push(new _(o, a[i])) } }(a), g(n, function(t) { if (0 == t.a.length) throw Error("No fonts to load!"); if (-1 != t.c.indexOf("kit=")) return t.c; for (var e = t.a.length, n = [], i = 0; i < e; i++) n.push(t.a[i].replace(/ /g, "+")); return e = t.c + "?family=" + n.join("%7C"), 0 < t.f.length && (e += "&subset=" + t.f.join(",")), 0 < t.g.length && (e += "&text=" + encodeURIComponent(t.g)), e }(i), b(e)), w(e, function() { t(a.a, a.c, $) }) }, tt.prototype.load = function(t) { var e = this.a.id,
                        n = this.c.m;
                    e ? m(this.c, (this.a.api || "https://use.typekit.net") + "/" + e + ".js", function(e) { if (e) t([]);
                        else if (n.Typekit && n.Typekit.config && n.Typekit.config.fn) { e = n.Typekit.config.fn; for (var i = [], o = 0; o < e.length; o += 2)
                                for (var a = e[o], s = e[o + 1], r = 0; r < s.length; r++) i.push(new _(a, s[r])); try { n.Typekit.load({ events: !1, classes: !1, async: !0 }) } catch (t) {} t(i) } }, 2e3) : t([]) }, et.prototype.load = function(t) { var e = this.f.id,
                        n = this.c.m,
                        i = this;
                    e ? (n.__webfontfontdeckmodule__ || (n.__webfontfontdeckmodule__ = {}), n.__webfontfontdeckmodule__[e] = function(e, n) { for (var o = 0, a = n.fonts.length; o < a; ++o) { var s = n.fonts[o];
                            i.a.push(new _(s.name, x("font-weight:" + s.weight + ";font-style:" + s.style))) } t(i.a) }, m(this.c, f(this.c) + (this.f.api || "//f.fontdeck.com/s/css/js/") + function(t) { return t.m.location.hostname || t.a.location.hostname }(this.c) + "/" + e + ".js", function(e) { e && t([]) })) : t([]) }; var nt = new F(window);
                nt.a.c.custom = function(t, e) { return new q(e, t) }, nt.a.c.fontdeck = function(t, e) { return new et(e, t) }, nt.a.c.monotype = function(t, e) { return new V(e, t) }, nt.a.c.typekit = function(t, e) { return new tt(e, t) }, nt.a.c.google = function(t, e) { return new Z(e, t) }; var it = { load: s(nt.load, nt) };
                void 0 === (i = function() { return it }.call(e, n, e, t)) || (t.exports = i) }() } },
    [
        [342, 0]
    ]
]);