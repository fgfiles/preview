!function(t){function e(t){delete installedChunks[t]}function i(t){var e=document.getElementsByTagName("head")[0],i=document.createElement("script");i.type="text/javascript",i.charset="utf-8",i.src=d.p+""+t+"."+T+".hot-update.js",e.appendChild(i)}function n(){return new Promise(function(t,e){if("undefined"==typeof XMLHttpRequest)return e(new Error("No browser support"));try{var i=new XMLHttpRequest,n=d.p+""+T+".hot-update.json";i.open("GET",n,!0),i.timeout=1e4,i.send(null)}catch(t){return e(t)}i.onreadystatechange=function(){if(4===i.readyState)if(0===i.status)e(new Error("Manifest request to "+n+" timed out."));else if(404===i.status)t();else if(200!==i.status&&304!==i.status)e(new Error("Manifest request to "+n+" failed."));else{try{var r=JSON.parse(i.responseText)}catch(t){return void e(t)}t(r)}}})}function r(t){var e=C[t];if(!e)return d;var i=function(i){return e.hot.active?(C[i]?C[i].parents.indexOf(t)<0&&C[i].parents.push(t):(S=[t],m=i),e.children.indexOf(i)<0&&e.children.push(i)):(console.warn("[HMR] unexpected require("+i+") from disposed module "+t),S=[]),d(i)};for(var n in d)Object.prototype.hasOwnProperty.call(d,n)&&"e"!==n&&Object.defineProperty(i,n,function(t){return{configurable:!0,enumerable:!0,get:function(){return d[t]},set:function(e){d[t]=e}}}(n));return i.e=function(t){function e(){x--,"prepare"===I&&(P[t]||l(t),0===x&&0===w&&c())}return"ready"===I&&o("prepare"),x++,d.e(t).then(e,function(t){throw e(),t})},i}function a(t){var e={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:m!==t,active:!0,accept:function(t,i){if(void 0===t)e._selfAccepted=!0;else if("function"==typeof t)e._selfAccepted=t;else if("object"==typeof t)for(var n=0;n<t.length;n++)e._acceptedDependencies[t[n]]=i||function(){};else e._acceptedDependencies[t]=i||function(){}},decline:function(t){if(void 0===t)e._selfDeclined=!0;else if("object"==typeof t)for(var i=0;i<t.length;i++)e._declinedDependencies[t[i]]=!0;else e._declinedDependencies[t]=!0},dispose:function(t){e._disposeHandlers.push(t)},addDisposeHandler:function(t){e._disposeHandlers.push(t)},removeDisposeHandler:function(t){var i=e._disposeHandlers.indexOf(t);i>=0&&e._disposeHandlers.splice(i,1)},check:h,apply:f,status:function(t){if(!t)return I;A.push(t)},addStatusHandler:function(t){A.push(t)},removeStatusHandler:function(t){var e=A.indexOf(t);e>=0&&A.splice(e,1)},data:E[t]};return m=void 0,e}function o(t){I=t;for(var e=0;e<A.length;e++)A[e].call(null,t)}function s(t){return+t+""===t?+t:t}function h(t){if("idle"!==I)throw new Error("check() is only allowed in idle status");return _=t,o("check"),n().then(function(t){if(!t)return o("idle"),null;M={},P={},O=t.c,y=t.h,o("prepare");var e=new Promise(function(t,e){v={resolve:t,reject:e}});g={};return l(0),"prepare"===I&&0===x&&0===w&&c(),e})}function u(t,e){if(O[t]&&M[t]){M[t]=!1;for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(g[i]=e[i]);0==--w&&0===x&&c()}}function l(t){O[t]?(M[t]=!0,w++,i(t)):P[t]=!0}function c(){o("ready");var t=v;if(v=null,t)if(_)f(_).then(function(e){t.resolve(e)},function(e){t.reject(e)});else{var e=[];for(var i in g)Object.prototype.hasOwnProperty.call(g,i)&&e.push(s(i));t.resolve(e)}}function f(i){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];t.indexOf(n)<0&&t.push(n)}}if("ready"!==I)throw new Error("apply() is only allowed in ready status");i=i||{};var r,a,h,u,l,c={},f=[],p={},m=function(){console.warn("[HMR] unexpected require("+_.moduleId+") to disposed module")};for(var v in g)if(Object.prototype.hasOwnProperty.call(g,v)){l=s(v);var _;_=g[v]?function(t){for(var e=[t],i={},r=e.slice().map(function(t){return{chain:[t],id:t}});r.length>0;){var a=r.pop(),o=a.id,s=a.chain;if((u=C[o])&&!u.hot._selfAccepted){if(u.hot._selfDeclined)return{type:"self-declined",chain:s,moduleId:o};if(u.hot._main)return{type:"unaccepted",chain:s,moduleId:o};for(var h=0;h<u.parents.length;h++){var l=u.parents[h],c=C[l];if(c){if(c.hot._declinedDependencies[o])return{type:"declined",chain:s.concat([l]),moduleId:o,parentId:l};e.indexOf(l)>=0||(c.hot._acceptedDependencies[o]?(i[l]||(i[l]=[]),n(i[l],[o])):(delete i[l],e.push(l),r.push({chain:s.concat([l]),id:l})))}}}}return{type:"accepted",moduleId:t,outdatedModules:e,outdatedDependencies:i}}(l):{type:"disposed",moduleId:v};var b=!1,A=!1,w=!1,x="";switch(_.chain&&(x="\nUpdate propagation: "+_.chain.join(" -> ")),_.type){case"self-declined":i.onDeclined&&i.onDeclined(_),i.ignoreDeclined||(b=new Error("Aborted because of self decline: "+_.moduleId+x));break;case"declined":i.onDeclined&&i.onDeclined(_),i.ignoreDeclined||(b=new Error("Aborted because of declined dependency: "+_.moduleId+" in "+_.parentId+x));break;case"unaccepted":i.onUnaccepted&&i.onUnaccepted(_),i.ignoreUnaccepted||(b=new Error("Aborted because "+l+" is not accepted"+x));break;case"accepted":i.onAccepted&&i.onAccepted(_),A=!0;break;case"disposed":i.onDisposed&&i.onDisposed(_),w=!0;break;default:throw new Error("Unexception type "+_.type)}if(b)return o("abort"),Promise.reject(b);if(A){p[l]=g[l],n(f,_.outdatedModules);for(l in _.outdatedDependencies)Object.prototype.hasOwnProperty.call(_.outdatedDependencies,l)&&(c[l]||(c[l]=[]),n(c[l],_.outdatedDependencies[l]))}w&&(n(f,[_.moduleId]),p[l]=m)}var P=[];for(a=0;a<f.length;a++)l=f[a],C[l]&&C[l].hot._selfAccepted&&P.push({module:l,errorHandler:C[l].hot._selfAccepted});o("dispose"),Object.keys(O).forEach(function(t){!1===O[t]&&e(t)});for(var M,R=f.slice();R.length>0;)if(l=R.pop(),u=C[l]){var k={},D=u.hot._disposeHandlers;for(h=0;h<D.length;h++)(r=D[h])(k);for(E[l]=k,u.hot.active=!1,delete C[l],h=0;h<u.children.length;h++){var L=C[u.children[h]];L&&((M=L.parents.indexOf(l))>=0&&L.parents.splice(M,1))}}var N,G;for(l in c)if(Object.prototype.hasOwnProperty.call(c,l)&&(u=C[l]))for(G=c[l],h=0;h<G.length;h++)N=G[h],(M=u.children.indexOf(N))>=0&&u.children.splice(M,1);o("apply"),T=y;for(l in p)Object.prototype.hasOwnProperty.call(p,l)&&(t[l]=p[l]);var F=null;for(l in c)if(Object.prototype.hasOwnProperty.call(c,l)){u=C[l],G=c[l];var U=[];for(a=0;a<G.length;a++)N=G[a],r=u.hot._acceptedDependencies[N],U.indexOf(r)>=0||U.push(r);for(a=0;a<U.length;a++){r=U[a];try{r(G)}catch(t){i.onErrored&&i.onErrored({type:"accept-errored",moduleId:l,dependencyId:G[a],error:t}),i.ignoreErrored||F||(F=t)}}}for(a=0;a<P.length;a++){var B=P[a];l=B.module,S=[l];try{d(l)}catch(t){if("function"==typeof B.errorHandler)try{B.errorHandler(t)}catch(e){i.onErrored&&i.onErrored({type:"self-accept-error-handler-errored",moduleId:l,error:e,orginalError:t}),i.ignoreErrored||F||(F=e),F||(F=t)}else i.onErrored&&i.onErrored({type:"self-accept-errored",moduleId:l,error:t}),i.ignoreErrored||F||(F=t)}}return F?(o("fail"),Promise.reject(F)):(o("idle"),new Promise(function(t){t(f)}))}function d(e){if(C[e])return C[e].exports;var i=C[e]={i:e,l:!1,exports:{},hot:a(e),parents:(b=S,S=[],b),children:[]};return t[e].call(i.exports,i,i.exports,r(e)),i.l=!0,i.exports}var p=this.webpackHotUpdate;this.webpackHotUpdate=function(t,e){u(t,e),p&&p(t,e)};var m,v,g,y,_=!0,T="b562e9bb26b9a238b756",E={},S=[],b=[],A=[],I="idle",w=0,x=0,P={},M={},O={},C={};d.m=t,d.c=C,d.i=function(t){return t},d.d=function(t,e,i){d.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},d.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return d.d(e,"a",e),e},d.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},d.p="/",d.h=function(){return T},r(606)(d.s=606)}([function(t,e,i){var n=i(2),r=i(28),a=i(18),o=i(19),s=i(29),h=function(t,e,i){var u,l,c,f,d=t&h.F,p=t&h.G,m=t&h.S,v=t&h.P,g=t&h.B,y=p?n:m?n[e]||(n[e]={}):(n[e]||{}).prototype,_=p?r:r[e]||(r[e]={}),T=_.prototype||(_.prototype={});p&&(i=e);for(u in i)l=!d&&y&&void 0!==y[u],c=(l?y:i)[u],f=g&&l?s(c,n):v&&"function"==typeof c?s(Function.call,c):c,y&&o(y,u,c,t&h.U),_[u]!=c&&a(_,u,f),v&&T[u]!=c&&(T[u]=c)};n.core=r,h.F=1,h.G=2,h.S=4,h.P=8,h.B=16,h.W=32,h.U=64,h.R=128,t.exports=h},function(t,e,i){var n=i(6);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,e,i){"use strict";e.__esModule=!0;e.VERSION="4.8.2",e.PI_2=2*Math.PI,e.RAD_TO_DEG=180/Math.PI,e.DEG_TO_RAD=Math.PI/180,e.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},e.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19},e.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},e.SCALE_MODES={LINEAR:0,NEAREST:1},e.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},e.GC_MODES={AUTO:0,MANUAL:1},e.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,e.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},e.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},e.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},e.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},e.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.autoDetectRenderer=e.Application=e.Filter=e.SpriteMaskFilter=e.Quad=e.RenderTarget=e.ObjectRenderer=e.WebGLManager=e.Shader=e.CanvasRenderTarget=e.TextureUvs=e.VideoBaseTexture=e.BaseRenderTexture=e.RenderTexture=e.BaseTexture=e.TextureMatrix=e.Texture=e.Spritesheet=e.CanvasGraphicsRenderer=e.GraphicsRenderer=e.GraphicsData=e.Graphics=e.TextMetrics=e.TextStyle=e.Text=e.SpriteRenderer=e.CanvasTinter=e.CanvasSpriteRenderer=e.Sprite=e.TransformBase=e.TransformStatic=e.Transform=e.Container=e.DisplayObject=e.Bounds=e.glCore=e.WebGLRenderer=e.CanvasRenderer=e.ticker=e.utils=e.settings=void 0;var a=i(3);Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})});var o=i(15);Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})});var s=i(26);Object.defineProperty(e,"glCore",{enumerable:!0,get:function(){return r(s).default}});var h=i(137);Object.defineProperty(e,"Bounds",{enumerable:!0,get:function(){return r(h).default}});var u=i(213);Object.defineProperty(e,"DisplayObject",{enumerable:!0,get:function(){return r(u).default}});var l=i(70);Object.defineProperty(e,"Container",{enumerable:!0,get:function(){return r(l).default}});var c=i(214);Object.defineProperty(e,"Transform",{enumerable:!0,get:function(){return r(c).default}});var f=i(215);Object.defineProperty(e,"TransformStatic",{enumerable:!0,get:function(){return r(f).default}});var d=i(138);Object.defineProperty(e,"TransformBase",{enumerable:!0,get:function(){return r(d).default}});var p=i(142);Object.defineProperty(e,"Sprite",{enumerable:!0,get:function(){return r(p).default}});var m=i(541);Object.defineProperty(e,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return r(m).default}});var v=i(143);Object.defineProperty(e,"CanvasTinter",{enumerable:!0,get:function(){return r(v).default}});var g=i(543);Object.defineProperty(e,"SpriteRenderer",{enumerable:!0,get:function(){return r(g).default}});var y=i(545);Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return r(y).default}});var _=i(226);Object.defineProperty(e,"TextStyle",{enumerable:!0,get:function(){return r(_).default}});var T=i(225);Object.defineProperty(e,"TextMetrics",{enumerable:!0,get:function(){return r(T).default}});var E=i(513);Object.defineProperty(e,"Graphics",{enumerable:!0,get:function(){return r(E).default}});var S=i(216);Object.defineProperty(e,"GraphicsData",{enumerable:!0,get:function(){return r(S).default}});var b=i(516);Object.defineProperty(e,"GraphicsRenderer",{enumerable:!0,get:function(){return r(b).default}});var A=i(514);Object.defineProperty(e,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return r(A).default}});var I=i(546);Object.defineProperty(e,"Spritesheet",{enumerable:!0,get:function(){return r(I).default}});var w=i(44);Object.defineProperty(e,"Texture",{enumerable:!0,get:function(){return r(w).default}});var x=i(228);Object.defineProperty(e,"TextureMatrix",{enumerable:!0,get:function(){return r(x).default}});var P=i(63);Object.defineProperty(e,"BaseTexture",{enumerable:!0,get:function(){return r(P).default}});var M=i(144);Object.defineProperty(e,"RenderTexture",{enumerable:!0,get:function(){return r(M).default}});var O=i(227);Object.defineProperty(e,"BaseRenderTexture",{enumerable:!0,get:function(){return r(O).default}});var C=i(230);Object.defineProperty(e,"VideoBaseTexture",{enumerable:!0,get:function(){return r(C).default}});var R=i(229);Object.defineProperty(e,"TextureUvs",{enumerable:!0,get:function(){return r(R).default}});var k=i(220);Object.defineProperty(e,"CanvasRenderTarget",{enumerable:!0,get:function(){return r(k).default}});var D=i(69);Object.defineProperty(e,"Shader",{enumerable:!0,get:function(){return r(D).default}});var L=i(72);Object.defineProperty(e,"WebGLManager",{enumerable:!0,get:function(){return r(L).default}});var N=i(96);Object.defineProperty(e,"ObjectRenderer",{enumerable:!0,get:function(){return r(N).default}});var G=i(97);Object.defineProperty(e,"RenderTarget",{enumerable:!0,get:function(){return r(G).default}});var F=i(224);Object.defineProperty(e,"Quad",{enumerable:!0,get:function(){return r(F).default}});var U=i(223);Object.defineProperty(e,"SpriteMaskFilter",{enumerable:!0,get:function(){return r(U).default}});var B=i(222);Object.defineProperty(e,"Filter",{enumerable:!0,get:function(){return r(B).default}});var j=i(211);Object.defineProperty(e,"Application",{enumerable:!0,get:function(){return r(j).default}});var V=i(212);Object.defineProperty(e,"autoDetectRenderer",{enumerable:!0,get:function(){return V.autoDetectRenderer}});var X=i(7),H=n(X),Y=i(145),W=n(Y),z=i(13),q=r(z),K=i(71),Z=r(K),J=i(95),Q=r(J);e.settings=q.default,e.utils=H,e.ticker=W,e.CanvasRenderer=Z.default,e.WebGLRenderer=Q.default},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function a(){return++B}function o(t,e){return e=e||[],e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function s(t){return t=t.toString(16),"#"+(t="000000".substr(0,6-t.length)+t)}function h(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}function u(t,e){var i=I.default.RETINA_PREFIX.exec(t);return i?parseFloat(i[1]):void 0!==e?e:1}function l(t){var e=b.DATA_URI.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}function c(t){var e=b.URL_FILE_EXTENSION.exec(t);if(e)return e[1].toLowerCase()}function f(t){var e=b.SVG_SIZE.exec(t),i={};return e&&(i[e[1]]=Math.round(parseFloat(e[3])),i[e[5]]=Math.round(parseFloat(e[7]))),i}function d(){j=!0}function p(t){if(!j){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=["\n %c %c %c PixiJS "+b.VERSION+" - ✰ "+t+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,e)}else window.console&&window.console.log("PixiJS "+b.VERSION+" - "+t+" - http://www.pixijs.com/");j=!0}}function m(){var t={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),n=!(!i||!i.getContextAttributes().stencil);if(i){var r=i.getExtension("WEBGL_lose_context");r&&r.loseContext()}return i=null,n}catch(t){return!1}}function v(t){return 0===t?0:t<0?-1:1}function g(){var t=void 0;for(t in V)V[t].destroy();for(t in X)X[t].destroy()}function y(){var t=void 0;for(t in V)delete V[t];for(t in X)delete X[t]}function _(t,e){return H[e?1:0][t]}function T(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var i=t>>16&255,n=t>>8&255,r=255&t;return i=i*e+.5|0,n=n*e+.5|0,r=r*e+.5|0,(255*e<<24)+(i<<16)+(n<<8)+r}function E(t,e,i,n){return i=i||new Float32Array(4),n||void 0===n?(i[0]=t[0]*e,i[1]=t[1]*e,i[2]=t[2]*e):(i[0]=t[0],i[1]=t[1],i[2]=t[2]),i[3]=e,i}function S(t,e,i,n){return i=i||new Float32Array(4),i[0]=(t>>16&255)/255,i[1]=(t>>8&255)/255,i[2]=(255&t)/255,(n||void 0===n)&&(i[0]*=e,i[1]*=e,i[2]*=e),i[3]=e,i}e.__esModule=!0,e.premultiplyBlendMode=e.BaseTextureCache=e.TextureCache=e.earcut=e.mixins=e.pluginTarget=e.EventEmitter=e.removeItems=e.isMobile=void 0,e.uid=a,e.hex2rgb=o,e.hex2string=s,e.rgb2hex=h,e.getResolutionOfUrl=u,e.decomposeDataUri=l,e.getUrlFileExtension=c,e.getSvgSize=f,e.skipHello=d,e.sayHello=p,e.isWebGLSupported=m,e.sign=v,e.destroyTextureCache=g,e.clearTextureCache=y,e.correctBlendMode=_,e.premultiplyTint=T,e.premultiplyRgba=E,e.premultiplyTintToRgba=S;var b=i(3),A=i(13),I=r(A),w=i(57),x=r(w),P=i(553),M=r(P),O=i(552),C=n(O),R=i(135),k=n(R),D=i(601),L=r(D),N=i(550),G=r(N),F=i(134),U=r(F),B=0,j=!1;e.isMobile=k,e.removeItems=L.default,e.EventEmitter=x.default,e.pluginTarget=M.default,e.mixins=C,e.earcut=U.default;var V=e.TextureCache=Object.create(null),X=e.BaseTextureCache=Object.create(null),H=e.premultiplyBlendMode=(0,G.default)()},function(t,e,i){var n=i(90)("wks"),r=i(56),a=i(2).Symbol,o="function"==typeof a;(t.exports=function(t){return n[t]||(n[t]=o&&a[t]||(o?a:r)("Symbol."+t))}).store=n},function(t,e,i){t.exports=!i(4)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,i){var n=i(1),r=i(174),a=i(36),o=Object.defineProperty;e.f=i(9)?Object.defineProperty:function(t,e,i){if(n(t),e=a(e,!0),n(i),r)try{return o(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},function(t,e,i){var n=i(35),r=Math.min;t.exports=function(t){return t>0?r(n(t),9007199254740991):0}},function(t,e,i){var n=i(33);t.exports=function(t){return Object(n(t))}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(551),a=n(r),o=i(549),s=n(o);e.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,a.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,s.default)(),MESH_CANVAS_PADDING:0}},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(17),h=i(45),u=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.spriteIndex=t,i.texture=h.spriteInfo[i.spriteIndex].texture,i.data=h.spriteInfo[i.spriteIndex].data,i.animId=-1,i.currentAFrame=0,i.currentTime=0,i.isLoop=!0,i.isFinish=!1,i}return a(e,t),o(e,[{key:"PrepareAnim",value:function(t){for(var e=this.data.anims[this.animId],i=e.aFramesCount,n=i-this.children.length,r=0;r<n;r++){var a=new s(this.spriteIndex);this.addChild(a)}for(var o=0;o<this.children.length;o++){var h=this.getChildAt(o),u=this.data.aframe[e.aFramesStartIndex+o];o<i?(h.SetFrame(u.frameIndex),h.position.set(u.ox,u.oy),h.scale.set(u.scaleX,u.scaleY),h.rotation=u.rotation*Math.PI/180,h.visible=!0):h.visible=!1}}},{key:"SetTouchable",value:function(t){if(this.interactive=t,t){var e=this.data.anims[this.animId],i=this.data.aframe[e.aFramesStartIndex],n=this.data.frames[i.frameIndex].rect[0].Clone();n.Scale(i.scaleX,i.scaleY),this.hitArea=new PIXI.Rectangle(n.x,n.y,n.width,n.height)}}},{key:"SetAnim",value:function(t,e){this.currentAFrame=0,this.currentTime=0,this.isLoop=e,this.isFinish=!1,this.animId!=t&&(this.animId=t,this.PrepareAnim(this.animId)),this.SetCurrentAFrame(this.currentAFrame)}},{key:"SetCurrentAFrame",value:function(t){for(var e=0;e<this.children.length;e++){var i=this.getChildAt(e);i.visible=e==t}}},{key:"Update",value:function(t){var e=this.data.anims[this.animId];if(e){var i=this.data.aframe[e.aFramesStartIndex+this.currentAFrame],n=i.time/60,r=e.aFramesCount;this.currentTime>=n&&(this.currentTime-=n,this.currentAFrame<r&&this.currentAFrame++,this.currentAFrame>=r&&(this.isFinish=!0,this.isLoop?this.currentAFrame=0:this.currentAFrame=r-1),this.SetCurrentAFrame(this.currentAFrame)),this.currentTime+=t}}},{key:"GetRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.data.anims[this.animId],i=this.data.aframe[e.aFramesStartIndex+this.currentAFrame],n=this.data.frames[i.frameIndex].rect[t];return n.Clone&&(n=n.Clone(),n.Scale(i.scaleX,i.scaleY)),n}},{key:"GetTransformRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.GetRect(t);return e.Scale(this.scale.x,this.scale.y),e.Translate(this.position.x,this.position.y),e}},{key:"Clone",value:function(){var t=new e(this.spriteIndex);return t.SetAnim(this.animId,!0),t}},{key:"Tint",value:function(t){var e=!0,i=!1,n=void 0;try{for(var r,a=this.children[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){r.value.Tint(t)}}catch(t){i=!0,n=t}finally{try{!e&&a.return&&a.return()}finally{if(i)throw n}}}}]),e}(PIXI.Container);t.exports=u},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(140);Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return n(r).default}});var a=i(218);Object.defineProperty(e,"ObservablePoint",{enumerable:!0,get:function(){return n(a).default}});var o=i(139);Object.defineProperty(e,"Matrix",{enumerable:!0,get:function(){return n(o).default}});var s=i(217);Object.defineProperty(e,"GroupD8",{enumerable:!0,get:function(){return n(s).default}});var h=i(523);Object.defineProperty(e,"Circle",{enumerable:!0,get:function(){return n(h).default}});var u=i(524);Object.defineProperty(e,"Ellipse",{enumerable:!0,get:function(){return n(u).default}});var l=i(525);Object.defineProperty(e,"Polygon",{enumerable:!0,get:function(){return n(l).default}});var c=i(141);Object.defineProperty(e,"Rectangle",{enumerable:!0,get:function(){return n(c).default}});var f=i(526);Object.defineProperty(e,"RoundedRectangle",{enumerable:!0,get:function(){return n(f).default}})},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(45),h=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.spriteIndex=t,i.texture=s.spriteInfo[i.spriteIndex].texture,i.data=s.spriteInfo[i.spriteIndex].data,i.moduleTextures=[],i.frameId=-1,i}return a(e,t),o(e,[{key:"SetFrame",value:function(t){this.frameId!=t&&(this.frameId=t,this.PrepareFrame(this.frameId))}},{key:"PrepareFrame",value:function(t){for(var e=this.data.frames[t],i=e.fmstartIndex,n=e.fmstartIndex+e.fmCount,r=n-i,a=r-this.children.length,o=0;o<a;o++){var s=new PIXI.Texture(this.texture.baseTexture),h=new PIXI.Sprite(s);this.moduleTextures.push(s),this.addChild(h)}for(var u=0;u<this.children.length;u++){var l=this.getChildAt(u);if(u<r){var c=this.data.fmodule[i+u],f=this.data.modules[c.fmodulesID];l.position.set(c.fmodulesOX,c.fmodulesOY),l.scale.set(c.fmodulesScaleX,c.fmodulesScaleY),l.rotation=c.fmodulesRotation*Math.PI/180,l.visible=!0,this.moduleTextures[u].frame=new PIXI.Rectangle(f.x,f.y,f.w,f.h)}else l.visible=!1}}},{key:"SetTouchable",value:function(t){if(this.interactive=t,t){var e=this.data.frames[this.frameId].rect[0];this.hitArea=new PIXI.Rectangle(e.x,e.y,e.width,e.height)}}},{key:"GetRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.data.frames[this.frameId].rect[t]}},{key:"GetTransformRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.GetRect(t).Clone();return e.Scale(this.scale.x,this.scale.y),e.Translate(this.position.x,this.position.y),e}},{key:"Clone",value:function(){var t=new e(this.spriteIndex);return t.SetFrame(this.frameId),t}},{key:"Tint",value:function(t){var e=!0,i=!1,n=void 0;try{for(var r,a=this.children[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){r.value.tint=t}}catch(t){i=!0,n=t}finally{try{!e&&a.return&&a.return()}finally{if(i)throw n}}}},{key:"Filters",value:function(t){var e=!0,i=!1,n=void 0;try{for(var r,a=this.children[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){r.value.filters=t}}catch(t){i=!0,n=t}finally{try{!e&&a.return&&a.return()}finally{if(i)throw n}}}}]),e}(PIXI.Container);t.exports=h},function(t,e,i){var n=i(10),r=i(52);t.exports=i(9)?function(t,e,i){return n.f(t,e,r(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e,i){var n=i(2),r=i(18),a=i(22),o=i(56)("src"),s=Function.toString,h=(""+s).split("toString");i(28).inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,i,s){var u="function"==typeof i;u&&(a(i,"name")||r(i,"name",e)),t[e]!==i&&(u&&(a(i,o)||r(i,o,t[e]?""+t[e]:h.join(String(e)))),t===n?t[e]=i:s?t[e]?t[e]=i:r(t,e,i):(delete t[e],r(t,e,i)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[o]||s.call(this)})},function(t,e,i){var n=i(0),r=i(4),a=i(33),o=/"/g,s=function(t,e,i,n){var r=String(a(t)),s="<"+e;return""!==i&&(s+=" "+i+'="'+String(n).replace(o,"&quot;")+'"'),s+">"+r+"</"+e+">"};t.exports=function(t,e){var i={};i[t]=e(s),n(n.P+n.F*r(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",i)}},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t,e,i){var n=i(68),r=i(52),a=i(25),o=i(36),s=i(22),h=i(174),u=Object.getOwnPropertyDescriptor;e.f=i(9)?u:function(t,e){if(t=a(t),e=o(e,!0),h)try{return u(t,e)}catch(t){}if(s(t,e))return r(!n.f.call(t,e),t[e])}},function(t,e,i){var n=i(22),r=i(12),a=i(124)("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),n(t,a)?t[a]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?o:null}},function(t,e,i){var n=i(67),r=i(33);t.exports=function(t){return n(r(t))}},function(t,e,i){var n={createContext:i(509),setVertexAttribArrays:i(202),GLBuffer:i(505),GLFramebuffer:i(506),GLShader:i(507),GLTexture:i(201),VertexArrayObject:i(508),shader:i(510)};void 0!==t&&t.exports&&(t.exports=n),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=n)},function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},function(t,e){var i=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=i)},function(t,e,i){var n=i(16);t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)}}return function(){return t.apply(e,arguments)}}},function(t,e,i){"use strict";var n=i(4);t.exports=function(t,e){return!!t&&n(function(){e?t.call(null,function(){},1):t.call(null)})}},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=e.TweenDefine=function t(){n(this,t),this.NONE=0,this.LINEAR_EASE=this.NONE+1,this.ELASTIC_EASE_IN=this.LINEAR_EASE+1,this.ELASTIC_EASE_OUT=this.ELASTIC_EASE_IN+1,this.ELASTIC_EASE_INOUT=this.ELASTIC_EASE_OUT+1,this.BACK_EASE_IN=this.ELASTIC_EASE_INOUT+1,this.BACK_EASE_OUT=this.BACK_EASE_IN+1,this.BACK_EASE_INOUT=this.BACK_EASE_OUT+1,this.BOUNCE_EASE_IN=this.BACK_EASE_INOUT+1,this.BOUNCE_EASE_OUT=this.BOUNCE_EASE_IN+1,this.BOUNCE_EASE_INOUT=this.BOUNCE_EASE_OUT+1,this.QUAD_EASE_OUT=this.BOUNCE_EASE_INOUT+1,this.SINUSODIAL_EASE_IN=this.QUAD_EASE_OUT+1,this.SINUSODIAL_EASE_OUT=this.SINUSODIAL_EASE_IN+1,this.SINUSODIAL_EASE_INOUT=this.SINUSODIAL_EASE_OUT+1,this.EXPONENTIAL_IN=this.SINUSODIAL_EASE_INOUT+1,this.EXPONENTIAL_OUT=this.EXPONENTIAL_IN+1,this.EXPONENTIAL_INOUT=this.EXPONENTIAL_OUT+1,this.CUBIC_EASE_IN=this.EXPONENTIAL_INOUT+1,this.CUBIC_EASE_OUT=this.CUBIC_EASE_IN+1,this.CUBIC_EASE_INOUT=this.CUBIC_EASE_OUT+1};t.exports=new r},function(t,e,i){var n=i(29),r=i(67),a=i(12),o=i(11),s=i(109);t.exports=function(t,e){var i=1==t,h=2==t,u=3==t,l=4==t,c=6==t,f=5==t||c,d=e||s;return function(e,s,p){for(var m,v,g=a(e),y=r(g),_=n(s,p,3),T=o(y.length),E=0,S=i?d(e,T):h?d(e,0):void 0;T>E;E++)if((f||E in y)&&(m=y[E],v=_(m,E,g),t))if(i)S[E]=v;else if(v)switch(t){case 3:return!0;case 5:return m;case 6:return E;case 2:S.push(m)}else if(l)return!1;return c?-1:u||l?l:S}}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,i){var n=i(0),r=i(28),a=i(4);t.exports=function(t,e){var i=(r.Object||{})[t]||Object[t],o={};o[t]=e(i),n(n.S+n.F*a(function(){i(1)}),"Object",o)}},function(t,e){var i=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:i)(t)}},function(t,e,i){var n=i(6);t.exports=function(t,e){if(!n(t))return t;var i,r;if(e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;if("function"==typeof(i=t.valueOf)&&!n(r=i.call(t)))return r;if(!e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,i){(function(t){function i(t,e){for(var i=0,n=t.length-1;n>=0;n--){var r=t[n];"."===r?t.splice(n,1):".."===r?(t.splice(n,1),i++):i&&(t.splice(n,1),i--)}if(e)for(;i--;i)t.unshift("..");return t}function n(t,e){if(t.filter)return t.filter(e);for(var i=[],n=0;n<t.length;n++)e(t[n],n,t)&&i.push(t[n]);return i}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,a=function(t){return r.exec(t).slice(1)};e.resolve=function(){for(var e="",r=!1,a=arguments.length-1;a>=-1&&!r;a--){var o=a>=0?arguments[a]:t.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(e=o+"/"+e,r="/"===o.charAt(0))}return e=i(n(e.split("/"),function(t){return!!t}),!r).join("/"),(r?"/":"")+e||"."},e.normalize=function(t){var r=e.isAbsolute(t),a="/"===o(t,-1);return t=i(n(t.split("/"),function(t){return!!t}),!r).join("/"),t||r||(t="."),t&&a&&(t+="/"),(r?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(n(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,i){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var i=t.length-1;i>=0&&""===t[i];i--);return e>i?[]:t.slice(e,i-e+1)}t=e.resolve(t).substr(1),i=e.resolve(i).substr(1);for(var r=n(t.split("/")),a=n(i.split("/")),o=Math.min(r.length,a.length),s=o,h=0;h<o;h++)if(r[h]!==a[h]){s=h;break}for(var u=[],h=s;h<r.length;h++)u.push("..");return u=u.concat(a.slice(s)),u.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=a(t),i=e[0],n=e[1];return i||n?(n&&(n=n.substr(0,n.length-1)),i+n):"."},e.basename=function(t,e){var i=a(t)[2];return e&&i.substr(-1*e.length)===e&&(i=i.substr(0,i.length-e.length)),i},e.extname=function(t){return a(t)[3]};var o="b"==="ab".substr(-1)?function(t,e,i){return t.substr(e,i)}:function(t,e,i){return e<0&&(e=t.length+e),t.substr(e,i)}}).call(e,i(502))},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(31),o=e.Tween=function(){function t(){n(this,t),this.object=null,this.type=-1,this.start=null,this.end=null,this.percent=0,this.timer=new Timer,this.timerDelay=new Timer}return r(t,[{key:"Init",value:function(t){this.object=t,this.timerDelay.SetDuration(0)}},{key:"Create",value:function(t,e,i,n,r){this.type=t,this.start=e,this.end=i,this.timer.SetDuration(n),this.timerDelay.SetDuration(r)}},{key:"IsDone",value:function(){return this.timer.IsDone()}},{key:"JustFinished",value:function(){return this.timer.JustFinished()}},{key:"Reset",value:function(){this.timer.Reset(),this.timerDelay.Reset()}},{key:"GetFinishOverhead",value:function(){return this.timer.GetOverhead()}},{key:"Goto",value:function(t){var e=(this.end.x-this.start.x)*t,i=(this.end.y-this.start.y)*t,n=1,r=1,a=1,o=1,s=0;void 0!==this.start.alpha&&(n=(this.end.alpha-this.start.alpha)*t,this.object.alpha=this.start.alpha+n),void 0!==this.start.scale&&(r=(this.end.scale-this.start.scale)*t,this.object.scale.set(this.start.scale+r,this.start.scale+r)),void 0!==this.start.scaleX&&(a=(this.end.scaleX-this.start.scaleX)*t,this.object.scale.x=this.start.scaleX+a),void 0!==this.start.scaleY&&(o=(this.end.scaleY-this.start.scaleY)*t,this.object.scale.y=this.start.scaleY+o),void 0!==this.start.rotate&&(s=(this.end.rotate-this.start.rotate)*t,this.object.rotation=this.start.rotate+s),void 0!==this.start.x&&(this.object.position.x=this.start.x+e),void 0!==this.start.y&&(this.object.position.y=this.start.y+i)}},{key:"LinearEase",value:function(t){return t}},{key:"ElasticEaseIn",value:function(t){var e,i=.1;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),-i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))}},{key:"ElasticEaseOut",value:function(t){var e,i=.1;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)}},{key:"ElasticEaseInOut",value:function(t){var e,i=.1;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),(t*=2)<1?i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*-.5:i*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*.5+1)}},{key:"BackEaseIn",value:function(t){var e=1.70158;return t*t*((e+1)*t-e)}},{key:"BackEaseOut",value:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1}},{key:"BackEaseInOut",value:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},{key:"BounceEaseIn",value:function(t){return 1-this.BounceEaseOut(1-t)}},{key:"BounceEaseOut",value:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},{key:"BounceEaseInOut",value:function(t){return t<.5?.5*this.BounceEaseIn(2*t):.5*this.BounceEaseOut(2*t-1)+.5}},{key:"QuadEaseOut",value:function(t){return t*(2-t)}},{key:"SinusodialEaseIn",value:function(t){return 1-Math.cos(t*(Math.PI/2))}},{key:"SinusodialEaseOut",value:function(t){return Math.sin(t*(Math.PI/2))}},{key:"SinusodialEaseInOut",value:function(t){return-.5*(Math.cos(Math.PI*t)-1)}},{key:"ExponentialIn",value:function(t){return 0===t?0:Math.pow(1024,t-1)}},{key:"ExponentialOut",value:function(t){return 1===t?1:1-Math.pow(2,-10*t)}},{key:"ExponentialInOut",value:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},{key:"CubicEaseIn",value:function(t){return t*t*t}},{key:"CubicEaseOut",value:function(t){return--t*t*t+1}},{key:"CubicEaseInOut",value:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},{key:"Update",value:function(t){if(this.timerDelay.Update(t),this.timerDelay.IsDone()){switch(this.timer.Update(t),this.type){case a.LINEAR_EASE:this.percent=this.LinearEase(1-this.timer.GetTimePercent());break;case a.ELASTIC_EASE_IN:this.percent=this.ElasticEaseIn(1-this.timer.GetTimePercent());break;case a.ELASTIC_EASE_OUT:this.percent=this.ElasticEaseOut(1-this.timer.GetTimePercent());break;case a.ELASTIC_EASE_INOUT:this.percent=this.ElasticEaseInOut(1-this.timer.GetTimePercent());break;case a.BACK_EASE_IN:this.percent=this.BackEaseIn(1-this.timer.GetTimePercent());break;case a.BACK_EASE_OUT:this.percent=this.BackEaseOut(1-this.timer.GetTimePercent());break;case a.BACK_EASE_INOUT:this.percent=this.BackEaseInOut(1-this.timer.GetTimePercent());break;case a.BOUNCE_EASE_IN:this.percent=this.BounceEaseIn(1-this.timer.GetTimePercent());break;case a.BOUNCE_EASE_OUT:this.percent=this.BounceEaseOut(1-this.timer.GetTimePercent());break;case a.BOUNCE_EASE_INOUT:this.percent=this.BackEaseInOut(1-this.timer.GetTimePercent());break;case a.QUAD_EASE_OUT:this.percent=this.QuadEaseOut(1-this.timer.GetTimePercent());break;case a.SINUSODIAL_EASE_IN:this.percent=this.SinusodialEaseIn(1-this.timer.GetTimePercent());break;case a.SINUSODIAL_EASE_OUT:this.percent=this.SinusodialEaseOut(1-this.timer.GetTimePercent());break;case a.SINUSODIAL_EASE_INOUT:this.percent=this.SinusodialEaseInOut(1-this.timer.GetTimePercent());break;case a.EXPONENTIAL_IN:this.percent=this.ExponentialIn(1-this.timer.GetTimePercent());break;case a.EXPONENTIAL_OUT:this.percent=this.ExponentialOut(1-this.timer.GetTimePercent());break;case a.EXPONENTIAL_INOUT:this.percent=this.ExponentialInOut(1-this.timer.GetTimePercent());break;case a.CUBIC_EASE_IN:this.percent=this.CubicEaseIn(1-this.timer.GetTimePercent());break;case a.CUBIC_EASE_OUT:this.percent=this.CubicEaseOut(1-this.timer.GetTimePercent());break;case a.CUBIC_EASE_INOUT:this.percent=this.CubicEaseInOut(1-this.timer.GetTimePercent());break;default:this.percent=1-this.timer.GetTimePercent()}this.Goto(this.percent)}}}]),t}(),s=e.TweenInfo=function(){function t(){n(this,t),this.tweens=[],this.index=0,this.loop=0,this.loopIndex=0,this.callback=null}return r(t,[{key:"PreInit",value:function(){this.tweens[0].Goto(0)}},{key:"IsDone",value:function(){for(var t=0;t<this.tweens.length;t++)if(this.loop>0||!this.tweens[t].IsDone())return!1;return!0}},{key:"Reset",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=t;e<this.tweens.length;e++)this.tweens[e].Reset();this.index=t}}]),t}(),h=function(){function t(){n(this,t),this.tweens=[],this.objList=[]}return r(t,[{key:"PreInit",value:function(){for(var t=0;t<this.tweens.length;t++)this.tweens[t].PreInit()}},{key:"Create",value:function(t,e,i,n,r,a){var h=new o;h.Init(t),h.Create(e,i,n,r,a);var u=this.GetObjectIndex(t);if(-1==u){var l=new s;l.tweens.push(h),l.index=0,this.tweens.push(l),this.objList.push(t)}else this.tweens[u].tweens.push(h)}},{key:"GetObjectIndex",value:function(t){for(var e=0;e<this.objList.length;e++)if(this.objList[e]===t)return e;return-1}},{key:"SetLoop",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=this.GetObjectIndex(t);-1!=n&&(this.tweens[n].loop=e,this.tweens[n].loopIndex=i)}},{key:"SetCallback",value:function(t,e){var i=this.GetObjectIndex(t);-1!=i&&(this.tweens[i].callback=e)}},{key:"Reset",value:function(t){var e=this.GetObjectIndex(t);-1!=e&&this.tweens[e].Reset()}},{key:"ResetAll",value:function(){for(var t=0;t<this.tweens.length;t++)this.tweens[t].Reset()}},{key:"Remove",value:function(t){var e=this.GetObjectIndex(t);-1!=e&&(this.tweens.splice(e,1),this.objList.splice(e,1))}},{key:"RemoveAll",value:function(){this.tweens=[],this.objList=[]}},{key:"IsDone",value:function(){for(var t=0;t<this.tweens.length;t++)if(!this.tweens[t].IsDone())return!1;return!0}},{key:"Update",value:function(t){for(var e=0;e<this.tweens.length;e++){var i=this.tweens[e],n=i.tweens[i.index];if(n.Update(t),n.JustFinished()&&null!=i.callback&&i.callback(),n.IsDone()){var r=n.GetFinishOverhead();i.index<i.tweens.length-1?i.index++:-1==i.loop?i.Reset(i.loopIndex):i.loop>1&&(i.loop--,i.Reset(i.loopIndex)),i.tweens[i.index].Update(r)}}}}]),t}();t.exports=h},function(t,e,i){var n=i(195),r=i(0),a=i(90)("metadata"),o=a.store||(a.store=new(i(198))),s=function(t,e,i){var r=o.get(t);if(!r){if(!i)return;o.set(t,r=new n)}var a=r.get(e);if(!a){if(!i)return;r.set(e,a=new n)}return a},h=function(t,e,i){var n=s(e,i,!1);return void 0!==n&&n.has(t)},u=function(t,e,i){var n=s(e,i,!1);return void 0===n?void 0:n.get(t)},l=function(t,e,i,n){s(i,n,!0).set(t,e)},c=function(t,e){var i=s(t,e,!1),n=[];return i&&i.forEach(function(t,e){n.push(e)}),n},f=function(t){return void 0===t||"symbol"==typeof t?t:String(t)},d=function(t){r(r.S,"Reflect",t)};t.exports={store:o,map:s,has:h,get:u,set:l,keys:c,key:f,exp:d}},function(t,e,i){"use strict";if(i(9)){var n=i(42),r=i(2),a=i(4),o=i(0),s=i(92),h=i(130),u=i(29),l=i(47),c=i(52),f=i(18),d=i(53),p=i(35),m=i(11),v=i(193),g=i(55),y=i(36),_=i(22),T=i(66),E=i(6),S=i(12),b=i(116),A=i(49),I=i(24),w=i(50).f,x=i(132),P=i(56),M=i(8),O=i(32),C=i(79),R=i(91),k=i(133),D=i(59),L=i(85),N=i(54),G=i(108),F=i(166),U=i(10),B=i(23),j=U.f,V=B.f,X=r.RangeError,H=r.TypeError,Y=r.Uint8Array,W=Array.prototype,z=h.ArrayBuffer,q=h.DataView,K=O(0),Z=O(2),J=O(3),Q=O(4),$=O(5),tt=O(6),et=C(!0),it=C(!1),nt=k.values,rt=k.keys,at=k.entries,ot=W.lastIndexOf,st=W.reduce,ht=W.reduceRight,ut=W.join,lt=W.sort,ct=W.slice,ft=W.toString,dt=W.toLocaleString,pt=M("iterator"),mt=M("toStringTag"),vt=P("typed_constructor"),gt=P("def_constructor"),yt=s.CONSTR,_t=s.TYPED,Tt=s.VIEW,Et=O(1,function(t,e){return wt(R(t,t[gt]),e)}),St=a(function(){return 1===new Y(new Uint16Array([1]).buffer)[0]}),bt=!!Y&&!!Y.prototype.set&&a(function(){new Y(1).set({})}),At=function(t,e){var i=p(t);if(i<0||i%e)throw X("Wrong offset!");return i},It=function(t){if(E(t)&&_t in t)return t;throw H(t+" is not a typed array!")},wt=function(t,e){if(!(E(t)&&vt in t))throw H("It is not a typed array constructor!");return new t(e)},xt=function(t,e){return Pt(R(t,t[gt]),e)},Pt=function(t,e){for(var i=0,n=e.length,r=wt(t,n);n>i;)r[i]=e[i++];return r},Mt=function(t,e,i){j(t,e,{get:function(){return this._d[i]}})},Ot=function(t){var e,i,n,r,a,o,s=S(t),h=arguments.length,l=h>1?arguments[1]:void 0,c=void 0!==l,f=x(s);if(void 0!=f&&!b(f)){for(o=f.call(s),n=[],e=0;!(a=o.next()).done;e++)n.push(a.value);s=n}for(c&&h>2&&(l=u(l,arguments[2],2)),e=0,i=m(s.length),r=wt(this,i);i>e;e++)r[e]=c?l(s[e],e):s[e];return r},Ct=function(){for(var t=0,e=arguments.length,i=wt(this,e);e>t;)i[t]=arguments[t++];return i},Rt=!!Y&&a(function(){dt.call(new Y(1))}),kt=function(){return dt.apply(Rt?ct.call(It(this)):It(this),arguments)},Dt={copyWithin:function(t,e){return F.call(It(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return Q(It(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return G.apply(It(this),arguments)},filter:function(t){return xt(this,Z(It(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return $(It(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return tt(It(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){K(It(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return it(It(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return et(It(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return ut.apply(It(this),arguments)},lastIndexOf:function(t){return ot.apply(It(this),arguments)},map:function(t){return Et(It(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return st.apply(It(this),arguments)},reduceRight:function(t){return ht.apply(It(this),arguments)},reverse:function(){for(var t,e=this,i=It(e).length,n=Math.floor(i/2),r=0;r<n;)t=e[r],e[r++]=e[--i],e[i]=t;return e},some:function(t){return J(It(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return lt.call(It(this),t)},subarray:function(t,e){var i=It(this),n=i.length,r=g(t,n);return new(R(i,i[gt]))(i.buffer,i.byteOffset+r*i.BYTES_PER_ELEMENT,m((void 0===e?n:g(e,n))-r))}},Lt=function(t,e){return xt(this,ct.call(It(this),t,e))},Nt=function(t){It(this);var e=At(arguments[1],1),i=this.length,n=S(t),r=m(n.length),a=0;if(r+e>i)throw X("Wrong length!");for(;a<r;)this[e+a]=n[a++]},Gt={entries:function(){return at.call(It(this))},keys:function(){return rt.call(It(this))},values:function(){return nt.call(It(this))}},Ft=function(t,e){return E(t)&&t[_t]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Ut=function(t,e){return Ft(t,e=y(e,!0))?c(2,t[e]):V(t,e)},Bt=function(t,e,i){return!(Ft(t,e=y(e,!0))&&E(i)&&_(i,"value"))||_(i,"get")||_(i,"set")||i.configurable||_(i,"writable")&&!i.writable||_(i,"enumerable")&&!i.enumerable?j(t,e,i):(t[e]=i.value,t)};yt||(B.f=Ut,U.f=Bt),o(o.S+o.F*!yt,"Object",{getOwnPropertyDescriptor:Ut,defineProperty:Bt}),a(function(){ft.call({})})&&(ft=dt=function(){return ut.call(this)});var jt=d({},Dt);d(jt,Gt),f(jt,pt,Gt.values),d(jt,{slice:Lt,set:Nt,constructor:function(){},toString:ft,toLocaleString:kt}),Mt(jt,"buffer","b"),Mt(jt,"byteOffset","o"),Mt(jt,"byteLength","l"),Mt(jt,"length","e"),j(jt,mt,{get:function(){return this[_t]}}),t.exports=function(t,e,i,h){h=!!h;var u=t+(h?"Clamped":"")+"Array",c="get"+t,d="set"+t,p=r[u],g=p||{},y=p&&I(p),_=!p||!s.ABV,S={},b=p&&p.prototype,x=function(t,i){var n=t._d;return n.v[c](i*e+n.o,St)},P=function(t,i,n){var r=t._d;h&&(n=(n=Math.round(n))<0?0:n>255?255:255&n),r.v[d](i*e+r.o,n,St)},M=function(t,e){j(t,e,{get:function(){return x(this,e)},set:function(t){return P(this,e,t)},enumerable:!0})};_?(p=i(function(t,i,n,r){l(t,p,u,"_d");var a,o,s,h,c=0,d=0;if(E(i)){if(!(i instanceof z||"ArrayBuffer"==(h=T(i))||"SharedArrayBuffer"==h))return _t in i?Pt(p,i):Ot.call(p,i);a=i,d=At(n,e);var g=i.byteLength;if(void 0===r){if(g%e)throw X("Wrong length!");if((o=g-d)<0)throw X("Wrong length!")}else if((o=m(r)*e)+d>g)throw X("Wrong length!");s=o/e}else s=v(i),o=s*e,a=new z(o);for(f(t,"_d",{b:a,o:d,l:o,e:s,v:new q(a)});c<s;)M(t,c++)}),b=p.prototype=A(jt),f(b,"constructor",p)):a(function(){p(1)})&&a(function(){new p(-1)})&&L(function(t){new p,new p(null),new p(1.5),new p(t)},!0)||(p=i(function(t,i,n,r){l(t,p,u);var a;return E(i)?i instanceof z||"ArrayBuffer"==(a=T(i))||"SharedArrayBuffer"==a?void 0!==r?new g(i,At(n,e),r):void 0!==n?new g(i,At(n,e)):new g(i):_t in i?Pt(p,i):Ot.call(p,i):new g(v(i))}),K(y!==Function.prototype?w(g).concat(w(y)):w(g),function(t){t in p||f(p,t,g[t])}),p.prototype=b,n||(b.constructor=p));var O=b[pt],C=!!O&&("values"==O.name||void 0==O.name),R=Gt.values;f(p,vt,!0),f(b,_t,u),f(b,Tt,!0),f(b,gt,p),(h?new p(1)[mt]==u:mt in b)||j(b,mt,{get:function(){return u}}),S[u]=p,o(o.G+o.W+o.F*(p!=g),S),o(o.S,u,{BYTES_PER_ELEMENT:e}),o(o.S+o.F*a(function(){g.of.call(p,1)}),u,{from:Ot,of:Ct}),"BYTES_PER_ELEMENT"in b||f(b,"BYTES_PER_ELEMENT",e),o(o.P,u,Dt),N(u),o(o.P+o.F*bt,u,{set:Nt}),o(o.P+o.F*!C,u,Gt),n||b.toString==ft||(b.toString=ft),o(o.P+o.F*a(function(){new p(1).slice()}),u,{slice:Lt}),o(o.P+o.F*(a(function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()})||!a(function(){b.toLocaleString.call([1,2])})),u,{toLocaleString:kt}),D[u]=C?O:R,n||C||f(b,pt,R)}}else t.exports=function(){}},function(t,e,i){var n=i(8)("unscopables"),r=Array.prototype;void 0==r[n]&&i(18)(r,n,{}),t.exports=function(t){r[n][t]=!0}},function(t,e){t.exports=!1},function(t,e,i){var n=i(56)("meta"),r=i(6),a=i(22),o=i(10).f,s=0,h=Object.isExtensible||function(){return!0},u=!i(4)(function(){return h(Object.preventExtensions({}))}),l=function(t){o(t,n,{value:{i:"O"+ ++s,w:{}}})},c=function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,n)){if(!h(t))return"F";if(!e)return"E";l(t)}return t[n].i},f=function(t,e){if(!a(t,n)){if(!h(t))return!0;if(!e)return!1;l(t)}return t[n].w},d=function(t){return u&&p.NEED&&h(t)&&!a(t,n)&&l(t),t},p=t.exports={KEY:n,NEED:!1,fastKey:c,getWeak:f,onFreeze:d}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}e.__esModule=!0;var h=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i(63),l=n(u),c=i(230),f=n(c),d=i(229),p=n(d),m=i(57),v=n(m),g=i(15),y=i(7),_=i(13),T=n(_),E=function(t){function e(i,n,o,s,h,u){r(this,e);var l=a(this,t.call(this));if(l.noFrame=!1,n||(l.noFrame=!0,n=new g.Rectangle(0,0,1,1)),i instanceof e&&(i=i.baseTexture),l.baseTexture=i,l._frame=n,l.trim=s,l.valid=!1,l.requiresUpdate=!1,l._uvs=null,l.orig=o||n,l._rotate=Number(h||0),!0===h)l._rotate=2;else if(l._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return i.hasLoaded?(l.noFrame&&(n=new g.Rectangle(0,0,i.width,i.height),i.on("update",l.onBaseTextureUpdated,l)),l.frame=n):i.once("loaded",l.onBaseTextureLoaded,l),l.defaultAnchor=u?new g.Point(u.x,u.y):new g.Point(0,0),l._updateID=0,l.transform=null,l.textureCacheIds=[],l}return o(e,t),e.prototype.update=function(){this.baseTexture.update()},e.prototype.onBaseTextureLoaded=function(t){this._updateID++,this.noFrame?this.frame=new g.Rectangle(0,0,t.width,t.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},e.prototype.onBaseTextureUpdated=function(t){this._updateID++,this._frame.width=t.width,this._frame.height=t.height,this.emit("update",this)},e.prototype.destroy=function(t){this.baseTexture&&(t&&(y.TextureCache[this.baseTexture.imageUrl]&&e.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){return new e(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},e.prototype._updateUvs=function(){this._uvs||(this._uvs=new p.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.fromImage=function(t,i,n,r){var a=y.TextureCache[t];return a||(a=new e(l.default.fromImage(t,i,n,r)),e.addToCache(a,t)),a},e.fromFrame=function(t){var e=y.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return e},e.fromCanvas=function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";return new e(l.default.fromCanvas(t,i,n))},e.fromVideo=function(t,i){return"string"==typeof t?e.fromVideoUrl(t,i):new e(f.default.fromVideo(t,i))},e.fromVideoUrl=function(t,i){return new e(f.default.fromUrl(t,i))},e.from=function(t){if("string"==typeof t){var i=y.TextureCache[t];if(!i){return null!==t.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?e.fromVideoUrl(t):e.fromImage(t)}return i}return t instanceof HTMLImageElement?new e(l.default.from(t)):t instanceof HTMLCanvasElement?e.fromCanvas(t,T.default.SCALE_MODE,"HTMLCanvasElement"):t instanceof HTMLVideoElement?e.fromVideo(t):t instanceof l.default?new e(t):t},e.fromLoader=function(t,i,n){var r=new l.default(t,void 0,(0,y.getResolutionOfUrl)(i)),a=new e(r);return r.imageUrl=i,n||(n=i),l.default.addToCache(a.baseTexture,n),e.addToCache(a,n),n!==i&&(l.default.addToCache(a.baseTexture,i),e.addToCache(a,i)),a},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),y.TextureCache[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),y.TextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=y.TextureCache[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete y.TextureCache[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)y.TextureCache[t.textureCacheIds[n]]===t&&delete y.TextureCache[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},h(e,[{key:"frame",get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,i=t.y,n=t.width,r=t.height,a=e+n>this.baseTexture.width,o=i+r>this.baseTexture.height;if(a||o){var s=a&&o?"and":"or",h="X: "+e+" + "+n+" = "+(e+n)+" > "+this.baseTexture.width,u="Y: "+i+" + "+r+" = "+(i+r)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+h+" "+s+" "+u)}this.valid=n&&r&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=t),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),e}(v.default);e.default=E,E.EMPTY=new E(new l.default),s(E.EMPTY),s(E.EMPTY.baseTexture),E.WHITE=function(){var t=document.createElement("canvas");t.width=10,t.height=10;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,10,10),new E(new l.default(t))}(),s(E.WHITE),s(E.WHITE.baseTexture)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(){n(this,t),this.spriteInfo=[]}return r(t,[{key:"Add",value:function(t,e,i){this.spriteInfo[t]={texture:e,data:i}}},{key:"GetSpriteByIndex",value:function(t){return this.spriteInfo[t]}}]),t}();t.exports=new a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(75),o=function(){function t(){n(this,t),this.texts=[],this.loaded=!1}return r(t,[{key:"Utf8ArrayToStr",value:function(t,e,i){var n,r,a,o,s,h;for(n="",a=i,r=0;r<a;)switch(o=t[e+r],r++,o>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:n+=String.fromCharCode(o);break;case 12:case 13:s=t[e+r],r++,n+=String.fromCharCode((31&o)<<6|63&s);break;case 14:s=t[e+r],r++,h=t[e+r],r++,n+=String.fromCharCode((15&o)<<12|(63&s)<<6|(63&h)<<0)}return n}},{key:"Load",value:function(t){var e=0;a.ReadByte(t,e);e++;var i=a.ReadInit32(t,e);e+=4;for(var n=[],r=0;r<i;r++)n[r]=a.ReadInit32(t,e),e+=4;for(var o=0,r=0;r<i;r++)this.texts[r]=this.Utf8ArrayToStr(t,e,n[r]-o),e+=n[r]-o,o=n[r];this.loaded=!0}},{key:"GetText",value:function(t){return this.texts[t]}}]),t}();t.exports=new o},function(t,e){t.exports=function(t,e,i,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(i+": incorrect invocation!");return t}},function(t,e,i){var n=i(29),r=i(177),a=i(116),o=i(1),s=i(11),h=i(132),u={},l={},e=t.exports=function(t,e,i,c,f){var d,p,m,v,g=f?function(){return t}:h(t),y=n(i,c,e?2:1),_=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(a(g)){for(d=s(t.length);d>_;_++)if((v=e?y(o(p=t[_])[0],p[1]):y(t[_]))===u||v===l)return v}else for(m=g.call(t);!(p=m.next()).done;)if((v=r(m,y,p.value,e))===u||v===l)return v};e.BREAK=u,e.RETURN=l},function(t,e,i){var n=i(1),r=i(183),a=i(112),o=i(124)("IE_PROTO"),s=function(){},h=function(){var t,e=i(111)("iframe"),n=a.length;for(e.style.display="none",i(114).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),h=t.F;n--;)delete h.prototype[a[n]];return h()};t.exports=Object.create||function(t,e){var i;return null!==t?(s.prototype=n(t),i=new s,s.prototype=null,i[o]=t):i=h(),void 0===e?i:r(i,e)}},function(t,e,i){var n=i(185),r=i(112).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,r)}},function(t,e,i){var n=i(185),r=i(112);t.exports=Object.keys||function(t){return n(t,r)}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,i){var n=i(19);t.exports=function(t,e,i){for(var r in e)n(t,r,e[r],i);return t}},function(t,e,i){"use strict";var n=i(2),r=i(10),a=i(9),o=i(8)("species");t.exports=function(t){var e=n[t];a&&e&&!e[o]&&r.f(e,o,{configurable:!0,get:function(){return this}})}},function(t,e,i){var n=i(35),r=Math.max,a=Math.min;t.exports=function(t,e){return t=n(t),t<0?r(t+e,0):a(t,e)}},function(t,e){var i=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+n).toString(36))}},function(t,e,i){"use strict";function n(){}function r(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function a(t,e,i,n,a){if("function"!=typeof i)throw new TypeError("The listener must be a function");var o=new r(i,n||t,a),s=u?u+e:e;return t._events[s]?t._events[s].fn?t._events[s]=[t._events[s],o]:t._events[s].push(o):(t._events[s]=o,t._eventsCount++),t}function o(t,e){0==--t._eventsCount?t._events=new n:delete t._events[e]}function s(){this._events=new n,this._eventsCount=0}var h=Object.prototype.hasOwnProperty,u="~";Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(u=!1)),s.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)h.call(t,e)&&i.push(u?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},s.prototype.listeners=function(t){var e=u?u+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,r=i.length,a=new Array(r);n<r;n++)a[n]=i[n].fn;return a},s.prototype.listenerCount=function(t){var e=u?u+t:t,i=this._events[e];return i?i.fn?1:i.length:0},s.prototype.emit=function(t,e,i,n,r,a){var o=u?u+t:t;if(!this._events[o])return!1;var s,h,l=this._events[o],c=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,i),!0;case 4:return l.fn.call(l.context,e,i,n),!0;case 5:return l.fn.call(l.context,e,i,n,r),!0;case 6:return l.fn.call(l.context,e,i,n,r,a),!0}for(h=1,s=new Array(c-1);h<c;h++)s[h-1]=arguments[h];l.fn.apply(l.context,s)}else{var f,d=l.length;for(h=0;h<d;h++)switch(l[h].once&&this.removeListener(t,l[h].fn,void 0,!0),c){case 1:l[h].fn.call(l[h].context);break;case 2:l[h].fn.call(l[h].context,e);break;case 3:l[h].fn.call(l[h].context,e,i);break;case 4:l[h].fn.call(l[h].context,e,i,n);break;default:if(!s)for(f=1,s=new Array(c-1);f<c;f++)s[f-1]=arguments[f];l[h].fn.apply(l[h].context,s)}}return!0},s.prototype.on=function(t,e,i){return a(this,t,e,i,!1)},s.prototype.once=function(t,e,i){return a(this,t,e,i,!0)},s.prototype.removeListener=function(t,e,i,n){var r=u?u+t:t;if(!this._events[r])return this;if(!e)return o(this,r),this;var a=this._events[r];if(a.fn)a.fn!==e||n&&!a.once||i&&a.context!==i||o(this,r);else{for(var s=0,h=[],l=a.length;s<l;s++)(a[s].fn!==e||n&&!a[s].once||i&&a[s].context!==i)&&h.push(a[s]);h.length?this._events[r]=1===h.length?h[0]:h:o(this,r)}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=u?u+t:t,this._events[e]&&o(this,e)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=u,s.EventEmitter=s,t.exports=s},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(38),o=i(31),s=function(){function t(){n(this,t),this.tweenMgr=new a,this.box=null}return r(t,[{key:"Init",value:function(){this.tweenMgr.RemoveAll()}},{key:"SetBox",value:function(t){this.box=t}},{key:"AddEffect",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments[3],r=arguments[4],a=APP.GetWidth(),s=APP.GetHeight();switch(this.tweenMgr.Remove(e),t){case GameDefine2.EFFECT_TYPE_ADD_SCORE:this.tweenMgr.Create(e,o.LINEAR_EASE,{x:n,y:r-GameDefine2.EFFECT_ADD_SCORE_DY_START,alpha:1,scale:1},{x:n,y:r-GameDefine2.EFFECT_ADD_SCORE_DY_END,alpha:.5,scale:.5},.5,0),this.tweenMgr.Create(e,o.LINEAR_EASE,{alpha:.5},{alpha:0},.05,i);break;case GameDefine2.EFFECT_TYPE_ADD_COMBO:this.tweenMgr.Create(e,o.LINEAR_EASE,{x:.5*a,y:.4*s,alpha:1,scale:3},{x:.5*a,y:.4*s,alpha:1,scale:.8},.2,i),this.tweenMgr.Create(e,o.LINEAR_EASE,{x:.5*a,y:.4*s,alpha:1,scale:.8},{x:.5*a,y:.4*s,alpha:1,scale:1.2},.1,i),this.tweenMgr.Create(e,o.LINEAR_EASE,{x:.5*a,y:.4*s,alpha:1,scale:1.2},{x:.5*a,y:.4*s,alpha:1,scale:1},.1,i),this.tweenMgr.Create(e,o.LINEAR_EASE,{alpha:1},{alpha:1},.3,i),this.tweenMgr.Create(e,o.LINEAR_EASE,{alpha:1},{alpha:0},.01,i);break;case GameDefine2.EFFECT_TYPE_GAMEOVER_CTA:this.tweenMgr.Create(e,o.LINEAR_EASE,{scale:1},{scale:1.2},.2,i),this.tweenMgr.Create(e,o.LINEAR_EASE,{scale:1.2},{scale:1},.5,i),this.tweenMgr.Create(e,o.LINEAR_EASE,{scale:1},{scale:1.05},.1,i),this.tweenMgr.Create(e,o.LINEAR_EASE,{scale:1.05},{scale:1},.2,i),this.tweenMgr.Create(e,o.LINEAR_EASE,{scale:1},{scale:1},.2,1),this.tweenMgr.SetLoop(e,-1);break;case GameDefine2.EFFECT_TYPE_BULLET_HIT:this.tweenMgr.Create(e,o.LINEAR_EASE,{x:n,y:r,alpha:1},{x:n,y:r,alpha:0},.7,i);break;case GameDefine2.EFFECT_TYPE_GAMEOVER_STAR:this.tweenMgr.Create(e,o.LINEAR_EASE,{scale:3,alpha:1},{scale:1,alpha:1},.5,i),this.tweenMgr.SetCallback(e,function(){SFX_UI_STAR_01;switch(this.tweens[this.index].object.star){case 1:SFX_UI_STAR_01;break;case 2:SFX_UI_STAR_02;break;case 3:SFX_UI_STAR_03}})}}},{key:"Update",value:function(t){this.tweenMgr.Update(t)}}]),t}();t.exports=new s},function(t,e){t.exports={}},function(t,e,i){var n=i(10).f,r=i(22),a=i(8)("toStringTag");t.exports=function(t,e,i){t&&!r(t=i?t:t.prototype,a)&&n(t,a,{configurable:!0,value:e})}},function(t,e,i){var n=i(0),r=i(33),a=i(4),o=i(128),s="["+o+"]",h="​",u=RegExp("^"+s+s+"*"),l=RegExp(s+s+"*$"),c=function(t,e,i){var r={},s=a(function(){return!!o[t]()||h[t]()!=h}),u=r[t]=s?e(f):o[t];i&&(r[i]=u),n(n.P+n.F*s,"String",r)},f=c.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(l,"")),t};t.exports=c},function(t,e,i){var n=i(6);t.exports=function(t,e){if(!n(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(7),h=i(13),u=n(h),l=i(57),c=n(l),f=i(231),d=n(f),p=i(107),m=n(p),v=function(t){function e(i,n,o){r(this,e);var h=a(this,t.call(this));return h.uid=(0,s.uid)(),h.touched=0,h.resolution=o||u.default.RESOLUTION,h.width=100,h.height=100,h.realWidth=100,h.realHeight=100,h.scaleMode=void 0!==n?n:u.default.SCALE_MODE,h.hasLoaded=!1,h.isLoading=!1,h.source=null,h.origSource=null,h.imageType=null,h.sourceScale=1,h.premultipliedAlpha=!0,h.imageUrl=null,h.isPowerOfTwo=!1,h.mipmap=u.default.MIPMAP_TEXTURES,h.wrapMode=u.default.WRAP_MODE,h._glTextures={},h._enabled=0,h._virtalBoundId=-1,h._destroyed=!1,h.textureCacheIds=[],i&&h.loadSource(i),h}return o(e,t),e.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),this.emit("update",this)},e.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=m.default.isPow2(this.realWidth)&&m.default.isPow2(this.realHeight)},e.prototype.loadSource=function(t){var e=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,e&&this.source&&(this.source.onload=null,this.source.onerror=null);var i=!this.source;if(this.source=t,(t.src&&t.complete||t.getContext)&&t.width&&t.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),i&&this.emit("loaded",this);else if(!t.getContext){this.isLoading=!0;var n=this;if(t.onload=function(){if(n._updateImageType(),t.onload=null,t.onerror=null,n.isLoading){if(n.isLoading=!1,n._sourceLoaded(),"svg"===n.imageType)return void n._loadSvgSource();n.emit("loaded",n)}},t.onerror=function(){t.onload=null,t.onerror=null,n.isLoading&&(n.isLoading=!1,n.emit("error",n))},t.complete&&t.src){if(t.onload=null,t.onerror=null,"svg"===n.imageType)return void n._loadSvgSource();this.isLoading=!1,t.width&&t.height?(this._sourceLoaded(),e&&this.emit("loaded",this)):e&&this.emit("error",this)}}},e.prototype._updateImageType=function(){if(this.imageUrl){var t=(0,s.decomposeDataUri)(this.imageUrl),e=void 0;if(t&&"image"===t.mediaType){var i=t.subType.split("+")[0];if(!(e=(0,s.getUrlFileExtension)("."+i)))throw new Error("Invalid image type in data URI.")}else(e=(0,s.getUrlFileExtension)(this.imageUrl))||(e="png");this.imageType=e}},e.prototype._loadSvgSource=function(){if("svg"===this.imageType){var t=(0,s.decomposeDataUri)(this.imageUrl);t?this._loadSvgSourceUsingDataUri(t):this._loadSvgSourceUsingXhr()}},e.prototype._loadSvgSourceUsingDataUri=function(t){var e=void 0;if("base64"===t.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");e=atob(t.data)}else e=t.data;this._loadSvgSourceUsingString(e)},e.prototype._loadSvgSourceUsingXhr=function(){var t=this,e=new XMLHttpRequest;e.onload=function(){if(e.readyState!==e.DONE||200!==e.status)throw new Error("Failed to load SVG using XHR.");t._loadSvgSourceUsingString(e.response)},e.onerror=function(){return t.emit("error",t)},e.open("GET",this.imageUrl,!0),e.send()},e.prototype._loadSvgSourceUsingString=function(t){var i=(0,s.getSvgSize)(t),n=i.width,r=i.height;if(!n||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(n*this.sourceScale),this.realHeight=Math.round(r*this.sourceScale),this._updateDimensions();var a=document.createElement("canvas");a.width=this.realWidth,a.height=this.realHeight,a._pixiId="canvas_"+(0,s.uid)(),a.getContext("2d").drawImage(this.source,0,0,n,r,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=a,e.addToCache(this,a._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},e.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},e.prototype.destroy=function(){this.imageUrl&&(delete s.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.updateSourceImage=function(t){this.source.src=t,this.loadSource(this.source)},e.fromImage=function(t,i,n,r){var a=s.BaseTextureCache[t];if(!a){var o=new Image;void 0===i&&0!==t.indexOf("data:")?o.crossOrigin=(0,d.default)(t):i&&(o.crossOrigin="string"==typeof i?i:"anonymous"),a=new e(o,n),a.imageUrl=t,r&&(a.sourceScale=r),a.resolution=(0,s.getResolutionOfUrl)(t),o.src=t,e.addToCache(a,t)}return a},e.fromCanvas=function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";t._pixiId||(t._pixiId=n+"_"+(0,s.uid)());var r=s.BaseTextureCache[t._pixiId];return r||(r=new e(t,i),e.addToCache(r,t._pixiId)),r},e.from=function(t,i,n){if("string"==typeof t)return e.fromImage(t,void 0,i,n);if(t instanceof HTMLImageElement){var r=t.src,a=s.BaseTextureCache[r];return a||(a=new e(t,i),a.imageUrl=r,n&&(a.sourceScale=n),a.resolution=(0,s.getResolutionOfUrl)(r),e.addToCache(a,r)),a}return t instanceof HTMLCanvasElement?e.fromCanvas(t,i):t},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),s.BaseTextureCache[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),s.BaseTextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=s.BaseTextureCache[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete s.BaseTextureCache[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)delete s.BaseTextureCache[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},e}(c.default);e.default=v},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(75),h=i(46),u=i(17),l=i(14),c=(i(45),i(151)),f=function(t){function e(){n(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.customTemplateLoader=null,t}return a(e,t),o(e,[{key:"SetCustomTemplateLoader",value:function(t){this.customTemplateLoader=t}},{key:"Load",value:function(t){for(var e=0;e<t.length;){var i=s.ReadUByte(t,e);e++;var n=s.ReadShort(t,e);e+=2;var r=s.ReadShort(t,e);e+=2;var a=s.ReadUByte(t,e);if(e++,i==c.TEMPLATE_GUI_GFXITEM){var o=s.ReadByte(t,e);e++;var f=s.ReadShort(t,e);e+=2;var d=s.ReadByte(t,e);e++;var p=s.ReadByte(t,e);if(e++,-1==d){var m=new u(o);m.posX=n,m.posY=r,m.SetFrame(f),m.position.set(n,r),m.visible=p,this.UpdateAnchor(m,a),this.addChild(m)}else{var v=new l(o);v.posX=n,v.posY=r,v.SetAnim(d,!0),v.position.set(n,r),v.visible=p,this.UpdateAnchor(v,a),this.addChild(v)}}else if(i==c.TEMPLATE_GUI_TEXTITEM){var g=s.ReadShort(t,e);e+=2;var y=s.ReadShort(t,e);e+=2;var _=s.ReadShort(t,e);e+=2;var T=s.ReadShort(t,e);e+=2;var E=s.ReadByte(t,e);e++;var S=s.ReadUByte(t,e);e++;var b=s.ReadUByte(t,e);e++;var A=s.ReadUByte(t,e);e++;var I=s.ReadByte(t,e);e++;var w=s.ReadByte(t,e);e++;var x=s.ReadUByte(t,e);e++;var P=s.ReadUByte(t,e);e++;var M=s.ReadUByte(t,e);e++;var O=h.GetText(g),C=0==I?"left":1==I?"right":"center",R=GameConfig.fontInfo[E],k="rgba("+S+", "+b+", "+A+", 1)",D="rgba("+x+", "+P+", "+M+", 1)",L=new PIXI.TextStyle({align:C,fontFamily:R,fontSize:Utils.GetFontSize(y,R),fill:k,dropShadow:w,dropShadowColor:D,wordWrap:!0,wordWrapWidth:_}),N=new PIXI.Text(O,L);switch(C){case"left":N.anchor.set(0,.5),N.position.set(n,r+T/2);break;case"right":N.anchor.set(1,.5),N.position.set(n+_,r+T/2);break;case"center":N.anchor.set(.5,.5),N.position.set(n+_/2,r+T/2)}N.posX=N.position.x,N.posY=N.position.y,this.UpdateAnchor(N,a),N.rect=new PIXI.Rectangle(N.position.x,N.position.y-T/2,_,T),this.addChild(N)}else this.customTemplateLoader&&(e=this.customTemplateLoader(i,n,r,a,t,e))}}},{key:"UpdateAnchor",value:function(t,e){switch(e){case c.ANCHOR_LEFT:break;case c.ANCHOR_LEFT_TOP:case c.ANCHOR_LEFT_CENTER:case c.ANCHOR_LEFT_BOTTOM:break;case c.ANCHOR_RIGHT:t.position.x=t.posX+2*APP.offsetX;break;case c.ANCHOR_RIGHT_TOP:case c.ANCHOR_RIGHT_CENTER:break;case c.ANCHOR_RIGHT_BOTTOM:t.position.x=t.posX+2*APP.offsetX,t.position.y=t.posY+2*APP.offsetY;break;case c.ANCHOR_TOP:case c.ANCHOR_TOP_CENTER:break;case c.ANCHOR_BOTTOM:t.position.y=t.posY+2*APP.offsetY;break;case c.ANCHOR_BOTTOM_CENTER:t.position.y=t.posY+2*APP.offsetY,t.position.x=t.posX+APP.offsetX;break;case c.ANCHOR_HCENTER_VCENTER:t.position.x=t.posX+APP.offsetX,t.position.y=t.posY+APP.offsetY}t.auroraAnchor=e}},{key:"UpdateAnchors",value:function(){var t=!0,e=!1,i=void 0;try{for(var n,r=this.children[Symbol.iterator]();!(t=(n=r.next()).done);t=!0){var a=n.value;this.UpdateAnchor(a,a.auroraAnchor),a instanceof PIXI.Text&&(a.rect.x=a.position.x,a.rect.y=a.position.y-a.rect.height/2)}}catch(t){e=!0,i=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw i}}}},{key:"UpdateAnchorRotate",value:function(){var t=!0,e=!1,i=void 0;try{for(var n,r=this.children[Symbol.iterator]();!(t=(n=r.next()).done);t=!0){var a=n.value;switch(a.auroraAnchor){case c.ANCHOR_LEFT:break;case c.ANCHOR_LEFT_TOP:case c.ANCHOR_LEFT_CENTER:case c.ANCHOR_LEFT_BOTTOM:break;case c.ANCHOR_RIGHT:a.position.x=a.posX+2*APP.offsetY;break;case c.ANCHOR_RIGHT_TOP:case c.ANCHOR_RIGHT_CENTER:case c.ANCHOR_RIGHT_BOTTOM:case c.ANCHOR_TOP:case c.ANCHOR_TOP_CENTER:break;case c.ANCHOR_BOTTOM:a.position.y=a.posY+2*APP.offsetX;break;case c.ANCHOR_BOTTOM_CENTER:a.position.y=a.posY+2*APP.offsetX,a.position.x=a.posX+APP.offsetY;break;case c.ANCHOR_HCENTER_VCENTER:a.position.x=a.posX+APP.offsetY,a.position.y=a.posY+APP.offsetX}}}catch(t){e=!0,i=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw i}}}},{key:"GetObject",value:function(t){return this.getChildAt(t)}},{key:"Update",value:function(t){var e=!0,i=!1,n=void 0;try{for(var r,a=this.children[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=r.value;o.Update&&o.Update(t)}}catch(t){i=!0,n=t}finally{try{!e&&a.return&&a.return()}finally{if(i)throw n}}}}]),e}(PIXI.Container);t.exports=f},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(t){function e(){n(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),i=0;return t.STATE={},t.STATE.INACTIVE=i++,t.mBody={x:0,y:0,z:0,width:0,height:0,depth:0,offsetX:0,offsetY:0,offsetZ:0},t.mPosition={x:0,y:0,z:0},t.mDrawPosition,t.mState,t.mScale=1,t}return a(e,t),o(e,[{key:"SetStateInactive",value:function(){this._SetState(this.STATE.INACTIVE)}},{key:"IsStateInactive",value:function(){return this.mState==this.STATE.INACTIVE}},{key:"SetPosition",value:function(t){this.mPosition.x=t.x,this.mPosition.y=t.y,this.mPosition.z=t.z,this.mBody.x=t.x+this.mBody.offsetX,this.mBody.y=t.y+this.mBody.offsetY,this.mBody.z=t.z+this.mBody.offsetZ}},{key:"GetPosition",value:function(){return this.mPosition}},{key:"GetBody",value:function(){return this.mBody}},{key:"SetScale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.mScale=t}},{key:"UpdateDrawPosition",value:function(){this.mDrawPosition=Camera.GetDrawPosition(this.mPosition),this.position.set(this.mDrawPosition.x,this.mDrawPosition.y),this.scale.set(this.mDrawPosition.scale*this.mScale)}},{key:"_SetState",value:function(t){this.mState=t}}]),e}(PIXI.Container);t.exports=s},function(t,e,i){var n=i(27),r=i(8)("toStringTag"),a="Arguments"==n(function(){return arguments}()),o=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,i,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=o(e=Object(t),r))?i:a?n(e):"Object"==(s=n(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,i){var n=i(27);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e){if(t instanceof Array){if("precision"!==t[0].substring(0,9)){var i=t.slice(0);return i.unshift("precision "+e+" float;"),i}}else if("precision"!==t.trim().substring(0,9))return"precision "+e+" float;\n"+t;return t}e.__esModule=!0;var s=i(26),h=i(13),u=function(t){return t&&t.__esModule?t:{default:t}}(h),l=function(t){function e(i,a,s,h,l){return n(this,e),r(this,t.call(this,i,o(a,l||u.default.PRECISION_VERTEX),o(s,l||u.default.PRECISION_FRAGMENT),void 0,h))}return a(e,t),e}(s.GLShader);e.default=l},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(7),h=i(213),u=function(t){return t&&t.__esModule?t:{default:t}}(h),l=function(t){function e(){n(this,e);var i=r(this,t.call(this));return i.children=[],i}return a(e,t),e.prototype.onChildrenChange=function(){},e.prototype.addChild=function(t){var e=arguments.length;if(e>1)for(var i=0;i<e;i++)this.addChild(arguments[i]);else t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),t.emit("added",this);return t},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),t},e.prototype.swapChildren=function(t,e){if(t!==e){var i=this.getChildIndex(t),n=this.getChildIndex(e);this.children[i]=e,this.children[n]=t,this.onChildrenChange(i<n?i:n)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(t);(0,s.removeItems)(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(t){var e=arguments.length;if(e>1)for(var i=0;i<e;i++)this.removeChild(arguments[i]);else{var n=this.children.indexOf(t);if(-1===n)return null;t.parent=null,t.transform._parentID=-1,(0,s.removeItems)(this.children,n,1),this._boundsID++,this.onChildrenChange(n),t.emit("removed",this)}return t},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,(0,s.removeItems)(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),e},e.prototype.removeChildren=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],i=t,n="number"==typeof e?e:this.children.length,r=n-i,a=void 0;if(r>0&&r<=n){a=this.children.splice(i,r);for(var o=0;o<a.length;++o)a[o].parent=null,a[o].transform&&(a[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var s=0;s<a.length;++s)a[s].emit("removed",this);return a}if(0===r&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var i=this.children[t];i.visible&&i.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];e.visible&&e.renderable&&(e.calculateBounds(),e._mask?(e._mask.calculateBounds(),this._bounds.addBoundsMask(e._bounds,e._mask._bounds)):e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds))}this._lastBoundsID=this._boundsID},e.prototype._calculateBounds=function(){},e.prototype.renderWebGL=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(t);else{this._renderWebGL(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].renderWebGL(t)}},e.prototype.renderAdvancedWebGL=function(t){t.flush();var e=this._filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var n=0;n<e.length;n++)e[n].enabled&&this._enabledFilters.push(e[n]);this._enabledFilters.length&&t.filterManager.pushFilter(this,this._enabledFilters)}i&&t.maskManager.pushMask(this,this._mask),this._renderWebGL(t);for(var r=0,a=this.children.length;r<a;r++)this.children[r].renderWebGL(t);t.flush(),i&&t.maskManager.popMask(this,this._mask),e&&this._enabledFilters&&this._enabledFilters.length&&t.filterManager.popFilter()},e.prototype._renderWebGL=function(t){},e.prototype._renderCanvas=function(t){},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&t.maskManager.pushMask(this._mask),this._renderCanvas(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},e.prototype.destroy=function(e){t.prototype.destroy.call(this);var i="boolean"==typeof e?e:e&&e.children,n=this.removeChildren(0,this.children.length);if(i)for(var r=0;r<n.length;++r)n[r].destroy(e)},o(e,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}}]),e}(u.default);e.default=l,l.prototype.containerUpdateTransform=l.prototype.updateTransform},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(219),h=n(s),u=i(527),l=n(u),c=i(220),f=n(c),d=i(528),p=n(d),m=i(7),v=i(3),g=i(13),y=n(g),_=function(t){function e(i,n,o){r(this,e);var s=a(this,t.call(this,"Canvas",i,n,o));return s.type=v.RENDERER_TYPE.CANVAS,s.rootContext=s.view.getContext("2d",{alpha:s.transparent}),s.context=s.rootContext,s.refresh=!0,s.maskManager=new l.default(s),s.smoothProperty="imageSmoothingEnabled",s.rootContext.imageSmoothingEnabled||(s.rootContext.webkitImageSmoothingEnabled?s.smoothProperty="webkitImageSmoothingEnabled":s.rootContext.mozImageSmoothingEnabled?s.smoothProperty="mozImageSmoothingEnabled":s.rootContext.oImageSmoothingEnabled?s.smoothProperty="oImageSmoothingEnabled":s.rootContext.msImageSmoothingEnabled&&(s.smoothProperty="msImageSmoothingEnabled")),s.initPlugins(),s.blendModes=(0,p.default)(),s._activeBlendMode=null,s.renderingToScreen=!1,s.resize(s.options.width,s.options.height),s}return o(e,t),e.prototype.render=function(t,e,i,n,r){if(this.view){this.renderingToScreen=!e,this.emit("prerender");var a=this.resolution;e?(e=e.baseTexture||e,e._canvasRenderTarget||(e._canvasRenderTarget=new f.default(e.width,e.height,e.resolution),e.source=e._canvasRenderTarget.canvas,e.valid=!0),this.context=e._canvasRenderTarget.context,this.resolution=e._canvasRenderTarget.resolution):this.context=this.rootContext;var o=this.context;if(e||(this._lastObjectRendered=t),!r){var s=t.parent,h=this._tempDisplayObjectParent.transform.worldTransform;n?(n.copy(h),this._tempDisplayObjectParent.transform._worldID=-1):h.identity(),t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=s}o.save(),o.setTransform(1,0,0,1,0,0),o.globalAlpha=1,this._activeBlendMode=v.BLEND_MODES.NORMAL,o.globalCompositeOperation=this.blendModes[v.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(o.fillStyle="black",o.clear()),(void 0!==i?i:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?o.clearRect(0,0,this.width,this.height):(o.fillStyle=this._backgroundColorString,o.fillRect(0,0,this.width,this.height)));var u=this.context;this.context=o,t.renderCanvas(this),this.context=u,o.restore(),this.resolution=a,this.emit("postrender")}},e.prototype.clear=function(t){var e=this.context;t=t||this._backgroundColorString,!this.transparent&&t?(e.fillStyle=t,e.fillRect(0,0,this.width,this.height)):e.clearRect(0,0,this.width,this.height)},e.prototype.setBlendMode=function(t){this._activeBlendMode!==t&&(this._activeBlendMode=t,this.context.globalCompositeOperation=this.blendModes[t])},e.prototype.destroy=function(e){this.destroyPlugins(),t.prototype.destroy.call(this,e),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},e.prototype.resize=function(e,i){t.prototype.resize.call(this,e,i),this.smoothProperty&&(this.rootContext[this.smoothProperty]=y.default.SCALE_MODE===v.SCALE_MODES.LINEAR)},e.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},e}(h.default);e.default=_,m.pluginTarget.mixin(_)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(e){n(this,t),this.renderer=e,this.renderer.on("context",this.onContextChange,this)}return t.prototype.onContextChange=function(){},t.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},t}();e.default=r},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(5),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(s),u=i(44),l=function(t){return t&&t.__esModule?t:{default:t}}(u),c=new h.Point,f=new h.Polygon,d=function(t){function e(i,a,o,s,u){n(this,e);var c=r(this,t.call(this));return c._texture=i||l.default.EMPTY,c.uvs=o||new Float32Array([0,0,1,0,1,1,0,1]),c.vertices=a||new Float32Array([0,0,100,0,100,100,0,100]),c.indices=s||new Uint16Array([0,1,3,2]),c.dirty=0,c.indexDirty=0,c.vertexDirty=0,c.autoUpdate=!0,c.blendMode=h.BLEND_MODES.NORMAL,c.canvasPadding=h.settings.MESH_CANVAS_PADDING,c.drawMode=u||e.DRAW_MODES.TRIANGLE_MESH,c.shader=null,c.tintRgb=new Float32Array([1,1,1]),c._glDatas={},c._uvTransform=new h.TextureMatrix(c._texture),c.uploadUvTransform=!1,c.pluginName="mesh",c}return a(e,t),e.prototype._renderWebGL=function(t){this.refresh(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){this.refresh(),t.plugins[this.pluginName].render(this)},e.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},e.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},e.prototype.refresh=function(t){this.autoUpdate&&this.vertexDirty++,this._uvTransform.update(t)&&this._refresh()},e.prototype._refresh=function(){},e.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,c);for(var i=this.vertices,n=f.points,r=this.indices,a=this.indices.length,o=this.drawMode===e.DRAW_MODES.TRIANGLES?3:1,s=0;s+2<a;s+=o){var h=2*r[s],u=2*r[s+1],l=2*r[s+2];if(n[0]=i[h],n[1]=i[h+1],n[2]=i[u],n[3]=i[u+1],n[4]=i[l],n[5]=i[l+1],f.contains(c.x,c.y))return!0}return!1},e.prototype.destroy=function(e){for(var i in this._glDatas){var n=this._glDatas[i];n.destroy?n.destroy():(n.vertexBuffer&&(n.vertexBuffer.destroy(),n.vertexBuffer=null),n.indexBuffer&&(n.indexBuffer.destroy(),n.indexBuffer=null),n.uvBuffer&&(n.uvBuffer.destroy(),n.uvBuffer=null),n.vao&&(n.vao.destroy(),n.vao=null))}this._glDatas=null,t.prototype.destroy.call(this,e)},o(e,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return h.utils.rgb2hex(this.tintRgb)},set:function(t){this.tintRgb=h.utils.hex2rgb(t,this.tintRgb)}}]),e}(h.Container);e.default=d,d.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},function(t,e,i){"use strict";var n=i(602).default,r=i(148).default,a=i(247),o=i(248);n.Resource=r,n.async=a,n.base64=o,t.exports=n,t.exports.default=n},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(){n(this,t),this.bmax=Math.pow(2,8),this.smax=Math.pow(2,16),this.imax=Math.pow(2,32)}return r(t,[{key:"ReadUInit32",value:function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e+0]}},{key:"ReadInit32",value:function(t,e){var i=t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e+0];return i>=this.imax/2&&(i-=this.imax),i}},{key:"ReadUShort",value:function(t,e){return t[e+1]<<8|t[e+0]}},{key:"ReadShort",value:function(t,e){var i=t[e+1]<<8|t[e+0];return i>=this.smax/2&&(i-=this.smax),i}},{key:"ReadShortArray",value:function(t,e,i,n,r){for(var a=0;a<r;a++)t[a+e]=this.ReadShort(i,n),n+=2;return n}},{key:"ReadUByte",value:function(t,e){return 255&t[e]}},{key:"ReadByte",value:function(t,e){var i=255&t[e];return i>=this.bmax/2&&(i-=this.bmax),i}},{key:"ArrayCopy",value:function(t,e,i,n,r){for(var a=0;a<r;a++)t[e++]=i[n++]}}]),t}();t.exports=new a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(75),o=function(){function t(){n(this,t),this.version,this.count,this.packName,this.packDataIndex,this.packdDataLength,this.packdData,this.subpackCount,this.subpackStartIndex}return r(t,[{key:"Load",value:function(t){var e=null;if("undefined"!=typeof Uint8Array)e=new Uint8Array(t);else{var i=new DataView(t);e=[];for(var n=0;n<t.byteLength;n++)e[n]=i.getUint8(n)}var r=0;this.version=a.ReadShort(e,r),r+=2,this.count=a.ReadShort(e,r),r+=2,this.subpackCount=a.ReadShort(e,r),r+=2,this.subpackStartIndex=[];for(var o=0;o<this.subpackCount;o++){var s=a.ReadShort(e,r);r+=2,this.subpackStartIndex[o]=s}this.packName=[],this.packdData=[],this.packDataIndex=[],this.packdDataLength=[];for(var h=0,u=0;u<this.subpackCount;u++)for(;h<this.count;){var l=a.ReadByte(e,r);if(r++,l>0){var c=[];a.ArrayCopy(c,0,e,r,l),r+=l,this.packName[h]=c}var f=a.ReadInit32(e,r);r+=4,this.packDataIndex[h]=f;var d=a.ReadInit32(e,r);r+=4,this.packdDataLength[h]=d,h++}for(var p=0;p<this.count;p++){var m=this.packDataIndex[p],v=this.packdDataLength[p];a.ReadByte(e,m);m++,this.packdData[p]=[],a.ArrayCopy(this.packdData[p],0,e,m,v-1)}}},{key:"GetData",value:function(t){return this.packdData[t]}},{key:"Close",value:function(){if(null!=this.packdData){for(var t=0;t<this.packdData.length;t++)this.DeleteArray(this.packdData[t]);this.DeleteArray(this.packdData)}this.packName=null,this.packdData=null,this.packDataIndex=null,this.packdDataLength=null,this.isloaded=!1}},{key:"DeleteArray",value:function(t){for(var e=0;e<t.length;e++)delete t[e];t.splice(0,t.length)}}]),t}();t.exports=new o},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(258),o=i(75),s=e.Module=function t(){n(this,t),this.type,this.x,this.y,this.w,this.h,this.color},h=e.FModule=function t(){n(this,t),this.fmodulesID,this.fmodulesOX,this.fmodulesOY,this.fmodulesFlags,this.fmodulesPal,this.fmodulesRotation,this.fmodulesScaleX,this.fmodulesScaleY,this.fmodulesBlendMode,this.fmodulesBlendOpacity},u=e.Frame=function t(){n(this,t),this.fmCount,this.fmstartIndex,this.rect=[]},l=e.AFrame=function t(){n(this,t),this.frameIndex,this.time,this.ox,this.oy,this.flags,this.rotation=0,this.scaleX=1,this.scaleY=1},c=e.Animation=function t(){n(this,t),this.aFramesCount,this.aFramesStartIndex},f=function(){function t(){n(this,t),this.bsFlags=0,this.bsExtraFlags=0,this.modules=[],this.fmodule=[],this.frames=[],this.frameRect=[],this.framePolygon=[],this.framePolygonLength=[],this.aframe=[],this.anims=[]}return r(t,[{key:"CheckFlag",value:function(t,e){return 0!=(t&e)}},{key:"CheckSpriteFlag",value:function(t){return 0!=(this.bsFlags&t)}},{key:"CheckSpriteExtraFlag",value:function(t){return 0!=(this.bsExtraFlags&t)}},{key:"ConvertFMFlagsToFreeRotateScale",value:function(t){var e=t.fmodulesFlags,i=t.fmodulesOX,n=t.fmodulesOY,r=this.modules[t.fmodulesID],a=r.w,o=r.h;t.fmodulesRotation=0,t.fmodulesScaleX=1,t.fmodulesScaleY=1,this.CheckFlag(e,4)?(t.fmodulesRotation=90,this.CheckFlag(e,1)?(t.fmodulesScaleX=-1,this.CheckFlag(e,2)?(t.fmodulesScaleY=-1,n+=a):(n+=a,i+=o)):this.CheckFlag(e,2)?t.fmodulesScaleY=-1:i+=o,t.fmodulesOY=n,t.fmodulesOX=i):(this.CheckFlag(e,1)&&(t.fmodulesScaleX=-1,i+=a,t.fmodulesOX=i),this.CheckFlag(e,2)&&(t.fmodulesScaleY=-1,n+=o,t.fmodulesOY=n))}},{key:"LoadModule",value:function(t,e){var i=o.ReadUShort(t,e);if(e+=2,i>0)for(var n=void 0,r=0;r<i;++r){var a=o.ReadUByte(t,e);e++;var h=!1,u=!1,l=!1,c=!1;n=new s,n.type=a,0==a?(h=!0,u=!0,this.CheckSpriteFlag(4)&&(n.imgIndex=o.ReadByte(t,e),e++)):244==a||255==a||(254==a?(l=!0,c=!0,u=!0):253==a||252==a||251==a||250==a||249==a||248==a||247==a||Utils.Log("Invalid module type : "+a+"\tmodule #"+r)),l&&this.CheckSpriteExtraFlag(1<<22),c&&(n.color=Graphic.ToColor(o.ReadInit32(t,e)),e+=4),h&&(this.CheckSpriteFlag(32)?(n.x=o.ReadShort(t,e),e+=2,n.y=o.ReadShort(t,e),e+=2):this.CheckSpriteFlag(2)&&(n.x=o.ReadByte(t,e),e++,n.y=o.ReadByte(t,e),e++)),u&&(this.CheckSpriteFlag(16)?(n.w=o.ReadShort(t,e),e+=2,n.h=o.ReadShort(t,e),e+=2):(n.w=o.ReadByte(t,e),e++,n.h=o.ReadByte(t,e),e++)),this.modules.push(n)}return e}},{key:"LoadFModule",value:function(t,e){var i=o.ReadUShort(t,e);if(e+=2,i>0)for(var n=0;n<i;n++){var r=new h;this.CheckSpriteFlag(1<<20)?(r.fmodulesID=o.ReadShort(t,e),e+=2):(r.fmodulesID=o.ReadByte(t,e),e++),this.CheckSpriteFlag(1024)?(r.fmodulesOX=o.ReadShort(t,e),e+=2,r.fmodulesOY=o.ReadShort(t,e),e+=2):(r.fmodulesOX=o.ReadByte(t,e),e++,r.fmodulesOY=o.ReadByte(t,e),e++),this.CheckSpriteFlag(16384)&&(r.fmodulesPal=o.ReadByte(t,e),e++),r.fmodulesFlags=o.ReadByte(t,e),e++,this.CheckSpriteExtraFlag(1)?(r.fmodulesRotation=o.ReadShort(t,e),e+=2,r.fmodulesScaleX=o.ReadShort(t,e)/100,e+=2,r.fmodulesScaleY=o.ReadShort(t,e)/100,e+=2):this.ConvertFMFlagsToFreeRotateScale(r),this.CheckSpriteExtraFlag(16)&&(r.fmodulesBlendMode=o.ReadByte(t,e),e++,r.fmodulesBlendOpacity=o.ReadByte(t,e),e++),this.fmodule.push(r)}return e}},{key:"LoadFrame",value:function(t,e){if(this.CheckSpriteFlag(32768)){var i=o.ReadUShort(t,e);e+=2;var n=i<<2,r=0;this.CheckSpriteFlag(1024)?(o.ReadShortArray(this.frameRect,r,t,e,n),e+=2*n,r+=n):(o.ArrayCopy(this.frameRect,r,t,e,n),e+=n,r+=n)}if(this.CheckSpriteExtraFlag(1<<26)){var s=o.ReadUShort(t,e);e+=2;var h=s<<1;this.CheckSpriteFlag(1024)?(o.ReadShortArray(this.framePolygon,0,t,e,h),e+=2*h):(o.ReadShortArray(this.framePolygon,0,t,e,h),e+=h);var l=o.ReadUShort(t,e);e+=2,o.ReadShortArray(this.framePolygonLength,0,t,e,l),e+=2*l}var c=o.ReadUShort(t,e);if(e+=2,c>0){for(var f=0,d=0,p=0;p<c;p++){var m=new u,v=0,g=0;if(this.CheckSpriteFlag(2048)?(m.fmCount=o.ReadShort(t,e),e+=2):(m.fmCount=o.ReadByte(t,e),e++),m.fmstartIndex=o.ReadShort(t,e),e+=2,this.CheckSpriteFlag(32768)){var y=f;f+=o.ReadByte(t,e),e++,v=f-y;for(var _=0;_<v;_++){var T=new a,E=4*(y+_);T.x=this.frameRect[E+0],T.y=this.frameRect[E+1],T.width=this.frameRect[E+2],T.height=this.frameRect[E+3],m.rect.push(T)}}if(this.CheckSpriteExtraFlag(1<<26)){var S=d;d+=o.ReadByte(t,e),e++,g=d-S;for(var b=0;b<g;b++){for(var A=[],I=0,w=0;w<S+b;w++)I+=this.framePolygonLength[w];for(var w=0;w<this.framePolygonLength[S+b];w++){var x=2*(I+w);A.push(this.framePolygon[x+0]),A.push(this.framePolygon[x+1])}m.rect.push(A)}}if(v<=0&&g<=0){var P=new a,M=m.fmstartIndex,O=m.fmstartIndex+m.fmCount,C=this.fmodule[M],R=0,k=0;C&&(P.x=C.fmodulesOX,P.y=C.fmodulesOY,R=C.fmodulesOX+this.modules[C.fmodulesID].w,k=C.fmodulesOY+this.modules[C.fmodulesID].h);for(var D=M;D<O;D++){var L=this.modules[this.fmodule[D].fmodulesID];C=this.fmodule[D],P.x>C.fmodulesOX&&(P.x=C.fmodulesOX),P.y>C.fmodulesOY&&(P.y=C.fmodulesOY),R<C.fmodulesOX+L.w&&(R=C.fmodulesOX+L.w),k<C.fmodulesOY+L.h&&(k=C.fmodulesOY+L.h)}P.width=R-P.x,P.height=k-P.y,m.rect.push(P)}this.frames.push(m)}if(!this.CheckSpriteFlag(4096))for(var N=c<<2,G=0;G<N;G++){this.CheckSpriteFlag(1024)?(o.ReadShort(t,e),e+=2):(o.ReadByte(t,e),e++)}this.CheckSpriteFlag(8192)&&(this.CheckSpriteFlag(1024)?e+=c<<3:e+=c<<2)}return e}},{key:"LoadAFrame",value:function(t,e){var i=o.ReadUShort(t,e);if(e+=2,i>0)for(var n=0;n<i;n++){var r=new l;this.CheckSpriteFlag(1<<21)?(r.frameIndex=o.ReadShort(t,e),e+=2):(r.frameIndex=o.ReadByte(t,e),e++),r.time=o.ReadUByte(t,e),e++,this.CheckSpriteFlag(1<<18)?(r.ox=o.ReadShort(t,e),e+=2,r.oy=o.ReadShort(t,e),e+=2):(r.ox=o.ReadByte(t,e),e++,r.oy=o.ReadByte(t,e),e++),r.flags=o.ReadByte(t,e),e++,this.CheckSpriteExtraFlag(2)&&(r.rotation=o.ReadShort(t,e),e+=2,r.scaleX=o.ReadShort(t,e)/100,e+=2,r.scaleY=o.ReadShort(t,e)/100,e+=2),this.aframe.push(r)}return e}},{key:"LoadAnims",value:function(t,e){var i=o.ReadUShort(t,e);if(e+=2,i>0)for(var n=0;n<i;n++){var r=new c;this.CheckSpriteFlag(1<<19)?(r.aFramesCount=o.ReadShort(t,e),e+=2):(r.aFramesCount=o.ReadByte(t,e),e++),r.aFramesStartIndex=o.ReadShort(t,e),e+=2,this.anims.push(r)}return e}},{key:"LoadTween",value:function(t,e){if(this.CheckSpriteExtraFlag(4096))try{var i=o.ReadUShort(t,e);e+=2;for(var n=0;n<i;n++)e+=2,e++,e+=2,e+=2,e+=2,e+=2,e+=2,e+=2,e++,e+=2,e+=2,e+=2,e+=2,e+=2,e++,e+=2;var r=o.ReadUShort(t,e);e+=2;for(var a=0;a<r;a++)e+=2,e+=2,e+=2;var s=o.ReadUShort(t,e);e+=2;for(var h=0;h<s;h++)e+=2,e+=2,e+=2,e+=2,e+=2;var u=o.ReadUShort(t,e);e+=2;for(var l=0;l<u;l++)e+=2,e+=2,e+=2}catch(t){Utils.Log("Guisprite: "+t)}return e}},{key:"Load",value:function(t){if(this.bsFlags=0,this.bsExtraFlags=0,this.modules=[],this.fmodule=[],this.frames=[],this.frameRect=[],this.framePolygon=[],this.framePolygonLength=[],this.aframe=[],this.anims=[],t&&null!=t&&t.length>0){var e=0,i=o.ReadShort(t,e);if(e+=2,1503!=i)return void Utils.Log("ASprite.Load.Invalid BSprite version!");if(this.bsFlags=o.ReadInit32(t,e),e+=4,this.CheckSpriteFlag(1<<22)&&(this.bsExtraFlags=o.ReadInit32(t,e),e+=4),e=this.LoadModule(t,e),e=this.LoadFModule(t,e),e=this.LoadFrame(t,e),e=this.LoadAFrame(t,e),e=this.LoadAnims(t,e),e=this.LoadTween(t,e),this.modules.length<=0)return void Utils.Log("WARNING: sprite with num modules = "+this.modules.length);for(var n=[this.modules,this.fmodule,this.frames,this.aframe,this.anims],r=[],a=0;a<n.length;a++){var s=[];o.ArrayCopy(s,0,n[a],0,n[a].length),r.push(s)}return{modules:r[0],fmodule:r[1],frames:r[2],aframe:r[3],anims:r[4]}}}}]),t}();t.exports=new f},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(17),h=function(t){function e(){n(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),i=0;return t.STATE={},t.STATE.INACTIVE=i++,t.STATE.INIT=i++,t.STATE.ACTIVE=i++,t.mArrObject=[],t.mState,t}return a(e,t),o(e,[{key:"Init",value:function(){this._SetState(this.STATE.INIT)}},{key:"_SetState",value:function(t){switch(this.mState=t,this.mState){case this.STATE.INACTIVE:case this.STATE.INIT:this.visible=!1;break;case this.STATE.ACTIVE:this.visible=!0}}},{key:"Update",value:function(t){switch(this.mState){case this.STATE.INACTIVE:case this.STATE.INIT:case this.STATE.ACTIVE:}}},{key:"SetNumber",value:function(t,e,i,n){this._HideAllObject(this.mArrObject);for(var r=Math.abs(Math.round(t)).toString().split(""),a=r.length,o=0;o<a;o++){var s=this._GetObject(this.mArrObject,e,this);s.visible=!0,s.SetFrame(n[parseInt(r[o])]),s.position.set(28*o,0)}this._SetState(this.STATE.ACTIVE)}},{key:"_HideAllObject",value:function(t){for(var e=t.length,i=0;i<e;i++)t[i].visible=!1}},{key:"_GetObject",value:function(t,e,i){for(var n=t.length,r=0;r<n;r++)if(!t[r].visible&&t[r].spriteIndex==e)return t[r];var a=new s(e);return t.push(a),i.addChild(a),a}}]),e}(PIXI.Container);t.exports=h},function(t,e,i){var n=i(25),r=i(11),a=i(55);t.exports=function(t){return function(e,i,o){var s,h=n(e),u=r(h.length),l=a(o,u);if(t&&i!=i){for(;u>l;)if((s=h[l++])!=s)return!0}else for(;u>l;l++)if((t||l in h)&&h[l]===i)return t||l||0;return!t&&-1}}},function(t,e,i){"use strict";var n=i(2),r=i(0),a=i(19),o=i(53),s=i(43),h=i(48),u=i(47),l=i(6),c=i(4),f=i(85),d=i(60),p=i(115);t.exports=function(t,e,i,m,v,g){var y=n[t],_=y,T=v?"set":"add",E=_&&_.prototype,S={},b=function(t){var e=E[t];a(E,t,"delete"==t?function(t){return!(g&&!l(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!l(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,i){return e.call(this,0===t?0:t,i),this})};if("function"==typeof _&&(g||E.forEach&&!c(function(){(new _).entries().next()}))){var A=new _,I=A[T](g?{}:-0,1)!=A,w=c(function(){A.has(1)}),x=f(function(t){new _(t)}),P=!g&&c(function(){for(var t=new _,e=5;e--;)t[T](e,e);return!t.has(-0)});x||(_=e(function(e,i){u(e,_,t);var n=p(new y,e,_);return void 0!=i&&h(i,v,n[T],n),n}),_.prototype=E,E.constructor=_),(w||P)&&(b("delete"),b("has"),v&&b("get")),(P||I)&&b(T),g&&E.clear&&delete E.clear}else _=m.getConstructor(e,t,v,T),o(_.prototype,i),s.NEED=!0;return d(_,t),S[t]=_,r(r.G+r.W+r.F*(_!=y),S),g||m.setStrong(_,t,v),_}},function(t,e,i){"use strict";var n=i(18),r=i(19),a=i(4),o=i(33),s=i(8);t.exports=function(t,e,i){var h=s(t),u=i(o,h,""[t]),l=u[0],c=u[1];a(function(){var e={};return e[h]=function(){return 7},7!=""[t](e)})&&(r(String.prototype,t,l),n(RegExp.prototype,h,2==e?function(t,e){return c.call(t,this,e)}:function(t){return c.call(t,this)}))}},function(t,e,i){"use strict";var n=i(1);t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,i){var n=i(27);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,i){var n=i(6),r=i(27),a=i(8)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[a])?!!e:"RegExp"==r(t))}},function(t,e,i){var n=i(8)("iterator"),r=!1;try{var a=[7][n]();a.return=function(){r=!0},Array.from(a,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var i=!1;try{var a=[7],o=a[n]();o.next=function(){return{done:i=!0}},a[n]=function(){return o},t(a)}catch(t){}return i}},function(t,e,i){"use strict";t.exports=i(42)||!i(4)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete i(2)[t]})},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,i){"use strict";var n=i(0),r=i(16),a=i(29),o=i(48);t.exports=function(t){n(n.S,t,{from:function(t){var e,i,n,s,h=arguments[1];return r(this),e=void 0!==h,e&&r(h),void 0==t?new this:(i=[],e?(n=0,s=a(h,arguments[2],2),o(t,!1,function(t){i.push(s(t,n++))})):o(t,!1,i.push,i),new this(i))}})}},function(t,e,i){"use strict";var n=i(0);t.exports=function(t){n(n.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,i){var n=i(28),r=i(2),a=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:n.version,mode:i(42)?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},function(t,e,i){var n=i(1),r=i(16),a=i(8)("species");t.exports=function(t,e){var i,o=n(t).constructor;return void 0===o||void 0==(i=n(o)[a])?e:r(i)}},function(t,e,i){for(var n,r=i(2),a=i(18),o=i(56),s=o("typed_array"),h=o("view"),u=!(!r.ArrayBuffer||!r.DataView),l=u,c=0,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");c<9;)(n=r[f[c++]])?(a(n.prototype,s,!0),a(n.prototype,h,!0)):l=!1;t.exports={ABV:u,CONSTR:l,TYPED:s,VIEW:h}},function(t,e,i){var n=i(2),r=n.navigator;t.exports=r&&r.userAgent||""},function(t,e,i){"use strict";function n(t,e){var i=t.points;if(0!==i.length){var n=new a.Point(i[0],i[1]),r=new a.Point(i[i.length-2],i[i.length-1]);if(n.x===r.x&&n.y===r.y){i=i.slice(),i.pop(),i.pop(),r=new a.Point(i[i.length-2],i[i.length-1]);var s=r.x+.5*(n.x-r.x),h=r.y+.5*(n.y-r.y);i.unshift(s,h),i.push(s,h)}var u=e.points,l=e.indices,c=i.length/2,f=i.length,d=u.length/6,p=t.lineWidth/2,m=(0,o.hex2rgb)(t.lineColor),v=t.lineAlpha,g=m[0]*v,y=m[1]*v,_=m[2]*v,T=i[0],E=i[1],S=i[2],b=i[3],A=0,I=0,w=-(E-b),x=T-S,P=0,M=0,O=0,C=0,R=Math.sqrt(w*w+x*x);w/=R,x/=R,w*=p,x*=p;var k=t.lineAlignment,D=2*(1-k),L=2*k;u.push(T-w*D,E-x*D,g,y,_,v),u.push(T+w*L,E+x*L,g,y,_,v);for(var N=1;N<c-1;++N){T=i[2*(N-1)],E=i[2*(N-1)+1],S=i[2*N],b=i[2*N+1],A=i[2*(N+1)],I=i[2*(N+1)+1],w=-(E-b),x=T-S,R=Math.sqrt(w*w+x*x),w/=R,x/=R,w*=p,x*=p,P=-(b-I),M=S-A,R=Math.sqrt(P*P+M*M),P/=R,M/=R,P*=p,M*=p;var G=-x+E-(-x+b),F=-w+S-(-w+T),U=(-w+T)*(-x+b)-(-w+S)*(-x+E),B=-M+I-(-M+b),j=-P+S-(-P+A),V=(-P+A)*(-M+b)-(-P+S)*(-M+I),X=G*j-B*F;if(Math.abs(X)<.1)X+=10.1,u.push(S-w*D,b-x*D,g,y,_,v),u.push(S+w*L,b+x*L,g,y,_,v);else{var H=(F*V-j*U)/X,Y=(B*U-G*V)/X;(H-S)*(H-S)+(Y-b)*(Y-b)>196*p*p?(O=w-P,C=x-M,R=Math.sqrt(O*O+C*C),O/=R,C/=R,O*=p,C*=p,u.push(S-O*D,b-C*D),u.push(g,y,_,v),u.push(S+O*L,b+C*L),u.push(g,y,_,v),u.push(S-O*L*D,b-C*D),u.push(g,y,_,v),f++):(u.push(S+(H-S)*D,b+(Y-b)*D),u.push(g,y,_,v),u.push(S-(H-S)*L,b-(Y-b)*L),u.push(g,y,_,v))}}T=i[2*(c-2)],E=i[2*(c-2)+1],S=i[2*(c-1)],b=i[2*(c-1)+1],w=-(E-b),x=T-S,R=Math.sqrt(w*w+x*x),w/=R,x/=R,w*=p,x*=p,u.push(S-w*D,b-x*D),u.push(g,y,_,v),u.push(S+w*L,b+x*L),u.push(g,y,_,v),l.push(d);for(var W=0;W<f;++W)l.push(d++);l.push(d-1)}}function r(t,e){var i=0,n=t.points;if(0!==n.length){var r=e.points,a=n.length/2,s=(0,o.hex2rgb)(t.lineColor),h=t.lineAlpha,u=s[0]*h,l=s[1]*h,c=s[2]*h;for(i=1;i<a;i++){var f=n[2*(i-1)],d=n[2*(i-1)+1],p=n[2*i],m=n[2*i+1];r.push(f,d),r.push(u,l,c,h),r.push(p,m),r.push(u,l,c,h)}}}e.__esModule=!0,e.default=function(t,e,i){t.nativeLines?r(t,i):n(t,e)};var a=i(15),o=i(7)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(219),h=n(s),u=i(535),l=n(u),c=i(536),f=n(c),d=i(534),p=n(d),m=i(97),v=n(m),g=i(96),y=n(g),_=i(530),T=n(_),E=i(63),S=n(E),b=i(529),A=n(b),I=i(531),w=n(I),x=i(539),P=n(x),M=i(540),O=n(M),C=i(7),R=i(26),k=n(R),D=i(3),L=0,N=function(t){function e(i,n,o){r(this,e);var s=a(this,t.call(this,"WebGL",i,n,o));return s.legacy=s.options.legacy,s.legacy&&(k.default.VertexArrayObject.FORCE_NATIVE=!0),s.type=D.RENDERER_TYPE.WEBGL,s.handleContextLost=s.handleContextLost.bind(s),s.handleContextRestored=s.handleContextRestored.bind(s),s.view.addEventListener("webglcontextlost",s.handleContextLost,!1),s.view.addEventListener("webglcontextrestored",s.handleContextRestored,!1),s._contextOptions={alpha:s.transparent,antialias:s.options.antialias,premultipliedAlpha:s.transparent&&"notMultiplied"!==s.transparent,stencil:!0,preserveDrawingBuffer:s.options.preserveDrawingBuffer,powerPreference:s.options.powerPreference},s._backgroundColorRgba[3]=s.transparent?0:1,s.maskManager=new l.default(s),s.stencilManager=new f.default(s),s.emptyRenderer=new y.default(s),s.currentRenderer=s.emptyRenderer,s.textureManager=null,s.filterManager=null,s.initPlugins(),s.options.context&&(0,O.default)(s.options.context),s.gl=s.options.context||k.default.createContext(s.view,s._contextOptions),s.CONTEXT_UID=L++,s.state=new w.default(s.gl),s.renderingToScreen=!0,s.boundTextures=null,s._activeShader=null,s._activeVao=null,s._activeRenderTarget=null,s._initContext(),s.drawModes=(0,P.default)(s.gl),s._nextTextureLocation=0,s.setBlendMode(0),s}return o(e,t),e.prototype._initContext=function(){var t=this.gl;t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext();var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null,this._activeVao=null,this.boundTextures=new Array(e),this.emptyTextures=new Array(e),this.textureManager=new T.default(this),this.filterManager=new p.default(this),this.textureGC=new A.default(this),this.state.resetToDefault(),this.rootRenderTarget=new v.default(t,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var i=new k.default.GLTexture.fromData(t,null,1,1),n={_glTextures:{}};n._glTextures[this.CONTEXT_UID]={};for(var r=0;r<e;r++){var a=new S.default;a._glTextures[this.CONTEXT_UID]=i,this.boundTextures[r]=n,this.emptyTextures[r]=a,this.bindTexture(null,r)}this.emit("context",t),this.resize(this.screen.width,this.screen.height)},e.prototype.render=function(t,e,i,n,r){if(this.renderingToScreen=!e,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,e||(this._lastObjectRendered=t),!r){var a=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=a}this.bindRenderTexture(e,n),this.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this._activeRenderTarget.clear(),t.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.resize=function(t,e){h.default.prototype.resize.call(this,t,e),this.rootRenderTarget.resize(t,e),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},e.prototype.setBlendMode=function(t){this.state.setBlendMode(t)},e.prototype.clear=function(t){this._activeRenderTarget.clear(t)},e.prototype.setTransform=function(t){this._activeRenderTarget.transform=t},e.prototype.clearRenderTexture=function(t,e){var i=t.baseTexture,n=i._glRenderTargets[this.CONTEXT_UID];return n&&n.clear(e),this},e.prototype.bindRenderTexture=function(t,e){var i=void 0;if(t){var n=t.baseTexture;n._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(n,0),this.unbindTexture(n),i=n._glRenderTargets[this.CONTEXT_UID],i.setFrame(t.frame)}else i=this.rootRenderTarget;return i.transform=e,this.bindRenderTarget(i),this},e.prototype.bindRenderTarget=function(t){return t!==this._activeRenderTarget&&(this._activeRenderTarget=t,t.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=t.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(t.stencilMaskStack)),this},e.prototype.bindShader=function(t,e){return this._activeShader!==t&&(this._activeShader=t,t.bind(),!1!==e&&(t.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},e.prototype.bindTexture=function(t,e,i){if(t=t||this.emptyTextures[e],t=t.baseTexture||t,t.touched=this.textureGC.count,i)e=e||0;else{for(var n=0;n<this.boundTextures.length;n++)if(this.boundTextures[n]===t)return n;void 0===e&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,e=this.boundTextures.length-this._nextTextureLocation-1)}var r=this.gl,a=t._glTextures[this.CONTEXT_UID];return a?(this.boundTextures[e]=t,r.activeTexture(r.TEXTURE0+e),r.bindTexture(r.TEXTURE_2D,a.texture)):this.textureManager.updateTexture(t,e),e},e.prototype.unbindTexture=function(t){var e=this.gl;t=t.baseTexture||t;for(var i=0;i<this.boundTextures.length;i++)this.boundTextures[i]===t&&(this.boundTextures[i]=this.emptyTextures[i],e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[i]._glTextures[this.CONTEXT_UID].texture));return this},e.prototype.createVao=function(){return new k.default.VertexArrayObject(this.gl,this.state.attribState)},e.prototype.bindVao=function(t){return this._activeVao===t?this:(t?t.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=t,this)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer),this.bindVao(null),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.emptyTextures[t];return this.rootRenderTarget.activate(),this.state.resetToDefault(),this},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this.filterManager.destroy(!0),this._initContext()},e.prototype.destroy=function(e){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),t.prototype.destroy.call(this,e),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},e}(h.default);e.default=N,C.pluginTarget.mixin(N)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var o=i(72),s=function(t){return t&&t.__esModule?t:{default:t}}(o),h=function(t){function e(){return n(this,e),r(this,t.apply(this,arguments))}return a(e,t),e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.flush=function(){},e.prototype.render=function(t){},e}(s.default);e.default=h},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(15),a=i(3),o=i(13),s=function(t){return t&&t.__esModule?t:{default:t}}(o),h=i(26),u=function(){function t(e,i,o,u,l,c){n(this,t),this.gl=e,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new r.Rectangle(0,0,1,1),this.resolution=l||s.default.RESOLUTION,this.projectionMatrix=new r.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new r.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.filterPoolKey="",this.scaleMode=void 0!==u?u:s.default.SCALE_MODE,this.root=c,this.root?(this.frameBuffer=new h.GLFramebuffer(e,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=h.GLFramebuffer.createRGBA(e,100,100),this.scaleMode===a.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(i,o)}return t.prototype.clear=function(t){var e=t||this.clearColor;this.frameBuffer.clear(e[0],e[1],e[2],e[3])},t.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},t.prototype.setFrame=function(t,e){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||this.destinationFrame},t.prototype.activate=function(){var t=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(t.enable(t.SCISSOR_TEST),t.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):t.disable(t.SCISSOR_TEST),t.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},t.prototype.calculateProjection=function(t,e){var i=this.projectionMatrix;e=e||t,i.identity(),this.root?(i.a=1/t.width*2,i.d=-1/t.height*2,i.tx=-1-e.x*i.a,i.ty=1-e.y*i.d):(i.a=1/t.width*2,i.d=1/t.height*2,i.tx=-1-e.x*i.a,i.ty=-1-e.y*i.d)},t.prototype.resize=function(t,e){if(t|=0,e|=0,this.size.width!==t||this.size.height!==e){this.size.width=t,this.size.height=e,this.defaultFrame.width=t,this.defaultFrame.height=e,this.frameBuffer.resize(t*this.resolution,e*this.resolution);var i=this.frame||this.size;this.calculateProjection(i)}},t.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},t}();e.default=u},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";(function(e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){"mig_pause"==t.data?window.onGamePause():"mig_resume"==t.data?window.onGameResume():"mig_unMute"==t.data?o():"mig_mute"==t.data?a():"mig_load_retry"==t.data?StateManager.GetCurrentState()==StatePreLoad?StatePreLoad.Load():StateManager.GetCurrentState()==StateLoading&&StatePreLoad.ReLoad():"string"==typeof t.data&&-1!=t.data.indexOf("lang_")&&(window.langCountry=t.data.substr(5,2).toUpperCase(),s(),window.isPreLoadStart||(window.isPreLoadStart=!0,window.isPreloadReady&&StatePreLoad.Load()))}function a(){if(StateManager.GetCurrentState()!=StatePreLoad||StateLoading.loadingState==StateLoading.STATE_LOAD_FINISHED)for(var t=0;t<=25;t++)AudioManager.SetVolume(t,0);window.isMuteAudio=!0}function o(){if(StateManager.GetCurrentState()!=StatePreLoad||StateLoading.loadingState==StateLoading.STATE_LOAD_FINISHED)for(var t=0;t<=25;t++)AudioManager.SetVolume(t,1);window.isMuteAudio=!1}function s(){window.langCountry&&"EN"==window.langCountry?(window.languageText="EN",window.country_version="nz"):window.langCountry&&"TW"==window.langCountry?(window.languageText="TW",window.country_version="tw"):window.langCountry&&"AUT"==window.langCountry?(window.languageText="EN",window.country_version="aut"):window.langCountry&&"HK"==window.langCountry?(window.languageText="HK",window.country_version="HK"):window.langCountry&&"KR"==window.langCountry?(window.languageText="KR",window.country_version="kr"):window.langCountry&&"JP"==window.langCountry?(window.languageText="JP",window.country_version="jp"):(window.languageText="EN",window.country_version="aut"),window.languageIndex=h(window.languageText)}function h(t){switch(t){case"JP":return 1;case"KR":return 2;case"HK":return 3;case"TW":return 4;default:return 0}}var u=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();i(280);var l=function(){function t(){n(this,t),this.soundMax=50,this.scale=1,this.fontList={MainFont:"MainFont",TitleFont:"TitleFont"},this.fontInfo=[this.fontList.MainFont,this.fontList.TitleFont],this.isMigGamePortrait=!0,this.isHostGamePortrait=window.innerWidth<window.innerHeight,this.isSupportTwoScreenSize=!1,this.isReverseScaleRatio=!1,this.isSupportKeyboard=!0,this.isSmallVersion=!1,this.isNewUser=!1,this.isNewUser2=!1,this.isUseDetectRenderer=!0,this.isBackgroundTransparent=!0,this.isUseBanner=!1,this.isUseNewLoader=!0,window.isPreloadReady=!1,this.CreateNewLoaders(),this.CalculateScreenSize(),window.omsVersion=11,window.omsPhase="gold",console.warn||(console.warn=console.log),window.parent.postMessage("mig_set_up_language","*")}return u(t,[{key:"CreateNewLoaders",value:function(){this.isUseNewLoader&&(this.newLoaderArr=[],e.LoaderCustom1=new PIXI.loaders.Loader,e.LoaderCustom2=new PIXI.loaders.Loader,e.LoaderCustom3=new PIXI.loaders.Loader,this.newLoaderArr.push(LoaderCustom1,LoaderCustom2,LoaderCustom3))}},{key:"OverrideFunctions",value:function(){if(window.saveStatsOld){var t=window.saveStats;window.saveStats=function(e,i){if(!i)return t(e,i);var n="https://google.com"+e,r=i.replace(/link:/i,""),a={track:n,redir:r};window.ets_redirect_data&&(a.ets=window.ets_redirect_data);var o=("undefined"==typeof mraid?"link:":"")+"https://game-portal.gameloft.com/2093/redirect.php?track_redir=base64"+window.btoa(JSON.stringify(a));window.redirect?redirect(o):window.REVIEW&&window.open(o.replace("link:",""),"_blank"),t(e)}}}},{key:"CalculateScreenSize",value:function(){var t=this.isSmallVersion?.5:1;this.isMigGamePortrait?(this.width=750*t,this.height=1334*t):(this.width=1334*t,this.height=750*t),this.isUseBanner&&(this.bannerWidth=640*t,this.bannerHeight=100*t),this.scale=t}},{key:"Get3rdPartyImpression",value:function(){var t=void 0;return t=window.country_version?window.country_version.toLowerCase()+"_impression":"aut_impression",Resource.GetParam(t)}}]),t}();t.exports=new l,window.addEventListener("message",r,!1),window.detectLanguage=s,window.muteAudio=a,window.unmuteAudio=o}).call(e,i(21))},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(){n(this,t),this.DEVICE_MODEL=this.GetStatsUrlInfo("device_model"),this.DEVICE_INFO="",window.languageIndex=0}return r(t,[{key:"DetectDevice",value:function(t,e){console.log("User Agent: "+navigator.userAgent),console.log("Device Model: "+this.DEVICE_MODEL);var i=navigator.userAgent||navigator.vendor||window.opera;this.isFBApp=i.indexOf("FBAN")>-1||i.indexOf("FBAV")>-1,this.isIOS=-1!=navigator.userAgent.search(/(iPad|iPhone|iphone|iPod)/);var n=navigator.userAgent.match(/(iPad|iPhone|iphone|iPod).*?(OS |os |OS\_)(\d+((_|\.)\d)?((_|\.)\d)?)/);if(n)var r=parseInt(n[3].split("_")[0]);this.isIOS10=!!r&&!(r>10),-1!=navigator.userAgent.search("GT-I9505")||-1!=navigator.userAgent.search("Nexus 5")||-1!=navigator.userAgent.search("SM-G900")?this.isLowEnd=!0:this.isLowEnd=!1,-1==navigator.platform.search("Win")&&-1==navigator.platform.search("Mac")?this.isBrowser=!1:this.isBrowser=!0,-1==navigator.userAgent.search("Firefox")&&-1==navigator.userAgent.search("FxiOS")||(this.isFirefox=!0),GameConfig.CalculateScreenSize(),console.log("Small Version: "+GameConfig.isSmallVersion)}},{key:"GetStatsUrlInfo",value:function(t){var e="";if("undefined"!=typeof strStatsUrl){var i=strStatsUrl.indexOf(t+"=");if(-1!=i){i+=t.length+1;var n=strStatsUrl.indexOf("&",i);e=strStatsUrl.substring(i,n)}}return e}},{key:"DetectCreative",value:function(){window.langCountry&&"EN"==window.langCountry?(window.languageText="EN",window.country_version="nz"):window.langCountry&&"TW"==window.langCountry?(window.languageText="TW",window.country_version="tw"):window.langCountry&&"AUT"==window.langCountry?(window.languageText="EN",window.country_version="aut"):window.langCountry&&"HK"==window.langCountry?(window.languageText="HK",window.country_version="HK"):window.langCountry&&"KR"==window.langCountry?(window.languageText="KR",window.country_version="kr"):window.langCountry&&"JP"==window.langCountry&&(window.languageText="JP",window.country_version="jp"),window.languageIndex=this.SetLanguageIndex(window.languageText)}},{key:"GetLanguagePack",value:function(){return"4.dat"}},{key:"SetLanguageIndex",value:function(t){switch(t){case"JP":return 1;case"KR":return 2;case"HK":return 3;case"TW":return 4;default:return 0}}}]),t}();t.exports=new a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(t){function e(){n(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.fadeEffect=new PIXI.Graphics,t.debugLayer=new PIXI.Graphics,t.ticker=PIXI.ticker.shared,t.offsetX=0,t.offsetY=0,GameConfig.isUseDetectRenderer?t.renderer=PIXI.autoDetectRenderer(window.innerWidth,window.innerHeight,{transparent:GameConfig.isBackgroundTransparent}):t.renderer=PIXI.autoDetectRenderer(window.innerWidth,window.innerHeight,{transparent:GameConfig.isBackgroundTransparent},!0),DeviceInfo.DetectDevice(window.innerWidth,window.innerHeight),t.Resize(),t.interactive=!0,t.on("pointerup",t.TouchHandler),t.on("pointerdown",t.TouchHandler),t.on("pointermove",t.TouchHandler),GameConfig.isSupportKeyboard&&(window.addEventListener("keydown",t.KeyHandler,!1),window.addEventListener("keyup",t.KeyHandler,!1)),document.body.appendChild(t.renderer.view),t}return a(e,t),o(e,[{key:"Init",value:function(t){this.ticker.add(t)}},{key:"GetWidth",value:function(){return 0==this.rotation?this.renderer.width:this.renderer.height}},{key:"GetHeight",value:function(){return 0==this.rotation?this.renderer.height:this.renderer.width}},{key:"AddChild",value:function(t){this.addChild(t)}},{key:"RemoveChild",value:function(t){this.removeChild(t)}},{key:"BeginFade",value:function(){this.addChild(this.fadeEffect)}},{key:"EndFade",value:function(){this.removeChild(this.fadeEffect)}},{key:"EnableDebugLayer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.addChild(this.debugLayer),t&&this.IsRotate()&&this.Align(this.debugLayer)}},{key:"DisableDebugLayer",value:function(){this.removeChild(this.debugLayer)}},{key:"Show",value:function(){document.body.appendChild(this.renderer.view),StateManager.Resume()}},{key:"Hide",value:function(){document.body.removeChild(this.renderer.view),StateManager.Pause()}},{key:"Resize",value:function(){DeviceInfo.DetectDevice(window.innerWidth,window.innerHeight),GameConfig.isHostGamePortrait=window.innerWidth<window.innerHeight,GameConfig.isReverseScaleRatio?GameConfig.isMigGamePortrait?GameConfig.isHostGamePortrait?(this.ratio=window.innerHeight/window.innerWidth,this.renderer.resize(GameConfig.width,GameConfig.width*this.ratio),this.offsetX=0,this.offsetY=(this.renderer.height-GameConfig.height)/2):(this.ratio=window.innerWidth/window.innerHeight,this.renderer.resize(GameConfig.width*this.ratio,GameConfig.width),this.offsetX=0,this.offsetY=(this.renderer.width-GameConfig.height)/2):GameConfig.isHostGamePortrait?(this.ratio=window.innerHeight/window.innerWidth,this.renderer.resize(GameConfig.height,GameConfig.height*this.ratio),this.offsetX=(this.renderer.height-GameConfig.width)/2,this.offsetY=0):(this.ratio=window.innerWidth/window.innerHeight,this.renderer.resize(GameConfig.height*this.ratio,GameConfig.height),this.offsetX=(this.renderer.width-GameConfig.width)/2,this.offsetY=0):GameConfig.isMigGamePortrait?GameConfig.isHostGamePortrait?(this.ratio=window.innerWidth/window.innerHeight,this.renderer.resize(GameConfig.height*this.ratio,GameConfig.height),this.offsetX=(this.renderer.width-GameConfig.width)/2,this.offsetY=0):(this.ratio=window.innerHeight/window.innerWidth,this.renderer.resize(GameConfig.height,GameConfig.height*this.ratio),this.offsetX=(this.renderer.height-GameConfig.width)/2,this.offsetY=0):GameConfig.isHostGamePortrait?(this.ratio=window.innerWidth/window.innerHeight,this.renderer.resize(GameConfig.width*this.ratio,GameConfig.width),this.offsetX=0,this.offsetY=(this.renderer.width-GameConfig.height)/2):(this.ratio=window.innerHeight/window.innerWidth,this.renderer.resize(GameConfig.width,GameConfig.width*this.ratio),this.offsetX=0,this.offsetY=(this.renderer.height-GameConfig.height)/2),this.renderer.view.style.width="${window.innerWidth}px",this.renderer.view.style.width="${window.innerHeight}px",this.Rotate(this.IsRotate())}},{key:"Align",value:function(t){t.position.set(this.renderer.width/2,this.renderer.height/2),t.pivot.set(this.GetWidth()/2,this.GetHeight()/2)}},{key:"Rotate",value:function(t){t?(this.position.set(this.renderer.width/2,this.renderer.height/2),this.pivot.set(this.renderer.width/2,this.renderer.height/2),this.rotation=GameConfig.appRotateAngle||-.5*Math.PI):(this.pivot.set(0,0),this.position.set(0,0),this.rotation=0),this.fadeEffect.beginFill&&(this.fadeEffect.beginFill(),this.fadeEffect.clear(),this.fadeEffect.drawRect(0,0,this.GetWidth(),this.GetHeight()),this.fadeEffect.endFill(),this.Align(this.fadeEffect))}},{key:"IsRotate",value:function(){return GameConfig.isMigGamePortrait!=GameConfig.isHostGamePortrait}},{key:"Update",value:function(t){StateManager.Update(t)}},{key:"Render",value:function(){this.renderer.render(this)}},{key:"TouchHandler",value:function(t){gIsInterrupt||null==StateManager.stateNext&&(Input.Update(t),StateManager.TouchHandler(t),Input.Reset(t))}},{key:"KeyHandler",value:function(t){gIsInterrupt||(StateManager.KeyHandler(t),t.target===document.body&&t.preventDefault())}}]),e}(PIXI.Container);t.exports=new s},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(){n(this,t),this.touchX=-1,this.touchY=-1,this.touchDX=0,this.touchDY=0}return r(t,[{key:"Update",value:function(t){var e=t.data.global.x,i=t.data.global.y;switch(APP.IsRotate()&&(APP.rotation==-.5*Math.PI?(e=APP.GetWidth()-t.data.global.y,i=t.data.global.x):APP.rotation==.5*Math.PI&&(e=t.data.global.y,i=APP.GetHeight()-t.data.global.x)),t.type){case"pointerdown":this.touchX=e,this.touchY=i;break;case"pointermove":this.touchDX=e-this.touchX,this.touchDY=i-this.touchY}}},{key:"Reset",value:function(t){null!=t&&"pointerup"!=t.type||(this.touchX=-1,this.touchY=-1,this.touchDX=0,this.touchDY=0)}},{key:"IsTouchUp",value:function(t){return"pointerup"==t.type}},{key:"IsTouchDown",value:function(t){return"pointerdown"==t.type}},{key:"IsTouchMove",value:function(t){return!("pointermove"!=t.type||-1==this.touchX&&-1==this.touchY||0==this.touchDX&&0==this.touchDY)}},{key:"IsKeyUp",value:function(t){return"keyup"==t.type}},{key:"IsKeyDown",value:function(t){return"keydown"==t.type}}]),t}();t.exports=new a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(){n(this,t),this.stateDeep=-1,this.stateStack=[],this.stateNext=null,this.isFadeIn=!1,this.timerFade=new Timer,this.timerFade.SetDuration(.5)}return r(t,[{key:"PushState",value:function(t){t.Load(),this.stateStack[++this.stateDeep]=t}},{key:"PopState",value:function(){this.stateDeep>0&&(this.stateStack[this.stateDeep].Unload(),this.stateDeep--)}},{key:"SwitchState",value:function(t){if((!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.stateNext!=t)return this.stateNext=t,this.isFadeIn=!0,this.timerFade.Reset(),void APP.BeginFade();this.stateStack[this.stateDeep].Unload(),this.stateStack[this.stateDeep]=t,t.Load()}},{key:"Pause",value:function(){this.IsEmpty()||this.stateStack[this.stateDeep].Pause&&this.stateStack[this.stateDeep].Pause()}},{key:"Resume",value:function(){this.IsEmpty()||this.stateStack[this.stateDeep].Resume&&this.stateStack[this.stateDeep].Resume()}},{key:"Shake",value:function(){this.IsEmpty()||this.stateStack[this.stateDeep].Shake&&this.stateStack[this.stateDeep].Shake()}},{key:"Tilt",value:function(){this.IsEmpty()||this.stateStack[this.stateDeep].Tilt&&this.stateStack[this.stateDeep].Tilt()}},{key:"Resize",value:function(){if(!this.IsEmpty()){for(var t=0;t<=this.stateDeep;t++)APP.Align(this.stateStack[t]);this.stateStack[this.stateDeep].Resize&&this.stateStack[this.stateDeep].Resize()}}},{key:"Back",value:function(){this.IsEmpty()||(this.stateStack[this.stateDeep].Back?this.stateStack[this.stateDeep].Back():Utils.SendTrackingAndExit())}},{key:"TouchHandler",value:function(t){this.IsEmpty()||this.stateStack[this.stateDeep].TouchHandler&&this.stateStack[this.stateDeep].TouchHandler(t)}},{key:"KeyHandler",value:function(t){this.IsEmpty()||this.stateStack[this.stateDeep].KeyHandler&&this.stateStack[this.stateDeep].KeyHandler(t)}},{key:"IsEmpty",value:function(){return-1==this.stateDeep}},{key:"GetCurrentState",value:function(){return this.stateStack[this.stateDeep]}},{key:"Update",value:function(t){if(null!=this.stateNext){this.timerFade.Update(t);var e=this.timerFade.GetTimePercent();APP.fadeEffect.alpha=this.isFadeIn?1-e:e,this.isFadeIn?this.timerFade.IsDone()&&(this.isFadeIn=!1,this.timerFade.Reset(),this.SwitchState(this.stateNext),APP.EndFade(),APP.BeginFade()):this.timerFade.IsDone()&&(this.stateNext=null,APP.EndFade())}this.IsEmpty()||this.stateStack[this.stateDeep].Update(t)}}]),t}();t.exports=new a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(){n(this,t),this.timer=0,this.duration=0,this.overhead=0,this.isDone=!0}return r(t,[{key:"SetDuration",value:function(t){this.timer=this.duration=t,this.overhead=0,this.isDone=!1}},{key:"AddTime",value:function(t){this.timer+=t,this.overhead=0,this.isDone=!1}},{key:"GetDuration",value:function(){return this.duration}},{key:"GetTime",value:function(){return this.timer}},{key:"GetTimePercent",value:function(){return this.timer/this.duration}},{key:"Reset",value:function(){this.timer=this.duration,this.overhead=0,this.isDone=!1}},{key:"IsDone",value:function(){return 0==this.timer}},{key:"JustFinished",value:function(){return!(this.timer>0)&&(!this.isDone&&(this.isDone=!0,!0))}},{key:"GetOverhead",value:function(){return this.overhead}},{key:"Update",value:function(t){0!=this.timer&&(this.timer-=t,this.timer<0&&(this.overhead=-this.timer,this.timer=0))}}]),t}();t.exports=a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function t(){n(this,t),this.REST_API_SERVER="https://oms.gameloft.com",this.ASSET_URL="https://bob-iris.gameloft.com/ucdn/3402/{name}/url?{time}",window.override_ip_geolocation&&"WW"!=window.override_ip_geolocation&&(this.ASSET_URL="https://bob-iris.gameloft.com/ucdn/3402/{name}/url/?override_ip_geolocation="+override_ip_geolocation.toUpperCase())};t.exports=new r},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(t){function e(){n(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.background=null,t.gui=GuiManager.GetGui(4),t.description=t.gui.GetObject(2+window.languageIndex),t.btnOk=t.gui.GetObject(9+window.languageIndex),t.btnCancel=t.gui.GetObject(14+window.languageIndex),t}return a(e,t),o(e,[{key:"Load",value:function(){APP.AddChild(this),APP.Align(this),this.description.visible=!0,this.btnOk.visible=!0,this.btnCancel.visible=!0,this.btnOk.SetTouchable(!0),this.btnCancel.SetTouchable(!0),null==this.background&&(this.background=new PIXI.Graphics,this.background.beginFill(0,1),this.background.drawRect(0,0,APP.GetWidth(),APP.GetHeight()),this.background.endFill(),this.background.alpha=.8,this.addChild(this.background),this.addChild(this.gui))}},{key:"Unload",value:function(){APP.RemoveChild(this)}},{key:"Back",value:function(){StateManager.PopState(),StateIngame.Resume()}},{key:"Update",value:function(t){gIngameTimeSpent+=t}},{key:"TouchHandler",value:function(t){switch(t.target){case this.btnOk:Input.IsTouchUp(t)&&(Utils.SendTrackingAndExit(),this.btnOk.interactive=!1);break;case this.btnCancel:Input.IsTouchUp(t)&&(StateManager.PopState(),StateIngame.Resume(),this.btnCancel.interactive=!1)}}}]),e}(PIXI.Container);t.exports=new s},function(t,e,i){"use strict";"use restrict";function n(t){var e=32;return t&=-t,t&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}e.INT_BITS=32,e.INT_MAX=2147483647,e.INT_MIN=-1<<31,e.sign=function(t){return(t>0)-(t<0)},e.abs=function(t){var e=t>>31;return(t^e)-e},e.min=function(t,e){return e^(t^e)&-(t<e)},e.max=function(t,e){return t^(t^e)&-(t<e)},e.isPow2=function(t){return!(t&t-1||!t)},e.log2=function(t){var e,i;return e=(t>65535)<<4,t>>>=e,i=(t>255)<<3,t>>>=i,e|=i,i=(t>15)<<2,t>>>=i,e|=i,i=(t>3)<<1,t>>>=i,(e|=i)|t>>1},e.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},e.popCount=function(t){return t-=t>>>1&1431655765,16843009*((t=(858993459&t)+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},e.countTrailingZeros=n,e.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},e.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},e.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var r=new Array(256);!function(t){for(var e=0;e<256;++e){var i=e,n=e,r=7;for(i>>>=1;i;i>>>=1)n<<=1,n|=1&i,--r;t[e]=n<<r&255}}(r),e.reverse=function(t){return r[255&t]<<24|r[t>>>8&255]<<16|r[t>>>16&255]<<8|r[t>>>24&255]},e.interleave2=function(t,e){return t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1},e.deinterleave2=function(t,e){return t=t>>>e&1431655765,t=858993459&(t|t>>>1),t=252645135&(t|t>>>2),t=16711935&(t|t>>>4),(t=65535&(t|t>>>16))<<16>>16},e.interleave3=function(t,e,i){return t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t|=e<<1,i&=1023,i=4278190335&(i|i<<16),i=251719695&(i|i<<8),i=3272356035&(i|i<<4),i=1227133513&(i|i<<2),t|i<<2},e.deinterleave3=function(t,e){return t=t>>>e&1227133513,t=3272356035&(t|t>>>2),t=251719695&(t|t>>>4),t=4278190335&(t|t>>>8),(t=1023&(t|t>>>16))<<22>>22},e.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>n(t)+1}},function(t,e,i){"use strict";var n=i(12),r=i(55),a=i(11);t.exports=function(t){for(var e=n(this),i=a(e.length),o=arguments.length,s=r(o>1?arguments[1]:void 0,i),h=o>2?arguments[2]:void 0,u=void 0===h?i:r(h,i);u>s;)e[s++]=t;return e}},function(t,e,i){var n=i(303);t.exports=function(t,e){return new(n(t))(e)}},function(t,e,i){"use strict";var n=i(10),r=i(52);t.exports=function(t,e,i){e in t?n.f(t,e,r(0,i)):t[e]=i}},function(t,e,i){var n=i(6),r=i(2).document,a=n(r)&&n(r.createElement);t.exports=function(t){return a?r.createElement(t):{}}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,i){var n=i(8)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[n]=!1,!"/./"[t](e)}catch(t){}}return!0}},function(t,e,i){var n=i(2).document;t.exports=n&&n.documentElement},function(t,e,i){var n=i(6),r=i(123).set;t.exports=function(t,e,i){var a,o=e.constructor;return o!==i&&"function"==typeof o&&(a=o.prototype)!==i.prototype&&n(a)&&r&&r(t,a),t}},function(t,e,i){var n=i(59),r=i(8)("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||a[r]===t)}},function(t,e,i){"use strict";var n=i(49),r=i(52),a=i(60),o={};i(18)(o,i(8)("iterator"),function(){return this}),t.exports=function(t,e,i){t.prototype=n(o,{next:r(1,i)}),a(t,e+" Iterator")}},function(t,e,i){"use strict";var n=i(42),r=i(0),a=i(19),o=i(18),s=i(59),h=i(117),u=i(60),l=i(24),c=i(8)("iterator"),f=!([].keys&&"next"in[].keys()),d=function(){return this};t.exports=function(t,e,i,p,m,v,g){h(i,e,p);var y,_,T,E=function(t){if(!f&&t in I)return I[t];switch(t){case"keys":case"values":return function(){return new i(this,t)}}return function(){return new i(this,t)}},S=e+" Iterator",b="values"==m,A=!1,I=t.prototype,w=I[c]||I["@@iterator"]||m&&I[m],x=w||E(m),P=m?b?E("entries"):x:void 0,M="Array"==e?I.entries||w:w;if(M&&(T=l(M.call(new t)))!==Object.prototype&&T.next&&(u(T,S,!0),n||"function"==typeof T[c]||o(T,c,d)),b&&w&&"values"!==w.name&&(A=!0,x=function(){return w.call(this)}),n&&!g||!f&&!A&&I[c]||o(I,c,x),s[e]=x,s[S]=d,m)if(y={values:b?x:E("values"),keys:v?x:E("keys"),entries:P},g)for(_ in y)_ in I||a(I,_,y[_]);else r(r.P+r.F*(f||A),e,y);return y}},function(t,e){var i=Math.expm1;t.exports=!i||i(10)>22025.465794806718||i(10)<22025.465794806718||-2e-17!=i(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:i},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e,i){var n=i(2),r=i(129).set,a=n.MutationObserver||n.WebKitMutationObserver,o=n.process,s=n.Promise,h="process"==i(27)(o);t.exports=function(){var t,e,i,u=function(){var n,r;for(h&&(n=o.domain)&&n.exit();t;){r=t.fn,t=t.next;try{r()}catch(n){throw t?i():e=void 0,n}}e=void 0,n&&n.enter()};if(h)i=function(){o.nextTick(u)};else if(!a||n.navigator&&n.navigator.standalone)if(s&&s.resolve){var l=s.resolve(void 0);i=function(){l.then(u)}}else i=function(){r.call(n,u)};else{var c=!0,f=document.createTextNode("");new a(u).observe(f,{characterData:!0}),i=function(){f.data=c=!c}}return function(n){var r={fn:n,next:void 0};e&&(e.next=r),t||(t=r,i()),e=r}}},function(t,e,i){"use strict";function n(t){var e,i;this.promise=new t(function(t,n){if(void 0!==e||void 0!==i)throw TypeError("Bad Promise constructor");e=t,i=n}),this.resolve=r(e),this.reject=r(i)}var r=i(16);t.exports.f=function(t){return new n(t)}},function(t,e,i){var n=i(6),r=i(1),a=function(t,e){if(r(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{n=i(29)(Function.call,i(23).f(Object.prototype,"__proto__").set,2),n(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,i){return a(t,i),e?t.__proto__=i:n(t,i),t}}({},!1):void 0),check:a}},function(t,e,i){var n=i(90)("keys"),r=i(56);t.exports=function(t){return n[t]||(n[t]=r(t))}},function(t,e,i){var n=i(35),r=i(33);t.exports=function(t){return function(e,i){var a,o,s=String(r(e)),h=n(i),u=s.length;return h<0||h>=u?t?"":void 0:(a=s.charCodeAt(h),a<55296||a>56319||h+1===u||(o=s.charCodeAt(h+1))<56320||o>57343?t?s.charAt(h):a:t?s.slice(h,h+2):o-56320+(a-55296<<10)+65536)}}},function(t,e,i){var n=i(84),r=i(33);t.exports=function(t,e,i){if(n(e))throw TypeError("String#"+i+" doesn't accept regex!");return String(r(t))}},function(t,e,i){"use strict";var n=i(35),r=i(33);t.exports=function(t){var e=String(r(this)),i="",a=n(t);if(a<0||a==1/0)throw RangeError("Count can't be negative");for(;a>0;(a>>>=1)&&(e+=e))1&a&&(i+=e);return i}},function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,e,i){var n,r,a,o=i(29),s=i(175),h=i(114),u=i(111),l=i(2),c=l.process,f=l.setImmediate,d=l.clearImmediate,p=l.MessageChannel,m=l.Dispatch,v=0,g={},y=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},_=function(t){y.call(t.data)};f&&d||(f=function(t){for(var e=[],i=1;arguments.length>i;)e.push(arguments[i++]);return g[++v]=function(){s("function"==typeof t?t:Function(t),e)},n(v),v},d=function(t){delete g[t]},"process"==i(27)(c)?n=function(t){c.nextTick(o(y,t,1))}:m&&m.now?n=function(t){m.now(o(y,t,1))}:p?(r=new p,a=r.port2,r.port1.onmessage=_,n=o(a.postMessage,a,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(n=function(t){l.postMessage(t+"","*")},l.addEventListener("message",_,!1)):n="onreadystatechange"in u("script")?function(t){h.appendChild(u("script")).onreadystatechange=function(){h.removeChild(this),y.call(t)}}:function(t){setTimeout(o(y,t,1),0)}),t.exports={set:f,clear:d}},function(t,e,i){"use strict";function n(t,e,i){var n,r,a,o=new Array(i),s=8*i-e-1,h=(1<<s)-1,u=h>>1,l=23===e?F(2,-24)-F(2,-77):0,c=0,f=t<0||0===t&&1/t<0?1:0;for(t=G(t),t!=t||t===L?(r=t!=t?1:0,n=h):(n=U(B(t)/j),t*(a=F(2,-n))<1&&(n--,a*=2),t+=n+u>=1?l/a:l*F(2,1-u),t*a>=2&&(n++,a/=2),n+u>=h?(r=0,n=h):n+u>=1?(r=(t*a-1)*F(2,e),n+=u):(r=t*F(2,u-1)*F(2,e),n=0));e>=8;o[c++]=255&r,r/=256,e-=8);for(n=n<<e|r,s+=e;s>0;o[c++]=255&n,n/=256,s-=8);return o[--c]|=128*f,o}function r(t,e,i){var n,r=8*i-e-1,a=(1<<r)-1,o=a>>1,s=r-7,h=i-1,u=t[h--],l=127&u;for(u>>=7;s>0;l=256*l+t[h],h--,s-=8);for(n=l&(1<<-s)-1,l>>=-s,s+=e;s>0;n=256*n+t[h],h--,s-=8);if(0===l)l=1-o;else{if(l===a)return n?NaN:u?-L:L;n+=F(2,e),l-=o}return(u?-1:1)*n*F(2,l-e)}function a(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function o(t){return[255&t]}function s(t){return[255&t,t>>8&255]}function h(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function u(t){return n(t,52,8)}function l(t){return n(t,23,4)}function c(t,e,i){w(t[M],e,{get:function(){return this[i]}})}function f(t,e,i,n){var r=+i,a=A(r);if(a+e>t[X])throw D(O);var o=t[V]._b,s=a+t[H],h=o.slice(s,s+e);return n?h:h.reverse()}function d(t,e,i,n,r,a){var o=+i,s=A(o);if(s+e>t[X])throw D(O);for(var h=t[V]._b,u=s+t[H],l=n(+r),c=0;c<e;c++)h[u+c]=l[a?c:e-c-1]}var p=i(2),m=i(9),v=i(42),g=i(92),y=i(18),_=i(53),T=i(4),E=i(47),S=i(35),b=i(11),A=i(193),I=i(50).f,w=i(10).f,x=i(108),P=i(60),M="prototype",O="Wrong index!",C=p.ArrayBuffer,R=p.DataView,k=p.Math,D=p.RangeError,L=p.Infinity,N=C,G=k.abs,F=k.pow,U=k.floor,B=k.log,j=k.LN2,V=m?"_b":"buffer",X=m?"_l":"byteLength",H=m?"_o":"byteOffset";if(g.ABV){if(!T(function(){C(1)})||!T(function(){new C(-1)})||T(function(){return new C,new C(1.5),new C(NaN),"ArrayBuffer"!=C.name})){C=function(t){return E(this,C),new N(A(t))};for(var Y,W=C[M]=N[M],z=I(N),q=0;z.length>q;)(Y=z[q++])in C||y(C,Y,N[Y]);v||(W.constructor=C)}var K=new R(new C(2)),Z=R[M].setInt8;K.setInt8(0,2147483648),K.setInt8(1,2147483649),!K.getInt8(0)&&K.getInt8(1)||_(R[M],{setInt8:function(t,e){Z.call(this,t,e<<24>>24)},setUint8:function(t,e){Z.call(this,t,e<<24>>24)}},!0)}else C=function(t){E(this,C,"ArrayBuffer");var e=A(t);this._b=x.call(new Array(e),0),this[X]=e},R=function(t,e,i){E(this,R,"DataView"),E(t,C,"DataView");var n=t[X],r=S(e);if(r<0||r>n)throw D("Wrong offset!");if(i=void 0===i?n-r:b(i),r+i>n)throw D("Wrong length!");this[V]=t,this[H]=r,this[X]=i},m&&(c(C,"byteLength","_l"),c(R,"buffer","_b"),c(R,"byteLength","_l"),c(R,"byteOffset","_o")),_(R[M],{getInt8:function(t){return f(this,1,t)[0]<<24>>24},getUint8:function(t){return f(this,1,t)[0]},getInt16:function(t){var e=f(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=f(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return a(f(this,4,t,arguments[1]))},getUint32:function(t){return a(f(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return r(f(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return r(f(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){d(this,1,t,o,e)},setUint8:function(t,e){d(this,1,t,o,e)},setInt16:function(t,e){d(this,2,t,s,e,arguments[2])},setUint16:function(t,e){d(this,2,t,s,e,arguments[2])},setInt32:function(t,e){d(this,4,t,h,e,arguments[2])},setUint32:function(t,e){d(this,4,t,h,e,arguments[2])},setFloat32:function(t,e){d(this,4,t,l,e,arguments[2])},setFloat64:function(t,e){d(this,8,t,u,e,arguments[2])}});P(C,"ArrayBuffer"),P(R,"DataView"),y(R[M],g.VIEW,!0),e.ArrayBuffer=C,e.DataView=R},function(t,e,i){var n=i(2),r=i(28),a=i(42),o=i(194),s=i(10).f;t.exports=function(t){var e=r.Symbol||(r.Symbol=a?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:o.f(t)})}},function(t,e,i){var n=i(66),r=i(8)("iterator"),a=i(59);t.exports=i(28).getIteratorMethod=function(t){if(void 0!=t)return t[r]||t["@@iterator"]||a[n(t)]}},function(t,e,i){"use strict";var n=i(41),r=i(178),a=i(59),o=i(25);t.exports=i(118)(Array,"Array",function(t,e){this._t=o(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,r(1)):"keys"==e?r(0,i):"values"==e?r(0,t[i]):r(0,[i,t[i]])},"values"),a.Arguments=a.Array,n("keys"),n("values"),n("entries")},function(t,e,i){"use strict";function n(t,e,i){i=i||2;var n=e&&e.length,a=n?e[0]*i:t.length,s=r(t,0,a,i,!0),h=[];if(!s)return h;var u,l,f,d,p,m,v;if(n&&(s=c(t,e,s,i)),t.length>80*i){u=f=t[0],l=d=t[1];for(var g=i;g<a;g+=i)p=t[g],m=t[g+1],p<u&&(u=p),m<l&&(l=m),p>f&&(f=p),m>d&&(d=m);v=Math.max(f-u,d-l),v=0!==v?1/v:0}return o(s,h,i,u,l,v),h}function r(t,e,i,n,r){var a,o;if(r===C(t,e,i,n)>0)for(a=e;a<i;a+=n)o=P(a,t[a],t[a+1],o);else for(a=i-n;a>=e;a-=n)o=P(a,t[a],t[a+1],o);return o&&S(o,o.next)&&(M(o),o=o.next),o}function a(t,e){if(!t)return t;e||(e=t);var i,n=t;do{if(i=!1,n.steiner||!S(n,n.next)&&0!==E(n.prev,n,n.next))n=n.next;else{if(M(n),(n=e=n.prev)===n.next)break;i=!0}}while(i||n!==e);return e}function o(t,e,i,n,r,c,f){if(t){!f&&c&&m(t,n,r,c);for(var d,p,v=t;t.prev!==t.next;)if(d=t.prev,p=t.next,c?h(t,n,r,c):s(t))e.push(d.i/i),e.push(t.i/i),e.push(p.i/i),M(t),t=p.next,v=p.next;else if((t=p)===v){f?1===f?(t=u(t,e,i),o(t,e,i,n,r,c,2)):2===f&&l(t,e,i,n,r,c):o(a(t),e,i,n,r,c,1);break}}}function s(t){var e=t.prev,i=t,n=t.next;if(E(e,i,n)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(_(e.x,e.y,i.x,i.y,n.x,n.y,r.x,r.y)&&E(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function h(t,e,i,n){var r=t.prev,a=t,o=t.next;if(E(r,a,o)>=0)return!1;for(var s=r.x<a.x?r.x<o.x?r.x:o.x:a.x<o.x?a.x:o.x,h=r.y<a.y?r.y<o.y?r.y:o.y:a.y<o.y?a.y:o.y,u=r.x>a.x?r.x>o.x?r.x:o.x:a.x>o.x?a.x:o.x,l=r.y>a.y?r.y>o.y?r.y:o.y:a.y>o.y?a.y:o.y,c=g(s,h,e,i,n),f=g(u,l,e,i,n),d=t.prevZ,p=t.nextZ;d&&d.z>=c&&p&&p.z<=f;){if(d!==t.prev&&d!==t.next&&_(r.x,r.y,a.x,a.y,o.x,o.y,d.x,d.y)&&E(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,p!==t.prev&&p!==t.next&&_(r.x,r.y,a.x,a.y,o.x,o.y,p.x,p.y)&&E(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;d&&d.z>=c;){if(d!==t.prev&&d!==t.next&&_(r.x,r.y,a.x,a.y,o.x,o.y,d.x,d.y)&&E(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=f;){if(p!==t.prev&&p!==t.next&&_(r.x,r.y,a.x,a.y,o.x,o.y,p.x,p.y)&&E(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function u(t,e,i){var n=t;do{var r=n.prev,a=n.next.next;!S(r,a)&&b(r,n,n.next,a)&&I(r,a)&&I(a,r)&&(e.push(r.i/i),e.push(n.i/i),e.push(a.i/i),M(n),M(n.next),n=t=a),n=n.next}while(n!==t);return n}function l(t,e,i,n,r,s){var h=t;do{for(var u=h.next.next;u!==h.prev;){if(h.i!==u.i&&T(h,u)){var l=x(h,u);return h=a(h,h.next),l=a(l,l.next),o(h,e,i,n,r,s),void o(l,e,i,n,r,s)}u=u.next}h=h.next}while(h!==t)}function c(t,e,i,n){var o,s,h,u,l,c=[];for(o=0,s=e.length;o<s;o++)h=e[o]*n,u=o<s-1?e[o+1]*n:t.length,l=r(t,h,u,n,!1),l===l.next&&(l.steiner=!0),c.push(y(l));for(c.sort(f),o=0;o<c.length;o++)d(c[o],i),i=a(i,i.next);return i}function f(t,e){return t.x-e.x}function d(t,e){if(e=p(t,e)){var i=x(e,t);a(i,i.next)}}function p(t,e){var i,n=e,r=t.x,a=t.y,o=-1/0;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){var s=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=r&&s>o){if(o=s,s===r){if(a===n.y)return n;if(a===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!i)return null;if(r===o)return i.prev;var h,u=i,l=i.x,c=i.y,f=1/0;for(n=i.next;n!==u;)r>=n.x&&n.x>=l&&r!==n.x&&_(a<c?r:o,a,l,c,a<c?o:r,a,n.x,n.y)&&((h=Math.abs(a-n.y)/(r-n.x))<f||h===f&&n.x>i.x)&&I(n,t)&&(i=n,f=h),n=n.next;return i}function m(t,e,i,n){var r=t;do{null===r.z&&(r.z=g(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,v(r)}function v(t){var e,i,n,r,a,o,s,h,u=1;do{for(i=t,t=null,a=null,o=0;i;){for(o++,n=i,s=0,e=0;e<u&&(s++,n=n.nextZ);e++);for(h=u;s>0||h>0&&n;)0!==s&&(0===h||!n||i.z<=n.z)?(r=i,i=i.nextZ,s--):(r=n,n=n.nextZ,h--),a?a.nextZ=r:t=r,r.prevZ=a,a=r;i=n}a.nextZ=null,u*=2}while(o>1);return t}function g(t,e,i,n,r){return t=32767*(t-i)*r,e=32767*(e-n)*r,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function y(t){var e=t,i=t;do{e.x<i.x&&(i=e),e=e.next}while(e!==t);return i}function _(t,e,i,n,r,a,o,s){return(r-o)*(e-s)-(t-o)*(a-s)>=0&&(t-o)*(n-s)-(i-o)*(e-s)>=0&&(i-o)*(a-s)-(r-o)*(n-s)>=0}function T(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!A(t,e)&&I(t,e)&&I(e,t)&&w(t,e)}function E(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function S(t,e){return t.x===e.x&&t.y===e.y}function b(t,e,i,n){return!!(S(t,e)&&S(i,n)||S(t,n)&&S(i,e))||E(t,e,i)>0!=E(t,e,n)>0&&E(i,n,t)>0!=E(i,n,e)>0}function A(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&b(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}function I(t,e){return E(t.prev,t,t.next)<0?E(t,e,t.next)>=0&&E(t,t.prev,e)>=0:E(t,e,t.prev)<0||E(t,t.next,e)<0}function w(t,e){var i=t,n=!1,r=(t.x+e.x)/2,a=(t.y+e.y)/2;do{i.y>a!=i.next.y>a&&i.next.y!==i.y&&r<(i.next.x-i.x)*(a-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}function x(t,e){var i=new O(t.i,t.x,t.y),n=new O(e.i,e.x,e.y),r=t.next,a=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,a.next=n,n.prev=a,n}function P(t,e,i,n){var r=new O(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function M(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function O(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function C(t,e,i,n){for(var r=0,a=e,o=i-n;a<i;a+=n)r+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return r}t.exports=n,t.exports.default=n,n.deviation=function(t,e,i,n){var r=e&&e.length,a=r?e[0]*i:t.length,o=Math.abs(C(t,0,a,i));if(r)for(var s=0,h=e.length;s<h;s++){var u=e[s]*i,l=s<h-1?e[s+1]*i:t.length;o-=Math.abs(C(t,u,l,i))}var c=0;for(s=0;s<n.length;s+=3){var f=n[s]*i,d=n[s+1]*i,p=n[s+2]*i;c+=Math.abs((t[f]-t[p])*(t[d+1]-t[f+1])-(t[f]-t[d])*(t[p+1]-t[f+1]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},n.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},n=0,r=0;r<t.length;r++){for(var a=0;a<t[r].length;a++)for(var o=0;o<e;o++)i.vertices.push(t[r][a][o]);r>0&&(n+=t[r-1].length,i.holes.push(n))}return i}},function(t,e,i){var n,r,a;/**
 * isMobile.js v0.4.1
 *
 * A simple library to detect Apple phones and tablets,
 * Android phones and tablets, other mobile devices (like blackberry, mini-opera and windows phone),
 * and any kind of seven inch device, via user agent sniffing.
 *
 * @author: Kai Mallea (kmallea@gmail.com)
 *
 * @license: http://creativecommons.org/publicdomain/zero/1.0/
 */
!function(i){var o=/iPhone/i,s=/iPod/i,h=/iPad/i,u=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,l=/Android/i,c=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,f=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,d=/Windows Phone/i,p=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,m=/BlackBerry/i,v=/BB10/i,g=/Opera Mini/i,y=/(CriOS|Chrome)(?=.*\bMobile\b)/i,_=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,T=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),E=function(t,e){return t.test(e)},S=function(t){var e=t||navigator.userAgent,i=e.split("[FBAN");if(void 0!==i[1]&&(e=i[0]),i=e.split("Twitter"),void 0!==i[1]&&(e=i[0]),this.apple={phone:E(o,e),ipod:E(s,e),tablet:!E(o,e)&&E(h,e),device:E(o,e)||E(s,e)||E(h,e)},this.amazon={phone:E(c,e),tablet:!E(c,e)&&E(f,e),device:E(c,e)||E(f,e)},this.android={phone:E(c,e)||E(u,e),tablet:!E(c,e)&&!E(u,e)&&(E(f,e)||E(l,e)),device:E(c,e)||E(f,e)||E(u,e)||E(l,e)},this.windows={phone:E(d,e),tablet:E(p,e),device:E(d,e)||E(p,e)},this.other={blackberry:E(m,e),blackberry10:E(v,e),opera:E(g,e),firefox:E(_,e),chrome:E(y,e),device:E(m,e)||E(v,e)||E(g,e)||E(_,e)||E(y,e)},this.seven_inch=E(T,e),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},b=function(){var t=new S;return t.Class=S,t};void 0!==t&&t.exports&&"undefined"==typeof window?t.exports=S:void 0!==t&&t.exports&&"undefined"!=typeof window?t.exports=b():(r=[],n=i.isMobile=b(),void 0!==(a="function"==typeof n?n.apply(e,r):n)&&(t.exports=a))}(this)},function(t,e){var i=function(t,e){if(!n){var i=Object.keys(r);n={};for(var a=0;a<i.length;++a){var o=i[a];n[t[o]]=r[o]}}return n[e]},n=null,r={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};t.exports=i},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(15),a=function(){function t(){n(this,t),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?r.Rectangle.EMPTY:(t=t||new r.Rectangle(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addQuad=function(t){var e=this.minX,i=this.minY,n=this.maxX,r=this.maxY,a=t[0],o=t[1];e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,r=o>r?o:r,a=t[2],o=t[3],e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,r=o>r?o:r,a=t[4],o=t[5],e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,r=o>r?o:r,a=t[6],o=t[7],e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,r=o>r?o:r,this.minX=e,this.minY=i,this.maxX=n,this.maxY=r},t.prototype.addFrame=function(t,e,i,n,r){var a=t.worldTransform,o=a.a,s=a.b,h=a.c,u=a.d,l=a.tx,c=a.ty,f=this.minX,d=this.minY,p=this.maxX,m=this.maxY,v=o*e+h*i+l,g=s*e+u*i+c;f=v<f?v:f,d=g<d?g:d,p=v>p?v:p,m=g>m?g:m,v=o*n+h*i+l,g=s*n+u*i+c,f=v<f?v:f,d=g<d?g:d,p=v>p?v:p,m=g>m?g:m,v=o*e+h*r+l,g=s*e+u*r+c,f=v<f?v:f,d=g<d?g:d,p=v>p?v:p,m=g>m?g:m,v=o*n+h*r+l,g=s*n+u*r+c,f=v<f?v:f,d=g<d?g:d,p=v>p?v:p,m=g>m?g:m,this.minX=f,this.minY=d,this.maxX=p,this.maxY=m},t.prototype.addVertices=function(t,e,i,n){for(var r=t.worldTransform,a=r.a,o=r.b,s=r.c,h=r.d,u=r.tx,l=r.ty,c=this.minX,f=this.minY,d=this.maxX,p=this.maxY,m=i;m<n;m+=2){var v=e[m],g=e[m+1],y=a*v+s*g+u,_=h*g+o*v+l;c=y<c?y:c,f=_<f?_:f,d=y>d?y:d,p=_>p?_:p}this.minX=c,this.minY=f,this.maxX=d,this.maxY=p},t.prototype.addBounds=function(t){var e=this.minX,i=this.minY,n=this.maxX,r=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>r?t.maxY:r},t.prototype.addBoundsMask=function(t,e){var i=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,r=t.maxX<e.maxX?t.maxX:e.maxX,a=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=r&&n<=a){var o=this.minX,s=this.minY,h=this.maxX,u=this.maxY;this.minX=i<o?i:o,this.minY=n<s?n:s,this.maxX=r>h?r:h,this.maxY=a>u?a:u}},t.prototype.addBoundsArea=function(t,e){var i=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,r=t.maxX<e.x+e.width?t.maxX:e.x+e.width,a=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=r&&n<=a){var o=this.minX,s=this.minY,h=this.maxX,u=this.maxY;this.minX=i<o?i:o,this.minY=n<s?n:s,this.maxX=r>h?r:h,this.maxY=a>u?a:u}},t}();e.default=a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(15),a=function(){function t(){n(this,t),this.worldTransform=new r.Matrix,this.localTransform=new r.Matrix,this._worldID=0,this._parentID=0}return t.prototype.updateLocalTransform=function(){},t.prototype.updateTransform=function(t){var e=t.worldTransform,i=this.worldTransform,n=this.localTransform;i.a=n.a*e.a+n.b*e.c,i.b=n.a*e.b+n.b*e.d,i.c=n.c*e.a+n.d*e.c,i.d=n.c*e.b+n.d*e.d,i.tx=n.tx*e.a+n.ty*e.c+e.tx,i.ty=n.tx*e.b+n.ty*e.d+e.ty,this._worldID++},t}();e.default=a,a.prototype.updateWorldTransform=a.prototype.updateTransform,a.IDENTITY=new a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(140),o=function(t){return t&&t.__esModule?t:{default:t}}(a),s=i(3),h=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;n(this,t),this.a=e,this.b=i,this.c=r,this.d=a,this.tx=o,this.ty=s,this.array=null}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,i,n,r,a){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=r,this.ty=a,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},t.prototype.apply=function(t,e){e=e||new o.default;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new o.default;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,r=t.y;return e.x=this.d*i*n+-this.c*i*r+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*r+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,r=this.c,a=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=r*e-this.d*i,this.d=r*i+this.d*e,this.tx=a*e-this.ty*i,this.ty=a*i+this.ty*e,this},t.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,r=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*r,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*r,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*r+this.ty,this},t.prototype.setTransform=function(t,e,i,n,r,a,o,s,h){return this.a=Math.cos(o+h)*r,this.b=Math.sin(o+h)*r,this.c=-Math.sin(o-s)*a,this.d=Math.cos(o-s)*a,this.tx=t-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,i=this.b,n=this.c,r=this.d,a=-Math.atan2(-n,r),o=Math.atan2(i,e),h=Math.abs(a+o);return h<1e-5||Math.abs(s.PI_2-h)<1e-5?(t.rotation=o,e<0&&r>=0&&(t.rotation+=t.rotation<=0?Math.PI:-Math.PI),t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=o),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+r*r),t.position.x=this.tx,t.position.y=this.ty,t},t.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,r=this.tx,a=t*n-e*i;return this.a=n/a,this.b=-e/a,this.c=-i/a,this.d=t/a,this.tx=(i*this.ty-n*r)/a,this.ty=-(t*this.ty-e*r)/a,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r(t,null,[{key:"IDENTITY",get:function(){return new t}},{key:"TEMP_MATRIX",get:function(){return new t}}]),t}();e.default=h},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n(this,t),this.x=e,this.y=i}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copy=function(t){this.set(t.x,t.y)},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)},t}();e.default=r},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(3),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n(this,t),this.x=Number(e),this.y=Number(i),this.width=Number(r),this.height=Number(o),this.type=a.SHAPES.RECT}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},t.prototype.pad=function(t,e){t=t||0,e=e||(0!==e?t:0),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e},t.prototype.fit=function(t){this.x<t.x&&(this.width+=this.x,this.width<0&&(this.width=0),this.x=t.x),this.y<t.y&&(this.height+=this.y,this.height<0&&(this.height=0),this.y=t.y),this.x+this.width>t.x+t.width&&(this.width=t.width-this.x,this.width<0&&(this.width=0)),this.y+this.height>t.y+t.height&&(this.height=t.height-this.y,this.height<0&&(this.height=0))},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),r=Math.max(this.y+this.height,t.y+t.height);this.x=e,this.width=i-e,this.y=n,this.height=r-n},r(t,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new t(0,0,0,0)}}]),t}();e.default=o},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(15),u=i(7),l=i(3),c=i(44),f=n(c),d=i(70),p=n(d),m=new h.Point,v=function(t){function e(i){r(this,e);var n=a(this,t.call(this));return n._anchor=new h.ObservablePoint(n._onAnchorUpdate,n,i?i.defaultAnchor.x:0,i?i.defaultAnchor.y:0),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=l.BLEND_MODES.NORMAL,n.shader=null,n.cachedTint=16777215,n.texture=i||f.default.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.pluginName="sprite",n}return o(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this.cachedTint=16777215,this._width&&(this.scale.x=(0,u.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,u.sign)(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var t=this._texture,e=this.transform.worldTransform,i=e.a,n=e.b,r=e.c,a=e.d,o=e.tx,s=e.ty,h=this.vertexData,u=t.trim,l=t.orig,c=this._anchor,f=0,d=0,p=0,m=0;u?(d=u.x-c._x*l.width,f=d+u.width,m=u.y-c._y*l.height,p=m+u.height):(d=-c._x*l.width,f=d+l.width,m=-c._y*l.height,p=m+l.height),h[0]=i*d+r*m+o,h[1]=a*m+n*d+s,h[2]=i*f+r*m+o,h[3]=a*m+n*f+s,h[4]=i*f+r*p+o,h[5]=a*p+n*f+s,h[6]=i*d+r*p+o,h[7]=a*p+n*d+s}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,i=t.orig,n=this._anchor,r=this.transform.worldTransform,a=r.a,o=r.b,s=r.c,h=r.d,u=r.tx,l=r.ty,c=-n._x*i.width,f=c+i.width,d=-n._y*i.height,p=d+i.height;e[0]=a*c+s*d+u,e[1]=h*d+o*c+l,e[2]=a*f+s*d+u,e[3]=h*d+o*f+l,e[4]=a*f+s*p+u,e[5]=h*p+o*f+l,e[6]=a*c+s*p+u,e[7]=h*p+o*c+l},e.prototype._renderWebGL=function(t){this.calculateVertices(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new h.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,m);var e=this._texture.orig.width,i=this._texture.orig.height,n=-e*this.anchor.x,r=0;return m.x>=n&&m.x<n+e&&(r=-i*this.anchor.y,m.y>=r&&m.y<r+i)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var i="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!i)}this._texture=null,this.shader=null},e.from=function(t){return new e(f.default.from(t))},e.fromFrame=function(t){var i=u.TextureCache[t];if(!i)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return new e(i)},e.fromImage=function(t,i,n){return new e(f.default.fromImage(t,i,n))},s(e,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=(0,u.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=(0,u.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"anchor",get:function(){return this._anchor},set:function(t){this._anchor.copy(t)}},{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)}},{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t||f.default.EMPTY,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}]),e}(p.default);e.default=v},function(t,e,i){"use strict";e.__esModule=!0;var n=i(7),r=i(221),a=function(t){return t&&t.__esModule?t:{default:t}}(r),o={getTintedTexture:function(t,e){var i=t._texture;e=o.roundColor(e);var n="#"+("00000"+(0|e).toString(16)).substr(-6);i.tintCache=i.tintCache||{};var r=i.tintCache[n],a=void 0;if(r){if(r.tintId===i._updateID)return i.tintCache[n];a=i.tintCache[n]}else a=o.canvas||document.createElement("canvas");if(o.tintMethod(i,e,a),a.tintId=i._updateID,o.convertTintToImage){var s=new Image;s.src=a.toDataURL(),i.tintCache[n]=s}else i.tintCache[n]=a,o.canvas=null;return a},tintWithMultiply:function(t,e,i){var n=i.getContext("2d"),r=t._frame.clone(),a=t.baseTexture.resolution;r.x*=a,r.y*=a,r.width*=a,r.height*=a,i.width=Math.ceil(r.width),i.height=Math.ceil(r.height),n.save(),n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,r.width,r.height),n.globalCompositeOperation="multiply",n.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height),n.restore()},tintWithOverlay:function(t,e,i){var n=i.getContext("2d"),r=t._frame.clone(),a=t.baseTexture.resolution;r.x*=a,r.y*=a,r.width*=a,r.height*=a,i.width=Math.ceil(r.width),i.height=Math.ceil(r.height),n.save(),n.globalCompositeOperation="copy",n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,r.width,r.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height),n.restore()},tintWithPerPixel:function(t,e,i){var r=i.getContext("2d"),a=t._frame.clone(),o=t.baseTexture.resolution;a.x*=o,a.y*=o,a.width*=o,a.height*=o,i.width=Math.ceil(a.width),i.height=Math.ceil(a.height),r.save(),r.globalCompositeOperation="copy",r.drawImage(t.baseTexture.source,a.x,a.y,a.width,a.height,0,0,a.width,a.height),r.restore();for(var s=(0,n.hex2rgb)(e),h=s[0],u=s[1],l=s[2],c=r.getImageData(0,0,a.width,a.height),f=c.data,d=0;d<f.length;d+=4)f[d+0]*=h,f[d+1]*=u,f[d+2]*=l;r.putImageData(c,0,0)},roundColor:function(t){var e=o.cacheStepsPerColorChannel,i=(0,n.hex2rgb)(t);return i[0]=Math.min(255,i[0]/e*e),i[1]=Math.min(255,i[1]/e*e),i[2]=Math.min(255,i[2]/e*e),(0,n.rgb2hex)(i)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,a.default)(),tintMethod:0};o.tintMethod=o.canUseMultiply?o.tintWithMultiply:o.tintWithPerPixel,e.default=o},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(227),h=n(s),u=i(44),l=n(u),c=function(t){function e(i,n){r(this,e);var o=null;if(!(i instanceof h.default)){var s=arguments[1],u=arguments[2],l=arguments[3],c=arguments[4];console.warn("Please use RenderTexture.create("+s+", "+u+") instead of the ctor directly."),o=arguments[0],n=null,i=new h.default(s,u,l,c)}var f=a(this,t.call(this,i,n));return f.legacyRenderer=o,f.valid=!0,f._updateUvs(),f}return o(e,t),e.prototype.resize=function(t,e,i){t=Math.ceil(t),e=Math.ceil(e),this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,i||this.baseTexture.resize(t,e),this._updateUvs()},e.create=function(t,i,n,r){return new e(new h.default(t,i,n,r))},e}(l.default);e.default=c},function(t,e,i){"use strict";e.__esModule=!0,e.Ticker=e.shared=void 0;var n=i(547),r=function(t){return t&&t.__esModule?t:{default:t}}(n),a=new r.default;a.autoStart=!0,a.destroy=function(){},e.shared=a,e.Ticker=r.default},function(t,e,i){"use strict";function n(t){for(var e=6*t,i=new Uint16Array(e),n=0,r=0;n<e;n+=6,r+=4)i[n+0]=r+0,i[n+1]=r+1,i[n+2]=r+2,i[n+3]=r+0,i[n+4]=r+2,i[n+5]=r+3;return i}e.__esModule=!0,e.default=n},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){var i=!1;if(t&&t._textures&&t._textures.length)for(var n=0;n<t._textures.length;n++)if(t._textures[n]instanceof f.Texture){var r=t._textures[n].baseTexture;-1===e.indexOf(r)&&(e.push(r),i=!0)}return i}function a(t,e){return t instanceof f.BaseTexture&&(-1===e.indexOf(t)&&e.push(t),!0)}function o(t,e){if(t._texture&&t._texture instanceof f.Texture){var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function s(t,e){return e instanceof f.Text&&(e.updateText(!0),!0)}function h(t,e){if(e instanceof f.TextStyle){var i=e.toFontString();return f.TextMetrics.measureFont(i),!0}return!1}function u(t,e){if(t instanceof f.Text){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function l(t,e){return t instanceof f.TextStyle&&(-1===e.indexOf(t)&&e.push(t),!0)}e.__esModule=!0;var c=i(5),f=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(c),d=i(246),p=function(t){return t&&t.__esModule?t:{default:t}}(d),m=f.ticker.shared;f.settings.UPLOADS_PER_FRAME=4;var v=function(){function t(e){var i=this;n(this,t),this.limiter=new p.default(f.settings.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){i.queue&&i.prepareItems()},this.registerFindHook(u),this.registerFindHook(l),this.registerFindHook(r),this.registerFindHook(a),this.registerFindHook(o),this.registerUploadHook(s),this.registerUploadHook(h)}return t.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,m.addOnce(this.tick,this,f.UPDATE_PRIORITY.UTILITY))):e&&e()},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var i=0,n=this.uploadHooks.length;i<n;i++)if(this.uploadHooks[i](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)m.addOnce(this.tick,this,f.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var r=this.completes.slice(0);this.completes.length=0;for(var a=0,o=r.length;a<o;a++)r[a]()}},t.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},t.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},t.prototype.add=function(t){for(var e=0,i=this.addHooks.length;e<i&&!this.addHooks[e](t,this.queue);e++);if(t instanceof f.Container)for(var n=t.children.length-1;n>=0;n--)this.add(t.children[n]);return this},t.prototype.destroy=function(){this.ticking&&m.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}();e.default=v},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(){}function o(t,e,i){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=i)}function s(t){return t.toString().replace("object ","")}e.__esModule=!0;var h=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i(200),l=n(u),c=i(199),f=n(c),d=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),p=null,m=function(){function t(e,i,n){if(r(this,t),"string"!=typeof e||"string"!=typeof i)throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===i.indexOf("data:")),this.name=e,this.url=i,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===n.crossOrigin?"anonymous":n.crossOrigin,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=a,this._onLoadBinding=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this),this.onStart=new f.default,this.onProgress=new f.default,this.onComplete=new f.default,this.onAfterMiddleware=new f.default}return t.setExtensionLoadType=function(e,i){o(t._loadTypeMap,e,i)},t.setExtensionXhrType=function(e,i){o(t._xhrTypeMap,e,i)},t.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},t.prototype.load=function(e){var i=this;if(!this.isLoading){if(this.isComplete)return void(e&&setTimeout(function(){return e(i)},1));switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:d&&this.crossOrigin?this._loadXdr():this._loadXhr()}}},t.prototype._hasFlag=function(t){return!!(this._flags&t)},t.prototype._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},t.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null===this.data)return void this.abort("Unsupported element: "+t);if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(t,this.url[i],Array.isArray(e)?e[i]:e));else{var n=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(n)?n[0]:n))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()},t.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},t.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXdrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},t.prototype._createSource=function(t,e,i){i||(i=t+"/"+this._getExtension(e));var n=document.createElement("source");return n.src=e,n.type=i,n},t.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},t.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},t.prototype._xhrOnError=function(){var t=this.xhr;this.abort(s(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},t.prototype._xhrOnAbort=function(){this.abort(s(this.xhr)+" Request was aborted by the user.")},t.prototype._xdrOnTimeout=function(){this.abort(s(this.xhr)+" Request timed out.")},t.prototype._xhrOnLoad=function(){var e=this.xhr,i="",n=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(i=e.responseText),0===n&&(i.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?n=200:1223===n&&(n=204),2!=(n/100|0))return void this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL);if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=i,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(i),this.type=t.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var r=new DOMParser;this.data=r.parseFromString(i,"text/xml")}else{var a=document.createElement("div");a.innerHTML=i,this.data=a}this.type=t.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||i;this.complete()},t.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";e=e||window.location,p||(p=document.createElement("a")),p.href=t,t=(0,l.default)(p.href,{strictMode:!0});var i=!t.port&&""===e.port||t.port===e.port,n=t.protocol?t.protocol+":":"";return t.host===e.hostname&&i&&n===e.protocol?"":"anonymous"},t.prototype._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},t.prototype._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},t.prototype._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var i=t.indexOf("/");e=t.substring(i+1,t.indexOf(";",i))}else{var n=t.indexOf("?"),r=t.indexOf("#"),a=Math.min(n>-1?n:t.length,r>-1?r:t.length);t=t.substring(0,a),e=t.substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},t.prototype._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},h(t,[{key:"isDataUrl",get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)}}]),t}();e.default=m,m.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},m.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},m.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},m.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},m._loadTypeMap={gif:m.LOAD_TYPE.IMAGE,png:m.LOAD_TYPE.IMAGE,bmp:m.LOAD_TYPE.IMAGE,jpg:m.LOAD_TYPE.IMAGE,jpeg:m.LOAD_TYPE.IMAGE,tif:m.LOAD_TYPE.IMAGE,tiff:m.LOAD_TYPE.IMAGE,webp:m.LOAD_TYPE.IMAGE,tga:m.LOAD_TYPE.IMAGE,svg:m.LOAD_TYPE.IMAGE,"svg+xml":m.LOAD_TYPE.IMAGE,mp3:m.LOAD_TYPE.AUDIO,ogg:m.LOAD_TYPE.AUDIO,wav:m.LOAD_TYPE.AUDIO,mp4:m.LOAD_TYPE.VIDEO,webm:m.LOAD_TYPE.VIDEO},m._xhrTypeMap={xhtml:m.XHR_RESPONSE_TYPE.DOCUMENT,html:m.XHR_RESPONSE_TYPE.DOCUMENT,htm:m.XHR_RESPONSE_TYPE.DOCUMENT,xml:m.XHR_RESPONSE_TYPE.DOCUMENT,tmx:m.XHR_RESPONSE_TYPE.DOCUMENT,svg:m.XHR_RESPONSE_TYPE.DOCUMENT,tsx:m.XHR_RESPONSE_TYPE.DOCUMENT,gif:m.XHR_RESPONSE_TYPE.BLOB,png:m.XHR_RESPONSE_TYPE.BLOB,bmp:m.XHR_RESPONSE_TYPE.BLOB,jpg:m.XHR_RESPONSE_TYPE.BLOB,jpeg:m.XHR_RESPONSE_TYPE.BLOB,tif:m.XHR_RESPONSE_TYPE.BLOB,tiff:m.XHR_RESPONSE_TYPE.BLOB,webp:m.XHR_RESPONSE_TYPE.BLOB,tga:m.XHR_RESPONSE_TYPE.BLOB,json:m.XHR_RESPONSE_TYPE.JSON,text:m.XHR_RESPONSE_TYPE.TEXT,txt:m.XHR_RESPONSE_TYPE.TEXT,ttf:m.XHR_RESPONSE_TYPE.BUFFER,otf:m.XHR_RESPONSE_TYPE.BUFFER},m.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(64),s=i(76),h=i(77),u=i(45),l=function(){function t(){n(this,t),this.Collision2Rect=function(t,e){return!(Math.max(t.x,t.x+t.width)<Math.min(e.x,e.x+e.width)||Math.min(t.x,t.x+t.width)>Math.max(e.x,e.x+e.width)||Math.max(t.y,t.y+t.height)<Math.min(e.y,e.y+e.height)||Math.min(t.y,t.y+t.height)>Math.max(e.y,e.y+e.height))},this.token=new PIXI.Container,this.advertisement=new PIXI.Text,this.tokenIcon=null,this.infoBtn=PIXI.Sprite.fromImage("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RDgxMTExNzk0RUQ4MTFFOTk5NjNGMEZGMzQyOTNCMzIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RDgxMTExN0E0RUQ4MTFFOTk5NjNGMEZGMzQyOTNCMzIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpEODExMTE3NzRFRDgxMUU5OTk2M0YwRkYzNDI5M0IzMiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpEODExMTE3ODRFRDgxMUU5OTk2M0YwRkYzNDI5M0IzMiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ph3W7VMAAASJSURBVHjazFhNTGNVFH5taQsdeZgBbUKD0loEaWAjWELLnwJONJOwHBJcmXFMAHXPFtiRGAsb2Yn8RFYs0FHA8NOO1KYbQMTBgTKkICPOxCLlp4V6PnOfefPCDO92iniTrzn3tfd8X+/fO+doEomEwNmshLcJbsJrhJcJIvsuQtgg/EzwEr4lrHN5hyAV0BJuEOYIpwn17ZSNucF8nMulUTFDbxE+IxSjc3h4GJ+bm3swOzu76/f7IysrK9GdnZ0YvjObzfqioiKT0+kUq6urc6qqql5MT09PY36WCR8Rpp5G9jRB6YRPCbfQ2dra2u/r67vX29sbjkQiJ2pmXxRFXVtbm6W1tdWem5trYo8/J3yM/8YjKJvwDaE8FoudeDyeux0dHes0O6dCEo1mSdvV1WVtb29/Va/X6+hRgPAu4Xc1gl4gzBKKtre395ubm4MzMzMRIQWtpqZGHBoaKmOz9QuhSilKKQg//J7gXF1d/bOxsfHHUCh0JKSw5efnGycmJt6w2+1Z1PUT3iREnyQI63sT+6WiosK3ubl5LFxAy8vLM8zPz7topq5Qt5/wgfSdVnGabh4fH59gmS5KDBp8gwNc4GTcjwnC0fTAoFN0l4606j1jtVqNw8PDDgC22nHgABfrepiGf5fsPcIXWCqbzTZ9dHSk+vpeWFioLCkpuQp7cXHxYWlp6R21Y41Go2Ztba2ObXJo+FKaoVtsdu7xiEErLCzMktnP84wFF3H+yrofSkuGd1PlwcFBnC6+MO9+GB0d3ZDZId7x4AQ3NEBLGntRarxe747aG1jeWlpalknIb/F4PDE+Pv6Idzw4wd3Q0GCh7jUte2sL09PTfyR7arAPdTqdJtnxMm43BDlgBQKBpG7jgYGB4rGxsUoAdjI+gsGgxF2MUwZ1Vy0Wy3d0yrjvHtqY7xgMhn8OB90rp3Ryvub1QafMEA6HG8l8BEeZeLi7uxtL5t9JYpQ2T5NxP6cV/mcNgvZg5OTk6C9LhIz7Lwi6D8vhcJguS5CMewOCfoJVVlYmXpYgGfeylmUHQl1dXfZlCZJxe7UsVUm43W4zYuD/Wgw4wQ0NhNtaljf9kJGRkUbBuCWZW/pZGjjBTSaihHXp2PfigzKEVxAS8DhcWlp6KNkIP3jGgguc0ntWHqB9hWwTIWVnZ6eNx2lTU1NwZGQkNDg4uA6bZ2x3d7eNhbErTMNjMXU9YQJhZX19vY+SwchF7h1KIsXJyUkX3e7Ytw2ESWVMjQf9+AH949cRiF+UGPgGBxPTL4lRCkL7BKkJpnFqasqJlCXVYuATvtlS+Rmn8CRByI+uY00LCgqyfD5fJaY2VWIo3xfhE75ZonhdnpOdJUhgmWQ1QiQ2U66enh7u06c8TfCBPcNmJnBW1npesSGDpSfvo0Pxyj4CcoqBt/b29lSFupmZmTq6Z3LpaNsp3rryLMUGZTnGw4pTQjQajdG0P0DYiSjzrHJMeXm5WFtbm+1yucwmk0kqx6CI1X5eOYa3YHUniYKVL9UFq7NKetdkJb2XFCW9+7KS3m3ekt7fAgwA27bbtHTTq84AAAAASUVORK5CYII="),this.isGameExit=!1,this.loadingImg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADcAAAA3CAMAAACfBSJ0AAAAWlBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////9ZMre9AAAAHXRSTlMAbRoMdJEqMn06VrqFX0wSQ64jo8Nmm/Xu08vj2/8rOKIAAAJySURBVEjHldSL0rIgEIDhBQUSxfMx8/5v899dofzN1O8lZ2ymZxZqDA6TpVBV2vYG/lCSteOyNpe3lUuXTZMELrpS0/J/7g4z6bJP+XlnVIzLVxkZZr9k1C+fhnCTA3YGZbpTXEUmsCNYEBt2cuylZ0F/yWoZAuPmtsk67T8fFraDimfworvGFuDbsaLYMrcMGBN89Rp2ESNT4LWZWM/LOA6etga+8rM4+YENMoqYgsOIeSfBVyIJUMCPkElfOGI1zhQ5Zse9WRiYzKFBwUlvVq9QjS9uHlM4K/IKA0w+XxP3mhM4jRU5TSfMkXFzDxfVBMnRRrPX9KSmyVw5RMy0xvsKGbsGrop0cBGY9vlsqcnCZYQoI8ES4+prJ9Gwq0GsLG2r4q4zuOCBLsXaBm45huiyJ6G0bfsbrjA8DQOFjrrvOMj+4qQJQdyma39xiYEu9TXFDZcYXomGPK24tKqvnU6YkTOEGObXLrBSglQBqksmy2StLABE1XBVpa+cIcfRbHIM48tx3pWGfkvV+K4GJvkKSzwe1jU9hTA7ZTpHt7a+Z8bUnTCZY6xyDZzoFUWw/Mmi3HqY5wVwmpS3v2CRW4uQM+Bzq2FrD5m0zr5hBL4iUyrDxQn5zZKuI8fU1vDOsGCML7uT2onOOYK02QQ2WTahh9WbR8DFovOOaATbnHojLHvEjg5jrYtjIVZH1O33Ap1itCtGxi7APYPIqQ+LOY/YMewcsX2WXWAPREGhowROO8o8VkgGFV0hUqKM4DjpeGTMbDuPchp+pzvvmH6KuySC07SNSQpaHO3XJbf+7KyIN1+pK2u4WSRNyQ9AafTxpH9QqEZvVVNdCQAAAABJRU5ErkJggg==",this.loadingAngle=0,this.loadingWidth=0}return a(t,[{key:"PrintObject",value:function(t){var e={};for(var i in t)e[i]=String(t[i]);console.log(e)}},{key:"Log",value:function(){if(window.DEBUG){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];console.log.apply(this,e)}}},{key:"IsOnDevie",value:function(){return!window.DEBUG&&!window.REVIEW}},{key:"OMSGetRoot",value:function(t){return t}},{key:"OMSGetData",value:function(t){return"data/"+t}},{key:"OMSGetGuiData",value:function(t){return"data/gui/"+t}},{key:"OMSGetImage",value:function(t){return"data/image/"+t}},{key:"OMSGetToken",value:function(){return Resource.GetRewardIcon()}},{key:"OMSGetProductLink",value:function(t){return Resource.GetParam("redirect_url")}},{key:"RedirectInfo",value:function(t){window.DEBUG||window.REVIEW?window.open("https://ingameads.gameloft.com/ads/adserver/ad_targeting_info.php?lang=en&data=%7B%22game%22%3A%22DAMA%22%2C%22device%22%3Atrue%7D"):(window.targetingInfoUrl=window.targetingInfoUrl.startsWith("link:")?window.targetingInfoUrl:"link:"+window.targetingInfoUrl,window.mraid&&(window.targetingInfoUrl=window.targetingInfoUrl.replace("link:","")),TrackingManager.SendEventTracking(TrackingManager.TRACKING_ACTION_CLICK_INFO,function(){window.redirect(window.targetingInfoUrl)},t))}},{key:"Rand",value:function(t,e){return Math.random()*(e-t)+t}},{key:"RandInt",value:function(t,e){return Math.floor(Math.random()*(e-t+1)+t)}},{key:"AddLogText",value:function(t){if(void 0==this.mMainDivLogText){var e=document.createElement("style");e.innerText="\n        .main_div_log_text{width: 100%; height: 100%; position: fixed; top: 0; left: 0; z-index: 99999; pointer-events: none; text-align: left; overflow: hidden; margin: 0; padding: 0;}\n            .main_div_log_text div{width: 100%; height: 100%; padding: 0; margin: 0; text-align: left; overflow-x: hidden; overflow-y: auto; pointer-events: none;}\n                .main_div_log_text div p{display: inline; margin: 0; padding: 0; font-family: 'Arial'; color: #00ff00; background-color: rgba(0, 0, 0, 0.3); font-size: 2vmax;}\n    ",this.mMainDivLogText=document.createElement("div"),this.mMainDivLogText.classList.add("main_div_log_text"),this.mDivLogText=document.createElement("div"),document.head.appendChild(e),document.body.appendChild(this.mMainDivLogText),this.mMainDivLogText.appendChild(this.mDivLogText)}var i=document.createElement("p");for(i.innerText=""+t,i.appendChild(document.createElement("br")),this.mDivLogText.appendChild(i),this.mDivLogText.scrollTop=this.mDivLogText.scrollHeight;this.mDivLogText.childNodes.length>2&&this.mDivLogText.lastChild.offsetTop>=.95*this.mDivLogText.getBoundingClientRect().height;)this.mDivLogText.removeChild(this.mDivLogText.firstChild)}},{key:"Normalized",value:function(t,e,i,n){var r=t-i,a=e-n,o=Math.sqrt(r*r+a*a);return{x:r/o,y:a/o}}},{key:"CollisionPointRect",value:function(t,e,i){return!(t<i.x||e<i.y||t>i.x+i.width||e>i.y+i.height)}},{key:"InitInfo",value:function(){return this.infoBtn.anchor.set(.5),this.infoBtn.interactive=!0,this.infoBtn.hitArea=new PIXI.Rectangle(-40,-40,80,80),this.infoBtn}},{key:"InitToken",value:function(t,e){return 0==this.token.children.length?(this.tokenIcon=new PIXI.Sprite(t),this.tokenIcon.scale.set(e,e),this.token.addChild(new PIXI.Text("")),this.token.addChild(new PIXI.Text("")),this.token.addChild(this.tokenIcon)):(this.tokenIcon.texture=t,this.tokenIcon.scale.set(e,e)),this.token}},{key:"SetTokenInfo",value:function(t,e){for(var i=0,n=t.replace("%d",this.GetRewardAmount()).split("%token%"),r=0;r<n.length;r++){var a=this.token.getChildAt(r);a.text=n[r],a.style=e,a.position.x=i,0==r&&(i+=a.width,this.tokenIcon.position.set(i,(a.height-this.tokenIcon.height)/2),i+=this.tokenIcon.width)}}},{key:"InitAdvertisement",value:function(t,e){this.advertisement.text=t,this.advertisement.style=e}},{key:"SendTrackingAndExit",value:function(t){this.isGameExit||(this.Log("ExitGame"),AudioManager.StopAll(),this.isGameExit=!0,TrackingManager.SendEventTracking(TrackingManager.TRACKING_ACTION_CLOSE,this.ExitGame.bind(this),t),window.REVIEW||setTimeout(this.ExitGame,1500))}},{key:"GetRewardAmount",value:function(){return"undefined"!=typeof reward_amount?reward_amount:5}},{key:"ExitGame",value:function(){"undefined"!=typeof VPaid?VPaid.skipAd():"undefined"==typeof mraid?GameConfig.isUseBanner&&window.REVIEW?(BANNER.Show(),iView.setBanner(!0),this.isGameExit=!1):redirect("exit:"):GameConfig.isUseBanner?window.location="mraid://close":"undefined"!=typeof reward_currency?mraid.closeWithReward(reward_currency,!0):mraid.close()}},{key:"DispatchEvent",value:function(t){var e;try{e=new Event(t)}catch(i){e=document.createEvent("Event"),e.initEvent(t,!0,!0)}document.dispatchEvent(e)}},{key:"PauseHostGameMusic",value:function(){window.can_pause_music&&1==can_pause_music&&(window.location="pauseusermusic:")}},{key:"LoadAssets",value:function(t,e,i,n){var r=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:PIXI.loader;a.on("progress",e),a.on("error",n),a.on("complete",i);var o=0,s=t.length,h=!0,u=!1,l=void 0;try{for(var c,f=t[Symbol.iterator]();!(h=(c=f.next()).done);h=!0)!function(){var t=c.value,e=t.options||{};e.loadType==PIXI.loaders.Resource.LOAD_TYPE.IMAGE?(a.add(t.name,t.url,e),++o>=s&&a.load()):Resource.GetAssetUrl(t.url,"blob").then(function(i){var n=i;if("1"==window.fromCache)a.add(t.name,n);else{i instanceof Blob&&(n=Resource.CreateObjectURL(i),"image/jpeg"==i.type||"image/png"==i.type?e.loadType=PIXI.loaders.Resource.LOAD_TYPE.IMAGE:"application/json"==i.type&&(e.xhrType=PIXI.loaders.Resource.XHR_RESPONSE_TYPE.JSON));try{a.add(t.name,n,e)}catch(t){r.Log(t)}}++o>=s&&a.load()}).catch(function(e){r.Log(e),"imgToken"!=t.name&&StateManager.GetCurrentState()==StatePreLoad?r.SendTrackingAndExit():(n&&n(),"imgToken"==t.name&&o++)})}()}catch(t){u=!0,l=t}finally{try{!h&&f.return&&f.return()}finally{if(u)throw l}}}},{key:"LoadPackage",value:function(t,e,i){var n=this,a=[],l=new PIXI.loaders.Loader;for(var c in CoreHeader[t]){var f=CoreHeader[t][c];f.alias&&a.push({alias:f.alias,url:this.OMSGetImage(f.image),options:{loadType:PIXI.loaders.Resource.LOAD_TYPE.XHR}})}var d=[],p=!0,m=!1,v=void 0;try{for(var g,y=a[Symbol.iterator]();!(p=(g=y.next()).done);p=!0){var _=function(){var t=g.value,e=t.options||{};if(l.resources[t.alias])return{v:void 0};d.push(new Promise(function(i,n){Resource.GetAssetUrl(t.url,"blob").then(function(n){var r=n;n instanceof Blob&&(r=Resource.CreateObjectURL(n),"image/jpeg"!=n.type&&"image/png"!=n.type||(e.loadType=PIXI.loaders.Resource.LOAD_TYPE.IMAGE)),l.add(t.alias,r,e),i&&i()}).catch(function(t){n&&n(t)})}))}();if("object"===(void 0===_?"undefined":r(_)))return _.v}}catch(t){m=!0,v=t}finally{try{!p&&y.return&&y.return()}finally{if(m)throw v}}Promise.all(d).then(function(r){l.load().once("error",i).once("complete",function(r){Resource.GetAssetData(n.OMSGetGuiData(t)).then(function(i){s.Load(i);var n=-1;for(var r in CoreHeader[t]){n++;var a=CoreHeader[t][r];if(0==a.type){var c=h.Load(s.GetData(n));u.Add(a.id,l.resources[a.alias].texture,c)}else if(1==a.type){var f=new o;f.Load(s.GetData(n)),GuiManager.Add(a.id,f)}}s.Close(),e&&e()}).catch(function(t){i()})})}).catch(function(t){console.log(t),i()})}},{key:"SendMoatEvent",value:function(){}},{key:"InitMoatEvent",value:function(t,e){var i=initMoatTracking(t,moatParameters,e,"gameloftjsvideoint978229678926",t.src);this.SendMoatEvent=function(t){try{i.dispatchEvent({type:t,adVolume:deviceVolume})}catch(t){}}}},{key:"AddLoadingWheel",value:function(){var t=this,e=document.getElementById("loading_wheel");if(null==e||void 0==e){var i=new Image;i.src=this.loadingImg,i.id="loading_wheel",i.style.position="absolute",i.onload=function(){t.loadingWidth=i.width,i.style.left=(window.innerWidth-i.width)/2+"px",i.style.top=(window.innerHeight-i.height)/2+"px",document.body.appendChild(i)},i.style.transform="rotate("+this.loadingAngle+"deg)"}}},{key:"RemoveLoadingWheel",value:function(){var t=document.getElementById("loading_wheel");null!=t&&void 0!=t&&t.parentNode.removeChild(t)}},{key:"UpdateLoadingWheel",value:function(t){var e=document.getElementById("loading_wheel");e&&(this.loadingAngle=(this.loadingAngle+240*t)%360,e.style.transform="rotate("+this.loadingAngle+"deg)",e.style.left=(window.innerWidth-this.loadingWidth)/2+"px",e.style.top=(window.innerHeight-this.loadingWidth)/2+"px")}},{key:"GetFontSize",value:function(t,e){var i=new PIXI.Text("0",{fontFamily:e}),n=0,r=100;i.style.fontSize=r;do{n++,r*=t/i.height,i.style.fontSize=r}while(Math.abs(t-i.height)>1&&n<5);return Math.round(r)}},{key:"IsIVPointcut",value:function(){return"1"==window.iv_location_type}},{key:"CopyToClipboard",value:function(t){var e=document.createElement("textarea"),i=-1!=navigator.userAgent.search(/(iPad|iPhone|iphone|iPod)/);if(e.value=t,document.body.appendChild(e),i){e.contentEditable=!0,e.readOnly=!1;var n=document.createRange();n.selectNodeContents(e);var r=window.getSelection();r.removeAllRanges(),r.addRange(n),e.setSelectionRange(0,999999)}else e.setAttribute("readonly",""),e.select();document.execCommand("copy"),document.body.removeChild(e)}}]),t}();t.exports=new l},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(256),o=i(257),s=function(){function t(){n(this,t),this.context=null,this.gain=[],this.source=[],this.audioBuffer=[],this.audioBufferLoader=null,this.count=0,this.isSupportAudioAPI=!0,this.isLoaded=!1,this.audioStartOffset=[],this.audioStartTime=[],this.shouldCheckSound=null}return r(t,[{key:"CreateAudioGain",value:function(){var t=null;return this.context.createGain||(this.context.createGain=this.context.createGainNode),t=this.context.createGain(),t.connect(this.context.destination),t}},{key:"IsSupportAudioAPI",value:function(){return this.isSupportAudioAPI}},{key:"AudioCallback",value:function(t){this.isSupportAudioAPI?"running"===this.context.state?t&&t():this.context.resume().then(function(){t&&t()}):t&&t()}},{key:"InitMute",value:function(){for(var t=this.context.createBuffer(2,4410,44100),e=0;e<GameConfig.soundMax;e++)this.audioBuffer[e]=t,this.gain[e]=this.CreateAudioGain(),this.audioStartOffset[e]=0,this.audioStartTime[e]=0;this.shouldCheckSound=this.AudioCallback.bind(this,this.ShouldCheckSound.bind(this)),document.addEventListener("touchstart",this.shouldCheckSound)}},{key:"ShouldCheckSound",value:function(){document.removeEventListener("touchstart",this.shouldCheckSound);for(var t=0;t<this.audioBuffer.length;t++)this.PlaySound(t,!1),this.StopSound(t)}},{key:"Load",value:function(t){if(this.count=t.length,this.isLoaded=!1,this.isSupportAudioAPI){for(var e=0;e<this.count;e++)this.audioStartOffset[e]=0,this.audioStartTime[e]=0;this.audioBufferLoader=new o(this.context,t,this.SoundLoadFinished.bind(this),this.SoundLoadError.bind(this)),this.audioBufferLoader.Load()}else this.LoadSimpleSound(t)}},{key:"SoundLoadError",value:function(){Utils.DispatchEvent("LoadingError")}},{key:"LoadSimpleSound",value:function(t){this.isSupportAudioAPI=!1,a.Load(t)}},{key:"Init",value:function(){window.AudioContext=window.AudioContext||window.webkitAudioContext,this.isLoaded=!1,this.isSupportAudioAPI=void 0!==(window.AudioContext||window.webkitAudioContext),this.isSupportAudioAPI?(this.context=new AudioContext,this.InitMute()):(console.log("Web Audio API is not supported"),a.Init())}},{key:"SoundLoadFinished",value:function(t){for(var e=0;e<t.length;e++)this.audioBuffer[e]=t[e];this.isLoaded=!0}},{key:"IsLoaded",value:function(t){return this.isSupportAudioAPI?this.isLoaded:a.IsLoaded(t)}},{key:"SetVolume",value:function(t,e){this.isSupportAudioAPI?this.GetAudioGain(t).gain.value=e:a.SetVolume(t,e)}},{key:"GetAudioGain",value:function(t){return this.gain[t]}},{key:"GetCurrentTimeMS",value:function(t){return this.isSupportAudioAPI?this.context.currentTime:a.GetCurrentTimeMS(t)}},{key:"PlaySound",value:function(t,e){this.isSupportAudioAPI?this.PlaySoundContext(t,e):a.Play(t,e)}},{key:"PlaySoundContext",value:function(t,e){this.audioBuffer[t]&&(null!=this.source[t]&&0==this.audioStartOffset[t]&&this.StopSound(t),this.audioStartTime[t]=this.context.currentTime,this.source[t]=this.context.createBufferSource(),this.source[t].connect(this.GetAudioGain(t)),this.source[t].buffer=this.audioBuffer[t],this.source[t].loop=e,this.source[t].start||(this.source[t].start=this.source[t].noteOn),this.source[t].start(0,this.audioStartOffset[t]%this.audioBuffer[t].duration))}},{key:"StopSound",value:function(t){if(this.isSupportAudioAPI)try{null!=this.source[t]&&(this.source[t].stop||(this.source[t].stop=this.source[t].noteOff),this.source[t].stop(0),this.audioStartOffset[t]=0,this.source[t]=null)}catch(t){}else a.Stop(t)}},{key:"IsSoundPlaying",value:function(t){if(this.source[t]&&this.context.currentTime-this.audioStartTime[t]<this.audioBuffer[t].duration){if(this.source[t].loop)throw"Not support for loop sound.";return!0}return!1}},{key:"Play",value:function(t,e){this.AudioCallback(this.PlaySound.bind(this,t,e))}},{key:"Stop",value:function(t){this.StopSound(t)}},{key:"Pause",value:function(t){if(this.isSupportAudioAPI){if(null!=this.source[t]){try{this.source[t].stop(0)}catch(t){}this.audioStartOffset[t]+=this.context.currentTime-this.audioStartTime[t]}}else a.Pause(t)}},{key:"StopAll",value:function(){for(var t=0;t<this.count;t++)this.StopSound(t)}}]),t}();t.exports=new s},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function t(){n(this,t),this.TEMPLATE_GUI_GFXITEM=200,this.TEMPLATE_GUI_TEXTITEM=201,this.FILLRECTITEM_WIDTH_INDEX=0,this.FILLRECTITEM_HEIGHT_INDEX=1,this.FILLRECTITEM_ALPHA_INDEX=2,this.FILLRECTITEM_RED_INDEX=3,this.FILLRECTITEM_GREEN_INDEX=4,this.FILLRECTITEM_BLUE_INDEX=5,this.GFXITEM_SPRITE_INDEX=0,this.GFXITEM_FRAME_INDEX=1,this.GFXITEM_ANIM_INDEX=2,this.TEXTITEM_TEXTID_INDEX=0,this.TEXTITEM_TEXTSIZE_INDEX=1,this.TEXTITEM_WIDTH_INDEX=2,this.TEXTITEM_HEIGHT_INDEX=3,this.TEXTITEM_FONT_INDEX=4,this.TEXTITEM_RED_INDEX=5,this.TEXTITEM_GREEN_INDEX=6,this.TEXTITEM_BLUE_INDEX=7,this.TEXTITEM_ALIGN_INDEX=8,this.TEXTITEM_SHADOW_INDEX=9,this.TEXTITEM_SHADOW_RED_INDEX=10,this.TEXTITEM_SHADOW_GREEN_INDEX=11,this.TEXTITEM_SHADOW_BLUE_INDEX=12,this.ANCHOR_NONE=0,this.ANCHOR_LEFT=1,this.ANCHOR_LEFT_TOP=2,this.ANCHOR_LEFT_CENTER=3,this.ANCHOR_LEFT_BOTTOM=4,this.ANCHOR_RIGHT=5,this.ANCHOR_RIGHT_TOP=6,this.ANCHOR_RIGHT_CENTER=7,this.ANCHOR_RIGHT_BOTTOM=8,this.ANCHOR_TOP=9,this.ANCHOR_TOP_CENTER=10,this.ANCHOR_BOTTOM=11,this.ANCHOR_BOTTOM_CENTER=12,this.ANCHOR_HCENTER_VCENTER=13};t.exports=new r},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=(i(64),function(){function t(){n(this,t),this.gui=[]}return r(t,[{key:"Add",value:function(t,e){this.gui[t]=e}},{key:"GetGui",value:function(t){return this.gui[t]}},{key:"Update",value:function(t,e){this.gui[t].Update(e)}}]),t}());t.exports=new a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(105),o=function(){function t(){var e=this;n(this,t),this.pid=UserProfile.pid,this.phase=UserProfile.phase,window.addEventListener("error",function(t){e.Post(t.message)})}return r(t,[{key:"IsError",value:function(t){return-1==t.indexOf("Script error.")&&-1==t.indexOf("Uncaught ReferenceError: mraid is not defined")&&-1==t.indexOf("Uncaught ReferenceError: onVolumeChanged is not defined")&&-1==t.indexOf("Uncaught ReferenceError: onWebViewFinishLoad is not defined")&&-1==t.indexOf("TypeError: undefined is not a function")}},{key:"Post",value:function(t){var e="true"==Resource.GetParam("enable_gold_log");if(!window.DEBUG&&!window.REVIEW&&window.omsPublish&&this.IsError(t)&&("dev"==this.phase||"qa"==this.phase||"gold"==this.phase&&e)){var i={os:Resource.args.os||"N/A",device:Resource.args.device_model||"N/A",firmware:Resource.args.firmware||"N/A",gameid:Resource.args.game_id||"N/A",gamever:Resource.args.game_ver||"N/A",error:t};Resource.Request("post",a.REST_API_SERVER+"/api/pub/federation/leaderboard/"+this.pid+"_"+this.phase+"_creative_log/log",JSON.stringify(i))}}}]),t}();t.exports=new o},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(105),o=function(){function t(){n(this,t),this.pid=UserProfile.pid,this.userid=UserProfile.userid,this.phase=UserProfile.phase,this.name="default"}return r(t,[{key:"Get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return Resource.Request("get",a.REST_API_SERVER+"/api/pub/federation/leaderboard/"+this.pid+"_"+this.phase+"_"+this.name+"/"+t+"/"+e)}},{key:"Post",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={userid:this.userid,score:t,name:e,attrs:i};return Resource.Request("post",a.REST_API_SERVER+"/api/pub/federation/leaderboard/"+this.pid+"_"+this.phase+"_"+this.name,JSON.stringify(n))}},{key:"MyEntry",value:function(){return Resource.Request("get",a.REST_API_SERVER+"/api/pub/federation/leaderboard/"+this.pid+"_"+this.phase+"_"+this.name+"/"+this.userid)}},{key:"DeleteMyEntry",value:function(){var t={userid:this.userid};return Resource.Request("post",a.REST_API_SERVER+"/api/pri/federation/leaderboard/"+this.pid+"_"+this.phase+"_"+this.name+"/delete",JSON.stringify(t))}}]),t}();t.exports=new o},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=(i(17),i(14),i(268)),h=function(t){function e(){n(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.enemyPool=new Array,t.maxEnemies=50,t.left_Y,t.left_X,t.right_Y,t.right_X,t}return a(e,t),o(e,[{key:"Init",value:function(){this.enemyPool.length<=0?this.CreatePool():this.ResetPool(),this.left_X=GuiManager.GetGui(6).GetObject(34).x,this.left_Y=GuiManager.GetGui(6).GetObject(34).y,this.right_X=GuiManager.GetGui(6).GetObject(35).x,this.right_Y=GuiManager.GetGui(6).GetObject(35).y}},{key:"ResetPool",value:function(){for(var t=0;t<this.enemyPool.length;t++)this.enemyPool[t].SetActive(!1),this.enemyPool[t].Init()}},{key:"CreatePool",value:function(){for(var t=0;t<this.maxEnemies;t++){var e=new s;e.Init(),this.enemyPool.push(e),this.addChild(e)}}},{key:"SpawnEnemy",value:function(t,e,i){if(!StateIngame2.GameMgr.isWin){var n=this.GetEnemy();n.SetMoveTime(i),n.SetPositionType(t),n.SetType(e),n.SetActive(!0)}}},{key:"RemoveAllEnemy",value:function(){for(var t=0;t<this.enemyPool.length;t++)this.enemyPool[t].isActive&&this.enemyPool[t].Hit(10)}},{key:"GetEnemy",value:function(){for(var t=0;t<this.enemyPool.length;t++)if(!this.enemyPool[t].isActive)return this.enemyPool[t]}},{key:"Update",value:function(t){for(var e=0;e<this.enemyPool.length;e++)this.enemyPool[e].Update(t)}}]),e}(PIXI.Container);t.exports=new h},function(t,e,i){"use strict";(function(e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(273),h=i(270),u=i(274);e.EnemyMgr=i(155),e.UIManager=i(275),e.EffectContainer=i(267);var l=i(264),c=function(t){function i(){n(this,i);var t=r(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return t.state=null,t.player,t.bulletMgr,t.ScrollingBG=new u,t.tutorialTimer=new Timer,t.text2TutorialTimer=new Timer,t.isWin=!1,e.player2=new s,e.BOSS=new l,t}return a(i,t),o(i,[{key:"Init",value:function(){this.indexText=window.languageIndex,player2.Init(),BOSS.Init(),EnemyMgr.Init(),h.Init(),UIManager.Init(),StateIngame2.isFirstLaunch?(StateIngame2.IsNewUser()?(this.SetState(GameDefine2.GAME_MANAGER_STATE_TUTORIAL),this.tutorialTimer.SetDuration(1)):this.SetState(GameDefine2.GAME_MANAGER_STATE_IN_GAME),this.addChild(this.ScrollingBG),this.addChild(EnemyMgr),this.addChild(BOSS),this.addChild(GuiManager.GetGui(6)),this.addChild(player2),this.addChild(EffectContainer)):this.SetState(GameDefine2.GAME_MANAGER_STATE_IN_GAME),this.isWin=!1,StateIngame.isWin=this.isWin,this.ScrollingBG.Init("1",0,APP.GetHeight()/2)}},{key:"Update",value:function(t){switch(GuiManager.GetGui(6).Update(t),this.state){case GameDefine2.GAME_MANAGER_STATE_TUTORIAL:this.tutorialTimer.Update(t),this.tutorialTimer.JustFinished()&&(this.SetState(GameDefine2.GAME_MANAGER_STATE_TUTORIAL_2),StateIngame2.SetState(GameDefine2.GAME_STATE_TUTORIAL)),UIManager.Update(t),player2.Update(t),BOSS.Update(t),EnemyMgr.Update(t),this.ScrollingBG.Update(t,GameDefine2.BG_SPEED),h.Update(t),EffectContainer.Update(t);break;case GameDefine2.GAME_MANAGER_STATE_TUTORIAL_2:this.text2TutorialTimer.Update(t),this.text2TutorialTimer.JustFinished()&&(this.isFirstText?(GuiManager.GetGui(6).GetObject(42).text="",GuiManager.GetGui(6).GetObject(37+window.languageIndex).SetFrame(ObjectDefine.CHARACTER_INFOR.currentIndex?DeviceInfo.isBrowser?34:15:DeviceInfo.isBrowser?33:14),GuiManager.GetGui(6).GetObject(43).visible=!0,DeviceInfo.isBrowser?GuiManager.GetGui(6).GetObject(43).SetAnim(23,!0):GuiManager.GetGui(6).GetObject(43).SetAnim(20,!0),this.isFirstText=!1,this.text2TutorialTimer.SetDuration(3)):(player2.bulletEffect_1.visible=!0,player2.bulletEffect_2.visible=!0,GuiManager.GetGui(6).GetObject(36).visible=!1,GuiManager.GetGui(6).GetObject(42).text="",GuiManager.GetGui(6).GetObject(43).visible=!1,GuiManager.GetGui(6).GetObject(37+window.languageIndex).visible=!1,this.SetState(GameDefine2.GAME_MANAGER_STATE_IN_GAME),StateIngame2.SetState(GameDefine2.GAME_STATE_A),StateIngame2.StartGame()));break;case GameDefine2.GAME_MANAGER_STATE_IN_GAME:UIManager.Update(t),this.ScrollingBG.Update(t,GameDefine2.BG_SPEED),player2.Update(t),BOSS.Update(t),EnemyMgr.Update(t),EffectContainer.Update(t),h.Update(t);break;case GameDefine2.GAME_MANAGER_STATE_END_GAME:player2.Update(t),BOSS.Update(t),EnemyMgr.Update(t),EffectContainer.Update(t)}}},{key:"SetState",value:function(t){switch(this.state=t,this.state){case GameDefine2.GAME_MANAGER_STATE_TUTORIAL:break;case GameDefine2.GAME_MANAGER_STATE_TUTORIAL_2:this.isFirstText=!0,GuiManager.GetGui(6).GetObject(36).visible=!0,GuiManager.GetGui(6).GetObject(37+window.languageIndex).visible=!0,GuiManager.GetGui(6).GetObject(37+window.languageIndex).SetFrame(13),this.text2TutorialTimer.SetDuration(3);break;case GameDefine2.GAME_MANAGER_STATE_IN_GAME:player2.SetState(player2.STATE.ATTACK);break;case GameDefine2.GAME_MANAGER_STATE_END_GAME:this.isWin=!0,StateIngame.isWin=this.isWin,player2.SetState(player2.STATE.IDLE),EnemyMgr.RemoveAllEnemy()}}},{key:"TouchHandler",value:function(t){player2.TouchHandler(t),Input.IsTouchDown(t)&&t.target==StateIngame2&&(this.isTouch=!0),Input.IsTouchUp(t)&&t.target==StateIngame2&&(this.isTouch=!1,this.state==GameDefine2.GAME_MANAGER_STATE_TUTORIAL_2&&(this.isFirstText?(GuiManager.GetGui(6).GetObject(42).text="",GuiManager.GetGui(6).GetObject(37+window.languageIndex).SetFrame(ObjectDefine.CHARACTER_INFOR.currentIndex?DeviceInfo.isBrowser?34:15:DeviceInfo.isBrowser?33:14),GuiManager.GetGui(6).GetObject(43).visible=!0,DeviceInfo.isBrowser?GuiManager.GetGui(6).GetObject(43).SetAnim(23,!0):GuiManager.GetGui(6).GetObject(43).SetAnim(20,!0),this.isFirstText=!1,this.text2TutorialTimer.Reset(),this.text2TutorialTimer.SetDuration(3)):(this.text2TutorialTimer.Reset(),player2.bulletEffect_1.visible=!0,player2.bulletEffect_2.visible=!0,GuiManager.GetGui(6).GetObject(36).visible=!1,GuiManager.GetGui(6).GetObject(42).text="",GuiManager.GetGui(6).GetObject(43).visible=!1,GuiManager.GetGui(6).GetObject(37+window.languageIndex).visible=!1,this.SetState(GameDefine2.GAME_MANAGER_STATE_IN_GAME),StateIngame2.SetState(GameDefine2.GAME_STATE_A),StateIngame2.StartGame())))}},{key:"KeyHandler",value:function(t){player2.KeyHandler(t),this.isTouch||(!Input.IsKeyDown(t)||"ArrowRight"!=t.key&&"ArrowLeft"!=t.key||this.isKey||(this.isKey=!0),!Input.IsKeyUp(t)||"ArrowRight"!=t.key&&"ArrowLeft"!=t.key||(this.isKey=!1,this.state==GameDefine2.GAME_MANAGER_STATE_TUTORIAL_2&&(this.isFirstText?(GuiManager.GetGui(6).GetObject(42).text="",GuiManager.GetGui(6).GetObject(37+window.languageIndex).SetFrame(ObjectDefine.CHARACTER_INFOR.currentIndex?DeviceInfo.isBrowser?34:15:DeviceInfo.isBrowser?33:14),GuiManager.GetGui(6).GetObject(43).visible=!0,DeviceInfo.isBrowser?GuiManager.GetGui(6).GetObject(43).SetAnim(23,!0):GuiManager.GetGui(6).GetObject(43).SetAnim(20,!0),this.isFirstText=!1,this.text2TutorialTimer.Reset(),this.text2TutorialTimer.SetDuration(3)):(this.text2TutorialTimer.Reset(),player2.bulletEffect_1.visible=!0,player2.bulletEffect_2.visible=!0,GuiManager.GetGui(6).GetObject(36).visible=!1,GuiManager.GetGui(6).GetObject(42).text="",GuiManager.GetGui(6).GetObject(43).visible=!1,GuiManager.GetGui(6).GetObject(37+window.languageIndex).visible=!1,this.SetState(GameDefine2.GAME_MANAGER_STATE_IN_GAME),StateIngame2.SetState(GameDefine2.GAME_STATE_A),StateIngame2.StartGame()))))}}]),i}(PIXI.Container);t.exports=c}).call(e,i(21))},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function t(e,i,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},h=i(65),u=i(14),l=function(t){function e(){n(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),i=Object.keys(t.STATE).length;return t.STATE.INIT=i++,t.STATE.ACTIVE=i++,t.STATE.COLLISION_WITH_PLAYER=i++,t.INFOR,t.mAnimation=new u("2"),t.mIsFirstInitBaseItem=!0,t}return a(e,t),o(e,[{key:"Init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._SetState(this.STATE.INIT,!1,t)}},{key:"_SetState",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];switch(s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_SetState",this).call(this,t),this.mState){case this.STATE.INACTIVE:this.visible=!1;break;case this.STATE.INIT:this.visible=n,this.mIsFirstInitBaseItem&&this.addChild(this.mAnimation),this._SetAnimation(),this.mIsFirstInitBaseItem=!1;break;case this.STATE.ACTIVE:this.visible=!0,this.alpha=0,this.INFOR&&this.INFOR.TYPE==ObjectDefine.OBJECT_TYPE.ITEM_02&&(this.alpha=1),this._SetAnimation();break;case this.STATE.COLLISION_WITH_PLAYER:this.visible=!0,this._SetAnimation();var r=this.INFOR.SCORE;StateIngame.mState!=StateIngame.STATE.TIME_UP&&i&&(StateIngame.AddScore(r),GameDefine.PlayArrSound(this.INFOR.ARR_SOUND),this.INFOR.COLLECT_SOUND&&GameDefine.PlaySound(this.INFOR.COLLECT_SOUND),this.INFOR&&this.INFOR.TYPE!=ObjectDefine.OBJECT_TYPE.ITEM_02&&ParticleMgr.SetScoreParticle(r,this.mPosition))}}},{key:"Update",value:function(t){switch(this.mState){case this.STATE.INACTIVE:break;case this.STATE.INIT:this._UpdateInactive(),this.mAnimation.Update(t),this.INFOR.TYPE==ObjectDefine.OBJECT_TYPE.ITEM_02&&this.visible&&this.mAnimation.isFinish&&this.SetStateActive();break;case this.STATE.ACTIVE:this.alpha=GameDefine.MoveToTarget(this.alpha,1,1/.3,t),this.mAnimation.Update(t),this._UpdateInactive(),Debug.DrawBody(this.mBody);break;case this.STATE.COLLISION_WITH_PLAYER:this.mAnimation.Update(t),this._UpdateInactive()}}},{key:"SetStateActive",value:function(){this._SetState(this.STATE.ACTIVE)}},{key:"IsCheckCollision",value:function(){switch(this.mState){case this.STATE.ACTIVE:case this.STATE.INIT:return!0;default:return!1}}},{key:"SetStateCollisionWithPlayer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._SetState(this.STATE.COLLISION_WITH_PLAYER,t)}},{key:"SetInfor",value:function(t){this.INFOR=t,this._SetAnimation()}},{key:"_UpdateInactive",value:function(){this.mPosition.z<=Camera.GetPosition().z&&this._SetState(this.STATE.INACTIVE)}},{key:"_SetAnimation",value:function(){if(void 0!=this.INFOR)switch(this.mState){case this.STATE.INACTIVE:break;case this.STATE.INIT:this.mAnimation.SetAnim(0==this.mPosition.x?this.INFOR.ANIM_INIT_CENTER:this.mPosition.x>0?this.INFOR.ANIM_INIT_RIGHT:this.INFOR.ANIM_INIT_LEFT,this.INFOR.ANIM_INIT_IS_LOOP);break;case this.STATE.ACTIVE:this.mAnimation.SetAnim(0==this.mPosition.x?this.INFOR.ANIM_ACTIVE_CENTER:this.mPosition.x>0?this.INFOR.ANIM_ACTIVE_RIGHT:this.INFOR.ANIM_ACTIVE_LEFT,this.INFOR.ANIM_ACTIVE_IS_LOOP);break;case this.STATE.COLLISION_WITH_PLAYER:this.mAnimation.SetAnim(0==this.mPosition.x?this.INFOR.ANIM_COLLISION_CENTER:this.mPosition.x>0?this.INFOR.ANIM_COLLISION_RIGHT:this.INFOR.ANIM_COLLISION_LEFT,this.INFOR.ANIM_COLLISION_LOOP)}}}]),e}(h);t.exports=l},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function t(){n(this,t),this.SOUNDS_INFO=[{file:"data/sound/m4a/m_lic_upm_bgm.m4a",volume:1},{file:"data/sound/m4a/m_lic_upm_cutscene.m4a",volume:1},{file:"data/sound/m4a/m_lic_upm_stinger.m4a",volume:1},{file:"data/sound/m4a/sfx_boss_kill.m4a",volume:1},{file:"data/sound/m4a/sfx_bullet_impact_01.m4a",volume:1},{file:"data/sound/m4a/sfx_bullet_impact_02.m4a",volume:1},{file:"data/sound/m4a/sfx_bullet_impact_03.m4a",volume:1},{file:"data/sound/m4a/sfx_bullet_impact_04.m4a",volume:1},{file:"data/sound/m4a/sfx_bullet_impact_05.m4a",volume:1},{file:"data/sound/m4a/sfx_collect_01.m4a",volume:1},{file:"data/sound/m4a/sfx_collect_02.m4a",volume:1},{file:"data/sound/m4a/sfx_collect_03.m4a",volume:1},{file:"data/sound/m4a/sfx_collect_sword.m4a",volume:1},{file:"data/sound/m4a/sfx_helicopter_damage.m4a",volume:1},{file:"data/sound/m4a/sfx_helicopter_loop.m4a",volume:1},{file:"data/sound/m4a/sfx_hurt_enemy.m4a",volume:1},{file:"data/sound/m4a/sfx_keytana_appears.m4a",volume:1},{file:"data/sound/m4a/sfx_laser_01.m4a",volume:1},{file:"data/sound/m4a/sfx_laser_02.m4a",volume:1},{file:"data/sound/m4a/sfx_laser_03.m4a",volume:1},{file:"data/sound/m4a/sfx_laser_04.m4a",volume:1},{file:"data/sound/m4a/sfx_laser_05.m4a",volume:1},{file:"data/sound/m4a/sfx_select_player.m4a",volume:1},{file:"data/sound/m4a/sfx_start.m4a",volume:1},{file:"data/sound/m4a/sfx_ui_fail.m4a",volume:1},{file:"data/sound/m4a/sfx_ui_sucess.m4a",volume:1}],this.SINGLE_SOUNDS_INFO=[{file:"data/sound/m4a/sfx_start.m4a",volume:1}]};t.exports=new r},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(){n(this,t),TrackingManager.SendEventTracking=this.SendEventTracking,UserProfile.Save=this.Save,UserProfile.Load=this.Load,this.IS_DEBUG=!1,this.IS_SKIP_TUTORIAL=!1,this.gIsShowForm=!1,this.GAME_TIMEOUT=60,this.GAME_TIMER_WARNING=5,this.SCORE_CONGRAT=50,this.TIMES_TO_DIE=1e7,this.ITEMS_COLLECT=15,this.TIME_SPAWN_KAYTA=[3,7,11],this.TIMES_SPAWN_ALL=12,this.POWER_SMALL_THING=.5,this.POWER_FULL_KAYTANA=10,this.RESPAWN_SPECIAL=100,this.TIME_CHECK_AGAIN=100,this.OBJECT_MGR_OFFSET_Z_WITH_PLAYER_SPAWN_KAYTANA=2500,this.RATIO_TO_SPAWN_KAYTANA=15,this.RATIO_TO_SPAWN_KAYTANA_AFTER_TUTORIAL=60,this.POWER_FULL_1_KAYTANA=this.POWER_FULL_KAYTANA/3,this.DISTANCE_SPAWN_KAYTANA=2,this.CHAR_ACCELERATION=0,this.CHAR_ACCELERATION=0,this.CHAR_SPEED_TIMEUP=2e3,this.CHAR_SPEED_MAX=5e3,this.CHAR_SPEED_RESET=1500,this.TIME_TO_RASING_SPEED=.7,this.SELECT_WAIT_TIME=1,this.VIDEO_SPEED_RESET=.5,this.ARR_BAD_WORD=[],this.SOUND_COLLECT_ITEM={},this.SOUND_COLLECT_ITEM.currentIndex=-1,this.SOUND_COLLECT_ITEM.arr=[9,10,11],this.SOUND_COLLECT_ITEM_KAYTANA={},this.SOUND_COLLECT_ITEM_KAYTANA.currentIndex=-1,this.SOUND_COLLECT_ITEM_KAYTANA.arr=[12],this.SOUND_COLLECT_OBSTACLE_CHAR_01={},this.SOUND_COLLECT_OBSTACLE_CHAR_01.currentIndex=-1,this.SOUND_COLLECT_OBSTACLE_CHAR_01.arr=[15],this.SOUND_COLLECT_OBSTACLE_CHAR_02={},this.SOUND_COLLECT_OBSTACLE_CHAR_02.currentIndex=-1,this.SOUND_COLLECT_OBSTACLE_CHAR_02.arr=[],this.SOUND_COLLECT_OBSTACLE_02={},this.SOUND_COLLECT_OBSTACLE_02.currentIndex=-1,this.SOUND_COLLECT_OBSTACLE_02.arr=[],this.SELECT_CHAR_OFFSET_X=1e3,this.SELECT_CHAR_OFFSET_Y=150,this.SELECT_CHAR_CAMERA_SPEED_X=this.SELECT_CHAR_OFFSET_X/.3,this.SCORE_ITEM=1,this.SCORE_OBSTACLE=0,this.SCORE_FRENZY_ITEM=20,this.SCORE_FRENZY_OBSTACLE=0,this.FRENZY_SCORE_MAX=300,this.FRENZY_LONG_TIME=5,this.IMMORTAL_LONG_TIME=1,this.SCORE_TEXTURE_ARR_SIGN_ID=[0,0],this.SCORE_TEXTURE_ARR_SIGN_ID_SCORE=[102,103],this.SCORE_COLLECT_PLUS_ONE_TEXTURE=[17,17,17,119,119,119,119,119,119,119],this.SCORE_TEXTURE_ARR_NUMBER_ID_STYLE_01=[92,93,94,95,96,97,98,99,100,101],this.SCORE_TEXTURE_ARR_NUMBER_ID_STYLE_02=[133,133,133,107,108,109,110,111,112,113],this.UpdateParams(),console.warn=this.Log}return r(t,[{key:"Log",value:function(){}},{key:"SendEventTracking",value:function(){}},{key:"Save",value:function(){}},{key:"Load",value:function(){}},{key:"UpdateParams",value:function(){this.VIDEO_SPEED=.65,this.LANE_WIDTH=250,this.NUMBER_OF_LANE=3,this.LANE_X_MAX=(this.NUMBER_OF_LANE-1)/2*this.LANE_WIDTH,this.LANE_X_MIN=-this.LANE_X_MAX,this.LEVEL_ROW_DISTANCE=500,this.CAMERA_POSITION_ON_SCREEN={x:.5*APP.GetWidth(),y:.5*APP.GetHeight()},this.CAMERA_START_POSITION={x:0,y:-400,z:-1e3},this.CAMERA_OFFSET_POSITION_WITH_PLAYER={x:void 0,y:void 0,z:-1e3},this.CAMERA_Z_SCALE_ORIGIN=1e3,this.ACCELE_Y=4e3,this.PLAYER_START_POSITION={x:(this.NUMBER_OF_LANE%2==0?-.5:0)*this.LANE_WIDTH,y:0,z:0},this.PLAYER_SPEED_Z=3e3,this.PLAYER_SPEED_X=1e3,this.PLAYER_SPEED_Y=-1200,this.PLAYER_RUN_SPEED={x:0,y:0,z:this.PLAYER_SPEED_Z},this.PLAYER_TURN_LEFT_SPEED={x:-this.PLAYER_SPEED_X,y:0,z:this.PLAYER_SPEED_Z},this.PLAYER_TURN_RIGHT_SPEED={x:this.PLAYER_SPEED_X,y:0,z:this.PLAYER_SPEED_Z},this.PLAYER_JUMP_SPEED={x:0,y:this.PLAYER_SPEED_Y,z:this.PLAYER_SPEED_Z},this.OBJECT_MGR_START_Z=5*this.LEVEL_ROW_DISTANCE,this.OBJECT_MGR_OFFSET_Z_WITH_PLAYER=30*this.LEVEL_ROW_DISTANCE}},{key:"CheckCollisionTwoRange",value:function(t,e,i,n){return!(Math.max(t,e)<Math.min(i,n)||Math.min(t,e)>Math.max(i,n))}},{key:"CheckCollisionTwoBody",value:function(t,e){return this.CheckCollisionTwoRange(t.x,t.x+t.width,e.x,e.x+e.width)&&this.CheckCollisionTwoRange(t.y,t.y+t.height,e.y,e.y+e.height)&&this.CheckCollisionTwoRange(t.z,t.z+t.depth,e.z,e.z+e.depth)}},{key:"UpdateRotateVideo",value:function(){this.mVideoBg.className=window.innerWidth<window.innerHeight?"video_no_rotate":"video_rotate"}},{key:"IsSingleTouch",value:function(t){return"touch"!=t.data.pointerType||("touchstart"==t.data.originalEvent.type&&1==t.data.originalEvent.touches.length||"touchmove"==t.data.originalEvent.type&&1==t.data.originalEvent.touches.length||"touchend"==t.data.originalEvent.type&&0==t.data.originalEvent.touches.length)}},{key:"GetDistance",value:function(t,e){var i=e.x-t.x,n=e.y-t.y;return Math.sqrt(i*i+n*n)}},{key:"MoveToTarget",value:function(t,e,i,n){return i=Math.abs(i),t<e?Math.min(t+i*n,e):t>e?Math.max(t-i*n,e):t}},{key:"GetSoundIndexMax",value:function(){return AudioManager.IsSupportAudioAPI()?DataDefine.SOUNDS_INFO.length:DataDefine.SINGLE_SOUNDS_INFO.length}},{key:"PlaySound",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t<this.GetSoundIndexMax()&&AudioManager.Play(t,e)}},{key:"PauseSound",value:function(t){t<this.GetSoundIndexMax()&&AudioManager.Pause(t)}},{key:"StopSound",value:function(t){t<this.GetSoundIndexMax()&&AudioManager.Stop(t)}},{key:"StopAllSound",value:function(){AudioManager.StopAll()}},{key:"PlayArrSound",value:function(t){t.currentIndex=(t.currentIndex+1)%t.arr.length,this.PlaySound(t.arr[t.currentIndex])}},{key:"GetAngle",value:function(t,e){var i=e.x-t.x,n=e.y-t.y;return i<0?n<0?Math.atan(n/i)/Math.PI*180+180:0==n?180:Math.atan(n/i)/Math.PI*180+180:0==i?n<0?-90:0==n?0:90:n<0?Math.atan(n/i)/Math.PI*180:0==n?0:Math.atan(n/i)/Math.PI*180}},{key:"CheckValueInRange",value:function(t,e,i){return t>=Math.min(e,i)&&t<=Math.max(e,i)}},{key:"LinearInterpolation",value:function(t,e,i,n,r){return(t-e)/(i-e)*(r-n)+n}},{key:"GetValueInArray",value:function(t,e){if(e.length>=2)for(var i=e.length-1,n=0;n<i;n++)if(this.CheckValueInRange(t,e[n][0],e[n+1][0]))return this.LinearInterpolation(t,e[n][0],e[n+1][0],e[n][1],e[n+1][1]);return 0}}]),t}();t.exports=new a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function t(e,i,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},h=i(65),u=i(14),l=i(78),c=i(17),f=i(31),d=i(38),p=function(t){function e(){n(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),i=Object.keys(t.STATE).length;return t.STATE.INIT=i++,t.STATE.ACTIVE=i++,t.mText,t.mAnimation,t.mScoreTexture,t.mIsFirstInit=!0,t.mPercent,t.mLifeTime,t.mArrPositionX=[],t.mArrPositionY=[],t.mArrPositionZ=[],t.mArrAlpha=[],t.mArrScale=[],t.tweenMgr=new d,t.darkBgContainer=new PIXI.Container,t.darkBg=new PIXI.Graphics,t}return a(e,t),o(e,[{key:"Init",value:function(){this._SetState(this.STATE.INIT)}},{key:"_SetState",value:function(t){switch(s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_SetState",this).call(this,t),this.mState){case this.STATE.INACTIVE:this.visible=!1;break;case this.STATE.INIT:this.darkBg.clear(),this.darkBg.beginFill(0,1),this.darkBg.drawRect(-APP.GetWidth()/2,-APP.GetHeight()/2,2*APP.GetWidth(),2*APP.GetHeight()),this.darkBg.endFill(),this.darkBg.alpha=0,this.visible=!1,this.mIsFirstInit&&(this.mText=new PIXI.Text("",{}),this.mText.anchor.set(.5,.5),this.mScoreTexture=new l,this.addChild(this.darkBgContainer),this.addChild(this.mText),this.addChild(this.mScoreTexture)),this.mText.visible=!1,this.mScoreTexture.Init(),void 0!=this.mAnimation&&(this.mAnimation.visible=!1),this.visible=!0,this.mIsFirstInit=!1;break;case this.STATE.ACTIVE:this.visible=!0,this.mPercent=0}}},{key:"Update",value:function(t){switch(this.tweenMgr.Update(t),this.mState){case this.STATE.INACTIVE:case this.STATE.INIT:break;case this.STATE.ACTIVE:this.mPercent=GameDefine.MoveToTarget(this.mPercent,1,1/this.mLifeTime,t),this.SetPosition({x:GameDefine.GetValueInArray(this.mPercent,this.mArrPositionX),y:GameDefine.GetValueInArray(this.mPercent,this.mArrPositionY),z:GameDefine.GetValueInArray(this.mPercent,this.mArrPositionZ)}),this.alpha=GameDefine.GetValueInArray(this.mPercent,this.mArrAlpha),this.SetScale(GameDefine.GetValueInArray(this.mPercent,this.mArrScale)),this.UpdateDrawPosition(),void 0!=this.mAnimation&&this.mAnimation.visible&&this.mAnimation.Update(t),this._UpdateInactive()}}},{key:"SetStateActive",value:function(){this._SetState(this.STATE.ACTIVE)}},{key:"SetLifeTime",value:function(t){this.mLifeTime=t}},{key:"SetDarkBg",value:function(){var t=this;this.SetPosition({x:GameDefine.GetValueInArray(this.mPercent,this.mArrPositionX),y:GameDefine.GetValueInArray(this.mPercent,this.mArrPositionY),z:GameDefine.GetValueInArray(this.mPercent,this.mArrPositionZ)}),this.darkBg.visible=!1,this.darkBg.alpha=0,this.tweenMgr.Create(this.darkBg,f.LINEAR_EASE,{alpha:0},{alpha:.7},.5,0),this.tweenMgr.SetCallback(this.darkBg,function(){t.tweenMgr.Remove(t.darkBg),setTimeout(function(){t.darkBg.visible=!1,t.darkBgContainer.removeChild(t.darkBg)},2e3)}),this.darkBgContainer.addChild(this.darkBg),this.darkBg.visible=!0}},{key:"SetShineEffect",value:function(){var t=this,e=new c("2");e.SetFrame(193),e.visible=!1,e.position.set(APP.GetWidth()/2,APP.GetHeight()/2-100),StateIngame.shineContainer.addChild(e),e.scale.set(0),this.tweenMgr.Create(e,f.CUBIC_EASE_IN,{x:e.x,y:e.y,scale:0},{x:e.x,y:e.y,scale:1.5},.4,0),this.tweenMgr.SetCallback(e,function(){t.tweenMgr.Remove(e),e.visible=!1,StateIngame.shineContainer.removeChild(e)}),e.visible=!0}},{key:"SetText",value:function(t,e){this.mText.visible=!0,this.mText.text=t,this.mText.style=e}},{key:"SetScoreTexture",value:function(t,e,i,n){this.mScoreTexture.SetNumber(t,e,i,n)}},{key:"SetAnimation",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];void 0==this.mAnimation?this.mAnimation=new u(t):this.mAnimation.spriteIndex!=t&&(this.mAnimation.parent.removeChild(this.mAnimation),this.mAnimation=new u(t)),this.mAnimation.visible=!0,this.mAnimation.SetAnim(e,i),this.addChild(this.mAnimation)}},{key:"SetArrPosition",value:function(t,e,i){this.mArrPositionX=t,this.mArrPositionY=e,this.mArrPositionZ=i}},{key:"SetArrAlpha",value:function(t){this.mArrAlpha=t}},{key:"SetArrScale",value:function(t){this.mArrScale=t}},{key:"_UpdateInactive",value:function(){(this.mPercent>=1||this.mPosition.z<=Camera.GetPosition().z)&&this._SetState(this.STATE.INACTIVE)}}]),e}(h);t.exports=p},function(t,e,i){"use strict";(function(e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(263),h=i(31),u=i(38),l=i(58),c=function(t){function i(){n(this,i);var t=r(this,(i.__proto__||Object.getPrototypeOf(i)).call(this)),e=0;return t.STATE={},t.STATE.INIT=e++,t.STATE.NORMAL=e++,t.STATE.POPUP_BEFORE_FORM=e++,t.STATE.FORM=e++,t.STATE.POPUP_AFTER_SUBMIT_FORM=e++,e=0,t.GAMEOVER_STATE_REWARD_NONE=e++,t.GAMEOVER_STATE_REWARD_WAITING=e++,t.GAMEOVER_STATE_REWARD_DELIVERED=e++,t.GAMEOVER_STATE_REWARD_FAILED=e++,t.rewardTimeout=4,t.mState,t.tweenMgr=new u,t.btnRetry=null,t.btnClose=null,t.btnCheckNow=null,t.tfReward=null,t.token=null,t.info=null,t.rewardState=0,t.isSendingTracking=!1,t.redirectLink="",t.lostConnectionContainer=new PIXI.Container,t.mIsFirstInit=!0,t.sound_bg=null,t}return a(i,t),o(i,[{key:"Load",value:function(){APP.AddChild(this),APP.Align(this),this._SetState(this.STATE.INIT),window.parent.postMessage("show_hide_policy","*")}},{key:"_SetState",value:function(t){switch(this.mState=t,this.mState){case this.STATE.INIT:if(Utils.IsOnDevie()||APP.EnableDebugLayer(!0),this.mIsFirstInit){this.btnRetry=GuiManager.GetGui(12).GetObject(37),this.btnClose=GuiManager.GetGui(12).GetObject(36),this.btnCheckNow=GuiManager.GetGui(12).GetObject(1),this.tfReward2=GuiManager.GetGui(12).GetObject(20+window.languageIndex),this.congra=GuiManager.GetGui(12).GetObject(44+window.languageIndex),this.tfReward2.visible=!1,GuiManager.GetGui(12).GetObject(14).text="",GuiManager.GetGui(12).GetObject(25).text="",this.lostConnectionContainer.visible=!1,this.darkBg=new PIXI.Graphics,this.darkBg.beginFill(0,.5),this.darkBg.drawRect(0,0,APP.GetWidth(),APP.GetHeight()),this.darkBg.endFill(),this.popupBG=GuiManager.GetGui(12).GetObject(19).Clone(),this.btnConfirm=GuiManager.GetGui(12).GetObject(26).Clone(),this.popupBG.position=GuiManager.GetGui(12).GetObject(19).position,this.btnConfirm.position=GuiManager.GetGui(12).GetObject(26).position,this.okTxt=GuiManager.GetGui(12).GetObject(27+window.languageIndex).Clone(),this.okTxt.position=GuiManager.GetGui(12).GetObject(27+window.languageIndex).position,this.lostConnectionContainer.addChild(this.darkBg,this.popupBG,this.btnConfirm,this.tfReward2,this.okTxt);var i=GuiManager.GetGui(12).GetObject(2+window.languageIndex).Clone();i.SetFrame(21),GuiManager.GetGui(12).GetObject(38+window.languageIndex).SetFrame(21);var n=GuiManager.GetGui(12).GetObject(2+window.languageIndex).Clone();n.visible=!0,this.btnCheckNow.addChild(n),this.btnCheckNow.scale.set(.8,.8),this.btnRetry.addChild(i),this.mPopupFillBackground=new PIXI.Graphics,this.mPopupFillBackground.clear(),this.mPopupFillBackground.beginFill(0,.8),this.mPopupFillBackground.drawRect(0,0,APP.GetWidth(),APP.GetHeight()),this.mPopupFillBackground.endFill(),this.mGuiPopup=GuiManager.GetGui(10),APP.GetHeight()/APP.GetWidth()>=2&&(GuiManager.GetGui(12).GetObject(32).y+=80)}this.congra.visible=!0,TrackingManager.SetScoreParam(StateIngame.GetScore()),this.indexText=window.languageIndex,StateIngame.GetWin()?this.congra.SetFrame(24):this.congra.SetFrame(25),this.rewardTimeout=4,this.isSendingTracking=!1,this.btnConfirm.SetTouchable(!0),this.btnRetry.SetTouchable(!0),this.btnRetry.cursor="pointer",this.btnClose.SetTouchable(!0),this.btnCheckNow.SetTouchable(!0);GLText.GetText(4).replace("%d",StateIngame.GetScore());GuiManager.GetGui(12).GetObject(15).text="";var r=GuiManager.GetGui(12).GetObject(8+window.languageIndex);r.visible=!0,this.info=GuiManager.GetGui(12).GetObject(7),this.info.x=r.x-r.width/2-20,this.info.interactive=!0;var a=void 0;a=window.country_version?window.country_version.toLowerCase()+"_redirect":Resource.GetParam("aut_redirect"),this.redirectLink=Resource.GetParam(a),this.redirectLink&&(this.redirectLink=this.redirectLink.replace("[timestamp]",Date.now())),StateIngame.IsGotReward()?this.SetRewardState(this.GAMEOVER_STATE_REWARD_NONE):this.SetRewardState(this.GAMEOVER_STATE_REWARD_WAITING),window.notifyGameComplete&&window.notifyGameComplete(),this.bg=new PIXI.Sprite(LoaderCustom2.resources.imgGameover.texture),this.bg.anchor.set(.5,.5),this.bg.position.set(APP.GetWidth()/2,APP.GetHeight()/2),this.addChild(this.bg),this.addChild(GuiManager.GetGui(12)),this.addChild(Utils.advertisement),this.addChild(this.mPopupFillBackground),this.addChild(this.mGuiPopup),this.addChild(this.lostConnectionContainer),GameDefine.StopAllSound(),GameDefine.PlaySound(2),this.mIsFirstInit=!1;break;case this.STATE.NORMAL:this.mPopupFillBackground.visible=!1,this.mGuiPopup.visible=!1;break;case this.STATE.POPUP_BEFORE_FORM:this.mPopupFillBackground.visible=!0,this.mGuiPopup.visible=!0;break;case this.STATE.FORM:this.mPopupFillBackground.visible=!1,this.mGuiPopup.visible=!1,void 0==e.FormMgr&&(e.FormMgr=new s),FormMgr.Init(),FormMgr.Active();break;case this.STATE.POPUP_AFTER_SUBMIT_FORM:}this.tweenMgr.RemoveAll(),this.tweenMgr.Create(this.btnRetry,h.EXPONENTIAL_IN,{scale:1.2},{scale:1},1,0),this.tweenMgr.Create(this.btnRetry,h.EXPONENTIAL_OUT,{scale:1},{scale:1.2},1,0),this.tweenMgr.SetLoop(this.btnRetry,-1)}},{key:"Update",value:function(t){switch(l.Update(t),this.tweenMgr.Update(t),this.mState){case this.STATE.INIT:this._SetState(GameDefine.gIsShowForm?this.STATE.POPUP_BEFORE_FORM:this.STATE.NORMAL);break;case this.STATE.NORMAL:case this.STATE.POPUP_BEFORE_FORM:break;case this.STATE.FORM:FormMgr.Update(t),FormMgr.IsExit()?this._SetState(this.STATE.NORMAL):FormMgr.IsFinish()&&this._SetState(this.STATE.POPUP_AFTER_SUBMIT_FORM);break;case this.STATE.POPUP_AFTER_SUBMIT_FORM:}if(!Utils.IsOnDevie()){var e=APP.debugLayer;if(e.clear(),e.lineStyle(2,16711680,1),window._show_touchzone){var i=this.btnClose.GetTransformRect();e.drawRect(i.x,i.y,i.width,i.height),i=this.btnRetry.GetTransformRect(),e.drawRect(i.x,i.y,i.width,i.height),i=this.btnCheckNow.GetTransformRect(),e.drawRect(i.x,i.y,i.width,i.height),i=this.info.GetTransformRect(),e.drawRect(i.x,i.y,i.width,i.height)}}}},{key:"TouchHandler",value:function(t){switch(this.mState){case this.STATE.NORMAL:switch(t.target){case this.btnRetry:Input.IsTouchUp(t)&&(this.isSendingTracking||(GameDefine.PlaySound(22),window.parent.postMessage("site_hide_policy","*"),TrackingManager.SendEventTracking(TrackingManager.TRACKING_ACTION_REPLAY),gIngameTimeSpent=0,StateManager.SwitchState(StateIngame),this.btnRetry.interactive=!1));break;case this.btnClose:Input.IsTouchUp(t)&&(Utils.SendTrackingAndExit(),this.btnClose.interactive=!1);break;case this.btnCheckNow:Input.IsTouchUp(t)&&(this.OpenProductLink(),this.btnCheckNow.interactive=!1);break;case this.info:Input.IsTouchUp(t)&&(this.info.interactive=!1,Utils.RedirectInfo("Endscreen"));break;case this.btnConfirm:Input.IsTouchUp(t)&&(this.lostConnectionContainer.visible=!1,this.popupBG.visible=!1,this.tfReward2.visible=!1,this.btnConfirm.visible=!1,this.okTxt.visible=!1,this.btnCheckNow.SetTouchable(!0),this.btnClose.SetTouchable(!0),this.btnRetry.SetTouchable(!0),this.info.interactive=!0)}break;case this.STATE.POPUP_BEFORE_FORM:switch(t.target){case this.mGuiPopupButtonExit:Input.IsTouchUp(t)&&this._SetState(this.STATE.NORMAL);break;case this.mGuiPopupButton01:Input.IsTouchUp(t)&&this._SetState(this.STATE.FORM)}break;case this.STATE.FORM:break;case this.STATE.POPUP_AFTER_SUBMIT_FORM:switch(t.target){case this.mGuiPopupButtonExit:Input.IsTouchUp(t)&&this._SetState(this.STATE.NORMAL);break;case this.mGuiPopupButton02:Input.IsTouchUp(t)&&(this.OpenProductLink(),this.btnCheckNow.interactive=!1,this._SetState(this.STATE.NORMAL))}}}},{key:"Resize",value:function(){Helper.UpdateGuiAnchor(GuiManager.GetGui(12))}},{key:"Unload",value:function(){this.btnRetry.interactive=!1,this.btnClose.interactive=!1,this.btnCheckNow.interactive=!1,this.removeChildren(0,this.children.length),APP.RemoveChild(this),Utils.IsOnDevie()||APP.DisableDebugLayer()}},{key:"Resume",value:function(){this.isSendingTracking&&(this.isSendingTracking=!1,this.btnCheckNow.interactive=!0),this.info.interactive=!0}},{key:"Pause",value:function(){}},{key:"OpenProductLink",value:function(){try{window.DEBUG||window.REVIEW?window.open(this.redirectLink):this.isSendingTracking||(this.isSendingTracking=!0,TrackingManager.SendEventTracking(TrackingManager.TRACKING_ACTION_CLICK_THROUGHTS_START),TrackingManager.SendEventTracking(TrackingManager.TRACKING_ACTION_CLICK_THROUGHTS,null,"N/A",this.redirectLink))}catch(t){Utils.Log("Error: "+t.message)}}},{key:"SetRewardState",value:function(t){switch(t){case this.GAMEOVER_STATE_REWARD_NONE:case this.GAMEOVER_STATE_REWARD_WAITING:this.tfReward2.visible=!1;break;case this.GAMEOVER_STATE_REWARD_DELIVERED:this.tfReward2.visible=!1,StateIngame.GotReward();break;case this.GAMEOVER_STATE_REWARD_FAILED:this.lostConnectionContainer.visible=!0,this.btnConfirm.visible=!0,this.popupBG.visible=!0,this.okTxt.visible=!0,this.tfReward2.visible=!0,this.btnCheckNow.SetTouchable(!1),this.btnRetry.SetTouchable(!1),this.btnClose.SetTouchable(!1),this.info.interactive=!1}this.rewardState=t}},{key:"UpdateReward",value:function(t){this.rewardState==this.GAMEOVER_STATE_REWARD_WAITING&&this.rewardTimeout>0&&(t>1&&(t=0),this.rewardTimeout-=t,this.rewardTimeout<0?this.SetRewardState(this.GAMEOVER_STATE_REWARD_FAILED):"undefined"!=typeof reward_delivered&&1==reward_delivered&&this.SetRewardState(this.GAMEOVER_STATE_REWARD_DELIVERED))}},{key:"Exit",value:function(){if(window.call_client){var t=Utils.OMSGetProductLink();t&&(t=t.replace("[timestamp]",Date.now())),call_client(window.creative_id,"GLADS_CLICK_INTERSTITIAL","click",0,0,"","link:"+t)}}}]),i}(PIXI.Container);t.exports=new c}).call(e,i(21))},function(t,e,i){"use strict";(function(e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(276),h=i(290),u=i(289),l=i(282),c=i(283),f=i(285),d=i(278),p=(i(279),i(287)),m=i(294),v=i(78),g=i(277),y=function(t){function y(){n(this,y);var t=r(this,(y.__proto__||Object.getPrototypeOf(y)).call(this));t.interactive=!0,t.hitArea=new PIXI.Rectangle(0,0,0,0),t.circleMask=new PIXI.Graphics,t.timerBorder=new Timer;var e=0;return t.STATE={},t.STATE.TUTORIAL=e++,t.STATE.PLAYING=e++,t.STATE.TIME_UP=e++,t.STATE.SHOW_COMIC=e++,t.STATE.END=e++,t.btnExit,t.mTextScore,t.isFirstLaunch=!0,t.isGotReward=!1,t.mState,t.mPercent,t.mTimer,t.mAlertTime,t.mScore,t.firstTime=!0,t.mCountDt,t.isDoneTimerSound=!1,t.isWin=!1,t.oldTimer=0,t.time_spawn_kayta=GameDefine.POWER_FULL_1_KAYTANA,t.time_check_again=GameDefine.TIME_CHECK_AGAIN,t.index_time_spawn=0,t.isSpawnSpecial=!1,t.timeDuration=0,t.timeSet=0,t.stopBgMusic=!1,t.timesRespawn=0,t.shineContainer=new PIXI.Container,t.levelRand=0,t}return a(y,t),o(y,[{key:"Load",value:function(){APP.AddChild(this),APP.Align(this),this.Resize(),this.isWin=!1,this.stopBgMusic=!1,this.isSpawnSpecial=!1,this.isFirstTime=!0,this.isDoneTimerSound=!1,this.time_spawn_kayta=GameDefine.POWER_FULL_1_KAYTANA,this.time_check_again=GameDefine.TIME_CHECK_AGAIN,this.index_time_spawn=0,this.circleMask.clear(),this.timesRespawn=0,this.timeSet=0,this.timeDuration=0,this.isFirstLaunch&&(this.mGui=GuiManager.GetGui(5),this.btnExit=this.mGui.GetObject(11),this.btnExit.SetTouchable(!0),this.mTextScore=this.mGui.GetObject(10),e.Scene=new h,e.UIContainer=new PIXI.Container,e.Camera=new s,e.Player=new u,e.LevelDefine=new l,e.LevelMgr=new c,e.ObjectMgr=new f,e.Debug=new d,e.ParticleMgr=new p,e.TutorialMgr=new m,this.score_texture=new v,this.timer_texture=new v,this.comicEffect=new g),GameDefine.mVideoBg.style.visibility="visible",GameDefine.ImgVideoBg.style.visibility="visible",this.mCountDt=0,this.ResetScore(),this.mTimer=GameDefine.GAME_TIMEOUT,this.mAlertTime=GameDefine.GAME_TIMER_WARNING;var t=GuiManager.GetGui(5).GetObject(22);GuiManager.GetGui(5).GetObject(7),GuiManager.GetGui(5).GetObject(8);this.hud=GuiManager.GetGui(5).GetObject(23),ObjectDefine.UpdateObjectInfor(),Scene.Init(),Camera.Init(),this.score_texture.Init(),this.timer_texture.Init(),t.addChild(this.score_texture),this.ResetScore(),Player.SetInfor(ObjectDefine.CHARACTER_INFOR.ARR_INFOR[ObjectDefine.CHARACTER_INFOR.currentIndex]),Player.Init(),this.comicEffect.Init(),ObjectMgr.Init(),ParticleMgr.Init(),TutorialMgr.Init(),GameDefine.mVideoBg.play(),GameDefine.mVideoBg.playbackRate=1,GuiManager.GetGui(5).GetObject(19).visible=!1,GuiManager.GetGui(5).GetObject(20).visible=!1,GuiManager.GetGui(5).GetObject(21).visible=!1,this.isFirstLaunch&&(this.addChild(Scene),this.addChild(UIContainer),this.addChild(Debug),this.addChild(this.mGui),this.addChild(TutorialMgr),this.addChild(this.timer_texture),this.addChild(this.circleMask),this.addChild(this.shineContainer),this.addChild(this.comicEffect)),this.hud_filled=GuiManager.GetGui(5).GetObject(6),this.hud_filled.mask=this.circleMask,this.addChild(Utils.advertisement),GameDefine.PlaySound(0,!0),this.isFirstLaunch&&this.IsNewUser()?this._SetState(this.STATE.TUTORIAL):this._SetState(this.STATE.PLAYING),this.Resize(),GuiManager.GetGui(5).GetObject(6).SetFrame(147),this.Localization()}},{key:"Localization",value:function(){GuiManager.GetGui(5).GetObject(0+window.languageIndex).visible=!0}},{key:"_SetState",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];switch(this.mState=t,this.mState){case this.STATE.TUTORIAL:this.btnExit.visible=!1,TutorialMgr.Active(),Scene.Active(),Camera.Active(),Player.Active(),LevelMgr.AddModuleTutorial(),ObjectMgr.Active(),ParticleMgr.Active();break;case this.STATE.PLAYING:ObjectMgr.ratio_spawn_katana=GameDefine.RATIO_TO_SPAWN_KAYTANA_AFTER_TUTORIAL,this._StartGame(),Scene.Active(),Camera.Active(),Player.Active(),LevelMgr.RemoveModuleTutorial(),ObjectMgr.Active(),ParticleMgr.Active();break;case this.STATE.TIME_UP:if(!this.isFirstTime)return;this.isWin=i,this.levelRand++,this.isWin?(Player.ACCELE_Z=30,GameDefine.mVideoBg.playbackRate=2,Player.mAnimation.SetAnim(Player.INFOR.ANIM_FASTER,!0)):(Player.ACCELE_Z=-10,GameDefine.mVideoBg.playbackRate=.5),this.isFirstTime=!1,this.mPercent=0,setTimeout(function(){ParticleMgr.SetTextTimeUp(e)},500);break;case this.STATE.END:GameDefine.mVideoBg.pause(),this.isWin?(this.comicEffect.SetActive(),this.btnExit.visible=!1):this._EndGame()}}},{key:"Update",value:function(t){gIngameTimeSpent+=t;for(var e=Math.ceil(t/.05),i=t/e,n=0;n<e;n++)this._FixUpdate(i)}},{key:"_FixUpdate",value:function(t){switch(this.comicEffect.Update(t),Debug.Clear(),this.mState){case this.STATE.END:break;case this.STATE.TUTORIAL:TutorialMgr.Update(t),this._UpdateTime(0),GuiManager.Update(5,t),TutorialMgr.IsUpdateObject()&&Player.Update(t),ObjectMgr.Update(t),Camera.Update(t),Scene.Update(t),ParticleMgr.Update(t),TutorialMgr.IsFinish()&&this._SetState(this.STATE.PLAYING);break;case this.STATE.PLAYING:this._UpdateTime(t),GuiManager.Update(5,t),Player.Update(t),ObjectMgr.Update(t),Camera.Update(t),Scene.Update(t),ParticleMgr.Update(t),this.mTimer<=0&&this._SetState(this.STATE.TIME_UP,!0);break;case this.STATE.TIME_UP:var e=ObjectMgr.GetArrItem(),i=!0,n=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){var s=a.value;s.mState!=s.STATE.COLLISION_WITH_PLAYER&&s.visible&&s.SetStateCollisionWithPlayer()}}catch(t){n=!0,r=t}finally{try{!i&&o.return&&o.return()}finally{if(n)throw r}}var h=ObjectMgr.GetArrObstacle(),u=!0,l=!1,c=void 0;try{for(var f,d=h[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var p=f.value;p.mState!=p.STATE.COLLISION_WITH_PLAYER&&p.visible&&p.mAnimation.SetAnim(0)}}catch(t){l=!0,c=t}finally{try{!u&&d.return&&d.return()}finally{if(l)throw c}}this.mPercent=GameDefine.MoveToTarget(this.mPercent,1,1/3,t),this._UpdateTime(0),GuiManager.Update(5,t),Player.Update(t),ObjectMgr.Update(t),Camera.Update(t),Scene.Update(t),ParticleMgr.Update(t),this.mPercent>=1&&this._SetState(this.STATE.END);break;case this.STATE.END:}Debug.Update(t)}},{key:"TouchHandler",value:function(t){if(!DeviceInfo.isBrowser){switch(t.target){case this.btnExit:Input.IsTouchUp(t)&&this.Back();break;default:switch(this.mState){case this.STATE.TUTORIAL:TutorialMgr.TouchHandler(t);break;case this.STATE.PLAYING:case this.STATE.TIME_UP:Player.TouchHandler(t);break;case this.STATE.END:}}this.comicEffect.visible&&this.comicEffect.TouchHandler(t)}}},{key:"KeyHandler",value:function(t){if(DeviceInfo.isBrowser)switch(t.target,this.mState){case this.STATE.TUTORIAL:TutorialMgr.KeyHandler(t);break;case this.STATE.PLAYING:case this.STATE.TIME_UP:Player.KeyHandler(t);break;case this.STATE.END:}}},{key:"Unload",value:function(){APP.RemoveChild(this),e.spawnSpecial&&(clearInterval(e.spawnSpecial),e.spawnSpecial=null)}},{key:"Pause",value:function(){switch(this.stopBgMusic||GameDefine.PauseSound(0),Player.Pause(),this.comicEffect.Pause(),this.mState){case this.STATE.TUTORIAL:TutorialMgr.Pause();break;case this.STATE.PLAYING:case this.STATE.TIME_UP:GameDefine.mVideoBg.pause();break;case this.STATE.END:}}},{key:"Resume",value:function(){switch(this.stopBgMusic||GameDefine.PlaySound(0,!0),Player.Resume(),this.comicEffect.Resume(),this.mState){case this.STATE.TUTORIAL:TutorialMgr.Resume();break;case this.STATE.PLAYING:case this.STATE.TIME_UP:GameDefine.mVideoBg.play();break;case this.STATE.END:}}},{key:"Back",value:function(){if(this.isFirstLaunch){this.Pause();var t=i(106);StateManager.PushState(t)}else Utils.SendTrackingAndExit()}},{key:"Resize",value:function(){this.hitArea.x=0,this.hitArea.y=0,this.hitArea.width=APP.GetWidth(),this.hitArea.height=APP.GetHeight(),GameDefine.UpdateRotateVideo(),GameDefine.UpdateParams();var t={dataName:"mig_resize",rotation:APP.rotation};window.parent.postMessage(t,"*"),Helper.UpdateGuiAnchor(GuiManager.GetGui(5))}},{key:"GetScore",value:function(){return this.mScore}},{key:"GetWin",value:function(){return this.isWin}},{key:"ResetScore",value:function(){this.mScore=0,this._UpdateTextScore(this.mScore)}},{key:"AddScore",value:function(t){this.mScore=Math.max(this.mScore+t,0),this._UpdateTextScore(this.mScore)}},{key:"GotReward",value:function(){this.isGotReward=!0}},{key:"IsGotReward",value:function(){return this.isGotReward}},{key:"IsNewUser",value:function(){return window.DEBUG||window.REVIEW?!GameDefine.IS_SKIP_TUTORIAL:GameConfig.isNewUser}},{key:"GetTime",value:function(){return this.mTimer}},{key:"_UpdateTime",value:function(t){this.mTimer=Math.max(this.mTimer-t,0),this.mTimer<=this.mAlertTime&&this.mTimer>0&&(this.mAlertTime--,this.isDoneTimerSound||(this.isDoneTimerSound=!0));var e=""+Math.ceil(this.mTimer);Math.ceil(this.mTimer)!=this.oldTimer&&(this.oldTimer=Math.ceil(this.mTimer),this._UpdateTextTimer(this.mTimer)),this.mGui.GetObject(9).text=e}},{key:"_EndGame",value:function(){if(this.mScore=Player.ITEMS_COLLECT,TrackingManager.SetScoreParam(this.GetScore()),this.isWin)StateManager.SwitchState(StateIngame2);else{if(!this.isGotReward)try{saveReward(),this.isFirstLaunch&&(gIngameTimeSpent=gTotalTimeSpent)}catch(t){Utils.Log("ERROR!!!: save the reward fail: "+t.message)}this.isFirstLaunch=!1,StateManager.SwitchState(StateGameOver),TrackingManager.SendEventTracking(TrackingManager.TRACKING_ACTION_COMPLETE_ENGAGEMENTS)}GameDefine.mVideoBg.setAttribute("style","visibility: hidden"),GameDefine.ImgVideoBg.setAttribute("style","visibility: hidden")}},{key:"_StartGame",value:function(){this.IsNewUser(),this.btnExit.visible=!0}},{key:"_UpdateTextScore",value:function(t){var e=0;t>=10&&(e=-10),this.score_texture.SetNumber(t,"2",GameDefine.SCORE_TEXTURE_ARR_SIGN_ID,GameDefine.SCORE_TEXTURE_ARR_NUMBER_ID_STYLE_01),this.score_texture.scale.set(1.1),this.score_texture.position.set(e,9)}},{key:"_UpdateTextTimer",value:function(t){this.timer_texture.SetNumber(t,"2",GameDefine.SCORE_TEXTURE_ARR_SIGN_ID,GameDefine.SCORE_TEXTURE_ARR_NUMBER_ID_STYLE_01),this.timer_texture.scale.set(1.1),this.timer_texture.position.x=this.hud.position.x-9,this.timer_texture.position.y=this.hud.position.y+6}}]),y}(PIXI.Container);t.exports=new y}).call(e,i(21))},function(t,e,i){"use strict";(function(e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(64),h=i(76),u=(i(46),i(77)),l=i(45),c=function(t){function i(){n(this,i);var t=r(this,(i.__proto__||Object.getPrototypeOf(i)).call(this)),e=0;return t.STATE_LOAD_NONE=e++,t.STATE_LOAD_IMAGE=e++,t.STATE_LOAD_SPRITE=e++,t.STATE_LOAD_GUI=e++,t.STATE_LOAD_SOUND=e++,t.STATE_LOAD_VIDEO=e++,t.STATE_LOAD_FINISHED=e++,t.background=new PIXI.Container,t.foreground=new PIXI.Container,t.decoration=new PIXI.Container,t.txtTitle=null,t.txtLostConnect=null,t.loadingState=0,t.loadingTime=0,t.loadingTimeOut=30,t.loadingBg=null,t.loadingIcon=null,t.btnRetry=null,t.btnExit=null,t.bg=null,t.mBlackBg=new PIXI.Graphics,t.addChild(t.background),t.addChild(t.foreground),t.addChild(t.decoration),t.interactive=!0,t.loadingError=t.LoadingError.bind(t),document.addEventListener("LoadingError",t.loadingError),t}return a(i,t),o(i,[{key:"Load",value:function(){var t=(PIXI.loaders.Resource.LOAD_TYPE.IMAGE,{loadType:PIXI.loaders.Resource.LOAD_TYPE.XHR});APP.AddChild(this),APP.Align(this),0==gLoadingTimeSpent&&(gLoadingTimeSpent=gTotalTimeSpent),LoaderCustom1.removeAllListeners(),PIXI.loader.removeAllListeners(),PIXI.loader.reset();Utils.OMSGetImage("bg_comic.jpg"),Utils.OMSGetImage("bg.jpg"),Utils.OMSGetImage("game.png"),Utils.OMSGetImage("game1.png"),Utils.OMSGetImage("game2.png"),Utils.OMSGetImage("mc.png"),this.GetLanguageImg(),Utils.OMSGetImage("gameover.jpg");this.btnExit=GuiManager.GetGui(2).GetObject(5),this.txtTitle=GuiManager.GetGui(2).GetObject(0),this.loadingIcon=GuiManager.GetGui(2).GetObject(1),this.txtLostConnect=GuiManager.GetGui(2).GetObject(9),this.btnRetry=GuiManager.GetGui(2).GetObject(6),this.txtRetry=GuiManager.GetGui(2).GetObject(7),this.txtTitle.style.fontFamily=GameConfig.fontList.MainFont,this.txtRetry.style.fontFamily=GameConfig.fontList.MainFont,this.txtLostConnect.visible=!1,this.btnRetry.visible=!1,this.btnExit.visible=!1,this.txtRetry.visible=!1,this.loadingTime=0,this.loadingState=this.STATE_LOAD_IMAGE,this.btnRetry.SetTouchable(!0),this.btnExit.SetTouchable(!0),this.decoration.removeChildren(0,this.decoration.children.length),this.decoration.addChild(GuiManager.GetGui(2)),AudioManager.Load(AudioManager.IsSupportAudioAPI()?DataDefine.SOUNDS_INFO:DataDefine.SINGLE_SOUNDS_INFO),this.info=GuiManager.GetGui(2).GetObject(4),this.info.SetTouchable(!0),this.info.visible=!1,Utils.PauseHostGameMusic(),this.Resize();var e=new PIXI.Text,i=new PIXI.TextStyle({align:"center",fontFamily:GameConfig.fontList.MainFont,fontSize:14,fill:"#ffffff"});switch(window.languageIndex){case 0:break;case 1:e.text="Copyright 2012 Google Inc. All Rights Reserved.\nThis Font Software is licensed under the SIL Open Font License, Version 1.1.\nThis license is available with a FAQ at: http://scripts.sil.org/OFL",e.style=i,e.pivot.set(e.width/2,e.height),e.position.set(APP.GetWidth()/2,APP.GetHeight()-20),this.decoration.addChild(e);break;case 2:e.text="NotoSansKR-.otf: \nCopyright 2014, 2015 Adobe Systems Incorporated (http://www.adobe.com/).\nThis Font Software is licensed under the SIL Open Font License, Version 1.1.\nThis license is available with a FAQ at: http://scripts.sil.org/OFL",e.style=i,e.pivot.set(e.width/2,e.height),e.position.set(APP.GetWidth()/2,APP.GetHeight()-20),this.decoration.addChild(e);break;case 3:case 4:e.text="NotoSansSC-.otf: \nCopyright 2014, 2015 Adobe Systems Incorporated (http://www.adobe.com/).\nThis Font Software is licensed under the SIL Open Font License, Version 1.1.\nThis license is available with a FAQ at: http://scripts.sil.org/OFL",e.style=i,e.pivot.set(e.width/2,e.height),e.position.set(APP.GetWidth()/2-10,APP.GetHeight()-20),this.decoration.addChild(e)}window.languageIndex,window.parent.postMessage("site_hide_policy","*"),this.isLoadSprite=!1}},{key:"GetLanguageImg",value:function(){var t="char_select_end";return window.languageText&&"EN"!=window.languageText&&(t+="_"+window.languageText.toLowerCase()),t+=".png",Utils.OMSGetImage(t)}},{key:"Unload",value:function(){APP.RemoveChild(this),this.foreground.removeChild(Utils.advertisement),document.removeEventListener("LoadingError",this.loadingError)}},{key:"Back",value:function(){this.btnRetry.visible&&Utils.SendTrackingAndExit()}},{key:"Update",value:function(t){if(this.btnRetry.visible||(gLoadingTimeSpent+=t),this.loadingTime<this.loadingTimeOut){if(this.loadingTime+=t,this.loadingTime>=this.loadingTimeOut)return void this.LoadErrorHandler();switch(e.isLoaded3&&!this.isLoadSprite&&(this.isLoadSprite=!0,this.LoadSprite()),this.loadingState){case this.STATE_LOAD_IMAGE:case this.STATE_LOAD_SPRITE:case this.STATE_LOAD_GUI:break;case this.STATE_LOAD_SOUND:AudioManager.IsLoaded(t)&&("1"===window.iv_location_type&&Utils.DispatchEvent("touchstart"),this.loadingState=this.STATE_LOAD_VIDEO);break;case this.STATE_LOAD_VIDEO:this._IsVideoLoaded()&&GameDefine.ImgVideoBg.mIsLoadedData&&(this.loadingState=this.STATE_LOAD_FINISHED);break;case this.STATE_LOAD_FINISHED:TrackingManager.SendEventTracking(TrackingManager.TRACKING_ACTION_ENDGAMENTS_LOADING_COMPLETE),APP.removeChild(APP.fadeEffect),GameConfig.isHostGamePortrait?(APP.fadeEffect=new PIXI.Sprite(LoaderCustom1.resources.imgBg1.texture),APP.fadeEffect.anchor.set(.5,.5),APP.fadeEffect.position.set(APP.GetWidth()/2,APP.GetHeight()/2)):(APP.fadeEffect=new PIXI.Sprite(LoaderCustom1.resources.imgBg1.texture),APP.fadeEffect.rotation=Math.PI/2,APP.fadeEffect.anchor.set(.5,.5),APP.fadeEffect.position.set(APP.renderer.width/2,APP.renderer.height/2)),APP.addChild(APP.fadeEffect),window.isMuteAudio?muteAudio():unmuteAudio(),StateManager.SwitchState(StateSelectCharacter),this.loadingState=this.STATE_LOAD_NONE}this.loadingIcon,GuiManager.GetGui(2).Update(t)}}},{key:"LoadProgressHandler",value:function(t,e){Utils.Log("StateLoading loading: "+e.name),Utils.Log("StateLoading progress: "+t.progress+"%"),e.name,Resource.RevokeObjectURL(e.url)}},{key:"LoadErrorHandler",value:function(t){Utils.Log("LoadErrorHandler: "+t),window.parent.postMessage("mig_loading_failed","*"),this.txtTitle.visible=!1,this.loadingIcon.visible=!1,this.txtLostConnect.visible=!0,this.btnRetry.visible=!0,this.btnExit.visible=!0,this.txtRetry.visible=!0}},{key:"LoadCompleteHandler",value:function(){this.LoadSprite()}},{key:"LoadSprite",value:function(){var t=this;Resource.GetAssetData(Utils.OMSGetGuiData("2.dat")).then(function(e){var i=LoaderCustom2.resources;h.Load(e);for(var n=[i.imgRoad.texture,i.imgGame1.texture,i.imgGame2.texture,i.MC.texture,i.MC.texture,i.charSelect.texture,i.charSelect.texture,i.charSelect.texture,i.charSelect.texture,i.charSelect.texture,i.imgGame.texture,i.imgGameover.texture],r="1";r<="12";r++){var a=u.Load(h.GetData(r-"1"));l.Add(r,n[r-"1"],a)}h.Close(),t.LoadGui()}).catch(function(e){return t.LoadingError(e)}),this.loadingState=this.STATE_LOAD_SPRITE}},{key:"LoadGui",value:function(){var t=this;Resource.GetAssetData(Utils.OMSGetGuiData("3.dat")).then(function(e){PIXI.loader.resources;h.Load(e);for(var i=3;i<=12;i++){var n=new s;n.Load(h.GetData(i-3)),GuiManager.Add(i,n)}h.Close(),t.loadingState=t.STATE_LOAD_SOUND}).catch(function(e){return t.LoadingError()}),this.loadingState=this.STATE_LOAD_GUI}},{key:"LoadingError",value:function(t){this.LoadErrorHandler(t)}},{key:"TouchHandler",value:function(t){switch(t.target){case this.btnRetry:Input.IsTouchUp(t)&&(this.txtTitle.visible=!0,this.loadingIcon.visible=!0,this.txtLostConnect.visible=!1,this.btnRetry.visible=!1,this.btnExit.visible=!1,StatePreLoad.ReLoad());break;case this.btnExit:Input.IsTouchUp(t)&&Utils.SendTrackingAndExit()}}},{key:"Resize",value:function(){void 0!=this.mBlackBg&&this.mBlackBg.visible&&(this.mBlackBg.clear(),this.mBlackBg.beginFill(0,1),this.mBlackBg.drawRect(0,0,APP.GetWidth(),APP.GetHeight()),this.mBlackBg.endFill()),Helper.UpdateGuiAnchor(GuiManager.GetGui(2))}},{key:"_IsVideoLoaded",value:function(){return void 0!=GameDefine.mVideoBg&&GameDefine.mVideoBg.mIsLoadedData&&GameDefine.mVideoBg.mIsCanPlayThrough}}]),i}(PIXI.Container);t.exports=new c}).call(e,i(21))},function(t,e,i){"use strict";(function(e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(76),h=i(46),u=i(77),l=i(45),c=i(64),f=(i(17),i(14),i(31)),d=i(38);e.StateSelectCharacter=i(301),e.StateIngame2=i(300),e.StateEndImage=i(299),e.GameDefine2=i(269);var p=i(292),m=function(t){function i(){n(this,i);var t=r(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return t.background=new PIXI.Container,t.foreground=new PIXI.Container,t.decoration=new PIXI.Container,t.decorationTop=new PIXI.Container,t.splash=null,t.btnExit=null,t.token=null,t.info=null,t.infoClicked=!1,t.isLoaded=!1,t.interactive=!0,t.isClicked=!0,t.tweenMgr=new d,t.mIsLoadedMainFont=!1,t.mIsLoadedTitleFont=!1,t.mButtonPlay,t.currentBg=null,t.currentIndexBg=0,t.arrGlitch=[],t.spinePreload=null,t.animIdBg={},t.attachmentReplace={},t.slotCTA=["CTA_EN","CTA_JP","CTA_KR","CTA_TW","CTA_HK"],t.slotLevelUp=["Headline_EN","Headline_JP","Headline_KR","Headline_TW","Headline_TW"],t.glitchContainer=new PIXI.Container,t.tokenContainer=new PIXI.Container,t.addChild(t.background),t.addChild(t.foreground),t.addChild(t.decoration),t.addChild(t.decorationTop),t.addChild(t.tokenContainer),APP.AddChild(t.glitchContainer),APP.AddChild(t),Utils.IsOnDevie()||APP.EnableDebugLayer(),t.isPortraitMode=window.innerHeight>window.innerWidth,GameConfig.isNewUser=!0,GameConfig.isNewUser2=!0,Resource.GetAssetData("data/gui/"+DeviceInfo.GetLanguagePack()).then(function(t){s.Load(t),h.Load(s.GetData(0))}).catch(function(t){Utils.SendTrackingAndExit()}),t}return a(i,t),o(i,[{key:"Load",value:function(){if(this.isFirstResize=!1,this.IsResizeCompleted()&&window.isPreLoadStart){LoaderCustom1.removeAllListeners(),LoaderCustom2.removeAllListeners(),LoaderCustom3.removeAllListeners(),LoaderCustom1.reset(),LoaderCustom2.reset(),LoaderCustom3.reset(),e.isLoaded2=!1,e.isLoaded3=!1,PIXI.loader.removeAllListeners(),PIXI.loader.reset();var t={loadType:PIXI.loaders.Resource.LOAD_TYPE.XHR};this.isLoaded=!1,this.mIsGuiLoaded=!1,GameDefine.UpdateParams(),APP.IsRotate()&&GameConfig.isSupportTwoScreenSize&&APP.Rotate(!1),APP.Align(this);var i=[{name:"imgBg1",url:Utils.OMSGetImage("loading_01.jpg"),options:t},{name:"imgBg2",url:Utils.OMSGetImage("loading_02.jpg"),options:t},{name:"imgBg3",url:Utils.OMSGetImage("loading_03.jpg"),options:t}];Utils.LoadAssets(i,this.LoadProgressHandler.bind(this),this.LoadCompleteHandler2.bind(this),this.LoadErrorHandler.bind(this),LoaderCustom1);var n=[{name:"imgBgComic",url:Utils.OMSGetImage("bg_comic.jpg"),options:t},{name:"imgRoad",url:Utils.OMSGetImage("bg.jpg"),options:t},{name:"imgGame",url:Utils.OMSGetImage("game.png"),options:t},{name:"imgGame1",url:Utils.OMSGetImage("game1.png"),options:t},{name:"imgGame2",url:Utils.OMSGetImage("game2.png"),options:t},{name:"MC",url:Utils.OMSGetImage("mc.png"),options:t},{name:"charSelect",url:this.GetLanguageImg(),options:t},{name:"imgGameover",url:Utils.OMSGetImage("gameover.jpg"),xhr:t}];if(Utils.LoadAssets(n,this.LoadProgressHandler.bind(this),this.LoadCompleteHandler3.bind(this),this.LoadErrorHandler.bind(this),LoaderCustom2),this._LoadImgBgVideo(),this._LoadVideo(),void 0!==window.iv_location_type&&"1"===window.iv_location_type){var r=[{name:"imgPreload",url:Utils.OMSGetImage("preload.png"),options:t}];return void Utils.LoadAssets(r,this.LoadProgressHandler.bind(this),this.LoadCompleteHandler.bind(this),this.LoadErrorHandler.bind(this))}AudioManager.Load(DataDefine.SINGLE_SOUNDS_INFO);var a=[{name:"imgPreload",url:Utils.OMSGetImage("preload.png"),options:t}];a.push({name:"spine_startscreenportrait",url:Utils.OMSGetData("spine/startscreenportrait.json")}),this.animIdBg.BEGIN="PortraitBegin",this.animIdBg.IDLE="PortraitIdle",this.animIdBg.TRIGGERED="PortraitTriggered",this.attachmentReplace.CTA="Portrait_CTA",this.attachmentReplace.LeveUp="Portrait_Headline",Utils.LoadAssets(a,this.LoadProgressHandler.bind(this),this.LoadCompleteHandler.bind(this),this.LoadErrorHandler.bind(this)),this.mIsSetTextReward=!0,this.mCountDelayTextReward=0,Utils.PauseHostGameMusic(),window.reLoad=this.ReLoad}}},{key:"ReLoad",value:function(){var t={loadType:PIXI.loaders.Resource.LOAD_TYPE.XHR};if(!e.isLoaded2){LoaderCustom1.reset();var i=[{name:"imgBg1",url:Utils.OMSGetImage("loading_01.jpg"),options:t},{name:"imgBg2",url:Utils.OMSGetImage("loading_02.jpg"),options:t},{name:"imgBg3",url:Utils.OMSGetImage("loading_03.jpg"),options:t}];Utils.LoadAssets(i,this.LoadProgressHandler.bind(this),this.LoadCompleteHandler2.bind(this),this.LoadErrorHandler.bind(this),LoaderCustom1)}if(!e.isLoaded3){LoaderCustom2.reset();var n=[{name:"imgBgComic",url:Utils.OMSGetImage("bg_comic.jpg"),options:t},{name:"imgRoad",url:Utils.OMSGetImage("bg.jpg"),options:t},{name:"imgGame",url:Utils.OMSGetImage("game.png"),options:t},{name:"imgGame1",url:Utils.OMSGetImage("game1.png"),options:t},{name:"imgGame2",url:Utils.OMSGetImage("game2.png"),options:t},{name:"MC",url:Utils.OMSGetImage("mc.png"),options:t},{name:"charSelect",url:this.GetLanguageImg(),options:t},{name:"imgGameover",url:Utils.OMSGetImage("gameover.jpg"),xhr:t}];Utils.LoadAssets(n,this.LoadProgressHandler.bind(this),this.LoadCompleteHandler3.bind(this),this.LoadErrorHandler.bind(this),LoaderCustom2)}if(!e.isLoaded){PIXI.loader.reset();var r=[{name:"imgPreload",url:Utils.OMSGetImage("preload.png"),options:t}];r.push({name:"spine_startscreenportrait",url:Utils.OMSGetData("spine/startscreenportrait.json")}),Utils.LoadAssets(r,this.LoadProgressHandler.bind(this),this.LoadCompleteHandler.bind(this),this.LoadErrorHandler.bind(this))}GameDefine.ImgVideoBg.mIsLoadedData||this._LoadImgBgVideo(),GameDefine.mVideoBg.mIsLoadedData||this._LoadVideo(),StateManager.GetCurrentState()==StateLoading&&(StateLoading.txtTitle.visible=!0,StateLoading.loadingIcon.visible=!0,StateLoading.txtLostConnect.visible=!1,StateLoading.btnRetry.visible=!1,StateLoading.btnExit.visible=!1,StateLoading.Load())}},{key:"GetLanguageImg",value:function(){var t="char_select_end";return window.languageText&&"EN"!=window.languageText&&(t+="_"+window.languageText.toLowerCase()),t+=".png",Utils.OMSGetImage(t)}},{key:"RegisterVisibilityChange",value:function(){function t(){document[e]?window.onGamePause():window.onGameResume()}var e,i;void 0!==document.hidden?(e="hidden",i="visibilitychange"):void 0!==document.msHidden?(e="msHidden",i="msvisibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",i="webkitvisibilitychange"),void 0===document.addEventListener||void 0===e?console.log("This demo requires a browser, such as Google Chrome or Firefox, that supports the Page Visibility API."):document.addEventListener(i,t,!1)}},{key:"SetupGlitchBg",value:function(){this.Bg_Glich_1=new PIXI.Sprite(LoaderCustom1.resources.imgBg1.texture),this.Bg_Glich_2=new PIXI.Sprite(LoaderCustom1.resources.imgBg2.texture),this.Bg_Glich_3=new PIXI.Sprite(LoaderCustom1.resources.imgBg3.texture),this.Bg_Glich_1.rotation+=0,this.Bg_Glich_2.rotation+=0,this.Bg_Glich_3.rotation+=0,this.Bg_Glich_1.anchor.set(.5,.5),this.Bg_Glich_1.position.set(APP.GetWidth()/2,APP.GetHeight()/2),this.Bg_Glich_2.anchor.set(.5,.5),this.Bg_Glich_2.position.set(APP.GetWidth()/2,APP.GetHeight()/2),this.Bg_Glich_3.anchor.set(.5,.5),this.Bg_Glich_3.position.set(APP.GetWidth()/2,APP.GetHeight()/2),this.Bg_Glich_1.visible=!1,this.Bg_Glich_2.visible=!1,this.Bg_Glich_3.visible=!1,this.arrGlitch.push(this.Bg_Glich_1),this.arrGlitch.push(this.Bg_Glich_2),this.arrGlitch.push(this.Bg_Glich_3),this.currentBg=this.Bg_Glich_1,this.glitchContainer.addChild(this.Bg_Glich_1,this.Bg_Glich_2,this.Bg_Glich_3)}},{key:"RandomGlitch",value:function(){var t=void 0;do{t=this.arrGlitch[Utils.RandInt(0,this.arrGlitch.length-1)]}while(t==this.currentBg);return t}},{key:"Unload",value:function(){APP.IsRotate()&&(APP.Rotate(!0),APP.Align(this)),APP.RemoveChild(this),Utils.IsOnDevie()||APP.DisableDebugLayer(),this.removeChild(this.foreground),this.removeChild(this.decoration),this.removeChild(this.decorationTop)}},{key:"Resize",value:function(){if(this.isLoaded&&"1"!=window.fromCache||this.IsResizeCompleted()&&(PIXI.loader.removeAllListeners(),PIXI.loader.reset(),this.background.removeChildren(0,this.background.children.length),this.foreground.removeChildren(0,this.foreground.children.length),this.Load()),this.isLoaded&&this.mIsGuiLoaded){GameDefine.UpdateParams();var t={dataName:"mig_resize",rotation:APP.rotation};window.parent.postMessage(t,"*"),this.spinePreload.position.set(APP.GetWidth()/2,APP.GetHeight()/2),this.isStartSpine||(this.isStartSpine=!0,this.spinePreload.SetAnim(this.animIdBg.BEGIN,!1),this.ChangeAttachment(),window.parent.postMessage("mig_loading_complete","*")),APP.Align(this);var e=APP.IsRotate()?GuiManager.GetGui(0):GuiManager.GetGui(1);APP.IsRotate()?e.UpdateAnchorRotate():e.UpdateAnchors()}}},{key:"Resume",value:function(){this.infoClicked=!1}},{key:"Update",value:function(t){var i=this;if(Utils.UpdateLoadingWheel(t),void 0===window.iv_location_type||"1"!==window.iv_location_type){if(this.tweenMgr.Update(t),this.spinePreload&&this.isStartSpine&&(this.spinePreload.Update(t),this.spinePreload.animId==this.animIdBg.BEGIN&&this.spinePreload.isFinish?(this.isClicked=!1,this.spinePreload.SetAnim(this.animIdBg.IDLE,!0),this.ChangeAttachment()):this.spinePreload.animId==this.animIdBg.TRIGGERED&&this.spinePreload.isFinish&&!this.isNextState&&(this.isNextState=!0,this.currentBg.visible=!1,this.currentBg=this.RandomGlitch(),this.currentBg.visible=!0,e.intervalGlitch=setInterval(function(){i.currentBg.visible=!1,i.currentBg=i.RandomGlitch(),i.currentBg.visible=!0},300),this.NextStateWithZoom())),this.mIsGuiLoaded){GuiManager.Update(1,t)}if(!Utils.IsOnDevie()){var n=APP.debugLayer;if(n.clear(),n.lineStyle(2,16711680,1),window._show_touchzone){if(null!=this.btnExit){var r=this.btnExit.GetTransformRect();n.drawRect(r.x,r.y,r.width,r.height)}if(null!=this.info){var a=this.info.GetTransformRect();n.drawRect(a.x,a.y,a.width,a.height),n.drawRect(0,2*APP.GetHeight()/3,APP.GetWidth(),a.y-2*APP.GetHeight()/3-10)}}}}else if(this.isLoaded&&this.isLoaded2)return Utils.InitInfo(),void this.NextState()}},{key:"LoadProgressHandler",value:function(t,e){switch(Utils.Log("StatePreload loading: "+e.name),Utils.Log("StatePreload progress: "+t.progress+"%"),e.name){case"imgSplash":if(void 0!==window.iv_location_type&&"1"===window.iv_location_type)break;this.splash=new PIXI.Sprite(PIXI.loader.resources.imgSplash.texture),this.splash.anchor.set(.5,.5),this.splash.position.set(APP.GetWidth()/2,APP.GetHeight()/2);break;case"imgPreload":Utils.PauseHostGameMusic(),this.LoadPreloadSprite(PIXI.loader.resources.imgPreload.texture);break;case"imgToken":this.token=Utils.InitToken(PIXI.loader.resources.imgToken.texture,.5)}Resource.RevokeObjectURL(e.url)}},{key:"LoadErrorHandler",value:function(t){Utils.Log("LoadErrorHandler: "+t),window.parent.postMessage("mig_loading_failed","*")}},{key:"LoadCompleteHandler2",value:function(){this.SetupGlitchBg(),void 0!==window.iv_location_type&&"1"===window.iv_location_type&&Utils.RemoveLoadingWheel(),this.isLoaded2=!0,e.isLoaded2=this.isLoaded2}},{key:"LoadCompleteHandler3",value:function(){e.isLoaded3=!0}},{key:"LoadCompleteHandler",value:function(){Utils.Log("LoadCompleteHandler"),TrackingManager.SendEventTracking(TrackingManager.TRACKING_ACTION_AD_VIEWABLE),void 0!==window.iv_location_type&&"1"===window.iv_location_type||(this.isLoaded=!0,e.isLoaded=this.isLoaded,this.spinePreload=new p(PIXI.loader.resources.spine_startscreenportrait.spineData),this.spinePreload.SetSkin("default"),this.spinePreload.position.set(APP.GetWidth()/2,APP.GetHeight()/2),GameConfig.isHostGamePortrait?(this.spinePreload.SetAnim(this.animIdBg.BEGIN,!1),this.isStartSpine=!0,window.parent.postMessage("mig_loading_complete","*")):this.isStartSpine=!1,this.ChangeAttachment(),Utils.RemoveLoadingWheel(),this.decoration.addChild(this.spinePreload),this.Alignment())}},{key:"ChangeAttachment",value:function(){var t=void 0,e=void 0;t=this.spinePreload.skeleton.getAttachmentByName(this.attachmentReplace.CTA,this.slotCTA[window.languageIndex]),e=this.spinePreload.skeleton.slots[this.spinePreload.skeleton.findSlotIndex(this.attachmentReplace.CTA)],e.setAttachment(t),t=this.spinePreload.skeleton.getAttachmentByName(this.attachmentReplace.LeveUp,this.slotLevelUp[window.languageIndex]),e=this.spinePreload.skeleton.slots[this.spinePreload.skeleton.findSlotIndex(this.attachmentReplace.LeveUp)],e.setAttachment(t)}},{key:"GetSplashName",value:function(){return GameConfig.isMigGamePortrait?APP.IsRotate()&&GameConfig.isSupportTwoScreenSize?"mig_portrait_host_landscape.jpg":"mig_portrait_host_portrait.jpg":APP.IsRotate()&&GameConfig.isSupportTwoScreenSize?"mig_landscape_host_portrait.jpg":"mig_landscape_host_landscape.jpg"}},{key:"Alignment",value:function(){}},{key:"LoadPreloadSprite",value:function(t){var e=this;Resource.GetAssetData(Utils.OMSGetGuiData("1.dat")).then(function(i){e.mIsGuiLoaded=!0,s.Load(i),l.Add("0",t,u.Load(s.GetData(0)));for(var n=0;n<=2;n++){var r=new c;r.Load(s.GetData(n+1)),GuiManager.Add(n,r)}s.Close(),void 0!==window.iv_location_type&&"1"===window.iv_location_type&&(e.isLoaded=!0),e.SetupPreload()}).catch(function(t){Utils.Log("Preload load error")})}},{key:"SetupPreload",value:function(){if(this.Localization(),void 0===window.iv_location_type||"1"!==window.iv_location_type){if(this.decoration.removeChildren(0,this.decoration.children.length),APP.IsRotate()){this.btnExit=GuiManager.GetGui(0).GetObject(1),this.arcade=GuiManager.GetGui(0).GetObject(8),this.decorationTop.addChild(GuiManager.GetGui(0)),this.info=GuiManager.GetGui(0).GetObject(4);var t=GuiManager.GetGui(0).GetObject(5);this.info.x=t.x-t.width-20,this.info.SetTouchable(!0),GuiManager.GetGui(0).UpdateAnchorRotate()}else{this.btnExit=GuiManager.GetGui(1).GetObject(1),this.arcade=GuiManager.GetGui(1).GetObject(4),this.info=GuiManager.GetGui(1).GetObject(3);var e=GuiManager.GetGui(1).GetObject(7);this.info.x=e.x-e.width-20,this.info.SetTouchable(!0),this.decorationTop.addChild(GuiManager.GetGui(1))}this.mButtonPlay=APP.IsRotate()?GuiManager.GetGui(0).GetObject(2):GuiManager.GetGui(1).GetObject(2),this.mButtonPlay=GuiManager.GetGui(1).GetObject(2),this.mButtonPlay.SetTouchable(!0),this.btnExit.SetTouchable(!0)}}},{key:"Localization",value:function(){this.indexText=window.languageIndex,GuiManager.GetGui(0).GetObject(5).SetFrame(18+this.indexText),GuiManager.GetGui(1).GetObject(7).SetFrame(18+this.indexText),GuiManager.GetGui(2).GetObject(2).SetFrame(18+this.indexText),GuiManager.GetGui(2).GetObject(6).SetFrame(26+this.indexText),GuiManager.GetGui(2).GetObject(9).SetFrame(51+this.indexText),this.indexText>=3?GuiManager.GetGui(2).GetObject(1).SetFrame(46):GuiManager.GetGui(2).GetObject(1).SetFrame(43+this.indexText)}},{key:"IsResizeCompleted",value:function(){return window.innerWidth>0&&window.innerHeight>0}},{key:"NextState",value:function(){var t=this;this.isLoaded&&(TrackingManager.SendEventTracking(TrackingManager.TRACKING_ACTION_ENGAGEMENTS),gTotalTimeSpent=.01,gIngameTimeSpent=.01,this.interactive=!1,this.currentBg.visible=!1,this.currentBg=this.RandomGlitch(),this.currentBg.visible=!0,e.intervalGlitch=setInterval(function(){t.currentBg.visible=!1,t.currentBg=t.RandomGlitch(),t.currentBg.visible=!0},300),StateManager.SwitchState(StateLoading,!1),this.isLoaded=!1)}},{key:"NextStateWithZoom",value:function(){this.isLoaded&&(TrackingManager.SendEventTracking(TrackingManager.TRACKING_ACTION_ENGAGEMENTS),gTotalTimeSpent=.01,gIngameTimeSpent=.01,this.interactive=!1,StateManager.SwitchState(StateLoading),this.isLoaded=!1)}},{key:"TouchHandler",value:function(t){switch(t.target){case this.info:Input.IsTouchUp(t)&&!this.infoClicked&&(this.infoClicked=!0,Utils.RedirectInfo("Interstitial"));break;case this:if(t.data.global.y>2*APP.GetHeight()/3&&this.isLoaded&&this.isLoaded2&&!this.isClicked?this.cursor="pointer":this.cursor="default",Input.IsTouchUp(t)&&t.data.global.y>2*APP.GetHeight()/3&&this.isLoaded&&this.isLoaded2&&!this.isClicked){this.cursor="pointer";var e=this.info.GetTransformRect();t.data.global.y<e.y&&(window.isMuteAudio||AudioManager.Play(0),this.isClicked=!0,this.spinePreload.SetAnim(this.animIdBg.TRIGGERED,!1),this.ChangeAttachment())}break;case this.btnExit:Input.IsTouchUp(t)&&Utils.SendTrackingAndExit()}}},{key:"_SetTextReward",value:function(){if(this.isLoaded&&this.mIsGuiLoaded&&this.mIsSetTextReward)if(this.mCountDelayTextReward<3)this.mCountDelayTextReward++;else{this.mIsSetTextReward=!1;var t=new PIXI.TextStyle({align:"center",fontFamily:GameConfig.fontList.MainFont,fontSize:35,fill:"#000000"});Utils.SetTokenInfo("%d %token%",t),this.token.position.set(-.5*this.token.width,-.5*this.token.height),this.tweenMgr.RemoveAll(),this.tweenMgr.Create(this.mButtonPlay,f.EXPONENTIAL_IN,{scale:1},{scale:.8},1,0),this.tweenMgr.Create(this.mButtonPlay,f.EXPONENTIAL_OUT,{scale:.8},{scale:1},1,0),this.tweenMgr.SetLoop(this.mButtonPlay,-1)}}},{key:"_LoadImgBgVideo",value:function(){var t=this;Resource.GetAssetUrl("data/image/img_fake.jpg","url").then(function(t){void 0==GameDefine.ImgVideoBg&&(GameDefine.ImgVideoBg=document.createElement("img"),GameDefine.ImgVideoBg.setAttribute("id","img_video_bg"),GameDefine.ImgVideoBg.style.visibility="hidden",GameDefine.ImgVideoBg.className=window.innerWidth<window.innerHeight?"img_no_rotate":"img_rotate",document.body.appendChild(GameDefine.ImgVideoBg)),GameDefine.ImgVideoBg.src=t,GameDefine.ImgVideoBg.mIsLoadedData=!1,GameDefine.ImgVideoBg.onload=function(){GameDefine.ImgVideoBg.mIsLoadedData=!0,GameDefine.ImgVideoBg.style.left=window.innerWidth/2+"px",GameDefine.ImgVideoBg.style.top=window.innerHeight/2+"px"}}).catch(function(e){console.log(e),t.LoadErrorHandler(e)})}},{key:"_LoadVideo",value:function(){var t=this;Resource.GetAssetUrl("data/video/video.mp4","url").then(function(t){void 0==GameDefine.mVideoBg&&(GameDefine.mVideoBg=document.createElement("video"),GameDefine.mVideoBg.setAttribute("id","video_bg"),document.body.appendChild(GameDefine.mVideoBg)),GameDefine.mVideoBg.src=t,GameDefine.mVideoBg.load(),GameDefine.mVideoBg.setAttribute("webkit-playsinline",""),GameDefine.mVideoBg.setAttribute("playsinline",""),GameDefine.mVideoBg.setAttribute("muted",""),GameDefine.mVideoBg.setAttribute("autoplay",""),GameDefine.mVideoBg.setAttribute("loop",""),GameDefine.mVideoBg.style.visibility="hidden",GameDefine.mVideoBg.type="video/mp4",GameDefine.mVideoBg.playbackRate=GameDefine.VIDEO_SPEED,GameDefine.mVideoBg.mIsLoadedData=!1,GameDefine.mVideoBg.mIsCanPlayThrough=!1,GameDefine.mVideoBg.onloadeddata=function(){GameDefine.mVideoBg.mIsLoadedData=!0},GameDefine.mVideoBg.oncanplaythrough=function(){GameDefine.mVideoBg.mIsCanPlayThrough=!0}}).catch(function(e){console.log(e),t.LoadErrorHandler(e)})}}]),i}(PIXI.Container);t.exports=new m}).call(e,i(21))},function(t,e,i){var n=i(27);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=n(t))throw TypeError(e);return+t}},function(t,e,i){"use strict";var n=i(12),r=i(55),a=i(11);t.exports=[].copyWithin||function(t,e){var i=n(this),o=a(i.length),s=r(t,o),h=r(e,o),u=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===u?o:r(u,o))-h,o-s),c=1;for(h<s&&s<h+l&&(c=-1,h+=l-1,s+=l-1);l-- >0;)h in i?i[s]=i[h]:delete i[s],s+=c,h+=c;return i}},function(t,e,i){var n=i(48);t.exports=function(t,e){var i=[];return n(t,!1,i.push,i,e),i}},function(t,e,i){var n=i(16),r=i(12),a=i(67),o=i(11);t.exports=function(t,e,i,s,h){n(e);var u=r(t),l=a(u),c=o(u.length),f=h?c-1:0,d=h?-1:1;if(i<2)for(;;){if(f in l){s=l[f],f+=d;break}if(f+=d,h?f<0:c<=f)throw TypeError("Reduce of empty array with no initial value")}for(;h?f>=0:c>f;f+=d)f in l&&(s=e(s,l[f],f,u));return s}},function(t,e,i){"use strict";var n=i(16),r=i(6),a=i(175),o=[].slice,s={},h=function(t,e,i){if(!(e in s)){for(var n=[],r=0;r<e;r++)n[r]="a["+r+"]";s[e]=Function("F,a","return new F("+n.join(",")+")")}return s[e](t,i)};t.exports=Function.bind||function(t){var e=n(this),i=o.call(arguments,1),s=function(){var n=i.concat(o.call(arguments));return this instanceof s?h(e,n.length,n):a(e,n,t)};return r(e.prototype)&&(s.prototype=e.prototype),s}},function(t,e,i){"use strict";var n=i(10).f,r=i(49),a=i(53),o=i(29),s=i(47),h=i(48),u=i(118),l=i(178),c=i(54),f=i(9),d=i(43).fastKey,p=i(62),m=f?"_s":"size",v=function(t,e){var i,n=d(e);if("F"!==n)return t._i[n];for(i=t._f;i;i=i.n)if(i.k==e)return i};t.exports={getConstructor:function(t,e,i,u){var l=t(function(t,n){s(t,l,e,"_i"),t._t=e,t._i=r(null),t._f=void 0,t._l=void 0,t[m]=0,void 0!=n&&h(n,i,t[u],t)});return a(l.prototype,{clear:function(){for(var t=p(this,e),i=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete i[n.i];t._f=t._l=void 0,t[m]=0},delete:function(t){var i=p(this,e),n=v(i,t);if(n){var r=n.n,a=n.p;delete i._i[n.i],n.r=!0,a&&(a.n=r),r&&(r.p=a),i._f==n&&(i._f=r),i._l==n&&(i._l=a),i[m]--}return!!n},forEach:function(t){p(this,e);for(var i,n=o(t,arguments.length>1?arguments[1]:void 0,3);i=i?i.n:this._f;)for(n(i.v,i.k,this);i&&i.r;)i=i.p},has:function(t){return!!v(p(this,e),t)}}),f&&n(l.prototype,"size",{get:function(){return p(this,e)[m]}}),l},def:function(t,e,i){var n,r,a=v(t,e);return a?a.v=i:(t._l=a={i:r=d(e,!0),k:e,v:i,p:n=t._l,n:void 0,r:!1},t._f||(t._f=a),n&&(n.n=a),t[m]++,"F"!==r&&(t._i[r]=a)),t},getEntry:v,setStrong:function(t,e,i){u(t,e,function(t,i){this._t=p(t,e),this._k=i,this._l=void 0},function(){for(var t=this,e=t._k,i=t._l;i&&i.r;)i=i.p;return t._t&&(t._l=i=i?i.n:t._t._f)?"keys"==e?l(0,i.k):"values"==e?l(0,i.v):l(0,[i.k,i.v]):(t._t=void 0,l(1))},i?"entries":"values",!i,!0),c(e)}}},function(t,e,i){var n=i(66),r=i(167);t.exports=function(t){return function(){if(n(this)!=t)throw TypeError(t+"#toJSON isn't generic");return r(this)}}},function(t,e,i){"use strict";var n=i(53),r=i(43).getWeak,a=i(1),o=i(6),s=i(47),h=i(48),u=i(32),l=i(22),c=i(62),f=u(5),d=u(6),p=0,m=function(t){return t._l||(t._l=new v)},v=function(){this.a=[]},g=function(t,e){return f(t.a,function(t){return t[0]===e})};v.prototype={get:function(t){var e=g(this,t);if(e)return e[1]},has:function(t){return!!g(this,t)},set:function(t,e){var i=g(this,t);i?i[1]=e:this.a.push([t,e])},delete:function(t){var e=d(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,i,a){var u=t(function(t,n){s(t,u,e,"_i"),t._t=e,t._i=p++,t._l=void 0,void 0!=n&&h(n,i,t[a],t)});return n(u.prototype,{delete:function(t){if(!o(t))return!1;var i=r(t);return!0===i?m(c(this,e)).delete(t):i&&l(i,this._i)&&delete i[this._i]},has:function(t){if(!o(t))return!1;var i=r(t);return!0===i?m(c(this,e)).has(t):i&&l(i,this._i)}}),u},def:function(t,e,i){var n=r(a(e),!0);return!0===n?m(t).set(e,i):n[t._i]=i,t},ufstore:m}},function(t,e,i){"use strict";function n(t,e,i,u,l,c,f,d){for(var p,m,v=l,g=0,y=!!f&&s(f,d,3);g<u;){if(g in i){if(p=y?y(i[g],g,e):i[g],m=!1,a(p)&&(m=p[h],m=void 0!==m?!!m:r(p)),m&&c>0)v=n(t,e,p,o(p.length),v,c-1)-1;else{if(v>=9007199254740991)throw TypeError();t[v]=p}v++}g++}return v}var r=i(83),a=i(6),o=i(11),s=i(29),h=i(8)("isConcatSpreadable");t.exports=n},function(t,e,i){t.exports=!i(9)&&!i(4)(function(){return 7!=Object.defineProperty(i(111)("div"),"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t,e,i){var n=void 0===i;switch(e.length){case 0:return n?t():t.call(i);case 1:return n?t(e[0]):t.call(i,e[0]);case 2:return n?t(e[0],e[1]):t.call(i,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(i,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(i,e[0],e[1],e[2],e[3])}return t.apply(i,e)}},function(t,e,i){var n=i(6),r=Math.floor;t.exports=function(t){return!n(t)&&isFinite(t)&&r(t)===t}},function(t,e,i){var n=i(1);t.exports=function(t,e,i,r){try{return r?e(n(i)[0],i[1]):e(i)}catch(e){var a=t.return;throw void 0!==a&&n(a.call(t)),e}}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,i){var n=i(120),r=Math.pow,a=r(2,-52),o=r(2,-23),s=r(2,127)*(2-o),h=r(2,-126),u=function(t){return t+1/a-1/a};t.exports=Math.fround||function(t){var e,i,r=Math.abs(t),l=n(t);return r<h?l*u(r/h/o)*h*o:(e=(1+o/a)*r,i=e-(e-r),i>s||i!=i?l*(1/0):l*i)}},function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,e){t.exports=Math.scale||function(t,e,i,n,r){return 0===arguments.length||t!=t||e!=e||i!=i||n!=n||r!=r?NaN:t===1/0||t===-1/0?t:(t-e)*(r-n)/(i-e)+n}},function(t,e,i){"use strict";var n=i(51),r=i(87),a=i(68),o=i(12),s=i(67),h=Object.assign;t.exports=!h||i(4)(function(){var t={},e={},i=Symbol(),n="abcdefghijklmnopqrst";return t[i]=7,n.split("").forEach(function(t){e[t]=t}),7!=h({},t)[i]||Object.keys(h({},e)).join("")!=n})?function(t,e){for(var i=o(t),h=arguments.length,u=1,l=r.f,c=a.f;h>u;)for(var f,d=s(arguments[u++]),p=l?n(d).concat(l(d)):n(d),m=p.length,v=0;m>v;)c.call(d,f=p[v++])&&(i[f]=d[f]);return i}:h},function(t,e,i){var n=i(10),r=i(1),a=i(51);t.exports=i(9)?Object.defineProperties:function(t,e){r(t);for(var i,o=a(e),s=o.length,h=0;s>h;)n.f(t,i=o[h++],e[i]);return t}},function(t,e,i){var n=i(25),r=i(50).f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return r(t)}catch(t){return o.slice()}};t.exports.f=function(t){return o&&"[object Window]"==a.call(t)?s(t):r(n(t))}},function(t,e,i){var n=i(22),r=i(25),a=i(79)(!1),o=i(124)("IE_PROTO");t.exports=function(t,e){var i,s=r(t),h=0,u=[];for(i in s)i!=o&&n(s,i)&&u.push(i);for(;e.length>h;)n(s,i=e[h++])&&(~a(u,i)||u.push(i));return u}},function(t,e,i){var n=i(51),r=i(25),a=i(68).f;t.exports=function(t){return function(e){for(var i,o=r(e),s=n(o),h=s.length,u=0,l=[];h>u;)a.call(o,i=s[u++])&&l.push(t?[i,o[i]]:o[i]);return l}}},function(t,e,i){var n=i(50),r=i(87),a=i(1),o=i(2).Reflect;t.exports=o&&o.ownKeys||function(t){var e=n.f(a(t)),i=r.f;return i?e.concat(i(t)):e}},function(t,e,i){var n=i(2).parseFloat,r=i(61).trim;t.exports=1/n(i(128)+"-0")!=-1/0?function(t){var e=r(String(t),3),i=n(e);return 0===i&&"-"==e.charAt(0)?-0:i}:n},function(t,e,i){var n=i(2).parseInt,r=i(61).trim,a=i(128),o=/^[-+]?0[xX]/;t.exports=8!==n(a+"08")||22!==n(a+"0x16")?function(t,e){var i=r(String(t),3);return n(i,e>>>0||(o.test(i)?16:10))}:n},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,i){var n=i(1),r=i(6),a=i(122);t.exports=function(t,e){if(n(t),r(e)&&e.constructor===t)return e;var i=a.f(t);return(0,i.resolve)(e),i.promise}},function(t,e,i){var n=i(11),r=i(127),a=i(33);t.exports=function(t,e,i,o){var s=String(a(t)),h=s.length,u=void 0===i?" ":String(i),l=n(e);if(l<=h||""==u)return s;var c=l-h,f=r.call(u,Math.ceil(c/u.length));return f.length>c&&(f=f.slice(0,c)),o?f+s:s+f}},function(t,e,i){var n=i(35),r=i(11);t.exports=function(t){if(void 0===t)return 0;var e=n(t),i=r(e);if(e!==i)throw RangeError("Wrong length!");return i}},function(t,e,i){e.f=i(8)},function(t,e,i){"use strict";var n=i(170),r=i(62);t.exports=i(80)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=n.getEntry(r(this,"Map"),t);return e&&e.v},set:function(t,e){return n.def(r(this,"Map"),0===t?0:t,e)}},n,!0)},function(t,e,i){i(9)&&"g"!=/./g.flags&&i(10).f(RegExp.prototype,"flags",{configurable:!0,get:i(82)})},function(t,e,i){"use strict";var n=i(170),r=i(62);t.exports=i(80)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return n.def(r(this,"Set"),t=0===t?0:t,t)}},n)},function(t,e,i){"use strict";var n,r=i(32)(0),a=i(19),o=i(43),s=i(182),h=i(172),u=i(6),l=i(4),c=i(62),f=o.getWeak,d=Object.isExtensible,p=h.ufstore,m={},v=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},g={get:function(t){if(u(t)){var e=f(t);return!0===e?p(c(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return h.def(c(this,"WeakMap"),t,e)}},y=t.exports=i(80)("WeakMap",v,g,h,!0,!0);l(function(){return 7!=(new y).set((Object.freeze||Object)(m),7).get(m)})&&(n=h.getConstructor(v,"WeakMap"),s(n.prototype,g),o.NEED=!0,r(["delete","has","get","set"],function(t){var e=y.prototype,i=e[t];a(e,t,function(e,r){if(u(e)&&!d(e)){this._f||(this._f=new n);var a=this._f[t](e,r);return"set"==t?this:a}return i.call(this,e,r)})}))},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(){function t(e,i,r){void 0===i&&(i=!1),n(this,t),this._fn=e,this._once=i,this._thisArg=r,this._next=this._prev=this._owner=null}return a(t,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),t}(),s=function(){function t(){n(this,t),this._head=this._tail=void 0}return a(t,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var i=[];e;)i.push(e),e=e._next;return i}},{key:"has",value:function(t){if(!(t instanceof o))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return r(this,new o(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return r(this,new o(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof o))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this?this:(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this)}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();s.MiniSignalBinding=o,e.default=s,t.exports=e.default},function(t,e,i){"use strict";t.exports=function(t,e){e=e||{};for(var i={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=i.parser[e.strictMode?"strict":"loose"].exec(t),r={},a=14;a--;)r[i.key[a]]=n[a]||"";return r[i.q.name]={},r[i.key[12]].replace(i.q.parser,function(t,e,n){e&&(r[i.q.name][e]=n)}),r}},function(t,e){var i=function(t,e,i,n,r){this.gl=t,this.texture=t.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=e||-1,this.height=i||-1,this.format=n||t.RGBA,this.type=r||t.UNSIGNED_BYTE};i.prototype.upload=function(t){this.bind();var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var i=t.videoWidth||t.width,n=t.videoHeight||t.height;n!==this.height||i!==this.width?e.texImage2D(e.TEXTURE_2D,0,this.format,this.format,this.type,t):e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.format,this.type,t),this.width=i,this.height=n};var n=!1;i.prototype.uploadData=function(t,e,i){this.bind();var r=this.gl;if(t instanceof Float32Array){if(!n){if(!r.getExtension("OES_texture_float"))throw new Error("floating point textures not available");n=!0}this.type=r.FLOAT}else this.type=this.type||r.UNSIGNED_BYTE;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),e!==this.width||i!==this.height?r.texImage2D(r.TEXTURE_2D,0,this.format,e,i,0,this.format,this.type,t||null):r.texSubImage2D(r.TEXTURE_2D,0,0,0,e,i,this.format,this.type,t||null),this.width=e,this.height=i},i.prototype.bind=function(t){var e=this.gl;void 0!==t&&e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)},i.prototype.unbind=function(){var t=this.gl;t.bindTexture(t.TEXTURE_2D,null)},i.prototype.minFilter=function(t){var e=this.gl;this.bind(),this.mipmap?e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR:e.NEAREST)},i.prototype.magFilter=function(t){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t?e.LINEAR:e.NEAREST)},i.prototype.enableMipmap=function(){var t=this.gl;this.bind(),this.mipmap=!0,t.generateMipmap(t.TEXTURE_2D)},i.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},i.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},i.prototype.enableWrapClamp=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)},i.prototype.enableWrapRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)},i.prototype.enableWrapMirrorRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.MIRRORED_REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.MIRRORED_REPEAT)},i.prototype.destroy=function(){this.gl.deleteTexture(this.texture)},i.fromSource=function(t,e,n){var r=new i(t);return r.premultiplyAlpha=n||!1,r.upload(e),r},i.fromData=function(t,e,n,r){var a=new i(t);return a.uploadData(e,n,r),a},t.exports=i},function(t,e){var i=function(t,e,i){var n;if(i){var r=i.tempAttribState,a=i.attribState;for(n=0;n<r.length;n++)r[n]=!1;for(n=0;n<e.length;n++)r[e[n].attribute.location]=!0;for(n=0;n<a.length;n++)a[n]!==r[n]&&(a[n]=r[n],i.attribState[n]?t.enableVertexAttribArray(n):t.disableVertexAttribArray(n))}else for(n=0;n<e.length;n++){var o=e[n];t.enableVertexAttribArray(o.attribute.location)}};t.exports=i},function(t,e){var i=function(t,e,i,r){var a=n(t,t.VERTEX_SHADER,e),o=n(t,t.FRAGMENT_SHADER,i),s=t.createProgram();if(t.attachShader(s,a),t.attachShader(s,o),r)for(var h in r)t.bindAttribLocation(s,r[h],h);return t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(s,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(s)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(s)),t.deleteProgram(s),s=null),t.deleteShader(a),t.deleteShader(o),s},n=function(t,e,i){var n=t.createShader(e);return t.shaderSource(n,i),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)?n:(console.log(t.getShaderInfoLog(n)),null)};t.exports=i},function(t,e){var i=function(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return n(2*e);case"bvec3":return n(3*e);case"bvec4":return n(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},n=function(t){for(var e=new Array(t),i=0;i<e.length;i++)e[i]=!1;return e};t.exports=i},function(t,e,i){var n=i(136),r=i(208),a=function(t,e){for(var i={},a=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),s=0;s<a;s++){var h=t.getActiveAttrib(e,s),u=n(t,h.type);i[h.name]={type:u,size:r(u),location:t.getAttribLocation(e,h.name),pointer:o}}return i},o=function(t,e,i,n){gl.vertexAttribPointer(this.location,this.size,t||gl.FLOAT,e||!1,i||0,n||0)};t.exports=a},function(t,e,i){var n=i(136),r=i(204),a=function(t,e){for(var i={},a=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),o=0;o<a;o++){var s=t.getActiveUniform(e,o),h=s.name.replace(/\[.*?\]/,""),u=n(t,s.type);i[h]={type:u,size:s.size,location:t.getUniformLocation(e,h),value:r(u,s.size)}}return i};t.exports=a},function(t,e){function i(t,e){return function(i){this.data[t].value=i;var n=this.data[t].location;1===e.size?o[e.type](this.gl,n,i):s[e.type](this.gl,n,i)}}function n(t,e){for(var i=e,n=0;n<t.length-1;n++){var r=i[t[n]]||{data:{}};i[t[n]]=r,i=r}return i}var r=function(t,e){var r={data:{}};r.gl=t;for(var o=Object.keys(e),s=0;s<o.length;s++){var h=o[s],u=h.split("."),l=u[u.length-1],c=n(u,r),f=e[h];c.data[l]=f,c.gl=t,Object.defineProperty(c,l,{get:a(l),set:i(l,f)})}return r},a=function(t){return function(){return this.data[t].value}},o={float:function(t,e,i){t.uniform1f(e,i)},vec2:function(t,e,i){t.uniform2f(e,i[0],i[1])},vec3:function(t,e,i){t.uniform3f(e,i[0],i[1],i[2])},vec4:function(t,e,i){t.uniform4f(e,i[0],i[1],i[2],i[3])},int:function(t,e,i){t.uniform1i(e,i)},ivec2:function(t,e,i){t.uniform2i(e,i[0],i[1])},ivec3:function(t,e,i){t.uniform3i(e,i[0],i[1],i[2])},ivec4:function(t,e,i){t.uniform4i(e,i[0],i[1],i[2],i[3])},bool:function(t,e,i){t.uniform1i(e,i)},bvec2:function(t,e,i){t.uniform2i(e,i[0],i[1])},bvec3:function(t,e,i){t.uniform3i(e,i[0],i[1],i[2])},bvec4:function(t,e,i){t.uniform4i(e,i[0],i[1],i[2],i[3])},mat2:function(t,e,i){t.uniformMatrix2fv(e,!1,i)},mat3:function(t,e,i){t.uniformMatrix3fv(e,!1,i)},mat4:function(t,e,i){t.uniformMatrix4fv(e,!1,i)},sampler2D:function(t,e,i){t.uniform1i(e,i)}},s={float:function(t,e,i){t.uniform1fv(e,i)},vec2:function(t,e,i){t.uniform2fv(e,i)},vec3:function(t,e,i){t.uniform3fv(e,i)},vec4:function(t,e,i){t.uniform4fv(e,i)},int:function(t,e,i){t.uniform1iv(e,i)},ivec2:function(t,e,i){t.uniform2iv(e,i)},ivec3:function(t,e,i){t.uniform3iv(e,i)},ivec4:function(t,e,i){t.uniform4iv(e,i)},bool:function(t,e,i){t.uniform1iv(e,i)},bvec2:function(t,e,i){t.uniform2iv(e,i)},bvec3:function(t,e,i){t.uniform3iv(e,i)},bvec4:function(t,e,i){t.uniform4iv(e,i)},sampler2D:function(t,e,i){t.uniform1iv(e,i)}};t.exports=r},function(t,e){var i=function(t){return n[t]},n={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};t.exports=i},function(t,e){var i=function(t,e){return"precision"!==t.substring(0,9)?"precision "+e+" float;\n"+t:t};t.exports=i},function(t,e,i){"use strict";e.__esModule=!0,e.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(212),s=i(70),h=n(s),u=i(145),l=i(13),c=n(l),f=i(3),d=function(){function t(e,i,n,a,s){r(this,t),"number"==typeof e&&(e=Object.assign({width:e,height:i||c.default.RENDER_OPTIONS.height,forceCanvas:!!a,sharedTicker:!!s},n)),this._options=e=Object.assign({autoStart:!0,sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},e),this.renderer=(0,o.autoDetectRenderer)(e),this.stage=new h.default,this._ticker=null,this.ticker=e.sharedTicker?u.shared:new u.Ticker,e.autoStart&&this.start()}return t.prototype.render=function(){this.renderer.render(this.stage)},t.prototype.stop=function(){this._ticker.stop()},t.prototype.start=function(){this._ticker.start()},t.prototype.destroy=function(t,e){if(this._ticker){var i=this._ticker;this.ticker=null,i.destroy()}this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null,this._options=null},a(t,[{key:"ticker",set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,f.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),t}();e.default=d},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e,i,n){var r=t&&t.forceCanvas;return void 0!==n&&(r=n),!r&&o.isWebGLSupported()?new l.default(t,e,i):new h.default(t,e,i)}e.__esModule=!0,e.autoDetectRenderer=r;var a=i(7),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(a),s=i(71),h=n(s),u=i(95),l=n(u)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(57),u=n(h),l=i(3),c=i(13),f=n(c),d=i(215),p=n(d),m=i(214),v=n(m),g=i(137),y=n(g),_=i(15),T=function(t){function e(){r(this,e);var i=a(this,t.call(this)),n=f.default.TRANSFORM_MODE===l.TRANSFORM_MODE.STATIC?p.default:v.default;return i.tempDisplayObjectParent=null,i.transform=new n,i.alpha=1,i.visible=!0,i.renderable=!0,i.parent=null,i.worldAlpha=1,i.filterArea=null,i._filters=null,i._enabledFilters=null,i._bounds=new y.default,i._boundsID=0,i._lastBoundsID=-1,i._boundsRect=null,i._localBoundsRect=null,i._mask=null,i._destroyed=!1,i}return o(e,t),e.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),e||(this._boundsRect||(this._boundsRect=new _.Rectangle),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){var e=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,t||(this._localBoundsRect||(this._localBoundsRect=new _.Rectangle),t=this._localBoundsRect);var n=this.getBounds(!1,t);return this.parent=i,this.transform=e,n},e.prototype.toGlobal=function(t,e){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,i,n){return e&&(t=e.toGlobal(t,i,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},e.prototype.renderWebGL=function(t){},e.prototype.renderCanvas=function(t){},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=t,this.position.y=e,this.scale.x=i||1,this.scale.y=n||1,this.rotation=r,this.skew.x=a,this.skew.y=o,this.pivot.x=s,this.pivot.y=h,this},e.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},s(e,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new e),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(t){this.transform.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){this.transform.position.y=t}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(t){this.transform.position.copy(t)}},{key:"scale",get:function(){return this.transform.scale},set:function(t){this.transform.scale.copy(t)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copy(t)}},{key:"skew",get:function(){return this.transform.skew},set:function(t){this.transform.skew.copy(t)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t}},{key:"worldVisible",get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}},{key:"mask",get:function(){return this._mask},set:function(t){this._mask&&(this._mask.renderable=!0,this._mask.isMask=!1),this._mask=t,this._mask&&(this._mask.renderable=!1,this._mask.isMask=!0)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}]),e}(u.default);e.default=T,T.prototype.displayObjectUpdateTransform=T.prototype.updateTransform},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(15),h=i(138),u=function(t){return t&&t.__esModule?t:{default:t}}(h),l=function(t){function e(){n(this,e);var i=r(this,t.call(this));return i.position=new s.Point(0,0),i.scale=new s.Point(1,1),i.skew=new s.ObservablePoint(i.updateSkew,i,0,0),i.pivot=new s.Point(0,0),i._rotation=0,i._cx=1,i._sx=0,i._cy=0,i._sy=1,i}return a(e,t),e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},e.prototype.updateLocalTransform=function(){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d)},e.prototype.updateTransform=function(t){var e=this.localTransform;e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d);var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._worldID++},e.prototype.setFromMatrix=function(t){t.decompose(this)},o(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),e}(u.default);e.default=l},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(15),h=i(138),u=function(t){return t&&t.__esModule?t:{default:t}}(h),l=function(t){function e(){n(this,e);var i=r(this,t.call(this));return i.position=new s.ObservablePoint(i.onChange,i,0,0),i.scale=new s.ObservablePoint(i.onChange,i,1,1),i.pivot=new s.ObservablePoint(i.onChange,i,0,0),i.skew=new s.ObservablePoint(i.updateSkew,i,0,0),i._rotation=0,i._cx=1,i._sx=0,i._cy=0,i._sy=1,i._localID=0,i._currentLocalID=0,i}return a(e,t),e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},e.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},e.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},o(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),e}(u.default);e.default=l},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(e,i,r,a,o,s,h,u,l){n(this,t),this.lineWidth=e,this.lineAlignment=l,this.nativeLines=h,this.lineColor=i,this.lineAlpha=r,this._lineTint=i,this.fillColor=a,this.fillAlpha=o,this._fillTint=a,this.fill=s,this.holes=[],this.shape=u,this.type=u.type}return t.prototype.clone=function(){return new t(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape)},t.prototype.addHole=function(t){this.holes.push(t)},t.prototype.destroy=function(){this.shape=null,this.holes=null},t}();e.default=r},function(t,e,i){"use strict";function n(t){return t<0?-1:t>0?1:0}e.__esModule=!0;var r=i(139),a=function(t){return t&&t.__esModule?t:{default:t}}(r),o=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],s=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],h=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],u=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],l=[],c=[];!function(){for(var t=0;t<16;t++){var e=[];c.push(e);for(var i=0;i<16;i++)for(var r=n(o[t]*o[i]+h[t]*s[i]),f=n(s[t]*o[i]+u[t]*s[i]),d=n(o[t]*h[i]+h[t]*u[i]),p=n(s[t]*h[i]+u[t]*u[i]),m=0;m<16;m++)if(o[m]===r&&s[m]===f&&h[m]===d&&u[m]===p){e.push(m);break}}for(var v=0;v<16;v++){var g=new a.default;g.set(o[v],s[v],h[v],u[v],0,0),l.push(g)}}();var f={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(t){return o[t]},uY:function(t){return s[t]},vX:function(t){return h[t]},vY:function(t){return u[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return c[t][e]},sub:function(t,e){return c[t][f.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?f.S:f.N:2*Math.abs(e)<=Math.abs(t)?t>0?f.E:f.W:e>0?t>0?f.SE:f.SW:t>0?f.NE:f.NW},matrixAppendRotationInv:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=l[f.inv(e)];r.tx=i,r.ty=n,t.append(r)}};e.default=f},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n(this,t),this._x=r,this._y=a,this.cb=e,this.scope=i}return t.prototype.clone=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new t(e||this.cb,i||this.scope,this._x,this._y)},t.prototype.set=function(t,e){var i=t||0,n=e||(0!==e?i:0);this._x===i&&this._y===n||(this._x=i,this._y=n,this.cb.call(this.scope))},t.prototype.copy=function(t){this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope))},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},r(t,[{key:"x",get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}]),t}();e.default=a},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(7),u=i(15),l=i(3),c=i(13),f=n(c),d=i(70),p=n(d),m=i(144),v=n(m),g=i(57),y=n(g),_=new u.Matrix,T=function(t){function e(i,n,o,s){r(this,e);var c=a(this,t.call(this));return(0,h.sayHello)(i),"number"==typeof n&&(n=Object.assign({width:n,height:o||f.default.RENDER_OPTIONS.height},s)),n=Object.assign({},f.default.RENDER_OPTIONS,n),c.options=n,c.type=l.RENDERER_TYPE.UNKNOWN,c.screen=new u.Rectangle(0,0,n.width,n.height),c.view=n.view||document.createElement("canvas"),c.resolution=n.resolution||f.default.RESOLUTION,c.transparent=n.transparent,c.autoResize=n.autoResize||!1,c.blendModes=null,c.preserveDrawingBuffer=n.preserveDrawingBuffer,c.clearBeforeRender=n.clearBeforeRender,c.roundPixels=n.roundPixels,c._backgroundColor=0,c._backgroundColorRgba=[0,0,0,0],c._backgroundColorString="#000000",c.backgroundColor=n.backgroundColor||c._backgroundColor,c._tempDisplayObjectParent=new p.default,c._lastObjectRendered=c._tempDisplayObjectParent,c}return o(e,t),e.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoResize&&(this.view.style.width=t+"px",this.view.style.height=e+"px")},e.prototype.generateTexture=function(t,e,i,n){n=n||t.getLocalBounds();var r=v.default.create(0|n.width,0|n.height,e,i);return _.tx=-n.x,_.ty=-n.y,this.render(t,r,!1,_,!!t.parent),r},e.prototype.destroy=function(t){t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=l.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},s(e,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=(0,h.hex2string)(t),(0,h.hex2rgb)(t,this._backgroundColorRgba)}}]),e}(y.default);e.default=T},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(13),o=function(t){return t&&t.__esModule?t:{default:t}}(a),s=function(){function t(e,i,r){n(this,t),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||o.default.RESOLUTION,this.resize(e,i)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},t.prototype.destroy=function(){this.context=null,this.canvas=null},r(t,[{key:"width",get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},{key:"height",get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}]),t}();e.default=s},function(t,e,i){"use strict";function n(t){var e=document.createElement("canvas");e.width=6,e.height=1;var i=e.getContext("2d");return i.fillStyle=t,i.fillRect(0,0,6,1),e}function r(){if("undefined"==typeof document)return!1;var t=n("#ff00ff"),e=n("#ffff00"),i=document.createElement("canvas");i.width=6,i.height=1;var r=i.getContext("2d");r.globalCompositeOperation="multiply",r.drawImage(t,0,0),r.drawImage(e,2,0);var a=r.getImageData(2,0,1,1);if(!a)return!1;var o=a.data;return 255===o[0]&&0===o[1]&&0===o[2]}e.__esModule=!0,e.default=r},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(532),s=n(o),h=i(7),u=i(3),l=i(13),c=n(l),f={},d=function(){function t(e,i,n){r(this,t),this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=i||t.defaultFragmentSrc,this._blendMode=u.BLEND_MODES.NORMAL,this.uniformData=n||(0,s.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={};for(var a in this.uniformData)this.uniforms[a]=this.uniformData[a].value,this.uniformData[a].type&&(this.uniformData[a].type=this.uniformData[a].type.toLowerCase());this.glShaders={},f[this.vertexSrc+this.fragmentSrc]||(f[this.vertexSrc+this.fragmentSrc]=(0,h.uid)()),this.glShaderKey=f[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=c.default.FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0}return t.prototype.apply=function(t,e,i,n,r){t.applyFilter(this,e,i,n)},a(t,[{key:"blendMode",get:function(){return this._blendMode},set:function(t){this._blendMode=t}}],[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),t}();e.default=d},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(222),h=n(s),u=i(15),l=(i(37),i(228)),c=n(l),f=function(t){function e(i){r(this,e);var n=new u.Matrix,o=a(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return i.renderable=!1,o.maskSprite=i,o.maskMatrix=n,o}return o(e,t),e.prototype.apply=function(t,e,i){var n=this.maskSprite,r=this.maskSprite.texture;r.valid&&(r.transform||(r.transform=new c.default(r,0)),r.transform.update(),this.uniforms.mask=r,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(r.transform.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=r.transform.uClampFrame,t.applyFilter(this,e,i))},e}(h.default);e.default=f},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var a=i(26),o=n(a),s=i(146),h=n(s),u=function(){function t(e,i){r(this,t),this.gl=e,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var n=0;n<4;n++)this.interleaved[4*n]=this.vertices[2*n],this.interleaved[4*n+1]=this.vertices[2*n+1],this.interleaved[4*n+2]=this.uvs[2*n],this.interleaved[4*n+3]=this.uvs[2*n+1];this.indices=(0,h.default)(1),this.vertexBuffer=o.default.GLBuffer.createVertexBuffer(e,this.interleaved,e.STATIC_DRAW),this.indexBuffer=o.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.vao=new o.default.VertexArrayObject(e,i)}return t.prototype.initVao=function(t){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,t.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,t.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},t.prototype.map=function(t,e){var i=0,n=0;return this.uvs[0]=i,this.uvs[1]=n,this.uvs[2]=i+e.width/t.width,this.uvs[3]=n,this.uvs[4]=i+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=i,this.uvs[7]=n+e.height/t.height,i=e.x,n=e.y,this.vertices[0]=i,this.vertices[1]=n,this.vertices[2]=i+e.width,this.vertices[3]=n,this.vertices[4]=i+e.width,this.vertices[5]=n+e.height,this.vertices[6]=i,this.vertices[7]=n+e.height,this},t.prototype.upload=function(){for(var t=0;t<4;t++)this.interleaved[4*t]=this.vertices[2*t],this.interleaved[4*t+1]=this.vertices[2*t+1],this.interleaved[4*t+2]=this.uvs[2*t],this.interleaved[4*t+3]=this.uvs[2*t+1];return this.vertexBuffer.upload(this.interleaved),this},t.prototype.destroy=function(){var t=this.gl;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer)},t}();e.default=u},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(e,i,r,a,o,s,h,u,l){n(this,t),this.text=e,this.style=i,this.width=r,this.height=a,this.lines=o,this.lineWidths=s,this.lineHeight=h,this.maxLineWidth=u,this.fontProperties=l}return t.measureText=function(e,i,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t._canvas;n=void 0===n||null===n?i.wordWrap:n;var a=i.toFontString(),o=t.measureFont(a),s=r.getContext("2d");s.font=a;for(var h=n?t.wordWrap(e,i,r):e,u=h.split(/(?:\r\n|\r|\n)/),l=new Array(u.length),c=0,f=0;f<u.length;f++){var d=s.measureText(u[f]).width+(u[f].length-1)*i.letterSpacing;l[f]=d,c=Math.max(c,d)}var p=c+i.strokeThickness;i.dropShadow&&(p+=i.dropShadowDistance);var m=i.lineHeight||o.fontSize+i.strokeThickness,v=Math.max(m,o.fontSize+i.strokeThickness)+(u.length-1)*(m+i.leading);return i.dropShadow&&(v+=i.dropShadowDistance),new t(e,i,p,v,u,l,m+i.leading,c,o)},t.wordWrap=function(e,i){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t._canvas,r=n.getContext("2d"),a=0,o="",s="",h={},u=i.letterSpacing,l=i.whiteSpace,c=t.collapseSpaces(l),f=t.collapseNewlines(l),d=!c,p=i.wordWrapWidth+u,m=t.tokenize(e),v=0;v<m.length;v++){var g=m[v];if(t.isNewline(g)){if(!f){s+=t.addLine(o),d=!c,o="",a=0;continue}g=" "}if(c){var y=t.isBreakingSpace(g),_=t.isBreakingSpace(o[o.length-1]);if(y&&_)continue}var T=t.getFromCache(g,u,h,r);if(T>p)if(""!==o&&(s+=t.addLine(o),o="",a=0),t.canBreakWords(g,i.breakWords))for(var E=g.split(""),S=0;S<E.length;S++){for(var b=E[S],A=1;E[S+A];){var I=E[S+A],w=b[b.length-1];if(t.canBreakChars(w,I,g,S,i.breakWords))break;b+=I,A++}S+=b.length-1;var x=t.getFromCache(b,u,h,r);x+a>p&&(s+=t.addLine(o),d=!1,o="",a=0),o+=b,a+=x}else{o.length>0&&(s+=t.addLine(o),o="",a=0);var P=v===m.length-1;s+=t.addLine(g,!P),d=!1,o="",a=0}else T+a>p&&(d=!1,s+=t.addLine(o),o="",a=0),(o.length>0||!t.isBreakingSpace(g)||d)&&(o+=g,a+=T)}return s+=t.addLine(o,!1)},t.addLine=function(e){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e=t.trimRight(e),e=i?e+"\n":e},t.getFromCache=function(t,e,i,n){var r=i[t];if(void 0===r){var a=t.length*e;r=n.measureText(t).width+a,i[t]=r}return r},t.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},t.collapseNewlines=function(t){return"normal"===t},t.trimRight=function(e){if("string"!=typeof e)return"";for(var i=e.length-1;i>=0;i--){var n=e[i];if(!t.isBreakingSpace(n))break;e=e.slice(0,-1)}return e},t.isNewline=function(e){return"string"==typeof e&&t._newlines.indexOf(e.charCodeAt(0))>=0},t.isBreakingSpace=function(e){return"string"==typeof e&&t._breakingSpaces.indexOf(e.charCodeAt(0))>=0},t.tokenize=function(e){var i=[],n="";if("string"!=typeof e)return i;for(var r=0;r<e.length;r++){var a=e[r];t.isBreakingSpace(a)||t.isNewline(a)?(""!==n&&(i.push(n),n=""),i.push(a)):n+=a}return""!==n&&i.push(n),i},t.canBreakWords=function(t,e){return e},t.canBreakChars=function(t,e,i,n,r){return!0},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var i={},n=t._canvas,r=t._context;r.font=e;var a=t.METRICS_STRING+t.BASELINE_SYMBOL,o=Math.ceil(r.measureText(a).width),s=Math.ceil(r.measureText(t.BASELINE_SYMBOL).width),h=2*s;s=s*t.BASELINE_MULTIPLIER|0,n.width=o,n.height=h,r.fillStyle="#f00",r.fillRect(0,0,o,h),r.font=e,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText(a,0,s);var u=r.getImageData(0,0,o,h).data,l=u.length,c=4*o,f=0,d=0,p=!1;for(f=0;f<s;++f){for(var m=0;m<c;m+=4)if(255!==u[d+m]){p=!0;break}if(p)break;d+=c}for(i.ascent=s-f,d=l-c,p=!1,f=h;f>s;--f){for(var v=0;v<c;v+=4)if(255!==u[d+v]){p=!0;break}if(p)break;d-=c}return i.descent=f-s,i.fontSize=i.ascent+i.descent,t._fonts[e]=i,i},t.clearMetrics=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e?delete t._fonts[e]:t._fonts={}},t}();e.default=r;var a=document.createElement("canvas");a.width=a.height=10,r._canvas=a,r._context=a.getContext("2d"),r._fonts={},r.METRICS_STRING="|Éq",r.BASELINE_SYMBOL="M",r.BASELINE_MULTIPLIER=1.4,r._newlines=[10,13],r._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){return"number"==typeof t?(0,l.hex2string)(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function a(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=r(t[e]);return t}return r(t)}function o(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}function s(t,e,i){for(var n in i)Array.isArray(e[n])?t[n]=e[n].slice():t[n]=e[n]}e.__esModule=!0;var h=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i(3),l=i(7),c={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:u.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},f=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],d=function(){function t(e){n(this,t),this.styleID=0,this.reset(),s(this,e,e)}return t.prototype.clone=function(){var e={};return s(e,this,c),new t(e)},t.prototype.reset=function(){s(this,c,c)},t.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var i=e.length-1;i>=0;i--){var n=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&f.indexOf(n)<0&&(n='"'+n+'"'),e[i]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},h(t,[{key:"align",get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(t){var e=a(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(t){var e=a(t);this._fill!==e&&(this._fill=e,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(t){o(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}},{key:"leading",get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(t){var e=a(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)}},{key:"whiteSpace",get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}}]),t}();e.default=d},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(63),h=n(s),u=i(13),l=n(u),c=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,o=arguments[2],s=arguments[3];r(this,e);var h=a(this,t.call(this,null,o));return h.resolution=s||l.default.RESOLUTION,h.width=Math.ceil(i),h.height=Math.ceil(n),h.realWidth=h.width*h.resolution,h.realHeight=h.height*h.resolution,h.scaleMode=void 0!==o?o:l.default.SCALE_MODE,h.hasLoaded=!0,h._glRenderTargets={},h._canvasRenderTarget=null,h.valid=!1,h}return o(e,t),e.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),t===this.width&&e===this.height||(this.valid=t>0&&e>0,this.width=t,this.height=e,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},e.prototype.destroy=function(){t.prototype.destroy.call(this,!0),this.renderer=null},e}(h.default);e.default=c},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(139),o=function(t){return t&&t.__esModule?t:{default:t}}(a),s=new o.default,h=function(){function t(e,i){n(this,t),this._texture=e,this.mapCoord=new o.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=void 0===i?.5:i}return t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var i=this.mapCoord,n=0;n<t.length;n+=2){var r=t[n],a=t[n+1];e[n]=r*i.a+a*i.c+i.tx,e[n+1]=r*i.b+a*i.d+i.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._lastTextureID===e._updateID)return!1;this._lastTextureID=e._updateID;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=e.orig,r=e.trim;r&&(s.set(n.width/r.width,0,0,n.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(s));var a=e.baseTexture,o=this.uClampFrame,h=this.clampMargin/a.resolution,u=this.clampOffset;return o[0]=(e._frame.x+h+u)/a.width,o[1]=(e._frame.y+h+u)/a.height,o[2]=(e._frame.x+e._frame.width-h+u)/a.width,o[3]=(e._frame.y+e._frame.height-h+u)/a.height,this.uClampOffset[0]=u/a.realWidth,this.uClampOffset[1]=u/a.realHeight,!0},r(t,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture=t,this._lastTextureID=-1}}]),t}();e.default=h},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(217),a=function(t){return t&&t.__esModule?t:{default:t}}(r),o=function(){function t(){n(this,t),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return t.prototype.set=function(t,e,i){var n=e.width,r=e.height;if(i){var o=t.width/2/n,s=t.height/2/r,h=t.x/n+o,u=t.y/r+s;i=a.default.add(i,a.default.NW),this.x0=h+o*a.default.uX(i),this.y0=u+s*a.default.uY(i),i=a.default.add(i,2),this.x1=h+o*a.default.uX(i),this.y1=u+s*a.default.uY(i),i=a.default.add(i,2),this.x2=h+o*a.default.uX(i),this.y2=u+s*a.default.uY(i),i=a.default.add(i,2),this.x3=h+o*a.default.uX(i),this.y3=u+s*a.default.uY(i)}else this.x0=t.x/n,this.y0=t.y/r,this.x1=(t.x+t.width)/n,this.y1=t.y/r,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/r,this.x3=t.x/n,this.y3=(t.y+t.height)/r;this.uvsUint32[0]=(65535*this.y0&65535)<<16|65535*this.x0&65535,this.uvsUint32[1]=(65535*this.y1&65535)<<16|65535*this.x1&65535,this.uvsUint32[2]=(65535*this.y2&65535)<<16|65535*this.x2&65535,this.uvsUint32[3]=(65535*this.y3&65535)<<16|65535*this.x3&65535},t}();e.default=o},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){e||(t=t.split("?").shift().toLowerCase(),e="video/"+t.substr(t.lastIndexOf(".")+1));var i=document.createElement("source");return i.src=t,i.type=e,i}e.__esModule=!0;var h=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i(63),l=n(u),c=i(7),f=i(145),d=i(3),p=i(231),m=n(p),v=function(t){function e(i,n){if(r(this,e),!i)throw new Error("No video source element specified.");(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0);var o=a(this,t.call(this,i,n));return o.width=i.videoWidth,o.height=i.videoHeight,o._autoUpdate=!0,o._isAutoUpdating=!1,o.autoPlay=!0,o.update=o.update.bind(o),o._onCanPlay=o._onCanPlay.bind(o),i.addEventListener("play",o._onPlayStart.bind(o)),i.addEventListener("pause",o._onPlayStop.bind(o)),o.hasLoaded=!1,o.__loaded=!1,o._isSourceReady()?o._onCanPlay():(i.addEventListener("canplay",o._onCanPlay),i.addEventListener("canplaythrough",o._onCanPlay)),o}return o(e,t),e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},e.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(f.shared.add(this.update,this,d.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},e.prototype._onPlayStop=function(){this._isAutoUpdating&&(f.shared.remove(this.update,this),this._isAutoUpdating=!1)},e.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},e.prototype.destroy=function(){this._isAutoUpdating&&f.shared.remove(this.update,this),this.source&&this.source._pixiId&&(l.default.removeFromCache(this.source._pixiId),delete this.source._pixiId,this.source.pause(),this.source.src="",this.source.load()),t.prototype.destroy.call(this)},e.fromVideo=function(t,i){t._pixiId||(t._pixiId="video_"+(0,c.uid)());var n=c.BaseTextureCache[t._pixiId];return n||(n=new e(t,i),l.default.addToCache(n,t._pixiId)),n},e.fromUrl=function(t,i,n){var r=document.createElement("video");r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline","");var a=Array.isArray(t)?t[0].src||t[0]:t.src||t;if(void 0===n&&0!==a.indexOf("data:")?r.crossOrigin=(0,m.default)(a):n&&(r.crossOrigin="string"==typeof n?n:"anonymous"),Array.isArray(t))for(var o=0;o<t.length;++o)r.appendChild(s(t[o].src||t[o],t[o].mime));else r.appendChild(s(a,t.mime));return r.load(),e.fromVideo(r,i)},h(e,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isAutoUpdating?(f.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(f.shared.add(this.update,this,d.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),e}(l.default);e.default=v,v.fromUrls=v.fromUrl},function(t,e,i){"use strict";function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location;if(0===t.indexOf("data:"))return"";e=e||window.location,o||(o=document.createElement("a")),o.href=t,t=a.default.parse(o.href);var i=!t.port&&""===e.port||t.port===e.port;return t.hostname===e.hostname&&i&&t.protocol===e.protocol?"":"anonymous"}e.__esModule=!0,e.default=n;var r=i(249),a=function(t){return t&&t.__esModule?t:{default:t}}(r),o=void 0},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.BitmapText=e.TilingSpriteRenderer=e.TilingSprite=e.AnimatedSprite=void 0;var r=i(559);Object.defineProperty(e,"AnimatedSprite",{enumerable:!0,get:function(){return n(r).default}});var a=i(561);Object.defineProperty(e,"TilingSprite",{enumerable:!0,get:function(){return n(a).default}});var o=i(565);Object.defineProperty(e,"TilingSpriteRenderer",{enumerable:!0,get:function(){return n(o).default}});var s=i(560);Object.defineProperty(e,"BitmapText",{enumerable:!0,get:function(){return n(s).default}}),i(562),i(563),i(564)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(5),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(h),l=i(236),c=n(l),f=i(235),d=n(f),p=i(237),m=n(p),v=function(t){function e(i,n,o,s){r(this,e),s=s||5;var h=(0,c.default)(s,!0),l=(0,d.default)(s),f=a(this,t.call(this,h,l));return f.resolution=o||u.settings.RESOLUTION,f._quality=0,f.quality=n||4,f.strength=i||8,f.firstRun=!0,f}return o(e,t),e.prototype.apply=function(t,e,i,n){if(this.firstRun){var r=t.renderer.gl,a=(0,m.default)(r);this.vertexSrc=(0,c.default)(a,!0),this.fragmentSrc=(0,d.default)(a),this.firstRun=!1}if(this.uniforms.strength=1/i.size.width*(i.size.width/e.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,n);else{for(var o=t.getRenderTarget(!0),s=e,h=o,u=0;u<this.passes-1;u++){t.applyFilter(this,s,h,!0);var l=h;h=s,s=l}t.applyFilter(this,s,i,n),t.returnRenderTarget(o)}},s(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(u.Filter);e.default=v},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(5),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(h),l=i(236),c=n(l),f=i(235),d=n(f),p=i(237),m=n(p),v=function(t){function e(i,n,o,s){r(this,e),s=s||5;var h=(0,c.default)(s,!1),l=(0,d.default)(s),f=a(this,t.call(this,h,l));return f.resolution=o||u.settings.RESOLUTION,f._quality=0,f.quality=n||4,f.strength=i||8,f.firstRun=!0,f}return o(e,t),e.prototype.apply=function(t,e,i,n){if(this.firstRun){var r=t.renderer.gl,a=(0,m.default)(r);this.vertexSrc=(0,c.default)(a,!1),this.fragmentSrc=(0,d.default)(a),this.firstRun=!1}if(this.uniforms.strength=1/i.size.height*(i.size.height/e.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,n);else{for(var o=t.getRenderTarget(!0),s=e,h=o,u=0;u<this.passes-1;u++){t.applyFilter(this,s,h,!0);var l=h;h=s,s=l}t.applyFilter(this,s,i,n),t.returnRenderTarget(o)}},s(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(u.Filter);e.default=v},function(t,e,i){"use strict";function n(t){for(var e=r[t],i=e.length,n=a,o="",s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",h=void 0,u=0;u<t;u++){var l=s.replace("%index%",u);h=u,u>=i&&(h=t-u-1),l=l.replace("%value%",e[h]),o+=l,o+="\n"}return n=n.replace("%blur%",o),n=n.replace("%size%",t)}e.__esModule=!0,e.default=n;var r={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},a=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n")},function(t,e,i){"use strict";function n(t,e){var i=Math.ceil(t/2),n=r,a="",o=void 0;o=e?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var s=0;s<t;s++){var h=o.replace("%index%",s);h=h.replace("%sampleIndex%",s-(i-1)+".0"),a+=h,a+="\n"}return n=n.replace("%blur%",a),n=n.replace("%size%",t)}e.__esModule=!0,e.default=n;var r=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n")},function(t,e,i){"use strict";function n(t){for(var e=t.getParameter(t.MAX_VARYING_VECTORS),i=15;i>e;)i-=2;return i}e.__esModule=!0,e.default=n},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(5),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(a),s=function(){function t(){n(this,t),this.global=new o.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return t.prototype.getLocalPosition=function(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)},t.prototype.copyEvent=function(t){t.isPrimary&&(this.isPrimary=!0),this.button=t.button,this.buttons=Number.isInteger(t.buttons)?t.buttons:t.which,this.width=t.width,this.height=t.height,this.tiltX=t.tiltX,this.tiltY=t.tiltY,this.pointerType=t.pointerType,this.pressure=t.pressure,this.rotationAngle=t.rotationAngle,this.twist=t.twist||0,this.tangentialPressure=t.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},r(t,[{key:"pointerId",get:function(){return this.identifier}}]),t}();e.default=s},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(){n(this,t),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0},t.prototype.reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},t}();e.default=r},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(e){n(this,t),this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},r(t,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(t){this._flags=t}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},set:function(t){this._doSet(this.constructor.FLAGS.OVER,t)}},{key:"rightDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,t)}},{key:"leftDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.LEFT_DOWN,t)}}]),t}();e.default=a,a.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},function(t,e,i){"use strict";e.__esModule=!0,e.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0}},function(t,e,i){"use strict";function n(t,e){t.bitmapFont=s.BitmapText.registerFont(t.data,e)}e.__esModule=!0,e.parse=n,e.default=function(){return function(t,e){if(!t.data||t.type!==o.Resource.TYPE.XML)return void e();if(0===t.data.getElementsByTagName("page").length||0===t.data.getElementsByTagName("info").length||null===t.data.getElementsByTagName("info")[0].getAttribute("face"))return void e();var i=t.isDataUrl?"":a.dirname(t.url);t.isDataUrl&&("."===i&&(i=""),this.baseUrl&&i&&"/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(i+="/")),(i=i.replace(this.baseUrl,""))&&"/"!==i.charAt(i.length-1)&&(i+="/");for(var r=t.data.getElementsByTagName("page"),s={},h=function(i){s[i.metadata.pageFile]=i.texture,Object.keys(s).length===r.length&&(n(t,s),e())},u=0;u<r.length;++u){var l=r[u].getAttribute("file"),c=i+l,f=!1;for(var d in this.resources){var p=this.resources[d];if(p.url===c){p.metadata.pageFile=l,p.texture?h(p):p.onAfterMiddleware.add(h),f=!0;break}}if(!f){var m={crossOrigin:t.crossOrigin,loadType:o.Resource.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:l},t.metadata.imageMetadata),parentResource:t};this.add(c,m,h)}}}};var r=i(37),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(r),o=i(74),s=i(232)},function(t,e,i){"use strict";function n(t,e){return t.isDataUrl?t.data.meta.image:o.default.resolve(t.url.replace(e,""),t.data.meta.image)}e.__esModule=!0,e.default=function(){return function(t,e){var i=t.name+"_image";if(!t.data||t.type!==r.Resource.TYPE.JSON||!t.data.frames||this.resources[i])return void e();var a={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},o=n(t,this.baseUrl);this.add(i,o,a,function(i){if(i.error)return void e(i.error);var n=new s.Spritesheet(i.texture.baseTexture,t.data,t.url);n.parse(function(){t.spritesheet=n,t.textures=n.textures,e()})})}},e.getResourcePath=n;var r=i(74),a=i(249),o=function(t){return t&&t.__esModule?t:{default:t}}(a),s=i(5)},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(){return function(t,e){t.data&&t.type===n.Resource.TYPE.IMAGE&&(t.texture=a.default.fromLoader(t.data,t.url,t.name)),e()}};var n=i(74),r=i(44),a=function(t){return t&&t.__esModule?t:{default:t}}(r)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var o=i(73),s=function(t){return t&&t.__esModule?t:{default:t}}(o),h=function(t){function e(i,a,o){n(this,e);var h=r(this,t.call(this,i));return h._ready=!0,h.verticesX=a||10,h.verticesY=o||10,h.drawMode=s.default.DRAW_MODES.TRIANGLES,h.refresh(),h}return a(e,t),e.prototype._refresh=function(){for(var t=this._texture,e=this.verticesX*this.verticesY,i=[],n=[],r=[],a=[],o=this.verticesX-1,s=this.verticesY-1,h=t.width/o,u=t.height/s,l=0;l<e;l++){var c=l%this.verticesX,f=l/this.verticesX|0;i.push(c*h,f*u),r.push(c/o,f/s)}for(var d=o*s,p=0;p<d;p++){var m=p%o,v=p/o|0,g=v*this.verticesX+m,y=v*this.verticesX+m+1,_=(v+1)*this.verticesX+m,T=(v+1)*this.verticesX+m+1;a.push(g,y,_),a.push(y,T,_)}this.vertices=new Float32Array(i),this.uvs=new Float32Array(r),this.colors=new Float32Array(n),this.indices=new Uint16Array(a),this.dirty++,this.indexDirty++,this.multiplyUvs()},e.prototype._onTextureUpdate=function(){s.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},e}(s.default);e.default=h},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(e){n(this,t),this.maxItemsPerFrame=e,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();e.default=r},function(t,e,i){"use strict";function n(){}function r(t,e,i,n){var r=0,a=t.length;!function o(s){if(s||r===a)return void(i&&i(s));n?setTimeout(function(){e(t[r++],o)},1):e(t[r++],o)}()}function a(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}function o(t,e){function i(t,e,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");if(s.started=!0,null==t&&s.idle())return void setTimeout(function(){return s.drain()},1);var r={data:t,callback:"function"==typeof i?i:n};e?s._tasks.unshift(r):s._tasks.push(r),setTimeout(function(){return s.process()},1)}function r(t){return function(){o-=1,t.callback.apply(t,arguments),null!=arguments[0]&&s.error(arguments[0],t.data),o<=s.concurrency-s.buffer&&s.unsaturated(),s.idle()&&s.drain(),s.process()}}if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var o=0,s={_tasks:[],concurrency:e,saturated:n,unsaturated:n,buffer:e/4,empty:n,drain:n,error:n,started:!1,paused:!1,push:function(t,e){i(t,!1,e)},kill:function(){o=0,s.drain=n,s.started=!1,s._tasks=[]},unshift:function(t,e){i(t,!0,e)},process:function(){for(;!s.paused&&o<s.concurrency&&s._tasks.length;){var e=s._tasks.shift();0===s._tasks.length&&s.empty(),o+=1,o===s.concurrency&&s.saturated(),t(e.data,a(r(e)))}},length:function(){return s._tasks.length},running:function(){return o},idle:function(){return s._tasks.length+o===0},pause:function(){!0!==s.paused&&(s.paused=!0)},resume:function(){if(!1!==s.paused){s.paused=!1;for(var t=1;t<=s.concurrency;t++)s.process()}}};return s}e.__esModule=!0,e.eachSeries=r,e.queue=o},function(t,e,i){"use strict";function n(t){for(var e="",i=0;i<t.length;){for(var n=[0,0,0],a=[0,0,0,0],o=0;o<n.length;++o)i<t.length?n[o]=255&t.charCodeAt(i++):n[o]=0;a[0]=n[0]>>2,a[1]=(3&n[0])<<4|n[1]>>4,a[2]=(15&n[1])<<2|n[2]>>6,a[3]=63&n[2];switch(i-(t.length-1)){case 2:a[3]=64,a[2]=64;break;case 1:a[3]=64}for(var s=0;s<a.length;++s)e+=r.charAt(a[s])}return e}e.__esModule=!0,e.encodeBinary=n;var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(t,e,i){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function r(t,e,i){if(t&&u.isObject(t)&&t instanceof n)return t;var r=new n;return r.parse(t,e,i),r}function a(t){return u.isString(t)&&(t=r(t)),t instanceof n?t.format():n.prototype.format.call(t)}function o(t,e){return r(t,!1,!0).resolve(e)}function s(t,e){return t?r(t,!1,!0).resolveObject(e):e}var h=i(503),u=i(604);e.parse=r,e.resolve=o,e.resolveObject=s,e.format=a,e.Url=n;var l=/^([a-z0-9.+-]+:)/i,c=/:[0-9]*$/,f=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,d=["<",">",'"',"`"," ","\r","\n","\t"],p=["{","}","|","\\","^","`"].concat(d),m=["'"].concat(p),v=["%","/","?",";","#"].concat(m),g=["/","?","#"],y=/^[+a-z0-9A-Z_-]{0,63}$/,_=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,T={javascript:!0,"javascript:":!0},E={javascript:!0,"javascript:":!0},S={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=i(599);n.prototype.parse=function(t,e,i){if(!u.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),r=-1!==n&&n<t.indexOf("#")?"?":"#",a=t.split(r),o=/\\/g;a[0]=a[0].replace(o,"/"),t=a.join(r);var s=t;if(s=s.trim(),!i&&1===t.split("#").length){var c=f.exec(s);if(c)return this.path=s,this.href=s,this.pathname=c[1],c[2]?(this.search=c[2],this.query=e?b.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var d=l.exec(s);if(d){d=d[0];var p=d.toLowerCase();this.protocol=p,s=s.substr(d.length)}if(i||d||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var A="//"===s.substr(0,2);!A||d&&E[d]||(s=s.substr(2),this.slashes=!0)}if(!E[d]&&(A||d&&!S[d])){for(var I=-1,w=0;w<g.length;w++){var x=s.indexOf(g[w]);-1!==x&&(-1===I||x<I)&&(I=x)}var P,M;M=-1===I?s.lastIndexOf("@"):s.lastIndexOf("@",I),-1!==M&&(P=s.slice(0,M),s=s.slice(M+1),this.auth=decodeURIComponent(P)),I=-1;for(var w=0;w<v.length;w++){var x=s.indexOf(v[w]);-1!==x&&(-1===I||x<I)&&(I=x)}-1===I&&(I=s.length),this.host=s.slice(0,I),s=s.slice(I),this.parseHost(),this.hostname=this.hostname||"";var O="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!O)for(var C=this.hostname.split(/\./),w=0,R=C.length;w<R;w++){var k=C[w];if(k&&!k.match(y)){for(var D="",L=0,N=k.length;L<N;L++)k.charCodeAt(L)>127?D+="x":D+=k[L];if(!D.match(y)){var G=C.slice(0,w),F=C.slice(w+1),U=k.match(_);U&&(G.push(U[1]),F.unshift(U[2])),F.length&&(s="/"+F.join(".")+s),this.hostname=G.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),O||(this.hostname=h.toASCII(this.hostname));var B=this.port?":"+this.port:"",j=this.hostname||"";this.host=j+B,this.href+=this.host,O&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!T[p])for(var w=0,R=m.length;w<R;w++){var V=m[w];if(-1!==s.indexOf(V)){var X=encodeURIComponent(V);X===V&&(X=escape(V)),s=s.split(V).join(X)}}var H=s.indexOf("#");-1!==H&&(this.hash=s.substr(H),s=s.slice(0,H));var Y=s.indexOf("?");if(-1!==Y?(this.search=s.substr(Y),this.query=s.substr(Y+1),e&&(this.query=b.parse(this.query)),s=s.slice(0,Y)):e&&(this.search="",this.query={}),s&&(this.pathname=s),S[p]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var B=this.pathname||"",W=this.search||"";this.path=B+W}return this.href=this.format(),this},n.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",n=this.hash||"",r=!1,a="";this.host?r=t+this.host:this.hostname&&(r=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&u.isObject(this.query)&&Object.keys(this.query).length&&(a=b.stringify(this.query));var o=this.search||a&&"?"+a||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||S[e])&&!1!==r?(r="//"+(r||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):r||(r=""),n&&"#"!==n.charAt(0)&&(n="#"+n),o&&"?"!==o.charAt(0)&&(o="?"+o),i=i.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),o=o.replace("#","%23"),e+r+i+o+n},n.prototype.resolve=function(t){return this.resolveObject(r(t,!1,!0)).format()},n.prototype.resolveObject=function(t){if(u.isString(t)){var e=new n;e.parse(t,!1,!0),t=e}for(var i=new n,r=Object.keys(this),a=0;a<r.length;a++){var o=r[a];i[o]=this[o]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),h=0;h<s.length;h++){var l=s[h];"protocol"!==l&&(i[l]=t[l])}return S[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!S[t.protocol]){for(var c=Object.keys(t),f=0;f<c.length;f++){var d=c[f];i[d]=t[d]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||E[t.protocol])i.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),i.pathname=p.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var m=i.pathname||"",v=i.search||"";i.path=m+v}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var g=i.pathname&&"/"===i.pathname.charAt(0),y=t.host||t.pathname&&"/"===t.pathname.charAt(0),_=y||g||i.host&&t.pathname,T=_,b=i.pathname&&i.pathname.split("/")||[],p=t.pathname&&t.pathname.split("/")||[],A=i.protocol&&!S[i.protocol];if(A&&(i.hostname="",i.port=null,i.host&&(""===b[0]?b[0]=i.host:b.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),_=_&&(""===p[0]||""===b[0])),y)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,b=p;else if(p.length)b||(b=[]),b.pop(),b=b.concat(p),i.search=t.search,i.query=t.query;else if(!u.isNullOrUndefined(t.search)){if(A){i.hostname=i.host=b.shift();var I=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@");I&&(i.auth=I.shift(),i.host=i.hostname=I.shift())}return i.search=t.search,i.query=t.query,u.isNull(i.pathname)&&u.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!b.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var w=b.slice(-1)[0],x=(i.host||t.host||b.length>1)&&("."===w||".."===w)||""===w,P=0,M=b.length;M>=0;M--)w=b[M],"."===w?b.splice(M,1):".."===w?(b.splice(M,1),P++):P&&(b.splice(M,1),P--);if(!_&&!T)for(;P--;P)b.unshift("..");!_||""===b[0]||b[0]&&"/"===b[0].charAt(0)||b.unshift(""),x&&"/"!==b.join("/").substr(-1)&&b.push("");var O=""===b[0]||b[0]&&"/"===b[0].charAt(0);if(A){i.hostname=i.host=O?"":b.length?b.shift():"";var I=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@");I&&(i.auth=I.shift(),i.host=i.hostname=I.shift())}return _=_||i.host&&b.length,_&&!O&&b.unshift(""),b.length?i.pathname=b.join("/"):(i.pathname=null,i.path=null),u.isNull(i.pathname)&&u.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},n.prototype.parseHost=function(){var t=this.host,e=c.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,i){"use strict";(function(t){function e(t){t/=60*APP.ticker.speed,gIsInterrupt||(gIsShowBanner?(BANNER.Update(t),BANNER.Render()):(gTotalTimeSpent>0&&(gTotalTimeSpent+=t),APP.Update(t),APP.Render()))}function n(){gIsInterrupt||(gIsInterrupt=!0,StateManager.Pause())}function r(){gIsInterrupt&&(gIsInterrupt=!1,StateManager.Resume())}i(573),t.gIsInterrupt=!1,t.gTotalTimeSpent=0,t.gIngameTimeSpent=0,t.gLoadingTimeSpent=0,t.gIsShowBanner=!1,t.gIsSizeChanged=!1,t.Resource=i(259),i(252),Resource.Init(function(){t.UserProfile=i(260),t.Leaderboard=i(154),t.CreativeLog=i(153),t.DeviceInfo=i(100),t.GameConfig=i(99),t.APP=i(101),t.Timer=i(104),t.Input=i(102),t.StateManager=i(103),t.TrackingManager=i(254),t.Utils=i(149),t.AudioManager=i(150),t.GLText=i(46),t.GuiManager=i(152),t.DataDefine=i(158),t.GameDefine=i(159),t.StatePreLoad=i(164),t.StateLoading=i(163),t.StateIngame=i(162),t.StateGameOver=i(161),GameConfig.isUseBanner&&(t.BANNER=i(253)),window.isDisableIFrameLoader||main(),Utils.DispatchEvent("document_ready")}),window.onBackPressed=function(){StateManager.Back()};window.onControllerEvent=function(t,e){16===t&&0===e&&onBackPressed()},window.onGamePause=function(){n()},window.onGameResume=function(){r()},window.onShake=function(){StateManager.Shake()},window.onTilt=function(){StateManager.Tilt()},window.onresize=function(){gIsSizeChanged||(APP.Resize(),StateManager.Resize())},window.main=function(){if(Utils.AddLoadingWheel(),AudioManager.Init(),GameConfig.isUseBanner)try{window.REVIEW&&iView.setBanner(!0),t.StateBanner=i(298),StateBanner.Load()}catch(t){}else Utils.PauseHostGameMusic(),window.isPreloadReady=!0,StateManager.PushState(StatePreLoad);if(APP.Init(e),GameConfig.isUseBanner)TrackingManager.SendEventTracking(TrackingManager.TRACKING_ACTION_AD_LOADED);else{var n=GameConfig.Get3rdPartyImpression();n&&n.startsWith("http")&&!window.isOutfit7&&(n=n.replace("{[timestamp]}","[timestamp]"),n=n.replace("[timestamp]",Date.now()),TrackingManager.SetPixelTracking(TrackingManager.TRACKING_ACTION_IMPRESSIONS,n)),TrackingManager.SendEventTracking([TrackingManager.TRACKING_ACTION_AD_LOADED,TrackingManager.TRACKING_ACTION_IMPRESSIONS])}TrackingManager.format!=TrackingManager.TRCKING_FORMAT_BLS&&TrackingManager.format!=TrackingManager.TRCKING_FORMAT_VHERO&&TrackingManager.format!=TrackingManager.TRCKING_FORMAT_VSCORE&&TrackingManager.format!=TrackingManager.TRCKING_FORMAT_VIDEO_FORM&&TrackingManager.format!=TrackingManager.TRCKING_FORMAT_VINT&&TrackingManager.format!=TrackingManager.TRCKING_FORMAT_FAKE_CALL&&TrackingManager.format!=TrackingManager.TRCKING_FORMAT_FAKE_CALL_VIDEO&&TrackingManager.format!=TrackingManager.TRCKING_FORMAT_MINT_MIG&&TrackingManager.format!=TrackingManager.TRCKING_FORMAT_VSTORY&&TrackingManager.format!=TrackingManager.TRCKING_FORMAT_HYBRID&&TrackingManager.format!=TrackingManager.TRCKING_FORMAT_FORM_INTERACTIONS||(gTotalTimeSpent=.01)},window.getVPAIDAd=function(){return t.VPaid=i(261),VPaid}}).call(e,i(21))},function(t,e,i){"use strict";(function(t){function e(t,e,i){t[e]||Object[n](t,e,{writable:!0,configurable:!0,value:i})}if(i(501),i(600),i(302),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;var n="defineProperty";e(String.prototype,"padLeft","".padStart),e(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&e(Array,t,Function.call.bind([][t]))})}).call(e,i(98))},function(t,e,i){"use strict";(function(t){Resource.Init=function(e){e=function(){t.UserProfile=i(295),t.Leaderboard=i(154),t.CreativeLog=i(153),t.DeviceInfo=i(100),t.GameConfig=i(99),t.APP=i(101),t.Timer=i(104),t.Input=i(102),t.StateManager=i(103),t.TrackingManager=i(293),t.Utils=i(149),t.AudioManager=i(150),t.GLText=i(46),t.GuiManager=i(152),t.DataDefine=i(158),t.GameDefine=i(159),t.StatePreLoad=i(164),t.StateLoading=i(163),t.StateIngame=i(162),t.StateGameOver=i(161),window.isDisableIFrameLoader||main(),Utils.DispatchEvent("document_ready")},window.isDisableIFrameLoader?e&&e():(this.requesterCallback={},this.DeliveryTagCreateRequester(e))}}).call(e,i(21))},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(t){function e(){n(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.renderer=PIXI.autoDetectRenderer(GameConfig.bannerWidth,GameConfig.bannerHeight,{backgroundColor:16711680},!0),t.hitArea=new PIXI.Rectangle(0,0,GameConfig.bannerWidth,GameConfig.bannerHeight),t.interactive=!0,t.on("pointerup",t.TouchHandler),t.on("pointerdown",t.TouchHandler),t.on("pointermove",t.TouchHandler),t}return a(e,t),o(e,[{key:"AddChild",value:function(t){this.addChild(t)}},{key:"RemoveChild",value:function(t){this.removeChild(t)}},{key:"Show",value:function(){document.body.appendChild(this.renderer.view),gIsShowBanner=!0,APP.Hide(),"undefined"!=typeof reward_delivered&&reward_delivered&&(closeWithReward(),StateIngame.GotReward()),setTimeout(function(){StateManager.Pause(),clearTimeout(this)},100)}},{key:"Hide",value:function(){Utils.PauseHostGameMusic(),document.body.removeChild(this.renderer.view),StateManager.IsEmpty()&&StateManager.PushState(StatePreLoad),gIsShowBanner=!1,APP.Show()}},{key:"Resize",value:function(){this.ratio=window.innerHeight/window.innerWidth,this.renderer.resize(GameConfig.bannerWidth,GameConfig.bannerWidth*this.ratio)}},{key:"Update",value:function(t){var e=!0,i=!1,n=void 0;try{for(var r,a=this.children[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=r.value;o.Update&&o.Update(t)}}catch(t){i=!0,n=t}finally{try{!e&&a.return&&a.return()}finally{if(i)throw n}}}},{key:"Render",value:function(){this.renderer.render(this)}},{key:"TouchHandler",value:function(t){var e=!0,i=!1,n=void 0;try{for(var r,a=this.children[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=r.value;o.TouchHandler&&o.TouchHandler(t)}}catch(t){i=!0,n=t}finally{try{!e&&a.return&&a.return()}finally{if(i)throw n}}}}]),e}(PIXI.Container);t.exports=new s},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(){n(this,t)}return r(t,[{key:"SaveStatsOld",value:function(){}},{key:"SetFormat",value:function(t){}},{key:"SetScoreParam",value:function(t){}},{key:"SetPageInfo",value:function(t,e){}},{key:"SetPixelTracking",value:function(t,e){}},{key:"GetSourceGameGGI",value:function(){}},{key:"SendEventTracking",value:function(){}},{key:"SendPayload",value:function(){}}]),t}();t.exports=new a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(){n(this,t),this.url="",this.ext="",this.player=null,this.isLoaded=!1,this.isLoop=!1,this.callback=null,this.onEndAudio=null}return r(t,[{key:"Init",value:function(){this.player&&delete this.player,this.isLoaded=!1}},{key:"GetExtension",value:function(t){return t.substr(t.lastIndexOf("."),4)}},{key:"SetSource",value:function(t){var e=this;this.player&&delete this.player,this.player=new Audio,Resource.GetAssetUrl(t).then(function(t){e.player.src=t,e.player.volume=1,e.player.preload="auto",e.player.load()}).catch(function(t){Utils.DispatchEvent("LoadingError")})}},{key:"Onload",value:function(){null!==this.callback&&this.callback(),this.isLoaded=!0}},{key:"IsLoaded",value:function(){return this.isLoaded}},{key:"Load",value:function(t,e){""!=t?(this.isLoaded=!1,this.url=t,this.callback=e,this.ext=this.GetExtension(t),this.SetSource(t),this.CheckStatus()):e()}},{key:"OnEndAudio",value:function(){this.player.currentTime=0,this.player.play()}},{key:"CheckStatus",value:function(){this.player&&4==this.player.readyState?(null!=this.callback&&this.callback(),this.isLoaded=!0):this.player&&this.player.error?Utils.DispatchEvent("LoadingError"):setTimeout(this.CheckStatus.bind(this),50)}},{key:"Stop",value:function(){if(this.player)try{this.player.paused||(this.player.pause(),this.player.currentTime=0,this.isLoop&&(this.isLoop=!1,this.player.removeEventListener("ended",this.onEndAudio)))}catch(t){}}},{key:"Play",value:function(t,e){if(this.player)try{this.isLoop=t,this.isLoop&&(this.onEndAudio=this.OnEndAudio.bind(this),this.player.addEventListener("ended",this.onEndAudio)),this.player.volume=e,this.player.play()}catch(t){}}},{key:"Pause",value:function(){if(this.player)try{this.player.pause(),this.player.removeEventListener("ended",this.onEndAudio)}catch(t){}}},{key:"SetVolume",value:function(t){this.player&&(this.player.volume=t)}}]),t}();t.exports=a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(255),o=function(){function t(){n(this,t),this.audioElement=null,this.audioFiles=null,this.count=0,this.isMuteSoundPlayed=!1,this.isLoad=!1,this.shouldCheckSound=null}return r(t,[{key:"Init",value:function(){this.audioElement=[],this.isLoad=!1;for(var t=0;t<GameConfig.soundMax;t++)this.audioElement[t]=new a,this.audioElement[t].Init(Utils.OMSGetData("sound/mute.m4a"));this.InitMute()}},{key:"Load",value:function(t){this.audioFiles=t,this.SequentiallyLoad()}},{key:"SequentiallyLoad",value:function(){if(this.count>=this.audioFiles.length)return void(this.isLoad=!0);this.audioElement[this.count].Load(this.audioFiles[this.count++].file,this.SequentiallyLoad.bind(this))}},{key:"GetCurrentTimeMS",value:function(t){return this.audioElement[t]?1e3*this.audioElement[t].currentTime:0}},{key:"IsLoaded",value:function(){return this.isLoad}},{key:"InitMute",value:function(){this.shouldCheckSound=this.ShouldCheckSound.bind(this),document.addEventListener("touchstart",this.shouldCheckSound)}},{key:"ShouldCheckSound",value:function(){if(!this.isMuteSoundPlayed){this.isMuteSoundPlayed=!0,document.removeEventListener("touchstart",this.shouldCheckSound);for(var t=0;t<this.audioElement.length;t++)this.audioElement[t].Play(!1,0),this.audioElement[t].Stop()}}},{key:"SetVolume",value:function(t,e){t<this.audioFiles.length&&this.audioElement[t].SetVolume(e)}},{key:"Play",value:function(t,e){t<this.audioFiles.length&&this.audioElement[t].Play(e,1)}},{key:"Stop",value:function(t){t<this.audioFiles.length&&this.audioElement[t].Stop()}},{key:"Pause",value:function(t){t<this.audioFiles.length&&this.audioElement[t].Pause()}}]),t}();t.exports=new o},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(e,i,r,a){n(this,t),this.context=e,this.urlList=i,this.onLoad=r,this.bufferList=new Array,this.count=0,this.onError=a}return r(t,[{key:"LoadBuffer",value:function(t,e){var i=this;if(""==t)return void(++i.count==i.urlList.length&&i.onLoad(i.bufferList));Resource.GetAssetData(t).then(function(t){i.context.decodeAudioData(t,function(t){if(!t)return void i.onError();i.bufferList[e]=t,++i.count==i.urlList.length&&i.onLoad(i.bufferList)},function(t){i.onError()})}).catch(function(t){return i.onError()})}},{key:"Load",value:function(){for(var t=0;t<this.urlList.length;++t)this.LoadBuffer(Utils.OMSGetRoot(this.urlList[t].file),t)}}]),t}();t.exports=a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(){n(this,t),this.x=0,this.y=0,this.width=0,this.height=0}return r(t,[{key:"Set",value:function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height}},{key:"Scale",value:function(t,e){return this.x*=t,this.y*=e,this.width*=t,this.height*=e,this}},{key:"Translate",value:function(t,e){return this.x+=t,this.y+=e,this}},{key:"Clone",value:function(){var e=new t;return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}}]),t}();t.exports=a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(105),o=function(){function t(){var e=this;n(this,t),function(){"gold"!==window.omsPhase&&document.addEventListener("document_ready",function(){window._show_touchzone=!1;var t={vw:function(t){return window.innerWidth*t/100},vh:function(t){return window.innerHeight*t/100},vmax:function(t){return Math.max(window.innerHeight,window.innerWidth)*t/100},vmin:function(t){return Math.min(window.innerHeight,window.innerWidth)*t/100}},e=function(){var t=document.createElement("div");t.innerHTML="<style> .info-close { position: absolute; padding: 5px; cursor: pointer; right: 0px; top: 0px; background-color: red; color: white; border: solid 1px lightcoral; } .info-context {position: absolute;     left: 50%;     top: 50%;     padding: 10px;     padding-top: 30px;     background-color: white;     z-index: 999999999;     border: solid 1px lightslategray;     transform: translate(-50%,-50%);     -webkit-transform: translate(-50%,-50%);     font-size: 11px;     font-family: monospace;} .show-cta { padding: 5px; cursor: pointer; background-color: red; color: white; border: solid 1px lightcoral; margin: 5px; border-radius: 5px; text-align:center; } </style>  ";var e=document.createElement("div");e.innerHTML="X",e.className="info-close",t.appendChild(e);var i=document.createElement("div");i.style.color="red",i.innerHTML="MID: "+(window.omsPID||"N/A")+"</br>",i.innerHTML+="Phase: "+window.omsPhase+"</br>",i.innerHTML+="Version: "+window.omsVersion+"</br>",i.innerHTML+="Creative ID: "+(window.creative_id||"N/A")+"</br>",i.innerHTML+="Campaign ID: "+(window.campaign_id||"N/A")+"</br>",i.innerHTML+="Anonymous: "+(window.anonymous||"n/a")+"</br>",i.innerHTML+="FromCache: "+(window.fromCache||"n/a")+"</br>",t.appendChild(i);var n=document.createElement("div");n.className="show-cta",n.innerHTML=window._show_touchzone?"Hide touch zones":"Show touch zones",t.appendChild(n);var r=document.createElement("div");r.className="show-cta",r.innerHTML="Clear my LB entry",r.onclick=function(){Leaderboard.DeleteMyEntry().then(function(t){alert("Your LB entry was deleted!")}).catch(function(t){alert(t)})},t.appendChild(r);var a=document.createElement("div");a.className="show-cta",a.innerHTML="Clear my profile",a.onclick=function(){UserProfile.Save({}).then(function(t){alert("Your profile was deleted!")}).catch(function(t){alert(t)})},t.appendChild(a),e.onclick=function(){try{document.body.removeChild(t)}catch(t){}},n.onclick=function(t){return t.preventDefault(),window._show_touchzone=!window._show_touchzone,window._show_touchzone?window.showTouchZone&&setTimeout(window.showTouchZone,1):window.hideTouchZone&&setTimeout(window.hideTouchZone,1),n.innerHTML=window._show_touchzone?"Hide touch zones":"Show touch zones",!1},t.className="info-context",document.body.appendChild(t)},i=!1,n=function(e){i=!1,e=e.touches?e.touches[0]:e,e.clientX<t.vw(10)&&e.clientY>t.vh(90)&&(i=!0)},r=function(n){n=n.changedTouches?n.changedTouches[0]:n,i&&n.clientX>t.vw(90)&&n.clientY>t.vh(90)&&e(),i=!1};document.body.addEventListener("touchstart",n),document.body.addEventListener("touchend",r),document.body.addEventListener("mousedown",n),document.body.addEventListener("mouseup",r)})}(),this.args={},decodeURI((window.strStatsUrl||"").split("?").pop()).split("&").forEach(function(t){var i=t.split("=");e.args[i[0]]=decodeURIComponent(i[1])})}return r(t,[{key:"Init",value:function(t){window.isDisableIFrameLoader?t&&t():(this.requesterCallback={},this.DeliveryTagCreateRequester(t)),window.creative_id&&window.omsPID&&window.omsPhase&&"gold"!=window.omsPhase&&this.Request("post",a.REST_API_SERVER+"/api/pri/projects/cnumber/"+window.omsPID+"/"+window.omsPhase,JSON.stringify({number:window.creative_id})).then(function(t){}).catch(function(t){console.log(t)})}},{key:"Request",value:function(t,e,i,n){return new Promise(function(r,a){var o=new XMLHttpRequest;o.open(t,e,!0),"post"==t&&o.setRequestHeader("Content-type","application/json"),n&&(o.responseType=n),o.onreadystatechange=function(){4==o.readyState&&(200==o.status||"1"==window.fromCache?r(o.response):a("error"))},o.send(i)})}},{key:"CreateObjectURL",value:function(t){return(window.URL||window.webkitURL).createObjectURL(t)}},{key:"RevokeObjectURL",value:function(t){if(t.startsWith("blob:")){(window.URL||window.webkitURL).revokeObjectURL(t)}}},{key:"LoadCSS",value:function(t){this.GetAssetData(t,"text").then(function(t){var e=document.createElement("style");e.innerHTML=t,document.head.appendChild(e)}).catch(function(t){})}},{key:"LoadFont",value:function(t,e){var i=this;return new Promise(function(n,r){var a=document.createElement("style");document.head.appendChild(a),i.GetAssetUrl(e,"arraybuffer").then(function(e){if(e instanceof ArrayBuffer){var i=new Uint8Array(e),o=i.reduce(function(t,e){return t+String.fromCharCode(e)},"");e="data:;base64,"+window.btoa(o)}a.innerHTML="@font-face{font-family: "+t+";src: url("+e+");}";var s=document.createElement("span");s.style.position="absolute",s.style.visibility="hidden",s.style.opacity="0",s.style.top="-9999px",s.style.left="-9999px",s.style.fontSize="250px",s.style.fontFamily="monospace",s.innerHTML="qwertyuiopasdfghjklzxcvbnm1234567890",document.body.appendChild(s);var h=s.offsetWidth;s.style.fontFamily=t;var u=(new Date).getTime();!function t(){var e=s.offsetWidth;h!==e?n():(new Date).getTime()-u>1e3?r():setTimeout(t,30)}()}).catch(function(t){return r(t)})})}},{key:"SaveForm",value:function(t,e){var i={token:window.token||"browser",campaign_id:window.campaign_id||"NA",creative_id:window.creative_id||"NA",device_identificator:t,data:e};return this.Request("post",a.REST_API_SERVER+"/acq/save_form",JSON.stringify(i))}},{key:"CheckConstraints",value:function(t,e){var i={token:window.token||"browser",campaign_id:window.campaign_id||"NA",creative_id:window.creative_id||"NA",device_identificator:t,data:e};return this.Request("post",a.REST_API_SERVER+"/acq/check_constraints",JSON.stringify(i))}},{key:"GetCTALink",value:function(t){t=t||"CTA1";var e=JSON.parse(window.ctarequest||"{}"),i=e[t]||"https://cta_link_"+encodeURIComponent(t)+"_does_not_configured_in_the_acq.com";return i=i.replace("link:","")}},{key:"Base64ToArrayBuffer",value:function(t){for(var e=window.atob(t.split("base64,")[1].replace(/\s/g,"")),i=new Uint8Array(e.length),n=0;n<e.length;n++)i[n]=e.charCodeAt(n);return i.buffer}},{key:"GetAssetName",value:function(t){if(window.omsPublish){var e=t.replace(/(\.|\/)/g,"_").toLowerCase();return omsEmbeds[e]?omsEmbeds[e]:omsAssets[e]}return t}},{key:"GetAssetUrl",value:function(t,e){var i=this,n=this.GetAssetName(t);return"1"==window.fromCache?n?n.startsWith("data:")?new Promise(function(t,r){t("arraybuffer"==e?i.Base64ToArrayBuffer(n):n)}):new Promise(function(t,e){t(n)}):this.Request("get",a.ASSET_URL.replace("{name}",t),null):window.omsPublish||"reward.121.default.png"==t?(n||(n=t),n.startsWith("data:")?new Promise(function(t,r){t("arraybuffer"==e?i.Base64ToArrayBuffer(n):n)}):window.isDisableIFrameLoader||"url"==e?this.Request("get",a.ASSET_URL.replace("{name}",n).replace("{time}",(new Date).getTime()),null):new Promise(function(t,r){i.DeliveryTagGetAssetData(n,e).then(function(e){t(e)}).catch(function(t){r(t)})})):new Promise(function(e,i){e(t)})}},{key:"GetAssetData",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"arraybuffer";return new Promise(function(n,r){e.GetAssetUrl(t,i).then(function(t){window.isDisableIFrameLoader?t instanceof ArrayBuffer?n(t):e.Request("get",t,null,i).then(function(t){n(t)}).catch(function(t){return r(t)}):n(t)}).catch(function(t){return r(t)})})}},{key:"IsSupportReward",value:function(){return window.reward_currency&&"{[rewardCurrency]}"!=window.reward_currency}},{key:"GetRewardIcon",value:function(){if(""+this.args.game_id=="649")return"reward.121.default.png";var t=this.IsSupportReward()?window.reward_currency:"default";return"reward."+(this.args.game_id||"121")+"."+t+".png"}},{key:"GetParam",value:function(t){return window.omsPublish?omsParams[t]:t}},{key:"DeliveryTagCreateRequester",value:function(t){var e=this;this.Request("get",""+a.ASSET_URL.replace("{name}","loader.html"),null,"text").then(function(e){var i=document.createElement("iframe");i.src=e,i.id="requester",i.style.display="none",document.body.appendChild(i),i.onload=function(){t&&t()}}).catch(function(t){}),window.onmessage=function(t){var i=t.data;i.key&&e.requesterCallback[i.key](i)}}},{key:"DeliveryTagSendRequest",value:function(t,e,i){var n=t.replace(/(\.|\/)/g,"_").toLowerCase(),r={key:n,name:t,type:e};document.getElementById("requester").contentWindow.postMessage(r,"*"),this.requesterCallback[n]=i}},{key:"DeliveryTagGetAssetData",value:function(t,e){var i=this;return new Promise(function(n,r){i.DeliveryTagSendRequest(t,e,function(t){t.response?n(t.response):r(t.error)})})}}]),t}();t.exports=new o},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(){n(this,t)}return r(t,[{key:"Load",value:function(){}},{key:"Save",value:function(){}}]),t}();t.exports=new a},function(t,e,i){"use strict";(function(e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(){n(this,t),console.log("Vpaid Init"),this.slot=null,this.videoSlot=null,this.video=null,this.events={},this.parameters={},this.attributes={companions:"",desiredBitrate:256,duration:15,remainingTime:-1,expanded:!1,icons:!1,linear:!0,adSkippableState:!0,viewMode:"normal",width:0,height:0,volume:1},this.isDMTouchInteractionsZoneHidden=!0,this.isDMVpaidFrameShow=!1,this.isSkipped=!1,e.DeviceInfo=i(100),e.GameConfig=i(99),e.APP=i(101),e.Timer=i(104),e.Input=i(102),e.StateManager=i(103)}return r(t,[{key:"DispatchEvent",value:function(t){t in this.events&&this.events[t]()}},{key:"ADMobileAndTabletcheck",value:function(){var t=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t}},{key:"DMShowDmpVpaidFrame",value:function(){if(this.ADMobileAndTabletcheck()&&!this.isDMVpaidFrameShow)try{for(var t=window;null===t.document.getElementById("dmp_vpaid-frame")&&t!==t.parent;)t=t.parent;var e=t.document.getElementById("dmp_vpaid-frame");if(e){e.style.pointerEvents="auto",this.isDMVpaidFrameShow=!0;var i=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,n=t.document.getElementById("dmp_vpaid-frame");new i(function(t){t.forEach(function(t){"attributes"===t.type&&t.target&&t.target.style&&"none"===t.target.style.pointerEvents&&(t.target.style.pointerEvents="auto")})}).observe(n,{attributes:!0})}}catch(t){console.log("DMShowDmpVpaidFrame "+t)}}},{key:"DMShowTouchInteractionsZone",value:function(){if(this.ADMobileAndTabletcheck()&&!this.isDMTouchInteractionsZoneHidden)try{for(var t=window;t.document.getElementsByClassName("np_TouchInteractionsZone").length<1&&t!==t.parent;)t=t.parent;var e=t.document.getElementsByClassName("np_TouchInteractionsZone")[0];e&&(e.style.pointerEvents="auto",this.isDMTouchInteractionsZoneHidden=!0)}catch(t){console.log("DMShowTouchInteractionsZone "+t)}}},{key:"DMHideTouchInteractionsZone",value:function(){if(this.ADMobileAndTabletcheck()&&this.isDMTouchInteractionsZoneHidden)try{for(var t=window;t.document.getElementsByClassName("np_TouchInteractionsZone").length<1&&t!==t.parent;)t=t.parent;var e=t.document.getElementsByClassName("np_TouchInteractionsZone")[0];e&&(e.style.pointerEvents="none",this.isDMTouchInteractionsZoneHidden=!1)}catch(t){console.log("DMHideTouchInteractionsZone "+t)}}},{key:"OnVideoTimeChange",value:function(){this.isSkipped||this.DispatchEvent("AdDurationChange")}},{key:"OnVideoCanPlayThrough",value:function(){this.DispatchEvent("AdVideoStart")}},{key:"handshakeVersion",value:function(t){return console.log("handshakeVersion"),t}},{key:"initAd",value:function(t,e,i,n,r,a){var o=this;if(console.log("initAd"),this.slot=a.slot,this.videoSlot=a.videoSlot,this.video=this.videoSlot.videoElement||this.videoSlot.style&&this.videoSlot||document.createElement("video"),this.video.addEventListener("timeupdate",this.OnVideoTimeChange.bind(this),!1),this.video.addEventListener("canplaythrough",this.OnVideoCanPlayThrough.bind(this),!1),this.slot&&(window.innerWidth=t,window.innerHeight=e,this.slot.appendChild(APP.renderer.view),APP.Resize()),r.AdParameters){var s=JSON.parse(r.AdParameters),h=s.attributes||{};Object.keys(h).forEach(function(t){o.attributes[t]=h[t]}),this.parameters=s}this.attributes.width=t,this.attributes.height=e,this.attributes.viewMode=i,this.attributes.desiredBitrate=n,setTimeout(function(){o.DispatchEvent("AdLoaded")},100)}},{key:"resizeAd",value:function(t,e,i){console.log("resizeAd"),this.attributes.width=t,this.attributes.height=e,this.attributes.viewMode=i,window.innerWidth=t,window.innerHeight=e,APP.Resize(),this.DispatchEvent("AdSizeChange")}},{key:"startAd",value:function(){console.log("startAd"),this.startTime=(new Date).getTime(),this.DMShowDmpVpaidFrame(),this.DispatchEvent("AdStarted"),this.DispatchEvent("AdImpression")}},{key:"stopAd",value:function(){console.log("stopAd"),this.isSkipped=!0,this.DispatchEvent("AdStopped")}},{key:"pauseAd",value:function(){console.log("pauseAd"),onGamePause(),this.DMShowTouchInteractionsZone(),this.DispatchEvent("AdPaused")}},{key:"resumeAd",value:function(){console.log("resumeAd"),onGameResume(),this.DMHideTouchInteractionsZone(),this.DispatchEvent("AdPlaying")}},{key:"expandAd",value:function(){console.log("expandAd"),this.DispatchEvent("AdExpandedChange")}},{key:"getAdExpanded",value:function(t){console.log("getAdExpanded"),this.DispatchEvent("AdExpandedChange")}},{key:"collapseAd",value:function(){console.log("collapseAd"),this.DispatchEvent("AdExpandedChange")}},{key:"skipAd",value:function(){this.isSkipped=!0,console.log("skipAd"),this.DispatchEvent("AdSkipped")}},{key:"getAdSkippableState",value:function(){return console.log("getAdSkippableState"),this.attributes.adSkippableState}},{key:"setAdVolume",value:function(t){console.log("setAdVolume"),this.video.volume=t,this.video.muted=0==t,this.attributes.volume=t,this.DispatchEvent("AdVolumeChanged")}},{key:"getAdVolume",value:function(){return console.log("getAdVolume"),this.attributes.volume}},{key:"subscribe",value:function(t,e,i){console.log("subscribe "+e),this.events[e]=t.bind(i)}},{key:"unsubscribe",value:function(t,e){console.log("unsubscribe "+e),this.events[e]=null}},{key:"getAdWidth",value:function(){return this.attributes.width}},{key:"getAdHeight",value:function(){return this.attributes.height}},{key:"getAdRemainingTime",value:function(){return Math.floor(this.getAdDuration()-this.video.currentTime)}},{key:"getAdDuration",value:function(){return isNaN(this.video.duration)||this.video.duration<1?this.attributes.duration:this.video.duration}},{key:"getAdCompanions",value:function(){return this.attributes.companions}},{key:"getAdIcons",value:function(){return this.attributes.icons}},{key:"onAdImpression",value:function(){this.DispatchEvent("AdImpression")}},{key:"getAdLinear",value:function(){return!0}}]),t}();t.exports=new a}).call(e,i(21))},function(t,e,i){"use strict";var n,r=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){!function(t){var e=function(){function t(t,e,i){if(null==t)throw new Error("name cannot be null.");if(null==e)throw new Error("timelines cannot be null.");this.name=t,this.timelines=e,this.duration=i}return t.prototype.apply=function(t,e,i,n,r,a,o,s){if(null==t)throw new Error("skeleton cannot be null.");n&&0!=this.duration&&(i%=this.duration,e>0&&(e%=this.duration));for(var h=this.timelines,u=0,l=h.length;u<l;u++)h[u].apply(t,e,i,r,a,o,s)},t.binarySearch=function(t,e,i){void 0===i&&(i=1);var n=0,r=t.length/i-2;if(0==r)return i;for(var a=r>>>1;;){if(t[(a+1)*i]<=e?n=a+1:r=a,n==r)return(n+1)*i;a=n+r>>>1}},t.linearSearch=function(t,e,i){for(var n=0,r=t.length-i;n<=r;n+=i)if(t[n]>e)return n;return-1},t}();t.Animation=e;var i;!function(t){t[t.setup=0]="setup",t[t.first=1]="first",t[t.replace=2]="replace",t[t.add=3]="add"}(i=t.MixBlend||(t.MixBlend={}));var n;!function(t){t[t.mixIn=0]="mixIn",t[t.mixOut=1]="mixOut"}(n=t.MixDirection||(t.MixDirection={}));var a;!function(t){t[t.rotate=0]="rotate",t[t.translate=1]="translate",t[t.scale=2]="scale",t[t.shear=3]="shear",t[t.attachment=4]="attachment",t[t.color=5]="color",t[t.deform=6]="deform",t[t.event=7]="event",t[t.drawOrder=8]="drawOrder",t[t.ikConstraint=9]="ikConstraint",t[t.transformConstraint=10]="transformConstraint",t[t.pathConstraintPosition=11]="pathConstraintPosition",t[t.pathConstraintSpacing=12]="pathConstraintSpacing",t[t.pathConstraintMix=13]="pathConstraintMix",t[t.twoColor=14]="twoColor"}(a=t.TimelineType||(t.TimelineType={}));var o=function(){function e(i){if(i<=0)throw new Error("frameCount must be > 0: "+i);this.curves=t.Utils.newFloatArray((i-1)*e.BEZIER_SIZE)}return e.prototype.getFrameCount=function(){return this.curves.length/e.BEZIER_SIZE+1},e.prototype.setLinear=function(t){this.curves[t*e.BEZIER_SIZE]=e.LINEAR},e.prototype.setStepped=function(t){this.curves[t*e.BEZIER_SIZE]=e.STEPPED},e.prototype.getCurveType=function(t){var i=t*e.BEZIER_SIZE;if(i==this.curves.length)return e.LINEAR;var n=this.curves[i];return n==e.LINEAR?e.LINEAR:n==e.STEPPED?e.STEPPED:e.BEZIER},e.prototype.setCurve=function(t,i,n,r,a){var o=.03*(2*-i+r),s=.03*(2*-n+a),h=.006*(3*(i-r)+1),u=.006*(3*(n-a)+1),l=2*o+h,c=2*s+u,f=.3*i+o+.16666667*h,d=.3*n+s+.16666667*u,p=t*e.BEZIER_SIZE,m=this.curves;m[p++]=e.BEZIER;for(var v=f,g=d,y=p+e.BEZIER_SIZE-1;p<y;p+=2)m[p]=v,m[p+1]=g,f+=l,d+=c,l+=h,c+=u,v+=f,g+=d},e.prototype.getCurvePercent=function(i,n){n=t.MathUtils.clamp(n,0,1);var r=this.curves,a=i*e.BEZIER_SIZE,o=r[a];if(o==e.LINEAR)return n;if(o==e.STEPPED)return 0;a++;for(var s=0,h=a,u=a+e.BEZIER_SIZE-1;a<u;a+=2)if((s=r[a])>=n){var l=void 0,c=void 0;return a==h?(l=0,c=0):(l=r[a-2],c=r[a-1]),c+(r[a+1]-c)*(n-l)/(s-l)}var f=r[a-1];return f+(1-f)*(n-s)/(1-s)},e.LINEAR=0,e.STEPPED=1,e.BEZIER=2,e.BEZIER_SIZE=19,e}();t.CurveTimeline=o;var s=function(n){function o(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e<<1),i}return r(o,n),o.prototype.getPropertyId=function(){return(a.rotate<<24)+this.boneIndex},o.prototype.setFrame=function(t,e,i){t<<=1,this.frames[t]=e,this.frames[t+o.ROTATION]=i},o.prototype.apply=function(t,n,r,a,s,h,u){var l=this.frames,c=t.bones[this.boneIndex];if(c.active)if(r<l[0])switch(h){case i.setup:return void(c.rotation=c.data.rotation);case i.first:var f=c.data.rotation-c.rotation;c.rotation+=(f-360*(16384-(16384.499999999996-f/360|0)))*s}else if(r>=l[l.length-o.ENTRIES]){var d=l[l.length+o.PREV_ROTATION];switch(h){case i.setup:c.rotation=c.data.rotation+d*s;break;case i.first:case i.replace:d+=c.data.rotation-c.rotation,d-=360*(16384-(16384.499999999996-d/360|0));case i.add:c.rotation+=d*s}}else{var p=e.binarySearch(l,r,o.ENTRIES),m=l[p+o.PREV_ROTATION],v=l[p],g=this.getCurvePercent((p>>1)-1,1-(r-v)/(l[p+o.PREV_TIME]-v)),y=l[p+o.ROTATION]-m;switch(y=m+(y-360*(16384-(16384.499999999996-y/360|0)))*g,h){case i.setup:c.rotation=c.data.rotation+(y-360*(16384-(16384.499999999996-y/360|0)))*s;break;case i.first:case i.replace:y+=c.data.rotation-c.rotation;case i.add:c.rotation+=(y-360*(16384-(16384.499999999996-y/360|0)))*s}}},o.ENTRIES=2,o.PREV_TIME=-2,o.PREV_ROTATION=-1,o.ROTATION=1,o}(o);t.RotateTimeline=s;var h=function(n){function o(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*o.ENTRIES),i}return r(o,n),o.prototype.getPropertyId=function(){return(a.translate<<24)+this.boneIndex},o.prototype.setFrame=function(t,e,i,n){t*=o.ENTRIES,this.frames[t]=e,this.frames[t+o.X]=i,this.frames[t+o.Y]=n},o.prototype.apply=function(t,n,r,a,s,h,u){var l=this.frames,c=t.bones[this.boneIndex];if(c.active)if(r<l[0])switch(h){case i.setup:return c.x=c.data.x,void(c.y=c.data.y);case i.first:c.x+=(c.data.x-c.x)*s,c.y+=(c.data.y-c.y)*s}else{var f=0,d=0;if(r>=l[l.length-o.ENTRIES])f=l[l.length+o.PREV_X],d=l[l.length+o.PREV_Y];else{var p=e.binarySearch(l,r,o.ENTRIES);f=l[p+o.PREV_X],d=l[p+o.PREV_Y];var m=l[p],v=this.getCurvePercent(p/o.ENTRIES-1,1-(r-m)/(l[p+o.PREV_TIME]-m));f+=(l[p+o.X]-f)*v,d+=(l[p+o.Y]-d)*v}switch(h){case i.setup:c.x=c.data.x+f*s,c.y=c.data.y+d*s;break;case i.first:case i.replace:c.x+=(c.data.x+f-c.x)*s,c.y+=(c.data.y+d-c.y)*s;break;case i.add:c.x+=f*s,c.y+=d*s}}},o.ENTRIES=3,o.PREV_TIME=-3,o.PREV_X=-2,o.PREV_Y=-1,o.X=1,o.Y=2,o}(o);t.TranslateTimeline=h;var u=function(o){function s(t){return o.call(this,t)||this}return r(s,o),s.prototype.getPropertyId=function(){return(a.scale<<24)+this.boneIndex},s.prototype.apply=function(r,a,o,h,u,l,c){var f=this.frames,d=r.bones[this.boneIndex];if(d.active)if(o<f[0])switch(l){case i.setup:return d.scaleX=d.data.scaleX,void(d.scaleY=d.data.scaleY);case i.first:d.scaleX+=(d.data.scaleX-d.scaleX)*u,d.scaleY+=(d.data.scaleY-d.scaleY)*u}else{var p=0,m=0;if(o>=f[f.length-s.ENTRIES])p=f[f.length+s.PREV_X]*d.data.scaleX,m=f[f.length+s.PREV_Y]*d.data.scaleY;else{var v=e.binarySearch(f,o,s.ENTRIES);p=f[v+s.PREV_X],m=f[v+s.PREV_Y];var g=f[v],y=this.getCurvePercent(v/s.ENTRIES-1,1-(o-g)/(f[v+s.PREV_TIME]-g));p=(p+(f[v+s.X]-p)*y)*d.data.scaleX,m=(m+(f[v+s.Y]-m)*y)*d.data.scaleY}if(1==u)l==i.add?(d.scaleX+=p-d.data.scaleX,d.scaleY+=m-d.data.scaleY):(d.scaleX=p,d.scaleY=m);else{var _=0,T=0;if(c==n.mixOut)switch(l){case i.setup:_=d.data.scaleX,T=d.data.scaleY,d.scaleX=_+(Math.abs(p)*t.MathUtils.signum(_)-_)*u,d.scaleY=T+(Math.abs(m)*t.MathUtils.signum(T)-T)*u;break;case i.first:case i.replace:_=d.scaleX,T=d.scaleY,d.scaleX=_+(Math.abs(p)*t.MathUtils.signum(_)-_)*u,d.scaleY=T+(Math.abs(m)*t.MathUtils.signum(T)-T)*u;break;case i.add:_=d.scaleX,T=d.scaleY,d.scaleX=_+(Math.abs(p)*t.MathUtils.signum(_)-d.data.scaleX)*u,d.scaleY=T+(Math.abs(m)*t.MathUtils.signum(T)-d.data.scaleY)*u}else switch(l){case i.setup:_=Math.abs(d.data.scaleX)*t.MathUtils.signum(p),T=Math.abs(d.data.scaleY)*t.MathUtils.signum(m),d.scaleX=_+(p-_)*u,d.scaleY=T+(m-T)*u;break;case i.first:case i.replace:_=Math.abs(d.scaleX)*t.MathUtils.signum(p),T=Math.abs(d.scaleY)*t.MathUtils.signum(m),d.scaleX=_+(p-_)*u,d.scaleY=T+(m-T)*u;break;case i.add:_=t.MathUtils.signum(p),T=t.MathUtils.signum(m),d.scaleX=Math.abs(d.scaleX)*_+(p-Math.abs(d.data.scaleX)*_)*u,d.scaleY=Math.abs(d.scaleY)*T+(m-Math.abs(d.data.scaleY)*T)*u}}}},s}(h);t.ScaleTimeline=u;var l=function(t){function n(e){return t.call(this,e)||this}return r(n,t),n.prototype.getPropertyId=function(){return(a.shear<<24)+this.boneIndex},n.prototype.apply=function(t,r,a,o,s,h,u){var l=this.frames,c=t.bones[this.boneIndex];if(c.active)if(a<l[0])switch(h){case i.setup:return c.shearX=c.data.shearX,void(c.shearY=c.data.shearY);case i.first:c.shearX+=(c.data.shearX-c.shearX)*s,c.shearY+=(c.data.shearY-c.shearY)*s}else{var f=0,d=0;if(a>=l[l.length-n.ENTRIES])f=l[l.length+n.PREV_X],d=l[l.length+n.PREV_Y];else{var p=e.binarySearch(l,a,n.ENTRIES);f=l[p+n.PREV_X],d=l[p+n.PREV_Y];var m=l[p],v=this.getCurvePercent(p/n.ENTRIES-1,1-(a-m)/(l[p+n.PREV_TIME]-m));f+=(l[p+n.X]-f)*v,d+=(l[p+n.Y]-d)*v}switch(h){case i.setup:c.shearX=c.data.shearX+f*s,c.shearY=c.data.shearY+d*s;break;case i.first:case i.replace:c.shearX+=(c.data.shearX+f-c.shearX)*s,c.shearY+=(c.data.shearY+d-c.shearY)*s;break;case i.add:c.shearX+=f*s,c.shearY+=d*s}}},n}(h);t.ShearTimeline=l;var c=function(n){function o(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*o.ENTRIES),i}return r(o,n),o.prototype.getPropertyId=function(){return(a.color<<24)+this.slotIndex},o.prototype.setFrame=function(t,e,i,n,r,a){t*=o.ENTRIES,this.frames[t]=e,this.frames[t+o.R]=i,this.frames[t+o.G]=n,this.frames[t+o.B]=r,this.frames[t+o.A]=a},o.prototype.apply=function(t,n,r,a,s,h,u){var l=t.slots[this.slotIndex];if(l.bone.active){var c=this.frames;if(r<c[0])switch(h){case i.setup:return void l.color.setFromColor(l.data.color);case i.first:var f=l.color,d=l.data.color;f.add((d.r-f.r)*s,(d.g-f.g)*s,(d.b-f.b)*s,(d.a-f.a)*s)}else{var p=0,m=0,v=0,g=0;if(r>=c[c.length-o.ENTRIES]){var y=c.length;p=c[y+o.PREV_R],m=c[y+o.PREV_G],v=c[y+o.PREV_B],g=c[y+o.PREV_A]}else{var _=e.binarySearch(c,r,o.ENTRIES);p=c[_+o.PREV_R],m=c[_+o.PREV_G],v=c[_+o.PREV_B],g=c[_+o.PREV_A];var T=c[_],E=this.getCurvePercent(_/o.ENTRIES-1,1-(r-T)/(c[_+o.PREV_TIME]-T));p+=(c[_+o.R]-p)*E,m+=(c[_+o.G]-m)*E,v+=(c[_+o.B]-v)*E,g+=(c[_+o.A]-g)*E}if(1==s)l.color.set(p,m,v,g);else{var f=l.color;h==i.setup&&f.setFromColor(l.data.color),f.add((p-f.r)*s,(m-f.g)*s,(v-f.b)*s,(g-f.a)*s)}}}},o.ENTRIES=5,o.PREV_TIME=-5,o.PREV_R=-4,o.PREV_G=-3,o.PREV_B=-2,o.PREV_A=-1,o.R=1,o.G=2,o.B=3,o.A=4,o}(o);t.ColorTimeline=c;var f=function(n){function o(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*o.ENTRIES),i}return r(o,n),o.prototype.getPropertyId=function(){return(a.twoColor<<24)+this.slotIndex},o.prototype.setFrame=function(t,e,i,n,r,a,s,h,u){t*=o.ENTRIES,this.frames[t]=e,this.frames[t+o.R]=i,this.frames[t+o.G]=n,this.frames[t+o.B]=r,this.frames[t+o.A]=a,this.frames[t+o.R2]=s,this.frames[t+o.G2]=h,this.frames[t+o.B2]=u},o.prototype.apply=function(t,n,r,a,s,h,u){var l=t.slots[this.slotIndex];if(l.bone.active){var c=this.frames;if(r<c[0])switch(h){case i.setup:return l.color.setFromColor(l.data.color),void l.darkColor.setFromColor(l.data.darkColor);case i.first:var f=l.color,d=l.darkColor,p=l.data.color,m=l.data.darkColor;f.add((p.r-f.r)*s,(p.g-f.g)*s,(p.b-f.b)*s,(p.a-f.a)*s),d.add((m.r-d.r)*s,(m.g-d.g)*s,(m.b-d.b)*s,0)}else{var v=0,g=0,y=0,_=0,T=0,E=0,S=0;if(r>=c[c.length-o.ENTRIES]){var b=c.length;v=c[b+o.PREV_R],g=c[b+o.PREV_G],y=c[b+o.PREV_B],_=c[b+o.PREV_A],T=c[b+o.PREV_R2],E=c[b+o.PREV_G2],S=c[b+o.PREV_B2]}else{var A=e.binarySearch(c,r,o.ENTRIES);v=c[A+o.PREV_R],g=c[A+o.PREV_G],y=c[A+o.PREV_B],_=c[A+o.PREV_A],T=c[A+o.PREV_R2],E=c[A+o.PREV_G2],S=c[A+o.PREV_B2];var I=c[A],w=this.getCurvePercent(A/o.ENTRIES-1,1-(r-I)/(c[A+o.PREV_TIME]-I));v+=(c[A+o.R]-v)*w,g+=(c[A+o.G]-g)*w,y+=(c[A+o.B]-y)*w,_+=(c[A+o.A]-_)*w,T+=(c[A+o.R2]-T)*w,E+=(c[A+o.G2]-E)*w,S+=(c[A+o.B2]-S)*w}if(1==s)l.color.set(v,g,y,_),l.darkColor.set(T,E,S,1);else{var f=l.color,d=l.darkColor;h==i.setup&&(f.setFromColor(l.data.color),d.setFromColor(l.data.darkColor)),f.add((v-f.r)*s,(g-f.g)*s,(y-f.b)*s,(_-f.a)*s),d.add((T-d.r)*s,(E-d.g)*s,(S-d.b)*s,0)}}}},o.ENTRIES=8,o.PREV_TIME=-8,o.PREV_R=-7,o.PREV_G=-6,o.PREV_B=-5,o.PREV_A=-4,o.PREV_R2=-3,o.PREV_G2=-2,o.PREV_B2=-1,o.R=1,o.G=2,o.B=3,o.A=4,o.R2=5,o.G2=6,o.B2=7,o}(o);t.TwoColorTimeline=f;var d=function(){function r(e){this.frames=t.Utils.newFloatArray(e),this.attachmentNames=new Array(e)}return r.prototype.getPropertyId=function(){return(a.attachment<<24)+this.slotIndex},r.prototype.getFrameCount=function(){return this.frames.length},r.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.attachmentNames[t]=i},r.prototype.apply=function(t,r,a,o,s,h,u){var l=t.slots[this.slotIndex];if(l.bone.active){if(u==n.mixOut&&h==i.setup){var c=l.data.attachmentName;return void l.setAttachment(null==c?null:t.getAttachment(this.slotIndex,c))}var f=this.frames;if(a<f[0]){if(h==i.setup||h==i.first){var d=l.data.attachmentName;l.setAttachment(null==d?null:t.getAttachment(this.slotIndex,d))}}else{var p=0;p=a>=f[f.length-1]?f.length-1:e.binarySearch(f,a,1)-1;var m=this.attachmentNames[p];t.slots[this.slotIndex].setAttachment(null==m?null:t.getAttachment(this.slotIndex,m))}}},r}();t.AttachmentTimeline=d;var p=null,m=function(n){function o(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e),i.frameVertices=new Array(e),null==p&&(p=t.Utils.newFloatArray(64)),i}return r(o,n),o.prototype.getPropertyId=function(){return(a.deform<<27)+ +this.attachment.id+this.slotIndex},o.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.frameVertices[t]=i},o.prototype.apply=function(n,r,a,o,s,h,u){var l=n.slots[this.slotIndex];if(l.bone.active){var c=l.getAttachment();if(c instanceof t.VertexAttachment&&c.deformAttachment==this.attachment){var f=l.deform;0==f.length&&(h=i.setup);var d=this.frameVertices,p=d[0].length,m=this.frames;if(a<m[0]){var v=c;switch(h){case i.setup:return void(f.length=0);case i.first:if(1==s){f.length=0;break}var g=t.Utils.setArraySize(f,p);if(null==v.bones)for(var y=v.vertices,_=0;_<p;_++)g[_]+=(y[_]-g[_])*s;else{s=1-s;for(var _=0;_<p;_++)g[_]*=s}}}else{var T=t.Utils.setArraySize(f,p);if(a>=m[m.length-1]){var E=d[m.length-1];if(1==s)if(h==i.add){var v=c;if(null==v.bones)for(var y=v.vertices,S=0;S<p;S++)T[S]+=E[S]-y[S];else for(var b=0;b<p;b++)T[b]+=E[b]}else t.Utils.arrayCopy(E,0,T,0,p);else switch(h){case i.setup:var A=c;if(null==A.bones)for(var y=A.vertices,I=0;I<p;I++){var w=y[I];T[I]=w+(E[I]-w)*s}else for(var x=0;x<p;x++)T[x]=E[x]*s;break;case i.first:case i.replace:for(var P=0;P<p;P++)T[P]+=(E[P]-T[P])*s;case i.add:var v=c;if(null==v.bones)for(var y=v.vertices,M=0;M<p;M++)T[M]+=(E[M]-y[M])*s;else for(var O=0;O<p;O++)T[O]+=E[O]*s}}else{var C=e.binarySearch(m,a),R=d[C-1],k=d[C],D=m[C],L=this.getCurvePercent(C-1,1-(a-D)/(m[C-1]-D));if(1==s)if(h==i.add){var v=c;if(null==v.bones)for(var y=v.vertices,N=0;N<p;N++){var G=R[N];T[N]+=G+(k[N]-G)*L-y[N]}else for(var F=0;F<p;F++){var G=R[F];T[F]+=G+(k[F]-G)*L}}else for(var U=0;U<p;U++){var G=R[U];T[U]=G+(k[U]-G)*L}else switch(h){case i.setup:var B=c;if(null==B.bones)for(var y=B.vertices,j=0;j<p;j++){var G=R[j],w=y[j];T[j]=w+(G+(k[j]-G)*L-w)*s}else for(var V=0;V<p;V++){var G=R[V];T[V]=(G+(k[V]-G)*L)*s}break;case i.first:case i.replace:for(var X=0;X<p;X++){var G=R[X];T[X]+=(G+(k[X]-G)*L-T[X])*s}break;case i.add:var v=c;if(null==v.bones)for(var y=v.vertices,H=0;H<p;H++){var G=R[H];T[H]+=(G+(k[H]-G)*L-y[H])*s}else for(var Y=0;Y<p;Y++){var G=R[Y];T[Y]+=(G+(k[Y]-G)*L)*s}}}}}}},o}(o);t.DeformTimeline=m;var v=function(){function i(e){this.frames=t.Utils.newFloatArray(e),this.events=new Array(e)}return i.prototype.getPropertyId=function(){return a.event<<24},i.prototype.getFrameCount=function(){return this.frames.length},i.prototype.setFrame=function(t,e){this.frames[t]=e.time,this.events[t]=e},i.prototype.apply=function(t,i,n,r,a,o,s){if(null!=r){var h=this.frames,u=this.frames.length;if(i>n)this.apply(t,i,Number.MAX_VALUE,r,a,o,s),i=-1;else if(i>=h[u-1])return;if(!(n<h[0])){var l=0;if(i<h[0])l=0;else{l=e.binarySearch(h,i);for(var c=h[l];l>0&&h[l-1]==c;)l--}for(;l<u&&n>=h[l];l++)r.push(this.events[l])}}},i}();t.EventTimeline=v;var g=function(){function r(e){this.frames=t.Utils.newFloatArray(e),this.drawOrders=new Array(e)}return r.prototype.getPropertyId=function(){return a.drawOrder<<24},r.prototype.getFrameCount=function(){return this.frames.length},r.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.drawOrders[t]=i},r.prototype.apply=function(r,a,o,s,h,u,l){var c=r.drawOrder,f=r.slots;if(l==n.mixOut&&u==i.setup)return void t.Utils.arrayCopy(r.slots,0,r.drawOrder,0,r.slots.length);var d=this.frames;if(o<d[0])return void(u!=i.setup&&u!=i.first||t.Utils.arrayCopy(r.slots,0,r.drawOrder,0,r.slots.length));var p=0;p=o>=d[d.length-1]?d.length-1:e.binarySearch(d,o)-1;var m=this.drawOrders[p];if(null==m)t.Utils.arrayCopy(f,0,c,0,f.length);else for(var v=0,g=m.length;v<g;v++)c[v]=f[m[v]]},r}();t.DrawOrderTimeline=g;var y=function(o){function s(e){var i=o.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*s.ENTRIES),i}return r(s,o),s.prototype.getPropertyId=function(){return(a.ikConstraint<<24)+this.ikConstraintIndex},s.prototype.setFrame=function(t,e,i,n,r,a,o){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.MIX]=i,this.frames[t+s.SOFTNESS]=n,this.frames[t+s.BEND_DIRECTION]=r,this.frames[t+s.COMPRESS]=a?1:0,this.frames[t+s.STRETCH]=o?1:0},s.prototype.apply=function(t,r,a,o,h,u,l){var c=this.frames,f=t.ikConstraints[this.ikConstraintIndex];if(f.active)if(a<c[0])switch(u){case i.setup:return f.mix=f.data.mix,f.softness=f.data.softness,f.bendDirection=f.data.bendDirection,f.compress=f.data.compress,void(f.stretch=f.data.stretch);case i.first:f.mix+=(f.data.mix-f.mix)*h,f.softness+=(f.data.softness-f.softness)*h,f.bendDirection=f.data.bendDirection,f.compress=f.data.compress,f.stretch=f.data.stretch}else{if(a>=c[c.length-s.ENTRIES])return void(u==i.setup?(f.mix=f.data.mix+(c[c.length+s.PREV_MIX]-f.data.mix)*h,f.softness=f.data.softness+(c[c.length+s.PREV_SOFTNESS]-f.data.softness)*h,l==n.mixOut?(f.bendDirection=f.data.bendDirection,f.compress=f.data.compress,f.stretch=f.data.stretch):(f.bendDirection=c[c.length+s.PREV_BEND_DIRECTION],f.compress=0!=c[c.length+s.PREV_COMPRESS],f.stretch=0!=c[c.length+s.PREV_STRETCH])):(f.mix+=(c[c.length+s.PREV_MIX]-f.mix)*h,f.softness+=(c[c.length+s.PREV_SOFTNESS]-f.softness)*h,l==n.mixIn&&(f.bendDirection=c[c.length+s.PREV_BEND_DIRECTION],f.compress=0!=c[c.length+s.PREV_COMPRESS],f.stretch=0!=c[c.length+s.PREV_STRETCH])));var d=e.binarySearch(c,a,s.ENTRIES),p=c[d+s.PREV_MIX],m=c[d+s.PREV_SOFTNESS],v=c[d],g=this.getCurvePercent(d/s.ENTRIES-1,1-(a-v)/(c[d+s.PREV_TIME]-v));u==i.setup?(f.mix=f.data.mix+(p+(c[d+s.MIX]-p)*g-f.data.mix)*h,f.softness=f.data.softness+(m+(c[d+s.SOFTNESS]-m)*g-f.data.softness)*h,l==n.mixOut?(f.bendDirection=f.data.bendDirection,f.compress=f.data.compress,f.stretch=f.data.stretch):(f.bendDirection=c[d+s.PREV_BEND_DIRECTION],f.compress=0!=c[d+s.PREV_COMPRESS],f.stretch=0!=c[d+s.PREV_STRETCH])):(f.mix+=(p+(c[d+s.MIX]-p)*g-f.mix)*h,f.softness+=(m+(c[d+s.SOFTNESS]-m)*g-f.softness)*h,l==n.mixIn&&(f.bendDirection=c[d+s.PREV_BEND_DIRECTION],f.compress=0!=c[d+s.PREV_COMPRESS],f.stretch=0!=c[d+s.PREV_STRETCH]))}},s.ENTRIES=6,s.PREV_TIME=-6,s.PREV_MIX=-5,s.PREV_SOFTNESS=-4,s.PREV_BEND_DIRECTION=-3,s.PREV_COMPRESS=-2,s.PREV_STRETCH=-1,s.MIX=1,s.SOFTNESS=2,s.BEND_DIRECTION=3,s.COMPRESS=4,s.STRETCH=5,s}(o);t.IkConstraintTimeline=y;var _=function(n){function o(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*o.ENTRIES),i}return r(o,n),o.prototype.getPropertyId=function(){return(a.transformConstraint<<24)+this.transformConstraintIndex},o.prototype.setFrame=function(t,e,i,n,r,a){t*=o.ENTRIES,this.frames[t]=e,this.frames[t+o.ROTATE]=i,this.frames[t+o.TRANSLATE]=n,this.frames[t+o.SCALE]=r,this.frames[t+o.SHEAR]=a},o.prototype.apply=function(t,n,r,a,s,h,u){var l=this.frames,c=t.transformConstraints[this.transformConstraintIndex];if(c.active)if(r<l[0]){var f=c.data;switch(h){case i.setup:return c.rotateMix=f.rotateMix,c.translateMix=f.translateMix,c.scaleMix=f.scaleMix,void(c.shearMix=f.shearMix);case i.first:c.rotateMix+=(f.rotateMix-c.rotateMix)*s,c.translateMix+=(f.translateMix-c.translateMix)*s,c.scaleMix+=(f.scaleMix-c.scaleMix)*s,c.shearMix+=(f.shearMix-c.shearMix)*s}}else{var d=0,p=0,m=0,v=0;if(r>=l[l.length-o.ENTRIES]){var g=l.length;d=l[g+o.PREV_ROTATE],p=l[g+o.PREV_TRANSLATE],m=l[g+o.PREV_SCALE],v=l[g+o.PREV_SHEAR]}else{var y=e.binarySearch(l,r,o.ENTRIES);d=l[y+o.PREV_ROTATE],p=l[y+o.PREV_TRANSLATE],m=l[y+o.PREV_SCALE],v=l[y+o.PREV_SHEAR];var _=l[y],T=this.getCurvePercent(y/o.ENTRIES-1,1-(r-_)/(l[y+o.PREV_TIME]-_));d+=(l[y+o.ROTATE]-d)*T,p+=(l[y+o.TRANSLATE]-p)*T,m+=(l[y+o.SCALE]-m)*T,v+=(l[y+o.SHEAR]-v)*T}if(h==i.setup){var f=c.data;c.rotateMix=f.rotateMix+(d-f.rotateMix)*s,c.translateMix=f.translateMix+(p-f.translateMix)*s,c.scaleMix=f.scaleMix+(m-f.scaleMix)*s,c.shearMix=f.shearMix+(v-f.shearMix)*s}else c.rotateMix+=(d-c.rotateMix)*s,c.translateMix+=(p-c.translateMix)*s,c.scaleMix+=(m-c.scaleMix)*s,c.shearMix+=(v-c.shearMix)*s}},o.ENTRIES=5,o.PREV_TIME=-5,o.PREV_ROTATE=-4,o.PREV_TRANSLATE=-3,o.PREV_SCALE=-2,o.PREV_SHEAR=-1,o.ROTATE=1,o.TRANSLATE=2,o.SCALE=3,o.SHEAR=4,o}(o);t.TransformConstraintTimeline=_;var T=function(n){function o(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*o.ENTRIES),i}return r(o,n),o.prototype.getPropertyId=function(){return(a.pathConstraintPosition<<24)+this.pathConstraintIndex},o.prototype.setFrame=function(t,e,i){t*=o.ENTRIES,this.frames[t]=e,this.frames[t+o.VALUE]=i},o.prototype.apply=function(t,n,r,a,s,h,u){var l=this.frames,c=t.pathConstraints[this.pathConstraintIndex];if(c.active)if(r<l[0])switch(h){case i.setup:return void(c.position=c.data.position);case i.first:c.position+=(c.data.position-c.position)*s}else{var f=0;if(r>=l[l.length-o.ENTRIES])f=l[l.length+o.PREV_VALUE];else{var d=e.binarySearch(l,r,o.ENTRIES);f=l[d+o.PREV_VALUE];var p=l[d],m=this.getCurvePercent(d/o.ENTRIES-1,1-(r-p)/(l[d+o.PREV_TIME]-p));f+=(l[d+o.VALUE]-f)*m}h==i.setup?c.position=c.data.position+(f-c.data.position)*s:c.position+=(f-c.position)*s}},o.ENTRIES=2,o.PREV_TIME=-2,o.PREV_VALUE=-1,o.VALUE=1,o}(o);t.PathConstraintPositionTimeline=T;var E=function(t){function n(e){return t.call(this,e)||this}return r(n,t),n.prototype.getPropertyId=function(){return(a.pathConstraintSpacing<<24)+this.pathConstraintIndex},n.prototype.apply=function(t,r,a,o,s,h,u){var l=this.frames,c=t.pathConstraints[this.pathConstraintIndex];if(c.active)if(a<l[0])switch(h){case i.setup:return void(c.spacing=c.data.spacing);case i.first:c.spacing+=(c.data.spacing-c.spacing)*s}else{var f=0;if(a>=l[l.length-n.ENTRIES])f=l[l.length+n.PREV_VALUE];else{var d=e.binarySearch(l,a,n.ENTRIES);f=l[d+n.PREV_VALUE];var p=l[d],m=this.getCurvePercent(d/n.ENTRIES-1,1-(a-p)/(l[d+n.PREV_TIME]-p));f+=(l[d+n.VALUE]-f)*m}h==i.setup?c.spacing=c.data.spacing+(f-c.data.spacing)*s:c.spacing+=(f-c.spacing)*s}},n}(T);t.PathConstraintSpacingTimeline=E;var S=function(n){function o(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*o.ENTRIES),i}return r(o,n),o.prototype.getPropertyId=function(){return(a.pathConstraintMix<<24)+this.pathConstraintIndex},o.prototype.setFrame=function(t,e,i,n){t*=o.ENTRIES,this.frames[t]=e,this.frames[t+o.ROTATE]=i,this.frames[t+o.TRANSLATE]=n},o.prototype.apply=function(t,n,r,a,s,h,u){var l=this.frames,c=t.pathConstraints[this.pathConstraintIndex];if(c.active)if(r<l[0])switch(h){case i.setup:return c.rotateMix=c.data.rotateMix,void(c.translateMix=c.data.translateMix);case i.first:c.rotateMix+=(c.data.rotateMix-c.rotateMix)*s,c.translateMix+=(c.data.translateMix-c.translateMix)*s}else{var f=0,d=0;if(r>=l[l.length-o.ENTRIES])f=l[l.length+o.PREV_ROTATE],d=l[l.length+o.PREV_TRANSLATE];else{var p=e.binarySearch(l,r,o.ENTRIES);f=l[p+o.PREV_ROTATE],d=l[p+o.PREV_TRANSLATE];var m=l[p],v=this.getCurvePercent(p/o.ENTRIES-1,1-(r-m)/(l[p+o.PREV_TIME]-m));f+=(l[p+o.ROTATE]-f)*v,d+=(l[p+o.TRANSLATE]-d)*v}h==i.setup?(c.rotateMix=c.data.rotateMix+(f-c.data.rotateMix)*s,c.translateMix=c.data.translateMix+(d-c.data.translateMix)*s):(c.rotateMix+=(f-c.rotateMix)*s,c.translateMix+=(d-c.translateMix)*s)}},o.ENTRIES=3,o.PREV_TIME=-3,o.PREV_ROTATE=-2,o.PREV_TRANSLATE=-1,o.ROTATE=1,o.TRANSLATE=2,o}(o);t.PathConstraintMixTimeline=S}(t.core||(t.core={}))}(n||(n={}));var n;!function(t){!function(t){var e=function(){function e(e){this.tracks=new Array,this.events=new Array,this.listeners=new Array,this.queue=new n(this),this.propertyIDs=new t.IntSet,this.animationsChanged=!1,this.timeScale=1,this.trackEntryPool=new t.Pool(function(){return new i}),this.data=e}return e.prototype.update=function(t){t*=this.timeScale;for(var e=this.tracks,i=0,n=e.length;i<n;i++){var r=e[i];if(null!=r){r.animationLast=r.nextAnimationLast,r.trackLast=r.nextTrackLast;var a=t*r.timeScale;if(r.delay>0){if(r.delay-=a,r.delay>0)continue;a=-r.delay,r.delay=0}var o=r.next;if(null!=o){var s=r.trackLast-o.delay;if(s>=0){for(o.delay=0,o.trackTime=0==r.timeScale?0:(s/r.timeScale+t)*o.timeScale,r.trackTime+=a,this.setCurrent(i,o,!0);null!=o.mixingFrom;)o.mixTime+=t,o=o.mixingFrom;continue}}else if(r.trackLast>=r.trackEnd&&null==r.mixingFrom){e[i]=null,this.queue.end(r),this.disposeNext(r);continue}if(null!=r.mixingFrom&&this.updateMixingFrom(r,t)){var h=r.mixingFrom;for(r.mixingFrom=null,null!=h&&(h.mixingTo=null);null!=h;)this.queue.end(h),h=h.mixingFrom}r.trackTime+=a}}this.queue.drain()},e.prototype.updateMixingFrom=function(t,e){var i=t.mixingFrom;if(null==i)return!0;var n=this.updateMixingFrom(i,e);return i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?(0!=i.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=i.mixingFrom,null!=i.mixingFrom&&(i.mixingFrom.mixingTo=t),t.interruptAlpha=i.interruptAlpha,this.queue.end(i)),n):(i.trackTime+=e*i.timeScale,t.mixTime+=e,!1)},e.prototype.apply=function(i){if(null==i)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var n=this.events,r=this.tracks,a=!1,o=0,s=r.length;o<s;o++){var h=r[o];if(!(null==h||h.delay>0)){a=!0;var u=0==o?t.MixBlend.first:h.mixBlend,l=h.alpha;null!=h.mixingFrom?l*=this.applyMixingFrom(h,i,u):h.trackTime>=h.trackEnd&&null==h.next&&(l=0);var c=h.animationLast,f=h.getAnimationTime(),d=h.animation.timelines.length,p=h.animation.timelines;if(0==o&&1==l||u==t.MixBlend.add)for(var m=0;m<d;m++)t.Utils.webkit602BugfixHelper(l,u),p[m].apply(i,c,f,n,l,u,t.MixDirection.mixIn);else{var v=h.timelineMode,g=0==h.timelinesRotation.length;g&&t.Utils.setArraySize(h.timelinesRotation,d<<1,null);for(var y=h.timelinesRotation,m=0;m<d;m++){var _=p[m],T=(v[m]&e.NOT_LAST-1)==e.SUBSEQUENT?u:t.MixBlend.setup;_ instanceof t.RotateTimeline?this.applyRotateTimeline(_,i,f,l,T,y,m<<1,g):(t.Utils.webkit602BugfixHelper(l,u),_.apply(i,c,f,n,l,T,t.MixDirection.mixIn))}}this.queueEvents(h,f),n.length=0,h.nextAnimationLast=f,h.nextTrackLast=h.trackTime}}return this.queue.drain(),a},e.prototype.applyMixingFrom=function(i,n,r){var a=i.mixingFrom;null!=a.mixingFrom&&this.applyMixingFrom(a,n,r);var o=0;0==i.mixDuration?(o=1,r==t.MixBlend.first&&(r=t.MixBlend.setup)):(o=i.mixTime/i.mixDuration,o>1&&(o=1),r!=t.MixBlend.first&&(r=a.mixBlend));var s=o<a.eventThreshold?this.events:null,h=o<a.attachmentThreshold,u=o<a.drawOrderThreshold,l=a.animationLast,c=a.getAnimationTime(),f=a.animation.timelines.length,d=a.animation.timelines,p=a.alpha*i.interruptAlpha,m=p*(1-o);if(r==t.MixBlend.add)for(var v=0;v<f;v++)d[v].apply(n,l,c,s,m,r,t.MixDirection.mixOut);else{var g=a.timelineMode,y=a.timelineHoldMix,_=0==a.timelinesRotation.length;_&&t.Utils.setArraySize(a.timelinesRotation,f<<1,null);var T=a.timelinesRotation;a.totalAlpha=0;for(var v=0;v<f;v++){var E=d[v],S=t.MixDirection.mixOut,b=void 0,A=0;switch(g[v]&e.NOT_LAST-1){case e.SUBSEQUENT:if(!h&&E instanceof t.AttachmentTimeline){if((g[v]&e.NOT_LAST)==e.NOT_LAST)continue;r=t.MixBlend.setup}if(!u&&E instanceof t.DrawOrderTimeline)continue;b=r,A=m;break;case e.FIRST:b=t.MixBlend.setup,A=m;break;case e.HOLD:b=t.MixBlend.setup,A=p;break;default:b=t.MixBlend.setup;var I=y[v];A=p*Math.max(0,1-I.mixTime/I.mixDuration)}a.totalAlpha+=A,E instanceof t.RotateTimeline?this.applyRotateTimeline(E,n,c,A,b,T,v<<1,_):(t.Utils.webkit602BugfixHelper(A,r),b==t.MixBlend.setup&&(E instanceof t.AttachmentTimeline?(h||(g[v]&e.NOT_LAST)==e.NOT_LAST)&&(S=t.MixDirection.mixIn):E instanceof t.DrawOrderTimeline&&u&&(S=t.MixDirection.mixIn)),E.apply(n,l,c,s,A,b,S))}}return i.mixDuration>0&&this.queueEvents(a,c),this.events.length=0,a.nextAnimationLast=c,a.nextTrackLast=a.trackTime,o},e.prototype.applyRotateTimeline=function(e,i,n,r,a,o,s,h){if(h&&(o[s]=0),1==r)return void e.apply(i,0,n,null,1,a,t.MixDirection.mixIn);var u=e,l=u.frames,c=i.bones[u.boneIndex];if(c.active){var f=0,d=0;if(n<l[0])switch(a){case t.MixBlend.setup:c.rotation=c.data.rotation;default:return;case t.MixBlend.first:f=c.rotation,d=c.data.rotation}else if(f=a==t.MixBlend.setup?c.data.rotation:c.rotation,n>=l[l.length-t.RotateTimeline.ENTRIES])d=c.data.rotation+l[l.length+t.RotateTimeline.PREV_ROTATION];else{var p=t.Animation.binarySearch(l,n,t.RotateTimeline.ENTRIES),m=l[p+t.RotateTimeline.PREV_ROTATION],v=l[p],g=u.getCurvePercent((p>>1)-1,1-(n-v)/(l[p+t.RotateTimeline.PREV_TIME]-v));d=l[p+t.RotateTimeline.ROTATION]-m,d-=360*(16384-(16384.499999999996-d/360|0)),d=m+d*g+c.data.rotation,d-=360*(16384-(16384.499999999996-d/360|0))}var y=0,_=d-f;if(0==(_-=360*(16384-(16384.499999999996-_/360|0))))y=o[s];else{var T=0,E=0;h?(T=0,E=_):(T=o[s],E=o[s+1]);var S=_>0,b=T>=0;t.MathUtils.signum(E)!=t.MathUtils.signum(_)&&Math.abs(E)<=90&&(Math.abs(T)>180&&(T+=360*t.MathUtils.signum(T)),b=S),y=_+T-T%360,b!=S&&(y+=360*t.MathUtils.signum(T)),o[s]=y}o[s+1]=_,f+=y*r,c.rotation=f-360*(16384-(16384.499999999996-f/360|0))}},e.prototype.queueEvents=function(t,e){for(var i=t.animationStart,n=t.animationEnd,r=n-i,a=t.trackLast%r,o=this.events,s=0,h=o.length;s<h;s++){var u=o[s];if(u.time<a)break;u.time>n||this.queue.event(t,u)}var l=!1;for(l=t.loop?0==r||a>t.trackTime%r:e>=n&&t.animationLast<n,l&&this.queue.complete(t);s<h;s++){o[s].time<i||this.queue.event(t,o[s])}},e.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var e=0,i=this.tracks.length;e<i;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},e.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];if(null!=e){this.queue.end(e),this.disposeNext(e);for(var i=e;;){var n=i.mixingFrom;if(null==n)break;this.queue.end(n),i.mixingFrom=null,i.mixingTo=null,i=n}this.tracks[e.trackIndex]=null,this.queue.drain()}}},e.prototype.setCurrent=function(t,e,i){var n=this.expandToIndex(t);this.tracks[t]=e,null!=n&&(i&&this.queue.interrupt(n),e.mixingFrom=n,n.mixingTo=e,e.mixTime=0,null!=n.mixingFrom&&n.mixDuration>0&&(e.interruptAlpha*=Math.min(1,n.mixTime/n.mixDuration)),n.timelinesRotation.length=0),this.queue.start(e)},e.prototype.setAnimation=function(t,e,i){var n=this.data.skeletonData.findAnimation(e);if(null==n)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,n,i)},e.prototype.setAnimationWith=function(t,e,i){if(null==e)throw new Error("animation cannot be null.");var n=!0,r=this.expandToIndex(t);null!=r&&(-1==r.nextTrackLast?(this.tracks[t]=r.mixingFrom,this.queue.interrupt(r),this.queue.end(r),this.disposeNext(r),r=r.mixingFrom,n=!1):this.disposeNext(r));var a=this.trackEntry(t,e,i,r);return this.setCurrent(t,a,n),this.queue.drain(),a},e.prototype.addAnimation=function(t,e,i,n){var r=this.data.skeletonData.findAnimation(e);if(null==r)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,r,i,n)},e.prototype.addAnimationWith=function(t,e,i,n){if(null==e)throw new Error("animation cannot be null.");var r=this.expandToIndex(t);if(null!=r)for(;null!=r.next;)r=r.next;var a=this.trackEntry(t,e,i,r);if(null==r)this.setCurrent(t,a,!0),this.queue.drain();else if(r.next=a,n<=0){var o=r.animationEnd-r.animationStart;0!=o?(r.loop?n+=o*(1+(r.trackTime/o|0)):n+=Math.max(o,r.trackTime),n-=this.data.getMix(r.animation,e)):n=r.trackTime}return a.delay=n,a},e.prototype.setEmptyAnimation=function(t,i){var n=this.setAnimationWith(t,e.emptyAnimation,!1);return n.mixDuration=i,n.trackEnd=i,n},e.prototype.addEmptyAnimation=function(t,i,n){n<=0&&(n-=i);var r=this.addAnimationWith(t,e.emptyAnimation,!1,n);return r.mixDuration=i,r.trackEnd=i,r},e.prototype.setEmptyAnimations=function(t){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var i=0,n=this.tracks.length;i<n;i++){var r=this.tracks[i];null!=r&&this.setEmptyAnimation(r.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()},e.prototype.expandToIndex=function(e){return e<this.tracks.length?this.tracks[e]:(t.Utils.ensureArrayCapacity(this.tracks,e+1,null),this.tracks.length=e+1,null)},e.prototype.trackEntry=function(t,e,i,n){var r=this.trackEntryPool.obtain();return r.trackIndex=t,r.animation=e,r.loop=i,r.holdPrevious=!1,r.eventThreshold=0,r.attachmentThreshold=0,r.drawOrderThreshold=0,r.animationStart=0,r.animationEnd=e.duration,r.animationLast=-1,r.nextAnimationLast=-1,r.delay=0,r.trackTime=0,r.trackLast=-1,r.nextTrackLast=-1,r.trackEnd=Number.MAX_VALUE,r.timeScale=1,r.alpha=1,r.interruptAlpha=1,r.mixTime=0,r.mixDuration=null==n?0:this.data.getMix(n.animation,e),r},e.prototype.disposeNext=function(t){for(var e=t.next;null!=e;)this.queue.dispose(e),e=e.next;t.next=null},e.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var e=0,i=this.tracks.length;e<i;e++){var n=this.tracks[e];if(null!=n){for(;null!=n.mixingFrom;)n=n.mixingFrom;do{null!=n.mixingFrom&&n.mixBlend==t.MixBlend.add||this.computeHold(n),n=n.mixingTo}while(null!=n)}}this.propertyIDs.clear();for(var e=this.tracks.length-1;e>=0;e--)for(var n=this.tracks[e];null!=n;)this.computeNotLast(n),n=n.mixingFrom},e.prototype.computeHold=function(i){var n=i.mixingTo,r=i.animation.timelines,a=i.animation.timelines.length,o=t.Utils.setArraySize(i.timelineMode,a);i.timelineHoldMix.length=0;var s=t.Utils.setArraySize(i.timelineHoldMix,a),h=this.propertyIDs;if(null!=n&&n.holdPrevious)for(var u=0;u<a;u++)h.add(r[u].getPropertyId()),o[u]=e.HOLD;else t:for(var u=0;u<a;u++){var l=r[u],c=l.getPropertyId();if(h.add(c))if(null==n||l instanceof t.AttachmentTimeline||l instanceof t.DrawOrderTimeline||l instanceof t.EventTimeline||!this.hasTimeline(n,c))o[u]=e.FIRST;else{for(var f=n.mixingTo;null!=f;f=f.mixingTo)if(!this.hasTimeline(f,c)){if(i.mixDuration>0){o[u]=e.HOLD_MIX,s[u]=f;continue t}break}o[u]=e.HOLD}else o[u]=e.SUBSEQUENT}},e.prototype.computeNotLast=function(i){for(var n=i.animation.timelines,r=i.animation.timelines.length,a=i.timelineMode,o=this.propertyIDs,s=0;s<r;s++)if(n[s]instanceof t.AttachmentTimeline){var h=n[s];o.add(h.slotIndex)||(a[s]|=e.NOT_LAST)}},e.prototype.hasTimeline=function(t,e){for(var i=t.animation.timelines,n=0,r=i.length;n<r;n++)if(i[n].getPropertyId()==e)return!0;return!1},e.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},e.prototype.addListener=function(t){if(null==t)throw new Error("listener cannot be null.");this.listeners.push(t)},e.prototype.removeListener=function(t){var e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)},e.prototype.clearListeners=function(){this.listeners.length=0},e.prototype.clearListenerNotifications=function(){this.queue.clear()},e.prototype.setAnimationByName=function(t,i,n){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(t,i,n)},e.prototype.addAnimationByName=function(t,i,n,r){e.deprecatedWarning2||(e.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(t,i,n,r)},e.prototype.hasAnimation=function(t){return null!==this.data.skeletonData.findAnimation(t)},e.prototype.hasAnimationByName=function(t){return e.deprecatedWarning3||(e.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(t)},e.emptyAnimation=new t.Animation("<empty>",[],0),e.SUBSEQUENT=0,e.FIRST=1,e.HOLD=2,e.HOLD_MIX=3,e.NOT_LAST=4,e.deprecatedWarning1=!1,e.deprecatedWarning2=!1,e.deprecatedWarning3=!1,e}();t.AnimationState=e;var i=function(){function e(){this.mixBlend=t.MixBlend.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return e.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},e.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},e.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},e.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},e.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},Object.defineProperty(e.prototype,"time",{get:function(){return e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime},set:function(t){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endTime",{get:function(){return e.deprecatedWarning2||(e.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime},set:function(t){e.deprecatedWarning2||(e.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=t},enumerable:!0,configurable:!0}),e.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},e.deprecatedWarning1=!1,e.deprecatedWarning2=!1,e}();t.TrackEntry=i;var n=function(){function e(t){this.objects=[],this.drainDisabled=!1,this.animState=t}return e.prototype.start=function(t){this.objects.push(r.start),this.objects.push(t),this.animState.animationsChanged=!0},e.prototype.interrupt=function(t){this.objects.push(r.interrupt),this.objects.push(t)},e.prototype.end=function(t){this.objects.push(r.end),this.objects.push(t),this.animState.animationsChanged=!0},e.prototype.dispose=function(t){this.objects.push(r.dispose),this.objects.push(t)},e.prototype.complete=function(t){this.objects.push(r.complete),this.objects.push(t)},e.prototype.event=function(t,e){this.objects.push(r.event),this.objects.push(t),this.objects.push(e)},e.prototype.deprecateStuff=function(){return e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")),!0},e.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var e=this.objects,i=this.animState.listeners,n=0;n<e.length;n+=2){var a=e[n],o=e[n+1];switch(a){case r.start:null!=o.listener&&o.listener.start&&o.listener.start(o);for(var s=0;s<i.length;s++)i[s].start&&i[s].start(o);o.onStart&&this.deprecateStuff()&&o.onStart(o.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(o.trackIndex);break;case r.interrupt:null!=o.listener&&o.listener.interrupt&&o.listener.interrupt(o);for(var s=0;s<i.length;s++)i[s].interrupt&&i[s].interrupt(o);break;case r.end:null!=o.listener&&o.listener.end&&o.listener.end(o);for(var s=0;s<i.length;s++)i[s].end&&i[s].end(o);o.onEnd&&this.deprecateStuff()&&o.onEnd(o.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(o.trackIndex);case r.dispose:null!=o.listener&&o.listener.dispose&&o.listener.dispose(o);for(var s=0;s<i.length;s++)i[s].dispose&&i[s].dispose(o);this.animState.trackEntryPool.free(o);break;case r.complete:null!=o.listener&&o.listener.complete&&o.listener.complete(o);for(var s=0;s<i.length;s++)i[s].complete&&i[s].complete(o);var h=t.MathUtils.toInt(o.loopsCount());o.onComplete&&this.deprecateStuff()&&o.onComplete(o.trackIndex,h),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(o.trackIndex,h);break;case r.event:var u=e[2+n++];null!=o.listener&&o.listener.event&&o.listener.event(o,u);for(var s=0;s<i.length;s++)i[s].event&&i[s].event(o,u);o.onEvent&&this.deprecateStuff()&&o.onEvent(o.trackIndex,u),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(o.trackIndex,u)}}this.clear(),this.drainDisabled=!1}},e.prototype.clear=function(){this.objects.length=0},e.deprecatedWarning1=!1,e}();t.EventQueue=n;var r;!function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"}(r=t.EventType||(t.EventType={}));var a=function(){function t(){}return t.prototype.start=function(t){},t.prototype.interrupt=function(t){},t.prototype.end=function(t){},t.prototype.dispose=function(t){},t.prototype.complete=function(t){},t.prototype.event=function(t,e){},t}();t.AnimationStateAdapter2=a}(t.core||(t.core={}))}(n||(n={}));var n;!function(t){!function(t){var e=function(){function t(t){if(this.animationToMixTime={},this.defaultMix=0,null==t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}return t.prototype.setMix=function(t,e,i){var n=this.skeletonData.findAnimation(t);if(null==n)throw new Error("Animation not found: "+t);var r=this.skeletonData.findAnimation(e);if(null==r)throw new Error("Animation not found: "+e);this.setMixWith(n,r,i)},t.prototype.setMixByName=function(e,i,n){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")),this.setMix(e,i,n)},t.prototype.setMixWith=function(t,e,i){if(null==t)throw new Error("from cannot be null.");if(null==e)throw new Error("to cannot be null.");var n=t.name+"."+e.name;this.animationToMixTime[n]=i},t.prototype.getMix=function(t,e){var i=t.name+"."+e.name,n=this.animationToMixTime[i];return void 0===n?this.defaultMix:n},t.deprecatedWarning1=!1,t}();t.AnimationStateData=e}(t.core||(t.core={}))}(n||(n={}));var n;!function(t){!function(t){var e=function(){function e(t){this.atlas=t}return e.prototype.newRegionAttachment=function(e,i,n){var r=this.atlas.findRegion(n);if(null==r)throw new Error("Region not found in atlas: "+n+" (region attachment: "+i+")");var a=new t.RegionAttachment(i);return a.region=r,a},e.prototype.newMeshAttachment=function(e,i,n){var r=this.atlas.findRegion(n);if(null==r)throw new Error("Region not found in atlas: "+n+" (mesh attachment: "+i+")");var a=new t.MeshAttachment(i);return a.region=r,a},e.prototype.newBoundingBoxAttachment=function(e,i){return new t.BoundingBoxAttachment(i)},e.prototype.newPathAttachment=function(e,i){return new t.PathAttachment(i)},e.prototype.newPointAttachment=function(e,i){return new t.PointAttachment(i)},e.prototype.newClippingAttachment=function(e,i){return new t.ClippingAttachment(i)},e}();t.AtlasAttachmentLoader=e}(t.core||(t.core={}))}(n||(n={}));var n;!function(t){!function(t){!function(t){t[t.Normal=0]="Normal",t[t.Additive=1]="Additive",t[t.Multiply=2]="Multiply",t[t.Screen=3]="Screen"}(t.BlendMode||(t.BlendMode={}))}(t.core||(t.core={}))}(n||(n={}));var n;!function(t){!function(t){var e=function(){function e(t,e,i){if(this.matrix=new PIXI.Matrix,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=i,this.setToSetupPose()}return Object.defineProperty(e.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!0,configurable:!0}),e.prototype.isActive=function(){return this.active},e.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},e.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},e.prototype.updateWorldTransformWith=function(i,n,r,a,o,s,h){this.ax=i,this.ay=n,this.arotation=r,this.ascaleX=a,this.ascaleY=o,this.ashearX=s,this.ashearY=h,this.appliedValid=!0;var u=this.parent,l=this.matrix,c=this.skeleton.scaleX,f=e.yDown?-this.skeleton.scaleY:this.skeleton.scaleY;if(null==u){var d=this.skeleton,p=r+90+h;return l.a=t.MathUtils.cosDeg(r+s)*a*c,l.c=t.MathUtils.cosDeg(p)*o*c,l.b=t.MathUtils.sinDeg(r+s)*a*f,l.d=t.MathUtils.sinDeg(p)*o*f,l.tx=i*c+d.x,void(l.ty=n*f+d.y)}var m=u.matrix.a,v=u.matrix.c,g=u.matrix.b,y=u.matrix.d;switch(l.tx=m*i+v*n+u.matrix.tx,l.ty=g*i+y*n+u.matrix.ty,this.data.transformMode){case t.TransformMode.Normal:var p=r+90+h,_=t.MathUtils.cosDeg(r+s)*a,T=t.MathUtils.cosDeg(p)*o,E=t.MathUtils.sinDeg(r+s)*a,S=t.MathUtils.sinDeg(p)*o;return l.a=m*_+v*E,l.c=m*T+v*S,l.b=g*_+y*E,void(l.d=g*T+y*S);case t.TransformMode.OnlyTranslation:var p=r+90+h;l.a=t.MathUtils.cosDeg(r+s)*a,l.c=t.MathUtils.cosDeg(p)*o,l.b=t.MathUtils.sinDeg(r+s)*a,l.d=t.MathUtils.sinDeg(p)*o;break;case t.TransformMode.NoRotationOrReflection:var b=m*m+g*g,A=0;b>1e-4?(b=Math.abs(m*y-v*g)/b,v=g*b,y=m*b,A=Math.atan2(g,m)*t.MathUtils.radDeg):(m=0,g=0,A=90-Math.atan2(y,v)*t.MathUtils.radDeg);var I=r+s-A,w=r+h-A+90,_=t.MathUtils.cosDeg(I)*a,T=t.MathUtils.cosDeg(w)*o,E=t.MathUtils.sinDeg(I)*a,S=t.MathUtils.sinDeg(w)*o;l.a=m*_-v*E,l.c=m*T-v*S,l.b=g*_+y*E,l.d=g*T+y*S;break;case t.TransformMode.NoScale:case t.TransformMode.NoScaleOrReflection:var x=t.MathUtils.cosDeg(r),P=t.MathUtils.sinDeg(r),M=(m*x+v*P)/c,O=(g*x+y*P)/f,b=Math.sqrt(M*M+O*O);b>1e-5&&(b=1/b),M*=b,O*=b,b=Math.sqrt(M*M+O*O),this.data.transformMode==t.TransformMode.NoScale&&m*y-v*g<0!=(e.yDown?this.skeleton.scaleX<0!=this.skeleton.scaleY>0:this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(b=-b);var C=Math.PI/2+Math.atan2(O,M),R=Math.cos(C)*b,k=Math.sin(C)*b,_=t.MathUtils.cosDeg(s)*a,T=t.MathUtils.cosDeg(90+h)*o,E=t.MathUtils.sinDeg(s)*a,S=t.MathUtils.sinDeg(90+h)*o;l.a=M*_+R*E,l.c=M*T+R*S,l.b=O*_+k*E,l.d=O*T+k*S}l.a*=c,l.c*=c,l.b*=f,l.d*=f},e.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},e.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*t.MathUtils.radDeg},e.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*t.MathUtils.radDeg},e.prototype.getWorldScaleX=function(){var t=this.matrix;return Math.sqrt(t.a*t.a+t.c*t.c)},e.prototype.getWorldScaleY=function(){var t=this.matrix;return Math.sqrt(t.b*t.b+t.d*t.d)},e.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var e=this.parent,i=this.matrix;if(null==e)return this.ax=i.tx,this.ay=i.ty,this.arotation=Math.atan2(i.b,i.a)*t.MathUtils.radDeg,this.ascaleX=Math.sqrt(i.a*i.a+i.b*i.b),this.ascaleY=Math.sqrt(i.c*i.c+i.d*i.d),this.ashearX=0,void(this.ashearY=Math.atan2(i.a*i.c+i.b*i.d,i.a*i.d-i.b*i.c)*t.MathUtils.radDeg);var n=e.matrix,r=1/(n.a*n.d-n.b*n.c),a=i.tx-n.tx,o=i.ty-n.ty;this.ax=a*n.d*r-o*n.c*r,this.ay=o*n.a*r-a*n.b*r;var s=r*n.d,h=r*n.a,u=r*n.c,l=r*n.b,c=s*i.a-u*i.b,f=s*i.c-u*i.d,d=h*i.b-l*i.a,p=h*i.d-l*i.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(c*c+d*d),this.ascaleX>1e-4){var m=c*p-f*d;this.ascaleY=m/this.ascaleX,this.ashearY=Math.atan2(c*f+d*p,m)*t.MathUtils.radDeg,this.arotation=Math.atan2(d,c)*t.MathUtils.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(f*f+p*p),this.ashearY=0,this.arotation=90-Math.atan2(p,f)*t.MathUtils.radDeg},e.prototype.worldToLocal=function(t){var e=this.matrix,i=e.a,n=e.c,r=e.b,a=e.d,o=1/(i*a-n*r),s=t.x-e.tx,h=t.y-e.ty;return t.x=s*a*o-h*n*o,t.y=h*i*o-s*r*o,t},e.prototype.localToWorld=function(t){var e=this.matrix,i=t.x,n=t.y;return t.x=i*e.a+n*e.c+e.tx,t.y=i*e.b+n*e.d+e.ty,t},e.prototype.worldToLocalRotation=function(e){var i=t.MathUtils.sinDeg(e),n=t.MathUtils.cosDeg(e),r=this.matrix;return Math.atan2(r.a*i-r.b*n,r.d*n-r.c*i)*t.MathUtils.radDeg},e.prototype.localToWorldRotation=function(e){var i=t.MathUtils.sinDeg(e),n=t.MathUtils.cosDeg(e),r=this.matrix;return Math.atan2(n*r.b+i*r.d,n*r.a+i*r.c)*t.MathUtils.radDeg},e.prototype.rotateWorld=function(e){var i=this.matrix,n=i.a,r=i.c,a=i.b,o=i.d,s=t.MathUtils.cosDeg(e),h=t.MathUtils.sinDeg(e);i.a=s*n-h*a,i.c=s*r-h*o,i.b=h*n+s*a,i.d=h*r+s*o,this.appliedValid=!1},e.yDown=!1,e}();t.Bone=e}(t.core||(t.core={}))}(n||(n={}));var n;!function(t){!function(t){var e=function(){function e(e,n,r){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=i.Normal,this.skinRequired=!1,this.color=new t.Color,e<0)throw new Error("index must be >= 0.");if(null==n)throw new Error("name cannot be null.");this.index=e,this.name=n,this.parent=r}return e}();t.BoneData=e;var i;!function(t){t[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection"}(i=t.TransformMode||(t.TransformMode={}))}(t.core||(t.core={}))}(n||(n={}));var n;!function(t){!function(t){var e=function(){function t(t,e,i){this.name=t,this.order=e,this.skinRequired=i}return t}();t.ConstraintData=e}(t.core||(t.core={}))}(n||(n={}));var n;!function(t){!function(t){var e=function(){function t(t,e){if(null==e)throw new Error("data cannot be null.");this.time=t,this.data=e}return t}();t.Event=e}(t.core||(t.core={}))}(n||(n={}));var n;!function(t){!function(t){var e=function(){function t(t){this.name=t}return t}();t.EventData=e}(t.core||(t.core={}))}(n||(n={}));var n;!function(t){!function(t){var e=function(){function e(t,e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(var i=0;i<t.bones.length;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findBone(t.target.name)}return e.prototype.isActive=function(){return this.active},e.prototype.apply=function(){this.update()},e.prototype.update=function(){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.softness,this.mix)}},e.prototype.apply1=function(e,i,n,r,a,o,s){e.appliedValid||e.updateAppliedTransform();var h=e.parent.matrix,u=1/(h.a*h.d-h.b*h.c),l=i-h.tx,c=n-h.ty,f=(l*h.d-c*h.c)*u-e.ax,d=(c*h.a-l*h.b)*u-e.ay,p=Math.atan2(d,f)*t.MathUtils.radDeg-e.ashearX-e.arotation;e.ascaleX<0&&(p+=180),p>180?p-=360:p<-180&&(p+=360);var m=e.ascaleX,v=e.ascaleY;if(r||a){var g=e.data.length*m,y=Math.sqrt(f*f+d*d);if(r&&y<g||a&&y>g&&g>1e-4){var _=(y/g-1)*s+1;m*=_,o&&(v*=_)}}e.updateWorldTransformWith(e.ax,e.ay,e.arotation+p*s,m,v,e.ashearX,e.ashearY)},e.prototype.apply2=function(e,i,n,r,a,o,s,h){if(0==h)return void i.updateWorldTransform();e.appliedValid||e.updateAppliedTransform(),i.appliedValid||i.updateAppliedTransform();var u=e.ax,l=e.ay,c=e.ascaleX,f=c,d=e.ascaleY,p=i.ascaleX,m=e.matrix,v=0,g=0,y=0;c<0?(c=-c,v=180,y=-1):(v=0,y=1),d<0&&(d=-d,y=-y),p<0?(p=-p,g=180):g=0;var _=i.ax,T=0,E=0,S=0,b=m.a,A=m.c,I=m.b,w=m.d,x=Math.abs(c-d)<=1e-4;x?(T=i.ay,E=b*_+A*T+m.tx,S=I*_+w*T+m.ty):(T=0,E=b*_+m.tx,S=I*_+m.ty);var P=e.parent.matrix;b=P.a,A=P.c,I=P.b,w=P.d;var M,O,C=1/(b*w-A*I),R=E-P.tx,k=S-P.ty,D=(R*w-k*A)*C-u,L=(k*b-R*I)*C-l,N=Math.sqrt(D*D+L*L),G=i.data.length*p;if(N<1e-4)return this.apply1(e,n,r,!1,o,!1,h),void i.updateWorldTransformWith(_,T,0,i.ascaleX,i.ascaleY,i.ashearX,i.ashearY);R=n-P.tx,k=r-P.ty;var F=(R*w-k*A)*C-u,U=(k*b-R*I)*C-l,B=F*F+U*U;if(0!=s){s*=c*(p+1)/2;var j=Math.sqrt(B),V=j-N-G*c+s;if(V>0){var X=Math.min(1,V/(2*s))-1;X=(V-s*(1-X*X))/j,F-=X*F,U-=X*U,B=F*F+U*U}}t:if(x){G*=c;var H=(B-N*N-G*G)/(2*N*G);H<-1?H=-1:H>1&&(H=1,o&&(f*=(Math.sqrt(B)/(N+G)-1)*h+1)),O=Math.acos(H)*a,b=N+G*H,A=G*Math.sin(O),M=Math.atan2(U*b-F*A,F*b+U*A)}else{b=c*G,A=d*G;var Y=b*b,W=A*A,z=Math.atan2(U,F);I=W*N*N+Y*B-Y*W;var q=-2*W*N,K=W-Y;if((w=q*q-4*K*I)>=0){var Z=Math.sqrt(w);q<0&&(Z=-Z),Z=-(q+Z)/2;var J=Z/K,Q=I/Z,$=Math.abs(J)<Math.abs(Q)?J:Q;if($*$<=B){k=Math.sqrt(B-$*$)*a,M=z-Math.atan2(k,$),O=Math.atan2(k/d,($-N)/c);break t}}var tt=t.MathUtils.PI,et=N-b,it=et*et,nt=0,rt=0,at=N+b,ot=at*at,st=0;I=-b*N/(Y-W),I>=-1&&I<=1&&(I=Math.acos(I),R=b*Math.cos(I)+N,k=A*Math.sin(I),w=R*R+k*k,w<it&&(tt=I,it=w,et=R,nt=k),w>ot&&(rt=I,ot=w,at=R,st=k)),B<=(it+ot)/2?(M=z-Math.atan2(nt*a,et),O=tt*a):(M=z-Math.atan2(st*a,at),O=rt*a)}var ht=Math.atan2(T,_)*y,ut=e.arotation;M=(M-ht)*t.MathUtils.radDeg+v-ut,M>180?M-=360:M<-180&&(M+=360),e.updateWorldTransformWith(u,l,ut+M*h,f,e.ascaleY,0,0),ut=i.arotation,O=((O+ht)*t.MathUtils.radDeg-i.ashearX)*y+g-ut,O>180?O-=360:O<-180&&(O+=360),i.updateWorldTransformWith(_,T,ut+O*h,i.ascaleX,i.ascaleY,i.ashearX,i.ashearY)},e}();t.IkConstraint=e}(t.core||(t.core={}))}(n||(n={}));var n;!function(t){!function(t){var e=function(t){function e(e){var i=t.call(this,e,0,!1)||this;return i.bones=new Array,i.bendDirection=1,i.compress=!1,i.stretch=!1,i.uniform=!1,i.mix=1,i.softness=0,i}return r(e,t),e}(t.ConstraintData);t.IkConstraintData=e}(t.core||(t.core={}))}(n||(n={}));var n;!function(t){!function(t){var e=function(){function e(t,e){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var i=0,n=t.bones.length;i<n;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}return e.prototype.isActive=function(){return this.active},e.prototype.apply=function(){this.update()},e.prototype.update=function(){var i=this.target.getAttachment();if(i instanceof t.PathAttachment){var n=this.rotateMix,r=this.translateMix,a=r>0,o=n>0;if(a||o){var s=this.data,h=s.spacingMode,u=h==t.SpacingMode.Length,l=s.rotateMode,c=l==t.RotateMode.Tangent,f=l==t.RotateMode.ChainScale,d=this.bones.length,p=c?d:d+1,m=this.bones,v=t.Utils.setArraySize(this.spaces,p),g=null,y=this.spacing;if(f||u){f&&(g=t.Utils.setArraySize(this.lengths,d));for(var _=0,T=p-1;_<T;){var E=m[_],S=E.data.length;if(S<e.epsilon)f&&(g[_]=0),v[++_]=0;else{var b=S*E.matrix.a,A=S*E.matrix.b,I=Math.sqrt(b*b+A*A);f&&(g[_]=I),v[++_]=(u?S+y:y)*I/S}}}else for(var _=1;_<p;_++)v[_]=y;var w=this.computeWorldPositions(i,p,c,s.positionMode==t.PositionMode.Percent,h==t.SpacingMode.Percent),x=w[0],P=w[1],M=s.offsetRotation,O=!1;if(0==M)O=l==t.RotateMode.Chain;else{O=!1;var C=this.target.bone.matrix;M*=C.a*C.d-C.b*C.c>0?t.MathUtils.degRad:-t.MathUtils.degRad}for(var _=0,C=3;_<d;_++,C+=3){var E=m[_],R=E.matrix;R.tx+=(x-R.tx)*r,R.ty+=(P-R.ty)*r;var b=w[C],A=w[C+1],k=b-x,D=A-P;if(f){var L=g[_];if(0!=L){var N=(Math.sqrt(k*k+D*D)/L-1)*n+1;R.a*=N,R.b*=N}}if(x=b,P=A,o){var G=R.a,F=R.c,U=R.b,B=R.d,j=0,V=0,X=0;if(j=c?w[C-1]:0==v[_+1]?w[C+2]:Math.atan2(D,k),j-=Math.atan2(U,G),O){V=Math.cos(j),X=Math.sin(j);var H=E.data.length;x+=(H*(V*G-X*U)-k)*n,P+=(H*(X*G+V*U)-D)*n}else j+=M;j>t.MathUtils.PI?j-=t.MathUtils.PI2:j<-t.MathUtils.PI&&(j+=t.MathUtils.PI2),j*=n,V=Math.cos(j),X=Math.sin(j),R.a=V*G-X*U,R.c=V*F-X*B,R.b=X*G+V*U,R.d=X*F+V*B}E.appliedValid=!1}}}},e.prototype.computeWorldPositions=function(i,n,r,a,o){var s=this.target,h=this.position,u=this.spaces,l=t.Utils.setArraySize(this.positions,3*n+2),c=null,f=i.closed,d=i.worldVerticesLength,p=d/6,m=e.NONE;if(!i.constantSpeed){var v=i.lengths;p-=f?1:2;var g=v[p];if(a&&(h*=g),o)for(var y=0;y<n;y++)u[y]*=g;c=t.Utils.setArraySize(this.world,8);for(var y=0,_=0,T=0;y<n;y++,_+=3){var E=u[y];h+=E;var S=h;if(f)S%=g,S<0&&(S+=g),T=0;else{if(S<0){m!=e.BEFORE&&(m=e.BEFORE,i.computeWorldVertices(s,2,4,c,0,2)),this.addBeforePosition(S,c,0,l,_);continue}if(S>g){m!=e.AFTER&&(m=e.AFTER,i.computeWorldVertices(s,d-6,4,c,0,2)),this.addAfterPosition(S-g,c,0,l,_);continue}}for(;;T++){var b=v[T];if(!(S>b)){if(0==T)S/=b;else{var A=v[T-1];S=(S-A)/(b-A)}break}}T!=m&&(m=T,f&&T==p?(i.computeWorldVertices(s,d-4,4,c,0,2),i.computeWorldVertices(s,0,4,c,4,2)):i.computeWorldVertices(s,6*T+2,8,c,0,2)),this.addCurvePosition(S,c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],l,_,r||y>0&&0==E)}return l}f?(d+=2,c=t.Utils.setArraySize(this.world,d),i.computeWorldVertices(s,2,d-4,c,0,2),i.computeWorldVertices(s,0,2,c,d-4,2),c[d-2]=c[0],c[d-1]=c[1]):(p--,d-=4,c=t.Utils.setArraySize(this.world,d),i.computeWorldVertices(s,2,d,c,0,2));for(var I=t.Utils.setArraySize(this.curves,p),w=0,x=c[0],P=c[1],M=0,O=0,C=0,R=0,k=0,D=0,L=0,N=0,G=0,F=0,U=0,B=0,j=0,V=0,y=0,X=2;y<p;y++,X+=6)M=c[X],O=c[X+1],C=c[X+2],R=c[X+3],k=c[X+4],D=c[X+5],L=.1875*(x-2*M+C),N=.1875*(P-2*O+R),G=.09375*(3*(M-C)-x+k),F=.09375*(3*(O-R)-P+D),U=2*L+G,B=2*N+F,j=.75*(M-x)+L+.16666667*G,V=.75*(O-P)+N+.16666667*F,w+=Math.sqrt(j*j+V*V),j+=U,V+=B,U+=G,B+=F,w+=Math.sqrt(j*j+V*V),j+=U,V+=B,w+=Math.sqrt(j*j+V*V),j+=U+G,V+=B+F,w+=Math.sqrt(j*j+V*V),I[y]=w,x=k,P=D;if(a&&(h*=w),o)for(var y=0;y<n;y++)u[y]*=w;for(var H=this.segments,Y=0,y=0,_=0,T=0,W=0;y<n;y++,_+=3){var E=u[y];h+=E;var S=h;if(f)S%=w,S<0&&(S+=w),T=0;else{if(S<0){this.addBeforePosition(S,c,0,l,_);continue}if(S>w){this.addAfterPosition(S-w,c,d-4,l,_);continue}}for(;;T++){var z=I[T];if(!(S>z)){if(0==T)S/=z;else{var A=I[T-1];S=(S-A)/(z-A)}break}}if(T!=m){m=T;var q=6*T;for(x=c[q],P=c[q+1],M=c[q+2],O=c[q+3],C=c[q+4],R=c[q+5],k=c[q+6],D=c[q+7],L=.03*(x-2*M+C),N=.03*(P-2*O+R),G=.006*(3*(M-C)-x+k),F=.006*(3*(O-R)-P+D),U=2*L+G,B=2*N+F,j=.3*(M-x)+L+.16666667*G,V=.3*(O-P)+N+.16666667*F,Y=Math.sqrt(j*j+V*V),H[0]=Y,q=1;q<8;q++)j+=U,V+=B,U+=G,B+=F,Y+=Math.sqrt(j*j+V*V),H[q]=Y;j+=U,V+=B,Y+=Math.sqrt(j*j+V*V),H[8]=Y,j+=U+G,V+=B+F,Y+=Math.sqrt(j*j+V*V),H[9]=Y,W=0}for(S*=Y;;W++){var K=H[W];if(!(S>K)){if(0==W)S/=K;else{var A=H[W-1];S=W+(S-A)/(K-A)}break}}this.addCurvePosition(.1*S,x,P,M,O,C,R,k,D,l,_,r||y>0&&0==E)}return l},e.prototype.addBeforePosition=function(t,e,i,n,r){var a=e[i],o=e[i+1],s=e[i+2]-a,h=e[i+3]-o,u=Math.atan2(h,s);n[r]=a+t*Math.cos(u),n[r+1]=o+t*Math.sin(u),n[r+2]=u},e.prototype.addAfterPosition=function(t,e,i,n,r){var a=e[i+2],o=e[i+3],s=a-e[i],h=o-e[i+1],u=Math.atan2(h,s);n[r]=a+t*Math.cos(u),n[r+1]=o+t*Math.sin(u),n[r+2]=u},e.prototype.addCurvePosition=function(t,e,i,n,r,a,o,s,h,u,l,c){(0==t||isNaN(t))&&(t=1e-4);var f=t*t,d=f*t,p=1-t,m=p*p,v=m*p,g=p*t,y=3*g,_=p*y,T=y*t,E=e*v+n*_+a*T+s*d,S=i*v+r*_+o*T+h*d;u[l]=E,u[l+1]=S,c&&(u[l+2]=Math.atan2(S-(i*m+r*g*2+o*f),E-(e*m+n*g*2+a*f)))},e.NONE=-1,e.BEFORE=-2,e.AFTER=-3,e.epsilon=1e-5,e}();t.PathConstraint=e}(t.core||(t.core={}))}(n||(n={}));var n;!function(t){!function(t){var e=function(t){function e(e){var i=t.call(this,e,0,!1)||this;return i.bones=new Array,i}return r(e,t),e}(t.ConstraintData);t.PathConstraintData=e;!function(t){t[t.Fixed=0]="Fixed",t[t.Percent=1]="Percent"}(t.PositionMode||(t.PositionMode={}));!function(t){t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent"}(t.SpacingMode||(t.SpacingMode={}));!function(t){t[t.Tangent=0]="Tangent",t[t.Chain=1]="Chain",t[t.ChainScale=2]="ChainScale"}(t.RotateMode||(t.RotateMode={}))}(t.core||(t.core={}))}(n||(n={}));var n;!function(t){!function(t){var e=function(){function e(e){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,null==e)throw new Error("data cannot be null.");this.data=e,this.bones=new Array;for(var i=0;i<e.bones.length;i++){var n=e.bones[i],r=void 0;if(null==n.parent)r=new t.Bone(n,this,null);else{var a=this.bones[n.parent.index];r=new t.Bone(n,this,a),a.children.push(r)}this.bones.push(r)}this.slots=new Array,this.drawOrder=new Array;for(var i=0;i<e.slots.length;i++){var o=e.slots[i],r=this.bones[o.boneData.index],s=new t.Slot(o,r);this.slots.push(s),this.drawOrder.push(s)}this.ikConstraints=new Array;for(var i=0;i<e.ikConstraints.length;i++){var h=e.ikConstraints[i];this.ikConstraints.push(new t.IkConstraint(h,this))}this.transformConstraints=new Array;for(var i=0;i<e.transformConstraints.length;i++){var u=e.transformConstraints[i];this.transformConstraints.push(new t.TransformConstraint(u,this))}this.pathConstraints=new Array;for(var i=0;i<e.pathConstraints.length;i++){var l=e.pathConstraints[i];this.pathConstraints.push(new t.PathConstraint(l,this))}this.color=new t.Color(1,1,1,1),this.updateCache()}return e.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var t=this.bones,e=0,i=t.length;e<i;e++){var n=t[e];n.sorted=n.data.skinRequired,n.active=!n.sorted}if(null!=this.skin)for(var r=this.skin.bones,e=0,i=this.skin.bones.length;e<i;e++){var n=this.bones[r[e].index];do{n.sorted=!1,n.active=!0,n=n.parent}while(null!=n)}var a=this.ikConstraints,o=this.transformConstraints,s=this.pathConstraints,h=a.length,u=o.length,l=s.length,c=h+u+l;t:for(var e=0;e<c;e++){for(var f=0;f<h;f++){var d=a[f];if(d.data.order==e){this.sortIkConstraint(d);continue t}}for(var f=0;f<u;f++){var d=o[f];if(d.data.order==e){this.sortTransformConstraint(d);continue t}}for(var f=0;f<l;f++){var d=s[f];if(d.data.order==e){this.sortPathConstraint(d);continue t}}}for(var e=0,i=t.length;e<i;e++)this.sortBone(t[e])},e.prototype.sortIkConstraint=function(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||null!=this.skin&&t.Utils.contains(this.skin.constraints,e.data,!0)),e.active){var i=e.target;this.sortBone(i);var n=e.bones,r=n[0];if(this.sortBone(r),n.length>1){var a=n[n.length-1];this._updateCache.indexOf(a)>-1||this.updateCacheReset.push(a)}this._updateCache.push(e),this.sortReset(r.children),n[n.length-1].sorted=!0}},e.prototype.sortPathConstraint=function(e){if(e.active=e.target.bone.isActive()&&(!e.data.skinRequired||null!=this.skin&&t.Utils.contains(this.skin.constraints,e.data,!0)),e.active){var i=e.target,n=i.data.index,r=i.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,n,r),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,n,r);for(var a=0,o=this.data.skins.length;a<o;a++)this.sortPathConstraintAttachment(this.data.skins[a],n,r);var s=i.getAttachment();s instanceof t.PathAttachment&&this.sortPathConstraintAttachmentWith(s,r);for(var h=e.bones,u=h.length,a=0;a<u;a++)this.sortBone(h[a]);this._updateCache.push(e);for(var a=0;a<u;a++)this.sortReset(h[a].children);for(var a=0;a<u;a++)h[a].sorted=!0}},e.prototype.sortTransformConstraint=function(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||null!=this.skin&&t.Utils.contains(this.skin.constraints,e.data,!0)),e.active){this.sortBone(e.target);var i=e.bones,n=i.length;if(e.data.local)for(var r=0;r<n;r++){var a=i[r];this.sortBone(a.parent),this._updateCache.indexOf(a)>-1||this.updateCacheReset.push(a)}else for(var r=0;r<n;r++)this.sortBone(i[r]);this._updateCache.push(e);for(var o=0;o<n;o++)this.sortReset(i[o].children);for(var o=0;o<n;o++)i[o].sorted=!0}},e.prototype.sortPathConstraintAttachment=function(t,e,i){var n=t.attachments[e];if(n)for(var r in n)this.sortPathConstraintAttachmentWith(n[r],i)},e.prototype.sortPathConstraintAttachmentWith=function(e,i){if(e instanceof t.PathAttachment){var n=e.bones;if(null==n)this.sortBone(i);else for(var r=this.bones,a=0;a<n.length;)for(var o=n[a++],s=a+o;a<s;a++){var h=n[a];this.sortBone(r[h])}}},e.prototype.sortBone=function(t){if(!t.sorted){var e=t.parent;null!=e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}},e.prototype.sortReset=function(t){for(var e=0,i=t.length;e<i;e++){var n=t[e];n.active&&(n.sorted&&this.sortReset(n.children),n.sorted=!1)}},e.prototype.updateWorldTransform=function(){for(var t=this.updateCacheReset,e=0,i=t.length;e<i;e++){var n=t[e];n.ax=n.x,n.ay=n.y,n.arotation=n.rotation,n.ascaleX=n.scaleX,n.ascaleY=n.scaleY,n.ashearX=n.shearX,n.ashearY=n.shearY,n.appliedValid=!0}for(var r=this._updateCache,e=0,i=r.length;e<i;e++)r[e].update()},e.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},e.prototype.setBonesToSetupPose=function(){for(var t=this.bones,e=0,i=t.length;e<i;e++)t[e].setToSetupPose();for(var n=this.ikConstraints,e=0,i=n.length;e<i;e++){var r=n[e];r.mix=r.data.mix,r.softness=r.data.softness,r.bendDirection=r.data.bendDirection,r.compress=r.data.compress,r.stretch=r.data.stretch}for(var a=this.transformConstraints,e=0,i=a.length;e<i;e++){var r=a[e],o=r.data;r.rotateMix=o.rotateMix,r.translateMix=o.translateMix,r.scaleMix=o.scaleMix,r.shearMix=o.shearMix}for(var s=this.pathConstraints,e=0,i=s.length;e<i;e++){var r=s[e],o=r.data;r.position=o.position,r.spacing=o.spacing,r.rotateMix=o.rotateMix,r.translateMix=o.translateMix}},e.prototype.setSlotsToSetupPose=function(){var e=this.slots;t.Utils.arrayCopy(e,0,this.drawOrder,0,e.length);for(var i=0,n=e.length;i<n;i++)e[i].setToSetupPose()},e.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},e.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,n=e.length;i<n;i++){var r=e[i];if(r.data.name==t)return r}return null},e.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,n=e.length;i<n;i++)if(e[i].data.name==t)return i;return-1},e.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,n=e.length;i<n;i++){var r=e[i];if(r.data.name==t)return r}return null},e.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,n=e.length;i<n;i++)if(e[i].data.name==t)return i;return-1},e.prototype.setSkinByName=function(t){var e=this.data.findSkin(t);if(null==e)throw new Error("Skin not found: "+t);this.setSkin(e)},e.prototype.setSkin=function(t){if(t!=this.skin){if(null!=t)if(null!=this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,i=0,n=e.length;i<n;i++){var r=e[i],a=r.data.attachmentName;if(null!=a){var o=t.getAttachment(i,a);null!=o&&r.setAttachment(o)}}this.skin=t,this.updateCache()}},e.prototype.getAttachmentByName=function(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)},e.prototype.getAttachment=function(t,e){if(null==e)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var i=this.skin.getAttachment(t,e);if(null!=i)return i}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},e.prototype.setAttachment=function(t,e){if(null==t)throw new Error("slotName cannot be null.");for(var i=this.slots,n=0,r=i.length;n<r;n++){var a=i[n];if(a.data.name==t){var o=null;if(null!=e&&null==(o=this.getAttachment(n,e)))throw new Error("Attachment not found: "+e+", for slot: "+t);return void a.setAttachment(o)}}throw new Error("Slot not found: "+t)},e.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,i=0,n=e.length;i<n;i++){var r=e[i];if(r.data.name==t)return r}return null},e.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,i=0,n=e.length;i<n;i++){var r=e[i];if(r.data.name==t)return r}return null},e.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,i=0,n=e.length;i<n;i++){var r=e[i];if(r.data.name==t)return r}return null},e.prototype.getBounds=function(e,i,n){if(void 0===n&&(n=new Array(2)),null==e)throw new Error("offset cannot be null.");if(null==i)throw new Error("size cannot be null.");for(var r=this.drawOrder,a=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY,u=0,l=r.length;u<l;u++){var c=r[u];if(c.bone.active){var f=0,d=null,p=c.getAttachment();if(p instanceof t.RegionAttachment)f=8,d=t.Utils.setArraySize(n,f,0),p.computeWorldVertices(c.bone,d,0,2);else if(p instanceof t.MeshAttachment){var m=p;f=m.worldVerticesLength,d=t.Utils.setArraySize(n,f,0),m.computeWorldVertices(c,0,f,d,0,2)}if(null!=d)for(var v=0,g=d.length;v<g;v+=2){var y=d[v],_=d[v+1];a=Math.min(a,y),o=Math.min(o,_),s=Math.max(s,y),h=Math.max(h,_)}}}e.set(a,o),i.set(s-a,h-o)},e.prototype.update=function(t){this.time+=t},Object.defineProperty(e.prototype,"flipX",{get:function(){return-1==this.scaleX},set:function(t){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=t?1:-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flipY",{get:function(){return-1==this.scaleY},set:function(t){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=t?1:-1},enumerable:!0,configurable:!0}),e.deprecatedWarning1=!1,e}();t.Skeleton=e}(t.core||(t.core={}))}(n||(n={}));var n;!function(t){!function(t){var e=function(){function e(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return e.prototype.readSkeletonData=function(n){var r=this.scale,a=new t.SkeletonData;a.name="";var o=new i(n);a.hash=o.readString(),a.version=o.readString(),a.x=o.readFloat(),a.y=o.readFloat(),a.width=o.readFloat(),a.height=o.readFloat();var s=o.readBoolean();s&&(a.fps=o.readFloat(),a.imagesPath=o.readString(),a.audioPath=o.readString());var h=0;h=o.readInt(!0);for(var u=0;u<h;u++)o.strings.push(o.readString());h=o.readInt(!0);for(var u=0;u<h;u++){var l=o.readString(),c=0==u?null:a.bones[o.readInt(!0)],f=new t.BoneData(u,l,c);f.rotation=o.readFloat(),f.x=o.readFloat()*r,f.y=o.readFloat()*r,f.scaleX=o.readFloat(),f.scaleY=o.readFloat(),f.shearX=o.readFloat(),f.shearY=o.readFloat(),f.length=o.readFloat()*r,f.transformMode=e.TransformModeValues[o.readInt(!0)],f.skinRequired=o.readBoolean(),s&&t.Color.rgba8888ToColor(f.color,o.readInt32()),a.bones.push(f)}h=o.readInt(!0);for(var u=0;u<h;u++){var d=o.readString(),p=a.bones[o.readInt(!0)],f=new t.SlotData(u,d,p);t.Color.rgba8888ToColor(f.color,o.readInt32());var m=o.readInt32();-1!=m&&t.Color.rgb888ToColor(f.darkColor=new t.Color,m),f.attachmentName=o.readStringRef(),f.blendMode=e.BlendModeValues[o.readInt(!0)],a.slots.push(f)}h=o.readInt(!0);for(var u=0,v=void 0;u<h;u++){var f=new t.IkConstraintData(o.readString());f.order=o.readInt(!0),f.skinRequired=o.readBoolean(),v=o.readInt(!0);for(var g=0;g<v;g++)f.bones.push(a.bones[o.readInt(!0)]);f.target=a.bones[o.readInt(!0)],f.mix=o.readFloat(),f.softness=o.readFloat()*r,f.bendDirection=o.readByte(),f.compress=o.readBoolean(),f.stretch=o.readBoolean(),f.uniform=o.readBoolean(),a.ikConstraints.push(f)}h=o.readInt(!0);for(var u=0,v=void 0;u<h;u++){var f=new t.TransformConstraintData(o.readString());f.order=o.readInt(!0),f.skinRequired=o.readBoolean(),v=o.readInt(!0);for(var g=0;g<v;g++)f.bones.push(a.bones[o.readInt(!0)]);f.target=a.bones[o.readInt(!0)],f.local=o.readBoolean(),f.relative=o.readBoolean(),f.offsetRotation=o.readFloat(),f.offsetX=o.readFloat()*r,f.offsetY=o.readFloat()*r,f.offsetScaleX=o.readFloat(),f.offsetScaleY=o.readFloat(),f.offsetShearY=o.readFloat(),f.rotateMix=o.readFloat(),f.translateMix=o.readFloat(),f.scaleMix=o.readFloat(),f.shearMix=o.readFloat(),a.transformConstraints.push(f)}h=o.readInt(!0);for(var u=0,v=void 0;u<h;u++){var f=new t.PathConstraintData(o.readString());f.order=o.readInt(!0),f.skinRequired=o.readBoolean(),v=o.readInt(!0);for(var g=0;g<v;g++)f.bones.push(a.bones[o.readInt(!0)]);f.target=a.slots[o.readInt(!0)],f.positionMode=e.PositionModeValues[o.readInt(!0)],f.spacingMode=e.SpacingModeValues[o.readInt(!0)],f.rotateMode=e.RotateModeValues[o.readInt(!0)],f.offsetRotation=o.readFloat(),f.position=o.readFloat(),f.positionMode==t.PositionMode.Fixed&&(f.position*=r),f.spacing=o.readFloat(),f.spacingMode!=t.SpacingMode.Length&&f.spacingMode!=t.SpacingMode.Fixed||(f.spacing*=r),f.rotateMix=o.readFloat(),f.translateMix=o.readFloat(),a.pathConstraints.push(f)}var y=this.readSkin(o,a,!0,s);null!=y&&(a.defaultSkin=y,a.skins.push(y));var u=a.skins.length;for(t.Utils.setArraySize(a.skins,h=u+o.readInt(!0));u<h;u++)a.skins[u]=this.readSkin(o,a,!1,s);h=this.linkedMeshes.length;for(var u=0;u<h;u++){var _=this.linkedMeshes[u],T=null==_.skin?a.defaultSkin:a.findSkin(_.skin);if(null==T)throw new Error("Skin not found: "+_.skin);var E=T.getAttachment(_.slotIndex,_.parent);if(null==E)throw new Error("Parent mesh not found: "+_.parent);_.mesh.deformAttachment=_.inheritDeform?E:_.mesh,_.mesh.setParentMesh(E)}this.linkedMeshes.length=0,h=o.readInt(!0);for(var u=0;u<h;u++){var f=new t.EventData(o.readStringRef());f.intValue=o.readInt(!1),f.floatValue=o.readFloat(),f.stringValue=o.readString(),f.audioPath=o.readString(),null!=f.audioPath&&(f.volume=o.readFloat(),f.balance=o.readFloat()),a.events.push(f)}h=o.readInt(!0);for(var u=0;u<h;u++)a.animations.push(this.readAnimation(o,o.readString(),a));return a},e.prototype.readSkin=function(e,i,n,r){var a=new t.Skin(n?"default":e.readStringRef());if(!n){a.bones.length=e.readInt(!0);for(var o=0,s=a.bones.length;o<s;o++)a.bones[o]=i.bones[e.readInt(!0)];for(var o=0,s=e.readInt(!0);o<s;o++)a.constraints.push(i.ikConstraints[e.readInt(!0)]);for(var o=0,s=e.readInt(!0);o<s;o++)a.constraints.push(i.transformConstraints[e.readInt(!0)]);for(var o=0,s=e.readInt(!0);o<s;o++)a.constraints.push(i.pathConstraints[e.readInt(!0)])}for(var o=0,s=e.readInt(!0);o<s;o++)for(var h=e.readInt(!0),u=0,l=e.readInt(!0);u<l;u++){var c=e.readStringRef(),f=this.readAttachment(e,i,a,h,c,r);null!=f&&a.setAttachment(h,c,f)}return a},e.prototype.readAttachment=function(i,r,a,o,s,h){var u=this.scale,l=i.readStringRef();null==l&&(l=s);var c=i.readByte();switch(e.AttachmentTypeValues[c]){case t.AttachmentType.Region:var f=i.readStringRef(),d=i.readFloat(),p=i.readFloat(),m=i.readFloat(),v=i.readFloat(),g=i.readFloat(),y=i.readFloat(),_=i.readFloat(),T=i.readInt32();null==f&&(f=l);var E=this.attachmentLoader.newRegionAttachment(a,l,f);return null==E?null:(E.path=f,E.x=p*u,E.y=m*u,E.scaleX=v,E.scaleY=g,E.rotation=d,E.width=y*u,E.height=_*u,t.Color.rgba8888ToColor(E.color,T),E.updateOffset(),E);case t.AttachmentType.BoundingBox:var S=i.readInt(!0),b=this.readVertices(i,S),T=h?i.readInt32():0,A=this.attachmentLoader.newBoundingBoxAttachment(a,l);return null==A?null:(A.worldVerticesLength=S<<1,A.vertices=b.vertices,A.bones=b.bones,h&&t.Color.rgba8888ToColor(A.color,T),A);case t.AttachmentType.Mesh:var f=i.readStringRef(),T=i.readInt32(),S=i.readInt(!0),I=this.readFloatArray(i,S<<1,1),w=this.readShortArray(i),b=this.readVertices(i,S),x=i.readInt(!0),P=null,y=0,_=0;h&&(P=this.readShortArray(i),y=i.readFloat(),_=i.readFloat()),null==f&&(f=l);var M=this.attachmentLoader.newMeshAttachment(a,l,f);return null==M?null:(M.path=f,t.Color.rgba8888ToColor(M.color,T),M.bones=b.bones,M.vertices=b.vertices,M.worldVerticesLength=S<<1,M.triangles=w,M.regionUVs=new Float32Array(I),M.hullLength=x<<1,h&&(M.edges=P,M.width=y*u,M.height=_*u),M);case t.AttachmentType.LinkedMesh:var f=i.readStringRef(),T=i.readInt32(),O=i.readStringRef(),C=i.readStringRef(),R=i.readBoolean(),y=0,_=0;h&&(y=i.readFloat(),_=i.readFloat()),null==f&&(f=l);var M=this.attachmentLoader.newMeshAttachment(a,l,f);return null==M?null:(M.path=f,t.Color.rgba8888ToColor(M.color,T),h&&(M.width=y*u,M.height=_*u),this.linkedMeshes.push(new n(M,O,o,C,R)),M);case t.AttachmentType.Path:for(var k=i.readBoolean(),D=i.readBoolean(),S=i.readInt(!0),b=this.readVertices(i,S),L=t.Utils.newArray(S/3,0),N=0,G=L.length;N<G;N++)L[N]=i.readFloat()*u;var T=h?i.readInt32():0,f=this.attachmentLoader.newPathAttachment(a,l);return null==f?null:(f.closed=k,f.constantSpeed=D,f.worldVerticesLength=S<<1,f.vertices=b.vertices,f.bones=b.bones,f.lengths=L,h&&t.Color.rgba8888ToColor(f.color,T),f);case t.AttachmentType.Point:var d=i.readFloat(),p=i.readFloat(),m=i.readFloat(),T=h?i.readInt32():0,F=this.attachmentLoader.newPointAttachment(a,l);return null==F?null:(F.x=p*u,F.y=m*u,F.rotation=d,h&&t.Color.rgba8888ToColor(F.color,T),F);case t.AttachmentType.Clipping:var U=i.readInt(!0),S=i.readInt(!0),b=this.readVertices(i,S),T=h?i.readInt32():0,B=this.attachmentLoader.newClippingAttachment(a,l);return null==B?null:(B.endSlot=r.slots[U],B.worldVerticesLength=S<<1,B.vertices=b.vertices,B.bones=b.bones,h&&t.Color.rgba8888ToColor(B.color,T),B)}return null},e.prototype.readVertices=function(e,i){var n=i<<1,a=new r,o=this.scale;if(!e.readBoolean())return a.vertices=this.readFloatArray(e,n,o),a;for(var s=new Array,h=new Array,u=0;u<i;u++){var l=e.readInt(!0);h.push(l);for(var c=0;c<l;c++)h.push(e.readInt(!0)),s.push(e.readFloat()*o),s.push(e.readFloat()*o),s.push(e.readFloat())}return a.vertices=t.Utils.toFloatArray(s),a.bones=h,a},e.prototype.readFloatArray=function(t,e,i){var n=new Array(e);if(1==i)for(var r=0;r<e;r++)n[r]=t.readFloat();else for(var r=0;r<e;r++)n[r]=t.readFloat()*i;return n},e.prototype.readShortArray=function(t){for(var e=t.readInt(!0),i=new Array(e),n=0;n<e;n++)i[n]=t.readShort();return i},e.prototype.readAnimation=function(i,n,r){for(var a=new Array,o=this.scale,s=0,h=new t.Color,u=new t.Color,l=0,c=i.readInt(!0);l<c;l++)for(var f=i.readInt(!0),d=0,p=i.readInt(!0);d<p;d++){var m=i.readByte(),v=i.readInt(!0);switch(m){case e.SLOT_ATTACHMENT:var g=new t.AttachmentTimeline(v);g.slotIndex=f;for(var y=0;y<v;y++)g.setFrame(y,i.readFloat(),i.readStringRef());a.push(g),s=Math.max(s,g.frames[v-1]);break;case e.SLOT_COLOR:var g=new t.ColorTimeline(v);g.slotIndex=f;for(var y=0;y<v;y++){var _=i.readFloat();t.Color.rgba8888ToColor(h,i.readInt32()),g.setFrame(y,_,h.r,h.g,h.b,h.a),y<v-1&&this.readCurve(i,y,g)}a.push(g),s=Math.max(s,g.frames[(v-1)*t.ColorTimeline.ENTRIES]);break;case e.SLOT_TWO_COLOR:var g=new t.TwoColorTimeline(v);g.slotIndex=f;for(var y=0;y<v;y++){var _=i.readFloat();t.Color.rgba8888ToColor(h,i.readInt32()),t.Color.rgb888ToColor(u,i.readInt32()),g.setFrame(y,_,h.r,h.g,h.b,h.a,u.r,u.g,u.b),y<v-1&&this.readCurve(i,y,g)}a.push(g),s=Math.max(s,g.frames[(v-1)*t.TwoColorTimeline.ENTRIES])}}for(var l=0,c=i.readInt(!0);l<c;l++)for(var T=i.readInt(!0),d=0,p=i.readInt(!0);d<p;d++){var m=i.readByte(),v=i.readInt(!0);switch(m){case e.BONE_ROTATE:var g=new t.RotateTimeline(v);g.boneIndex=T;for(var y=0;y<v;y++)g.setFrame(y,i.readFloat(),i.readFloat()),y<v-1&&this.readCurve(i,y,g);a.push(g),s=Math.max(s,g.frames[(v-1)*t.RotateTimeline.ENTRIES]);break;case e.BONE_TRANSLATE:case e.BONE_SCALE:case e.BONE_SHEAR:var g=void 0,E=1;m==e.BONE_SCALE?g=new t.ScaleTimeline(v):m==e.BONE_SHEAR?g=new t.ShearTimeline(v):(g=new t.TranslateTimeline(v),E=o),g.boneIndex=T;for(var y=0;y<v;y++)g.setFrame(y,i.readFloat(),i.readFloat()*E,i.readFloat()*E),y<v-1&&this.readCurve(i,y,g);a.push(g),s=Math.max(s,g.frames[(v-1)*t.TranslateTimeline.ENTRIES])}}for(var l=0,c=i.readInt(!0);l<c;l++){var S=i.readInt(!0),v=i.readInt(!0),g=new t.IkConstraintTimeline(v);g.ikConstraintIndex=S;for(var y=0;y<v;y++)g.setFrame(y,i.readFloat(),i.readFloat(),i.readFloat()*o,i.readByte(),i.readBoolean(),i.readBoolean()),y<v-1&&this.readCurve(i,y,g);a.push(g),s=Math.max(s,g.frames[(v-1)*t.IkConstraintTimeline.ENTRIES])}for(var l=0,c=i.readInt(!0);l<c;l++){var S=i.readInt(!0),v=i.readInt(!0),g=new t.TransformConstraintTimeline(v);g.transformConstraintIndex=S;for(var y=0;y<v;y++)g.setFrame(y,i.readFloat(),i.readFloat(),i.readFloat(),i.readFloat(),i.readFloat()),y<v-1&&this.readCurve(i,y,g);a.push(g),s=Math.max(s,g.frames[(v-1)*t.TransformConstraintTimeline.ENTRIES])}for(var l=0,c=i.readInt(!0);l<c;l++)for(var S=i.readInt(!0),b=r.pathConstraints[S],d=0,p=i.readInt(!0);d<p;d++){var m=i.readByte(),v=i.readInt(!0);switch(m){case e.PATH_POSITION:case e.PATH_SPACING:var g=void 0,E=1;m==e.PATH_SPACING?(g=new t.PathConstraintSpacingTimeline(v),b.spacingMode!=t.SpacingMode.Length&&b.spacingMode!=t.SpacingMode.Fixed||(E=o)):(g=new t.PathConstraintPositionTimeline(v),b.positionMode==t.PositionMode.Fixed&&(E=o)),g.pathConstraintIndex=S;for(var y=0;y<v;y++)g.setFrame(y,i.readFloat(),i.readFloat()*E),y<v-1&&this.readCurve(i,y,g);a.push(g),s=Math.max(s,g.frames[(v-1)*t.PathConstraintPositionTimeline.ENTRIES]);break;case e.PATH_MIX:var g=new t.PathConstraintMixTimeline(v);g.pathConstraintIndex=S;for(var y=0;y<v;y++)g.setFrame(y,i.readFloat(),i.readFloat(),i.readFloat()),y<v-1&&this.readCurve(i,y,g);a.push(g),s=Math.max(s,g.frames[(v-1)*t.PathConstraintMixTimeline.ENTRIES])}}for(var l=0,c=i.readInt(!0);l<c;l++)for(var A=r.skins[i.readInt(!0)],d=0,p=i.readInt(!0);d<p;d++)for(var f=i.readInt(!0),I=0,w=i.readInt(!0);I<w;I++){var x=A.getAttachment(f,i.readStringRef()),P=null!=x.bones,M=x.vertices,O=P?M.length/3*2:M.length,v=i.readInt(!0),g=new t.DeformTimeline(v);g.slotIndex=f,g.attachment=x;for(var y=0;y<v;y++){var _=i.readFloat(),C=void 0,R=i.readInt(!0);if(0==R)C=P?t.Utils.newFloatArray(O):M;else{C=t.Utils.newFloatArray(O);var k=i.readInt(!0);if(R+=k,1==o)for(var D=k;D<R;D++)C[D]=i.readFloat();else for(var D=k;D<R;D++)C[D]=i.readFloat()*o;if(!P)for(var D=0,L=C.length;D<L;D++)C[D]+=M[D]}g.setFrame(y,_,C),y<v-1&&this.readCurve(i,y,g)}a.push(g),s=Math.max(s,g.frames[v-1])}var N=i.readInt(!0);if(N>0){for(var g=new t.DrawOrderTimeline(N),G=r.slots.length,l=0;l<N;l++){for(var _=i.readFloat(),F=i.readInt(!0),U=t.Utils.newArray(G,0),d=G-1;d>=0;d--)U[d]=-1;for(var B=t.Utils.newArray(G-F,0),j=0,V=0,d=0;d<F;d++){for(var f=i.readInt(!0);j!=f;)B[V++]=j++;U[j+i.readInt(!0)]=j++}for(;j<G;)B[V++]=j++;for(var d=G-1;d>=0;d--)-1==U[d]&&(U[d]=B[--V]);g.setFrame(l,_,U)}a.push(g),s=Math.max(s,g.frames[N-1])}var X=i.readInt(!0);if(X>0){for(var g=new t.EventTimeline(X),l=0;l<X;l++){var _=i.readFloat(),H=r.events[i.readInt(!0)],Y=new t.Event(_,H);Y.intValue=i.readInt(!1),Y.floatValue=i.readFloat(),Y.stringValue=i.readBoolean()?i.readString():H.stringValue,null!=Y.data.audioPath&&(Y.volume=i.readFloat(),Y.balance=i.readFloat()),g.setFrame(l,Y)}a.push(g),s=Math.max(s,g.frames[X-1])}return new t.Animation(n,a,s)},e.prototype.readCurve=function(t,i,n){switch(t.readByte()){case e.CURVE_STEPPED:n.setStepped(i);break;case e.CURVE_BEZIER:this.setCurve(n,i,t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat())}},e.prototype.setCurve=function(t,e,i,n,r,a){t.setCurve(e,i,n,r,a)},e.AttachmentTypeValues=[0,1,2,3,4,5,6],e.TransformModeValues=[t.TransformMode.Normal,t.TransformMode.OnlyTranslation,t.TransformMode.NoRotationOrReflection,t.TransformMode.NoScale,t.TransformMode.NoScaleOrReflection],e.PositionModeValues=[t.PositionMode.Fixed,t.PositionMode.Percent],e.SpacingModeValues=[t.SpacingMode.Length,t.SpacingMode.Fixed,t.SpacingMode.Percent],e.RotateModeValues=[t.RotateMode.Tangent,t.RotateMode.Chain,t.RotateMode.ChainScale],e.BlendModeValues=[t.BlendMode.Normal,t.BlendMode.Additive,t.BlendMode.Multiply,t.BlendMode.Screen],e.BONE_ROTATE=0,e.BONE_TRANSLATE=1,e.BONE_SCALE=2,e.BONE_SHEAR=3,e.SLOT_ATTACHMENT=0,e.SLOT_COLOR=1,e.SLOT_TWO_COLOR=2,e.PATH_POSITION=0,e.PATH_SPACING=1,e.PATH_MIX=2,e.CURVE_LINEAR=0,e.CURVE_STEPPED=1,e.CURVE_BEZIER=2,e}();t.SkeletonBinary=e;var i=function(){function t(t,e,i,n){void 0===e&&(e=new Array),void 0===i&&(i=0),void 0===n&&(n=new DataView(t.buffer)),this.strings=e,this.index=i,this.buffer=n}return t.prototype.readByte=function(){return this.buffer.getInt8(this.index++)},t.prototype.readShort=function(){var t=this.buffer.getInt16(this.index);return this.index+=2,t},t.prototype.readInt32=function(){var t=this.buffer.getInt32(this.index);return this.index+=4,t},t.prototype.readInt=function(t){var e=this.readByte(),i=127&e;return 0!=(128&e)&&(e=this.readByte(),i|=(127&e)<<7,0!=(128&e)&&(e=this.readByte(),i|=(127&e)<<14,0!=(128&e)&&(e=this.readByte(),i|=(127&e)<<21,0!=(128&e)&&(e=this.readByte(),i|=(127&e)<<28)))),t?i:i>>>1^-(1&i)},t.prototype.readStringRef=function(){var t=this.readInt(!0);return 0==t?null:this.strings[t-1]},t.prototype.readString=function(){var t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;for(var e="",i=0;i<t;){var n=this.readByte();switch(n>>4){case 12:case 13:e+=String.fromCharCode((31&n)<<6|63&this.readByte()),i+=2;break;case 14:e+=String.fromCharCode((15&n)<<12|(63&this.readByte())<<6|63&this.readByte()),i+=3;break;default:e+=String.fromCharCode(n),i++}}return e},t.prototype.readFloat=function(){var t=this.buffer.getFloat32(this.index);return this.index+=4,t},t.prototype.readBoolean=function(){return 0!=this.readByte()},t}(),n=function(){function t(t,e,i,n,r){this.mesh=t,this.skin=e,this.slotIndex=i,this.parent=n,this.inheritDeform=r}return t}(),r=function(){function t(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.bones=t,this.vertices=e}return t}()}(t.core||(t.core={}))}(n||(n={}));var n;!function(t){!function(t){var e=function(){function e(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new t.Pool(function(){return t.Utils.newFloatArray(16)})}return e.prototype.update=function(e,i){if(null==e)throw new Error("skeleton cannot be null.");var n=this.boundingBoxes,r=this.polygons,a=this.polygonPool,o=e.slots,s=o.length;n.length=0,a.freeAll(r),r.length=0;for(var h=0;h<s;h++){var u=o[h];if(u.bone.active){var l=u.getAttachment();if(l instanceof t.BoundingBoxAttachment){var c=l;n.push(c);var f=a.obtain();f.length!=c.worldVerticesLength&&(f=t.Utils.newFloatArray(c.worldVerticesLength)),r.push(f),c.computeWorldVertices(u,0,c.worldVerticesLength,f,0,2)}}}i?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},e.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=this.polygons,a=0,o=r.length;a<o;a++)for(var s=r[a],h=s,u=0,l=s.length;u<l;u+=2){var c=h[u],f=h[u+1];t=Math.min(t,c),e=Math.min(e,f),i=Math.max(i,c),n=Math.max(n,f)}this.minX=t,this.minY=e,this.maxX=i,this.maxY=n},e.prototype.aabbContainsPoint=function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},e.prototype.aabbIntersectsSegment=function(t,e,i,n){var r=this.minX,a=this.minY,o=this.maxX,s=this.maxY;if(t<=r&&i<=r||e<=a&&n<=a||t>=o&&i>=o||e>=s&&n>=s)return!1;var h=(n-e)/(i-t),u=h*(r-t)+e;if(u>a&&u<s)return!0;if((u=h*(o-t)+e)>a&&u<s)return!0;var l=(a-e)/h+t;return l>r&&l<o||(l=(s-e)/h+t)>r&&l<o},e.prototype.aabbIntersectsSkeleton=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},e.prototype.containsPoint=function(t,e){for(var i=this.polygons,n=0,r=i.length;n<r;n++)if(this.containsPointPolygon(i[n],t,e))return this.boundingBoxes[n];return null},e.prototype.containsPointPolygon=function(t,e,i){for(var n=t,r=t.length,a=r-2,o=!1,s=0;s<r;s+=2){var h=n[s+1],u=n[a+1];if(h<i&&u>=i||u<i&&h>=i){var l=n[s];l+(i-h)/(u-h)*(n[a]-l)<e&&(o=!o)}a=s}return o},e.prototype.intersectsSegment=function(t,e,i,n){for(var r=this.polygons,a=0,o=r.length;a<o;a++)if(this.intersectsSegmentPolygon(r[a],t,e,i,n))return this.boundingBoxes[a];return null},e.prototype.intersectsSegmentPolygon=function(t,e,i,n,r){for(var a=t,o=t.length,s=e-n,h=i-r,u=e*r-i*n,l=a[o-2],c=a[o-1],f=0;f<o;f+=2){var d=a[f],p=a[f+1],m=l*p-c*d,v=l-d,g=c-p,y=s*g-h*v,_=(u*v-s*m)/y;if((_>=l&&_<=d||_>=d&&_<=l)&&(_>=e&&_<=n||_>=n&&_<=e)){var T=(u*g-h*m)/y;if((T>=c&&T<=p||T>=p&&T<=c)&&(T>=i&&T<=r||T>=r&&T<=i))return!0}l=d,c=p}return!1},e.prototype.getPolygon=function(t){if(null==t)throw new Error("boundingBox cannot be null.");var e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]},e.prototype.getWidth=function(){return this.maxX-this.minX},e.prototype.getHeight=function(){return this.maxY-this.minY},e}();t.SkeletonBounds=e}(t.core||(t.core={}))}(n||(n={}));var n;!function(t){!function(t){var e=function(){function e(){this.triangulator=new t.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}return e.prototype.clipStart=function(i,n){if(null!=this.clipAttachment)return 0;this.clipAttachment=n;var r=n.worldVerticesLength,a=t.Utils.setArraySize(this.clippingPolygon,r);n.computeWorldVertices(i,0,r,a,0,2);var o=this.clippingPolygon;e.makeClockwise(o);for(var s=this.clippingPolygons=this.triangulator.decompose(o,this.triangulator.triangulate(o)),h=0,u=s.length;h<u;h++){var l=s[h];e.makeClockwise(l),l.push(l[0]),l.push(l[1])}return s.length},e.prototype.clipEndWithSlot=function(t){null!=this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()},e.prototype.clipEnd=function(){null!=this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)},e.prototype.isClipping=function(){return null!=this.clipAttachment},e.prototype.clipTriangles=function(e,i,n,r,a,o,s,h){var u=this.clipOutput,l=this.clippedVertices,c=this.clippedTriangles,f=this.clippingPolygons,d=this.clippingPolygons.length,p=h?12:8,m=0;l.length=0,c.length=0;t:for(var v=0;v<r;v+=3){var g=n[v]<<1,y=e[g],_=e[g+1],T=a[g],E=a[g+1];g=n[v+1]<<1;var S=e[g],b=e[g+1],A=a[g],I=a[g+1];g=n[v+2]<<1;for(var w=e[g],x=e[g+1],P=a[g],M=a[g+1],O=0;O<d;O++){var C=l.length;if(!this.clip(y,_,S,b,w,x,f[O],u)){var R=t.Utils.setArraySize(l,C+3*p);R[C]=y,R[C+1]=_,R[C+2]=o.r,R[C+3]=o.g,R[C+4]=o.b,R[C+5]=o.a,h?(R[C+6]=T,R[C+7]=E,R[C+8]=s.r,R[C+9]=s.g,R[C+10]=s.b,R[C+11]=s.a,R[C+12]=S,R[C+13]=b,R[C+14]=o.r,R[C+15]=o.g,R[C+16]=o.b,R[C+17]=o.a,R[C+18]=A,R[C+19]=I,R[C+20]=s.r,R[C+21]=s.g,R[C+22]=s.b,R[C+23]=s.a,R[C+24]=w,R[C+25]=x,R[C+26]=o.r,R[C+27]=o.g,R[C+28]=o.b,R[C+29]=o.a,R[C+30]=P,R[C+31]=M,R[C+32]=s.r,R[C+33]=s.g,R[C+34]=s.b,R[C+35]=s.a):(R[C+6]=T,R[C+7]=E,R[C+8]=S,R[C+9]=b,R[C+10]=o.r,R[C+11]=o.g,R[C+12]=o.b,R[C+13]=o.a,R[C+14]=A,R[C+15]=I,R[C+16]=w,R[C+17]=x,R[C+18]=o.r,R[C+19]=o.g,R[C+20]=o.b,R[C+21]=o.a,R[C+22]=P,R[C+23]=M),C=c.length;var k=t.Utils.setArraySize(c,C+3);k[C]=m,k[C+1]=m+1,k[C+2]=m+2,m+=3;continue t}var D=u.length;if(0!=D){for(var L=b-x,N=w-S,G=y-w,F=x-_,U=1/(L*G+N*(_-x)),B=D>>1,j=this.clipOutput,R=t.Utils.setArraySize(l,C+B*p),V=0;V<D;V+=2){var X=j[V],H=j[V+1];R[C]=X,R[C+1]=H,R[C+2]=o.r,R[C+3]=o.g,R[C+4]=o.b,R[C+5]=o.a;var Y=X-w,W=H-x,z=(L*Y+N*W)*U,q=(F*Y+G*W)*U,K=1-z-q;R[C+6]=T*z+A*q+P*K,R[C+7]=E*z+I*q+M*K,h&&(R[C+8]=s.r,R[C+9]=s.g,R[C+10]=s.b,R[C+11]=s.a),C+=p}C=c.length;var k=t.Utils.setArraySize(c,C+3*(B-2));B--;for(var V=1;V<B;V++)k[C]=m,k[C+1]=m+V,k[C+2]=m+V+1,C+=3;m+=B+1}}}},e.prototype.clip=function(t,e,i,n,r,a,o,s){var h=s,u=!1,l=null;o.length%4>=2?(l=s,s=this.scratch):l=this.scratch,l.length=0,l.push(t),l.push(e),l.push(i),l.push(n),l.push(r),l.push(a),l.push(t),l.push(e),s.length=0;for(var c=o,f=o.length-4,d=0;;d+=2){for(var p=c[d],m=c[d+1],v=c[d+2],g=c[d+3],y=p-v,_=m-g,T=l,E=l.length-2,S=s.length,b=0;b<E;b+=2){var A=T[b],I=T[b+1],w=T[b+2],x=T[b+3],P=y*(x-g)-_*(w-v)>0;if(y*(I-g)-_*(A-v)>0){if(P){s.push(w),s.push(x);continue}var M=x-I,O=w-A,C=(O*(m-I)-M*(p-A))/(M*(v-p)-O*(g-m));s.push(p+(v-p)*C),s.push(m+(g-m)*C)}else if(P){var M=x-I,O=w-A,C=(O*(m-I)-M*(p-A))/(M*(v-p)-O*(g-m));s.push(p+(v-p)*C),s.push(m+(g-m)*C),s.push(w),s.push(x)}u=!0}if(S==s.length)return h.length=0,!0;if(s.push(s[0]),s.push(s[1]),d==f)break;var R=s;s=l,s.length=0,l=R}if(h!=s){h.length=0;for(var d=0,k=s.length-2;d<k;d++)h[d]=s[d]}else h.length=h.length-2;return u},e.makeClockwise=function(t){for(var e=t,i=t.length,n=e[i-2]*e[1]-e[0]*e[i-1],r=0,a=0,o=0,s=0,h=0,u=i-3;h<u;h+=2)r=e[h],a=e[h+1],o=e[h+2],s=e[h+3],n+=r*s-o*a;if(!(n<0))for(var h=0,l=i-2,u=i>>1;h<u;h+=2){var c=e[h],f=e[h+1],d=l-h;e[h]=e[d],e[h+1]=e[d+1],e[d]=c,e[d+1]=f}},e}();t.SkeletonClipping=e}(t.core||(t.core={}))}(n||(n={}));var n;!function(t){!function(t){var e=function(){function t(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return t.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,n=e.length;i<n;i++)if(e[i].name==t)return i;return-1},t.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,n=e.length;i<n;i++)if(e[i].name==t)return i;return-1},t.prototype.findSkin=function(t){if(null==t)throw new Error("skinName cannot be null.");for(var e=this.skins,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findEvent=function(t){if(null==t)throw new Error("eventDataName cannot be null.");for(var e=this.events,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findAnimation=function(t){if(null==t)throw new Error("animationName cannot be null.");for(var e=this.animations,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findPathConstraintIndex=function(t){if(null==t)throw new Error("pathConstraintName cannot be null.");for(var e=this.pathConstraints,i=0,n=e.length;i<n;i++)if(e[i].name==t)return i;return-1},t}();t.SkeletonData=e}(t.core||(t.core={}))}(n||(n={}));var n;!function(t){!function(t){var e=function(){function e(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return e.prototype.readSkeletonData=function(i){var n=this.scale,r=new t.SkeletonData,a="string"==typeof i?JSON.parse(i):i,o=a.skeleton;if(null!=o&&(r.hash=o.hash,r.version=o.spine,r.x=o.x,r.y=o.y,r.width=o.width,r.height=o.height,r.fps=o.fps,r.imagesPath=o.images),a.bones)for(var s=0;s<a.bones.length;s++){var h=a.bones[s],u=null,l=this.getValue(h,"parent",null);if(null!=l&&null==(u=r.findBone(l)))throw new Error("Parent bone not found: "+l);var c=new t.BoneData(r.bones.length,h.name,u);c.length=this.getValue(h,"length",0)*n,c.x=this.getValue(h,"x",0)*n,c.y=this.getValue(h,"y",0)*n,c.rotation=this.getValue(h,"rotation",0),c.scaleX=this.getValue(h,"scaleX",1),c.scaleY=this.getValue(h,"scaleY",1),c.shearX=this.getValue(h,"shearX",0),c.shearY=this.getValue(h,"shearY",0),c.transformMode=e.transformModeFromString(this.getValue(h,"transform","normal")),c.skinRequired=this.getValue(h,"skin",!1),r.bones.push(c)}if(a.slots)for(var s=0;s<a.slots.length;s++){var f=a.slots[s],d=f.name,p=f.bone,m=r.findBone(p);if(null==m)throw new Error("Slot bone not found: "+p);var c=new t.SlotData(r.slots.length,d,m),v=this.getValue(f,"color",null);null!=v&&c.color.setFromString(v);var g=this.getValue(f,"dark",null);null!=g&&(c.darkColor=new t.Color(1,1,1,1),c.darkColor.setFromString(g)),c.attachmentName=this.getValue(f,"attachment",null),c.blendMode=e.blendModeFromString(this.getValue(f,"blend","normal")),r.slots.push(c)}if(a.ik)for(var s=0;s<a.ik.length;s++){var y=a.ik[s],c=new t.IkConstraintData(y.name);c.order=this.getValue(y,"order",0),c.skinRequired=this.getValue(y,"skin",!1);for(var _=0;_<y.bones.length;_++){var p=y.bones[_],T=r.findBone(p);if(null==T)throw new Error("IK bone not found: "+p);c.bones.push(T)}var E=y.target;if(c.target=r.findBone(E),null==c.target)throw new Error("IK target bone not found: "+E);c.mix=this.getValue(y,"mix",1),c.softness=this.getValue(y,"softness",0)*n,c.bendDirection=this.getValue(y,"bendPositive",!0)?1:-1,c.compress=this.getValue(y,"compress",!1),c.stretch=this.getValue(y,"stretch",!1),c.uniform=this.getValue(y,"uniform",!1),r.ikConstraints.push(c)}if(a.transform)for(var s=0;s<a.transform.length;s++){var y=a.transform[s],c=new t.TransformConstraintData(y.name);c.order=this.getValue(y,"order",0),c.skinRequired=this.getValue(y,"skin",!1);for(var _=0;_<y.bones.length;_++){var p=y.bones[_],T=r.findBone(p);if(null==T)throw new Error("Transform constraint bone not found: "+p);c.bones.push(T)}var E=y.target;if(c.target=r.findBone(E),null==c.target)throw new Error("Transform constraint target bone not found: "+E);c.local=this.getValue(y,"local",!1),c.relative=this.getValue(y,"relative",!1),c.offsetRotation=this.getValue(y,"rotation",0),c.offsetX=this.getValue(y,"x",0)*n,c.offsetY=this.getValue(y,"y",0)*n,c.offsetScaleX=this.getValue(y,"scaleX",0),c.offsetScaleY=this.getValue(y,"scaleY",0),c.offsetShearY=this.getValue(y,"shearY",0),c.rotateMix=this.getValue(y,"rotateMix",1),c.translateMix=this.getValue(y,"translateMix",1),c.scaleMix=this.getValue(y,"scaleMix",1),c.shearMix=this.getValue(y,"shearMix",1),r.transformConstraints.push(c)}if(a.path)for(var s=0;s<a.path.length;s++){var y=a.path[s],c=new t.PathConstraintData(y.name);c.order=this.getValue(y,"order",0),c.skinRequired=this.getValue(y,"skin",!1);for(var _=0;_<y.bones.length;_++){var p=y.bones[_],T=r.findBone(p);if(null==T)throw new Error("Transform constraint bone not found: "+p);c.bones.push(T)}var E=y.target;if(c.target=r.findSlot(E),null==c.target)throw new Error("Path target slot not found: "+E);c.positionMode=e.positionModeFromString(this.getValue(y,"positionMode","percent")),c.spacingMode=e.spacingModeFromString(this.getValue(y,"spacingMode","length")),c.rotateMode=e.rotateModeFromString(this.getValue(y,"rotateMode","tangent")),c.offsetRotation=this.getValue(y,"rotation",0),c.position=this.getValue(y,"position",0),c.positionMode==t.PositionMode.Fixed&&(c.position*=n),c.spacing=this.getValue(y,"spacing",0),c.spacingMode!=t.SpacingMode.Length&&c.spacingMode!=t.SpacingMode.Fixed||(c.spacing*=n),c.rotateMix=this.getValue(y,"rotateMix",1),c.translateMix=this.getValue(y,"translateMix",1),r.pathConstraints.push(c)}if(a.skins)for(var s=0;s<a.skins.length;s++){var S=a.skins[s],b=new t.Skin(S.name);if(S.bones)for(var A=0;A<S.bones.length;A++){var T=r.findBone(S.bones[A]);if(null==T)throw new Error("Skin bone not found: "+S.bones[s]);b.bones.push(T)}if(S.ik)for(var A=0;A<S.ik.length;A++){var I=r.findIkConstraint(S.ik[A]);if(null==I)throw new Error("Skin IK constraint not found: "+S.ik[s]);b.constraints.push(I)}if(S.transform)for(var A=0;A<S.transform.length;A++){var I=r.findTransformConstraint(S.transform[A]);if(null==I)throw new Error("Skin transform constraint not found: "+S.transform[s]);b.constraints.push(I)}if(S.path)for(var A=0;A<S.path.length;A++){var I=r.findPathConstraint(S.path[A]);if(null==I)throw new Error("Skin path constraint not found: "+S.path[s]);b.constraints.push(I)}for(var d in S.attachments){var w=r.findSlot(d);if(null==w)throw new Error("Slot not found: "+d);var f=S.attachments[d];for(var x in f){var P=this.readAttachment(f[x],b,w.index,x,r);null!=P&&b.setAttachment(w.index,x,P)}}r.skins.push(b),"default"==b.name&&(r.defaultSkin=b)}for(var s=0,M=this.linkedMeshes.length;s<M;s++){var O=this.linkedMeshes[s],b=null==O.skin?r.defaultSkin:r.findSkin(O.skin);if(null==b)throw new Error("Skin not found: "+O.skin);var C=b.getAttachment(O.slotIndex,O.parent);if(null==C)throw new Error("Parent mesh not found: "+O.parent);O.mesh.deformAttachment=O.inheritDeform?C:O.mesh,O.mesh.setParentMesh(C)}if(this.linkedMeshes.length=0,a.events)for(var R in a.events){var k=a.events[R],c=new t.EventData(R);c.intValue=this.getValue(k,"int",0),c.floatValue=this.getValue(k,"float",0),c.stringValue=this.getValue(k,"string",""),c.audioPath=this.getValue(k,"audio",null),null!=c.audioPath&&(c.volume=this.getValue(k,"volume",1),c.balance=this.getValue(k,"balance",0)),r.events.push(c)}if(a.animations)for(var D in a.animations){var L=a.animations[D];this.readAnimation(L,D,r)}return r},e.prototype.readAttachment=function(e,n,r,a,o){var s=this.scale;switch(a=this.getValue(e,"name",a),this.getValue(e,"type","region")){case"region":var h=this.getValue(e,"path",a),u=this.attachmentLoader.newRegionAttachment(n,a,h);if(null==u)return null;u.path=h,u.x=this.getValue(e,"x",0)*s,u.y=this.getValue(e,"y",0)*s,u.scaleX=this.getValue(e,"scaleX",1),u.scaleY=this.getValue(e,"scaleY",1),u.rotation=this.getValue(e,"rotation",0),u.width=e.width*s,u.height=e.height*s;var l=this.getValue(e,"color",null);return null!=l&&u.color.setFromString(l),u.updateOffset(),u;case"boundingbox":var c=this.attachmentLoader.newBoundingBoxAttachment(n,a);if(null==c)return null;this.readVertices(e,c,e.vertexCount<<1);var l=this.getValue(e,"color",null);return null!=l&&c.color.setFromString(l),c;case"mesh":case"linkedmesh":var h=this.getValue(e,"path",a),f=this.attachmentLoader.newMeshAttachment(n,a,h);if(null==f)return null;f.path=h;var l=this.getValue(e,"color",null);null!=l&&f.color.setFromString(l),f.width=this.getValue(e,"width",0)*s,f.height=this.getValue(e,"height",0)*s;var d=this.getValue(e,"parent",null);if(null!=d)return this.linkedMeshes.push(new i(f,this.getValue(e,"skin",null),r,d,this.getValue(e,"deform",!0))),f;var p=e.uvs;return this.readVertices(e,f,p.length),f.triangles=e.triangles,f.regionUVs=new Float32Array(p),f.edges=this.getValue(e,"edges",null),f.hullLength=2*this.getValue(e,"hull",0),f;case"path":var h=this.attachmentLoader.newPathAttachment(n,a);if(null==h)return null;h.closed=this.getValue(e,"closed",!1),h.constantSpeed=this.getValue(e,"constantSpeed",!0);var m=e.vertexCount;this.readVertices(e,h,m<<1);for(var v=t.Utils.newArray(m/3,0),g=0;g<e.lengths.length;g++)v[g]=e.lengths[g]*s;h.lengths=v;var l=this.getValue(e,"color",null);return null!=l&&h.color.setFromString(l),h;case"point":var y=this.attachmentLoader.newPointAttachment(n,a);if(null==y)return null;y.x=this.getValue(e,"x",0)*s,y.y=this.getValue(e,"y",0)*s,y.rotation=this.getValue(e,"rotation",0);var l=this.getValue(e,"color",null);return null!=l&&y.color.setFromString(l),y;case"clipping":var _=this.attachmentLoader.newClippingAttachment(n,a);if(null==_)return null;var T=this.getValue(e,"end",null);if(null!=T){var E=o.findSlot(T);if(null==E)throw new Error("Clipping end slot not found: "+T);_.endSlot=E}var m=e.vertexCount;this.readVertices(e,_,m<<1);var l=this.getValue(e,"color",null);return null!=l&&_.color.setFromString(l),_}return null},e.prototype.readVertices=function(e,i,n){var r=this.scale;i.worldVerticesLength=n;var a=e.vertices;if(n==a.length){var o=t.Utils.toFloatArray(a);if(1!=r)for(var s=0,h=a.length;s<h;s++)o[s]*=r;return void(i.vertices=o)}for(var u=new Array,l=new Array,s=0,h=a.length;s<h;){var c=a[s++];l.push(c);for(var f=s+4*c;s<f;s+=4)l.push(a[s]),u.push(a[s+1]*r),u.push(a[s+2]*r),u.push(a[s+3])}i.bones=l,i.vertices=t.Utils.toFloatArray(u)},e.prototype.readAnimation=function(e,i,n){var r=this.scale,a=new Array,o=0;if(e.slots)for(var s in e.slots){var h=e.slots[s],u=n.findSlotIndex(s);if(-1==u)throw new Error("Slot not found: "+s);for(var l in h){var c=h[l];if("attachment"==l){var f=new t.AttachmentTimeline(c.length);f.slotIndex=u;for(var d=0,p=0;p<c.length;p++){var m=c[p];f.setFrame(d++,this.getValue(m,"time",0),m.name)}a.push(f),o=Math.max(o,f.frames[f.getFrameCount()-1])}else if("color"==l){var f=new t.ColorTimeline(c.length);f.slotIndex=u;for(var d=0,p=0;p<c.length;p++){var m=c[p],v=new t.Color;v.setFromString(m.color||"ffffffff"),f.setFrame(d,this.getValue(m,"time",0),v.r,v.g,v.b,v.a),this.readCurve(m,f,d),d++}a.push(f),o=Math.max(o,f.frames[(f.getFrameCount()-1)*t.ColorTimeline.ENTRIES])}else{if("twoColor"!=l)throw new Error("Invalid timeline type for a slot: "+l+" ("+s+")");var f=new t.TwoColorTimeline(c.length);f.slotIndex=u;for(var d=0,p=0;p<c.length;p++){var m=c[p],g=new t.Color,y=new t.Color;g.setFromString(m.light),y.setFromString(m.dark),f.setFrame(d,this.getValue(m,"time",0),g.r,g.g,g.b,g.a,y.r,y.g,y.b),this.readCurve(m,f,d),d++}a.push(f),o=Math.max(o,f.frames[(f.getFrameCount()-1)*t.TwoColorTimeline.ENTRIES])}}}if(e.bones)for(var _ in e.bones){var T=e.bones[_],E=n.findBoneIndex(_);if(-1==E)throw new Error("Bone not found: "+_);for(var l in T){var c=T[l];if("rotate"===l){var f=new t.RotateTimeline(c.length);f.boneIndex=E;for(var d=0,p=0;p<c.length;p++){var m=c[p];f.setFrame(d,this.getValue(m,"time",0),this.getValue(m,"angle",0)),this.readCurve(m,f,d),d++}a.push(f),o=Math.max(o,f.frames[(f.getFrameCount()-1)*t.RotateTimeline.ENTRIES])}else{if("translate"!==l&&"scale"!==l&&"shear"!==l)throw new Error("Invalid timeline type for a bone: "+l+" ("+_+")");var f=null,S=1,b=0;"scale"===l?(f=new t.ScaleTimeline(c.length),b=1):"shear"===l?f=new t.ShearTimeline(c.length):(f=new t.TranslateTimeline(c.length),S=r),f.boneIndex=E;for(var d=0,p=0;p<c.length;p++){var m=c[p],A=this.getValue(m,"x",b),I=this.getValue(m,"y",b);f.setFrame(d,this.getValue(m,"time",0),A*S,I*S),this.readCurve(m,f,d),d++}a.push(f),o=Math.max(o,f.frames[(f.getFrameCount()-1)*t.TranslateTimeline.ENTRIES])}}}if(e.ik)for(var w in e.ik){var x=e.ik[w],P=n.findIkConstraint(w),f=new t.IkConstraintTimeline(x.length);f.ikConstraintIndex=n.ikConstraints.indexOf(P);for(var d=0,p=0;p<x.length;p++){var m=x[p];f.setFrame(d,this.getValue(m,"time",0),this.getValue(m,"mix",1),this.getValue(m,"softness",0)*r,this.getValue(m,"bendPositive",!0)?1:-1,this.getValue(m,"compress",!1),this.getValue(m,"stretch",!1)),this.readCurve(m,f,d),d++}a.push(f),o=Math.max(o,f.frames[(f.getFrameCount()-1)*t.IkConstraintTimeline.ENTRIES])}if(e.transform)for(var w in e.transform){var x=e.transform[w],P=n.findTransformConstraint(w),f=new t.TransformConstraintTimeline(x.length);f.transformConstraintIndex=n.transformConstraints.indexOf(P);for(var d=0,p=0;p<x.length;p++){var m=x[p];f.setFrame(d,this.getValue(m,"time",0),this.getValue(m,"rotateMix",1),this.getValue(m,"translateMix",1),this.getValue(m,"scaleMix",1),this.getValue(m,"shearMix",1)),this.readCurve(m,f,d),d++}a.push(f),o=Math.max(o,f.frames[(f.getFrameCount()-1)*t.TransformConstraintTimeline.ENTRIES])}if(e.path)for(var w in e.path){var x=e.path[w],M=n.findPathConstraintIndex(w);if(-1==M)throw new Error("Path constraint not found: "+w);var O=n.pathConstraints[M];for(var l in x){var c=x[l];if("position"===l||"spacing"===l){var f=null,S=1;"spacing"===l?(f=new t.PathConstraintSpacingTimeline(c.length),O.spacingMode!=t.SpacingMode.Length&&O.spacingMode!=t.SpacingMode.Fixed||(S=r)):(f=new t.PathConstraintPositionTimeline(c.length),O.positionMode==t.PositionMode.Fixed&&(S=r)),f.pathConstraintIndex=M;for(var d=0,p=0;p<c.length;p++){var m=c[p];f.setFrame(d,this.getValue(m,"time",0),this.getValue(m,l,0)*S),this.readCurve(m,f,d),d++}a.push(f),o=Math.max(o,f.frames[(f.getFrameCount()-1)*t.PathConstraintPositionTimeline.ENTRIES])}else if("mix"===l){var f=new t.PathConstraintMixTimeline(c.length);f.pathConstraintIndex=M;for(var d=0,p=0;p<c.length;p++){var m=c[p];f.setFrame(d,this.getValue(m,"time",0),this.getValue(m,"rotateMix",1),this.getValue(m,"translateMix",1)),this.readCurve(m,f,d),d++}a.push(f),o=Math.max(o,f.frames[(f.getFrameCount()-1)*t.PathConstraintMixTimeline.ENTRIES])}}}if(e.deform)for(var C in e.deform){var R=e.deform[C],k=n.findSkin(C);if(null==k)throw new Error("Skin not found: "+C);for(var s in R){var h=R[s],u=n.findSlotIndex(s);if(-1==u)throw new Error("Slot not found: "+h.name);for(var l in h){var c=h[l],D=k.getAttachment(u,l);if(null==D)throw new Error("Deform attachment not found: "+c.name);var L=null!=D.bones,N=D.vertices,G=L?N.length/3*2:N.length,f=new t.DeformTimeline(c.length);f.slotIndex=u,f.attachment=D;for(var d=0,F=0;F<c.length;F++){var m=c[F],U=void 0,B=this.getValue(m,"vertices",null);if(null==B)U=L?t.Utils.newFloatArray(G):N;else{U=t.Utils.newFloatArray(G);var j=this.getValue(m,"offset",0);if(t.Utils.arrayCopy(B,0,U,j,B.length),1!=r)for(var p=j,V=p+B.length;p<V;p++)U[p]*=r;if(!L)for(var p=0;p<G;p++)U[p]+=N[p]}f.setFrame(d,this.getValue(m,"time",0),U),this.readCurve(m,f,d),d++}a.push(f),o=Math.max(o,f.frames[f.getFrameCount()-1])}}}var X=e.drawOrder;if(null==X&&(X=e.draworder),null!=X){for(var f=new t.DrawOrderTimeline(X.length),H=n.slots.length,d=0,F=0;F<X.length;F++){var Y=X[F],W=null,z=this.getValue(Y,"offsets",null);if(null!=z){W=t.Utils.newArray(H,-1);for(var q=t.Utils.newArray(H-z.length,0),K=0,Z=0,p=0;p<z.length;p++){var J=z[p],u=n.findSlotIndex(J.slot);if(-1==u)throw new Error("Slot not found: "+J.slot);for(;K!=u;)q[Z++]=K++;W[K+J.offset]=K++}for(;K<H;)q[Z++]=K++;for(var p=H-1;p>=0;p--)-1==W[p]&&(W[p]=q[--Z])}f.setFrame(d++,this.getValue(Y,"time",0),W)}a.push(f),o=Math.max(o,f.frames[f.getFrameCount()-1])}if(e.events){for(var f=new t.EventTimeline(e.events.length),d=0,p=0;p<e.events.length;p++){var Q=e.events[p],$=n.findEvent(Q.name);if(null==$)throw new Error("Event not found: "+Q.name);var tt=new t.Event(t.Utils.toSinglePrecision(this.getValue(Q,"time",0)),$);tt.intValue=this.getValue(Q,"int",$.intValue),tt.floatValue=this.getValue(Q,"float",$.floatValue),tt.stringValue=this.getValue(Q,"string",$.stringValue),null!=tt.data.audioPath&&(tt.volume=this.getValue(Q,"volume",1),tt.balance=this.getValue(Q,"balance",0)),f.setFrame(d++,tt)}a.push(f),o=Math.max(o,f.frames[f.getFrameCount()-1])}if(isNaN(o))throw new Error("Error while parsing animation, duration is NaN");n.animations.push(new t.Animation(i,a,o))},e.prototype.readCurve=function(t,e,i){if(t.curve)if("stepped"===t.curve)e.setStepped(i);else{var n=t.curve;e.setCurve(i,n,this.getValue(t,"c2",0),this.getValue(t,"c3",1),this.getValue(t,"c4",1))}},e.prototype.getValue=function(t,e,i){return void 0!==t[e]?t[e]:i},e.blendModeFromString=function(e){if("normal"==(e=e.toLowerCase()))return t.BlendMode.Normal;if("additive"==e)return t.BlendMode.Additive;if("multiply"==e)return t.BlendMode.Multiply;if("screen"==e)return t.BlendMode.Screen;throw new Error("Unknown blend mode: "+e)},e.positionModeFromString=function(e){if("fixed"==(e=e.toLowerCase()))return t.PositionMode.Fixed;if("percent"==e)return t.PositionMode.Percent;throw new Error("Unknown position mode: "+e)},e.spacingModeFromString=function(e){if("length"==(e=e.toLowerCase()))return t.SpacingMode.Length;if("fixed"==e)return t.SpacingMode.Fixed;if("percent"==e)return t.SpacingMode.Percent;throw new Error("Unknown position mode: "+e)},e.rotateModeFromString=function(e){if("tangent"==(e=e.toLowerCase()))return t.RotateMode.Tangent;if("chain"==e)return t.RotateMode.Chain;if("chainscale"==e)return t.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+e)},e.transformModeFromString=function(e){if("normal"==(e=e.toLowerCase()))return t.TransformMode.Normal;if("onlytranslation"==e)return t.TransformMode.OnlyTranslation;if("norotationorreflection"==e)return t.TransformMode.NoRotationOrReflection;if("noscale"==e)return t.TransformMode.NoScale;if("noscaleorreflection"==e)return t.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+e)},e}();t.SkeletonJson=e;var i=function(){function t(t,e,i,n,r){this.mesh=t,this.skin=e,this.slotIndex=i,this.parent=n,this.inheritDeform=r}return t}()}(t.core||(t.core={}))}(n||(n={}));var n;!function(t){!function(t){var e=function(){function t(t,e,i){this.slotIndex=t,this.name=e,this.attachment=i}return t}();t.SkinEntry=e;var i=function(){function i(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,null==t)throw new Error("name cannot be null.");this.name=t}return i.prototype.setAttachment=function(t,e,i){if(null==i)throw new Error("attachment cannot be null.");var n=this.attachments;t>=n.length&&(n.length=t+1),n[t]||(n[t]={}),n[t][e]=i},i.prototype.addSkin=function(t){for(var e=0;e<t.bones.length;e++){for(var i=t.bones[e],n=!1,r=0;r<this.bones.length;r++)if(this.bones[r]==i){n=!0;break}n||this.bones.push(i)}for(var e=0;e<t.constraints.length;e++){for(var a=t.constraints[e],n=!1,r=0;r<this.constraints.length;r++)if(this.constraints[r]==a){n=!0;break}n||this.constraints.push(a)}for(var o=t.getAttachments(),e=0;e<o.length;e++){var s=o[e];this.setAttachment(s.slotIndex,s.name,s.attachment)}},i.prototype.copySkin=function(e){for(var i=0;i<e.bones.length;i++){for(var n=e.bones[i],r=!1,a=0;a<this.bones.length;a++)if(this.bones[a]==n){r=!0;break}r||this.bones.push(n)}for(var i=0;i<e.constraints.length;i++){for(var o=e.constraints[i],r=!1,a=0;a<this.constraints.length;a++)if(this.constraints[a]==o){r=!0;break}r||this.constraints.push(o)}for(var s=e.getAttachments(),i=0;i<s.length;i++){var h=s[i];null!=h.attachment&&(h.attachment instanceof t.MeshAttachment?(h.attachment=h.attachment.newLinkedMesh(),this.setAttachment(h.slotIndex,h.name,h.attachment)):(h.attachment=h.attachment.copy(),this.setAttachment(h.slotIndex,h.name,h.attachment)))}},i.prototype.getAttachment=function(t,e){var i=this.attachments[t];return i?i[e]:null},i.prototype.removeAttachment=function(t,e){var i=this.attachments[t];i&&(i[e]=null)},i.prototype.getAttachments=function(){for(var t=new Array,i=0;i<this.attachments.length;i++){var n=this.attachments[i];if(n)for(var r in n){var a=n[r];a&&t.push(new e(i,r,a))}}return t},i.prototype.getAttachmentsForSlot=function(t,i){var n=this.attachments[t];if(n)for(var r in n){var a=n[r];a&&i.push(new e(t,r,a))}},i.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},i.prototype.attachAll=function(t,e){for(var i=0,n=0;n<t.slots.length;n++){var r=t.slots[n],a=r.getAttachment();if(a&&i<e.attachments.length){var o=e.attachments[i];for(var s in o){if(a==o[s]){var h=this.getAttachment(i,s);null!=h&&r.setAttachment(h);break}}}i++}},i}();t.Skin=i}(t.core||(t.core={}))}(n||(n={}));var n;!function(t){!function(t){var e=function(){function e(e,i){if(this.deform=new Array,null==e)throw new Error("data cannot be null.");if(null==i)throw new Error("bone cannot be null.");this.data=e,this.bone=i,this.color=new t.Color,this.darkColor=null==e.darkColor?null:new t.Color,this.setToSetupPose(),this.blendMode=this.data.blendMode}return e.prototype.getAttachment=function(){return this.attachment},e.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)},e.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},e.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},e.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},e}();t.Slot=e}(t.core||(t.core={}))}(n||(n={}));var n;!function(t){!function(t){var e=function(){function e(e,i,n){if(this.color=new t.Color(1,1,1,1),e<0)throw new Error("index must be >= 0.");if(null==i)throw new Error("name cannot be null.");if(null==n)throw new Error("boneData cannot be null.");this.index=e,this.name=i,this.boneData=n}return e}();t.SlotData=e}(t.core||(t.core={}))}(n||(n={}));var n;!function(t){!function(t){var e=function(){function t(t){this._image=t}return t.prototype.getImage=function(){return this._image},t.filterFromString=function(t){switch(t.toLowerCase()){case"nearest":return i.Nearest;case"linear":return i.Linear;case"mipmap":return i.MipMap;case"mipmapnearestnearest":return i.MipMapNearestNearest;case"mipmaplinearnearest":return i.MipMapLinearNearest;case"mipmapnearestlinear":return i.MipMapNearestLinear;case"mipmaplinearlinear":return i.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+t)}},t.wrapFromString=function(t){switch(t.toLowerCase()){case"mirroredtepeat":return n.MirroredRepeat;case"clamptoedge":return n.ClampToEdge;case"repeat":return n.Repeat;default:throw new Error("Unknown texture wrap "+t)}},t}();t.Texture=e;var i;!function(t){t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear"}(i=t.TextureFilter||(t.TextureFilter={}));var n;!function(t){t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat"}(n=t.TextureWrap||(t.TextureWrap={}));var r=function(){function t(){this.size=null}return Object.defineProperty(t.prototype,"width",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.crop.width:t.trim?t.trim.width:t.orig.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.crop.height:t.trim?t.trim.height:t.orig.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"u",{get:function(){return this.texture._uvs.x0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"v",{get:function(){return this.texture._uvs.y0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"u2",{get:function(){return this.texture._uvs.x2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"v2",{get:function(){return this.texture._uvs.y2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offsetX",{get:function(){var t=this.texture;return t.trim?t.trim.x:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offsetY",{get:function(){return console.warn("Deprecation Warning: @Hackerham: I guess, if you are using PIXI-SPINE ATLAS region.offsetY, you want a texture, right? Use region.texture from now on."),this.spineOffsetY},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixiOffsetY",{get:function(){var t=this.texture;return t.trim?t.trim.y:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"spineOffsetY",{get:function(){var t=this.texture;return this.originalHeight-this.height-(t.trim?t.trim.y:0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originalWidth",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.trim?t.trim.width:t.crop.width:t.orig.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originalHeight",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.trim?t.trim.height:t.crop.height:t.orig.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.texture.frame.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.texture.frame.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return 0!==this.texture.rotate},enumerable:!0,configurable:!0}),t}();t.TextureRegion=r}(t.core||(t.core={}))}(n||(n={}));var n;!function(t){!function(t){var e=function(){function e(t,e,i){this.pages=new Array,this.regions=new Array,t&&this.addSpineAtlas(t,e,i)}return e.prototype.addTexture=function(e,i){for(var r=this.pages,o=null,s=0;s<r.length;s++)if(r[s].baseTexture===i.baseTexture){o=r[s];break}if(null===o){o=new n,o.name="texturePage";var h=i.baseTexture;o.width=h.realWidth,o.height=h.realHeight,o.baseTexture=h,o.minFilter=o.magFilter=t.TextureFilter.Nearest,o.uWrap=t.TextureWrap.ClampToEdge,o.vWrap=t.TextureWrap.ClampToEdge,r.push(o)}var u=new a;return u.name=e,u.page=o,u.texture=i,u.index=-1,this.regions.push(u),u},e.prototype.addTextureHash=function(t,e){for(var i in t)t.hasOwnProperty(i)&&this.addTexture(e&&-1!==i.indexOf(".")?i.substr(0,i.lastIndexOf(".")):i,t[i])},e.prototype.addSpineAtlas=function(t,e,i){return this.load(t,e,i)},e.prototype.load=function(e,r,o){var s=this;if(null==r)throw new Error("textureLoader cannot be null.");var h=new i(e),u=new Array(4),l=null;!function e(){for(;;){var i=h.readLine();if(null==i)return o&&o(s);if(i=i.trim(),0==i.length)l=null;else{if(!l){l=new n,l.name=i,2==h.readTuple(u)&&(l.width=parseInt(u[0]),l.height=parseInt(u[1]),h.readTuple(u)),h.readTuple(u),l.minFilter=t.Texture.filterFromString(u[0]),l.magFilter=t.Texture.filterFromString(u[1]);var c=h.readValue();l.uWrap=t.TextureWrap.ClampToEdge,l.vWrap=t.TextureWrap.ClampToEdge,"x"==c?l.uWrap=t.TextureWrap.Repeat:"y"==c?l.vWrap=t.TextureWrap.Repeat:"xy"==c&&(l.uWrap=l.vWrap=t.TextureWrap.Repeat),r(i,function(t){if(null===t)return s.pages.splice(s.pages.indexOf(l),1),o&&o(null);l.baseTexture=t,t.hasLoaded||(t.width=l.width,t.height=l.height),s.pages.push(l),l.setFilters(),l.width&&l.height||(l.width=t.realWidth,l.height=t.realHeight,l.width&&l.height||console.log("ERROR spine atlas page "+l.name+": meshes wont work if you dont specify size in atlas (http://www.html5gamedevs.com/topic/18888-pixi-spines-and-meshes/?p=107121)")),e()}),s.pages.push(l);break}var f=new a;f.name=i,f.page=l;var d=h.readValue(),p=0;p="true"==d.toLocaleLowerCase()?6:"false"==d.toLocaleLowerCase()?0:(720-parseFloat(d))%360/45,h.readTuple(u);var m=parseInt(u[0]),v=parseInt(u[1]);h.readTuple(u);var g=parseInt(u[0]),y=parseInt(u[1]),_=l.baseTexture.resolution;m/=_,v/=_,g/=_,y/=_;var T=new PIXI.Rectangle(m,v,p?y:g,p?g:y);4==h.readTuple(u)&&4==h.readTuple(u)&&h.readTuple(u);var E=parseInt(u[0])/_,S=parseInt(u[1])/_;h.readTuple(u);var b=parseInt(u[0])/_,A=parseInt(u[1])/_,I=new PIXI.Rectangle(0,0,E,S),w=new PIXI.Rectangle(b,S-y-A,g,y);if("3"!=PIXI.VERSION[0])f.texture=new PIXI.Texture(f.page.baseTexture,T,I,w,p);else{var x=new PIXI.Rectangle(m,v,g,y),P=x.clone();w.width=E,w.height=S,f.texture=new PIXI.Texture(f.page.baseTexture,x,P,w,p)}f.index=parseInt(h.readValue()),f.texture._updateUvs(),s.regions.push(f)}}}()},e.prototype.findRegion=function(t){for(var e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null},e.prototype.dispose=function(){for(var t=0;t<this.pages.length;t++)this.pages[t].baseTexture.dispose()},e}();t.TextureAtlas=e;var i=function(){function t(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}return t.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},t.prototype.readValue=function(){var t=this.readLine(),e=t.indexOf(":");if(-1==e)throw new Error("Invalid line: "+t);return t.substring(e+1).trim()},t.prototype.readTuple=function(t){var e=this.readLine(),i=e.indexOf(":");if(-1==i)throw new Error("Invalid line: "+e);for(var n=0,r=i+1;n<3;n++){var a=e.indexOf(",",r);if(-1==a)break;t[n]=e.substr(r,a-r).trim(),r=a+1}return t[n]=e.substring(r).trim(),n+1},t}(),n=function(){function e(){}return e.prototype.setFilters=function(){var e=this.baseTexture,i=this.minFilter;i==t.TextureFilter.Linear?e.scaleMode=PIXI.SCALE_MODES.LINEAR:this.minFilter==t.TextureFilter.Nearest?e.scaleMode=PIXI.SCALE_MODES.NEAREST:(e.mipmap=!0,i==t.TextureFilter.MipMapNearestNearest?e.scaleMode=PIXI.SCALE_MODES.NEAREST:e.scaleMode=PIXI.SCALE_MODES.LINEAR)},e}();t.TextureAtlasPage=n;var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(t.TextureRegion);t.TextureAtlasRegion=a}(t.core||(t.core={}))}(n||(n={}));var n;!function(t){!function(t){var e=function(){function e(e,i){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new t.Vector2,this.active=!1,null==e)throw new Error("data cannot be null.");if(null==i)throw new Error("skeleton cannot be null.");this.data=e,this.rotateMix=e.rotateMix,this.translateMix=e.translateMix,this.scaleMix=e.scaleMix,this.shearMix=e.shearMix,this.bones=new Array;for(var n=0;n<e.bones.length;n++)this.bones.push(i.findBone(e.bones[n].name));this.target=i.findBone(e.target.name)}return e.prototype.isActive=function(){return this.active},e.prototype.apply=function(){this.update()},e.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},e.prototype.applyAbsoluteWorld=function(){for(var e=this.rotateMix,i=this.translateMix,n=this.scaleMix,r=this.shearMix,a=this.target,o=a.matrix,s=o.a,h=o.c,u=o.b,l=o.d,c=s*l-h*u>0?t.MathUtils.degRad:-t.MathUtils.degRad,f=this.data.offsetRotation*c,d=this.data.offsetShearY*c,p=this.bones,m=0,v=p.length;m<v;m++){var g=p[m],y=!1,_=g.matrix;if(0!=e){var T=_.a,E=_.c,S=_.b,b=_.d,A=Math.atan2(u,s)-Math.atan2(S,T)+f;A>t.MathUtils.PI?A-=t.MathUtils.PI2:A<-t.MathUtils.PI&&(A+=t.MathUtils.PI2),A*=e;var I=Math.cos(A),w=Math.sin(A);_.a=I*T-w*S,_.c=I*E-w*b,_.b=w*T+I*S,_.d=w*E+I*b,y=!0}if(0!=i){var x=this.temp;a.localToWorld(x.set(this.data.offsetX,this.data.offsetY)),_.tx+=(x.x-_.tx)*i,_.ty+=(x.y-_.ty)*i,y=!0}if(n>0){var P=Math.sqrt(_.a*_.a+_.b*_.b),M=Math.sqrt(s*s+u*u);P>1e-5&&(P=(P+(M-P+this.data.offsetScaleX)*n)/P),_.a*=P,_.b*=P,P=Math.sqrt(_.c*_.c+_.d*_.d),M=Math.sqrt(h*h+l*l),P>1e-5&&(P=(P+(M-P+this.data.offsetScaleY)*n)/P),_.c*=P,_.d*=P,y=!0}if(r>0){var E=_.c,b=_.d,O=Math.atan2(b,E),A=Math.atan2(l,h)-Math.atan2(u,s)-(O-Math.atan2(_.b,_.a));A>t.MathUtils.PI?A-=t.MathUtils.PI2:A<-t.MathUtils.PI&&(A+=t.MathUtils.PI2),A=O+(A+d)*r;var P=Math.sqrt(E*E+b*b);_.c=Math.cos(A)*P,_.d=Math.sin(A)*P,y=!0}y&&(g.appliedValid=!1)}},e.prototype.applyRelativeWorld=function(){for(var e=this.rotateMix,i=this.translateMix,n=this.scaleMix,r=this.shearMix,a=this.target,o=a.matrix,s=o.a,h=o.c,u=o.b,l=o.d,c=s*l-h*u>0?t.MathUtils.degRad:-t.MathUtils.degRad,f=this.data.offsetRotation*c,d=this.data.offsetShearY*c,p=this.bones,m=0,v=p.length;m<v;m++){var g=p[m],y=!1,_=g.matrix;if(0!=e){var T=_.a,E=_.c,S=_.b,b=_.d,A=Math.atan2(u,s)+f;A>t.MathUtils.PI?A-=t.MathUtils.PI2:A<-t.MathUtils.PI&&(A+=t.MathUtils.PI2),A*=e;var I=Math.cos(A),w=Math.sin(A);_.a=I*T-w*S,_.c=I*E-w*b,_.b=w*T+I*S,_.d=w*E+I*b,y=!0}if(0!=i){var x=this.temp;a.localToWorld(x.set(this.data.offsetX,this.data.offsetY)),_.tx+=x.x*i,_.ty+=x.y*i,y=!0}if(n>0){var P=(Math.sqrt(s*s+u*u)-1+this.data.offsetScaleX)*n+1;_.a*=P,_.b*=P,P=(Math.sqrt(h*h+l*l)-1+this.data.offsetScaleY)*n+1,_.c*=P,_.d*=P,y=!0}if(r>0){var A=Math.atan2(l,h)-Math.atan2(u,s);A>t.MathUtils.PI?A-=t.MathUtils.PI2:A<-t.MathUtils.PI&&(A+=t.MathUtils.PI2);var E=_.c,b=_.d;A=Math.atan2(b,E)+(A-t.MathUtils.PI/2+d)*r;var P=Math.sqrt(E*E+b*b);_.c=Math.cos(A)*P,_.d=Math.sin(A)*P,y=!0}y&&(g.appliedValid=!1)}},e.prototype.applyAbsoluteLocal=function(){var t=this.rotateMix,e=this.translateMix,i=this.scaleMix,n=this.shearMix,r=this.target;r.appliedValid||r.updateAppliedTransform();for(var a=this.bones,o=0,s=a.length;o<s;o++){var h=a[o];h.appliedValid||h.updateAppliedTransform();var u=h.arotation;if(0!=t){var l=r.arotation-u+this.data.offsetRotation;l-=360*(16384-(16384.499999999996-l/360|0)),u+=l*t}var c=h.ax,f=h.ay;0!=e&&(c+=(r.ax-c+this.data.offsetX)*e,f+=(r.ay-f+this.data.offsetY)*e);var d=h.ascaleX,p=h.ascaleY;i>0&&(d>1e-5&&(d=(d+(r.ascaleX-d+this.data.offsetScaleX)*i)/d),p>1e-5&&(p=(p+(r.ascaleY-p+this.data.offsetScaleY)*i)/p));var m=h.ashearY;if(n>0){var l=r.ashearY-m+this.data.offsetShearY;l-=360*(16384-(16384.499999999996-l/360|0)),h.shearY+=l*n}h.updateWorldTransformWith(c,f,u,d,p,h.ashearX,m)}},e.prototype.applyRelativeLocal=function(){var t=this.rotateMix,e=this.translateMix,i=this.scaleMix,n=this.shearMix,r=this.target;r.appliedValid||r.updateAppliedTransform();for(var a=this.bones,o=0,s=a.length;o<s;o++){var h=a[o];h.appliedValid||h.updateAppliedTransform();var u=h.arotation;0!=t&&(u+=(r.arotation+this.data.offsetRotation)*t);var l=h.ax,c=h.ay;0!=e&&(l+=(r.ax+this.data.offsetX)*e,c+=(r.ay+this.data.offsetY)*e);var f=h.ascaleX,d=h.ascaleY;i>0&&(f>1e-5&&(f*=(r.ascaleX-1+this.data.offsetScaleX)*i+1),d>1e-5&&(d*=(r.ascaleY-1+this.data.offsetScaleY)*i+1));var p=h.ashearY;n>0&&(p+=(r.ashearY+this.data.offsetShearY)*n),h.updateWorldTransformWith(l,c,u,f,d,h.ashearX,p)}},e}();t.TransformConstraint=e}(t.core||(t.core={}))}(n||(n={}));var n;!function(t){!function(t){var e=function(t){function e(e){var i=t.call(this,e,0,!1)||this;return i.bones=new Array,i.rotateMix=0,i.translateMix=0,i.scaleMix=0,i.shearMix=0,i.offsetRotation=0,i.offsetX=0,i.offsetY=0,i.offsetScaleX=0,i.offsetScaleY=0,i.offsetShearY=0,i.relative=!1,i.local=!1,i}return r(e,t),e}(t.ConstraintData);t.TransformConstraintData=e}(t.core||(t.core={}))}(n||(n={}));var n;!function(t){!function(t){var e=function(){function e(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new t.Pool(function(){return new Array}),this.polygonIndicesPool=new t.Pool(function(){return new Array})}return e.prototype.triangulate=function(t){var i=t,n=t.length>>1,r=this.indicesArray;r.length=0;for(var a=0;a<n;a++)r[a]=a;var o=this.isConcaveArray;o.length=0;for(var a=0,s=n;a<s;++a)o[a]=e.isConcave(a,n,i,r);var h=this.triangles;for(h.length=0;n>3;){for(var u=n-1,a=0,l=1;;){t:if(!o[a]){for(var c=r[u]<<1,f=r[a]<<1,d=r[l]<<1,p=i[c],m=i[c+1],v=i[f],g=i[f+1],y=i[d],_=i[d+1],T=(l+1)%n;T!=u;T=(T+1)%n)if(o[T]){var E=r[T]<<1,S=i[E],b=i[E+1];if(e.positiveArea(y,_,p,m,S,b)&&e.positiveArea(p,m,v,g,S,b)&&e.positiveArea(v,g,y,_,S,b))break t}break}if(0==l){do{if(!o[a])break;a--}while(a>0);break}u=a,a=l,l=(l+1)%n}h.push(r[(n+a-1)%n]),h.push(r[a]),h.push(r[(a+1)%n]),r.splice(a,1),o.splice(a,1),n--;var A=(n+a-1)%n,I=a==n?0:a;o[A]=e.isConcave(A,n,i,r),o[I]=e.isConcave(I,n,i,r)}return 3==n&&(h.push(r[2]),h.push(r[0]),h.push(r[1])),h},e.prototype.decompose=function(t,i){var n=t,r=this.convexPolygons;this.polygonPool.freeAll(r),r.length=0;var a=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(a),a.length=0;var o=this.polygonIndicesPool.obtain();o.length=0;var s=this.polygonPool.obtain();s.length=0;for(var h=-1,u=0,l=0,c=i.length;l<c;l+=3){var f=i[l]<<1,d=i[l+1]<<1,p=i[l+2]<<1,m=n[f],v=n[f+1],g=n[d],y=n[d+1],_=n[p],T=n[p+1],E=!1;if(h==f){var S=s.length-4,b=e.winding(s[S],s[S+1],s[S+2],s[S+3],_,T),A=e.winding(_,T,s[0],s[1],s[2],s[3]);b==u&&A==u&&(s.push(_),s.push(T),o.push(p),E=!0)}E||(s.length>0?(r.push(s),a.push(o)):(this.polygonPool.free(s),this.polygonIndicesPool.free(o)),s=this.polygonPool.obtain(),s.length=0,s.push(m),s.push(v),s.push(g),s.push(y),s.push(_),s.push(T),o=this.polygonIndicesPool.obtain(),o.length=0,o.push(f),o.push(d),o.push(p),u=e.winding(m,v,g,y,_,T),h=f)}s.length>0&&(r.push(s),a.push(o));for(var l=0,c=r.length;l<c;l++)if(o=a[l],0!=o.length){var I=o[0],w=o[o.length-1];s=r[l];for(var S=s.length-4,x=s[S],P=s[S+1],M=s[S+2],O=s[S+3],C=s[0],R=s[1],k=s[2],D=s[3],L=e.winding(x,P,M,O,C,R),N=0;N<c;N++)if(N!=l){var G=a[N];if(3==G.length){var F=G[0],U=G[1],B=G[2],j=r[N],_=j[j.length-2],T=j[j.length-1];if(F==I&&U==w){var b=e.winding(x,P,M,O,_,T),A=e.winding(_,T,C,R,k,D);b==L&&A==L&&(j.length=0,G.length=0,s.push(_),s.push(T),o.push(B),x=M,P=O,M=_,O=T,N=0)}}}}for(var l=r.length-1;l>=0;l--)s=r[l],0==s.length&&(r.splice(l,1),this.polygonPool.free(s),o=a[l],a.splice(l,1),this.polygonIndicesPool.free(o));return r},e.isConcave=function(t,e,i,n){var r=n[(e+t-1)%e]<<1,a=n[t]<<1,o=n[(t+1)%e]<<1;return!this.positiveArea(i[r],i[r+1],i[a],i[a+1],i[o],i[o+1])},e.positiveArea=function(t,e,i,n,r,a){return t*(a-n)+i*(e-a)+r*(n-e)>=0},e.winding=function(t,e,i,n,r,a){var o=i-t,s=n-e;return r*s-a*o+o*e-t*s>=0?1:-1},e}();t.Triangulator=e}(t.core||(t.core={}))}(n||(n={}));var n;!function(t){!function(t){var e=function(){function t(){this.array=new Array}return t.prototype.add=function(t){var e=this.contains(t);return this.array[0|t]=0|t,!e},t.prototype.contains=function(t){return void 0!=this.array[0|t]},t.prototype.remove=function(t){this.array[0|t]=void 0},t.prototype.clear=function(){this.array.length=0},t}();t.IntSet=e;var i=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.r=t,this.g=e,this.b=i,this.a=n}return t.prototype.set=function(t,e,i,n){return this.r=t,this.g=e,this.b=i,this.a=n,this.clamp(),this},t.prototype.setFromColor=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},t.prototype.setFromString=function(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=(8!=t.length?255:parseInt(t.substr(6,2),16))/255,this},t.prototype.add=function(t,e,i,n){return this.r+=t,this.g+=e,this.b+=i,this.a+=n,this.clamp(),this},t.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},t.rgba8888ToColor=function(t,e){t.r=((4278190080&e)>>>24)/255,t.g=((16711680&e)>>>16)/255,t.b=((65280&e)>>>8)/255,t.a=(255&e)/255},t.rgb888ToColor=function(t,e){t.r=((16711680&e)>>>16)/255,t.g=((65280&e)>>>8)/255,t.b=(255&e)/255},t.WHITE=new t(1,1,1,1),t.RED=new t(1,0,0,1),t.GREEN=new t(0,1,0,1),t.BLUE=new t(0,0,1,1),t.MAGENTA=new t(1,0,1,1),t}();t.Color=i;var n=function(){function t(){}return t.clamp=function(t,e,i){return t<e?e:t>i?i:t},t.cosDeg=function(e){return Math.cos(e*t.degRad)},t.sinDeg=function(e){return Math.sin(e*t.degRad)},t.signum=function(t){return t>0?1:t<0?-1:0},t.toInt=function(t){return t>0?Math.floor(t):Math.ceil(t)},t.cbrt=function(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e},t.randomTriangular=function(e,i){return t.randomTriangularWith(e,i,.5*(e+i))},t.randomTriangularWith=function(t,e,i){var n=Math.random(),r=e-t;return n<=(i-t)/r?t+Math.sqrt(n*r*(i-t)):e-Math.sqrt((1-n)*r*(e-i))},t.PI=3.1415927,t.PI2=2*t.PI,t.radiansToDegrees=180/t.PI,t.radDeg=t.radiansToDegrees,t.degreesToRadians=t.PI/180,t.degRad=t.degreesToRadians,t}();t.MathUtils=n;var a=function(){function t(){}return t.prototype.apply=function(t,e,i){return t+(e-t)*this.applyInternal(i)},t}();t.Interpolation=a;var o=function(t){function e(e){var i=t.call(this)||this;return i.power=2,i.power=e,i}return r(e,t),e.prototype.applyInternal=function(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1},e}(a);t.Pow=o;var s=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype.applyInternal=function(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1},e}(o);t.PowOut=s;var h=function(){function t(){}return t.arrayCopy=function(t,e,i,n,r){for(var a=e,o=n;a<e+r;a++,o++)i[o]=t[a]},t.setArraySize=function(t,e,i){void 0===i&&(i=0);var n=t.length;if(n==e)return t;if(t.length=e,n<e)for(var r=n;r<e;r++)t[r]=i;return t},t.ensureArrayCapacity=function(e,i,n){return void 0===n&&(n=0),e.length>=i?e:t.setArraySize(e,i,n)},t.newArray=function(t,e){for(var i=new Array(t),n=0;n<t;n++)i[n]=e;return i},t.newFloatArray=function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Float32Array(e);for(var i=new Array(e),n=0;n<i.length;n++)i[n]=0;return i},t.newShortArray=function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Int16Array(e);for(var i=new Array(e),n=0;n<i.length;n++)i[n]=0;return i},t.toFloatArray=function(e){return t.SUPPORTS_TYPED_ARRAYS?new Float32Array(e):e},t.toSinglePrecision=function(e){return t.SUPPORTS_TYPED_ARRAYS?Math.fround(e):e},t.webkit602BugfixHelper=function(t,e){},t.contains=function(t,e,i){void 0===i&&(i=!0);for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1},t.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,t}();t.Utils=h;var u=function(){function t(){}return t.logBones=function(t){for(var e=0;e<t.bones.length;e++){var i=t.bones[e],n=i.matrix;console.log(i.data.name+", "+n.a+", "+n.b+", "+n.c+", "+n.d+", "+n.tx+", "+n.ty)}},t}();t.DebugUtils=u;var l=function(){function t(t){this.items=new Array,this.instantiator=t}return t.prototype.obtain=function(){return this.items.length>0?this.items.pop():this.instantiator()},t.prototype.free=function(t){t.reset&&t.reset(),this.items.push(t)},t.prototype.freeAll=function(t){for(var e=0;e<t.length;e++)t[e].reset&&t[e].reset(),this.items[e]=t[e]},t.prototype.clear=function(){this.items.length=0},t}();t.Pool=l;var c=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.set=function(t,e){return this.x=t,this.y=e,this},t.prototype.length=function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},t.prototype.normalize=function(){var t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this},t}();t.Vector2=c;var f=function(){function t(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return t.prototype.update=function(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},t}();t.TimeKeeper=f;var d=function(){function t(t){void 0===t&&(t=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(t)}return t.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},t.prototype.addValue=function(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},t.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var t=0,e=0;e<this.values.length;e++)t+=this.values[e];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0},t}();t.WindowedMean=d}(t.core||(t.core={}))}(n||(n={}));var n;!function(t){!function(t){var e=function(){function t(t){if(null==t)throw new Error("name cannot be null.");this.name=t}return t}();t.Attachment=e;var i=function(e){function i(t){var n=e.call(this,t)||this;return n.id=(65535&i.nextID++)<<11,n.worldVerticesLength=0,n.deformAttachment=n,n}return r(i,e),i.prototype.computeWorldVerticesOld=function(t,e){this.computeWorldVertices(t,0,this.worldVerticesLength,e,0,2)},i.prototype.computeWorldVertices=function(t,e,i,n,r,a){i=r+(i>>1)*a;var o=t.bone.skeleton,s=t.deform,h=this.vertices,u=this.bones;if(null!=u){for(var l=0,c=0,f=0;f<e;f+=2){var d=u[l];l+=d+1,c+=d}var p=o.bones;if(0==s.length)for(var m=r,v=3*c;m<i;m+=a){var g=0,y=0,d=u[l++];for(d+=l;l<d;l++,v+=3){var _=p[u[l]].matrix,T=h[v],E=h[v+1],S=h[v+2];g+=(T*_.a+E*_.c+_.tx)*S,y+=(T*_.b+E*_.d+_.ty)*S}n[m]=g,n[m+1]=y}else for(var b=s,m=r,v=3*c,A=c<<1;m<i;m+=a){var g=0,y=0,d=u[l++];for(d+=l;l<d;l++,v+=3,A+=2){var _=p[u[l]].matrix,T=h[v]+b[A],E=h[v+1]+b[A+1],S=h[v+2];g+=(T*_.a+E*_.c+_.tx)*S,y+=(T*_.b+E*_.d+_.ty)*S}n[m]=g,n[m+1]=y}}else{s.length>0&&(h=s);for(var _=t.bone.matrix,I=_.tx,w=_.ty,x=_.a,v=_.c,P=_.b,M=_.d,O=e,m=r;m<i;O+=2,m+=a){var T=h[O],E=h[O+1];n[m]=T*x+E*v+I,n[m+1]=T*P+E*M+w}}},i.prototype.copyTo=function(e){null!=this.bones?(e.bones=new Array(this.bones.length),t.Utils.arrayCopy(this.bones,0,e.bones,0,this.bones.length)):e.bones=null,null!=this.vertices?(e.vertices=t.Utils.newFloatArray(this.vertices.length),t.Utils.arrayCopy(this.vertices,0,e.vertices,0,this.vertices.length)):e.vertices=null,e.worldVerticesLength=this.worldVerticesLength,e.deformAttachment=this.deformAttachment},i.nextID=0,i}(e);t.VertexAttachment=i}(t.core||(t.core={}))}(n||(n={}));var n;!function(t){!function(t){!function(t){t[t.Region=0]="Region",t[t.BoundingBox=1]="BoundingBox",t[t.Mesh=2]="Mesh",t[t.LinkedMesh=3]="LinkedMesh",t[t.Path=4]="Path",t[t.Point=5]="Point",t[t.Clipping=6]="Clipping"}(t.AttachmentType||(t.AttachmentType={}))}(t.core||(t.core={}))}(n||(n={}));var n;!function(t){!function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return n.color=new t.Color(1,1,1,1),n}return r(i,e),i.prototype.copy=function(){var t=new i(name);return this.copyTo(t),t.color.setFromColor(this.color),t},i}(t.VertexAttachment);t.BoundingBoxAttachment=e}(t.core||(t.core={}))}(n||(n={}));var n;!function(t){!function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return n.color=new t.Color(.2275,.2275,.8078,1),n}return r(i,e),i.prototype.copy=function(){var t=new i(name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t},i}(t.VertexAttachment);t.ClippingAttachment=e}(t.core||(t.core={}))}(n||(n={}));var n;!function(t){!function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return n.color=new t.Color(1,1,1,1),n.tempColor=new t.Color(0,0,0,0),n}return r(i,e),i.prototype.updateUVs=function(e,i){var n=this.regionUVs,r=n.length;if(i&&i.length==r||(i=t.Utils.newFloatArray(r)),null!=e){for(var a=e.texture,o=a._uvs,s=e.width,h=e.height,u=e.originalWidth,l=e.originalHeight,c=e.offsetX,f=e.pixiOffsetY,d=0;d<r;d+=2){var p=this.regionUVs[d],m=this.regionUVs[d+1];p=(p*u-c)/s,m=(m*l-f)/h,i[d]=(o.x0*(1-p)+o.x1*p)*(1-m)+(o.x3*(1-p)+o.x2*p)*m,i[d+1]=(o.y0*(1-p)+o.y1*p)*(1-m)+(o.y3*(1-p)+o.y2*p)*m}return i}},i.prototype.getParentMesh=function(){return this.parentMesh},i.prototype.setParentMesh=function(t){this.parentMesh=t,null!=t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)},i.prototype.copy=function(){if(null!=this.parentMesh)return this.newLinkedMesh();var e=new i(this.name);return e.region=this.region,e.path=this.path,e.color.setFromColor(this.color),this.copyTo(e),e.regionUVs=new Float32Array(this.regionUVs.length),t.Utils.arrayCopy(this.regionUVs,0,e.regionUVs,0,this.regionUVs.length),e.uvs=new Array(this.uvs.length),t.Utils.arrayCopy(this.uvs,0,e.uvs,0,this.uvs.length),e.triangles=new Array(this.triangles.length),t.Utils.arrayCopy(this.triangles,0,e.triangles,0,this.triangles.length),e.hullLength=this.hullLength,null!=this.edges&&(e.edges=new Array(this.edges.length),t.Utils.arrayCopy(this.edges,0,e.edges,0,this.edges.length)),e.width=this.width,e.height=this.height,e},i.prototype.newLinkedMesh=function(){var t=new i(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),t.deformAttachment=this.deformAttachment,t.setParentMesh(null!=this.parentMesh?this.parentMesh:this),t},i}(t.VertexAttachment);t.MeshAttachment=e}(t.core||(t.core={}))}(n||(n={}));var n;!function(t){!function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return n.closed=!1,n.constantSpeed=!1,n.color=new t.Color(1,1,1,1),n}return r(i,e),i.prototype.copy=function(){var e=new i(name);return this.copyTo(e),e.lengths=new Array(this.lengths.length),t.Utils.arrayCopy(this.lengths,0,e.lengths,0,this.lengths.length),e.closed=closed,e.constantSpeed=this.constantSpeed,e.color.setFromColor(this.color),e},i}(t.VertexAttachment);t.PathAttachment=e}(t.core||(t.core={}))}(n||(n={}));var n;!function(t){!function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return n.color=new t.Color(.38,.94,0,1),n}return r(i,e),i.prototype.computeWorldPosition=function(t,e){var i=t.matrix;return e.x=this.x*i.a+this.y*i.c+t.worldX,e.y=this.x*i.b+this.y*i.d+t.worldY,e},i.prototype.computeWorldRotation=function(e){var i=e.matrix,n=t.MathUtils.cosDeg(this.rotation),r=t.MathUtils.sinDeg(this.rotation),a=n*i.a+r*i.c,o=n*i.b+r*i.d;return Math.atan2(o,a)*t.MathUtils.radDeg},i.prototype.copy=function(){var t=new i(name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t},i}(t.VertexAttachment);t.PointAttachment=e}(t.core||(t.core={}))}(n||(n={}));var n;!function(t){!function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return n.x=0,n.y=0,n.scaleX=1,n.scaleY=1,n.rotation=0,n.width=0,n.height=0,n.color=new t.Color(1,1,1,1),n.offset=t.Utils.newFloatArray(8),n.uvs=t.Utils.newFloatArray(8),n.tempColor=new t.Color(1,1,1,1),n}return r(i,e),i.prototype.updateOffset=function(){var t=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,n=-this.width/2*this.scaleX+this.region.offsetX*t,r=-this.height/2*this.scaleY+this.region.offsetY*e,a=n+this.region.width*t,o=r+this.region.height*e,s=this.rotation*Math.PI/180,h=Math.cos(s),u=Math.sin(s),l=n*h+this.x,c=n*u,f=r*h+this.y,d=r*u,p=a*h+this.x,m=a*u,v=o*h+this.y,g=o*u,y=this.offset;y[i.OX1]=l-d,y[i.OY1]=f+c,y[i.OX2]=l-g,y[i.OY2]=v+c,y[i.OX3]=p-g,y[i.OY3]=v+m,y[i.OX4]=p-d,y[i.OY4]=f+m},i.prototype.setRegion=function(t){this.region=t;var e=this.uvs;t.rotate?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)},i.prototype.computeWorldVertices=function(t,e,n,r){var a=this.offset,o=t.matrix,s=o.tx,h=o.ty,u=o.a,l=o.c,c=o.b,f=o.d,d=0,p=0;d=a[i.OX1],p=a[i.OY1],e[n]=d*u+p*l+s,e[n+1]=d*c+p*f+h,n+=r,d=a[i.OX2],p=a[i.OY2],e[n]=d*u+p*l+s,e[n+1]=d*c+p*f+h,n+=r,d=a[i.OX3],p=a[i.OY3],e[n]=d*u+p*l+s,e[n+1]=d*c+p*f+h,n+=r,d=a[i.OX4],p=a[i.OY4],e[n]=d*u+p*l+s,e[n+1]=d*c+p*f+h},i.prototype.copy=function(){var e=new i(name);return e.region=this.region,e.rendererObject=this.rendererObject,e.path=this.path,e.x=this.x,e.y=this.y,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.rotation=this.rotation,e.width=this.width,e.height=this.height,t.Utils.arrayCopy(this.uvs,0,e.uvs,0,8),t.Utils.arrayCopy(this.offset,0,e.offset,0,8),e.color.setFromColor(this.color),e},i.OX1=0,i.OY1=1,i.OX2=2,i.OY2=3,i.OX3=4,i.OY3=5,i.OX4=6,i.OY4=7,i.X1=0,i.Y1=1,i.C1R=2,i.C1G=3,i.C1B=4,i.C1A=5,i.U1=6,i.V1=7,i.X2=8,i.Y2=9,i.C2R=10,i.C2G=11,i.C2B=12,i.C2A=13,i.U2=14,i.V2=15,i.X3=16,i.Y3=17,i.C3R=18,i.C3G=19,i.C3B=20,i.C3A=21,i.U3=22,i.V3=23,i.X4=24,i.Y4=25,i.C4R=26,i.C4G=27,i.C4B=28,i.C4A=29,i.U4=30,i.V4=31,i}(t.Attachment);t.RegionAttachment=e}(t.core||(t.core={}))}(n||(n={}));var n;!function(t){!function(t){var e=function(){function e(t,e){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=e}return e.prototype.begin=function(t){},e.prototype.transform=function(e,i,n,r){e.x+=t.MathUtils.randomTriangular(-this.jitterX,this.jitterY),e.y+=t.MathUtils.randomTriangular(-this.jitterX,this.jitterY)},e.prototype.end=function(){},e}();t.JitterEffect=e}(t.core||(t.core={}))}(n||(n={}));var n;!function(t){!function(t){var e=function(){function e(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}return e.prototype.begin=function(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY},e.prototype.transform=function(i,n,r,a){var o=this.angle*t.MathUtils.degreesToRadians,s=i.x-this.worldX,h=i.y-this.worldY,u=Math.sqrt(s*s+h*h);if(u<this.radius){var l=e.interpolation.apply(0,o,(this.radius-u)/this.radius),c=Math.cos(l),f=Math.sin(l);i.x=c*s-f*h+this.worldX,i.y=f*s+c*h+this.worldY}},e.prototype.end=function(){},e.interpolation=new t.PowOut(2),e}();t.SwirlEffect=e}(t.core||(t.core={}))}(n||(n={})),function(){Math.fround||(Math.fround=Math.fround=function(t){return function(e){return t[0]=e,t[0]}}(new Float32Array(1)))}();var n;!function(t){function e(){var t=this.parent.worldTransform,e=this.worldTransform,i=this.localTransform;e.a=i.a*t.a+i.b*t.c,e.b=i.a*t.b+i.b*t.d,e.c=i.c*t.a+i.d*t.c,e.d=i.c*t.b+i.d*t.d,e.tx=i.tx*t.a+i.ty*t.c+t.tx,e.ty=i.tx*t.b+i.ty*t.d+t.ty,this.worldAlpha=this.alpha*this.parent.worldAlpha,this._currentBounds=null}t.core.Bone.yDown=!0;var i=[0,0,0],n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.region=null,e}return r(e,t),e}(PIXI.Sprite);t.SpineSprite=n;var a=function(t){function e(e,i,n,r,a){return t.call(this,e,i,n,r,a)||this}return r(e,t),e}(PIXI.mesh.Mesh);t.SpineMesh=a;var o=function(o){function s(e){var i=o.call(this)||this;if(!e)throw new Error("The spineData param is required.");if("string"==typeof e)throw new Error('spineData param cant be string. Please use spine.Spine.fromAtlas("YOUR_RESOURCE_NAME") from now on.');i.spineData=e,i.skeleton=new t.core.Skeleton(e),i.skeleton.updateWorldTransform(),i.stateData=new t.core.AnimationStateData(e),i.state=new t.core.AnimationState(i.stateData),i.slotContainers=[],i.tempClipContainers=[];for(var n=0,r=i.skeleton.slots.length;n<r;n++){var a=i.skeleton.slots[n],s=a.getAttachment(),h=i.newContainer();if(i.slotContainers.push(h),i.addChild(h),i.tempClipContainers.push(null),s instanceof t.core.RegionAttachment){var u=s.region.name,l=i.createSprite(a,s,u);a.currentSprite=l,a.currentSpriteName=u,h.addChild(l)}else if(s instanceof t.core.MeshAttachment){var c=i.createMesh(a,s);a.currentMesh=c,a.currentMeshName=s.name,h.addChild(c)}else{if(!(s instanceof t.core.ClippingAttachment))continue;i.createGraphics(a,s),h.addChild(a.clippingContainer),h.addChild(a.currentGraphics)}}return i.autoUpdate=!0,i.tintRgb=new Float32Array([1,1,1]),i}return r(s,o),Object.defineProperty(s.prototype,"autoUpdate",{get:function(){return this.updateTransform===s.prototype.autoUpdateTransform},set:function(t){this.updateTransform=t?s.prototype.autoUpdateTransform:PIXI.Container.prototype.updateTransform},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"tint",{get:function(){return PIXI.utils.rgb2hex(this.tintRgb)},set:function(t){this.tintRgb=PIXI.utils.hex2rgb(t,this.tintRgb)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"delayLimit",{get:function(){return(void 0!==this.localDelayLimit?this.localDelayLimit:s.globalDelayLimit)||Number.MAX_VALUE},enumerable:!0,configurable:!0}),s.prototype.update=function(n){var r=this.delayLimit;if(n>r&&(n=r),this.state.update(n),this.state.apply(this.skeleton),this.skeleton){this.skeleton.updateWorldTransform();var a=this.skeleton.slots,o=this.color,s=null,h=null;o?(s=o.light,h=o.dark):s=this.tintRgb;for(var u=PIXI.TransformBase&&1==this.transformHack(),l=0,c=a.length;l<c;l++){var f=a[l],d=f.getAttachment(),p=this.slotContainers[l];if(d){var m=null,v=d.color;if(d instanceof t.core.RegionAttachment){var g=d.region;if(g){f.currentMesh&&(f.currentMesh.visible=!1,f.currentMesh=null,f.currentMeshName=void 0);var y=g;if(!f.currentSpriteName||f.currentSpriteName!==y.name){var _=y.name;if(f.currentSprite&&(f.currentSprite.visible=!1),f.sprites=f.sprites||{},void 0!==f.sprites[_])f.sprites[_].visible=!0;else{var T=this.createSprite(f,d,_);p.addChild(T)}f.currentSprite=f.sprites[_],f.currentSpriteName=_}}if(p.transform){var E=p.transform,S=E,b=null;S.matrix2d?(b=S.matrix2d,S._dirtyVersion++,S.version=S._dirtyVersion,S.isStatic=!0,S.operMode=0):u?(S.position&&(E=new PIXI.TransformBase,E._parentID=-1,E._worldID=p.transform._worldID,p.transform=E),b=E.localTransform):S.setFromMatrix(f.bone.matrix),b&&f.bone.matrix.copy(b)}else{var b=p.localTransform||new PIXI.Matrix;f.bone.matrix.copy(b),p.localTransform=b,p.displayObjectUpdateTransform=e}f.currentSprite.color?m=f.currentSprite.color:(i[0]=s[0]*f.color.r*v.r,i[1]=s[1]*f.color.g*v.g,i[2]=s[2]*f.color.b*v.b,f.currentSprite.tint=PIXI.utils.rgb2hex(i)),f.currentSprite.blendMode=f.blendMode}else if(d instanceof t.core.MeshAttachment){if(f.currentSprite)if(f.currentSprite.visible=!1,f.currentSprite=null,f.currentSpriteName=void 0,p.transform){var E=new PIXI.TransformStatic;E._parentID=-1,E._worldID=p.transform._worldID,p.transform=E}else p.localTransform=new PIXI.Matrix,p.displayObjectUpdateTransform=PIXI.DisplayObject.prototype.updateTransform;if(!f.currentMeshName||f.currentMeshName!==d.name){var A=d.name;if(f.currentMesh&&(f.currentMesh.visible=!1),f.meshes=f.meshes||{},void 0!==f.meshes[A])f.meshes[A].visible=!0;else{var I=this.createMesh(f,d);p.addChild(I)}f.currentMesh=f.meshes[A],f.currentMeshName=A}if(d.computeWorldVerticesOld(f,f.currentMesh.vertices),f.currentMesh.color)m=f.currentMesh.color;else if("3"!==PIXI.VERSION[0]){var w=f.currentMesh.tintRgb;w[0]=s[0]*f.color.r*v.r,w[1]=s[1]*f.color.g*v.g,w[2]=s[2]*f.color.b*v.b}f.currentMesh.blendMode=f.blendMode}else{if(!(d instanceof t.core.ClippingAttachment)){p.visible=!1;continue}f.currentGraphics||(this.createGraphics(f,d),p.addChild(f.clippingContainer),p.addChild(f.currentGraphics)),this.updateGraphics(f,d)}if(p.visible=!0,m){var x=f.color.r*v.r,P=f.color.g*v.g,M=f.color.b*v.b;m.setLight(s[0]*x+h[0]*(1-x),s[1]*P+h[1]*(1-P),s[2]*M+h[2]*(1-M)),f.darkColor?(x=f.darkColor.r,P=f.darkColor.g,M=f.darkColor.b):(x=0,P=0,M=0),m.setDark(s[0]*x+h[0]*(1-x),s[1]*P+h[1]*(1-P),s[2]*M+h[2]*(1-M))}p.alpha=f.color.a}else p.visible=!1}for(var O=this.skeleton.drawOrder,C=null,R=null,l=0,c=O.length;l<c;l++){var f=a[O[l].data.index],p=this.slotContainers[O[l].data.index];if(R||null!==p.parent&&p.parent!==this&&(p.parent.removeChild(p),p.parent=this),f.currentGraphics&&f.getAttachment())R=f.clippingContainer,C=f.getAttachment(),R.children.length=0,this.children[l]=p,C.endSlot==f.data&&(C.endSlot=null);else if(R){var k=this.tempClipContainers[l];k||(k=this.tempClipContainers[l]=this.newContainer(),k.visible=!1),this.children[l]=k,p.parent=null,R.addChild(p),C.endSlot==f.data&&(R.renderable=!0,R=null,C=null)}else this.children[l]=p}}},s.prototype.setSpriteRegion=function(t,e,i){e.region=i,e.texture=i.texture,i.size?(e.scale.x=i.size.width/i.originalWidth,e.scale.y=-i.size.height/i.originalHeight):(e.scale.x=t.scaleX*t.width/i.originalWidth,e.scale.y=-t.scaleY*t.height/i.originalHeight)},s.prototype.setMeshRegion=function(t,e,i){e.region=i,e.texture=i.texture,i.texture._updateUvs(),t.updateUVs(i,e.uvs),e.dirty++},s.prototype.autoUpdateTransform=function(){if(s.globalAutoUpdate){this.lastTime=this.lastTime||Date.now();var t=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.update(t)}else this.lastTime=0;PIXI.Container.prototype.updateTransform.call(this)},s.prototype.createSprite=function(e,i,n){var r=i.region;e.tempAttachment===i&&(r=e.tempRegion,e.tempAttachment=null,e.tempRegion=null);var a=r.texture,o=this.newSprite(a);return o.rotation=i.rotation*t.core.MathUtils.degRad,o.anchor.x=.5,o.anchor.y=.5,o.position.x=i.x,o.position.y=i.y,o.alpha=i.color.a,o.region=i.region,this.setSpriteRegion(i,o,i.region),e.sprites=e.sprites||{},e.sprites[n]=o,o},s.prototype.createMesh=function(t,e){var i=e.region;t.tempAttachment===e&&(i=t.tempRegion,t.tempAttachment=null,t.tempRegion=null);var n=this.newMesh(i.texture,new Float32Array(e.regionUVs.length),new Float32Array(e.regionUVs.length),new Uint16Array(e.triangles),PIXI.mesh.Mesh.DRAW_MODES.TRIANGLES);return n.canvasPadding=1.5,n.alpha=e.color.a,n.region=e.region,this.setMeshRegion(e,n,i),t.meshes=t.meshes||{},t.meshes[e.name]=n,n},s.prototype.createGraphics=function(t,e){var i=this.newGraphics(),n=new PIXI.Polygon([]);return i.clear(),i.beginFill(16777215,1),i.drawPolygon(n),i.renderable=!1,t.currentGraphics=i,t.clippingContainer=this.newContainer(),t.clippingContainer.mask=t.currentGraphics,i},s.prototype.updateGraphics=function(t,e){var i=t.currentGraphics.graphicsData[0].shape.points,n=e.worldVerticesLength;i.length=n,e.computeWorldVertices(t,0,n,i,0,2),t.currentGraphics.dirty++,t.currentGraphics.clearDirty++},s.prototype.hackTextureBySlotIndex=function(e,i,n){void 0===i&&(i=null),void 0===n&&(n=null);var r=this.skeleton.slots[e];if(!r)return!1;var a=r.getAttachment(),o=a.region;return i&&(o=new t.core.TextureRegion,o.texture=i,o.size=n),r.currentSprite&&r.currentSprite.region!=o?(this.setSpriteRegion(a,r.currentSprite,o),r.currentSprite.region=o):r.currentMesh&&r.currentMesh.region!=o?this.setMeshRegion(a,r.currentMesh,o):(r.tempRegion=o,r.tempAttachment=a),!0},s.prototype.hackTextureBySlotName=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);var n=this.skeleton.findSlotIndex(t);return-1!=n&&this.hackTextureBySlotIndex(n,e,i)},s.prototype.newContainer=function(){return new PIXI.Container},s.prototype.newSprite=function(t){return new n(t)},s.prototype.newGraphics=function(){return new PIXI.Graphics},s.prototype.newMesh=function(t,e,i,n,r){return new a(t,e,i,n,r)},s.prototype.transformHack=function(){return 1},s.prototype.hackAttachmentGroups=function(t,e,i){if(t){for(var n=[],r=[],a=0,o=this.skeleton.slots.length;a<o;a++){var s=this.skeleton.slots[a],h=s.currentSpriteName||s.currentMeshName||"",u=s.currentSprite||s.currentMesh;h.endsWith(t)?(u.parentGroup=e,r.push(u)):i&&u&&(u.parentGroup=i,n.push(u))}return[n,r]}},s.prototype.destroy=function(t){for(var e=0,i=this.skeleton.slots.length;e<i;e++){var n=this.skeleton.slots[e];for(var r in n.meshes)n.meshes[r].destroy(t);n.meshes=null;for(var a in n.sprites)n.sprites[a].destroy(t);n.sprites=null}for(var e=0,i=this.slotContainers.length;e<i;e++)this.slotContainers[e].destroy(t);this.spineData=null,this.skeleton=null,this.slotContainers=null,this.stateData=null,this.state=null,this.tempClipContainers=null,o.prototype.destroy.call(this,t)},s.globalAutoUpdate=!0,s.globalDelayLimit=0,s.clippingPolygon=[],s}(PIXI.Container);t.Spine=o}(n||(n={}));var n;!function(t){PIXI.spine=t;var e=PIXI.Texture.prototype;e._updateUvs||(e._updateUvs=e.updateUvs)}(n||(n={}));var n;!function(t){function e(t){return t.type==PIXI.loaders.Resource.TYPE.JSON}function i(t){return t.xhrType==PIXI.loaders.Resource.XHR_RESPONSE_TYPE.BUFFER}function n(){return function(n,a){var o=this;if(!n.data)return a();var s=e(n)&&n.data.bones,h=i(n)&&("skel"===n.extension||n.metadata.spineMetadata);if(!s&&!h)return a();var u=null,l=n.data;s?u=new t.core.SkeletonJson(null):(u=new t.core.SkeletonBinary(null),n.data instanceof ArrayBuffer&&(l=new Uint8Array(n.data)));var c=n.metadata||{},f=c?n.metadata.spineSkeletonScale:null;f&&(u.scale=f);var d=c?n.metadata.spineAtlas:null;if(!1===d)return a();if(d&&d.pages)return u.attachmentLoader=new t.core.AtlasAttachmentLoader(d),n.spineData=u.readSkeletonData(l),n.spineAtlas=d,a();var p=c.spineAtlasSuffix||".atlas",m=n.url,v=m.indexOf("?");v>0&&(m=m.substr(0,v)),m=m.substr(0,m.lastIndexOf("."))+p,n.metadata&&n.metadata.spineAtlasFile&&(m=n.metadata.spineAtlasFile),m=m.replace(this.baseUrl,"");var g={crossOrigin:n.crossOrigin,xhrType:PIXI.loaders.Resource.XHR_RESPONSE_TYPE.TEXT,metadata:c.spineMetadata||null,parentResource:n,loadType:PIXI.loaders.Resource.LOAD_TYPE.XHR},y={crossOrigin:n.crossOrigin,metadata:c.imageMetadata||null,parentResource:n,loadType:PIXI.loaders.Resource.LOAD_TYPE.IMAGE},_=n.name.replace(/_/g,"/"),T="data/"+_.split("/")[0];m=Utils.OMSGetData(_+".atlas"),Resource.GetAssetUrl(m,"blob").then(function(e){e instanceof Blob&&(e=Resource.CreateObjectURL(e));var i=r(o,n.name+"_atlas_page_",T,y),s=function(e){new t.core.TextureAtlas(e,i,function(e){e&&(u.attachmentLoader=new t.core.AtlasAttachmentLoader(e),n.spineData=u.readSkeletonData(l),n.spineAtlas=e),a()})};n.metadata&&n.metadata.atlasRawData?s(n.metadata.atlasRawData):o.add(n.name+"_atlas",e,g,function(t){t.error?a():s(t.data)})})}}function r(t,e,i,n){return i&&i.lastIndexOf("/")!==i.length-1&&(i+="/"),function(r,a){var o=e+r,s=i+r,h=t.resources[o];if(h){var u=function(){a(h.texture.baseTexture)};h.texture?u():h.onAfterMiddleware.add(u)}else Resource.GetAssetUrl(s,"blob").then(function(e){e instanceof Blob&&(e=Resource.CreateObjectURL(e)),t.add(o,e,n,function(t){a(t.error?null:t.texture.baseTexture)})})}}function a(t,e){return t&&t.lastIndexOf("/")!==t.length-1&&(t+="/"),function(t,i){i(PIXI.BaseTexture.fromImage(t,e))}}function o(t){return function(e,i){var n=t[e]||t.default;i(n&&n.baseTexture?n.baseTexture:n)}}if(PIXI.loaders.Resource.setExtensionXhrType("skel",PIXI.loaders.Resource.XHR_RESPONSE_TYPE.BUFFER),t.atlasParser=n,t.imageLoaderAdapter=r,t.syncImageLoaderAdapter=a,t.staticImageLoader=o,PIXI.loaders.Loader&&(PIXI.loaders.Loader.addPixiMiddleware(n),PIXI.loader.use(n()),GameConfig.isUseNewLoader)){var s=!0,h=!1,u=void 0;try{for(var l,c=GameConfig.newLoaderArr[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){l.value.use(n())}}catch(t){h=!0,u=t}finally{try{!s&&c.return&&c.return()}finally{if(h)throw u}}}}(n||(n={}))},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(){n(this,t),this.NAME_REGEXP=/^([s{0}a-zA-z])([a-zA-Z ]{0,19})$/,this.EMAIL_REGEXP=/^([a-zA-Z0-9_.+-]{2,})\@([a-zA-Z0-9]{2,})(((\.)([a-zA-Z]{2,})){1,2})$/,this.PHONE_REGEXP=/^([0-9]{10,11})$/,this.BIRTHDAY_REGEXP=/^(([0-9]{1,2})(\/)([0-9]{1,2})(\/)([0-9]{4,4}))$/;var e=0;this.STATE={},this.STATE.INACTIVE=e++,this.STATE.INIT=e++,this.STATE.INPUT_INFOR=e++,this.STATE.POPUP_NAME_INVALID=e++,this.STATE.POPUP_EMAIL_INVALID=e++,this.STATE.POPUP_TERM=e++,this.STATE.SUBMIT_DATA=e++,this.STATE.SUBMIT_FINISH=e++,this.STATE.EXIT=e++,this.mFormDiv,this.mFormButtonExit,this.mFormPopupInput,this.mDivTitle,this.mFormTextTitle,this.mDivName,this.mFormInputName,this.mFormIconCheckName,this.mDivEmail,this.mFormInputEmail,this.mFormIconCheckEmail,this.mDivConfirm,this.mFormCheckBoxConfirm,this.mFormTextConfirm,this.mDivTerm,this.mFormCheckBoxTerm,this.mFormTextTerm,this.mFormTermLink,this.mFormButtonSubmit,this.mPopupInvalid,this.mPopupInvalidText,this.mPopupInvalidButton,this.mPopupTerm,this.mPopupTermTextDiv,this.mPopupTermText,this.mPopupTermButton,this.mIsFirstInit=!0,this.mState,this.mIsNameValid,this.mIsEmailValid,this.mIsSubmitValid,this.mIsClickButtonExit,this.mIsClickButtonSubmit,this.mIsClickIconCheckName,this.mIsClickIconCheckEmail,this.mIsClickTermLink,this.mIsClickButtonTermOk,this.mIsClickPopupButtonOk}return r(t,[{key:"Init",value:function(){this._SetState(this.STATE.INIT)}},{key:"_SetState",value:function(t){var e=this;switch(this.mState=t,this.mState){case this.STATE.INACTIVE:break;case this.STATE.INIT:if(this.mIsFirstInit){if(this.mFormDiv=document.createElement("div"),this.mFormDiv.setAttribute("id","form_div"),this.mFormButtonExit=document.createElement("img"),this.mFormButtonExit.setAttribute("id","form_button_exit"),this.mFormButtonExit.addEventListener("click",function(){switch(e.mState){case e.STATE.INPUT_INFOR:e.mIsClickButtonExit=!0}}),this.mFormPopupInput=document.createElement("div"),this.mFormPopupInput.setAttribute("id","form_popup_input"),this.mFormPopupInput.classList.add("transformXY"),this.mDivTitle=document.createElement("div"),this.mFormTextTitle=document.createElement("p"),this.mFormTextTitle.setAttribute("id","form_text_title"),this.mFormTextTitle.innerHTML=GLText.GetText(42),this.mDivName=document.createElement("div"),this.mFormInputName=document.createElement("input"),this.mFormInputName.setAttribute("placeholder",GLText.GetText(34)),this.mFormInputName.classList.add("form_input"),this.mFormIconCheckName=document.createElement("img"),this.mFormIconCheckName.classList.add("form_icon_check"),this.mFormIconCheckName.addEventListener("click",function(){switch(e.mState){case e.STATE.INPUT_INFOR:e.mIsClickIconCheckName=!0}}),this.mDivEmail=document.createElement("div"),this.mFormInputEmail=document.createElement("input"),this.mFormInputEmail.setAttribute("placeholder",GLText.GetText(35)),this.mFormInputEmail.classList.add("form_input"),this.mFormIconCheckEmail=document.createElement("img"),this.mFormIconCheckEmail.classList.add("form_icon_check"),this.mFormIconCheckEmail.addEventListener("click",function(){switch(e.mState){case e.STATE.INPUT_INFOR:e.mIsClickIconCheckEmail=!0}}),this.mDivConfirm=document.createElement("div"),this.mFormTextConfirm=document.createElement("p"),this.mFormTextConfirm.setAttribute("id","form_text_confirm"),this.mFormTextConfirm.innerHTML=GLText.GetText(43),this.mFormTextConfirm.getElementsByTagName("span").length>0){this.mFormTextConfirm.getElementsByTagName("span")[0].style.color="#FEB92E"}this.mFormCheckBoxConfirm=document.createElement("img"),this.mFormCheckBoxConfirm.classList.add("check_box"),this.mFormCheckBoxConfirm.classList.add("check_box_uncheck"),this.mFormCheckBoxConfirm.addEventListener("click",function(){switch(e.mState){case e.STATE.INPUT_INFOR:e.mFormCheckBoxConfirm.classList.contains("check_box_check")?(e.mFormCheckBoxConfirm.classList.remove("check_box_check"),e.mFormCheckBoxConfirm.classList.add("check_box_uncheck")):(e.mFormCheckBoxConfirm.classList.add("check_box_check"),e.mFormCheckBoxConfirm.classList.remove("check_box_uncheck"))}}),this.mDivTerm=document.createElement("div"),this.mFormTextTerm=document.createElement("p"),this.mFormTextTerm.setAttribute("id","form_text_term"),this.mFormTextTerm.innerHTML=GLText.GetText(44),this.mFormCheckBoxTerm=document.createElement("img"),this.mFormCheckBoxTerm.classList.add("check_box"),this.mFormCheckBoxTerm.classList.add("check_box_uncheck"),this.mFormCheckBoxTerm.addEventListener("click",function(){switch(e.mState){case e.STATE.INPUT_INFOR:e.mFormCheckBoxTerm.classList.contains("check_box_check")?(e.mFormCheckBoxTerm.classList.remove("check_box_check"),e.mFormCheckBoxTerm.classList.add("check_box_uncheck")):(e.mFormCheckBoxTerm.classList.add("check_box_check"),e.mFormCheckBoxTerm.classList.remove("check_box_uncheck"))}}),this.mFormTextTerm.getElementsByTagName("span").length>0&&(this.mFormTermLink=this.mFormTextTerm.getElementsByTagName("span")[0],this.mFormTermLink.setAttribute("id","form_term_link"),this.mFormTermLink.addEventListener("click",function(){switch(e.mState){case e.STATE.INPUT_INFOR:e.mIsClickTermLink=!0}})),this.mFormButtonSubmit=document.createElement("div"),this.mFormButtonSubmit.setAttribute("id","form_button_submit"),this.mFormButtonSubmit.classList.add("form_button_submit_invalid"),this.mFormButtonSubmit.innerHTML=GLText.GetText(31),this.mFormButtonSubmit.addEventListener("click",function(){switch(e.mState){case e.STATE.INPUT_INFOR:e.mIsClickButtonSubmit=!0}}),this.mPopupInvalid=document.createElement("div"),this.mPopupInvalid.setAttribute("id","popup_invalid"),this.mPopupInvalid.classList.add("transformXY"),this.mPopupInvalidText=document.createElement("p"),this.mPopupInvalidText.setAttribute("id","popup_invalid_text"),this.mPopupInvalidButton=document.createElement("div"),this.mPopupInvalidButton.setAttribute("id","popup_invalid_button"),this.mPopupInvalidButton.innerHTML=GLText.GetText(33),this.mPopupInvalidButton.addEventListener("click",function(){switch(e.mState){case e.STATE.POPUP_NAME_INVALID:case e.STATE.POPUP_EMAIL_INVALID:e.mIsClickPopupButtonOk=!0}}),this.mPopupTerm=document.createElement("div"),this.mPopupTerm.setAttribute("id","popup_term"),this.mPopupTerm.classList.add("transformXY"),this.mPopupTermTextDiv=document.createElement("div"),this.mPopupTermTextDiv.setAttribute("id","popup_term_text_div"),this.mPopupTermText=document.createElement("div"),this.mPopupTermText.setAttribute("id","popup_term_text"),this.mPopupTermText.innerHTML=GLText.GetText(45)+GLText.GetText(46)+GLText.GetText(47)+GLText.GetText(48)+GLText.GetText(49)+GLText.GetText(50)+GLText.GetText(51)+GLText.GetText(52),this.mPopupTermButton=document.createElement("div"),this.mPopupTermButton.setAttribute("id","popup_term_button"),this.mPopupTermButton.innerHTML=GLText.GetText(33),this.mPopupTermButton.addEventListener("click",function(){switch(e.mState){case e.STATE.POPUP_TERM:e.mIsClickButtonTermOk=!0}}),document.body.appendChild(this.mFormDiv),this.mFormDiv.appendChild(this.mFormButtonExit),this.mFormDiv.appendChild(this.mFormPopupInput),this.mFormPopupInput.appendChild(this.mDivTitle),this.mDivTitle.appendChild(this.mFormTextTitle),this.mFormPopupInput.appendChild(this.mDivName),this.mDivName.appendChild(this.mFormInputName),this.mDivName.appendChild(this.mFormIconCheckName),this.mFormPopupInput.appendChild(this.mDivEmail),this.mDivEmail.appendChild(this.mFormInputEmail),this.mDivEmail.appendChild(this.mFormIconCheckEmail),this.mFormPopupInput.appendChild(this.mDivConfirm),this.mDivConfirm.appendChild(this.mFormCheckBoxConfirm),this.mDivConfirm.appendChild(this.mFormTextConfirm),this.mFormPopupInput.appendChild(this.mDivTerm),this.mDivTerm.appendChild(this.mFormCheckBoxTerm),this.mDivTerm.appendChild(this.mFormTextTerm),this.mFormPopupInput.appendChild(this.mFormButtonSubmit),this.mFormDiv.appendChild(this.mPopupInvalid),this.mPopupInvalid.appendChild(this.mPopupInvalidText),this.mPopupInvalid.appendChild(this.mPopupInvalidButton),this.mFormDiv.appendChild(this.mPopupTerm),this.mPopupTerm.appendChild(this.mPopupTermTextDiv),this.mPopupTermTextDiv.appendChild(this.mPopupTermText),this.mPopupTerm.appendChild(this.mPopupTermButton)}this._SetDisplayElement(this.mFormDiv,!1),this.mIsFirstInit=!1;break;case this.STATE.INPUT_INFOR:this.mIsClickButtonExit=!1,this.mIsClickButtonSubmit=!1,this.mIsClickIconCheckName=!1,this.mIsClickIconCheckEmail=!1,this.mIsClickTermLink=!1,this._SetDisplayElement(this.mFormDiv,!0),this._SetDisplayElement(this.mFormButtonExit,!0),this._SetDisplayElement(this.mFormPopupInput,!0),this._SetDisplayElement(this.mPopupInvalid,!1),this._SetDisplayElement(this.mPopupTerm,!1);break;case this.STATE.POPUP_NAME_INVALID:console.log("this.STATE.POPUP_NAME_INVALID"),this._SetDisplayElement(this.mFormDiv,!0),this._SetDisplayElement(this.mFormButtonExit,!1),this._SetDisplayElement(this.mFormPopupInput,!1),this._SetDisplayElement(this.mPopupInvalid,!0),this._SetDisplayElement(this.mPopupTerm,!1),this.mIsClickPopupButtonOk=!1,this.mPopupInvalidText.innerHTML=GLText.GetText(36);break;case this.STATE.POPUP_EMAIL_INVALID:console.log("this.STATE.POPUP_EMAIL_INVALID"),this._SetDisplayElement(this.mFormDiv,!0),this._SetDisplayElement(this.mFormButtonExit,!1),this._SetDisplayElement(this.mFormPopupInput,!1),this._SetDisplayElement(this.mPopupInvalid,!0),this._SetDisplayElement(this.mPopupTerm,!1),this.mIsClickPopupButtonOk=!1,this.mPopupInvalidText.innerHTML=GLText.GetText(39);break;case this.STATE.POPUP_TERM:console.log("this.STATE.POPUP_TERM"),this._SetDisplayElement(this.mFormDiv,!0),this._SetDisplayElement(this.mFormButtonExit,!1),this._SetDisplayElement(this.mFormPopupInput,!1),this._SetDisplayElement(this.mPopupInvalid,!1),this._SetDisplayElement(this.mPopupTerm,!0),this.mIsClickButtonTermOk=!1;break;case this.STATE.SUBMIT_DATA:this._SetDisplayElement(this.mFormDiv,!0),this._SetDisplayElement(this.mFormButtonExit,!1),this._SetDisplayElement(this.mFormPopupInput,!1),this._SetDisplayElement(this.mPopupInvalid,!1),this._SetDisplayElement(this.mPopupTerm,!1),Resource.SaveForm(UserProfile.userid,{name:this.mFormInputName.value.trim(),email:this.mFormInputEmail.value.trim()}),GameDefine.gIsShowForm=!1;break;case this.STATE.SUBMIT_FINISH:case this.STATE.EXIT:this._SetDisplayElement(this.mFormDiv,!1)}}},{key:"Update",value:function(t){switch(this.mState){case this.STATE.INACTIVE:case this.STATE.INIT:break;case this.STATE.INPUT_INFOR:this._UpdateNameValid(),this._UpdateEmailValid(),this._UpdateButtonSubmit(),this.mIsClickButtonExit?this._SetState(this.STATE.EXIT):this.mIsClickButtonSubmit&&this.mIsSubmitValid?this._SetState(this.STATE.SUBMIT_DATA):this.mIsClickIconCheckName&&!this.mIsNameValid?this._SetState(this.STATE.POPUP_NAME_INVALID):this.mIsClickIconCheckEmail&&!this.mIsEmailValid?this._SetState(this.STATE.POPUP_EMAIL_INVALID):this.mIsClickTermLink&&this._SetState(this.STATE.POPUP_TERM),this.mIsClickButtonSubmit=!1,this.mIsClickIconCheckName=!1,this.mIsClickIconCheckEmail=!1;break;case this.STATE.POPUP_NAME_INVALID:case this.STATE.POPUP_EMAIL_INVALID:this.mIsClickPopupButtonOk&&this._SetState(this.STATE.INPUT_INFOR);break;case this.STATE.POPUP_TERM:this.mIsClickButtonTermOk&&this._SetState(this.STATE.INPUT_INFOR);break;case this.STATE.SUBMIT_DATA:this._SetState(this.STATE.SUBMIT_FINISH);break;case this.STATE.SUBMIT_FINISH:case this.STATE.EXIT:}}},{key:"Active",value:function(){this._SetState(this.STATE.INPUT_INFOR)}},{key:"IsExit",value:function(){return this.mState==this.STATE.EXIT}},{key:"IsFinish",value:function(){return this.mState==this.STATE.SUBMIT_FINISH}},{key:"_IsBadWord",value:function(t,e){for(var i=t.toLowerCase(),n=e.length,r=0;r<n;r++)if(i.indexOf(e[r])>=0)return!0;return!1}},{key:"_UpdateNameValid",value:function(){var t=this.mFormInputName.value.trim();this.mIsNameValid=this.NAME_REGEXP.test(t),this.mIsNameValid=this.mIsNameValid&&!this._IsBadWord(t,GameDefine.ARR_BAD_WORD),this._UpdateIconCheck(this.mFormIconCheckName,this.mIsNameValid||""==t,"form_icon_valid","form_icon_invalid")}},{key:"_UpdateEmailValid",value:function(){var t=this.mFormInputEmail.value.trim();this.mIsEmailValid=this.EMAIL_REGEXP.test(t),this._UpdateIconCheck(this.mFormIconCheckEmail,this.mIsEmailValid||""==t,"form_icon_valid","form_icon_invalid")}},{key:"_UpdateIconCheck",value:function(t,e,i,n){e?(t.classList.add(i),t.classList.remove(n)):(t.classList.remove(i),t.classList.add(n))}},{key:"_UpdateButtonSubmit",value:function(){this.mIsSubmitValid=this.mIsNameValid&&this.mIsEmailValid&&this.mFormCheckBoxConfirm.classList.contains("check_box_check")&&this.mFormCheckBoxTerm.classList.contains("check_box_check"),this.mIsSubmitValid?(this.mFormButtonSubmit.classList.add("form_button_submit_valid"),this.mFormButtonSubmit.classList.remove("form_button_submit_invalid")):(this.mFormButtonSubmit.classList.remove("form_button_submit_valid"),this.mFormButtonSubmit.classList.add("form_button_submit_invalid"))}},{key:"_SetDisplayElement",value:function(t){arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?t.classList.add("display_none"):t.classList.remove("display_none")}}]),t}();t.exports=a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=(i(17),i(14)),h=i(38),u=i(31),l=function(t){function e(){n(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.anim=null,t.hp=GameDefine2.BOSS_HP,t.state,t.STATE={IDLE:0,HIT:1,MOVE:2,SHOOT_PROJ:3,DIE:4,WAIT_TURN:5},t.nextPosX,t.nextPosy,t.tweenMgr=new h,t.actionTimer=new Timer,t.maxEffectDie=10,t.dieEffectArray=new Array,t.enemyCount,t}return a(e,t),o(e,[{key:"Init",value:function(){if(this.hp=GameDefine2.BOSS_HP,this.position.x=APP.GetWidth()/2,this.tweenMgr.RemoveAll(),null==this.anim){this.anim=GuiManager.GetGui(6).GetObject(7).Clone(),this.addChild(this.anim),GuiManager.GetGui(6).GetObject(7).visible=!1;for(var t=0;t<this.maxEffectDie;t++){var e=new s("3");this.dieEffectArray.push(e),this.addChild(e)}}else this.ResetKaboomEffect();this.anim.SetAnim(10,!0),this.SetState(this.STATE.IDLE),this.position.set(0,0),this.anim.position.set(APP.GetWidth()/2+50,200),this.StartMove()}},{key:"StartMove",value:function(){this.SetRandomPos(),this.SetState(this.STATE.WAIT_TURN),this.actionTimer.SetDuration(.5)}},{key:"SetState",value:function(t){var e=this;switch(this.state=t,this.state){case this.STATE.IDLE:case this.STATE.HIT:break;case this.STATE.WAIT_TURN:this.actionTimer.SetDuration(.5);Utils.RandInt(0,1);this.nextState=this.STATE.MOVE;break;case this.STATE.MOVE:this.tweenMgr.Create(this.anim,u.LINEAR_EASE,{x:this.anim.position.x},{x:this.nextPosX},1,0),this.tweenMgr.SetCallback(this.anim,function(){e.tweenMgr.Remove(e.anim),e.SetState(e.STATE.WAIT_TURN),e.SetRandomPos()});break;case this.STATE.SHOOT_PROJ:break;case this.STATE.DIE:this.anim.SetAnim(14,!1),AudioManager.Play(3),this.SetKaboomEffect()}}},{key:"SetKaboomEffect",value:function(){for(var t=0;t<this.dieEffectArray.length-1;t+=2){var e=this.anim.GetTransformRect(t);this.dieEffectArray[t].SetAnim(16,!0),this.dieEffectArray[t].visible=!0,this.dieEffectArray[t].position.set(e.x,e.y),e=this.anim.GetTransformRect(t+1),this.dieEffectArray[t+1].SetAnim(17,!0),this.dieEffectArray[t+1].visible=!0,this.dieEffectArray[t+1].position.set(e.x,e.y)}}},{key:"ResetKaboomEffect",value:function(){for(var t=0;t<this.dieEffectArray.length;t++)this.dieEffectArray[t].visible=!1}},{key:"SetRandomPos",value:function(){for(var t=Utils.Rand(this.anim.width/2+10,APP.GetWidth()-this.anim.width/2-10);Math.abs(t-this.anim.position.x)<50;)t=Utils.Rand(this.anim.width/2+10,APP.GetWidth()-this.anim.width/2-10);this.nextPosX=t}},{key:"Hit",value:function(t){this.hp-=t,UIManager.SetEnemyBar(Math.ceil(this.hp/GameDefine2.HP_PER_SEGMENT)),this.hp<=0&&this.state!=this.STATE.DIE&&(this.SetState(this.STATE.DIE),this.tweenMgr.RemoveAll(),StateIngame2.GameMgr.SetState(GameDefine2.GAME_MANAGER_STATE_END_GAME),StateIngame2.SetState(GameDefine2.GAME_STATE_NONE))}},{key:"Update",value:function(t){switch(this.anim.Update(t),this.tweenMgr&&this.tweenMgr.Update(t),this.state){case this.STATE.IDLE:case this.STATE.HIT:case this.STATE.MOVE:case this.STATE.SHOOT_PROJ:break;case this.STATE.DIE:for(var e=0;e<this.dieEffectArray.length;e++)this.dieEffectArray[e].Update(t);this.anim.isFinish&&14==this.anim.animId&&(this.SetState(this.STATE.IDLE),StateIngame2.EndGame());break;case this.STATE.WAIT_TURN:this.actionTimer.Update(t),this.actionTimer.JustFinished()&&this.SetState(this.nextState)}}}]),e}(PIXI.Container);t.exports=l},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=(i(17),i(14)),h=i(38),u=i(31),l=i(58),c=function(t){function e(){n(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.anim=null,t.isActive=!1,t.tweenMgr=new h,t.isFinishMove=!1,t.rect=null,t.attack,t}return a(e,t),o(e,[{key:"Init",value:function(){this.tweenMgr.RemoveAll(),this.attack=GameDefine2.BULLET_ATK,null==this.anim&&(this.anim=new s("3"),this.anim.SetAnim(9,!0),this.addChild(this.anim)),this.visible=!1,this.anim.scale.set(2,1),this.anim.position.set(APP.GetWidth(),APP.GetHeight())}},{key:"Update",value:function(t){this.isActive&&(this.anim.Update(t),this.tweenMgr.Update(t),this.CheckCollision(),this.isFinishMove&&this.SetActive(!1))}},{key:"SetActive",value:function(t,e,i){var n=this;if(this.isActive=t,this.visible=t,e){var r=EffectContainer.GetBoomObject();"boss"==i&&(r.SetAnim(2),l.AddEffect(GameDefine2.EFFECT_TYPE_BULLET_HIT,r,0,this.anim.position.x,this.anim.position.y-50))}t?(this.tweenMgr.Create(this.anim,u.LINEAR_EASE,{y:this.anim.position.y},{y:0-this.anim.height},GameDefine2.BULLET_LIFE_TIME,0),this.tweenMgr.SetCallback(this.anim,function(){n.tweenMgr.Remove(n.anim),n.isFinishMove=!0})):(this.isFinishMove=!1,this.tweenMgr.RemoveAll(),this.anim.position.set(APP.GetWidth(),APP.GetHeight()))}},{key:"CheckCollision",value:function(){this.rect=this.anim.GetTransformRect();for(var t=0;t<EnemyMgr.enemyPool.length;t++)EnemyMgr.enemyPool[t].isActive&&Utils.Collision2Rect(this.rect,EnemyMgr.enemyPool[t].anim.GetTransformRect())&&this.isActive&&(this.SetActive(!1,!0,"enemy"),EnemyMgr.enemyPool[t].Hit(this.attack));if(Utils.Collision2Rect(this.rect,BOSS.anim.GetTransformRect())&&this.isActive&&BOSS.state!=BOSS.STATE.DIE){this.SetActive(!1,!0,"boss");var e=EffectContainer.GetScoreObject();e.SetFrame(36),GameDefine2.PlayArrSound(GameDefine2.SOUND_BULLET_IMPACT),l.AddEffect(GameDefine2.EFFECT_TYPE_ADD_SCORE,e,0,BOSS.anim.position.x-BOSS.anim.width/4,BOSS.anim.position.y+BOSS.anim.height/4),BOSS.Hit(GameDefine2.TEMPLE_HP_DROP)}}}]),e}(PIXI.Container);t.exports=c},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=(i(17),i(14),i(265)),h=function(t){function e(){n(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.bulletPool=new Array,t.maxBullet=GameDefine2.BULLET_MAX,t}return a(e,t),o(e,[{key:"Init",value:function(){if(this.bulletPool.length<=0)this.CreatePool();else for(var t=0;t<this.bulletPool.length;t++)this.bulletPool[t].Init();this.playerParent=StateIngame2.GameMgr.player}},{key:"CreatePool",value:function(){for(var t=0;t<this.maxBullet;t++){var e=new s;e.Init(),this.bulletPool.push(e),this.addChild(e)}}},{key:"GetBullet",value:function(){for(var t=0;t<this.maxBullet;t++)if(!this.bulletPool[t].isActive)return this.bulletPool[t]}},{key:"Shoot",value:function(){var t=this.GetBullet();t&&(t.anim.position.set(player2.bulletEffect_1.x,player2.bulletEffect_1.y),t.SetActive(!0),(t=this.GetBullet())&&(t.anim.position.set(player2.bulletEffect_2.x,player2.bulletEffect_2.y),t.SetActive(!0)))}},{key:"Update",value:function(t){for(var e=0;e<this.bulletPool.length;e++)this.bulletPool[e].Update(t)}}]),e}(PIXI.Container);t.exports=h},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(17),h=i(14),u=i(58),l=function(t){function e(){n(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.containerScore=new PIXI.Container,t.containerBoom=new PIXI.Container,t.addChild(t.containerScore),t.addChild(t.containerBoom),t}return a(e,t),o(e,[{key:"Init",value:function(){this.score=0,this.boom=0,this.Reset()}},{key:"Reset",value:function(){for(var t=0;t<this.containerScore.children.length;++t)this.containerScore.children[t].alpha=0;for(var e=0;e<this.containerBoom.children.length;++e)this.containerBoom.children[e].alpha=0}},{key:"GetScore",value:function(){return this.score}},{key:"GetScoreObject",value:function(){for(var t=this.containerScore.children.length-1;t>0;--t)if(0==this.containerScore.children[t].alpha)return this.containerScore.children[t].alpha=.01,this.containerScore.children[t];var e=new s("3");return this.containerScore.addChild(e),e.position.set(-500,-500),e}},{key:"GetBoom",value:function(){return this.boom}},{key:"GetBoomObject",value:function(){for(var t=this.containerBoom.children.length-1;t>0;--t)if(0==this.containerBoom.children[t].alpha)return this.containerBoom.children[t].alpha=.01,this.containerBoom.children[t];var e=new h("3");return this.containerBoom.addChild(e),e.position.set(-500,-500),e}},{key:"AddScore",value:function(t,e,i){var n=this.GetScoreObject();switch(t){case GameDefine.SCORE_TYPE_NORMAL:this.SpawnWaterScore+=GameDefine.SCORE_ADD_NORMAL,this.score+=GameDefine.SCORE_ADD_NORMAL,n.SetFrame(GameDefine.SCORE_SPRITE_ADD_NORMAL);break;case GameDefine.SCORE_TYPE_X2:this.score+=GameDefine.SCORE_ADD_X2,n.SetFrame(GameDefine.SCORE_SPRITE_ADD_X2);break;case GameDefine.SCORE_TYPE_BOMB:this.score+=GameDefine.SCORE_SUB_BOMB,n.SetFrame(GameDefine.SCORE_SPRITE_SUB_BOMB);break;case GameDefine.SCORE_TYPE_SPECIAL:this.score+=GameDefine.SCORE_ADD_SPECIAL,n.SetFrame(GameDefine.SCORE_SPRITE_ADD_SPECIAL)}this.score=Math.min(GameDefine.SCORE_MAX,this.score),this.score=Math.max(0,this.score),u.AddEffect(GameDefine.EFFECT_TYPE_ADD_SCORE,n,0,e,i)}},{key:"Update",value:function(t){for(var e=0;e<this.containerBoom.children.length;e++)this.containerBoom.children[e].Update(t)}}]),e}(PIXI.Container);t.exports=new l},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=(i(17),i(14)),h=i(38),u=i(31),l=i(58),c=function(t){function e(){n(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.anim=null,t.hp=GameDefine2.ENEMY_DEFAULT_HP,t.type,t.state,t.tweenMgr=new h,t.positionType,t.STATE={IDLE:0,HIT:1,MOVE_IN:2,MOVE_TOWARD_PLAYER:3,WAIT_MOVE:4,MOVE_SIDEWAY:5},t.attack,t.waitTimer=new Timer,t.radius,t.angle,t.x_fix,t.range,t.anglespeed,t.moveTime,t}return a(e,t),o(e,[{key:"Init",value:function(){this.state=this.STATE.IDLE,null==this.anim&&(this.anim=new s("3"),this.addChild(this.anim)),this.tweenMgr.RemoveAll(),this.anim.SetAnim(3,!0),this.anim.scale.set(.8,.8),this.moveTime=GameDefine2.ENEMY_MOVE_TIME,this.angle=0,this.range=20,this.anglespeed=GameDefine2.ANGLE_SPEED,this.SetActive(!1)}},{key:"Hit",value:function(t){if(this.hp-=t,this.hp<=0){switch(this.type){case GameDefine2.TEMPLE_ENEMY:var e=EffectContainer.GetScoreObject();e.SetFrame(35),l.AddEffect(GameDefine2.EFFECT_TYPE_ADD_SCORE,e,0,this.anim.position.x-this.anim.width/4,this.anim.position.y+this.anim.height/4),BOSS.Hit(GameDefine2.ENEMY_2_TEMPLE_HP_DROP);var i=EffectContainer.GetBoomObject();i.rotation=Utils.Rand(0,180)*Math.PI/180,i.SetAnim(21),l.AddEffect(GameDefine2.EFFECT_TYPE_BULLET_HIT,i,0,this.anim.position.x,this.anim.position.y);break;default:var n=EffectContainer.GetScoreObject();n.SetFrame(18),l.AddEffect(GameDefine2.EFFECT_TYPE_ADD_SCORE,n,0,this.anim.position.x-this.anim.width/4,this.anim.position.y+this.anim.height/4);var r=EffectContainer.GetBoomObject();r.rotation=Utils.Rand(0,180)*Math.PI/180,r.SetAnim(21),l.AddEffect(GameDefine2.EFFECT_TYPE_BULLET_HIT,r,0,this.anim.position.x,this.anim.position.y),BOSS.Hit(GameDefine2.ENEMY_TEMPLE_HP_DROP)}this.SetActive(!1)}}},{key:"GetOutsideRange",value:function(t,e){var i=(e.x-t.x)/Math.abs(e.y-t.y);return Math.abs(e.y+200-t.y)*i+t.x}},{key:"SetActive",value:function(t){this.isActive=t,this.visible=t,this.isActive&&this.SetState(this.STATE.MOVE_IN),this.isActive||(this.tweenMgr.Remove(this.anim),this.SetState(this.STATE.IDLE),this.position.set(0,0))}},{key:"SetMoveTime",value:function(t){this.moveTime=t}},{key:"SetPositionType",value:function(t){switch(this.positionType=t,this.positionType){case GameDefine2.ENEMY_LEFT_POS:this.anim.SetAnim(11,!0),this.anim.position.set(GameDefine2.ENEMY_LEFT_POS_X,GameDefine2.ENEMY_LEFT_POS_y);break;case GameDefine2.ENEMY_RIGHT_POS:this.anim.SetAnim(12,!0),this.anim.position.set(GameDefine2.ENEMY_RIGHT_POS_X,GameDefine2.ENEMY_RIGHT_POS_Y);break;case GameDefine2.ENEMY_MID_LEFT_POS:this.anim.SetAnim(13,!0),this.anim.position.set(BOSS.anim.x-BOSS.anim.width/2,BOSS.anim.y),this.x_fix=BOSS.anim.x-BOSS.anim.width/2,this.angle=0,this.range=GameDefine2.RANGE,this.anglespeed=GameDefine2.ANGLE_SPEED;break;case GameDefine2.ENEMY_MID_RIGHT_POS:this.anim.SetAnim(13,!0),this.anim.position.set(BOSS.anim.x+BOSS.anim.width/2,BOSS.anim.y),this.x_fix=BOSS.anim.x+BOSS.anim.width/2,this.angle=0,this.range=GameDefine2.RANGE,this.anglespeed=GameDefine2.ANGLE_SPEED}}},{key:"SetType",value:function(t){switch(this.type=t,this.type){case GameDefine2.ENEMY_1:this.attack=GameDefine2.ENEMY_1_ATK,this.hp=GameDefine2.ENEMY_DEFAULT_HP;break;case GameDefine2.ENEMY_2:this.attack=GameDefine2.ENEMY_2_ATK,this.hp=GameDefine2.ENEMY_DEFAULT_HP;break;case GameDefine2.TEMPLE_ENEMY:this.attack=GameDefine2.ENEMY_3_ATK,this.hp=GameDefine2.ENEMY_TEMPLE_HP}}},{key:"SetState",value:function(t){var e=this;switch(this.state=t,this.state){case this.STATE.IDLE:this.tweenMgr.Remove(this.anim);break;case this.STATE.HIT:break;case this.STATE.MOVE_IN:if(this.type==GameDefine2.TEMPLE_ENEMY)return;var i=void 0,n=void 0;switch(this.positionType){case GameDefine2.ENEMY_LEFT_POS:i=EnemyMgr.left_X,n=EnemyMgr.left_Y;break;case GameDefine2.ENEMY_RIGHT_POS:i=EnemyMgr.right_X,n=EnemyMgr.right_Y}this.tweenMgr.Create(this.anim,u.LINEAR_EASE,{x:this.anim.position.x,y:this.anim.position.y},{x:i,y:n},this.moveTime,0),this.tweenMgr.SetCallback(this.anim,function(){e.tweenMgr.Remove(e.anim),e.SetState(e.STATE.WAIT_MOVE)});break;case this.STATE.MOVE_TOWARD_PLAYER:this.tweenMgr.Create(this.anim,u.LINEAR_EASE,{x:this.anim.position.x,y:this.anim.position.y},{x:this.GetOutsideRange(this.anim.position,player2.anim.position),y:player2.anim.y+200},2*this.moveTime,0),this.tweenMgr.SetCallback(this.anim,function(){e.tweenMgr.Remove(e.anim),e.SetActive(!1)});break;case this.STATE.WAIT_MOVE:this.waitTimer.SetDuration(GameDefine.DELAY_TIME_ENEMY);break;case this.STATE.MOVE_SIDEWAY:}}},{key:"MoveToward",value:function(){var t=this;this.tweenMgr.Create(this,u.LINEAR_EASE,{y:this.anim.position.y},{y:0-this.anim.height},this.moveTime,0),this.tweenMgr.SetCallback(this.anim,function(){t.tweenMgr.Remove(t.anim),t.isFinishMove=!0})}},{key:"Update",value:function(t){switch(this.tweenMgr.Update(t),this.isActive&&this.anim.Update(t),this.state){case this.STATE.IDLE:case this.STATE.HIT:break;case this.STATE.MOVE_IN:switch(this.positionType){case GameDefine2.ENEMY_MID_LEFT_POS:this.anim.y+=GameDefine2.ENEMY_MOVE_SPEED*t,this.angle+=this.anglespeed,this.anim.x=this.x_fix-Math.sin(this.angle)*this.range,this.angle>=3&&this.SetState(this.STATE.MOVE_TOWARD_PLAYER);break;case GameDefine2.ENEMY_MID_RIGHT_POS:this.anim.y+=GameDefine2.ENEMY_MOVE_SPEED*t,this.angle+=this.anglespeed,this.anim.x=this.x_fix+Math.sin(this.angle)*this.range,this.angle>=3&&this.SetState(this.STATE.MOVE_TOWARD_PLAYER)}break;case this.STATE.MOVE_TOWARD_PLAYER:Utils.Collision2Rect(this.anim.GetTransformRect(),player2.anim.GetTransformRect())&&this.isActive&&(this.SetActive(!1),player2.Hit(this.attack));break;case this.STATE.WAIT_MOVE:this.waitTimer.Update(t),this.waitTimer.JustFinished()&&this.SetState(this.STATE.MOVE_TOWARD_PLAYER);break;case this.STATE.MOVE_SIDEWAY:}}}]),e}(PIXI.Container);t.exports=c},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(){n(this,t);var e=0;this.GAME_SPEED_BASE=60,this.GAME_TIMEOUT=60,this.GAME_END_TIMEOUT=2,this.GAME_END_BEFORE_TIMEOUT=2,this.GAME_TIMER_WARNING=5,this.GAME_TIMER_PRODUCT_CHANGE=1.9,this.APPW=APP.GetWidth(),this.APPH=APP.GetHeight(),this.GAME_STATE_NONE=e++,this.GAME_STATE_TUTORIAL=e++,this.GAME_STATE_A=e++,this.GAME_STATE_END=e++,this.PRELOAD_CLOUD_FLY_SPEED=1,this.PRELOAD_BALLOON_FLY_SPEED=5,e=0,this.GAME_MANAGER_STATE_TUTORIAL=e++,this.GAME_MANAGER_STATE_TUTORIAL_2=e++,this.GAME_MANAGER_STATE_IN_GAME=e++,this.GAME_MANAGER_STATE_END_GAME=e++,this.IS_RANDOM_WAVE=!0,this.IS_SHOW_COUNT_ITEM=!1,this.BG_SPEED=350,e=0,this.ITEM_TYPE_BOMB=e++,this.ITEM_TYPE_MAGNET=e++,this.ITEM_TYPE_MAX=2,this.ITEM_ANGLE_SPEED_MIN=0,this.ITEM_ANGLE_SPEED_MAX=40,this.ITEM_ANGLE_FLY_OUT=60,e=0,this.ITEM_SPEED_X=16,this.ITEM_SPEED_Y=22,this.ITEM_ACCELERATION_Y=5,this.ITEM_FLY_TO_MAGNET=1500,this.BOMB_EXPLODE_DX=10,this.BOMB_EXPLODE_DY=35,e=0,this.ITEMMGR_STATE_NORMAL=e++,this.ITEMMGR_STATE_FRENZY=e++,this.ITEMMGR_STATE_FRENZY_FULL=e++,this.BOX_Y=1190,this.BOX_TIME_MOVE_TOTARGET=.1,this.BOX_TILT_BASE_DISTANCE=200,this.BOX_TILT_BASE_ANGLE=15,this.BOX_POP_DOWN_Y_MIN=0,this.BOX_POP_DOWN_Y_MAX=20,this.BOX_POP_DOWN_SPEED_Y_NORMAL=400,this.BOX_POP_DOWN_SPEED_Y_BOMB=600,this.BOX_POP_DOWN_ACC_Y=-3e3,this.BOX_CHECK_DISTANCE=10,this.BOX_VIBRATE_LOOP_ITEM=3,this.BOX_VIBRATE_LOOP_BOMB=6,this.BOX_VIBRATE_ANGLE_ITEM=2,this.BOX_VIBRATE_ANGLE_BOMB=4,this.BOX_VIBRATE_TIMEOUT=.05,e=0,this.BOX_STATE_NORMAL=e++,this.BOX_STATE_MAGNET=e++,this.BOX_STATE_FRENZY_IN=e++,this.SCORE_ADD_SCORE_ITEM=10,this.SCORE_ADD_SCORE_BOMB=-30,this.SCORE_ADD_SCORE_SPECIAL=30,this.SCORE_ADD_SCORE_SPECIAL_COMPLETE=150,this.SCORE_DY_START=-10,this.SCORE_DY_END=200,e=0,this.EFFECT_TYPE_ADD_SCORE=e++,this.EFFECT_TYPE_ADD_COMBO=e++,this.EFFECT_TYPE_GAMEOVER_CTA=e++,this.EFFECT_TYPE_GAMEOVER_STAR=e++,this.EFFECT_TYPE_BULLET_HIT=e++,this.EFFECT_ADD_SCORE_DY_START=100,this.EFFECT_ADD_SCORE_DY_END=200,this.SELECTED_TYPE=[],e=0,this.ENEMY_1=e++,this.ENEMY_2=e++,this.TEMPLE_ENEMY=e++,this.ENEMY_DEFAULT_HP=8,this.ENEMY_TEMPLE_HP=1.5,this.ENEMY_1_ATK=1,this.ENEMY_2_ATK=1,this.ENEMY_3_ATK=1,e=0,this.ENEMY_LEFT_POS=e++,this.ENEMY_RIGHT_POS=e++,this.ENEMY_MID_LEFT_POS=e++,this.ENEMY_MID_RIGHT_POS=e++,this.ENEMY_MOVE_SPEED=300,this.ENEMY_MOVE_TIME=1,this.ENEMY_LEFT_POS_X=-50,this.ENEMY_LEFT_POS_Y=0,this.ENEMY_LEFT_POS_X_MOVE_1=50,this.ENEMY_LEFT_POS_Y_MOVE_1=100,this.ENEMY_RIGHT_POS_X=APP.GetWidth()+50,this.ENEMY_RIGHT_POS_Y=0,this.ENEMY_RIGHT_POS_X_MOVE_1=APP.GetWidth()-50,this.ENEMY_RIGHT_POS_Y_MOVE_1=100,this.RANGE=100,this.ANGLE_SPEED=.1,this.DELAY_TIME_ENEMY=.5,this.SOUND_BULLET_IMPACT={},this.SOUND_BULLET_IMPACT.currentIndex=-1,this.SOUND_BULLET_IMPACT.arr=[4,5,6,7,8],this.SOUND_LASER_SHOOT={},this.SOUND_LASER_SHOOT.currentIndex=-1,this.SOUND_LASER_SHOOT.arr=[17,18,19,20,21],this.BOSS_HP=120,this.TEMPLE_HP_DROP=.1,this.ENEMY_TEMPLE_HP_DROP=.5,this.ENEMY_2_TEMPLE_HP_DROP=.4,this.HP_PER_SEGMENT=this.BOSS_HP/5,this.PLAYER_HP=5,this.PLAYER_BLINK_TIME=.5,this.ACCEL=280,this.PLAYER_MAX_SPEED=2e3,this.BULLET_ATK=2,this.SHOOT_DELAY=.5,this.ROAD_START_POS={x:0,y:0,z:0},this.ROAD_HEIGHT=4001,this.CAMERA_POS_ON_SCREEN={x:this.APPW/2,y:this.APPH/2},this.CAMERA_START_POS={x:0,y:0,z:0},this.CAMERA_SCALE_1_Z=1e3,this.CUPS_POS=[{x:APP.GetWidth()/2-200,y:APP.GetHeight()/2-100,scale:.5},{x:APP.GetWidth()/2,y:APP.GetHeight()/2-250,scale:.4},{x:APP.GetWidth()/2+200,y:APP.GetHeight()/2-100,scale:.5},{x:APP.GetWidth()/2,y:APP.GetHeight()/2+50,scale:.8}],this.MAX_SELECTED_ITEM=3,this.GAME_LOADING_LERP_SPEED=700,this.UpdateParams()}return r(t,[{key:"UpdateParams",value:function(){this.OFFSET_Y=100,this.PLAYER_START_POSITION={x:(this.NUMBER_OF_LANE%2==0?-.5:0)*this.LANE_WIDTH,y:APP.GetHeight()-this.OFFSET_Y,z:0},this.BOX_X_MIN=100,this.BULLET_MAX=51,this.BULLET_LIFE_TIME=1,this.BULLET_SPACE=50,this.BULLET_PER_TIME=2,this.ARR_PARTICLE_ID=[15,15,15],this.ARR_AURORA_ID=[15,15,15,15],this.PLAYER_SPEED_NORMAL=700}},{key:"RandomInRange",value:function(t,e){return t+(e-t)*Math.random()}},{key:"CheckCollisionTwoRange",value:function(t,e,i,n){return!(Math.max(t,e)<Math.min(i,n)||Math.min(t,e)>Math.max(i,n))}},{key:"CheckCollisionTwoBody",value:function(t,e){return this.CheckCollisionTwoRange(t.x,t.x+t.width,e.x,e.x+e.width)&&this.CheckCollisionTwoRange(t.y,t.y+t.height,e.y,e.y+e.height)&&this.CheckCollisionTwoRange(t.z,t.z+t.depth,e.z,e.z+e.depth)}},{key:"UpdateRotateVideo",value:function(){this.mVideoBg.className=window.innerWidth<window.innerHeight?"video_no_rotate":"video_rotate"}},{key:"IsSingleTouch",value:function(t){return"touch"!=t.data.pointerType||("touchstart"==t.data.originalEvent.type&&1==t.data.originalEvent.touches.length||"touchmove"==t.data.originalEvent.type&&1==t.data.originalEvent.touches.length||"touchend"==t.data.originalEvent.type&&0==t.data.originalEvent.touches.length)}},{key:"GetDistance",value:function(t,e){var i=e.x-t.x,n=e.y-t.y;return Math.sqrt(i*i+n*n)}},{key:"MoveToTarget",value:function(t,e,i,n){return i=Math.abs(i),t<e?Math.min(t+i*n,e):t>e?Math.max(t-i*n,e):t}},{key:"GetSoundIndexMax",value:function(){return AudioManager.IsSupportAudioAPI()?DataDefine.SOUNDS_INFO.length:DataDefine.SINGLE_SOUNDS_INFO.length}},{key:"PlaySound",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t<this.GetSoundIndexMax()&&AudioManager.Play(t,e)}},{key:"PauseSound",value:function(t){t<this.GetSoundIndexMax()&&AudioManager.Pause(t)}},{key:"StopSound",value:function(t){t<this.GetSoundIndexMax()&&AudioManager.Stop(t)}},{key:"StopAllSound",value:function(){AudioManager.StopAll()}},{key:"PlayArrSound",value:function(t){t.currentIndex=(t.currentIndex+1)%t.arr.length,this.PlaySound(t.arr[t.currentIndex])}},{key:"GetAngle",value:function(t,e){var i=e.x-t.x,n=e.y-t.y;return i<0?n<0?Math.atan(n/i)/Math.PI*180+180:0==n?180:Math.atan(n/i)/Math.PI*180+180:0==i?n<0?-90:0==n?0:90:n<0?Math.atan(n/i)/Math.PI*180:0==n?0:Math.atan(n/i)/Math.PI*180}},{key:"CheckValueInRange",value:function(t,e,i){return t>=Math.min(e,i)&&t<=Math.max(e,i)}},{key:"LinearInterpolation",value:function(t,e,i,n,r){return(t-e)/(i-e)*(r-n)+n}},{key:"GetValueInArray",value:function(t,e){if(e.length>=2)for(var i=e.length-1,n=0;n<i;n++)if(this.CheckValueInRange(t,e[n][0],e[n+1][0]))return this.LinearInterpolation(t,e[n][0],e[n+1][0],e[n][1],e[n+1][1]);return 0}}]),t}();t.exports=new a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(155),o=function(){function t(){n(this,t),this.X_RANDOM_MIN=.2,this.VX_CONDITION=.4,this.SPAWN_POS={LEFT:0,RIGHT:1,MID_LEFT:2,MID_RIGHT:3},this.ARR_RANDOM_WAVE_1=[{time:1,tdMin:.9,tdMax:.8,mag:!1,per:100,vxMin:0,vxMax:0,vyMin:.1,vyMax:.3,dxMin:0,dxMax:.2,timeMoveMin:1,timeMoveMax:.9,spawn_pos:[this.SPAWN_POS.RIGHT,this.SPAWN_POS.LEFT,this.SPAWN_POS.MID_LEFT,this.SPAWN_POS.MID_RIGHT]},{time:30,tdMin:.8,tdMax:.7,mag:!1,per:100,vxMin:0,vxMax:0,vyMin:.1,vyMax:.3,dxMin:0,dxMax:.2,timeMoveMin:.9,timeMoveMax:.8,spawn_pos:[this.SPAWN_POS.MID_LEFT,this.SPAWN_POS.MID_RIGHT,this.SPAWN_POS.RIGHT,this.SPAWN_POS.LEFT]},{time:55,tdMin:.7,tdMax:.6,mag:!1,per:100,vxMin:0,vxMax:0,vyMin:.1,vyMax:.3,dxMin:0,dxMax:.2,timeMoveMin:.8,timeMoveMax:.7,spawn_pos:[this.SPAWN_POS.RIGHT,this.SPAWN_POS.LEFT,this.SPAWN_POS.MID_LEFT,this.SPAWN_POS.MID_RIGHT]}],this.ARR_RANDOM_WAVE_2=[{time:1,tdMin:.9,tdMax:.8,mag:!1,per:100,vxMin:0,vxMax:0,vyMin:.1,vyMax:.3,dxMin:0,dxMax:.2,timeMoveMin:1,timeMoveMax:.8,spawn_pos:[this.SPAWN_POS.RIGHT,this.SPAWN_POS.LEFT,this.SPAWN_POS.MID_LEFT,this.SPAWN_POS.MID_RIGHT]},{time:30,tdMin:.8,tdMax:.7,mag:!1,per:100,vxMin:0,vxMax:0,vyMin:.1,vyMax:.3,dxMin:0,dxMax:.2,timeMoveMin:.8,timeMoveMax:.7,spawn_pos:[this.SPAWN_POS.MID_LEFT,this.SPAWN_POS.MID_RIGHT,this.SPAWN_POS.RIGHT,this.SPAWN_POS.LEFT]},{time:55,tdMin:.6,tdMax:.5,mag:!1,per:100,vxMin:0,vxMax:0,vyMin:.1,vyMax:.3,dxMin:0,dxMax:.2,timeMoveMin:.7,timeMoveMax:.6,spawn_pos:[this.SPAWN_POS.RIGHT,this.SPAWN_POS.LEFT,this.SPAWN_POS.MID_LEFT,this.SPAWN_POS.MID_RIGHT]}],this.ARR_RANDOM_WAVE_3=[{time:1,tdMin:.8,tdMax:.7,mag:!1,per:100,vxMin:0,vxMax:0,vyMin:.1,vyMax:.3,dxMin:0,dxMax:.2,timeMoveMin:1,timeMoveMax:.8,spawn_pos:[this.SPAWN_POS.RIGHT,this.SPAWN_POS.LEFT,this.SPAWN_POS.MID_LEFT,this.SPAWN_POS.MID_RIGHT]},{time:30,tdMin:.7,tdMax:.6,mag:!1,per:100,vxMin:0,vxMax:0,vyMin:.1,vyMax:.3,dxMin:0,dxMax:.2,timeMoveMin:.8,timeMoveMax:.7,spawn_pos:[this.SPAWN_POS.MID_LEFT,this.SPAWN_POS.MID_RIGHT,this.SPAWN_POS.RIGHT,this.SPAWN_POS.LEFT]},{time:55,tdMin:.6,tdMax:.5,mag:!1,per:100,vxMin:0,vxMax:0,vyMin:.1,vyMax:.3,dxMin:0,dxMax:.2,timeMoveMin:.7,timeMoveMax:.6,spawn_pos:[this.SPAWN_POS.RIGHT,this.SPAWN_POS.LEFT,this.SPAWN_POS.MID_LEFT,this.SPAWN_POS.MID_RIGHT]}],this.waveRandom,this.countItem,this.countBomb,this.countMagnet,this.arrRandomWave,this.indexRandomWave,this.countTimeDelayRandomWave,this.xRandomLast,this.xRandom,this.vxMulty,this.testLoop}return r(t,[{key:"Init",value:function(){if(GameDefine2.IS_RANDOM_WAVE){switch(Utils.RandInt(1,3)){default:case 1:this.arrRandomWave=this.ARR_RANDOM_WAVE_1,this.waveRandom=1;break;case 2:this.arrRandomWave=this.ARR_RANDOM_WAVE_2,this.waveRandom=2;break;case 3:this.arrRandomWave=this.ARR_RANDOM_WAVE_3,this.waveRandom=3}this.indexRandomWave=0,this.countTimeDelayRandomWave=0,this.xRandomLast=APP.GetWidth()/3,this.countItem=0,this.countBomb=0,this.countMagnet=0}}},{key:"Update",value:function(t){if(GameDefine2.IS_RANDOM_WAVE){APP.GetWidth(),APP.GetHeight();if(this.indexRandomWave<this.arrRandomWave.length&&(this.countTimeDelayRandomWave-=t,this.countTimeDelayRandomWave<=0&&(StateIngame2.GetTimeSpent()>this.arrRandomWave[this.indexRandomWave].time&&this.indexRandomWave++,this.indexRandomWave<this.arrRandomWave.length))){this.countTimeDelayRandomWave=Utils.Rand(this.arrRandomWave[this.indexRandomWave].tdMin,this.arrRandomWave[this.indexRandomWave].tdMax);if(100*Math.random()<this.arrRandomWave[this.indexRandomWave].per){this.countItem++;var e=!0,i=!1,n=void 0;try{for(var r,o=this.arrRandomWave[this.indexRandomWave].spawn_pos[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var s=r.value,h=Utils.Rand(this.arrRandomWave[this.indexRandomWave].timeMoveMin,this.arrRandomWave[this.indexRandomWave].timeMoveMax);s==this.SPAWN_POS.MID_LEFT||s==this.SPAWN_POS.MID_RIGHT?a.SpawnEnemy(s,GameDefine2.TEMPLE_ENEMY,h):a.SpawnEnemy(s,GameDefine2.ENEMY_1,h)}}catch(t){i=!0,n=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw n}}}}}}}]),t}();t.exports=new o},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(14),h=function(t){function e(){n(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.mCountState=0,t.STATE={},t.STATE.INACTIVE=t.mCountState++,t.STATE.INIT=t.mCountState++,t.STATE.NORMAL=t.mCountState++,t.mAnimation,t.mIsFirstInitParticle=!0,t.mState,t.mPercent,t.mLifeTime,t.mArrScale,t.mArrAlpha,t.mArrSpeedX,t.mArrSpeedY,t}return a(e,t),o(e,[{key:"Init",value:function(){this._SetState(this.STATE.INIT)}},{key:"_SetState",value:function(t){switch(this.mState=t,this.mState){case this.STATE.INACTIVE:this.visible=!1;break;case this.STATE.INIT:this.mIsFirstInitParticle&&(this.mAnimation=new s("3"),this.addChild(this.mAnimation)),this.visible=!1,this.mPercent=0,this.mLifeTime=0,this.mArrAlpha=[],this.mArrScale=[],this.mArrSpeedX=[],this.mArrSpeedY=[],this.alpha=0,this.mIsFirstInitParticle=!1;break;case this.STATE.NORMAL:this.visible=!0}}},{key:"Update",value:function(t){switch(this.mState){case this.STATE.INACTIVE:case this.STATE.INIT:break;case this.STATE.NORMAL:this.mPercent=GameDefine.MoveToTarget(this.mPercent,1,1/this.mLifeTime,t),this.alpha=GameDefine.GetValueInArray(this.mPercent,this.mArrAlpha),this.scale.set(GameDefine.GetValueInArray(this.mPercent,this.mArrScale));var e=GameDefine.GetValueInArray(this.mPercent,this.mArrSpeedX),i=GameDefine.GetValueInArray(this.mPercent,this.mArrSpeedY);this.SetPosition(this.position.x+e*t,this.position.y+i*t),this.mAnimation.Update(t),this.mPercent>=1&&this._SetState(this.STATE.INACTIVE)}}},{key:"Start",value:function(){this._SetState(this.STATE.NORMAL)}},{key:"SetStateInactive",value:function(){this._SetState(this.STATE.INACTIVE)}},{key:"IsStateInactive",value:function(){return this.mState==this.STATE.INACTIVE}},{key:"SetAnim",value:function(t){this.mAnimation.SetAnim(t,!0)}},{key:"SetLifeTime",value:function(t){this.mLifeTime=t}},{key:"SetPosition",value:function(t,e){this.position.set(t,e)}},{key:"SetArrScale",value:function(t){this.mArrScale=t}},{key:"SetArrAlpha",value:function(t){this.mArrAlpha=t}},{key:"SetArrSpeedX",value:function(t){this.mArrSpeedX=t}},{key:"SetArrSpeedY",value:function(t){this.mArrSpeedY=t}}]),e}(PIXI.Container);t.exports=h},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(271),o=function(){function t(){n(this,t),this.mCountState=0,this.STATE={},this.STATE.INACTIVE=this.mCountState++,this.STATE.INIT=this.mCountState++,this.STATE.NORMAL=this.mCountState++,this.mContainerParticle,this.mContainerAurora,this.mArrParticle=[],this.mArrAurora=[],this.mIsFirstInitParticleMgr=!0,this.mState}return r(t,[{key:"Init",value:function(){this._SetState(this.STATE.INIT)}},{key:"_SetState",value:function(t){switch(this.mState=t,this.mState){case this.STATE.INACTIVE:break;case this.STATE.INIT:this.mIsFirstInitParticleMgr&&(this.mContainerParticle=new PIXI.Container,this.mContainerAurora=new PIXI.Container),this._InactiveArrParticle(this.mArrParticle),this._InactiveArrParticle(this.mArrAurora),this.mIsFirstInitParticleMgr=!1;break;case this.STATE.NORMAL:}}},{key:"Update",value:function(t){switch(this.mState){case this.STATE.INACTIVE:case this.STATE.INIT:break;case this.STATE.NORMAL:this._UpdateArrParticle(this.mArrParticle,t),this._UpdateArrParticle(this.mArrAurora,t)}}},{key:"Start",value:function(){this._SetState(this.STATE.NORMAL)}},{key:"GetContainerParticle",value:function(){return this.mContainerParticle}},{key:"GetContainerAurora",value:function(){return this.mContainerAurora}},{key:"MakePlayerParticle",value:function(t,e){switch(this.mState){case this.STATE.NORMAL:var i=this._GetParticle(this.mArrParticle,a,this.mContainerParticle);i.Init(),i.SetAnim(GameDefine2.ARR_PARTICLE_ID[Math.floor(GameDefine2.ARR_PARTICLE_ID.length*Math.random())]),i.SetLifeTime(GameDefine2.RandomInRange(.5,1)),i.SetPosition(t.x+GameDefine2.RandomInRange(40,-100),t.y+GameDefine2.RandomInRange(60,-20)),i.SetArrAlpha([[0,0],[.1,1],[.5,1],[1,0]]);var n=GameDefine2.RandomInRange(1,2.5);i.SetArrScale([[0,0*n],[.2,1*n],[1,.2*n]]),i.SetArrSpeedY([[0,-e*GameDefine2.RandomInRange(.8,1.2)],[1,-e*GameDefine2.RandomInRange(1,1.5)]]),i.SetArrSpeedX([[0,GameDefine2.RandomInRange(200,-200)],[1,0]]),i.Start()}}},{key:"_InactiveArrParticle",value:function(t){for(var e=t.length,i=0;i<e;i++)t[i].SetStateInactive()}},{key:"_UpdateArrParticle",value:function(t,e){for(var i=t.length,n=0;n<i;n++)t[n].Update(e)}},{key:"_GetParticle",value:function(t,e,i){for(var n=t.length,r=0;r<n;r++)if(t[r].IsStateInactive())return t[r];var a=new e;return t.push(a),i.addChild(a),a}},{key:"_UpdateMakeAurora",value:function(t){for(var e=0,i=this.mArrAurora.length,n=0;n<i;n++){var r=this.mArrAurora[n];r.IsStateInactive()||(e=Math.max(e,r.position.x))}if(e<=.7*APP.GetWidth()){var o=this._GetParticle(this.mArrAurora,a,this.mContainerAurora);o.Init(),o.SetAnim(GameDefine2.ARR_AURORA_ID[Math.floor(GameDefine2.ARR_AURORA_ID.length*Math.random())]),o.SetLifeTime(30),o.SetPosition(e+GameDefine2.RandomInRange(100,200),APP.GetHeight()*GameDefine2.RandomInRange(.1,.4));var s=GameDefine2.RandomInRange(.7,1);o.SetArrScale([[0,s],[1,s]]);var h=GameDefine2.RandomInRange(.3,.6);o.SetArrAlpha([[0,0],[.1,h],[1,h]]),o.SetArrSpeedX([[0,-50],[1,-50]]),o.Start()}}}]),t}();t.exports=o},function(t,e,i){"use strict";(function(e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=(i(17),i(14)),h=i(266),u=i(272),l=function(t){function i(){n(this,i);var t=r(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return t.anim=new s("3"),t.animHit=new s("3"),t.hp=GameDefine2.PLAYER_HP,t.bulletMgr,t.state=0,t.posX=0,t.posY=0,t.boxXMin=GameDefine2.BOX_X_MIN,t.targetX=0,t.targetY=GameDefine2.PLAYER_START_POSITION.y,t.bulletTimer=new Timer,t.blinkTimer=new Timer,t.isBlink=!1,t.STATE={IDLE:0,ATTACK:1,HIT:2},t.acceleration=GameDefine2.ACCEL,t.targetPosX,t.vel=0,t.keys=[],t}return a(i,t),o(i,[{key:"Init",value:function(){StateIngame2.isFirstLaunch?(void 0==e.ParticleMgr2&&(this.bulletMgr=new h,e.ParticleMgr2=new u,this.bulletEffect_1=new s("3"),this.bulletEffect_1.visible=!0,this.bulletEffect_1.SetAnim(1,!0),this.bulletEffect_2=new s("3"),this.bulletEffect_2.visible=!0,this.bulletEffect_2.SetAnim(1,!0),this.bulletEffect_1.scale.set(3,3),this.bulletEffect_2.scale.set(3,3)),this.bulletMgr.Init(),ParticleMgr2.Init(),this.hp=GameDefine2.PLAYER_HP,this.SetState(this.STATE.IDLE),this.SetPos(.5*APP.GetWidth(),GameDefine2.PLAYER_START_POSITION.y),this.SetTargetPos(.5*APP.GetWidth(),GameDefine2.PLAYER_START_POSITION.y),this.addChild(ParticleMgr2.GetContainerParticle()),this.addChild(this.bulletMgr),this.addChild(this.bulletEffect_1),this.addChild(this.bulletEffect_2),this.addChild(this.anim),this.addChild(this.animHit),this.bulletEffect_1.visible=!1,this.bulletEffect_2.visible=!1,this.bulletEffect_1.position.set(this.anim.GetTransformRect(0).x,this.anim.GetTransformRect(0).y),this.bulletEffect_2.position.set(this.anim.GetTransformRect(1).x,this.anim.GetTransformRect(1).y),StateIngame2.IsNewUser()?this.SetState(this.STATE.IDLE):this.SetState(this.STATE.ATTACK)):this.SetState(this.STATE.ATTACK),this.bulletEffect_1.position.set(this.anim.GetTransformRect(0).x,this.anim.GetTransformRect(0).y),this.bulletEffect_2.position.set(this.anim.GetTransformRect(1).x,this.anim.GetTransformRect(1).y),this.blinkTimer.SetDuration(0),this.isBlink=!1,this.anim.visible=!0,this.animHit.visible=!0,this.hp=GameDefine2.PLAYER_HP,this.targetPosX=this.anim.position.x,AudioManager.Play(14,!0)}},{key:"StartShoot",value:function(){this.bulletTimer.SetDuration(GameDefine2.SHOOT_DELAY)}},{key:"SetState",value:function(t){switch(this.state=t,this.state){case this.STATE.IDLE:this.bulletEffect_1.visible=!1,this.bulletEffect_2.visible=!1,this.anim.SetAnim(ObjectDefine.CHARACTER_INFOR.currentIndex?7:8,!0),ParticleMgr2.Start();break;case this.STATE.ATTACK:this.anim.SetAnim(ObjectDefine.CHARACTER_INFOR.currentIndex?7:8,!0),ParticleMgr2.Start(),this.bulletEffect_1.visible=!0,this.bulletEffect_2.visible=!0,this.bulletEffect_1.position.set(this.anim.GetTransformRect(0).x,this.anim.GetTransformRect(0).y),this.bulletEffect_2.position.set(this.anim.GetTransformRect(1).x,this.anim.GetTransformRect(1).y),player2.StartShoot();break;case this.STATE.HIT:}}},{key:"Shoot",value:function(){this.bulletMgr.Shoot(),GameDefine2.PlayArrSound(GameDefine2.SOUND_LASER_SHOOT),this.bulletTimer.SetDuration(.1)}},{key:"Hit",value:function(t){this.isBlink||(AudioManager.Play(13),this.animHit.rotation=45*Math.PI/180,this.animHit.SetAnim(22),this.hp-=t,UIManager.SetPlayerBar(this.hp),this.isBlink=!0,this.blinkTimer.SetDuration(GameDefine2.PLAYER_BLINK_TIME),this.hp<=0&&StateIngame2.EndGame())}},{key:"Update",value:function(t){switch(this.bulletTimer.Update(t),this.bulletEffect_1.Update(t),this.bulletEffect_2.Update(t),ParticleMgr2.Update(t),this.bulletMgr.Update(t),this.anim.Update(t),this.animHit.Update(t),DeviceInfo.isBrowser?this.KeyUpdate(t):this.UpdateMoveBox(t),this.blinkTimer.Update(t),this.isBlink&&(1e3*e.gIngameTimeSpent%200<100?this.anim.visible=!1:this.anim.visible=!0,this.blinkTimer.JustFinished()&&(this.isBlink=!1,this.anim.visible=!0)),this.state){case this.STATE.IDLE:ParticleMgr2.MakePlayerParticle(this.anim.position,-GameDefine2.PLAYER_SPEED_NORMAL);break;case this.STATE.ATTACK:ParticleMgr2.MakePlayerParticle(this.anim.position,-GameDefine2.PLAYER_SPEED_NORMAL),this.bulletTimer.JustFinished()&&this.Shoot()}}},{key:"UpdateMoveBox",value:function(t){var e=Math.abs(this.targetX-this.posX),i=Math.min(1,e/GameDefine2.BOX_TILT_BASE_DISTANCE)*GameDefine2.BOX_TILT_BASE_ANGLE;this.speedX=e/GameDefine2.BOX_TIME_MOVE_TOTARGET*t,this.posX>this.targetX?(this.speedX*=-1,i*=-1):this.posX==this.targetX&&(this.speedX=0,i=0);var n=Math.min(this.posX+this.speedX,this.targetX);this.posX>this.targetX&&(n=Math.max(this.posX+this.speedX,this.targetX)),this.SetRotate(i),this.SetPos(n)}},{key:"SetRotate",value:function(t){this.anim.rotation=t*Math.PI/180}},{key:"SetPos",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.posX,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.posY;this.posX=t,this.posY=e,this.anim.position.set(this.posX,this.posY),this.animHit.position.set(this.posX,this.posY-20),this.bulletEffect_1.position.set(this.anim.GetTransformRect(0).x,this.anim.GetTransformRect(0).y),this.bulletEffect_2.position.set(this.anim.GetTransformRect(1).x,this.anim.GetTransformRect(1).y)}},{key:"SetTargetPos",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.targetX,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.targetY;this.targetX=Math.min(Math.max(t,this.boxXMin),APP.GetWidth()-this.boxXMin),this.targetY=e}},{key:"TouchHandler",value:function(t){(Input.IsTouchDown(t)||Input.IsTouchMove(t))&&this.SetTargetPos(Input.touchX+Input.touchDX)}},{key:"SetPosKey",value:function(t){this.anim.position.x+=t,this.anim.position.x>=APP.GetWidth()-this.anim.width/3&&(this.anim.position.x=APP.GetWidth()-this.anim.width/3),this.anim.position.x<=this.anim.width/3&&(this.anim.position.x=this.anim.width/3),this.posX=this.anim.position.x,this.posY=this.anim.position.y,this.animHit.position.set(this.posX,this.posY-20),this.bulletEffect_1.position.set(this.anim.GetTransformRect(0).x,this.anim.GetTransformRect(0).y),this.bulletEffect_2.position.set(this.anim.GetTransformRect(1).x,this.anim.GetTransformRect(1).y)}},{key:"KeyUpdate",value:function(t){null!=this.direction&&(39==this.direction&&(this.vel+=this.acceleration,this.vel>=GameDefine2.PLAYER_MAX_SPEED&&(this.vel=GameDefine2.PLAYER_MAX_SPEED),this.SetPosKey(this.vel*t)),37==this.direction&&(this.vel-=this.acceleration,this.vel<=-GameDefine2.PLAYER_MAX_SPEED&&(this.vel=-GameDefine2.PLAYER_MAX_SPEED),this.SetPosKey(this.vel*t)))}},{key:"KeyHandler",value:function(t){Input.IsKeyDown(t)&&(this.keys[37]||this.keys[39]||(this.direction=t.keyCode),this.keys[t.keyCode]=!0),Input.IsKeyUp(t)&&(this.keys[t.keyCode]=!1,this.keys[37]||this.keys[39]?!this.keys[37]&&this.keys[39]?this.direction=39:this.direction=37:this.direction=null,this.isSetPos=!1,this.vel=0)}},{key:"MovePlayer",value:function(){}}]),i}(PIXI.Container);t.exports=l}).call(e,i(21))},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(17),h=function(t){function e(){n(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.fWidth=0,t.offset=0,t.repeat=0,t.m_roads=[],t}return a(e,t),o(e,[{key:"Init",value:function(t,e,i){if(this.offset=0,!(this.children.length>0)){var n=new s(t);this.m_roads.push(n),this.addChild(n),this.m_roads[0].SetFrame(e),this.m_roads[0].position.set(APP.GetWidth()/2,this.offset-APP.GetHeight()/2),n=new s(t),this.addChild(n),this.m_roads.push(n),this.m_roads[1].SetFrame(e),this.m_roads[1].position.set(APP.GetWidth()/2,this.offset+APP.GetHeight()/2-15),n=new s(t),this.addChild(n),this.m_roads.push(n),this.m_roads[2].SetFrame(e),this.m_roads[2].position.set(APP.GetWidth()/2,this.offset+1.5*APP.GetHeight()-15)}}},{key:"Update",value:function(t,e){for(var i=0;i<3;i++)this.m_roads[i].position.y+=e*t,this.m_roads[i].position.y>=1.5*APP.GetHeight()&&(this.m_roads[i].position.y=-APP.GetHeight()/2+15)}}]),e}(PIXI.Container);t.exports=h},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(t){function e(){n(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.player_bar=new Array,t.boss_bar=new Array,t.max_hp=5,t.current_boss_hp=null,t.current_player_hp=null,t}return a(e,t),o(e,[{key:"Init",value:function(){if(0==this.player_bar.length)for(var t=0;t<this.max_hp;t++){var e=GuiManager.GetGui(6).GetObject(9+t);this.player_bar.push(e),e=GuiManager.GetGui(6).GetObject(19-t),this.boss_bar.push(e)}else for(var i=0;i<this.max_hp;i++)this.player_bar[i].SetAnim(3),this.boss_bar[i].SetAnim(5);this.SetPlayerBar(this.max_hp),this.SetEnemyBar(this.max_hp)}},{key:"SetState",value:function(t){}},{key:"SetEnemyBar",value:function(t){t==this.current_boss_hp+1||t<0||(t!=this.max_hp&&this.boss_bar[t].SetAnim(0),0==t?this.boss_bar[t].SetAnim(0):(this.boss_bar[t-1].SetAnim(6,!0),this.current_boss_hp=t-1))}},{key:"SetPlayerBar",value:function(t){t!=this.max_hp&&this.player_bar[t].SetAnim(0),0==t?this.player_bar[t].SetAnim(0):(this.player_bar[t-1].SetAnim(4,!0),this.current_player_hp=t-1)}},{key:"Update",value:function(t){null!=this.current_boss_hp&&(this.boss_bar[this.current_boss_hp].Update(t),this.player_bar[this.current_player_hp].Update(t))}}]),e}(PIXI.Container);t.exports=new s},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function t(e,i,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},h=i(65),u=function(t){function e(){n(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),i=Object.keys(t.STATE).length;return t.STATE.INIT=i++,t.STATE.ACTIVE=i++,t}return a(e,t),o(e,[{key:"Init",value:function(){this._SetState(this.STATE.INIT)}},{key:"_SetState",value:function(t){switch(s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_SetState",this).call(this,t),this.mState){case this.STATE.INACTIVE:break;case this.STATE.INIT:this.SetPosition({x:GameDefine.CAMERA_START_POSITION.x,y:GameDefine.CAMERA_START_POSITION.y,z:GameDefine.CAMERA_START_POSITION.z});break;case this.STATE.ACTIVE:}}},{key:"Update",value:function(t){switch(this.mState){case this.STATE.INACTIVE:case this.STATE.INIT:case this.STATE.ACTIVE:}}},{key:"Active",value:function(){switch(this.mState){case this.STATE.INIT:this._SetState(this.STATE.ACTIVE)}}},{key:"GetDrawScale",value:function(t){return GameDefine.CAMERA_Z_SCALE_ORIGIN/(t.z-this.mPosition.z)}},{key:"GetDrawPosition",value:function(t){var e=this.GetDrawScale(t);return{scale:e,x:GameDefine.CAMERA_POSITION_ON_SCREEN.x+(t.x-this.mPosition.x)*e,y:GameDefine.CAMERA_POSITION_ON_SCREEN.y+(t.y-this.mPosition.y)*e}}},{key:"UpdatePosition",value:function(t){this.SetPosition({x:this.mPosition.x,y:this.mPosition.y,z:Player.GetPosition().z+GameDefine.CAMERA_OFFSET_POSITION_WITH_PLAYER.z})}}]),e}(h);t.exports=u},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(31),h=i(38),u=function(t){function e(){n(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));t.STATE={};var i=0;return t.STATE.EMPTY=i++,t.STATE.INIT=i++,t.STATE.ACTIVE=i++,t.STATE.STEP_BY_STEP=i++,t.STATE.HIDE=i++,t.STATE.SHOW_ANIM=i++,t.STATE.END=i++,t.gui=null,t.state=t.STATE.EMPTY,t.tweenMgr=new h,t.canSwitchState=!1,t.stepCount=1,t.stepAnimCount=1,t.soundPause=null,t.isPause=!1,t}return a(e,t),o(e,[{key:"Init",value:function(){this.isPause=!1,this.canSwitchState=!1,this.stepCount=1,this.stepAnimCount=1,this.SetState(this.STATE.INIT)}},{key:"SetActive",value:function(){this.SetState(this.STATE.ACTIVE)}},{key:"Pause",value:function(){AudioManager.IsSoundPlaying(1)&&(AudioManager.Pause(1),this.soundPause=1),this.isPause=!0}},{key:"Resume",value:function(){this.soundPause&&(AudioManager.Play(1,!1),this.soundPause=null),this.isPause=!1}},{key:"SetState",value:function(t){var e=this;switch(this.state=t,this.state){case this.STATE.EMPTY:break;case this.STATE.INIT:this.darkBg=new PIXI.Graphics,this.darkBg.beginFill(0),this.darkBg.drawRect(0,0,APP.GetWidth(),APP.GetHeight()),this.darkBg.endFill(),this.bg||(this.bg=new PIXI.Sprite(LoaderCustom2.resources.imgBgComic.texture)),this.bg.anchor.set(.5,.5),this.bg.position.set(APP.GetWidth()/2,APP.GetHeight()/2),this.gui=GuiManager.GetGui(7),this.step_1=this.gui.GetObject(0),this.step_2=this.gui.GetObject(1),this.step_3=this.gui.GetObject(2),this.step_4=this.gui.GetObject(3),this.step_4_txt=this.gui.GetObject(4+window.languageIndex).Clone(),this.step_4_txt.visible=!0,this.step_5=this.gui.GetObject(9),this.step_5_txt=this.gui.GetObject(10+window.languageIndex).Clone(),this.step_5_txt.visible=!1,this.step_5.addChild(this.step_5_txt),this.btnExit=this.gui.GetObject(20),this.btnExit.SetTouchable(!0),this.step_1.SetFrame(Player.INFOR.FRAME_COMIC_STEP_1),this.step_4.SetFrame(Player.INFOR.FRAME_COMIC_STEP_4),this.step_4.addChild(this.step_4_txt),this.visible=!1,this.addChild(this.darkBg),this.addChild(this.bg),this.addChild(this.gui);break;case this.STATE.ACTIVE:AudioManager.Stop(0),StateIngame.stopBgMusic=!0,AudioManager.Play(1,!1),this.bg.alpha=0,this.tweenMgr.Create(this.darkBg,s.LINEAR_EASE,{alpha:0},{alpha:1},.3,0),this.tweenMgr.Create(this.bg,s.LINEAR_EASE,{alpha:0},{alpha:1},.5,0),this.tweenMgr.SetCallback(this.bg,function(){e.tweenMgr.Remove(e.bg),e.canSwitchState=!0}),this.visible=!0;break;case this.STATE.STEP_BY_STEP:switch(this.stepCount){case 1:var i={x:this.step_1.x,y:this.step_1.y};this.step_1.x-=50,this.step_1.alpha=0,this.tweenMgr.Create(this.step_1,s.LINEAR_EASE,{x:i.x-50,y:i.y,alpha:0},{x:i.x,y:i.y,alpha:1},.3,0),this.tweenMgr.SetCallback(this.step_1,function(){e.tweenMgr.Remove(e.step_1),e.stepCount=2,e.canSwitchState=!0}),this.step_1.visible=!0;break;case 2:var n={x:this.step_2.x,y:this.step_2.y};this.step_2.x-=20,this.step_2.y-=40,this.step_2.alpha=0,this.tweenMgr.Create(this.step_2,s.LINEAR_EASE,{x:n.x-20,y:n.y-40,alpha:0},{x:n.x,y:n.y,alpha:1},.3,.3),this.tweenMgr.SetCallback(this.step_2,function(){e.tweenMgr.Remove(e.step_2),e.stepCount=3,e.canSwitchState=!0}),this.step_2.visible=!0;break;case 3:var r={x:this.step_3.x,y:this.step_3.y};this.step_3.x+=30,this.step_3.y-=50,this.step_3.alpha=0,this.tweenMgr.Create(this.step_3,s.LINEAR_EASE,{x:r.x+30,y:r.y-50,alpha:0},{x:r.x,y:r.y,alpha:1},.3,.15),this.tweenMgr.SetCallback(this.step_3,function(){e.tweenMgr.Remove(e.step_3),e.stepCount=4,e.canSwitchState=!0}),this.step_3.visible=!0;break;case 4:var a={x:this.step_4.x,y:this.step_4.y};this.step_4.y-=70,this.step_4.alpha=0,this.tweenMgr.Create(this.step_4,s.LINEAR_EASE,{x:a.x,y:a.y-70,alpha:0},{x:a.x,y:a.y,alpha:1},.3,.3),this.tweenMgr.SetCallback(this.step_4,function(){e.tweenMgr.Remove(e.step_4),e.stepCount=5,e.canSwitchState=!0}),this.step_4.visible=!0}break;case this.STATE.HIDE:this.tweenMgr.Create(this.step_1,s.LINEAR_EASE,{alpha:1},{alpha:0},.21,1),this.tweenMgr.Create(this.step_2,s.LINEAR_EASE,{alpha:1},{alpha:0},.2,1),this.tweenMgr.Create(this.step_3,s.LINEAR_EASE,{alpha:1},{alpha:0},.2,1),this.tweenMgr.Create(this.step_4,s.LINEAR_EASE,{alpha:1},{alpha:0},.2,1),this.tweenMgr.SetCallback(this.step_1,function(){e.tweenMgr.Remove(e.step_1),e.tweenMgr.Remove(e.step_2),e.tweenMgr.Remove(e.step_3),e.tweenMgr.Remove(e.step_4),e.step_1.visible=!1,e.step_2.visible=!1,e.step_3.visible=!1,e.step_4.visible=!1,e.canSwitchState=!0});break;case this.STATE.SHOW_ANIM:switch(this.stepAnimCount){case 1:this.step_5.SetFrame(22),this.step_5.alpha=0,this.tweenMgr.Create(this.step_5,s.LINEAR_EASE,{alpha:0},{alpha:1},.2,0),this.tweenMgr.SetCallback(this.step_5,function(){e.tweenMgr.Remove(e.step_5),e.tweenMgr.Create(e.step_5,s.LINEAR_EASE,{alpha:1},{alpha:1},.6,0),e.tweenMgr.SetCallback(e.step_5,function(){e.tweenMgr.Remove(e.step_5),e.tweenMgr.Create(e.step_5,s.LINEAR_EASE,{alpha:1},{alpha:0},.2,0),e.tweenMgr.SetCallback(e.step_5,function(){e.stepAnimCount=2,e.canSwitchState=!0})})}),this.step_5.visible=!0;break;case 2:this.step_5.SetFrame(23),this.step_5.alpha=0,this.tweenMgr.Create(this.step_5,s.LINEAR_EASE,{alpha:0},{alpha:1},.2,0),this.tweenMgr.SetCallback(this.step_5,function(){e.tweenMgr.Remove(e.step_5),e.tweenMgr.Create(e.step_5,s.LINEAR_EASE,{alpha:1},{alpha:1},.6,0),e.tweenMgr.SetCallback(e.step_5,function(){e.tweenMgr.Remove(e.step_5),e.tweenMgr.Create(e.step_5,s.LINEAR_EASE,{alpha:1},{alpha:0},.2,0),e.tweenMgr.SetCallback(e.step_5,function(){e.stepAnimCount=3,e.canSwitchState=!0})})});break;case 3:this.step_5.SetFrame(24),this.step_5_txt.visible=!0,this.step_5.alpha=0,this.tweenMgr.Create(this.step_5,s.LINEAR_EASE,{alpha:0},{alpha:1},.2,0),this.tweenMgr.SetCallback(this.step_5,function(){e.tweenMgr.Remove(e.step_5),e.tweenMgr.Create(e.step_5,s.LINEAR_EASE,{alpha:1},{alpha:1},.6,0),e.tweenMgr.SetCallback(e.step_5,function(){e.tweenMgr.Remove(e.step_5),e.tweenMgr.Create(e.step_5,s.LINEAR_EASE,{alpha:1},{alpha:1},1,0),e.tweenMgr.SetCallback(e.step_5,function(){e.step_5.visible=!1,e.stepAnimCount=4,e.canSwitchState=!0})})})}break;case this.STATE.END:StateIngame._EndGame()}}},{key:"Update",value:function(t){switch(this.isPause||this.tweenMgr.Update(t),this.gui.Update(t),this.state){case this.STATE.EMPTY:case this.STATE.INIT:break;case this.STATE.ACTIVE:this.canSwitchState&&(this.canSwitchState=!1,this.SetState(this.STATE.STEP_BY_STEP));break;case this.STATE.STEP_BY_STEP:this.canSwitchState&&(this.canSwitchState=!1,this.stepCount<5?this.SetState(this.STATE.STEP_BY_STEP):this.SetState(this.STATE.HIDE));break;case this.STATE.HIDE:this.canSwitchState&&(this.canSwitchState=!1,this.SetState(this.STATE.SHOW_ANIM));break;case this.STATE.SHOW_ANIM:this.canSwitchState&&(this.canSwitchState=!1,this.stepAnimCount>3?this.SetState(this.STATE.END):this.SetState(this.STATE.SHOW_ANIM));break;case this.STATE.END:}if(window._show_touchzone&&this.btnExit){var e=this.btnExit.GetTransformRect();debugLayer.drawRect(e.x,e.y,e.width,e.height)}}},{key:"TouchHandler",value:function(t){switch(t.target){case this.btnExit:Input.IsTouchUp(t)&&StateIngame.Back()}}}]),e}(PIXI.Container);t.exports=u},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(t){function e(){n(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.mArrLine=[],t}return a(e,t),o(e,[{key:"Update",value:function(t){if(GameDefine.IS_DEBUG){this.lineStyle(2,65280,1,.5);for(var e=0;e<this.mArrLine.length;e+=2)if(this.mArrLine[e].z>Camera.GetPosition().z&&this.mArrLine[e+1].z>Camera.GetPosition().z){var i=Camera.GetDrawPosition(this.mArrLine[e]),n=Camera.GetDrawPosition(this.mArrLine[e+1]);this.moveTo(i.x,i.y),this.lineTo(n.x,n.y),this.closePath()}}}},{key:"Clear",value:function(){GameDefine.IS_DEBUG&&(this.clear(),this.mArrLine=[])}},{key:"DrawLine",value:function(t,e){GameDefine.IS_DEBUG&&(this._AddLinePoint(t),this._AddLinePoint(e))}},{key:"DrawBody",value:function(t){if(GameDefine.IS_DEBUG){var e=void 0;e={x:t.x,y:t.y,z:t.z},this._AddLinePoint(e),e.x+=t.width,this._AddLinePoint(e),this._AddLinePoint(e),e.z+=t.depth,this._AddLinePoint(e),this._AddLinePoint(e),e.x-=t.width,this._AddLinePoint(e),this._AddLinePoint(e),e.z-=t.depth,this._AddLinePoint(e),e={x:t.x,y:t.y+t.height,z:t.z},this._AddLinePoint(e),e.x+=t.width,this._AddLinePoint(e),this._AddLinePoint(e),e.z+=t.depth,this._AddLinePoint(e),this._AddLinePoint(e),e.x-=t.width,this._AddLinePoint(e),this._AddLinePoint(e),e.z-=t.depth,this._AddLinePoint(e),e={x:t.x,y:t.y,z:t.z},this._AddLinePoint(e),e.y+=t.height,this._AddLinePoint(e),e={x:t.x+t.width,y:t.y,z:t.z},this._AddLinePoint(e),e.y+=t.height,this._AddLinePoint(e),e={x:t.x+t.width,y:t.y,z:t.z+t.depth},this._AddLinePoint(e),e.y+=t.height,this._AddLinePoint(e),e={x:t.x,y:t.y,z:t.z+t.depth},this._AddLinePoint(e),e.y+=t.height,this._AddLinePoint(e)}}},{key:"_AddLinePoint",value:function(t){this.mArrLine.push({x:t.x,y:t.y,z:t.z})}}]),e}(PIXI.Graphics);t.exports=s},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(14),h=function(t){function e(){n(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),i=0;return t.STATE={},t.STATE.INACTIVE=i++,t.STATE.INIT=i++,t.STATE.NORMAL=i++,t.STATE.FRENZY=i++,t.mFrenzyBar,t.mFrenzyBarMask,t.mEffectContainer,t.mIsFirstInit=!0,t.mState,t.mPercent,t.mFrenzyScore,t}return a(e,t),o(e,[{key:"Init",value:function(){this._SetState(this.STATE.INIT)}},{key:"_SetState",value:function(t){switch(this.mState=t,this.mState){case this.STATE.INACTIVE:this.visible=!1;break;case this.STATE.INIT:if(this.visible=!1,this.mIsFirstInit){this.mFrenzyBar=GuiManager.GetGui(5).GetObject(8),this.mFrenzyBarMask=new PIXI.Graphics,this.mFrenzyBarMask.position.set(this.mFrenzyBar.position.x+this.mFrenzyBar.GetRect().x,this.mFrenzyBar.position.y+this.mFrenzyBar.GetRect().y),this.mFrenzyBarMask.clear(),this.mFrenzyBarMask.beginFill(16711680,.5),this.mFrenzyBarMask.drawRect(0,0,this.mFrenzyBar.GetRect().width,this.mFrenzyBar.GetRect().height),this.mFrenzyBarMask.endFill(),this.mEffectContainer=new PIXI.Container;for(var e=[{spriteId:"3",animId:SPRITE_GAME1_ANIM_BLUR_EFFECT},{spriteId:"3",animId:SPRITE_GAME1_ANIM_BLUR_EFFECT},{spriteId:"3",animId:SPRITE_GAME1_ANIM_BLUR_EFFECT},{spriteId:"3",animId:SPRITE_GAME1_ANIM_BLUR_EFFECT},{spriteId:"3",animId:SPRITE_GAME1_ANIM_THUNDER_EFFECT},{spriteId:"3",animId:SPRITE_GAME1_ANIM_THUNDER_EFFECT},{spriteId:"3",animId:SPRITE_GAME1_ANIM_THUNDER_EFFECT},{spriteId:"3",animId:SPRITE_GAME1_ANIM_THUNDER_EFFECT},{spriteId:"3",animId:SPRITE_GAME1_ANIM_LIGHT_EFFECT},{spriteId:"3",animId:SPRITE_GAME1_ANIM_LIGHT_EFFECT},{spriteId:"3",animId:SPRITE_GAME1_ANIM_LIGHT_EFFECT},{spriteId:"3",animId:SPRITE_GAME1_ANIM_LIGHT_EFFECT}],i=0;i<e.length;i++){var n=e[i],r=new s(n.spriteId);r.SetAnim(n.animId,!0),this.mEffectContainer.addChild(r)}this.addChild(this.mFrenzyBarMask),this.addChild(this.mEffectContainer),this.mFrenzyBar.mask=this.mFrenzyBarMask}this.mFrenzyBarMask.scale.set(0,1),this.mEffectContainer.alpha=0,this.Resize(),this.mIsFirstInit=!1;break;case this.STATE.NORMAL:this.visible=!0,this._ResetFrenzyScore();break;case this.STATE.FRENZY:this.visible=!0,this.mPercent=0,ParticleMgr.SetTextFrenzy(),GameDefine.PlaySound(SFX_FRENZY)}}},{key:"Update",value:function(t){switch(this.mState){case this.STATE.INACTIVE:case this.STATE.INIT:break;case this.STATE.NORMAL:this.mEffectContainer.alpha=GameDefine.MoveToTarget(this.mEffectContainer.alpha,0,2,t),this._UpdateMask(t),this._UpdateFrenzyEffect(t),this.mFrenzyBarMask.scale.x>=1&&StateIngame.GetTime()>=2&&this._SetState(this.STATE.FRENZY);break;case this.STATE.FRENZY:this.mEffectContainer.alpha=GameDefine.MoveToTarget(this.mEffectContainer.alpha,1,2,t),this.mPercent=GameDefine.MoveToTarget(this.mPercent,1,1/GameDefine.FRENZY_LONG_TIME,t),this._UpdateMask(t),this._UpdateFrenzyEffect(t),this.mPercent>=1&&this._SetState(this.STATE.NORMAL)}}},{key:"Resize",value:function(){if(void 0!=this.mEffectContainer)for(var t=[{x:0*APP.GetWidth(),y:0*APP.GetHeight(),scaleX:1,scaleY:1},{x:1*APP.GetWidth(),y:0*APP.GetHeight(),scaleX:-1,scaleY:1},{x:1*APP.GetWidth(),y:1*APP.GetHeight(),scaleX:-1,scaleY:-1},{x:0*APP.GetWidth(),y:1*APP.GetHeight(),scaleX:1,scaleY:-1},{x:0*APP.GetWidth(),y:.5*APP.GetHeight(),angle:0*Math.PI},{x:1*APP.GetWidth(),y:.5*APP.GetHeight(),angle:0*Math.PI},{x:.5*APP.GetWidth(),y:0*APP.GetHeight(),angle:.5*Math.PI},{x:.5*APP.GetWidth(),y:1*APP.GetHeight(),angle:.5*Math.PI},{x:0*APP.GetWidth(),y:0*APP.GetHeight(),angle:0*Math.PI},{x:1*APP.GetWidth(),y:0*APP.GetHeight(),angle:.5*Math.PI},{x:1*APP.GetWidth(),y:1*APP.GetHeight(),angle:1*Math.PI},{x:0*APP.GetWidth(),y:1*APP.GetHeight(),angle:1.5*Math.PI}],e=0;e<t.length;e++){var i=this.mEffectContainer.children[e],n=t[e];i.position.set(n.x,n.y),void 0!=n.angle&&(i.rotation=n.angle),void 0!=n.scaleX&&(i.scale.set(1,1),i.scale.set(n.scaleX*(.5*APP.GetWidth()/i.GetRect().width),n.scaleY*(.5*APP.GetHeight()/i.GetRect().height)))}}},{key:"Active",value:function(){switch(this.mState){case this.STATE.INIT:this._SetState(this.STATE.NORMAL)}}},{key:"AddFrenzyScore",value:function(t){switch(this.mState){case this.STATE.NORMAL:this.mFrenzyScore=Math.min(this.mFrenzyScore+t,GameDefine.FRENZY_SCORE_MAX)}}},{key:"IsFrenzy",value:function(){return this.mState==this.STATE.FRENZY}},{key:"_ResetFrenzyScore",value:function(){this.mFrenzyScore=0}},{key:"_UpdateMask",value:function(t){switch(this.mState){case this.STATE.NORMAL:var e=this.mFrenzyScore/GameDefine.FRENZY_SCORE_MAX;this.mFrenzyBarMask.scale.set(GameDefine.MoveToTarget(this.mFrenzyBarMask.scale.x,e,Math.max(3*Math.abs(e-this.mFrenzyBarMask.scale.x),.2),t),1);break;case this.STATE.FRENZY:this.mFrenzyBarMask.scale.set(1-this.mPercent,1)}}},{key:"_UpdateFrenzyEffect",value:function(t){if(this.mEffectContainer.alpha>0)for(var e=0;e<this.mEffectContainer.children.length;e++)this.mEffectContainer.children[e].Update(t)}}]),e}(PIXI.Container);t.exports=h},function(t,e,i){"use strict";(function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(151),a=function(){function t(){e(this,t);var i=0;this.TWO_PI=2*Math.PI,this.HALF_PI=Math.PI/2,i=0,this.ALIGN={TOP_LEFT:i++,TOP_RIGHT:i++,TOP_CENTER:i++,BOTTOM_LEFT:i++,BOTTOM_RIGHT:i++,BOTTOM_CENTER:i++,MIDDLE_LEFT:i++,MIDDLE_RIGHT:i++,MIDDLE_CENTER:i++},this.container=new PIXI.Container,this.graphic=new PIXI.Graphics,this.container.addChild(this.graphic)}return n(t,[{key:"Update",value:function(t){this.graphic.clear()}},{key:"RandElement",value:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return arguments[Utils.RandInt(0,arguments.length-1)]}},{key:"Constrain",value:function(t,e,i){return t=Math.max(e,t),t=Math.min(i,t)}},{key:"ToRadian",value:function(t){return t/180*Math.PI}},{key:"ToAngle",value:function(t){return t/Math.PI*180}},{key:"CheckInternet",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return new Promise(function(e,i){var n=new XMLHttpRequest;n.onreadystatechange=function(){n.readyState>=2&&200==n.status&&(n.abort(),e())},n.onerror=function(){i("ping error")},n.ontimeout=function(){i("ping timeout")},n.timeout=t,n.open("GET","https://oms.gameloft.com/ping?time="+(new Date).getTime(),!0),n.send()})}},{key:"Align",value:function(t,e,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;switch(e){case this.ALIGN.TOP_LEFT:t.x=0,t.y=0;break;case this.ALIGN.TOP_RIGHT:t.x=-i,t.y=0;break;case this.ALIGN.TOP_CENTER:t.x=-i/2,t.y=0;break;case this.ALIGN.BOTTOM_LEFT:t.x=0,t.y=-n;break;case this.ALIGN.BOTTOM_RIGHT:t.x=-i,t.y=-n;break;case this.ALIGN.BOTTOM_CENTER:t.x=-i/2,t.y=-n;break;case this.ALIGN.MIDDLE_LEFT:t.x=0,t.y=-n/2;break;case this.ALIGN.MIDDLE_RIGHT:t.x=-i,t.y=-n/2;break;case this.ALIGN.MIDDLE_CENTER:t.x=-i/2,t.y=-n/2}t.x+=r,t.y+=a}},{key:"GetRatio",value:function(){var t=window.innerWidth,e=window.innerHeight;return Math.max(t,e)/Math.min(t,e)}},{key:"GetRatioName",value:function(){var t={iphone:16/9,ipad:4/3,s8:2220/1080,iphoneX:2436/1125},e=this.GetRatio(),i=9999999,n="iphone";for(var r in t){var a=Math.abs(e-t[r]);a<i&&(i=a,n=r)}return n}},{key:"IsIPhoneX",value:function(){return-1!=DeviceInfo.DEVICE_MODEL.indexOf("iPhone10")}},{key:"ShowIphoneX",value:function(){this.iphoneXMask||(this.iphoneXMask=new PIXI.Graphics,APP.mask=this.iphoneXMask),this.iphoneXMask.beginFill(),this.DrawIphoneX(this.iphoneXMask),this.iphoneXMask.endFill()}},{key:"IsSoundPlaying",value:function(t){return!!(AudioManager.source[t]&&!AudioManager.source[t].loop&&AudioManager.context.currentTime-AudioManager.audioStartTime[t]<AudioManager.audioBuffer[t].duration)}},{key:"IsAllSoundFinish",value:function(t){for(var e=0;e<t.length;e++){var i=t[e];if(this.IsSoundPlaying(i))return!1}return!0}},{key:"StopAllSound",value:function(t){for(var e=0;e<t.length;e++){var i=t[e];AudioManager.Stop(i)}}},{key:"UpdateGuiAnchor",value:function(t){if(t)for(var e=void 0,i=t.children.length,n=0;n<i;n++)switch(e=t.children[n],e.auroraAnchor){case r.ANCHOR_LEFT:break;case r.ANCHOR_LEFT_TOP:case r.ANCHOR_LEFT_CENTER:case r.ANCHOR_LEFT_BOTTOM:break;case r.ANCHOR_RIGHT:e.position.x=e.posX+2*APP.offsetX;break;case r.ANCHOR_RIGHT_TOP:case r.ANCHOR_RIGHT_CENTER:case r.ANCHOR_RIGHT_BOTTOM:case r.ANCHOR_TOP:case r.ANCHOR_TOP_CENTER:break;case r.ANCHOR_BOTTOM:e.position.y=e.posY+2*APP.offsetY;break;case r.ANCHOR_BOTTOM_CENTER:e.position.y=e.posY+2*APP.offsetY,e.position.x=e.posX+APP.offsetX;break;case r.ANCHOR_HCENTER_VCENTER:e.position.x=e.posX+APP.offsetX,e.position.y=e.posY+APP.offsetY}}},{key:"GetRectOfObjectAnchor",value:function(t,e){var i={x:t.x,y:t.y,width:t.width,height:t.height};switch(e){case r.ANCHOR_LEFT:break;case r.ANCHOR_LEFT_TOP:case r.ANCHOR_LEFT_CENTER:case r.ANCHOR_LEFT_BOTTOM:break;case r.ANCHOR_RIGHT:i.x=t.x+2*APP.offsetX;break;case r.ANCHOR_RIGHT_TOP:case r.ANCHOR_RIGHT_CENTER:case r.ANCHOR_RIGHT_BOTTOM:case r.ANCHOR_TOP:case r.ANCHOR_TOP_CENTER:break;case r.ANCHOR_BOTTOM:i.y=t.y+2*APP.offsetY;break;case r.ANCHOR_BOTTOM_CENTER:i.y=t.y+2*APP.offsetY,i.x=t.x+APP.offsetX;break;case r.ANCHOR_HCENTER_VCENTER:i.x=t.x+APP.offsetX,i.y=t.y+APP.offsetY}return i}},{key:"SortByZIndex",value:function(t){t.sort(function(t,e){return(t.zIndex||0)-(e.zIndex||0)})}},{key:"GetRect",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:StateIngame,n=t.GetRect(e).Clone(),r=t;r&&r!=i;)n.x*=r.scale.x,n.y*=r.scale.y,n.width*=r.scale.x,n.height*=r.scale.y,n.x+=r.position.x,n.y+=r.position.y,n.x-=r.pivot.x*r.scale.x,n.y-=r.pivot.y*r.scale.y,r=r.parent;return n}},{key:"DrawLine",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graphic,e=arguments[1],i=arguments[2],n=arguments[3],r=arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:16711680,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1;t.lineStyle(o,a,s),t.moveTo(e,i),t.lineTo(n,r)}},{key:"DrawSquare",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graphic,e=arguments[1],i=arguments[2],n=arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:16711680,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;this.DrawRect(t,e,i,n,n,r,a,o)}},{key:"DrawRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graphic,e=arguments[1],i=arguments[2],n=arguments[3],r=arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:16711680,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1;t.lineStyle(o,a,s),"number"==typeof e?t.drawRect(e,i,n,r):t.drawRect(e.x,e.y,e.width,e.height)}},{key:"DrawArc",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graphic,e=arguments[1],i=arguments[2],n=arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.TWO_PI,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],h=arguments.length>8&&void 0!==arguments[8]&&arguments[8],u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:16711680,l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:2,c=arguments.length>11&&void 0!==arguments[11]?arguments[11]:1,f=1.5*Math.PI;r=f+r,a=f+a,o%=this.TWO_PI,r%=this.TWO_PI,a=0==a?this.TWO_PI:a%this.TWO_PI,r+=o,a+=o,s?(t.lineStyle(l,u,c),t.moveTo(e,i),t.arc(e,i,n,r,a,h),t.closePath()):(t.lineStyle(l,u,c),t.arc(e,i,n,r,a,h))}},{key:"DrawCircle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graphic,e=arguments[1],i=arguments[2],n=arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:16711680,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;this.DrawEllipse(t,e,i,n,n,r,a,o)}},{key:"DrawEllipse",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graphic,e=arguments[1],i=arguments[2],n=arguments[3],r=arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:16711680,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1;t.lineStyle(o,a,s),t.drawEllipse(e,i,n,r)}},{key:"DrawIphoneX",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graphic,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16711680,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=Math.max(APP.GetWidth(),APP.GetHeight()),a=Math.min(APP.GetWidth(),APP.GetHeight()),o=void 0,s=void 0,h=void 0,u=void 0;GameConfig.isHostGamePortrait?(o=155,s=50,h=60,u=80,t.lineStyle(i,e,n),t.moveTo(2,2+u),t.lineTo(2,r-(2+u)),t.quadraticCurveTo(2,r-2,2+h,r-2),t.lineTo(o,r-2),t.quadraticCurveTo(o,r-s,o+40,r-s),t.lineTo(a-o-40,r-s),t.quadraticCurveTo(a-o,r-s,a-o,r-2),t.lineTo(a-(2+h),r-2),t.quadraticCurveTo(a-2,r-2,a-2,r-u),t.lineTo(a-2,2+u),t.quadraticCurveTo(a-2,2,a-(2+h),2),t.lineTo(a-o,2),t.quadraticCurveTo(a-o,s,a-o-40,s),t.lineTo(o+40,s),t.quadraticCurveTo(o,s,o,2),t.lineTo(2+h,2),t.quadraticCurveTo(2,2,2,2+u),t.closePath()):(o=50,s=155,h=80,u=60,t.lineStyle(i,e,n),t.moveTo(2,2+u),t.lineTo(2,s),t.quadraticCurveTo(o,s,o,s+40),t.lineTo(o,a-s-40),t.quadraticCurveTo(o,a-s,2,a-s),t.lineTo(2,a-(2+u)),t.quadraticCurveTo(2,a-2,2+h,a-2),t.lineTo(r-(2+h),a-2),t.quadraticCurveTo(r-2,a-2,r-2,a-(2+u)),t.lineTo(r-2,a-s),t.quadraticCurveTo(r-o,a-s,r-o,a-s-40),t.lineTo(r-o,s+40),t.quadraticCurveTo(r-o,s,r-2,s),t.lineTo(r-2,2+u),t.quadraticCurveTo(r-2,2,r-(2+h),2),t.lineTo(2+h,2),t.quadraticCurveTo(2,2,2,2+u),t.closePath())}},{key:"DrawText",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.container,e=arguments[1],i=arguments[2],n=arguments[3],r=arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:50,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:16711680,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"Arial";t[e]||(t[e]=new PIXI.Text,t.addChild(t[e])),t[e].text=i,t[e].style.fontSize=a,t[e].style.fill=o,t[e].style.fontFamily=s,t[e].position.x=n,t[e].position.y=r}},{key:"FillSquare",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graphic,e=arguments[1],i=arguments[2],n=arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:16711680,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;this.FillRect(t,e,i,n,n,r,a)}},{key:"FillRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graphic,e=arguments[1],i=arguments[2],n=arguments[3],r=arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:16711680,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;t.beginFill(a,o),this.DrawRect(t,e,i,n,r,void 0,0),t.endFill()}},{key:"FillArc",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graphic,e=arguments[1],i=arguments[2],n=arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.TWO_PI,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:16711680,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1;t.beginFill(s,h),this.DrawArc(t,e,i,n,r,a,o,!0,!1,void 0,0),t.endFill()}},{key:"FillCircle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graphic,e=arguments[1],i=arguments[2],n=arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:16711680,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;this.FillEllipse(t,e,i,n,n,r,a)}},{key:"FillEllipse",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graphic,e=arguments[1],i=arguments[2],n=arguments[3],r=arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:16711680,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;t.beginFill(a,o),this.DrawEllipse(t,e,i,n,r,void 0,0),t.endFill()}}]),t}();t.Helper=new a}).call(e,i(21))},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function t(e,i,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},h=i(157),u=function(t){function e(){n(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.mBody={width:100,height:100,depth:100,offsetX:-50,offsetY:-100,offsetZ:-50},t.mIsFirstInitItem=!0,t}return a(e,t),o(e,[{key:"Update",value:function(t){switch(s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"Update",this).call(this,t),this.mState){case this.STATE.COLLISION_WITH_PLAYER:if(this.mAnimation.isFinish)return this._SetState(this.STATE.INACTIVE),null}}}]),e}(h);t.exports=u},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function t(){n(this,t),this.MODULE_00=[[11,0,0],[0,0,0],[0,0,0],[0,12,0],[2,0,0],[0,0,0],[0,0,11],[0,0,0],[0,0,2],[0,12,0]],this.MODULE_01=[[0,0,0],[0,0,0],[2,11,0],[0,0,0],[0,0,0],[0,0,12],[0,0,0],[12,0,2],[0,0,0],[2,0,11]],this.MODULE_02=[[0,0,0],[12,0,0],[0,0,0],[0,11,0],[0,0,0],[11,0,0],[0,0,2],[2,0,0],[0,0,12],[0,0,0]],this.MODULE_03=[[0,11,0],[0,0,0],[0,0,0],[12,0,0],[0,0,0],[0,0,0],[0,11,0],[2,0,0],[0,0,2],[12,0,0]],this.MODULE_04=[[0,0,0],[0,0,0],[11,0,2],[2,0,0],[0,0,0],[0,0,12],[0,0,0],[0,11,0],[0,0,0]],this.MODULE_05=[[0,0,0],[0,12,0],[0,0,0],[2,0,11],[0,0,0],[0,0,2],[0,0,0],[12,0,0],[0,0,0],[0,0,0]],this.MODULE_06=[[0,0,0],[0,0,0],[0,11,0],[0,0,0],[0,0,0],[12,0,2],[0,0,0],[2,0,0],[0,0,0],[0,0,11]],this.MODULE_07=[[0,0,0],[0,12,0],[0,0,0],[2,0,0],[0,0,0],[11,0,2],[0,0,0],[2,0,0],[0,0,0],[0,0,12]],this.MODULE_08=[[0,0,0],[0,0,0],[11,0,0],[0,0,0],[0,0,0],[0,12,0],[0,0,2],[2,0,0],[0,0,11],[0,0,0]],this.MODULE_09=[[0,0,0],[0,12,0],[0,0,0],[0,0,2],[11,0,0],[0,0,0],[2,0,0],[0,0,12],[0,0,0],[11,0,2]],this.MODULE_10=[[0,0,0],[0,11,0],[0,0,0],[0,0,0],[12,0,0],[0,0,0],[0,0,0],[2,0,11],[0,0,0],[0,12,2]],this.MODULE_SPANW_NULL=[0,0,0],this.MODULE_SPECIAL=[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],this.MODULE_NULL=[[0,0,0]],this.MODULE_TUTORIAL=[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[2,0,2],[0,0,0],[11,0,0],[0,0,0],[0,0,12],[0,0,0],[0,0,0]],this.LEVEL_01=[this.MODULE_08,this.MODULE_09,this.MODULE_10],this.LEVEL_02=[this.MODULE_04,this.MODULE_05,this.MODULE_06,this.MODULE_07],this.LEVEL_03=[this.MODULE_00,this.MODULE_01,this.MODULE_02,this.MODULE_03],this.ARR_LEVEL=[this.LEVEL_01,this.LEVEL_02,this.LEVEL_03]};t.exports=r},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(){n(this,t),this.mLevelIndex,this.mModuleIndex,this.mRowIndex,this.isAddedModuleSpawn=!1,this.moduleAdded=null,this.indexModuleAdded=null,this.indexRowAdded=null,this.arrSpawn=[],this.arrCheck=[],this.isSpawnKatayna=!1}return r(t,[{key:"RandomLevel",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isSpawnSpecial=!1,this.mLevelIndex=t,this.mModuleIndex=0,this.mRowIndex=-1}},{key:"GetNextRow",value:function(t){var e=LevelDefine.ARR_LEVEL[this.mLevelIndex],i=e[this.mModuleIndex];return this.mRowIndex++,this.mRowIndex>=i.length&&(this.mRowIndex=0,this.mModuleIndex++,this.mModuleIndex>=e.length&&(this.mModuleIndex=0),i=e[this.mModuleIndex]),{row:i[this.mRowIndex],indexModule:this.mModuleIndex,indexRow:this.mRowIndex}}},{key:"GetNextRowToChange",value:function(){var t=LevelDefine.ARR_LEVEL[this.mLevelIndex],e=this.mModuleIndex,i=t[e],n=this.mRowIndex+1;return n>=i.length&&(n=0,e=this.mModuleIndex+1,e>=t.length&&(e=0),i=t[e]),i[n]}},{key:"AddModuleTutorial",value:function(){LevelDefine.ARR_LEVEL[this.mLevelIndex][0]=LevelDefine.MODULE_TUTORIAL}},{key:"ChangeLevel",value:function(t){this.mLevelIndex=t,this.mModuleIndex=0,this.mRowIndex=-1}},{key:"RemoveModuleTutorial",value:function(){LevelDefine.ARR_LEVEL[this.mLevelIndex][0]=LevelDefine.MODULE_NULL}}]),t}();t.exports=a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(){n(this,t),this.OBJECT_TYPE={},this.OBJECT_TYPE.NO_THING=0,this.OBJECT_TYPE.ITEM_01=1,this.OBJECT_TYPE.ITEM_02=2,this.OBJECT_TYPE.OBSTACLE_01=11,this.OBJECT_TYPE.OBSTACLE_02=12,this.OBJECT_TYPE.OBSTACLE_03=13,this.OBJECT_TYPE.OBSTACLE_04=14,this.OBJECT_INFOR=[{TYPE:this.OBJECT_TYPE.ITEM_01,SCORE:GameDefine.SCORE_ITEM,FRENZY_SCORE:GameDefine.SCORE_FRENZY_ITEM,ARR_SOUND:GameDefine.SOUND_COLLECT_ITEM,ANIM_INIT_CENTER:0,ANIM_INIT_LEFT:0,ANIM_INIT_RIGHT:0,ANIM_INIT_IS_LOOP:!1,ANIM_ACTIVE_CENTER:40,ANIM_ACTIVE_LEFT:40,ANIM_ACTIVE_RIGHT:40,ANIM_ACTIVE_IS_LOOP:!0,ANIM_COLLISION_CENTER:41,ANIM_COLLISION_LEFT:41,ANIM_COLLISION_RIGHT:41,ANIM_COLLISION_LOOP:!1,CAN_COLLECT:!1},{TYPE:this.OBJECT_TYPE.ITEM_02,SCORE:GameDefine.SCORE_ITEM,FRENZY_SCORE:GameDefine.SCORE_FRENZY_ITEM,ARR_SOUND:GameDefine.SOUND_COLLECT_ITEM_KAYTANA,ANIM_INIT_CENTER:0,ANIM_INIT_LEFT:0,ANIM_INIT_RIGHT:0,ANIM_INIT_IS_LOOP:!1,COLOR:0,ANIM_ACTIVE_CENTER:43,ANIM_ACTIVE_LEFT:43,ANIM_ACTIVE_RIGHT:43,ANIM_ACTIVE_IS_LOOP:!0,ANIM_COLLISION_CENTER:31,ANIM_COLLISION_LEFT:31,ANIM_COLLISION_RIGHT:31,ANIM_COLLISION_LOOP:!1,CAN_COLLECT:!0},{TYPE:this.OBJECT_TYPE.OBSTACLE_01,SCORE:GameDefine.SCORE_OBSTACLE,FRENZY_SCORE:GameDefine.SCORE_FRENZY_OBSTACLE,ARR_SOUND:GameDefine.SOUND_COLLECT_OBSTACLE_CHAR_01,COLLECT_SOUND:15,ANIM_INIT_CENTER:0,ANIM_INIT_LEFT:0,ANIM_INIT_RIGHT:0,ANIM_INIT_IS_LOOP:!1,ANIM_ACTIVE_CENTER:8,ANIM_ACTIVE_LEFT:8,ANIM_ACTIVE_RIGHT:8,ANIM_ACTIVE_IS_LOOP:!0,ANIM_COLLISION_CENTER:6,ANIM_COLLISION_LEFT:6,ANIM_COLLISION_RIGHT:6,ANIM_COLLISION_LOOP:!0,CAN_COLLECT:!0},{TYPE:this.OBJECT_TYPE.OBSTACLE_02,SCORE:GameDefine.SCORE_OBSTACLE,FRENZY_SCORE:GameDefine.SCORE_FRENZY_OBSTACLE,ARR_SOUND:GameDefine.SOUND_COLLECT_OBSTACLE_CHAR_01,COLLECT_SOUND:15,ANIM_INIT_CENTER:0,ANIM_INIT_LEFT:0,ANIM_INIT_RIGHT:0,ANIM_INIT_IS_LOOP:!1,ANIM_ACTIVE_CENTER:7,ANIM_ACTIVE_LEFT:7,ANIM_ACTIVE_RIGHT:7,ANIM_ACTIVE_IS_LOOP:!0,ANIM_COLLISION_CENTER:5,ANIM_COLLISION_LEFT:5,ANIM_COLLISION_RIGHT:5,ANIM_COLLISION_LOOP:!0,CAN_COLLECT:!0}],this.INFOR_01={},this.INFOR_01.SPRITE_SELECT_CHAR="2",this.INFOR_01.ANIM_SELECT_CHAR=25,this.INFOR_01.CHAR_TEXT=28,this.INFOR_01.INGAME_SPRITE_ID="4",this.INFOR_01.ANIM_INIT=0,this.INFOR_01.ANIM_RUN=1,this.INFOR_01.ANIM_JUMP=1,this.INFOR_01.ANIM_TURN_LEFT=1,this.INFOR_01.ANIM_TURN_RIGHT=1,this.INFOR_01.FRENZY_SPRITE_ID="4",this.INFOR_01.FRENZY_EFFECT_01=0,this.INFOR_01.FRENZY_EFFECT_02=0,this.INFOR_01.SHADOW_SPRITE_ID="4",this.INFOR_01.ANIM_SHADOW=0,this.INFOR_01.FRAME_COMIC_STEP_1=10,this.INFOR_01.FRAME_COMIC_STEP_4=14,this.INFOR_01.ANIM_FASTER=2,this.INFOR_02={},this.INFOR_02.SPRITE_SELECT_CHAR="2",this.INFOR_02.ANIM_SELECT_CHAR=26,this.INFOR_02.CHAR_TEXT=29,this.INFOR_02.INGAME_SPRITE_ID="4",this.INFOR_02.ANIM_INIT=0,this.INFOR_02.ANIM_RUN=3,this.INFOR_02.ANIM_JUMP=3,this.INFOR_02.ANIM_TURN_LEFT=3,this.INFOR_02.ANIM_TURN_RIGHT=3,this.INFOR_02.FRENZY_SPRITE_ID="4",this.INFOR_02.FRENZY_EFFECT_01=0,this.INFOR_02.FRENZY_EFFECT_02=0,this.INFOR_02.SHADOW_SPRITE_ID="4",this.INFOR_02.ANIM_SHADOW=0,this.INFOR_02.FRAME_COMIC_STEP_1=11,this.INFOR_02.FRAME_COMIC_STEP_4=18,this.INFOR_02.ANIM_FASTER=4,this.CHARACTER_INFOR={currentIndex:0,ARR_INFOR:[this.INFOR_01,this.INFOR_02]}}return r(t,[{key:"UpdateObjectInfor",value:function(){switch(this.CHARACTER_INFOR.currentIndex){case 0:this.GetObjectInfor(this.OBJECT_TYPE.OBSTACLE_01).ARR_SOUND=GameDefine.SOUND_COLLECT_OBSTACLE_CHAR_01,this.GetObjectInfor(this.OBJECT_TYPE.OBSTACLE_02).ARR_SOUND=GameDefine.SOUND_COLLECT_OBSTACLE_CHAR_01;break;case 1:this.GetObjectInfor(this.OBJECT_TYPE.OBSTACLE_01).ARR_SOUND=GameDefine.SOUND_COLLECT_OBSTACLE_CHAR_02,this.GetObjectInfor(this.OBJECT_TYPE.OBSTACLE_02).ARR_SOUND=GameDefine.SOUND_COLLECT_OBSTACLE_CHAR_02}}},{key:"GetObjectInfor",value:function(t){for(var e=this.OBJECT_INFOR.length,i=0;i<e;i++)if(this.OBJECT_INFOR[i].TYPE==t)return this.OBJECT_INFOR[i]}}]),t}();t.exports=a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(281),o=i(286),s=function(){function t(){n(this,t);var e=0;this.STATE={},this.STATE.INACTIVE=e++,this.STATE.INIT=e++,this.STATE.ACTIVE=e++,this.mArrItem=[],this.mArrObstacle=[],this.mState,this.mPositionZ,this.ratio_spawn_katana=GameDefine.RATIO_TO_SPAWN_KAYTANA}return r(t,[{key:"Init",value:function(){this._SetState(this.STATE.INIT)}},{key:"_SetState",value:function(t){switch(this.mState=t,this.mState){case this.STATE.INACTIVE:break;case this.STATE.INIT:this.ratio_spawn_katana=GameDefine.RATIO_TO_SPAWN_KAYTANA,this._InactiveArrObject(this.mArrItem),this._InactiveArrObject(this.mArrObstacle),this.ratio_spawn_katana,StateIngame.isFirstLaunch?LevelMgr.RandomLevel():StateIngame.isFirstLaunch||1!=StateIngame.levelRand?LevelMgr.RandomLevel(2):LevelMgr.RandomLevel(0),this.mPositionZ=GameDefine.OBJECT_MGR_START_Z;break;case this.STATE.ACTIVE:}}},{key:"Update",value:function(t){switch(this.mState){case this.STATE.INACTIVE:case this.STATE.INIT:break;case this.STATE.ACTIVE:this._UpdateMakeObject(t),this._UpdateArrObject(this.mArrItem,t),this._UpdateArrObject(this.mArrObstacle,t),this._DrawDebugPath()}}},{key:"Active",value:function(){switch(this.mState){case this.STATE.INIT:this._SetState(this.STATE.ACTIVE)}}},{key:"GetArrItem",value:function(){return this.mArrItem}},{key:"GetArrObstacle",value:function(){return this.mArrObstacle}},{key:"_InactiveArrObject",value:function(t){for(var e=t.length,i=0;i<e;i++)t[i].SetStateInactive()}},{key:"_UpdateArrObject",value:function(t,e){for(var i=t.length,n=0;n<i;n++)t[n].Update(e)}},{key:"_DrawDebugPath",value:function(){if(GameDefine.IS_DEBUG)for(var t=0;t<GameDefine.NUMBER_OF_LANE;t++){var e=(t-(GameDefine.NUMBER_OF_LANE-1)/2)*GameDefine.LANE_WIDTH;Debug.DrawLine({x:e,y:0,z:Camera.GetPosition().z+100},{x:e,y:0,z:Camera.GetPosition().z+1e5})}}},{key:"_GetObject",value:function(t,e,i){for(var n=t.length,r=0;r<n;r++)if(t[r].IsStateInactive())return t[r];var a=new e;return t.push(a),i.addChild(a),a}},{key:"_UpdateMakeObject",value:function(t){if(this.mPositionZ<=Player.GetPosition().z+GameDefine.OBJECT_MGR_OFFSET_Z_WITH_PLAYER){for(var e=LevelMgr.GetNextRow(this.mArrItem),i=e.row,n=(e.indexModule,e.indexRow,i.length),r=0;r<n;r++){var s=void 0,h=i[r];switch(h){case ObjectDefine.OBJECT_TYPE.NO_THING:break;case ObjectDefine.OBJECT_TYPE.ITEM_01:case ObjectDefine.OBJECT_TYPE.ITEM_02:s=this._GetObject(this.mArrItem,a,Scene);break;case ObjectDefine.OBJECT_TYPE.OBSTACLE_01:case ObjectDefine.OBJECT_TYPE.OBSTACLE_02:case ObjectDefine.OBJECT_TYPE.OBSTACLE_03:case ObjectDefine.OBJECT_TYPE.OBSTACLE_04:s=this._GetObject(this.mArrObstacle,o,Scene)}if(void 0!=s)if(s.SetPosition({x:(r-(n-1)/2)*GameDefine.LANE_WIDTH,y:0,z:this.mPositionZ}),h==ObjectDefine.OBJECT_TYPE.ITEM_02){s.Init(!1);var u=ObjectDefine.GetObjectInfor(ObjectDefine.OBJECT_TYPE.ITEM_02);u=this.RandomColor(u),s.SetInfor(u)}else{s.Init(),s.SetStateActive();var l=ObjectDefine.GetObjectInfor(h);l=this.RandomGlitch(l),s.SetInfor(l)}}this.mPositionZ+=GameDefine.LEVEL_ROW_DISTANCE}else{var c=!0,f=!1,d=void 0;try{for(var p,m=this.mArrItem[Symbol.iterator]();!(c=(p=m.next()).done);c=!0){var v=p.value;v&&!v.visible&&!v.IsStateInactive()&&v.INFOR.TYPE==ObjectDefine.OBJECT_TYPE.ITEM_02&&v.mPosition.z<=Player.GetPosition().z+GameDefine.OBJECT_MGR_OFFSET_Z_WITH_PLAYER_SPAWN_KAYTANA&&(100*Math.random()>this.ratio_spawn_katana&&StateIngame.mState!=StateIngame.STATE.TIME_UP?(AudioManager.Play(16),v.Init(!0)):v.SetStateInactive())}}catch(t){f=!0,d=t}finally{try{!c&&m.return&&m.return()}finally{if(f)throw d}}}}},{key:"RandomColor",value:function(t){return t.COLOR=Utils.RandInt(0,2),t.CAN_GLITCH=!(Utils.RandInt(1,10)<5),t.CAN_GLITCH?t.ANIM_ACTIVE_CENTER=37+t.COLOR:t.ANIM_ACTIVE_CENTER=47+t.COLOR,t.ANIM_ACTIVE_LEFT=t.ANIM_ACTIVE_CENTER,t.ANIM_ACTIVE_RIGHT=t.ANIM_ACTIVE_CENTER,t.ANIM_INIT_CENTER=43+t.COLOR,t.ANIM_INIT_LEFT=43+t.COLOR,t.ANIM_INIT_RIGHT=43+t.COLOR,t.ANIM_COLLISION_CENTER=31+t.COLOR,t.ANIM_COLLISION_LEFT=31+t.COLOR,t.ANIM_COLLISION_RIGHT=31+t.COLOR,t}},{key:"RandomGlitch",value:function(t){var e=t;if(e.TYPE==ObjectDefine.OBJECT_TYPE.ITEM_01){Utils.RandInt(1,10)>3?(e.ANIM_ACTIVE_CENTER=1,e.ANIM_ACTIVE_LEFT=1,e.ANIM_ACTIVE_RIGHT=1):(e.ANIM_ACTIVE_CENTER=40,e.ANIM_ACTIVE_LEFT=40,e.ANIM_ACTIVE_RIGHT=40)}return e}}]),t}();t.exports=s},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=i(157),s=i(14),h=function(t){function e(){n(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.mBody={width:100,height:-10,depth:100,offsetX:-50,offsetY:0,offsetZ:-50},t.mAnimation=new s("4"),t.mAnimation.scale.set(1.5),t.mIsFirstInitItem=!0,t}return a(e,t),e}(o);t.exports=h},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(160),o=i(288),s=(i(46),function(){function t(){n(this,t);var e=0;this.STATE={},this.STATE.INACTIVE=e++,this.STATE.INIT=e++,this.STATE.ACTIVE=e++,this.mArrParticle=[],this.mArrParticleUI=[],this.arrPlus=[],this.mState}return r(t,[{key:"Init",value:function(){this._SetState(this.STATE.INIT)}},{key:"_SetState",value:function(t){switch(this.mState=t,this.mState){case this.STATE.INACTIVE:break;case this.STATE.INIT:this._ResetArrParticle(this.mArrParticle),this._ResetArrParticle(this.mArrParticleUI);break;case this.STATE.ACTIVE:}}},{key:"Update",value:function(t){switch(this.mState){case this.STATE.INACTIVE:case this.STATE.INIT:break;case this.STATE.ACTIVE:this._UpdateArrParticle(this.mArrParticle,t),this._UpdateArrParticle(this.mArrParticleUI,t)}}},{key:"Active",value:function(){switch(this.mState){case this.STATE.INIT:this._SetState(this.STATE.ACTIVE)}}},{key:"SetScoreParticle",value:function(t,e){if(t>=0){var i=this._GetObject(this.mArrParticle,a,Scene);i.Init(),t>0&&this.arrPlus.push(i);i.SetLifeTime(1),i.SetScoreTexture(t,"2",GameDefine.SCORE_TEXTURE_ARR_SIGN_ID,t>0?GameDefine.SCORE_COLLECT_PLUS_ONE_TEXTURE:GameDefine.SCORE_TEXTURE_ARR_NUMBER_ID_STYLE_02);var n=GuiManager.GetGui(5).GetObject(6);Player.GetPosition().z;var r=Player.GetPosition(),o=Player.GetPosition().z-1;i.SetArrPosition([[0,r.x],[1,-(Player.x-r.x-n.x)]],[[0,r.y],[1,-(Player.y-n.y)]],[[0,o],[1,o+1*Player.mSpeed.z*1]]),0==t?i.SetArrAlpha([[0,0],[.2,.8],[.4,1],[1,0]]):i.SetArrAlpha([[0,1],[2.5,0]]),i.SetArrScale([[0,0],[.2,1],[.3,.7],[1,.4]]),i.SetStateActive()}}},{key:"SetTextTimeUp",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._GetObject(this.mArrParticleUI,o,UIContainer),i=(parseInt("6")+parseInt(window.languageIndex)).toString();e.Init(),t?(e.SetLifeTime(3),e.SetAnimation(i,0,!1)):(e.SetLifeTime(3),e.SetAnimation(i,1,!0)),e.SetArrPosition([[0,.5*APP.GetWidth()],[1,.5*APP.GetWidth()]],[[0,.5*APP.GetHeight()-100],[1,.5*APP.GetHeight()-100]],[]),t?(e.SetArrAlpha([[0,1],[0,1],[10,1]]),e.SetArrScale([[0,0],[0,1.3],[10,1.3]]),e.SetDarkBg()):(e.SetArrAlpha([[0,0],[.2,1],[1,1]]),e.SetArrScale([[0,0],[.3,1.3],[.3,1.3],[.4,1.3],[2,1.3]]),e.SetShineEffect()),e.mAnimation.visible=!1,Player.animCollect.SetAnim(46,!0),setTimeout(function(){e.SetStateActive(),e.mAnimation.visible=!0},300)}},{key:"SetTextFrenzy",value:function(){var t=this._GetObject(this.mArrParticleUI,o,UIContainer);t.Init(),t.SetLifeTime(1.5),t.SetAnimation("2",11,!1),t.SetArrPosition([[0,.5*APP.GetWidth()],[1,.5*APP.GetWidth()]],[[0,.5*APP.GetHeight()],[1,.5*APP.GetHeight()]],[]),t.SetArrAlpha([[0,0],[.2,1],[1,1]]),t.SetArrScale([[0,0],[.2,1],[1,1]]),t.SetStateActive()}},{key:"_ResetArrParticle",value:function(t){for(var e=t.length,i=0;i<e;i++)t[i].SetStateInactive()}},{key:"_UpdateArrParticle",value:function(t,e){for(var i=t.length,n=0;n<i;n++)t[n].Update(e)}},{key:"_GetObject",value:function(t,e,i){for(var n=t.length,r=0;r<n;r++)if(t[r].IsStateInactive())return t[r];var a=new e;return t.push(a),i.addChild(a),a}}]),t}());t.exports=s},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(160),h=function(t){function e(){return n(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return a(e,t),o(e,[{key:"UpdateDrawPosition",value:function(){this.mDrawPosition=this.mPosition,this.position.set(this.mDrawPosition.x,this.mDrawPosition.y),this.scale.set(this.mScale)}},{key:"_UpdateInactive",value:function(){this.mPercent>=1&&this._SetState(this.STATE.INACTIVE)}}]),e}(s);t.exports=h},function(t,e,i){"use strict";(function(e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function t(e,i,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},h=i(65),u=i(14),l=i(17),c=i(291),f=i(31),d=i(38),p=function(t){function i(){n(this,i);var t=r(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));t.mBody={width:100,height:100,depth:100,offsetX:-50,offsetY:-100,offsetZ:-50};var e=Object.keys(t.STATE).length;return t.STATE.INIT=e++,t.STATE.RUN=e++,t.STATE.JUMP=e++,t.STATE.TURN_LEFT=e++,t.STATE.TURN_RIGHT=e++,t.TIMES_TO_DIE=0,t.ITEMS_COLLECT=0,e=0,t.EFFECT_STATE={},t.EFFECT_STATE.NORMAL=e++,t.EFFECT_STATE.IMMORTAL=e++,t.EFFECT_STATE.FRENZY=e++,t.INFOR,t.mAnimation,t.mFrenzyEffect01,t.mFrenzyEffect02,t.mShadow,t.mIsFirstInit=!0,t.mEffectState,t.mSpeed={},t.mTouchDownPosition,t.mTouchUpPosition,t.mTouchDownTime,t.mTouchUpTime,t.mArrNextState,t.mEffectPercent,t.tweenMgr=new d,t.containerEffectKaytana=new PIXI.Container,t.ACCELE_Z=GameDefine.CHAR_ACCELERATION,t.isTouch=!1,t.isKey=!1,t.keys=[],t}return a(i,t),o(i,[{key:"Init",value:function(){this.ACCELE_Z=GameDefine.CHAR_ACCELERATION,this.ITEMS_COLLECT=0,this._SetState(this.STATE.INIT)}},{key:"_SetState",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(this.mState){case this.STATE.JUMP:GameDefine.PlaySound(SFX_MC_LAND);break;case this.STATE.RUN:}switch(s(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"_SetState",this).call(this,t),this.mState){case this.STATE.INACTIVE:this.visible=!1;break;case this.STATE.INIT:this.visible=!1,this.TIMES_TO_DIE=0,this.mIsFirstInit&&(this.mShadow=new c,Scene.addChild(this),Scene.addChild(this.mShadow)),this.SetPosition(GameDefine.PLAYER_START_POSITION),this.mTouchDownPosition=null,this.mTouchUpPosition=null,this.ClearArrNextState(),this._SetEffectState(this.EFFECT_STATE.NORMAL),this.mShadow.SetAnimationSprite(this.INFOR.SHADOW_SPRITE_ID),this.mShadow.SetTarget(this),this.mShadow.Init(),this.mAnimation.SetAnim(this.INFOR.ANIM_INIT,!1),this.mShadow.SetAnimation(this.INFOR.ANIM_SHADOW,!1),this.mIsFirstInit=!1;break;case this.STATE.RUN:this.visible=!0,this.mAnimation.animId==this.INFOR.ANIM_RUN&&1==this.mAnimation.isLoop||(this.mAnimation.SetAnim(this.INFOR.ANIM_RUN,!0),this.mShadow.SetAnimation(this.INFOR.ANIM_SHADOW,!0)),this._SetSpeed(GameDefine.PLAYER_RUN_SPEED,e);break;case this.STATE.JUMP:this.visible=!0,this.mAnimation.SetAnim(this.INFOR.ANIM_JUMP,!1),this.mShadow.SetAnimation(this.INFOR.ANIM_SHADOW,!1),this._SetSpeed(GameDefine.PLAYER_JUMP_SPEED),GameDefine.PlaySound(SFX_MC_JUMP);break;case this.STATE.TURN_LEFT:this.mPosition.x>GameDefine.LANE_X_MIN?(this.visible=!0,this.mAnimation.SetAnim(this.INFOR.ANIM_TURN_LEFT,!1),this.mShadow.SetAnimation(this.INFOR.ANIM_SHADOW,!1),this.mTargetX=Math.max(this.mPosition.x-GameDefine.LANE_WIDTH,GameDefine.LANE_X_MIN),this._SetSpeed(GameDefine.PLAYER_TURN_LEFT_SPEED,!0)):this._SetState(this.STATE.RUN,!0);break;case this.STATE.TURN_RIGHT:this.mPosition.x<GameDefine.LANE_X_MAX?(this.visible=!0,this.mAnimation.SetAnim(this.INFOR.ANIM_TURN_RIGHT,!1),this.mShadow.SetAnimation(this.INFOR.ANIM_SHADOW,!1),this.mTargetX=Math.min(this.mPosition.x+GameDefine.LANE_WIDTH,GameDefine.LANE_X_MAX),this._SetSpeed(GameDefine.PLAYER_TURN_RIGHT_SPEED,!0)):this._SetState(this.STATE.RUN,!0)}}},{key:"Update",value:function(t){switch(this.tweenMgr.Update(t),this.mState){case this.STATE.INACTIVE:case this.STATE.INIT:break;case this.STATE.RUN:this._UpdateSpeed(t),this._UpdatePosition(t),Camera.UpdatePosition(t),this._UpdateEffectState(t),this._UpdateCheckCollision(),this.mAnimation.Update(t),Debug.DrawBody(this.mBody),this.mShadow.Update(t),this.mArrNextState.length>0&&this._SetState(this.mArrNextState.shift());break;case this.STATE.JUMP:this._UpdateSpeed(t),this._UpdatePosition(t),Camera.UpdatePosition(t),this._UpdateEffectState(t),this._UpdateCheckCollision(),this.mAnimation.Update(t),Debug.DrawBody(this.mBody),this.mShadow.Update(t),this.mPosition.y>=0&&this._SetState(this.STATE.RUN);break;case this.STATE.TURN_LEFT:case this.STATE.TURN_RIGHT:this._UpdateSpeed(t),this._UpdatePosition(t),Camera.UpdatePosition(t),this._UpdateEffectState(t),this._UpdateCheckCollision(),this.mAnimation.Update(t),Debug.DrawBody(this.mBody),this.mShadow.Update(t),this.mPosition.x==this.mTargetX&&this._SetState(this.STATE.RUN,!0)}}},{key:"_SetEffectState",value:function(t){switch(this.mEffectState=t,this.mEffectState){case this.EFFECT_STATE.NORMAL:this.mFrenzyEffect01.visible=!1,this.mFrenzyEffect02.visible=!1,this.alpha=1;break;case this.EFFECT_STATE.IMMORTAL:this.mFrenzyEffect01.visible=!1,this.mFrenzyEffect02.visible=!1,this.alpha=1,this.mEffectPercent=0;break;case this.EFFECT_STATE.FRENZY:this.mFrenzyEffect01.visible=!0,this.mFrenzyEffect02.visible=!0,this.alpha=1}}},{key:"_UpdateEffectState",value:function(t){switch(this.mEffectState){case this.EFFECT_STATE.NORMAL:break;case this.EFFECT_STATE.IMMORTAL:this.mEffectPercent=GameDefine.MoveToTarget(this.mEffectPercent,1,1/GameDefine.IMMORTAL_LONG_TIME,t),this.alpha=(Math.sin(5*this.mEffectPercent*(2*Math.PI)+.5*Math.PI)+1)/2*.7+.3,this.mEffectPercent>=1&&this._SetEffectState(this.EFFECT_STATE.NORMAL);break;case this.EFFECT_STATE.FRENZY:this.mFrenzyEffect01.Update(t),this.mFrenzyEffect02.Update(t)}}},{key:"KeyHandler",value:function(t){if(!this.isTouch)switch(this.mState){case this.STATE.RUN:case this.STATE.JUMP:case this.STATE.TURN_LEFT:case this.STATE.TURN_RIGHT:!Input.IsKeyDown(t)||"ArrowRight"!=t.key&&"ArrowLeft"!=t.key||(this.isKey||this.keys[37]||this.keys[39]||("ArrowRight"==t.key?this.mArrNextState.push(this.STATE.TURN_RIGHT):this.mArrNextState.push(this.STATE.TURN_LEFT),this.isKey=!0),this.keys[t.keyCode]=!0),Input.IsKeyUp(t)&&(this.isKey=!1,this.keys[t.keyCode]=!1)}}},{key:"TouchHandler",value:function(t){if(GameDefine.IsSingleTouch(t)&&!this.isKey)switch(this.mState){case this.STATE.RUN:case this.STATE.JUMP:case this.STATE.TURN_LEFT:case this.STATE.TURN_RIGHT:if(Input.IsTouchDown(t))this.isTouch=!0,this.mTouchDownTime=Date.now(),this.mTouchDownPosition={x:Input.touchX,y:Input.touchY};else if(Input.IsTouchMove(t)){if(this.mTouchMovePosition={x:Input.touchX+Input.touchDX,y:Input.touchY+Input.touchDY},null!=this.mTouchDownPosition&&this.mTouchMovePosition){var e=(GameDefine.GetDistance(this.mTouchDownPosition,this.mTouchMovePosition),this.mTouchMovePosition.x-this.mTouchDownPosition.x);e>APP.GetWidth()/10?(this.mArrNextState.push(this.STATE.TURN_RIGHT),this.mTouchDownPosition=null):e<-APP.GetWidth()/10&&(this.mArrNextState.push(this.STATE.TURN_LEFT),this.mTouchDownPosition=null)}}else if(Input.IsTouchUp(t)){if(this.isTouch=!1,this.mTouchUpTime=Date.now(),this.mTouchUpPosition={x:Input.touchX+Input.touchDX,y:Input.touchY+Input.touchDY},null!=this.mTouchDownPosition){var i=GameDefine.GetDistance(this.mTouchDownPosition,this.mTouchUpPosition),n=(this.mTouchUpTime-this.mTouchDownTime)/1e3,r=i/n;if(r>500){var a=(GameDefine.GetAngle(this.mTouchDownPosition,this.mTouchUpPosition)+360)%360;GameDefine.CheckValueInRange(a,-50,50)||GameDefine.CheckValueInRange(a,310,410)?this.mArrNextState.push(this.STATE.TURN_RIGHT):GameDefine.CheckValueInRange(a,130,230)&&this.mArrNextState.push(this.STATE.TURN_LEFT)}}this.mTouchDownPosition=null}}else this.mTouchDownPosition=null}},{key:"SetInfor",value:function(t){this.INFOR=t,void 0!=this.mAnimation&&void 0!=this.mAnimation.parent&&this.mAnimation.parent.removeChild(this.mAnimation),this.mAnimation=new u(this.INFOR.INGAME_SPRITE_ID),this.animCollect=new u("2"),this.animCollect.SetAnim(46,!1),this.mAnimation.scale.set(1.5),this.animCollect.scale.set(1.5),this.animCollect.visible=!1,this.addChild(this.animCollect),this.addChild(this.mAnimation),this.addChild(this.containerEffectKaytana),void 0!=this.mFrenzyEffect01&&void 0!=this.mFrenzyEffect01.parent&&this.mFrenzyEffect01.parent.removeChild(this.mFrenzyEffect01),this.mFrenzyEffect01=new u(this.INFOR.FRENZY_SPRITE_ID),this.addChild(this.mFrenzyEffect01),void 0!=this.mFrenzyEffect02&&void 0!=this.mFrenzyEffect02.parent&&this.mFrenzyEffect02.parent.removeChild(this.mFrenzyEffect02),this.mFrenzyEffect02=new u(this.INFOR.FRENZY_SPRITE_ID),this.addChild(this.mFrenzyEffect02)}},{key:"GetCharacterName",value:function(){return GLText.GetText(this.INFOR.CHAR_TEXT)}},{key:"Pause",value:function(){switch(this.mState){case this.STATE.RUN:}}},{key:"Resume",value:function(){switch(this.mState){case this.STATE.RUN:}}},{key:"Active",value:function(){switch(this.mState){case this.STATE.INIT:this.mShadow.SetStateActive(),this._SetState(this.STATE.RUN)}}},{key:"ClearArrNextState",value:function(){this.mArrNextState=[]}},{key:"NextStateIsTurnLeft",value:function(){return this.mArrNextState.length>0&&this.mArrNextState[0]==this.STATE.TURN_LEFT}},{key:"NextStateIsTurnRight",value:function(){return this.mArrNextState.length>0&&this.mArrNextState[0]==this.STATE.TURN_RIGHT}},{key:"NextStateIsJump",value:function(){return this.mArrNextState.length>0&&this.mArrNextState[0]==this.STATE.JUMP}},{key:"SetNextStateTurnLeft",value:function(){this.mArrNextState.push(this.STATE.TURN_LEFT)}},{key:"SetNextStateTurnRight",value:function(){this.mArrNextState.push(this.STATE.TURN_RIGHT)}},{key:"SetNextStateJump",value:function(){this.mArrNextState.push(this.STATE.JUMP)}},{key:"_SetSpeed",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.mSpeed.x=t.x,this.mSpeed.y=t.y,this.mSpeed.z=e?this.mSpeed.z:t.z}},{key:"_UpdateSpeed",value:function(t){switch(this.mState){case this.STATE.JUMP:this.mSpeed.y+=GameDefine.ACCELE_Y*t;break;case this.STATE.RUN:StateIngame.mState!=StateIngame.STATE.TUTORIAL&&(this.mSpeed.z=this.mSpeed.z>=GameDefine.CHAR_SPEED_MAX?this.mSpeed.z:this.mSpeed.z+this.ACCELE_Z)}}},{key:"_UpdatePosition",value:function(t){switch(this.animCollect&&this.animCollect.isFinish&&this.animCollect.visible?this.animCollect.visible=!1:this.animCollect&&this.animCollect.Update(!0),this.mState){case this.STATE.RUN:this.SetPosition({x:this.mPosition.x+this.mSpeed.x*t,y:this.mPosition.y+this.mSpeed.y*t,z:this.mPosition.z+this.mSpeed.z*t});break;case this.STATE.JUMP:this.SetPosition({x:this.mPosition.x+this.mSpeed.x*t,y:Math.min(this.mPosition.y+this.mSpeed.y*t,0),z:this.mPosition.z+this.mSpeed.z*t});break;case this.STATE.TURN_LEFT:case this.STATE.TURN_RIGHT:this.SetPosition({x:GameDefine.MoveToTarget(this.mPosition.x,this.mTargetX,this.mSpeed.x,t),y:this.mPosition.y+this.mSpeed.y*t,z:this.mPosition.z+this.mSpeed.z*t})}}},{key:"_UpdateCheckCollision",value:function(t){switch(this.mEffectState){case this.EFFECT_STATE.NORMAL:this.ITEMS_COLLECT<GameDefine.ITEMS_COLLECT&&StateIngame.mState!=StateIngame.STATE.TIME_UP&&(this._CheckCollisionWithItem(),this._CheckCollisionWithObstacle());break;case this.EFFECT_STATE.IMMORTAL:case this.EFFECT_STATE.FRENZY:this._CheckCollisionWithItem()}}},{key:"_CheckCollisionWithItem",value:function(){for(var t=ObjectMgr.GetArrItem(),i=t.length,n=0;n<i;n++){var r=t[n];r.IsCheckCollision()&&GameDefine.CheckCollisionTwoBody(this.GetBody(),r.GetBody())&&(this.animCollect.SetAnim(46,!1),this.animCollect.visible=!0,r.SetStateCollisionWithPlayer(!0),StateIngame.timeSet+=GameDefine.POWER_SMALL_THING,r.INFOR.CAN_COLLECT&&this.ITEMS_COLLECT<GameDefine.ITEMS_COLLECT&&r.visible&&(this.SetKaytanaCollectEffect(),this.ITEMS_COLLECT++),this.ITEMS_COLLECT>=GameDefine.ITEMS_COLLECT&&(StateIngame._SetState(StateIngame.STATE.TIME_UP,!1,!0),e.spawnSpecial&&(clearInterval(e.spawnSpecial),e.spawnSpecial=null)))}}},{key:"_CheckCollisionWithObstacle",value:function(){for(var t=this,i=ObjectMgr.GetArrObstacle(),n=i.length,r=0;r<n;r++){var a=i[r];if(GameDefine.CheckCollisionTwoBody(this.GetBody(),a.GetBody())){this.mSpeed.z=GameDefine.CHAR_SPEED_RESET,GameDefine.mVideoBg.playbackRate!=GameDefine.VIDEO_SPEED_RESET&&(GameDefine.mVideoBg.playbackRate=GameDefine.VIDEO_SPEED_RESET);var o=!0,s=!1,h=void 0;try{for(var u,l=ParticleMgr.arrPlus[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){u.value.visible=!1}}catch(t){s=!0,h=t}finally{try{!o&&l.return&&l.return()}finally{if(s)throw h}}ParticleMgr.arrPlus=[],e.resetSpeed&&(clearTimeout(e.resetSpeed),e.resetSpeed=null),e.resetSpeed=setTimeout(function(){GameDefine.mVideoBg.playbackRate=1,t.mSpeed.z=GameDefine.PLAYER_SPEED_Z},1e3*GameDefine.TIME_TO_RASING_SPEED);var c=!0,f=!1,d=void 0;try{for(var p,m=ParticleMgr.arrPlus[Symbol.iterator]();!(c=(p=m.next()).done);c=!0){p.value.visible=!1}}catch(t){f=!0,d=t}finally{try{!c&&m.return&&m.return()}finally{if(f)throw d}}ParticleMgr.arrPlus=[],a.SetStateCollisionWithPlayer(!0),this._SetEffectState(this.EFFECT_STATE.IMMORTAL)}else a.mPosition.z>=this.mPosition.z+500&&a.mPosition.z<=this.mPosition.z+1e3&&a.mState!=a.STATE.COLLISION_WITH_PLAYER&&a.visible&&0!=a.mAnimation.animId&&a.SetStateCollisionWithPlayer(!1)}}},{key:"SetKaytanaCollectEffect",value:function(){var t=this,e=new l("2");e.SetFrame(193),e.position=this.mAnimation.position,e.visible=!1,this.containerEffectKaytana.addChild(e),this.tweenMgr.Create(e,f.CUBIC_EASE_IN,{x:e.x,y:e.y,scale:1},{x:e.x,y:e.y,scale:5},.3,0),this.tweenMgr.SetCallback(e,function(){t.tweenMgr.Remove(e),e.visible=!1,t.containerEffectKaytana.removeChild(e)}),e.visible=!0}}]),i}(h);t.exports=p}).call(e,i(21))},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(t){function e(){n(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),i=0;return t.STATE={},t.STATE.INACTIVE=i++,t.STATE.INIT=i++,t.STATE.ACTIVE=i++,t.mState,t}return a(e,t),o(e,[{key:"Init",value:function(){this._SetState(this.STATE.INIT)}},{key:"_SetState",value:function(t){switch(this.mState=t,this.mState){case this.STATE.INACTIVE:case this.STATE.INIT:this.visible=!1;break;case this.STATE.ACTIVE:this.visible=!0}}},{key:"Update",value:function(t){switch(this.mState){case this.STATE.INACTIVE:case this.STATE.INIT:break;case this.STATE.ACTIVE:this._UpdateDrawPositionOfChildren(),this._SortChildren()}}},{key:"Active",value:function(){switch(this.mState){case this.STATE.INIT:this._SetState(this.STATE.ACTIVE)}}},{key:"_UpdateDrawPositionOfChildren",value:function(){for(var t=this.children.length,e=0;e<t;e++)this.children[e].UpdateDrawPosition()}},{key:"_SortChildren",value:function(){for(var t=0;t<this.children.length-1;t++)if(!this.children[t].IsStateInactive())for(var e=t+1;e<this.children.length;e++)if(!this.children[e].IsStateInactive()&&this.children[t].GetPosition().z<=this.children[e].GetPosition().z){var i=this.children[t];this.children[t]=this.children[e],this.children[e]=i}}}]),e}(PIXI.Container);t.exports=s},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function t(e,i,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},h=i(65),u=i(14),l=function(t){function e(){n(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),i=Object.keys(t.STATE).length;return t.STATE.INIT=i++,t.STATE.ACTIVE=i++,t.mShadowTarget,t.mAnimation,t}return a(e,t),o(e,[{key:"Init",value:function(){this._SetState(this.STATE.INIT)}},{key:"_SetState",value:function(t){switch(s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_SetState",this).call(this,t),this.mState){case this.STATE.INACTIVE:case this.STATE.INIT:this.visible=!1;break;case this.STATE.ACTIVE:this.visible=!0}}},{key:"Update",value:function(t){switch(this.mState){case this.STATE.INACTIVE:case this.STATE.INIT:break;case this.STATE.ACTIVE:this.SetPosition({x:this.mShadowTarget.GetPosition().x,y:0,z:this.mShadowTarget.GetPosition().z+.1}),this.UpdateDrawPosition()}}},{key:"SetStateActive",value:function(){this._SetState(this.STATE.ACTIVE)}},{key:"SetTarget",value:function(t){this.mShadowTarget=t}},{key:"SetAnimationSprite",value:function(t){void 0!=this.mAnimation&&void 0!=this.mAnimation.parent&&this.mAnimation.parent.removeChild(this.mAnimation),this.mAnimation=new u(t),this.addChild(this.mAnimation)}},{key:"SetAnimation",value:function(t,e){this.mAnimation.SetAnim(t,e)}}]),e}(h);t.exports=l},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();i(262);var s=function(t){function e(t){n(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.rect={x:0,y:0,width:0,height:0},i.rect.Clone=function(){return{x:i.rect.x,y:i.rect.y,width:i.rect.width,height:i.rect.height}},i.callback=null,i.autoUpdate=!1,i}return a(e,t),o(e,[{key:"Update",value:function(t){this.update(t),this.isFirstFinish&&this.callback&&(this.callback(),this.callback=null)}},{key:"GetRect",value:function(){return 0!=this.skeleton.data.width?(this.rect.width=this.skeleton.data.width,this.rect.height=this.skeleton.data.height,this.rect.x=-this.rect.width/2,this.rect.y=-this.rect.height):(this.rect.width=this.width,this.rect.height=this.height,this.rect.x=-this.rect.width/2,this.rect.y=-this.rect.height/2),this.rect}},{key:"AddAnim",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.state.addAnimation(0,t,e,i)}},{key:"SetAnim",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.skeleton.setToSetupPose(),this.state.clearTracks(),e&&n>0?(this.state.setAnimation(0,t,!1),this.SetCallback(function(){i.SetAnim(t,!0)})):this.state.setAnimation(0,t,e),this.state.tracks[0].delay=r,this.state.tracks[0].animationStart=n}},{key:"SetMix",value:function(t,e,i){this.stateData.setMix(t,e,i)}},{key:"SetSkin",value:function(t){this.skeleton.setSkin(null),this.skeleton.setSkinByName(t)}},{key:"SetCallback",value:function(t){this.callback=t}},{key:"SetAlign",value:function(t){this.GetRect();var e=this.rect.width/2,i=this.rect.height;Helper.Align(this,t,this.rect.width,this.rect.height,e,i)}},{key:"animId",get:function(){return this.state.tracks[0].animation.name}},{key:"isFinish",get:function(){return!this.loop&&this.isFirstFinish}},{key:"isFirstFinish",get:function(){return this.state.tracks[0].isComplete()}},{key:"isEachFinish",get:function(){return this.state.tracks[0].getAnimationTime()-TIME_EACH_FRAME<0}},{key:"currentTime",get:function(){return this.state.tracks[0].getAnimationTime()}},{key:"duration",get:function(){return this.state.tracks[0].animation.duration}},{key:"loop",get:function(){return this.state.tracks[0].loop}}]),e}(PIXI.spine.Spine);t.exports=s},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(){n(this,t)}return r(t,[{key:"SaveStatsOld",value:function(){}},{key:"SetFormat",value:function(t){}},{key:"SetScoreParam",value:function(t){}},{key:"SetPageInfo",value:function(t,e){}},{key:"SetPixelTracking",value:function(t,e){}},{key:"GetSourceGameGGI",value:function(){}},{key:"SendEventTracking",value:function(){}},{key:"SendPayload",value:function(){}}]),t}();t.exports=new a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(t){function e(){n(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),i=0;return t.STATE={},t.STATE.INIT=i++,t.STATE.STEP_01_MOVE=i++,t.STATE.STEP_02_PAUSE_SHOW_TUTORIAL_01=i++,t.STATE.STEP_03_MOVE=i++,t.STATE.STEP_04_PAUSE_SHOW_TUTORIAL_02=i++,t.STATE.STEP_05_MOVE=i++,t.STATE.STEP_06_PAUSE_SHOW_TUTORIAL_03=i++,t.STATE.STEP_07_MOVE_SHOW_TUTORIAL_03=i++,t.STATE.STEP_08_MOVE=i++,t.STATE.STEP_09_END=i++,t.timerCount=0,t.timeSkip=null,t.isPause=!1,t.mGui,t.mIsFirstInit=!0,t.mState,t.mPercent,t}return a(e,t),o(e,[{key:"Init",value:function(){this._SetState(this.STATE.INIT)}},{key:"_SetState",value:function(t){var e=this;switch(this.mState=t,this.mState){case this.STATE.INIT:this.visible=!1,this.mIsFirstInit&&(this.mGui=GuiManager.GetGui(9),this.addChild(this.mGui)),this.tutorial_tut_2=this.mGui.GetObject(4+window.languageIndex),this.mIsFirstInit=!1;break;case this.STATE.STEP_01_MOVE:this.visible=!0,this.mGui.alpha=0;break;case this.STATE.STEP_02_PAUSE_SHOW_TUTORIAL_01:GameDefine.mVideoBg.pause(),Player.ClearArrNextState(),Player.Pause(),this.mGui.GetObject(0).visible=!1,this.mGui.GetObject(1).visible=!1,this.tutorial_tut_2.visible=!0,this.mGui.GetObject(3).text="",this.mGui.GetObject(4).SetFrame(5),this.timeSkip=setInterval(function(){e.isPause||(e.timerCount+=50)},50);break;case this.STATE.STEP_03_MOVE:GameDefine.mVideoBg.play();break;case this.STATE.STEP_04_PAUSE_SHOW_TUTORIAL_02:this.timerCount=0,GameDefine.mVideoBg.pause(),Player.ClearArrNextState(),this.mGui.GetObject(0).visible=!0,this.mGui.GetObject(1).visible=!1,this.mGui.GetObject(3).text="",DeviceInfo.isBrowser?(this.mGui.GetObject(0).SetAnim(61,!0),this.mGui.GetObject(0).y+=70,DeviceInfo.isBrowser&&this.tutorial_tut_2.SetFrame(32)):(this.mGui.GetObject(0).SetAnim(23,!0),this.tutorial_tut_2.SetFrame(6));break;case this.STATE.STEP_05_MOVE:GameDefine.mVideoBg.play();break;case this.STATE.STEP_06_PAUSE_SHOW_TUTORIAL_03:GameDefine.mVideoBg.pause(),this.mPercent=0,this.mGui.GetObject(0).visible=!1,this.mGui.GetObject(1).visible=!1,this.mGui.GetObject(3).text=GLText.GetText(11);break;case this.STATE.STEP_07_MOVE_SHOW_TUTORIAL_03:GameDefine.mVideoBg.play();break;case this.STATE.STEP_08_MOVE:break;case this.STATE.STEP_09_END:GameDefine.mVideoBg.play(),Player.Resume(),this.visible=!1}}},{key:"Update",value:function(t){switch(this.mState){case this.STATE.INIT:break;case this.STATE.STEP_01_MOVE:this.mGui.alpha=GameDefine.MoveToTarget(this.mGui.alpha,0,1/.3,t),this.mGui.Update(t),Player.GetPosition().z>=8*GameDefine.LEVEL_ROW_DISTANCE&&this._SetState(this.STATE.STEP_02_PAUSE_SHOW_TUTORIAL_01);break;case this.STATE.STEP_02_PAUSE_SHOW_TUTORIAL_01:this.mGui.alpha=GameDefine.MoveToTarget(this.mGui.alpha,1,1/.3,t),this.mGui.Update(t),this.timerCount>=2e3&&this._SetState(this.STATE.STEP_04_PAUSE_SHOW_TUTORIAL_02),Player.ClearArrNextState();break;case this.STATE.STEP_03_MOVE:this.mGui.alpha=GameDefine.MoveToTarget(this.mGui.alpha,0,1/.3,t),this.mGui.Update(t),Player.GetPosition().z>=14*GameDefine.LEVEL_ROW_DISTANCE&&this._SetState(this.STATE.STEP_04_PAUSE_SHOW_TUTORIAL_02);break;case this.STATE.STEP_04_PAUSE_SHOW_TUTORIAL_02:this.mGui.Update(t),this.timerCount>=3e3?(this.timeSkip&&clearInterval(this.timeSkip),Player.ClearArrNextState(),this._SetState(this.STATE.STEP_09_END)):Player.NextStateIsTurnLeft()?(this.timeSkip&&clearInterval(this.timeSkip),Player.ClearArrNextState(),Player.SetNextStateTurnLeft(),this._SetState(this.STATE.STEP_09_END)):Player.NextStateIsTurnRight()?(this.timeSkip&&clearInterval(this.timeSkip),Player.ClearArrNextState(),Player.SetNextStateTurnRight(),this._SetState(this.STATE.STEP_09_END)):Player.ClearArrNextState();break;case this.STATE.STEP_05_MOVE:this.mGui.alpha=GameDefine.MoveToTarget(this.mGui.alpha,0,1/.3,t),this.mGui.Update(t),Player.GetPosition().z>=20*GameDefine.LEVEL_ROW_DISTANCE&&this._SetState(this.STATE.STEP_06_PAUSE_SHOW_TUTORIAL_03);break;case this.STATE.STEP_06_PAUSE_SHOW_TUTORIAL_03:this.mPercent=GameDefine.MoveToTarget(this.mPercent,1,.5,t),this.mGui.alpha=GameDefine.MoveToTarget(this.mGui.alpha,1,1/.3,t),this.mGui.Update(t),this.mPercent>=1&&this._SetState(this.STATE.STEP_07_MOVE_SHOW_TUTORIAL_03);break;case this.STATE.STEP_07_MOVE_SHOW_TUTORIAL_03:this.mGui.alpha=GameDefine.MoveToTarget(this.mGui.alpha,1,1/.3,t),this.mGui.Update(t),Player.GetPosition().z>=27*GameDefine.LEVEL_ROW_DISTANCE&&this._SetState(this.STATE.STEP_08_MOVE);break;case this.STATE.STEP_08_MOVE:this.mGui.alpha=GameDefine.MoveToTarget(this.mGui.alpha,0,1/.3,t),this.mGui.Update(t),Player.GetPosition().z>=30*GameDefine.LEVEL_ROW_DISTANCE&&this._SetState(this.STATE.STEP_09_END);break;case this.STATE.STEP_09_END:}}},{key:"TouchHandler",value:function(t){switch(this.mState){case this.STATE.STEP_02_PAUSE_SHOW_TUTORIAL_01:Input.IsTouchUp(t)&&this._SetState(this.STATE.STEP_04_PAUSE_SHOW_TUTORIAL_02);break;case this.STATE.STEP_04_PAUSE_SHOW_TUTORIAL_02:case this.STATE.STEP_05_MOVE:case this.STATE.STEP_07_MOVE_SHOW_TUTORIAL_03:case this.STATE.STEP_08_MOVE:case this.STATE.STEP_09_END:Player.TouchHandler(t)}}},{key:"KeyHandler",value:function(t){switch(this.mState){case this.STATE.STEP_02_PAUSE_SHOW_TUTORIAL_01:!Input.IsKeyUp(t)||"ArrowRight"!=t.key&&"ArrowLeft"!=t.key||this._SetState(this.STATE.STEP_04_PAUSE_SHOW_TUTORIAL_02);break;case this.STATE.STEP_04_PAUSE_SHOW_TUTORIAL_02:case this.STATE.STEP_05_MOVE:case this.STATE.STEP_07_MOVE_SHOW_TUTORIAL_03:case this.STATE.STEP_08_MOVE:case this.STATE.STEP_09_END:Player.KeyHandler(t)}}},{key:"Pause",value:function(){switch(this.isPause=!0,this.mState){case this.STATE.STEP_01_MOVE:case this.STATE.STEP_03_MOVE:case this.STATE.STEP_05_MOVE:case this.STATE.STEP_07_MOVE_SHOW_TUTORIAL_03:case this.STATE.STEP_08_MOVE:case this.STATE.STEP_09_END:GameDefine.mVideoBg.pause()}}},{key:"Resume",value:function(){switch(this.isPause=!1,this.mState){case this.STATE.STEP_01_MOVE:case this.STATE.STEP_03_MOVE:case this.STATE.STEP_05_MOVE:case this.STATE.STEP_07_MOVE_SHOW_TUTORIAL_03:case this.STATE.STEP_08_MOVE:case this.STATE.STEP_09_END:GameDefine.mVideoBg.play()}}},{key:"Active",value:function(){this._SetState(this.STATE.STEP_01_MOVE)}},{key:"IsUpdateObject",value:function(){switch(this.mState){case this.STATE.STEP_02_PAUSE_SHOW_TUTORIAL_01:case this.STATE.STEP_04_PAUSE_SHOW_TUTORIAL_02:case this.STATE.STEP_06_PAUSE_SHOW_TUTORIAL_03:return!1;default:return!0}}},{key:"IsFinish",value:function(){return this.mState==this.STATE.STEP_09_END}}]),e}(PIXI.Container);t.exports=s},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(){n(this,t)}return r(t,[{key:"Load",value:function(){}},{key:"Save",value:function(){}}]),t}();t.exports=new a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(){function t(){n(this,t);var e=0;this.STATE={},this.STATE.INACTIVE=e++,this.STATE.INIT=e++,this.STATE.STAND=e++,this.STATE.MOVING_LEFT=e++,this.STATE.MOVING_RIGHT=e++,this.mPosition={x:0,y:0},this.mState,this.mTargetX}return r(t,[{key:"Init",value:function(){this._SetState(this.STATE.INIT)}},{key:"_SetState",value:function(t){switch(this.mState=t,this.mState){case this.STATE.INACTIVE:case this.STATE.INIT:break;case this.STATE.STAND:var e=ObjectDefine.CHARACTER_INFOR.ARR_INFOR.length*GameDefine.SELECT_CHAR_OFFSET_X;this.SetPosition({x:(this.mPosition.x+e)%e,y:this.mPosition.y});break;case this.STATE.MOVING_LEFT:this.mTargetX=this.mPosition.x-GameDefine.SELECT_CHAR_OFFSET_X;break;case this.STATE.MOVING_RIGHT:this.mTargetX=this.mPosition.x+GameDefine.SELECT_CHAR_OFFSET_X}}},{key:"Update",value:function(t){switch(this.mState){case this.STATE.INACTIVE:case this.STATE.INIT:case this.STATE.STAND:break;case this.STATE.MOVING_LEFT:case this.STATE.MOVING_RIGHT:this._UpdatePositon(t),this.mPosition.x==this.mTargetX&&this._SetState(this.STATE.STAND)}}},{key:"SetPosition",value:function(t){this.mPosition.x=t.x,this.mPosition.y=t.y}},{key:"GetPosition",value:function(){return this.mPosition}},{key:"SetStateStand",value:function(){this._SetState(this.STATE.STAND)}},{key:"SetStateMoveLeft",value:function(){this._SetState(this.STATE.MOVING_LEFT)}},{key:"SetStateMoveRight",value:function(){this._SetState(this.STATE.MOVING_RIGHT)}},{key:"IsMovingFinish",value:function(){return this.mState==this.STATE.STAND}},{key:"GetDrawPosition",value:function(t){return{x:.5*APP.GetWidth()+(t.x-this.mPosition.x),y:.5*APP.GetHeight()+(t.y-this.mPosition.y)}}},{key:"_UpdatePositon",value:function(t){switch(this.mState){case this.STATE.MOVING_LEFT:case this.STATE.MOVING_RIGHT:this.SetPosition({x:GameDefine.MoveToTarget(this.mPosition.x,this.mTargetX,GameDefine.SELECT_CHAR_CAMERA_SPEED_X,t),y:this.mPosition.y})}}}]),t}();t.exports=a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(14),h=function(t){function e(){n(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),i=0;return t.STATE={},t.STATE.INACTIVE=i++,t.STATE.INIT=i++,t.STATE.ACTIVE=i++,t.INFOR,t.mAnimation,t.mPosition={x:0,y:0},t.mState,t}return a(e,t),o(e,[{key:"Init",value:function(){this._SetState(this.STATE.INIT)}},{key:"_SetState",value:function(t){switch(this.mState=t,this.mState){case this.STATE.INACTIVE:case this.STATE.INIT:this.visible=!1;break;case this.STATE.ACTIVE:this.visible=!0,this.mAnimation.SetAnim(this.INFOR.ANIM_SELECT_CHAR,!0)}}},{key:"Update",value:function(t){switch(this.mState){case this.STATE.INACTIVE:case this.STATE.INIT:break;case this.STATE.ACTIVE:this.mAnimation.Update(t),this._UpdateDrawPosition()}}},{key:"SetStateInactive",value:function(){this._SetState(this.STATE.INACTIVE)}},{key:"IsStateInactive",value:function(){return this.mState==this.STATE.INACTIVE}},{key:"SetStateActive",value:function(){this._SetState(this.STATE.ACTIVE)}},{key:"SetInfor",value:function(t){this.INFOR=t,void 0!=this.mAnimation&&void 0!=this.mAnimation.parent&&this.mAnimation.parent.removeChild(this.mAnimation),this.mAnimation=new s(this.INFOR.SPRITE_SELECT_CHAR),this.addChild(this.mAnimation)}},{key:"SetPosition",value:function(t){this.mPosition.x=t.x,this.mPosition.y=t.y}},{key:"_UpdateDrawPosition",value:function(){var t=SelectCamera.GetDrawPosition(this.mPosition);this.position.set(t.x,t.y)}}]),e}(PIXI.Container);t.exports=h},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(76),h=(i(46),i(77)),u=i(45),l=i(64),c=function(t){function e(){n(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.hitArea=new PIXI.Rectangle(0,0,GameConfig.bannerWidth,GameConfig.bannerHeight),t.isFirstClick=!1,t.interactive=!0,BANNER.AddChild(t),t}return a(e,t),o(e,[{key:"Load",value:function(){var t={loadType:PIXI.loaders.Resource.LOAD_TYPE.XHR},e=[{name:"imgBanner",url:Utils.OMSGetImage("banner.png"),options:t}];Utils.LoadAssets(e,this.LoadProgressHandler.bind(this),this.LoadCompleteHandler.bind(this),this.LoadErrorHandler.bind(this))}},{key:"Unload",value:function(){PIXI.loader.removeAllListeners(),PIXI.loader.reset()}},{key:"Update",value:function(t){var e=GuiManager.GetGui(GUI_BANNER);e&&e.Update(t)}},{key:"LoadProgressHandler",value:function(t,e){Utils.Log("StateBanner loading: "+e.name),Utils.Log("StateBanner progress: "+t.progress+"%")}},{key:"LoadErrorHandler",value:function(t){Utils.Log("StateBanner LoadErrorHandler: "+t)}},{key:"LoadCompleteHandler",value:function(){var t=this;Resource.GetAssetData(Utils.OMSGetGuiData(PACK_BANNER)).then(function(e){s.Load(e),u.Add(GUI_SPRITE_BANNER,PIXI.loader.resources.imgBanner.texture,h.Load(s.GetData(0)));var i=new l;i.Load(s.GetData(1)),GuiManager.Add(GUI_BANNER,i),s.Close(),t.addChild(GuiManager.GetGui(GUI_BANNER))}).catch(function(t){Utils.Log("Preload load error")}),window.mraid&&mraid.addEventListener("sizeChange",function(t,e){gIsShowBanner?BANNER.Hide():BANNER.Show()}),gIsShowBanner||BANNER.Show()}},{key:"TouchHandler",value:function(t){switch(t.target){case this:if("pointerup"==t.type&&(StateManager.IsEmpty()&&this.Unload(),window.mraid?(mraid.setOrientationProperties({allowOrientationChange:!1,forceOrientation:"portrait"}),mraid.expand()):(window.REVIEW&&iView.setBanner(!1),BANNER.Hide()),!this.isFirstClick)){var e=GameConfig.Get3rdPartyImpression();e&&e.startsWith("http")&&(e=e.replace("[timestamp]",Date.now()),TrackingManager.SetPixelTracking(TrackingManager.TRACKING_ACTION_IMPRESSIONS,e)),TrackingManager.SendEventTracking(TrackingManager.TRACKING_ACTION_IMPRESSIONS),this.isFirstClick=!0}}}}]),e}(PIXI.Container);t.exports=new c},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=(i(156),i(58),i(78),function(t){function e(){n(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.state=0,t.score=0,t.timerMain=new Timer,t.interactive=!0,t}return a(e,t),o(e,[{key:"Load",value:function(){APP.AddChild(this),APP.Align(this),AudioManager.Stop(14),this.timerMain.SetDuration(3),null==this.btnExit&&(this.btnExit=GuiManager.GetGui(11).GetObject(1),this.btnExit.SetTouchable(!0)),this.bg||(this.bg=new PIXI.Sprite(LoaderCustom2.resources.imgBgComic.texture)),this.img||(this.img=GuiManager.GetGui(11).GetObject(0),this.unagami_name=GuiManager.GetGui(11).GetObject(2+window.languageIndex),this.result=GuiManager.GetGui(11).GetObject(7+window.languageIndex),this.result.visible=!0,this.unagami_name.visible=!0),this.bg.anchor.set(.5,.5),this.bg.position.set(APP.GetWidth()/2,APP.GetHeight()/2),StateIngame.GetWin()?(AudioManager.Play(25),this.img.SetFrame(111),this.unagami_name.SetFrame(16),this.result.SetFrame(17)):(AudioManager.Play(24),this.img.SetFrame(112),this.unagami_name.SetFrame(18),this.result.SetFrame(19)),this.addChild(this.bg),this.addChild(GuiManager.GetGui(11)),this.addChild(Utils.advertisement),window.isOutfit7&&(this.btnExit.visible=!1)}},{key:"Unload",value:function(){APP.RemoveChild(this)}},{key:"Pause",value:function(){AudioManager.Pause(0)}},{key:"Resume",value:function(){AudioManager.Play(0,!0)}},{key:"Back",value:function(){if(this.isFirstLaunch){if(this.btnExit.visible){this.Pause();var t=i(106);StateManager.PushState(t)}}else Utils.SendTrackingAndExit()}},{key:"Update",value:function(t){gIngameTimeSpent+=t,this.timerMain.Update(t),this.timerMain.JustFinished()&&this.EndGame(),GuiManager.Update(11,t)}},{key:"IsNewUser",value:function(){return!(!window.DEBUG&&!window.REVIEW)||GameConfig.isNewUser2}},{key:"GotReward",value:function(){this.isGotReward=!0}},{key:"IsGotReward",value:function(){return this.isGotReward}},{key:"GetTimeSpent",value:function(){return GameDefine2.GAME_TIMEOUT-this.timerMain.GetTime()}},{key:"StartGame",value:function(){this.isGameStarted=!0,this.IsNewUser(),window.isOutfit7||(this.btnExit.visible=!0)}},{key:"EndGame",value:function(){if(!StateIngame.isGotReward)try{saveReward(),StateIngame.isFirstLaunch&&(gIngameTimeSpent=gTotalTimeSpent)}catch(t){Utils.Log("ERROR!!!: save the reward fail: "+t.message)}StateIngame.isFirstLaunch=!1,StateManager.SwitchState(StateGameOver),TrackingManager.SetScoreParam(this.GetScore()),TrackingManager.SendEventTracking(TrackingManager.TRACKING_ACTION_COMPLETE_ENGAGEMENTS)}},{key:"SetState",value:function(t){this.state=t}},{key:"GetState",value:function(){return this.state}},{key:"GetScore",value:function(){return this.score}},{key:"PlaySound",value:function(t,e){AudioManager.IsSupportAudioAPI()&&AudioManager.Play(t,e)}},{key:"StopSound",value:function(t){AudioManager.IsSupportAudioAPI()&&AudioManager.Stop(t)}},{key:"ShowTutorial",value:function(){this.btnExit.visible=!1}},{key:"HideTutorial",value:function(){}},{key:"UpdateInterface",value:function(){var t=this.timerMain.GetTime();AudioManager.IsSupportAudioAPI()&&t<=GameDefine.GAME_TIMER_WARNING&&this.previousTime!=Math.floor(t)&&(this.previousTime=Math.floor(t));Math.ceil(this.timerMain.GetTime());this._UpdateTextTimer(this.timerMain.GetTime()),GuiManager.GetGui(6).GetObject(27).text=""}},{key:"TouchHandler",value:function(t){switch(t.target){case this.btnExit:Input.IsTouchUp(t)&&StateIngame.Back()}}}]),e}(PIXI.Container));t.exports=new s},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(156),h=i(58),u=i(78),l=function(t){function e(){n(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.state=0,t.score=0,t.previousTime=GameDefine.GAME_TIMER_WARNING,t.isGameStarted=!1,t.isTutorial=!0,t.isGotReward=!1,t.isFirstLaunch=!0,t.btnExit=null,t.GameMgr=null,t.timerMain=new Timer,t.interactive=!0,t}return a(e,t),o(e,[{key:"Load",value:function(){APP.AddChild(this),APP.Align(this),this.state=GameDefine2.GAME_STATE_NONE,this.score=0,TrackingManager.SetScoreParam(this.score),this.previousTime=GameDefine2.GAME_TIMER_WARNING,this.isGameStarted=!1,this.isTutorial=!0,h.Init(),this.timerMain.SetDuration(GameDefine2.GAME_TIMEOUT),null==this.btnExit&&(this.btnExit=GuiManager.GetGui(6).GetObject(0),this.btnExit.SetTouchable(!0)),this.isFirstLaunch?(this.hud=GuiManager.GetGui(6).GetObject(26),this.timer_texture=new u,this.timer_texture.scale.set(1,1),this.GameMgr=new s,this.IsNewUser()?(this.ShowTutorial(),this.SetState(GameDefine2.GAME_STATE_TUTORIAL)):(this.HideTutorial(),this.StartGame(),this.SetState(GameDefine2.GAME_STATE_A))):(this.isGameStarted=!0,this.SetState(GameDefine2.GAME_STATE_A)),this.timer_texture.Init(),this.GameMgr&&this.GameMgr.Init(),this.addChild(this.GameMgr),this.addChild(this.timer_texture),this.addChild(Utils.advertisement),GameDefine.mVideoBg.pause(),AudioManager.Play(0,!0),window.isOutfit7&&(this.btnExit.visible=!1)}},{key:"Unload",value:function(){APP.RemoveChild(this)}},{key:"Pause",value:function(){AudioManager.Pause(0),AudioManager.Pause(14)}},{key:"Resize",value:function(){Helper.UpdateGuiAnchor(GuiManager.GetGui(6))}},{key:"Resume",value:function(){AudioManager.Play(0,!0),AudioManager.Play(14,!0)}},{key:"Back",value:function(){if(StateIngame.isFirstLaunch){if(this.btnExit.visible){this.Pause();var t=i(106);StateManager.PushState(t)}}else Utils.SendTrackingAndExit()}},{key:"Update",value:function(t){switch(h.Update(t),gIngameTimeSpent+=t,this.state){case GameDefine2.GAME_STATE_NONE:case GameDefine2.GAME_STATE_TUTORIAL:break;case GameDefine2.GAME_STATE_A:this.timerMain.Update(t),this.timerMain.JustFinished()&&(BOSS.hp>=.25*GameDefine2.BOSS_HP?(this.EndGame(),this.SetState(GameDefine2.GAME_STATE_NONE)):(BOSS.SetState(BOSS.STATE.DIE),BOSS.tweenMgr.RemoveAll(),this.GameMgr.SetState(GameDefine2.GAME_MANAGER_STATE_END_GAME)))}this.GameMgr.Update(t),this.UpdateInterface(),GuiManager.Update(5,t)}},{key:"_UpdateTextTimer",value:function(t){this.timer_texture.SetNumber(t,"2",GameDefine.SCORE_TEXTURE_ARR_SIGN_ID,GameDefine.SCORE_TEXTURE_ARR_NUMBER_ID_STYLE_01),this.timer_texture.position.x=this.hud.position.x-this.timer_texture.width/2,this.timer_texture.position.y=this.hud.position.y-0}},{key:"IsNewUser",value:function(){return!(!window.DEBUG&&!window.REVIEW)||GameConfig.isNewUser2}},{key:"GotReward",value:function(){this.isGotReward=!0}},{key:"IsGotReward",value:function(){return this.isGotReward}},{key:"GetTimeSpent",value:function(){return GameDefine2.GAME_TIMEOUT-this.timerMain.GetTime()}},{key:"StartGame",value:function(){this.isGameStarted=!0,this.IsNewUser(),window.isOutfit7||(this.btnExit.visible=!0)}},{key:"EndGame",value:function(){this.isFirstLaunch=!1,StateManager.SwitchState(StateEndImage),TrackingManager.SetScoreParam(this.GetScore())}},{key:"SetState",value:function(t){this.state=t}},{key:"GetState",value:function(){return this.state}},{key:"GetScore",value:function(){return this.score}},{key:"PlaySound",value:function(t,e){AudioManager.IsSupportAudioAPI()&&AudioManager.Play(t,e)}},{key:"StopSound",value:function(t){AudioManager.IsSupportAudioAPI()&&AudioManager.Stop(t)}},{key:"ShowTutorial",value:function(){this.btnExit.visible=!1}},{key:"HideTutorial",value:function(){}},{key:"UpdateInterface",value:function(){var t=this.timerMain.GetTime();AudioManager.IsSupportAudioAPI()&&t<=GameDefine.GAME_TIMER_WARNING&&this.previousTime!=Math.floor(t)&&(this.previousTime=Math.floor(t));Math.ceil(this.timerMain.GetTime());this._UpdateTextTimer(this.timerMain.GetTime()),GuiManager.GetGui(6).GetObject(27).text=""}},{key:"TouchHandler",value:function(t){if(!DeviceInfo.isBrowser){switch(t.target){case this.btnExit:Input.IsTouchUp(t)&&this.Back()}this.GameMgr.TouchHandler(t)}}},{key:"KeyHandler",value:function(t){DeviceInfo.isBrowser&&this.GameMgr.KeyHandler(t)}}]),e}(PIXI.Container);t.exports=new l},function(t,e,i){"use strict";(function(e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(284),h=i(296),u=i(297),l=function(t){function i(){n(this,i);var t=r(this,(i.__proto__||Object.getPrototypeOf(i)).call(this)),e=0;return t.STATE={},t.STATE.INIT=e++,t.STATE.SELECT_CHAR=e++,t.STATE.SELECETED_JAY=e++,t.STATE.SELECETED_KAI=e++,t.STATE.WAIT_TO_PLAY=e++,t.STATE.END=e++,t.mCharacterContainer,t.mButtonLeft,t.mButtonRight,t.mButtonPlay,t.mCharText,t.mButtonExit,t.mArrSelectChar=[],t.isSelected=!1,t.mIsFirstInit=!0,t.mState,t.Char_Selected=null,t.arrRectJay=[],t.arrRectKai=[],t.wait_time=new Timer,t.auto_select_timer=new Timer,t.isAuto=!1,t.indexText=0,t.customTracking,t.isFistSelect=!1,t}return a(i,t),o(i,[{key:"Load",value:function(){var t={dataName:"mig_show_pause_mute",rotation:APP.rotation};window.parent.postMessage(t,"*"),this.isFistSelect=!1,APP.AddChild(this),APP.Align(this),this.Localization(),this._SetState(this.STATE.INIT)}},{key:"Localization",value:function(){this.indexText=window.languageIndex,GuiManager.GetGui(8).GetObject(8+this.indexText).visible=!0,GuiManager.GetGui(8).GetObject(15+this.indexText).visible=!0,GuiManager.GetGui(8).GetObject(25+this.indexText).visible=!0,GuiManager.GetGui(8).GetObject(20+this.indexText).visible=!0,GuiManager.GetGui(6).GetObject(2+this.indexText).visible=!0,GuiManager.GetGui(12).GetObject(8+this.indexText).visible=!0}},{key:"_SetState",value:function(t){var i=this;switch(this.mState=t,this.mState){case this.STATE.INIT:this.mIsFirstInit&&(this.auto_select_timer.SetDuration(4),e.ObjectDefine=new s,e.SelectCamera=new h,this.mGui=GuiManager.GetGui(8),this.mButtonLeft=this.mGui.GetObject(4),this.mButtonRight=this.mGui.GetObject(5),this.mButtonPlay=this.mGui.GetObject(6),this.mCharText=this.mGui.GetObject(1),this.mButtonExit=this.mGui.GetObject(7),this.char_JAY=this.mGui.GetObject(13),this.char_KAI=this.mGui.GetObject(14),this.char_JAY.interactive=!0,this.char_JAY.cursor="pointer",this.char_KAI.interactive=!0,this.char_KAI.cursor="pointer",this.arrRectJay.push(this.char_JAY.GetTransformRect(0)),this.arrRectJay.push(this.char_JAY.GetTransformRect(1)),this.arrRectJay.push(this.char_JAY.GetTransformRect(2)),this.arrRectKai.push(this.char_KAI.GetTransformRect(0)),this.arrRectKai.push(this.char_KAI.GetTransformRect(1)),this.arrRectKai.push(this.char_KAI.GetTransformRect(2)),this.mButtonLeft.SetTouchable(!0),this.mButtonRight.SetTouchable(!0),this.mButtonPlay.SetTouchable(!0),this.mButtonExit.SetTouchable(!0),this.mCharacterContainer=new PIXI.Container,this.addChild(this.mGui),this.addChild(this.mCharacterContainer)),SelectCamera.Init(),SelectCamera.SetPosition({x:0+GameDefine.SELECT_CHAR_OFFSET_X*ObjectDefine.CHARACTER_INFOR.currentIndex,y:0}),this._InActiveArrCharacter(this.mArrSelectChar),this._MakeSelectCharacter(),this.mActiveObject=!0,this.mButtonExit.visible=!StateIngame.isFirstLaunch,this.addChild(Utils.advertisement),this.mIsFirstInit=!1;case this.STATE.SELECT_CHAR:this.mActiveObject&&(this.mActiveObject=!1,this._ActiveArrCharacter(this.mArrSelectChar)),SelectCamera.SetStateStand(),ObjectDefine.CHARACTER_INFOR.currentIndex=Math.round(SelectCamera.GetPosition().x/GameDefine.SELECT_CHAR_OFFSET_X),this.mCharText.text=GLText.GetText(ObjectDefine.CHARACTER_INFOR.ARR_INFOR[ObjectDefine.CHARACTER_INFOR.currentIndex].CHAR_TEXT),this._UpdateUI(ObjectDefine.CHARACTER_INFOR.currentIndex);break;case this.STATE.SELECETED_JAY:this.customTracking=this.isAuto?"JAY_AUTO":"JAY",TrackingManager.SendEventTracking(TrackingManager.TRACKING_ACTION_CONFIRMED_ENGAGEMENTS,null,this.customTracking),AudioManager.Play(22,!1),ObjectDefine.CHARACTER_INFOR.currentIndex=0,this.char_JAY.SetFrame(113);var n=new PIXI.filters.ColorMatrixFilter;n.greyscale(.6,!1),this.char_JAY.filters=[n],setTimeout(function(){i.char_JAY.filters=[],setTimeout(function(){i.char_JAY.filters=[n],setTimeout(function(){i.char_JAY.filters=[],setTimeout(function(){i.char_JAY.filters=[n],setTimeout(function(){i.char_JAY.filters=[],i.isSelected=!0},50)},75)},50)},75)},50),GameConfig.isHostGamePortrait||(APP.fadeEffect.rotation=0),APP.fadeEffect=new PIXI.Graphics,APP.fadeEffect.beginFill(0,1),APP.fadeEffect.clear(),APP.fadeEffect.drawRect(0,0,APP.GetWidth(),APP.GetHeight()),APP.fadeEffect.endFill(),APP.Align(APP.fadeEffect);var r=new PIXI.filters.ColorMatrixFilter;this.char_KAI.filters=[r],r.blackAndWhite(!0);break;case this.STATE.SELECETED_KAI:this.customTracking=this.isAuto?"KAI_AUTO":"KAI",TrackingManager.SendEventTracking(TrackingManager.TRACKING_ACTION_CONFIRMED_ENGAGEMENTS,null,this.customTracking),AudioManager.Play(22,!1),ObjectDefine.CHARACTER_INFOR.currentIndex=1,this.char_KAI.SetFrame(115);var a=new PIXI.filters.ColorMatrixFilter;a.greyscale(.6,!1),this.char_KAI.filters=[a],setTimeout(function(){i.char_KAI.filters=[],setTimeout(function(){i.char_KAI.filters=[a],setTimeout(function(){i.char_KAI.filters=[],setTimeout(function(){i.char_KAI.filters=[a],setTimeout(function(){i.char_KAI.filters=[],i.isSelected=!0},50)},75)},50)},75)},50),GameConfig.isHostGamePortrait||(APP.fadeEffect.rotation=0),APP.fadeEffect=new PIXI.Graphics,APP.fadeEffect.beginFill(0,1),APP.fadeEffect.clear(),APP.fadeEffect.drawRect(0,0,APP.GetWidth(),APP.GetHeight()),APP.fadeEffect.endFill(),APP.Align(APP.fadeEffect);var o=new PIXI.filters.ColorMatrixFilter;this.char_JAY.filters=[o],o.blackAndWhite(!0);break;case this.STATE.WAIT_TO_PLAY:this.wait_time.SetDuration(GameDefine.SELECT_WAIT_TIME);break;case this.STATE.END:if(this.isFistSelect)return;this.isFistSelect=!0,StateManager.SwitchState(StateIngame)}}},{key:"Update",value:function(t){switch(this.mState){case this.STATE.INIT:this._SetState(this.STATE.SELECT_CHAR);break;case this.STATE.SELECT_CHAR:this.auto_select_timer.Update(t),this.auto_select_timer.JustFinished()&&(this.isAuto=!0,this._SetState(0==Utils.RandInt(0,1)?this.STATE.SELECETED_JAY:this.STATE.SELECETED_KAI)),SelectCamera.Update(t),this._UpdateArrCharacter(this.mArrSelectChar,t),this.mCharText.alpha=GameDefine.MoveToTarget(this.mCharText.alpha,1,5,t),this.mGui.Update(t);break;case this.STATE.SELECETED_JAY:case this.STATE.SELECETED_KAI:SelectCamera.Update(t),this._UpdateArrCharacter(this.mArrSelectChar,t),this.mCharText.alpha=GameDefine.MoveToTarget(this.mCharText.alpha,0,5,t),this.mGui.Update(t),this.isSelected&&this._SetState(this.STATE.WAIT_TO_PLAY);break;case this.STATE.WAIT_TO_PLAY:this.wait_time.Update(t),this.wait_time.JustFinished()&&this._SetState(this.STATE.END);break;case this.STATE.END:}}},{key:"TouchHandler",value:function(t){switch(this.mState){case this.STATE.SELECT_CHAR:switch(t.target){case this.mButtonLeft:Input.IsTouchUp(t)&&this._SetState(this.STATE.SELECETED_JAY);break;case this.mButtonRight:Input.IsTouchUp(t)&&this._SetState(this.STATE.SELECETED_KAI);break;case this.mButtonPlay:Input.IsTouchUp(t)&&this._SetState(this.STATE.END);break;case this.mButtonExit:Input.IsTouchUp(t)&&this.Back();break;default:if(Input.IsTouchUp(t)){var e=!0,i=!1,n=void 0;try{for(var r,a=this.arrRectJay[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=r.value;if(Utils.CollisionPointRect(Input.touchX,Input.touchY,o))return this.Char_Selected=this.char_JAY,void this._SetState(this.STATE.SELECETED_JAY)}}catch(t){i=!0,n=t}finally{try{!e&&a.return&&a.return()}finally{if(i)throw n}}var s=!0,h=!1,u=void 0;try{for(var l,c=this.arrRectKai[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var f=l.value;if(Utils.CollisionPointRect(Input.touchX,Input.touchY,f))return this.Char_Selected=this.char_KAI,void this._SetState(this.STATE.SELECETED_KAI)}}catch(t){h=!0,u=t}finally{try{!s&&c.return&&c.return()}finally{if(h)throw u}}}}}}},{key:"Unload",value:function(){APP.RemoveChild(this),APP.RemoveChild(StatePreLoad.glitchContainer),e.intervalGlitch&&clearInterval(intervalGlitch)}},{key:"Pause",value:function(){switch(this.mState){case this.STATE.INIT:case this.STATE.SELECT_CHAR:case this.STATE.SELECETED_JAY:case this.STATE.SELECETED_KAI:}}},{key:"Resume",value:function(){switch(this.mState){case this.STATE.INIT:case this.STATE.SELECT_CHAR:case this.STATE.SELECETED_JAY:case this.STATE.SELECETED_KAI:}}},{key:"Back",value:function(){StateIngame.isFirstLaunch||Utils.SendTrackingAndExit()}},{key:"Resize",value:function(){Helper.UpdateGuiAnchor(GuiManager.GetGui(8)),APP.Align(StatePreLoad.glitchContainer)}},{key:"_InActiveArrCharacter",value:function(t){for(var e=t.length,i=0;i<e;i++)t[i].SetStateInactive()}},{key:"_GetCharacter",value:function(t,e,i){for(var n=t.length,r=0;r<n;r++)if(t[r].IsStateInactive())return t[r];var a=new e;return t.push(a),i.addChild(a),a}},{key:"_MakeSelectCharacter",value:function(){for(var t=ObjectDefine.CHARACTER_INFOR.ARR_INFOR.length,e=-1;e<t+1;e++){var i=this._GetCharacter(this.mArrSelectChar,u,this.mCharacterContainer);i.SetInfor(ObjectDefine.CHARACTER_INFOR.ARR_INFOR[(e+t)%t]),i.Init(),i.SetPosition({x:e*GameDefine.SELECT_CHAR_OFFSET_X,y:GameDefine.SELECT_CHAR_OFFSET_Y})}}},{key:"_ActiveArrCharacter",value:function(t){for(var e=t.length,i=0;i<e;i++)t[i].SetStateActive()}},{key:"_UpdateArrCharacter",value:function(t,e){for(var i=t.length,n=0;n<i;n++)t[n].Update(e)}},{key:"_UpdateUI",value:function(t){void 0==this.mArrCircleUI&&(this.mArrCircleUI=[this.mGui.GetObject(2),this.mGui.GetObject(3)]);var e=this.mArrCircleUI.length;t=(t+e)%e;for(var i=0;i<e;i++)this.mArrCircleUI[i].SetFrame(i==t?70:69)}}]),i}(PIXI.Container);t.exports=new l}).call(e,i(21))},function(t,e,i){i(309),t.exports=i(28).RegExp.escape},function(t,e,i){var n=i(6),r=i(83),a=i(8)("species");t.exports=function(t){var e;return r(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!r(e.prototype)||(e=void 0),n(e)&&null===(e=e[a])&&(e=void 0)),void 0===e?Array:e}},function(t,e,i){"use strict";var n=i(4),r=Date.prototype.getTime,a=Date.prototype.toISOString,o=function(t){return t>9?t:"0"+t};t.exports=n(function(){return"0385-07-25T07:06:39.999Z"!=a.call(new Date(-5e13-1))})||!n(function(){a.call(new Date(NaN))})?function(){if(!isFinite(r.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),i=t.getUTCMilliseconds(),n=e<0?"-":e>9999?"+":"";return n+("00000"+Math.abs(e)).slice(n?-6:-4)+"-"+o(t.getUTCMonth()+1)+"-"+o(t.getUTCDate())+"T"+o(t.getUTCHours())+":"+o(t.getUTCMinutes())+":"+o(t.getUTCSeconds())+"."+(i>99?i:"0"+o(i))+"Z"}:a},function(t,e,i){"use strict";var n=i(1),r=i(36);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return r(n(this),"number"!=t)}},function(t,e,i){var n=i(51),r=i(87),a=i(68);t.exports=function(t){var e=n(t),i=r.f;if(i)for(var o,s=i(t),h=a.f,u=0;s.length>u;)h.call(t,o=s[u++])&&e.push(o);return e}},function(t,e){t.exports=function(t,e){var i=e===Object(e)?function(t){return e[t]}:e;return function(e){return String(e).replace(t,i)}}},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,i){var n=i(0),r=i(307)(/[\\^$*+?.()|[\]{}]/g,"\\$&");n(n.S,"RegExp",{escape:function(t){return r(t)}})},function(t,e,i){var n=i(0);n(n.P,"Array",{copyWithin:i(166)}),i(41)("copyWithin")},function(t,e,i){"use strict";var n=i(0),r=i(32)(4);n(n.P+n.F*!i(30)([].every,!0),"Array",{every:function(t){return r(this,t,arguments[1])}})},function(t,e,i){var n=i(0);n(n.P,"Array",{fill:i(108)}),i(41)("fill")},function(t,e,i){"use strict";var n=i(0),r=i(32)(2);n(n.P+n.F*!i(30)([].filter,!0),"Array",{filter:function(t){return r(this,t,arguments[1])}})},function(t,e,i){"use strict";var n=i(0),r=i(32)(6),a="findIndex",o=!0;a in[]&&Array(1)[a](function(){o=!1}),n(n.P+n.F*o,"Array",{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i(41)(a)},function(t,e,i){"use strict";var n=i(0),r=i(32)(5),a=!0;"find"in[]&&Array(1).find(function(){a=!1}),n(n.P+n.F*a,"Array",{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i(41)("find")},function(t,e,i){"use strict";var n=i(0),r=i(32)(0),a=i(30)([].forEach,!0);n(n.P+n.F*!a,"Array",{forEach:function(t){return r(this,t,arguments[1])}})},function(t,e,i){"use strict";var n=i(29),r=i(0),a=i(12),o=i(177),s=i(116),h=i(11),u=i(110),l=i(132);r(r.S+r.F*!i(85)(function(t){Array.from(t)}),"Array",{from:function(t){var e,i,r,c,f=a(t),d="function"==typeof this?this:Array,p=arguments.length,m=p>1?arguments[1]:void 0,v=void 0!==m,g=0,y=l(f);if(v&&(m=n(m,p>2?arguments[2]:void 0,2)),void 0==y||d==Array&&s(y))for(e=h(f.length),i=new d(e);e>g;g++)u(i,g,v?m(f[g],g):f[g]);else for(c=y.call(f),i=new d;!(r=c.next()).done;g++)u(i,g,v?o(c,m,[r.value,g],!0):r.value);return i.length=g,i}})},function(t,e,i){"use strict";var n=i(0),r=i(79)(!1),a=[].indexOf,o=!!a&&1/[1].indexOf(1,-0)<0;n(n.P+n.F*(o||!i(30)(a)),"Array",{indexOf:function(t){return o?a.apply(this,arguments)||0:r(this,t,arguments[1])}})},function(t,e,i){var n=i(0);n(n.S,"Array",{isArray:i(83)})},function(t,e,i){"use strict";var n=i(0),r=i(25),a=[].join;n(n.P+n.F*(i(67)!=Object||!i(30)(a)),"Array",{join:function(t){return a.call(r(this),void 0===t?",":t)}})},function(t,e,i){"use strict";var n=i(0),r=i(25),a=i(35),o=i(11),s=[].lastIndexOf,h=!!s&&1/[1].lastIndexOf(1,-0)<0;n(n.P+n.F*(h||!i(30)(s)),"Array",{lastIndexOf:function(t){if(h)return s.apply(this,arguments)||0;var e=r(this),i=o(e.length),n=i-1;for(arguments.length>1&&(n=Math.min(n,a(arguments[1]))),n<0&&(n=i+n);n>=0;n--)if(n in e&&e[n]===t)return n||0;return-1}})},function(t,e,i){"use strict";var n=i(0),r=i(32)(1);n(n.P+n.F*!i(30)([].map,!0),"Array",{map:function(t){return r(this,t,arguments[1])}})},function(t,e,i){"use strict";var n=i(0),r=i(110);n(n.S+n.F*i(4)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,i=new("function"==typeof this?this:Array)(e);e>t;)r(i,t,arguments[t++]);return i.length=e,i}})},function(t,e,i){"use strict";var n=i(0),r=i(168);n(n.P+n.F*!i(30)([].reduceRight,!0),"Array",{reduceRight:function(t){return r(this,t,arguments.length,arguments[1],!0)}})},function(t,e,i){"use strict";var n=i(0),r=i(168);n(n.P+n.F*!i(30)([].reduce,!0),"Array",{reduce:function(t){return r(this,t,arguments.length,arguments[1],!1)}})},function(t,e,i){"use strict";var n=i(0),r=i(114),a=i(27),o=i(55),s=i(11),h=[].slice;n(n.P+n.F*i(4)(function(){r&&h.call(r)}),"Array",{slice:function(t,e){var i=s(this.length),n=a(this);if(e=void 0===e?i:e,"Array"==n)return h.call(this,t,e);for(var r=o(t,i),u=o(e,i),l=s(u-r),c=new Array(l),f=0;f<l;f++)c[f]="String"==n?this.charAt(r+f):this[r+f];return c}})},function(t,e,i){"use strict";var n=i(0),r=i(32)(3);n(n.P+n.F*!i(30)([].some,!0),"Array",{some:function(t){return r(this,t,arguments[1])}})},function(t,e,i){"use strict";var n=i(0),r=i(16),a=i(12),o=i(4),s=[].sort,h=[1,2,3];n(n.P+n.F*(o(function(){h.sort(void 0)})||!o(function(){h.sort(null)})||!i(30)(s)),"Array",{sort:function(t){return void 0===t?s.call(a(this)):s.call(a(this),r(t))}})},function(t,e,i){i(54)("Array")},function(t,e,i){var n=i(0);n(n.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,e,i){var n=i(0),r=i(304);n(n.P+n.F*(Date.prototype.toISOString!==r),"Date",{toISOString:r})},function(t,e,i){"use strict";var n=i(0),r=i(12),a=i(36);n(n.P+n.F*i(4)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var e=r(this),i=a(e);return"number"!=typeof i||isFinite(i)?e.toISOString():null}})},function(t,e,i){var n=i(8)("toPrimitive"),r=Date.prototype;n in r||i(18)(r,n,i(305))},function(t,e,i){var n=Date.prototype,r=n.toString,a=n.getTime;new Date(NaN)+""!="Invalid Date"&&i(19)(n,"toString",function(){var t=a.call(this);return t===t?r.call(this):"Invalid Date"})},function(t,e,i){var n=i(0);n(n.P,"Function",{bind:i(169)})},function(t,e,i){"use strict";var n=i(6),r=i(24),a=i(8)("hasInstance"),o=Function.prototype;a in o||i(10).f(o,a,{value:function(t){if("function"!=typeof this||!n(t))return!1;if(!n(this.prototype))return t instanceof this;for(;t=r(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,i){var n=i(10).f,r=Function.prototype,a=/^\s*function ([^ (]*)/;"name"in r||i(9)&&n(r,"name",{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(t){return""}}})},function(t,e,i){var n=i(0),r=i(180),a=Math.sqrt,o=Math.acosh;n(n.S+n.F*!(o&&710==Math.floor(o(Number.MAX_VALUE))&&o(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:r(t-1+a(t-1)*a(t+1))}})},function(t,e,i){function n(t){return isFinite(t=+t)&&0!=t?t<0?-n(-t):Math.log(t+Math.sqrt(t*t+1)):t}var r=i(0),a=Math.asinh;r(r.S+r.F*!(a&&1/a(0)>0),"Math",{asinh:n})},function(t,e,i){var n=i(0),r=Math.atanh;n(n.S+n.F*!(r&&1/r(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,i){var n=i(0),r=i(120);n(n.S,"Math",{cbrt:function(t){return r(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e,i){var n=i(0);n(n.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,i){var n=i(0),r=Math.exp;n(n.S,"Math",{cosh:function(t){return(r(t=+t)+r(-t))/2}})},function(t,e,i){var n=i(0),r=i(119);n(n.S+n.F*(r!=Math.expm1),"Math",{expm1:r})},function(t,e,i){var n=i(0);n(n.S,"Math",{fround:i(179)})},function(t,e,i){var n=i(0),r=Math.abs;n(n.S,"Math",{hypot:function(t,e){for(var i,n,a=0,o=0,s=arguments.length,h=0;o<s;)i=r(arguments[o++]),h<i?(n=h/i,a=a*n*n+1,h=i):i>0?(n=i/h,a+=n*n):a+=i;return h===1/0?1/0:h*Math.sqrt(a)}})},function(t,e,i){var n=i(0),r=Math.imul;n(n.S+n.F*i(4)(function(){return-5!=r(4294967295,5)||2!=r.length}),"Math",{imul:function(t,e){var i=+t,n=+e,r=65535&i,a=65535&n;return 0|r*a+((65535&i>>>16)*a+r*(65535&n>>>16)<<16>>>0)}})},function(t,e,i){var n=i(0);n(n.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,e,i){var n=i(0);n(n.S,"Math",{log1p:i(180)})},function(t,e,i){var n=i(0);n(n.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,i){var n=i(0);n(n.S,"Math",{sign:i(120)})},function(t,e,i){var n=i(0),r=i(119),a=Math.exp;n(n.S+n.F*i(4)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(r(t)-r(-t))/2:(a(t-1)-a(-t-1))*(Math.E/2)}})},function(t,e,i){var n=i(0),r=i(119),a=Math.exp;n(n.S,"Math",{tanh:function(t){var e=r(t=+t),i=r(-t);return e==1/0?1:i==1/0?-1:(e-i)/(a(t)+a(-t))}})},function(t,e,i){var n=i(0);n(n.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,i){"use strict";var n=i(2),r=i(22),a=i(27),o=i(115),s=i(36),h=i(4),u=i(50).f,l=i(23).f,c=i(10).f,f=i(61).trim,d=n.Number,p=d,m=d.prototype,v="Number"==a(i(49)(m)),g="trim"in String.prototype,y=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){e=g?e.trim():f(e,3);var i,n,r,a=e.charCodeAt(0);if(43===a||45===a){if(88===(i=e.charCodeAt(2))||120===i)return NaN}else if(48===a){switch(e.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+e}for(var o,h=e.slice(2),u=0,l=h.length;u<l;u++)if((o=h.charCodeAt(u))<48||o>r)return NaN;return parseInt(h,n)}}return+e};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(t){var e=arguments.length<1?0:t,i=this;return i instanceof d&&(v?h(function(){m.valueOf.call(i)}):"Number"!=a(i))?o(new p(y(e)),i,d):y(e)};for(var _,T=i(9)?u(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0;T.length>E;E++)r(p,_=T[E])&&!r(d,_)&&c(d,_,l(p,_));d.prototype=m,m.constructor=d,i(19)(n,"Number",d)}},function(t,e,i){var n=i(0);n(n.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,i){var n=i(0),r=i(2).isFinite;n(n.S,"Number",{isFinite:function(t){return"number"==typeof t&&r(t)}})},function(t,e,i){var n=i(0);n(n.S,"Number",{isInteger:i(176)})},function(t,e,i){var n=i(0);n(n.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,i){var n=i(0),r=i(176),a=Math.abs;n(n.S,"Number",{isSafeInteger:function(t){return r(t)&&a(t)<=9007199254740991}})},function(t,e,i){var n=i(0);n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,i){var n=i(0);n(n.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,i){var n=i(0),r=i(188);n(n.S+n.F*(Number.parseFloat!=r),"Number",{parseFloat:r})},function(t,e,i){var n=i(0),r=i(189);n(n.S+n.F*(Number.parseInt!=r),"Number",{parseInt:r})},function(t,e,i){"use strict";var n=i(0),r=i(35),a=i(165),o=i(127),s=1..toFixed,h=Math.floor,u=[0,0,0,0,0,0],l="Number.toFixed: incorrect invocation!",c=function(t,e){for(var i=-1,n=e;++i<6;)n+=t*u[i],u[i]=n%1e7,n=h(n/1e7)},f=function(t){for(var e=6,i=0;--e>=0;)i+=u[e],u[e]=h(i/t),i=i%t*1e7},d=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==u[t]){var i=String(u[t]);e=""===e?i:e+o.call("0",7-i.length)+i}return e},p=function(t,e,i){return 0===e?i:e%2==1?p(t,e-1,i*t):p(t*t,e/2,i)},m=function(t){for(var e=0,i=t;i>=4096;)e+=12,i/=4096;for(;i>=2;)e+=1,i/=2;return e};n(n.P+n.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!i(4)(function(){s.call({})})),"Number",{toFixed:function(t){var e,i,n,s,h=a(this,l),u=r(t),v="",g="0";if(u<0||u>20)throw RangeError(l);if(h!=h)return"NaN";if(h<=-1e21||h>=1e21)return String(h);if(h<0&&(v="-",h=-h),h>1e-21)if(e=m(h*p(2,69,1))-69,i=e<0?h*p(2,-e,1):h/p(2,e,1),i*=4503599627370496,(e=52-e)>0){for(c(0,i),n=u;n>=7;)c(1e7,0),n-=7;for(c(p(10,n,1),0),n=e-1;n>=23;)f(1<<23),n-=23;f(1<<n),c(1,1),f(2),g=d()}else c(0,i),c(1<<-e,0),g=d()+o.call("0",u);return u>0?(s=g.length,g=v+(s<=u?"0."+o.call("0",u-s)+g:g.slice(0,s-u)+"."+g.slice(s-u))):g=v+g,g}})},function(t,e,i){"use strict";var n=i(0),r=i(4),a=i(165),o=1..toPrecision;n(n.P+n.F*(r(function(){return"1"!==o.call(1,void 0)})||!r(function(){o.call({})})),"Number",{toPrecision:function(t){var e=a(this,"Number#toPrecision: incorrect invocation!");return void 0===t?o.call(e):o.call(e,t)}})},function(t,e,i){var n=i(0);n(n.S+n.F,"Object",{assign:i(182)})},function(t,e,i){var n=i(0);n(n.S,"Object",{create:i(49)})},function(t,e,i){var n=i(0);n(n.S+n.F*!i(9),"Object",{defineProperties:i(183)})},function(t,e,i){var n=i(0);n(n.S+n.F*!i(9),"Object",{defineProperty:i(10).f})},function(t,e,i){var n=i(6),r=i(43).onFreeze;i(34)("freeze",function(t){return function(e){return t&&n(e)?t(r(e)):e}})},function(t,e,i){var n=i(25),r=i(23).f;i(34)("getOwnPropertyDescriptor",function(){return function(t,e){return r(n(t),e)}})},function(t,e,i){i(34)("getOwnPropertyNames",function(){return i(184).f})},function(t,e,i){var n=i(12),r=i(24);i(34)("getPrototypeOf",function(){return function(t){return r(n(t))}})},function(t,e,i){var n=i(6);i(34)("isExtensible",function(t){return function(e){return!!n(e)&&(!t||t(e))}})},function(t,e,i){var n=i(6);i(34)("isFrozen",function(t){return function(e){return!n(e)||!!t&&t(e)}})},function(t,e,i){var n=i(6);i(34)("isSealed",function(t){return function(e){return!n(e)||!!t&&t(e)}})},function(t,e,i){var n=i(0);n(n.S,"Object",{is:i(308)})},function(t,e,i){var n=i(12),r=i(51);i(34)("keys",function(){return function(t){return r(n(t))}})},function(t,e,i){var n=i(6),r=i(43).onFreeze;i(34)("preventExtensions",function(t){return function(e){return t&&n(e)?t(r(e)):e}})},function(t,e,i){var n=i(6),r=i(43).onFreeze;i(34)("seal",function(t){return function(e){return t&&n(e)?t(r(e)):e}})},function(t,e,i){var n=i(0);n(n.S,"Object",{setPrototypeOf:i(123).set})},function(t,e,i){"use strict";var n=i(66),r={};r[i(8)("toStringTag")]="z",r+""!="[object z]"&&i(19)(Object.prototype,"toString",function(){return"[object "+n(this)+"]"},!0)},function(t,e,i){var n=i(0),r=i(188);n(n.G+n.F*(parseFloat!=r),{parseFloat:r})},function(t,e,i){var n=i(0),r=i(189);n(n.G+n.F*(parseInt!=r),{parseInt:r})},function(t,e,i){"use strict";var n,r,a,o,s=i(42),h=i(2),u=i(29),l=i(66),c=i(0),f=i(6),d=i(16),p=i(47),m=i(48),v=i(91),g=i(129).set,y=i(121)(),_=i(122),T=i(190),E=i(93),S=i(191),b=h.TypeError,A=h.process,I=A&&A.versions,w=I&&I.v8||"",x=h.Promise,P="process"==l(A),M=function(){},O=r=_.f,C=!!function(){try{var t=x.resolve(1),e=(t.constructor={})[i(8)("species")]=function(t){t(M,M)};return(P||"function"==typeof PromiseRejectionEvent)&&t.then(M)instanceof e&&0!==w.indexOf("6.6")&&-1===E.indexOf("Chrome/66")}catch(t){}}(),R=function(t){var e;return!(!f(t)||"function"!=typeof(e=t.then))&&e},k=function(t,e){if(!t._n){t._n=!0;var i=t._c;y(function(){for(var n=t._v,r=1==t._s,a=0;i.length>a;)!function(e){var i,a,o,s=r?e.ok:e.fail,h=e.resolve,u=e.reject,l=e.domain;try{s?(r||(2==t._h&&N(t),t._h=1),!0===s?i=n:(l&&l.enter(),i=s(n),l&&(l.exit(),o=!0)),i===e.promise?u(b("Promise-chain cycle")):(a=R(i))?a.call(i,h,u):h(i)):u(n)}catch(t){l&&!o&&l.exit(),u(t)}}(i[a++]);t._c=[],t._n=!1,e&&!t._h&&D(t)})}},D=function(t){g.call(h,function(){var e,i,n,r=t._v,a=L(t);if(a&&(e=T(function(){P?A.emit("unhandledRejection",r,t):(i=h.onunhandledrejection)?i({promise:t,reason:r}):(n=h.console)&&n.error&&n.error("Unhandled promise rejection",r)}),t._h=P||L(t)?2:1),t._a=void 0,a&&e.e)throw e.v})},L=function(t){return 1!==t._h&&0===(t._a||t._c).length},N=function(t){g.call(h,function(){var e;P?A.emit("rejectionHandled",t):(e=h.onrejectionhandled)&&e({promise:t,reason:t._v})})},G=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),k(e,!0))},F=function(t){var e,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===t)throw b("Promise can't be resolved itself");(e=R(t))?y(function(){var n={_w:i,_d:!1};try{e.call(t,u(F,n,1),u(G,n,1))}catch(t){G.call(n,t)}}):(i._v=t,i._s=1,k(i,!1))}catch(t){G.call({_w:i,_d:!1},t)}}};C||(x=function(t){p(this,x,"Promise","_h"),d(t),n.call(this);try{t(u(F,this,1),u(G,this,1))}catch(t){G.call(this,t)}},n=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},n.prototype=i(53)(x.prototype,{then:function(t,e){var i=O(v(this,x));return i.ok="function"!=typeof t||t,i.fail="function"==typeof e&&e,i.domain=P?A.domain:void 0,this._c.push(i),this._a&&this._a.push(i),this._s&&k(this,!1),i.promise},catch:function(t){return this.then(void 0,t)}}),a=function(){var t=new n;this.promise=t,this.resolve=u(F,t,1),this.reject=u(G,t,1)},_.f=O=function(t){return t===x||t===o?new a(t):r(t)}),c(c.G+c.W+c.F*!C,{Promise:x}),i(60)(x,"Promise"),i(54)("Promise"),o=i(28).Promise,c(c.S+c.F*!C,"Promise",{reject:function(t){var e=O(this);return(0,e.reject)(t),e.promise}}),c(c.S+c.F*(s||!C),"Promise",{resolve:function(t){return S(s&&this===o?x:this,t)}}),c(c.S+c.F*!(C&&i(85)(function(t){x.all(t).catch(M)})),"Promise",{all:function(t){var e=this,i=O(e),n=i.resolve,r=i.reject,a=T(function(){var i=[],a=0,o=1;m(t,!1,function(t){var s=a++,h=!1;i.push(void 0),o++,e.resolve(t).then(function(t){h||(h=!0,i[s]=t,--o||n(i))},r)}),--o||n(i)});return a.e&&r(a.v),i.promise},race:function(t){var e=this,i=O(e),n=i.reject,r=T(function(){m(t,!1,function(t){e.resolve(t).then(i.resolve,n)})});return r.e&&n(r.v),i.promise}})},function(t,e,i){var n=i(0),r=i(16),a=i(1),o=(i(2).Reflect||{}).apply,s=Function.apply;n(n.S+n.F*!i(4)(function(){o(function(){})}),"Reflect",{apply:function(t,e,i){var n=r(t),h=a(i);return o?o(n,e,h):s.call(n,e,h)}})},function(t,e,i){var n=i(0),r=i(49),a=i(16),o=i(1),s=i(6),h=i(4),u=i(169),l=(i(2).Reflect||{}).construct,c=h(function(){function t(){}return!(l(function(){},[],t)instanceof t)}),f=!h(function(){l(function(){})});n(n.S+n.F*(c||f),"Reflect",{construct:function(t,e){a(t),o(e);var i=arguments.length<3?t:a(arguments[2]);if(f&&!c)return l(t,e,i);if(t==i){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return n.push.apply(n,e),new(u.apply(t,n))}var h=i.prototype,d=r(s(h)?h:Object.prototype),p=Function.apply.call(t,d,e);return s(p)?p:d}})},function(t,e,i){var n=i(10),r=i(0),a=i(1),o=i(36);r(r.S+r.F*i(4)(function(){Reflect.defineProperty(n.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,i){a(t),e=o(e,!0),a(i);try{return n.f(t,e,i),!0}catch(t){return!1}}})},function(t,e,i){var n=i(0),r=i(23).f,a=i(1);n(n.S,"Reflect",{deleteProperty:function(t,e){var i=r(a(t),e);return!(i&&!i.configurable)&&delete t[e]}})},function(t,e,i){"use strict";var n=i(0),r=i(1),a=function(t){this._t=r(t),this._i=0;var e,i=this._k=[];for(e in t)i.push(e)};i(117)(a,"Object",function(){var t,e=this,i=e._k;do{if(e._i>=i.length)return{value:void 0,done:!0}}while(!((t=i[e._i++])in e._t));return{value:t,done:!1}}),n(n.S,"Reflect",{enumerate:function(t){return new a(t)}})},function(t,e,i){var n=i(23),r=i(0),a=i(1);r(r.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return n.f(a(t),e)}})},function(t,e,i){var n=i(0),r=i(24),a=i(1);n(n.S,"Reflect",{getPrototypeOf:function(t){return r(a(t))}})},function(t,e,i){function n(t,e){var i,s,l=arguments.length<3?t:arguments[2];return u(t)===l?t[e]:(i=r.f(t,e))?o(i,"value")?i.value:void 0!==i.get?i.get.call(l):void 0:h(s=a(t))?n(s,e,l):void 0}var r=i(23),a=i(24),o=i(22),s=i(0),h=i(6),u=i(1);s(s.S,"Reflect",{get:n})},function(t,e,i){var n=i(0);n(n.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,i){var n=i(0),r=i(1),a=Object.isExtensible;n(n.S,"Reflect",{isExtensible:function(t){return r(t),!a||a(t)}})},function(t,e,i){var n=i(0);n(n.S,"Reflect",{ownKeys:i(187)})},function(t,e,i){var n=i(0),r=i(1),a=Object.preventExtensions;n(n.S,"Reflect",{preventExtensions:function(t){r(t);try{return a&&a(t),!0}catch(t){return!1}}})},function(t,e,i){var n=i(0),r=i(123);r&&n(n.S,"Reflect",{setPrototypeOf:function(t,e){r.check(t,e);try{return r.set(t,e),!0}catch(t){return!1}}})},function(t,e,i){function n(t,e,i){var h,f,d=arguments.length<4?t:arguments[3],p=a.f(l(t),e);if(!p){if(c(f=o(t)))return n(f,e,i,d);p=u(0)}if(s(p,"value")){if(!1===p.writable||!c(d))return!1;if(h=a.f(d,e)){if(h.get||h.set||!1===h.writable)return!1;h.value=i,r.f(d,e,h)}else r.f(d,e,u(0,i));return!0}return void 0!==p.set&&(p.set.call(d,i),!0)}var r=i(10),a=i(23),o=i(24),s=i(22),h=i(0),u=i(52),l=i(1),c=i(6);h(h.S,"Reflect",{set:n})},function(t,e,i){var n=i(2),r=i(115),a=i(10).f,o=i(50).f,s=i(84),h=i(82),u=n.RegExp,l=u,c=u.prototype,f=/a/g,d=/a/g,p=new u(f)!==f;if(i(9)&&(!p||i(4)(function(){return d[i(8)("match")]=!1,u(f)!=f||u(d)==d||"/a/i"!=u(f,"i")}))){u=function(t,e){var i=this instanceof u,n=s(t),a=void 0===e;return!i&&n&&t.constructor===u&&a?t:r(p?new l(n&&!a?t.source:t,e):l((n=t instanceof u)?t.source:t,n&&a?h.call(t):e),i?this:c,u)};for(var m=o(l),v=0;m.length>v;)!function(t){t in u||a(u,t,{configurable:!0,get:function(){return l[t]},set:function(e){l[t]=e}})}(m[v++]);c.constructor=u,u.prototype=c,i(19)(n,"RegExp",u)}i(54)("RegExp")},function(t,e,i){i(81)("match",1,function(t,e,i){return[function(i){"use strict";var n=t(this),r=void 0==i?void 0:i[e];return void 0!==r?r.call(i,n):new RegExp(i)[e](String(n))},i]})},function(t,e,i){i(81)("replace",2,function(t,e,i){return[function(n,r){"use strict";var a=t(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,a,r):i.call(String(a),n,r)},i]})},function(t,e,i){i(81)("search",1,function(t,e,i){return[function(i){"use strict";var n=t(this),r=void 0==i?void 0:i[e];return void 0!==r?r.call(i,n):new RegExp(i)[e](String(n))},i]})},function(t,e,i){i(81)("split",2,function(t,e,n){"use strict";var r=i(84),a=n,o=[].push,s="length";if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[s]||2!="ab".split(/(?:ab)*/)[s]||4!=".".split(/(.?)(.?)/)[s]||".".split(/()()/)[s]>1||"".split(/.?/)[s]){var h=void 0===/()??/.exec("")[1];n=function(t,e){var i=String(this);if(void 0===t&&0===e)return[];if(!r(t))return a.call(i,t,e);var n,u,l,c,f,d=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),m=0,v=void 0===e?4294967295:e>>>0,g=new RegExp(t.source,p+"g");for(h||(n=new RegExp("^"+g.source+"$(?!\\s)",p));(u=g.exec(i))&&!((l=u.index+u[0][s])>m&&(d.push(i.slice(m,u.index)),!h&&u[s]>1&&u[0].replace(n,function(){for(f=1;f<arguments[s]-2;f++)void 0===arguments[f]&&(u[f]=void 0)}),u[s]>1&&u.index<i[s]&&o.apply(d,u.slice(1)),c=u[0][s],m=l,d[s]>=v));)g.lastIndex===u.index&&g.lastIndex++;return m===i[s]?!c&&g.test("")||d.push(""):d.push(i.slice(m)),d[s]>v?d.slice(0,v):d}}else"0".split(void 0,0)[s]&&(n=function(t,e){return void 0===t&&0===e?[]:a.call(this,t,e)});return[function(i,r){var a=t(this),o=void 0==i?void 0:i[e];return void 0!==o?o.call(i,a,r):n.call(String(a),i,r)},n]})},function(t,e,i){"use strict";i(196);var n=i(1),r=i(82),a=i(9),o=/./.toString,s=function(t){i(19)(RegExp.prototype,"toString",t,!0)};i(4)(function(){return"/a/b"!=o.call({source:"a",flags:"b"})})?s(function(){var t=n(this);return"/".concat(t.source,"/","flags"in t?t.flags:!a&&t instanceof RegExp?r.call(t):void 0)}):"toString"!=o.name&&s(function(){return o.call(this)})},function(t,e,i){"use strict";i(20)("anchor",function(t){return function(e){return t(this,"a","name",e)}})},function(t,e,i){"use strict";i(20)("big",function(t){return function(){return t(this,"big","","")}})},function(t,e,i){"use strict";i(20)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,e,i){"use strict";i(20)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,e,i){"use strict";var n=i(0),r=i(125)(!1);n(n.P,"String",{codePointAt:function(t){return r(this,t)}})},function(t,e,i){"use strict";var n=i(0),r=i(11),a=i(126),o="".endsWith;n(n.P+n.F*i(113)("endsWith"),"String",{endsWith:function(t){var e=a(this,t,"endsWith"),i=arguments.length>1?arguments[1]:void 0,n=r(e.length),s=void 0===i?n:Math.min(r(i),n),h=String(t);return o?o.call(e,h,s):e.slice(s-h.length,s)===h}})},function(t,e,i){"use strict";i(20)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,e,i){"use strict";i(20)("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},function(t,e,i){"use strict";i(20)("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},function(t,e,i){var n=i(0),r=i(55),a=String.fromCharCode,o=String.fromCodePoint;n(n.S+n.F*(!!o&&1!=o.length),"String",{fromCodePoint:function(t){for(var e,i=[],n=arguments.length,o=0;n>o;){if(e=+arguments[o++],r(e,1114111)!==e)throw RangeError(e+" is not a valid code point");i.push(e<65536?a(e):a(55296+((e-=65536)>>10),e%1024+56320))}return i.join("")}})},function(t,e,i){"use strict";var n=i(0),r=i(126);n(n.P+n.F*i(113)("includes"),"String",{includes:function(t){return!!~r(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,i){"use strict";i(20)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,e,i){"use strict";var n=i(125)(!0);i(118)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=n(e,i),this._i+=t.length,{value:t,done:!1})})},function(t,e,i){"use strict";i(20)("link",function(t){return function(e){return t(this,"a","href",e)}})},function(t,e,i){var n=i(0),r=i(25),a=i(11);n(n.S,"String",{raw:function(t){for(var e=r(t.raw),i=a(e.length),n=arguments.length,o=[],s=0;i>s;)o.push(String(e[s++])),s<n&&o.push(String(arguments[s]));return o.join("")}})},function(t,e,i){var n=i(0);n(n.P,"String",{repeat:i(127)})},function(t,e,i){"use strict";i(20)("small",function(t){return function(){return t(this,"small","","")}})},function(t,e,i){"use strict";var n=i(0),r=i(11),a=i(126),o="".startsWith;n(n.P+n.F*i(113)("startsWith"),"String",{startsWith:function(t){var e=a(this,t,"startsWith"),i=r(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),n=String(t);return o?o.call(e,n,i):e.slice(i,i+n.length)===n}})},function(t,e,i){"use strict";i(20)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,e,i){"use strict";i(20)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,e,i){"use strict";i(20)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,e,i){"use strict";i(61)("trim",function(t){return function(){return t(this,3)}})},function(t,e,i){"use strict";var n=i(2),r=i(22),a=i(9),o=i(0),s=i(19),h=i(43).KEY,u=i(4),l=i(90),c=i(60),f=i(56),d=i(8),p=i(194),m=i(131),v=i(306),g=i(83),y=i(1),_=i(6),T=i(25),E=i(36),S=i(52),b=i(49),A=i(184),I=i(23),w=i(10),x=i(51),P=I.f,M=w.f,O=A.f,C=n.Symbol,R=n.JSON,k=R&&R.stringify,D=d("_hidden"),L=d("toPrimitive"),N={}.propertyIsEnumerable,G=l("symbol-registry"),F=l("symbols"),U=l("op-symbols"),B=Object.prototype,j="function"==typeof C,V=n.QObject,X=!V||!V.prototype||!V.prototype.findChild,H=a&&u(function(){return 7!=b(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a})?function(t,e,i){var n=P(B,e);n&&delete B[e],M(t,e,i),n&&t!==B&&M(B,e,n)}:M,Y=function(t){var e=F[t]=b(C.prototype);return e._k=t,e},W=j&&"symbol"==typeof C.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof C},z=function(t,e,i){return t===B&&z(U,e,i),y(t),e=E(e,!0),y(i),r(F,e)?(i.enumerable?(r(t,D)&&t[D][e]&&(t[D][e]=!1),i=b(i,{enumerable:S(0,!1)})):(r(t,D)||M(t,D,S(1,{})),t[D][e]=!0),H(t,e,i)):M(t,e,i)},q=function(t,e){y(t);for(var i,n=v(e=T(e)),r=0,a=n.length;a>r;)z(t,i=n[r++],e[i]);return t},K=function(t,e){return void 0===e?b(t):q(b(t),e)},Z=function(t){var e=N.call(this,t=E(t,!0));return!(this===B&&r(F,t)&&!r(U,t))&&(!(e||!r(this,t)||!r(F,t)||r(this,D)&&this[D][t])||e)},J=function(t,e){if(t=T(t),e=E(e,!0),t!==B||!r(F,e)||r(U,e)){var i=P(t,e);return!i||!r(F,e)||r(t,D)&&t[D][e]||(i.enumerable=!0),i}},Q=function(t){for(var e,i=O(T(t)),n=[],a=0;i.length>a;)r(F,e=i[a++])||e==D||e==h||n.push(e);return n},$=function(t){for(var e,i=t===B,n=O(i?U:T(t)),a=[],o=0;n.length>o;)!r(F,e=n[o++])||i&&!r(B,e)||a.push(F[e]);return a};j||(C=function(){if(this instanceof C)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(i){this===B&&e.call(U,i),r(this,D)&&r(this[D],t)&&(this[D][t]=!1),H(this,t,S(1,i))};return a&&X&&H(B,t,{configurable:!0,set:e}),Y(t)},s(C.prototype,"toString",function(){return this._k}),I.f=J,w.f=z,i(50).f=A.f=Q,i(68).f=Z,i(87).f=$,a&&!i(42)&&s(B,"propertyIsEnumerable",Z,!0),p.f=function(t){return Y(d(t))}),o(o.G+o.W+o.F*!j,{Symbol:C});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;tt.length>et;)d(tt[et++]);for(var it=x(d.store),nt=0;it.length>nt;)m(it[nt++]);o(o.S+o.F*!j,"Symbol",{for:function(t){return r(G,t+="")?G[t]:G[t]=C(t)},keyFor:function(t){if(!W(t))throw TypeError(t+" is not a symbol!");for(var e in G)if(G[e]===t)return e},useSetter:function(){X=!0},useSimple:function(){X=!1}}),o(o.S+o.F*!j,"Object",{create:K,defineProperty:z,defineProperties:q,getOwnPropertyDescriptor:J,getOwnPropertyNames:Q,getOwnPropertySymbols:$}),R&&o(o.S+o.F*(!j||u(function(){var t=C();return"[null]"!=k([t])||"{}"!=k({a:t})||"{}"!=k(Object(t))})),"JSON",{stringify:function(t){for(var e,i,n=[t],r=1;arguments.length>r;)n.push(arguments[r++]);if(i=e=n[1],(_(e)||void 0!==t)&&!W(t))return g(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!W(e))return e}),n[1]=e,k.apply(R,n)}}),C.prototype[L]||i(18)(C.prototype,L,C.prototype.valueOf),c(C,"Symbol"),c(Math,"Math",!0),c(n.JSON,"JSON",!0)},function(t,e,i){"use strict";var n=i(0),r=i(92),a=i(130),o=i(1),s=i(55),h=i(11),u=i(6),l=i(2).ArrayBuffer,c=i(91),f=a.ArrayBuffer,d=a.DataView,p=r.ABV&&l.isView,m=f.prototype.slice,v=r.VIEW;n(n.G+n.W+n.F*(l!==f),{ArrayBuffer:f}),n(n.S+n.F*!r.CONSTR,"ArrayBuffer",{isView:function(t){return p&&p(t)||u(t)&&v in t}}),n(n.P+n.U+n.F*i(4)(function(){return!new f(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(t,e){if(void 0!==m&&void 0===e)return m.call(o(this),t);for(var i=o(this).byteLength,n=s(t,i),r=s(void 0===e?i:e,i),a=new(c(this,f))(h(r-n)),u=new d(this),l=new d(a),p=0;n<r;)l.setUint8(p++,u.getUint8(n++));return a}}),i(54)("ArrayBuffer")},function(t,e,i){var n=i(0);n(n.G+n.W+n.F*!i(92).ABV,{DataView:i(130).DataView})},function(t,e,i){i(40)("Float32",4,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){i(40)("Float64",8,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){i(40)("Int16",2,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){i(40)("Int32",4,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){i(40)("Int8",1,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){i(40)("Uint16",2,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){i(40)("Uint32",4,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){i(40)("Uint8",1,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){i(40)("Uint8",1,function(t){return function(e,i,n){return t(this,e,i,n)}},!0)},function(t,e,i){"use strict";var n=i(172),r=i(62);i(80)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return n.def(r(this,"WeakSet"),t,!0)}},n,!1,!0)},function(t,e,i){"use strict";var n=i(0),r=i(173),a=i(12),o=i(11),s=i(16),h=i(109);n(n.P,"Array",{flatMap:function(t){var e,i,n=a(this);return s(t),e=o(n.length),i=h(n,0),r(i,n,n,e,0,1,t,arguments[1]),i}}),i(41)("flatMap")},function(t,e,i){"use strict";var n=i(0),r=i(173),a=i(12),o=i(11),s=i(35),h=i(109);n(n.P,"Array",{flatten:function(){var t=arguments[0],e=a(this),i=o(e.length),n=h(e,0);return r(n,e,e,i,0,void 0===t?1:s(t)),n}}),i(41)("flatten")},function(t,e,i){"use strict";var n=i(0),r=i(79)(!0);n(n.P,"Array",{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i(41)("includes")},function(t,e,i){var n=i(0),r=i(121)(),a=i(2).process,o="process"==i(27)(a);n(n.G,{asap:function(t){var e=o&&a.domain;r(e?e.bind(t):t)}})},function(t,e,i){var n=i(0),r=i(27);n(n.S,"Error",{isError:function(t){return"Error"===r(t)}})},function(t,e,i){var n=i(0);n(n.G,{global:i(2)})},function(t,e,i){i(88)("Map")},function(t,e,i){i(89)("Map")},function(t,e,i){var n=i(0);n(n.P+n.R,"Map",{toJSON:i(171)("Map")})},function(t,e,i){var n=i(0);n(n.S,"Math",{clamp:function(t,e,i){return Math.min(i,Math.max(e,t))}})},function(t,e,i){var n=i(0);n(n.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(t,e,i){var n=i(0),r=180/Math.PI;n(n.S,"Math",{degrees:function(t){return t*r}})},function(t,e,i){var n=i(0),r=i(181),a=i(179);n(n.S,"Math",{fscale:function(t,e,i,n,o){return a(r(t,e,i,n,o))}})},function(t,e,i){var n=i(0);n(n.S,"Math",{iaddh:function(t,e,i,n){var r=t>>>0,a=e>>>0,o=i>>>0;return a+(n>>>0)+((r&o|(r|o)&~(r+o>>>0))>>>31)|0}})},function(t,e,i){var n=i(0);n(n.S,"Math",{imulh:function(t,e){var i=+t,n=+e,r=65535&i,a=65535&n,o=i>>16,s=n>>16,h=(o*a>>>0)+(r*a>>>16);return o*s+(h>>16)+((r*s>>>0)+(65535&h)>>16)}})},function(t,e,i){var n=i(0);n(n.S,"Math",{isubh:function(t,e,i,n){var r=t>>>0,a=e>>>0,o=i>>>0;return a-(n>>>0)-((~r&o|~(r^o)&r-o>>>0)>>>31)|0}})},function(t,e,i){var n=i(0);n(n.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(t,e,i){var n=i(0),r=Math.PI/180;n(n.S,"Math",{radians:function(t){return t*r}})},function(t,e,i){var n=i(0);n(n.S,"Math",{scale:i(181)})},function(t,e,i){var n=i(0);n(n.S,"Math",{signbit:function(t){return(t=+t)!=t?t:0==t?1/t==1/0:t>0}})},function(t,e,i){var n=i(0);n(n.S,"Math",{umulh:function(t,e){var i=+t,n=+e,r=65535&i,a=65535&n,o=i>>>16,s=n>>>16,h=(o*a>>>0)+(r*a>>>16);return o*s+(h>>>16)+((r*s>>>0)+(65535&h)>>>16)}})},function(t,e,i){"use strict";var n=i(0),r=i(12),a=i(16),o=i(10);i(9)&&n(n.P+i(86),"Object",{__defineGetter__:function(t,e){o.f(r(this),t,{get:a(e),enumerable:!0,configurable:!0})}})},function(t,e,i){"use strict";var n=i(0),r=i(12),a=i(16),o=i(10);i(9)&&n(n.P+i(86),"Object",{__defineSetter__:function(t,e){o.f(r(this),t,{set:a(e),enumerable:!0,configurable:!0})}})},function(t,e,i){var n=i(0),r=i(186)(!0);n(n.S,"Object",{entries:function(t){return r(t)}})},function(t,e,i){var n=i(0),r=i(187),a=i(25),o=i(23),s=i(110);n(n.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,i,n=a(t),h=o.f,u=r(n),l={},c=0;u.length>c;)void 0!==(i=h(n,e=u[c++]))&&s(l,e,i);return l}})},function(t,e,i){"use strict";var n=i(0),r=i(12),a=i(36),o=i(24),s=i(23).f;i(9)&&n(n.P+i(86),"Object",{__lookupGetter__:function(t){var e,i=r(this),n=a(t,!0);do{if(e=s(i,n))return e.get}while(i=o(i))}})},function(t,e,i){"use strict";var n=i(0),r=i(12),a=i(36),o=i(24),s=i(23).f;i(9)&&n(n.P+i(86),"Object",{__lookupSetter__:function(t){var e,i=r(this),n=a(t,!0);do{if(e=s(i,n))return e.set}while(i=o(i))}})},function(t,e,i){var n=i(0),r=i(186)(!1);n(n.S,"Object",{values:function(t){return r(t)}})},function(t,e,i){"use strict";var n=i(0),r=i(2),a=i(28),o=i(121)(),s=i(8)("observable"),h=i(16),u=i(1),l=i(47),c=i(53),f=i(18),d=i(48),p=d.RETURN,m=function(t){return null==t?void 0:h(t)},v=function(t){var e=t._c;e&&(t._c=void 0,e())},g=function(t){return void 0===t._o},y=function(t){g(t)||(t._o=void 0,v(t))},_=function(t,e){u(t),this._c=void 0,this._o=t,t=new T(this);try{var i=e(t),n=i;null!=i&&("function"==typeof i.unsubscribe?i=function(){n.unsubscribe()}:h(i),this._c=i)}catch(e){return void t.error(e)}g(this)&&v(this)};_.prototype=c({},{unsubscribe:function(){y(this)}});var T=function(t){this._s=t};T.prototype=c({},{next:function(t){var e=this._s;if(!g(e)){var i=e._o;try{var n=m(i.next);if(n)return n.call(i,t)}catch(t){try{y(e)}finally{throw t}}}},error:function(t){var e=this._s;if(g(e))throw t;var i=e._o;e._o=void 0;try{var n=m(i.error);if(!n)throw t;t=n.call(i,t)}catch(t){try{v(e)}finally{throw t}}return v(e),t},complete:function(t){var e=this._s;if(!g(e)){var i=e._o;e._o=void 0;try{var n=m(i.complete);t=n?n.call(i,t):void 0}catch(t){try{v(e)}finally{throw t}}return v(e),t}}});var E=function(t){l(this,E,"Observable","_f")._f=h(t)};c(E.prototype,{subscribe:function(t){return new _(t,this._f)},forEach:function(t){var e=this;return new(a.Promise||r.Promise)(function(i,n){h(t);var r=e.subscribe({next:function(e){try{return t(e)}catch(t){n(t),r.unsubscribe()}},error:n,complete:i})})}}),c(E,{from:function(t){var e="function"==typeof this?this:E,i=m(u(t)[s]);if(i){var n=u(i.call(t));return n.constructor===e?n:new e(function(t){return n.subscribe(t)})}return new e(function(e){var i=!1;return o(function(){if(!i){try{if(d(t,!1,function(t){if(e.next(t),i)return p})===p)return}catch(t){if(i)throw t;return void e.error(t)}e.complete()}}),function(){i=!0}})},of:function(){for(var t=0,e=arguments.length,i=new Array(e);t<e;)i[t]=arguments[t++];return new("function"==typeof this?this:E)(function(t){var e=!1;return o(function(){if(!e){for(var n=0;n<i.length;++n)if(t.next(i[n]),e)return;t.complete()}}),function(){e=!0}})}}),f(E.prototype,s,function(){return this}),n(n.G,{Observable:E}),i(54)("Observable")},function(t,e,i){"use strict";var n=i(0),r=i(28),a=i(2),o=i(91),s=i(191);n(n.P+n.R,"Promise",{finally:function(t){var e=o(this,r.Promise||a.Promise),i="function"==typeof t;return this.then(i?function(i){return s(e,t()).then(function(){return i})}:t,i?function(i){return s(e,t()).then(function(){throw i})}:t)}})},function(t,e,i){"use strict";var n=i(0),r=i(122),a=i(190);n(n.S,"Promise",{try:function(t){var e=r.f(this),i=a(t);return(i.e?e.reject:e.resolve)(i.v),e.promise}})},function(t,e,i){var n=i(39),r=i(1),a=n.key,o=n.set;n.exp({defineMetadata:function(t,e,i,n){o(t,e,r(i),a(n))}})},function(t,e,i){var n=i(39),r=i(1),a=n.key,o=n.map,s=n.store;n.exp({deleteMetadata:function(t,e){var i=arguments.length<3?void 0:a(arguments[2]),n=o(r(e),i,!1);if(void 0===n||!n.delete(t))return!1;if(n.size)return!0;var h=s.get(e);return h.delete(i),!!h.size||s.delete(e)}})},function(t,e,i){var n=i(197),r=i(167),a=i(39),o=i(1),s=i(24),h=a.keys,u=a.key,l=function(t,e){var i=h(t,e),a=s(t);if(null===a)return i;var o=l(a,e);return o.length?i.length?r(new n(i.concat(o))):o:i};a.exp({getMetadataKeys:function(t){return l(o(t),arguments.length<2?void 0:u(arguments[1]))}})},function(t,e,i){var n=i(39),r=i(1),a=i(24),o=n.has,s=n.get,h=n.key,u=function(t,e,i){if(o(t,e,i))return s(t,e,i);var n=a(e);return null!==n?u(t,n,i):void 0};n.exp({getMetadata:function(t,e){return u(t,r(e),arguments.length<3?void 0:h(arguments[2]))}})},function(t,e,i){var n=i(39),r=i(1),a=n.keys,o=n.key;n.exp({getOwnMetadataKeys:function(t){return a(r(t),arguments.length<2?void 0:o(arguments[1]))}})},function(t,e,i){var n=i(39),r=i(1),a=n.get,o=n.key;n.exp({getOwnMetadata:function(t,e){return a(t,r(e),arguments.length<3?void 0:o(arguments[2]))}})},function(t,e,i){var n=i(39),r=i(1),a=i(24),o=n.has,s=n.key,h=function(t,e,i){if(o(t,e,i))return!0;var n=a(e);return null!==n&&h(t,n,i)};n.exp({hasMetadata:function(t,e){return h(t,r(e),arguments.length<3?void 0:s(arguments[2]))}})},function(t,e,i){var n=i(39),r=i(1),a=n.has,o=n.key;n.exp({hasOwnMetadata:function(t,e){return a(t,r(e),arguments.length<3?void 0:o(arguments[2]))}})},function(t,e,i){var n=i(39),r=i(1),a=i(16),o=n.key,s=n.set;n.exp({metadata:function(t,e){return function(i,n){s(t,e,(void 0!==n?r:a)(i),o(n))}}})},function(t,e,i){i(88)("Set")},function(t,e,i){i(89)("Set")},function(t,e,i){var n=i(0);n(n.P+n.R,"Set",{toJSON:i(171)("Set")})},function(t,e,i){"use strict";var n=i(0),r=i(125)(!0);n(n.P,"String",{at:function(t){return r(this,t)}})},function(t,e,i){"use strict";var n=i(0),r=i(33),a=i(11),o=i(84),s=i(82),h=RegExp.prototype,u=function(t,e){this._r=t,this._s=e};i(117)(u,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),n(n.P,"String",{matchAll:function(t){if(r(this),!o(t))throw TypeError(t+" is not a regexp!");var e=String(this),i="flags"in h?String(t.flags):s.call(t),n=new RegExp(t.source,~i.indexOf("g")?i:"g"+i);return n.lastIndex=a(t.lastIndex),new u(n,e)}})},function(t,e,i){"use strict";var n=i(0),r=i(192),a=i(93);n(n.P+n.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(a),"String",{padEnd:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,i){"use strict";var n=i(0),r=i(192),a=i(93);n(n.P+n.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(a),"String",{padStart:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,i){"use strict";i(61)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,e,i){"use strict";i(61)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,e,i){i(131)("asyncIterator")},function(t,e,i){i(131)("observable")},function(t,e,i){var n=i(0);n(n.S,"System",{global:i(2)})},function(t,e,i){i(88)("WeakMap")},function(t,e,i){i(89)("WeakMap")},function(t,e,i){i(88)("WeakSet")},function(t,e,i){i(89)("WeakSet")},function(t,e,i){for(var n=i(133),r=i(51),a=i(19),o=i(2),s=i(18),h=i(59),u=i(8),l=u("iterator"),c=u("toStringTag"),f=h.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=r(d),m=0;m<p.length;m++){var v,g=p[m],y=d[g],_=o[g],T=_&&_.prototype;if(T&&(T[l]||s(T,l,f),T[c]||s(T,c,g),h[g]=f,y))for(v in n)T[v]||a(T,v,n[v],!0)}},function(t,e,i){var n=i(0),r=i(129);n(n.G+n.B,{setImmediate:r.set,clearImmediate:r.clear})},function(t,e,i){var n=i(2),r=i(0),a=i(93),o=[].slice,s=/MSIE .\./.test(a),h=function(t){return function(e,i){var n=arguments.length>2,r=!!n&&o.call(arguments,2);return t(n?function(){("function"==typeof e?e:Function(e)).apply(this,r)}:e,i)}};r(r.G+r.B+r.F*s,{setTimeout:h(n.setTimeout),setInterval:h(n.setInterval)})},function(t,e,i){i(429),i(368),i(370),i(369),i(372),i(374),i(379),i(373),i(371),i(381),i(380),i(376),i(377),i(375),i(367),i(378),i(382),i(383),i(335),i(337),i(336),i(385),i(384),i(355),i(365),i(366),i(356),i(357),i(358),i(359),i(360),i(361),i(362),i(363),i(364),i(338),i(339),i(340),i(341),i(342),i(343),i(344),i(345),i(346),i(347),i(348),i(349),i(350),i(351),i(352),i(353),i(354),i(416),i(421),i(428),i(419),i(411),i(412),i(417),i(422),i(424),i(407),i(408),i(409),i(410),i(413),i(414),i(415),i(418),i(420),i(423),i(425),i(426),i(427),i(330),i(332),i(331),i(334),i(333),i(319),i(317),i(323),i(320),i(326),i(328),i(316),i(322),i(313),i(327),i(311),i(325),i(324),i(318),i(321),i(310),i(312),i(315),i(314),i(329),i(133),i(401),i(406),i(196),i(402),i(403),i(404),i(405),i(386),i(195),i(197),i(198),i(441),i(430),i(431),i(436),i(439),i(440),i(434),i(437),i(435),i(438),i(432),i(433),i(387),i(388),i(389),i(390),i(391),i(394),i(392),i(393),i(395),i(396),i(397),i(398),i(400),i(399),i(444),i(442),i(443),i(485),i(488),i(487),i(489),i(490),i(486),i(491),i(492),i(466),i(469),i(465),i(463),i(464),i(467),i(468),i(450),i(484),i(449),i(483),i(495),i(497),i(448),i(482),i(494),i(496),i(447),i(493),i(446),i(451),i(452),i(453),i(454),i(455),i(457),i(456),i(458),i(459),i(460),i(462),i(461),i(471),i(472),i(473),i(474),i(476),i(475),i(478),i(477),i(479),i(480),i(481),i(445),i(470),i(500),i(499),i(498),t.exports=i(28)},function(t,e){function i(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function r(t){if(l===setTimeout)return setTimeout(t,0);if((l===i||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function a(t){if(c===clearTimeout)return clearTimeout(t);if((c===n||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(t);try{return c(t)}catch(e){try{return c.call(null,t)}catch(e){return c.call(this,t)}}}function o(){m&&d&&(m=!1,d.length?p=d.concat(p):v=-1,p.length&&s())}function s(){if(!m){var t=r(o);m=!0;for(var e=p.length;e;){for(d=p,p=[];++v<e;)d&&d[v].run();v=-1,e=p.length}d=null,m=!1,a(t)}}function h(t,e){this.fun=t,this.array=e}function u(){}var l,c,f=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:i}catch(t){l=i}try{c="function"==typeof clearTimeout?clearTimeout:n}catch(t){c=n}}();var d,p=[],m=!1,v=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];p.push(new h(t,e)),1!==p.length||m||r(s)},h.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=u,f.addListener=u,f.once=u,f.off=u,f.removeListener=u,f.removeAllListeners=u,f.emit=u,f.prependListener=u,f.prependOnceListener=u,f.listeners=function(t){return[]},f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(t,e,i){(function(t,n){var r;!function(a){function o(t){throw new RangeError(R[t])}function s(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function h(t,e){var i=t.split("@"),n="";return i.length>1&&(n=i[0]+"@",t=i[1]),t=t.replace(C,"."),n+s(t.split("."),e).join(".")}function u(t){for(var e,i,n=[],r=0,a=t.length;r<a;)e=t.charCodeAt(r++),e>=55296&&e<=56319&&r<a?(i=t.charCodeAt(r++),56320==(64512&i)?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),r--)):n.push(e);return n}function l(t){return s(t,function(t){var e="";return t>65535&&(t-=65536,e+=L(t>>>10&1023|55296),t=56320|1023&t),e+=L(t)}).join("")}function c(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:E}function f(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function d(t,e,i){var n=0;for(t=i?D(t/I):t>>1,t+=D(t/e);t>k*b>>1;n+=E)t=D(t/k);return D(n+(k+1)*t/(t+A))}function p(t){var e,i,n,r,a,s,h,u,f,p,m=[],v=t.length,g=0,y=x,_=w;for(i=t.lastIndexOf(P),i<0&&(i=0),n=0;n<i;++n)t.charCodeAt(n)>=128&&o("not-basic"),m.push(t.charCodeAt(n));for(r=i>0?i+1:0;r<v;){for(a=g,s=1,h=E;r>=v&&o("invalid-input"),u=c(t.charCodeAt(r++)),(u>=E||u>D((T-g)/s))&&o("overflow"),g+=u*s,f=h<=_?S:h>=_+b?b:h-_,!(u<f);h+=E)p=E-f,s>D(T/p)&&o("overflow"),s*=p;e=m.length+1,_=d(g-a,e,0==a),D(g/e)>T-y&&o("overflow"),y+=D(g/e),g%=e,m.splice(g++,0,y)}return l(m)}function m(t){var e,i,n,r,a,s,h,l,c,p,m,v,g,y,_,A=[];for(t=u(t),v=t.length,e=x,i=0,a=w,s=0;s<v;++s)(m=t[s])<128&&A.push(L(m));for(n=r=A.length,r&&A.push(P);n<v;){for(h=T,s=0;s<v;++s)(m=t[s])>=e&&m<h&&(h=m);for(g=n+1,h-e>D((T-i)/g)&&o("overflow"),i+=(h-e)*g,e=h,s=0;s<v;++s)if(m=t[s],m<e&&++i>T&&o("overflow"),m==e){for(l=i,c=E;p=c<=a?S:c>=a+b?b:c-a,!(l<p);c+=E)_=l-p,y=E-p,A.push(L(f(p+_%y,0))),l=D(_/y);A.push(L(f(l,0))),a=d(i,g,n==r),i=0,++n}++i,++e}return A.join("")}function v(t){return h(t,function(t){return M.test(t)?p(t.slice(4).toLowerCase()):t})}function g(t){return h(t,function(t){return O.test(t)?"xn--"+m(t):t})}var y=("object"==typeof e&&e&&e.nodeType,"object"==typeof t&&t&&t.nodeType,"object"==typeof n&&n);var _,T=2147483647,E=36,S=1,b=26,A=38,I=700,w=72,x=128,P="-",M=/^xn--/,O=/[^\x20-\x7E]/,C=/[\x2E\u3002\uFF0E\uFF61]/g,R={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},k=E-S,D=Math.floor,L=String.fromCharCode;_={version:"1.4.1",ucs2:{decode:u,encode:l},decode:p,encode:m,toASCII:g,toUnicode:v},void 0!==(r=function(){return _}.call(e,i,e,t))&&(t.exports=r)}()}).call(e,i(605)(t),i(98))},function(t,e,i){"use strict";function n(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var i,s,h=n(t),u=1;u<arguments.length;u++){i=Object(arguments[u]);for(var l in i)a.call(i,l)&&(h[l]=i[l]);if(r){s=r(i);for(var c=0;c<s.length;c++)o.call(i,s[c])&&(h[s[c]]=i[s[c]])}}return h}},function(t,e){var i=new ArrayBuffer(0),n=function(t,e,n,r){this.gl=t,this.buffer=t.createBuffer(),this.type=e||t.ARRAY_BUFFER,this.drawType=r||t.STATIC_DRAW,this.data=i,n&&this.upload(n),this._updateID=0};n.prototype.upload=function(t,e,i){i||this.bind();var n=this.gl;t=t||this.data,e=e||0,this.data.byteLength>=t.byteLength?n.bufferSubData(this.type,e,t):n.bufferData(this.type,t,this.drawType),this.data=t},n.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)},n.createVertexBuffer=function(t,e,i){return new n(t,t.ARRAY_BUFFER,e,i)},n.createIndexBuffer=function(t,e,i){return new n(t,t.ELEMENT_ARRAY_BUFFER,e,i)},n.create=function(t,e,i,r){return new n(t,e,i,r)},n.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},t.exports=n},function(t,e,i){var n=i(201),r=function(t,e,i){this.gl=t,this.framebuffer=t.createFramebuffer(),this.stencil=null,this.texture=null,this.width=e||100,this.height=i||100};r.prototype.enableTexture=function(t){var e=this.gl;this.texture=t||new n(e),this.texture.bind(),this.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture.texture,0)},r.prototype.enableStencil=function(){if(!this.stencil){var t=this.gl;this.stencil=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencil),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.width,this.height)}},r.prototype.clear=function(t,e,i,n){this.bind();var r=this.gl;r.clearColor(t,e,i,n),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT)},r.prototype.bind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer)},r.prototype.unbind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null)},r.prototype.resize=function(t,e){var i=this.gl;this.width=t,this.height=e,this.texture&&this.texture.uploadData(null,t,e),this.stencil&&(i.bindRenderbuffer(i.RENDERBUFFER,this.stencil),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t,e))},r.prototype.destroy=function(){var t=this.gl;this.texture&&this.texture.destroy(),t.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},r.createRGBA=function(t,e,i,a){var o=n.fromData(t,null,e,i);o.enableNearestScaling(),o.enableWrapClamp();var s=new r(t,e,i);return s.enableTexture(o),s.unbind(),s},r.createFloat32=function(t,e,i,a){var o=new n.fromData(t,a,e,i);o.enableNearestScaling(),o.enableWrapClamp();var s=new r(t,e,i);return s.enableTexture(o),s.unbind(),s},t.exports=r},function(t,e,i){var n=i(203),r=i(205),a=i(206),o=i(209),s=i(207),h=function(t,e,i,h,u){this.gl=t,h&&(e=o(e,h),i=o(i,h)),this.program=n(t,e,i,u),this.attributes=r(t,this.program),this.uniformData=a(t,this.program),this.uniforms=s(t,this.uniformData)};h.prototype.bind=function(){return this.gl.useProgram(this.program),this},h.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null,this.gl.deleteProgram(this.program)},t.exports=h},function(t,e,i){function n(t,e){if(this.nativeVaoExtension=null,n.FORCE_NATIVE||(this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=e,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var i=t.getParameter(t.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(i),attribState:new Array(i)}}this.gl=t,this.attributes=[],this.indexBuffer=null,this.dirty=!1}var r=i(202);n.prototype.constructor=n,t.exports=n,n.FORCE_NATIVE=!1,n.prototype.bind=function(){if(this.nativeVao){if(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty)return this.dirty=!1,this.activate(),this;this.indexBuffer&&this.indexBuffer.bind()}else this.activate();return this},n.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},n.prototype.activate=function(){for(var t=this.gl,e=null,i=0;i<this.attributes.length;i++){var n=this.attributes[i];e!==n.buffer&&(n.buffer.bind(),e=n.buffer),t.vertexAttribPointer(n.attribute.location,n.attribute.size,n.type||t.FLOAT,n.normalized||!1,n.stride||0,n.start||0)}return r(t,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},n.prototype.addAttribute=function(t,e,i,n,r,a){return this.attributes.push({buffer:t,attribute:e,location:e.location,type:i||this.gl.FLOAT,normalized:n||!1,stride:r||0,start:a||0}),this.dirty=!0,this},n.prototype.addIndex=function(t){return this.indexBuffer=t,this.dirty=!0,this},n.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},n.prototype.draw=function(t,e,i){var n=this.gl;return this.indexBuffer?n.drawElements(t,e||this.indexBuffer.data.length,n.UNSIGNED_SHORT,2*(i||0)):n.drawArrays(t,i,e||this.getSize()),this},n.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},n.prototype.getSize=function(){var t=this.attributes[0];return t.buffer.data.length/(t.stride/4||t.attribute.size)}},function(t,e){var i=function(t,e){var i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);if(!i)throw new Error("This browser does not support webGL. Try using the canvas renderer");return i};t.exports=i},function(t,e,i){t.exports={compileProgram:i(203),defaultValue:i(204),extractAttributes:i(205),extractUniforms:i(206),generateUniformAccessObject:i(207),setPrecision:i(209),mapSize:i(208),mapType:i(136)}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var a=i(5),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(a),s=i(135),h=n(s),u=i(210),l=n(u);o.utils.mixins.delayMixin(o.DisplayObject.prototype,l.default);var c=100,f=0,d=0,p=2,m=function(){function t(e){r(this,t),!h.default.tablet&&!h.default.phone||navigator.isCocoonJS||this.createTouchHook();var i=document.createElement("div");i.style.width=c+"px",i.style.height=c+"px",i.style.position="absolute",i.style.top=f+"px",i.style.left=d+"px",i.style.zIndex=p,this.div=i,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=e,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return t.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2,e.style.backgroundColor="#FF0000",e.title="HOOK DIV",e.addEventListener("focus",function(){t.isMobileAccessabillity=!0,t.activate(),document.body.removeChild(e)}),document.body.appendChild(e)},t.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},t.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(t){if(t.visible){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,i=0;i<e.length;i++)this.updateAccessibleObjects(e[i])}},t.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),e=t.width/this.renderer.width,i=t.height/this.renderer.height,n=this.div;n.style.left=t.left+"px",n.style.top=t.top+"px",n.style.width=this.renderer.width+"px",n.style.height=this.renderer.height+"px";for(var r=0;r<this.children.length;r++){var a=this.children[r];if(a.renderId!==this.renderId)a._accessibleActive=!1,o.utils.removeItems(this.children,r,1),this.div.removeChild(a._accessibleDiv),this.pool.push(a._accessibleDiv),a._accessibleDiv=null,r--,0===this.children.length&&this.deactivate();else{n=a._accessibleDiv;var s=a.hitArea,h=a.worldTransform;a.hitArea?(n.style.left=(h.tx+s.x*h.a)*e+"px",n.style.top=(h.ty+s.y*h.d)*i+"px",n.style.width=s.width*h.a*e+"px",n.style.height=s.height*h.d*i+"px"):(s=a.getBounds(),this.capHitArea(s),n.style.left=s.x*e+"px",n.style.top=s.y*i+"px",n.style.width=s.width*e+"px",n.style.height=s.height*i+"px",n.title!==a.accessibleTitle&&null!==a.accessibleTitle&&(n.title=a.accessibleTitle),n.getAttribute("aria-label")!==a.accessibleHint&&null!==a.accessibleHint&&n.setAttribute("aria-label",a.accessibleHint))}}this.renderId++}},t.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},t.prototype.addChild=function(t){var e=this.pool.pop();e||(e=document.createElement("button"),e.style.width=c+"px",e.style.height=c+"px",e.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=p,e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},t.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData)},t.prototype._onFocus=function(t){t.target.getAttribute("aria-live","off")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},t.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live","off")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},t.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},t.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},t.prototype.destroy=function(){this.div=null;for(var t=0;t<this.children.length;t++)this.children[t].div=null;window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t}();e.default=m,o.WebGLRenderer.registerPlugin("accessibility",m),o.CanvasRenderer.registerPlugin("accessibility",m)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(210);Object.defineProperty(e,"accessibleTarget",{enumerable:!0,get:function(){return n(r).default}});var a=i(511);Object.defineProperty(e,"AccessibilityManager",{enumerable:!0,get:function(){return n(a).default}})},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(70),h=n(s),u=i(144),l=n(u),c=i(44),f=n(c),d=i(216),p=n(d),m=i(142),v=n(m),g=i(15),y=i(7),_=i(3),T=i(137),E=n(T),S=i(515),b=n(S),A=i(71),I=n(A),w=void 0,x=new g.Matrix,P=new g.Point,M=new Float32Array(4),O=new Float32Array(4),C=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];r(this,e);var n=a(this,t.call(this));return n.fillAlpha=1,n.lineWidth=0,n.nativeLines=i,n.lineColor=0,n.lineAlignment=.5,n.graphicsData=[],n.tint=16777215,n._prevTint=16777215,n.blendMode=_.BLEND_MODES.NORMAL,n.currentPath=null,n._webGL={},n.isMask=!1,n.boundsPadding=0,n._localBounds=new E.default,n.dirty=0,n.fastRectDirty=-1,n.clearDirty=0,n.boundsDirty=-1,n.cachedSpriteDirty=!1,n._spriteRect=null,n._fastRect=!1,n._prevRectTint=null,n._prevRectFillColor=null,n}return o(e,t),e.prototype.clone=function(){var t=new e;t.renderable=this.renderable,t.fillAlpha=this.fillAlpha,t.lineWidth=this.lineWidth,t.lineColor=this.lineColor,t.lineAlignment=this.lineAlignment,t.tint=this.tint,t.blendMode=this.blendMode,t.isMask=this.isMask,t.boundsPadding=this.boundsPadding,t.dirty=0,t.cachedSpriteDirty=this.cachedSpriteDirty;for(var i=0;i<this.graphicsData.length;++i)t.graphicsData.push(this.graphicsData[i].clone());return t.currentPath=t.graphicsData[t.graphicsData.length-1],t.updateLocalBounds(),t},e.prototype._quadraticCurveLength=function(t,e,i,n,r,a){var o=t-(2*i+r),s=e-(2*n+a),h=(i-2)*t*2,u=(n-2)*e*2,l=4*(o*o+s*s),c=4*(o*h+s*u),f=h*h+u*u,d=2*Math.sqrt(l+c+f),p=Math.sqrt(l),m=2*l*p,v=2*Math.sqrt(f),g=c/p;return(m*d+p*c*(d-v)+(4*f*l-c*c)*Math.log((2*p+g+d)/(g+v)))/(4*m)},e.prototype._bezierCurveLength=function(t,e,i,n,r,a,o,s){for(var h=0,u=0,l=0,c=0,f=0,d=0,p=0,m=0,v=0,g=0,y=0,_=t,T=e,E=1;E<=10;++E)u=E/10,l=u*u,c=l*u,f=1-u,d=f*f,p=d*f,m=p*t+3*d*u*i+3*f*l*r+c*o,v=p*e+3*d*u*n+3*f*l*a+c*s,g=_-m,y=T-v,_=m,T=v,h+=Math.sqrt(g*g+y*y);return h},e.prototype._segmentsCount=function(t){var i=Math.ceil(t/e.CURVES.maxLength);return i<e.CURVES.minSegments?i=e.CURVES.minSegments:i>e.CURVES.maxSegments&&(i=e.CURVES.maxSegments),i},e.prototype.lineStyle=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;if(this.lineWidth=t,this.lineColor=e,this.lineAlpha=i,this.lineAlignment=n,this.currentPath)if(this.currentPath.shape.points.length){var r=new g.Polygon(this.currentPath.shape.points.slice(-2));r.closed=!1,this.drawShape(r)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha,this.currentPath.lineAlignment=this.lineAlignment;return this},e.prototype.moveTo=function(t,e){var i=new g.Polygon([t,e]);return i.closed=!1,this.drawShape(i),this},e.prototype.lineTo=function(t,e){var i=this.currentPath.shape.points,n=i[i.length-2],r=i[i.length-1];return n===t&&r===e||(i.push(t,e),this.dirty++),this},e.prototype.quadraticCurveTo=function(t,i,n,r){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var a=this.currentPath.shape.points,o=0,s=0;0===a.length&&this.moveTo(0,0);for(var h=a[a.length-2],u=a[a.length-1],l=e.CURVES.adaptive?this._segmentsCount(this._quadraticCurveLength(h,u,t,i,n,r)):20,c=1;c<=l;++c){var f=c/l;o=h+(t-h)*f,s=u+(i-u)*f,a.push(o+(t+(n-t)*f-o)*f,s+(i+(r-i)*f-s)*f)}return this.dirty++,this},e.prototype.bezierCurveTo=function(t,i,n,r,a,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var s=this.currentPath.shape.points,h=s[s.length-2],u=s[s.length-1];s.length-=2;var l=e.CURVES.adaptive?this._segmentsCount(this._bezierCurveLength(h,u,t,i,n,r,a,o)):20;return(0,b.default)(h,u,t,i,n,r,a,o,l,s),this.dirty++,this},e.prototype.arcTo=function(t,e,i,n,r){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var a=this.currentPath.shape.points,o=a[a.length-2],s=a[a.length-1],h=s-e,u=o-t,l=n-e,c=i-t,f=Math.abs(h*c-u*l);if(f<1e-8||0===r)a[a.length-2]===t&&a[a.length-1]===e||a.push(t,e);else{var d=h*h+u*u,p=l*l+c*c,m=h*l+u*c,v=r*Math.sqrt(d)/f,g=r*Math.sqrt(p)/f,y=v*m/d,_=g*m/p,T=v*c+g*u,E=v*l+g*h,S=u*(g+y),b=h*(g+y),A=c*(v+_),I=l*(v+_),w=Math.atan2(b-E,S-T),x=Math.atan2(I-E,A-T);this.arc(T+t,E+e,r,w,x,u*l>c*h)}return this.dirty++,this},e.prototype.arc=function(t,i,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(r===a)return this;!o&&a<=r?a+=_.PI_2:o&&r<=a&&(r+=_.PI_2);var s=a-r,h=e.CURVES.adaptive?this._segmentsCount(Math.abs(s)*n):40*Math.ceil(Math.abs(s)/_.PI_2);if(0===s)return this;var u=t+Math.cos(r)*n,l=i+Math.sin(r)*n,c=this.currentPath?this.currentPath.shape.points:null;if(c){var f=Math.abs(c[c.length-2]-u),d=Math.abs(c[c.length-1]-l);f<.001&&d<.001||c.push(u,l)}else this.moveTo(u,l),c=this.currentPath.shape.points;for(var p=s/(2*h),m=2*p,v=Math.cos(p),g=Math.sin(p),y=h-1,T=y%1/y,E=0;E<=y;++E){var S=E+T*E,b=p+r+m*S,A=Math.cos(b),I=-Math.sin(b);c.push((v*A+g*I)*n+t,(v*-I+g*A)*n+i)}return this.dirty++,this},e.prototype.beginFill=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=t,this.fillAlpha=e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},e.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},e.prototype.drawRect=function(t,e,i,n){return this.drawShape(new g.Rectangle(t,e,i,n)),this},e.prototype.drawRoundedRect=function(t,e,i,n,r){return this.drawShape(new g.RoundedRectangle(t,e,i,n,r)),this},e.prototype.drawCircle=function(t,e,i){return this.drawShape(new g.Circle(t,e,i)),this},e.prototype.drawEllipse=function(t,e,i,n){return this.drawShape(new g.Ellipse(t,e,i,n)),this},e.prototype.drawPolygon=function(t){var e=t,i=!0;if(e instanceof g.Polygon&&(i=e.closed,e=e.points),!Array.isArray(e)){e=new Array(arguments.length);for(var n=0;n<e.length;++n)e[n]=arguments[n]}var r=new g.Polygon(e);return r.closed=i,this.drawShape(r),this},e.prototype.drawStar=function(t,e,i,n,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;r=r||n/2;for(var o=-1*Math.PI/2+a,s=2*i,h=_.PI_2/s,u=[],l=0;l<s;l++){var c=l%2?r:n,f=l*h+o;u.push(t+c*Math.cos(f),e+c*Math.sin(f))}return this.drawPolygon(u)},e.prototype.clear=function(){return(this.lineWidth||this.filling||this.graphicsData.length>0)&&(this.lineWidth=0,this.lineAlignment=.5,this.filling=!1,this.boundsDirty=-1,this.canvasTintDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},e.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===_.SHAPES.RECT&&!this.graphicsData[0].lineWidth},e.prototype._renderWebGL=function(t){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(t):(t.setObjectRenderer(t.plugins.graphics),t.plugins.graphics.render(this))},e.prototype._renderSpriteRect=function(t){var e=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new v.default(new f.default(f.default.WHITE)));var i=this._spriteRect,n=this.graphicsData[0].fillColor;if(16777215===this.tint)i.tint=n;else if(this.tint!==this._prevRectTint||n!==this._prevRectFillColor){var r=M,a=O;(0,y.hex2rgb)(n,r),(0,y.hex2rgb)(this.tint,a),r[0]*=a[0],r[1]*=a[1],r[2]*=a[2],i.tint=(0,y.rgb2hex)(r),this._prevRectTint=this.tint,this._prevRectFillColor=n}i.alpha=this.graphicsData[0].fillAlpha,i.worldAlpha=this.worldAlpha*i.alpha,i.blendMode=this.blendMode,i._texture._frame.width=e.width,i._texture._frame.height=e.height,i.transform.worldTransform=this.transform.worldTransform,i.anchor.set(-e.x/e.width,-e.y/e.height),i._onAnchorUpdate(),i._renderWebGL(t)},e.prototype._renderCanvas=function(t){!0!==this.isMask&&t.plugins.graphics.render(this)},e.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var t=this._localBounds;this._bounds.addFrame(this.transform,t.minX,t.minY,t.maxX,t.maxY)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,P);for(var e=this.graphicsData,i=0;i<e.length;++i){var n=e[i];if(n.fill&&(n.shape&&n.shape.contains(P.x,P.y))){if(n.holes)for(var r=0;r<n.holes.length;r++){var a=n.holes[r];if(a.contains(P.x,P.y))return!1}return!0}}return!1},e.prototype.updateLocalBounds=function(){var t=1/0,e=-1/0,i=1/0,n=-1/0;if(this.graphicsData.length)for(var r=0,a=0,o=0,s=0,h=0,u=0;u<this.graphicsData.length;u++){var l=this.graphicsData[u],c=l.type,f=l.lineWidth;if(r=l.shape,c===_.SHAPES.RECT||c===_.SHAPES.RREC)a=r.x-f/2,o=r.y-f/2,s=r.width+f,h=r.height+f,t=a<t?a:t,e=a+s>e?a+s:e,i=o<i?o:i,n=o+h>n?o+h:n;else if(c===_.SHAPES.CIRC)a=r.x,o=r.y,s=r.radius+f/2,h=r.radius+f/2,t=a-s<t?a-s:t,e=a+s>e?a+s:e,i=o-h<i?o-h:i,n=o+h>n?o+h:n;else if(c===_.SHAPES.ELIP)a=r.x,o=r.y,s=r.width+f/2,h=r.height+f/2,t=a-s<t?a-s:t,e=a+s>e?a+s:e,i=o-h<i?o-h:i,n=o+h>n?o+h:n;else for(var d=r.points,p=0,m=0,v=0,g=0,y=0,T=0,E=0,S=0,b=0;b+2<d.length;b+=2)a=d[b],o=d[b+1],p=d[b+2],m=d[b+3],v=Math.abs(p-a),g=Math.abs(m-o),h=f,(s=Math.sqrt(v*v+g*g))<1e-9||(y=(h/s*g+v)/2,T=(h/s*v+g)/2,E=(p+a)/2,S=(m+o)/2,t=E-y<t?E-y:t,e=E+y>e?E+y:e,i=S-T<i?S-T:i,n=S+T>n?S+T:n)}else t=0,e=0,i=0,n=0;var A=this.boundsPadding;this._localBounds.minX=t-A,this._localBounds.maxX=e+A,this._localBounds.minY=i-A,this._localBounds.maxY=n+A},e.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new p.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,t,this.lineAlignment);return this.graphicsData.push(e),e.type===_.SHAPES.POLY&&(e.shape.closed=e.shape.closed,this.currentPath=e),this.dirty++,e},e.prototype.generateCanvasTexture=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this.getLocalBounds(),n=l.default.create(i.width,i.height,t,e);w||(w=new I.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(x),x.invert(),x.tx-=i.x,x.ty-=i.y,w.render(this,n,!0,x);var r=f.default.fromCanvas(n.baseTexture._canvasRenderTarget.canvas,t,"graphics");return r.baseTexture.resolution=e,r.baseTexture.update(),r},e.prototype.closePath=function(){var t=this.currentPath;return t&&t.shape&&t.shape.close(),this},e.prototype.addHole=function(){var t=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(t.shape),this.currentPath=null,this},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e);for(var i=0;i<this.graphicsData.length;++i)this.graphicsData[i].destroy();for(var n in this._webGL)for(var r=0;r<this._webGL[n].data.length;++r)this._webGL[n].data[r].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webGL=null,this._localBounds=null},e}(h.default);e.default=C,C._SPRITE_TEXTURE=null,C.CURVES={adaptive:!1,maxLength:10,minSegments:8,maxSegments:2048}},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(71),a=function(t){return t&&t.__esModule?t:{default:t}}(r),o=i(3),s=function(){function t(e){n(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,i=e.context,n=t.worldAlpha,r=t.transform.worldTransform,a=e.resolution;i.setTransform(r.a*a,r.b*a,r.c*a,r.d*a,r.tx*a,r.ty*a),t.canvasTintDirty===t.dirty&&t._prevTint===t.tint||this.updateGraphicsTint(t),e.setBlendMode(t.blendMode);for(var s=0;s<t.graphicsData.length;s++){var h=t.graphicsData[s],u=h.shape,l=h._fillTint,c=h._lineTint;if(i.lineWidth=h.lineWidth,h.type===o.SHAPES.POLY){i.beginPath(),this.renderPolygon(u.points,u.closed,i);for(var f=0;f<h.holes.length;f++)this.renderPolygon(h.holes[f].points,!0,i);h.fill&&(i.globalAlpha=h.fillAlpha*n,i.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),i.fill()),h.lineWidth&&(i.globalAlpha=h.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke())}else if(h.type===o.SHAPES.RECT)(h.fillColor||0===h.fillColor)&&(i.globalAlpha=h.fillAlpha*n,i.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),i.fillRect(u.x,u.y,u.width,u.height)),h.lineWidth&&(i.globalAlpha=h.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.strokeRect(u.x,u.y,u.width,u.height));else if(h.type===o.SHAPES.CIRC)i.beginPath(),i.arc(u.x,u.y,u.radius,0,2*Math.PI),i.closePath(),h.fill&&(i.globalAlpha=h.fillAlpha*n,i.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),i.fill()),h.lineWidth&&(i.globalAlpha=h.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke());else if(h.type===o.SHAPES.ELIP){var d=2*u.width,p=2*u.height,m=u.x-d/2,v=u.y-p/2;i.beginPath();var g=d/2*.5522848,y=p/2*.5522848,_=m+d,T=v+p,E=m+d/2,S=v+p/2;i.moveTo(m,S),i.bezierCurveTo(m,S-y,E-g,v,E,v),i.bezierCurveTo(E+g,v,_,S-y,_,S),i.bezierCurveTo(_,S+y,E+g,T,E,T),i.bezierCurveTo(E-g,T,m,S+y,m,S),i.closePath(),h.fill&&(i.globalAlpha=h.fillAlpha*n,i.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),i.fill()),h.lineWidth&&(i.globalAlpha=h.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke())}else if(h.type===o.SHAPES.RREC){var b=u.x,A=u.y,I=u.width,w=u.height,x=u.radius,P=Math.min(I,w)/2|0;x=x>P?P:x,i.beginPath(),i.moveTo(b,A+x),i.lineTo(b,A+w-x),i.quadraticCurveTo(b,A+w,b+x,A+w),i.lineTo(b+I-x,A+w),i.quadraticCurveTo(b+I,A+w,b+I,A+w-x),i.lineTo(b+I,A+x),i.quadraticCurveTo(b+I,A,b+I-x,A),i.lineTo(b+x,A),i.quadraticCurveTo(b,A,b,A+x),i.closePath(),(h.fillColor||0===h.fillColor)&&(i.globalAlpha=h.fillAlpha*n,i.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),i.fill()),h.lineWidth&&(i.globalAlpha=h.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke())}}},t.prototype.updateGraphicsTint=function(t){t._prevTint=t.tint,t.canvasTintDirty=t.dirty;for(var e=(t.tint>>16&255)/255,i=(t.tint>>8&255)/255,n=(255&t.tint)/255,r=0;r<t.graphicsData.length;++r){var a=t.graphicsData[r],o=0|a.fillColor,s=0|a.lineColor;a._fillTint=((o>>16&255)/255*e*255<<16)+((o>>8&255)/255*i*255<<8)+(255&o)/255*n*255,a._lineTint=((s>>16&255)/255*e*255<<16)+((s>>8&255)/255*i*255<<8)+(255&s)/255*n*255}},t.prototype.renderPolygon=function(t,e,i){i.moveTo(t[0],t[1]);for(var n=1;n<t.length/2;++n)i.lineTo(t[2*n],t[2*n+1]);e&&i.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();e.default=s,a.default.registerPlugin("graphics",s)},function(t,e,i){"use strict";function n(t,e,i,n,r,a,o,s,h){var u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[],l=0,c=0,f=0,d=0,p=0;u.push(t,e);for(var m=1,v=0;m<=h;++m)v=m/h,l=1-v,c=l*l,f=c*l,d=v*v,p=d*v,u.push(f*t+3*c*v*i+3*l*d*r+p*o,f*e+3*c*v*n+3*l*d*a+p*s);return u}e.__esModule=!0,e.default=n},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(7),h=i(3),u=i(96),l=n(u),c=i(95),f=n(c),d=i(517),p=n(d),m=i(518),v=n(m),g=i(520),y=n(g),_=i(521),T=n(_),E=i(522),S=n(E),b=i(519),A=n(b),I=function(t){function e(i){r(this,e);var n=a(this,t.call(this,i));return n.graphicsDataPool=[],n.primitiveShader=null,n.gl=i.gl,n.CONTEXT_UID=0,n}return o(e,t),e.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new v.default(this.gl)},e.prototype.destroy=function(){l.default.prototype.destroy.call(this);for(var t=0;t<this.graphicsDataPool.length;++t)this.graphicsDataPool[t].destroy();this.graphicsDataPool=null},e.prototype.render=function(t){var e=this.renderer,i=e.gl,n=void 0,r=t._webGL[this.CONTEXT_UID];r&&t.dirty===r.dirty||(this.updateGraphics(t),r=t._webGL[this.CONTEXT_UID]);var a=this.primitiveShader;e.bindShader(a),e.state.setBlendMode(t.blendMode);for(var o=0,h=r.data.length;o<h;o++){n=r.data[o];var u=n.shader;e.bindShader(u),u.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),u.uniforms.tint=(0,s.hex2rgb)(t.tint),u.uniforms.alpha=t.worldAlpha,e.bindVao(n.vao),n.nativeLines?i.drawArrays(i.LINES,0,n.points.length/6):n.vao.draw(i.TRIANGLE_STRIP,n.indices.length)}},e.prototype.updateGraphics=function(t){var e=this.renderer.gl,i=t._webGL[this.CONTEXT_UID];if(i||(i=t._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:e,clearDirty:-1,dirty:-1}),i.dirty=t.dirty,t.clearDirty!==i.clearDirty){i.clearDirty=t.clearDirty;for(var n=0;n<i.data.length;n++)this.graphicsDataPool.push(i.data[n]);i.data.length=0,i.lastIndex=0}for(var r=void 0,a=void 0,o=i.lastIndex;o<t.graphicsData.length;o++){var s=t.graphicsData[o];r=this.getWebGLData(i,0),s.nativeLines&&s.lineWidth&&(a=this.getWebGLData(i,0,!0),i.lastIndex++),s.type===h.SHAPES.POLY&&(0,y.default)(s,r,a),s.type===h.SHAPES.RECT?(0,T.default)(s,r,a):s.type===h.SHAPES.CIRC||s.type===h.SHAPES.ELIP?(0,A.default)(s,r,a):s.type===h.SHAPES.RREC&&(0,S.default)(s,r,a),i.lastIndex++}this.renderer.bindVao(null);for(var u=0;u<i.data.length;u++)r=i.data[u],r.dirty&&r.upload()},e.prototype.getWebGLData=function(t,e,i){var n=t.data[t.data.length-1];return(!n||n.nativeLines!==i||n.points.length>32e4)&&(n=this.graphicsDataPool.pop()||new p.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState),n.nativeLines=i,n.reset(e),t.data.push(n)),n.dirty=!0,n},e}(l.default);e.default=I,f.default.registerPlugin("graphics",I)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(26),a=function(t){return t&&t.__esModule?t:{default:t}}(r),o=function(){function t(e,i,r){n(this,t),this.gl=e,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=a.default.GLBuffer.createVertexBuffer(e),this.indexBuffer=a.default.GLBuffer.createIndexBuffer(e),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=i,this.vao=new a.default.VertexArrayObject(e,r).addIndex(this.indexBuffer).addAttribute(this.buffer,i.attributes.aVertexPosition,e.FLOAT,!1,24,0).addAttribute(this.buffer,i.attributes.aColor,e.FLOAT,!1,24,8)}return t.prototype.reset=function(){this.points.length=0,this.indices.length=0},t.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},t.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},t}();e.default=o},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var o=i(69),s=function(t){return t&&t.__esModule?t:{default:t}}(o),h=function(t){function e(i){return n(this,e),r(this,t.call(this,i,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}return a(e,t),e}(s.default);e.default=h},function(t,e,i){"use strict";function n(t,e,i){var n=t.shape,r=n.x,h=n.y,u=void 0,l=void 0;if(t.type===o.SHAPES.CIRC?(u=n.radius,l=n.radius):(u=n.width,l=n.height),0!==u&&0!==l){var c=Math.floor(30*Math.sqrt(n.radius))||Math.floor(15*Math.sqrt(n.width+n.height)),f=2*Math.PI/c;if(t.fill){var d=(0,s.hex2rgb)(t.fillColor),p=t.fillAlpha,m=d[0]*p,v=d[1]*p,g=d[2]*p,y=e.points,_=e.indices,T=y.length/6;_.push(T);for(var E=0;E<c+1;E++)y.push(r,h,m,v,g,p),y.push(r+Math.sin(f*E)*u,h+Math.cos(f*E)*l,m,v,g,p),_.push(T++,T++);_.push(T-1)}if(t.lineWidth){var S=t.points;t.points=[];for(var b=0;b<c;b++)t.points.push(r+Math.sin(f*-b)*u,h+Math.cos(f*-b)*l);t.points.push(t.points[0],t.points[1]),(0,a.default)(t,e,i),t.points=S}}}e.__esModule=!0,e.default=n;var r=i(94),a=function(t){return t&&t.__esModule?t:{default:t}}(r),o=i(3),s=i(7)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e,i){t.points=t.shape.points.slice();var n=t.points;if(t.fill&&n.length>=6){for(var r=[],a=t.holes,h=0;h<a.length;h++){var l=a[h];r.push(n.length/2),n=n.concat(l.points)}var c=e.points,f=e.indices,d=n.length/2,p=(0,s.hex2rgb)(t.fillColor),m=t.fillAlpha,v=p[0]*m,g=p[1]*m,y=p[2]*m,_=(0,u.default)(n,r,2);if(!_)return;for(var T=c.length/6,E=0;E<_.length;E+=3)f.push(_[E]+T),f.push(_[E]+T),f.push(_[E+1]+T),f.push(_[E+2]+T),f.push(_[E+2]+T);for(var S=0;S<d;S++)c.push(n[2*S],n[2*S+1],v,g,y,m)}t.lineWidth>0&&(0,o.default)(t,e,i)}e.__esModule=!0,e.default=r;var a=i(94),o=n(a),s=i(7),h=i(134),u=n(h)},function(t,e,i){"use strict";function n(t,e,i){var n=t.shape,r=n.x,s=n.y,h=n.width,u=n.height;if(t.fill){var l=(0,o.hex2rgb)(t.fillColor),c=t.fillAlpha,f=l[0]*c,d=l[1]*c,p=l[2]*c,m=e.points,v=e.indices,g=m.length/6;m.push(r,s),m.push(f,d,p,c),m.push(r+h,s),m.push(f,d,p,c),m.push(r,s+u),m.push(f,d,p,c),m.push(r+h,s+u),m.push(f,d,p,c),v.push(g,g,g+1,g+2,g+3,g+3)}if(t.lineWidth){var y=t.points;t.points=[r,s,r+h,s,r+h,s+u,r,s+u,r,s],(0,a.default)(t,e,i),t.points=y}}e.__esModule=!0,e.default=n;var r=i(94),a=function(t){return t&&t.__esModule?t:{default:t}}(r),o=i(7)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e,i){var n=t.shape,r=n.x,a=n.y,s=n.width,u=n.height,f=n.radius,d=[];if(d.push(r,a+f),o(r,a+u-f,r,a+u,r+f,a+u,d),o(r+s-f,a+u,r+s,a+u,r+s,a+u-f,d),o(r+s,a+f,r+s,a,r+s-f,a,d),o(r+f,a,r,a,r,a+f+1e-10,d),t.fill){for(var p=(0,c.hex2rgb)(t.fillColor),m=t.fillAlpha,v=p[0]*m,g=p[1]*m,y=p[2]*m,_=e.points,T=e.indices,E=_.length/6,S=(0,h.default)(d,null,2),b=0,A=S.length;b<A;b+=3)T.push(S[b]+E),T.push(S[b]+E),T.push(S[b+1]+E),T.push(S[b+2]+E),T.push(S[b+2]+E);for(var I=0,w=d.length;I<w;I++)_.push(d[I],d[++I],v,g,y,m)}if(t.lineWidth){var x=t.points;t.points=d,(0,l.default)(t,e,i),t.points=x}}function a(t,e,i){return t+(e-t)*i}function o(t,e,i,n,r,o){for(var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],h=s,u=0,l=0,c=0,f=0,d=0,p=0,m=0,v=0;m<=20;++m)v=m/20,u=a(t,i,v),l=a(e,n,v),c=a(i,r,v),f=a(n,o,v),d=a(u,c,v),p=a(l,f,v),h.push(d,p);return h}e.__esModule=!0,e.default=r;var s=i(134),h=n(s),u=i(94),l=n(u),c=i(7)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(141),a=function(t){return t&&t.__esModule?t:{default:t}}(r),o=i(3),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n(this,t),this.x=e,this.y=i,this.radius=r,this.type=o.SHAPES.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.radius*this.radius,n=this.x-t,r=this.y-e;return n*=n,r*=r,n+r<=i},t.prototype.getBounds=function(){return new a.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t}();e.default=s},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(141),a=function(t){return t&&t.__esModule?t:{default:t}}(r),o=i(3),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n(this,t),this.x=e,this.y=i,this.width=r,this.height=a,this.type=o.SHAPES.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,n=(e-this.y)/this.height;return i*=i,n*=n,i+n<=1},t.prototype.getBounds=function(){return new a.default(this.x-this.width,this.y-this.height,this.width,this.height)},t}();e.default=s},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(140),a=function(t){return t&&t.__esModule?t:{default:t}}(r),o=i(3),s=function(){function t(){for(var e=arguments.length,i=Array(e),r=0;r<e;r++)i[r]=arguments[r];if(n(this,t),Array.isArray(i[0])&&(i=i[0]),i[0]instanceof a.default){for(var s=[],h=0,u=i.length;h<u;h++)s.push(i[h].x,i[h].y);i=s}this.closed=!0,this.points=i,this.type=o.SHAPES.POLY}return t.prototype.clone=function(){return new t(this.points.slice())},t.prototype.close=function(){var t=this.points;t[0]===t[t.length-2]&&t[1]===t[t.length-1]||t.push(t[0],t[1])},t.prototype.contains=function(t,e){for(var i=!1,n=this.points.length/2,r=0,a=n-1;r<n;a=r++){var o=this.points[2*r],s=this.points[2*r+1],h=this.points[2*a],u=this.points[2*a+1];s>e!=u>e&&t<(e-s)/(u-s)*(h-o)+o&&(i=!i)}return i},t}();e.default=s},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(3),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;n(this,t),this.x=e,this.y=i,this.width=a,this.height=o,this.radius=s,this.type=r.SHAPES.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var i=t-(this.x+this.radius),n=e-(this.y+this.radius),r=this.radius*this.radius;if(i*i+n*n<=r)return!0;if((i=t-(this.x+this.width-this.radius))*i+n*n<=r)return!0;if(n=e-(this.y+this.height-this.radius),i*i+n*n<=r)return!0;if((i=t-(this.x+this.radius))*i+n*n<=r)return!0}return!1},t}();e.default=a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(3),a=function(){function t(e){n(this,t),this.renderer=e}return t.prototype.pushMask=function(t){var e=this.renderer;e.context.save();var i=t.alpha,n=t.transform.worldTransform,r=e.resolution;e.context.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r,n.ty*r),t._texture||(this.renderGraphicsShape(t),e.context.clip()),t.worldAlpha=i},t.prototype.renderGraphicsShape=function(t){var e=this.renderer.context,i=t.graphicsData.length;if(0!==i){e.beginPath();for(var n=0;n<i;n++){var a=t.graphicsData[n],o=a.shape;if(a.type===r.SHAPES.POLY){var s=o.points;e.moveTo(s[0],s[1]);for(var h=1;h<s.length/2;h++)e.lineTo(s[2*h],s[2*h+1]);s[0]===s[s.length-2]&&s[1]===s[s.length-1]&&e.closePath()}else if(a.type===r.SHAPES.RECT)e.rect(o.x,o.y,o.width,o.height),e.closePath();else if(a.type===r.SHAPES.CIRC)e.arc(o.x,o.y,o.radius,0,2*Math.PI),e.closePath();else if(a.type===r.SHAPES.ELIP){var u=2*o.width,l=2*o.height,c=o.x-u/2,f=o.y-l/2,d=u/2*.5522848,p=l/2*.5522848,m=c+u,v=f+l,g=c+u/2,y=f+l/2;e.moveTo(c,y),e.bezierCurveTo(c,y-p,g-d,f,g,f),e.bezierCurveTo(g+d,f,m,y-p,m,y),e.bezierCurveTo(m,y+p,g+d,v,g,v),e.bezierCurveTo(g-d,v,c,y+p,c,y),e.closePath()}else if(a.type===r.SHAPES.RREC){var _=o.x,T=o.y,E=o.width,S=o.height,b=o.radius,A=Math.min(E,S)/2|0;b=b>A?A:b,e.moveTo(_,T+b),e.lineTo(_,T+S-b),e.quadraticCurveTo(_,T+S,_+b,T+S),e.lineTo(_+E-b,T+S),e.quadraticCurveTo(_+E,T+S,_+E,T+S-b),e.lineTo(_+E,T+b),e.quadraticCurveTo(_+E,T,_+E-b,T),e.lineTo(_+b,T),e.quadraticCurveTo(_,T,_,T+b),e.closePath()}}}},t.prototype.popMask=function(t){t.context.restore(),t.invalidateBlendMode()},t.prototype.destroy=function(){},t}();e.default=a},function(t,e,i){"use strict";function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,o.default)()?(t[r.BLEND_MODES.NORMAL]="source-over",t[r.BLEND_MODES.ADD]="lighter",t[r.BLEND_MODES.MULTIPLY]="multiply",t[r.BLEND_MODES.SCREEN]="screen",t[r.BLEND_MODES.OVERLAY]="overlay",t[r.BLEND_MODES.DARKEN]="darken",t[r.BLEND_MODES.LIGHTEN]="lighten",t[r.BLEND_MODES.COLOR_DODGE]="color-dodge",t[r.BLEND_MODES.COLOR_BURN]="color-burn",t[r.BLEND_MODES.HARD_LIGHT]="hard-light",t[r.BLEND_MODES.SOFT_LIGHT]="soft-light",t[r.BLEND_MODES.DIFFERENCE]="difference",t[r.BLEND_MODES.EXCLUSION]="exclusion",t[r.BLEND_MODES.HUE]="hue",t[r.BLEND_MODES.SATURATION]="saturate",t[r.BLEND_MODES.COLOR]="color",t[r.BLEND_MODES.LUMINOSITY]="luminosity"):(t[r.BLEND_MODES.NORMAL]="source-over",t[r.BLEND_MODES.ADD]="lighter",t[r.BLEND_MODES.MULTIPLY]="source-over",t[r.BLEND_MODES.SCREEN]="source-over",t[r.BLEND_MODES.OVERLAY]="source-over",t[r.BLEND_MODES.DARKEN]="source-over",t[r.BLEND_MODES.LIGHTEN]="source-over",t[r.BLEND_MODES.COLOR_DODGE]="source-over",t[r.BLEND_MODES.COLOR_BURN]="source-over",t[r.BLEND_MODES.HARD_LIGHT]="source-over",t[r.BLEND_MODES.SOFT_LIGHT]="source-over",t[r.BLEND_MODES.DIFFERENCE]="source-over",t[r.BLEND_MODES.EXCLUSION]="source-over",t[r.BLEND_MODES.HUE]="source-over",t[r.BLEND_MODES.SATURATION]="source-over",t[r.BLEND_MODES.COLOR]="source-over",t[r.BLEND_MODES.LUMINOSITY]="source-over"),t[r.BLEND_MODES.NORMAL_NPM]=t[r.BLEND_MODES.NORMAL],t[r.BLEND_MODES.ADD_NPM]=t[r.BLEND_MODES.ADD],t[r.BLEND_MODES.SCREEN_NPM]=t[r.BLEND_MODES.SCREEN],t}e.__esModule=!0,e.default=n;var r=i(3),a=i(221),o=function(t){return t&&t.__esModule?t:{default:t}}(a)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(3),a=i(13),o=function(t){return t&&t.__esModule?t:{default:t}}(a),s=function(){function t(e){n(this,t),this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=o.default.GC_MAX_IDLE,this.checkCountMax=o.default.GC_MAX_CHECK_COUNT,this.mode=o.default.GC_MODE}return t.prototype.update=function(){this.count++,this.mode!==r.GC_MODES.MANUAL&&++this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())},t.prototype.run=function(){for(var t=this.renderer.textureManager,e=t._managedTextures,i=!1,n=0;n<e.length;n++){var r=e[n];!r._glRenderTargets&&this.count-r.touched>this.maxIdle&&(t.destroyTexture(r,!0),e[n]=null,i=!0)}if(i){for(var a=0,o=0;o<e.length;o++)null!==e[o]&&(e[a++]=e[o]);e.length=a}},t.prototype.unload=function(t){var e=this.renderer.textureManager;t._texture&&t._texture._glRenderTargets&&e.destroyTexture(t._texture,!0);for(var i=t.children.length-1;i>=0;i--)this.unload(t.children[i])},t}();e.default=s},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(26),a=i(3),o=i(97),s=function(t){return t&&t.__esModule?t:{default:t}}(o),h=i(7),u=function(){function t(e){n(this,t),this.renderer=e,this.gl=e.gl,this._managedTextures=[]}return t.prototype.bindTexture=function(){},t.prototype.getTexture=function(){},t.prototype.updateTexture=function(t,e){var i=this.gl,n=!!t._glRenderTargets;if(!t.hasLoaded)return null;var o=this.renderer.boundTextures;if(void 0===e){e=0;for(var h=0;h<o.length;++h)if(o[h]===t){e=h;break}}o[e]=t,i.activeTexture(i.TEXTURE0+e);var u=t._glTextures[this.renderer.CONTEXT_UID];if(u)n?t._glRenderTargets[this.renderer.CONTEXT_UID].resize(t.width,t.height):u.upload(t.source);else{if(n){var l=new s.default(this.gl,t.width,t.height,t.scaleMode,t.resolution);l.resize(t.width,t.height),t._glRenderTargets[this.renderer.CONTEXT_UID]=l,u=l.texture}else u=new r.GLTexture(this.gl,null,null,null,null),u.bind(e),u.premultiplyAlpha=!0,u.upload(t.source);t._glTextures[this.renderer.CONTEXT_UID]=u,t.on("update",this.updateTexture,this),t.on("dispose",this.destroyTexture,this),this._managedTextures.push(t),t.isPowerOfTwo?(t.mipmap&&u.enableMipmap(),t.wrapMode===a.WRAP_MODES.CLAMP?u.enableWrapClamp():t.wrapMode===a.WRAP_MODES.REPEAT?u.enableWrapRepeat():u.enableWrapMirrorRepeat()):u.enableWrapClamp(),t.scaleMode===a.SCALE_MODES.NEAREST?u.enableNearestScaling():u.enableLinearScaling()}return u},t.prototype.destroyTexture=function(t,e){if(t=t.baseTexture||t,t.hasLoaded){var i=this.renderer.CONTEXT_UID,n=t._glTextures,r=t._glRenderTargets;if(n[i]&&(this.renderer.unbindTexture(t),n[i].destroy(),t.off("update",this.updateTexture,this),t.off("dispose",this.destroyTexture,this),delete n[i],!e)){var a=this._managedTextures.indexOf(t);-1!==a&&(0,h.removeItems)(this._managedTextures,a,1)}r&&r[i]&&(r[i].destroy(),delete r[i])}},t.prototype.removeAll=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];e._glTextures[this.renderer.CONTEXT_UID]&&delete e._glTextures[this.renderer.CONTEXT_UID]}},t.prototype.destroy=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];this.destroyTexture(e,!0),e.off("update",this.updateTexture,this),e.off("dispose",this.destroyTexture,this)}this._managedTextures=null},t}();e.default=u},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(538),a=function(t){return t&&t.__esModule?t:{default:t}}(r),o=function(){function t(e){n(this,t),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=e,this.maxAttribs=e.getParameter(e.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,a.default)(e),this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")}return t.prototype.push=function(){var t=this.stack[this.stackIndex];t||(t=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var e=0;e<this.activeState.length;e++)t[e]=this.activeState[e]},t.prototype.pop=function(){var t=this.stack[--this.stackIndex];this.setState(t)},t.prototype.setState=function(t){this.setBlend(t[0]),this.setDepthTest(t[1]),this.setFrontFace(t[2]),this.setCullFace(t[3]),this.setBlendMode(t[4])},t.prototype.setBlend=function(t){t=t?1:0,this.activeState[0]!==t&&(this.activeState[0]=t,this.gl[t?"enable":"disable"](this.gl.BLEND))},t.prototype.setBlendMode=function(t){if(t!==this.activeState[4]){this.activeState[4]=t;var e=this.blendModes[t];2===e.length?this.gl.blendFunc(e[0],e[1]):this.gl.blendFuncSeparate(e[0],e[1],e[2],e[3])}},t.prototype.setDepthTest=function(t){t=t?1:0,this.activeState[1]!==t&&(this.activeState[1]=t,this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST))},t.prototype.setCullFace=function(t){t=t?1:0,this.activeState[3]!==t&&(this.activeState[3]=t,this.gl[t?"enable":"disable"](this.gl.CULL_FACE))},t.prototype.setFrontFace=function(t){t=t?1:0,this.activeState[2]!==t&&(this.activeState[2]=t,this.gl.frontFace(this.gl[t?"CW":"CCW"]))},t.prototype.resetAttributes=function(){for(var t=0;t<this.attribState.tempAttribState.length;t++)this.attribState.tempAttribState[t]=0;for(var e=0;e<this.attribState.attribState.length;e++)this.attribState.attribState[e]=0;for(var i=1;i<this.maxAttribs;i++)this.gl.disableVertexAttribArray(i)},t.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var t=0;t<this.activeState.length;++t)this.activeState[t]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},t}();e.default=o},function(t,e,i){"use strict";function n(t,e,i){var n=r(t),a=r(e);return Object.assign(n,a)}function r(t){for(var e=new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"),i={},n=void 0,r=t.replace(/\s+/g," ").split(/\s*;\s*/),a=0;a<r.length;a++){var o=r[a].trim();if(o.indexOf("uniform")>-1){var h=o.split(" "),u=h[1],l=h[2],c=1;l.indexOf("[")>-1&&(n=l.split(/\[|]/),l=n[0],c*=Number(n[1])),l.match(e)||(i[l]={value:s(u,c),name:l,type:u})}}return i}e.__esModule=!0,e.default=n;var a=i(26),o=function(t){return t&&t.__esModule?t:{default:t}}(a),s=o.default.shader.defaultValue},function(t,e,i){"use strict";function n(t,e,i){var n=t.identity();return n.translate(e.x/i.width,e.y/i.height),n.scale(i.width,i.height),n}function r(t,e,i){var n=t.identity();n.translate(e.x/i.width,e.y/i.height);var r=i.width/e.width,a=i.height/e.height;return n.scale(r,a),n}function a(t,e,i,n){var r=n._texture.orig,a=t.set(i.width,0,0,i.height,e.x,e.y),s=n.worldTransform.copy(o.Matrix.TEMP_MATRIX);return s.invert(),a.prepend(s),a.scale(1/r.width,1/r.height),a.translate(n.anchor.x,n.anchor.y),a}e.__esModule=!0,e.calculateScreenSpaceMatrix=n,e.calculateNormalizedScreenSpaceMatrix=r,e.calculateSpriteMatrix=a;var o=i(15)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=i(72),h=n(s),u=i(97),l=n(u),c=i(224),f=n(c),d=i(15),p=i(69),m=n(p),v=i(533),g=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(v),y=i(107),_=n(y),T=function(){function t(){o(this,t),this.renderTarget=null,this.target=null,this.resolution=1,this.sourceFrame=new d.Rectangle,this.destinationFrame=new d.Rectangle,this.filters=[]}return t.prototype.clear=function(){this.filters=null,this.target=null,this.renderTarget=null},t}(),E=function(t){function e(i){o(this,e);var n=r(this,t.call(this,i));return n.gl=n.renderer.gl,n.quad=new f.default(n.gl,i.state.attribState),n.shaderCache={},n.pool={},n.filterData=null,n.managedFilters=[],n.renderer.on("prerender",n.onPrerender,n),n._screenWidth=i.view.width,n._screenHeight=i.view.height,n}return a(e,t),e.prototype.pushFilter=function(t,e){var i=this.renderer,n=this.filterData;if(!n){n=this.renderer._activeRenderTarget.filterStack;var r=new T;r.sourceFrame=r.destinationFrame=this.renderer._activeRenderTarget.size,r.renderTarget=i._activeRenderTarget,this.renderer._activeRenderTarget.filterData=n={index:0,stack:[r]},this.filterData=n}var a=n.stack[++n.index],o=n.stack[0].destinationFrame;a||(a=n.stack[n.index]=new T);var s=t.filterArea&&0===t.filterArea.x&&0===t.filterArea.y&&t.filterArea.width===i.screen.width&&t.filterArea.height===i.screen.height,h=e[0].resolution,u=0|e[0].padding,l=s?i.screen:t.filterArea||t.getBounds(!0),c=a.sourceFrame,f=a.destinationFrame;c.x=(l.x*h|0)/h,c.y=(l.y*h|0)/h,c.width=(l.width*h|0)/h,c.height=(l.height*h|0)/h,s||(n.stack[0].renderTarget.transform||e[0].autoFit&&c.fit(o),c.pad(u)),f.width=c.width,f.height=c.height;var d=this.getPotRenderTarget(i.gl,c.width,c.height,h);a.target=t,a.filters=e,a.resolution=h,a.renderTarget=d,d.setFrame(f,c),i.bindRenderTarget(d),d.clear()},e.prototype.popFilter=function(){var t=this.filterData,e=t.stack[t.index-1],i=t.stack[t.index];this.quad.map(i.renderTarget.size,i.sourceFrame).upload();var n=i.filters;if(1===n.length)n[0].apply(this,i.renderTarget,e.renderTarget,!1,i),this.freePotRenderTarget(i.renderTarget);else{var r=i.renderTarget,a=this.getPotRenderTarget(this.renderer.gl,i.sourceFrame.width,i.sourceFrame.height,i.resolution);a.setFrame(i.destinationFrame,i.sourceFrame),a.clear();var o=0;for(o=0;o<n.length-1;++o){n[o].apply(this,r,a,!0,i);var s=r;r=a,a=s}n[o].apply(this,r,e.renderTarget,!1,i),this.freePotRenderTarget(r),this.freePotRenderTarget(a)}i.clear(),0===--t.index&&(this.filterData=null)},e.prototype.applyFilter=function(t,e,i,n){var r=this.renderer,a=r.gl,o=t.glShaders[r.CONTEXT_UID];o||(t.glShaderKey?(o=this.shaderCache[t.glShaderKey])||(o=new m.default(this.gl,t.vertexSrc,t.fragmentSrc),t.glShaders[r.CONTEXT_UID]=this.shaderCache[t.glShaderKey]=o,this.managedFilters.push(t)):(o=t.glShaders[r.CONTEXT_UID]=new m.default(this.gl,t.vertexSrc,t.fragmentSrc),this.managedFilters.push(t)),r.bindVao(null),this.quad.initVao(o)),r.bindVao(this.quad.vao),r.bindRenderTarget(i),n&&(a.disable(a.SCISSOR_TEST),r.clear(),a.enable(a.SCISSOR_TEST)),i===r.maskManager.scissorRenderTarget&&r.maskManager.pushScissorMask(null,r.maskManager.scissorData),r.bindShader(o);var s=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=s,this.syncUniforms(o,t),r.state.setBlendMode(t.blendMode),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,e.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),a.bindTexture(a.TEXTURE_2D,s._glTextures[this.renderer.CONTEXT_UID].texture)},e.prototype.syncUniforms=function(t,e){var i=e.uniformData,n=e.uniforms,r=1,a=void 0;if(t.uniforms.filterArea){a=this.filterData.stack[this.filterData.index];var o=t.uniforms.filterArea;o[0]=a.renderTarget.size.width,o[1]=a.renderTarget.size.height,o[2]=a.sourceFrame.x,o[3]=a.sourceFrame.y,t.uniforms.filterArea=o}if(t.uniforms.filterClamp){a=a||this.filterData.stack[this.filterData.index];var s=t.uniforms.filterClamp;s[0]=0,s[1]=0,s[2]=(a.sourceFrame.width-1)/a.renderTarget.size.width,s[3]=(a.sourceFrame.height-1)/a.renderTarget.size.height,t.uniforms.filterClamp=s}for(var h in i){var u=i[h].type;if("sampler2d"===u&&0!==n[h]){if(n[h].baseTexture)t.uniforms[h]=this.renderer.bindTexture(n[h].baseTexture,r);else{t.uniforms[h]=r;var l=this.renderer.gl;this.renderer.boundTextures[r]=this.renderer.emptyTextures[r],l.activeTexture(l.TEXTURE0+r),n[h].texture.bind()}r++}else if("mat3"===u)void 0!==n[h].a?t.uniforms[h]=n[h].toArray(!0):t.uniforms[h]=n[h];else if("vec2"===u)if(void 0!==n[h].x){var c=t.uniforms[h]||new Float32Array(2);c[0]=n[h].x,c[1]=n[h].y,t.uniforms[h]=c}else t.uniforms[h]=n[h];else"float"===u?t.uniforms.data[h].value!==i[h]&&(t.uniforms[h]=n[h]):t.uniforms[h]=n[h]}},e.prototype.getRenderTarget=function(t,e){var i=this.filterData.stack[this.filterData.index],n=this.getPotRenderTarget(this.renderer.gl,i.sourceFrame.width,i.sourceFrame.height,e||i.resolution);return n.setFrame(i.destinationFrame,i.sourceFrame),n},e.prototype.returnRenderTarget=function(t){this.freePotRenderTarget(t)},e.prototype.calculateScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return g.calculateScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size)},e.prototype.calculateNormalizedScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return g.calculateNormalizedScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size,e.destinationFrame)},e.prototype.calculateSpriteMatrix=function(t,e){var i=this.filterData.stack[this.filterData.index];return g.calculateSpriteMatrix(t,i.sourceFrame,i.renderTarget.size,e)},e.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.renderer,i=this.managedFilters;e.off("prerender",this.onPrerender,this);for(var n=0;n<i.length;n++)t||i[n].glShaders[e.CONTEXT_UID].destroy(),delete i[n].glShaders[e.CONTEXT_UID];this.shaderCache={},t?this.pool={}:this.emptyPool()},e.prototype.getPotRenderTarget=function(t,e,i,n){var r="screen";e*=n,i*=n,e===this._screenWidth&&i===this._screenHeight||(e=_.default.nextPow2(e),i=_.default.nextPow2(i),r=(65535&e)<<16|65535&i),this.pool[r]||(this.pool[r]=[]);var a=this.pool[r].pop();if(!a){var o=this.renderer.boundTextures[0];t.activeTexture(t.TEXTURE0),a=new l.default(t,e,i,null,1),t.bindTexture(t.TEXTURE_2D,o._glTextures[this.renderer.CONTEXT_UID].texture)}return a.resolution=n,a.defaultFrame.width=a.size.width=e/n,a.defaultFrame.height=a.size.height=i/n,a.filterPoolKey=r,a},e.prototype.emptyPool=function(){for(var t in this.pool){var e=this.pool[t];if(e)for(var i=0;i<e.length;i++)e[i].destroy(!0)}this.pool={}},e.prototype.freePotRenderTarget=function(t){this.pool[t.filterPoolKey].push(t)},e.prototype.onPrerender=function(){if(this._screenWidth!==this.renderer.view.width||this._screenHeight!==this.renderer.view.height){this._screenWidth=this.renderer.view.width,this._screenHeight=this.renderer.view.height;var t=this.pool.screen;if(t)for(var e=0;e<t.length;e++)t[e].destroy(!0);this.pool.screen=[]}},e}(h.default);e.default=E},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(72),h=n(s),u=i(223),l=n(u),c=function(t){function e(i){r(this,e);var n=a(this,t.call(this,i));return n.scissor=!1,n.scissorData=null,n.scissorRenderTarget=null,n.enableScissor=!0,n.alphaMaskPool=[],n.alphaMaskIndex=0,n}return o(e,t),e.prototype.pushMask=function(t,e){if(e.texture)this.pushSpriteMask(t,e);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&e.isFastRect()){var i=e.worldTransform,n=Math.atan2(i.b,i.a);n=Math.round(n*(180/Math.PI)),n%90?this.pushStencilMask(e):this.pushScissorMask(t,e)}else this.pushStencilMask(e)},e.prototype.popMask=function(t,e){e.texture?this.popSpriteMask(t,e):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(t,e):this.popStencilMask(t,e)},e.prototype.pushSpriteMask=function(t,e){var i=this.alphaMaskPool[this.alphaMaskIndex];i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new l.default(e)]),i[0].resolution=this.renderer.resolution,i[0].maskSprite=e,t.filterArea=e.getBounds(!0),this.renderer.filterManager.pushFilter(t,i),this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},e.prototype.pushStencilMask=function(t){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(t)},e.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},e.prototype.pushScissorMask=function(t,e){e.renderable=!0;var i=this.renderer._activeRenderTarget,n=e.getBounds();n.fit(i.size),e.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var r=this.renderer.resolution;this.renderer.gl.scissor(n.x*r,(i.root?i.size.height-n.y-n.height:n.y)*r,n.width*r,n.height*r),this.scissorRenderTarget=i,this.scissorData=e,this.scissor=!0},e.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var t=this.renderer.gl;t.disable(t.SCISSOR_TEST)},e}(h.default);e.default=c},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var o=i(72),s=function(t){return t&&t.__esModule?t:{default:t}}(o),h=function(t){function e(i){n(this,e);var a=r(this,t.call(this,i));return a.stencilMaskStack=null,a}return a(e,t),e.prototype.setMaskStack=function(t){this.stencilMaskStack=t;var e=this.renderer.gl;0===t.length?e.disable(e.STENCIL_TEST):e.enable(e.STENCIL_TEST)},e.prototype.pushStencil=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var e=this.renderer.gl,i=this.stencilMaskStack.length;0===i&&e.enable(e.STENCIL_TEST),this.stencilMaskStack.push(t),e.colorMask(!1,!1,!1,!1),e.stencilFunc(e.EQUAL,i,this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.INCR),this.renderer.plugins.graphics.render(t),this._useCurrent()},e.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var t=this.renderer.gl,e=this.stencilMaskStack.pop();0===this.stencilMaskStack.length?(t.disable(t.STENCIL_TEST),t.clear(t.STENCIL_BUFFER_BIT),t.clearStencil(0)):(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),this.renderer.plugins.graphics.render(e),this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1},e.prototype.destroy=function(){s.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},e}(s.default);e.default=h},function(t,e,i){"use strict";function n(t,e){var i=!e;if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");if(i){var n=document.createElement("canvas");n.width=1,n.height=1,e=o.default.createContext(n)}for(var a=e.createShader(e.FRAGMENT_SHADER);;){var h=s.replace(/%forloop%/gi,r(t));if(e.shaderSource(a,h),e.compileShader(a),e.getShaderParameter(a,e.COMPILE_STATUS))break;t=t/2|0}return i&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").loseContext(),t}function r(t){for(var e="",i=0;i<t;++i)i>0&&(e+="\nelse "),i<t-1&&(e+="if(test == "+i+".0){}");return e}e.__esModule=!0,e.default=n;var a=i(26),o=function(t){return t&&t.__esModule?t:{default:t}}(a),s=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n")},function(t,e,i){"use strict";function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e[r.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.ADD]=[t.ONE,t.DST_ALPHA],e[r.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR],e[r.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.ADD_NPM]=[t.SRC_ALPHA,t.DST_ALPHA,t.ONE,t.DST_ALPHA],e[r.BLEND_MODES.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_COLOR],e}e.__esModule=!0,e.default=n;var r=i(3)},function(t,e,i){"use strict";function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e[r.DRAW_MODES.POINTS]=t.POINTS,e[r.DRAW_MODES.LINES]=t.LINES,e[r.DRAW_MODES.LINE_LOOP]=t.LINE_LOOP,e[r.DRAW_MODES.LINE_STRIP]=t.LINE_STRIP,e[r.DRAW_MODES.TRIANGLES]=t.TRIANGLES,e[r.DRAW_MODES.TRIANGLE_STRIP]=t.TRIANGLE_STRIP,e[r.DRAW_MODES.TRIANGLE_FAN]=t.TRIANGLE_FAN,e}e.__esModule=!0,e.default=n;var r=i(3)},function(t,e,i){"use strict";function n(t){t.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}e.__esModule=!0,e.default=n},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var a=i(71),o=n(a),s=i(3),h=i(15),u=i(143),l=n(u),c=new h.Matrix,f=function(){function t(e){r(this,t),this.renderer=e}return t.prototype.render=function(t){var e=t._texture,i=this.renderer,n=e._frame.width,r=e._frame.height,a=t.transform.worldTransform,o=0,u=0;if(!(e.orig.width<=0||e.orig.height<=0)&&e.baseTexture.source&&(i.setBlendMode(t.blendMode),e.valid)){i.context.globalAlpha=t.worldAlpha;var f=e.baseTexture.scaleMode===s.SCALE_MODES.LINEAR;i.smoothProperty&&i.context[i.smoothProperty]!==f&&(i.context[i.smoothProperty]=f),e.trim?(o=e.trim.width/2+e.trim.x-t.anchor.x*e.orig.width,u=e.trim.height/2+e.trim.y-t.anchor.y*e.orig.height):(o=(.5-t.anchor.x)*e.orig.width,u=(.5-t.anchor.y)*e.orig.height),e.rotate&&(a.copy(c),a=c,h.GroupD8.matrixAppendRotationInv(a,e.rotate,o,u),o=0,u=0),o-=n/2,u-=r/2,i.roundPixels?(i.context.setTransform(a.a,a.b,a.c,a.d,a.tx*i.resolution|0,a.ty*i.resolution|0),o|=0,u|=0):i.context.setTransform(a.a,a.b,a.c,a.d,a.tx*i.resolution,a.ty*i.resolution);var d=e.baseTexture.resolution;16777215!==t.tint?(t.cachedTint===t.tint&&t.tintedTexture.tintId===t._texture._updateID||(t.cachedTint=t.tint,t.tintedTexture=l.default.getTintedTexture(t,t.tint)),i.context.drawImage(t.tintedTexture,0,0,n*d,r*d,o*i.resolution,u*i.resolution,n*i.resolution,r*i.resolution)):i.context.drawImage(e.baseTexture.source,e._frame.x*d,e._frame.y*d,n*d,r*d,o*i.resolution,u*i.resolution,n*i.resolution,r*i.resolution)}},t.prototype.destroy=function(){this.renderer=null},t}();e.default=f,o.default.registerPlugin("sprite",f)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(e){n(this,t),this.vertices=new ArrayBuffer(e),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return t.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},t}();e.default=r},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(96),h=n(s),u=i(95),l=n(u),c=i(146),f=n(c),d=i(544),p=n(d),m=i(537),v=n(m),g=i(542),y=n(g),_=i(13),T=n(_),E=i(7),S=i(26),b=n(S),A=i(107),I=n(A),w=0,x=0,P=function(t){function e(i){r(this,e);var n=a(this,t.call(this,i));n.vertSize=5,n.vertByteSize=4*n.vertSize,n.size=T.default.SPRITE_BATCH_SIZE,n.buffers=[];for(var o=1;o<=I.default.nextPow2(n.size);o*=2)n.buffers.push(new y.default(4*o*n.vertByteSize));n.indices=(0,f.default)(n.size),n.shader=null,n.currentIndex=0,n.groups=[];for(var s=0;s<n.size;s++)n.groups[s]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return n.sprites=[],n.vertexBuffers=[],n.vaos=[],n.vaoMax=2,n.vertexCount=0,n.renderer.on("prerender",n.onPrerender,n),n}return o(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),T.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,v.default)(this.MAX_TEXTURES,t)),this.shader=(0,p.default)(t,this.MAX_TEXTURES),this.indexBuffer=b.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.renderer.bindVao(null);for(var e=this.shader.attributes,i=0;i<this.vaoMax;i++){var n=this.vertexBuffers[i]=b.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),r=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(n,e.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(n,e.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(n,e.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12);e.aTextureId&&r.addAttribute(n,e.aTextureId,t.FLOAT,!1,this.vertByteSize,16),this.vaos[i]=r}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},e.prototype.onPrerender=function(){this.vertexCount=0},e.prototype.render=function(t){this.currentIndex>=this.size&&this.flush(),t._texture._uvs&&(this.sprites[this.currentIndex++]=t)},e.prototype.flush=function(){if(0!==this.currentIndex){var t=this.renderer.gl,e=this.MAX_TEXTURES,i=I.default.nextPow2(this.currentIndex),n=I.default.log2(i),r=this.buffers[n],a=this.sprites,o=this.groups,s=r.float32View,h=r.uint32View,u=this.boundTextures,l=this.renderer.boundTextures,c=this.renderer.textureGC.count,f=0,d=void 0,p=void 0,m=1,v=0,g=o[0],y=void 0,_=void 0,S=E.premultiplyBlendMode[a[0]._texture.baseTexture.premultipliedAlpha?1:0][a[0].blendMode];g.textureCount=0,g.start=0,g.blend=S,w++;var A=void 0;for(A=0;A<e;++A){var P=l[A];P._enabled!==w?(u[A]=P,P._virtalBoundId=A,P._enabled=w):u[A]=this.renderer.emptyTextures[A]}for(w++,A=0;A<this.currentIndex;++A){var M=a[A];a[A]=null,d=M._texture.baseTexture;var O=E.premultiplyBlendMode[Number(d.premultipliedAlpha)][M.blendMode];if(S!==O&&(S=O,p=null,v=e,w++),p!==d&&(p=d,d._enabled!==w)){if(v===e&&(w++,g.size=A-g.start,v=0,g=o[m++],g.blend=S,g.textureCount=0,g.start=A),d.touched=c,-1===d._virtalBoundId)for(var C=0;C<e;++C){var R=(C+x)%e,k=u[R];if(k._enabled!==w){x++,k._virtalBoundId=-1,d._virtalBoundId=R,u[R]=d;break}}d._enabled=w,g.textureCount++,g.ids[v]=d._virtalBoundId,g.textures[v++]=d}if(y=M.vertexData,_=M._texture._uvs.uvsUint32,this.renderer.roundPixels){var D=this.renderer.resolution;s[f]=(y[0]*D|0)/D,s[f+1]=(y[1]*D|0)/D,s[f+5]=(y[2]*D|0)/D,s[f+6]=(y[3]*D|0)/D,s[f+10]=(y[4]*D|0)/D,s[f+11]=(y[5]*D|0)/D,s[f+15]=(y[6]*D|0)/D,s[f+16]=(y[7]*D|0)/D}else s[f]=y[0],s[f+1]=y[1],s[f+5]=y[2],s[f+6]=y[3],s[f+10]=y[4],s[f+11]=y[5],s[f+15]=y[6],s[f+16]=y[7];h[f+2]=_[0],h[f+7]=_[1],h[f+12]=_[2],h[f+17]=_[3];var L=Math.min(M.worldAlpha,1),N=L<1&&d.premultipliedAlpha?(0,E.premultiplyTint)(M._tintRGB,L):M._tintRGB+(255*L<<24);h[f+3]=h[f+8]=h[f+13]=h[f+18]=N,s[f+4]=s[f+9]=s[f+14]=s[f+19]=d._virtalBoundId,f+=20}if(g.size=A-g.start,T.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(r.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var G=this.shader.attributes,F=this.vertexBuffers[this.vertexCount]=b.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),U=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(F,G.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(F,G.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(F,G.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12);G.aTextureId&&U.addAttribute(F,G.aTextureId,t.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=U}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(r.vertices,0,!1),this.vertexCount++}for(A=0;A<e;++A)l[A]._virtalBoundId=-1;for(A=0;A<m;++A){for(var B=o[A],j=B.textureCount,V=0;V<j;V++)p=B.textures[V],l[B.ids[V]]!==p&&this.renderer.bindTexture(p,B.ids[V],!0),p._virtalBoundId=-1;this.renderer.state.setBlendMode(B.blend),t.drawElements(t.TRIANGLES,6*B.size,t.UNSIGNED_SHORT,6*B.start*2)}this.currentIndex=0}},e.prototype.start=function(){this.renderer.bindShader(this.shader),T.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this.vaoMax;e++)this.vertexBuffers[e]&&this.vertexBuffers[e].destroy(),this.vaos[e]&&this.vaos[e].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var i=0;i<this.buffers.length;++i)this.buffers[i].destroy()},e}(h.default);e.default=P,l.default.registerPlugin("sprite",P)},function(t,e,i){"use strict";function n(t,e){var i=s;i=i.replace(/%count%/gi,e),i=i.replace(/%forloop%/gi,r(e));for(var n=new o.default(t,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",i),a=[],h=0;h<e;h++)a[h]=h;return n.bind(),n.uniforms.uSamplers=a,n}function r(t){var e="";e+="\n",e+="\n";for(var i=0;i<t;i++)i>0&&(e+="\nelse "),i<t-1&&(e+="if(textureId == "+i+".0)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+i+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"}e.__esModule=!0,e.default=n;var a=i(69),o=function(t){return t&&t.__esModule?t:{default:t}}(a),s=(i(37),["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n"))},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(142),u=n(h),l=i(44),c=n(l),f=i(15),d=i(7),p=i(3),m=i(13),v=n(m),g=i(226),y=n(g),_=i(225),T=n(_),E=i(554),S=n(E),b={texture:!0,children:!1,baseTexture:!0},A=function(t){function e(i,n,o){r(this,e),o=o||document.createElement("canvas"),o.width=3,o.height=3;var s=c.default.fromCanvas(o,v.default.SCALE_MODE,"text");s.orig=new f.Rectangle,s.trim=new f.Rectangle;var h=a(this,t.call(this,s));return c.default.addToCache(h._texture,h._texture.baseTexture.textureCacheIds[0]),h.canvas=o,h.context=h.canvas.getContext("2d"),h.resolution=v.default.RESOLUTION,h._text=null,h._style=null,h._styleListener=null,h._font="",h.text=i,h.style=n,h.localStyleID=-1,h}return o(e,t),e.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var i=this.context,n=T.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),r=n.width,a=n.height,o=n.lines,s=n.lineHeight,h=n.lineWidths,u=n.maxLineWidth,l=n.fontProperties;this.canvas.width=Math.ceil((Math.max(1,r)+2*e.padding)*this.resolution),this.canvas.height=Math.ceil((Math.max(1,a)+2*e.padding)*this.resolution),i.scale(this.resolution,this.resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.strokeStyle=e.stroke,i.lineWidth=e.strokeThickness,i.textBaseline=e.textBaseline,i.lineJoin=e.lineJoin,i.miterLimit=e.miterLimit;var c=void 0,f=void 0;if(e.dropShadow){i.fillStyle=e.dropShadowColor,i.globalAlpha=e.dropShadowAlpha,i.shadowBlur=e.dropShadowBlur,e.dropShadowBlur>0&&(i.shadowColor=e.dropShadowColor);for(var d=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,p=Math.sin(e.dropShadowAngle)*e.dropShadowDistance,m=0;m<o.length;m++)c=e.strokeThickness/2,f=e.strokeThickness/2+m*s+l.ascent,"right"===e.align?c+=u-h[m]:"center"===e.align&&(c+=(u-h[m])/2),e.fill&&(this.drawLetterSpacing(o[m],c+d+e.padding,f+p+e.padding),e.stroke&&e.strokeThickness&&(i.strokeStyle=e.dropShadowColor,this.drawLetterSpacing(o[m],c+d+e.padding,f+p+e.padding,!0),i.strokeStyle=e.stroke))}i.shadowBlur=0,i.globalAlpha=1,i.fillStyle=this._generateFillStyle(e,o);for(var v=0;v<o.length;v++)c=e.strokeThickness/2,f=e.strokeThickness/2+v*s+l.ascent,"right"===e.align?c+=u-h[v]:"center"===e.align&&(c+=(u-h[v])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(o[v],c+e.padding,f+e.padding,!0),e.fill&&this.drawLetterSpacing(o[v],c+e.padding,f+e.padding);this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=this._style,a=r.letterSpacing;if(0===a)return void(n?this.context.strokeText(t,e,i):this.context.fillText(t,e,i));for(var o=String.prototype.split.call(t,""),s=e,h=0,u="";h<t.length;)u=o[h++],n?this.context.strokeText(u,s,i):this.context.fillText(u,s,i),s+=this.context.measureText(u).width+a},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=(0,S.default)(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var i=this._texture,n=this._style,r=n.trim?0:n.padding,a=i.baseTexture;a.hasLoaded=!0,a.resolution=this.resolution,a.realWidth=t.width,a.realHeight=t.height,a.width=t.width/this.resolution,a.height=t.height/this.resolution,i.trim.width=i._frame.width=t.width/this.resolution,i.trim.height=i._frame.height=t.height/this.resolution,i.trim.x=-r,i.trim.y=-r,i.orig.width=i._frame.width-2*r,i.orig.height=i._frame.height-2*r,this._onTextureUpdate(),a.emit("update",a),this.dirty=!1},e.prototype.renderWebGL=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype.renderWebGL.call(this,e)},e.prototype._renderCanvas=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._renderCanvas.call(this,e)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._onStyleChange=function(){this.dirty=!0},e.prototype._generateFillStyle=function(t,e){if(!Array.isArray(t.fill))return t.fill;if(navigator.isCocoonJS)return t.fill[0];var i=void 0,n=void 0,r=void 0,a=void 0,o=this.canvas.width/this.resolution,s=this.canvas.height/this.resolution,h=t.fill.slice(),u=t.fillGradientStops.slice();if(!u.length)for(var l=h.length+1,c=1;c<l;++c)u.push(c/l);if(h.unshift(t.fill[0]),u.unshift(0),h.push(t.fill[t.fill.length-1]),u.push(1),t.fillGradientType===p.TEXT_GRADIENT.LINEAR_VERTICAL){i=this.context.createLinearGradient(o/2,0,o/2,s),n=(h.length+1)*e.length,r=0;for(var f=0;f<e.length;f++){r+=1;for(var d=0;d<h.length;d++)a="number"==typeof u[d]?u[d]/e.length+f/e.length:r/n,i.addColorStop(a,h[d]),r++}}else{i=this.context.createLinearGradient(0,s/2,o,s/2),n=h.length+1,r=1;for(var m=0;m<h.length;m++)a="number"==typeof u[m]?u[m]:r/n,i.addColorStop(a,h[m]),r++}return i},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},b,e),t.prototype.destroy.call(this,e),this.context=null,this.canvas=null,this._style=null},s(e,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=(0,d.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=(0,d.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"style",get:function(){return this._style},set:function(t){t=t||{},t instanceof y.default?this._style=t:this._style=new y.default(t),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(t){t=String(""===t||null===t||void 0===t?" ":t),this._text!==t&&(this._text=t,this.dirty=!0)}}]),e}(u.default);e.default=A},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(5),o=i(7),s=function(){function t(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n(this,t),this.baseTexture=e,this.textures={},this.animations={},this.data=i,this.resolution=this._updateResolution(r||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return r(t,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),t.prototype._updateResolution=function(t){var e=this.data.meta.scale,i=(0,o.getResolutionOfUrl)(t,null);return null===i&&(i=void 0!==e?parseFloat(e):1),1!==i&&(this.baseTexture.resolution=i,this.baseTexture.update()),i},t.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},t.prototype._processFrames=function(e){for(var i=e,n=t.BATCH_SIZE,r=this.baseTexture.sourceScale;i-e<n&&i<this._frameKeys.length;){var o=this._frameKeys[i],s=this._frames[o],h=s.frame;if(h){var u=null,l=null,c=!1!==s.trimmed&&s.sourceSize?s.sourceSize:s.frame,f=new a.Rectangle(0,0,Math.floor(c.w*r)/this.resolution,Math.floor(c.h*r)/this.resolution);u=s.rotated?new a.Rectangle(Math.floor(h.x*r)/this.resolution,Math.floor(h.y*r)/this.resolution,Math.floor(h.h*r)/this.resolution,Math.floor(h.w*r)/this.resolution):new a.Rectangle(Math.floor(h.x*r)/this.resolution,Math.floor(h.y*r)/this.resolution,Math.floor(h.w*r)/this.resolution,Math.floor(h.h*r)/this.resolution),!1!==s.trimmed&&s.spriteSourceSize&&(l=new a.Rectangle(Math.floor(s.spriteSourceSize.x*r)/this.resolution,Math.floor(s.spriteSourceSize.y*r)/this.resolution,Math.floor(h.w*r)/this.resolution,Math.floor(h.h*r)/this.resolution)),this.textures[o]=new a.Texture(this.baseTexture,u,f,l,s.rotated?2:0,s.anchor),a.Texture.addToCache(this.textures[o],o)}i++}},t.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];for(var i=t[e],n=Array.isArray(i),r=0,i=n?i:i[Symbol.iterator]();;){var a;if(n){if(r>=i.length)break;a=i[r++]}else{if(r=i.next(),r.done)break;a=r.value}var o=a;this.animations[e].push(this.textures[o])}}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())},0)},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&this.baseTexture.destroy(),this.baseTexture=null},t}();e.default=s},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(13),s=n(o),h=i(3),u=i(548),l=n(u),c=function(){function t(){var e=this;r(this,t),this._head=new l.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/s.default.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.UPDATE_PRIORITY.NORMAL;return this._addListener(new l.default(t,e,i))},t.prototype.addOnce=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.UPDATE_PRIORITY.NORMAL;return this._addListener(new l.default(t,e,i,!0))},t.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}else t.connect(i);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var i=this._head.next;i;)i=i.match(t,e)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this},t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null},t.prototype.update=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now(),e=void 0;if(t>this.lastTime){e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),this.deltaTime=e*s.default.TARGET_FPMS*this.speed;for(var i=this._head,n=i.next;n;)n=n.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=t},a(t,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(Math.max(0,t)/1e3,s.default.TARGET_FPMS);this._maxElapsedMS=1/e}}]),t}();e.default=c},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n(this,t),this.fn=e,this.context=i,this.priority=r,this.once=a,this.next=null,this.previous=null,this._destroyed=!1}return t.prototype.match=function(t,e){return e=e||null,this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}();e.default=r},function(t,e,i){"use strict";function n(){return!(!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))}e.__esModule=!0,e.default=n},function(t,e,i){"use strict";function n(){for(var t=[],e=[],i=0;i<32;i++)t[i]=i,e[i]=i;t[r.BLEND_MODES.NORMAL_NPM]=r.BLEND_MODES.NORMAL,t[r.BLEND_MODES.ADD_NPM]=r.BLEND_MODES.ADD,t[r.BLEND_MODES.SCREEN_NPM]=r.BLEND_MODES.SCREEN,e[r.BLEND_MODES.NORMAL]=r.BLEND_MODES.NORMAL_NPM,e[r.BLEND_MODES.ADD]=r.BLEND_MODES.ADD_NPM,e[r.BLEND_MODES.SCREEN]=r.BLEND_MODES.SCREEN_NPM;var n=[];return n.push(e),n.push(t),n}e.__esModule=!0,e.default=n;var r=i(3)},function(t,e,i){"use strict";function n(t){return a.default.tablet||a.default.phone?4:t}e.__esModule=!0,e.default=n;var r=i(135),a=function(t){return t&&t.__esModule?t:{default:t}}(r)},function(t,e,i){"use strict";function n(t,e){if(t&&e)for(var i=Object.keys(e),n=0;n<i.length;++n){var r=i[n];Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}}function r(t,e){o.push(t,e)}function a(){for(var t=0;t<o.length;t+=2)n(o[t],o[t+1]);o.length=0}e.__esModule=!0,e.mixin=n,e.delayMixin=r,e.performMixins=a;var o=[]},function(t,e,i){"use strict";function n(t){t.__plugins={},t.registerPlugin=function(e,i){t.__plugins[e]=i},t.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var e in t.__plugins)this.plugins[e]=new t.__plugins[e](this)},t.prototype.destroyPlugins=function(){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;this.plugins=null}}e.__esModule=!0,e.default={mixin:function(t){n(t)}}},function(t,e,i){"use strict";function n(t){var e=t.width,i=t.height,n=t.getContext("2d"),r=n.getImageData(0,0,e,i),a=r.data,o=a.length,s={top:null,left:null,right:null,bottom:null},h=null,u=void 0,l=void 0,c=void 0;for(u=0;u<o;u+=4)0!==a[u+3]&&(l=u/4%e,c=~~(u/4/e),null===s.top&&(s.top=c),null===s.left?s.left=l:l<s.left&&(s.left=l),null===s.right?s.right=l+1:s.right<l&&(s.right=l+1),null===s.bottom?s.bottom=c:s.bottom<c&&(s.bottom=c));return null!==s.top&&(e=s.right-s.left,i=s.bottom-s.top+1,h=n.getImageData(s.left,s.top,e,i)),{height:i,width:e,data:h}}e.__esModule=!0,e.default=n},function(t,e,i){"use strict";function n(t){if(!a[t]){var e=(new Error).stack;void 0===e?console.warn("Deprecation Warning: ",t):(e=e.split("\n").splice(3).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",t),console.warn(e),console.groupEnd()):(console.warn("Deprecation Warning: ",t),console.warn(e))),a[t]=!0}}function r(t){var e=t.mesh,i=t.particles,r=t.extras,a=t.filters,o=t.prepare,s=t.loaders,h=t.interaction;Object.defineProperties(t,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.")}},Stage:{get:function(){return n("You do not need to use a PIXI Stage any more, you can simply render any container."),t.Container}},DisplayObjectContainer:{get:function(){return n("DisplayObjectContainer has been shortened to Container, please use Container from now on."),t.Container}},Strip:{get:function(){return n("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),e.Mesh}},Rope:{get:function(){return n("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),e.Rope}},ParticleContainer:{get:function(){return n("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),i.ParticleContainer}},MovieClip:{get:function(){return n("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),r.AnimatedSprite}},TilingSprite:{get:function(){return n("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),r.TilingSprite}},BitmapText:{get:function(){return n("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),r.BitmapText}},blendModes:{get:function(){return n("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),t.BLEND_MODES}},scaleModes:{get:function(){return n("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),t.SCALE_MODES}},BaseTextureCache:{get:function(){return n("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),t.utils.BaseTextureCache}},TextureCache:{get:function(){return n("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),t.utils.TextureCache}},math:{get:function(){return n("The math namespace is deprecated, please access members already accessible on PIXI."),t}},AbstractFilter:{get:function(){return n("AstractFilter has been renamed to Filter, please use PIXI.Filter"),t.Filter}},TransformManual:{get:function(){return n("TransformManual has been renamed to TransformBase, please update your pixi-spine"),t.TransformBase}},TARGET_FPMS:{get:function(){return n("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),t.settings.TARGET_FPMS},set:function(e){n("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),t.settings.TARGET_FPMS=e}},FILTER_RESOLUTION:{get:function(){return n("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),t.settings.FILTER_RESOLUTION},set:function(e){n("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),t.settings.FILTER_RESOLUTION=e}},RESOLUTION:{get:function(){return n("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),t.settings.RESOLUTION},set:function(e){n("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),t.settings.RESOLUTION=e}},MIPMAP_TEXTURES:{get:function(){return n("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),t.settings.MIPMAP_TEXTURES},set:function(e){n("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),t.settings.MIPMAP_TEXTURES=e}},SPRITE_BATCH_SIZE:{get:function(){return n("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),t.settings.SPRITE_BATCH_SIZE},set:function(e){n("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),t.settings.SPRITE_BATCH_SIZE=e}},SPRITE_MAX_TEXTURES:{get:function(){return n("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),t.settings.SPRITE_MAX_TEXTURES},set:function(e){n("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),t.settings.SPRITE_MAX_TEXTURES=e}},RETINA_PREFIX:{get:function(){return n("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),t.settings.RETINA_PREFIX},set:function(e){n("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),t.settings.RETINA_PREFIX=e}},DEFAULT_RENDER_OPTIONS:{get:function(){return n("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),t.settings.RENDER_OPTIONS}}});for(var u=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],l=0;l<u.length;l++)!function(e){var i=u[e];Object.defineProperty(t[i.parent],"DEFAULT",{get:function(){return n("PIXI."+i.parent+".DEFAULT has been deprecated, please use PIXI.settings."+i.target),t.settings[i.target]},set:function(e){n("PIXI."+i.parent+".DEFAULT has been deprecated, please use PIXI.settings."+i.target),t.settings[i.target]=e}})}(l);Object.defineProperties(t.settings,{PRECISION:{get:function(){return n("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),t.settings.PRECISION_FRAGMENT},set:function(e){n("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),t.settings.PRECISION_FRAGMENT=e}}}),r.AnimatedSprite&&Object.defineProperties(r,{MovieClip:{get:function(){return n("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),r.AnimatedSprite}}}),r&&Object.defineProperties(r,{TextureTransform:{get:function(){return n("The TextureTransform class has been renamed to TextureMatrix, please use PIXI.TextureMatrix from now on."),t.TextureMatrix}}}),t.DisplayObject.prototype.generateTexture=function(t,e,i){return n("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),t.generateTexture(this,e,i)},t.Graphics.prototype.generateTexture=function(t,e){return n("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(t,e)},t.GroupD8.isSwapWidthHeight=function(e){return n("GroupD8.isSwapWidthHeight was renamed to GroupD8.isVertical"),t.GroupD8.isVertical(e)},t.RenderTexture.prototype.render=function(t,e,i,r){this.legacyRenderer.render(t,this,i,e,!r),n("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},t.RenderTexture.prototype.getImage=function(t){return n("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(t)},t.RenderTexture.prototype.getBase64=function(t){return n("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(t)},t.RenderTexture.prototype.getCanvas=function(t){return n("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(t)},t.RenderTexture.prototype.getPixels=function(t){return n("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(t)},t.Sprite.prototype.setTexture=function(t){this.texture=t,n("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},r.BitmapText&&(r.BitmapText.prototype.setText=function(t){this.text=t,n("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")}),t.Text.prototype.setText=function(t){this.text=t,n("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},t.Text.calculateFontProperties=function(e){return n("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"),t.TextMetrics.measureFont(e)},Object.defineProperties(t.Text,{fontPropertiesCache:{get:function(){return n("Text.fontPropertiesCache is deprecated"),t.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return n("Text.fontPropertiesCanvas is deprecated"),t.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return n("Text.fontPropertiesContext is deprecated"),t.TextMetrics._context}}}),t.Text.prototype.setStyle=function(t){this.style=t,n("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},t.Text.prototype.determineFontProperties=function(e){return n("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"),t.TextMetrics.measureFont(e)},t.Text.getFontStyle=function(e){return n("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"),e=e||{},e instanceof t.TextStyle||(e=new t.TextStyle(e)),e.toFontString()},Object.defineProperties(t.TextStyle.prototype,{font:{get:function(){n("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var t="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+t+" "+this._fontFamily},set:function(t){n("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),t.indexOf("italic")>1?this._fontStyle="italic":t.indexOf("oblique")>-1?this._fontStyle="oblique":this._fontStyle="normal",t.indexOf("small-caps")>-1?this._fontVariant="small-caps":this._fontVariant="normal";var e=t.split(" "),i=-1;this._fontSize=26;for(var r=0;r<e.length;++r)if(e[r].match(/(px|pt|em|%)/)){i=r,this._fontSize=e[r];break}this._fontWeight="normal";for(var a=0;a<i;++a)if(e[a].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=e[a];break}if(i>-1&&i<e.length-1){this._fontFamily="";for(var o=i+1;o<e.length;++o)this._fontFamily+=e[o]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),t.Texture.prototype.setFrame=function(t){this.frame=t,n("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},t.Texture.addTextureToCache=function(e,i){t.Texture.addToCache(e,i),n("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")},t.Texture.removeTextureFromCache=function(e){return n("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"),t.BaseTexture.removeFromCache(e),t.Texture.removeFromCache(e)},Object.defineProperties(a,{AbstractFilter:{get:function(){return n("AstractFilter has been renamed to Filter, please use PIXI.Filter"),t.AbstractFilter}},SpriteMaskFilter:{get:function(){return n("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),t.SpriteMaskFilter}},VoidFilter:{get:function(){return n("VoidFilter has been renamed to AlphaFilter, please use PIXI.filters.AlphaFilter"),a.AlphaFilter}}}),t.utils.uuid=function(){return n("utils.uuid() is deprecated, please use utils.uid() from now on."),t.utils.uid()},t.utils.canUseNewCanvasBlendModes=function(){return n("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),t.CanvasTinter.canUseMultiply};var c=!0;if(Object.defineProperty(t.utils,"_saidHello",{set:function(t){t&&(n("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),c=t},get:function(){return c}}),o.BasePrepare&&(o.BasePrepare.prototype.register=function(t,e){return n("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"),t&&this.registerFindHook(t),e&&this.registerUploadHook(e),this}),o.canvas&&Object.defineProperty(o.canvas,"UPLOADS_PER_FRAME",{set:function(){n("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return n("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),o.webgl&&Object.defineProperty(o.webgl,"UPLOADS_PER_FRAME",{set:function(){n("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return n("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),s.Loader){var f=s.Resource,d=s.Loader;Object.defineProperties(f.prototype,{isJson:{get:function(){return n("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===f.TYPE.JSON}},isXml:{get:function(){return n("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===f.TYPE.XML}},isImage:{get:function(){return n("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===f.TYPE.IMAGE}},isAudio:{get:function(){return n("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),this.type===f.TYPE.AUDIO}},isVideo:{get:function(){return n("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===f.TYPE.VIDEO}}}),Object.defineProperties(d.prototype,{before:{get:function(){return n("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return n("The after() method is deprecated, please use use()."),this.use}}})}h.interactiveTarget&&Object.defineProperty(h.interactiveTarget,"defaultCursor",{set:function(t){n("Property defaultCursor has been replaced with 'cursor'. "),this.cursor=t},get:function(){return n("Property defaultCursor has been replaced with 'cursor'. "),this.cursor}}),h.InteractionManager&&(Object.defineProperty(h.InteractionManager,"defaultCursorStyle",{set:function(t){n("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default=t},get:function(){return n("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default}}),Object.defineProperty(h.InteractionManager,"currentCursorStyle",{set:function(t){n("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode=t},get:function(){return n("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode}}))}e.__esModule=!0,e.default=r;var a={}},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(5),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(r),o=new a.Rectangle,s=function(){function t(e){n(this,t),this.renderer=e,e.extract=this}return t.prototype.image=function(t){var e=new Image;return e.src=this.base64(t),e},t.prototype.base64=function(t){return this.canvas(t).toDataURL()},t.prototype.canvas=function(t){var e=this.renderer,i=void 0,n=void 0,r=void 0,s=void 0;t&&(s=t instanceof a.RenderTexture?t:e.generateTexture(t)),s?(i=s.baseTexture._canvasRenderTarget.context,n=s.baseTexture._canvasRenderTarget.resolution,r=s.frame):(i=e.rootContext,r=o,r.width=this.renderer.width,r.height=this.renderer.height);var h=r.width*n,u=r.height*n,l=new a.CanvasRenderTarget(h,u,1),c=i.getImageData(r.x*n,r.y*n,h,u);return l.context.putImageData(c,0,0),l.canvas},t.prototype.pixels=function(t){var e=this.renderer,i=void 0,n=void 0,r=void 0,s=void 0;return t&&(s=t instanceof a.RenderTexture?t:e.generateTexture(t)),s?(i=s.baseTexture._canvasRenderTarget.context,n=s.baseTexture._canvasRenderTarget.resolution,r=s.frame):(i=e.rootContext,r=o,r.width=e.width,r.height=e.height),i.getImageData(0,0,r.width*n,r.height*n).data},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t}();e.default=s,a.CanvasRenderer.registerPlugin("extract",s)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(558);Object.defineProperty(e,"webgl",{enumerable:!0,get:function(){return n(r).default}});var a=i(556);Object.defineProperty(e,"canvas",{enumerable:!0,get:function(){return n(a).default}})},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(5),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(r),o=new a.Rectangle,s=function(){function t(e){n(this,t),this.renderer=e,e.extract=this}return t.prototype.image=function(t){var e=new Image;return e.src=this.base64(t),e},t.prototype.base64=function(t){return this.canvas(t).toDataURL()},t.prototype.canvas=function(t){var e=this.renderer,i=void 0,n=void 0,r=void 0,s=!1,h=void 0,u=!1;t&&(t instanceof a.RenderTexture?h=t:(h=this.renderer.generateTexture(t),u=!0)),h?(i=h.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],n=i.resolution,r=h.frame,s=!1):(i=this.renderer.rootRenderTarget,n=i.resolution,s=!0,r=o,r.width=i.size.width,r.height=i.size.height);var l=r.width*n,c=r.height*n,f=new a.CanvasRenderTarget(l,c,1);if(i){e.bindRenderTarget(i);var d=new Uint8Array(4*l*c),p=e.gl;p.readPixels(r.x*n,r.y*n,l,c,p.RGBA,p.UNSIGNED_BYTE,d);var m=f.context.getImageData(0,0,l,c);m.data.set(d),f.context.putImageData(m,0,0),s&&(f.context.scale(1,-1),f.context.drawImage(f.canvas,0,-c))}return u&&h.destroy(!0),f.canvas},t.prototype.pixels=function(t){var e=this.renderer,i=void 0,n=void 0,r=void 0,s=void 0,h=!1;t&&(t instanceof a.RenderTexture?s=t:(s=this.renderer.generateTexture(t),h=!0)),s?(i=s.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],n=i.resolution,r=s.frame):(i=this.renderer.rootRenderTarget,n=i.resolution,r=o,r.width=i.size.width,r.height=i.size.height);var u=r.width*n,l=r.height*n,c=new Uint8Array(4*u*l);if(i){e.bindRenderTarget(i);var f=e.gl;f.readPixels(r.x*n,r.y*n,u,l,f.RGBA,f.UNSIGNED_BYTE,c)}return h&&s.destroy(!0),c},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t}();e.default=s,a.WebGLRenderer.registerPlugin("extract",s)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(5),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(s),u=function(t){function e(i,a){n(this,e);var o=r(this,t.call(this,i[0]instanceof h.Texture?i[0]:i[0].texture));return o._textures=null,o._durations=null,o.textures=i,o._autoUpdate=!1!==a,o.animationSpeed=1,o.loop=!0,o.onComplete=null,o.onFrameChange=null,o.onLoop=null,o._currentTime=0,o.playing=!1,o}return a(e,t),e.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&h.ticker.shared.remove(this.update,this))},e.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&h.ticker.shared.add(this.update,this,h.UPDATE_PRIORITY.HIGH))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){var e=this.animationSpeed*t,i=this.currentFrame;if(null!==this._durations){var n=this._currentTime%1*this._durations[this.currentFrame];for(n+=e/60*1e3;n<0;)this._currentTime--,n+=this._durations[this.currentFrame];var r=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);n>=this._durations[this.currentFrame];)n-=this._durations[this.currentFrame]*r,this._currentTime+=r;this._currentTime+=n/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i?this.onLoop():this.animationSpeed<0&&this.currentFrame>i&&this.onLoop()),this.updateTexture())},e.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.cachedTint=16777215,this.onFrameChange&&this.onFrameChange(this.currentFrame)},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e)},e.fromFrames=function(t){for(var i=[],n=0;n<t.length;++n)i.push(h.Texture.fromFrame(t[n]));return new e(i)},e.fromImages=function(t){for(var i=[],n=0;n<t.length;++n)i.push(h.Texture.fromImage(t[n]));return new e(i)},o(e,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(t){if(t[0]instanceof h.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this.gotoAndStop(0),this.updateTexture()}},{key:"currentFrame",get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}}]),e}(h.Sprite);e.default=u},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(5),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(h),l=i(218),c=n(l),f=i(7),d=i(13),p=n(d),m=function(t){function e(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e);var o=a(this,t.call(this));return o._textWidth=0,o._textHeight=0,o._glyphs=[],o._font={tint:void 0!==n.tint?n.tint:16777215,align:n.align||"left",name:null,size:0},o.font=n.font,o._text=i,o._maxWidth=0,o._maxLineHeight=0,o._letterSpacing=0,o._anchor=new c.default(function(){o.dirty=!0},o,0,0),o.dirty=!1,o.updateText(),o}return o(e,t),e.prototype.updateText=function(){for(var t=e.fonts[this._font.name],i=this._font.size/t.size,n=new u.Point,r=[],a=[],o=this.text.replace(/(?:\r\n|\r)/g,"\n"),s=o.length,h=this._maxWidth*t.size/this._font.size,l=null,c=0,f=0,d=0,p=-1,m=0,v=0,g=0,y=0;y<s;y++){var _=o.charCodeAt(y),T=o.charAt(y);if(/(?:\s)/.test(T)&&(p=y,m=c),"\r"!==T&&"\n"!==T){var E=t.chars[_];E&&(l&&E.kerning[l]&&(n.x+=E.kerning[l]),r.push({texture:E.texture,line:d,charCode:_,position:new u.Point(n.x+E.xOffset+this._letterSpacing/2,n.y+E.yOffset)}),n.x+=E.xAdvance+this._letterSpacing,c=n.x,g=Math.max(g,E.yOffset+E.texture.height),l=_,-1!==p&&h>0&&n.x>h&&(++v,u.utils.removeItems(r,1+p-v,1+y-p),y=p,p=-1,a.push(m),f=Math.max(f,m),d++,n.x=0,n.y+=t.lineHeight,l=null))}else a.push(c),f=Math.max(f,c),++d,++v,n.x=0,n.y+=t.lineHeight,l=null}var S=o.charAt(o.length-1);"\r"!==S&&"\n"!==S&&(/(?:\s)/.test(S)&&(c=m),a.push(c),f=Math.max(f,c));for(var b=[],A=0;A<=d;A++){var I=0;"right"===this._font.align?I=f-a[A]:"center"===this._font.align&&(I=(f-a[A])/2),b.push(I)}for(var w=r.length,x=this.tint,P=0;P<w;P++){var M=this._glyphs[P];M?M.texture=r[P].texture:(M=new u.Sprite(r[P].texture),this._glyphs.push(M)),M.position.x=(r[P].position.x+b[r[P].line])*i,M.position.y=r[P].position.y*i,M.scale.x=M.scale.y=i,M.tint=x,M.parent||this.addChild(M)}for(var O=w;O<this._glyphs.length;++O)this.removeChild(this._glyphs[O]);if(this._textWidth=f*i,this._textHeight=(n.y+t.lineHeight)*i,0!==this.anchor.x||0!==this.anchor.y)for(var C=0;C<w;C++)this._glyphs[C].x-=this._textWidth*this.anchor.x,this._glyphs[C].y-=this._textHeight*this.anchor.y;this._maxLineHeight=g*i},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},e.registerFont=function(t,i){var n={},r=t.getElementsByTagName("info")[0],a=t.getElementsByTagName("common")[0],o=t.getElementsByTagName("page"),s=(0,f.getResolutionOfUrl)(o[0].getAttribute("file"),p.default.RESOLUTION),h={};n.font=r.getAttribute("face"),n.size=parseInt(r.getAttribute("size"),10),n.lineHeight=parseInt(a.getAttribute("lineHeight"),10)/s,n.chars={},i instanceof u.Texture&&(i=[i]);for(var l=0;l<o.length;l++){var c=o[l].getAttribute("id"),d=o[l].getAttribute("file");h[c]=i instanceof Array?i[l]:i[d]}for(var m=t.getElementsByTagName("char"),v=0;v<m.length;v++){var g=m[v],y=parseInt(g.getAttribute("id"),10),_=g.getAttribute("page")||0,T=new u.Rectangle(parseInt(g.getAttribute("x"),10)/s+h[_].frame.x/s,parseInt(g.getAttribute("y"),10)/s+h[_].frame.y/s,parseInt(g.getAttribute("width"),10)/s,parseInt(g.getAttribute("height"),10)/s);n.chars[y]={xOffset:parseInt(g.getAttribute("xoffset"),10)/s,yOffset:parseInt(g.getAttribute("yoffset"),10)/s,xAdvance:parseInt(g.getAttribute("xadvance"),10)/s,kerning:{},texture:new u.Texture(h[_].baseTexture,T),page:_}}for(var E=t.getElementsByTagName("kerning"),S=0;S<E.length;S++){var b=E[S],A=parseInt(b.getAttribute("first"),10)/s,I=parseInt(b.getAttribute("second"),10)/s,w=parseInt(b.getAttribute("amount"),10)/s;n.chars[I]&&(n.chars[I].kerning[A]=w)}return e.fonts[n.font]=n,n},s(e,[{key:"tint",get:function(){return this._font.tint},set:function(t){this._font.tint="number"==typeof t&&t>=0?t:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(t){this._font.align=t||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copy(t)}},{key:"font",get:function(){return this._font},set:function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=t.length>=2?parseInt(t[0],10):e.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),e}(u.Container);e.default=m,m.fonts={}},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(5),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(s),u=i(143),l=function(t){return t&&t.__esModule?t:{default:t}}(u),c=new h.Point,f=function(t){function e(i){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;n(this,e);var s=r(this,t.call(this,i));return s.tileTransform=new h.TransformStatic,s._width=a,s._height=o,s._canvasPattern=null,s.uvTransform=i.transform||new h.TextureMatrix(i),s.pluginName="tilingSprite",s.uvRespectAnchor=!1,s}return a(e,t),e.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture),this.cachedTint=16777215},e.prototype._renderWebGL=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.hasLoaded){var i=t.context,n=this.worldTransform,r=t.resolution,a=e.baseTexture,o=a.resolution,s=this.tilePosition.x/this.tileScale.x%e._frame.width*o,u=this.tilePosition.y/this.tileScale.y%e._frame.height*o;if(this._textureID!==this._texture._updateID||this.cachedTint!==this.tint){this._textureID=this._texture._updateID;var c=new h.CanvasRenderTarget(e._frame.width,e._frame.height,o);16777215!==this.tint?(this.tintedTexture=l.default.getTintedTexture(this,this.tint),c.context.drawImage(this.tintedTexture,0,0)):c.context.drawImage(a.source,-e._frame.x*o,-e._frame.y*o),this.cachedTint=this.tint,this._canvasPattern=c.context.createPattern(c.canvas,"repeat")}i.globalAlpha=this.worldAlpha,i.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r,n.ty*r),t.setBlendMode(this.blendMode),i.fillStyle=this._canvasPattern,i.scale(this.tileScale.x/o,this.tileScale.y/o);var f=this.anchor.x*-this._width,d=this.anchor.y*-this._height;this.uvRespectAnchor?(i.translate(s,u),i.fillRect(-s+f,-u+d,this._width/this.tileScale.x*o,this._height/this.tileScale.y*o)):(i.translate(s+f,u+d),i.fillRect(-s,-u,this._width/this.tileScale.x*o,this._height/this.tileScale.y*o))}},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),n=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,i,n)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new h.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,c);var e=this._width,i=this._height,n=-e*this.anchor._x;if(c.x>=n&&c.x<n+e){var r=-i*this.anchor._y;if(c.y>=r&&c.y<r+i)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvTransform=null},e.from=function(t,i,n){return new e(h.Texture.from(t),i,n)},e.fromFrame=function(t,i,n){var r=h.utils.TextureCache[t];if(!r)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);return new e(r,i,n)},e.fromImage=function(t,i,n,r,a){return new e(h.Texture.fromImage(t,r,a),i,n)},o(e,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(t){this.uvTransform.clampMargin=t,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copy(t)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copy(t)}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}}]),e}(h.Sprite);e.default=f},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=i(5),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(a),s=i(44),h=n(s),u=i(63),l=n(u),c=i(7),f=o.DisplayObject,d=new o.Matrix;f.prototype._cacheAsBitmap=!1,f.prototype._cacheData=!1;var p=function t(){r(this,t),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(f.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){if(this._cacheAsBitmap!==t){this._cacheAsBitmap=t;var e=void 0;t?(this._cacheData||(this._cacheData=new p),e=this._cacheData,e.originalRenderWebGL=this.renderWebGL,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this._calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=e.originalRenderWebGL,this.renderCanvas=e.originalRenderCanvas,this._calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}}),f.prototype._renderCachedWebGL=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(t))},f.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.currentRenderer.flush();var i=this.getLocalBounds().clone();if(this._filters){var n=this._filters[0].padding;i.pad(n)}var r=t._activeRenderTarget,a=t.filterManager.filterStack,s=o.RenderTexture.create(0|i.width,0|i.height),u="cacheAsBitmap_"+(0,c.uid)();this._cacheData.textureCacheId=u,l.default.addToCache(s.baseTexture,u),h.default.addToCache(s,u);var f=d;f.tx=-i.x,f.ty=-i.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,t.render(this,s,!0,f,!0),t.bindRenderTarget(r),t.filterManager.filterStack=a,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this._mask=null,this.filterArea=null;var p=new o.Sprite(s);p.transform.worldTransform=this.transform.worldTransform,p.anchor.x=-i.x/i.width,p.anchor.y=-i.y/i.height,p.alpha=e,p._bounds=this._bounds,this._calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._cacheData.sprite=p,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=p.containsPoint.bind(p)}},f.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(t))},f.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(),i=this.alpha;this.alpha=1;var n=t.context,r=o.RenderTexture.create(0|e.width,0|e.height),a="cacheAsBitmap_"+(0,c.uid)();this._cacheData.textureCacheId=a,l.default.addToCache(r.baseTexture,a),h.default.addToCache(r,a);var s=d;this.transform.localTransform.copy(s),s.invert(),s.tx-=e.x,s.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,r,!0,s,!1),t.context=n,this.renderCanvas=this._renderCachedCanvas,this._calculateBounds=this._calculateCachedBounds,this._mask=null,this.filterArea=null;var u=new o.Sprite(r);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-e.x/e.width,u.anchor.y=-e.y/e.height,u._bounds=this._bounds,u.alpha=i,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.updateTransform=this.displayObjectUpdateTransform,this._cacheData.sprite=u,this.containsPoint=u.containsPoint.bind(u)}},f.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()},f.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},f.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,l.default.removeFromCache(this._cacheData.textureCacheId),h.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},f.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)}},function(t,e,i){"use strict";var n=i(5),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(n);r.DisplayObject.prototype.name=null,r.Container.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null}},function(t,e,i){"use strict";var n=i(5),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(n);r.DisplayObject.prototype.getGlobalPosition=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r.Point,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t}},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var o=i(5),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(o),h=i(3),u=(i(37),new s.Matrix),l=function(t){function e(i){n(this,e);var a=r(this,t.call(this,i));return a.shader=null,a.simpleShader=null,a.quad=null,a}return a(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new s.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n"),this.simpleShader=new s.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n"),this.renderer.bindVao(null),this.quad=new s.Quad(t,this.renderer.state.attribState),this.quad.initVao(this.shader)},e.prototype.render=function(t){var e=this.renderer,i=this.quad;e.bindVao(i.vao);var n=i.vertices;n[0]=n[6]=t._width*-t.anchor.x,n[1]=n[3]=t._height*-t.anchor.y,n[2]=n[4]=t._width*(1-t.anchor.x),n[5]=n[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&(n=i.uvs,n[0]=n[6]=-t.anchor.x,n[1]=n[3]=-t.anchor.y,n[2]=n[4]=1-t.anchor.x,n[5]=n[7]=1-t.anchor.y),i.upload();var r=t._texture,a=r.baseTexture,o=t.tileTransform.localTransform,l=t.uvTransform,c=a.isPowerOfTwo&&r.frame.width===a.width&&r.frame.height===a.height;c&&(a._glTextures[e.CONTEXT_UID]?c=a.wrapMode!==h.WRAP_MODES.CLAMP:a.wrapMode===h.WRAP_MODES.CLAMP&&(a.wrapMode=h.WRAP_MODES.REPEAT));var f=c?this.simpleShader:this.shader;e.bindShader(f);var d=r.width,p=r.height,m=t._width,v=t._height;u.set(o.a*d/m,o.b*d/v,o.c*p/m,o.d*p/v,o.tx/m,o.ty/v),u.invert(),c?u.prepend(l.mapCoord):(f.uniforms.uMapCoord=l.mapCoord.toArray(!0),f.uniforms.uClampFrame=l.uClampFrame,f.uniforms.uClampOffset=l.uClampOffset),f.uniforms.uTransform=u.toArray(!0),f.uniforms.uColor=s.utils.premultiplyTintToRgba(t.tint,t.worldAlpha,f.uniforms.uColor,a.premultipliedAlpha),f.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),f.uniforms.uSampler=e.bindTexture(r),e.setBlendMode(s.utils.correctBlendMode(t.blendMode,a.premultipliedAlpha)),i.vao.draw(this.renderer.gl.TRIANGLES,6,0)},e}(s.ObjectRenderer);e.default=l,s.WebGLRenderer.registerPlugin("tilingSprite",l)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(5),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(s),u=(i(37),function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;n(this,e);var a=r(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n"));return a.alpha=i,a.glShaderKey="alpha",a}return a(e,t),o(e,[{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t}}]),e}(h.Filter));e.default=u},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(5),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(h),l=i(233),c=n(l),f=i(234),d=n(f),p=function(t){function e(i,n,o,s){r(this,e);var h=a(this,t.call(this));return h.blurXFilter=new c.default(i,n,o,s),h.blurYFilter=new d.default(i,n,o,s),h.padding=0,h.resolution=o||u.settings.RESOLUTION,h.quality=n||4,h.blur=i||8,h}return o(e,t),e.prototype.apply=function(t,e,i){var n=t.getRenderTarget(!0);this.blurXFilter.apply(t,e,n,!0),this.blurYFilter.apply(t,n,i,!1),t.returnRenderTarget(n)},s(e,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blendMode",get:function(){return this.blurYFilter._blendMode},set:function(t){this.blurYFilter._blendMode=t}}]),e}(u.Filter);e.default=p},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(5),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(s),u=(i(37),function(t){function e(){n(this,e);var i=r(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"));return i.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],i.alpha=1,i}return a(e,t),e.prototype._loadMatrix=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t;e&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i},e.prototype._multiply=function(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.greyscale=function(t,e){var i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.blackAndWhite=function(t){var e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var i=Math.cos(t),n=Math.sin(t),r=Math.sqrt,a=1/3,o=r(a),s=i+(1-i)*a,h=a*(1-i)-o*n,u=a*(1-i)+o*n,l=a*(1-i)+o*n,c=i+a*(1-i),f=a*(1-i)-o*n,d=a*(1-i)-o*n,p=a*(1-i)+o*n,m=i+a*(1-i),v=[s,h,u,0,0,l,c,f,0,0,d,p,m,0,0,0,0,0,1,0];this._loadMatrix(v,e)},e.prototype.contrast=function(t,e){var i=(t||0)+1,n=-.5*(i-1),r=[i,0,0,0,n,0,i,0,0,n,0,0,i,0,n,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.saturate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],i=2*t/3+1,n=-.5*(i-1),r=[i,n,n,0,0,n,i,n,0,0,n,n,i,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){var e=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.sepia=function(t){var e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.technicolor=function(t){var e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.polaroid=function(t){var e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.toBGR=function(t){var e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.kodachrome=function(t){var e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.browni=function(t){var e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.vintage=function(t){var e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.colorTone=function(t,e,i,n,r){t=t||.2,e=e||.15,i=i||16770432,n=n||3375104;var a=(i>>16&255)/255,o=(i>>8&255)/255,s=(255&i)/255,h=(n>>16&255)/255,u=(n>>8&255)/255,l=(255&n)/255,c=[.3,.59,.11,0,0,a,o,s,t,0,h,u,l,e,0,a-h,o-u,s-l,0,0];this._loadMatrix(c,r)},e.prototype.night=function(t,e){t=t||.1;var i=[-2*t,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.predator=function(t,e){var i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.lsd=function(t){var e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.reset=function(){var t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)},o(e,[{key:"matrix",get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t}}]),e}(h.Filter));e.default=u,u.prototype.grayscale=u.prototype.greyscale},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(5),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(s),u=(i(37),function(t){function e(i,a){n(this,e);var o=new h.Matrix;i.renderable=!1;var s=r(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy *= scale / filterArea.xy;\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));return s.maskSprite=i,s.maskMatrix=o,s.uniforms.mapSampler=i._texture,s.uniforms.filterMatrix=o,s.uniforms.scale={x:1,y:1},null!==a&&void 0!==a||(a=20),s.scale=new h.Point(a,a),s}return a(e,t),e.prototype.apply=function(t,e,i){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y,t.applyFilter(this,e,i)},o(e,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t}}]),e}(h.Filter));e.default=u},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var o=i(5),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(o),h=(i(37),function(t){function e(){return n(this,e),r(this,t.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'))}return a(e,t),e}(s.Filter));e.default=h},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(570);Object.defineProperty(e,"FXAAFilter",{enumerable:!0,get:function(){return n(r).default}});var a=i(572);Object.defineProperty(e,"NoiseFilter",{enumerable:!0,get:function(){return n(a).default}});var o=i(569);Object.defineProperty(e,"DisplacementFilter",{enumerable:!0,get:function(){return n(o).default}});var s=i(567);Object.defineProperty(e,"BlurFilter",{enumerable:!0,get:function(){return n(s).default}});var h=i(233);Object.defineProperty(e,"BlurXFilter",{enumerable:!0,get:function(){return n(h).default}});var u=i(234);Object.defineProperty(e,"BlurYFilter",{enumerable:!0,get:function(){return n(u).default}});var l=i(568);Object.defineProperty(e,"ColorMatrixFilter",{enumerable:!0,get:function(){return n(l).default}});var c=i(566);Object.defineProperty(e,"AlphaFilter",{enumerable:!0,get:function(){return n(c).default}})},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(5),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(s),u=(i(37),function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random();n(this,e);var o=r(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n"));return o.noise=i,o.seed=a,o}return a(e,t),o(e,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t}}]),e}(h.Filter));e.default=u},function(t,e,i){"use strict";(function(t){function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}e.__esModule=!0,e.loader=e.prepare=e.particles=e.mesh=e.loaders=e.interaction=e.filters=e.extras=e.extract=e.accessibility=void 0;var r=i(591);Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})});var a=i(5);Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})});var o=i(555),s=function(t){return t&&t.__esModule?t:{default:t}}(o),h=i(512),u=n(h),l=i(557),c=n(l),f=i(232),d=n(f),p=i(571),m=n(p),v=i(575),g=n(v),y=i(576),_=n(y),T=i(581),E=n(T),S=i(584),b=n(S),A=i(594),I=n(A);a.utils.mixins.performMixins();var w=_.shared||null;e.accessibility=u,e.extract=c,e.extras=d,e.filters=m,e.interaction=g,e.loaders=_,e.mesh=E,e.particles=b,e.prepare=I,e.loader=w,"function"==typeof s.default&&(0,s.default)(e),t.PIXI=e}).call(e,i(98))},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h=i(5),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(h),l=i(238),c=n(l),f=i(239),d=n(f),p=i(240),m=n(p),v=i(57),g=n(v),y=i(241),_=n(y);u.utils.mixins.delayMixin(u.DisplayObject.prototype,_.default);var T=1,E={target:null,data:{global:null}},S=function(t){function e(i,n){r(this,e);var o=a(this,t.call(this));return n=n||{},o.renderer=i,o.autoPreventDefault=void 0===n.autoPreventDefault||n.autoPreventDefault,o.interactionFrequency=n.interactionFrequency||10,o.mouse=new c.default,o.mouse.identifier=T,o.mouse.global.set(-999999),o.activeInteractionData={},o.activeInteractionData[T]=o.mouse,o.interactionDataPool=[],o.eventData=new d.default,o.interactionDOMElement=null,o.moveWhenInside=!1,o.eventsAdded=!1,o.mouseOverRenderer=!1,o.supportsTouchEvents="ontouchstart"in window,o.supportsPointerEvents=!!window.PointerEvent,o.onPointerUp=o.onPointerUp.bind(o),o.processPointerUp=o.processPointerUp.bind(o),o.onPointerCancel=o.onPointerCancel.bind(o),o.processPointerCancel=o.processPointerCancel.bind(o),o.onPointerDown=o.onPointerDown.bind(o),o.processPointerDown=o.processPointerDown.bind(o),o.onPointerMove=o.onPointerMove.bind(o),o.processPointerMove=o.processPointerMove.bind(o),o.onPointerOut=o.onPointerOut.bind(o),o.processPointerOverOut=o.processPointerOverOut.bind(o),o.onPointerOver=o.onPointerOver.bind(o),o.cursorStyles={default:"inherit",pointer:"pointer"},o.currentCursorMode=null,o.cursor=null,o._tempPoint=new u.Point,o.resolution=1,o.setTargetElement(o.renderer.view,o.renderer.resolution),o}return o(e,t),e.prototype.hitTest=function(t,e){return E.target=null,E.data.global=t,e||(e=this.renderer._lastObjectRendered),this.processInteractive(E,e,null,!0),E.target},e.prototype.setTargetElement=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents()},e.prototype.addEvents=function(){this.interactionDOMElement&&(u.ticker.shared.add(this.update,this,u.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},e.prototype.removeEvents=function(){this.interactionDOMElement&&(u.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},e.prototype.update=function(t){if(this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);this.cursor=null;for(var e in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var i=this.activeInteractionData[e];if(i.originalEvent&&"touch"!==i.pointerType){var n=this.configureInteractionEventForDOMEvent(this.eventData,i.originalEvent,i);this.processInteractive(n,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){if(t=t||"default",this.currentCursorMode!==t){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch(void 0===e?"undefined":s(e)){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e)}else"string"!=typeof t||Object.prototype.hasOwnProperty.call(this.cursorStyles,t)||(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,i){i.stopped||(i.currentTarget=t,i.type=e,t.emit(e,i),t[e]&&t[e](i))},e.prototype.mapPositionToPoint=function(t,e,i){var n=void 0;n=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var r=navigator.isCocoonJS?this.resolution:1/this.resolution;t.x=(e-n.left)*(this.interactionDOMElement.width/n.width)*r,t.y=(i-n.top)*(this.interactionDOMElement.height/n.height)*r},e.prototype.processInteractive=function(t,e,i,n,r){if(!e||!e.visible)return!1;var a=t.data.global;r=e.interactive||r;var o=!1,s=r,h=!0;if(e.hitArea?(n&&(e.worldTransform.applyInverse(a,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?o=!0:(n=!1,h=!1)),s=!1):e._mask&&n&&(e._mask.containsPoint(a)||(n=!1,h=!1)),h&&e.interactiveChildren&&e.children)for(var u=e.children,l=u.length-1;l>=0;l--){var c=u[l],f=this.processInteractive(t,c,i,n,s);if(f){if(!c.parent)continue;s=!1,f&&(t.target&&(n=!1),o=!0)}}return r&&(n&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(a)&&(o=!0),e.interactive&&(o&&!t.target&&(t.target=e),i&&i(t,e,!!o))),o},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&t.preventDefault();for(var i=e.length,n=0;n<i;n++){var r=e[n],a=this.getInteractionDataForPointerId(r),o=this.configureInteractionEventForDOMEvent(this.eventData,r,a);if(o.data.originalEvent=t,this.processInteractive(o,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",o),"touch"===r.pointerType)this.emit("touchstart",o);else if("mouse"===r.pointerType||"pen"===r.pointerType){var s=2===r.button;this.emit(s?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,i){var n=t.data,r=t.data.identifier;if(i)if(e.trackedPointers[r]||(e.trackedPointers[r]=new m.default(r)),this.dispatchEvent(e,"pointerdown",t),"touch"===n.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===n.pointerType||"pen"===n.pointerType){var a=2===n.button;a?e.trackedPointers[r].rightDown=!0:e.trackedPointers[r].leftDown=!0,this.dispatchEvent(e,a?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,i){for(var n=this.normalizeToPointerData(t),r=n.length,a=t.target!==this.interactionDOMElement?"outside":"",o=0;o<r;o++){var s=n[o],h=this.getInteractionDataForPointerId(s),u=this.configureInteractionEventForDOMEvent(this.eventData,s,h);if(u.data.originalEvent=t,this.processInteractive(u,this.renderer._lastObjectRendered,i,e||!a),this.emit(e?"pointercancel":"pointerup"+a,u),"mouse"===s.pointerType||"pen"===s.pointerType){var l=2===s.button;this.emit(l?"rightup"+a:"mouseup"+a,u)}else"touch"===s.pointerType&&(this.emit(e?"touchcancel":"touchend"+a,u),this.releaseInteractionDataForPointerId(s.pointerId,h))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var i=t.data,n=t.data.identifier;void 0!==e.trackedPointers[n]&&(delete e.trackedPointers[n],this.dispatchEvent(e,"pointercancel",t),"touch"===i.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,i){var n=t.data,r=t.data.identifier,a=e.trackedPointers[r],o="touch"===n.pointerType,s="mouse"===n.pointerType||"pen"===n.pointerType,h=!1;if(s){var u=2===n.button,l=m.default.FLAGS,c=u?l.RIGHT_DOWN:l.LEFT_DOWN,f=void 0!==a&&a.flags&c;i?(this.dispatchEvent(e,u?"rightup":"mouseup",t),f&&(this.dispatchEvent(e,u?"rightclick":"click",t),h=!0)):f&&this.dispatchEvent(e,u?"rightupoutside":"mouseupoutside",t),a&&(u?a.rightDown=!1:a.leftDown=!1)}i?(this.dispatchEvent(e,"pointerup",t),o&&this.dispatchEvent(e,"touchend",t),a&&(s&&!h||this.dispatchEvent(e,"pointertap",t),o&&(this.dispatchEvent(e,"tap",t),a.over=!1))):a&&(this.dispatchEvent(e,"pointerupoutside",t),o&&this.dispatchEvent(e,"touchendoutside",t)),a&&a.none&&delete e.trackedPointers[r]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this.didMove=!0,this.cursor=null);for(var i=e.length,n=0;n<i;n++){var r=e[n],a=this.getInteractionDataForPointerId(r),o=this.configureInteractionEventForDOMEvent(this.eventData,r,a);o.data.originalEvent=t;var s="touch"!==r.pointerType||this.moveWhenInside;this.processInteractive(o,this.renderer._lastObjectRendered,this.processPointerMove,s),this.emit("pointermove",o),"touch"===r.pointerType&&this.emit("touchmove",o),"mouse"!==r.pointerType&&"pen"!==r.pointerType||this.emit("mousemove",o)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,i){var n=t.data,r="touch"===n.pointerType,a="mouse"===n.pointerType||"pen"===n.pointerType;a&&this.processPointerOverOut(t,e,i),this.moveWhenInside&&!i||(this.dispatchEvent(e,"pointermove",t),r&&this.dispatchEvent(e,"touchmove",t),a&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t),i=e[0];"mouse"===i.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var n=this.getInteractionDataForPointerId(i),r=this.configureInteractionEventForDOMEvent(this.eventData,i,n);r.data.originalEvent=i,this.processInteractive(r,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",r),"mouse"===i.pointerType||"pen"===i.pointerType?this.emit("mouseout",r):this.releaseInteractionDataForPointerId(n.identifier)}},e.prototype.processPointerOverOut=function(t,e,i){var n=t.data,r=t.data.identifier,a="mouse"===n.pointerType||"pen"===n.pointerType,o=e.trackedPointers[r];i&&!o&&(o=e.trackedPointers[r]=new m.default(r)),void 0!==o&&(i&&this.mouseOverRenderer?(o.over||(o.over=!0,this.dispatchEvent(e,"pointerover",t),a&&this.dispatchEvent(e,"mouseover",t)),a&&null===this.cursor&&(this.cursor=e.cursor)):o.over&&(o.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),a&&this.dispatchEvent(e,"mouseout",t),o.none&&delete e.trackedPointers[r]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t),i=e[0],n=this.getInteractionDataForPointerId(i),r=this.configureInteractionEventForDOMEvent(this.eventData,i,n);r.data.originalEvent=i,"mouse"===i.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",r),"mouse"!==i.pointerType&&"pen"!==i.pointerType||this.emit("mouseover",r)},e.prototype.getInteractionDataForPointerId=function(t){var e=t.pointerId,i=void 0;return e===T||"mouse"===t.pointerType?i=this.mouse:this.activeInteractionData[e]?i=this.activeInteractionData[e]:(i=this.interactionDataPool.pop()||new c.default,i.identifier=e,this.activeInteractionData[e]=i),i.copyEvent(t),i},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,i){return t.data=i,this.mapPositionToPoint(i.global,e.clientX,e.clientY),navigator.isCocoonJS&&"touch"===e.pointerType&&(i.global.x=i.global.x/this.resolution,i.global.y=i.global.y/this.resolution),"touch"===e.pointerType&&(e.globalX=i.global.x,e.globalY=i.global.y),i.originalEvent=e,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var i=0,n=t.changedTouches.length;i<n;i++){var r=t.changedTouches[i];void 0===r.button&&(r.button=t.touches.length?1:0),void 0===r.buttons&&(r.buttons=t.touches.length?1:0),void 0===r.isPrimary&&(r.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===r.width&&(r.width=r.radiusX||1),void 0===r.height&&(r.height=r.radiusY||1),void 0===r.tiltX&&(r.tiltX=0),void 0===r.tiltY&&(r.tiltY=0),void 0===r.pointerType&&(r.pointerType="touch"),void 0===r.pointerId&&(r.pointerId=r.identifier||0),void 0===r.pressure&&(r.pressure=r.force||.5),r.twist=0,r.tangentialPressure=0,void 0===r.layerX&&(r.layerX=r.offsetX=r.clientX),void 0===r.layerY&&(r.layerY=r.offsetY=r.clientY),r.isNormalized=!0,e.push(r)}else!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof window.PointerEvent?e.push(t):(void 0===t.isPrimary&&(t.isPrimary=!0),void 0===t.width&&(t.width=1),void 0===t.height&&(t.height=1),void 0===t.tiltX&&(t.tiltX=0),void 0===t.tiltY&&(t.tiltY=0),void 0===t.pointerType&&(t.pointerType="mouse"),void 0===t.pointerId&&(t.pointerId=T),void 0===t.pressure&&(t.pressure=.5),t.twist=0,t.tangentialPressure=0,t.isNormalized=!0,e.push(t));return e},e.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},e}(g.default);e.default=S,u.WebGLRenderer.registerPlugin("interaction",S),u.CanvasRenderer.registerPlugin("interaction",S)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(238);Object.defineProperty(e,"InteractionData",{enumerable:!0,get:function(){return n(r).default}});var a=i(574);Object.defineProperty(e,"InteractionManager",{enumerable:!0,get:function(){return n(a).default}});var o=i(241);Object.defineProperty(e,"interactiveTarget",{enumerable:!0,get:function(){return n(o).default}});var s=i(240);Object.defineProperty(e,"InteractionTrackingData",{enumerable:!0,get:function(){return n(s).default}});var h=i(239);Object.defineProperty(e,"InteractionEvent",{enumerable:!0,get:function(){return n(h).default}})},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.shared=e.Resource=e.textureParser=e.getResourcePath=e.spritesheetParser=e.parseBitmapFontData=e.bitmapFontParser=e.Loader=void 0;var r=i(242);Object.defineProperty(e,"bitmapFontParser",{enumerable:!0,get:function(){return n(r).default}}),Object.defineProperty(e,"parseBitmapFontData",{enumerable:!0,get:function(){return r.parse}});var a=i(243);Object.defineProperty(e,"spritesheetParser",{enumerable:!0,get:function(){return n(a).default}}),Object.defineProperty(e,"getResourcePath",{enumerable:!0,get:function(){return a.getResourcePath}});var o=i(244);Object.defineProperty(e,"textureParser",{enumerable:!0,get:function(){return n(o).default}});var s=i(74);Object.defineProperty(e,"Resource",{enumerable:!0,get:function(){return s.Resource}});var h=i(211),u=n(h),l=i(577),c=n(l);e.Loader=c.default;var f=new c.default;f.destroy=function(){},e.shared=f;var d=u.default.prototype;d._loader=null,Object.defineProperty(d,"loader",{get:function(){if(!this._loader){var t=this._options.sharedLoader;this._loader=t?f:new c.default}return this._loader}}),d._parentDestroy=d.destroy,d.destroy=function(t,e){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy(t,e)}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(74),h=n(s),u=i(603),l=i(57),c=n(l),f=i(244),d=n(f),p=i(243),m=n(p),v=i(242),g=n(v),y=function(t){function e(i,n){r(this,e);var o=a(this,t.call(this,i,n));c.default.call(o);for(var s=0;s<e._pixiMiddleware.length;++s)o.use(e._pixiMiddleware[s]());return o.onStart.add(function(t){return o.emit("start",t)}),o.onProgress.add(function(t,e){return o.emit("progress",t,e)}),o.onError.add(function(t,e,i){return o.emit("error",t,e,i)}),o.onLoad.add(function(t,e){return o.emit("load",t,e)}),o.onComplete.add(function(t,e){return o.emit("complete",t,e)}),o}return o(e,t),e.addPixiMiddleware=function(t){e._pixiMiddleware.push(t)},e.prototype.destroy=function(){this.removeAllListeners(),this.reset()},e}(h.default);e.default=y;for(var _ in c.default.prototype)y.prototype[_]=c.default.prototype[_];y._pixiMiddleware=[u.blobMiddlewareFactory,d.default,m.default,g.default];var T=h.default.Resource;T.setExtensionXhrType("fnt",T.XHR_RESPONSE_TYPE.DOCUMENT)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(245),h=function(t){return t&&t.__esModule?t:{default:t}}(s),u=10,l=function(t){function e(i,a,o,s,h){n(this,e);var l=r(this,t.call(this,i,4,4));return l._origWidth=i.orig.width,l._origHeight=i.orig.height,l._width=l._origWidth,l._height=l._origHeight,l._leftWidth=void 0!==a?a:u,l._rightWidth=void 0!==s?s:u,l._topHeight=void 0!==o?o:u,l._bottomHeight=void 0!==h?h:u,l.refresh(!0),l}return a(e,t),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._topHeight+this._bottomHeight,i=this._height>e?1:this._height/e;t[9]=t[11]=t[13]=t[15]=this._topHeight*i,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*i,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._leftWidth+this._rightWidth,i=this._width>e?1:this._width/e;t[2]=t[10]=t[18]=t[26]=this._leftWidth*i,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*i,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._renderCanvas=function(t){var e=t.context;e.globalAlpha=this.worldAlpha,t.setBlendMode(this.blendMode);var i=this.worldTransform,n=t.resolution;t.roundPixels?e.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,i.tx*n|0,i.ty*n|0):e.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,i.tx*n,i.ty*n);var r=this._texture.baseTexture,a=r.source,o=r.width*r.resolution,s=r.height*r.resolution;this.drawSegment(e,a,o,s,0,1,10,11),this.drawSegment(e,a,o,s,2,3,12,13),this.drawSegment(e,a,o,s,4,5,14,15),this.drawSegment(e,a,o,s,8,9,18,19),this.drawSegment(e,a,o,s,10,11,20,21),this.drawSegment(e,a,o,s,12,13,22,23),this.drawSegment(e,a,o,s,16,17,26,27),this.drawSegment(e,a,o,s,18,19,28,29),this.drawSegment(e,a,o,s,20,21,30,31)},e.prototype.drawSegment=function(t,e,i,n,r,a,o,s){var h=this.uvs,u=this.vertices,l=(h[o]-h[r])*i,c=(h[s]-h[a])*n,f=u[o]-u[r],d=u[s]-u[a];l<1&&(l=1),c<1&&(c=1),f<1&&(f=1),d<1&&(d=1),t.drawImage(e,h[r]*i,h[a]*n,l,c,u[r],u[a],f,d)},e.prototype._refresh=function(){t.prototype._refresh.call(this);var e=this.uvs,i=this._texture;this._origWidth=i.orig.width,this._origHeight=i.orig.height;var n=1/this._origWidth,r=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=n*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-n*this._rightWidth,e[9]=e[11]=e[13]=e[15]=r*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-r*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.dirty++,this.multiplyUvs()},o(e,[{key:"width",get:function(){return this._width},set:function(t){this._width=t,this._refresh()}},{key:"height",get:function(){return this._height},set:function(t){this._height=t,this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()}}]),e}(h.default);e.default=l},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var o=i(73),s=function(t){return t&&t.__esModule?t:{default:t}}(o),h=function(t){function e(i,a){n(this,e);var o=r(this,t.call(this,i));return o.points=a,o.vertices=new Float32Array(4*a.length),o.uvs=new Float32Array(4*a.length),o.colors=new Float32Array(2*a.length),o.indices=new Uint16Array(2*a.length),o.autoUpdate=!0,o.refresh(),o}return a(e,t),e.prototype._refresh=function(){var t=this.points;if(!(t.length<1)&&this._texture._uvs){this.vertices.length/4!==t.length&&(this.vertices=new Float32Array(4*t.length),this.uvs=new Float32Array(4*t.length),this.colors=new Float32Array(2*t.length),this.indices=new Uint16Array(2*t.length));var e=this.uvs,i=this.indices,n=this.colors;e[0]=0,e[1]=0,e[2]=0,e[3]=1,n[0]=1,n[1]=1,i[0]=0,i[1]=1;for(var r=t.length,a=1;a<r;a++){var o=4*a,s=a/(r-1);e[o]=s,e[o+1]=0,e[o+2]=s,e[o+3]=1,o=2*a,n[o]=1,n[o+1]=1,o=2*a,i[o]=o,i[o+1]=o+1}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}},e.prototype.refreshVertices=function(){var t=this.points;if(!(t.length<1))for(var e=t[0],i=void 0,n=0,r=0,a=this.vertices,o=t.length,s=0;s<o;s++){var h=t[s],u=4*s;i=s<t.length-1?t[s+1]:h,r=-(i.x-e.x),n=i.y-e.y;var l=10*(1-s/(o-1));l>1&&(l=1);var c=Math.sqrt(n*n+r*r),f=this._texture.height/2;n/=c,r/=c,n*=f,r*=f,a[u]=h.x+n,a[u+1]=h.y+r,a[u+2]=h.x-n,a[u+3]=h.y-r,e=h}},e.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()},e}(s.default);e.default=h},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(5),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(r),o=i(73),s=function(t){return t&&t.__esModule?t:{default:t}}(o),h=function(){function t(e){n(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,i=e.context,n=t.worldTransform,r=e.resolution;e.roundPixels?i.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r|0,n.ty*r|0):i.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r,n.ty*r),e.context.globalAlpha=t.worldAlpha,e.setBlendMode(t.blendMode),t.drawMode===s.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(t):this._renderTriangles(t)},t.prototype._renderTriangleMesh=function(t){for(var e=t.vertices.length/2,i=0;i<e-2;i++){var n=2*i;this._renderDrawTriangle(t,n,n+2,n+4)}},t.prototype._renderTriangles=function(t){for(var e=t.indices,i=e.length,n=0;n<i;n+=3){var r=2*e[n],a=2*e[n+1],o=2*e[n+2];this._renderDrawTriangle(t,r,a,o)}},t.prototype._renderDrawTriangle=function(t,e,i,n){var r=this.renderer.context,a=t.uvs,o=t.vertices,s=t._texture;if(s.valid){var h=s.baseTexture,u=h.source,l=h.width,c=h.height,f=void 0,d=void 0,p=void 0,m=void 0,v=void 0,g=void 0;if(t.uploadUvTransform){var y=t._uvTransform.mapCoord;f=(a[e]*y.a+a[e+1]*y.c+y.tx)*h.width,d=(a[i]*y.a+a[i+1]*y.c+y.tx)*h.width,p=(a[n]*y.a+a[n+1]*y.c+y.tx)*h.width,m=(a[e]*y.b+a[e+1]*y.d+y.ty)*h.height,v=(a[i]*y.b+a[i+1]*y.d+y.ty)*h.height,g=(a[n]*y.b+a[n+1]*y.d+y.ty)*h.height}else f=a[e]*h.width,d=a[i]*h.width,p=a[n]*h.width,m=a[e+1]*h.height,v=a[i+1]*h.height,g=a[n+1]*h.height;var _=o[e],T=o[i],E=o[n],S=o[e+1],b=o[i+1],A=o[n+1],I=t.canvasPadding/this.renderer.resolution;if(I>0){var w=I/Math.abs(t.worldTransform.a),x=I/Math.abs(t.worldTransform.d),P=(_+T+E)/3,M=(S+b+A)/3,O=_-P,C=S-M,R=Math.sqrt(O*O+C*C);_=P+O/R*(R+w),S=M+C/R*(R+x),O=T-P,C=b-M,R=Math.sqrt(O*O+C*C),T=P+O/R*(R+w),b=M+C/R*(R+x),O=E-P,C=A-M,R=Math.sqrt(O*O+C*C),E=P+O/R*(R+w),A=M+C/R*(R+x)}r.save(),r.beginPath(),r.moveTo(_,S),r.lineTo(T,b),r.lineTo(E,A),r.closePath(),r.clip();var k=f*v+m*p+d*g-v*p-m*d-f*g,D=_*v+m*E+T*g-v*E-m*T-_*g,L=f*T+_*p+d*E-T*p-_*d-f*E,N=f*v*E+m*T*p+_*d*g-_*v*p-m*d*E-f*T*g,G=S*v+m*A+b*g-v*A-m*b-S*g,F=f*b+S*p+d*A-b*p-S*d-f*A,U=f*v*A+m*b*p+S*d*g-S*v*p-m*d*A-f*b*g;r.transform(D/k,G/k,L/k,F/k,N/k,U/k),r.drawImage(u,0,0,l*h.resolution,c*h.resolution,0,0,l,c),r.restore(),this.renderer.invalidateBlendMode()}},t.prototype.renderMeshFlat=function(t){var e=this.renderer.context,i=t.vertices,n=i.length/2;e.beginPath();for(var r=1;r<n-2;++r){var a=2*r,o=i[a],s=i[a+1],h=i[a+2],u=i[a+3],l=i[a+4],c=i[a+5];e.moveTo(o,s),e.lineTo(h,u),e.lineTo(l,c)}e.fillStyle="#FF0000",e.fill(),e.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();e.default=h,a.CanvasRenderer.registerPlugin("mesh",h)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(73);Object.defineProperty(e,"Mesh",{enumerable:!0,get:function(){return n(r).default}});var a=i(582);Object.defineProperty(e,"MeshRenderer",{enumerable:!0,get:function(){return n(a).default}});var o=i(580);Object.defineProperty(e,"CanvasMeshRenderer",{enumerable:!0,get:function(){return n(o).default}});var s=i(245);Object.defineProperty(e,"Plane",{enumerable:!0,get:function(){return n(s).default}});var h=i(578);Object.defineProperty(e,"NineSlicePlane",{enumerable:!0,get:function(){return n(h).default}});var u=i(579);Object.defineProperty(e,"Rope",{enumerable:!0,get:function(){return n(u).default}})},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(5),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(s),u=i(26),l=n(u),c=i(73),f=n(c),d=(i(37),h.Matrix.IDENTITY),p=function(t){function e(i){r(this,e);var n=a(this,t.call(this,i));return n.shader=null,n}return o(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new h.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n")},e.prototype.render=function(t){var e=this.renderer,i=e.gl,n=t._texture;if(n.valid){var r=t._glDatas[e.CONTEXT_UID];r||(e.bindVao(null),r={shader:this.shader,vertexBuffer:l.default.GLBuffer.createVertexBuffer(i,t.vertices,i.STREAM_DRAW),uvBuffer:l.default.GLBuffer.createVertexBuffer(i,t.uvs,i.STREAM_DRAW),indexBuffer:l.default.GLBuffer.createIndexBuffer(i,t.indices,i.STATIC_DRAW),vao:null,dirty:t.dirty,indexDirty:t.indexDirty,vertexDirty:t.vertexDirty},r.vao=new l.default.VertexArrayObject(i).addIndex(r.indexBuffer).addAttribute(r.vertexBuffer,r.shader.attributes.aVertexPosition,i.FLOAT,!1,8,0).addAttribute(r.uvBuffer,r.shader.attributes.aTextureCoord,i.FLOAT,!1,8,0),t._glDatas[e.CONTEXT_UID]=r),e.bindVao(r.vao),t.dirty!==r.dirty&&(r.dirty=t.dirty,r.uvBuffer.upload(t.uvs)),t.indexDirty!==r.indexDirty&&(r.indexDirty=t.indexDirty,r.indexBuffer.upload(t.indices)),t.vertexDirty!==r.vertexDirty&&(r.vertexDirty=t.vertexDirty,r.vertexBuffer.upload(t.vertices)),e.bindShader(r.shader),r.shader.uniforms.uSampler=e.bindTexture(n),e.state.setBlendMode(h.utils.correctBlendMode(t.blendMode,n.baseTexture.premultipliedAlpha)),r.shader.uniforms.uTransform&&(t.uploadUvTransform?r.shader.uniforms.uTransform=t._uvTransform.mapCoord.toArray(!0):r.shader.uniforms.uTransform=d.toArray(!0)),r.shader.uniforms.translationMatrix=t.worldTransform.toArray(!0),r.shader.uniforms.uColor=h.utils.premultiplyRgba(t.tintRgb,t.worldAlpha,r.shader.uniforms.uColor,n.baseTexture.premultipliedAlpha);var a=t.drawMode===f.default.DRAW_MODES.TRIANGLE_MESH?i.TRIANGLE_STRIP:i.TRIANGLES;r.vao.draw(a,t.indices.length,0)}},e}(h.ObjectRenderer);e.default=p,h.WebGLRenderer.registerPlugin("mesh",p)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(5),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(s),u=i(7),l=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500,a=arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16384,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n(this,e);var u=r(this,t.call(this));return o>16384&&(o=16384),o>i&&(o=i),u._properties=[!1,!0,!1,!1,!1],u._maxSize=i,u._batchSize=o,u._glBuffers={},u._bufferUpdateIDs=[],u._updateID=0,u.interactiveChildren=!1,u.blendMode=h.BLEND_MODES.NORMAL,u.autoResize=s,u.roundPixels=!0,u.baseTexture=null,u.setProperties(a),u._tint=0,u.tintRgb=new Float32Array(4),u.tint=16777215,u}return a(e,t),e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},e.prototype.renderWebGL=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){return e.onChildrenChange(0)})),t.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var e=t.context,i=this.worldTransform,n=!0,r=0,a=0,o=0,s=0;t.setBlendMode(this.blendMode),e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var h=0;h<this.children.length;++h){var u=this.children[h];if(u.visible){var l=u._texture.frame;if(e.globalAlpha=this.worldAlpha*u.alpha,u.rotation%(2*Math.PI)==0)n&&(e.setTransform(i.a,i.b,i.c,i.d,i.tx*t.resolution,i.ty*t.resolution),n=!1),r=u.anchor.x*(-l.width*u.scale.x)+u.position.x+.5,a=u.anchor.y*(-l.height*u.scale.y)+u.position.y+.5,o=l.width*u.scale.x,s=l.height*u.scale.y;else{n||(n=!0),u.displayObjectUpdateTransform();var c=u.worldTransform;t.roundPixels?e.setTransform(c.a,c.b,c.c,c.d,c.tx*t.resolution|0,c.ty*t.resolution|0):e.setTransform(c.a,c.b,c.c,c.d,c.tx*t.resolution,c.ty*t.resolution),r=u.anchor.x*-l.width+.5,a=u.anchor.y*-l.height+.5,o=l.width,s=l.height}var f=u._texture.baseTexture.resolution;e.drawImage(u._texture.baseTexture.source,l.x*f,l.y*f,l.width*f,l.height*f,r*t.resolution,a*t.resolution,o*t.resolution,s*t.resolution)}}}},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._buffers)for(var i=0;i<this._buffers.length;++i)this._buffers[i].destroy();this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},o(e,[{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,(0,u.hex2rgb)(t,this.tintRgb)}}]),e}(h.Container);e.default=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(583);Object.defineProperty(e,"ParticleContainer",{enumerable:!0,get:function(){return n(r).default}});var a=i(586);Object.defineProperty(e,"ParticleRenderer",{enumerable:!0,get:function(){return n(a).default}})},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var a=i(26),o=n(a),s=i(146),h=n(s),u=function(){function t(e,i,n,a){r(this,t),this.gl=e,this.size=a,this.dynamicProperties=[],this.staticProperties=[];for(var o=0;o<i.length;++o){var s=i[o];s={attribute:s.attribute,size:s.size,uploadFunction:s.uploadFunction,unsignedByte:s.unsignedByte,offset:s.offset},n[o]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.gl,e=0;this.indices=(0,h.default)(this.size),this.indexBuffer=o.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i){var n=this.dynamicProperties[i];n.offset=e,e+=n.size,this.dynamicStride+=n.size}var r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=o.default.GLBuffer.createVertexBuffer(t,r,t.STREAM_DRAW);var a=0;this.staticStride=0;for(var s=0;s<this.staticProperties.length;++s){var u=this.staticProperties[s];u.offset=a,a+=u.size,this.staticStride+=u.size}var l=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(l),this.staticDataUint32=new Uint32Array(l),this.staticBuffer=o.default.GLBuffer.createVertexBuffer(t,l,t.STATIC_DRAW),this.vao=new o.default.VertexArrayObject(t).addIndex(this.indexBuffer);for(var c=0;c<this.dynamicProperties.length;++c){var f=this.dynamicProperties[c];f.unsignedByte?this.vao.addAttribute(this.dynamicBuffer,f.attribute,t.UNSIGNED_BYTE,!0,4*this.dynamicStride,4*f.offset):this.vao.addAttribute(this.dynamicBuffer,f.attribute,t.FLOAT,!1,4*this.dynamicStride,4*f.offset)}for(var d=0;d<this.staticProperties.length;++d){var p=this.staticProperties[d];p.unsignedByte?this.vao.addAttribute(this.staticBuffer,p.attribute,t.UNSIGNED_BYTE,!0,4*this.staticStride,4*p.offset):this.vao.addAttribute(this.staticBuffer,p.attribute,t.FLOAT,!1,4*this.staticStride,4*p.offset)}},t.prototype.uploadDynamic=function(t,e,i){for(var n=0;n<this.dynamicProperties.length;n++){var r=this.dynamicProperties[n];r.uploadFunction(t,e,i,r.unsignedByte?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,r.offset)}this.dynamicBuffer.upload()},t.prototype.uploadStatic=function(t,e,i){for(var n=0;n<this.staticProperties.length;n++){var r=this.staticProperties[n];r.uploadFunction(t,e,i,r.unsignedByte?this.staticDataUint32:this.staticData,this.staticStride,r.offset)}this.staticBuffer.upload()},t.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicBuffer.destroy(),this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer.destroy(),this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null},t}();e.default=u},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(5),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(s),u=i(587),l=n(u),c=i(585),f=n(c),d=i(7),p=function(t){function e(i){r(this,e);var n=a(this,t.call(this,i));return n.shader=null,n.indexBuffer=null,n.properties=null,n.tempMatrix=new h.Matrix,n.CONTEXT_UID=0,n}return o(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new l.default(t),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,unsignedByte:!0,uploadFunction:this.uploadTint,offset:0}]},e.prototype.start=function(){this.renderer.bindShader(this.shader)},e.prototype.render=function(t){var e=t.children,i=t._maxSize,n=t._batchSize,r=this.renderer,a=e.length;if(0!==a){a>i&&(a=i);var o=t._glBuffers[r.CONTEXT_UID];o||(o=t._glBuffers[r.CONTEXT_UID]=this.generateBuffers(t));var s=e[0]._texture.baseTexture;this.renderer.setBlendMode(h.utils.correctBlendMode(t.blendMode,s.premultipliedAlpha));var u=r.gl,l=t.worldTransform.copy(this.tempMatrix);l.prepend(r._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=l.toArray(!0),this.shader.uniforms.uColor=h.utils.premultiplyRgba(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,s.premultipliedAlpha),this.shader.uniforms.uSampler=r.bindTexture(s);for(var c=!1,f=0,d=0;f<a;f+=n,d+=1){var p=a-f;if(p>n&&(p=n),d>=o.length){if(!t.autoResize)break;o.push(this._generateOneMoreBuffer(t))}var m=o[d];m.uploadDynamic(e,f,p);var v=t._bufferUpdateIDs[d]||0;c=c||m._updateID<v,c&&(m._updateID=t._updateID,m.uploadStatic(e,f,p)),r.bindVao(m.vao),m.vao.draw(u.TRIANGLES,6*p)}}},e.prototype.generateBuffers=function(t){for(var e=this.renderer.gl,i=[],n=t._maxSize,r=t._batchSize,a=t._properties,o=0;o<n;o+=r)i.push(new f.default(e,this.properties,a,r));return i},e.prototype._generateOneMoreBuffer=function(t){var e=this.renderer.gl,i=t._batchSize,n=t._properties;return new f.default(e,this.properties,n,i)},e.prototype.uploadVertices=function(t,e,i,n,r,a){for(var o=0,s=0,h=0,u=0,l=0;l<i;++l){var c=t[e+l],f=c._texture,d=c.scale.x,p=c.scale.y,m=f.trim,v=f.orig;m?(s=m.x-c.anchor.x*v.width,o=s+m.width,u=m.y-c.anchor.y*v.height,h=u+m.height):(o=v.width*(1-c.anchor.x),s=v.width*-c.anchor.x,h=v.height*(1-c.anchor.y),u=v.height*-c.anchor.y),n[a]=s*d,n[a+1]=u*p,n[a+r]=o*d,n[a+r+1]=u*p,n[a+2*r]=o*d,n[a+2*r+1]=h*p,n[a+3*r]=s*d,n[a+3*r+1]=h*p,a+=4*r}},e.prototype.uploadPosition=function(t,e,i,n,r,a){for(var o=0;o<i;o++){var s=t[e+o].position;n[a]=s.x,n[a+1]=s.y,n[a+r]=s.x,n[a+r+1]=s.y,n[a+2*r]=s.x,n[a+2*r+1]=s.y,n[a+3*r]=s.x,n[a+3*r+1]=s.y,a+=4*r}},e.prototype.uploadRotation=function(t,e,i,n,r,a){for(var o=0;o<i;o++){var s=t[e+o].rotation;n[a]=s,n[a+r]=s,n[a+2*r]=s,n[a+3*r]=s,a+=4*r}},e.prototype.uploadUvs=function(t,e,i,n,r,a){for(var o=0;o<i;++o){var s=t[e+o]._texture._uvs;s?(n[a]=s.x0,n[a+1]=s.y0,n[a+r]=s.x1,n[a+r+1]=s.y1,n[a+2*r]=s.x2,n[a+2*r+1]=s.y2,n[a+3*r]=s.x3,n[a+3*r+1]=s.y3,a+=4*r):(n[a]=0,n[a+1]=0,n[a+r]=0,n[a+r+1]=0,n[a+2*r]=0,n[a+2*r+1]=0,n[a+3*r]=0,n[a+3*r+1]=0,a+=4*r)}},e.prototype.uploadTint=function(t,e,i,n,r,a){for(var o=0;o<i;++o){var s=t[e+o],h=s._texture.baseTexture.premultipliedAlpha,u=s.alpha,l=u<1&&h?(0,d.premultiplyTint)(s._tintRGB,u):s._tintRGB+(255*u<<24);n[a]=l,n[a+r]=l,n[a+2*r]=l,n[a+3*r]=l,a+=4*r}},e.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),t.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},e}(h.ObjectRenderer);e.default=p,h.WebGLRenderer.registerPlugin("particle",p)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var o=i(69),s=function(t){return t&&t.__esModule?t:{default:t}}(o),h=function(t){function e(i){return n(this,e),r(this,t.call(this,i,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","attribute vec2 aPositionCoord;","attribute float aRotation;","uniform mat3 projectionMatrix;","uniform vec4 uColor;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   vec2 v = vec2(x, y);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor * uColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;","  gl_FragColor = color;","}"].join("\n")))}return a(e,t),e}(s.default);e.default=h},function(t,e,i){"use strict";Math.sign||(Math.sign=function(t){return t=Number(t),0===t||isNaN(t)?t:t>0?1:-1})},function(t,e,i){"use strict";Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t})},function(t,e,i){"use strict";var n=i(504),r=function(t){return t&&t.__esModule?t:{default:t}}(n);Object.assign||(Object.assign=r.default)},function(t,e,i){"use strict";i(590),i(592),i(588),i(589),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},function(t,e,i){"use strict";(function(t){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!t.performance||!t.performance.now){var e=Date.now();t.performance||(t.performance={}),t.performance.now=function(){return Date.now()-e}}for(var i=Date.now(),n=["ms","moz","webkit","o"],r=0;r<n.length&&!t.requestAnimationFrame;++r){var a=n[r];t.requestAnimationFrame=t[a+"RequestAnimationFrame"],t.cancelAnimationFrame=t[a+"CancelAnimationFrame"]||t[a+"CancelRequestAnimationFrame"]}t.requestAnimationFrame||(t.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),n=16+i-e;return n<0&&(n=0),i=e,setTimeout(function(){i=Date.now(),t(performance.now())},n)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){return clearTimeout(t)})}).call(e,i(98))},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e){if(e instanceof h.BaseTexture){var i=e.source,n=0===i.width?t.canvas.width:Math.min(t.canvas.width,i.width),r=0===i.height?t.canvas.height:Math.min(t.canvas.height,i.height);return t.ctx.drawImage(i,0,0,n,r,0,0,t.canvas.width,t.canvas.height),!0}return!1}e.__esModule=!0;var s=i(5),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(s),u=i(147),l=function(t){return t&&t.__esModule?t:{default:t}}(u),c=16,f=function(t){function e(i){n(this,e);var a=r(this,t.call(this,i));return a.uploadHookHelper=a,a.canvas=document.createElement("canvas"),a.canvas.width=c,a.canvas.height=c,a.ctx=a.canvas.getContext("2d"),a.registerUploadHook(o),a}return a(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.ctx=null,this.canvas=null},e}(l.default);e.default=f,h.CanvasRenderer.registerPlugin("prepare",f)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(596);Object.defineProperty(e,"webgl",{enumerable:!0,get:function(){return n(r).default}});var a=i(593);Object.defineProperty(e,"canvas",{enumerable:!0,get:function(){return n(a).default}});var o=i(147);Object.defineProperty(e,"BasePrepare",{enumerable:!0,get:function(){return n(o).default}});var s=i(246);Object.defineProperty(e,"CountLimiter",{enumerable:!0,get:function(){return n(s).default}});var h=i(595);Object.defineProperty(e,"TimeLimiter",{enumerable:!0,get:function(){return n(h).default}})},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(e){n(this,t),this.maxMilliseconds=e,this.frameStart=0}return t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},t}();e.default=r},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e){return e instanceof l.BaseTexture&&(e._glTextures[t.CONTEXT_UID]||t.textureManager.updateTexture(e),!0)}function s(t,e){return e instanceof l.Graphics&&((e.dirty||e.clearDirty||!e._webGL[t.plugins.graphics.CONTEXT_UID])&&t.plugins.graphics.updateGraphics(e),!0)}function h(t,e){return t instanceof l.Graphics&&(e.push(t),!0)}e.__esModule=!0;var u=i(5),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(u),c=i(147),f=function(t){return t&&t.__esModule?t:{default:t}}(c),d=function(t){function e(i){n(this,e);var a=r(this,t.call(this,i));return a.uploadHookHelper=a.renderer,a.registerFindHook(h),a.registerUploadHook(o),a.registerUploadHook(s),a}return a(e,t),e}(f.default);e.default=d,l.WebGLRenderer.registerPlugin("prepare",d)},function(t,e,i){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,i,a){e=e||"&",i=i||"=";var o={};if("string"!=typeof t||0===t.length)return o;var s=/\+/g;t=t.split(e);var h=1e3;a&&"number"==typeof a.maxKeys&&(h=a.maxKeys);var u=t.length;h>0&&u>h&&(u=h);for(var l=0;l<u;++l){var c,f,d,p,m=t[l].replace(s,"%20"),v=m.indexOf(i);v>=0?(c=m.substr(0,v),f=m.substr(v+1)):(c=m,f=""),d=decodeURIComponent(c),p=decodeURIComponent(f),n(o,d)?r(o[d])?o[d].push(p):o[d]=[o[d],p]:o[d]=p}return o};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,i){"use strict";function n(t,e){if(t.map)return t.map(e);for(var i=[],n=0;n<t.length;n++)i.push(e(t[n],n));return i}var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,i,s){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?n(o(t),function(o){var s=encodeURIComponent(r(o))+i;return a(t[o])?n(t[o],function(t){return s+encodeURIComponent(r(t))}).join(e):s+encodeURIComponent(r(t[o]))}).join(e):s?encodeURIComponent(r(s))+i+encodeURIComponent(r(t)):""};var a=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},function(t,e,i){"use strict";e.decode=e.parse=i(597),e.encode=e.stringify=i(598)},function(t,e){!function(e){"use strict";function i(t,e,i,n){var a=e&&e.prototype instanceof r?e:r,o=Object.create(a.prototype),s=new d(n||[]);return o._invoke=u(t,i,s),o}function n(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}function r(){}function a(){}function o(){}function s(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function h(t){function e(i,r,a,o){var s=n(t[i],t,r);if("throw"!==s.type){var h=s.arg,u=h.value;return u&&"object"==typeof u&&y.call(u,"__await")?Promise.resolve(u.__await).then(function(t){e("next",t,a,o)},function(t){e("throw",t,a,o)}):Promise.resolve(u).then(function(t){h.value=t,a(h)},o)}o(s.arg)}function i(t,i){function n(){return new Promise(function(n,r){e(t,i,n,r)})}return r=r?r.then(n,n):n()}var r;this._invoke=i}function u(t,e,i){var r=I;return function(a,o){if(r===x)throw new Error("Generator is already running");if(r===P){if("throw"===a)throw o;return m()}for(i.method=a,i.arg=o;;){var s=i.delegate;if(s){var h=l(s,i);if(h){if(h===M)continue;return h}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===I)throw r=P,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=x;var u=n(t,e,i);if("normal"===u.type){if(r=i.done?P:w,u.arg===M)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(r=P,i.method="throw",i.arg=u.arg)}}}function l(t,e){var i=t.iterator[e.method];if(i===v){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=v,l(t,e),"throw"===e.method))return M;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return M}var r=n(i,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,M;var a=r.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=v),e.delegate=null,M):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,M)}function c(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function f(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function d(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(c,this),this.reset(!0)}function p(t){if(t){var e=t[T];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,n=function e(){for(;++i<t.length;)if(y.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=v,e.done=!0,e};return n.next=n}}return{next:m}}function m(){return{value:v,done:!0}}var v,g=Object.prototype,y=g.hasOwnProperty,_="function"==typeof Symbol?Symbol:{},T=_.iterator||"@@iterator",E=_.asyncIterator||"@@asyncIterator",S=_.toStringTag||"@@toStringTag",b="object"==typeof t,A=e.regeneratorRuntime;if(A)return void(b&&(t.exports=A));A=e.regeneratorRuntime=b?t.exports:{},A.wrap=i;var I="suspendedStart",w="suspendedYield",x="executing",P="completed",M={},O={};O[T]=function(){return this};var C=Object.getPrototypeOf,R=C&&C(C(p([])));R&&R!==g&&y.call(R,T)&&(O=R);var k=o.prototype=r.prototype=Object.create(O);a.prototype=k.constructor=o,o.constructor=a,o[S]=a.displayName="GeneratorFunction",A.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===a||"GeneratorFunction"===(e.displayName||e.name))},A.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,S in t||(t[S]="GeneratorFunction")),t.prototype=Object.create(k),t},A.awrap=function(t){return{__await:t}},s(h.prototype),h.prototype[E]=function(){return this},A.AsyncIterator=h,A.async=function(t,e,n,r){var a=new h(i(t,e,n,r));return A.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},s(k),k[S]="Generator",k[T]=function(){return this},k.toString=function(){return"[object Generator]"},A.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){for(;e.length;){var n=e.pop();if(n in t)return i.value=n,i.done=!1,i}return i.done=!0,i}},A.values=p,d.prototype={constructor:d,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=v,this.done=!1,this.delegate=null,this.method="next",this.arg=v,this.tryEntries.forEach(f),!t)for(var e in this)"t"===e.charAt(0)&&y.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=v)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,n){return a.type="throw",a.arg=t,i.next=e,n&&(i.method="next",i.arg=v),!!n}if(this.done)throw t;for(var i=this,n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n],a=r.completion;if("root"===r.tryLoc)return e("end");if(r.tryLoc<=this.prev){var o=y.call(r,"catchLoc"),s=y.call(r,"finallyLoc");if(o&&s){if(this.prev<r.catchLoc)return e(r.catchLoc,!0);if(this.prev<r.finallyLoc)return e(r.finallyLoc)}else if(o){if(this.prev<r.catchLoc)return e(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return e(r.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&y.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var r=n;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=t,a.arg=e,r?(this.method="next",this.next=r.finallyLoc,M):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),M},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),f(i),M}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var n=i.completion;if("throw"===n.type){var r=n.arg;f(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:p(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=v),M}}}(function(){return this}()||Function("return this")())},function(t,e,i){"use strict";function n(t,e,i){var n,r=t.length;if(!(e>=r||0===i)){i=e+i>r?r-e:i;var a=r-i;for(n=e;n<a;++n)t[n]=t[n+i];t.length=a}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(199),h=n(s),u=i(200),l=n(u),c=i(247),f=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(c),d=i(148),p=n(d),m=/(#[\w-]+)?$/,v=function(){function t(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;r(this,t),this.baseUrl=i,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,i){return e._loadResource(t,i)},this._queue=f.queue(this._boundLoadResource,n),this._queue.pause(),this.resources={},this.onProgress=new h.default,this.onError=new h.default,this.onLoad=new h.default,this.onStart=new h.default,this.onComplete=new h.default}return t.prototype.add=function(t,e,i,n){if(Array.isArray(t)){for(var r=0;r<t.length;++r)this.add(t[r]);return this}if("object"===(void 0===t?"undefined":a(t))&&(n=e||t.callback||t.onComplete,i=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(n=i,i=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof i&&(n=i,i=null),this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new p.default(t,e,i),"function"==typeof n&&this.resources[t].onAfterMiddleware.once(n),this.loading){for(var o=i.parentResource,s=[],h=0;h<o.children.length;++h)o.children[h].isComplete||s.push(o.children[h]);var u=o.progressChunk*(s.length+1),l=u/(s.length+2);o.children.push(this.resources[t]),o.progressChunk=l;for(var c=0;c<s.length;++c)s[c].progressChunk=l;this.resources[t].progressChunk=l}return this._queue.push(this.resources[t]),this},t.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},t.prototype.use=function(t){return this._afterMiddleware.push(t),this},t.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var t in this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},t.prototype.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=this._queue._tasks.length,i=100/e,n=0;n<this._queue._tasks.length;++n)this._queue._tasks[n].data.progressChunk=i;this._onStart(),this._queue.resume()}return this},t.prototype._prepareUrl=function(t){var e=(0,l.default)(t,{strictMode:!0}),i=void 0;if(i=e.protocol||!e.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var n=m.exec(i)[0];i=i.substr(0,i.length-n.length),-1!==i.indexOf("?")?i+="&"+this.defaultQueryString:i+="?"+this.defaultQueryString,i+=n}return i},t.prototype._loadResource=function(t,e){var i=this;t._dequeue=e,f.eachSeries(this._beforeMiddleware,function(e,n){e.call(i,t,function(){n(t.isComplete?{}:null)})},function(){t.isComplete?i._onLoad(t):(t._onLoadBinding=t.onComplete.once(i._onLoad,i),t.load())},!0)},t.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),f.eachSeries(this._afterMiddleware,function(i,n){i.call(e,t,n)},function(){t.onAfterMiddleware.dispatch(t),e.progress+=t.progressChunk,e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()},!0)},o(t,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),t}();e.default=v},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(){return function(t,e){if(!t.data)return void e();if(t.xhr&&t.xhrType===s.default.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var i=function(){var i=l.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=i,t.type=s.default.TYPE.IMAGE,t.data.onload=function(){l.revokeObjectURL(i),t.data.onload=null,e()},{v:void 0}}();if("object"===(void 0===i?"undefined":a(i)))return i.v}}else{var n=t.xhr.getResponseHeader("content-type");if(n&&0===n.indexOf("image"))return t.data=new Image,t.data.src="data:"+n+";base64,"+u.default.encodeBinary(t.xhr.responseText),t.type=s.default.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}}e.__esModule=!0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.blobMiddlewareFactory=r;var o=i(148),s=n(o),h=i(248),u=n(h),l=window.URL||window.webkitURL},function(t,e,i){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){i(251),t.exports=i(250)}]);