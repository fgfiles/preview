!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.p3lib=f()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){function Application(){this._assetManager=null,this._screenManager=null,this._currentScreen=null,this._transition=null}var Common=require("./Common"),GameScreen=require("./screens/GameScreen"),SplashScreen=require("./screens/SplashScreen"),IntroScreen=require("./screens/IntroScreen"),PauseOverlay=require("./overlays/PauseOverlay"),GameOverOverlay=require("./overlays/GameOverOverlay"),Transition=require("./lib/Transition"),SavedData=require("./SavedData");module.exports=Application,Application.prototype.init=function(){if(console.log("APPLICATION INITIALIZED"),this._assetManager=p3.AssetManager.instance,this._screenManager=Common.sceneManager,TweenMax.defaultOverwrite="none",void 0==Common.generatedTextures.blackSquare){var gr=new PIXI.Graphics;gr.beginFill(0),gr.drawRect(0,0,1,1),Common.generatedTextures.blackSquare=gr.generateTexture(Common.renderer,1,PIXI.SCALE_MODES.LINEAR)}Common.savedData=new SavedData,Common.savedData.init(),this.showSplash()},Application.prototype.showSplash=function(){var screen=new SplashScreen;this._screenManager.add(screen,this._getTransition()),screen.signals.requestedPreviousScreen.addOnce(function(){},this),screen.signals.requestedNextScreen.addOnce(function(){this.showIntro()},this),this._currentScreen=screen},Application.prototype.showIntro=function(){var screen=new IntroScreen;return this._screenManager.add(screen,this._getTransition()),screen.signals.requestedPreviousScreen.addOnce(function(){},this),screen.signals.requestedNextScreen.addOnce(function(){this.showGame(!0)},this),this._currentScreen=screen,screen},Application.prototype.showGame=function(showPause){var screen=new GameScreen;return this._screenManager.add(screen,this._getTransition()),screen.signals.requestedPreviousScreen.addOnce(function(){},this),screen.signals.requestedNextScreen.addOnce(function(score){this.showGameOver(score)},this),screen.signals.pausePressed.add(function(){this.showPause(!1)},this),this._currentScreen=screen,showPause&&!Common.savedData.hasViewedInstructions&&Common.animator.setTimeout(function(){this.showPause(!0),Common.savedData.hasViewedInstructions=!0,Common.savedData.save()},.1,this),screen},Application.prototype.showPause=function(showHelp){var t=new Transition;t.replace=!1,t.push=!0,this._currentScreen.hideGUI(),screen=new PauseOverlay,this._screenManager.add(screen,t),screen.signals.requestedNextScreen.addOnce(function(id){this._screenManager.remove(),this._currentScreen.showGUI()},this),screen.signals.requestedPreviousScreen.addOnce(function(id){this.showSplash()},this),showHelp&&p3.Timestep.queueCall(screen.setIntroHelpMode,[],screen)},Application.prototype.showGameOver=function(score){var t=new Transition;t.replace=!1,t.push=!0,this._currentScreen.hideGUI(),screen=new GameOverOverlay(score),this._screenManager.add(screen,t),screen.signals.requestedNextScreen.addOnce(function(id){this.showSplash()},this),screen.signals.requestedPreviousScreen.addOnce(function(id){screen.animateOut(this.showGame,this)},this)},Application.prototype._getTransition=function(){var transition=new Transition;return transition.replace=!0,transition.push=!1,transition}},{"./Common":2,"./SavedData":4,"./lib/Transition":19,"./overlays/GameOverOverlay":20,"./overlays/PauseOverlay":21,"./screens/GameScreen":22,"./screens/IntroScreen":23,"./screens/SplashScreen":26}],2:[function(require,module,exports){function Common(){}module.exports=Common,Common.STAGE_WIDTH=1900,Common.STAGE_HEIGHT=768,Common.stage=null,Common.renderer=null,Common.timestep=null,Common.animator=null,Common.touch=new PIXI.Point(0,0),Common.paused=!1,Common.isWebGL=!1,Common.DEBUG_PAINT_MODE=0,Common.frameCount=0,Common.FPS=60,Common.sceneManager=null,Common.generatedTextures={},Common.COUNTRY_CODE="en",Common.animationData={},Common.savedData=null},{}],3:[function(require,module,exports){function Main(width,height){this._width=width,this._height=height,this._assetManager=null,this._screenManager=null,this._preloader=null,this._game=null,this._resolution=1,this._scale="hd/",this._renderFPS=60,this._frameCount=0}var Application=require("./Application"),Common=require("./Common"),Preloader=require("./screens/Preloader"),SceneManager=require("./lib/SceneManager");window.Main=Main,Main.prototype.init=function(){this._assetManager=p3.AssetManager.instance,this._screenManager=new SceneManager,Common.COUNTRY_CODE=window.og.language;var elementId="og-game-holder",params=new p3.ViewParams;params.width=this._width,params.height=this._height,params.holderId=elementId,params.rotateImageUrl="assets/images/system/"+Common.COUNTRY_CODE+"/rotate_device.jpg",params.rotateImageColor="#000000",PIXI.RETINA_PREFIX=/\_(?=[^_]*$)(.+)x/,p3.Tracking.DEBUG=!0,Common.tracking=new p3.Tracking,Common.tracking.init(new p3.TrackingModuleEcho(window.stats)),p3.Device.init(window.bowser),TweenMax.defaultOverwrite="none",TweenMax.ticker.fps(Common.FPS);var canvas=new p3.View(params);canvas.signals.ready.addOnce(function(canvas){var options={};options.view=canvas,options.transparent=!1,options.antialias=!1,options.preserveDrawingBuffer=!1,options.resolution=this._resolution,this._assetManager.scaleFactor=this._resolution;var stage=new PIXI.Container;Common.stage=stage;var renderer=PIXI.autoDetectRenderer(this._width,this._height,options);Common.renderer=renderer,this._screenManager.init(stage,renderer),Common.sceneManager=this._screenManager,Common.isWebGL=renderer instanceof PIXI.WebGLRenderer,Common.DEBUG_PAINT_MODE=p3.Utils.getURLParameter("paint",0);var timestep=new p3.Timestep;timestep.init(this.update,this.render,this),Common.timestep=timestep,Common.animator=new p3.Animator,Common.animator.init(),this.loadPreloader()},this),canvas.signals.resize.add(this.onCanvasResize,this);var hidden;"undefined"!=typeof document.hidden?(hidden="hidden",this.visibilityChange="visibilitychange"):"undefined"!=typeof document.mozHidden?(hidden="mozHidden",this.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(hidden="msHidden",this.visibilityChange="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(hidden="webkitHidden",this.visibilityChange="webkitvisibilitychange"),document.addEventListener(this.visibilityChange,function(){document[hidden]?Howler.volume(0):Howler.volume(1)},!1)},Main.prototype.loadPreloader=function(){scale=this._scale;var prefix="sd/"===scale?"_0.5x":"",files=[{name:"preloader_0",url:"images/"+scale+"preloader"+prefix+".json"},{name:"preloader_bg",url:"images/"+scale+"titles_"+Common.COUNTRY_CODE+"/preloader"+prefix+".jpg"}],sounds=[];files.length?(this._assetManager.addFiles(files,window.og.gameDir+"assets/"),this._assetManager.signalCompleted.addOnce(function(){this.loadAssets()},this),this._assetManager.load(),p3.AudioManager.instance.addSounds(sounds,[".mp3",".ogg"],"")):this.loadAssets()},Main.prototype.loadAssets=function(){var scale=this._scale,prefix="sd/"===scale?"_0.5x":"",files=[{name:"config",url:"data/config.json"},{name:"game_0",url:"images/"+scale+"game_0"+prefix+".json"},{name:"game_1",url:"images/"+scale+"game_1"+prefix+".json"},{name:"intro_0",url:"images/"+scale+"intro_0"+prefix+".json"},{name:"menus_0",url:"images/"+scale+"menus_0"+prefix+".json"},{name:"ui_0",url:"images/"+scale+"ui_0"+prefix+".json"},{name:"titles",url:"images/"+scale+"titles_"+Common.COUNTRY_CODE+"/titles"+prefix+".json"},{name:"ui_intro_0",url:"images/"+scale+"ui_intro_0"+prefix+".jpg"},{name:"ui_intro_3",url:"images/"+scale+"ui_intro_3"+prefix+".jpg"},{name:"ui_splash_bg",url:"images/"+scale+"ui_splash_bg"+prefix+".jpg"},{name:"pendlefont_42_white_shadow",url:"fonts/pendlefont_42_white_shadow.json"},{name:"pendlefont_36_black",url:"fonts/pendlefont_36_black.json"}],sounds=["music_bass_loop_bg","music_bass_loop_attack","sfx_8bit_backgroundloop_00","sfx_ambient_ice_creaking_00","sfx_btn_press_fwd_00","sfx_btn_rollover_00","sfx_button_play","sfx_finn_walk","sfx_gameover","sfx_gemcollect_00","sfx_gunter_quackloop_02","sfx_hero_hit_00","sfx_ice_wind","sfx_jake_walk","sfx_iceking_appear","sfx_iceking_attack_00","sfx_iceking_attack_01","sfx_iceking_attack_02","sfx_iceking_disappear","sfx_iceking_loop","sfx_iceking_warning_01","sfx_marceline_hit_01","sfx_penguin_gunter_hit_00","sfx_penguin_gunter_splash","sfx_penguin_gunter_walk","sfx_penguin_hit_00","sfx_penguin_hit_01","sfx_penguin_hit_03","sfx_penguin_hit_04","sfx_penguin_hit_05","sfx_penguin_hit_06","sfx_penguin_quackloop_00","sfx_penguin_quackloop_01","sfx_penguin_quackloop_02","sfx_penguin_splash_00","sfx_penguin_splash_01","sfx_penguin_splash_03","sfx_penguin_splash_04","sfx_penguin_splash_05","sfx_penguin_walk"];files.length?(this._assetManager.addFiles(files,window.og.gameDir+"assets/"),this._assetManager.signalProgress.add(this.onLoadingProgress,this),this._assetManager.signalCompleted.addOnce(this.onLoadingCompleted,this),this._assetManager.load(),this._preloader=new Preloader,this._screenManager.add(this._preloader),p3.AudioManager.instance.addSounds(sounds,[".mp3",".ogg"],window.og.gameDir+"assets/audio/")):this.startGame()},Main.prototype.startGame=function(){var that=this;that._game=new Application,that._game.init()},Main.prototype.update=function(){this._screenManager.update(),Common.animator.update(),Common.DEBUG_PAINT_MODE>0&&this.paintBadImage(Common.stage),this._frameCount++,Common.frameCount=this._frameCount},Main.prototype.render=function(){(this._frameCount%2==0||60==this._fps)&&Common.renderer.render(Common.stage)},Main.prototype.paintBadImage=function(display,color){color=color||11141375;for(var child,i=0;i<display.children.length;++i)child=display.children[i],child instanceof PIXI.Sprite&&(1==Common.DEBUG_PAINT_MODE&&(child.texture.width%2!=0||child.texture.height%2!=0?child.tint=color:child.tint=16777215),2==Common.DEBUG_PAINT_MODE&&(child.position.x!==parseInt(child.position.x)||child.position.y!==parseInt(child.position.y)?child.tint=color:child.tint=16777215)),this.paintBadImage(child,color)},Main.prototype.onLoadingProgress=function(event){this._preloader.loadedPercentage=event.progress},Main.prototype.onLoadingCompleted=function(){this._preloader.loadedPercentage=100,this._preloader.animateOut(null,this),this._preloader=null,this._assetManager.signalProgress.removeAll(),this._assetManager.signalCompleted.removeAll(),this.startGame()},Main.prototype.onCanvasResize=function(correct){correct&&(Common.renderer.resize(p3.View.width,p3.View.height),this._screenManager&&this._screenManager.resize())}},{"./Application":1,"./Common":2,"./lib/SceneManager":18,"./screens/Preloader":24}],4:[function(require,module,exports){function SavedData(){p3.AssetManager.instance;this.hasViewedInstructions=!1,this.hasSeenIntro=!1,this.SAVE_NAME="adventure_time_marcelines_ice_blast",this.SAVE_VERSION="0.0.0",this.SAVE_SEED="x5k0Eo6R177mUkb"}require("./Common");module.exports=SavedData,SavedData.prototype.init=function(){window.localStorage[this.SAVE_NAME+"_"+this.SAVE_VERSION]?(console.log("load"),this.load()):(console.log("reset"),this.reset(),this.save())},SavedData.prototype.reset=function(){},SavedData.prototype.load=function(){var data=window.localStorage[this.SAVE_NAME+"_"+this.SAVE_VERSION];data=JSON.parse(data),this.hasSeenIntro=data.hasSeenIntro,this.hasViewedInstructions=data.hasViewedInstructions},SavedData.prototype.save=function(){console.log("save");var data={};data.hasSeenIntro=this.hasSeenIntro,data.hasViewedInstructions=this.hasViewedInstructions;var json=JSON.stringify(data);data.hash=md5(json+this.SAVE_SEED),window.localStorage[this.SAVE_NAME+"_"+this.SAVE_VERSION]=JSON.stringify(data)}},{"./Common":2}],5:[function(require,module,exports){function Avatar(){this._radialHolder=null,this._radialPool=null,this._characterHolder=null,this._inactiveAnimation=null,this._activeAnimation=null,this._frozenSprite=null,this._gravity=.5,this._maxYSpeed=10,this._ySpeedIncrement=1.7,this._waveTimerLimit=5,this._waveTimer=this._waveTimerLimit,this._waveTween=null,this._onFloor=!1,this._touching=!1,this.fireLengthValue=null,this.fireLengthLimit=20,this.kickBack=0,this.kickBackMax=80,this.kickBackPercent=0,this.alive=!0,ScrollerObject.call(this,"avatar",!1),this.signals.generateWave=new signals.Signal,this.signals.landOnFloor=new signals.Signal,this.signals.jump=new signals.Signal,this.signals.frozen=new signals.Signal}var Common=require("../Common"),ScrollerObject=require("../scroller/ScrollerObject"),SoundSFX=require("../general/SoundSFX");module.exports=Avatar,Avatar.prototype=Object.create(ScrollerObject.prototype),Avatar.prototype.constructor=Avatar,Avatar.prototype.init=function(){this._radialHolder=new PIXI.Container,this.addChild(this._radialHolder),this._characterHolder=new PIXI.Container,this._characterHolder.scale=new PIXI.Point(.8,.8),this.addChild(this._characterHolder),this._inactiveAnimation=new p3.MovieClip(this._generateAnimationSequence("marceline_non_active",8)),this._inactiveAnimation.animationSpeed=15,this._inactiveAnimation.looping=!0,this._inactiveAnimation.play(),this._inactiveAnimation.anchor=new PIXI.Point(.5,.5),this._characterHolder.addChild(this._inactiveAnimation),this._activeAnimation=new p3.MovieClip(this._generateAnimationSequence("marceline_strum",8)),this._activeAnimation.animationSpeed=15,this._activeAnimation.looping=!0,this._activeAnimation.play(),this._activeAnimation.anchor=new PIXI.Point(.5,.5),this._activeAnimation.visible=!1,this._characterHolder.addChild(this._activeAnimation),this._frozenSprite=new PIXI.Sprite(this._assetManager.getTexture("marceline_frozen")),this._frozenSprite.anchor=new PIXI.Point(.5,.5),this._frozenSprite.visible=!1,this._characterHolder.addChild(this._frozenSprite),this.areaRect=new PIXI.Rectangle(-75,-100,150,200),this.collisionRect=new PIXI.Rectangle(-20,-40,70,90),this._radialPool=new p3.ObjectPool(PIXI.Sprite,2,[this._assetManager.getTexture("player_radial")]),Common.animator.add(TweenMax.to(this._characterHolder,.7,{y:20,ease:Sine.easeInOut,repeat:-1,yoyo:!0})),Common.animator.add(TweenMax.to(this._radialHolder.scale,.1,{x:1.2,y:1.2,repeat:-1,yoyo:!0,ease:Sine.easeInOut}))},Avatar.prototype.update=function(){return this.alive?(ScrollerObject.prototype.update.call(this),this._touching?(this.ySpeed-=this._ySpeedIncrement,this.ySpeed=Math.max(this.ySpeed,this._calculateCeilingEase()*-this._maxYSpeed),this._onFloor&&(this._onFloor=!1),this.kickBackPercent+=.01,this.kickBackPercent=Math.min(this.kickBackPercent,1)):this._onFloor||(this.ySpeed+=this._gravity),this._touching||(this.kickBackPercent-=.02,this.kickBackPercent=Math.max(this.kickBackPercent,0)),this.kickBack=this._calculateKickbackEase(this.kickBackPercent)*this.kickBackMax,this._waveTimer++,void(this._waveTimer=Math.min(this._waveTimer,this._waveTimerLimit))):null},Avatar.prototype.fire=function(){this.fireLengthValue++,this._waveTimer>=this._waveTimerLimit&&this._sendWave(),this.fireLengthValue%15==0&&this._radiate()},Avatar.prototype.touch=function(){this._onFloor&&(this._onFloor=!1,this.signals.jump.dispatch())},Avatar.prototype.freeze=function(){this._frozenSprite.visible=!0,this._inactiveAnimation.visible=!1,this._activeAnimation.visible=!1;for(var tl=new TimelineMax({onCompleteScope:this,onComplete:function(){this.signals.frozen.dispatch()}}),amount=6,time=.1,i=0;amount>i;i++){var variance=.3*(1-i/amount);variance=i%2==0?variance:-1*variance,tl.to(this._frozenSprite.anchor,time-time/2*(i/amount),{x:.5+Math.random()*variance,ease:Linear.easeOut})}SoundSFX.play("sfx_marceline_hit_01"),Common.animator.add(tl),this.ySpeed=0,this.alive=!1},Avatar.prototype.pause=function(){this._activeAnimation.stop(),this._inactiveAnimation.stop()},Avatar.prototype.resume=function(){this._activeAnimation.play(),this._inactiveAnimation.play()},Avatar.prototype._generateAnimationSequence=function(character,frameLimit){for(var textureArr=[],i=0;frameLimit>=i;i++)textureArr.push(character+"_00"+i);for(var i=0;i<textureArr.length;i++)textureArr[i]=this._assetManager.getTexture(textureArr[i]);var sequence=new p3.MovieClipSequence;return sequence.addTextures(textureArr),sequence},Avatar.prototype._sendWave=function(){this.signals.generateWave.dispatch(),this._waveTimer=0},Avatar.prototype._radiate=function(){var rad=this._radialPool.create();null==rad&&(this._radialPool.expand(2),rad=this._radialPool.create()),rad.anchor=new PIXI.Point(.5,.5),rad.rotation=360*PIXI.DEG_TO_RAD*Math.random(),rad.scale=new PIXI.Point(0,0),rad.alpha=1,this._radialHolder.addChild(rad);var tl=new TimelineMax({onCompleteScope:this,onComplete:function(){Common.animator.remove(tl),this._radialHolder.removeChild(rad),this._radialPool.free(rad)}});tl.to(rad.scale,.4,{x:1,y:1,ease:Sine.easeInOut}),tl.to(rad,.2,{alpha:0},.3),Common.animator.add(tl)},Avatar.prototype._calculateCeilingEase=function(){var percent=(this.y-this.persistentRectangle.y+this.areaRect.y)/(this.persistentRectangle.height+this.areaRect.y);return percent>.25?1:4*percent},Avatar.prototype._calculateKickbackEase=function(progress){return-.5*(Math.cos(Math.PI*progress/1)-1)},Avatar.prototype.onExitPersistentRectangle=function(side){"lower"==side?this._onFloor||(this.signals.landOnFloor.dispatch(),this._onFloor=!0,this.ySpeed=0):"upper"==side&&(this.ySpeed=0)},Avatar.prototype.onTouchStart=function(){this.fireLengthValue=0,this._activeAnimation.visible=!0,this._inactiveAnimation.visible=!1,this._touching=!0},Avatar.prototype.onTouchEnd=function(){this._activeAnimation.visible=!1,this._inactiveAnimation.visible=!0,this._touching=!1}},{"../Common":2,"../general/SoundSFX":15,"../scroller/ScrollerObject":29}],6:[function(require,module,exports){function Collectible(texture,areaRect){ScrollerObject.call(this,"collectible",!0),this._texture=texture,this.areaRect=areaRect,this._sprite=null,this.hasBeenCollected=!1,this.create()}var Common=require("../Common"),ScrollerObject=require("../scroller/ScrollerObject");module.exports=Collectible,Collectible.prototype=Object.create(ScrollerObject.prototype),Collectible.prototype.constructor=Collectible,Collectible.prototype.create=function(){this._sprite=new PIXI.Sprite(this._assetManager.getTexture(this._texture)),this._sprite.anchor=new PIXI.Point(Math.abs(this.areaRect.x)/this.areaRect.width,Math.abs(this.areaRect.y)/this.areaRect.height),this.addChild(this._sprite),Math.random()<.5&&(this.scale.x=-1),this.collisionRect=this.areaRect.clone()},Collectible.prototype.init=function(){},Collectible.prototype.update=function(){ScrollerObject.prototype.update.call(this)},Collectible.prototype.reset=function(){ScrollerObject.prototype.reset.call(this),this.hasBeenCollected=!1,this._sprite.scale.x=this._sprite.scale.y=1},Collectible.prototype.collect=function(){this.hasBeenCollected=!0,Common.animator.add(TweenMax.to(this._sprite.scale,.2,{x:0,y:0,ease:Back.easeIn}))}},{"../Common":2,"../scroller/ScrollerObject":29}],7:[function(require,module,exports){function GroundEnemy(enemyType){this._enemyType=enemyType,this._sprite=null,this._gravity=.3,this._bounces=0,this._groundY=0,this._justPlayedStepSound=!1,this._quackInterval=10,this._hasFallenInWater=!1,this.hasBeenHit=!1,ScrollerObject.call(this,"groundEnemy",!0),this.create()}var Common=require("../Common"),ScrollerObject=require("../scroller/ScrollerObject"),SoundSFX=require("../general/SoundSFX");module.exports=GroundEnemy,GroundEnemy.prototype=Object.create(ScrollerObject.prototype),GroundEnemy.prototype.constructor=GroundEnemy,GroundEnemy.prototype.create=function(){var textureArr=[];if(1==this._enemyType){for(var i=0;10>i;i++)textureArr.push("penguin_l_walk_00"+i);textureArr.push("penguin_l_walk_010")}if(2==this._enemyType){for(var i=0;10>i;i++)textureArr.push("penguin_s_walk_00"+i);textureArr.push("penguin_s_walk_010")}if(3==this._enemyType)for(var i=0;7>=i;i++)textureArr.push("penguin_l_belly_00"+i);if(4==this._enemyType)for(var i=0;7>=i;i++)textureArr.push("penguin_s_belly_00"+i);for(var i=0;i<textureArr.length;i++)textureArr[i]=this._assetManager.getTexture(textureArr[i]);var sequence=new p3.MovieClipSequence;sequence.addTextures(textureArr),this._sprite=new p3.MovieClip(sequence),this._sprite.anchor=new PIXI.Point(.5,.95),this.addChild(this._sprite),this._sprite.animationSpeed=60,this._sprite.looping=!0,this._sprite.play(),this.areaRect=new PIXI.Rectangle(-this._sprite.width/2,-this._sprite.height,this._sprite.width,this._sprite.height),this.collisionRect=this.areaRect.clone(),this._stepSoundFrame=Math.round(60*Math.random())},GroundEnemy.prototype.init=function(){},GroundEnemy.prototype.update=function(){ScrollerObject.prototype.update.call(this),this.hasBeenHit?(this.ySpeed+=this._gravity,this.y>this._groundY&&(0==this._bounces?(this._bounces=1,this.ySpeed=-6,this.y=this._groundY-1,SoundSFX.play("sfx_penguin_hit_03",{volume:.5})):1==this._bounces&&(Math.random()>.5?(this._bounces=2,this.ySpeed=-3,this.y=this._groundY-1,SoundSFX.play("sfx_penguin_hit_03",{volume:.5})):this._bounces=2),!this._hasFallenInWater&&this.y>this._groundY+100&&(this._hasFallenInWater=!0,SoundSFX.playRandomFrom(["sfx_penguin_splash_00","sfx_penguin_splash_01","sfx_penguin_splash_03","sfx_penguin_splash_04","sfx_penguin_splash_05"])))):2!=Math.ceil(this._sprite.currentFrame)&&6!=Math.ceil(this._sprite.currentFrame)||this._justPlayedStepSound?this._justPlayedStepSound&&(this._justPlayedStepSound=!1):(1==this._enemyType?SoundSFX.play("sfx_penguin_gunter_walk"):2==this._enemyType&&SoundSFX.play("sfx_penguin_walk"),this._justPlayedStepSound=!0),Common.frameCount%this._quackInterval==0&&(SoundSFX.playRandomFrom(["sfx_gunter_quackloop_02","sfx_penguin_quackloop_00","sfx_penguin_quackloop_01","sfx_penguin_quackloop_02"]),this._quackInterval=40+60*Math.random())},GroundEnemy.prototype.reset=function(){ScrollerObject.prototype.reset.call(this),this.hasBeenHit=!1,this._hasFallenInWater=!1,this._sprite.x=0,this._sprite.y=0,this._sprite.rotation=0,this.xSpeed=0,this.ySpeed=0,this._bounces=0},GroundEnemy.prototype.hit=function(scrollSpeed){this.hasBeenHit=!0,this.xSpeed=5+scrollSpeed,this.ySpeed=-8,this._bounces=0,this._groundY=this.y,this._enemyType>2?TweenMax.to(this._sprite,.5,{y:-(this.areaRect.x+this.areaRect.width),rotation:180*PIXI.DEG_TO_RAD,ease:Sine.easeOut}):TweenMax.to(this._sprite,.5,{x:-(this.areaRect.width/2),y:-(this.areaRect.x+this.areaRect.width),rotation:90*PIXI.DEG_TO_RAD,ease:Sine.easeOut}),SoundSFX.playRandomFrom(["sfx_penguin_hit_00","sfx_penguin_hit_01","sfx_penguin_hit_04","sfx_penguin_hit_05","sfx_penguin_hit_06"])},GroundEnemy.prototype.pause=function(){this._sprite.stop()},GroundEnemy.prototype.resume=function(){this._sprite.play()},Object.defineProperty(GroundEnemy.prototype,"enemyType",{get:function(){return this._enemyType}})},{"../Common":2,"../general/SoundSFX":15,"../scroller/ScrollerObject":29}],8:[function(require,module,exports){function IceBeam(){this._blastBallBehind=null,this._beamWidth=0,this._sprites=null,ScrollerObject.call(this,"iceBeam",!0),this.create()}var Common=require("../Common"),ScrollerObject=require("../scroller/ScrollerObject");module.exports=IceBeam,IceBeam.prototype=Object.create(ScrollerObject.prototype),IceBeam.prototype.constructor=IceBeam,IceBeam.prototype.create=function(){this._sprites=[];var textureArr=[this._assetManager.getTexture("beam_btm_000"),this._assetManager.getTexture("beam_btm_001"),this._assetManager.getTexture("beam_btm_002"),this._assetManager.getTexture("beam_btm_003")],sequence=new p3.MovieClipSequence;sequence.addTextures(textureArr),this._blastBallBehind=new p3.MovieClip(sequence),this._blastBallBehind.anchor=new PIXI.Point(.5,.5),this.addChild(this._blastBallBehind),this._blastBallBehind.animationSpeed=60,this._blastBallBehind.looping=!0,this._blastBallBehind.play(),this._blastBallBehind.x=-100},IceBeam.prototype.init=function(){},IceBeam.prototype.set=function(beamWidth,beamLength){this._beamWidth=beamWidth,this._sprites.push(this._generateSprite());var sprWidth=this._sprites[0].width;this.addChild(this._sprites[0]);for(var i=1;i<Math.ceil(this._beamWidth/sprWidth);i++){var add=function(i,sprWidth,that){Common.animator.add(TweenMax.to(this,.05*i,{onCompleteScope:this,onComplete:function(){var spr=that._generateSprite();spr.x=-(sprWidth*i-5*i),that._sprites.push(spr),that.addChild(that._sprites[i]),that.collisionRect.x=-(sprWidth*(i+1)-5*i)}}))};add(i,sprWidth,this)}this.areaRect=new PIXI.Rectangle(-beamWidth,-(this._sprites[0].height/4),beamWidth,this._sprites[0].height/2),this.collisionRect=this.areaRect.clone(),this.collisionRect.x=0,Common.animator.add(TweenMax.to(this,beamLength,{onCompleteScope:this,onComplete:function(){this.removeMe=!0}}))},IceBeam.prototype.update=function(){ScrollerObject.prototype.update.call(this)},IceBeam.prototype.reset=function(){for(ScrollerObject.prototype.reset.call(this);this._sprites.length>0;)this.removeChild(this._sprites[0]),this._sprites.splice(0,1)},IceBeam.prototype.pause=function(){this._blastBallBehind.stop();for(var i in this._sprites)this._sprites[i].stop()},IceBeam.prototype.resume=function(){this._blastBallBehind.play();for(var i in this._sprites)this._sprites[i].play()},IceBeam.prototype._generateSprite=function(){var textureArr=[this._assetManager.getTexture("beam_tile_001"),this._assetManager.getTexture("beam_tile_002"),this._assetManager.getTexture("beam_tile_003"),this._assetManager.getTexture("beam_tile_004")],sequence=new p3.MovieClipSequence;sequence.addTextures(textureArr);var mc=new p3.MovieClip(sequence);return mc.anchor=new PIXI.Point(1,.5),this.addChild(mc),mc.animationSpeed=60,mc.looping=!0,mc.play(),mc},Object.defineProperty(IceBeam.prototype,"enemyType",{get:function(){return this._enemyType}})},{"../Common":2,"../scroller/ScrollerObject":29}],9:[function(require,module,exports){function IceKing(){this._sprite=null,this._blastBall=null,this._minY=-200,this._maxY=200,this.beamOffset=70,this.active=!1,ScrollerObject.call(this,"IceKing",!1),this.signals.fireIceBeam=new signals.Signal,this.signals.exit=new signals.Signal}var Common=require("../Common"),ScrollerObject=require("../scroller/ScrollerObject"),SoundSFX=require("../general/SoundSFX");module.exports=IceKing,IceKing.prototype=Object.create(ScrollerObject.prototype),IceKing.prototype.constructor=IceKing,IceKing.prototype.create=function(){},IceKing.prototype.init=function(){this.visible=!1,this._sprite=new PIXI.Sprite(this._assetManager.getTexture("enemy_ice_king_001")),this._sprite.anchor=new PIXI.Point(.5,.5),this.addChild(this._sprite);var textureArr=[this._assetManager.getTexture("beam_source_top_000"),this._assetManager.getTexture("beam_source_top_001"),this._assetManager.getTexture("beam_source_top_002"),this._assetManager.getTexture("beam_source_top_003")],sequence=new p3.MovieClipSequence;sequence.addTextures(textureArr),this._blastBall=new p3.MovieClip(sequence),this._blastBall.anchor=new PIXI.Point(.5,.5),this.addChild(this._blastBall),this._blastBall.animationSpeed=60,this._blastBall.looping=!0,this._blastBall.play(),this._blastBall.x=-100,this._blastBall.y=this.beamOffset,this._blastBall.visible=!1,this.areaRect=new PIXI.Rectangle(-this._sprite.width/2,-this._sprite.height/2,this._sprite.width,this._sprite.height),this.collisionRect=new PIXI.Rectangle(-100,-50,135,140)},IceKing.prototype.update=function(){ScrollerObject.prototype.update.call(this)},IceKing.prototype.appear=function(x,y,iceBeams,difficulty){this.active=!0,this.persistentX=x+(this.areaRect.x+this.areaRect.width),this.visible=!0,this.y=y,this._sprite.texture=this._assetManager.getTexture("enemy_ice_king_000"),Common.animator.add(TweenMax.to(this,.5,{persistentX:x-(this.areaRect.x+this.areaRect.width),ease:Sine.easeOut,onCompleteParams:[iceBeams,x],onComplete:function(iceBeams,x){Common.animator.add(TweenMax.to(this,.4,{onCompleteScope:this,onComplete:function(){var beamLength=1;this._sprite.texture=this._assetManager.getTexture("enemy_ice_king_001"),this.signals.fireIceBeam.dispatch(iceBeams[0].obj,beamLength,iceBeams[0].offset.y+this.beamOffset),this._blastBall.visible=!0;var tl=new TimelineMax;Common.animator.add(tl);for(var gap=.5,i=1;i<iceBeams.length;i++){var y=iceBeams[i].offset.y;tl.to(this,Math.abs(y-this.y)/(this._maxY-this._minY)+(1-difficulty-.3),{delay:beamLength+(i>1?gap:0)+gap,y:y,ease:Sine.easeInOut,onCompleteParams:[iceBeams[i].obj,beamLength,y],onCompleteScope:this,onComplete:function(beam,beamLength,y){this.signals.fireIceBeam.dispatch(beam,beamLength,y+this.beamOffset),this._blastBall.visible=!0,this._sprite.texture=this._assetManager.getTexture("enemy_ice_king_001")},onStartScope:this,onStart:function(){this._blastBall.visible=!1,this._sprite.texture=this._assetManager.getTexture("enemy_ice_king_000")}}),beamLength+=.5}tl.to(this,.5,{persistentX:x+(this.areaRect.x+this.areaRect.width),delay:beamLength,ease:Sine.easeIn,onCompleteScope:this,onComplete:function(){this.visible=!1,this.active=!1},onStartScope:this,onStart:function(){this._blastBall.visible=!1,SoundSFX.stop("sfx_iceking_loop"),SoundSFX.play("sfx_iceking_disappear")}})}})),SoundSFX.play("sfx_iceking_loop",{loop:!0})},onCompleteScope:this}))},IceKing.prototype.pause=function(){this._blastBall.stop()},IceKing.prototype.resume=function(){this._blastBall.play()}},{"../Common":2,"../general/SoundSFX":15,"../scroller/ScrollerObject":29}],10:[function(require,module,exports){function ProtectedCharacters(){this._character1=null,this._character2=null,ScrollerObject.call(this,"protectedCharacters",!1)}var Common=require("../Common"),ScrollerObject=require("../scroller/ScrollerObject");module.exports=ProtectedCharacters,ProtectedCharacters.prototype=Object.create(ScrollerObject.prototype),ProtectedCharacters.prototype.constructor=ProtectedCharacters,ProtectedCharacters.prototype.init=function(){this._character1=new p3.MovieClip(this._generateAnimationSequence("finn",7)),this._character1.animationSpeed=15,this._character1.looping=!0,this._character1.gotoAndPlay(Math.floor(7*Math.random())),this._character1.anchor=new PIXI.Point(0,1),this._character1.scale=new PIXI.Point(.8,.8),this._character1Shadow=new PIXI.Sprite(this._assetManager.getTexture("character_shadow")),this._character1Shadow.anchor=new PIXI.Point(.5,.5),this._character1Shadow.position=this._character1.position.clone(),this._character1Shadow.x=this._character1Shadow.width/2+10,this._character1Shadow.y-=5,this._character1Shadow.scale=new PIXI.Point(.8,.8),this._character1Shadow.alpha=.6,this.addChild(this._character1Shadow),this._character2=new p3.MovieClip(this._generateAnimationSequence("jake",7)),this._character2.anchor=new PIXI.Point(1,1),this._character2.y=20,this._character2.animationSpeed=15,this._character2.looping=!0,this._character2.gotoAndPlay(Math.floor(7*Math.random())),this._character2.anchor=new PIXI.Point(0,1),this._character2.scale=new PIXI.Point(.8,.8),this._character2Shadow=new PIXI.Sprite(this._assetManager.getTexture("character_shadow")),this._character2Shadow.anchor=new PIXI.Point(.5,.5),this._character2Shadow.position=this._character2.position.clone(),this._character2Shadow.x+=44,this._character2Shadow.y-=7,this._character2Shadow.scale=new PIXI.Point(.8,.8),this._character2Shadow.alpha=.6,this.addChild(this._character2Shadow),this.addChild(this._character1),this.addChild(this._character2),this.areaRect=new PIXI.Rectangle(-85,-200,230,250),this.collisionRect=new PIXI.Rectangle(-70,-170,110,200),
this._tweenCharacter(this._character1),this._tweenCharacter(this._character2)},ProtectedCharacters.prototype.update=function(){ScrollerObject.prototype.update.call(this)},ProtectedCharacters.prototype.pause=function(){this._character1.stop(),this._character2.stop()},ProtectedCharacters.prototype.resume=function(){this._character1.play(),this._character2.play()},ProtectedCharacters.prototype._tweenCharacter=function(character){var minX=-100,maxX=0,rand=minX+Math.random()*(maxX-minX),diff=Math.abs(rand-character.x),p=diff/(maxX-minX);Common.animator.add(TweenMax.to(character,6*p,{x:rand,ease:Sine.easeInOut,onCompleteScope:this,onCompleteParams:[character],onComplete:this._tweenCharacter,onUpdateScope:this,onUpdate:function(){character==this._character1?this._character1Shadow.x=character.x+this._character1Shadow.width/2+10:this._character2Shadow.x=character.x+44}}))},ProtectedCharacters.prototype._generateAnimationSequence=function(character,frameLimit){for(var textureArr=[],i=0;frameLimit>=i;i++)textureArr.push(character+"_00"+i);for(var i=0;i<textureArr.length;i++)textureArr[i]=this._assetManager.getTexture(textureArr[i]);var sequence=new p3.MovieClipSequence;return sequence.addTextures(textureArr),sequence}},{"../Common":2,"../scroller/ScrollerObject":29}],11:[function(require,module,exports){function ScoreCounter(){this._assetManager=p3.AssetManager.instance,this._holder=null,this._text=null,PIXI.Container.call(this)}require("../Common");module.exports=ScoreCounter,ScoreCounter.prototype=Object.create(PIXI.Container.prototype),ScoreCounter.prototype.constructor=ScoreCounter,ScoreCounter.prototype.init=function(){this._holder=new PIXI.Sprite(this._assetManager.getTexture("ui_score")),this._holder.anchor=new PIXI.Point(.5,.5),this.addChild(this._holder),this._text=new p3.BitmapText("1000",this._assetManager.getFontAtlas("pendlefont_42_white_shadow"),p3.BitmapText.ALIGN_LEFT),this._text.x=38,this._text.y=-33,this.addChild(this._text),this.scale=new PIXI.Point(.7,.7)},ScoreCounter.prototype.updateScore=function(newScore){this._text.text=newScore.toString(),newScore>=10&&(this._text.x=23),newScore>=100&&(this._text.x=7),newScore>=1e3&&(this._text.scale.x=this._text.scale.y=.8,this._text.x=0,this._text.y=-28),newScore>=1e4&&(this._text.scale.x=this._text.scale.y=.7,this._text.x=-10,this._text.y=-25),newScore>=1e5&&(this._text.scale.x=this._text.scale.y=.6,this._text.x=-11,this._text.y=-23),newScore>=1e6&&(this._text.scale.x=this._text.scale.y=.5,this._text.y=-23)}},{"../Common":2}],12:[function(require,module,exports){function ShadowHolder(){this._pool=null,this._objects=null,ScrollerObject.call(this,"ShadowHolder",!1)}var ScrollerObject=(require("../Common"),require("../scroller/ScrollerObject"));module.exports=ShadowHolder,ShadowHolder.prototype=Object.create(ScrollerObject.prototype),ShadowHolder.prototype.constructor=ShadowHolder,ShadowHolder.prototype.init=function(){this._pool=new p3.ObjectPool(PIXI.Sprite,2,[this._assetManager.getTexture("character_shadow")]),this._objects=[],this.areaRect=new PIXI.Rectangle(0,0,0,0)},ShadowHolder.prototype.update=function(){ScrollerObject.prototype.update.call(this);for(var i=0;i<this._objects.length;i++){this._objects[i].shadow.x=this._objects[i].obj.x,this._objects[i].shadow.y=Math.max(0,this._objects[i].obj.y-this.y);var scale=Math.min(this._objects[i].maxScale,Math.max(this._objects[i].minScale,1-(this.y-this._objects[i].obj.y)/400));this._objects[i].shadow.scale=new PIXI.Point(scale,scale)}},ShadowHolder.prototype.addObject=function(obj,minScale,maxScale){minScale=minScale||0,maxScale=maxScale||1;var shadow=this._pool.create();null==shadow&&(this._pool.expand(2),shadow=this._pool.create()),shadow.anchor=new PIXI.Point(.5,.5),shadow.alpha=.6,this.addChild(shadow),this._objects.push({obj:obj,shadow:shadow,minScale:minScale,maxScale:maxScale})},ShadowHolder.prototype.removeObject=function(obj){for(var i=0;i<this._objects.length;i++)this._objects[i].obj==obj&&(this.removeChild(this._objects[i].shadow),this._pool.free(this._objects[i].shadow),this._objects.splice(i,1))}},{"../Common":2,"../scroller/ScrollerObject":29}],13:[function(require,module,exports){function Wave(){this._graphic=null,this._otherWaves=null,ScrollerObject.call(this,"wave",!0),this.create()}var Common=require("../Common"),ScrollerObject=require("../scroller/ScrollerObject");module.exports=Wave,Wave.prototype=Object.create(ScrollerObject.prototype),Wave.prototype.constructor=Wave,Wave.prototype.create=function(){var radius=15;this.areaRect=new PIXI.Rectangle(-(radius/2),-(radius/2),radius,radius),this.collisionRect=new PIXI.Rectangle(-(radius/2),-(radius/2),radius,radius)},Wave.prototype.init=function(){},Wave.prototype.addGraphic=function(angle,otherWaves){null==this._graphic&&(this._graphic=new PIXI.Sprite(this._assetManager.getTexture("soundwave_000")),this._graphic.anchor=new PIXI.Point(.5,.5),Common.animator.add(TweenMax.to(this._graphic.anchor,.1,{x:.6,ease:Sine.easeInOut,repeat:-1,yoyo:!0}))),this.addChild(this._graphic),this._graphic.scale.x=this._graphic.scale.y=.1,this._graphic.rotation=angle*PIXI.DEG_TO_RAD-90*PIXI.DEG_TO_RAD,this._otherWaves=otherWaves},Wave.prototype.update=function(){ScrollerObject.prototype.update.call(this),null!=this._graphic&&(this._graphic.scale.x=this._graphic.scale.y=this._graphic.scale.x+this.ySpeed/1e3)},Wave.prototype.reset=function(){ScrollerObject.prototype.reset.call(this),null!=this._graphic&&this._graphic.parent==this&&(this.removeChild(this._graphic),this.x=this.y=0),this._otherWaves=null},Wave.prototype.onExitPersistentRectangle=function(side){this.removeMe=!0;for(var i=0;i<this._otherWaves.length;i++)this._otherWaves[i].removeMe=!0}},{"../Common":2,"../scroller/ScrollerObject":29}],14:[function(require,module,exports){function NextButton(buttonString,delay){this._assetManager=p3.AssetManager.instance,this.signals={},this.signals.clicked=new signals.Signal,this.signals.clickFinish=new signals.Signal,this._banner=null,this._button=null,this._buttonString=buttonString||"next",this._delay=delay||0,PIXI.Container.call(this)}var Common=require("../Common"),SoundSFX=require("../general/SoundSFX");module.exports=NextButton,NextButton.prototype=Object.create(PIXI.Container.prototype),NextButton.prototype.constructor=NextButton,NextButton.prototype.init=function(){Common.animator.setTimeout(function(){this._banner=new PIXI.Sprite(this._assetManager.getTexture("ui_btn_banner")),this._banner.anchor=new PIXI.Point(.5,.5),this._banner.scale.x=0,this.addChild(this._banner),this._button=new p3.Button(this._assetManager.getTexture("btn_"+this._buttonString),this._assetManager.getTexture("btn_"+this._buttonString+"_over")),this._button.scale=new PIXI.Point(0,0),this._button.signals.down.addOnce(this.onButtonClick,this),this._button.signals.over.add(this.onButtonOver,this),this._button.animate=!1,this.addChild(this._button);var tl=new TimelineMax;tl.to(this._banner.scale,1,{x:1,ease:Back.easeOut}),tl.to(this._button.scale,1.3,{x:1,ease:Elastic.easeOut},0),tl.to(this._button.scale,1.3,{y:1,ease:Elastic.easeOut},.1),Common.animator.add(tl)},this._delay,this)},NextButton.prototype.onButtonClick=function(){TweenMax.killTweensOf(this._button.scale),Common.animator.add(TweenMax.to(this._button.scale,.2,{x:.6,y:.6,ease:Sine.easeInOut,onComplete:function(){Common.animator.add(TweenMax.to(this._button.scale,1,{x:1,y:1,ease:Elastic.easeOut,onComplete:function(){this.signals.clickFinish.dispatch()},onCompleteScope:this}))},onCompleteScope:this})),SoundSFX.play("sfx_button_play"),this.signals.clicked.dispatch()},NextButton.prototype.onButtonOver=function(){SoundSFX.play("sfx_btn_rollover_00")}},{"../Common":2,"../general/SoundSFX":15}],15:[function(require,module,exports){function SoundSFX(){}require("../Common");module.exports=SoundSFX,SoundSFX.button=function(button,enableClickSound,enableOverSound){enableClickSound=void 0==enableClickSound?!0:enableClickSound,enableOverSound=void 0==enableOverSound?!0:enableOverSound,enableClickSound&&button.signals.click.add(function(button){p3.AudioManager.instance.playSound("sfx_btn_press_reverb")},this),enableOverSound&&button.signals.over.add(function(button){p3.AudioManager.instance.playSound("sfx_btn_rollover_reverb")},this)},SoundSFX.play=function(sound,params,delay){return null==delay?p3.AudioManager.instance.playSound(sound,params):void setTimeout(function(){p3.AudioManager.instance.playSound(sound,params)},delay)},SoundSFX.playMusic=function(sound,params,delay){null==delay?p3.AudioManager.instance.playMusic(sound,params):setTimeout(function(){p3.AudioManager.instance.playMusic(sound,params)},delay)},SoundSFX.stop=function(sound){for(var currentSounds=p3.AudioManager.instance.soundsSFX,i=0;i<currentSounds.length;i++)currentSounds[i].name==sound&&p3.AudioManager.instance.stopSound(sound)},SoundSFX.playRandomFrom=function(sounds){p3.AudioManager.instance.playSound(sounds[Math.floor(Math.random()*sounds.length)])}},{"../Common":2}],16:[function(require,module,exports){function MuteButton(onNormalTexture,offNormalTexture,onOverTexture,offOverTexture,onDownTexture,offDownTexture){var audio=p3.AudioManager.instance;this._onNormalTexture=onNormalTexture,this._offNormalTexture=offNormalTexture,this._onOverTexture=onOverTexture,this._offOverTexture=offOverTexture,this._onDownTexture=onDownTexture,this._offDownTexture=offDownTexture,this._normalTexture=audio.isMute?offNormalTexture:onNormalTexture,this._overTexture=audio.isMute?offOverTexture:onOverTexture,this._downTexture=audio.isMute?offOverTexture:onDownTexture,p3.Button.call(this,this._normalTexture,this._overTexture,this._downTexture)}module.exports=MuteButton,MuteButton.prototype=Object.create(p3.Button.prototype),MuteButton.prototype.constructor=MuteButton,MuteButton.prototype.onMouseClick=function(event){var audio=p3.AudioManager.instance;audio.mute(!audio.isMute),this._normalTexture=audio.isMute?this._offNormalTexture:this._onNormalTexture,this._overTexture=audio.isMute?this._offOverTexture:this._onOverTexture,this._downTexture=audio.isMute?this._offDownTexture:this._onDownTexture,this._disabledTexture=audio.isMute?this._offDisabledTexture:this._onDisabledTexture,p3.Button.prototype.onMouseClick.call(this,event)}},{}],17:[function(require,module,exports){function Scene(){this.signals={},this.signals.next=new signals.Signal,this.signals.previous=new signals.Signal,this.signals.home=new signals.Signal,this.signals.pause=new signals.Signal,PIXI.Container.call(this)}module.exports=Scene,Scene.prototype=Object.create(PIXI.Container.prototype),Scene.prototype.constructor=Scene,Scene.prototype.init=function(){},Scene.prototype.dispose=function(){this.signals.next.dispose(),this.signals.previous.dispose(),this.signals.home.dispose(),this.signals.pause.dispose(),this.removeChildren()},Scene.prototype.resize=function(){},Scene.prototype.update=function(){},Scene.prototype.appear=function(){this.animateIn()},Scene.prototype.show=function(){this.animateIn()},Scene.prototype.hide=function(){},Scene.prototype.animateIn=function(callback,scope){scope=scope||window,callback&&callback.call(scope)},Scene.prototype.animateOut=function(callback,scope){scope=scope||window,callback&&callback.call(scope)}},{}],18:[function(require,module,exports){function SceneManager(){this._stage=null,this._renderer=null,this._stack=[],this._transition=null}var Transition=(require("./Scene"),require("./Transition"));module.exports=SceneManager,SceneManager.prototype.init=function(stage,renderer){this._stage=stage,this._renderer=renderer},SceneManager.prototype.update=function(){this._stack.length&&this.top.update()},SceneManager.prototype.add=function(scene,transition){function swap(scene){if(this.top)if(this.top.hide(),this._transition.push){if(this._transition.replace)for(var temp,i=0;i<this._stack.length;++i)temp=this._stack[i],temp.parent&&temp.parent.removeChild(temp)}else for(;this.top;)this.top.parent.removeChild(this.top),this.top.dispose(),this._stack.pop();scene.init(),scene.resize(),scene.parent||this.stage.addChildAt(scene,this._transition.parent.getChildIndex(this._transition)),this._stack.push(scene),this._transition.wait||p3.Timestep.queueCall(scene.appear,null,scene),this._transition.out(),console.log(this._stack)}this.transitionInProgress||(this._transition=transition||new Transition,!this._transition.requiresWebGL||this._renderer instanceof PIXI.WebGLRenderer||(this._transition=transition.fallback(),this._transition.push=transition.push,this._transition.replace=transition.replace,this._transition.wait=transition.wait),this._transition.init(),this._stage.addChild(this._transition),this._transition.signals["in"].addOnce(function(transition){p3.Timestep.queueCall(swap,[scene],this)},this),this._transition.signals.out.addOnce(function(transition){this._transition=null,transition.parent.removeChild(transition),transition.dispose(),transition.wait&&p3.Timestep.queueCall(scene.appear,null,scene)},this),this._transition["in"]())},SceneManager.prototype.remove=function(transition,count){function swap(count){for(var i=0;count>i;++i)this.top.hide(),this.top.parent.removeChild(this.top),this.top.dispose(),this._stack.pop();var scene=this.top;scene.resize(),scene.parent||this.stage.addChildAt(scene,this._transition.parent.getChildIndex(this._transition)),this._transition.wait||scene.show(),this._transition.out(),console.log(this._stack)}this.transitionInProgress||(this._transition=transition||new Transition,count=Math.max(1,count)||1,!this._transition.requiresWebGL||this._renderer instanceof PIXI.WebGLRenderer||(this._transition=transition.fallback(),this._transition.push=transition.push,this._transition.replace=transition.replace,this._transition.wait=transition.wait),this._transition.init(),this._stage.addChild(this._transition),this._transition.signals["in"].addOnce(function(transition){p3.Timestep.queueCall(swap,[count],this)},this),this._transition.signals.out.addOnce(function(transition){this._transition=null,transition.parent.removeChild(transition),transition.dispose(),transition.wait&&this.top.show()},this),this._transition["in"]())},SceneManager.prototype.clear=function(){},SceneManager.prototype.resize=function(){for(var scene,i=0;i<this._stack.length;++i)scene=this._stack[i],scene.resize();this._transition&&this._transition.resize()},Object.defineProperty(SceneManager.prototype,"stage",{get:function(){return this._stage}}),Object.defineProperty(SceneManager.prototype,"top",{get:function(){return this._stack.length?this._stack[this._stack.length-1]:null}}),Object.defineProperty(SceneManager.prototype,"transitionInProgress",{get:function(){return null!=this._transition?!0:!1}})},{"./Scene":17,"./Transition":19}],19:[function(require,module,exports){function Transition(){this.signals={},this.signals["in"]=new signals.Signal,this.signals.out=new signals.Signal,this.push=!1,this.replace=!0,this.wait=!0,this.requiresWebGL=!1,PIXI.Container.call(this)}module.exports=Transition,Transition.prototype=Object.create(PIXI.Container.prototype),Transition.prototype.constructor=Transition,Transition.prototype.init=function(){},Transition.prototype.dispose=function(){this.signals["in"].dispose(),this.signals.out.dispose(),this.removeChildren()},Transition.prototype["in"]=function(){this.signals["in"].dispatch(this)},Transition.prototype.out=function(){this.signals.out.dispatch(this)},Transition.prototype.resize=function(){},Transition.prototype.fallback=function(){}},{}],20:[function(require,module,exports){function GameOverOverlay(score){this._overlay=null,this._panel=null,this._nextButton=null,this._restartButton=null,this._muteButton=null,this._title=null,this._score=score,this._iceKing=null,this._finJake=null,this._marceline=null,SimpleScreen.call(this)}var Common=require("../Common"),SimpleScreen=require("../screens/SimpleScreen"),SoundSFX=(require("../general/NextButton"),require("../general/SoundSFX"));module.exports=GameOverOverlay,GameOverOverlay.prototype=Object.create(SimpleScreen.prototype),GameOverOverlay.prototype.constructor=GameOverOverlay,GameOverOverlay.prototype.init=function(){console.log("GAME OVER INITIALIZED"),SimpleScreen.prototype.init.call(this),this._overlay=new PIXI.Sprite(Common.generatedTextures.blackSquare),this._overlay.alpha=.7,this._overlay.width=Common.STAGE_WIDTH,this._overlay.height=Common.STAGE_HEIGHT,this._overlay.hitArea=new PIXI.Rectangle(0,0,Common.STAGE_WIDTH,Common.STAGE_HEIGHT),this._overlay.interactive=!0,this.addChild(this._overlay),this._panel=new PIXI.Sprite(this._assetManager.getTexture("ui_panel")),this._panel.anchor=new PIXI.Point(.5,.5),this._panel.x=Common.STAGE_WIDTH/2,this._panel.y=Common.STAGE_HEIGHT/2,this.addChild(this._panel),this._restartButton=new p3.Button(this._assetManager.getTexture("btn_replay"),this._assetManager.getTexture("btn_replay_over")),this._restartButton.init(),this._restartButton.y=Common.STAGE_HEIGHT-130,this._restartButton.x=Common.STAGE_WIDTH/2,this._restartButton.signals.down.add(this.restartClicked,this),this._restartButton.signals.over.add(this.buttonOver,this),this.addChild(this._restartButton),this._title=new PIXI.Sprite(this._assetManager.getTexture("gameover_title")),this._title.anchor=new PIXI.Point(.5,.5),this._title.x=0,this._title.y=-230,this._panel.addChild(this._title);var copy=this._assetManager.getJSON("config").copy.YOU_SCORED[Common.COUNTRY_CODE];if(copy.live)var youScoredText=new PIXI.Text(copy.text,{font:"32px FredFredburgerAra-Regular",fill:0,align:"center",stroke:0,strokeThickness:1});else var youScoredText=new p3.BitmapText(copy.text,this._assetManager.getFontAtlas("pendlefont_36_black"),p3.BitmapText.ALIGN_CENTER);youScoredText.x=copy.offset.x,youScoredText.y=copy.offset.y-150,youScoredText.scale=new PIXI.Point(copy.scale,copy.scale),this._panel.addChild(youScoredText),copy.live&&(youScoredText.x-=.5*youScoredText.width);var banner=new PIXI.Sprite(this._assetManager.getTexture("ui_panel_banner"));banner.anchor=new PIXI.Point(.5,.5),banner.x=0,banner.y=-20,this._panel.addChild(banner);var scoreTextHolder=new PIXI.Container;scoreTextHolder.y=-25;var scoreText=new p3.BitmapText(this._score.toString(),this._assetManager.getFontAtlas("pendlefont_42_white_shadow"),p3.BitmapText.ALIGN_CENTER);scoreText.y=-15,scoreTextHolder.addChild(scoreText),banner.addChild(scoreTextHolder);var copy=this._assetManager.getJSON("config").copy.BEFORE_THE_ICE_KING[Common.COUNTRY_CODE];if(copy.live)var iceKingText=new PIXI.Text(copy.text,{font:"32px FredFredburgerAra-Regular",fill:0,align:"center",stroke:0,strokeThickness:1});else var iceKingText=new p3.BitmapText(copy.text,this._assetManager.getFontAtlas("pendlefont_36_black"),p3.BitmapText.ALIGN_CENTER);iceKingText.x=copy.offset.x,iceKingText.y=60+copy.offset.y,iceKingText.scale=new PIXI.Point(copy.scale,copy.scale),this._panel.addChild(iceKingText),copy.live&&(iceKingText.x-=.5*iceKingText.width),this._iceKing=new PIXI.Sprite(this._assetManager.getTexture("ui_end_iceking")),this._iceKing.x=Common.STAGE_WIDTH,this._iceKing.y=Common.STAGE_HEIGHT/2-100,this.addChild(this._iceKing),this._marceline=new PIXI.Sprite(this._assetManager.getTexture("ui_end_marceline")),this._marceline.x=-this._marceline.width,this._marceline.y=100,this.addChild(this._marceline),this._finJake=new PIXI.Sprite(this._assetManager.getTexture("ui_end_fin_jake")),this._finJake.x=-this._finJake.width,this._finJake.y=Common.STAGE_HEIGHT/2,this.addChild(this._finJake),this._panel.scale=new PIXI.Point(0,0),banner.scale.x=0,scoreTextHolder.scale=new PIXI.Point(0,0),this._restartButton.scale=new PIXI.Point(0,0);var tl=new TimelineMax;tl.to(this._panel.scale,.5,{x:1,y:1,ease:Back.easeOut}),tl.to(banner.scale,.5,{x:1,ease:Back.easeOut}),tl.to(scoreTextHolder.scale,1.2,{x:1.2,y:1.2,ease:Elastic.easeOut},.7),tl.to(this._iceKing,.5,{x:Common.STAGE_WIDTH/2+230,ease:Sine.easeOut},.5),tl.to(this._finJake,.5,{x:Common.STAGE_WIDTH/2-230-this._finJake.width,ease:Sine.easeOut},.3),tl.to(this._marceline,.5,{x:Common.STAGE_WIDTH/2-150-this._marceline.width,ease:Sine.easeOut},.6),tl.to(this._restartButton.scale,1,{x:1,y:1,ease:Elastic.easeOut},.7),Common.animator.add(tl),SoundSFX.play("sfx_gameover"),this._muteButton=new p3.MuteButton(this._assetManager.getTexture("btn_sound"),this._assetManager.getTexture("btn_mute"),this._assetManager.getTexture("btn_sound_over"),this._assetManager.getTexture("btn_mute_over")),this._muteButton.id="mute",this._muteButton.y=this._guiButtonTopMargin,this._muteButton.signals.over.add(this.buttonOver,this),this._muteButton.init(),this.addChild(this._muteButton),this._nextButton=new p3.Button(this._assetManager.getTexture("btn_exit_small"),this._assetManager.getTexture("btn_exit_over_small")),this._nextButton.init(),this._nextButton.y=this._guiButtonTopMargin,this._nextButton.signals.over.add(this.buttonOver,this),this._nextButton.signals.down.add(this.nextClicked,this),this.addChild(this._nextButton)},GameOverOverlay.prototype.update=function(){},GameOverOverlay.prototype.resize=function(){SimpleScreen.prototype.resize.call(this),this._nextButton.x=this._getFirstButtonPositionLeft(),this._muteButton.x=this._getFirstButtonPositionRight()},GameOverOverlay.prototype.dispose=function(){},GameOverOverlay.prototype.showHelp=function(){},GameOverOverlay.prototype.animateIn=function(callback,scope){SimpleScreen.prototype.animateIn.call(this)},GameOverOverlay.prototype.animateOut=function(callback,scope){var tl=new TimelineMax({onCompleteScope:scope,onComplete:callback});tl.to(this._panel.scale,.5,{x:0,y:0,ease:Back.easeIn}),tl.to(this._iceKing,.5,{x:Common.STAGE_WIDTH,ease:Sine.easeOut},0),tl.to(this._finJake,.5,{x:-this._finJake.width,ease:Sine.easeOut},0),tl.to(this._marceline,.5,{x:-this._marceline.width,ease:Sine.easeOut},0),tl.to(this._restartButton.scale,.5,{x:0,y:0,ease:Back.easeIn},0),tl.to(this._nextButton.scale,.5,{x:0,y:0,ease:Back.easeIn},0),Common.animator.add(tl)},GameOverOverlay.prototype.nextClicked=function(){this.signals.requestedNextScreen.dispatch(),SoundSFX.play("sfx_btn_press_fwd_00")},GameOverOverlay.prototype.restartClicked=function(){this.signals.requestedPreviousScreen.dispatch(),SoundSFX.play("sfx_button_play")},GameOverOverlay.prototype.buttonOver=function(){SoundSFX.play("sfx_btn_rollover_00")}},{"../Common":2,"../general/NextButton":14,"../general/SoundSFX":15,"../screens/SimpleScreen":25}],21:[function(require,module,exports){function PauseOverlay(){this._overlay=null,this._panel=null,this._resumeButton=null,this._helpButton=null,this._muteButton=null,this._exitButton=null,this._title=null,this._instructionsPage=null,this._areYouSurePage=null,this._contents=null,this._imageContainer=null,this._leftButton=null,this._rightButton=null,this._currentPage=0,this._introHelpMode=!1,this._text=null,this._liveText=!1,SimpleScreen.call(this)}var Common=require("../Common"),SimpleScreen=require("../screens/SimpleScreen"),NextButton=require("../general/NextButton"),SoundSFX=require("../general/SoundSFX");require("../lib/MuteButton");module.exports=PauseOverlay,PauseOverlay.prototype=Object.create(SimpleScreen.prototype),PauseOverlay.prototype.constructor=PauseOverlay,PauseOverlay.prototype.init=function(){console.log("PAUSE INITIALIZED"),SimpleScreen.prototype.init.call(this),this._overlay=new PIXI.Sprite(Common.generatedTextures.blackSquare),this._overlay.alpha=.7,this._overlay.width=Common.STAGE_WIDTH,this._overlay.height=Common.STAGE_HEIGHT,this._overlay.hitArea=new PIXI.Rectangle(0,0,Common.STAGE_WIDTH,Common.STAGE_HEIGHT),this._overlay.interactive=!0,this.addChild(this._overlay),this._panel=new PIXI.Sprite(this._assetManager.getTexture("ui_panel")),this._panel.anchor=new PIXI.Point(.5,.5),this._panel.x=Common.STAGE_WIDTH/2,this._panel.y=Common.STAGE_HEIGHT/2,this.addChild(this._panel),this._exitButton=new p3.Button(this._assetManager.getTexture("btn_exit"),this._assetManager.getTexture("btn_exit_over")),this._exitButton.scale=new PIXI.Point(.5,.5),this._exitButton.init(),this._exitButton.y=this._guiButtonTopMargin,this._exitButton.signals.down.add(this.exitClicked,this),this._exitButton.signals.over.add(this.buttonRollover,this),this.addChild(this._exitButton),this._muteButton=new p3.MuteButton(this._assetManager.getTexture("btn_sound"),this._assetManager.getTexture("btn_mute"),this._assetManager.getTexture("btn_sound_over"),this._assetManager.getTexture("btn_mute_over")),this._muteButton.id="mute",this._muteButton.y=this._guiButtonTopMargin,this._muteButton.init(),this._muteButton.signals.over.add(this.buttonRollover,this),this.addChild(this._muteButton),this._title=new PIXI.Sprite(this._assetManager.getTexture("instructions_title")),this._title.anchor=new PIXI.Point(.5,.5),this._title.x=Common.STAGE_WIDTH/2,this._title.y=160,this.addChild(this._title),this._instructionsPage=new PIXI.Container,this.addChild(this._instructionsPage),this._areYouSurePage=new PIXI.Container,this._areYouSurePage.visible=!1,this.addChild(this._areYouSurePage),this._contents=[];var mob="PC";p3.Device.isMobile&&(mob="MOB");var copy=this._assetManager.getJSON("config").copy.INSTRUCTIONS_1[Common.COUNTRY_CODE];this._contents.push({image:this._assetManager.getTexture("ui_help_001"),text:copy.text,scale:copy.scale,offset:copy.offset});var copy=this._assetManager.getJSON("config").copy["INSTRUCTIONS_2_"+mob][Common.COUNTRY_CODE];this._contents.push({image:this._assetManager.getTexture("ui_help_002"),text:copy.text,scale:copy.scale,offset:copy.offset});var copy=this._assetManager.getJSON("config").copy.INSTRUCTIONS_3[Common.COUNTRY_CODE];this._contents.push({image:this._assetManager.getTexture("ui_help_003"),text:copy.text,scale:copy.scale,offset:copy.offset}),this._imageContainer=new PIXI.Sprite,this._imageContainer.x=Common.STAGE_WIDTH/2,this._imageContainer.y=Common.STAGE_HEIGHT/2-30,this._instructionsPage.addChild(this._imageContainer),this._image=new PIXI.Sprite(this._contents[0].image),this._image.anchor.x=this._image.anchor.y=.5,this._imageContainer.addChild(this._image),copy.live?this._text=new PIXI.Text(this._contents[0].text,{font:"32px FredFredburgerAra-Regular",fill:0,align:"center",stroke:0,strokeThickness:1}):this._text=new p3.BitmapText(this._contents[0].text,this._assetManager.getFontAtlas("pendlefont_36_black"),p3.BitmapText.ALIGN_CENTER),this._text.x=Common.STAGE_WIDTH/2,this._text.y=Common.STAGE_HEIGHT/2+80,this._text.scale=new PIXI.Point(this._contents[0].scale,this._contents[0].scale),this._instructionsPage.addChild(this._text),this._liveText=copy.live,this._liveText&&(this._text.x-=.5*this._text.width,this._text.x+=copy.offset.x,this._text.y+=copy.offset.y),this._leftButton=new p3.Button(this._assetManager.getTexture("btn_back"),this._assetManager.getTexture("btn_back_over")),this._leftButton.init(),this._leftButton.y=Common.STAGE_HEIGHT/2,this._leftButton.x=Common.STAGE_WIDTH/2-330,this._leftButton.scale=new PIXI.Point(.5,.5),this._leftButton.signals.down.add(this.leftClicked,this),this._leftButton.signals.over.add(this.buttonRollover,this),this._leftButton.animate=!1,this._leftButton.visible=!1,this._instructionsPage.addChild(this._leftButton),this._rightButton=new p3.Button(this._assetManager.getTexture("btn_next"),this._assetManager.getTexture("btn_next_over")),this._rightButton.init(),this._rightButton.y=Common.STAGE_HEIGHT/2,this._rightButton.x=Common.STAGE_WIDTH/2+330,this._rightButton.scale=new PIXI.Point(.5,.5),this._rightButton.signals.down.add(this.rightClicked,this),this._rightButton.signals.over.add(this.buttonRollover,this),this._rightButton.animate=!1,this._instructionsPage.addChild(this._rightButton),this._playButton=new p3.Button(this._assetManager.getTexture("btn_play"),this._assetManager.getTexture("btn_play_over")),this._playButton.init(),this._playButton.y=Common.STAGE_HEIGHT-130,this._playButton.x=Common.STAGE_WIDTH/2+200,this._playButton.signals.down.add(this.rightClicked,this),this._playButton.signals.over.add(this.buttonRollover,this),this._playButton.visible=!1,this._instructionsPage.addChild(this._playButton),this._resumeButton=new NextButton("play",0),this._resumeButton.y=Common.STAGE_HEIGHT-130,this._resumeButton.x=Common.STAGE_WIDTH/2,this._resumeButton.init(),this._resumeButton.signals.clicked.add(this.resumeClicked,this),this._instructionsPage.addChild(this._resumeButton);var copy=this._assetManager.getJSON("config").copy.QUIT[Common.COUNTRY_CODE];if(copy.live)var text=new PIXI.Text(copy.text,{font:"32px FredFredburgerAra-Regular",fill:0,align:"center",stroke:0,strokeThickness:1});else var text=new p3.BitmapText(copy.text,this._assetManager.getFontAtlas("pendlefont_36_black"),p3.BitmapText.ALIGN_CENTER);text.x=Common.STAGE_WIDTH/2+copy.offset.x,text.y=Common.STAGE_HEIGHT/2-120+copy.offset.y,text.scale=new PIXI.Point(copy.scale,copy.scale),this._areYouSurePage.addChild(text),copy.live&&(text.x-=.5*text.width);var yesButton=new p3.Button(this._assetManager.getTexture("btn_tick"),this._assetManager.getTexture("btn_tick_over"));yesButton.init(),yesButton.x=Common.STAGE_WIDTH/2-100,yesButton.y=Common.STAGE_HEIGHT/2+80,yesButton.signals.down.add(this.quitYesClicked,this),yesButton.signals.over.add(this.buttonRollover,this),this._areYouSurePage.addChild(yesButton);var noButton=new p3.Button(this._assetManager.getTexture("btn_cross"),this._assetManager.getTexture("btn_cross_over"));noButton.init(),noButton.x=Common.STAGE_WIDTH/2+100,noButton.y=Common.STAGE_HEIGHT/2+80,noButton.signals.down.add(this.quitNoClicked,this),noButton.signals.over.add(this.buttonRollover,this),this._areYouSurePage.addChild(noButton)},PauseOverlay.prototype.update=function(){this._exitButton.x=this._getFirstButtonPositionLeft(),this._muteButton.x=this._getFirstButtonPositionRight()},PauseOverlay.prototype.resize=function(){SimpleScreen.prototype.resize.call(this)},PauseOverlay.prototype.dispose=function(){},PauseOverlay.prototype.setIntroHelpMode=function(){this._resumeButton.visible=!1,this._leftButton.y=Common.STAGE_HEIGHT-130,this._leftButton.x=Common.STAGE_WIDTH/2-200,this._leftButton.scale=new PIXI.Point(1,1),this._leftButton.animate=!0,this._rightButton.y=Common.STAGE_HEIGHT-130,this._rightButton.x=Common.STAGE_WIDTH/2+200,this._rightButton.scale=new PIXI.Point(1,1),this._rightButton.animate=!0,this._introHelpMode=!0},PauseOverlay.prototype.animateIn=function(callback,scope){SimpleScreen.prototype.animateIn.call(this)},PauseOverlay.prototype.animateOut=function(callback,scope){SimpleScreen.prototype.animateOut.call(this)},PauseOverlay.prototype.setPage=function(page){var newImage=new PIXI.Sprite(this._contents[page].image);newImage.x=this._contents[page].x||0,newImage.y=this._contents[page].y||0,newImage.anchor=new PIXI.Point(.5,.5),newImage.alpha=0,this._imageContainer.addChild(newImage),Common.animator.add(TweenMax.to(this._image,.5,{alpha:0,ease:Sine.easeOut})),Common.animator.add(TweenMax.to(newImage,.5,{alpha:1,ease:Sine.easeOut,onCompleteScope:this,onComplete:function(){this._imageContainer.removeChild(this._image),this._image=newImage}})),this._text.text=this._contents[page].text,this._text.scale=new PIXI.Point(this._contents[page].scale,this._contents[page].scale),this._liveText&&(this._text.x=Common.STAGE_WIDTH/2-.5*this._text.width,this._text.x+=this._contents[page].offset.x,this._text.y=Common.STAGE_HEIGHT/2+80+this._contents[page].offset.y),0==page?this._leftButton.visible=!1:this._leftButton.visible=!0,page==this._contents.length-1?(this._rightButton.visible=!1,this._introHelpMode&&(this._playButton.visible=!0)):(this._rightButton.visible=!0,this._introHelpMode&&(this._playButton.visible=!1)),this._currentPage=page},PauseOverlay.prototype.leftClicked=function(){this.setPage(this._currentPage-1),SoundSFX.play("sfx_btn_press_fwd_00")},PauseOverlay.prototype.rightClicked=function(){this._currentPage==this._contents.length-1?(this.signals.requestedNextScreen.dispatch(),SoundSFX.play("sfx_button_play")):(this.setPage(this._currentPage+1),SoundSFX.play("sfx_btn_press_fwd_00"))},PauseOverlay.prototype.resumeClicked=function(){this.signals.requestedNextScreen.dispatch()},PauseOverlay.prototype.exitClicked=function(){
this._instructionsPage.visible=!1,this._areYouSurePage.visible=!0,SoundSFX.play("sfx_btn_press_fwd_00")},PauseOverlay.prototype.helpClicked=function(){this.showHelp(),SoundSFX.play("sfx_btn_press_fwd_00")},PauseOverlay.prototype.quitYesClicked=function(){this.signals.requestedPreviousScreen.dispatch(),SoundSFX.play("sfx_btn_press_fwd_00")},PauseOverlay.prototype.quitNoClicked=function(){this._instructionsPage.visible=!0,this._areYouSurePage.visible=!1,SoundSFX.play("sfx_btn_press_fwd_00")},PauseOverlay.prototype.buttonRollover=function(){SoundSFX.play("sfx_btn_rollover_00")}},{"../Common":2,"../general/NextButton":14,"../general/SoundSFX":15,"../lib/MuteButton":16,"../screens/SimpleScreen":25}],22:[function(require,module,exports){function GameScreen(){this._scrollerEngine=null,this._activeBoundaryPadding=100,this._startingScrollSpeed=4,this._scrollInc=0,this._scrollIncMax=4,this._avatar=null,this._protectedCharacters=null,this._iceKing=null,this._shadowHolder=null,this._groundEnemyGenerator1=null,this._groundEnemyGenerator2=null,this._airEnemyGenerator=null,this._collectibleGenerator=null,this._groundEnemySpeed=2,this._wavePool=null,this._scoreCounter=null,this._score=0,this._touched=!1,this._paused=!1,this._ended=!1,this._attackMusic=null,this._normalMusic=null,this._pauseButton=null,this._muteButton=null,SimpleScreen.call(this),this.signals.pausePressed=new signals.Signal}var Common=require("../Common"),SimpleScreen=require("./SimpleScreen"),ScrollerEngine=require("../scroller/ScrollerEngine"),ScrollerObjectImage=(require("../scroller/ScrollerObject"),require("../scroller/ScrollerObjectImage")),ScrollerLoopingRange=require("../scroller/ScrollerLoopingRange"),ScrollerObjectGenerator=require("../scroller/ScrollerObjectGenerator"),Avatar=require("../game/Avatar"),ProtectedCharacters=require("../game/ProtectedCharacters"),Wave=require("../game/Wave"),GroundEnemy=require("../game/GroundEnemy"),IceBeam=require("../game/IceBeam"),IceKing=require("../game/IceKing"),Collectible=require("../game/Collectible"),ShadowHolder=require("../game/ShadowHolder"),ScoreCounter=require("../game/ScoreCounter"),SoundSFX=require("../general/SoundSFX");module.exports=GameScreen,GameScreen.prototype=Object.create(SimpleScreen.prototype),GameScreen.prototype.constructor=GameScreen,GameScreen.prototype.init=function(){console.log("GAME INITIALIZED"),SimpleScreen.prototype.init.call(this);var p=this._activeBoundaryPadding;this._scrollerEngine=new ScrollerEngine(new PIXI.Point(Common.STAGE_WIDTH/2,Common.STAGE_HEIGHT/2),new PIXI.Rectangle(-Common.STAGE_WIDTH/2,-Common.STAGE_HEIGHT/2,Common.STAGE_WIDTH,Common.STAGE_HEIGHT),new PIXI.Rectangle(-(Common.STAGE_WIDTH/2)-p,-(Common.STAGE_HEIGHT/2)-p,2*Common.STAGE_WIDTH+2*p,Common.STAGE_HEIGHT+2*p)),this._scrollerEngine.x=0,this._scrollerEngine.init(),this.addChild(this._scrollerEngine),this._scrollerEngine.addLayer("backgroundLayer1",new PIXI.Point(.03,0)),this._scrollerEngine.addLayer("backgroundLayer2",new PIXI.Point(.1,0)),this._scrollerEngine.addLayer("backgroundLayer3",new PIXI.Point(.15,0)),this._scrollerEngine.addLayer("backgroundLayer4",new PIXI.Point(.18,0)),this._scrollerEngine.addLayer("backgroundLayer5",new PIXI.Point(.2,0)),this._scrollerEngine.addLayer("backgroundLayer6",new PIXI.Point(.7,0)),this._scrollerEngine.addLayer("midgroundLayer1",new PIXI.Point(.9,0)),this._scrollerEngine.addLayer("shadowLayer",new PIXI.Point(1,1)),this._scrollerEngine.addLayer("iceBeamLayer",new PIXI.Point(1,1)),this._scrollerEngine.addLayer("gameLayer",new PIXI.Point(1,1)),this._scrollerEngine.addLayer("enemy2Layer",new PIXI.Point(1,1)),this._scrollerEngine.addLayer("enemy1Layer",new PIXI.Point(1,1)),this._scrollerEngine.addLayer("foregroundLayer1",new PIXI.Point(1.3,0)),this._addBackground([{texture:"tile_sky",width:1064,height:504,offsetX:-3,offsetY:0}],"backgroundLayer1",0),this._addBackground([{texture:"tile_mountain_back",width:944,height:270,offsetX:-3,offsetY:0}],"backgroundLayer2",200),this._addBackground([{texture:"tile_mountain_front",width:950,height:372,offsetX:-3,offsetY:0}],"backgroundLayer3",220),this._addBackground([{texture:"cloud_000",width:98,height:34,offsetX:200,offsetY:0},{texture:"cloud_001",width:404,height:170,offsetX:300,offsetY:90},{texture:"cloud_002",width:586,height:232,offsetX:50,offsetY:20},{texture:"cloud_003",width:248,height:98,offsetX:200,offsetY:100},{texture:"cloud_004",width:372,height:180,offsetX:0,offsetY:60}],"backgroundLayer4",-100),this._addBackground([{texture:"cloud_003",width:248,height:98,offsetX:400,offsetY:10},{texture:"cloud_002",width:586,height:232,offsetX:100,offsetY:90},{texture:"cloud_000",width:98,height:34,offsetX:300,offsetY:60},{texture:"cloud_004",width:372,height:180,offsetX:200,offsetY:100},{texture:"cloud_001",width:404,height:170,offsetX:500,offsetY:40}],"backgroundLayer5",-100),this._addBackground([{texture:"tile_snow_001",width:836,height:284,offsetX:-10,offsetY:0},{texture:"tile_snow_002",width:836,height:271,offsetX:-10,offsetY:13}],"backgroundLayer6",340),this._addBackground([{texture:"tile_mg_000",width:1e3,height:205,offsetX:-10,offsetY:0},{texture:"tile_mg_001",width:1e3,height:205,offsetX:-10,offsetY:0}],"midgroundLayer1",560),this._addBackground([{texture:"tile_fg_001",width:776,height:176,offsetX:-10,offsetY:0},{texture:"tile_fg_002",width:776,height:120,offsetX:-10,offsetY:0}],"foregroundLayer1",600),this._groundEnemyGenerator1=new ScrollerObjectGenerator([{id:"walk",base:GroundEnemy,args:[1]},{id:"belly",base:GroundEnemy,args:[3]}]),this._groundEnemyGenerator1.addPattern([{x:0,y:320,poolId:"walk"}],"pattern1"),this._groundEnemyGenerator1.addPattern([{x:0,y:320,poolId:"belly"}],"pattern2"),this._groundEnemyGenerator1.setFrequencies(500,700),this._groundEnemyGenerator1.signals.generateObjects.add(this.onGenerateGroundEnemy,this),this._groundEnemyGenerator1.signals.objectDisposed.add(this.onEnemyDisposed,this),this._groundEnemyGenerator2=new ScrollerObjectGenerator([{id:"walk",base:GroundEnemy,args:[2]},{id:"belly",base:GroundEnemy,args:[4]}]),this._groundEnemyGenerator2.addPattern([{x:0,y:310,poolId:"walk"}],"pattern1"),this._groundEnemyGenerator2.addPattern([{x:0,y:310,poolId:"belly"}],"pattern2"),this._groundEnemyGenerator2.setFrequencies(600,800),this._groundEnemyGenerator2.signals.generateObjects.add(this.onGenerateGroundEnemy,this),this._groundEnemyGenerator2.signals.objectDisposed.add(this.onEnemyDisposed,this),this._airEnemyGenerator=new ScrollerObjectGenerator([{id:"zap",base:IceBeam,args:[]}]),this._airEnemyGenerator.setFrequencies(500,600),this._airEnemyGenerator.addPattern([{x:0,y:-200,poolId:"zap"}],"patternSingle1"),this._airEnemyGenerator.addPattern([{x:0,y:-100,poolId:"zap"}],"patternSingle2"),this._airEnemyGenerator.addPattern([{x:0,y:-30,poolId:"zap"}],"patternSingle3"),this._airEnemyGenerator.addPattern([{x:0,y:40,poolId:"zap"}],"patternSingle4"),this._airEnemyGenerator.addPattern([{x:0,y:-200,poolId:"zap"}],"patternSingle5"),this._airEnemyGenerator.addPattern([{x:0,y:-200,poolId:"zap"}],"patternSingle6"),this._airEnemyGenerator.signals.generateObjects.add(this.onShowIceKing,this),this._collectibleGenerator=new ScrollerObjectGenerator(this._generateCollectibleObjectData([{id:"gemBig",texture:"collect_000",width:90,height:88},{id:"gemSmall1",texture:"collect_001",width:56,height:76},{id:"gemSmall2",texture:"collect_002",width:58,height:66},{id:"gemSmall3",texture:"collect_003",width:62,height:74},{id:"apple",texture:"collect_004",width:64,height:68}])),this._collectibleGenerator.setFrequencies(200,400),this._generateCollectiblePatterns(),this._collectibleGenerator.signals.generateObjects.add(this.onGenerateCollectible,this),this._shadowHolder=new ShadowHolder,this._scrollerEngine.addObjectToLayer(this._shadowHolder,"shadowLayer",0,300),this._protectedCharacters=new ProtectedCharacters,this._scrollerEngine.addObjectToLayer(this._protectedCharacters,"gameLayer",0,300),this._avatar=new Avatar,this._scrollerEngine.addObjectToLayer(this._avatar,"gameLayer",0,0),this._avatar.persistentRectangle=new PIXI.Rectangle(-p3.View.width/2,-300,p3.View.width,570),this._avatar.signals.generateWave.add(this.onGenerateWave,this),this._avatar.signals.landOnFloor.add(this.onAvatarLand,this),this._avatar.signals.jump.add(this.onAvatarJump,this),this._avatar.signals.frozen.addOnce(this.onAvatarFreeze,this),this._shadowHolder.addObject(this._avatar),this._wavePool=new p3.ObjectPool(Wave,5),this._iceKing=new IceKing,this._scrollerEngine.addObjectToLayer(this._iceKing,"gameLayer",0,0),this._iceKing.signals.fireIceBeam.add(this.onIceKingFireIceBeam,this),this._scrollerEngine.addCollisionDetector("wave","groundEnemy"),this._scrollerEngine.addCollisionDetector("avatar","collectible"),this._scrollerEngine.addCollisionDetector("avatar","iceBeam"),this._scrollerEngine.addCollisionDetector("avatar","groundEnemy"),this._scrollerEngine.addCollisionDetector("protectedCharacters","groundEnemy"),this._scrollerEngine.signals.collisionFired.add(this.onCollision,this),this._hitArea=new PIXI.Sprite(Common.generatedTextures.blackSquare),this._hitArea.alpha=0,this._hitArea.width=Common.STAGE_WIDTH,this._hitArea.height=Common.STAGE_HEIGHT,this._hitArea.hitArea=new PIXI.Rectangle(0,0,Common.STAGE_WIDTH,Common.STAGE_HEIGHT),this._hitArea.interactive=!0,this.addChild(this._hitArea),this._scoreCounter=new ScoreCounter,this._scoreCounter.y=this._guiButtonTopMargin-2,this._scoreCounter.init(),this.addChild(this._scoreCounter),this._scoreCounter.updateScore(0),this._pauseButton=new p3.Button(this._assetManager.getTexture("btn_pause"),this._assetManager.getTexture("btn_pause_over")),this._pauseButton.y=this._guiButtonTopMargin,this._pauseButton.signals.down.add(this.onPausePressed,this),this._pauseButton.signals.over.add(this.buttonOver,this),this.addChild(this._pauseButton),this._createMuteButton(),this._attackMusic=SoundSFX.play("music_bass_loop_attack",{loop:!0}),this._attackMusic.fadeOut(0,0),this._playLoops(),this._hitArea.touchstart=this._hitArea.mousedown=this.onTouchStart.bind(this),this._hitArea.touchend=this._hitArea.mouseup=this.onTouchEnd.bind(this),this.startGame()},GameScreen.prototype.update=function(){this._paused||(SimpleScreen.prototype.update.call(this),this._scrollerEngine.viewX-=this.scrollSpeed,this._scrollerEngine.update(),this._ended||(this._touched&&this._avatar.touch(),(this._touched||this._avatar.fireLengthValue<this._avatar.fireLengthLimit)&&this._avatar.fire(),this._groundEnemyGenerator1.update(),this._groundEnemyGenerator2.update(),this._airEnemyGenerator.update(),this._collectibleGenerator.update(),this._score+=this.scrollSpeed/10,this._scoreCounter.updateScore(Math.floor(this._score)),this._groundEnemyGenerator1.setFrequencies(500-Math.round(400*Math.min(1,4*this.scrollIncPercentage)),700-Math.round(500*Math.min(1,4*this.scrollIncPercentage)),!1),this._groundEnemyGenerator2.setFrequencies(500-Math.round(300*Math.min(1,4*this.scrollIncPercentage)),600-Math.round(300*Math.min(1,4*this.scrollIncPercentage)),!1),this._airEnemyGenerator.setFrequencies(400-Math.round(300*Math.min(1,4*this.scrollIncPercentage)),700-Math.round(400*Math.min(1,4*this.scrollIncPercentage)),!1),this._avatar.persistentX=Math.max(-400,-(p3.View.width/3))-this._avatar.kickBack,this._protectedCharacters.persistentX=this._avatar.persistentX+this._avatar.kickBack-100),this._scrollInc=Math.min(this._scrollInc+35e-5,this._scrollIncMax)),Common.frameCount%30==0&&(this._touched||this._attackMusic.fadeOut(0,100))},GameScreen.prototype.resize=function(){SimpleScreen.prototype.resize.call(this),this._pauseButton.x=this._getFirstButtonPositionRight(),this._muteButton.x=this._getSecondButtonPositionRight(),this._scoreCounter.x=this._leftEdge+130},GameScreen.prototype.dispose=function(){SoundSFX.stop("music_bass_loop_attack"),SoundSFX.stop("music_bass_loop_bg"),this._stopLoops()},GameScreen.prototype.animateIn=function(callback,scope){SimpleScreen.prototype.animateIn.call(this)},GameScreen.prototype.animateOut=function(callback,scope){SimpleScreen.prototype.animateOut.call(this)},GameScreen.prototype.startGame=function(){this._collectibleGenerator.generate(),this._groundEnemyGenerator2.generate()},GameScreen.prototype.endGame=function(){this._paused=!0,TweenMax.killAll(),Common.animator.removeAll(),Common.animator.setTimeout(function(){this.signals.requestedNextScreen.dispatch(Math.floor(this._score)),this._stopLoops()},.5,this),this._touched=!1},GameScreen.prototype.hideGUI=function(){this._pauseButton.visible=!1,this._muteButton.visible=!1,this._paused=!0,TweenMax.pauseAll(),this._stopLoops(),this._scrollerEngine.pause()},GameScreen.prototype.showGUI=function(){this._pauseButton.visible=!0,this.removeChild(this._muteButton),this._createMuteButton(),this._paused=!1,TweenMax.resumeAll(),this._playLoops(),this._scrollerEngine.resume()},GameScreen.prototype._addBackground=function(images,layerName,yOffset){for(var arr=[],i=0;i<images.length;i++)arr.push({base:ScrollerObjectImage,args:[layerName+"_"+(i+1),!0,this._assetManager.getTexture(images[i].texture)],areaRect:new PIXI.Rectangle(0,0,images[i].width,images[i].height),offset:{x:images[i].offsetX,y:images[i].offsetY}});var loop=new ScrollerLoopingRange(arr,!0,!1);this._scrollerEngine.addLoopingRangeToLayer(loop,layerName,0,yOffset)},GameScreen.prototype._generateCollectibleObjectData=function(arr){for(var ret=[],i=0;i<arr.length;i++)ret.push({id:arr[i].id,base:Collectible,args:[arr[i].texture,new PIXI.Rectangle(-(arr[i].width/2),-(arr[i].height/2),arr[i].width,arr[i].height)]});return ret},GameScreen.prototype._generateCollectiblePatterns=function(arr){this._collectibleGenerator.addPattern([{x:0,y:0,poolId:"gemSmall1"},{x:100,y:-50,poolId:"gemSmall2"},{x:200,y:-100,poolId:"gemSmall3"}],"patternMid1"),this._collectibleGenerator.addPattern([{x:30,y:0,poolId:"gemSmall3"},{x:100,y:0,poolId:"gemBig"},{x:200,y:0,poolId:"gemSmall2"}],"patternMid2"),this._collectibleGenerator.addPattern([{x:100,y:-140,poolId:"apple"},{x:90,y:-40,poolId:"gemBig"},{x:100,y:60,poolId:"apple"},{x:0,y:-40,poolId:"apple"},{x:200,y:-40,poolId:"apple"}],"patternMid3"),this._collectibleGenerator.addPattern([{x:0,y:-250,poolId:"gemSmall3"},{x:100,y:-250,poolId:"gemSmall1"},{x:200,y:-250,poolId:"gemSmall2"}],"patternHigh1"),this._collectibleGenerator.addPattern([{x:10,y:-250,poolId:"apple"},{x:100,y:-250,poolId:"gemBig"},{x:200,y:-250,poolId:"apple"},{x:10,y:-150,poolId:"apple"},{x:100,y:-150,poolId:"gemBig"},{x:200,y:-150,poolId:"apple"}],"patternHigh2"),this._collectibleGenerator.addPattern([{x:0,y:-250,poolId:"apple"},{x:100,y:-250,poolId:"apple"},{x:200,y:-250,poolId:"apple"}],"patternLow1"),this._collectibleGenerator.addPattern([{x:400,y:-250,poolId:"gemSmall3"},{x:300,y:-150,poolId:"gemSmall1"},{x:200,y:-50,poolId:"gemBig"},{x:100,y:50,poolId:"gemSmall2"},{x:0,y:150,poolId:"gemSmall3"}],"patternAll1")},GameScreen.prototype._playLoops=function(){SoundSFX.play("sfx_finn_walk",{loop:!0}),SoundSFX.play("sfx_jake_walk",{loop:!0}),SoundSFX.play("sfx_ambient_ice_creaking_00",{loop:!0}),SoundSFX.play("sfx_ice_wind",{loop:!0}),SoundSFX.play("sfx_8bit_backgroundloop_00",{loop:!0})},GameScreen.prototype._stopLoops=function(){SoundSFX.stop("sfx_finn_walk"),SoundSFX.stop("sfx_jake_walk"),SoundSFX.stop("sfx_ambient_ice_creaking_00"),SoundSFX.stop("sfx_ice_wind"),SoundSFX.stop("sfx_iceking_loop"),SoundSFX.stop("sfx_8bit_backgroundloop_00")},GameScreen.prototype._createMuteButton=function(){this._muteButton=new p3.MuteButton(this._assetManager.getTexture("btn_sound"),this._assetManager.getTexture("btn_mute"),this._assetManager.getTexture("btn_sound_over"),this._assetManager.getTexture("btn_mute_over")),this._muteButton.id="mute",this._muteButton.y=this._guiButtonTopMargin,this._muteButton.signals.over.add(this.buttonOver,this),this._muteButton.init(),this.addChild(this._muteButton)},GameScreen.prototype.onTouchStart=function(event){this._gameEnded||(this._touched=!0,this._avatar.onTouchStart(),this._attackMusic.fadeIn(1,300))},GameScreen.prototype.onTouchEnd=function(event){this._gameEnded||(this._touched=!1,this._avatar.onTouchEnd())},GameScreen.prototype.onGenerateWave=function(event){for(var graphicWave,angles=[120,125,130,135,140,145,150],otherWaves=[],i=0;i<angles.length;i++){angles[i]-=15*this._avatar.kickBackPercent;var wave=this._wavePool.create();null==wave&&(this._wavePool.expand(2),wave=this._wavePool.create()),wave.signals.disposed.add(this.onWaveDisposed,this);var rads=angles[i]*PIXI.DEG_TO_RAD,hyp=15,offsetX=-1*(-Math.sin(rads)*hyp),offsetY=-1*(Math.cos(rads)*hyp);this._scrollerEngine.addObjectToLayer(wave,"gameLayer",this._avatar.x+offsetX+30,this._avatar.y+offsetY+30),wave.xSpeed=this.scrollSpeed+offsetX,wave.ySpeed=offsetY,i==Math.floor(angles.length/2)?(graphicWave=wave,wave.persistentRectangle=new PIXI.Rectangle(-p3.View.width/2,-300,p3.View.width,600)):(otherWaves.push(wave),wave.persistentRectangle=null)}graphicWave.addGraphic(angles[Math.floor(angles.length/2)],otherWaves)},GameScreen.prototype.onAvatarLand=function(){},GameScreen.prototype.onAvatarJump=function(){},GameScreen.prototype.onWaveDisposed=function(wave){wave.signals.disposed.remove(this.onWaveDisposed,this),this._wavePool.free(wave)},GameScreen.prototype.onGenerateGroundEnemy=function(enemies){for(var i=0;i<enemies.length;i++){var layerName="enemy"+(enemies[i].obj.enemyType>2?Math.floor(enemies[i].obj.enemyType/2):enemies[i].obj.enemyType)+"Layer",layer=this._scrollerEngine.getLayerContainer(layerName),x=-1*layer.x+this._scrollerEngine.viewBoundary.width;this._scrollerEngine.addObjectToLayer(enemies[i].obj,layerName,x-enemies[i].obj.areaRect.x,enemies[i].offset.y);var maxScale=1;1==enemies[i].obj.enemyType?(enemies[i].obj.xSpeed=-this._groundEnemySpeed,maxScale=.8):2==enemies[i].obj.enemyType?(enemies[i].obj.xSpeed=.7*-this._groundEnemySpeed,maxScale=.5):3==enemies[i].obj.enemyType?(enemies[i].obj.xSpeed=2.5*-this._groundEnemySpeed,maxScale=.8):4==enemies[i].obj.enemyType&&(enemies[i].obj.xSpeed=2*-this._groundEnemySpeed,maxScale=.6),this._shadowHolder.addObject(enemies[i].obj,0,maxScale)}},GameScreen.prototype.onEnemyDisposed=function(obj){this._shadowHolder.removeObject(obj)},GameScreen.prototype.onShowIceKing=function(enemies){if(this._iceKing.active)for(var i=0;i<enemies.length;i++)this._airEnemyGenerator.onObjectDisposed(enemies[i].obj);else{var alert=new PIXI.Sprite(this._assetManager.getTexture("alert"));alert.anchor=new PIXI.Point(1,.5),alert.x=this._rightEdge,alert.y=this._scrollerEngine.screenFocusPoint.y+enemies[0].offset.y+this._iceKing.beamOffset,alert.alpha=0,this.addChild(alert);var tl=new TimelineMax({repeat:4,onCompleteScope:this,onCompleteParams:[enemies,alert],onComplete:function(enemies,alert){this._iceKing.appear(p3.View.width/2,enemies[0].offset.y,enemies,this.scrollIncPercentage),this.removeChild(alert),SoundSFX.play("sfx_iceking_appear")}}),alertLength=.2*Math.max(.4,1-this.scrollIncPercentage);tl.to(alert,0,{delay:alertLength,alpha:1}),tl.to(alert,0,{delay:alertLength,alpha:0}),Common.animator.add(tl),SoundSFX.play("sfx_iceking_warning_01")}this.scrollIncPercentage>.2?(this._airEnemyGenerator.addPattern([{x:0,y:-200,poolId:"zap"},{x:0,y:40,poolId:"zap"}],"patternDouble1"),this._airEnemyGenerator.addPattern([{x:0,y:-50,poolId:"zap"},{x:0,y:-200,poolId:"zap"}],"patternDouble2"),this._airEnemyGenerator.addPattern([{x:0,y:-200,poolId:"zap"},{x:0,y:40,poolId:"zap"}],"patternDouble3"),this._airEnemyGenerator.addPattern([{x:0,y:40,poolId:"zap"},{x:0,y:-100,poolId:"zap"}],"patternDouble4"),this._airEnemyGenerator.removePattern("patternSingle2"),this._airEnemyGenerator.removePattern("patternSingle4")):this.scrollIncPercentage>.3?(this._airEnemyGenerator.addPattern([{x:0,y:-30,poolId:"zap"},{x:0,y:40,poolId:"zap"}],"patternDouble5"),this._airEnemyGenerator.addPattern([{x:0,y:-30,poolId:"zap"},{x:0,y:-150,poolId:"zap"}],"patternDouble6"),this._airEnemyGenerator.addPattern([{x:0,y:40,poolId:"zap"},{x:0,y:-30,poolId:"zap"}],"patternDouble7"),this._airEnemyGenerator.addPattern([{x:0,y:-150,poolId:"zap"},{x:0,y:-30,poolId:"zap"}],"patternDouble8"),this._airEnemyGenerator.removePattern("patternSingle1"),this._airEnemyGenerator.addPattern([{x:0,y:-30,poolId:"zap"},{x:0,y:-150,poolId:"zap"},{x:0,y:40,poolId:"zap"}],"patternTriple1"),this._airEnemyGenerator.addPattern([{x:0,y:-200,poolId:"zap"},{x:0,y:-30,poolId:"zap"},{x:0,y:40,poolId:"zap"}],"patternTriple2")):this.scrollIncPercentage>.5&&(this._airEnemyGenerator.addPattern([{x:0,y:-170,poolId:"zap"},{x:0,y:-30,poolId:"zap"},{x:0,y:60,poolId:"zap"}],"patternTriple3"),this._airEnemyGenerator.addPattern([{x:0,y:40,poolId:"zap"},{x:0,y:-30,poolId:"zap"},{x:0,y:50,poolId:"zap"}],"patternTriple4"),this._airEnemyGenerator.removePattern("patternSingle3"),this._airEnemyGenerator.removePattern("patternDouble1"),this._airEnemyGenerator.removePattern("patternDouble3"),this._airEnemyGenerator.removePattern("patternDouble5"),this._airEnemyGenerator.removePattern("patternDouble7"))},GameScreen.prototype.onGenerateCollectible=function(collectibles){for(var i=0;i<collectibles.length;i++){var layer=this._scrollerEngine.getLayerContainer("gameLayer"),x=-1*layer.x+this._scrollerEngine.viewBoundary.width;this._scrollerEngine.addObjectToLayer(collectibles[i].obj,"gameLayer",x-collectibles[i].obj.areaRect.x+collectibles[i].offset.x,collectibles[i].offset.y)}},GameScreen.prototype.onCollision=function(object1,object2){"groundEnemy"==object2.type&&object2.hasBeenHit||("wave"==object1.type&&"groundEnemy"==object2.type?object2.hit(this.scrollSpeed):"avatar"==object1.type?"collectible"==object2.type?object2.hasBeenCollected||(object2.collect(),this._score+=100,this._scoreCounter.updateScore(Math.floor(this._score)),SoundSFX.play("sfx_gemcollect_00")):"iceBeam"!=object2.type||this._gameEnded||(this._avatar.freeze(),this._gameEnded=!0):"protectedCharacters"==object1.type&&"groundEnemy"==object2.type&&(object2.hasBeenHit||this._gameEnded||(this._gameEnded=!0,this.endGame(),SoundSFX.play("sfx_hero_hit_00"))))},GameScreen.prototype.onPausePressed=function(){Common.animator.setTimeout(function(){this.signals.pausePressed.dispatch()},.2,this),this._stopLoops(),SoundSFX.play("sfx_btn_press_fwd_00")},GameScreen.prototype.onIceKingFireIceBeam=function(obj,beamLength,y){var layerName="iceBeamLayer";this._scrollerEngine.getLayerContainer(layerName);this._scrollerEngine.addObjectToLayer(obj,layerName,this._iceKing.x,y),obj.set(p3.View.width,beamLength),obj.persistentX=this._iceKing.persistentX,SoundSFX.playRandomFrom(["sfx_iceking_attack_00","sfx_iceking_attack_01","sfx_iceking_attack_02"])},GameScreen.prototype.onAvatarFreeze=function(){this.endGame()},GameScreen.prototype.buttonOver=function(){SoundSFX.play("sfx_btn_rollover_00")},Object.defineProperty(GameScreen.prototype,"scrollSpeed",{get:function(){return this._startingScrollSpeed*(1+Math.min(this._scrollInc,this._scrollIncMax-1))}}),Object.defineProperty(GameScreen.prototype,"scrollIncPercentage",{get:function(){return this._scrollInc/this._scrollIncMax}})},{"../Common":2,"../game/Avatar":5,"../game/Collectible":6,"../game/GroundEnemy":7,"../game/IceBeam":8,"../game/IceKing":9,"../game/ProtectedCharacters":10,"../game/ScoreCounter":11,"../game/ShadowHolder":12,"../game/Wave":13,"../general/SoundSFX":15,"../scroller/ScrollerEngine":27,"../scroller/ScrollerLoopingRange":28,"../scroller/ScrollerObject":29,"../scroller/ScrollerObjectGenerator":30,"../scroller/ScrollerObjectImage":31,"./SimpleScreen":25}],23:[function(require,module,exports){function IntroScreen(){this._screen1=null,this._screen2=null,this._nextButton=null,this._muteButton=null,SimpleScreen.call(this)}var Common=require("../Common"),SimpleScreen=require("./SimpleScreen"),NextButton=require("../general/NextButton"),SoundSFX=require("../general/SoundSFX");module.exports=IntroScreen,IntroScreen.prototype=Object.create(SimpleScreen.prototype),IntroScreen.prototype.constructor=IntroScreen,IntroScreen.prototype.init=function(){console.log("INTRO INITIALIZED"),SimpleScreen.prototype.init.call(this),this._screen1=new PIXI.Container,this._screen1.x=Common.STAGE_WIDTH/2,this._screen1.y=Common.STAGE_HEIGHT/2,this.addChild(this._screen1),this._screen2=new PIXI.Container,this._screen2.x=Common.STAGE_WIDTH/2+Common.STAGE_WIDTH,this._screen2.y=Common.STAGE_HEIGHT/2,this.addChild(this._screen2);var s1=this._screen1,s2=this._screen2;s1.bg=new PIXI.Sprite(this._assetManager.getTexture("ui_intro_0")),s1.bg.anchor=new PIXI.Point(.5,.5),s1.bg.y=(Common.STAGE_HEIGHT-s1.bg.height)/2,s1.addChild(s1.bg),s1.marcelineRadial=new PIXI.Sprite(this._assetManager.getTexture("ui_intro_1_radial")),s1.marcelineRadial.anchor=new PIXI.Point(.5,.5),s1.marcelineRadial.x=220,s1.marcelineRadial.y=-140,s1.addChild(s1.marcelineRadial),s1.marceline=new PIXI.Sprite(this._assetManager.getTexture("ui_intro_1_marceline")),s1.marceline.anchor=new PIXI.Point(.5,.5),s1.marceline.x=170,s1.marceline.y=-60,s1.addChild(s1.marceline),s1.fin=new PIXI.Sprite(this._assetManager.getTexture("ui_intro_1_finn")),s1.fin.anchor=new PIXI.Point(.5,.5),s1.fin.x=-250,s1.fin.y=120,s1.addChild(s1.fin),s1.finSpeech=new PIXI.Container,s1.finSpeech.x=-300,s1.finSpeech.y=-120,s1.finSpeech.scale=new PIXI.Point(0,0),s1.addChild(s1.finSpeech);var bubble=new PIXI.Sprite(this._assetManager.getTexture("ui_intro_1_speech_000"));bubble.anchor=new PIXI.Point(.3,.7),s1.finSpeech.addChild(bubble);var copy=this._assetManager.getJSON("config").copy.RADICAL_MUSIC[Common.COUNTRY_CODE];copy.live?s1.finSpeechText=new PIXI.Text(copy.text,{font:"32px FredFredburgerAra-Regular",fill:0,align:"center",stroke:0,strokeThickness:1}):s1.finSpeechText=new p3.BitmapText(copy.text,this._assetManager.getFontAtlas("pendlefont_36_black"),p3.BitmapText.ALIGN_CENTER),s1.finSpeechText.x=70+copy.offset.x,s1.finSpeechText.y=-140+copy.offset.y,s1.finSpeechText.scale.x=s1.finSpeechText.scale.y=copy.scale,s1.finSpeech.addChild(s1.finSpeechText),copy.live&&(s1.finSpeechText.x-=.5*s1.finSpeechText.width),s1.jake=new PIXI.Sprite(this._assetManager.getTexture("ui_intro_1_jake")),s1.jake.anchor=new PIXI.Point(.5,.5),s1.jake.x=100,s1.jake.y=220,s1.addChild(s1.jake),s1.jakeSpeech=new PIXI.Container,s1.jakeSpeech.x=0,s1.jakeSpeech.y=120,s1.jakeSpeech.scale=new PIXI.Point(0,0),s1.addChild(s1.jakeSpeech);var bubble=new PIXI.Sprite(this._assetManager.getTexture("ui_intro_1_speech_001"));bubble.anchor=new PIXI.Point(.4,.8),s1.jakeSpeech.addChild(bubble);var copy=this._assetManager.getJSON("config").copy.TOTALLY_AWESOME[Common.COUNTRY_CODE];copy.live?s1.jakeSpeechText=new PIXI.Text(copy.text,{font:"32px FredFredburgerAra-Regular",fill:0,align:"center",stroke:0,strokeThickness:1}):s1.jakeSpeechText=new p3.BitmapText(copy.text,this._assetManager.getFontAtlas("pendlefont_36_black"),p3.BitmapText.ALIGN_CENTER),s1.jakeSpeechText.x=30+copy.offset.x,s1.jakeSpeechText.y=-120+copy.offset.x,s1.jakeSpeechText.scale=new PIXI.Point(copy.scale,copy.scale),s1.jakeSpeech.addChild(s1.jakeSpeechText),copy.live&&(s1.jakeSpeechText.x-=.5*s1.jakeSpeechText.width),s1.kingSpeech=new PIXI.Container,s1.kingSpeech.x=-200,s1.kingSpeech.y=-680,s1.kingSpeech.scale=new PIXI.Point(0,0),s1.addChild(s1.kingSpeech);var bubble=new PIXI.Sprite(this._assetManager.getTexture("ui_intro_2_speech_002"));bubble.anchor=new PIXI.Point(.6,.7),s1.kingSpeech.addChild(bubble),s1.kingSpeechText=new p3.BitmapText("!",this._assetManager.getFontAtlas("pendlefont_36_black"),p3.BitmapText.ALIGN_CENTER),s1.kingSpeechText.x=-30,s1.kingSpeechText.y=-60,s1.kingSpeech.addChild(s1.kingSpeechText),s2.bg=new PIXI.Sprite(this._assetManager.getTexture("ui_intro_3")),s2.bg.anchor=new PIXI.Point(.5,.5),s2.addChild(s2.bg),s2.windowOverlay=new PIXI.Sprite(this._assetManager.getTexture("ui_intro_3_window")),s2.windowOverlay.x=-59,s2.windowOverlay.y=-(Common.STAGE_HEIGHT/2),s2.note1=new PIXI.Sprite(this._assetManager.getTexture("ui_note_black_000")),s2.note1.anchor=new PIXI.Point(0,.5),s2.note1.x=s2.windowOverlay.x+s2.windowOverlay.width/2,s2.note1.y=s2.windowOverlay.y+s2.windowOverlay.height/2+50,s2.addChild(s2.note1),s2.note2=new PIXI.Sprite(this._assetManager.getTexture("ui_note_black_001")),s2.note2.anchor=new PIXI.Point(0,.5),s2.note2.x=s2.windowOverlay.x+s2.windowOverlay.width/2,s2.note2.y=s2.windowOverlay.y+s2.windowOverlay.height/2+50,s2.addChild(s2.note2),s2.note3=new PIXI.Sprite(this._assetManager.getTexture("ui_note_black_002")),s2.note3.anchor=new PIXI.Point(0,.5),s2.note3.x=s2.windowOverlay.x+s2.windowOverlay.width/2,s2.note3.y=s2.windowOverlay.y+s2.windowOverlay.height/2+50,s2.addChild(s2.note3),s2.note4=new PIXI.Sprite(this._assetManager.getTexture("ui_note_black_000")),s2.note4.anchor=new PIXI.Point(0,.5),s2.note4.x=s2.windowOverlay.x+s2.windowOverlay.width/2,s2.note4.y=s2.windowOverlay.y+s2.windowOverlay.height/2+50,s2.addChild(s2.note4),s2.note5=new PIXI.Sprite(this._assetManager.getTexture("ui_note_black_001")),s2.note5.anchor=new PIXI.Point(0,.5),s2.note5.x=s2.windowOverlay.x+s2.windowOverlay.width/2,s2.note5.y=s2.windowOverlay.y+s2.windowOverlay.height/2+50,s2.addChild(s2.note5),s2.note6=new PIXI.Sprite(this._assetManager.getTexture("ui_note_black_002")),s2.note6.anchor=new PIXI.Point(0,.5),s2.note6.x=s2.windowOverlay.x+s2.windowOverlay.width/2,s2.note6.y=s2.windowOverlay.y+s2.windowOverlay.height/2+50,s2.addChild(s2.note6),s2.addChild(s2.windowOverlay),s2.king1=new PIXI.Sprite(this._assetManager.getTexture("ui_intro_3_iceking_000")),s2.king1.anchor=new PIXI.Point(.5,.5),s2.addChild(s2.king1),s2.king2=new PIXI.Sprite(this._assetManager.getTexture("ui_intro_3_iceking_001")),s2.king2.anchor=new PIXI.Point(.5,.5),s2.king2.x=56,s2.king2.alpha=0,s2.addChild(s2.king2),s2.kingSpeech=new PIXI.Container,s2.kingSpeech.x=-230,s2.kingSpeech.y=-170,s2.kingSpeech.scale=new PIXI.Point(0,0),s2.addChild(s2.kingSpeech);var bubble=new PIXI.Sprite(this._assetManager.getTexture("ui_intro_3_speech_003"));bubble.anchor=new PIXI.Point(.7,.6),s2.kingSpeech.addChild(bubble);var copy=this._assetManager.getJSON("config").copy.AAARGH[Common.COUNTRY_CODE];copy.live?s2.kingSpeechText1=new PIXI.Text(copy.text,{font:"32px FredFredburgerAra-Regular",fill:0,align:"center",stroke:0,strokeThickness:1}):s2.kingSpeechText1=new p3.BitmapText(copy.text,this._assetManager.getFontAtlas("pendlefont_36_black"),p3.BitmapText.ALIGN_CENTER),s2.kingSpeechText1.x=-60+copy.offset.x,s2.kingSpeechText1.y=-90+copy.offset.x,s2.kingSpeechText1.scale.x=s2.kingSpeechText1.scale.y=copy.scale,s2.kingSpeech.addChild(s2.kingSpeechText1),copy.live&&(s2.kingSpeechText1.x-=.5*s2.kingSpeechText1.width);var copy=this._assetManager.getJSON("config").copy.SILENCE_THEM[Common.COUNTRY_CODE];copy.live?s2.kingSpeechText2=new PIXI.Text(copy.text,{font:"32px FredFredburgerAra-Regular",fill:0,align:"center",stroke:0,strokeThickness:1}):s2.kingSpeechText2=new p3.BitmapText(copy.text,this._assetManager.getFontAtlas("pendlefont_36_black"),p3.BitmapText.ALIGN_CENTER),s2.kingSpeechText2.x=-60+copy.offset.x,s2.kingSpeechText2.y=-120+copy.offset.x,s2.kingSpeechText2.alpha=0,s2.kingSpeechText2.scale.x=s2.kingSpeechText2.scale.y=copy.scale,s2.kingSpeech.addChild(s2.kingSpeechText2),copy.live&&(s2.kingSpeechText2.x-=.5*s2.kingSpeechText2.width),this._nextButton=new NextButton("next",0),this._nextButton.y=Common.STAGE_HEIGHT-130,this._nextButton.init(),this._nextButton.signals.clicked.addOnce(this.nextClicked,this),this._nextButton.signals.clickFinish.addOnce(this.nextClickFinish,this),Common.savedData.hasSeenIntro&&this.addChild(this._nextButton),this.showScreen1(),this._muteButton=new p3.MuteButton(this._assetManager.getTexture("btn_sound"),this._assetManager.getTexture("btn_mute"),this._assetManager.getTexture("btn_sound_over"),this._assetManager.getTexture("btn_mute_over")),this._muteButton.id="mute",this._muteButton.y=this._guiButtonTopMargin,this._muteButton.init(),this._muteButton.signals.over.add(this.buttonOver,this),this.addChild(this._muteButton),SoundSFX.play("music_bass_loop_attack",{loop:!0}),SoundSFX.play("sfx_ice_wind",{loop:!0})},IntroScreen.prototype.update=function(){},
IntroScreen.prototype.resize=function(){SimpleScreen.prototype.resize.call(this),this._nextButton.x=this._rightEdge-200,this._muteButton.x=this._getFirstButtonPositionRight()},IntroScreen.prototype.dispose=function(){this._nextButton.signals.clickFinish.remove(this.nextClickFinish,this),SoundSFX.stop("music_bass_loop_attack"),SoundSFX.stop("sfx_ice_wind")},IntroScreen.prototype.animateIn=function(callback,scope){SimpleScreen.prototype.animateIn.call(this)},IntroScreen.prototype.animateOut=function(callback,scope){SimpleScreen.prototype.animateOut.call(this)},IntroScreen.prototype.showScreen1=function(){var s1=this._screen1,tl=(this._screen2,new TimelineMax);tl.to(s1.finSpeech.scale,1,{x:1,ease:Elastic.easeOut},1),tl.to(s1.finSpeech.scale,1,{y:1,ease:Elastic.easeOut},1.1),tl.to(s1.jakeSpeech.scale,1,{y:1,ease:Elastic.easeOut},2),tl.to(s1.jakeSpeech.scale,1,{x:1,ease:Elastic.easeOut},2.1),tl.to(s1,3,{y:1020,ease:Sine.easeInOut,onCompleteScope:this,onComplete:function(){Common.animator.setTimeout(function(){this.showScreen2()},2,this)}},4),tl.to(s1.kingSpeech.scale,1,{x:1,ease:Elastic.easeOut},7),tl.to(s1.kingSpeech.scale,1,{y:1,ease:Elastic.easeOut},7.1),Common.animator.add(tl)},IntroScreen.prototype.showScreen2=function(){var s1=this._screen1,s2=this._screen2;TweenMax.to(s2.note1.anchor,.4,{x:1,ease:Sine.easeInOut,repeat:-1,yoyo:!0}),TweenMax.to(s2.note2.anchor,.4,{delay:.2,x:1,ease:Sine.easeInOut,repeat:-1,yoyo:!0}),TweenMax.to(s2.note3.anchor,.4,{delay:.4,x:1,ease:Sine.easeInOut,repeat:-1,yoyo:!0});var tl=new TimelineMax;tl.to(s2.note1,2,{delay:1,bezier:{values:[{x:200,y:-400},{x:0,y:-(Common.STAGE_HEIGHT/2)-100}]},ease:Linear.easeNone,onStartScope:this,onStart:function(){SoundSFX.play("sfx_penguin_quackloop_00")}},0),tl.to(s2.note2,2,{delay:1.6,bezier:{values:[{x:100,y:-300},{x:200,y:-(Common.STAGE_HEIGHT/2)-100}]},ease:Linear.easeNone,onStartScope:this,onStart:function(){SoundSFX.play("sfx_penguin_quackloop_01")}},0),tl.to(s2.note3,2,{delay:2.8,bezier:{values:[{x:300,y:-350},{x:100,y:-(Common.STAGE_HEIGHT/2)-100}]},ease:Linear.easeNone,onStartScope:this,onStart:function(){SoundSFX.play("sfx_penguin_quackloop_02")}},0),tl.to(s2.note4,2,{delay:3.5,bezier:{values:[{x:200,y:-400},{x:0,y:-(Common.STAGE_HEIGHT/2)-100}]},ease:Linear.easeNone,onStartScope:this,onStart:function(){SoundSFX.play("sfx_penguin_quackloop_01")}},0),tl.to(s2.note5,2,{delay:4.1,bezier:{values:[{x:100,y:-300},{x:200,y:-(Common.STAGE_HEIGHT/2)-100}]},ease:Linear.easeNone,onStartScope:this,onStart:function(){SoundSFX.play("sfx_penguin_quackloop_02")}},0),tl.to(s2.note6,2,{delay:5,bezier:{values:[{x:300,y:-350},{x:100,y:-(Common.STAGE_HEIGHT/2)-100}]},ease:Linear.easeNone,onStartScope:this,onStart:function(){SoundSFX.play("sfx_penguin_quackloop_00")}},0),Common.animator.add(tl);var tl=new TimelineMax;tl.to(s1,1,{x:-(Common.STAGE_WIDTH/2),ease:Expo.easeInOut}),tl.to(s2,1,{x:Common.STAGE_WIDTH/2,ease:Expo.easeInOut},0),tl.to(s2.kingSpeech.scale,1,{x:1,ease:Elastic.easeOut},1),tl.to(s2.kingSpeech.scale,1,{y:1,ease:Elastic.easeOut},1.1),tl.to(s2.king2,.3,{alpha:1},4),tl.to(s2.king1,.3,{alpha:0},4.15),tl.to(s2.kingSpeech.scale,1,{startAt:{x:0,y:0},x:1,ease:Elastic.easeOut},4),tl.to(s2.kingSpeech.scale,1,{startAt:{y:0},y:1,ease:Elastic.easeOut},4.1),tl.to(s2.kingSpeechText1,0,{alpha:0},4),tl.to(s2.kingSpeechText2,0,{alpha:1},4.1),Common.animator.add(tl),Common.animator.setTimeout(function(){Common.savedData.hasSeenIntro=!0,Common.savedData.save(),this.signals.requestedNextScreen.dispatch()},7,this)},IntroScreen.prototype.nextClicked=function(){},IntroScreen.prototype.buttonOver=function(){SoundSFX.play("sfx_btn_rollover_00")},IntroScreen.prototype.nextClickFinish=function(){this.signals.requestedNextScreen.dispatch()}},{"../Common":2,"../general/NextButton":14,"../general/SoundSFX":15,"./SimpleScreen":25}],24:[function(require,module,exports){function Preloader(){this.loadedPercentage=0,this._barInner=null,this._barInnerStartX=null,SimpleScreen.call(this)}var SimpleScreen=require("./SimpleScreen"),Common=require("../Common");module.exports=Preloader,Preloader.prototype=Object.create(SimpleScreen.prototype),Preloader.prototype.constructor=Preloader,Preloader.prototype.init=function(){console.log("PRELOADER INITIALIZED"),SimpleScreen.prototype.init.call(this),this.loadedPercentage=0;var bg=new PIXI.Sprite(this._assetManager.getTexture("preloader_bg"));this.addChild(bg);var barOuter=new PIXI.Sprite(this._assetManager.getTexture("preloader_overlay"));barOuter.anchor=new PIXI.Point(.5,.5),barOuter.x=Common.STAGE_WIDTH/2-250,barOuter.y=Common.STAGE_HEIGHT/2+200,this.addChild(barOuter),this._barInner=new PIXI.Sprite(this._assetManager.getTexture("preloader_fill")),this._barInner.x=barOuter.x-barOuter.width/2-170,this._barInner.y=barOuter.y-barOuter.height/2+10,this.addChild(this._barInner),this.addChild(barOuter),this._barInnerStartX=this._barInner.x;var gr=new PIXI.Graphics;gr.beginFill(0),gr.drawRect(0,0,1,1),Common.generatedTextures.blackSquare=gr.generateTexture(Common.renderer,1,PIXI.SCALE_MODES.LINEAR);var black=new PIXI.Sprite(Common.generatedTextures.blackSquare);black.x=this._barInner.x-this._barInner.width/2,black.width=barOuter.width/2,black.height=Common.STAGE_HEIGHT,this.addChild(black);var hiddenLiveText=new PIXI.Text("Test",{font:"32px FredFredburgerAra-Regular",fill:0,align:"center",stroke:0,strokeThickness:1});hiddenLiveText.alpha=0,this.addChild(hiddenLiveText)},Preloader.prototype.dispose=function(){SimpleScreen.prototype.dispose.call(this)},Preloader.prototype.resize=function(){SimpleScreen.prototype.resize.call(this),this.x=.5*(p3.View.width-Common.STAGE_WIDTH),this.y=.5*(p3.View.height-Common.STAGE_HEIGHT)},Preloader.prototype.update=function(){console.log("LOADING: "+this.loadedPercentage),this._barInner.x=this._barInnerStartX+698*(this.loadedPercentage/100)},Preloader.prototype.animateIn=function(callback,scope){SimpleScreen.prototype.animateIn.call(callback,scope)},Preloader.prototype.animateOut=function(callback,scope){SimpleScreen.prototype.animateOut.call(callback,scope);var timeline=new TimelineMax({onComplete:callback,onCompleteScope:scope});this._tweens.push(timeline)}},{"../Common":2,"./SimpleScreen":25}],25:[function(require,module,exports){function SimpleScreen(){this.signals={},this.signals.requestedNextScreen=new signals.Signal,this.signals.requestedPreviousScreen=new signals.Signal,this._assetManager=p3.AssetManager.instance,this._tweens=null,this._centre=null,this._leftEdge=0,this._rightEdge=0,this._guiButtonTopMargin=100,p3.Screen.call(this)}var Common=require("../Common"),Scene=require("../lib/Scene");module.exports=SimpleScreen,SimpleScreen.prototype=Object.create(Scene.prototype),SimpleScreen.prototype.constructor=SimpleScreen,SimpleScreen.prototype.init=function(){this._tweens=[],this._centre=new PIXI.Point(Common.STAGE_WIDTH/2,Common.STAGE_HEIGHT/2)},SimpleScreen.prototype.dispose=function(){this.signals.requestedNextScreen.dispose(),this.signals.requestedPreviousScreen.dispose();for(var tween,i=0;i<this._tweens.length;++i)tween=this._tweens[i],tween&&tween.kill();this._tweens.length=0,console.log("screen disposed"),TweenMax.killAll(),Common.animator.removeAll()},SimpleScreen.prototype.resize=function(){this.x=.5*(p3.View.width-Common.STAGE_WIDTH),this._rightEdge=this._centre.x+p3.View.width/2,this._leftEdge=this._centre.x-p3.View.width/2},SimpleScreen.prototype.activate=function(){this.animateIn(function(){},this)},SimpleScreen.prototype.animateIn=function(callback,scope){scope=scope||window},SimpleScreen.prototype.animateOut=function(callback,scope){scope=scope||window},SimpleScreen.prototype.hideGUI=function(){},SimpleScreen.prototype.showGUI=function(){},SimpleScreen.prototype._getFirstButtonPositionRight=function(){return Math.round(.5*(Common.STAGE_WIDTH+p3.View.width)-84)},SimpleScreen.prototype._getSecondButtonPositionRight=function(){return Math.round(.5*(Common.STAGE_WIDTH+p3.View.width)-160)},SimpleScreen.prototype._getFirstButtonPositionLeft=function(){return Math.round(.5*(Common.STAGE_WIDTH-p3.View.width)+84)},SimpleScreen.prototype._getSecondButtonPositionLeft=function(){return Math.round(.5*(Common.STAGE_WIDTH-p3.View.width)+234)},SimpleScreen.prototype.onButtonClickedPrevious=function(button){}},{"../Common":2,"../lib/Scene":17}],26:[function(require,module,exports){function SplashScreen(){this._bg=null,this._radial1=null,this._blast1=null,this._blast2=null,this._blast3=null,this._blast4=null,this._blast5=null,this._marceline=null,this._jake=null,this._fin=null,this._bolts=null,this._titleBanner=null,this._titleText=null,this._playButton=null,this._atLogo=null,this._muteButton=null,this._exitButton=null,SimpleScreen.call(this)}var Common=require("../Common"),SimpleScreen=require("./SimpleScreen"),SoundSFX=require("../general/SoundSFX");module.exports=SplashScreen,SplashScreen.prototype=Object.create(SimpleScreen.prototype),SplashScreen.prototype.constructor=SplashScreen,SplashScreen.prototype.init=function(){console.log("SPLASH INITIALIZED"),SimpleScreen.prototype.init.call(this),this._bg=new PIXI.Sprite(this._assetManager.getTexture("ui_splash_bg")),this._bg.anchor=new PIXI.Point(.5,.5),this._bg.x=Common.STAGE_WIDTH/2,this._bg.y=Common.STAGE_HEIGHT/2,this.addChild(this._bg),this._radial=new PIXI.Sprite(this._assetManager.getTexture("ui_intro_1_radial")),this._radial.anchor=new PIXI.Point(.5,.5),this._radial.scale=new PIXI.Point(0,0),this._radial.y=-30,this._bg.addChild(this._radial),this._titleBanner=new PIXI.Sprite(this._assetManager.getTexture("ui_splash_banner")),this._titleBanner.anchor=new PIXI.Point(.5,.5),this._titleBanner.x=0,this._titleBanner.y=-(Common.STAGE_HEIGHT/2)-200,this._bg.addChild(this._titleBanner),this._blast1=new PIXI.Sprite(this._assetManager.getTexture("ui_splash_blast_000")),this._blast1.anchor=new PIXI.Point(.5,.5),this._blast1.scale=new PIXI.Point(0,0),this._bg.addChild(this._blast1),this._blast2=new PIXI.Sprite(this._assetManager.getTexture("ui_splash_blast_001")),this._blast2.anchor=new PIXI.Point(.5,.5),this._blast2.scale=new PIXI.Point(0,0),this._bg.addChild(this._blast2),this._blast3=new PIXI.Sprite(this._assetManager.getTexture("ui_splash_blast_002")),this._blast3.anchor=new PIXI.Point(.5,.5),this._blast3.scale=new PIXI.Point(0,0),this._bg.addChild(this._blast3),this._blast4=new PIXI.Sprite(this._assetManager.getTexture("ui_splash_blast_003")),this._blast4.anchor=new PIXI.Point(.5,.5),this._blast4.scale=new PIXI.Point(0,0),this._bg.addChild(this._blast4),this._blast5=new PIXI.Sprite(this._assetManager.getTexture("ui_splash_blast_004")),this._blast5.anchor=new PIXI.Point(.5,.5),this._blast5.scale=new PIXI.Point(0,0),this._bg.addChild(this._blast5),this._titleText=new PIXI.Sprite(this._assetManager.getTexture("en"==Common.COUNTRY_CODE?"title_en":"title")),this._titleText.anchor=new PIXI.Point(.5,.5),this._titleText.x=0,this._titleText.y=-(Common.STAGE_HEIGHT/2)-200,this._bg.addChild(this._titleText),this._marceline=new PIXI.Sprite(this._assetManager.getTexture("ui_splash_marceline")),this._marceline.anchor=new PIXI.Point(.5,.5),this._marceline.y=60,this._bg.addChild(this._marceline),this._bolts=new PIXI.Sprite(this._assetManager.getTexture("ui_splash_red_bolts")),this._bolts.anchor=new PIXI.Point(.5,.5),this._bolts.scale=new PIXI.Point(0,0),this._bolts.x=-20,this._bolts.y=50,this._bg.addChild(this._bolts),this._jake=new PIXI.Sprite(this._assetManager.getTexture("ui_splash_jake")),this._jake.anchor=new PIXI.Point(.5,1),this._jake.x=1.4*Common.STAGE_WIDTH,this._jake.y=270,this._bg.addChild(this._jake),this._fin=new PIXI.Sprite(this._assetManager.getTexture("ui_splash_fin")),this._fin.anchor=new PIXI.Point(.5,1),this._fin.x=-(1.4*Common.STAGE_WIDTH),this._fin.y=290,this._bg.addChild(this._fin),this._playButton=new p3.Button(this._assetManager.getTexture("btn_play"),this._assetManager.getTexture("btn_play_over")),this._playButton.x=Common.STAGE_WIDTH/2,this._playButton.y=Common.STAGE_HEIGHT-140,this._playButton.signals.down.addOnce(this.playClicked,this),this._playButton.signals.over.add(this.buttonOver,this),this._playButton.scale=new PIXI.Point(0,0),this._playButton.animate=!1,this.addChild(this._playButton),this._atLogo=new PIXI.Sprite(this._assetManager.getTexture("ui_splash_logo")),this._atLogo.anchor=new PIXI.Point(1,1),this.addChild(this._atLogo),this._muteButton=new p3.MuteButton(this._assetManager.getTexture("btn_sound"),this._assetManager.getTexture("btn_mute"),this._assetManager.getTexture("btn_sound_over"),this._assetManager.getTexture("btn_mute_over")),this._muteButton.id="mute",this._muteButton.y=this._guiButtonTopMargin,this._muteButton.signals.over.add(this.buttonOver,this),this._muteButton.init(),this.addChild(this._muteButton),this._exitButton=new p3.Button(this._assetManager.getTexture("btn_exit_small"),this._assetManager.getTexture("btn_exit_over_small")),this._exitButton.y=this._guiButtonTopMargin,this._exitButton.signals.down.addOnce(this.exitClicked,this),this._exitButton.signals.over.add(this.buttonOver,this),this.addChild(this._exitButton),this._exitButton.visible=!1,SoundSFX.play("music_bass_loop_bg",{loop:!0}),SoundSFX.play("sfx_8bit_backgroundloop_00",{loop:!0})},SplashScreen.prototype.update=function(){},SplashScreen.prototype.resize=function(){SimpleScreen.prototype.resize.call(this),this._atLogo.x=this._rightEdge-30,this._atLogo.y=Common.STAGE_HEIGHT-30,this._muteButton.x=this._getFirstButtonPositionRight(),this._exitButton.x=this._getFirstButtonPositionLeft()},SplashScreen.prototype.dispose=function(){SoundSFX.stop("music_bass_loop_bg"),SoundSFX.stop("sfx_8bit_backgroundloop_00")},SplashScreen.prototype.animateIn=function(callback,scope){SimpleScreen.prototype.animateIn.call(this);var tl=new TimelineMax;tl.to(this._bg.scale,.3,{delay:.5,x:1.5,y:1.5}),tl.to(this._bg,1.5,{rotation:10*PIXI.DEG_TO_RAD,ease:Elastic.easeOut},.5),tl.to(this._bg.scale,.1,{x:1.6,y:1.6,repeat:4,yoyo:!0,ease:Sine.easeInOut},.7),tl.to(this._bg,.3,{rotation:0,ease:Back.easeOut},1.6),tl.to(this._bg.scale,.3,{x:1,y:1,ease:Sine.easeInOut},1.6),tl.to(this._radial.scale,.3,{x:1,y:1},.4),tl.to(this._radial.scale,.1,{x:1.1,y:1.1,yoyo:!0,repeat:5,ease:Sine.easeInOut},.6),tl.to(this._radial.scale,.3,{x:1,y:1,ease:Sine.easeOut},1),tl.to(this._bolts.scale,1.2,{x:1,y:1,ease:Elastic.easeOut},.7),tl.to(this._blast1.scale,.3,{x:1,y:1,ease:Expo.easeOut},1.8),tl.to(this._blast2.scale,.3,{x:1,y:1,ease:Expo.easeOut},2),tl.to(this._blast3.scale,.3,{x:1,y:1,ease:Expo.easeOut},2.2),tl.to(this._blast4.scale,.3,{x:1,y:1,ease:Expo.easeOut},2.3),tl.to(this._blast5.scale,.3,{x:1,y:1,ease:Expo.easeOut},2.5),tl.to(this._jake,.5,{x:230,ease:Sine.easeOut},1.9),tl.to(this._fin,.5,{x:-230,ease:Sine.easeOut},2),tl.to(this._titleBanner,1,{y:-250,ease:Sine.easeOut},1.4),tl.to(this._titleText,1,{y:-250,ease:Sine.easeOut},1.6),tl.to(this._playButton.scale,1.5,{x:1,ease:Elastic.easeOut},2.4),tl.to(this._playButton.scale,1.5,{y:1,ease:Elastic.easeOut},2.5),Common.animator.add(tl),Common.animator.add(TweenMax.to(this._titleBanner.anchor,1,{y:.6,ease:Sine.easeInOut,yoyo:!0,repeat:-1})),Common.animator.add(TweenMax.to(this._titleText.anchor,.8,{y:.58,ease:Sine.easeInOut,yoyo:!0,repeat:-1})),Common.animator.add(TweenMax.to(this._titleText.anchor,1.2,{startAt:{x:.49},x:.51,ease:Sine.easeInOut,yoyo:!0,repeat:-1}))},SplashScreen.prototype.animateOut=function(callback,scope){SimpleScreen.prototype.animateOut.call(this)},SplashScreen.prototype.playClicked=function(){this._playButton.signals.over.remove(this.buttonOver,this),this._playButton.signals.down.remove(this.playClicked,this),TweenMax.killTweensOf(this._playButton.scale),Common.animator.add(TweenMax.to(this._playButton.scale,.2,{x:.6,y:.6,ease:Sine.easeInOut,onComplete:function(){Common.animator.add(TweenMax.to(this._playButton.scale,1,{x:1,y:1,ease:Elastic.easeOut,onComplete:function(){this.signals.requestedNextScreen.dispatch()},onCompleteScope:this}))},onCompleteScope:this})),SoundSFX.play("sfx_button_play")},SplashScreen.prototype.buttonOver=function(){SoundSFX.play("sfx_btn_rollover_00")},SplashScreen.prototype.exitClicked=function(){var link=this._assetManager.getJSON("config").home_link;window.open(link)}},{"../Common":2,"../general/SoundSFX":15,"./SimpleScreen":25}],27:[function(require,module,exports){function ScrollerEngine(screenFocusPoint,viewBoundary,activeBoundary){this.signals={},this.signals.collisionFired=new signals.Signal,this._screenFocusPoint=screenFocusPoint,this._view=screenFocusPoint.clone(),this._viewBoundary=viewBoundary,this._activeBoundary=activeBoundary,this._camera=null,this._layers=null,this._loopingRanges=null,this._collisions=null,PIXI.Container.call(this)}require("../Common"),require("./ScrollerObject");module.exports=ScrollerEngine,ScrollerEngine.prototype=Object.create(PIXI.Container.prototype),ScrollerEngine.prototype.constructor=ScrollerEngine,ScrollerEngine.prototype.init=function(){this._camera=new p3.Camera(this._view,!0),this._layers={},this._loopingRanges=[],this._collisions=[]},ScrollerEngine.prototype.update=function(){for(var i in this._layers)for(var cont=this._layers[i].container,j=0;j<this._layers[i].objects.length;j++){var obj=this._layers[i].objects[j];if(obj.update(),obj.removeIfOutsideBoundary&&(cont.x+obj.x+obj.areaRect.x+obj.areaRect.width<this._screenFocusPoint.x+this._activeBoundary.x||cont.y+obj.y+obj.areaRect.y+obj.areaRect.width<this._screenFocusPoint.y+this._activeBoundary.y||cont.x+obj.x>this._screenFocusPoint.x+this._activeBoundary.x+this._activeBoundary.width||cont.y+obj.y>this._screenFocusPoint.y+this._activeBoundary.y+this._activeBoundary.height)&&this.removeObjectFromLayer(obj,i),obj.removeMe&&this.removeObjectFromLayer(obj,i),obj.persistentX&&(obj.x=this._screenFocusPoint.x+obj.persistentX-cont.x),obj.persistentRectangle){var objX=cont.x+obj.x+obj.areaRect.x,objY=cont.y+obj.y+obj.areaRect.y,objXEdge=cont.x+obj.x+obj.areaRect.x+obj.areaRect.width,objYEdge=cont.y+obj.y+obj.areaRect.y+obj.areaRect.height,leftLimit=this._screenFocusPoint.x+obj.persistentRectangle.x,rightLimit=leftLimit+obj.persistentRectangle.width,upperLimit=this._screenFocusPoint.y+obj.persistentRectangle.y,lowerLimit=upperLimit+obj.persistentRectangle.height;leftLimit>objX&&obj.xSpeed<=0&&(obj.x=obj.x+(leftLimit-objX)*obj.persistentRectangleExitEase,obj.onExitPersistentRectangle("left")),upperLimit>objY&&obj.ySpeed<=0&&(obj.y=obj.y+(upperLimit-objY)*obj.persistentRectangleExitEase,obj.onExitPersistentRectangle("upper")),objXEdge>rightLimit&&obj.xSpeed>=0&&(obj.x=obj.x-(objXEdge-rightLimit)*obj.persistentRectangleExitEase,obj.onExitPersistentRectangle("right")),objYEdge>lowerLimit&&obj.xSpeed>=0&&(obj.y=obj.y-(objYEdge-lowerLimit)*obj.persistentRectangleExitEase,obj.onExitPersistentRectangle("lower"))}for(var c=0;c<this._collisions.length;c++)2==this._collisions[c].length&&this._collisions[c][0]==obj.type&&this._checkForCollisions(obj,cont,this._collisions[c][1])}for(var i=0;i<this._loopingRanges.length;i++)for(var newObjects=this._loopingRanges[i].update(this._screenFocusPoint,this._viewBoundary,this._layers[this._loopingRanges[i].layer].container),j=0;j<newObjects.length;j++)newObjects[j].obj.areaRect=new PIXI.Rectangle(newObjects[j].areaRect.x,newObjects[j].areaRect.y,newObjects[j].areaRect.width,newObjects[j].areaRect.height),this.addObjectToLayer(newObjects[j].obj,this._loopingRanges[i].layer,newObjects[j].offset.x,newObjects[j].offset.y)},ScrollerEngine.prototype.addLayer=function(name,parallax){parallax=parallax||new PIXI.Point(1,1);var container=new PIXI.Container;this.addChild(container),this._layers[name]={container:container,objects:[],parallax:parallax},this._camera.addLayer(name,container,parallax)},ScrollerEngine.prototype.addObjectToLayer=function(scrollerObject,layerName,xPosition,yPosition){this._layers[layerName].container.addChild(scrollerObject),xPosition&&(scrollerObject.x=xPosition),yPosition&&(scrollerObject.y=yPosition),this._layers[layerName].objects.push(scrollerObject)},ScrollerEngine.prototype.removeObjectFromLayer=function(scrollerObject,layerName){var placeInArray;if(null==layerName)for(var i in this._layers){placeInArray=this._layers[i].objects.indexOf(scrollerObject),layerName=i;break}this._layers[layerName].container.removeChild(scrollerObject),null==placeInArray&&(placeInArray=this._layers[layerName].objects.indexOf(scrollerObject)),placeInArray>-1&&this._layers[layerName].objects.splice(placeInArray,1);for(var i=0;i<this._loopingRanges.length;i++)if(layerName==this._loopingRanges[i].layer){this._loopingRanges[i].objectRemoved(scrollerObject);break}scrollerObject.dispose()},ScrollerEngine.prototype.addLoopingRangeToLayer=function(loop,layerName,originX,originY){loop.layer=layerName;var arr=loop.generate(this._viewBoundary.width,this._viewBoundary.height,originX,originY);this._loopingRanges.push(loop);var d="x",e="width",currentX=this._viewBoundary.x*this._layers[layerName].parallax.x,currentY=originY;loop.scrollY&&(d="y",e="height",currentX=originX,currentY=this._activeBoundary.y*this._layers[layerName].parallax.y);for(var i=0;i<arr.length;i++)arr[i].obj.areaRect=arr[i].areaRect,this.addObjectToLayer(arr[i].obj,layerName,currentX+(loop.scrollY?arr[i].offset.x:0),currentY+(loop.scrollX?arr[i].offset.y:0)),loop.scrollX?currentX+=arr[i].areaRect.x+arr[i].areaRect.width+arr[i].offset.x:loop.scrollY&&(currentY+=arr[i].areaRect.y+arr[i].areaRect.height+arr[i].offset.y)},ScrollerEngine.prototype.addCollisionDetector=function(object1Type,object2Type){this._collisions.push([object1Type,object2Type])},ScrollerEngine.prototype.pause=function(){for(var i in this._layers)for(var j=0;j<this._layers[i].objects.length;j++){var obj=this._layers[i].objects[j];obj.pause()}},ScrollerEngine.prototype.resume=function(){for(var i in this._layers)for(var j=0;j<this._layers[i].objects.length;j++){var obj=this._layers[i].objects[j];obj.resume()}},ScrollerEngine.prototype.getLayerContainer=function(layerName){return this._layers[layerName].container},ScrollerEngine.prototype.getLayerParallax=function(layerName){return this._layers[layerName].parallax},ScrollerEngine.prototype._checkForCollisions=function(obj1,obj1Cont,collidingType){for(var i in this._layers)for(var obj2Cont=this._layers[i].container,j=0;j<this._layers[i].objects.length;j++)if(this._layers[i].objects[j].type==collidingType){var obj2=this._layers[i].objects[j],r1Left=obj1Cont.x+obj1.x+obj1.collisionRect.x,r2Left=obj2Cont.x+obj2.x+obj2.collisionRect.x,r1Right=r1Left+obj1.collisionRect.width,r2Right=r2Left+obj2.collisionRect.width,r1Top=obj1Cont.y+obj1.y+obj1.collisionRect.y,r2Top=obj2Cont.y+obj2.y+obj2.collisionRect.y,r1Bottom=r1Top+obj1.collisionRect.height,r2Bottom=r2Top+obj2.collisionRect.height,collision=!0;r2Top>r1Bottom&&(collision=!1),r1Top>r2Bottom&&(collision=!1),r2Left>r1Right&&(collision=!1),r1Left>r2Right&&(collision=!1),collision&&this.signals.collisionFired.dispatch(obj1,obj2)}},Object.defineProperty(ScrollerEngine.prototype,"viewX",{get:function(){return this._view.x},set:function(value){return this._view.x=value,this._camera.update(),this._view.x}}),Object.defineProperty(ScrollerEngine.prototype,"viewY",{get:function(){return this._view.y},set:function(value){return this._view.y=value,this._camera.update(),this._view.y}}),Object.defineProperty(ScrollerEngine.prototype,"activeBoundary",{get:function(){return this._activeBoundary},set:function(value){return this._activeBoundary=value,this._activeBoundary}}),Object.defineProperty(ScrollerEngine.prototype,"viewBoundary",{get:function(){return this._viewBoundary},set:function(value){return this._viewBoundary=value,this._viewBoundary}}),Object.defineProperty(ScrollerEngine.prototype,"screenFocusPoint",{get:function(){return this._screenFocusPoint},set:function(value){return this._screenFocusPoint=value,this._screenFocusPoint}})},{"../Common":2,"./ScrollerObject":29}],28:[function(require,module,exports){function ScrollerLoopingRange(objects,scrollX,scrollY){this._objectsData=objects,this._objects=null,this._objectPools=null,this._objectsPlaced=-1,this._originX=0,this._originY=0,this._scrollX=scrollX,this._scrollY=scrollY,this.layer=null,this.init()}require("../Common");module.exports=ScrollerLoopingRange,ScrollerLoopingRange.prototype=Object.create(PIXI.Container.prototype),ScrollerLoopingRange.prototype.constructor=ScrollerLoopingRange,ScrollerLoopingRange.prototype.init=function(){this._objectPools=[],this._objects=[]},ScrollerLoopingRange.prototype.generate=function(viewWidth,viewHeight,originX,originY){this.scrollY&&(this._originX=originX),this.scrollX&&(this._originY=originY);var d="x",e="width",m=viewWidth;this._scrollY&&(d="y",e="height",m=viewHeight);for(var total=0,i=0;i<this._objectsData.length;i++)total+=this._objectsData[i].areaRect[d]+this._objectsData[i].areaRect[e]+this._objectsData[i].offset[d];for(var objectAmounts=[],i=0;i<Math.ceil(viewWidth/total);i++)for(var j=0;j<this._objectsData.length;j++)void 0==objectAmounts[j]&&(objectAmounts[j]=0),objectAmounts[j]++;for(var i=0;i<this._objectsData.length;i++)this._objectPools[i]=new p3.ObjectPool(this._objectsData[i].base,objectAmounts[i],this._objectsData[i].args);for(var returnArray=[],i=0;i<Math.ceil(viewWidth/total);i++)for(var j=0;j<this._objectsData.length;j++){var obj=this._objectPools[j].create();null==obj&&(this._objectPools[j].expand(2),obj=this._objectPools[j].create()),this._objects.push(obj),returnArray.push({obj:obj,areaRect:this._objectsData[j].areaRect,offset:this._objectsData[j].offset}),this._objectsPlaced++,obj.loopingRangeNumber=this._objectsPlaced}return returnArray},ScrollerLoopingRange.prototype.update=function(focusPoint,viewBoundary,layerContainer){var nextObjectNumber=(this._objectsPlaced+1)%this._objectsData.length,nextObjectData=this._objectsData[nextObjectNumber],lastObject=this._objects[this._objects.length-1],d="x",e="width",o="y";this._scrollY&&(d="y",e="height",o="x");var returnArray=[],newPlacement=lastObject[d]+lastObject.areaRect[d]+lastObject.areaRect[e]+nextObjectData.offset[d];if(layerContainer[d]+newPlacement<focusPoint[d]+viewBoundary[d]+viewBoundary[e]){var obj=this._objectPools[nextObjectNumber].create();null==obj&&(this._objectPools[nextObjectNumber].expand(2),obj=this._objectPools[nextObjectNumber].create());var offset=new PIXI.Point;offset[d]=newPlacement,offset[o]=nextObjectData.offset[o]+this["_origin"+[o.toUpperCase()]],returnArray.push({obj:obj,areaRect:nextObjectData.areaRect,offset:offset}),this._objectsPlaced++,obj.loopingRangeNumber=this._objectsPlaced,this._objects.push(obj)}return returnArray},ScrollerLoopingRange.prototype.objectRemoved=function(obj){var index=this._objects.indexOf(obj);index>=0&&(this._objectPools[obj.loopingRangeNumber%this._objectsData.length].free(obj),this._objects.splice(index,1))},Object.defineProperty(ScrollerLoopingRange.prototype,"scrollX",{get:function(){return this._scrollX}})},{"../Common":2}],29:[function(require,module,exports){function ScrollerObject(type,removeIfOutsideBoundary){this._assetManager=p3.AssetManager.instance,this.signals={},this.signals.disposed=new signals.Signal,this._type=type,this.collisionRect=null,this.areaRect=null,this.loopingRangeNumber=null,this.removeIfOutsideBoundary=null==removeIfOutsideBoundary?!0:removeIfOutsideBoundary,this.xSpeed=0,this.ySpeed=0,this.persistentX=null,this.persistentY=null,this.persistentRectangle=null,this.persistentRectangleExitEase=1,this.removeMe=!1,PIXI.Container.call(this),this.init()}require("../Common");module.exports=ScrollerObject,ScrollerObject.prototype=Object.create(PIXI.Container.prototype),ScrollerObject.prototype.constructor=ScrollerObject,ScrollerObject.prototype.init=function(){},ScrollerObject.prototype.update=function(){this.x+=this.xSpeed,this.y+=this.ySpeed},ScrollerObject.prototype.reset=function(){this.x=0,this.y=0,this.removeMe=!1},ScrollerObject.prototype.dispose=function(){this.signals.disposed.dispatch(this)},ScrollerObject.prototype.pause=function(){},ScrollerObject.prototype.resume=function(){},ScrollerObject.prototype.drawCollisionRect=function(){var graphic=new PIXI.Graphics;this.addChild(graphic),graphic.lineStyle(1,16191773),graphic.drawRect(this.collisionRect.x,this.collisionRect.y,this.collisionRect.width,this.collisionRect.height)},ScrollerObject.prototype.onExitPersistentRectangle=function(side){},Object.defineProperty(ScrollerObject.prototype,"type",{get:function(){return this._type}})},{"../Common":2}],30:[function(require,module,exports){function ScrollerObjectGenerator(pools){this.signals={},this.signals.generateObjects=new signals.Signal,this.signals.objectDisposed=new signals.Signal,this._poolData=pools,this._pools=null,this._patterns=null,this._currentCount=0,this._countTarget=null,this._minFrequency=null,this._maxFrequency=null,PIXI.Container.call(this),this.init()}require("../Common"),require("./ScrollerObject");module.exports=ScrollerObjectGenerator,ScrollerObjectGenerator.prototype=Object.create(PIXI.Container.prototype),ScrollerObjectGenerator.prototype.constructor=ScrollerObjectGenerator,ScrollerObjectGenerator.prototype.init=function(){this._pools={};for(var i=0;i<this._poolData.length;i++)this._pools[this._poolData[i].id]=new p3.ObjectPool(this._poolData[i].base,2,this._poolData[i].args);this._patterns={}},ScrollerObjectGenerator.prototype.update=function(){null!=this._countTarget&&(this._currentCount++,this._currentCount>=this._countTarget&&(this.generate(),this.setRandomFrequency()))},ScrollerObjectGenerator.prototype.addPattern=function(objs,patternId){void 0==this._patterns[patternId]&&(this._patterns[patternId]=objs)},ScrollerObjectGenerator.prototype.removePattern=function(patternId){delete this._patterns[patternId]},ScrollerObjectGenerator.prototype.setFrequencies=function(min,max,set){this._minFrequency=min,this._maxFrequency=max,void 0==set&&(set=!0),set&&this.setRandomFrequency()},ScrollerObjectGenerator.prototype.setRandomFrequency=function(){this._countTarget=Math.round(this._minFrequency+Math.random()*(this._maxFrequency-this._minFrequency)),this._currentCount=0},ScrollerObjectGenerator.prototype.setSpecificFrequency=function(freq){this._countTarget=freq},ScrollerObjectGenerator.prototype.generate=function(){var patterns=[];for(var i in this._patterns)patterns.push(i);var chosenPattern=null;if(0==patterns.length)return void console.log("No pattern set!");chosenPattern=this._patterns[patterns[Math.floor(Math.random()*patterns.length)]];for(var returnArray=[],i=0;i<chosenPattern.length;i++){var pool=this._pools[chosenPattern[i].poolId],obj=pool.create();null==obj&&(pool.expand(2),obj=pool.create()),obj.signals.disposed.add(this.onObjectDisposed,this),returnArray.push({obj:obj,offset:{x:chosenPattern[i].x,y:chosenPattern[i].y}})}this.signals.generateObjects.dispatch(returnArray)},ScrollerObjectGenerator.prototype.onObjectDisposed=function(obj){obj.signals.disposed.remove(this.onObjectDisposed,this),this.signals.objectDisposed.dispatch(obj);for(var i in this._pools)this._pools[i]._used.indexOf(obj)>-1&&this._pools[i].free(obj)}},{"../Common":2,"./ScrollerObject":29}],31:[function(require,module,exports){function ScrollerObjectImage(type,removeIfOutsideBoundary,texture,anchor){this._texture=texture,this._anchor=anchor||new PIXI.Point(0,0),this._image=null,ScrollerObject.call(this,type,removeIfOutsideBoundary),this.create(),this.init()}var ScrollerObject=(require("../Common"),require("./ScrollerObject"));module.exports=ScrollerObjectImage,ScrollerObjectImage.prototype=Object.create(ScrollerObject.prototype),ScrollerObjectImage.prototype.constructor=ScrollerObjectImage,ScrollerObjectImage.prototype.create=function(){this._image=new PIXI.Sprite(this._texture),this._image.anchor=this._anchor,this.addChild(this._image)},ScrollerObjectImage.prototype.init=function(){},ScrollerObjectImage.prototype.reset=function(){ScrollerObject.prototype.reset.call(this)}},{"../Common":2,"./ScrollerObject":29}]},{},[3])(3)});
