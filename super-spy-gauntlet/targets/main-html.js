/** Cooked with Flambe, https://getflambe.com */
'use strict';(function(){function z(a,b){function c(){}c.prototype=a;var d=new c,f;for(f in b)d[f]=b[f];b.toString!==Object.prototype.toString&&(d.toString=b.toString);return d}function wf(a){return a instanceof Array?function(){return Q.iter(a)}:"function"==typeof a.iterator?E(a,a.iterator):a.iterator}function E(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=Ih++);var c;null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__];null==c&&(c=function(){return c.method.apply(c.scope,
arguments)},c.scope=a,c.method=b,a.hx__closures__[b.__id__]=c);return c}var i={},k=function(){return U.__string_rec(this,"")},Lc=function(a,b){b=b.split("u").join("");this.r=RegExp(a,b)};i.EReg=Lc;Lc.__name__=["EReg"];Lc.prototype={match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)return this.r.m[a];throw"EReg::matched";},matchedPos:function(){if(null==this.r.m)throw"No string matched";
return{pos:this.r.m.index,len:this.r.m[0].length}},__class__:Lc};var Q=function(){};i.HxOverrides=Q;Q.__name__=["HxOverrides"];Q.dateStr=function(a){var b=a.getMonth()+1,c=a.getDate(),d=a.getHours(),f=a.getMinutes(),vb=a.getSeconds();return a.getFullYear()+"-"+(10>b?"0"+b:""+b)+"-"+(10>c?"0"+c:""+c)+" "+(10>d?"0"+d:""+d)+":"+(10>f?"0"+f:""+f)+":"+(10>vb?"0"+vb:""+vb)};Q.strDate=function(a){switch(a.length){case 8:var a=a.split(":"),b=new Date;b.setTime(0);b.setUTCHours(a[0]);b.setUTCMinutes(a[1]);
b.setUTCSeconds(a[2]);return b;case 10:return a=a.split("-"),new Date(a[0],a[1]-1,a[2],0,0,0);case 19:return b=a.split(" "),a=b[0].split("-"),b=b[1].split(":"),new Date(a[0],a[1]-1,a[2],b[0],b[1],b[2]);default:throw"Invalid date format : "+a;}};Q.cca=function(a,b){var c=a.charCodeAt(b);return c!=c?void 0:c};Q.substr=function(a,b,c){if(null!=b&&0!=b&&null!=c&&0>c)return"";null==c&&(c=a.length);0>b?(b=a.length+b,0>b&&(b=0)):0>c&&(c=a.length+c-b);return a.substr(b,c)};Q.remove=function(a,b){var c=a.indexOf(b);
if(-1==c)return!1;a.splice(c,1);return!0};Q.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var oc=function(){};i.Lambda=oc;oc.__name__=["Lambda"];oc.array=function(a){for(var b=[],a=wf(a)();a.hasNext();){var c=a.next();b.push(c)}return b};oc.exists=function(a,b){for(var c=wf(a)();c.hasNext();){var d=c.next();if(b(d))return!0}return!1};oc.filter=function(a,b){for(var c=new pc,d=wf(a)();d.hasNext();){var f=d.next();
b(f)&&c.add(f)}return c};oc.count=function(a,b){var c=0;if(null==b)for(var d=wf(a)();d.hasNext();)d.next(),c++;else for(d=wf(a)();d.hasNext();){var f=d.next();b(f)&&c++}return c};var pc=function(){this.length=0};i.List=pc;pc.__name__=["List"];pc.prototype={add:function(a){a=[a];null==this.h?this.h=a:this.q[1]=a;this.q=a;this.length++},push:function(a){this.h=a=[a,this.h];null==this.q&&(this.q=a);this.length++},iterator:function(){return{h:this.h,hasNext:function(){return null!=this.h},next:function(){if(null==
this.h)return null;var a=this.h[0];this.h=this.h[1];return a}}},__class__:pc};var Mc=function(){};i.Main=Mc;Mc.__name__=["Main"];Mc.main=function(){A.init();qb.initInstance();x.initInstance();G.initInstance();m.initInstance();H.initInstance();C.initInstance();ia.theInit();m.getInstance().loadAssetPack(e.ASSET_PACKAGE_CONFIG,null,Mc.onLoadConfigAssets)};Mc.onLoadConfigAssets=function(){x.getInstance().initGlobalConfigData();C.getInstance().initLocalizationData();m.getInstance().loadAssetPack(e.ASSET_PACKAGE_LOADING,
null,Mc.onLoadInitialAssets)};Mc.onLoadInitialAssets=function(){G.getInstance().changeScene(ma.NDI_TYPE_SCENE_RUNNER)};var xf=function(){};i.IMap=xf;xf.__name__=["IMap"];Math.__name__=["Math"];var Ea=function(){};i.Reflect=Ea;Ea.__name__=["Reflect"];Ea.field=function(a,b){try{return a[b]}catch(c){return null}};Ea.setField=function(a,b,c){a[b]=c};Ea.fields=function(a){var b=[];if(null!=a){var c=Object.prototype.hasOwnProperty,d;for(d in a)"__id__"!=d&&"hx__closures__"!=d&&c.call(a,d)&&b.push(d)}return b};
Ea.isFunction=function(a){return"function"==typeof a&&!(a.__name__||a.__ename__)};Ea.deleteField=function(a,b){if(!Object.prototype.hasOwnProperty.call(a,b))return!1;delete a[b];return!0};var s=function(){};i.Std=s;s.__name__=["Std"];s.is=function(a,b){return U.__instanceof(a,b)};s.instance=function(a,b){return a instanceof b?a:null};s.string=function(a){return U.__string_rec(a,"")};s["int"]=function(a){return a|0};s.parseInt=function(a){var b=parseInt(a,10);if(0==b&&(120==Q.cca(a,1)||88==Q.cca(a,
1)))b=parseInt(a);return isNaN(b)?null:b};s.parseFloat=function(a){return parseFloat(a)};var bc=function(){this.b=""};i.StringBuf=bc;bc.__name__=["StringBuf"];bc.prototype={add:function(a){this.b+=s.string(a)},addSub:function(a,b,c){this.b=null==c?this.b+Q.substr(a,b,null):this.b+Q.substr(a,b,c)},__class__:bc};var lb=function(){};i.StringTools=lb;lb.__name__=["StringTools"];lb.startsWith=function(a,b){return a.length>=b.length&&Q.substr(a,0,b.length)==b};lb.fastCodeAt=function(a,b){return a.charCodeAt(b)};
var L=i.ValueType={__ename__:["ValueType"],__constructs__:"TNull,TInt,TFloat,TBool,TObject,TFunction,TClass,TEnum,TUnknown".split(",")};L.TNull=["TNull",0];L.TNull.toString=k;L.TNull.__enum__=L;L.TInt=["TInt",1];L.TInt.toString=k;L.TInt.__enum__=L;L.TFloat=["TFloat",2];L.TFloat.toString=k;L.TFloat.__enum__=L;L.TBool=["TBool",3];L.TBool.toString=k;L.TBool.__enum__=L;L.TObject=["TObject",4];L.TObject.toString=k;L.TObject.__enum__=L;L.TFunction=["TFunction",5];L.TFunction.toString=k;L.TFunction.__enum__=
L;L.TClass=function(a){a=["TClass",6,a];a.__enum__=L;a.toString=k;return a};L.TEnum=function(a){a=["TEnum",7,a];a.__enum__=L;a.toString=k;return a};L.TUnknown=["TUnknown",8];L.TUnknown.toString=k;L.TUnknown.__enum__=L;L.__empty_constructs__=[L.TNull,L.TInt,L.TFloat,L.TBool,L.TObject,L.TFunction,L.TUnknown];var na=function(){};i.Type=na;na.__name__=["Type"];na.getClass=function(a){return null==a?null:a instanceof Array&&null==a.__enum__?Array:a.__class__};na.getClassName=function(a){return a.__name__.join(".")};
na.getEnumName=function(a){return a.__ename__.join(".")};na.resolveClass=function(a){a=i[a];return null==a||!a.__name__?null:a};na.resolveEnum=function(a){a=i[a];return null==a||!a.__ename__?null:a};na.createEmptyInstance=function(a){function b(){}b.prototype=a.prototype;return new b};na.createEnum=function(a,b,c){var d=Ea.field(a,b);if(null==d)throw"No such constructor "+b;if(Ea.isFunction(d)){if(null==c)throw"Constructor "+b+" need parameters";return d.apply(a,c)}if(null!=c&&0!=c.length)throw"Constructor "+
b+" does not need parameters";return d};na.getEnumConstructs=function(a){return a.__constructs__.slice()};na["typeof"]=function(a){switch(typeof a){case "boolean":return L.TBool;case "string":return L.TClass(String);case "number":return Math.ceil(a)==a%2147483648?L.TInt:L.TFloat;case "object":if(null==a)return L.TNull;var b=a.__enum__;if(null!=b)return L.TEnum(b);a=a instanceof Array&&null==a.__enum__?Array:a.__class__;return null!=a?L.TClass(a):L.TObject;case "function":return a.__name__||a.__ename__?
L.TObject:L.TFunction;case "undefined":return L.TNull;default:return L.TUnknown}};na.allEnums=function(a){return a.__empty_constructs__};(i.XmlType={__ename__:["XmlType"],__constructs__:[]}).__empty_constructs__=[];var N=function(){};i.Xml=N;N.__name__=["Xml"];N.parse=function(a){return qc.parse(a)};N.createElement=function(a){var b=new N;b.nodeType=N.Element;b._children=[];b._attributes=new ea;b.set_nodeName(a);return b};N.createPCData=function(a){var b=new N;b.nodeType=N.PCData;b.set_nodeValue(a);
return b};N.createCData=function(a){var b=new N;b.nodeType=N.CData;b.set_nodeValue(a);return b};N.createComment=function(a){var b=new N;b.nodeType=N.Comment;b.set_nodeValue(a);return b};N.createDocType=function(a){var b=new N;b.nodeType=N.DocType;b.set_nodeValue(a);return b};N.createProcessingInstruction=function(a){var b=new N;b.nodeType=N.ProcessingInstruction;b.set_nodeValue(a);return b};N.createDocument=function(){var a=new N;a.nodeType=N.Document;a._children=[];return a};N.prototype={get_nodeName:function(){if(this.nodeType!=
N.Element)throw"bad nodeType";return this._nodeName},set_nodeName:function(a){if(this.nodeType!=N.Element)throw"bad nodeType";return this._nodeName=a},set_nodeValue:function(a){if(this.nodeType==N.Element||this.nodeType==N.Document)throw"bad nodeType";return this._nodeValue=a},set:function(a,b){if(this.nodeType!=N.Element)throw"bad nodeType";this._attributes.set(a,b)},exists:function(a){if(this.nodeType!=N.Element)throw"bad nodeType";return this._attributes.exists(a)},elementsNamed:function(a){if(null==
this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){for(var b=this.cur,c=this.x.length;b<c;){var d=this.x[b];if(d.nodeType==N.Element&&d._nodeName==a)break;b++}this.cur=b;return b<c},next:function(){for(var b=this.cur,c=this.x.length;b<c;){var d=this.x[b];b++;if(d.nodeType==N.Element&&d._nodeName==a)return this.cur=b,d}return null}}},firstElement:function(){if(null==this._children)throw"bad nodetype";for(var a=0,b=this._children.length;a<b;){var c=this._children[a];
if(c.nodeType==N.Element)return c;a++}return null},addChild:function(a){if(null==this._children)throw"bad nodetype";null!=a._parent&&Q.remove(a._parent._children,a);a._parent=this;this._children.push(a)},__class__:N};var Bh=function(){};i["data.NDiLocalizationData"]=Bh;Bh.__name__=["data","NDiLocalizationData"];var yf=function(){};i["factories.NDiSceneFactory"]=yf;yf.__name__=["factories","NDiSceneFactory"];yf.createScene=function(a){var b=null;a==ma.NDI_TYPE_SCENE_TEST?b=new nd:a==ma.NDI_TYPE_SCENE_RUNNER&&
(b=new Ib);null!=b&&(b.type=a);return b};var tb=function(){};i["flambe.util.Disposable"]=tb;tb.__name__=["flambe","util","Disposable"];tb.prototype={__class__:tb};var u=function(){this._flags=0;this.owner=this.next=null};i["flambe.Component"]=u;u.__name__=["flambe","Component"];u.__interfaces__=[tb];u.prototype={onAdded:function(){},onRemoved:function(){},onStart:function(){},onStop:function(){},onUpdate:function(){},dispose:function(){null!=this.owner&&this.owner.remove(this)},get_name:function(){return null},
__class__:u};var p=function(){this.parent=this.firstChild=this.next=this.firstComponent=null;this._compMap={}};i["flambe.Entity"]=p;p.__name__=["flambe","Entity"];p.__interfaces__=[tb];p.prototype={add:function(a){null!=a.owner&&a.owner.remove(a);var b=a.get_name(),c=this._compMap[b];null!=c&&this.remove(c);this._compMap[b]=a;b=null;for(c=this.firstComponent;null!=c;)b=c,c=c.next;null!=b?b.next=a:this.firstComponent=a;a.owner=this;a.next=null;a.onAdded();return this},remove:function(a){for(var b=
null,c=this.firstComponent;null!=c;){var d=c.next;if(c==a)return null==b?this.firstComponent=d:(b.owner=this,b.next=d),delete this._compMap[c.get_name()],0!=(c._flags&1)&&(c.onStop(),c._flags&=-2),c.onRemoved(),c.owner=null,c.next=null,!0;b=c;c=d}return!1},addChild:function(a,b){null==b&&(b=!0);null!=a.parent&&a.parent.removeChild(a);a.parent=this;if(b){for(var c=null,d=this.firstChild;null!=d;)c=d,d=d.next;null!=c?c.next=a:this.firstChild=a}else a.next=this.firstChild,this.firstChild=a;return this},
removeChild:function(a){for(var b=null,c=this.firstChild;null!=c;){var d=c.next;if(c==a){null==b?this.firstChild=d:b.next=d;c.parent=null;c.next=null;break}b=c;c=d}},disposeChildren:function(){for(;null!=this.firstChild;)this.firstChild.dispose()},dispose:function(){for(null!=this.parent&&this.parent.removeChild(this);null!=this.firstComponent;)this.firstComponent.dispose();this.disposeChildren()},__class__:p};var Lg=function(){};i["flambe.util.PackageLog"]=Lg;Lg.__name__=["flambe","util","PackageLog"];
var zf=function(){};i["flambe.platform.Platform"]=zf;zf.__name__=["flambe","platform","Platform"];zf.prototype={__class__:zf};var rc=function(){};i["flambe.platform.html.HtmlPlatform"]=rc;rc.__name__=["flambe","platform","html","HtmlPlatform"];rc.__interfaces__=[zf];rc.prototype={init:function(){var a=this;K.fixAndroidMath();var b=null;try{b=window.flambe.canvas}catch(c){}b.setAttribute("tabindex","0");b.style.outlineStyle="none";b.style.webkitTapHighlightColor="transparent";this._stage=new ne(b);
this._pointer=new Pa;this._mouse=new Dd(this._pointer,b);this._renderer=this.createRenderer(b);this.mainLoop=new od;this.musicPlaying=!1;this._canvas=b;this._container=b.parentElement;this._container.style.overflow="hidden";this._container.style.position="relative";this._container.style.msTouchAction="none";var d=0,f=function(c){if(!(1E3>c.timeStamp-d)){var f=b.getBoundingClientRect(),vb=a.getX(c,f),f=a.getY(c,f);switch(c.type){case "mousedown":c.target==b&&(c.preventDefault(),a._mouse.submitDown(vb,
f,c.button),b.focus());break;case "mousemove":a._mouse.submitMove(vb,f);break;case "mouseup":a._mouse.submitUp(vb,f,c.button);break;case "mousewheel":case "DOMMouseScroll":a._mouse.submitScroll(vb,f,"mousewheel"==c.type?c.wheelDelta/40:-c.detail)&&c.preventDefault()}}};window.addEventListener("mousedown",f,!1);window.addEventListener("mousemove",f,!1);window.addEventListener("mouseup",f,!1);b.addEventListener("mousewheel",f,!1);b.addEventListener("DOMMouseScroll",f,!1);b.addEventListener("contextmenu",
function(a){a.preventDefault()},!1);var vb="undefined"!=typeof window.ontouchstart,f="msMaxTouchPoints"in window.navigator&&1<window.navigator.msMaxTouchPoints;if(vb||f){var g=new pd(this._pointer,vb?4:window.navigator.msMaxTouchPoints);this._touch=g;f=function(b){var c;c=vb?b.changedTouches:[b];var f=b.target.getBoundingClientRect();d=b.timeStamp;switch(b.type){case "touchstart":case "MSPointerDown":case "pointerdown":b.preventDefault();K.SHOULD_HIDE_MOBILE_BROWSER&&K.hideMobileBrowser();for(b=0;b<
c.length;){var e=c[b];++b;var h=a.getX(e,f),Af=a.getY(e,f);g.submitDown((vb?e.identifier:e.pointerId)|0,h,Af)}break;case "touchmove":case "MSPointerMove":case "pointermove":b.preventDefault();for(b=0;b<c.length;)e=c[b],++b,h=a.getX(e,f),Af=a.getY(e,f),g.submitMove((vb?e.identifier:e.pointerId)|0,h,Af);break;case "touchend":case "touchcancel":case "MSPointerUp":case "pointerup":for(b=0;b<c.length;)e=c[b],++b,h=a.getX(e,f),Af=a.getY(e,f),g.submitUp((vb?e.identifier:e.pointerId)|0,h,Af)}};vb?(b.addEventListener("touchstart",
f,!1),b.addEventListener("touchmove",f,!1),b.addEventListener("touchend",f,!1),b.addEventListener("touchcancel",f,!1)):(b.addEventListener("MSPointerDown",f,!1),b.addEventListener("MSPointerMove",f,!1),b.addEventListener("MSPointerUp",f,!1))}else this._touch=new oe;var e=window.onerror;window.onerror=function(a,b,c){A.uncaughtError.emit(a);return null!=e?e(a,b,c):!1};var h=K.loadExtension("hidden",window.document);null!=h.value?(f=function(){A.hidden.set__(Ea.field(window.document,h.field))},f(null),
window.document.addEventListener(h.prefix+"visibilitychange",f,!1)):(f=function(a){A.hidden.set__("pagehide"==a.type)},window.addEventListener("pageshow",f,!1),window.addEventListener("pagehide",f,!1));A.hidden.get_changed().connect(function(b){b||(a._skipFrame=!0)});this._skipFrame=!1;this._lastUpdate=Date.now();var i=K.loadExtension("requestAnimationFrame").value;if(null!=i){var l=window.performance,j=null!=l&&K.polyfill("now",l);j?this._lastUpdate=l.now():null;var k=null,k=function(c){a.update(j?
l.now():c);i(k,b)};i(k,b)}else window.setInterval(function(){a.update(Date.now())},16);Td.info("Initialized HTML platform",["renderer",this._renderer.get_type()])},loadAssetPack:function(a){return(new Y(this,a)).promise},getStorage:function(){if(null==this._storage){var a=pe.getLocalStorage();this._storage=null!=a?new qe(a):new ue}return this._storage},update:function(a){var b=(a-this._lastUpdate)/1E3;this._lastUpdate=a;A.hidden._value||(this._skipFrame?this._skipFrame=!1:(this.mainLoop.update(b),
this.mainLoop.render(this._renderer)))},getPointer:function(){return this._pointer},getKeyboard:function(){var a=this;if(null==this._keyboard){this._keyboard=new cb;var b=function(b){switch(b.type){case "keydown":a._keyboard.submitDown(b.keyCode)&&b.preventDefault();break;case "keyup":a._keyboard.submitUp(b.keyCode)}};this._canvas.addEventListener("keydown",b,!1);this._canvas.addEventListener("keyup",b,!1)}return this._keyboard},getExternal:function(){null==this._external&&(this._external=new ve);
return this._external},getRenderer:function(){return this._renderer},getX:function(a,b){return(a.clientX-b.left)*this._stage.get_width()/b.width},getY:function(a,b){return(a.clientY-b.top)*this._stage.get_height()/b.height},createRenderer:function(a){return new qd(a)},__class__:rc};var ya=function(a,b){this._value=a;this._changed=null!=b?new Ud(b):null};i["flambe.util.Value"]=ya;ya.__name__=["flambe","util","Value"];ya.prototype={watch:function(a){a(this._value,this._value);return this.get_changed().connect(a)},
get__:function(){return this._value},set__:function(a){var b=this._value;a!=b&&(this._value=a,null!=this._changed&&this._changed.emit(a,b));return a},get_changed:function(){null==this._changed&&(this._changed=new Ud);return this._changed},__class__:ya};var Ed=function(a,b){this._next=null;this._signal=a;this._listener=b;this.stayInList=!0};i["flambe.util.SignalConnection"]=Ed;Ed.__name__=["flambe","util","SignalConnection"];Ed.__interfaces__=[tb];Ed.prototype={once:function(){this.stayInList=!1;return this},
dispose:function(){null!=this._signal&&(this._signal.disconnect(this),this._signal=null)},__class__:Ed};var Ha=function(a){this._head=null!=a?new Ed(this,a):null;this._deferredTasks=null};i["flambe.util.SignalBase"]=Ha;Ha.__name__=["flambe","util","SignalBase"];Ha.prototype={connectImpl:function(a,b){var c=this,d=new Ed(this,a);this._head==Ha.DISPATCHING_SENTINEL?this.defer(function(){c.listAdd(d,b)}):this.listAdd(d,b);return d},disconnect:function(a){var b=this;this._head==Ha.DISPATCHING_SENTINEL?
this.defer(function(){b.listRemove(a)}):this.listRemove(a)},defer:function(a){for(var b=null,c=this._deferredTasks;null!=c;)b=c,c=c.next;a=new Bf(a);null!=b?b.next=a:this._deferredTasks=a},willEmit:function(){var a=this._head;this._head=Ha.DISPATCHING_SENTINEL;return a},didEmit:function(a){this._head=a;a=this._deferredTasks;for(this._deferredTasks=null;null!=a;)a.fn(),a=a.next},listAdd:function(a,b){if(b)a._next=this._head,this._head=a;else{for(var c=null,d=this._head;null!=d;)c=d,d=d._next;null!=
c?c._next=a:this._head=a}},listRemove:function(a){for(var b=null,c=this._head;null!=c;){if(c==a){a=c._next;null==b?this._head=a:b._next=a;break}b=c;c=c._next}},__class__:Ha};var Ud=function(a){Ha.call(this,a)};i["flambe.util.Signal2"]=Ud;Ud.__name__=["flambe","util","Signal2"];Ud.__super__=Ha;Ud.prototype=z(Ha.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(a,b){var c=this;this._head==Ha.DISPATCHING_SENTINEL?this.defer(function(){c.emitImpl(a,b)}):this.emitImpl(a,
b)},emitImpl:function(a,b){for(var c=this.willEmit(),d=c;null!=d;)d._listener(a,b),d.stayInList||d.dispose(),d=d._next;this.didEmit(c)},__class__:Ud});var oa=function(a){Ha.call(this,a)};i["flambe.util.Signal1"]=oa;oa.__name__=["flambe","util","Signal1"];oa.__super__=Ha;oa.prototype=z(Ha.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(a){var b=this;this._head==Ha.DISPATCHING_SENTINEL?this.defer(function(){b.emitImpl(a)}):this.emitImpl(a)},emitImpl:function(a){for(var b=
this.willEmit(),c=b;null!=c;)c._listener(a),c.stayInList||c.dispose(),c=c._next;this.didEmit(b)},__class__:oa});var pa=function(a,b){this._behavior=null;ya.call(this,a,b)};i["flambe.animation.AnimatedFloat"]=pa;pa.__name__=["flambe","animation","AnimatedFloat"];pa.__super__=ya;pa.prototype=z(ya.prototype,{set__:function(a){this._behavior=null;return ya.prototype.set__.call(this,a)},update:function(a){null!=this._behavior&&(ya.prototype.set__.call(this,this._behavior.update(a)),this._behavior.isComplete()&&
(this._behavior=null))},animateTo:function(a,b,c){this.set_behavior(new we(this._value,a,b,c))},set_behavior:function(a){this._behavior=a;this.update(0);return a},__class__:pa});var A=function(){};i["flambe.System"]=A;A.__name__=["flambe","System"];A.init=function(){A._calledInit||(A._platform.init(),A._calledInit=!0)};var Td=function(){};i["flambe.Log"]=Td;Td.__name__=["flambe","Log"];Td.info=function(){null};Td.__super__=Lg;Td.prototype=z(Lg.prototype,{__class__:Td});var xe=function(a){null==a&&
(a=1);this._realDt=0;u.call(this);this.scale=new pa(a)};i["flambe.SpeedAdjuster"]=xe;xe.__name__=["flambe","SpeedAdjuster"];xe.__super__=u;xe.prototype=z(u.prototype,{get_name:function(){return"SpeedAdjuster_7"},onUpdate:function(a){0<this._realDt&&(a=this._realDt,this._realDt=0);this.scale.update(a)},__class__:xe});var Cf=function(){};i["flambe.animation.Behavior"]=Cf;Cf.__name__=["flambe","animation","Behavior"];Cf.prototype={__class__:Cf};var Jb=function(){};i["flambe.animation.Ease"]=Jb;Jb.__name__=
["flambe","animation","Ease"];Jb.linear=function(a){return a};Jb.quintInOut=function(a){return 1>(a*=2)?a*a*a*a*a/2:((a-=2)*a*a*a*a+2)/2};var we=function(a,b,c,d){this._from=a;this._to=b;this._duration=c;this.elapsed=0;this._easing=null!=d?d:Jb.linear};i["flambe.animation.Tween"]=we;we.__name__=["flambe","animation","Tween"];we.__interfaces__=[Cf];we.prototype={update:function(a){this.elapsed+=a;return this.elapsed>=this._duration?this._to:this._from+(this._to-this._from)*this._easing(this.elapsed/
this._duration)},isComplete:function(){return this.elapsed>=this._duration},__class__:we};var bd=function(){};i["flambe.asset.Asset"]=bd;bd.__name__=["flambe","asset","Asset"];bd.__interfaces__=[tb];bd.prototype={__class__:bd};var t=i["flambe.asset.AssetFormat"]={__ename__:["flambe","asset","AssetFormat"],__constructs__:"WEBP,JXR,PNG,JPG,GIF,DDS,PVR,PKM,MP3,M4A,OPUS,OGG,WAV,Data".split(",")};t.WEBP=["WEBP",0];t.WEBP.toString=k;t.WEBP.__enum__=t;t.JXR=["JXR",1];t.JXR.toString=k;t.JXR.__enum__=t;t.PNG=
["PNG",2];t.PNG.toString=k;t.PNG.__enum__=t;t.JPG=["JPG",3];t.JPG.toString=k;t.JPG.__enum__=t;t.GIF=["GIF",4];t.GIF.toString=k;t.GIF.__enum__=t;t.DDS=["DDS",5];t.DDS.toString=k;t.DDS.__enum__=t;t.PVR=["PVR",6];t.PVR.toString=k;t.PVR.__enum__=t;t.PKM=["PKM",7];t.PKM.toString=k;t.PKM.__enum__=t;t.MP3=["MP3",8];t.MP3.toString=k;t.MP3.__enum__=t;t.M4A=["M4A",9];t.M4A.toString=k;t.M4A.__enum__=t;t.OPUS=["OPUS",10];t.OPUS.toString=k;t.OPUS.__enum__=t;t.OGG=["OGG",11];t.OGG.toString=k;t.OGG.__enum__=t;t.WAV=
["WAV",12];t.WAV.toString=k;t.WAV.__enum__=t;t.Data=["Data",13];t.Data.toString=k;t.Data.__enum__=t;t.__empty_constructs__=[t.WEBP,t.JXR,t.PNG,t.JPG,t.GIF,t.DDS,t.PVR,t.PKM,t.MP3,t.M4A,t.OPUS,t.OGG,t.WAV,t.Data];var Df=function(a,b,c,d){this.name=a;this.url=b;this.format=c;this.bytes=d};i["flambe.asset.AssetEntry"]=Df;Df.__name__=["flambe","asset","AssetEntry"];Df.prototype={__class__:Df};var ye=function(){};i["flambe.asset.AssetPack"]=ye;ye.__name__=["flambe","asset","AssetPack"];ye.__interfaces__=
[tb];ye.prototype={__class__:ye};var ze=function(){};i["flambe.asset.File"]=ze;ze.__name__=["flambe","asset","File"];ze.__interfaces__=[bd];ze.prototype={__class__:ze};var Xa=function(){this._localBase=this._remoteBase=null;this._entries=[]};i["flambe.asset.Manifest"]=Xa;Xa.__name__=["flambe","asset","Manifest"];Xa.fromAssets=function(a,b){null==b&&(b=!0);var c=Ea.field(Mg.getType(Xa).assets[0],a);if(null==c){if(b)throw Qa.withFields("Missing asset pack",["name",a]);return null}var d=new Xa;d.set_localBase("assets");
for(var f=0;f<c.length;){var vb=c[f];++f;var g=vb.name,e=a+"/"+g+"?v="+s.string(vb.md5),h=Xa.inferFormat(g);h!=t.Data&&(g=Qa.removeFileExtension(g));d.add(g,e,vb.bytes,h)}return d};Xa.inferFormat=function(a){a=Qa.getUrlExtension(a);if(null!=a)switch(a.toLowerCase()){case "gif":return t.GIF;case "jpg":case "jpeg":return t.JPG;case "jxr":case "wdp":return t.JXR;case "png":return t.PNG;case "webp":return t.WEBP;case "dds":return t.DDS;case "pvr":return t.PVR;case "pkm":return t.PKM;case "m4a":return t.M4A;
case "mp3":return t.MP3;case "ogg":return t.OGG;case "opus":return t.OPUS;case "wav":return t.WAV}else null;return t.Data};Xa.prototype={add:function(a,b,c,d){null==c&&(c=0);null==d&&(d=Xa.inferFormat(b));a=new Df(a,b,d,c);this._entries.push(a);return a},iterator:function(){return Q.iter(this._entries)},getFullURL:function(a){var b;b=null!=this.get_remoteBase()&&Xa._supportsCrossOrigin?this.get_remoteBase():this.get_localBase();return null!=b?Qa.joinPath(b,a.url):a.url},get_localBase:function(){return this._localBase},
set_localBase:function(a){null!=a&&Ng.that(!lb.startsWith(a,"http://")&&!lb.startsWith(a,"https://"),"localBase must be a path on the same domain, NOT starting with http(s)://",null);return this._localBase=a},get_remoteBase:function(){return this._remoteBase},__class__:Xa};var ca=i["flambe.display.BlendMode"]={__ename__:["flambe","display","BlendMode"],__constructs__:"Normal,Add,Multiply,Screen,Mask,Copy".split(",")};ca.Normal=["Normal",0];ca.Normal.toString=k;ca.Normal.__enum__=ca;ca.Add=["Add",
1];ca.Add.toString=k;ca.Add.__enum__=ca;ca.Multiply=["Multiply",2];ca.Multiply.toString=k;ca.Multiply.__enum__=ca;ca.Screen=["Screen",3];ca.Screen.toString=k;ca.Screen.__enum__=ca;ca.Mask=["Mask",4];ca.Mask.toString=k;ca.Mask.__enum__=ca;ca.Copy=["Copy",5];ca.Copy.toString=k;ca.Copy.__enum__=ca;ca.__empty_constructs__=[ca.Normal,ca.Add,ca.Multiply,ca.Screen,ca.Mask,ca.Copy];var Ef=function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b};i["flambe.math.Point"]=Ef;Ef.__name__=["flambe","math",
"Point"];Ef.prototype={__class__:Ef};var M=function(){this.blendMode=this.scissor=null;var a=this;u.call(this);this._flags|=54;this._localMatrix=new Ff;var b=function(){a._flags|=24};this.x=new pa(0,b);this.y=new pa(0,b);this.rotation=new pa(0,b);this.scaleX=new pa(1,b);this.scaleY=new pa(1,b);this.anchorX=new pa(0,b);this.anchorY=new pa(0,b);this.alpha=new pa(1)};i["flambe.display.Sprite"]=M;M.__name__=["flambe","display","Sprite"];M.hitTest=function(a,b,c){var d=a._compMap.Sprite_24;if(null!=d){if(6!=
(d._flags&6))return null;d.getLocalMatrix().inverseTransform(b,c,M._scratchPoint)&&(b=M._scratchPoint.x,c=M._scratchPoint.y);var f=d.scissor;if(null!=f&&!f.contains(b,c))return null}a=M.hitTestBackwards(a.firstChild,b,c);return null!=a?a:null!=d&&d.containsLocal(b,c)?d:null};M.render=function(a,b){var c=a._compMap.Sprite_24;if(null!=c){var d=c.alpha._value;if(0==(c._flags&2)||0>=d)return;b.save();1>d&&b.multiplyAlpha(d);null!=c.blendMode&&b.setBlendMode(c.blendMode);var d=c.getLocalMatrix(),f=d.m02,
g=d.m12;0!=(c._flags&32)&&(f=Math.round(f),g=Math.round(g));b.transform(d.m00,d.m10,d.m01,d.m11,f,g);d=c.scissor;null!=d&&b.applyScissor(d.x,d.y,d.width,d.height);c.draw(b)}d=a._compMap.Director_26;if(null!=d){d=d.occludedScenes;for(f=0;f<d.length;)g=d[f],++f,M.render(g,b)}for(d=a.firstChild;null!=d;)f=d.next,M.render(d,b),d=f;null!=c&&b.restore()};M.hitTestBackwards=function(a,b,c){if(null!=a){var d=M.hitTestBackwards(a.next,b,c);return null!=d?d:M.hitTest(a,b,c)}return null};M.__super__=u;M.prototype=
z(u.prototype,{get_name:function(){return"Sprite_24"},getNaturalWidth:function(){return 0},getNaturalHeight:function(){return 0},containsLocal:function(a,b){return 0<=a&&a<this.getNaturalWidth()&&0<=b&&b<this.getNaturalHeight()},getLocalMatrix:function(){0!=(this._flags&8)&&(this._flags&=-9,this._localMatrix.compose(this.x._value,this.y._value,this.scaleX._value,this.scaleY._value,3.141592653589793*this.rotation._value/180),this._localMatrix.translate(-this.anchorX._value,-this.anchorY._value));return this._localMatrix},
setAnchor:function(a,b){this.anchorX.set__(a);this.anchorY.set__(b);return this},centerAnchor:function(){this.anchorX.set__(this.getNaturalWidth()/2);this.anchorY.set__(this.getNaturalHeight()/2);return this},setXY:function(a,b){this.x.set__(a);this.y.set__(b);return this},setAlpha:function(a){this.alpha.set__(a);return this},setRotation:function(a){this.rotation.set__(a);return this},setScale:function(a){this.scaleX.set__(a);this.scaleY.set__(a);return this},setScaleXY:function(a,b){this.scaleX.set__(a);
this.scaleY.set__(b);return this},disablePointer:function(){this.set_pointerEnabled(!1);return this},onAdded:function(){0!=(this._flags&64)&&this.connectHover()},onRemoved:function(){null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)},onUpdate:function(a){this.x.update(a);this.y.update(a);this.rotation.update(a);this.scaleX.update(a);this.scaleY.update(a);this.alpha.update(a);this.anchorX.update(a);this.anchorY.update(a)},draw:function(){},getParentSprite:function(){if(null==
this.owner)return null;for(var a=this.owner.parent;null!=a;){var b=a._compMap.Sprite_24;if(null!=b)return b;a=a.parent}return null},get_pointerUp:function(){null==this._pointerUp&&(this._pointerUp=new oa);return this._pointerUp},connectHover:function(){var a=this;null==this._hoverConnection&&(this._hoverConnection=A._platform.getPointer().move.connect(function(b){for(var c=b.hit;null!=c;){if(c==a)return;c=c.getParentSprite()}null!=a._pointerOut&&0!=(a._flags&64)&&a._pointerOut.emit(b);a._flags&=-65;
a._hoverConnection.dispose();a._hoverConnection=null}))},set_visible:function(a){this._flags=Gf.set(this._flags,2,a);return a},set_pointerEnabled:function(a){this._flags=Gf.set(this._flags,4,a);return a},onPointerDown:function(a){this.onHover(a);null!=this._pointerDown&&this._pointerDown.emit(a)},onPointerMove:function(a){this.onHover(a);null!=this._pointerMove&&this._pointerMove.emit(a)},onHover:function(a){if(0==(this._flags&64)&&(this._flags|=64,null!=this._pointerIn||null!=this._pointerOut))null!=
this._pointerIn&&this._pointerIn.emit(a),this.connectHover()},onPointerUp:function(a){switch(a.source[1]){case 1:null!=this._pointerOut&&0!=(this._flags&64)&&this._pointerOut.emit(a),this._flags&=-65,null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)}null!=this._pointerUp&&this._pointerUp.emit(a)},__class__:M});var Ae=function(a,b,c){M.call(this);this.color=a;this.width=new pa(b);this.height=new pa(c)};i["flambe.display.FillSprite"]=Ae;Ae.__name__=["flambe",
"display","FillSprite"];Ae.__super__=M;Ae.prototype=z(M.prototype,{draw:function(a){a.fillRect(this.color,0,0,this.width._value,this.height._value)},getNaturalWidth:function(){return this.width._value},getNaturalHeight:function(){return this.height._value},onUpdate:function(a){M.prototype.onUpdate.call(this,a);this.width.update(a);this.height.update(a)},__class__:Ae});var Be=function(a){this._kernings=null;this.xOffset=this.yOffset=this.xAdvance=0;this.page=null;this.x=this.y=this.width=this.height=
0;this.charCode=a};i["flambe.display.Glyph"]=Be;Be.__name__=["flambe","display","Glyph"];Be.prototype={draw:function(a,b,c){0<this.width&&a.drawSubTexture(this.page,b+this.xOffset,c+this.yOffset,this.x,this.y,this.width,this.height)},getKerning:function(a){return null!=this._kernings?s["int"](this._kernings.get(a)):0},setKerning:function(a,b){null==this._kernings&&(this._kernings=new pb);this._kernings.set(a,b)},__class__:Be};var cd=function(a,b){this.name=b;this._pack=a;this._file=a.getFile(b+".fnt");
this.reload()};i["flambe.display.Font"]=cd;cd.__name__=["flambe","display","Font"];cd.prototype={layoutText:function(a,b,c,d,f){null==f&&(f=0);null==d&&(d=0);null==c&&(c=0);null==b&&(b=D.Left);return new rd(this,a,b,c,d,f)},reload:function(){this._glyphs=new pb;this._glyphs.set(cd.NEWLINE.charCode,cd.NEWLINE);for(var a=new Fd(this._file.toString()),b=new pb,c=this.name.lastIndexOf("/"),c=0<=c?Q.substr(this.name,0,c+1):"",d=a.keywords();d.hasNext();)switch(d.next()){case "info":for(var f=a.pairs();f.hasNext();){var g=
f.next();switch(g.key){case "size":this.size=g.getInt()}}break;case "common":for(f=a.pairs();f.hasNext();)switch(g=f.next(),g.key){case "lineHeight":this.lineHeight=g.getInt()}break;case "page":for(var f=0,g=null,e=a.pairs();e.hasNext();){var h=e.next();switch(h.key){case "id":f=h.getInt();break;case "file":g=h.getString()}}g=this._pack.getTexture(c+Qa.removeFileExtension(g));b.set(f,g);break;case "char":f=null;for(g=a.pairs();g.hasNext();)switch(e=g.next(),e.key){case "id":f=new Be(e.getInt());break;
case "x":f.x=e.getInt();break;case "y":f.y=e.getInt();break;case "width":f.width=e.getInt();break;case "height":f.height=e.getInt();break;case "page":e=e.getInt();f.page=b.get(e);break;case "xoffset":f.xOffset=e.getInt();break;case "yoffset":f.yOffset=e.getInt();break;case "xadvance":f.xAdvance=e.getInt()}this._glyphs.set(f.charCode,f);break;case "kerning":f=null;e=g=0;for(h=a.pairs();h.hasNext();){var n=h.next();switch(n.key){case "first":f=this._glyphs.get(n.getInt());break;case "second":g=n.getInt();
break;case "amount":e=n.getInt()}}null!=f&&0!=e&&f.setKerning(g,e)}},__class__:cd};var D=i["flambe.display.TextAlign"]={__ename__:["flambe","display","TextAlign"],__constructs__:["Left","Center","Right"]};D.Left=["Left",0];D.Left.toString=k;D.Left.__enum__=D;D.Center=["Center",1];D.Center.toString=k;D.Center.__enum__=D;D.Right=["Right",2];D.Right.toString=k;D.Right.__enum__=D;D.__empty_constructs__=[D.Left,D.Center,D.Right];var rd=function(a,b,c,d,f,g){this.lines=0;var e=this;this._font=a;this._glyphs=
[];this._offsets=[];this._lineOffset=Math.round(a.lineHeight+g);this.bounds=new Hf;for(var h=[],g=b.length,n=0;n<g;){var i=n++,i=b.charCodeAt(i),i=a._glyphs.get(i);null!=i?this._glyphs.push(i):null}for(var b=-1,l=0,j=0,a=a._glyphs.get(10),g=function(){e.bounds.width=Gd.max(e.bounds.width,l);e.bounds.height+=j;h[e.lines]=l;j=l=0;++e.lines},n=0;n<this._glyphs.length;){i=this._glyphs[n];this._offsets[n]=Math.round(l);var k=0<d&&l+i.width>d;k||i==a?(k&&(0<=b?(this._glyphs[b]=a,l=this._offsets[b],n=b):
this._glyphs.splice(n,0,a)),b=-1,j=this._lineOffset,g()):(32==i.charCode&&(b=n),l+=i.xAdvance+f,j=Gd.max(j,i.height+i.yOffset),n+1<this._glyphs.length&&(l+=i.getKerning(this._glyphs[n+1].charCode)));++n}g();f=0;a=rd.getAlignOffset(c,h[0],d);b=1.79769313486231E308;g=-1.79769313486231E308;i=n=0;for(k=this._glyphs.length;i<k;){var o=this._glyphs[i];10==o.charCode&&(f+=this._lineOffset,++n,a=rd.getAlignOffset(c,h[n],d));this._offsets[i]+=a;var m=f+o.yOffset;b<m||(b=m);g=Gd.max(g,m+o.height);++i}this.bounds.x=
rd.getAlignOffset(c,this.bounds.width,d);this.bounds.y=b;this.bounds.height=g-b};i["flambe.display.TextLayout"]=rd;rd.__name__=["flambe","display","TextLayout"];rd.getAlignOffset=function(a,b,c){switch(a[1]){case 0:return 0;case 2:return c-b;case 1:return Math.round((c-b)/2)}};rd.prototype={draw:function(a){for(var b=0,c=0,d=this._glyphs.length;c<d;){var f=this._glyphs[c];10==f.charCode?b+=this._lineOffset:f.draw(a,this._offsets[c],b);++c}},__class__:rd};var Fd=function(a){this._configText=a;this._keywordPattern=
new Lc("([A-Za-z]+)(.*)","");this._pairPattern=new Lc('([A-Za-z]+)=("[^"]*"|[^\\s]+)',"")};i["flambe.display._Font.ConfigParser"]=Fd;Fd.__name__=["flambe","display","_Font","ConfigParser"];Fd.advance=function(a,b){var c=b.matchedPos();return Q.substr(a,c.pos+c.len,a.length)};Fd.prototype={keywords:function(){var a=this,b=this._configText;return{next:function(){b=Fd.advance(b,a._keywordPattern);a._pairText=a._keywordPattern.matched(2);return a._keywordPattern.matched(1)},hasNext:function(){return a._keywordPattern.match(b)}}},
pairs:function(){var a=this,b=this._pairText;return{next:function(){b=Fd.advance(b,a._pairPattern);return new If(a._pairPattern.matched(1),a._pairPattern.matched(2))},hasNext:function(){return a._pairPattern.match(b)}}},__class__:Fd};var If=function(a,b){this.key=a;this._value=b};i["flambe.display._Font.ConfigPair"]=If;If.__name__=["flambe","display","_Font","ConfigPair"];If.prototype={getInt:function(){return s.parseInt(this._value)},getString:function(){return 34!=this._value.charCodeAt(0)?null:
Q.substr(this._value,1,this._value.length-2)},__class__:If};var Jf=function(){};i["flambe.display.Graphics"]=Jf;Jf.__name__=["flambe","display","Graphics"];Jf.prototype={__class__:Jf};var za=function(a){M.call(this);this.texture=a};i["flambe.display.ImageSprite"]=za;za.__name__=["flambe","display","ImageSprite"];za.__super__=M;za.prototype=z(M.prototype,{draw:function(a){null!=this.texture&&a.drawTexture(this.texture,0,0)},getNaturalWidth:function(){return null!=this.texture?this.texture.get_width():
0},getNaturalHeight:function(){return null!=this.texture?this.texture.get_height():0},__class__:za});var cc=i["flambe.display.Orientation"]={__ename__:["flambe","display","Orientation"],__constructs__:["Portrait","Landscape"]};cc.Portrait=["Portrait",0];cc.Portrait.toString=k;cc.Portrait.__enum__=cc;cc.Landscape=["Landscape",1];cc.Landscape.toString=k;cc.Landscape.__enum__=cc;cc.__empty_constructs__=[cc.Portrait,cc.Landscape];var Vd=function(){};i["flambe.display.Texture"]=Vd;Vd.__name__=["flambe",
"display","Texture"];Vd.__interfaces__=[bd];Vd.prototype={__class__:Vd};var Og=function(){};i["flambe.display.SubTexture"]=Og;Og.__name__=["flambe","display","SubTexture"];Og.__interfaces__=[Vd];var P=function(a,b){null==b&&(b="");this._layout=null;var c=this;M.call(this);this._font=a;this._text=b;this._align=D.Left;this._flags|=128;var d=function(){c._flags|=128};this.wrapWidth=new pa(0,d);this.letterSpacing=new pa(0,d);this.lineSpacing=new pa(0,d)};i["flambe.display.TextSprite"]=P;P.__name__=["flambe",
"display","TextSprite"];P.__super__=M;P.prototype=z(M.prototype,{draw:function(a){this.updateLayout();this._layout.draw(a)},getNaturalWidth:function(){this.updateLayout();return 0<this.wrapWidth._value?this.wrapWidth._value:this._layout.bounds.width},getNaturalHeight:function(){this.updateLayout();var a=this._layout.lines*(this._font.lineHeight+this.lineSpacing._value),b=this._layout.bounds.height;return a>b?a:b},containsLocal:function(a,b){this.updateLayout();return this._layout.bounds.contains(a,
b)},setWrapWidth:function(a){this.wrapWidth.set__(a);return this},setLetterSpacing:function(a){this.letterSpacing.set__(a);return this},setLineSpacing:function(a){this.lineSpacing.set__(a);return this},setAlign:function(a){this.set_align(a);return this},set_text:function(a){a!=this._text&&(this._text=a,this._flags|=128);return a},set_align:function(a){a!=this._align&&(this._align=a,this._flags|=128);return a},updateLayout:function(){0!=(this._flags&128)&&(this._flags&=-129,this._layout=this._font.layoutText(this._text,
this._align,this.wrapWidth._value,this.letterSpacing._value,this.lineSpacing._value))},onUpdate:function(a){M.prototype.onUpdate.call(this,a);this.wrapWidth.update(a);this.letterSpacing.update(a);this.lineSpacing.update(a)},__class__:P});var h=i["flambe.input.Key"]={__ename__:["flambe","input","Key"],__constructs__:"A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,Number0,Number1,Number2,Number3,Number4,Number5,Number6,Number7,Number8,Number9,Numpad0,Numpad1,Numpad2,Numpad3,Numpad4,Numpad5,Numpad6,Numpad7,Numpad8,Numpad9,NumpadAdd,NumpadDecimal,NumpadDivide,NumpadEnter,NumpadMultiply,NumpadSubtract,F1,F2,F3,F4,F5,F6,F7,F8,F9,F10,F11,F12,F13,F14,F15,Left,Up,Right,Down,Alt,Backquote,Backslash,Backspace,CapsLock,Comma,Command,Control,Delete,End,Enter,Equals,Escape,Home,Insert,LeftBracket,Minus,PageDown,PageUp,Period,Quote,RightBracket,Semicolon,Shift,Slash,Space,Tab,Menu,Search,Unknown".split(",")};
h.A=["A",0];h.A.toString=k;h.A.__enum__=h;h.B=["B",1];h.B.toString=k;h.B.__enum__=h;h.C=["C",2];h.C.toString=k;h.C.__enum__=h;h.D=["D",3];h.D.toString=k;h.D.__enum__=h;h.E=["E",4];h.E.toString=k;h.E.__enum__=h;h.F=["F",5];h.F.toString=k;h.F.__enum__=h;h.G=["G",6];h.G.toString=k;h.G.__enum__=h;h.H=["H",7];h.H.toString=k;h.H.__enum__=h;h.I=["I",8];h.I.toString=k;h.I.__enum__=h;h.J=["J",9];h.J.toString=k;h.J.__enum__=h;h.K=["K",10];h.K.toString=k;h.K.__enum__=h;h.L=["L",11];h.L.toString=k;h.L.__enum__=
h;h.M=["M",12];h.M.toString=k;h.M.__enum__=h;h.N=["N",13];h.N.toString=k;h.N.__enum__=h;h.O=["O",14];h.O.toString=k;h.O.__enum__=h;h.P=["P",15];h.P.toString=k;h.P.__enum__=h;h.Q=["Q",16];h.Q.toString=k;h.Q.__enum__=h;h.R=["R",17];h.R.toString=k;h.R.__enum__=h;h.S=["S",18];h.S.toString=k;h.S.__enum__=h;h.T=["T",19];h.T.toString=k;h.T.__enum__=h;h.U=["U",20];h.U.toString=k;h.U.__enum__=h;h.V=["V",21];h.V.toString=k;h.V.__enum__=h;h.W=["W",22];h.W.toString=k;h.W.__enum__=h;h.X=["X",23];h.X.toString=
k;h.X.__enum__=h;h.Y=["Y",24];h.Y.toString=k;h.Y.__enum__=h;h.Z=["Z",25];h.Z.toString=k;h.Z.__enum__=h;h.Number0=["Number0",26];h.Number0.toString=k;h.Number0.__enum__=h;h.Number1=["Number1",27];h.Number1.toString=k;h.Number1.__enum__=h;h.Number2=["Number2",28];h.Number2.toString=k;h.Number2.__enum__=h;h.Number3=["Number3",29];h.Number3.toString=k;h.Number3.__enum__=h;h.Number4=["Number4",30];h.Number4.toString=k;h.Number4.__enum__=h;h.Number5=["Number5",31];h.Number5.toString=k;h.Number5.__enum__=
h;h.Number6=["Number6",32];h.Number6.toString=k;h.Number6.__enum__=h;h.Number7=["Number7",33];h.Number7.toString=k;h.Number7.__enum__=h;h.Number8=["Number8",34];h.Number8.toString=k;h.Number8.__enum__=h;h.Number9=["Number9",35];h.Number9.toString=k;h.Number9.__enum__=h;h.Numpad0=["Numpad0",36];h.Numpad0.toString=k;h.Numpad0.__enum__=h;h.Numpad1=["Numpad1",37];h.Numpad1.toString=k;h.Numpad1.__enum__=h;h.Numpad2=["Numpad2",38];h.Numpad2.toString=k;h.Numpad2.__enum__=h;h.Numpad3=["Numpad3",39];h.Numpad3.toString=
k;h.Numpad3.__enum__=h;h.Numpad4=["Numpad4",40];h.Numpad4.toString=k;h.Numpad4.__enum__=h;h.Numpad5=["Numpad5",41];h.Numpad5.toString=k;h.Numpad5.__enum__=h;h.Numpad6=["Numpad6",42];h.Numpad6.toString=k;h.Numpad6.__enum__=h;h.Numpad7=["Numpad7",43];h.Numpad7.toString=k;h.Numpad7.__enum__=h;h.Numpad8=["Numpad8",44];h.Numpad8.toString=k;h.Numpad8.__enum__=h;h.Numpad9=["Numpad9",45];h.Numpad9.toString=k;h.Numpad9.__enum__=h;h.NumpadAdd=["NumpadAdd",46];h.NumpadAdd.toString=k;h.NumpadAdd.__enum__=h;h.NumpadDecimal=
["NumpadDecimal",47];h.NumpadDecimal.toString=k;h.NumpadDecimal.__enum__=h;h.NumpadDivide=["NumpadDivide",48];h.NumpadDivide.toString=k;h.NumpadDivide.__enum__=h;h.NumpadEnter=["NumpadEnter",49];h.NumpadEnter.toString=k;h.NumpadEnter.__enum__=h;h.NumpadMultiply=["NumpadMultiply",50];h.NumpadMultiply.toString=k;h.NumpadMultiply.__enum__=h;h.NumpadSubtract=["NumpadSubtract",51];h.NumpadSubtract.toString=k;h.NumpadSubtract.__enum__=h;h.F1=["F1",52];h.F1.toString=k;h.F1.__enum__=h;h.F2=["F2",53];h.F2.toString=
k;h.F2.__enum__=h;h.F3=["F3",54];h.F3.toString=k;h.F3.__enum__=h;h.F4=["F4",55];h.F4.toString=k;h.F4.__enum__=h;h.F5=["F5",56];h.F5.toString=k;h.F5.__enum__=h;h.F6=["F6",57];h.F6.toString=k;h.F6.__enum__=h;h.F7=["F7",58];h.F7.toString=k;h.F7.__enum__=h;h.F8=["F8",59];h.F8.toString=k;h.F8.__enum__=h;h.F9=["F9",60];h.F9.toString=k;h.F9.__enum__=h;h.F10=["F10",61];h.F10.toString=k;h.F10.__enum__=h;h.F11=["F11",62];h.F11.toString=k;h.F11.__enum__=h;h.F12=["F12",63];h.F12.toString=k;h.F12.__enum__=h;h.F13=
["F13",64];h.F13.toString=k;h.F13.__enum__=h;h.F14=["F14",65];h.F14.toString=k;h.F14.__enum__=h;h.F15=["F15",66];h.F15.toString=k;h.F15.__enum__=h;h.Left=["Left",67];h.Left.toString=k;h.Left.__enum__=h;h.Up=["Up",68];h.Up.toString=k;h.Up.__enum__=h;h.Right=["Right",69];h.Right.toString=k;h.Right.__enum__=h;h.Down=["Down",70];h.Down.toString=k;h.Down.__enum__=h;h.Alt=["Alt",71];h.Alt.toString=k;h.Alt.__enum__=h;h.Backquote=["Backquote",72];h.Backquote.toString=k;h.Backquote.__enum__=h;h.Backslash=
["Backslash",73];h.Backslash.toString=k;h.Backslash.__enum__=h;h.Backspace=["Backspace",74];h.Backspace.toString=k;h.Backspace.__enum__=h;h.CapsLock=["CapsLock",75];h.CapsLock.toString=k;h.CapsLock.__enum__=h;h.Comma=["Comma",76];h.Comma.toString=k;h.Comma.__enum__=h;h.Command=["Command",77];h.Command.toString=k;h.Command.__enum__=h;h.Control=["Control",78];h.Control.toString=k;h.Control.__enum__=h;h.Delete=["Delete",79];h.Delete.toString=k;h.Delete.__enum__=h;h.End=["End",80];h.End.toString=k;h.End.__enum__=
h;h.Enter=["Enter",81];h.Enter.toString=k;h.Enter.__enum__=h;h.Equals=["Equals",82];h.Equals.toString=k;h.Equals.__enum__=h;h.Escape=["Escape",83];h.Escape.toString=k;h.Escape.__enum__=h;h.Home=["Home",84];h.Home.toString=k;h.Home.__enum__=h;h.Insert=["Insert",85];h.Insert.toString=k;h.Insert.__enum__=h;h.LeftBracket=["LeftBracket",86];h.LeftBracket.toString=k;h.LeftBracket.__enum__=h;h.Minus=["Minus",87];h.Minus.toString=k;h.Minus.__enum__=h;h.PageDown=["PageDown",88];h.PageDown.toString=k;h.PageDown.__enum__=
h;h.PageUp=["PageUp",89];h.PageUp.toString=k;h.PageUp.__enum__=h;h.Period=["Period",90];h.Period.toString=k;h.Period.__enum__=h;h.Quote=["Quote",91];h.Quote.toString=k;h.Quote.__enum__=h;h.RightBracket=["RightBracket",92];h.RightBracket.toString=k;h.RightBracket.__enum__=h;h.Semicolon=["Semicolon",93];h.Semicolon.toString=k;h.Semicolon.__enum__=h;h.Shift=["Shift",94];h.Shift.toString=k;h.Shift.__enum__=h;h.Slash=["Slash",95];h.Slash.toString=k;h.Slash.__enum__=h;h.Space=["Space",96];h.Space.toString=
k;h.Space.__enum__=h;h.Tab=["Tab",97];h.Tab.toString=k;h.Tab.__enum__=h;h.Menu=["Menu",98];h.Menu.toString=k;h.Menu.__enum__=h;h.Search=["Search",99];h.Search.toString=k;h.Search.__enum__=h;h.Unknown=function(a){a=["Unknown",100,a];a.__enum__=h;a.toString=k;return a};h.__empty_constructs__=[h.A,h.B,h.C,h.D,h.E,h.F,h.G,h.H,h.I,h.J,h.K,h.L,h.M,h.N,h.O,h.P,h.Q,h.R,h.S,h.T,h.U,h.V,h.W,h.X,h.Y,h.Z,h.Number0,h.Number1,h.Number2,h.Number3,h.Number4,h.Number5,h.Number6,h.Number7,h.Number8,h.Number9,h.Numpad0,
h.Numpad1,h.Numpad2,h.Numpad3,h.Numpad4,h.Numpad5,h.Numpad6,h.Numpad7,h.Numpad8,h.Numpad9,h.NumpadAdd,h.NumpadDecimal,h.NumpadDivide,h.NumpadEnter,h.NumpadMultiply,h.NumpadSubtract,h.F1,h.F2,h.F3,h.F4,h.F5,h.F6,h.F7,h.F8,h.F9,h.F10,h.F11,h.F12,h.F13,h.F14,h.F15,h.Left,h.Up,h.Right,h.Down,h.Alt,h.Backquote,h.Backslash,h.Backspace,h.CapsLock,h.Comma,h.Command,h.Control,h.Delete,h.End,h.Enter,h.Equals,h.Escape,h.Home,h.Insert,h.LeftBracket,h.Minus,h.PageDown,h.PageUp,h.Period,h.Quote,h.RightBracket,
h.Semicolon,h.Shift,h.Slash,h.Space,h.Tab,h.Menu,h.Search];var Kf=function(){this.init(0,null)};i["flambe.input.KeyboardEvent"]=Kf;Kf.__name__=["flambe","input","KeyboardEvent"];Kf.prototype={init:function(a,b){this.id=a;this.key=b},__class__:Kf};var ua=i["flambe.input.MouseButton"]={__ename__:["flambe","input","MouseButton"],__constructs__:["Left","Middle","Right","Unknown"]};ua.Left=["Left",0];ua.Left.toString=k;ua.Left.__enum__=ua;ua.Middle=["Middle",1];ua.Middle.toString=k;ua.Middle.__enum__=
ua;ua.Right=["Right",2];ua.Right.toString=k;ua.Right.__enum__=ua;ua.Unknown=function(a){a=["Unknown",3,a];a.__enum__=ua;a.toString=k;return a};ua.__empty_constructs__=[ua.Left,ua.Middle,ua.Right];var wa=i["flambe.input.MouseCursor"]={__ename__:["flambe","input","MouseCursor"],__constructs__:["Default","Button","None"]};wa.Default=["Default",0];wa.Default.toString=k;wa.Default.__enum__=wa;wa.Button=["Button",1];wa.Button.toString=k;wa.Button.__enum__=wa;wa.None=["None",2];wa.None.toString=k;wa.None.__enum__=
wa;wa.__empty_constructs__=[wa.Default,wa.Button,wa.None];var Lf=function(){this.init(0,0,0,null)};i["flambe.input.MouseEvent"]=Lf;Lf.__name__=["flambe","input","MouseEvent"];Lf.prototype={init:function(a,b,c,d){this.id=a;this.viewX=b;this.viewY=c;this.button=d},__class__:Lf};var sd=i["flambe.input.EventSource"]={__ename__:["flambe","input","EventSource"],__constructs__:["Mouse","Touch"]};sd.Mouse=function(a){a=["Mouse",0,a];a.__enum__=sd;a.toString=k;return a};sd.Touch=function(a){a=["Touch",1,a];
a.__enum__=sd;a.toString=k;return a};sd.__empty_constructs__=[];var Mf=function(){this.init(0,0,0,null,null)};i["flambe.input.PointerEvent"]=Mf;Mf.__name__=["flambe","input","PointerEvent"];Mf.prototype={init:function(a,b,c,d,f){this.id=a;this.viewX=b;this.viewY=c;this.hit=d;this.source=f;this._stopped=!1},__class__:Mf};var Nf=function(a){this.id=a;this._source=sd.Touch(this)};i["flambe.input.TouchPoint"]=Nf;Nf.__name__=["flambe","input","TouchPoint"];Nf.prototype={init:function(a,b){this.viewX=a;
this.viewY=b},__class__:Nf};var Gd=function(){};i["flambe.math.FMath"]=Gd;Gd.__name__=["flambe","math","FMath"];Gd.max=function(a,b){return a>b?a:b};Gd.clamp=function(a,b,c){return a<b?b:a>c?c:a};var Ff=function(){this.identity()};i["flambe.math.Matrix"]=Ff;Ff.__name__=["flambe","math","Matrix"];Ff.prototype={set:function(a,b,c,d,f,g){this.m00=a;this.m01=c;this.m02=f;this.m10=b;this.m11=d;this.m12=g},identity:function(){this.set(1,0,0,1,0,0)},compose:function(a,b,c,d,f){var g=Math.sin(f),f=Math.cos(f);
this.set(f*c,g*c,-g*d,f*d,a,b)},translate:function(a,b){this.m02+=this.m00*a+this.m01*b;this.m12+=this.m11*b+this.m10*a},determinant:function(){return this.m00*this.m11-this.m01*this.m10},inverseTransform:function(a,b,c){var d=this.determinant();if(0==d)return!1;a-=this.m02;b-=this.m12;c.x=(a*this.m11-b*this.m01)/d;c.y=(b*this.m00-a*this.m10)/d;return!0},__class__:Ff};var Hf=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.set(a,b,c,d)};i["flambe.math.Rectangle"]=
Hf;Hf.__name__=["flambe","math","Rectangle"];Hf.prototype={set:function(a,b,c,d){this.x=a;this.y=b;this.width=c;this.height=d},contains:function(a,b){a-=this.x;if(0<=this.width){if(0>a||a>this.width)return!1}else if(0<a||a<this.width)return!1;b-=this.y;if(0<=this.height){if(0>b||b>this.height)return!1}else if(0<b||b<this.height)return!1;return!0},__class__:Hf};var Ra=function(){this._disposed=!1};i["flambe.platform.BasicAsset"]=Ra;Ra.__name__=["flambe","platform","BasicAsset"];Ra.__interfaces__=[bd];
Ra.prototype={dispose:function(){this._disposed||(this._disposed=!0,this.onDisposed())},onDisposed:function(){null},__class__:Ra};var td=function(a,b){var c=this;this.manifest=b;this._platform=a;this.promise=new Ce;this._bytesLoaded=new ea;this._pack=new De(b,this);var d=oc.array(b);if(0==d.length)this.handleSuccess();else{for(var f=new ea,g=0;g<d.length;){var e=d[g];++g;var h=f.get(e.name);null==h&&(h=[],f.set(e.name,h));h.push(e)}this._assetsRemaining=oc.count(f);for(d=f.iterator();d.hasNext();)f=
[d.next()],this.pickBestEntry(f[0],function(a){return function(d){if(null!=d){var f=b.getFullURL(d);try{c.loadEntry(f,d)}catch(g){c.handleError(d,"Unexpected error: "+s.string(g))}f=c.promise;f.set_total(f._total+d.bytes)}else d=a[0][0],td.isAudio(d.format)?c.handleLoad(d,Kb.getInstance()):c.handleError(d,"Could not find a supported format to load")}}(f))}};i["flambe.platform.BasicAssetPackLoader"]=td;td.__name__=["flambe","platform","BasicAssetPackLoader"];td.isAudio=function(a){switch(a[1]){case 8:case 9:case 10:case 11:case 12:return!0;
default:return!1}};td.prototype={onDisposed:function(){},pickBestEntry:function(a,b){this.getAssetFormats(function(c){for(var d=0;d<c.length;){var f=c[d];++d;for(var g=0;g<a.length;){var e=a[g];++g;if(e.format==f){b(e);return}}}b(null)})},loadEntry:function(){null},getAssetFormats:function(){null},handleLoad:function(a,b){if(!this._pack.disposed){this.handleProgress(a,a.bytes);var c;switch(a.format[1]){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c=this._pack.textures;break;case 8:case 9:case 10:case 11:case 12:c=
this._pack.sounds;break;case 13:c=this._pack.files}c.set(a.name,b);this._assetsRemaining-=1;0==this._assetsRemaining&&this.handleSuccess()}},handleProgress:function(a,b){this._bytesLoaded.set(a.name,b);for(var c=0,d=this._bytesLoaded.iterator();d.hasNext();)var f=d.next(),c=c+f;this.promise.set_progress(c)},handleSuccess:function(){this.promise.set_result(this._pack)},handleError:function(a,b){this.promise.error.emit(Qa.withFields(b,["url",a.url]))},handleTextureError:function(a){this.handleError(a,
"Failed to create texture. Is the GPU context unavailable?")},__class__:td};var De=function(a,b){this.disposed=!1;this._manifest=a;this.loader=b;this.textures=new ea;this.sounds=new ea;this.files=new ea};i["flambe.platform._BasicAssetPackLoader.BasicAssetPack"]=De;De.__name__=["flambe","platform","_BasicAssetPackLoader","BasicAssetPack"];De.__interfaces__=[ye];De.prototype={getTexture:function(a,b){null==b&&(b=!0);var c=this.textures.get(a);if(null==c&&b)throw Qa.withFields("Missing texture",["name",
a]);return c},getSound:function(a,b){null==b&&(b=!0);var c=this.sounds.get(a);if(null==c&&b)throw Qa.withFields("Missing sound",["name",a]);return c},getFile:function(a,b){null==b&&(b=!0);var c=this.files.get(a);if(null==c&&b)throw Qa.withFields("Missing file",["name",a]);return c},dispose:function(){if(!this.disposed){this.disposed=!0;for(var a=this.textures.iterator();a.hasNext();)a.next().dispose();this.textures=null;for(a=this.sounds.iterator();a.hasNext();)a.next().dispose();this.sounds=null;
for(a=this.files.iterator();a.hasNext();)a.next().dispose();this.files=null;this.loader.onDisposed()}},__class__:De};var ud=function(a){this._disposed=!1;this._content=a};i["flambe.platform.BasicFile"]=ud;ud.__name__=["flambe","platform","BasicFile"];ud.__interfaces__=[ze];ud.__super__=Ra;ud.prototype=z(Ra.prototype,{toString:function(){return this._content},onDisposed:function(){this._content=null},__class__:ud});var Of=function(){};i["flambe.subsystem.KeyboardSystem"]=Of;Of.__name__=["flambe","subsystem",
"KeyboardSystem"];Of.prototype={__class__:Of};var cb=function(){this.down=new oa;this.up=new oa;this.backButton=new dc;this._keyStates=new pb};i["flambe.platform.BasicKeyboard"]=cb;cb.__name__=["flambe","platform","BasicKeyboard"];cb.__interfaces__=[Of];cb.prototype={submitDown:function(a){if(16777238==a)return null!=this.backButton._head?(this.backButton.emit(),!0):!1;this._keyStates.exists(a)||(this._keyStates.set(a,!0),cb._sharedEvent.init(cb._sharedEvent.id+1,Pf.toKey(a)),this.down.emit(cb._sharedEvent));
return!0},submitUp:function(a){this._keyStates.exists(a)&&(this._keyStates.remove(a),cb._sharedEvent.init(cb._sharedEvent.id+1,Pf.toKey(a)),this.up.emit(cb._sharedEvent))},__class__:cb};var yh=function(){};i["flambe.subsystem.MouseSystem"]=yh;yh.__name__=["flambe","subsystem","MouseSystem"];var Ab=function(a){this._pointer=a;this._source=sd.Mouse(Ab._sharedEvent);this.down=new oa;this.move=new oa;this.up=new oa;this.scroll=new oa;this._y=this._x=0;this._cursor=wa.Default;this._buttonStates=new pb};
i["flambe.platform.BasicMouse"]=Ab;Ab.__name__=["flambe","platform","BasicMouse"];Ab.__interfaces__=[yh];Ab.prototype={submitDown:function(a,b,c){this._buttonStates.exists(c)||(this._buttonStates.set(c,!0),this.prepare(a,b,Qf.toButton(c)),this._pointer.submitDown(a,b,this._source),this.down.emit(Ab._sharedEvent))},submitMove:function(a,b){this.prepare(a,b,null);this._pointer.submitMove(a,b,this._source);this.move.emit(Ab._sharedEvent)},submitUp:function(a,b,c){this._buttonStates.exists(c)&&(this._buttonStates.remove(c),
this.prepare(a,b,Qf.toButton(c)),this._pointer.submitUp(a,b,this._source),this.up.emit(Ab._sharedEvent))},submitScroll:function(a,b,c){this._x=a;this._y=b;if(null==this.scroll._head)return!1;this.scroll.emit(c);return!0},prepare:function(a,b,c){this._x=a;this._y=b;Ab._sharedEvent.init(Ab._sharedEvent.id+1,a,b,c)},__class__:Ab};var Rf=function(){};i["flambe.subsystem.PointerSystem"]=Rf;Rf.__name__=["flambe","subsystem","PointerSystem"];Rf.prototype={__class__:Rf};var Pa=function(a,b,c){null==c&&(c=
!1);null==b&&(b=0);null==a&&(a=0);this.down=new oa;this.move=new oa;this.up=new oa;this._x=a;this._y=b;this._isDown=c};i["flambe.platform.BasicPointer"]=Pa;Pa.__name__=["flambe","platform","BasicPointer"];Pa.__interfaces__=[Rf];Pa.prototype={submitDown:function(a,b,c){if(!this._isDown){this.submitMove(a,b,c);this._isDown=!0;var d=[],f=M.hitTest(A.root,a,b);if(null!=f){var g=f.owner;do{var e=g._compMap.Sprite_24;null!=e&&d.push(e);g=g.parent}while(null!=g)}this.prepare(a,b,f,c);for(a=0;a<d.length;)if(b=
d[a],++a,b.onPointerDown(Pa._sharedEvent),Pa._sharedEvent._stopped)return;this.down.emit(Pa._sharedEvent)}},submitMove:function(a,b,c){if(!(a==this._x&&b==this._y)){var d=[],f=M.hitTest(A.root,a,b);if(null!=f){var g=f.owner;do{var e=g._compMap.Sprite_24;null!=e&&d.push(e);g=g.parent}while(null!=g)}this.prepare(a,b,f,c);for(a=0;a<d.length;)if(b=d[a],++a,b.onPointerMove(Pa._sharedEvent),Pa._sharedEvent._stopped)return;this.move.emit(Pa._sharedEvent)}},submitUp:function(a,b,c){if(this._isDown){this.submitMove(a,
b,c);this._isDown=!1;var d=[],f=M.hitTest(A.root,a,b);if(null!=f){var g=f.owner;do{var e=g._compMap.Sprite_24;null!=e&&d.push(e);g=g.parent}while(null!=g)}this.prepare(a,b,f,c);for(a=0;a<d.length;)if(b=d[a],++a,b.onPointerUp(Pa._sharedEvent),Pa._sharedEvent._stopped)return;this.up.emit(Pa._sharedEvent)}},prepare:function(a,b,c,d){this._x=a;this._y=b;Pa._sharedEvent.init(Pa._sharedEvent.id+1,a,b,c,d)},__class__:Pa};var Nc=function(a,b,c){this._x=this._y=0;this._parent=null;this.rootX=this.rootY=0;
this._disposed=!1;this.root=a;this._width=b;this._height=c};i["flambe.platform.BasicTexture"]=Nc;Nc.__name__=["flambe","platform","BasicTexture"];Nc.__interfaces__=[Og];Nc.__super__=Ra;Nc.prototype=z(Ra.prototype,{subTexture:function(a,b,c,d){c=this.root.createTexture(c,d);c._parent=this;c._x=a;c._y=b;c.rootX=this.rootX+a;c.rootY=this.rootY+b;return c},onDisposed:function(){null==this._parent&&this.root.dispose()},get_width:function(){return this._width},get_height:function(){return this._height},
__class__:Nc});var Pg=function(){};i["flambe.subsystem.TouchSystem"]=Pg;Pg.__name__=["flambe","subsystem","TouchSystem"];var pd=function(a,b){null==b&&(b=4);this._pointer=a;this._maxPoints=b;this._pointMap=new pb;this._points=[];this.down=new oa;this.move=new oa;this.up=new oa};i["flambe.platform.BasicTouch"]=pd;pd.__name__=["flambe","platform","BasicTouch"];pd.__interfaces__=[Pg];pd.prototype={submitDown:function(a,b,c){if(!this._pointMap.exists(a)){var d=new Nf(a);d.init(b,c);this._pointMap.set(a,
d);this._points.push(d);null==this._pointerTouch&&(this._pointerTouch=d,this._pointer.submitDown(b,c,d._source));this.down.emit(d)}},submitMove:function(a,b,c){a=this._pointMap.get(a);null!=a&&(a.init(b,c),this._pointerTouch==a&&this._pointer.submitMove(b,c,a._source),this.move.emit(a))},submitUp:function(a,b,c){var d=this._pointMap.get(a);null!=d&&(d.init(b,c),this._pointMap.remove(a),Q.remove(this._points,d),this._pointerTouch==d&&(this._pointerTouch=null,this._pointer.submitUp(b,c,d._source)),
this.up.emit(d))},__class__:pd};var Oc=function(){};i["flambe.sound.Sound"]=Oc;Oc.__name__=["flambe","sound","Sound"];Oc.__interfaces__=[bd];Oc.prototype={__class__:Oc};var Kb=function(){this._disposed=!1;this._playback=new Ee(this)};i["flambe.platform.DummySound"]=Kb;Kb.__name__=["flambe","platform","DummySound"];Kb.__interfaces__=[Oc];Kb.getInstance=function(){null==Kb._instance&&(Kb._instance=new Kb);return Kb._instance};Kb.__super__=Ra;Kb.prototype=z(Ra.prototype,{play:function(){return this._playback},
loop:function(){return this._playback},onDisposed:function(){},__class__:Kb});var Hd=function(){};i["flambe.sound.Playback"]=Hd;Hd.__name__=["flambe","sound","Playback"];Hd.__interfaces__=[tb];Hd.prototype={__class__:Hd};var Ee=function(a){this._sound=a;this.volume=new pa(0);this._complete=new ya(!0)};i["flambe.platform.DummyPlayback"]=Ee;Ee.__name__=["flambe","platform","DummyPlayback"];Ee.__interfaces__=[Hd];Ee.prototype={set_paused:function(){return!0},get_complete:function(){return this._complete},
dispose:function(){},__class__:Ee};var Fe=function(){};i["flambe.subsystem.StorageSystem"]=Fe;Fe.__name__=["flambe","subsystem","StorageSystem"];Fe.prototype={__class__:Fe};var ue=function(){this.clear()};i["flambe.platform.DummyStorage"]=ue;ue.__name__=["flambe","platform","DummyStorage"];ue.__interfaces__=[Fe];ue.prototype={set:function(a,b){this._hash.set(a,b);return!0},get:function(a,b){return this._hash.exists(a)?this._hash.get(a):b},remove:function(a){this._hash.remove(a)},clear:function(){this._hash=
new ea},__class__:ue};var oe=function(){this.down=new oa;this.move=new oa;this.up=new oa};i["flambe.platform.DummyTouch"]=oe;oe.__name__=["flambe","platform","DummyTouch"];oe.__interfaces__=[Pg];oe.prototype={__class__:oe};var Wd=function(){this._entries=[]};i["flambe.platform.EventGroup"]=Wd;Wd.__name__=["flambe","platform","EventGroup"];Wd.__interfaces__=[tb];Wd.prototype={addListener:function(a,b,c){a.addEventListener(b,c,!1);this._entries.push(new Sf(a,b,c))},addDisposingListener:function(a,b,
c){var d=this;this.addListener(a,b,function(a){d.dispose();c(a)})},dispose:function(){for(var a=0,b=this._entries;a<b.length;){var c=b[a];++a;c.dispatcher.removeEventListener(c.type,c.listener,!1)}this._entries=[]},__class__:Wd};var Sf=function(a,b,c){this.dispatcher=a;this.type=b;this.listener=c};i["flambe.platform._EventGroup.Entry"]=Sf;Sf.__name__=["flambe","platform","_EventGroup","Entry"];Sf.prototype={__class__:Sf};var Ge=function(){};i["flambe.platform.InternalGraphics"]=Ge;Ge.__name__=["flambe",
"platform","InternalGraphics"];Ge.__interfaces__=[Jf];Ge.prototype={__class__:Ge};var Tf=function(){};i["flambe.subsystem.RendererSystem"]=Tf;Tf.__name__=["flambe","subsystem","RendererSystem"];Tf.prototype={__class__:Tf};var He=function(){};i["flambe.platform.InternalRenderer"]=He;He.__name__=["flambe","platform","InternalRenderer"];He.__interfaces__=[Tf];He.prototype={__class__:He};var Pf=function(){};i["flambe.platform.KeyCodes"]=Pf;Pf.__name__=["flambe","platform","KeyCodes"];Pf.toKey=function(a){switch(a){case 65:return h.A;
case 66:return h.B;case 67:return h.C;case 68:return h.D;case 69:return h.E;case 70:return h.F;case 71:return h.G;case 72:return h.H;case 73:return h.I;case 74:return h.J;case 75:return h.K;case 76:return h.L;case 77:return h.M;case 78:return h.N;case 79:return h.O;case 80:return h.P;case 81:return h.Q;case 82:return h.R;case 83:return h.S;case 84:return h.T;case 85:return h.U;case 86:return h.V;case 87:return h.W;case 88:return h.X;case 89:return h.Y;case 90:return h.Z;case 48:return h.Number0;case 49:return h.Number1;
case 50:return h.Number2;case 51:return h.Number3;case 52:return h.Number4;case 53:return h.Number5;case 54:return h.Number6;case 55:return h.Number7;case 56:return h.Number8;case 57:return h.Number9;case 96:return h.Numpad0;case 97:return h.Numpad1;case 98:return h.Numpad2;case 99:return h.Numpad3;case 100:return h.Numpad4;case 101:return h.Numpad5;case 102:return h.Numpad6;case 103:return h.Numpad7;case 104:return h.Numpad8;case 105:return h.Numpad9;case 107:return h.NumpadAdd;case 110:return h.NumpadDecimal;
case 111:return h.NumpadDivide;case 108:return h.NumpadEnter;case 106:return h.NumpadMultiply;case 109:return h.NumpadSubtract;case 112:return h.F1;case 113:return h.F2;case 114:return h.F3;case 115:return h.F4;case 116:return h.F5;case 117:return h.F6;case 118:return h.F7;case 119:return h.F8;case 120:return h.F9;case 121:return h.F10;case 122:return h.F11;case 123:return h.F12;case 37:return h.Left;case 38:return h.Up;case 39:return h.Right;case 40:return h.Down;case 18:return h.Alt;case 192:return h.Backquote;
case 220:return h.Backslash;case 8:return h.Backspace;case 20:return h.CapsLock;case 188:return h.Comma;case 15:return h.Command;case 17:return h.Control;case 46:return h.Delete;case 35:return h.End;case 13:return h.Enter;case 187:return h.Equals;case 27:return h.Escape;case 36:return h.Home;case 45:return h.Insert;case 219:return h.LeftBracket;case 189:return h.Minus;case 34:return h.PageDown;case 33:return h.PageUp;case 190:return h.Period;case 222:return h.Quote;case 221:return h.RightBracket;
case 186:return h.Semicolon;case 16:return h.Shift;case 191:return h.Slash;case 32:return h.Space;case 9:return h.Tab;case 16777234:return h.Menu;case 16777247:return h.Search}return h.Unknown(a)};var od=function(){this._tickables=[]};i["flambe.platform.MainLoop"]=od;od.__name__=["flambe","platform","MainLoop"];od.updateEntity=function(a,b){var c=a._compMap.SpeedAdjuster_7;if(null!=c&&(c._realDt=b,b*=c.scale._value,0>=b)){c.onUpdate(b);return}for(c=a.firstComponent;null!=c;){var d=c.next;0==(c._flags&
1)&&(c._flags|=1,c.onStart());c.onUpdate(b);c=d}for(c=a.firstChild;null!=c;)d=c.next,od.updateEntity(c,b),c=d};od.prototype={update:function(a){if(!(0>=a)){1<a&&(a=1);for(var b=0;b<this._tickables.length;){var c=this._tickables[b];null==c||c.update(a)?this._tickables.splice(b,1):++b}A.volume.update(a);od.updateEntity(A.root,a)}},render:function(a){var b=a.graphics;null!=b&&(a.willRender(),M.render(A.root,b),a.didRender())},addTickable:function(a){this._tickables.push(a)},__class__:od};var Qf=function(){};
i["flambe.platform.MouseCodes"]=Qf;Qf.__name__=["flambe","platform","MouseCodes"];Qf.toButton=function(a){switch(a){case 0:return ua.Left;case 1:return ua.Middle;case 2:return ua.Right}return ua.Unknown(a)};var Uf=function(){};i["flambe.platform.TextureRoot"]=Uf;Uf.__name__=["flambe","platform","TextureRoot"];Uf.prototype={__class__:Uf};var Ie=function(){};i["flambe.platform.Tickable"]=Ie;Ie.__name__=["flambe","platform","Tickable"];Ie.prototype={__class__:Ie};var Je=function(a,b){this._firstDraw=
!1;this._canvasCtx=a.getContext("2d",{alpha:b})};i["flambe.platform.html.CanvasGraphics"]=Je;Je.__name__=["flambe","platform","html","CanvasGraphics"];Je.__interfaces__=[Ge];Je.prototype={save:function(){this._canvasCtx.save()},transform:function(a,b,c,d,f,g){this._canvasCtx.transform(a,b,c,d,f,g)},restore:function(){this._canvasCtx.restore()},drawTexture:function(a,b,c){this.drawSubTexture(a,b,c,0,0,a.get_width(),a.get_height())},drawSubTexture:function(a,b,c,d,f,g,e){this._firstDraw?(this._firstDraw=
!1,this._canvasCtx.globalCompositeOperation="copy",this.drawSubTexture(a,b,c,d,f,g,e),this._canvasCtx.globalCompositeOperation="source-over"):this._canvasCtx.drawImage(a.root.image,a.rootX+d|0,a.rootY+f|0,g|0,e|0,b|0,c|0,g|0,e|0)},fillRect:function(a,b,c,d,f){if(this._firstDraw)this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.fillRect(a,b,c,d,f),this._canvasCtx.globalCompositeOperation="source-over";else{for(a=(16777215&a).toString(16);6>a.length;)a="0"+s.string(a);this._canvasCtx.fillStyle=
"#"+s.string(a);this._canvasCtx.fillRect(b|0,c|0,d|0,f|0)}},multiplyAlpha:function(a){this._canvasCtx.globalAlpha*=a},setBlendMode:function(a){var b;switch(a[1]){case 0:b="source-over";break;case 1:b="lighter";break;case 2:b="multiply";break;case 3:b="screen";break;case 4:b="destination-in";break;case 5:b="copy"}this._canvasCtx.globalCompositeOperation=b},applyScissor:function(a,b,c,d){this._canvasCtx.beginPath();this._canvasCtx.rect(a|0,b|0,c|0,d|0);this._canvasCtx.clip()},willRender:function(){this._firstDraw=
!0},didRender:function(){},__class__:Je};var qd=function(a){this.graphics=new Je(a,!0);this._hasGPU=new ya(!0)};i["flambe.platform.html.CanvasRenderer"]=qd;qd.__name__=["flambe","platform","html","CanvasRenderer"];qd.__interfaces__=[He];qd.prototype={get_type:function(){return fb.Canvas},createTextureFromImage:function(a){a=new Xd(qd.CANVAS_TEXTURES?K.createCanvas(a):a);return a.createTexture(a.width,a.height)},getCompressedTextureFormats:function(){return[]},createCompressedTexture:function(){return null},
willRender:function(){this.graphics.willRender()},didRender:function(){this.graphics.didRender()},__class__:qd};var Ke=function(a,b,c){Nc.call(this,a,b,c)};i["flambe.platform.html.CanvasTexture"]=Ke;Ke.__name__=["flambe","platform","html","CanvasTexture"];Ke.__super__=Nc;Ke.prototype=z(Nc.prototype,{__class__:Ke});var Xd=function(a){this._graphics=null;this._disposed=!1;this.image=a;this.width=a.width;this.height=a.height};i["flambe.platform.html.CanvasTextureRoot"]=Xd;Xd.__name__=["flambe","platform",
"html","CanvasTextureRoot"];Xd.__interfaces__=[Uf];Xd.__super__=Ra;Xd.prototype=z(Ra.prototype,{createTexture:function(a,b){return new Ke(this,a,b)},onDisposed:function(){this._graphics=this.image=null},__class__:Xd});var Y=function(a,b){td.call(this,a,b)};i["flambe.platform.html.HtmlAssetPackLoader"]=Y;Y.__name__=["flambe","platform","html","HtmlAssetPackLoader"];Y.detectImageFormats=function(a){var b=[t.PNG,t.JPG,t.GIF],c=2,d;d=window.document.createElement("img");d.onload=d.onerror=function(){1==
d.width&&b.unshift(t.WEBP);--c;0==c&&a(b)};d.src="data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==";var f;f=window.document.createElement("img");f.onload=f.onerror=function(){1==f.width&&b.unshift(t.JXR);--c;0==c&&a(b)};f.src="data:image/vnd.ms-photo;base64,SUm8AQgAAAAFAAG8AQAQAAAASgAAAIC8BAABAAAAAQAAAIG8BAABAAAAAQAAAMC8BAABAAAAWgAAAMG8BAABAAAAHwAAAAAAAAAkw91vA07+S7GFPXd2jckNV01QSE9UTwAZAYBxAAAAABP/gAAEb/8AAQAAAQAAAA=="};Y.detectAudioFormats=function(){var a;a=window.document.createElement("audio");
if(null==a||null==E(a,a.canPlayType))return[];var b=new Lc("\\b(iPhone|iPod|iPad|Android|Windows Phone)\\b",""),c=window.navigator.userAgent;if(!Z.get_supported()&&b.match(c))return[];for(var b=[{format:t.M4A,mimeType:"audio/mp4; codecs=mp4a"},{format:t.MP3,mimeType:"audio/mpeg"},{format:t.OPUS,mimeType:"audio/ogg; codecs=opus"},{format:t.OGG,mimeType:"audio/ogg; codecs=vorbis"},{format:t.WAV,mimeType:"audio/wav"}],c=[],d=0;d<b.length;){var f=b[d];++d;var g="";try{g=a.canPlayType(f.mimeType)}catch(e){}""!=
g&&c.push(f.format)}return c};Y.supportsBlob=function(){if(Y._detectBlobSupport){Y._detectBlobSupport=!1;if((new Lc("\\bSilk\\b","")).match(window.navigator.userAgent)||null==window.Blob)return!1;var a=new XMLHttpRequest;a.open("GET",".",!0);if(""!=a.responseType)return!1;a.responseType="blob";if("blob"!=a.responseType)return!1;Y._URL=K.loadExtension("URL").value}return null!=Y._URL&&null!=Y._URL.createObjectURL};Y.__super__=td;Y.prototype=z(td.prototype,{loadEntry:function(a,b){var c=this;switch(b.format[1]){case 0:case 1:case 2:case 3:case 4:var d;
d=window.document.createElement("img");var f=new Wd;f.addDisposingListener(d,"load",function(){Y.supportsBlob()&&Y._URL.revokeObjectURL(d.src);var a=c._platform.getRenderer().createTextureFromImage(d);null!=a?c.handleLoad(b,a):c.handleTextureError(b)});f.addDisposingListener(d,"error",function(){c.handleError(b,"Failed to load image")});Y.supportsBlob()?this.download(a,b,"blob",function(a){d.src=Y._URL.createObjectURL(a)}):d.src=a;break;case 5:case 6:case 7:this.download(a,b,"arraybuffer",function(){var a=
c._platform.getRenderer().createCompressedTexture(b.format,null);null!=a?c.handleLoad(b,a):c.handleTextureError(b)});break;case 8:case 9:case 10:case 11:case 12:if(Z.get_supported())this.download(a,b,"arraybuffer",function(a){Z.ctx.decodeAudioData(a,function(a){c.handleLoad(b,new Z(a))},function(){c.handleLoad(b,Kb.getInstance())})});else{var g;g=window.document.createElement("audio");g.preload="auto";var e=++Y._mediaRefCount;null==Y._mediaElements&&(Y._mediaElements=new pb);Y._mediaElements.set(e,
g);f=new Wd;f.addDisposingListener(g,"canplaythrough",function(){Y._mediaElements.remove(e);c.handleLoad(b,new Yd(g))});f.addDisposingListener(g,"error",function(){Y._mediaElements.remove(e);var a=g.error.code;3==a||4==a?c.handleLoad(b,Kb.getInstance()):c.handleError(b,"Failed to load audio: "+g.error.code)});f.addListener(g,"progress",function(){if(0<g.buffered.length&&0<g.duration){var a=g.buffered.end(0)/g.duration;c.handleProgress(b,a*b.bytes|0)}});g.src=a;g.load()}break;case 13:this.download(a,
b,"text",function(a){c.handleLoad(b,new ud(a))})}},getAssetFormats:function(a){var b=this;null==Y._supportedFormats&&(Y._supportedFormats=new Ce,Y.detectImageFormats(function(a){Y._supportedFormats.set_result(b._platform.getRenderer().getCompressedTextureFormats().concat(a).concat(Y.detectAudioFormats()).concat([t.Data]))}));Y._supportedFormats.get(a)},download:function(a,b,c,d){var f=this,g=null,e=null,h=0,n=!1,i=function(){n&&(n=!1,window.clearInterval(h))},l=3,j=function(){--l;return 0<=l?(e(),
!0):!1},e=function(){i();null!=g&&g.abort();g=new XMLHttpRequest;g.open("GET",a,!0);g.responseType=c;var e=0;g.onprogress=function(a){n||(n=!0,h=window.setInterval(function(){4!=g.readyState&&5E3<Date.now()-e&&!j()&&(i(),f.handleError(b,"Download stalled"))},1E3));e=Date.now();f.handleProgress(b,a.loaded)};g.onerror=function(){if(0!=g.status||!j())i(),f.handleError(b,"HTTP error "+g.status)};g.onload=function(){var a=g.response;null==a&&(a=g.responseText);i();d(a)};g.send()};e()},__class__:Y});var Vf=
function(){};i["flambe.subsystem.ExternalSystem"]=Vf;Vf.__name__=["flambe","subsystem","ExternalSystem"];Vf.prototype={__class__:Vf};var ve=function(){};i["flambe.platform.html.HtmlExternal"]=ve;ve.__name__=["flambe","platform","html","HtmlExternal"];ve.__interfaces__=[Vf];ve.prototype={call:function(a,b){null==b&&(b=[]);for(var c=window,d=c,f=0,g=a.split(".");f<g.length;){var e=g[f];++f;c=d;d=Ea.field(c,e)}return d.apply(c,b)},bind:function(a,b){Ea.setField(window,a,b)},__class__:ve};var Dd=function(a,
b){Ab.call(this,a);this._canvas=b};i["flambe.platform.html.HtmlMouse"]=Dd;Dd.__name__=["flambe","platform","html","HtmlMouse"];Dd.__super__=Ab;Dd.prototype=z(Ab.prototype,{__class__:Dd});var Yd=function(a){this._disposed=!1;this.audioElement=a};i["flambe.platform.html.HtmlSound"]=Yd;Yd.__name__=["flambe","platform","html","HtmlSound"];Yd.__interfaces__=[Oc];Yd.__super__=Ra;Yd.prototype=z(Ra.prototype,{play:function(a){null==a&&(a=1);return new re(this,a,!1)},loop:function(a){null==a&&(a=1);return new re(this,
a,!0)},onDisposed:function(){this.audioElement=null},__class__:Yd});var re=function(a,b,c){var d=this;this._sound=a;this._tickableAdded=!1;this._clonedElement=window.document.createElement("audio");this._clonedElement.loop=c;this._clonedElement.src=a.audioElement.src;this.volume=new pa(b,function(){d.updateVolume()});this.updateVolume();this._complete=new ya(!1);this.playAudio();A.hidden._value&&this.set_paused(!0)};i["flambe.platform.html._HtmlSound.HtmlPlayback"]=re;re.__name__=["flambe","platform",
"html","_HtmlSound","HtmlPlayback"];re.__interfaces__=[Ie,Hd];re.prototype={set_paused:function(a){this._clonedElement.paused!=a&&(a?this._clonedElement.pause():this.playAudio());return a},get_complete:function(){return this._complete},update:function(a){this.volume.update(a);this._complete.set__(this._clonedElement.ended);return this._complete._value||this._clonedElement.paused?(this._tickableAdded=!1,this._volumeBinding.dispose(),this._hideBinding.dispose(),!0):!1},dispose:function(){this.set_paused(!0);
this._complete.set__(!0)},playAudio:function(){var a=this;this._clonedElement.play();this._tickableAdded||(rc.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._volumeBinding=A.volume.get_changed().connect(function(){a.updateVolume()}),this._hideBinding=A.hidden.get_changed().connect(function(b){b?(a._wasPaused=a._clonedElement.paused,a.set_paused(!0)):a.set_paused(a._wasPaused)}))},updateVolume:function(){this._clonedElement.volume=A.volume._value*this.volume._value},__class__:re};
var zh=function(){};i["flambe.subsystem.StageSystem"]=zh;zh.__name__=["flambe","subsystem","StageSystem"];var ne=function(a){var b=this;this._canvas=a;this.resize=new dc;this.scaleFactor=1;K.SHOULD_HIDE_MOBILE_BROWSER&&(window.addEventListener("orientationchange",function(){K.callLater(E(b,b.hideMobileBrowser),200)},!1),this.hideMobileBrowser());window.addEventListener("resize",E(this,this.onWindowResize),!1);this.onWindowResize(null);this.orientation=new ya(null);null!=window.orientation&&(window.addEventListener("orientationchange",
E(this,this.onOrientationChange),!1),this.onOrientationChange(null));this.fullscreen=new ya(!1);K.addVendorListener(window.document,"fullscreenchange",function(){b.updateFullscreen()},!1);this.updateFullscreen()};i["flambe.platform.html.HtmlStage"]=ne;ne.__name__=["flambe","platform","html","HtmlStage"];ne.__interfaces__=[zh];ne.prototype={get_width:function(){return this._canvas.width},get_height:function(){return this._canvas.height},onWindowResize:function(){var a=this._canvas.parentElement.getBoundingClientRect();
this.resizeCanvas(a.width,a.height)},resizeCanvas:function(a,b){var c=this.scaleFactor*a,d=this.scaleFactor*b;if(this._canvas.width==c&&this._canvas.height==d)return!1;this._canvas.width=c|0;this._canvas.height=d|0;this.resize.emit();return!0},hideMobileBrowser:function(){var a=this,b=window.document.documentElement.style;b.height=window.innerHeight+100+"px";b.width=window.innerWidth+"px";b.overflow="visible";K.callLater(function(){K.hideMobileBrowser();K.callLater(function(){b.height=window.innerHeight+
"px";a.onWindowResize(null)},100)})},onOrientationChange:function(){this.orientation.set__(K.orientation(window.orientation))},updateFullscreen:function(){this.fullscreen.set__(!0==K.loadFirstExtension(["fullscreen","fullScreen","isFullScreen"],window.document).value)},__class__:ne};var qe=function(a){this._storage=a};i["flambe.platform.html.HtmlStorage"]=qe;qe.__name__=["flambe","platform","html","HtmlStorage"];qe.__interfaces__=[Fe];qe.prototype={set:function(a,b){var c;try{var d=new Pc;d.useCache=
!0;d.useEnumIndex=!1;d.serialize(b);c=d.toString()}catch(f){return!1}try{this._storage.setItem("flambe:"+a,c)}catch(g){return!1}return!0},get:function(a,b){var c=null;try{c=this._storage.getItem("flambe:"+a)}catch(d){null}if(null!=c)try{return Sa.run(c)}catch(f){null}return b},remove:function(a){try{this._storage.removeItem("flambe:"+a)}catch(b){null}},__class__:qe};var K=function(){};i["flambe.platform.html.HtmlUtil"]=K;K.__name__=["flambe","platform","html","HtmlUtil"];K.callLater=function(a,b){null==
b&&(b=0);window.setTimeout(a,b)};K.hideMobileBrowser=function(){window.scrollTo(1,0)};K.loadExtension=function(a,b){null==b&&(b=window);var c=Ea.field(b,a);if(null!=c)return{prefix:"",field:a,value:c};for(var c=a.charAt(0).toUpperCase()+Q.substr(a,1,null),d=0,f=K.VENDOR_PREFIXES;d<f.length;){var g=f[d];++d;var e=g+c,h=Ea.field(b,e);if(null!=h)return{prefix:g,field:e,value:h}}return{prefix:null,field:null,value:null}};K.loadFirstExtension=function(a,b){for(var c=0;c<a.length;){var d=a[c];++c;d=K.loadExtension(d,
b);if(null!=d.field)return d}return{prefix:null,field:null,value:null}};K.polyfill=function(a,b){null==b&&(b=window);var c=K.loadExtension(a,b).value;if(null==c)return!1;b[a]=c;return!0};K.addVendorListener=function(a,b,c,d){for(var f=0,g=K.VENDOR_PREFIXES;f<g.length;){var e=g[f];++f;a.addEventListener(e+b,c,d)}a.addEventListener(b,c,d)};K.orientation=function(a){switch(a){case -90:case 90:return cc.Landscape;default:return cc.Portrait}};K.createEmptyCanvas=function(a,b){var c;c=window.document.createElement("canvas");
c.width=a;c.height=b;return c};K.createCanvas=function(a){var b=K.createEmptyCanvas(a.width,a.height),c=b.getContext("2d");c.save();c.globalCompositeOperation="copy";c.drawImage(a,0,0);c.restore();return b};K.fixAndroidMath=function(){if(0<=window.navigator.userAgent.indexOf("Linux; U; Android 4")){var a=Math.sin,b=Math.cos;Math.sin=function(b){return 0==b?0:a(b)};Math.cos=function(a){return 0==a?1:b(a)}}};var Z=function(a){this._disposed=!1;this.buffer=a};i["flambe.platform.html.WebAudioSound"]=
Z;Z.__name__=["flambe","platform","html","WebAudioSound"];Z.__interfaces__=[Oc];Z.get_supported=function(){if(Z._detectSupport){Z._detectSupport=!1;var a=K.loadExtension("AudioContext").value;null!=a&&(Z.ctx=new a,Z.gain=Z.createGain(),Z.gain.connect(Z.ctx.destination),A.volume.watch(function(a){Z.gain.gain.value=a}))}return null!=Z.ctx};Z.createGain=function(){return null!=Z.ctx.createGain?Z.ctx.createGain():Z.ctx.createGainNode()};Z.start=function(a,b){null!=a.start?a.start(b):a.noteOn(b)};Z.__super__=
Ra;Z.prototype=z(Ra.prototype,{play:function(a){null==a&&(a=1);return new Id(this,a,!1)},loop:function(a){null==a&&(a=1);return new Id(this,a,!0)},get_duration:function(){return this.buffer.duration},onDisposed:function(){this.buffer=null},__class__:Z});var Id=function(a,b,c){var d=this;this._sound=a;this._head=Z.gain;this._complete=new ya(!1);this._sourceNode=Z.ctx.createBufferSource();this._sourceNode.buffer=a.buffer;this._sourceNode.loop=c;this._sourceNode.onended=function(){d._complete.set__(!0)};
Z.start(this._sourceNode,0);this.playAudio();this.volume=new pa(b,function(a){d.setVolume(a)});1!=b&&this.setVolume(b);A.hidden._value&&this.set_paused(!0)};i["flambe.platform.html._WebAudioSound.WebAudioPlayback"]=Id;Id.__name__=["flambe","platform","html","_WebAudioSound","WebAudioPlayback"];Id.__interfaces__=[Ie,Hd];Id.prototype={set_paused:function(a){a!=0<=this._pausedAt&&(a?(this._sourceNode.disconnect(),this._pausedAt=this.get_position()):this.playAudio());return a},get_complete:function(){return this._complete},
get_position:function(){return this._complete._value?this._sound.get_duration():0<=this._pausedAt?this._pausedAt:(Z.ctx.currentTime-this._startedAt)%this._sound.get_duration()},update:function(a){this.volume.update(a);3==this._sourceNode.playbackState&&this._complete.set__(!0);return this._complete._value||0<=this._pausedAt?(this._tickableAdded=!1,this._hideBinding.dispose(),!0):!1},dispose:function(){this.set_paused(!0);this._complete.set__(!0)},setVolume:function(a){null==this._gainNode&&(this._gainNode=
Z.createGain(),this.insertNode(this._gainNode));this._gainNode.gain.value=a},insertNode:function(a){0<=this._pausedAt||(this._sourceNode.disconnect(),this._sourceNode.connect(a));a.connect(this._head);this._head=a},playAudio:function(){var a=this;this._sourceNode.connect(this._head);this._startedAt=Z.ctx.currentTime;this._pausedAt=-1;this._tickableAdded||(rc.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._hideBinding=A.hidden.get_changed().connect(function(b){b?(a._wasPaused=0<=a._pausedAt,
a.set_paused(!0)):a.set_paused(a._wasPaused)}))},__class__:Id};var Le=function(){this._transitor=null;u.call(this);this.scenes=[];this.occludedScenes=[];this._root=new p};i["flambe.scene.Director"]=Le;Le.__name__=["flambe","scene","Director"];Le.__super__=u;Le.prototype=z(u.prototype,{get_name:function(){return"Director_26"},pushScene:function(a,b){var c=this;this.completeTransition();var d=this.get_topScene();null!=d?this.playTransition(d,a,b,function(){c.hide(d)}):(this.add(a),this.invalidateVisibility())},
unwindToScene:function(a,b){var c=this;this.completeTransition();var d=this.get_topScene();if(null!=d){if(d!=a){for(this.scenes.pop();0<this.scenes.length&&this.scenes[this.scenes.length-1]!=a;)this.scenes.pop().dispose();this.playTransition(d,a,b,function(){c.hideAndDispose(d)})}}else this.pushScene(a,b)},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.completeTransition();for(var a=0,b=this.scenes;a<b.length;){var c=b[a];++a;c.dispose()}this.scenes=[];this.occludedScenes=
[];this._root.dispose()},onUpdate:function(a){null!=this._transitor&&this._transitor.update(a)&&this.completeTransition()},get_topScene:function(){var a=this.scenes.length;return 0<a?this.scenes[a-1]:null},add:function(a){var b=this.get_topScene();null!=b&&this._root.removeChild(b);Q.remove(this.scenes,a);this.scenes.push(a);this._root.addChild(a)},hide:function(a){a=a._compMap.Scene_0;null!=a&&a.hidden.emit()},hideAndDispose:function(a){this.hide(a);a.dispose()},show:function(a){a=a._compMap.Scene_0;
null!=a&&a.shown.emit()},invalidateVisibility:function(){for(var a=this.scenes.length;0<a;){var b=this.scenes[--a]._compMap.Scene_0;if(null==b||b.opaque)break}this.occludedScenes=0<this.scenes.length?this.scenes.slice(a,this.scenes.length-1):[];a=this.get_topScene();null!=a&&this.show(a)},completeTransition:function(){null!=this._transitor&&(this._transitor.complete(),this._transitor=null,this.invalidateVisibility())},playTransition:function(a,b,c,d){this.completeTransition();this.add(b);null!=c?
(this.occludedScenes.push(a),this._transitor=new Wf(a,b,c,d),this._transitor.init(this)):(d(),this.invalidateVisibility())},__class__:Le});var Wf=function(a,b,c,d){this._from=a;this._to=b;this._transition=c;this._onComplete=d};i["flambe.scene._Director.Transitor"]=Wf;Wf.__name__=["flambe","scene","_Director","Transitor"];Wf.prototype={init:function(a){this._transition.init(a,this._from,this._to)},update:function(a){return this._transition.update(a)},complete:function(){this._transition.complete();
this._onComplete()},__class__:Wf};var Zd=function(){};i["flambe.scene.Transition"]=Zd;Zd.__name__=["flambe","scene","Transition"];Zd.prototype={init:function(a,b,c){this._director=a;this._from=b;this._to=c},update:function(){return!0},complete:function(){},__class__:Zd};var Bb=function(a,b){this._duration=a;this._ease=null!=b?b:Jb.linear};i["flambe.scene.TweenTransition"]=Bb;Bb.__name__=["flambe","scene","TweenTransition"];Bb.__super__=Zd;Bb.prototype=z(Zd.prototype,{init:function(a,b,c){Zd.prototype.init.call(this,
a,b,c);this._elapsed=0},update:function(a){this._elapsed+=a;return this._elapsed>=this._duration},interp:function(a,b){return a+(b-a)*this._ease(this._elapsed/this._duration)},__class__:Bb});var $d=function(a,b){Bb.call(this,a,b)};i["flambe.scene.FadeTransition"]=$d;$d.__name__=["flambe","scene","FadeTransition"];$d.__super__=Bb;$d.prototype=z(Bb.prototype,{init:function(a,b,c){Bb.prototype.init.call(this,a,b,c);a=this._to._compMap.Sprite_24;null==a&&this._to.add(a=new M);a.alpha.set__(0)},update:function(a){a=
Bb.prototype.update.call(this,a);this._to._compMap.Sprite_24.alpha.set__(this.interp(0,1));return a},complete:function(){this._to._compMap.Sprite_24.alpha.set__(1)},__class__:$d});var Qc=function(a){null==a&&(a=!0);u.call(this);this.opaque=a;this.shown=new dc;this.hidden=new dc};i["flambe.scene.Scene"]=Qc;Qc.__name__=["flambe","scene","Scene"];Qc.__super__=u;Qc.prototype=z(u.prototype,{get_name:function(){return"Scene_0"},__class__:Qc});var vd=function(){};i["flambe.script.Action"]=vd;vd.__name__=
["flambe","script","Action"];vd.prototype={__class__:vd};var V=function(a){this._fn=a};i["flambe.script.CallFunction"]=V;V.__name__=["flambe","script","CallFunction"];V.__interfaces__=[vd];V.prototype={update:function(){this._fn();return 0},__class__:V};var qa=function(a){this._duration=a;this._elapsed=0};i["flambe.script.Delay"]=qa;qa.__name__=["flambe","script","Delay"];qa.__interfaces__=[vd];qa.prototype={update:function(a){this._elapsed+=a;if(this._elapsed>=this._duration){var b=this._elapsed-
this._duration;this._elapsed=0;return a-b}return-1},__class__:qa};var Ia=function(){u.call(this);this.stopAll()};i["flambe.script.Script"]=Ia;Ia.__name__=["flambe","script","Script"];Ia.__super__=u;Ia.prototype=z(u.prototype,{get_name:function(){return"Script_25"},run:function(a){a=new Me(a);this._handles.push(a);return a},stopAll:function(){this._handles=[]},onUpdate:function(a){for(var b=0;b<this._handles.length;){var c=this._handles[b];c.removed||0<=c.action.update(a,this.owner)?this._handles.splice(b,
1):++b}},__class__:Ia});var Me=function(a){this.removed=!1;this.action=a};i["flambe.script._Script.Handle"]=Me;Me.__name__=["flambe","script","_Script","Handle"];Me.__interfaces__=[tb];Me.prototype={dispose:function(){this.removed=!0;this.action=null},__class__:Me};var va=function(a){this._idx=0;this._runningActions=null!=a?a.slice():[]};i["flambe.script.Sequence"]=va;va.__name__=["flambe","script","Sequence"];va.__interfaces__=[vd];va.prototype={removeAll:function(){this._idx=0;this._runningActions=
[]},update:function(a,b){for(var c=0;;){var d=this._runningActions[this._idx];if(null!=d)if(d=d.update(a-c,b),0<=d)c+=d;else return-1;++this._idx;if(this._idx>=this._runningActions.length){this._idx=0;break}else if(c>a)return-1}return c},__class__:va};var fb=i["flambe.subsystem.RendererType"]={__ename__:["flambe","subsystem","RendererType"],__constructs__:["Stage3D","WebGL","Canvas"]};fb.Stage3D=["Stage3D",0];fb.Stage3D.toString=k;fb.Stage3D.__enum__=fb;fb.WebGL=["WebGL",1];fb.WebGL.toString=k;fb.WebGL.__enum__=
fb;fb.Canvas=["Canvas",2];fb.Canvas.toString=k;fb.Canvas.__enum__=fb;fb.__empty_constructs__=[fb.Stage3D,fb.WebGL,fb.Canvas];var Ne=function(){};i["flambe.swf.Symbol"]=Ne;Ne.__name__=["flambe","swf","Symbol"];Ne.prototype={__class__:Ne};var Oe=function(a,b){this._name=a.symbol;var c=a.rect;this.texture=b.subTexture(c[0],c[1],c[2],c[3]);c=a.origin;null!=c?(this.anchorX=c[0],this.anchorY=c[1]):this.anchorY=this.anchorX=0};i["flambe.swf.BitmapSymbol"]=Oe;Oe.__name__=["flambe","swf","BitmapSymbol"];Oe.__interfaces__=
[Ne];Oe.prototype={createSprite:function(){var a=new za(this.texture);a.setAnchor(this.anchorX,this.anchorY);return a},__class__:Oe};var Qe=function(a,b){this._file=a.getFile(b+"/library.json");var c=JSON.parse(this._file.toString());this._symbols=new ea;this.frameRate=c.frameRate;for(var d=[],f=0,g=c.movies;f<g.length;){var e=g[f];++f;e=new Pe(this,e);d.push(e);this._symbols.set(e._name,e)}c=c.textureGroups;(1!=c[0].scaleFactor||1<c.length)&&null;c=c[0].atlases;for(f=0;f<c.length;){var h=c[f];++f;
g=a.getTexture(b+"/"+Qa.removeFileExtension(h.file));e=0;for(h=h.textures;e<h.length;){var n=h[e];++e;n=new Oe(n,g);this._symbols.set(n._name,n)}}for(c=0;c<d.length;){g=d[c];++c;f=0;for(g=g.layers;f<g.length;){e=g[f];++f;e=e.keyframes;h=e.length;for(n=0;n<h;){var i=n++,l=e[i];if(null!=l.symbolName){var j=this._symbols.get(l.symbolName);l.symbol=j}if(l.tweened&&1==l.duration&&i+1<h&&(i=e[i+1],!i.visible||null==i.symbolName))l.visible=!1}}}};i["flambe.swf.Library"]=Qe;Qe.__name__=["flambe","swf","Library"];
Qe.prototype={createSprite:function(a,b){null==b&&(b=!0);var c=this._symbols.get(a);if(null==c){if(b)throw Qa.withFields("Missing symbol",["name",a]);return null}return c.createSprite()},__class__:Qe};var dd=function(a){this._oneshotSprite=this._loopingSprite=null;u.call(this);this._lib=a;this._root=new p;this.movie=new ya(null);this.setCache(!0)};i["flambe.swf.MoviePlayer"]=dd;dd.__name__=["flambe","swf","MoviePlayer"];dd.__super__=u;dd.prototype=z(u.prototype,{get_name:function(){return"MoviePlayer_2"},
setCache:function(a){this._cache=a?new ea:null;return this},loop:function(a,b){null==b&&(b=!0);if(b||null==this._loopingSprite||this._loopingSprite.symbol._name!=a)this._oneshotSprite=null,this._loopingSprite=this.playFromCache(a);return this},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this._root.dispose();this._oneshotSprite=this._loopingSprite=null;this.movie.set__(null)},onUpdate:function(a){null!=this._oneshotSprite&&this._oneshotSprite._position+a>this._oneshotSprite.symbol.duration&&
(this._oneshotSprite=null,this.setCurrent(this._loopingSprite))},playFromCache:function(a){var b;null!=this._cache?(b=this._cache.get(a),null!=b?b.set_position(0):(b=this.createMovie(a),this._cache.set(a,b))):b=this.createMovie(a);return this.setCurrent(b)},createMovie:function(a){a=this._lib.createSprite(a,!0);null!=this._decorator&&this._decorator(a);return a},setCurrent:function(a){this._root.add(a);return this.movie.set__(a)},__class__:dd});var ed=function(a){this._looped=null;M.call(this);this.symbol=
a;this.speed=new pa(1);this._animators=Array(a.layers.length);for(var b=0,c=this._animators.length;b<c;){var d=b++;this._animators[d]=new Xf(a.layers[d])}this._position=this._frame=0;this["goto"](1)};i["flambe.swf.MovieSprite"]=ed;ed.__name__=["flambe","swf","MovieSprite"];ed.__super__=M;ed.prototype=z(M.prototype,{onAdded:function(){M.prototype.onAdded.call(this);for(var a=0,b=this._animators;a<b.length;){var c=b[a];++a;this.owner.addChild(c.content)}},onRemoved:function(){M.prototype.onRemoved.call(this);
for(var a=0,b=this._animators;a<b.length;){var c=b[a];++a;this.owner.removeChild(c.content)}},onUpdate:function(a){M.prototype.onUpdate.call(this,a);this.speed.update(a);switch(this._flags&384){case 0:this._position+=this.speed._value*a;this._position>this.symbol.duration&&(this._position%=this.symbol.duration,null!=this._looped&&this._looped.emit());break;case 256:this._flags&=-257}this["goto"](this._position*this.symbol.frameRate)},"goto":function(a){if(this._frame!=a){if(a<this._frame)for(var b=
0,c=this._animators;b<c.length;){var d=c[b];++b;d.needsKeyframeUpdate=!0;d.keyframeIdx=0}b=0;for(c=this._animators;b<c.length;)d=c[b],++b,d.composeFrame(a);this._frame=a}},set_position:function(a){return this._position=Gd.clamp(a,0,this.symbol.duration)},rewind:function(){this._position=0;this._flags|=256},__class__:ed});var Xf=function(a){this.keyframeIdx=0;this.needsKeyframeUpdate=!1;this.layer=a;this.content=new p;if(a.empty)this._sprites=null;else{this._sprites=Array(a.keyframes.length);for(var b=
0,c=this._sprites.length;b<c;){var d=b++,f=a.keyframes[d];this._sprites[d]=0<d&&a.keyframes[d-1].symbol==f.symbol?this._sprites[d-1]:null==f.symbol?new M:f.symbol.createSprite()}this.content.add(this._sprites[0])}};i["flambe.swf._MovieSprite.LayerAnimator"]=Xf;Xf.__name__=["flambe","swf","_MovieSprite","LayerAnimator"];Xf.prototype={composeFrame:function(a){if(null!=this._sprites){var b=this.layer.keyframes,c=b.length-1;if(a>this.layer.frames)this.content._compMap.Sprite_24.set_visible(!1),this.keyframeIdx=
c,this.needsKeyframeUpdate=!0;else{for(;this.keyframeIdx<c&&b[this.keyframeIdx+1].index<=a;)++this.keyframeIdx,this.needsKeyframeUpdate=!0;var d;this.needsKeyframeUpdate?(this.needsKeyframeUpdate=!1,d=this._sprites[this.keyframeIdx],d!=this.content._compMap.Sprite_24&&(na.getClass(d)==ed&&d.rewind(),this.content.add(d))):d=this.content._compMap.Sprite_24;var f=b[this.keyframeIdx],g=f.visible&&null!=f.symbol;d.set_visible(g);if(g){var g=f.x,e=f.y,h=f.scaleX,n=f.scaleY,i=f.skewX,l=f.skewY,j=f.alpha;
if(f.tweened&&this.keyframeIdx<c){a=(a-f.index)/f.duration;c=f.ease;if(0!=c){var k;0>c?(k=1-a,k=1-k*k,c=-c):k=a*a;a=c*k+(1-c)*a}b=b[this.keyframeIdx+1];g+=(b.x-g)*a;e+=(b.y-e)*a;h+=(b.scaleX-h)*a;n+=(b.scaleY-n)*a;i+=(b.skewX-i)*a;l+=(b.skewY-l)*a;j+=(b.alpha-j)*a}b=d.getLocalMatrix();a=Math.sin(i);i=Math.cos(i);c=Math.sin(l);l=Math.cos(l);b.set(l*h,c*h,-a*n,i*n,g,e);b.translate(-f.pivotX,-f.pivotY);d.alpha.set__(j)}}}},__class__:Xf};var Pe=function(a,b){this._name=b.id;this.frameRate=a.frameRate;
this.frames=0;this.layers=Array(b.layers.length);for(var c=0,d=this.layers.length;c<d;){var f=c++,g=new Yf(b.layers[f]);this.frames=Math.max(g.frames,this.frames);this.layers[f]=g}this.duration=this.frames/this.frameRate};i["flambe.swf.MovieSymbol"]=Pe;Pe.__name__=["flambe","swf","MovieSymbol"];Pe.__interfaces__=[Ne];Pe.prototype={createSprite:function(){return new ed(this)},__class__:Pe};var Yf=function(a){this.empty=!0;this.name=a.name;var b=null;this.keyframes=Array(a.keyframes.length);for(var c=
0,d=this.keyframes.length;c<d;){var f=c++,b=new Zf(a.keyframes[f],b);this.keyframes[f]=b;this.empty=this.empty&&null==b.symbolName}this.frames=null!=b?b.index+b.duration:0};i["flambe.swf.MovieLayer"]=Yf;Yf.__name__=["flambe","swf","MovieLayer"];Yf.prototype={__class__:Yf};var Zf=function(a,b){this.ease=0;this.visible=this.tweened=!0;this.alpha=1;this.skewX=this.skewY=this.pivotX=this.pivotY=0;this.scaleX=this.scaleY=1;this.x=this.y=0;this.symbol=null;this.index=null!=b?b.index+b.duration:0;this.duration=
a.duration;this.label=a.label;this.symbolName=a.ref;var c=a.loc;null!=c&&(this.x=c[0],this.y=c[1]);c=a.scale;null!=c&&(this.scaleX=c[0],this.scaleY=c[1]);c=a.skew;null!=c&&(this.skewX=c[0],this.skewY=c[1]);c=a.pivot;null!=c&&(this.pivotX=c[0],this.pivotY=c[1]);null!=a.alpha&&(this.alpha=a.alpha);null!=a.visible&&(this.visible=a.visible);null!=a.tweened&&(this.tweened=a.tweened);null!=a.ease&&(this.ease=a.ease)};i["flambe.swf.MovieKeyframe"]=Zf;Zf.__name__=["flambe","swf","MovieKeyframe"];Zf.prototype=
{__class__:Zf};var Ng=function(){};i["flambe.util.Assert"]=Ng;Ng.__name__=["flambe","util","Assert"];Ng.that=function(){};var Gf=function(){};i["flambe.util.BitSets"]=Gf;Gf.__name__=["flambe","util","BitSets"];Gf.set=function(a,b,c){return c?a|b:a&~b};var Ce=function(){this.success=new oa;this.error=new oa;this.progressChanged=new dc;this.hasResult=!1;this._total=this._progress=0};i["flambe.util.Promise"]=Ce;Ce.__name__=["flambe","util","Promise"];Ce.prototype={set_result:function(a){if(this.hasResult)throw"Promise result already assigned";
this._result=a;this.hasResult=!0;this.success.emit(a);return a},get:function(a){return this.hasResult?(a(this._result),null):this.success.connect(a).once()},set_progress:function(a){this._progress!=a&&(this._progress=a,this.progressChanged.emit());return a},set_total:function(a){this._total!=a&&(this._total=a,this.progressChanged.emit());return a},__class__:Ce};var $f=function(a){this._state=null!=a?a:Math.floor(2147483647*Math.random())};i["flambe.util.Random"]=$f;$f.__name__=["flambe","util","Random"];
$f.prototype={nextInt:function(){return this._state=(1103515245*this._state+12345)%2147483647},__class__:$f};var dc=function(a){Ha.call(this,a)};i["flambe.util.Signal0"]=dc;dc.__name__=["flambe","util","Signal0"];dc.__super__=Ha;dc.prototype=z(Ha.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(){var a=this;this._head==Ha.DISPATCHING_SENTINEL?this.defer(function(){a.emitImpl()}):this.emitImpl()},emitImpl:function(){for(var a=this.willEmit(),b=a;null!=b;)b._listener(),
b.stayInList||b.dispose(),b=b._next;this.didEmit(a)},__class__:dc});var Bf=function(a){this.next=null;this.fn=a};i["flambe.util._SignalBase.Task"]=Bf;Bf.__name__=["flambe","util","_SignalBase","Task"];Bf.prototype={__class__:Bf};var Qa=function(){};i["flambe.util.Strings"]=Qa;Qa.__name__=["flambe","util","Strings"];Qa.getFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?Q.substr(a,b+1,null):null};Qa.removeFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?Q.substr(a,0,b):a};
Qa.getUrlExtension=function(a){var b=a.lastIndexOf("?");0<=b&&(a=Q.substr(a,0,b));b=a.lastIndexOf("/");0<=b&&(a=Q.substr(a,b+1,null));return Qa.getFileExtension(a)};Qa.joinPath=function(a,b){0<a.length&&47!=a.charCodeAt(a.length-1)&&(a+="/");return a+b};Qa.withFields=function(a,b){var c=b.length;if(0<c){for(var a=0<a.length?a+" [":a+"[",d=0;d<c;){0<d&&(a+=", ");var f=b[d],g=b[d+1];if(s.is(g,Error)){var e=g.stack;null!=e&&(g=e)}a+=f+"="+s.string(g);d+=2}a+="]"}return a};var ma=i["globals.NDiTypeScene"]=
{__ename__:["globals","NDiTypeScene"],__constructs__:["NDI_TYPE_SCENE_NONE","NDI_TYPE_SCENE_LOADING","NDI_TYPE_SCENE_TEST","NDI_TYPE_SCENE_RUNNER"]};ma.NDI_TYPE_SCENE_NONE=["NDI_TYPE_SCENE_NONE",0];ma.NDI_TYPE_SCENE_NONE.toString=k;ma.NDI_TYPE_SCENE_NONE.__enum__=ma;ma.NDI_TYPE_SCENE_LOADING=["NDI_TYPE_SCENE_LOADING",1];ma.NDI_TYPE_SCENE_LOADING.toString=k;ma.NDI_TYPE_SCENE_LOADING.__enum__=ma;ma.NDI_TYPE_SCENE_TEST=["NDI_TYPE_SCENE_TEST",2];ma.NDI_TYPE_SCENE_TEST.toString=k;ma.NDI_TYPE_SCENE_TEST.__enum__=
ma;ma.NDI_TYPE_SCENE_RUNNER=["NDI_TYPE_SCENE_RUNNER",3];ma.NDI_TYPE_SCENE_RUNNER.toString=k;ma.NDI_TYPE_SCENE_RUNNER.__enum__=ma;ma.__empty_constructs__=[ma.NDI_TYPE_SCENE_NONE,ma.NDI_TYPE_SCENE_LOADING,ma.NDI_TYPE_SCENE_TEST,ma.NDI_TYPE_SCENE_RUNNER];var w=i["globals.NDiObjectiveType"]={__ename__:["globals","NDiObjectiveType"],__constructs__:"NONE,RUN_NUM_METERS,PICK_NUM_COINS,NO_INV_NUM_METERS,PICK_NUM_RINGS,NUM_INVINCIBLE,SURVIVE_NUM_DAYS,PLAYER_JUMPS,PLAYER_DOUBLE_JUMPS,PICK_NUM_BAGS_COINS,THEO_NUM_DOUBLE_JUMPS,LUC_NUM_DOUBLE_JUMPS,NUM_GOLF_CART,NUM_GIANT_BURRITO".split(",")};
w.NONE=["NONE",0];w.NONE.toString=k;w.NONE.__enum__=w;w.RUN_NUM_METERS=["RUN_NUM_METERS",1];w.RUN_NUM_METERS.toString=k;w.RUN_NUM_METERS.__enum__=w;w.PICK_NUM_COINS=["PICK_NUM_COINS",2];w.PICK_NUM_COINS.toString=k;w.PICK_NUM_COINS.__enum__=w;w.NO_INV_NUM_METERS=["NO_INV_NUM_METERS",3];w.NO_INV_NUM_METERS.toString=k;w.NO_INV_NUM_METERS.__enum__=w;w.PICK_NUM_RINGS=["PICK_NUM_RINGS",4];w.PICK_NUM_RINGS.toString=k;w.PICK_NUM_RINGS.__enum__=w;w.NUM_INVINCIBLE=["NUM_INVINCIBLE",5];w.NUM_INVINCIBLE.toString=
k;w.NUM_INVINCIBLE.__enum__=w;w.SURVIVE_NUM_DAYS=["SURVIVE_NUM_DAYS",6];w.SURVIVE_NUM_DAYS.toString=k;w.SURVIVE_NUM_DAYS.__enum__=w;w.PLAYER_JUMPS=["PLAYER_JUMPS",7];w.PLAYER_JUMPS.toString=k;w.PLAYER_JUMPS.__enum__=w;w.PLAYER_DOUBLE_JUMPS=["PLAYER_DOUBLE_JUMPS",8];w.PLAYER_DOUBLE_JUMPS.toString=k;w.PLAYER_DOUBLE_JUMPS.__enum__=w;w.PICK_NUM_BAGS_COINS=["PICK_NUM_BAGS_COINS",9];w.PICK_NUM_BAGS_COINS.toString=k;w.PICK_NUM_BAGS_COINS.__enum__=w;w.THEO_NUM_DOUBLE_JUMPS=["THEO_NUM_DOUBLE_JUMPS",10];w.THEO_NUM_DOUBLE_JUMPS.toString=
k;w.THEO_NUM_DOUBLE_JUMPS.__enum__=w;w.LUC_NUM_DOUBLE_JUMPS=["LUC_NUM_DOUBLE_JUMPS",11];w.LUC_NUM_DOUBLE_JUMPS.toString=k;w.LUC_NUM_DOUBLE_JUMPS.__enum__=w;w.NUM_GOLF_CART=["NUM_GOLF_CART",12];w.NUM_GOLF_CART.toString=k;w.NUM_GOLF_CART.__enum__=w;w.NUM_GIANT_BURRITO=["NUM_GIANT_BURRITO",13];w.NUM_GIANT_BURRITO.toString=k;w.NUM_GIANT_BURRITO.__enum__=w;w.__empty_constructs__=[w.NONE,w.RUN_NUM_METERS,w.PICK_NUM_COINS,w.NO_INV_NUM_METERS,w.PICK_NUM_RINGS,w.NUM_INVINCIBLE,w.SURVIVE_NUM_DAYS,w.PLAYER_JUMPS,
w.PLAYER_DOUBLE_JUMPS,w.PICK_NUM_BAGS_COINS,w.THEO_NUM_DOUBLE_JUMPS,w.LUC_NUM_DOUBLE_JUMPS,w.NUM_GOLF_CART,w.NUM_GIANT_BURRITO];var Lb=i["globals.NDiVarsToSave"]={__ename__:["globals","NDiVarsToSave"],__constructs__:["MUTE_MUSIC","MUTE_SOUNDS"]};Lb.MUTE_MUSIC=["MUTE_MUSIC",0];Lb.MUTE_MUSIC.toString=k;Lb.MUTE_MUSIC.__enum__=Lb;Lb.MUTE_SOUNDS=["MUTE_SOUNDS",1];Lb.MUTE_SOUNDS.toString=k;Lb.MUTE_SOUNDS.__enum__=Lb;Lb.__empty_constructs__=[Lb.MUTE_MUSIC,Lb.MUTE_SOUNDS];var j=i["globals.NDiObjectType"]=
{__ename__:["globals","NDiObjectType"],__constructs__:"COIN,COINBAG,RING,RUNNING_ENEMY,SPIKE_BOX,BOX,BOX2,BOX3,NEXT_ROOM,REBOOT_TRIGGER,TEDDYBEAR,BEAR,TWISTER,BABYCHICK,MOTORCYCLETACO,HOTDOGWALK,BUGERWALLK,GOLFCARTLESSARD,GIANTBURRITO,JESSERUN,CAR001,CAR002,RADIOACTIVETANK,BULL,COW,TAWNYBLOCKICE,WALL,RECORDWALL".split(",")};j.COIN=["COIN",0];j.COIN.toString=k;j.COIN.__enum__=j;j.COINBAG=["COINBAG",1];j.COINBAG.toString=k;j.COINBAG.__enum__=j;j.RING=["RING",2];j.RING.toString=k;j.RING.__enum__=j;j.RUNNING_ENEMY=
["RUNNING_ENEMY",3];j.RUNNING_ENEMY.toString=k;j.RUNNING_ENEMY.__enum__=j;j.SPIKE_BOX=["SPIKE_BOX",4];j.SPIKE_BOX.toString=k;j.SPIKE_BOX.__enum__=j;j.BOX=["BOX",5];j.BOX.toString=k;j.BOX.__enum__=j;j.BOX2=["BOX2",6];j.BOX2.toString=k;j.BOX2.__enum__=j;j.BOX3=["BOX3",7];j.BOX3.toString=k;j.BOX3.__enum__=j;j.NEXT_ROOM=["NEXT_ROOM",8];j.NEXT_ROOM.toString=k;j.NEXT_ROOM.__enum__=j;j.REBOOT_TRIGGER=["REBOOT_TRIGGER",9];j.REBOOT_TRIGGER.toString=k;j.REBOOT_TRIGGER.__enum__=j;j.TEDDYBEAR=["TEDDYBEAR",10];
j.TEDDYBEAR.toString=k;j.TEDDYBEAR.__enum__=j;j.BEAR=["BEAR",11];j.BEAR.toString=k;j.BEAR.__enum__=j;j.TWISTER=["TWISTER",12];j.TWISTER.toString=k;j.TWISTER.__enum__=j;j.BABYCHICK=["BABYCHICK",13];j.BABYCHICK.toString=k;j.BABYCHICK.__enum__=j;j.MOTORCYCLETACO=["MOTORCYCLETACO",14];j.MOTORCYCLETACO.toString=k;j.MOTORCYCLETACO.__enum__=j;j.HOTDOGWALK=["HOTDOGWALK",15];j.HOTDOGWALK.toString=k;j.HOTDOGWALK.__enum__=j;j.BUGERWALLK=["BUGERWALLK",16];j.BUGERWALLK.toString=k;j.BUGERWALLK.__enum__=j;j.GOLFCARTLESSARD=
["GOLFCARTLESSARD",17];j.GOLFCARTLESSARD.toString=k;j.GOLFCARTLESSARD.__enum__=j;j.GIANTBURRITO=["GIANTBURRITO",18];j.GIANTBURRITO.toString=k;j.GIANTBURRITO.__enum__=j;j.JESSERUN=["JESSERUN",19];j.JESSERUN.toString=k;j.JESSERUN.__enum__=j;j.CAR001=["CAR001",20];j.CAR001.toString=k;j.CAR001.__enum__=j;j.CAR002=["CAR002",21];j.CAR002.toString=k;j.CAR002.__enum__=j;j.RADIOACTIVETANK=["RADIOACTIVETANK",22];j.RADIOACTIVETANK.toString=k;j.RADIOACTIVETANK.__enum__=j;j.BULL=["BULL",23];j.BULL.toString=k;
j.BULL.__enum__=j;j.COW=["COW",24];j.COW.toString=k;j.COW.__enum__=j;j.TAWNYBLOCKICE=["TAWNYBLOCKICE",25];j.TAWNYBLOCKICE.toString=k;j.TAWNYBLOCKICE.__enum__=j;j.WALL=["WALL",26];j.WALL.toString=k;j.WALL.__enum__=j;j.RECORDWALL=["RECORDWALL",27];j.RECORDWALL.toString=k;j.RECORDWALL.__enum__=j;j.__empty_constructs__=[j.COIN,j.COINBAG,j.RING,j.RUNNING_ENEMY,j.SPIKE_BOX,j.BOX,j.BOX2,j.BOX3,j.NEXT_ROOM,j.REBOOT_TRIGGER,j.TEDDYBEAR,j.BEAR,j.TWISTER,j.BABYCHICK,j.MOTORCYCLETACO,j.HOTDOGWALK,j.BUGERWALLK,
j.GOLFCARTLESSARD,j.GIANTBURRITO,j.JESSERUN,j.CAR001,j.CAR002,j.RADIOACTIVETANK,j.BULL,j.COW,j.TAWNYBLOCKICE,j.WALL,j.RECORDWALL];var Rc=function(a,b){this.x=a;this.y=b};i["math.NDiVector2D"]=Rc;Rc.__name__=["math","NDiVector2D"];Rc.prototype={__class__:Rc};var fa=function(){this.zpp_inner=null;this.zpp_inner=new db;this.zpp_inner.outer=this};i["nape.callbacks.CbType"]=fa;fa.__name__=["nape","callbacks","CbType"];fa.prototype={toString:function(){return this==db.ANY_BODY?"ANY_BODY":this==db.ANY_SHAPE?
"ANY_SHAPE":this==db.ANY_COMPOUND?"ANY_COMPOUND":this==db.ANY_CONSTRAINT?"ANY_CONSTRAINT":"CbType#"+this.zpp_inner.id},__class__:fa};var db=function(){this.cbsets=this.listeners=this.bodylisteners=this.conlisteners=null;this.id=0;this.outer=null;this.id=Ya.CbType();this.listeners=new Jd;this.bodylisteners=new Re;this.conlisteners=new Se;this.constraints=new Sc;this.interactors=new fd;this.cbsets=new Kd};i["zpp_nape.callbacks.ZPP_CbType"]=db;db.__name__=["zpp_nape","callbacks","ZPP_CbType"];db.prototype=
{addint:function(a){for(var b=null,c=this.listeners.head;null!=c;){var d=c.elt;if(a.precedence>d.precedence||a.precedence==d.precedence&&a.id>d.id)break;b=c;c=c.next}this.listeners.inlined_insert(b,a);this.invalidateint()},invalidateint:function(){for(var a=this.cbsets.head;null!=a;){var b=a.elt;b.zip_listeners=!0;b.invalidate_pairs();a=a.next}},addbody:function(a){for(var b=null,c=this.bodylisteners.head;null!=c;){var d=c.elt;if(a.precedence>d.precedence||a.precedence==d.precedence&&a.id>d.id)break;
b=c;c=c.next}this.bodylisteners.inlined_insert(b,a);this.invalidatebody()},invalidatebody:function(){for(var a=this.cbsets.head;null!=a;)a.elt.zip_bodylisteners=!0,a=a.next},addconstraint:function(a){for(var b=null,c=this.conlisteners.head;null!=c;){var d=c.elt;if(a.precedence>d.precedence||a.precedence==d.precedence&&a.id>d.id)break;b=c;c=c.next}this.conlisteners.inlined_insert(b,a);this.invalidateconstraint()},invalidateconstraint:function(){for(var a=this.cbsets.head;null!=a;)a.elt.zip_conlisteners=
!0,a=a.next},__class__:db};var Ya=function(){};i["zpp_nape.ZPP_ID"]=Ya;Ya.__name__=["zpp_nape","ZPP_ID"];Ya.Interactor=function(){return Ya._Interactor++};Ya.CbType=function(){return Ya._CbType++};Ya.CbSet=function(){return Ya._CbSet++};Ya.Listener=function(){return Ya._Listener++};var Jd=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_InteractionListener"]=Jd;Jd.__name__=["zpp_nape","util","ZNPList_ZPP_InteractionListener"];Jd.prototype={add:function(a){return this.inlined_add(a)},
inlined_add:function(a){var b;null==gb.zpp_pool?b=new gb:(b=gb.zpp_pool,gb.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},inlined_insert:function(a,b){var c;null==gb.zpp_pool?c=new gb:(c=gb.zpp_pool,gb.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=
gb.zpp_pool;gb.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=gb.zpp_pool;gb.zpp_pool=a;this.modified=
!0;this.length--;this.pushmod=!0;return c},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},__class__:Jd};var Re=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_BodyListener"]=Re;Re.__name__=["zpp_nape","util","ZNPList_ZPP_BodyListener"];Re.prototype={inlined_insert:function(a,b){var c;null==sc.zpp_pool?c=new sc:(c=sc.zpp_pool,sc.zpp_pool=
c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=sc.zpp_pool;sc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},
inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=sc.zpp_pool;sc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},__class__:Re};var Se=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_ConstraintListener"]=Se;Se.__name__=
["zpp_nape","util","ZNPList_ZPP_ConstraintListener"];Se.prototype={inlined_insert:function(a,b){var c;null==Tc.zpp_pool?c=new Tc:(c=Tc.zpp_pool,Tc.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Tc.zpp_pool;Tc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},remove:function(a){this.inlined_try_remove(a)},
inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Tc.zpp_pool;Tc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},__class__:Se};
var Sc=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_Constraint"]=Sc;Sc.__name__=["zpp_nape","util","ZNPList_ZPP_Constraint"];Sc.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==tc.zpp_pool?b=new tc:(b=tc.zpp_pool,tc.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=
a.next;a.elt=null;a.next=tc.zpp_pool;tc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==
this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=tc.zpp_pool;tc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Sc};var fd=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_Interactor"]=fd;fd.__name__=["zpp_nape","util","ZNPList_ZPP_Interactor"];fd.prototype={add:function(a){return this.inlined_add(a)},
inlined_add:function(a){var b;null==Za.zpp_pool?b=new Za:(b=Za.zpp_pool,Za.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Za.zpp_pool;Za.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();
return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Za.zpp_pool;Za.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},inlined_clear:function(){for(;null!=
this.head;)this.inlined_pop();this.pushmod=!0},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:fd};var Kd=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_CbSet"]=Kd;Kd.__name__=["zpp_nape","util","ZNPList_ZPP_CbSet"];Kd.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==Fa.zpp_pool?b=new Fa:(b=Fa.zpp_pool,Fa.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;
this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Fa.zpp_pool;Fa.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==
a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Fa.zpp_pool;Fa.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:Kd};var e=function(){};i["globals.NDiGameConstants"]=e;e.__name__=["globals","NDiGameConstants"];var x=function(){this.bIsMobile=!1;this.currentScaleGame=1;this.GHOST_X_DELTA=
0.2*e.GAME_WIDTH;this.GHOST_Y_DELTA=0;this.PLAYER1_START_POSITION_X=0.08*e.GAME_WIDTH;this.PLAYER1_START_POSITION_Y=0.83*e.GAME_HEIGHT;this.PLAYER2_START_POSITION_X=0.15*e.GAME_WIDTH;this.PLAYER2_START_POSITION_Y=0.83*e.GAME_HEIGHT;this.highscoreJson=null;this.playerUserId=this.playerHighscore=0;this.ghostPlaybackData=""};i["globals.NDiGameGlobals"]=x;x.__name__=["globals","NDiGameGlobals"];x.initInstance=function(){null==x.instance&&(x.instance=new x)};x.getInstance=function(){x.initInstance();return x.instance};
x.calculateScore=function(a,b){return 100*(a+2*b)};x.prototype={initGlobalConfigData:function(){for(var a=m.loadXML(e.ASSET_PACKAGE_CONFIG,e.CONFIG_ASSET_CONFIG_XML),a=new Te(N.parse(a).firstElement()),b=a.nodes.resolve("debug").iterator();b.hasNext();)b.next();for(a=a.nodes.resolve("activators").iterator();a.hasNext();)a.next();this.bIsMobile=A._platform.getExternal().call("isMobile")},__class__:x};var ja=function(a,b){this.libraryAnimation=a;dd.call(this,a);this.transform=new M;this.animationName=
b};i["gui.components.NDiAnimationMovie"]=ja;ja.__name__=["gui","components","NDiAnimationMovie"];ja.__super__=dd;ja.prototype=z(dd.prototype,{animationIdle:function(a,b,c,d,f){null==c&&(c="_idle");null==b&&(b=0);null==a&&(a=!0);var g=this;this.loop(this.animationName+""+c);a||(a=new V(function(){g["delete"]();null!=d&&d(f)}),this.owner._compMap.Script_25.run(new va([new qa(b),a])))},animation_stop:function(a,b,c,d,f){null==c&&(c="_idle");null==b&&(b=0);null==a&&(a=!0);var g=this;this.loop(c);a||(a=
new V(function(){g["delete"]();null!=d&&d(f)}),this.owner._compMap.Script_25.run(new va([new qa(b),a])))},animationPose:function(a){null==a&&(a="");this.transform.set_visible(!0);this.loop(a)},animationGeneric:function(a,b,c,d,f){null==c&&(c="Run");null==b&&(b=0);null==a&&(a=!0);var g=this;this.loop(this.animationName+""+c);a||(a=new V(function(){g["delete"]();null!=d&&d(f)}),this.owner._compMap.Script_25.run(new va([new qa(b),a])))},onAdded:function(){dd.prototype.onAdded.call(this);this.owner.add(this.transform);
this.owner.add(new Ia)},"delete":function(){try{this.owner.dispose()}catch(a){null}},__class__:ja});var Ue=function(){u.call(this);this.transform=new M};i["gui.components.NDiBarLoading"]=Ue;Ue.__name__=["gui","components","NDiBarLoading"];Ue.__super__=u;Ue.prototype=z(u.prototype,{get_name:function(){return"NDiBarLoading_3"},updateBar:function(a){1<a?a=1:0>a&&(a=0);this.bar.scaleX.animateTo(a,1.9)},addBar:function(){var a=m.loadImage(e.ASSET_PACKAGE_LOADING,"Gadget/IG_Runner_Preloader_960x540_load");
this.bar=new za(a);this.owner.addChild((new p).add(this.bar));this.bar.scaleX.set__(0);this.bar.setXY(-245,60)},onAdded:function(){this.owner.add(this.transform);this.addBar()},setXY:function(a,b){this.transform.x.set__(a);this.transform.y.set__(b)},__class__:Ue});var R=function(a,b,c,d,f){null==f&&(f="");za.call(this,a);this.blinkDuration=1;this.isSelected=!1;this.nameButton=za.prototype.get_name.call(this);this.primaryTexture=a;this.centerAnchor();this.originalDelta=new Rc(0,0);this.originalPosition=
new Rc(0,0);this.moveDistance=0;null!=b&&(this.imageHighlightIdle=new za(b),this.imageHighlightIdle.disablePointer());null!=c&&(this.imageHighlightCorrect=new za(c),this.imageHighlightCorrect.disablePointer());null!=d&&(this.imageHighlightWrong=new za(d),this.imageHighlightWrong.disablePointer());""!=f&&(b=m.loadFont(e.ASSET_PACKAGE_LOADING,"calibriBlack"),this.textLabel=new P(b),this.textLabel.set_align(D.Center),this.textLabel.setXY(this.x._value+a.get_width()/2,this.y._value+a.get_height()/2),
this.textLabel.set_text(f),this.textLabel.disablePointer())};i["gui.components.NDiButton"]=R;R.__name__=["gui","components","NDiButton"];R.__super__=za;R.prototype=z(za.prototype,{toggleTextureById:function(a){1==a?this.texture=this.primaryTexture:2==a?this.texture=this.secondTexture:3==a&&(this.texture=null)},toggleTexture:function(){if(null!=this.secondTexture){if(this.texture==this.primaryTexture)return this.texture=this.secondTexture,2;this.texture=this.primaryTexture}return 1},onAdded:function(){za.prototype.onAdded.call(this);
this.owner.add(new Ia);null!=this.imageHighlightIdle&&(this.imageHighlightIdle.alpha.set__(0),this.owner.addChild((new p).add(this.imageHighlightIdle)));null!=this.imageHighlightCorrect&&(this.imageHighlightCorrect.alpha.set__(0),this.owner.addChild((new p).add(this.imageHighlightCorrect)));null!=this.imageHighlightWrong&&(this.imageHighlightWrong.alpha.set__(0),this.owner.addChild((new p).add(this.imageHighlightWrong)));null!=this.textLabel&&this.owner.addChild((new p).add(this.textLabel))},__class__:R});
var Ve=function(){u.call(this);this.loadInit()};i["gui.components.NDiHomePopup"]=Ve;Ve.__name__=["gui","components","NDiHomePopup"];Ve.__super__=u;Ve.prototype=z(u.prototype,{get_name:function(){return"NDiHomePopup_20"},loadInit:function(){this.transform=new M;this.transform.x.set__(0*e.GAME_WIDTH);this.transform.y.set__(0*e.GAME_HEIGHT);this.firstCharacterButton=new R(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/IG_gadget_run_flump"));this.firstCharacterButton.nameButton="first";this.firstCharacterButton.x.set__(0.08*
e.GAME_WIDTH);this.firstCharacterButton.y.set__(0.83*e.GAME_HEIGHT);this.firstCharacterButton.setScale(0.5);this.firstCharacterButton.get_pointerUp().connect(E(this,this.handlerPointerUp));this.secondCharacterButton=new R(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/IG_penny_run"));this.secondCharacterButton.nameButton="second";this.secondCharacterButton.x.set__(0.19*e.GAME_WIDTH);this.secondCharacterButton.y.set__(0.83*e.GAME_HEIGHT);this.secondCharacterButton.setScale(0.5);this.secondCharacterButton.get_pointerUp().connect(E(this,
this.handlerPointerUp));this.logo=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/Home/IG_DIM_logo"));this.logo.setXY(0.34*e.GAME_WIDTH,0.35*e.GAME_HEIGHT);this.logo.transform.disablePointer();this.chooseSignYellow=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/Home/IG_DIM_Choose_Char_Arrow"));this.chooseSignYellow.setXY(0.42*e.GAME_WIDTH,0.88*e.GAME_HEIGHT);this.chooseSignYellow.transform.setScaleXY(-1,1);this.chooseSignYellow.transform.disablePointer();this.chooseSignBlue=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,
"images/Gadget/Home/IG_DIM_Choose_Char_Arrow"));this.chooseSignBlue.setXY(0.42*e.GAME_WIDTH,0.88*e.GAME_HEIGHT);this.chooseSignBlue.transform.setScaleXY(-1,1);this.chooseSignBlue.transform.disablePointer();this.missions=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/Home/achievement_Menu"));this.missions.setXY(0.81*e.GAME_WIDTH,0.3*e.GAME_HEIGHT);this.missions.transform.setScale(0.25);this.missions.transform.disablePointer();this.soundButton=new R(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/Home/Mute_Button"));
this.soundButton.nameButton="sound";this.soundButton.setXY(0.05*e.GAME_WIDTH,0.1*e.GAME_HEIGHT);this.soundButton.setScale(0.5);this.soundButton.get_pointerUp().connect(E(this,this.handlerPointerUp));this.soundButton.secondTexture=m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/Home/Mute_Button_Cross");H.getInstance().isPaused&&this.soundButton.toggleTextureById(2);x.firstLoad&&x.getInstance().bIsMobile?(A._platform.getExternal().call("check_ios")&&this.soundButton.toggleTextureById(3),x.firstLoad=
!1):x.firstLoad||(this.soundButton.toggleTextureById(1),H.getInstance().isPaused&&this.soundButton.toggleTextureById(2));var a=m.loadFont(e.ASSET_PACKAGE_GENERAL,"fonts/Gadget/medium/drsoos");this.objective1Label=new P(a);this.objective1Label.set_align(D.Left);this.objective1Label.x.set__(0.85*e.GAME_WIDTH);this.objective1Label.y.set__(0.17*e.GAME_HEIGHT+e.fixFontHeight);this.objective1Label.set_text(q.OBJECTIVE_ONE);this.objective1Label.disablePointer();this.objective1Label.setAlign(D.Left);this.objective1Label.setScale(0.9*
e.fixFontScale);this.objective1Label.setWrapWidth(0.45*e.GAME_WIDTH);this.objective1Label.setLetterSpacing(-2.5);this.objective1Label.setLineSpacing(-10);this.objective1Label.centerAnchor();this.objective2Label=new P(a);this.objective2Label.set_align(D.Left);this.objective2Label.x.set__(0.85*e.GAME_WIDTH);this.objective2Label.y.set__(0.3*e.GAME_HEIGHT+e.fixFontHeight);this.objective2Label.set_text(q.OBJECTIVE_TWO);this.objective2Label.disablePointer();this.objective2Label.setScale(0.9*e.fixFontScale);
this.objective2Label.setWrapWidth(0.45*e.GAME_WIDTH);this.objective2Label.setLetterSpacing(-2.5);this.objective2Label.setLineSpacing(-10);this.objective2Label.setAlign(D.Left);this.objective2Label.centerAnchor();this.objective3Label=new P(a);this.objective3Label.set_align(D.Left);this.objective3Label.x.set__(0.85*e.GAME_WIDTH);this.objective3Label.y.set__(0.425*e.GAME_HEIGHT+e.fixFontHeight);this.objective3Label.set_text(q.OBJECTIVE_THREE);this.objective3Label.disablePointer();this.objective3Label.setScale(0.9*
e.fixFontScale);this.objective3Label.setWrapWidth(0.4*e.GAME_WIDTH);this.objective3Label.setLetterSpacing(-2.5);this.objective3Label.setLineSpacing(-10);this.objective3Label.setAlign(D.Left);this.objective3Label.centerAnchor();this.objective1Check=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/Missions/SingleMission_Screenboxcheck"));this.objective1Check.setXY(0.705*e.GAME_WIDTH,0.17*e.GAME_HEIGHT);this.objective1Check.transform.disablePointer();this.objective2Check=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,
"images/Gadget/Missions/SingleMission_Screenboxcheck"));this.objective2Check.setXY(0.705*e.GAME_WIDTH,0.295*e.GAME_HEIGHT);this.objective2Check.transform.disablePointer();this.objective3Check=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/Missions/SingleMission_Screenboxcheck"));this.objective3Check.setXY(0.705*e.GAME_WIDTH,0.415*e.GAME_HEIGHT);this.objective3Check.transform.disablePointer();this.objective1Check.transform.setScale(0);this.objective2Check.transform.setScale(0);this.objective3Check.transform.setScale(0);
q.OBJECTIVE_ONE_DONE&&this.objective1Check.transform.setScale(0.35);q.OBJECTIVE_TWO_DONE&&this.objective2Check.transform.setScale(0.35);q.OBJECTIVE_THREE_DONE&&this.objective3Check.transform.setScale(0.35);a=m.loadFont(e.ASSET_PACKAGE_GENERAL,"fonts/Gadget/medium/drsoos");this.highscoreTitleText=new P(a);this.highscoreTitleText.set_align(D.Center);this.highscoreTitleText.centerAnchor();this.highscoreTitleText.setXY(0.8*e.GAME_WIDTH,0.66*e.GAME_HEIGHT);this.highscoreTitleText.setLetterSpacing(-2.5);
this.highscoreTitleText.setRotation(4);x.getInstance().bIsMobile?this.highscoreTitleText.set_text(C.lenguajeData.main_screen.jump_help_mobile):this.highscoreTitleText.set_text(C.lenguajeData.main_screen.jump_help_web);this.highscoreTitleText.disablePointer();this.highscoreTitleText.setScale(0.85*e.fixFontScale);this.jumpInfo=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/Home/tutorial"));this.jumpInfo.setXY(0.8*e.GAME_WIDTH,0.82*e.GAME_HEIGHT);this.jumpInfo.transform.setScale(0.35);this.jumpInfo.transform.disablePointer();
a=m.loadFont(e.ASSET_PACKAGE_GENERAL,"fonts/Gadget/bigColour/drsoos");this.titleGame=new P(a);this.titleGame.set_align(D.Left);this.titleGame.x.set__(0.35*e.GAME_WIDTH);this.titleGame.y.set__(0.577*e.GAME_HEIGHT+e.fixFontHeight);this.titleGame.setLetterSpacing(-5);this.titleGame.set_text(C.lenguajeData.main_screen.game_title);this.titleGame.disablePointer();this.titleGame.setScale(0.85*e.fixFontScale);this.titleGame.setWrapWidth(0.8*e.GAME_WIDTH);this.titleGame.setRotation(-2);this.titleGame.centerAnchor();
this.titleGame.setAlign(D.Center)},handlerPointerUp:function(a){a=U.__cast(a.hit,R);"first"==a.nameButton&&(H.getInstance().playSoundEffect(e.ARRAY_SOUNDS_FX_MUSIC.get("SFX_BUTTON_SELECT"),1),this.getParent().firstPlayerSelected());"second"==a.nameButton&&(H.getInstance().playSoundEffect(e.ARRAY_SOUNDS_FX_MUSIC.get("SFX_BUTTON_SELECT"),1),this.getParent().secondPlayerSelected());"sound"==a.nameButton&&(1==this.soundButton.toggleTexture()?(H.getInstance().playSoundEffect(e.ARRAY_SOUNDS_FX_MUSIC.get("SFX_BUTTON_SOUND_ON"),
1),H.getInstance().isPaused=!1,H.getInstance().pauseSoundEffect(!1),H.getInstance().pauseSoundBackground(!1)):(H.getInstance().playSoundEffect(e.ARRAY_SOUNDS_FX_MUSIC.get("SFX_BUTTON_SOUND_OFF"),1),H.getInstance().isPaused=!0,H.getInstance().pauseSoundEffect(!0),H.getInstance().pauseSoundBackground(!0)))},getParent:function(){return s.instance(this.owner.parent.parent._compMap.Scene_0,Ib)},addCharacterButtons:function(){this.owner.addChild((new p).add(this.firstCharacterButton));this.owner.addChild((new p).add(this.secondCharacterButton))},
onAdded:function(){u.prototype.onAdded.call(this);this.transform.centerAnchor();this.owner.add(this.transform);this.owner.add(new Ia);this.owner.addChild((new p).add(this.logo));this.owner.addChild((new p).add(this.chooseSignYellow));this.owner.addChild((new p).add(this.chooseSignBlue));var a=m.loadFont(e.ASSET_PACKAGE_GENERAL,"fonts/Gadget/medium/drsoos"),a=new P(a,C.lenguajeData.main_screen.choose_title);a.setXY(this.chooseSignYellow.transform.x._value+0.01*this.chooseSignYellow.transform.x._value,
this.chooseSignYellow.transform.y._value+0.001*this.chooseSignYellow.transform.y._value);a.setScale(e.fixFontScale);!1==C.isEnglish&&a.setScale(0.6*e.fixFontScale);a.centerAnchor();this.owner.addChild((new p).add(a));this.owner.addChild((new p).add(this.missions));this.owner.addChild((new p).add(this.objective1Label));this.owner.addChild((new p).add(this.objective2Label));this.owner.addChild((new p).add(this.objective3Label));this.owner.addChild((new p).add(this.objective1Check));this.owner.addChild((new p).add(this.objective2Check));
this.owner.addChild((new p).add(this.objective3Check));this.addCharacterButtons();this.owner.addChild((new p).add(this.soundButton));this.owner.addChild((new p).add(this.jumpInfo));this.owner.addChild((new p).add(this.highscoreTitleText));this.owner.addChild((new p).add(this.titleGame))},__class__:Ve});var J=function(a){u.call(this);this.image=new za(a);this.image.centerAnchor();this.transform=new M;this.offSet=new Rc(0,0)};i["gui.components.NDiImage"]=J;J.__name__=["gui","components","NDiImage"];
J.__super__=u;J.prototype=z(u.prototype,{get_name:function(){return"NDiImage_23"},setAlpha:function(a){this.image.setAlpha(a)},setTexture:function(a){this.image.texture=a},resetAnchor:function(){this.image.setAnchor(0,0)},onAdded:function(){this.owner.add(new Ia);this.owner.add(this.transform);this.owner.addChild((new p).add(this.image))},setXY:function(a,b){this.transform.x.set__(a);this.transform.y.set__(b)},__class__:J});var We=function(){u.call(this);this.loadInit()};i["gui.components.NDiPausePopup"]=
We;We.__name__=["gui","components","NDiPausePopup"];We.__super__=u;We.prototype=z(u.prototype,{get_name:function(){return"NDiPausePopup_5"},createMenu:function(){this.menu=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/pause/pauseMenu_panel"));this.menu.transform.setScale(0.8);this.menu.setXY(0.3*e.GAME_WIDTH,0.525*e.GAME_HEIGHT);var a=m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/pause/pausemenu_Replay");this.replayButton=new R(a);this.replayButton.nameButton="replay";this.replayButton.setScale(0.8);
this.replayButton.x.set__(this.menu.transform.x._value+0.17*this.menu.image.getNaturalWidth());this.replayButton.y.set__(this.menu.transform.y._value+0.032*this.menu.image.getNaturalHeight());this.replayButton.get_pointerUp().connect(E(this,this.handlerPointerUp));this.resumeButton=new R(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/pause/pausemenu_Resume"));this.resumeButton.nameButton="resume";this.resumeButton.setScale(0.8);this.resumeButton.x.set__(this.replayButton.x._value);this.resumeButton.y.set__(this.replayButton.y._value-
0.98*this.replayButton.getNaturalHeight());this.resumeButton.get_pointerUp().connect(E(this,this.handlerPointerUp));this.quitButton=new R(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/pause/pausemenu_Quit"));this.quitButton.nameButton="quit";this.quitButton.setScale(0.8);this.quitButton.x.set__(this.replayButton.x._value);this.quitButton.y.set__(this.replayButton.y._value+1.075*this.replayButton.getNaturalHeight());this.quitButton.get_pointerUp().connect(E(this,this.handlerPointerUp));a=m.loadFont(e.ASSET_PACKAGE_GENERAL,
"fonts/Gadget/big/drsoos");this.pausedText=new P(a);this.pausedText.set_align(D.Center);this.pausedText.setXY(this.replayButton.x._value-100,this.menu.transform.y._value-0.16*this.menu.image.getNaturalHeight()+e.fixFontHeight);this.pausedText.set_text(C.lenguajeData.pause_screen.title);this.pausedText.disablePointer();this.pausedText.setScale(e.fixFontScale);this.replayText=new P(a);this.replayText.set_align(D.Center);this.replayText.setXY(0.95*this.replayButton.x._value-125,this.replayButton.y._value-
0.35*this.replayButton.getNaturalHeight()+e.fixFontHeight);this.replayText.set_text(C.lenguajeData.pause_screen.replay);this.replayText.disablePointer();this.replayText.setScale(e.fixFontScale);!1==C.isEnglish&&(this.replayText.setScale(0.3),this.replayText.setXY(0.95*this.replayButton.x._value-125,this.replayButton.y._value-0.25*this.replayButton.getNaturalHeight()+e.fixFontHeight));this.resumeText=new P(a);this.resumeText.set_align(D.Center);this.resumeText.setXY(0.95*this.resumeButton.x._value-
125,this.resumeButton.y._value-0.45*this.resumeButton.getNaturalHeight()+e.fixFontHeight);this.resumeText.set_text(C.lenguajeData.pause_screen.resume);this.resumeText.disablePointer();this.resumeText.setScale(e.fixFontScale);this.quitText=new P(a);this.quitText.set_align(D.Center);this.quitText.setXY(0.93*this.quitButton.x._value-125,this.quitButton.y._value-0.35*this.replayButton.getNaturalHeight()+e.fixFontHeight);this.quitText.set_text(C.lenguajeData.pause_screen.quit);this.quitText.disablePointer();
this.quitText.setScale(e.fixFontScale);this.missions=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/pause/achievement_Menu"));this.missions.setXY(0.81*e.GAME_WIDTH,0.3*e.GAME_HEIGHT);this.missions.transform.setScale(0.25);this.missions.transform.disablePointer();a=m.loadFont(e.ASSET_PACKAGE_GENERAL,"fonts/Gadget/medium/drsoos");this.objective1Label=new P(a);this.objective1Label.set_align(D.Left);this.objective1Label.x.set__(0.85*e.GAME_WIDTH);this.objective1Label.y.set__(0.17*e.GAME_HEIGHT+
e.fixFontHeight);this.objective1Label.set_text(q.OBJECTIVE_ONE);this.objective1Label.disablePointer();this.objective1Label.setAlign(D.Left);this.objective1Label.setScale(0.9*e.fixFontScale);this.objective1Label.setWrapWidth(0.45*e.GAME_WIDTH);this.objective1Label.setLetterSpacing(-2.5);this.objective1Label.setLineSpacing(-10);this.objective1Label.centerAnchor();this.objective2Label=new P(a);this.objective2Label.set_align(D.Left);this.objective2Label.x.set__(0.85*e.GAME_WIDTH);this.objective2Label.y.set__(0.3*
e.GAME_HEIGHT+e.fixFontHeight);this.objective2Label.set_text(q.OBJECTIVE_TWO);this.objective2Label.disablePointer();this.objective2Label.setScale(0.9*e.fixFontScale);this.objective2Label.setWrapWidth(0.45*e.GAME_WIDTH);this.objective2Label.setLetterSpacing(-2.5);this.objective2Label.setLineSpacing(-10);this.objective2Label.setAlign(D.Left);this.objective2Label.centerAnchor();this.objective3Label=new P(a);this.objective3Label.set_align(D.Left);this.objective3Label.x.set__(0.85*e.GAME_WIDTH);this.objective3Label.y.set__(0.425*
e.GAME_HEIGHT+e.fixFontHeight);this.objective3Label.set_text(q.OBJECTIVE_THREE);this.objective3Label.disablePointer();this.objective3Label.setScale(0.9*e.fixFontScale);this.objective3Label.setWrapWidth(0.4*e.GAME_WIDTH);this.objective3Label.setLetterSpacing(-2.5);this.objective3Label.setLineSpacing(-10);this.objective3Label.setAlign(D.Left);this.objective3Label.centerAnchor();this.objective1Check=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/Missions/SingleMission_Screenboxcheck"));this.objective1Check.setXY(0.705*
e.GAME_WIDTH,0.17*e.GAME_HEIGHT);this.objective1Check.transform.disablePointer();this.objective2Check=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/Missions/SingleMission_Screenboxcheck"));this.objective2Check.setXY(0.705*e.GAME_WIDTH,0.295*e.GAME_HEIGHT);this.objective2Check.transform.disablePointer();this.objective3Check=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/Missions/SingleMission_Screenboxcheck"));this.objective3Check.setXY(0.705*e.GAME_WIDTH,0.415*e.GAME_HEIGHT);
this.objective3Check.transform.disablePointer();this.objective1Check.transform.setScale(0);this.objective2Check.transform.setScale(0);this.objective3Check.transform.setScale(0);q.OBJECTIVE_ONE_DONE&&this.objective1Check.transform.setScale(0.35);q.OBJECTIVE_TWO_DONE&&this.objective2Check.transform.setScale(0.35);q.OBJECTIVE_THREE_DONE&&this.objective3Check.transform.setScale(0.35);a=m.loadFont(e.ASSET_PACKAGE_GENERAL,"fonts/Gadget/medium/drsoos");this.highscoreTitleText=new P(a);this.highscoreTitleText.set_align(D.Center);
this.highscoreTitleText.centerAnchor();this.highscoreTitleText.setXY(0.8*e.GAME_WIDTH,0.66*e.GAME_HEIGHT);this.highscoreTitleText.setLetterSpacing(-2.5);this.highscoreTitleText.setRotation(4);x.getInstance().bIsMobile?this.highscoreTitleText.set_text(C.lenguajeData.main_screen.jump_help_mobile):this.highscoreTitleText.set_text(C.lenguajeData.main_screen.jump_help_web);this.highscoreTitleText.disablePointer();this.highscoreTitleText.setScale(e.fixFontScale);this.jumpInfo=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,
"images/Gadget/pause/tutorial"));this.jumpInfo.setXY(0.8*e.GAME_WIDTH,0.82*e.GAME_HEIGHT);this.jumpInfo.transform.setScale(0.35);this.jumpInfo.transform.disablePointer()},loadInit:function(){this.transform=new M;this.transform.x.set__(0*e.GAME_WIDTH);this.transform.y.set__(0*e.GAME_HEIGHT);this.background=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/pause/back"));this.background.setXY(0.5*e.GAME_WIDTH,0.5*e.GAME_HEIGHT);this.soundButton=new R(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/pause/Mute_Button"));
this.soundButton.nameButton="sound";this.soundButton.setXY(0.05*e.GAME_WIDTH,0.1*e.GAME_HEIGHT);this.soundButton.setScale(0.5);this.soundButton.get_pointerUp().connect(E(this,this.handlerPointerUp));this.soundButton.secondTexture=m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/pause/Mute_Button_Cross");H.getInstance().isPaused?this.soundButton.toggleTextureById(2):this.soundButton.toggleTextureById(1);this.createMenu()},replayGameActions:function(){this.closePopup();Ib.runnerScene.restartGame()},
quitGameActions:function(){this.closePopup();Ib.runnerScene.quitGame()},quitGame:function(){G.getInstance().switchConfirmation(C.lenguajeData.popUp_screen.text,E(this,this.quitGameActions),null)},handlerPointerUp:function(a){a=U.__cast(a.hit,R);"quit"==a.nameButton&&(H.getInstance().playSoundEffect(e.ARRAY_SOUNDS_FX_MUSIC.get("SFX_BUTTON_SELECT2"),1),this.quitGame());"replay"==a.nameButton&&(H.getInstance().playSoundEffect(e.ARRAY_SOUNDS_FX_MUSIC.get("SFX_BUTTON_SELECT"),1),this.replayGameActions());
"resume"==a.nameButton&&(H.getInstance().playSoundEffect(e.ARRAY_SOUNDS_FX_MUSIC.get("SFX_BUTTON_SELECT"),1),this.closePopup());"sound"==a.nameButton&&(H.getInstance().isPaused?(H.getInstance().playSoundEffect(e.ARRAY_SOUNDS_FX_MUSIC.get("SFX_BUTTON_SOUND_ON"),1),H.getInstance().isPaused=!1,H.getInstance().pauseSoundEffect(!1),H.getInstance().pauseSoundBackground(!1),this.soundButton.toggleTextureById(1)):(H.getInstance().playSoundEffect(e.ARRAY_SOUNDS_FX_MUSIC.get("SFX_BUTTON_SOUND_OFF"),1),H.getInstance().isPaused=
!0,H.getInstance().pauseSoundEffect(!0),H.getInstance().pauseSoundBackground(!0),this.soundButton.toggleTextureById(2)))},onAdded:function(){u.prototype.onAdded.call(this);this.transform.centerAnchor();this.owner.add(this.transform);this.owner.add(new Ia);this.owner.addChild((new p).add(this.background));this.owner.addChild((new p).add(this.menu));this.owner.addChild((new p).add(this.replayButton));this.owner.addChild((new p).add(this.replayText));this.owner.addChild((new p).add(this.resumeButton));
this.owner.addChild((new p).add(this.resumeText));this.owner.addChild((new p).add(this.quitButton));this.owner.addChild((new p).add(this.quitText));this.owner.addChild((new p).add(this.soundButton));this.owner.addChild((new p).add(this.missions));this.owner.addChild((new p).add(this.objective1Label));this.owner.addChild((new p).add(this.objective2Label));this.owner.addChild((new p).add(this.objective3Label));this.owner.addChild((new p).add(this.objective1Check));this.owner.addChild((new p).add(this.objective2Check));
this.owner.addChild((new p).add(this.objective3Check));this.owner.addChild((new p).add(this.jumpInfo));this.owner.addChild((new p).add(this.highscoreTitleText))},closePopup:function(){G.getInstance().switchPause()},__class__:We});var ae=function(a,b,c,d){u.call(this);this.loadInit(a,b,c,d)};i["gui.components.NDiResultsPopup"]=ae;ae.__name__=["gui","components","NDiResultsPopup"];ae.__super__=u;ae.prototype=z(u.prototype,{get_name:function(){return"NDiResultsPopup_19"},createMenu:function(){this.menu=
new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/Result/pauseMenu_panel"));this.menu.transform.setScale(0.7);this.menu.setXY(0.23*e.GAME_WIDTH,0.5*e.GAME_HEIGHT);var a=m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/Result/pausemenu_Replay");this.replayButton=new R(a);this.replayButton.setScale(0.65);this.replayButton.nameButton="replay";this.replayButton.x.set__(this.menu.transform.x._value+85);this.replayButton.y.set__(this.menu.transform.y._value+10);this.replayButton.get_pointerUp().connect(E(this,
this.handlerPointerUp));this.quitButton=new R(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/Result/pausemenu_Quit"));this.quitButton.setScale(0.65);this.quitButton.nameButton="quit";this.quitButton.x.set__(this.replayButton.x._value);this.quitButton.y.set__(this.replayButton.y._value+85);this.quitButton.get_pointerUp().connect(E(this,this.handlerPointerUp));var a=m.loadFont(e.ASSET_PACKAGE_GENERAL,"fonts/Gadget/medium/drsoos"),b=m.loadFont(e.ASSET_PACKAGE_GENERAL,"fonts/Gadget/big/drsoos");this.gameOverText=
new P(b);this.gameOverText.set_align(D.Center);this.gameOverText.setXY(this.replayButton.x._value-100,this.menu.transform.y._value-0.17*this.menu.image.getNaturalHeight()+e.fixFontHeight);this.gameOverText.set_text(C.lenguajeData.result_screen.result_title);this.gameOverText.disablePointer();this.gameOverText.setScale(0.9*e.fixFontScale);this.gameOverText.setLetterSpacing(-5);this.replayText=new P(a);this.replayText.set_align(D.Center);this.replayText.setXY(this.replayButton.x._value-100,this.replayButton.y._value-
0.1*this.replayButton.getNaturalHeight()+e.fixFontHeight);this.replayText.set_text(C.lenguajeData.result_screen.replay);this.replayText.disablePointer();this.replayText.setScale(e.fixFontScale);this.replayText.setLetterSpacing(-2.5);this.quitText=new P(a);this.quitText.set_align(D.Center);this.quitText.setXY(this.quitButton.x._value-100,this.quitButton.y._value-0.3*this.quitButton.getNaturalHeight()+e.fixFontHeight);this.quitText.set_text(C.lenguajeData.result_screen.quit);this.quitText.disablePointer();
this.quitText.setScale(e.fixFontScale);this.quitText.setLetterSpacing(-2.5)},createScore:function(a,b,c,d){null==d&&(d=0);null==b&&(b=0);this.score=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/Result/resultsmenu"));this.score.transform.setScale(0.428);this.score.setXY(0.73*e.GAME_WIDTH,0.5*e.GAME_HEIGHT);var f=m.loadFont(e.ASSET_PACKAGE_GENERAL,"fonts/Gadget/medium/drsoos"),g=m.loadFont(e.ASSET_PACKAGE_GENERAL,"fonts/Gadget/big/drsoos");this.resultTitleText=new P(f);this.resultTitleText.set_align(D.Center);
this.resultTitleText.centerAnchor();this.resultTitleText.setXY(this.score.transform.x._value-0.01*this.score.image.getNaturalWidth(),this.score.transform.y._value-0.14*this.score.image.getNaturalHeight());this.resultTitleText.set_text(C.lenguajeData.result_screen.boar_title);this.resultTitleText.disablePointer();this.resultTitleText.setLetterSpacing(-2.5);!1==C.isEnglish&&this.resultTitleText.setScale(0.8);this.scoreTitleText=new P(f);this.scoreTitleText.set_align(D.Left);this.scoreTitleText.centerAnchor();
this.scoreTitleText.setXY(this.score.transform.x._value-0.14*this.score.image.getNaturalWidth(),this.score.transform.y._value-0.082*this.score.image.getNaturalHeight());this.scoreTitleText.set_text(C.lenguajeData.result_screen.score_title);this.scoreTitleText.disablePointer();this.scoreTitleText.setScale(0.8);this.scoreTitleText.setLetterSpacing(-2.5);this.scoreTitleText.setScale(0.75);this.highscoreTitleText=new P(f);this.highscoreTitleText.set_align(D.Left);this.highscoreTitleText.centerAnchor();
this.highscoreTitleText.setXY(this.score.transform.x._value-0.14*this.score.image.getNaturalWidth(),this.score.transform.y._value+0.015*this.score.image.getNaturalHeight());this.highscoreTitleText.set_text(C.lenguajeData.result_screen.highscore_title);this.highscoreTitleText.disablePointer();this.highscoreTitleText.setScale(0.5);this.highscoreTitleText.setLetterSpacing(-2.5);!1==C.isEnglish&&this.highscoreTitleText.setScale(0.38);this.scoreText=new P(g);this.scoreText.set_align(D.Center);this.scoreText.centerAnchor();
this.scoreText.setXY(this.score.transform.x._value+0.025*this.score.image.getNaturalWidth(),this.score.transform.y._value-0.065*this.score.image.getNaturalHeight());this.scoreText.set_text(""+c);this.scoreText.disablePointer();this.scoreText.setLetterSpacing(-5);this.scoreText.setScale(0.6);this.highScoreText=new P(g);this.highScoreText.set_align(D.Center);this.highScoreText.centerAnchor();this.highScoreText.setXY(this.score.transform.x._value+0.025*this.score.image.getNaturalWidth(),this.score.transform.y._value+
0.03*this.score.image.getNaturalHeight());c<d&&(c=d);this.highScoreText.set_text(""+c);this.highScoreText.disablePointer();this.highScoreText.setLetterSpacing(-5);this.highScoreText.setScale(0.6);this.coinsText=new P(f);this.coinsText.set_align(D.Left);this.coinsText.centerAnchor();this.coinsText.setXY(this.score.transform.x._value+0.075*this.score.image.getNaturalWidth(),this.score.transform.y._value+0.135*this.score.image.getNaturalHeight());this.coinsText.set_text(""+a);this.coinsText.disablePointer();
this.coinsText.setLetterSpacing(-2.5);this.invincibleText=new P(f);this.invincibleText.set_align(D.Left);this.invincibleText.centerAnchor();this.invincibleText.setXY(this.score.transform.x._value-0.1*this.score.image.getNaturalWidth(),this.score.transform.y._value+0.135*this.score.image.getNaturalHeight());this.invincibleText.set_text(""+b);this.invincibleText.disablePointer();this.invincibleText.setLetterSpacing(-2.5);this.coin=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/HUD/IG_Hud_coin"));
this.coin.setXY(this.score.transform.x._value+0.045*this.score.image.getNaturalWidth(),this.score.transform.y._value+0.13*this.score.image.getNaturalHeight());this.ring=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/HUD/IG_Gear_coin"));this.ring.setXY(this.score.transform.x._value-0.13*this.score.image.getNaturalWidth(),this.score.transform.y._value+0.13*this.score.image.getNaturalHeight())},loadInit:function(a,b,c,d){null==d&&(d=0);null==b&&(b=0);this.transform=new M;this.transform.x.set__(0*
e.GAME_WIDTH);this.transform.y.set__(0*e.GAME_HEIGHT);this.background=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/result/back"));this.background.setXY(0.5*e.GAME_WIDTH,0.5*e.GAME_HEIGHT);this.createMenu();this.createScore(a,b,c,d)},replayGame:function(){G.getInstance().changeScene(ma.NDI_TYPE_SCENE_RUNNER)},handlerPointerUp:function(a){a=U.__cast(a.hit,R);"quit"==a.nameButton&&(H.getInstance().playSoundEffect(e.ARRAY_SOUNDS_FX_MUSIC.get("SFX_BUTTON_SELECT"),1),G.getInstance().adjustSpeed(1),
this.replayGame());"replay"==a.nameButton&&(H.getInstance().playSoundEffect(e.ARRAY_SOUNDS_FX_MUSIC.get("SFX_BUTTON_SELECT"),1),G.getInstance().adjustSpeed(1),Ib.runnerScene.restartGame())},onAdded:function(){u.prototype.onAdded.call(this);this.transform.centerAnchor();this.owner.add(this.transform);this.owner.add(new Ia);this.owner.addChild((new p).add(this.background));this.owner.addChild((new p).add(this.menu));this.owner.addChild((new p).add(this.replayButton));this.owner.addChild((new p).add(this.replayText));
this.owner.addChild((new p).add(this.quitButton));this.owner.addChild((new p).add(this.quitText));this.owner.addChild((new p).add(this.gameOverText));this.owner.addChild((new p).add(this.score));this.owner.addChild((new p).add(this.resultTitleText));this.owner.addChild((new p).add(this.scoreTitleText));this.owner.addChild((new p).add(this.highscoreTitleText));this.owner.addChild((new p).add(this.coinsText));this.owner.addChild((new p).add(this.scoreText));this.owner.addChild((new p).add(this.highScoreText));
this.owner.addChild((new p).add(this.invincibleText));this.owner.addChild((new p).add(this.coin));this.owner.addChild((new p).add(this.ring))},__class__:ae});var Xe=function(a,b,c){u.call(this);this.confirmationString=a;this.acceptCallback=b;this.cancelCallback=c;this.loadInit()};i["gui.popups.NDiConfirmationPopup"]=Xe;Xe.__name__=["gui","popups","NDiConfirmationPopup"];Xe.__super__=u;Xe.prototype=z(u.prototype,{get_name:function(){return"NDiConfirmationPopup_4"},createMenu:function(){this.menu=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,
"images/Gadget/confirmation/quit_screen"));this.menu.transform.setScale(0.4);this.menu.resetAnchor();this.menu.setXY(0,0);var a=m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/confirmation/Quit_Screen_check");this.okButton=new R(a);this.okButton.setScale(0.4);this.okButton.nameButton="ok";this.okButton.x.set__(e.GAME_WIDTH/2+10);this.okButton.y.set__(e.GAME_HEIGHT/2+75);this.okButton.get_pointerUp().connect(E(this,this.handlerPointerUp));var b=m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/confirmation/Quit_Screen_cancel");
this.cancelButton=new R(b);this.cancelButton.setScale(0.4);this.cancelButton.nameButton="cancel";this.cancelButton.x.set__(this.okButton.x._value+a.get_width()/2);this.cancelButton.y.set__(this.okButton.y._value);this.cancelButton.get_pointerUp().connect(E(this,this.handlerPointerUp));a=m.loadFont(e.ASSET_PACKAGE_GENERAL,"fonts/Gadget/mediumColour/drsoos");this.confirmationText=new P(a);this.confirmationText.set_align(D.Center);this.confirmationText.y.set__(e.GAME_HEIGHT/2-25);this.confirmationText.x.set__(1.14*
(e.GAME_WIDTH/2));this.confirmationText.setWrapWidth(e.GAME_WIDTH/3);this.confirmationText.set_text(this.confirmationString);this.confirmationText.centerAnchor();this.confirmationText.disablePointer();this.confirmationTittle=new P(a);this.confirmationTittle.set_align(D.Center);this.confirmationTittle.y.set__(e.GAME_HEIGHT/2);this.confirmationTittle.x.set__(1.05*(e.GAME_WIDTH/2));this.confirmationTittle.setWrapWidth(e.GAME_WIDTH/2);this.confirmationTittle.set_text(C.lenguajeData.popUp_screen.tittle);
this.confirmationTittle.centerAnchor();this.confirmationTittle.disablePointer()},loadInit:function(){this.transform=new M;this.transform.x.set__(0*e.GAME_WIDTH);this.transform.y.set__(0*e.GAME_HEIGHT);this.background=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/confirmation/background"));this.background.setXY(0.5*e.GAME_WIDTH,0.5*e.GAME_HEIGHT);this.createMenu()},closePopup:function(){G.getInstance().switchConfirmation("",null,null)},onAdded:function(){u.prototype.onAdded.call(this);this.transform.centerAnchor();
this.owner.add(this.transform);this.owner.add(new Ia);this.owner.addChild((new p).add(this.background));this.owner.addChild((new p).add(this.menu));this.owner.addChild((new p).add(this.okButton));this.owner.addChild((new p).add(this.cancelButton));this.owner.addChild((new p).add(this.confirmationText))},handlerPointerUp:function(a){a=U.__cast(a.hit,R);"ok"==a.nameButton&&(H.getInstance().playSoundEffect(e.ARRAY_SOUNDS_FX_MUSIC.get("SFX_BUTTON_SELECT"),1),this.closePopup(),null!=this.acceptCallback&&
this.acceptCallback());"cancel"==a.nameButton&&(H.getInstance().playSoundEffect(e.ARRAY_SOUNDS_FX_MUSIC.get("SFX_BUTTON_SELECT"),1),this.closePopup(),null!=this.cancelCallback&&this.cancelCallback())},__class__:Xe});var Ye=function(){u.call(this);this.text=C.lenguajeData.extra_live.message;this.loadInit()};i["gui.popups.NDiCountDownPopup"]=Ye;Ye.__name__=["gui","popups","NDiCountDownPopup"];Ye.__super__=u;Ye.prototype=z(u.prototype,{get_name:function(){return"NDiCountDownPopup_18"},loadInit:function(){this.background=
new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/coinConfirmation/Coin_heart"));this.background.setXY(0.5*e.GAME_WIDTH,0.5*e.GAME_HEIGHT);this.background.transform.setScale(0.7);this.coin=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/coinConfirmation/IG_Hud_coin"));this.coin.image.setScale(1.5);this.coin.setXY(0.46*e.GAME_WIDTH,0.39*e.GAME_HEIGHT);this.heartSmall=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/coinConfirmation/Heart"));this.heartSmall.setXY(0.55*e.GAME_WIDTH,
0.39*e.GAME_HEIGHT);this.heartSmall.image.setScale(0.7);var a=m.loadFont(e.ASSET_PACKAGE_GENERAL,"fonts/Gadget/medium/drsoos");this.messageText=new P(a);this.messageText.set_align(D.Center);this.messageText.set_text("");this.messageText.setWrapWidth(0.8*e.GAME_WIDTH);this.messageText.x.set__(0.5*e.GAME_WIDTH);this.messageText.y.set__(0.3*e.GAME_HEIGHT);this.messageText.setLetterSpacing(-2.5);this.messageText.setLineSpacing(-10);this.messageText.centerAnchor();this.messageText.disablePointer();this.messageText.setScale(0.5);
this.amountText=new P(a);this.amountText.set_align(D.Center);this.amountText.set_text("");this.amountText.setWrapWidth(0.6*e.GAME_WIDTH);this.amountText.x.set__(0.5*e.GAME_WIDTH);this.amountText.y.set__(0.47*e.GAME_HEIGHT);this.amountText.setLetterSpacing(-2.5);this.amountText.setLineSpacing(-10);this.amountText.centerAnchor();this.amountText.disablePointer();this.amountText.setScale(0.5);this.equalText=new P(a);this.equalText.set_align(D.Center);this.equalText.set_text("=");this.equalText.setWrapWidth(0.6*
e.GAME_WIDTH);this.equalText.x.set__(0.5*e.GAME_WIDTH);this.equalText.y.set__(0.39*e.GAME_HEIGHT);this.equalText.setLetterSpacing(-2.5);this.equalText.setLineSpacing(-10);this.equalText.centerAnchor();this.equalText.disablePointer();this.equalText.setScale(0.5);a=m.loadFont(e.ASSET_PACKAGE_GENERAL,"fonts/Gadget/big/drsoos");this.numberText=new P(a);this.numberText.set_align(D.Center);this.numberText.set_text("3");this.numberText.setWrapWidth(0.3*e.GAME_WIDTH);this.numberText.x.set__(0.5*e.GAME_WIDTH);
this.numberText.y.set__(0.65*e.GAME_HEIGHT);this.numberText.centerAnchor();this.numberText.disablePointer()},visible:function(a){this.messageText.set_text(C.lenguajeData.count_down.message);this.amountText.set_text(C.lenguajeData.count_down.text1);this.background.image.set_visible(a);this.coin.image.set_visible(a);this.messageText.set_visible(a);this.equalText.set_visible(a);this.amountText.set_visible(a);this.numberText.set_visible(a);this.heartSmall.image.set_visible(a)},onAdded:function(){u.prototype.onAdded.call(this);
this.owner.add(new Ia);this.owner.addChild((new p).add(this.background));this.owner.addChild((new p).add(this.messageText));this.owner.addChild((new p).add(this.coin));this.owner.addChild((new p).add(this.amountText));this.owner.addChild((new p).add(this.equalText));this.owner.addChild((new p).add(this.numberText));this.owner.addChild((new p).add(this.heartSmall))},startCoundDown:function(a){var b=this,c=new V(function(){b.numberText.set_text("2")}),d=new V(function(){b.numberText.set_text("1")}),
f=new V(function(){a()});this.owner._compMap.Script_25.run(new va([new qa(1),c,new qa(1),d,new qa(1),f]))},__class__:Ye});var Ze=function(a,b,c){u.call(this);this.text=C.lenguajeData.extra_live.message;this.acceptCallback=b;this.cancelCallback=c;this.loadInit()};i["gui.popups.NDiExtraLifePopup"]=Ze;Ze.__name__=["gui","popups","NDiExtraLifePopup"];Ze.__super__=u;Ze.prototype=z(u.prototype,{get_name:function(){return"NDiExtraLifePopup_17"},loadInit:function(){this.background=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,
"images/Gadget/coinConfirmation/Coin_heart"));this.background.setXY(0.5*e.GAME_WIDTH,0.5*e.GAME_HEIGHT);this.background.transform.setScale(0.7);this.coin=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/coinConfirmation/IG_Hud_coin"));this.coin.image.setScale(1.5);this.coin.setXY(0.525*e.GAME_WIDTH,0.36*e.GAME_HEIGHT);this.acceptBtn=new R(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/coinConfirmation/yes_Button"));this.acceptBtn.setScale(0.35);this.acceptBtn.nameButton="accept";this.acceptBtn.setXY(0.45*
e.GAME_WIDTH,0.65*e.GAME_HEIGHT);this.acceptBtn.get_pointerUp().connect(E(this,this.handlerPointerUp));this.cancelBtn=new R(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/coinConfirmation/stop_Button"));this.cancelBtn.setScale(0.35);this.cancelBtn.nameButton="cancel";this.cancelBtn.setXY(0.55*e.GAME_WIDTH,0.65*e.GAME_HEIGHT);this.cancelBtn.get_pointerUp().connect(E(this,this.handlerPointerUp));this.heart=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/coinConfirmation/Heart"));this.heart.setXY(0.45*
e.GAME_WIDTH,0.36*e.GAME_HEIGHT);this.heart.image.setScale(0.85);this.heartSmall=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/coinConfirmation/Heart"));this.heartSmall.setXY(0.5*e.GAME_WIDTH,0.54*e.GAME_HEIGHT);this.heartSmall.image.setScale(0.5);var a=m.loadFont(e.ASSET_PACKAGE_GENERAL,"fonts/Gadget/medium/drsoos");this.messageText=new P(a);this.messageText.set_align(D.Center);this.messageText.set_text("x"+e.EXTRA_LIFE_COINS_AMMOUNT);this.messageText.setWrapWidth(280);this.messageText.x.set__(0.6*
e.GAME_WIDTH);this.messageText.y.set__(0.36*e.GAME_HEIGHT);this.messageText.centerAnchor();this.messageText.disablePointer();this.amountText=new P(a);this.amountText.set_align(D.Center);this.amountText.set_text(this.text);this.amountText.setWrapWidth(0.8*e.GAME_WIDTH);this.amountText.x.set__(0.5*e.GAME_WIDTH);this.amountText.y.set__(0.45*e.GAME_HEIGHT);this.amountText.centerAnchor();this.amountText.disablePointer();this.amountText.setLetterSpacing(-2.5);this.amountText.setScale(0.8);this.nextAmountText1=
new P(a);this.nextAmountText1.set_align(D.Right);this.nextAmountText1.set_text(C.lenguajeData.extra_live.text1);this.nextAmountText1.setWrapWidth(0.2*e.GAME_WIDTH);this.nextAmountText1.x.set__(0.39*e.GAME_WIDTH);this.nextAmountText1.y.set__(0.54*e.GAME_HEIGHT);this.nextAmountText1.centerAnchor();this.nextAmountText1.disablePointer();this.nextAmountText1.setScale(0.7);this.coin2=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/coinConfirmation/IG_Hud_coin"));this.coin2.image.setScale(1);this.coin2.setXY(0.55*
e.GAME_WIDTH,0.54*e.GAME_HEIGHT);this.nextAmountText2=new P(a);this.nextAmountText2.set_align(D.Center);this.nextAmountText2.set_text("x"+(e.EXTRA_LIFE_COINS_AMMOUNT_INCREASE+e.EXTRA_LIFE_COINS_AMMOUNT));this.nextAmountText2.setWrapWidth(0.8*e.GAME_WIDTH);this.nextAmountText2.x.set__(0.61*e.GAME_WIDTH);this.nextAmountText2.y.set__(0.54*e.GAME_HEIGHT);this.nextAmountText2.centerAnchor();this.nextAmountText2.disablePointer();this.nextAmountText2.setScale(0.7)},handlerPointerUp:function(a){a=U.__cast(a.hit,
R);H.getInstance().playSoundEffect(e.ARRAY_SOUNDS_FX_MUSIC.get("SFX_BUTTON_SELECT"),1);switch(a.nameButton){case "accept":null!=this.acceptCallback&&this.acceptCallback();break;case "cancel":null!=this.cancelCallback&&this.cancelCallback()}},visible:function(a){this.messageText.set_text("x"+e.EXTRA_LIFE_COINS_AMMOUNT);this.nextAmountText1.set_text(C.lenguajeData.extra_live.text1);this.nextAmountText2.set_text(this.nextAmountText2.set_text("x"+(e.EXTRA_LIFE_COINS_AMMOUNT_INCREASE+e.EXTRA_LIFE_COINS_AMMOUNT)));
this.background.image.set_visible(a);this.coin.image.set_visible(a);this.coin2.image.set_visible(a);this.messageText.set_visible(a);this.amountText.set_visible(a);this.acceptBtn.set_visible(a);this.cancelBtn.set_visible(a);this.heart.image.set_visible(a);this.nextAmountText1.set_visible(a);this.nextAmountText2.set_visible(a);this.heartSmall.image.set_visible(a)},onAdded:function(){u.prototype.onAdded.call(this);this.owner.add(new Ia);this.owner.addChild((new p).add(this.background));this.owner.addChild((new p).add(this.acceptBtn));
this.owner.addChild((new p).add(this.cancelBtn));this.owner.addChild((new p).add(this.messageText));this.owner.addChild((new p).add(this.coin));this.owner.addChild((new p).add(this.coin2));this.owner.addChild((new p).add(this.heart));this.owner.addChild((new p).add(this.amountText));this.owner.addChild((new p).add(this.nextAmountText1));this.owner.addChild((new p).add(this.nextAmountText2));this.owner.addChild((new p).add(this.heartSmall))},__class__:Ze});var gd=function(a){u.call(this);this.transform=
new M;this.transform.x.set__(0*e.GAME_WIDTH);this.transform.y.set__(-0.1*e.GAME_HEIGHT);this.background=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/Missions/SingleMission_Screen"));this.background.transform.setScale(0.35);this.background.setXY(0.5*e.GAME_WIDTH,0*e.GAME_HEIGHT);var b=m.loadFont(e.ASSET_PACKAGE_GENERAL,"fonts/Gadget/medium/drsoos");this.message=new P(b);this.message.set_align(D.Center);this.message.setWrapWidth(0.5*e.GAME_WIDTH);this.message.setXY(0.5*e.GAME_WIDTH,this.background.transform.y._value);
this.message.set_text(a);this.message.setScale(0.8*e.fixFontScale);this.message.centerAnchor();this.message.disablePointer();this.message.setLetterSpacing(-2.5);this.message.setLineSpacing(-10)};i["gui.popups.NDiNotificationPopup"]=gd;gd.__name__=["gui","popups","NDiNotificationPopup"];gd.__super__=u;gd.prototype=z(u.prototype,{get_name:function(){return"NDiNotificationPopup_22"},onAdded:function(){u.prototype.onAdded.call(this);this.transform.centerAnchor();this.owner.add(this.transform);this.owner.add(new Ia);
this.owner.addChild((new p).add(this.background));this.owner.addChild((new p).add(this.message));this.animate();gd.count++},animate:function(){var a=this,b=new V(function(){a.transform.y.animateTo(0.21*e.GAME_HEIGHT,1,Jb.linear)}),c=new V(function(){a.transform.y.animateTo(-0.1*e.GAME_HEIGHT,0.5,Jb.linear)}),d=new V(function(){gd.count--;a.owner.dispose()});this.owner._compMap.Script_25.run(new va([new qa(2*gd.count),b,new qa(2.5),c,new qa(1),d]))},__class__:gd});var Ma=function(a){null==a&&(a=!0);
Qc.call(this,a);this.assetManagement();this.lastPosY=this.lastPosX=this.lastHeight=this.lastWidth=0;this.transform=new M;this.thereAudio=!1;H.getInstance().stopSoundEffect();A._platform.getExternal().bind("flambeDimChanged",E(this,this.changeSceneSize));A._platform.getExternal().bind("onLeaveWindows",E(this,this.onLeaveWindows))};i["gui.scenes.NDiAbstractScene"]=Ma;Ma.__name__=["gui","scenes","NDiAbstractScene"];Ma.__super__=Qc;Ma.prototype=z(Qc.prototype,{assetManagement:function(){null},changeSceneSize:function(){var a=
s.parseFloat(A._platform.getExternal().call("getCanvasScale"));this.transform.setScale(a);x.getInstance().currentScaleGame=a},onAdded:function(){Qc.prototype.onAdded.call(this);this.owner.add(this.transform);this.updateDisplaySize();A._platform.getExternal().call("embedScalingScript");window.addEventListener("mousedown",E(this,this.onBrowserWindowMouse),!1);window.addEventListener("mousemove",E(this,this.onBrowserWindowMouse),!1);window.addEventListener("mouseup",E(this,this.onBrowserWindowMouse),
!1)},onUpdate:function(){this.updateDisplaySize()},updateDisplaySize:function(){var a=s.parseFloat(A._platform.getExternal().call("getCanvasScale"));this.transform.setScale(a);x.getInstance().currentScaleGame=a},dispose:function(){Qc.prototype.dispose.call(this);window.removeEventListener("mousedown",E(this,this.onBrowserWindowMouse),!1);window.removeEventListener("mousemove",E(this,this.onBrowserWindowMouse),!1);window.removeEventListener("mouseup",E(this,this.onBrowserWindowMouse),!1)},onBrowserWindowMouse:function(a){var b=
a.clientX,c=a.clientY;switch(a.type){case "mousedown":this.onBrowserWindowMouseDown(b,c);break;case "mousemove":this.onBrowserWindowMouseMove(b,c);break;case "mouseup":this.onBrowserWindowMouseUp(b,c)}},onBrowserWindowMouseDown:function(a,b){var c=window.document.getElementById("contentGame-canvas").getBoundingClientRect();if(a<c.left)this.onClickOutsideCanvas();else if(a>c.left+e.GAME_WIDTH*x.getInstance().currentScaleGame)this.onClickOutsideCanvas();else if(b<c.top)this.onClickOutsideCanvas();else if(b>
c.top+e.GAME_HEIGHT*x.getInstance().currentScaleGame)this.onClickOutsideCanvas()},onBrowserWindowMouseMove:function(){},onBrowserWindowMouseUp:function(){},onClickOutsideCanvas:function(){},onLeaveWindows:function(){},createSpriteBlock:function(a,b,c,d,f){null==f&&(f=16777215);return(new Ae(f,c,d)).setXY(a,b)},__class__:Ma});var Uc=function(){Ma.call(this);this.numPackagesLoaded=0;this.background=new J(m.loadImage(e.ASSET_PACKAGE_LOADING,"Gadget/IG_Runner_Preloader_960x540"));this.background.setXY(0.5*
e.GAME_WIDTH,0.5*e.GAME_HEIGHT);this.bar=new Ue;this.bar.setXY(0.406*e.GAME_WIDTH,0.737*e.GAME_HEIGHT);this.highscoreLoaded=!1};i["gui.scenes.NDiLoadingScene"]=Uc;Uc.__name__=["gui","scenes","NDiLoadingScene"];Uc.__super__=Ma;Uc.prototype=z(Ma.prototype,{setHighScore:function(a){null!=a&&(""!=a.data&&null!=a.data&&(x.getInstance().highscoreJson=a),null!=a.user&&(x.getInstance().playerUserId=a.user[0].id));this.highscoreLoaded=!0},onAdded:function(){Ma.prototype.onAdded.call(this);this.rootEntity=
new p;this.rootEntity.add(new Ia);this.owner.addChild(this.rootEntity);this.owner.addChild((new p).add(this.background));this.owner.addChild((new p).add(this.bar));this.loadAssets();Cb.getRequest(E(this,this.setHighScore))},progressEvent:function(a){null!=this.bar&&this.bar.updateBar(a)},onRemoved:function(){this.rootEntity.dispose()},onUpdate:function(a){Ma.prototype.onUpdate.call(this,a);!this.bAllPackagesLoaded&&this.numPackagesLoaded>=this.listPackageDependences.length&&this.highscoreLoaded&&
(this.bAllPackagesLoaded=!0,this.rootEntity._compMap.Script_25.run(new va([new qa(0),new V(E(this,this.pushScene))])))},pushScene:function(){var a;a=U.__cast(G.getInstance().currentScene,Uc);G.getInstance().changeScene(a.nextScene)},loadAssets:function(){if(null==this.listPackageDependences||0==this.listPackageDependences.length){var a;a=U.__cast(G.getInstance().currentScene,Uc);G.getInstance().changeScene(a.nextScene)}else{a=0;for(var b=this.listPackageDependences;a<b.length;){var c=b[a];++a;m.getInstance().loadedAssetPacks.exists(c)?
this.numPackagesLoaded++:m.getInstance().loadAssetPack(c,E(this,this.progressEvent),E(this,this.onLoadAssetPack))}}},onLoadAssetPack:function(){this.numPackagesLoaded++},__class__:Uc});var Ib=function(){this.tmpUpdate=0;this.allowInput=this._restartGame=this._showedNotification_1=this._showedNotification_2=this._showedNotification_3=this.home_visibility=this.sepUpRecordWall=!1;this.metters=this.timer=this.absoluteTimer=0;this.playerJumps=2;this.coins=this.rings=0;this.canCheckForReboot=!1;this.reboots=
0;this.initGame();Ma.call(this)};i["gui.scenes.NDiRunnerScene"]=Ib;Ib.__name__=["gui","scenes","NDiRunnerScene"];Ib.__super__=Ma;Ib.prototype=z(Ma.prototype,{restartGame:function(){this._showedNotification_3=this._showedNotification_2=this._showedNotification_1=!1;this._restartGame=!0;this.objectiveArbiter=new q;this.objectiveArbiter.objective_1.notified&&(this._showedNotification_1=!0);this.objectiveArbiter.objective_2.notified&&(this._showedNotification_2=!0);this.objectiveArbiter.objective_3.notified&&
(this._showedNotification_3=!0);e.PLAYER_INVULNERABLE&&this.space.player.removeInvulnerabilityVFX();this.rootEntity.dispose();this.backgroundLayer.dispose();this.frontgroundLayer.dispose();this.playerLayer.dispose();this.space.dispose();this.pauseButton.dispose();this.enviroment.dispose();this.home_visibility=!1;this.initGame();1==this.playerChosen?this.firstPlayerSelected():2==this.playerChosen&&this.secondPlayerSelected()},initGame:function(){e.runnerSpeedIncrement=1;null!=this.changeVisibilityID&&
this.changeVisibilityID.dispose();e.EXTRA_LIFE_COINS_AMMOUNT=e.EXTRA_LIFE_COINS_CONSTANT;this.changeVisibilityID=A.hidden.get_changed().connect(E(this,this.changeVisibility));this._showedNotification_3=this._showedNotification_2=this._showedNotification_1=!1;this.objectiveArbiter=new q;this.loadObjectives();this.objectiveArbiter.objective_1.notified&&(this._showedNotification_1=!0);this.objectiveArbiter.objective_2.notified&&(this._showedNotification_2=!0);this.objectiveArbiter.objective_3.notified&&
(this._showedNotification_3=!0);Ib.runnerScene=this;this.reference=0;this.referenceName="";null!=this.ghost&&(this.ghost.dispose(),this.ghost=null);e.PLAYER_INVULNERABLE=!1;e.PLAYER_INVULNERABLE_ALERT=!1;this.absoluteTimer=this.timer=e.RINGS=0;this.allowInput=!1;this.metters=0;this.playerJumps=2;this.reboots=this.rings=this.coins=0;this.timer=480/e.timeDeltaPerSec;this.rootEntity=new p;this.backgroundLayer=new p;this.frontgroundLayer=new p;this.pauseButton=new R(m.loadImage(e.ASSET_PACKAGE_GENERAL,
"images/Gadget/HUD/IG_Pause_button"));this.pauseButton.nameButton="pause";this.pauseButton.setXY(0.96*e.GAME_WIDTH,0.065*e.GAME_HEIGHT);this.pauseButton.get_pointerUp().connect(E(this,this.handlerPointerUp));this.pauseButton.setScale(0);this.pauseButton.disablePointer();this.createPhysicsEnviroment();this.enviroment=new uc(this.space,this.frontgroundLayer);this.enviroment.runnerScene=this;this.createHud();this.background=Ma.prototype.createSpriteBlock.call(this,0,0,e.GAME_WIDTH,e.GAME_HEIGHT,e.COLOR_ZONES.get(this.enviroment.currentZoneName));
this.setPausePhysics(!0);this.resultsEntity=new p;this.homeEntity=new p;this._restartGame?(this.home_visibility=!1,this.onAdded()):(this.homePopup=new Ve,this.home_visibility=!0,this.homeEntity.add(this.homePopup));this.addExtraLifePopup();H.getInstance().playSoundBackground(e.ARRAY_SOUNDS_FX_MUSIC.get("SFX_INTRO"),0.5)},changeVisibility:function(){this.home_visibility||G.getInstance().isPaused||G.getInstance().switchPause()},handlerPointerUp:function(){H.getInstance().playSoundEffect(e.ARRAY_SOUNDS_FX_MUSIC.get("SFX_BUTTON_SELECT"),
1);G.getInstance().switchPause()},loadObjectives:function(){q.OBJECTIVE_ONE=this.objectiveArbiter.objective_1.descriptionMsg;q.OBJECTIVE_TWO=this.objectiveArbiter.objective_2.descriptionMsg;q.OBJECTIVE_THREE=this.objectiveArbiter.objective_3.descriptionMsg},onAdded:function(){this.backgroundLayer.add(this.background);this.rootEntity.addChild(this.backgroundLayer);this.rootEntity.addChild(this.homeEntity);this.rootEntity.add(this.enviroment);this.backgroundLayer.addChild(this.enviroment.backgroundEntity);
this.frontgroundLayer.addChild((new p).add(this.pauseButton));this.addPhysicsEnviroment();this.addHud();this.frontgroundLayer.addChild(this.resultsEntity);this.owner.addChild(this.rootEntity);Ma.prototype.onAdded.call(this)},onUpdate:function(a){a>e.MAX_TIME_PER_FRAME&&(a=e.MAX_TIME_PER_FRAME);!this._showedNotification_1&&q.OBJECTIVE_ONE_DONE&&(this._showedNotification_1=!0,this.objectiveArbiter.setNotifiedObjective1(),this.addNotification(this.objectiveArbiter.objective_1.descriptionMsg));!this._showedNotification_2&&
q.OBJECTIVE_TWO_DONE&&(this._showedNotification_2=!0,this.objectiveArbiter.setNotifiedObjective2(),this.addNotification(this.objectiveArbiter.objective_2.descriptionMsg));!this._showedNotification_3&&q.OBJECTIVE_THREE_DONE&&(this._showedNotification_3=!0,this.objectiveArbiter.setNotifiedObjective3(),this.addNotification(this.objectiveArbiter.objective_3.descriptionMsg));q.OBJECTIVE_ONE_DONE&&q.OBJECTIVE_TWO_DONE&&q.OBJECTIVE_THREE_DONE&&!e.All_MISSION_COMPLETE&&(e.All_MISSION_COMPLETE=!0);Ma.prototype.onUpdate.call(this,
a);this.allowInput&&this.actualizeTimer(a);this.objectiveArbiter.updateObjectives()},actualizeTimer:function(a){a*=e.runnerSpeedIncrement;this.timer+=a;this.absoluteTimer+=a;var b=Math.floor(this.timer);this.metters=Math.floor(this.absoluteTimer);x.metters=this.metters;q.METERS=this.metters;this.mettersNumber.set_text(s.string(C.lenguajeData.gameplay_screen.distance)+" "+this.metters+" m");this.metterLabel.set_text("");this.coinsNumber.set_text(""+this.coins);this.ringsNumber.set_text(e.RINGS+"/"+
e.PLAYER_INVULNERABLE_RINGS);var b=this.stringTime_HM(60*b*(e.timeDeltaPerSec|0)),c=b[0]+":"+b[1]+" "+b[2];this.canCheckForReboot&&"00:00 AM"==c&&(this.canCheckForReboot=!1,this.reboots++,x.reboots=this.reboots,this.enviroment.flagTransitionEffect=!0);this.timerHourLabel.set_text(b[0]);this.timerMinutesLabel.set_text(b[1]);this.timerMeridian.set_text(b[2]);this.timerSeparator.set_text(":");this.tmpUpdate=this.absoluteTimer;this.enviroment.nextCurrentZone(c,a);!this.sepUpRecordWall&&null!=x.getInstance().highscoreJson&&
x.getInstance().highscoreJson.user[0].metters-2<=this.absoluteTimer&&(Ib.runnerScene.enviroment.addrecordWall(),Ib.runnerScene.enviroment.addrecordWallAnimation(),this.sepUpRecordWall=!0)},changeNameRoom:function(){var a=this,b;b=""+(0==this.reboots?"":" ("+this.reboots+")");var c=new V(function(){a.stageLabel.set_text(a.getZoneName(a.enviroment.currentZoneName)+b)});this.stageLabel._text!=this.enviroment.currentZoneName+b&&(this.reboots+1,x.reboots=this.reboots,q.DAYS++,this.background.dispose(),
this.background=Ma.prototype.createSpriteBlock.call(this,0,0,e.GAME_WIDTH,e.GAME_HEIGHT,e.COLOR_ZONES.get(this.enviroment.currentZoneName)),this.backgroundLayer.add(this.background),this.owner._compMap.Script_25.run(new va([new qa(2),c])))},stringTime_HM:function(a){var a=Math.floor(a/60),b=[],c=a%60,a=Math.floor(a/60);Math.random();if(23<a)return this.timer=0,b.push((10>a?"0":"")+a),b.push((10>c?"0":"")+c),b.push(12<=a?"PM":"AM"),this.canCheckForReboot=!0,b;var d;d=12<a?a-12:a;b.push((10>d?"0":"")+
d);b.push((10>c?"0":"")+c);b.push(12<=a?"PM":"AM");return b},createPhysicsEnviroment:function(){var a=this;this.space=new $e;this.playerLayer=new p;this.ghostLayer=new p;this._restartGame||(A._platform.getPointer().down.connect(function(b){null!=a.playerBody&&b.viewY>80*x.getInstance().currentScaleGame&&!G.getInstance().isPaused&&a.playerJump()}),A._platform.getKeyboard().down.connect(function(){return function(b){switch(b.key[1]){case 67:a.playerBack();break;case 69:a.playerFront();break;case 15:G.getInstance().switchPause();
break;case 8:break;case 14:break;default:null}}}(this)))},addPhysicsEnviroment:function(){this.rootEntity.add(this.space);this.rootEntity.addChild(this.playerLayer);this.rootEntity.addChild(this.ghostLayer);this.addFloor()},playerJump:function(){this.allowInput&&this.space.player.jump()},playerFront:function(){this.playerBody.get_velocity().set_x(100)},playerBack:function(){this.playerBody.get_velocity().set_x(-100)},addFloor:function(){var a=0*e.GAME_WIDTH,b=0.95*e.GAME_HEIGHT,c=3*e.GAME_WIDTH,d=
ra;null==g.BodyType_STATIC&&(g.internal=!0,g.BodyType_STATIC=new S,g.internal=!1);d=new d(g.BodyType_STATIC);d.zpp_inner.wrap_shapes.add(new ba(ba.rect(a,b,c,10)));this.space.addBody(d);null==d.zpp_inner_i.wrap_cbTypes&&d.zpp_inner_i.setupcbTypes();d.zpp_inner_i.wrap_cbTypes.add(e.floorCollisionType)},onPlayerDeath:function(){this.space.player.onHit();this.pauseButton.setAlpha(0);this.pauseButton.setScale(0);this.enviroment.hideWall();H.getInstance().playSoundEffect(e.ARRAY_SOUNDS_FX_MUSIC.get("SFX_HIT_HEAVY"),
1);this.playerBody.set_allowRotation(!0);this.playerBody.set_rotation(2*Math.random()*Math.PI);this.gameOver()},onPickingCoin:function(){q.COINS++;H.getInstance().playSoundEffect(e.ARRAY_SOUNDS_FX_MUSIC.get("SFX_COIN"),1);this.space.player.addCoinGrabbedVFX();this.coins++;9999<this.coins&&(this.coins=9999)},onPickingCoinBag:function(){q.COINS+=20;q.BAGS_COINS++;H.getInstance().playSoundEffect(e.ARRAY_SOUNDS_FX_MUSIC.get("SFX_COIN"),1);this.space.player.addBagGrabbedVFX();this.coins+=20},onPickingRing:function(){3>
e.RINGS&&(q.RINGS++,e.RINGS+=1);e.RINGS<e.PLAYER_INVULNERABLE_RINGS&&H.getInstance().playSoundEffect(e.ARRAY_SOUNDS_FX_MUSIC.get("SFX_INFINITY_COLLECT"));e.RINGS==e.PLAYER_INVULNERABLE_RINGS&&(e.PLAYER_REVIVE&&this.space.player.cancelInvincibleExtraLife(),e.PLAYER_INVULNERABLE||(this.space.player.invincible(E(this,this.invincibleEnd)),H.getInstance().playloopedFX(e.ARRAY_SOUNDS_FX_MUSIC.get("SFX_INVINCIBLE")),q.INVINCIBLE++));this.rings++;this.space.player.addInvGrabbedVFX()},invincibleEnd:function(){H.getInstance().stoploopedFX()},
onBounce:function(){H.getInstance().playSoundEffect(e.ARRAY_SOUNDS_FX_MUSIC.get("SFX_BOUNCE"),1);this.space.player.onBounce()},rebootEnviroment:function(){H.getInstance().playSoundEffect(e.ARRAY_SOUNDS_FX_MUSIC.get("SFX_LOOP"),1);this.enviroment.createAllSections()},nextRoom:function(){this.enviroment.createNextSection()},onTouchingFloor:function(){this.space.player.onTouchingFloor()},saveScore:function(a,b){var c,d=A._platform.getStorage().get("$n");c='{"user":[{"score":'+a+', "character_id": "'+
b+'", "reboot": "'+x.reboots+'", "metters": "'+x.metters+'"}], "playback":[';for(var f=1,g=d+1;f<g;){var e=f++,h=A._platform.getStorage().get("$j_"+e);c+=h;A._platform.getStorage().remove("$j_"+e);e!=d&&(c+=",")}c+="]}";x.getInstance().highscoreJson=JSON.parse(c);x.getInstance().playerHighscore=a;Cb.postRequest(c)},cleanStorage:function(){for(var a=1,b=A._platform.getStorage().get("$n")+1;a<b;){var c=a++;A._platform.getStorage().remove("$j_"+c)}},gameOver:function(){var a=this,b=x.calculateScore(this.metters,
this.coins);b>x.getInstance().playerHighscore?(x.getInstance().playerHighscore=b,this.saveScore(b,this.space.player.getType())):this.cleanStorage();null!=this.ghost&&(this.ghost.dispose(),this.ghost=null);this.setPausePhysics(!0);this.home_visibility=!0;var c=new V(function(){G.getInstance().adjustSpeed(0);a.space.player.disableAllAnimations();a.playerBody.set_space(null);a.resultsPopup=new ae(a.coins,a.rings,b,x.getInstance().playerHighscore);a.frontgroundLayer.disposeChildren();a.frontgroundLayer.addChild(a.resultsEntity);
a.resultsEntity.add(a.resultsPopup)});this.owner._compMap.Script_25.run(new va([new qa(0.4),c]))},quitGame:function(){e.EXTRA_LIFE_COINS_AMMOUNT=e.EXTRA_LIFE_COINS_CONSTANT;this.ghostLayer.dispose();this.ghostLayer=null;var a=x.calculateScore(this.metters,this.coins);this.cleanStorage();e.PLAYER_INVULNERABLE&&this.space.player.removeInvulnerabilityVFX();this.home_visibility=!0;this.playerBody.set_space(null);this.setPausePhysics(!0);this.resultsPopup=new ae(this.coins,0,a,x.getInstance().playerHighscore);
this.frontgroundLayer.disposeChildren();this.frontgroundLayer.addChild(this.resultsEntity);this.resultsEntity.add(this.resultsPopup);G.getInstance().adjustSpeed(0)},createHud:function(){var a=m.loadFont(e.ASSET_PACKAGE_GENERAL,"fonts/Gadget/medium/drsoos");this.hudBackPanel=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/HUD/IG_Hud_back"));this.hudBackPanel.setXY(0.5*e.GAME_WIDTH,0.07*e.GAME_HEIGHT);this.distancePanel=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/HUD/IG_Hud_L_R_Container"));
this.distancePanel.setXY(0.78*e.GAME_WIDTH,0.06*e.GAME_HEIGHT);this.coinPanel=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/HUD/IG_Hud_L_R_Container"));this.coinPanel.setXY(0.22*e.GAME_WIDTH,0.06*e.GAME_HEIGHT);this.coinPanel.transform.setScaleXY(-1,1);this.coin=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/HUD/IG_Hud_coin"));this.coin.setXY(0.24*e.GAME_WIDTH,0.055*e.GAME_HEIGHT);this.ring=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/HUD/IG_Gear_coin"));this.ring.setXY(0.14*
e.GAME_WIDTH,0.055*e.GAME_HEIGHT);this.timePanel=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/HUD/IG_Hud_C_Container"));this.timePanel.setXY(0.5*e.GAME_WIDTH,0.065*e.GAME_HEIGHT);this.coinsNumber=new P(a);this.coinsNumber.set_align(D.Left);this.coinsNumber.x.set__(0.27*e.GAME_WIDTH);this.coinsNumber.y.set__(0.03*e.GAME_HEIGHT+e.fixFontHeight);this.coinsNumber.set_text("");this.coinsNumber.setScale(e.fixFontScale);this.ringsNumber=new P(a);this.ringsNumber.set_align(D.Right);this.ringsNumber.x.set__(0.2*
e.GAME_WIDTH);this.ringsNumber.y.set__(0.03*e.GAME_HEIGHT+e.fixFontHeight);this.ringsNumber.set_text("");this.ringsNumber.setScale(e.fixFontScale);this.metterLabel=new P(a);this.metterLabel.set_align(D.Left);this.metterLabel.x.set__(0.9*e.GAME_WIDTH);this.metterLabel.y.set__(0.02*e.GAME_HEIGHT+e.fixFontHeight);this.metterLabel.set_text("");this.metterLabel.setScale(e.fixFontScale);this.mettersNumber=new P(a);this.mettersNumber.set_align(D.Left);this.mettersNumber.x.set__(this.distancePanel.transform.x._value-
65);this.mettersNumber.y.set__(0.02*e.GAME_HEIGHT+e.fixFontHeight);this.mettersNumber.set_text("");this.mettersNumber.setScale(1.1*e.fixFontScale);this.stageLabel=new P(a);this.stageLabel.set_align(D.Center);this.stageLabel.x.set__(0.5*e.GAME_WIDTH);this.stageLabel.y.set__(0.016*e.GAME_HEIGHT+e.fixFontHeight);this.stageLabel.set_text("");this.stageLabel.setScale(e.fixFontScale);this.timerHourLabel=new P(a);this.timerHourLabel.set_align(D.Center);this.timerHourLabel.x.set__(0.47*e.GAME_WIDTH);this.timerHourLabel.y.set__(0.055*
e.GAME_HEIGHT+e.fixFontHeight);this.timerHourLabel.setScale(e.fixFontScale);this.timerHourLabel.set_text("");this.timerSeparator=new P(a);this.timerSeparator.set_align(D.Center);this.timerSeparator.x.set__(0.485*e.GAME_WIDTH);this.timerSeparator.y.set__(0.055*e.GAME_HEIGHT+e.fixFontHeight);this.timerSeparator.setScale(e.fixFontScale);this.timerSeparator.set_text("");this.timerMinutesLabel=new P(a);this.timerMinutesLabel.set_align(D.Center);this.timerMinutesLabel.x.set__(0.5*e.GAME_WIDTH);this.timerMinutesLabel.y.set__(0.055*
e.GAME_HEIGHT+e.fixFontHeight);this.timerMinutesLabel.setScale(e.fixFontScale);this.timerMinutesLabel.set_text("");this.timerMeridian=new P(a);this.timerMeridian.set_align(D.Center);this.timerMeridian.x.set__(0.53*e.GAME_WIDTH);this.timerMeridian.y.set__(0.055*e.GAME_HEIGHT+e.fixFontHeight);this.timerMeridian.setScale(e.fixFontScale);this.timerMeridian.set_text("")},addHud:function(){this.frontgroundLayer.addChild((new p).add(this.hudBackPanel));this.frontgroundLayer.addChild((new p).add(this.distancePanel));
this.frontgroundLayer.addChild((new p).add(this.coinPanel));this.frontgroundLayer.addChild((new p).add(this.timePanel));this.frontgroundLayer.addChild((new p).add(this.coin));this.frontgroundLayer.addChild((new p).add(this.ring));this.hudBackPanel.setAlpha(0);this.distancePanel.setAlpha(0);this.coinPanel.setAlpha(0);this.timePanel.setAlpha(0);this.coin.setAlpha(0);this.ring.setAlpha(0);this.frontgroundLayer.addChild((new p).add(this.metterLabel));this.frontgroundLayer.addChild((new p).add(this.mettersNumber));
this.frontgroundLayer.addChild((new p).add(this.coinsNumber));this.frontgroundLayer.addChild((new p).add(this.ringsNumber));this.frontgroundLayer.addChild((new p).add(this.stageLabel));this.frontgroundLayer.addChild((new p).add(this.timerHourLabel));this.frontgroundLayer.addChild((new p).add(this.timerMinutesLabel));this.frontgroundLayer.addChild((new p).add(this.timerMeridian));this.frontgroundLayer.addChild((new p).add(this.timerSeparator))},setPausePhysics:function(a){this.space.setPause(a);this.enviroment.setPause(a);
this.allowInput=!a},firstPlayerSelected:function(){this.playerChosen=1;x.PLAYER_GRAVITY=4E3;x.PLAYER_IMPULSE=-88E3;this.addCountDownPopup()},secondPlayerSelected:function(){this.playerChosen=2;x.PLAYER_GRAVITY=4E3;x.PLAYER_IMPULSE=-96E3;this.addCountDownPopup()},onCoundDownEnd:function(){this.starGame()},starGame:function(){this.sepUpRecordWall=!1;this.stageLabel.set_text(this.enviroment.currentZoneName);this.pauseButton.setScale(1);this.pauseButton.set_pointerEnabled(!0);this.setPausePhysics(!1);
this.coundDownPopUp.dispose();this.distancePanel.setAlpha(1);this.coinPanel.setAlpha(1);this.hudBackPanel.setAlpha(1);this.timePanel.setAlpha(1);this.coin.setAlpha(1);this.ring.setAlpha(1);this.playerLayer.dispose();var a=0,b=0;1==this.playerChosen&&(a=x.getInstance().PLAYER1_START_POSITION_X,b=x.getInstance().PLAYER1_START_POSITION_Y,this.playerLayer=this.space.addFirstPlayer(a,b));2==this.playerChosen&&(a=x.getInstance().PLAYER1_START_POSITION_X,b=x.getInstance().PLAYER1_START_POSITION_Y,this.playerLayer=
this.space.addSecondPlayer(a,b));this.rootEntity.addChild(this.playerLayer);this.playerBody=this.space.playerBody;x.getInstance();this.rootEntity.addChild(this.frontgroundLayer);this.stageLabel.set_text(C.lenguajeData.gameplay_screen.room_1);this.changeNameRoom()},addNotification:function(a){a=new gd(a);this.frontgroundLayer.addChild((new p).add(a))},addExtraLifePopup:function(){this.extraLifePopup=new Ze("",E(this,this.boughtExtraLife),E(this,this.refuseExtraLife));this.extraLifePopup.visible(!1);
this.frontgroundLayer.addChild((new p).add(this.extraLifePopup))},addCountDownPopup:function(){this.coundDownPopUp=new p;var a=new Ye;this.coundDownPopUp.add(a);this.rootEntity.addChild(this.coundDownPopUp);a.visible(!0);a.startCoundDown(E(this,this.onCoundDownEnd));this.home_visibility=!1;this.homeEntity.dispose();H.getInstance().playSoundBackground(e.ARRAY_SOUNDS_FX_MUSIC.get("SFX_LEVEL1"),0.1)},showExtraLifePopup:function(){if(e.REVIVE_USED)this.onPlayerDeath();else H.getInstance().playSoundEffect(e.ARRAY_SOUNDS_FX_MUSIC.get("SFX_POPUP_REVIVE"),
1),this.extraLifePopup.visible(!0),G.getInstance().switchPauseGameplay(),this.pauseButton.setScale(0)},boughtExtraLife:function(){this.space.removeObject();this.pauseButton.setScale(1);this.space.player.invincibleExtraLife();this.extraLifePopup.visible(!1);this.coins-=e.EXTRA_LIFE_COINS_AMMOUNT;e.EXTRA_LIFE_COINS_AMMOUNT+=e.EXTRA_LIFE_COINS_AMMOUNT_INCREASE;G.getInstance().switchPauseGameplay();this.space.player.addHeartAnimation()},refuseExtraLife:function(){this.extraLifePopup.visible(!1);G.getInstance().switchPauseGameplay();
this.onPlayerDeath()},getZoneName:function(a){switch(a){case "School's Hallway":return C.lenguajeData.gameplay_screen.room_1;case "School's Labs":return C.lenguajeData.gameplay_screen.room_2;case "School's Cafeteria":return C.lenguajeData.gameplay_screen.room_3;case "School's Courts":return C.lenguajeData.gameplay_screen.room_4}return"N/A"},onClickOutsideCanvas:function(){!G.getInstance().isPaused&&!this.enviroment.isPaused&&G.getInstance().switchPause()},onLeaveWindows:function(){this.home_visibility||
G.getInstance().isPaused||G.getInstance().switchPause()},__class__:Ib});var nd=function(){Ma.call(this)};i["gui.scenes.NDiTestScene"]=nd;nd.__name__=["gui","scenes","NDiTestScene"];nd.__super__=Ma;nd.prototype=z(Ma.prototype,{onAdded:function(){Ma.prototype.onAdded.call(this);var a=new za(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/plane"));a.centerAnchor();a.x.set__(0.5*e.GAME_WIDTH);a.y.set__(0.5*e.GAME_HEIGHT);this.rootEntity=new p;this.rootEntity.add(a);this.owner.addChild(this.rootEntity)},onRemoved:function(){},
onUpdate:function(a){Ma.prototype.onUpdate.call(this,a)},__class__:nd});var af=function(a){this.url=a;this.headers=new pc;this.params=new pc;this.async=!0};i["haxe.Http"]=af;af.__name__=["haxe","Http"];af.prototype={setParameter:function(a,b){this.params=oc.filter(this.params,function(b){return b.param!=a});this.params.push({param:a,value:b});return this},request:function(a){var b=this;b.responseData=null;var c=this.req=pe.createXMLHttpRequest(),d=function(){if(4==c.readyState){var a;try{a=c.status}catch(d){a=
null}void 0==a&&(a=null);if(null!=a)b.onStatus(a);if(null!=a&&200<=a&&400>a)b.req=null,b.onData(b.responseData=c.responseText);else if(null==a)b.req=null,b.onError("Failed to connect or resolve host");else switch(a){case 12029:b.req=null;b.onError("Failed to connect to host");break;case 12007:b.req=null;b.onError("Unknown host");break;default:b.req=null,b.responseData=c.responseText,b.onError("Http Error #"+c.status)}}};this.async&&(c.onreadystatechange=d);var f=this.postData;if(null!=f)a=!0;else for(var g=
this.params.iterator();g.hasNext();)var e=g.next(),f=null==f?"":f+"&",f=f+(encodeURIComponent(e.param)+"="+encodeURIComponent(e.value));try{if(a)c.open("POST",this.url,this.async);else if(null!=f){var h=1>=this.url.split("?").length;c.open("GET",this.url+(h?"?":"&")+f,this.async);f=null}else c.open("GET",this.url,this.async)}catch(n){b.req=null;this.onError(n.toString());return}!oc.exists(this.headers,function(a){return"Content-Type"==a.header})&&a&&null==this.postData&&c.setRequestHeader("Content-Type",
"application/x-www-form-urlencoded");for(a=this.headers.iterator();a.hasNext();)g=a.next(),c.setRequestHeader(g.header,g.value);c.send(f);this.async||d(null)},onData:function(){},onError:function(){},onStatus:function(){},__class__:af};var Pc=function(){this.buf=new bc;this.cache=[];this.useCache=Pc.USE_CACHE;this.useEnumIndex=Pc.USE_ENUM_INDEX;this.shash=new ea;this.scount=0};i["haxe.Serializer"]=Pc;Pc.__name__=["haxe","Serializer"];Pc.prototype={toString:function(){return this.buf.b},serializeString:function(a){var b=
this.shash.get(a);null!=b?(this.buf.b+="R",this.buf.b=null==b?this.buf.b+"null":this.buf.b+(""+b)):(this.shash.set(a,this.scount++),this.buf.b+="y",a=encodeURIComponent(a),this.buf.b=null==a.length?this.buf.b+"null":this.buf.b+(""+a.length),this.buf.b+=":",this.buf.b=null==a?this.buf.b+"null":this.buf.b+(""+a))},serializeRef:function(a){for(var b=typeof a,c=0,d=this.cache.length;c<d;){var f=c++,g=this.cache[f];if(typeof g==b&&g==a)return this.buf.b+="r",this.buf.b=null==f?this.buf.b+"null":this.buf.b+
(""+f),!0}this.cache.push(a);return!1},serializeFields:function(a){for(var b=0,c=Ea.fields(a);b<c.length;){var d=c[b];++b;this.serializeString(d);this.serialize(Ea.field(a,d))}this.buf.b+="g"},serialize:function(a){var b=na["typeof"](a);switch(b[1]){case 0:this.buf.b+="n";break;case 1:if(0==a){this.buf.b+="z";break}this.buf.b+="i";this.buf.b=null==a?this.buf.b+"null":this.buf.b+(""+a);break;case 2:Math.isNaN(a)?this.buf.b+="k":Math.isFinite(a)?(this.buf.b+="d",this.buf.b=null==a?this.buf.b+"null":
this.buf.b+(""+a)):this.buf.b=0>a?this.buf.b+"m":this.buf.b+"p";break;case 3:this.buf.b=a?this.buf.b+"t":this.buf.b+"f";break;case 6:b=b[2];if(b==String){this.serializeString(a);break}if(this.useCache&&this.serializeRef(a))break;switch(b){case Array:b=0;this.buf.b+="a";for(var c=a.length,d=0;d<c;){var f=d++;null==a[f]?b++:(0<b&&(1==b?this.buf.b+="n":(this.buf.b+="u",this.buf.b=null==b?this.buf.b+"null":this.buf.b+(""+b)),b=0),this.serialize(a[f]))}0<b&&(1==b?this.buf.b+="n":(this.buf.b+="u",this.buf.b=
null==b?this.buf.b+"null":this.buf.b+(""+b)));this.buf.b+="h";break;case pc:this.buf.b+="l";for(a=a.iterator();a.hasNext();)this.serialize(a.next());this.buf.b+="h";break;case Date:this.buf.b+="v";this.buf.add(Q.dateStr(a));break;case ea:this.buf.b+="b";for(b=a.keys();b.hasNext();)c=b.next(),this.serializeString(c),this.serialize(a.get(c));this.buf.b+="h";break;case pb:this.buf.b+="q";for(b=a.keys();b.hasNext();)c=b.next(),this.buf.b+=":",this.buf.b=null==c?this.buf.b+"null":this.buf.b+(""+c),this.serialize(a.get(c));
this.buf.b+="h";break;case Vc:this.buf.b+="M";for(b=a.keys();b.hasNext();)c=b.next(),d=Ea.field(c,"__id__"),Ea.deleteField(c,"__id__"),this.serialize(c),c.__id__=d,this.serialize(a.h[c.__id__]);this.buf.b+="h";break;case hd:d=0;f=a.length-2;b=new bc;for(c=Pc.BASE64;d<f;){var g=a.get(d++),e=a.get(d++),h=a.get(d++);b.add(c.charAt(g>>2));b.add(c.charAt((g<<4|e>>4)&63));b.add(c.charAt((e<<2|h>>6)&63));b.add(c.charAt(h&63))}d==f?(f=a.get(d++),a=a.get(d++),b.add(c.charAt(f>>2)),b.add(c.charAt((f<<4|a>>
4)&63)),b.add(c.charAt(a<<2&63))):d==f+1&&(a=a.get(d++),b.add(c.charAt(a>>2)),b.add(c.charAt(a<<4&63)));a=b.b;this.buf.b+="s";this.buf.b=null==a.length?this.buf.b+"null":this.buf.b+(""+a.length);this.buf.b+=":";this.buf.b=null==a?this.buf.b+"null":this.buf.b+(""+a);break;default:this.useCache&&this.cache.pop(),null!=a.hxSerialize?(this.buf.b+="C",this.serializeString(na.getClassName(b)),this.useCache&&this.cache.push(a),a.hxSerialize(this),this.buf.b+="g"):(this.buf.b+="c",this.serializeString(na.getClassName(b)),
this.useCache&&this.cache.push(a),this.serializeFields(a))}break;case 4:if(this.useCache&&this.serializeRef(a))break;this.buf.b+="o";this.serializeFields(a);break;case 7:b=b[2];if(this.useCache){if(this.serializeRef(a))break;this.cache.pop()}this.buf.b=this.useEnumIndex?this.buf.b+"j":this.buf.b+"w";this.serializeString(na.getEnumName(b));this.useEnumIndex?(this.buf.b+=":",this.buf.b+=s.string(a[1])):this.serializeString(a[0]);this.buf.b+=":";b=a.length;this.buf.b+=s.string(b-2);for(c=2;c<b;)d=c++,
this.serialize(a[d]);this.useCache&&this.cache.push(a);break;case 5:throw"Cannot serialize function";default:throw"Cannot serialize "+s.string(a);}},__class__:Pc};var Sa=function(a){this.buf=a;this.length=a.length;this.pos=0;this.scache=[];this.cache=[];a=Sa.DEFAULT_RESOLVER;null==a&&(a=na,Sa.DEFAULT_RESOLVER=a);this.setResolver(a)};i["haxe.Unserializer"]=Sa;Sa.__name__=["haxe","Unserializer"];Sa.initCodes=function(){for(var a=[],b=0,c=Sa.BASE64.length;b<c;){var d=b++;a[Sa.BASE64.charCodeAt(d)]=d}return a};
Sa.run=function(a){return(new Sa(a)).unserialize()};Sa.prototype={setResolver:function(a){this.resolver=null==a?{resolveClass:function(){return null},resolveEnum:function(){return null}}:a},get:function(a){return this.buf.charCodeAt(a)},readDigits:function(){for(var a=0,b=!1,c=this.pos;;){var d=this.buf.charCodeAt(this.pos);if(d!=d)break;if(45==d){if(this.pos!=c)break;b=!0}else{if(48>d||57<d)break;a=10*a+(d-48)}this.pos++}b&&(a*=-1);return a},unserializeObject:function(a){for(;;){if(this.pos>=this.length)throw"Invalid object";
if(103==this.buf.charCodeAt(this.pos))break;var b=this.unserialize();if("string"!=typeof b)throw"Invalid object key";var c=this.unserialize();a[b]=c}this.pos++},unserializeEnum:function(a,b){if(58!=this.get(this.pos++))throw"Invalid enum format";var c=this.readDigits();if(0==c)return na.createEnum(a,b);for(var d=[];0<c--;)d.push(this.unserialize());return na.createEnum(a,b,d)},unserialize:function(){switch(this.get(this.pos++)){case 110:return null;case 116:return!0;case 102:return!1;case 122:return 0;
case 105:return this.readDigits();case 100:for(var a=this.pos;;){var b=this.buf.charCodeAt(this.pos);if(43<=b&&58>b||101==b||69==b)this.pos++;else break}return s.parseFloat(Q.substr(this.buf,a,this.pos-a));case 121:a=this.readDigits();if(58!=this.get(this.pos++)||this.length-this.pos<a)throw"Invalid string length";b=Q.substr(this.buf,this.pos,a);this.pos+=a;b=decodeURIComponent(b.split("+").join(" "));this.scache.push(b);return b;case 107:return Math.NaN;case 109:return Math.NEGATIVE_INFINITY;case 112:return Math.POSITIVE_INFINITY;
case 97:a=[];for(this.cache.push(a);;){b=this.buf.charCodeAt(this.pos);if(104==b){this.pos++;break}117==b?(this.pos++,b=this.readDigits(),a[a.length+b-1]=null):a.push(this.unserialize())}return a;case 111:return a={},this.cache.push(a),this.unserializeObject(a),a;case 114:a=this.readDigits();if(0>a||a>=this.cache.length)throw"Invalid reference";return this.cache[a];case 82:a=this.readDigits();if(0>a||a>=this.scache.length)throw"Invalid string reference";return this.scache[a];case 120:throw this.unserialize();
case 99:a=this.unserialize();b=this.resolver.resolveClass(a);if(null==b)throw"Class not found "+a;a=na.createEmptyInstance(b);this.cache.push(a);this.unserializeObject(a);return a;case 119:a=this.unserialize();b=this.resolver.resolveEnum(a);if(null==b)throw"Enum not found "+a;a=this.unserializeEnum(b,this.unserialize());this.cache.push(a);return a;case 106:a=this.unserialize();b=this.resolver.resolveEnum(a);if(null==b)throw"Enum not found "+a;this.pos++;var c=this.readDigits(),d=na.getEnumConstructs(b)[c];
if(null==d)throw"Unknown enum index "+a+"@"+c;a=this.unserializeEnum(b,d);this.cache.push(a);return a;case 108:a=new pc;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);)a.add(this.unserialize());this.pos++;return a;case 98:a=new ea;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);)b=this.unserialize(),a.set(b,this.unserialize());this.pos++;return a;case 113:a=new pb;this.cache.push(a);for(b=this.get(this.pos++);58==b;)b=this.readDigits(),a.set(b,this.unserialize()),b=this.get(this.pos++);
if(104!=b)throw"Invalid IntMap format";return a;case 77:a=new Vc;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);)b=this.unserialize(),a.set(b,this.unserialize());this.pos++;return a;case 118:return a=Q.substr(this.buf,this.pos,19),a=Q.strDate(a),this.cache.push(a),this.pos+=19,a;case 115:a=this.readDigits();d=this.buf;if(58!=this.get(this.pos++)||this.length-this.pos<a)throw"Invalid bytes length";var f=Sa.CODES;null==f&&(f=Sa.initCodes(),Sa.CODES=f);for(var g=this.pos,e=a&3,h=g+(a-e),b=
hd.alloc(3*(a>>2)+(2<=e?e-1:0)),c=0;g<h;){var n=f[lb.fastCodeAt(d,g++)],i=f[lb.fastCodeAt(d,g++)];b.set(c++,n<<2|i>>4);n=f[lb.fastCodeAt(d,g++)];b.set(c++,i<<4|n>>2);i=f[lb.fastCodeAt(d,g++)];b.set(c++,n<<6|i)}2<=e&&(i=f[lb.fastCodeAt(d,g++)],h=f[lb.fastCodeAt(d,g++)],b.set(c++,i<<2|h>>4),3==e&&(d=f[lb.fastCodeAt(d,g++)],b.set(c++,h<<4|d>>2)));this.pos+=a;this.cache.push(b);return b;case 67:a=this.unserialize();b=this.resolver.resolveClass(a);if(null==b)throw"Class not found "+a;a=na.createEmptyInstance(b);
this.cache.push(a);a.hxUnserialize(this);if(103!=this.get(this.pos++))throw"Invalid custom data";return a}this.pos--;throw"Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos;},__class__:Sa};var pb=function(){this.h={}};i["haxe.ds.IntMap"]=pb;pb.__name__=["haxe","ds","IntMap"];pb.__interfaces__=[xf];pb.prototype={set:function(a,b){this.h[a]=b},get:function(a){return this.h[a]},exists:function(a){return this.h.hasOwnProperty(a)},remove:function(a){if(!this.h.hasOwnProperty(a))return!1;
delete this.h[a];return!0},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b|0);return Q.iter(a)},__class__:pb};var Vc=function(){this.h={};this.h.__keys__={}};i["haxe.ds.ObjectMap"]=Vc;Vc.__name__=["haxe","ds","ObjectMap"];Vc.__interfaces__=[xf];Vc.prototype={set:function(a,b){var c=a.__id__||(a.__id__=++Vc.count);this.h[c]=b;this.h.__keys__[c]=a},keys:function(){var a=[],b;for(b in this.h.__keys__)this.h.hasOwnProperty(b)&&a.push(this.h.__keys__[b]);return Q.iter(a)},
__class__:Vc};var ea=function(){this.h={}};i["haxe.ds.StringMap"]=ea;ea.__name__=["haxe","ds","StringMap"];ea.__interfaces__=[xf];ea.prototype={set:function(a,b){this.h["$"+a]=b},get:function(a){return this.h["$"+a]},exists:function(a){return this.h.hasOwnProperty("$"+a)},remove:function(a){a="$"+a;if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b.substr(1));return Q.iter(a)},iterator:function(){return{ref:this.h,
it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){return this.ref["$"+this.it.next()]}}},__class__:ea};var hd=function(a,b){this.length=a;this.b=b};i["haxe.io.Bytes"]=hd;hd.__name__=["haxe","io","Bytes"];hd.alloc=function(a){for(var b=[],c=0;c<a;)c++,b.push(0);return new hd(a,b)};hd.prototype={get:function(a){return this.b[a]},set:function(a,b){this.b[a]=b&255},__class__:hd};var Qg=function(){};i["haxe.io.Eof"]=Qg;Qg.__name__=["haxe","io","Eof"];Qg.prototype={toString:function(){return"Eof"},
__class__:Qg};var Mg=function(){};i["haxe.rtti.Meta"]=Mg;Mg.__name__=["haxe","rtti","Meta"];Mg.getType=function(a){a=a.__meta__;return null==a||null==a.obj?{}:a.obj};var ag=function(a){this.__x=a};i["haxe.xml._Fast.NodeAccess"]=ag;ag.__name__=["haxe","xml","_Fast","NodeAccess"];ag.prototype={__class__:ag};var bg=function(a){this.__x=a};i["haxe.xml._Fast.AttribAccess"]=bg;bg.__name__=["haxe","xml","_Fast","AttribAccess"];bg.prototype={__class__:bg};var cg=function(a){this.__x=a};i["haxe.xml._Fast.HasAttribAccess"]=
cg;cg.__name__=["haxe","xml","_Fast","HasAttribAccess"];cg.prototype={__class__:cg};var dg=function(a){this.__x=a};i["haxe.xml._Fast.HasNodeAccess"]=dg;dg.__name__=["haxe","xml","_Fast","HasNodeAccess"];dg.prototype={__class__:dg};var eg=function(a){this.__x=a};i["haxe.xml._Fast.NodeListAccess"]=eg;eg.__name__=["haxe","xml","_Fast","NodeListAccess"];eg.prototype={resolve:function(a){for(var b=new pc,a=this.__x.elementsNamed(a);a.hasNext();){var c=a.next();b.add(new Te(c))}return b},__class__:eg};
var Te=function(a){if(a.nodeType!=N.Document&&a.nodeType!=N.Element)throw"Invalid nodeType "+s.string(a.nodeType);this.x=a;this.node=new ag(a);this.nodes=new eg(a);this.att=new bg(a);this.has=new cg(a);this.hasNode=new dg(a)};i["haxe.xml.Fast"]=Te;Te.__name__=["haxe","xml","Fast"];Te.prototype={__class__:Te};var qc=function(){};i["haxe.xml.Parser"]=qc;qc.__name__=["haxe","xml","Parser"];qc.parse=function(a){var b=N.createDocument();qc.doParse(a,0,b);return b};qc.doParse=function(a,b,c){null==b&&(b=
0);for(var d=null,f=1,g=1,e=null,h=0,n=0,i=0,l=a.charCodeAt(b),j=new bc;l==l;){switch(f){case 0:switch(l){case 10:case 13:case 9:case 32:break;default:f=g;continue}break;case 1:switch(l){case 60:f=0;g=2;break;default:h=b;f=13;continue}break;case 13:60==l?(g=N.createPCData(j.b+Q.substr(a,h,b-h)),j=new bc,c.addChild(g),n++,f=0,g=2):38==l&&(j.addSub(a,h,b-h),f=18,g=13,h=b+1);break;case 17:93==l&&93==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2)&&(f=N.createCData(Q.substr(a,h,b-h)),c.addChild(f),n++,b+=2,
f=1);break;case 2:switch(l){case 33:if(91==a.charCodeAt(b+1)){b+=2;if("CDATA["!=Q.substr(a,b,6).toUpperCase())throw"Expected <![CDATA[";b+=5;f=17}else if(68==a.charCodeAt(b+1)||100==a.charCodeAt(b+1)){if("OCTYPE"!=Q.substr(a,b+2,6).toUpperCase())throw"Expected <!DOCTYPE";b+=8;f=16}else{if(45!=a.charCodeAt(b+1)||45!=a.charCodeAt(b+2))throw"Expected <\!--";b+=2;f=15}h=b+1;break;case 63:f=14;h=b;break;case 47:if(null==c)throw"Expected node name";h=b+1;f=0;g=10;break;default:f=3;h=b;continue}break;case 3:if(!(97<=
l&&122>=l||65<=l&&90>=l||48<=l&&57>=l||58==l||46==l||95==l||45==l)){if(b==h)throw"Expected node name";d=N.createElement(Q.substr(a,h,b-h));c.addChild(d);f=0;g=4;continue}break;case 4:switch(l){case 47:f=11;n++;break;case 62:f=9;n++;break;default:f=5;h=b;continue}break;case 5:if(!(97<=l&&122>=l||65<=l&&90>=l||48<=l&&57>=l||58==l||46==l||95==l||45==l)){if(h==b)throw"Expected attribute name";e=Q.substr(a,h,b-h);if(d.exists(e))throw"Duplicate attribute";f=0;g=6;continue}break;case 6:switch(l){case 61:f=
0;g=7;break;default:throw"Expected =";}break;case 7:switch(l){case 34:case 39:f=8;h=b;break;default:throw'Expected "';}break;case 8:l==a.charCodeAt(h)&&(g=Q.substr(a,h+1,b-h-1),d.set(e,g),f=0,g=4);break;case 9:h=b=qc.doParse(a,b,d);f=1;break;case 11:switch(l){case 62:f=1;break;default:throw"Expected >";}break;case 12:switch(l){case 62:return 0==n&&c.addChild(N.createPCData("")),b;default:throw"Expected >";}case 10:if(!(97<=l&&122>=l||65<=l&&90>=l||48<=l&&57>=l||58==l||46==l||95==l||45==l)){if(h==
b)throw"Expected node name";if(Q.substr(a,h,b-h)!=c.get_nodeName())throw"Expected </"+c.get_nodeName()+">";f=0;g=12;continue}break;case 15:45==l&&45==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2)&&(c.addChild(N.createComment(Q.substr(a,h,b-h))),b+=2,f=1);break;case 16:91==l?i++:93==l?i--:62==l&&0==i&&(c.addChild(N.createDocType(Q.substr(a,h,b-h))),f=1);break;case 14:63==l&&62==a.charCodeAt(b+1)&&(b++,f=Q.substr(a,h+1,b-h-2),c.addChild(N.createProcessingInstruction(f)),f=1);break;case 18:59==l&&(h=Q.substr(a,
h,b-h),35==h.charCodeAt(0)?(h=120==h.charCodeAt(1)?s.parseInt("0"+Q.substr(h,1,h.length-1)):s.parseInt(Q.substr(h,1,h.length-1)),j.add(String.fromCharCode(h))):qc.escapes.exists(h)?j.add(qc.escapes.get(h)):j.b+=s.string("&"+h+";"),h=b+1,f=g)}l=lb.fastCodeAt(a,++b)}1==f&&(h=b,f=13);if(13==f)return(b!=h||0==n)&&c.addChild(N.createPCData(j.b+Q.substr(a,h,b-h))),b;throw"Unexpected end";};var U=function(){};i["js.Boot"]=U;U.__name__=["js","Boot"];U.getClass=function(a){return a instanceof Array&&null==
a.__enum__?Array:a.__class__};U.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var c=typeof a;if("function"==c&&(a.__name__||a.__ename__))c="object";switch(c){case "object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];for(var c=a[0]+"(",b=b+"\t",d=2,f=a.length;d<f;)var g=d++,c=2!=g?c+(","+U.__string_rec(a[g],b)):c+U.__string_rec(a[g],b);return c+")"}c=a.length;d="[";b+="\t";for(f=0;f<c;)g=f++,d+=(0<g?",":"")+U.__string_rec(a[g],b);return d+"]"}try{d=
a.toString}catch(e){return"???"}if(null!=d&&d!=Object.toString&&(c=a.toString(),"[object Object]"!=c))return c;c=null;d="{\n";b+="\t";f=null!=a.hasOwnProperty;for(c in a)if(!f||a.hasOwnProperty(c))"prototype"==c||"__class__"==c||"__super__"==c||"__interfaces__"==c||"__properties__"==c||(2!=d.length&&(d+=", \n"),d+=b+c+" : "+U.__string_rec(a[c],b));b=b.substring(1);return d+("\n"+b+"}");case "function":return"<function>";case "string":return a;default:return""+a}};U.__interfLoop=function(a,b){if(null==
a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var d=0,f=c.length;d<f;){var g=d++,g=c[g];if(g==b||U.__interfLoop(g,b))return!0}return U.__interfLoop(a.__super__,b)};U.__instanceof=function(a,b){if(null==b)return!1;switch(b){case Jh:return(a|0)===a;case Ch:return"number"==typeof a;case Dh:return"boolean"==typeof a;case String:return"string"==typeof a;case Array:return a instanceof Array&&null==a.__enum__;case Kh:return!0;default:if(null!=a){if("function"==typeof b&&(a instanceof
b||U.__interfLoop(U.getClass(a),b)))return!0}else return!1;return b==Lh&&null!=a.__name__||b==Mh&&null!=a.__ename__?!0:a.__enum__==b}};U.__cast=function(a,b){if(U.__instanceof(a,b))return a;throw"Cannot cast "+s.string(a)+" to "+s.string(b);};var pe=function(){};i["js.Browser"]=pe;pe.__name__=["js","Browser"];pe.getLocalStorage=function(){try{var a=window.localStorage;a.getItem("");return a}catch(b){return null}};pe.createXMLHttpRequest=function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;
if("undefined"!=typeof ActiveXObject)return new ActiveXObject("Microsoft.XMLHTTP");throw"Unable to create XMLHttpRequest object.";};var H=function(){this.soundFX=null;this.enabledSoundBackground=this.enabledSoundEffects=!0;this.soundFXVolume=this.backgroundSoundVolume=1;this.arraySoundFX=[]};i["managers.NDiAudioManager"]=H;H.__name__=["managers","NDiAudioManager"];H.initInstance=function(){null==H.instance&&(H.instance=new H)};H.getInstance=function(){return H.instance};H.prototype={setEnabledSoundBackground:function(){null!=
this.backgroundSound&&(this.enabledSoundBackground?(this.backgroundSound.set_paused(!1),this.enabledSoundBackground=!1):(this.backgroundSound.set_paused(!0),this.enabledSoundBackground=!0),qb.getInstance().setData(Lb.MUTE_MUSIC[0],!this.enabledSoundBackground))},pauseSoundBackground:function(a){null==a&&(a=!0);null!=this.backgroundSound&&(this.backgroundSound.set_paused(a),this.enabledSoundBackground=a,qb.getInstance().setData(Lb.MUTE_MUSIC[0],!this.enabledSoundBackground))},pauseSoundEffect:function(a){if(null!=
this.soundFX){this.soundFX.set_paused(a);for(var b=0,c=this.arraySoundFX.length;b<c;){var d=b++;null!=this.arraySoundFX[d]&&!1==this.arraySoundFX[d].get_complete().get__()&&this.arraySoundFX[d].set_paused(a)}}},playloopedFX:function(a,b,c){null==c&&(c="assets_general");H.getInstance().isPaused||(this.soundLoopFX=m.loadSound(c,a).loop())},stoploopedFX:function(){!H.getInstance().isPaused&&null!=this.soundLoopFX&&this.soundLoopFX.dispose()},playSoundEffect:function(a,b,c){null==c&&(c="assets_general");
null==b&&(b=1);!this.isPaused&&this.enabledSoundEffects&&(a=m.loadSound(c,a),b*=this.soundFXVolume,this.addSoundFXPool(this.soundFX),this.soundFX=a.play(b))},addSoundFXPool:function(a){for(var b=this.arraySoundFX.length,c=0;c<b;){var d=c++;if(null==this.arraySoundFX[d]||!0==this.arraySoundFX[d].get_complete().get__()){this.arraySoundFX[d]=a;return}}this.arraySoundFX.push(this.soundFX)},stopSoundEffect:function(){null!=this.soundFX&&this.soundFX.dispose();for(var a=0,b=this.arraySoundFX.length;a<b;){var c=
a++;null!=this.arraySoundFX[c]&&!1==this.arraySoundFX[c].get_complete().get__()&&this.arraySoundFX[c].dispose()}},playSoundBackground:function(a,b){null==b&&(b=1);null!=this.backgroundSound&&(this.backgroundSound.dispose(),this.backgroundSound=null);this.backgroundSoundVolume=b;this.backgroundSound=m.loadSound(e.ASSET_PACKAGE_GENERAL,a).loop(this.backgroundSoundVolume);this.enabledSoundBackground=!0;this.setEnabledSoundBackground();this.isPaused&&this.backgroundSound.set_paused(!0)},__class__:H};
var C=function(){this.localizationData=new ea};i["managers.NDiLocalizationManager"]=C;C.__name__=["managers","NDiLocalizationManager"];C.initInstance=function(){null==C.instance&&(C.instance=new C)};C.getInstance=function(){return C.instance};C.prototype={initLocalizationData:function(){var a=m.loadJSON(e.ASSET_PACKAGE_CONFIG,"localization.json");C.lenguajeData=a.language.english;"fr"==a.language.type&&(C.lenguajeData=a.language.french,C.isEnglish=!1);Cb.loopedRunnerURL=a.config.server},__class__:C};
var m=function(){this.loadedAssetPacks=new ea;this.loadedCache=new ea};i["managers.NDiResourcesManager"]=m;m.__name__=["managers","NDiResourcesManager"];m.loadFont=function(a,b){var c=m.getInstance().loadedCache,d=a+"_"+b;if(c.exists(d))return U.__cast(c.get(d),cd);var f=m.getInstance().loadedAssetPacks.get(a),f=new cd(f,b);c.set(d,f);return f};m.loadImage=function(a,b){var c=m.getInstance().loadedCache,d=a+"_"+b;if(c.exists(d))return U.__cast(c.get(d),Vd);var f=m.getInstance().loadedAssetPacks.get(a).getTexture(b);
c.set(d,f);return f};m.loadXML=function(a,b){return m.getInstance().loadedAssetPacks.get(a).getFile(b).toString()};m.loadJSON=function(a,b){var c=m.getInstance().loadedCache,d=a+"_"+b;if(c.exists(d))return c.get(d);var f=m.getInstance().loadedAssetPacks.get(a).getFile(b),f=JSON.parse(f.toString());c.set(d,f);return f};m.loadSetAnimations=function(a,b){var c=m.getInstance().loadedCache,d=a+"_"+b;if(c.exists(d))return U.__cast(c.get(d),Qe);var f=m.getInstance().loadedAssetPacks.get(a),f=new Qe(f,b);
c.set(d,f);return f};m.loadSound=function(a,b){var c=m.getInstance().loadedCache,d=a+"_"+b;if(c.exists(d))return U.__cast(c.get(d),Oc);var f=m.getInstance().loadedAssetPacks.get(a);if(null==f)return null;f=f.getSound(b);c.set(d,f);return f};m.initInstance=function(){null==m.instance&&(m.instance=new m)};m.getInstance=function(){return m.instance};m.prototype={loadAssetPack:function(a,b,c){var d=this;if(this.loadedAssetPacks.exists(a))null!=c&&c(this.loadedAssetPacks.get(a));else{var f=Xa.fromAssets(a),
g="",g=bf.get_base();""!=g&&f.set_localBase(g+"assets/");var e=A._platform.loadAssetPack(f);e.progressChanged.connect(function(){var a=e._progress/e._total;null!=b&&b(a)});e.get(function(b){d.loadedAssetPacks.set(a,b);null!=c&&c(b)})}},__class__:m};var G=function(){this.hasConfirmation=this.isPaused=!1;this.director=new Le;this.transform=new M;A.root.add(this.director)};i["managers.NDiSceneManager"]=G;G.__name__=["managers","NDiSceneManager"];G.initInstance=function(){null==G.instance&&(G.instance=
new G)};G.getInstance=function(){G.initInstance();return G.instance};G.prototype={changeScene:function(a){this.executeChangeScene(a)},executeChangeScene:function(a){var b=this,c=null,d=[];null!=this.currentScene&&this.currentScene.type==ma.NDI_TYPE_SCENE_LOADING?(c=U.__cast(this.currentScene,Uc),c=yf.createScene(c.nextScene)):d.push(e.ASSET_PACKAGE_GENERAL);for(var f=!0,g=0;g<d.length;){var h=d[g];++g;if(!m.getInstance().loadedAssetPacks.exists(h)){f=!1;break}}f?null==c&&(c=yf.createScene(a)):(c=
new Uc,c.nextScene=a,c.listPackageDependences=d,a=ma.NDI_TYPE_SCENE_LOADING);var i=new p;i.add(new Ia);i.add(c);f?this.currentScene.owner._compMap.Script_25.run(new va([new qa(0.1),new V(function(){var a=new $d(0.3,Jb.quintInOut);b.director.unwindToScene(i,a)})])):(d=new $d(0.3,Jb.quintInOut),this.director.unwindToScene(i,d));null!=this.currentScene&&this.currentScene.owner.disposeChildren();this.currentScene=c;this.currentScene.type=a},pause:function(){this.pauseScene=new We;this.pauseEntity=new p;
this.pauseEntity.add(this.pauseScene);this.currentScene.owner.addChild(this.pauseEntity);this.adjustSpeed(0)},pauseGameplay:function(){this.adjustSpeed(0)},resume:function(){this.pauseEntity.dispose();this.adjustSpeed(1)},resumeGameplay:function(){this.adjustSpeed(1)},switchPause:function(){(this.isPaused=!this.isPaused)?this.pause():this.resume()},switchPauseGameplay:function(){(this.isPaused=!this.isPaused)?this.pauseGameplay():this.resumeGameplay()},switchConfirmation:function(a,b,c){null==a&&
(a="");this.hasConfirmation?this.confirmationEntity.dispose():(this.confirmationScene=new Xe(a,b,c),this.confirmationEntity=new p,this.confirmationEntity.add(this.confirmationScene),this.currentScene.owner.addChild(this.confirmationEntity));this.hasConfirmation=!this.hasConfirmation},adjustSpeed:function(a){null==this.currentScene.owner._compMap.SpeedAdjuster_7&&this.currentScene.owner.add(new xe);this.currentScene.owner._compMap.SpeedAdjuster_7.scale.set__(a)},__class__:G};var Cb=function(){};i["managers.NDiWebServiceManager"]=
Cb;Cb.__name__=["managers","NDiWebServiceManager"];Cb.getRequest=function(a){var b=new af(Cb.loopedRunnerURL+Cb.loopedRunnerCheckUser);b.onError=function(){a(null)};b.onStatus=function(){null};b.onData=function(b){b=JSON.parse(b);b=JSON.stringify(b.data);a(JSON.parse(b))};var c=A._platform.getExternal().call("getCookie");b.setParameter("user_id",c);b.request(!0)};Cb.postRequest=function(a){var b=new af(Cb.loopedRunnerURL+Cb.loopedRunnerSetBest);b.onError=function(){null};b.onStatus=function(){null};
b.onData=function(){null};b.setParameter("playback",a);a=A._platform.getExternal().call("getCookie");b.setParameter("user_id",a);b.request(!0)};var o=function(){};i["nape.Config"]=o;o.__name__=["nape","Config"];var Ja=function(){this.zpp_inner=null};i["nape.callbacks.Callback"]=Ja;Ja.__name__=["nape","callbacks","Callback"];Ja.prototype={toString:function(){return""},__class__:Ja};var cf=function(){this.zpp_inner=null};i["nape.callbacks.BodyCallback"]=cf;cf.__name__=["nape","callbacks","BodyCallback"];
cf.__super__=Ja;cf.prototype=z(Ja.prototype,{toString:function(){var a;a="Cb:"+["WAKE","SLEEP"][this.zpp_inner.event-g.id_CbEvent_WAKE];a+=":"+this.zpp_inner.body.outer.toString();return a+=" : listener: "+s.string(this.zpp_inner.listener.outer)},__class__:cf});var Mb=function(){this.zpp_inner=null};i["nape.callbacks.Listener"]=Mb;Mb.__name__=["nape","callbacks","Listener"];Mb.prototype={toString:function(){var a="BEGIN,END,WAKE,SLEEP,BREAK,PRE,ONGOING".split(",")[this.zpp_inner.event];if(this.zpp_inner.type==
g.id_ListenerType_BODY)return"BodyListener{"+a+"::"+s.string(this.zpp_inner.body.outer_zn.zpp_inner_zn.options.outer)+"}";if(this.zpp_inner.type==g.id_ListenerType_CONSTRAINT)return"ConstraintListener{"+a+"::"+s.string(this.zpp_inner.constraint.outer_zn.zpp_inner_zn.options.outer)+"}";var b=this.zpp_inner.interaction,c;switch(b.itype){case g.id_InteractionType_COLLISION:c="COLLISION";break;case g.id_InteractionType_SENSOR:c="SENSOR";break;case g.id_InteractionType_FLUID:c="FLUID";break;default:c=
"ALL"}return(this.zpp_inner.type==g.id_ListenerType_INTERACTION?"InteractionListener{"+a+"#"+c+"::"+s.string(b.outer_zni.zpp_inner_zn.options1.outer)+":"+s.string(b.outer_zni.zpp_inner_zn.options2.outer)+"}":"PreListener{"+c+"::"+s.string(b.outer_znp.zpp_inner_zn.options1.outer)+":"+s.string(b.outer_znp.zpp_inner_zn.options2.outer)+"}")+" precedence="+this.zpp_inner.precedence},__class__:Mb};var fg=function(){this.zpp_inner_zn=null};i["nape.callbacks.BodyListener"]=fg;fg.__name__=["nape","callbacks",
"BodyListener"];fg.__super__=Mb;fg.prototype=z(Mb.prototype,{__class__:fg});var Na=function(){};i["nape.callbacks.CbEvent"]=Na;Na.__name__=["nape","callbacks","CbEvent"];Na.prototype={toString:function(){var a;null==g.CbEvent_PRE&&(g.internal=!0,g.CbEvent_PRE=new Na,g.internal=!1);this==g.CbEvent_PRE?a="PRE":(null==g.CbEvent_BEGIN&&(g.internal=!0,g.CbEvent_BEGIN=new Na,g.internal=!1),this==g.CbEvent_BEGIN?a="BEGIN":(null==g.CbEvent_ONGOING&&(g.internal=!0,g.CbEvent_ONGOING=new Na,g.internal=!1),this==
g.CbEvent_ONGOING?a="ONGOING":(null==g.CbEvent_END&&(g.internal=!0,g.CbEvent_END=new Na,g.internal=!1),this==g.CbEvent_END?a="END":(null==g.CbEvent_WAKE&&(g.internal=!0,g.CbEvent_WAKE=new Na,g.internal=!1),this==g.CbEvent_WAKE?a="WAKE":(null==g.CbEvent_SLEEP&&(g.internal=!0,g.CbEvent_SLEEP=new Na,g.internal=!1),this==g.CbEvent_SLEEP?a="SLEEP":(null==g.CbEvent_BREAK&&(g.internal=!0,g.CbEvent_BREAK=new Na,g.internal=!1),a=this==g.CbEvent_BREAK?"BREAK":""))))));return a},__class__:Na};var Db=function(){this.zpp_next=
null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};i["nape.callbacks.CbTypeIterator"]=Db;Db.__name__=["nape","callbacks","CbTypeIterator"];Db.get=function(a){var b;null==Db.zpp_pool?(Nb.internal=!0,b=new Db,Nb.internal=!1):(b=Db.zpp_pool,Db.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Db.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Db.zpp_pool;Db.zpp_pool=
this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Db};var wd=function(){this.zpp_inner=null;this.zpp_inner=new Nb;this.zpp_inner.outer=this};i["nape.callbacks.CbTypeList"]=wd;wd.__name__=["nape","callbacks","CbTypeList"];wd.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},
has:function(a){this.zpp_inner.valmod();return this.zpp_inner.inner.has(a.zpp_inner)},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},push:function(a){this.zpp_inner.modify_test();
this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?this.zpp_inner.inner.add(a.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},unshift:function(a){this.zpp_inner.modify_test();
this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)):this.zpp_inner.inner.add(a.zpp_inner),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},add:function(a){return this.zpp_inner.reverse_flag?
this.push(a):this.unshift(a)},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=Db.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:wd};var df=function(){this.zpp_inner=null};i["nape.callbacks.ConstraintCallback"]=df;df.__name__=["nape","callbacks","ConstraintCallback"];df.__super__=Ja;df.prototype=z(Ja.prototype,{toString:function(){var a;a="Cb:"+["WAKE","SLEEP","BREAK"][this.zpp_inner.event-
g.id_CbEvent_WAKE];a+=":"+this.zpp_inner.constraint.outer.toString();return a+=" : listener: "+s.string(this.zpp_inner.listener.outer)},__class__:df});var gg=function(){this.zpp_inner_zn=null};i["nape.callbacks.ConstraintListener"]=gg;gg.__name__=["nape","callbacks","ConstraintListener"];gg.__super__=Mb;gg.prototype=z(Mb.prototype,{__class__:gg});var ef=function(){this.zpp_inner=null};i["nape.callbacks.InteractionCallback"]=ef;ef.__name__=["nape","callbacks","InteractionCallback"];ef.__super__=Ja;
ef.prototype=z(Ja.prototype,{toString:function(){var a;a="Cb:"+"BEGIN,END,,,,,ONGOING".split(",")[this.zpp_inner.event];a+=":"+this.zpp_inner.int1.outer_i.toString()+"/"+this.zpp_inner.int2.outer_i.toString();a+=" : "+this.zpp_inner.wrap_arbiters.toString();return a+=" : listener: "+s.string(this.zpp_inner.listener.outer)},__class__:ef});var Ob=function(a,b,c,d,f,e){null==e&&(e=0);this.zpp_inner=this.zpp_inner_zn=null;var h=-1;null==g.CbEvent_BEGIN&&(g.internal=!0,g.CbEvent_BEGIN=new Na,g.internal=
!1);a==g.CbEvent_BEGIN?h=g.id_CbEvent_BEGIN:(null==g.CbEvent_END&&(g.internal=!0,g.CbEvent_END=new Na,g.internal=!1),a==g.CbEvent_END?h=g.id_CbEvent_END:(null==g.CbEvent_ONGOING&&(g.internal=!0,g.CbEvent_ONGOING=new Na,g.internal=!1),a==g.CbEvent_ONGOING&&(h=g.id_CbEvent_ONGOING)));this.zpp_inner=this.zpp_inner_zn=new Ga(ec.argument(c),ec.argument(d),h,g.id_ListenerType_INTERACTION);this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zni=this;this.zpp_inner.precedence=e;this.zpp_inner_zn.handleri=f;
this.set_interactionType(b)};i["nape.callbacks.InteractionListener"]=Ob;Ob.__name__=["nape","callbacks","InteractionListener"];Ob.__super__=Mb;Ob.prototype=z(Mb.prototype,{get_interactionType:function(){var a=this.zpp_inner_zn.itype;if(a==g.id_InteractionType_COLLISION)return null==g.InteractionType_COLLISION&&(g.internal=!0,g.InteractionType_COLLISION=new $,g.internal=!1),g.InteractionType_COLLISION;if(a==g.id_InteractionType_SENSOR)return null==g.InteractionType_SENSOR&&(g.internal=!0,g.InteractionType_SENSOR=
new $,g.internal=!1),g.InteractionType_SENSOR;if(a==g.id_InteractionType_FLUID)return null==g.InteractionType_FLUID&&(g.internal=!0,g.InteractionType_FLUID=new $,g.internal=!1),g.InteractionType_FLUID;return a==g.id_InteractionType_ANY?(null==g.InteractionType_ANY&&(g.internal=!0,g.InteractionType_ANY=new $,g.internal=!1),g.InteractionType_ANY):null},set_interactionType:function(a){if(this.get_interactionType()!=a){var b=this.zpp_inner_zn;null==g.InteractionType_COLLISION&&(g.internal=!0,g.InteractionType_COLLISION=
new $,g.internal=!1);a==g.InteractionType_COLLISION?a=g.id_InteractionType_COLLISION:(null==g.InteractionType_SENSOR&&(g.internal=!0,g.InteractionType_SENSOR=new $,g.internal=!1),a==g.InteractionType_SENSOR?a=g.id_InteractionType_SENSOR:(null==g.InteractionType_FLUID&&(g.internal=!0,g.InteractionType_FLUID=new $,g.internal=!1),a=a==g.InteractionType_FLUID?g.id_InteractionType_FLUID:g.id_InteractionType_ANY));b.itype=a}return this.get_interactionType()},__class__:Ob});var $=function(){};i["nape.callbacks.InteractionType"]=
$;$.__name__=["nape","callbacks","InteractionType"];$.prototype={toString:function(){var a;null==g.InteractionType_COLLISION&&(g.internal=!0,g.InteractionType_COLLISION=new $,g.internal=!1);this==g.InteractionType_COLLISION?a="COLLISION":(null==g.InteractionType_SENSOR&&(g.internal=!0,g.InteractionType_SENSOR=new $,g.internal=!1),this==g.InteractionType_SENSOR?a="SENSOR":(null==g.InteractionType_FLUID&&(g.internal=!0,g.InteractionType_FLUID=new $,g.internal=!1),this==g.InteractionType_FLUID?a="FLUID":
(null==g.InteractionType_ANY&&(g.internal=!0,g.InteractionType_ANY=new $,g.internal=!1),a=this==g.InteractionType_ANY?"ANY":"")));return a},__class__:$};var Pb=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};i["nape.callbacks.ListenerIterator"]=Pb;Pb.__name__=["nape","callbacks","ListenerIterator"];Pb.get=function(a){var b;null==Pb.zpp_pool?(id.internal=!0,b=new Pb,id.internal=!1):(b=Pb.zpp_pool,Pb.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;
return b};Pb.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Pb.zpp_pool;Pb.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Pb};var hg=function(){this.zpp_inner=null;this.zpp_inner=new id;this.zpp_inner.outer=this};i["nape.callbacks.ListenerList"]=hg;hg.__name__=["nape","callbacks","ListenerList"];hg.prototype=
{get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=
this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},push:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?this.zpp_inner.inner.add(a.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)),
this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},unshift:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)):
this.zpp_inner.inner.add(a.zpp_inner),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},add:function(a){return this.zpp_inner.reverse_flag?this.push(a):this.unshift(a)},remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var c=this.zpp_inner.inner.head;null!=c;){if(c.elt==a.zpp_inner){b=!0;break}c=c.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),
this.zpp_inner.invalidate());return b},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=Pb.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:hg};var fc=function(){};i["nape.callbacks.ListenerType"]=fc;fc.__name__=["nape","callbacks","ListenerType"];fc.prototype={toString:function(){var a;null==g.ListenerType_BODY&&(g.internal=!0,g.ListenerType_BODY=new fc,g.internal=!1);this==g.ListenerType_BODY?
a="BODY":(null==g.ListenerType_CONSTRAINT&&(g.internal=!0,g.ListenerType_CONSTRAINT=new fc,g.internal=!1),this==g.ListenerType_CONSTRAINT?a="CONSTRAINT":(null==g.ListenerType_INTERACTION&&(g.internal=!0,g.ListenerType_INTERACTION=new fc,g.internal=!1),this==g.ListenerType_INTERACTION?a="INTERACTION":(null==g.ListenerType_PRE&&(g.internal=!0,g.ListenerType_PRE=new fc,g.internal=!1),a=this==g.ListenerType_PRE?"PRE":"")));return a},__class__:fc};var be=function(a,b){this.zpp_inner=null;this.zpp_inner=
new ec;this.zpp_inner.outer=this;null!=a&&this.including(a);null!=b&&this.excluding(b)};i["nape.callbacks.OptionType"]=be;be.__name__=["nape","callbacks","OptionType"];be.prototype={including:function(a){this.zpp_inner.append(this.zpp_inner.includes,a);return this},excluding:function(a){this.zpp_inner.append(this.zpp_inner.excludes,a);return this},toString:function(){null==this.zpp_inner.wrap_includes&&this.zpp_inner.setup_includes();var a=this.zpp_inner.wrap_includes.toString();null==this.zpp_inner.wrap_excludes&&
this.zpp_inner.setup_excludes();return"@{"+a+" excluding "+this.zpp_inner.wrap_excludes.toString()+"}"},__class__:be};var ff=function(){this.zpp_inner=null};i["nape.callbacks.PreCallback"]=ff;ff.__name__=["nape","callbacks","PreCallback"];ff.__super__=Ja;ff.prototype=z(Ja.prototype,{toString:function(){var a;a="Cb:PRE:"+(":"+this.zpp_inner.int1.outer_i.toString()+"/"+this.zpp_inner.int2.outer_i.toString());a+=" : "+this.zpp_inner.pre_arbiter.wrapper().toString();return a+=" : listnener: "+s.string(this.zpp_inner.listener.outer)},
__class__:ff});var $a=function(){};i["nape.callbacks.PreFlag"]=$a;$a.__name__=["nape","callbacks","PreFlag"];$a.prototype={toString:function(){var a;null==g.PreFlag_ACCEPT&&(g.internal=!0,g.PreFlag_ACCEPT=new $a,g.internal=!1);this==g.PreFlag_ACCEPT?a="ACCEPT":(null==g.PreFlag_IGNORE&&(g.internal=!0,g.PreFlag_IGNORE=new $a,g.internal=!1),this==g.PreFlag_IGNORE?a="IGNORE":(null==g.PreFlag_ACCEPT_ONCE&&(g.internal=!0,g.PreFlag_ACCEPT_ONCE=new $a,g.internal=!1),this==g.PreFlag_ACCEPT_ONCE?a="ACCEPT_ONCE":
(null==g.PreFlag_IGNORE_ONCE&&(g.internal=!0,g.PreFlag_IGNORE_ONCE=new $a,g.internal=!1),a=this==g.PreFlag_IGNORE_ONCE?"IGNORE_ONCE":"")));return a},__class__:$a};var ig=function(){this.zpp_inner_zn=null};i["nape.callbacks.PreListener"]=ig;ig.__name__=["nape","callbacks","PreListener"];ig.__super__=Mb;ig.prototype=z(Mb.prototype,{__class__:ig});var Rg=function(){};i["nape.constraint.Constraint"]=Rg;Rg.__name__=["nape","constraint","Constraint"];Rg.prototype={toString:function(){return"{Constraint}"},
__class__:Rg};var Qb=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};i["nape.constraint.ConstraintIterator"]=Qb;Qb.__name__=["nape","constraint","ConstraintIterator"];Qb.get=function(a){var b;null==Qb.zpp_pool?(vc.internal=!0,b=new Qb,vc.internal=!1):(b=Qb.zpp_pool,Qb.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Qb.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;
if(this.zpp_i<a)return!0;this.zpp_next=Qb.zpp_pool;Qb.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Qb};var jg=function(){this.zpp_inner=null;this.zpp_inner=new vc;this.zpp_inner.outer=this};i["nape.constraint.ConstraintList"]=jg;jg.__name__=["nape","constraint","ConstraintList"];jg.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=
this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},remove:function(a){this.zpp_inner.modify_test();
this.zpp_inner.valmod();var b;b=!1;for(var c=this.zpp_inner.inner.head;null!=c;){if(c.elt==a.zpp_inner){b=!0;break}c=c.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=Qb.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:jg};
var Wc=function(){this.zpp_inner=null};i["nape.dynamics.Arbiter"]=Wc;Wc.__name__=["nape","dynamics","Arbiter"];Wc.prototype={get_collisionArbiter:function(){return this.zpp_inner.type==aa.COL?this.zpp_inner.colarb.outer_zn:null},get_state:function(){var a=this.zpp_inner.immState;if(a==(g.id_ImmState_ACCEPT|g.id_ImmState_ALWAYS))return null==g.PreFlag_ACCEPT&&(g.internal=!0,g.PreFlag_ACCEPT=new $a,g.internal=!1),g.PreFlag_ACCEPT;switch(a){case g.id_ImmState_ACCEPT:return null==g.PreFlag_ACCEPT_ONCE&&
(g.internal=!0,g.PreFlag_ACCEPT_ONCE=new $a,g.internal=!1),g.PreFlag_ACCEPT_ONCE;default:if(a==(g.id_ImmState_IGNORE|g.id_ImmState_ALWAYS))return null==g.PreFlag_IGNORE&&(g.internal=!0,g.PreFlag_IGNORE=new $a,g.internal=!1),g.PreFlag_IGNORE;null==g.PreFlag_IGNORE_ONCE&&(g.internal=!0,g.PreFlag_IGNORE_ONCE=new $a,g.internal=!1);return g.PreFlag_IGNORE_ONCE}},toString:function(){var a;a=this.zpp_inner.type==aa.COL?"CollisionArbiter":this.zpp_inner.type==aa.FLUID?"FluidArbiter":"SensorArbiter";return this.zpp_inner.cleared?
a+"(object-pooled)":a+"("+(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws2.outer:this.zpp_inner.ws1.outer).toString()+"|"+(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws1.outer:this.zpp_inner.ws2.outer).toString()+")"+(this.zpp_inner.type==aa.COL?"["+["SD","DD"][this.zpp_inner.colarb.stat?0:1]+"]":"")+"<-"+this.get_state().toString()},__class__:Wc};var Eb=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};i["nape.dynamics.ArbiterIterator"]=
Eb;Eb.__name__=["nape","dynamics","ArbiterIterator"];Eb.get=function(a){var b;null==Eb.zpp_pool?(Xc.internal=!0,b=new Eb,Xc.internal=!1):(b=Eb.zpp_pool,Eb.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Eb.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.zpp_gl();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Eb.zpp_pool;Eb.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},
__class__:Eb};var kg=function(){this.zpp_inner=null;this.zpp_inner=new Xc;this.zpp_inner.outer=this};i["nape.dynamics.ArbiterList"]=kg;kg.__name__=["nape","dynamics","ArbiterList"];kg.prototype={zpp_gl:function(){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1;this.zpp_inner.user_length=0;for(var a=this.zpp_inner.inner.head;null!=a;)a.elt.active&&this.zpp_inner.user_length++,a=a.next}return this.zpp_inner.user_length},zpp_vm:function(){this.zpp_inner.valmod()},at:function(a){this.zpp_vm();
this.zpp_inner.reverse_flag&&(a=this.zpp_gl()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite){this.zpp_inner.at_index=0;for(this.zpp_inner.at_ite=this.zpp_inner.inner.head;!this.zpp_inner.at_ite.elt.active;)this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}for(;this.zpp_inner.at_index!=a;){this.zpp_inner.at_index++;for(this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;!this.zpp_inner.at_ite.elt.active;)this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}return this.zpp_inner.at_ite.elt.wrapper()},
iterator:function(){this.zpp_vm();return Eb.get(this)},toString:function(){for(var a="[",b=!0,c=this.iterator();c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:kg};var ce=function(){};i["nape.dynamics.ArbiterType"]=ce;ce.__name__=["nape","dynamics","ArbiterType"];ce.prototype={toString:function(){var a;null==g.ArbiterType_COLLISION&&(g.internal=!0,g.ArbiterType_COLLISION=new ce,g.internal=!1);this==g.ArbiterType_COLLISION?
a="COLLISION":(null==g.ArbiterType_SENSOR&&(g.internal=!0,g.ArbiterType_SENSOR=new ce,g.internal=!1),this==g.ArbiterType_SENSOR?a="SENSOR":(null==g.ArbiterType_FLUID&&(g.internal=!0,g.ArbiterType_FLUID=new ce,g.internal=!1),a=this==g.ArbiterType_FLUID?"FLUID":""));return a},__class__:ce};var gf=function(){this.zpp_inner=null};i["nape.dynamics.CollisionArbiter"]=gf;gf.__name__=["nape","dynamics","CollisionArbiter"];gf.__super__=Wc;gf.prototype=z(Wc.prototype,{get_normal:function(){null==this.zpp_inner.colarb.wrap_normal&&
this.zpp_inner.colarb.getnormal();return this.zpp_inner.colarb.wrap_normal},__class__:gf});var lg=function(){this.zpp_inner=null};i["nape.dynamics.Contact"]=lg;lg.__name__=["nape","dynamics","Contact"];lg.prototype={toString:function(){return null==this.zpp_inner.arbiter||this.zpp_inner.arbiter.cleared?"{object-pooled}":"{Contact}"},__class__:lg};var Rb=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};i["nape.dynamics.ContactIterator"]=Rb;Rb.__name__=["nape","dynamics",
"ContactIterator"];Rb.get=function(a){var b;null==Rb.zpp_pool?(de.internal=!0,b=new Rb,de.internal=!1):(b=Rb.zpp_pool,Rb.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Rb.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Rb.zpp_pool;Rb.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Rb};
var Sg=function(){this.zpp_inner=null};i["nape.dynamics.ContactList"]=Sg;Sg.__name__=["nape","dynamics","ContactList"];Sg.prototype={get_length:function(){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1;this.zpp_inner.user_length=0;for(var a=this.zpp_inner.inner.next;null!=a;){var b=a;b.active&&b.arbiter.active&&this.zpp_inner.user_length++;a=a.next}}return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-
1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite){this.zpp_inner.at_index=0;for(this.zpp_inner.at_ite=this.zpp_inner.inner.next;;){var b=this.zpp_inner.at_ite;if(b.active&&b.arbiter.active)break;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}}for(;this.zpp_inner.at_index!=a;){this.zpp_inner.at_index++;for(this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;;){b=this.zpp_inner.at_ite;if(b.active&&b.arbiter.active)break;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}}return this.zpp_inner.at_ite.wrapper()},
toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=Rb.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:Sg};var hf=function(){this.zpp_inner=null};i["nape.dynamics.FluidArbiter"]=hf;hf.__name__=["nape","dynamics","FluidArbiter"];hf.__super__=Wc;hf.prototype=z(Wc.prototype,{__class__:hf});var mg=function(a,b,c,d,f,g){null==g&&(g=-1);null==f&&(f=1);null==d&&(d=-1);null==c&&(c=1);null==
b&&(b=-1);null==a&&(a=1);this.zpp_inner=null;null==Sb.zpp_pool?this.zpp_inner=new Sb:(this.zpp_inner=Sb.zpp_pool,Sb.zpp_pool=this.zpp_inner.next,this.zpp_inner.next=null);null;this.zpp_inner.outer=this;this.zpp_inner.collisionGroup!=a&&(this.zpp_inner.collisionGroup=a,this.zpp_inner.invalidate());this.zpp_inner.collisionGroup;this.zpp_inner.collisionMask!=b&&(this.zpp_inner.collisionMask=b,this.zpp_inner.invalidate());this.zpp_inner.collisionMask;this.zpp_inner.sensorGroup!=c&&(this.zpp_inner.sensorGroup=
c,this.zpp_inner.invalidate());this.zpp_inner.sensorGroup;this.zpp_inner.sensorMask!=d&&(this.zpp_inner.sensorMask=d,this.zpp_inner.invalidate());this.zpp_inner.sensorMask;this.zpp_inner.fluidGroup!=f&&(this.zpp_inner.fluidGroup=f,this.zpp_inner.invalidate());this.zpp_inner.fluidGroup;this.zpp_inner.fluidMask!=g&&(this.zpp_inner.fluidMask=g,this.zpp_inner.invalidate());this.zpp_inner.fluidMask};i["nape.dynamics.InteractionFilter"]=mg;mg.__name__=["nape","dynamics","InteractionFilter"];mg.prototype=
{__class__:mg};var Tg=function(){this.zpp_inner=null};i["nape.dynamics.InteractionGroup"]=Tg;Tg.__name__=["nape","dynamics","InteractionGroup"];Tg.prototype={toString:function(){var a="InteractionGroup";this.zpp_inner.ignore&&(a+=":ignore");return a},__class__:Tg};var wc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};i["nape.dynamics.InteractionGroupIterator"]=wc;wc.__name__=["nape","dynamics","InteractionGroupIterator"];wc.get=function(a){var b;null==wc.zpp_pool?
(xd.internal=!0,b=new wc,xd.internal=!1):(b=wc.zpp_pool,wc.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};wc.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=wc.zpp_pool;wc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:wc};var Ug=function(){this.zpp_inner=null};i["nape.dynamics.InteractionGroupList"]=
Ug;Ug.__name__=["nape","dynamics","InteractionGroupList"];Ug.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);
else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=wc.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:Ug};var ng=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.zpp_inner=null;this.zpp_inner=W.get(a,
b,a+c,b+d);this.zpp_inner.outer=this};i["nape.geom.AABB"]=ng;ng.__name__=["nape","geom","AABB"];ng.prototype={get_width:function(){this.zpp_inner.validate();return this.zpp_inner.width()},toString:function(){this.zpp_inner.validate();return this.zpp_inner.toString()},__class__:ng};var Vg=function(){this.zpp_inner=null};i["nape.geom.ConvexResult"]=Vg;Vg.__name__=["nape","geom","ConvexResult"];Vg.prototype={toString:function(){return"{ shape: "+s.string(this.zpp_inner.shape)+" toi: "+this.zpp_inner.toiDistance+
" }"},__class__:Vg};var xc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};i["nape.geom.ConvexResultIterator"]=xc;xc.__name__=["nape","geom","ConvexResultIterator"];xc.get=function(a){var b;null==xc.zpp_pool?(yd.internal=!0,b=new xc,yd.internal=!1):(b=xc.zpp_pool,xc.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};xc.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<
a)return!0;this.zpp_next=xc.zpp_pool;xc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:xc};var Wg=function(){this.zpp_inner=null};i["nape.geom.ConvexResultList"]=Wg;Wg.__name__=["nape","geom","ConvexResultList"];Wg.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},
at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=xc.get(this);c.hasNext();){var d;c.zpp_critical=!1;
d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:Wg};var og=function(){this.zpp_inner=null};i["nape.geom.GeomPoly"]=og;og.__name__=["nape","geom","GeomPoly"];og.prototype={toString:function(){var a="GeomPoly[",b=this.zpp_inner.vertices,c=this.zpp_inner.vertices;if(null!=b){do{var d=b;d!=this.zpp_inner.vertices&&(a+=",");a+="{"+d.x+","+d.y+"}";b=b.next}while(b!=c)}return a+"]"},__class__:og};var gc=function(){this.zpp_next=null;this.zpp_critical=
!1;this.zpp_i=0;this.zpp_inner=null};i["nape.geom.GeomPolyIterator"]=gc;gc.__name__=["nape","geom","GeomPolyIterator"];gc.get=function(a){var b;null==gc.zpp_pool?(ee.internal=!0,b=new gc,ee.internal=!1):(b=gc.zpp_pool,gc.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};gc.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=gc.zpp_pool;gc.zpp_pool=this;this.zpp_inner=null;
return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:gc};var Xg=function(){this.zpp_inner=null};i["nape.geom.GeomPolyList"]=Xg;Xg.__name__=["nape","geom","GeomPolyList"];Xg.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-
1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=gc.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+
"]"},__class__:Xg};var Yg=function(){this.zpp_inner=null};i["nape.geom.Mat23"]=Yg;Yg.__name__=["nape","geom","Mat23"];Yg.prototype={toString:function(){return"{ a: "+this.zpp_inner.a+" b: "+this.zpp_inner.b+" c: "+this.zpp_inner.c+" d: "+this.zpp_inner.d+" tx: "+this.zpp_inner.tx+" ty: "+this.zpp_inner.ty+" }"},__class__:Yg};var Zg=function(){this.zpp_inner=null};i["nape.geom.MatMN"]=Zg;Zg.__name__=["nape","geom","MatMN"];Zg.prototype={toString:function(){for(var a="{ ",b=!0,c=0,d=this.zpp_inner.m;c<
d;){var f=c++;b||(a+="; ");for(var b=!1,g=0,e=this.zpp_inner.n;g<e;)var h=g++,a=a+(this.zpp_inner.x[f*this.zpp_inner.n+h]+" ")}return a+"}"},__class__:Zg};var $g=function(){this.zpp_inner=null};i["nape.geom.RayResult"]=$g;$g.__name__=["nape","geom","RayResult"];$g.prototype={toString:function(){return"{ shape: "+s.string(this.zpp_inner.shape)+" distance: "+this.zpp_inner.toiDistance+" ?inner: "+s.string(this.zpp_inner.inner)+" }"},__class__:$g};var hc=function(){this.zpp_next=null;this.zpp_critical=
!1;this.zpp_i=0;this.zpp_inner=null};i["nape.geom.RayResultIterator"]=hc;hc.__name__=["nape","geom","RayResultIterator"];hc.get=function(a){var b;null==hc.zpp_pool?(Ld.internal=!0,b=new hc,Ld.internal=!1):(b=hc.zpp_pool,hc.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};hc.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=hc.zpp_pool;hc.zpp_pool=this;this.zpp_inner=
null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:hc};var ah=function(){this.zpp_inner=null};i["nape.geom.RayResultList"]=ah;ah.__name__=["nape","geom","RayResultList"];ah.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-
1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=hc.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},
__class__:ah};var T=function(a,b){null==b&&(b=0);null==a&&(a=0);this.zpp_inner=this.zpp_pool=null;this.zpp_inner=X.get(a,b,null);this.zpp_inner.outer=this};i["nape.geom.Vec2"]=T;T.__name__=["nape","geom","Vec2"];T.get=function(a,b,c){null==c&&(c=!1);null==b&&(b=0);null==a&&(a=0);var d;null==zd.poolVec2?d=new T:(d=zd.poolVec2,zd.poolVec2=d.zpp_pool,d.zpp_pool=null);if(null==d.zpp_inner)d.zpp_inner=X.get(a,b,null),d.zpp_inner.outer=d;else{var f;d.zpp_inner.validate();if(f=d.zpp_inner.x==a)d.zpp_inner.validate(),
f=d.zpp_inner.y==b;f||(d.zpp_inner.x=a,d.zpp_inner.y=b,d.zpp_inner.invalidate());d}d.zpp_inner.weak=c;return d};T.prototype={dispose:function(){var a=this.zpp_inner;this.zpp_inner=this.zpp_inner.outer=null;this.zpp_pool=zd.poolVec2;zd.poolVec2=this;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null);a._isimmutable=null;a._validate=null;a._invalidate=null;a.next=X.zpp_pool;X.zpp_pool=a},get_x:function(){this.zpp_inner.validate();return this.zpp_inner.x},set_x:function(a){this.zpp_inner.validate();
this.zpp_inner.x!=a&&(this.zpp_inner.x=a,this.zpp_inner.invalidate());this.zpp_inner.validate();return this.zpp_inner.x},get_y:function(){this.zpp_inner.validate();return this.zpp_inner.y},set_y:function(a){this.zpp_inner.validate();this.zpp_inner.y!=a&&(this.zpp_inner.y=a,this.zpp_inner.invalidate());this.zpp_inner.validate();return this.zpp_inner.y},set:function(a){var b=this.setxy(function(){a.zpp_inner.validate();return a.zpp_inner.x}(this),function(){a.zpp_inner.validate();return a.zpp_inner.y}(this));
a.zpp_inner.weak?(a.dispose(),!0):!1;return b},setxy:function(a,b){var c;this.zpp_inner.validate();if(c=this.zpp_inner.x==a)this.zpp_inner.validate(),c=this.zpp_inner.y==b;c||(this.zpp_inner.x=a,this.zpp_inner.y=b,this.zpp_inner.invalidate());return this},toString:function(){this.zpp_inner.validate();return this.zpp_inner.toString()},__class__:T};var yc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};i["nape.geom.Vec2Iterator"]=yc;yc.__name__=["nape","geom","Vec2Iterator"];
yc.get=function(a){var b;null==yc.zpp_pool?(zc.internal=!0,b=new yc,zc.internal=!1):(b=yc.zpp_pool,yc.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};yc.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.zpp_gl();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=yc.zpp_pool;yc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:yc};var Yc=function(){this.zpp_inner=
null;this.zpp_inner=new zc;this.zpp_inner.outer=this};i["nape.geom.Vec2List"]=Yc;Yc.__name__=["nape","geom","Vec2List"];Yc.prototype={zpp_gl:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},zpp_vm:function(){this.zpp_inner.valmod()},at:function(a){this.zpp_vm();this.zpp_inner.reverse_flag&&(a=this.zpp_gl()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=
a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.wrapper()},push:function(a){this.zpp_inner.modify_test();this.zpp_vm();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?this.zpp_inner.inner.add(a.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=this.empty()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-
1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},empty:function(){return 0==this.zpp_gl()},iterator:function(){this.zpp_vm();return yc.get(this)},toString:function(){for(var a="[",b=!0,c=this.iterator();c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:Yc};var bh=function(){this.zpp_inner=
null};i["nape.geom.Vec3"]=bh;bh.__name__=["nape","geom","Vec3"];bh.prototype={toString:function(){this.zpp_inner.validate();var a="{ x: "+this.zpp_inner.x+" y: ";this.zpp_inner.validate();a=a+this.zpp_inner.y+" z: ";this.zpp_inner.validate();return a+this.zpp_inner.z+" }"},__class__:bh};var fe=function(){};i["nape.geom.Winding"]=fe;fe.__name__=["nape","geom","Winding"];fe.prototype={toString:function(){var a;null==g.Winding_UNDEFINED&&(g.internal=!0,g.Winding_UNDEFINED=new fe,g.internal=!1);this==
g.Winding_UNDEFINED?a="UNDEFINED":(null==g.Winding_CLOCKWISE&&(g.internal=!0,g.Winding_CLOCKWISE=new fe,g.internal=!1),this==g.Winding_CLOCKWISE?a="CLOCKWISE":(null==g.Winding_ANTICLOCKWISE&&(g.internal=!0,g.Winding_ANTICLOCKWISE=new fe,g.internal=!1),a=this==g.Winding_ANTICLOCKWISE?"ANTICLOCKWISE":""));return a},__class__:fe};var jd=function(){this.zpp_inner_i=null};i["nape.phys.Interactor"]=jd;jd.__name__=["nape","phys","Interactor"];jd.prototype={get_userData:function(){null==this.zpp_inner_i.userData&&
(this.zpp_inner_i.userData={});return this.zpp_inner_i.userData},get_castBody:function(){return null!=this.zpp_inner_i.ibody?this.zpp_inner_i.ibody.outer:null},get_cbTypes:function(){null==this.zpp_inner_i.wrap_cbTypes&&this.zpp_inner_i.setupcbTypes();return this.zpp_inner_i.wrap_cbTypes},toString:function(){return""},__class__:jd};var ra=function(a,b){this.zpp_inner_i=this.zpp_inner=null;this.zpp_inner=new Zc;this.zpp_inner.outer=this;this.zpp_inner.outer_i=this;this.zpp_inner_i=this.zpp_inner;null!=
b?(b.zpp_inner.validate(),this.zpp_inner.posx=b.zpp_inner.x,b.zpp_inner.validate(),this.zpp_inner.posy=b.zpp_inner.y):(this.zpp_inner.posx=0,this.zpp_inner.posy=0);this.set_type(null==a?function(){null==g.BodyType_DYNAMIC&&(g.internal=!0,g.BodyType_DYNAMIC=new S,g.internal=!1);return g.BodyType_DYNAMIC}(this):a);null!=b&&(b.zpp_inner.weak?(b.dispose(),!0):!1);this.zpp_inner_i.insert_cbtype(db.ANY_BODY.zpp_inner)};i["nape.phys.Body"]=ra;ra.__name__=["nape","phys","Body"];ra.__super__=jd;ra.prototype=
z(jd.prototype,{set_type:function(a){this.zpp_inner.immutable_midstep("Body::type");Zc.types[this.zpp_inner.type]!=a&&(null==g.BodyType_DYNAMIC&&(g.internal=!0,g.BodyType_DYNAMIC=new S,g.internal=!1),a==g.BodyType_DYNAMIC?a=g.id_BodyType_DYNAMIC:(null==g.BodyType_KINEMATIC&&(g.internal=!0,g.BodyType_KINEMATIC=new S,g.internal=!1),a=a==g.BodyType_KINEMATIC?g.id_BodyType_KINEMATIC:g.id_BodyType_STATIC),a==g.id_BodyType_STATIC&&null!=this.zpp_inner.space&&(this.zpp_inner.velx=0,this.zpp_inner.vely=0,
this.zpp_inner.angvel=0),this.zpp_inner.invalidate_type(),null!=this.zpp_inner.space?this.zpp_inner.space.transmitType(this.zpp_inner,a):this.zpp_inner.type=a);return Zc.types[this.zpp_inner.type]},get_space:function(){return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},set_space:function(a){this.zpp_inner.immutable_midstep("Body::space");if((null==this.zpp_inner.space?null:this.zpp_inner.space.outer)!=a){if(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer))this.zpp_inner.component.woken=
!1;if(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer))(null==this.zpp_inner.space?null:this.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(this);null!=a&&a.zpp_inner.wrap_bodies.add(this)}return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},get_arbiters:function(){null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=Xc.get(this.zpp_inner.arbiters,!0));return this.zpp_inner.wrap_arbiters},get_position:function(){null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition();
return this.zpp_inner.wrap_pos},set_position:function(a){null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition();this.zpp_inner.wrap_pos.set(a);null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition();return this.zpp_inner.wrap_pos},get_velocity:function(){null==this.zpp_inner.wrap_vel&&this.zpp_inner.setupVelocity();return this.zpp_inner.wrap_vel},set_velocity:function(a){null==this.zpp_inner.wrap_vel&&this.zpp_inner.setupVelocity();this.zpp_inner.wrap_vel.set(a);null==this.zpp_inner.wrap_vel&&
this.zpp_inner.setupVelocity();return this.zpp_inner.wrap_vel},set_rotation:function(a){this.zpp_inner.immutable_midstep("Body::rotation");this.zpp_inner.rot!=a&&(this.zpp_inner.rot=a,this.zpp_inner.invalidate_rot(),this.zpp_inner.wake());return this.zpp_inner.rot},set_angularVel:function(a){this.zpp_inner.angvel!=a&&(this.zpp_inner.angvel=a,this.zpp_inner.wake());return this.zpp_inner.angvel},set_allowRotation:function(a){this.zpp_inner.immutable_midstep("Body::"+(null==a?"null":""+a));!this.zpp_inner.norotate!=
a&&(this.zpp_inner.norotate=!a,this.zpp_inner.invalidate_inertia());return!this.zpp_inner.norotate},applyImpulse:function(a,b,c){null==c&&(c=!1);if(c&&this.zpp_inner.component.sleeping)return a.zpp_inner.weak?(a.dispose(),!0):!1,null!=b&&(b.zpp_inner.weak?(b.dispose(),!0):!1),this;this.zpp_inner.validate_mass();var d=this.zpp_inner.imass,f=this.zpp_inner,e=this.zpp_inner.velx;a.zpp_inner.validate();f.velx=e+a.zpp_inner.x*d;f=this.zpp_inner;e=this.zpp_inner.vely;a.zpp_inner.validate();f.vely=e+a.zpp_inner.y*
d;if(null!=b){var h=0,d=0;b.zpp_inner.validate();h=b.zpp_inner.x-this.zpp_inner.posx;b.zpp_inner.validate();d=b.zpp_inner.y-this.zpp_inner.posy;this.zpp_inner.validate_inertia();f=this.zpp_inner;e=this.zpp_inner.angvel;a.zpp_inner.validate();h*=a.zpp_inner.y;a.zpp_inner.validate();f.angvel=e+(h-a.zpp_inner.x*d)*this.zpp_inner.iinertia;b.zpp_inner.weak?(b.dispose(),!0):!1}c||this.zpp_inner.type==g.id_BodyType_DYNAMIC&&this.zpp_inner.wake();a.zpp_inner.weak?(a.dispose(),!0):!1;return this},toString:function(){return(this.zpp_inner.world?
"(space::world":"("+(this.zpp_inner.type==g.id_BodyType_DYNAMIC?"dynamic":this.zpp_inner.type==g.id_BodyType_STATIC?"static":"kinematic"))+")#"+this.zpp_inner_i.id},__class__:ra});var jb=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};i["nape.phys.BodyIterator"]=jb;jb.__name__=["nape","phys","BodyIterator"];jb.get=function(a){var b;null==jb.zpp_pool?(ic.internal=!0,b=new jb,ic.internal=!1):(b=jb.zpp_pool,jb.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=
!1;return b};jb.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=jb.zpp_pool;jb.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:jb};var pg=function(){this.zpp_inner=null;this.zpp_inner=new ic;this.zpp_inner.outer=this};i["nape.phys.BodyList"]=pg;pg.__name__=["nape","phys","BodyList"];pg.prototype={get_length:function(){this.zpp_inner.valmod();
this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},
push:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?this.zpp_inner.inner.add(a.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&
this.zpp_inner.post_adder(a);return b},unshift:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)):this.zpp_inner.inner.add(a.zpp_inner),this.zpp_inner.invalidate(),
null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},add:function(a){return this.zpp_inner.reverse_flag?this.push(a):this.unshift(a)},remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var c=this.zpp_inner.inner.head;null!=c;){if(c.elt==a.zpp_inner){b=!0;break}c=c.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},iterator:function(){this.zpp_inner.valmod();
return jb.get(this)},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=jb.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},foreach:function(a){var b;this.zpp_inner.valmod();for(b=jb.get(this);b.hasNext();)try{var c=a,d;b.zpp_critical=!1;d=b.zpp_inner.at(b.zpp_i++);c(d)}catch(f){b.zpp_next=jb.zpp_pool;jb.zpp_pool=b;b.zpp_inner=null;break}return this},__class__:pg};var S=function(){};i["nape.phys.BodyType"]=
S;S.__name__=["nape","phys","BodyType"];S.prototype={toString:function(){var a;null==g.BodyType_STATIC&&(g.internal=!0,g.BodyType_STATIC=new S,g.internal=!1);this==g.BodyType_STATIC?a="STATIC":(null==g.BodyType_DYNAMIC&&(g.internal=!0,g.BodyType_DYNAMIC=new S,g.internal=!1),this==g.BodyType_DYNAMIC?a="DYNAMIC":(null==g.BodyType_KINEMATIC&&(g.internal=!0,g.BodyType_KINEMATIC=new S,g.internal=!1),a=this==g.BodyType_KINEMATIC?"KINEMATIC":""));return a},__class__:S};var qg=function(){this.zpp_inner=null};
i["nape.phys.Compound"]=qg;qg.__name__=["nape","phys","Compound"];qg.__super__=jd;qg.prototype=z(jd.prototype,{toString:function(){return"Compound"+this.zpp_inner_i.id},visitBodies:function(a){for(var b=this.zpp_inner.wrap_bodies.iterator();b.hasNext();){var c;b.zpp_critical=!1;c=b.zpp_inner.at(b.zpp_i++);a(c)}for(b=this.zpp_inner.wrap_compounds.iterator();b.hasNext();)b.zpp_critical=!1,b.zpp_inner.at(b.zpp_i++).visitBodies(a)},__class__:qg});var Tb=function(){this.zpp_next=null;this.zpp_critical=
!1;this.zpp_i=0;this.zpp_inner=null};i["nape.phys.CompoundIterator"]=Tb;Tb.__name__=["nape","phys","CompoundIterator"];Tb.get=function(a){var b;null==Tb.zpp_pool?(kd.internal=!0,b=new Tb,kd.internal=!1):(b=Tb.zpp_pool,Tb.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Tb.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Tb.zpp_pool;Tb.zpp_pool=this;this.zpp_inner=null;
return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Tb};var rg=function(){this.zpp_inner=null;this.zpp_inner=new kd;this.zpp_inner.outer=this};i["nape.phys.CompoundList"]=rg;rg.__name__=["nape","phys","CompoundList"];rg.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();
this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var c=this.zpp_inner.inner.head;null!=c;){if(c.elt==a.zpp_inner){b=
!0;break}c=c.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},iterator:function(){this.zpp_inner.valmod();return Tb.get(this)},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=Tb.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:rg};var ch=function(){this.zpp_inner=
null};i["nape.phys.FluidProperties"]=ch;ch.__name__=["nape","phys","FluidProperties"];ch.prototype={toString:function(){return"{ density: "+1E3*this.zpp_inner.density+" viscosity: "+this.zpp_inner.viscosity+" gravity: "+s.string(this.zpp_inner.wrap_gravity)+" }"},__class__:ch};var Ad=function(){};i["nape.phys.GravMassMode"]=Ad;Ad.__name__=["nape","phys","GravMassMode"];Ad.prototype={toString:function(){var a;null==g.GravMassMode_DEFAULT&&(g.internal=!0,g.GravMassMode_DEFAULT=new Ad,g.internal=!1);
this==g.GravMassMode_DEFAULT?a="DEFAULT":(null==g.GravMassMode_FIXED&&(g.internal=!0,g.GravMassMode_FIXED=new Ad,g.internal=!1),this==g.GravMassMode_FIXED?a="FIXED":(null==g.GravMassMode_SCALED&&(g.internal=!0,g.GravMassMode_SCALED=new Ad,g.internal=!1),a=this==g.GravMassMode_SCALED?"SCALED":""));return a},__class__:Ad};var jf=function(){};i["nape.phys.InertiaMode"]=jf;jf.__name__=["nape","phys","InertiaMode"];jf.prototype={toString:function(){var a;null==g.InertiaMode_DEFAULT&&(g.internal=!0,g.InertiaMode_DEFAULT=
new jf,g.internal=!1);this==g.InertiaMode_DEFAULT?a="DEFAULT":(null==g.InertiaMode_FIXED&&(g.internal=!0,g.InertiaMode_FIXED=new jf,g.internal=!1),a=this==g.InertiaMode_FIXED?"FIXED":"");return a},__class__:jf};var Ub=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};i["nape.phys.InteractorIterator"]=Ub;Ub.__name__=["nape","phys","InteractorIterator"];Ub.get=function(a){var b;null==Ub.zpp_pool?(Md.internal=!0,b=new Ub,Md.internal=!1):(b=Ub.zpp_pool,Ub.zpp_pool=b.zpp_next);
b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Ub.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Ub.zpp_pool;Ub.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Ub};var dh=function(){this.zpp_inner=null};i["nape.phys.InteractorList"]=dh;dh.__name__=["nape","phys","InteractorList"];dh.prototype={get_length:function(){this.zpp_inner.valmod();
this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer_i},
toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=Ub.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:dh};var kf=function(){};i["nape.phys.MassMode"]=kf;kf.__name__=["nape","phys","MassMode"];kf.prototype={toString:function(){var a;null==g.MassMode_DEFAULT&&(g.internal=!0,g.MassMode_DEFAULT=new kf,g.internal=!1);this==g.MassMode_DEFAULT?a="DEFAULT":(null==g.MassMode_FIXED&&(g.internal=
!0,g.MassMode_FIXED=new kf,g.internal=!1),a=this==g.MassMode_FIXED?"FIXED":"");return a},__class__:kf};var sa=function(a,b,c,d,f){null==f&&(f=0.001);null==d&&(d=1);null==c&&(c=2);null==b&&(b=1);null==a&&(a=0);this.zpp_inner=null;null==O.zpp_pool?this.zpp_inner=new O:(this.zpp_inner=O.zpp_pool,O.zpp_pool=this.zpp_inner.next,this.zpp_inner.next=null);null;this.zpp_inner.outer=this;a!=this.zpp_inner.elasticity&&(this.zpp_inner.elasticity=a/1,this.zpp_inner.invalidate(O.WAKE|O.ARBITERS));this.zpp_inner.elasticity;
b!=this.zpp_inner.dynamicFriction&&(this.zpp_inner.dynamicFriction=b/1,this.zpp_inner.invalidate(O.WAKE|O.ANGDRAG|O.ARBITERS));this.zpp_inner.dynamicFriction;c!=this.zpp_inner.staticFriction&&(this.zpp_inner.staticFriction=c/1,this.zpp_inner.invalidate(O.WAKE|O.ARBITERS));this.zpp_inner.staticFriction;d!=1E3*this.zpp_inner.density&&(this.zpp_inner.density=d/1E3,this.zpp_inner.invalidate(O.WAKE|O.PROPS));1E3*this.zpp_inner.density;f!=this.zpp_inner.rollingFriction&&(this.zpp_inner.rollingFriction=
f/1,this.zpp_inner.invalidate(O.WAKE|O.ARBITERS));this.zpp_inner.rollingFriction};i["nape.phys.Material"]=sa;sa.__name__=["nape","phys","Material"];sa.wood=function(){return new sa(0.4,0.2,0.38,0.7,0.005)};sa.steel=function(){return new sa(0.2,0.57,0.74,7.8,0.001)};sa.ice=function(){return new sa(0.3,0.03,0.1,0.9,1.0E-4)};sa.prototype={toString:function(){return"{ elasticity: "+this.zpp_inner.elasticity+" dynamicFriction: "+this.zpp_inner.dynamicFriction+" staticFriction: "+this.zpp_inner.staticFriction+
" density: "+1E3*this.zpp_inner.density+" rollingFriction: "+this.zpp_inner.rollingFriction+" }"},__class__:sa};var $c=function(){this.zpp_inner_i=this.zpp_inner=null};i["nape.shape.Shape"]=$c;$c.__name__=["nape","shape","Shape"];$c.__super__=jd;$c.prototype=z(jd.prototype,{toString:function(){return(this.zpp_inner.type==g.id_ShapeType_CIRCLE?"Circle":"Polygon")+"#"+this.zpp_inner_i.id},__class__:$c});var sg=function(){this.zpp_inner=null};i["nape.shape.Edge"]=sg;sg.__name__=["nape","shape","Edge"];
sg.prototype={toString:function(){if(null==this.zpp_inner.polygon)return"Edge(object-pooled)";if(null==this.zpp_inner.polygon.body)return this.zpp_inner.polygon.validate_laxi(),"{ localNormal : "+("{ x: "+this.zpp_inner.lnormx+" y: "+this.zpp_inner.lnormy+" }")+" }";this.zpp_inner.polygon.validate_gaxi();return"{ localNormal : "+("{ x: "+this.zpp_inner.lnormx+" y: "+this.zpp_inner.lnormy+" }")+" worldNormal : "+("{ x: "+this.zpp_inner.gnormx+" y: "+this.zpp_inner.gnormy+" }")+" }"},__class__:sg};
var eb=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};i["nape.shape.EdgeIterator"]=eb;eb.__name__=["nape","shape","EdgeIterator"];eb.get=function(a){var b;null==eb.zpp_pool?(Nd.internal=!0,b=new eb,Nd.internal=!1):(b=eb.zpp_pool,eb.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};eb.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=
eb.zpp_pool;eb.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:eb};var eh=function(){this.zpp_inner=null};i["nape.shape.EdgeList"]=eh;eh.__name__=["nape","shape","EdgeList"];eh.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();
this.zpp_inner.reverse_flag&&a!=this.get_length()-1&&(a=this.get_length()-2-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.wrapper()},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=eb.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);
b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:eh};var ba=function(a,b,c){this.zpp_inner_zn=null;$c.call(this);this.zpp_inner_zn=new lf;this.zpp_inner_zn.outer=this;this.zpp_inner_zn.outer_zn=this;this.zpp_inner_i=this.zpp_inner=this.zpp_inner_zn;this.zpp_inner_i.outer_i=this;if(a instanceof Array&&null==a.__enum__)for(var d=0;d<a.length;){var f=a[d];++d;var g=f;null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts();this.zpp_inner_zn.wrap_lverts.push(T.get(function(){g.zpp_inner.validate();
return g.zpp_inner.x}(this),function(){g.zpp_inner.validate();return g.zpp_inner.y}(this),!1))}else if(U.__instanceof(a,Yc))for(d=a.iterator();d.hasNext();){var e;d.zpp_critical=!1;e=d.zpp_inner.at(d.zpp_i++);null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts();this.zpp_inner_zn.wrap_lverts.push(T.get(function(){e.zpp_inner.validate();return e.zpp_inner.x}(this),function(){e.zpp_inner.validate();return e.zpp_inner.y}(this),!1))}else if(U.__instanceof(a,og)&&(d=a.zpp_inner.vertices,null!=
d)){f=d;do{var h=T.get(f.x,f.y,null),f=f.next;null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts();this.zpp_inner_zn.wrap_lverts.push(T.get(function(){h.zpp_inner.validate();return h.zpp_inner.x}(this),function(){h.zpp_inner.validate();return h.zpp_inner.y}(this),!1));h.dispose()}while(f!=d)}if(a instanceof Array&&null==a.__enum__)for(d=0;d<a.length;){var f=a[d],n;if(n=f.zpp_inner.weak)f.dispose(),n=!0;n?a.splice(d,1):d++}else if(U.__instanceof(a,Yc)){null!=a.zpp_inner._validate&&a.zpp_inner._validate();
a=a.zpp_inner.inner;d=null;for(f=a.head;null!=f;)n=f.elt,n.outer.zpp_inner.weak?(f=a.erase(d),n.outer.zpp_inner.weak?(n.outer.dispose(),!0):!1):(d=f,f=f.next)}null==b?(null==O.zpp_pool?this.zpp_inner.material=new O:(this.zpp_inner.material=O.zpp_pool,O.zpp_pool=this.zpp_inner.material.next,this.zpp_inner.material.next=null),null):(this.zpp_inner.immutable_midstep("Shape::material"),this.zpp_inner.setMaterial(b.zpp_inner),this.zpp_inner.material.wrapper());null==c?(null==Sb.zpp_pool?this.zpp_inner.filter=
new Sb:(this.zpp_inner.filter=Sb.zpp_pool,Sb.zpp_pool=this.zpp_inner.filter.next,this.zpp_inner.filter.next=null),null):(this.zpp_inner.immutable_midstep("Shape::filter"),this.zpp_inner.setFilter(c.zpp_inner),this.zpp_inner.filter.wrapper());this.zpp_inner_i.insert_cbtype(db.ANY_SHAPE.zpp_inner)};i["nape.shape.Polygon"]=ba;ba.__name__=["nape","shape","Polygon"];ba.rect=function(a,b,c,d,f){null==f&&(f=!1);return[T.get(a,b,f),T.get(a+c,b,f),T.get(a+c,b+d,f),T.get(a,b+d,f)]};ba.box=function(a,b,c){null==
c&&(c=!1);return ba.rect(-a/2,-b/2,a,b,c)};ba.__super__=$c;ba.prototype=z($c.prototype,{__class__:ba});var La=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};i["nape.shape.ShapeIterator"]=La;La.__name__=["nape","shape","ShapeIterator"];La.get=function(a){var b;null==La.zpp_pool?(Ac.internal=!0,b=new La,Ac.internal=!1):(b=La.zpp_pool,La.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};La.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();
var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=La.zpp_pool;La.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:La};var tg=function(){this.zpp_inner=null;this.zpp_inner=new Ac;this.zpp_inner.outer=this};i["nape.shape.ShapeList"]=tg;tg.__name__=["nape","shape","ShapeList"];tg.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=
!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},push:function(a){this.zpp_inner.modify_test();
this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?this.zpp_inner.inner.add(a.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},unshift:function(a){this.zpp_inner.modify_test();
this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)):this.zpp_inner.inner.add(a.zpp_inner),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},add:function(a){return this.zpp_inner.reverse_flag?
this.push(a):this.unshift(a)},remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var c=this.zpp_inner.inner.head;null!=c;){if(c.elt==a.zpp_inner){b=!0;break}c=c.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=La.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);
b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:tg};var mf=function(){};i["nape.shape.ShapeType"]=mf;mf.__name__=["nape","shape","ShapeType"];mf.prototype={toString:function(){var a;null==g.ShapeType_CIRCLE&&(g.internal=!0,g.ShapeType_CIRCLE=new mf,g.internal=!1);this==g.ShapeType_CIRCLE?a="CIRCLE":(null==g.ShapeType_POLYGON&&(g.internal=!0,g.ShapeType_POLYGON=new mf,g.internal=!1),a=this==g.ShapeType_POLYGON?"POLYGON":"");return a},__class__:mf};var Bc=function(){};i["nape.shape.ValidationResult"]=
Bc;Bc.__name__=["nape","shape","ValidationResult"];Bc.prototype={toString:function(){var a;null==g.ValidationResult_VALID&&(g.internal=!0,g.ValidationResult_VALID=new Bc,g.internal=!1);this==g.ValidationResult_VALID?a="VALID":(null==g.ValidationResult_DEGENERATE&&(g.internal=!0,g.ValidationResult_DEGENERATE=new Bc,g.internal=!1),this==g.ValidationResult_DEGENERATE?a="DEGENERATE":(null==g.ValidationResult_CONCAVE&&(g.internal=!0,g.ValidationResult_CONCAVE=new Bc,g.internal=!1),this==g.ValidationResult_CONCAVE?
a="CONCAVE":(null==g.ValidationResult_SELF_INTERSECTING&&(g.internal=!0,g.ValidationResult_SELF_INTERSECTING=new Bc,g.internal=!1),a=this==g.ValidationResult_SELF_INTERSECTING?"SELF_INTERSECTING":"")));return a},__class__:Bc};var Od=function(){};i["nape.space.Broadphase"]=Od;Od.__name__=["nape","space","Broadphase"];Od.prototype={toString:function(){var a;null==g.Broadphase_DYNAMIC_AABB_TREE&&(g.internal=!0,g.Broadphase_DYNAMIC_AABB_TREE=new Od,g.internal=!1);this==g.Broadphase_DYNAMIC_AABB_TREE?
a="DYNAMIC_AABB_TREE":(null==g.Broadphase_SWEEP_AND_PRUNE&&(g.internal=!0,g.Broadphase_SWEEP_AND_PRUNE=new Od,g.internal=!1),a=this==g.Broadphase_SWEEP_AND_PRUNE?"SWEEP_AND_PRUNE":"");return a},__class__:Od};var vg=function(a,b){this.zpp_inner=null;this.zpp_inner=new ug(null==a?null:a.zpp_inner,b);this.zpp_inner.outer=this;null!=a&&(a.zpp_inner.weak?(a.dispose(),!0):!1)};i["nape.space.Space"]=vg;vg.__name__=["nape","space","Space"];vg.prototype={set_gravity:function(a){null==this.zpp_inner.wrap_gravity&&
this.zpp_inner.getgravity();this.zpp_inner.wrap_gravity.set(a);null==this.zpp_inner.wrap_gravity&&this.zpp_inner.getgravity();return this.zpp_inner.wrap_gravity},visitBodies:function(a){for(var b=this.zpp_inner.wrap_bodies.iterator();b.hasNext();){var c;b.zpp_critical=!1;c=b.zpp_inner.at(b.zpp_i++);a(c)}for(b=this.zpp_inner.wrap_compounds.iterator();b.hasNext();)b.zpp_critical=!1,b.zpp_inner.at(b.zpp_i++).visitBodies(a)},step:function(a,b,c){null==c&&(c=10);null==b&&(b=10);this.zpp_inner.step(a,b,
c)},__class__:vg};var jc=function(a,b,c,d){null==b&&(b=!1);this.updateInterval=0;this._destroyed=!1;u.call(this);this._body=a;b&&(this._fixedPosX=this._body.get_position().get_x());this.isFixedPosX=b;this._spaceManager=c;this._name=d;this._animationObject=null};i["nape_util.NDiBody"]=jc;jc.__name__=["nape_util","NDiBody"];jc.__super__=u;jc.prototype=z(u.prototype,{get_name:function(){return"NDiBody_13"},onUpdate:function(){if(null!=this._body)if(null==this._body.get_space())"GolfCartLessard"==this._body.get_userData().name&&
q.GOLF_CART++,"GiantBurrito"==this._body.get_userData().name&&q.GIANT_BURRITO++,this.remove();else{var a=this._body.get_position(),b=this._body.zpp_inner.aabb.wrapper().get_width();a.zpp_inner.validate();a.zpp_inner.x+b<-0.1*e.GAME_WIDTH?(this._body.get_cbTypes().has(e.coinCollisionType)||this._body.set_space(null),e.LOAD_TYPE==e.LOAD_ALL&&this._body.get_cbTypes().has(e.rebootEnviromentTriggerType)&&this._spaceManager.rebootEnviroment(),e.LOAD_TYPE==e.LOAD_BY_ROOM&&this._body.get_cbTypes().has(e.roomTriggerType)&&
this._spaceManager.nextRoom()):(a.zpp_inner.validate(),a.zpp_inner.y>e.GAME_HEIGHT?this._body.set_space(null):(null==this._sprite&&(this._sprite=this.owner._compMap.Sprite_24),null!=this._sprite&&(this._sprite.x.set__(function(){a.zpp_inner.validate();return a.zpp_inner.x}(this)),this._sprite.y.set__(function(){a.zpp_inner.validate();return a.zpp_inner.y}(this)),this._sprite.rotation.set__(180*this._body.zpp_inner.rot/3.141592653589793),this._sprite.setAlpha(1)),null!=this._animation&&(this._animation.transform.x.set__(function(){a.zpp_inner.validate();
return a.zpp_inner.x}(this)),this._animation.transform.y.set__(function(){a.zpp_inner.validate();return a.zpp_inner.y}(this)),this._animation.transform.rotation.set__(180*this._body.zpp_inner.rot/3.141592653589793),this._animation.transform.alpha.set__(1)),null!=this._animationObject&&(this._animationObject.transform.x.set__(function(){a.zpp_inner.validate();return a.zpp_inner.x}(this)),this._animationObject.transform.y.set__(function(){a.zpp_inner.validate();return a.zpp_inner.y}(this)),this._animationObject.transform.rotation.set__(180*
this._body.zpp_inner.rot/3.141592653589793),this._animationObject.transform.alpha.set__(1))))}},remove:function(){this._destroyed||(this._destroyed=!0,this.owner.disposeChildren(),this.owner.dispose())},getBody:function(){return this._body},setAnimation:function(a){this._animationObject=a},__class__:jc});var $e=function(){this.timeTmp=this.timeAbsTmp=0;this.CollisionObjectTmpName="";this.isPaused=!1;u.call(this);e.floorCollisionType=new fa;e.wallCollisionType=new fa;e.hazardCollisionType=new fa;e.coinCollisionType=
new fa;e.coinBagCollisionType=new fa;e.playerCollisionType=new fa;e.ringCollisionType=new fa;e.rebootEnviromentTriggerType=new fa;e.bounceCollisionType=new fa;this._space=new vg(new T(0,1800));var a;null==g.CbEvent_BEGIN&&(g.internal=!0,g.CbEvent_BEGIN=new Na,g.internal=!1);a=g.CbEvent_BEGIN;null==g.InteractionType_COLLISION&&(g.internal=!0,g.InteractionType_COLLISION=new $,g.internal=!1);this.playerBoxListener=new Ob(a,g.InteractionType_COLLISION,e.playerCollisionType,e.wallCollisionType,E(this,
this.playerBoxCollision));this._space.zpp_inner.wrap_listeners.add(this.playerBoxListener);a=new wd;a.add(e.hazardCollisionType);a.add(e.hazardFastCollisionType);a.add(e.hazardJumpCollisionType);var b;null==g.CbEvent_BEGIN&&(g.internal=!0,g.CbEvent_BEGIN=new Na,g.internal=!1);b=g.CbEvent_BEGIN;null==g.InteractionType_COLLISION&&(g.internal=!0,g.InteractionType_COLLISION=new $,g.internal=!1);this.playerHazardListener=new Ob(b,g.InteractionType_COLLISION,e.playerCollisionType,a,E(this,this.playerHazardCollision));
this._space.zpp_inner.wrap_listeners.add(this.playerHazardListener);null==g.CbEvent_BEGIN&&(g.internal=!0,g.CbEvent_BEGIN=new Na,g.internal=!1);a=g.CbEvent_BEGIN;null==g.InteractionType_SENSOR&&(g.internal=!0,g.InteractionType_SENSOR=new $,g.internal=!1);this.playerCoinListener=new Ob(a,g.InteractionType_SENSOR,e.playerCollisionType,e.coinCollisionType,E(this,this.playerCoinCollision));this._space.zpp_inner.wrap_listeners.add(this.playerCoinListener);null==g.CbEvent_BEGIN&&(g.internal=!0,g.CbEvent_BEGIN=
new Na,g.internal=!1);a=g.CbEvent_BEGIN;null==g.InteractionType_SENSOR&&(g.internal=!0,g.InteractionType_SENSOR=new $,g.internal=!1);this.playerCoinBagListener=new Ob(a,g.InteractionType_SENSOR,e.playerCollisionType,e.coinBagCollisionType,E(this,this.playerCoinBagCollision));this._space.zpp_inner.wrap_listeners.add(this.playerCoinBagListener);null==g.CbEvent_BEGIN&&(g.internal=!0,g.CbEvent_BEGIN=new Na,g.internal=!1);a=g.CbEvent_BEGIN;null==g.InteractionType_SENSOR&&(g.internal=!0,g.InteractionType_SENSOR=
new $,g.internal=!1);this.playerRingListener=new Ob(a,g.InteractionType_SENSOR,e.playerCollisionType,e.ringCollisionType,E(this,this.playerRingCollision));this._space.zpp_inner.wrap_listeners.add(this.playerRingListener);null==g.CbEvent_BEGIN&&(g.internal=!0,g.CbEvent_BEGIN=new Na,g.internal=!1);a=g.CbEvent_BEGIN;null==g.InteractionType_COLLISION&&(g.internal=!0,g.InteractionType_COLLISION=new $,g.internal=!1);this.playerBounceListener=new Ob(a,g.InteractionType_COLLISION,e.playerCollisionType,e.bounceCollisionType,
E(this,this.playerBounceCollision));this._space.zpp_inner.wrap_listeners.add(this.playerBounceListener);a=new wd;a.add(e.floorCollisionType);a.add(e.wallCollisionType);null==g.CbEvent_BEGIN&&(g.internal=!0,g.CbEvent_BEGIN=new Na,g.internal=!1);b=g.CbEvent_BEGIN;null==g.InteractionType_COLLISION&&(g.internal=!0,g.InteractionType_COLLISION=new $,g.internal=!1);this.playerFloorListener=new Ob(b,g.InteractionType_COLLISION,e.playerCollisionType,a,E(this,this.playerFloorCollision));this._space.zpp_inner.wrap_listeners.add(this.playerFloorListener)};
i["nape_util.NDiSpace"]=$e;$e.__name__=["nape_util","NDiSpace"];$e.__super__=u;$e.prototype=z(u.prototype,{get_name:function(){return"NDiSpace_12"},onUpdate:function(a){a>e.MAX_TIME_PER_FRAME&&(a=e.MAX_TIME_PER_FRAME);0.009<=this.timeAbsTmp-this.timeTmp&&(this.isPaused||this._space.step(a),this.timeTmp=this.timeAbsTmp);this.timeAbsTmp+=a},addBody:function(a,b,c){null==b&&(b=!1);a.set_space(this._space);null==a.zpp_inner_i.userData&&(a.zpp_inner_i.userData={});a.zpp_inner_i.userData.name=c;a=new jc(a,
b,this,c);a.name=c;return(new p).add(a)},addPlayerBody:function(a){a.set_space(this._space);return(new p).add(new Cc(a,!0,this))},addBox:function(a,b){var c=ra;null==g.BodyType_KINEMATIC&&(g.internal=!0,g.BodyType_KINEMATIC=new S,g.internal=!1);c=new c(g.BodyType_KINEMATIC);c.zpp_inner.wrap_shapes.add(new ba(ba.box(68,50),sa.ice()));c.set_position(new T(a,b));null==c.zpp_inner_i.wrap_cbTypes&&c.zpp_inner_i.setupcbTypes();c.zpp_inner_i.wrap_cbTypes.add(e.hazardCollisionType);null==c.zpp_inner_i.userData&&
(c.zpp_inner_i.userData={});c.zpp_inner_i.userData.name="Box";var c=this.addBody(c,!1,"Box"),d=ra;null==g.BodyType_KINEMATIC&&(g.internal=!0,g.BodyType_KINEMATIC=new S,g.internal=!1);d=new d(g.BodyType_KINEMATIC);d.zpp_inner.wrap_shapes.add(new ba(ba.box(60,64),sa.ice()));d.set_position(new T(a,b));null==d.zpp_inner_i.wrap_cbTypes&&d.zpp_inner_i.setupcbTypes();d.zpp_inner_i.wrap_cbTypes.add(e.wallCollisionType);null==d.zpp_inner_i.userData&&(d.zpp_inner_i.userData={});d.zpp_inner_i.userData.name=
"Box";d=this.addBody(d,!1,"Box");c.addChild(d);d=new za(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/IG_Blue_gas_tanks"));d.setAnchor(0,125);d.setAlpha(0);d.setScale(0.6);c.add(d);return c},addBox2:function(a,b){var c=ra;null==g.BodyType_KINEMATIC&&(g.internal=!0,g.BodyType_KINEMATIC=new S,g.internal=!1);c=new c(g.BodyType_KINEMATIC);c.zpp_inner.wrap_shapes.add(new ba(ba.box(155.72,114.5),sa.ice()));c.set_position(new T(a,b));null==c.zpp_inner_i.wrap_cbTypes&&c.zpp_inner_i.setupcbTypes();c.zpp_inner_i.wrap_cbTypes.add(e.hazardCollisionType);
null==c.zpp_inner_i.userData&&(c.zpp_inner_i.userData={});c.zpp_inner_i.userData.name="Box2";var c=this.addBody(c,!1,"Box2"),d=ra;null==g.BodyType_KINEMATIC&&(g.internal=!0,g.BodyType_KINEMATIC=new S,g.internal=!1);d=new d(g.BodyType_KINEMATIC);d.zpp_inner.wrap_shapes.add(new ba(ba.box(153.43,146.56),sa.ice()));d.set_position(new T(a,b));null==d.zpp_inner_i.wrap_cbTypes&&d.zpp_inner_i.setupcbTypes();d.zpp_inner_i.wrap_cbTypes.add(e.wallCollisionType);null==d.zpp_inner_i.userData&&(d.zpp_inner_i.userData=
{});d.zpp_inner_i.userData.name="Box2";d=this.addBody(d,!1,"Box2");c.addChild(d);d=new za(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/IG_Blue_gas_tanks"));d.setAnchor(0,125);d.setAlpha(0);d.setScale(0.6);c.add(d);return c},addBox3:function(a,b){var c=ra;null==g.BodyType_KINEMATIC&&(g.internal=!0,g.BodyType_KINEMATIC=new S,g.internal=!1);c=new c(g.BodyType_KINEMATIC);c.zpp_inner.wrap_shapes.add(new ba(ba.box(160.3,114.5),sa.ice()));c.set_position(new T(a,b));null==c.zpp_inner_i.wrap_cbTypes&&
c.zpp_inner_i.setupcbTypes();c.zpp_inner_i.wrap_cbTypes.add(e.hazardCollisionType);null==c.zpp_inner_i.userData&&(c.zpp_inner_i.userData={});c.zpp_inner_i.userData.name="Box3";var c=this.addBody(c,!1,"Box3"),d=ra;null==g.BodyType_KINEMATIC&&(g.internal=!0,g.BodyType_KINEMATIC=new S,g.internal=!1);d=new d(g.BodyType_KINEMATIC);d.zpp_inner.wrap_shapes.add(new ba(ba.box(137.4,146.56),sa.ice()));d.set_position(new T(a,b));null==d.zpp_inner_i.wrap_cbTypes&&d.zpp_inner_i.setupcbTypes();d.zpp_inner_i.wrap_cbTypes.add(e.wallCollisionType);
null==d.zpp_inner_i.userData&&(d.zpp_inner_i.userData={});d.zpp_inner_i.userData.name="Box3";d=this.addBody(d,!1,"Box3");c.addChild(d);d=new za(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/IG_Blue_gas_tanks"));d.setAnchor(0,125);d.setAlpha(0);d.setScale(0.6);c.add(d);return c},addSpikeBox:function(a,b){var c=ra;null==g.BodyType_KINEMATIC&&(g.internal=!0,g.BodyType_KINEMATIC=new S,g.internal=!1);c=new c(g.BodyType_KINEMATIC);c.zpp_inner.wrap_shapes.add(new ba(ba.box(40,40),sa.ice()));c.set_position(new T(a,
b));null==c.zpp_inner_i.wrap_cbTypes&&c.zpp_inner_i.setupcbTypes();c.zpp_inner_i.wrap_cbTypes.add(e.hazardCollisionType);var c=this.addBody(c),d=new za(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/IG_Blue_gas_tanks"));d.setAnchor(0,125);d.setAlpha(0);d.setScale(0.6);c.add(d);return c},addBodyWithAnimation:function(a,b,c,d,f){null==f&&(f=0);null==c&&(c=!1);a.set_space(this._space);null==a.zpp_inner_i.userData&&(a.zpp_inner_i.userData={});a.zpp_inner_i.userData.name=d;a=new jc(a,c,this,d);a.updateInterval=
f;a.setAnimation(b);a.name=d;return(new p).add(a)},addCoin:function(a,b){var c=ra;null==g.BodyType_KINEMATIC&&(g.internal=!0,g.BodyType_KINEMATIC=new S,g.internal=!1);var c=new c(g.BodyType_KINEMATIC),d=new ba(ba.box(40,40),sa.ice());d.zpp_inner.immutable_midstep("Shape::sensorEnabled");d.zpp_inner.sensorEnabled=!0;d.zpp_inner.wake();d.zpp_inner.sensorEnabled;c.zpp_inner.wrap_shapes.add(d);c.set_position(new T(a,b));null==c.zpp_inner_i.wrap_cbTypes&&c.zpp_inner_i.setupcbTypes();c.zpp_inner_i.wrap_cbTypes.add(e.coinCollisionType);
d=m.loadSetAnimations(e.ASSET_PACKAGE_GENERAL,"animations/powerUps/GadgetCoin");d=new ja(d,"IG_Falling_SingleCoin");d.transform.centerAnchor();d.transform.setScaleXY(1,1);d.transform.alpha.set__(0);d.animationIdle(!0,0,"");c=this.addBodyWithAnimation(c,d,!1,"Coin");c.add(d);return c},addTransition:function(){var a=new p,b=m.loadSetAnimations(e.ASSET_PACKAGE_GENERAL,"animations/transition/Gadget"),b=new ja(b,"Transition_Anim");b.animationIdle(!0,0,"");b.transform.disablePointer();b.transform.centerAnchor();
b.transform.setXY(250,50);b.transform.setScaleXY(1,1);a.addChild((new p).add(b));a.add(new nf(1.75));return a},addCoinBag:function(a,b){var c=ra;null==g.BodyType_KINEMATIC&&(g.internal=!0,g.BodyType_KINEMATIC=new S,g.internal=!1);var c=new c(g.BodyType_KINEMATIC),d=new ba(ba.box(40,40),sa.ice());d.zpp_inner.immutable_midstep("Shape::sensorEnabled");d.zpp_inner.sensorEnabled=!0;d.zpp_inner.wake();d.zpp_inner.sensorEnabled;c.zpp_inner.wrap_shapes.add(d);c.set_position(new T(a,b));null==c.zpp_inner_i.wrap_cbTypes&&
c.zpp_inner_i.setupcbTypes();c.zpp_inner_i.wrap_cbTypes.add(e.coinBagCollisionType);d=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/IG_Coin_Bag"));d.transform.centerAnchor();d.transform.setScaleXY(1,1);d.transform.alpha.set__(0);c=this.addBody(c);c.add(d);return c},addRing:function(a,b){var c=ra;null==g.BodyType_KINEMATIC&&(g.internal=!0,g.BodyType_KINEMATIC=new S,g.internal=!1);var c=new c(g.BodyType_KINEMATIC),d=new ba(ba.box(40,40),sa.ice());d.zpp_inner.immutable_midstep("Shape::sensorEnabled");
d.zpp_inner.sensorEnabled=!0;d.zpp_inner.wake();d.zpp_inner.sensorEnabled;c.zpp_inner.wrap_shapes.add(d);c.set_position(new T(a,b));null==c.zpp_inner_i.wrap_cbTypes&&c.zpp_inner_i.setupcbTypes();c.zpp_inner_i.wrap_cbTypes.add(e.ringCollisionType);d=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/HUD/IG_Gear_coin"));d.transform.centerAnchor();d.transform.setScaleXY(2,2);d.transform.alpha.set__(0);c=this.addBody(c);c.add(d);return c},addRebootTrigger:function(a,b){var c=ra;null==g.BodyType_STATIC&&
(g.internal=!0,g.BodyType_STATIC=new S,g.internal=!1);c=new c(g.BodyType_STATIC);c.zpp_inner.wrap_shapes.add(new ba(ba.box(1,1),sa.ice()));c.set_position(new T(a,b));null==c.zpp_inner_i.wrap_cbTypes&&c.zpp_inner_i.setupcbTypes();c.zpp_inner_i.wrap_cbTypes.add(e.rebootEnviromentTriggerType);return this.addBody(c,!1,"RebootTrigger")},addRoomTrigger:function(a,b){var c=ra;null==g.BodyType_STATIC&&(g.internal=!0,g.BodyType_STATIC=new S,g.internal=!1);c=new c(g.BodyType_STATIC);c.zpp_inner.wrap_shapes.add(new ba(ba.box(1,
1),sa.ice()));c.set_position(new T(a,b));null==c.zpp_inner_i.wrap_cbTypes&&c.zpp_inner_i.setupcbTypes();c.zpp_inner_i.wrap_cbTypes.add(e.roomTriggerType);return this.addBody(c)},addRunningEnemy:function(a){var b=200*a._scale,c=200*a._scale,d=m.loadSetAnimations(e.ASSET_PACKAGE_GENERAL,"animations/Enemies/Gadget"),d=new ja(d,"VillainTiny");d.transform.centerAnchor();d.transform.setScaleXY(-1*a._scale,a._scale);d.transform.setAnchor(d.transform.anchorX._value,-0.15*a._y);d.transform.alpha.set__(0);
d.animationIdle(!0,0,"_Run");var f=this.addBodyWithAnimation(this.addShellBody(a._x,a._y,0.5*c,0.5*b,e.hazardFastCollisionType),d,!1,"bully");f.addChild(this.addBody(this.addbounceBody(a._x,a._y,0.9*c,0.9*b,e.bounceCollisionType),!1,"bully"));f.add(d);return f},addTwisterEnemy:function(a){var b=300*a._scale,c=200*a._scale,d=m.loadSetAnimations(e.ASSET_PACKAGE_GENERAL,"animations/Enemies/Gadget"),d=new ja(d,"Robot");d.transform.centerAnchor();d.transform.setScaleXY(a._scale,a._scale);d.transform.setAnchor(d.transform.anchorX._value,
0.3*a._y);d.transform.alpha.set__(0);d.animationIdle(!0,0,"_Run");var f=this.addBodyWithAnimation(this.addShellBody(a._x,a._y,0.1*c,0.1*b,e.hazardFastCollisionType),d,!1,"Twister");f.addChild(this.addBody(this.addShellBody(a._x-0.02*a._x,a._y,0.5*c,0.5*b,e.hazardFastCollisionType),!1,"Twister"));f.addChild(this.addBody(this.addbounceBody(a._x-0.01*a._x,a._y,0.9*c,0.9*b,e.bounceCollisionType),!1,"Twister"));f.add(d);return f},addTeddyBearEnemy:function(a){var b=250*a._scale,c=200*a._scale,d=m.loadSetAnimations(e.ASSET_PACKAGE_GENERAL,
"animations/Enemies/Gadget"),d=new ja(d,"VillainMed");d.transform.centerAnchor();d.transform.setScaleXY(-1*a._scale,a._scale);d.transform.setAnchor(d.transform.anchorX._value,0*a._y);d.transform.alpha.set__(0);d.animationIdle(!0,0,"_Run");var f=this.addBodyWithAnimation(this.addShellBody(a._x,a._y,0.5*c,0.5*b,e.hazardFastCollisionType),d,!1,"TeddyBear");f.addChild(this.addBody(this.addbounceBody(a._x,a._y,0.9*c,0.9*b,e.bounceCollisionType),!1,"TeddyBear"));f.add(d);return f},addBearEnemy:function(a){var b=
300*a._scale,c=200*a._scale,d=m.loadSetAnimations(e.ASSET_PACKAGE_GENERAL,"animations/Enemies/Gadget"),d=new ja(d,"Robot");d.transform.centerAnchor();d.transform.setScaleXY(a._scale,a._scale);d.transform.setAnchor(d.transform.anchorX._value,0.3*a._y);d.transform.alpha.set__(0);d.animationIdle(!0,0,"_Run");var f=this.addBodyWithAnimation(this.addShellBody(a._x,a._y,0.1*c,0.1*b,e.hazardFastCollisionType),d,!1,"Bear");f.addChild(this.addBody(this.addShellBody(a._x-0.02*a._x,a._y,0.5*c,0.5*b,e.hazardFastCollisionType),
!1,"Bear"));f.addChild(this.addBody(this.addbounceBody(a._x-0.01*a._x,a._y,0.9*c,0.9*b,e.bounceCollisionType),!1,"Bear"));f.add(d);return f},addGiantBurritoEnemy:function(a){var b=300*a._scale,c=200*a._scale,d=m.loadSetAnimations(e.ASSET_PACKAGE_GENERAL,"animations/Enemies/Gadget"),d=new ja(d,"VillainWrestler");d.transform.centerAnchor();d.transform.setScaleXY(-1*a._scale,a._scale);d.transform.setAnchor(d.transform.anchorX._value,-0.05*a._y);d.transform.alpha.set__(0);d.animationIdle(!0,0,"_Run");
var f=this.addBodyWithAnimation(this.addShellBody(a._x,a._y,0.5*c,0.5*b,e.hazardFastCollisionType),d,!1,"GiantBurrito");f.addChild(this.addBody(this.addbounceBody(a._x,a._y,c,b,e.bounceCollisionType),!1,"GiantBurrito"));f.add(d);return f},addBabyChickEnemy:function(a){var b=350*a._scale,c=300*a._scale,d=m.loadSetAnimations(e.ASSET_PACKAGE_GENERAL,"animations/Enemies/Gadget"),d=new ja(d,"RobotVacuumPurple");d.transform.centerAnchor();d.transform.setScaleXY(a._scale,a._scale);d.transform.setAnchor(d.transform.anchorX._value,
-0.2*a._y);d.transform.alpha.set__(0);d.animationIdle(!0,0,"_Run");var f=this.addBodyWithAnimation(this.addShellBody(a._x,a._y,0.9*c,0.5*b,e.hazardCollisionType),d,!1,"BabyChick");f.addChild(this.addBody(this.addbounceBody(a._x,a._y,1.25*c,b,e.wallCollisionType),!1,"BabyChick"));f.add(d);return f},addBurgerWalkEnemy:function(a){var b=300*a._scale,c=200*a._scale,d=m.loadSetAnimations(e.ASSET_PACKAGE_GENERAL,"animations/Enemies/Gadget"),d=new ja(d,"VillainLarge");d.transform.centerAnchor();d.transform.setScaleXY(-1*
a._scale,a._scale);d.transform.setAnchor(d.transform.anchorX._value,0.1*a._y);d.transform.alpha.set__(0);d.animationIdle(!0,0,"_Run");var f=this.addBodyWithAnimation(this.addShellBody(a._x,a._y,0.5*c,0.5*b,e.hazardFastCollisionType),d,!1,"BurgerWalk");f.addChild(this.addBody(this.addbounceBody(a._x,a._y,c,b,e.bounceCollisionType),!1,"BurgerWalk"));f.add(d);return f},addGolfCartLessardEnemy:function(a){var b=200*a._scale,c=300*a._scale,d=m.loadSetAnimations(e.ASSET_PACKAGE_GENERAL,"animations/Enemies/Gadget"),
d=new ja(d,"RobotFlying");d.transform.centerAnchor();d.transform.setScaleXY(-1*a._scale,a._scale);d.transform.setAnchor(d.transform.anchorX._value,0.1*a._y);d.transform.alpha.set__(0);d.animationIdle(!0,0,"_Run");var f=this.addBodyWithAnimation(this.addbounceBody(a._x,a._y+5,0.8*c,b,e.bounceCollisionType),d,!1,"GolfCartLessard");f.addChild(this.addBody(this.addbounceBody(a._x+150,a._y+5,c,b,e.bounceCollisionType),!1,"GolfCartLessard"));f.addChild(this.addBody(this.addShellBody(a._x,a._y,0.5*c,0.5*
b,e.hazardFastCollisionType),!1,"GolfCartLessard"));f.add(d);return f},addHotDogWalkEnemy:function(a){var b=200*a._scale,c=250*a._scale,d=m.loadSetAnimations(e.ASSET_PACKAGE_GENERAL,"animations/Enemies/Gadget"),d=new ja(d,"VillainMedRed");d.transform.centerAnchor();d.transform.setScaleXY(-1*a._scale,a._scale);d.transform.setAnchor(d.transform.anchorX._value,0*a._y);d.transform.alpha.set__(0);d.animationIdle(!0,0,"_Run");var f=this.addBodyWithAnimation(this.addShellBody(a._x,a._y,0.5*c,0.5*b,e.hazardFastCollisionType),
d,!1,"HotDogWalk");f.addChild(this.addBody(this.addbounceBody(a._x,a._y,0.9*c,0.9*b,e.bounceCollisionType),!1,"HotDogWalk"));f.add(d);return f},addJesseRunEnemy:function(a){var b=350*a._scale,c=300*a._scale,d=m.loadSetAnimations(e.ASSET_PACKAGE_GENERAL,"animations/Enemies/Gadget"),d=new ja(d,"RobotVacuumGold");d.transform.centerAnchor();d.transform.setScaleXY(a._scale,a._scale);d.transform.setAnchor(d.transform.anchorX._value,-0.2*a._y);d.transform.alpha.set__(0);d.animationIdle(!0,0,"_Run");var f=
this.addBodyWithAnimation(this.addShellBody(a._x,a._y,0.9*c,0.5*b,e.hazardCollisionType),d,!1,"Boy12Days");f.addChild(this.addBody(this.addbounceBody(a._x,a._y,1.25*c,b,e.wallCollisionType),!1,"Boy12Days"));f.add(d);return f},addMotorcycleTacoEnemy:function(a){var b=300*a._scale,c=200*a._scale,d=m.loadSetAnimations(e.ASSET_PACKAGE_GENERAL,"animations/Enemies/Gadget"),d=new ja(d,"VillainLargeRed");d.transform.centerAnchor();d.transform.setScaleXY(-1*a._scale,a._scale);d.transform.setAnchor(d.transform.anchorX._value,
0.1*a._y);d.transform.alpha.set__(0);d.animationIdle(!0,0,"_Run");var f=this.addBodyWithAnimation(this.addShellBody(a._x,a._y,0.5*c,0.5*b,e.hazardFastCollisionType),d,!1,"MotorcycleTaco");f.addChild(this.addBody(this.addbounceBody(a._x,a._y,c,b,e.bounceCollisionType),!1,"MotorcycleTaco"));f.add(d);return f},addRadioactiveTank2:function(a){var b=214*a._scale,c=342*a._scale,d=this.addBody(this.addShellBody(a._x,a._y,0.9*c,0.8*b,e.hazardCollisionType),!1,"RadioactiveTank");d.addChild(this.addBody(this.addbounceBody(a._x,
a._y,0.8*c,0.8*b,e.wallCollisionType),!1,"RadioactiveTank"));b=new za(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/IG_Bio_hazard_Bins"));b.centerAnchor();b.setScaleXY(a._scale,a._scale);b.setScale(0.6);d.add(b);return d},addFirstPlayer:function(a,b){var c=new ra,d=new sa,d=sa.wood();0!=d.zpp_inner.elasticity&&(d.zpp_inner.elasticity=0,d.zpp_inner.invalidate(O.WAKE|O.ARBITERS));d.zpp_inner.elasticity;0!=d.zpp_inner.dynamicFriction&&(d.zpp_inner.dynamicFriction=0,d.zpp_inner.invalidate(O.WAKE|
O.ANGDRAG|O.ARBITERS));d.zpp_inner.dynamicFriction;c.zpp_inner.wrap_shapes.add(new ba(ba.box(64,129),sa.steel()));c.set_position(new T(a,b));null==c.zpp_inner_i.wrap_cbTypes&&c.zpp_inner_i.setupcbTypes();c.zpp_inner_i.wrap_cbTypes.add(e.playerCollisionType);c.zpp_inner.immutable_midstep("Body::false");!1!=!c.zpp_inner.norotate&&(c.zpp_inner.norotate=!0,c.zpp_inner.invalidate_inertia());!c.zpp_inner.norotate;this.playerBody=c;c=this.addPlayerBody(c);c.add(new Ia);this.player=s.instance(c._compMap.NDiBody_13,
Cc);this.player.initPlayer(e.PLAYER_ONE);return c},addSecondPlayer:function(a,b){var c=new ra,d=new sa,d=sa.wood();0!=d.zpp_inner.elasticity&&(d.zpp_inner.elasticity=0,d.zpp_inner.invalidate(O.WAKE|O.ARBITERS));d.zpp_inner.elasticity;0!=d.zpp_inner.dynamicFriction&&(d.zpp_inner.dynamicFriction=0,d.zpp_inner.invalidate(O.WAKE|O.ANGDRAG|O.ARBITERS));d.zpp_inner.dynamicFriction;c.zpp_inner.wrap_shapes.add(new ba(ba.box(64,128),sa.steel()));c.set_position(new T(a,b));null==c.zpp_inner_i.wrap_cbTypes&&
c.zpp_inner_i.setupcbTypes();c.zpp_inner_i.wrap_cbTypes.add(e.playerCollisionType);c.zpp_inner.immutable_midstep("Body::false");!1!=!c.zpp_inner.norotate&&(c.zpp_inner.norotate=!0,c.zpp_inner.invalidate_inertia());!c.zpp_inner.norotate;this.playerBody=c;c=this.addPlayerBody(c);c.add(new Ia);this.player=s.instance(c._compMap.NDiBody_13,Cc);this.player.initPlayer(e.PLAYER_TWO);return c},setPause:function(a){this.isPaused=a},onAdded:function(){u.prototype.onAdded.call(this);this.owner.add(new Ia)},playerBoxCollision:function(a){this.getParent();
this.CollisionObjectTmpName=a.zpp_inner.int2.outer_i.get_castBody().get_userData().name;if(e.PLAYER_INVULNERABLE)try{1==a.zpp_inner.int2.outer_i.get_castBody().get_arbiters().at(0).get_collisionArbiter().get_normal().get_x()&&(H.getInstance().playSoundEffect(e.ARRAY_SOUNDS_FX_MUSIC.get("SFX_HIT_BREAK"),1),a.zpp_inner.int2.outer_i.get_castBody().set_space(null),this.removeObject())}catch(b){null}},playerHazardCollision:function(a){var b=this.getParent();this.CollisionObjectTmpName=a.zpp_inner.int2.outer_i.get_castBody().get_userData().name;
if(e.PLAYER_INVULNERABLE)H.getInstance().playSoundEffect(e.ARRAY_SOUNDS_FX_MUSIC.get("SFX_HIT_BREAK"),1),this.removeObject(),a.zpp_inner.int2.outer_i.get_castBody().set_space(null);else if(null!=b)if(b.coins>=e.EXTRA_LIFE_COINS_AMMOUNT)b.showExtraLifePopup();else b.onPlayerDeath()},playerBounceCollision:function(a){this.CollisionObjectTmpName=a.zpp_inner.int2.outer_i.get_castBody().get_userData().name;if(e.PLAYER_INVULNERABLE)try{1==a.zpp_inner.int2.outer_i.get_castBody().get_arbiters().at(0).get_collisionArbiter().get_normal().get_x()&&
(H.getInstance().playSoundEffect(e.ARRAY_SOUNDS_FX_MUSIC.get("SFX_HIT_BREAK"),1),a.zpp_inner.int2.outer_i.get_castBody().set_space(null))}catch(b){null}else if(a=this.getParent(),null!=a)a.onBounce()},playerRingCollision:function(a){a.zpp_inner.int2.outer_i.get_castBody().set_space(null);a=this.getParent();if(null!=a)a.onPickingRing()},playerCoinCollision:function(a){a.zpp_inner.int2.outer_i.get_castBody().get_position().set_x(-50);a=this.getParent();if(null!=a)a.onPickingCoin()},playerCoinBagCollision:function(a){a.zpp_inner.int2.outer_i.get_castBody().set_space(null);
a=this.getParent();if(null!=a)a.onPickingCoinBag()},rebootEnviroment:function(){var a=this.getParent();null!=a&&a.rebootEnviroment()},nextRoom:function(){var a=this.getParent();null!=a&&a.nextRoom()},playerFloorCollision:function(){var a=this.getParent();if(null!=a)a.onTouchingFloor()},getParent:function(){return s.instance(this.owner.parent._compMap.Scene_0,Ib)},addShellBody:function(a,b,c,d,f){var e=ra;null==g.BodyType_KINEMATIC&&(g.internal=!0,g.BodyType_KINEMATIC=new S,g.internal=!1);e=new e(g.BodyType_KINEMATIC);
e.zpp_inner.wrap_shapes.add(new ba(ba.box(c,d),sa.ice()));e.set_position(new T(a,b));null==e.zpp_inner_i.wrap_cbTypes&&e.zpp_inner_i.setupcbTypes();e.zpp_inner_i.wrap_cbTypes.add(f);return e},addbounceBody:function(a,b,c,d,f){var e=ra;null==g.BodyType_KINEMATIC&&(g.internal=!0,g.BodyType_KINEMATIC=new S,g.internal=!1);e=new e(g.BodyType_KINEMATIC);e.zpp_inner.wrap_shapes.add(new ba(ba.box(c,d),sa.ice()));e.set_position(new T(a,b-5));null!=f&&(null==e.zpp_inner_i.wrap_cbTypes&&e.zpp_inner_i.setupcbTypes(),
e.zpp_inner_i.wrap_cbTypes.add(f));return e},removeObject:function(){this.getParent();this._space.visitBodies(E(this,this.removeBody));this.getParent().space.player.addInvHitAnimation()},removeBody:function(a){null==a.zpp_inner_i.userData&&(a.zpp_inner_i.userData={});a.zpp_inner_i.userData.name==this.CollisionObjectTmpName&&null!=this.CollisionObjectTmpName&&(null==a.zpp_inner.wrap_pos&&a.zpp_inner.setupPosition(),a.zpp_inner.wrap_pos.set_x(-1E3))},__class__:$e});var uc=function(a,b){this.dificultyLevel=
1;this.coinIndex=this.Box2Index=0;this.flagSwapBackground_A=this.flagSwapBackground_B=this.flagTransitionEffect=this.flagDoorMoving=!1;this.nameSwapBackground_A=this.nameSwapBackground_B="";u.call(this);ia.theInit();this.isPaused=!1;this.enviromentSpeed=e.runnerSpeed;this._space=a;this.enviromentEntity=new p;this.backgroundEntity=new p;this.frontgroundEntity=b;this.currentZoneName="School's Hallway";this.createParallaxZone(this.currentZoneName);var c=new ea;c.set("School's Hallway",(new ia).initZoneA());
c.set("School's Labs",(new ia).initZoneB());c.set("School's Cafeteria",(new ia).initZoneC());c.set("School's Courts",(new ia).initZoneD());this.arrayZones=c;this.Box2Index=this.coinIndex=0;e.arrayCoins=[];e.arrayBox2=[];this.addCoinsObjects()};i["runner.NDiEnviromentManager"]=uc;uc.__name__=["runner","NDiEnviromentManager"];uc.__super__=u;uc.prototype=z(u.prototype,{get_name:function(){return"NDiEnviromentManager_16"},onAdded:function(){this.addParallaxZone();this.owner.addChild(this.enviromentEntity);
this.enviromentEntity.add(new Ia);e.LOAD_TYPE==e.LOAD_ALL&&this.createAllSections();e.LOAD_TYPE==e.LOAD_BY_ROOM&&this.createNextSection();u.prototype.onAdded.call(this)},createParallaxZone:function(a){switch(a){case "School's Hallway":this.backgroundParallax_A=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/BGs/IG_HQ_Hallway_960x540"));this.backgroundParallax_B=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/BGs/IG_HQ_Hallway_960x540"));this.transitionBack=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,
"images/Gadget/BGs/IG_Doorway_UL_1"));this.transitionFront=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/BGs/IG_Doorway_OL_1"));break;case "School's Labs":this.backgroundParallax_A=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/BGs/IG_Building_INT_960x540"));this.backgroundParallax_B=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/BGs/IG_Building_INT_960x540"));this.transitionBack=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/BGs/IG_Doorway_UL_1"));this.transitionFront=
new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/BGs/IG_Doorway_OL_1"));break;case "School's Cafeteria":this.backgroundParallax_A=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/BGs/IG_City_Street_Paris_960x540"));this.backgroundParallax_B=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/BGs/IG_City_Street_Paris_960x540"));this.transitionBack=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/BGs/IG_Doorway_UL_1"));this.transitionFront=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,
"images/Gadget/BGs/IG_Doorway_OL_1"));break;case "School's Courts":this.backgroundParallax_A=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/BGs/IG_MAD_Hallway_960x540")),this.backgroundParallax_B=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/BGs/IG_MAD_Hallway_960x540")),this.transitionBack=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/BGs/IG_Doorway_UL_1")),this.transitionFront=new J(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/BGs/IG_Doorway_OL_1"))}this.transitionBack.transform.alpha.set__(0);
this.transitionFront.transform.alpha.set__(0)},switchParallaxZone_A:function(a){switch(a){case "School's Hallway":this.backgroundParallax_A.setTexture(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/BGs/IG_HQ_Hallway_960x540"));break;case "School's Labs":this.backgroundParallax_A.setTexture(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/BGs/IG_Building_INT_960x540"));break;case "School's Cafeteria":this.backgroundParallax_A.setTexture(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/BGs/IG_City_Street_Paris_960x540"));
break;case "School's Courts":this.backgroundParallax_A.setTexture(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/BGs/IG_MAD_Hallway_960x540"))}},switchParallaxZone_B:function(a){switch(a){case "School's Hallway":this.backgroundParallax_B.setTexture(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/BGs/IG_HQ_Hallway_960x540"));break;case "School's Labs":this.backgroundParallax_B.setTexture(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/BGs/IG_Building_INT_960x540"));break;case "School's Cafeteria":this.backgroundParallax_B.setTexture(m.loadImage(e.ASSET_PACKAGE_GENERAL,
"images/Gadget/BGs/IG_City_Street_Paris_960x540"));break;case "School's Courts":this.backgroundParallax_B.setTexture(m.loadImage(e.ASSET_PACKAGE_GENERAL,"images/Gadget/BGs/IG_MAD_Hallway_960x540"))}},addParallaxZone:function(){this.backgroundParallax_A.setXY(0.5*e.GAME_WIDTH,0.5*e.GAME_HEIGHT);this.backgroundParallax_B.setXY(1.5*e.GAME_WIDTH,0.5*e.GAME_HEIGHT);this.backgroundEntity.addChild((new p).add(this.backgroundParallax_A));this.backgroundEntity.addChild((new p).add(this.backgroundParallax_B));
this.transitionBack.transform.setAnchor(40,0);this.transitionBack.transform.y.set__(e.GAME_HEIGHT/2);this.backgroundEntity.addChild((new p).add(this.transitionBack));this.frontgroundEntity.addChild((new p).add(this.transitionFront));this.transitionFront.transform.setAnchor(40,0);this.transitionFront.transform.y.set__(e.GAME_HEIGHT/2)},addrecordWall:function(){var a=m.loadSetAnimations(e.ASSET_PACKAGE_GENERAL,"animations/powerUps");this.recordWall=new ja(a,"LOOPED_RecordBarrier");this.recordWall.transform.x.set__(e.GAME_WIDTH+
0.4*e.GAME_WIDTH);this.recordWall.transform.y.set__(0.5*e.GAME_HEIGHT);this.frontgroundEntity.addChild((new p).add(this.recordWall));this.recordWall.animationIdle(!0,0,"")},addrecordWallAnimation:function(){var a=this,b=m.loadSetAnimations(e.ASSET_PACKAGE_GENERAL,"animations/powerUps");this.recordWallAnimation=new ja(b,"LOOPED_RecordBreak");this.recordWallAnimation.transform.x.set__(this.recordWall.transform.x._value);this.recordWallAnimation.transform.y.set__(0.5*e.GAME_HEIGHT);this.frontgroundEntity.addChild((new p).add(this.recordWallAnimation));
this.owner._compMap.Script_25.run(new va([new qa(5-5*(this.enviromentSpeed/1E3)),new V(function(){H.getInstance().playSoundEffect(e.ARRAY_SOUNDS_FX_MUSIC.get("SFX_RECORDBREAK"),1);a.recordWallAnimation.animationIdle(!1,3-3*(a.enviromentSpeed/1E3),"")}),new qa(4-4*(this.enviromentSpeed/1E3)),new V(function(){try{a.recordWallAnimation.dispose()}catch(b){null}})]))},onUpdate:function(a){a>e.MAX_TIME_PER_FRAME&&(a=e.MAX_TIME_PER_FRAME);this.isPaused||(this.moveBackground(a),this.moveEnviroment(a))},moveEnviroment:function(a){var b=
this;null!=this._space._space&&this._space._space.zpp_inner.wrap_bodies.foreach(function(c){null==c.zpp_inner_i.userData&&(c.zpp_inner_i.userData={});if("wall"!=c.zpp_inner_i.userData.name){var f;null==c.zpp_inner_i.wrap_cbTypes&&c.zpp_inner_i.setupcbTypes();if(!(f=c.zpp_inner_i.wrap_cbTypes.has(e.hazardFastCollisionType)))null==c.zpp_inner_i.wrap_cbTypes&&c.zpp_inner_i.setupcbTypes(),f=c.zpp_inner_i.wrap_cbTypes.has(e.bounceCollisionType);if(f){var g;null==c.zpp_inner.wrap_pos&&c.zpp_inner.setupPosition();
g=c.zpp_inner.wrap_pos;g.set_x(function(){g.zpp_inner.validate();return g.zpp_inner.x}(this)-a*1.3*b.enviromentSpeed*uc.STOP)}else{null==c.zpp_inner_i.wrap_cbTypes&&c.zpp_inner_i.setupcbTypes();if(f=!c.zpp_inner_i.wrap_cbTypes.has(e.playerCollisionType))null==c.zpp_inner_i.wrap_cbTypes&&c.zpp_inner_i.setupcbTypes(),f=!c.zpp_inner_i.wrap_cbTypes.has(e.floorCollisionType);if(f){var h;null==c.zpp_inner.wrap_pos&&c.zpp_inner.setupPosition();h=c.zpp_inner.wrap_pos;h.set_x(function(){h.zpp_inner.validate();
return h.zpp_inner.x}(this)-a*b.enviromentSpeed*uc.STOP)}}}});if(null!=this.recordWall){var c=this.recordWall.transform.x;c.set__(c._value-a*this.enviromentSpeed)}null!=this.recordWallAnimation&&(c=this.recordWallAnimation.transform.x,c.set__(c._value-a*this.enviromentSpeed))},moveBackground:function(a){var b=a*this.enviromentSpeed,c=this.backgroundParallax_A.transform.x;c.set__(c._value-b);c=this.backgroundParallax_B.transform.x;c.set__(c._value-b);this.backgroundParallax_A.transform.x._value<this.backgroundParallax_B.transform.x._value?
this.backgroundParallax_A.transform.x.set__(this.backgroundParallax_B.transform.x._value-this.backgroundParallax_B.image.getNaturalWidth()):this.backgroundParallax_B.transform.x.set__(this.backgroundParallax_A.transform.x._value-this.backgroundParallax_A.image.getNaturalWidth());-100<this.transitionFront.transform.x._value&&(b=this.transitionFront.transform.x,b.set__(b._value-a*this.enviromentSpeed),b=this.transitionBack.transform.x,b.set__(b._value-a*this.enviromentSpeed));this.backgroundParallax_A.transform.x._value<
0.5*-e.GAME_WIDTH&&(this.backgroundParallax_A.transform.x.set__(this.backgroundParallax_B.transform.x._value+this.backgroundParallax_B.image.getNaturalWidth()),this.flagSwapBackground_A&&(this.flagSwapBackground_A=!1,this.switchParallaxZone_A(this.nameSwapBackground_A),this.flagDoorMoving&&(this.flagDoorMoving=!1,this.addMovingWall(a,e.GAME_WIDTH))));this.backgroundParallax_B.transform.x._value<0.5*-e.GAME_WIDTH&&(this.backgroundParallax_B.transform.x.set__(this.backgroundParallax_A.transform.x._value+
this.backgroundParallax_A.image.getNaturalWidth()),this.flagSwapBackground_B&&(this.flagSwapBackground_B=!1,this.switchParallaxZone_B(this.nameSwapBackground_B),this.flagDoorMoving&&(this.flagDoorMoving=!1,this.addMovingWall(a,e.GAME_WIDTH)),this.flagTransitionEffect&&this.dayChangeTransition()))},dayChangeTransition:function(){var a=this;this.frontgroundEntity.addChild(this._space.addTransition());e.runnerSpeedIncrement+=e.SPEED_DAY_INCREASE;this.enviromentSpeed=e.runnerSpeed*e.runnerSpeedIncrement;
this.dificultyLevel++;3<this.dificultyLevel&&(this.dificultyLevel=1);var b=new ea;b.set("School's Hallway",(new ia).shake(this.currentZoneName,this.dificultyLevel));b.set("School's Labs",(new ia).shake(this.currentZoneName,this.dificultyLevel));b.set("School's Cafeteria",(new ia).shake(this.currentZoneName,this.dificultyLevel));b.set("School's Courts",(new ia).shake(this.currentZoneName,this.dificultyLevel));this.arrayZones=b;this.flagTransitionEffect=!1;this.owner._compMap.Script_25.run(new va([new qa(0.1),
new V(function(){uc.STOP=0;a._space.player.invincibleExtraLife(!1)}),new qa(0.8),new V(function(){uc.STOP=1})]))},nextCurrentZone:function(a){e.ZONE_TIMES.exists(a)&&this.currentZoneName!=e.ZONE_TIMES.get(a)&&(this.nameSwapBackground_B=this.nameSwapBackground_A=this.currentZoneName=e.ZONE_TIMES.get(a),this.flagSwapBackground_B=this.flagSwapBackground_A=!0,this.arrayZones.get(this.currentZoneName).currentRoom=0,this.flagDoorMoving=!0)},setPause:function(a){this.isPaused=a},getParent:function(){return this.runnerScene},
createAllSections:function(){},createNextSection:function(){this.createRoom(this.arrayZones.get(this.currentZoneName).getNextRoom())},addMovingWall:function(a,b){this.transitionBack.transform.alpha.set__(1);this.transitionFront.transform.alpha.set__(1);this.transitionFront.transform.x.set__(b-a*this.enviromentSpeed-0.69*this.transitionFront.transform.x._value);this.transitionBack.transform.x.set__(b-a*this.enviromentSpeed);this.getParent().changeNameRoom();this.owner._compMap.Script_25.run(new va([new qa(1),
new V(function(){})]))},hideWall:function(){this.transitionBack.transform.alpha.set__(1);this.transitionFront.transform.alpha.set__(1)},createRoom:function(a){for(var b=0,c=a.arrayObjects.length;b<c;){var d=b++;this.addObject(a.arrayObjects[d])}},addCoinsObjects:function(){if(0==e.arrayCoins.length)for(var a=0;20>a;){var b=a++;e.arrayCoins.push(this._space.addCoin(-40,0));this.enviromentEntity.addChild(e.arrayCoins[b])}},getCoinObject:function(a){var b=new Rc(e.GAME_WIDTH,0);a._x=b.x+e.GAME_WIDTH*
a._horizontalPercent;a._y=b.y+e.GAME_HEIGHT*a._verticalPercent;e.arrayCoins.length-1==this.coinIndex&&(this.coinIndex=0);b=e.arrayCoins[this.coinIndex];b._compMap.NDiBody_13._body.get_position().set_x(a._x);b._compMap.NDiBody_13._body.get_position().set_y(a._y);this.coinIndex++;return b},addObject:function(a){var b=new Rc(e.GAME_WIDTH,0);a._x=b.x+e.GAME_WIDTH*a._horizontalPercent;a._y=b.y+e.GAME_HEIGHT*a._verticalPercent;switch(a._objectType[1]){case 5:this.enviromentEntity.addChild(this._space.addBox(b.x+
e.GAME_WIDTH*a._horizontalPercent,b.y+e.GAME_HEIGHT*a._verticalPercent));break;case 6:this.enviromentEntity.addChild(this._space.addBox2(b.x+e.GAME_WIDTH*a._horizontalPercent,b.y+e.GAME_HEIGHT*a._verticalPercent));break;case 7:this.enviromentEntity.addChild(this._space.addBox3(b.x+e.GAME_WIDTH*a._horizontalPercent,b.y+e.GAME_HEIGHT*a._verticalPercent));break;case 0:this.getCoinObject(a);break;case 1:this.enviromentEntity.addChild(this._space.addCoinBag(b.x+e.GAME_WIDTH*a._horizontalPercent,b.y+e.GAME_HEIGHT*
a._verticalPercent));break;case 8:this.enviromentEntity.addChild(this._space.addRoomTrigger(b.x+e.GAME_WIDTH*a._horizontalPercent,b.y+e.GAME_HEIGHT*a._verticalPercent));break;case 9:this.enviromentEntity.addChild(this._space.addRebootTrigger(b.x+e.GAME_WIDTH*a._horizontalPercent,b.y+e.GAME_HEIGHT*a._verticalPercent));break;case 2:this.enviromentEntity.addChild(this._space.addRing(b.x+e.GAME_WIDTH*a._horizontalPercent,b.y+e.GAME_HEIGHT*a._verticalPercent));break;case 3:this.enviromentEntity.addChild(this._space.addRunningEnemy(a));
break;case 4:this.enviromentEntity.addChild(this._space.addSpikeBox(b.x+e.GAME_WIDTH*a._horizontalPercent,b.y+e.GAME_HEIGHT*a._verticalPercent));break;case 12:this.enviromentEntity.addChild(this._space.addTwisterEnemy(a));break;case 10:this.enviromentEntity.addChild(this._space.addTeddyBearEnemy(a));break;case 11:this.enviromentEntity.addChild(this._space.addBearEnemy(a));break;case 13:this.enviromentEntity.addChild(this._space.addBabyChickEnemy(a));break;case 14:this.enviromentEntity.addChild(this._space.addMotorcycleTacoEnemy(a));
break;case 15:this.enviromentEntity.addChild(this._space.addHotDogWalkEnemy(a));break;case 16:this.enviromentEntity.addChild(this._space.addBurgerWalkEnemy(a));break;case 17:this.enviromentEntity.addChild(this._space.addGolfCartLessardEnemy(a));break;case 18:this.enviromentEntity.addChild(this._space.addGiantBurritoEnemy(a));break;case 19:this.enviromentEntity.addChild(this._space.addJesseRunEnemy(a));break;case 20:this.enviromentEntity.addChild(this._space.addRadioactiveTank2(a));break;case 21:this.enviromentEntity.addChild(this._space.addRadioactiveTank2(a));
break;case 22:this.enviromentEntity.addChild(this._space.addRadioactiveTank2(a));break;case 23:this.enviromentEntity.addChild(this._space.addRadioactiveTank2(a));break;case 24:this.enviromentEntity.addChild(this._space.addRadioactiveTank2(a));break;case 25:this.enviromentEntity.addChild(this._space.addBabyChickEnemy(a))}},__class__:uc});var wg=function(){};i["runner.NDiGhostAnimation"]=wg;wg.__name__=["runner","NDiGhostAnimation"];wg.__super__=u;wg.prototype=z(u.prototype,{get_name:function(){return"NDiGhostAnimation_10"},
onUpdate:function(a){a>e.MAX_TIME_PER_FRAME&&(a=e.MAX_TIME_PER_FRAME);this.timeElapsed+=a;if(!this.dead&&null!=this.json&&null!=this.json[this.event]){var b=this.json[this.event];if(b.time<=this.timeElapsed&&!G.getInstance().isPaused){this.event++;if(this.event==this.json.length){this.dead=!0;this._animation.owner.dispose();return}var c=b.event_id;this._animation.transform.x.set__(s.parseFloat(b.position_x)+x.getInstance().GHOST_X_DELTA);this._animation.transform.y.animateTo(s.parseFloat(b.position_y)+
x.getInstance().GHOST_Y_DELTA,e.MAX_TIME_TO_RECORD_GHOST_PLAYBACK);c==e.PLAYER_EVENT_HIT_FLOOR?(this._animation.hitFloor(),this.jumping=!1):c==e.PLAYER_EVENT_JUMP&&!this.jumping&&(this._animation.jump(),this.jumping=!0)}}u.prototype.onUpdate.call(this,a)},__class__:wg});var xg=function(){this.progressMsg="";this.type=w.NONE;this.number=0;this.descriptionMsg="";this.notified=this.achieved=!1};i["runner.NDiObjective"]=xg;xg.__name__=["runner","NDiObjective"];xg.prototype={randomize:function(){var a=
Math.floor(11*Math.random());this.notified=this.achieved=!1;switch(a){case 0:this.type=w.RUN_NUM_METERS;this.number=20+Math.floor(31*Math.random());this.descriptionMsg=s.string(C.lenguajeData.mission_task.objetive_1.text1)+" "+this.number+" "+s.string(C.lenguajeData.mission_task.objetive_1.text2);break;case 1:this.type=w.PICK_NUM_COINS;this.number=20+Math.floor(41*Math.random());this.descriptionMsg=s.string(C.lenguajeData.mission_task.objetive_2.text1)+" "+this.number+" "+s.string(C.lenguajeData.mission_task.objetive_2.text2);
break;case 2:this.type=w.NUM_GIANT_BURRITO;this.number=1+Math.floor(5*Math.random());this.descriptionMsg=s.string(C.lenguajeData.mission_task.objetive_3.text1)+" "+this.number+" "+s.string(C.lenguajeData.mission_task.objetive_3.text2);break;case 3:this.type=w.PICK_NUM_RINGS;this.number=3+Math.floor(Math.random());this.descriptionMsg=s.string(C.lenguajeData.mission_task.objetive_4.text1)+" "+this.number+" "+s.string(C.lenguajeData.mission_task.objetive_4.text2);break;case 4:this.type=w.NUM_INVINCIBLE;
this.number=3+Math.floor(3*Math.random());this.descriptionMsg=s.string(C.lenguajeData.mission_task.objetive_5.text1)+" "+this.number+" "+s.string(C.lenguajeData.mission_task.objetive_5.text2);break;case 5:this.type=w.PLAYER_JUMPS;this.number=3+Math.floor(5*Math.random());this.descriptionMsg=s.string(C.lenguajeData.mission_task.objetive_7.text1)+" "+this.number+" "+s.string(C.lenguajeData.mission_task.objetive_7.text2);break;case 6:this.type=w.PLAYER_DOUBLE_JUMPS;this.number=3+Math.floor(10*Math.random());
this.descriptionMsg=s.string(C.lenguajeData.mission_task.objetive_8.text1)+" "+this.number+" "+s.string(C.lenguajeData.mission_task.objetive_8.text2);break;case 7:this.type=w.PICK_NUM_BAGS_COINS;this.number=3+Math.floor(10*Math.random());this.descriptionMsg=s.string(C.lenguajeData.mission_task.objetive_9.text1)+" "+this.number+" "+s.string(C.lenguajeData.mission_task.objetive_9.text2);break;case 8:this.type=w.THEO_NUM_DOUBLE_JUMPS;this.number=3+Math.floor(10*Math.random());this.descriptionMsg=s.string(C.lenguajeData.mission_task.objetive_10.text1)+
" "+this.number+" "+s.string(C.lenguajeData.mission_task.objetive_10.text2);break;case 9:this.type=w.LUC_NUM_DOUBLE_JUMPS;this.number=3+Math.floor(10*Math.random());this.descriptionMsg=s.string(C.lenguajeData.mission_task.objetive_11.text1)+" "+this.number+" "+s.string(C.lenguajeData.mission_task.objetive_11.text2);break;case 10:this.type=w.NUM_GOLF_CART;this.number=3+Math.floor(4*Math.random());this.descriptionMsg=s.string(C.lenguajeData.mission_task.objetive_12.text1)+" "+this.number+" "+s.string(C.lenguajeData.mission_task.objetive_12.text2);
break;default:this.type=w.SURVIVE_NUM_DAYS,this.number=1+Math.floor(4*Math.random()),this.descriptionMsg=s.string(C.lenguajeData.mission_task.objetive_6.text1)+" "+this.number+" "+s.string(C.lenguajeData.mission_task.objetive_6.text2)}},check:function(){switch(this.type[1]){case 0:null;break;case 1:this.number<=q.METERS?(this.progressMsg="",this.achieved=!0):this.progressMsg=" ("+q.METERS+"/"+this.number+")";break;case 2:this.number<=q.COINS?(this.progressMsg="",this.achieved=!0):this.progressMsg=
" ("+q.COINS+"/"+this.number+")";break;case 3:this.number<=q.METERS&&0==q.INVINCIBLE?(this.progressMsg="",this.achieved=!0):this.progressMsg=" ("+q.METERS+"/"+this.number+")";break;case 4:this.number<=q.RINGS?(this.progressMsg="",this.achieved=!0):this.progressMsg=" ("+q.RINGS+"/"+this.number+")";break;case 5:this.number<=q.INVINCIBLE?(this.progressMsg="",this.achieved=!0):this.progressMsg=" ("+q.INVINCIBLE+"/"+this.number+")";break;case 6:this.number<=q.DAYS?(this.progressMsg="",this.achieved=!0):
this.progressMsg=" ("+q.DAYS+"/"+this.number+")";break;case 7:this.number<=q.JUMPS?(this.progressMsg="",this.achieved=!0):this.progressMsg=" ("+q.JUMPS+"/"+this.number+")";break;case 8:this.number<=q.DOUBLE_JUMPS?(this.progressMsg="",this.achieved=!0):this.progressMsg=" ("+q.DOUBLE_JUMPS+"/"+this.number+")";break;case 9:this.number<=q.BAGS_COINS?(this.progressMsg="",this.achieved=!0):this.progressMsg=" ("+q.BAGS_COINS+"/"+this.number+")";break;case 10:this.number<=q.THEO_DOUBLE_JUMPS?(this.progressMsg=
"",this.achieved=!0):this.progressMsg=" ("+q.THEO_DOUBLE_JUMPS+"/"+this.number+")";break;case 11:this.number<=q.LUC_DOUBLE_JUMPS?(this.progressMsg="",this.achieved=!0):this.progressMsg=" ("+q.LUC_DOUBLE_JUMPS+"/"+this.number+")";break;case 12:this.number<=q.GOLF_CART?(this.progressMsg="",this.achieved=!0):this.progressMsg=" ("+(0>q.GOLF_CART?0:q.GOLF_CART)+"/"+this.number+")";break;case 13:this.number<=q.GIANT_BURRITO?(this.progressMsg="",this.achieved=!0):this.progressMsg=" ("+(0>q.GIANT_BURRITO?
0:q.GIANT_BURRITO)+"/"+this.number+")"}this.achieved&&null;return this.achieved},isAchieved:function(){return this.achieved},__class__:xg};var q=function(){u.call(this);q.Reset();this.arrayObjectivesType=[];this.generateObjectives()};i["runner.NDiObjetiveArbiter"]=q;q.__name__=["runner","NDiObjetiveArbiter"];q.Reset=function(){q.OBJECTIVE_ONE_DONE=!1;q.OBJECTIVE_TWO_DONE=!1;q.OBJECTIVE_THREE_DONE=!1;q.METERS=0;q.COINS=0;q.INVINCIBLE=0;q.RINGS=0;q.DAYS=0;q.JUMPS=0;q.DOUBLE_JUMPS=0;q.BAGS_COINS=0;q.THEO_DOUBLE_JUMPS=
0;q.LUC_DOUBLE_JUMPS=0;q.GOLF_CART=-1;q.GIANT_BURRITO=-1;gd.count=0};q.__super__=u;q.prototype=z(u.prototype,{get_name:function(){return"NDiObjetiveArbiter_21"},generateObjectives:function(){var a;a=A._platform.getStorage();a.set("OBJECTIVE1",null);a.set("OBJECTIVE2",null);a.set("OBJECTIVE3",null);var b=a.get("OBJECTIVE1"),c=a.get("OBJECTIVE2"),d=a.get("OBJECTIVE3");null==b?(this.objective_1=this.getObjetive(),this.arrayObjectivesType.push(this.objective_1.type),a.set("OBJECTIVE1",this.objective_1)):
this.objective_1=b;null==c?(this.objective_2=this.getObjetive(),this.arrayObjectivesType.push(this.objective_2.type),a.set("OBJECTIVE2",this.objective_2)):this.objective_2=c;null==d?(this.objective_3=this.getObjetive(),this.arrayObjectivesType.push(this.objective_3.type),a.set("OBJECTIVE3",this.objective_3)):this.objective_3=d;this.objective_1.isAchieved()&&(q.OBJECTIVE_ONE_DONE=!0);this.objective_2.isAchieved()&&(q.OBJECTIVE_TWO_DONE=!0);this.objective_3.isAchieved()&&(q.OBJECTIVE_THREE_DONE=!0);
this.objective_1.isAchieved()&&this.objective_2.isAchieved()&&this.objective_3.isAchieved()},getObjetive:function(){var a=new xg;a.randomize();for(var b=0,c=this.arrayObjectivesType.length;b<c;)this.arrayObjectivesType[b++]==a.type&&(a=this.getObjetive());return a},updateObjectives:function(){null!=this.objective_1&&(q.OBJECTIVE_ONE_PROGRESS=this.objective_1.progressMsg);null!=this.objective_2&&(q.OBJECTIVE_TWO_PROGRESS=this.objective_2.progressMsg);null!=this.objective_3&&(q.OBJECTIVE_THREE_PROGRESS=
this.objective_3.progressMsg);null!=this.objective_1&&!this.objective_1.isAchieved()&&this.objective_1.check()&&(this.objective_1.achieved=!0,A._platform.getStorage().set("OBJECTIVE1",this.objective_1),q.OBJECTIVE_ONE_DONE=!0);null!=this.objective_2&&!this.objective_2.isAchieved()&&this.objective_2.check()&&(this.objective_2.achieved=!0,A._platform.getStorage().set("OBJECTIVE2",this.objective_2),q.OBJECTIVE_TWO_DONE=!0);null!=this.objective_3&&!this.objective_3.isAchieved()&&this.objective_3.check()&&
(this.objective_3.achieved=!0,A._platform.getStorage().set("OBJECTIVE3",this.objective_3),q.OBJECTIVE_THREE_DONE=!0)},setNotifiedObjective1:function(){this.objective_1.notified=!0;A._platform.getStorage().set("OBJECTIVE1",this.objective_1)},setNotifiedObjective2:function(){this.objective_2.notified=!0;A._platform.getStorage().set("OBJECTIVE2",this.objective_2)},setNotifiedObjective3:function(){this.objective_3.notified=!0;A._platform.getStorage().set("OBJECTIVE3",this.objective_3)},__class__:q});
var Cc=function(a,b,c){this.timeElapsedTemp=this.timeHitTemp=0;this._isFixedPosY=!1;this.record=!0;this.playerJumps=2;this.type=0;this.isDead=!1;jc.call(this,a,!0,c);this.playerJumps=2;this.canFloat=!1;A._platform.getStorage().set("$n",0);this.timeElapsed=0;this.record=!1;this.coinsGrabbedVFX=this.bagGrabbedVFX=this.invGrabbedVFX=null;this.spaceManager=c};i["runner.NDiPlayerBody"]=Cc;Cc.__name__=["runner","NDiPlayerBody"];Cc.__super__=jc;Cc.prototype=z(jc.prototype,{initPlayer:function(a){this.type=
a;switch(a){case e.PLAYER_TWO:this.canFloat=!0}a=new of(this.type,0,0,!1);this.owner.addChild(a.addToEntity());this._animation=a;this.setSaveEvent(!0,e.PLAYER_EVENT_HIT_FLOOR);this.timeToRecordGhostPlayback=0},setSaveEvent:function(a,b){this.eventId=b;this.record=a},saveEvent:function(a){if(this.record){var b='{"user_id":"'+x.getInstance().playerUserId+'","position_x":"'+this._animation.transform.x._value+'","position_y":"'+this._animation.transform.y._value+'","character_id":"'+this.type+'","event_id":"'+
a+'","time":"'+this.timeElapsed+'","reboot":"'+x.reboots+'","metters":"'+x.metters+'","fps":"0"}',c=A._platform.getStorage().get("$n");c++;A._platform.getStorage().set("$j_"+c,b);A._platform.getStorage().set("$n",c);if(a==e.PLAYER_EVENT_HIT_FLOOR||a==e.PLAYER_EVENT_DEAD)this.record=!1}},jump:function(){if(!(0>=this.playerJumps))if(this.setSaveEvent(!0,e.PLAYER_EVENT_JUMP),this.playerJumps--,q.JUMPS++,!this.canFloat&&0==this.playerJumps){this._body.get_velocity().set_x(0);this._body.get_velocity().set_y(0);
this._body.applyImpulse(T.get(0,0,null));H.getInstance().playSoundEffect(e.ARRAY_SOUNDS_FX_MUSIC.get("SFX_THEO_JUMP"),1);q.DOUBLE_JUMPS++;q.THEO_DOUBLE_JUMPS++;this._animation.jump();this._body.set_angularVel(0);var a;this.spaceManager._space.set_gravity(new T(0,0.8*x.PLAYER_GRAVITY));a=T.get(0,x.PLAYER_IMPULSE,null);this._body.applyImpulse(T.get(0,0.7*x.PLAYER_IMPULSE,null));a.dispose()}else this.canFloat&&0==this.playerJumps?(this.secondaryActionFloat(),H.getInstance().playSoundEffect(e.ARRAY_SOUNDS_FX_MUSIC.get("SFX_LUC_JUMP"),
1),q.DOUBLE_JUMPS++,q.LUC_DOUBLE_JUMPS++):(this.canFloat?H.getInstance().playSoundEffect(e.ARRAY_SOUNDS_FX_MUSIC.get("SFX_LUC_JUMP"),1):H.getInstance().playSoundEffect(e.ARRAY_SOUNDS_FX_MUSIC.get("SFX_THEO_JUMP"),1),this._animation.jump(),this._body.set_angularVel(0),this.spaceManager._space.set_gravity(new T(0,x.PLAYER_GRAVITY)),a=T.get(0,x.PLAYER_IMPULSE,null),this._body.applyImpulse(T.get(0,x.PLAYER_IMPULSE,null)),a.dispose())},secondaryActionFloat:function(){var a=this,b=new V(function(){a._fixedPosY=
a._body.get_position().get_y();a._isFixedPosY=!0}),c=new V(function(){a._isFixedPosY=!1});this.owner._compMap.Script_25.run(new va([b,new qa(1),c]))},invincible:function(a){var b=this,c=new V(function(){e.PLAYER_INVULNERABLE||(b.addInvulnerabilityVFX(),b._animation.run())});new V(function(){b.removeInvulnerabilityVFX();b.addInvulnerabilityVFX_EndAlert();b._animation.run()});var d=new V(function(){b.removeInvulnerabilityVFX();b.removeInvulnerabilityVFX_EndAlert();e.RINGS=0;b._animation.run();a()});
this.owner._compMap.Script_25.run(new va([c,new qa(e.PLAYER_INVULNERABLE_TIME),d]))},invincibleExtraLife:function(a){null==a&&(a=!0);var b=this,a=new V(function(){b.addExtraLifeVFX();b._animation.run()}),c=new V(function(){b.removeExtraLifeVFX();b._animation.run()});this.ExtraLifeScript=new va([a,new qa(e.PLAYER_INVULNERABLE_TIME_ALERT),c]);this.owner._compMap.Script_25.run(this.ExtraLifeScript)},cancelInvincibleExtraLife:function(){this.ExtraLifeScript.removeAll();e.PLAYER_REVIVE=!1;e.PLAYER_INVULNERABLE=
!1},onTouchingFloor:function(){this.setSaveEvent(!0,e.PLAYER_EVENT_HIT_FLOOR);this.playerJumps=2;this._animation.hitFloor()},onBounce:function(){this.setSaveEvent(!0,e.PLAYER_EVENT_JUMP);this._animation.jump();var a=T.get(0,-52E3,null);this._body.applyImpulse(a);a.dispose()},onHit:function(){this.isDead=!0;this.setSaveEvent(!0,e.PLAYER_EVENT_DEAD);this.saveEvent(this.eventId);this._animation.hitWall()},onUpdate:function(a){a>e.MAX_TIME_PER_FRAME&&(a=e.MAX_TIME_PER_FRAME);this.isDead||(this.timeElapsed+=
a,jc.prototype.onUpdate.call(this,a),this.isFixedPosX&&this._body.get_position().set_x(this._fixedPosX),this._isFixedPosY&&this._body.get_velocity().set_y(-90),e.PLAYER_INVULNERABLE&&null!=this.invulnerability&&this.invulnerability.transform.setXY(this._body.get_position().get_x(),this._body.get_position().get_y()-75),this.record&&(this.timeToRecordGhostPlayback+=a,this.timeToRecordGhostPlayback>=e.MAX_TIME_TO_RECORD_GHOST_PLAYBACK&&(this.timeToRecordGhostPlayback=0,this.saveEvent(this.eventId))))},
addExtraLifeVFX:function(){e.PLAYER_INVULNERABLE=!0;e.PLAYER_REVIVE=!0},removeExtraLifeVFX:function(){e.PLAYER_INVULNERABLE=!1;e.PLAYER_REVIVE=!1},addInvulnerabilityVFX:function(){e.PLAYER_INVULNERABLE=!0;var a=m.loadSetAnimations(e.ASSET_PACKAGE_GENERAL,"animations/Runner/Gadget"),a=new ja(a,"Gadget_");a.animationIdle(!0,0,"Inv");a.transform.centerAnchor();a.transform.setXY(this._body.get_position().get_x(),this._body.get_position().get_y());this.invulnerability=a;this.owner.addChild((new p).add(this.invulnerability))},
addInvulnerabilityVFX_EndAlert:function(){e.PLAYER_INVULNERABLE_ALERT=!0},removeInvulnerabilityVFX:function(){try{if(null!=this.invulnerability)this.invulnerability["delete"]()}catch(a){null}},removeInvulnerabilityVFX_EndAlert:function(){e.PLAYER_INVULNERABLE=!1;e.PLAYER_INVULNERABLE_ALERT=!1},addCoinGrabbedVFX:function(){var a=this;if(!(this.timeElapsedTemp+0.2>=this.timeElapsed)){this.timeElapsedTemp=this.timeElapsed;var b=""+this.timeElapsed;null==this.coinsGrabbedVFX&&(this.coinsGrabbedVFX=new ea);
var c=m.loadSetAnimations(e.ASSET_PACKAGE_GENERAL,"animations/powerUps"),c=new ja(c,"LOOPED_");c.transform.centerAnchor();c.transform.setXY(this.getBody().get_position().get_x(),this.getBody().get_position().get_y());c.animationIdle(!0,0,"Coin_PickUp");this.owner.addChild((new p).add(c));this.coinsGrabbedVFX.set(b,c);this.owner._compMap.Script_25.run(new va([new qa(0.3),new V(function(){a.removeCoinGrabbedVFX(b)})]))}},addInvGrabbedVFX:function(){var a=this,b=""+this.timeElapsed;null==this.invGrabbedVFX&&
(this.invGrabbedVFX=new ea);var c=m.loadSetAnimations(e.ASSET_PACKAGE_GENERAL,"animations/powerUps"),d=new ja(c,"LOOPED_");d.animationIdle(!0,0,"CoinBag_PickUp");d.transform.centerAnchor();d.transform.setXY(this.getBody().get_position().get_x(),this.getBody().get_position().get_y());this.owner.addChild((new p).add(d));this.invGrabbedVFX.set(b,d);this.owner._compMap.Script_25.run(new va([new qa(0.6),new V(function(){a.removeInvGrabbedVFX(b);d["delete"]()})]))},addBagGrabbedVFX:function(){var a=this,
b=""+this.timeElapsed;null==this.bagGrabbedVFX&&(this.bagGrabbedVFX=new ea);var c=m.loadSetAnimations(e.ASSET_PACKAGE_GENERAL,"animations/powerUps"),c=new ja(c,"LOOPED_");c.animationIdle(!0,0,"CoinBag_PickUp");c.transform.centerAnchor();c.transform.setXY(this.getBody().get_position().get_x(),this.getBody().get_position().get_y());this.owner.addChild((new p).add(c));this.bagGrabbedVFX.set(b,c);this.owner._compMap.Script_25.run(new va([new qa(0.6),new V(function(){a.removeBagGrabbedVFX(b)})]))},removeCoinGrabbedVFX:function(a){try{if(null!=
this.coinsGrabbedVFX&&this.coinsGrabbedVFX.exists(a)){var b=this.coinsGrabbedVFX.get(a);this.coinsGrabbedVFX.remove(a);b["delete"]()}}catch(c){}},removeBagGrabbedVFX:function(a){try{if(null!=this.bagGrabbedVFX&&this.bagGrabbedVFX.exists(a)){var b=this.bagGrabbedVFX.get(a);this.bagGrabbedVFX.remove(a);b["delete"]()}}catch(c){}},removeInvGrabbedVFX:function(a){try{if(null!=this.invGrabbedVFX&&this.invGrabbedVFX.exists(a)){var b=this.invGrabbedVFX.get(a);this.invGrabbedVFX.remove(a);b["delete"]()}}catch(c){}},
addInvHitAnimation:function(){var a=this;if(!(this.timeHitTemp+1>=this.timeElapsed)){this.timeHitTemp=this.timeElapsed;var b=""+this.timeElapsed;null==this.coinsGrabbedVFX&&(this.coinsGrabbedVFX=new ea);var c=m.loadSetAnimations(e.ASSET_PACKAGE_GENERAL,"animations/Runner/hit"),c=new ja(c,"LOOPED01_");c.transform.centerAnchor();c.transform.setXY(this.getBody().get_position().get_x(),this.getBody().get_position().get_y());c.animationIdle(!0,0,"ImpactObstacles");this.owner.addChild((new p).add(c));this.coinsGrabbedVFX.set(b,
c);this.owner._compMap.Script_25.run(new va([new qa(0.3),new V(function(){a.removeCoinGrabbedVFX(b)})]))}},addHeartAnimation:function(){var a=m.loadSetAnimations(e.ASSET_PACKAGE_GENERAL,"animations/powerUps/GadgetHeart");null!=this.heartAnimation&&(this.heartAnimation=null);this.heartAnimation=new ja(a,"IG_F_Heart_Ig_heart_pickup");this.heartAnimation.transform.centerAnchor();this.heartAnimation.transform.setScale(1.5);this.heartAnimation.transform.setXY(10,-170);this._animation.owner.addChild((new p).add(this.heartAnimation));
this.heartAnimation.animationIdle(!1,2,"")},disableAllAnimations:function(){var a;if(null!=this.coinsGrabbedVFX){for(a=this.coinsGrabbedVFX.keys();a.hasNext();)this.removeCoinGrabbedVFX(a.next());this.coinsGrabbedVFX=null}if(null!=this.invGrabbedVFX){for(a=this.invGrabbedVFX.keys();a.hasNext();)this.removeInvGrabbedVFX(a.next());this.invGrabbedVFX=null}if(null!=this.bagGrabbedVFX){for(a=this.bagGrabbedVFX.keys();a.hasNext();)this.removeBagGrabbedVFX(a.next());this.bagGrabbedVFX=null}},getType:function(){return this.type},
__class__:Cc});var mb=function(){this.roontigerPosition_x=-0.1;u.call(this);this.arrayObjects=[]};i["runner.NDiRoomData"]=mb;mb.__name__=["runner","NDiRoomData"];mb.getGroup=function(a,b){for(var c=mb.selectPattern(a,b),d=[],f=0,g=c.length;f<g;){var e=f++;d.push(mb.getRoom(c[e]))}return d};mb.selectPattern=function(a,b){var c=[0],d=[[0,17,2,7,18,3,19,4,6,5,0],[0,16,0,1,5,4,17,7,0,9,0],[0,17,2,7,18,3,19,4,0,5,0],[0,1,0,7,1,8,4,9,0,10,0],[0,2,0,12,0,13,18,14,4,15,0],[0,16,3,1,0,4,19,7,17,9,0]],f=[[0,
16,17,1,18,4,19,7,19,9,6,0],[0,4,0,19,1,5,0,9,17,9,0],[0,10,0,6,8,2,0,2,17,6,0],[0,18,18,13,4,15,11,7,19,10,0],[0,1,0,1,8,4,19,5,0,1,0],[0,16,9,4,18,4,19,7,0,6,0],[0,5,2,1,7,1,17,4,7,7,0],[0,16,0,1,19,4,0,7,0,9,0],[0,12,18,3,0,5,19,7,18,6,0],[0,16,0,1,0,4,19,7,5,18,0]],g=[[0,16,11,1,15,4,19,7,14,9,6,0],[0,8,5,8,6,5,9,8,10,7,6,0],[0,10,4,6,8,2,1,2,13,9,6,0],[0,18,1,13,9,15,11,7,10,15,6,0],[0,1,4,1,7,2,11,5,14,3,6,0],[0,16,5,1,14,4,11,7,9,6,6,0],[0,5,6,1,7,1,7,4,5,7,6,0],[0,16,1,7,14,1,8,7,2,9,6,0],
[0,12,11,3,12,7,11,8,11,2,6,0],[0,16,10,1,12,4,13,7,5,11,6,0]];return 1==a?d[b]:2==a?f[b]:3==a?g[b]:c};mb.getRoom=function(a){var b=new mb;switch(a){case 0:b.initRoom_Empty();break;case 1:b.initRoom_1();break;case 2:b.initRoom_2();break;case 3:b.initRoom_3();break;case 4:b.initRoom_4();break;case 5:b.initRoom_5();break;case 6:b.initRoom_6();break;case 7:b.initRoom_7();break;case 8:b.initRoom_8();break;case 9:b.initRoom_9();break;case 10:b.initRoom_10();break;case 11:b.initRoom_11();break;case 12:b.initRoom_12();
break;case 13:b.initRoom_13();break;case 14:b.initRoom_14();break;case 15:b.initRoom_15();break;case 16:b.initRoom_16();break;case 17:b.patternCoins_01();break;case 18:b.patternCoins_02();break;case 19:b.patternCoins_03();break;default:b.patternCoins_03()}return b};mb.__super__=u;mb.prototype=z(u.prototype,{get_name:function(){return"NDiRoomData_9"},onRemoved:function(){this.roomWeight=0.01;this.roomHeight=1},initRoom_1:function(){this.arrayObjects[this.arrayObjects.length]=new B(j.NEXT_ROOM,this.roontigerPosition_x,
-0.1);this.arrayObjects[this.arrayObjects.length]=new B(j.BOX2,0.1,0.8);this.arrayObjects[this.arrayObjects.length]=new B(j.BABYCHICK,0.8,0.72,0.4)},initRoom_2:function(){this.arrayObjects[this.arrayObjects.length]=new B(j.NEXT_ROOM,this.roontigerPosition_x,-0.1);this.arrayObjects[this.arrayObjects.length]=new B(j.BEAR,0.5,0.85,0.45)},initRoom_3:function(){this.arrayObjects[this.arrayObjects.length]=new B(j.NEXT_ROOM,this.roontigerPosition_x,-0.1);this.arrayObjects[this.arrayObjects.length]=new B(j.JESSERUN,
0.8,0.72,0.4)},initRoom_4:function(){this.arrayObjects[this.arrayObjects.length]=new B(j.NEXT_ROOM,this.roontigerPosition_x,-0.1);this.arrayObjects[this.arrayObjects.length]=new B(j.TWISTER,0.5,0.85,0.45);this.arrayObjects[this.arrayObjects.length]=new B(j.COINBAG,0.1,0.5)},initRoom_5:function(){this.arrayObjects[this.arrayObjects.length]=new B(j.NEXT_ROOM,this.roontigerPosition_x,-0.1);this.arrayObjects[this.arrayObjects.length]=new B(j.BABYCHICK,0.8,0.72,0.4);this.arrayObjects[this.arrayObjects.length]=
new B(j.BOX3,0.4,0.8)},initRoom_6:function(){this.arrayObjects[this.arrayObjects.length]=new B(j.NEXT_ROOM,this.roontigerPosition_x,-0.1);this.arrayObjects[this.arrayObjects.length]=new B(j.RUNNING_ENEMY,0.9,0.8,0.5);this.arrayObjects[this.arrayObjects.length]=new B(j.COIN,0.2,0.5);this.arrayObjects[this.arrayObjects.length]=new B(j.COIN,0.3,0.7);this.arrayObjects[this.arrayObjects.length]=new B(j.COIN,0.4,0.5);this.arrayObjects[this.arrayObjects.length]=new B(j.COIN,0.5,0.7);this.arrayObjects[this.arrayObjects.length]=
new B(j.COIN,0.7,0.5);this.arrayObjects[this.arrayObjects.length]=new B(j.COIN,0.8,0.7);this.arrayObjects[this.arrayObjects.length]=new B(j.COIN,0.9,0.5);this.arrayObjects[this.arrayObjects.length]=new B(j.COIN,1,0.7);this.arrayObjects[this.arrayObjects.length]=new B(j.COIN,1.1,0.5);this.arrayObjects[this.arrayObjects.length]=new B(j.BOX3,0.1,0.8)},initRoom_7:function(){this.arrayObjects[this.arrayObjects.length]=new B(j.NEXT_ROOM,this.roontigerPosition_x,-0.1);this.arrayObjects[this.arrayObjects.length]=
new B(j.TEDDYBEAR,0.7,0.82,0.5);this.arrayObjects[this.arrayObjects.length]=new B(j.RING,0.8,0.5);this.arrayObjects[this.arrayObjects.length]=new B(j.BOX2,0.1,0.8)},initRoom_8:function(){this.arrayObjects[this.arrayObjects.length]=new B(j.NEXT_ROOM,this.roontigerPosition_x,-0.1);this.arrayObjects[this.arrayObjects.length]=new B(j.COIN,0.2,0.5);this.arrayObjects[this.arrayObjects.length]=new B(j.COIN,0.3,0.4);this.arrayObjects[this.arrayObjects.length]=new B(j.COIN,0.4,0.3);this.arrayObjects[this.arrayObjects.length]=
new B(j.COIN,0.5,0.2);this.arrayObjects[this.arrayObjects.length]=new B(j.COINBAG,0.6,0.1);this.arrayObjects[this.arrayObjects.length]=new B(j.COIN,0.7,0.2);this.arrayObjects[this.arrayObjects.length]=new B(j.COIN,0.8,0.3);this.arrayObjects[this.arrayObjects.length]=new B(j.COIN,1.9,0.4);this.arrayObjects[this.arrayObjects.length]=new B(j.COIN,1,0.5);this.arrayObjects[this.arrayObjects.length]=new B(j.BOX3,0.1,0.8);this.arrayObjects[this.arrayObjects.length]=new B(j.BUGERWALLK,0.9,0.83,0.6);this.arrayObjects[this.arrayObjects.length]=
new B(j.RING,0.8,0.4)},initRoom_9:function(){this.arrayObjects[this.arrayObjects.length]=new B(j.NEXT_ROOM,this.roontigerPosition_x,-0.1);this.arrayObjects[this.arrayObjects.length]=new B(j.RING,0.9,0.4);this.arrayObjects[this.arrayObjects.length]=new B(j.BOX3,0.1,0.8);this.arrayObjects[this.arrayObjects.length]=new B(j.HOTDOGWALK,0.7,0.82,0.5)},initRoom_10:function(){this.arrayObjects[this.arrayObjects.length]=new B(j.NEXT_ROOM,this.roontigerPosition_x,-0.1);this.arrayObjects[this.arrayObjects.length]=
new B(j.MOTORCYCLETACO,0.9,0.83,0.6)},initRoom_11:function(){this.arrayObjects[this.arrayObjects.length]=new B(j.BOX3,0.1,0.8);this.arrayObjects[this.arrayObjects.length]=new B(j.NEXT_ROOM,this.roontigerPosition_x,-0.1);this.arrayObjects[this.arrayObjects.length]=new B(j.GOLFCARTLESSARD,0.7,0.8,0.4)},initRoom_12:function(){this.arrayObjects[this.arrayObjects.length]=new B(j.NEXT_ROOM,this.roontigerPosition_x,-0.1);this.arrayObjects[this.arrayObjects.length]=new B(j.RADIOACTIVETANK,0.3,0.8,0.7);this.arrayObjects[this.arrayObjects.length]=
new B(j.RADIOACTIVETANK,0.7,0.8,0.7)},initRoom_13:function(){this.arrayObjects[this.arrayObjects.length]=new B(j.NEXT_ROOM,this.roontigerPosition_x,-0.1);this.arrayObjects[this.arrayObjects.length]=new B(j.RADIOACTIVETANK,0.5,0.8,0.7)},initRoom_14:function(){this.arrayObjects[this.arrayObjects.length]=new B(j.NEXT_ROOM,this.roontigerPosition_x,-0.1);this.arrayObjects[this.arrayObjects.length]=new B(j.RADIOACTIVETANK,0.5,0.8,0.7)},initRoom_15:function(){this.arrayObjects[this.arrayObjects.length]=
new B(j.NEXT_ROOM,this.roontigerPosition_x,-0.1);this.arrayObjects[this.arrayObjects.length]=new B(j.GIANTBURRITO,0.5,0.77,0.6)},initRoom_16:function(){this.arrayObjects[this.arrayObjects.length]=new B(j.NEXT_ROOM,this.roontigerPosition_x,-0.1);this.arrayObjects[this.arrayObjects.length]=new B(j.RADIOACTIVETANK,0.5,0.8,0.7)},patternCoins_01:function(){this.arrayObjects[this.arrayObjects.length]=new B(j.NEXT_ROOM,this.roontigerPosition_x,-0.1);this.arrayObjects[this.arrayObjects.length]=new B(j.COIN,
0.1,0.7);this.arrayObjects[this.arrayObjects.length]=new B(j.COIN,0.2,0.5);this.arrayObjects[this.arrayObjects.length]=new B(j.COIN,0.3,0.7);this.arrayObjects[this.arrayObjects.length]=new B(j.COIN,0.4,0.5);this.arrayObjects[this.arrayObjects.length]=new B(j.COIN,0.5,0.7);this.arrayObjects[this.arrayObjects.length]=new B(j.COIN,0.6,0.5);this.arrayObjects[this.arrayObjects.length]=new B(j.COIN,0.7,0.7);this.arrayObjects[this.arrayObjects.length]=new B(j.COIN,0.8,0.5);this.arrayObjects[this.arrayObjects.length]=
new B(j.COIN,0.9,0.7)},patternCoins_02:function(){this.arrayObjects[this.arrayObjects.length]=new B(j.NEXT_ROOM,this.roontigerPosition_x,-0.1);for(var a=1;8>a;)for(var b=a++,c=5;6>c;){var d=c++;this.arrayObjects[this.arrayObjects.length]=new B(j.COIN,0.1*b,0.1*d)}},patternCoins_03:function(){this.arrayObjects[this.arrayObjects.length]=new B(j.NEXT_ROOM,this.roontigerPosition_x,-0.1);for(var a=1;6>a;)for(var b=a++,c=0;c<b;){var d=c++;this.arrayObjects[this.arrayObjects.length]=new B(j.COIN,b/10,-d/
10+0.9)}},initRoom_Empty:function(){this.arrayObjects[this.arrayObjects.length]=new B(j.NEXT_ROOM,this.roontigerPosition_x,-0.1)},__class__:mb});var B=function(a,b,c,d){null==d&&(d=1);null==c&&(c=0.5);null==b&&(b=0.5);this._x=this._y=this._scale=0;u.call(this);this._objectType=a;this._horizontalPercent=b;this._verticalPercent=c;this._scale=d};i["runner.NDiRoomPieceData"]=B;B.__name__=["runner","NDiRoomPieceData"];B.__super__=u;B.prototype=z(u.prototype,{get_name:function(){return"NDiRoomPieceData_15"},
onRemoved:function(){null},__class__:B});var of=function(a,b,c,d){null==d&&(d=!1);this.transform=new M;this.isDead=!1;this.ghost=d;b="";a==e.PLAYER_ONE?(this.type=e.PLAYER_ONE_NAME,b="animations/Runner/Gadget"):a==e.PLAYER_TWO&&(this.type=e.PLAYER_TWO_NAME,b="animations/Runner/Penny");e.PLAYER_SELECT_NAME=this.type;b=m.loadSetAnimations(e.ASSET_PACKAGE_GENERAL,b);ja.call(this,b,this.type);d&&this.transform.setAlpha(0.3);this.animationGeneric();this.transform.set_visible(!0);a==e.PLAYER_ONE?(this.transform.setScale(e.PLAYER_ONE_SCALE),
this.transform.setAnchor(e.PLAYER_ONE_RUN_ANCHOR.x,e.PLAYER_ONE_RUN_ANCHOR.y)):a==e.PLAYER_TWO&&(this.transform.setScale(e.PLAYER_TWO_SCALE),this.transform.setAnchor(e.PLAYER_TWO_RUN_ANCHOR.x,e.PLAYER_TWO_RUN_ANCHOR.y))};i["runner.NDiRunnerAnimation"]=of;of.__name__=["runner","NDiRunnerAnimation"];of.__super__=ja;of.prototype=z(ja.prototype,{hitFloor:function(){this.isDead||this.run()},hitWall:function(){this.isDead=!0;this.type==e.PLAYER_ONE_NAME?this.animation_stop(!1,0.25,this.type+"Hurt"+(this.ghost?
"_Ghost":"")):this.type==e.PLAYER_TWO_NAME&&this.animation_stop(!1,0.25,this.type+"MiniHurt"+(this.ghost?"_Ghost":""))},jump:function(){this.isDead||this.animationPose(this.type+"Jump")},run:function(){this.isDead||(this.type==e.PLAYER_ONE_NAME?this.transform.setAnchor(e.PLAYER_ONE_RUN_ANCHOR.x,e.PLAYER_ONE_RUN_ANCHOR.y):this.type==e.PLAYER_TWO_NAME&&this.transform.setAnchor(e.PLAYER_TWO_RUN_ANCHOR.x,e.PLAYER_TWO_RUN_ANCHOR.y),this.animationPose(this.type+"Run"))},onAdded:function(){ja.prototype.onAdded.call(this);
this.owner.add(new Ia);this.owner.add(this.transform)},addToEntity:function(){(new p).add(this);return this.owner},__class__:of});var ia=function(){u.call(this);this.currentRoom=0;this.listRooms=[]};i["runner.NDiZoneData"]=ia;ia.__name__=["runner","NDiZoneData"];ia.theInit=function(){ia.ran=new $f(ia.ran_seed)};ia.__super__=u;ia.prototype=z(u.prototype,{get_name:function(){return"NDiZoneData_8"},initZoneA:function(){this.listRooms=mb.getGroup(1,0);return this},initZoneB:function(){this.listRooms=
mb.getGroup(1,1);return this},initZoneC:function(){this.listRooms=mb.getGroup(1,2);return this},initZoneD:function(){this.listRooms=mb.getGroup(1,3);return this},shake:function(a,b){this.listRooms=mb.getGroup(b,ia.ran.nextInt()%5);return this},onRemoved:function(){null},getNextRoom:function(){var a=this.listRooms[this.currentRoom];null==a&&null;this.currentRoom+1>this.listRooms.length-1||this.currentRoom++;return a},__class__:ia});var bf=function(){};i["util.JSEmbedProxy"]=bf;bf.__name__=["util",
"JSEmbedProxy"];bf.get_base=function(){return bf.callJSEmbedMethod("baseUrl()")};bf.callJSEmbedMethod=function(a){try{var b=eval("jsembed."+a);if(null!=b)return b}catch(c){}return""};var qb=function(){this.data=A._platform.getStorage();this.initData()};i["util.NDiSaveData"]=qb;qb.__name__=["util","NDiSaveData"];qb.initInstance=function(){null==qb.instance&&(qb.instance=new qb)};qb.getInstance=function(){return qb.instance};qb.prototype={initData:function(){for(var a=0,b=e.ARRAY_VARS_TO_SAVE.length;a<
b;){var c=a++;null==this.getData(e.ARRAY_VARS_TO_SAVE[c][0])&&this.setData(e.ARRAY_VARS_TO_SAVE[c][0],e.ARRAY_VARS_INIT_VALUES[c])}},setData:function(a,b){this.data.set(a,b)},getData:function(a){return this.data.get(a)},__class__:qb};var nf=function(a){u.call(this);this.time=a};i["util.NDiTimedRemoval"]=nf;nf.__name__=["util","NDiTimedRemoval"];nf.__super__=u;nf.prototype=z(u.prototype,{get_name:function(){return"NDiTimedRemoval_14"},onUpdate:function(a){a>e.MAX_TIME_PER_FRAME&&(a=e.MAX_TIME_PER_FRAME);
this.time-=a;0>=this.time&&this.owner.dispose()},__class__:nf});var Vb=function(){this.body=this.constraint=null;this.pre_swapped=!1;this.int1=this.int2=this.set=this.wrap_arbiters=this.pre_arbiter=null;this.length=0;this.listener=this.next=this.prev=null;this.event=0;this.outer_body=this.outer_con=this.outer_int=null;this.length=0};i["zpp_nape.callbacks.ZPP_Callback"]=Vb;Vb.__name__=["zpp_nape","callbacks","ZPP_Callback"];Vb.prototype={wrapper_body:function(){null==this.outer_body&&(this.outer_body=
new cf,this.outer_body.zpp_inner=this);return this.outer_body},wrapper_con:function(){null==this.outer_con&&(this.outer_con=new df,this.outer_con.zpp_inner=this);return this.outer_con},wrapper_int:function(){null==this.outer_int&&(this.outer_int=new ef,this.outer_int.zpp_inner=this);null==this.wrap_arbiters?this.wrap_arbiters=Xc.get(this.set.arbiters,!0):this.wrap_arbiters.zpp_inner.inner=this.set.arbiters;this.wrap_arbiters.zpp_inner.zip_length=!0;this.wrap_arbiters.zpp_inner.at_ite=null;return this.outer_int},
push:function(a){null!=this.prev?this.prev.next=a:this.next=a;a.prev=this.prev;a.next=null;this.prev=a;this.length++},pop:function(){var a=this.next;this.next=a.next;null==this.next?this.prev=null:this.next.prev=null;this.length--;return a},empty:function(){return null==this.next},__class__:Vb};var ga=function(){this.interactors=this.constraints=null;this.zip_conlisteners=!1;this.conlisteners=null;this.zip_bodylisteners=!1;this.bodylisteners=null;this.zip_listeners=!1;this.manager=this.cbpairs=this.listeners=
null;this.id=0;this.next=null;this.count=0;this.cbTypes=null;this.cbTypes=new Wb;this.listeners=new Jd;this.zip_listeners=!0;this.bodylisteners=new Re;this.zip_bodylisteners=!0;this.conlisteners=new Se;this.zip_conlisteners=!0;this.constraints=new Sc;this.interactors=new fd;this.id=Ya.CbSet();this.cbpairs=new yg};i["zpp_nape.callbacks.ZPP_CbSet"]=ga;ga.__name__=["zpp_nape","callbacks","ZPP_CbSet"];ga.setlt=function(a,b){for(var c=a.cbTypes.head,d=b.cbTypes.head;null!=c&&null!=d;){var f=c.elt,g=d.elt;
if(f.id<g.id)return!0;if(g.id<f.id)return!1;c=c.next;d=d.next}return null!=d&&null==c};ga.get=function(a){var b;null==ga.zpp_pool?b=new ga:(b=ga.zpp_pool,ga.zpp_pool=b.next,b.next=null);null;for(var c=null,a=a.head;null!=a;){var d=a.elt,c=b.cbTypes.insert(c,d);d.cbsets.add(b);a=a.next}return b};ga.single_intersection=function(a,b,c){return a.manager.pair(a,b).single_intersection(c)};ga.find_all=function(a,b,c,d){a.manager.pair(a,b).forall(c,d)};ga.prototype={invalidate_pairs:function(){for(var a=
this.cbpairs.head;null!=a;)a.elt.zip_listeners=!0,a=a.next},realvalidate_listeners:function(){this.listeners.clear();for(var a=this.cbTypes.head;null!=a;){for(var b=null,c=this.listeners.head,d=a.elt.listeners.head;null!=d;){var f=d.elt;null!=c&&c.elt==f?(d=d.next,b=c,c=c.next):null==c||Fb.setlt(f,c.elt)?(f.space==this.manager.space&&(b=this.listeners.inlined_insert(b,f)),d=d.next):(b=c,c=c.next)}a=a.next}},realvalidate_bodylisteners:function(){this.bodylisteners.clear();for(var a=this.cbTypes.head;null!=
a;){for(var b=null,c=this.bodylisteners.head,d=a.elt.bodylisteners.head;null!=d;){var f=d.elt;null!=c&&c.elt==f?(d=d.next,b=c,c=c.next):null==c||Fb.setlt(f,c.elt)?(!f.options.excluded(this.cbTypes)&&f.space==this.manager.space&&(b=this.bodylisteners.inlined_insert(b,f)),d=d.next):(b=c,c=c.next)}a=a.next}},realvalidate_conlisteners:function(){this.conlisteners.clear();for(var a=this.cbTypes.head;null!=a;){for(var b=null,c=this.conlisteners.head,d=a.elt.conlisteners.head;null!=d;){var f=d.elt;null!=
c&&c.elt==f?(d=d.next,b=c,c=c.next):null==c||Fb.setlt(f,c.elt)?(!f.options.excluded(this.cbTypes)&&f.space==this.manager.space&&(b=this.conlisteners.inlined_insert(b,f)),d=d.next):(b=c,c=c.next)}a=a.next}},validate:function(){this.zip_listeners&&(this.zip_listeners=!1,this.realvalidate_listeners());this.zip_bodylisteners&&(this.zip_bodylisteners=!1,this.realvalidate_bodylisteners());this.zip_conlisteners&&(this.zip_conlisteners=!1,this.realvalidate_conlisteners())},free:function(){this.listeners.clear();
this.zip_listeners=!0;this.bodylisteners.clear();this.zip_bodylisteners=!0;this.conlisteners.clear();for(this.zip_conlisteners=!0;null!=this.cbTypes.head;)this.cbTypes.pop_unsafe().cbsets.remove(this)},__class__:ga};var Aa=function(){this.listeners=null;this.zip_listeners=!1;this.a=this.b=this.next=null;this.listeners=new Jd};i["zpp_nape.callbacks.ZPP_CbSetPair"]=Aa;Aa.__name__=["zpp_nape","callbacks","ZPP_CbSetPair"];Aa.get=function(a,b){var c;null==Aa.zpp_pool?c=new Aa:(c=Aa.zpp_pool,Aa.zpp_pool=
c.next,c.next=null);c.zip_listeners=!0;ga.setlt(a,b)?(c.a=a,c.b=b):(c.a=b,c.b=a);return c};Aa.setlt=function(a,b){return ga.setlt(a.a,b.a)||a.a==b.a&&ga.setlt(a.b,b.b)};Aa.prototype={__validate:function(){this.listeners.clear();for(var a=this.a.listeners.head,b=this.b.listeners.head;null!=a&&null!=b;){var c=a.elt,d=b.elt;c==d?((c.options1.compatible(this.a.cbTypes)&&c.options2.compatible(this.b.cbTypes)||c.options2.compatible(this.a.cbTypes)&&c.options1.compatible(this.b.cbTypes))&&this.listeners.add(c),
a=a.next,b=b.next):c.precedence>d.precedence||c.precedence==d.precedence&&c.id>d.id?a=a.next:b=b.next}},empty_intersection:function(){return null==this.listeners.head},single_intersection:function(a){var b=this.listeners.head;return null!=b&&b.elt==a&&null==b.next},forall:function(a,b){for(var c=this.listeners.head;null!=c;){var d=c.elt;d.event==a&&b(d);c=c.next}},__class__:Aa};var g=function(){};i["zpp_nape.util.ZPP_Flags"]=g;g.__name__=["zpp_nape","util","ZPP_Flags"];var Fb=function(){this.body=
this.constraint=this.interaction=this.space=null;this.id=this.type=this.event=this.precedence=0;this.outer=null;this.id=Ya.Listener()};i["zpp_nape.callbacks.ZPP_Listener"]=Fb;Fb.__name__=["zpp_nape","callbacks","ZPP_Listener"];Fb.setlt=function(a,b){return a.precedence>b.precedence||a.precedence==b.precedence&&a.id>b.id};Fb.prototype={addedToSpace:function(){},removedFromSpace:function(){},__class__:Fb};var zg=function(){this.outer_zn=this.options=this.handler=null};i["zpp_nape.callbacks.ZPP_BodyListener"]=
zg;zg.__name__=["zpp_nape","callbacks","ZPP_BodyListener"];zg.__super__=Fb;zg.prototype=z(Fb.prototype,{addedToSpace:function(){this.options.handler=E(this,this.cbtype_change);for(var a=this.options.includes.head;null!=a;)a.elt.addbody(this),a=a.next},removedFromSpace:function(){for(var a=this.options.includes.head;null!=a;){var b=a.elt;b.bodylisteners.remove(this);b.invalidatebody();a=a.next}this.options.handler=null},cbtype_change:function(a,b,c){this.removedFromSpace();this.options.effect_change(a,
b,c);this.addedToSpace()},__class__:zg});var Ag=function(){this.outer_zn=this.options=this.handler=null};i["zpp_nape.callbacks.ZPP_ConstraintListener"]=Ag;Ag.__name__=["zpp_nape","callbacks","ZPP_ConstraintListener"];Ag.__super__=Fb;Ag.prototype=z(Fb.prototype,{addedToSpace:function(){this.options.handler=E(this,this.cbtype_change);for(var a=this.options.includes.head;null!=a;)a.elt.addconstraint(this),a=a.next},removedFromSpace:function(){for(var a=this.options.includes.head;null!=a;){var b=a.elt;
b.conlisteners.remove(this);b.invalidateconstraint();a=a.next}this.options.handler=null},cbtype_change:function(a,b,c){this.removedFromSpace();this.options.effect_change(a,b,c);this.addedToSpace()},__class__:Ag});var Wb=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_CbType"]=Wb;Wb.__name__=["zpp_nape","util","ZNPList_ZPP_CbType"];Wb.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==ab.zpp_pool?b=new ab:(b=
ab.zpp_pool,ab.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){var c;null==ab.zpp_pool?c=new ab:(c=ab.zpp_pool,ab.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=
a.next;a.elt=null;a.next=ab.zpp_pool;ab.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=
b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=ab.zpp_pool;ab.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},has:function(a){return this.inlined_has(a)},inlined_has:function(a){var b;b=!1;for(var c=this.head;null!=c;){if(c.elt==a){b=!0;break}c=c.next}return b},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},
__class__:Wb};var Ga=function(a,b,c,d){this.handlerp=null;this.allowSleepingCallbacks=this.pure=!1;this.options1=this.options2=this.handleri=null;this.itype=0;this.outer_zni=this.outer_znp=null;Fb.call(this);this.type=d;this.interaction=this;this.event=c;this.options1=a.zpp_inner;this.options2=b.zpp_inner;this.allowSleepingCallbacks=!1};i["zpp_nape.callbacks.ZPP_InteractionListener"]=Ga;Ga.__name__=["zpp_nape","callbacks","ZPP_InteractionListener"];Ga.__super__=Fb;Ga.prototype=z(Fb.prototype,{CbSetset:function(a,
b,c){for(var d=Ga.UCbSet,f=Ga.VCbSet,g=Ga.WCbSet,a=a.head,e=b.head;null!=a&&null!=e;){var h=a.elt,n=e.elt;h==n?(g.inlined_add(h),a=a.next,e=e.next):ga.setlt(h,n)?(d.inlined_add(h),a=a.next):(f.inlined_add(n),e=e.next)}for(;null!=a;)d.inlined_add(a.elt),a=a.next;for(;null!=e;)f.inlined_add(e.elt),e=e.next;for(;null!=d.head;){a=d.pop_unsafe();for(e=b.head;null!=e;)c(a,e.elt),e=e.next}for(;null!=f.head;){b=f.pop_unsafe();for(d=g.head;null!=d;)c(b,d.elt),d=d.next}for(;null!=g.head;){f=g.pop_unsafe();
c(f,f);for(b=g.head;null!=b;)c(f,b.elt),b=b.next}},CbTypeset:function(a,b,c){for(var d=Ga.UCbType,f=Ga.VCbType,g=Ga.WCbType,a=a.head,e=b.head;null!=a&&null!=e;){var h=a.elt,n=e.elt;h==n?(g.inlined_add(h),a=a.next,e=e.next):h.id<n.id?(d.inlined_add(h),a=a.next):(f.inlined_add(n),e=e.next)}for(;null!=a;)d.inlined_add(a.elt),a=a.next;for(;null!=e;)f.inlined_add(e.elt),e=e.next;for(;null!=d.head;){a=d.pop_unsafe();for(e=b.head;null!=e;)c(a,e.elt),e=e.next}for(;null!=f.head;){b=f.pop_unsafe();for(d=g.head;null!=
d;)c(b,d.elt),d=d.next}for(;null!=g.head;){f=g.pop_unsafe();c(f,f);for(b=g.head;null!=b;)c(f,b.elt),b=b.next}},with_uniquesets:function(a){var b=this,c;null==ha.zpp_pool?c=new ha:(c=ha.zpp_pool,ha.zpp_pool=c.next,c.next=null);null;c.lt=Aa.setlt;this.CbTypeset(this.options1.includes,this.options2.includes,function(a,d){b.CbSetset(a.cbsets,d.cbsets,function(a,d){a.validate();d.validate();ga.single_intersection(a,d,b)&&c.try_insert(Aa.get(a,d))})});c.clear_with(function(c){a?b.space.freshListenerType(c.a,
c.b):b.space.nullListenerType(c.a,c.b);c.a=c.b=null;c.listeners.clear();c.next=Aa.zpp_pool;Aa.zpp_pool=c});var d=c;d.data=null;d.lt=null;d.swapped=null;d.next=ha.zpp_pool;ha.zpp_pool=d},with_union:function(a){for(var b=this.options1.includes.head,c=this.options2.includes.head;null!=b&&null!=c;){var d=b.elt,f=c.elt;d==f?(a(d),b=b.next,c=c.next):d.id<f.id?(a(d),b=b.next):(a(f),c=c.next)}for(;null!=b;)a(b.elt),b=b.next;for(;null!=c;)a(c.elt),c=c.next},addedToSpace:function(){var a=this,b=this.type==
g.id_ListenerType_PRE;this.with_union(function(c){c.addint(a);if(b)for(c=c.interactors.head;null!=c;)c.elt.wake(),c=c.next});this.options1.handler=E(this,this.cbtype_change1);this.options2.handler=E(this,this.cbtype_change2);this.with_uniquesets(!0)},removedFromSpace:function(){var a=this;this.with_uniquesets(!1);var b=this.type==g.id_ListenerType_PRE;this.with_union(function(c){c.listeners.remove(a);c.invalidateint();if(b)for(c=c.interactors.head;null!=c;)c.elt.wake(),c=c.next});this.options1.handler=
null;this.options2.handler=null},cbtype_change1:function(a,b,c){this.cbtype_change(this.options1,a,b,c)},cbtype_change2:function(a,b,c){this.cbtype_change(this.options2,a,b,c)},cbtype_change:function(a,b,c,d){this.removedFromSpace();a.effect_change(b,c,d);this.addedToSpace();null},__class__:Ga});var ec=function(){this.outer=this.handler=this.includes=this.excludes=this.wrap_includes=this.wrap_excludes=null;this.includes=new Wb;this.excludes=new Wb};i["zpp_nape.callbacks.ZPP_OptionType"]=ec;ec.__name__=
["zpp_nape","callbacks","ZPP_OptionType"];ec.argument=function(a){return null==a?new be:U.__instanceof(a,be)?a:(new be).including(a)};ec.prototype={setup_includes:function(){this.wrap_includes=Nb.get(this.includes,!0)},setup_excludes:function(){this.wrap_excludes=Nb.get(this.excludes,!0)},excluded:function(a){return this.nonemptyintersection(a,this.excludes)},compatible:function(a){return this.nonemptyintersection(a,this.includes)&&!this.nonemptyintersection(a,this.excludes)},nonemptyintersection:function(a,
b){for(var c=!1,d=a.head,f=b.head;null!=f&&null!=d;){var g=f.elt,e=d.elt;if(g==e){c=!0;break}else g.id<e.id?f=f.next:d=d.next}return c},effect_change:function(a,b,c){if(b)if(c){b=null;for(c=this.includes.head;null!=c&&!(a.id<c.elt.id);){b=c;c=c.next}this.includes.inlined_insert(b,a)}else this.includes.remove(a);else if(c){b=null;for(c=this.excludes.head;null!=c&&!(a.id<c.elt.id);){b=c;c=c.next}this.excludes.inlined_insert(b,a)}else this.excludes.remove(a)},append_type:function(a,b){a==this.includes?
this.includes.has(b)||(this.excludes.has(b)?null!=this.handler?this.handler(b,!1,!1):this.effect_change(b,!1,!1):null!=this.handler?this.handler(b,!0,!0):this.effect_change(b,!0,!0)):this.excludes.has(b)||(this.includes.has(b)?null!=this.handler?this.handler(b,!0,!1):this.effect_change(b,!0,!1):null!=this.handler?this.handler(b,!1,!0):this.effect_change(b,!1,!0))},append:function(a,b){if(U.__instanceof(b,fa))this.append_type(a,b.zpp_inner);else if(U.__instanceof(b,wd)){var c;b.zpp_inner.valmod();
for(c=Db.get(b);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);this.append_type(a,d.zpp_inner)}}else if(b instanceof Array&&null==b.__enum__)for(c=0;c<b.length;)d=b[c],++c,this.append_type(a,d.zpp_inner)},__class__:ec};var fh=function(){this.cbTypes=this.cbSet=null;this.ignore=this.__velocity=!1;this.component=null;this.active=this.stiff=this.removeOnBreak=!1;this.outer=this.compound=this.space=null};i["zpp_nape.constraint.ZPP_Constraint"]=fh;fh.__name__=["zpp_nape","constraint",
"ZPP_Constraint"];fh.prototype={alloc_cbSet:function(){if(null!=(this.cbSet=this.space.cbsets.get(this.cbTypes)))this.cbSet.count++,this.cbSet.constraints.add(this)},dealloc_cbSet:function(){if(null!=this.cbSet){this.cbSet.constraints.remove(this);if(0==--this.cbSet.count){this.space.cbsets.remove(this.cbSet);var a=this.cbSet;a.free();a.next=ga.zpp_pool;ga.zpp_pool=a}this.cbSet=null}},addedToSpace:function(){this.active&&this.activeInSpace();this.activeBodies();for(var a=this.cbTypes.head;null!=a;)a.elt.constraints.add(this),
a=a.next},removedFromSpace:function(){this.active&&this.inactiveOrOutSpace();this.inactiveBodies();for(var a=this.cbTypes.head;null!=a;)a.elt.constraints.remove(this),a=a.next},activeInSpace:function(){this.alloc_cbSet();null==rb.zpp_pool?this.component=new rb:(this.component=rb.zpp_pool,rb.zpp_pool=this.component.next,this.component.next=null);null;this.component.isBody=!1;this.component.constraint=this},inactiveOrOutSpace:function(){this.dealloc_cbSet();var a=this.component;a.body=null;a.constraint=
null;null;a.next=rb.zpp_pool;rb.zpp_pool=a;this.component=null},activeBodies:function(){},inactiveBodies:function(){},clearcache:function(){},wake_connected:function(){},forest:function(){},pair_exists:function(){return!1},broken:function(){},warmStart:function(){},preStep:function(){return!1},applyImpulseVel:function(){return!1},applyImpulsePos:function(){return!1},__class__:fh};var aa=function(){this.colarb=this.fluidarb=this.sensorarb=null;this.type=0;this.b1=this.b2=this.ws1=this.ws2=this.pair=
null;this.invalidated=!1;this.immState=0;this.intchange=this.presentable=this.continuous=this.fresh=!1;this.present=0;this.active=this.cleared=this.sleeping=!1;this.id=this.di=this.stamp=this.up_stamp=this.sleep_stamp=this.endGenerated=0;this.outer=null};i["zpp_nape.dynamics.ZPP_Arbiter"]=aa;aa.__name__=["zpp_nape","dynamics","ZPP_Arbiter"];aa.prototype={wrapper:function(){null==this.outer&&(aa.internal=!0,this.type==aa.COL?(this.colarb.outer_zn=new gf,this.outer=this.colarb.outer_zn):this.type==
aa.FLUID?(this.fluidarb.outer_zn=new hf,this.outer=this.fluidarb.outer_zn):this.outer=new Wc,this.outer.zpp_inner=this,aa.internal=!1);return this.outer},__class__:aa};var hb=function(){this.next=null;aa.call(this);this.type=aa.SENSOR;this.sensorarb=this};i["zpp_nape.dynamics.ZPP_SensorArbiter"]=hb;hb.__name__=["zpp_nape","dynamics","ZPP_SensorArbiter"];hb.__super__=aa;hb.prototype=z(aa.prototype,{retire:function(){this.cleared||(this.b1.arbiters.inlined_try_remove(this),this.b2.arbiters.inlined_try_remove(this),
null!=this.pair&&(this.pair=this.pair.arb=null));this.b1=this.b2=null;this.intchange=this.active=!1;this.next=hb.zpp_pool;hb.zpp_pool=this},__class__:hb});var nb=function(){this.wMass=this.adamp=this.agamma=this.vMassa=this.vMassb=this.vMassc=this.dampx=this.dampy=this.lgamma=this.nx=this.ny=this.buoyx=this.buoyy=this.pre_dt=0;this.nodrag=!1;this.centroidx=this.centroidy=this.overlap=this.r1x=this.r1y=this.r2x=this.r2y=0;this.outer_zn=this.next=null;aa.call(this);this.type=aa.FLUID;this.fluidarb=
this;this.buoyy=this.buoyx=0;this.pre_dt=-1};i["zpp_nape.dynamics.ZPP_FluidArbiter"]=nb;nb.__name__=["zpp_nape","dynamics","ZPP_FluidArbiter"];nb.__super__=aa;nb.prototype=z(aa.prototype,{retire:function(){this.cleared||(this.b1.arbiters.inlined_try_remove(this),this.b2.arbiters.inlined_try_remove(this),null!=this.pair&&(this.pair=this.pair.arb=null));this.b1=this.b2=null;this.intchange=this.active=!1;this.next=nb.zpp_pool;nb.zpp_pool=this;this.pre_dt=-1},preStep:function(a,b){-1==this.pre_dt&&(this.pre_dt=
b);var c=b/this.pre_dt;this.pre_dt=b;this.r1x=this.centroidx-this.b1.posx;this.r1y=this.centroidy-this.b1.posy;this.r2x=this.centroidx-this.b2.posx;this.r2y=this.centroidy-this.b2.posy;var d=0,f=0;this.ws1.fluidEnabled&&null!=this.ws1.fluidProperties.wrap_gravity?(d=this.ws1.fluidProperties.gravityx,f=this.ws1.fluidProperties.gravityy):(d=a.gravityx,f=a.gravityy);var e=0,h=0;this.ws2.fluidEnabled&&null!=this.ws2.fluidProperties.wrap_gravity?(e=this.ws2.fluidProperties.gravityx,h=this.ws2.fluidProperties.gravityy):
(e=a.gravityx,h=a.gravityy);var i=0,n=0;if(this.ws1.fluidEnabled&&this.ws2.fluidEnabled){var y=this.overlap*this.ws1.fluidProperties.density,l=this.overlap*this.ws2.fluidProperties.density;if(y>l)e=y+l,i-=d*e,n-=f*e;else if(y<l)d=y+l,i+=e*d,n+=h*d;else{var j=0,k=0,j=0.5*(d+e),k=0.5*(f+h);this.ws1.worldCOMx*j+this.ws1.worldCOMy*k>this.ws2.worldCOMx*j+this.ws2.worldCOMy*k?(d=y+l,i-=j*d,n-=k*d):(d=y+l,i+=j*d,n+=k*d)}}else this.ws1.fluidEnabled?(e=this.overlap*this.ws1.fluidProperties.density,i-=d*e,
n-=f*e):this.ws2.fluidEnabled&&(d=this.overlap*this.ws2.fluidProperties.density,i+=e*d,n+=h*d);i*=b;n*=b;this.buoyx=i;this.buoyy=n;this.b1.type==g.id_BodyType_DYNAMIC&&(d=this.b1.imass,this.b1.velx-=i*d,this.b1.vely-=n*d,this.b1.angvel-=(n*this.r1x-i*this.r1y)*this.b1.iinertia);this.b2.type==g.id_BodyType_DYNAMIC&&(d=this.b2.imass,this.b2.velx+=i*d,this.b2.vely+=n*d,this.b2.angvel+=(n*this.r2x-i*this.r2y)*this.b2.iinertia);if((!this.ws1.fluidEnabled||0==this.ws1.fluidProperties.viscosity)&&(!this.ws2.fluidEnabled||
0==this.ws2.fluidProperties.viscosity))this.nodrag=!0,this.adamp=this.dampy=this.dampx=0;else{this.nodrag=!1;i=0;this.ws1.fluidEnabled&&(this.ws2.validate_angDrag(),i+=this.ws1.fluidProperties.viscosity*this.ws2.angDrag*this.overlap/this.ws2.area);this.ws2.fluidEnabled&&(this.ws1.validate_angDrag(),i+=this.ws2.fluidProperties.viscosity*this.ws1.angDrag*this.overlap/this.ws1.area);0!=i?(n=this.b1.sinertia+this.b2.sinertia,this.wMass=0!=n?1/n:0,i=2*Math.PI*4.0E-4*i,this.agamma=1/(b*i*(2+i*b)),i=1/(1+
this.agamma),this.agamma*=i,this.wMass*=i):this.agamma=this.wMass=0;i=this.b2.velx+this.b2.kinvelx-this.r2y*(this.b2.angvel+this.b2.kinangvel)-(this.b1.velx+this.b1.kinvelx-this.r1y*(this.b2.angvel+this.b2.kinangvel));n=this.b2.vely+this.b2.kinvely+this.r2x*(this.b2.angvel+this.b2.kinangvel)-(this.b1.vely+this.b1.kinvely+this.r1x*(this.b1.angvel+this.b1.kinangvel));i*i+n*n<o.epsilon*o.epsilon||(d=1/Math.sqrt(i*i+n*n),this.nx=i*d,this.ny=n*d);i=0;if(this.ws1.fluidEnabled)if(n=-this.ws1.fluidProperties.viscosity*
this.overlap/this.ws2.area,this.ws2.type==g.id_ShapeType_CIRCLE)i-=n*this.ws2.circle.radius*o.fluidLinearDrag/(2*this.ws2.circle.radius*Math.PI);else{f=d=0;for(e=this.ws2.polygon.edges.head;null!=e;)h=e.elt,d+=h.length,h=n*h.length*(h.gnormx*this.nx+h.gnormy*this.ny),0<h&&(h=h*=-o.fluidVacuumDrag),f-=0.5*h*o.fluidLinearDrag,e=e.next;i+=f/d}if(this.ws2.fluidEnabled)if(n=-this.ws2.fluidProperties.viscosity*this.overlap/this.ws1.area,this.ws1.type==g.id_ShapeType_CIRCLE)i-=n*this.ws1.circle.radius*o.fluidLinearDrag/
(2*this.ws1.circle.radius*Math.PI);else{f=d=0;for(e=this.ws1.polygon.edges.head;null!=e;)h=e.elt,d+=h.length,h=n*h.length*(h.gnormx*this.nx+h.gnormy*this.ny),0<h&&(h=h*=-o.fluidVacuumDrag),f-=0.5*h*o.fluidLinearDrag,e=e.next;i+=f/d}0!=i?(e=this.b1.smass+this.b2.smass,f=d=n=0,n=e,d=0,f=e,0!=this.b1.sinertia&&(e=this.r1x*this.b1.sinertia,h=this.r1y*this.b1.sinertia,n+=h*this.r1y,d+=-h*this.r1x,f+=e*this.r1x),0!=this.b2.sinertia&&(e=this.r2x*this.b2.sinertia,h=this.r2y*this.b2.sinertia,n+=h*this.r2y,
d+=-h*this.r2x,f+=e*this.r2x),e=n*f-d*d,e!=e?(n=d=f=0,3):0==e?(e=0,0!=n?n=1/n:(n=0,e|=1),0!=f?f=1/f:(f=0,e|=2),d=0,e):(e=1/e,h=f*e,f=n*e,n=h,d*=-e,0),this.vMassa=n,this.vMassb=d,this.vMassc=f,i*=2*Math.PI,this.lgamma=1/(b*i*(2+i*b)),i=1/(1+this.lgamma),this.lgamma*=i,this.vMassa*=i,this.vMassb*=i,this.vMassc*=i):this.lgamma=this.vMassc=this.vMassb=this.vMassa=0}this.dampx*=c;this.dampy*=c;this.adamp*=c},warmStart:function(){var a=this.b1.imass;this.b1.velx-=this.dampx*a;this.b1.vely-=this.dampy*a;
a=this.b2.imass;this.b2.velx+=this.dampx*a;this.b2.vely+=this.dampy*a;this.b1.angvel-=this.b1.iinertia*(this.dampy*this.r1x-this.dampx*this.r1y);this.b2.angvel+=this.b2.iinertia*(this.dampy*this.r2x-this.dampx*this.r2y);this.b1.angvel-=this.adamp*this.b1.iinertia;this.b2.angvel+=this.adamp*this.b2.iinertia},applyImpulseVel:function(){if(!this.nodrag){var a=this.b1.angvel+this.b1.kinangvel,b=this.b2.angvel+this.b2.kinangvel,c=this.b1.velx+this.b1.kinvelx-this.r1y*a-(this.b2.velx+this.b2.kinvelx-this.r2y*
b),d=this.b1.vely+this.b1.kinvely+this.r1x*a-(this.b2.vely+this.b2.kinvely+this.r2x*b),f=this.vMassa*c+this.vMassb*d,d=this.vMassb*c+this.vMassc*d,g=this.lgamma,c=f-this.dampx*g,d=d-this.dampy*g;this.dampx+=1*c;this.dampy+=1*d;f=this.b1.imass;this.b1.velx-=c*f;this.b1.vely-=d*f;f=this.b2.imass;this.b2.velx+=c*f;this.b2.vely+=d*f;this.b1.angvel-=this.b1.iinertia*(d*this.r1x-c*this.r1y);this.b2.angvel+=this.b2.iinertia*(d*this.r2x-c*this.r2y);a=(a-b)*this.wMass-this.adamp*this.agamma;this.adamp+=a;
this.b1.angvel-=a*this.b1.iinertia;this.b2.angvel+=a*this.b2.iinertia}},__class__:nb});var ob=function(){this.pre_dt=0;this.stat=!1;this.next=null;this.hc2=this.hpc2=!1;this.c1=this.oc1=this.c2=this.oc2=null;this.__ref_vertex=0;this.__ref_edge1=this.__ref_edge2=null;this.biasCoef=0;this.rev=!1;this.kMassa=this.kMassb=this.kMassc=this.Ka=this.Kb=this.Kc=this.rMass=this.jrAcc=this.rn1a=this.rt1a=this.rn1b=this.rt1b=this.rn2a=this.rt2a=this.rn2b=this.rt2b=this.k1x=this.k1y=this.k2x=this.k2y=this.surfacex=
this.surfacey=this.lnormx=this.lnormy=this.lproj=this.radius=0;this.wrap_normal=null;this.nx=this.ny=0;this.s1=this.s2=this.contacts=this.innards=null;this.userdef_dyn_fric=this.userdef_stat_fric=this.userdef_restitution=this.userdef_rfric=!1;this.dyn_fric=this.stat_fric=this.restitution=this.rfric=0;this.outer_zn=null;aa.call(this);this.pre_dt=-1;this.contacts=new Oa;this.innards=new pf;this.type=aa.COL;this.colarb=this};i["zpp_nape.dynamics.ZPP_ColArbiter"]=ob;ob.__name__=["zpp_nape","dynamics",
"ZPP_ColArbiter"];ob.__super__=aa;ob.prototype=z(aa.prototype,{normal_validate:function(){if(this.cleared)throw"Error: Arbiter not currently in use";this.wrap_normal.zpp_inner.x=this.nx;this.wrap_normal.zpp_inner.y=this.ny;this.ws1.id>this.ws2.id&&(this.wrap_normal.zpp_inner.x=-this.wrap_normal.zpp_inner.x,this.wrap_normal.zpp_inner.y=-this.wrap_normal.zpp_inner.y)},getnormal:function(){this.wrap_normal=T.get(0,0,null);this.wrap_normal.zpp_inner._immutable=!0;this.wrap_normal.zpp_inner._inuse=!0;
this.wrap_normal.zpp_inner._validate=E(this,this.normal_validate)},injectContact:function(a,b,c,d,f,g,e){null==e&&(e=!1);for(var h=null,i=this.contacts.next;null!=i;){var y=i;if(g==y.hash){h=y;break}i=i.next}null==h?(null==Oa.zpp_pool?h=new Oa:(h=Oa.zpp_pool,Oa.zpp_pool=h.next,h.next=null),null,i=h.inner,i.jnAcc=i.jtAcc=0,h.hash=g,h.fresh=!0,h.arbiter=this,this.jrAcc=0,this.contacts.inlined_add(h),this.innards.add(i)):h.fresh=!1;h.px=a;h.py=b;this.nx=c;this.ny=d;h.dist=f;h.stamp=this.stamp;h.posOnly=
e;return h},retire:function(){this.cleared||(this.b1.arbiters.inlined_try_remove(this),this.b2.arbiters.inlined_try_remove(this),null!=this.pair&&(this.pair=this.pair.arb=null));this.b1=this.b2=null;for(this.intchange=this.active=!1;null!=this.contacts.next;){var a=this.contacts.inlined_pop_unsafe();a.arbiter=null;a.next=Oa.zpp_pool;Oa.zpp_pool=a;this.innards.inlined_pop()}this.userdef_rfric=this.userdef_restitution=this.userdef_stat_fric=this.userdef_dyn_fric=!1;this.__ref_edge1=this.__ref_edge2=
null;this.next=ob.zpp_pool;ob.zpp_pool=this;this.pre_dt=-1},cleanupContacts:function(){var a=!0,b=null,c=null,d=this.innards.next;this.hc2=!1;for(var f=this.contacts.next;null!=f;){var g=f;g.stamp+o.arbiterExpirationDelay<this.stamp?(f=this.contacts.inlined_erase(b),d=this.innards.inlined_erase(c),g.arbiter=null,g.next=Oa.zpp_pool,Oa.zpp_pool=g):(b=g.inner,c=g.active,g.active=g.stamp==this.stamp,g.active&&(a?(a=!1,this.c1=b,this.oc1=g):(this.hc2=!0,this.c2=b,this.oc2=g)),c!=g.active&&(this.contacts.modified=
!0),b=f,c=d,d=d.next,f=f.next)}this.hc2?(this.hpc2=!0,this.oc1.posOnly?(d=this.c1,this.c1=this.c2,this.c2=d,d=this.oc1,this.oc1=this.oc2,this.oc2=d,this.hc2=!1):this.oc2.posOnly&&(this.hc2=!1),this.oc1.posOnly&&(a=!0)):this.hpc2=!1;return a},preStep:function(a){this.invalidated&&(this.invalidated=!1,this.userdef_restitution||(this.restitution=this.s1.material.elasticity<=Math.NEGATIVE_INFINITY||this.s2.material.elasticity<=Math.NEGATIVE_INFINITY?0:this.s1.material.elasticity>=Math.POSITIVE_INFINITY||
this.s2.material.elasticity>=Math.POSITIVE_INFINITY?1:(this.s1.material.elasticity+this.s2.material.elasticity)/2,0>this.restitution&&(this.restitution=0),1<this.restitution&&(this.restitution=1)),this.userdef_dyn_fric||(this.dyn_fric=Math.sqrt(this.s1.material.dynamicFriction*this.s2.material.dynamicFriction)),this.userdef_stat_fric||(this.stat_fric=Math.sqrt(this.s1.material.staticFriction*this.s2.material.staticFriction)),this.userdef_rfric||(this.rfric=Math.sqrt(this.s1.material.rollingFriction*
this.s2.material.rollingFriction)));-1==this.pre_dt&&(this.pre_dt=a);var b=a/this.pre_dt;this.pre_dt=a;var c=this.b1.smass+this.b2.smass;this.hc2=!1;a=!0;this.biasCoef=this.b1.type!=g.id_BodyType_DYNAMIC||this.b2.type!=g.id_BodyType_DYNAMIC?this.continuous?o.contactContinuousStaticBiasCoef:o.contactStaticBiasCoef:this.continuous?o.contactContinuousBiasCoef:o.contactBiasCoef;this.continuous=!1;for(var d=null,f=null,e=this.innards.next,h=this.contacts.next;null!=h;){var i=h;if(i.stamp+o.arbiterExpirationDelay<
this.stamp)h=this.contacts.inlined_erase(d),e=this.innards.inlined_erase(f),i.arbiter=null,i.next=Oa.zpp_pool,Oa.zpp_pool=i;else{d=i.inner;f=i.active;i.active=i.stamp==this.stamp;if(i.active){a?(a=!1,this.c1=d,this.oc1=i):(this.hc2=!0,this.c2=d,this.oc2=i);d.r2x=i.px-this.b2.posx;d.r2y=i.py-this.b2.posy;d.r1x=i.px-this.b1.posx;d.r1y=i.py-this.b1.posy;var n=c+this.b2.sinertia*ge.sqr(d.r2x*this.nx+d.r2y*this.ny),n=n+this.b1.sinertia*ge.sqr(d.r1x*this.nx+d.r1y*this.ny);d.tMass=n<o.epsilon*o.epsilon?
0:1/n;n=c+this.b2.sinertia*ge.sqr(this.ny*d.r2x-this.nx*d.r2y);n+=this.b1.sinertia*ge.sqr(this.ny*d.r1x-this.nx*d.r1y);d.nMass=n<o.epsilon*o.epsilon?0:1/n;var y=n=0,l=this.b2.angvel+this.b2.kinangvel,n=this.b2.velx+this.b2.kinvelx-d.r2y*l,y=this.b2.vely+this.b2.kinvely+d.r2x*l,l=this.b1.angvel+this.b1.kinangvel,n=n-(this.b1.velx+this.b1.kinvelx-d.r1y*l),y=y-(this.b1.vely+this.b1.kinvely+d.r1x*l),l=this.nx*n+this.ny*y;i.elasticity=this.restitution;d.bounce=l*i.elasticity;d.bounce>-o.elasticThreshold&&
(d.bounce=0);l=y*this.nx-n*this.ny;n=o.staticFrictionThreshold;d.friction=l*l>n*n?this.dyn_fric:this.stat_fric;d.jnAcc*=b;d.jtAcc*=b}f!=i.active&&(this.contacts.modified=!0);d=h;f=e;e=e.next;h=h.next}}this.hc2?(this.hpc2=!0,this.oc1.posOnly?(e=this.c1,this.c1=this.c2,this.c2=e,e=this.oc1,this.oc1=this.oc2,this.oc2=e,this.hc2=!1):this.oc2.posOnly&&(this.hc2=!1),this.oc1.posOnly&&(a=!0)):this.hpc2=!1;this.jrAcc*=b;a||(this.rn1a=this.ny*this.c1.r1x-this.nx*this.c1.r1y,this.rt1a=this.c1.r1x*this.nx+this.c1.r1y*
this.ny,this.rn1b=this.ny*this.c1.r2x-this.nx*this.c1.r2y,this.rt1b=this.c1.r2x*this.nx+this.c1.r2y*this.ny,this.k1x=this.b2.kinvelx-this.c1.r2y*this.b2.kinangvel-(this.b1.kinvelx-this.c1.r1y*this.b1.kinangvel),this.k1y=this.b2.kinvely+this.c1.r2x*this.b2.kinangvel-(this.b1.kinvely+this.c1.r1x*this.b1.kinangvel));this.hc2&&(this.rn2a=this.ny*this.c2.r1x-this.nx*this.c2.r1y,this.rt2a=this.c2.r1x*this.nx+this.c2.r1y*this.ny,this.rn2b=this.ny*this.c2.r2x-this.nx*this.c2.r2y,this.rt2b=this.c2.r2x*this.nx+
this.c2.r2y*this.ny,this.k2x=this.b2.kinvelx-this.c2.r2y*this.b2.kinangvel-(this.b1.kinvelx-this.c2.r1y*this.b1.kinangvel),this.k2y=this.b2.kinvely+this.c2.r2x*this.b2.kinangvel-(this.b1.kinvely+this.c2.r1x*this.b1.kinangvel),this.kMassa=c+this.b1.sinertia*this.rn1a*this.rn1a+this.b2.sinertia*this.rn1b*this.rn1b,this.kMassb=c+this.b1.sinertia*this.rn1a*this.rn2a+this.b2.sinertia*this.rn1b*this.rn2b,this.kMassc=c+this.b1.sinertia*this.rn2a*this.rn2a+this.b2.sinertia*this.rn2b*this.rn2b,this.kMassa*
this.kMassa+2*this.kMassb*this.kMassb+this.kMassc*this.kMassc<o.illConditionedThreshold*(this.kMassa*this.kMassc-this.kMassb*this.kMassb)?(this.Ka=this.kMassa,this.Kb=this.kMassb,this.Kc=this.kMassc,b=this.kMassa*this.kMassc-this.kMassb*this.kMassb,b!=b?(this.kMassa=this.kMassb=this.kMassc=0,3):0==b?(b=0,0!=this.kMassa?this.kMassa=1/this.kMassa:(this.kMassa=0,b|=1),0!=this.kMassc?this.kMassc=1/this.kMassc:(this.kMassc=0,b|=2),this.kMassb=0,b):(b=1/b,c=this.kMassc*b,this.kMassc=this.kMassa*b,this.kMassa=
c,this.kMassb*=-b,0)):(this.hc2=!1,this.oc2.dist<this.oc1.dist&&(b=this.c1,this.c1=this.c2,this.c2=b),this.oc2.active=!1,this.contacts.modified=!0));this.surfacex=this.b2.svelx;this.surfacey=this.b2.svely;this.surfacex+=1*this.b1.svelx;this.surfacey+=1*this.b1.svely;this.surfacex=-this.surfacex;this.surfacey=-this.surfacey;this.rMass=this.b1.sinertia+this.b2.sinertia;0!=this.rMass&&(this.rMass=1/this.rMass);return a},warmStart:function(){var a=this.nx*this.c1.jnAcc-this.ny*this.c1.jtAcc,b=this.ny*
this.c1.jnAcc+this.nx*this.c1.jtAcc,c=this.b1.imass;this.b1.velx-=a*c;this.b1.vely-=b*c;this.b1.angvel-=this.b1.iinertia*(b*this.c1.r1x-a*this.c1.r1y);c=this.b2.imass;this.b2.velx+=a*c;this.b2.vely+=b*c;this.b2.angvel+=this.b2.iinertia*(b*this.c1.r2x-a*this.c1.r2y);this.hc2&&(a=this.nx*this.c2.jnAcc-this.ny*this.c2.jtAcc,b=this.ny*this.c2.jnAcc+this.nx*this.c2.jtAcc,c=this.b1.imass,this.b1.velx-=a*c,this.b1.vely-=b*c,this.b1.angvel-=this.b1.iinertia*(b*this.c2.r1x-a*this.c2.r1y),c=this.b2.imass,this.b2.velx+=
a*c,this.b2.vely+=b*c,this.b2.angvel+=this.b2.iinertia*(b*this.c2.r2x-a*this.c2.r2y));this.b2.angvel+=this.jrAcc*this.b2.iinertia;this.b1.angvel-=this.jrAcc*this.b1.iinertia},applyImpulseVel:function(){var a,b,c,d,f;d=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*this.b1.angvel);var g=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-(this.b1.vely+this.c1.r1x*this.b1.angvel);c=(g*this.nx-d*this.ny+this.surfacex)*this.c1.tMass;d=this.c1.friction*this.c1.jnAcc;a=this.c1.jtAcc;
f=a-c;f>d?f=d:f<-d&&(f=-d);c=f-a;this.c1.jtAcc=f;a=-this.ny*c;b=this.nx*c;this.b2.velx+=a*this.b2.imass;this.b2.vely+=b*this.b2.imass;this.b1.velx-=a*this.b1.imass;this.b1.vely-=b*this.b1.imass;this.b2.angvel+=this.rt1b*c*this.b2.iinertia;this.b1.angvel-=this.rt1a*c*this.b1.iinertia;this.hc2?(f=this.k2x+this.b2.velx-this.c2.r2y*this.b2.angvel-(this.b1.velx-this.c2.r1y*this.b1.angvel),b=this.k2y+this.b2.vely+this.c2.r2x*this.b2.angvel-(this.b1.vely+this.c2.r1x*this.b1.angvel),c=(b*this.nx-f*this.ny+
this.surfacex)*this.c2.tMass,d=this.c2.friction*this.c2.jnAcc,a=this.c2.jtAcc,f=a-c,f>d?f=d:f<-d&&(f=-d),c=f-a,this.c2.jtAcc=f,a=-this.ny*c,b=this.nx*c,this.b2.velx+=a*this.b2.imass,this.b2.vely+=b*this.b2.imass,this.b1.velx-=a*this.b1.imass,this.b1.vely-=b*this.b1.imass,this.b2.angvel+=this.rt2b*c*this.b2.iinertia,this.b1.angvel-=this.rt2a*c*this.b1.iinertia,d=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*this.b1.angvel),g=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-
(this.b1.vely+this.c1.r1x*this.b1.angvel),f=this.k2x+this.b2.velx-this.c2.r2y*this.b2.angvel-(this.b1.velx-this.c2.r1y*this.b1.angvel),b=this.k2y+this.b2.vely+this.c2.r2x*this.b2.angvel-(this.b1.vely+this.c2.r1x*this.b1.angvel),c=this.c1.jnAcc,a=this.c2.jnAcc,d=d*this.nx+g*this.ny+this.surfacey+this.c1.bounce-(this.Ka*c+this.Kb*a),f=f*this.nx+b*this.ny+this.surfacey+this.c2.bounce-(this.Kb*c+this.Kc*a),b=-(this.kMassa*d+this.kMassb*f),g=-(this.kMassb*d+this.kMassc*f),0<=b&&0<=g?(d=b-c,f=g-a,this.c1.jnAcc=
b,this.c2.jnAcc=g):(b=-this.c1.nMass*d,0<=b&&0<=this.Kb*b+f?(d=b-c,f=-a,this.c1.jnAcc=b,this.c2.jnAcc=0):(g=-this.c2.nMass*f,0<=g&&0<=this.Kb*g+d?(d=-c,f=g-a,this.c1.jnAcc=0,this.c2.jnAcc=g):0<=d&&0<=f?(d=-c,f=-a,this.c1.jnAcc=this.c2.jnAcc=0):f=d=0)),c=d+f,a=this.nx*c,b=this.ny*c,this.b2.velx+=a*this.b2.imass,this.b2.vely+=b*this.b2.imass,this.b1.velx-=a*this.b1.imass,this.b1.vely-=b*this.b1.imass,this.b2.angvel+=(this.rn1b*d+this.rn2b*f)*this.b2.iinertia,this.b1.angvel-=(this.rn1a*d+this.rn2a*f)*
this.b1.iinertia):(0!=this.radius&&(c=(this.b2.angvel-this.b1.angvel)*this.rMass,d=this.rfric*this.c1.jnAcc,a=this.jrAcc,this.jrAcc-=c,this.jrAcc>d?this.jrAcc=d:this.jrAcc<-d&&(this.jrAcc=-d),c=this.jrAcc-a,this.b2.angvel+=c*this.b2.iinertia,this.b1.angvel-=c*this.b1.iinertia),d=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*this.b1.angvel),g=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-(this.b1.vely+this.c1.r1x*this.b1.angvel),c=(this.c1.bounce+(this.nx*d+this.ny*
g)+this.surfacey)*this.c1.nMass,a=this.c1.jnAcc,f=a-c,0>f&&(f=0),c=f-a,this.c1.jnAcc=f,a=this.nx*c,b=this.ny*c,this.b2.velx+=a*this.b2.imass,this.b2.vely+=b*this.b2.imass,this.b1.velx-=a*this.b1.imass,this.b1.vely-=b*this.b1.imass,this.b2.angvel+=this.rn1b*c*this.b2.iinertia,this.b1.angvel-=this.rn1a*c*this.b1.iinertia)},applyImpulsePos:function(){if(2==this.ptype){var a=this.c1,b=0,c=0,b=this.b2.axisy*a.lr2x-this.b2.axisx*a.lr2y,c=a.lr2x*this.b2.axisx+a.lr2y*this.b2.axisy,b=b+1*this.b2.posx,c=c+
1*this.b2.posy,d=0,f=0,d=this.b1.axisy*a.lr1x-this.b1.axisx*a.lr1y,f=a.lr1x*this.b1.axisx+a.lr1y*this.b1.axisy,d=d+1*this.b1.posx,f=f+1*this.b1.posy,g=a=0,a=b-d,g=c-f,e=Math.sqrt(a*a+g*g),h=this.radius-o.collisionSlop,i=e-h;0>a*this.nx+g*this.ny&&(a=-a,g=-g,i-=this.radius);0>i&&(e<o.epsilon?0!=this.b1.smass?this.b1.posx+=10*o.epsilon:this.b2.posx+=10*o.epsilon:(i=1/e,a*=i,g*=i,b=0.5*(d+b),c=0.5*(f+c),d=b-this.b1.posx,f=c-this.b1.posy,b-=this.b2.posx,c-=this.b2.posy,d=g*d-a*f,b=g*b-a*c,c=this.b2.smass+
b*b*this.b2.sinertia+this.b1.smass+d*d*this.b1.sinertia,0!=c&&(e=-this.biasCoef*(e-h)/c,c=h=0,h=a*e,c=g*e,a=this.b1.imass,this.b1.posx-=h*a,this.b1.posy-=c*a,this.b1.delta_rot(-d*this.b1.iinertia*e),a=this.b2.imass,this.b2.posx+=h*a,this.b2.posy+=c*a,this.b2.delta_rot(b*this.b2.iinertia*e))))}else{var y=i=g=a=0,f=b=0;0==this.ptype?(a=this.b1.axisy*this.lnormx-this.b1.axisx*this.lnormy,g=this.lnormx*this.b1.axisx+this.lnormy*this.b1.axisy,h=this.lproj+(a*this.b1.posx+g*this.b1.posy),i=this.b2.axisy*
this.c1.lr1x-this.b2.axisx*this.c1.lr1y,y=this.c1.lr1x*this.b2.axisx+this.c1.lr1y*this.b2.axisy,i+=1*this.b2.posx,y+=1*this.b2.posy,this.hpc2&&(b=this.b2.axisy*this.c2.lr1x-this.b2.axisx*this.c2.lr1y,f=this.c2.lr1x*this.b2.axisx+this.c2.lr1y*this.b2.axisy,b+=1*this.b2.posx,f+=1*this.b2.posy)):(a=this.b2.axisy*this.lnormx-this.b2.axisx*this.lnormy,g=this.lnormx*this.b2.axisx+this.lnormy*this.b2.axisy,h=this.lproj+(a*this.b2.posx+g*this.b2.posy),i=this.b1.axisy*this.c1.lr1x-this.b1.axisx*this.c1.lr1y,
y=this.c1.lr1x*this.b1.axisx+this.c1.lr1y*this.b1.axisy,i+=1*this.b1.posx,y+=1*this.b1.posy,this.hpc2&&(b=this.b1.axisy*this.c2.lr1x-this.b1.axisx*this.c2.lr1y,f=this.c2.lr1x*this.b1.axisx+this.c2.lr1y*this.b1.axisy,b+=1*this.b1.posx,f+=1*this.b1.posy));e=i*a+y*g-h-this.radius;e+=o.collisionSlop;c=0;this.hpc2&&(c=b*a+f*g-h-this.radius,c+=o.collisionSlop);if(0>e||0>c){this.rev&&(a=-a,g=-g);var l=0,j=0,l=i-this.b1.posx,j=y-this.b1.posy,d=h=0,h=i-this.b2.posx,d=y-this.b2.posy,k=0,m=0,y=i=0;if(this.hpc2){k=
b-this.b1.posx;m=f-this.b1.posy;i=b-this.b2.posx;y=f-this.b2.posy;b=g*l-a*j;h=g*h-a*d;f=g*k-a*m;d=g*i-a*y;i=this.b1.smass+this.b2.smass;this.kMassa=i+this.b1.sinertia*b*b+this.b2.sinertia*h*h;this.kMassb=i+this.b1.sinertia*b*f+this.b2.sinertia*h*d;this.kMassc=i+this.b1.sinertia*f*f+this.b2.sinertia*d*d;l=y=i=0;i=this.kMassa;y=this.kMassb;l=this.kMassc;j=e*this.biasCoef;k=c*this.biasCoef;c=e=0;e=-j;c=-k;m=this.kMassa*this.kMassc-this.kMassb*this.kMassb;if(m!=m)e=c=0;else if(0==m)e=0!=this.kMassa?e/
this.kMassa:0,c=0!=this.kMassc?c/this.kMassc:0;else var m=1/m,p=m*(this.kMassc*e-this.kMassb*c),c=m*(this.kMassa*c-this.kMassb*e),e=p;0<=e&&0<=c?(i=(e+c)*this.b1.imass,this.b1.posx-=a*i,this.b1.posy-=g*i,this.b1.delta_rot(-this.b1.iinertia*(b*e+f*c)),b=(e+c)*this.b2.imass,this.b2.posx+=a*b,this.b2.posy+=g*b,this.b2.delta_rot(this.b2.iinertia*(h*e+d*c))):(e=-j/i,c=0,0<=e&&0<=y*e+k?(i=(e+c)*this.b1.imass,this.b1.posx-=a*i,this.b1.posy-=g*i,this.b1.delta_rot(-this.b1.iinertia*(b*e+f*c)),b=(e+c)*this.b2.imass,
this.b2.posx+=a*b,this.b2.posy+=g*b,this.b2.delta_rot(this.b2.iinertia*(h*e+d*c))):(e=0,c=-k/l,0<=c&&0<=y*c+j&&(i=(e+c)*this.b1.imass,this.b1.posx-=a*i,this.b1.posy-=g*i,this.b1.delta_rot(-this.b1.iinertia*(b*e+f*c)),b=(e+c)*this.b2.imass,this.b2.posx+=a*b,this.b2.posy+=g*b,this.b2.delta_rot(this.b2.iinertia*(h*e+d*c)))))}else b=g*l-a*j,h=g*h-a*d,c=this.b2.smass+h*h*this.b2.sinertia+this.b1.smass+b*b*this.b1.sinertia,0!=c&&(e=-this.biasCoef*e/c,d=c=0,c=a*e,d=g*e,a=this.b1.imass,this.b1.posx-=c*a,
this.b1.posy-=d*a,this.b1.delta_rot(-b*this.b1.iinertia*e),a=this.b2.imass,this.b2.posx+=c*a,this.b2.posy+=d*a,this.b2.delta_rot(h*this.b2.iinertia*e))}}},__class__:ob});var Oa=function(){this.length=0;this._inuse=this.modified=this.pushmod=!1;this.next=null;this.dist=this.elasticity=0;this.fresh=!1;this.stamp=this.hash=0;this.active=this.posOnly=!1;this.arbiter=this.inner=null;this.px=this.py=0;this.outer=null;this.inner=new pf};i["zpp_nape.dynamics.ZPP_Contact"]=Oa;Oa.__name__=["zpp_nape","dynamics",
"ZPP_Contact"];Oa.prototype={wrapper:function(){null==this.outer&&(Oa.internal=!0,this.outer=new lg,Oa.internal=!1,this.outer.zpp_inner=this);return this.outer},inlined_add:function(a){a._inuse=!0;a.next=this.next;this.next=a;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.next;this.next=a.next;a._inuse=!1;null==this.next&&(this.pushmod=!0);this.modified=!0;this.length--},inlined_pop_unsafe:function(){var a=this.next;this.pop();return a},
inlined_erase:function(a){var b,c;null==a?(b=this.next,this.next=c=b.next,null==this.next&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));b._inuse=!1;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:Oa};var pf=function(){this.length=0;this._inuse=this.modified=this.pushmod=!1;this.next=null;this.r1x=this.r1y=this.r2x=this.r2y=this.nMass=this.tMass=this.bounce=this.friction=this.jnAcc=this.jtAcc=this.lr1x=this.lr1y=this.lr2x=this.lr2y=0};i["zpp_nape.dynamics.ZPP_IContact"]=
pf;pf.__name__=["zpp_nape","dynamics","ZPP_IContact"];pf.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){a._inuse=!0;a.next=this.next;this.next=a;this.modified=!0;this.length++;return a},inlined_pop:function(){var a=this.next;this.next=a.next;a._inuse=!1;null==this.next&&(this.pushmod=!0);this.modified=!0;this.length--},inlined_erase:function(a){var b,c;null==a?(b=this.next,this.next=c=b.next,null==this.next&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=
!0));b._inuse=!1;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:pf};var Sb=function(){this.collisionGroup=this.collisionMask=this.sensorGroup=this.sensorMask=this.fluidGroup=this.fluidMask=0;this.next=this.outer=this.shapes=null;this.shapes=new Pd;this.collisionGroup=this.sensorGroup=this.fluidGroup=1;this.collisionMask=this.sensorMask=this.fluidMask=-1};i["zpp_nape.dynamics.ZPP_InteractionFilter"]=Sb;Sb.__name__=["zpp_nape","dynamics","ZPP_InteractionFilter"];Sb.prototype={wrapper:function(){if(null==
this.outer){this.outer=new mg;var a=this.outer.zpp_inner;a.outer=null;a.next=Sb.zpp_pool;Sb.zpp_pool=a;this.outer.zpp_inner=this}return this.outer},shouldCollide:function(a){return 0!=(this.collisionMask&a.collisionGroup)&&0!=(a.collisionMask&this.collisionGroup)},shouldSense:function(a){return 0!=(this.sensorMask&a.sensorGroup)&&0!=(a.sensorMask&this.sensorGroup)},shouldFlow:function(a){return 0!=(this.fluidMask&a.fluidGroup)&&0!=(a.fluidMask&this.fluidGroup)},invalidate:function(){for(var a=this.shapes.head;null!=
a;)a.elt.invalidate_filter(),a=a.next},__class__:Sb};var gh=function(){this.depth=0;this.group=this.interactors=null;this.ignore=!1;this.outer=null};i["zpp_nape.dynamics.ZPP_InteractionGroup"]=gh;gh.__name__=["zpp_nape","dynamics","ZPP_InteractionGroup"];gh.prototype={__class__:gh};var W=function(){this.wrap_max=null;this.maxx=this.maxy=0;this.wrap_min=null;this.minx=this.miny=0;this.outer=this.next=null;this._immutable=!1;this._invalidate=this._validate=null};i["zpp_nape.geom.ZPP_AABB"]=W;W.__name__=
["zpp_nape","geom","ZPP_AABB"];W.get=function(a,b,c,d){var f;null==W.zpp_pool?f=new W:(f=W.zpp_pool,W.zpp_pool=f.next,f.next=null);null;f.minx=a;f.miny=b;f.maxx=c;f.maxy=d;return f};W.prototype={validate:function(){null!=this._validate&&this._validate()},wrapper:function(){if(null==this.outer){this.outer=new ng;var a=this.outer.zpp_inner;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null);a.wrap_min=a.wrap_max=null;a._invalidate=null;a._validate=null;a.next=W.zpp_pool;W.zpp_pool=a;this.outer.zpp_inner=
this}return this.outer},width:function(){return this.maxx-this.minx},perimeter:function(){return 2*(this.maxx-this.minx+(this.maxy-this.miny))},intersectY:function(a){return!(a.miny>this.maxy||this.miny>a.maxy)},intersect:function(a){return a.miny<=this.maxy&&this.miny<=a.maxy&&a.minx<=this.maxx&&this.minx<=a.maxx},combine:function(a){a.minx<this.minx&&(this.minx=a.minx);a.maxx>this.maxx&&(this.maxx=a.maxx);a.miny<this.miny&&(this.miny=a.miny);a.maxy>this.maxy&&(this.maxy=a.maxy)},contains:function(a){return a.minx>=
this.minx&&a.miny>=this.miny&&a.maxx<=this.maxx&&a.maxy<=this.maxy},setCombine:function(a,b){this.minx=a.minx<b.minx?a.minx:b.minx;this.miny=a.miny<b.miny?a.miny:b.miny;this.maxx=a.maxx>b.maxx?a.maxx:b.maxx;this.maxy=a.maxy>b.maxy?a.maxy:b.maxy},setExpand:function(a,b){this.minx=a.minx-b;this.miny=a.miny-b;this.maxx=a.maxx+b;this.maxy=a.maxy+b},toString:function(){return"{ x: "+this.minx+" y: "+this.miny+" w: "+(this.maxx-this.minx)+" h: "+(this.maxy-this.miny)+" }"},__class__:W};var Qd=function(){this.length=
0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_Vec2"]=Qd;Qd.__name__=["zpp_nape","util","ZNPList_ZPP_Vec2"];Qd.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==kb.zpp_pool?b=new kb:(b=kb.zpp_pool,kb.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){var c;null==kb.zpp_pool?c=new kb:(c=
kb.zpp_pool,kb.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=kb.zpp_pool;kb.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},
erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=kb.zpp_pool;kb.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Qd};var F=function(){};
i["zpp_nape.geom.ZPP_Collide"]=F;F.__name__=["zpp_nape","geom","ZPP_Collide"];F.contactCollide=function(a,b,c,d){if(b.type==g.id_ShapeType_POLYGON)if(a.type==g.id_ShapeType_POLYGON){for(var f=!0,e=-1.0E100,h=-1,i=null,n=null,y=a.polygon.edges.head;null!=y;){for(var l=y.elt,j=1.0E100,k=b.polygon.gverts.next;null!=k;){var m=k,m=l.gnormx*m.x+l.gnormy*m.y;m<j&&(j=m);if(j-l.gprojection<=e)break;k=k.next}j-=l.gprojection;if(0<=j){f=!1;break}j>e&&(e=j,i=l,h=1);y=y.next}if(f){for(y=b.polygon.edges.head;null!=
y;){l=y.elt;j=1.0E100;for(k=a.polygon.gverts.next;null!=k;){m=k;m=l.gnormx*m.x+l.gnormy*m.y;m<j&&(j=m);if(j-l.gprojection<=e)break;k=k.next}j-=l.gprojection;if(0<=j){f=!1;break}j>e&&(e=j,n=l,h=2);y=y.next}if(f){1==h?(a=b.polygon,b=i,n=1):(a=a.polygon,b=n,n=-1);i=null;f=1.0E100;for(e=a.edges.head;null!=e;)y=e.elt,l=b.gnormx*y.gnormx+b.gnormy*y.gnormy,l<f&&(f=l,i=y),e=e.next;var e=f=0,f=i.gp0.x,e=i.gp0.y,l=y=0,y=i.gp1.x,l=i.gp1.y,k=j=0,j=y-f,k=l-e,p=b.gnormy*f-b.gnormx*e,m=b.gnormy*y-b.gnormx*l,q=1/
(m-p),p=(-b.tp1-p)*q;p>o.epsilon&&(f+=j*p,e+=k*p);m=(-b.tp0-m)*q;m<-o.epsilon&&(y+=j*m,l+=k*m);k=j=0;k=n;j=b.gnormx*k;k*=b.gnormy;c.lnormx=b.lnormx;c.lnormy=b.lnormy;c.lproj=b.lprojection;c.radius=0;c.rev=d!=(-1==n);c.ptype=c.rev?1:0;m=f*b.gnormx+e*b.gnormy-b.gprojection;n=y*b.gnormx+l*b.gnormy-b.gprojection;if(0<m&&0<n)return!1;d&&(j=-j,k=-k);d=c.injectContact(f-0.5*b.gnormx*m,e-0.5*b.gnormy*m,j,k,m,c.rev?1:0,0<m);f-=1*a.body.posx;e-=1*a.body.posy;d.inner.lr1x=f*a.body.axisy+e*a.body.axisx;d.inner.lr1y=
e*a.body.axisy-f*a.body.axisx;d=c.injectContact(y-0.5*b.gnormx*n,l-0.5*b.gnormy*n,j,k,n,c.rev?0:1,0<n);y-=1*a.body.posx;l-=1*a.body.posy;d.inner.lr1x=y*a.body.axisy+l*a.body.axisx;d.inner.lr1y=l*a.body.axisy-y*a.body.axisx;1==h?(c.__ref_edge1=b,c.__ref_edge2=i):(c.__ref_edge2=b,c.__ref_edge1=i);return!0}}}else{n=-1.0E100;i=!0;f=h=null;e=b.polygon.gverts.next;for(y=b.polygon.edges.head;null!=y;){l=y.elt;j=l.gnormx*a.circle.worldCOMx+l.gnormy*a.circle.worldCOMy-l.gprojection-a.circle.radius;if(0<j){i=
!1;break}j>n&&(n=j,h=l,f=e);e=e.next;y=y.next}if(i){i=f;f=null==f.next?b.polygon.gverts.next:f.next;e=a.circle.worldCOMy*h.gnormx-a.circle.worldCOMx*h.gnormy;if(e<=i.y*h.gnormx-i.x*h.gnormy)return n=a.circle.radius,e=f=0,f=i.x-a.circle.worldCOMx,e=i.y-a.circle.worldCOMy,y=f*f+e*e,y>n*n?n=null:y<o.epsilon*o.epsilon?n=c.injectContact(a.circle.worldCOMx,a.circle.worldCOMy,1,0,-n,0,null):(y=1/Math.sqrt(y),l=y<o.epsilon?1.0E100:1/y,j=0.5+(a.circle.radius-0.5*n)*y,n=d?c.injectContact(a.circle.worldCOMx+
f*j,a.circle.worldCOMy+e*j,-f*y,-e*y,l-n,0,null):c.injectContact(a.circle.worldCOMx+f*j,a.circle.worldCOMy+e*j,f*y,e*y,l-n,0,null)),null!=n&&(f=n.inner,c.ptype=2,y=e=0,e=i.x-b.polygon.body.posx,y=i.y-b.polygon.body.posy,c.__ref_edge1=h,c.__ref_vertex=-1,d?(f.lr1x=e*b.polygon.body.axisy+y*b.polygon.body.axisx,f.lr1y=y*b.polygon.body.axisy-e*b.polygon.body.axisx,f.lr2x=a.circle.localCOMx,f.lr2y=a.circle.localCOMy):(f.lr2x=e*b.polygon.body.axisy+y*b.polygon.body.axisx,f.lr2y=y*b.polygon.body.axisy-e*
b.polygon.body.axisx,f.lr1x=a.circle.localCOMx,f.lr1y=a.circle.localCOMy),c.radius=a.circle.radius),null!=n;if(e>=f.y*h.gnormx-f.x*h.gnormy)return i=a.circle.radius,e=n=0,n=f.x-a.circle.worldCOMx,e=f.y-a.circle.worldCOMy,y=n*n+e*e,y>i*i?i=null:y<o.epsilon*o.epsilon?i=c.injectContact(a.circle.worldCOMx,a.circle.worldCOMy,1,0,-i,0,null):(y=1/Math.sqrt(y),l=y<o.epsilon?1.0E100:1/y,j=0.5+(a.circle.radius-0.5*i)*y,i=d?c.injectContact(a.circle.worldCOMx+n*j,a.circle.worldCOMy+e*j,-n*y,-e*y,l-i,0,null):
c.injectContact(a.circle.worldCOMx+n*j,a.circle.worldCOMy+e*j,n*y,e*y,l-i,0,null)),null!=i&&(n=i.inner,c.ptype=2,y=e=0,e=f.x-b.polygon.body.posx,y=f.y-b.polygon.body.posy,c.__ref_edge1=h,c.__ref_vertex=1,d?(n.lr1x=e*b.polygon.body.axisy+y*b.polygon.body.axisx,n.lr1y=y*b.polygon.body.axisy-e*b.polygon.body.axisx,n.lr2x=a.circle.localCOMx,n.lr2y=a.circle.localCOMy):(n.lr2x=e*b.polygon.body.axisy+y*b.polygon.body.axisx,n.lr2y=y*b.polygon.body.axisy-e*b.polygon.body.axisx,n.lr1x=a.circle.localCOMx,n.lr1y=
a.circle.localCOMy),c.radius=a.circle.radius),null!=i;i=b=0;i=a.circle.radius+0.5*n;b=h.gnormx*i;i*=h.gnormy;e=f=0;f=a.circle.worldCOMx-b;e=a.circle.worldCOMy-i;b=d?c.injectContact(f,e,h.gnormx,h.gnormy,n,0,null):c.injectContact(f,e,-h.gnormx,-h.gnormy,n,0,null);c.ptype=d?0:1;c.lnormx=h.lnormx;c.lnormy=h.lnormy;c.rev=!d;c.lproj=h.lprojection;c.radius=a.circle.radius;b.inner.lr1x=a.circle.localCOMx;b.inner.lr1y=a.circle.localCOMy;c.__ref_edge1=h;c.__ref_vertex=0;return!0}}else if(h=a.circle.radius+
b.circle.radius,n=i=0,i=b.circle.worldCOMx-a.circle.worldCOMx,n=b.circle.worldCOMy-a.circle.worldCOMy,f=i*i+n*n,f>h*h?h=null:f<o.epsilon*o.epsilon?h=c.injectContact(a.circle.worldCOMx,a.circle.worldCOMy,1,0,-h,0,null):(f=1/Math.sqrt(f),e=f<o.epsilon?1.0E100:1/f,y=0.5+(a.circle.radius-0.5*h)*f,h=d?c.injectContact(a.circle.worldCOMx+i*y,a.circle.worldCOMy+n*y,-i*f,-n*f,e-h,0,null):c.injectContact(a.circle.worldCOMx+i*y,a.circle.worldCOMy+n*y,i*f,n*f,e-h,0,null)),null!=h)return h=h.inner,d?(h.lr1x=b.circle.localCOMx,
h.lr1y=b.circle.localCOMy,h.lr2x=a.circle.localCOMx,h.lr2y=a.circle.localCOMy):(h.lr1x=a.circle.localCOMx,h.lr1y=a.circle.localCOMy,h.lr2x=b.circle.localCOMx,h.lr2y=b.circle.localCOMy),c.radius=a.circle.radius+b.circle.radius,c.ptype=2,!0;return!1};F.testCollide_safe=function(a,b){if(b.type==g.id_ShapeType_CIRCLE)var c=a,a=b,b=c;return F.testCollide(a,b)};F.testCollide=function(a,b){if(b.type==g.id_ShapeType_POLYGON){if(a.type==g.id_ShapeType_POLYGON){for(var c=!0,d=a.polygon.edges.head;null!=d;){for(var f=
d.elt,e=1.0E100,h=b.polygon.gverts.next;null!=h;){var i=h,i=f.gnormx*i.x+f.gnormy*i.y;i<e&&(e=i);h=h.next}e-=f.gprojection;if(0<e){c=!1;break}d=d.next}if(c){for(d=b.polygon.edges.head;null!=d;){f=d.elt;e=1.0E100;for(h=a.polygon.gverts.next;null!=h;)i=h,i=f.gnormx*i.x+f.gnormy*i.y,i<e&&(e=i),h=h.next;e-=f.gprojection;if(0<e){c=!1;break}d=d.next}return c}}else{d=c=null;f=!0;e=-1.0E100;h=b.polygon.gverts.next;for(i=b.polygon.edges.head;null!=i;){var n=i.elt,j=n.gnormx*a.circle.worldCOMx+n.gnormy*a.circle.worldCOMy-
n.gprojection-a.circle.radius;if(0<j){f=!1;break}j>e&&(e=j,c=n,d=h);h=h.next;i=i.next}if(f){f=d;d=null==d.next?b.polygon.gverts.next:d.next;e=a.circle.worldCOMy*c.gnormx-a.circle.worldCOMx*c.gnormy;if(e<=f.y*c.gnormx-f.x*c.gnormy)return c=a.circle.radius,e=d=0,d=f.x-a.circle.worldCOMx,e=f.y-a.circle.worldCOMy,d*d+e*e<=c*c;return e>=d.y*c.gnormx-d.x*c.gnormy?(c=a.circle.radius,e=f=0,f=d.x-a.circle.worldCOMx,e=d.y-a.circle.worldCOMy,f*f+e*e<=c*c):!0}}return!1}c=a.circle.radius+b.circle.radius;f=d=0;
d=b.circle.worldCOMx-a.circle.worldCOMx;f=b.circle.worldCOMy-a.circle.worldCOMy;return d*d+f*f<=c*c};F.flowCollide=function(a,b,c){if(b.type==g.id_ShapeType_POLYGON){if(a.type==g.id_ShapeType_POLYGON){for(var d=[],f=[],e=!0,h=!0,i=a.polygon.edges.head;null!=i;){for(var n=i.elt,j=1.0E100,l=0,k=b.polygon.gverts.next;null!=k;){var m=k,p=n.gnormx*m.x+n.gnormy*m.y;p<j&&(j=p);p>=n.gprojection+o.epsilon&&(f[l]=!0,h=!1);l++;k=k.next}j-=n.gprojection;if(0<j){e=!1;break}i=i.next}if(h)return b.polygon.validate_worldCOM(),
c.overlap=b.polygon.area,c.centroidx=b.polygon.worldCOMx,c.centroidy=b.polygon.worldCOMy,null,!0;if(e){for(var h=!0,q=b.polygon.edges.head;null!=q;){for(var t=q.elt,u=1.0E100,w=0,v=a.polygon.gverts.next;null!=v;){var B=v,z=t.gnormx*B.x+t.gnormy*B.y;z<u&&(u=z);z>=t.gprojection+o.epsilon&&(d[w]=!0,h=!1);w++;v=v.next}u-=t.gprojection;if(0<u){e=!1;break}q=q.next}if(h)return a.polygon.validate_worldCOM(),c.overlap=a.polygon.area,c.centroidx=a.polygon.worldCOMx,c.centroidy=a.polygon.worldCOMy,null,!0;if(e){for(;null!=
F.flowpoly.head;){var E=F.flowpoly.pop_unsafe();if(!E._inuse){var C=E;null!=C.outer&&(C.outer.zpp_inner=null,C.outer=null);C._isimmutable=null;C._validate=null;C._invalidate=null;C.next=X.zpp_pool;X.zpp_pool=C}}for(var s=null,D=!1,x=a.polygon.gverts.next,H=0,A=b.polygon.gverts.next,J=0,N=0,L=b.polygon.edgeCnt;N<L;){var M=N++;if(f[M])A=A.next;else{J=M;break}}if(null==A){for(var A=b.polygon.gverts.next,D=!0,P=0,Q=a.polygon.edgeCnt;P<Q;){var T=P++;if(d[T])x=x.next;else{H=T;break}}null==x?x=a.polygon.gverts.next:
(F.flowpoly.add(x),s=F.flowpoly.head.elt)}else F.flowpoly.add(A),s=F.flowpoly.head.elt;var O=1;if(null==F.flowpoly.head){for(var ba=!0,aa=a.polygon.gverts.next,G=aa,U=aa.next;null!=U;){for(var K=U,V=2,Y=b.polygon.gverts.next,Z=Y,ca=Y.next;null!=ca;){var sa=ca,ea=0;(function(){var a=0,b=0,a=G.x-Z.x,b=G.y-Z.y,c=0,d=0,c=K.x-G.x,d=K.y-G.y,f=0,g=0,f=sa.x-Z.x,g=sa.y-Z.y,e=d*f-c*g;e*e>o.epsilon*o.epsilon?(e=1/e,f=(g*a-f*b)*e,f>o.epsilon&&f<1-o.epsilon?(a=(d*a-c*b)*e,a>o.epsilon&&a<1-o.epsilon?(ea=f,a=!0):
a=!1):a=!1):a=!1;return a})(this)&&ea<V&&(V=ea,A=Y);Y=ca;Z=sa;ca=ca.next}var qa=ca=b.polygon.gverts.next,fa=0;(function(){var a=0,b=0,a=G.x-Z.x,b=G.y-Z.y,c=0,d=0,c=K.x-G.x,d=K.y-G.y,f=0,g=0,f=qa.x-Z.x,g=qa.y-Z.y,e=d*f-c*g;e*e>o.epsilon*o.epsilon?(e=1/e,f=(g*a-f*b)*e,f>o.epsilon&&f<1-o.epsilon?(a=(d*a-c*b)*e,a>o.epsilon&&a<1-o.epsilon?(fa=f,a=!0):a=!1):a=!1):a=!1;return a})(this)&&fa<V&&(V=fa,A=Y);if(2!=V){var ja=0,ga=0,Ba=V,ja=G.x+(K.x-G.x)*Ba,ga=G.y+(K.y-G.y)*Ba,s=X.get(ja,ga,null);F.flowpoly.add(s);
D=!0;x=aa;ba=!1;break}aa=U;G=K;U=U.next}if(ba){for(var S=U=a.polygon.gverts.next,r=2,ma=b.polygon.gverts.next,la=ma,na=ma.next;null!=na;){var W=na,Ta=0;(function(){var a=0,b=0,a=G.x-la.x,b=G.y-la.y,c=0,d=0,c=S.x-G.x,d=S.y-G.y,f=0,g=0,f=W.x-la.x,g=W.y-la.y,e=d*f-c*g;e*e>o.epsilon*o.epsilon?(e=1/e,f=(g*a-f*b)*e,f>o.epsilon&&f<1-o.epsilon?(a=(d*a-c*b)*e,a>o.epsilon&&a<1-o.epsilon?(Ta=f,a=!0):a=!1):a=!1):a=!1;return a})(this)&&Ta<r&&(r=Ta,A=ma);ma=na;la=W;na=na.next}var da=na=b.polygon.gverts.next,oa=
0;(function(){var a=0,b=0,a=G.x-la.x,b=G.y-la.y,c=0,d=0,c=S.x-G.x,d=S.y-G.y,f=0,g=0,f=da.x-la.x,g=da.y-la.y,e=d*f-c*g;e*e>o.epsilon*o.epsilon?(e=1/e,f=(g*a-f*b)*e,f>o.epsilon&&f<1-o.epsilon?(a=(d*a-c*b)*e,a>o.epsilon&&a<1-o.epsilon?(oa=f,a=!0):a=!1):a=!1):a=!1;return a})(this)&&oa<r&&(r=oa,A=ma);if(2!=r){var pa=0,va=0,Eh=r,pa=G.x+(S.x-G.x)*Eh,va=G.y+(S.y-G.y)*Eh,s=X.get(pa,va,null);F.flowpoly.add(s);D=!0;x=aa}}O=2}for(;;)if(D)if(x=x.next,H++,null==x&&(x=a.polygon.gverts.next,H=0),d[H]){var R=F.flowpoly.head.elt,
hh=x,ha=A,ih=A.next;null==ih&&(ih=b.polygon.gverts.next);var ra=-1,za=null,ua=0,Ia=0,Ma=ih,$=ih;do{var Na=$,$a=0;if(function(){var a=0,b=0,a=ha.x-R.x,b=ha.y-R.y,c=0,d=0,c=Na.x-ha.x,d=Na.y-ha.y,f=0,g=0,f=hh.x-R.x,g=hh.y-R.y,e=d*f-c*g;e*e>o.epsilon*o.epsilon?(e=1/e,f=(g*a-f*b)*e,f>o.epsilon&&f<1-o.epsilon?(a=(d*a-c*b)*e,a>o.epsilon&&a<1-o.epsilon?($a=f,a=!0):a=!1):a=!1):a=!1;return a}(this)&&$a>=ra)if(za=A,ua=J,++Ia==O){ra=$a;$=Ma;break}else ra=$a;ha=Na;A=$;J++;J>=b.polygon.edgeCnt&&(J=0);$=$.next;
null==$&&($=b.polygon.gverts.next)}while(0);for(;$!=Ma;){var ia=$,Ha=0;if(function(){var a=0,b=0,a=ha.x-R.x,b=ha.y-R.y,c=0,d=0,c=ia.x-ha.x,d=ia.y-ha.y,f=0,g=0,f=hh.x-R.x,g=hh.y-R.y,e=d*f-c*g;e*e>o.epsilon*o.epsilon?(e=1/e,f=(g*a-f*b)*e,f>o.epsilon&&f<1-o.epsilon?(a=(d*a-c*b)*e,a>o.epsilon&&a<1-o.epsilon?(Ha=f,a=!0):a=!1):a=!1):a=!1;return a}(this)&&Ha>=ra)if(za=A,ua=J,++Ia==O){ra=Ha;$=Ma;break}else ra=Ha;ha=ia;A=$;J++;J>=b.polygon.edgeCnt&&(J=0);$=$.next;null==$&&($=b.polygon.gverts.next)}if(null==
za)break;var Ea=za,Qa=za.next;null==Qa&&(Qa=b.polygon.gverts.next);var Pa=Qa,Ya=0,Ah=0,Ga=ra,Ya=Ea.x+(Pa.x-Ea.x)*Ga,Ah=Ea.y+(Pa.y-Ea.y)*Ga;if(null!=s&&sb.vec_dsq(Ya,Ah,s.x,s.y)<o.epsilon)break;F.flowpoly.add(X.get(Ya,Ah,null));null==s&&(s=F.flowpoly.head.elt);A=za;J=ua;D=!D;O=2}else{var Oa=x;if(null!=s&&sb.vec_dsq(Oa.x,Oa.y,s.x,s.y)<o.epsilon)break;F.flowpoly.add(Oa);null==s&&(s=F.flowpoly.head.elt);O=1}else if(A=A.next,J++,null==A&&(A=b.polygon.gverts.next,J=0),f[J]){var ta=F.flowpoly.head.elt,Ka=
A,I=x,ib=x.next;null==ib&&(ib=a.polygon.gverts.next);var ya=-1,wa=null,Ra=0,fb=0,Sa=ib,Dc=ib;do{var Aa=Dc,hb=0;if(function(){var a=0,b=0,a=I.x-ta.x,b=I.y-ta.y,c=0,d=0,c=Aa.x-I.x,d=Aa.y-I.y,f=0,g=0,f=Ka.x-ta.x,g=Ka.y-ta.y,e=d*f-c*g;e*e>o.epsilon*o.epsilon?(e=1/e,f=(g*a-f*b)*e,f>o.epsilon&&f<1-o.epsilon?(a=(d*a-c*b)*e,a>o.epsilon&&a<1-o.epsilon?(hb=f,a=!0):a=!1):a=!1):a=!1;return a}(this)&&hb>=ya)if(wa=x,Ra=H,++fb==O){ya=hb;Dc=Sa;break}else ya=hb;I=Aa;x=Dc;H++;H>=a.polygon.edgeCnt&&(H=0);Dc=Dc.next;
null==Dc&&(Dc=a.polygon.gverts.next)}while(0);for(;Dc!=Sa;){var bb=Dc,nb=0;if(function(){var a=0,b=0,a=I.x-ta.x,b=I.y-ta.y,c=0,d=0,c=bb.x-I.x,d=bb.y-I.y,f=0,g=0,f=Ka.x-ta.x,g=Ka.y-ta.y,e=d*f-c*g;e*e>o.epsilon*o.epsilon?(e=1/e,f=(g*a-f*b)*e,f>o.epsilon&&f<1-o.epsilon?(a=(d*a-c*b)*e,a>o.epsilon&&a<1-o.epsilon?(nb=f,a=!0):a=!1):a=!1):a=!1;return a}(this)&&nb>=ya)if(wa=x,Ra=H,++fb==O){ya=nb;Dc=Sa;break}else ya=nb;I=bb;x=Dc;H++;H>=a.polygon.edgeCnt&&(H=0);Dc=Dc.next;null==Dc&&(Dc=a.polygon.gverts.next)}if(null==
wa)break;var ob=wa,gb=wa.next;null==gb&&(gb=a.polygon.gverts.next);var jb=gb,mb=0,ab=0,rb=ya,mb=ob.x+(jb.x-ob.x)*rb,ab=ob.y+(jb.y-ob.y)*rb;if(null!=s&&sb.vec_dsq(mb,ab,s.x,s.y)<o.epsilon)break;F.flowpoly.add(X.get(mb,ab,null));null==s&&(s=F.flowpoly.head.elt);x=wa;H=Ra;D=!D;O=2}else{var kb=A;if(null!=s&&sb.vec_dsq(kb.x,kb.y,s.x,s.y)<o.epsilon)break;F.flowpoly.add(kb);null==s&&(s=F.flowpoly.head.elt);O=1}if(null!=F.flowpoly.head&&null!=F.flowpoly.head.next&&null!=F.flowpoly.head.next.next){for(var Rd=
0,xa=0,he=0,Rd=he=xa=0,Ec=F.flowpoly.head,Va=Ec.elt,Ec=Ec.next,Ua=Ec.elt,Ec=Ec.next;null!=Ec;)var qf=Ec.elt,Rd=Rd+Ua.x*(qf.y-Va.y),Ab=qf.y*Ua.x-qf.x*Ua.y,xa=xa+(Ua.x+qf.x)*Ab,he=he+(Ua.y+qf.y)*Ab,Va=Ua,Ua=qf,Ec=Ec.next;var Ec=F.flowpoly.head,rf=Ec.elt,Rd=Rd+Ua.x*(rf.y-Va.y),Fh=rf.y*Ua.x-rf.x*Ua.y,xa=xa+(Ua.x+rf.x)*Fh,he=he+(Ua.y+rf.y)*Fh,Va=Ua,Ua=rf,Ec=Ec.next,db=Ec.elt,Rd=Rd+Ua.x*(db.y-Va.y),Fb=db.y*Ua.x-db.x*Ua.y,xa=xa+(Ua.x+db.x)*Fb,he=he+(Ua.y+db.y)*Fb,Rd=0.5*Rd,Gb=1/(6*Rd),xa=xa*Gb,he=he*Gb;
c.overlap=-Rd;c.centroidx=xa;c.centroidy=he;null;return!0}}}return!1}for(var lb=[],Ib=!0,Xa=null,pb=null,Kb=-1.0E100,Lb=!0,Cb=b.polygon.gverts.next,Sb=0,ub=b.polygon.edges.head;null!=ub;){var Da=ub.elt,Wa=Da.gnormx*a.circle.worldCOMx+Da.gnormy*a.circle.worldCOMy;if(Wa>Da.gprojection+a.circle.radius){Lb=!1;break}else Wa+a.circle.radius>Da.gprojection+o.epsilon&&(Ib=!1,lb[Sb]=!0);Wa-=Da.gprojection+a.circle.radius;Wa>Kb&&(Kb=Wa,Xa=Da,pb=Cb);Cb=Cb.next;Sb++;ub=ub.next}if(Lb){if(Ib)return c.overlap=a.circle.area,
c.centroidx=a.circle.worldCOMx,c.centroidy=a.circle.worldCOMy,null,!0;var qb=pb,cb;cb=null==pb.next?b.polygon.gverts.next:pb.next;var cc=a.circle.worldCOMy*Xa.gnormx-a.circle.worldCOMx*Xa.gnormy;if(cc<=qb.y*Xa.gnormx-qb.x*Xa.gnormy?function(){var b=a.circle.radius,c=0,d=0,c=qb.x-a.circle.worldCOMx,d=qb.y-a.circle.worldCOMy;return c*c+d*d<=b*b}(this):cc>=cb.y*Xa.gnormx-cb.x*Xa.gnormy?function(){var b=a.circle.radius,c=0,d=0,c=cb.x-a.circle.worldCOMx,d=cb.y-a.circle.worldCOMy;return c*c+d*d<=b*b}(this):
1){for(var Db=[],Tb=0,lc=!0,kc=null,Ca=0,tb=b.polygon.gverts.next;null!=tb;){var sc=tb,Tc=sb.vec_dsq(sc.x,sc.y,a.circle.worldCOMx,a.circle.worldCOMy);(Db[Tb]=Tc<=a.circle.radius*a.circle.radius)?(Ca=Tb,kc=tb):lc=!1;Tb++;tb=tb.next}if(lc)return b.polygon.validate_worldCOM(),c.overlap=b.polygon.area,c.centroidx=b.polygon.worldCOMx,c.centroidy=b.polygon.worldCOMy,null,!0;for(;null!=F.flowpoly.head;){var tc=F.flowpoly.pop_unsafe();if(!tc._inuse){var Za=tc;null!=Za.outer&&(Za.outer.zpp_inner=null,Za.outer=
null);Za._isimmutable=null;Za._validate=null;Za._invalidate=null;Za.next=X.zpp_pool;X.zpp_pool=Za}}F.flowsegs.clear();var wb=null,Fa=1;null==kc?(kc=b.polygon.gverts.next,Fa=2):F.flowpoly.add(wb=kc);for(;0!=Fa;)if(1==Fa)if(kc=kc.next,null==kc&&(kc=b.polygon.gverts.next),Ca++,Ca>=b.polygon.edgeCnt&&(Ca=0),Db[Ca]){if(sb.vec_dsq(wb.x,wb.y,kc.x,kc.y)<o.epsilon)break;F.flowpoly.add(kc)}else{var Ja=F.flowpoly.head.elt,Mb=kc,Nb=0,Ob=0,Nb=Mb.x-Ja.x,Ob=Mb.y-Ja.y,Pb=0,Qb=0,Pb=Ja.x-a.circle.worldCOMx,Qb=Ja.y-
a.circle.worldCOMy,Eb=Nb*Nb+Ob*Ob,Rb=2*(Pb*Nb+Qb*Ob),wc=Math.sqrt(Rb*Rb-4*Eb*(Pb*Pb+Qb*Qb-a.circle.radius*a.circle.radius)),Eb=1/(2*Eb),xc=(-Rb-wc)*Eb,gc=0,hc=0,yc=xc<o.epsilon?(-Rb+wc)*Eb:xc,gc=Ja.x+(Mb.x-Ja.x)*yc,hc=Ja.y+(Mb.y-Ja.y)*yc;if(sb.vec_dsq(wb.x,wb.y,gc,hc)<o.epsilon)break;F.flowpoly.add(X.get(gc,hc,null));Fa=2}else if(2==Fa){var Ub=kc.next;null==Ub&&(Ub=b.polygon.gverts.next);var ka=kc,Fa=0,eb=Ub,xb=Ub;do{var La=xb,Vb=Ca+1;Vb==b.polygon.edgeCnt&&(Vb=0);if(lb[Ca])if(Db[Vb]){var Wb=0,Yb=
0,Wb=La.x-ka.x,Yb=La.y-ka.y,Zb=0,$b=0,Zb=ka.x-a.circle.worldCOMx,$b=ka.y-a.circle.worldCOMy,Hb=Wb*Wb+Yb*Yb,ac=2*(Zb*Wb+$b*Yb),Pc=Math.sqrt(ac*ac-4*Hb*(Zb*Zb+$b*$b-a.circle.radius*a.circle.radius)),Hb=1/(2*Hb),Rc=(-ac-Pc)*Hb,uc=0,vc=0,Xc=Rc<o.epsilon?(-ac+Pc)*Hb:Rc,uc=ka.x+(La.x-ka.x)*Xc,vc=ka.y+(La.y-ka.y)*Xc;if(sb.vec_dsq(wb.x,wb.y,uc,vc)<o.epsilon){Fa=0;xb=eb;break}var Zc=X.get(uc,vc,null);F.flowsegs.add(F.flowpoly.head.elt);F.flowsegs.add(Zc);F.flowpoly.add(Zc);Fa=1;xb=eb;break}else{var ic=0,jc=
0,Lc,oc=0,pc=0,oc=La.x-ka.x,pc=La.y-ka.y,qc=0,rc=0,qc=ka.x-a.circle.worldCOMx,rc=ka.y-a.circle.worldCOMy,Jb=oc*oc+pc*pc,dc=2*(qc*oc+rc*pc),Bb=dc*dc-4*Jb*(qc*qc+rc*rc-a.circle.radius*a.circle.radius);Bb*Bb<o.epsilon?(ic=0>Bb?10:jc=-dc/(2*Jb),Lc=!1):(Bb=Math.sqrt(Bb),Jb=1/(2*Jb),ic=(-dc-Bb)*Jb,jc=(-dc+Bb)*Jb,Lc=!0);if(ic<1-o.epsilon&&jc>o.epsilon){var Qc=0,Sc=0,fd=ic,Qc=ka.x+(La.x-ka.x)*fd,Sc=ka.y+(La.y-ka.y)*fd;if(null!=wb&&sb.vec_dsq(wb.x,wb.y,Qc,Sc)<o.epsilon){Fa=0;xb=eb;break}var gd=X.get(Qc,Sc,
null);null!=F.flowpoly.head&&(F.flowsegs.add(F.flowpoly.head.elt),F.flowsegs.add(gd));F.flowpoly.add(gd);null==wb&&(wb=F.flowpoly.head.elt);if(Lc){var id=0,jd=0,kd=jc,id=ka.x+(La.x-ka.x)*kd,jd=ka.y+(La.y-ka.y)*kd;F.flowpoly.add(X.get(id,jd,null))}}}ka=La;kc=xb;Ca=Vb;xb=xb.next;null==xb&&(xb=b.polygon.gverts.next)}while(0);for(;xb!=eb;){var Sd=xb,Ac=Ca+1;Ac==b.polygon.edgeCnt&&(Ac=0);if(lb[Ca])if(Db[Ac]){var Gc=0,Hc=0,Gc=Sd.x-ka.x,Hc=Sd.y-ka.y,Ic=0,Jc=0,Ic=ka.x-a.circle.worldCOMx,Jc=ka.y-a.circle.worldCOMy,
nc=Gc*Gc+Hc*Hc,Kc=2*(Ic*Gc+Jc*Hc),ld=Math.sqrt(Kc*Kc-4*nc*(Ic*Ic+Jc*Jc-a.circle.radius*a.circle.radius)),nc=1/(2*nc),md=(-Kc-ld)*nc,bd=0,cd=0,rd=md<o.epsilon?(-Kc+ld)*nc:md,bd=ka.x+(Sd.x-ka.x)*rd,cd=ka.y+(Sd.y-ka.y)*rd;if(sb.vec_dsq(wb.x,wb.y,bd,cd)<o.epsilon){Fa=0;xb=eb;break}var td=X.get(bd,cd,null);F.flowsegs.add(F.flowpoly.head.elt);F.flowsegs.add(td);F.flowpoly.add(td);Fa=1;xb=eb;break}else{var Nc=0,Oc=0,dd,Uc=0,Vc=0,Uc=Sd.x-ka.x,Vc=Sd.y-ka.y,Wc=0,Yc=0,Wc=ka.x-a.circle.worldCOMx,Yc=ka.y-a.circle.worldCOMy,
mc=Uc*Uc+Vc*Vc,Mc=2*(Wc*Uc+Yc*Vc),bc=Mc*Mc-4*mc*(Wc*Wc+Yc*Yc-a.circle.radius*a.circle.radius);bc*bc<o.epsilon?(Nc=0>bc?10:Oc=-Mc/(2*mc),dd=!1):(bc=Math.sqrt(bc),mc=1/(2*mc),Nc=(-Mc-bc)*mc,Oc=(-Mc+bc)*mc,dd=!0);if(Nc<1-o.epsilon&&Oc>o.epsilon){var od=0,qd=0,Ed=Nc,od=ka.x+(Sd.x-ka.x)*Ed,qd=ka.y+(Sd.y-ka.y)*Ed;if(null!=wb&&sb.vec_dsq(wb.x,wb.y,od,qd)<o.epsilon){Fa=0;xb=eb;break}var Fd=X.get(od,qd,null);null!=F.flowpoly.head&&(F.flowsegs.add(F.flowpoly.head.elt),F.flowsegs.add(Fd));F.flowpoly.add(Fd);
null==wb&&(wb=F.flowpoly.head.elt);if(dd){var Gd=0,Hd=0,Jd=Oc,Gd=ka.x+(Sd.x-ka.x)*Jd,Hd=ka.y+(Sd.y-ka.y)*Jd;F.flowpoly.add(X.get(Gd,Hd,null))}}}ka=Sd;kc=xb;Ca=Ac;xb=xb.next;null==xb&&(xb=b.polygon.gverts.next)}}if(null==F.flowpoly.head)return!1;if(null==F.flowpoly.head.next){for(var Kd=!0,hd=b.polygon.edges.head;null!=hd;){var wd=hd.elt;if(wd.gnormx*a.circle.worldCOMx+wd.gnormy*a.circle.worldCOMy>wd.gprojection){Kd=!1;break}hd=hd.next}return Kd?(c.overlap=a.circle.area,c.centroidx=a.circle.worldCOMx,
c.centroidy=a.circle.worldCOMy,null,!0):!1}var ec=0,fc=0,zc=0;if(null!=F.flowpoly.head.next.next){for(var Bd=0,ie=0,je=0,Bd=je=ie=0,Fc=F.flowpoly.head,$c=Fc.elt,Fc=Fc.next,yb=Fc.elt,Fc=Fc.next;null!=Fc;)var Bc=Fc.elt,Bd=Bd+yb.x*(Bc.y-$c.y),Od=Bc.y*yb.x-Bc.x*yb.y,ie=ie+(yb.x+Bc.x)*Od,je=je+(yb.y+Bc.y)*Od,$c=yb,yb=Bc,Fc=Fc.next;var Fc=F.flowpoly.head,Cc=Fc.elt,Bd=Bd+yb.x*(Cc.y-$c.y),Pd=Cc.y*yb.x-Cc.x*yb.y,ie=ie+(yb.x+Cc.x)*Pd,je=je+(yb.y+Cc.y)*Pd,$c=yb,yb=Cc,Fc=Fc.next,ad=Fc.elt,Bd=Bd+yb.x*(ad.y-$c.y),
Td=ad.y*yb.x-ad.x*yb.y,ie=ie+(yb.x+ad.x)*Td,je=je+(yb.y+ad.y)*Td,Bd=0.5*Bd,Ud=1/(6*Bd),ie=ie*Ud,je=je*Ud,Vd=-Bd,ec=ec+ie*Vd,fc=fc+je*Vd,zc=zc-Bd}else F.flowsegs.add(F.flowpoly.head.elt),F.flowsegs.add(F.flowpoly.head.next.elt);for(;null!=F.flowsegs.head;)var sd=F.flowsegs.pop_unsafe(),ud=F.flowsegs.pop_unsafe(),Wd=0,Xd=0,Wd=ud.x-sd.x,Xd=ud.y-sd.y,se=0,te=0,se=Wd,te=Xd,Yd=1/Math.sqrt(se*se+te*te),se=se*Yd,te=te*Yd,re=se,se=-te,te=re,ke=0,le=0,ke=sd.x+ud.x,le=sd.y+ud.y,ke=0.5*ke,le=0.5*le,ke=ke-1*a.circle.worldCOMx,
le=le-1*a.circle.worldCOMy,Id=0,Zd=0,$d=se*ke+te*le,vd=$d/a.circle.radius,ed=Math.sqrt(1-vd*vd),ae=Math.acos(vd),Id=a.circle.radius*(a.circle.radius*ae-$d*ed),Zd=0.6666666666666666*a.circle.radius*ed*ed*ed/(ae-vd*ed),ke=a.circle.worldCOMx,le=a.circle.worldCOMy,be=Zd,ke=ke+se*be,le=le+te*be,ce=Id,ec=ec+ke*ce,fc=fc+le*ce,zc=zc+Id;var de=1/zc,ec=ec*de,fc=fc*de;c.overlap=zc;c.centroidx=ec;c.centroidy=fc;null;return!0}}return!1}var zb=a.circle,Xb=b.circle,xd=0,yd=0,xd=Xb.worldCOMx-zb.worldCOMx,yd=Xb.worldCOMy-
zb.worldCOMy,ee=zb.radius+Xb.radius,Ld=xd*xd+yd*yd;if(Ld>ee*ee)return!1;if(Ld<o.epsilon*o.epsilon)zb.radius<Xb.radius?(c.overlap=zb.area,c.centroidx=zb.worldCOMx,c.centroidy=zb.worldCOMy):(c.overlap=Xb.area,c.centroidx=Xb.worldCOMx,c.centroidy=Xb.worldCOMy);else{var zd=Math.sqrt(Ld),fe=1/zd,Ad=0.5*(zd-(Xb.radius*Xb.radius-zb.radius*zb.radius)*fe);if(Ad<=-zb.radius)c.overlap=zb.area,c.centroidx=zb.worldCOMx,c.centroidy=zb.worldCOMy;else{var Md=zd-Ad;if(Md<=-Xb.radius)c.overlap=Xb.area,c.centroidx=
Xb.worldCOMx,c.centroidy=Xb.worldCOMy;else{var Nd=0,ge=0,Qd=0,me=0,Cd=Ad/zb.radius,nd=Math.sqrt(1-Cd*Cd),ne=Math.acos(Cd),Nd=zb.radius*(zb.radius*ne-Ad*nd),ge=0.6666666666666666*zb.radius*nd*nd*nd/(ne-Cd*nd),Dd=Md/Xb.radius,pd=Math.sqrt(1-Dd*Dd),oe=Math.acos(Dd),Qd=Xb.radius*(Xb.radius*oe-Md*pd),me=0.6666666666666666*Xb.radius*pd*pd*pd/(oe-Dd*pd),pe=Nd+Qd,qe=(ge*Nd+(zd-me)*Qd)/pe*fe;c.overlap=pe;c.centroidx=zb.worldCOMx+xd*qe;c.centroidy=zb.worldCOMy+yd*qe}}}null;return!0};var jh=function(){this.toiDistance=
0;this.inner=!1;this.shape=null};i["zpp_nape.geom.ZPP_ConvexRayResult"]=jh;jh.__name__=["zpp_nape","geom","ZPP_ConvexRayResult"];jh.prototype={__class__:jh};var kh=function(){this.next=null;this.x=this.y=0};i["zpp_nape.geom.ZPP_GeomVert"]=kh;kh.__name__=["zpp_nape","geom","ZPP_GeomVert"];kh.prototype={__class__:kh};var lh=function(){this.outer=this.vertices=null};i["zpp_nape.geom.ZPP_GeomPoly"]=lh;lh.__name__=["zpp_nape","geom","ZPP_GeomPoly"];lh.prototype={__class__:lh};var mh=function(){this.a=
this.b=this.c=this.d=this.tx=this.ty=0};i["zpp_nape.geom.ZPP_Mat23"]=mh;mh.__name__=["zpp_nape","geom","ZPP_Mat23"];mh.prototype={__class__:mh};var nh=function(){this.x=null;this.m=this.n=0};i["zpp_nape.geom.ZPP_MatMN"]=nh;nh.__name__=["zpp_nape","geom","ZPP_MatMN"];nh.prototype={__class__:nh};var ta=function(){this.slipped=this.failed=this.kinematic=!1;this.c1=this.c2=this.axis=null;this.frozen1=this.frozen2=!1;this.s1=this.s2=this.arbiter=null;this.toi=0;this.next=null;this.c1=new X;this.c2=new X;
this.axis=new X};i["zpp_nape.geom.ZPP_ToiEvent"]=ta;ta.__name__=["zpp_nape","geom","ZPP_ToiEvent"];ta.prototype={__class__:ta};var lc=function(){};i["zpp_nape.geom.ZPP_SweepDistance"]=lc;lc.__name__=["zpp_nape","geom","ZPP_SweepDistance"];lc.dynamicSweep=function(a,b,c,d,f){null==f&&(f=!1);var g=a.s1,e=a.s2,h=g.body,i=e.body,j=0,l=0,j=i.velx-h.velx,l=i.vely-h.vely,k=h.angvel;0>k&&(k=-k);var m=i.angvel;0>m&&(m=-m);var p=g.sweepCoef*k+e.sweepCoef*m;if(!f&&!a.kinematic&&j*j+l*l<o.dynamicSweepLinearThreshold*
o.dynamicSweepLinearThreshold&&p<o.dynamicSweepAngularThreshold)a.toi=-1,a.failed=!0;else{for(var q=a.c1,k=a.c2,m=a.axis,t=0;;){h.sweepIntegrate(c*b);h.sweepValidate(g);i.sweepIntegrate(c*b);i.sweepValidate(e);var s=lc.distance(g,e,q,k,m,null)+d,u=j*m.x+l*m.y;if(s<o.distanceThresholdCCD){if(f)break;var v=0,x=0,v=q.x-h.posx,x=q.y-h.posy,w=0,A=0,w=k.x-i.posx,A=k.y-i.posy,v=u-h.sweep_angvel*(m.y*v-m.x*x)+i.sweep_angvel*(m.y*w-m.x*A);0<v&&(a.slipped=!0);if(0>=v||s<0.5*o.distanceThresholdCCD)break}u=(p-
u)*b;if(0>=u){c=-1;break}u=s/u;1.0E-6>u&&(u=1.0E-6);c+=u;if(1<=c){c=1;h.sweepIntegrate(c*b);h.sweepValidate(g);i.sweepIntegrate(c*b);i.sweepValidate(e);b=lc.distance(g,e,q,k,m,null)+d;j=j*m.x+l*m.y;if(b<o.distanceThresholdCCD){if(f)break;l=f=0;f=q.x-h.posx;l=q.y-h.posy;d=q=0;q=k.x-i.posx;d=k.y-i.posy;h=j-h.sweep_angvel*(m.y*f-m.x*l)+i.sweep_angvel*(m.y*q-m.x*d);0<h&&(a.slipped=!0);if(0>=h||b<0.5*o.distanceThresholdCCD)break}c=-1;break}if(40<=++t){s>d&&(a.failed=!0);break}}a.toi=c}};lc.staticSweep=
function(a,b,c,d){var f=a.s1,g=a.s2,e=f.body,h=0,i=0,h=-e.velx,i=-e.vely,j=e.sweep_angvel;0>j&&(j=-j);for(var l=f.sweepCoef*j,j=a.c1,k=a.c2,m=a.axis,p=0;;){e.sweepIntegrate(c*b);e.sweepValidate(f);var q=lc.distance(f,g,j,k,m,null)+d,s=h*m.x+i*m.y;if(q<o.distanceThresholdCCD){var t=0,u=0,t=j.x-e.posx,u=j.y-e.posy,t=s-e.sweep_angvel*(m.y*t-m.x*u);0<t&&(a.slipped=!0);if(0>=t||q<0.5*o.distanceThresholdCCD)break}s=(l-s)*b;if(0>=s){c=-1;break}s=q/s;1.0E-6>s&&(s=1.0E-6);c+=s;if(1<=c){c=1;e.sweepIntegrate(c*
b);e.sweepValidate(f);b=lc.distance(f,g,j,k,m,null)+d;h=h*m.x+i*m.y;if(b<o.distanceThresholdCCD&&(d=i=0,i=j.x-e.posx,d=j.y-e.posy,e=h-e.sweep_angvel*(m.y*i-m.x*d),0<e&&(a.slipped=!0),0>=e||b<0.5*o.distanceThresholdCCD))break;c=-1;break}if(40<=++p){q>d&&(a.failed=!0);break}}a.toi=c};lc.distance=function(a,b,c,d,f,e){null==e&&(e=1.0E100);if(a.type==g.id_ShapeType_CIRCLE&&b.type==g.id_ShapeType_CIRCLE){var h=a.circle,i=b.circle,n,j=0,l=0,j=i.worldCOMx-h.worldCOMx,l=i.worldCOMy-h.worldCOMy,k=Math.sqrt(j*
j+l*l);n=k-(h.radius+i.radius);if(n<e){if(0==k)j=1,l=0;else var m=1/k,j=j*m,l=l*m;var p=h.radius;c.x=h.worldCOMx+j*p;c.y=h.worldCOMy+l*p;var q=-i.radius;d.x=i.worldCOMx+j*q;d.y=i.worldCOMy+l*q;f.x=j;f.y=l}return n}var s=!1;if(a.type==g.id_ShapeType_CIRCLE&&b.type==g.id_ShapeType_POLYGON)var t=a,a=b,b=t,u=c,c=d,d=u,s=!0;if(a.type==g.id_ShapeType_POLYGON&&b.type==g.id_ShapeType_CIRCLE){for(var v=b.circle,x=-1.0E100,w=null,A=a.polygon.edges.head;null!=A;){var B=A.elt,z=B.gnormx*v.worldCOMx+B.gnormy*
v.worldCOMy-B.gprojection-v.radius;if(z>e){x=z;break}0<z?z>x&&(x=z,w=B):0>x&&z>x&&(x=z,w=B);A=A.next}if(x<e){var C=w.gp0,E=w.gp1,H=v.worldCOMy*w.gnormx-v.worldCOMx*w.gnormy;if(H<=C.y*w.gnormx-C.x*w.gnormy){var D=0,F=0,D=v.worldCOMx-C.x,F=v.worldCOMy-C.y,J=Math.sqrt(D*D+F*F),x=J-v.radius;if(x<e){if(0==J)D=1,F=0;else var G=1/J,D=D*G,F=F*G;c.x=C.x+0*D;c.y=C.y+0*F;var N=-v.radius;d.x=v.worldCOMx+D*N;d.y=v.worldCOMy+F*N;f.x=D;f.y=F}}else if(H>=E.y*w.gnormx-E.x*w.gnormy){var L=0,M=0,L=v.worldCOMx-E.x,M=
v.worldCOMy-E.y,O=Math.sqrt(L*L+M*M),x=O-v.radius;if(x<e){if(0==O)L=1,M=0;else var P=1/O,L=L*P,M=M*P;c.x=E.x+0*L;c.y=E.y+0*M;var Q=-v.radius;d.x=v.worldCOMx+L*Q;d.y=v.worldCOMy+M*Q;f.x=L;f.y=M}}else{var T=-v.radius;d.x=v.worldCOMx+w.gnormx*T;d.y=v.worldCOMy+w.gnormy*T;var ba=-x;c.x=d.x+w.gnormx*ba;c.y=d.y+w.gnormy*ba;f.x=w.gnormx;f.y=w.gnormy}}s&&(f.x=-f.x,f.y=-f.y);return x}for(var aa=a.polygon,U=b.polygon,K=-1.0E100,Z=null,V=null,Y=0,ca=aa.edges.head;null!=ca;){for(var $=ca.elt,X=1.0E100,S=U.gverts.next;null!=
S;){var la=S,sa=$.gnormx*la.x+$.gnormy*la.y;sa<X&&(X=sa);S=S.next}X-=$.gprojection;if(X>e){K=X;break}0<X?X>K&&(K=X,Z=$,Y=1):0>K&&X>K&&(K=X,Z=$,Y=1);ca=ca.next}if(K<e){for(var ha=U.edges.head;null!=ha;){for(var ea=ha.elt,r=1.0E100,fa=aa.gverts.next;null!=fa;){var ma=fa,qa=ea.gnormx*ma.x+ea.gnormy*ma.y;qa<r&&(r=qa);fa=fa.next}r-=ea.gprojection;if(r>e){K=r;break}0<r?r>K&&(K=r,V=ea,Y=2):0>K&&r>K&&(K=r,V=ea,Y=2);ha=ha.next}if(K<e){var ja,Ta;if(1==Y)ja=U,Ta=Z;else{ja=aa;Ta=V;var R=c,c=d,d=R,s=!s}for(var ga=
null,Ba=1.0E100,na=ja.edges.head;null!=na;){var ra=na.elt,za=Ta.gnormx*ra.gnormx+Ta.gnormy*ra.gnormy;za<Ba&&(Ba=za,ga=ra);na=na.next}s?(f.x=-Ta.gnormx,f.y=-Ta.gnormy):(f.x=Ta.gnormx,f.y=Ta.gnormy);if(0<=K){var W=Ta.gp0,oa=Ta.gp1,da=ga.gp0,pa=ga.gp1,va=0,ta=0,xa=0,ua=0,va=oa.x-W.x,ta=oa.y-W.y,xa=pa.x-da.x,ua=pa.y-da.y,Ma=1/(va*va+ta*ta),$a=1/(xa*xa+ua*ua),ya=-(va*(W.x-da.x)+ta*(W.y-da.y))*Ma,Ha=-(va*(W.x-pa.x)+ta*(W.y-pa.y))*Ma,Ia=-(xa*(da.x-W.x)+ua*(da.y-W.y))*$a,Fa=-(xa*(da.x-oa.x)+ua*(da.y-oa.y))*
$a;0>ya?ya=0:1<ya&&(ya=1);0>Ha?Ha=0:1<Ha&&(Ha=1);0>Ia?Ia=0:1<Ia&&(Ia=1);0>Fa?Fa=0:1<Fa&&(Fa=1);var Na=0,Ca=0,ia=ya,Na=W.x+va*ia,Ca=W.y+ta*ia,Ea=0,wa=0,La=Ha,Ea=W.x+va*La,wa=W.y+ta*La,Qa=0,Ka=0,I=Ia,Qa=da.x+xa*I,Ka=da.y+ua*I,ib=0,Xa=0,Ya=Fa,ib=da.x+xa*Ya,Xa=da.y+ua*Ya,hb=sb.vec_dsq(Na,Ca,da.x,da.y),nb=sb.vec_dsq(Ea,wa,pa.x,pa.y),Oa=sb.vec_dsq(Qa,Ka,W.x,W.y),ob=sb.vec_dsq(ib,Xa,oa.x,oa.y),Va=0,Pa=0,bb=null;hb<nb?(Va=Na,Pa=Ca,bb=da):(Va=Ea,Pa=wa,bb=pa,hb=nb);var Ra=0,Sa=0,db=null;Oa<ob?(Ra=Qa,Sa=Ka,
db=W):(Ra=ib,Sa=Xa,db=oa,Oa=ob);hb<Oa?(c.x=Va,c.y=Pa,d.x=bb.x,d.y=bb.y,K=Math.sqrt(hb)):(d.x=Ra,d.y=Sa,c.x=db.x,c.y=db.y,K=Math.sqrt(Oa));if(0!=K){f.x=d.x-c.x;f.y=d.y-c.y;var Za=1/K;f.x*=Za;f.y*=Za;s&&(f.x=-f.x,f.y=-f.y)}return K}var Ja=0,Ga=0,Ja=ga.gp0.x,Ga=ga.gp0.y,Aa=0,Da=0,Aa=ga.gp1.x,Da=ga.gp1.y,Wa=0,fb=0,Wa=Aa-Ja,fb=Da-Ga,gb=Ta.gnormy*Ja-Ta.gnormx*Ga,eb=Ta.gnormy*Aa-Ta.gnormx*Da,mb=1/(eb-gb),Ua=(-Ta.tp1-gb)*mb;Ua>o.epsilon&&(Ja+=Wa*Ua,Ga+=fb*Ua);var ab=(-Ta.tp0-eb)*mb;ab<-o.epsilon&&(Aa+=Wa*
ab,Da+=fb*ab);var kb=Ja*Ta.gnormx+Ga*Ta.gnormy-Ta.gprojection,cb=Aa*Ta.gnormx+Da*Ta.gnormy-Ta.gprojection;if(kb<cb){d.x=Ja;d.y=Ga;var pb=-kb;c.x=d.x+Ta.gnormx*pb;c.y=d.y+Ta.gnormy*pb;return kb}d.x=Aa;d.y=Da;var jb=-cb;c.x=d.x+Ta.gnormx*jb;c.y=d.y+Ta.gnormy*jb;return cb}}return e};var X=function(){this.length=this.x=this.y=0;this._inuse=this.modified=this.pushmod=!1;this.next=null;this.weak=!1;this._isimmutable=this.outer=null;this._immutable=!1;this._invalidate=this._validate=null};i["zpp_nape.geom.ZPP_Vec2"]=
X;X.__name__=["zpp_nape","geom","ZPP_Vec2"];X.get=function(a,b,c){null==c&&(c=!1);var d;null==X.zpp_pool?d=new X:(d=X.zpp_pool,X.zpp_pool=d.next,d.next=null);d.weak=!1;d._immutable=c;d.x=a;d.y=b;return d};X.prototype={validate:function(){null!=this._validate&&this._validate()},invalidate:function(){null!=this._invalidate&&this._invalidate(this)},wrapper:function(){if(null==this.outer){this.outer=new T;var a=this.outer.zpp_inner;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null);a._isimmutable=null;
a._validate=null;a._invalidate=null;a.next=X.zpp_pool;X.zpp_pool=a;this.outer.zpp_inner=this}return this.outer},add:function(a){return this.inlined_add(a)},inlined_add:function(a){a._inuse=!0;a.next=this.next;this.next=a;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){b._inuse=!0;null==a?(b.next=this.next,this.next=b):(b.next=a.next,a.next=b);this.pushmod=this.modified=!0;this.length++;return b},erase:function(a){return this.inlined_erase(a)},
inlined_erase:function(a){var b,c;null==a?(b=this.next,this.next=c=b.next,null==this.next&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));b._inuse=!1;this.modified=!0;this.length--;this.pushmod=!0;return c},reverse:function(){for(var a=this.next,b=null;null!=a;){var c=a.next;a.next=b;b=this.next=a;a=c}this.pushmod=this.modified=!0},iterator_at:function(a){for(var b=this.next;0<a--&&null!=b;)b=b.next;return b},toString:function(){return"{ x: "+this.x+" y: "+this.y+" }"},
__class__:X};var oh=function(){this._validate=null;this.x=this.y=this.z=0};i["zpp_nape.geom.ZPP_Vec3"]=oh;oh.__name__=["zpp_nape","geom","ZPP_Vec3"];oh.prototype={validate:function(){null!=this._validate&&this._validate()},__class__:oh};var sb=function(){};i["zpp_nape.geom.ZPP_VecMath"]=sb;sb.__name__=["zpp_nape","geom","ZPP_VecMath"];sb.vec_dsq=function(a,b,c,d){var f=0,e=0,f=a-c,e=b-d;return f*f+e*e};var Ba=function(){this.userData=this.ishape=this.ibody=this.icompound=this.cbsets=this.group=this.cbTypes=
this.cbSet=this.wrap_cbTypes=null;this.id=0;this.outer_i=null;this.id=Ya.Interactor();this.cbsets=new Bg;this.cbTypes=new Wb};i["zpp_nape.phys.ZPP_Interactor"]=Ba;Ba.__name__=["zpp_nape","phys","ZPP_Interactor"];Ba.get=function(a,b){var c;c=a.id<b.id?a.id:b.id;var d;d=a.id<b.id?b.id:a.id;for(var f=null,e=(a.cbsets.length<b.cbsets.length?a.cbsets:b.cbsets).head;null!=e;){var g=e.elt;if(g.id==c&&g.di==d){f=g;break}e=e.next}return f};Ba.int_callback=function(a,b,c){var d=a.int1,a=a.int2;b.options1.compatible(d.cbTypes)&&
b.options2.compatible(a.cbTypes)?(c.int1=d,c.int2=a):(c.int1=a,c.int2=d)};Ba.prototype={__iaddedToSpace:function(){null!=this.group&&this.group.interactors.add(this);for(var a=this.cbTypes.head;null!=a;)a.elt.interactors.add(this),a=a.next;this.alloc_cbSet()},__iremovedFromSpace:function(){null!=this.group&&this.group.interactors.remove(this);for(var a=this.cbTypes.head;null!=a;)a.elt.interactors.remove(this),a=a.next;this.dealloc_cbSet()},wake:function(){if(null!=this.ishape){var a=this.ishape.body;
null!=a&&null!=a.space&&a.space.non_inlined_wake(a);!0}else null!=this.ibody?null!=this.ibody.space?this.ibody.space.non_inlined_wake(this.ibody):!1:(null!=this.icompound.space&&this.icompound.space.wakeCompound(this.icompound),!0)},setupcbTypes:function(){this.wrap_cbTypes=Nb.get(this.cbTypes);this.wrap_cbTypes.zpp_inner.adder=E(this,this.wrap_cbTypes_adder);this.wrap_cbTypes.zpp_inner.subber=E(this,this.wrap_cbTypes_subber);this.wrap_cbTypes.zpp_inner.dontremove=!0},wrap_cbTypes_subber:function(a){a=
a.zpp_inner;if(this.cbTypes.has(a)){var b;b=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;null!=b&&(this.dealloc_cbSet(),a.interactors.remove(this));this.cbTypes.remove(a);null!=b&&(this.alloc_cbSet(),this.wake())}},wrap_cbTypes_adder:function(a){this.insert_cbtype(a.zpp_inner);return!1},insert_cbtype:function(a){if(!this.cbTypes.has(a)){var b;b=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=
this.ibody?this.ibody.space:this.icompound.space;null!=b&&(this.dealloc_cbSet(),a.interactors.add(this));for(var c=null,d=this.cbTypes.head;null!=d&&!(a.id<d.elt.id);){c=d;d=d.next}this.cbTypes.inlined_insert(c,a);null!=b&&(this.alloc_cbSet(),this.wake())}},alloc_cbSet:function(){var a;a=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;if(null!=(this.cbSet=a.cbsets.get(this.cbTypes)))this.cbSet.count++,this.cbSet.interactors.add(this),
this.cbSet.validate(),a.freshInteractorType(this)},dealloc_cbSet:function(){var a;a=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;null!=this.cbSet&&(this.cbSet.interactors.remove(this),a.nullInteractorType(this),0==--this.cbSet.count&&(a.cbsets.remove(this.cbSet),a=this.cbSet,a.free(),a.next=ga.zpp_pool,ga.zpp_pool=a),this.cbSet=null)},immutable_midstep:function(a){null!=this.ibody?null:null!=this.ishape?this.ishape.__immutable_midstep(a):
this.icompound.__imutable_midstep(a)},lookup_group:function(){for(var a=this;null!=a&&null==a.group;)a=null!=a.ishape?a.ishape.body:null!=a.icompound?a.icompound.compound:a.ibody.compound;return null==a?null:a.group},__class__:Ba};var Zc=function(){this.wrap_localCOM=this.wrap_worldCOM=null;this.zip_worldCOM=!1;this.worldCOMx=this.worldCOMy=0;this.zip_localCOM=!1;this.localCOMx=this.localCOMy=0;this.zip_aabb=!1;this.aabb=null;this.norotate=!1;this.cinertia=this.iinertia=this.sinertia=0;this.zip_inertia=
!1;this.inertiaMode=this.inertia=0;this.zip_gravMassScale=!1;this.gravMassMode=this.gravMassScale=0;this.zip_gravMass=!1;this.gravMass=0;this.nomove=!1;this.massMode=this.imass=this.smass=this.cmass=0;this.zip_mass=!1;this.mass=0;this.zip_axis=!1;this.forcex=this.forcey=this.kinvelx=this.kinvely=this.svelx=this.svely=this.angvel=this.torque=this.kinangvel=this.pre_rot=this.rot=this.axisx=this.axisy=0;this.wrap_vel=null;this.velx=this.vely=0;this.wrap_pos=null;this.pre_posx=this.pre_posy=this.posx=
this.posy=0;this.bullet=this.bulletEnabled=this.disableCCD=!1;this.sweepRadius=0;this.sweepFrozen=!1;this.sweepTime=this.sweep_angvel=0;this.compound=this.shapes=this.wrap_shapes=this.space=this.arbiters=this.wrap_arbiters=this.constraints=this.component=null;this.type=0;this.world=!1;this.outer=null;Ba.call(this);this.ibody=this;this.bulletEnabled=this.world=!1;this.sweep_angvel=this.sweepTime=0;this.disableCCD=this.norotate=this.nomove=!1;this.axisx=this.rot=this.posy=this.posx=0;this.axisy=1;this.torque=
this.angvel=this.kinangvel=this.forcey=this.forcex=this.kinvely=this.kinvelx=this.vely=this.velx=this.svely=this.svelx=0;this.pre_rot=this.pre_posy=this.pre_posx=Math.POSITIVE_INFINITY;this.worldCOMy=this.worldCOMx=this.localCOMy=this.localCOMx=0;this.zip_aabb=!0;this.aabb=W.get(0,0,0,0);this.aabb._immutable=!0;this.aabb._validate=E(this,this.aabb_validate);this.massMode=g.id_MassMode_DEFAULT;this.gravMassMode=g.id_GravMassMode_DEFAULT;this.gravMassScale=1;this.inertiaMode=g.id_InertiaMode_DEFAULT;
this.arbiters=new me;this.constraints=new Sc;this.shapes=new Pd;this.wrap_shapes=Ac.get(this.shapes);this.wrap_shapes.zpp_inner.adder=E(this,this.shapes_adder);this.wrap_shapes.zpp_inner.subber=E(this,this.shapes_subber);this.wrap_shapes.zpp_inner._invalidate=E(this,this.shapes_invalidate);this.kinematicDelaySleep=!1};i["zpp_nape.phys.ZPP_Body"]=Zc;Zc.__name__=["zpp_nape","phys","ZPP_Body"];Zc.__static=function(){var a=ra;null==g.BodyType_STATIC&&(g.internal=!0,g.BodyType_STATIC=new S,g.internal=
!1);var a=new a(g.BodyType_STATIC),b=a.zpp_inner;b.world=!0;b.wrap_shapes.zpp_inner.immutable=!0;b.smass=b.imass=b.cmass=b.mass=b.gravMass=0;b.sinertia=b.iinertia=b.cinertia=b.inertia=0;b.cbTypes.clear();return a};Zc.__super__=Ba;Zc.prototype=z(Ba.prototype,{invalidate_type:function(){this.invalidate_mass();this.invalidate_inertia()},invalidate_shapes:function(){this.zip_worldCOM=this.zip_localCOM=this.zip_aabb=!0;this.invalidate_mass();this.invalidate_inertia()},atRest:function(a){if(this.type!=
g.id_BodyType_DYNAMIC)return this.component.sleeping;var b=o.linearSleepThreshold,b=b*b;if(this.velx*this.velx+this.vely*this.vely>b)a=!1;else if(sb.vec_dsq(this.posx,this.posy,this.pre_posx,this.pre_posy)>0.25*b*a*a)a=!1;else{var c=b=0,b=this.aabb.maxx-this.aabb.minx,c=this.aabb.maxy-this.aabb.miny,b=b*b+c*c,c=o.angularSleepThreshold,c=c*c;if(4*this.angvel*this.angvel*b>c)a=!1;else var d=this.rot-this.pre_rot,a=d*d*b>c*a*a?!1:!0}a||(this.component.waket=this.space.stamp);return this.component.waket+
o.sleepDelay<this.space.stamp},refreshArbiters:function(){for(var a=this.arbiters.head;null!=a;)a.elt.invalidated=!0,a=a.next},sweepIntegrate:function(a){var b=a-this.sweepTime;0!=b&&(this.sweepTime=a,this.posx+=this.velx*b,this.posy+=this.vely*b,0!=this.angvel&&this.delta_rot(this.sweep_angvel*b))},sweepValidate:function(a){if(a.type==g.id_ShapeType_CIRCLE)a.worldCOMx=this.posx+(this.axisy*a.localCOMx-this.axisx*a.localCOMy),a.worldCOMy=this.posy+(a.localCOMx*this.axisx+a.localCOMy*this.axisy);else{for(var a=
a.polygon,b=a.lverts.next,c=a.gverts.next;null!=c;){var d=c,f=b,b=b.next;d.x=this.posx+(this.axisy*f.x-this.axisx*f.y);d.y=this.posy+(f.x*this.axisx+f.y*this.axisy);c=c.next}c=a.edges.head;b=d=a.gverts.next;for(d=d.next;null!=d;){var f=d,e=c.elt,c=c.next;e.gnormx=this.axisy*e.lnormx-this.axisx*e.lnormy;e.gnormy=e.lnormx*this.axisx+e.lnormy*this.axisy;e.gprojection=this.posx*e.gnormx+this.posy*e.gnormy+e.lprojection;e.tp0=b.y*e.gnormx-b.x*e.gnormy;e.tp1=f.y*e.gnormx-f.x*e.gnormy;b=f;d=d.next}a=a.gverts.next;
c=c.elt;c.gnormx=this.axisy*c.lnormx-this.axisx*c.lnormy;c.gnormy=c.lnormx*this.axisx+c.lnormy*this.axisy;c.gprojection=this.posx*c.gnormx+this.posy*c.gnormy+c.lprojection;c.tp0=b.y*c.gnormx-b.x*c.gnormy;c.tp1=a.y*c.gnormx-a.x*c.gnormy}},invalidate_pos:function(){for(var a=this.shapes.head;null!=a;){var b=a.elt;b.type==g.id_ShapeType_POLYGON&&(b.polygon.invalidate_gverts(),b.polygon.invalidate_gaxi());b.invalidate_worldCOM();a=a.next}this.zip_worldCOM=!0},pos_invalidate:function(a){this.immutable_midstep("Body::position");
this.posx==a.x&&this.posy==a.y||(this.posx=a.x,this.posy=a.y,this.invalidate_pos(),this.wake())},pos_validate:function(){this.wrap_pos.zpp_inner.x=this.posx;this.wrap_pos.zpp_inner.y=this.posy},vel_invalidate:function(a){this.velx=a.x;this.vely=a.y;this.wake()},vel_validate:function(){this.wrap_vel.zpp_inner.x=this.velx;this.wrap_vel.zpp_inner.y=this.vely},setupPosition:function(){this.wrap_pos=T.get(this.posx,this.posy,null);this.wrap_pos.zpp_inner._inuse=!0;this.world?this.wrap_pos.zpp_inner._immutable=
!0:(this.wrap_pos.zpp_inner._invalidate=E(this,this.pos_invalidate),this.wrap_pos.zpp_inner._validate=E(this,this.pos_validate))},setupVelocity:function(){this.wrap_vel=T.get(this.velx,this.vely,null);this.wrap_vel.zpp_inner._inuse=!0;this.world?this.wrap_vel.zpp_inner._immutable=!0:(this.wrap_vel.zpp_inner._invalidate=E(this,this.vel_invalidate),this.wrap_vel.zpp_inner._validate=E(this,this.vel_validate))},invalidate_rot:function(){this.zip_axis=!0;for(var a=this.shapes.head;null!=a;){var b=a.elt;
b.type==g.id_ShapeType_POLYGON&&(b.polygon.invalidate_gverts(),b.polygon.invalidate_gaxi());b.invalidate_worldCOM();a=a.next}this.zip_worldCOM=!0},validate_axis:function(){this.zip_axis&&(this.zip_axis=!1,this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot),null)},delta_rot:function(a){this.rot+=a;if(1.0E-4<a*a)this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot),null;else{var b=a*a,c=1-0.5*b,b=1-b*b/8,d=(c*this.axisx+a*this.axisy)*b;this.axisy=(c*this.axisy-a*this.axisx)*b;this.axisx=
d}},invalidate_mass:function(){this.zip_mass=!0;this.invalidate_gravMass()},validate_mass:function(){if(this.zip_mass){this.zip_mass=!1;if(this.massMode==g.id_MassMode_DEFAULT){this.cmass=0;for(var a=this.shapes.head;null!=a;){var b=a.elt;b.refmaterial.density=b.material.density;b.validate_area_inertia();this.cmass+=b.area*b.material.density;a=a.next}}this.type==g.id_BodyType_DYNAMIC&&!this.nomove?(this.mass=this.cmass,this.imass=this.smass=1/this.mass):(this.mass=Math.POSITIVE_INFINITY,this.imass=
this.smass=0)}},invalidate_gravMass:function(){this.gravMassMode!=g.id_GravMassMode_FIXED&&(this.zip_gravMass=!0);this.gravMassMode!=g.id_GravMassMode_SCALED&&(this.zip_gravMassScale=!0);this.wake()},validate_gravMass:function(){this.zip_gravMass&&(this.zip_gravMass=!1,this.validate_mass(),this.gravMassMode==g.id_GravMassMode_DEFAULT?(this.validate_mass(),this.gravMass=this.cmass):this.gravMassMode==g.id_GravMassMode_SCALED&&(this.validate_mass(),this.gravMass=this.cmass*this.gravMassScale))},invalidate_inertia:function(){this.zip_inertia=
!0;this.wake()},validate_inertia:function(){if(this.zip_inertia){this.zip_inertia=!1;if(this.inertiaMode==g.id_InertiaMode_DEFAULT){this.cinertia=0;for(var a=this.shapes.head;null!=a;){var b=a.elt;b.refmaterial.density=b.material.density;b.validate_area_inertia();this.cinertia+=b.inertia*b.area*b.material.density;a=a.next}}this.type==g.id_BodyType_DYNAMIC&&!this.norotate?(this.inertia=this.cinertia,this.sinertia=this.iinertia=1/this.inertia):(this.inertia=Math.POSITIVE_INFINITY,this.sinertia=this.iinertia=
0)}},validate_aabb:function(){if(this.zip_aabb){this.zip_aabb=!1;this.aabb.minx=Math.POSITIVE_INFINITY;this.aabb.miny=Math.POSITIVE_INFINITY;this.aabb.maxx=Math.NEGATIVE_INFINITY;this.aabb.maxy=Math.NEGATIVE_INFINITY;for(var a=this.shapes.head;null!=a;){var b=a.elt;b.zip_aabb&&null!=b.body&&(b.zip_aabb=!1,b.type==g.id_ShapeType_CIRCLE?b.circle.__validate_aabb():b.polygon.__validate_aabb());this.aabb.combine(b.aabb);a=a.next}}},invalidate_localCOM:function(){this.zip_worldCOM=this.zip_localCOM=!0},
validate_localCOM:function(){if(this.zip_localCOM){this.zip_localCOM=!1;for(var a=0,b=0,c=0,d=this.shapes.head;null!=d;){var f=d.elt;f.zip_localCOM&&(f.zip_localCOM=!1,f.type==g.id_ShapeType_POLYGON&&f.polygon.__validate_localCOM(),null!=f.wrap_localCOM&&(f.wrap_localCOM.zpp_inner.x=f.localCOMx,f.wrap_localCOM.zpp_inner.y=f.localCOMy));f.validate_area_inertia();var e=f.area*f.material.density,a=a+f.localCOMx*e,b=b+f.localCOMy*e,c=c+f.area*f.material.density,d=d.next}0!=c&&(d=1/c,this.localCOMx=a*
d,this.localCOMy=b*d);null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy);this.zip_mass&&this.massMode==g.id_MassMode_DEFAULT&&(this.zip_mass=!1,this.cmass=c,this.type==g.id_BodyType_DYNAMIC?(this.mass=this.cmass,this.imass=this.smass=1/this.mass):(this.mass=Math.POSITIVE_INFINITY,this.imass=this.smass=0))}},validate_worldCOM:function(){this.zip_worldCOM&&(this.zip_worldCOM=!1,this.validate_localCOM(),this.zip_axis&&(this.zip_axis=
!1,this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot),null),this.worldCOMx=this.posx+(this.axisy*this.localCOMx-this.axisx*this.localCOMy),this.worldCOMy=this.posy+(this.localCOMx*this.axisx+this.localCOMy*this.axisy),null!=this.wrap_worldCOM&&(this.wrap_worldCOM.zpp_inner.x=this.worldCOMx,this.wrap_worldCOM.zpp_inner.y=this.worldCOMy))},aabb_validate:function(){this.validate_aabb()},shapes_adder:function(a){return a.zpp_inner.body!=this?(null!=a.zpp_inner.body&&a.zpp_inner.body.wrap_shapes.remove(a),
a.zpp_inner.body=this,a.zpp_inner.addedToBody(),null!=this.space&&this.space.added_shape(a.zpp_inner,null),a.zpp_inner.type==g.id_ShapeType_POLYGON&&(a.zpp_inner.polygon.invalidate_gaxi(),a.zpp_inner.polygon.invalidate_gverts()),!0):!1},shapes_subber:function(a){null!=this.space&&this.space.removed_shape(a.zpp_inner);a.zpp_inner.body=null;a.zpp_inner.removedFromBody()},shapes_invalidate:function(){this.invalidate_shapes()},addedToSpace:function(){null==rb.zpp_pool?this.component=new rb:(this.component=
rb.zpp_pool,rb.zpp_pool=this.component.next,this.component.next=null);null;this.component.isBody=!0;this.component.body=this;this.__iaddedToSpace()},removedFromSpace:function(){for(;null!=this.arbiters.head;){var a=this.arbiters.pop_unsafe();a.cleared=!0;a.b2==this&&a.b1.arbiters.inlined_try_remove(a);a.b1==this&&a.b2.arbiters.inlined_try_remove(a);null!=a.pair&&(a.pair.arb=null,a.pair=null);a.active=!1;this.space.f_arbiters.modified=!0}a=this.component;a.body=null;a.constraint=null;null;a.next=rb.zpp_pool;
rb.zpp_pool=a;this.component=null;this.__iremovedFromSpace()},__class__:Zc});var Cg=function(){this.compound=this.space=null;this.depth=0;this.outer=this.bodies=this.constraints=this.compounds=this.wrap_bodies=this.wrap_constraints=this.wrap_compounds=null};i["zpp_nape.phys.ZPP_Compound"]=Cg;Cg.__name__=["zpp_nape","phys","ZPP_Compound"];Cg.__super__=Ba;Cg.prototype=z(Ba.prototype,{__imutable_midstep:function(){},addedToSpace:function(){this.__iaddedToSpace()},removedFromSpace:function(){this.__iremovedFromSpace()},
__class__:Cg});var ph=function(){this.wrap_gravity=null;this.viscosity=this.density=this.gravityx=this.gravityy=0;this.shapes=null};i["zpp_nape.phys.ZPP_FluidProperties"]=ph;ph.__name__=["zpp_nape","phys","ZPP_FluidProperties"];ph.prototype={__class__:ph};var O=function(){this.dynamicFriction=this.staticFriction=this.density=this.elasticity=this.rollingFriction=0;this.next=this.outer=this.shapes=null;this.shapes=new Pd;this.elasticity=0;this.dynamicFriction=1;this.staticFriction=2;this.density=0.001;
this.rollingFriction=0.01};i["zpp_nape.phys.ZPP_Material"]=O;O.__name__=["zpp_nape","phys","ZPP_Material"];O.prototype={wrapper:function(){if(null==this.outer){this.outer=new sa;var a=this.outer.zpp_inner;a.outer=null;a.next=O.zpp_pool;O.zpp_pool=a;this.outer.zpp_inner=this}return this.outer},set:function(a){this.dynamicFriction=a.dynamicFriction;this.staticFriction=a.staticFriction;this.density=a.density;this.elasticity=a.elasticity;this.rollingFriction=a.rollingFriction},invalidate:function(a){for(var b=
this.shapes.head;null!=b;)b.elt.invalidate_material(a),b=b.next},__class__:O};var Gc=function(a){this.zip_aabb=!1;this.sweep=this.node=this.pairs=this.aabb=null;this.fluidEnabled=this.sensorEnabled=!1;this.circle=this.polygon=this.refmaterial=this.material=this.filter=this.fluidProperties=null;this.sweepCoef=0;this.zip_sweepRadius=!1;this.sweepRadius=0;this.wrap_localCOM=null;this.zip_worldCOM=!1;this.worldCOMx=this.worldCOMy=0;this.zip_localCOM=!1;this.localCOMx=this.localCOMy=0;this.zip_angDrag=
!1;this.inertia=this.angDrag=0;this.zip_area_inertia=!1;this.type=this.area=0;this.outer=this.body=null;Ba.call(this);this.pairs=new Dg;this.ishape=this;this.type=a;this.aabb=W.get(0,0,0,0);this.aabb._immutable=!0;this.aabb._validate=E(this,this.aabb_validate);this.zip_area_inertia=this.zip_angDrag=this.zip_localCOM=this.zip_sweepRadius=!0;this.worldCOMy=this.worldCOMx=this.localCOMy=this.localCOMx=0;this.sensorEnabled=this.fluidEnabled=!1;this.body=this.fluidProperties=null;this.refmaterial=new O;
this.sweepRadius=this.sweepCoef=0};i["zpp_nape.shape.ZPP_Shape"]=Gc;Gc.__name__=["zpp_nape","shape","ZPP_Shape"];Gc.__super__=Ba;Gc.prototype=z(Ba.prototype,{validate_sweepRadius:function(){this.zip_sweepRadius&&(this.zip_sweepRadius=!1,this.type==g.id_ShapeType_CIRCLE?this.circle.__validate_sweepRadius():this.polygon.__validate_sweepRadius())},validate_area_inertia:function(){this.zip_area_inertia&&(this.zip_area_inertia=!1,this.type==g.id_ShapeType_CIRCLE?this.circle.__validate_area_inertia():this.polygon.__validate_area_inertia())},
validate_angDrag:function(){if(this.zip_angDrag||this.refmaterial.dynamicFriction!=this.material.dynamicFriction)this.zip_angDrag=!1,this.refmaterial.dynamicFriction=this.material.dynamicFriction,this.type==g.id_ShapeType_CIRCLE?this.circle.__validate_angDrag():this.polygon.__validate_angDrag()},validate_worldCOM:function(){this.zip_worldCOM&&null!=this.body&&(this.zip_worldCOM=!1,this.zip_localCOM&&(this.zip_localCOM=!1,this.type==g.id_ShapeType_POLYGON&&this.polygon.__validate_localCOM(),null!=
this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)),this.body.validate_axis(),this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy),this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy))},invalidate_area_inertia:function(){this.zip_area_inertia=!0;null!=this.body&&(this.body.invalidate_localCOM(),this.body.invalidate_mass(),this.body.invalidate_inertia())},
invalidate_angDrag:function(){this.zip_angDrag=!0},invalidate_localCOM:function(){this.zip_localCOM=!0;this.invalidate_area_inertia();this.type==g.id_ShapeType_CIRCLE&&(this.zip_sweepRadius=!0);this.invalidate_angDrag();this.invalidate_worldCOM();null!=this.body&&this.body.invalidate_localCOM()},invalidate_worldCOM:function(){this.zip_aabb=this.zip_worldCOM=!0;null!=this.body&&(this.body.zip_aabb=!0)},invalidate_material:function(a){0!=(a&O.WAKE)&&this.wake();0!=(a&O.ARBITERS)&&null!=this.body&&this.body.refreshArbiters();
0!=(a&O.PROPS)&&null!=this.body&&(this.body.invalidate_localCOM(),this.body.invalidate_mass(),this.body.invalidate_inertia());0!=(a&O.ANGDRAG)&&this.invalidate_angDrag();this.refmaterial.set(this.material)},invalidate_filter:function(){this.wake()},aabb_validate:function(){this.zip_aabb&&null!=this.body&&(this.zip_aabb=!1,this.type==g.id_ShapeType_CIRCLE?this.circle.__validate_aabb():this.polygon.__validate_aabb())},setMaterial:function(a){this.material!=a&&(null!=this.body&&null!=this.body.space&&
null!=this.material&&this.material.shapes.remove(this),this.material=a,null!=this.body&&null!=this.body.space&&a.shapes.add(this),this.wake(),null!=this.body&&this.body.refreshArbiters())},setFilter:function(a){this.filter!=a&&(null!=this.body&&null!=this.body.space&&null!=this.filter&&this.filter.shapes.remove(this),this.filter=a,null!=this.body&&null!=this.body.space&&a.shapes.add(this),this.wake())},__immutable_midstep:function(){},addedToBody:function(){this.invalidate_worldCOM();this.zip_aabb=
!0;null!=this.body&&(this.body.zip_aabb=!0)},removedFromBody:function(){},addedToSpace:function(){this.__iaddedToSpace();this.material.shapes.add(this);this.filter.shapes.add(this);null!=this.fluidProperties&&this.fluidProperties.shapes.add(this)},removedFromSpace:function(){this.__iremovedFromSpace();this.material.shapes.remove(this);this.filter.shapes.remove(this);null!=this.fluidProperties&&this.fluidProperties.shapes.remove(this)},__class__:Gc});var Eg=function(){this.radius=0};i["zpp_nape.shape.ZPP_Circle"]=
Eg;Eg.__name__=["zpp_nape","shape","ZPP_Circle"];Eg.__super__=Gc;Eg.prototype=z(Gc.prototype,{__validate_aabb:function(){this.zip_worldCOM&&null!=this.body&&(this.zip_worldCOM=!1,this.zip_localCOM&&(this.zip_localCOM=!1,this.type==g.id_ShapeType_POLYGON&&this.polygon.__validate_localCOM(),null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)),this.body.validate_axis(),this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*
this.localCOMy),this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy));var a=this.radius,b=this.radius;this.aabb.minx=this.worldCOMx-a;this.aabb.miny=this.worldCOMy-b;this.aabb.maxx=this.worldCOMx+a;this.aabb.maxy=this.worldCOMy+b},_force_validate_aabb:function(){this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy);this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy);this.aabb.minx=
this.worldCOMx-this.radius;this.aabb.miny=this.worldCOMy-this.radius;this.aabb.maxx=this.worldCOMx+this.radius;this.aabb.maxy=this.worldCOMy+this.radius},__validate_sweepRadius:function(){this.sweepCoef=Math.sqrt(this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy);this.sweepRadius=this.sweepCoef+this.radius},__validate_area_inertia:function(){var a=this.radius*this.radius;this.area=a*Math.PI;this.inertia=0.5*a+(this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy)},__validate_angDrag:function(){var a=
this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy,b=this.radius*this.radius;this.angDrag=(a+2*b)*this.material.dynamicFriction*o.fluidAngularDragFriction+0.5*o.fluidAngularDrag*(1+o.fluidVacuumDrag)*a;this.angDrag/=2*(a+0.5*b)},__class__:Eg});var da=function(){this.tp0=this.tp1=0;this.lp0=this.gp0=this.lp1=this.gp1=null;this.length=this.lprojection=this.gprojection=0;this.wrap_gnorm=null;this.gnormx=this.gnormy=0;this.wrap_lnorm=null;this.lnormx=this.lnormy=0;this.next=this.polygon=this.outer=
null;this.gprojection=this.lprojection=this.length=this.gnormy=this.gnormx=this.lnormy=this.lnormx=0};i["zpp_nape.shape.ZPP_Edge"]=da;da.__name__=["zpp_nape","shape","ZPP_Edge"];da.prototype={wrapper:function(){null==this.outer&&(da.internal=!0,this.outer=new sg,da.internal=!1,this.outer.zpp_inner=this);return this.outer},__class__:da};var lf=function(){this.reverse_flag=this.zip_lverts=this.zip_laxi=this.zip_gverts=this.zip_gaxi=this.zip_valid=this.zip_sanitation=!1;this.edgeCnt=0;this.outer_zn=
this.lverts=this.wrap_lverts=this.gverts=this.wrap_gverts=this.edges=this.wrap_edges=null;Gc.call(this,g.id_ShapeType_POLYGON);this.polygon=this;this.lverts=new X;this.gverts=new X;this.edges=new Fg;this.edgeCnt=0};i["zpp_nape.shape.ZPP_Polygon"]=lf;lf.__name__=["zpp_nape","shape","ZPP_Polygon"];lf.__super__=Gc;lf.prototype=z(Gc.prototype,{lverts_pa_invalidate:function(){this.invalidate_lverts()},gverts_pa_validate:function(){this.validate_gverts()},lverts_post_adder:function(a){a.zpp_inner._invalidate=
E(this,this.lverts_pa_invalidate);for(var b=null,c=null,d=this.lverts.next;null!=d&&!(d==a.zpp_inner);){b=null==b?this.gverts.next:b.next,c=null==c?this.edges.head:c.next;d=d.next}a=X.get(0,0,!0);this.gverts.insert(b,a);null!=this.lverts.next.next&&(null==this.lverts.next.next.next?(null==da.zpp_pool?c=new da:(c=da.zpp_pool,da.zpp_pool=c.next,c.next=null),null,c.polygon=this,this.edges.add(c),null==da.zpp_pool?c=new da:(c=da.zpp_pool,da.zpp_pool=c.next,c.next=null),null,c.polygon=this,this.edges.add(c),
this.edgeCnt+=2):(null==da.zpp_pool?b=new da:(b=da.zpp_pool,da.zpp_pool=b.next,b.next=null),null,b.polygon=this,this.edges.insert(c,b),this.edgeCnt++));a._validate=E(this,this.gverts_pa_validate)},lverts_subber:function(a){this.cleanup_lvert(a.zpp_inner)},lverts_invalidate:function(){this.invalidate_lverts()},lverts_validate:function(){this.validate_lverts()},getlverts:function(){this.wrap_lverts=ad.get(this.lverts);this.wrap_lverts.zpp_inner.post_adder=E(this,this.lverts_post_adder);this.wrap_lverts.zpp_inner.subber=
E(this,this.lverts_subber);this.wrap_lverts.zpp_inner._invalidate=E(this,this.lverts_invalidate);this.wrap_lverts.zpp_inner._validate=E(this,this.lverts_validate);this.wrap_lverts.zpp_inner.reverse_flag=this.reverse_flag},invalidate_lverts:function(){this.invalidate_laxi();this.invalidate_area_inertia();this.invalidate_angDrag();this.invalidate_localCOM();this.invalidate_gverts();this.zip_sanitation=this.zip_valid=this.zip_lverts=!0;null!=this.body&&this.body.wake()},invalidate_laxi:function(){this.invalidate_gaxi();
this.zip_laxi=this.zip_sweepRadius=!0},invalidate_gverts:function(){this.zip_aabb=!0;null!=this.body&&(this.body.zip_aabb=!0);this.zip_gverts=!0},invalidate_gaxi:function(){this.zip_gaxi=!0},validate_lverts:function(){this.zip_lverts&&(this.zip_lverts=!1,2<this.lverts.length&&(this.validate_area_inertia(),0>this.area&&(this.reverse_vertices(),this.area=-this.area)))},cleanup_lvert:function(a){for(var b=null,c=null,d=this.lverts.next;null!=d&&!(d==a);){b=null==b?this.gverts.next:b.next,c=null==c?this.edges.head:
c.next;d=d.next}a=null==b?this.gverts.next:b.next;this.gverts.erase(b);null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null);a._isimmutable=null;a._validate=null;a._invalidate=null;a.next=X.zpp_pool;X.zpp_pool=a;2==this.edgeCnt?(c=this.edges.pop_unsafe(),c.polygon=null,c.next=da.zpp_pool,da.zpp_pool=c,c=this.edges.pop_unsafe(),c.polygon=null,c.next=da.zpp_pool,da.zpp_pool=c,this.edgeCnt=0):0!=this.edgeCnt&&(b=null==c?this.edges.head.elt:c.next.elt,this.edges.erase(c),b.polygon=null,b.next=da.zpp_pool,
da.zpp_pool=b,this.edgeCnt--)},splice_collinear:function(){this.zip_sanitation&&(this.zip_sanitation=!1,this.splice_collinear_real())},splice_collinear_real:function(){if(!(null==this.lverts.next||null==this.lverts.next.next)&&null!=this.lverts.next.next.next){for(var a=null,b=this.lverts.next;null!=b;){var c=b,d=null==b.next?this.lverts.next:b.next;sb.vec_dsq(c.x,c.y,d.x,d.y)<o.epsilon*o.epsilon?(this.cleanup_lvert(b),b=this.lverts.erase(a)):(a=b,b=b.next)}if(null!=this.lverts.next){do{a=!1;for(b=
this.lverts.next;null!=b;){var c=null==b.next?this.lverts.next:b.next,f=b,d=c,e=null==c.next?this.lverts.next:c.next,g=0,h=0,g=d.x-f.x,h=d.y-f.y,i=f=0,f=e.x-d.x,i=e.y-d.y,d=i*g-f*h;d*d>=o.epsilon*o.epsilon||(this.cleanup_lvert(c),this.lverts.erase(null==b.next?null:b),a=!0);b=b.next}}while(a)}}},reverse_vertices:function(){this.lverts.reverse();this.gverts.reverse();this.edges.reverse();var a=this.edges.iterator_at(this.edgeCnt-1),b=this.edges.pop_unsafe();this.edges.insert(a,b);this.reverse_flag=
!this.reverse_flag;null!=this.wrap_lverts&&(this.wrap_lverts.zpp_inner.reverse_flag=this.reverse_flag);null!=this.wrap_gverts&&(this.wrap_gverts.zpp_inner.reverse_flag=this.reverse_flag);null!=this.wrap_edges&&(this.wrap_edges.zpp_inner.reverse_flag=this.reverse_flag)},validate_laxi:function(){if(this.zip_laxi){this.zip_laxi=!1;this.validate_lverts();for(var a=this.edges.head,b=this.lverts.next,c=b,b=b.next;null!=b;){var d=b,f=a.elt,a=a.next;f.lp0=c;f.lp1=d;var e=0,g=0,e=c.x-d.x,g=c.y-d.y,h=Math.sqrt(e*
e+g*g);f.length=h;h=1/h;e*=h;g*=h;h=e;e=-g;g=h;f.lprojection=e*c.x+g*c.y;f.lnormx=e;f.lnormy=g;null!=f.wrap_lnorm&&(f.wrap_lnorm.zpp_inner.x=e,f.wrap_lnorm.zpp_inner.y=g);c=d;b=b.next}f=this.lverts.next;a=a.elt;a.lp0=c;a.lp1=f;d=b=0;b=c.x-f.x;d=c.y-f.y;f=Math.sqrt(b*b+d*d);a.length=f;f=1/f;e=b*f;b=-(d*f);d=e;a.lprojection=b*c.x+d*c.y;a.lnormx=b;a.lnormy=d;null!=a.wrap_lnorm&&(a.wrap_lnorm.zpp_inner.x=b,a.wrap_lnorm.zpp_inner.y=d)}},validate_gverts:function(){if(this.zip_gverts&&null!=this.body){this.zip_gverts=
!1;this.validate_lverts();this.body.validate_axis();for(var a=this.lverts.next,b=this.gverts.next;null!=b;){var c=b,d=a,a=a.next;c.x=this.body.posx+(this.body.axisy*d.x-this.body.axisx*d.y);c.y=this.body.posy+(d.x*this.body.axisx+d.y*this.body.axisy);b=b.next}}},validate_gaxi:function(){if(this.zip_gaxi&&null!=this.body){this.zip_gaxi=!1;this.validate_laxi();this.body.validate_axis();this.validate_gverts();for(var a=this.edges.head,b=this.gverts.next,c=b,b=b.next;null!=b;){var d=b,f=a.elt,a=a.next;
f.gp0=c;f.gp1=d;f.gnormx=this.body.axisy*f.lnormx-this.body.axisx*f.lnormy;f.gnormy=f.lnormx*this.body.axisx+f.lnormy*this.body.axisy;f.gprojection=this.body.posx*f.gnormx+this.body.posy*f.gnormy+f.lprojection;null!=f.wrap_gnorm&&(f.wrap_gnorm.zpp_inner.x=f.gnormx,f.wrap_gnorm.zpp_inner.y=f.gnormy);f.tp0=f.gp0.y*f.gnormx-f.gp0.x*f.gnormy;f.tp1=f.gp1.y*f.gnormx-f.gp1.x*f.gnormy;c=d;b=b.next}b=this.gverts.next;a=a.elt;a.gp0=c;a.gp1=b;a.gnormx=this.body.axisy*a.lnormx-this.body.axisx*a.lnormy;a.gnormy=
a.lnormx*this.body.axisx+a.lnormy*this.body.axisy;a.gprojection=this.body.posx*a.gnormx+this.body.posy*a.gnormy+a.lprojection;null!=a.wrap_gnorm&&(a.wrap_gnorm.zpp_inner.x=a.gnormx,a.wrap_gnorm.zpp_inner.y=a.gnormy);a.tp0=a.gp0.y*a.gnormx-a.gp0.x*a.gnormy;a.tp1=a.gp1.y*a.gnormx-a.gp1.x*a.gnormy}},__validate_aabb:function(){this.validate_gverts();var a=this.gverts.next;this.aabb.minx=a.x;this.aabb.miny=a.y;this.aabb.maxx=a.x;this.aabb.maxy=a.y;for(a=this.gverts.next.next;null!=a;){var b=a;b.x<this.aabb.minx&&
(this.aabb.minx=b.x);b.x>this.aabb.maxx&&(this.aabb.maxx=b.x);b.y<this.aabb.miny&&(this.aabb.miny=b.y);b.y>this.aabb.maxy&&(this.aabb.maxy=b.y);a=a.next}},_force_validate_aabb:function(){var a=this.lverts.next,b=this.gverts.next,c=a,a=a.next;b.x=this.body.posx+(this.body.axisy*c.x-this.body.axisx*c.y);b.y=this.body.posy+(c.x*this.body.axisx+c.y*this.body.axisy);this.aabb.minx=b.x;this.aabb.miny=b.y;this.aabb.maxx=b.x;this.aabb.maxy=b.y;for(b=this.gverts.next.next;null!=b;){var c=b,d=a,a=a.next;c.x=
this.body.posx+(this.body.axisy*d.x-this.body.axisx*d.y);c.y=this.body.posy+(d.x*this.body.axisx+d.y*this.body.axisy);c.x<this.aabb.minx&&(this.aabb.minx=c.x);c.x>this.aabb.maxx&&(this.aabb.maxx=c.x);c.y<this.aabb.miny&&(this.aabb.miny=c.y);c.y>this.aabb.maxy&&(this.aabb.maxy=c.y);b=b.next}},__validate_sweepRadius:function(){var a=0,b=0;this.validate_laxi();for(var c=this.lverts.next;null!=c;){var d=c,d=d.x*d.x+d.y*d.y;d>a&&(a=d);c=c.next}for(c=this.edges.head;null!=c;){d=c.elt;if(d.lprojection<b&&
(b=d.lprojection,0>b))break;c=c.next}0>b&&(b=0);this.sweepRadius=Math.sqrt(a);this.sweepCoef=this.sweepRadius-b},__validate_area_inertia:function(){if(null==this.lverts.next||null==this.lverts.next.next||null==this.lverts.next.next.next)this.inertia=this.area=0;else{for(var a=this.area=0,b=0,c=this.lverts.next,d=c,f=c=c.next,c=c.next;null!=c;){var e=c,g=f.y*d.x-f.x*d.y,a=a+g*(f.x*f.x+f.y*f.y+(f.x*d.x+f.y*d.y)+(d.x*d.x+d.y*d.y)),b=b+g;this.area+=f.x*(e.y-d.y);d=f;f=e;c=c.next}g=c=this.lverts.next;
e=f.y*d.x-f.x*d.y;a+=e*(f.x*f.x+f.y*f.y+(f.x*d.x+f.y*d.y)+(d.x*d.x+d.y*d.y));this.area+=f.x*(g.y-d.y);d=f;f=g;c=c.next;g=f.y*d.x-f.x*d.y;a+=g*(f.x*f.x+f.y*f.y+(f.x*d.x+f.y*d.y)+(d.x*d.x+d.y*d.y));this.area+=f.x*(c.y-d.y);this.inertia=a/(6*(b+e+g));this.area*=0.5;0>this.area&&(this.area=-this.area,this.reverse_vertices())}},__validate_angDrag:function(){this.validate_area_inertia();this.validate_laxi();for(var a=0,b=this.edges.head,c=0,d=this.lverts.next,f=d,d=d.next;null!=d;){var e=d,g=b.elt,b=b.next,
c=c+g.length,h=0,i=0,h=e.x-f.x,i=e.y-f.y,a=a+g.length*o.fluidAngularDragFriction*this.material.dynamicFriction*g.lprojection*g.lprojection,j=-(f.y*g.lnormx-f.x*g.lnormy)/(i*g.lnormx-h*g.lnormy);if(0<j){var l;l=1<j?1:j;var k=0,m=0,k=f.x,m=f.y,p=l,k=k+h*p,m=m+i*p,p=g.lnormy*f.x-g.lnormx*f.y,k=g.lnormy*k-g.lnormx*m,a=a+(k*k*k-p*p*p)/(3*(k-p))*l*g.length*o.fluidAngularDrag}1>j&&(j=0>j?0:j,k=l=0,l=f.x,k=f.y,f=j,l+=h*f,k+=i*f,f=g.lnormy*l-g.lnormx*k,h=g.lnormy*e.x-g.lnormx*e.y,a+=(h*h*h-f*f*f)/(3*(h-f))*
o.fluidVacuumDrag*(1-j)*g.length*o.fluidAngularDrag);f=e;d=d.next}d=this.lverts.next;b=b.elt;c+=b.length;g=e=0;e=d.x-f.x;g=d.y-f.y;a+=b.length*o.fluidAngularDragFriction*this.material.dynamicFriction*b.lprojection*b.lprojection;h=-(f.y*b.lnormx-f.x*b.lnormy)/(g*b.lnormx-e*b.lnormy);0<h&&(i=1<h?1:h,k=l=0,l=f.x,k=f.y,j=b.lnormy*f.x-b.lnormx*f.y,l=b.lnormy*(l+e*i)-b.lnormx*(k+g*i),a+=(l*l*l-j*j*j)/(3*(l-j))*i*b.length*o.fluidAngularDrag);1>h&&(h=0>h?0:h,j=i=0,i=f.x,j=f.y,f=b.lnormy*(i+e*h)-b.lnormx*
(j+g*h),d=b.lnormy*d.x-b.lnormx*d.y,a+=(d*d*d-f*f*f)/(3*(d-f))*o.fluidVacuumDrag*(1-h)*b.length*o.fluidAngularDrag);this.angDrag=a/(this.inertia*c)},__validate_localCOM:function(){if(null==this.lverts.next.next)this.localCOMx=this.lverts.next.x,this.localCOMy=this.lverts.next.y;else if(null==this.lverts.next.next.next)this.localCOMx=this.lverts.next.x,this.localCOMy=this.lverts.next.y,this.localCOMx+=1*this.lverts.next.next.x,this.localCOMy+=1*this.lverts.next.next.y,this.localCOMx*=0.5,this.localCOMy*=
0.5;else{for(var a=this.localCOMy=this.localCOMx=0,b=this.lverts.next,c=b,d=b=b.next,b=b.next;null!=b;){var f=b,a=a+d.x*(f.y-c.y),c=f.y*d.x-f.x*d.y;this.localCOMx+=(d.x+f.x)*c;this.localCOMy+=(d.y+f.y)*c;c=d;d=f;b=b.next}f=b=this.lverts.next;a+=d.x*(f.y-c.y);c=f.y*d.x-f.x*d.y;this.localCOMx+=(d.x+f.x)*c;this.localCOMy+=(d.y+f.y)*c;c=d;d=f;b=b.next;a+=d.x*(b.y-c.y);c=b.y*d.x-b.x*d.y;this.localCOMx+=(d.x+b.x)*c;this.localCOMy+=(d.y+b.y)*c;a=1/(3*a);this.localCOMx*=a;this.localCOMy*=a}},__class__:lf});
var Hc=function(){this.sweep=this.dynab=null;this.is_sweep=!1;this.space=null};i["zpp_nape.space.ZPP_Broadphase"]=Hc;Hc.__name__=["zpp_nape","space","ZPP_Broadphase"];Hc.prototype={insert:function(a){this.is_sweep?this.sweep.__insert(a):this.dynab.__insert(a)},remove:function(a){this.is_sweep?this.sweep.__remove(a):this.dynab.__remove(a)},sync:function(a){this.is_sweep?!this.sweep.space.continuous&&a.zip_aabb&&null!=a.body&&(a.zip_aabb=!1,a.type==g.id_ShapeType_CIRCLE?a.circle.__validate_aabb():a.polygon.__validate_aabb()):
this.dynab.__sync(a)},broadphase:function(){},__class__:Hc};var Ka=function(){this.synced=this.first_sync=!1;this.snext=null;this.moved=!1;this.next=this.mnext=null;this.height=0;this.parent=this.child1=this.child2=null;this.dyn=!1;this.aabb=this.shape=null;this.height=-1};i["zpp_nape.space.ZPP_AABBNode"]=Ka;Ka.__name__=["zpp_nape","space","ZPP_AABBNode"];Ka.prototype={free:function(){this.height=-1;var a=this.aabb;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null);a.wrap_min=a.wrap_max=null;a._invalidate=
null;a._validate=null;a.next=W.zpp_pool;W.zpp_pool=a;this.mnext=this.snext=this.next=this.child1=this.child2=this.parent=null},__class__:Ka};var la=function(){this.arb=this.next=null;this.id=this.di=0;this.first=this.sleeping=!1;this.n1=this.n2=null};i["zpp_nape.space.ZPP_AABBPair"]=la;la.__name__=["zpp_nape","space","ZPP_AABBPair"];la.prototype={__class__:la};var Gb=function(){this.root=null};i["zpp_nape.space.ZPP_AABBTree"]=Gb;Gb.__name__=["zpp_nape","space","ZPP_AABBTree"];Gb.prototype={inlined_insertLeaf:function(a){if(null==
this.root)this.root=a,this.root.parent=null;else{for(var b=a.aabb,c=this.root;null!=c.child1;){var d=c.child1,f=c.child2,e=c.aabb.perimeter();Gb.tmpaabb.setCombine(c.aabb,b);var g=Gb.tmpaabb.perimeter(),h=2*g,e=2*(g-e);Gb.tmpaabb.setCombine(b,d.aabb);null==d.child1?g=Gb.tmpaabb.perimeter()+e:(g=d.aabb.perimeter(),g=Gb.tmpaabb.perimeter()-g+e);Gb.tmpaabb.setCombine(b,f.aabb);if(null==f.child1)e=Gb.tmpaabb.perimeter()+e;else var i=f.aabb.perimeter(),e=Gb.tmpaabb.perimeter()-i+e;if(h<g&&h<e)break;else c=
g<e?d:f}d=c.parent;null==Ka.zpp_pool?f=new Ka:(f=Ka.zpp_pool,Ka.zpp_pool=f.next,f.next=null);null==W.zpp_pool?f.aabb=new W:(f.aabb=W.zpp_pool,W.zpp_pool=f.aabb.next,f.aabb.next=null);null;f.moved=!1;f.synced=!1;f.first_sync=!1;f.parent=d;f.aabb.setCombine(b,c.aabb);f.height=c.height+1;null!=d?(d.child1==c?d.child1=f:d.child2=f,f.child1=c,f.child2=a,c.parent=f,a.parent=f):(f.child1=c,f.child2=a,c.parent=f,this.root=a.parent=f);for(c=a.parent;null!=c;)c=this.balance(c),a=c.child1,b=c.child2,d=a.height,
f=b.height,c.height=1+(d>f?d:f),c.aabb.setCombine(a.aabb,b.aabb),c=c.parent}},removeLeaf:function(a){this.inlined_removeLeaf(a)},inlined_removeLeaf:function(a){if(a==this.root)this.root=null;else{var b=a.parent,c=b.parent,a=b.child1==a?b.child2:b.child1;if(null!=c){c.child1==b?c.child1=a:c.child2=a;a.parent=c;b.free();b.next=Ka.zpp_pool;Ka.zpp_pool=b;for(b=c;null!=b;)b=this.balance(b),a=b.child1,c=b.child2,b.aabb.setCombine(a.aabb,c.aabb),a=a.height,c=c.height,b.height=1+(a>c?a:c),b=b.parent}else this.root=
a,a.parent=null,b.free(),b.next=Ka.zpp_pool,Ka.zpp_pool=b}},balance:function(a){if(null==a.child1||2>a.height)return a;var b=a.child1,c=a.child2,d=c.height-b.height;if(1<d){var f=c.child1,e=c.child2;c.child1=a;c.parent=a.parent;a.parent=c;null!=c.parent?c.parent.child1==a?c.parent.child1=c:c.parent.child2=c:this.root=c;f.height>e.height?(c.child2=f,a.child2=e,e.parent=a,a.aabb.setCombine(b.aabb,e.aabb),c.aabb.setCombine(a.aabb,f.aabb),a.height=1+function(){var a=b.height,c=e.height;return a>c?a:c}(this),
c.height=1+function(){var b=a.height,c=f.height;return b>c?b:c}(this)):(c.child2=e,a.child2=f,f.parent=a,a.aabb.setCombine(b.aabb,f.aabb),c.aabb.setCombine(a.aabb,e.aabb),a.height=1+function(){var a=b.height,c=f.height;return a>c?a:c}(this),c.height=1+function(){var b=a.height,c=e.height;return b>c?b:c}(this));return c}if(-1>d){var g=b.child1,h=b.child2;b.child1=a;b.parent=a.parent;a.parent=b;null!=b.parent?b.parent.child1==a?b.parent.child1=b:b.parent.child2=b:this.root=b;g.height>h.height?(b.child2=
g,a.child1=h,h.parent=a,a.aabb.setCombine(c.aabb,h.aabb),b.aabb.setCombine(a.aabb,g.aabb),a.height=1+function(){var a=c.height,b=h.height;return a>b?a:b}(this),b.height=1+function(){var b=a.height,c=g.height;return b>c?b:c}(this)):(b.child2=h,a.child1=g,g.parent=a,a.aabb.setCombine(c.aabb,g.aabb),b.aabb.setCombine(a.aabb,h.aabb),a.height=1+function(){var a=c.height,b=g.height;return a>b?a:b}(this),b.height=1+function(){var b=a.height,c=h.height;return b>c?b:c}(this));return b}return a},__class__:Gb};
var sf=function(a){this.stree=this.dtree=this.pairs=this.syncs=this.moves=null;Hc.call(this);this.space=a;this.is_sweep=!1;this.dynab=this;this.stree=new Gb;this.dtree=new Gb};i["zpp_nape.space.ZPP_DynAABBPhase"]=sf;sf.__name__=["zpp_nape","space","ZPP_DynAABBPhase"];sf.__super__=Hc;sf.prototype=z(Hc.prototype,{__insert:function(a){var b;null==Ka.zpp_pool?b=new Ka:(b=Ka.zpp_pool,Ka.zpp_pool=b.next,b.next=null);null==W.zpp_pool?b.aabb=new W:(b.aabb=W.zpp_pool,W.zpp_pool=b.aabb.next,b.aabb.next=null);
null;b.moved=!1;b.synced=!1;b.first_sync=!1;b.shape=a;a.node=b;b.synced=!0;b.first_sync=!0;b.snext=this.syncs;this.syncs=b},__remove:function(a){var b=a.node;b.first_sync||(b.dyn?this.dtree.removeLeaf(b):this.stree.removeLeaf(b));a.node=null;if(b.synced){for(var c=null,d=this.syncs;null!=d&&!(d==b);){c=d;d=d.snext}null==c?this.syncs=d.snext:c.snext=d.snext;d.snext=null;b.synced=!1}if(b.moved){c=null;for(d=this.moves;null!=d&&!(d==b);){c=d;d=d.mnext}null==c?this.moves=d.mnext:c.mnext=d.mnext;d.mnext=
null;b.moved=!1}for(var c=null,f=this.pairs;null!=f;)d=f.next,f.n1==b||f.n2==b?(null==c?this.pairs=d:c.next=d,null!=f.arb&&(f.arb.pair=null),f.arb=null,f.n1.shape.pairs.remove(f),f.n2.shape.pairs.remove(f),f.n1=f.n2=null,f.sleeping=!1,f.next=la.zpp_pool,la.zpp_pool=f):c=f,f=d;for(;null!=a.pairs.head;)c=a.pairs.pop_unsafe(),c.n1==b?c.n2.shape.pairs.remove(c):c.n1.shape.pairs.remove(c),null!=c.arb&&(c.arb.pair=null),c.arb=null,c.n1=c.n2=null,c.sleeping=!1,c.next=la.zpp_pool,la.zpp_pool=c;b.free();b.next=
Ka.zpp_pool;Ka.zpp_pool=b},__sync:function(a){var b=a.node;if(!b.synced&&(!this.space.continuous&&a.zip_aabb&&null!=a.body&&(a.zip_aabb=!1,a.type==g.id_ShapeType_CIRCLE?a.circle.__validate_aabb():a.polygon.__validate_aabb()),b.dyn!=(a.body.type==g.id_BodyType_STATIC?!1:!a.body.component.sleeping)||!b.aabb.contains(a.aabb)))b.synced=!0,b.snext=this.syncs,this.syncs=b},broadphase:function(a,b){for(var c=this.syncs;null!=c;){var d=c.shape;c.first_sync?c.first_sync=!1:(c.dyn?this.dtree:this.stree).inlined_removeLeaf(c);
var f=c.aabb;!a.continuous&&d.zip_aabb&&null!=d.body&&(d.zip_aabb=!1,d.type==g.id_ShapeType_CIRCLE?d.circle.__validate_aabb():d.polygon.__validate_aabb());f.setExpand(d.aabb,3);((d.body.type==g.id_BodyType_STATIC?c.dyn=!1:c.dyn=!d.body.component.sleeping)?this.dtree:this.stree).inlined_insertLeaf(c);c.synced=!1;c=c.snext}for(;null!=this.syncs;)if(c=this.syncs,this.syncs=c.snext,c.snext=null,!c.moved&&(c.moved=!1,d=c.shape,!d.body.component.sleeping)){var f=c.aabb,e=null;null!=this.dtree.root&&(this.dtree.root.next=
e,e=this.dtree.root);for(;null!=e;){var h;h=e;e=h.next;h.next=null;if(h!=c)if(null==h.child1){var i=h.shape;if(i.body!=d.body&&!(i.body.type==g.id_BodyType_STATIC&&d.body.type==g.id_BodyType_STATIC)&&f.intersect(h.aabb)){var n,j;d.id<i.id?(n=d.id,j=i.id):(n=i.id,j=d.id);for(var l=null,k=(d.pairs.length<i.pairs.length?d:i).pairs.head;null!=k;){var m=k.elt;if(m.id==n&&m.di==j){l=m;break}k=k.next}null!=l?l.sleeping&&(l.sleeping=!1,l.next=this.pairs,this.pairs=l,l.first=!0):(null==la.zpp_pool?l=new la:
(l=la.zpp_pool,la.zpp_pool=l.next,l.next=null),null,l.n1=c,l.n2=h,l.id=n,l.di=j,l.next=this.pairs,this.pairs=l,l.first=!0,d.pairs.inlined_add(l),i.pairs.inlined_add(l))}}else f.intersect(h.aabb)&&(null!=h.child1&&(h.child1.next=e,e=h.child1),null!=h.child2&&(h.child2.next=e,e=h.child2))}null!=this.stree.root&&(this.stree.root.next=e,e=this.stree.root);for(;null!=e;)if(h=e,e=h.next,h.next=null,h!=c)if(null==h.child1){if(i=h.shape,i.body!=d.body&&!(i.body.type==g.id_BodyType_STATIC&&d.body.type==g.id_BodyType_STATIC)&&
f.intersect(h.aabb)){d.id<i.id?(n=d.id,j=i.id):(n=i.id,j=d.id);l=null;for(k=(d.pairs.length<i.pairs.length?d:i).pairs.head;null!=k;){m=k.elt;if(m.id==n&&m.di==j){l=m;break}k=k.next}null!=l?l.sleeping&&(l.sleeping=!1,l.next=this.pairs,this.pairs=l,l.first=!0):(null==la.zpp_pool?l=new la:(l=la.zpp_pool,la.zpp_pool=l.next,l.next=null),null,l.n1=c,l.n2=h,l.id=n,l.di=j,l.next=this.pairs,this.pairs=l,l.first=!0,d.pairs.inlined_add(l),i.pairs.inlined_add(l))}}else f.intersect(h.aabb)&&(null!=h.child1&&(h.child1.next=
e,e=h.child1),null!=h.child2&&(h.child2.next=e,e=h.child2))}for(;null!=this.moves;)if(c=this.moves,this.moves=c.mnext,c.mnext=null,c.moved=!1,d=c.shape,!d.body.component.sleeping){f=c.aabb;e=null;null!=this.dtree.root&&(this.dtree.root.next=e,e=this.dtree.root);for(;null!=e;)if(h=e,e=h.next,h.next=null,h!=c)if(null==h.child1){if(i=h.shape,i.body!=d.body&&!(i.body.type==g.id_BodyType_STATIC&&d.body.type==g.id_BodyType_STATIC)&&f.intersect(h.aabb)){d.id<i.id?(n=d.id,j=i.id):(n=i.id,j=d.id);l=null;for(k=
(d.pairs.length<i.pairs.length?d:i).pairs.head;null!=k;){m=k.elt;if(m.id==n&&m.di==j){l=m;break}k=k.next}null!=l?l.sleeping&&(l.sleeping=!1,l.next=this.pairs,this.pairs=l,l.first=!0):(null==la.zpp_pool?l=new la:(l=la.zpp_pool,la.zpp_pool=l.next,l.next=null),null,l.n1=c,l.n2=h,l.id=n,l.di=j,l.next=this.pairs,this.pairs=l,l.first=!0,d.pairs.inlined_add(l),i.pairs.inlined_add(l))}}else f.intersect(h.aabb)&&(null!=h.child1&&(h.child1.next=e,e=h.child1),null!=h.child2&&(h.child2.next=e,e=h.child2));null!=
this.stree.root&&(this.stree.root.next=e,e=this.stree.root);for(;null!=e;)if(h=e,e=h.next,h.next=null,h!=c)if(null==h.child1){if(i=h.shape,i.body!=d.body&&!(i.body.type==g.id_BodyType_STATIC&&d.body.type==g.id_BodyType_STATIC)&&f.intersect(h.aabb)){d.id<i.id?(n=d.id,j=i.id):(n=i.id,j=d.id);l=null;for(k=(d.pairs.length<i.pairs.length?d:i).pairs.head;null!=k;){m=k.elt;if(m.id==n&&m.di==j){l=m;break}k=k.next}null!=l?l.sleeping&&(l.sleeping=!1,l.next=this.pairs,this.pairs=l,l.first=!0):(null==la.zpp_pool?
l=new la:(l=la.zpp_pool,la.zpp_pool=l.next,l.next=null),null,l.n1=c,l.n2=h,l.id=n,l.di=j,l.next=this.pairs,this.pairs=l,l.first=!0,d.pairs.inlined_add(l),i.pairs.inlined_add(l))}}else f.intersect(h.aabb)&&(null!=h.child1&&(h.child1.next=e,e=h.child1),null!=h.child2&&(h.child2.next=e,e=h.child2))}c=null;for(d=this.pairs;null!=d;)!d.first&&!d.n1.aabb.intersect(d.n2.aabb)?(null==c?this.pairs=d.next:c.next=d.next,d.n1.shape.pairs.inlined_try_remove(d),d.n2.shape.pairs.inlined_try_remove(d),f=d.next,null!=
d.arb&&(d.arb.pair=null),d.arb=null,d.n1=d.n2=null,d.sleeping=!1,d.next=la.zpp_pool,la.zpp_pool=d,d=f):(f=d.n1.shape,e=f.body,h=d.n2.shape,i=h.body,!d.first&&(e.component.sleeping||e.type==g.id_BodyType_STATIC)&&(i.component.sleeping||i.type==g.id_BodyType_STATIC)?(d.sleeping=!0,null==c?this.pairs=d.next:c.next=d.next):(d.first=!1,f.aabb.intersect(h.aabb)&&(c=d.arb,d.arb=b?a.narrowPhase(f,h,e.type!=g.id_BodyType_DYNAMIC||i.type!=g.id_BodyType_DYNAMIC,d.arb,!1):a.continuousEvent(f,h,e.type!=g.id_BodyType_DYNAMIC||
i.type!=g.id_BodyType_DYNAMIC,d.arb,!1),null==d.arb?null!=c&&(c.pair=null):d.arb.pair=d),c=d),d=d.next)},__class__:sf});var Ca=function(){this.waket=0;this.sleep=!1;this.comps=null;this.length=0;this._inuse=this.modified=this.pushmod=!1;this.next=null;this.comps=new Gg};i["zpp_nape.space.ZPP_Island"]=Ca;Ca.__name__=["zpp_nape","space","ZPP_Island"];Ca.prototype={inlined_add:function(a){a._inuse=!0;a.next=this.next;this.next=a;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},
inlined_pop:function(){var a=this.next;this.next=a.next;a._inuse=!1;null==this.next&&(this.pushmod=!0);this.modified=!0;this.length--},inlined_pop_unsafe:function(){var a=this.next;this.pop();return a},__class__:Ca};var rb=function(){this.woken=!1;this.waket=0;this.sleeping=!1;this.body=this.constraint=this.island=null;this.isBody=!1;this.rank=0;this.next=this.parent=null;this.sleeping=!1;this.island=null;this.parent=this;this.rank=0;this.woken=!1};i["zpp_nape.space.ZPP_Component"]=rb;rb.__name__=
["zpp_nape","space","ZPP_Component"];rb.prototype={__class__:rb};var ib=function(){this.freed=this.lazydel=!1;this.length=0;this._inuse=this.modified=this.pushmod=!1;this.int1=this.int2=this.next=null;this.id=this.di=0;this.arbiters=new me};i["zpp_nape.space.ZPP_CallbackSet"]=ib;ib.__name__=["zpp_nape","space","ZPP_CallbackSet"];ib.get=function(a,b){var c;null==ib.zpp_pool?c=new ib:(c=ib.zpp_pool,ib.zpp_pool=c.next,c.next=null);c.freed=!1;c.lazydel=!1;c.COLLISIONstate=g.id_PreFlag_ACCEPT;c.COLLISIONstamp=
0;c.SENSORstate=g.id_PreFlag_ACCEPT;c.SENSORstamp=0;c.FLUIDstate=g.id_PreFlag_ACCEPT;c.FLUIDstamp=0;a.id<b.id?(c.int1=a,c.int2=b):(c.int1=b,c.int2=a);c.id=c.int1.id;c.di=c.int2.id;return c};ib.prototype={inlined_add:function(a){a._inuse=!0;a.next=this.next;this.next=a;this.modified=!0;this.length++;return a},inlined_erase:function(a){var b,c;null==a?(b=this.next,this.next=c=b.next,null==this.next&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));b._inuse=!1;this.modified=
!0;this.length--;this.pushmod=!0;return c},remove_arb:function(a){this.arbiters.inlined_try_remove(a)},empty_arb:function(a){var b;b=!0;for(var c=this.arbiters.head;null!=c;)if(0==(c.elt.type&a))c=c.next;else{b=!1;break}return b},sleeping:function(){var a;a=!0;for(var b=this.arbiters.head;null!=b;)if(b.elt.sleeping)b=b.next;else{a=!1;break}return a},__class__:ib};var Hg=function(a){this.cbsets=this.space=null;null==ub.zpp_pool?this.cbsets=new ub:(this.cbsets=ub.zpp_pool,ub.zpp_pool=this.cbsets.next,
this.cbsets.next=null);null;this.cbsets.lt=ga.setlt;this.space=a};i["zpp_nape.space.ZPP_CbSetManager"]=Hg;Hg.__name__=["zpp_nape","space","ZPP_CbSetManager"];Hg.prototype={get:function(a){if(null==a.head)return null;var b;null==ga.zpp_pool?b=new ga:(b=ga.zpp_pool,ga.zpp_pool=b.next,b.next=null);null;var c=b.cbTypes;b.cbTypes=a;var d=this.cbsets.find_weak(b);null!=d?a=d.data:(a=ga.get(a),this.cbsets.insert(a),a.manager=this);b.cbTypes=c;b.free();b.next=ga.zpp_pool;ga.zpp_pool=b;return a},remove:function(a){for(this.cbsets.remove(a);null!=
a.cbpairs.head;){var b=a.cbpairs.pop_unsafe();b.a!=b.b&&(a==b.a?b.b.cbpairs.remove(b):b.a.cbpairs.remove(b));b.a=b.b=null;b.listeners.clear();b.next=Aa.zpp_pool;Aa.zpp_pool=b}a.manager=null},validate:function(){if(!this.cbsets.empty()){for(var a=this.cbsets.parent;null!=a.prev;)a=a.prev;for(;null!=a;)if(a.data.validate(),null!=a.next)for(a=a.next;null!=a.prev;)a=a.prev;else{for(;null!=a.parent&&a==a.parent.next;)a=a.parent;a=a.parent}}},pair:function(a,b){for(var c=null,d=(a.cbpairs.length<b.cbpairs.length?
a.cbpairs:b.cbpairs).head;null!=d;){var f=d.elt;if(f.a==a&&f.b==b||f.a==b&&f.b==a){c=f;break}d=d.next}null==c&&(c=Aa.get(a,b),a.cbpairs.add(c),b!=a&&b.cbpairs.add(c));c.zip_listeners&&(c.zip_listeners=!1,c.__validate());return c},__class__:Hg};var ug=function(a,b){this.precb=this.prelisteners=null;this.continuous=!1;this.toiEvents=null;this.pre_dt=0;this.c_arbiters_true=this.c_arbiters_false=this.f_arbiters=this.s_arbiters=this.live=this.wrap_live=this.live_constraints=this.wrap_livecon=this.staticsleep=
this.islands=this.listeners=this.wrap_listeners=this.callbacks=this.callbackset_list=this.cbsets=null;this.sortcontacts=!1;this.time=0;this.midstep=!1;this.global_lin_drag=this.global_ang_drag=this.stamp=0;this.wrap_gravity=this.bodies=this.wrap_bodies=this.compounds=this.wrap_compounds=this.constraints=this.wrap_constraints=this.kinematics=this.bphase=this.__static=null;this.gravityx=this.gravityy=0;this.outer=null;this.toiEvents=new Ig;this.global_ang_drag=this.global_lin_drag=0.015;this.precb=
new ff;this.precb.zpp_inner=new Vb;this.sortcontacts=!0;this.pre_dt=0;var c;if(!(c=null==b))null==g.Broadphase_DYNAMIC_AABB_TREE&&(g.internal=!0,g.Broadphase_DYNAMIC_AABB_TREE=new Od,g.internal=!1),c=b==g.Broadphase_DYNAMIC_AABB_TREE;c?this.bphase=new sf(this):(null==g.Broadphase_SWEEP_AND_PRUNE&&(g.internal=!0,g.Broadphase_SWEEP_AND_PRUNE=new Od,g.internal=!1),b==g.Broadphase_SWEEP_AND_PRUNE&&(this.bphase=new tf(this)));this.time=0;null!=a?(this.gravityx=a.x,this.gravityy=a.y):this.gravityy=this.gravityx=
0;this.bodies=new mc;this.wrap_bodies=ic.get(this.bodies);this.wrap_bodies.zpp_inner.adder=E(this,this.bodies_adder);this.wrap_bodies.zpp_inner.subber=E(this,this.bodies_subber);this.compounds=new Cd;this.wrap_compounds=kd.get(this.compounds);this.wrap_compounds.zpp_inner.adder=E(this,this.compounds_adder);this.wrap_compounds.zpp_inner.subber=E(this,this.compounds_subber);this.kinematics=new mc;this.c_arbiters_true=new uf;this.c_arbiters_false=new uf;this.f_arbiters=new Jg;this.s_arbiters=new Kg;
this.islands=new Ca;this.live=new mc;this.wrap_live=ic.get(this.live,!0);this.staticsleep=new mc;this.constraints=new Sc;this.wrap_constraints=vc.get(this.constraints);this.wrap_constraints.zpp_inner.adder=E(this,this.constraints_adder);this.wrap_constraints.zpp_inner.subber=E(this,this.constraints_subber);this.live_constraints=new Sc;this.wrap_livecon=vc.get(this.live_constraints,!0);this.__static=Zc.__static();this.__static.zpp_inner.space=this;this.callbacks=new Vb;this.midstep=!1;this.listeners=
new vf;this.wrap_listeners=id.get(this.listeners);this.wrap_listeners.zpp_inner.adder=E(this,this.listeners_adder);this.wrap_listeners.zpp_inner.subber=E(this,this.listeners_subber);this.callbackset_list=new ib;this.mrca1=new fd;this.mrca2=new fd;this.prelisteners=new Jd;this.cbsets=new Hg(this)};i["zpp_nape.space.ZPP_Space"]=ug;ug.__name__=["zpp_nape","space","ZPP_Space"];ug.prototype={getgravity:function(){this.wrap_gravity=T.get(this.gravityx,this.gravityy,null);this.wrap_gravity.zpp_inner._inuse=
!0;this.wrap_gravity.zpp_inner._invalidate=E(this,this.gravity_invalidate);this.wrap_gravity.zpp_inner._validate=E(this,this.gravity_validate)},gravity_invalidate:function(a){this.gravityx=a.x;this.gravityy=a.y;for(var a=new Cd,b=this.bodies.head;null!=b;){var c=b.elt;c.world||(c.component.waket=this.stamp+(this.midstep?0:1),c.type==g.id_BodyType_KINEMATIC&&(c.kinematicDelaySleep=!0),c.component.sleeping&&this.really_wake(c,!1));b=b.next}for(b=this.compounds.head;null!=b;)a.add(b.elt),b=b.next;for(;null!=
a.head;){b=a.pop_unsafe();for(c=b.bodies.head;null!=c;){var d=c.elt;d.world||(d.component.waket=this.stamp+(this.midstep?0:1),d.type==g.id_BodyType_KINEMATIC&&(d.kinematicDelaySleep=!0),d.component.sleeping&&this.really_wake(d,!1));c=c.next}for(b=b.compounds.head;null!=b;)a.add(b.elt),b=b.next}},gravity_validate:function(){this.wrap_gravity.zpp_inner.x=this.gravityx;this.wrap_gravity.zpp_inner.y=this.gravityy},bodies_adder:function(a){return a.zpp_inner.space!=this?(null!=a.zpp_inner.space&&a.zpp_inner.space.outer.zpp_inner.wrap_bodies.remove(a),
this.addBody(a.zpp_inner),!0):!1},bodies_subber:function(a){this.remBody(a.zpp_inner)},compounds_adder:function(a){return a.zpp_inner.space!=this?(null!=a.zpp_inner.space&&a.zpp_inner.space.wrap_compounds.remove(a),this.addCompound(a.zpp_inner),!0):!1},compounds_subber:function(a){this.remCompound(a.zpp_inner)},constraints_adder:function(a){return a.zpp_inner.space!=this?(null!=a.zpp_inner.space&&a.zpp_inner.space.outer.zpp_inner.wrap_constraints.remove(a),this.addConstraint(a.zpp_inner),!0):!1},
constraints_subber:function(a){this.remConstraint(a.zpp_inner)},listeners_adder:function(a){return a.zpp_inner.space!=this?(null!=a.zpp_inner.space&&a.zpp_inner.space.outer.zpp_inner.wrap_listeners.remove(a),this.addListener(a.zpp_inner),!0):!1},listeners_subber:function(a){this.remListener(a.zpp_inner)},addListener:function(a){a.space=this;a.addedToSpace();null!=a.interaction&&null},remListener:function(a){null!=a.interaction&&null;a.removedFromSpace();a.space=null},add_callbackset:function(a){a.int1.cbsets.inlined_add(a);
a.int2.cbsets.inlined_add(a);this.callbackset_list.inlined_add(a)},remove_callbackset:function(a){a.lazydel=!0;a.int1.cbsets.inlined_try_remove(a);a.int2.cbsets.inlined_try_remove(a)},transmitType:function(a,b){a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==g.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!1));a.type==g.id_BodyType_DYNAMIC?this.live.remove(a):a.type==g.id_BodyType_KINEMATIC?(this.kinematics.remove(a),this.staticsleep.remove(a)):
a.type==g.id_BodyType_STATIC&&this.staticsleep.remove(a);a.type=b;a.type==g.id_BodyType_KINEMATIC&&this.kinematics.add(a);a.type==g.id_BodyType_STATIC&&this.static_validation(a);a.component.sleeping=!0;a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==g.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!0))},added_shape:function(a,b){null==b&&(b=!1);if(!b){var c=a.body;c.world||(c.component.waket=this.stamp+(this.midstep?0:1),c.type==g.id_BodyType_KINEMATIC&&
(c.kinematicDelaySleep=!0),c.component.sleeping&&this.really_wake(c,!1))}this.bphase.insert(a);a.addedToSpace()},removed_shape:function(a,b){null==b&&(b=!1);var c=this,d=a.body;b||d.wake();for(var f=null,e=d.arbiters.head;null!=e;){var h=[e.elt];if(h[0].ws1==a||h[0].ws2==a){if(0!=h[0].present){this.MRCA_chains(h[0].ws1,h[0].ws2);for(e=this.mrca1.head;null!=e;){for(var i=e.elt,n=this.mrca2.head;null!=n;){var j=n.elt,l=i.cbSet,k=j.cbSet;l.validate();k.validate();l.manager.pair(l,k).empty_intersection()||
(j=[Ba.get(i,j)],j[0].remove_arb(h[0]),h[0].present--,l.manager.pair(l,k).forall(g.id_CbEvent_END,function(a,b){return function(d){if(0!=(d.itype&b[0].type)&&a[0].empty_arb(d.itype)){var f=c.push_callback(d);f.event=g.id_CbEvent_END;Ba.int_callback(a[0],d,f);f.set=a[0]}}}(j,h)),null==j[0].arbiters.head&&this.remove_callbackset(j[0]));n=n.next}e=e.next}}h[0].b1!=d&&h[0].b1.type==g.id_BodyType_DYNAMIC&&(e=h[0].b1,e.world||(e.component.waket=this.stamp+(this.midstep?0:1),e.type==g.id_BodyType_KINEMATIC&&
(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!1)));h[0].b2!=d&&h[0].b2.type==g.id_BodyType_DYNAMIC&&(e=h[0].b2,e.world||(e.component.waket=this.stamp+(this.midstep?0:1),e.type==g.id_BodyType_KINEMATIC&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!1)));h[0].cleared=!0;(null==d||h[0].b2==d)&&h[0].b1.arbiters.inlined_try_remove(h[0]);(null==d||h[0].b1==d)&&h[0].b2.arbiters.inlined_try_remove(h[0]);null!=h[0].pair&&(h[0].pair.arb=null,h[0].pair=null);h[0].active=
!1;this.f_arbiters.modified=!0;e=d.arbiters.erase(f)}else f=e,e=e.next}this.bphase.remove(a);a.removedFromSpace()},addConstraint:function(a){a.space=this;a.addedToSpace();a.active&&(a.component.sleeping=!0,this.wake_constraint(a,!0))},remConstraint:function(a){a.active&&(this.wake_constraint(a,!0),this.live_constraints.remove(a));a.removedFromSpace();a.space=null},addCompound:function(a){a.space=this;a.addedToSpace();for(var b=a.bodies.head;null!=b;)this.addBody(b.elt),b=b.next;for(b=a.constraints.head;null!=
b;)this.addConstraint(b.elt),b=b.next;for(a=a.compounds.head;null!=a;)this.addCompound(a.elt),a=a.next},remCompound:function(a){for(var b=a.bodies.head;null!=b;)this.remBody(b.elt),b=b.next;for(b=a.constraints.head;null!=b;)this.remConstraint(b.elt),b=b.next;for(b=a.compounds.head;null!=b;)this.remCompound(b.elt),b=b.next;a.removedFromSpace();a.space=null},addBody:function(a,b){null==b&&(b=-1);a.space=this;a.addedToSpace();a.component.sleeping=!0;a.world||(a.component.waket=this.stamp+(this.midstep?
0:1),a.type==g.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!0));for(var c=a.shapes.head;null!=c;)this.added_shape(c.elt,!0),c=c.next;a.type==g.id_BodyType_STATIC?this.static_validation(a):a.type!=g.id_BodyType_DYNAMIC&&b!=g.id_BodyType_KINEMATIC&&this.kinematics.add(a)},remBody:function(a,b){null==b&&(b=-1);a.type==g.id_BodyType_STATIC?(a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==g.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),
a.component.sleeping&&this.really_wake(a,!0)),this.staticsleep.remove(a)):a.type==g.id_BodyType_DYNAMIC?(a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==g.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!0)),this.live.remove(a)):(b!=g.id_BodyType_KINEMATIC&&this.kinematics.remove(a),a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==g.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,
!0)),this.staticsleep.remove(a));for(var c=a.shapes.head;null!=c;)this.removed_shape(c.elt,!0),c=c.next;a.removedFromSpace();a.space=null},push_callback:function(a){var b;null==Vb.zpp_pool?b=new Vb:(b=Vb.zpp_pool,Vb.zpp_pool=b.next,b.next=null);null;this.callbacks.push(b);b.listener=a;return b},step:function(a,b,c){var d=this;this.time+=a;this.pre_dt=a;this.midstep=!0;this.stamp++;this.validation();this.bphase.broadphase(this,!0);this.prestep(a);if(this.sortcontacts){var f=this.c_arbiters_false;if(null!=
f.head&&null!=f.head.next){var e=f.head,h=null,i=null,n=null,j=null,l=1,k,m,o;do{k=0;i=e;for(h=e=null;null!=i;){k++;n=i;m=0;for(o=l;null!=n&&m<l;)m++,n=n.next;for(;0<m||0<o&&null!=n;)0==m?(j=n,n=n.next,o--):0==o||null==n?(j=i,i=i.next,m--):(i.elt.active&&n.elt.active?i.elt.oc1.dist<n.elt.oc1.dist:1)?(j=i,i=i.next,m--):(j=n,n=n.next,o--),null!=h?h.next=j:e=j,h=j;i=n}h.next=null;l<<=1}while(1<k);f.head=e;f.modified=!0;f.pushmod=!0}}this.updateVel(a);this.warmStart();this.iterateVel(b);for(b=this.kinematics.head;null!=
b;)f=b.elt,f.pre_posx=f.posx,f.pre_posy=f.posy,f.pre_rot=f.rot,b=b.next;for(b=this.live.head;null!=b;)f=b.elt,f.pre_posx=f.posx,f.pre_posy=f.posy,f.pre_rot=f.rot,b=b.next;this.updatePos(a);this.continuous=!0;this.continuousCollisions(a);this.continuous=!1;this.iteratePos(c);for(c=this.kinematics.head;null!=c;)b=c.elt,f=b.pre_rot!=b.rot,!(b.posx==b.pre_posx&&b.posy==b.pre_posy)&&b.invalidate_pos(),f&&b.invalidate_rot(),c=c.next;for(c=this.live.head;null!=c;)b=c.elt,f=b.pre_rot!=b.rot,!(b.posx==b.pre_posx&&
b.posy==b.pre_posy)&&b.invalidate_pos(),f&&b.invalidate_rot(),c=c.next;c=null;for(b=this.staticsleep.head;null!=b;)f=b.elt,f.type!=g.id_BodyType_KINEMATIC||0==f.velx&&0==f.vely&&0==f.angvel?f.kinematicDelaySleep?(f.kinematicDelaySleep=!1,b=b.next):(f.component.sleeping=!0,b=this.staticsleep.inlined_erase(c)):(c=b,b=b.next);this.doForests(a);this.sleepArbiters();this.midstep=!1;c=null;for(a=this.callbackset_list.next;null!=a;)b=[a],null==b[0].arbiters.head?(a=this.callbackset_list.inlined_erase(c),
b=b[0],b.int1=b.int2=null,b.id=b.di=-1,b.freed=!0,null,b.next=ib.zpp_pool,ib.zpp_pool=b):(c=[b[0].sleeping()],ga.find_all(b[0].int1.cbSet,b[0].int2.cbSet,g.id_CbEvent_ONGOING,function(a,b){return function(c){if((!a[0]||c.allowSleepingCallbacks)&&!b[0].empty_arb(c.itype)){var f=d.push_callback(c);f.event=g.id_CbEvent_ONGOING;Ba.int_callback(b[0],c,f);f.set=b[0]}}}(c,b)),c=a,a=a.next);for(;!this.callbacks.empty();)a=this.callbacks.pop(),a.listener.type==g.id_ListenerType_BODY?a.listener.body.handler(a.wrapper_body()):
a.listener.type==g.id_ListenerType_CONSTRAINT?a.listener.constraint.handler(a.wrapper_con()):a.listener.type==g.id_ListenerType_INTERACTION&&a.listener.interaction.handleri(a.wrapper_int()),a.int1=a.int2=null,a.body=null,a.constraint=null,a.listener=null,null!=a.wrap_arbiters&&(a.wrap_arbiters.zpp_inner.inner=null),a.set=null,a.next=Vb.zpp_pool,Vb.zpp_pool=a},continuousCollisions:function(a){var b=2*Math.PI/a;this.bphase.broadphase(this,!1);for(var c=0;1>c&&null!=this.toiEvents.head;){for(var d=null,
c=2,f=!1,e=null,h=null,i=this.toiEvents.head;null!=i;){var n=i.elt,j=n.s1.body,l=n.s2.body;if(j.sweepFrozen&&l.sweepFrozen)if(0!=n.toi&&F.testCollide_safe(n.s1,n.s2))n.toi=0;else{i=this.toiEvents.erase(h);n.next=ta.zpp_pool;ta.zpp_pool=n;continue}if(n.frozen1!=j.sweepFrozen||n.frozen2!=l.sweepFrozen)if(n.kinematic){i=this.toiEvents.erase(h);n.next=ta.zpp_pool;ta.zpp_pool=n;continue}else if(n.frozen1=j.sweepFrozen,n.frozen2=l.sweepFrozen,n.frozen1&&(j=n.s1,n.s1=n.s2,n.s2=j,n.frozen1=!1,n.frozen2=!0),
lc.staticSweep(n,a,0,o.collisionSlopCCD),0>n.toi){i=this.toiEvents.erase(h);n.next=ta.zpp_pool;ta.zpp_pool=n;continue}if(0<=n.toi&&(n.toi<c||!f&&n.kinematic))d=n,c=n.toi,f=n.kinematic,e=h;h=i;i=i.next}if(null==d)break;this.toiEvents.erase(e);c=d.toi;f=d.s1.body;e=d.s2.body;f.sweepFrozen||(f.sweepIntegrate(c*a),f.sweepValidate(d.s1));e.sweepFrozen||(e.sweepIntegrate(c*a),e.sweepValidate(d.s2));h=this.narrowPhase(d.s1,d.s2,!0,d.arbiter,!0);null==h?null!=d.arbiter&&null!=d.arbiter.pair&&(d.arbiter.pair.arb=
null,d.arbiter.pair=null):!this.presteparb(h,a,!0)&&h.type==aa.COL&&h.active&&0!=(h.immState&g.id_ImmState_ACCEPT)&&(h.colarb.warmStart(),h.colarb.applyImpulseVel(),h.colarb.applyImpulseVel(),h.colarb.applyImpulseVel(),h.colarb.applyImpulseVel(),f.sweep_angvel=f.angvel%b,e.sweep_angvel=e.angvel%b);null!=h&&h.active&&0!=(h.immState&g.id_ImmState_ACCEPT)&&h.type==aa.COL&&(!f.sweepFrozen&&f.type!=g.id_BodyType_KINEMATIC&&(f.sweepFrozen=!0,f.angvel=d.failed?f.sweep_angvel=0:d.slipped?f.sweep_angvel*=
o.angularCCDSlipScale:f.sweep_angvel),!e.sweepFrozen&&e.type!=g.id_BodyType_KINEMATIC&&(e.sweepFrozen=!0,e.angvel=d.failed?e.sweep_angvel=0:d.slipped?e.sweep_angvel*=o.angularCCDSlipScale:e.sweep_angvel))}for(;null!=this.toiEvents.head;)b=this.toiEvents.pop_unsafe(),b.next=ta.zpp_pool,ta.zpp_pool=b;for(b=this.kinematics.head;null!=b;)d=b.elt,d.sweepIntegrate(a),d.sweepTime=0,b=b.next;for(b=this.live.head;null!=b;)d=b.elt,d.sweepFrozen||d.sweepIntegrate(a),d.sweepTime=0,b=b.next},continuousEvent:function(a,
b,c,d){if(a.body.sweepFrozen&&b.body.sweepFrozen||a.body.disableCCD||b.body.disableCCD||null!=d&&null==d.colarb||0>=this.interactionType(a,b,a.body,b.body))return d;var f=a.body,e=b.body;if(c||f.bullet||e.bullet){var h;null==ta.zpp_pool?h=new ta:(h=ta.zpp_pool,ta.zpp_pool=h.next,h.next=null);h.failed=!1;h.s1=h.s2=null;h.arbiter=null;f=f.type==g.id_BodyType_KINEMATIC||e.type==g.id_BodyType_KINEMATIC;c&&!f?(a.body.type!=g.id_BodyType_DYNAMIC?(h.s2=a,h.s1=b):(h.s1=a,h.s2=b),h.kinematic=!1,lc.staticSweep(h,
this.pre_dt,0,o.collisionSlopCCD)):(h.s1=a,h.s2=b,h.kinematic=f,h.s1.body.sweepFrozen||h.s2.body.sweepFrozen?(h.s1.body.sweepFrozen&&(a=h.s1,h.s1=h.s2,h.s2=a,h.frozen1=!1,h.frozen2=!0),lc.staticSweep(h,this.pre_dt,0,o.collisionSlopCCD)):lc.dynamicSweep(h,this.pre_dt,0,o.collisionSlopCCD));c&&0>h.toi||h.failed?(c=h,c.next=ta.zpp_pool,ta.zpp_pool=c):(this.toiEvents.add(h),h.frozen1=h.s1.body.sweepFrozen,h.frozen2=h.s2.body.sweepFrozen,h.arbiter=null!=d?d.colarb:null)}return d},bodyCbWake:function(a){if(a.type==
g.id_BodyType_DYNAMIC&&null!=a.cbSet)if(this.midstep)for(var b=a.cbSet.bodylisteners.head;null!=b;){var c=b.elt;c.event==g.id_CbEvent_WAKE&&(c=this.push_callback(c),c.event=g.id_CbEvent_WAKE,c.body=a);b=b.next}else a.component.woken=!0},bodyCbSleep:function(a){if(a.type==g.id_BodyType_DYNAMIC&&null!=a.cbSet)for(var b=a.cbSet.bodylisteners.head;null!=b;){var c=b.elt;c.event==g.id_CbEvent_SLEEP&&(c=this.push_callback(c),c.event=g.id_CbEvent_SLEEP,c.body=a);b=b.next}},constraintCbWake:function(a){if(null!=
a.cbSet)if(this.midstep)for(var b=a.cbSet.conlisteners.head;null!=b;){var c=b.elt;c.event==g.id_CbEvent_WAKE&&(c=this.push_callback(c),c.event=g.id_CbEvent_WAKE,c.constraint=a);b=b.next}else a.component.woken=!0},constraintCbSleep:function(a){if(null!=a.cbSet)for(var b=a.cbSet.conlisteners.head;null!=b;){var c=b.elt;c.event==g.id_CbEvent_SLEEP&&(c=this.push_callback(c),c.event=g.id_CbEvent_SLEEP,c.constraint=a);b=b.next}},constraintCbBreak:function(a){if(null!=a.cbSet)for(var b=a.cbSet.conlisteners.head;null!=
b;){var c=b.elt;c.event==g.id_CbEvent_BREAK&&(c=this.push_callback(c),c.event=g.id_CbEvent_BREAK,c.constraint=a);b=b.next}},nullListenerType:function(a,b){for(var c=new fd,d=a.interactors.head;null!=d;)c.add(d.elt),d=d.next;if(a!=b)for(d=b.interactors.head;null!=d;)c.add(d.elt),d=d.next;for(;null!=c.head;)if(d=c.pop_unsafe(),null!=d.icompound){for(var d=d.icompound,f=d.bodies.head;null!=f;)c.add(f.elt),f=f.next;for(d=d.compounds.head;null!=d;)c.add(d.elt),d=d.next}else{f=null!=d.ibody?d.ibody:d.ishape.body;
d=null!=d.ishape?d.ishape:null;for(f=f.arbiters.head;null!=f;){var e=f.elt;if(0!=e.present&&(null==d||e.ws1==d||e.ws2==d)){this.MRCA_chains(e.ws1,e.ws2);for(e=this.mrca1.head;null!=e;){var g=e.elt;if(!(g.cbSet!=a&&g.cbSet!=b))for(var h=this.mrca2.head;null!=h;){var i=h.elt;if(!(g.cbSet==a&&i.cbSet!=b||g.cbSet==b&&i.cbSet!=a))if(i=Ba.get(g,i),null!=i){for(;null!=i.arbiters.head;)i.arbiters.pop_unsafe().present--;this.remove_callbackset(i)}h=h.next}e=e.next}}f=f.next}}},nullInteractorType:function(a,
b){null==b&&(b=a);if(null!=a.icompound){for(var c=a.icompound,d=c.bodies.head;null!=d;)this.nullInteractorType(d.elt,b),d=d.next;for(c=c.compounds.head;null!=c;)this.nullInteractorType(c.elt,b),c=c.next}else{d=null!=a.ibody?a.ibody:a.ishape.body;c=null!=a.ishape?a.ishape:null;for(d=d.arbiters.head;null!=d;){var f=d.elt;if(0!=f.present&&(null==c||f.ws1==c||f.ws2==c)){this.MRCA_chains(f.ws1,f.ws2);for(var e=this.mrca1.head;null!=e;){for(var g=e.elt,h=this.mrca2.head;null!=h;){var i=h.elt;g!=b&&i!=b||
(i=Ba.get(g,i),null!=i&&(f.present--,i.remove_arb(f),null==i.arbiters.head&&this.remove_callbackset(i)));h=h.next}e=e.next}}d=d.next}}},freshListenerType:function(a,b){for(var c=new fd,d=a.interactors.head;null!=d;)c.add(d.elt),d=d.next;if(a!=b)for(d=b.interactors.head;null!=d;)c.add(d.elt),d=d.next;for(;null!=c.head;)if(d=c.pop_unsafe(),null!=d.icompound){for(var d=d.icompound,f=d.bodies.head;null!=f;)c.add(f.elt),f=f.next;for(d=d.compounds.head;null!=d;)c.add(d.elt),d=d.next}else{f=null!=d.ibody?
d.ibody:d.ishape.body;d=null!=d.ishape?d.ishape:null;for(f=f.arbiters.head;null!=f;){var e=f.elt;if(e.presentable&&(null==d||e.ws1==d||e.ws2==d)){this.MRCA_chains(e.ws1,e.ws2);for(var g=this.mrca1.head;null!=g;){var h=g.elt;if(!(h.cbSet!=a&&h.cbSet!=b))for(var i=this.mrca2.head;null!=i;){var j=i.elt;if(!(h.cbSet==a&&j.cbSet!=b||h.cbSet==b&&j.cbSet!=a)){var l=Ba.get(h,j);null==l&&(l=ib.get(h,j),this.add_callbackset(l));if(j=!l.arbiters.inlined_has(e))l.arbiters.inlined_add(e),j=!0;j&&e.present++}i=
i.next}g=g.next}}f=f.next}}},freshInteractorType:function(a,b){null==b&&(b=a);if(null!=a.icompound){for(var c=a.icompound,d=c.bodies.head;null!=d;)this.freshInteractorType(d.elt,b),d=d.next;for(c=c.compounds.head;null!=c;)this.freshInteractorType(c.elt,b),c=c.next}else{d=null!=a.ibody?a.ibody:a.ishape.body;c=null!=a.ishape?a.ishape:null;for(d=d.arbiters.head;null!=d;){var f=d.elt;if(f.presentable&&(null==c||f.ws1==c||f.ws2==c)){this.MRCA_chains(f.ws1,f.ws2);for(var e=this.mrca1.head;null!=e;){for(var g=
e.elt,h=this.mrca2.head;null!=h;){var i=h.elt;if(!(g!=b&&i!=b)){var j=g.cbSet,l=i.cbSet;j.validate();l.validate();if(!j.manager.pair(j,l).empty_intersection()){j=Ba.get(g,i);null==j&&(j=ib.get(g,i),this.add_callbackset(j));if(i=!j.arbiters.inlined_has(f))j.arbiters.inlined_add(f),i=!0;i&&f.present++}}h=h.next}e=e.next}}d=d.next}}},wakeCompound:function(a){for(var b=a.bodies.head;null!=b;){var c=b.elt;c.world||(c.component.waket=this.stamp+(this.midstep?0:1),c.type==g.id_BodyType_KINEMATIC&&(c.kinematicDelaySleep=
!0),c.component.sleeping&&this.really_wake(c,!1));b=b.next}for(b=a.constraints.head;null!=b;)this.wake_constraint(b.elt),b=b.next;for(a=a.compounds.head;null!=a;)this.wakeCompound(a.elt),a=a.next},wakeIsland:function(a){for(;null!=a.comps.head;){var b=a.comps.pop_unsafe();b.waket=this.stamp+(this.midstep?0:1);if(b.isBody){var c=b.body;this.live.add(c);for(var d=c.arbiters.head;null!=d;){var f=d.elt;f.sleeping&&(f.sleeping=!1,f.up_stamp+=this.stamp-f.sleep_stamp,f.type==aa.COL?(f=f.colarb,f.stat?this.c_arbiters_true.inlined_add(f):
this.c_arbiters_false.inlined_add(f)):f.type==aa.FLUID?this.f_arbiters.inlined_add(f.fluidarb):this.s_arbiters.inlined_add(f.sensorarb));d=d.next}this.bodyCbWake(c);b.sleeping=!1;b.island=null;b.parent=b;b.rank=0;if(c.type!=g.id_BodyType_STATIC)for(b=c.shapes.head;null!=b;)c=b.elt,null!=c.node&&this.bphase.sync(c),b=b.next}else c=b.constraint,this.live_constraints.inlined_add(c),this.constraintCbWake(c),b.sleeping=!1,b.island=null,b.parent=b,b.rank=0}a.next=Ca.zpp_pool;Ca.zpp_pool=a},non_inlined_wake:function(a,
b){null==b&&(b=!1);a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==g.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,b))},really_wake:function(a,b){null==b&&(b=!1);if(null==a.component.island){a.component.sleeping=!1;a.type==g.id_BodyType_KINEMATIC||a.type==g.id_BodyType_STATIC?this.staticsleep.inlined_add(a):this.live.inlined_add(a);for(var c=a.constraints.head;null!=c;){var d=c.elt;d.space==this&&this.wake_constraint(d);c=c.next}for(c=
a.arbiters.head;null!=c;){d=c.elt;if(d.sleeping)if(d.sleeping=!1,d.up_stamp+=this.stamp+(this.midstep?0:1)-d.sleep_stamp,d.type==aa.COL){var f=d.colarb;f.stat?this.c_arbiters_true.inlined_add(f):this.c_arbiters_false.inlined_add(f)}else d.type==aa.FLUID?this.f_arbiters.inlined_add(d.fluidarb):this.s_arbiters.inlined_add(d.sensorarb);d.type!=aa.SENSOR&&!d.cleared&&d.up_stamp>=this.stamp&&0!=(d.immState&g.id_ImmState_ACCEPT)&&(d.b1.type==g.id_BodyType_DYNAMIC&&d.b1.component.sleeping&&(f=d.b1,f.world||
(f.component.waket=this.stamp+(this.midstep?0:1),f.type==g.id_BodyType_KINEMATIC&&(f.kinematicDelaySleep=!0),f.component.sleeping&&this.really_wake(f,!1))),d.b2.type==g.id_BodyType_DYNAMIC&&d.b2.component.sleeping&&(d=d.b2,d.world||(d.component.waket=this.stamp+(this.midstep?0:1),d.type==g.id_BodyType_KINEMATIC&&(d.kinematicDelaySleep=!0),d.component.sleeping&&this.really_wake(d,!1))));c=c.next}!b&&a.type==g.id_BodyType_DYNAMIC&&this.bodyCbWake(a);if(!b&&!this.bphase.is_sweep&&a.type!=g.id_BodyType_STATIC)for(c=
a.shapes.head;null!=c;)d=c.elt,null!=d.node&&this.bphase.sync(d),c=c.next}else this.wakeIsland(a.component.island)},wake_constraint:function(a,b){null==b&&(b=!1);return a.active&&(a.component.waket=this.stamp+(this.midstep?0:1),a.component.sleeping)?(null==a.component.island?(a.component.sleeping=!1,this.live_constraints.inlined_add(a),a.wake_connected(),b||this.constraintCbWake(a)):this.wakeIsland(a.component.island),!0):!1},doForests:function(a){for(var b=this.c_arbiters_false.head;null!=b;){var c=
b.elt;if(!c.cleared&&c.up_stamp==this.stamp&&0!=(c.immState&g.id_ImmState_ACCEPT)&&c.b1.type==g.id_BodyType_DYNAMIC&&c.b2.type==g.id_BodyType_DYNAMIC){var d;if(c.b1.component==c.b1.component.parent)d=c.b1.component;else{d=c.b1.component;for(var f=null;d!=d.parent;){var e=d.parent;d.parent=f;f=d;d=e}for(;null!=f;)e=f.parent,f.parent=d,f=e}if(c.b2.component==c.b2.component.parent)c=c.b2.component;else{c=c.b2.component;for(f=null;c!=c.parent;)e=c.parent,c.parent=f,f=c,c=e;for(;null!=f;)e=f.parent,f.parent=
c,f=e}d!=c&&(d.rank<c.rank?d.parent=c:d.rank>c.rank?c.parent=d:(c.parent=d,d.rank++))}b=b.next}for(b=this.f_arbiters.head;null!=b;){c=b.elt;if(!c.cleared&&c.up_stamp==this.stamp&&0!=(c.immState&g.id_ImmState_ACCEPT)&&c.b1.type==g.id_BodyType_DYNAMIC&&c.b2.type==g.id_BodyType_DYNAMIC){if(c.b1.component==c.b1.component.parent)d=c.b1.component;else{d=c.b1.component;for(f=null;d!=d.parent;)e=d.parent,d.parent=f,f=d,d=e;for(;null!=f;)e=f.parent,f.parent=d,f=e}if(c.b2.component==c.b2.component.parent)c=
c.b2.component;else{c=c.b2.component;for(f=null;c!=c.parent;)e=c.parent,c.parent=f,f=c,c=e;for(;null!=f;)e=f.parent,f.parent=c,f=e}d!=c&&(d.rank<c.rank?d.parent=c:d.rank>c.rank?c.parent=d:(c.parent=d,d.rank++))}b=b.next}for(b=this.live_constraints.head;null!=b;)b.elt.forest(),b=b.next;for(;null!=this.live.head;){d=this.live.inlined_pop_unsafe();b=d.component;if(b==b.parent)c=b;else{c=b;for(f=null;c!=c.parent;)e=c.parent,c.parent=f,f=c,c=e;for(;null!=f;)e=f.parent,f.parent=c,f=e}null==c.island&&(null==
Ca.zpp_pool?c.island=new Ca:(c.island=Ca.zpp_pool,Ca.zpp_pool=c.island.next,c.island.next=null),c.island.waket=0,this.islands.inlined_add(c.island),c.island.sleep=!0);b.island=c.island;b.island.comps.inlined_add(b);d=d.atRest(a);b.island.sleep=b.island.sleep&&d;b.waket>b.island.waket&&(b.island.waket=b.waket)}for(;null!=this.live_constraints.head;){a=this.live_constraints.inlined_pop_unsafe().component;if(a==a.parent)b=a;else{b=a;for(d=null;b!=b.parent;)c=b.parent,b.parent=d,d=b,b=c;for(;null!=d;)c=
d.parent,d.parent=b,d=c}a.island=b.island;a.island.comps.inlined_add(a);a.waket>a.island.waket&&(a.island.waket=a.waket)}for(;null!=this.islands.next;)if(a=this.islands.inlined_pop_unsafe(),a.sleep)for(a=a.comps.head;null!=a;){d=a.elt;if(d.isBody){b=d.body;b.velx=0;b.vely=0;b.angvel=0;d.sleeping=!0;for(d=b.shapes.head;null!=d;)this.bphase.sync(d.elt),d=d.next;this.bodyCbSleep(b)}else this.constraintCbSleep(d.constraint),d.sleeping=!0;a=a.next}else{for(;null!=a.comps.head;)b=a.comps.inlined_pop_unsafe(),
b.waket=a.waket,b.isBody?this.live.inlined_add(b.body):this.live_constraints.inlined_add(b.constraint),b.sleeping=!1,b.island=null,b.parent=b,b.rank=0;a.next=Ca.zpp_pool;Ca.zpp_pool=a}},sleepArbiters:function(){var a=null,b=this.c_arbiters_true,c=b.head,d=null!=this.c_arbiters_false;d&&null==c&&(d=!1,c=this.c_arbiters_false.head,b=this.c_arbiters_false,a=null);for(;null!=c;){var f=c.elt;f.b1.component.sleeping&&f.b2.component.sleeping?(f.sleep_stamp=this.stamp,f.sleeping=!0,c=b.inlined_erase(a)):
(a=c,c=c.next);d&&null==c&&(d=!1,c=this.c_arbiters_false.head,b=this.c_arbiters_false,a=null)}a=null;b=this.f_arbiters;c=b.head;d=!1;for(;null!=c;)f=c.elt,f.b1.component.sleeping&&f.b2.component.sleeping?(f.sleep_stamp=this.stamp,f.sleeping=!0,c=b.inlined_erase(a)):(a=c,c=c.next),d&&null==c&&(d=!1,c=null.begin(),a=b=null);a=null;b=this.s_arbiters;c=b.head;d=!1;for(;null!=c;)f=c.elt,f.b1.component.sleeping&&f.b2.component.sleeping?(f.sleep_stamp=this.stamp,f.sleeping=!0,c=b.inlined_erase(a)):(a=c,
c=c.next),d&&null==c&&(d=!1,c=null.begin(),a=b=null)},static_validation:function(a){null!=a.shapes.head&&a.validate_aabb();a.validate_mass();a.validate_inertia();for(var b=a.shapes.head;null!=b;){var c=b.elt;c.type==g.id_ShapeType_POLYGON&&(c.polygon.splice_collinear(),c.polygon.validate_gaxi());b=b.next}a.sweepFrozen=!0},validation:function(){this.cbsets.validate();for(var a=this.live.head;null!=a;){var b=a.elt;b.sweepRadius=0;for(var c=b.shapes.head;null!=c;){var d=c.elt;d.type==g.id_ShapeType_POLYGON&&
(d.polygon.splice_collinear(),d.polygon.validate_gaxi());d.validate_sweepRadius();d.sweepRadius>b.sweepRadius&&(b.sweepRadius=d.sweepRadius);c=c.next}b.validate_mass();b.validate_inertia();null!=b.shapes.head&&(b.validate_aabb(),b.validate_worldCOM());b.validate_gravMass();b.zip_axis&&(b.zip_axis=!1,b.axisx=Math.sin(b.rot),b.axisy=Math.cos(b.rot),null);if(b.component.woken&&null!=b.cbSet)for(c=b.cbSet.bodylisteners.head;null!=c;)d=c.elt,d.event==g.id_CbEvent_WAKE&&(d=this.push_callback(d),d.event=
g.id_CbEvent_WAKE,d.body=b),c=c.next;b.component.woken=!1;for(b=b.shapes.head;null!=b;)this.bphase.sync(b.elt),b=b.next;a=a.next}for(a=this.kinematics.head;null!=a;){b=a.elt;b.sweepRadius=0;for(c=b.shapes.head;null!=c;)d=c.elt,d.type==g.id_ShapeType_POLYGON&&(d.polygon.splice_collinear(),d.polygon.validate_gaxi()),d.validate_sweepRadius(),d.sweepRadius>b.sweepRadius&&(b.sweepRadius=d.sweepRadius),c=c.next;b.validate_mass();b.validate_inertia();null!=b.shapes.head&&(b.validate_aabb(),b.validate_worldCOM());
b.validate_gravMass();b.zip_axis&&(b.zip_axis=!1,b.axisx=Math.sin(b.rot),b.axisy=Math.cos(b.rot),null);for(b=b.shapes.head;null!=b;)this.bphase.sync(b.elt),b=b.next;a=a.next}for(a=this.live_constraints.head;null!=a;){b=a.elt;if(b.active){if(b.component.woken&&null!=b.cbSet)for(c=b.cbSet.conlisteners.head;null!=c;)d=c.elt,d.event==g.id_CbEvent_WAKE&&(d=this.push_callback(d),d.event=g.id_CbEvent_WAKE,d.constraint=b),c=c.next;b.component.woken=!1}a=a.next}},updateVel:function(a){for(var b=1-a*this.global_lin_drag,
c=1-a*this.global_ang_drag,d=this.live.head;null!=d;){var f=d.elt;if(0!=f.smass){var e=a*f.imass;f.velx=b*f.velx+(f.forcex+this.gravityx*f.gravMass)*e;f.vely=b*f.vely+(f.forcey+this.gravityy*f.gravMass)*e}if(0!=f.sinertia){var g=e=0,e=f.worldCOMx-f.posx,g=f.worldCOMy-f.posy;f.angvel=c*f.angvel+(f.torque+(this.gravityy*e-this.gravityx*g)*f.gravMass)*a*f.iinertia}d=d.next}},updatePos:function(a){for(var b=2*Math.PI/a,c=this.live.head;null!=c;){var d=c.elt;d.pre_posx=d.posx;d.pre_posy=d.posy;d.pre_rot=
d.rot;d.sweepTime=0;d.sweep_angvel=d.angvel%b;d.sweepIntegrate(a);if(d.disableCCD)d.sweepFrozen=!0,d.bullet=!1;else{var f=o.staticCCDLinearThreshold*d.sweepRadius,e=o.staticCCDAngularThreshold;if((d.velx*d.velx+d.vely*d.vely)*a*a>f*f||d.angvel*d.angvel*a*a>e*e||d.type==g.id_BodyType_KINEMATIC){f=d.sweep_angvel;0>f&&(f=-f);for(var e=1/f,h=d.shapes.head;null!=h;){var i=h.elt,j=i.aabb,k=j.minx,l=j.miny,m=j.maxx,p=j.maxy,q=0.008333333333333333*f*a*i.sweepCoef|0;8<q&&(q=8);var s=f*a/q;d.sweepIntegrate(a);
i.type==g.id_ShapeType_CIRCLE?i.circle._force_validate_aabb():i.polygon._force_validate_aabb();k<j.minx?j.minx=k:k=j.minx;l<j.miny?j.miny=l:l=j.miny;m>j.maxx?j.maxx=m:m=j.maxx;p>j.maxy?j.maxy=p:p=j.maxy;for(var t=1;t<q;){var u=t++;d.sweepIntegrate(s*u*e);i.type==g.id_ShapeType_CIRCLE?i.circle._force_validate_aabb():i.polygon._force_validate_aabb();k<j.minx?j.minx=k:k=j.minx;l<j.miny?j.miny=l:l=j.miny;m>j.maxx?j.maxx=m:m=j.maxx;p>j.maxy?j.maxy=p:p=j.maxy}this.bphase.sync(i);h=h.next}d.sweepFrozen=
!1;if(d.type==g.id_BodyType_DYNAMIC&&d.bulletEnabled&&(f=o.bulletCCDLinearThreshold*d.sweepRadius,e=o.bulletCCDAngularThreshold,(d.velx*d.velx+d.vely*d.vely)*a*a>f*f||d.angvel*d.angvel*a*a>e*e))d.bullet=!0}else d.sweepFrozen=!0,d.bullet=!1}c=c.next}for(c=this.kinematics.head;null!=c;){d=c.elt;d.pre_posx=d.posx;d.pre_posy=d.posy;d.pre_rot=d.rot;d.sweepTime=0;d.sweep_angvel=d.angvel%b;d.sweepIntegrate(a);if(d.disableCCD)d.sweepFrozen=!0,d.bullet=!1;else if(f=o.staticCCDLinearThreshold*d.sweepRadius,
e=o.staticCCDAngularThreshold,(d.velx*d.velx+d.vely*d.vely)*a*a>f*f||d.angvel*d.angvel*a*a>e*e||d.type==g.id_BodyType_KINEMATIC){f=d.sweep_angvel;0>f&&(f=-f);e=1/f;for(h=d.shapes.head;null!=h;){i=h.elt;j=i.aabb;k=j.minx;l=j.miny;m=j.maxx;p=j.maxy;q=0.008333333333333333*f*a*i.sweepCoef|0;8<q&&(q=8);s=f*a/q;d.sweepIntegrate(a);i.type==g.id_ShapeType_CIRCLE?i.circle._force_validate_aabb():i.polygon._force_validate_aabb();k<j.minx?j.minx=k:k=j.minx;l<j.miny?j.miny=l:l=j.miny;m>j.maxx?j.maxx=m:m=j.maxx;
p>j.maxy?j.maxy=p:p=j.maxy;for(t=1;t<q;)u=t++,d.sweepIntegrate(s*u*e),i.type==g.id_ShapeType_CIRCLE?i.circle._force_validate_aabb():i.polygon._force_validate_aabb(),k<j.minx?j.minx=k:k=j.minx,l<j.miny?j.miny=l:l=j.miny,m>j.maxx?j.maxx=m:m=j.maxx,p>j.maxy?j.maxy=p:p=j.maxy;this.bphase.sync(i);h=h.next}d.sweepFrozen=!1;if(d.type==g.id_BodyType_DYNAMIC&&d.bulletEnabled&&(f=o.bulletCCDLinearThreshold*d.sweepRadius,e=o.bulletCCDAngularThreshold,(d.velx*d.velx+d.vely*d.vely)*a*a>f*f||d.angvel*d.angvel*
a*a>e*e))d.bullet=!0}else d.sweepFrozen=!0,d.bullet=!1;c=c.next}},presteparb:function(a,b,c){null==c&&(c=!1);var d=this;if(!a.cleared&&a.b1.component.sleeping&&a.b2.component.sleeping)return a.sleep_stamp=this.stamp,a.sleeping=!0;if(!a.cleared||0!=a.present||a.intchange){var e=!c&&a.up_stamp==this.stamp-1&&!a.cleared&&!a.intchange,c=a.fresh&&!a.cleared&&!a.intchange;e&&(a.endGenerated=this.stamp);if(c||e||a.cleared||a.intchange){this.inlined_MRCA_chains(a.ws1,a.ws2);for(e=this.mrca1.head;null!=e;){for(var h=
e.elt,i=this.mrca2.head;null!=i;){var j=i.elt,k=h.cbSet,m=j.cbSet;if(!k.manager.pair(k,m).empty_intersection()){var l=[Ba.get(h,j)];if(c||a.intchange){null==l[0]&&(l[0]=ib.get(h,j),this.add_callbackset(l[0]));k.manager.pair(k,m).forall(g.id_CbEvent_BEGIN,function(b){return function(c){if(0!=(c.itype&a.type)&&b[0].empty_arb(c.itype)){var e=d.push_callback(c);e.event=g.id_CbEvent_BEGIN;Ba.int_callback(b[0],c,e);e.set=b[0]}}}(l));if(j=!l[0].arbiters.inlined_has(a))l[0].arbiters.inlined_add(a),j=!0;j&&
a.present++}else a.present--,l[0].remove_arb(a),k.manager.pair(k,m).forall(g.id_CbEvent_END,function(b){return function(c){if(0!=(c.itype&a.type)&&b[0].empty_arb(c.itype)){var e=d.push_callback(c);e.event=g.id_CbEvent_END;Ba.int_callback(b[0],c,e);e.set=b[0]}}}(l)),null==l[0].arbiters.head&&this.remove_callbackset(l[0])}i=i.next}e=e.next}}a.fresh=!1;a.intchange=!1}if(a.cleared||a.up_stamp+(a.type==aa.COL?o.arbiterExpirationDelay:0)<this.stamp)return a.type==aa.SENSOR?a.sensorarb.retire():a.type==
aa.FLUID?a.fluidarb.retire():a.colarb.retire(),!0;c=a.active;a.active=a.presentable=a.up_stamp==this.stamp;0!=(a.immState&g.id_ImmState_ACCEPT)?a.active&&a.type!=aa.SENSOR&&(null!=a.colarb?a.colarb.preStep(b)&&(a.active=!1):a.fluidarb.preStep(this,b)):null!=a.colarb&&a.colarb.cleanupContacts()&&(a.active=!1);c!=a.active&&(a.b1.arbiters.modified=!0,a.b2.arbiters.modified=!0,this.c_arbiters_true.modified=this.c_arbiters_false.modified=!0,this.s_arbiters.modified=this.f_arbiters.modified=!0);return!1},
prestep:function(a){for(var b=null,c=this.live_constraints.head;null!=c;){var d=c.elt;d.preStep(a)?(c=this.live_constraints.erase(b),d.broken(),this.constraintCbBreak(d),d.removeOnBreak?(d.component.sleeping=!0,this.midstep=!1,null!=d.compound?d.compound.wrap_constraints.remove(d.outer):this.wrap_constraints.remove(d.outer),this.midstep=!0):d.active=!1,d.clearcache()):(b=c,c=c.next)}var b=null,c=this.c_arbiters_true,d=c.head,e=null!=this.c_arbiters_false;e&&null==d&&(e=!1,d=this.c_arbiters_false.head,
c=this.c_arbiters_false,b=null);for(;null!=d;)this.presteparb(d.elt,a)?d=c.inlined_erase(b):(b=d,d=d.next),e&&null==d&&(e=!1,d=this.c_arbiters_false.head,c=this.c_arbiters_false,b=null);b=null;c=this.f_arbiters;d=c.head;e=!1;for(;null!=d;)this.presteparb(d.elt,a)?d=c.inlined_erase(b):(b=d,d=d.next),e&&null==d&&(e=!1,d=null.begin(),b=c=null);b=null;c=this.s_arbiters;d=c.head;e=!1;for(;null!=d;)this.presteparb(d.elt,a)?d=c.inlined_erase(b):(b=d,d=d.next),e&&null==d&&(e=!1,d=null.begin(),b=c=null)},
warmStart:function(){for(var a=this.f_arbiters.head;null!=a;){var b=a.elt;b.active&&0!=(b.immState&g.id_ImmState_ACCEPT)&&b.warmStart();a=a.next}a=this.c_arbiters_false.head;b=!0;null==a&&(a=this.c_arbiters_true.head,b=!1);for(;null!=a;){var c=a.elt;c.active&&0!=(c.immState&g.id_ImmState_ACCEPT)&&c.warmStart();a=a.next;b&&null==a&&(a=this.c_arbiters_true.head,b=!1)}for(a=this.live_constraints.head;null!=a;)a.elt.warmStart(),a=a.next},iterateVel:function(a){for(var b=0;b<a;){b++;for(var c=this.f_arbiters.head;null!=
c;){var d=c.elt;d.active&&0!=(d.immState&g.id_ImmState_ACCEPT)&&d.applyImpulseVel();c=c.next}c=null;for(d=this.live_constraints.head;null!=d;){var e=d.elt;e.applyImpulseVel()?(d=this.live_constraints.erase(c),e.broken(),this.constraintCbBreak(e),e.removeOnBreak?(e.component.sleeping=!0,this.midstep=!1,null!=e.compound?e.compound.wrap_constraints.remove(e.outer):this.wrap_constraints.remove(e.outer),this.midstep=!0):e.active=!1,e.clearcache()):(c=d,d=d.next)}c=this.c_arbiters_false.head;d=!0;null==
c&&(c=this.c_arbiters_true.head,d=!1);for(;null!=c;)e=c.elt,e.active&&0!=(e.immState&g.id_ImmState_ACCEPT)&&e.applyImpulseVel(),c=c.next,d&&null==c&&(c=this.c_arbiters_true.head,d=!1)}},iteratePos:function(a){for(var b=0;b<a;){b++;for(var c=null,d=this.live_constraints.head;null!=d;){var e=d.elt;!e.__velocity&&e.stiff&&e.applyImpulsePos()?(d=this.live_constraints.erase(c),e.broken(),this.constraintCbBreak(e),e.removeOnBreak?(e.component.sleeping=!0,this.midstep=!1,null!=e.compound?e.compound.wrap_constraints.remove(e.outer):
this.wrap_constraints.remove(e.outer),this.midstep=!0):e.active=!1,e.clearcache()):(c=d,d=d.next)}c=this.c_arbiters_false.head;d=!0;null==c&&(c=this.c_arbiters_true.head,d=!1);for(;null!=c;)e=c.elt,e.active&&0!=(e.immState&g.id_ImmState_ACCEPT)&&e.applyImpulsePos(),c=c.next,d&&null==c&&(c=this.c_arbiters_true.head,d=!1)}},group_ignore:function(a,b){var c=a.lookup_group();if(null==c)return!1;var d=b.lookup_group();if(null==d)return!1;for(var e=!1;null!=c&&null!=d;){if(c==d){e=c.ignore;break}c.depth<
d.depth?d=d.group:c=c.group}return e},interactionType:function(a,b,c,d){var e;e=!1;for(var g=c.constraints.head;null!=g;){var h=g.elt;if(h.ignore&&h.pair_exists(c.id,d.id)){e=!0;break}g=g.next}return!e&&!this.group_ignore(a,b)?(a.sensorEnabled||b.sensorEnabled)&&a.filter.shouldSense(b.filter)?2:(a.fluidEnabled||b.fluidEnabled)&&a.filter.shouldFlow(b.filter)&&!(0==c.imass&&0==d.imass&&0==c.iinertia&&0==d.iinertia)?0:a.filter.shouldCollide(b.filter)&&!(0==c.imass&&0==d.imass&&0==c.iinertia&&0==d.iinertia)?
1:-1:-1},narrowPhase:function(a,b,c,d,e){var h=this,i=null,j=a.body,k=b.body,m=this.interactionType(a,b,j,k);if(-1!=m){var l,o;a.type>b.type?(l=b,o=a):a.type==b.type?a.id<b.id?(l=a,o=b):(o=a,l=b):(l=a,o=b);var p=l==b;if(0==m){var q;if(null==d){for(var s=null,t=(j.arbiters.length<k.arbiters.length?j:k).arbiters.head;null!=t;){var u=t.elt;if(u.id==l.id&&u.di==o.id){s=u;break}t=t.next}q=s}else q=d;var w=null==q,v,x=!1;w?(null==nb.zpp_pool?v=new nb:(v=nb.zpp_pool,nb.zpp_pool=v.next,v.next=null),null):
null==q.fluidarb?(q.cleared=!0,q.b1.arbiters.inlined_try_remove(q),q.b2.arbiters.inlined_try_remove(q),null!=q.pair&&(q.pair.arb=null,q.pair=null),q.active=!1,this.f_arbiters.modified=!0,null==nb.zpp_pool?v=new nb:(v=nb.zpp_pool,nb.zpp_pool=v.next,v.next=null),null,x=w=v.intchange=!0):v=q.fluidarb;var A=g.id_InteractionType_FLUID;if(w||v.stamp!=this.stamp||e)if(v.stamp=this.stamp,F.flowCollide(l,o,v)){w?(v.b1=a.body,v.ws1=a,v.b2=b.body,v.ws2=b,v.id=l.id,v.di=o.id,v.b1.arbiters.inlined_add(v),v.b2.arbiters.inlined_add(v),
v.active=!0,v.present=0,v.cleared=!1,v.sleeping=!1,v.fresh=!1,v.presentable=!1,v.nx=0,v.ny=1,v.dampx=0,v.dampy=0,v.adamp=0,this.f_arbiters.inlined_add(v),v.fresh=!x):v.fresh=v.up_stamp<this.stamp-1||v.endGenerated==this.stamp&&e;v.up_stamp=v.stamp;if(v.fresh||0==(v.immState&g.id_ImmState_ALWAYS)){v.immState=g.id_ImmState_ACCEPT;var z=!1;this.inlined_MRCA_chains(v.ws1.id>v.ws2.id?v.ws2:v.ws1,v.ws1.id>v.ws2.id?v.ws1:v.ws2);for(var B=this.mrca1.head;null!=B;){for(var C=B.elt,D=this.mrca2.head;null!=
D;){var E=D.elt,H=C.cbSet,J=E.cbSet;if(!H.manager.pair(H,J).empty_intersection()){var G=null,K=null;this.prelisteners.inlined_clear();H.manager.pair(H,J).forall(g.id_CbEvent_PRE,function(a){return function(b){0!=(b.itype&A)&&(a[0]=h.prelisteners.inlined_insert(a[0],b),z=z||!b.pure)}}([null]));if(null!=this.prelisteners.head)if(G=Ba.get(C,E),null==G&&(K=ib.get(C,E),this.add_callbackset(K)),null==G||(G.FLUIDstamp!=this.stamp||e)&&0==(G.FLUIDstate&g.id_ImmState_ALWAYS)){null!=K&&(G=K);if(null!=G)for(var L=
this.prelisteners.head;null!=L;)L.elt.itype==g.id_InteractionType_ANY&&(G.COLLISIONstamp=this.stamp,G.SENSORstamp=this.stamp),G.FLUIDstamp=this.stamp,L=L.next;var M=v.active;v.active=!0;this.precb.zpp_inner.pre_arbiter=v;this.precb.zpp_inner.set=G;for(var N=this.prelisteners.head;null!=N;){var O=N.elt;this.precb.zpp_inner.listener=O;Ba.int_callback(G,O,this.precb.zpp_inner);this.precb.zpp_inner.pre_swapped=C!=this.precb.zpp_inner.int1;var P=O.handlerp(this.precb);if(null!=P){var Q=v,X=P,T;null==g.PreFlag_ACCEPT&&
(g.internal=!0,g.PreFlag_ACCEPT=new $a,g.internal=!1);if(X==g.PreFlag_ACCEPT)T=g.id_ImmState_ACCEPT|g.id_ImmState_ALWAYS;else{var aa=P,U;null==g.PreFlag_ACCEPT_ONCE&&(g.internal=!0,g.PreFlag_ACCEPT_ONCE=new $a,g.internal=!1);if(aa==g.PreFlag_ACCEPT_ONCE)U=g.id_ImmState_ACCEPT;else{var ba=P;null==g.PreFlag_IGNORE&&(g.internal=!0,g.PreFlag_IGNORE=new $a,g.internal=!1);U=ba==g.PreFlag_IGNORE?g.id_ImmState_IGNORE|g.id_ImmState_ALWAYS:g.id_ImmState_IGNORE}T=U}Q.immState=T}N=N.next}v.active=M;if(null!=
G)for(var Z=this.prelisteners.head;null!=Z;)Z.elt.itype==g.id_InteractionType_ANY&&(G.COLLISIONstate=v.immState,G.SENSORstate=v.immState),G.FLUIDstate=v.immState,Z=Z.next}else null==G?0==(v.immState&g.id_ImmState_ALWAYS)&&(v.immState=g.id_ImmState_ACCEPT):v.immState=G.FLUIDstate}D=D.next}B=B.next}if(z&&0==(v.immState&g.id_ImmState_ALWAYS)){if(v.b1.type==g.id_BodyType_DYNAMIC){var V=v.b1;V.world||(V.component.waket=this.stamp+(this.midstep?0:1),V.type==g.id_BodyType_KINEMATIC&&(V.kinematicDelaySleep=
!0),V.component.sleeping&&this.really_wake(V,!1))}if(v.b1.type==g.id_BodyType_DYNAMIC){var W=v.b2;W.world||(W.component.waket=this.stamp+(this.midstep?0:1),W.type==g.id_BodyType_KINEMATIC&&(W.kinematicDelaySleep=!0),W.component.sleeping&&this.really_wake(W,!1))}}}if(0!=(v.immState&g.id_ImmState_ACCEPT)){if(v.b1.type==g.id_BodyType_DYNAMIC&&v.b1.component.sleeping){var Y=v.b1;Y.world||(Y.component.waket=this.stamp+(this.midstep?0:1),Y.type==g.id_BodyType_KINEMATIC&&(Y.kinematicDelaySleep=!0),Y.component.sleeping&&
this.really_wake(Y,!1))}if(v.b2.type==g.id_BodyType_DYNAMIC&&v.b2.component.sleeping){var $=v.b2;$.world||($.component.waket=this.stamp+(this.midstep?0:1),$.type==g.id_BodyType_KINEMATIC&&($.kinematicDelaySleep=!0),$.component.sleeping&&this.really_wake($,!1))}}v.sleeping&&(v.sleeping=!1,this.f_arbiters.inlined_add(v));i=v}else if(w){var da=v;da.next=nb.zpp_pool;nb.zpp_pool=da;i=null}else i=v;else i=v}else if(1==m){var ca;ca=c?this.c_arbiters_true:this.c_arbiters_false;var S;if(null==d){for(var ga=
null,ea=(j.arbiters.length<k.arbiters.length?j:k).arbiters.head;null!=ea;){var ha=ea.elt;if(ha.id==l.id&&ha.di==o.id){ga=ha;break}ea=ea.next}S=ga}else S=d;var fa=null==S,r,la=!1;fa?(null==ob.zpp_pool?r=new ob:(r=ob.zpp_pool,ob.zpp_pool=r.next,r.next=null),null,r.stat=c):null==S.colarb?(S.cleared=!0,S.b1.arbiters.inlined_try_remove(S),S.b2.arbiters.inlined_try_remove(S),null!=S.pair&&(S.pair.arb=null,S.pair=null),S.active=!1,this.f_arbiters.modified=!0,null==ob.zpp_pool?r=new ob:(r=ob.zpp_pool,ob.zpp_pool=
r.next,r.next=null),null,r.intchange=!0,r.stat=c,la=fa=!0):(r=S.colarb,p=l!=r.s1,r.stat!=c&&(r.stat=c,r.sleeping||((c?this.c_arbiters_false:this.c_arbiters_true).remove(r),ca.add(r))));var sa=g.id_InteractionType_COLLISION;if(fa||r.stamp!=this.stamp||e)if(r.stamp=this.stamp,F.contactCollide(l,o,r,p)){fa?(r.b1=a.body,r.ws1=a,r.b2=b.body,r.ws2=b,r.id=l.id,r.di=o.id,r.b1.arbiters.inlined_add(r),r.b2.arbiters.inlined_add(r),r.active=!0,r.present=0,r.cleared=!1,r.sleeping=!1,r.fresh=!1,r.presentable=!1,
r.s1=a,r.s2=b,r.userdef_restitution||(r.restitution=r.s1.material.elasticity<=Math.NEGATIVE_INFINITY||r.s2.material.elasticity<=Math.NEGATIVE_INFINITY?0:r.s1.material.elasticity>=Math.POSITIVE_INFINITY||r.s2.material.elasticity>=Math.POSITIVE_INFINITY?1:(r.s1.material.elasticity+r.s2.material.elasticity)/2,0>r.restitution&&(r.restitution=0),1<r.restitution&&(r.restitution=1)),r.userdef_dyn_fric||(r.dyn_fric=Math.sqrt(r.s1.material.dynamicFriction*r.s2.material.dynamicFriction)),r.userdef_stat_fric||
(r.stat_fric=Math.sqrt(r.s1.material.staticFriction*r.s2.material.staticFriction)),r.userdef_rfric||(r.rfric=Math.sqrt(r.s1.material.rollingFriction*r.s2.material.rollingFriction)),ca.inlined_add(r),r.fresh=!la):r.fresh=r.up_stamp<this.stamp-1||r.endGenerated==this.stamp&&e;r.up_stamp=r.stamp;if(r.fresh||0==(r.immState&g.id_ImmState_ALWAYS)){r.immState=g.id_ImmState_ACCEPT;var na=!1;this.inlined_MRCA_chains(r.ws1.id>r.ws2.id?r.ws2:r.ws1,r.ws1.id>r.ws2.id?r.ws1:r.ws2);for(var ja=this.mrca1.head;null!=
ja;){for(var ma=ja.elt,oa=this.mrca2.head;null!=oa;){var qa=oa.elt,pa=ma.cbSet,va=qa.cbSet;if(!pa.manager.pair(pa,va).empty_intersection()){var R=null,ra=null;this.prelisteners.inlined_clear();pa.manager.pair(pa,va).forall(g.id_CbEvent_PRE,function(a){return function(b){0!=(b.itype&sa)&&(a[0]=h.prelisteners.inlined_insert(a[0],b),na=na||!b.pure)}}([null]));if(null!=this.prelisteners.head)if(R=Ba.get(ma,qa),null==R&&(ra=ib.get(ma,qa),this.add_callbackset(ra)),null==R||(R.COLLISIONstamp!=this.stamp||
e)&&0==(R.COLLISIONstate&g.id_ImmState_ALWAYS)){null!=ra&&(R=ra);if(null!=R)for(var ta=this.prelisteners.head;null!=ta;)ta.elt.itype==g.id_InteractionType_ANY?(R.COLLISIONstamp=this.stamp,R.SENSORstamp=this.stamp,R.FLUIDstamp=this.stamp):R.COLLISIONstamp=this.stamp,ta=ta.next;var xa=r.active;r.active=!0;r.cleanupContacts();this.precb.zpp_inner.pre_arbiter=r;this.precb.zpp_inner.set=R;for(var ua=this.prelisteners.head;null!=ua;){var za=ua.elt;this.precb.zpp_inner.listener=za;Ba.int_callback(R,za,this.precb.zpp_inner);
this.precb.zpp_inner.pre_swapped=ma!=this.precb.zpp_inner.int1;var ya=za.handlerp(this.precb);if(null!=ya){var Ha=r,Ia=ya,Fa;null==g.PreFlag_ACCEPT&&(g.internal=!0,g.PreFlag_ACCEPT=new $a,g.internal=!1);if(Ia==g.PreFlag_ACCEPT)Fa=g.id_ImmState_ACCEPT|g.id_ImmState_ALWAYS;else{var Ma=ya,Ja;null==g.PreFlag_ACCEPT_ONCE&&(g.internal=!0,g.PreFlag_ACCEPT_ONCE=new $a,g.internal=!1);if(Ma==g.PreFlag_ACCEPT_ONCE)Ja=g.id_ImmState_ACCEPT;else{var Na=ya;null==g.PreFlag_IGNORE&&(g.internal=!0,g.PreFlag_IGNORE=
new $a,g.internal=!1);Ja=Na==g.PreFlag_IGNORE?g.id_ImmState_IGNORE|g.id_ImmState_ALWAYS:g.id_ImmState_IGNORE}Fa=Ja}Ha.immState=Fa}ua=ua.next}r.active=xa;if(null!=R)for(var Ga=this.prelisteners.head;null!=Ga;)Ga.elt.itype==g.id_InteractionType_ANY?(R.COLLISIONstate=r.immState,R.SENSORstate=r.immState,R.FLUIDstate=r.immState):R.COLLISIONstate=r.immState,Ga=Ga.next}else null==R?0==(r.immState&g.id_ImmState_ALWAYS)&&(r.immState=g.id_ImmState_ACCEPT):r.immState=R.COLLISIONstate}oa=oa.next}ja=ja.next}if(na&&
0==(r.immState&g.id_ImmState_ALWAYS)){if(r.b1.type==g.id_BodyType_DYNAMIC){var Aa=r.b1;Aa.world||(Aa.component.waket=this.stamp+(this.midstep?0:1),Aa.type==g.id_BodyType_KINEMATIC&&(Aa.kinematicDelaySleep=!0),Aa.component.sleeping&&this.really_wake(Aa,!1))}if(r.b1.type==g.id_BodyType_DYNAMIC){var Ca=r.b2;Ca.world||(Ca.component.waket=this.stamp+(this.midstep?0:1),Ca.type==g.id_BodyType_KINEMATIC&&(Ca.kinematicDelaySleep=!0),Ca.component.sleeping&&this.really_wake(Ca,!1))}}}if(0!=(r.immState&g.id_ImmState_ACCEPT)){if(r.b1.type==
g.id_BodyType_DYNAMIC&&r.b1.component.sleeping){var Da=r.b1;Da.world||(Da.component.waket=this.stamp+(this.midstep?0:1),Da.type==g.id_BodyType_KINEMATIC&&(Da.kinematicDelaySleep=!0),Da.component.sleeping&&this.really_wake(Da,!1))}if(r.b2.type==g.id_BodyType_DYNAMIC&&r.b2.component.sleeping){var Ea=r.b2;Ea.world||(Ea.component.waket=this.stamp+(this.midstep?0:1),Ea.type==g.id_BodyType_KINEMATIC&&(Ea.kinematicDelaySleep=!0),Ea.component.sleeping&&this.really_wake(Ea,!1))}}r.sleeping&&(r.sleeping=!1,
ca.inlined_add(r));i=r}else if(fa){var wa=r;wa.userdef_dyn_fric=!1;wa.userdef_stat_fric=!1;wa.userdef_restitution=!1;wa.userdef_rfric=!1;wa.__ref_edge1=wa.__ref_edge2=null;wa.next=ob.zpp_pool;ob.zpp_pool=wa;i=null}else i=r;else i=r}else{var ia;if(null==d){for(var Qa=null,La=(j.arbiters.length<k.arbiters.length?j:k).arbiters.head;null!=La;){var Oa=La.elt;if(Oa.id==l.id&&Oa.di==o.id){Qa=Oa;break}La=La.next}ia=Qa}else ia=d;var Ka=null==ia,I,Xa=!1;Ka?(null==hb.zpp_pool?I=new hb:(I=hb.zpp_pool,hb.zpp_pool=
I.next,I.next=null),null):null==ia.sensorarb?(ia.cleared=!0,ia.b1.arbiters.inlined_try_remove(ia),ia.b2.arbiters.inlined_try_remove(ia),null!=ia.pair&&(ia.pair.arb=null,ia.pair=null),ia.active=!1,this.f_arbiters.modified=!0,null==hb.zpp_pool?I=new hb:(I=hb.zpp_pool,hb.zpp_pool=I.next,I.next=null),null,Xa=Ka=I.intchange=!0):I=ia.sensorarb;var db=g.id_InteractionType_SENSOR;if(Ka||I.stamp!=this.stamp||e)if(I.stamp=this.stamp,F.testCollide(l,o)){Ka?(I.b1=a.body,I.ws1=a,I.b2=b.body,I.ws2=b,I.id=l.id,
I.di=o.id,I.b1.arbiters.inlined_add(I),I.b2.arbiters.inlined_add(I),I.active=!0,I.present=0,I.cleared=!1,I.sleeping=!1,I.fresh=!1,I.presentable=!1,this.s_arbiters.inlined_add(I),I.fresh=!Xa):I.fresh=I.up_stamp<this.stamp-1||I.endGenerated==this.stamp&&e;I.up_stamp=I.stamp;if(I.fresh||0==(I.immState&g.id_ImmState_ALWAYS)){I.immState=g.id_ImmState_ACCEPT;var Va=!1;this.inlined_MRCA_chains(I.ws1.id>I.ws2.id?I.ws2:I.ws1,I.ws1.id>I.ws2.id?I.ws1:I.ws2);for(var Pa=this.mrca1.head;null!=Pa;){for(var Ra=Pa.elt,
Sa=this.mrca2.head;null!=Sa;){var Ya=Sa.elt,Wa=Ra.cbSet,fb=Ya.cbSet;if(!Wa.manager.pair(Wa,fb).empty_intersection()){var bb=null,Za=null;this.prelisteners.inlined_clear();Wa.manager.pair(Wa,fb).forall(g.id_CbEvent_PRE,function(a){return function(b){0!=(b.itype&db)&&(a[0]=h.prelisteners.inlined_insert(a[0],b),Va=Va||!b.pure)}}([null]));if(null!=this.prelisteners.head)if(bb=Ba.get(Ra,Ya),null==bb&&(Za=ib.get(Ra,Ya),this.add_callbackset(Za)),null==bb||(bb.SENSORstamp!=this.stamp||e)&&0==(bb.SENSORstate&
g.id_ImmState_ALWAYS)){null!=Za&&(bb=Za);if(null!=bb)for(var ab=this.prelisteners.head;null!=ab;)ab.elt.itype==g.id_InteractionType_ANY?(bb.COLLISIONstamp=this.stamp,bb.SENSORstamp=this.stamp,bb.FLUIDstamp=this.stamp):bb.SENSORstamp=this.stamp,ab=ab.next;var kb=I.active;I.active=!0;this.precb.zpp_inner.pre_arbiter=I;this.precb.zpp_inner.set=bb;for(var cb=this.prelisteners.head;null!=cb;){var gb=cb.elt;this.precb.zpp_inner.listener=gb;Ba.int_callback(bb,gb,this.precb.zpp_inner);this.precb.zpp_inner.pre_swapped=
Ra!=this.precb.zpp_inner.int1;var eb=gb.handlerp(this.precb);if(null!=eb){var mb=I,pb=eb,jb;null==g.PreFlag_ACCEPT&&(g.internal=!0,g.PreFlag_ACCEPT=new $a,g.internal=!1);if(pb==g.PreFlag_ACCEPT)jb=g.id_ImmState_ACCEPT|g.id_ImmState_ALWAYS;else{var sb=eb,rb;null==g.PreFlag_ACCEPT_ONCE&&(g.internal=!0,g.PreFlag_ACCEPT_ONCE=new $a,g.internal=!1);if(sb==g.PreFlag_ACCEPT_ONCE)rb=g.id_ImmState_ACCEPT;else{var ub=eb;null==g.PreFlag_IGNORE&&(g.internal=!0,g.PreFlag_IGNORE=new $a,g.internal=!1);rb=ub==g.PreFlag_IGNORE?
g.id_ImmState_IGNORE|g.id_ImmState_ALWAYS:g.id_ImmState_IGNORE}jb=rb}mb.immState=jb}cb=cb.next}I.active=kb;if(null!=bb)for(var qb=this.prelisteners.head;null!=qb;)qb.elt.itype==g.id_InteractionType_ANY?(bb.COLLISIONstate=I.immState,bb.SENSORstate=I.immState,bb.FLUIDstate=I.immState):bb.SENSORstate=I.immState,qb=qb.next}else null==bb?0==(I.immState&g.id_ImmState_ALWAYS)&&(I.immState=g.id_ImmState_ACCEPT):I.immState=bb.SENSORstate}Sa=Sa.next}Pa=Pa.next}if(Va&&0==(I.immState&g.id_ImmState_ALWAYS)){if(I.b1.type!=
g.id_BodyType_STATIC){var Ua=I.b1;Ua.world||(Ua.component.waket=this.stamp+(this.midstep?0:1),Ua.type==g.id_BodyType_KINEMATIC&&(Ua.kinematicDelaySleep=!0),Ua.component.sleeping&&this.really_wake(Ua,!1))}if(I.b2.type!=g.id_BodyType_STATIC){var lb=I.b2;lb.world||(lb.component.waket=this.stamp+(this.midstep?0:1),lb.type==g.id_BodyType_KINEMATIC&&(lb.kinematicDelaySleep=!0),lb.component.sleeping&&this.really_wake(lb,!1))}}}I.sleeping&&(I.sleeping=!1,this.s_arbiters.inlined_add(I));i=I}else if(Ka){var tb=
I;tb.next=hb.zpp_pool;hb.zpp_pool=tb;i=null}else i=I;else i=I}}return i},MRCA_chains:function(a,b){this.inlined_MRCA_chains(a,b)},inlined_MRCA_chains:function(a,b){this.mrca1.inlined_clear();this.mrca2.inlined_clear();null!=a.cbSet&&this.mrca1.inlined_add(a);null!=a.body.cbSet&&this.mrca1.inlined_add(a.body);null!=b.cbSet&&this.mrca2.inlined_add(b);null!=b.body.cbSet&&this.mrca2.inlined_add(b.body);for(var c=a.body.compound,d=b.body.compound;c!=d;)(null==c?0:c.depth)<(null==d?0:d.depth)?(null!=d.cbSet&&
this.mrca2.inlined_add(d),d=d.compound):(null!=c.cbSet&&this.mrca1.inlined_add(c),c=c.compound)},__class__:ug};var Ic=function(){this.next=this.prev=this.shape=this.aabb=null};i["zpp_nape.space.ZPP_SweepData"]=Ic;Ic.__name__=["zpp_nape","space","ZPP_SweepData"];Ic.prototype={__class__:Ic};var tf=function(a){this.list=null;Hc.call(this);this.space=a;this.is_sweep=!0;this.sweep=this};i["zpp_nape.space.ZPP_SweepPhase"]=tf;tf.__name__=["zpp_nape","space","ZPP_SweepPhase"];tf.__super__=Hc;tf.prototype=
z(Hc.prototype,{__insert:function(a){var b;null==Ic.zpp_pool?b=new Ic:(b=Ic.zpp_pool,Ic.zpp_pool=b.next,b.next=null);null;a.sweep=b;b.shape=a;b.aabb=a.aabb;b.next=this.list;null!=this.list&&(this.list.prev=b);this.list=b},__remove:function(a){var b=a.sweep;null==b.prev?this.list=b.next:b.prev.next=b.next;null!=b.next&&(b.next.prev=b.prev);a.sweep=null;b.prev=null;b.shape=null;b.aabb=null;b.next=Ic.zpp_pool;Ic.zpp_pool=b},sync_broadphase_fast:function(){for(var a=this.list.next;null!=a;){var b=a.next,
c=a.prev;if(!(a.aabb.minx>c.aabb.minx)){for(;null!=c.prev&&c.prev.aabb.minx>a.aabb.minx;)c=c.prev;var d=a.prev;d.next=a.next;null!=a.next&&(a.next.prev=d);null==c.prev?(a.prev=null,this.list=a,a.next=c,c.prev=a):(a.prev=c.prev,c.prev=a,a.prev.next=a,a.next=c)}a=b}},broadphase:function(a,b){if(null!=this.list){this.sync_broadphase_fast();for(var c=this.list;null!=c;){for(var d=c.next,e=c.shape,h=e.body,i=c.aabb.maxx;null!=d&&!(d.aabb.minx>i);){var j=d.shape,k=j.body;if(k!=h&&!(h.type==g.id_BodyType_STATIC&&
k.type==g.id_BodyType_STATIC)&&(!h.component.sleeping||!k.component.sleeping))e.aabb.intersectY(j.aabb)&&(b?a.narrowPhase(e,j,h.type!=g.id_BodyType_DYNAMIC||k.type!=g.id_BodyType_DYNAMIC,null,!1):a.continuousEvent(e,j,h.type!=g.id_BodyType_DYNAMIC||k.type!=g.id_BodyType_DYNAMIC,null,!1));d=d.next}c=c.next}}},__class__:tf});var Bg=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_CallbackSet"]=Bg;Bg.__name__=["zpp_nape","util","ZNPList_ZPP_CallbackSet"];
Bg.prototype={inlined_add:function(a){var b;null==Jc.zpp_pool?b=new Jc:(b=Jc.zpp_pool,Jc.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=
!0));a=b;a.elt=null;a.next=Jc.zpp_pool;Jc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:Bg};var Pd=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_Shape"]=Pd;Pd.__name__=["zpp_nape","util","ZNPList_ZPP_Shape"];Pd.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==Da.zpp_pool?b=new Da:(b=Da.zpp_pool,Da.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=
!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){var c;null==Da.zpp_pool?c=new Da:(c=Da.zpp_pool,Da.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},
inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Da.zpp_pool;Da.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Pd};var mc=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_Body"]=mc;mc.__name__=["zpp_nape",
"util","ZNPList_ZPP_Body"];mc.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==xa.zpp_pool?b=new xa:(b=xa.zpp_pool,xa.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){var c;null==xa.zpp_pool?c=new xa:(c=xa.zpp_pool,xa.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,
a.next=c);this.pushmod=this.modified=!0;this.length++;return c},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=xa.zpp_pool;xa.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=
c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=xa.zpp_pool;xa.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:mc};var Cd=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_Compound"]=
Cd;Cd.__name__=["zpp_nape","util","ZNPList_ZPP_Compound"];Cd.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==Yb.zpp_pool?b=new Yb:(b=Yb.zpp_pool,Yb.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Yb.zpp_pool;Yb.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},
pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=
Yb.zpp_pool;Yb.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Cd};var me=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_Arbiter"]=me;me.__name__=["zpp_nape","util","ZNPList_ZPP_Arbiter"];me.prototype={inlined_add:function(a){var b;null==Zb.zpp_pool?b=new Zb:(b=Zb.zpp_pool,Zb.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=
b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Zb.zpp_pool;Zb.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},
erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Zb.zpp_pool;Zb.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},inlined_has:function(a){var b;b=!1;for(var c=this.head;null!=c;){if(c.elt==a){b=!0;break}c=c.next}return b},__class__:me};var yg=function(){this.length=0;this.modified=this.pushmod=!1;
this.head=null};i["zpp_nape.util.ZNPList_ZPP_CbSetPair"]=yg;yg.__name__=["zpp_nape","util","ZNPList_ZPP_CbSetPair"];yg.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==$b.zpp_pool?b=new $b:(b=$b.zpp_pool,$b.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=$b.zpp_pool;$b.zpp_pool=a;null==
this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,
a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=$b.zpp_pool;$b.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:yg};var Dg=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_AABBPair"]=Dg;Dg.__name__=["zpp_nape","util","ZNPList_ZPP_AABBPair"];Dg.prototype={inlined_add:function(a){var b;null==Hb.zpp_pool?b=new Hb:(b=Hb.zpp_pool,Hb.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=
!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Hb.zpp_pool;Hb.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);
d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Hb.zpp_pool;Hb.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:Dg};var Fg=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_Edge"]=Fg;Fg.__name__=["zpp_nape","util","ZNPList_ZPP_Edge"];Fg.prototype={add:function(a){return this.inlined_add(a)},
inlined_add:function(a){var b;null==Va.zpp_pool?b=new Va:(b=Va.zpp_pool,Va.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){var c;null==Va.zpp_pool?c=new Va:(c=Va.zpp_pool,Va.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},pop:function(){this.inlined_pop()},
inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Va.zpp_pool;Va.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=
!0));a=b;a.elt=null;a.next=Va.zpp_pool;Va.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},reverse:function(){for(var a=this.head,b=null;null!=a;){var c=a.next;a.next=b;b=this.head=a;a=c}this.pushmod=this.modified=!0},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Fg};var Gg=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_Component"]=Gg;Gg.__name__=["zpp_nape","util","ZNPList_ZPP_Component"];
Gg.prototype={inlined_add:function(a){var b;null==nc.zpp_pool?b=new nc:(b=nc.zpp_pool,nc.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=nc.zpp_pool;nc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;
this.pop();return a},__class__:Gg};var qh=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_InteractionGroup"]=qh;qh.__name__=["zpp_nape","util","ZNPList_ZPP_InteractionGroup"];qh.prototype={iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:qh};var uf=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_ColArbiter"]=uf;uf.__name__=["zpp_nape","util","ZNPList_ZPP_ColArbiter"];
uf.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==Kc.zpp_pool?b=new Kc:(b=Kc.zpp_pool,Kc.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=
b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Kc.zpp_pool;Kc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:uf};var Jg=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_FluidArbiter"]=Jg;Jg.__name__=["zpp_nape","util","ZNPList_ZPP_FluidArbiter"];Jg.prototype={inlined_add:function(a){var b;null==ld.zpp_pool?b=new ld:(b=ld.zpp_pool,ld.zpp_pool=b.next,
b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=ld.zpp_pool;ld.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:Jg};var Kg=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_SensorArbiter"]=
Kg;Kg.__name__=["zpp_nape","util","ZNPList_ZPP_SensorArbiter"];Kg.prototype={inlined_add:function(a){var b;null==md.zpp_pool?b=new md:(b=md.zpp_pool,md.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=md.zpp_pool;md.zpp_pool=a;this.modified=!0;this.length--;
this.pushmod=!0;return c},__class__:Kg};var vf=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_Listener"]=vf;vf.__name__=["zpp_nape","util","ZNPList_ZPP_Listener"];vf.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==Wa.zpp_pool?b=new Wa:(b=Wa.zpp_pool,Wa.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,
b)},inlined_insert:function(a,b){var c;null==Wa.zpp_pool?c=new Wa:(c=Wa.zpp_pool,Wa.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,
null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Wa.zpp_pool;Wa.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:vf};var Ig=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_ToiEvent"]=Ig;Ig.__name__=["zpp_nape","util","ZNPList_ZPP_ToiEvent"];Ig.prototype={add:function(a){return this.inlined_add(a)},
inlined_add:function(a){var b;null==ac.zpp_pool?b=new ac:(b=ac.zpp_pool,ac.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=ac.zpp_pool;ac.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();
return a},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=ac.zpp_pool;ac.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:Ig};var rh=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ConvexResult"]=rh;rh.__name__=["zpp_nape","util","ZNPList_ConvexResult"];
rh.prototype={iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:rh};var sh=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_GeomPoly"]=sh;sh.__name__=["zpp_nape","util","ZNPList_ZPP_GeomPoly"];sh.prototype={iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:sh};var th=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_RayResult"]=
th;th.__name__=["zpp_nape","util","ZNPList_RayResult"];th.prototype={iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:th};var ab=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_CbType"]=ab;ab.__name__=["zpp_nape","util","ZNPNode_ZPP_CbType"];ab.prototype={__class__:ab};var Jc=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_CallbackSet"]=Jc;Jc.__name__=["zpp_nape","util","ZNPNode_ZPP_CallbackSet"];Jc.prototype={__class__:Jc};
var Da=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_Shape"]=Da;Da.__name__=["zpp_nape","util","ZNPNode_ZPP_Shape"];Da.prototype={__class__:Da};var xa=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_Body"]=xa;xa.__name__=["zpp_nape","util","ZNPNode_ZPP_Body"];xa.prototype={__class__:xa};var tc=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_Constraint"]=tc;tc.__name__=["zpp_nape","util","ZNPNode_ZPP_Constraint"];tc.prototype={__class__:tc};var Yb=
function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_Compound"]=Yb;Yb.__name__=["zpp_nape","util","ZNPNode_ZPP_Compound"];Yb.prototype={__class__:Yb};var Zb=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_Arbiter"]=Zb;Zb.__name__=["zpp_nape","util","ZNPNode_ZPP_Arbiter"];Zb.prototype={__class__:Zb};var gb=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_InteractionListener"]=gb;gb.__name__=["zpp_nape","util","ZNPNode_ZPP_InteractionListener"];gb.prototype=
{__class__:gb};var Fa=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_CbSet"]=Fa;Fa.__name__=["zpp_nape","util","ZNPNode_ZPP_CbSet"];Fa.prototype={__class__:Fa};var Za=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_Interactor"]=Za;Za.__name__=["zpp_nape","util","ZNPNode_ZPP_Interactor"];Za.prototype={__class__:Za};var sc=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_BodyListener"]=sc;sc.__name__=["zpp_nape","util","ZNPNode_ZPP_BodyListener"];sc.prototype=
{__class__:sc};var $b=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_CbSetPair"]=$b;$b.__name__=["zpp_nape","util","ZNPNode_ZPP_CbSetPair"];$b.prototype={__class__:$b};var Tc=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_ConstraintListener"]=Tc;Tc.__name__=["zpp_nape","util","ZNPNode_ZPP_ConstraintListener"];Tc.prototype={__class__:Tc};var Hb=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_AABBPair"]=Hb;Hb.__name__=["zpp_nape","util","ZNPNode_ZPP_AABBPair"];
Hb.prototype={__class__:Hb};var kb=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_Vec2"]=kb;kb.__name__=["zpp_nape","util","ZNPNode_ZPP_Vec2"];kb.prototype={__class__:kb};var Va=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_Edge"]=Va;Va.__name__=["zpp_nape","util","ZNPNode_ZPP_Edge"];Va.prototype={__class__:Va};var nc=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_Component"]=nc;nc.__name__=["zpp_nape","util","ZNPNode_ZPP_Component"];nc.prototype=
{__class__:nc};var uh=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_InteractionGroup"]=uh;uh.__name__=["zpp_nape","util","ZNPNode_ZPP_InteractionGroup"];uh.prototype={__class__:uh};var Kc=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_ColArbiter"]=Kc;Kc.__name__=["zpp_nape","util","ZNPNode_ZPP_ColArbiter"];Kc.prototype={__class__:Kc};var ld=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_FluidArbiter"]=ld;ld.__name__=["zpp_nape","util","ZNPNode_ZPP_FluidArbiter"];
ld.prototype={__class__:ld};var md=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_SensorArbiter"]=md;md.__name__=["zpp_nape","util","ZNPNode_ZPP_SensorArbiter"];md.prototype={__class__:md};var Wa=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_Listener"]=Wa;Wa.__name__=["zpp_nape","util","ZNPNode_ZPP_Listener"];Wa.prototype={__class__:Wa};var ac=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_ToiEvent"]=ac;ac.__name__=["zpp_nape","util","ZNPNode_ZPP_ToiEvent"];
ac.prototype={__class__:ac};var vh=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ConvexResult"]=vh;vh.__name__=["zpp_nape","util","ZNPNode_ConvexResult"];vh.prototype={__class__:vh};var wh=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_GeomPoly"]=wh;wh.__name__=["zpp_nape","util","ZNPNode_ZPP_GeomPoly"];wh.prototype={__class__:wh};var xh=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_RayResult"]=xh;xh.__name__=["zpp_nape","util","ZNPNode_RayResult"];
xh.prototype={__class__:xh};var ad=function(){this.at_index=0;this.at_ite=null;this.zip_length=!1;this._length=0;this.inner=null;Yc.call(this);this.at_ite=null;this.at_index=0;this.zip_length=!0;this._length=0};i["zpp_nape.util.ZPP_MixVec2List"]=ad;ad.__name__=["zpp_nape","util","ZPP_MixVec2List"];ad.get=function(a,b){null==b&&(b=!1);var c=new ad;c.inner=a;c.zpp_inner.immutable=b;return c};ad.__super__=Yc;ad.prototype=z(Yc.prototype,{zpp_gl:function(){this.zpp_vm();if(this.zip_length){this._length=
0;for(var a=this.inner.next;null!=a;)this._length++,a=a.next;this.zip_length=!1}return this._length},zpp_vm:function(){this.zpp_inner.validate();this.inner.modified&&(this.zip_length=!0,this._length=0,this.at_ite=null)},at:function(a){this.zpp_vm();this.zpp_inner.reverse_flag&&(a=this.zpp_gl()-1-a);if(a<this.at_index||null==this.at_ite){this.at_index=0;for(this.at_ite=this.inner.next;;)break}for(;this.at_index!=a;){this.at_index++;for(this.at_ite=this.at_ite.next;;)break}return this.at_ite.wrapper()},
push:function(a){this.zpp_inner.modify_test();this.zpp_vm();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?this.inner.add(a.zpp_inner):this.inner.insert(this.inner.iterator_at(this.zpp_gl()-1),a.zpp_inner),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},__class__:ad});var vc=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=
!1;this._invalidate=this._validate=this.adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new Sc;this._invalidated=!0};i["zpp_nape.util.ZPP_ConstraintList"]=vc;vc.__name__=["zpp_nape","util","ZPP_ConstraintList"];vc.get=function(a,b){null==b&&(b=!1);var c=new jg;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};vc.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=
null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:vc};var ic=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=
this.post_adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new mc;this._invalidated=!0};i["zpp_nape.util.ZPP_BodyList"]=ic;ic.__name__=["zpp_nape","util","ZPP_BodyList"];ic.get=function(a,b){null==b&&(b=!1);var c=new pg;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};ic.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=
!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:ic};var Md=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};i["zpp_nape.util.ZPP_InteractorList"]=Md;
Md.__name__=["zpp_nape","util","ZPP_InteractorList"];Md.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:Md};var kd=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;
this._invalidate=this._validate=this.adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new Cd;this._invalidated=!0};i["zpp_nape.util.ZPP_CompoundList"]=kd;kd.__name__=["zpp_nape","util","ZPP_CompoundList"];kd.get=function(a,b){null==b&&(b=!1);var c=new rg;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};kd.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=
null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:kd};var id=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.post_adder=
this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new vf;this._invalidated=!0};i["zpp_nape.util.ZPP_ListenerList"]=id;id.__name__=["zpp_nape","util","ZPP_ListenerList"];id.get=function(a,b){null==b&&(b=!1);var c=new hg;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};id.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=
!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:id};var Nb=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.post_adder=this.subber=null;this.immutable=this._invalidated=
!1;this.outer=this.inner=null;this.inner=new Wb;this._invalidated=!0};i["zpp_nape.util.ZPP_CbTypeList"]=Nb;Nb.__name__=["zpp_nape","util","ZPP_CbTypeList"];Nb.get=function(a,b){null==b&&(b=!1);var c=new wd;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};Nb.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},
validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:Nb};var zc=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.post_adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new Qd;this._invalidated=
!0};i["zpp_nape.util.ZPP_Vec2List"]=zc;zc.__name__=["zpp_nape","util","ZPP_Vec2List"];zc.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:zc};
var ee=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};i["zpp_nape.util.ZPP_GeomPolyList"]=ee;ee.__name__=["zpp_nape","util","ZPP_GeomPolyList"];ee.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&
(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:ee};var Ld=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};i["zpp_nape.util.ZPP_RayResultList"]=Ld;Ld.__name__=["zpp_nape","util","ZPP_RayResultList"];Ld.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,
this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:Ld};var yd=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};i["zpp_nape.util.ZPP_ConvexResultList"]=yd;yd.__name__=["zpp_nape","util","ZPP_ConvexResultList"];yd.prototype={valmod:function(){this.validate();this.inner.modified&&
(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:yd};var Nd=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};i["zpp_nape.util.ZPP_EdgeList"]=Nd;Nd.__name__=["zpp_nape","util","ZPP_EdgeList"];
Nd.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:Nd};var Ac=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.post_adder=
this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new Pd;this._invalidated=!0};i["zpp_nape.util.ZPP_ShapeList"]=Ac;Ac.__name__=["zpp_nape","util","ZPP_ShapeList"];Ac.get=function(a,b){null==b&&(b=!1);var c=new tg;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};Ac.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=
!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:Ac};var xd=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};i["zpp_nape.util.ZPP_InteractionGroupList"]=xd;xd.__name__=["zpp_nape",
"util","ZPP_InteractionGroupList"];xd.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:xd};var Xc=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this.immutable=
this._invalidated=!1;this.outer=this.inner=null;this.inner=new me;this._invalidated=!0};i["zpp_nape.util.ZPP_ArbiterList"]=Xc;Xc.__name__=["zpp_nape","util","ZPP_ArbiterList"];Xc.get=function(a,b){null==b&&(b=!1);var c=new kg;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};Xc.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=
!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:Xc};var de=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};i["zpp_nape.util.ZPP_ContactList"]=de;de.__name__=["zpp_nape","util","ZPP_ContactList"];de.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),
this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:de};var ge=function(){};i["zpp_nape.util.ZPP_Math"]=ge;ge.__name__=["zpp_nape","util","ZPP_Math"];ge.sqr=function(a){return a*a};var zd=function(){};i["zpp_nape.util.ZPP_PubPool"]=zd;zd.__name__=["zpp_nape","util","ZPP_PubPool"];var ha=function(){this.colour=0;this.lt=this.swapped=this.data=this.prev=this.next=
this.parent=null};i["zpp_nape.util.ZPP_Set_ZPP_CbSetPair"]=ha;ha.__name__=["zpp_nape","util","ZPP_Set_ZPP_CbSetPair"];ha.prototype={clear_with:function(a){if(null!=this.parent){for(var b=this.parent;null!=b;)b=null!=b.prev?b.prev:null!=b.next?b.next:this.clear_node(b,a);this.parent=null}},clear_node:function(a,b){b(a.data);var c=a.parent;null!=c&&(a==c.prev?c.prev=null:c.next=null,a.parent=null);a.data=null;a.lt=null;a.swapped=null;a.next=ha.zpp_pool;ha.zpp_pool=a;return c},__fix_dbl_red:function(a){for(;;){var b=
a.parent,c=b.parent;if(null==c){b.colour=1;break}var d,e,g,h,i,j,k;b==c.prev?(g=c,k=c.next,a==b.prev?(d=a,e=b,h=a.prev,i=a.next,j=b.next):(d=b,e=a,h=b.prev,i=a.prev,j=a.next)):(d=c,h=c.prev,a==b.prev?(e=a,g=b,i=a.prev,j=a.next,k=b.next):(e=b,g=a,i=b.prev,j=a.prev,k=a.next));a=c.parent;null==a?this.parent=e:a.prev==c?a.prev=e:a.next=e;null!=e&&(e.parent=a);d.prev=h;null!=h&&(h.parent=d);d.next=i;null!=i&&(i.parent=d);e.prev=d;null!=d&&(d.parent=e);e.next=g;null!=g&&(g.parent=e);g.prev=j;null!=j&&(j.parent=
g);g.next=k;null!=k&&(k.parent=g);e.colour=c.colour-1;d.colour=1;g.colour=1;if(e==this.parent)this.parent.colour=1;else if(0==e.colour&&0==e.parent.colour){a=e;continue}break}},try_insert:function(a){var b=null,c=null;if(null==this.parent)null==ha.zpp_pool?b=new ha:(b=ha.zpp_pool,ha.zpp_pool=b.next,b.next=null),null,b.data=a,this.parent=b;else for(c=this.parent;;)if(this.lt(a,c.data))if(null==c.prev){null==ha.zpp_pool?b=new ha:(b=ha.zpp_pool,ha.zpp_pool=b.next,b.next=null);null;b.data=a;c.prev=b;
b.parent=c;break}else c=c.prev;else if(this.lt(c.data,a))if(null==c.next){null==ha.zpp_pool?b=new ha:(b=ha.zpp_pool,ha.zpp_pool=b.next,b.next=null);null;b.data=a;c.next=b;b.parent=c;break}else c=c.next;else break;if(null==b)return c;null==b.parent?b.colour=1:(b.colour=0,0==b.parent.colour&&this.__fix_dbl_red(b));return b},__class__:ha};var ub=function(){this.colour=0;this.lt=this.swapped=this.data=this.prev=this.next=this.parent=null};i["zpp_nape.util.ZPP_Set_ZPP_CbSet"]=ub;ub.__name__=["zpp_nape",
"util","ZPP_Set_ZPP_CbSet"];ub.prototype={empty:function(){return null==this.parent},find:function(a){for(var b=this.parent;null!=b&&b.data!=a;)b=this.lt(a,b.data)?b.prev:b.next;return b},find_weak:function(a){for(var b=this.parent;null!=b;)if(this.lt(a,b.data))b=b.prev;else if(this.lt(b.data,a))b=b.next;else break;return b},remove:function(a){this.remove_node(this.find(a))},remove_node:function(a){if(null!=a.next&&null!=a.prev){for(var b=a.next;null!=b.prev;)b=b.prev;var c=a.data;a.data=b.data;b.data=
c;null!=this.swapped&&this.swapped(a.data,b.data);a=b}b=null==a.prev?a.next:a.prev;if(1==a.colour)if(null!=a.prev||null!=a.next)b.colour=1;else if(null!=a.parent)for(c=a.parent;;){c.colour++;c.prev.colour--;c.next.colour--;var d=c.prev;if(-1==d.colour){this.__fix_neg_red(d);break}else if(0==d.colour){if(null!=d.prev&&0==d.prev.colour){this.__fix_dbl_red(d.prev);break}if(null!=d.next&&0==d.next.colour){this.__fix_dbl_red(d.next);break}}d=c.next;if(-1==d.colour){this.__fix_neg_red(d);break}else if(0==
d.colour){if(null!=d.prev&&0==d.prev.colour){this.__fix_dbl_red(d.prev);break}if(null!=d.next&&0==d.next.colour){this.__fix_dbl_red(d.next);break}}if(2==c.colour)if(null==c.parent)c.colour=1;else{c=c.parent;continue}break}c=a.parent;null==c?this.parent=b:c.prev==a?c.prev=b:c.next=b;null!=b&&(b.parent=c);a.parent=a.prev=a.next=null;a.data=null;a.lt=null;a.swapped=null;a.next=ub.zpp_pool;ub.zpp_pool=a},__fix_neg_red:function(a){var b=a.parent;if(b.prev==a){var c=a.prev,d=a.next,e=d.prev,g=d.next;c.colour=
0;a.colour=b.colour=1;a.next=e;null!=e&&(e.parent=a);a=b.data;b.data=d.data;d.data=a;null!=this.swapped&&this.swapped(b.data,d.data);d.prev=g;null!=g&&(g.parent=d);d.next=b.next;null!=b.next&&(b.next.parent=d);b.next=d}else c=a.next,d=a.prev,e=d.next,g=d.prev,c.colour=0,a.colour=b.colour=1,a.prev=e,null!=e&&(e.parent=a),a=b.data,b.data=d.data,d.data=a,null!=this.swapped&&this.swapped(b.data,d.data),d.next=g,null!=g&&(g.parent=d),d.prev=b.prev,null!=b.prev&&(b.prev.parent=d),b.prev=d;null!=d&&(d.parent=
b);b=c;null!=b.prev&&0==b.prev.colour?this.__fix_dbl_red(b.prev):null!=b.next&&0==b.next.colour&&this.__fix_dbl_red(b.next)},__fix_dbl_red:function(a){for(;;){var b=a.parent,c=b.parent;if(null==c){b.colour=1;break}var d,e,g,h,i,j,k;b==c.prev?(g=c,k=c.next,a==b.prev?(d=a,e=b,h=a.prev,i=a.next,j=b.next):(d=b,e=a,h=b.prev,i=a.prev,j=a.next)):(d=c,h=c.prev,a==b.prev?(e=a,g=b,i=a.prev,j=a.next,k=b.next):(e=b,g=a,i=b.prev,j=a.prev,k=a.next));a=c.parent;null==a?this.parent=e:a.prev==c?a.prev=e:a.next=e;
null!=e&&(e.parent=a);d.prev=h;null!=h&&(h.parent=d);d.next=i;null!=i&&(i.parent=d);e.prev=d;null!=d&&(d.parent=e);e.next=g;null!=g&&(g.parent=e);g.prev=j;null!=j&&(j.parent=g);g.next=k;null!=k&&(k.parent=g);e.colour=c.colour-1;d.colour=1;g.colour=1;if(e==this.parent)this.parent.colour=1;else if(0==e.colour&&0==e.parent.colour){a=e;continue}break}},insert:function(a){var b;null==ub.zpp_pool?b=new ub:(b=ub.zpp_pool,ub.zpp_pool=b.next,b.next=null);null;b.data=a;if(null==this.parent)this.parent=b;else for(a=
this.parent;;)if(this.lt(b.data,a.data))if(null==a.prev){a.prev=b;b.parent=a;break}else a=a.prev;else if(null==a.next){a.next=b;b.parent=a;break}else a=a.next;null==b.parent?b.colour=1:(b.colour=0,0==b.parent.colour&&this.__fix_dbl_red(b));return b},__class__:ub};var Ih=0;Math.NaN=Number.NaN;Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY;i.Math=Math;Math.isFinite=function(a){return isFinite(a)};Math.isNaN=function(a){return isNaN(a)};String.prototype.__class__=
i.String=String;String.__name__=["String"];i.Array=Array;Array.__name__=["Array"];Date.prototype.__class__=i.Date=Date;Date.__name__=["Date"];var Jh=i.Int={__name__:["Int"]},Kh=i.Dynamic={__name__:["Dynamic"]},Ch=i.Float=Number;Ch.__name__=["Float"];var Dh=i.Bool=Boolean;Dh.__ename__=["Bool"];var Lh=i.Class={__name__:["Class"]},Mh={};N.Element="element";N.PCData="pcdata";N.CData="cdata";N.Comment="comment";N.DocType="doctype";N.ProcessingInstruction="processingInstruction";N.Document="document";rc.instance=
new rc;Ha.DISPATCHING_SENTINEL=new Ed(null,null);A.root=new p;A.uncaughtError=new oa;A.hidden=new ya(!1);A.volume=new pa(1);A._platform=rc.instance;A._calledInit=!1;Xa.__meta__={obj:{assets:[{assets_loading:[{bytes:55370,md5:"90df1b540d0080e91a2be9f334d6151e",name:"calibri.fnt"},{bytes:55380,md5:"e229ae308711aba6461b344230b31905",name:"calibriBlack.fnt"},{bytes:19501,md5:"16d47f935a0fbfb5068af6ad231799d0",name:"calibriBlack_0.png"},{bytes:21247,md5:"d89347de79646c12d93e719f922f500e",name:"calibri_0.png"},
{bytes:707160,md5:"70d3e1b2e892cde3360428d2391a40ee",name:"Gadget/IG_Runner_Preloader_960x540.png"},{bytes:18153,md5:"a6dfd67b6dd8fe7a0529456fcff573f4",name:"Gadget/IG_Runner_Preloader_960x540_load.png"}],assets_general:[{bytes:61917,md5:"ff9fa81183f409768fa9f9ecdca17c26",name:"animations/Enemies/Gadget/atlas0.png"},{bytes:110243,md5:"03eff0cbfd340e19ae835782847eafbb",name:"animations/Enemies/Gadget/atlas1.png"},{bytes:139484,md5:"ff1fe1e21bf656372b8fb37e2221f5a7",name:"animations/Enemies/Gadget/atlas2.png"},
{bytes:70348,md5:"52f45da986f27842ef9d87a388972aea",name:"animations/Enemies/Gadget/atlas3.png"},{bytes:1295053,md5:"e707167bb998f22656c7fce52ad6c7bf",name:"animations/Enemies/Gadget/library.json"},{bytes:89659,md5:"99e4f17b43f957c273b622f40933b77b",name:"animations/particles/atlas0.png"},{bytes:65292,md5:"7b89b94a2767dbca0d488ffafaa681c4",name:"animations/particles/atlas1.png"},{bytes:30450,md5:"c7dfc448f6b70d53be7f894099058fef",name:"animations/particles/atlas2.png"},{bytes:9840,md5:"e8e9fc16d9ca486ec3dc8ddfb0219a9d",
name:"animations/particles/library.json"},{bytes:47964,md5:"8a1bec3951c5cbdf23b897a05dbe3246",name:"animations/powerUps/atlas0.png"},{bytes:2833,md5:"5bf8acae93dd99ee021b8b7bb1defe77",name:"animations/powerUps/atlas1.png"},{bytes:2703,md5:"52b3993008a715314d4513dd83ac76b0",name:"animations/powerUps/atlas2.png"},{bytes:4533,md5:"de9eeb9b63563af40303eb9af8a695ac",name:"animations/powerUps/atlas3.png"},{bytes:12552,md5:"4da78d51dd64eeea5258369f95b8853e",name:"animations/powerUps/GadgetCoin/atlas0.png"},
{bytes:2446,md5:"8dba88bb3cddb9456adab47d9912b585",name:"animations/powerUps/GadgetCoin/library.json"},{bytes:8638,md5:"eb3493919defff96bb01d6b2455c3810",name:"animations/powerUps/GadgetHeart/atlas0.png"},{bytes:5351,md5:"02c7c94b3a433baa00e932396b229e25",name:"animations/powerUps/GadgetHeart/library.json"},{bytes:50762,md5:"8c0563f81006bd7fe2fe9824e05e11a5",name:"animations/powerUps/library.json"},{bytes:84212,md5:"f8ae70159042a5aa4787c8d0733e92e6",name:"animations/Runner/Gadget/atlas0.png"},{bytes:334430,
md5:"d655209eb49e81bba09d77c0c0945146",name:"animations/Runner/Gadget/library.json"},{bytes:69632,md5:"e37dfa06b75e1ffa6263029b5ac4e41a",name:"animations/Runner/hit/atlas0.png"},{bytes:94600,md5:"a5eac98b21420cb9d4905f75964db961",name:"animations/Runner/hit/atlas1.png"},{bytes:2514,md5:"3dd52febed147b883f59e49cd2663623",name:"animations/Runner/hit/atlas2.png"},{bytes:8601,md5:"78dcd4bce4b20824a88a88b9ccce16ee",name:"animations/Runner/hit/library.json"},{bytes:54601,md5:"f818a818f2f26bb4ec1505fab5e49dfd",
name:"animations/Runner/Penny/atlas0.png"},{bytes:270939,md5:"cbac782e8a8261856545224f401cefe6",name:"animations/Runner/Penny/library.json"},{bytes:36138,md5:"61a44421e73f46c700e9c9ccfc31e8c7",name:"animations/transition/Gadget/atlas0.png"},{bytes:6052,md5:"17493d2f7ac1179b9f99cf68739cf337",name:"animations/transition/Gadget/library.json"},{bytes:32,md5:"aad8c7a94a866b1657ea2a08d1321128",name:"animations/transition/md5"},{bytes:1,md5:"003d62073d0b493a14427a45413fc595",name:"animations/transition/version"},
{bytes:27645,md5:"2fd861d2fa88ee72b7640365287cfe47",name:"fonts/Gadget/big/drsoos.fnt"},{bytes:102097,md5:"11e59b04467adc888b3853364518b225",name:"fonts/Gadget/big/drsoos_0.png"},{bytes:27645,md5:"2fd861d2fa88ee72b7640365287cfe47",name:"fonts/Gadget/bigColour/drsoos.fnt"},{bytes:158736,md5:"bd280c1e775b8600b64200577b2c3c97",name:"fonts/Gadget/bigColour/drsoos_0.png"},{bytes:27641,md5:"5ae243c3acfc7f184019be4a4777da59",name:"fonts/Gadget/medium/drsoos.fnt"},{bytes:46370,md5:"c8f53532fcd1580d3e3c4133f1bdbaa7",
name:"fonts/Gadget/medium/drsoos_0.png"},{bytes:27641,md5:"5ae243c3acfc7f184019be4a4777da59",name:"fonts/Gadget/mediumColour/drsoos.fnt"},{bytes:67475,md5:"b0b79607ef6c8bd6d3befb37f25c0d14",name:"fonts/Gadget/mediumColour/drsoos_0.png"},{bytes:27672,md5:"dbfa3899e8387ac7d2a62ee4451c7f4b",name:"fonts/Gadget/normal/drsoos.fnt"},{bytes:19042,md5:"482a41c9e1581764145268858622105a",name:"fonts/Gadget/normal/drsoos_0.png"},{bytes:2884,md5:"e994d29dc95bb82c82d5c55d53380315",name:"fonts/Gadget/normal/drsoos_1.png"},
{bytes:27672,md5:"dbfa3899e8387ac7d2a62ee4451c7f4b",name:"fonts/Gadget/normalColour/drsoos.fnt"},{bytes:32136,md5:"ffcca368e10bf87e5d2beb10066d4f73",name:"fonts/Gadget/normalColour/drsoos_0.png"},{bytes:4069,md5:"0d64d5ef72b7b96190b2e0fcc5fb8983",name:"fonts/Gadget/normalColour/drsoos_1.png"},{bytes:3102,md5:"ca9bf1c419069bc520ace7cd2d531f37",name:"images/coinConfirmation/back.png"},{bytes:187,md5:"7721b8a893626aaab726e0ea777f5a5b",name:"images/confirmation/background.png"},{bytes:555408,md5:"3177cb87ac0402712c658b88b875f936",
name:"images/Gadget/BGs/IG_Building_INT_960x540.png"},{bytes:747605,md5:"3bd4d760201846880f0e69d470fce4a1",name:"images/Gadget/BGs/IG_City_Street_Paris_960x540.png"},{bytes:28933,md5:"b498d1591a05164558582bc660fcde3d",name:"images/Gadget/BGs/IG_Doorway_OL_1.png"},{bytes:31564,md5:"8c2a774f8d9899efa32f98e0e7e509f3",name:"images/Gadget/BGs/IG_Doorway_UL_1.png"},{bytes:268815,md5:"2e3d6baf1b78abed3c552990c8916479",name:"images/Gadget/BGs/IG_HQ_Hallway_960x540.png"},{bytes:736690,md5:"69c0a2fb1e0a4c4d3518142ea6e65f6e",
name:"images/Gadget/BGs/IG_MAD_Hallway_960x540.png"},{bytes:750722,md5:"e53f850627c8c46aa9bb127f047df0e0",name:"images/Gadget/BGs/IG_Metro_City_960x540.png"},{bytes:3102,md5:"ca9bf1c419069bc520ace7cd2d531f37",name:"images/Gadget/coinConfirmation/back.png"},{bytes:103416,md5:"dec899af5007149a0e77e9cb384de67e",name:"images/Gadget/coinConfirmation/Coin_heart.png"},{bytes:12580,md5:"2ae1f6c809d71958a5df3a81d7281a78",name:"images/Gadget/coinConfirmation/Heart.png"},{bytes:21179,md5:"1cb0edfd95a9a4269f1e026e0b66347c",
name:"images/Gadget/coinConfirmation/IG_Hud_coin.png"},{bytes:21706,md5:"2b076b5eb71d4afa2726e6a7f5c8dae4",name:"images/Gadget/coinConfirmation/stop_Button.png"},{bytes:21771,md5:"14cb6f1688781a7100e3f2c95f78339a",name:"images/Gadget/coinConfirmation/yes_Button.png"},{bytes:187,md5:"7721b8a893626aaab726e0ea777f5a5b",name:"images/Gadget/confirmation/background.png"},{bytes:1365257,md5:"e40ac8ef253b0fe03898c8f97e332a08",name:"images/Gadget/confirmation/quit_screen.png"},{bytes:6881,md5:"6f02c12f92f27a90092bbfb631d43982",
name:"images/Gadget/confirmation/Quit_Screen_cancel.png"},{bytes:8764,md5:"77555b155544f6d9df95f281257176f2",name:"images/Gadget/confirmation/Quit_Screen_check.png"},{bytes:203870,md5:"51b020bdef1aa77d98bbe1d3761fbc7d",name:"images/Gadget/Home/achievement_Menu.png"},{bytes:48404,md5:"a04424d07798e7674646609b25c732bd",name:"images/Gadget/Home/IG_DIM_Choose_Char_Arrow.png"},{bytes:184887,md5:"2db29a95d7f58260c485e4dcba657a0c",name:"images/Gadget/Home/IG_DIM_logo.png"},{bytes:34012,md5:"86d50a00783bc463a8e1a686fe655d2a",
name:"images/Gadget/Home/Mute_Button.png"},{bytes:36454,md5:"d0097c4533afaae25976d28e76a1f632",name:"images/Gadget/Home/Mute_Button_Cross.png"},{bytes:133044,md5:"bfb1d000d8fa2390c727211c6aef80ce",name:"images/Gadget/Home/SingleRecord_menu.png"},{bytes:231393,md5:"4427c584be68c05e3b2db3ebbcc14f96",name:"images/Gadget/Home/tutorial.png"},{bytes:21511,md5:"4e76cf30226cbb595b9d30d7d81d58d0",name:"images/Gadget/HUD/IG_Gear_coin.png"},{bytes:37983,md5:"c60b8f937a6a2511f9f061c9089b74c7",name:"images/Gadget/HUD/IG_Hud_back.png"},
{bytes:21179,md5:"1cb0edfd95a9a4269f1e026e0b66347c",name:"images/Gadget/HUD/IG_Hud_coin.png"},{bytes:33307,md5:"abc74915938b79022ec4c1674343f511",name:"images/Gadget/HUD/IG_Hud_C_Container.png"},{bytes:29209,md5:"88311151a8502e571a0219a9219e5f33",name:"images/Gadget/HUD/IG_Hud_L_R_Container.png"},{bytes:25260,md5:"7752fa42049fe56bb8b5f10a048ee306",name:"images/Gadget/HUD/IG_Pause_button.png"},{bytes:46390,md5:"f94ed91ed95b202605cf8d83c9752538",name:"images/Gadget/IG_Bio_hazard_Bins.png"},{bytes:30009,
md5:"8dc6588631a0f2bf9c4be745421eea80",name:"images/Gadget/IG_Blue_gas_tanks.png"},{bytes:12931,md5:"2a840223b1aafdae771fcbe14204350d",name:"images/Gadget/IG_Coin_Bag.png"},{bytes:10905,md5:"924d765fdf3a16a7634d783903164bb5",name:"images/Gadget/IG_gadget_run_flump.png"},{bytes:10888,md5:"c4639fc46f8bbb38869077d6324a1e24",name:"images/Gadget/IG_penny_run.png"},{bytes:40933,md5:"62df0eb0b4249ef5195a90fc90df5c1a",name:"images/Gadget/IG_Wrecking_Ball.png"},{bytes:758,md5:"d193087aa32fc32d3e05f34715ba3c8e",
name:"images/Gadget/Missions/check-icon.png"},{bytes:46094,md5:"722b49b60d1c64511c0a5983d3e0cf3f",name:"images/Gadget/Missions/SingleMission_Screen.png"},{bytes:1234,md5:"6fd1d319d1fb92ff3dcd3776c5325a76",name:"images/Gadget/Missions/SingleMission_Screenbox.png"},{bytes:6843,md5:"42101d3f1d2d388814d21d70b23f5ca2",name:"images/Gadget/Missions/SingleMission_Screenboxcheck.png"},{bytes:203870,md5:"51b020bdef1aa77d98bbe1d3761fbc7d",name:"images/Gadget/pause/achievement_Menu.png"},{bytes:3102,md5:"ca9bf1c419069bc520ace7cd2d531f37",
name:"images/Gadget/pause/back.png"},{bytes:758,md5:"d193087aa32fc32d3e05f34715ba3c8e",name:"images/Gadget/pause/check-icon.png"},{bytes:25260,md5:"7752fa42049fe56bb8b5f10a048ee306",name:"images/Gadget/pause/IG_Pause_button.png"},{bytes:34012,md5:"86d50a00783bc463a8e1a686fe655d2a",name:"images/Gadget/pause/Mute_Button.png"},{bytes:36454,md5:"d0097c4533afaae25976d28e76a1f632",name:"images/Gadget/pause/Mute_Button_Cross.png"},{bytes:80892,md5:"01b3d111adec194b2d5c28ffb620b10a",name:"images/Gadget/pause/pauseMenu_panel.png"},
{bytes:988,md5:"2df20c8a65ca07fcb86b24fd17ac5a50",name:"images/Gadget/pause/pausemenu_Quit.png"},{bytes:1284,md5:"74f9542a1cad5f134967f7056be86dd6",name:"images/Gadget/pause/pausemenu_Replay.png"},{bytes:592,md5:"76a1f9f6b235b640c5ec19f15ab0258f",name:"images/Gadget/pause/pausemenu_Resume.png"},{bytes:1234,md5:"6fd1d319d1fb92ff3dcd3776c5325a76",name:"images/Gadget/pause/SingleMission_Screenbox.png"},{bytes:6843,md5:"42101d3f1d2d388814d21d70b23f5ca2",name:"images/Gadget/pause/SingleMission_Screenboxcheck.png"},
{bytes:231393,md5:"4427c584be68c05e3b2db3ebbcc14f96",name:"images/Gadget/pause/tutorial.png"},{bytes:3102,md5:"ca9bf1c419069bc520ace7cd2d531f37",name:"images/Gadget/Result/back.png"},{bytes:21511,md5:"4e76cf30226cbb595b9d30d7d81d58d0",name:"images/Gadget/Result/IG_Gear_coin.png"},{bytes:26389,md5:"559d884902c70dcf2a0863195636b1a5",name:"images/Gadget/Result/menuShopCoin.png"},{bytes:80892,md5:"01b3d111adec194b2d5c28ffb620b10a",name:"images/Gadget/Result/pauseMenu_panel.png"},{bytes:988,md5:"2df20c8a65ca07fcb86b24fd17ac5a50",
name:"images/Gadget/Result/pausemenu_Quit.png"},{bytes:1284,md5:"74f9542a1cad5f134967f7056be86dd6",name:"images/Gadget/Result/pausemenu_Replay.png"},{bytes:592,md5:"76a1f9f6b235b640c5ec19f15ab0258f",name:"images/Gadget/Result/pausemenu_Resume.png"},{bytes:202072,md5:"c9801f9461830dedd0419a0307c154ea",name:"images/Gadget/Result/resultsmenu.png"},{bytes:3102,md5:"ca9bf1c419069bc520ace7cd2d531f37",name:"images/result/back.png"},{bytes:402,md5:"6c061735954b5a301337d038a7dda8fe",name:"levelData/objectives.json"},
{bytes:984317,md5:"8051134c0ea6a9d6c73bf83ce91b85c9",name:"sounds/Gadget/music/ActionMusicLoop2.ogg"},{bytes:695795,md5:"ab30847987820577ceb6648aa78718d8",name:"sounds/Gadget/music/TitleScreenLoop.ogg"},{bytes:11230,md5:"7f7c43d4810061f82f959480acb7a82c",name:"sounds/Gadget/sfx/01_Looped_RIL_jump.ogg"},{bytes:26927,md5:"e2ee32302a290e8db2ae84411e99b5eb",name:"sounds/Gadget/sfx/AchievementSuccess.ogg"},{bytes:13788,md5:"450d6ff8b8c249fe38ee7102a8421d2a",name:"sounds/Gadget/sfx/CoinBagCollect.ogg"},
{bytes:10754,md5:"e91127583c0d62406549a76ed66a87b8",name:"sounds/Gadget/sfx/CoinCollect.ogg"},{bytes:10570,md5:"2869ea4b0d518e11b1105c82f50ad3ef",name:"sounds/Gadget/sfx/GearCollect.ogg"},{bytes:20002,md5:"67f50759ccdb7cc47ecfa4e8bca8a3c5",name:"sounds/Gadget/sfx/HitGlass.ogg"},{bytes:16367,md5:"e5421228613243b6a6ccee7eeb3afdfb",name:"sounds/Gadget/sfx/Jump.ogg"},{bytes:33478,md5:"4ff034b2cc240da0de57368091eb3c93",name:"sounds/Gadget/sfx/Portal.ogg"},{bytes:18064,md5:"857229235f1368a10356fbd5879b53f8",
name:"sounds/Gadget/sfx/Select.ogg"},{bytes:18199,md5:"80475247fe36489e33b2637d99355165",name:"sounds/Gadget/sfx/Select2.ogg"},{bytes:13332,md5:"5ce0dfaf00f078a23d69c26c36f2268d",name:"sounds/Gadget/sfx/SoundOff.ogg"},{bytes:12846,md5:"50513a5239cc724547070b93f95041a1",name:"sounds/Gadget/sfx/SoundOn.ogg"},{bytes:133831,md5:"53ab2df5efec19ab01823813538b4b8a",name:"sounds/Gadget/sfx/SSG_Shield_loop.ogg"},{bytes:10517,md5:"50b735e8510f5d27173433f2e6ec3dcf",name:"sounds/Gadget/sfx/TakeDamage.ogg"},{bytes:5321,
md5:"b9bee14dcf5474b12d59ddef8d0b6b2a",name:"sounds/RunningInLoops/01_Looped_RIL_dooropen.mp3"},{bytes:9179,md5:"559f4a30b40126c8fd841c143edaf619",name:"sounds/RunningInLoops/01_Looped_RIL_dooropen.ogg"},{bytes:45686,md5:"c5e9421924287885a8739569da0cddf6",name:"sounds/RunningInLoops/01_Looped_RIL_dooropen.wav"},{bytes:17903,md5:"2448b2832194322e3e63fdc16667c3a0",name:"sounds/RunningInLoops/01_Looped_RIL_headbounce.mp3"},{bytes:12411,md5:"d4b644412d8d913852c730a43e3affb8",name:"sounds/RunningInLoops/01_Looped_RIL_headbounce.ogg"},
{bytes:39419,md5:"54b0e34cd24015f82fbdaceed92ec513",name:"sounds/RunningInLoops/01_Looped_RIL_infinityuse.mp3"},{bytes:41188,md5:"eaf7f91016b6a8bad29a279a9d7e405a",name:"sounds/RunningInLoops/01_Looped_RIL_infinityuse.ogg"},{bytes:22127,md5:"ca55c85fecfe27881ed7fff9f1478b6e",name:"sounds/RunningInLoops/01_Looped_RIL_jump.mp3"},{bytes:11230,md5:"7f7c43d4810061f82f959480acb7a82c",name:"sounds/RunningInLoops/01_Looped_RIL_jump.ogg"},{bytes:13246,md5:"d6097c41fca500be66c4390d7b0dbb42",name:"sounds/RunningInLoops/01_Looped_RIL_recordBreak.mp3"},
{bytes:24898,md5:"426254af15929b6eb7d7a05bbbe40364",name:"sounds/RunningInLoops/01_Looped_RIL_recordBreak.ogg"},{bytes:12960,md5:"8d47a66a387dd47912d8572dca09beed",name:"sounds/RunningInLoops/01_Looped_RIL_revive.mp3"},{bytes:7680,md5:"a23b5e7c0346a86aebba6007d9ae8148",name:"sounds/RunningInLoops/01_Looped_RIL_zonepass.mp3"},{bytes:8290,md5:"e7a56f57deba3681a9ef4b305b2a0b91",name:"sounds/RunningInLoops/01_Looped_RIL_zonepass.ogg"},{bytes:62832,md5:"4e05e41f2172beaa04cf586f443eb0d5",name:"sounds/RunningInLoops/01_Looped_RIL_zonepass.wav"}],
config:[{bytes:187,md5:"9e46734a8d994ff9e4d2d2c4ad48de59",name:"Config.xml"},{bytes:1959,md5:"6c8c0c375c2325d297bf4f190625f5ab",name:"Credits.xml"},{bytes:5570,md5:"656e3ffe614619399551c9f2f5b4bebd",name:"localization.json"}]}]}};Xa._supportsCrossOrigin=function(){var a;a=0<=window.navigator.userAgent.indexOf("Linux; U; Android")?!1:null!=(new XMLHttpRequest).withCredentials;a||null;return a}();M._scratchPoint=new Ef;cd.NEWLINE=new Be(10);cb._sharedEvent=new Kf;Ab._sharedEvent=new Lf;Pa._sharedEvent=
new Mf;qd.CANVAS_TEXTURES=(new Lc("(iPhone|iPod|iPad)","")).match(window.navigator.userAgent);Y._mediaRefCount=0;Y._detectBlobSupport=!0;K.VENDOR_PREFIXES=["webkit","moz","ms","o","khtml"];K.SHOULD_HIDE_MOBILE_BROWSER=window.top==window&&(new Lc("Mobile(/.*)? Safari","")).match(window.navigator.userAgent);Z._detectSupport=!0;db.ANY_SHAPE=new fa;db.ANY_BODY=new fa;db.ANY_COMPOUND=new fa;db.ANY_CONSTRAINT=new fa;Ya._Interactor=0;Ya._CbType=0;Ya._CbSet=0;Ya._Listener=0;e.ASSET_PACKAGE_CONFIG="config";
e.ASSET_PACKAGE_LOADING="assets_loading";e.ASSET_PACKAGE_GENERAL="assets_general";e.CONFIG_ASSET_CONFIG_XML="Config.xml";e.ARRAY_VARS_TO_SAVE=na.allEnums(Lb);e.ARRAY_VARS_INIT_VALUES=[!0,!0];e.LOAD_ALL=0;e.LOAD_BY_ROOM=1;e.LOAD_TYPE=1;e.PLAYER_EVENT_JUMP=1;e.PLAYER_EVENT_HIT_FLOOR=2;e.PLAYER_EVENT_DEAD=3;e.PLAYER_ONE=1;e.PLAYER_TWO=2;e.PLAYER_ONE_NAME="Gadget_";e.PLAYER_TWO_NAME="Penny_";e.PLAYER_ONE_SCALE=0.8;e.PLAYER_ONE_RUN_ANCHOR=new Rc(0,62.5);e.PLAYER_TWO_SCALE=0.4;e.PLAYER_TWO_RUN_ANCHOR=new Rc(0,
125);e.PLAYER_INVULNERABLE=!1;e.PLAYER_INVULNERABLE_ALERT=!1;e.PLAYER_INVULNERABLE_TIME=8;e.PLAYER_INVULNERABLE_TIME_ALERT=5;e.PLAYER_INVULNERABLE_RINGS=3;e.RINGS=0;e.PLAYER_REVIVE=!1;e.GAME_WIDTH=960;e.GAME_HEIGHT=540;e.floorCollisionType=new fa;e.wallCollisionType=new fa;e.hazardCollisionType=new fa;e.hazardJumpCollisionType=new fa;e.hazardFastCollisionType=new fa;e.coinCollisionType=new fa;e.coinBagCollisionType=new fa;e.playerCollisionType=new fa;e.ringCollisionType=new fa;e.rebootEnviromentTriggerType=
new fa;e.roomTriggerType=new fa;e.bounceCollisionType=new fa;e.timeDeltaPerSec=10;e.ZONE_TIMES=function(){var a=new ea;a.set("08:00 AM","School's Hallway");a.set("12:00 PM","School's Labs");a.set("04:00 PM","School's Cafeteria");a.set("08:00 PM","School's Courts");a.set("00:00 AM","School's Hallway");a.set("04:00 AM","School's Labs");return a}(this);e.COLOR_ZONES=function(){var a=new ea;a.set("School's Hallway",12259600);a.set("School's Labs",11669952);a.set("School's Cafeteria",47376);a.set("School's Courts",
4537);return a}(this);e.runnerSpeed=470;e.runnerSpeedIncrement=1;e.ARRAY_SOUNDS_FX_MUSIC=function(){var a=new ea;a.set("SFX_INTRO","sounds/Gadget/music/TitleScreenLoop");a.set("SFX_LEVEL1","sounds/Gadget/music/ActionMusicLoop2");a.set("SFX_LEVEL2","sounds/Gadget/music/ActionMusicLoop2");a.set("SFX_BUTTON_SELECT","sounds/Gadget/sfx/Select");a.set("SFX_BUTTON_SELECT2","sounds/Gadget/sfx/Select2");a.set("SFX_BUTTON_SOUND_ON","sounds/Gadget/sfx/SoundOn");a.set("SFX_BUTTON_SOUND_OFF","sounds/Gadget/sfx/SoundOff");
a.set("SFX_JUMP","sounds/Gadget/sfx/Jump");a.set("SFX_LUC_JUMP","sounds/Gadget/sfx/01_Looped_RIL_jump");a.set("SFX_THEO_JUMP","sounds/Gadget/sfx/Jump");a.set("SFX_COIN","sounds/Gadget/sfx/CoinCollect");a.set("SFX_RING","sounds/Gadget/sfx/GearCollect");a.set("SFX_BOUNCE","sounds/RunningInLoops/01_Looped_RIL_headbounce");a.set("SFX_ZONE","sounds/RunningInLoops/01_Looped_RIL_zonepass");a.set("SFX_LOOP","sounds/Gadget/sfx/Portal");a.set("SFX_HIT_HEAVY","sounds/Gadget/sfx/TakeDamage");a.set("SFX_HIT_BREAK",
"sounds/Gadget/sfx/TakeDamage");a.set("SFX_CORRECT","sounds/RunningInLoops/01_Looped_RIL_success");a.set("SFX_INFINITY_COLLECT","sounds/Gadget/sfx/GearCollect");a.set("SFX_INFINITY_USE","sounds/RunningInLoops/01_Looped_RIL_infinityuse");a.set("SFX_POPUP_REVIVE","sounds/RunningInLoops/01_Looped_RIL_revive");a.set("SFX_ACHIVEMENTS_UNLOKED","sounds/Gadget/sfx/AchievementSuccess");a.set("SFX_INVINCIBLE","sounds/Gadget/sfx/SSG_Shield_loop");a.set("SFX_DOOROPEN","sounds/RunningInLoops/01_Looped_RIL_dooropen");
a.set("SFX_RECORDBREAK","sounds/Gadget/sfx/HitGlass");return a}(this);e.fixFontHeight=0;e.fixFontScale=0.5;e.arrayCoins=[];e.arrayBox2=[];e.EXTRA_LIFE_COINS_AMMOUNT=100;e.EXTRA_LIFE_COINS_CONSTANT=100;e.EXTRA_LIFE_COINS_AMMOUNT_INCREASE=20;e.MAX_TIME_PER_FRAME=0.1;e.MAX_TIME_TO_RECORD_GHOST_PLAYBACK=0.05;e.All_MISSION_COMPLETE=!1;e.REVIVE_USED=!1;e.SPEED_DAY_INCREASE=0.4;x.PLAYER_GRAVITY=0;x.PLAYER_IMPULSE=0;x.firstLoad=!0;x.reboots=0;x.metters=0;Pc.USE_CACHE=!1;Pc.USE_ENUM_INDEX=!1;Pc.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";
Sa.DEFAULT_RESOLVER=na;Sa.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";Vc.count=0;qc.escapes=function(){var a=new ea;a.set("lt","<");a.set("gt",">");a.set("amp","&");a.set("quot",'"');a.set("apos","'");a.set("nbsp",String.fromCharCode(160));return a}(this);C.isEnglish=!0;Cb.loopedRunnerSetBest="?service_name=User/setBestPlayback";Cb.loopedRunnerCheckUser="?service_name=User/checkUser";Cb.loopedRunnerURL="https://www.forestrygames.com/";o.epsilon=
1.0E-8;o.fluidAngularDragFriction=2.5;o.fluidAngularDrag=100;o.fluidVacuumDrag=0.5;o.fluidLinearDrag=0.5;o.collisionSlop=0.2;o.collisionSlopCCD=0.5;o.distanceThresholdCCD=0.05;o.staticCCDLinearThreshold=0.05;o.staticCCDAngularThreshold=0.005;o.bulletCCDLinearThreshold=0.125;o.bulletCCDAngularThreshold=0.0125;o.dynamicSweepLinearThreshold=17;o.dynamicSweepAngularThreshold=0.6;o.angularCCDSlipScale=0.75;o.arbiterExpirationDelay=6;o.staticFrictionThreshold=2;o.elasticThreshold=20;o.sleepDelay=60;o.linearSleepThreshold=
0.2;o.angularSleepThreshold=0.4;o.contactBiasCoef=0.3;o.contactStaticBiasCoef=0.6;o.contactContinuousBiasCoef=0.4;o.contactContinuousStaticBiasCoef=0.5;o.illConditionedThreshold=2E8;uc.STOP=1;q.OBJECTIVE_ONE="";q.OBJECTIVE_TWO="";q.OBJECTIVE_THREE="";q.OBJECTIVE_ONE_PROGRESS="";q.OBJECTIVE_TWO_PROGRESS="";q.OBJECTIVE_THREE_PROGRESS="";q.OBJECTIVE_ONE_DONE=!1;q.OBJECTIVE_TWO_DONE=!1;q.OBJECTIVE_THREE_DONE=!1;ia.ran_seed=9966699;g.internal=!1;g.id_ImmState_ACCEPT=1;g.id_ImmState_IGNORE=2;g.id_ImmState_ALWAYS=
4;g.id_GravMassMode_DEFAULT=0;g.id_GravMassMode_FIXED=1;g.id_GravMassMode_SCALED=2;g.id_InertiaMode_DEFAULT=0;g.id_MassMode_DEFAULT=0;g.id_BodyType_STATIC=1;g.id_BodyType_DYNAMIC=2;g.id_BodyType_KINEMATIC=3;g.id_ListenerType_BODY=0;g.id_PreFlag_ACCEPT=1;g.id_ListenerType_CONSTRAINT=1;g.id_ListenerType_INTERACTION=2;g.id_ListenerType_PRE=3;g.id_CbEvent_BEGIN=0;g.id_InteractionType_COLLISION=1;g.id_CbEvent_ONGOING=6;g.id_InteractionType_SENSOR=2;g.id_CbEvent_END=1;g.id_InteractionType_FLUID=4;g.id_CbEvent_WAKE=
2;g.id_InteractionType_ANY=7;g.id_CbEvent_SLEEP=3;g.id_CbEvent_BREAK=4;g.id_CbEvent_PRE=5;g.id_ShapeType_CIRCLE=0;g.id_ShapeType_POLYGON=1;Ga.UCbSet=new Kd;Ga.VCbSet=new Kd;Ga.WCbSet=new Kd;Ga.UCbType=new Wb;Ga.VCbType=new Wb;Ga.WCbType=new Wb;aa.internal=!1;aa.COL=1;aa.FLUID=4;aa.SENSOR=2;Oa.internal=!1;F.flowpoly=new Qd;F.flowsegs=new Qd;var Gh;null==g.BodyType_STATIC&&(g.internal=!0,g.BodyType_STATIC=new S,g.internal=!1);Gh=g.BodyType_STATIC;var Hh;null==g.BodyType_DYNAMIC&&(g.internal=!0,g.BodyType_DYNAMIC=
new S,g.internal=!1);Hh=g.BodyType_DYNAMIC;null==g.BodyType_KINEMATIC&&(g.internal=!0,g.BodyType_KINEMATIC=new S,g.internal=!1);Zc.types=[null,Gh,Hh,g.BodyType_KINEMATIC];O.WAKE=1;O.PROPS=2;O.ANGDRAG=4;O.ARBITERS=8;da.internal=!1;Gb.tmpaabb=new W;vc.internal=!1;ic.internal=!1;Md.internal=!1;kd.internal=!1;id.internal=!1;Nb.internal=!1;zc.internal=!1;ee.internal=!1;Ld.internal=!1;yd.internal=!1;Nd.internal=!1;Ac.internal=!1;xd.internal=!1;Xc.internal=!1;de.internal=!1;Mc.main()})();
