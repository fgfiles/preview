!function(){function e(t,a,i){function n(o,r){if(!a[o]){if(!t[o]){var l="function"==typeof require&&require;if(!r&&l)return l(o,!0);if(s)return s(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var h=a[o]={exports:{}};t[o][0].call(h.exports,function(e){return n(t[o][1][e]||e)},h,h.exports,e,t,a,i)}return a[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)n(i[o]);return n}return e}()({1:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default={hasNumber:function(e){return/\d/.test(e)},addCeros:function(e,t){for(var a=String(e);a.length<(t||2);)a="0"+a;return a},formatTimeStringFromMs:function(e){var t=e/1e3,a=Math.floor(t/60)+":",i=Math.floor(t)%60;return i<10&&(a+="0"),a+=i}}},{}],2:[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),l=function e(t,a,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,a,i)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(i)},u=e("../gameOptions"),h=i(u),d=e("./BonusObject"),c=i(d),f=function(e){function t(e,a){n(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.playstate=a,i.gameArea=new Phaser.Rectangle(0,0,960,640),i.objectsArray=[],i.objectsToFind=[],i.objectsFound=0,i.centerGadget=new Phaser.Point,i.gadgetRadius=50,i.tutorialHintActive=!1,i.hintParticle=new Phaser.Sprite(i.game,100,100,"UIText","hint_00001"),i.hintParticle.anchor.set(.5),i.hintParticle.animations.add("idle",Phaser.Animation.generateFrameNames("hint_",1,10,"",5),15,!1).onComplete.add(function(){this.hintParticle.objectToTrack.alive?(this.hintParticle.play("idle"),this.hintParticle.angle+=45):this.endHintParticle()},i),i.hintParticle.visible=!1,i.add(i.hintParticle),i}return o(t,e),r(t,[{key:"endHintParticle",value:function(){this.hintParticle.visible=!1,this.hintParticle.angle=0,this.lastHintActive=!1,this.tutorialHintActive=!1}},{key:"loadLevel",value:function(){var e=this.game.cache.getJSON("roomJson"),t=e.objects,a=0,i=0;this.objectsArray.push([]);for(var n=t.length-1;n>-1;n--){if(t[n].name.includes("Bonus")){var s=new c.default(this.game,t[n].x,Math.abs(t[n].y),"roomText",t[n].name,this);s.anchor.set(.5),this.objectsArray[a].push(s),i++,i>2&&(i=0,++a<3&&this.objectsArray.push([]))}}}},{key:"shuffleClues",value:function(){if(this.objectsArray.length<1)return void this.playstate.startWinState();for(var e=this.game.rnd.integerInRange(0,2),t=this.objectsArray[e],a=0;a<h.default.bonus.cluesToFind;a++){var i=t[a];this.objectsToFind.push(i),this.add(i)}}},{key:"setupBonusGame",value:function(){switch(h.default.level.photosFound=0,h.default.level.room_selected){case 0:this.setupFlashligthGame();break;case 1:this.setupGlassGame();break;case 2:this.setupScannerGame()}}},{key:"setupFlashligthGame",value:function(){this.loadLevel(),this.shuffleClues();var e=new Phaser.Graphics(this.game,0,0);e.beginFill(0,.8),e.drawRect(0,0,this.game.width,this.game.height),this.darkness=new Phaser.Sprite(this.game,0,0,e.generateTexture()),e.destroy(),this.ligth=new Phaser.Sprite(this.game,0,0,"UIText","ligth"),this.ligth.anchor.set(.5,1),this.darknessTexture=new Phaser.RenderTexture(this.game,this.game.width,this.game.height);var t=new Phaser.Sprite(this.game,0,0,this.darknessTexture);t.blendMode=PIXI.blendModes.MULTIPLY,this.add(t),this.darknessTexture.renderXY(this.darkness,0,0,!1),this.flashLigth=new Phaser.Sprite(this.game,.5*this.game.width,this.game.height+50,"UIText","Flashligth"),this.flashLigth.anchor.set(.5,1),this.add(this.flashLigth),this.game.device.desktop?(this.flashLigth.x=this.game.input.worldX,this.flashLigth.y=this.game.input.worldY+100):(this.flashLigth.inputEnabled=!0,this.flashLigth.input.enableDrag(!0),this.flashLigth.input.boundsRect=this.gameArea,this.flashLigth.input.dragFromCenter=!1,this.flashLigth.events.onDragStop.add(this.gadgetDragEnd,this)),this.game.world.bringToTop(this.flashLigth),this.playstate.regularGame.killAllObjects()}},{key:"setupGlassGame",value:function(){this.loadLevel(),this.shuffleClues(),this.outOfFocusFilter=new Phaser.Sprite(this.game,0,0,"glassFilterImg"),this.playstate.filtersGroup.add(this.outOfFocusFilter),this.glassMask=new Phaser.Graphics(this.game,-100,0),this.glassMask.beginFill(16777215),this.glassMask.drawCircle(0,0,180),this.add(this.glassMask);this.playstate.regularGame.scale.set(1.05),this.game.world.bringToTop(this.playstate.regularGame),this.game.world.bringToTop(this),this.playstate.regularGame.mask=this.glassMask,this.mask=this.glassMask,this.glassLens=new Phaser.Sprite(this.game,-100,0,"UIText","MagnifyingGlassMask"),this.glassLens.anchor.set(.5),this.glassLens.alpha=.25,this.playstate.gadgetsGroup.add(this.glassLens),this.magnifyingGlass=new Phaser.Sprite(this.game,.5*this.game.width,this.game.height+50,"UIText","MagnifyingGlass"),this.magnifyingGlass.anchor.set(.5,1),this.playstate.gadgetsGroup.add(this.magnifyingGlass),this.game.device.desktop?(this.magnifyingGlass.x=this.game.input.worldX,this.magnifyingGlass.y=this.game.input.worldY+100):(this.magnifyingGlass.inputEnabled=!0,this.magnifyingGlass.input.enableDrag(!0),this.magnifyingGlass.input.boundsRect=this.gameArea,this.magnifyingGlass.input.dragFromCenter=!1,this.magnifyingGlass.events.onDragStop.add(this.gadgetDragEnd,this)),this.game.world.bringToTop(this.playstate.gadgetsGroup),this.glassMask.x=this.magnifyingGlass.x,this.glassMask.y=this.magnifyingGlass.y-240,this.glassLens.x=this.glassMask.x,this.glassLens.y=this.glassMask.y,this.playstate.regularGame.killAllObjects()}},{key:"setupScannerGame",value:function(){this.scannerBack=new Phaser.Sprite(this.game,0,0,"scannerBackAnimText","scannerFilter1"),this.scannerBack.animations.add("idle",["scannerFilter1","scannerFilter2"],20,!0),this.scannerBack.play("idle"),this.add(this.scannerBack),this.loadLevel(),this.shuffleClues();var e=new Phaser.Graphics(this.game,0,0);e.beginFill(0,.9),e.drawRect(0,0,this.game.width,this.game.height),this.darkness=new Phaser.Sprite(this.game,0,0,e.generateTexture()),e.destroy(),this.ligth=new Phaser.Sprite(this.game,0,0,"UIText","scannerMask"),this.ligth.anchor.set(.5,1),this.darknessTexture=new Phaser.RenderTexture(this.game,this.game.width,this.game.height);var t=new Phaser.Sprite(this.game,0,0,this.darknessTexture);t.blendMode=PIXI.blendModes.MULTIPLY,this.add(t),this.darknessTexture.renderXY(this.darkness,0,0,!1),this.scanner=new Phaser.Sprite(this.game,.5*this.game.width,this.game.height+50,"UIText","scanner"),this.scanner.anchor.set(.5,1),this.playstate.gadgetsGroup.add(this.scanner),this.game.device.desktop?(this.scanner.x=this.game.input.worldX,this.scanner.y=this.game.input.worldY+100):(this.scanner.inputEnabled=!0,this.scanner.input.enableDrag(!0),this.scanner.input.boundsRect=this.gameArea,this.scanner.input.dragFromCenter=!1,this.scanner.events.onDragStop.add(this.gadgetDragEnd,this)),this.game.world.bringToTop(this.playstate.gadgetsGroup),this.playstate.regularGame.kill()}},{key:"gadgetDragEnd",value:function(e){var t=e.getBounds();if(!Phaser.Rectangle.containsRect(t,this.gameArea)){var a=e.x;e.x+.5*e.width>this.gameArea.width&&(a=this.gameArea.x+this.gameArea.width-.5*e.width),e.x-.5*e.width<this.gameArea.x&&(a=this.gameArea.x+.5*e.width);var i=e.y;e.y-.5*e.height>this.gameArea.y+this.gameArea.height&&(i=this.gameArea.y+this.gameArea.height+.5*e.height),e.y-e.height<this.gameArea.y&&(i=this.gameArea.y+e.height),this.game.add.tween(e).to({x:a,y:i},50,Phaser.Easing.Linear.Out,!0)}}},{key:"startPlayingState",value:function(){switch(h.default.level.room_selected){case 0:this.flashLigth.visible=!0,h.default.main.soundFx.play("linterna");break;case 1:this.magnifyingGlass.visible=!0,this.glassLens.visible=!0,h.default.main.soundFx.play("gadget_lupa");break;case 2:this.scanner.visible=!0,h.default.main.soundFx.play("gadget_scanner")}}},{key:"disableBonus",value:function(){switch(h.default.level.room_selected){case 0:this.flashLigth.inputEnabled=!1,this.flashLigth.visible=!1,this.darknessTexture.renderXY(this.darkness,0,0,!0);break;case 1:this.magnifyingGlass.visible=!1,this.glassLens.visible=!1,this.glassMask.x=-200;break;case 2:this.scanner.visible=!1,this.darknessTexture.renderXY(this.darkness,0,0,!0)}}},{key:"killBonus",value:function(){}},{key:"update",value:function(){if(!h.default.main.gamePaused&&(l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this),h.default.level.currentFlow==h.default.level.FLOW_PLAYING)){switch(h.default.level.room_selected){case 0:this.updateFlashligthGameplay();break;case 1:this.updateGlassGameplay();break;case 2:this.updateScannerGameplay()}}}},{key:"objectFound",value:function(e){if(!h.default.main.gamePaused&&!e.wasFound){e.wasFound=!0,this.objectsFound++,h.default.level.allPhotosFound++,h.default.level.photosFound++,this.playstate.HUD.addObjectFoundScore(this.objectsFound);this.game.add.tween(e.scale).to({x:1.5,y:1.5},500,Phaser.Easing.Elastic.Out,!0).onComplete.add(function(){t.start()},this);var t=this.game.add.tween(e.scale);t.to({x:0,y:0},500,Phaser.Easing.Linear.Out,!1).onComplete.add(function(){e.kill(),this.objectsFound==this.objectsToFind.length&&this.playstate.startWinState()},this),h.default.main.soundFx.play("correct")}}},{key:"updateFlashligthGameplay",value:function(){this.game.device.desktop&&(this.flashLigth.x=this.game.input.worldX,this.flashLigth.y=this.game.input.worldY+100),this.ligth.x=this.flashLigth.x,this.ligth.y=this.flashLigth.y-135,this.darknessTexture.renderXY(this.darkness,0,0,!0),this.darknessTexture.renderXY(this.ligth,this.ligth.x,this.ligth.y,!1),this.centerGadget.set(this.ligth.x,this.ligth.y-.5*this.ligth.width)}},{key:"updateGlassGameplay",value:function(){this.game.device.desktop&&(this.magnifyingGlass.x=this.game.input.worldX,this.magnifyingGlass.y=this.game.input.worldY+100),this.glassMask.x=this.magnifyingGlass.x,this.glassMask.y=this.magnifyingGlass.y-240,this.glassLens.x=this.glassMask.x,this.glassLens.y=this.glassMask.y,this.centerGadget.set(this.glassMask.x,this.glassMask.y)}},{key:"updateScannerGameplay",value:function(){this.game.device.desktop&&(this.scanner.x=this.game.input.worldX,this.scanner.y=this.game.input.worldY+100),this.ligth.x=this.scanner.x,this.ligth.y=this.scanner.y-170,this.darknessTexture.renderXY(this.darkness,0,0,!0),this.darknessTexture.renderXY(this.ligth,this.ligth.x,this.ligth.y,!1),this.centerGadget.set(this.ligth.x,this.ligth.y-.5*this.ligth.height)}},{key:"showTutorialHint",value:function(){console.log("show hint tuto"),this.tutorialHintActive=!0;var e=(this.hintIndex,this.objectsToFind[0]);this.hintParticle.visible=!0,this.hintParticle.x=e.x,this.hintParticle.y=e.y,this.hintParticle.play("idle"),this.hintParticle.objectToTrack=e}}]),t}(Phaser.Group);a.default=f},{"../gameOptions":7,"./BonusObject":4}],3:[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),l=e("../gameOptions"),u=i(l),h=e("../ui/TutorialPanelBonus"),d=i(h),c=function(e){function t(e,a){n(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));i.playstate=a;var o=new Phaser.Graphics(i.game,0,0);o.beginFill(0,1),o.drawRect(0,0,i.game.width,i.game.height),o.endFill(),i.fadeFilter=new Phaser.Sprite(i.game,0,0,o.generateTexture()),i.fadeFilter.alpha=0,i.add(i.fadeFilter),o.destroy(),i.spiningRays=new Phaser.Image(i.game,480,270,"bonusIntroText","star_bonus_full"),i.spiningRays.anchor.set(.5),i.add(i.spiningRays),i.game.add.tween(i.spiningRays).to({angle:360},3500,Phaser.Easing.Linear.Out,!0).loop(!0);var o=new Phaser.Graphics(i.game,0,0);o.beginFill(0,1),o.drawRect(0,0,i.game.width,77),o.endFill(),i.topBlack=new Phaser.Image(i.game,0,0,o.generateTexture()),i.add(i.topBlack),i.bottomBlack=new Phaser.Image(i.game,0,i.game.height,o.generateTexture()),i.bottomBlack.anchor.set(0,1),i.add(i.bottomBlack),o.destroy(),i.photo01=new Phaser.Image(i.game,647,309,"UIText","UI_OUTRO_PHOTO_A"),i.photo01.anchor.set(.5),i.add(i.photo01),i.photo02=new Phaser.Image(i.game,685,263,"UIText","UI_OUTRO_PHOTO_B"),i.photo02.anchor.set(.5),i.add(i.photo02),i.photo03=new Phaser.Image(i.game,722,301,"UIText","UI_OUTRO_PHOTO_C"),i.photo03.anchor.set(.5),i.add(i.photo03),i.title=new Phaser.Image(i.game,580,160,"bonusIntroText","text_find"),i.add(i.title);var r=i.game.height;switch(i.character=new Phaser.Image(i.game,530,r,"bonusIntroText","bonus_pj1"),i.character.anchor.set(1),i.add(i.character),u.default.level.room_selected){case 0:i.character.frameName="bonus_pj1";break;case 1:i.character.frameName="bonus_pj2";break;case 2:i.character.frameName="bonus_pj3"}return i.grpHelpBonusPanel=new d.default(i.game),i.add(i.grpHelpBonusPanel),i.btnSkip=new Phaser.Button(i.game,880,460,"UIText",i.clickOnNext,i,"UI_BUTTON_RESUME_OVERLAY","UI_BUTTON_RESUME_NORMAL","UI_BUTTON_RESUME_PRESSED","UI_BUTTON_RESUME_NORMAL"),i.add(i.btnSkip),i.btnSkip.input.useHandCursor=!1,i.btnSkip.alpha=0,i.visible=!1,i.canAdvance=!1,i.canAdvanceTimer=i.game.time.create(!0),i.canAdvanceTimer.add(2e3,function(){this.canAdvance=!0},i),i}return o(t,e),r(t,[{key:"startSequence",value:function(){this.game.world.bringToTop(this),u.default.main.playingMusic.fadeOut(2500),this.canAdvanceTimer.start(),this.visible=!0;this.game.add.tween(this.topBlack).from({y:-77},500,Phaser.Easing.Cubic.Out,!0),this.game.add.tween(this.bottomBlack).from({y:this.game.height+77},500,Phaser.Easing.Cubic.Out,!0),this.game.add.tween(this.spiningRays).from({alpha:0},500,Phaser.Easing.Linear.Out,!0,600),this.game.add.tween(this.character).from({x:0},500,Phaser.Easing.Back.Out,!0,400),this.game.add.tween(this.title).from({alpha:0},500,Phaser.Easing.Cubic.Out,!0,1100),this.game.add.tween(this.photo01.scale).from({x:0,y:0},500,Phaser.Easing.Elastic.Out,!0,1200),this.game.add.tween(this.photo02.scale).from({x:0,y:0},500,Phaser.Easing.Elastic.Out,!0,1350),this.game.add.tween(this.photo03.scale).from({x:0,y:0},500,Phaser.Easing.Elastic.Out,!0,1500),this.game.add.tween(this.fadeFilter).to({alpha:1},1e3,Phaser.Easing.Linear.In,!0,1500),this.game.add.tween(this.btnSkip).to({alpha:1},1e3,Phaser.Easing.Linear.In,!0,1500)}},{key:"endSecuence",value:function(){this.game.add.tween(this.topBlack).to({y:-77},500,Phaser.Easing.Cubic.Out,!0,900),this.game.add.tween(this.bottomBlack).to({y:this.game.height+77},500,Phaser.Easing.Cubic.Out,!0,900),this.game.add.tween(this.spiningRays).to({alpha:0},500,Phaser.Easing.Linear.Out,!0,900),this.game.add.tween(this.title).to({alpha:0},500,Phaser.Easing.Linear.Out,!0,0),this.game.add.tween(this.photo01).to({alpha:0},500,Phaser.Easing.Linear.Out,!0,0),this.game.add.tween(this.photo02).to({alpha:0},500,Phaser.Easing.Linear.Out,!0,0),this.game.add.tween(this.photo03).to({alpha:0},500,Phaser.Easing.Linear.Out,!0,0),this.game.add.tween(this.character).to({x:0},500,Phaser.Easing.Back.Out,!0,600);var e=this.game.time.create(!0);e.add(1500,function(){this.playstate.startIntroState(),this.visible=!1},this),e.start()}},{key:"clickOnNext",value:function(e){this.canAdvance&&(0!=u.default.level.roomsWon||this.grpHelpBonusPanel.visible?(this.grpHelpBonusPanel.kill(),e.inputEnabled=!1,e.kill(),this.endSecuence()):this.grpHelpBonusPanel.showHidePanel())}}]),t}(Phaser.Group);a.default=c},{"../gameOptions":7,"../ui/TutorialPanelBonus":28}],4:[function(e,t,a){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),r=function(e){function t(e,a,s,o,r,l){i(this,t);var u=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a,s,o,r));return u.bonusMain=l,u.timeToWaitBeforeFound=500,u.waitBeforeFoundTimer=u.timeToWaitBeforeFound,u.wasFound=!1,u}return s(t,e),o(t,[{key:"update",value:function(){if(!this.wasFound){Phaser.Point.distance(this.bonusMain.centerGadget,this)<this.bonusMain.gadgetRadius?(this.waitBeforeFoundTimer-=this.game.time.elapsedMS,this.waitBeforeFoundTimer<0&&this.bonusMain.objectFound(this)):this.waitBeforeFoundTimer=this.timeToWaitBeforeFound}}}]),t}(Phaser.Sprite);a.default=r},{}],5:[function(e,t,a){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),r=e("../gameOptions"),l=function(e){return e&&e.__esModule?e:{default:e}}(r),u=function(e){function t(e,a){i(this,t);var s=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));s.playstate=a;var o=new Phaser.Image(s.game,0,0,"jigsawBackImg");s.add(o),s.gameArea=new Phaser.Rectangle(0,50,960,490),s.boardPosition=new Phaser.Point(505,90),s.piecesPositionsOnBoard=l.default.jigsaw.PositionsOnBoard,s.piecesInPosition=0,s.puzzlePieces=[];for(var r=Math.min(9,l.default.level.allPhotosFound),u=0,h=0,d=0;d<r;d++){var c="Jigsaw_0"+(d+1);if(4==d)switch(l.default.level.guiltySuspect){case 0:c+="_A";break;case 1:c+="_B";break;case 2:c+="_C"}var f=new Phaser.Sprite(s.game,-300,-300,"jigsawText",c);f.anchor.set(.5),f.id=d,f.column=u,f.row=h,u+=1,3==u&&(u=0,h+=1),f.inputEnabled=!0,f.input.enableDrag(!0),f.input.boundsRect=s.gameArea,f.input.bringToTop=!0,f.input.dragFromCenter=!1,f.events.onDragStop.add(s.pieceDragEnd,s),s.add(f),s.puzzlePieces.push(f)}var p=0,m=0,g=new Phaser.Point(180,140);Phaser.ArrayUtils.shuffle(s.puzzlePieces);for(var d=0;d<s.puzzlePieces.length;d++){var f=s.puzzlePieces[d];f.position.set(g.x+90*p+60*Math.random(),g.y+90*m+60*Math.random()),f.visible=!1,p++,p>2&&(p=0,m++)}return s}return s(t,e),o(t,[{key:"showPuzlePieces",value:function(){this.game.add.audio("voiceEvenMore",l.default.main.voicesVolume).play();for(var e=0;e<this.puzzlePieces.length;e++){var t=this.puzzlePieces[e];t.frameName.includes("05")||this.bringToTop(t),t.visible=!0,this.game.add.tween(t).from({x:-300},500,Phaser.Easing.Linear.In,!0,250*e).onStart.add(function(){l.default.main.soundFx.play("foto_in")},this),this.game.add.tween(t.scale).from({x:2,y:2},500,Phaser.Easing.Quintic.In,!0,250*e)}}},{key:"pieceDragEnd",value:function(e){this.checkIfPieceIsInsideGameArea(e),this.pinPieceToBoard(e)}},{key:"pinPieceToBoard",value:function(e){var t=e.id,a=new Phaser.Point(this.boardPosition.x+this.piecesPositionsOnBoard[t][0],this.boardPosition.y+this.piecesPositionsOnBoard[t][1]);Phaser.Point.distance(e,a)<30&&(e.input.disableDrag(),this.game.add.tween(e).to({x:a.x,y:a.y},100,Phaser.Easing.Linear.Out,!0),l.default.main.soundFx.play("fit_puzzle"),this.piecesInPosition+=1),this.piecesInPosition==this.puzzlePieces.length&&(this.game.camera.flash(16777215,500),l.default.main.soundFx.play("flash"),this.game.time.events.add(1e3,function(){this.playstate.startWinState()},this))}},{key:"pinAdyacentPieces",value:function(e){for(var t=new Phaser.Point(e.x+e.width+50,e.y+.5*e.height),a=new Phaser.Point(e.x-50,e.y+.5*e.height),i=new Phaser.Point(e.x+.5*e.width,e.y-50),n=new Phaser.Point(e.x+.5*e.width,e.y+e.height+50),s=0;s<this.puzzlePieces.length;s++){var o=this.puzzlePieces[s],r=o.getBounds(),l=Phaser.Rectangle.containsPoint(r,t),u=Phaser.Rectangle.containsPoint(r,a),h=Phaser.Rectangle.containsPoint(r,i),d=Phaser.Rectangle.containsPoint(r,n);(l||u)&&o.row==e.row&&(o.column==e.column+1&&!0,o.column==e.column-1&&!0),(h||d)&&o.column==e.column&&(o.row==e.row-1&&!0,o.row==e.row+1&&!0)}}},{key:"checkIfPieceIsInsideGameArea",value:function(e){var t=e.getBounds();if(!Phaser.Rectangle.containsRect(t,this.gameArea)){var a=e.x;e.x+e.width>this.gameArea.width&&(a=this.gameArea.x+this.gameArea.width-e.width),e.x<this.gameArea.x&&(a=this.gameArea.x);var i=e.y;e.y+e.height>this.gameArea.y+this.gameArea.height&&(i=this.gameArea.y+this.gameArea.height-e.height),e.y<this.gameArea.y&&(i=this.gameArea.y),this.game.add.tween(e).to({x:a,y:i},50,Phaser.Easing.Linear.Out,!0)}}},{key:"update",value:function(){l.default.level.currentFlow,l.default.level.FLOW_PLAYING}}]),t}(Phaser.Group);a.default=u},{"../gameOptions":7}],6:[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),l=function e(t,a,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,a,i)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(i)},u=e("../gameOptions"),h=i(u),d=e("../Utils"),c=i(d),f=function(e){function t(e,a){n(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));i.playstate=a,i.objectsArray=[],i.objectsToFind=[],i.objectsFound=0,i.Candel1Ligths=[],i.Candel2Ligths=[],i.lastObjectShownOnHud=0,i.objectsOnHud=[],i.hintIndex=0,i.cluesOnHudAmount=5,i.cluesLeft=[174,297,420,543,666],i.cluesTop=[454,455,456,455,455],i.cluesAngles=[-2,0,0,-1,1],i.cluesGroup=new Phaser.Group(i.game),i.loadLevel(),i.shuffleClues(),i.add(i.cluesGroup),i.hintGrp=new Phaser.Group(i.game),i.add(i.hintGrp),i.btnHint=new Phaser.Button(i.game,851,440,"UIText",i.showObjectHint,i,"ButtonHint_Overlay","ButtonHint_Normal","ButtonHint_Pressed","ButtonHint_Normal"),i.btnHint.input.useHandCursor=!1,i.hintGrp.add(i.btnHint);var o=new Phaser.Image(i.game,i.btnHint.x,i.btnHint.y,"UIText","ButtonHint_Value");return i.hintGrp.add(o),i.hintsTxt=new Phaser.BitmapText(i.game,i.btnHint.x+72,i.btnHint.y+66,"gameFont",""+h.default.regularGame.availableHints,20),i.hintGrp.add(i.hintsTxt),h.default.regularGame.availableHints=h.default.regularGame.initialHints,i.hintsTxt.text=""+h.default.regularGame.availableHints,i.hintGrp.visible=!1,i.hintAnimTimes=5,i.lastHintActive=!1,i.tutorialHintActive=!1,i.hintParticle=new Phaser.Sprite(i.game,100,100,"UIText","hint_00001"),i.hintParticle.anchor.set(.5),i.hintParticle.animations.add("idle",Phaser.Animation.generateFrameNames("hint_",1,10,"",5),15,!1).onComplete.add(function(){this.hintParticle.objectToTrack.alive?(this.tutorialHintActive||(this.hintAnimTimes-=1),this.hintAnimTimes<=0?this.endHintParticle():(this.hintParticle.play("idle"),this.hintParticle.angle+=45)):this.endHintParticle()},i),i.hintParticle.visible=!1,i.add(i.hintParticle),i}return o(t,e),r(t,[{key:"endHintParticle",value:function(){this.hintParticle.visible=!1,this.hintParticle.angle=0,this.lastHintActive=!1,this.tutorialHintActive=!1,this.hintAnimTimes=5}},{key:"killAllObjects",value:function(){this.objectsArray.forEach(function(e){e.kill()}),this.Candel1Ligths.forEach(function(e){e.kill()}),this.Candel2Ligths.forEach(function(e){e.kill()})}},{key:"loadLevel",value:function(){for(var e=this.game.cache.getJSON("roomJson"),t=e.objects,a=[],i=new Map,n=t.length-1;n>-1;n--){var s=t[n].name,o=c.default.hasNumber(s);if(o){var r=s.includes("Background"),l=s.includes("anim"),u=s.includes("foreground"),h=s.includes("Bonus");(r||l||u||h)&&(o=!1);var d=s.substring(0,s.length-1).trim();if(i.has(d)){var f=i.get(d);i.set(d,f+1)}else i.set(d,0)}var p=[t[n],o];a.push(p)}for(var m=new Map,g=new Map,n=0;n<a.length;n++){var b=a[n][0];if(a[n][1]){var s=b.name,d=s.substring(0,s.length-1).trim();if(!m.has(d)){var v=i.get(d),y=this.game.rnd.integerInRange(0,v);m.set(d,y),g.set(d,0)}m.get(d)==g.get(d)&&this.createRoomObjects(Math.abs(b.x),Math.abs(b.y),b.name,n);var f=g.get(d);g.set(d,f+1)}else this.createRoomObjects(Math.abs(b.x),Math.abs(b.y),b.name,n)}for(var n=0;n<this.objectsArray.length;n++){var _=this.objectsArray[n];this.hasAnimChilds(_,_.name)}}},{key:"createRoomObjects",value:function(e,t,a,i){if(!a.includes("Bonus")){var n=new Phaser.Sprite(this.game,e,t,"roomText",a);if(n.name=a,n.anchor.set(.5),a.includes("anim"))return void this.setupAnimObject(n,a);if(this.add(n),!a.includes("foreground")&&(n.inputEnabled=!0,n.input.pixelPerfectClick=!0,n.input.pixelPerfectAlpha=2,!a.includes("Background"))){n.id=i,n.events.onInputDown.add(this.clickOnObjectFound,this);var s=this.game.add.group();s.x=0,s.y=0;var o=new Phaser.Sprite(this.game,0,0,"UIText","ButtonPhoto_BG");s.add(o);var r=new Phaser.Sprite(this.game,.5*o.width,.5*o.height,"roomText",a);r.anchor.set(.5);var l=new Phaser.Sprite(this.game,0,0,"UIText","ButtonPhoto_Frame");s.add(l);var u=1,h=r.width;r.height>r.width&&(h=r.height),h>55&&(u=(55/h).toFixed(2),r.scale.set(u)),s.add(r),this.cluesGroup.add(s),s.visible=!1,s.active=!1,n.clue=s,n.wasFound=!1,this.objectsArray.push(n)}}}},{key:"setupAnimObject",value:function(e,t){"fganim 1"==t&&this.setupLigthingWindowAnim(e),this.setupCandelLigths(e,t),this.setupMonsterAnim(e,t)}},{key:"setupMonsterAnim",value:function(e,t){if(t.includes("monster")){this.add(e),e.loadTexture("monsterText");switch(h.default.level.room_selected){case 0:e.animations.add("run",Phaser.Animation.generateFrameNames("Conde_corre_",1,4,"",3),24,!0),e.play("run"),e.x=-550;break;case 1:e.frameName="anim_monster",e.visible=!1;break;case 2:e.animations.add("appear",Phaser.Animation.generateFrameNames("Conde_ventana_",1,9,"",3),24,!1).onComplete.add(function(e){e.kill(),this.game.camera.flash(0,500)},this),e.visible=!1}this.timerMonster=this.game.time.create(!0),this.timerMonster.add(2e4,function(){this.startMonsterAnim(e)},this)}}},{key:"startMonsterAnim",value:function(e){if(h.default.gameType.selected!=h.default.gameType.BONUS){var t=new Phaser.Graphics(this.game,0,0);t.beginFill(0,1),t.drawRect(0,0,this.game.width,this.game.height),t.endFill();var a=new Phaser.Sprite(this.game,0,0,t.generateTexture());this.add(a),t.destroy(),a.alpha=0;switch(h.default.level.room_selected){case 0:h.default.main.soundFx.play("monter_run"),this.game.add.tween(e).to({x:1510},1e3,Phaser.Easing.Linear.InOut,!0,0);this.game.add.tween(a).to({alpha:1},250,Phaser.Easing.Linear.Out,!0,0,2).onComplete.add(function(e){e.kill(),this.game.add.audio("voiceMonsters",h.default.main.voicesVolume).play()},this);break;case 1:a.alpha=1,this.bringToTop(e),e.visible=!0,this.game.camera.flash(0,500),h.default.main.soundFx.play("monter_appears");var i=this.game.time.create(!0);i.add(500,function(){a.alpha=0,e.kill(),this.game.camera.flash(0,1e3),this.game.add.audio("voiceMonsters",h.default.main.voicesVolume).play()},this),i.start();break;case 2:this.game.camera.flash(0,250),e.visible=!0,e.play("appear"),h.default.main.soundFx.play("monter_appears")}}}},{key:"setupCandelLigths",value:function(e,t){var a=t.includes("candelabro a"),i=t.includes("candelabro b");(a||i)&&(e.loadTexture("roomAnimsText"),e.animations.add("idle",Phaser.Animation.generateFrameNames("anim_candle_",0,13,"",4),12,!0),e.play("idle"),e.animations.currentAnim.frame=this.game.rnd.integerInRange(0,e.animations.currentAnim.frameTotal-1)),a&&this.Candel1Ligths.push(e),i&&this.Candel2Ligths.push(e)}},{key:"hasAnimChilds",value:function(e,t){if(t.includes("candelabro a"))for(var a=0;a<this.Candel1Ligths.length;a++){var i=this.Candel1Ligths[a];e.addChild(i),i.x-=e.x,i.y-=e.y,this.game.world.bringToTop(i)}if(t.includes("candelabro b"))for(var a=0;a<this.Candel2Ligths.length;a++){var i=this.Candel2Ligths[a];e.addChild(i),i.x-=e.x,i.y-=e.y,this.game.world.bringToTop(i)}}},{key:"setupLigthingWindowAnim",value:function(e){this.windowLigthTween1=this.game.add.tween(e).to({alpha:0},500,Phaser.Easing.Bounce.InOut,!1),this.windowLigthTween2=this.game.add.tween(e).to({alpha:0},650,Phaser.Easing.Bounce.Out,!1),this.windowLigthTween3=this.game.add.tween(e).to({alpha:0},750,Phaser.Easing.Elastic.In,!1),this.windowLigthTween1.onComplete.add(this.randomLigthTween,this),this.windowLigthTween2.onComplete.add(this.randomLigthTween,this),this.windowLigthTween3.onComplete.add(this.randomLigthTween,this),e.alpha=0,this.add(e),this.randomLigthTween()}},{key:"randomLigthTween",value:function(){h.default.gameType.selected!=h.default.gameType.BONUS&&this.game.time.events.add(this.game.rnd.integerInRange(2500,5e3),function(){switch(this.game.rnd.integerInRange(1,3)){case 1:this.windowLigthTween1.target.alpha=1,this.windowLigthTween1.start(),h.default.main.soundFx.play("thunder_03");break;case 2:this.windowLigthTween1.target.alpha=.5,this.windowLigthTween2.start(),h.default.main.soundFx.play("thunder_02");break;case 3:
this.windowLigthTween1.target.alpha=.25,this.windowLigthTween3.start(),h.default.main.soundFx.play("thunder_01")}},this)}},{key:"shuffleClues",value:function(){Phaser.ArrayUtils.shuffle(this.objectsArray);for(var e=0;e<h.default.regularGame.cluesToFind;e++)this.objectsToFind.push(this.objectsArray[e])}},{key:"showCluesOnHudIntro",value:function(){for(var e=0;e<this.cluesOnHudAmount;e++)this.presentNewClueOnHud(e,e,200*e);this.lastObjectShownOnHud=e-1}},{key:"presentNewClueOnHud",value:function(e,t,a){var i=this.objectsToFind[t];this.objectsOnHud.push(i),i.hudPosition=e;var n=i.clue;n.visible=!0,n.x=this.cluesLeft[e],n.y=this.game.height+.5*n.width,n.angle=this.cluesAngles[e];var s=this.game.add.tween(n);s.to({y:this.cluesTop[e]},1e3,Phaser.Easing.Elastic.InOut,!0,a),s.onStart.add(function(){this.game.time.events.add(500,function(){h.default.main.soundFx.play("dialogo_v02"),n.active=!0},this)},this)}},{key:"clickOnObjectFound",value:function(e){if(h.default.level.currentFlow==h.default.level.FLOW_PLAYING&&!h.default.main.gamePaused&&!e.wasFound){"scooby snacks"==e.name&&this.game.add.audio("voiceSnacks",h.default.main.voicesVolume).play();var t=e.clue,a=!1;if(t.active&&(a=!0),a){h.default.main.soundFx.play("correct",.25),h.default.regularGame.timeFreezeForTutorial=!1,e.wasFound=!0,this.objectsFound++,this.objectsFound>=h.default.regularGame.cluesToFind&&this.playstate.startWinState(),this.playstate.HUD.addObjectFoundScore(this.objectsFound);var i=this.objectsOnHud.indexOf(e);this.objectsOnHud.splice(i,1),this.bringToTop(e);this.game.add.tween(e.scale).to({x:0,y:0},500,Phaser.Easing.Back.In,!0).onComplete.add(function(){e.kill()},this);var n=this.game.add.tween(t);n.to({y:t.y+200},300,Phaser.Easing.Linear.In,!1,0),this.game.time.events.add(150,function(){++this.lastObjectShownOnHud<h.default.regularGame.cluesToFind&&this.presentNewClueOnHud(e.hudPosition,this.lastObjectShownOnHud,0)},this);this.game.add.tween(t).to({y:t.y-10},250,Phaser.Easing.Linear.Out,!0).onComplete.add(function(){h.default.main.soundFx.play("foto_out"),n.start()},this)}else{h.default.main.soundFx.play("wrong");var s=this.game.add.tween(e);e.angle=e.angle+15,s.to({angle:0},150,Phaser.Easing.Cubic.Out,!0,0,2)}}}},{key:"showTutorialHint",value:function(){this.tutorialHintActive=!0,h.default.regularGame.timeFreezeForTutorial=!0,this.hintIndex>=this.objectsOnHud.length&&(this.hintIndex=0);var e=this.hintIndex,t=this.objectsOnHud[e];this.hintIndex++,null!=t&&(this.hintParticle.visible=!0,this.hintParticle.x=t.x,this.hintParticle.y=t.y,this.hintParticle.play("idle"),this.hintParticle.objectToTrack=t,this.lastHintActive=!0)}},{key:"showObjectHint",value:function(){if(this.lastHintActive)return void h.default.main.soundFx.play("no_hint");if(h.default.regularGame.availableHints<1&&!h.default.regularGame.cheat)return void h.default.main.soundFx.play("no_hint");this.lastHintActive=!0,h.default.main.soundFx.play("hint"),h.default.regularGame.availableHints-=1,this.hintsTxt.text=""+h.default.regularGame.availableHints,h.default.regularGame.cheat||(h.default.level.globalTimeScoreBarMS-=h.default.regularGame.hintTimeCostMs),this.hintIndex>=this.objectsOnHud.length&&(this.hintIndex=0);var e=this.hintIndex,t=this.objectsOnHud[e];this.hintIndex++,null!=t&&(this.hintParticle.visible=!0,this.hintParticle.x=t.x,this.hintParticle.y=t.y,this.hintParticle.play("idle"),this.hintParticle.objectToTrack=t,h.default.regularGame.cheat&&this.clickOnObjectFound(t))}},{key:"update",value:function(){h.default.main.gamePaused||h.default.level.currentFlow==h.default.level.FLOW_INTRO||h.default.level.currentFlow==h.default.level.FLOW_INGAMEDIALOG||h.default.level.currentFlow==h.default.level.FLOW_WINLEVEL||h.default.gameType.selected!=h.default.gameType.REGULAR?(this.hintGrp.visible=!1,this.cluesGroup.visible=!1):(this.hintGrp.visible||(this.hintGrp.alpha=0,this.cluesGroup.alpha=0,this.game.add.tween(this.hintGrp).to({alpha:1},250,Phaser.Easing.Linear.Out,!0),this.game.add.tween(this.cluesGroup).to({alpha:1},250,Phaser.Easing.Linear.Out,!0)),this.hintGrp.visible=!0,this.cluesGroup.visible=!0),h.default.main.gamePaused||l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this)}}]),t}(Phaser.Group);a.default=f},{"../Utils":1,"../gameOptions":7}],7:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default={main:{version:" ",width:960,height:540,music:null,soundFx:null,gamePaused:!1,playstate:null,playingMusic:null,voicesVolume:0},level:{currentFlow:0,FLOW_INTRO:0,FLOW_PLAYING:1,FLOW_GAMEOVER:2,FLOW_WINLEVEL:3,FLOW_INGAMEDIALOG:4,room_selected:0,roomsWon:0,roomOrder:[0,1,2],savedHiScore:0,levelScore:0,levelStars:[!0,!0,!0],photosFound:0,allPhotosFound:1,globalTimeScoreBarMS:0,timeScoreMultiplier:100,levelTimeLeft:0,allLevelsScores:[0,0,0],allLevelsStars:[],guiltySuspect:0,endScoreBonus:3,finalScore:0},gameType:{selected:0,REGULAR:0,BONUS:1},regularGame:{cluesToFind:10,cluesToFindExtraDifficulty:10,time:90,extraDifficultyTime:30,initialHints:3,availableHints:3,hintTimeCostMs:1e4,maxScoreObjectFound:100,minScoreObjectFound:10,timeComboObjectFoundMax:5e3,comboTimeReward:5e3,timeFreezeForTutorial:!1,cheat:!1},bonus:{cluesToFind:3,time:20},jigsaw:{PositionsOnBoard:[]}}},{}],8:[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var n=e("./states/Boot"),s=i(n),o=e("./states/PlayState"),r=i(o),l=e("./states/JigsawState"),u=i(l),h=e("./states/MainMenu"),d=i(h),c=e("./states/LevelSelector"),f=i(c),p=e("./states/NotepadState"),m=i(p),g=e("./states/EndCinematicState"),b=i(g),v=e("./states/ScoreSumaryState"),y=i(v),_=e("./states/Preloader"),O=i(_),w=e("./states/TestOutro"),T=i(w),P=e("./gameOptions"),S=i(P);window.onload=function(){S.default.main.version+=" ";var e=new Phaser.Game(S.default.main.width,S.default.main.height,Phaser.WEBGL);e.state.add("Boot",s.default),e.state.add("Preloader",O.default),e.state.add("PlayState",r.default),e.state.add("JigsawState",u.default),e.state.add("MainMenu",d.default),e.state.add("LevelSelector",f.default),e.state.add("NotepadState",m.default),e.state.add("ScoreSumaryState",y.default),e.state.add("EndCinematicState",b.default),e.state.add("TestOutro",T.default),e.state.start("Boot"),console.log("game build "+S.default.main.version)}},{"./gameOptions":7,"./states/Boot":9,"./states/EndCinematicState":10,"./states/JigsawState":11,"./states/LevelSelector":12,"./states/MainMenu":13,"./states/NotepadState":14,"./states/PlayState":15,"./states/Preloader":16,"./states/ScoreSumaryState":17,"./states/TestOutro":18}],9:[function(e,t,a){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),r=e("../gameOptions"),l=function(e){return e&&e.__esModule?e:{default:e}}(r),u=function(e){function t(){return i(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),o(t,[{key:"init",value:function(){this.game.stage.backgroundColor="#883087",this.input.maxPointers=2,this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.scale.fullScreenScaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.device.desktop||(this.scale.forceOrientation(!0),this.scale.enterIncorrectOrientation.add(this.enterIncorrectOrientation,this),this.scale.leaveIncorrectOrientation.add(this.leaveIncorrectOrientation,this),this.orientationImg=null),this.scale.pageAlignHorizontally=!0,this.scale.pageAlignVertically=!0}},{key:"preload",value:function(){this.load.atlasJSONHash("preloaderText","assets/textures/preloader_1x.png","assets/textures/preloader_1x.json"),this.load.image("orientationImg","assets/images/orientation.jpg")}},{key:"create",value:function(){this.state.start("Preloader")}},{key:"enterIncorrectOrientation",value:function(){document.getElementById("orientation").style.display="block",this.showOrientationImage(),this.game.paused=!0}},{key:"leaveIncorrectOrientation",value:function(){document.getElementById("orientation").style.display="none",this.orientationImg.destroy(),this.game.paused=!1}},{key:"showOrientationImage",value:function(){this.orientationImg=this.game.add.image(0,0,"orientationImg"),this.orientationImg.fixedToCamera=!0,this.orientationImg.width=l.default.main.width,this.orientationImg.height=l.default.main.height}}]),t}(Phaser.State);a.default=u},{"../gameOptions":7}],10:[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),l=e("../gameOptions"),u=i(l),h=e("../ui/TransitionScreen"),d=i(h),c=function(e){function t(){return n(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),r(t,[{key:"preload",value:function(){this.transitionScreen=new d.default(this.game),this.add.existing(this.transitionScreen),this.load.image("sumaryBackImg","assets/images/END_BG.jpg")}},{key:"create",value:function(){var e=(this.add.image(0,0,"sumaryBackImg"),"HEAD");switch(u.default.level.guiltySuspect){case 0:e+="_A";break;case 1:e+="_B";break;case 2:e+="_C"}this.add.image(0,0,"UIText",e);this.add.button(880,460,"UIText",this.btnNextClick,this,"UI_BUTTON_RESUME_OVERLAY","UI_BUTTON_RESUME_NORMAL","UI_BUTTON_RESUME_PRESSED","UI_BUTTON_RESUME_NORMAL").input.useHandCursor=!1,this.transitionScreen.openDoors(!1),u.default.main.music.stop(),u.default.main.playingMusic=u.default.main.music.play("final_music_01",.25)}},{key:"btnNextClick",value:function(){this.transitionScreen.gotoNextState("ScoreSumaryState")}},{key:"update",value:function(){}}]),t}(Phaser.State);a.default=c},{"../gameOptions":7,"../ui/TransitionScreen":26}],11:[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),l=e("../gameOptions"),u=i(l),h=e("../gameElements/JigsawGameGroup"),d=i(h),c=e("../ui/TransitionScreen"),f=i(c),p=function(e){function t(){return n(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),r(t,[{key:"preload",value:function(){this.transitionScreen=new f.default(this.game),this.add.existing(this.transitionScreen),this.load.image("jigsawBackImg","assets/images/jigsawBack.jpg")}},{key:"create",value:function(){u.default.main.playstate=this,this.game.stage.backgroundColor="#000000",u.default.level.levelScore=0,this.jigsawGame=new d.default(this.game,this),this.add.existing(this.jigsawGame);var e=new Phaser.Graphics(this.game,0,0);e.beginFill(0,1),e.drawRect(0,0,this.game.width,this.game.height),e.endFill(),this.fadeFilter=new Phaser.Sprite(this.game,0,0,e.generateTexture()),this.add.existing(this.fadeFilter),e.destroy(),this.transitionScreen.openDoors(!0),u.default.main.playingMusic=u.default.main.music.play("chase_music_02"),"Debug"==indexInfo.buildState&&(this.game.time.advancedTiming=!0,this.txtFPS=this.add.bitmapText(15,this.game.height-20,"gameFont","0",18),this.txtFPS.fixedToCamera=!0,this.txtFPS.visible=!0,this.txtFPS.anchor.set(0))}},{key:"startIntroState",value:function(){u.default.level.currentFlow=u.default.level.FLOW_INTRO,this.fadeToGameplayTween=this.game.add.tween(this.fadeFilter),this.fadeToGameplayTween.to({alpha:0},1500,Phaser.Easing.Cubic.Out,!1,0).onComplete.add(function(){u.default.main.playstate.startPlayingState()},this),this.fadeToGameplayTween.start()}},{key:"startPlayingState",value:function(){u.default.level.currentFlow=u.default.level.FLOW_PLAYING,this.jigsawGame.showPuzlePieces()}},{key:"startWinState",value:function(){u.default.level.currentFlow=u.default.level.FLOW_WINLEVEL,this.transitionScreen.gotoNextState("NotepadState")}},{key:"update",value:function(){"Debug"==indexInfo.buildState&&(this.txtFPS.text=u.default.main.version+" FPS: "+this.game.time.fps)}},{key:"render",value:function(){}},{key:"renderGroup",value:function(e){this.game.debug.body(e)}}]),t}(Phaser.State);a.default=p},{"../gameElements/JigsawGameGroup":5,"../gameOptions":7,"../ui/TransitionScreen":26}],12:[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),l=e("../gameOptions"),u=i(l),h=e("../ui/AudioButtonInGame"),d=i(h),c=e("../ui/TransitionScreen"),f=(i(c),function(e){function t(){return n(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),r(t,[{key:"preload",value:function(){this.load.atlasJSONHash("LevelSelectorText","assets/textures/levelSelector.png","assets/textures/levelSelector.json")}},{key:"create",value:function(){this.add.tileSprite(0,0,960,540,"LevelSelectorText","UI_LEVELSELECTOR_BGTILE"),this.add.image(0,0,"LevelSelectorText","UI_LEVELSELECTOR_OVERLAY_SHADOW");this.createLevelButton(60,120,0),this.createLevelButton(400,120,1),this.createLevelButton(740,120,2),this.audioBtn=new d.default(this.game,870,16),this.add.existing(this.audioBtn),this.add.button(20,16,"UIText",this.btnHomeClick,this,"UI_BUTTON_HOME_OVER","UI_BUTTON_HOME_NORMAL","UI_BUTTON_HOME_PRESSED","UI_BUTTON_HOME_NORMAL").input.useHandCursor=!1}},{key:"createLevelButton",value:function(e,t,a){var i=this.add.group(),n=["UI_LEVELSELECTOR_BUTTONFRAME_SUSPECT_A","UI_LEVELSELECTOR_BUTTONFRAME_SUSPECT_B","UI_LEVELSELECTOR_BUTTONFRAME_SUSPECT_C"],s=i.create(e,t,"LevelSelectorText",n[a]);s.room=a,s.inputEnabled=!0,s.events.onInputDown.add(this.btnRoomOnClick,this);var o=i.create(e,t,"LevelSelectorText","UI_LEVELSELECTOR_BUTTONFRAME_FRAME");i.create(o.x+58,o.y+8,"LevelSelectorText","UI_LEVELSELECTOR_BUTTONFRAME_STAR_0").visible=!1,i.create(o.x+127,o.y+3,"LevelSelectorText","UI_LEVELSELECTOR_BUTTONFRAME_STAR_1").visible=!1,i.create(o.x+196,o.y+8,"LevelSelectorText","UI_LEVELSELECTOR_BUTTONFRAME_STAR_2").visible=!1;var r=new Phaser.BitmapText(this.game,o.x+154,o.y+o.height-70,"gameFont","99999",48);r.anchor.set(.5,0),i.add(r),i.scale.set(.85)}},{key:"btnRoomOnClick",value:function(e){u.default.level.room_selected=e.room,u.default.gameType.selected=u.default.gameType.REGULAR,dialogs.flow.selected=dialogs.flow.INTRO,this.state.start("PlayState")}},{key:"btnHomeClick",value:function(){this.state.start("MainMenu")}},{key:"update",value:function(){}}]),t}(Phaser.State));a.default=f},{"../gameOptions":7,"../ui/AudioButtonInGame":20,"../ui/TransitionScreen":26}],13:[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),l=e("../gameOptions"),u=i(l),h=e("../ui/AudioButton"),d=i(h),c=e("../ui/TransitionScreen"),f=(i(c),e("../ui/CreditsPanel")),p=i(f),m=function(e){function t(){return n(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),r(t,[{key:"create",value:function(){this.add.image(0,0,"mainMenuBackImg"),this.add.image(175,430,"UIText","UI_MAINMENU_PLAY_MANGO");this.btnPlay=this.add.button(252,334,"UIText",this.btnPlayOnClick,this,"UI_MAINMENU_PLAY_OVERLAY","UI_MAINMENU_PLAY_NORMAL","UI_MAINMENU_PLAY_PRESSED","UI_MAINMENU_PLAY_NORMAL"),this.btnPlay.input.useHandCursor=!1,this.btnPlay.input.pixelPerfectOver=!0,this.btnPlay.input.pixelPerfectAlpha=2,this.audioBtn=new d.default(this.game,874,16),this.add.existing(this.audioBtn);this.add.image(48,43,"UIText","UI_MAINMENU_LOGO");this.btnInfo=this.add.button(874,460,"UIText",function(){e.showHidePanel()},this,"ButtonInfo_Overlay","ButtonInfo_normal","ButtonInfo_Pressed","ButtonInfo_normal"),this.btnInfo.input.useHandCursor=!1;var e=new p.default(this.game);this.add.existing(e);var t=this.add.bitmapText(480,10,"gameFont","Hi-Score: "+u.default.level.savedHiScore,24);t.anchor.set(.5,0),t.align="center",this.versionTxt=this.add.bitmapText(5,525,"gameFont",u.default.main.version,12),u.default.main.music.stop(),u.default.main.music.play("musMenu")}},{key:"btnPlayOnClick",value:function(){u.default.main.soundFx.play("boton"),u.default.main.music.stop(),this.back=this.game.add.tileSprite(0,0,this.game.width,this.game.height,"UIText","color16x16"),this.back.inputEnabled=!0,this.video=this.game.add.video("introVideo"),this.video.currentTime=0,this.video.play(!1,1);var e=960/this.video.width;this.video.addToWorld(0,0,0,0,e,e),this.video.onComplete.add(function(){this.startGameplay()},this),this.btnSkipVideo=this.add.button(880,460,"UIText",this.startGameplay,this,"UI_BUTTON_RESUME_OVERLAY","UI_BUTTON_RESUME_NORMAL","UI_BUTTON_RESUME_PRESSED","UI_BUTTON_RESUME_NORMAL"),this.btnSkipVideo.input.useHandCursor=!1}},{key:"btnClickFullscreen",value:function(){this.game.scale.isFullScreen||(this.game.scale.startFullScreen(),this.game.device.desktop&&this.game.scale.setMinMax(u.default.main.width,u.default.main.height,0,0))}},{key:"startGameplay",value:function(){this.video.stop(),this.video.destroy(),u.default.level.guiltySuspect=this.game.rnd.integerInRange(0,2),console.log("guilty "+u.default.level.guiltySuspect),u.default.level.roomsWon=0,u.default.level.room_selected=u.default.level.roomOrder[u.default.level.roomsWon],u.default.gameType.selected=u.default.gameType.REGULAR,u.default.level.allPhotosFound=1,u.default.regularGame.cluesToFind=10,u.default.regularGame.time=90,this.state.start("PlayState")}},{key:"update",value:function(){}}]),t}(Phaser.State);a.default=m},{"../gameOptions":7,"../ui/AudioButton":19,"../ui/CreditsPanel":22,"../ui/TransitionScreen":26}],14:[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),l=e("../gameOptions"),u=i(l),h=e("../ui/AudioButtonInGame"),d=(i(h),e("../ui/TransitionScreen")),c=i(d),f=function(e){function t(){return n(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),r(t,[{key:"preload",value:function(){this.transitionScreen=new c.default(this.game),this.add.existing(this.transitionScreen),this.load.image("notepadBackImg","assets/images/notepadBack.jpg")}},{key:"create",value:function(){for(var e=(this.add.image(0,0,"notepadBackImg"),this.add.group()),t=new Phaser.Point(140,100),a=u.default.jigsaw.PositionsOnBoard,i=Math.min(9,u.default.level.allPhotosFound),n=0;n<i;n++){var s="Jigsaw_0"+(n+1);if(4==n)switch(u.default.level.guiltySuspect){case 0:s+="_A";break;case 1:s+="_B";break;case 2:s+="_C"}var o=new Phaser.Image(this.game,a[n][0]+t.x,a[n][1]+t.y,"jigsawText",s);o.anchor.set(.5),e.add(o)}e.angle=-7.7,e.scale.set(.88);var r=new Phaser.Graphics(this.game,0,0);r.beginFill(0,1),r.drawRect(0,0,64,540),r.endFill(),this.btnSuspect1=this.add.sprite(507,0,r.generateTexture()),this.btnSuspect1.alpha=0,this.btnSuspect1.inputEnabled=!0,this.btnSuspect1.id=0,this.btnSuspect1.events.onInputDown.add(this.selectSuspect,this),this.btnSuspect1.events.onInputOver.add(this.suspectOver,this),this.btnSuspect1.events.onInputOut.add(this.suspectOut,this),this.btnSuspect2=this.add.sprite(630,0,r.generateTexture()),this.btnSuspect2.alpha=0,this.btnSuspect2.inputEnabled=!0,this.btnSuspect2.id=1,this.btnSuspect2.events.onInputDown.add(this.selectSuspect,this),this.btnSuspect2.events.onInputOver.add(this.suspectOver,this),this.btnSuspect2.events.onInputOut.add(this.suspectOut,this),this.btnSuspect3=this.add.sprite(740,0,r.generateTexture()),this.btnSuspect3.alpha=0,this.btnSuspect3.inputEnabled=!0,this.btnSuspect3.id=2,this.btnSuspect3.events.onInputDown.add(this.selectSuspect,this),this.btnSuspect3.events.onInputOver.add(this.suspectOver,this),this.btnSuspect3.events.onInputOut.add(this.suspectOut,this),r.destroy(),this.fails=0,this.over=this.add.image(507,400,"UIText","sospech_over"),this.signOk=this.add.image(507,400,"UIText","sospech_ok"),this.signNo1=this.add.image(507,400,"UIText","sospech_no"),this.signNo2=this.add.image(507,400,"UIText","sospech_no"),this.over.visible=!1,this.signOk.visible=!1,this.signNo1.visible=!1,this.signNo2.visible=!1,this.Bonusx3=this.add.image(170,383,"UIText","bonus_x3"),this.Bonusx2=this.add.image(224,430,"UIText","bonus_x2"),this.Bonusx1=this.add.image(288,468,"UIText","bonus_x1"),this.BonusNo3=this.add.image(180,376,"UIText","sospech_bonus_no"),this.BonusNo2=this.add.image(230,424,"UIText","sospech_bonus_no"),this.BonusNo2.scale.set(.9),this.Bonusx2.alpha=0,this.Bonusx1.alpha=0,this.BonusNo3.alpha=0,this.BonusNo2.alpha=0;this.add.image(0,0,"UIText","sospech_sombra");this.transitionScreen.openDoors(!1)}},{key:"suspectOver",value:function(e){this.over.position.set(e.x,400),this.over.visible=!0}},{key:"suspectOut",value:function(){this.over.visible=!1}},{key:"selectSuspect",value:function(e){if(e.id==u.default.level.guiltySuspect){this.game.add.audio("voiceExcited",u.default.main.voicesVolume).play(),u.default.level.endScoreBonus-=this.fails,u.default.level.finalScore=u.default.level.allLevelsScores[0]+u.default.level.allLevelsScores[1]+u.default.level.allLevelsScores[2],u.default.level.finalScore*=u.default.level.endScoreBonus;var t=u.default.level.savedHiScore,a=u.default.level.finalScore;a>t&&(localStorage.setItem("ScooHidden_hiScore",JSON.stringify(a)),u.default.level.savedHiScore=a),this.btnSuspect1.kill(),this.btnSuspect2.kill(),this.btnSuspect3.kill(),this.signOk.position.set(e.x,400),this.signOk.visible=!0,u.default.main.soundFx.play("win");var i=this.game.time.create(!0);i.add(1e3,function(){this.transitionScreen.gotoNextState("EndCinematicState")},this),i.start()}else this.game.add.audio("voiceEvenMore",u.default.main.voicesVolume).play(),0==this.fails?(this.signNo1.position.set(e.x,400),this.signNo1.visible=!0,this.fails++,this.game.add.tween(this.Bonusx2).to({alpha:1},250,Phaser.Easing.Linear.In,!0),this.game.add.tween(this.BonusNo3).to({alpha:1},250,Phaser.Easing.Linear.In,!0)):(this.signNo2.position.set(e.x,400),this.signNo2.visible=!0,this.fails++,this.game.add.tween(this.Bonusx1).to({alpha:1},250,Phaser.Easing.Linear.In,!0),this.game.add.tween(this.BonusNo2).to({alpha:1},250,Phaser.Easing.Linear.In,!0)),u.default.main.soundFx.play("wrong"),e.kill()}},{key:"btnHomeClick",value:function(){this.state.start("MainMenu")}},{key:"update",value:function(){}}]),t}(Phaser.State);a.default=f},{"../gameOptions":7,"../ui/AudioButtonInGame":20,"../ui/TransitionScreen":26}],15:[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),l=e("../gameOptions"),u=i(l),h=e("../gameElements/RegularGameGroup"),d=i(h),c=e("../gameElements/BonusGameGroup"),f=i(c),p=e("../gameElements/BonusIntroGroup"),m=i(p),g=e("../ui/InGameHud"),b=i(g),v=e("../ui/TransitionScreen"),y=i(v),_=function(e){function t(){return n(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),r(t,[{key:"preload",value:function(){this.transitionScreen=new y.default(this.game),this.add.existing(this.transitionScreen);var e=u.default.level.room_selected,t="room_1";switch(e){case 0:t="room_1";break;case 1:t="room_2",this.load.image("glassFilterImg","assets/images/glassFilter.jpg");break;case 2:t="room_3",this.load.atlasJSONHash("scannerBackAnimText","assets/textures/scannerBackAnim.jpg","assets/textures/scannerBackAnim.json")}this.load.atlasJSONHash("roomText","assets/rooms/"+t+"_text.png","assets/rooms/"+t+"_text.json"),this.load.json("roomJson","assets/rooms/"+t+".json"),this.load.atlasJSONHash("roomAnimsText","assets/rooms/animationsRoom.png","assets/rooms/animationsRoom.json"),this.load.atlasJSONHash("monsterText","assets/textures/monster.png","assets/textures/monster.json")}},{key:"create",value:function(){u.default.main.playstate=this,this.game.stage.backgroundColor="#000000",u.default.level.levelScore=0,this.filtersGroup=this.game.add.group(),this.gadgetsGroup=this.game.add.group(),this.regularGame=new d.default(this.game,this),this.add.existing(this.regularGame),this.BonusIntro=new m.default(this.game,this),this.add.existing(this.BonusIntro),this.HUD=new b.default(this.game,this),this.add.existing(this.HUD),this.transitionScreen.openDoors(!0),"Debug"==indexInfo.buildState&&(this.game.time.advancedTiming=!0,this.txtFPS=this.add.bitmapText(15,this.game.height-20,"gameFont","0",18),this.txtFPS.fixedToCamera=!0,this.txtFPS.visible=!0,this.txtFPS.anchor.set(0))}},{key:"startBonusIntro",value:function(){u.default.level.currentFlow=u.default.level.FLOW_INGAMEDIALOG,this.BonusIntro.startSequence()}},{key:"startIntroState",value:function(){if(u.default.level.currentFlow=u.default.level.FLOW_INTRO,u.default.main.playingMusic=u.default.main.music.play("MusGameplay"),u.default.gameType.selected==u.default.gameType.BONUS)this.bonusGame=new f.default(this.game,this),this.bonusGame.setupBonusGame(),this.add.existing(this.bonusGame),this.HUD.startIntroAnimation(),u.default.main.music.stop(),u.default.main.playingMusic=u.default.main.music.play("chase_music_02");else{var e=this.game.time.create(!0);e.add(500,function(){this.HUD.startIntroAnimation()},this),e.start(),this.game.add.audio("voiceSolved",u.default.main.voicesVolume).play()}}},{key:"startPlayingState",value:function(){switch(u.default.level.currentFlow=u.default.level.FLOW_PLAYING,u.default.gameType.selected){case u.default.gameType.REGULAR:this.regularGame.showCluesOnHudIntro(),this.regularGame.timerMonster.start(),0==u.default.level.roomsWon&&this.regularGame.showTutorialHint();break;case u.default.gameType.BONUS:this.bonusGame.startPlayingState(),0==u.default.level.roomsWon&&this.bonusGame.showTutorialHint()}}},{key:"startWinState",value:function(){if(u.default.level.currentFlow!=u.default.level.FLOW_WINLEVEL){u.default.level.currentFlow=u.default.level.FLOW_WINLEVEL,u.default.gameType.selected==u.default.gameType.BONUS&&this.bonusGame.disableBonus();var e=this.game.time.create(!0);e.add(1e3,function(){u.default.gameType.selected==u.default.gameType.BONUS?this.bonusGame.killBonus():u.default.main.soundFx.play("win"),this.nextGameStep()},this),e.start()}}},{key:"nextGameStep",value:function(){u.default.gameType.selected==u.default.gameType.REGULAR?(u.default.level.levelTimeLeft=Math.floor(u.default.level.globalTimeScoreBarMS/1e3),u.default.gameType.selected=u.default.gameType.BONUS,this.startBonusIntro()):this.HUD.showOutroPanel()}},{key:"endRoom",value:function(){u.default.level.roomsWon+=1,this.saveScores(),this.gotoNextRoom()}},{key:"gotoNextRoom",value:function(){u.default.level.roomsWon>=3?(u.default.main.music.stop(),this.transitionScreen.gotoNextState("JigsawState")):(u.default.level.room_selected=u.default.level.roomOrder[u.default.level.roomsWon],u.default.gameType.selected=u.default.gameType.REGULAR,
u.default.regularGame.cluesToFind+=u.default.regularGame.cluesToFindExtraDifficulty,u.default.regularGame.time+=u.default.regularGame.extraDifficultyTime,this.transitionScreen.restartRoom())}},{key:"saveScores",value:function(){var e=u.default.level.room_selected,t=u.default.level.levelScore+u.default.level.levelTimeLeft*u.default.level.timeScoreMultiplier;u.default.level.allLevelsScores[e]=t,u.default.level.allLevelsStars[e]=u.default.level.levelStars,console.log("save score "+t)}},{key:"restartRoom",value:function(){u.default.gameType.selected=u.default.gameType.REGULAR,this.transitionScreen.restartRoom()}},{key:"update",value:function(){"Debug"==indexInfo.buildState&&(this.txtFPS.text=u.default.main.version+" FPS: "+this.game.time.fps)}},{key:"render",value:function(){}},{key:"renderGroup",value:function(e){this.game.debug.body(e)}}]),t}(Phaser.State);a.default=_},{"../gameElements/BonusGameGroup":2,"../gameElements/BonusIntroGroup":3,"../gameElements/RegularGameGroup":6,"../gameOptions":7,"../ui/InGameHud":23,"../ui/TransitionScreen":26}],16:[function(e,t,a){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),r=e("../gameOptions"),l=function(e){return e&&e.__esModule?e:{default:e}}(r),u=function(e){function t(){return i(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),o(t,[{key:"preload",value:function(){this.boomeranLogo=this.add.sprite(this.game.world.centerX-200,-45,"preloaderText","loader_animation0001"),this.boomeranLogo.animations.add("idleLoop",Phaser.Animation.generateFrameNames("loader_animation",1,10,"",4),15,!1),this.boomeranLogo.animations.play("idleLoop"),this.background=this.add.image(this.game.world.centerX-246,this.game.world.centerY+150,"preloaderText","preloader_bg"),this.preloadBar=this.add.sprite(this.game.world.centerX-246,this.game.world.centerY+150,"preloaderText","preloader_overlay"),this.load.setPreloadSprite(this.background),this.load.bitmapFont("gameFont","assets/font/font3.png","assets/font/font3.xml"),this.load.bitmapFont("outroFont","assets/font/font_cursive.png","assets/font/font_cursive.xml"),this.load.atlasJSONHash("UIText","assets/textures/UI.png","assets/textures/UI.json"),this.load.atlasJSONHash("bonusIntroText","assets/textures/bonusIntro.png","assets/textures/bonusIntro.json"),this.load.atlasJSONHash("transitionText","assets/textures/LoadingDoor.png","assets/textures/LoadingDoor.json"),this.load.image("mainMenuBackImg","assets/images/BG_MAINMENU.jpg"),this.load.video("introVideo","assets/videos/INTRO_HD.mp4"),this.load.atlasJSONHash("jigsawText","assets/rooms/jigsawText.png","assets/rooms/jigsawText.json"),this.load.json("jigsawJson","assets/rooms/jigsaw.json"),this.load.audiosprite("audioMix",["assets/audio/soundFx.mp3","assets/audio/soundFx.m4a","assets/audio/soundFx.ac3","assets/audio/soundFx.ogg"],"assets/audio/soundFx.json"),this.load.audiosprite("audioMusic",["assets/audio/music.mp3","assets/audio/music.m4a","assets/audio/music.ac3","assets/audio/music.ogg"],"assets/audio/music.json"),this.load.audio("voiceEvenMore",["assets/audio/voices/voice_even_more.mp3","assets/audio/voices/voice_even_more.m4a","assets/audio/voices/voice_even_more.ac3","assets/audio/voices/voice_even_more.ogg"]),this.load.audio("voiceExcited",["assets/audio/voices/voice_excited.mp3","assets/audio/voices/voice_excited.m4a","assets/audio/voices/voice_excited.ac3","assets/audio/voices/voice_excited.ogg"]),this.load.audio("voiceMonsters",["assets/audio/voices/voice_monsters.mp3","assets/audio/voices/voice_monsters.m4a","assets/audio/voices/voice_monsters.ac3","assets/audio/voices/voice_monsters.ogg"]),this.load.audio("voiceMoreMysteries",["assets/audio/voices/voice_more_mysteries.mp3","assets/audio/voices/voice_more_mysteries.m4a","assets/audio/voices/voice_more_mysteries.ac3","assets/audio/voices/voice_more_mysteries.ogg"]),this.load.audio("voiceSnacks",["assets/audio/voices/voice_snacks.mp3","assets/audio/voices/voice_snacks.m4a","assets/audio/voices/voice_snacks.ac3","assets/audio/voices/voice_snacks.ogg"]),this.load.audio("voiceSolved",["assets/audio/voices/voice_solved.mp3","assets/audio/voices/voice_solved.m4a","assets/audio/voices/voice_solved.ac3","assets/audio/voices/voice_solved.ogg"])}},{key:"loadJigsawPositions",value:function(){for(var e=this.game.cache.getJSON("jigsawJson"),t=e.objects,a=0;a<t.length;a++){var i=[];i[0]=Math.abs(t[a].x),i[1]=Math.abs(t[a].y),l.default.jigsaw.PositionsOnBoard.push(i),4==a&&(a+=2)}}},{key:"create",value:function(){l.default.main.soundFx=this.add.audioSprite("audioMix"),l.default.main.soundFx.allowMultiple=!0,l.default.main.music=this.add.audioSprite("audioMusic"),l.default.main.music.allowMultiple=!0,this.game.sound.mute=JSON.parse(localStorage.getItem("ScooHidden_muteState")),l.default.level.savedHiScore=JSON.parse(localStorage.getItem("ScooHidden_hiScore")),l.default.level.savedHiScore||(l.default.level.savedHiScore=0),this.loadJigsawPositions(),indexInfo.buildState,this.state.start("MainMenu")}}]),t}(Phaser.State);a.default=u},{"../gameOptions":7}],17:[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),l=e("../gameOptions"),u=i(l),h=e("../Utils"),d=i(h),c=e("../ui/TransitionScreen"),f=i(c),p=function(e){function t(){return n(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),r(t,[{key:"preload",value:function(){this.transitionScreen=new f.default(this.game),this.add.existing(this.transitionScreen),this.load.image("sumaryBackImg","assets/images/SUMARY_SCORE_BG.jpg")}},{key:"create",value:function(){this.add.image(0,0,"sumaryBackImg");this.add.button(880,460,"UIText",this.btnHomeClick,this,"UI_BUTTON_RESUME_OVERLAY","UI_BUTTON_RESUME_NORMAL","UI_BUTTON_RESUME_PRESSED","UI_BUTTON_RESUME_NORMAL").input.useHandCursor=!1;for(var e=u.default.level.allLevelsScores,t=u.default.level.allLevelsStars,a=[[92,198,-12],[314,180,-4.8],[536,192,0]],i=[],n=[[0,8,"UI_INGAME_OUTRO_STAR_A"],[34,0,"UI_INGAME_OUTRO_STAR_b"],[68,8,"UI_INGAME_OUTRO_STAR_C"]],s=0;s<3;s++){var o=this.add.group();i.push(o);for(var r=0;r<3;r++)if(t[s][r]){var l=this.add.image(n[r][0],n[r][1],"UIText",n[r][2]);l.scale.set(.34),o.add(l)}var h=this.add.bitmapText(70,40,"outroFont",d.default.addCeros(e[s],6),18);h.anchor.set(.5,0),h.align="center",h.tint=3429547,o.add(h),o.position.set(a[s][0],a[s][1]),o.angle=a[s][2]}for(var c=this.add.group(),f=new Phaser.Point(133,480),p=u.default.jigsaw.PositionsOnBoard,m=Math.min(9,u.default.level.allPhotosFound),s=0;s<m;s++){var g="Jigsaw_0"+(s+1);if(4==s)switch(u.default.level.guiltySuspect){case 0:g+="_A";break;case 1:g+="_B";break;case 2:g+="_C"}var b=new Phaser.Image(this.game,p[s][0]+f.x,p[s][1]+f.y,"jigsawText",g);b.anchor.set(.5),c.add(b)}c.scale.set(.64),c.angle=-8;this.add.image(170,283,"UIText","PIN");this.piecesTxt=this.add.bitmapText(380,430,"outroFont",""+m,50),this.piecesTxt.anchor.set(.5,0),this.piecesTxt.align="center",this.piecesTxt.tint=3429547;var g="CULPABLE";switch(u.default.level.guiltySuspect){case 0:g+="_A";break;case 1:g+="_B";break;case 2:g+="_C"}this.add.image(710,24,"UIText",g);this.bonusTxt=this.add.bitmapText(687,312,"outroFont",""+u.default.level.endScoreBonus,50),this.bonusTxt.anchor.set(.5,0),this.bonusTxt.align="center",this.bonusTxt.tint=13840433,this.finalScoreTxt=this.add.bitmapText(745,394,"outroFont",""+d.default.addCeros(u.default.level.finalScore,6),55),this.finalScoreTxt.anchor.set(.5,0),this.finalScoreTxt.align="center",this.finalScoreTxt.tint=3492730,this.hiScoreTxt=this.add.bitmapText(745,466,"outroFont",""+d.default.addCeros(u.default.level.savedHiScore,6),55),this.hiScoreTxt.anchor.set(.5,0),this.hiScoreTxt.align="center",this.hiScoreTxt.tint=3492730,this.transitionScreen.openDoors(!1)}},{key:"btnHomeClick",value:function(){u.default.main.playingMusic.fadeOut(2e3),this.game.camera.onFadeComplete.add(function(){this.game.state.start("MainMenu")},this),this.game.camera.fade(0,2e3)}},{key:"update",value:function(){}}]),t}(Phaser.State);a.default=p},{"../Utils":1,"../gameOptions":7,"../ui/TransitionScreen":26}],18:[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),l=e("../gameOptions"),u=(i(l),e("../ui/OutroPanel")),h=(i(u),e("../ui/TutorialPanel")),d=(i(h),e("../ui/TutorialPanelBonus")),c=i(d),f=function(e){function t(){return n(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),r(t,[{key:"create",value:function(){this.screenName=this.add.bitmapText(this.game.world.centerX,50,"gameFont","Test Outro",32),this.screenName.align="center",this.screenName.anchor.set(.5),this.grpHelpPanel=new c.default(this.game),this.grpHelpPanel.visible=!0,this.add.existing(this.grpHelpPanel)}},{key:"update",value:function(){}}]),t}(Phaser.State);a.default=f},{"../gameOptions":7,"../ui/OutroPanel":24,"../ui/TutorialPanel":27,"../ui/TutorialPanelBonus":28}],19:[function(e,t,a){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),r=e("../gameOptions"),l=function(e){return e&&e.__esModule?e:{default:e}}(r),u=function(e){function t(e,a,s){i(this,t);var o=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.btnAudioOn=new Phaser.Button(e,a,s,"UIText",o.btnAudioOnClick,o,"UI_INGAME_SOUND_ON_OVERLAY","UI_INGAME_SOUND_ON_NORMAL","UI_INGAME_SOUND_ON_PRESSED","UI_INGAME_SOUND_ON_NORMAL"),o.btnAudioOn.input.useHandCursor=!1,o.add(o.btnAudioOn),o.btnAudioOff=new Phaser.Button(e,a,s,"UIText",o.btnAudioOnClick,o,"UI_INGAME_SOUND_OFF_OVERLAY","UI_INGAME_SOUND_OFF_NORMAL","UI_INGAME_SOUND_OFF_PRESSED","UI_INGAME_SOUND_OFF_NORMAL"),o.btnAudioOff.input.useHandCursor=!1,o.add(o.btnAudioOff),o.game.sound.mute?(o.btnAudioOn.visible=!1,o.btnAudioOff.visible=!0):(o.btnAudioOn.visible=!0,o.btnAudioOff.visible=!1),o}return s(t,e),o(t,[{key:"btnAudioOnClick",value:function(){this.game.sound.mute=!this.game.sound.mute,l.default.main.soundFx.play("boton"),localStorage.setItem("ScooHidden_muteState",JSON.stringify(this.game.sound.mute)),this.game.sound.mute?(this.btnAudioOn.visible=!1,this.btnAudioOff.visible=!0):(this.btnAudioOn.visible=!0,this.btnAudioOff.visible=!1)}}]),t}(Phaser.Group);a.default=u},{"../gameOptions":7}],20:[function(e,t,a){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),r=e("../gameOptions"),l=function(e){return e&&e.__esModule?e:{default:e}}(r),u=function(e){function t(e,a,s){i(this,t);var o=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.btnAudioOn=new Phaser.Button(e,a,s,"UIText",o.btnAudioOnClick,o,"UI_INGAME_SOUND_ON_OVERLAY","UI_INGAME_SOUND_ON_NORMAL","UI_INGAME_SOUND_ON_PRESSED","UI_INGAME_SOUND_ON_NORMAL"),o.btnAudioOn.input.useHandCursor=!1,o.add(o.btnAudioOn),o.btnAudioOff=new Phaser.Button(e,a,s,"UIText",o.btnAudioOnClick,o,"UI_INGAME_SOUND_OFF_OVERLAY","UI_INGAME_SOUND_OFF_NORMAL","UI_INGAME_SOUND_OFF_PRESSED","UI_INGAME_SOUND_OFF_NORMAL"),o.btnAudioOff.input.useHandCursor=!1,o.add(o.btnAudioOff),o.game.sound.mute?(o.btnAudioOn.visible=!1,o.btnAudioOff.visible=!0):(o.btnAudioOn.visible=!0,o.btnAudioOff.visible=!1),o}return s(t,e),o(t,[{key:"btnAudioOnClick",value:function(){this.game.sound.mute=!this.game.sound.mute,l.default.main.soundFx.play("boton"),localStorage.setItem("ScooHidden_muteState",JSON.stringify(this.game.sound.mute)),this.game.sound.mute?(this.btnAudioOn.visible=!1,this.btnAudioOff.visible=!0):(this.btnAudioOn.visible=!0,this.btnAudioOff.visible=!1)}}]),t}(Phaser.Group);a.default=u},{"../gameOptions":7}],21:[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),l=e("../gameOptions"),u=i(l),h=e("../Utils"),d=i(h),c=function(e){function t(e){n(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),i=new Phaser.Point(20,12);a.timeEnd=!1,a.timeBarEmpty=new Phaser.Image(a.game,i.x,i.y,"UIText","UI_INGAME_CLOCKBAR_BG"),a.add(a.timeBarEmpty),a.timeBarBlank=new Phaser.Image(a.game,a.timeBarEmpty.x+58,a.timeBarEmpty.y+11,"UIText","UI_INGAME_CLOCKBAR_FILL_blank"),a.add(a.timeBarBlank),a.timeBarBlankRect=new Phaser.Rectangle(0,0,a.timeBarBlank.width,a.timeBarBlank.height),a.timeBarBlank.crop(a.timeBarBlankRect),a.timeBar=new Phaser.Image(a.game,a.timeBarEmpty.x+58,a.timeBarEmpty.y+11,"UIText","UI_INGAME_CLOCKBAR_FILL"),a.add(a.timeBar),a.timeBarRect=new Phaser.Rectangle(0,0,a.timeBar.width,a.timeBar.height),a.timeBarInitWidth=a.timeBarRect.width,a.timeBar.crop(a.timeBarRect);var o=new Phaser.Image(a.game,i.x,i.y,"UIText","UI_INGAME_CLOCKBAR_FRAME");return a.add(o),a.timeTxt=new Phaser.BitmapText(a.game,i.x+50,i.y+37,"gameFont","00",20),a.timeTxt.anchor.set(.5,0),a.timeTxt.align="center",a.add(a.timeTxt),a.starsPos=[],a.starsPos.push(.15*a.timeBarInitWidth),a.starsPos.push(.4*a.timeBarInitWidth),a.starsPos.push(.7*a.timeBarInitWidth),a.starPosY=a.timeBar.y-16,a.starOff01=new Phaser.Image(a.game,a.timeBar.x+a.starsPos[2],a.starPosY,"UIText","UI_INGAME_CLOCKBAR_STAROFF"),a.add(a.starOff01),a.starOff02=new Phaser.Image(a.game,a.timeBar.x+a.starsPos[1],a.starPosY,"UIText","UI_INGAME_CLOCKBAR_STAROFF"),a.add(a.starOff02),a.starOff03=new Phaser.Image(a.game,a.timeBar.x+a.starsPos[0],a.starPosY,"UIText","UI_INGAME_CLOCKBAR_STAROFF"),a.add(a.starOff03),a.starOff01.anchor.set(.5,0),a.starOff02.anchor.set(.5,0),a.starOff03.anchor.set(.5,0),a.starOn01=new Phaser.Image(a.game,a.timeBar.x+a.starsPos[2],a.starPosY,"UIText","UI_INGAME_CLOCKBAR_STARON"),a.add(a.starOn01),a.starOn02=new Phaser.Image(a.game,a.timeBar.x+a.starsPos[1],a.starPosY,"UIText","UI_INGAME_CLOCKBAR_STARON"),a.add(a.starOn02),a.starOn03=new Phaser.Image(a.game,a.timeBar.x+a.starsPos[0],a.starPosY,"UIText","UI_INGAME_CLOCKBAR_STARON"),a.add(a.starOn03),a.starOn01.anchor.set(.5,0),a.starOn02.anchor.set(.5,0),a.starOn03.anchor.set(.5,0),u.default.level.globalTimeScoreBarMS=1e6,a.timeScoreBarInitMS=1e5,u.default.level.levelStars=[!0,!0,!0],a}return o(t,e),r(t,[{key:"startTimeBar",value:function(){switch(this.timeEnd=!1,u.default.gameType.selected){case u.default.gameType.REGULAR:u.default.level.globalTimeScoreBarMS=1e3*u.default.regularGame.time,this.starOn01.visible=!0,this.starOn02.visible=!0,this.starOn03.visible=!0;break;case u.default.gameType.BONUS:u.default.level.globalTimeScoreBarMS=1e3*u.default.bonus.time,this.starOff01.kill(),this.starOff02.kill(),this.starOff03.kill(),this.starOn01.kill(),this.starOn02.kill(),this.starOn03.kill()}this.timeScoreBarInitMS=u.default.level.globalTimeScoreBarMS,this.timeTxt.text=d.default.addCeros(Math.floor(u.default.level.globalTimeScoreBarMS/1e3),2)}},{key:"update",value:function(){u.default.main.gamePaused||u.default.level.currentFlow==u.default.level.FLOW_PLAYING&&(u.default.level.globalTimeScoreBarMS=Math.min(this.timeScoreBarInitMS,u.default.level.globalTimeScoreBarMS),u.default.level.globalTimeScoreBarMS>0?u.default.regularGame.timeFreezeForTutorial||(u.default.level.globalTimeScoreBarMS-=this.game.time.elapsedMS):this.timeEnd||(this.timeEnd=!0,u.default.gameType.selected==u.default.gameType.REGULAR?u.default.main.soundFx.play("time_out"):u.default.main.playstate.HUD.showTimeOutSign(),u.default.gameType.selected!=u.default.gameType.REGULAR&&u.default.main.playstate.startWinState()),this.updateBar())}},{key:"updateBar",value:function(){u.default.level.globalTimeScoreBarMS<0&&(u.default.level.globalTimeScoreBarMS=0),this.timeTxt.text=d.default.addCeros(Math.max(0,Math.ceil(u.default.level.globalTimeScoreBarMS/1e3)),2),this.timeBarRect.width=u.default.level.globalTimeScoreBarMS*(this.timeBarInitWidth/this.timeScoreBarInitMS),this.timeBar.updateCrop(),this.timeBarBlankRect.width>this.timeBarRect.width&&(this.timeBarBlankRect.width-=.025*this.game.time.elapsedMS),this.timeBarBlank.updateCrop(),u.default.gameType.selected==u.default.gameType.REGULAR&&(this.updateStar(this.starOn01,2),this.updateStar(this.starOn02,1),this.updateStar(this.starOn03,0))}},{key:"updateStar",value:function(e,t){e.visible?this.timeBarRect.width<this.starsPos[t]&&(e.visible=!1,u.default.main.soundFx.play("star_off",.25),u.default.level.levelStars[t]=!1):this.timeBarRect.width>this.starsPos[t]&&(e.visible=!0,u.default.main.soundFx.play("star_off",.25),u.default.level.levelStars[t]=!0)}}]),t}(Phaser.Group);a.default=c},{"../Utils":1,"../gameOptions":7}],22:[function(e,t,a){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),r=e("../gameOptions"),l=function(e){return e&&e.__esModule?e:{default:e}}(r),u=function(e){function t(e){i(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.back=new Phaser.TileSprite(e,0,0,a.game.width,a.game.height,"UIText","color16x16"),a.add(a.back),a.back.inputEnabled=!0,a.back.events.onInputDown.add(a.showHidePanel,a),a.panelTutorial=new Phaser.Sprite(e,480,300,"UIText","credits"),a.panelTutorial.anchor.set(.5),a.add(a.panelTutorial),a.visible=!1,a}return s(t,e),o(t,[{key:"showHidePanel",value:function(){l.default.main.soundFx.play("cuaderno"),this.visible=!this.visible}}]),t}(Phaser.Group);a.default=u},{"../gameOptions":7}],23:[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),l=function e(t,a,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,a,i)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(i)},u=e("../gameOptions"),h=i(u),d=e("../Utils"),c=i(d),f=e("../ui/PausePanel"),p=i(f),m=e("../ui/BarTimeHud"),g=i(m),b=e("../ui/OutroPanel"),v=i(b),y=function(e){function t(e,a){n(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));i.playstate=a,i.fixedToCamera=!0,i.btnPause=new Phaser.Button(i.game,875,17,"UIText",i.openPause,i,"ButtonPause_Overlay","ButtonPause_normal","ButtonPause_Pressed","ButtonPause_normal"),i.btnPause.input.useHandCursor=!1,i.add(i.btnPause),i.pauseButton=i.game.input.keyboard.addKey(Phaser.Keyboard.ESC),i.pauseButton.onDown.add(i.openPause,i),i.game.input.keyboard.addKeyCapture([Phaser.Keyboard.ESC]),i.outroScreen=new v.default(i.game,i),i.outroScreen.visible=!1,i.outroScreen.pivot.set(480,270),i.outroScreen.position.set(480,270),i.add(i.outroScreen),i.timeBar=new g.default(i.game,i.outroScreen),i.add(i.timeBar),i.scoreGrp=new Phaser.Group(i.game),i.add(i.scoreGrp);var o=new Phaser.BitmapText(i.game,480,14,"gameFont","SCORE",18);i.scoreGrp.add(o),i.scoreTxt=new Phaser.BitmapText(i.game,510,30,"gameFont",c.default.addCeros(h.default.level.levelScore,6),32),i.scoreTxt.anchor.set(.5,0),i.scoreTxt.align="center",i.scoreGrp.add(i.scoreTxt),i.timeComboObjectFound=0,i.groupPause=new p.default(i.game,i),i.add(i.groupPause),i.counterIcon=new Phaser.Sprite(i.game,17,436,"UIText","counter"),i.scoreGrp.add(i.counterIcon),i.totalMissingObjectsTxt=new Phaser.BitmapText(i.game,78,480,"gameFont","00",20),i.totalMissingObjectsTxt.anchor.set(.5,0),i.totalMissingObjectsTxt.align="center",i.scoreGrp.add(i.totalMissingObjectsTxt),i.missingObjectsCounterTxt=new Phaser.BitmapText(i.game,45,463,"gameFont","00",20),i.missingObjectsCounterTxt.anchor.set(.5,0),i.missingObjectsCounterTxt.align="center",i.scoreGrp.add(i.missingObjectsCounterTxt),i.showHud=!1;var r=new Phaser.Graphics(i.game,0,0);r.beginFill(0,1),r.drawRect(0,0,i.game.width,i.game.height),r.endFill(),i.fadeFilter=new Phaser.Sprite(i.game,0,0,r.generateTexture()),i.add(i.fadeFilter),r.destroy(),i.title=new Phaser.Image(i.game,480,270,"bonusIntroText","text_lets"),i.title.anchor.set(.5),i.title.alpha=0,i.add(i.title),i.timeOutSign=new Phaser.Image(i.game,480,270,"bonusIntroText","text_time"),i.timeOutSign.anchor.set(.5),i.timeOutSign.alpha=0,i.add(i.timeOutSign),i.fadeIntroTween=i.game.add.tween(i.fadeFilter),i.fadeIntroTween.to({alpha:.8},250,Phaser.Easing.Linear.In,!0,500);var l=h.default.main.playstate;return l.regularGame.scale.set(.85),l.regularGame.pivot.set(480,270),l.regularGame.position.set(480,270),i.game.add.tween(l.regularGame.scale).to({x:1,y:1},500,Phaser.Easing.Cubic.Out,!0,500),i.btnPause.alpha=0,i.timeBar.alpha=0,i.scoreGrp.alpha=0,i}return o(t,e),r(t,[{key:"startIntroAnimation",value:function(){switch(this.game.world.bringToTop(this),h.default.gameType.selected){case h.default.gameType.REGULAR:this.counterIcon.frameName="counter";break;case h.default.gameType.BONUS:this.counterIcon.frameName="counter_bonus"}var e=0,t=0;if(h.default.gameType.selected==h.default.gameType.REGULAR){e=500,t=1e3;var a=this.game.add.tween(this.title).to({alpha:0},e,Phaser.Easing.Linear.In,!1,500);this.game.add.tween(this.title).to({alpha:1},500,Phaser.Easing.Linear.In,!0,0).onComplete.add(function(){a.start()},this)}else e=500,this.fadeFilter.alpha=1;if(this.game.add.tween(this.fadeFilter).to({alpha:0},e,Phaser.Easing.Linear.Out,!0,t).onComplete.add(function(){h.default.main.playstate.startPlayingState()},this),this.timeBar.startTimeBar(),this.missingObjectsCounterTxt.text="00",h.default.gameType.selected==h.default.gameType.REGULAR?this.totalMissingObjectsTxt.text=c.default.addCeros(h.default.regularGame.cluesToFind,2):this.totalMissingObjectsTxt.text=c.default.addCeros(h.default.bonus.cluesToFind,2),h.default.gameType.selected==h.default.gameType.REGULAR)this.showHud=!0;else{this.showHud=!1;var i=this.game.time.create(!0);i.add(2e3,function(){this.showHud=!0},this),i.start()}}},{key:"showOutroPanel",value:function(){this.timeOutSign.alpha=0,h.default.main.music.stop(),h.default.main.soundFx.play("cuaderno"),this.game.world.bringToTop(this.outroScreen),this.outroScreen.initPanel(),this.outroScreen.visible=!0,this.outroScreen.scale.set(0),this.outroScreenTween=this.game.add.tween(this.outroScreen.scale),this.outroScreenTween.to({x:1,y:1},500,Phaser.Easing.Back.Out,!0,0).onComplete.add(function(){this.outroScreen.startPanelAnimations()},this)}},{key:"showTimeOutSign",value:function(){this.timeOutSign.alpha=1,this.timeOutSignTween=this.game.add.tween(this.timeOutSign).from({y:-100},1e3,Phaser.Easing.Bounce.Out,!1),this.timeOutSignTween.start(),h.default.main.soundFx.play("time_out_alarm_simple")}},{key:"openPause",value:function(){h.default.main.gamePaused||h.default.level.currentFlow!=h.default.level.FLOW_PLAYING||(h.default.main.soundFx.play("boton"),h.default.main.gamePaused=!0,this.showPauseMenu())}},{key:"showPauseMenu",value:function(){this.groupPause.visible=!0,this.groupPause.pauseStart()}},{key:"update",value:function(){h.default.main.gamePaused||h.default.level.currentFlow==h.default.level.FLOW_INTRO||h.default.level.currentFlow==h.default.level.FLOW_INGAMEDIALOG||h.default.level.currentFlow==h.default.level.FLOW_WINLEVEL?this.btnPause.alpha>.5?(this.game.add.tween(this.btnPause).to({alpha:0},150,Phaser.Easing.Linear.Out,!0),this.game.add.tween(this.timeBar).to({alpha:0},150,Phaser.Easing.Linear.Out,!0),this.game.add.tween(this.scoreGrp).to({alpha:0},150,Phaser.Easing.Linear.Out,!0)):(this.btnPause.visible=!1,this.timeBar.visible=!1,this.scoreGrp.visible=!1):this.showHud&&(this.btnPause.visible||(this.btnPause.alpha=0,this.timeBar.alpha=0,this.scoreGrp.alpha=0,this.game.add.tween(this.btnPause).to({alpha:1},150,Phaser.Easing.Linear.Out,!0),this.game.add.tween(this.timeBar).to({alpha:1},150,Phaser.Easing.Linear.Out,!0),this.game.add.tween(this.scoreGrp).to({alpha:1},150,Phaser.Easing.Linear.Out,!0)),this.btnPause.visible=!0,this.timeBar.visible=!0,this.scoreGrp.visible=!0),h.default.main.gamePaused||(l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this),h.default.level.currentFlow==h.default.level.FLOW_PLAYING&&(this.timeComboObjectFound-=this.game.time.elapsedMS))}},{key:"addObjectFoundScore",value:function(e){var t=h.default.regularGame.minScoreObjectFound;this.timeComboObjectFound>0&&(t=h.default.regularGame.maxScoreObjectFound,h.default.gameType.selected==h.default.gameType.REGULAR&&(h.default.level.globalTimeScoreBarMS+=h.default.regularGame.comboTimeReward)),this.timeComboObjectFound=h.default.regularGame.timeComboObjectFoundMax,h.default.level.levelScore+=t,this.scoreTxt.text=c.default.addCeros(h.default.level.levelScore,6),this.missingObjectsCounterTxt.text=c.default.addCeros(e,2)}}]),t}(Phaser.Group);a.default=y},{"../Utils":1,"../gameOptions":7,"../ui/BarTimeHud":21,"../ui/OutroPanel":24,"../ui/PausePanel":25}],24:[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),l=e("../gameOptions"),u=i(l),h=e("../Utils"),d=i(h),c=function(e){function t(e,a){n(this,t)
;var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));i.mainHud=a;var o=new Phaser.Image(e,480,0,"UIText","UI_INGAME_OUTRO_PANEL");return o.anchor.set(.5,0),i.add(o),i.timeTxt=new Phaser.BitmapText(i.game,420,190,"outroFont","65",38),i.timeTxt.anchor.set(.5,0),i.timeTxt.align="center",i.timeTxt.tint=4281619627,i.add(i.timeTxt),i.levelScoreTxt=new Phaser.BitmapText(i.game,540,190,"outroFont","99990",38),i.levelScoreTxt.anchor.set(.5,0),i.levelScoreTxt.align="center",i.levelScoreTxt.tint=4281619627,i.add(i.levelScoreTxt),i.totalScoreTxt=new Phaser.BitmapText(i.game,485,345,"outroFont","99990",60),i.totalScoreTxt.anchor.set(.5,0),i.totalScoreTxt.align="center",i.totalScoreTxt.tint=4290458421,i.add(i.totalScoreTxt),i.starOn01=new Phaser.Image(i.game,397,140,"UIText","UI_INGAME_OUTRO_STAR_A"),i.starOn01.anchor.set(.5),i.add(i.starOn01),i.starOn02=new Phaser.Image(i.game,475,110,"UIText","UI_INGAME_OUTRO_STAR_b"),i.starOn02.anchor.set(.5),i.add(i.starOn02),i.starOn03=new Phaser.Image(i.game,553,140,"UIText","UI_INGAME_OUTRO_STAR_C"),i.starOn03.anchor.set(.5),i.add(i.starOn03),i.tweenStar01Scale=i.game.add.tween(i.starOn01.scale),i.tweenStar01Scale.to({x:1,y:1},500,Phaser.Easing.Bounce.Out,!1),i.tweenStar02Scale=i.game.add.tween(i.starOn02.scale),i.tweenStar02Scale.to({x:1,y:1},500,Phaser.Easing.Bounce.Out,!1),i.tweenStar03Scale=i.game.add.tween(i.starOn03.scale),i.tweenStar03Scale.to({x:1,y:1},500,Phaser.Easing.Bounce.Out,!1),i.photo01=new Phaser.Sprite(i.game,400,270,"UIText","UI_OUTRO_PHOTO_A"),i.photo01.anchor.set(.5),i.add(i.photo01),i.photo02=new Phaser.Sprite(i.game,480,270,"UIText","UI_OUTRO_PHOTO_B"),i.photo02.anchor.set(.5),i.add(i.photo02),i.photo03=new Phaser.Sprite(i.game,550,270,"UIText","UI_OUTRO_PHOTO_C"),i.photo03.anchor.set(.5),i.add(i.photo03),i.tweenPhoto01Scale=i.game.add.tween(i.photo01.scale),i.tweenPhoto01Scale.to({x:1,y:1},500,Phaser.Easing.Bounce.Out,!1),i.tweenPhoto02Scale=i.game.add.tween(i.photo02.scale),i.tweenPhoto02Scale.to({x:1,y:1},500,Phaser.Easing.Bounce.Out,!1),i.tweenPhoto03Scale=i.game.add.tween(i.photo03.scale),i.tweenPhoto03Scale.to({x:1,y:1},500,Phaser.Easing.Bounce.Out,!1),i.btnNext=new Phaser.Button(i.game,485,408,"UIText",i.clickBtnNext,i,"UI_BUTTON_PLAY_OVERLAY","UI_BUTTON_PLAY_NORMAL","UI_BUTTON_PLAY_PRESSED","UI_BUTTON_PLAY_NORMAL"),i.btnNext.input.useHandCursor=!1,i.add(i.btnNext),i.tweenBtnNextAlpha=i.game.add.tween(i.btnNext),i.tweenBtnNextAlpha.to({alpha:1},250,Phaser.Easing.Linear.Out,!1),i.btnRestart=new Phaser.Button(i.game,385,408,"UIText",i.clickBtnRestart,i,"UI_BUTTON_RESTART_OVERLAY","UI_BUTTON_RESTART_NORMAL","UI_BUTTON_RESTART_PRESSED","UI_BUTTON_RESTART_NORMAL"),i.btnRestart.input.useHandCursor=!1,i.add(i.btnRestart),i.tweenBtnRestartAlpha=i.game.add.tween(i.btnRestart),i.tweenBtnRestartAlpha.to({alpha:1},250,Phaser.Easing.Linear.Out,!1),i}return o(t,e),r(t,[{key:"initPanel",value:function(){this.starOn01.scale.set(5),this.starOn01.visible=!1,this.starOn02.scale.set(5),this.starOn02.visible=!1,this.starOn03.scale.set(5),this.starOn03.visible=!1,this.photo01.scale.set(3),this.photo01.visible=!1,this.photo02.scale.set(3),this.photo02.visible=!1,this.photo03.scale.set(3),this.photo03.visible=!1,this.levelScore=u.default.level.levelScore,this.levelTime=u.default.level.levelTimeLeft,this.preTotal=u.default.level.allLevelsScores[0]+u.default.level.allLevelsScores[1]+u.default.level.allLevelsScores[2]}},{key:"startPanelAnimations",value:function(){u.default.main.soundFx.play("score"),this.tweenScore=this.game.add.tween(this),this.tweenScore.to({levelScore:0},1e3,Phaser.Easing.Linear.Out,!1,250),this.levelTime>0?(this.tweenTime=this.game.add.tween(this),this.tweenTime.to({levelTime:0},1e3,Phaser.Easing.Linear.Out,!0).onComplete.add(function(){this.tweenScore.start()},this)):this.tweenScore.start();var e=this.preTotal+this.levelTime*u.default.level.timeScoreMultiplier,t=e+this.levelScore;this.tweenAddTimetoScore=this.game.add.tween(this),this.tweenAddTimetoScore.to({preTotal:e},1e3,Phaser.Easing.Linear.Out,!0).onComplete.add(function(){this.tweenPretotal.start()},this),this.tweenPretotal=this.game.add.tween(this),this.tweenPretotal.to({preTotal:t},1e3,Phaser.Easing.Linear.Out,!1,250).onComplete.add(function(){this.showAllStars();var e=this.game.time.create(!0);e.add(1400,function(){this.showAllPhotos()},this),e.start()},this)}},{key:"showAllStars",value:function(){var e=u.default.level.levelStars;if(e[0]){var t=this.game.time.create(!0);t.add(100,function(){this.showStar01()},this),t.start()}if(e[1]){var a=this.game.time.create(!0);a.add(500,function(){this.showStar02()},this),a.start()}if(e[2]){var i=this.game.time.create(!0);i.add(900,function(){this.showStar03()},this),i.start()}}},{key:"showAllPhotos",value:function(){var e=u.default.level.photosFound;if(e>=1){var t=this.game.time.create(!0);t.add(100,function(){this.showPhoto01()},this),t.start()}if(e>=2){var a=this.game.time.create(!0);a.add(500,function(){this.showPhoto02()},this),a.start()}if(e>=3){var i=this.game.time.create(!0);i.add(900,function(){this.showPhoto03()},this),i.start()}}},{key:"showBtnNext",value:function(){this.btnNext.visible=!0,this.tweenBtnNextAlpha.start()}},{key:"showBtnRestart",value:function(){this.btnRestart.visible=!0,this.tweenBtnRestartAlpha.start()}},{key:"showPhoto01",value:function(){u.default.main.soundFx.play("star_1"),this.photo01.visible=!0,this.bringToTop(this.photo01),this.tweenPhoto01Scale.start()}},{key:"showPhoto02",value:function(){u.default.main.soundFx.play("star_2"),this.photo02.visible=!0,this.bringToTop(this.photo02),this.tweenPhoto02Scale.start()}},{key:"showPhoto03",value:function(){u.default.main.soundFx.play("star_3"),this.photo03.visible=!0,this.bringToTop(this.photo03),this.tweenPhoto03Scale.start()}},{key:"showStar01",value:function(){u.default.main.soundFx.play("star_1"),this.starOn01.visible=!0,this.bringToTop(this.starOn01),this.tweenStar01Scale.start()}},{key:"showStar02",value:function(){u.default.main.soundFx.play("star_2"),this.starOn02.visible=!0,this.bringToTop(this.starOn02),this.tweenStar02Scale.start()}},{key:"showStar03",value:function(){u.default.main.soundFx.play("star_3"),this.starOn03.visible=!0,this.bringToTop(this.starOn03),this.tweenStar03Scale.start()}},{key:"clickBtnNext",value:function(){u.default.main.soundFx.play("boton"),u.default.main.playstate.endRoom()}},{key:"clickBtnRestart",value:function(){u.default.main.soundFx.play("boton"),u.default.main.playstate.restartRoom()}},{key:"update",value:function(){this.timeTxt.text=d.default.addCeros(Math.floor(this.levelTime),2),this.levelScoreTxt.text=d.default.addCeros(Math.floor(this.levelScore),6),this.totalScoreTxt.text=d.default.addCeros(Math.floor(this.preTotal),6)}}]),t}(Phaser.Group);a.default=c},{"../Utils":1,"../gameOptions":7}],25:[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),l=e("../gameOptions"),u=i(l),h=e("./TutorialPanel"),d=i(h),c=e("./TutorialPanelBonus"),f=i(c),p=e("./AudioButtonInGame"),m=i(p),g=function(e){function t(e){n(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.back=new Phaser.TileSprite(e,0,0,a.game.width,a.game.height,"UIText","color16x16"),a.add(a.back),a.back.inputEnabled=!0,a.back.events.onInputDown.add(a.clickPauseClose,a),a.panelGroup=new Phaser.Group(a.game),a.add(a.panelGroup);var i=new Phaser.Sprite(e,341,134,"UIText","UI_INGAME_PAUSEPANEL");i.inputEnabled=!0,a.panelGroup.add(i);var o=new Phaser.Button(e,430,223,"UIText",a.clickPauseClose,a,"UI_BUTTON_BIG_RESUME_OVERLAY","UI_BUTTON_BIG_RESUME_NORMAL","UI_BUTTON_BIG_RESUME_PRESSED","UI_BUTTON_BIG_RESUME_NORMAL");o.input.useHandCursor=!1,a.panelGroup.add(o),a.pauseKey=a.game.input.keyboard.addKey(Phaser.Keyboard.ESC),a.pauseKey.onDown.add(a.clickPauseClose,a),a.allowClose=!1,a.timerCloseAllow=e.time.create(!1),a.audioBtn=new m.default(a.game,534,260),a.panelGroup.add(a.audioBtn);var r=new Phaser.Button(e,354,260,"UIText",a.btnClickHelp,a,"UI_INGAME_HELP_OVERLAY","UI_INGAME_HELP_NORMAL","UI_INGAME_HELP_PRESSED","UI_INGAME_HELP_NORMAL");r.input.useHandCursor=!1,a.panelGroup.add(r);var l=new Phaser.Button(e,403,325,"UIText",a.btnHomeClick,a,"UI_BUTTON_HOME_OVER","UI_BUTTON_HOME_NORMAL","UI_BUTTON_HOME_PRESSED","UI_BUTTON_HOME_NORMAL");l.input.useHandCursor=!1,a.panelGroup.add(l);var h=new Phaser.Button(e,487,325,"UIText",a.btnClickRestart,a,"UI_BUTTON_RESTART_OVERLAY","UI_BUTTON_RESTART_NORMAL","UI_BUTTON_RESTART_PRESSED","UI_BUTTON_RESTART_NORMAL");return h.input.useHandCursor=!1,a.panelGroup.add(h),a.grpHelpPanel=new d.default(a.game),a.add(a.grpHelpPanel),a.grpHelpBonusPanel=new f.default(a.game),a.add(a.grpHelpBonusPanel),a.backFadeInTween=a.game.add.tween(a.back),a.backFadeInTween.to({alpha:1},250,Phaser.Easing.Linear.Out),a.panelGroup.pivot.set(480,270),a.panelGroup.position.set(480,270),a.panelTween=a.game.add.tween(a.panelGroup.scale),a.panelTween.to({x:1,y:1},300,Phaser.Easing.Back.Out),a.backFadeOutTween=a.game.add.tween(a.back),a.backFadeOutTween.to({alpha:0},250,Phaser.Easing.Linear.Out).onComplete.add(function(){this.visible=!1,u.default.main.gamePaused=!1},a),a.visible=!1,a}return o(t,e),r(t,[{key:"pauseStart",value:function(){this.back.alpha=0,this.backFadeInTween.start(),this.panelGroup.scale.set(0),this.panelGroup.visible=!0,this.panelTween.start(),this.timerCloseAllow.add(250,function(){this.allowClose=!0},this),this.timerCloseAllow.start(),u.default.main.playingMusic.pause(),u.default.main.soundFx.play("cuaderno")}},{key:"clickPauseClose",value:function(){this.allowClose&&(this.allowClose=!1,this.grpHelpPanel.visible=!1,this.grpHelpBonusPanel.visible=!1,this.panelGroup.visible=!1,this.backFadeOutTween.start(),u.default.main.playingMusic.resume(),u.default.main.soundFx.play("cuaderno"))}},{key:"btnHomeClick",value:function(){u.default.main.soundFx.play("boton"),this.clickPauseClose(),u.default.main.gamePaused=!1,this.game.state.start("MainMenu")}},{key:"btnClickHelp",value:function(){u.default.main.soundFx.play("boton"),this.panelGroup.visible=!1,u.default.gameType.selected==u.default.gameType.REGULAR?this.grpHelpPanel.showHidePanel():this.grpHelpBonusPanel.showHidePanel()}},{key:"btnClickRestart",value:function(){u.default.main.soundFx.play("boton"),this.clickPauseClose(),u.default.main.gamePaused=!1,u.default.main.playstate.restartRoom()}}]),t}(Phaser.Group);a.default=g},{"../gameOptions":7,"./AudioButtonInGame":20,"./TutorialPanel":27,"./TutorialPanelBonus":28}],26:[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),l=e("../gameOptions"),u=i(l),h=e("./TutorialPanel"),d=i(h),c=function(e){function t(e){n(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.restartState=!1,a.nextState="",a.transitionDoor=new Phaser.Sprite(e,0,0,"transitionText","loading_close_0000"),a.transitionDoor.scale.set(1.34),a.transitionDoor.inputEnabled=!0,a.transitionDoor.animations.add("open",Phaser.Animation.generateFrameNames("loading_open_",0,2,"",4),24,!1).onComplete.add(function(){this.transitionDoor.visible=!1},a),a.transitionDoor.animations.add("openPlaystate",Phaser.Animation.generateFrameNames("loading_open_",0,2,"",4),24,!1).onComplete.add(function(){this.transitionDoor.visible=!1;var e=u.default.main.playstate;e&&e.startIntroState()},a),a.transitionDoor.animations.add("close",Phaser.Animation.generateFrameNames("loading_close_",0,6,"",4),24,!1).onComplete.add(function(){this.restartState?(this.game.state.restart(),this.restartState=!1):this.game.state.start(this.nextState)},a),a.transitionDoor.animations.add("closed",["loading_idle_0000"],25,!1),a.add(a.transitionDoor),a.transitionDoor.play("closed");var i=new Phaser.Group(a.game);return a.add(i),a.icoLoadLeft=new Phaser.Sprite(e,160,90,"transitionText","loading_0000"),a.icoLoadLeft.animations.add("idle",Phaser.Animation.generateFrameNames("loading_",0,23,"",4),24,!0),a.icoLoadLeft.play("idle"),i.add(a.icoLoadLeft),a.icoLoadRigth=new Phaser.Sprite(e,700,90,"transitionText","loading_0000"),a.icoLoadRigth.animations.add("idle",Phaser.Animation.generateFrameNames("loading_",0,23,"",4),24,!0),a.icoLoadRigth.play("idle"),i.add(a.icoLoadRigth),a.fadeInIconsTween=a.game.add.tween(i),a.fadeInIconsTween.to({alpha:1},500,Phaser.Easing.Linear.In,!0,0),a.fadeOutIconsPlaystateTween=a.game.add.tween(i),a.fadeOutIconsPlaystateTween.to({alpha:0},500,Phaser.Easing.Linear.In,!1).onComplete.add(function(){this.transitionDoor.play("openPlaystate")},a),a.fadeOutIconsTween=a.game.add.tween(i),a.fadeOutIconsTween.to({alpha:0},500,Phaser.Easing.Linear.In,!1).onComplete.add(function(){this.transitionDoor.play("open")},a),a.loadedLevel=!1,0==u.default.level.roomsWon&&(a.tutorialActive=!0,a.grpHelpPanel=new d.default(a.game),a.grpHelpPanel.visible=!0,a.add(a.grpHelpPanel),a.back=new Phaser.TileSprite(e,0,0,a.game.width,a.game.height,"UIText","color16x16"),a.back.alpha=0,a.add(a.back),a.btnPlay=new Phaser.Button(e,880,460,"UIText",a.closeTutorial,a,"UI_BUTTON_RESUME_OVERLAY","UI_BUTTON_RESUME_NORMAL","UI_BUTTON_RESUME_PRESSED","UI_BUTTON_RESUME_NORMAL"),a.btnPlay.input.useHandCursor=!1,a.add(a.btnPlay)),a}return o(t,e),r(t,[{key:"closeTutorial",value:function(){if(this.tutorialActive=!1,this.grpHelpPanel.kill(),this.back.kill(),this.btnPlay.kill(),this.loadedLevel){this.fadeOutIconsPlaystateTween.start();var e=this.game.time.create(!0);e.add(500,function(){u.default.main.soundFx.play("puerta_abre")},this),e.start()}}},{key:"openDoors",value:function(e){if(this.game.world.bringToTop(this),this.fadeInIconsTween.stop(),this.loadedLevel=!0,!this.tutorialActive){e?this.fadeOutIconsPlaystateTween.start():this.fadeOutIconsTween.start();var t=this.game.time.create(!0);t.add(500,function(){u.default.main.soundFx.play("puerta_abre")},this),t.start()}}},{key:"gotoNextState",value:function(e){this.nextState=e,this.closeDoors()}},{key:"restartRoom",value:function(){this.restartState=!0,this.closeDoors()}},{key:"closeDoors",value:function(){this.game.world.bringToTop(this),this.transitionDoor.visible=!0,this.transitionDoor.play("close"),u.default.main.soundFx.play("puerta_cierra")}}]),t}(Phaser.Group);a.default=c},{"../gameOptions":7,"./TutorialPanel":27}],27:[function(e,t,a){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),r=e("../gameOptions"),l=function(e){return e&&e.__esModule?e:{default:e}}(r),u=function(e){function t(e){i(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.panelTutorial=new Phaser.Sprite(e,0,0,"UIText","tutorial_bg_1"),a.add(a.panelTutorial),a.btnClosepanelTutorial=new Phaser.Button(e,682,50,"UIText",a.showHidePanel,a,"UI_INGAME_HELP_OVERLAY","UI_INGAME_HELP_NORMAL","UI_INGAME_HELP_PRESSED","UI_INGAME_HELP_NORMAL"),a.btnClosepanelTutorial.input.useHandCursor=!1,a.add(a.btnClosepanelTutorial),a.btnClosepanelTutorial.alpha=0;var s=new Phaser.Sprite(e,0,0,"UIText","tutorial_circulo");a.add(s);var o=new Phaser.Sprite(e,0,0,"UIText","tutorial_rayas");a.add(o),s.alpha=0;var r=a.game.add.tween(s);r.to({alpha:1},250,Phaser.Easing.Bounce.InOut,!1,0,3),r.onComplete.add(function(){var e=this.game.time.create(!0);e.add(500,function(){s.alpha=0,o.alpha=1,l.start()},this),e.start()},a);var l=a.game.add.tween(o);return l.to({alpha:0},500,Phaser.Easing.Bounce.InOut,!0,0,3),l.onComplete.add(function(){r.start()},a),a.visible=!1,a}return s(t,e),o(t,[{key:"showHidePanel",value:function(){l.default.main.soundFx.play("cuaderno"),this.visible=!this.visible}}]),t}(Phaser.Group);a.default=u},{"../gameOptions":7}],28:[function(e,t,a){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),r=e("../gameOptions"),l=function(e){return e&&e.__esModule?e:{default:e}}(r),u=function(e){function t(e){i(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),s=new Phaser.Sprite(e,0,0,"UIText","tutorial_bg_2");a.add(s),a.photo1=new Phaser.Sprite(e,294,186,"UIText","tutoFoto1"),a.photo1.anchor.set(.5),a.add(a.photo1),a.photo2=new Phaser.Sprite(e,664,224,"UIText","tutoFoto2"),a.photo2.anchor.set(.5),a.add(a.photo2),a.photo3=new Phaser.Sprite(e,428,400,"UIText","tutoFoto3"),a.photo3.anchor.set(.5),a.add(a.photo3),a.lantern=new Phaser.Sprite(e,456,208,"UIText","tutorial_linterna2"),a.add(a.lantern);var o=a.game.add.tween(a.photo1.scale).to({x:0,y:0},250,Phaser.Easing.Linear.In,!1,150),r=a.game.add.tween(a.photo2.scale).to({x:0,y:0},250,Phaser.Easing.Linear.In,!1,150),l=a.game.add.tween(a.photo3.scale).to({x:0,y:0},250,Phaser.Easing.Linear.In,!1,150);return a.tweenLantern1=a.game.add.tween(a.lantern),a.tweenLantern1.to({x:250,y:150},500,Phaser.Easing.Linear.In,!1,1e3).onComplete.add(function(){o.start()},a),a.tweenLantern2=a.game.add.tween(a.lantern),a.tweenLantern2.to({x:620,y:180},500,Phaser.Easing.Linear.In,!1,500).onComplete.add(function(){r.start()},a),a.tweenLantern3=a.game.add.tween(a.lantern),a.tweenLantern3.to({x:380,y:350},500,Phaser.Easing.Linear.In,!1,500).onComplete.add(function(){l.start()},a),a.tweenLantern4=a.game.add.tween(a.lantern),a.tweenLantern4.to({x:456,y:208},500,Phaser.Easing.Linear.In,!1,500).onComplete.add(function(){var e=this.game.time.create(!0);e.add(750,function(){this.photo1.scale.set(1),this.photo2.scale.set(1),this.photo3.scale.set(1)},this),e.start()},a),a.tweenLantern1.chain(a.tweenLantern2),a.tweenLantern2.chain(a.tweenLantern3),a.tweenLantern3.chain(a.tweenLantern4),a.tweenLantern4.chain(a.tweenLantern1),a.visible=!1,a}return s(t,e),o(t,[{key:"startTweens",value:function(){this.photo1.scale.set(1),this.photo2.scale.set(1),this.photo3.scale.set(1),this.lantern.position.set(456,208),this.tweenLantern1.start()}},{key:"showHidePanel",value:function(){l.default.main.soundFx.play("cuaderno"),this.visible=!this.visible,this.visible&&this.startTweens()}}]),t}(Phaser.Group);a.default=u},{"../gameOptions":7}]},{},[8]);
