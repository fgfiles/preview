/*! For license information please see main.js.LICENSE.txt */ ! function(t) { var e = {};

    function i(n) { if (e[n]) return e[n].exports; var r = e[n] = { i: n, l: !1, exports: {} }; return t[n].call(r.exports, r, r.exports, i), r.l = !0, r.exports } i.m = t, i.c = e, i.d = function(t, e, n) { i.o(t, e) || Object.defineProperty(t, e, { enumerable: !0, get: n }) }, i.r = function(t) { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(t, "__esModule", { value: !0 }) }, i.t = function(t, e) { if (1 & e && (t = i(t)), 8 & e) return t; if (4 & e && "object" == typeof t && t && t.__esModule) return t; var n = Object.create(null); if (i.r(n), Object.defineProperty(n, "default", { enumerable: !0, value: t }), 2 & e && "string" != typeof t)
            for (var r in t) i.d(n, r, function(e) { return t[e] }.bind(null, r)); return n }, i.n = function(t) { var e = t && t.__esModule ? function() { return t["default"] } : function() { return t }; return i.d(e, "a", e), e }, i.o = function(t, e) { return Object.prototype.hasOwnProperty.call(t, e) }, i.p = "", i(i.s = 42) }([function(t, e, i) { "use strict";
    i.r(e), i.d(e, "utils", (function() { return n.utils })), i.d(e, "AccessibilityManager", (function() { return n.AccessibilityManager })), i.d(e, "accessibleTarget", (function() { return n.accessibleTarget })), i.d(e, "InteractionData", (function() { return n.InteractionData })), i.d(e, "InteractionEvent", (function() { return n.InteractionEvent })), i.d(e, "InteractionManager", (function() { return n.InteractionManager })), i.d(e, "InteractionTrackingData", (function() { return n.InteractionTrackingData })), i.d(e, "interactiveTarget", (function() { return n.interactiveTarget })), i.d(e, "Application", (function() { return n.Application })), i.d(e, "AbstractBatchRenderer", (function() { return n.AbstractBatchRenderer })), i.d(e, "AbstractRenderer", (function() { return n.AbstractRenderer })), i.d(e, "Attribute", (function() { return n.Attribute })), i.d(e, "BaseRenderTexture", (function() { return n.BaseRenderTexture })), i.d(e, "BaseTexture", (function() { return n.BaseTexture })), i.d(e, "BatchDrawCall", (function() { return n.BatchDrawCall })), i.d(e, "BatchGeometry", (function() { return n.BatchGeometry })), i.d(e, "BatchPluginFactory", (function() { return n.BatchPluginFactory })), i.d(e, "BatchRenderer", (function() { return n.BatchRenderer })), i.d(e, "BatchShaderGenerator", (function() { return n.BatchShaderGenerator })), i.d(e, "BatchTextureArray", (function() { return n.BatchTextureArray })), i.d(e, "Buffer", (function() { return n.Buffer })), i.d(e, "Filter", (function() { return n.Filter })), i.d(e, "FilterState", (function() { return n.FilterState })), i.d(e, "Framebuffer", (function() { return n.Framebuffer })), i.d(e, "GLFramebuffer", (function() { return n.GLFramebuffer })), i.d(e, "GLProgram", (function() { return n.GLProgram })), i.d(e, "GLTexture", (function() { return n.GLTexture })), i.d(e, "Geometry", (function() { return n.Geometry })), i.d(e, "IGLUniformData", (function() { return n.IGLUniformData })), i.d(e, "MaskData", (function() { return n.MaskData })), i.d(e, "ObjectRenderer", (function() { return n.ObjectRenderer })), i.d(e, "Program", (function() { return n.Program })), i.d(e, "Quad", (function() { return n.Quad })), i.d(e, "QuadUv", (function() { return n.QuadUv })), i.d(e, "RenderTexture", (function() { return n.RenderTexture })), i.d(e, "RenderTexturePool", (function() { return n.RenderTexturePool })), i.d(e, "Renderer", (function() { return n.Renderer })), i.d(e, "Shader", (function() { return n.Shader })), i.d(e, "SpriteMaskFilter", (function() { return n.SpriteMaskFilter })), i.d(e, "State", (function() { return n.State })), i.d(e, "System", (function() { return n.System })), i.d(e, "Texture", (function() { return n.Texture })), i.d(e, "TextureMatrix", (function() { return n.TextureMatrix })), i.d(e, "TextureUvs", (function() { return n.TextureUvs })), i.d(e, "UniformGroup", (function() { return n.UniformGroup })), i.d(e, "ViewableBuffer", (function() { return n.ViewableBuffer })), i.d(e, "autoDetectRenderer", (function() { return n.autoDetectRenderer })), i.d(e, "checkMaxIfStatementsInShader", (function() { return n.checkMaxIfStatementsInShader })), i.d(e, "defaultFilterVertex", (function() { return n.defaultFilterVertex })), i.d(e, "defaultVertex", (function() { return n.defaultVertex })), i.d(e, "resources", (function() { return n.resources })), i.d(e, "systems", (function() { return n.systems })), i.d(e, "uniformParsers", (function() { return n.uniformParsers })), i.d(e, "Extract", (function() { return n.Extract })), i.d(e, "AppLoaderPlugin", (function() { return n.AppLoaderPlugin })), i.d(e, "Loader", (function() { return n.Loader })), i.d(e, "LoaderResource", (function() { return n.LoaderResource })), i.d(e, "TextureLoader", (function() { return n.TextureLoader })), i.d(e, "ParticleContainer", (function() { return n.ParticleContainer })), i.d(e, "ParticleRenderer", (function() { return n.ParticleRenderer })), i.d(e, "BasePrepare", (function() { return n.BasePrepare })), i.d(e, "CountLimiter", (function() { return n.CountLimiter })), i.d(e, "Prepare", (function() { return n.Prepare })), i.d(e, "TimeLimiter", (function() { return n.TimeLimiter })), i.d(e, "Spritesheet", (function() { return n.Spritesheet })), i.d(e, "SpritesheetLoader", (function() { return n.SpritesheetLoader })), i.d(e, "TilingSprite", (function() { return n.TilingSprite })), i.d(e, "TilingSpriteRenderer", (function() { return n.TilingSpriteRenderer })), i.d(e, "BitmapFont", (function() { return n.BitmapFont })), i.d(e, "BitmapFontData", (function() { return n.BitmapFontData })), i.d(e, "BitmapFontLoader", (function() { return n.BitmapFontLoader })), i.d(e, "BitmapText", (function() { return n.BitmapText })), i.d(e, "Ticker", (function() { return n.Ticker })), i.d(e, "TickerPlugin", (function() { return n.TickerPlugin })), i.d(e, "UPDATE_PRIORITY", (function() { return n.UPDATE_PRIORITY })), i.d(e, "ALPHA_MODES", (function() { return n.ALPHA_MODES })), i.d(e, "BLEND_MODES", (function() { return n.BLEND_MODES })), i.d(e, "BUFFER_BITS", (function() { return n.BUFFER_BITS })), i.d(e, "CLEAR_MODES", (function() { return n.CLEAR_MODES })), i.d(e, "DRAW_MODES", (function() { return n.DRAW_MODES })), i.d(e, "ENV", (function() { return n.ENV })), i.d(e, "FORMATS", (function() { return n.FORMATS })), i.d(e, "GC_MODES", (function() { return n.GC_MODES })), i.d(e, "MASK_TYPES", (function() { return n.MASK_TYPES })), i.d(e, "MIPMAP_MODES", (function() { return n.MIPMAP_MODES })), i.d(e, "MSAA_QUALITY", (function() { return n.MSAA_QUALITY })), i.d(e, "PRECISION", (function() { return n.PRECISION })), i.d(e, "RENDERER_TYPE", (function() { return n.RENDERER_TYPE })), i.d(e, "SCALE_MODES", (function() { return n.SCALE_MODES })), i.d(e, "TARGETS", (function() { return n.TARGETS })), i.d(e, "TYPES", (function() { return n.TYPES })), i.d(e, "WRAP_MODES", (function() { return n.WRAP_MODES })), i.d(e, "Bounds", (function() { return n.Bounds })), i.d(e, "Container", (function() { return n.Container })), i.d(e, "DisplayObject", (function() { return n.DisplayObject })), i.d(e, "TemporaryDisplayObject", (function() { return n.TemporaryDisplayObject })), i.d(e, "FillStyle", (function() { return n.FillStyle })), i.d(e, "GRAPHICS_CURVES", (function() { return n.GRAPHICS_CURVES })), i.d(e, "Graphics", (function() { return n.Graphics })), i.d(e, "GraphicsData", (function() { return n.GraphicsData })), i.d(e, "GraphicsGeometry", (function() { return n.GraphicsGeometry })), i.d(e, "LINE_CAP", (function() { return n.LINE_CAP })), i.d(e, "LINE_JOIN", (function() { return n.LINE_JOIN })), i.d(e, "LineStyle", (function() { return n.LineStyle })), i.d(e, "graphicsUtils", (function() { return n.graphicsUtils })), i.d(e, "Circle", (function() { return n.Circle })), i.d(e, "DEG_TO_RAD", (function() { return n.DEG_TO_RAD })), i.d(e, "Ellipse", (function() { return n.Ellipse })), i.d(e, "Matrix", (function() { return n.Matrix })), i.d(e, "ObservablePoint", (function() { return n.ObservablePoint })), i.d(e, "PI_2", (function() { return n.PI_2 })), i.d(e, "Point", (function() { return n.Point })), i.d(e, "Polygon", (function() { return n.Polygon })), i.d(e, "RAD_TO_DEG", (function() { return n.RAD_TO_DEG })), i.d(e, "Rectangle", (function() { return n.Rectangle })), i.d(e, "RoundedRectangle", (function() { return n.RoundedRectangle })), i.d(e, "SHAPES", (function() { return n.SHAPES })), i.d(e, "Transform", (function() { return n.Transform })), i.d(e, "groupD8", (function() { return n.groupD8 })), i.d(e, "Mesh", (function() { return n.Mesh })), i.d(e, "MeshBatchUvs", (function() { return n.MeshBatchUvs })), i.d(e, "MeshGeometry", (function() { return n.MeshGeometry })), i.d(e, "MeshMaterial", (function() { return n.MeshMaterial })), i.d(e, "NineSlicePlane", (function() { return n.NineSlicePlane })), i.d(e, "PlaneGeometry", (function() { return n.PlaneGeometry })), i.d(e, "RopeGeometry", (function() { return n.RopeGeometry })), i.d(e, "SimpleMesh", (function() { return n.SimpleMesh })), i.d(e, "SimplePlane", (function() { return n.SimplePlane })), i.d(e, "SimpleRope", (function() { return n.SimpleRope })), i.d(e, "Runner", (function() { return n.Runner })), i.d(e, "Sprite", (function() { return n.Sprite })), i.d(e, "AnimatedSprite", (function() { return n.AnimatedSprite })), i.d(e, "TEXT_GRADIENT", (function() { return n.TEXT_GRADIENT })), i.d(e, "Text", (function() { return n.Text })), i.d(e, "TextMetrics", (function() { return n.TextMetrics })), i.d(e, "TextStyle", (function() { return n.TextStyle })), i.d(e, "isMobile", (function() { return n.isMobile })), i.d(e, "settings", (function() { return n.settings })), i.d(e, "VERSION", (function() { return n.VERSION })), i.d(e, "filters", (function() { return n.filters })), i.d(e, "useDeprecated", (function() { return n.useDeprecated })), i.d(e, "CanvasRenderer", (function() { return f })), i.d(e, "canvasUtils", (function() { return m })), i.d(e, "CanvasMeshRenderer", (function() { return b })), i.d(e, "CanvasGraphicsRenderer", (function() { return T })), i.d(e, "CanvasSpriteRenderer", (function() { return C })), i.d(e, "CanvasExtract", (function() { return A })), i.d(e, "CanvasPrepare", (function() { return L })); var n = i(8),
        r = i(5),
        s = i(1),
        o = i(4),
        a = i(2),
        h = i(6),
        u = function(t, e) { return (u = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) })(t, e) }; var l = function() {
        function t(t) { this.renderer = t, this._foundShapes = [] } return t.prototype.pushMask = function(t) { var e = this.renderer,
                i = t.maskObject || t;
            e.context.save(); var n = this._foundShapes; if (this.recursiveFindShapes(i, n), n.length > 0) { var r = e.context;
                r.beginPath(); for (var s = 0; s < n.length; s++) { var o = n[s],
                        a = o.transform.worldTransform;
                    this.renderer.setContextTransform(a), this.renderGraphicsShape(o) } n.length = 0, r.clip() } }, t.prototype.recursiveFindShapes = function(t, e) { t.geometry && t.geometry.graphicsData && e.push(t); var i = t.children; if (i)
                for (var n = 0; n < i.length; n++) this.recursiveFindShapes(i[n], e) }, t.prototype.renderGraphicsShape = function(t) { t.finishPoly(); var e = this.renderer.context,
                i = t.geometry.graphicsData,
                n = i.length; if (0 !== n)
                for (var r = 0; r < n; r++) { var s = i[r].shape; if (s.type === o.l.POLY) { var a = s.points;
                        e.moveTo(a[0], a[1]); for (var h = 1; h < a.length / 2; h++) e.lineTo(a[2 * h], a[2 * h + 1]);
                        a[0] === a[a.length - 2] && a[1] === a[a.length - 1] && e.closePath() } else if (s.type === o.l.RECT) e.rect(s.x, s.y, s.width, s.height), e.closePath();
                    else if (s.type === o.l.CIRC) e.arc(s.x, s.y, s.radius, 0, 2 * Math.PI), e.closePath();
                    else if (s.type === o.l.ELIP) { var u = 2 * s.width,
                            l = 2 * s.height,
                            c = s.x - u / 2,
                            d = s.y - l / 2,
                            p = u / 2 * .5522848,
                            f = l / 2 * .5522848,
                            m = c + u,
                            g = d + l,
                            y = c + u / 2,
                            v = d + l / 2;
                        e.moveTo(c, v), e.bezierCurveTo(c, v - f, y - p, d, y, d), e.bezierCurveTo(y + p, d, m, v - f, m, v), e.bezierCurveTo(m, v + f, y + p, g, y, g), e.bezierCurveTo(y - p, g, c, v + f, c, v), e.closePath() } else if (s.type === o.l.RREC) { var b = s.x,
                            _ = s.y,
                            x = s.width,
                            w = s.height,
                            T = s.radius,
                            S = Math.min(x, w) / 2 | 0;
                        T = T > S ? S : T, e.moveTo(b, _ + T), e.lineTo(b, _ + w - T), e.quadraticCurveTo(b, _ + w, b + T, _ + w), e.lineTo(b + x - T, _ + w), e.quadraticCurveTo(b + x, _ + w, b + x, _ + w - T), e.lineTo(b + x, _ + T), e.quadraticCurveTo(b + x, _, b + x - T, _), e.lineTo(b + T, _), e.quadraticCurveTo(b, _, b, _ + T), e.closePath() } } }, t.prototype.popMask = function(t) { t.context.restore(), t.invalidateBlendMode() }, t.prototype.destroy = function() {}, t }();

    function c(t) { var e = document.createElement("canvas");
        e.width = 6, e.height = 1; var i = e.getContext("2d"); return i.fillStyle = t, i.fillRect(0, 0, 6, 1), e }

    function d() { if ("undefined" == typeof document) return !1; var t = c("#ff00ff"),
            e = c("#ffff00"),
            i = document.createElement("canvas");
        i.width = 6, i.height = 1; var n = i.getContext("2d");
        n.globalCompositeOperation = "multiply", n.drawImage(t, 0, 0), n.drawImage(e, 2, 0); var r = n.getImageData(2, 0, 1, 1); if (!r) return !1; var s = r.data; return 255 === s[0] && 0 === s[1] && 0 === s[2] } var p = new o.d,
        f = function(t) {
            function e(i) { var n, r = t.call(this, a.m.CANVAS, i) || this; if (r.rootContext = r.view.getContext("2d", { alpha: r.transparent }), r.context = r.rootContext, r.refresh = !0, r.maskManager = new l(r), r.smoothProperty = "imageSmoothingEnabled", !r.rootContext.imageSmoothingEnabled) { var o = r.rootContext;
                    o.webkitImageSmoothingEnabled ? r.smoothProperty = "webkitImageSmoothingEnabled" : o.mozImageSmoothingEnabled ? r.smoothProperty = "mozImageSmoothingEnabled" : o.oImageSmoothingEnabled ? r.smoothProperty = "oImageSmoothingEnabled" : o.msImageSmoothingEnabled && (r.smoothProperty = "msImageSmoothingEnabled") } return r.initPlugins(e.__plugins), r.blendModes = (void 0 === n && (n = []), d() ? (n[a.b.NORMAL] = "source-over", n[a.b.ADD] = "lighter", n[a.b.MULTIPLY] = "multiply", n[a.b.SCREEN] = "screen", n[a.b.OVERLAY] = "overlay", n[a.b.DARKEN] = "darken", n[a.b.LIGHTEN] = "lighten", n[a.b.COLOR_DODGE] = "color-dodge", n[a.b.COLOR_BURN] = "color-burn", n[a.b.HARD_LIGHT] = "hard-light", n[a.b.SOFT_LIGHT] = "soft-light", n[a.b.DIFFERENCE] = "difference", n[a.b.EXCLUSION] = "exclusion", n[a.b.HUE] = "hue", n[a.b.SATURATION] = "saturate", n[a.b.COLOR] = "color", n[a.b.LUMINOSITY] = "luminosity") : (n[a.b.NORMAL] = "source-over", n[a.b.ADD] = "lighter", n[a.b.MULTIPLY] = "source-over", n[a.b.SCREEN] = "source-over", n[a.b.OVERLAY] = "source-over", n[a.b.DARKEN] = "source-over", n[a.b.LIGHTEN] = "source-over", n[a.b.COLOR_DODGE] = "source-over", n[a.b.COLOR_BURN] = "source-over", n[a.b.HARD_LIGHT] = "source-over", n[a.b.SOFT_LIGHT] = "source-over", n[a.b.DIFFERENCE] = "source-over", n[a.b.EXCLUSION] = "source-over", n[a.b.HUE] = "source-over", n[a.b.SATURATION] = "source-over", n[a.b.COLOR] = "source-over", n[a.b.LUMINOSITY] = "source-over"), n[a.b.NORMAL_NPM] = n[a.b.NORMAL], n[a.b.ADD_NPM] = n[a.b.ADD], n[a.b.SCREEN_NPM] = n[a.b.SCREEN], n[a.b.SRC_IN] = "source-in", n[a.b.SRC_OUT] = "source-out", n[a.b.SRC_ATOP] = "source-atop", n[a.b.DST_OVER] = "destination-over", n[a.b.DST_IN] = "destination-in", n[a.b.DST_OUT] = "destination-out", n[a.b.DST_ATOP] = "destination-atop", n[a.b.XOR] = "xor", n[a.b.SUBTRACT] = "source-over", n), r._activeBlendMode = null, r._outerBlend = !1, r._projTransform = null, r.renderingToScreen = !1, Object(s.sayHello)("Canvas"), r.resize(r.options.width, r.options.height), r } return function(t, e) {
                function i() { this.constructor = t } u(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i) }(e, t), e.prototype.render = function(t, e, i, n, o) { if (this.view) { this.renderingToScreen = !e, this.emit("prerender"); var h = this.resolution;
                    e ? ((e = e.castToBaseTexture())._canvasRenderTarget || (e._canvasRenderTarget = new s.CanvasRenderTarget(e.width, e.height, e.resolution), e.resource = new r.P.CanvasResource(e._canvasRenderTarget.canvas), e.valid = !0), this.context = e._canvasRenderTarget.context, this.resolution = e._canvasRenderTarget.resolution) : this.context = this.rootContext; var u = this.context; if (this._projTransform = n || null, e || (this._lastObjectRendered = t), !o) { var l = t.enableTempParent();
                        t.updateTransform(), t.disableTempParent(l) } if (u.save(), u.setTransform(1, 0, 0, 1, 0, 0), u.globalAlpha = 1, this._activeBlendMode = a.b.NORMAL, this._outerBlend = !1, u.globalCompositeOperation = this.blendModes[a.b.NORMAL], i !== undefined ? i : this.clearBeforeRender)
                        if (this.renderingToScreen) this.transparent ? u.clearRect(0, 0, this.width, this.height) : (u.fillStyle = this._backgroundColorString, u.fillRect(0, 0, this.width, this.height));
                        else {
                            (e = e)._canvasRenderTarget.clear(); var c = e.clearColor;
                            c[3] > 0 && (u.fillStyle = Object(s.hex2string)(Object(s.rgb2hex)(c)), u.fillRect(0, 0, e.realWidth, e.realHeight)) } var d = this.context;
                    this.context = u, t.renderCanvas(this), this.context = d, u.restore(), this.resolution = h, this._projTransform = null, this.emit("postrender") } }, e.prototype.setContextTransform = function(t, e, i) { var n = t,
                    r = this._projTransform,
                    s = this.resolution;
                i = i || s, r && ((n = p).copyFrom(t), n.prepend(r)), e ? this.context.setTransform(n.a * i, n.b * i, n.c * i, n.d * i, n.tx * s | 0, n.ty * s | 0) : this.context.setTransform(n.a * i, n.b * i, n.c * i, n.d * i, n.tx * s, n.ty * s) }, e.prototype.clear = function(t) { var e = this.context;
                t = t || this._backgroundColorString, !this.transparent && t ? (e.fillStyle = t, e.fillRect(0, 0, this.width, this.height)) : e.clearRect(0, 0, this.width, this.height) }, e.prototype.setBlendMode = function(t, e) { var i = t === a.b.SRC_IN || t === a.b.SRC_OUT || t === a.b.DST_IN || t === a.b.DST_ATOP;!e && i && (t = a.b.NORMAL), this._activeBlendMode !== t && (this._activeBlendMode = t, this._outerBlend = i, this.context.globalCompositeOperation = this.blendModes[t]) }, e.prototype.destroy = function(e) { t.prototype.destroy.call(this, e), this.context = null, this.refresh = !0, this.maskManager.destroy(), this.maskManager = null, this.smoothProperty = null }, e.prototype.resize = function(e, i) { t.prototype.resize.call(this, e, i), this.smoothProperty && (this.rootContext[this.smoothProperty] = h.b.SCALE_MODE === a.n.LINEAR) }, e.prototype.invalidateBlendMode = function() { this._activeBlendMode = this.blendModes.indexOf(this.context.globalCompositeOperation) }, e.registerPlugin = function(t, i) { e.__plugins = e.__plugins || {}, e.__plugins[t] = i }, e }(r.b),
        m = { canvas: null, getTintedCanvas: function(t, e) { var i = t.texture,
                    n = "#" + ("00000" + (0 | (e = m.roundColor(e))).toString(16)).substr(-6);
                i.tintCache = i.tintCache || {}; var r, s = i.tintCache[n]; if (s) { if (s.tintId === i._updateID) return i.tintCache[n];
                    r = i.tintCache[n] } else r = document.createElement("canvas"); if (m.tintMethod(i, e, r), r.tintId = i._updateID, m.convertTintToImage) { var o = new Image;
                    o.src = r.toDataURL(), i.tintCache[n] = o } else i.tintCache[n] = r; return r }, getTintedPattern: function(t, e) { var i = "#" + ("00000" + (0 | (e = m.roundColor(e))).toString(16)).substr(-6);
                t.patternCache = t.patternCache || {}; var n = t.patternCache[i]; return n && n.tintId === t._updateID || (m.canvas || (m.canvas = document.createElement("canvas")), m.tintMethod(t, e, m.canvas), (n = m.canvas.getContext("2d").createPattern(m.canvas, "repeat")).tintId = t._updateID, t.patternCache[i] = n), n }, tintWithMultiply: function(t, e, i) { var n = i.getContext("2d"),
                    r = t._frame.clone(),
                    s = t.baseTexture.resolution;
                r.x *= s, r.y *= s, r.width *= s, r.height *= s, i.width = Math.ceil(r.width), i.height = Math.ceil(r.height), n.save(), n.fillStyle = "#" + ("00000" + (0 | e).toString(16)).substr(-6), n.fillRect(0, 0, r.width, r.height), n.globalCompositeOperation = "multiply"; var o = t.baseTexture.getDrawableSource();
                n.drawImage(o, r.x, r.y, r.width, r.height, 0, 0, r.width, r.height), n.globalCompositeOperation = "destination-atop", n.drawImage(o, r.x, r.y, r.width, r.height, 0, 0, r.width, r.height), n.restore() }, tintWithOverlay: function(t, e, i) { var n = i.getContext("2d"),
                    r = t._frame.clone(),
                    s = t.baseTexture.resolution;
                r.x *= s, r.y *= s, r.width *= s, r.height *= s, i.width = Math.ceil(r.width), i.height = Math.ceil(r.height), n.save(), n.globalCompositeOperation = "copy", n.fillStyle = "#" + ("00000" + (0 | e).toString(16)).substr(-6), n.fillRect(0, 0, r.width, r.height), n.globalCompositeOperation = "destination-atop", n.drawImage(t.baseTexture.getDrawableSource(), r.x, r.y, r.width, r.height, 0, 0, r.width, r.height), n.restore() }, tintWithPerPixel: function(t, e, i) { var n = i.getContext("2d"),
                    r = t._frame.clone(),
                    o = t.baseTexture.resolution;
                r.x *= o, r.y *= o, r.width *= o, r.height *= o, i.width = Math.ceil(r.width), i.height = Math.ceil(r.height), n.save(), n.globalCompositeOperation = "copy", n.drawImage(t.baseTexture.getDrawableSource(), r.x, r.y, r.width, r.height, 0, 0, r.width, r.height), n.restore(); for (var a = Object(s.hex2rgb)(e), h = a[0], u = a[1], l = a[2], c = n.getImageData(0, 0, r.width, r.height), d = c.data, p = 0; p < d.length; p += 4) d[p + 0] *= h, d[p + 1] *= u, d[p + 2] *= l;
                n.putImageData(c, 0, 0) }, roundColor: function(t) { var e = m.cacheStepsPerColorChannel,
                    i = Object(s.hex2rgb)(t); return i[0] = Math.min(255, i[0] / e * e), i[1] = Math.min(255, i[1] / e * e), i[2] = Math.min(255, i[2] / e * e), Object(s.rgb2hex)(i) }, cacheStepsPerColorChannel: 8, convertTintToImage: !1, canUseMultiply: d(), tintMethod: null };
    m.tintMethod = m.canUseMultiply ? m.tintWithMultiply : m.tintWithPerPixel; var g = r.B.create;
    r.B.create = function(t) { if (!(t && t.forceCanvas)) try { return g(t) } catch (e) {}
        return new f(t) }, r.e.prototype.getDrawableSource = function() { var t = this.resource; return t ? t.bitmap || t.source : null }, r.d.prototype._canvasRenderTarget = null, r.G.prototype.patternCache = null, r.G.prototype.tintCache = null; var y = i(10),
        v = i(18),
        b = function() {
            function t(t) { this.renderer = t } return t.prototype.render = function(t) { var e = this.renderer,
                    i = t.worldTransform;
                e.context.globalAlpha = t.worldAlpha, e.setBlendMode(t.blendMode), e.setContextTransform(i, t.roundPixels), t.drawMode !== a.e.TRIANGLES ? this._renderTriangleMesh(t) : this._renderTriangles(t) }, t.prototype._renderTriangleMesh = function(t) { for (var e = t.geometry.buffers[0].data.length, i = 0; i < e - 2; i++) { var n = 2 * i;
                    this._renderDrawTriangle(t, n, n + 2, n + 4) } }, t.prototype._renderTriangles = function(t) { for (var e = t.geometry.getIndex().data, i = e.length, n = 0; n < i; n += 3) { var r = 2 * e[n],
                        s = 2 * e[n + 1],
                        o = 2 * e[n + 2];
                    this._renderDrawTriangle(t, r, s, o) } }, t.prototype._renderDrawTriangle = function(t, e, i, n) { var r = this.renderer.context,
                    s = t.geometry.buffers[0].data,
                    o = t.uvs,
                    a = t.texture; if (a.valid) { var h = 16777215 !== t.tint,
                        u = a.baseTexture,
                        l = u.width,
                        c = u.height;
                    h && t._cachedTint !== t.tint && (t._cachedTint = t.tint, t._tintedCanvas = m.getTintedCanvas(t, t.tint)); var d = h ? t._tintedCanvas : u.getDrawableSource(),
                        p = o[e] * u.width,
                        f = o[i] * u.width,
                        g = o[n] * u.width,
                        y = o[e + 1] * u.height,
                        v = o[i + 1] * u.height,
                        b = o[n + 1] * u.height,
                        _ = s[e],
                        x = s[i],
                        w = s[n],
                        T = s[e + 1],
                        S = s[i + 1],
                        E = s[n + 1],
                        P = t.canvasPadding / this.renderer.resolution; if (P > 0) { var C = P / Math.abs(t.worldTransform.a),
                            O = P / Math.abs(t.worldTransform.d),
                            A = (_ + x + w) / 3,
                            I = (T + S + E) / 3,
                            R = _ - A,
                            M = T - I,
                            L = Math.sqrt(R * R + M * M);
                        _ = A + R / L * (L + C), T = I + M / L * (L + O), M = S - I, x = A + (R = x - A) / (L = Math.sqrt(R * R + M * M)) * (L + C), S = I + M / L * (L + O), M = E - I, w = A + (R = w - A) / (L = Math.sqrt(R * R + M * M)) * (L + C), E = I + M / L * (L + O) } r.save(), r.beginPath(), r.moveTo(_, T), r.lineTo(x, S), r.lineTo(w, E), r.closePath(), r.clip(); var D = p * v + y * g + f * b - v * g - y * f - p * b,
                        k = _ * v + y * w + x * b - v * w - y * x - _ * b,
                        N = p * x + _ * g + f * w - x * g - _ * f - p * w,
                        F = p * v * w + y * x * g + _ * f * b - _ * v * g - y * f * w - p * x * b,
                        B = T * v + y * E + S * b - v * E - y * S - T * b,
                        j = p * S + T * g + f * E - S * g - T * f - p * E,
                        U = p * v * E + y * S * g + T * f * b - T * v * g - y * f * E - p * S * b;
                    r.transform(k / D, B / D, N / D, j / D, F / D, U / D), r.drawImage(d, 0, 0, l * u.resolution, c * u.resolution, 0, 0, l, c), r.restore(), this.renderer.invalidateBlendMode() } }, t.prototype.renderMeshFlat = function(t) { var e = this.renderer.context,
                    i = t.geometry.getBuffer("aVertexPosition").data,
                    n = i.length / 2;
                e.beginPath(); for (var r = 1; r < n - 2; ++r) { var s = 2 * r,
                        o = i[s],
                        a = i[s + 1],
                        h = i[s + 2],
                        u = i[s + 3],
                        l = i[s + 4],
                        c = i[s + 5];
                    e.moveTo(o, a), e.lineTo(h, u), e.lineTo(l, c) } e.fillStyle = "#FF0000", e.fill(), e.closePath() }, t.prototype.destroy = function() { this.renderer = null }, t }();
    h.b.MESH_CANVAS_PADDING = 0, y.d.prototype._renderCanvas = function(t, e) { t.plugins.mesh.render(e) }, v.a.prototype._cachedTint = 16777215, v.a.prototype._tintedCanvas = null, v.a.prototype._canvasUvs = null, v.a.prototype._renderCanvas = function(t) { var e = t.context,
            i = this.worldTransform,
            n = 16777215 !== this.tint,
            r = this.texture; if (r.valid) { n && this._cachedTint !== this.tint && (this._cachedTint = this.tint, this._tintedCanvas = m.getTintedCanvas(this, this.tint)); var s = n ? this._tintedCanvas : r.baseTexture.getDrawableSource();
            this._canvasUvs || (this._canvasUvs = [0, 0, 0, 0, 0, 0, 0, 0]); var o = this.vertices,
                a = this._canvasUvs,
                h = n ? 0 : r.frame.x,
                u = n ? 0 : r.frame.y,
                l = h + r.frame.width,
                c = u + r.frame.height;
            a[0] = h, a[1] = h + this._leftWidth, a[2] = l - this._rightWidth, a[3] = l, a[4] = u, a[5] = u + this._topHeight, a[6] = c - this._bottomHeight, a[7] = c; for (var d = 0; d < 8; d++) a[d] *= r.baseTexture.resolution;
            e.globalAlpha = this.worldAlpha, t.setBlendMode(this.blendMode), t.setContextTransform(i, this.roundPixels); for (var p = 0; p < 3; p++)
                for (var f = 0; f < 3; f++) { var g = 2 * f + 8 * p,
                        y = Math.max(1, a[f + 1] - a[f]),
                        v = Math.max(1, a[p + 5] - a[p + 4]),
                        b = Math.max(1, o[g + 10] - o[g]),
                        _ = Math.max(1, o[g + 11] - o[g + 1]);
                    e.drawImage(s, a[f], a[p + 4], y, v, o[g], o[g + 1], b, _) } } }; var _ = !1;
    y.a.prototype._cachedTint = 16777215, y.a.prototype._tintedCanvas = null, y.a.prototype._renderCanvas = function(t) { this.shader.uvMatrix && (this.shader.uvMatrix.update(), this.calculateUvs()), this.material._renderCanvas ? this.material._renderCanvas(t, this) : _ || (_ = !0, window.console) }, y.a.prototype._canvasPadding = null, Object.defineProperty(y.a.prototype, "canvasPadding", { get: function() { return null !== this._canvasPadding ? this._canvasPadding : h.b.MESH_CANVAS_PADDING }, set: function(t) { this._canvasPadding = t } }), v.d.prototype._renderCanvas = function(t) { this.autoUpdate && this.geometry.getBuffer("aVertexPosition").update(), this.shader.update && this.shader.update(), this.calculateUvs(), this.material._renderCanvas(t, this) }, v.f.prototype._renderCanvas = function(t) {
        (this.autoUpdate || this.geometry._width !== this.shader.texture.height) && (this.geometry._width = this.shader.texture.height, this.geometry.update()), this.shader.update && this.shader.update(), this.calculateUvs(), this.material._renderCanvas(t, this) }; var x, w = i(17),
        T = function() {
            function t(t) { this.renderer = t, this._svgMatrix = null, this._tempMatrix = new o.d } return t.prototype._calcCanvasStyle = function(t, e) { var i; return t.texture ? t.texture.valid ? (i = m.getTintedPattern(t.texture, e), this.setPatternTransform(i, t.matrix || o.d.IDENTITY)) : i = "#808080" : i = "#" + ("00000" + (0 | e).toString(16)).substr(-6), i }, t.prototype.render = function(t) { var e = this.renderer,
                    i = e.context,
                    n = t.worldAlpha,
                    r = t.transform.worldTransform;
                e.setContextTransform(r), e.setBlendMode(t.blendMode); for (var s, a, h = t.geometry.graphicsData, u = (t.tint >> 16 & 255) / 255, l = (t.tint >> 8 & 255) / 255, c = (255 & t.tint) / 255, d = 0; d < h.length; d++) { var p = h[d],
                        f = p.shape,
                        m = p.fillStyle,
                        g = p.lineStyle,
                        y = 0 | p.fillStyle.color,
                        v = 0 | p.lineStyle.color; if (p.matrix && e.setContextTransform(r.copyTo(this._tempMatrix).append(p.matrix)), m.visible) { var b = ((y >> 16 & 255) / 255 * u * 255 << 16) + ((y >> 8 & 255) / 255 * l * 255 << 8) + (255 & y) / 255 * c * 255;
                        s = this._calcCanvasStyle(m, b) } if (g.visible) { var _ = ((v >> 16 & 255) / 255 * u * 255 << 16) + ((v >> 8 & 255) / 255 * l * 255 << 8) + (255 & v) / 255 * c * 255;
                        a = this._calcCanvasStyle(g, _) } if (i.lineWidth = g.width, i.lineCap = g.cap, i.lineJoin = g.join, i.miterLimit = g.miterLimit, p.type === o.l.POLY) { i.beginPath(); var x = (A = f).points,
                            w = p.holes,
                            T = void 0,
                            S = void 0,
                            E = void 0,
                            P = void 0;
                        i.moveTo(x[0], x[1]); for (var C = 2; C < x.length; C += 2) i.lineTo(x[C], x[C + 1]); if (A.closeStroke && i.closePath(), w.length > 0) { T = 0, E = x[0], P = x[1]; for (C = 2; C + 2 < x.length; C += 2) T += (x[C] - E) * (x[C + 3] - P) - (x[C + 2] - E) * (x[C + 1] - P); for (var O = 0; O < w.length; O++)
                                if (x = w[O].shape.points) { S = 0, E = x[0], P = x[1]; for (C = 2; C + 2 < x.length; C += 2) S += (x[C] - E) * (x[C + 3] - P) - (x[C + 2] - E) * (x[C + 1] - P); if (S * T < 0) { i.moveTo(x[0], x[1]); for (C = 2; C < x.length; C += 2) i.lineTo(x[C], x[C + 1]) } else { i.moveTo(x[x.length - 2], x[x.length - 1]); for (C = x.length - 4; C >= 0; C -= 2) i.lineTo(x[C], x[C + 1]) } w[O].shape.closeStroke && i.closePath() } } m.visible && (i.globalAlpha = m.alpha * n, i.fillStyle = s, i.fill()), g.visible && (i.globalAlpha = g.alpha * n, i.strokeStyle = a, i.stroke()) } else if (p.type === o.l.RECT) { var A = f;
                        m.visible && (i.globalAlpha = m.alpha * n, i.fillStyle = s, i.fillRect(A.x, A.y, A.width, A.height)), g.visible && (i.globalAlpha = g.alpha * n, i.strokeStyle = a, i.strokeRect(A.x, A.y, A.width, A.height)) } else if (p.type === o.l.CIRC) { A = f;
                        i.beginPath(), i.arc(A.x, A.y, A.radius, 0, 2 * Math.PI), i.closePath(), m.visible && (i.globalAlpha = m.alpha * n, i.fillStyle = s, i.fill()), g.visible && (i.globalAlpha = g.alpha * n, i.strokeStyle = a, i.stroke()) } else if (p.type === o.l.ELIP) { var I = 2 * (A = f).width,
                            R = 2 * A.height,
                            M = A.x - I / 2,
                            L = A.y - R / 2;
                        i.beginPath(); var D = I / 2 * .5522848,
                            k = R / 2 * .5522848,
                            N = M + I,
                            F = L + R,
                            B = M + I / 2,
                            j = L + R / 2;
                        i.moveTo(M, j), i.bezierCurveTo(M, j - k, B - D, L, B, L), i.bezierCurveTo(B + D, L, N, j - k, N, j), i.bezierCurveTo(N, j + k, B + D, F, B, F), i.bezierCurveTo(B - D, F, M, j + k, M, j), i.closePath(), m.visible && (i.globalAlpha = m.alpha * n, i.fillStyle = s, i.fill()), g.visible && (i.globalAlpha = g.alpha * n, i.strokeStyle = a, i.stroke()) } else if (p.type === o.l.RREC) { var U = (A = f).x,
                            G = A.y,
                            X = A.width,
                            H = A.height,
                            z = A.radius,
                            V = Math.min(X, H) / 2 | 0;
                        z = z > V ? V : z, i.beginPath(), i.moveTo(U, G + z), i.lineTo(U, G + H - z), i.quadraticCurveTo(U, G + H, U + z, G + H), i.lineTo(U + X - z, G + H), i.quadraticCurveTo(U + X, G + H, U + X, G + H - z), i.lineTo(U + X, G + z), i.quadraticCurveTo(U + X, G, U + X - z, G), i.lineTo(U + z, G), i.quadraticCurveTo(U, G, U, G + z), i.closePath(), m.visible && (i.globalAlpha = m.alpha * n, i.fillStyle = s, i.fill()), g.visible && (i.globalAlpha = g.alpha * n, i.strokeStyle = a, i.stroke()) } } }, t.prototype.setPatternTransform = function(t, e) { if (!1 !== this._svgMatrix) { if (!this._svgMatrix) { var i = document.createElementNS("http://www.w3.org/2000/svg", "svg"); if (i && i.createSVGMatrix && (this._svgMatrix = i.createSVGMatrix()), !this._svgMatrix || !t.setTransform) return void(this._svgMatrix = !1) } this._svgMatrix.a = e.a, this._svgMatrix.b = e.b, this._svgMatrix.c = e.c, this._svgMatrix.d = e.d, this._svgMatrix.e = e.tx, this._svgMatrix.f = e.ty, t.setTransform(this._svgMatrix.inverse()) } }, t.prototype.destroy = function() { this.renderer = null, this._svgMatrix = null, this._tempMatrix = null }, t }(),
        S = new o.d;
    w.c.prototype.generateCanvasTexture = function(t, e) { void 0 === e && (e = 1); var i = this.getLocalBounds(),
            n = r.z.create({ width: i.width, height: i.height, scaleMode: t, resolution: e });
        x || (x = new f), this.transform.updateLocalTransform(), this.transform.localTransform.copyTo(S), S.invert(), S.tx -= i.x, S.ty -= i.y, x.render(this, n, !0, S); var s = r.G.from(n.baseTexture._canvasRenderTarget.canvas, { scaleMode: t }); return s.baseTexture.setResolution(e), s }, w.c.prototype.cachedGraphicsData = [], w.c.prototype._renderCanvas = function(t) {!0 !== this.isMask && (this.finishPoly(), t.plugins.graphics.render(this)) }; var E = i(12),
        P = new o.d,
        C = function() {
            function t(t) { this.renderer = t } return t.prototype.render = function(t) { var e = t._texture,
                    i = this.renderer,
                    n = i.context,
                    r = e._frame.width,
                    s = e._frame.height,
                    h = t.transform.worldTransform,
                    u = 0,
                    l = 0,
                    c = e.baseTexture.getDrawableSource(); if (!(e.orig.width <= 0 || e.orig.height <= 0) && e.valid && c && e.valid) { i.setBlendMode(t.blendMode, !0), i.context.globalAlpha = t.worldAlpha; var d = e.baseTexture.scaleMode === a.n.LINEAR;
                    i.smoothProperty && i.context[i.smoothProperty] !== d && (n[i.smoothProperty] = d), e.trim ? (u = e.trim.width / 2 + e.trim.x - t.anchor.x * e.orig.width, l = e.trim.height / 2 + e.trim.y - t.anchor.y * e.orig.height) : (u = (.5 - t.anchor.x) * e.orig.width, l = (.5 - t.anchor.y) * e.orig.height), e.rotate && (h.copyTo(P), h = P, o.n.matrixAppendRotationInv(h, e.rotate, u, l), u = 0, l = 0), u -= r / 2, l -= s / 2, i.setContextTransform(h, t.roundPixels, 1), t.roundPixels && (u |= 0, l |= 0); var p = e.baseTexture.resolution,
                        f = i._outerBlend;
                    f && (n.save(), n.beginPath(), n.rect(u * i.resolution, l * i.resolution, r * i.resolution, s * i.resolution), n.clip()), 16777215 !== t.tint ? (t._cachedTint === t.tint && t._tintedCanvas.tintId === t._texture._updateID || (t._cachedTint = t.tint, t._tintedCanvas = m.getTintedCanvas(t, t.tint)), n.drawImage(t._tintedCanvas, 0, 0, Math.floor(r * p), Math.floor(s * p), Math.floor(u * i.resolution), Math.floor(l * i.resolution), Math.floor(r * i.resolution), Math.floor(s * i.resolution))) : n.drawImage(c, e._frame.x * p, e._frame.y * p, Math.floor(r * p), Math.floor(s * p), Math.floor(u * i.resolution), Math.floor(l * i.resolution), Math.floor(r * i.resolution), Math.floor(s * i.resolution)), f && n.restore(), i.setBlendMode(a.b.NORMAL) } }, t.prototype.destroy = function() { this.renderer = null }, t }();
    E.a.prototype._tintedCanvas = null, E.a.prototype._renderCanvas = function(t) { t.plugins.sprite.render(this) }; var O = new o.j,
        A = function() {
            function t(t) { this.renderer = t } return t.prototype.image = function(t, e, i) { var n = new Image; return n.src = this.base64(t, e, i), n }, t.prototype.base64 = function(t, e, i) { return this.canvas(t).toDataURL(e, i) }, t.prototype.canvas = function(t) { var e, i, n, o, a = this.renderer;
                t && (o = t instanceof r.z ? t : a.generateTexture(t)), o ? (e = o.baseTexture._canvasRenderTarget.context, i = o.baseTexture._canvasRenderTarget.resolution, n = o.frame) : (e = a.rootContext, i = a.resolution, (n = O).width = this.renderer.width, n.height = this.renderer.height); var h = Math.floor(n.width * i + 1e-4),
                    u = Math.floor(n.height * i + 1e-4),
                    l = new s.CanvasRenderTarget(h, u, 1),
                    c = e.getImageData(n.x * i, n.y * i, h, u); return l.context.putImageData(c, 0, 0), l.canvas }, t.prototype.pixels = function(t) { var e, i, n, s, o = this.renderer; return t && (s = t instanceof r.z ? t : o.generateTexture(t)), s ? (e = s.baseTexture._canvasRenderTarget.context, i = s.baseTexture._canvasRenderTarget.resolution, n = s.frame) : (e = o.rootContext, (n = O).width = o.width, n.height = o.height), e.getImageData(0, 0, n.width * i, n.height * i).data }, t.prototype.destroy = function() { this.renderer = null }, t }();
    Object.defineProperty(f.prototype, "extract", { get: function() { return Object(s.deprecation)("v5.3.0", "CanvasRenderer#extract is deprecated, use CanvasRenderer#plugins.extract"), this.plugins.extract } }); var I = i(20),
        R = function(t, e) { return (R = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) })(t, e) };

    function M(t, e) { var i = t; if (e instanceof r.e) { var n = e.source,
                s = 0 === n.width ? i.canvas.width : Math.min(i.canvas.width, n.width),
                o = 0 === n.height ? i.canvas.height : Math.min(i.canvas.height, n.height); return i.ctx.drawImage(n, 0, 0, s, o, 0, 0, i.canvas.width, i.canvas.height), !0 } return !1 } var L = function(t) {
        function e(e) { var i = t.call(this, e) || this; return i.uploadHookHelper = i, i.canvas = document.createElement("canvas"), i.canvas.width = 16, i.canvas.height = 16, i.ctx = i.canvas.getContext("2d"), i.registerUploadHook(M), i } return function(t, e) {
            function i() { this.constructor = t } R(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i) }(e, t), e.prototype.destroy = function() { t.prototype.destroy.call(this), this.ctx = null, this.canvas = null }, e }(I.a);
    i(21).a.prototype._renderCanvas = function(t) { var e = this._texture; if (e.baseTexture.valid) { var i = t.context,
                n = this.worldTransform,
                r = e.baseTexture,
                o = r.getDrawableSource(),
                a = r.resolution,
                h = this.tilePosition.x / this.tileScale.x % e._frame.width * a,
                u = this.tilePosition.y / this.tileScale.y % e._frame.height * a; if (this._textureID !== this._texture._updateID || this._cachedTint !== this.tint) { this._textureID = this._texture._updateID; var l = new s.CanvasRenderTarget(e._frame.width, e._frame.height, a);
                16777215 !== this.tint ? (this._tintedCanvas = m.getTintedCanvas(this, this.tint), l.context.drawImage(this._tintedCanvas, 0, 0)) : l.context.drawImage(o, -e._frame.x * a, -e._frame.y * a), this._cachedTint = this.tint, this._canvasPattern = l.context.createPattern(l.canvas, "repeat") } i.globalAlpha = this.worldAlpha, t.setBlendMode(this.blendMode), t.setContextTransform(n), i.fillStyle = this._canvasPattern, i.scale(this.tileScale.x / a, this.tileScale.y / a); var c = this.anchor.x * -this._width,
                d = this.anchor.y * -this._height;
            this.uvRespectAnchor ? (i.translate(h, u), i.fillRect(-h + c, -u + d, this._width / this.tileScale.x * a, this._height / this.tileScale.y * a)) : (i.translate(h + c, u + d), i.fillRect(-h, -u, this._width / this.tileScale.x * a, this._height / this.tileScale.y * a)) } }, i(19).a.prototype.renderCanvas = function(t) { if (this.visible && !(this.worldAlpha <= 0) && this.children.length && this.renderable) { var e = t.context,
                i = this.worldTransform,
                n = !0,
                r = 0,
                s = 0,
                o = 0,
                a = 0;
            t.setBlendMode(this.blendMode), e.globalAlpha = this.worldAlpha, this.displayObjectUpdateTransform(); for (var h = 0; h < this.children.length; ++h) { var u = this.children[h]; if (u.visible && u._texture.valid) { var l = u._texture.frame; if (e.globalAlpha = this.worldAlpha * u.alpha, u.rotation % (2 * Math.PI) == 0) n && (t.setContextTransform(i, !1, 1), n = !1), r = u.anchor.x * (-l.width * u.scale.x) + u.position.x + .5, s = u.anchor.y * (-l.height * u.scale.y) + u.position.y + .5, o = l.width * u.scale.x, a = l.height * u.scale.y;
                    else { n || (n = !0), u.displayObjectUpdateTransform(); var c = u.worldTransform;
                        t.setContextTransform(c, this.roundPixels, 1), r = u.anchor.x * -l.width + .5, s = u.anchor.y * -l.height + .5, o = l.width, a = l.height } var d = u._texture.baseTexture.resolution;
                    e.drawImage(u._texture.baseTexture.getDrawableSource(), l.x * d, l.y * d, l.width * d, l.height * d, r * t.resolution, s * t.resolution, o * t.resolution, a * t.resolution) } } } }; var D = i(7);
    D.b.prototype._renderCanvas = function(t) {}, D.b.prototype.renderCanvas = function(t) { if (this.visible && !(this.worldAlpha <= 0) && this.renderable) { this._mask && t.maskManager.pushMask(this._mask), this._renderCanvas(t); for (var e = 0, i = this.children.length; e < i; ++e) this.children[e].renderCanvas(t);
            this._mask && t.maskManager.popMask(t) } }, D.c.prototype.renderCanvas = function(t) {}, i(14).b.prototype._renderCanvas = function(t) { this._autoResolution && this._resolution !== t.resolution && (this._resolution = t.resolution, this.dirty = !0), this.updateText(!0), E.a.prototype._renderCanvas.call(this, t) }, f.registerPlugin("accessibility", n.AccessibilityManager), f.registerPlugin("extract", A), f.registerPlugin("graphics", T), f.registerPlugin("interaction", n.InteractionManager), f.registerPlugin("mesh", b), f.registerPlugin("prepare", L), f.registerPlugin("sprite", C) }, function(t, e, i) { "use strict";
    i.r(e), i.d(e, "BaseTextureCache", (function() { return U })), i.d(e, "CanvasRenderTarget", (function() { return H })), i.d(e, "DATA_URI", (function() { return W })), i.d(e, "ProgramCache", (function() { return B })), i.d(e, "TextureCache", (function() { return j })), i.d(e, "clearTextureCache", (function() { return X })), i.d(e, "correctBlendMode", (function() { return x })), i.d(e, "createIndicesForQuads", (function() { return E })), i.d(e, "decomposeDataUri", (function() { return Y })), i.d(e, "deprecation", (function() { return F })), i.d(e, "destroyTextureCache", (function() { return G })), i.d(e, "determineCrossOrigin", (function() { return K })), i.d(e, "getBufferType", (function() { return P })), i.d(e, "getResolutionOfUrl", (function() { return q })), i.d(e, "hex2rgb", (function() { return g })), i.d(e, "hex2string", (function() { return y })), i.d(e, "interleaveTypedArrays", (function() { return O })), i.d(e, "isPow2", (function() { return I })), i.d(e, "isWebGLSupported", (function() { return m })), i.d(e, "log2", (function() { return R })), i.d(e, "nextPow2", (function() { return A })), i.d(e, "premultiplyBlendMode", (function() { return _ })), i.d(e, "premultiplyRgba", (function() { return w })), i.d(e, "premultiplyTint", (function() { return T })), i.d(e, "premultiplyTintToRgba", (function() { return S })), i.d(e, "removeItems", (function() { return M })), i.d(e, "rgb2hex", (function() { return b })), i.d(e, "sayHello", (function() { return f })), i.d(e, "sign", (function() { return L })), i.d(e, "skipHello", (function() { return p })), i.d(e, "string2hex", (function() { return v })), i.d(e, "trimCanvas", (function() { return z })), i.d(e, "uid", (function() { return k })); var n = i(6);
    i.d(e, "isMobile", (function() { return n.a })); var r = i(28),
        s = i.n(r);
    i.d(e, "EventEmitter", (function() { return s.a })); var o = i(29),
        a = i.n(o);
    i.d(e, "earcut", (function() { return a.a })); var h = i(23),
        u = i.n(h);
    i.d(e, "url", (function() { return u.a })); var l = i(2);
    n.b.RETINA_PREFIX = /@([0-9\.]+)x/, n.b.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT = !0; var c, d = !1;

    function p() { d = !0 }

    function f(t) { var e; if (!d) { if (navigator.userAgent.toLowerCase().indexOf("chrome") > -1) { var i = ["\n %c %c %c PixiJS 5.3.3 - ✰ " + t + " ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n", "background: #ff66a5; padding:5px 0;", "background: #ff66a5; padding:5px 0;", "color: #ff66a5; background: #030307; padding:5px 0;", "background: #ff66a5; padding:5px 0;", "background: #ffc3dc; padding:5px 0;", "background: #ff66a5; padding:5px 0;", "color: #ff2424; background: #fff; padding:5px 0;", "color: #ff2424; background: #fff; padding:5px 0;", "color: #ff2424; background: #fff; padding:5px 0;"];
                (e = window.console).log.apply(e, i) } else window.console && window.console.log("PixiJS 5.3.3 - " + t + " - http://www.pixijs.com/");
            d = !0 } }

    function m() { return void 0 === c && (c = function() { var t = { stencil: !0, failIfMajorPerformanceCaveat: n.b.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT }; try { if (!window.WebGLRenderingContext) return !1; var e = document.createElement("canvas"),
                    i = e.getContext("webgl", t) || e.getContext("experimental-webgl", t),
                    r = !(!i || !i.getContextAttributes().stencil); if (i) { var s = i.getExtension("WEBGL_lose_context");
                    s && s.loseContext() } return i = null, r } catch (o) { return !1 } }()), c }

    function g(t, e) { return void 0 === e && (e = []), e[0] = (t >> 16 & 255) / 255, e[1] = (t >> 8 & 255) / 255, e[2] = (255 & t) / 255, e }

    function y(t) { var e = t.toString(16); return "#" + (e = "000000".substr(0, 6 - e.length) + e) }

    function v(t) { return "string" == typeof t && "#" === t[0] && (t = t.substr(1)), parseInt(t, 16) }

    function b(t) { return (255 * t[0] << 16) + (255 * t[1] << 8) + (255 * t[2] | 0) } var _ = function() { for (var t = [], e = [], i = 0; i < 32; i++) t[i] = i, e[i] = i;
        t[l.b.NORMAL_NPM] = l.b.NORMAL, t[l.b.ADD_NPM] = l.b.ADD, t[l.b.SCREEN_NPM] = l.b.SCREEN, e[l.b.NORMAL] = l.b.NORMAL_NPM, e[l.b.ADD] = l.b.ADD_NPM, e[l.b.SCREEN] = l.b.SCREEN_NPM; var n = []; return n.push(e), n.push(t), n }();

    function x(t, e) { return _[e ? 1 : 0][t] }

    function w(t, e, i, n) { return i = i || new Float32Array(4), n || n === undefined ? (i[0] = t[0] * e, i[1] = t[1] * e, i[2] = t[2] * e) : (i[0] = t[0], i[1] = t[1], i[2] = t[2]), i[3] = e, i }

    function T(t, e) { if (1 === e) return (255 * e << 24) + t; if (0 === e) return 0; var i = t >> 16 & 255,
            n = t >> 8 & 255,
            r = 255 & t; return (255 * e << 24) + ((i = i * e + .5 | 0) << 16) + ((n = n * e + .5 | 0) << 8) + (r = r * e + .5 | 0) }

    function S(t, e, i, n) { return (i = i || new Float32Array(4))[0] = (t >> 16 & 255) / 255, i[1] = (t >> 8 & 255) / 255, i[2] = (255 & t) / 255, (n || n === undefined) && (i[0] *= e, i[1] *= e, i[2] *= e), i[3] = e, i }

    function E(t, e) { void 0 === e && (e = null); var i = 6 * t; if ((e = e || new Uint16Array(i)).length !== i) throw new Error("Out buffer length is incorrect, got " + e.length + " and expected " + i); for (var n = 0, r = 0; n < i; n += 6, r += 4) e[n + 0] = r + 0, e[n + 1] = r + 1, e[n + 2] = r + 2, e[n + 3] = r + 0, e[n + 4] = r + 2, e[n + 5] = r + 3; return e }

    function P(t) { if (4 === t.BYTES_PER_ELEMENT) return t instanceof Float32Array ? "Float32Array" : t instanceof Uint32Array ? "Uint32Array" : "Int32Array"; if (2 === t.BYTES_PER_ELEMENT) { if (t instanceof Uint16Array) return "Uint16Array" } else if (1 === t.BYTES_PER_ELEMENT && t instanceof Uint8Array) return "Uint8Array"; return null } var C = { Float32Array: Float32Array, Uint32Array: Uint32Array, Int32Array: Int32Array, Uint8Array: Uint8Array };

    function O(t, e) { for (var i = 0, n = 0, r = {}, s = 0; s < t.length; s++) n += e[s], i += t[s].length; var o = new ArrayBuffer(4 * i),
            a = null,
            h = 0; for (s = 0; s < t.length; s++) { var u = e[s],
                l = t[s],
                c = P(l);
            r[c] || (r[c] = new C[c](o)), a = r[c]; for (var d = 0; d < l.length; d++) { a[(d / u | 0) * n + h + d % u] = l[d] } h += u } return new Float32Array(o) }

    function A(t) { return t += 0 === t ? 1 : 0, --t, t |= t >>> 1, t |= t >>> 2, t |= t >>> 4, t |= t >>> 8, (t |= t >>> 16) + 1 }

    function I(t) { return !(t & t - 1 || !t) }

    function R(t) { var e = (t > 65535 ? 1 : 0) << 4,
            i = ((t >>>= e) > 255 ? 1 : 0) << 3; return e |= i, e |= i = ((t >>>= i) > 15 ? 1 : 0) << 2, (e |= i = ((t >>>= i) > 3 ? 1 : 0) << 1) | (t >>>= i) >> 1 }

    function M(t, e, i) { var n, r = t.length; if (!(e >= r || 0 === i)) { var s = r - (i = e + i > r ? r - e : i); for (n = e; n < s; ++n) t[n] = t[n + i];
            t.length = s } }

    function L(t) { return 0 === t ? 0 : t < 0 ? -1 : 1 } var D = 0;

    function k() { return ++D } var N = {};

    function F(t, e, i) { if (void 0 === i && (i = 3), !N[e]) { var n = (new Error).stack;
            void 0 === n || (n = n.split("\n").splice(i).join("\n"), console.groupCollapsed), N[e] = !0 } } var B = {},
        j = Object.create(null),
        U = Object.create(null);

    function G() { var t; for (t in j) j[t].destroy(); for (t in U) U[t].destroy() }

    function X() { var t; for (t in j) delete j[t]; for (t in U) delete U[t] } var H = function() {
        function t(t, e, i) { this.canvas = document.createElement("canvas"), this.context = this.canvas.getContext("2d"), this.resolution = i || n.b.RESOLUTION, this.resize(t, e) } return t.prototype.clear = function() { this.context.setTransform(1, 0, 0, 1, 0, 0), this.context.clearRect(0, 0, this.canvas.width, this.canvas.height) }, t.prototype.resize = function(t, e) { this.canvas.width = t * this.resolution, this.canvas.height = e * this.resolution }, t.prototype.destroy = function() { this.context = null, this.canvas = null }, Object.defineProperty(t.prototype, "width", { get: function() { return this.canvas.width }, set: function(t) { this.canvas.width = t }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "height", { get: function() { return this.canvas.height }, set: function(t) { this.canvas.height = t }, enumerable: !1, configurable: !0 }), t }();

    function z(t) { var e, i, n, r = t.width,
            s = t.height,
            o = t.getContext("2d"),
            a = o.getImageData(0, 0, r, s).data,
            h = a.length,
            u = { top: null, left: null, right: null, bottom: null },
            l = null; for (e = 0; e < h; e += 4) 0 !== a[e + 3] && (i = e / 4 % r, n = ~~(e / 4 / r), null === u.top && (u.top = n), (null === u.left || i < u.left) && (u.left = i), (null === u.right || u.right < i) && (u.right = i + 1), (null === u.bottom || u.bottom < n) && (u.bottom = n)); return null !== u.top && (r = u.right - u.left, s = u.bottom - u.top + 1, l = o.getImageData(u.left, u.top, r, s)), { height: s, width: r, data: l } } var V, W = /^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;

    function Y(t) { var e = W.exec(t); return e ? { mediaType: e[1] ? e[1].toLowerCase() : undefined, subType: e[2] ? e[2].toLowerCase() : undefined, charset: e[3] ? e[3].toLowerCase() : undefined, encoding: e[4] ? e[4].toLowerCase() : undefined, data: e[5] } : undefined }

    function K(t, e) { if (void 0 === e && (e = window.location), 0 === t.indexOf("data:")) return "";
        e = e || window.location, V || (V = document.createElement("a")), V.href = t; var i = Object(h.parse)(V.href),
            n = !i.port && "" === e.port || i.port === e.port; return i.hostname === e.hostname && n && i.protocol === e.protocol ? "" : "anonymous" }

    function q(t, e) { var i = n.b.RETINA_PREFIX.exec(t); return i ? parseFloat(i[1]) : e !== undefined ? e : 1 } }, function(t, e, i) { "use strict"; var n, r, s, o, a, h, u, l, c, d, p, f, m, g, y, v, b;
    i.d(e, "a", (function() { return f })), i.d(e, "b", (function() { return o })), i.d(e, "c", (function() { return s })), i.d(e, "d", (function() { return m })), i.d(e, "e", (function() { return a })), i.d(e, "f", (function() { return n })), i.d(e, "g", (function() { return h })), i.d(e, "h", (function() { return g })), i.d(e, "i", (function() { return v })), i.d(e, "j", (function() { return p })), i.d(e, "k", (function() { return b })), i.d(e, "l", (function() { return y })), i.d(e, "m", (function() { return r })), i.d(e, "n", (function() { return c })), i.d(e, "o", (function() { return u })), i.d(e, "p", (function() { return l })), i.d(e, "q", (function() { return d })),
        function(t) { t[t.WEBGL_LEGACY = 0] = "WEBGL_LEGACY", t[t.WEBGL = 1] = "WEBGL", t[t.WEBGL2 = 2] = "WEBGL2" }(n || (n = {})),
        function(t) { t[t.UNKNOWN = 0] = "UNKNOWN", t[t.WEBGL = 1] = "WEBGL", t[t.CANVAS = 2] = "CANVAS" }(r || (r = {})),
        function(t) { t[t.COLOR = 16384] = "COLOR", t[t.DEPTH = 256] = "DEPTH", t[t.STENCIL = 1024] = "STENCIL" }(s || (s = {})),
        function(t) { t[t.NORMAL = 0] = "NORMAL", t[t.ADD = 1] = "ADD", t[t.MULTIPLY = 2] = "MULTIPLY", t[t.SCREEN = 3] = "SCREEN", t[t.OVERLAY = 4] = "OVERLAY", t[t.DARKEN = 5] = "DARKEN", t[t.LIGHTEN = 6] = "LIGHTEN", t[t.COLOR_DODGE = 7] = "COLOR_DODGE", t[t.COLOR_BURN = 8] = "COLOR_BURN", t[t.HARD_LIGHT = 9] = "HARD_LIGHT", t[t.SOFT_LIGHT = 10] = "SOFT_LIGHT", t[t.DIFFERENCE = 11] = "DIFFERENCE", t[t.EXCLUSION = 12] = "EXCLUSION", t[t.HUE = 13] = "HUE", t[t.SATURATION = 14] = "SATURATION", t[t.COLOR = 15] = "COLOR", t[t.LUMINOSITY = 16] = "LUMINOSITY", t[t.NORMAL_NPM = 17] = "NORMAL_NPM", t[t.ADD_NPM = 18] = "ADD_NPM", t[t.SCREEN_NPM = 19] = "SCREEN_NPM", t[t.NONE = 20] = "NONE", t[t.SRC_OVER = 0] = "SRC_OVER", t[t.SRC_IN = 21] = "SRC_IN", t[t.SRC_OUT = 22] = "SRC_OUT", t[t.SRC_ATOP = 23] = "SRC_ATOP", t[t.DST_OVER = 24] = "DST_OVER", t[t.DST_IN = 25] = "DST_IN", t[t.DST_OUT = 26] = "DST_OUT", t[t.DST_ATOP = 27] = "DST_ATOP", t[t.ERASE = 26] = "ERASE", t[t.SUBTRACT = 28] = "SUBTRACT", t[t.XOR = 29] = "XOR" }(o || (o = {})),
        function(t) { t[t.POINTS = 0] = "POINTS", t[t.LINES = 1] = "LINES", t[t.LINE_LOOP = 2] = "LINE_LOOP", t[t.LINE_STRIP = 3] = "LINE_STRIP", t[t.TRIANGLES = 4] = "TRIANGLES", t[t.TRIANGLE_STRIP = 5] = "TRIANGLE_STRIP", t[t.TRIANGLE_FAN = 6] = "TRIANGLE_FAN" }(a || (a = {})),
        function(t) { t[t.RGBA = 6408] = "RGBA", t[t.RGB = 6407] = "RGB", t[t.ALPHA = 6406] = "ALPHA", t[t.LUMINANCE = 6409] = "LUMINANCE", t[t.LUMINANCE_ALPHA = 6410] = "LUMINANCE_ALPHA", t[t.DEPTH_COMPONENT = 6402] = "DEPTH_COMPONENT", t[t.DEPTH_STENCIL = 34041] = "DEPTH_STENCIL" }(h || (h = {})),
        function(t) { t[t.TEXTURE_2D = 3553] = "TEXTURE_2D", t[t.TEXTURE_CUBE_MAP = 34067] = "TEXTURE_CUBE_MAP", t[t.TEXTURE_2D_ARRAY = 35866] = "TEXTURE_2D_ARRAY", t[t.TEXTURE_CUBE_MAP_POSITIVE_X = 34069] = "TEXTURE_CUBE_MAP_POSITIVE_X", t[t.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070] = "TEXTURE_CUBE_MAP_NEGATIVE_X", t[t.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071] = "TEXTURE_CUBE_MAP_POSITIVE_Y", t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072] = "TEXTURE_CUBE_MAP_NEGATIVE_Y", t[t.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073] = "TEXTURE_CUBE_MAP_POSITIVE_Z", t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074] = "TEXTURE_CUBE_MAP_NEGATIVE_Z" }(u || (u = {})),
        function(t) { t[t.UNSIGNED_BYTE = 5121] = "UNSIGNED_BYTE", t[t.UNSIGNED_SHORT = 5123] = "UNSIGNED_SHORT", t[t.UNSIGNED_SHORT_5_6_5 = 33635] = "UNSIGNED_SHORT_5_6_5", t[t.UNSIGNED_SHORT_4_4_4_4 = 32819] = "UNSIGNED_SHORT_4_4_4_4", t[t.UNSIGNED_SHORT_5_5_5_1 = 32820] = "UNSIGNED_SHORT_5_5_5_1", t[t.FLOAT = 5126] = "FLOAT", t[t.HALF_FLOAT = 36193] = "HALF_FLOAT" }(l || (l = {})),
        function(t) { t[t.NEAREST = 0] = "NEAREST", t[t.LINEAR = 1] = "LINEAR" }(c || (c = {})),
        function(t) { t[t.CLAMP = 33071] = "CLAMP", t[t.REPEAT = 10497] = "REPEAT", t[t.MIRRORED_REPEAT = 33648] = "MIRRORED_REPEAT" }(d || (d = {})),
        function(t) { t[t.OFF = 0] = "OFF", t[t.POW2 = 1] = "POW2", t[t.ON = 2] = "ON" }(p || (p = {})),
        function(t) { t[t.NPM = 0] = "NPM", t[t.UNPACK = 1] = "UNPACK", t[t.PMA = 2] = "PMA", t[t.NO_PREMULTIPLIED_ALPHA = 0] = "NO_PREMULTIPLIED_ALPHA", t[t.PREMULTIPLY_ON_UPLOAD = 1] = "PREMULTIPLY_ON_UPLOAD", t[t.PREMULTIPLY_ALPHA = 2] = "PREMULTIPLY_ALPHA" }(f || (f = {})),
        function(t) { t[t.NO = 0] = "NO", t[t.YES = 1] = "YES", t[t.AUTO = 2] = "AUTO", t[t.BLEND = 0] = "BLEND", t[t.CLEAR = 1] = "CLEAR", t[t.BLIT = 2] = "BLIT" }(m || (m = {})),
        function(t) { t[t.AUTO = 0] = "AUTO", t[t.MANUAL = 1] = "MANUAL" }(g || (g = {})),
        function(t) { t.LOW = "lowp", t.MEDIUM = "mediump", t.HIGH = "highp" }(y || (y = {})),
        function(t) { t[t.NONE = 0] = "NONE", t[t.SCISSOR = 1] = "SCISSOR", t[t.STENCIL = 2] = "STENCIL", t[t.SPRITE = 3] = "SPRITE" }(v || (v = {})),
        function(t) { t[t.NONE = 0] = "NONE", t[t.LOW = 2] = "LOW", t[t.MEDIUM = 4] = "MEDIUM", t[t.HIGH = 8] = "HIGH" }(b || (b = {})) }, function(t, e, i) { "use strict";
    (function(t) { var i = function() { this._tweens = {}, this._tweensAddedDuringUpdate = {} };
        i.prototype = { getAll: function() { return Object.keys(this._tweens).map(function(t) { return this._tweens[t] }.bind(this)) }, removeAll: function() { this._tweens = {} }, add: function(t) { this._tweens[t.getId()] = t, this._tweensAddedDuringUpdate[t.getId()] = t }, remove: function(t) { delete this._tweens[t.getId()], delete this._tweensAddedDuringUpdate[t.getId()] }, update: function(t, e) { var i = Object.keys(this._tweens); if (0 === i.length) return !1; for (t = t !== undefined ? t : r.now(); i.length > 0;) { this._tweensAddedDuringUpdate = {}; for (var n = 0; n < i.length; n++) { var s = this._tweens[i[n]];
                        s && !1 === s.update(t) && (s._isPlaying = !1, e || delete this._tweens[i[n]]) } i = Object.keys(this._tweensAddedDuringUpdate) } return !0 } }; var n, r = new i;
        r.Group = i, r._nextId = 0, r.nextId = function() { return r._nextId++ }, "undefined" == typeof self && void 0 !== t && t.hrtime ? r.now = function() { var e = t.hrtime(); return 1e3 * e[0] + e[1] / 1e6 } : "undefined" != typeof self && self.performance !== undefined && self.performance.now !== undefined ? r.now = self.performance.now.bind(self.performance) : Date.now !== undefined ? r.now = Date.now : r.now = function() { return (new Date).getTime() }, r.Tween = function(t, e) { this._isPaused = !1, this._pauseStart = null, this._object = t, this._valuesStart = {}, this._valuesEnd = {}, this._valuesStartRepeat = {}, this._duration = 1e3, this._repeat = 0, this._repeatDelayTime = undefined, this._yoyo = !1, this._isPlaying = !1, this._reversed = !1, this._delayTime = 0, this._startTime = null, this._easingFunction = r.Easing.Linear.None, this._interpolationFunction = r.Interpolation.Linear, this._chainedTweens = [], this._onStartCallback = null, this._onStartCallbackFired = !1, this._onUpdateCallback = null, this._onRepeatCallback = null, this._onCompleteCallback = null, this._onStopCallback = null, this._group = e || r, this._id = r.nextId() }, r.Tween.prototype = { getId: function() { return this._id }, isPlaying: function() { return this._isPlaying }, isPaused: function() { return this._isPaused }, to: function(t, e) { return this._valuesEnd = JSON.parse(JSON.stringify(t)), e !== undefined && (this._duration = e), this }, duration: function(t) { return this._duration = t, this }, start: function(t) { return this._group.add(this), this._isPlaying = !0, this._isPaused = !1, this._onStartCallbackFired = !1, this._startTime = t !== undefined ? "string" == typeof t ? r.now() + parseFloat(t) : t : r.now(), this._startTime += this._delayTime,
                    function e(t, i, n, r) { for (var s in n) { if (n[s] instanceof Array) { if (0 === n[s].length) continue;
                                n[s] = [t[s]].concat(n[s]) } t[s] !== undefined && (n[s] instanceof Object ? (i[s] = JSON.parse(JSON.stringify(t[s])), r[s] = {}, e(t[s], i[s], n[s], r[s])) : ("undefined" == typeof i[s] && (i[s] = t[s]), i[s] instanceof Array == !1 && (i[s] *= 1), r[s] = i[s] || 0)) } }(this._object, this._valuesStart, this._valuesEnd, this._valuesStartRepeat), this }, stop: function() { return this._isPlaying ? (this._group.remove(this), this._isPlaying = !1, this._isPaused = !1, null !== this._onStopCallback && this._onStopCallback(this._object), this.stopChainedTweens(), this) : this }, end: function() { return this.update(Infinity), this }, pause: function(t) { return this._isPaused || !this._isPlaying || (this._isPaused = !0, this._pauseStart = t === undefined ? r.now() : t, this._group.remove(this)), this }, resume: function(t) { return this._isPaused && this._isPlaying ? (this._isPaused = !1, this._startTime += (t === undefined ? r.now() : t) - this._pauseStart, this._pauseStart = 0, this._group.add(this), this) : this }, stopChainedTweens: function() { for (var t = 0, e = this._chainedTweens.length; t < e; t++) this._chainedTweens[t].stop() }, group: function(t) { return this._group = t, this }, delay: function(t) { return this._delayTime = t, this }, repeat: function(t) { return this._repeat = t, this }, repeatDelay: function(t) { return this._repeatDelayTime = t, this }, yoyo: function(t) { return this._yoyo = t, this }, easing: function(t) { return this._easingFunction = t, this }, interpolation: function(t) { return this._interpolationFunction = t, this }, chain: function() { return this._chainedTweens = arguments, this }, onStart: function(t) { return this._onStartCallback = t, this }, onUpdate: function(t) { return this._onUpdateCallback = t, this }, onRepeat: function(t) { return this._onRepeatCallback = t, this }, onComplete: function(t) { return this._onCompleteCallback = t, this }, onStop: function(t) { return this._onStopCallback = t, this }, update: function(t) { var e, i, n; if (t < this._startTime) return !0; if (!1 === this._onStartCallbackFired && (null !== this._onStartCallback && this._onStartCallback(this._object), this._onStartCallbackFired = !0), i = (t - this._startTime) / this._duration, i = 0 === this._duration || i > 1 ? 1 : i, n = this._easingFunction(i), function a(t, e, i, n, r) { for (var s in i)
                            if (e[s] !== undefined) { var o = e[s] || 0,
                                    h = i[s];
                                h instanceof Array ? t[s] = r(h, n) : h instanceof Object ? a(t[s], o, h, n, r) : ("string" == typeof h && (h = "+" === h.charAt(0) || "-" === h.charAt(0) ? o + parseFloat(h) : parseFloat(h)), "number" == typeof h && (t[s] = o + (h - o) * n)) } }(this._object, this._valuesStart, this._valuesEnd, n, this._interpolationFunction), null !== this._onUpdateCallback && this._onUpdateCallback(this._object, i), 1 === i) { if (this._repeat > 0) { for (e in isFinite(this._repeat) && this._repeat--, this._valuesStartRepeat) { if ("string" == typeof this._valuesEnd[e] && (this._valuesStartRepeat[e] = this._valuesStartRepeat[e] + parseFloat(this._valuesEnd[e])), this._yoyo) { var r = this._valuesStartRepeat[e];
                                this._valuesStartRepeat[e] = this._valuesEnd[e], this._valuesEnd[e] = r } this._valuesStart[e] = this._valuesStartRepeat[e] } return this._yoyo && (this._reversed = !this._reversed), this._repeatDelayTime !== undefined ? this._startTime = t + this._repeatDelayTime : this._startTime = t + this._delayTime, null !== this._onRepeatCallback && this._onRepeatCallback(this._object), !0 } null !== this._onCompleteCallback && this._onCompleteCallback(this._object); for (var s = 0, o = this._chainedTweens.length; s < o; s++) this._chainedTweens[s].start(this._startTime + this._duration); return !1 } return !0 } }, r.Easing = { Linear: { None: function(t) { return t } }, Quadratic: { In: function(t) { return t * t }, Out: function(t) { return t * (2 - t) }, InOut: function(t) { return (t *= 2) < 1 ? .5 * t * t : -.5 * (--t * (t - 2) - 1) } }, Cubic: { In: function(t) { return t * t * t }, Out: function(t) { return --t * t * t + 1 }, InOut: function(t) { return (t *= 2) < 1 ? .5 * t * t * t : .5 * ((t -= 2) * t * t + 2) } }, Quartic: { In: function(t) { return t * t * t * t }, Out: function(t) { return 1 - --t * t * t * t }, InOut: function(t) { return (t *= 2) < 1 ? .5 * t * t * t * t : -.5 * ((t -= 2) * t * t * t - 2) } }, Quintic: { In: function(t) { return t * t * t * t * t }, Out: function(t) { return --t * t * t * t * t + 1 }, InOut: function(t) { return (t *= 2) < 1 ? .5 * t * t * t * t * t : .5 * ((t -= 2) * t * t * t * t + 2) } }, Sinusoidal: { In: function(t) { return 1 - Math.cos(t * Math.PI / 2) }, Out: function(t) { return Math.sin(t * Math.PI / 2) }, InOut: function(t) { return .5 * (1 - Math.cos(Math.PI * t)) } }, Exponential: { In: function(t) { return 0 === t ? 0 : Math.pow(1024, t - 1) }, Out: function(t) { return 1 === t ? 1 : 1 - Math.pow(2, -10 * t) }, InOut: function(t) { return 0 === t ? 0 : 1 === t ? 1 : (t *= 2) < 1 ? .5 * Math.pow(1024, t - 1) : .5 * (2 - Math.pow(2, -10 * (t - 1))) } }, Circular: { In: function(t) { return 1 - Math.sqrt(1 - t * t) }, Out: function(t) { return Math.sqrt(1 - --t * t) }, InOut: function(t) { return (t *= 2) < 1 ? -.5 * (Math.sqrt(1 - t * t) - 1) : .5 * (Math.sqrt(1 - (t -= 2) * t) + 1) } }, Elastic: { In: function(t) { return 0 === t ? 0 : 1 === t ? 1 : -Math.pow(2, 10 * (t - 1)) * Math.sin(5 * (t - 1.1) * Math.PI) }, Out: function(t) { return 0 === t ? 0 : 1 === t ? 1 : Math.pow(2, -10 * t) * Math.sin(5 * (t - .1) * Math.PI) + 1 }, InOut: function(t) { return 0 === t ? 0 : 1 === t ? 1 : (t *= 2) < 1 ? -.5 * Math.pow(2, 10 * (t - 1)) * Math.sin(5 * (t - 1.1) * Math.PI) : .5 * Math.pow(2, -10 * (t - 1)) * Math.sin(5 * (t - 1.1) * Math.PI) + 1 } }, Back: { In: function(t) { var e = 1.70158; return t * t * ((e + 1) * t - e) }, Out: function(t) { var e = 1.70158; return --t * t * ((e + 1) * t + e) + 1 }, InOut: function(t) { var e = 2.5949095; return (t *= 2) < 1 ? t * t * ((e + 1) * t - e) * .5 : .5 * ((t -= 2) * t * ((e + 1) * t + e) + 2) } }, Bounce: { In: function(t) { return 1 - r.Easing.Bounce.Out(1 - t) }, Out: function(t) { return t < 1 / 2.75 ? 7.5625 * t * t : t < 2 / 2.75 ? 7.5625 * (t -= 1.5 / 2.75) * t + .75 : t < 2.5 / 2.75 ? 7.5625 * (t -= 2.25 / 2.75) * t + .9375 : 7.5625 * (t -= 2.625 / 2.75) * t + .984375 }, InOut: function(t) { return t < .5 ? .5 * r.Easing.Bounce.In(2 * t) : .5 * r.Easing.Bounce.Out(2 * t - 1) + .5 } } }, r.Interpolation = { Linear: function(t, e) { var i = t.length - 1,
                    n = i * e,
                    s = Math.floor(n),
                    o = r.Interpolation.Utils.Linear; return e < 0 ? o(t[0], t[1], n) : e > 1 ? o(t[i], t[i - 1], i - n) : o(t[s], t[s + 1 > i ? i : s + 1], n - s) }, Bezier: function(t, e) { for (var i = 0, n = t.length - 1, s = Math.pow, o = r.Interpolation.Utils.Bernstein, a = 0; a <= n; a++) i += s(1 - e, n - a) * s(e, a) * t[a] * o(n, a); return i }, CatmullRom: function(t, e) { var i = t.length - 1,
                    n = i * e,
                    s = Math.floor(n),
                    o = r.Interpolation.Utils.CatmullRom; return t[0] === t[i] ? (e < 0 && (s = Math.floor(n = i * (1 + e))), o(t[(s - 1 + i) % i], t[s], t[(s + 1) % i], t[(s + 2) % i], n - s)) : e < 0 ? t[0] - (o(t[0], t[0], t[1], t[1], -n) - t[0]) : e > 1 ? t[i] - (o(t[i], t[i], t[i - 1], t[i - 1], n - i) - t[i]) : o(t[s ? s - 1 : 0], t[s], t[i < s + 1 ? i : s + 1], t[i < s + 2 ? i : s + 2], n - s) }, Utils: { Linear: function(t, e, i) { return (e - t) * i + t }, Bernstein: function(t, e) { var i = r.Interpolation.Utils.Factorial; return i(t) / i(e) / i(t - e) }, Factorial: (n = [1], function(t) { var e = 1; if (n[t]) return n[t]; for (var i = t; i > 1; i--) e *= i; return n[t] = e, e }), CatmullRom: function(t, e, i, n, r) { var s = .5 * (i - t),
                        o = .5 * (n - e),
                        a = r * r; return (2 * e - 2 * i + s + o) * (r * a) + (-3 * e + 3 * i - 2 * s - o) * a + s * r + e } } }, r.version = "18.5.0", e.a = r }).call(this, i(27)) }, function(t, e, i) { "use strict";
    i.d(e, "a", (function() { return h })), i.d(e, "b", (function() { return o })), i.d(e, "c", (function() { return u })), i.d(e, "d", (function() { return f })), i.d(e, "e", (function() { return p })), i.d(e, "f", (function() { return r })), i.d(e, "g", (function() { return d })), i.d(e, "h", (function() { return l })), i.d(e, "i", (function() { return s })), i.d(e, "j", (function() { return a })), i.d(e, "k", (function() { return c })), i.d(e, "l", (function() { return n })), i.d(e, "m", (function() { return T })), i.d(e, "n", (function() { return w })); var n, r = 2 * Math.PI,
        s = 180 / Math.PI,
        o = Math.PI / 180;! function(t) { t[t.POLY = 0] = "POLY", t[t.RECT = 1] = "RECT", t[t.CIRC = 2] = "CIRC", t[t.ELIP = 3] = "ELIP", t[t.RREC = 4] = "RREC" }(n || (n = {})); var a = function() {
            function t(t, e, i, r) { void 0 === t && (t = 0), void 0 === e && (e = 0), void 0 === i && (i = 0), void 0 === r && (r = 0), this.x = Number(t), this.y = Number(e), this.width = Number(i), this.height = Number(r), this.type = n.RECT } return Object.defineProperty(t.prototype, "left", { get: function() { return this.x }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "right", { get: function() { return this.x + this.width }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "top", { get: function() { return this.y }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "bottom", { get: function() { return this.y + this.height }, enumerable: !1, configurable: !0 }), Object.defineProperty(t, "EMPTY", { get: function() { return new t(0, 0, 0, 0) }, enumerable: !1, configurable: !0 }), t.prototype.clone = function() { return new t(this.x, this.y, this.width, this.height) }, t.prototype.copyFrom = function(t) { return this.x = t.x, this.y = t.y, this.width = t.width, this.height = t.height, this }, t.prototype.copyTo = function(t) { return t.x = this.x, t.y = this.y, t.width = this.width, t.height = this.height, t }, t.prototype.contains = function(t, e) { return !(this.width <= 0 || this.height <= 0) && (t >= this.x && t < this.x + this.width && e >= this.y && e < this.y + this.height) }, t.prototype.pad = function(t, e) { return void 0 === t && (t = 0), void 0 === e && (e = t), this.x -= t, this.y -= e, this.width += 2 * t, this.height += 2 * e, this }, t.prototype.fit = function(t) { var e = Math.max(this.x, t.x),
                    i = Math.min(this.x + this.width, t.x + t.width),
                    n = Math.max(this.y, t.y),
                    r = Math.min(this.y + this.height, t.y + t.height); return this.x = e, this.width = Math.max(i - e, 0), this.y = n, this.height = Math.max(r - n, 0), this }, t.prototype.ceil = function(t, e) { void 0 === t && (t = 1), void 0 === e && (e = .001); var i = Math.ceil((this.x + this.width - e) * t) / t,
                    n = Math.ceil((this.y + this.height - e) * t) / t; return this.x = Math.floor((this.x + e) * t) / t, this.y = Math.floor((this.y + e) * t) / t, this.width = i - this.x, this.height = n - this.y, this }, t.prototype.enlarge = function(t) { var e = Math.min(this.x, t.x),
                    i = Math.max(this.x + this.width, t.x + t.width),
                    n = Math.min(this.y, t.y),
                    r = Math.max(this.y + this.height, t.y + t.height); return this.x = e, this.width = i - e, this.y = n, this.height = r - n, this }, t }(),
        h = function() {
            function t(t, e, i) { void 0 === t && (t = 0), void 0 === e && (e = 0), void 0 === i && (i = 0), this.x = t, this.y = e, this.radius = i, this.type = n.CIRC } return t.prototype.clone = function() { return new t(this.x, this.y, this.radius) }, t.prototype.contains = function(t, e) { if (this.radius <= 0) return !1; var i = this.radius * this.radius,
                    n = this.x - t,
                    r = this.y - e; return (n *= n) + (r *= r) <= i }, t.prototype.getBounds = function() { return new a(this.x - this.radius, this.y - this.radius, 2 * this.radius, 2 * this.radius) }, t }(),
        u = function() {
            function t(t, e, i, r) { void 0 === t && (t = 0), void 0 === e && (e = 0), void 0 === i && (i = 0), void 0 === r && (r = 0), this.x = t, this.y = e, this.width = i, this.height = r, this.type = n.ELIP } return t.prototype.clone = function() { return new t(this.x, this.y, this.width, this.height) }, t.prototype.contains = function(t, e) { if (this.width <= 0 || this.height <= 0) return !1; var i = (t - this.x) / this.width,
                    n = (e - this.y) / this.height; return (i *= i) + (n *= n) <= 1 }, t.prototype.getBounds = function() { return new a(this.x - this.width, this.y - this.height, this.width, this.height) }, t }(),
        l = function() {
            function t() { for (var t = arguments, e = [], i = 0; i < arguments.length; i++) e[i] = t[i]; var r = Array.isArray(e[0]) ? e[0] : e; if ("number" != typeof r[0]) { for (var s = [], o = 0, a = r.length; o < a; o++) s.push(r[o].x, r[o].y);
                    r = s } this.points = r, this.type = n.POLY, this.closeStroke = !0 } return t.prototype.clone = function() { var e = new t(this.points.slice()); return e.closeStroke = this.closeStroke, e }, t.prototype.contains = function(t, e) { for (var i = !1, n = this.points.length / 2, r = 0, s = n - 1; r < n; s = r++) { var o = this.points[2 * r],
                        a = this.points[2 * r + 1],
                        h = this.points[2 * s],
                        u = this.points[2 * s + 1];
                    a > e != u > e && t < (e - a) / (u - a) * (h - o) + o && (i = !i) } return i }, t }(),
        c = function() {
            function t(t, e, i, r, s) { void 0 === t && (t = 0), void 0 === e && (e = 0), void 0 === i && (i = 0), void 0 === r && (r = 0), void 0 === s && (s = 20), this.x = t, this.y = e, this.width = i, this.height = r, this.radius = s, this.type = n.RREC } return t.prototype.clone = function() { return new t(this.x, this.y, this.width, this.height, this.radius) }, t.prototype.contains = function(t, e) { if (this.width <= 0 || this.height <= 0) return !1; if (t >= this.x && t <= this.x + this.width && e >= this.y && e <= this.y + this.height) { if (e >= this.y + this.radius && e <= this.y + this.height - this.radius || t >= this.x + this.radius && t <= this.x + this.width - this.radius) return !0; var i = t - (this.x + this.radius),
                        n = e - (this.y + this.radius),
                        r = this.radius * this.radius; if (i * i + n * n <= r) return !0; if ((i = t - (this.x + this.width - this.radius)) * i + n * n <= r) return !0; if (i * i + (n = e - (this.y + this.height - this.radius)) * n <= r) return !0; if ((i = t - (this.x + this.radius)) * i + n * n <= r) return !0 } return !1 }, t }(),
        d = function() {
            function t(t, e) { void 0 === t && (t = 0), void 0 === e && (e = 0), this.x = t, this.y = e } return t.prototype.clone = function() { return new t(this.x, this.y) }, t.prototype.copyFrom = function(t) { return this.set(t.x, t.y), this }, t.prototype.copyTo = function(t) { return t.set(this.x, this.y), t }, t.prototype.equals = function(t) { return t.x === this.x && t.y === this.y }, t.prototype.set = function(t, e) { return void 0 === t && (t = 0), void 0 === e && (e = t), this.x = t, this.y = e, this }, t }(),
        p = function() {
            function t(t, e, i, n) { void 0 === i && (i = 0), void 0 === n && (n = 0), this._x = i, this._y = n, this.cb = t, this.scope = e } return t.prototype.clone = function(e, i) { return void 0 === e && (e = this.cb), void 0 === i && (i = this.scope), new t(e, i, this._x, this._y) }, t.prototype.set = function(t, e) { return void 0 === t && (t = 0), void 0 === e && (e = t), this._x === t && this._y === e || (this._x = t, this._y = e, this.cb.call(this.scope)), this }, t.prototype.copyFrom = function(t) { return this._x === t.x && this._y === t.y || (this._x = t.x, this._y = t.y, this.cb.call(this.scope)), this }, t.prototype.copyTo = function(t) { return t.set(this._x, this._y), t }, t.prototype.equals = function(t) { return t.x === this._x && t.y === this._y }, Object.defineProperty(t.prototype, "x", { get: function() { return this._x }, set: function(t) { this._x !== t && (this._x = t, this.cb.call(this.scope)) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "y", { get: function() { return this._y }, set: function(t) { this._y !== t && (this._y = t, this.cb.call(this.scope)) }, enumerable: !1, configurable: !0 }), t }(),
        f = function() {
            function t(t, e, i, n, r, s) { void 0 === t && (t = 1), void 0 === e && (e = 0), void 0 === i && (i = 0), void 0 === n && (n = 1), void 0 === r && (r = 0), void 0 === s && (s = 0), this.array = null, this.a = t, this.b = e, this.c = i, this.d = n, this.tx = r, this.ty = s } return t.prototype.fromArray = function(t) { this.a = t[0], this.b = t[1], this.c = t[3], this.d = t[4], this.tx = t[2], this.ty = t[5] }, t.prototype.set = function(t, e, i, n, r, s) { return this.a = t, this.b = e, this.c = i, this.d = n, this.tx = r, this.ty = s, this }, t.prototype.toArray = function(t, e) { this.array || (this.array = new Float32Array(9)); var i = e || this.array; return t ? (i[0] = this.a, i[1] = this.b, i[2] = 0, i[3] = this.c, i[4] = this.d, i[5] = 0, i[6] = this.tx, i[7] = this.ty, i[8] = 1) : (i[0] = this.a, i[1] = this.c, i[2] = this.tx, i[3] = this.b, i[4] = this.d, i[5] = this.ty, i[6] = 0, i[7] = 0, i[8] = 1), i }, t.prototype.apply = function(t, e) { e = e || new d; var i = t.x,
                    n = t.y; return e.x = this.a * i + this.c * n + this.tx, e.y = this.b * i + this.d * n + this.ty, e }, t.prototype.applyInverse = function(t, e) { e = e || new d; var i = 1 / (this.a * this.d + this.c * -this.b),
                    n = t.x,
                    r = t.y; return e.x = this.d * i * n + -this.c * i * r + (this.ty * this.c - this.tx * this.d) * i, e.y = this.a * i * r + -this.b * i * n + (-this.ty * this.a + this.tx * this.b) * i, e }, t.prototype.translate = function(t, e) { return this.tx += t, this.ty += e, this }, t.prototype.scale = function(t, e) { return this.a *= t, this.d *= e, this.c *= t, this.b *= e, this.tx *= t, this.ty *= e, this }, t.prototype.rotate = function(t) { var e = Math.cos(t),
                    i = Math.sin(t),
                    n = this.a,
                    r = this.c,
                    s = this.tx; return this.a = n * e - this.b * i, this.b = n * i + this.b * e, this.c = r * e - this.d * i, this.d = r * i + this.d * e, this.tx = s * e - this.ty * i, this.ty = s * i + this.ty * e, this }, t.prototype.append = function(t) { var e = this.a,
                    i = this.b,
                    n = this.c,
                    r = this.d; return this.a = t.a * e + t.b * n, this.b = t.a * i + t.b * r, this.c = t.c * e + t.d * n, this.d = t.c * i + t.d * r, this.tx = t.tx * e + t.ty * n + this.tx, this.ty = t.tx * i + t.ty * r + this.ty, this }, t.prototype.setTransform = function(t, e, i, n, r, s, o, a, h) { return this.a = Math.cos(o + h) * r, this.b = Math.sin(o + h) * r, this.c = -Math.sin(o - a) * s, this.d = Math.cos(o - a) * s, this.tx = t - (i * this.a + n * this.c), this.ty = e - (i * this.b + n * this.d), this }, t.prototype.prepend = function(t) { var e = this.tx; if (1 !== t.a || 0 !== t.b || 0 !== t.c || 1 !== t.d) { var i = this.a,
                        n = this.c;
                    this.a = i * t.a + this.b * t.c, this.b = i * t.b + this.b * t.d, this.c = n * t.a + this.d * t.c, this.d = n * t.b + this.d * t.d } return this.tx = e * t.a + this.ty * t.c + t.tx, this.ty = e * t.b + this.ty * t.d + t.ty, this }, t.prototype.decompose = function(t) { var e = this.a,
                    i = this.b,
                    n = this.c,
                    s = this.d,
                    o = -Math.atan2(-n, s),
                    a = Math.atan2(i, e),
                    h = Math.abs(o + a); return h < 1e-5 || Math.abs(r - h) < 1e-5 ? (t.rotation = a, t.skew.x = t.skew.y = 0) : (t.rotation = 0, t.skew.x = o, t.skew.y = a), t.scale.x = Math.sqrt(e * e + i * i), t.scale.y = Math.sqrt(n * n + s * s), t.position.x = this.tx, t.position.y = this.ty, t }, t.prototype.invert = function() { var t = this.a,
                    e = this.b,
                    i = this.c,
                    n = this.d,
                    r = this.tx,
                    s = t * n - e * i; return this.a = n / s, this.b = -e / s, this.c = -i / s, this.d = t / s, this.tx = (i * this.ty - n * r) / s, this.ty = -(t * this.ty - e * r) / s, this }, t.prototype.identity = function() { return this.a = 1, this.b = 0, this.c = 0, this.d = 1, this.tx = 0, this.ty = 0, this }, t.prototype.clone = function() { var e = new t; return e.a = this.a, e.b = this.b, e.c = this.c, e.d = this.d, e.tx = this.tx, e.ty = this.ty, e }, t.prototype.copyTo = function(t) { return t.a = this.a, t.b = this.b, t.c = this.c, t.d = this.d, t.tx = this.tx, t.ty = this.ty, t }, t.prototype.copyFrom = function(t) { return this.a = t.a, this.b = t.b, this.c = t.c, this.d = t.d, this.tx = t.tx, this.ty = t.ty, this }, Object.defineProperty(t, "IDENTITY", { get: function() { return new t }, enumerable: !1, configurable: !0 }), Object.defineProperty(t, "TEMP_MATRIX", { get: function() { return new t }, enumerable: !1, configurable: !0 }), t }(),
        m = [1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1, 0, 1],
        g = [0, 1, 1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1],
        y = [0, -1, -1, -1, 0, 1, 1, 1, 0, 1, 1, 1, 0, -1, -1, -1],
        v = [1, 1, 0, -1, -1, -1, 0, 1, -1, -1, 0, 1, 1, 1, 0, -1],
        b = [],
        _ = [],
        x = Math.sign;! function() { for (var t = 0; t < 16; t++) { var e = [];
            b.push(e); for (var i = 0; i < 16; i++)
                for (var n = x(m[t] * m[i] + y[t] * g[i]), r = x(g[t] * m[i] + v[t] * g[i]), s = x(m[t] * y[i] + y[t] * v[i]), o = x(g[t] * y[i] + v[t] * v[i]), a = 0; a < 16; a++)
                    if (m[a] === n && g[a] === r && y[a] === s && v[a] === o) { e.push(a); break } } for (t = 0; t < 16; t++) { var h = new f;
            h.set(m[t], g[t], y[t], v[t], 0, 0), _.push(h) } }(); var w = { E: 0, SE: 1, S: 2, SW: 3, W: 4, NW: 5, N: 6, NE: 7, MIRROR_VERTICAL: 8, MAIN_DIAGONAL: 10, MIRROR_HORIZONTAL: 12, REVERSE_DIAGONAL: 14, uX: function(t) { return m[t] }, uY: function(t) { return g[t] }, vX: function(t) { return y[t] }, vY: function(t) { return v[t] }, inv: function(t) { return 8 & t ? 15 & t : 7 & -t }, add: function(t, e) { return b[t][e] }, sub: function(t, e) { return b[t][w.inv(e)] }, rotate180: function(t) { return 4 ^ t }, isVertical: function(t) { return 2 == (3 & t) }, byDirection: function(t, e) { return 2 * Math.abs(t) <= Math.abs(e) ? e >= 0 ? w.S : w.N : 2 * Math.abs(e) <= Math.abs(t) ? t > 0 ? w.E : w.W : e > 0 ? t > 0 ? w.SE : w.SW : t > 0 ? w.NE : w.NW }, matrixAppendRotationInv: function(t, e, i, n) { void 0 === i && (i = 0), void 0 === n && (n = 0); var r = _[w.inv(e)];
                r.tx = i, r.ty = n, t.append(r) } },
        T = function() {
            function t() { this.worldTransform = new f, this.localTransform = new f, this.position = new p(this.onChange, this, 0, 0), this.scale = new p(this.onChange, this, 1, 1), this.pivot = new p(this.onChange, this, 0, 0), this.skew = new p(this.updateSkew, this, 0, 0), this._rotation = 0, this._cx = 1, this._sx = 0, this._cy = 0, this._sy = 1, this._localID = 0, this._currentLocalID = 0, this._worldID = 0, this._parentID = 0 } return t.prototype.onChange = function() { this._localID++ }, t.prototype.updateSkew = function() { this._cx = Math.cos(this._rotation + this.skew.y), this._sx = Math.sin(this._rotation + this.skew.y), this._cy = -Math.sin(this._rotation - this.skew.x), this._sy = Math.cos(this._rotation - this.skew.x), this._localID++ }, t.prototype.updateLocalTransform = function() { var t = this.localTransform;
                this._localID !== this._currentLocalID && (t.a = this._cx * this.scale.x, t.b = this._sx * this.scale.x, t.c = this._cy * this.scale.y, t.d = this._sy * this.scale.y, t.tx = this.position.x - (this.pivot.x * t.a + this.pivot.y * t.c), t.ty = this.position.y - (this.pivot.x * t.b + this.pivot.y * t.d), this._currentLocalID = this._localID, this._parentID = -1) }, t.prototype.updateTransform = function(t) { var e = this.localTransform; if (this._localID !== this._currentLocalID && (e.a = this._cx * this.scale.x, e.b = this._sx * this.scale.x, e.c = this._cy * this.scale.y, e.d = this._sy * this.scale.y, e.tx = this.position.x - (this.pivot.x * e.a + this.pivot.y * e.c), e.ty = this.position.y - (this.pivot.x * e.b + this.pivot.y * e.d), this._currentLocalID = this._localID, this._parentID = -1), this._parentID !== t._worldID) { var i = t.worldTransform,
                        n = this.worldTransform;
                    n.a = e.a * i.a + e.b * i.c, n.b = e.a * i.b + e.b * i.d, n.c = e.c * i.a + e.d * i.c, n.d = e.c * i.b + e.d * i.d, n.tx = e.tx * i.a + e.ty * i.c + i.tx, n.ty = e.tx * i.b + e.ty * i.d + i.ty, this._parentID = t._worldID, this._worldID++ } }, t.prototype.setFromMatrix = function(t) { t.decompose(this), this._localID++ }, Object.defineProperty(t.prototype, "rotation", { get: function() { return this._rotation }, set: function(t) { this._rotation !== t && (this._rotation = t, this.updateSkew()) }, enumerable: !1, configurable: !0 }), t.IDENTITY = new t, t }() }, function(t, e, i) { "use strict";
    i.d(e, "a", (function() { return pe })), i.d(e, "b", (function() { return se })), i.d(e, "c", (function() { return F })), i.d(e, "d", (function() { return I })), i.d(e, "e", (function() { return g })), i.d(e, "f", (function() { return le })), i.d(e, "g", (function() { return me })), i.d(e, "h", (function() { return ve })), i.d(e, "i", (function() { return be })), i.d(e, "j", (function() { return fe })), i.d(e, "k", (function() { return ce })), i.d(e, "l", (function() { return j })), i.d(e, "m", (function() { return kt })), i.d(e, "n", (function() { return Q })), i.d(e, "o", (function() { return A })), i.d(e, "p", (function() { return it })), i.d(e, "q", (function() { return qt })), i.d(e, "r", (function() { return ee })), i.d(e, "s", (function() { return V })), i.d(e, "t", (function() { return Kt })), i.d(e, "u", (function() { return ht })), i.d(e, "v", (function() { return Z })), i.d(e, "w", (function() { return Mt })), i.d(e, "x", (function() { return W })), i.d(e, "y", (function() { return Y })), i.d(e, "z", (function() { return k })), i.d(e, "A", (function() { return N })), i.d(e, "B", (function() { return oe })), i.d(e, "C", (function() { return Lt })), i.d(e, "D", (function() { return Bt })), i.d(e, "E", (function() { return Dt })), i.d(e, "F", (function() { return C })), i.d(e, "G", (function() { return L })), i.d(e, "H", (function() { return Ft })), i.d(e, "I", (function() { return R })), i.d(e, "J", (function() { return q })), i.d(e, "K", (function() { return de })), i.d(e, "L", (function() { return ae })), i.d(e, "M", (function() { return At })), i.d(e, "N", (function() { return ue })), i.d(e, "O", (function() { return he })), i.d(e, "P", (function() { return P })), i.d(e, "Q", (function() { return ne })), i.d(e, "R", (function() { return Tt })); var n = i(6),
        r = i(2),
        s = i(1),
        o = i(13),
        a = i(9),
        h = i(4);
    n.b.PREFER_ENV = s.isMobile.any ? r.f.WEBGL : r.f.WEBGL2, n.b.STRICT_TEXTURE_CACHE = !1; var u = [];

    function l(t, e) { if (!t) return null; var i = ""; if ("string" == typeof t) { var n = /\.(\w{3,4})(?:$|\?|#)/i.exec(t);
            n && (i = n[1].toLowerCase()) } for (var r = u.length - 1; r >= 0; --r) { var s = u[r]; if (s.test && s.test(t, i)) return new s(t, e) } throw new Error("Unrecognized source type to auto-detect Resource") } var c = function(t, e) { return (c = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) })(t, e) };

    function d(t, e) {
        function i() { this.constructor = t } c(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i) } var p = function() {
            function t(t, e) { void 0 === t && (t = 0), void 0 === e && (e = 0), this._width = t, this._height = e, this.destroyed = !1, this.internal = !1, this.onResize = new o.a("setRealSize"), this.onUpdate = new o.a("update"), this.onError = new o.a("onError") } return t.prototype.bind = function(t) { this.onResize.add(t), this.onUpdate.add(t), this.onError.add(t), (this._width || this._height) && this.onResize.emit(this._width, this._height) }, t.prototype.unbind = function(t) { this.onResize.remove(t), this.onUpdate.remove(t), this.onError.remove(t) }, t.prototype.resize = function(t, e) { t === this._width && e === this._height || (this._width = t, this._height = e, this.onResize.emit(t, e)) }, Object.defineProperty(t.prototype, "valid", { get: function() { return !!this._width && !!this._height }, enumerable: !1, configurable: !0 }), t.prototype.update = function() { this.destroyed || this.onUpdate.emit() }, t.prototype.load = function() { return Promise.resolve(this) }, Object.defineProperty(t.prototype, "width", { get: function() { return this._width }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "height", { get: function() { return this._height }, enumerable: !1, configurable: !0 }), t.prototype.style = function(t, e, i) { return !1 }, t.prototype.dispose = function() {}, t.prototype.destroy = function() { this.destroyed || (this.destroyed = !0, this.dispose(), this.onError.removeAll(), this.onError = null, this.onResize.removeAll(), this.onResize = null, this.onUpdate.removeAll(), this.onUpdate = null) }, t.test = function(t, e) { return !1 }, t }(),
        f = function(t) {
            function e(e, i) { var n = this,
                    r = i || {},
                    s = r.width,
                    o = r.height; if (!s || !o) throw new Error("BufferResource width or height invalid"); return (n = t.call(this, s, o) || this).data = e, n } return d(e, t), e.prototype.upload = function(t, e, i) { var n = t.gl; return n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL, e.alphaMode === r.a.UNPACK), i.width === e.width && i.height === e.height ? n.texSubImage2D(e.target, 0, 0, 0, e.width, e.height, e.format, e.type, this.data) : (i.width = e.width, i.height = e.height, n.texImage2D(e.target, 0, i.internalFormat, e.width, e.height, 0, e.format, i.type, this.data)), !0 }, e.prototype.dispose = function() { this.data = null }, e.test = function(t) { return t instanceof Float32Array || t instanceof Uint8Array || t instanceof Uint32Array }, e }(p),
        m = { scaleMode: r.n.NEAREST, format: r.g.RGBA, alphaMode: r.a.NPM },
        g = function(t) {
            function e(e, i) { void 0 === e && (e = null), void 0 === i && (i = null); var o = t.call(this) || this,
                    a = (i = i || {}).alphaMode,
                    h = i.mipmap,
                    u = i.anisotropicLevel,
                    c = i.scaleMode,
                    d = i.width,
                    f = i.height,
                    m = i.wrapMode,
                    g = i.format,
                    y = i.type,
                    v = i.target,
                    b = i.resolution,
                    _ = i.resourceOptions; return !e || e instanceof p || ((e = l(e, _)).internal = !0), o.width = d || 0, o.height = f || 0, o.resolution = b || n.b.RESOLUTION, o.mipmap = h !== undefined ? h : n.b.MIPMAP_TEXTURES, o.anisotropicLevel = u !== undefined ? u : n.b.ANISOTROPIC_LEVEL, o.wrapMode = m || n.b.WRAP_MODE, o.scaleMode = c !== undefined ? c : n.b.SCALE_MODE, o.format = g || r.g.RGBA, o.type = y || r.p.UNSIGNED_BYTE, o.target = v || r.o.TEXTURE_2D, o.alphaMode = a !== undefined ? a : r.a.UNPACK, i.premultiplyAlpha !== undefined && (o.premultiplyAlpha = i.premultiplyAlpha), o.uid = Object(s.uid)(), o.touched = 0, o.isPowerOfTwo = !1, o._refreshPOT(), o._glTextures = {}, o.dirtyId = 0, o.dirtyStyleId = 0, o.cacheId = null, o.valid = d > 0 && f > 0, o.textureCacheIds = [], o.destroyed = !1, o.resource = null, o._batchEnabled = 0, o._batchLocation = 0, o.parentTextureArray = null, o.setResource(e), o } return d(e, t), Object.defineProperty(e.prototype, "realWidth", { get: function() { return Math.ceil(this.width * this.resolution - 1e-4) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "realHeight", { get: function() { return Math.ceil(this.height * this.resolution - 1e-4) }, enumerable: !1, configurable: !0 }), e.prototype.setStyle = function(t, e) { var i; return t !== undefined && t !== this.scaleMode && (this.scaleMode = t, i = !0), e !== undefined && e !== this.mipmap && (this.mipmap = e, i = !0), i && this.dirtyStyleId++, this }, e.prototype.setSize = function(t, e, i) { return this.resolution = i || this.resolution, this.width = t, this.height = e, this._refreshPOT(), this.update(), this }, e.prototype.setRealSize = function(t, e, i) { return this.resolution = i || this.resolution, this.width = t / this.resolution, this.height = e / this.resolution, this._refreshPOT(), this.update(), this }, e.prototype._refreshPOT = function() { this.isPowerOfTwo = Object(s.isPow2)(this.realWidth) && Object(s.isPow2)(this.realHeight) }, e.prototype.setResolution = function(t) { var e = this.resolution; return e === t || (this.resolution = t, this.valid && (this.width = this.width * e / t, this.height = this.height * e / t, this.emit("update", this)), this._refreshPOT()), this }, e.prototype.setResource = function(t) { if (this.resource === t) return this; if (this.resource) throw new Error("Resource can be set only once"); return t.bind(this), this.resource = t, this }, e.prototype.update = function() { this.valid ? (this.dirtyId++, this.dirtyStyleId++, this.emit("update", this)) : this.width > 0 && this.height > 0 && (this.valid = !0, this.emit("loaded", this), this.emit("update", this)) }, e.prototype.onError = function(t) { this.emit("error", this, t) }, e.prototype.destroy = function() { this.resource && (this.resource.unbind(this), this.resource.internal && this.resource.destroy(), this.resource = null), this.cacheId && (delete s.BaseTextureCache[this.cacheId], delete s.TextureCache[this.cacheId], this.cacheId = null), this.dispose(), e.removeFromCache(this), this.textureCacheIds = null, this.destroyed = !0 }, e.prototype.dispose = function() { this.emit("dispose", this) }, e.prototype.castToBaseTexture = function() { return this }, e.from = function(t, i, r) { void 0 === r && (r = n.b.STRICT_TEXTURE_CACHE); var o = "string" == typeof t,
                    a = null;
                o ? a = t : (t._pixiId || (t._pixiId = "pixiid_" + Object(s.uid)()), a = t._pixiId); var h = s.BaseTextureCache[a]; if (o && r && !h) throw new Error('The cacheId "' + a + '" does not exist in BaseTextureCache.'); return h || ((h = new e(t, i)).cacheId = a, e.addToCache(h, a)), h }, e.fromBuffer = function(t, i, n, s) { t = t || new Float32Array(i * n * 4); var o = new f(t, { width: i, height: n }),
                    a = t instanceof Float32Array ? r.p.FLOAT : r.p.UNSIGNED_BYTE; return new e(o, Object.assign(m, s || { width: i, height: n, type: a })) }, e.addToCache = function(t, e) { e && (-1 === t.textureCacheIds.indexOf(e) && t.textureCacheIds.push(e), s.BaseTextureCache[e], s.BaseTextureCache[e] = t) }, e.removeFromCache = function(t) { if ("string" == typeof t) { var e = s.BaseTextureCache[t]; if (e) { var i = e.textureCacheIds.indexOf(t); return i > -1 && e.textureCacheIds.splice(i, 1), delete s.BaseTextureCache[t], e } } else if (t && t.textureCacheIds) { for (var n = 0; n < t.textureCacheIds.length; ++n) delete s.BaseTextureCache[t.textureCacheIds[n]]; return t.textureCacheIds.length = 0, t } return null }, e._globalBatch = 0, e }(s.EventEmitter),
        y = function(t) {
            function e(e, i) { var n = this,
                    r = i || {},
                    s = r.width,
                    o = r.height;
                (n = t.call(this, s, o) || this).items = [], n.itemDirtyIds = []; for (var a = 0; a < e; a++) { var h = new g;
                    n.items.push(h), n.itemDirtyIds.push(-2) } return n.length = e, n._load = null, n.baseTexture = null, n } return d(e, t), e.prototype.initFromArray = function(t, e) { for (var i = 0; i < this.length; i++) t[i] && (t[i].castToBaseTexture ? this.addBaseTextureAt(t[i].castToBaseTexture(), i) : t[i] instanceof p ? this.addResourceAt(t[i], i) : this.addResourceAt(l(t[i], e), i)) }, e.prototype.dispose = function() { for (var t = 0, e = this.length; t < e; t++) this.items[t].destroy();
                this.items = null, this.itemDirtyIds = null, this._load = null }, e.prototype.addResourceAt = function(t, e) { if (!this.items[e]) throw new Error("Index " + e + " is out of bounds"); return t.valid && !this.valid && this.resize(t.width, t.height), this.items[e].setResource(t), this }, e.prototype.bind = function(e) { if (null !== this.baseTexture) throw new Error("Only one base texture per TextureArray is allowed");
                t.prototype.bind.call(this, e); for (var i = 0; i < this.length; i++) this.items[i].parentTextureArray = e, this.items[i].on("update", e.update, e) }, e.prototype.unbind = function(e) { t.prototype.unbind.call(this, e); for (var i = 0; i < this.length; i++) this.items[i].parentTextureArray = null, this.items[i].off("update", e.update, e) }, e.prototype.load = function() { var t = this; if (this._load) return this._load; var e = this.items.map((function(t) { return t.resource })).filter((function(t) { return t })).map((function(t) { return t.load() })); return this._load = Promise.all(e).then((function() { var e = t.items[0],
                        i = e.realWidth,
                        n = e.realHeight; return t.resize(i, n), Promise.resolve(t) })), this._load }, e }(p),
        v = function(t) {
            function e(e, i) { var n, r, s = this,
                    o = i || {},
                    a = o.width,
                    h = o.height; return Array.isArray(e) ? (n = e, r = e.length) : r = e, s = t.call(this, r, { width: a, height: h }) || this, n && s.initFromArray(n, i), s } return d(e, t), e.prototype.addBaseTextureAt = function(t, e) { if (!t.resource) throw new Error("ArrayResource does not support RenderTexture"); return this.addResourceAt(t.resource, e), this }, e.prototype.bind = function(e) { t.prototype.bind.call(this, e), e.target = r.o.TEXTURE_2D_ARRAY }, e.prototype.upload = function(t, e, i) { var n = this.length,
                    r = this.itemDirtyIds,
                    s = this.items,
                    o = t.gl;
                i.dirtyId < 0 && o.texImage3D(o.TEXTURE_2D_ARRAY, 0, e.format, this._width, this._height, n, 0, e.format, e.type, null); for (var a = 0; a < n; a++) { var h = s[a];
                    r[a] < h.dirtyId && (r[a] = h.dirtyId, h.valid && o.texSubImage3D(o.TEXTURE_2D_ARRAY, 0, 0, 0, a, h.resource.width, h.resource.height, 1, e.format, e.type, h.resource.source)) } return !0 }, e }(y),
        b = function(t) {
            function e(e) { var i = this,
                    n = e,
                    r = n.naturalWidth || n.videoWidth || n.width,
                    s = n.naturalHeight || n.videoHeight || n.height; return (i = t.call(this, r, s) || this).source = e, i.noSubImage = !1, i } return d(e, t), e.crossOrigin = function(t, e, i) { i === undefined && 0 !== e.indexOf("data:") ? t.crossOrigin = Object(s.determineCrossOrigin)(e) : !1 !== i && (t.crossOrigin = "string" == typeof i ? i : "anonymous") }, e.prototype.upload = function(t, e, i, n) { var s = t.gl,
                    o = e.realWidth,
                    a = e.realHeight; return n = n || this.source, s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL, e.alphaMode === r.a.UNPACK), this.noSubImage || e.target !== s.TEXTURE_2D || i.width !== o || i.height !== a ? (i.width = o, i.height = a, s.texImage2D(e.target, 0, e.format, e.format, e.type, n)) : s.texSubImage2D(s.TEXTURE_2D, 0, 0, 0, e.format, e.type, n), !0 }, e.prototype.update = function() { if (!this.destroyed) { var e = this.source,
                        i = e.naturalWidth || e.videoWidth || e.width,
                        n = e.naturalHeight || e.videoHeight || e.height;
                    this.resize(i, n), t.prototype.update.call(this) } }, e.prototype.dispose = function() { this.source = null }, e }(p),
        _ = function(t) {
            function e() { return null !== t && t.apply(this, arguments) || this } return d(e, t), e.test = function(t) { var e = window.OffscreenCanvas; return !!(e && t instanceof e) || t instanceof HTMLCanvasElement }, e }(b),
        x = function(t) {
            function e(i, n) { var s = this,
                    o = n || {},
                    a = o.width,
                    h = o.height,
                    u = o.autoLoad,
                    l = o.linkBaseTexture; if (i && i.length !== e.SIDES) throw new Error("Invalid length. Got " + i.length + ", expected 6");
                s = t.call(this, 6, { width: a, height: h }) || this; for (var c = 0; c < e.SIDES; c++) s.items[c].target = r.o.TEXTURE_CUBE_MAP_POSITIVE_X + c; return s.linkBaseTexture = !1 !== l, i && s.initFromArray(i, n), !1 !== u && s.load(), s } return d(e, t), e.prototype.bind = function(e) { t.prototype.bind.call(this, e), e.target = r.o.TEXTURE_CUBE_MAP }, e.prototype.addBaseTextureAt = function(t, e, i) { if (i === undefined && (i = this.linkBaseTexture), !this.items[e]) throw new Error("Index " + e + " is out of bounds"); if (!this.linkBaseTexture || t.parentTextureArray || Object.keys(t._glTextures).length > 0) { if (!t.resource) throw new Error("CubeResource does not support copying of renderTexture.");
                    this.addResourceAt(t.resource, e) } else t.target = r.o.TEXTURE_CUBE_MAP_POSITIVE_X + e, t.parentTextureArray = this.baseTexture, this.items[e] = t; return t.valid && !this.valid && this.resize(t.realWidth, t.realHeight), this.items[e] = t, this }, e.prototype.upload = function(t, i, n) { for (var r = this.itemDirtyIds, s = 0; s < e.SIDES; s++) { var o = this.items[s];
                    r[s] < o.dirtyId && (o.valid && o.resource ? (o.resource.upload(t, o, n), r[s] = o.dirtyId) : r[s] < -1 && (t.gl.texImage2D(o.target, 0, n.internalFormat, i.realWidth, i.realHeight, 0, i.format, n.type, null), r[s] = -1)) } return !0 }, e.test = function(t) { return Array.isArray(t) && t.length === e.SIDES }, e.SIDES = 6, e }(y),
        w = function(t) {
            function e(e, i) { var r = this; if (i = i || {}, !(e instanceof HTMLImageElement)) { var s = new Image;
                    b.crossOrigin(s, e, i.crossorigin), s.src = e, e = s } return r = t.call(this, e) || this, !e.complete && r._width && r._height && (r._width = 0, r._height = 0), r.url = e.src, r._process = null, r.preserveBitmap = !1, r.createBitmap = (i.createBitmap !== undefined ? i.createBitmap : n.b.CREATE_IMAGE_BITMAP) && !!window.createImageBitmap, r.alphaMode = "number" == typeof i.alphaMode ? i.alphaMode : null, i.premultiplyAlpha !== undefined && (r.premultiplyAlpha = i.premultiplyAlpha), r.bitmap = null, r._load = null, !1 !== i.autoLoad && r.load(), r } return d(e, t), e.prototype.load = function(t) { var e = this; return this._load || (t !== undefined && (this.createBitmap = t), this._load = new Promise((function(t, i) { var n = e.source;
                    e.url = n.src; var r = function() { e.destroyed || (n.onload = null, n.onerror = null, e.resize(n.width, n.height), e._load = null, e.createBitmap ? t(e.process()) : t(e)) };
                    n.complete && n.src ? r() : (n.onload = r, n.onerror = function(t) { i(t), e.onError.emit(t) }) }))), this._load }, e.prototype.process = function() { var t = this,
                    e = this.source; return null !== this._process ? this._process : null === this.bitmap && window.createImageBitmap ? (this._process = window.createImageBitmap(e, 0, 0, e.width, e.height, { premultiplyAlpha: this.alphaMode === r.a.UNPACK ? "premultiply" : "none" }).then((function(e) { return t.destroyed ? Promise.reject() : (t.bitmap = e, t.update(), t._process = null, Promise.resolve(t)) })), this._process) : Promise.resolve(this) }, e.prototype.upload = function(e, i, n) { if ("number" == typeof this.alphaMode && (i.alphaMode = this.alphaMode), !this.createBitmap) return t.prototype.upload.call(this, e, i, n); if (!this.bitmap && (this.process(), !this.bitmap)) return !1; if (t.prototype.upload.call(this, e, i, n, this.bitmap), !this.preserveBitmap) { var r = !0,
                        s = i._glTextures; for (var o in s) { var a = s[o]; if (a !== n && a.dirtyId !== i.dirtyId) { r = !1; break } } r && (this.bitmap.close && this.bitmap.close(), this.bitmap = null) } return !0 }, e.prototype.dispose = function() { this.source.onload = null, this.source.onerror = null, t.prototype.dispose.call(this), this.bitmap && (this.bitmap.close(), this.bitmap = null), this._process = null, this._load = null }, e.test = function(t) { return "string" == typeof t || t instanceof HTMLImageElement }, e }(b),
        T = function(t) {
            function e(e, i) { var n = this; return i = i || {}, (n = t.call(this, document.createElement("canvas")) || this)._width = 0, n._height = 0, n.svg = e, n.scale = i.scale || 1, n._overrideWidth = i.width, n._overrideHeight = i.height, n._resolve = null, n._crossorigin = i.crossorigin, n._load = null, !1 !== i.autoLoad && n.load(), n } return d(e, t), e.prototype.load = function() { var t = this; return this._load || (this._load = new Promise((function(e) { if (t._resolve = function() { t.resize(t.source.width, t.source.height), e(t) }, /^\<svg/.test(t.svg.trim())) { if (!btoa) throw new Error("Your browser doesn't support base64 conversions.");
                        t.svg = "data:image/svg+xml;base64," + btoa(unescape(encodeURIComponent(t.svg))) } t._loadSvg() }))), this._load }, e.prototype._loadSvg = function() { var t = this,
                    e = new Image;
                b.crossOrigin(e, this.svg, this._crossorigin), e.src = this.svg, e.onerror = function(i) { t._resolve && (e.onerror = null, t.onError.emit(i)) }, e.onload = function() { if (t._resolve) { var i = e.width,
                            n = e.height; if (!i || !n) throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them."); var r = i * t.scale,
                            o = n * t.scale;
                        (t._overrideWidth || t._overrideHeight) && (r = t._overrideWidth || t._overrideHeight / n * i, o = t._overrideHeight || t._overrideWidth / i * n), r = Math.round(r), o = Math.round(o); var a = t.source;
                        a.width = r, a.height = o, a._pixiId = "canvas_" + Object(s.uid)(), a.getContext("2d").drawImage(e, 0, 0, i, n, 0, 0, r, o), t._resolve(), t._resolve = null } } }, e.getSize = function(t) { var i = e.SVG_SIZE.exec(t),
                    n = {}; return i && (n[i[1]] = Math.round(parseFloat(i[3])), n[i[5]] = Math.round(parseFloat(i[7]))), n }, e.prototype.dispose = function() { t.prototype.dispose.call(this), this._resolve = null, this._crossorigin = null }, e.test = function(t, e) { return "svg" === e || "string" == typeof t && 0 === t.indexOf("data:image/svg+xml;base64") || "string" == typeof t && 0 === t.indexOf("<svg") }, e.SVG_SIZE = /<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i, e }(b),
        S = function(t) {
            function e(i, n) { var r = this; if (n = n || {}, !(i instanceof HTMLVideoElement)) { var s = document.createElement("video");
                    s.setAttribute("preload", "auto"), s.setAttribute("webkit-playsinline", ""), s.setAttribute("playsinline", ""), "string" == typeof i && (i = [i]); var o = i[0].src || i[0];
                    b.crossOrigin(s, o, n.crossorigin); for (var a = 0; a < i.length; ++a) { var h = document.createElement("source"),
                            u = i[a],
                            l = u.src,
                            c = u.mime,
                            d = (l = l || i[a]).split("?").shift().toLowerCase(),
                            p = d.substr(d.lastIndexOf(".") + 1);
                        c = c || e.MIME_TYPES[p] || "video/" + p, h.src = l, h.type = c, s.appendChild(h) } i = s } return (r = t.call(this, i) || this).noSubImage = !0, r._autoUpdate = !0, r._isConnectedToTicker = !1, r._updateFPS = n.updateFPS || 0, r._msToNextUpdate = 0, r.autoPlay = !1 !== n.autoPlay, r._load = null, r._resolve = null, r._onCanPlay = r._onCanPlay.bind(r), r._onError = r._onError.bind(r), !1 !== n.autoLoad && r.load(), r } return d(e, t), e.prototype.update = function(e) { if (void 0 === e && (e = 0), !this.destroyed) { var i = a.a.shared.elapsedMS * this.source.playbackRate;
                    this._msToNextUpdate = Math.floor(this._msToNextUpdate - i), (!this._updateFPS || this._msToNextUpdate <= 0) && (t.prototype.update.call(this), this._msToNextUpdate = this._updateFPS ? Math.floor(1e3 / this._updateFPS) : 0) } }, e.prototype.load = function() { var t = this; if (this._load) return this._load; var e = this.source; return (e.readyState === e.HAVE_ENOUGH_DATA || e.readyState === e.HAVE_FUTURE_DATA) && e.width && e.height && (e.complete = !0), e.addEventListener("play", this._onPlayStart.bind(this)), e.addEventListener("pause", this._onPlayStop.bind(this)), this._isSourceReady() ? this._onCanPlay() : (e.addEventListener("canplay", this._onCanPlay), e.addEventListener("canplaythrough", this._onCanPlay), e.addEventListener("error", this._onError, !0)), this._load = new Promise((function(i) { t.valid ? i(t) : (t._resolve = i, e.load()) })), this._load }, e.prototype._onError = function(t) { this.source.removeEventListener("error", this._onError, !0), this.onError.emit(t) }, e.prototype._isSourcePlaying = function() { var t = this.source; return t.currentTime > 0 && !1 === t.paused && !1 === t.ended && t.readyState > 2 }, e.prototype._isSourceReady = function() { var t = this.source; return 3 === t.readyState || 4 === t.readyState }, e.prototype._onPlayStart = function() { this.valid || this._onCanPlay(), this.autoUpdate && !this._isConnectedToTicker && (a.a.shared.add(this.update, this), this._isConnectedToTicker = !0) }, e.prototype._onPlayStop = function() { this._isConnectedToTicker && (a.a.shared.remove(this.update, this), this._isConnectedToTicker = !1) }, e.prototype._onCanPlay = function() { var t = this.source;
                t.removeEventListener("canplay", this._onCanPlay), t.removeEventListener("canplaythrough", this._onCanPlay); var e = this.valid;
                this.resize(t.videoWidth, t.videoHeight), !e && this._resolve && (this._resolve(this), this._resolve = null), this._isSourcePlaying() ? this._onPlayStart() : this.autoPlay && t.play() }, e.prototype.dispose = function() { this._isConnectedToTicker && a.a.shared.remove(this.update, this); var e = this.source;
                e && (e.removeEventListener("error", this._onError, !0), e.pause(), e.src = "", e.load()), t.prototype.dispose.call(this) }, Object.defineProperty(e.prototype, "autoUpdate", { get: function() { return this._autoUpdate }, set: function(t) { t !== this._autoUpdate && (this._autoUpdate = t, !this._autoUpdate && this._isConnectedToTicker ? (a.a.shared.remove(this.update, this), this._isConnectedToTicker = !1) : this._autoUpdate && !this._isConnectedToTicker && this._isSourcePlaying() && (a.a.shared.add(this.update, this), this._isConnectedToTicker = !0)) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "updateFPS", { get: function() { return this._updateFPS }, set: function(t) { t !== this._updateFPS && (this._updateFPS = t) }, enumerable: !1, configurable: !0 }), e.test = function(t, i) { return t instanceof HTMLVideoElement || e.TYPES.indexOf(i) > -1 }, e.TYPES = ["mp4", "m4v", "webm", "ogg", "ogv", "h264", "avi", "mov"], e.MIME_TYPES = { ogv: "video/ogg", mov: "video/quicktime", m4v: "video/mp4" }, e }(b),
        E = function(t) {
            function e() { return null !== t && t.apply(this, arguments) || this } return d(e, t), e.test = function(t) { return !!window.createImageBitmap && t instanceof ImageBitmap }, e }(b);
    u.push(w, E, _, S, T, f, x, v); var P = { Resource: p, BaseImageResource: b, INSTALLED: u, autoDetectResource: l, AbstractMultiResource: y, ArrayResource: v, BufferResource: f, CanvasResource: _, CubeResource: x, ImageResource: w, SVGResource: T, VideoResource: S, ImageBitmapResource: E },
        C = function() {
            function t(t) { this.renderer = t } return t.prototype.destroy = function() { this.renderer = null }, t }(),
        O = function(t) {
            function e() { return null !== t && t.apply(this, arguments) || this } return d(e, t), e.prototype.upload = function(t, e, i) { var n = t.gl; return n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL, e.alphaMode === r.a.UNPACK), i.width === e.width && i.height === e.height ? n.texSubImage2D(e.target, 0, 0, 0, e.width, e.height, e.format, e.type, this.data) : (i.width = e.width, i.height = e.height, n.texImage2D(e.target, 0, 1 === t.context.webGLVersion ? n.DEPTH_COMPONENT : n.DEPTH_COMPONENT16, e.width, e.height, 0, e.format, e.type, this.data)), !0 }, e }(f),
        A = function() {
            function t(t, e) { this.width = Math.ceil(t || 100), this.height = Math.ceil(e || 100), this.stencil = !1, this.depth = !1, this.dirtyId = 0, this.dirtyFormat = 0, this.dirtySize = 0, this.depthTexture = null, this.colorTextures = [], this.glFramebuffers = {}, this.disposeRunner = new o.a("disposeFramebuffer"), this.multisample = r.k.NONE } return Object.defineProperty(t.prototype, "colorTexture", { get: function() { return this.colorTextures[0] }, enumerable: !1, configurable: !0 }), t.prototype.addColorTexture = function(t, e) { return void 0 === t && (t = 0), this.colorTextures[t] = e || new g(null, { scaleMode: r.n.NEAREST, resolution: 1, mipmap: r.j.OFF, width: this.width, height: this.height }), this.dirtyId++, this.dirtyFormat++, this }, t.prototype.addDepthTexture = function(t) { return this.depthTexture = t || new g(new O(null, { width: this.width, height: this.height }), { scaleMode: r.n.NEAREST, resolution: 1, width: this.width, height: this.height, mipmap: r.j.OFF, format: r.g.DEPTH_COMPONENT, type: r.p.UNSIGNED_SHORT }), this.dirtyId++, this.dirtyFormat++, this }, t.prototype.enableDepth = function() { return this.depth = !0, this.dirtyId++, this.dirtyFormat++, this }, t.prototype.enableStencil = function() { return this.stencil = !0, this.dirtyId++, this.dirtyFormat++, this }, t.prototype.resize = function(t, e) { if (t = Math.ceil(t), e = Math.ceil(e), t !== this.width || e !== this.height) { this.width = t, this.height = e, this.dirtyId++, this.dirtySize++; for (var i = 0; i < this.colorTextures.length; i++) { var n = this.colorTextures[i],
                            r = n.resolution;
                        n.setSize(t / r, e / r) } if (this.depthTexture) { r = this.depthTexture.resolution;
                        this.depthTexture.setSize(t / r, e / r) } } }, t.prototype.dispose = function() { this.disposeRunner.emit(this, !1) }, t.prototype.destroyDepthTexture = function() { this.depthTexture && (this.depthTexture.destroy(), this.depthTexture = null, ++this.dirtyId, ++this.dirtyFormat) }, t }(),
        I = function(t) {
            function e(e) { var i = this; if ("number" == typeof e) { var n = arguments[0],
                        r = arguments[1],
                        s = arguments[2],
                        o = arguments[3];
                    e = { width: n, height: r, scaleMode: s, resolution: o } } i = t.call(this, null, e) || this; var a = e || {},
                    h = a.width,
                    u = a.height; return i.mipmap = 0, i.width = Math.ceil(h) || 100, i.height = Math.ceil(u) || 100, i.valid = !0, i.clearColor = [0, 0, 0, 0], i.framebuffer = new A(i.width * i.resolution, i.height * i.resolution).addColorTexture(0, i), i.maskStack = [], i.filterStack = [{}], i } return d(e, t), e.prototype.resize = function(t, e) { t = Math.ceil(t), e = Math.ceil(e), this.framebuffer.resize(t * this.resolution, e * this.resolution) }, e.prototype.dispose = function() { this.framebuffer.dispose(), t.prototype.dispose.call(this) }, e.prototype.destroy = function() { t.prototype.destroy.call(this), this.framebuffer.destroyDepthTexture(), this.framebuffer = null }, e }(g),
        R = function() {
            function t() { this.x0 = 0, this.y0 = 0, this.x1 = 1, this.y1 = 0, this.x2 = 1, this.y2 = 1, this.x3 = 0, this.y3 = 1, this.uvsFloat32 = new Float32Array(8) } return t.prototype.set = function(t, e, i) { var n = e.width,
                    r = e.height; if (i) { var s = t.width / 2 / n,
                        o = t.height / 2 / r,
                        a = t.x / n + s,
                        u = t.y / r + o;
                    i = h.n.add(i, h.n.NW), this.x0 = a + s * h.n.uX(i), this.y0 = u + o * h.n.uY(i), i = h.n.add(i, 2), this.x1 = a + s * h.n.uX(i), this.y1 = u + o * h.n.uY(i), i = h.n.add(i, 2), this.x2 = a + s * h.n.uX(i), this.y2 = u + o * h.n.uY(i), i = h.n.add(i, 2), this.x3 = a + s * h.n.uX(i), this.y3 = u + o * h.n.uY(i) } else this.x0 = t.x / n, this.y0 = t.y / r, this.x1 = (t.x + t.width) / n, this.y1 = t.y / r, this.x2 = (t.x + t.width) / n, this.y2 = (t.y + t.height) / r, this.x3 = t.x / n, this.y3 = (t.y + t.height) / r;
                this.uvsFloat32[0] = this.x0, this.uvsFloat32[1] = this.y0, this.uvsFloat32[2] = this.x1, this.uvsFloat32[3] = this.y1, this.uvsFloat32[4] = this.x2, this.uvsFloat32[5] = this.y2, this.uvsFloat32[6] = this.x3, this.uvsFloat32[7] = this.y3 }, t }(),
        M = new R,
        L = function(t) {
            function e(i, n, r, s, o, a) { var u = t.call(this) || this; if (u.noFrame = !1, n || (u.noFrame = !0, n = new h.j(0, 0, 1, 1)), i instanceof e && (i = i.baseTexture), u.baseTexture = i, u._frame = n, u.trim = s, u.valid = !1, u._uvs = M, u.uvMatrix = null, u.orig = r || n, u._rotate = Number(o || 0), !0 === o) u._rotate = 2;
                else if (u._rotate % 2 != 0) throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually"); return u.defaultAnchor = a ? new h.g(a.x, a.y) : new h.g(0, 0), u._updateID = 0, u.textureCacheIds = [], i.valid ? u.noFrame ? i.valid && u.onBaseTextureUpdated(i) : u.frame = n : i.once("loaded", u.onBaseTextureUpdated, u), u.noFrame && i.on("update", u.onBaseTextureUpdated, u), u } return d(e, t), e.prototype.update = function() { this.baseTexture.resource && this.baseTexture.resource.update() }, e.prototype.onBaseTextureUpdated = function(t) { if (this.noFrame) { if (!this.baseTexture.valid) return;
                    this._frame.width = t.width, this._frame.height = t.height, this.valid = !0, this.updateUvs() } else this.frame = this._frame;
                this.emit("update", this) }, e.prototype.destroy = function(t) { if (this.baseTexture) { if (t) { var i = this.baseTexture;
                        i && i.url && s.TextureCache[i.url] && e.removeFromCache(i.url), this.baseTexture.destroy() } this.baseTexture.off("loaded", this.onBaseTextureUpdated, this), this.baseTexture.off("update", this.onBaseTextureUpdated, this), this.baseTexture = null } this._frame = null, this._uvs = null, this.trim = null, this.orig = null, this.valid = !1, e.removeFromCache(this), this.textureCacheIds = null }, e.prototype.clone = function() { return new e(this.baseTexture, this.frame.clone(), this.orig.clone(), this.trim && this.trim.clone(), this.rotate, this.defaultAnchor) }, e.prototype.updateUvs = function() { this._uvs === M && (this._uvs = new R), this._uvs.set(this._frame, this.baseTexture, this.rotate), this._updateID++ }, e.from = function(t, i, r) { void 0 === i && (i = {}), void 0 === r && (r = n.b.STRICT_TEXTURE_CACHE); var o = "string" == typeof t,
                    a = null;
                o ? a = t : (t._pixiId || (t._pixiId = "pixiid_" + Object(s.uid)()), a = t._pixiId); var h = s.TextureCache[a]; if (o && r && !h) throw new Error('The cacheId "' + a + '" does not exist in TextureCache.'); return h || (i.resolution || (i.resolution = Object(s.getResolutionOfUrl)(t)), (h = new e(new g(t, i))).baseTexture.cacheId = a, g.addToCache(h.baseTexture, a), e.addToCache(h, a)), h }, e.fromURL = function(t, i) { var n = Object.assign({ autoLoad: !1 }, null == i ? void 0 : i.resourceOptions),
                    r = e.from(t, Object.assign({ resourceOptions: n }, i), !1),
                    s = r.baseTexture.resource; return r.baseTexture.valid ? Promise.resolve(r) : s.load().then((function() { return Promise.resolve(r) })) }, e.fromBuffer = function(t, i, n, r) { return new e(g.fromBuffer(t, i, n, r)) }, e.fromLoader = function(t, i, r) { var o = new w(t);
                o.url = i; var a = new e(new g(o, { scaleMode: n.b.SCALE_MODE, resolution: Object(s.getResolutionOfUrl)(i) })); return r || (r = i), g.addToCache(a.baseTexture, r), e.addToCache(a, r), r !== i && (g.addToCache(a.baseTexture, i), e.addToCache(a, i)), a }, e.addToCache = function(t, e) { e && (-1 === t.textureCacheIds.indexOf(e) && t.textureCacheIds.push(e), s.TextureCache[e], s.TextureCache[e] = t) }, e.removeFromCache = function(t) { if ("string" == typeof t) { var e = s.TextureCache[t]; if (e) { var i = e.textureCacheIds.indexOf(t); return i > -1 && e.textureCacheIds.splice(i, 1), delete s.TextureCache[t], e } } else if (t && t.textureCacheIds) { for (var n = 0; n < t.textureCacheIds.length; ++n) s.TextureCache[t.textureCacheIds[n]] === t && delete s.TextureCache[t.textureCacheIds[n]]; return t.textureCacheIds.length = 0, t } return null }, Object.defineProperty(e.prototype, "resolution", { get: function() { return this.baseTexture.resolution }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "frame", { get: function() { return this._frame }, set: function(t) { this._frame = t, this.noFrame = !1; var e = t.x,
                        i = t.y,
                        n = t.width,
                        r = t.height,
                        s = e + n > this.baseTexture.width,
                        o = i + r > this.baseTexture.height; if (s || o) { var a = s && o ? "and" : "or",
                            h = "X: " + e + " + " + n + " = " + (e + n) + " > " + this.baseTexture.width,
                            u = "Y: " + i + " + " + r + " = " + (i + r) + " > " + this.baseTexture.height; throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: " + h + " " + a + " " + u) } this.valid = n && r && this.baseTexture.valid, this.trim || this.rotate || (this.orig = t), this.valid && this.updateUvs() }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "rotate", { get: function() { return this._rotate }, set: function(t) { this._rotate = t, this.valid && this.updateUvs() }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "width", { get: function() { return this.orig.width }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "height", { get: function() { return this.orig.height }, enumerable: !1, configurable: !0 }), e.prototype.castToBaseTexture = function() { return this.baseTexture }, e }(s.EventEmitter);

    function D(t) { t.destroy = function() {}, t.on = function() {}, t.once = function() {}, t.emit = function() {} } L.EMPTY = new L(new g), D(L.EMPTY), D(L.EMPTY.baseTexture), L.WHITE = function() { var t = document.createElement("canvas");
        t.width = 16, t.height = 16; var e = t.getContext("2d"); return e.fillStyle = "white", e.fillRect(0, 0, 16, 16), new L(new g(new _(t))) }(), D(L.WHITE), D(L.WHITE.baseTexture); var k = function(t) {
            function e(e, i) { var n = this,
                    r = null; if (!(e instanceof I)) { var s = arguments[1],
                        o = arguments[2],
                        a = arguments[3],
                        h = arguments[4];
                    r = arguments[0], i = null, e = new I({ width: s, height: o, scaleMode: a, resolution: h }) } return (n = t.call(this, e, i) || this).legacyRenderer = r, n.valid = !0, n.filterFrame = null, n.filterPoolKey = null, n.updateUvs(), n } return d(e, t), Object.defineProperty(e.prototype, "framebuffer", { get: function() { return this.baseTexture.framebuffer }, enumerable: !1, configurable: !0 }), e.prototype.resize = function(t, e, i) { void 0 === i && (i = !0), t = Math.ceil(t), e = Math.ceil(e), this.valid = t > 0 && e > 0, this._frame.width = this.orig.width = t, this._frame.height = this.orig.height = e, i && this.baseTexture.resize(t, e), this.updateUvs() }, e.prototype.setResolution = function(t) { var e = this.baseTexture;
                e.resolution !== t && (e.setResolution(t), this.resize(e.width, e.height, !1)) }, e.create = function(t) { return "number" == typeof t && (t = { width: t, height: arguments[1], scaleMode: arguments[2], resolution: arguments[3] }), new e(new I(t)) }, e }(L),
        N = function() {
            function t(t) { this.texturePool = {}, this.textureOptions = t || {}, this.enableFullScreen = !1, this._pixelsWidth = 0, this._pixelsHeight = 0 } return t.prototype.createTexture = function(t, e) { var i = new I(Object.assign({ width: t, height: e, resolution: 1 }, this.textureOptions)); return new k(i) }, t.prototype.getOptimalTexture = function(e, i, n) { void 0 === n && (n = 1); var r = t.SCREEN_KEY;
                e *= n, i *= n, this.enableFullScreen && e === this._pixelsWidth && i === this._pixelsHeight || (r = (65535 & (e = Object(s.nextPow2)(e))) << 16 | 65535 & (i = Object(s.nextPow2)(i))), this.texturePool[r] || (this.texturePool[r] = []); var o = this.texturePool[r].pop(); return o || (o = this.createTexture(e, i)), o.filterPoolKey = r, o.setResolution(n), o }, t.prototype.getFilterTexture = function(t, e) { var i = this.getOptimalTexture(t.width, t.height, e || t.resolution); return i.filterFrame = t.filterFrame, i }, t.prototype.returnTexture = function(t) { var e = t.filterPoolKey;
                t.filterFrame = null, this.texturePool[e].push(t) }, t.prototype.returnFilterTexture = function(t) { this.returnTexture(t) }, t.prototype.clear = function(t) { if (t = !1 !== t)
                    for (var e in this.texturePool) { var i = this.texturePool[e]; if (i)
                            for (var n = 0; n < i.length; n++) i[n].destroy(!0) } this.texturePool = {} }, t.prototype.setScreenSize = function(e) { if (e.width !== this._pixelsWidth || e.height !== this._pixelsHeight) { var i = t.SCREEN_KEY,
                        n = this.texturePool[i]; if (this.enableFullScreen = e.width > 0 && e.height > 0, n)
                        for (var r = 0; r < n.length; r++) n[r].destroy(!0);
                    this.texturePool[i] = [], this._pixelsWidth = e.width, this._pixelsHeight = e.height } }, t.SCREEN_KEY = "screen", t }(),
        F = function() {
            function t(t, e, i, n, r, s, o) { void 0 === e && (e = 0), void 0 === i && (i = !1), void 0 === n && (n = 5126), this.buffer = t, this.size = e, this.normalized = i, this.type = n, this.stride = r, this.start = s, this.instance = o } return t.prototype.destroy = function() { this.buffer = null }, t.from = function(e, i, n, r, s) { return new t(e, i, n, r, s) }, t }(),
        B = 0,
        j = function() {
            function t(t, e, i) { void 0 === e && (e = !0), void 0 === i && (i = !1), this.data = t || new Float32Array(1), this._glBuffers = {}, this._updateID = 0, this.index = i, this["static"] = e, this.id = B++, this.disposeRunner = new o.a("disposeBuffer") } return t.prototype.update = function(t) { this.data = t || this.data, this._updateID++ }, t.prototype.dispose = function() { this.disposeRunner.emit(this, !1) }, t.prototype.destroy = function() { this.dispose(), this.data = null }, t.from = function(e) { return e instanceof Array && (e = new Float32Array(e)), new t(e) }, t }();

    function U(t) { if (4 === t.BYTES_PER_ELEMENT) return t instanceof Float32Array ? "Float32Array" : t instanceof Uint32Array ? "Uint32Array" : "Int32Array"; if (2 === t.BYTES_PER_ELEMENT) { if (t instanceof Uint16Array) return "Uint16Array" } else if (1 === t.BYTES_PER_ELEMENT && t instanceof Uint8Array) return "Uint8Array"; return null } var G = { Float32Array: Float32Array, Uint32Array: Uint32Array, Int32Array: Int32Array, Uint8Array: Uint8Array }; var X = { 5126: 4, 5123: 2, 5121: 1 },
        H = 0,
        z = { Float32Array: Float32Array, Uint32Array: Uint32Array, Int32Array: Int32Array, Uint8Array: Uint8Array, Uint16Array: Uint16Array },
        V = function() {
            function t(t, e) { void 0 === t && (t = []), void 0 === e && (e = {}), this.buffers = t, this.indexBuffer = null, this.attributes = e, this.glVertexArrayObjects = {}, this.id = H++, this.instanced = !1, this.instanceCount = 1, this.disposeRunner = new o.a("disposeGeometry"), this.refCount = 0 } return t.prototype.addAttribute = function(t, e, i, n, r, s, o, a) { if (void 0 === i && (i = 0), void 0 === n && (n = !1), void 0 === a && (a = !1), !e) throw new Error("You must pass a buffer when creating an attribute");
                e instanceof j || (e instanceof Array && (e = new Float32Array(e)), e = new j(e)); var h = t.split("|"); if (h.length > 1) { for (var u = 0; u < h.length; u++) this.addAttribute(h[u], e, i, n, r); return this } var l = this.buffers.indexOf(e); return -1 === l && (this.buffers.push(e), l = this.buffers.length - 1), this.attributes[t] = new F(l, i, n, r, s, o, a), this.instanced = this.instanced || a, this }, t.prototype.getAttribute = function(t) { return this.attributes[t] }, t.prototype.getBuffer = function(t) { return this.buffers[this.getAttribute(t).buffer] }, t.prototype.addIndex = function(t) { return t instanceof j || (t instanceof Array && (t = new Uint16Array(t)), t = new j(t)), t.index = !0, this.indexBuffer = t, -1 === this.buffers.indexOf(t) && this.buffers.push(t), this }, t.prototype.getIndex = function() { return this.indexBuffer }, t.prototype.interleave = function() { if (1 === this.buffers.length || 2 === this.buffers.length && this.indexBuffer) return this; var t, e = [],
                    i = [],
                    n = new j; for (t in this.attributes) { var r = this.attributes[t],
                        s = this.buffers[r.buffer];
                    e.push(s.data), i.push(r.size * X[r.type] / 4), r.buffer = 0 } for (n.data = function(t, e) { for (var i = 0, n = 0, r = {}, s = 0; s < t.length; s++) n += e[s], i += t[s].length; var o = new ArrayBuffer(4 * i),
                            a = null,
                            h = 0; for (s = 0; s < t.length; s++) { var u = e[s],
                                l = t[s],
                                c = U(l);
                            r[c] || (r[c] = new G[c](o)), a = r[c]; for (var d = 0; d < l.length; d++) a[(d / u | 0) * n + h + d % u] = l[d];
                            h += u } return new Float32Array(o) }(e, i), t = 0; t < this.buffers.length; t++) this.buffers[t] !== this.indexBuffer && this.buffers[t].destroy(); return this.buffers = [n], this.indexBuffer && this.buffers.push(this.indexBuffer), this }, t.prototype.getSize = function() { for (var t in this.attributes) { var e = this.attributes[t]; return this.buffers[e.buffer].data.length / (e.stride / 4 || e.size) } return 0 }, t.prototype.dispose = function() { this.disposeRunner.emit(this, !1) }, t.prototype.destroy = function() { this.dispose(), this.buffers = null, this.indexBuffer = null, this.attributes = null }, t.prototype.clone = function() { for (var e = new t, i = 0; i < this.buffers.length; i++) e.buffers[i] = new j(this.buffers[i].data.slice(0)); for (var i in this.attributes) { var n = this.attributes[i];
                    e.attributes[i] = new F(n.buffer, n.size, n.normalized, n.type, n.stride, n.start, n.instance) } return this.indexBuffer && (e.indexBuffer = e.buffers[this.buffers.indexOf(this.indexBuffer)], e.indexBuffer.index = !0), e }, t.merge = function(e) { for (var i, n = new t, r = [], s = [], o = [], a = 0; a < e.length; a++) { i = e[a]; for (var h = 0; h < i.buffers.length; h++) s[h] = s[h] || 0, s[h] += i.buffers[h].data.length, o[h] = 0 } for (a = 0; a < i.buffers.length; a++) r[a] = new(z[U(i.buffers[a].data)])(s[a]), n.buffers[a] = new j(r[a]); for (a = 0; a < e.length; a++) { i = e[a]; for (h = 0; h < i.buffers.length; h++) r[h].set(i.buffers[h].data, o[h]), o[h] += i.buffers[h].data.length } if (n.attributes = i.attributes, i.indexBuffer) { n.indexBuffer = n.buffers[i.buffers.indexOf(i.indexBuffer)], n.indexBuffer.index = !0; var u = 0,
                        l = 0,
                        c = 0,
                        d = 0; for (a = 0; a < i.buffers.length; a++)
                        if (i.buffers[a] !== i.indexBuffer) { d = a; break } for (var a in i.attributes) { var p = i.attributes[a];
                        (0 | p.buffer) === d && (l += p.size * X[p.type] / 4) } for (a = 0; a < e.length; a++) { var f = e[a].indexBuffer.data; for (h = 0; h < f.length; h++) n.indexBuffer.data[h + c] += u;
                        u += i.buffers[d].data.length / l, c += f.length } } return n }, t }(),
        W = function(t) {
            function e() { var e = t.call(this) || this; return e.addAttribute("aVertexPosition", new Float32Array([0, 0, 1, 0, 1, 1, 0, 1])).addIndex([0, 1, 3, 2]), e } return d(e, t), e }(V),
        Y = function(t) {
            function e() { var e = t.call(this) || this; return e.vertices = new Float32Array([-1, -1, 1, -1, 1, 1, -1, 1]), e.uvs = new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]), e.vertexBuffer = new j(e.vertices), e.uvBuffer = new j(e.uvs), e.addAttribute("aVertexPosition", e.vertexBuffer).addAttribute("aTextureCoord", e.uvBuffer).addIndex([0, 1, 2, 0, 2, 3]), e } return d(e, t), e.prototype.map = function(t, e) { var i = 0,
                    n = 0; return this.uvs[0] = i, this.uvs[1] = n, this.uvs[2] = i + e.width / t.width, this.uvs[3] = n, this.uvs[4] = i + e.width / t.width, this.uvs[5] = n + e.height / t.height, this.uvs[6] = i, this.uvs[7] = n + e.height / t.height, i = e.x, n = e.y, this.vertices[0] = i, this.vertices[1] = n, this.vertices[2] = i + e.width, this.vertices[3] = n, this.vertices[4] = i + e.width, this.vertices[5] = n + e.height, this.vertices[6] = i, this.vertices[7] = n + e.height, this.invalidate(), this }, e.prototype.invalidate = function() { return this.vertexBuffer._updateID++, this.uvBuffer._updateID++, this }, e }(V),
        K = 0,
        q = function() {
            function t(t, e) { this.uniforms = t, this.group = !0, this.syncUniforms = {}, this.dirtyId = 0, this.id = K++, this["static"] = !!e } return t.prototype.update = function() { this.dirtyId++ }, t.prototype.add = function(e, i, n) { this.uniforms[e] = new t(i, n) }, t.from = function(e, i) { return new t(e, i) }, t }(),
        Q = function() {
            function t() { this.renderTexture = null, this.target = null, this.legacy = !1, this.resolution = 1, this.sourceFrame = new h.j, this.destinationFrame = new h.j, this.filters = [] } return t.prototype.clear = function() { this.target = null, this.filters = null, this.renderTexture = null }, t }(),
        $ = function(t) {
            function e(e) { var i = t.call(this, e) || this; return i.defaultFilterStack = [{}], i.texturePool = new N, i.texturePool.setScreenSize(e.view), i.statePool = [], i.quad = new W, i.quadUv = new Y, i.tempRect = new h.j, i.activeState = {}, i.globalUniforms = new q({ outputFrame: i.tempRect, inputSize: new Float32Array(4), inputPixel: new Float32Array(4), inputClamp: new Float32Array(4), resolution: 1, filterArea: new Float32Array(4), filterClamp: new Float32Array(4) }, !0), i.forceClear = !1, i.useMaxPadding = !1, i } return d(e, t), e.prototype.push = function(t, e) { for (var i = this.renderer, n = this.defaultFilterStack, r = this.statePool.pop() || new Q, s = e[0].resolution, o = e[0].padding, a = e[0].autoFit, h = e[0].legacy, u = 1; u < e.length; u++) { var l = e[u];
                    s = Math.min(s, l.resolution), o = this.useMaxPadding ? Math.max(o, l.padding) : o + l.padding, a = a || l.autoFit, h = h || l.legacy } 1 === n.length && (this.defaultFilterStack[0].renderTexture = i.renderTexture.current), n.push(r), r.resolution = s, r.legacy = h, r.target = t, r.sourceFrame.copyFrom(t.filterArea || t.getBounds(!0)), r.sourceFrame.pad(o), a && r.sourceFrame.fit(this.renderer.renderTexture.sourceFrame), r.sourceFrame.ceil(s), r.renderTexture = this.getOptimalFilterTexture(r.sourceFrame.width, r.sourceFrame.height, s), r.filters = e, r.destinationFrame.width = r.renderTexture.width, r.destinationFrame.height = r.renderTexture.height; var c = this.tempRect;
                c.width = r.sourceFrame.width, c.height = r.sourceFrame.height, r.renderTexture.filterFrame = r.sourceFrame, i.renderTexture.bind(r.renderTexture, r.sourceFrame, c), i.renderTexture.clear() }, e.prototype.pop = function() { var t = this.defaultFilterStack,
                    e = t.pop(),
                    i = e.filters;
                this.activeState = e; var n = this.globalUniforms.uniforms;
                n.outputFrame = e.sourceFrame, n.resolution = e.resolution; var s = n.inputSize,
                    o = n.inputPixel,
                    a = n.inputClamp; if (s[0] = e.destinationFrame.width, s[1] = e.destinationFrame.height, s[2] = 1 / s[0], s[3] = 1 / s[1], o[0] = s[0] * e.resolution, o[1] = s[1] * e.resolution, o[2] = 1 / o[0], o[3] = 1 / o[1], a[0] = .5 * o[2], a[1] = .5 * o[3], a[2] = e.sourceFrame.width * s[2] - .5 * o[2], a[3] = e.sourceFrame.height * s[3] - .5 * o[3], e.legacy) { var h = n.filterArea;
                    h[0] = e.destinationFrame.width, h[1] = e.destinationFrame.height, h[2] = e.sourceFrame.x, h[3] = e.sourceFrame.y, n.filterClamp = n.inputClamp } this.globalUniforms.update(); var u = t[t.length - 1]; if (e.renderTexture.framebuffer.multisample > 1 && this.renderer.framebuffer.blit(), 1 === i.length) i[0].apply(this, e.renderTexture, u.renderTexture, r.d.BLEND, e), this.returnFilterTexture(e.renderTexture);
                else { var l = e.renderTexture,
                        c = this.getOptimalFilterTexture(l.width, l.height, e.resolution);
                    c.filterFrame = l.filterFrame; var d = 0; for (d = 0; d < i.length - 1; ++d) { i[d].apply(this, l, c, r.d.CLEAR, e); var p = l;
                        l = c, c = p } i[d].apply(this, l, u.renderTexture, r.d.BLEND, e), this.returnFilterTexture(l), this.returnFilterTexture(c) } e.clear(), this.statePool.push(e) }, e.prototype.bindAndClear = function(t, e) { if (void 0 === e && (e = r.d.CLEAR), t && t.filterFrame) { var i = this.tempRect;
                    i.width = t.filterFrame.width, i.height = t.filterFrame.height, this.renderer.renderTexture.bind(t, t.filterFrame, i) } else this.renderer.renderTexture.bind(t); "boolean" == typeof e && (e = e ? r.d.CLEAR : r.d.BLEND, Object(s.deprecation)("5.2.1", "Use CLEAR_MODES when using clear applyFilter option")), (e === r.d.CLEAR || e === r.d.BLIT && this.forceClear) && this.renderer.renderTexture.clear() }, e.prototype.applyFilter = function(t, e, i, n) { var s = this.renderer;
                this.bindAndClear(i, n), t.uniforms.uSampler = e, t.uniforms.filterGlobals = this.globalUniforms, s.state.set(t.state), s.shader.bind(t), t.legacy ? (this.quadUv.map(e._frame, e.filterFrame), s.geometry.bind(this.quadUv), s.geometry.draw(r.e.TRIANGLES)) : (s.geometry.bind(this.quad), s.geometry.draw(r.e.TRIANGLE_STRIP)) }, e.prototype.calculateSpriteMatrix = function(t, e) { var i = this.activeState,
                    n = i.sourceFrame,
                    r = i.destinationFrame,
                    s = e._texture.orig,
                    o = t.set(r.width, 0, 0, r.height, n.x, n.y),
                    a = e.worldTransform.copyTo(h.d.TEMP_MATRIX); return a.invert(), o.prepend(a), o.scale(1 / s.width, 1 / s.height), o.translate(e.anchor.x, e.anchor.y), o }, e.prototype.destroy = function() { this.texturePool.clear(!1) }, e.prototype.getOptimalFilterTexture = function(t, e, i) { return void 0 === i && (i = 1), this.texturePool.getOptimalTexture(t, e, i) }, e.prototype.getFilterTexture = function(t, e) { if ("number" == typeof t) { var i = t;
                    t = e, e = i } t = t || this.activeState.renderTexture; var n = this.texturePool.getOptimalTexture(t.width, t.height, e || t.resolution); return n.filterFrame = t.filterFrame, n }, e.prototype.returnFilterTexture = function(t) { this.texturePool.returnTexture(t) }, e.prototype.emptyPool = function() { this.texturePool.clear(!0) }, e.prototype.resize = function() { this.texturePool.setScreenSize(this.renderer.view) }, e }(C),
        Z = function() {
            function t(t) { this.renderer = t } return t.prototype.flush = function() {}, t.prototype.destroy = function() { this.renderer = null }, t.prototype.start = function() {}, t.prototype.stop = function() { this.flush() }, t.prototype.render = function(t) {}, t }(),
        J = function(t) {
            function e(e) { var i = t.call(this, e) || this; return i.emptyRenderer = new Z(e), i.currentRenderer = i.emptyRenderer, i } return d(e, t), e.prototype.setObjectRenderer = function(t) { this.currentRenderer !== t && (this.currentRenderer.stop(), this.currentRenderer = t, this.currentRenderer.start()) }, e.prototype.flush = function() { this.setObjectRenderer(this.emptyRenderer) }, e.prototype.reset = function() { this.setObjectRenderer(this.emptyRenderer) }, e.prototype.copyBoundTextures = function(t, e) { for (var i = this.renderer.texture.boundTextures, n = e - 1; n >= 0; --n) t[n] = i[n] || null, t[n] && (t[n]._batchLocation = n) }, e.prototype.boundArray = function(t, e, i, n) { for (var r = t.elements, s = t.ids, o = t.count, a = 0, h = 0; h < o; h++) { var u = r[h],
                        l = u._batchLocation; if (l >= 0 && l < n && e[l] === u) s[h] = l;
                    else
                        for (; a < n;) { var c = e[a]; if (!c || c._batchEnabled !== i || c._batchLocation !== a) { s[h] = a, u._batchLocation = a, e[a] = u; break } a++ } } }, e }(C),
        tt = 0,
        et = function(t) {
            function e(e) { var i = t.call(this, e) || this; return i.webGLVersion = 1, i.extensions = {}, i.supports = { uint32Indices: !1 }, i.handleContextLost = i.handleContextLost.bind(i), i.handleContextRestored = i.handleContextRestored.bind(i), e.view.addEventListener("webglcontextlost", i.handleContextLost, !1), e.view.addEventListener("webglcontextrestored", i.handleContextRestored, !1), i } return d(e, t), Object.defineProperty(e.prototype, "isLost", { get: function() { return !this.gl || this.gl.isContextLost() }, enumerable: !1, configurable: !0 }), e.prototype.contextChange = function(t) { this.gl = t, this.renderer.gl = t, this.renderer.CONTEXT_UID = tt++, t.isContextLost() && t.getExtension("WEBGL_lose_context") && t.getExtension("WEBGL_lose_context").restoreContext() }, e.prototype.initFromContext = function(t) { this.gl = t, this.validateContext(t), this.renderer.gl = t, this.renderer.CONTEXT_UID = tt++, this.renderer.runners.contextChange.emit(t) }, e.prototype.initFromOptions = function(t) { var e = this.createContext(this.renderer.view, t);
                this.initFromContext(e) }, e.prototype.createContext = function(t, e) { var i; if (n.b.PREFER_ENV >= r.f.WEBGL2 && (i = t.getContext("webgl2", e)), i) this.webGLVersion = 2;
                else if (this.webGLVersion = 1, !(i = t.getContext("webgl", e) || t.getContext("experimental-webgl", e))) throw new Error("This browser does not support WebGL. Try using the canvas renderer"); return this.gl = i, this.getExtensions(), this.gl }, e.prototype.getExtensions = function() { var t = this.gl;
                1 === this.webGLVersion ? Object.assign(this.extensions, { drawBuffers: t.getExtension("WEBGL_draw_buffers"), depthTexture: t.getExtension("WEBGL_depth_texture"), loseContext: t.getExtension("WEBGL_lose_context"), vertexArrayObject: t.getExtension("OES_vertex_array_object") || t.getExtension("MOZ_OES_vertex_array_object") || t.getExtension("WEBKIT_OES_vertex_array_object"), anisotropicFiltering: t.getExtension("EXT_texture_filter_anisotropic"), uint32ElementIndex: t.getExtension("OES_element_index_uint"), floatTexture: t.getExtension("OES_texture_float"), floatTextureLinear: t.getExtension("OES_texture_float_linear"), textureHalfFloat: t.getExtension("OES_texture_half_float"), textureHalfFloatLinear: t.getExtension("OES_texture_half_float_linear") }) : 2 === this.webGLVersion && Object.assign(this.extensions, { anisotropicFiltering: t.getExtension("EXT_texture_filter_anisotropic"), colorBufferFloat: t.getExtension("EXT_color_buffer_float"), floatTextureLinear: t.getExtension("OES_texture_float_linear") }) }, e.prototype.handleContextLost = function(t) { t.preventDefault() }, e.prototype.handleContextRestored = function() { this.renderer.runners.contextChange.emit(this.gl) }, e.prototype.destroy = function() { var t = this.renderer.view;
                t.removeEventListener("webglcontextlost", this.handleContextLost), t.removeEventListener("webglcontextrestored", this.handleContextRestored), this.gl.useProgram(null), this.extensions.loseContext && this.extensions.loseContext.loseContext() }, e.prototype.postrender = function() { this.renderer.renderingToScreen && this.gl.flush() }, e.prototype.validateContext = function(t) { t.getContextAttributes().stencil; var e = "WebGL2RenderingContext" in window && t instanceof window.WebGL2RenderingContext || !!t.getExtension("OES_element_index_uint");
                this.supports.uint32Indices = e }, e }(C),
        it = function(t) { this.framebuffer = t, this.stencil = null, this.dirtyId = 0, this.dirtyFormat = 0, this.dirtySize = 0, this.multisample = r.k.NONE, this.msaaBuffer = null, this.blitFramebuffer = null },
        nt = new h.j,
        rt = function(t) {
            function e(e) { var i = t.call(this, e) || this; return i.managedFramebuffers = [], i.unknownFramebuffer = new A(10, 10), i.msaaSamples = null, i } return d(e, t), e.prototype.contextChange = function() { var t = this.gl = this.renderer.gl; if (this.CONTEXT_UID = this.renderer.CONTEXT_UID, this.current = this.unknownFramebuffer, this.viewport = new h.j, this.hasMRT = !0, this.writeDepthTexture = !0, this.disposeAll(!0), 1 === this.renderer.context.webGLVersion) { var e = this.renderer.context.extensions.drawBuffers,
                        i = this.renderer.context.extensions.depthTexture;
                    n.b.PREFER_ENV === r.f.WEBGL_LEGACY && (e = null, i = null), e ? t.drawBuffers = function(t) { return e.drawBuffersWEBGL(t) } : (this.hasMRT = !1, t.drawBuffers = function() {}), i || (this.writeDepthTexture = !1) } else this.msaaSamples = t.getInternalformatParameter(t.RENDERBUFFER, t.RGBA8, t.SAMPLES) }, e.prototype.bind = function(t, e) { var i = this.gl; if (t) { var n = t.glFramebuffers[this.CONTEXT_UID] || this.initFramebuffer(t);
                    this.current !== t && (this.current = t, i.bindFramebuffer(i.FRAMEBUFFER, n.framebuffer)), n.dirtyId !== t.dirtyId && (n.dirtyId = t.dirtyId, n.dirtyFormat !== t.dirtyFormat ? (n.dirtyFormat = t.dirtyFormat, this.updateFramebuffer(t)) : n.dirtySize !== t.dirtySize && (n.dirtySize = t.dirtySize, this.resizeFramebuffer(t))); for (var r = 0; r < t.colorTextures.length; r++) { var s = t.colorTextures[r];
                        this.renderer.texture.unbind(s.parentTextureArray || s) } t.depthTexture && this.renderer.texture.unbind(t.depthTexture), e ? this.setViewport(e.x, e.y, e.width, e.height) : this.setViewport(0, 0, t.width, t.height) } else this.current && (this.current = null, i.bindFramebuffer(i.FRAMEBUFFER, null)), e ? this.setViewport(e.x, e.y, e.width, e.height) : this.setViewport(0, 0, this.renderer.width, this.renderer.height) }, e.prototype.setViewport = function(t, e, i, n) { var r = this.viewport;
                r.width === i && r.height === n && r.x === t && r.y === e || (r.x = t, r.y = e, r.width = i, r.height = n, this.gl.viewport(t, e, i, n)) }, Object.defineProperty(e.prototype, "size", { get: function() { return this.current ? { x: 0, y: 0, width: this.current.width, height: this.current.height } : { x: 0, y: 0, width: this.renderer.width, height: this.renderer.height } }, enumerable: !1, configurable: !0 }), e.prototype.clear = function(t, e, i, n, s) { void 0 === s && (s = r.c.COLOR | r.c.DEPTH); var o = this.gl;
                o.clearColor(t, e, i, n), o.clear(s) }, e.prototype.initFramebuffer = function(t) { var e = this.gl,
                    i = new it(e.createFramebuffer()); return i.multisample = this.detectSamples(t.multisample), t.glFramebuffers[this.CONTEXT_UID] = i, this.managedFramebuffers.push(t), t.disposeRunner.add(this), i }, e.prototype.resizeFramebuffer = function(t) { var e = this.gl,
                    i = t.glFramebuffers[this.CONTEXT_UID];
                i.stencil && (e.bindRenderbuffer(e.RENDERBUFFER, i.stencil), e.renderbufferStorage(e.RENDERBUFFER, e.DEPTH_STENCIL, t.width, t.height)); for (var n = t.colorTextures, r = 0; r < n.length; r++) this.renderer.texture.bind(n[r], 0);
                t.depthTexture && this.renderer.texture.bind(t.depthTexture, 0) }, e.prototype.updateFramebuffer = function(t) { var e = this.gl,
                    i = t.glFramebuffers[this.CONTEXT_UID],
                    n = t.colorTextures.length;
                e.drawBuffers || (n = Math.min(n, 1)), i.multisample > 1 && (i.msaaBuffer = e.createRenderbuffer(), e.bindRenderbuffer(e.RENDERBUFFER, i.msaaBuffer), e.renderbufferStorageMultisample(e.RENDERBUFFER, i.multisample, e.RGBA8, t.width, t.height), e.framebufferRenderbuffer(e.FRAMEBUFFER, e.COLOR_ATTACHMENT0, e.RENDERBUFFER, i.msaaBuffer)); for (var r = [], s = 0; s < n; s++)
                    if (!(0 === s && i.multisample > 1)) { var o = t.colorTextures[s],
                            a = o.parentTextureArray || o;
                        this.renderer.texture.bind(a, 0), e.framebufferTexture2D(e.FRAMEBUFFER, e.COLOR_ATTACHMENT0 + s, o.target, a._glTextures[this.CONTEXT_UID].texture, 0), r.push(e.COLOR_ATTACHMENT0 + s) } if ((r.length > 1 && e.drawBuffers(r), t.depthTexture) && this.writeDepthTexture) { var h = t.depthTexture;
                    this.renderer.texture.bind(h, 0), e.framebufferTexture2D(e.FRAMEBUFFER, e.DEPTH_ATTACHMENT, e.TEXTURE_2D, h._glTextures[this.CONTEXT_UID].texture, 0) } i.stencil || !t.stencil && !t.depth || (i.stencil = e.createRenderbuffer(), e.bindRenderbuffer(e.RENDERBUFFER, i.stencil), e.renderbufferStorage(e.RENDERBUFFER, e.DEPTH_STENCIL, t.width, t.height), t.depthTexture || e.framebufferRenderbuffer(e.FRAMEBUFFER, e.DEPTH_STENCIL_ATTACHMENT, e.RENDERBUFFER, i.stencil)) }, e.prototype.detectSamples = function(t) { var e = this.msaaSamples,
                    i = r.k.NONE; if (t <= 1 || null === e) return i; for (var n = 0; n < e.length; n++)
                    if (e[n] <= t) { i = e[n]; break } return 1 === i && (i = r.k.NONE), i }, e.prototype.blit = function(t, e, i) { var n = this.current,
                    r = this.renderer,
                    s = this.gl,
                    o = this.CONTEXT_UID; if (2 === r.context.webGLVersion && n) { var a = n.glFramebuffers[o]; if (a) { if (!t) { if (a.multisample <= 1) return;
                            a.blitFramebuffer || (a.blitFramebuffer = new A(n.width, n.height), a.blitFramebuffer.addColorTexture(0, n.colorTextures[0])), (t = a.blitFramebuffer).width = n.width, t.height = n.height } e || ((e = nt).width = n.width, e.height = n.height), i || (i = e); var h = e.width === i.width && e.height === i.height;
                        this.bind(t), s.bindFramebuffer(s.READ_FRAMEBUFFER, a.framebuffer), s.blitFramebuffer(e.x, e.y, e.width, e.height, i.x, i.y, i.width, i.height, s.COLOR_BUFFER_BIT, h ? s.NEAREST : s.LINEAR) } } }, e.prototype.disposeFramebuffer = function(t, e) { var i = t.glFramebuffers[this.CONTEXT_UID],
                    n = this.gl; if (i) { delete t.glFramebuffers[this.CONTEXT_UID]; var r = this.managedFramebuffers.indexOf(t);
                    r >= 0 && this.managedFramebuffers.splice(r, 1), t.disposeRunner.remove(this), e || (n.deleteFramebuffer(i.framebuffer), i.stencil && n.deleteRenderbuffer(i.stencil)) } }, e.prototype.disposeAll = function(t) { var e = this.managedFramebuffers;
                this.managedFramebuffers = []; for (var i = 0; i < e.length; i++) this.disposeFramebuffer(e[i], t) }, e.prototype.forceStencil = function() { var t = this.current; if (t) { var e = t.glFramebuffers[this.CONTEXT_UID]; if (e && !e.stencil) { t.enableStencil(); var i = t.width,
                            n = t.height,
                            r = this.gl,
                            s = r.createRenderbuffer();
                        r.bindRenderbuffer(r.RENDERBUFFER, s), r.renderbufferStorage(r.RENDERBUFFER, r.DEPTH_STENCIL, i, n), e.stencil = s, r.framebufferRenderbuffer(r.FRAMEBUFFER, r.DEPTH_STENCIL_ATTACHMENT, r.RENDERBUFFER, s) } } }, e.prototype.reset = function() { this.current = this.unknownFramebuffer, this.viewport = new h.j }, e }(C),
        st = function(t) { this.buffer = t || null, this.updateID = -1, this.byteLength = -1, this.refCount = 0 },
        ot = { 5126: 4, 5123: 2, 5121: 1 },
        at = function(t) {
            function e(e) { var i = t.call(this, e) || this; return i._activeGeometry = null, i._activeVao = null, i.hasVao = !0, i.hasInstance = !0, i.canUseUInt32ElementIndex = !1, i.managedGeometries = {}, i.managedBuffers = {}, i } return d(e, t), e.prototype.contextChange = function() { this.disposeAll(!0); var t = this.gl = this.renderer.gl,
                    e = this.renderer.context; if (this.CONTEXT_UID = this.renderer.CONTEXT_UID, !t.createVertexArray) { var i = this.renderer.context.extensions.vertexArrayObject;
                    n.b.PREFER_ENV === r.f.WEBGL_LEGACY && (i = null), i ? (t.createVertexArray = function() { return i.createVertexArrayOES() }, t.bindVertexArray = function(t) { return i.bindVertexArrayOES(t) }, t.deleteVertexArray = function(t) { return i.deleteVertexArrayOES(t) }) : (this.hasVao = !1, t.createVertexArray = function() { return null }, t.bindVertexArray = function() { return null }, t.deleteVertexArray = function() { return null }) } if (!t.vertexAttribDivisor) { var s = t.getExtension("ANGLE_instanced_arrays");
                    s ? (t.vertexAttribDivisor = function(t, e) { return s.vertexAttribDivisorANGLE(t, e) }, t.drawElementsInstanced = function(t, e, i, n, r) { return s.drawElementsInstancedANGLE(t, e, i, n, r) }, t.drawArraysInstanced = function(t, e, i, n) { return s.drawArraysInstancedANGLE(t, e, i, n) }) : this.hasInstance = !1 } this.canUseUInt32ElementIndex = 2 === e.webGLVersion || !!e.extensions.uint32ElementIndex }, e.prototype.bind = function(t, e) { e = e || this.renderer.shader.shader; var i = this.gl,
                    n = t.glVertexArrayObjects[this.CONTEXT_UID];
                n || (this.managedGeometries[t.id] = t, t.disposeRunner.add(this), t.glVertexArrayObjects[this.CONTEXT_UID] = n = {}); var r = n[e.program.id] || this.initGeometryVao(t, e.program);
                this._activeGeometry = t, this._activeVao !== r && (this._activeVao = r, this.hasVao ? i.bindVertexArray(r) : this.activateVao(t, e.program)), this.updateBuffers() }, e.prototype.reset = function() { this.unbind() }, e.prototype.updateBuffers = function() { for (var t = this._activeGeometry, e = this.gl, i = 0; i < t.buffers.length; i++) { var n = t.buffers[i],
                        r = n._glBuffers[this.CONTEXT_UID]; if (n._updateID !== r.updateID) { r.updateID = n._updateID; var s = n.index ? e.ELEMENT_ARRAY_BUFFER : e.ARRAY_BUFFER; if (e.bindBuffer(s, r.buffer), this._boundBuffer = r, r.byteLength >= n.data.byteLength) e.bufferSubData(s, 0, n.data);
                        else { var o = n["static"] ? e.STATIC_DRAW : e.DYNAMIC_DRAW;
                            r.byteLength = n.data.byteLength, e.bufferData(s, n.data, o) } } } }, e.prototype.checkCompatibility = function(t, e) { var i = t.attributes,
                    n = e.attributeData; for (var r in n)
                    if (!i[r]) throw new Error('shader and geometry incompatible, geometry missing the "' + r + '" attribute') }, e.prototype.getSignature = function(t, e) { var i = t.attributes,
                    n = e.attributeData,
                    r = ["g", t.id]; for (var s in i) n[s] && r.push(s); return r.join("-") }, e.prototype.initGeometryVao = function(t, e) { this.checkCompatibility(t, e); var i = this.gl,
                    n = this.CONTEXT_UID,
                    r = this.getSignature(t, e),
                    s = t.glVertexArrayObjects[this.CONTEXT_UID],
                    o = s[r]; if (o) return s[e.id] = o, o; var a = t.buffers,
                    h = t.attributes,
                    u = {},
                    l = {}; for (var c in a) u[c] = 0, l[c] = 0; for (var c in h) !h[c].size && e.attributeData[c] ? h[c].size = e.attributeData[c].size : h[c].size, u[h[c].buffer] += h[c].size * ot[h[c].type]; for (var c in h) { var d = h[c],
                        p = d.size;
                    d.stride === undefined && (u[d.buffer] === p * ot[d.type] ? d.stride = 0 : d.stride = u[d.buffer]), d.start === undefined && (d.start = l[d.buffer], l[d.buffer] += p * ot[d.type]) } o = i.createVertexArray(), i.bindVertexArray(o); for (var f = 0; f < a.length; f++) { var m = a[f];
                    m._glBuffers[n] || (m._glBuffers[n] = new st(i.createBuffer()), this.managedBuffers[m.id] = m, m.disposeRunner.add(this)), m._glBuffers[n].refCount++ } return this.activateVao(t, e), this._activeVao = o, s[e.id] = o, s[r] = o, o }, e.prototype.disposeBuffer = function(t, e) { if (this.managedBuffers[t.id]) { delete this.managedBuffers[t.id]; var i = t._glBuffers[this.CONTEXT_UID],
                        n = this.gl;
                    t.disposeRunner.remove(this), i && (e || n.deleteBuffer(i.buffer), delete t._glBuffers[this.CONTEXT_UID]) } }, e.prototype.disposeGeometry = function(t, e) { if (this.managedGeometries[t.id]) { delete this.managedGeometries[t.id]; var i = t.glVertexArrayObjects[this.CONTEXT_UID],
                        n = this.gl,
                        r = t.buffers; if (t.disposeRunner.remove(this), i) { for (var s = 0; s < r.length; s++) { var o = r[s]._glBuffers[this.CONTEXT_UID];
                            o.refCount--, 0 !== o.refCount || e || this.disposeBuffer(r[s], e) } if (!e)
                            for (var a in i)
                                if ("g" === a[0]) { var h = i[a];
                                    this._activeVao === h && this.unbind(), n.deleteVertexArray(h) } delete t.glVertexArrayObjects[this.CONTEXT_UID] } } }, e.prototype.disposeAll = function(t) { for (var e = Object.keys(this.managedGeometries), i = 0; i < e.length; i++) this.disposeGeometry(this.managedGeometries[e[i]], t);
                e = Object.keys(this.managedBuffers); for (i = 0; i < e.length; i++) this.disposeBuffer(this.managedBuffers[e[i]], t) }, e.prototype.activateVao = function(t, e) { var i = this.gl,
                    n = this.CONTEXT_UID,
                    r = t.buffers,
                    s = t.attributes;
                t.indexBuffer && i.bindBuffer(i.ELEMENT_ARRAY_BUFFER, t.indexBuffer._glBuffers[n].buffer); var o = null; for (var a in s) { var h = s[a],
                        u = r[h.buffer]._glBuffers[n]; if (e.attributeData[a]) { o !== u && (i.bindBuffer(i.ARRAY_BUFFER, u.buffer), o = u); var l = e.attributeData[a].location; if (i.enableVertexAttribArray(l), i.vertexAttribPointer(l, h.size, h.type || i.FLOAT, h.normalized, h.stride, h.start), h.instance) { if (!this.hasInstance) throw new Error("geometry error, GPU Instancing is not supported on this device");
                            i.vertexAttribDivisor(l, 1) } } } }, e.prototype.draw = function(t, e, i, n) { var r = this.gl,
                    s = this._activeGeometry; if (s.indexBuffer) { var o = s.indexBuffer.data.BYTES_PER_ELEMENT,
                        a = 2 === o ? r.UNSIGNED_SHORT : r.UNSIGNED_INT;
                    (2 === o || 4 === o && this.canUseUInt32ElementIndex) && (s.instanced ? r.drawElementsInstanced(t, e || s.indexBuffer.data.length, a, (i || 0) * o, n || 1) : r.drawElements(t, e || s.indexBuffer.data.length, a, (i || 0) * o)) } else s.instanced ? r.drawArraysInstanced(t, i, e || s.getSize(), n || 1) : r.drawArrays(t, i, e || s.getSize()); return this }, e.prototype.unbind = function() { this.gl.bindVertexArray(null), this._activeVao = null, this._activeGeometry = null }, e }(C),
        ht = function() {
            function t(t) { void 0 === t && (t = null), this.type = r.i.NONE, this.autoDetect = !0, this.maskObject = t || null, this.pooled = !1, this.isMaskData = !0, this._stencilCounter = 0, this._scissorCounter = 0, this._scissorRect = null, this._target = null } return t.prototype.reset = function() { this.pooled && (this.maskObject = null, this.type = r.i.NONE, this.autoDetect = !0), this._target = null }, t.prototype.copyCountersOrReset = function(t) { t ? (this._stencilCounter = t._stencilCounter, this._scissorCounter = t._scissorCounter, this._scissorRect = t._scissorRect) : (this._stencilCounter = 0, this._scissorCounter = 0, this._scissorRect = null) }, t }();

    function ut(t, e, i) { var n = t.createShader(e); return t.shaderSource(n, i), t.compileShader(n), n }

    function lt(t, e, i, n) { var r = ut(t, t.VERTEX_SHADER, e),
            s = ut(t, t.FRAGMENT_SHADER, i),
            o = t.createProgram(); if (t.attachShader(o, r), t.attachShader(o, s), n)
            for (var a in n) t.bindAttribLocation(o, n[a], a); return t.linkProgram(o), t.getProgramParameter(o, t.LINK_STATUS) || (t.getShaderParameter(r, t.COMPILE_STATUS), t.getShaderParameter(s, t.COMPILE_STATUS), t.getProgramInfoLog(o), t.deleteProgram(o), o = null), t.deleteShader(r), t.deleteShader(s), o }

    function ct(t) { for (var e = new Array(t), i = 0; i < e.length; i++) e[i] = !1; return e }

    function dt(t, e) { switch (t) {
            case "float":
                return 0;
            case "vec2":
                return new Float32Array(2 * e);
            case "vec3":
                return new Float32Array(3 * e);
            case "vec4":
                return new Float32Array(4 * e);
            case "int":
            case "sampler2D":
            case "sampler2DArray":
                return 0;
            case "ivec2":
                return new Int32Array(2 * e);
            case "ivec3":
                return new Int32Array(3 * e);
            case "ivec4":
                return new Int32Array(4 * e);
            case "bool":
                return !1;
            case "bvec2":
                return ct(2 * e);
            case "bvec3":
                return ct(3 * e);
            case "bvec4":
                return ct(4 * e);
            case "mat2":
                return new Float32Array([1, 0, 0, 1]);
            case "mat3":
                return new Float32Array([1, 0, 0, 0, 1, 0, 0, 0, 1]);
            case "mat4":
                return new Float32Array([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]) } return null } var pt, ft = {},
        mt = ft;

    function gt() { if (mt === ft || mt && mt.isContextLost()) { var t = document.createElement("canvas"),
                e = void 0;
            n.b.PREFER_ENV >= r.f.WEBGL2 && (e = t.getContext("webgl2", {})), e || ((e = t.getContext("webgl", {}) || t.getContext("experimental-webgl", {})) ? e.getExtension("WEBGL_draw_buffers") : e = null), mt = e } return mt }

    function yt(t, e, i) { if ("precision" !== t.substring(0, 9)) { var n = e; return e === r.l.HIGH && i !== r.l.HIGH && (n = r.l.MEDIUM), "precision " + n + " float;\n" + t } return i !== r.l.HIGH && "precision highp" === t.substring(0, 15) ? t.replace("precision highp", "precision mediump") : t } var vt = { float: 1, vec2: 2, vec3: 3, vec4: 4, int: 1, ivec2: 2, ivec3: 3, ivec4: 4, bool: 1, bvec2: 2, bvec3: 3, bvec4: 4, mat2: 4, mat3: 9, mat4: 16, sampler2D: 1 };

    function bt(t) { return vt[t] } var _t = null,
        xt = { FLOAT: "float", FLOAT_VEC2: "vec2", FLOAT_VEC3: "vec3", FLOAT_VEC4: "vec4", INT: "int", INT_VEC2: "ivec2", INT_VEC3: "ivec3", INT_VEC4: "ivec4", BOOL: "bool", BOOL_VEC2: "bvec2", BOOL_VEC3: "bvec3", BOOL_VEC4: "bvec4", FLOAT_MAT2: "mat2", FLOAT_MAT3: "mat3", FLOAT_MAT4: "mat4", SAMPLER_2D: "sampler2D", INT_SAMPLER_2D: "sampler2D", UNSIGNED_INT_SAMPLER_2D: "sampler2D", SAMPLER_CUBE: "samplerCube", INT_SAMPLER_CUBE: "samplerCube", UNSIGNED_INT_SAMPLER_CUBE: "samplerCube", SAMPLER_2D_ARRAY: "sampler2DArray", INT_SAMPLER_2D_ARRAY: "sampler2DArray", UNSIGNED_INT_SAMPLER_2D_ARRAY: "sampler2DArray" };

    function wt(t, e) { if (!_t) { var i = Object.keys(xt);
            _t = {}; for (var n = 0; n < i.length; ++n) { var r = i[n];
                _t[t[r]] = xt[r] } } return _t[e] } var Tt = [{ test: function(t) { return "float" === t.type && 1 === t.size }, code: function(t) { return '\n            if(uv["' + t + '"] !== ud["' + t + '"].value)\n            {\n                ud["' + t + '"].value = uv["' + t + '"]\n                gl.uniform1f(ud["' + t + '"].location, uv["' + t + '"])\n            }\n            ' } }, { test: function(t) { return ("sampler2D" === t.type || "samplerCube" === t.type || "sampler2DArray" === t.type) && 1 === t.size && !t.isArray }, code: function(t) { return 't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["' + t + '"], t);\n\n            if(ud["' + t + '"].value !== t)\n            {\n                ud["' + t + '"].value = t;\n                gl.uniform1i(ud["' + t + '"].location, t);\n; // eslint-disable-line max-len\n            }' } }, { test: function(t, e) { return "mat3" === t.type && 1 === t.size && e.a !== undefined }, code: function(t) { return '\n            gl.uniformMatrix3fv(ud["' + t + '"].location, false, uv["' + t + '"].toArray(true));\n            ' } }, { test: function(t, e) { return "vec2" === t.type && 1 === t.size && e.x !== undefined }, code: function(t) { return '\n                cv = ud["' + t + '"].value;\n                v = uv["' + t + '"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["' + t + '"].location, v.x, v.y);\n                }' } }, { test: function(t) { return "vec2" === t.type && 1 === t.size }, code: function(t) { return '\n                cv = ud["' + t + '"].value;\n                v = uv["' + t + '"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["' + t + '"].location, v[0], v[1]);\n                }\n            ' } }, { test: function(t, e) { return "vec4" === t.type && 1 === t.size && e.width !== undefined }, code: function(t) { return '\n                cv = ud["' + t + '"].value;\n                v = uv["' + t + '"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["' + t + '"].location, v.x, v.y, v.width, v.height)\n                }' } }, { test: function(t) { return "vec4" === t.type && 1 === t.size }, code: function(t) { return '\n                cv = ud["' + t + '"].value;\n                v = uv["' + t + '"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["' + t + '"].location, v[0], v[1], v[2], v[3])\n                }' } }],
        St = { float: "\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }", vec2: "\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }", vec3: "\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }", vec4: "gl.uniform4f(location, v[0], v[1], v[2], v[3])", int: "gl.uniform1i(location, v)", ivec2: "gl.uniform2i(location, v[0], v[1])", ivec3: "gl.uniform3i(location, v[0], v[1], v[2])", ivec4: "gl.uniform4i(location, v[0], v[1], v[2], v[3])", bool: "gl.uniform1i(location, v)", bvec2: "gl.uniform2i(location, v[0], v[1])", bvec3: "gl.uniform3i(location, v[0], v[1], v[2])", bvec4: "gl.uniform4i(location, v[0], v[1], v[2], v[3])", mat2: "gl.uniformMatrix2fv(location, false, v)", mat3: "gl.uniformMatrix3fv(location, false, v)", mat4: "gl.uniformMatrix4fv(location, false, v)", sampler2D: "gl.uniform1i(location, v)", samplerCube: "gl.uniform1i(location, v)", sampler2DArray: "gl.uniform1i(location, v)" },
        Et = { float: "gl.uniform1fv(location, v)", vec2: "gl.uniform2fv(location, v)", vec3: "gl.uniform3fv(location, v)", vec4: "gl.uniform4fv(location, v)", mat4: "gl.uniformMatrix4fv(location, false, v)", mat3: "gl.uniformMatrix3fv(location, false, v)", mat2: "gl.uniformMatrix2fv(location, false, v)", int: "gl.uniform1iv(location, v)", ivec2: "gl.uniform2iv(location, v)", ivec3: "gl.uniform3iv(location, v)", ivec4: "gl.uniform4iv(location, v)", bool: "gl.uniform1iv(location, v)", bvec2: "gl.uniform2iv(location, v)", bvec3: "gl.uniform3iv(location, v)", bvec4: "gl.uniform4iv(location, v)", sampler2D: "gl.uniform1iv(location, v)", samplerCube: "gl.uniform1iv(location, v)", sampler2DArray: "gl.uniform1iv(location, v)" }; var Pt, Ct = ["precision mediump float;", "void main(void){", "float test = 0.1;", "%forloop%", "gl_FragColor = vec4(0.0);", "}"].join("\n");

    function Ot(t) { for (var e = "", i = 0; i < t; ++i) i > 0 && (e += "\nelse "), i < t - 1 && (e += "if(test == " + i + ".0){}"); return e }

    function At(t, e) { if (0 === t) throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`"); for (var i = e.createShader(e.FRAGMENT_SHADER);;) { var n = Ct.replace(/%forloop%/gi, Ot(t)); if (e.shaderSource(i, n), e.compileShader(i), e.getShaderParameter(i, e.COMPILE_STATUS)) break;
            t = t / 2 | 0 } return t } var It = 0,
        Rt = {},
        Mt = function() {
            function t(e, i, s) { void 0 === s && (s = "pixi-shader"), this.id = It++, this.vertexSrc = e || t.defaultVertexSrc, this.fragmentSrc = i || t.defaultFragmentSrc, this.vertexSrc = this.vertexSrc.trim(), this.fragmentSrc = this.fragmentSrc.trim(), "#version" !== this.vertexSrc.substring(0, 8) && (s = s.replace(/\s+/g, "-"), Rt[s] ? (Rt[s]++, s += "-" + Rt[s]) : Rt[s] = 1, this.vertexSrc = "#define SHADER_NAME " + s + "\n" + this.vertexSrc, this.fragmentSrc = "#define SHADER_NAME " + s + "\n" + this.fragmentSrc, this.vertexSrc = yt(this.vertexSrc, n.b.PRECISION_VERTEX, r.l.HIGH), this.fragmentSrc = yt(this.fragmentSrc, n.b.PRECISION_FRAGMENT, function() { if (!pt) { pt = r.l.MEDIUM; var t = gt(); if (t && t.getShaderPrecisionFormat) { var e = t.getShaderPrecisionFormat(t.FRAGMENT_SHADER, t.HIGH_FLOAT);
                            pt = e.precision ? r.l.HIGH : r.l.MEDIUM } } return pt }())), this.extractData(this.vertexSrc, this.fragmentSrc), this.glPrograms = {}, this.syncUniforms = null } return t.prototype.extractData = function(t, e) { var i = gt(); if (i) { var n = lt(i, t, e);
                    this.attributeData = this.getAttributeData(n, i), this.uniformData = this.getUniformData(n, i), i.deleteProgram(n) } else this.uniformData = {}, this.attributeData = {} }, t.prototype.getAttributeData = function(t, e) { for (var i = {}, n = [], r = e.getProgramParameter(t, e.ACTIVE_ATTRIBUTES), s = 0; s < r; s++) { var o = e.getActiveAttrib(t, s),
                        a = wt(e, o.type),
                        h = { type: a, name: o.name, size: bt(a), location: 0 };
                    i[o.name] = h, n.push(h) } n.sort((function(t, e) { return t.name > e.name ? 1 : -1 })); for (s = 0; s < n.length; s++) n[s].location = s; return i }, t.prototype.getUniformData = function(t, e) { for (var i = {}, n = e.getProgramParameter(t, e.ACTIVE_UNIFORMS), r = 0; r < n; r++) { var s = e.getActiveUniform(t, r),
                        o = s.name.replace(/\[.*?\]$/, ""),
                        a = s.name.match(/\[.*?\]$/),
                        h = wt(e, s.type);
                    i[o] = { type: h, size: s.size, isArray: a, value: dt(h, s.size) } } return i }, Object.defineProperty(t, "defaultVertexSrc", { get: function() { return "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n" }, enumerable: !1, configurable: !0 }), Object.defineProperty(t, "defaultFragmentSrc", { get: function() { return "varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}" }, enumerable: !1, configurable: !0 }), t.from = function(e, i, n) { var r = e + i,
                    o = s.ProgramCache[r]; return o || (s.ProgramCache[r] = o = new t(e, i, n)), o }, t }(),
        Lt = function() {
            function t(t, e) { for (var i in this.program = t, this.uniformGroup = e ? e instanceof q ? e : new q(e) : new q({}), t.uniformData) this.uniformGroup.uniforms[i] instanceof Array && (this.uniformGroup.uniforms[i] = new Float32Array(this.uniformGroup.uniforms[i])) } return t.prototype.checkUniformExists = function(t, e) { if (e.uniforms[t]) return !0; for (var i in e.uniforms) { var n = e.uniforms[i]; if (n.group && this.checkUniformExists(t, n)) return !0 } return !1 }, t.prototype.destroy = function() { this.uniformGroup = null }, Object.defineProperty(t.prototype, "uniforms", { get: function() { return this.uniformGroup.uniforms }, enumerable: !1, configurable: !0 }), t.from = function(e, i, n) { return new t(Mt.from(e, i), n) }, t }(),
        Dt = function() {
            function t() { this.data = 0, this.blendMode = r.b.NORMAL, this.polygonOffset = 0, this.blend = !0 } return Object.defineProperty(t.prototype, "blend", { get: function() { return !!(1 & this.data) }, set: function(t) {!!(1 & this.data) !== t && (this.data ^= 1) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "offsets", { get: function() { return !!(2 & this.data) }, set: function(t) {!!(2 & this.data) !== t && (this.data ^= 2) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "culling", { get: function() { return !!(4 & this.data) }, set: function(t) {!!(4 & this.data) !== t && (this.data ^= 4) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "depthTest", { get: function() { return !!(8 & this.data) }, set: function(t) {!!(8 & this.data) !== t && (this.data ^= 8) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "clockwiseFrontFace", { get: function() { return !!(16 & this.data) }, set: function(t) {!!(16 & this.data) !== t && (this.data ^= 16) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "blendMode", { get: function() { return this._blendMode }, set: function(t) { this.blend = t !== r.b.NONE, this._blendMode = t }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "polygonOffset", { get: function() { return this._polygonOffset }, set: function(t) { this.offsets = !!t, this._polygonOffset = t }, enumerable: !1, configurable: !0 }), t.for2d = function() { var e = new t; return e.depthTest = !1, e.blend = !0, e }, t }(),
        kt = function(t) {
            function e(i, r, s) { var o = this,
                    a = Mt.from(i || e.defaultVertexSrc, r || e.defaultFragmentSrc); return (o = t.call(this, a, s) || this).padding = 0, o.resolution = n.b.FILTER_RESOLUTION, o.enabled = !0, o.autoFit = !0, o.legacy = !!o.program.attributeData.aTextureCoord, o.state = new Dt, o } return d(e, t), e.prototype.apply = function(t, e, i, n, r) { t.applyFilter(this, e, i, n) }, Object.defineProperty(e.prototype, "blendMode", { get: function() { return this.state.blendMode }, set: function(t) { this.state.blendMode = t }, enumerable: !1, configurable: !0 }), Object.defineProperty(e, "defaultVertexSrc", { get: function() { return "attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n" }, enumerable: !1, configurable: !0 }), Object.defineProperty(e, "defaultFragmentSrc", { get: function() { return "varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n" }, enumerable: !1, configurable: !0 }), e }(Lt),
        Nt = new h.d,
        Ft = function() {
            function t(t, e) { this._texture = t, this.mapCoord = new h.d, this.uClampFrame = new Float32Array(4), this.uClampOffset = new Float32Array(2), this._textureID = -1, this._updateID = 0, this.clampOffset = 0, this.clampMargin = void 0 === e ? .5 : e, this.isSimple = !1 } return Object.defineProperty(t.prototype, "texture", { get: function() { return this._texture }, set: function(t) { this._texture = t, this._textureID = -1 }, enumerable: !1, configurable: !0 }), t.prototype.multiplyUvs = function(t, e) { e === undefined && (e = t); for (var i = this.mapCoord, n = 0; n < t.length; n += 2) { var r = t[n],
                        s = t[n + 1];
                    e[n] = r * i.a + s * i.c + i.tx, e[n + 1] = r * i.b + s * i.d + i.ty } return e }, t.prototype.update = function(t) { var e = this._texture; if (!e || !e.valid) return !1; if (!t && this._textureID === e._updateID) return !1;
                this._textureID = e._updateID, this._updateID++; var i = e._uvs;
                this.mapCoord.set(i.x1 - i.x0, i.y1 - i.y0, i.x3 - i.x0, i.y3 - i.y0, i.x0, i.y0); var n = e.orig,
                    r = e.trim;
                r && (Nt.set(n.width / r.width, 0, 0, n.height / r.height, -r.x / r.width, -r.y / r.height), this.mapCoord.append(Nt)); var s = e.baseTexture,
                    o = this.uClampFrame,
                    a = this.clampMargin / s.resolution,
                    h = this.clampOffset; return o[0] = (e._frame.x + a + h) / s.width, o[1] = (e._frame.y + a + h) / s.height, o[2] = (e._frame.x + e._frame.width - a + h) / s.width, o[3] = (e._frame.y + e._frame.height - a + h) / s.height, this.uClampOffset[0] = h / s.realWidth, this.uClampOffset[1] = h / s.realHeight, this.isSimple = e._frame.width === s.width && e._frame.height === s.height && 0 === e.rotate, !0 }, t }(),
        Bt = function(t) {
            function e(e) { var i = this,
                    n = new h.d; return i = t.call(this, "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n", "varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n") || this, e.renderable = !1, i.maskSprite = e, i.maskMatrix = n, i } return d(e, t), e.prototype.apply = function(t, e, i, n) { var r = this.maskSprite,
                    s = r._texture;
                s.valid && (s.uvMatrix || (s.uvMatrix = new Ft(s, 0)), s.uvMatrix.update(), this.uniforms.npmAlpha = s.baseTexture.alphaMode ? 0 : 1, this.uniforms.mask = s, this.uniforms.otherMatrix = t.calculateSpriteMatrix(this.maskMatrix, r).prepend(s.uvMatrix.mapCoord), this.uniforms.alpha = r.worldAlpha, this.uniforms.maskClamp = s.uvMatrix.uClampFrame, t.applyFilter(this, e, i, n)) }, e }(kt),
        jt = function(t) {
            function e(e) { var i = t.call(this, e) || this; return i.enableScissor = !1, i.alphaMaskPool = [], i.maskDataPool = [], i.maskStack = [], i.alphaMaskIndex = 0, i } return d(e, t), e.prototype.setMaskStack = function(t) { this.maskStack = t, this.renderer.scissor.setMaskStack(t), this.renderer.stencil.setMaskStack(t) }, e.prototype.push = function(t, e) { var i = e; if (!i.isMaskData) { var n = this.maskDataPool.pop() || new ht;
                    n.pooled = !0, n.maskObject = e, i = n } switch (i.autoDetect && this.detect(i), i.copyCountersOrReset(this.maskStack[this.maskStack.length - 1]), i._target = t, i.type) {
                    case r.i.SCISSOR:
                        this.maskStack.push(i), this.renderer.scissor.push(i); break;
                    case r.i.STENCIL:
                        this.maskStack.push(i), this.renderer.stencil.push(i); break;
                    case r.i.SPRITE:
                        i.copyCountersOrReset(null), this.pushSpriteMask(i), this.maskStack.push(i) } }, e.prototype.pop = function(t) { var e = this.maskStack.pop(); if (e && e._target === t) { switch (e.type) {
                        case r.i.SCISSOR:
                            this.renderer.scissor.pop(); break;
                        case r.i.STENCIL:
                            this.renderer.stencil.pop(e.maskObject); break;
                        case r.i.SPRITE:
                            this.popSpriteMask() } e.reset(), e.pooled && this.maskDataPool.push(e) } }, e.prototype.detect = function(t) { var e = t.maskObject; if (e.isSprite) t.type = r.i.SPRITE;
                else if (t.type = r.i.STENCIL, this.enableScissor && e.isFastRect && e.isFastRect()) { var i = e.worldTransform,
                        n = Math.atan2(i.b, i.a),
                        s = Math.atan2(i.d, i.c);
                    n = Math.round(n * (180 / Math.PI) * 100), s = ((s = Math.round(s * (180 / Math.PI) * 100) - n) % 18e3 + 18e3) % 18e3, 0 === (n = (n % 9e3 + 9e3) % 9e3) && 9e3 === s && (t.type = r.i.SCISSOR) } }, e.prototype.pushSpriteMask = function(t) { var e = t.maskObject,
                    i = t._target,
                    n = this.alphaMaskPool[this.alphaMaskIndex];
                n || (n = this.alphaMaskPool[this.alphaMaskIndex] = [new Bt(e)]), n[0].resolution = this.renderer.resolution, n[0].maskSprite = e; var r = i.filterArea;
                i.filterArea = e.getBounds(!0), this.renderer.filter.push(i, n), i.filterArea = r, this.alphaMaskIndex++ }, e.prototype.popSpriteMask = function() { this.renderer.filter.pop(), this.alphaMaskIndex-- }, e }(C),
        Ut = function(t) {
            function e(e) { var i = t.call(this, e) || this; return i.maskStack = [], i.glConst = 0, i } return d(e, t), e.prototype.getStackLength = function() { return this.maskStack.length }, e.prototype.setMaskStack = function(t) { var e = this.renderer.gl,
                    i = this.getStackLength();
                this.maskStack = t; var n = this.getStackLength();
                n !== i && (0 === n ? e.disable(this.glConst) : (e.enable(this.glConst), this._useCurrent())) }, e.prototype._useCurrent = function() {}, e.prototype.destroy = function() { t.prototype.destroy.call(this), this.maskStack = null }, e }(C),
        Gt = function(t) {
            function e(e) { var i = t.call(this, e) || this; return i.glConst = WebGLRenderingContext.SCISSOR_TEST, i } return d(e, t), e.prototype.getStackLength = function() { var t = this.maskStack[this.maskStack.length - 1]; return t ? t._scissorCounter : 0 }, e.prototype.push = function(t) { var e = t.maskObject;
                e.renderable = !0; var i = t._scissorRect,
                    n = e.getBounds(!0),
                    r = this.renderer.gl;
                e.renderable = !1, i ? n.fit(i) : r.enable(r.SCISSOR_TEST), t._scissorCounter++, t._scissorRect = n, this._useCurrent() }, e.prototype.pop = function() { var t = this.renderer.gl;
                this.getStackLength() > 0 ? this._useCurrent() : t.disable(t.SCISSOR_TEST) }, e.prototype._useCurrent = function() { var t = this.maskStack[this.maskStack.length - 1]._scissorRect,
                    e = this.renderer.renderTexture.current,
                    i = this.renderer.projection,
                    n = i.transform,
                    r = i.sourceFrame,
                    s = i.destinationFrame,
                    o = e ? e.resolution : this.renderer.resolution,
                    a = (t.x - r.x) * o + s.x,
                    h = (t.y - r.y) * o + s.y,
                    u = t.width * o,
                    l = t.height * o;
                n && (a += n.tx * o, h += n.ty * o), e || (h = this.renderer.height - l - h), this.renderer.gl.scissor(a, h, u, l) }, e }(Ut),
        Xt = function(t) {
            function e(e) { var i = t.call(this, e) || this; return i.glConst = WebGLRenderingContext.STENCIL_TEST, i } return d(e, t), e.prototype.getStackLength = function() { var t = this.maskStack[this.maskStack.length - 1]; return t ? t._stencilCounter : 0 }, e.prototype.push = function(t) { var e = t.maskObject,
                    i = this.renderer.gl,
                    n = t._stencilCounter;
                0 === n && (this.renderer.framebuffer.forceStencil(), i.enable(i.STENCIL_TEST)), t._stencilCounter++, i.colorMask(!1, !1, !1, !1), i.stencilFunc(i.EQUAL, n, this._getBitwiseMask()), i.stencilOp(i.KEEP, i.KEEP, i.INCR), e.renderable = !0, e.render(this.renderer), this.renderer.batch.flush(), e.renderable = !1, this._useCurrent() }, e.prototype.pop = function(t) { var e = this.renderer.gl;
                0 === this.getStackLength() ? (e.disable(e.STENCIL_TEST), e.clear(e.STENCIL_BUFFER_BIT), e.clearStencil(0)) : (e.colorMask(!1, !1, !1, !1), e.stencilOp(e.KEEP, e.KEEP, e.DECR), t.renderable = !0, t.render(this.renderer), this.renderer.batch.flush(), t.renderable = !1, this._useCurrent()) }, e.prototype._useCurrent = function() { var t = this.renderer.gl;
                t.colorMask(!0, !0, !0, !0), t.stencilFunc(t.EQUAL, this.getStackLength(), this._getBitwiseMask()), t.stencilOp(t.KEEP, t.KEEP, t.KEEP) }, e.prototype._getBitwiseMask = function() { return (1 << this.getStackLength()) - 1 }, e }(Ut),
        Ht = function(t) {
            function e(e) { var i = t.call(this, e) || this; return i.destinationFrame = null, i.sourceFrame = null, i.defaultFrame = null, i.projectionMatrix = new h.d, i.transform = null, i } return d(e, t), e.prototype.update = function(t, e, i, n) { this.destinationFrame = t || this.destinationFrame || this.defaultFrame, this.sourceFrame = e || this.sourceFrame || t, this.calculateProjection(this.destinationFrame, this.sourceFrame, i, n), this.transform && this.projectionMatrix.append(this.transform); var r = this.renderer;
                r.globalUniforms.uniforms.projectionMatrix = this.projectionMatrix, r.globalUniforms.update(), r.shader.shader && r.shader.syncUniformGroup(r.shader.shader.uniforms.globals) }, e.prototype.calculateProjection = function(t, e, i, n) { var r = this.projectionMatrix,
                    s = n ? -1 : 1;
                r.identity(), r.a = 1 / e.width * 2, r.d = s * (1 / e.height * 2), r.tx = -1 - e.x * r.a, r.ty = -s - e.y * r.d }, e.prototype.setTransform = function(t) {}, e }(C),
        zt = new h.j,
        Vt = new h.j,
        Wt = new h.j,
        Yt = function(t) {
            function e(e) { var i = t.call(this, e) || this; return i.clearColor = e._backgroundColorRgba, i.defaultMaskStack = [], i.current = null, i.sourceFrame = new h.j, i.destinationFrame = new h.j, i } return d(e, t), e.prototype.bind = function(t, e, i) { void 0 === t && (t = null); var n, r, s, o = this.renderer;
                this.current = t, t ? (s = (n = t.baseTexture).resolution, e || (zt.width = t.frame.width, zt.height = t.frame.height, e = zt), i || (Vt.x = t.frame.x, Vt.y = t.frame.y, Vt.width = e.width, Vt.height = e.height, i = Vt), r = n.framebuffer) : (s = o.resolution, e || (zt.width = o.screen.width, zt.height = o.screen.height, e = zt), i || ((i = zt).width = e.width, i.height = e.height)), Wt.x = i.x * s, Wt.y = i.y * s, Wt.width = i.width * s, Wt.height = i.height * s, this.renderer.framebuffer.bind(r, Wt), this.renderer.projection.update(i, e, s, !r), t ? this.renderer.mask.setMaskStack(n.maskStack) : this.renderer.mask.setMaskStack(this.defaultMaskStack), this.sourceFrame.copyFrom(e), this.destinationFrame.copyFrom(i) }, e.prototype.clear = function(t, e) { t = this.current ? t || this.current.baseTexture.clearColor : t || this.clearColor, this.renderer.framebuffer.clear(t[0], t[1], t[2], t[3], e) }, e.prototype.resize = function() { this.bind(null) }, e.prototype.reset = function() { this.bind(null) }, e }(C),
        Kt = function() {},
        qt = function() {
            function t(t, e) { this.program = t, this.uniformData = e, this.uniformGroups = {} } return t.prototype.destroy = function() { this.uniformData = null, this.uniformGroups = null, this.program = null }, t }(),
        Qt = 0,
        $t = { textureCount: 0 },
        Zt = function(t) {
            function e(e) { var i = t.call(this, e) || this; return i.destroyed = !1, i.systemCheck(), i.gl = null, i.shader = null, i.program = null, i.cache = {}, i.id = Qt++, i } return d(e, t), e.prototype.systemCheck = function() { if (! function() { if ("boolean" == typeof Pt) return Pt; try { var t = new Function("param1", "param2", "param3", "return param1[param2] === param3;");
                            Pt = !0 === t({ a: "b" }, "a", "b") } catch (e) { Pt = !1 } return Pt }()) throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.") }, e.prototype.contextChange = function(t) { this.gl = t, this.reset() }, e.prototype.bind = function(t, e) { t.uniforms.globals = this.renderer.globalUniforms; var i = t.program,
                    n = i.glPrograms[this.renderer.CONTEXT_UID] || this.generateShader(t); return this.shader = t, this.program !== i && (this.program = i, this.gl.useProgram(n.program)), e || ($t.textureCount = 0, this.syncUniformGroup(t.uniformGroup, $t)), n }, e.prototype.setUniforms = function(t) { var e = this.shader.program,
                    i = e.glPrograms[this.renderer.CONTEXT_UID];
                e.syncUniforms(i.uniformData, t, this.renderer) }, e.prototype.syncUniformGroup = function(t, e) { var i = this.getglProgram();
                t["static"] && t.dirtyId === i.uniformGroups[t.id] || (i.uniformGroups[t.id] = t.dirtyId, this.syncUniforms(t, i, e)) }, e.prototype.syncUniforms = function(t, e, i) {
                (t.syncUniforms[this.shader.program.id] || this.createSyncGroups(t))(e.uniformData, t.uniforms, this.renderer, i) }, e.prototype.createSyncGroups = function(t) { var e = this.getSignature(t, this.shader.program.uniformData); return this.cache[e] || (this.cache[e] = function(t, e) { var i = ["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "]; for (var n in t.uniforms) { var r = e[n]; if (r) { for (var s = t.uniforms[n], o = !1, a = 0; a < Tt.length; a++)
                                if (Tt[a].test(r, s)) { i.push(Tt[a].code(n, s)), o = !0; break } if (!o) { var h = (1 === r.size ? St : Et)[r.type].replace("location", 'ud["' + n + '"].location');
                                i.push('\n            cv = ud["' + n + '"].value;\n            v = uv["' + n + '"];\n            ' + h + ";") } } else t.uniforms[n].group && i.push('\n                    renderer.shader.syncUniformGroup(uv["' + n + '"], syncData);\n                ') } return new Function("ud", "uv", "renderer", "syncData", i.join("\n")) }(t, this.shader.program.uniformData)), t.syncUniforms[this.shader.program.id] = this.cache[e], t.syncUniforms[this.shader.program.id] }, e.prototype.getSignature = function(t, e) { var i = t.uniforms,
                    n = []; for (var r in i) n.push(r), e[r] && n.push(e[r].type); return n.join("-") }, e.prototype.getglProgram = function() { return this.shader ? this.shader.program.glPrograms[this.renderer.CONTEXT_UID] : null }, e.prototype.generateShader = function(t) { var e = this.gl,
                    i = t.program,
                    n = {}; for (var r in i.attributeData) n[r] = i.attributeData[r].location; var s = lt(e, i.vertexSrc, i.fragmentSrc, n),
                    o = {}; for (var r in i.uniformData) { var a = i.uniformData[r];
                    o[r] = { location: e.getUniformLocation(s, r), value: dt(a.type, a.size) } } var h = new qt(s, o); return i.glPrograms[this.renderer.CONTEXT_UID] = h, h }, e.prototype.reset = function() { this.program = null, this.shader = null }, e.prototype.destroy = function() { this.destroyed = !0 }, e }(C); var Jt = function(t) {
            function e(e) { var i = t.call(this, e) || this; return i.gl = null, i.stateId = 0, i.polygonOffset = 0, i.blendMode = r.b.NONE, i._blendEq = !1, i.map = [], i.map[0] = i.setBlend, i.map[1] = i.setOffset, i.map[2] = i.setCullFace, i.map[3] = i.setDepthTest, i.map[4] = i.setFrontFace, i.checks = [], i.defaultState = new Dt, i.defaultState.blend = !0, i } return d(e, t), e.prototype.contextChange = function(t) { this.gl = t, this.blendModes = function(t, e) { return void 0 === e && (e = []), e[r.b.NORMAL] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[r.b.ADD] = [t.ONE, t.ONE], e[r.b.MULTIPLY] = [t.DST_COLOR, t.ONE_MINUS_SRC_ALPHA, t.ONE, t.ONE_MINUS_SRC_ALPHA], e[r.b.SCREEN] = [t.ONE, t.ONE_MINUS_SRC_COLOR, t.ONE, t.ONE_MINUS_SRC_ALPHA], e[r.b.OVERLAY] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[r.b.DARKEN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[r.b.LIGHTEN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[r.b.COLOR_DODGE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[r.b.COLOR_BURN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[r.b.HARD_LIGHT] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[r.b.SOFT_LIGHT] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[r.b.DIFFERENCE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[r.b.EXCLUSION] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[r.b.HUE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[r.b.SATURATION] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[r.b.COLOR] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[r.b.LUMINOSITY] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e[r.b.NONE] = [0, 0], e[r.b.NORMAL_NPM] = [t.SRC_ALPHA, t.ONE_MINUS_SRC_ALPHA, t.ONE, t.ONE_MINUS_SRC_ALPHA], e[r.b.ADD_NPM] = [t.SRC_ALPHA, t.ONE, t.ONE, t.ONE], e[r.b.SCREEN_NPM] = [t.SRC_ALPHA, t.ONE_MINUS_SRC_COLOR, t.ONE, t.ONE_MINUS_SRC_ALPHA], e[r.b.SRC_IN] = [t.DST_ALPHA, t.ZERO], e[r.b.SRC_OUT] = [t.ONE_MINUS_DST_ALPHA, t.ZERO], e[r.b.SRC_ATOP] = [t.DST_ALPHA, t.ONE_MINUS_SRC_ALPHA], e[r.b.DST_OVER] = [t.ONE_MINUS_DST_ALPHA, t.ONE], e[r.b.DST_IN] = [t.ZERO, t.SRC_ALPHA], e[r.b.DST_OUT] = [t.ZERO, t.ONE_MINUS_SRC_ALPHA], e[r.b.DST_ATOP] = [t.ONE_MINUS_DST_ALPHA, t.SRC_ALPHA], e[r.b.XOR] = [t.ONE_MINUS_DST_ALPHA, t.ONE_MINUS_SRC_ALPHA], e[r.b.SUBTRACT] = [t.ONE, t.ONE, t.ONE, t.ONE, t.FUNC_REVERSE_SUBTRACT, t.FUNC_ADD], e }(t), this.set(this.defaultState), this.reset() }, e.prototype.set = function(t) { if (t = t || this.defaultState, this.stateId !== t.data) { for (var e = this.stateId ^ t.data, i = 0; e;) 1 & e && this.map[i].call(this, !!(t.data & 1 << i)), e >>= 1, i++;
                    this.stateId = t.data } for (i = 0; i < this.checks.length; i++) this.checks[i](this, t) }, e.prototype.forceState = function(t) { t = t || this.defaultState; for (var e = 0; e < this.map.length; e++) this.map[e].call(this, !!(t.data & 1 << e)); for (e = 0; e < this.checks.length; e++) this.checks[e](this, t);
                this.stateId = t.data }, e.prototype.setBlend = function(t) { this.updateCheck(e.checkBlendMode, t), this.gl[t ? "enable" : "disable"](this.gl.BLEND) }, e.prototype.setOffset = function(t) { this.updateCheck(e.checkPolygonOffset, t), this.gl[t ? "enable" : "disable"](this.gl.POLYGON_OFFSET_FILL) }, e.prototype.setDepthTest = function(t) { this.gl[t ? "enable" : "disable"](this.gl.DEPTH_TEST) }, e.prototype.setCullFace = function(t) { this.gl[t ? "enable" : "disable"](this.gl.CULL_FACE) }, e.prototype.setFrontFace = function(t) { this.gl.frontFace(this.gl[t ? "CW" : "CCW"]) }, e.prototype.setBlendMode = function(t) { if (t !== this.blendMode) { this.blendMode = t; var e = this.blendModes[t],
                        i = this.gl;
                    2 === e.length ? i.blendFunc(e[0], e[1]) : i.blendFuncSeparate(e[0], e[1], e[2], e[3]), 6 === e.length ? (this._blendEq = !0, i.blendEquationSeparate(e[4], e[5])) : this._blendEq && (this._blendEq = !1, i.blendEquationSeparate(i.FUNC_ADD, i.FUNC_ADD)) } }, e.prototype.setPolygonOffset = function(t, e) { this.gl.polygonOffset(t, e) }, e.prototype.reset = function() { this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL, !1), this.forceState(this.defaultState), this._blendEq = !0, this.blendMode = -1, this.setBlendMode(0) }, e.prototype.updateCheck = function(t, e) { var i = this.checks.indexOf(t);
                e && -1 === i ? this.checks.push(t) : e || -1 === i || this.checks.splice(i, 1) }, e.checkBlendMode = function(t, e) { t.setBlendMode(e.blendMode) }, e.checkPolygonOffset = function(t, e) { t.setPolygonOffset(1, e.polygonOffset) }, e }(C),
        te = function(t) {
            function e(e) { var i = t.call(this, e) || this; return i.count = 0, i.checkCount = 0, i.maxIdle = n.b.GC_MAX_IDLE, i.checkCountMax = n.b.GC_MAX_CHECK_COUNT, i.mode = n.b.GC_MODE, i } return d(e, t), e.prototype.postrender = function() { this.renderer.renderingToScreen && (this.count++, this.mode !== r.h.MANUAL && (this.checkCount++, this.checkCount > this.checkCountMax && (this.checkCount = 0, this.run()))) }, e.prototype.run = function() { for (var t = this.renderer.texture, e = t.managedTextures, i = !1, n = 0; n < e.length; n++) { var r = e[n];!r.framebuffer && this.count - r.touched > this.maxIdle && (t.destroyTexture(r, !0), e[n] = null, i = !0) } if (i) { var s = 0; for (n = 0; n < e.length; n++) null !== e[n] && (e[s++] = e[n]);
                    e.length = s } }, e.prototype.unload = function(t) { var e, i = this.renderer.texture;
                (null === (e = t._texture) || void 0 === e ? void 0 : e.framebuffer) && i.destroyTexture(t._texture); for (var n = t.children.length - 1; n >= 0; n--) this.unload(t.children[n]) }, e }(C),
        ee = function(t) { this.texture = t, this.width = -1, this.height = -1, this.dirtyId = -1, this.dirtyStyleId = -1, this.mipmap = !1, this.wrapMode = 33071, this.type = 6408, this.internalFormat = 5121 },
        ie = function(t) {
            function e(e) { var i = t.call(this, e) || this; return i.boundTextures = [], i.currentLocation = -1, i.managedTextures = [], i._unknownBoundTextures = !1, i.unknownTexture = new g, i } return d(e, t), e.prototype.contextChange = function() { var t = this.gl = this.renderer.gl;
                this.CONTEXT_UID = this.renderer.CONTEXT_UID, this.webGLVersion = this.renderer.context.webGLVersion; var e = t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);
                this.boundTextures.length = e; for (var i = 0; i < e; i++) this.boundTextures[i] = null;
                this.emptyTextures = {}; var n = new ee(t.createTexture());
                t.bindTexture(t.TEXTURE_2D, n.texture), t.texImage2D(t.TEXTURE_2D, 0, t.RGBA, 1, 1, 0, t.RGBA, t.UNSIGNED_BYTE, new Uint8Array(4)), this.emptyTextures[t.TEXTURE_2D] = n, this.emptyTextures[t.TEXTURE_CUBE_MAP] = new ee(t.createTexture()), t.bindTexture(t.TEXTURE_CUBE_MAP, this.emptyTextures[t.TEXTURE_CUBE_MAP].texture); for (i = 0; i < 6; i++) t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, t.RGBA, 1, 1, 0, t.RGBA, t.UNSIGNED_BYTE, null);
                t.texParameteri(t.TEXTURE_CUBE_MAP, t.TEXTURE_MAG_FILTER, t.LINEAR), t.texParameteri(t.TEXTURE_CUBE_MAP, t.TEXTURE_MIN_FILTER, t.LINEAR); for (i = 0; i < this.boundTextures.length; i++) this.bind(null, i) }, e.prototype.bind = function(t, e) { void 0 === e && (e = 0); var i = this.gl; if (t) { if ((t = t.castToBaseTexture()).parentTextureArray) return; if (t.valid) { t.touched = this.renderer.textureGC.count; var n = t._glTextures[this.CONTEXT_UID] || this.initTexture(t);
                        this.boundTextures[e] !== t && (this.currentLocation !== e && (this.currentLocation = e, i.activeTexture(i.TEXTURE0 + e)), i.bindTexture(t.target, n.texture)), n.dirtyId !== t.dirtyId && (this.currentLocation !== e && (this.currentLocation = e, i.activeTexture(i.TEXTURE0 + e)), this.updateTexture(t)), this.boundTextures[e] = t } } else this.currentLocation !== e && (this.currentLocation = e, i.activeTexture(i.TEXTURE0 + e)), i.bindTexture(i.TEXTURE_2D, this.emptyTextures[i.TEXTURE_2D].texture), this.boundTextures[e] = null }, e.prototype.reset = function() { this._unknownBoundTextures = !0, this.currentLocation = -1; for (var t = 0; t < this.boundTextures.length; t++) this.boundTextures[t] = this.unknownTexture }, e.prototype.unbind = function(t) { var e = this.gl,
                    i = this.boundTextures; if (this._unknownBoundTextures) { this._unknownBoundTextures = !1; for (var n = 0; n < i.length; n++) i[n] === this.unknownTexture && this.bind(null, n) } for (n = 0; n < i.length; n++) i[n] === t && (this.currentLocation !== n && (e.activeTexture(e.TEXTURE0 + n), this.currentLocation = n), e.bindTexture(e.TEXTURE_2D, this.emptyTextures[t.target].texture), i[n] = null) }, e.prototype.initTexture = function(t) { var e = new ee(this.gl.createTexture()); return e.dirtyId = -1, t._glTextures[this.CONTEXT_UID] = e, this.managedTextures.push(t), t.on("dispose", this.destroyTexture, this), e }, e.prototype.initTextureType = function(t, e) { if (e.internalFormat = t.format, e.type = t.type, 2 === this.webGLVersion) { var i = this.renderer.gl;
                    t.type === i.FLOAT && t.format === i.RGBA && (e.internalFormat = i.RGBA32F), t.type === r.p.HALF_FLOAT && (e.type = i.HALF_FLOAT), e.type === i.HALF_FLOAT && t.format === i.RGBA && (e.internalFormat = i.RGBA16F) } }, e.prototype.updateTexture = function(t) { var e = t._glTextures[this.CONTEXT_UID]; if (e) { var i = this.renderer; if (this.initTextureType(t, e), t.resource && t.resource.upload(i, t, e));
                    else { var n = t.realWidth,
                            r = t.realHeight,
                            s = i.gl;
                        (e.width !== n || e.height !== r || e.dirtyId < 0) && (e.width = n, e.height = r, s.texImage2D(t.target, 0, e.internalFormat, n, r, 0, t.format, e.type, null)) } t.dirtyStyleId !== e.dirtyStyleId && this.updateTextureStyle(t), e.dirtyId = t.dirtyId } }, e.prototype.destroyTexture = function(t, e) { var i = this.gl; if ((t = t.castToBaseTexture())._glTextures[this.CONTEXT_UID] && (this.unbind(t), i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture), t.off("dispose", this.destroyTexture, this), delete t._glTextures[this.CONTEXT_UID], !e)) { var n = this.managedTextures.indexOf(t); - 1 !== n && Object(s.removeItems)(this.managedTextures, n, 1) } }, e.prototype.updateTextureStyle = function(t) { var e = t._glTextures[this.CONTEXT_UID];
                e && (t.mipmap !== r.j.POW2 && 2 === this.webGLVersion || t.isPowerOfTwo ? e.mipmap = t.mipmap >= 1 : e.mipmap = !1, 2 === this.webGLVersion || t.isPowerOfTwo ? e.wrapMode = t.wrapMode : e.wrapMode = r.q.CLAMP, t.resource && t.resource.style(this.renderer, t, e) || this.setStyle(t, e), e.dirtyStyleId = t.dirtyStyleId) }, e.prototype.setStyle = function(t, e) { var i = this.gl; if (e.mipmap && i.generateMipmap(t.target), i.texParameteri(t.target, i.TEXTURE_WRAP_S, e.wrapMode), i.texParameteri(t.target, i.TEXTURE_WRAP_T, e.wrapMode), e.mipmap) { i.texParameteri(t.target, i.TEXTURE_MIN_FILTER, t.scaleMode === r.n.LINEAR ? i.LINEAR_MIPMAP_LINEAR : i.NEAREST_MIPMAP_NEAREST); var n = this.renderer.context.extensions.anisotropicFiltering; if (n && t.anisotropicLevel > 0 && t.scaleMode === r.n.LINEAR) { var s = Math.min(t.anisotropicLevel, i.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));
                        i.texParameterf(t.target, n.TEXTURE_MAX_ANISOTROPY_EXT, s) } } else i.texParameteri(t.target, i.TEXTURE_MIN_FILTER, t.scaleMode === r.n.LINEAR ? i.LINEAR : i.NEAREST);
                i.texParameteri(t.target, i.TEXTURE_MAG_FILTER, t.scaleMode === r.n.LINEAR ? i.LINEAR : i.NEAREST) }, e }(C),
        ne = { FilterSystem: $, BatchSystem: J, ContextSystem: et, FramebufferSystem: rt, GeometrySystem: at, MaskSystem: jt, ScissorSystem: Gt, StencilSystem: Xt, ProjectionSystem: Ht, RenderTextureSystem: Yt, ShaderSystem: Zt, StateSystem: Jt, TextureGCSystem: te, TextureSystem: ie },
        re = new h.d,
        se = function(t) {
            function e(e, i) { void 0 === e && (e = r.m.UNKNOWN); var o = t.call(this) || this; return (i = Object.assign({}, n.b.RENDER_OPTIONS, i)).roundPixels && (n.b.ROUND_PIXELS = i.roundPixels, Object(s.deprecation)("5.0.0", "Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS", 2)), o.options = i, o.type = e, o.screen = new h.j(0, 0, i.width, i.height), o.view = i.view || document.createElement("canvas"), o.resolution = i.resolution || n.b.RESOLUTION, o.transparent = i.transparent, o.autoDensity = i.autoDensity || i.autoResize || !1, o.preserveDrawingBuffer = i.preserveDrawingBuffer, o.clearBeforeRender = i.clearBeforeRender, o._backgroundColor = 0, o._backgroundColorRgba = [0, 0, 0, 0], o._backgroundColorString = "#000000", o.backgroundColor = i.backgroundColor || o._backgroundColor, o._lastObjectRendered = null, o.plugins = {}, o } return d(e, t), e.prototype.initPlugins = function(t) { for (var e in t) this.plugins[e] = new t[e](this) }, Object.defineProperty(e.prototype, "width", { get: function() { return this.view.width }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "height", { get: function() { return this.view.height }, enumerable: !1, configurable: !0 }), e.prototype.resize = function(t, e) { this.screen.width = t, this.screen.height = e, this.view.width = t * this.resolution, this.view.height = e * this.resolution, this.autoDensity && (this.view.style.width = t + "px", this.view.style.height = e + "px"), this.emit("resize", t, e) }, e.prototype.generateTexture = function(t, e, i, n) { 0 === (n = n || t.getLocalBounds(null, !0)).width && (n.width = 1), 0 === n.height && (n.height = 1); var r = k.create({ width: 0 | n.width, height: 0 | n.height, scaleMode: e, resolution: i }); return re.tx = -n.x, re.ty = -n.y, this.render(t, r, !1, re, !!t.parent), r }, e.prototype.destroy = function(t) { for (var e in this.plugins) this.plugins[e].destroy(), this.plugins[e] = null;
                t && this.view.parentNode && this.view.parentNode.removeChild(this.view);
                this.plugins = null, this.type = r.m.UNKNOWN, this.view = null, this.screen = null, this._tempDisplayObjectParent = null, this.options = null, this._backgroundColorRgba = null, this._backgroundColorString = null, this._lastObjectRendered = null }, Object.defineProperty(e.prototype, "backgroundColor", { get: function() { return this._backgroundColor }, set: function(t) { this._backgroundColor = t, this._backgroundColorString = Object(s.hex2string)(t), Object(s.hex2rgb)(t, this._backgroundColorRgba) }, enumerable: !1, configurable: !0 }), e }(s.EventEmitter),
        oe = function(t) {
            function e(i) { var n = t.call(this, r.m.WEBGL, i) || this; return i = n.options, n.gl = null, n.CONTEXT_UID = 0, n.runners = { destroy: new o.a("destroy"), contextChange: new o.a("contextChange"), reset: new o.a("reset"), update: new o.a("update"), postrender: new o.a("postrender"), prerender: new o.a("prerender"), resize: new o.a("resize") }, n.globalUniforms = new q({ projectionMatrix: new h.d }, !0), n.addSystem(jt, "mask").addSystem(et, "context").addSystem(Jt, "state").addSystem(Zt, "shader").addSystem(ie, "texture").addSystem(at, "geometry").addSystem(rt, "framebuffer").addSystem(Gt, "scissor").addSystem(Xt, "stencil").addSystem(Ht, "projection").addSystem(te, "textureGC").addSystem($, "filter").addSystem(Yt, "renderTexture").addSystem(J, "batch"), n.initPlugins(e.__plugins), i.context ? n.context.initFromContext(i.context) : n.context.initFromOptions({ alpha: !!n.transparent, antialias: i.antialias, premultipliedAlpha: n.transparent && "notMultiplied" !== n.transparent, stencil: !0, preserveDrawingBuffer: i.preserveDrawingBuffer, powerPreference: n.options.powerPreference }), n.renderingToScreen = !0, Object(s.sayHello)(2 === n.context.webGLVersion ? "WebGL 2" : "WebGL 1"), n.resize(n.options.width, n.options.height), n } return d(e, t), e.create = function(t) { if (Object(s.isWebGLSupported)()) return new e(t); throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.') }, e.prototype.addSystem = function(t, e) { e || (e = t.name); var i = new t(this); if (this[e]) throw new Error('Whoops! The name "' + e + '" is already in use'); for (var n in this[e] = i, this.runners) this.runners[n].add(i); return this }, e.prototype.render = function(t, e, i, n, r) { if (this.renderingToScreen = !e, this.runners.prerender.emit(), this.emit("prerender"), this.projection.transform = n, !this.context.isLost) { if (e || (this._lastObjectRendered = t), !r) { var s = t.enableTempParent();
                        t.updateTransform(), t.disableTempParent(s) } this.renderTexture.bind(e), this.batch.currentRenderer.start(), (i !== undefined ? i : this.clearBeforeRender) && this.renderTexture.clear(), t.render(this), this.batch.currentRenderer.flush(), e && e.baseTexture.update(), this.runners.postrender.emit(), this.projection.transform = null, this.emit("postrender") } }, e.prototype.resize = function(e, i) { t.prototype.resize.call(this, e, i), this.runners.resize.emit(e, i) }, e.prototype.reset = function() { return this.runners.reset.emit(), this }, e.prototype.clear = function() { this.renderTexture.bind(), this.renderTexture.clear() }, e.prototype.destroy = function(e) { for (var i in this.runners.destroy.emit(), this.runners) this.runners[i].destroy();
                t.prototype.destroy.call(this, e), this.gl = null }, e.registerPlugin = function(t, i) { e.__plugins = e.__plugins || {}, e.__plugins[t] = i }, e }(se);

    function ae(t) { return oe.create(t) } var he = "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",
        ue = "attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",
        le = function() { this.texArray = null, this.blend = 0, this.type = r.e.TRIANGLES, this.start = 0, this.size = 0, this.data = null },
        ce = function() {
            function t() { this.elements = [], this.ids = [], this.count = 0 } return t.prototype.clear = function() { for (var t = 0; t < this.count; t++) this.elements[t] = null;
                this.count = 0 }, t }(),
        de = function() {
            function t(t) { this.rawBinaryData = new ArrayBuffer(t), this.uint32View = new Uint32Array(this.rawBinaryData), this.float32View = new Float32Array(this.rawBinaryData) } return Object.defineProperty(t.prototype, "int8View", { get: function() { return this._int8View || (this._int8View = new Int8Array(this.rawBinaryData)), this._int8View }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "uint8View", { get: function() { return this._uint8View || (this._uint8View = new Uint8Array(this.rawBinaryData)), this._uint8View }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "int16View", { get: function() { return this._int16View || (this._int16View = new Int16Array(this.rawBinaryData)), this._int16View }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "uint16View", { get: function() { return this._uint16View || (this._uint16View = new Uint16Array(this.rawBinaryData)), this._uint16View }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "int32View", { get: function() { return this._int32View || (this._int32View = new Int32Array(this.rawBinaryData)), this._int32View }, enumerable: !1, configurable: !0 }), t.prototype.view = function(t) { return this[t + "View"] }, t.prototype.destroy = function() { this.rawBinaryData = null, this._int8View = null, this._uint8View = null, this._int16View = null, this._uint16View = null, this._int32View = null, this.uint32View = null, this.float32View = null }, t.sizeOf = function(t) { switch (t) {
                    case "int8":
                    case "uint8":
                        return 1;
                    case "int16":
                    case "uint16":
                        return 2;
                    case "int32":
                    case "uint32":
                    case "float32":
                        return 4;
                    default:
                        throw new Error(t + " isn't a valid view type") } }, t }(),
        pe = function(t) {
            function e(e) { var i = t.call(this, e) || this; return i.shaderGenerator = null, i.geometryClass = null, i.vertexSize = null, i.state = Dt.for2d(), i.size = 4 * n.b.SPRITE_BATCH_SIZE, i._vertexCount = 0, i._indexCount = 0, i._bufferedElements = [], i._bufferedTextures = [], i._bufferSize = 0, i._shader = null, i._packedGeometries = [], i._packedGeometryPoolSize = 2, i._flushId = 0, i._aBuffers = {}, i._iBuffers = {}, i.MAX_TEXTURES = 1, i.renderer.on("prerender", i.onPrerender, i), e.runners.contextChange.add(i), i._dcIndex = 0, i._aIndex = 0, i._iIndex = 0, i._attributeBuffer = null, i._indexBuffer = null, i._tempBoundTextures = [], i } return d(e, t), e.prototype.contextChange = function() { var t = this.renderer.gl;
                n.b.PREFER_ENV === r.f.WEBGL_LEGACY ? this.MAX_TEXTURES = 1 : (this.MAX_TEXTURES = Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS), n.b.SPRITE_MAX_TEXTURES), this.MAX_TEXTURES = At(this.MAX_TEXTURES, t)), this._shader = this.shaderGenerator.generateShader(this.MAX_TEXTURES); for (var e = 0; e < this._packedGeometryPoolSize; e++) this._packedGeometries[e] = new this.geometryClass;
                this.initFlushBuffers() }, e.prototype.initFlushBuffers = function() { for (var t = e._drawCallPool, i = e._textureArrayPool, n = this.size / 4, r = Math.floor(n / this.MAX_TEXTURES) + 1; t.length < n;) t.push(new le); for (; i.length < r;) i.push(new ce); for (var s = 0; s < this.MAX_TEXTURES; s++) this._tempBoundTextures[s] = null }, e.prototype.onPrerender = function() { this._flushId = 0 }, e.prototype.render = function(t) { t._texture.valid && (this._vertexCount + t.vertexData.length / 2 > this.size && this.flush(), this._vertexCount += t.vertexData.length / 2, this._indexCount += t.indices.length, this._bufferedTextures[this._bufferSize] = t._texture.baseTexture, this._bufferedElements[this._bufferSize++] = t) }, e.prototype.buildTexturesAndDrawCalls = function() { var t = this._bufferedTextures,
                    i = this.MAX_TEXTURES,
                    n = e._textureArrayPool,
                    r = this.renderer.batch,
                    s = this._tempBoundTextures,
                    o = this.renderer.textureGC.count,
                    a = ++g._globalBatch,
                    h = 0,
                    u = n[0],
                    l = 0;
                r.copyBoundTextures(s, i); for (var c = 0; c < this._bufferSize; ++c) { var d = t[c];
                    t[c] = null, d._batchEnabled !== a && (u.count >= i && (r.boundArray(u, s, a, i), this.buildDrawCalls(u, l, c), l = c, u = n[++h], ++a), d._batchEnabled = a, d.touched = o, u.elements[u.count++] = d) } u.count > 0 && (r.boundArray(u, s, a, i), this.buildDrawCalls(u, l, this._bufferSize), ++h, ++a); for (c = 0; c < s.length; c++) s[c] = null;
                g._globalBatch = a }, e.prototype.buildDrawCalls = function(t, i, n) { var r = this._bufferedElements,
                    o = this._attributeBuffer,
                    a = this._indexBuffer,
                    h = this.vertexSize,
                    u = e._drawCallPool,
                    l = this._dcIndex,
                    c = this._aIndex,
                    d = this._iIndex,
                    p = u[l];
                p.start = this._iIndex, p.texArray = t; for (var f = i; f < n; ++f) { var m = r[f],
                        g = m._texture.baseTexture,
                        y = s.premultiplyBlendMode[g.alphaMode ? 1 : 0][m.blendMode];
                    r[f] = null, i < f && p.blend !== y && (p.size = d - p.start, i = f, (p = u[++l]).texArray = t, p.start = d), this.packInterleavedGeometry(m, o, a, c, d), c += m.vertexData.length / 2 * h, d += m.indices.length, p.blend = y } i < n && (p.size = d - p.start, ++l), this._dcIndex = l, this._aIndex = c, this._iIndex = d }, e.prototype.bindAndClearTexArray = function(t) { for (var e = this.renderer.texture, i = 0; i < t.count; i++) e.bind(t.elements[i], t.ids[i]), t.elements[i] = null;
                t.count = 0 }, e.prototype.updateGeometry = function() { var t = this._packedGeometries,
                    e = this._attributeBuffer,
                    i = this._indexBuffer;
                n.b.CAN_UPLOAD_SAME_BUFFER ? (t[this._flushId]._buffer.update(e.rawBinaryData), t[this._flushId]._indexBuffer.update(i), this.renderer.geometry.updateBuffers()) : (this._packedGeometryPoolSize <= this._flushId && (this._packedGeometryPoolSize++, t[this._flushId] = new this.geometryClass), t[this._flushId]._buffer.update(e.rawBinaryData), t[this._flushId]._indexBuffer.update(i), this.renderer.geometry.bind(t[this._flushId]), this.renderer.geometry.updateBuffers(), this._flushId++) }, e.prototype.drawBatches = function() { for (var t = this._dcIndex, i = this.renderer, n = i.gl, r = i.state, s = e._drawCallPool, o = null, a = 0; a < t; a++) { var h = s[a],
                        u = h.texArray,
                        l = h.type,
                        c = h.size,
                        d = h.start,
                        p = h.blend;
                    o !== u && (o = u, this.bindAndClearTexArray(u)), this.state.blendMode = p, r.set(this.state), n.drawElements(l, c, n.UNSIGNED_SHORT, 2 * d) } }, e.prototype.flush = function() { 0 !== this._vertexCount && (this._attributeBuffer = this.getAttributeBuffer(this._vertexCount), this._indexBuffer = this.getIndexBuffer(this._indexCount), this._aIndex = 0, this._iIndex = 0, this._dcIndex = 0, this.buildTexturesAndDrawCalls(), this.updateGeometry(), this.drawBatches(), this._bufferSize = 0, this._vertexCount = 0, this._indexCount = 0) }, e.prototype.start = function() { this.renderer.state.set(this.state), this.renderer.shader.bind(this._shader), n.b.CAN_UPLOAD_SAME_BUFFER && this.renderer.geometry.bind(this._packedGeometries[this._flushId]) }, e.prototype.stop = function() { this.flush() }, e.prototype.destroy = function() { for (var e = 0; e < this._packedGeometryPoolSize; e++) this._packedGeometries[e] && this._packedGeometries[e].destroy();
                this.renderer.off("prerender", this.onPrerender, this), this._aBuffers = null, this._iBuffers = null, this._packedGeometries = null, this._attributeBuffer = null, this._indexBuffer = null, this._shader && (this._shader.destroy(), this._shader = null), t.prototype.destroy.call(this) }, e.prototype.getAttributeBuffer = function(t) { var e = Object(s.nextPow2)(Math.ceil(t / 8)),
                    i = Object(s.log2)(e),
                    n = 8 * e;
                this._aBuffers.length <= i && (this._iBuffers.length = i + 1); var r = this._aBuffers[n]; return r || (this._aBuffers[n] = r = new de(n * this.vertexSize * 4)), r }, e.prototype.getIndexBuffer = function(t) { var e = Object(s.nextPow2)(Math.ceil(t / 12)),
                    i = Object(s.log2)(e),
                    n = 12 * e;
                this._iBuffers.length <= i && (this._iBuffers.length = i + 1); var r = this._iBuffers[i]; return r || (this._iBuffers[i] = r = new Uint16Array(n)), r }, e.prototype.packInterleavedGeometry = function(t, e, i, n, r) { for (var o = e.uint32View, a = e.float32View, h = n / this.vertexSize, u = t.uvs, l = t.indices, c = t.vertexData, d = t._texture.baseTexture._batchLocation, p = Math.min(t.worldAlpha, 1), f = p < 1 && t._texture.baseTexture.alphaMode ? Object(s.premultiplyTint)(t._tintRGB, p) : t._tintRGB + (255 * p << 24), m = 0; m < c.length; m += 2) a[n++] = c[m], a[n++] = c[m + 1], a[n++] = u[m], a[n++] = u[m + 1], o[n++] = f, a[n++] = d; for (m = 0; m < l.length; m++) i[r++] = h + l[m] }, e._drawCallPool = [], e._textureArrayPool = [], e }(Z),
        fe = function() {
            function t(t, e) { if (this.vertexSrc = t, this.fragTemplate = e, this.programCache = {}, this.defaultGroupCache = {}, e.indexOf("%count%") < 0) throw new Error('Fragment template must contain "%count%".'); if (e.indexOf("%forloop%") < 0) throw new Error('Fragment template must contain "%forloop%".') } return t.prototype.generateShader = function(t) { if (!this.programCache[t]) { for (var e = new Int32Array(t), i = 0; i < t; i++) e[i] = i;
                    this.defaultGroupCache[t] = q.from({ uSamplers: e }, !0); var n = this.fragTemplate;
                    n = (n = n.replace(/%count%/gi, "" + t)).replace(/%forloop%/gi, this.generateSampleSrc(t)), this.programCache[t] = new Mt(this.vertexSrc, n) } var r = { tint: new Float32Array([1, 1, 1, 1]), translationMatrix: new h.d, "default": this.defaultGroupCache[t] }; return new Lt(this.programCache[t], r) }, t.prototype.generateSampleSrc = function(t) { var e = "";
                e += "\n", e += "\n"; for (var i = 0; i < t; i++) i > 0 && (e += "\nelse "), i < t - 1 && (e += "if(vTextureId < " + i + ".5)"), e += "\n{", e += "\n\tcolor = texture2D(uSamplers[" + i + "], vTextureCoord);", e += "\n}"; return e += "\n", e += "\n" }, t }(),
        me = function(t) {
            function e(e) { void 0 === e && (e = !1); var i = t.call(this) || this; return i._buffer = new j(null, e, !1), i._indexBuffer = new j(null, e, !0), i.addAttribute("aVertexPosition", i._buffer, 2, !1, r.p.FLOAT).addAttribute("aTextureCoord", i._buffer, 2, !1, r.p.FLOAT).addAttribute("aColor", i._buffer, 4, !0, r.p.UNSIGNED_BYTE).addAttribute("aTextureId", i._buffer, 1, !0, r.p.FLOAT).addIndex(i._indexBuffer), i } return d(e, t), e }(V),
        ge = "precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",
        ye = "varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",
        ve = function() {
            function t() {} return t.create = function(t) { var e = Object.assign({ vertex: ge, fragment: ye, geometryClass: me, vertexSize: 6 }, t),
                    i = e.vertex,
                    n = e.fragment,
                    r = e.vertexSize,
                    s = e.geometryClass; return function(t) {
                    function e(e) { var o = t.call(this, e) || this; return o.shaderGenerator = new fe(i, n), o.geometryClass = s, o.vertexSize = r, o } return d(e, t), e }(pe) }, Object.defineProperty(t, "defaultVertexSrc", { get: function() { return ge }, enumerable: !1, configurable: !0 }), Object.defineProperty(t, "defaultFragmentTemplate", { get: function() { return ye }, enumerable: !1, configurable: !0 }), t }(),
        be = ve.create() }, function(t, e, i) { "use strict";
    i.d(e, "a", (function() { return b })), i.d(e, "b", (function() { return _ })); var n = /iPhone/i,
        r = /iPod/i,
        s = /iPad/i,
        o = /\biOS-universal(?:.+)Mac\b/i,
        a = /\bAndroid(?:.+)Mobile\b/i,
        h = /Android/i,
        u = /(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,
        l = /Silk/i,
        c = /Windows Phone/i,
        d = /\bWindows(?:.+)ARM\b/i,
        p = /BlackBerry/i,
        f = /BB10/i,
        m = /Opera Mini/i,
        g = /\b(CriOS|Chrome)(?:.+)Mobile/i,
        y = /Mobile(?:.+)Firefox\b/i,
        v = function(t) { return void 0 !== t && "MacIntel" === t.platform && "number" == typeof t.maxTouchPoints && t.maxTouchPoints > 1 && "undefined" == typeof MSStream }; var b = function(t) { var e = { userAgent: "", platform: "", maxTouchPoints: 0 };
        t || "undefined" == typeof navigator ? "string" == typeof t ? e.userAgent = t : t && t.userAgent && (e = { userAgent: t.userAgent, platform: t.platform, maxTouchPoints: t.maxTouchPoints || 0 }) : e = { userAgent: navigator.userAgent, platform: navigator.platform, maxTouchPoints: navigator.maxTouchPoints || 0 }; var i = e.userAgent,
            b = i.split("[FBAN"); "undefined" != typeof b[1] && (i = b[0]), "undefined" != typeof(b = i.split("Twitter"))[1] && (i = b[0]); var _ = function(t) { return function(e) { return e.test(t) } }(i),
            x = { apple: { phone: _(n) && !_(c), ipod: _(r), tablet: !_(n) && (_(s) || v(e)) && !_(c), universal: _(o), device: (_(n) || _(r) || _(s) || _(o) || v(e)) && !_(c) }, amazon: { phone: _(u), tablet: !_(u) && _(l), device: _(u) || _(l) }, android: { phone: !_(c) && _(u) || !_(c) && _(a), tablet: !_(c) && !_(u) && !_(a) && (_(l) || _(h)), device: !_(c) && (_(u) || _(l) || _(a) || _(h)) || _(/\bokhttp\b/i) }, windows: { phone: _(c), tablet: _(d), device: _(c) || _(d) }, other: { blackberry: _(p), blackberry10: _(f), opera: _(m), firefox: _(y), chrome: _(g), device: _(p) || _(f) || _(m) || _(y) || _(g) }, any: !1, phone: !1, tablet: !1 }; return x.any = x.apple.device || x.android.device || x.windows.device || x.other.device, x.phone = x.apple.phone || x.android.phone || x.windows.phone, x.tablet = x.apple.tablet || x.android.tablet || x.windows.tablet, x }(window.navigator); var _ = { MIPMAP_TEXTURES: 1, ANISOTROPIC_LEVEL: 0, RESOLUTION: 1, FILTER_RESOLUTION: 1, SPRITE_MAX_TEXTURES: function(t) { var e = !0; if (b.tablet || b.phone) { var i; if (b.apple.device)
                    if (i = navigator.userAgent.match(/OS (\d+)_(\d+)?/)) parseInt(i[1], 10) < 11 && (e = !1); if (b.android.device)
                    if (i = navigator.userAgent.match(/Android\s([0-9.]*)/)) parseInt(i[1], 10) < 7 && (e = !1) } return e ? t : 4 }(32), SPRITE_BATCH_SIZE: 4096, RENDER_OPTIONS: { view: null, antialias: !1, autoDensity: !1, transparent: !1, backgroundColor: 0, clearBeforeRender: !0, preserveDrawingBuffer: !1, width: 800, height: 600, legacy: !1 }, GC_MODE: 0, GC_MAX_IDLE: 3600, GC_MAX_CHECK_COUNT: 600, WRAP_MODE: 33071, SCALE_MODE: 1, PRECISION_VERTEX: "highp", PRECISION_FRAGMENT: b.apple.device ? "highp" : "mediump", CAN_UPLOAD_SAME_BUFFER: !b.apple.device, CREATE_IMAGE_BITMAP: !1, ROUND_PIXELS: !1 } }, function(t, e, i) { "use strict";
    i.d(e, "a", (function() { return o })), i.d(e, "b", (function() { return d })), i.d(e, "c", (function() { return u })), i.d(e, "d", (function() { return l })); var n = i(6),
        r = i(4),
        s = i(1);
    n.b.SORTABLE_CHILDREN = !1; var o = function() {
            function t() { this.minX = Infinity, this.minY = Infinity, this.maxX = -Infinity, this.maxY = -Infinity, this.rect = null, this.updateID = -1 } return t.prototype.isEmpty = function() { return this.minX > this.maxX || this.minY > this.maxY }, t.prototype.clear = function() { this.minX = Infinity, this.minY = Infinity, this.maxX = -Infinity, this.maxY = -Infinity }, t.prototype.getRectangle = function(t) { return this.minX > this.maxX || this.minY > this.maxY ? r.j.EMPTY : ((t = t || new r.j(0, 0, 1, 1)).x = this.minX, t.y = this.minY, t.width = this.maxX - this.minX, t.height = this.maxY - this.minY, t) }, t.prototype.addPoint = function(t) { this.minX = Math.min(this.minX, t.x), this.maxX = Math.max(this.maxX, t.x), this.minY = Math.min(this.minY, t.y), this.maxY = Math.max(this.maxY, t.y) }, t.prototype.addQuad = function(t) { var e = this.minX,
                    i = this.minY,
                    n = this.maxX,
                    r = this.maxY,
                    s = t[0],
                    o = t[1];
                e = s < e ? s : e, i = o < i ? o : i, n = s > n ? s : n, r = o > r ? o : r, e = (s = t[2]) < e ? s : e, i = (o = t[3]) < i ? o : i, n = s > n ? s : n, r = o > r ? o : r, e = (s = t[4]) < e ? s : e, i = (o = t[5]) < i ? o : i, n = s > n ? s : n, r = o > r ? o : r, e = (s = t[6]) < e ? s : e, i = (o = t[7]) < i ? o : i, n = s > n ? s : n, r = o > r ? o : r, this.minX = e, this.minY = i, this.maxX = n, this.maxY = r }, t.prototype.addFrame = function(t, e, i, n, r) { this.addFrameMatrix(t.worldTransform, e, i, n, r) }, t.prototype.addFrameMatrix = function(t, e, i, n, r) { var s = t.a,
                    o = t.b,
                    a = t.c,
                    h = t.d,
                    u = t.tx,
                    l = t.ty,
                    c = this.minX,
                    d = this.minY,
                    p = this.maxX,
                    f = this.maxY,
                    m = s * e + a * i + u,
                    g = o * e + h * i + l;
                c = m < c ? m : c, d = g < d ? g : d, p = m > p ? m : p, f = g > f ? g : f, c = (m = s * n + a * i + u) < c ? m : c, d = (g = o * n + h * i + l) < d ? g : d, p = m > p ? m : p, f = g > f ? g : f, c = (m = s * e + a * r + u) < c ? m : c, d = (g = o * e + h * r + l) < d ? g : d, p = m > p ? m : p, f = g > f ? g : f, c = (m = s * n + a * r + u) < c ? m : c, d = (g = o * n + h * r + l) < d ? g : d, p = m > p ? m : p, f = g > f ? g : f, this.minX = c, this.minY = d, this.maxX = p, this.maxY = f }, t.prototype.addVertexData = function(t, e, i) { for (var n = this.minX, r = this.minY, s = this.maxX, o = this.maxY, a = e; a < i; a += 2) { var h = t[a],
                        u = t[a + 1];
                    n = h < n ? h : n, r = u < r ? u : r, s = h > s ? h : s, o = u > o ? u : o } this.minX = n, this.minY = r, this.maxX = s, this.maxY = o }, t.prototype.addVertices = function(t, e, i, n) { this.addVerticesMatrix(t.worldTransform, e, i, n) }, t.prototype.addVerticesMatrix = function(t, e, i, n, r, s) { void 0 === r && (r = 0), void 0 === s && (s = r); for (var o = t.a, a = t.b, h = t.c, u = t.d, l = t.tx, c = t.ty, d = this.minX, p = this.minY, f = this.maxX, m = this.maxY, g = i; g < n; g += 2) { var y = e[g],
                        v = e[g + 1],
                        b = o * y + h * v + l,
                        _ = u * v + a * y + c;
                    d = Math.min(d, b - r), f = Math.max(f, b + r), p = Math.min(p, _ - s), m = Math.max(m, _ + s) } this.minX = d, this.minY = p, this.maxX = f, this.maxY = m }, t.prototype.addBounds = function(t) { var e = this.minX,
                    i = this.minY,
                    n = this.maxX,
                    r = this.maxY;
                this.minX = t.minX < e ? t.minX : e, this.minY = t.minY < i ? t.minY : i, this.maxX = t.maxX > n ? t.maxX : n, this.maxY = t.maxY > r ? t.maxY : r }, t.prototype.addBoundsMask = function(t, e) { var i = t.minX > e.minX ? t.minX : e.minX,
                    n = t.minY > e.minY ? t.minY : e.minY,
                    r = t.maxX < e.maxX ? t.maxX : e.maxX,
                    s = t.maxY < e.maxY ? t.maxY : e.maxY; if (i <= r && n <= s) { var o = this.minX,
                        a = this.minY,
                        h = this.maxX,
                        u = this.maxY;
                    this.minX = i < o ? i : o, this.minY = n < a ? n : a, this.maxX = r > h ? r : h, this.maxY = s > u ? s : u } }, t.prototype.addBoundsMatrix = function(t, e) { this.addFrameMatrix(e, t.minX, t.minY, t.maxX, t.maxY) }, t.prototype.addBoundsArea = function(t, e) { var i = t.minX > e.x ? t.minX : e.x,
                    n = t.minY > e.y ? t.minY : e.y,
                    r = t.maxX < e.x + e.width ? t.maxX : e.x + e.width,
                    s = t.maxY < e.y + e.height ? t.maxY : e.y + e.height; if (i <= r && n <= s) { var o = this.minX,
                        a = this.minY,
                        h = this.maxX,
                        u = this.maxY;
                    this.minX = i < o ? i : o, this.minY = n < a ? n : a, this.maxX = r > h ? r : h, this.maxY = s > u ? s : u } }, t.prototype.pad = function(t, e) { void 0 === t && (t = 0), void 0 === e && (e = t), this.isEmpty() || (this.minX -= t, this.maxX += t, this.minY -= e, this.maxY += e) }, t.prototype.addFramePad = function(t, e, i, n, r, s) { t -= r, e -= s, i += r, n += s, this.minX = this.minX < t ? this.minX : t, this.maxX = this.maxX > i ? this.maxX : i, this.minY = this.minY < e ? this.minY : e, this.maxY = this.maxY > n ? this.maxY : n }, t }(),
        a = function(t, e) { return (a = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) })(t, e) };

    function h(t, e) {
        function i() { this.constructor = t } a(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i) } var u = function(t) {
            function e() { var e = t.call(this) || this; return e.tempDisplayObjectParent = null, e.transform = new r.m, e.alpha = 1, e.visible = !0, e.renderable = !0, e.parent = null, e.worldAlpha = 1, e._lastSortedIndex = 0, e._zIndex = 0, e.filterArea = null, e.filters = null, e._enabledFilters = null, e._bounds = new o, e._localBounds = null, e._boundsID = 0, e._boundsRect = null, e._localBoundsRect = null, e._mask = null, e._destroyed = !1, e.isSprite = !1, e.isMask = !1, e } return h(e, t), e.mixin = function(t) { for (var i = Object.keys(t), n = 0; n < i.length; ++n) { var r = i[n];
                    Object.defineProperty(e.prototype, r, Object.getOwnPropertyDescriptor(t, r)) } }, e.prototype._recursivePostUpdateTransform = function() { this.parent ? (this.parent._recursivePostUpdateTransform(), this.transform.updateTransform(this.parent.transform)) : this.transform.updateTransform(this._tempDisplayObjectParent.transform) }, e.prototype.updateTransform = function() { this._boundsID++, this.transform.updateTransform(this.parent.transform), this.worldAlpha = this.alpha * this.parent.worldAlpha }, e.prototype.getBounds = function(t, e) { return t || (this.parent ? (this._recursivePostUpdateTransform(), this.updateTransform()) : (this.parent = this._tempDisplayObjectParent, this.updateTransform(), this.parent = null)), this._bounds.updateID !== this._boundsID && (this.calculateBounds(), this._bounds.updateID = this._boundsID), e || (this._boundsRect || (this._boundsRect = new r.j), e = this._boundsRect), this._bounds.getRectangle(e) }, e.prototype.getLocalBounds = function(t) { t || (this._localBoundsRect || (this._localBoundsRect = new r.j), t = this._localBoundsRect), this._localBounds || (this._localBounds = new o); var e = this.transform,
                    i = this.parent;
                this.parent = null, this.transform = this._tempDisplayObjectParent.transform; var n = this._bounds,
                    s = this._boundsID;
                this._bounds = this._localBounds; var a = this.getBounds(!1, t); return this.parent = i, this.transform = e, this._bounds = n, this._bounds.updateID += this._boundsID - s, a }, e.prototype.toGlobal = function(t, e, i) { return void 0 === i && (i = !1), i || (this._recursivePostUpdateTransform(), this.parent ? this.displayObjectUpdateTransform() : (this.parent = this._tempDisplayObjectParent, this.displayObjectUpdateTransform(), this.parent = null)), this.worldTransform.apply(t, e) }, e.prototype.toLocal = function(t, e, i, n) { return e && (t = e.toGlobal(t, i, n)), n || (this._recursivePostUpdateTransform(), this.parent ? this.displayObjectUpdateTransform() : (this.parent = this._tempDisplayObjectParent, this.displayObjectUpdateTransform(), this.parent = null)), this.worldTransform.applyInverse(t, i) }, e.prototype.setParent = function(t) { if (!t || !t.addChild) throw new Error("setParent: Argument must be a Container"); return t.addChild(this), t }, e.prototype.setTransform = function(t, e, i, n, r, s, o, a, h) { return void 0 === t && (t = 0), void 0 === e && (e = 0), void 0 === i && (i = 1), void 0 === n && (n = 1), void 0 === r && (r = 0), void 0 === s && (s = 0), void 0 === o && (o = 0), void 0 === a && (a = 0), void 0 === h && (h = 0), this.position.x = t, this.position.y = e, this.scale.x = i || 1, this.scale.y = n || 1, this.rotation = r, this.skew.x = s, this.skew.y = o, this.pivot.x = a, this.pivot.y = h, this }, e.prototype.destroy = function(t) { this.parent && this.parent.removeChild(this), this.removeAllListeners(), this.transform = null, this.parent = null, this._bounds = null, this._mask = null, this.filters = null, this.filterArea = null, this.hitArea = null, this.interactive = !1, this.interactiveChildren = !1, this._destroyed = !0 }, Object.defineProperty(e.prototype, "_tempDisplayObjectParent", { get: function() { return null === this.tempDisplayObjectParent && (this.tempDisplayObjectParent = new l), this.tempDisplayObjectParent }, enumerable: !1, configurable: !0 }), e.prototype.enableTempParent = function() { var t = this.parent; return this.parent = this._tempDisplayObjectParent, t }, e.prototype.disableTempParent = function(t) { this.parent = t }, Object.defineProperty(e.prototype, "x", { get: function() { return this.position.x }, set: function(t) { this.transform.position.x = t }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "y", { get: function() { return this.position.y }, set: function(t) { this.transform.position.y = t }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "worldTransform", { get: function() { return this.transform.worldTransform }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "localTransform", { get: function() { return this.transform.localTransform }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "position", { get: function() { return this.transform.position }, set: function(t) { this.transform.position.copyFrom(t) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "scale", { get: function() { return this.transform.scale }, set: function(t) { this.transform.scale.copyFrom(t) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "pivot", { get: function() { return this.transform.pivot }, set: function(t) { this.transform.pivot.copyFrom(t) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "skew", { get: function() { return this.transform.skew }, set: function(t) { this.transform.skew.copyFrom(t) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "rotation", { get: function() { return this.transform.rotation }, set: function(t) { this.transform.rotation = t }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "angle", { get: function() { return this.transform.rotation * r.i }, set: function(t) { this.transform.rotation = t * r.b }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "zIndex", { get: function() { return this._zIndex }, set: function(t) { this._zIndex = t, this.parent && (this.parent.sortDirty = !0) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "worldVisible", { get: function() { var t = this;
                    do { if (!t.visible) return !1;
                        t = t.parent } while (t); return !0 }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "mask", { get: function() { return this._mask }, set: function(t) { var e;
                    this._mask && ((e = this._mask.maskObject || this._mask).renderable = !0, e.isMask = !1);
                    (this._mask = t, this._mask) && ((e = this._mask.maskObject || this._mask).renderable = !1, e.isMask = !0) }, enumerable: !1, configurable: !0 }), e }(s.EventEmitter),
        l = function(t) {
            function e() { var e = null !== t && t.apply(this, arguments) || this; return e.sortDirty = null, e } return h(e, t), e }(u);

    function c(t, e) { return t.zIndex === e.zIndex ? t._lastSortedIndex - e._lastSortedIndex : t.zIndex - e.zIndex } u.prototype.displayObjectUpdateTransform = u.prototype.updateTransform; var d = function(t) {
        function e() { var e = t.call(this) || this; return e.children = [], e.sortableChildren = n.b.SORTABLE_CHILDREN, e.sortDirty = !1, e } return h(e, t), e.prototype.onChildrenChange = function(t) {}, e.prototype.addChild = function() { for (var t = arguments, e = [], i = 0; i < arguments.length; i++) e[i] = t[i]; if (e.length > 1)
                for (var n = 0; n < e.length; n++) this.addChild(e[n]);
            else { var r = e[0];
                r.parent && r.parent.removeChild(r), r.parent = this, this.sortDirty = !0, r.transform._parentID = -1, this.children.push(r), this._boundsID++, this.onChildrenChange(this.children.length - 1), this.emit("childAdded", r, this, this.children.length - 1), r.emit("added", this) } return e[0] }, e.prototype.addChildAt = function(t, e) { if (e < 0 || e > this.children.length) throw new Error(t + "addChildAt: The index " + e + " supplied is out of bounds " + this.children.length); return t.parent && t.parent.removeChild(t), t.parent = this, this.sortDirty = !0, t.transform._parentID = -1, this.children.splice(e, 0, t), this._boundsID++, this.onChildrenChange(e), t.emit("added", this), this.emit("childAdded", t, this, e), t }, e.prototype.swapChildren = function(t, e) { if (t !== e) { var i = this.getChildIndex(t),
                    n = this.getChildIndex(e);
                this.children[i] = e, this.children[n] = t, this.onChildrenChange(i < n ? i : n) } }, e.prototype.getChildIndex = function(t) { var e = this.children.indexOf(t); if (-1 === e) throw new Error("The supplied DisplayObject must be a child of the caller"); return e }, e.prototype.setChildIndex = function(t, e) { if (e < 0 || e >= this.children.length) throw new Error("The index " + e + " supplied is out of bounds " + this.children.length); var i = this.getChildIndex(t);
            Object(s.removeItems)(this.children, i, 1), this.children.splice(e, 0, t), this.onChildrenChange(e) }, e.prototype.getChildAt = function(t) { if (t < 0 || t >= this.children.length) throw new Error("getChildAt: Index (" + t + ") does not exist."); return this.children[t] }, e.prototype.removeChild = function() { for (var t = arguments, e = [], i = 0; i < arguments.length; i++) e[i] = t[i]; if (e.length > 1)
                for (var n = 0; n < e.length; n++) this.removeChild(e[n]);
            else { var r = e[0],
                    o = this.children.indexOf(r); if (-1 === o) return null;
                r.parent = null, r.transform._parentID = -1, Object(s.removeItems)(this.children, o, 1), this._boundsID++, this.onChildrenChange(o), r.emit("removed", this), this.emit("childRemoved", r, this, o) } return e[0] }, e.prototype.removeChildAt = function(t) { var e = this.getChildAt(t); return e.parent = null, e.transform._parentID = -1, Object(s.removeItems)(this.children, t, 1), this._boundsID++, this.onChildrenChange(t), e.emit("removed", this), this.emit("childRemoved", e, this, t), e }, e.prototype.removeChildren = function(t, e) { void 0 === t && (t = 0), void 0 === e && (e = this.children.length); var i, n = t,
                r = e - n; if (r > 0 && r <= e) { i = this.children.splice(n, r); for (var s = 0; s < i.length; ++s) i[s].parent = null, i[s].transform && (i[s].transform._parentID = -1);
                this._boundsID++, this.onChildrenChange(t); for (s = 0; s < i.length; ++s) i[s].emit("removed", this), this.emit("childRemoved", i[s], this, s); return i } if (0 === r && 0 === this.children.length) return []; throw new RangeError("removeChildren: numeric values are outside the acceptable range.") }, e.prototype.sortChildren = function() { for (var t = !1, e = 0, i = this.children.length; e < i; ++e) { var n = this.children[e];
                n._lastSortedIndex = e, t || 0 === n.zIndex || (t = !0) } t && this.children.length > 1 && this.children.sort(c), this.sortDirty = !1 }, e.prototype.updateTransform = function() { this.sortableChildren && this.sortDirty && this.sortChildren(), this._boundsID++, this.transform.updateTransform(this.parent.transform), this.worldAlpha = this.alpha * this.parent.worldAlpha; for (var t = 0, e = this.children.length; t < e; ++t) { var i = this.children[t];
                i.visible && i.updateTransform() } }, e.prototype.calculateBounds = function() { this._bounds.clear(), this._calculateBounds(); for (var t = 0; t < this.children.length; t++) { var e = this.children[t]; if (e.visible && e.renderable)
                    if (e.calculateBounds(), e._mask) { var i = e._mask.maskObject || e._mask;
                        i.calculateBounds(), this._bounds.addBoundsMask(e._bounds, i._bounds) } else e.filterArea ? this._bounds.addBoundsArea(e._bounds, e.filterArea) : this._bounds.addBounds(e._bounds) } this._bounds.updateID = this._boundsID }, e.prototype.getLocalBounds = function(e, i) { void 0 === i && (i = !1); var n = t.prototype.getLocalBounds.call(this, e); if (!i)
                for (var r = 0, s = this.children.length; r < s; ++r) { var o = this.children[r];
                    o.visible && o.updateTransform() }
            return n }, e.prototype._calculateBounds = function() {}, e.prototype.render = function(t) { if (this.visible && !(this.worldAlpha <= 0) && this.renderable)
                if (this._mask || this.filters && this.filters.length) this.renderAdvanced(t);
                else { this._render(t); for (var e = 0, i = this.children.length; e < i; ++e) this.children[e].render(t) } }, e.prototype.renderAdvanced = function(t) { t.batch.flush(); var e = this.filters,
                i = this._mask; if (e) { this._enabledFilters || (this._enabledFilters = []), this._enabledFilters.length = 0; for (var n = 0; n < e.length; n++) e[n].enabled && this._enabledFilters.push(e[n]);
                this._enabledFilters.length && t.filter.push(this, this._enabledFilters) } i && t.mask.push(this, this._mask), this._render(t);
            n = 0; for (var r = this.children.length; n < r; n++) this.children[n].render(t);
            t.batch.flush(), i && t.mask.pop(this), e && this._enabledFilters && this._enabledFilters.length && t.filter.pop() }, e.prototype._render = function(t) {}, e.prototype.destroy = function(e) { t.prototype.destroy.call(this), this.sortDirty = !1; var i = "boolean" == typeof e ? e : e && e.children,
                n = this.removeChildren(0, this.children.length); if (i)
                for (var r = 0; r < n.length; ++r) n[r].destroy(e) }, Object.defineProperty(e.prototype, "width", { get: function() { return this.scale.x * this.getLocalBounds().width }, set: function(t) { var e = this.getLocalBounds().width;
                this.scale.x = 0 !== e ? t / e : 1, this._width = t }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "height", { get: function() { return this.scale.y * this.getLocalBounds().height }, set: function(t) { var e = this.getLocalBounds().height;
                this.scale.y = 0 !== e ? t / e : 1, this._height = t }, enumerable: !1, configurable: !0 }), e }(u);
    d.prototype.containerUpdateTransform = d.prototype.updateTransform }, function(t, e, i) { "use strict";
    i.r(e), i.d(e, "utils", (function() { return c })), i.d(e, "AccessibilityManager", (function() { return f })), i.d(e, "accessibleTarget", (function() { return p })), i.d(e, "InteractionData", (function() { return y })), i.d(e, "InteractionEvent", (function() { return b })), i.d(e, "InteractionManager", (function() { return S })), i.d(e, "InteractionTrackingData", (function() { return _ })), i.d(e, "interactiveTarget", (function() { return w })), i.d(e, "Application", (function() { return P })), i.d(e, "AbstractBatchRenderer", (function() { return E.a })), i.d(e, "AbstractRenderer", (function() { return E.b })), i.d(e, "Attribute", (function() { return E.c })), i.d(e, "BaseRenderTexture", (function() { return E.d })), i.d(e, "BaseTexture", (function() { return E.e })), i.d(e, "BatchDrawCall", (function() { return E.f })), i.d(e, "BatchGeometry", (function() { return E.g })), i.d(e, "BatchPluginFactory", (function() { return E.h })), i.d(e, "BatchRenderer", (function() { return E.i })), i.d(e, "BatchShaderGenerator", (function() { return E.j })), i.d(e, "BatchTextureArray", (function() { return E.k })), i.d(e, "Buffer", (function() { return E.l })), i.d(e, "Filter", (function() { return E.m })), i.d(e, "FilterState", (function() { return E.n })), i.d(e, "Framebuffer", (function() { return E.o })), i.d(e, "GLFramebuffer", (function() { return E.p })), i.d(e, "GLProgram", (function() { return E.q })), i.d(e, "GLTexture", (function() { return E.r })), i.d(e, "Geometry", (function() { return E.s })), i.d(e, "IGLUniformData", (function() { return E.t })), i.d(e, "MaskData", (function() { return E.u })), i.d(e, "ObjectRenderer", (function() { return E.v })), i.d(e, "Program", (function() { return E.w })), i.d(e, "Quad", (function() { return E.x })), i.d(e, "QuadUv", (function() { return E.y })), i.d(e, "RenderTexture", (function() { return E.z })), i.d(e, "RenderTexturePool", (function() { return E.A })), i.d(e, "Renderer", (function() { return E.B })), i.d(e, "Shader", (function() { return E.C })), i.d(e, "SpriteMaskFilter", (function() { return E.D })), i.d(e, "State", (function() { return E.E })), i.d(e, "System", (function() { return E.F })), i.d(e, "Texture", (function() { return E.G })), i.d(e, "TextureMatrix", (function() { return E.H })), i.d(e, "TextureUvs", (function() { return E.I })), i.d(e, "UniformGroup", (function() { return E.J })), i.d(e, "ViewableBuffer", (function() { return E.K })), i.d(e, "autoDetectRenderer", (function() { return E.L })), i.d(e, "checkMaxIfStatementsInShader", (function() { return E.M })), i.d(e, "defaultFilterVertex", (function() { return E.N })), i.d(e, "defaultVertex", (function() { return E.O })), i.d(e, "resources", (function() { return E.P })), i.d(e, "systems", (function() { return E.Q })), i.d(e, "uniformParsers", (function() { return E.R })), i.d(e, "Extract", (function() { return A })), i.d(e, "AppLoaderPlugin", (function() { return I.a })), i.d(e, "Loader", (function() { return I.b })), i.d(e, "LoaderResource", (function() { return I.c })), i.d(e, "TextureLoader", (function() { return I.d })), i.d(e, "ParticleContainer", (function() { return R.a })), i.d(e, "ParticleRenderer", (function() { return R.b })), i.d(e, "BasePrepare", (function() { return M.a })), i.d(e, "CountLimiter", (function() { return M.b })), i.d(e, "Prepare", (function() { return M.c })), i.d(e, "TimeLimiter", (function() { return M.d })), i.d(e, "Spritesheet", (function() { return L })), i.d(e, "SpritesheetLoader", (function() { return D })), i.d(e, "TilingSprite", (function() { return k.a })), i.d(e, "TilingSpriteRenderer", (function() { return k.b })), i.d(e, "BitmapFont", (function() { return V })), i.d(e, "BitmapFontData", (function() { return U })), i.d(e, "BitmapFontLoader", (function() { return q })), i.d(e, "BitmapText", (function() { return K })), i.d(e, "Ticker", (function() { return g.a })), i.d(e, "TickerPlugin", (function() { return g.b })), i.d(e, "UPDATE_PRIORITY", (function() { return g.c })), i.d(e, "ALPHA_MODES", (function() { return Mt.a })), i.d(e, "BLEND_MODES", (function() { return Mt.b })), i.d(e, "BUFFER_BITS", (function() { return Mt.c })), i.d(e, "CLEAR_MODES", (function() { return Mt.d })), i.d(e, "DRAW_MODES", (function() { return Mt.e })), i.d(e, "ENV", (function() { return Mt.f })), i.d(e, "FORMATS", (function() { return Mt.g })), i.d(e, "GC_MODES", (function() { return Mt.h })), i.d(e, "MASK_TYPES", (function() { return Mt.i })), i.d(e, "MIPMAP_MODES", (function() { return Mt.j })), i.d(e, "MSAA_QUALITY", (function() { return Mt.k })), i.d(e, "PRECISION", (function() { return Mt.l })), i.d(e, "RENDERER_TYPE", (function() { return Mt.m })), i.d(e, "SCALE_MODES", (function() { return Mt.n })), i.d(e, "TARGETS", (function() { return Mt.o })), i.d(e, "TYPES", (function() { return Mt.p })), i.d(e, "WRAP_MODES", (function() { return Mt.q })), i.d(e, "Bounds", (function() { return d.a })), i.d(e, "Container", (function() { return d.b })), i.d(e, "DisplayObject", (function() { return d.c })), i.d(e, "TemporaryDisplayObject", (function() { return d.d })), i.d(e, "FillStyle", (function() { return Lt.a })), i.d(e, "GRAPHICS_CURVES", (function() { return Lt.b })), i.d(e, "Graphics", (function() { return Lt.c })), i.d(e, "GraphicsData", (function() { return Lt.d })), i.d(e, "GraphicsGeometry", (function() { return Lt.e })), i.d(e, "LINE_CAP", (function() { return Lt.f })), i.d(e, "LINE_JOIN", (function() { return Lt.g })), i.d(e, "LineStyle", (function() { return Lt.h })), i.d(e, "graphicsUtils", (function() { return Lt.i })), i.d(e, "Circle", (function() { return m.a })), i.d(e, "DEG_TO_RAD", (function() { return m.b })), i.d(e, "Ellipse", (function() { return m.c })), i.d(e, "Matrix", (function() { return m.d })), i.d(e, "ObservablePoint", (function() { return m.e })), i.d(e, "PI_2", (function() { return m.f })), i.d(e, "Point", (function() { return m.g })), i.d(e, "Polygon", (function() { return m.h })), i.d(e, "RAD_TO_DEG", (function() { return m.i })), i.d(e, "Rectangle", (function() { return m.j })), i.d(e, "RoundedRectangle", (function() { return m.k })), i.d(e, "SHAPES", (function() { return m.l })), i.d(e, "Transform", (function() { return m.m })), i.d(e, "groupD8", (function() { return m.n })), i.d(e, "Mesh", (function() { return F.a })), i.d(e, "MeshBatchUvs", (function() { return F.b })), i.d(e, "MeshGeometry", (function() { return F.c })), i.d(e, "MeshMaterial", (function() { return F.d })), i.d(e, "NineSlicePlane", (function() { return Dt.a })), i.d(e, "PlaneGeometry", (function() { return Dt.b })), i.d(e, "RopeGeometry", (function() { return Dt.c })), i.d(e, "SimpleMesh", (function() { return Dt.d })), i.d(e, "SimplePlane", (function() { return Dt.e })), i.d(e, "SimpleRope", (function() { return Dt.f })), i.d(e, "Runner", (function() { return kt.a })), i.d(e, "Sprite", (function() { return At.a })), i.d(e, "AnimatedSprite", (function() { return Ft })), i.d(e, "TEXT_GRADIENT", (function() { return B.a })), i.d(e, "Text", (function() { return B.b })), i.d(e, "TextMetrics", (function() { return B.c })), i.d(e, "TextStyle", (function() { return B.d })), i.d(e, "isMobile", (function() { return N.a })), i.d(e, "settings", (function() { return N.b })), i.d(e, "VERSION", (function() { return Xt })), i.d(e, "filters", (function() { return Ht })), i.d(e, "useDeprecated", (function() { return Gt })); var n = i(30),
        r = i(31),
        s = i.n(r);
    window.Promise || (window.Promise = n.Polyfill), Object.assign || (Object.assign = s.a); if (Date.now && Date.prototype.getTime || (Date.now = function() { return (new Date).getTime() }), !window.performance || !window.performance.now) { var o = Date.now();
        window.performance || (window.performance = {}), window.performance.now = function() { return Date.now() - o } } for (var a = Date.now(), h = ["ms", "moz", "webkit", "o"], u = 0; u < h.length && !window.requestAnimationFrame; ++u) { var l = h[u];
        window.requestAnimationFrame = window[l + "RequestAnimationFrame"], window.cancelAnimationFrame = window[l + "CancelAnimationFrame"] || window[l + "CancelRequestAnimationFrame"] } window.requestAnimationFrame || (window.requestAnimationFrame = function(t) { if ("function" != typeof t) throw new TypeError(t + "is not a function"); var e = Date.now(),
            i = 16 + a - e; return i < 0 && (i = 0), a = e, window.setTimeout((function() { a = Date.now(), t(performance.now()) }), i) }), window.cancelAnimationFrame || (window.cancelAnimationFrame = function(t) { return clearTimeout(t) }), Math.sign || (Math.sign = function(t) { return 0 === (t = Number(t)) || isNaN(t) ? t : t > 0 ? 1 : -1 }), Number.isInteger || (Number.isInteger = function(t) { return "number" == typeof t && isFinite(t) && Math.floor(t) === t }), window.ArrayBuffer || (window.ArrayBuffer = Array), window.Float32Array || (window.Float32Array = Array), window.Uint32Array || (window.Uint32Array = Array), window.Uint16Array || (window.Uint16Array = Array), window.Uint8Array || (window.Uint8Array = Array), window.Int32Array || (window.Int32Array = Array); var c = i(1),
        d = i(7),
        p = { accessible: !1, accessibleTitle: null, accessibleHint: null, tabIndex: 0, _accessibleActive: !1, _accessibleDiv: null, accessibleType: "button", accessiblePointerEvents: "auto", accessibleChildren: !0, renderId: -1 };
    d.c.mixin(p); var f = function() {
            function t(t) { this._hookDiv = null, (c.isMobile.tablet || c.isMobile.phone) && this.createTouchHook(); var e = document.createElement("div");
                e.style.width = "100px", e.style.height = "100px", e.style.position = "absolute", e.style.top = "0px", e.style.left = "0px", e.style.zIndex = 2..toString(), this.div = e, this.pool = [], this.renderId = 0, this.debug = !1, this.renderer = t, this.children = [], this._onKeyDown = this._onKeyDown.bind(this), this._onMouseMove = this._onMouseMove.bind(this), this._isActive = !1, this._isMobileAccessibility = !1, this.androidUpdateCount = 0, this.androidUpdateFrequency = 500, window.addEventListener("keydown", this._onKeyDown, !1) } return Object.defineProperty(t.prototype, "isActive", { get: function() { return this._isActive }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "isMobileAccessibility", { get: function() { return this._isMobileAccessibility }, enumerable: !1, configurable: !0 }), t.prototype.createTouchHook = function() { var t = this,
                    e = document.createElement("button");
                e.style.width = "1px", e.style.height = "1px", e.style.position = "absolute", e.style.top = "-1000px", e.style.left = "-1000px", e.style.zIndex = 2..toString(), e.style.backgroundColor = "#FF0000", e.title = "select to enable accessability for this content", e.addEventListener("focus", (function() { t._isMobileAccessibility = !0, t.activate(), t.destroyTouchHook() })), document.body.appendChild(e), this._hookDiv = e }, t.prototype.destroyTouchHook = function() { this._hookDiv && (document.body.removeChild(this._hookDiv), this._hookDiv = null) }, t.prototype.activate = function() { this._isActive || (this._isActive = !0, window.document.addEventListener("mousemove", this._onMouseMove, !0), window.removeEventListener("keydown", this._onKeyDown, !1), this.renderer.on("postrender", this.update, this), this.renderer.view.parentNode && this.renderer.view.parentNode.appendChild(this.div)) }, t.prototype.deactivate = function() { this._isActive && !this._isMobileAccessibility && (this._isActive = !1, window.document.removeEventListener("mousemove", this._onMouseMove, !0), window.addEventListener("keydown", this._onKeyDown, !1), this.renderer.off("postrender", this.update), this.div.parentNode && this.div.parentNode.removeChild(this.div)) }, t.prototype.updateAccessibleObjects = function(t) { if (t.visible && t.accessibleChildren) { t.accessible && t.interactive && (t._accessibleActive || this.addChild(t), t.renderId = this.renderId); for (var e = t.children, i = 0; i < e.length; i++) this.updateAccessibleObjects(e[i]) } }, t.prototype.update = function() { var t = performance.now(); if (!(c.isMobile.android.device && t < this.androidUpdateCount) && (this.androidUpdateCount = t + this.androidUpdateFrequency, this.renderer.renderingToScreen)) { this.renderer._lastObjectRendered && this.updateAccessibleObjects(this.renderer._lastObjectRendered); var e = this.renderer.view.getBoundingClientRect(),
                        i = this.renderer.resolution,
                        n = e.width / this.renderer.width * i,
                        r = e.height / this.renderer.height * i,
                        s = this.div;
                    s.style.left = e.left + "px", s.style.top = e.top + "px", s.style.width = this.renderer.width + "px", s.style.height = this.renderer.height + "px"; for (var o = 0; o < this.children.length; o++) { var a = this.children[o]; if (a.renderId !== this.renderId) a._accessibleActive = !1, Object(c.removeItems)(this.children, o, 1), this.div.removeChild(a._accessibleDiv), this.pool.push(a._accessibleDiv), a._accessibleDiv = null, o--;
                        else { s = a._accessibleDiv; var h = a.hitArea,
                                u = a.worldTransform;
                            a.hitArea ? (s.style.left = (u.tx + h.x * u.a) * n + "px", s.style.top = (u.ty + h.y * u.d) * r + "px", s.style.width = h.width * u.a * n + "px", s.style.height = h.height * u.d * r + "px") : (h = a.getBounds(), this.capHitArea(h), s.style.left = h.x * n + "px", s.style.top = h.y * r + "px", s.style.width = h.width * n + "px", s.style.height = h.height * r + "px", s.title !== a.accessibleTitle && null !== a.accessibleTitle && (s.title = a.accessibleTitle), s.getAttribute("aria-label") !== a.accessibleHint && null !== a.accessibleHint && s.setAttribute("aria-label", a.accessibleHint)), a.accessibleTitle === s.title && a.tabIndex === s.tabIndex || (s.title = a.accessibleTitle, s.tabIndex = a.tabIndex, this.debug && this.updateDebugHTML(s)) } } this.renderId++ } }, t.prototype.updateDebugHTML = function(t) { t.innerHTML = "type: " + t.type + "</br> title : " + t.title + "</br> tabIndex: " + t.tabIndex }, t.prototype.capHitArea = function(t) { t.x < 0 && (t.width += t.x, t.x = 0), t.y < 0 && (t.height += t.y, t.y = 0), t.x + t.width > this.renderer.width && (t.width = this.renderer.width - t.x), t.y + t.height > this.renderer.height && (t.height = this.renderer.height - t.y) }, t.prototype.addChild = function(t) { var e = this.pool.pop();
                e || ((e = document.createElement("button")).style.width = "100px", e.style.height = "100px", e.style.backgroundColor = this.debug ? "rgba(255,255,255,0.5)" : "transparent", e.style.position = "absolute", e.style.zIndex = 2..toString(), e.style.borderStyle = "none", navigator.userAgent.toLowerCase().indexOf("chrome") > -1 ? e.setAttribute("aria-live", "off") : e.setAttribute("aria-live", "polite"), navigator.userAgent.match(/rv:.*Gecko\//) ? e.setAttribute("aria-relevant", "additions") : e.setAttribute("aria-relevant", "text"), e.addEventListener("click", this._onClick.bind(this)), e.addEventListener("focus", this._onFocus.bind(this)), e.addEventListener("focusout", this._onFocusOut.bind(this))), e.style.pointerEvents = t.accessiblePointerEvents, e.type = t.accessibleType, t.accessibleTitle && null !== t.accessibleTitle ? e.title = t.accessibleTitle : t.accessibleHint && null !== t.accessibleHint || (e.title = "displayObject " + t.tabIndex), t.accessibleHint && null !== t.accessibleHint && e.setAttribute("aria-label", t.accessibleHint), this.debug && this.updateDebugHTML(e), t._accessibleActive = !0, t._accessibleDiv = e, e.displayObject = t, this.children.push(t), this.div.appendChild(t._accessibleDiv), t._accessibleDiv.tabIndex = t.tabIndex }, t.prototype._onClick = function(t) { var e = this.renderer.plugins.interaction;
                e.dispatchEvent(t.target.displayObject, "click", e.eventData), e.dispatchEvent(t.target.displayObject, "pointertap", e.eventData), e.dispatchEvent(t.target.displayObject, "tap", e.eventData) }, t.prototype._onFocus = function(t) { t.target.getAttribute("aria-live") || t.target.setAttribute("aria-live", "assertive"); var e = this.renderer.plugins.interaction;
                e.dispatchEvent(t.target.displayObject, "mouseover", e.eventData) }, t.prototype._onFocusOut = function(t) { t.target.getAttribute("aria-live") || t.target.setAttribute("aria-live", "polite"); var e = this.renderer.plugins.interaction;
                e.dispatchEvent(t.target.displayObject, "mouseout", e.eventData) }, t.prototype._onKeyDown = function(t) { 9 === t.keyCode && this.activate() }, t.prototype._onMouseMove = function(t) { 0 === t.movementX && 0 === t.movementY || this.deactivate() }, t.prototype.destroy = function() { this.destroyTouchHook(), this.div = null, window.document.removeEventListener("mousemove", this._onMouseMove, !0), window.removeEventListener("keydown", this._onKeyDown), this.pool = null, this.children = null, this.renderer = null }, t }(),
        m = i(4),
        g = i(9),
        y = function() {
            function t() { this.pressure = 0, this.rotationAngle = 0, this.twist = 0, this.tangentialPressure = 0, this.global = new m.g, this.target = null, this.originalEvent = null, this.identifier = null, this.isPrimary = !1, this.button = 0, this.buttons = 0, this.width = 0, this.height = 0, this.tiltX = 0, this.tiltY = 0, this.pointerType = null, this.pressure = 0, this.rotationAngle = 0, this.twist = 0, this.tangentialPressure = 0 } return Object.defineProperty(t.prototype, "pointerId", { get: function() { return this.identifier }, enumerable: !1, configurable: !0 }), t.prototype.getLocalPosition = function(t, e, i) { return t.worldTransform.applyInverse(i || this.global, e) }, t.prototype.copyEvent = function(t) { "isPrimary" in t && t.isPrimary && (this.isPrimary = !0), this.button = "button" in t && t.button; var e = "buttons" in t && t.buttons;
                this.buttons = Number.isInteger(e) ? e : "which" in t && t.which, this.width = "width" in t && t.width, this.height = "height" in t && t.height, this.tiltX = "tiltX" in t && t.tiltX, this.tiltY = "tiltY" in t && t.tiltY, this.pointerType = "pointerType" in t && t.pointerType, this.pressure = "pressure" in t && t.pressure, this.rotationAngle = "rotationAngle" in t && t.rotationAngle, this.twist = "twist" in t && t.twist || 0, this.tangentialPressure = "tangentialPressure" in t && t.tangentialPressure || 0 }, t.prototype.reset = function() { this.isPrimary = !1 }, t }(),
        v = function(t, e) { return (v = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) })(t, e) }; var b = function() {
            function t() { this.stopped = !1, this.stopsPropagatingAt = null, this.stopPropagationHint = !1, this.target = null, this.currentTarget = null, this.type = null, this.data = null } return t.prototype.stopPropagation = function() { this.stopped = !0, this.stopPropagationHint = !0, this.stopsPropagatingAt = this.currentTarget }, t.prototype.reset = function() { this.stopped = !1, this.stopsPropagatingAt = null, this.stopPropagationHint = !1, this.currentTarget = null, this.target = null }, t }(),
        _ = function() {
            function t(e) { this._pointerId = e, this._flags = t.FLAGS.NONE } return t.prototype._doSet = function(t, e) { this._flags = e ? this._flags | t : this._flags & ~t }, Object.defineProperty(t.prototype, "pointerId", { get: function() { return this._pointerId }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "flags", { get: function() { return this._flags }, set: function(t) { this._flags = t }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "none", { get: function() { return this._flags === t.FLAGS.NONE }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "over", { get: function() { return 0 != (this._flags & t.FLAGS.OVER) }, set: function(e) { this._doSet(t.FLAGS.OVER, e) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "rightDown", { get: function() { return 0 != (this._flags & t.FLAGS.RIGHT_DOWN) }, set: function(e) { this._doSet(t.FLAGS.RIGHT_DOWN, e) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "leftDown", { get: function() { return 0 != (this._flags & t.FLAGS.LEFT_DOWN) }, set: function(e) { this._doSet(t.FLAGS.LEFT_DOWN, e) }, enumerable: !1, configurable: !0 }), t.FLAGS = Object.freeze({ NONE: 0, OVER: 1, LEFT_DOWN: 2, RIGHT_DOWN: 4 }), t }(),
        x = function() {
            function t() { this._tempPoint = new m.g } return t.prototype.recursiveFindHit = function(t, e, i, n, r) { if (!e || !e.visible) return !1; var s = t.data.global,
                    o = !1,
                    a = r = e.interactive || r,
                    h = !0; if (e.hitArea ? (n && (e.worldTransform.applyInverse(s, this._tempPoint), e.hitArea.contains(this._tempPoint.x, this._tempPoint.y) ? o = !0 : (n = !1, h = !1)), a = !1) : e._mask && n && (e._mask.containsPoint && e._mask.containsPoint(s) || (n = !1)), h && e.interactiveChildren && e.children)
                    for (var u = e.children, l = u.length - 1; l >= 0; l--) { var c = u[l],
                            d = this.recursiveFindHit(t, c, i, n, a); if (d) { if (!c.parent) continue;
                            a = !1, d && (t.target && (n = !1), o = !0) } }
                return r && (n && !t.target && !e.hitArea && e.containsPoint && e.containsPoint(s) && (o = !0), e.interactive && (o && !t.target && (t.target = e), i && i(t, e, !!o))), o }, t.prototype.findHit = function(t, e, i, n) { this.recursiveFindHit(t, e, i, n, !1) }, t }(),
        w = { interactive: !1, interactiveChildren: !0, hitArea: null, get buttonMode() { return "pointer" === this.cursor }, set buttonMode(t) { t ? this.cursor = "pointer" : "pointer" === this.cursor && (this.cursor = null) }, cursor: null, get trackedPointers() { return this._trackedPointers === undefined && (this._trackedPointers = {}), this._trackedPointers }, _trackedPointers: undefined };
    d.c.mixin(w); var T = { target: null, data: { global: null } },
        S = function(t) {
            function e(e, i) { var n = t.call(this) || this; return i = i || {}, n.renderer = e, n.autoPreventDefault = i.autoPreventDefault === undefined || i.autoPreventDefault, n.interactionFrequency = i.interactionFrequency || 10, n.mouse = new y, n.mouse.identifier = 1, n.mouse.global.set(-999999), n.activeInteractionData = {}, n.activeInteractionData[1] = n.mouse, n.interactionDataPool = [], n.eventData = new b, n.interactionDOMElement = null, n.moveWhenInside = !1, n.eventsAdded = !1, n.tickerAdded = !1, n.mouseOverRenderer = !1, n.supportsTouchEvents = "ontouchstart" in window, n.supportsPointerEvents = !!window.PointerEvent, n.onPointerUp = n.onPointerUp.bind(n), n.processPointerUp = n.processPointerUp.bind(n), n.onPointerCancel = n.onPointerCancel.bind(n), n.processPointerCancel = n.processPointerCancel.bind(n), n.onPointerDown = n.onPointerDown.bind(n), n.processPointerDown = n.processPointerDown.bind(n), n.onPointerMove = n.onPointerMove.bind(n), n.processPointerMove = n.processPointerMove.bind(n), n.onPointerOut = n.onPointerOut.bind(n), n.processPointerOverOut = n.processPointerOverOut.bind(n), n.onPointerOver = n.onPointerOver.bind(n), n.cursorStyles = { "default": "inherit", pointer: "pointer" }, n.currentCursorMode = null, n.cursor = null, n.resolution = 1, n.delayedEvents = [], n.search = new x, n._tempDisplayObject = new d.d, n._useSystemTicker = i.useSystemTicker === undefined || i.useSystemTicker, n.setTargetElement(n.renderer.view, n.renderer.resolution), n } return function(t, e) {
                function i() { this.constructor = t } v(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i) }(e, t), Object.defineProperty(e.prototype, "useSystemTicker", { get: function() { return this._useSystemTicker }, set: function(t) { this._useSystemTicker = t, t ? this.addTickerListener() : this.removeTickerListener() }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "lastObjectRendered", { get: function() { return this.renderer._lastObjectRendered || this._tempDisplayObject }, enumerable: !1, configurable: !0 }), e.prototype.hitTest = function(t, e) { return T.target = null, T.data.global = t, e || (e = this.lastObjectRendered), this.processInteractive(T, e, null, !0), T.target }, e.prototype.setTargetElement = function(t, e) { void 0 === e && (e = 1), this.removeTickerListener(), this.removeEvents(), this.interactionDOMElement = t, this.resolution = e, this.addEvents(), this.addTickerListener() }, e.prototype.addTickerListener = function() {!this.tickerAdded && this.interactionDOMElement && this._useSystemTicker && (g.a.system.add(this.tickerUpdate, this, g.c.INTERACTION), this.tickerAdded = !0) }, e.prototype.removeTickerListener = function() { this.tickerAdded && (g.a.system.remove(this.tickerUpdate, this), this.tickerAdded = !1) }, e.prototype.addEvents = function() { if (!this.eventsAdded && this.interactionDOMElement) { var t = this.interactionDOMElement.style;
                    window.navigator.msPointerEnabled ? (t.msContentZooming = "none", t.msTouchAction = "none") : this.supportsPointerEvents && (t.touchAction = "none"), this.supportsPointerEvents ? (window.document.addEventListener("pointermove", this.onPointerMove, !0), this.interactionDOMElement.addEventListener("pointerdown", this.onPointerDown, !0), this.interactionDOMElement.addEventListener("pointerleave", this.onPointerOut, !0), this.interactionDOMElement.addEventListener("pointerover", this.onPointerOver, !0), window.addEventListener("pointercancel", this.onPointerCancel, !0), window.addEventListener("pointerup", this.onPointerUp, !0)) : (window.document.addEventListener("mousemove", this.onPointerMove, !0), this.interactionDOMElement.addEventListener("mousedown", this.onPointerDown, !0), this.interactionDOMElement.addEventListener("mouseout", this.onPointerOut, !0), this.interactionDOMElement.addEventListener("mouseover", this.onPointerOver, !0), window.addEventListener("mouseup", this.onPointerUp, !0)), this.supportsTouchEvents && (this.interactionDOMElement.addEventListener("touchstart", this.onPointerDown, !0), this.interactionDOMElement.addEventListener("touchcancel", this.onPointerCancel, !0), this.interactionDOMElement.addEventListener("touchend", this.onPointerUp, !0), this.interactionDOMElement.addEventListener("touchmove", this.onPointerMove, !0)), this.eventsAdded = !0 } }, e.prototype.removeEvents = function() { if (this.eventsAdded && this.interactionDOMElement) { var t = this.interactionDOMElement.style;
                    window.navigator.msPointerEnabled ? (t.msContentZooming = "", t.msTouchAction = "") : this.supportsPointerEvents && (t.touchAction = ""), this.supportsPointerEvents ? (window.document.removeEventListener("pointermove", this.onPointerMove, !0), this.interactionDOMElement.removeEventListener("pointerdown", this.onPointerDown, !0), this.interactionDOMElement.removeEventListener("pointerleave", this.onPointerOut, !0), this.interactionDOMElement.removeEventListener("pointerover", this.onPointerOver, !0), window.removeEventListener("pointercancel", this.onPointerCancel, !0), window.removeEventListener("pointerup", this.onPointerUp, !0)) : (window.document.removeEventListener("mousemove", this.onPointerMove, !0), this.interactionDOMElement.removeEventListener("mousedown", this.onPointerDown, !0), this.interactionDOMElement.removeEventListener("mouseout", this.onPointerOut, !0), this.interactionDOMElement.removeEventListener("mouseover", this.onPointerOver, !0), window.removeEventListener("mouseup", this.onPointerUp, !0)), this.supportsTouchEvents && (this.interactionDOMElement.removeEventListener("touchstart", this.onPointerDown, !0), this.interactionDOMElement.removeEventListener("touchcancel", this.onPointerCancel, !0), this.interactionDOMElement.removeEventListener("touchend", this.onPointerUp, !0), this.interactionDOMElement.removeEventListener("touchmove", this.onPointerMove, !0)), this.interactionDOMElement = null, this.eventsAdded = !1 } }, e.prototype.tickerUpdate = function(t) { this._deltaTime += t, this._deltaTime < this.interactionFrequency || (this._deltaTime = 0, this.update()) }, e.prototype.update = function() { if (this.interactionDOMElement)
                    if (this._didMove) this._didMove = !1;
                    else { for (var t in this.cursor = null, this.activeInteractionData)
                            if (this.activeInteractionData.hasOwnProperty(t)) { var e = this.activeInteractionData[t]; if (e.originalEvent && "touch" !== e.pointerType) { var i = this.configureInteractionEventForDOMEvent(this.eventData, e.originalEvent, e);
                                    this.processInteractive(i, this.lastObjectRendered, this.processPointerOverOut, !0) } } this.setCursorMode(this.cursor) } }, e.prototype.setCursorMode = function(t) { if (t = t || "default", this.currentCursorMode !== t) { this.currentCursorMode = t; var e = this.cursorStyles[t]; if (e) switch (typeof e) {
                        case "string":
                            this.interactionDOMElement.style.cursor = e; break;
                        case "function":
                            e(t); break;
                        case "object":
                            Object.assign(this.interactionDOMElement.style, e) } else "string" != typeof t || Object.prototype.hasOwnProperty.call(this.cursorStyles, t) || (this.interactionDOMElement.style.cursor = t) } }, e.prototype.dispatchEvent = function(t, e, i) { i.stopPropagationHint && t !== i.stopsPropagatingAt || (i.currentTarget = t, i.type = e, t.emit(e, i), t[e] && t[e](i)) }, e.prototype.delayDispatchEvent = function(t, e, i) { this.delayedEvents.push({ displayObject: t, eventString: e, eventData: i }) }, e.prototype.mapPositionToPoint = function(t, e, i) { var n;
                n = this.interactionDOMElement.parentElement ? this.interactionDOMElement.getBoundingClientRect() : { x: 0, y: 0, width: 0, height: 0 }; var r = 1 / this.resolution;
                t.x = (e - n.left) * (this.interactionDOMElement.width / n.width) * r, t.y = (i - n.top) * (this.interactionDOMElement.height / n.height) * r }, e.prototype.processInteractive = function(t, e, i, n) { var r = this.search.findHit(t, e, i, n),
                    s = this.delayedEvents; if (!s.length) return r;
                t.stopPropagationHint = !1; var o = s.length;
                this.delayedEvents = []; for (var a = 0; a < o; a++) { var h = s[a],
                        u = h.displayObject,
                        l = h.eventString,
                        c = h.eventData;
                    c.stopsPropagatingAt === u && (c.stopPropagationHint = !0), this.dispatchEvent(u, l, c) } return r }, e.prototype.onPointerDown = function(t) { if (!this.supportsTouchEvents || "touch" !== t.pointerType) { var e = this.normalizeToPointerData(t); if (this.autoPreventDefault && e[0].isNormalized)(t.cancelable || !("cancelable" in t)) && t.preventDefault(); for (var i = e.length, n = 0; n < i; n++) { var r = e[n],
                            s = this.getInteractionDataForPointerId(r),
                            o = this.configureInteractionEventForDOMEvent(this.eventData, r, s); if (o.data.originalEvent = t, this.processInteractive(o, this.lastObjectRendered, this.processPointerDown, !0), this.emit("pointerdown", o), "touch" === r.pointerType) this.emit("touchstart", o);
                        else if ("mouse" === r.pointerType || "pen" === r.pointerType) { var a = 2 === r.button;
                            this.emit(a ? "rightdown" : "mousedown", this.eventData) } } } }, e.prototype.processPointerDown = function(t, e, i) { var n = t.data,
                    r = t.data.identifier; if (i)
                    if (e.trackedPointers[r] || (e.trackedPointers[r] = new _(r)), this.dispatchEvent(e, "pointerdown", t), "touch" === n.pointerType) this.dispatchEvent(e, "touchstart", t);
                    else if ("mouse" === n.pointerType || "pen" === n.pointerType) { var s = 2 === n.button;
                    s ? e.trackedPointers[r].rightDown = !0 : e.trackedPointers[r].leftDown = !0, this.dispatchEvent(e, s ? "rightdown" : "mousedown", t) } }, e.prototype.onPointerComplete = function(t, e, i) { for (var n = this.normalizeToPointerData(t), r = n.length, s = t.target !== this.interactionDOMElement ? "outside" : "", o = 0; o < r; o++) { var a = n[o],
                        h = this.getInteractionDataForPointerId(a),
                        u = this.configureInteractionEventForDOMEvent(this.eventData, a, h); if (u.data.originalEvent = t, this.processInteractive(u, this.lastObjectRendered, i, e || !s), this.emit(e ? "pointercancel" : "pointerup" + s, u), "mouse" === a.pointerType || "pen" === a.pointerType) { var l = 2 === a.button;
                        this.emit(l ? "rightup" + s : "mouseup" + s, u) } else "touch" === a.pointerType && (this.emit(e ? "touchcancel" : "touchend" + s, u), this.releaseInteractionDataForPointerId(a.pointerId)) } }, e.prototype.onPointerCancel = function(t) { this.supportsTouchEvents && "touch" === t.pointerType || this.onPointerComplete(t, !0, this.processPointerCancel) }, e.prototype.processPointerCancel = function(t, e) { var i = t.data,
                    n = t.data.identifier;
                e.trackedPointers[n] !== undefined && (delete e.trackedPointers[n], this.dispatchEvent(e, "pointercancel", t), "touch" === i.pointerType && this.dispatchEvent(e, "touchcancel", t)) }, e.prototype.onPointerUp = function(t) { this.supportsTouchEvents && "touch" === t.pointerType || this.onPointerComplete(t, !1, this.processPointerUp) }, e.prototype.processPointerUp = function(t, e, i) { var n = t.data,
                    r = t.data.identifier,
                    s = e.trackedPointers[r],
                    o = "touch" === n.pointerType,
                    a = "mouse" === n.pointerType || "pen" === n.pointerType,
                    h = !1; if (a) { var u = 2 === n.button,
                        l = _.FLAGS,
                        c = u ? l.RIGHT_DOWN : l.LEFT_DOWN,
                        d = s !== undefined && s.flags & c;
                    i ? (this.dispatchEvent(e, u ? "rightup" : "mouseup", t), d && (this.dispatchEvent(e, u ? "rightclick" : "click", t), h = !0)) : d && this.dispatchEvent(e, u ? "rightupoutside" : "mouseupoutside", t), s && (u ? s.rightDown = !1 : s.leftDown = !1) } i ? (this.dispatchEvent(e, "pointerup", t), o && this.dispatchEvent(e, "touchend", t), s && (a && !h || this.dispatchEvent(e, "pointertap", t), o && (this.dispatchEvent(e, "tap", t), s.over = !1))) : s && (this.dispatchEvent(e, "pointerupoutside", t), o && this.dispatchEvent(e, "touchendoutside", t)), s && s.none && delete e.trackedPointers[r] }, e.prototype.onPointerMove = function(t) { if (!this.supportsTouchEvents || "touch" !== t.pointerType) { var e = this.normalizeToPointerData(t); "mouse" !== e[0].pointerType && "pen" !== e[0].pointerType || (this._didMove = !0, this.cursor = null); for (var i = e.length, n = 0; n < i; n++) { var r = e[n],
                            s = this.getInteractionDataForPointerId(r),
                            o = this.configureInteractionEventForDOMEvent(this.eventData, r, s);
                        o.data.originalEvent = t, this.processInteractive(o, this.lastObjectRendered, this.processPointerMove, !0), this.emit("pointermove", o), "touch" === r.pointerType && this.emit("touchmove", o), "mouse" !== r.pointerType && "pen" !== r.pointerType || this.emit("mousemove", o) } "mouse" === e[0].pointerType && this.setCursorMode(this.cursor) } }, e.prototype.processPointerMove = function(t, e, i) { var n = t.data,
                    r = "touch" === n.pointerType,
                    s = "mouse" === n.pointerType || "pen" === n.pointerType;
                s && this.processPointerOverOut(t, e, i), this.moveWhenInside && !i || (this.dispatchEvent(e, "pointermove", t), r && this.dispatchEvent(e, "touchmove", t), s && this.dispatchEvent(e, "mousemove", t)) }, e.prototype.onPointerOut = function(t) { if (!this.supportsTouchEvents || "touch" !== t.pointerType) { var e = this.normalizeToPointerData(t)[0]; "mouse" === e.pointerType && (this.mouseOverRenderer = !1, this.setCursorMode(null)); var i = this.getInteractionDataForPointerId(e),
                        n = this.configureInteractionEventForDOMEvent(this.eventData, e, i);
                    n.data.originalEvent = e, this.processInteractive(n, this.lastObjectRendered, this.processPointerOverOut, !1), this.emit("pointerout", n), "mouse" === e.pointerType || "pen" === e.pointerType ? this.emit("mouseout", n) : this.releaseInteractionDataForPointerId(i.identifier) } }, e.prototype.processPointerOverOut = function(t, e, i) { var n = t.data,
                    r = t.data.identifier,
                    s = "mouse" === n.pointerType || "pen" === n.pointerType,
                    o = e.trackedPointers[r];
                i && !o && (o = e.trackedPointers[r] = new _(r)), o !== undefined && (i && this.mouseOverRenderer ? (o.over || (o.over = !0, this.delayDispatchEvent(e, "pointerover", t), s && this.delayDispatchEvent(e, "mouseover", t)), s && null === this.cursor && (this.cursor = e.cursor)) : o.over && (o.over = !1, this.dispatchEvent(e, "pointerout", this.eventData), s && this.dispatchEvent(e, "mouseout", t), o.none && delete e.trackedPointers[r])) }, e.prototype.onPointerOver = function(t) { var e = this.normalizeToPointerData(t)[0],
                    i = this.getInteractionDataForPointerId(e),
                    n = this.configureInteractionEventForDOMEvent(this.eventData, e, i);
                n.data.originalEvent = e, "mouse" === e.pointerType && (this.mouseOverRenderer = !0), this.emit("pointerover", n), "mouse" !== e.pointerType && "pen" !== e.pointerType || this.emit("mouseover", n) }, e.prototype.getInteractionDataForPointerId = function(t) { var e, i = t.pointerId; return 1 === i || "mouse" === t.pointerType ? e = this.mouse : this.activeInteractionData[i] ? e = this.activeInteractionData[i] : ((e = this.interactionDataPool.pop() || new y).identifier = i, this.activeInteractionData[i] = e), e.copyEvent(t), e }, e.prototype.releaseInteractionDataForPointerId = function(t) { var e = this.activeInteractionData[t];
                e && (delete this.activeInteractionData[t], e.reset(), this.interactionDataPool.push(e)) }, e.prototype.configureInteractionEventForDOMEvent = function(t, e, i) { return t.data = i, this.mapPositionToPoint(i.global, e.clientX, e.clientY), "touch" === e.pointerType && (e.globalX = i.global.x, e.globalY = i.global.y), i.originalEvent = e, t.reset(), t }, e.prototype.normalizeToPointerData = function(t) { var e = []; if (this.supportsTouchEvents && t instanceof TouchEvent)
                    for (var i = 0, n = t.changedTouches.length; i < n; i++) { var r = t.changedTouches[i]; "undefined" == typeof r.button && (r.button = t.touches.length ? 1 : 0), "undefined" == typeof r.buttons && (r.buttons = t.touches.length ? 1 : 0), "undefined" == typeof r.isPrimary && (r.isPrimary = 1 === t.touches.length && "touchstart" === t.type), "undefined" == typeof r.width && (r.width = r.radiusX || 1), "undefined" == typeof r.height && (r.height = r.radiusY || 1), "undefined" == typeof r.tiltX && (r.tiltX = 0), "undefined" == typeof r.tiltY && (r.tiltY = 0), "undefined" == typeof r.pointerType && (r.pointerType = "touch"), "undefined" == typeof r.pointerId && (r.pointerId = r.identifier || 0), "undefined" == typeof r.pressure && (r.pressure = r.force || .5), "undefined" == typeof r.twist && (r.twist = 0), "undefined" == typeof r.tangentialPressure && (r.tangentialPressure = 0), "undefined" == typeof r.layerX && (r.layerX = r.offsetX = r.clientX), "undefined" == typeof r.layerY && (r.layerY = r.offsetY = r.clientY), r.isNormalized = !0, e.push(r) } else if (!(t instanceof MouseEvent) || this.supportsPointerEvents && t instanceof window.PointerEvent) e.push(t);
                    else { var s = t; "undefined" == typeof s.isPrimary && (s.isPrimary = !0), "undefined" == typeof s.width && (s.width = 1), "undefined" == typeof s.height && (s.height = 1), "undefined" == typeof s.tiltX && (s.tiltX = 0), "undefined" == typeof s.tiltY && (s.tiltY = 0), "undefined" == typeof s.pointerType && (s.pointerType = "mouse"), "undefined" == typeof s.pointerId && (s.pointerId = 1), "undefined" == typeof s.pressure && (s.pressure = .5), "undefined" == typeof s.twist && (s.twist = 0), "undefined" == typeof s.tangentialPressure && (s.tangentialPressure = 0), s.isNormalized = !0, e.push(s) } return e }, e.prototype.destroy = function() { this.removeEvents(), this.removeTickerListener(), this.removeAllListeners(), this.renderer = null, this.mouse = null, this.eventData = null, this.interactionDOMElement = null, this.onPointerDown = null, this.processPointerDown = null, this.onPointerUp = null, this.processPointerUp = null, this.onPointerCancel = null, this.processPointerCancel = null, this.onPointerMove = null, this.processPointerMove = null, this.onPointerOut = null, this.processPointerOverOut = null, this.onPointerOver = null, this.search = null }, e }(c.EventEmitter),
        E = i(5),
        P = function() {
            function t(e) { var i = this;
                e = Object.assign({ forceCanvas: !1 }, e), this.renderer = Object(E.L)(e), this.stage = new d.b, t._plugins.forEach((function(t) { t.init.call(i, e) })) } return t.registerPlugin = function(e) { t._plugins.push(e) }, t.prototype.render = function() { this.renderer.render(this.stage) }, Object.defineProperty(t.prototype, "view", { get: function() { return this.renderer.view }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "screen", { get: function() { return this.renderer.screen }, enumerable: !1, configurable: !0 }), t.prototype.destroy = function(e, i) { var n = this,
                    r = t._plugins.slice(0);
                r.reverse(), r.forEach((function(t) { t.destroy.call(n) })), this.stage.destroy(i), this.stage = null, this.renderer.destroy(e), this.renderer = null }, t }();
    P._plugins = []; var C = function() {
        function t() {} return t.init = function(t) { var e = this;
            Object.defineProperty(this, "resizeTo", { set: function(t) { window.removeEventListener("resize", this.queueResize), this._resizeTo = t, t && (window.addEventListener("resize", this.queueResize), this.resize()) }, get: function() { return this._resizeTo } }), this.queueResize = function() { e._resizeTo && (e.cancelResize(), e._resizeId = requestAnimationFrame((function() { return e.resize() }))) }, this.cancelResize = function() { e._resizeId && (cancelAnimationFrame(e._resizeId), e._resizeId = null) }, this.resize = function() { if (e._resizeTo) { var t, i; if (e.cancelResize(), e._resizeTo === window) t = window.innerWidth, i = window.innerHeight;
                    else { var n = e._resizeTo;
                        t = n.clientWidth, i = n.clientHeight } e.renderer.resize(t, i) } }, this._resizeId = null, this._resizeTo = null, this.resizeTo = t.resizeTo || null }, t.destroy = function() { this.cancelResize(), this.cancelResize = null, this.queueResize = null, this.resizeTo = null, this.resize = null }, t }();
    P.registerPlugin(C); var O = new m.j,
        A = function() {
            function t(t) { this.renderer = t, t.extract = this } return t.prototype.image = function(t, e, i) { var n = new Image; return n.src = this.base64(t, e, i), n }, t.prototype.base64 = function(t, e, i) { return this.canvas(t).toDataURL(e, i) }, t.prototype.canvas = function(e) { var i, n, r, s = this.renderer,
                    o = !1,
                    a = !1;
                e && (e instanceof E.z ? r = e : (r = this.renderer.generateTexture(e), a = !0)), r ? (i = r.baseTexture.resolution, n = r.frame, o = !1, s.renderTexture.bind(r)) : (i = this.renderer.resolution, o = !0, (n = O).width = this.renderer.width, n.height = this.renderer.height, s.renderTexture.bind(null)); var h = Math.floor(n.width * i + 1e-4),
                    u = Math.floor(n.height * i + 1e-4),
                    l = new c.CanvasRenderTarget(h, u, 1),
                    d = new Uint8Array(4 * h * u),
                    p = s.gl;
                p.readPixels(n.x * i, n.y * i, h, u, p.RGBA, p.UNSIGNED_BYTE, d); var f = l.context.getImageData(0, 0, h, u); if (t.arrayPostDivide(d, f.data), l.context.putImageData(f, 0, 0), o) { var m = new c.CanvasRenderTarget(l.width, l.height, 1);
                    m.context.scale(1, -1), m.context.drawImage(l.canvas, 0, -u), l.destroy(), l = m } return a && r.destroy(!0), l.canvas }, t.prototype.pixels = function(e) { var i, n, r, s = this.renderer,
                    o = !1;
                e && (e instanceof E.z ? r = e : (r = this.renderer.generateTexture(e), o = !0)), r ? (i = r.baseTexture.resolution, n = r.frame, s.renderTexture.bind(r)) : (i = s.resolution, (n = O).width = s.width, n.height = s.height, s.renderTexture.bind(null)); var a = n.width * i,
                    h = n.height * i,
                    u = new Uint8Array(4 * a * h),
                    l = s.gl; return l.readPixels(n.x * i, n.y * i, a, h, l.RGBA, l.UNSIGNED_BYTE, u), o && r.destroy(!0), t.arrayPostDivide(u, u), u }, t.prototype.destroy = function() { this.renderer.extract = null, this.renderer = null }, t.arrayPostDivide = function(t, e) { for (var i = 0; i < t.length; i += 4) { var n = e[i + 3] = t[i + 3];
                    0 !== n ? (e[i] = Math.round(Math.min(255 * t[i] / n, 255)), e[i + 1] = Math.round(Math.min(255 * t[i + 1] / n, 255)), e[i + 2] = Math.round(Math.min(255 * t[i + 2] / n, 255))) : (e[i] = t[i], e[i + 1] = t[i + 1], e[i + 2] = t[i + 2]) } }, t }(),
        I = i(11),
        R = i(19),
        M = i(20),
        L = function() {
            function t(t, e, i) { void 0 === i && (i = null), this._texture = t instanceof E.G ? t : null, this.baseTexture = t instanceof E.e ? t : this._texture.baseTexture, this.textures = {}, this.animations = {}, this.data = e; var n = this.baseTexture.resource;
                this.resolution = this._updateResolution(i || (n ? n.url : null)), this._frames = this.data.frames, this._frameKeys = Object.keys(this._frames), this._batchIndex = 0, this._callback = null } return t.prototype._updateResolution = function(t) { void 0 === t && (t = null); var e = this.data.meta.scale,
                    i = Object(c.getResolutionOfUrl)(t, null); return null === i && (i = e !== undefined ? parseFloat(e) : 1), 1 !== i && this.baseTexture.setResolution(i), i }, t.prototype.parse = function(e) { this._batchIndex = 0, this._callback = e, this._frameKeys.length <= t.BATCH_SIZE ? (this._processFrames(0), this._processAnimations(), this._parseComplete()) : this._nextBatch() }, t.prototype._processFrames = function(e) { for (var i = e, n = t.BATCH_SIZE; i - e < n && i < this._frameKeys.length;) { var r = this._frameKeys[i],
                        s = this._frames[r],
                        o = s.frame; if (o) { var a = null,
                            h = null,
                            u = !1 !== s.trimmed && s.sourceSize ? s.sourceSize : s.frame,
                            l = new m.j(0, 0, Math.floor(u.w) / this.resolution, Math.floor(u.h) / this.resolution);
                        a = s.rotated ? new m.j(Math.floor(o.x) / this.resolution, Math.floor(o.y) / this.resolution, Math.floor(o.h) / this.resolution, Math.floor(o.w) / this.resolution) : new m.j(Math.floor(o.x) / this.resolution, Math.floor(o.y) / this.resolution, Math.floor(o.w) / this.resolution, Math.floor(o.h) / this.resolution), !1 !== s.trimmed && s.spriteSourceSize && (h = new m.j(Math.floor(s.spriteSourceSize.x) / this.resolution, Math.floor(s.spriteSourceSize.y) / this.resolution, Math.floor(o.w) / this.resolution, Math.floor(o.h) / this.resolution)), this.textures[r] = new E.G(this.baseTexture, a, l, h, s.rotated ? 2 : 0, s.anchor), E.G.addToCache(this.textures[r], r) } i++ } }, t.prototype._processAnimations = function() { var t = this.data.animations || {}; for (var e in t) { this.animations[e] = []; for (var i = 0; i < t[e].length; i++) { var n = t[e][i];
                        this.animations[e].push(this.textures[n]) } } }, t.prototype._parseComplete = function() { var t = this._callback;
                this._callback = null, this._batchIndex = 0, t.call(this, this.textures) }, t.prototype._nextBatch = function() { var e = this;
                this._processFrames(this._batchIndex * t.BATCH_SIZE), this._batchIndex++, setTimeout((function() { e._batchIndex * t.BATCH_SIZE < e._frameKeys.length ? e._nextBatch() : (e._processAnimations(), e._parseComplete()) }), 0) }, t.prototype.destroy = function(t) { var e; for (var i in void 0 === t && (t = !1), this.textures) this.textures[i].destroy();
                this._frames = null, this._frameKeys = null, this.data = null, this.textures = null, t && (null === (e = this._texture) || void 0 === e || e.destroy(), this.baseTexture.destroy()), this._texture = null, this.baseTexture = null }, t.BATCH_SIZE = 1e3, t }(),
        D = function() {
            function t() {} return t.use = function(e, i) { var n = e.name + "_image"; if (e.data && e.type === I.c.TYPE.JSON && e.data.frames && !this.resources[n]) { var r = { crossOrigin: e.crossOrigin, metadata: e.metadata.imageMetadata, parentResource: e },
                        s = t.getResourcePath(e, this.baseUrl);
                    this.add(n, s, r, (function(t) { if (t.error) i(t.error);
                        else { var n = new L(t.texture, e.data, e.url);
                            n.parse((function() { e.spritesheet = n, e.textures = n.textures, i() })) } })) } else i() }, t.getResourcePath = function(t, e) { return t.isDataUrl ? t.data.meta.image : c.url.resolve(t.url.replace(e, ""), t.data.meta.image) }, t }(),
        k = i(21),
        N = i(6),
        F = i(10),
        B = i(14),
        j = function(t, e) { return (j = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) })(t, e) }; var U = function() { this.info = [], this.common = [], this.page = [], this.char = [], this.kerning = [] },
        G = [function() {
            function t() {} return t.test = function(t) { return "string" == typeof t && 0 === t.indexOf("info face=") }, t.parse = function(t) { var e = t.match(/^[a-z]+\s+.+$/gm),
                    i = { info: [], common: [], page: [], char: [], chars: [], kerning: [] }; for (var n in e) { var r = e[n].match(/^[a-z]+/gm)[0],
                        s = e[n].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),
                        o = {}; for (var a in s) { var h = s[a].split("="),
                            u = h[0],
                            l = h[1].replace(/"/gm, ""),
                            c = parseFloat(l),
                            d = isNaN(c) ? l : c;
                        o[u] = d } i[r].push(o) } var p = new U; return i.info.forEach((function(t) { return p.info.push({ face: t.face, size: parseInt(t.size, 10) }) })), i.common.forEach((function(t) { return p.common.push({ lineHeight: parseInt(t.lineHeight, 10) }) })), i.page.forEach((function(t) { return p.page.push({ id: parseInt(t.id, 10), file: t.file }) })), i.char.forEach((function(t) { return p.char.push({ id: parseInt(t.id, 10), page: parseInt(t.page, 10), x: parseInt(t.x, 10), y: parseInt(t.y, 10), width: parseInt(t.width, 10), height: parseInt(t.height, 10), xoffset: parseInt(t.xoffset, 10), yoffset: parseInt(t.yoffset, 10), xadvance: parseInt(t.xadvance, 10) }) })), i.kerning.forEach((function(t) { return p.kerning.push({ first: parseInt(t.first, 10), second: parseInt(t.second, 10), amount: parseInt(t.amount, 10) }) })), p }, t }(), function() {
            function t() {} return t.test = function(t) { return t instanceof XMLDocument && t.getElementsByTagName("page").length && null !== t.getElementsByTagName("info")[0].getAttribute("face") }, t.parse = function(t) { for (var e = new U, i = t.getElementsByTagName("info"), n = t.getElementsByTagName("common"), r = t.getElementsByTagName("page"), s = t.getElementsByTagName("char"), o = t.getElementsByTagName("kerning"), a = 0; a < i.length; a++) e.info.push({ face: i[a].getAttribute("face"), size: parseInt(i[a].getAttribute("size"), 10) }); for (a = 0; a < n.length; a++) e.common.push({ lineHeight: parseInt(n[a].getAttribute("lineHeight"), 10) }); for (a = 0; a < r.length; a++) e.page.push({ id: parseInt(r[a].getAttribute("id"), 10) || 0, file: r[a].getAttribute("file") }); for (a = 0; a < s.length; a++) { var h = s[a];
                    e.char.push({ id: parseInt(h.getAttribute("id"), 10), page: parseInt(h.getAttribute("page"), 10) || 0, x: parseInt(h.getAttribute("x"), 10), y: parseInt(h.getAttribute("y"), 10), width: parseInt(h.getAttribute("width"), 10), height: parseInt(h.getAttribute("height"), 10), xoffset: parseInt(h.getAttribute("xoffset"), 10), yoffset: parseInt(h.getAttribute("yoffset"), 10), xadvance: parseInt(h.getAttribute("xadvance"), 10) }) } for (a = 0; a < o.length; a++) e.kerning.push({ first: parseInt(o[a].getAttribute("first"), 10), second: parseInt(o[a].getAttribute("second"), 10), amount: parseInt(o[a].getAttribute("amount"), 10) }); return e }, t }()];

    function X(t) { for (var e = 0; e < G.length; e++)
            if (G[e].test(t)) return G[e]; return null }

    function H(t, e, i, n, r, s) { var o, a = i.fill; if (!Array.isArray(a)) return a; if (1 === a.length) return a[0]; var h = i.dropShadow ? i.dropShadowDistance : 0,
            u = i.padding || 0,
            l = Math.ceil(t.width / n) - h - 2 * u,
            c = Math.ceil(t.height / n) - h - 2 * u,
            d = a.slice(),
            p = i.fillGradientStops.slice(); if (!p.length)
            for (var f = d.length + 1, m = 1; m < f; ++m) p.push(m / f); if (d.unshift(a[0]), p.unshift(0), d.push(a[a.length - 1]), p.push(1), i.fillGradientType === B.a.LINEAR_VERTICAL) { o = e.createLinearGradient(l / 2, u, l / 2, c + u); var g = 0,
                y = (s.fontProperties.fontSize + i.strokeThickness) / c; for (m = 0; m < r.length; m++)
                for (var v = s.lineHeight * m, b = 0; b < d.length; b++) { var _ = v / c + ("number" == typeof p[b] ? p[b] : b / d.length) * y,
                        x = Math.max(g, _);
                    x = Math.min(x, 1), o.addColorStop(x, d[b]), g = x } } else { o = e.createLinearGradient(u, c / 2, l + u, c / 2); var w = d.length + 1,
                T = 1; for (m = 0; m < d.length; m++) { var S = void 0;
                S = "number" == typeof p[m] ? p[m] : T / w, o.addColorStop(S, d[m]), T++ } } return o }

    function z(t, e, i, n, r, s, o) { var a = i.text,
            h = i.fontProperties;
        e.translate(n, r), e.scale(s, s); var u = o.strokeThickness / 2,
            l = -o.strokeThickness / 2;
        e.font = o.toFontString(), e.lineWidth = o.strokeThickness, e.textBaseline = o.textBaseline, e.lineJoin = o.lineJoin, e.miterLimit = o.miterLimit, e.fillStyle = H(t, e, o, s, [a], i), e.strokeStyle = o.stroke, e.font = o.toFontString(), e.lineWidth = o.strokeThickness, e.textBaseline = o.textBaseline, e.lineJoin = o.lineJoin, e.miterLimit = o.miterLimit, e.fillStyle = H(t, e, o, s, [a], i), e.strokeStyle = o.stroke; var d = o.dropShadowColor,
            p = Object(c.hex2rgb)("number" == typeof d ? d : Object(c.string2hex)(d));
        o.dropShadow ? (e.shadowColor = "rgba(" + 255 * p[0] + "," + 255 * p[1] + "," + 255 * p[2] + "," + o.dropShadowAlpha + ")", e.shadowBlur = o.dropShadowBlur, e.shadowOffsetX = Math.cos(o.dropShadowAngle) * o.dropShadowDistance, e.shadowOffsetY = Math.sin(o.dropShadowAngle) * o.dropShadowDistance) : (e.shadowColor = "0", e.shadowBlur = 0, e.shadowOffsetX = 0, e.shadowOffsetY = 0), o.stroke && o.strokeThickness && e.strokeText(a, u, l + i.lineHeight - h.descent), o.fill && e.fillText(a, u, l + i.lineHeight - h.descent), e.setTransform(), e.fillStyle = "rgba(0, 0, 0, 0)" } var V = function() {
            function t(t, e) { var i = t.info[0],
                    n = t.common[0],
                    r = t.page[0],
                    s = Object(c.getResolutionOfUrl)(r.file),
                    o = {};
                this.font = i.face, this.size = i.size, this.lineHeight = n.lineHeight / s, this.chars = {}, this.pageTextures = o; for (var a = 0; a < t.page.length; a++) { var h = t.page[a],
                        u = h.id,
                        l = h.file;
                    o[u] = e instanceof Array ? e[a] : e[l] } for (a = 0; a < t.char.length; a++) { var d = t.char[a],
                        p = (u = d.id, d.page),
                        f = t.char[a],
                        g = f.x,
                        y = f.y,
                        v = f.width,
                        b = f.height,
                        _ = f.xoffset,
                        x = f.yoffset,
                        w = f.xadvance;
                    g /= s, y /= s, v /= s, b /= s, _ /= s, x /= s, w /= s; var T = new m.j(g + o[p].frame.x / s, y + o[p].frame.y / s, v, b);
                    this.chars[u] = { xOffset: _, yOffset: x, xAdvance: w, kerning: {}, texture: new E.G(o[p].baseTexture, T), page: p } } for (a = 0; a < t.kerning.length; a++) { var S = t.kerning[a],
                        P = S.first,
                        C = S.second,
                        O = S.amount;
                    P /= s, C /= s, O /= s, this.chars[C] && (this.chars[C].kerning[P] = O) } } return t.prototype.destroy = function() { for (var t in this.chars) this.chars[t].texture.destroy(), this.chars[t].texture = null; for (var t in this.pageTextures) this.pageTextures[t].destroy(!0), this.pageTextures[t] = null;
                this.chars = null, this.pageTextures = null }, t.install = function(e, i) { var n; if (e instanceof U) n = e;
                else { var r = X(e); if (!r) throw new Error("Unrecognized data format for font.");
                    n = r.parse(e) } i instanceof E.G && (i = [i]); var s = new t(n, i); return t.available[s.font] = s, s }, t.uninstall = function(e) { var i = t.available[e]; if (!i) throw new Error("No font found named '" + e + "'");
                i.destroy(), delete t.available[e] }, t.from = function(e, i, n) { if (!e) throw new Error("[BitmapFont] Property `name` is required."); var r = Object.assign({}, t.defaultOptions, n),
                    s = r.chars,
                    o = r.padding,
                    a = r.resolution,
                    h = r.textureWidth,
                    u = r.textureHeight,
                    l = function(t) { "string" == typeof t && (t = [t]); for (var e = [], i = 0, n = t.length; i < n; i++) { var r = t[i]; if (Array.isArray(r)) { if (2 !== r.length) throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got " + r.length + "."); var s = r[0].charCodeAt(0),
                                    o = r[1].charCodeAt(0); if (o < s) throw new Error("[BitmapFont]: Invalid character range."); for (var a = s, h = o; a <= h; a++) e.push(String.fromCharCode(a)) } else e.push.apply(e, r.split("")) } if (0 === e.length) throw new Error("[BitmapFont]: Empty set when resolving characters."); return e }(s),
                    c = i instanceof B.d ? i : new B.d(i),
                    d = h,
                    p = new U;
                p.info[0] = { face: c.fontFamily, size: c.fontSize }, p.common[0] = { lineHeight: c.fontSize }; for (var f, m, g, y = 0, v = 0, b = 0, _ = [], x = 0; x < l.length; x++) { f || ((f = document.createElement("canvas")).width = h, f.height = u, m = f.getContext("2d"), g = new E.e(f, { resolution: a }), _.push(new E.G(g)), p.page.push({ id: _.length - 1, file: "" })); var w = B.c.measureText(l[x], c, !1, f),
                        T = w.width,
                        S = Math.ceil(w.height),
                        P = Math.ceil(("italic" === c.fontStyle ? 2 : 1) * T); if (v >= u - S * a) { if (0 === v) throw new Error("[BitmapFont] textureHeight " + u + "px is too small for " + c.fontSize + "px fonts");--x, f = null, m = null, g = null, v = 0, y = 0, b = 0 } else if (b = Math.max(S + w.fontProperties.descent, b), P * a + y >= d) --x, v += b * a, v = Math.ceil(v), y = 0, b = 0;
                    else { z(f, m, w, y, v, a, c); var C = w.text.charCodeAt(0);
                        p.char.push({ id: C, page: _.length - 1, x: y / a, y: v / a, width: P, height: S, xoffset: 0, yoffset: 0, xadvance: Math.ceil(T - (c.dropShadow ? c.dropShadowDistance : 0) - (c.stroke ? c.strokeThickness : 0)) }), y += (P + 2 * o) * a, y = Math.ceil(y) } } var O = new t(p, _); return t.available[e] !== undefined && t.uninstall(e), t.available[e] = O, O }, t.ALPHA = [
                ["a", "z"],
                ["A", "Z"], " "
            ], t.NUMERIC = [
                ["0", "9"]
            ], t.ALPHANUMERIC = [
                ["a", "z"],
                ["A", "Z"],
                ["0", "9"], " "
            ], t.ASCII = [
                [" ", "~"]
            ], t.defaultOptions = { resolution: 1, textureWidth: 512, textureHeight: 512, padding: 4, chars: t.ALPHANUMERIC }, t.available = {}, t }(),
        W = [],
        Y = [],
        K = function(t) {
            function e(i, n) { void 0 === n && (n = {}); var r = t.call(this) || this;
                r._tint = 16777215, n.font && (Object(c.deprecation)("5.3.0", "PIXI.BitmapText constructor style.font property is deprecated."), r._upgradeStyle(n)); var s = Object.assign({}, e.styleDefaults, n),
                    o = s.align,
                    a = s.tint,
                    h = s.maxWidth,
                    u = s.letterSpacing,
                    l = s.fontName,
                    d = s.fontSize; if (!V.available[l]) throw new Error('Missing BitmapFont "' + l + '"'); return r._activePagesMeshData = [], r._textWidth = 0, r._textHeight = 0, r._align = o, r._tint = a, r._fontName = l, r._fontSize = d || V.available[l].size, r._text = i, r._maxWidth = h, r._maxLineHeight = 0, r._letterSpacing = u, r._anchor = new m.e((function() { r.dirty = !0 }), r, 0, 0), r.roundPixels = N.b.ROUND_PIXELS, r.dirty = !0, r } return function(t, e) {
                function i() { this.constructor = t } j(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i) }(e, t), e.prototype.updateText = function() { for (var t, e = V.available[this._fontName], i = this._fontSize / e.size, n = new m.g, r = [], s = [], o = this._text.replace(/(?:\r\n|\r)/g, "\n") || " ", a = o.length, h = this._maxWidth * e.size / this._fontSize, u = null, l = 0, d = 0, p = 0, f = -1, g = 0, y = 0, v = 0, b = 0; b < a; b++) { var _ = o.charCodeAt(b),
                        x = o.charAt(b); if (/(?:\s)/.test(x) && (f = b, g = l), "\r" !== x && "\n" !== x) { var w = e.chars[_]; if (w) { u && w.kerning[u] && (n.x += w.kerning[u]); var T = Y.pop() || { texture: E.G.EMPTY, line: 0, charCode: 0, position: new m.g };
                            T.texture = w.texture, T.line = p, T.charCode = _, T.position.x = n.x + w.xOffset + this._letterSpacing / 2, T.position.y = n.y + w.yOffset, r.push(T), n.x += w.xAdvance + this._letterSpacing, l = n.x, v = Math.max(v, w.yOffset + w.texture.height), u = _, -1 !== f && h > 0 && n.x > h && (++y, Object(c.removeItems)(r, 1 + f - y, 1 + b - f), b = f, f = -1, s.push(g), d = Math.max(d, g), p++, n.x = 0, n.y += e.lineHeight, u = null) } } else s.push(l), d = Math.max(d, l), ++p, ++y, n.x = 0, n.y += e.lineHeight, u = null } var S = o.charAt(o.length - 1); "\r" !== S && "\n" !== S && (/(?:\s)/.test(S) && (l = g), s.push(l), d = Math.max(d, l)); var P = []; for (b = 0; b <= p; b++) { var C = 0; "right" === this._align ? C = d - s[b] : "center" === this._align && (C = (d - s[b]) / 2), P.push(C) } var O = r.length,
                    A = {},
                    I = [],
                    R = this._activePagesMeshData; for (b = 0; b < R.length; b++) W.push(R[b]); for (b = 0; b < O; b++) { var M = (N = r[b].texture).baseTexture.uid; if (!A[M]) { if (!(z = W.pop())) { var L = new F.c,
                                D = new F.d(E.G.EMPTY);
                            z = { index: 0, indexCount: 0, vertexCount: 0, uvsCount: 0, total: 0, mesh: new F.a(L, D), vertices: null, uvs: null, indices: null } } z.index = 0, z.indexCount = 0, z.vertexCount = 0, z.uvsCount = 0, z.total = 0, z.mesh.texture = new E.G(N.baseTexture), z.mesh.tint = this._tint, I.push(z), A[M] = z } A[M].total++ } for (b = 0; b < R.length; b++) - 1 === I.indexOf(R[b]) && this.removeChild(R[b].mesh); for (b = 0; b < I.length; b++) I[b].mesh.parent !== this && this.addChild(I[b].mesh); for (var b in this._activePagesMeshData = I, A) { var k = (z = A[b]).total;
                    (null === (t = z.indices) || void 0 === t ? void 0 : t.length) > 6 * k && !(z.vertices.length < 2 * F.a.BATCHABLE_SIZE) || (z.vertices = new Float32Array(8 * k), z.uvs = new Float32Array(8 * k), z.indices = new Uint16Array(6 * k)), z.mesh.size = 6 * k } for (b = 0; b < O; b++) { var N, B = ((x = r[b]).position.x + P[x.line]) * i,
                        j = x.position.y * i,
                        U = A[(N = x.texture).baseTexture.uid],
                        G = N.frame,
                        X = N._uvs,
                        H = U.index++;
                    U.indices[6 * H + 0] = 0 + 4 * H, U.indices[6 * H + 1] = 1 + 4 * H, U.indices[6 * H + 2] = 2 + 4 * H, U.indices[6 * H + 3] = 0 + 4 * H, U.indices[6 * H + 4] = 2 + 4 * H, U.indices[6 * H + 5] = 3 + 4 * H, U.vertices[8 * H + 0] = B, U.vertices[8 * H + 1] = j, U.vertices[8 * H + 2] = B + G.width * i, U.vertices[8 * H + 3] = j, U.vertices[8 * H + 4] = B + G.width * i, U.vertices[8 * H + 5] = j + G.height * i, U.vertices[8 * H + 6] = B, U.vertices[8 * H + 7] = j + G.height * i, U.uvs[8 * H + 0] = X.x0, U.uvs[8 * H + 1] = X.y0, U.uvs[8 * H + 2] = X.x1, U.uvs[8 * H + 3] = X.y1, U.uvs[8 * H + 4] = X.x2, U.uvs[8 * H + 5] = X.y2, U.uvs[8 * H + 6] = X.x3, U.uvs[8 * H + 7] = X.y3 } for (var b in this._textWidth = d * i, this._textHeight = (n.y + e.lineHeight) * i, A) { var z = A[b]; if (0 !== this.anchor.x || 0 !== this.anchor.y)
                        for (var K = 0, q = this._textWidth * this.anchor.x, Q = this._textHeight * this.anchor.y, $ = 0; $ < z.total; $++) z.vertices[K++] -= q, z.vertices[K++] -= Q, z.vertices[K++] -= q, z.vertices[K++] -= Q, z.vertices[K++] -= q, z.vertices[K++] -= Q, z.vertices[K++] -= q, z.vertices[K++] -= Q;
                    this._maxLineHeight = v * i; var Z = z.mesh.geometry.getBuffer("aVertexPosition"),
                        J = z.mesh.geometry.getBuffer("aTextureCoord"),
                        tt = z.mesh.geometry.getIndex();
                    Z.data = z.vertices, J.data = z.uvs, tt.data = z.indices, Z.update(), J.update(), tt.update() } for (b = 0; b < r.length; b++) Y.push(r[b]) }, e.prototype.updateTransform = function() { this.validate(), this.containerUpdateTransform() }, e.prototype.getLocalBounds = function() { return this.validate(), t.prototype.getLocalBounds.call(this) }, e.prototype.validate = function() { this.dirty && (this.updateText(), this.dirty = !1) }, Object.defineProperty(e.prototype, "tint", { get: function() { return this._tint }, set: function(t) { if (this._tint !== t) { this._tint = t; for (var e = 0; e < this._activePagesMeshData.length; e++) this._activePagesMeshData[e].mesh.tint = t } }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "align", { get: function() { return this._align }, set: function(t) { this._align !== t && (this._align = t, this.dirty = !0) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "fontName", { get: function() { return this._fontName }, set: function(t) { if (!V.available[t]) throw new Error('Missing BitmapFont "' + t + '"');
                    this._fontName !== t && (this._fontName = t, this.dirty = !0) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "fontSize", { get: function() { return this._fontSize }, set: function(t) { this._fontSize !== t && (this._fontSize = t, this.dirty = !0) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "anchor", { get: function() { return this._anchor }, set: function(t) { "number" == typeof t ? this._anchor.set(t) : this._anchor.copyFrom(t) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "text", { get: function() { return this._text }, set: function(t) { t = String(null === t || t === undefined ? "" : t), this._text !== t && (this._text = t, this.dirty = !0) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "maxWidth", { get: function() { return this._maxWidth }, set: function(t) { this._maxWidth !== t && (this._maxWidth = t, this.dirty = !0) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "maxLineHeight", { get: function() { return this.validate(), this._maxLineHeight }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "textWidth", { get: function() { return this.validate(), this._textWidth }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "letterSpacing", { get: function() { return this._letterSpacing }, set: function(t) { this._letterSpacing !== t && (this._letterSpacing = t, this.dirty = !0) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "textHeight", { get: function() { return this.validate(), this._textHeight }, enumerable: !1, configurable: !0 }), e.prototype._upgradeStyle = function(t) { if ("string" == typeof t.font) { var e = t.font.split(" ");
                    t.fontName = 1 === e.length ? e[0] : e.slice(1).join(" "), e.length >= 2 && (t.fontSize = parseInt(e[0], 10)) } else t.fontName = t.font.name, t.fontSize = "number" == typeof t.font.size ? t.font.size : parseInt(t.font.size, 10) }, e.registerFont = function(t, e) { return Object(c.deprecation)("5.3.0", "PIXI.BitmapText.registerFont is deprecated, use PIXI.BitmapFont.install"), V.install(t, e) }, Object.defineProperty(e, "fonts", { get: function() { return Object(c.deprecation)("5.3.0", "PIXI.BitmapText.fonts is deprecated, use PIXI.BitmapFont.available"), V.available }, enumerable: !1, configurable: !0 }), e.styleDefaults = { align: "left", tint: 16777215, maxWidth: 0, letterSpacing: 0 }, e }(d.b),
        q = function() {
            function t() {} return t.add = function() { I.c.setExtensionXhrType("fnt", I.c.XHR_RESPONSE_TYPE.DOCUMENT) }, t.use = function(e, i) { var n = X(e.data); if (n)
                    for (var r = t.getBaseUrl(this, e), s = n.parse(e.data), o = {}, a = function(t) { o[t.metadata.pageFile] = t.texture, Object.keys(o).length === s.page.length && (e.bitmapFont = V.install(s, o), i()) }, h = 0; h < s.page.length; ++h) { var u = s.page[h].file,
                            l = r + u,
                            c = !1; for (var d in this.resources) { var p = this.resources[d]; if (p.url === l) { p.metadata.pageFile = u, p.texture ? a(p) : p.onAfterMiddleware.add(a), c = !0; break } } if (!c) { var f = { crossOrigin: e.crossOrigin, loadType: I.c.LOAD_TYPE.IMAGE, metadata: Object.assign({ pageFile: u }, e.metadata.imageMetadata), parentResource: e };
                            this.add(l, f, a) } } else i() }, t.getBaseUrl = function(e, i) { var n = i.isDataUrl ? "" : t.dirname(i.url); return i.isDataUrl && ("." === n && (n = ""), e.baseUrl && n && "/" === e.baseUrl.charAt(e.baseUrl.length - 1) && (n += "/")), (n = n.replace(e.baseUrl, "")) && "/" !== n.charAt(n.length - 1) && (n += "/"), n }, t.dirname = function(t) { var e = t.replace(/\\/g, "/").replace(/\/$/, "").replace(/\/[^\/]*$/, ""); return e === t ? "." : "" === e ? "/" : e }, t }(),
        Q = function(t, e) { return (Q = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) })(t, e) }; var $ = function(t) {
            function e(e) { void 0 === e && (e = 1); var i = t.call(this, E.O, "varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n", { uAlpha: 1 }) || this; return i.alpha = e, i } return function(t, e) {
                function i() { this.constructor = t } Q(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i) }(e, t), Object.defineProperty(e.prototype, "alpha", { get: function() { return this.uniforms.uAlpha }, set: function(t) { this.uniforms.uAlpha = t }, enumerable: !1, configurable: !0 }), e }(E.m),
        Z = function(t, e) { return (Z = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) })(t, e) };

    function J(t, e) {
        function i() { this.constructor = t } Z(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i) } var tt, et, it, nt, rt, st, ot, at, ht, ut, lt, ct, dt, pt, ft, mt, gt, yt = { 5: [.153388, .221461, .250301], 7: [.071303, .131514, .189879, .214607], 9: [.028532, .067234, .124009, .179044, .20236], 11: [.0093, .028002, .065984, .121703, .175713, .198596], 13: [.002406, .009255, .027867, .065666, .121117, .174868, .197641], 15: [489e-6, .002403, .009246, .02784, .065602, .120999, .174697, .197448] },
        vt = ["varying vec2 vBlurTexCoords[%size%];", "uniform sampler2D uSampler;", "void main(void)", "{", "    gl_FragColor = vec4(0.0);", "    %blur%", "}"].join("\n");! function(t) { t[t.WEBGL_LEGACY = 0] = "WEBGL_LEGACY", t[t.WEBGL = 1] = "WEBGL", t[t.WEBGL2 = 2] = "WEBGL2" }(tt || (tt = {})),
    function(t) { t[t.UNKNOWN = 0] = "UNKNOWN", t[t.WEBGL = 1] = "WEBGL", t[t.CANVAS = 2] = "CANVAS" }(et || (et = {})),
    function(t) { t[t.COLOR = 16384] = "COLOR", t[t.DEPTH = 256] = "DEPTH", t[t.STENCIL = 1024] = "STENCIL" }(it || (it = {})),
    function(t) { t[t.NORMAL = 0] = "NORMAL", t[t.ADD = 1] = "ADD", t[t.MULTIPLY = 2] = "MULTIPLY", t[t.SCREEN = 3] = "SCREEN", t[t.OVERLAY = 4] = "OVERLAY", t[t.DARKEN = 5] = "DARKEN", t[t.LIGHTEN = 6] = "LIGHTEN", t[t.COLOR_DODGE = 7] = "COLOR_DODGE", t[t.COLOR_BURN = 8] = "COLOR_BURN", t[t.HARD_LIGHT = 9] = "HARD_LIGHT", t[t.SOFT_LIGHT = 10] = "SOFT_LIGHT", t[t.DIFFERENCE = 11] = "DIFFERENCE", t[t.EXCLUSION = 12] = "EXCLUSION", t[t.HUE = 13] = "HUE", t[t.SATURATION = 14] = "SATURATION", t[t.COLOR = 15] = "COLOR", t[t.LUMINOSITY = 16] = "LUMINOSITY", t[t.NORMAL_NPM = 17] = "NORMAL_NPM", t[t.ADD_NPM = 18] = "ADD_NPM", t[t.SCREEN_NPM = 19] = "SCREEN_NPM", t[t.NONE = 20] = "NONE", t[t.SRC_OVER = 0] = "SRC_OVER", t[t.SRC_IN = 21] = "SRC_IN", t[t.SRC_OUT = 22] = "SRC_OUT", t[t.SRC_ATOP = 23] = "SRC_ATOP", t[t.DST_OVER = 24] = "DST_OVER", t[t.DST_IN = 25] = "DST_IN", t[t.DST_OUT = 26] = "DST_OUT", t[t.DST_ATOP = 27] = "DST_ATOP", t[t.ERASE = 26] = "ERASE", t[t.SUBTRACT = 28] = "SUBTRACT", t[t.XOR = 29] = "XOR" }(nt || (nt = {})),
    function(t) { t[t.POINTS = 0] = "POINTS", t[t.LINES = 1] = "LINES", t[t.LINE_LOOP = 2] = "LINE_LOOP", t[t.LINE_STRIP = 3] = "LINE_STRIP", t[t.TRIANGLES = 4] = "TRIANGLES", t[t.TRIANGLE_STRIP = 5] = "TRIANGLE_STRIP", t[t.TRIANGLE_FAN = 6] = "TRIANGLE_FAN" }(rt || (rt = {})),
    function(t) { t[t.RGBA = 6408] = "RGBA", t[t.RGB = 6407] = "RGB", t[t.ALPHA = 6406] = "ALPHA", t[t.LUMINANCE = 6409] = "LUMINANCE", t[t.LUMINANCE_ALPHA = 6410] = "LUMINANCE_ALPHA", t[t.DEPTH_COMPONENT = 6402] = "DEPTH_COMPONENT", t[t.DEPTH_STENCIL = 34041] = "DEPTH_STENCIL" }(st || (st = {})),
    function(t) { t[t.TEXTURE_2D = 3553] = "TEXTURE_2D", t[t.TEXTURE_CUBE_MAP = 34067] = "TEXTURE_CUBE_MAP", t[t.TEXTURE_2D_ARRAY = 35866] = "TEXTURE_2D_ARRAY", t[t.TEXTURE_CUBE_MAP_POSITIVE_X = 34069] = "TEXTURE_CUBE_MAP_POSITIVE_X", t[t.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070] = "TEXTURE_CUBE_MAP_NEGATIVE_X", t[t.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071] = "TEXTURE_CUBE_MAP_POSITIVE_Y", t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072] = "TEXTURE_CUBE_MAP_NEGATIVE_Y", t[t.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073] = "TEXTURE_CUBE_MAP_POSITIVE_Z", t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074] = "TEXTURE_CUBE_MAP_NEGATIVE_Z" }(ot || (ot = {})),
    function(t) { t[t.UNSIGNED_BYTE = 5121] = "UNSIGNED_BYTE", t[t.UNSIGNED_SHORT = 5123] = "UNSIGNED_SHORT", t[t.UNSIGNED_SHORT_5_6_5 = 33635] = "UNSIGNED_SHORT_5_6_5", t[t.UNSIGNED_SHORT_4_4_4_4 = 32819] = "UNSIGNED_SHORT_4_4_4_4", t[t.UNSIGNED_SHORT_5_5_5_1 = 32820] = "UNSIGNED_SHORT_5_5_5_1", t[t.FLOAT = 5126] = "FLOAT", t[t.HALF_FLOAT = 36193] = "HALF_FLOAT" }(at || (at = {})),
    function(t) { t[t.NEAREST = 0] = "NEAREST", t[t.LINEAR = 1] = "LINEAR" }(ht || (ht = {})),
    function(t) { t[t.CLAMP = 33071] = "CLAMP", t[t.REPEAT = 10497] = "REPEAT", t[t.MIRRORED_REPEAT = 33648] = "MIRRORED_REPEAT" }(ut || (ut = {})),
    function(t) { t[t.OFF = 0] = "OFF", t[t.POW2 = 1] = "POW2", t[t.ON = 2] = "ON" }(lt || (lt = {})),
    function(t) { t[t.NPM = 0] = "NPM", t[t.UNPACK = 1] = "UNPACK", t[t.PMA = 2] = "PMA", t[t.NO_PREMULTIPLIED_ALPHA = 0] = "NO_PREMULTIPLIED_ALPHA", t[t.PREMULTIPLY_ON_UPLOAD = 1] = "PREMULTIPLY_ON_UPLOAD", t[t.PREMULTIPLY_ALPHA = 2] = "PREMULTIPLY_ALPHA" }(ct || (ct = {})),
    function(t) { t[t.NO = 0] = "NO", t[t.YES = 1] = "YES", t[t.AUTO = 2] = "AUTO", t[t.BLEND = 0] = "BLEND", t[t.CLEAR = 1] = "CLEAR", t[t.BLIT = 2] = "BLIT" }(dt || (dt = {})),
    function(t) { t[t.AUTO = 0] = "AUTO", t[t.MANUAL = 1] = "MANUAL" }(pt || (pt = {})),
    function(t) { t.LOW = "lowp", t.MEDIUM = "mediump", t.HIGH = "highp" }(ft || (ft = {})),
    function(t) { t[t.NONE = 0] = "NONE", t[t.SCISSOR = 1] = "SCISSOR", t[t.STENCIL = 2] = "STENCIL", t[t.SPRITE = 3] = "SPRITE" }(mt || (mt = {})),
    function(t) { t[t.NONE = 0] = "NONE", t[t.LOW = 2] = "LOW", t[t.MEDIUM = 4] = "MEDIUM", t[t.HIGH = 8] = "HIGH" }(gt || (gt = {})); var bt = function(t) {
            function e(e, i, n, r, s) { void 0 === i && (i = 8), void 0 === n && (n = 4), void 0 === r && (r = N.b.RESOLUTION), void 0 === s && (s = 5); var o = this,
                    a = function(t, e) { var i, n = Math.ceil(t / 2),
                            r = "\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",
                            s = "";
                        i = e ? "vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);" : "vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);"; for (var o = 0; o < t; o++) { var a = i.replace("%index%", o.toString());
                            s += a = a.replace("%sampleIndex%", o - (n - 1) + ".0"), s += "\n" } return (r = r.replace("%blur%", s)).replace("%size%", t.toString()) }(s, e),
                    h = function(t) { for (var e, i = yt[t], n = i.length, r = vt, s = "", o = 0; o < t; o++) { var a = "gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%", o.toString());
                            e = o, o >= n && (e = t - o - 1), s += a = a.replace("%value%", i[e].toString()), s += "\n" } return (r = r.replace("%blur%", s)).replace("%size%", t.toString()) }(s); return (o = t.call(this, a, h) || this).horizontal = e, o.resolution = r, o._quality = 0, o.quality = n, o.blur = i, o } return J(e, t), e.prototype.apply = function(t, e, i, n) { if (i ? this.horizontal ? this.uniforms.strength = 1 / i.width * (i.width / e.width) : this.uniforms.strength = 1 / i.height * (i.height / e.height) : this.horizontal ? this.uniforms.strength = 1 / t.renderer.width * (t.renderer.width / e.width) : this.uniforms.strength = 1 / t.renderer.height * (t.renderer.height / e.height), this.uniforms.strength *= this.strength, this.uniforms.strength /= this.passes, 1 === this.passes) t.applyFilter(this, e, i, n);
                else { var r = t.getFilterTexture(),
                        s = t.renderer,
                        o = e,
                        a = r;
                    this.state.blend = !1, t.applyFilter(this, o, a, dt.CLEAR); for (var h = 1; h < this.passes - 1; h++) { t.bindAndClear(o, dt.BLIT), this.uniforms.uSampler = a; var u = a;
                        a = o, o = u, s.shader.bind(this), s.geometry.draw(5) } this.state.blend = !0, t.applyFilter(this, a, i, n), t.returnFilterTexture(r) } }, Object.defineProperty(e.prototype, "blur", { get: function() { return this.strength }, set: function(t) { this.padding = 1 + 2 * Math.abs(t), this.strength = t }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "quality", { get: function() { return this._quality }, set: function(t) { this._quality = t, this.passes = t }, enumerable: !1, configurable: !0 }), e }(E.m),
        _t = function(t) {
            function e(e, i, n, r) { void 0 === e && (e = 8), void 0 === i && (i = 4), void 0 === n && (n = N.b.RESOLUTION), void 0 === r && (r = 5); var s = t.call(this) || this; return s.blurXFilter = new bt(!0, e, i, n, r), s.blurYFilter = new bt(!1, e, i, n, r), s.resolution = n, s.quality = i, s.blur = e, s.repeatEdgePixels = !1, s } return J(e, t), e.prototype.apply = function(t, e, i, n) { var r = Math.abs(this.blurXFilter.strength),
                    s = Math.abs(this.blurYFilter.strength); if (r && s) { var o = t.getFilterTexture();
                    this.blurXFilter.apply(t, e, o, dt.CLEAR), this.blurYFilter.apply(t, o, i, n), t.returnFilterTexture(o) } else s ? this.blurYFilter.apply(t, e, i, n) : this.blurXFilter.apply(t, e, i, n) }, e.prototype.updatePadding = function() { this._repeatEdgePixels ? this.padding = 0 : this.padding = 2 * Math.max(Math.abs(this.blurXFilter.strength), Math.abs(this.blurYFilter.strength)) }, Object.defineProperty(e.prototype, "blur", { get: function() { return this.blurXFilter.blur }, set: function(t) { this.blurXFilter.blur = this.blurYFilter.blur = t, this.updatePadding() }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "quality", { get: function() { return this.blurXFilter.quality }, set: function(t) { this.blurXFilter.quality = this.blurYFilter.quality = t }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "blurX", { get: function() { return this.blurXFilter.blur }, set: function(t) { this.blurXFilter.blur = t, this.updatePadding() }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "blurY", { get: function() { return this.blurYFilter.blur }, set: function(t) { this.blurYFilter.blur = t, this.updatePadding() }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "blendMode", { get: function() { return this.blurYFilter.blendMode }, set: function(t) { this.blurYFilter.blendMode = t }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "repeatEdgePixels", { get: function() { return this._repeatEdgePixels }, set: function(t) { this._repeatEdgePixels = t, this.updatePadding() }, enumerable: !1, configurable: !0 }), e }(E.m),
        xt = function(t, e) { return (xt = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) })(t, e) }; var wt = function(t) {
        function e() { var e = this,
                i = { m: new Float32Array([1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0]), uAlpha: 1 }; return (e = t.call(this, E.N, "varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n", i) || this).alpha = 1, e } return function(t, e) {
            function i() { this.constructor = t } xt(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i) }(e, t), e.prototype._loadMatrix = function(t, e) { void 0 === e && (e = !1); var i = t;
            e && (this._multiply(i, this.uniforms.m, t), i = this._colorMatrix(i)), this.uniforms.m = i }, e.prototype._multiply = function(t, e, i) { return t[0] = e[0] * i[0] + e[1] * i[5] + e[2] * i[10] + e[3] * i[15], t[1] = e[0] * i[1] + e[1] * i[6] + e[2] * i[11] + e[3] * i[16], t[2] = e[0] * i[2] + e[1] * i[7] + e[2] * i[12] + e[3] * i[17], t[3] = e[0] * i[3] + e[1] * i[8] + e[2] * i[13] + e[3] * i[18], t[4] = e[0] * i[4] + e[1] * i[9] + e[2] * i[14] + e[3] * i[19] + e[4], t[5] = e[5] * i[0] + e[6] * i[5] + e[7] * i[10] + e[8] * i[15], t[6] = e[5] * i[1] + e[6] * i[6] + e[7] * i[11] + e[8] * i[16], t[7] = e[5] * i[2] + e[6] * i[7] + e[7] * i[12] + e[8] * i[17], t[8] = e[5] * i[3] + e[6] * i[8] + e[7] * i[13] + e[8] * i[18], t[9] = e[5] * i[4] + e[6] * i[9] + e[7] * i[14] + e[8] * i[19] + e[9], t[10] = e[10] * i[0] + e[11] * i[5] + e[12] * i[10] + e[13] * i[15], t[11] = e[10] * i[1] + e[11] * i[6] + e[12] * i[11] + e[13] * i[16], t[12] = e[10] * i[2] + e[11] * i[7] + e[12] * i[12] + e[13] * i[17], t[13] = e[10] * i[3] + e[11] * i[8] + e[12] * i[13] + e[13] * i[18], t[14] = e[10] * i[4] + e[11] * i[9] + e[12] * i[14] + e[13] * i[19] + e[14], t[15] = e[15] * i[0] + e[16] * i[5] + e[17] * i[10] + e[18] * i[15], t[16] = e[15] * i[1] + e[16] * i[6] + e[17] * i[11] + e[18] * i[16], t[17] = e[15] * i[2] + e[16] * i[7] + e[17] * i[12] + e[18] * i[17], t[18] = e[15] * i[3] + e[16] * i[8] + e[17] * i[13] + e[18] * i[18], t[19] = e[15] * i[4] + e[16] * i[9] + e[17] * i[14] + e[18] * i[19] + e[19], t }, e.prototype._colorMatrix = function(t) { var e = new Float32Array(t); return e[4] /= 255, e[9] /= 255, e[14] /= 255, e[19] /= 255, e }, e.prototype.brightness = function(t, e) { var i = [t, 0, 0, 0, 0, 0, t, 0, 0, 0, 0, 0, t, 0, 0, 0, 0, 0, 1, 0];
            this._loadMatrix(i, e) }, e.prototype.greyscale = function(t, e) { var i = [t, t, t, 0, 0, t, t, t, 0, 0, t, t, t, 0, 0, 0, 0, 0, 1, 0];
            this._loadMatrix(i, e) }, e.prototype.blackAndWhite = function(t) { this._loadMatrix([.3, .6, .1, 0, 0, .3, .6, .1, 0, 0, .3, .6, .1, 0, 0, 0, 0, 0, 1, 0], t) }, e.prototype.hue = function(t, e) { t = (t || 0) / 180 * Math.PI; var i = Math.cos(t),
                n = Math.sin(t),
                r = 1 / 3,
                s = (0, Math.sqrt)(r),
                o = [i + (1 - i) * r, r * (1 - i) - s * n, r * (1 - i) + s * n, 0, 0, r * (1 - i) + s * n, i + r * (1 - i), r * (1 - i) - s * n, 0, 0, r * (1 - i) - s * n, r * (1 - i) + s * n, i + r * (1 - i), 0, 0, 0, 0, 0, 1, 0];
            this._loadMatrix(o, e) }, e.prototype.contrast = function(t, e) { var i = (t || 0) + 1,
                n = -.5 * (i - 1),
                r = [i, 0, 0, 0, n, 0, i, 0, 0, n, 0, 0, i, 0, n, 0, 0, 0, 1, 0];
            this._loadMatrix(r, e) }, e.prototype.saturate = function(t, e) { void 0 === t && (t = 0); var i = 2 * t / 3 + 1,
                n = -.5 * (i - 1),
                r = [i, n, n, 0, 0, n, i, n, 0, 0, n, n, i, 0, 0, 0, 0, 0, 1, 0];
            this._loadMatrix(r, e) }, e.prototype.desaturate = function() { this.saturate(-1) }, e.prototype.negative = function(t) { this._loadMatrix([-1, 0, 0, 1, 0, 0, -1, 0, 1, 0, 0, 0, -1, 1, 0, 0, 0, 0, 1, 0], t) }, e.prototype.sepia = function(t) { this._loadMatrix([.393, .7689999, .18899999, 0, 0, .349, .6859999, .16799999, 0, 0, .272, .5339999, .13099999, 0, 0, 0, 0, 0, 1, 0], t) }, e.prototype.technicolor = function(t) { this._loadMatrix([1.9125277891456083, -.8545344976951645, -.09155508482755585, 0, 11.793603434377337, -.3087833385928097, 1.7658908555458428, -.10601743074722245, 0, -70.35205161461398, -.231103377548616, -.7501899197440212, 1.847597816108189, 0, 30.950940869491138, 0, 0, 0, 1, 0], t) }, e.prototype.polaroid = function(t) { this._loadMatrix([1.438, -.062, -.062, 0, 0, -.122, 1.378, -.122, 0, 0, -.016, -.016, 1.483, 0, 0, 0, 0, 0, 1, 0], t) }, e.prototype.toBGR = function(t) { this._loadMatrix([0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0], t) }, e.prototype.kodachrome = function(t) { this._loadMatrix([1.1285582396593525, -.3967382283601348, -.03992559172921793, 0, 63.72958762196502, -.16404339962244616, 1.0835251566291304, -.05498805115633132, 0, 24.732407896706203, -.16786010706155763, -.5603416277695248, 1.6014850761964943, 0, 35.62982807460946, 0, 0, 0, 1, 0], t) }, e.prototype.browni = function(t) { this._loadMatrix([.5997023498159715, .34553243048391263, -.2708298674538042, 0, 47.43192855600873, -.037703249837783157, .8609577587992641, .15059552388459913, 0, -36.96841498319127, .24113635128153335, -.07441037908422492, .44972182064877153, 0, -7.562075277591283, 0, 0, 0, 1, 0], t) }, e.prototype.vintage = function(t) { this._loadMatrix([.6279345635605994, .3202183420819367, -.03965408211312453, 0, 9.651285835294123, .02578397704808868, .6441188644374771, .03259127616149294, 0, 7.462829176470591, .0466055556782719, -.0851232987247891, .5241648018700465, 0, 5.159190588235296, 0, 0, 0, 1, 0], t) }, e.prototype.colorTone = function(t, e, i, n, r) { var s = ((i = i || 16770432) >> 16 & 255) / 255,
                o = (i >> 8 & 255) / 255,
                a = (255 & i) / 255,
                h = ((n = n || 3375104) >> 16 & 255) / 255,
                u = (n >> 8 & 255) / 255,
                l = (255 & n) / 255,
                c = [.3, .59, .11, 0, 0, s, o, a, t = t || .2, 0, h, u, l, e = e || .15, 0, s - h, o - u, a - l, 0, 0];
            this._loadMatrix(c, r) }, e.prototype.night = function(t, e) { var i = [-2 * (t = t || .1), -t, 0, 0, 0, -t, 0, t, 0, 0, 0, t, 2 * t, 0, 0, 0, 0, 0, 1, 0];
            this._loadMatrix(i, e) }, e.prototype.predator = function(t, e) { var i = [11.224130630493164 * t, -4.794486999511719 * t, -2.8746118545532227 * t, 0 * t, .40342438220977783 * t, -3.6330697536468506 * t, 9.193157196044922 * t, -2.951810836791992 * t, 0 * t, -1.316135048866272 * t, -3.2184197902679443 * t, -4.2375030517578125 * t, 7.476448059082031 * t, 0 * t, .8044459223747253 * t, 0, 0, 0, 1, 0];
            this._loadMatrix(i, e) }, e.prototype.lsd = function(t) { this._loadMatrix([2, -.4, .5, 0, 0, -.5, 2, -.4, 0, 0, -.4, -.5, 3, 0, 0, 0, 0, 0, 1, 0], t) }, e.prototype.reset = function() { this._loadMatrix([1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0], !1) }, Object.defineProperty(e.prototype, "matrix", { get: function() { return this.uniforms.m }, set: function(t) { this.uniforms.m = t }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "alpha", { get: function() { return this.uniforms.uAlpha }, set: function(t) { this.uniforms.uAlpha = t }, enumerable: !1, configurable: !0 }), e }(E.m);
    wt.prototype.grayscale = wt.prototype.greyscale; var Tt = function(t, e) { return (Tt = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) })(t, e) }; var St = function(t) {
            function e(e, i) { var n = this,
                    r = new m.d; return e.renderable = !1, (n = t.call(this, "attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n", "varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n", { mapSampler: e._texture, filterMatrix: r, scale: { x: 1, y: 1 }, rotation: new Float32Array([1, 0, 0, 1]) }) || this).maskSprite = e, n.maskMatrix = r, null !== i && i !== undefined || (i = 20), n.scale = new m.g(i, i), n } return function(t, e) {
                function i() { this.constructor = t } Tt(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i) }(e, t), e.prototype.apply = function(t, e, i, n) { this.uniforms.filterMatrix = t.calculateSpriteMatrix(this.maskMatrix, this.maskSprite), this.uniforms.scale.x = this.scale.x, this.uniforms.scale.y = this.scale.y; var r = this.maskSprite.worldTransform,
                    s = Math.sqrt(r.a * r.a + r.b * r.b),
                    o = Math.sqrt(r.c * r.c + r.d * r.d);
                0 !== s && 0 !== o && (this.uniforms.rotation[0] = r.a / s, this.uniforms.rotation[1] = r.b / s, this.uniforms.rotation[2] = r.c / o, this.uniforms.rotation[3] = r.d / o), t.applyFilter(this, e, i, n) }, Object.defineProperty(e.prototype, "map", { get: function() { return this.uniforms.mapSampler }, set: function(t) { this.uniforms.mapSampler = t }, enumerable: !1, configurable: !0 }), e }(E.m),
        Et = function(t, e) { return (Et = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) })(t, e) }; var Pt = function(t) {
            function e() { return t.call(this, "\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputPixel;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n", 'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputPixel;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n') || this } return function(t, e) {
                function i() { this.constructor = t } Et(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i) }(e, t), e }(E.m),
        Ct = function(t, e) { return (Ct = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) })(t, e) }; var Ot = function(t) {
            function e(e, i) { void 0 === e && (e = .5), void 0 === i && (i = Math.random()); var n = t.call(this, E.N, "precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n", { uNoise: 0, uSeed: 0 }) || this; return n.noise = e, n.seed = i, n } return function(t, e) {
                function i() { this.constructor = t } Ct(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i) }(e, t), Object.defineProperty(e.prototype, "noise", { get: function() { return this.uniforms.uNoise }, set: function(t) { this.uniforms.uNoise = t }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "seed", { get: function() { return this.uniforms.uSeed }, set: function(t) { this.uniforms.uSeed = t }, enumerable: !1, configurable: !0 }), e }(E.m),
        At = i(12),
        It = new m.d;
    d.c.prototype._cacheAsBitmap = !1, d.c.prototype._cacheData = null; var Rt = function() { this.textureCacheId = null, this.originalRender = null, this.originalRenderCanvas = null, this.originalCalculateBounds = null, this.originalGetLocalBounds = null, this.originalUpdateTransform = null, this.originalDestroy = null, this.originalMask = null, this.originalFilterArea = null, this.originalContainsPoint = null, this.sprite = null };
    Object.defineProperties(d.c.prototype, { cacheAsBitmap: { get: function() { return this._cacheAsBitmap }, set: function(t) { var e;
                this._cacheAsBitmap !== t && (this._cacheAsBitmap = t, t ? (this._cacheData || (this._cacheData = new Rt), (e = this._cacheData).originalRender = this.render, e.originalRenderCanvas = this.renderCanvas, e.originalUpdateTransform = this.updateTransform, e.originalCalculateBounds = this.calculateBounds, e.originalGetLocalBounds = this.getLocalBounds, e.originalDestroy = this.destroy, e.originalContainsPoint = this.containsPoint, e.originalMask = this._mask, e.originalFilterArea = this.filterArea, this.render = this._renderCached, this.renderCanvas = this._renderCachedCanvas, this.destroy = this._cacheAsBitmapDestroy) : ((e = this._cacheData).sprite && this._destroyCachedDisplayObject(), this.render = e.originalRender, this.renderCanvas = e.originalRenderCanvas, this.calculateBounds = e.originalCalculateBounds, this.getLocalBounds = e.originalGetLocalBounds, this.destroy = e.originalDestroy, this.updateTransform = e.originalUpdateTransform, this.containsPoint = e.originalContainsPoint, this._mask = e.originalMask, this.filterArea = e.originalFilterArea)) } } }), d.c.prototype._renderCached = function(t) {!this.visible || this.worldAlpha <= 0 || !this.renderable || (this._initCachedDisplayObject(t), this._cacheData.sprite.transform._worldID = this.transform._worldID, this._cacheData.sprite.worldAlpha = this.worldAlpha, this._cacheData.sprite._render(t)) }, d.c.prototype._initCachedDisplayObject = function(t) { if (!this._cacheData || !this._cacheData.sprite) { var e = this.alpha;
            this.alpha = 1, t.batch.flush(); var i = this.getLocalBounds(null, !0).clone(); if (this.filters) { var n = this.filters[0].padding;
                i.pad(n) } i.ceil(N.b.RESOLUTION); var r = t.renderTexture.current,
                s = t.renderTexture.sourceFrame.clone(),
                o = t.projection.transform,
                a = E.z.create({ width: i.width, height: i.height }),
                h = "cacheAsBitmap_" + Object(c.uid)();
            this._cacheData.textureCacheId = h, E.e.addToCache(a.baseTexture, h), E.G.addToCache(a, h); var u = this.transform.localTransform.copyTo(It).invert().translate(-i.x, -i.y);
            this.render = this._cacheData.originalRender, t.render(this, a, !0, u, !1), t.projection.transform = o, t.renderTexture.bind(r, s), this.render = this._renderCached, this.updateTransform = this.displayObjectUpdateTransform, this.calculateBounds = this._calculateCachedBounds, this.getLocalBounds = this._getCachedLocalBounds, this._mask = null, this.filterArea = null; var l = new At.a(a);
            l.transform.worldTransform = this.transform.worldTransform, l.anchor.x = -i.x / i.width, l.anchor.y = -i.y / i.height, l.alpha = e, l._bounds = this._bounds, this._cacheData.sprite = l, this.transform._parentID = -1, this.parent ? this.updateTransform() : (this.enableTempParent(), this.updateTransform(), this.disableTempParent(null)), this.containsPoint = l.containsPoint.bind(l) } }, d.c.prototype._renderCachedCanvas = function(t) {!this.visible || this.worldAlpha <= 0 || !this.renderable || (this._initCachedDisplayObjectCanvas(t), this._cacheData.sprite.worldAlpha = this.worldAlpha, this._cacheData.sprite._renderCanvas(t)) }, d.c.prototype._initCachedDisplayObjectCanvas = function(t) { if (!this._cacheData || !this._cacheData.sprite) { var e = this.getLocalBounds(null, !0),
                i = this.alpha;
            this.alpha = 1; var n = t.context,
                r = t._projTransform;
            e.ceil(N.b.RESOLUTION); var s = E.z.create({ width: e.width, height: e.height }),
                o = "cacheAsBitmap_" + Object(c.uid)();
            this._cacheData.textureCacheId = o, E.e.addToCache(s.baseTexture, o), E.G.addToCache(s, o); var a = It;
            this.transform.localTransform.copyTo(a), a.invert(), a.tx -= e.x, a.ty -= e.y, this.renderCanvas = this._cacheData.originalRenderCanvas, t.render(this, s, !0, a, !1), t.context = n, t._projTransform = r, this.renderCanvas = this._renderCachedCanvas, this.updateTransform = this.displayObjectUpdateTransform, this.calculateBounds = this._calculateCachedBounds, this.getLocalBounds = this._getCachedLocalBounds, this._mask = null, this.filterArea = null; var h = new At.a(s);
            h.transform.worldTransform = this.transform.worldTransform, h.anchor.x = -e.x / e.width, h.anchor.y = -e.y / e.height, h.alpha = i, h._bounds = this._bounds, this._cacheData.sprite = h, this.transform._parentID = -1, this.parent ? this.updateTransform() : (this.parent = t._tempDisplayObjectParent, this.updateTransform(), this.parent = null), this.containsPoint = h.containsPoint.bind(h) } }, d.c.prototype._calculateCachedBounds = function() { this._bounds.clear(), this._cacheData.sprite.transform._worldID = this.transform._worldID, this._cacheData.sprite._calculateBounds(), this._bounds.updateID = this._boundsID }, d.c.prototype._getCachedLocalBounds = function() { return this._cacheData.sprite.getLocalBounds(null) }, d.c.prototype._destroyCachedDisplayObject = function() { this._cacheData.sprite._texture.destroy(!0), this._cacheData.sprite = null, E.e.removeFromCache(this._cacheData.textureCacheId), E.G.removeFromCache(this._cacheData.textureCacheId), this._cacheData.textureCacheId = null }, d.c.prototype._cacheAsBitmapDestroy = function(t) { this.cacheAsBitmap = !1, this.destroy(t) }, d.c.prototype.name = null, d.b.prototype.getChildByName = function(t, e) { for (var i = 0, n = this.children.length; i < n; i++)
            if (this.children[i].name === t) return this.children[i]; if (e)
            for (i = 0, n = this.children.length; i < n; i++) { if (this.children[i].getChildByName) { var r = this.children[i].getChildByName(t, !0); if (r) return r } }
        return null }, d.c.prototype.getGlobalPosition = function(t, e) { return void 0 === t && (t = new m.g), void 0 === e && (e = !1), this.parent ? this.parent.toGlobal(this.position, t, e) : (t.x = this.position.x, t.y = this.position.y), t }; var Mt = i(2),
        Lt = i(17),
        Dt = i(18),
        kt = i(13),
        Nt = function(t, e) { return (Nt = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) })(t, e) }; var Ft = function(t) {
            function e(e, i) { void 0 === i && (i = !0); var n = t.call(this, e[0] instanceof E.G ? e[0] : e[0].texture) || this; return n._textures = null, n._durations = null, n._autoUpdate = i, n._isConnectedToTicker = !1, n.animationSpeed = 1, n.loop = !0, n.updateAnchor = !1, n.onComplete = null, n.onFrameChange = null, n.onLoop = null, n._currentTime = 0, n._playing = !1, n._previousFrame = null, n.textures = e, n } return function(t, e) {
                function i() { this.constructor = t } Nt(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i) }(e, t), e.prototype.stop = function() { this._playing && (this._playing = !1, this._autoUpdate && this._isConnectedToTicker && (g.a.shared.remove(this.update, this), this._isConnectedToTicker = !1)) }, e.prototype.play = function() { this._playing || (this._playing = !0, this._autoUpdate && !this._isConnectedToTicker && (g.a.shared.add(this.update, this, g.c.HIGH), this._isConnectedToTicker = !0)) }, e.prototype.gotoAndStop = function(t) { this.stop(); var e = this.currentFrame;
                this._currentTime = t, e !== this.currentFrame && this.updateTexture() }, e.prototype.gotoAndPlay = function(t) { var e = this.currentFrame;
                this._currentTime = t, e !== this.currentFrame && this.updateTexture(), this.play() }, e.prototype.update = function(t) { var e = this.animationSpeed * t,
                    i = this.currentFrame; if (null !== this._durations) { var n = this._currentTime % 1 * this._durations[this.currentFrame]; for (n += e / 60 * 1e3; n < 0;) this._currentTime--, n += this._durations[this.currentFrame]; var r = Math.sign(this.animationSpeed * t); for (this._currentTime = Math.floor(this._currentTime); n >= this._durations[this.currentFrame];) n -= this._durations[this.currentFrame] * r, this._currentTime += r;
                    this._currentTime += n / this._durations[this.currentFrame] } else this._currentTime += e;
                this._currentTime < 0 && !this.loop ? (this.gotoAndStop(0), this.onComplete && this.onComplete()) : this._currentTime >= this._textures.length && !this.loop ? (this.gotoAndStop(this._textures.length - 1), this.onComplete && this.onComplete()) : i !== this.currentFrame && (this.loop && this.onLoop && (this.animationSpeed > 0 && this.currentFrame < i || this.animationSpeed < 0 && this.currentFrame > i) && this.onLoop(), this.updateTexture()) }, e.prototype.updateTexture = function() { var t = this.currentFrame;
                this._previousFrame !== t && (this._previousFrame = t, this._texture = this._textures[t], this._textureID = -1, this._textureTrimmedID = -1, this._cachedTint = 16777215, this.uvs = this._texture._uvs.uvsFloat32, this.updateAnchor && this._anchor.copyFrom(this._texture.defaultAnchor), this.onFrameChange && this.onFrameChange(this.currentFrame)) }, e.prototype.destroy = function(e) { this.stop(), t.prototype.destroy.call(this, e), this.onComplete = null, this.onFrameChange = null, this.onLoop = null }, e.fromFrames = function(t) { for (var i = [], n = 0; n < t.length; ++n) i.push(E.G.from(t[n])); return new e(i) }, e.fromImages = function(t) { for (var i = [], n = 0; n < t.length; ++n) i.push(E.G.from(t[n])); return new e(i) }, Object.defineProperty(e.prototype, "totalFrames", { get: function() { return this._textures.length }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "textures", { get: function() { return this._textures }, set: function(t) { if (t[0] instanceof E.G) this._textures = t, this._durations = null;
                    else { this._textures = [], this._durations = []; for (var e = 0; e < t.length; e++) this._textures.push(t[e].texture), this._durations.push(t[e].time) } this._previousFrame = null, this.gotoAndStop(0), this.updateTexture() }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "currentFrame", { get: function() { var t = Math.floor(this._currentTime) % this._textures.length; return t < 0 && (t += this._textures.length), t }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "playing", { get: function() { return this._playing }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "autoUpdate", { get: function() { return this._autoUpdate }, set: function(t) { t !== this._autoUpdate && (this._autoUpdate = t, !this._autoUpdate && this._isConnectedToTicker ? (g.a.shared.remove(this.update, this), this._isConnectedToTicker = !1) : this._autoUpdate && !this._isConnectedToTicker && this._playing && (g.a.shared.add(this.update, this), this._isConnectedToTicker = !0)) }, enumerable: !1, configurable: !0 }), e }(At.a),
        Bt = function(t, e) { return (Bt = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) })(t, e) };

    function jt(t, e) {
        function i() { this.constructor = t } Bt(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i) } var Ut = "5.0.0";

    function Gt() { var t = this;
        Object.defineProperties(t, { SVG_SIZE: { get: function() { return Object(c.deprecation)(Ut, "PIXI.utils.SVG_SIZE property has moved to PIXI.resources.SVGResource.SVG_SIZE"), t.SVGResource.SVG_SIZE } }, TransformStatic: { get: function() { return Object(c.deprecation)(Ut, "PIXI.TransformStatic class has been removed, use PIXI.Transform"), t.Transform } }, TransformBase: { get: function() { return Object(c.deprecation)(Ut, "PIXI.TransformBase class has been removed, use PIXI.Transform"), t.Transform } }, TRANSFORM_MODE: { get: function() { return Object(c.deprecation)(Ut, "PIXI.TRANSFORM_MODE property has been removed"), { STATIC: 0, DYNAMIC: 1 } } }, WebGLRenderer: { get: function() { return Object(c.deprecation)(Ut, "PIXI.WebGLRenderer class has moved to PIXI.Renderer"), t.Renderer } }, CanvasRenderTarget: { get: function() { return Object(c.deprecation)(Ut, "PIXI.CanvasRenderTarget class has moved to PIXI.utils.CanvasRenderTarget"), t.utils.CanvasRenderTarget } }, loader: { get: function() { return Object(c.deprecation)(Ut, "PIXI.loader instance has moved to PIXI.Loader.shared"), t.Loader.shared } }, FilterManager: { get: function() { return Object(c.deprecation)(Ut, "PIXI.FilterManager class has moved to PIXI.systems.FilterSystem"), t.systems.FilterSystem } }, CanvasTinter: { get: function() { return Object(c.deprecation)("5.2.0", "PIXI.CanvasTinter namespace has moved to PIXI.canvasUtils"), t.canvasUtils } }, GroupD8: { get: function() { return Object(c.deprecation)("5.2.0", "PIXI.GroupD8 namespace has moved to PIXI.groupD8"), t.groupD8 } } }), t.accessibility = {}, Object.defineProperties(t.accessibility, { AccessibilityManager: { get: function() { return Object(c.deprecation)("5.3.0", "PIXI.accessibility.AccessibilityManager moved to PIXI.AccessibilityManager"), t.AccessibilityManager } } }), t.interaction = {}, Object.defineProperties(t.interaction, { InteractionManager: { get: function() { return Object(c.deprecation)("5.3.0", "PIXI.interaction.InteractionManager moved to PIXI.InteractionManager"), t.InteractionManager } }, InteractionData: { get: function() { return Object(c.deprecation)("5.3.0", "PIXI.interaction.InteractionData moved to PIXI.InteractionData"), t.InteractionData } }, InteractionEvent: { get: function() { return Object(c.deprecation)("5.3.0", "PIXI.interaction.InteractionEvent moved to PIXI.InteractionEvent"), t.InteractionEvent } } }), t.prepare = {}, Object.defineProperties(t.prepare, { BasePrepare: { get: function() { return Object(c.deprecation)("5.2.1", "PIXI.prepare.BasePrepare moved to PIXI.BasePrepare"), t.BasePrepare } }, Prepare: { get: function() { return Object(c.deprecation)("5.2.1", "PIXI.prepare.Prepare moved to PIXI.Prepare"), t.Prepare } }, CanvasPrepare: { get: function() { return Object(c.deprecation)("5.2.1", "PIXI.prepare.CanvasPrepare moved to PIXI.CanvasPrepare"), t.CanvasPrepare } } }), t.extract = {}, Object.defineProperties(t.extract, { Extract: { get: function() { return Object(c.deprecation)("5.2.1", "PIXI.extract.Extract moved to PIXI.Extract"), t.Extract } }, CanvasExtract: { get: function() { return Object(c.deprecation)("5.2.1", "PIXI.extract.CanvasExtract moved to PIXI.CanvasExtract"), t.CanvasExtract } } }), t.extras = {}, Object.defineProperties(t.extras, { TilingSprite: { get: function() { return Object(c.deprecation)(Ut, "PIXI.extras.TilingSprite class has moved to PIXI.TilingSprite"), t.TilingSprite } }, TilingSpriteRenderer: { get: function() { return Object(c.deprecation)(Ut, "PIXI.extras.TilingSpriteRenderer class has moved to PIXI.TilingSpriteRenderer"), t.TilingSpriteRenderer } }, AnimatedSprite: { get: function() { return Object(c.deprecation)(Ut, "PIXI.extras.AnimatedSprite class has moved to PIXI.AnimatedSprite"), t.AnimatedSprite } }, BitmapText: { get: function() { return Object(c.deprecation)(Ut, "PIXI.extras.BitmapText class has moved to PIXI.BitmapText"), t.BitmapText } } }), t.TilingSprite.fromFrame = function(e, i, n) { return Object(c.deprecation)("5.3.0", "TilingSprite.fromFrame is deprecated, use TilingSprite.from"), t.TilingSprite.from(e, { width: i, height: n }) }, t.TilingSprite.fromImage = function(e, i, n, r) { return void 0 === r && (r = {}), Object(c.deprecation)("5.3.0", "TilingSprite.fromImage is deprecated, use TilingSprite.from"), r && "object" != typeof r && (r = { scaleMode: arguments[4], resourceOptions: { crossorigin: arguments[3] } }), r.width = i, r.height = n, t.TilingSprite.from(e, r) }, Object.defineProperties(t.utils, { getSvgSize: { get: function() { return Object(c.deprecation)(Ut, "PIXI.utils.getSvgSize function has moved to PIXI.resources.SVGResource.getSize"), t.resources.SVGResource.getSize } } }), t.mesh = {}, Object.defineProperties(t.mesh, { Mesh: { get: function() { return Object(c.deprecation)(Ut, "PIXI.mesh.Mesh class has moved to PIXI.SimpleMesh"), t.SimpleMesh } }, NineSlicePlane: { get: function() { return Object(c.deprecation)(Ut, "PIXI.mesh.NineSlicePlane class has moved to PIXI.NineSlicePlane"), t.NineSlicePlane } }, Plane: { get: function() { return Object(c.deprecation)(Ut, "PIXI.mesh.Plane class has moved to PIXI.SimplePlane"), t.SimplePlane } }, Rope: { get: function() { return Object(c.deprecation)(Ut, "PIXI.mesh.Rope class has moved to PIXI.SimpleRope"), t.SimpleRope } }, RawMesh: { get: function() { return Object(c.deprecation)(Ut, "PIXI.mesh.RawMesh class has moved to PIXI.Mesh"), t.Mesh } }, CanvasMeshRenderer: { get: function() { return Object(c.deprecation)(Ut, "PIXI.mesh.CanvasMeshRenderer class has moved to PIXI.CanvasMeshRenderer"), t.CanvasMeshRenderer } }, MeshRenderer: { get: function() { return Object(c.deprecation)(Ut, "PIXI.mesh.MeshRenderer class has moved to PIXI.MeshRenderer"), t.MeshRenderer } } }), t.particles = {}, Object.defineProperties(t.particles, { ParticleContainer: { get: function() { return Object(c.deprecation)(Ut, "PIXI.particles.ParticleContainer class has moved to PIXI.ParticleContainer"), t.ParticleContainer } }, ParticleRenderer: { get: function() { return Object(c.deprecation)(Ut, "PIXI.particles.ParticleRenderer class has moved to PIXI.ParticleRenderer"), t.ParticleRenderer } } }), t.ticker = {}, Object.defineProperties(t.ticker, { Ticker: { get: function() { return Object(c.deprecation)(Ut, "PIXI.ticker.Ticker class has moved to PIXI.Ticker"), t.Ticker } }, shared: { get: function() { return Object(c.deprecation)(Ut, "PIXI.ticker.shared instance has moved to PIXI.Ticker.shared"), t.Ticker.shared } } }), t.loaders = {}, Object.defineProperties(t.loaders, { Loader: { get: function() { return Object(c.deprecation)(Ut, "PIXI.loaders.Loader class has moved to PIXI.Loader"), t.Loader } }, Resource: { get: function() { return Object(c.deprecation)(Ut, "PIXI.loaders.Resource class has moved to PIXI.LoaderResource"), t.LoaderResource } }, bitmapFontParser: { get: function() { return Object(c.deprecation)(Ut, "PIXI.loaders.bitmapFontParser function has moved to PIXI.BitmapFontLoader.use"), t.BitmapFontLoader.use } }, parseBitmapFontData: { get: function() { Object(c.deprecation)(Ut, "PIXI.loaders.parseBitmapFontData function has removed") } }, spritesheetParser: { get: function() { return Object(c.deprecation)(Ut, "PIXI.loaders.spritesheetParser function has moved to PIXI.SpritesheetLoader.use"), t.SpritesheetLoader.use } }, getResourcePath: { get: function() { return Object(c.deprecation)(Ut, "PIXI.loaders.getResourcePath property has moved to PIXI.SpritesheetLoader.getResourcePath"), t.SpritesheetLoader.getResourcePath } } }), t.Loader.addPixiMiddleware = function(e) { return Object(c.deprecation)(Ut, "PIXI.loaders.Loader.addPixiMiddleware function is deprecated, use PIXI.loaders.Loader.registerPlugin"), t.loaders.Loader.registerPlugin({ use: e() }) }; var e = function(t) { return "on" + t.charAt(0).toUpperCase() + t.slice(1) };
        Object.assign(t.Loader.prototype, { on: function(t) { var i = e(t);
                Object(c.deprecation)(Ut, "PIXI.Loader#on is completely deprecated, use PIXI.Loader#" + i + ".add") }, once: function(t) { var i = e(t);
                Object(c.deprecation)(Ut, "PIXI.Loader#once is completely deprecated, use PIXI.Loader#" + i + ".once") }, off: function(t) { var i = e(t);
                Object(c.deprecation)(Ut, "PIXI.Loader#off is completely deprecated, use PIXI.Loader#" + i + ".detach") } }), Object.defineProperty(t.extract, "WebGLExtract", { get: function() { return Object(c.deprecation)(Ut, "PIXI.extract.WebGLExtract method has moved to PIXI.Extract"), t.Extract } }), Object.defineProperty(t.prepare, "WebGLPrepare", { get: function() { return Object(c.deprecation)(Ut, "PIXI.prepare.WebGLPrepare class has moved to PIXI.Prepare"), t.Prepare } }), t.Container.prototype._renderWebGL = function(t) { Object(c.deprecation)(Ut, "PIXI.Container._renderWebGL method has moved to PIXI.Container._render"), this._render(t) }, t.Container.prototype.renderWebGL = function(t) { Object(c.deprecation)(Ut, "PIXI.Container.renderWebGL method has moved to PIXI.Container.render"), this.render(t) }, t.DisplayObject.prototype.renderWebGL = function(t) { Object(c.deprecation)(Ut, "PIXI.DisplayObject.renderWebGL method has moved to PIXI.DisplayObject.render"), this.render(t) }, t.Container.prototype.renderAdvancedWebGL = function(t) { Object(c.deprecation)(Ut, "PIXI.Container.renderAdvancedWebGL method has moved to PIXI.Container.renderAdvanced"), this.renderAdvanced(t) }, Object.defineProperties(t.settings, { TRANSFORM_MODE: { get: function() { return Object(c.deprecation)(Ut, "PIXI.settings.TRANSFORM_MODE property has been removed"), 0 }, set: function() { Object(c.deprecation)(Ut, "PIXI.settings.TRANSFORM_MODE property has been removed") } } }); var i = t.BaseTexture;
        i.prototype.loadSource = function(e) { Object(c.deprecation)(Ut, "PIXI.BaseTexture.loadSource method has been deprecated"); var i = t.resources.autoDetectResource(e);
            i.internal = !0, this.setResource(i), this.update() }; var n = !1;
        Object.defineProperties(i.prototype, { hasLoaded: { get: function() { return Object(c.deprecation)(Ut, "PIXI.BaseTexture.hasLoaded property has been removed, use PIXI.BaseTexture.valid"), this.valid } }, imageUrl: { get: function() { var t; return Object(c.deprecation)(Ut, "PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"), null === (t = this.resource) || void 0 === t ? void 0 : t.url }, set: function(t) { Object(c.deprecation)(Ut, "PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"), this.resource && (this.resource.url = t) } }, source: { get: function() { return Object(c.deprecation)(Ut, "PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source`"), this.resource.source }, set: function(t) { Object(c.deprecation)(Ut, "PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source` if you want to set HTMLCanvasElement. Otherwise, create new BaseTexture."), this.resource && (this.resource.source = t) } }, premultiplyAlpha: { get: function() { return Object(c.deprecation)("5.2.0", "PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"), 0 !== this.alphaMode }, set: function(t) { Object(c.deprecation)("5.2.0", "PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"), this.alphaMode = Number(t) } }, _id: { get: function() { return n || (Object(c.deprecation)("5.2.0", "PIXI.BaseTexture._id batch local field has been changed to `_batchLocation`"), n = !0), this._batchLocation }, set: function(t) { this._batchLocation = t } } }), i.fromImage = function(t, e, n, r) { Object(c.deprecation)(Ut, "PIXI.BaseTexture.fromImage method has been replaced with PIXI.BaseTexture.from"); var s = { scale: r, crossorigin: e }; return i.from(t, { scaleMode: n, resourceOptions: s }) }, i.fromCanvas = function(t, e) { return Object(c.deprecation)(Ut, "PIXI.BaseTexture.fromCanvas method has been replaced with PIXI.BaseTexture.from"), i.from(t, { scaleMode: e }) }, i.fromSVG = function(t, e, n, r) { Object(c.deprecation)(Ut, "PIXI.BaseTexture.fromSVG method has been replaced with PIXI.BaseTexture.from"); var s = { scale: r, crossorigin: e }; return i.from(t, { scaleMode: n, resourceOptions: s }) }, Object.defineProperties(t.resources.ImageResource.prototype, { premultiplyAlpha: { get: function() { return Object(c.deprecation)("5.2.0", "PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"), 0 !== this.alphaMode }, set: function(t) { Object(c.deprecation)("5.2.0", "PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"), this.alphaMode = Number(t) } } }), t.Point.prototype.copy = function(t) { return Object(c.deprecation)(Ut, "PIXI.Point.copy method has been replaced with PIXI.Point.copyFrom"), this.copyFrom(t) }, t.ObservablePoint.prototype.copy = function(t) { return Object(c.deprecation)(Ut, "PIXI.ObservablePoint.copy method has been replaced with PIXI.ObservablePoint.copyFrom"), this.copyFrom(t) }, t.Rectangle.prototype.copy = function(t) { return Object(c.deprecation)(Ut, "PIXI.Rectangle.copy method has been replaced with PIXI.Rectangle.copyFrom"), this.copyFrom(t) }, t.Matrix.prototype.copy = function(t) { return Object(c.deprecation)(Ut, "PIXI.Matrix.copy method has been replaced with PIXI.Matrix.copyTo"), this.copyTo(t) }, t.systems.StateSystem.prototype.setState = function(t) { return Object(c.deprecation)("v5.1.0", "StateSystem.setState has been renamed to StateSystem.set"), this.set(t) }, Object.assign(t.systems.FilterSystem.prototype, { getRenderTarget: function(t, e) { return Object(c.deprecation)(Ut, "PIXI.FilterManager.getRenderTarget method has been replaced with PIXI.systems.FilterSystem#getFilterTexture"), this.getFilterTexture(null, e) }, returnRenderTarget: function(t) { Object(c.deprecation)(Ut, "PIXI.FilterManager.returnRenderTarget method has been replaced with PIXI.systems.FilterSystem.returnFilterTexture"), this.returnFilterTexture(t) }, calculateScreenSpaceMatrix: function(t) { Object(c.deprecation)(Ut, "PIXI.systems.FilterSystem.calculateScreenSpaceMatrix method is removed, use `(vTextureCoord * inputSize.xy) + outputFrame.xy` instead"); var e = t.identity(),
                    i = this.activeState,
                    n = i.sourceFrame,
                    r = i.destinationFrame; return e.translate(n.x / r.width, n.y / r.height), e.scale(r.width, r.height), e }, calculateNormalizedScreenSpaceMatrix: function(t) { Object(c.deprecation)(Ut, "PIXI.systems.FilterManager.calculateNormalizedScreenSpaceMatrix method is removed, use `((vTextureCoord * inputSize.xy) + outputFrame.xy) / outputFrame.zw` instead."); var e = this.activeState,
                    i = e.sourceFrame,
                    n = e.destinationFrame,
                    r = t.identity();
                r.translate(i.x / n.width, i.y / n.height); var s = n.width / i.width,
                    o = n.height / i.height; return r.scale(s, o), r } }), Object.defineProperties(t.RenderTexture.prototype, { sourceFrame: { get: function() { return Object(c.deprecation)(Ut, "PIXI.RenderTexture.sourceFrame property has been removed"), this.filterFrame } }, size: { get: function() { return Object(c.deprecation)(Ut, "PIXI.RenderTexture.size property has been removed"), this._frame } } }); var r = function(t) {
                function e(e, i, n, r) { return Object(c.deprecation)(Ut, "PIXI.filters.BlurXFilter class is deprecated, use PIXI.filters.BlurFilterPass"), t.call(this, !0, e, i, n, r) || this } return jt(e, t), e }(t.filters.BlurFilterPass),
            s = function(t) {
                function e(e, i, n, r) { return Object(c.deprecation)(Ut, "PIXI.filters.BlurYFilter class is deprecated, use PIXI.filters.BlurFilterPass"), t.call(this, !1, e, i, n, r) || this } return jt(e, t), e }(t.filters.BlurFilterPass);
        Object.assign(t.filters, { BlurXFilter: r, BlurYFilter: s }); var o = t.Sprite,
            a = t.Texture,
            h = t.Graphics;

        function u(t, e, i, n) { return Object(c.deprecation)(Ut, "PIXI.Sprite." + t + " method is deprecated, use PIXI.Sprite.from"), o.from(e, { resourceOptions: { scale: n, crossorigin: i } }) }

        function l(t, e, i, n) { return Object(c.deprecation)(Ut, "PIXI.Texture." + t + " method is deprecated, use PIXI.Texture.from"), a.from(e, { resourceOptions: { scale: n, crossorigin: i } }) } h.prototype.generateCanvasTexture || (h.prototype.generateCanvasTexture = function() { Object(c.deprecation)(Ut, 'PIXI.Graphics.generateCanvasTexture method is only available in "pixi.js-legacy"') }), Object.defineProperty(h.prototype, "graphicsData", { get: function() { return Object(c.deprecation)(Ut, "PIXI.Graphics.graphicsData property is deprecated, use PIXI.Graphics.geometry.graphicsData"), this.geometry.graphicsData } }), o.fromImage = u.bind(null, "fromImage"), o.fromSVG = u.bind(null, "fromSVG"), o.fromCanvas = u.bind(null, "fromCanvas"), o.fromVideo = u.bind(null, "fromVideo"), o.fromFrame = u.bind(null, "fromFrame"), a.fromImage = l.bind(null, "fromImage"), a.fromSVG = l.bind(null, "fromSVG"), a.fromCanvas = l.bind(null, "fromCanvas"), a.fromVideo = l.bind(null, "fromVideo"), a.fromFrame = l.bind(null, "fromFrame"), Object.defineProperty(t.AbstractRenderer.prototype, "autoResize", { get: function() { return Object(c.deprecation)(Ut, "PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"), this.autoDensity }, set: function(t) { Object(c.deprecation)(Ut, "PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"), this.autoDensity = t } }), Object.defineProperty(t.Renderer.prototype, "textureManager", { get: function() { return Object(c.deprecation)(Ut, "PIXI.Renderer.textureManager property is deprecated, use PIXI.Renderer.texture"), this.texture } }), t.utils.mixins = { mixin: function() { Object(c.deprecation)(Ut, "PIXI.utils.mixins.mixin function is no longer available") }, delayMixin: function() { Object(c.deprecation)(Ut, "PIXI.utils.mixins.delayMixin function is no longer available") }, performMixins: function() { Object(c.deprecation)(Ut, "PIXI.utils.mixins.performMixins function is no longer available") } }, Object.defineProperty(t.BitmapText.prototype, "font", { get: function() { return Object(c.deprecation)("5.3.0", "PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"), { name: this._fontName, size: this._fontSize, tint: this._tint, align: this._align } }, set: function(e) { if (Object(c.deprecation)("5.3.0", "PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"), e) { var i = { font: e };
                    this._upgradeStyle(i), i.fontSize = i.fontSize || t.BitmapFont.available[i.fontName].size, this._fontName = i.fontName, this._fontSize = i.fontSize, this.dirty = !0 } } }) } E.B.registerPlugin("accessibility", f), E.B.registerPlugin("extract", A), E.B.registerPlugin("interaction", S), E.B.registerPlugin("particle", R.b), E.B.registerPlugin("prepare", M.c), E.B.registerPlugin("batch", E.i), E.B.registerPlugin("tilingSprite", k.b), I.b.registerPlugin(q), I.b.registerPlugin(D), P.registerPlugin(g.b), P.registerPlugin(I.a); var Xt = "5.3.3",
        Ht = { AlphaFilter: $, BlurFilter: _t, BlurFilterPass: bt, ColorMatrixFilter: wt, DisplacementFilter: St, FXAAFilter: Pt, NoiseFilter: Ot } }, function(t, e, i) { "use strict";
    i.d(e, "a", (function() { return o })), i.d(e, "b", (function() { return a })), i.d(e, "c", (function() { return n })); var n, r = i(6);
    r.b.TARGET_FPMS = .06,
        function(t) { t[t.INTERACTION = 50] = "INTERACTION", t[t.HIGH = 25] = "HIGH", t[t.NORMAL = 0] = "NORMAL", t[t.LOW = -25] = "LOW", t[t.UTILITY = -50] = "UTILITY" }(n || (n = {})); var s = function() {
            function t(t, e, i, n) { void 0 === e && (e = null), void 0 === i && (i = 0), void 0 === n && (n = !1), this.fn = t, this.context = e, this.priority = i, this.once = n, this.next = null, this.previous = null, this._destroyed = !1 } return t.prototype.match = function(t, e) { return void 0 === e && (e = null), this.fn === t && this.context === e }, t.prototype.emit = function(t) { this.fn && (this.context ? this.fn.call(this.context, t) : this.fn(t)); var e = this.next; return this.once && this.destroy(!0), this._destroyed && (this.next = null), e }, t.prototype.connect = function(t) { this.previous = t, t.next && (t.next.previous = this), this.next = t.next, t.next = this }, t.prototype.destroy = function(t) { void 0 === t && (t = !1), this._destroyed = !0, this.fn = null, this.context = null, this.previous && (this.previous.next = this.next), this.next && (this.next.previous = this.previous); var e = this.next; return this.next = t ? null : e, this.previous = null, e }, t }(),
        o = function() {
            function t() { var t = this;
                this._head = new s(null, null, Infinity), this._requestId = null, this._maxElapsedMS = 100, this._minElapsedMS = 0, this.autoStart = !1, this.deltaTime = 1, this.deltaMS = 1 / r.b.TARGET_FPMS, this.elapsedMS = 1 / r.b.TARGET_FPMS, this.lastTime = -1, this.speed = 1, this.started = !1, this._protected = !1, this._lastFrame = -1, this._tick = function(e) { t._requestId = null, t.started && (t.update(e), t.started && null === t._requestId && t._head.next && (t._requestId = requestAnimationFrame(t._tick))) } } return t.prototype._requestIfNeeded = function() { null === this._requestId && this._head.next && (this.lastTime = performance.now(), this._lastFrame = this.lastTime, this._requestId = requestAnimationFrame(this._tick)) }, t.prototype._cancelIfNeeded = function() { null !== this._requestId && (cancelAnimationFrame(this._requestId), this._requestId = null) }, t.prototype._startIfPossible = function() { this.started ? this._requestIfNeeded() : this.autoStart && this.start() }, t.prototype.add = function(t, e, i) { return void 0 === i && (i = n.NORMAL), this._addListener(new s(t, e, i)) }, t.prototype.addOnce = function(t, e, i) { return void 0 === i && (i = n.NORMAL), this._addListener(new s(t, e, i, !0)) }, t.prototype._addListener = function(t) { var e = this._head.next,
                    i = this._head; if (e) { for (; e;) { if (t.priority > e.priority) { t.connect(i); break } i = e, e = e.next } t.previous || t.connect(i) } else t.connect(i); return this._startIfPossible(), this }, t.prototype.remove = function(t, e) { for (var i = this._head.next; i;) i = i.match(t, e) ? i.destroy() : i.next; return this._head.next || this._cancelIfNeeded(), this }, Object.defineProperty(t.prototype, "count", { get: function() { if (!this._head) return 0; for (var t = 0, e = this._head; e = e.next;) t++; return t }, enumerable: !1, configurable: !0 }), t.prototype.start = function() { this.started || (this.started = !0, this._requestIfNeeded()) }, t.prototype.stop = function() { this.started && (this.started = !1, this._cancelIfNeeded()) }, t.prototype.destroy = function() { if (!this._protected) { this.stop(); for (var t = this._head.next; t;) t = t.destroy(!0);
                    this._head.destroy(), this._head = null } }, t.prototype.update = function(t) { var e; if (void 0 === t && (t = performance.now()), t > this.lastTime) { if ((e = this.elapsedMS = t - this.lastTime) > this._maxElapsedMS && (e = this._maxElapsedMS), e *= this.speed, this._minElapsedMS) { var i = t - this._lastFrame | 0; if (i < this._minElapsedMS) return;
                        this._lastFrame = t - i % this._minElapsedMS } this.deltaMS = e, this.deltaTime = this.deltaMS * r.b.TARGET_FPMS; for (var n = this._head, s = n.next; s;) s = s.emit(this.deltaTime);
                    n.next || this._cancelIfNeeded() } else this.deltaTime = this.deltaMS = this.elapsedMS = 0;
                this.lastTime = t }, Object.defineProperty(t.prototype, "FPS", { get: function() { return 1e3 / this.elapsedMS }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "minFPS", { get: function() { return 1e3 / this._maxElapsedMS }, set: function(t) { var e = Math.min(this.maxFPS, t),
                        i = Math.min(Math.max(0, e) / 1e3, r.b.TARGET_FPMS);
                    this._maxElapsedMS = 1 / i }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "maxFPS", { get: function() { return this._minElapsedMS ? Math.round(1e3 / this._minElapsedMS) : 0 }, set: function(t) { if (0 === t) this._minElapsedMS = 0;
                    else { var e = Math.max(this.minFPS, t);
                        this._minElapsedMS = 1 / (e / 1e3) } }, enumerable: !1, configurable: !0 }), Object.defineProperty(t, "shared", { get: function() { if (!t._shared) { var e = t._shared = new t;
                        e.autoStart = !0, e._protected = !0 } return t._shared }, enumerable: !1, configurable: !0 }), Object.defineProperty(t, "system", { get: function() { if (!t._system) { var e = t._system = new t;
                        e.autoStart = !0, e._protected = !0 } return t._system }, enumerable: !1, configurable: !0 }), t }(),
        a = function() {
            function t() {} return t.init = function(t) { var e = this;
                t = Object.assign({ autoStart: !0, sharedTicker: !1 }, t), Object.defineProperty(this, "ticker", { set: function(t) { this._ticker && this._ticker.remove(this.render, this), this._ticker = t, t && t.add(this.render, this, n.LOW) }, get: function() { return this._ticker } }), this.stop = function() { e._ticker.stop() }, this.start = function() { e._ticker.start() }, this._ticker = null, this.ticker = t.sharedTicker ? o.shared : new o, t.autoStart && this.start() }, t.destroy = function() { if (this._ticker) { var t = this._ticker;
                    this.ticker = null, t.destroy() } }, t }() }, function(t, e, i) { "use strict";
    i.d(e, "a", (function() { return f })), i.d(e, "b", (function() { return c })), i.d(e, "c", (function() { return g })), i.d(e, "d", (function() { return m })); var n = i(5),
        r = i(4),
        s = i(2),
        o = i(7),
        a = i(6),
        h = i(1),
        u = function(t, e) { return (u = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) })(t, e) };

    function l(t, e) {
        function i() { this.constructor = t } u(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i) } var c = function() {
            function t(t, e) { this.uvBuffer = t, this.uvMatrix = e, this.data = null, this._bufferUpdateId = -1, this._textureUpdateId = -1, this._updateID = 0 } return t.prototype.update = function(t) { if (t || this._bufferUpdateId !== this.uvBuffer._updateID || this._textureUpdateId !== this.uvMatrix._updateID) { this._bufferUpdateId = this.uvBuffer._updateID, this._textureUpdateId = this.uvMatrix._updateID; var e = this.uvBuffer.data;
                    this.data && this.data.length === e.length || (this.data = new Float32Array(e.length)), this.uvMatrix.multiplyUvs(e, this.data), this._updateID++ } }, t }(),
        d = new r.g,
        p = new r.h,
        f = function(t) {
            function e(e, i, r, o) { void 0 === o && (o = s.e.TRIANGLES); var h = t.call(this) || this; return h.geometry = e, e.refCount++, h.shader = i, h.state = r || n.E.for2d(), h.drawMode = o, h.start = 0, h.size = 0, h.uvs = null, h.indices = null, h.vertexData = new Float32Array(1), h.vertexDirty = 0, h._transformID = -1, h.tint = 16777215, h.blendMode = s.b.NORMAL, h._roundPixels = a.b.ROUND_PIXELS, h.batchUvs = null, h } return l(e, t), Object.defineProperty(e.prototype, "uvBuffer", { get: function() { return this.geometry.buffers[1] }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "verticesBuffer", { get: function() { return this.geometry.buffers[0] }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "material", { get: function() { return this.shader }, set: function(t) { this.shader = t }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "blendMode", { get: function() { return this.state.blendMode }, set: function(t) { this.state.blendMode = t }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "roundPixels", { get: function() { return this._roundPixels }, set: function(t) { this._roundPixels !== t && (this._transformID = -1), this._roundPixels = t }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "tint", { get: function() { return this.shader.tint }, set: function(t) { this.shader.tint = t }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "texture", { get: function() { return this.shader.texture }, set: function(t) { this.shader.texture = t }, enumerable: !1, configurable: !0 }), e.prototype._render = function(t) { var i = this.geometry.buffers[0].data;
                this.shader.batchable && this.drawMode === s.e.TRIANGLES && i.length < 2 * e.BATCHABLE_SIZE ? this._renderToBatch(t) : this._renderDefault(t) }, e.prototype._renderDefault = function(t) { var e = this.shader;
                e.alpha = this.worldAlpha, e.update && e.update(), t.batch.flush(), e.program.uniformData.translationMatrix && (e.uniforms.translationMatrix = this.transform.worldTransform.toArray(!0)), t.shader.bind(e), t.state.set(this.state), t.geometry.bind(this.geometry, e), t.geometry.draw(this.drawMode, this.size, this.start, this.geometry.instanceCount) }, e.prototype._renderToBatch = function(t) { var e = this.geometry;
                this.shader.uvMatrix && (this.shader.uvMatrix.update(), this.calculateUvs()), this.calculateVertices(), this.indices = e.indexBuffer.data, this._tintRGB = this.shader._tintRGB, this._texture = this.shader.texture; var i = this.material.pluginName;
                t.batch.setObjectRenderer(t.plugins[i]), t.plugins[i].render(this) }, e.prototype.calculateVertices = function() { var t = this.geometry,
                    e = t.buffers[0].data; if (t.vertexDirtyId !== this.vertexDirty || this._transformID !== this.transform._worldID) { this._transformID = this.transform._worldID, this.vertexData.length !== e.length && (this.vertexData = new Float32Array(e.length)); for (var i = this.transform.worldTransform, n = i.a, r = i.b, s = i.c, o = i.d, h = i.tx, u = i.ty, l = this.vertexData, c = 0; c < l.length / 2; c++) { var d = e[2 * c],
                            p = e[2 * c + 1];
                        l[2 * c] = n * d + s * p + h, l[2 * c + 1] = r * d + o * p + u } if (this._roundPixels) { var f = a.b.RESOLUTION; for (c = 0; c < l.length; ++c) l[c] = Math.round((l[c] * f | 0) / f) } this.vertexDirty = t.vertexDirtyId } }, e.prototype.calculateUvs = function() { var t = this.geometry.buffers[1];
                this.shader.uvMatrix.isSimple ? this.uvs = t.data : (this.batchUvs || (this.batchUvs = new c(t, this.shader.uvMatrix)), this.batchUvs.update(), this.uvs = this.batchUvs.data) }, e.prototype._calculateBounds = function() { this.calculateVertices(), this._bounds.addVertexData(this.vertexData, 0, this.vertexData.length) }, e.prototype.containsPoint = function(t) { if (!this.getBounds().contains(t.x, t.y)) return !1;
                this.worldTransform.applyInverse(t, d); for (var e = this.geometry.getBuffer("aVertexPosition").data, i = p.points, n = this.geometry.getIndex().data, r = n.length, s = 4 === this.drawMode ? 3 : 1, o = 0; o + 2 < r; o += s) { var a = 2 * n[o],
                        h = 2 * n[o + 1],
                        u = 2 * n[o + 2]; if (i[0] = e[a], i[1] = e[a + 1], i[2] = e[h], i[3] = e[h + 1], i[4] = e[u], i[5] = e[u + 1], p.contains(d.x, d.y)) return !0 } return !1 }, e.prototype.destroy = function(e) { t.prototype.destroy.call(this, e), this.geometry.refCount--, 0 === this.geometry.refCount && this.geometry.dispose(), this.geometry = null, this.shader = null, this.state = null, this.uvs = null, this.indices = null, this.vertexData = null }, e.BATCHABLE_SIZE = 100, e }(o.b),
        m = function(t) {
            function e(e, i) { var s = this,
                    o = { uSampler: e, alpha: 1, uTextureMatrix: r.d.IDENTITY, uColor: new Float32Array([1, 1, 1, 1]) }; return (i = Object.assign({ tint: 16777215, alpha: 1, pluginName: "batch" }, i)).uniforms && Object.assign(o, i.uniforms), (s = t.call(this, i.program || n.w.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n", "varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"), o) || this)._colorDirty = !1, s.uvMatrix = new n.H(e), s.batchable = i.program === undefined, s.pluginName = i.pluginName, s.tint = i.tint, s.alpha = i.alpha, s } return l(e, t), Object.defineProperty(e.prototype, "texture", { get: function() { return this.uniforms.uSampler }, set: function(t) { this.uniforms.uSampler !== t && (this.uniforms.uSampler = t, this.uvMatrix.texture = t) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "alpha", { get: function() { return this._alpha }, set: function(t) { t !== this._alpha && (this._alpha = t, this._colorDirty = !0) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "tint", { get: function() { return this._tint }, set: function(t) { t !== this._tint && (this._tint = t, this._tintRGB = (t >> 16) + (65280 & t) + ((255 & t) << 16), this._colorDirty = !0) }, enumerable: !1, configurable: !0 }), e.prototype.update = function() { if (this._colorDirty) { this._colorDirty = !1; var t = this.texture.baseTexture;
                    Object(h.premultiplyTintToRgba)(this._tint, this._alpha, this.uniforms.uColor, t.alphaMode) } this.uvMatrix.update() && (this.uniforms.uTextureMatrix = this.uvMatrix.mapCoord) }, e }(n.C),
        g = function(t) {
            function e(e, i, r) { var o = t.call(this) || this,
                    a = new n.l(e),
                    h = new n.l(i, !0),
                    u = new n.l(r, !0, !0); return o.addAttribute("aVertexPosition", a, 2, !1, s.p.FLOAT).addAttribute("aTextureCoord", h, 2, !1, s.p.FLOAT).addIndex(u), o._updateId = -1, o } return l(e, t), Object.defineProperty(e.prototype, "vertexDirtyId", { get: function() { return this.buffers[0]._updateID }, enumerable: !1, configurable: !0 }), e }(n.s) }, function(t, e, i) { "use strict";
    i.d(e, "a", (function() { return A })), i.d(e, "b", (function() { return O })), i.d(e, "c", (function() { return E })), i.d(e, "d", (function() { return C })); var n = i(24),
        r = i.n(n),
        s = i(16),
        o = i.n(s);

    function a() {}

    function h(t, e, i, n) { var r = 0,
            s = t.length;! function o(a) { a || r === s ? i && i(a) : n ? setTimeout((function() { e(t[r++], o) }), 1) : e(t[r++], o) }() }

    function u(t) { return function() { if (null === t) throw new Error("Callback was already called."); var e = t;
            t = null, e.apply(this, arguments) } }

    function l(t, e) { if (null == e) e = 1;
        else if (0 === e) throw new Error("Concurrency must not be zero"); var i = 0,
            n = { _tasks: [], concurrency: e, saturated: a, unsaturated: a, buffer: e / 4, empty: a, drain: a, error: a, started: !1, paused: !1, push: function(t, e) { r(t, !1, e) }, kill: function() { i = 0, n.drain = a, n.started = !1, n._tasks = [] }, unshift: function(t, e) { r(t, !0, e) }, process: function() { for (; !n.paused && i < n.concurrency && n._tasks.length;) { var e = n._tasks.shift();
                        0 === n._tasks.length && n.empty(), (i += 1) === n.concurrency && n.saturated(), t(e.data, u(s(e))) } }, length: function() { return n._tasks.length }, running: function() { return i }, idle: function() { return n._tasks.length + i === 0 }, pause: function() {!0 !== n.paused && (n.paused = !0) }, resume: function() { if (!1 !== n.paused) { n.paused = !1; for (var t = 1; t <= n.concurrency; t++) n.process() } } };

        function r(t, e, i) { if (null != i && "function" != typeof i) throw new Error("task callback must be a function"); if (n.started = !0, null == t && n.idle()) setTimeout((function() { return n.drain() }), 1);
            else { var r = { data: t, callback: "function" == typeof i ? i : a };
                e ? n._tasks.unshift(r) : n._tasks.push(r), setTimeout((function() { return n.process() }), 1) } }

        function s(t) { return function() { i -= 1, t.callback.apply(t, arguments), null != arguments[0] && n.error(arguments[0], t.data), i <= n.concurrency - n.buffer && n.unsaturated(), n.idle() && n.drain(), n.process() } } return n } var c = {};

    function d(t, e) { for (var i = 0; i < e.length; i++) { var n = e[i];
            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n) } }

    function p(t, e, i) { return e && d(t.prototype, e), i && d(t, i), t } var f = !(!window.XDomainRequest || "withCredentials" in new XMLHttpRequest),
        m = null;

    function g() {} var y = function() {
        function t(e, i, n) { if ("string" != typeof e || "string" != typeof i) throw new Error("Both name and url are required for constructing a resource.");
            n = n || {}, this._flags = 0, this._setFlag(t.STATUS_FLAGS.DATA_URL, 0 === i.indexOf("data:")), this.name = e, this.url = i, this.extension = this._getExtension(), this.data = null, this.crossOrigin = !0 === n.crossOrigin ? "anonymous" : n.crossOrigin, this.timeout = n.timeout || 0, this.loadType = n.loadType || this._determineLoadType(), this.xhrType = n.xhrType, this.metadata = n.metadata || {}, this.error = null, this.xhr = null, this.children = [], this.type = t.TYPE.UNKNOWN, this.progressChunk = 0, this._dequeue = g, this._onLoadBinding = null, this._elementTimer = 0, this._boundComplete = this.complete.bind(this), this._boundOnError = this._onError.bind(this), this._boundOnProgress = this._onProgress.bind(this), this._boundOnTimeout = this._onTimeout.bind(this), this._boundXhrOnError = this._xhrOnError.bind(this), this._boundXhrOnTimeout = this._xhrOnTimeout.bind(this), this._boundXhrOnAbort = this._xhrOnAbort.bind(this), this._boundXhrOnLoad = this._xhrOnLoad.bind(this), this.onStart = new o.a, this.onProgress = new o.a, this.onComplete = new o.a, this.onAfterMiddleware = new o.a } t.setExtensionLoadType = function(e, i) { v(t._loadTypeMap, e, i) }, t.setExtensionXhrType = function(e, i) { v(t._xhrTypeMap, e, i) }; var e = t.prototype; return e.complete = function() { this._clearEvents(), this._finish() }, e.abort = function(e) { if (!this.error) { if (this.error = new Error(e), this._clearEvents(), this.xhr) this.xhr.abort();
                else if (this.xdr) this.xdr.abort();
                else if (this.data)
                    if (this.data.src) this.data.src = t.EMPTY_GIF;
                    else
                        for (; this.data.firstChild;) this.data.removeChild(this.data.firstChild);
                this._finish() } }, e.load = function(e) { var i = this; if (!this.isLoading)
                if (this.isComplete) e && setTimeout((function() { return e(i) }), 1);
                else switch (e && this.onComplete.once(e), this._setFlag(t.STATUS_FLAGS.LOADING, !0), this.onStart.dispatch(this), !1 !== this.crossOrigin && "string" == typeof this.crossOrigin || (this.crossOrigin = this._determineCrossOrigin(this.url)), this.loadType) {
                    case t.LOAD_TYPE.IMAGE:
                        this.type = t.TYPE.IMAGE, this._loadElement("image"); break;
                    case t.LOAD_TYPE.AUDIO:
                        this.type = t.TYPE.AUDIO, this._loadSourceElement("audio"); break;
                    case t.LOAD_TYPE.VIDEO:
                        this.type = t.TYPE.VIDEO, this._loadSourceElement("video"); break;
                    case t.LOAD_TYPE.XHR:
                    default:
                        f && this.crossOrigin ? this._loadXdr() : this._loadXhr() } }, e._hasFlag = function(t) { return 0 != (this._flags & t) }, e._setFlag = function(t, e) { this._flags = e ? this._flags | t : this._flags & ~t }, e._clearEvents = function() { clearTimeout(this._elementTimer), this.data && this.data.removeEventListener && (this.data.removeEventListener("error", this._boundOnError, !1), this.data.removeEventListener("load", this._boundComplete, !1), this.data.removeEventListener("progress", this._boundOnProgress, !1), this.data.removeEventListener("canplaythrough", this._boundComplete, !1)), this.xhr && (this.xhr.removeEventListener ? (this.xhr.removeEventListener("error", this._boundXhrOnError, !1), this.xhr.removeEventListener("timeout", this._boundXhrOnTimeout, !1), this.xhr.removeEventListener("abort", this._boundXhrOnAbort, !1), this.xhr.removeEventListener("progress", this._boundOnProgress, !1), this.xhr.removeEventListener("load", this._boundXhrOnLoad, !1)) : (this.xhr.onerror = null, this.xhr.ontimeout = null, this.xhr.onprogress = null, this.xhr.onload = null)) }, e._finish = function() { if (this.isComplete) throw new Error("Complete called again for an already completed resource.");
            this._setFlag(t.STATUS_FLAGS.COMPLETE, !0), this._setFlag(t.STATUS_FLAGS.LOADING, !1), this.onComplete.dispatch(this) }, e._loadElement = function(t) { this.metadata.loadElement ? this.data = this.metadata.loadElement : "image" === t && "undefined" != typeof window.Image ? this.data = new Image : this.data = document.createElement(t), this.crossOrigin && (this.data.crossOrigin = this.crossOrigin), this.metadata.skipSource || (this.data.src = this.url), this.data.addEventListener("error", this._boundOnError, !1), this.data.addEventListener("load", this._boundComplete, !1), this.data.addEventListener("progress", this._boundOnProgress, !1), this.timeout && (this._elementTimer = setTimeout(this._boundOnTimeout, this.timeout)) }, e._loadSourceElement = function(t) { if (this.metadata.loadElement ? this.data = this.metadata.loadElement : "audio" === t && "undefined" != typeof window.Audio ? this.data = new Audio : this.data = document.createElement(t), null !== this.data) { if (this.crossOrigin && (this.data.crossOrigin = this.crossOrigin), !this.metadata.skipSource)
                    if (navigator.isCocoonJS) this.data.src = Array.isArray(this.url) ? this.url[0] : this.url;
                    else if (Array.isArray(this.url))
                    for (var e = this.metadata.mimeType, i = 0; i < this.url.length; ++i) this.data.appendChild(this._createSource(t, this.url[i], Array.isArray(e) ? e[i] : e));
                else { var n = this.metadata.mimeType;
                    this.data.appendChild(this._createSource(t, this.url, Array.isArray(n) ? n[0] : n)) } this.data.addEventListener("error", this._boundOnError, !1), this.data.addEventListener("load", this._boundComplete, !1), this.data.addEventListener("progress", this._boundOnProgress, !1), this.data.addEventListener("canplaythrough", this._boundComplete, !1), this.data.load(), this.timeout && (this._elementTimer = setTimeout(this._boundOnTimeout, this.timeout)) } else this.abort("Unsupported element: " + t) }, e._loadXhr = function() { "string" != typeof this.xhrType && (this.xhrType = this._determineXhrType()); var e = this.xhr = new XMLHttpRequest;
            e.open("GET", this.url, !0), e.timeout = this.timeout, this.xhrType === t.XHR_RESPONSE_TYPE.JSON || this.xhrType === t.XHR_RESPONSE_TYPE.DOCUMENT ? e.responseType = t.XHR_RESPONSE_TYPE.TEXT : e.responseType = this.xhrType, e.addEventListener("error", this._boundXhrOnError, !1), e.addEventListener("timeout", this._boundXhrOnTimeout, !1), e.addEventListener("abort", this._boundXhrOnAbort, !1), e.addEventListener("progress", this._boundOnProgress, !1), e.addEventListener("load", this._boundXhrOnLoad, !1), e.send() }, e._loadXdr = function() { "string" != typeof this.xhrType && (this.xhrType = this._determineXhrType()); var t = this.xhr = new XDomainRequest;
            t.timeout = this.timeout || 5e3, t.onerror = this._boundXhrOnError, t.ontimeout = this._boundXhrOnTimeout, t.onprogress = this._boundOnProgress, t.onload = this._boundXhrOnLoad, t.open("GET", this.url, !0), setTimeout((function() { return t.send() }), 1) }, e._createSource = function(t, e, i) { i || (i = t + "/" + this._getExtension(e)); var n = document.createElement("source"); return n.src = e, n.type = i, n }, e._onError = function(t) { this.abort("Failed to load element using: " + t.target.nodeName) }, e._onProgress = function(t) { t && t.lengthComputable && this.onProgress.dispatch(this, t.loaded / t.total) }, e._onTimeout = function() { this.abort("Load timed out.") }, e._xhrOnError = function() { var t = this.xhr;
            this.abort(b(t) + " Request failed. Status: " + t.status + ', text: "' + t.statusText + '"') }, e._xhrOnTimeout = function() { var t = this.xhr;
            this.abort(b(t) + " Request timed out.") }, e._xhrOnAbort = function() { var t = this.xhr;
            this.abort(b(t) + " Request was aborted by the user.") }, e._xhrOnLoad = function() { var e = this.xhr,
                i = "",
                n = "undefined" == typeof e.status ? 200 : e.status; if ("" !== e.responseType && "text" !== e.responseType && "undefined" != typeof e.responseType || (i = e.responseText), 0 === n && (i.length > 0 || e.responseType === t.XHR_RESPONSE_TYPE.BUFFER) ? n = 200 : 1223 === n && (n = 204), 2 === (n / 100 | 0)) { if (this.xhrType === t.XHR_RESPONSE_TYPE.TEXT) this.data = i, this.type = t.TYPE.TEXT;
                else if (this.xhrType === t.XHR_RESPONSE_TYPE.JSON) try { this.data = JSON.parse(i), this.type = t.TYPE.JSON } catch (o) { return void this.abort("Error trying to parse loaded json: " + o) } else if (this.xhrType === t.XHR_RESPONSE_TYPE.DOCUMENT) try { if (window.DOMParser) { var r = new DOMParser;
                        this.data = r.parseFromString(i, "text/xml") } else { var s = document.createElement("div");
                        s.innerHTML = i, this.data = s } this.type = t.TYPE.XML } catch (o) { return void this.abort("Error trying to parse loaded xml: " + o) } else this.data = e.response || i;
                this.complete() } else this.abort("[" + e.status + "] " + e.statusText + ": " + e.responseURL) }, e._determineCrossOrigin = function(t, e) { if (0 === t.indexOf("data:")) return ""; if (window.origin !== window.location.origin) return "anonymous";
            e = e || window.location, m || (m = document.createElement("a")), m.href = t; var i = !(t = r()(m.href, { strictMode: !0 })).port && "" === e.port || t.port === e.port,
                n = t.protocol ? t.protocol + ":" : ""; return t.host === e.hostname && i && n === e.protocol ? "" : "anonymous" }, e._determineXhrType = function() { return t._xhrTypeMap[this.extension] || t.XHR_RESPONSE_TYPE.TEXT }, e._determineLoadType = function() { return t._loadTypeMap[this.extension] || t.LOAD_TYPE.XHR }, e._getExtension = function() { var t = this.url,
                e = ""; if (this.isDataUrl) { var i = t.indexOf("/");
                e = t.substring(i + 1, t.indexOf(";", i)) } else { var n = t.indexOf("?"),
                    r = t.indexOf("#"),
                    s = Math.min(n > -1 ? n : t.length, r > -1 ? r : t.length);
                e = (t = t.substring(0, s)).substring(t.lastIndexOf(".") + 1) } return e.toLowerCase() }, e._getMimeFromXhrType = function(e) { switch (e) {
                case t.XHR_RESPONSE_TYPE.BUFFER:
                    return "application/octet-binary";
                case t.XHR_RESPONSE_TYPE.BLOB:
                    return "application/blob";
                case t.XHR_RESPONSE_TYPE.DOCUMENT:
                    return "application/xml";
                case t.XHR_RESPONSE_TYPE.JSON:
                    return "application/json";
                case t.XHR_RESPONSE_TYPE.DEFAULT:
                case t.XHR_RESPONSE_TYPE.TEXT:
                default:
                    return "text/plain" } }, p(t, [{ key: "isDataUrl", get: function() { return this._hasFlag(t.STATUS_FLAGS.DATA_URL) } }, { key: "isComplete", get: function() { return this._hasFlag(t.STATUS_FLAGS.COMPLETE) } }, { key: "isLoading", get: function() { return this._hasFlag(t.STATUS_FLAGS.LOADING) } }]), t }();

    function v(t, e, i) { e && 0 === e.indexOf(".") && (e = e.substring(1)), e && (t[e] = i) }

    function b(t) { return t.toString().replace("object ", "") } y.STATUS_FLAGS = { NONE: 0, DATA_URL: 1, COMPLETE: 2, LOADING: 4 }, y.TYPE = { UNKNOWN: 0, JSON: 1, XML: 2, IMAGE: 3, AUDIO: 4, VIDEO: 5, TEXT: 6 }, y.LOAD_TYPE = { XHR: 1, IMAGE: 2, AUDIO: 3, VIDEO: 4 }, y.XHR_RESPONSE_TYPE = { DEFAULT: "text", BUFFER: "arraybuffer", BLOB: "blob", DOCUMENT: "document", JSON: "json", TEXT: "text" }, y._loadTypeMap = { gif: y.LOAD_TYPE.IMAGE, png: y.LOAD_TYPE.IMAGE, bmp: y.LOAD_TYPE.IMAGE, jpg: y.LOAD_TYPE.IMAGE, jpeg: y.LOAD_TYPE.IMAGE, tif: y.LOAD_TYPE.IMAGE, tiff: y.LOAD_TYPE.IMAGE, webp: y.LOAD_TYPE.IMAGE, tga: y.LOAD_TYPE.IMAGE, svg: y.LOAD_TYPE.IMAGE, "svg+xml": y.LOAD_TYPE.IMAGE, mp3: y.LOAD_TYPE.AUDIO, ogg: y.LOAD_TYPE.AUDIO, wav: y.LOAD_TYPE.AUDIO, mp4: y.LOAD_TYPE.VIDEO, webm: y.LOAD_TYPE.VIDEO }, y._xhrTypeMap = { xhtml: y.XHR_RESPONSE_TYPE.DOCUMENT, html: y.XHR_RESPONSE_TYPE.DOCUMENT, htm: y.XHR_RESPONSE_TYPE.DOCUMENT, xml: y.XHR_RESPONSE_TYPE.DOCUMENT, tmx: y.XHR_RESPONSE_TYPE.DOCUMENT, svg: y.XHR_RESPONSE_TYPE.DOCUMENT, tsx: y.XHR_RESPONSE_TYPE.DOCUMENT, gif: y.XHR_RESPONSE_TYPE.BLOB, png: y.XHR_RESPONSE_TYPE.BLOB, bmp: y.XHR_RESPONSE_TYPE.BLOB, jpg: y.XHR_RESPONSE_TYPE.BLOB, jpeg: y.XHR_RESPONSE_TYPE.BLOB, tif: y.XHR_RESPONSE_TYPE.BLOB, tiff: y.XHR_RESPONSE_TYPE.BLOB, webp: y.XHR_RESPONSE_TYPE.BLOB, tga: y.XHR_RESPONSE_TYPE.BLOB, json: y.XHR_RESPONSE_TYPE.JSON, text: y.XHR_RESPONSE_TYPE.TEXT, txt: y.XHR_RESPONSE_TYPE.TEXT, ttf: y.XHR_RESPONSE_TYPE.BUFFER, otf: y.XHR_RESPONSE_TYPE.BUFFER }, y.EMPTY_GIF = "data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="; var _ = window.URL || window.webkitURL; var x = { caching: function(t, e) { var i = this;
                c[t.url] ? (t.data = c[t.url], t.complete()) : t.onComplete.once((function() { return c[i.url] = i.data })), e() }, parsing: function(t, e) { if (t.data) { if (t.xhr && t.xhrType === y.XHR_RESPONSE_TYPE.BLOB)
                        if (window.Blob && "string" != typeof t.data) { if (0 === t.data.type.indexOf("image")) { var i = _.createObjectURL(t.data); return t.blob = t.data, t.data = new Image, t.data.src = i, t.type = y.TYPE.IMAGE, void(t.data.onload = function() { _.revokeObjectURL(i), t.data.onload = null, e() }) } } else { var n = t.xhr.getResponseHeader("content-type"); if (n && 0 === n.indexOf("image")) return t.data = new Image, t.data.src = "data:" + n + ";base64," + function(t) { for (var e = "", i = 0; i < t.length;) { for (var n = [0, 0, 0], r = [0, 0, 0, 0], s = 0; s < n.length; ++s) i < t.length ? n[s] = 255 & t.charCodeAt(i++) : n[s] = 0; switch (r[0] = n[0] >> 2, r[1] = (3 & n[0]) << 4 | n[1] >> 4, r[2] = (15 & n[1]) << 2 | n[2] >> 6, r[3] = 63 & n[2], i - (t.length - 1)) {
                                        case 2:
                                            r[3] = 64, r[2] = 64; break;
                                        case 1:
                                            r[3] = 64 } for (var o = 0; o < r.length; ++o) e += "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(r[o]) } return e }(t.xhr.responseText), t.type = y.TYPE.IMAGE, void(t.data.onload = function() { t.data.onload = null, e() }) } e() } else e() } },
        w = /(#[\w-]+)?$/,
        T = function() {
            function t(e, i) { var n = this;
                void 0 === e && (e = ""), void 0 === i && (i = 10), this.baseUrl = e, this.progress = 0, this.loading = !1, this.defaultQueryString = "", this._beforeMiddleware = [], this._afterMiddleware = [], this._resourcesParsing = [], this._boundLoadResource = function(t, e) { return n._loadResource(t, e) }, this._queue = l(this._boundLoadResource, i), this._queue.pause(), this.resources = {}, this.onProgress = new o.a, this.onError = new o.a, this.onLoad = new o.a, this.onStart = new o.a, this.onComplete = new o.a; for (var r = 0; r < t._defaultBeforeMiddleware.length; ++r) this.pre(t._defaultBeforeMiddleware[r]); for (var s = 0; s < t._defaultAfterMiddleware.length; ++s) this.use(t._defaultAfterMiddleware[s]) } var e = t.prototype; return e.add = function(t, e, i, n) { if (Array.isArray(t)) { for (var r = 0; r < t.length; ++r) this.add(t[r]); return this } if ("object" == typeof t && (n = e || t.callback || t.onComplete, i = t, e = t.url, t = t.name || t.key || t.url), "string" != typeof e && (n = i, i = e, e = t), "string" != typeof e) throw new Error("No url passed to add resource to loader."); if ("function" == typeof i && (n = i, i = null), this.loading && (!i || !i.parentResource)) throw new Error("Cannot add resources while the loader is running."); if (this.resources[t]) throw new Error('Resource named "' + t + '" already exists.'); if (e = this._prepareUrl(e), this.resources[t] = new y(t, e, i), "function" == typeof n && this.resources[t].onAfterMiddleware.once(n), this.loading) { for (var s = i.parentResource, o = [], a = 0; a < s.children.length; ++a) s.children[a].isComplete || o.push(s.children[a]); var h = s.progressChunk * (o.length + 1) / (o.length + 2);
                    s.children.push(this.resources[t]), s.progressChunk = h; for (var u = 0; u < o.length; ++u) o[u].progressChunk = h;
                    this.resources[t].progressChunk = h } return this._queue.push(this.resources[t]), this }, e.pre = function(t) { return this._beforeMiddleware.push(t), this }, e.use = function(t) { return this._afterMiddleware.push(t), this }, e.reset = function() { for (var t in this.progress = 0, this.loading = !1, this._queue.kill(), this._queue.pause(), this.resources) { var e = this.resources[t];
                    e._onLoadBinding && e._onLoadBinding.detach(), e.isLoading && e.abort() } return this.resources = {}, this }, e.load = function(t) { if ("function" == typeof t && this.onComplete.once(t), this.loading) return this; if (this._queue.idle()) this._onStart(), this._onComplete();
                else { for (var e = 100 / this._queue._tasks.length, i = 0; i < this._queue._tasks.length; ++i) this._queue._tasks[i].data.progressChunk = e;
                    this._onStart(), this._queue.resume() } return this }, e._prepareUrl = function(t) { var e, i = r()(t, { strictMode: !0 }); if (e = i.protocol || !i.path || 0 === t.indexOf("//") ? t : this.baseUrl.length && this.baseUrl.lastIndexOf("/") !== this.baseUrl.length - 1 && "/" !== t.charAt(0) ? this.baseUrl + "/" + t : this.baseUrl + t, this.defaultQueryString) { var n = w.exec(e)[0]; - 1 !== (e = e.substr(0, e.length - n.length)).indexOf("?") ? e += "&" + this.defaultQueryString : e += "?" + this.defaultQueryString, e += n } return e }, e._loadResource = function(t, e) { var i = this;
                t._dequeue = e, h(this._beforeMiddleware, (function(e, n) { e.call(i, t, (function() { n(t.isComplete ? {} : null) })) }), (function() { t.isComplete ? i._onLoad(t) : (t._onLoadBinding = t.onComplete.once(i._onLoad, i), t.load()) }), !0) }, e._onStart = function() { this.progress = 0, this.loading = !0, this.onStart.dispatch(this) }, e._onComplete = function() { this.progress = 100, this.loading = !1, this.onComplete.dispatch(this, this.resources) }, e._onLoad = function(t) { var e = this;
                t._onLoadBinding = null, this._resourcesParsing.push(t), t._dequeue(), h(this._afterMiddleware, (function(i, n) { i.call(e, t, n) }), (function() { t.onAfterMiddleware.dispatch(t), e.progress = Math.min(100, e.progress + t.progressChunk), e.onProgress.dispatch(e, t), t.error ? e.onError.dispatch(t.error, e, t) : e.onLoad.dispatch(e, t), e._resourcesParsing.splice(e._resourcesParsing.indexOf(t), 1), e._queue.idle() && 0 === e._resourcesParsing.length && e._onComplete() }), !0) }, p(t, [{ key: "concurrency", get: function() { return this._queue.concurrency }, set: function(t) { this._queue.concurrency = t } }]), t }();
    T._defaultBeforeMiddleware = [], T._defaultAfterMiddleware = [], T.pre = function(t) { return T._defaultBeforeMiddleware.push(t), T }, T.use = function(t) { return T._defaultAfterMiddleware.push(t), T }; var S = i(5),
        E = y,
        P = function(t, e) { return (P = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) })(t, e) }; var C = function() {
            function t() {} return t.use = function(t, e) { t.data && t.type === y.TYPE.IMAGE && (t.texture = S.G.fromLoader(t.data, t.url, t.name)), e() }, t }(),
        O = function(t) {
            function e(i, n) { for (var r = t.call(this, i, n) || this, s = 0; s < e._plugins.length; ++s) { var o = e._plugins[s],
                        a = o.pre,
                        h = o.use;
                    a && r.pre(a), h && r.use(h) } return r._protected = !1, r } return function(t, e) {
                function i() { this.constructor = t } P(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i) }(e, t), e.prototype.destroy = function() { this._protected || this.reset() }, Object.defineProperty(e, "shared", { get: function() { var t = e._shared; return t || ((t = new e)._protected = !0, e._shared = t), t }, enumerable: !1, configurable: !0 }), e.registerPlugin = function(t) { return e._plugins.push(t), t.add && t.add(), e }, e._plugins = [], e }(T);
    O.registerPlugin({ use: x.parsing }), O.registerPlugin(C); var A = function() {
        function t() {} return t.init = function(t) { t = Object.assign({ sharedLoader: !1 }, t), this.loader = t.sharedLoader ? O.shared : new O }, t.destroy = function() { this.loader && (this.loader.destroy(), this.loader = null) }, t }() }, function(t, e, i) { "use strict";
    i.d(e, "a", (function() { return d })); var n = i(2),
        r = i(5),
        s = i(7),
        o = i(4),
        a = i(6),
        h = i(1),
        u = function(t, e) { return (u = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) })(t, e) }; var l = new o.g,
        c = new Uint16Array([0, 1, 2, 0, 2, 3]),
        d = function(t) {
            function e(e) { var i = t.call(this) || this; return i._anchor = new o.e(i._onAnchorUpdate, i, e ? e.defaultAnchor.x : 0, e ? e.defaultAnchor.y : 0), i._texture = null, i._width = 0, i._height = 0, i._tint = null, i._tintRGB = null, i.tint = 16777215, i.blendMode = n.b.NORMAL, i._cachedTint = 16777215, i.uvs = null, i.texture = e || r.G.EMPTY, i.vertexData = new Float32Array(8), i.vertexTrimmedData = null, i._transformID = -1, i._textureID = -1, i._transformTrimmedID = -1, i._textureTrimmedID = -1, i.indices = c, i.pluginName = "batch", i.isSprite = !0, i._roundPixels = a.b.ROUND_PIXELS, i } return function(t, e) {
                function i() { this.constructor = t } u(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i) }(e, t), e.prototype._onTextureUpdate = function() { this._textureID = -1, this._textureTrimmedID = -1, this._cachedTint = 16777215, this._width && (this.scale.x = Object(h.sign)(this.scale.x) * this._width / this._texture.orig.width), this._height && (this.scale.y = Object(h.sign)(this.scale.y) * this._height / this._texture.orig.height) }, e.prototype._onAnchorUpdate = function() { this._transformID = -1, this._transformTrimmedID = -1 }, e.prototype.calculateVertices = function() { var t = this._texture; if (this._transformID !== this.transform._worldID || this._textureID !== t._updateID) { this._textureID !== t._updateID && (this.uvs = this._texture._uvs.uvsFloat32), this._transformID = this.transform._worldID, this._textureID = t._updateID; var e = this.transform.worldTransform,
                        i = e.a,
                        n = e.b,
                        r = e.c,
                        s = e.d,
                        o = e.tx,
                        h = e.ty,
                        u = this.vertexData,
                        l = t.trim,
                        c = t.orig,
                        d = this._anchor,
                        p = 0,
                        f = 0,
                        m = 0,
                        g = 0; if (l ? (p = (f = l.x - d._x * c.width) + l.width, m = (g = l.y - d._y * c.height) + l.height) : (p = (f = -d._x * c.width) + c.width, m = (g = -d._y * c.height) + c.height), u[0] = i * f + r * g + o, u[1] = s * g + n * f + h, u[2] = i * p + r * g + o, u[3] = s * g + n * p + h, u[4] = i * p + r * m + o, u[5] = s * m + n * p + h, u[6] = i * f + r * m + o, u[7] = s * m + n * f + h, this._roundPixels)
                        for (var y = a.b.RESOLUTION, v = 0; v < u.length; ++v) u[v] = Math.round((u[v] * y | 0) / y) } }, e.prototype.calculateTrimmedVertices = function() { if (this.vertexTrimmedData) { if (this._transformTrimmedID === this.transform._worldID && this._textureTrimmedID === this._texture._updateID) return } else this.vertexTrimmedData = new Float32Array(8);
                this._transformTrimmedID = this.transform._worldID, this._textureTrimmedID = this._texture._updateID; var t = this._texture,
                    e = this.vertexTrimmedData,
                    i = t.orig,
                    n = this._anchor,
                    r = this.transform.worldTransform,
                    s = r.a,
                    o = r.b,
                    a = r.c,
                    h = r.d,
                    u = r.tx,
                    l = r.ty,
                    c = -n._x * i.width,
                    d = c + i.width,
                    p = -n._y * i.height,
                    f = p + i.height;
                e[0] = s * c + a * p + u, e[1] = h * p + o * c + l, e[2] = s * d + a * p + u, e[3] = h * p + o * d + l, e[4] = s * d + a * f + u, e[5] = h * f + o * d + l, e[6] = s * c + a * f + u, e[7] = h * f + o * c + l }, e.prototype._render = function(t) { this.calculateVertices(), t.batch.setObjectRenderer(t.plugins[this.pluginName]), t.plugins[this.pluginName].render(this) }, e.prototype._calculateBounds = function() { var t = this._texture.trim,
                    e = this._texture.orig;!t || t.width === e.width && t.height === e.height ? (this.calculateVertices(), this._bounds.addQuad(this.vertexData)) : (this.calculateTrimmedVertices(), this._bounds.addQuad(this.vertexTrimmedData)) }, e.prototype.getLocalBounds = function(e) { return 0 === this.children.length ? (this._bounds.minX = this._texture.orig.width * -this._anchor._x, this._bounds.minY = this._texture.orig.height * -this._anchor._y, this._bounds.maxX = this._texture.orig.width * (1 - this._anchor._x), this._bounds.maxY = this._texture.orig.height * (1 - this._anchor._y), e || (this._localBoundsRect || (this._localBoundsRect = new o.j), e = this._localBoundsRect), this._bounds.getRectangle(e)) : t.prototype.getLocalBounds.call(this, e) }, e.prototype.containsPoint = function(t) { this.worldTransform.applyInverse(t, l); var e = this._texture.orig.width,
                    i = this._texture.orig.height,
                    n = -e * this.anchor.x,
                    r = 0; return l.x >= n && l.x < n + e && (r = -i * this.anchor.y, l.y >= r && l.y < r + i) }, e.prototype.destroy = function(e) { if (t.prototype.destroy.call(this, e), this._texture.off("update", this._onTextureUpdate, this), this._anchor = null, "boolean" == typeof e ? e : e && e.texture) { var i = "boolean" == typeof e ? e : e && e.baseTexture;
                    this._texture.destroy(!!i) } this._texture = null }, e.from = function(t, i) { return new e(t instanceof r.G ? t : r.G.from(t, i)) }, Object.defineProperty(e.prototype, "roundPixels", { get: function() { return this._roundPixels }, set: function(t) { this._roundPixels !== t && (this._transformID = -1), this._roundPixels = t }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "width", { get: function() { return Math.abs(this.scale.x) * this._texture.orig.width }, set: function(t) { var e = Object(h.sign)(this.scale.x) || 1;
                    this.scale.x = e * t / this._texture.orig.width, this._width = t }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "height", { get: function() { return Math.abs(this.scale.y) * this._texture.orig.height }, set: function(t) { var e = Object(h.sign)(this.scale.y) || 1;
                    this.scale.y = e * t / this._texture.orig.height, this._height = t }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "anchor", { get: function() { return this._anchor }, set: function(t) { this._anchor.copyFrom(t) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "tint", { get: function() { return this._tint }, set: function(t) { this._tint = t, this._tintRGB = (t >> 16) + (65280 & t) + ((255 & t) << 16) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "texture", { get: function() { return this._texture }, set: function(t) { this._texture !== t && (this._texture && this._texture.off("update", this._onTextureUpdate, this), this._texture = t || r.G.EMPTY, this._cachedTint = 16777215, this._textureID = -1, this._textureTrimmedID = -1, t && (t.baseTexture.valid ? this._onTextureUpdate() : t.once("update", this._onTextureUpdate, this))) }, enumerable: !1, configurable: !0 }), e }(s.b) }, function(t, e, i) { "use strict";
    i.d(e, "a", (function() { return n })); var n = function() {
        function t(t) { this.items = [], this._name = t, this._aliasCount = 0 } return t.prototype.emit = function(t, e, i, n, r, s, o, a) { if (arguments.length > 8) throw new Error("max arguments reached"); var h = this,
                u = h.name,
                l = h.items;
            this._aliasCount++; for (var c = 0, d = l.length; c < d; c++) l[c][u](t, e, i, n, r, s, o, a); return l === this.items && this._aliasCount--, this }, t.prototype.ensureNonAliasedItems = function() { this._aliasCount > 0 && this.items.length > 1 && (this._aliasCount = 0, this.items = this.items.slice(0)) }, t.prototype.add = function(t) { return t[this._name] && (this.ensureNonAliasedItems(), this.remove(t), this.items.push(t)), this }, t.prototype.remove = function(t) { var e = this.items.indexOf(t); return -1 !== e && (this.ensureNonAliasedItems(), this.items.splice(e, 1)), this }, t.prototype.contains = function(t) { return -1 !== this.items.indexOf(t) }, t.prototype.removeAll = function() { return this.ensureNonAliasedItems(), this.items.length = 0, this }, t.prototype.destroy = function() { this.removeAll(), this.items = null, this._name = null }, Object.defineProperty(t.prototype, "empty", { get: function() { return 0 === this.items.length }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "name", { get: function() { return this._name }, enumerable: !1, configurable: !0 }), t }();
    Object.defineProperties(n.prototype, { dispatch: { value: n.prototype.emit }, run: { value: n.prototype.emit } }) }, function(t, e, i) { "use strict";
    i.d(e, "a", (function() { return n })), i.d(e, "b", (function() { return b })), i.d(e, "c", (function() { return g })), i.d(e, "d", (function() { return d })); var n, r = i(12),
        s = i(5),
        o = i(6),
        a = i(4),
        h = i(1),
        u = function(t, e) { return (u = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) })(t, e) };! function(t) { t[t.LINEAR_VERTICAL = 0] = "LINEAR_VERTICAL", t[t.LINEAR_HORIZONTAL = 1] = "LINEAR_HORIZONTAL" }(n || (n = {})); var l = { align: "left", breakWords: !1, dropShadow: !1, dropShadowAlpha: 1, dropShadowAngle: Math.PI / 6, dropShadowBlur: 0, dropShadowColor: "black", dropShadowDistance: 5, fill: "black", fillGradientType: n.LINEAR_VERTICAL, fillGradientStops: [], fontFamily: "Arial", fontSize: 26, fontStyle: "normal", fontVariant: "normal", fontWeight: "normal", letterSpacing: 0, lineHeight: 0, lineJoin: "miter", miterLimit: 10, padding: 0, stroke: "black", strokeThickness: 0, textBaseline: "alphabetic", trim: !1, whiteSpace: "pre", wordWrap: !1, wordWrapWidth: 100, leading: 0 },
        c = ["serif", "sans-serif", "monospace", "cursive", "fantasy", "system-ui"],
        d = function() {
            function t(t) { this.styleID = 0, this.reset(), m(this, t, t) } return t.prototype.clone = function() { var e = {}; return m(e, this, l), new t(e) }, t.prototype.reset = function() { m(this, l, l) }, Object.defineProperty(t.prototype, "align", { get: function() { return this._align }, set: function(t) { this._align !== t && (this._align = t, this.styleID++) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "breakWords", { get: function() { return this._breakWords }, set: function(t) { this._breakWords !== t && (this._breakWords = t, this.styleID++) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "dropShadow", { get: function() { return this._dropShadow }, set: function(t) { this._dropShadow !== t && (this._dropShadow = t, this.styleID++) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "dropShadowAlpha", { get: function() { return this._dropShadowAlpha }, set: function(t) { this._dropShadowAlpha !== t && (this._dropShadowAlpha = t, this.styleID++) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "dropShadowAngle", { get: function() { return this._dropShadowAngle }, set: function(t) { this._dropShadowAngle !== t && (this._dropShadowAngle = t, this.styleID++) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "dropShadowBlur", { get: function() { return this._dropShadowBlur }, set: function(t) { this._dropShadowBlur !== t && (this._dropShadowBlur = t, this.styleID++) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "dropShadowColor", { get: function() { return this._dropShadowColor }, set: function(t) { var e = f(t);
                    this._dropShadowColor !== e && (this._dropShadowColor = e, this.styleID++) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "dropShadowDistance", { get: function() { return this._dropShadowDistance }, set: function(t) { this._dropShadowDistance !== t && (this._dropShadowDistance = t, this.styleID++) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "fill", { get: function() { return this._fill }, set: function(t) { var e = f(t);
                    this._fill !== e && (this._fill = e, this.styleID++) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "fillGradientType", { get: function() { return this._fillGradientType }, set: function(t) { this._fillGradientType !== t && (this._fillGradientType = t, this.styleID++) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "fillGradientStops", { get: function() { return this._fillGradientStops }, set: function(t) {
                    (function(t, e) { if (!Array.isArray(t) || !Array.isArray(e)) return !1; if (t.length !== e.length) return !1; for (var i = 0; i < t.length; ++i)
                            if (t[i] !== e[i]) return !1; return !0 })(this._fillGradientStops, t) || (this._fillGradientStops = t, this.styleID++) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "fontFamily", { get: function() { return this._fontFamily }, set: function(t) { this.fontFamily !== t && (this._fontFamily = t, this.styleID++) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "fontSize", { get: function() { return this._fontSize }, set: function(t) { this._fontSize !== t && (this._fontSize = t, this.styleID++) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "fontStyle", { get: function() { return this._fontStyle }, set: function(t) { this._fontStyle !== t && (this._fontStyle = t, this.styleID++) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "fontVariant", { get: function() { return this._fontVariant }, set: function(t) { this._fontVariant !== t && (this._fontVariant = t, this.styleID++) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "fontWeight", { get: function() { return this._fontWeight }, set: function(t) { this._fontWeight !== t && (this._fontWeight = t, this.styleID++) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "letterSpacing", { get: function() { return this._letterSpacing }, set: function(t) { this._letterSpacing !== t && (this._letterSpacing = t, this.styleID++) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "lineHeight", { get: function() { return this._lineHeight }, set: function(t) { this._lineHeight !== t && (this._lineHeight = t, this.styleID++) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "leading", { get: function() { return this._leading }, set: function(t) { this._leading !== t && (this._leading = t, this.styleID++) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "lineJoin", { get: function() { return this._lineJoin }, set: function(t) { this._lineJoin !== t && (this._lineJoin = t, this.styleID++) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "miterLimit", { get: function() { return this._miterLimit }, set: function(t) { this._miterLimit !== t && (this._miterLimit = t, this.styleID++) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "padding", { get: function() { return this._padding }, set: function(t) { this._padding !== t && (this._padding = t, this.styleID++) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "stroke", { get: function() { return this._stroke }, set: function(t) { var e = f(t);
                    this._stroke !== e && (this._stroke = e, this.styleID++) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "strokeThickness", { get: function() { return this._strokeThickness }, set: function(t) { this._strokeThickness !== t && (this._strokeThickness = t, this.styleID++) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "textBaseline", { get: function() { return this._textBaseline }, set: function(t) { this._textBaseline !== t && (this._textBaseline = t, this.styleID++) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "trim", { get: function() { return this._trim }, set: function(t) { this._trim !== t && (this._trim = t, this.styleID++) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "whiteSpace", { get: function() { return this._whiteSpace }, set: function(t) { this._whiteSpace !== t && (this._whiteSpace = t, this.styleID++) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "wordWrap", { get: function() { return this._wordWrap }, set: function(t) { this._wordWrap !== t && (this._wordWrap = t, this.styleID++) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "wordWrapWidth", { get: function() { return this._wordWrapWidth }, set: function(t) { this._wordWrapWidth !== t && (this._wordWrapWidth = t, this.styleID++) }, enumerable: !1, configurable: !0 }), t.prototype.toFontString = function() { var t = "number" == typeof this.fontSize ? this.fontSize + "px" : this.fontSize,
                    e = this.fontFamily;
                Array.isArray(this.fontFamily) || (e = this.fontFamily.split(",")); for (var i = e.length - 1; i >= 0; i--) { var n = e[i].trim();! /([\"\'])[^\'\"]+\1/.test(n) && c.indexOf(n) < 0 && (n = '"' + n + '"'), e[i] = n } return this.fontStyle + " " + this.fontVariant + " " + this.fontWeight + " " + t + " " + e.join(",") }, t }();

    function p(t) { return "number" == typeof t ? Object(h.hex2string)(t) : ("string" == typeof t && 0 === t.indexOf("0x") && (t = t.replace("0x", "#")), t) }

    function f(t) { if (Array.isArray(t)) { for (var e = 0; e < t.length; ++e) t[e] = p(t[e]); return t } return p(t) }

    function m(t, e, i) { for (var n in i) Array.isArray(e[n]) ? t[n] = e[n].slice() : t[n] = e[n] } var g = function() {
            function t(t, e, i, n, r, s, o, a, h) { this.text = t, this.style = e, this.width = i, this.height = n, this.lines = r, this.lineWidths = s, this.lineHeight = o, this.maxLineWidth = a, this.fontProperties = h } return t.measureText = function(e, i, n, r) { void 0 === r && (r = t._canvas), n = n === undefined || null === n ? i.wordWrap : n; var s = i.toFontString(),
                    o = t.measureFont(s);
                0 === o.fontSize && (o.fontSize = i.fontSize, o.ascent = i.fontSize); var a = r.getContext("2d");
                a.font = s; for (var h = (n ? t.wordWrap(e, i, r) : e).split(/(?:\r\n|\r|\n)/), u = new Array(h.length), l = 0, c = 0; c < h.length; c++) { var d = a.measureText(h[c]).width + (h[c].length - 1) * i.letterSpacing;
                    u[c] = d, l = Math.max(l, d) } var p = l + i.strokeThickness;
                i.dropShadow && (p += i.dropShadowDistance); var f = i.lineHeight || o.fontSize + i.strokeThickness,
                    m = Math.max(f, o.fontSize + i.strokeThickness) + (h.length - 1) * (f + i.leading); return i.dropShadow && (m += i.dropShadowDistance), new t(e, i, p, m, h, u, f + i.leading, l, o) }, t.wordWrap = function(e, i, n) { void 0 === n && (n = t._canvas); for (var r = n.getContext("2d"), s = 0, o = "", a = "", h = {}, u = i.letterSpacing, l = i.whiteSpace, c = t.collapseSpaces(l), d = t.collapseNewlines(l), p = !c, f = i.wordWrapWidth + u, m = t.tokenize(e), g = 0; g < m.length; g++) { var y = m[g]; if (t.isNewline(y)) { if (!d) { a += t.addLine(o), p = !c, o = "", s = 0; continue } y = " " } if (c) { var v = t.isBreakingSpace(y),
                            b = t.isBreakingSpace(o[o.length - 1]); if (v && b) continue } var _ = t.getFromCache(y, u, h, r); if (_ > f)
                        if ("" !== o && (a += t.addLine(o), o = "", s = 0), t.canBreakWords(y, i.breakWords))
                            for (var x = t.wordWrapSplit(y), w = 0; w < x.length; w++) { for (var T = x[w], S = 1; x[w + S];) { var E = x[w + S],
                                        P = T[T.length - 1]; if (t.canBreakChars(P, E, y, w, i.breakWords)) break;
                                    T += E, S++ } w += T.length - 1; var C = t.getFromCache(T, u, h, r);
                                C + s > f && (a += t.addLine(o), p = !1, o = "", s = 0), o += T, s += C } else { o.length > 0 && (a += t.addLine(o), o = "", s = 0); var O = g === m.length - 1;
                                a += t.addLine(y, !O), p = !1, o = "", s = 0 } else _ + s > f && (p = !1, a += t.addLine(o), o = "", s = 0), (o.length > 0 || !t.isBreakingSpace(y) || p) && (o += y, s += _) } return a += t.addLine(o, !1) }, t.addLine = function(e, i) { return void 0 === i && (i = !0), e = t.trimRight(e), e = i ? e + "\n" : e }, t.getFromCache = function(t, e, i, n) { var r = i[t]; if (r === undefined) { var s = t.length * e;
                    r = n.measureText(t).width + s, i[t] = r } return r }, t.collapseSpaces = function(t) { return "normal" === t || "pre-line" === t }, t.collapseNewlines = function(t) { return "normal" === t }, t.trimRight = function(e) { if ("string" != typeof e) return ""; for (var i = e.length - 1; i >= 0; i--) { var n = e[i]; if (!t.isBreakingSpace(n)) break;
                    e = e.slice(0, -1) } return e }, t.isNewline = function(e) { return "string" == typeof e && t._newlines.indexOf(e.charCodeAt(0)) >= 0 }, t.isBreakingSpace = function(e) { return "string" == typeof e && t._breakingSpaces.indexOf(e.charCodeAt(0)) >= 0 }, t.tokenize = function(e) { var i = [],
                    n = ""; if ("string" != typeof e) return i; for (var r = 0; r < e.length; r++) { var s = e[r];
                    t.isBreakingSpace(s) || t.isNewline(s) ? ("" !== n && (i.push(n), n = ""), i.push(s)) : n += s } return "" !== n && i.push(n), i }, t.canBreakWords = function(t, e) { return e }, t.canBreakChars = function(t, e, i, n, r) { return !0 }, t.wordWrapSplit = function(t) { return t.split("") }, t.measureFont = function(e) { if (t._fonts[e]) return t._fonts[e]; var i = { ascent: 0, descent: 0, fontSize: 0 },
                    n = t._canvas,
                    r = t._context;
                r.font = e; var s = t.METRICS_STRING + t.BASELINE_SYMBOL,
                    o = Math.ceil(r.measureText(s).width),
                    a = Math.ceil(r.measureText(t.BASELINE_SYMBOL).width),
                    h = 2 * a;
                a = a * t.BASELINE_MULTIPLIER | 0, n.width = o, n.height = h, r.fillStyle = "#f00", r.fillRect(0, 0, o, h), r.font = e, r.textBaseline = "alphabetic", r.fillStyle = "#000", r.fillText(s, 0, a); var u = r.getImageData(0, 0, o, h).data,
                    l = u.length,
                    c = 4 * o,
                    d = 0,
                    p = 0,
                    f = !1; for (d = 0; d < a; ++d) { for (var m = 0; m < c; m += 4)
                        if (255 !== u[p + m]) { f = !0; break } if (f) break;
                    p += c } for (i.ascent = a - d, p = l - c, f = !1, d = h; d > a; --d) { for (m = 0; m < c; m += 4)
                        if (255 !== u[p + m]) { f = !0; break } if (f) break;
                    p -= c } return i.descent = d - a, i.fontSize = i.ascent + i.descent, t._fonts[e] = i, i }, t.clearMetrics = function(e) { void 0 === e && (e = ""), e ? delete t._fonts[e] : t._fonts = {} }, t }(),
        y = function() { try { var t = new OffscreenCanvas(0, 0),
                    e = t.getContext("2d"); return e && e.measureText ? t : document.createElement("canvas") } catch (i) { return document.createElement("canvas") } }();
    y.width = y.height = 10, g._canvas = y, g._context = y.getContext("2d"), g._fonts = {}, g.METRICS_STRING = "|ÉqÅ", g.BASELINE_SYMBOL = "M", g.BASELINE_MULTIPLIER = 1.4, g._newlines = [10, 13], g._breakingSpaces = [9, 32, 8192, 8193, 8194, 8195, 8196, 8197, 8198, 8200, 8201, 8202, 8287, 12288]; var v = { texture: !0, children: !1, baseTexture: !0 },
        b = function(t) {
            function e(e, i, n) { var r = this,
                    h = !1;
                n || (n = document.createElement("canvas"), h = !0), n.width = 3, n.height = 3; var u = s.G.from(n); return u.orig = new a.j, u.trim = new a.j, (r = t.call(this, u) || this)._ownCanvas = h, r.canvas = n, r.context = r.canvas.getContext("2d"), r._resolution = o.b.RESOLUTION, r._autoResolution = !0, r._text = null, r._style = null, r._styleListener = null, r._font = "", r.text = e, r.style = i, r.localStyleID = -1, r } return function(t, e) {
                function i() { this.constructor = t } u(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i) }(e, t), e.prototype.updateText = function(t) { var e = this._style; if (this.localStyleID !== e.styleID && (this.dirty = !0, this.localStyleID = e.styleID), this.dirty || !t) { this._font = this._style.toFontString(); var i, n, r = this.context,
                        s = g.measureText(this._text || " ", this._style, this._style.wordWrap, this.canvas),
                        o = s.width,
                        a = s.height,
                        u = s.lines,
                        l = s.lineHeight,
                        c = s.lineWidths,
                        d = s.maxLineWidth,
                        p = s.fontProperties;
                    this.canvas.width = Math.ceil((Math.max(1, o) + 2 * e.padding) * this._resolution), this.canvas.height = Math.ceil((Math.max(1, a) + 2 * e.padding) * this._resolution), r.scale(this._resolution, this._resolution), r.clearRect(0, 0, this.canvas.width, this.canvas.height), r.font = this._font, r.lineWidth = e.strokeThickness, r.textBaseline = e.textBaseline, r.lineJoin = e.lineJoin, r.miterLimit = e.miterLimit; for (var f = e.dropShadow ? 2 : 1, m = 0; m < f; ++m) { var y = e.dropShadow && 0 === m,
                            v = y ? 2 * a : 0,
                            b = v * this.resolution; if (y) { r.fillStyle = "black", r.strokeStyle = "black"; var _ = e.dropShadowColor,
                                x = Object(h.hex2rgb)("number" == typeof _ ? _ : Object(h.string2hex)(_));
                            r.shadowColor = "rgba(" + 255 * x[0] + "," + 255 * x[1] + "," + 255 * x[2] + "," + e.dropShadowAlpha + ")", r.shadowBlur = e.dropShadowBlur, r.shadowOffsetX = Math.cos(e.dropShadowAngle) * e.dropShadowDistance, r.shadowOffsetY = Math.sin(e.dropShadowAngle) * e.dropShadowDistance + b } else r.fillStyle = this._generateFillStyle(e, u, s), r.strokeStyle = e.stroke, r.shadowColor = "0", r.shadowBlur = 0, r.shadowOffsetX = 0, r.shadowOffsetY = 0; for (var w = 0; w < u.length; w++) i = e.strokeThickness / 2, n = e.strokeThickness / 2 + w * l + p.ascent, "right" === e.align ? i += d - c[w] : "center" === e.align && (i += (d - c[w]) / 2), e.stroke && e.strokeThickness && this.drawLetterSpacing(u[w], i + e.padding, n + e.padding - v, !0), e.fill && this.drawLetterSpacing(u[w], i + e.padding, n + e.padding - v) } this.updateTexture() } }, e.prototype.drawLetterSpacing = function(t, e, i, n) { void 0 === n && (n = !1); var r = this._style.letterSpacing; if (0 !== r)
                    for (var s = e, o = Array.from ? Array.from(t) : t.split(""), a = this.context.measureText(t).width, h = 0, u = 0; u < o.length; ++u) { var l = o[u];
                        n ? this.context.strokeText(l, s, i) : this.context.fillText(l, s, i), s += a - (h = this.context.measureText(t.substring(u + 1)).width) + r, a = h } else n ? this.context.strokeText(t, e, i) : this.context.fillText(t, e, i) }, e.prototype.updateTexture = function() { var t = this.canvas; if (this._style.trim) { var e = Object(h.trimCanvas)(t);
                    e.data && (t.width = e.width, t.height = e.height, this.context.putImageData(e.data, 0, 0)) } var i = this._texture,
                    n = this._style,
                    r = n.trim ? 0 : n.padding,
                    s = i.baseTexture;
                i.trim.width = i._frame.width = Math.ceil(t.width / this._resolution), i.trim.height = i._frame.height = Math.ceil(t.height / this._resolution), i.trim.x = -r, i.trim.y = -r, i.orig.width = i._frame.width - 2 * r, i.orig.height = i._frame.height - 2 * r, this._onTextureUpdate(), s.setRealSize(t.width, t.height, this._resolution), this._recursivePostUpdateTransform(), this.dirty = !1 }, e.prototype._render = function(e) { this._autoResolution && this._resolution !== e.resolution && (this._resolution = e.resolution, this.dirty = !0), this.updateText(!0), t.prototype._render.call(this, e) }, e.prototype.getLocalBounds = function(e) { return this.updateText(!0), t.prototype.getLocalBounds.call(this, e) }, e.prototype._calculateBounds = function() { this.updateText(!0), this.calculateVertices(), this._bounds.addQuad(this.vertexData) }, e.prototype._generateFillStyle = function(t, e, i) { var r, s = t.fill; if (!Array.isArray(s)) return s; if (1 === s.length) return s[0]; var o = t.dropShadow ? t.dropShadowDistance : 0,
                    a = t.padding || 0,
                    h = Math.ceil(this.canvas.width / this._resolution) - o - 2 * a,
                    u = Math.ceil(this.canvas.height / this._resolution) - o - 2 * a,
                    l = s.slice(),
                    c = t.fillGradientStops.slice(); if (!c.length)
                    for (var d = l.length + 1, p = 1; p < d; ++p) c.push(p / d); if (l.unshift(s[0]), c.unshift(0), l.push(s[s.length - 1]), c.push(1), t.fillGradientType === n.LINEAR_VERTICAL) { r = this.context.createLinearGradient(h / 2, a, h / 2, u + a); var f = 0,
                        m = (i.fontProperties.fontSize + t.strokeThickness) / u; for (p = 0; p < e.length; p++)
                        for (var g = i.lineHeight * p, y = 0; y < l.length; y++) { var v = g / u + ("number" == typeof c[y] ? c[y] : y / l.length) * m,
                                b = Math.max(f, v);
                            b = Math.min(b, 1), r.addColorStop(b, l[y]), f = b } } else { r = this.context.createLinearGradient(a, u / 2, h + a, u / 2); var _ = l.length + 1,
                        x = 1; for (p = 0; p < l.length; p++) { var w = void 0;
                        w = "number" == typeof c[p] ? c[p] : x / _, r.addColorStop(w, l[p]), x++ } } return r }, e.prototype.destroy = function(e) { "boolean" == typeof e && (e = { children: e }), e = Object.assign({}, v, e), t.prototype.destroy.call(this, e), this._ownCanvas && (this.canvas.height = this.canvas.width = 0), this.context = null, this.canvas = null, this._style = null }, Object.defineProperty(e.prototype, "width", { get: function() { return this.updateText(!0), Math.abs(this.scale.x) * this._texture.orig.width }, set: function(t) { this.updateText(!0); var e = Object(h.sign)(this.scale.x) || 1;
                    this.scale.x = e * t / this._texture.orig.width, this._width = t }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "height", { get: function() { return this.updateText(!0), Math.abs(this.scale.y) * this._texture.orig.height }, set: function(t) { this.updateText(!0); var e = Object(h.sign)(this.scale.y) || 1;
                    this.scale.y = e * t / this._texture.orig.height, this._height = t }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "style", { get: function() { return this._style }, set: function(t) { t = t || {}, this._style = t instanceof d ? t : new d(t), this.localStyleID = -1, this.dirty = !0 }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "text", { get: function() { return this._text }, set: function(t) { t = String(null === t || t === undefined ? "" : t), this._text !== t && (this._text = t, this.dirty = !0) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "resolution", { get: function() { return this._resolution }, set: function(t) { this._autoResolution = !1, this._resolution !== t && (this._resolution = t, this.dirty = !0) }, enumerable: !1, configurable: !0 }), e }(r.a) }, function(t, e, i) { var n, r;! function(s, o) { "use strict";
        (r = "function" == typeof(n = function() { var t = {};

            function e(t, e) { this.x = t || 0, this.y = e || 0 }

            function i(t, i) { this.pos = t || new e, this.r = i || 0, this.offset = new e }

            function n(t, i) { this.pos = t || new e, this.angle = 0, this.offset = new e, this.setPoints(i || []) }

            function r(t, i, n) { this.pos = t || new e, this.w = i || 0, this.h = n || 0 }

            function s() { this.a = null, this.b = null, this.overlapN = new e, this.overlapV = new e, this.clear() } t.Vector = e, t.V = e, e.prototype.copy = e.prototype.copy = function(t) { return this.x = t.x, this.y = t.y, this }, e.prototype.clone = e.prototype.clone = function() { return new e(this.x, this.y) }, e.prototype.perp = e.prototype.perp = function() { var t = this.x; return this.x = this.y, this.y = -t, this }, e.prototype.rotate = e.prototype.rotate = function(t) { var e = this.x,
                    i = this.y; return this.x = e * Math.cos(t) - i * Math.sin(t), this.y = e * Math.sin(t) + i * Math.cos(t), this }, e.prototype.reverse = e.prototype.reverse = function() { return this.x = -this.x, this.y = -this.y, this }, e.prototype.normalize = e.prototype.normalize = function() { var t = this.len(); return t > 0 && (this.x = this.x / t, this.y = this.y / t), this }, e.prototype.add = e.prototype.add = function(t) { return this.x += t.x, this.y += t.y, this }, e.prototype.sub = e.prototype.sub = function(t) { return this.x -= t.x, this.y -= t.y, this }, e.prototype.scale = e.prototype.scale = function(t, e) { return this.x *= t, this.y *= void 0 !== e ? e : t, this }, e.prototype.project = e.prototype.project = function(t) { var e = this.dot(t) / t.len2(); return this.x = e * t.x, this.y = e * t.y, this }, e.prototype.projectN = e.prototype.projectN = function(t) { var e = this.dot(t); return this.x = e * t.x, this.y = e * t.y, this }, e.prototype.reflect = e.prototype.reflect = function(t) { var e = this.x,
                    i = this.y; return this.project(t).scale(2), this.x -= e, this.y -= i, this }, e.prototype.reflectN = e.prototype.reflectN = function(t) { var e = this.x,
                    i = this.y; return this.projectN(t).scale(2), this.x -= e, this.y -= i, this }, e.prototype.dot = e.prototype.dot = function(t) { return this.x * t.x + this.y * t.y }, e.prototype.len2 = e.prototype.len2 = function() { return this.dot(this) }, e.prototype.len = e.prototype.len = function() { return Math.sqrt(this.len2()) }, t.Circle = i, i.prototype.getAABB = i.prototype.getAABB = function() { var t = this.r; return new r(this.pos.clone().add(this.offset).sub(new e(t, t)), 2 * t, 2 * t).toPolygon() }, i.prototype.setOffset = i.prototype.setOffset = function(t) { return this.offset = t, this }, t.Polygon = n, n.prototype.setPoints = n.prototype.setPoints = function(t) { if (!this.points || this.points.length !== t.length) { var i, n = this.calcPoints = [],
                        r = this.edges = [],
                        s = this.normals = []; for (i = 0; i < t.length; i++) { var o = t[i],
                            a = i < t.length - 1 ? t[i + 1] : t[0];
                        o === a || o.x !== a.x || o.y !== a.y ? (n.push(new e), r.push(new e), s.push(new e)) : (t.splice(i, 1), i -= 1) } } return this.points = t, this._recalc(), this }, n.prototype.setAngle = n.prototype.setAngle = function(t) { return this.angle = t, this._recalc(), this }, n.prototype.setOffset = n.prototype.setOffset = function(t) { return this.offset = t, this._recalc(), this }, n.prototype.rotate = n.prototype.rotate = function(t) { for (var e = this.points, i = e.length, n = 0; n < i; n++) e[n].rotate(t); return this._recalc(), this }, n.prototype.translate = n.prototype.translate = function(t, e) { for (var i = this.points, n = i.length, r = 0; r < n; r++) i[r].x += t, i[r].y += e; return this._recalc(), this }, n.prototype._recalc = function() { var t, e = this.calcPoints,
                    i = this.edges,
                    n = this.normals,
                    r = this.points,
                    s = this.offset,
                    o = this.angle,
                    a = r.length; for (t = 0; t < a; t++) { var h = e[t].copy(r[t]);
                    h.x += s.x, h.y += s.y, 0 !== o && h.rotate(o) } for (t = 0; t < a; t++) { var u = e[t],
                        l = t < a - 1 ? e[t + 1] : e[0],
                        c = i[t].copy(l).sub(u);
                    n[t].copy(c).perp().normalize() } return this }, n.prototype.getAABB = n.prototype.getAABB = function() { for (var t = this.calcPoints, i = t.length, n = t[0].x, s = t[0].y, o = t[0].x, a = t[0].y, h = 1; h < i; h++) { var u = t[h];
                    u.x < n ? n = u.x : u.x > o && (o = u.x), u.y < s ? s = u.y : u.y > a && (a = u.y) } return new r(this.pos.clone().add(new e(n, s)), o - n, a - s).toPolygon() }, n.prototype.getCentroid = n.prototype.getCentroid = function() { for (var t = this.calcPoints, i = t.length, n = 0, r = 0, s = 0, o = 0; o < i; o++) { var a = t[o],
                        h = o === i - 1 ? t[0] : t[o + 1],
                        u = a.x * h.y - h.x * a.y;
                    n += (a.x + h.x) * u, r += (a.y + h.y) * u, s += u } return new e(n /= s *= 3, r /= s) }, t.Box = r, r.prototype.toPolygon = r.prototype.toPolygon = function() { var t = this.pos,
                    i = this.w,
                    r = this.h; return new n(new e(t.x, t.y), [new e, new e(i, 0), new e(i, r), new e(0, r)]) }, t.Response = s, s.prototype.clear = s.prototype.clear = function() { return this.aInB = !0, this.bInA = !0, this.overlap = Number.MAX_VALUE, this }; for (var o = [], a = 0; a < 10; a++) o.push(new e); var h = []; for (a = 0; a < 5; a++) h.push([]); var u = new s,
                l = new r(new e, 1e-6, 1e-6).toPolygon();

            function c(t, e, i) { for (var n = Number.MAX_VALUE, r = -Number.MAX_VALUE, s = t.length, o = 0; o < s; o++) { var a = t[o].dot(e);
                    a < n && (n = a), a > r && (r = a) } i[0] = n, i[1] = r }

            function d(t, e, i, n, r, s) { var a = h.pop(),
                    u = h.pop(),
                    l = o.pop().copy(e).sub(t),
                    d = l.dot(r); if (c(i, r, a), c(n, r, u), u[0] += d, u[1] += d, a[0] > u[1] || u[0] > a[1]) return o.push(l), h.push(a), h.push(u), !0; if (s) { var p, f, m = 0; if (a[0] < u[0])
                        if (s.aInB = !1, a[1] < u[1]) m = a[1] - u[0], s.bInA = !1;
                        else m = (p = a[1] - u[0]) < (f = u[1] - a[0]) ? p : -f;
                    else if (s.bInA = !1, a[1] > u[1]) m = a[0] - u[1], s.aInB = !1;
                    else m = (p = a[1] - u[0]) < (f = u[1] - a[0]) ? p : -f; var g = Math.abs(m);
                    g < s.overlap && (s.overlap = g, s.overlapN.copy(r), m < 0 && s.overlapN.reverse()) } return o.push(l), h.push(a), h.push(u), !1 }

            function p(t, e) { var i = t.len2(),
                    n = e.dot(t); return n < 0 ? f : n > i ? g : m } t.isSeparatingAxis = d; var f = -1,
                m = 0,
                g = 1;

            function y(t, e) { var i = o.pop().copy(t).sub(e.pos).sub(e.offset),
                    n = e.r * e.r,
                    r = i.len2(); return o.push(i), r <= n }

            function v(t, e) { l.pos.copy(t), u.clear(); var i = w(l, e, u); return i && (i = u.aInB), i }

            function b(t, e, i) { var n = o.pop().copy(e.pos).add(e.offset).sub(t.pos).sub(t.offset),
                    r = t.r + e.r,
                    s = r * r,
                    a = n.len2(); if (a > s) return o.push(n), !1; if (i) { var h = Math.sqrt(a);
                    i.a = t, i.b = e, i.overlap = r - h, i.overlapN.copy(n.normalize()), i.overlapV.copy(n).scale(i.overlap), i.aInB = t.r <= e.r && h <= e.r - t.r, i.bInA = e.r <= t.r && h <= t.r - e.r } return o.push(n), !0 }

            function _(t, e, i) { for (var n = o.pop().copy(e.pos).add(e.offset).sub(t.pos), r = e.r, s = r * r, a = t.calcPoints, h = a.length, u = o.pop(), l = o.pop(), c = 0; c < h; c++) { var d = c === h - 1 ? 0 : c + 1,
                        m = 0 === c ? h - 1 : c - 1,
                        y = 0,
                        v = null;
                    u.copy(t.edges[c]), l.copy(n).sub(a[c]), i && l.len2() > s && (i.aInB = !1); var b = p(u, l); if (b === f) { u.copy(t.edges[m]); var _ = o.pop().copy(n).sub(a[m]); if ((b = p(u, _)) === g) { if ((w = l.len()) > r) return o.push(n), o.push(u), o.push(l), o.push(_), !1;
                            i && (i.bInA = !1, v = l.normalize(), y = r - w) } o.push(_) } else if (b === g) { if (u.copy(t.edges[d]), l.copy(n).sub(a[d]), (b = p(u, l)) === f) { if ((w = l.len()) > r) return o.push(n), o.push(u), o.push(l), !1;
                            i && (i.bInA = !1, v = l.normalize(), y = r - w) } } else { var x = u.perp().normalize(),
                            w = l.dot(x),
                            T = Math.abs(w); if (w > 0 && T > r) return o.push(n), o.push(x), o.push(l), !1;
                        i && (v = x, y = r - w, (w >= 0 || y < 2 * r) && (i.bInA = !1)) } v && i && Math.abs(y) < Math.abs(i.overlap) && (i.overlap = y, i.overlapN.copy(v)) } return i && (i.a = t, i.b = e, i.overlapV.copy(i.overlapN).scale(i.overlap)), o.push(n), o.push(u), o.push(l), !0 }

            function x(t, e, i) { var n = _(e, t, i); if (n && i) { var r = i.a,
                        s = i.aInB;
                    i.overlapN.reverse(), i.overlapV.reverse(), i.a = i.b, i.b = r, i.aInB = i.bInA, i.bInA = s } return n }

            function w(t, e, i) { for (var n = t.calcPoints, r = n.length, s = e.calcPoints, o = s.length, a = 0; a < r; a++)
                    if (d(t.pos, e.pos, n, s, t.normals[a], i)) return !1; for (a = 0; a < o; a++)
                    if (d(t.pos, e.pos, n, s, e.normals[a], i)) return !1; return i && (i.a = t, i.b = e, i.overlapV.copy(i.overlapN).scale(i.overlap)), !0 } return t.pointInCircle = y, t.pointInPolygon = v, t.testCircleCircle = b, t.testPolygonCircle = _, t.testCirclePolygon = x, t.testPolygonPolygon = w, t }) ? n.call(e, i, e, t) : n) === undefined || (t.exports = r) }() }, function(t, e, i) { "use strict";
    Object.defineProperty(e, "__esModule", { value: !0 }); var n = function() {
        function t(t, e) { for (var i = 0; i < e.length; i++) { var n = e[i];
                n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n) } } return function(e, i, n) { return i && t(e.prototype, i), n && t(e, n), e } }();

    function r(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") } var s = function() {
        function t(e, i, n) { i === undefined && (i = !1), r(this, t), this._fn = e, this._once = i, this._thisArg = n, this._next = this._prev = this._owner = null } return n(t, [{ key: "detach", value: function() { return null !== this._owner && (this._owner.detach(this), !0) } }]), t }();

    function o(t, e) { return t._head ? (t._tail._next = e, e._prev = t._tail, t._tail = e) : (t._head = e, t._tail = e), e._owner = t, e } var a = function() {
        function t() { r(this, t), this._head = this._tail = undefined } return n(t, [{ key: "handlers", value: function() { var t = !(arguments.length <= 0 || arguments[0] === undefined) && arguments[0],
                    e = this._head; if (t) return !!e; for (var i = []; e;) i.push(e), e = e._next; return i } }, { key: "has", value: function(t) { if (!(t instanceof s)) throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object."); return t._owner === this } }, { key: "dispatch", value: function() { var t = this._head; if (!t) return !1; for (; t;) t._once && this.detach(t), t._fn.apply(t._thisArg, arguments), t = t._next; return !0 } }, { key: "add", value: function(t) { var e = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1]; if ("function" != typeof t) throw new Error("MiniSignal#add(): First arg must be a Function."); return o(this, new s(t, !1, e)) } }, { key: "once", value: function(t) { var e = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1]; if ("function" != typeof t) throw new Error("MiniSignal#once(): First arg must be a Function."); return o(this, new s(t, !0, e)) } }, { key: "detach", value: function(t) { if (!(t instanceof s)) throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object."); return t._owner !== this || (t._prev && (t._prev._next = t._next), t._next && (t._next._prev = t._prev), t === this._head ? (this._head = t._next, null === t._next && (this._tail = null)) : t === this._tail && (this._tail = t._prev, this._tail._next = null), t._owner = null), this } }, { key: "detachAll", value: function() { var t = this._head; if (!t) return this; for (this._head = this._tail = null; t;) t._owner = null, t = t._next; return this } }]), t }();
    a.MiniSignalBinding = s, e["default"] = a, t.exports = e["default"] }, function(t, e, i) { "use strict";
    i.d(e, "a", (function() { return c })), i.d(e, "b", (function() { return l })), i.d(e, "c", (function() { return U })), i.d(e, "d", (function() { return L })), i.d(e, "e", (function() { return N })), i.d(e, "f", (function() { return r })), i.d(e, "g", (function() { return n })), i.d(e, "h", (function() { return F })), i.d(e, "i", (function() { return M })); var n, r, s = i(5),
        o = i(4),
        a = i(1),
        h = i(2),
        u = i(7);! function(t) { t.MITER = "miter", t.BEVEL = "bevel", t.ROUND = "round" }(n || (n = {})),
    function(t) { t.BUTT = "butt", t.ROUND = "round", t.SQUARE = "square" }(r || (r = {})); var l = { adaptive: !0, maxLength: 10, minSegments: 8, maxSegments: 2048, epsilon: 1e-4, _segmentsCount: function(t, e) { if (void 0 === e && (e = 20), !this.adaptive || !t || isNaN(t)) return e; var i = Math.ceil(t / this.maxLength); return i < this.minSegments ? i = this.minSegments : i > this.maxSegments && (i = this.maxSegments), i } },
        c = function() {
            function t() { this.color = 16777215, this.alpha = 1, this.texture = s.G.WHITE, this.matrix = null, this.visible = !1, this.reset() } return t.prototype.clone = function() { var e = new t; return e.color = this.color, e.alpha = this.alpha, e.texture = this.texture, e.matrix = this.matrix, e.visible = this.visible, e }, t.prototype.reset = function() { this.color = 16777215, this.alpha = 1, this.texture = s.G.WHITE, this.matrix = null, this.visible = !1 }, t.prototype.destroy = function() { this.texture = null, this.matrix = null }, t }(),
        d = function(t, e) { return (d = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) })(t, e) };

    function p(t, e) {
        function i() { this.constructor = t } d(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i) } var f = { build: function(t) { t.points = t.shape.points.slice() }, triangulate: function(t, e) { var i = t.points,
                    n = t.holes,
                    r = e.points,
                    s = e.indices; if (i.length >= 6) { for (var o = [], h = 0; h < n.length; h++) { var u = n[h];
                        o.push(i.length / 2), i = i.concat(u.points) } var l = Object(a.earcut)(i, o, 2); if (!l) return; var c = r.length / 2; for (h = 0; h < l.length; h += 3) s.push(l[h] + c), s.push(l[h + 1] + c), s.push(l[h + 2] + c); for (h = 0; h < i.length; h++) r.push(i[h]) } } },
        m = { build: function(t) { var e, i, n = t.shape,
                    r = t.points,
                    s = n.x,
                    a = n.y; if (r.length = 0, t.type === o.l.CIRC) e = n.radius, i = n.radius;
                else { var h = t.shape;
                    e = h.width, i = h.height } if (0 !== e && 0 !== i) { var u = Math.floor(30 * Math.sqrt(n.radius)) || Math.floor(15 * Math.sqrt(e + i));
                    u /= 2.3; for (var l = 2 * Math.PI / u, c = 0; c < u - .5; c++) r.push(s + Math.sin(-l * c) * e, a + Math.cos(-l * c) * i);
                    r.push(r[0], r[1]) } }, triangulate: function(t, e) { var i = t.points,
                    n = e.points,
                    r = e.indices,
                    s = n.length / 2,
                    o = s,
                    a = t.shape,
                    h = t.matrix,
                    u = a.x,
                    l = a.y;
                n.push(t.matrix ? h.a * u + h.c * l + h.tx : u, t.matrix ? h.b * u + h.d * l + h.ty : l); for (var c = 0; c < i.length; c += 2) n.push(i[c], i[c + 1]), r.push(s++, o, s) } },
        g = { build: function(t) { var e = t.shape,
                    i = e.x,
                    n = e.y,
                    r = e.width,
                    s = e.height,
                    o = t.points;
                o.length = 0, o.push(i, n, i + r, n, i + r, n + s, i, n + s) }, triangulate: function(t, e) { var i = t.points,
                    n = e.points,
                    r = n.length / 2;
                n.push(i[0], i[1], i[2], i[3], i[6], i[7], i[4], i[5]), e.indices.push(r, r + 1, r + 2, r + 1, r + 2, r + 3) } };

    function y(t, e, i) { return t + (e - t) * i }

    function v(t, e, i, n, r, s, o) { void 0 === o && (o = []); for (var a = o, h = 0, u = 0, l = 0, c = 0, d = 0, p = 0, f = 0, m = 0; f <= 20; ++f) h = y(t, i, m = f / 20), u = y(e, n, m), l = y(i, r, m), c = y(n, s, m), d = y(h, l, m), p = y(u, c, m), a.push(d, p); return a } var b = { build: function(t) { var e = t.shape,
                i = t.points,
                n = e.x,
                r = e.y,
                s = e.width,
                o = e.height,
                a = Math.max(0, Math.min(e.radius, Math.min(s, o) / 2));
            i.length = 0, a ? (v(n, r + a, n, r, n + a, r, i), v(n + s - a, r, n + s, r, n + s, r + a, i), v(n + s, r + o - a, n + s, r + o, n + s - a, r + o, i), v(n + a, r + o, n, r + o, n, r + o - a, i)) : i.push(n, r, n + s, r, n + s, r + o, n, r + o) }, triangulate: function(t, e) { for (var i = t.points, n = e.points, r = e.indices, s = n.length / 2, o = Object(a.earcut)(i, null, 2), h = 0, u = o.length; h < u; h += 3) r.push(o[h] + s), r.push(o[h + 1] + s), r.push(o[h + 2] + s); for (h = 0, u = i.length; h < u; h++) n.push(i[h], i[++h]) } };

    function _(t, e, i, n, r, s, o, a) { var h, u;
        o ? (h = n, u = -i) : (h = -n, u = i); var l = t - i * r + h,
            c = e - n * r + u,
            d = t + i * s + h,
            p = e + n * s + u; return a.push(l, c), a.push(d, p), 2 }

    function x(t, e, i, n, r, s, o, a) { var h = i - t,
            u = n - e,
            l = Math.atan2(h, u),
            c = Math.atan2(r - t, s - e);
        a && l < c ? l += 2 * Math.PI : !a && l > c && (c += 2 * Math.PI); var d = l,
            p = c - l,
            f = Math.abs(p),
            m = Math.sqrt(h * h + u * u),
            g = 1 + (15 * f * Math.sqrt(m) / Math.PI >> 0),
            y = p / g; if (d += y, a) { o.push(t, e), o.push(i, n); for (var v = 1, b = d; v < g; v++, b += y) o.push(t, e), o.push(t + Math.sin(b) * m, e + Math.cos(b) * m);
            o.push(t, e), o.push(r, s) } else { o.push(i, n), o.push(t, e); for (v = 1, b = d; v < g; v++, b += y) o.push(t + Math.sin(b) * m, e + Math.cos(b) * m), o.push(t, e);
            o.push(r, s), o.push(t, e) } return 2 * g }

    function w(t, e) { t.lineStyle.native ? function(t, e) { var i = 0,
                n = t.shape,
                r = t.points || n.points,
                s = n.type !== o.l.POLY || n.closeStroke; if (0 !== r.length) { var a = e.points,
                    h = e.indices,
                    u = r.length / 2,
                    l = a.length / 2,
                    c = l; for (a.push(r[0], r[1]), i = 1; i < u; i++) a.push(r[2 * i], r[2 * i + 1]), h.push(c, c + 1), c++;
                s && h.push(c, l) } }(t, e) : function(t, e) { var i = t.shape,
                s = t.points || i.points.slice(),
                a = e.closePointEps; if (0 !== s.length) { var h = t.lineStyle,
                    u = new o.g(s[0], s[1]),
                    c = new o.g(s[s.length - 2], s[s.length - 1]),
                    d = i.type !== o.l.POLY || i.closeStroke,
                    p = Math.abs(u.x - c.x) < a && Math.abs(u.y - c.y) < a; if (d) { s = s.slice(), p && (s.pop(), s.pop(), c.set(s[s.length - 2], s[s.length - 1])); var f = .5 * (u.x + c.x),
                        m = .5 * (c.y + u.y);
                    s.unshift(f, m), s.push(f, m) } var g = e.points,
                    y = s.length / 2,
                    v = s.length,
                    b = g.length / 2,
                    w = h.width / 2,
                    T = w * w,
                    S = h.miterLimit * h.miterLimit,
                    E = s[0],
                    P = s[1],
                    C = s[2],
                    O = s[3],
                    A = 0,
                    I = 0,
                    R = -(P - O),
                    M = E - C,
                    L = 0,
                    D = 0,
                    k = Math.sqrt(R * R + M * M);
                R /= k, M /= k, R *= w, M *= w; var N = h.alignment,
                    F = 2 * (1 - N),
                    B = 2 * N;
                d || (h.cap === r.ROUND ? v += x(E - R * (F - B) * .5, P - M * (F - B) * .5, E - R * F, P - M * F, E + R * B, P + M * B, g, !0) + 2 : h.cap === r.SQUARE && (v += _(E, P, R, M, F, B, !0, g))), g.push(E - R * F, P - M * F), g.push(E + R * B, P + M * B); for (var j = 1; j < y - 1; ++j) { E = s[2 * (j - 1)], P = s[2 * (j - 1) + 1], C = s[2 * j], O = s[2 * j + 1], A = s[2 * (j + 1)], I = s[2 * (j + 1) + 1], R = -(P - O), M = E - C, R /= k = Math.sqrt(R * R + M * M), M /= k, R *= w, M *= w, L = -(O - I), D = C - A, L /= k = Math.sqrt(L * L + D * D), D /= k, L *= w, D *= w; var U = C - E,
                        G = P - O,
                        X = C - A,
                        H = I - O,
                        z = G * X - H * U,
                        V = z < 0; if (Math.abs(z) < .1) g.push(C - R * F, O - M * F), g.push(C + R * B, O + M * B);
                    else { var W = (-R + E) * (-M + O) - (-R + C) * (-M + P),
                            Y = (-L + A) * (-D + O) - (-L + C) * (-D + I),
                            K = (U * Y - X * W) / z,
                            q = (H * W - G * Y) / z,
                            Q = (K - C) * (K - C) + (q - O) * (q - O),
                            $ = C + (K - C) * F,
                            Z = O + (q - O) * F,
                            J = C - (K - C) * B,
                            tt = O - (q - O) * B;
                        h.join === n.BEVEL || Q / T > S ? (V ? (g.push($, Z), g.push(C + R * B, O + M * B), g.push($, Z), g.push(C + L * B, O + D * B)) : (g.push(C - R * F, O - M * F), g.push(J, tt), g.push(C - L * F, O - D * F), g.push(J, tt)), v += 2) : h.join === n.ROUND ? V ? (g.push($, Z), g.push(C + R * B, O + M * B), v += x(C, O, C + R * B, O + M * B, C + L * B, O + D * B, g, !0) + 4, g.push($, Z), g.push(C + L * B, O + D * B)) : (g.push(C - R * F, O - M * F), g.push(J, tt), v += x(C, O, C - R * F, O - M * F, C - L * F, O - D * F, g, !1) + 4, g.push(C - L * F, O - D * F), g.push(J, tt)) : (g.push($, Z), g.push(J, tt)) } } E = s[2 * (y - 2)], P = s[2 * (y - 2) + 1], C = s[2 * (y - 1)], R = -(P - (O = s[2 * (y - 1) + 1])), M = E - C, R /= k = Math.sqrt(R * R + M * M), M /= k, R *= w, M *= w, g.push(C - R * F, O - M * F), g.push(C + R * B, O + M * B), d || (h.cap === r.ROUND ? v += x(C - R * (F - B) * .5, O - M * (F - B) * .5, C - R * F, O - M * F, C + R * B, O + M * B, g, !1) + 2 : h.cap === r.SQUARE && (v += _(C, O, R, M, F, B, !1, g))); var et = e.indices,
                    it = l.epsilon * l.epsilon; for (j = b; j < v + b - 2; ++j) E = g[2 * j], P = g[2 * j + 1], C = g[2 * (j + 1)], O = g[2 * (j + 1) + 1], A = g[2 * (j + 2)], I = g[2 * (j + 2) + 1], Math.abs(E * (O - I) + C * (I - P) + A * (P - O)) < it || et.push(j, j + 1, j + 2) } }(t, e) } var T, S = function(t) {
            function e(e, i, n, r, s, a) { void 0 === a && (a = 0);
                s = s || r / 2; for (var h = -1 * Math.PI / 2 + a, u = 2 * n, l = o.f / u, c = [], d = 0; d < u; d++) { var p = d % 2 ? s : r,
                        f = d * l + h;
                    c.push(e + p * Math.cos(f), i + p * Math.sin(f)) } return t.call(this, c) || this } return p(e, t), e }(o.h),
        E = function() {
            function t() {} return t.curveTo = function(t, e, i, n, r, s) { var o = s[s.length - 2],
                    a = s[s.length - 1] - e,
                    h = o - t,
                    u = n - e,
                    l = i - t,
                    c = Math.abs(a * l - h * u); if (c < 1e-8 || 0 === r) return s[s.length - 2] === t && s[s.length - 1] === e || s.push(t, e), null; var d = a * a + h * h,
                    p = u * u + l * l,
                    f = a * u + h * l,
                    m = r * Math.sqrt(d) / c,
                    g = r * Math.sqrt(p) / c,
                    y = m * f / d,
                    v = g * f / p,
                    b = m * l + g * h,
                    _ = m * u + g * a,
                    x = h * (g + y),
                    w = a * (g + y),
                    T = l * (m + v),
                    S = u * (m + v); return { cx: b + t, cy: _ + e, radius: r, startAngle: Math.atan2(w - _, x - b), endAngle: Math.atan2(S - _, T - b), anticlockwise: h * u > l * a } }, t.arc = function(t, e, i, n, r, s, a, h, u) { for (var c = a - s, d = l._segmentsCount(Math.abs(c) * r, 40 * Math.ceil(Math.abs(c) / o.f)), p = c / (2 * d), f = 2 * p, m = Math.cos(p), g = Math.sin(p), y = d - 1, v = y % 1 / y, b = 0; b <= y; ++b) { var _ = p + s + f * (b + v * b),
                        x = Math.cos(_),
                        w = -Math.sin(_);
                    u.push((m * x + g * w) * r + i, (m * -w + g * x) * r + n) } }, t }(),
        P = function() {
            function t() {} return t.curveLength = function(t, e, i, n, r, s, o, a) { for (var h = 0, u = 0, l = 0, c = 0, d = 0, p = 0, f = 0, m = 0, g = 0, y = 0, v = 0, b = t, _ = e, x = 1; x <= 10; ++x) y = b - (m = (f = (p = (d = 1 - (u = x / 10)) * d) * d) * t + 3 * p * u * i + 3 * d * (l = u * u) * r + (c = l * u) * o), v = _ - (g = f * e + 3 * p * u * n + 3 * d * l * s + c * a), b = m, _ = g, h += Math.sqrt(y * y + v * v); return h }, t.curveTo = function(e, i, n, r, s, o, a) { var h = a[a.length - 2],
                    u = a[a.length - 1];
                a.length -= 2; var c = l._segmentsCount(t.curveLength(h, u, e, i, n, r, s, o)),
                    d = 0,
                    p = 0,
                    f = 0,
                    m = 0,
                    g = 0;
                a.push(h, u); for (var y = 1, v = 0; y <= c; ++y) f = (p = (d = 1 - (v = y / c)) * d) * d, g = (m = v * v) * v, a.push(f * h + 3 * p * v * e + 3 * d * m * n + g * s, f * u + 3 * p * v * i + 3 * d * m * r + g * o) }, t }(),
        C = function() {
            function t() {} return t.curveLength = function(t, e, i, n, r, s) { var o = t - 2 * i + r,
                    a = e - 2 * n + s,
                    h = 2 * i - 2 * t,
                    u = 2 * n - 2 * e,
                    l = 4 * (o * o + a * a),
                    c = 4 * (o * h + a * u),
                    d = h * h + u * u,
                    p = 2 * Math.sqrt(l + c + d),
                    f = Math.sqrt(l),
                    m = 2 * l * f,
                    g = 2 * Math.sqrt(d),
                    y = c / f; return (m * p + f * c * (p - g) + (4 * d * l - c * c) * Math.log((2 * f + y + p) / (y + g))) / (4 * m) }, t.curveTo = function(e, i, n, r, s) { for (var o = s[s.length - 2], a = s[s.length - 1], h = l._segmentsCount(t.curveLength(o, a, e, i, n, r)), u = 0, c = 0, d = 1; d <= h; ++d) { var p = d / h;
                    u = o + (e - o) * p, c = a + (i - a) * p, s.push(u + (e + (n - e) * p - u) * p, c + (i + (r - i) * p - c) * p) } }, t }(),
        O = function() {
            function t() { this.reset() } return t.prototype.begin = function(t, e, i) { this.reset(), this.style = t, this.start = e, this.attribStart = i }, t.prototype.end = function(t, e) { this.attribSize = e - this.attribStart, this.size = t - this.start }, t.prototype.reset = function() { this.style = null, this.size = 0, this.start = 0, this.attribStart = 0, this.attribSize = 0 }, t }(),
        A = ((T = {})[o.l.POLY] = f, T[o.l.CIRC] = m, T[o.l.ELIP] = m, T[o.l.RECT] = g, T[o.l.RREC] = b, T),
        I = [],
        R = [],
        M = { buildPoly: f, buildCircle: m, buildRectangle: g, buildRoundedRectangle: b, FILL_COMMANDS: A, BATCH_POOL: I, DRAW_CALL_POOL: R, buildLine: w, Star: S, ArcUtils: E, BezierUtils: P, QuadraticUtils: C, BatchPart: O },
        L = function() {
            function t(t, e, i, n) { void 0 === e && (e = null), void 0 === i && (i = null), void 0 === n && (n = null), this.shape = t, this.lineStyle = i, this.fillStyle = e, this.matrix = n, this.type = t.type, this.points = [], this.holes = [] } return t.prototype.clone = function() { return new t(this.shape, this.fillStyle, this.lineStyle, this.matrix) }, t.prototype.destroy = function() { this.shape = null, this.holes.length = 0, this.holes = null, this.points.length = 0, this.points = null, this.lineStyle = null, this.fillStyle = null }, t }(),
        D = new o.g,
        k = new u.a,
        N = function(t) {
            function e() { var e = t.call(this) || this; return e.uvsFloat32 = null, e.indicesUint16 = null, e.points = [], e.colors = [], e.uvs = [], e.indices = [], e.textureIds = [], e.graphicsData = [], e.dirty = 0, e.batchDirty = -1, e.cacheDirty = -1, e.clearDirty = 0, e.drawCalls = [], e.batches = [], e.shapeIndex = 0, e._bounds = new u.a, e.boundsDirty = -1, e.boundsPadding = 0, e.batchable = !1, e.indicesUint16 = null, e.uvsFloat32 = null, e.closePointEps = 1e-4, e } return p(e, t), Object.defineProperty(e.prototype, "bounds", { get: function() { return this.boundsDirty !== this.dirty && (this.boundsDirty = this.dirty, this.calculateBounds()), this._bounds }, enumerable: !1, configurable: !0 }), e.prototype.invalidate = function() { this.boundsDirty = -1, this.dirty++, this.batchDirty++, this.shapeIndex = 0, this.points.length = 0, this.colors.length = 0, this.uvs.length = 0, this.indices.length = 0, this.textureIds.length = 0; for (var t = 0; t < this.drawCalls.length; t++) this.drawCalls[t].texArray.clear(), R.push(this.drawCalls[t]);
                this.drawCalls.length = 0; for (t = 0; t < this.batches.length; t++) { var e = this.batches[t];
                    e.reset(), I.push(e) } this.batches.length = 0 }, e.prototype.clear = function() { return this.graphicsData.length > 0 && (this.invalidate(), this.clearDirty++, this.graphicsData.length = 0), this }, e.prototype.drawShape = function(t, e, i, n) { void 0 === e && (e = null), void 0 === i && (i = null), void 0 === n && (n = null); var r = new L(t, e, i, n); return this.graphicsData.push(r), this.dirty++, this }, e.prototype.drawHole = function(t, e) { if (void 0 === e && (e = null), !this.graphicsData.length) return null; var i = new L(t, null, null, e),
                    n = this.graphicsData[this.graphicsData.length - 1]; return i.lineStyle = n.lineStyle, n.holes.push(i), this.dirty++, this }, e.prototype.destroy = function() { t.prototype.destroy.call(this); for (var e = 0; e < this.graphicsData.length; ++e) this.graphicsData[e].destroy();
                this.points.length = 0, this.points = null, this.colors.length = 0, this.colors = null, this.uvs.length = 0, this.uvs = null, this.indices.length = 0, this.indices = null, this.indexBuffer.destroy(), this.indexBuffer = null, this.graphicsData.length = 0, this.graphicsData = null, this.drawCalls.length = 0, this.drawCalls = null, this.batches.length = 0, this.batches = null, this._bounds = null }, e.prototype.containsPoint = function(t) { for (var e = this.graphicsData, i = 0; i < e.length; ++i) { var n = e[i]; if (n.fillStyle.visible && (n.shape && (n.matrix ? n.matrix.applyInverse(t, D) : D.copyFrom(t), n.shape.contains(D.x, D.y)))) { var r = !1; if (n.holes)
                            for (var s = 0; s < n.holes.length; s++) { if (n.holes[s].shape.contains(D.x, D.y)) { r = !0; break } }
                        if (!r) return !0 } } return !1 }, e.prototype.updateBatches = function(t) { if (this.graphicsData.length) { if (this.validateBatching()) { this.cacheDirty = this.dirty; var e = this.uvs,
                            i = this.graphicsData,
                            n = null,
                            r = null;
                        this.batches.length > 0 && (r = (n = this.batches[this.batches.length - 1]).style); for (var s = this.shapeIndex; s < i.length; s++) { this.shapeIndex++; var o = i[s],
                                a = o.fillStyle,
                                u = o.lineStyle;
                            A[o.type].build(o), o.matrix && this.transformPoints(o.points, o.matrix); for (var l = 0; l < 2; l++) { var c = 0 === l ? a : u; if (c.visible) { var d = c.texture.baseTexture,
                                        p = this.indices.length,
                                        f = this.points.length / 2;
                                    d.wrapMode = h.q.REPEAT, 0 === l ? this.processFill(o) : this.processLine(o); var m = this.points.length / 2 - f;
                                    0 !== m && (n && !this._compareStyles(r, c) && (n.end(p, f), n = null), n || ((n = I.pop() || new O).begin(c, p, f), this.batches.push(n), r = c), this.addUvs(this.points, e, c.texture, f, m, c.matrix)) } } } var g = this.indices.length,
                            y = this.points.length / 2; if (n && n.end(g, y), 0 !== this.batches.length) { if (this.indicesUint16 && this.indices.length === this.indicesUint16.length) this.indicesUint16.set(this.indices);
                            else { var v = y > 65535 && t;
                                this.indicesUint16 = v ? new Uint32Array(this.indices) : new Uint16Array(this.indices) } this.batchable = this.isBatchable(), this.batchable ? this.packBatches() : this.buildDrawCalls() } else this.batchable = !0 } } else this.batchable = !0 }, e.prototype._compareStyles = function(t, e) { return !(!t || !e) && (t.texture.baseTexture === e.texture.baseTexture && (t.color + t.alpha === e.color + e.alpha && !!t.native == !!e.native)) }, e.prototype.validateBatching = function() { if (this.dirty === this.cacheDirty || !this.graphicsData.length) return !1; for (var t = 0, e = this.graphicsData.length; t < e; t++) { var i = this.graphicsData[t],
                        n = i.fillStyle,
                        r = i.lineStyle; if (n && !n.texture.baseTexture.valid) return !1; if (r && !r.texture.baseTexture.valid) return !1 } return !0 }, e.prototype.packBatches = function() { this.batchDirty++, this.uvsFloat32 = new Float32Array(this.uvs); for (var t = this.batches, e = 0, i = t.length; e < i; e++)
                    for (var n = t[e], r = 0; r < n.size; r++) { var s = n.start + r;
                        this.indicesUint16[s] = this.indicesUint16[s] - n.attribStart } }, e.prototype.isBatchable = function() { if (this.points.length > 131070) return !1; for (var t = this.batches, i = 0; i < t.length; i++)
                    if (t[i].style.native) return !1; return this.points.length < 2 * e.BATCHABLE_SIZE }, e.prototype.buildDrawCalls = function() { for (var t = ++s.e._globalBatch, e = 0; e < this.drawCalls.length; e++) this.drawCalls[e].texArray.clear(), R.push(this.drawCalls[e]);
                this.drawCalls.length = 0; var i = this.colors,
                    n = this.textureIds,
                    r = R.pop();
                r || ((r = new s.f).texArray = new s.k), r.texArray.count = 0, r.start = 0, r.size = 0, r.type = h.e.TRIANGLES; var o = 0,
                    a = null,
                    u = 0,
                    l = !1,
                    c = h.e.TRIANGLES,
                    d = 0;
                this.drawCalls.push(r); for (e = 0; e < this.batches.length; e++) { var p = this.batches[e],
                        f = p.style,
                        m = f.texture.baseTexture;
                    l !== !!f.native && (c = (l = !!f.native) ? h.e.LINES : h.e.TRIANGLES, a = null, o = 8, t++), a !== m && (a = m, m._batchEnabled !== t && (8 === o && (t++, o = 0, r.size > 0 && ((r = R.pop()) || ((r = new s.f).texArray = new s.k), this.drawCalls.push(r)), r.start = d, r.size = 0, r.texArray.count = 0, r.type = c), m.touched = 1, m._batchEnabled = t, m._batchLocation = o, m.wrapMode = 10497, r.texArray.elements[r.texArray.count++] = m, o++)), r.size += p.size, d += p.size, u = m._batchLocation, this.addColors(i, f.color, f.alpha, p.attribSize), this.addTextureIds(n, u, p.attribSize) } s.e._globalBatch = t, this.packAttributes() }, e.prototype.packAttributes = function() { for (var t = this.points, e = this.uvs, i = this.colors, n = this.textureIds, r = new ArrayBuffer(3 * t.length * 4), s = new Float32Array(r), o = new Uint32Array(r), a = 0, h = 0; h < t.length / 2; h++) s[a++] = t[2 * h], s[a++] = t[2 * h + 1], s[a++] = e[2 * h], s[a++] = e[2 * h + 1], o[a++] = i[h], s[a++] = n[h];
                this._buffer.update(r), this._indexBuffer.update(this.indicesUint16) }, e.prototype.processFill = function(t) { t.holes.length ? (this.processHoles(t.holes), f.triangulate(t, this)) : A[t.type].triangulate(t, this) }, e.prototype.processLine = function(t) { w(t, this); for (var e = 0; e < t.holes.length; e++) w(t.holes[e], this) }, e.prototype.processHoles = function(t) { for (var e = 0; e < t.length; e++) { var i = t[e];
                    A[i.type].build(i), i.matrix && this.transformPoints(i.points, i.matrix) } }, e.prototype.calculateBounds = function() { var t = this._bounds,
                    e = k,
                    i = o.d.IDENTITY;
                this._bounds.clear(), e.clear(); for (var n = 0; n < this.graphicsData.length; n++) { var r = this.graphicsData[n],
                        s = r.shape,
                        a = r.type,
                        h = r.lineStyle,
                        u = r.matrix || o.d.IDENTITY,
                        l = 0; if (h && h.visible) { var c = h.alignment;
                        l = h.width, a === o.l.POLY ? l *= .5 + Math.abs(.5 - c) : l *= Math.max(0, c) } if (i !== u && (e.isEmpty() || (t.addBoundsMatrix(e, i), e.clear()), i = u), a === o.l.RECT || a === o.l.RREC) { var d = s;
                        e.addFramePad(d.x, d.y, d.x + d.width, d.y + d.height, l, l) } else if (a === o.l.CIRC) { var p = s;
                        e.addFramePad(p.x, p.y, p.x, p.y, p.radius + l, p.radius + l) } else if (a === o.l.ELIP) { var f = s;
                        e.addFramePad(f.x, f.y, f.x, f.y, f.width + l, f.height + l) } else { var m = s;
                        t.addVerticesMatrix(i, m.points, 0, m.points.length, l, l) } } e.isEmpty() || t.addBoundsMatrix(e, i), t.pad(this.boundsPadding, this.boundsPadding) }, e.prototype.transformPoints = function(t, e) { for (var i = 0; i < t.length / 2; i++) { var n = t[2 * i],
                        r = t[2 * i + 1];
                    t[2 * i] = e.a * n + e.c * r + e.tx, t[2 * i + 1] = e.b * n + e.d * r + e.ty } }, e.prototype.addColors = function(t, e, i, n) { for (var r = (e >> 16) + (65280 & e) + ((255 & e) << 16), s = Object(a.premultiplyTint)(r, i); n-- > 0;) t.push(s) }, e.prototype.addTextureIds = function(t, e, i) { for (; i-- > 0;) t.push(e) }, e.prototype.addUvs = function(t, e, i, n, r, s) { void 0 === s && (s = null); for (var o = 0, a = e.length, h = i.frame; o < r;) { var u = t[2 * (n + o)],
                        l = t[2 * (n + o) + 1]; if (s) { var c = s.a * u + s.c * l + s.tx;
                        l = s.b * u + s.d * l + s.ty, u = c } o++, e.push(u / h.width, l / h.height) } var d = i.baseTexture;
                (h.width < d.width || h.height < d.height) && this.adjustUvs(e, i, a, r) }, e.prototype.adjustUvs = function(t, e, i, n) { for (var r = e.baseTexture, s = 1e-6, o = i + 2 * n, a = e.frame, h = a.width / r.width, u = a.height / r.height, l = a.x / a.width, c = a.y / a.height, d = Math.floor(t[i] + s), p = Math.floor(t[i + 1] + s), f = i + 2; f < o; f += 2) d = Math.min(d, Math.floor(t[f] + s)), p = Math.min(p, Math.floor(t[f + 1] + s));
                l -= d, c -= p; for (f = i; f < o; f += 2) t[f] = (t[f] + l) * h, t[f + 1] = (t[f + 1] + c) * u }, e.BATCHABLE_SIZE = 100, e }(s.g),
        F = function(t) {
            function e() { var e = null !== t && t.apply(this, arguments) || this; return e.width = 0, e.alignment = .5, e.native = !1, e.cap = r.BUTT, e.join = n.MITER, e.miterLimit = 10, e } return p(e, t), e.prototype.clone = function() { var t = new e; return t.color = this.color, t.alpha = this.alpha, t.texture = this.texture, t.matrix = this.matrix, t.visible = this.visible, t.width = this.width, t.alignment = this.alignment, t.native = this.native, t.cap = this.cap, t.join = this.join, t.miterLimit = this.miterLimit, t }, e.prototype.reset = function() { t.prototype.reset.call(this), this.color = 0, this.alignment = .5, this.width = 0, this.native = !1 }, e }(c),
        B = new Float32Array(3),
        j = {},
        U = function(t) {
            function e(e) { void 0 === e && (e = null); var i = t.call(this) || this; return i._geometry = e || new N, i._geometry.refCount++, i.shader = null, i.state = s.E.for2d(), i._fillStyle = new c, i._lineStyle = new F, i._matrix = null, i._holeMode = !1, i.currentPath = null, i.batches = [], i.batchTint = -1, i.batchDirty = -1, i.vertexData = null, i.pluginName = "batch", i._transformID = -1, i.tint = 16777215, i.blendMode = h.b.NORMAL, i } return p(e, t), Object.defineProperty(e.prototype, "geometry", { get: function() { return this._geometry }, enumerable: !1, configurable: !0 }), e.prototype.clone = function() { return this.finishPoly(), new e(this._geometry) }, Object.defineProperty(e.prototype, "blendMode", { get: function() { return this.state.blendMode }, set: function(t) { this.state.blendMode = t }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "tint", { get: function() { return this._tint }, set: function(t) { this._tint = t }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "fill", { get: function() { return this._fillStyle }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "line", { get: function() { return this._lineStyle }, enumerable: !1, configurable: !0 }), e.prototype.lineStyle = function(t) { if (void 0 === t && (t = null), "number" == typeof t) { var e = arguments;
                    t = { width: e[0] || 0, color: e[1] || 0, alpha: e[2] !== undefined ? e[2] : 1, alignment: e[3] !== undefined ? e[3] : .5, native: !!e[4] } } return this.lineTextureStyle(t) }, e.prototype.lineTextureStyle = function(t) { if ("number" == typeof t) { Object(a.deprecation)("v5.2.0", "Please use object-based options for Graphics#lineTextureStyle"); var e = arguments,
                        i = e[0],
                        o = e[1],
                        h = e[2],
                        u = e[3],
                        l = e[4],
                        c = e[5],
                        d = e[6];
                    t = { width: i, texture: o, color: h, alpha: u, matrix: l, alignment: c, native: d }, Object.keys(t).forEach((function(e) { return t[e] === undefined && delete t[e] })) } t = Object.assign({ width: 0, texture: s.G.WHITE, color: t && t.texture ? 16777215 : 0, alpha: 1, matrix: null, alignment: .5, native: !1, cap: r.BUTT, join: n.MITER, miterLimit: 10 }, t), this.currentPath && this.startPoly(); var p = t.width > 0 && t.alpha > 0; return p ? (t.matrix && (t.matrix = t.matrix.clone(), t.matrix.invert()), Object.assign(this._lineStyle, { visible: p }, t)) : this._lineStyle.reset(), this }, e.prototype.startPoly = function() { if (this.currentPath) { var t = this.currentPath.points,
                        e = this.currentPath.points.length;
                    e > 2 && (this.drawShape(this.currentPath), this.currentPath = new o.h, this.currentPath.closeStroke = !1, this.currentPath.points.push(t[e - 2], t[e - 1])) } else this.currentPath = new o.h, this.currentPath.closeStroke = !1 }, e.prototype.finishPoly = function() { this.currentPath && (this.currentPath.points.length > 2 ? (this.drawShape(this.currentPath), this.currentPath = null) : this.currentPath.points.length = 0) }, e.prototype.moveTo = function(t, e) { return this.startPoly(), this.currentPath.points[0] = t, this.currentPath.points[1] = e, this }, e.prototype.lineTo = function(t, e) { this.currentPath || this.moveTo(0, 0); var i = this.currentPath.points,
                    n = i[i.length - 2],
                    r = i[i.length - 1]; return n === t && r === e || i.push(t, e), this }, e.prototype._initCurve = function(t, e) { void 0 === t && (t = 0), void 0 === e && (e = 0), this.currentPath ? 0 === this.currentPath.points.length && (this.currentPath.points = [t, e]) : this.moveTo(t, e) }, e.prototype.quadraticCurveTo = function(t, e, i, n) { this._initCurve(); var r = this.currentPath.points; return 0 === r.length && this.moveTo(0, 0), C.curveTo(t, e, i, n, r), this }, e.prototype.bezierCurveTo = function(t, e, i, n, r, s) { return this._initCurve(), P.curveTo(t, e, i, n, r, s, this.currentPath.points), this }, e.prototype.arcTo = function(t, e, i, n, r) { this._initCurve(t, e); var s = this.currentPath.points,
                    o = E.curveTo(t, e, i, n, r, s); if (o) { var a = o.cx,
                        h = o.cy,
                        u = o.radius,
                        l = o.startAngle,
                        c = o.endAngle,
                        d = o.anticlockwise;
                    this.arc(a, h, u, l, c, d) } return this }, e.prototype.arc = function(t, e, i, n, r, s) { if (void 0 === s && (s = !1), n === r) return this; if (!s && r <= n ? r += o.f : s && n <= r && (n += o.f), 0 === r - n) return this; var a = t + Math.cos(n) * i,
                    h = e + Math.sin(n) * i,
                    u = this._geometry.closePointEps,
                    l = this.currentPath ? this.currentPath.points : null; if (l) { var c = Math.abs(l[l.length - 2] - a),
                        d = Math.abs(l[l.length - 1] - h);
                    c < u && d < u || l.push(a, h) } else this.moveTo(a, h), l = this.currentPath.points; return E.arc(a, h, t, e, i, n, r, s, l), this }, e.prototype.beginFill = function(t, e) { return void 0 === t && (t = 0), void 0 === e && (e = 1), this.beginTextureFill({ texture: s.G.WHITE, color: t, alpha: e }) }, e.prototype.beginTextureFill = function(t) { if (t instanceof s.G) { Object(a.deprecation)("v5.2.0", "Please use object-based options for Graphics#beginTextureFill"); var e = arguments,
                        i = e[0],
                        n = e[1],
                        r = e[2],
                        o = e[3];
                    t = { texture: i, color: n, alpha: r, matrix: o }, Object.keys(t).forEach((function(e) { return t[e] === undefined && delete t[e] })) } t = Object.assign({ texture: s.G.WHITE, color: 16777215, alpha: 1, matrix: null }, t), this.currentPath && this.startPoly(); var h = t.alpha > 0; return h ? (t.matrix && (t.matrix = t.matrix.clone(), t.matrix.invert()), Object.assign(this._fillStyle, { visible: h }, t)) : this._fillStyle.reset(), this }, e.prototype.endFill = function() { return this.finishPoly(), this._fillStyle.reset(), this }, e.prototype.drawRect = function(t, e, i, n) { return this.drawShape(new o.j(t, e, i, n)) }, e.prototype.drawRoundedRect = function(t, e, i, n, r) { return this.drawShape(new o.k(t, e, i, n, r)) }, e.prototype.drawCircle = function(t, e, i) { return this.drawShape(new o.a(t, e, i)) }, e.prototype.drawEllipse = function(t, e, i, n) { return this.drawShape(new o.c(t, e, i, n)) }, e.prototype.drawPolygon = function() { for (var t, e = arguments, i = [], n = 0; n < arguments.length; n++) i[n] = e[n]; var r = !0,
                    s = i[0];
                s.points ? (r = s.closeStroke, t = s.points) : t = Array.isArray(i[0]) ? i[0] : i; var a = new o.h(t); return a.closeStroke = r, this.drawShape(a), this }, e.prototype.drawShape = function(t) { return this._holeMode ? this._geometry.drawHole(t, this._matrix) : this._geometry.drawShape(t, this._fillStyle.clone(), this._lineStyle.clone(), this._matrix), this }, e.prototype.drawStar = function(t, e, i, n, r, s) { return void 0 === s && (s = 0), this.drawPolygon(new S(t, e, i, n, r, s)) }, e.prototype.clear = function() { return this._geometry.clear(), this._lineStyle.reset(), this._fillStyle.reset(), this._boundsID++, this._matrix = null, this._holeMode = !1, this.currentPath = null, this }, e.prototype.isFastRect = function() { var t = this._geometry.graphicsData; return 1 === t.length && t[0].shape.type === o.l.RECT && !(t[0].lineStyle.visible && t[0].lineStyle.width) }, e.prototype._render = function(t) { this.finishPoly(); var e = this._geometry,
                    i = t.context.supports.uint32Indices;
                e.updateBatches(i), e.batchable ? (this.batchDirty !== e.batchDirty && this._populateBatches(), this._renderBatched(t)) : (t.batch.flush(), this._renderDirect(t)) }, e.prototype._populateBatches = function() { var t = this._geometry,
                    e = this.blendMode,
                    i = t.batches.length;
                this.batchTint = -1, this._transformID = -1, this.batchDirty = t.batchDirty, this.batches.length = i, this.vertexData = new Float32Array(t.points); for (var n = 0; n < i; n++) { var r = t.batches[n],
                        s = r.style.color,
                        o = new Float32Array(this.vertexData.buffer, 4 * r.attribStart * 2, 2 * r.attribSize),
                        h = new Float32Array(t.uvsFloat32.buffer, 4 * r.attribStart * 2, 2 * r.attribSize),
                        u = { vertexData: o, blendMode: e, indices: new Uint16Array(t.indicesUint16.buffer, 2 * r.start, r.size), uvs: h, _batchRGB: Object(a.hex2rgb)(s), _tintRGB: s, _texture: r.style.texture, alpha: r.style.alpha, worldAlpha: 1 };
                    this.batches[n] = u } }, e.prototype._renderBatched = function(t) { if (this.batches.length) { t.batch.setObjectRenderer(t.plugins[this.pluginName]), this.calculateVertices(), this.calculateTints(); for (var e = 0, i = this.batches.length; e < i; e++) { var n = this.batches[e];
                        n.worldAlpha = this.worldAlpha * n.alpha, t.plugins[this.pluginName].render(n) } } }, e.prototype._renderDirect = function(t) { var e = this._resolveDirectShader(t),
                    i = this._geometry,
                    n = this.tint,
                    r = this.worldAlpha,
                    s = e.uniforms,
                    o = i.drawCalls;
                s.translationMatrix = this.transform.worldTransform, s.tint[0] = (n >> 16 & 255) / 255 * r, s.tint[1] = (n >> 8 & 255) / 255 * r, s.tint[2] = (255 & n) / 255 * r, s.tint[3] = r, t.shader.bind(e), t.geometry.bind(i, e), t.state.set(this.state); for (var a = 0, h = o.length; a < h; a++) this._renderDrawCallDirect(t, i.drawCalls[a]) }, e.prototype._renderDrawCallDirect = function(t, e) { for (var i = e.texArray, n = e.type, r = e.size, s = e.start, o = i.count, a = 0; a < o; a++) t.texture.bind(i.elements[a], a);
                t.geometry.draw(n, r, s) }, e.prototype._resolveDirectShader = function(t) { var e = this.shader,
                    i = this.pluginName; if (!e) { if (!j[i]) { for (var n = new Int32Array(16), r = 0; r < 16; r++) n[r] = r; var a = { tint: new Float32Array([1, 1, 1, 1]), translationMatrix: new o.d, "default": s.J.from({ uSamplers: n }, !0) },
                            h = t.plugins[i]._shader.program;
                        j[i] = new s.C(h, a) } e = j[i] } return e }, e.prototype._calculateBounds = function() { this.finishPoly(); var t = this._geometry; if (t.graphicsData.length) { var e = t.bounds,
                        i = e.minX,
                        n = e.minY,
                        r = e.maxX,
                        s = e.maxY;
                    this._bounds.addFrame(this.transform, i, n, r, s) } }, e.prototype.containsPoint = function(t) { return this.worldTransform.applyInverse(t, e._TEMP_POINT), this._geometry.containsPoint(e._TEMP_POINT) }, e.prototype.calculateTints = function() { if (this.batchTint !== this.tint) { this.batchTint = this.tint; for (var t = Object(a.hex2rgb)(this.tint, B), e = 0; e < this.batches.length; e++) { var i = this.batches[e],
                            n = i._batchRGB,
                            r = (t[0] * n[0] * 255 << 16) + (t[1] * n[1] * 255 << 8) + (0 | t[2] * n[2] * 255);
                        i._tintRGB = (r >> 16) + (65280 & r) + ((255 & r) << 16) } } }, e.prototype.calculateVertices = function() { var t = this.transform._worldID; if (this._transformID !== t) { this._transformID = t; for (var e = this.transform.worldTransform, i = e.a, n = e.b, r = e.c, s = e.d, o = e.tx, a = e.ty, h = this._geometry.points, u = this.vertexData, l = 0, c = 0; c < h.length; c += 2) { var d = h[c],
                            p = h[c + 1];
                        u[l++] = i * d + r * p + o, u[l++] = s * p + n * d + a } } }, e.prototype.closePath = function() { var t = this.currentPath; return t && (t.closeStroke = !0), this }, e.prototype.setMatrix = function(t) { return this._matrix = t, this }, e.prototype.beginHole = function() { return this.finishPoly(), this._holeMode = !0, this }, e.prototype.endHole = function() { return this.finishPoly(), this._holeMode = !1, this }, e.prototype.destroy = function(e) { t.prototype.destroy.call(this, e), this._geometry.refCount--, 0 === this._geometry.refCount && this._geometry.dispose(), this._matrix = null, this.currentPath = null, this._lineStyle.destroy(), this._lineStyle = null, this._fillStyle.destroy(), this._fillStyle = null, this._geometry = null, this.shader = null, this.vertexData = null, this.batches.length = 0, this.batches = null, t.prototype.destroy.call(this, e) }, e._TEMP_POINT = new o.g, e }(u.b) }, function(t, e, i) { "use strict";
    i.d(e, "a", (function() { return p })), i.d(e, "b", (function() { return h })), i.d(e, "c", (function() { return u })), i.d(e, "d", (function() { return d })), i.d(e, "e", (function() { return c })), i.d(e, "f", (function() { return l })); var n = i(10),
        r = i(2),
        s = i(5),
        o = function(t, e) { return (o = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) })(t, e) };

    function a(t, e) {
        function i() { this.constructor = t } o(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i) } var h = function(t) {
            function e(e, i, n, r) { void 0 === e && (e = 100), void 0 === i && (i = 100), void 0 === n && (n = 10), void 0 === r && (r = 10); var s = t.call(this) || this; return s.segWidth = n, s.segHeight = r, s.width = e, s.height = i, s.build(), s } return a(e, t), e.prototype.build = function() { for (var t = this.segWidth * this.segHeight, e = [], i = [], n = [], r = this.segWidth - 1, s = this.segHeight - 1, o = this.width / r, a = this.height / s, h = 0; h < t; h++) { var u = h % this.segWidth,
                        l = h / this.segWidth | 0;
                    e.push(u * o, l * a), i.push(u / r, l / s) } var c = r * s; for (h = 0; h < c; h++) { var d = h % r,
                        p = h / r | 0,
                        f = p * this.segWidth + d,
                        m = p * this.segWidth + d + 1,
                        g = (p + 1) * this.segWidth + d,
                        y = (p + 1) * this.segWidth + d + 1;
                    n.push(f, m, g, m, y, g) } this.buffers[0].data = new Float32Array(e), this.buffers[1].data = new Float32Array(i), this.indexBuffer.data = new Uint16Array(n), this.buffers[0].update(), this.buffers[1].update(), this.indexBuffer.update() }, e }(n.c),
        u = function(t) {
            function e(e, i, n) { void 0 === e && (e = 200), void 0 === n && (n = 0); var r = t.call(this, new Float32Array(4 * i.length), new Float32Array(4 * i.length), new Uint16Array(6 * (i.length - 1))) || this; return r.points = i, r._width = e, r.textureScale = n, r.build(), r } return a(e, t), Object.defineProperty(e.prototype, "width", { get: function() { return this._width }, enumerable: !1, configurable: !0 }), e.prototype.build = function() { var t = this.points; if (t) { var e = this.getBuffer("aVertexPosition"),
                        i = this.getBuffer("aTextureCoord"),
                        n = this.getIndex(); if (!(t.length < 1)) { e.data.length / 4 !== t.length && (e.data = new Float32Array(4 * t.length), i.data = new Float32Array(4 * t.length), n.data = new Uint16Array(6 * (t.length - 1))); var r = i.data,
                            s = n.data;
                        r[0] = 0, r[1] = 0, r[2] = 0, r[3] = 1; for (var o = 0, a = t[0], h = this._width * this.textureScale, u = t.length, l = 0; l < u; l++) { var c = 4 * l; if (this.textureScale > 0) { var d = a.x - t[l].x,
                                    p = a.y - t[l].y,
                                    f = Math.sqrt(d * d + p * p);
                                a = t[l], o += f / h } else o = l / (u - 1);
                            r[c] = o, r[c + 1] = 0, r[c + 2] = o, r[c + 3] = 1 } var m = 0; for (l = 0; l < u - 1; l++) { c = 2 * l;
                            s[m++] = c, s[m++] = c + 1, s[m++] = c + 2, s[m++] = c + 2, s[m++] = c + 1, s[m++] = c + 3 } i.update(), n.update(), this.updateVertices() } } }, e.prototype.updateVertices = function() { var t = this.points; if (!(t.length < 1)) { for (var e, i = t[0], n = 0, r = 0, s = this.buffers[0].data, o = t.length, a = 0; a < o; a++) { var h = t[a],
                            u = 4 * a;
                        r = -((e = a < t.length - 1 ? t[a + 1] : h).x - i.x), n = e.y - i.y; var l = Math.sqrt(n * n + r * r),
                            c = this.textureScale > 0 ? this.textureScale * this._width / 2 : this._width / 2;
                        n /= l, r /= l, n *= c, r *= c, s[u] = h.x + n, s[u + 1] = h.y + r, s[u + 2] = h.x - n, s[u + 3] = h.y - r, i = h } this.buffers[0].update() } }, e.prototype.update = function() { this.textureScale > 0 ? this.build() : this.updateVertices() }, e }(n.c),
        l = function(t) {
            function e(e, i, s) { void 0 === s && (s = 0); var o = this,
                    a = new u(e.height, i, s),
                    h = new n.d(e); return s > 0 && (e.baseTexture.wrapMode = r.q.REPEAT), (o = t.call(this, a, h) || this).autoUpdate = !0, o } return a(e, t), e.prototype._render = function(e) { var i = this.geometry;
                (this.autoUpdate || i._width !== this.shader.texture.height) && (i._width = this.shader.texture.height, i.update()), t.prototype._render.call(this, e) }, e }(n.a),
        c = function(t) {
            function e(e, i, r) { var o = this,
                    a = new h(e.width, e.height, i, r),
                    u = new n.d(s.G.WHITE); return (o = t.call(this, a, u) || this).texture = e, o } return a(e, t), e.prototype.textureUpdated = function() { this._textureID = this.shader.texture._updateID; var t = this.geometry;
                t.width = this.shader.texture.width, t.height = this.shader.texture.height, t.build() }, Object.defineProperty(e.prototype, "texture", { get: function() { return this.shader.texture }, set: function(t) { this.shader.texture !== t && (this.shader.texture = t, this._textureID = -1, t.baseTexture.valid ? this.textureUpdated() : t.once("update", this.textureUpdated, this)) }, enumerable: !1, configurable: !0 }), e.prototype._render = function(e) { this._textureID !== this.shader.texture._updateID && this.textureUpdated(), t.prototype._render.call(this, e) }, e }(n.a),
        d = function(t) {
            function e(e, i, r, o, a) { void 0 === e && (e = s.G.EMPTY); var h = this,
                    u = new n.c(i, r, o);
                u.getBuffer("aVertexPosition")["static"] = !1; var l = new n.d(e); return (h = t.call(this, u, l, null, a) || this).autoUpdate = !0, h } return a(e, t), Object.defineProperty(e.prototype, "vertices", { get: function() { return this.geometry.getBuffer("aVertexPosition").data }, set: function(t) { this.geometry.getBuffer("aVertexPosition").data = t }, enumerable: !1, configurable: !0 }), e.prototype._render = function(e) { this.autoUpdate && this.geometry.getBuffer("aVertexPosition").update(), t.prototype._render.call(this, e) }, e }(n.a),
        p = function(t) {
            function e(e, i, n, r, o) { void 0 === i && (i = 10), void 0 === n && (n = 10), void 0 === r && (r = 10), void 0 === o && (o = 10); var a = t.call(this, s.G.WHITE, 4, 4) || this; return a._origWidth = e.orig.width, a._origHeight = e.orig.height, a._width = a._origWidth, a._height = a._origHeight, a._leftWidth = i, a._rightWidth = r, a._topHeight = n, a._bottomHeight = o, a.texture = e, a } return a(e, t), e.prototype.textureUpdated = function() { this._textureID = this.shader.texture._updateID, this._refresh() }, Object.defineProperty(e.prototype, "vertices", { get: function() { return this.geometry.getBuffer("aVertexPosition").data }, set: function(t) { this.geometry.getBuffer("aVertexPosition").data = t }, enumerable: !1, configurable: !0 }), e.prototype.updateHorizontalVertices = function() { var t = this.vertices,
                    e = this._getMinScale();
                t[9] = t[11] = t[13] = t[15] = this._topHeight * e, t[17] = t[19] = t[21] = t[23] = this._height - this._bottomHeight * e, t[25] = t[27] = t[29] = t[31] = this._height }, e.prototype.updateVerticalVertices = function() { var t = this.vertices,
                    e = this._getMinScale();
                t[2] = t[10] = t[18] = t[26] = this._leftWidth * e, t[4] = t[12] = t[20] = t[28] = this._width - this._rightWidth * e, t[6] = t[14] = t[22] = t[30] = this._width }, e.prototype._getMinScale = function() { var t = this._leftWidth + this._rightWidth,
                    e = this._width > t ? 1 : this._width / t,
                    i = this._topHeight + this._bottomHeight,
                    n = this._height > i ? 1 : this._height / i; return Math.min(e, n) }, Object.defineProperty(e.prototype, "width", { get: function() { return this._width }, set: function(t) { this._width = t, this._refresh() }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "height", { get: function() { return this._height }, set: function(t) { this._height = t, this._refresh() }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "leftWidth", { get: function() { return this._leftWidth }, set: function(t) { this._leftWidth = t, this._refresh() }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "rightWidth", { get: function() { return this._rightWidth }, set: function(t) { this._rightWidth = t, this._refresh() }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "topHeight", { get: function() { return this._topHeight }, set: function(t) { this._topHeight = t, this._refresh() }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "bottomHeight", { get: function() { return this._bottomHeight }, set: function(t) { this._bottomHeight = t, this._refresh() }, enumerable: !1, configurable: !0 }), e.prototype._refresh = function() { var t = this.texture,
                    e = this.geometry.buffers[1].data;
                this._origWidth = t.orig.width, this._origHeight = t.orig.height; var i = 1 / this._origWidth,
                    n = 1 / this._origHeight;
                e[0] = e[8] = e[16] = e[24] = 0, e[1] = e[3] = e[5] = e[7] = 0, e[6] = e[14] = e[22] = e[30] = 1, e[25] = e[27] = e[29] = e[31] = 1, e[2] = e[10] = e[18] = e[26] = i * this._leftWidth, e[4] = e[12] = e[20] = e[28] = 1 - i * this._rightWidth, e[9] = e[11] = e[13] = e[15] = n * this._topHeight, e[17] = e[19] = e[21] = e[23] = 1 - n * this._bottomHeight, this.updateHorizontalVertices(), this.updateVerticalVertices(), this.geometry.buffers[0].update(), this.geometry.buffers[1].update() }, e }(c) }, function(t, e, i) { "use strict";
    i.d(e, "a", (function() { return l })), i.d(e, "b", (function() { return d })); var n = i(2),
        r = i(7),
        s = i(1),
        o = i(5),
        a = i(4),
        h = function(t, e) { return (h = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) })(t, e) };

    function u(t, e) {
        function i() { this.constructor = t } h(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i) } var l = function(t) {
            function e(e, i, r, s) { void 0 === e && (e = 1500), void 0 === r && (r = 16384), void 0 === s && (s = !1); var o = t.call(this) || this; return r > 16384 && (r = 16384), o._properties = [!1, !0, !1, !1, !1], o._maxSize = e, o._batchSize = r, o._buffers = null, o._bufferUpdateIDs = [], o._updateID = 0, o.interactiveChildren = !1, o.blendMode = n.b.NORMAL, o.autoResize = s, o.roundPixels = !0, o.baseTexture = null, o.setProperties(i), o._tint = 0, o.tintRgb = new Float32Array(4), o.tint = 16777215, o } return u(e, t), e.prototype.setProperties = function(t) { t && (this._properties[0] = "vertices" in t || "scale" in t ? !!t.vertices || !!t.scale : this._properties[0], this._properties[1] = "position" in t ? !!t.position : this._properties[1], this._properties[2] = "rotation" in t ? !!t.rotation : this._properties[2], this._properties[3] = "uvs" in t ? !!t.uvs : this._properties[3], this._properties[4] = "tint" in t || "alpha" in t ? !!t.tint || !!t.alpha : this._properties[4]) }, e.prototype.updateTransform = function() { this.displayObjectUpdateTransform() }, Object.defineProperty(e.prototype, "tint", { get: function() { return this._tint }, set: function(t) { this._tint = t, Object(s.hex2rgb)(t, this.tintRgb) }, enumerable: !1, configurable: !0 }), e.prototype.render = function(t) { var e = this;
                this.visible && !(this.worldAlpha <= 0) && this.children.length && this.renderable && (this.baseTexture || (this.baseTexture = this.children[0]._texture.baseTexture, this.baseTexture.valid || this.baseTexture.once("update", (function() { return e.onChildrenChange(0) }))), t.batch.setObjectRenderer(t.plugins.particle), t.plugins.particle.render(this)) }, e.prototype.onChildrenChange = function(t) { for (var e = Math.floor(t / this._batchSize); this._bufferUpdateIDs.length < e;) this._bufferUpdateIDs.push(0);
                this._bufferUpdateIDs[e] = ++this._updateID }, e.prototype.dispose = function() { if (this._buffers) { for (var t = 0; t < this._buffers.length; ++t) this._buffers[t].destroy();
                    this._buffers = null } }, e.prototype.destroy = function(e) { t.prototype.destroy.call(this, e), this.dispose(), this._properties = null, this._buffers = null, this._bufferUpdateIDs = null }, e }(r.b),
        c = function() {
            function t(t, e, i) { this.geometry = new o.s, this.indexBuffer = null, this.size = i, this.dynamicProperties = [], this.staticProperties = []; for (var r = 0; r < t.length; ++r) { var s = t[r];
                    s = { attributeName: s.attributeName, size: s.size, uploadFunction: s.uploadFunction, type: s.type || n.p.FLOAT, offset: s.offset }, e[r] ? this.dynamicProperties.push(s) : this.staticProperties.push(s) } this.staticStride = 0, this.staticBuffer = null, this.staticData = null, this.staticDataUint32 = null, this.dynamicStride = 0, this.dynamicBuffer = null, this.dynamicData = null, this.dynamicDataUint32 = null, this._updateID = 0, this.initBuffers() } return t.prototype.initBuffers = function() { var t = this.geometry,
                    e = 0;
                this.indexBuffer = new o.l(Object(s.createIndicesForQuads)(this.size), !0, !0), t.addIndex(this.indexBuffer), this.dynamicStride = 0; for (var i = 0; i < this.dynamicProperties.length; ++i) {
                    (u = this.dynamicProperties[i]).offset = e, e += u.size, this.dynamicStride += u.size } var r = new ArrayBuffer(this.size * this.dynamicStride * 4 * 4);
                this.dynamicData = new Float32Array(r), this.dynamicDataUint32 = new Uint32Array(r), this.dynamicBuffer = new o.l(this.dynamicData, !1, !1); var a = 0;
                this.staticStride = 0; for (i = 0; i < this.staticProperties.length; ++i) {
                    (u = this.staticProperties[i]).offset = a, a += u.size, this.staticStride += u.size } var h = new ArrayBuffer(this.size * this.staticStride * 4 * 4);
                this.staticData = new Float32Array(h), this.staticDataUint32 = new Uint32Array(h), this.staticBuffer = new o.l(this.staticData, !0, !1); for (i = 0; i < this.dynamicProperties.length; ++i) { var u = this.dynamicProperties[i];
                    t.addAttribute(u.attributeName, this.dynamicBuffer, 0, u.type === n.p.UNSIGNED_BYTE, u.type, 4 * this.dynamicStride, 4 * u.offset) } for (i = 0; i < this.staticProperties.length; ++i) { u = this.staticProperties[i];
                    t.addAttribute(u.attributeName, this.staticBuffer, 0, u.type === n.p.UNSIGNED_BYTE, u.type, 4 * this.staticStride, 4 * u.offset) } }, t.prototype.uploadDynamic = function(t, e, i) { for (var r = 0; r < this.dynamicProperties.length; r++) { var s = this.dynamicProperties[r];
                    s.uploadFunction(t, e, i, s.type === n.p.UNSIGNED_BYTE ? this.dynamicDataUint32 : this.dynamicData, this.dynamicStride, s.offset) } this.dynamicBuffer._updateID++ }, t.prototype.uploadStatic = function(t, e, i) { for (var r = 0; r < this.staticProperties.length; r++) { var s = this.staticProperties[r];
                    s.uploadFunction(t, e, i, s.type === n.p.UNSIGNED_BYTE ? this.staticDataUint32 : this.staticData, this.staticStride, s.offset) } this.staticBuffer._updateID++ }, t.prototype.destroy = function() { this.indexBuffer = null, this.dynamicProperties = null, this.dynamicBuffer = null, this.dynamicData = null, this.dynamicDataUint32 = null, this.staticProperties = null, this.staticBuffer = null, this.staticData = null, this.staticDataUint32 = null, this.geometry.destroy() }, t }(),
        d = function(t) {
            function e(e) { var i = t.call(this, e) || this; return i.shader = null, i.properties = null, i.tempMatrix = new a.d, i.properties = [{ attributeName: "aVertexPosition", size: 2, uploadFunction: i.uploadVertices, offset: 0 }, { attributeName: "aPositionCoord", size: 2, uploadFunction: i.uploadPosition, offset: 0 }, { attributeName: "aRotation", size: 1, uploadFunction: i.uploadRotation, offset: 0 }, { attributeName: "aTextureCoord", size: 2, uploadFunction: i.uploadUvs, offset: 0 }, { attributeName: "aColor", size: 1, type: n.p.UNSIGNED_BYTE, uploadFunction: i.uploadTint, offset: 0 }], i.shader = o.C.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n", "varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}", {}), i.state = o.E.for2d(), i } return u(e, t), e.prototype.render = function(t) { var e = t.children,
                    i = t._maxSize,
                    n = t._batchSize,
                    r = this.renderer,
                    o = e.length; if (0 !== o) { o > i && !t.autoResize && (o = i); var a = t._buffers;
                    a || (a = t._buffers = this.generateBuffers(t)); var h = e[0]._texture.baseTexture;
                    this.state.blendMode = Object(s.correctBlendMode)(t.blendMode, h.alphaMode), r.state.set(this.state); var u = r.gl,
                        l = t.worldTransform.copyTo(this.tempMatrix);
                    l.prepend(r.globalUniforms.uniforms.projectionMatrix), this.shader.uniforms.translationMatrix = l.toArray(!0), this.shader.uniforms.uColor = Object(s.premultiplyRgba)(t.tintRgb, t.worldAlpha, this.shader.uniforms.uColor, h.alphaMode), this.shader.uniforms.uSampler = h, this.renderer.shader.bind(this.shader); for (var c = !1, d = 0, p = 0; d < o; d += n, p += 1) { var f = o - d;
                        f > n && (f = n), p >= a.length && a.push(this._generateOneMoreBuffer(t)); var m = a[p];
                        m.uploadDynamic(e, d, f); var g = t._bufferUpdateIDs[p] || 0;
                        (c = c || m._updateID < g) && (m._updateID = t._updateID, m.uploadStatic(e, d, f)), r.geometry.bind(m.geometry), u.drawElements(u.TRIANGLES, 6 * f, u.UNSIGNED_SHORT, 0) } } }, e.prototype.generateBuffers = function(t) { for (var e = [], i = t._maxSize, n = t._batchSize, r = t._properties, s = 0; s < i; s += n) e.push(new c(this.properties, r, n)); return e }, e.prototype._generateOneMoreBuffer = function(t) { var e = t._batchSize,
                    i = t._properties; return new c(this.properties, i, e) }, e.prototype.uploadVertices = function(t, e, i, n, r, s) { for (var o = 0, a = 0, h = 0, u = 0, l = 0; l < i; ++l) { var c = t[e + l],
                        d = c._texture,
                        p = c.scale.x,
                        f = c.scale.y,
                        m = d.trim,
                        g = d.orig;
                    m ? (o = (a = m.x - c.anchor.x * g.width) + m.width, h = (u = m.y - c.anchor.y * g.height) + m.height) : (o = g.width * (1 - c.anchor.x), a = g.width * -c.anchor.x, h = g.height * (1 - c.anchor.y), u = g.height * -c.anchor.y), n[s] = a * p, n[s + 1] = u * f, n[s + r] = o * p, n[s + r + 1] = u * f, n[s + 2 * r] = o * p, n[s + 2 * r + 1] = h * f, n[s + 3 * r] = a * p, n[s + 3 * r + 1] = h * f, s += 4 * r } }, e.prototype.uploadPosition = function(t, e, i, n, r, s) { for (var o = 0; o < i; o++) { var a = t[e + o].position;
                    n[s] = a.x, n[s + 1] = a.y, n[s + r] = a.x, n[s + r + 1] = a.y, n[s + 2 * r] = a.x, n[s + 2 * r + 1] = a.y, n[s + 3 * r] = a.x, n[s + 3 * r + 1] = a.y, s += 4 * r } }, e.prototype.uploadRotation = function(t, e, i, n, r, s) { for (var o = 0; o < i; o++) { var a = t[e + o].rotation;
                    n[s] = a, n[s + r] = a, n[s + 2 * r] = a, n[s + 3 * r] = a, s += 4 * r } }, e.prototype.uploadUvs = function(t, e, i, n, r, s) { for (var o = 0; o < i; ++o) { var a = t[e + o]._texture._uvs;
                    a ? (n[s] = a.x0, n[s + 1] = a.y0, n[s + r] = a.x1, n[s + r + 1] = a.y1, n[s + 2 * r] = a.x2, n[s + 2 * r + 1] = a.y2, n[s + 3 * r] = a.x3, n[s + 3 * r + 1] = a.y3, s += 4 * r) : (n[s] = 0, n[s + 1] = 0, n[s + r] = 0, n[s + r + 1] = 0, n[s + 2 * r] = 0, n[s + 2 * r + 1] = 0, n[s + 3 * r] = 0, n[s + 3 * r + 1] = 0, s += 4 * r) } }, e.prototype.uploadTint = function(t, e, i, n, r, o) { for (var a = 0; a < i; ++a) { var h = t[e + a],
                        u = h._texture.baseTexture.alphaMode > 0,
                        l = h.alpha,
                        c = l < 1 && u ? Object(s.premultiplyTint)(h._tintRGB, l) : h._tintRGB + (255 * l << 24);
                    n[o] = c, n[o + r] = c, n[o + 2 * r] = c, n[o + 3 * r] = c, o += 4 * r } }, e.prototype.destroy = function() { t.prototype.destroy.call(this), this.shader && (this.shader.destroy(), this.shader = null), this.tempMatrix = null }, e }(o.v) }, function(t, e, i) { "use strict";
    i.d(e, "a", (function() { return v })), i.d(e, "b", (function() { return l })), i.d(e, "c", (function() { return w })), i.d(e, "d", (function() { return T })); var n = i(6),
        r = i(5),
        s = i(17),
        o = i(9),
        a = i(7),
        h = i(14);
    n.b.UPLOADS_PER_FRAME = 4; var u = function(t, e) { return (u = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) })(t, e) }; var l = function() {
        function t(t) { this.maxItemsPerFrame = t, this.itemsLeft = 0 } return t.prototype.beginFrame = function() { this.itemsLeft = this.maxItemsPerFrame }, t.prototype.allowedToUpload = function() { return this.itemsLeft-- > 0 }, t }();

    function c(t, e) { var i = !1; if (t && t._textures && t._textures.length)
            for (var n = 0; n < t._textures.length; n++)
                if (t._textures[n] instanceof r.G) { var s = t._textures[n].baseTexture; - 1 === e.indexOf(s) && (e.push(s), i = !0) } return i }

    function d(t, e) { if (t.baseTexture instanceof r.e) { var i = t.baseTexture; return -1 === e.indexOf(i) && e.push(i), !0 } return !1 }

    function p(t, e) { if (t._texture && t._texture instanceof r.G) { var i = t._texture.baseTexture; return -1 === e.indexOf(i) && e.push(i), !0 } return !1 }

    function f(t, e) { return e instanceof h.b && (e.updateText(!0), !0) }

    function m(t, e) { if (e instanceof h.d) { var i = e.toFontString(); return h.c.measureFont(i), !0 } return !1 }

    function g(t, e) { if (t instanceof h.b) {-1 === e.indexOf(t.style) && e.push(t.style), -1 === e.indexOf(t) && e.push(t); var i = t._texture.baseTexture; return -1 === e.indexOf(i) && e.push(i), !0 } return !1 }

    function y(t, e) { return t instanceof h.d && (-1 === e.indexOf(t) && e.push(t), !0) } var v = function() {
        function t(t) { var e = this;
            this.limiter = new l(n.b.UPLOADS_PER_FRAME), this.renderer = t, this.uploadHookHelper = null, this.queue = [], this.addHooks = [], this.uploadHooks = [], this.completes = [], this.ticking = !1, this.delayedTick = function() { e.queue && e.prepareItems() }, this.registerFindHook(g), this.registerFindHook(y), this.registerFindHook(c), this.registerFindHook(d), this.registerFindHook(p), this.registerUploadHook(f), this.registerUploadHook(m) } return t.prototype.upload = function(t, e) { "function" == typeof t && (e = t, t = null), t && this.add(t), this.queue.length ? (e && this.completes.push(e), this.ticking || (this.ticking = !0, o.a.system.addOnce(this.tick, this, o.c.UTILITY))) : e && e() }, t.prototype.tick = function() { setTimeout(this.delayedTick, 0) }, t.prototype.prepareItems = function() { for (this.limiter.beginFrame(); this.queue.length && this.limiter.allowedToUpload();) { var t = this.queue[0],
                    e = !1; if (t && !t._destroyed)
                    for (var i = 0, n = this.uploadHooks.length; i < n; i++)
                        if (this.uploadHooks[i](this.uploadHookHelper, t)) { this.queue.shift(), e = !0; break } e || this.queue.shift() } if (this.queue.length) o.a.system.addOnce(this.tick, this, o.c.UTILITY);
            else { this.ticking = !1; var r = this.completes.slice(0);
                this.completes.length = 0; for (i = 0, n = r.length; i < n; i++) r[i]() } }, t.prototype.registerFindHook = function(t) { return t && this.addHooks.push(t), this }, t.prototype.registerUploadHook = function(t) { return t && this.uploadHooks.push(t), this }, t.prototype.add = function(t) { for (var e = 0, i = this.addHooks.length; e < i && !this.addHooks[e](t, this.queue); e++); if (t instanceof a.b)
                for (e = t.children.length - 1; e >= 0; e--) this.add(t.children[e]); return this }, t.prototype.destroy = function() { this.ticking && o.a.system.remove(this.tick, this), this.ticking = !1, this.addHooks = null, this.uploadHooks = null, this.renderer = null, this.completes = null, this.queue = null, this.limiter = null, this.uploadHookHelper = null }, t }();

    function b(t, e) { return e instanceof r.e && (e._glTextures[t.CONTEXT_UID] || t.texture.bind(e), !0) }

    function _(t, e) { if (!(e instanceof s.c)) return !1; var i = e.geometry;
        e.finishPoly(), i.updateBatches(); for (var n = i.batches, r = 0; r < n.length; r++) { var o = n[r].style.texture;
            o && b(t, o.baseTexture) } return i.batchable || t.geometry.bind(i, e._resolveDirectShader(t)), !0 }

    function x(t, e) { return t instanceof s.c && (e.push(t), !0) } var w = function(t) {
            function e(e) { var i = t.call(this, e) || this; return i.uploadHookHelper = i.renderer, i.registerFindHook(x), i.registerUploadHook(b), i.registerUploadHook(_), i } return function(t, e) {
                function i() { this.constructor = t } u(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i) }(e, t), e }(v),
        T = function() {
            function t(t) { this.maxMilliseconds = t, this.frameStart = 0 } return t.prototype.beginFrame = function() { this.frameStart = Date.now() }, t.prototype.allowedToUpload = function() { return Date.now() - this.frameStart < this.maxMilliseconds }, t }() }, function(t, e, i) { "use strict";
    i.d(e, "a", (function() { return c })), i.d(e, "b", (function() { return f })); var n = i(5),
        r = i(4),
        s = i(12),
        o = i(1),
        a = i(2),
        h = function(t, e) { return (h = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) })(t, e) };

    function u(t, e) {
        function i() { this.constructor = t } h(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i) } var l = new r.g,
        c = function(t) {
            function e(e, i, s) { void 0 === i && (i = 100), void 0 === s && (s = 100); var o = t.call(this, e) || this; return o.tileTransform = new r.m, o._width = i, o._height = s, o.uvMatrix = e.uvMatrix || new n.H(e), o.pluginName = "tilingSprite", o.uvRespectAnchor = !1, o } return u(e, t), Object.defineProperty(e.prototype, "clampMargin", { get: function() { return this.uvMatrix.clampMargin }, set: function(t) { this.uvMatrix.clampMargin = t, this.uvMatrix.update(!0) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "tileScale", { get: function() { return this.tileTransform.scale }, set: function(t) { this.tileTransform.scale.copyFrom(t) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "tilePosition", { get: function() { return this.tileTransform.position }, set: function(t) { this.tileTransform.position.copyFrom(t) }, enumerable: !1, configurable: !0 }), e.prototype._onTextureUpdate = function() { this.uvMatrix && (this.uvMatrix.texture = this._texture), this._cachedTint = 16777215 }, e.prototype._render = function(t) { var e = this._texture;
                e && e.valid && (this.tileTransform.updateLocalTransform(), this.uvMatrix.update(), t.batch.setObjectRenderer(t.plugins[this.pluginName]), t.plugins[this.pluginName].render(this)) }, e.prototype._calculateBounds = function() { var t = this._width * -this._anchor._x,
                    e = this._height * -this._anchor._y,
                    i = this._width * (1 - this._anchor._x),
                    n = this._height * (1 - this._anchor._y);
                this._bounds.addFrame(this.transform, t, e, i, n) }, e.prototype.getLocalBounds = function(e) { return 0 === this.children.length ? (this._bounds.minX = this._width * -this._anchor._x, this._bounds.minY = this._height * -this._anchor._y, this._bounds.maxX = this._width * (1 - this._anchor._x), this._bounds.maxY = this._height * (1 - this._anchor._y), e || (this._localBoundsRect || (this._localBoundsRect = new r.j), e = this._localBoundsRect), this._bounds.getRectangle(e)) : t.prototype.getLocalBounds.call(this, e) }, e.prototype.containsPoint = function(t) { this.worldTransform.applyInverse(t, l); var e = this._width,
                    i = this._height,
                    n = -e * this.anchor._x; if (l.x >= n && l.x < n + e) { var r = -i * this.anchor._y; if (l.y >= r && l.y < r + i) return !0 } return !1 }, e.prototype.destroy = function(e) { t.prototype.destroy.call(this, e), this.tileTransform = null, this.uvMatrix = null }, e.from = function(t, i) { return "number" == typeof i && (Object(o.deprecation)("5.3.0", "TilingSprite.from use options instead of width and height args"), i = { width: i, height: arguments[2] }), new e(n.G.from(t, i), i.width, i.height) }, Object.defineProperty(e.prototype, "width", { get: function() { return this._width }, set: function(t) { this._width = t }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "height", { get: function() { return this._height }, set: function(t) { this._height = t }, enumerable: !1, configurable: !0 }), e }(s.a),
        d = "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",
        p = new r.d,
        f = function(t) {
            function e(e) { var i = t.call(this, e) || this,
                    r = { globals: i.renderer.globalUniforms }; return i.shader = n.C.from(d, "varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord - floor(vTextureCoord - uClampOffset);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture2D(uSampler, coord);\n    gl_FragColor = texSample * uColor;\n}\n", r), i.simpleShader = n.C.from(d, "varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n", r), i.quad = new n.y, i.state = n.E.for2d(), i } return u(e, t), e.prototype.render = function(t) { var e = this.renderer,
                    i = this.quad,
                    n = i.vertices;
                n[0] = n[6] = t._width * -t.anchor.x, n[1] = n[3] = t._height * -t.anchor.y, n[2] = n[4] = t._width * (1 - t.anchor.x), n[5] = n[7] = t._height * (1 - t.anchor.y), t.uvRespectAnchor && ((n = i.uvs)[0] = n[6] = -t.anchor.x, n[1] = n[3] = -t.anchor.y, n[2] = n[4] = 1 - t.anchor.x, n[5] = n[7] = 1 - t.anchor.y), i.invalidate(); var r = t._texture,
                    s = r.baseTexture,
                    h = t.tileTransform.localTransform,
                    u = t.uvMatrix,
                    l = s.isPowerOfTwo && r.frame.width === s.width && r.frame.height === s.height;
                l && (s._glTextures[e.CONTEXT_UID] ? l = s.wrapMode !== a.q.CLAMP : s.wrapMode === a.q.CLAMP && (s.wrapMode = a.q.REPEAT)); var c = l ? this.simpleShader : this.shader,
                    d = r.width,
                    f = r.height,
                    m = t._width,
                    g = t._height;
                p.set(h.a * d / m, h.b * d / g, h.c * f / m, h.d * f / g, h.tx / m, h.ty / g), p.invert(), l ? p.prepend(u.mapCoord) : (c.uniforms.uMapCoord = u.mapCoord.toArray(!0), c.uniforms.uClampFrame = u.uClampFrame, c.uniforms.uClampOffset = u.uClampOffset), c.uniforms.uTransform = p.toArray(!0), c.uniforms.uColor = Object(o.premultiplyTintToRgba)(t.tint, t.worldAlpha, c.uniforms.uColor, s.alphaMode), c.uniforms.translationMatrix = t.transform.worldTransform.toArray(!0), c.uniforms.uSampler = r, e.shader.bind(c), e.geometry.bind(i), this.state.blendMode = Object(o.correctBlendMode)(t.blendMode, s.alphaMode), e.state.set(this.state), e.geometry.draw(this.renderer.gl.TRIANGLES, 6, 0) }, e }(n.v) }, function(t, e) { var i;
    i = function() { return this }(); try { i = i || new Function("return this")() } catch (n) { "object" == typeof window && (i = window) } t.exports = i }, function(t, e, i) { "use strict"; var n = i(36),
        r = i(38);

    function s() { this.protocol = null, this.slashes = null, this.auth = null, this.host = null, this.port = null, this.hostname = null, this.hash = null, this.search = null, this.query = null, this.pathname = null, this.path = null, this.href = null } e.parse = b, e.resolve = function(t, e) { return b(t, !1, !0).resolve(e) }, e.resolveObject = function(t, e) { return t ? b(t, !1, !0).resolveObject(e) : e }, e.format = function(t) { r.isString(t) && (t = b(t)); return t instanceof s ? t.format() : s.prototype.format.call(t) }, e.Url = s; var o = /^([a-z0-9.+-]+:)/i,
        a = /:[0-9]*$/,
        h = /^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,
        u = ["{", "}", "|", "\\", "^", "`"].concat(["<", ">", '"', "`", " ", "\r", "\n", "\t"]),
        l = ["'"].concat(u),
        c = ["%", "/", "?", ";", "#"].concat(l),
        d = ["/", "?", "#"],
        p = /^[+a-z0-9A-Z_-]{0,63}$/,
        f = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,
        m = { javascript: !0, "javascript:": !0 },
        g = { javascript: !0, "javascript:": !0 },
        y = { http: !0, https: !0, ftp: !0, gopher: !0, file: !0, "http:": !0, "https:": !0, "ftp:": !0, "gopher:": !0, "file:": !0 },
        v = i(39);

    function b(t, e, i) { if (t && r.isObject(t) && t instanceof s) return t; var n = new s; return n.parse(t, e, i), n } s.prototype.parse = function(t, e, i) { if (!r.isString(t)) throw new TypeError("Parameter 'url' must be a string, not " + typeof t); var s = t.indexOf("?"),
            a = -1 !== s && s < t.indexOf("#") ? "?" : "#",
            u = t.split(a);
        u[0] = u[0].replace(/\\/g, "/"); var b = t = u.join(a); if (b = b.trim(), !i && 1 === t.split("#").length) { var _ = h.exec(b); if (_) return this.path = b, this.href = b, this.pathname = _[1], _[2] ? (this.search = _[2], this.query = e ? v.parse(this.search.substr(1)) : this.search.substr(1)) : e && (this.search = "", this.query = {}), this } var x = o.exec(b); if (x) { var w = (x = x[0]).toLowerCase();
            this.protocol = w, b = b.substr(x.length) } if (i || x || b.match(/^\/\/[^@\/]+@[^@\/]+/)) { var T = "//" === b.substr(0, 2);!T || x && g[x] || (b = b.substr(2), this.slashes = !0) } if (!g[x] && (T || x && !y[x])) { for (var S, E, P = -1, C = 0; C < d.length; C++) {-1 !== (O = b.indexOf(d[C])) && (-1 === P || O < P) && (P = O) } - 1 !== (E = -1 === P ? b.lastIndexOf("@") : b.lastIndexOf("@", P)) && (S = b.slice(0, E), b = b.slice(E + 1), this.auth = decodeURIComponent(S)), P = -1; for (C = 0; C < c.length; C++) { var O; - 1 !== (O = b.indexOf(c[C])) && (-1 === P || O < P) && (P = O) } - 1 === P && (P = b.length), this.host = b.slice(0, P), b = b.slice(P), this.parseHost(), this.hostname = this.hostname || ""; var A = "[" === this.hostname[0] && "]" === this.hostname[this.hostname.length - 1]; if (!A)
                for (var I = this.hostname.split(/\./), R = (C = 0, I.length); C < R; C++) { var M = I[C]; if (M && !M.match(p)) { for (var L = "", D = 0, k = M.length; D < k; D++) M.charCodeAt(D) > 127 ? L += "x" : L += M[D]; if (!L.match(p)) { var N = I.slice(0, C),
                                F = I.slice(C + 1),
                                B = M.match(f);
                            B && (N.push(B[1]), F.unshift(B[2])), F.length && (b = "/" + F.join(".") + b), this.hostname = N.join("."); break } } } this.hostname.length > 255 ? this.hostname = "" : this.hostname = this.hostname.toLowerCase(), A || (this.hostname = n.toASCII(this.hostname)); var j = this.port ? ":" + this.port : "",
                U = this.hostname || "";
            this.host = U + j, this.href += this.host, A && (this.hostname = this.hostname.substr(1, this.hostname.length - 2), "/" !== b[0] && (b = "/" + b)) } if (!m[w])
            for (C = 0, R = l.length; C < R; C++) { var G = l[C]; if (-1 !== b.indexOf(G)) { var X = encodeURIComponent(G);
                    X === G && (X = escape(G)), b = b.split(G).join(X) } }
        var H = b.indexOf("#"); - 1 !== H && (this.hash = b.substr(H), b = b.slice(0, H)); var z = b.indexOf("?"); if (-1 !== z ? (this.search = b.substr(z), this.query = b.substr(z + 1), e && (this.query = v.parse(this.query)), b = b.slice(0, z)) : e && (this.search = "", this.query = {}), b && (this.pathname = b), y[w] && this.hostname && !this.pathname && (this.pathname = "/"), this.pathname || this.search) { j = this.pathname || ""; var V = this.search || "";
            this.path = j + V } return this.href = this.format(), this }, s.prototype.format = function() { var t = this.auth || "";
        t && (t = (t = encodeURIComponent(t)).replace(/%3A/i, ":"), t += "@"); var e = this.protocol || "",
            i = this.pathname || "",
            n = this.hash || "",
            s = !1,
            o = "";
        this.host ? s = t + this.host : this.hostname && (s = t + (-1 === this.hostname.indexOf(":") ? this.hostname : "[" + this.hostname + "]"), this.port && (s += ":" + this.port)), this.query && r.isObject(this.query) && Object.keys(this.query).length && (o = v.stringify(this.query)); var a = this.search || o && "?" + o || ""; return e && ":" !== e.substr(-1) && (e += ":"), this.slashes || (!e || y[e]) && !1 !== s ? (s = "//" + (s || ""), i && "/" !== i.charAt(0) && (i = "/" + i)) : s || (s = ""), n && "#" !== n.charAt(0) && (n = "#" + n), a && "?" !== a.charAt(0) && (a = "?" + a), e + s + (i = i.replace(/[?#]/g, (function(t) { return encodeURIComponent(t) }))) + (a = a.replace("#", "%23")) + n }, s.prototype.resolve = function(t) { return this.resolveObject(b(t, !1, !0)).format() }, s.prototype.resolveObject = function(t) { if (r.isString(t)) { var e = new s;
            e.parse(t, !1, !0), t = e } for (var i = new s, n = Object.keys(this), o = 0; o < n.length; o++) { var a = n[o];
            i[a] = this[a] } if (i.hash = t.hash, "" === t.href) return i.href = i.format(), i; if (t.slashes && !t.protocol) { for (var h = Object.keys(t), u = 0; u < h.length; u++) { var l = h[u]; "protocol" !== l && (i[l] = t[l]) } return y[i.protocol] && i.hostname && !i.pathname && (i.path = i.pathname = "/"), i.href = i.format(), i } if (t.protocol && t.protocol !== i.protocol) { if (!y[t.protocol]) { for (var c = Object.keys(t), d = 0; d < c.length; d++) { var p = c[d];
                    i[p] = t[p] } return i.href = i.format(), i } if (i.protocol = t.protocol, t.host || g[t.protocol]) i.pathname = t.pathname;
            else { for (var f = (t.pathname || "").split("/"); f.length && !(t.host = f.shift()););
                t.host || (t.host = ""), t.hostname || (t.hostname = ""), "" !== f[0] && f.unshift(""), f.length < 2 && f.unshift(""), i.pathname = f.join("/") } if (i.search = t.search, i.query = t.query, i.host = t.host || "", i.auth = t.auth, i.hostname = t.hostname || t.host, i.port = t.port, i.pathname || i.search) { var m = i.pathname || "",
                    v = i.search || "";
                i.path = m + v } return i.slashes = i.slashes || t.slashes, i.href = i.format(), i } var b = i.pathname && "/" === i.pathname.charAt(0),
            _ = t.host || t.pathname && "/" === t.pathname.charAt(0),
            x = _ || b || i.host && t.pathname,
            w = x,
            T = i.pathname && i.pathname.split("/") || [],
            S = (f = t.pathname && t.pathname.split("/") || [], i.protocol && !y[i.protocol]); if (S && (i.hostname = "", i.port = null, i.host && ("" === T[0] ? T[0] = i.host : T.unshift(i.host)), i.host = "", t.protocol && (t.hostname = null, t.port = null, t.host && ("" === f[0] ? f[0] = t.host : f.unshift(t.host)), t.host = null), x = x && ("" === f[0] || "" === T[0])), _) i.host = t.host || "" === t.host ? t.host : i.host, i.hostname = t.hostname || "" === t.hostname ? t.hostname : i.hostname, i.search = t.search, i.query = t.query, T = f;
        else if (f.length) T || (T = []), T.pop(), T = T.concat(f), i.search = t.search, i.query = t.query;
        else if (!r.isNullOrUndefined(t.search)) { if (S) i.hostname = i.host = T.shift(), (A = !!(i.host && i.host.indexOf("@") > 0) && i.host.split("@")) && (i.auth = A.shift(), i.host = i.hostname = A.shift()); return i.search = t.search, i.query = t.query, r.isNull(i.pathname) && r.isNull(i.search) || (i.path = (i.pathname ? i.pathname : "") + (i.search ? i.search : "")), i.href = i.format(), i } if (!T.length) return i.pathname = null, i.search ? i.path = "/" + i.search : i.path = null, i.href = i.format(), i; for (var E = T.slice(-1)[0], P = (i.host || t.host || T.length > 1) && ("." === E || ".." === E) || "" === E, C = 0, O = T.length; O >= 0; O--) "." === (E = T[O]) ? T.splice(O, 1) : ".." === E ? (T.splice(O, 1), C++) : C && (T.splice(O, 1), C--); if (!x && !w)
            for (; C--; C) T.unshift("..");!x || "" === T[0] || T[0] && "/" === T[0].charAt(0) || T.unshift(""), P && "/" !== T.join("/").substr(-1) && T.push(""); var A, I = "" === T[0] || T[0] && "/" === T[0].charAt(0);
        S && (i.hostname = i.host = I ? "" : T.length ? T.shift() : "", (A = !!(i.host && i.host.indexOf("@") > 0) && i.host.split("@")) && (i.auth = A.shift(), i.host = i.hostname = A.shift())); return (x = x || i.host && T.length) && !I && T.unshift(""), T.length ? i.pathname = T.join("/") : (i.pathname = null, i.path = null), r.isNull(i.pathname) && r.isNull(i.search) || (i.path = (i.pathname ? i.pathname : "") + (i.search ? i.search : "")), i.auth = t.auth || i.auth, i.slashes = i.slashes || t.slashes, i.href = i.format(), i }, s.prototype.parseHost = function() { var t = this.host,
            e = a.exec(t);
        e && (":" !== (e = e[0]) && (this.port = e.substr(1)), t = t.substr(0, t.length - e.length)), t && (this.hostname = t) } }, function(t, e, i) { "use strict";
    t.exports = function(t, e) { e = e || {}; for (var i = { key: ["source", "protocol", "authority", "userInfo", "user", "password", "host", "port", "relative", "path", "directory", "file", "query", "anchor"], q: { name: "queryKey", parser: /(?:^|&)([^&=]*)=?([^&]*)/g }, parser: { strict: /^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/, loose: /^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/ } }, n = i.parser[e.strictMode ? "strict" : "loose"].exec(t), r = {}, s = 14; s--;) r[i.key[s]] = n[s] || ""; return r[i.q.name] = {}, r[i.key[12]].replace(i.q.parser, (function(t, e, n) { e && (r[i.q.name][e] = n) })), r } }, function(t, e, i) { "use strict";
    t.exports = s, t.exports.isMobile = s, t.exports["default"] = s; var n = /(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,
        r = /(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;

    function s(t) { t || (t = {}); var e = t.ua; if (e || "undefined" == typeof navigator || (e = navigator.userAgent), e && e.headers && "string" == typeof e.headers["user-agent"] && (e = e.headers["user-agent"]), "string" != typeof e) return !1; var i = t.tablet ? r.test(e) : n.test(e); return !i && t.tablet && t.featureDetect && navigator && navigator.maxTouchPoints > 1 && -1 !== e.indexOf("Macintosh") && -1 !== e.indexOf("Safari") && (i = !0), i } }, function(t, e, i) {
    (function(e) { t.exports = function i(t, e, n) {
            function r(o, a) { if (!e[o]) { if (!t[o]) { if (s) return s(o, !0); var h = new Error("Cannot find module '" + o + "'"); throw h.code = "MODULE_NOT_FOUND", h } var u = e[o] = { exports: {} };
                    t[o][0].call(u.exports, (function(e) { var i = t[o][1][e]; return r(i || e) }), u, u.exports, i, t, e, n) } return e[o].exports } for (var s = !1, o = 0; o < n.length; o++) r(n[o]); return r }({ 1: [function(t, i, n) {
                (function(t) { "use strict"; var e, n, r = t.MutationObserver || t.WebKitMutationObserver; if (r) { var s = 0,
                            o = new r(l),
                            a = t.document.createTextNode("");
                        o.observe(a, { characterData: !0 }), e = function() { a.data = s = ++s % 2 } } else if (t.setImmediate || "undefined" == typeof t.MessageChannel) e = "document" in t && "onreadystatechange" in t.document.createElement("script") ? function() { var e = t.document.createElement("script");
                        e.onreadystatechange = function() { l(), e.onreadystatechange = null, e.parentNode.removeChild(e), e = null }, t.document.documentElement.appendChild(e) } : function() { setTimeout(l, 0) };
                    else { var h = new t.MessageChannel;
                        h.port1.onmessage = l, e = function() { h.port2.postMessage(0) } } var u = [];

                    function l() { var t, e;
                        n = !0; for (var i = u.length; i;) { for (e = u, u = [], t = -1; ++t < i;) e[t]();
                            i = u.length } n = !1 }

                    function c(t) { 1 !== u.push(t) || n || e() } i.exports = c }).call(this, void 0 !== e ? e : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}) }, {}], 2: [function(t, e, i) { "use strict"; var n = t(1);

                function r() {} var s = {},
                    o = ["REJECTED"],
                    a = ["FULFILLED"],
                    h = ["PENDING"];

                function u(t) { if ("function" != typeof t) throw new TypeError("resolver must be a function");
                    this.state = h, this.queue = [], this.outcome = void 0, t !== r && p(this, t) }

                function l(t, e, i) { this.promise = t, "function" == typeof e && (this.onFulfilled = e, this.callFulfilled = this.otherCallFulfilled), "function" == typeof i && (this.onRejected = i, this.callRejected = this.otherCallRejected) }

                function c(t, e, i) { n((function() { var n; try { n = e(i) } catch (r) { return s.reject(t, r) } n === t ? s.reject(t, new TypeError("Cannot resolve promise with itself")) : s.resolve(t, n) })) }

                function d(t) { var e = t && t.then; if (t && ("object" == typeof t || "function" == typeof t) && "function" == typeof e) return function() { e.apply(t, arguments) } }

                function p(t, e) { var i = !1;

                    function n(e) { i || (i = !0, s.reject(t, e)) }

                    function r(e) { i || (i = !0, s.resolve(t, e)) }

                    function o() { e(r, n) } var a = f(o); "error" === a.status && n(a.value) }

                function f(t, e) { var i = {}; try { i.value = t(e), i.status = "success" } catch (n) { i.status = "error", i.value = n } return i }

                function m(t) { return t instanceof this ? t : s.resolve(new this(r), t) }

                function g(t) { var e = new this(r); return s.reject(e, t) }

                function y(t) { var e = this; if ("[object Array]" !== Object.prototype.toString.call(t)) return this.reject(new TypeError("must be an array")); var i = t.length,
                        n = !1; if (!i) return this.resolve([]); for (var o = new Array(i), a = 0, h = -1, u = new this(r); ++h < i;) l(t[h], h); return u;

                    function l(t, r) {
                        function h(t) { o[r] = t, ++a !== i || n || (n = !0, s.resolve(u, o)) } e.resolve(t).then(h, (function(t) { n || (n = !0, s.reject(u, t)) })) } }

                function v(t) { var e = this; if ("[object Array]" !== Object.prototype.toString.call(t)) return this.reject(new TypeError("must be an array")); var i = t.length,
                        n = !1; if (!i) return this.resolve([]); for (var o = -1, a = new this(r); ++o < i;) h(t[o]); return a;

                    function h(t) { e.resolve(t).then((function(t) { n || (n = !0, s.resolve(a, t)) }), (function(t) { n || (n = !0, s.reject(a, t)) })) } } e.exports = u, u.prototype["catch"] = function(t) { return this.then(null, t) }, u.prototype.then = function(t, e) { if ("function" != typeof t && this.state === a || "function" != typeof e && this.state === o) return this; var i = new this.constructor(r); return this.state !== h ? c(i, this.state === a ? t : e, this.outcome) : this.queue.push(new l(i, t, e)), i }, l.prototype.callFulfilled = function(t) { s.resolve(this.promise, t) }, l.prototype.otherCallFulfilled = function(t) { c(this.promise, this.onFulfilled, t) }, l.prototype.callRejected = function(t) { s.reject(this.promise, t) }, l.prototype.otherCallRejected = function(t) { c(this.promise, this.onRejected, t) }, s.resolve = function(t, e) { var i = f(d, e); if ("error" === i.status) return s.reject(t, i.value); var n = i.value; if (n) p(t, n);
                    else { t.state = a, t.outcome = e; for (var r = -1, o = t.queue.length; ++r < o;) t.queue[r].callFulfilled(e) } return t }, s.reject = function(t, e) { t.state = o, t.outcome = e; for (var i = -1, n = t.queue.length; ++i < n;) t.queue[i].callRejected(e); return t }, u.resolve = m, u.reject = g, u.all = y, u.race = v }, { 1: 1 }], 3: [function(t, i, n) {
                (function(e) { "use strict"; "function" != typeof e.Promise && (e.Promise = t(2)) }).call(this, void 0 !== e ? e : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}) }, { 2: 2 }], 4: [function(t, e, i) { "use strict"; var n = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) { return typeof t } : function(t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t };

                function r(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }

                function s() { try { if ("undefined" != typeof indexedDB) return indexedDB; if ("undefined" != typeof webkitIndexedDB) return webkitIndexedDB; if ("undefined" != typeof mozIndexedDB) return mozIndexedDB; if ("undefined" != typeof OIndexedDB) return OIndexedDB; if ("undefined" != typeof msIndexedDB) return msIndexedDB } catch (t) { return } } var o = s();

                function a() { try { if (!o || !o.open) return !1; var t = "undefined" != typeof openDatabase && /(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent) && !/BlackBerry/.test(navigator.platform),
                            e = "function" == typeof fetch && -1 !== fetch.toString().indexOf("[native code"); return (!t || e) && "undefined" != typeof indexedDB && "undefined" != typeof IDBKeyRange } catch (i) { return !1 } }

                function h(t, e) { t = t || [], e = e || {}; try { return new Blob(t, e) } catch (r) { if ("TypeError" !== r.name) throw r; for (var i = new("undefined" != typeof BlobBuilder ? BlobBuilder : "undefined" != typeof MSBlobBuilder ? MSBlobBuilder : "undefined" != typeof MozBlobBuilder ? MozBlobBuilder : WebKitBlobBuilder), n = 0; n < t.length; n += 1) i.append(t[n]); return i.getBlob(e.type) } } "undefined" == typeof Promise && t(3); var u = Promise;

                function l(t, e) { e && t.then((function(t) { e(null, t) }), (function(t) { e(t) })) }

                function c(t, e, i) { "function" == typeof e && t.then(e), "function" == typeof i && t["catch"](i) }

                function d(t) { return "string" != typeof t && (t = String(t)), t }

                function p() { if (arguments.length && "function" == typeof arguments[arguments.length - 1]) return arguments[arguments.length - 1] } var f = "local-forage-detect-blob-support",
                    m = void 0,
                    g = {},
                    y = Object.prototype.toString,
                    v = "readonly",
                    b = "readwrite";

                function _(t) { for (var e = t.length, i = new ArrayBuffer(e), n = new Uint8Array(i), r = 0; r < e; r++) n[r] = t.charCodeAt(r); return i }

                function x(t) { return new u((function(e) { var i = t.transaction(f, b),
                            n = h([""]);
                        i.objectStore(f).put(n, "key"), i.onabort = function(t) { t.preventDefault(), t.stopPropagation(), e(!1) }, i.oncomplete = function() { var t = navigator.userAgent.match(/Chrome\/(\d+)/),
                                i = navigator.userAgent.match(/Edge\//);
                            e(i || !t || parseInt(t[1], 10) >= 43) } }))["catch"]((function() { return !1 })) }

                function w(t) { return "boolean" == typeof m ? u.resolve(m) : x(t).then((function(t) { return m = t })) }

                function T(t) { var e = g[t.name],
                        i = {};
                    i.promise = new u((function(t, e) { i.resolve = t, i.reject = e })), e.deferredOperations.push(i), e.dbReady ? e.dbReady = e.dbReady.then((function() { return i.promise })) : e.dbReady = i.promise }

                function S(t) { var e = g[t.name].deferredOperations.pop(); if (e) return e.resolve(), e.promise }

                function E(t, e) { var i = g[t.name].deferredOperations.pop(); if (i) return i.reject(e), i.promise }

                function P(t, e) { return new u((function(i, n) { if (g[t.name] = g[t.name] || N(), t.db) { if (!e) return i(t.db);
                            T(t), t.db.close() } var r = [t.name];
                        e && r.push(t.version); var s = o.open.apply(o, r);
                        e && (s.onupgradeneeded = function(e) { var i = s.result; try { i.createObjectStore(t.storeName), e.oldVersion <= 1 && i.createObjectStore(f) } catch (n) { if ("ConstraintError" !== n.name) throw n } }), s.onerror = function(t) { t.preventDefault(), n(s.error) }, s.onsuccess = function() { i(s.result), S(t) } })) }

                function C(t) { return P(t, !1) }

                function O(t) { return P(t, !0) }

                function A(t, e) { if (!t.db) return !0; var i = !t.db.objectStoreNames.contains(t.storeName),
                        n = t.version < t.db.version,
                        r = t.version > t.db.version; if (n && (t.version, t.version = t.db.version), r || i) { if (i) { var s = t.db.version + 1;
                            s > t.version && (t.version = s) } return !0 } return !1 }

                function I(t) { return new u((function(e, i) { var n = new FileReader;
                        n.onerror = i, n.onloadend = function(i) { var n = btoa(i.target.result || "");
                            e({ __local_forage_encoded_blob: !0, data: n, type: t.type }) }, n.readAsBinaryString(t) })) }

                function R(t) { return h([_(atob(t.data))], { type: t.type }) }

                function M(t) { return t && t.__local_forage_encoded_blob }

                function L(t) { var e = this,
                        i = e._initReady().then((function() { var t = g[e._dbInfo.name]; if (t && t.dbReady) return t.dbReady })); return c(i, t, t), i }

                function D(t) { T(t); for (var e = g[t.name], i = e.forages, n = 0; n < i.length; n++) { var r = i[n];
                        r._dbInfo.db && (r._dbInfo.db.close(), r._dbInfo.db = null) } return t.db = null, C(t).then((function(e) { return t.db = e, A(t) ? O(t) : e })).then((function(n) { t.db = e.db = n; for (var r = 0; r < i.length; r++) i[r]._dbInfo.db = n }))["catch"]((function(e) { throw E(t, e), e })) }

                function k(t, e, i, n) { n === undefined && (n = 1); try { var r = t.db.transaction(t.storeName, e);
                        i(null, r) } catch (s) { if (n > 0 && (!t.db || "InvalidStateError" === s.name || "NotFoundError" === s.name)) return u.resolve().then((function() { if (!t.db || "NotFoundError" === s.name && !t.db.objectStoreNames.contains(t.storeName) && t.version <= t.db.version) return t.db && (t.version = t.db.version + 1), O(t) })).then((function() { return D(t).then((function() { k(t, e, i, n - 1) })) }))["catch"](i);
                        i(s) } }

                function N() { return { forages: [], db: null, dbReady: null, deferredOperations: [] } }

                function F(t) { var e = this,
                        i = { db: null }; if (t)
                        for (var n in t) i[n] = t[n]; var r = g[i.name];
                    r || (r = N(), g[i.name] = r), r.forages.push(e), e._initReady || (e._initReady = e.ready, e.ready = L); var s = [];

                    function o() { return u.resolve() } for (var a = 0; a < r.forages.length; a++) { var h = r.forages[a];
                        h !== e && s.push(h._initReady()["catch"](o)) } var l = r.forages.slice(0); return u.all(s).then((function() { return i.db = r.db, C(i) })).then((function(t) { return i.db = t, A(i, e._defaultConfig.version) ? O(i) : t })).then((function(t) { i.db = r.db = t, e._dbInfo = i; for (var n = 0; n < l.length; n++) { var s = l[n];
                            s !== e && (s._dbInfo.db = i.db, s._dbInfo.version = i.version) } })) }

                function B(t, e) { var i = this;
                    t = d(t); var n = new u((function(e, n) { i.ready().then((function() { k(i._dbInfo, v, (function(r, s) { if (r) return n(r); try { var o = s.objectStore(i._dbInfo.storeName).get(t);
                                    o.onsuccess = function() { var t = o.result;
                                        t === undefined && (t = null), M(t) && (t = R(t)), e(t) }, o.onerror = function() { n(o.error) } } catch (a) { n(a) } })) }))["catch"](n) })); return l(n, e), n }

                function j(t, e) { var i = this,
                        n = new u((function(e, n) { i.ready().then((function() { k(i._dbInfo, v, (function(r, s) { if (r) return n(r); try { var o = s.objectStore(i._dbInfo.storeName).openCursor(),
                                            a = 1;
                                        o.onsuccess = function() { var i = o.result; if (i) { var n = i.value;
                                                M(n) && (n = R(n)); var r = t(n, i.key, a++);
                                                void 0 !== r ? e(r) : i["continue"]() } else e() }, o.onerror = function() { n(o.error) } } catch (h) { n(h) } })) }))["catch"](n) })); return l(n, e), n }

                function U(t, e, i) { var n = this;
                    t = d(t); var r = new u((function(i, r) { var s;
                        n.ready().then((function() { return s = n._dbInfo, "[object Blob]" === y.call(e) ? w(s.db).then((function(t) { return t ? e : I(e) })) : e })).then((function(e) { k(n._dbInfo, b, (function(s, o) { if (s) return r(s); try { var a = o.objectStore(n._dbInfo.storeName);
                                    null === e && (e = undefined); var h = a.put(e, t);
                                    o.oncomplete = function() { e === undefined && (e = null), i(e) }, o.onabort = o.onerror = function() { var t = h.error ? h.error : h.transaction.error;
                                        r(t) } } catch (u) { r(u) } })) }))["catch"](r) })); return l(r, i), r }

                function G(t, e) { var i = this;
                    t = d(t); var n = new u((function(e, n) { i.ready().then((function() { k(i._dbInfo, b, (function(r, s) { if (r) return n(r); try { var o = s.objectStore(i._dbInfo.storeName)["delete"](t);
                                    s.oncomplete = function() { e() }, s.onerror = function() { n(o.error) }, s.onabort = function() { var t = o.error ? o.error : o.transaction.error;
                                        n(t) } } catch (a) { n(a) } })) }))["catch"](n) })); return l(n, e), n }

                function X(t) { var e = this,
                        i = new u((function(t, i) { e.ready().then((function() { k(e._dbInfo, b, (function(n, r) { if (n) return i(n); try { var s = r.objectStore(e._dbInfo.storeName).clear();
                                        r.oncomplete = function() { t() }, r.onabort = r.onerror = function() { var t = s.error ? s.error : s.transaction.error;
                                            i(t) } } catch (o) { i(o) } })) }))["catch"](i) })); return l(i, t), i }

                function H(t) { var e = this,
                        i = new u((function(t, i) { e.ready().then((function() { k(e._dbInfo, v, (function(n, r) { if (n) return i(n); try { var s = r.objectStore(e._dbInfo.storeName).count();
                                        s.onsuccess = function() { t(s.result) }, s.onerror = function() { i(s.error) } } catch (o) { i(o) } })) }))["catch"](i) })); return l(i, t), i }

                function z(t, e) { var i = this,
                        n = new u((function(e, n) { t < 0 ? e(null) : i.ready().then((function() { k(i._dbInfo, v, (function(r, s) { if (r) return n(r); try { var o = s.objectStore(i._dbInfo.storeName),
                                            a = !1,
                                            h = o.openKeyCursor();
                                        h.onsuccess = function() { var i = h.result;
                                            i ? 0 === t || a ? e(i.key) : (a = !0, i.advance(t)) : e(null) }, h.onerror = function() { n(h.error) } } catch (u) { n(u) } })) }))["catch"](n) })); return l(n, e), n }

                function V(t) { var e = this,
                        i = new u((function(t, i) { e.ready().then((function() { k(e._dbInfo, v, (function(n, r) { if (n) return i(n); try { var s = r.objectStore(e._dbInfo.storeName).openKeyCursor(),
                                            o = [];
                                        s.onsuccess = function() { var e = s.result;
                                            e ? (o.push(e.key), e["continue"]()) : t(o) }, s.onerror = function() { i(s.error) } } catch (a) { i(a) } })) }))["catch"](i) })); return l(i, t), i }

                function W(t, e) { e = p.apply(this, arguments); var i = this.config();
                    (t = "function" != typeof t && t || {}).name || (t.name = t.name || i.name, t.storeName = t.storeName || i.storeName); var n, r = this; if (t.name) { var s = t.name === i.name && r._dbInfo.db ? u.resolve(r._dbInfo.db) : C(t).then((function(e) { var i = g[t.name],
                                n = i.forages;
                            i.db = e; for (var r = 0; r < n.length; r++) n[r]._dbInfo.db = e; return e }));
                        n = t.storeName ? s.then((function(e) { if (e.objectStoreNames.contains(t.storeName)) { var i = e.version + 1;
                                T(t); var n = g[t.name],
                                    r = n.forages;
                                e.close(); for (var s = 0; s < r.length; s++) { var a = r[s];
                                    a._dbInfo.db = null, a._dbInfo.version = i } return new u((function(e, n) { var r = o.open(t.name, i);
                                    r.onerror = function(t) { r.result.close(), n(t) }, r.onupgradeneeded = function() { r.result.deleteObjectStore(t.storeName) }, r.onsuccess = function() { var t = r.result;
                                        t.close(), e(t) } })).then((function(t) { n.db = t; for (var e = 0; e < r.length; e++) { var i = r[e];
                                        i._dbInfo.db = t, S(i._dbInfo) } }))["catch"]((function(e) { throw (E(t, e) || u.resolve())["catch"]((function() {})), e })) } })) : s.then((function(e) { T(t); var i = g[t.name],
                                n = i.forages;
                            e.close(); for (var r = 0; r < n.length; r++) n[r]._dbInfo.db = null; return new u((function(e, i) { var n = o.deleteDatabase(t.name);
                                n.onerror = n.onblocked = function(t) { var e = n.result;
                                    e && e.close(), i(t) }, n.onsuccess = function() { var t = n.result;
                                    t && t.close(), e(t) } })).then((function(t) { i.db = t; for (var e = 0; e < n.length; e++) S(n[e]._dbInfo) }))["catch"]((function(e) { throw (E(t, e) || u.resolve())["catch"]((function() {})), e })) })) } else n = u.reject("Invalid arguments"); return l(n, e), n } var Y = { _driver: "asyncStorage", _initStorage: F, _support: a(), iterate: j, getItem: B, setItem: U, removeItem: G, clear: X, length: H, key: z, keys: V, dropInstance: W };

                function K() { return "function" == typeof openDatabase } var q = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",
                    Q = "~~local_forage_type~",
                    $ = /^~~local_forage_type~([^~]+)~/,
                    Z = "__lfsc__:",
                    J = Z.length,
                    tt = "arbf",
                    et = "blob",
                    it = "si08",
                    nt = "ui08",
                    rt = "uic8",
                    st = "si16",
                    ot = "si32",
                    at = "ur16",
                    ht = "ui32",
                    ut = "fl32",
                    lt = "fl64",
                    ct = J + tt.length,
                    dt = Object.prototype.toString;

                function pt(t) { var e, i, n, r, s, o = .75 * t.length,
                        a = t.length,
                        h = 0; "=" === t[t.length - 1] && (o--, "=" === t[t.length - 2] && o--); var u = new ArrayBuffer(o),
                        l = new Uint8Array(u); for (e = 0; e < a; e += 4) i = q.indexOf(t[e]), n = q.indexOf(t[e + 1]), r = q.indexOf(t[e + 2]), s = q.indexOf(t[e + 3]), l[h++] = i << 2 | n >> 4, l[h++] = (15 & n) << 4 | r >> 2, l[h++] = (3 & r) << 6 | 63 & s; return u }

                function ft(t) { var e, i = new Uint8Array(t),
                        n = ""; for (e = 0; e < i.length; e += 3) n += q[i[e] >> 2], n += q[(3 & i[e]) << 4 | i[e + 1] >> 4], n += q[(15 & i[e + 1]) << 2 | i[e + 2] >> 6], n += q[63 & i[e + 2]]; return i.length % 3 == 2 ? n = n.substring(0, n.length - 1) + "=" : i.length % 3 == 1 && (n = n.substring(0, n.length - 2) + "=="), n }

                function mt(t, e) { var i = ""; if (t && (i = dt.call(t)), t && ("[object ArrayBuffer]" === i || t.buffer && "[object ArrayBuffer]" === dt.call(t.buffer))) { var n, r = Z;
                        t instanceof ArrayBuffer ? (n = t, r += tt) : (n = t.buffer, "[object Int8Array]" === i ? r += it : "[object Uint8Array]" === i ? r += nt : "[object Uint8ClampedArray]" === i ? r += rt : "[object Int16Array]" === i ? r += st : "[object Uint16Array]" === i ? r += at : "[object Int32Array]" === i ? r += ot : "[object Uint32Array]" === i ? r += ht : "[object Float32Array]" === i ? r += ut : "[object Float64Array]" === i ? r += lt : e(new Error("Failed to get type for BinaryArray"))), e(r + ft(n)) } else if ("[object Blob]" === i) { var s = new FileReader;
                        s.onload = function() { var i = Q + t.type + "~" + ft(this.result);
                            e(Z + et + i) }, s.readAsArrayBuffer(t) } else try { e(JSON.stringify(t)) } catch (o) { e(null, o) } }

                function gt(t) { if (t.substring(0, J) !== Z) return JSON.parse(t); var e, i = t.substring(ct),
                        n = t.substring(J, ct); if (n === et && $.test(i)) { var r = i.match($);
                        e = r[1], i = i.substring(r[0].length) } var s = pt(i); switch (n) {
                        case tt:
                            return s;
                        case et:
                            return h([s], { type: e });
                        case it:
                            return new Int8Array(s);
                        case nt:
                            return new Uint8Array(s);
                        case rt:
                            return new Uint8ClampedArray(s);
                        case st:
                            return new Int16Array(s);
                        case at:
                            return new Uint16Array(s);
                        case ot:
                            return new Int32Array(s);
                        case ht:
                            return new Uint32Array(s);
                        case ut:
                            return new Float32Array(s);
                        case lt:
                            return new Float64Array(s);
                        default:
                            throw new Error("Unkown type: " + n) } } var yt = { serialize: mt, deserialize: gt, stringToBuffer: pt, bufferToString: ft };

                function vt(t, e, i, n) { t.executeSql("CREATE TABLE IF NOT EXISTS " + e.storeName + " (id INTEGER PRIMARY KEY, key unique, value)", [], i, n) }

                function bt(t) { var e = this,
                        i = { db: null }; if (t)
                        for (var n in t) i[n] = "string" != typeof t[n] ? t[n].toString() : t[n]; var r = new u((function(t, n) { try { i.db = openDatabase(i.name, String(i.version), i.description, i.size) } catch (r) { return n(r) } i.db.transaction((function(r) { vt(r, i, (function() { e._dbInfo = i, t() }), (function(t, e) { n(e) })) }), n) })); return i.serializer = yt, r }

                function _t(t, e, i, n, r, s) { t.executeSql(i, n, r, (function(t, o) { o.code === o.SYNTAX_ERR ? t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?", [e.storeName], (function(t, a) { a.rows.length ? s(t, o) : vt(t, e, (function() { t.executeSql(i, n, r, s) }), s) }), s) : s(t, o) }), s) }

                function xt(t, e) { var i = this;
                    t = d(t); var n = new u((function(e, n) { i.ready().then((function() { var r = i._dbInfo;
                            r.db.transaction((function(i) { _t(i, r, "SELECT * FROM " + r.storeName + " WHERE key = ? LIMIT 1", [t], (function(t, i) { var n = i.rows.length ? i.rows.item(0).value : null;
                                    n && (n = r.serializer.deserialize(n)), e(n) }), (function(t, e) { n(e) })) })) }))["catch"](n) })); return l(n, e), n }

                function wt(t, e) { var i = this,
                        n = new u((function(e, n) { i.ready().then((function() { var r = i._dbInfo;
                                r.db.transaction((function(i) { _t(i, r, "SELECT * FROM " + r.storeName, [], (function(i, n) { for (var s = n.rows, o = s.length, a = 0; a < o; a++) { var h = s.item(a),
                                                u = h.value; if (u && (u = r.serializer.deserialize(u)), void 0 !== (u = t(u, h.key, a + 1))) return void e(u) } e() }), (function(t, e) { n(e) })) })) }))["catch"](n) })); return l(n, e), n }

                function Tt(t, e, i, n) { var r = this;
                    t = d(t); var s = new u((function(s, o) { r.ready().then((function() { e === undefined && (e = null); var a = e,
                                h = r._dbInfo;
                            h.serializer.serialize(e, (function(e, u) { u ? o(u) : h.db.transaction((function(i) { _t(i, h, "INSERT OR REPLACE INTO " + h.storeName + " (key, value) VALUES (?, ?)", [t, e], (function() { s(a) }), (function(t, e) { o(e) })) }), (function(e) { if (e.code === e.QUOTA_ERR) { if (n > 0) return void s(Tt.apply(r, [t, a, i, n - 1]));
                                        o(e) } })) })) }))["catch"](o) })); return l(s, i), s }

                function St(t, e, i) { return Tt.apply(this, [t, e, i, 1]) }

                function Et(t, e) { var i = this;
                    t = d(t); var n = new u((function(e, n) { i.ready().then((function() { var r = i._dbInfo;
                            r.db.transaction((function(i) { _t(i, r, "DELETE FROM " + r.storeName + " WHERE key = ?", [t], (function() { e() }), (function(t, e) { n(e) })) })) }))["catch"](n) })); return l(n, e), n }

                function Pt(t) { var e = this,
                        i = new u((function(t, i) { e.ready().then((function() { var n = e._dbInfo;
                                n.db.transaction((function(e) { _t(e, n, "DELETE FROM " + n.storeName, [], (function() { t() }), (function(t, e) { i(e) })) })) }))["catch"](i) })); return l(i, t), i }

                function Ct(t) { var e = this,
                        i = new u((function(t, i) { e.ready().then((function() { var n = e._dbInfo;
                                n.db.transaction((function(e) { _t(e, n, "SELECT COUNT(key) as c FROM " + n.storeName, [], (function(e, i) { var n = i.rows.item(0).c;
                                        t(n) }), (function(t, e) { i(e) })) })) }))["catch"](i) })); return l(i, t), i }

                function Ot(t, e) { var i = this,
                        n = new u((function(e, n) { i.ready().then((function() { var r = i._dbInfo;
                                r.db.transaction((function(i) { _t(i, r, "SELECT key FROM " + r.storeName + " WHERE id = ? LIMIT 1", [t + 1], (function(t, i) { var n = i.rows.length ? i.rows.item(0).key : null;
                                        e(n) }), (function(t, e) { n(e) })) })) }))["catch"](n) })); return l(n, e), n }

                function At(t) { var e = this,
                        i = new u((function(t, i) { e.ready().then((function() { var n = e._dbInfo;
                                n.db.transaction((function(e) { _t(e, n, "SELECT key FROM " + n.storeName, [], (function(e, i) { for (var n = [], r = 0; r < i.rows.length; r++) n.push(i.rows.item(r).key);
                                        t(n) }), (function(t, e) { i(e) })) })) }))["catch"](i) })); return l(i, t), i }

                function It(t) { return new u((function(e, i) { t.transaction((function(n) { n.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'", [], (function(i, n) { for (var r = [], s = 0; s < n.rows.length; s++) r.push(n.rows.item(s).name);
                                e({ db: t, storeNames: r }) }), (function(t, e) { i(e) })) }), (function(t) { i(t) })) })) }

                function Rt(t, e) { e = p.apply(this, arguments); var i = this.config();
                    (t = "function" != typeof t && t || {}).name || (t.name = t.name || i.name, t.storeName = t.storeName || i.storeName); var n, r = this; return l(n = t.name ? new u((function(e) { var n;
                        n = t.name === i.name ? r._dbInfo.db : openDatabase(t.name, "", "", 0), t.storeName ? e({ db: n, storeNames: [t.storeName] }) : e(It(n)) })).then((function(t) { return new u((function(e, i) { t.db.transaction((function(n) {
                                function r(t) { return new u((function(e, i) { n.executeSql("DROP TABLE IF EXISTS " + t, [], (function() { e() }), (function(t, e) { i(e) })) })) } for (var s = [], o = 0, a = t.storeNames.length; o < a; o++) s.push(r(t.storeNames[o]));
                                u.all(s).then((function() { e() }))["catch"]((function(t) { i(t) })) }), (function(t) { i(t) })) })) })) : u.reject("Invalid arguments"), e), n } var Mt = { _driver: "webSQLStorage", _initStorage: bt, _support: K(), iterate: wt, getItem: xt, setItem: St, removeItem: Et, clear: Pt, length: Ct, key: Ot, keys: At, dropInstance: Rt };

                function Lt() { try { return "undefined" != typeof localStorage && "setItem" in localStorage && !!localStorage.setItem } catch (t) { return !1 } }

                function Dt(t, e) { var i = t.name + "/"; return t.storeName !== e.storeName && (i += t.storeName + "/"), i }

                function kt() { var t = "_localforage_support_test"; try { return localStorage.setItem(t, !0), localStorage.removeItem(t), !1 } catch (e) { return !0 } }

                function Nt() { return !kt() || localStorage.length > 0 }

                function Ft(t) { var e = this,
                        i = {}; if (t)
                        for (var n in t) i[n] = t[n]; return i.keyPrefix = Dt(t, e._defaultConfig), Nt() ? (e._dbInfo = i, i.serializer = yt, u.resolve()) : u.reject() }

                function Bt(t) { var e = this,
                        i = e.ready().then((function() { for (var t = e._dbInfo.keyPrefix, i = localStorage.length - 1; i >= 0; i--) { var n = localStorage.key(i);
                                0 === n.indexOf(t) && localStorage.removeItem(n) } })); return l(i, t), i }

                function jt(t, e) { var i = this;
                    t = d(t); var n = i.ready().then((function() { var e = i._dbInfo,
                            n = localStorage.getItem(e.keyPrefix + t); return n && (n = e.serializer.deserialize(n)), n })); return l(n, e), n }

                function Ut(t, e) { var i = this,
                        n = i.ready().then((function() { for (var e = i._dbInfo, n = e.keyPrefix, r = n.length, s = localStorage.length, o = 1, a = 0; a < s; a++) { var h = localStorage.key(a); if (0 === h.indexOf(n)) { var u = localStorage.getItem(h); if (u && (u = e.serializer.deserialize(u)), void 0 !== (u = t(u, h.substring(r), o++))) return u } } })); return l(n, e), n }

                function Gt(t, e) { var i = this,
                        n = i.ready().then((function() { var e, n = i._dbInfo; try { e = localStorage.key(t) } catch (r) { e = null } return e && (e = e.substring(n.keyPrefix.length)), e })); return l(n, e), n }

                function Xt(t) { var e = this,
                        i = e.ready().then((function() { for (var t = e._dbInfo, i = localStorage.length, n = [], r = 0; r < i; r++) { var s = localStorage.key(r);
                                0 === s.indexOf(t.keyPrefix) && n.push(s.substring(t.keyPrefix.length)) } return n })); return l(i, t), i }

                function Ht(t) { var e = this.keys().then((function(t) { return t.length })); return l(e, t), e }

                function zt(t, e) { var i = this;
                    t = d(t); var n = i.ready().then((function() { var e = i._dbInfo;
                        localStorage.removeItem(e.keyPrefix + t) })); return l(n, e), n }

                function Vt(t, e, i) { var n = this;
                    t = d(t); var r = n.ready().then((function() { e === undefined && (e = null); var i = e; return new u((function(r, s) { var o = n._dbInfo;
                            o.serializer.serialize(e, (function(e, n) { if (n) s(n);
                                else try { localStorage.setItem(o.keyPrefix + t, e), r(i) } catch (a) { "QuotaExceededError" !== a.name && "NS_ERROR_DOM_QUOTA_REACHED" !== a.name || s(a), s(a) } })) })) })); return l(r, i), r }

                function Wt(t, e) { if (e = p.apply(this, arguments), !(t = "function" != typeof t && t || {}).name) { var i = this.config();
                        t.name = t.name || i.name, t.storeName = t.storeName || i.storeName } var n, r = this; return l(n = t.name ? new u((function(e) { t.storeName ? e(Dt(t, r._defaultConfig)) : e(t.name + "/") })).then((function(t) { for (var e = localStorage.length - 1; e >= 0; e--) { var i = localStorage.key(e);
                            0 === i.indexOf(t) && localStorage.removeItem(i) } })) : u.reject("Invalid arguments"), e), n } var Yt = { _driver: "localStorageWrapper", _initStorage: Ft, _support: Lt(), iterate: Ut, getItem: jt, setItem: Vt, removeItem: zt, clear: Bt, length: Ht, key: Gt, keys: Xt, dropInstance: Wt },
                    Kt = function(t, e) { return t === e || "number" == typeof t && "number" == typeof e && isNaN(t) && isNaN(e) },
                    qt = function(t, e) { for (var i = t.length, n = 0; n < i;) { if (Kt(t[n], e)) return !0;
                            n++ } return !1 },
                    Qt = Array.isArray || function(t) { return "[object Array]" === Object.prototype.toString.call(t) },
                    $t = {},
                    Zt = {},
                    Jt = { INDEXEDDB: Y, WEBSQL: Mt, LOCALSTORAGE: Yt },
                    te = [Jt.INDEXEDDB._driver, Jt.WEBSQL._driver, Jt.LOCALSTORAGE._driver],
                    ee = ["dropInstance"],
                    ie = ["clear", "getItem", "iterate", "key", "keys", "length", "removeItem", "setItem"].concat(ee),
                    ne = { description: "", driver: te.slice(), name: "localforage", size: 4980736, storeName: "keyvaluepairs", version: 1 };

                function re(t, e) { t[e] = function() { var i = arguments; return t.ready().then((function() { return t[e].apply(t, i) })) } }

                function se() { for (var t = 1; t < arguments.length; t++) { var e = arguments[t]; if (e)
                            for (var i in e) e.hasOwnProperty(i) && (Qt(e[i]) ? arguments[0][i] = e[i].slice() : arguments[0][i] = e[i]) } return arguments[0] } var oe = new(function() {
                    function t(e) { for (var i in r(this, t), Jt)
                            if (Jt.hasOwnProperty(i)) { var n = Jt[i],
                                    s = n._driver;
                                this[i] = s, $t[s] || this.defineDriver(n) } this._defaultConfig = se({}, ne), this._config = se({}, this._defaultConfig, e), this._driverSet = null, this._initDriver = null, this._ready = !1, this._dbInfo = null, this._wrapLibraryMethodsWithReady(), this.setDriver(this._config.driver)["catch"]((function() {})) } return t.prototype.config = function(t) { if ("object" === (void 0 === t ? "undefined" : n(t))) { if (this._ready) return new Error("Can't call config() after localforage has been used."); for (var e in t) { if ("storeName" === e && (t[e] = t[e].replace(/\W/g, "_")), "version" === e && "number" != typeof t[e]) return new Error("Database version must be a number.");
                                this._config[e] = t[e] } return !("driver" in t) || !t.driver || this.setDriver(this._config.driver) } return "string" == typeof t ? this._config[t] : this._config }, t.prototype.defineDriver = function(t, e, i) { var n = new u((function(e, i) { try { var n = t._driver,
                                    r = new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"); if (!t._driver) return void i(r); for (var s = ie.concat("_initStorage"), o = 0, a = s.length; o < a; o++) { var h = s[o]; if ((!qt(ee, h) || t[h]) && "function" != typeof t[h]) return void i(r) }! function() { for (var e = function(t) { return function() { var e = new Error("Method " + t + " is not implemented by the current driver"),
                                                    i = u.reject(e); return l(i, arguments[arguments.length - 1]), i } }, i = 0, n = ee.length; i < n; i++) { var r = ee[i];
                                        t[r] || (t[r] = e(r)) } }(); var c = function(i) { $t[n], $t[n] = t, Zt[n] = i, e() }; "_support" in t ? t._support && "function" == typeof t._support ? t._support().then(c, i) : c(!!t._support) : c(!0) } catch (d) { i(d) } })); return c(n, e, i), n }, t.prototype.driver = function() { return this._driver || null }, t.prototype.getDriver = function(t, e, i) { var n = $t[t] ? u.resolve($t[t]) : u.reject(new Error("Driver not found.")); return c(n, e, i), n }, t.prototype.getSerializer = function(t) { var e = u.resolve(yt); return c(e, t), e }, t.prototype.ready = function(t) { var e = this,
                            i = e._driverSet.then((function() { return null === e._ready && (e._ready = e._initDriver()), e._ready })); return c(i, t, t), i }, t.prototype.setDriver = function(t, e, i) { var n = this;
                        Qt(t) || (t = [t]); var r = this._getSupportedDrivers(t);

                        function s() { n._config.driver = n.driver() }

                        function o(t) { return n._extend(t), s(), n._ready = n._initStorage(n._config), n._ready }

                        function a(t) { return function() { var e = 0;

                                function i() { for (; e < t.length;) { var r = t[e]; return e++, n._dbInfo = null, n._ready = null, n.getDriver(r).then(o)["catch"](i) } s(); var a = new Error("No available storage method found."); return n._driverSet = u.reject(a), n._driverSet } return i() } } var h = null !== this._driverSet ? this._driverSet["catch"]((function() { return u.resolve() })) : u.resolve(); return this._driverSet = h.then((function() { var t = r[0]; return n._dbInfo = null, n._ready = null, n.getDriver(t).then((function(t) { n._driver = t._driver, s(), n._wrapLibraryMethodsWithReady(), n._initDriver = a(r) })) }))["catch"]((function() { s(); var t = new Error("No available storage method found."); return n._driverSet = u.reject(t), n._driverSet })), c(this._driverSet, e, i), this._driverSet }, t.prototype.supports = function(t) { return !!Zt[t] }, t.prototype._extend = function(t) { se(this, t) }, t.prototype._getSupportedDrivers = function(t) { for (var e = [], i = 0, n = t.length; i < n; i++) { var r = t[i];
                            this.supports(r) && e.push(r) } return e }, t.prototype._wrapLibraryMethodsWithReady = function() { for (var t = 0, e = ie.length; t < e; t++) re(this, ie[t]) }, t.prototype.createInstance = function(e) { return new t(e) }, t }());
                e.exports = oe }, { 3: 3 }] }, {}, [4])(4) }).call(this, i(22)) }, function(t, e) { var i, n, r = t.exports = {};

    function s() { throw new Error("setTimeout has not been defined") }

    function o() { throw new Error("clearTimeout has not been defined") }

    function a(t) { if (i === setTimeout) return setTimeout(t, 0); if ((i === s || !i) && setTimeout) return i = setTimeout, setTimeout(t, 0); try { return i(t, 0) } catch (e) { try { return i.call(null, t, 0) } catch (e) { return i.call(this, t, 0) } } }! function() { try { i = "function" == typeof setTimeout ? setTimeout : s } catch (t) { i = s } try { n = "function" == typeof clearTimeout ? clearTimeout : o } catch (t) { n = o } }(); var h, u = [],
        l = !1,
        c = -1;

    function d() { l && h && (l = !1, h.length ? u = h.concat(u) : c = -1, u.length && p()) }

    function p() { if (!l) { var t = a(d);
            l = !0; for (var e = u.length; e;) { for (h = u, u = []; ++c < e;) h && h[c].run();
                c = -1, e = u.length } h = null, l = !1,
                function(t) { if (n === clearTimeout) return clearTimeout(t); if ((n === o || !n) && clearTimeout) return n = clearTimeout, clearTimeout(t); try { n(t) } catch (e) { try { return n.call(null, t) } catch (e) { return n.call(this, t) } } }(t) } }

    function f(t, e) { this.fun = t, this.array = e }

    function m() {} r.nextTick = function(t) { var e = new Array(arguments.length - 1); if (arguments.length > 1)
            for (var i = 1; i < arguments.length; i++) e[i - 1] = arguments[i];
        u.push(new f(t, e)), 1 !== u.length || l || a(p) }, f.prototype.run = function() { this.fun.apply(null, this.array) }, r.title = "browser", r.browser = !0, r.env = {}, r.argv = [], r.version = "", r.versions = {}, r.on = m, r.addListener = m, r.once = m, r.off = m, r.removeListener = m, r.removeAllListeners = m, r.emit = m, r.prependListener = m, r.prependOnceListener = m, r.listeners = function(t) { return [] }, r.binding = function(t) { throw new Error("process.binding is not supported") }, r.cwd = function() { return "/" }, r.chdir = function(t) { throw new Error("process.chdir is not supported") }, r.umask = function() { return 0 } }, function(t, e, i) { "use strict"; var n = Object.prototype.hasOwnProperty,
        r = "~";

    function s() {}

    function o(t, e, i) { this.fn = t, this.context = e, this.once = i || !1 }

    function a(t, e, i, n, s) { if ("function" != typeof i) throw new TypeError("The listener must be a function"); var a = new o(i, n || t, s),
            h = r ? r + e : e; return t._events[h] ? t._events[h].fn ? t._events[h] = [t._events[h], a] : t._events[h].push(a) : (t._events[h] = a, t._eventsCount++), t }

    function h(t, e) { 0 == --t._eventsCount ? t._events = new s : delete t._events[e] }

    function u() { this._events = new s, this._eventsCount = 0 } Object.create && (s.prototype = Object.create(null), (new s).__proto__ || (r = !1)), u.prototype.eventNames = function() { var t, e, i = []; if (0 === this._eventsCount) return i; for (e in t = this._events) n.call(t, e) && i.push(r ? e.slice(1) : e); return Object.getOwnPropertySymbols ? i.concat(Object.getOwnPropertySymbols(t)) : i }, u.prototype.listeners = function(t) { var e = r ? r + t : t,
            i = this._events[e]; if (!i) return []; if (i.fn) return [i.fn]; for (var n = 0, s = i.length, o = new Array(s); n < s; n++) o[n] = i[n].fn; return o }, u.prototype.listenerCount = function(t) { var e = r ? r + t : t,
            i = this._events[e]; return i ? i.fn ? 1 : i.length : 0 }, u.prototype.emit = function(t, e, i, n, s, o) { var a = r ? r + t : t; if (!this._events[a]) return !1; var h, u, l = this._events[a],
            c = arguments.length; if (l.fn) { switch (l.once && this.removeListener(t, l.fn, undefined, !0), c) {
                case 1:
                    return l.fn.call(l.context), !0;
                case 2:
                    return l.fn.call(l.context, e), !0;
                case 3:
                    return l.fn.call(l.context, e, i), !0;
                case 4:
                    return l.fn.call(l.context, e, i, n), !0;
                case 5:
                    return l.fn.call(l.context, e, i, n, s), !0;
                case 6:
                    return l.fn.call(l.context, e, i, n, s, o), !0 } for (u = 1, h = new Array(c - 1); u < c; u++) h[u - 1] = arguments[u];
            l.fn.apply(l.context, h) } else { var d, p = l.length; for (u = 0; u < p; u++) switch (l[u].once && this.removeListener(t, l[u].fn, undefined, !0), c) {
                case 1:
                    l[u].fn.call(l[u].context); break;
                case 2:
                    l[u].fn.call(l[u].context, e); break;
                case 3:
                    l[u].fn.call(l[u].context, e, i); break;
                case 4:
                    l[u].fn.call(l[u].context, e, i, n); break;
                default:
                    if (!h)
                        for (d = 1, h = new Array(c - 1); d < c; d++) h[d - 1] = arguments[d];
                    l[u].fn.apply(l[u].context, h) } } return !0 }, u.prototype.on = function(t, e, i) { return a(this, t, e, i, !1) }, u.prototype.once = function(t, e, i) { return a(this, t, e, i, !0) }, u.prototype.removeListener = function(t, e, i, n) { var s = r ? r + t : t; if (!this._events[s]) return this; if (!e) return h(this, s), this; var o = this._events[s]; if (o.fn) o.fn !== e || n && !o.once || i && o.context !== i || h(this, s);
        else { for (var a = 0, u = [], l = o.length; a < l; a++)(o[a].fn !== e || n && !o[a].once || i && o[a].context !== i) && u.push(o[a]);
            u.length ? this._events[s] = 1 === u.length ? u[0] : u : h(this, s) } return this }, u.prototype.removeAllListeners = function(t) { var e; return t ? (e = r ? r + t : t, this._events[e] && h(this, e)) : (this._events = new s, this._eventsCount = 0), this }, u.prototype.off = u.prototype.removeListener, u.prototype.addListener = u.prototype.on, u.prefixed = r, u.EventEmitter = u, t.exports = u }, function(t, e, i) { "use strict";

    function n(t, e, i) { i = i || 2; var n, a, h, u, l, p, f, g = e && e.length,
            y = g ? e[0] * i : t.length,
            v = r(t, 0, y, i, !0),
            b = []; if (!v || v.next === v.prev) return b; if (g && (v = function(t, e, i, n) { var o, a, h, u = []; for (o = 0, a = e.length; o < a; o++)(h = r(t, e[o] * n, o < a - 1 ? e[o + 1] * n : t.length, n, !1)) === h.next && (h.steiner = !0), u.push(m(h)); for (u.sort(c), o = 0; o < u.length; o++) d(u[o], i), i = s(i, i.next); return i }(t, e, v, i)), t.length > 80 * i) { n = h = t[0], a = u = t[1]; for (var _ = i; _ < y; _ += i)(l = t[_]) < n && (n = l), (p = t[_ + 1]) < a && (a = p), l > h && (h = l), p > u && (u = p);
            f = 0 !== (f = Math.max(h - n, u - a)) ? 1 / f : 0 } return o(v, b, i, n, a, f), b }

    function r(t, e, i, n, r) { var s, o; if (r === O(t, e, i, n) > 0)
            for (s = e; s < i; s += n) o = E(s, t[s], t[s + 1], o);
        else
            for (s = i - n; s >= e; s -= n) o = E(s, t[s], t[s + 1], o); return o && b(o, o.next) && (P(o), o = o.next), o }

    function s(t, e) { if (!t) return t;
        e || (e = t); var i, n = t;
        do { if (i = !1, n.steiner || !b(n, n.next) && 0 !== v(n.prev, n, n.next)) n = n.next;
            else { if (P(n), (n = e = n.prev) === n.next) break;
                i = !0 } } while (i || n !== e); return e }

    function o(t, e, i, n, r, c, d) { if (t) {!d && c && function(t, e, i, n) { var r = t;
                do { null === r.z && (r.z = f(r.x, r.y, e, i, n)), r.prevZ = r.prev, r.nextZ = r.next, r = r.next } while (r !== t);
                r.prevZ.nextZ = null, r.prevZ = null,
                    function(t) { var e, i, n, r, s, o, a, h, u = 1;
                        do { for (i = t, t = null, s = null, o = 0; i;) { for (o++, n = i, a = 0, e = 0; e < u && (a++, n = n.nextZ); e++); for (h = u; a > 0 || h > 0 && n;) 0 !== a && (0 === h || !n || i.z <= n.z) ? (r = i, i = i.nextZ, a--) : (r = n, n = n.nextZ, h--), s ? s.nextZ = r : t = r, r.prevZ = s, s = r;
                                i = n } s.nextZ = null, u *= 2 } while (o > 1) }(r) }(t, n, r, c); for (var p, m, g = t; t.prev !== t.next;)
                if (p = t.prev, m = t.next, c ? h(t, n, r, c) : a(t)) e.push(p.i / i), e.push(t.i / i), e.push(m.i / i), P(t), t = m.next, g = m.next;
                else if ((t = m) === g) { d ? 1 === d ? o(t = u(s(t), e, i), e, i, n, r, c, 2) : 2 === d && l(t, e, i, n, r, c) : o(s(t), e, i, n, r, c, 1); break } } }

    function a(t) { var e = t.prev,
            i = t,
            n = t.next; if (v(e, i, n) >= 0) return !1; for (var r = t.next.next; r !== t.prev;) { if (g(e.x, e.y, i.x, i.y, n.x, n.y, r.x, r.y) && v(r.prev, r, r.next) >= 0) return !1;
            r = r.next } return !0 }

    function h(t, e, i, n) { var r = t.prev,
            s = t,
            o = t.next; if (v(r, s, o) >= 0) return !1; for (var a = r.x < s.x ? r.x < o.x ? r.x : o.x : s.x < o.x ? s.x : o.x, h = r.y < s.y ? r.y < o.y ? r.y : o.y : s.y < o.y ? s.y : o.y, u = r.x > s.x ? r.x > o.x ? r.x : o.x : s.x > o.x ? s.x : o.x, l = r.y > s.y ? r.y > o.y ? r.y : o.y : s.y > o.y ? s.y : o.y, c = f(a, h, e, i, n), d = f(u, l, e, i, n), p = t.prevZ, m = t.nextZ; p && p.z >= c && m && m.z <= d;) { if (p !== t.prev && p !== t.next && g(r.x, r.y, s.x, s.y, o.x, o.y, p.x, p.y) && v(p.prev, p, p.next) >= 0) return !1; if (p = p.prevZ, m !== t.prev && m !== t.next && g(r.x, r.y, s.x, s.y, o.x, o.y, m.x, m.y) && v(m.prev, m, m.next) >= 0) return !1;
            m = m.nextZ } for (; p && p.z >= c;) { if (p !== t.prev && p !== t.next && g(r.x, r.y, s.x, s.y, o.x, o.y, p.x, p.y) && v(p.prev, p, p.next) >= 0) return !1;
            p = p.prevZ } for (; m && m.z <= d;) { if (m !== t.prev && m !== t.next && g(r.x, r.y, s.x, s.y, o.x, o.y, m.x, m.y) && v(m.prev, m, m.next) >= 0) return !1;
            m = m.nextZ } return !0 }

    function u(t, e, i) { var n = t;
        do { var r = n.prev,
                o = n.next.next;!b(r, o) && _(r, n, n.next, o) && T(r, o) && T(o, r) && (e.push(r.i / i), e.push(n.i / i), e.push(o.i / i), P(n), P(n.next), n = t = o), n = n.next } while (n !== t); return s(n) }

    function l(t, e, i, n, r, a) { var h = t;
        do { for (var u = h.next.next; u !== h.prev;) { if (h.i !== u.i && y(h, u)) { var l = S(h, u); return h = s(h, h.next), l = s(l, l.next), o(h, e, i, n, r, a), void o(l, e, i, n, r, a) } u = u.next } h = h.next } while (h !== t) }

    function c(t, e) { return t.x - e.x }

    function d(t, e) { if (e = function(t, e) { var i, n = e,
                    r = t.x,
                    s = t.y,
                    o = -Infinity;
                do { if (s <= n.y && s >= n.next.y && n.next.y !== n.y) { var a = n.x + (s - n.y) * (n.next.x - n.x) / (n.next.y - n.y); if (a <= r && a > o) { if (o = a, a === r) { if (s === n.y) return n; if (s === n.next.y) return n.next } i = n.x < n.next.x ? n : n.next } } n = n.next } while (n !== e); if (!i) return null; if (r === o) return i; var h, u = i,
                    l = i.x,
                    c = i.y,
                    d = Infinity;
                n = i;
                do { r >= n.x && n.x >= l && r !== n.x && g(s < c ? r : o, s, l, c, s < c ? o : r, s, n.x, n.y) && (h = Math.abs(s - n.y) / (r - n.x), T(n, t) && (h < d || h === d && (n.x > i.x || n.x === i.x && p(i, n))) && (i = n, d = h)), n = n.next } while (n !== u); return i }(t, e)) { var i = S(e, t);
            s(e, e.next), s(i, i.next) } }

    function p(t, e) { return v(t.prev, t, e.prev) < 0 && v(e.next, t, t.next) < 0 }

    function f(t, e, i, n, r) { return (t = 1431655765 & ((t = 858993459 & ((t = 252645135 & ((t = 16711935 & ((t = 32767 * (t - i) * r) | t << 8)) | t << 4)) | t << 2)) | t << 1)) | (e = 1431655765 & ((e = 858993459 & ((e = 252645135 & ((e = 16711935 & ((e = 32767 * (e - n) * r) | e << 8)) | e << 4)) | e << 2)) | e << 1)) << 1 }

    function m(t) { var e = t,
            i = t;
        do {
            (e.x < i.x || e.x === i.x && e.y < i.y) && (i = e), e = e.next } while (e !== t); return i }

    function g(t, e, i, n, r, s, o, a) { return (r - o) * (e - a) - (t - o) * (s - a) >= 0 && (t - o) * (n - a) - (i - o) * (e - a) >= 0 && (i - o) * (s - a) - (r - o) * (n - a) >= 0 }

    function y(t, e) { return t.next.i !== e.i && t.prev.i !== e.i && ! function(t, e) { var i = t;
            do { if (i.i !== t.i && i.next.i !== t.i && i.i !== e.i && i.next.i !== e.i && _(i, i.next, t, e)) return !0;
                i = i.next } while (i !== t); return !1 }(t, e) && (T(t, e) && T(e, t) && function(t, e) { var i = t,
                n = !1,
                r = (t.x + e.x) / 2,
                s = (t.y + e.y) / 2;
            do { i.y > s != i.next.y > s && i.next.y !== i.y && r < (i.next.x - i.x) * (s - i.y) / (i.next.y - i.y) + i.x && (n = !n), i = i.next } while (i !== t); return n }(t, e) && (v(t.prev, t, e.prev) || v(t, e.prev, e)) || b(t, e) && v(t.prev, t, t.next) > 0 && v(e.prev, e, e.next) > 0) }

    function v(t, e, i) { return (e.y - t.y) * (i.x - e.x) - (e.x - t.x) * (i.y - e.y) }

    function b(t, e) { return t.x === e.x && t.y === e.y }

    function _(t, e, i, n) { var r = w(v(t, e, i)),
            s = w(v(t, e, n)),
            o = w(v(i, n, t)),
            a = w(v(i, n, e)); return r !== s && o !== a || (!(0 !== r || !x(t, i, e)) || (!(0 !== s || !x(t, n, e)) || (!(0 !== o || !x(i, t, n)) || !(0 !== a || !x(i, e, n))))) }

    function x(t, e, i) { return e.x <= Math.max(t.x, i.x) && e.x >= Math.min(t.x, i.x) && e.y <= Math.max(t.y, i.y) && e.y >= Math.min(t.y, i.y) }

    function w(t) { return t > 0 ? 1 : t < 0 ? -1 : 0 }

    function T(t, e) { return v(t.prev, t, t.next) < 0 ? v(t, e, t.next) >= 0 && v(t, t.prev, e) >= 0 : v(t, e, t.prev) < 0 || v(t, t.next, e) < 0 }

    function S(t, e) { var i = new C(t.i, t.x, t.y),
            n = new C(e.i, e.x, e.y),
            r = t.next,
            s = e.prev; return t.next = e, e.prev = t, i.next = r, r.prev = i, n.next = i, i.prev = n, s.next = n, n.prev = s, n }

    function E(t, e, i, n) { var r = new C(t, e, i); return n ? (r.next = n.next, r.prev = n, n.next.prev = r, n.next = r) : (r.prev = r, r.next = r), r }

    function P(t) { t.next.prev = t.prev, t.prev.next = t.next, t.prevZ && (t.prevZ.nextZ = t.nextZ), t.nextZ && (t.nextZ.prevZ = t.prevZ) }

    function C(t, e, i) { this.i = t, this.x = e, this.y = i, this.prev = null, this.next = null, this.z = null, this.prevZ = null, this.nextZ = null, this.steiner = !1 }

    function O(t, e, i, n) { for (var r = 0, s = e, o = i - n; s < i; s += n) r += (t[o] - t[s]) * (t[s + 1] + t[o + 1]), o = s; return r } t.exports = n, t.exports["default"] = n, n.deviation = function(t, e, i, n) { var r = e && e.length,
            s = r ? e[0] * i : t.length,
            o = Math.abs(O(t, 0, s, i)); if (r)
            for (var a = 0, h = e.length; a < h; a++) { var u = e[a] * i,
                    l = a < h - 1 ? e[a + 1] * i : t.length;
                o -= Math.abs(O(t, u, l, i)) }
        var c = 0; for (a = 0; a < n.length; a += 3) { var d = n[a] * i,
                p = n[a + 1] * i,
                f = n[a + 2] * i;
            c += Math.abs((t[d] - t[f]) * (t[p + 1] - t[d + 1]) - (t[d] - t[p]) * (t[f + 1] - t[d + 1])) } return 0 === o && 0 === c ? 0 : Math.abs((c - o) / o) }, n.flatten = function(t) { for (var e = t[0][0].length, i = { vertices: [], holes: [], dimensions: e }, n = 0, r = 0; r < t.length; r++) { for (var s = 0; s < t[r].length; s++)
                for (var o = 0; o < e; o++) i.vertices.push(t[r][s][o]);
            r > 0 && (n += t[r - 1].length, i.holes.push(n)) } return i } }, function(t, e, i) {
    (function(n, r) { var s;! function(n) { var o = n.Promise,
                a = o && "resolve" in o && "reject" in o && "all" in o && "race" in o && function() { var t; return new o((function(e) { t = e })), "function" == typeof t }();
            e ? (e.Promise = a ? o : T, e.Polyfill = T) : (s = function() { return a ? o : T }.call(e, i, e, t)) === undefined || (t.exports = s); var h = function() {};

            function u(t) { return "[object Array]" === Object.prototype.toString.call(t) } var l, c = void 0 !== r ? r : setTimeout,
                d = [];

            function p() { for (var t = 0; t < d.length; t++) d[t][0](d[t][1]);
                d = [], l = !1 }

            function f(t, e) { d.push([t, e]), l || (l = !0, c(p, 0)) }

            function m(t) { var e = t.owner,
                    i = e.state_,
                    n = e.data_,
                    r = t[i],
                    s = t.then; if ("function" == typeof r) { i = "fulfilled"; try { n = r(n) } catch (o) { b(s, o) } } g(s, n) || ("fulfilled" === i && y(s, n), "rejected" === i && b(s, n)) }

            function g(t, e) { var i; try { if (t === e) throw new TypeError("A promises callback cannot return that same promise."); if (e && ("function" == typeof e || "object" == typeof e)) { var n = e.then; if ("function" == typeof n) return n.call(e, (function(n) { i || (i = !0, e !== n ? y(t, n) : v(t, n)) }), (function(e) { i || (i = !0, b(t, e)) })), !0 } } catch (r) { return i || b(t, r), !0 } return !1 }

            function y(t, e) { t !== e && g(t, e) || v(t, e) }

            function v(t, e) { "pending" === t.state_ && (t.state_ = "sealed", t.data_ = e, f(x, t)) }

            function b(t, e) { "pending" === t.state_ && (t.state_ = "sealed", t.data_ = e, f(w, t)) }

            function _(t) { var e = t.then_;
                t.then_ = undefined; for (var i = 0; i < e.length; i++) m(e[i]) }

            function x(t) { t.state_ = "fulfilled", _(t) }

            function w(t) { t.state_ = "rejected", _(t) }

            function T(t) { if ("function" != typeof t) throw new TypeError("Promise constructor takes a function argument"); if (this instanceof T == !1) throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
                this.then_ = [],
                    function(t, e) {
                        function i(t) { b(e, t) } try { t((function(t) { y(e, t) }), i) } catch (n) { i(n) } }(t, this) } T.prototype = { constructor: T, state_: "pending", then_: null, data_: undefined, then: function(t, e) { var i = { owner: this, then: new this.constructor(h), fulfilled: t, rejected: e }; return "fulfilled" === this.state_ || "rejected" === this.state_ ? f(m, i) : this.then_.push(i), i.then }, "catch": function(t) { return this.then(null, t) } }, T.all = function(t) { if (!u(t)) throw new TypeError("You must pass an array to Promise.all()."); return new this((function(e, i) { var n = [],
                        r = 0;

                    function s(t) { return r++,
                            function(i) { n[t] = i, --r || e(n) } } for (var o, a = 0; a < t.length; a++)(o = t[a]) && "function" == typeof o.then ? o.then(s(a), i) : n[a] = o;
                    r || e(n) })) }, T.race = function(t) { if (!u(t)) throw new TypeError("You must pass an array to Promise.race()."); return new this((function(e, i) { for (var n, r = 0; r < t.length; r++)(n = t[r]) && "function" == typeof n.then ? n.then(e, i) : e(n) })) }, T.resolve = function(t) { return t && "object" == typeof t && t.constructor === this ? t : new this((function(e) { e(t) })) }, T.reject = function(t) { return new this((function(e, i) { i(t) })) } }("undefined" != typeof window ? window : void 0 !== n ? n : "undefined" != typeof self ? self : this) }).call(this, i(22), i(34).setImmediate) }, function(t, e, i) { "use strict"; var n = Object.getOwnPropertySymbols,
        r = Object.prototype.hasOwnProperty,
        s = Object.prototype.propertyIsEnumerable;

    function o(t) { if (null === t || t === undefined) throw new TypeError("Object.assign cannot be called with null or undefined"); return Object(t) } t.exports = function() { try { if (!Object.assign) return !1; var t = new String("abc"); if (t[5] = "de", "5" === Object.getOwnPropertyNames(t)[0]) return !1; for (var e = {}, i = 0; i < 10; i++) e["_" + String.fromCharCode(i)] = i; if ("0123456789" !== Object.getOwnPropertyNames(e).map((function(t) { return e[t] })).join("")) return !1; var n = {}; return "abcdefghijklmnopqrst".split("").forEach((function(t) { n[t] = t })), "abcdefghijklmnopqrst" === Object.keys(Object.assign({}, n)).join("") } catch (r) { return !1 } }() ? Object.assign : function(t, e) { for (var i, a, h = o(t), u = 1; u < arguments.length; u++) { for (var l in i = Object(arguments[u])) r.call(i, l) && (h[l] = i[l]); if (n) { a = n(i); for (var c = 0; c < a.length; c++) s.call(i, a[c]) && (h[a[c]] = i[a[c]]) } } return h } }, function(t, e, i) { var n;
    t.exports = ((n = function() {
        function t(t) { return r.appendChild(t.dom), t }

        function e(t) { for (var e = 0; e < r.children.length; e++) r.children[e].style.display = e === t ? "block" : "none";
            i = t } var i = 0,
            r = document.createElement("div");
        r.style.cssText = "position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000", r.addEventListener("click", (function(t) { t.preventDefault(), e(++i % r.children.length) }), !1); var s = (performance || Date).now(),
            o = s,
            a = 0,
            h = t(new n.Panel("FPS", "#0ff", "#002")),
            u = t(new n.Panel("MS", "#0f0", "#020")); if (self.performance && self.performance.memory) var l = t(new n.Panel("MB", "#f08", "#201")); return e(0), { REVISION: 16, dom: r, addPanel: t, showPanel: e, begin: function() { s = (performance || Date).now() }, end: function() { a++; var t = (performance || Date).now(); if (u.update(t - s, 200), t > o + 1e3 && (h.update(1e3 * a / (t - o), 100), o = t, a = 0, l)) { var e = performance.memory;
                    l.update(e.usedJSHeapSize / 1048576, e.jsHeapSizeLimit / 1048576) } return t }, update: function() { s = this.end() }, domElement: r, setMode: e } }).Panel = function(t, e, i) { var n = Infinity,
            r = 0,
            s = Math.round,
            o = s(window.devicePixelRatio || 1),
            a = 80 * o,
            h = 48 * o,
            u = 3 * o,
            l = 2 * o,
            c = 3 * o,
            d = 15 * o,
            p = 74 * o,
            f = 30 * o,
            m = document.createElement("canvas");
        m.width = a, m.height = h, m.style.cssText = "width:80px;height:48px"; var g = m.getContext("2d"); return g.font = "bold " + 9 * o + "px Helvetica,Arial,sans-serif", g.textBaseline = "top", g.fillStyle = i, g.fillRect(0, 0, a, h), g.fillStyle = e, g.fillText(t, u, l), g.fillRect(c, d, p, f), g.fillStyle = i, g.globalAlpha = .9, g.fillRect(c, d, p, f), { dom: m, update: function(h, y) { n = Math.min(n, h), r = Math.max(r, h), g.fillStyle = i, g.globalAlpha = 1, g.fillRect(0, 0, a, d), g.fillStyle = e, g.fillText(s(h) + " " + t + " (" + s(n) + "-" + s(r) + ")", u, l), g.drawImage(m, c + o, d, p - o, f, c, d, p - o, f), g.fillRect(c + p - o, d, o, f), g.fillStyle = i, g.globalAlpha = .9, g.fillRect(c + p - o, d, o, s((1 - h / y) * f)) } } }, n) }, function(t, e, i) {! function() {
        function e(t, e) { document.addEventListener ? t.addEventListener("scroll", e, !1) : t.attachEvent("scroll", e) }

        function i(t) { this.a = document.createElement("div"), this.a.setAttribute("aria-hidden", "true"), this.a.appendChild(document.createTextNode(t)), this.b = document.createElement("span"), this.c = document.createElement("span"), this.h = document.createElement("span"), this.f = document.createElement("span"), this.g = -1, this.b.style.cssText = "max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;", this.c.style.cssText = "max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;", this.f.style.cssText = "max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;", this.h.style.cssText = "display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;", this.b.appendChild(this.h), this.c.appendChild(this.f), this.a.appendChild(this.b), this.a.appendChild(this.c) }

        function n(t, e) { t.a.style.cssText = "max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:" + e + ";" }

        function r(t) { var e = t.a.offsetWidth,
                i = e + 100; return t.f.style.width = i + "px", t.c.scrollLeft = i, t.b.scrollLeft = t.b.scrollWidth + 100, t.g !== e && (t.g = e, !0) }

        function s(t, i) {
            function n() { var t = s;
                r(t) && t.a.parentNode && i(t.g) } var s = t;
            e(t.b, n), e(t.c, n), r(t) }

        function o(t, e) { var i = e || {};
            this.family = t, this.style = i.style || "normal", this.weight = i.weight || "normal", this.stretch = i.stretch || "normal" } var a = null,
            h = null,
            u = null,
            l = null;

        function c() { return null === l && (l = !!document.fonts), l }

        function d() { if (null === u) { var t = document.createElement("div"); try { t.style.font = "condensed 100px sans-serif" } catch (e) {} u = "" !== t.style.font } return u }

        function p(t, e) { return [t.style, t.weight, d() ? t.stretch : "", "100px", e].join(" ") } o.prototype.load = function(t, e) { var r = this,
                o = t || "BESbswy",
                u = 0,
                l = e || 3e3,
                d = (new Date).getTime(); return new Promise((function(t, e) { if (c() && ! function() { if (null === h)
                            if (c() && /Apple/.test(window.navigator.vendor)) { var t = /AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);
                                h = !!t && 603 > parseInt(t[1], 10) } else h = !1; return h }()) { var f = new Promise((function(t, e) {! function i() {
                                (new Date).getTime() - d >= l ? e(Error(l + "ms timeout exceeded")) : document.fonts.load(p(r, '"' + r.family + '"'), o).then((function(e) { 1 <= e.length ? t() : setTimeout(i, 25) }), e) }() })),
                        m = new Promise((function(t, e) { u = setTimeout((function() { e(Error(l + "ms timeout exceeded")) }), l) }));
                    Promise.race([m, f]).then((function() { clearTimeout(u), t(r) }), e) } else ! function(t) { document.body ? t() : document.addEventListener ? document.addEventListener("DOMContentLoaded", (function e() { document.removeEventListener("DOMContentLoaded", e), t() })) : document.attachEvent("onreadystatechange", (function i() { "interactive" != document.readyState && "complete" != document.readyState || (document.detachEvent("onreadystatechange", i), t()) })) }((function() {
                    function h() { var e;
                        (e = -1 != g && -1 != y || -1 != g && -1 != v || -1 != y && -1 != v) && ((e = g != y && g != v && y != v) || (null === a && (e = /AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent), a = !!e && (536 > parseInt(e[1], 10) || 536 === parseInt(e[1], 10) && 11 >= parseInt(e[2], 10))), e = a && (g == b && y == b && v == b || g == _ && y == _ && v == _ || g == x && y == x && v == x)), e = !e), e && (w.parentNode && w.parentNode.removeChild(w), clearTimeout(u), t(r)) } var c = new i(o),
                        f = new i(o),
                        m = new i(o),
                        g = -1,
                        y = -1,
                        v = -1,
                        b = -1,
                        _ = -1,
                        x = -1,
                        w = document.createElement("div");
                    w.dir = "ltr", n(c, p(r, "sans-serif")), n(f, p(r, "serif")), n(m, p(r, "monospace")), w.appendChild(c.a), w.appendChild(f.a), w.appendChild(m.a), document.body.appendChild(w), b = c.a.offsetWidth, _ = f.a.offsetWidth, x = m.a.offsetWidth,
                        function T() { if ((new Date).getTime() - d >= l) w.parentNode && w.parentNode.removeChild(w), e(Error(l + "ms timeout exceeded"));
                            else { var t = document.hidden;!0 !== t && void 0 !== t || (g = c.a.offsetWidth, y = f.a.offsetWidth, v = m.a.offsetWidth, h()), u = setTimeout(T, 50) } }(), s(c, (function(t) { g = t, h() })), n(c, p(r, '"' + r.family + '",sans-serif')), s(f, (function(t) { y = t, h() })), n(f, p(r, '"' + r.family + '",serif')), s(m, (function(t) { v = t, h() })), n(m, p(r, '"' + r.family + '",monospace')) })) })) }, t.exports = o }() }, function(t, e, i) {
    (function(t) { var n = void 0 !== t && t || "undefined" != typeof self && self || window,
            r = Function.prototype.apply;

        function s(t, e) { this._id = t, this._clearFn = e } e.setTimeout = function() { return new s(r.call(setTimeout, n, arguments), clearTimeout) }, e.setInterval = function() { return new s(r.call(setInterval, n, arguments), clearInterval) }, e.clearTimeout = e.clearInterval = function(t) { t && t.close() }, s.prototype.unref = s.prototype.ref = function() {}, s.prototype.close = function() { this._clearFn.call(n, this._id) }, e.enroll = function(t, e) { clearTimeout(t._idleTimeoutId), t._idleTimeout = e }, e.unenroll = function(t) { clearTimeout(t._idleTimeoutId), t._idleTimeout = -1 }, e._unrefActive = e.active = function(t) { clearTimeout(t._idleTimeoutId); var e = t._idleTimeout;
            e >= 0 && (t._idleTimeoutId = setTimeout((function() { t._onTimeout && t._onTimeout() }), e)) }, i(35), e.setImmediate = "undefined" != typeof self && self.setImmediate || void 0 !== t && t.setImmediate || this && this.setImmediate, e.clearImmediate = "undefined" != typeof self && self.clearImmediate || void 0 !== t && t.clearImmediate || this && this.clearImmediate }).call(this, i(22)) }, function(t, e, i) {
    (function(t, e) {! function(t, i) { "use strict"; if (!t.setImmediate) { var n, r, s, o, a, h = 1,
                    u = {},
                    l = !1,
                    c = t.document,
                    d = Object.getPrototypeOf && Object.getPrototypeOf(t);
                d = d && d.setTimeout ? d : t, "[object process]" === {}.toString.call(t.process) ? n = function(t) { e.nextTick((function() { f(t) })) } : ! function() { if (t.postMessage && !t.importScripts) { var e = !0,
                            i = t.onmessage; return t.onmessage = function() { e = !1 }, t.postMessage("", "*"), t.onmessage = i, e } }() ? t.MessageChannel ? ((s = new MessageChannel).port1.onmessage = function(t) { f(t.data) }, n = function(t) { s.port2.postMessage(t) }) : c && "onreadystatechange" in c.createElement("script") ? (r = c.documentElement, n = function(t) { var e = c.createElement("script");
                    e.onreadystatechange = function() { f(t), e.onreadystatechange = null, r.removeChild(e), e = null }, r.appendChild(e) }) : n = function(t) { setTimeout(f, 0, t) } : (o = "setImmediate$" + Math.random() + "$", a = function(e) { e.source === t && "string" == typeof e.data && 0 === e.data.indexOf(o) && f(+e.data.slice(o.length)) }, t.addEventListener ? t.addEventListener("message", a, !1) : t.attachEvent("onmessage", a), n = function(e) { t.postMessage(o + e, "*") }), d.setImmediate = function(t) { "function" != typeof t && (t = new Function("" + t)); for (var e = new Array(arguments.length - 1), i = 0; i < e.length; i++) e[i] = arguments[i + 1]; var r = { callback: t, args: e }; return u[h] = r, n(h), h++ }, d.clearImmediate = p }

            function p(t) { delete u[t] }

            function f(t) { if (l) setTimeout(f, 0, t);
                else { var e = u[t]; if (e) { l = !0; try {! function(t) { var e = t.callback,
                                    i = t.args; switch (i.length) {
                                    case 0:
                                        e(); break;
                                    case 1:
                                        e(i[0]); break;
                                    case 2:
                                        e(i[0], i[1]); break;
                                    case 3:
                                        e(i[0], i[1], i[2]); break;
                                    default:
                                        e.apply(void 0, i) } }(e) } finally { p(t), l = !1 } } } } }("undefined" == typeof self ? void 0 === t ? this : t : self) }).call(this, i(22), i(27)) }, function(t, e, i) {
    (function(t, n) { var r;! function(s) { e && e.nodeType, t && t.nodeType; var o = "object" == typeof n && n;
            o.global !== o && o.window !== o && o.self; var a, h = 2147483647,
                u = /^xn--/,
                l = /[^\x20-\x7E]/,
                c = /[\x2E\u3002\uFF0E\uFF61]/g,
                d = { overflow: "Overflow: input needs wider integers to process", "not-basic": "Illegal input >= 0x80 (not a basic code point)", "invalid-input": "Invalid input" },
                p = Math.floor,
                f = String.fromCharCode;

            function m(t) { throw new RangeError(d[t]) }

            function g(t, e) { for (var i = t.length, n = []; i--;) n[i] = e(t[i]); return n }

            function y(t, e) { var i = t.split("@"),
                    n = ""; return i.length > 1 && (n = i[0] + "@", t = i[1]), n + g((t = t.replace(c, ".")).split("."), e).join(".") }

            function v(t) { for (var e, i, n = [], r = 0, s = t.length; r < s;)(e = t.charCodeAt(r++)) >= 55296 && e <= 56319 && r < s ? 56320 == (64512 & (i = t.charCodeAt(r++))) ? n.push(((1023 & e) << 10) + (1023 & i) + 65536) : (n.push(e), r--) : n.push(e); return n }

            function b(t) { return g(t, (function(t) { var e = ""; return t > 65535 && (e += f((t -= 65536) >>> 10 & 1023 | 55296), t = 56320 | 1023 & t), e += f(t) })).join("") }

            function _(t, e) { return t + 22 + 75 * (t < 26) - ((0 != e) << 5) }

            function x(t, e, i) { var n = 0; for (t = i ? p(t / 700) : t >> 1, t += p(t / e); t > 455; n += 36) t = p(t / 35); return p(n + 36 * t / (t + 38)) }

            function w(t) { var e, i, n, r, s, o, a, u, l, c, d, f = [],
                    g = t.length,
                    y = 0,
                    v = 128,
                    _ = 72; for ((i = t.lastIndexOf("-")) < 0 && (i = 0), n = 0; n < i; ++n) t.charCodeAt(n) >= 128 && m("not-basic"), f.push(t.charCodeAt(n)); for (r = i > 0 ? i + 1 : 0; r < g;) { for (s = y, o = 1, a = 36; r >= g && m("invalid-input"), ((u = (d = t.charCodeAt(r++)) - 48 < 10 ? d - 22 : d - 65 < 26 ? d - 65 : d - 97 < 26 ? d - 97 : 36) >= 36 || u > p((h - y) / o)) && m("overflow"), y += u * o, !(u < (l = a <= _ ? 1 : a >= _ + 26 ? 26 : a - _)); a += 36) o > p(h / (c = 36 - l)) && m("overflow"), o *= c;
                    _ = x(y - s, e = f.length + 1, 0 == s), p(y / e) > h - v && m("overflow"), v += p(y / e), y %= e, f.splice(y++, 0, v) } return b(f) }

            function T(t) { var e, i, n, r, s, o, a, u, l, c, d, g, y, b, w, T = []; for (g = (t = v(t)).length, e = 128, i = 0, s = 72, o = 0; o < g; ++o)(d = t[o]) < 128 && T.push(f(d)); for (n = r = T.length, r && T.push("-"); n < g;) { for (a = h, o = 0; o < g; ++o)(d = t[o]) >= e && d < a && (a = d); for (a - e > p((h - i) / (y = n + 1)) && m("overflow"), i += (a - e) * y, e = a, o = 0; o < g; ++o)
                        if ((d = t[o]) < e && ++i > h && m("overflow"), d == e) { for (u = i, l = 36; !(u < (c = l <= s ? 1 : l >= s + 26 ? 26 : l - s)); l += 36) w = u - c, b = 36 - c, T.push(f(_(c + w % b, 0))), u = p(w / b);
                            T.push(f(_(u, 0))), s = x(i, y, n == r), i = 0, ++n }++ i, ++e } return T.join("") } a = { version: "1.4.1", ucs2: { decode: v, encode: b }, decode: w, encode: T, toASCII: function(t) { return y(t, (function(t) { return l.test(t) ? "xn--" + T(t) : t })) }, toUnicode: function(t) { return y(t, (function(t) { return u.test(t) ? w(t.slice(4).toLowerCase()) : t })) } }, (r = function() { return a }.call(e, i, e, t)) === undefined || (t.exports = r) }() }).call(this, i(37)(t), i(22)) }, function(t, e) { t.exports = function(t) { return t.webpackPolyfill || (t.deprecate = function() {}, t.paths = [], t.children || (t.children = []), Object.defineProperty(t, "loaded", { enumerable: !0, get: function() { return t.l } }), Object.defineProperty(t, "id", { enumerable: !0, get: function() { return t.i } }), t.webpackPolyfill = 1), t } }, function(t, e, i) { "use strict";
    t.exports = { isString: function(t) { return "string" == typeof t }, isObject: function(t) { return "object" == typeof t && null !== t }, isNull: function(t) { return null === t }, isNullOrUndefined: function(t) { return null == t } } }, function(t, e, i) { "use strict";
    e.decode = e.parse = i(40), e.encode = e.stringify = i(41) }, function(t, e, i) { "use strict";

    function n(t, e) { return Object.prototype.hasOwnProperty.call(t, e) } t.exports = function(t, e, i, s) { e = e || "&", i = i || "="; var o = {}; if ("string" != typeof t || 0 === t.length) return o; var a = /\+/g;
        t = t.split(e); var h = 1e3;
        s && "number" == typeof s.maxKeys && (h = s.maxKeys); var u = t.length;
        h > 0 && u > h && (u = h); for (var l = 0; l < u; ++l) { var c, d, p, f, m = t[l].replace(a, "%20"),
                g = m.indexOf(i);
            g >= 0 ? (c = m.substr(0, g), d = m.substr(g + 1)) : (c = m, d = ""), p = decodeURIComponent(c), f = decodeURIComponent(d), n(o, p) ? r(o[p]) ? o[p].push(f) : o[p] = [o[p], f] : o[p] = f } return o }; var r = Array.isArray || function(t) { return "[object Array]" === Object.prototype.toString.call(t) } }, function(t, e, i) { "use strict"; var n = function(t) { switch (typeof t) {
            case "string":
                return t;
            case "boolean":
                return t ? "true" : "false";
            case "number":
                return isFinite(t) ? t : "";
            default:
                return "" } };
    t.exports = function(t, e, i, a) { return e = e || "&", i = i || "=", null === t && (t = undefined), "object" == typeof t ? s(o(t), (function(o) { var a = encodeURIComponent(n(o)) + i; return r(t[o]) ? s(t[o], (function(t) { return a + encodeURIComponent(n(t)) })).join(e) : a + encodeURIComponent(n(t[o])) })).join(e) : a ? encodeURIComponent(n(a)) + i + encodeURIComponent(n(t)) : "" }; var r = Array.isArray || function(t) { return "[object Array]" === Object.prototype.toString.call(t) };

    function s(t, e) { if (t.map) return t.map(e); for (var i = [], n = 0; n < t.length; n++) i.push(e(t[n], n)); return i } var o = Object.keys || function(t) { var e = []; for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && e.push(i); return e } }, function(t, e, i) { "use strict";
    i.r(e); var n = {};
    i.r(n), i.d(n, "BUILD_DATE", (function() { return st })), i.d(n, "DEBUG", (function() { return ot })), i.d(n, "SHOW_COLLIDERS", (function() { return at })), i.d(n, "STATS", (function() { return ht })), i.d(n, "VERSION_SAVE", (function() { return ut })); var r = i(0);
    class s extends r.Container { constructor() { super() } onPopupOpen(t, e) {} onPopupClose(t) {} onStart() {} onShow() {} onDestroy(t) {} onFocus() {} onFocusLost() {} onResize(t, e) {} onPause() {} onResume() {} update(t) {} } class o extends s { constructor() { super() } startCovering(t) { t() } startResolving(t) { t() } startUncovering(t) { t() } } class a extends s { constructor() { super() } onResize(t, e) {} }
    var h = i(3),
        u = i(11),
        l = i(9),
        c = i(1),
        d = i(5),
        p = function() {
            function t(t, e) { this._output = e, this._input = t } return Object.defineProperty(t.prototype, "destination", { get: function() { return this._input }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "filters", { get: function() { return this._filters }, set: function(t) { var e = this; if (this._filters && (this._filters.forEach((function(t) { t && t.disconnect() })), this._filters = null, this._input.connect(this._output)), t && t.length) { this._filters = t.slice(0), this._input.disconnect(); var i = null;
                        t.forEach((function(t) { null === i ? e._input.connect(t.destination) : i.connect(t.destination), i = t })), i.connect(this._output) } }, enumerable: !0, configurable: !0 }), t.prototype.destroy = function() { this.filters = null, this._input = null, this._output = null }, t }(),
        f = function() {
            function t(t, e) { this.init(t, e) } return t.prototype.init = function(t, e) { this.destination = t, this.source = e || t }, t.prototype.connect = function(t) { this.source.connect(t) }, t.prototype.disconnect = function() { this.source.disconnect() }, t.prototype.destroy = function() { this.disconnect(), this.destination = null, this.source = null }, t }(),
        m = function(t, e) { return (m = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) })(t, e) };

    function g(t, e) {
        function i() { this.constructor = t } m(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i) } var y, v = function() { return (v = Object.assign || function(t) { for (var e, i = 1, n = arguments.length; i < n; i++)
                for (var r in e = arguments[i]) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]); return t }).apply(this, arguments) };

    function b() { return y } var _, x, w, T, S = function() {
            function t() {} return t.setParamValue = function(t, e) { if (t.setValueAtTime) { var i = b().context;
                    t.setValueAtTime(e, i.audioContext.currentTime) } else t.value = e; return e }, t }(),
        E = 0,
        P = function(t) {
            function e(e) { var i = t.call(this) || this; return i.id = E++, i._media = null, i._paused = !1, i._muted = !1, i._elapsed = 0, i.init(e), i } return g(e, t), e.prototype.set = function(t, e) { if (void 0 === this[t]) throw new Error("Property with name " + t + " does not exist."); return this[t] = e, this }, e.prototype.stop = function() { this._source && (this._internalStop(), this.emit("stop")) }, Object.defineProperty(e.prototype, "speed", { get: function() { return this._speed }, set: function(t) { this._speed = t, this.refresh(), this._update(!0) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "volume", { get: function() { return this._volume }, set: function(t) { this._volume = t, this.refresh() }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "muted", { get: function() { return this._muted }, set: function(t) { this._muted = t, this.refresh() }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "loop", { get: function() { return this._loop }, set: function(t) { this._loop = t, this.refresh() }, enumerable: !0, configurable: !0 }), e.prototype.refresh = function() { if (this._source) { var t = this._media.context,
                        e = this._media.parent;
                    this._source.loop = this._loop || e.loop; var i = t.volume * (t.muted ? 0 : 1),
                        n = e.volume * (e.muted ? 0 : 1),
                        r = this._volume * (this._muted ? 0 : 1);
                    S.setParamValue(this._gain.gain, r * n * i), S.setParamValue(this._source.playbackRate, this._speed * e.speed * t.speed) } }, e.prototype.refreshPaused = function() { var t = this._media.context,
                    e = this._media.parent,
                    i = this._paused || e.paused || t.paused;
                i !== this._pausedReal && (this._pausedReal = i, i ? (this._internalStop(), this.emit("paused")) : (this.emit("resumed"), this.play({ start: this._elapsed % this._duration, end: this._end, speed: this._speed, loop: this._loop, volume: this._volume })), this.emit("pause", i)) }, e.prototype.play = function(t) { var e = t.start,
                    i = t.end,
                    n = t.speed,
                    r = t.loop,
                    s = t.volume,
                    o = t.muted;
                this._paused = !1; var a = this._media.nodes.cloneBufferSource(),
                    h = a.source,
                    u = a.gain;
                this._source = h, this._gain = u, this._speed = n, this._volume = s, this._loop = !!r, this._muted = o, this.refresh(); var l = this._source.buffer.duration;
                this._duration = l, this._end = i, this._lastUpdate = this._now(), this._elapsed = e, this._source.onended = this._onComplete.bind(this), this._loop ? (this._source.loopEnd = i, this._source.loopStart = e, this._source.start(0, e)) : i ? this._source.start(0, e, i - e) : this._source.start(0, e), this.emit("start"), this._update(!0), this._enabled = !0 }, e.prototype._toSec = function(t) { return t > 10 && (t /= 1e3), t || 0 }, Object.defineProperty(e.prototype, "_enabled", { set: function(t) { l.a.shared.remove(this._updateListener, this), t && l.a.shared.add(this._updateListener, this) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "progress", { get: function() { return this._progress }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "paused", { get: function() { return this._paused }, set: function(t) { this._paused = t, this.refreshPaused() }, enumerable: !0, configurable: !0 }), e.prototype.destroy = function() { this.removeAllListeners(), this._internalStop(), this._gain && (this._gain.disconnect(), this._gain = null), this._media && (this._media.context.events.off("refresh", this.refresh, this), this._media.context.events.off("refreshPaused", this.refreshPaused, this), this._media = null), this._end = null, this._speed = 1, this._volume = 1, this._loop = !1, this._elapsed = 0, this._duration = 0, this._paused = !1, this._muted = !1, this._pausedReal = !1 }, e.prototype.toString = function() { return "[WebAudioInstance id=" + this.id + "]" }, e.prototype._now = function() { return this._media.context.audioContext.currentTime }, e.prototype._updateListener = function() { this._update() }, e.prototype._update = function(t) { if (void 0 === t && (t = !1), this._source) { var e = this._now(),
                        i = e - this._lastUpdate; if (i > 0 || t) { var n = this._source.playbackRate.value;
                        this._elapsed += i * n, this._lastUpdate = e; var r = this._duration,
                            s = void 0; if (this._source.loopStart) { var o = this._source.loopEnd - this._source.loopStart;
                            s = (this._source.loopStart + this._elapsed % o) / r } else s = this._elapsed % r / r;
                        this._progress = s, this.emit("progress", this._progress, r) } } }, e.prototype.init = function(t) { this._media = t, t.context.events.on("refresh", this.refresh, this), t.context.events.on("refreshPaused", this.refreshPaused, this) }, e.prototype._internalStop = function() { this._source && (this._enabled = !1, this._source.onended = null, this._source.stop(0), this._source.disconnect(), this._source = null) }, e.prototype._onComplete = function() { this._source && (this._enabled = !1, this._source.onended = null, this._source.disconnect()), this._source = null, this._progress = 1, this.emit("progress", 1, this._duration), this.emit("end", this) }, e }(c.EventEmitter),
        C = function(t) {
            function e(e) { var i = this,
                    n = e.audioContext,
                    r = n.createBufferSource(),
                    s = n.createGain(),
                    o = n.createAnalyser(); return r.connect(o), o.connect(s), s.connect(e.destination), (i = t.call(this, o, s) || this).context = e, i.bufferSource = r, i.gain = s, i.analyser = o, i } return g(e, t), Object.defineProperty(e.prototype, "script", { get: function() { return this._script || (this._script = this.context.audioContext.createScriptProcessor(e.BUFFER_SIZE), this._script.connect(this.context.destination)), this._script }, enumerable: !0, configurable: !0 }), e.prototype.destroy = function() { t.prototype.destroy.call(this), this.bufferSource.disconnect(), this._script && this._script.disconnect(), this.gain.disconnect(), this.analyser.disconnect(), this.bufferSource = null, this._script = null, this.gain = null, this.analyser = null, this.context = null }, e.prototype.cloneBufferSource = function() { var t = this.bufferSource,
                    e = this.context.audioContext.createBufferSource();
                e.buffer = t.buffer, S.setParamValue(e.playbackRate, t.playbackRate.value), e.loop = t.loop; var i = this.context.audioContext.createGain(); return e.connect(i), i.connect(this.destination), { source: e, gain: i } }, Object.defineProperty(e.prototype, "bufferSize", { get: function() { return this.script.bufferSize }, enumerable: !0, configurable: !0 }), e.BUFFER_SIZE = 0, e }(p),
        O = function() {
            function t() {} return t.prototype.init = function(t) { this.parent = t, this._nodes = new C(this.context), this._source = this._nodes.bufferSource, this.source = t.options.source }, t.prototype.destroy = function() { this.parent = null, this._nodes.destroy(), this._nodes = null, this._source = null, this.source = null }, t.prototype.create = function() { return new P(this) }, Object.defineProperty(t.prototype, "context", { get: function() { return this.parent.context }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "isPlayable", { get: function() { return !!this._source && !!this._source.buffer }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "filters", { get: function() { return this._nodes.filters }, set: function(t) { this._nodes.filters = t }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "duration", { get: function() { return this._source.buffer.duration }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "buffer", { get: function() { return this._source.buffer }, set: function(t) { this._source.buffer = t }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "nodes", { get: function() { return this._nodes }, enumerable: !0, configurable: !0 }), t.prototype.load = function(t) { this.source ? this._decode(this.source, t) : this.parent.url ? this._loadUrl(t) : t && t(new Error("sound.url or sound.source must be set")) }, t.prototype._loadUrl = function(t) { var e = this,
                    i = new XMLHttpRequest,
                    n = this.parent.url;
                i.open("GET", n, !0), i.responseType = "arraybuffer", i.onload = function() { e.source = i.response, e._decode(i.response, t) }, i.send() }, t.prototype._decode = function(t, e) { var i = this;
                this.parent.context.decode(t, (function(t, n) { if (t) e && e(t);
                    else { i.parent.isLoaded = !0, i.buffer = n; var r = i.parent.autoPlayStart();
                        e && e(null, i.parent, r) } })) }, t }(),
        A = function(t) {
            function e() { var i = this,
                    n = window,
                    r = new e.AudioContext,
                    s = r.createDynamicsCompressor(),
                    o = r.createAnalyser(); return o.connect(s), s.connect(r.destination), (i = t.call(this, o, s) || this)._ctx = r, i._offlineCtx = new e.OfflineAudioContext(1, 2, n.OfflineAudioContext ? r.sampleRate : 44100), i._unlocked = !1, i.compressor = s, i.analyser = o, i.events = new c.EventEmitter, i.volume = 1, i.speed = 1, i.muted = !1, i.paused = !1, "running" !== r.state && (i._unlock(), i._unlock = i._unlock.bind(i), document.addEventListener("mousedown", i._unlock, !0), document.addEventListener("touchstart", i._unlock, !0), document.addEventListener("touchend", i._unlock, !0)), i } return g(e, t), e.prototype._unlock = function() { this._unlocked || (this.playEmptySound(), "running" === this._ctx.state && (document.removeEventListener("mousedown", this._unlock, !0), document.removeEventListener("touchend", this._unlock, !0), document.removeEventListener("touchstart", this._unlock, !0), this._unlocked = !0)) }, e.prototype.playEmptySound = function() { var t = this._ctx.createBufferSource();
                t.buffer = this._ctx.createBuffer(1, 1, 22050), t.connect(this._ctx.destination), t.start(0, 0, 0), "suspended" === t.context.state && t.context.resume() }, Object.defineProperty(e, "AudioContext", { get: function() { var t = window; return t.AudioContext || t.webkitAudioContext || null }, enumerable: !0, configurable: !0 }), Object.defineProperty(e, "OfflineAudioContext", { get: function() { var t = window; return t.OfflineAudioContext || t.webkitOfflineAudioContext || null }, enumerable: !0, configurable: !0 }), e.prototype.destroy = function() { t.prototype.destroy.call(this); var e = this._ctx;
                void 0 !== e.close && e.close(), this.events.removeAllListeners(), this.analyser.disconnect(), this.compressor.disconnect(), this.analyser = null, this.compressor = null, this.events = null, this._offlineCtx = null, this._ctx = null }, Object.defineProperty(e.prototype, "audioContext", { get: function() { return this._ctx }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "offlineContext", { get: function() { return this._offlineCtx }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "paused", { get: function() { return this._paused }, set: function(t) { t && "running" === this._ctx.state ? this._ctx.suspend() : t || "suspended" !== this._ctx.state || this._ctx.resume(), this._paused = t }, enumerable: !0, configurable: !0 }), e.prototype.refresh = function() { this.events.emit("refresh") }, e.prototype.refreshPaused = function() { this.events.emit("refreshPaused") }, e.prototype.toggleMute = function() { return this.muted = !this.muted, this.refresh(), this.muted }, e.prototype.togglePause = function() { return this.paused = !this.paused, this.refreshPaused(), this._paused }, e.prototype.decode = function(t, e) { this._offlineCtx.decodeAudioData(t, (function(t) { e(null, t) }), (function(t) { e(new Error(t.message || "Unable to decode file")) })) }, e }(p),
        I = { WebAudioMedia: O, WebAudioInstance: P, WebAudioNodes: C, WebAudioContext: A, WebAudioUtils: S },
        R = { Filter: f, EqualizerFilter: function(t) {
                function e(i, n, r, s, o, a, h, u, l, c) { void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === r && (r = 0), void 0 === s && (s = 0), void 0 === o && (o = 0), void 0 === a && (a = 0), void 0 === h && (h = 0), void 0 === u && (u = 0), void 0 === l && (l = 0), void 0 === c && (c = 0); var d = this; if (!b().useLegacy) { var p = [{ f: e.F32, type: "lowshelf", gain: i }, { f: e.F64, type: "peaking", gain: n }, { f: e.F125, type: "peaking", gain: r }, { f: e.F250, type: "peaking", gain: s }, { f: e.F500, type: "peaking", gain: o }, { f: e.F1K, type: "peaking", gain: a }, { f: e.F2K, type: "peaking", gain: h }, { f: e.F4K, type: "peaking", gain: u }, { f: e.F8K, type: "peaking", gain: l }, { f: e.F16K, type: "highshelf", gain: c }].map((function(t) { var e = b().context.audioContext.createBiquadFilter(); return e.type = t.type, S.setParamValue(e.Q, 1), e.frequency.value = t.f, S.setParamValue(e.gain, t.gain), e }));
                        (d = t.call(this, p[0], p[p.length - 1]) || this).bands = p, d.bandsMap = {}; for (var f = 0; f < d.bands.length; f++) { var m = d.bands[f];
                            f > 0 && d.bands[f - 1].connect(m), d.bandsMap[m.frequency.value] = m } return d } d = t.call(this, null) || this } return g(e, t), e.prototype.setGain = function(t, e) { if (void 0 === e && (e = 0), !this.bandsMap[t]) throw new Error("No band found for frequency " + t);
                    S.setParamValue(this.bandsMap[t].gain, e) }, e.prototype.getGain = function(t) { if (!this.bandsMap[t]) throw new Error("No band found for frequency " + t); return this.bandsMap[t].gain.value }, Object.defineProperty(e.prototype, "f32", { get: function() { return this.getGain(e.F32) }, set: function(t) { this.setGain(e.F32, t) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "f64", { get: function() { return this.getGain(e.F64) }, set: function(t) { this.setGain(e.F64, t) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "f125", { get: function() { return this.getGain(e.F125) }, set: function(t) { this.setGain(e.F125, t) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "f250", { get: function() { return this.getGain(e.F250) }, set: function(t) { this.setGain(e.F250, t) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "f500", { get: function() { return this.getGain(e.F500) }, set: function(t) { this.setGain(e.F500, t) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "f1k", { get: function() { return this.getGain(e.F1K) }, set: function(t) { this.setGain(e.F1K, t) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "f2k", { get: function() { return this.getGain(e.F2K) }, set: function(t) { this.setGain(e.F2K, t) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "f4k", { get: function() { return this.getGain(e.F4K) }, set: function(t) { this.setGain(e.F4K, t) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "f8k", { get: function() { return this.getGain(e.F8K) }, set: function(t) { this.setGain(e.F8K, t) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "f16k", { get: function() { return this.getGain(e.F16K) }, set: function(t) { this.setGain(e.F16K, t) }, enumerable: !0, configurable: !0 }), e.prototype.reset = function() { this.bands.forEach((function(t) { S.setParamValue(t.gain, 0) })) }, e.prototype.destroy = function() { this.bands.forEach((function(t) { t.disconnect() })), this.bands = null, this.bandsMap = null }, e.F32 = 32, e.F64 = 64, e.F125 = 125, e.F250 = 250, e.F500 = 500, e.F1K = 1e3, e.F2K = 2e3, e.F4K = 4e3, e.F8K = 8e3, e.F16K = 16e3, e }(f), DistortionFilter: function(t) {
                function e(e) { void 0 === e && (e = 0); var i = this; if (!b().useLegacy) { var n = b().context.audioContext.createWaveShaper(); return (i = t.call(this, n) || this)._distortion = n, i.amount = e, i } i = t.call(this, null) || this } return g(e, t), Object.defineProperty(e.prototype, "amount", { get: function() { return this._amount }, set: function(t) { t *= 1e3, this._amount = t; for (var e, i = new Float32Array(44100), n = Math.PI / 180, r = 0; r < 44100; ++r) e = 2 * r / 44100 - 1, i[r] = (3 + t) * e * 20 * n / (Math.PI + t * Math.abs(e));
                        this._distortion.curve = i, this._distortion.oversample = "4x" }, enumerable: !0, configurable: !0 }), e.prototype.destroy = function() { this._distortion = null, t.prototype.destroy.call(this) }, e }(f), StereoFilter: function(t) {
                function e(e) { void 0 === e && (e = 0); var i = this; if (!b().useLegacy) { var n, r, s, o = b().context.audioContext; return o.createStereoPanner ? s = n = o.createStereoPanner() : ((r = o.createPanner()).panningModel = "equalpower", s = r), (i = t.call(this, s) || this)._stereo = n, i._panner = r, i.pan = e, i } i = t.call(this, null) || this } return g(e, t), Object.defineProperty(e.prototype, "pan", { get: function() { return this._pan }, set: function(t) { this._pan = t, this._stereo ? S.setParamValue(this._stereo.pan, t) : this._panner.setPosition(t, 0, 1 - Math.abs(t)) }, enumerable: !0, configurable: !0 }), e.prototype.destroy = function() { t.prototype.destroy.call(this), this._stereo = null, this._panner = null }, e }(f), ReverbFilter: function(t) {
                function e(e, i, n) { void 0 === e && (e = 3), void 0 === i && (i = 2), void 0 === n && (n = !1); var r = this; if (!b().useLegacy) return (r = t.call(this, null) || this)._seconds = r._clamp(e, 1, 50), r._decay = r._clamp(i, 0, 100), r._reverse = n, r._rebuild(), r;
                    r = t.call(this, null) || this } return g(e, t), e.prototype._clamp = function(t, e, i) { return Math.min(i, Math.max(e, t)) }, Object.defineProperty(e.prototype, "seconds", { get: function() { return this._seconds }, set: function(t) { this._seconds = this._clamp(t, 1, 50), this._rebuild() }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "decay", { get: function() { return this._decay }, set: function(t) { this._decay = this._clamp(t, 0, 100), this._rebuild() }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "reverse", { get: function() { return this._reverse }, set: function(t) { this._reverse = t, this._rebuild() }, enumerable: !0, configurable: !0 }), e.prototype._rebuild = function() { for (var t, e = b().context.audioContext, i = e.sampleRate, n = i * this._seconds, r = e.createBuffer(2, n, i), s = r.getChannelData(0), o = r.getChannelData(1), a = 0; a < n; a++) t = this._reverse ? n - a : a, s[a] = (2 * Math.random() - 1) * Math.pow(1 - t / n, this._decay), o[a] = (2 * Math.random() - 1) * Math.pow(1 - t / n, this._decay); var h = b().context.audioContext.createConvolver();
                    h.buffer = r, this.init(h) }, e }(f), MonoFilter: function(t) {
                function e() { var e = this; if (!b().useLegacy) { var i = b().context.audioContext,
                            n = i.createChannelSplitter(),
                            r = i.createChannelMerger(); return r.connect(n), (e = t.call(this, r, n) || this)._merger = r, e } e = t.call(this, null) || this } return g(e, t), e.prototype.destroy = function() { this._merger.disconnect(), this._merger = null, t.prototype.destroy.call(this) }, e }(f), TelephoneFilter: function(t) {
                function e() { if (!b().useLegacy) { var e = b().context.audioContext,
                            i = e.createBiquadFilter(),
                            n = e.createBiquadFilter(),
                            r = e.createBiquadFilter(),
                            s = e.createBiquadFilter(); return i.type = "lowpass", S.setParamValue(i.frequency, 2e3), n.type = "lowpass", S.setParamValue(n.frequency, 2e3), r.type = "highpass", S.setParamValue(r.frequency, 500), s.type = "highpass", S.setParamValue(s.frequency, 500), i.connect(n), n.connect(r), r.connect(s), t.call(this, i, s) || this } t.call(this, null) } return g(e, t), e }(f) },
        M = 0,
        L = function(t) {
            function e(e) { var i = t.call(this) || this; return i.id = M++, i.init(e), i } return g(e, t), e.prototype.set = function(t, e) { if (void 0 === this[t]) throw new Error("Property with name " + t + " does not exist."); return this[t] = e, this }, Object.defineProperty(e.prototype, "progress", { get: function() { return this._source.currentTime / this._duration }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "paused", { get: function() { return this._paused }, set: function(t) { this._paused = t, this.refreshPaused() }, enumerable: !0, configurable: !0 }), e.prototype._onPlay = function() { this._playing = !0 }, e.prototype._onPause = function() { this._playing = !1 }, e.prototype.init = function(t) { this._playing = !1, this._duration = t.source.duration; var e = this._source = t.source.cloneNode(!1);
                e.src = t.parent.url, e.onplay = this._onPlay.bind(this), e.onpause = this._onPause.bind(this), t.context.on("refresh", this.refresh, this), t.context.on("refreshPaused", this.refreshPaused, this), this._media = t }, e.prototype._internalStop = function() { this._source && this._playing && (this._source.onended = null, this._source.pause()) }, e.prototype.stop = function() { this._internalStop(), this._source && this.emit("stop") }, Object.defineProperty(e.prototype, "speed", { get: function() { return this._speed }, set: function(t) { this._speed = t, this.refresh() }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "volume", { get: function() { return this._volume }, set: function(t) { this._volume = t, this.refresh() }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "loop", { get: function() { return this._loop }, set: function(t) { this._loop = t, this.refresh() }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "muted", { get: function() { return this._muted }, set: function(t) { this._muted = t, this.refresh() }, enumerable: !0, configurable: !0 }), e.prototype.refresh = function() { var t = this._media.context,
                    e = this._media.parent;
                this._source.loop = this._loop || e.loop; var i = t.volume * (t.muted ? 0 : 1),
                    n = e.volume * (e.muted ? 0 : 1),
                    r = this._volume * (this._muted ? 0 : 1);
                this._source.volume = r * i * n, this._source.playbackRate = this._speed * t.speed * e.speed }, e.prototype.refreshPaused = function() { var t = this._media.context,
                    e = this._media.parent,
                    i = this._paused || e.paused || t.paused;
                i !== this._pausedReal && (this._pausedReal = i, i ? (this._internalStop(), this.emit("paused")) : (this.emit("resumed"), this.play({ start: this._source.currentTime, end: this._end, volume: this._volume, speed: this._speed, loop: this._loop })), this.emit("pause", i)) }, e.prototype.play = function(t) { var i = this,
                    n = t.start,
                    r = t.end,
                    s = t.speed,
                    o = t.loop,
                    a = t.volume,
                    h = t.muted;
                this._speed = s, this._volume = a, this._loop = !!o, this._muted = h, this.refresh(), this.loop && null !== r && (this.loop = !1), this._start = n, this._end = r || this._duration, this._start = Math.max(0, this._start - e.PADDING), this._end = Math.min(this._end + e.PADDING, this._duration), this._source.onloadedmetadata = function() { i._source && (i._source.currentTime = n, i._source.onloadedmetadata = null, i.emit("progress", n, i._duration), l.a.shared.add(i._onUpdate, i)) }, this._source.onended = this._onComplete.bind(this), this._source.play(), this.emit("start") }, e.prototype._onUpdate = function() { this.emit("progress", this.progress, this._duration), this._source.currentTime >= this._end && !this._source.loop && this._onComplete() }, e.prototype._onComplete = function() { l.a.shared.remove(this._onUpdate, this), this._internalStop(), this.emit("progress", 1, this._duration), this.emit("end", this) }, e.prototype.destroy = function() { l.a.shared.remove(this._onUpdate, this), this.removeAllListeners(); var t = this._source;
                t && (t.onended = null, t.onplay = null, t.onpause = null, this._internalStop()), this._source = null, this._speed = 1, this._volume = 1, this._loop = !1, this._end = null, this._start = 0, this._duration = 0, this._playing = !1, this._pausedReal = !1, this._paused = !1, this._muted = !1, this._media && (this._media.context.off("refresh", this.refresh, this), this._media.context.off("refreshPaused", this.refreshPaused, this), this._media = null) }, e.prototype.toString = function() { return "[HTMLAudioInstance id=" + this.id + "]" }, e.PADDING = .1, e }(c.EventEmitter),
        D = function(t) {
            function e() { return null !== t && t.apply(this, arguments) || this } return g(e, t), e.prototype.init = function(t) { this.parent = t, this._source = t.options.source || new Audio, t.url && (this._source.src = t.url) }, e.prototype.create = function() { return new L(this) }, Object.defineProperty(e.prototype, "isPlayable", { get: function() { return !!this._source && 4 === this._source.readyState }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "duration", { get: function() { return this._source.duration }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "context", { get: function() { return this.parent.context }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "filters", { get: function() { return null }, set: function(t) {}, enumerable: !0, configurable: !0 }), e.prototype.destroy = function() { this.removeAllListeners(), this.parent = null, this._source && (this._source.src = "", this._source.load(), this._source = null) }, Object.defineProperty(e.prototype, "source", { get: function() { return this._source }, enumerable: !0, configurable: !0 }), e.prototype.load = function(t) { var e = this._source,
                    i = this.parent; if (4 !== e.readyState) { if (!i.url) return t(new Error("sound.url or sound.source must be set"));
                    e.src = i.url; var n = function() { e.removeEventListener("canplaythrough", r), e.removeEventListener("load", r), e.removeEventListener("abort", s), e.removeEventListener("error", o) },
                        r = function() { n(), i.isLoaded = !0; var e = i.autoPlayStart();
                            t && t(null, i, e) },
                        s = function() { n(), t && t(new Error("Sound loading has been aborted")) },
                        o = function() { n(); var i = "Failed to load audio element (code: " + e.error.code + ")";
                            t && t(new Error(i)) };
                    e.addEventListener("canplaythrough", r, !1), e.addEventListener("load", r, !1), e.addEventListener("abort", s, !1), e.addEventListener("error", o, !1), e.load() } else { i.isLoaded = !0; var a = i.autoPlayStart();
                    t && setTimeout((function() { t(null, i, a) }), 0) } }, e }(c.EventEmitter),
        k = function(t) {
            function e() { var e = t.call(this) || this; return e.speed = 1, e.volume = 1, e.muted = !1, e.paused = !1, e } return g(e, t), e.prototype.refresh = function() { this.emit("refresh") }, e.prototype.refreshPaused = function() { this.emit("refreshPaused") }, Object.defineProperty(e.prototype, "filters", { get: function() { return null }, set: function(t) {}, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "audioContext", { get: function() { return null }, enumerable: !0, configurable: !0 }), e.prototype.toggleMute = function() { return this.muted = !this.muted, this.refresh(), this.muted }, e.prototype.togglePause = function() { return this.paused = !this.paused, this.refreshPaused(), this.paused }, e.prototype.destroy = function() { this.removeAllListeners() }, e }(c.EventEmitter),
        N = { HTMLAudioMedia: D, HTMLAudioInstance: L, HTMLAudioContext: k },
        F = ["mp3", "ogg", "oga", "opus", "mpeg", "wav", "m4a", "aiff", "wma", "mid"],
        B = (_ = { m4a: "mp4", oga: "ogg" }, x = document.createElement("audio"), w = {}, T = /^no$/, F.forEach((function(t) { var e = _[t] || t,
                i = x.canPlayType("audio/" + t).replace(T, ""),
                n = x.canPlayType("audio/" + e).replace(T, "");
            w[t] = !!i || !!n })), Object.freeze(w)),
        j = /\.(\{([^\}]+)\})(\?.*)?$/;

    function U(t) { var e = j,
            i = "string" == typeof t ? t : t.url; if (e.test(i)) { for (var n = e.exec(i), r = n[2].split(","), s = r[r.length - 1], o = 0, a = r.length; o < a; o++) { var h = r[o]; if (B[h]) { s = h; break } } var u = i.replace(n[1], s); return "string" != typeof t && (t.extension = s, t.url = u), u } return i } var G, X = function() {
            function t() {} return t.add = function() { t.legacy = b().useLegacy }, Object.defineProperty(t, "legacy", { set: function(t) { var e = F;
                    t ? e.forEach((function(t) { u.c.setExtensionXhrType(t, u.c.XHR_RESPONSE_TYPE.DEFAULT), u.c.setExtensionLoadType(t, u.c.LOAD_TYPE.AUDIO) })) : e.forEach((function(t) { u.c.setExtensionXhrType(t, u.c.XHR_RESPONSE_TYPE.BUFFER), u.c.setExtensionLoadType(t, u.c.LOAD_TYPE.XHR) })) }, enumerable: !0, configurable: !0 }), t.pre = function(t, e) { U(t), e() }, t.use = function(t, e) { t.data && F.indexOf(t.extension) > -1 ? t.sound = b().add(t.name, { loaded: e, preload: !0, url: t.url, source: t.data }) : e() }, t }(),
        H = function() {
            function t(t, e) { this.parent = t, Object.assign(this, e), this.duration = this.end - this.start } return t.prototype.play = function(t) { return this.parent.play({ complete: t, speed: this.speed || this.parent.speed, end: this.end, start: this.start, loop: this.loop }) }, t.prototype.destroy = function() { this.parent = null }, t }(),
        z = function() {
            function t(t, e) { this.media = t, this.options = e, this._instances = [], this._sprites = {}, this.media.init(this); var i = e.complete;
                this._autoPlayOptions = i ? { complete: i } : null, this.isLoaded = !1, this.isPlaying = !1, this.autoPlay = e.autoPlay, this.singleInstance = e.singleInstance, this.preload = e.preload || this.autoPlay, this.url = e.url, this.speed = e.speed, this.volume = e.volume, this.loop = e.loop, e.sprites && this.addSprites(e.sprites), this.preload && this._preload(e.loaded) } return t.from = function(e) { var i = {}; return "string" == typeof e ? i.url = e : e instanceof ArrayBuffer || e instanceof HTMLAudioElement ? i.source = e : i = e, (i = v({ autoPlay: !1, singleInstance: !1, url: null, source: null, preload: !1, volume: 1, speed: 1, complete: null, loaded: null, loop: !1 }, i)).url && (i.url = U(i.url)), Object.freeze(i), new t(b().useLegacy ? new D : new O, i) }, Object.defineProperty(t.prototype, "context", { get: function() { return b().context }, enumerable: !0, configurable: !0 }), t.prototype.pause = function() { return this.isPlaying = !1, this.paused = !0, this }, t.prototype.resume = function() { return this.isPlaying = this._instances.length > 0, this.paused = !1, this }, Object.defineProperty(t.prototype, "paused", { get: function() { return this._paused }, set: function(t) { this._paused = t, this.refreshPaused() }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "speed", { get: function() { return this._speed }, set: function(t) { this._speed = t, this.refresh() }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "filters", { get: function() { return this.media.filters }, set: function(t) { this.media.filters = t }, enumerable: !0, configurable: !0 }), t.prototype.addSprites = function(t, e) { if ("object" == typeof t) { var i = {}; for (var n in t) i[n] = this.addSprites(n, t[n]); return i } if ("string" == typeof t) { var r = new H(this, e); return this._sprites[t] = r, r } }, t.prototype.destroy = function() { this._removeInstances(), this.removeSprites(), this.media.destroy(), this.media = null, this._sprites = null, this._instances = null }, t.prototype.removeSprites = function(t) { if (t) { var e = this._sprites[t];
                    void 0 !== e && (e.destroy(), delete this._sprites[t]) } else
                    for (var i in this._sprites) this.removeSprites(i); return this }, Object.defineProperty(t.prototype, "isPlayable", { get: function() { return this.isLoaded && this.media && this.media.isPlayable }, enumerable: !0, configurable: !0 }), t.prototype.stop = function() { if (!this.isPlayable) return this.autoPlay = !1, this._autoPlayOptions = null, this;
                this.isPlaying = !1; for (var t = this._instances.length - 1; t >= 0; t--) this._instances[t].stop(); return this }, t.prototype.play = function(t, e) { var i, n = this; if ("string" == typeof t ? i = { sprite: s = t, loop: this.loop, complete: e } : "function" == typeof t ? (i = {}).complete = t : i = t, (i = v({ complete: null, loaded: null, sprite: null, end: null, start: 0, volume: 1, speed: 1, muted: !1, loop: !1 }, i || {})).sprite) { var r = i.sprite,
                        s = this._sprites[r];
                    i.start = s.start, i.end = s.end, i.speed = s.speed || 1, i.loop = s.loop || i.loop, delete i.sprite } if (i.offset && (i.start = i.offset), !this.isLoaded) return new Promise((function(t, e) { n.autoPlay = !0, n._autoPlayOptions = i, n._preload((function(n, r, s) { n ? e(n) : (i.loaded && i.loaded(n, r, s), t(s)) })) }));
                this.singleInstance && this._removeInstances(); var o = this._createInstance(); return this._instances.push(o), this.isPlaying = !0, o.once("end", (function() { i.complete && i.complete(n), n._onComplete(o) })), o.once("stop", (function() { n._onComplete(o) })), o.play(i), o }, t.prototype.refresh = function() { for (var t = this._instances.length, e = 0; e < t; e++) this._instances[e].refresh() }, t.prototype.refreshPaused = function() { for (var t = this._instances.length, e = 0; e < t; e++) this._instances[e].refreshPaused() }, Object.defineProperty(t.prototype, "volume", { get: function() { return this._volume }, set: function(t) { this._volume = t, this.refresh() }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "muted", { get: function() { return this._muted }, set: function(t) { this._muted = t, this.refresh() }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "loop", { get: function() { return this._loop }, set: function(t) { this._loop = t, this.refresh() }, enumerable: !0, configurable: !0 }), t.prototype._preload = function(t) { this.media.load(t) }, Object.defineProperty(t.prototype, "instances", { get: function() { return this._instances }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "sprites", { get: function() { return this._sprites }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "duration", { get: function() { return this.media.duration }, enumerable: !0, configurable: !0 }), t.prototype.autoPlayStart = function() { var t; return this.autoPlay && (t = this.play(this._autoPlayOptions)), t }, t.prototype._removeInstances = function() { for (var t = this._instances.length - 1; t >= 0; t--) this._poolInstance(this._instances[t]);
                this._instances.length = 0 }, t.prototype._onComplete = function(t) { if (this._instances) { var e = this._instances.indexOf(t);
                    e > -1 && this._instances.splice(e, 1), this.isPlaying = this._instances.length > 0 } this._poolInstance(t) }, t.prototype._createInstance = function() { if (t._pool.length > 0) { var e = t._pool.pop(); return e.init(this.media), e } return this.media.create() }, t.prototype._poolInstance = function(e) { e.destroy(), t._pool.indexOf(e) < 0 && t._pool.push(e) }, t._pool = [], t }(),
        V = function() {
            function t() { this.init() } return t.prototype.init = function() { return this.supported && (this._webAudioContext = new A), this._htmlAudioContext = new k, this._sounds = {}, this.useLegacy = !this.supported, this }, Object.defineProperty(t.prototype, "context", { get: function() { return this._context }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "filtersAll", { get: function() { return this.useLegacy ? [] : this._context.filters }, set: function(t) { this.useLegacy || (this._context.filters = t) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "supported", { get: function() { return null !== A.AudioContext }, enumerable: !0, configurable: !0 }), t.prototype.add = function(t, e) { if ("object" == typeof t) { var i = {}; for (var n in t) { var r = this._getOptions(t[n], e);
                        i[n] = this.add(n, r) } return i } if ("string" == typeof t) { if (e instanceof z) return this._sounds[t] = e, e;
                    r = this._getOptions(e); var s = z.from(r); return this._sounds[t] = s, s } }, t.prototype._getOptions = function(t, e) { var i; return i = "string" == typeof t ? { url: t } : t instanceof ArrayBuffer || t instanceof HTMLAudioElement ? { source: t } : t, v({}, i, e || {}) }, Object.defineProperty(t.prototype, "useLegacy", { get: function() { return this._useLegacy }, set: function(t) { X.legacy = t, this._useLegacy = t, this._context = !t && this.supported ? this._webAudioContext : this._htmlAudioContext }, enumerable: !0, configurable: !0 }), t.prototype.remove = function(t) { return this.exists(t, !0), this._sounds[t].destroy(), delete this._sounds[t], this }, Object.defineProperty(t.prototype, "volumeAll", { get: function() { return this._context.volume }, set: function(t) { this._context.volume = t, this._context.refresh() }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "speedAll", { get: function() { return this._context.speed }, set: function(t) { this._context.speed = t, this._context.refresh() }, enumerable: !0, configurable: !0 }), t.prototype.togglePauseAll = function() { return this._context.togglePause() }, t.prototype.pauseAll = function() { return this._context.paused = !0, this._context.refreshPaused(), this }, t.prototype.resumeAll = function() { return this._context.paused = !1, this._context.refreshPaused(), this }, t.prototype.toggleMuteAll = function() { return this._context.toggleMute() }, t.prototype.muteAll = function() { return this._context.muted = !0, this._context.refresh(), this }, t.prototype.unmuteAll = function() { return this._context.muted = !1, this._context.refresh(), this }, t.prototype.removeAll = function() { for (var t in this._sounds) this._sounds[t].destroy(), delete this._sounds[t]; return this }, t.prototype.stopAll = function() { for (var t in this._sounds) this._sounds[t].stop(); return this }, t.prototype.exists = function(t, e) { return void 0 === e && (e = !1), !!this._sounds[t] }, t.prototype.find = function(t) { return this.exists(t, !0), this._sounds[t] }, t.prototype.play = function(t, e) { return this.find(t).play(e) }, t.prototype.stop = function(t) { return this.find(t).stop() }, t.prototype.pause = function(t) { return this.find(t).pause() }, t.prototype.resume = function(t) { return this.find(t).resume() }, t.prototype.volume = function(t, e) { var i = this.find(t); return void 0 !== e && (i.volume = e), i.volume }, t.prototype.speed = function(t, e) { var i = this.find(t); return void 0 !== e && (i.speed = e), i.speed }, t.prototype.duration = function(t) { return this.find(t).duration }, t.prototype.close = function() { return this.removeAll(), this._sounds = null, this._webAudioContext && (this._webAudioContext.destroy(), this._webAudioContext = null), this._htmlAudioContext && (this._htmlAudioContext.destroy(), this._htmlAudioContext = null), this._context = null, this }, t }(),
        W = 0,
        Y = { get PLAY_ID() { return W }, playOnce: function(t, e) { var i = "alias" + W++; return b().add(i, { url: t, preload: !0, autoPlay: !0, loaded: function(t) { t && (b().remove(i), e && e(t)) }, complete: function() { b().remove(i), e && e(null) } }), i }, render: function(t, e) { var i = document.createElement("canvas");
                e = v({ width: 512, height: 128, fill: "black" }, e || {}), i.width = e.width, i.height = e.height; var n = d.e.from(i); if (!(t.media instanceof O)) return n; var r = t.media,
                    s = i.getContext("2d");
                s.fillStyle = e.fill; for (var o = r.buffer.getChannelData(0), a = Math.ceil(o.length / e.width), h = e.height / 2, u = 0; u < e.width; u++) { for (var l = 1, c = -1, p = 0; p < a; p++) { var f = o[u * a + p];
                        f < l && (l = f), f > c && (c = f) } s.fillRect(u, (1 + l) * h, 1, Math.max(1, (c - l) * h)) } return n }, resolveUrl: U, sineTone: function(t, e) { void 0 === t && (t = 200), void 0 === e && (e = 1); var i = z.from({ singleInstance: !0 }); if (!(i.media instanceof O)) return i; for (var n = i.media, r = i.context.audioContext.createBuffer(1, 48e3 * e, 48e3), s = r.getChannelData(0), o = 0; o < s.length; o++) { var a = t * (o / r.sampleRate) * Math.PI;
                    s[o] = 2 * Math.sin(a) } return n.buffer = r, i.isLoaded = !0, i }, extensions: F, supported: B },
        K = (G = new V, y = G, G);
    u.b.registerPlugin(X), Object.defineProperties(K, { Filterable: { get: function() { return p } }, filters: { get: function() { return R } }, htmlaudio: { get: function() { return N } }, Sound: { get: function() { return z } }, SoundLibrary: { get: function() { return V } }, SoundSprite: { get: function() { return H } }, utils: { get: function() { return Y } }, webaudio: { get: function() { return I } }, sound: { get: function() { return K } } }); var q = K;
    class Q { constructor() {} static initalize() { Q.initialized || (Q.initialized = !0, window.addEventListener("keydown", t => { Q.isDownMap.set(t.keyCode, !0) }), window.addEventListener("keyup", t => { Q.isDownMap.set(t.keyCode, !1) })) } static update() { Q.isDownMap.forEach((t, e) => { t && !Q.previousFrame.get(e) ? Q.justPressedMap.set(e, !0) : Q.justPressedMap.set(e, !1), !t && Q.previousFrame.get(e) ? Q.justReleasedMap.set(e, !0) : Q.justReleasedMap.set(e, !1) }), Q.isDownMap.forEach((t, e) => { Q.previousFrame.set(e, t) }) } static isDown(t) { return Q.isDownMap.get(t) } static justPressed(t) { return Q.justPressedMap.get(t) } static justReleased(t) { return Q.justReleasedMap.get(t) } static isDownAny() { let t = !1; return Q.isDownMap.forEach(e => e ? t = !0 : void 0), t } static justPressedAny() { let t = !1; return Q.justPressedMap.forEach(e => e ? t = !0 : void 0), t } static justReleasedAny() { let t = !1; return Q.justReleasedMap.forEach(e => e ? t = !0 : void 0), t } } Q.isDownMap = new Map, Q.previousFrame = new Map, Q.justPressedMap = new Map, Q.justReleasedMap = new Map; var $ = i(32),
        Z = i.n($);
    class J { constructor(t) { this.drawPasses = 0, this.isInit = !1, this.realGLDrawElements = function() {}, t && t.__proto__.drawElements && (this.gl = t, this.realGLDrawElements = t.__proto__.drawElements, t.__proto__.drawElements = this.fakeGLdrawElements.bind(this), this.isInit = !0) } fakeGLdrawElements(t, e, i, n) { this.drawPasses++, this.realGLDrawElements.call(this.gl, t, e, i, n) } reset() { this.drawPasses = 0 } release() { this.isInit && (this.gl.__proto__.drawElements = this.realGLDrawElements), this.isInit = !1 } } class tt { constructor(t) { this.createdTextures = new Array, this.maxTexturesCount = 0, this.isInit = !1, this.realGLCreateTexture = function() {}, this.realGLDeleteTexture = function() {}, t && t.__proto__.createTexture && (this.gl = t, this.realGLCreateTexture = t.__proto__.createTexture, this.realGLDeleteTexture = t.__proto__.deleteTexture, t.__proto__.createTexture = this.fakeGLCreateTexture.bind(this), t.__proto__.deleteTexture = this.fakeGLDeleteTexture.bind(this), this.isInit = !0) } get currentTextureCount() { return this.createdTextures.length } registerTexture(t) { this.createdTextures.push(t), this.maxTexturesCount = Math.max(this.createdTextures.length, this.maxTexturesCount) } fakeGLCreateTexture() { var t = this.realGLCreateTexture.call(this.gl); return this.registerTexture(t), t } fakeGLDeleteTexture(t) { var e = this.createdTextures.indexOf(t);
            e > -1 && this.createdTextures.splice(e, 1), this.realGLDeleteTexture.call(this.gl, t) } reset() { this.createdTextures = new Array, this.maxTexturesCount = 0 } release() { this.isInit && (this.gl.__proto__.createTexture = this.realGLCreateTexture, this.gl.__proto__.deleteTexture = this.realGLDeleteTexture), this.isInit = !1 } } class et { constructor() { this._drawCalls = -1, this._maxDeltaDrawCalls = -1 } attach(t) { this.glhook = new J(t), this.texturehook = new tt(t) } get drawCalls() { return this.glhook && this.glhook.isInit ? this.glhook.drawPasses : -1 } get maxDeltaDrawCalls() { return this._maxDeltaDrawCalls } get deltaDrawCalls() { if (-1 == this._drawCalls) return this._drawCalls = this.drawCalls, 0; var t = this.drawCalls,
                e = t - this._drawCalls; return this._drawCalls = t, this._maxDeltaDrawCalls = Math.max(this._maxDeltaDrawCalls, e), e } get maxTextureCount() { return this.texturehook && this.texturehook.isInit ? this.texturehook.maxTexturesCount : 0 } get texturesCount() { return this.texturehook && this.texturehook.isInit ? this.texturehook.currentTextureCount : 0 } reset() { this._maxDeltaDrawCalls = -1, this._drawCalls = -1, this.glhook && this.glhook.reset(), this.texturehook && this.texturehook.reset() } release() { this.glhook && this.glhook.release(), this.texturehook && this.texturehook.release() } } var it = i(8);
    class nt extends et { constructor(t) { if (super(), t && t.renderer instanceof it.Renderer) { this.attach(t.renderer.gl); var e = t.renderer.texture._managedTextures; if (e && this.texturehook)
                    for (var i = 0; i < e.length; ++i)
                        for (var n = e[i]._glTextures, r = 0; r < n.length; ++r) n[r].gl === t.renderer.gl && this.texturehook.registerTexture(n[r].texture) } } } class rt { constructor(t, e) { this.hook = t, e ? this.stats = e : (this.stats = null, window.Stats && (this.stats = new window.Stats)), this.stats && (this.dcPanel = this.stats.addPanel(new window.Stats.Panel("DC:", "#330570", "#A69700")), this.tcPanel = this.stats.addPanel(new window.Stats.Panel("TC:", "#A62500", "#00B454")), this.stats.showPanel(0)) } update() { this.stats && (this.hook && (this.dcPanel.update(this.hook.deltaDrawCalls, Math.max(50, this.hook.maxDeltaDrawCalls)), this.tcPanel.update(this.hook.texturesCount, Math.max(20, this.hook.maxTextureCount))), this.stats.update()) } reset() { this.hook && this.hook.reset() } } const st = 1606753393572,
        ot = !1,
        at = ot,
        ht = ot,
        ut = "1.0.0";
    class lt extends r.Container { constructor() { super(), this.sceneContainer = new r.Container, this.transitionContainer = new r.Container, this.popupContainer = new r.Container, this.lockContainer = new r.Container, this.popupQueue = [], this.popupQueueParams = [], this.ticker = new r.Ticker, this.tweenMS = 0, this.hasFocus = !0, this.addChild(this.sceneContainer), this.addChild(this.popupContainer), this.addChild(this.transitionContainer), this.addChild(this.lockContainer) } static get MIN_ALLOWED_FPS() { return lt.self.ticker.minFPS } static set MIN_ALLOWED_FPS(t) { lt.self.ticker.minFPS = t } static get GLOBAL_DT_SCALE() { return lt.self.ticker.speed } static set GLOBAL_DT_SCALE(t) { lt.self.ticker.speed = t } static get dt() { return lt.self.ticker.deltaMS } static get isChangingScene() { return lt._isChangingScene } static initialize(t) { if (null !== lt.self && lt.self !== undefined) throw new Error("You must not intialize manager twice!"); return lt.sayHello(), lt.self = new lt, lt.self.stageReference = t.stage, lt.self.appReference = t, lt.self.stageReference.addChild(lt.self), window.addEventListener("pointerdown", () => { lt.self.hasFocus || lt.focus() }), window.addEventListener("focus", lt.focus), window.addEventListener("blur", lt.focusLost), lt.self.ticker.add(lt.update, this), lt.self.ticker.start(), Q.initalize(), h.a.now = () => lt.self.tweenMS, ht && (window.Stats = Z.a, lt.self.stats = new rt(new nt(t)), document.body.appendChild(lt.self.stats.stats.dom || lt.self.stats.stats.domElement)), lt.self } static getStageReference() { return lt.self.stageReference } static getAppReference() { return lt.self.appReference } static changeScene(t, e, i, n) { lt._isChangingScene = !0, i !== undefined && null !== i || (i = this.defaultTransition), n !== undefined && null !== n || (n = this.defaultTransitionParams), lt.self.currentTransition = new i(...n), lt.self.transitionContainer.addChild(lt.self.currentTransition), lt.self.currentTransition.startCovering(() => { var i;
                h.a.removeAll(), lt.self.currentScene && (lt.self.currentScene.onDestroy(t), lt.self.currentScene.destroy({ children: !0, texture: !1, baseTexture: !1 }), null === (i = lt.self.currentScene.parent) || void 0 === i || i.removeChild(lt.self.currentScene)), lt.self.currentTransition.startResolving((i, n = undefined) => { i !== undefined && null !== i && (t = i), n !== undefined && null !== n && (e = n), null !== e && e !== undefined || (e = []), lt.self.currentScene = new t(...e), lt.self.sceneContainer.addChild(lt.self.currentScene), lt.self.currentScene.onResize(lt.WIDTH, lt.HEIGHT), lt.self.currentScene.onStart(), lt.self.currentTransition.startUncovering(() => { var t;
                        lt._isChangingScene = !1, lt.self.currentScene.onShow(), lt.self.currentTransition.destroy(), null === (t = lt.self.currentTransition.parent) || void 0 === t || t.removeChild(lt.self.currentTransition), lt.self.currentTransition = undefined }) }) }) } static queuePopup(t, e) { null !== e && e !== undefined || (e = []), lt.self.popupContainer.children.length > 0 ? (lt.self.popupQueue.push(t), lt.self.popupQueueParams.push(e)) : lt.openPopup(t, e) } static openPopup(t, e, i = !0) { var n, r, s; if (!1 === i && lt.self.popupContainer.children.length > 0) return;
            null !== e && e !== undefined || (e = []); const o = new t(...e);
            null === (n = lt.self.currentScene) || void 0 === n || n.onPopupOpen(o, e), null === (r = lt.self.currentTransition) || void 0 === r || r.onPopupOpen(o, e), null === (s = lt.self.lockScene) || void 0 === s || s.onPopupOpen(o, e); for (const h of lt.self.popupContainer.children) h instanceof a && h.onPopupOpen(o, e);
            o.closeHandler = lt.closePopup.bind(this, o, t, e), lt.self.popupContainer.addChild(o), o.onResize(lt.WIDTH, lt.HEIGHT), o.onStart(), o.onShow() } static closePopup(t, e) { var i, n, r, s;
            null === (i = lt.self.currentScene) || void 0 === i || i.onPopupClose(e), null === (n = lt.self.currentTransition) || void 0 === n || n.onPopupClose(e), t.onDestroy(null), t.destroy(), null === (r = t.parent) || void 0 === r || r.removeChild(t); for (const o of lt.self.popupContainer.children) o instanceof a && o.onPopupClose(e);
            null === (s = lt.self.lockScene) || void 0 === s || s.onPopupClose(e) } static resize(t, e) { var i, n, r;
            lt.WIDTH = t, lt.HEIGHT = e, null === (i = lt.self.currentScene) || void 0 === i || i.onResize(t, e), null === (n = lt.self.currentTransition) || void 0 === n || n.onResize(t, e); for (const s of lt.self.popupContainer.children) s instanceof a && s.onResize(t, e);
            null === (r = lt.self.lockScene) || void 0 === r || r.onResize(t, e) } static setRotateScene(t, e, i) { lt.self.preferredOrientation = t, lt.self.lockScene && (lt.self.lockContainer.removeChild(lt.self.lockScene), lt.self.lockScene.destroy({ children: !0 })), lt.self.lockScene = new e(...i), lt.self.lockContainer.addChild(lt.self.lockScene), lt.self.lockScene.onResize(lt.WIDTH, lt.HEIGHT), lt.self.lockScene.onStart(), lt.orientationCheck() } static update() { var t, e, i; const n = lt.self.ticker.deltaMS; if (lt.orientationCheck(), Q.update(), lt.PAUSE_TWEENS_ON_FOCUS_LOST && !lt.self.hasFocus || (lt.self.tweenMS += n, h.a.update(lt.self.tweenMS)), !lt.PAUSE_UPDATES_ON_FOCUS_LOST || lt.self.hasFocus) { null === (t = lt.self.currentScene) || void 0 === t || t.update(n), null === (e = lt.self.currentTransition) || void 0 === e || e.update(n); for (const t of lt.self.popupContainer.children) t instanceof a && t.update(n);
                null === (i = lt.self.lockScene) || void 0 === i || i.update(n) } lt.self.appReference.render(), lt.self.stats && lt.self.stats.update() } static focus() { var t, e, i;
            lt.self.hasFocus = !0, lt.PAUSE_SOUNDS_ON_FOCUS_LOST && q._context.muted && q.unmuteAll(), null === (t = lt.self.currentScene) || void 0 === t || t.onFocus(), null === (e = lt.self.currentTransition) || void 0 === e || e.onFocus(); for (const n of lt.self.popupContainer.children) n instanceof a && n.onFocus();
            null === (i = lt.self.lockScene) || void 0 === i || i.onFocus() } static focusLost() { var t, e, i;
            lt.self.hasFocus = !1, lt.PAUSE_SOUNDS_ON_FOCUS_LOST && (q._context.muted || q.muteAll()), null === (t = lt.self.currentScene) || void 0 === t || t.onFocusLost(), null === (e = lt.self.currentTransition) || void 0 === e || e.onFocusLost(); for (const n of lt.self.popupContainer.children) n instanceof a && n.onFocusLost();
            null === (i = lt.self.lockScene) || void 0 === i || i.onFocusLost() } static pause() { var t, e, i; if (lt.self.interactiveChildren) { q._context.muted || q.muteAll(), lt.self.interactiveChildren = !1, null === (t = lt.self.currentScene) || void 0 === t || t.onPause(), null === (e = lt.self.currentTransition) || void 0 === e || e.onPause(); for (const t of lt.self.popupContainer.children) t instanceof a && t.onPause();
                null === (i = lt.self.lockScene) || void 0 === i || i.onPause() } } static resume() { var t, e, i; if (!lt.self.interactiveChildren) { q._context.muted && q.unmuteAll(), lt.self.interactiveChildren = !0, null === (t = lt.self.currentScene) || void 0 === t || t.onResume(), null === (e = lt.self.currentTransition) || void 0 === e || e.onResume(); for (const t of lt.self.popupContainer.children) t instanceof a && t.onResume();
                null === (i = lt.self.lockScene) || void 0 === i || i.onResume() } } static orientationCheck() { var t; if (lt.self.lockScene) { const e = lt.WIDTH < lt.HEIGHT,
                    i = !!window.screen.orientation,
                    n = null === (t = window.screen.orientation) || void 0 === t ? void 0 : t.type.includes("portrait"),
                    r = 0 === window.orientation || 180 === window.orientation;
                lt.self.lockContainer.children.length > 0 && (i && n || !i && r || e) ? lt.self.currentOrientation = "portrait" : lt.self.currentOrientation = "landscape", lt.self.currentOrientation != lt.self.preferredOrientation ? (lt.pause(), lt.self.lockContainer.visible = !0, lt.self.lockContainer.interactiveChildren = !0, lt.self.lockContainer.interactive = !0) : (lt.resume(), lt.self.lockContainer.visible = !1, lt.self.lockContainer.interactiveChildren = !1, lt.self.lockContainer.interactive = !1) } } static sayHello() { if (navigator.userAgent.toLowerCase().indexOf("chrome") > -1) { const t = ["\n Forestry Games \n\n"];
                window.console.log(...t) } else window.console && window.console.log(" Forestry Games ") } } lt.PAUSE_UPDATES_ON_FOCUS_LOST = !0, lt.PAUSE_TWEENS_ON_FOCUS_LOST = !0, lt.PAUSE_SOUNDS_ON_FOCUS_LOST = !0, lt.defaultTransition = o, lt.defaultTransitionParams = [], lt._isChangingScene = !1; const ct = [{ name: "autoPackedAtlas", url: "./atlas/autoPackedAtlas.json" }, { name: "walkR", url: "./particles/walk_dust_inverted.json" }, { name: "walkL", url: "./particles/walk_dust.json" }, { name: "digSide", url: "./particles/dig_side.json" }, { name: "digDown", url: "./particles/dig_down.json" }, { name: "landing", url: "./particles/land_dust.json" }, { name: "hazard", url: "./particles/gas_idle.json" }, { name: "prefall", url: "./particles/rock_prefall.json" }, { name: "stink", url: "./particles/beetle_stink.json" }, { name: "crushed", url: "./particles/beetle_crushed.json" }, { name: "rotateScreen", url: "./img/rotateToPlay.jpg" }, { name: "bgPause", url: "./img/pauseBack.png" }, { name: "Arial Rounded MT", url: "./fonts/Arial/stylesheet.css" }, { name: "Fancy_font_02", url: "./fonts/funguis/stylesheet.css" }, { name: "LangFile", url: "./lang/lang.cn.json" }, { name: "levels", url: "./levels/levels.level" }, { name: "LubalinGraphITCTurnerAraBold", url: "./fonts/cartoon/stylesheet.css" }, { name: "img/game/startForeground.png", url: "./img/game/startForeground.png" }, { name: "img/game/exitFloor.png", url: "./img/game/exitFloor.png" }, { name: "img/game/bgdark1.jpg", url: "./img/game/bgdark1.jpg" }, { name: "img/game/bgdark2.jpg", url: "./img/game/bgdark2.jpg" }, { name: "img/game/bgdark3.jpg", url: "./img/game/bgdark3.jpg" }, { name: "startBackground1", url: "./img/game/startBackground1.png" }, { name: "startBackground2", url: "./img/game/startBackground2.png" }, { name: "startBackground3", url: "./img/game/startBackground3.png" }, { name: "startBackground4", url: "./img/game/startBackground4.png" }, { name: "startBackground5", url: "./img/game/startBackground5.png" }, { name: "bgEnd", url: "./img/game/ending.png" }, { name: "bgFront", url: "./img/game/endbg.png" }, { name: "img/menu/bgCave.png", url: "./img/menu/bgCave.png" }, { name: "item_idle", url: "./particles/item_idle.json" }, { name: "item_pick", url: "./particles/item_pick.json" }],
        dt = [{ name: "beep", url: "./sfx/beep.{mp3}" }, { name: "transitionIn", url: "./sfx/sword.{mp3}" }, { name: "button", url: "./sfx/chump.{mp3}" }, { name: "pop", url: "./sfx/bubble_pop.{mp3}" }, { name: "ketchup", url: "./sfx/ketchup.{mp3}" }, { name: "fall", url: "./sfx/dash_short.{mp3}" }, { name: "dig", url: "./sfx/dig_triple.{mp3}" }, { name: "push", url: "./sfx/dash_push.{mp3}" }, { name: "stone_fall", url: "./sfx/dash_out.{mp3}" }, { name: "spikes", url: "./sfx/wood_tremble.{mp3}" }, { name: "bug", url: "./sfx/bug_die.{mp3}" }, { name: "door_open", url: "./sfx/trapdoor_in.{mp3}" }, { name: "door_close", url: "./sfx/trapdoor_out.{mp3}" }, { name: "hurt", url: "./sfx/hurt.{mp3}" }, { name: "tremble", url: "./sfx/tremble.{mp3}" }, { name: "switch", url: "./sfx/switch1.{mp3}" }, { name: "item1", url: "./sfx/pop.{mp3}" }, { name: "item2", url: "./sfx/pop.{mp3}" }, { name: "item3", url: "./sfx/pop.{mp3}" }, { name: "key", url: "./sfx/star.{mp3}" }, { name: "unlock", url: "./sfx/unlock.{mp3}" }, { name: "star1", url: "./sfx/star3.{mp3}" }, { name: "star2", url: "./sfx/star3.{mp3}" }, { name: "star3", url: "./sfx/star3.{mp3}" }, { name: "board_star", url: "./sfx/star.{mp3}" }, { name: "win", url: "./sfx/win.{mp3}" }, { name: "lose", url: "./sfx/loose.{mp3}" }, { name: "splash", url: "./sfx/splash.{mp3}" }, { name: "marimba_up", url: "./sfx/marimba_up.{mp3}" }, { name: "marimba_down", url: "./sfx/marimba_down.{mp3}" }, { name: "seth_in", url: "./sfx/whistle_up.{mp3}" }, { name: "seth_in_fast", url: "./sfx/whistle_up_short.{mp3}" }, { name: "seth_out", url: "./sfx/whistle_down.{mp3}" }, { name: "seth_hands", url: "./sfx/turn_page.{mp3}" }, { name: "brother", url: "./sfx/whistle_up.{mp3}" }, { name: "twins", url: "./sfx/whistle_up_short.{mp3}" }, { name: "text_in", url: "./sfx/turn_page.{mp3}" }],
        pt = [{ name: "menu", url: "./music/TheFungiesSong_MASTER.{mp3}" }]; var ft = i(33),
        mt = i.n(ft);
    class gt { static add(...t) { r.LoaderResource.setExtensionLoadType("css", r.LoaderResource.LOAD_TYPE.XHR), r.LoaderResource.setExtensionXhrType("css", r.LoaderResource.XHR_RESPONSE_TYPE.TEXT) } static use(t, e) { var i, n, r; if ("css" !== t.extension) return void e(); const s = document.createElement("link");
            s.rel = "stylesheet", s.type = "text/css", s.href = t.url, document.head.appendChild(s); const o = gt.parseCss(t.data),
                a = [],
                h = []; for (const u of o) "string" == typeof u.style["font-family"] && (a.push(new mt.a(u.style["font-family"].replace(/['|"]/gi, ""), { style: u.style["font-style"], weight: u.style["font-weight"], stretch: u.style["font-stretch"] }).load(null === (i = t.metadata) || void 0 === i ? void 0 : i.testString, null !== (r = null === (n = t.metadata) || void 0 === n ? void 0 : n.timeout) && void 0 !== r ? r : 999999996)), h.push({ fontFamily: u.style["font-family"].replace(/['|"]/gi, ""), fontStyle: u.style["font-style"], fontWeight: u.style["font-weight"] }));
            t.data = h, Promise.all(a)["finally"](() => e()) } static parseCss(t) { const e = /([\s\S]+?)\{([\s\S]*?)\}/gi,
                i = []; let n, r; for (t = t.replace(/\/\*[\s\S]*?\*\//g, ""); r = e.exec(t);) { const t = gt.parseRule(r[2].trim());
                t.cssText = gt.stringifyRule(t), n = { selectorText: r[1].trim().replace(/\s*\,\s*/, ", "), style: t, cssText: "" }, n.cssText = `${n.selectorText} { ${n.style.cssText} }`, i.push(n) } return i } static parseRule(t) { const e = /\s*([a-z\-]+)\s*:\s*((?:[^;]*url\(.*?\)[^;]*|[^;]*)*)\s*(?:;|$)/gi,
                i = {}; let n; for (; n = e.exec(t);) i[n[1].toLowerCase()] = n[2]; return i } static stringifyRule(t) { let e = ""; const i = Object.keys(t).sort(); for (let n = 0; n < i.length; n++) e += ` ${i[n]}: ${t[i[n]]};`; return e.substring(1) } }

    function yt(t) { return (yt = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) { return typeof t } : function(t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) }

    function vt(t, e, i) { return e in t ? Object.defineProperty(t, e, { value: i, enumerable: !0, configurable: !0, writable: !0 }) : t[e] = i, t }

    function bt(t) { for (var e = 1; e < arguments.length; e++) { var i = null != arguments[e] ? Object(arguments[e]) : {},
                n = Object.keys(i); "function" == typeof Object.getOwnPropertySymbols && (n = n.concat(Object.getOwnPropertySymbols(i).filter((function(t) { return Object.getOwnPropertyDescriptor(i, t).enumerable })))), n.forEach((function(e) { vt(t, e, i[e]) })) } return t }

    function _t(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function") }

    function xt(t, e) { for (var i = 0; i < e.length; i++) { var n = e[i];
            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n) } }

    function wt(t, e, i) { return e && xt(t.prototype, e), i && xt(t, i), t }

    function Tt(t) { if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return t }

    function St(t, e) { return !e || "object" !== yt(e) && "function" != typeof e ? Tt(t) : e }

    function Et(t) { return (Et = Object.setPrototypeOf ? Object.getPrototypeOf : function(t) { return t.__proto__ || Object.getPrototypeOf(t) })(t) }

    function Pt(t, e) { return (Pt = Object.setPrototypeOf || function(t, e) { return t.__proto__ = e, t })(t, e) }

    function Ct(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
        t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), e && Pt(t, e) } var Ot = { type: "logger", log: function(t) { this.output("log", t) }, warn: function(t) { this.output("warn", t) }, error: function(t) { this.output("error", t) }, output: function(t, e) { console && console[t] } },
        At = new(function() {
            function t(e) { var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
                _t(this, t), this.init(e, i) } return wt(t, [{ key: "init", value: function(t) { var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
                    this.prefix = e.prefix || "i18next:", this.logger = t || Ot, this.options = e, this.debug = e.debug } }, { key: "setDebug", value: function(t) { this.debug = t } }, { key: "log", value: function() { for (var t = arguments.length, e = new Array(t), i = 0; i < t; i++) e[i] = arguments[i]; return this.forward(e, "log", "", !0) } }, { key: "warn", value: function() { for (var t = arguments.length, e = new Array(t), i = 0; i < t; i++) e[i] = arguments[i]; return this.forward(e, "warn", "", !0) } }, { key: "error", value: function() { for (var t = arguments.length, e = new Array(t), i = 0; i < t; i++) e[i] = arguments[i]; return this.forward(e, "error", "") } }, { key: "deprecate", value: function() { for (var t = arguments.length, e = new Array(t), i = 0; i < t; i++) e[i] = arguments[i]; return this.forward(e, "warn", "WARNING DEPRECATED: ", !0) } }, { key: "forward", value: function(t, e, i, n) { return n && !this.debug ? null : ("string" == typeof t[0] && (t[0] = "".concat(i).concat(this.prefix, " ").concat(t[0])), this.logger[e](t)) } }, { key: "create", value: function(e) { return new t(this.logger, bt({}, { prefix: "".concat(this.prefix, ":").concat(e, ":") }, this.options)) } }]), t }()),
        It = function() {
            function t() { _t(this, t), this.observers = {} } return wt(t, [{ key: "on", value: function(t, e) { var i = this; return t.split(" ").forEach((function(t) { i.observers[t] = i.observers[t] || [], i.observers[t].push(e) })), this } }, { key: "off", value: function(t, e) { this.observers[t] && (e ? this.observers[t] = this.observers[t].filter((function(t) { return t !== e })) : delete this.observers[t]) } }, { key: "emit", value: function(t) { for (var e = arguments.length, i = new Array(e > 1 ? e - 1 : 0), n = 1; n < e; n++) i[n - 1] = arguments[n]; if (this.observers[t]) { var r = [].concat(this.observers[t]);
                        r.forEach((function(t) { t.apply(void 0, i) })) } if (this.observers["*"]) { var s = [].concat(this.observers["*"]);
                        s.forEach((function(e) { e.apply(e, [t].concat(i)) })) } } }]), t }();

    function Rt() { var t, e, i = new Promise((function(i, n) { t = i, e = n })); return i.resolve = t, i.reject = e, i }

    function Mt(t) { return null == t ? "" : "" + t }

    function Lt(t, e, i) { t.forEach((function(t) { e[t] && (i[t] = e[t]) })) }

    function Dt(t, e, i) {
        function n(t) { return t && t.indexOf("###") > -1 ? t.replace(/###/g, ".") : t }

        function r() { return !t || "string" == typeof t } for (var s = "string" != typeof e ? [].concat(e) : e.split("."); s.length > 1;) { if (r()) return {}; var o = n(s.shift());!t[o] && i && (t[o] = new i), t = t[o] } return r() ? {} : { obj: t, k: n(s.shift()) } }

    function kt(t, e, i) { var n = Dt(t, e, Object);
        n.obj[n.k] = i }

    function Nt(t, e) { var i = Dt(t, e),
            n = i.obj,
            r = i.k; return n ? n[r] : undefined }

    function Ft(t, e, i) { var n = Nt(t, i); return n !== undefined ? n : Nt(e, i) }

    function Bt(t, e, i) { for (var n in e) "__proto__" !== n && (n in t ? "string" == typeof t[n] || t[n] instanceof String || "string" == typeof e[n] || e[n] instanceof String ? i && (t[n] = e[n]) : Bt(t[n], e[n], i) : t[n] = e[n]); return t }

    function jt(t) { return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&") } var Ut = { "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;", "/": "&#x2F;" };

    function Gt(t) { return "string" == typeof t ? t.replace(/[&<>"'\/]/g, (function(t) { return Ut[t] })) : t } var Xt = "undefined" != typeof window && window.navigator && window.navigator.userAgent && window.navigator.userAgent.indexOf("MSIE") > -1,
        Ht = function(t) {
            function e(t) { var i, n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : { ns: ["translation"], defaultNS: "translation" }; return _t(this, e), i = St(this, Et(e).call(this)), Xt && It.call(Tt(i)), i.data = t || {}, i.options = n, i.options.keySeparator === undefined && (i.options.keySeparator = "."), i } return Ct(e, t), wt(e, [{ key: "addNamespaces", value: function(t) { this.options.ns.indexOf(t) < 0 && this.options.ns.push(t) } }, { key: "removeNamespaces", value: function(t) { var e = this.options.ns.indexOf(t);
                    e > -1 && this.options.ns.splice(e, 1) } }, { key: "getResource", value: function(t, e, i) { var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {},
                        r = n.keySeparator !== undefined ? n.keySeparator : this.options.keySeparator,
                        s = [t, e]; return i && "string" != typeof i && (s = s.concat(i)), i && "string" == typeof i && (s = s.concat(r ? i.split(r) : i)), t.indexOf(".") > -1 && (s = t.split(".")), Nt(this.data, s) } }, { key: "addResource", value: function(t, e, i, n) { var r = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : { silent: !1 },
                        s = this.options.keySeparator;
                    s === undefined && (s = "."); var o = [t, e];
                    i && (o = o.concat(s ? i.split(s) : i)), t.indexOf(".") > -1 && (n = e, e = (o = t.split("."))[1]), this.addNamespaces(e), kt(this.data, o, n), r.silent || this.emit("added", t, e, i, n) } }, { key: "addResources", value: function(t, e, i) { var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : { silent: !1 }; for (var r in i) "string" != typeof i[r] && "[object Array]" !== Object.prototype.toString.apply(i[r]) || this.addResource(t, e, r, i[r], { silent: !0 });
                    n.silent || this.emit("added", t, e, i) } }, { key: "addResourceBundle", value: function(t, e, i, n, r) { var s = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : { silent: !1 },
                        o = [t, e];
                    t.indexOf(".") > -1 && (n = i, i = e, e = (o = t.split("."))[1]), this.addNamespaces(e); var a = Nt(this.data, o) || {};
                    n ? Bt(a, i, r) : a = bt({}, a, i), kt(this.data, o, a), s.silent || this.emit("added", t, e, i) } }, { key: "removeResourceBundle", value: function(t, e) { this.hasResourceBundle(t, e) && delete this.data[t][e], this.removeNamespaces(e), this.emit("removed", t, e) } }, { key: "hasResourceBundle", value: function(t, e) { return this.getResource(t, e) !== undefined } }, { key: "getResourceBundle", value: function(t, e) { return e || (e = this.options.defaultNS), "v1" === this.options.compatibilityAPI ? bt({}, {}, this.getResource(t, e)) : this.getResource(t, e) } }, { key: "getDataByLanguage", value: function(t) { return this.data[t] } }, { key: "toJSON", value: function() { return this.data } }]), e }(It),
        zt = { processors: {}, addPostProcessor: function(t) { this.processors[t.name] = t }, handle: function(t, e, i, n, r) { var s = this; return t.forEach((function(t) { s.processors[t] && (e = s.processors[t].process(e, i, n, r)) })), e } },
        Vt = {},
        Wt = function(t) {
            function e(t) { var i, n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {}; return _t(this, e), i = St(this, Et(e).call(this)), Xt && It.call(Tt(i)), Lt(["resourceStore", "languageUtils", "pluralResolver", "interpolator", "backendConnector", "i18nFormat", "utils"], t, Tt(i)), i.options = n, i.options.keySeparator === undefined && (i.options.keySeparator = "."), i.logger = At.create("translator"), i } return Ct(e, t), wt(e, [{ key: "changeLanguage", value: function(t) { t && (this.language = t) } }, { key: "exists", value: function(t) { var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : { interpolation: {} },
                        i = this.resolve(t, e); return i && i.res !== undefined } }, { key: "extractFromKey", value: function(t, e) { var i = e.nsSeparator !== undefined ? e.nsSeparator : this.options.nsSeparator;
                    i === undefined && (i = ":"); var n = e.keySeparator !== undefined ? e.keySeparator : this.options.keySeparator,
                        r = e.ns || this.options.defaultNS; if (i && t.indexOf(i) > -1) { var s = t.match(this.interpolator.nestingRegexp); if (s && s.length > 0) return { key: t, namespaces: r }; var o = t.split(i);
                        (i !== n || i === n && this.options.ns.indexOf(o[0]) > -1) && (r = o.shift()), t = o.join(n) } return "string" == typeof r && (r = [r]), { key: t, namespaces: r } } }, { key: "translate", value: function(t, e, i) { var n = this; if ("object" !== yt(e) && this.options.overloadTranslationOptionHandler && (e = this.options.overloadTranslationOptionHandler(arguments)), e || (e = {}), t === undefined || null === t) return "";
                    Array.isArray(t) || (t = [String(t)]); var r = e.keySeparator !== undefined ? e.keySeparator : this.options.keySeparator,
                        s = this.extractFromKey(t[t.length - 1], e),
                        o = s.key,
                        a = s.namespaces,
                        h = a[a.length - 1],
                        u = e.lng || this.language,
                        l = e.appendNamespaceToCIMode || this.options.appendNamespaceToCIMode; if (u && "cimode" === u.toLowerCase()) { if (l) { var c = e.nsSeparator || this.options.nsSeparator; return h + c + o } return o } var d = this.resolve(t, e),
                        p = d && d.res,
                        f = d && d.usedKey || o,
                        m = d && d.exactUsedKey || o,
                        g = Object.prototype.toString.apply(p),
                        y = ["[object Number]", "[object Function]", "[object RegExp]"],
                        v = e.joinArrays !== undefined ? e.joinArrays : this.options.joinArrays,
                        b = !this.i18nFormat || this.i18nFormat.handleAsObject,
                        _ = "string" != typeof p && "boolean" != typeof p && "number" != typeof p; if (b && p && _ && y.indexOf(g) < 0 && ("string" != typeof v || "[object Array]" !== g)) { if (!e.returnObjects && !this.options.returnObjects) return this.logger.warn("accessing an object - but returnObjects options is not enabled!"), this.options.returnedObjectHandler ? this.options.returnedObjectHandler(f, p, e) : "key '".concat(o, " (").concat(this.language, ")' returned an object instead of string."); if (r) { var x = "[object Array]" === g,
                                w = x ? [] : {},
                                T = x ? m : f; for (var S in p)
                                if (Object.prototype.hasOwnProperty.call(p, S)) { var E = "".concat(T).concat(r).concat(S);
                                    w[S] = this.translate(E, bt({}, e, { joinArrays: !1, ns: a })), w[S] === E && (w[S] = p[S]) } p = w } } else if (b && "string" == typeof v && "[object Array]" === g)(p = p.join(v)) && (p = this.extendTranslation(p, t, e, i));
                    else { var P = !1,
                            C = !1; if (!this.isValidLookup(p) && e.defaultValue !== undefined) { if (P = !0, e.count !== undefined) { var O = this.pluralResolver.getSuffix(u, e.count);
                                p = e["defaultValue".concat(O)] } p || (p = e.defaultValue) } this.isValidLookup(p) || (C = !0, p = o); var A = e.defaultValue && e.defaultValue !== p && this.options.updateMissing; if (C || P || A) { if (this.logger.log(A ? "updateKey" : "missingKey", u, h, o, A ? e.defaultValue : p), r) { var I = this.resolve(o, bt({}, e, { keySeparator: !1 }));
                                I && I.res && this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.") } var R = [],
                                M = this.languageUtils.getFallbackCodes(this.options.fallbackLng, e.lng || this.language); if ("fallback" === this.options.saveMissingTo && M && M[0])
                                for (var L = 0; L < M.length; L++) R.push(M[L]);
                            else "all" === this.options.saveMissingTo ? R = this.languageUtils.toResolveHierarchy(e.lng || this.language) : R.push(e.lng || this.language); var D = function(t, i) { n.options.missingKeyHandler ? n.options.missingKeyHandler(t, h, i, A ? e.defaultValue : p, A, e) : n.backendConnector && n.backendConnector.saveMissing && n.backendConnector.saveMissing(t, h, i, A ? e.defaultValue : p, A, e), n.emit("missingKey", t, h, i, p) }; if (this.options.saveMissing) { var k = e.count !== undefined && "string" != typeof e.count;
                                this.options.saveMissingPlurals && k ? R.forEach((function(t) { n.pluralResolver.getPluralFormsOfKey(t, o).forEach((function(e) { return D([t], e) })) })) : D(R, o) } } p = this.extendTranslation(p, t, e, d, i), C && p === o && this.options.appendNamespaceToMissingKey && (p = "".concat(h, ":").concat(o)), C && this.options.parseMissingKeyHandler && (p = this.options.parseMissingKeyHandler(p)) } return p } }, { key: "extendTranslation", value: function(t, e, i, n, r) { var s = this; if (this.i18nFormat && this.i18nFormat.parse) t = this.i18nFormat.parse(t, i, n.usedLng, n.usedNS, n.usedKey, { resolved: n });
                    else if (!i.skipInterpolation) { i.interpolation && this.interpolator.init(bt({}, i, { interpolation: bt({}, this.options.interpolation, i.interpolation) })); var o, a = i.interpolation && i.interpolation.skipOnVariables || this.options.interpolation.skipOnVariables; if (a) { var h = t.match(this.interpolator.nestingRegexp);
                            o = h && h.length } var u = i.replace && "string" != typeof i.replace ? i.replace : i; if (this.options.interpolation.defaultVariables && (u = bt({}, this.options.interpolation.defaultVariables, u)), t = this.interpolator.interpolate(t, u, i.lng || this.language, i), a) { var l = t.match(this.interpolator.nestingRegexp);
                            o < (l && l.length) && (i.nest = !1) }!1 !== i.nest && (t = this.interpolator.nest(t, (function() { for (var t = arguments.length, i = new Array(t), n = 0; n < t; n++) i[n] = arguments[n]; return r && r[0] === i[0] ? (s.logger.warn("It seems you are nesting recursively key: ".concat(i[0], " in key: ").concat(e[0])), null) : s.translate.apply(s, i.concat([e])) }), i)), i.interpolation && this.interpolator.reset() } var c = i.postProcess || this.options.postProcess,
                        d = "string" == typeof c ? [c] : c; return t !== undefined && null !== t && d && d.length && !1 !== i.applyPostProcessor && (t = zt.handle(d, t, e, this.options && this.options.postProcessPassResolved ? bt({ i18nResolved: n }, i) : i, this)), t } }, { key: "resolve", value: function(t) { var e, i, n, r, s, o = this,
                        a = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {}; return "string" == typeof t && (t = [t]), t.forEach((function(t) { if (!o.isValidLookup(e)) { var h = o.extractFromKey(t, a),
                                u = h.key;
                            i = u; var l = h.namespaces;
                            o.options.fallbackNS && (l = l.concat(o.options.fallbackNS)); var c = a.count !== undefined && "string" != typeof a.count,
                                d = a.context !== undefined && "string" == typeof a.context && "" !== a.context,
                                p = a.lngs ? a.lngs : o.languageUtils.toResolveHierarchy(a.lng || o.language, a.fallbackLng);
                            l.forEach((function(t) { o.isValidLookup(e) || (s = t, !Vt["".concat(p[0], "-").concat(t)] && o.utils && o.utils.hasLoadedNamespace && !o.utils.hasLoadedNamespace(s) && (Vt["".concat(p[0], "-").concat(t)] = !0, o.logger.warn('key "'.concat(i, '" for languages "').concat(p.join(", "), '" won\'t get resolved as namespace "').concat(s, '" was not yet loaded'), "This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")), p.forEach((function(i) { if (!o.isValidLookup(e)) { r = i; var s, h, l = u,
                                            p = [l]; if (o.i18nFormat && o.i18nFormat.addLookupKeys) o.i18nFormat.addLookupKeys(p, u, i, t, a);
                                        else c && (s = o.pluralResolver.getSuffix(i, a.count)), c && d && p.push(l + s), d && p.push(l += "".concat(o.options.contextSeparator).concat(a.context)), c && p.push(l += s); for (; h = p.pop();) o.isValidLookup(e) || (n = h, e = o.getResource(i, t, h, a)) } }))) })) } })), { res: e, usedKey: i, exactUsedKey: n, usedLng: r, usedNS: s } } }, { key: "isValidLookup", value: function(t) { return !(t === undefined || !this.options.returnNull && null === t || !this.options.returnEmptyString && "" === t) } }, { key: "getResource", value: function(t, e, i) { var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {}; return this.i18nFormat && this.i18nFormat.getResource ? this.i18nFormat.getResource(t, e, i, n) : this.resourceStore.getResource(t, e, i, n) } }]), e }(It);

    function Yt(t) { return t.charAt(0).toUpperCase() + t.slice(1) } var Kt = function() {
            function t(e) { _t(this, t), this.options = e, this.whitelist = this.options.supportedLngs || !1, this.supportedLngs = this.options.supportedLngs || !1, this.logger = At.create("languageUtils") } return wt(t, [{ key: "getScriptPartFromCode", value: function(t) { if (!t || t.indexOf("-") < 0) return null; var e = t.split("-"); return 2 === e.length ? null : (e.pop(), "x" === e[e.length - 1].toLowerCase() ? null : this.formatLanguageCode(e.join("-"))) } }, { key: "getLanguagePartFromCode", value: function(t) { if (!t || t.indexOf("-") < 0) return t; var e = t.split("-"); return this.formatLanguageCode(e[0]) } }, { key: "formatLanguageCode", value: function(t) { if ("string" == typeof t && t.indexOf("-") > -1) { var e = ["hans", "hant", "latn", "cyrl", "cans", "mong", "arab"],
                            i = t.split("-"); return this.options.lowerCaseLng ? i = i.map((function(t) { return t.toLowerCase() })) : 2 === i.length ? (i[0] = i[0].toLowerCase(), i[1] = i[1].toUpperCase(), e.indexOf(i[1].toLowerCase()) > -1 && (i[1] = Yt(i[1].toLowerCase()))) : 3 === i.length && (i[0] = i[0].toLowerCase(), 2 === i[1].length && (i[1] = i[1].toUpperCase()), "sgn" !== i[0] && 2 === i[2].length && (i[2] = i[2].toUpperCase()), e.indexOf(i[1].toLowerCase()) > -1 && (i[1] = Yt(i[1].toLowerCase())), e.indexOf(i[2].toLowerCase()) > -1 && (i[2] = Yt(i[2].toLowerCase()))), i.join("-") } return this.options.cleanCode || this.options.lowerCaseLng ? t.toLowerCase() : t } }, { key: "isWhitelisted", value: function(t) { return this.logger.deprecate("languageUtils.isWhitelisted", 'function "isWhitelisted" will be renamed to "isSupportedCode" in the next major - please make sure to rename it\'s usage asap.'), this.isSupportedCode(t) } }, { key: "isSupportedCode", value: function(t) { return ("languageOnly" === this.options.load || this.options.nonExplicitSupportedLngs) && (t = this.getLanguagePartFromCode(t)), !this.supportedLngs || !this.supportedLngs.length || this.supportedLngs.indexOf(t) > -1 } }, { key: "getBestMatchFromCodes", value: function(t) { var e, i = this; return t ? (t.forEach((function(t) { if (!e) { var n = i.formatLanguageCode(t);
                            i.options.supportedLngs && !i.isSupportedCode(n) || (e = n) } })), !e && this.options.supportedLngs && t.forEach((function(t) { if (!e) { var n = i.getLanguagePartFromCode(t); if (i.isSupportedCode(n)) return e = n;
                            e = i.options.supportedLngs.find((function(t) { if (0 === t.indexOf(n)) return t })) } })), e || (e = this.getFallbackCodes(this.options.fallbackLng)[0]), e) : null } }, { key: "getFallbackCodes", value: function(t, e) { if (!t) return []; if ("string" == typeof t && (t = [t]), "[object Array]" === Object.prototype.toString.apply(t)) return t; if (!e) return t["default"] || []; var i = t[e]; return i || (i = t[this.getScriptPartFromCode(e)]), i || (i = t[this.formatLanguageCode(e)]), i || (i = t[this.getLanguagePartFromCode(e)]), i || (i = t["default"]), i || [] } }, { key: "toResolveHierarchy", value: function(t, e) { var i = this,
                        n = this.getFallbackCodes(e || this.options.fallbackLng || [], t),
                        r = [],
                        s = function(t) { t && (i.isSupportedCode(t) ? r.push(t) : i.logger.warn("rejecting language code not found in supportedLngs: ".concat(t))) }; return "string" == typeof t && t.indexOf("-") > -1 ? ("languageOnly" !== this.options.load && s(this.formatLanguageCode(t)), "languageOnly" !== this.options.load && "currentOnly" !== this.options.load && s(this.getScriptPartFromCode(t)), "currentOnly" !== this.options.load && s(this.getLanguagePartFromCode(t))) : "string" == typeof t && s(this.formatLanguageCode(t)), n.forEach((function(t) { r.indexOf(t) < 0 && s(i.formatLanguageCode(t)) })), r } }]), t }(),
        qt = [{ lngs: ["ach", "ak", "am", "arn", "br", "fil", "gun", "ln", "mfe", "mg", "mi", "oc", "pt", "pt-BR", "tg", "ti", "tr", "uz", "wa"], nr: [1, 2], fc: 1 }, { lngs: ["af", "an", "ast", "az", "bg", "bn", "ca", "da", "de", "dev", "el", "en", "eo", "es", "et", "eu", "fi", "fo", "fur", "fy", "gl", "gu", "ha", "hi", "hu", "hy", "ia", "it", "kn", "ku", "lb", "mai", "ml", "mn", "mr", "nah", "nap", "nb", "ne", "nl", "nn", "no", "nso", "pa", "pap", "pms", "ps", "pt-PT", "rm", "sco", "se", "si", "so", "son", "sq", "sv", "sw", "ta", "te", "tk", "ur", "yo"], nr: [1, 2], fc: 2 }, { lngs: ["ay", "bo", "cgg", "fa", "ht", "id", "ja", "jbo", "ka", "kk", "km", "ko", "ky", "lo", "ms", "sah", "su", "th", "tt", "ug", "vi", "wo", "zh"], nr: [1], fc: 3 }, { lngs: ["be", "bs", "cnr", "dz", "hr", "ru", "sr", "uk"], nr: [1, 2, 5], fc: 4 }, { lngs: ["ar"], nr: [0, 1, 2, 3, 11, 100], fc: 5 }, { lngs: ["cs", "sk"], nr: [1, 2, 5], fc: 6 }, { lngs: ["csb", "pl"], nr: [1, 2, 5], fc: 7 }, { lngs: ["cy"], nr: [1, 2, 3, 8], fc: 8 }, { lngs: ["fr"], nr: [1, 2], fc: 9 }, { lngs: ["ga"], nr: [1, 2, 3, 7, 11], fc: 10 }, { lngs: ["gd"], nr: [1, 2, 3, 20], fc: 11 }, { lngs: ["is"], nr: [1, 2], fc: 12 }, { lngs: ["jv"], nr: [0, 1], fc: 13 }, { lngs: ["kw"], nr: [1, 2, 3, 4], fc: 14 }, { lngs: ["lt"], nr: [1, 2, 10], fc: 15 }, { lngs: ["lv"], nr: [1, 2, 0], fc: 16 }, { lngs: ["mk"], nr: [1, 2], fc: 17 }, { lngs: ["mnk"], nr: [0, 1, 2], fc: 18 }, { lngs: ["mt"], nr: [1, 2, 11, 20], fc: 19 }, { lngs: ["or"], nr: [2, 1], fc: 2 }, { lngs: ["ro"], nr: [1, 2, 20], fc: 20 }, { lngs: ["sl"], nr: [5, 1, 2, 3], fc: 21 }, { lngs: ["he", "iw"], nr: [1, 2, 20, 21], fc: 22 }],
        Qt = { 1: function(t) { return Number(t > 1) }, 2: function(t) { return Number(1 != t) }, 3: function(t) { return 0 }, 4: function(t) { return Number(t % 10 == 1 && t % 100 != 11 ? 0 : t % 10 >= 2 && t % 10 <= 4 && (t % 100 < 10 || t % 100 >= 20) ? 1 : 2) }, 5: function(t) { return Number(0 == t ? 0 : 1 == t ? 1 : 2 == t ? 2 : t % 100 >= 3 && t % 100 <= 10 ? 3 : t % 100 >= 11 ? 4 : 5) }, 6: function(t) { return Number(1 == t ? 0 : t >= 2 && t <= 4 ? 1 : 2) }, 7: function(t) { return Number(1 == t ? 0 : t % 10 >= 2 && t % 10 <= 4 && (t % 100 < 10 || t % 100 >= 20) ? 1 : 2) }, 8: function(t) { return Number(1 == t ? 0 : 2 == t ? 1 : 8 != t && 11 != t ? 2 : 3) }, 9: function(t) { return Number(t >= 2) }, 10: function(t) { return Number(1 == t ? 0 : 2 == t ? 1 : t < 7 ? 2 : t < 11 ? 3 : 4) }, 11: function(t) { return Number(1 == t || 11 == t ? 0 : 2 == t || 12 == t ? 1 : t > 2 && t < 20 ? 2 : 3) }, 12: function(t) { return Number(t % 10 != 1 || t % 100 == 11) }, 13: function(t) { return Number(0 !== t) }, 14: function(t) { return Number(1 == t ? 0 : 2 == t ? 1 : 3 == t ? 2 : 3) }, 15: function(t) { return Number(t % 10 == 1 && t % 100 != 11 ? 0 : t % 10 >= 2 && (t % 100 < 10 || t % 100 >= 20) ? 1 : 2) }, 16: function(t) { return Number(t % 10 == 1 && t % 100 != 11 ? 0 : 0 !== t ? 1 : 2) }, 17: function(t) { return Number(1 == t || t % 10 == 1 && t % 100 != 11 ? 0 : 1) }, 18: function(t) { return Number(0 == t ? 0 : 1 == t ? 1 : 2) }, 19: function(t) { return Number(1 == t ? 0 : 0 == t || t % 100 > 1 && t % 100 < 11 ? 1 : t % 100 > 10 && t % 100 < 20 ? 2 : 3) }, 20: function(t) { return Number(1 == t ? 0 : 0 == t || t % 100 > 0 && t % 100 < 20 ? 1 : 2) }, 21: function(t) { return Number(t % 100 == 1 ? 1 : t % 100 == 2 ? 2 : t % 100 == 3 || t % 100 == 4 ? 3 : 0) }, 22: function(t) { return Number(1 == t ? 0 : 2 == t ? 1 : (t < 0 || t > 10) && t % 10 == 0 ? 2 : 3) } };

    function $t() { var t = {}; return qt.forEach((function(e) { e.lngs.forEach((function(i) { t[i] = { numbers: e.nr, plurals: Qt[e.fc] } })) })), t } var Zt = function() {
            function t(e) { var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
                _t(this, t), this.languageUtils = e, this.options = i, this.logger = At.create("pluralResolver"), this.rules = $t() } return wt(t, [{ key: "addRule", value: function(t, e) { this.rules[t] = e } }, { key: "getRule", value: function(t) { return this.rules[t] || this.rules[this.languageUtils.getLanguagePartFromCode(t)] } }, { key: "needsPlural", value: function(t) { var e = this.getRule(t); return e && e.numbers.length > 1 } }, { key: "getPluralFormsOfKey", value: function(t, e) { var i = this,
                        n = [],
                        r = this.getRule(t); return r ? (r.numbers.forEach((function(r) { var s = i.getSuffix(t, r);
                        n.push("".concat(e).concat(s)) })), n) : n } }, { key: "getSuffix", value: function(t, e) { var i = this,
                        n = this.getRule(t); if (n) { var r = n.noAbs ? n.plurals(e) : n.plurals(Math.abs(e)),
                            s = n.numbers[r];
                        this.options.simplifyPluralSuffix && 2 === n.numbers.length && 1 === n.numbers[0] && (2 === s ? s = "plural" : 1 === s && (s = "")); var o = function() { return i.options.prepend && s.toString() ? i.options.prepend + s.toString() : s.toString() }; return "v1" === this.options.compatibilityJSON ? 1 === s ? "" : "number" == typeof s ? "_plural_".concat(s.toString()) : o() : "v2" === this.options.compatibilityJSON || this.options.simplifyPluralSuffix && 2 === n.numbers.length && 1 === n.numbers[0] ? o() : this.options.prepend && r.toString() ? this.options.prepend + r.toString() : r.toString() } return this.logger.warn("no plural rule found for: ".concat(t)), "" } }]), t }(),
        Jt = function() {
            function t() { var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
                _t(this, t), this.logger = At.create("interpolator"), this.options = e, this.format = e.interpolation && e.interpolation.format || function(t) { return t }, this.init(e) } return wt(t, [{ key: "init", value: function() { var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
                    t.interpolation || (t.interpolation = { escapeValue: !0 }); var e = t.interpolation;
                    this.escape = e.escape !== undefined ? e.escape : Gt, this.escapeValue = e.escapeValue === undefined || e.escapeValue, this.useRawValueToEscape = e.useRawValueToEscape !== undefined && e.useRawValueToEscape, this.prefix = e.prefix ? jt(e.prefix) : e.prefixEscaped || "{{", this.suffix = e.suffix ? jt(e.suffix) : e.suffixEscaped || "}}", this.formatSeparator = e.formatSeparator ? e.formatSeparator : e.formatSeparator || ",", this.unescapePrefix = e.unescapeSuffix ? "" : e.unescapePrefix || "-", this.unescapeSuffix = this.unescapePrefix ? "" : e.unescapeSuffix || "", this.nestingPrefix = e.nestingPrefix ? jt(e.nestingPrefix) : e.nestingPrefixEscaped || jt("$t("), this.nestingSuffix = e.nestingSuffix ? jt(e.nestingSuffix) : e.nestingSuffixEscaped || jt(")"), this.nestingOptionsSeparator = e.nestingOptionsSeparator ? e.nestingOptionsSeparator : e.nestingOptionsSeparator || ",", this.maxReplaces = e.maxReplaces ? e.maxReplaces : 1e3, this.alwaysFormat = e.alwaysFormat !== undefined && e.alwaysFormat, this.resetRegExp() } }, { key: "reset", value: function() { this.options && this.init(this.options) } }, { key: "resetRegExp", value: function() { var t = "".concat(this.prefix, "(.+?)").concat(this.suffix);
                    this.regexp = new RegExp(t, "g"); var e = "".concat(this.prefix).concat(this.unescapePrefix, "(.+?)").concat(this.unescapeSuffix).concat(this.suffix);
                    this.regexpUnescape = new RegExp(e, "g"); var i = "".concat(this.nestingPrefix, "(.+?)").concat(this.nestingSuffix);
                    this.nestingRegexp = new RegExp(i, "g") } }, { key: "interpolate", value: function(t, e, i, n) { var r, s, o, a = this,
                        h = this.options && this.options.interpolation && this.options.interpolation.defaultVariables || {};

                    function u(t) { return t.replace(/\$/g, "$$$$") } var l = function(t) { if (t.indexOf(a.formatSeparator) < 0) { var r = Ft(e, h, t); return a.alwaysFormat ? a.format(r, undefined, i) : r } var s = t.split(a.formatSeparator),
                            o = s.shift().trim(),
                            u = s.join(a.formatSeparator).trim(); return a.format(Ft(e, h, o), u, i, n) };
                    this.resetRegExp(); var c = n && n.missingInterpolationHandler || this.options.missingInterpolationHandler,
                        d = n && n.interpolation && n.interpolation.skipOnVariables || this.options.interpolation.skipOnVariables; return [{ regex: this.regexpUnescape, safeValue: function(t) { return u(t) } }, { regex: this.regexp, safeValue: function(t) { return a.escapeValue ? u(a.escape(t)) : u(t) } }].forEach((function(e) { for (o = 0; r = e.regex.exec(t);) { if ((s = l(r[1].trim())) === undefined)
                                if ("function" == typeof c) { var i = c(t, r, n);
                                    s = "string" == typeof i ? i : "" } else { if (d) { s = r[0]; continue } a.logger.warn("missed to pass in variable ".concat(r[1], " for interpolating ").concat(t)), s = "" } else "string" == typeof s || a.useRawValueToEscape || (s = Mt(s)); if (t = t.replace(r[0], e.safeValue(s)), e.regex.lastIndex = 0, ++o >= a.maxReplaces) break } })), t } }, { key: "nest", value: function(t, e) { var i, n, r = this,
                        s = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},
                        o = bt({}, s);

                    function a(t, e) { var i = this.nestingOptionsSeparator; if (t.indexOf(i) < 0) return t; var n = t.split(new RegExp("".concat(i, "[ ]*{"))),
                            r = "{".concat(n[1]);
                        t = n[0], r = (r = this.interpolate(r, o)).replace(/'/g, '"'); try { o = JSON.parse(r), e && (o = bt({}, e, o)) } catch (s) { return this.logger.warn("failed parsing options string in nesting for key ".concat(t), s), "".concat(t).concat(i).concat(r) } return delete o.defaultValue, t } for (o.applyPostProcessor = !1, delete o.defaultValue; i = this.nestingRegexp.exec(t);) { var h = [],
                            u = !1; if (i[0].includes(this.formatSeparator) && !/{.*}/.test(i[1])) { var l = i[1].split(this.formatSeparator).map((function(t) { return t.trim() }));
                            i[1] = l.shift(), h = l, u = !0 } if ((n = e(a.call(this, i[1].trim(), o), o)) && i[0] === t && "string" != typeof n) return n; "string" != typeof n && (n = Mt(n)), n || (this.logger.warn("missed to resolve ".concat(i[1], " for nesting ").concat(t)), n = ""), u && (n = h.reduce((function(t, e) { return r.format(t, e, s.lng, s) }), n.trim())), t = t.replace(i[0], n), this.regexp.lastIndex = 0 } return t } }]), t }(); var te = function(t) {
        function e(t, i, n) { var r, s = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {}; return _t(this, e), r = St(this, Et(e).call(this)), Xt && It.call(Tt(r)), r.backend = t, r.store = i, r.services = n, r.languageUtils = n.languageUtils, r.options = s, r.logger = At.create("backendConnector"), r.state = {}, r.queue = [], r.backend && r.backend.init && r.backend.init(n, s.backend, s), r } return Ct(e, t), wt(e, [{ key: "queueLoad", value: function(t, e, i, n) { var r = this,
                    s = [],
                    o = [],
                    a = [],
                    h = []; return t.forEach((function(t) { var n = !0;
                    e.forEach((function(e) { var a = "".concat(t, "|").concat(e);!i.reload && r.store.hasResourceBundle(t, e) ? r.state[a] = 2 : r.state[a] < 0 || (1 === r.state[a] ? o.indexOf(a) < 0 && o.push(a) : (r.state[a] = 1, n = !1, o.indexOf(a) < 0 && o.push(a), s.indexOf(a) < 0 && s.push(a), h.indexOf(e) < 0 && h.push(e))) })), n || a.push(t) })), (s.length || o.length) && this.queue.push({ pending: o, loaded: {}, errors: [], callback: n }), { toLoad: s, pending: o, toLoadLanguages: a, toLoadNamespaces: h } } }, { key: "loaded", value: function(t, e, i) { var n = t.split("|"),
                    r = n[0],
                    s = n[1];
                e && this.emit("failedLoading", r, s, e), i && this.store.addResourceBundle(r, s, i), this.state[t] = e ? -1 : 2; var o = {};
                this.queue.forEach((function(i) {! function(t, e, i, n) { var r = Dt(t, e, Object),
                            s = r.obj,
                            o = r.k;
                        s[o] = s[o] || [], n && (s[o] = s[o].concat(i)), n || s[o].push(i) }(i.loaded, [r], s),
                    function(t, e) { for (var i = t.indexOf(e); - 1 !== i;) t.splice(i, 1), i = t.indexOf(e) }(i.pending, t), e && i.errors.push(e), 0 !== i.pending.length || i.done || (Object.keys(i.loaded).forEach((function(t) { o[t] || (o[t] = []), i.loaded[t].length && i.loaded[t].forEach((function(e) { o[t].indexOf(e) < 0 && o[t].push(e) })) })), i.done = !0, i.errors.length ? i.callback(i.errors) : i.callback()) })), this.emit("loaded", o), this.queue = this.queue.filter((function(t) { return !t.done })) } }, { key: "read", value: function(t, e, i) { var n = this,
                    r = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0,
                    s = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 350,
                    o = arguments.length > 5 ? arguments[5] : undefined; return t.length ? this.backend[i](t, e, (function(a, h) { a && h && r < 5 ? setTimeout((function() { n.read.call(n, t, e, i, r + 1, 2 * s, o) }), s) : o(a, h) })) : o(null, {}) } }, { key: "prepareLoading", value: function(t, e) { var i = this,
                    n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},
                    r = arguments.length > 3 ? arguments[3] : undefined; if (!this.backend) return this.logger.warn("No backend was added via i18next.use. Will not load resources."), r && r(); "string" == typeof t && (t = this.languageUtils.toResolveHierarchy(t)), "string" == typeof e && (e = [e]); var s = this.queueLoad(t, e, n, r); if (!s.toLoad.length) return s.pending.length || r(), null;
                s.toLoad.forEach((function(t) { i.loadOne(t) })) } }, { key: "load", value: function(t, e, i) { this.prepareLoading(t, e, {}, i) } }, { key: "reload", value: function(t, e, i) { this.prepareLoading(t, e, { reload: !0 }, i) } }, { key: "loadOne", value: function(t) { var e = this,
                    i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "",
                    n = t.split("|"),
                    r = n[0],
                    s = n[1];
                this.read(r, s, "read", undefined, undefined, (function(n, o) { n && e.logger.warn("".concat(i, "loading namespace ").concat(s, " for language ").concat(r, " failed"), n), !n && o && e.logger.log("".concat(i, "loaded namespace ").concat(s, " for language ").concat(r), o), e.loaded(t, n, o) })) } }, { key: "saveMissing", value: function(t, e, i, n, r) { var s = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};
                this.services.utils && this.services.utils.hasLoadedNamespace && !this.services.utils.hasLoadedNamespace(e) ? this.logger.warn('did not save key "'.concat(i, '" as the namespace "').concat(e, '" was not yet loaded'), "This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!") : i !== undefined && null !== i && "" !== i && (this.backend && this.backend.create && this.backend.create(t, e, i, n, null, bt({}, s, { isUpdate: r })), t && t[0] && this.store.addResource(t[0], e, i, n)) } }]), e }(It);

    function ee() { return { debug: !1, initImmediate: !0, ns: ["translation"], defaultNS: ["translation"], fallbackLng: ["dev"], fallbackNS: !1, whitelist: !1, nonExplicitWhitelist: !1, supportedLngs: !1, nonExplicitSupportedLngs: !1, load: "all", preload: !1, simplifyPluralSuffix: !0, keySeparator: ".", nsSeparator: ":", pluralSeparator: "_", contextSeparator: "_", partialBundledLanguages: !1, saveMissing: !1, updateMissing: !1, saveMissingTo: "fallback", saveMissingPlurals: !0, missingKeyHandler: !1, missingInterpolationHandler: !1, postProcess: !1, postProcessPassResolved: !1, returnNull: !0, returnEmptyString: !0, returnObjects: !1, joinArrays: !1, returnedObjectHandler: !1, parseMissingKeyHandler: !1, appendNamespaceToMissingKey: !1, appendNamespaceToCIMode: !1, overloadTranslationOptionHandler: function(t) { var e = {}; if ("object" === yt(t[1]) && (e = t[1]), "string" == typeof t[1] && (e.defaultValue = t[1]), "string" == typeof t[2] && (e.tDescription = t[2]), "object" === yt(t[2]) || "object" === yt(t[3])) { var i = t[3] || t[2];
                    Object.keys(i).forEach((function(t) { e[t] = i[t] })) } return e }, interpolation: { escapeValue: !0, format: function(t, e, i, n) { return t }, prefix: "{{", suffix: "}}", formatSeparator: ",", unescapePrefix: "-", nestingPrefix: "$t(", nestingSuffix: ")", nestingOptionsSeparator: ",", maxReplaces: 1e3, skipOnVariables: !1 } } }

    function ie(t) { return "string" == typeof t.ns && (t.ns = [t.ns]), "string" == typeof t.fallbackLng && (t.fallbackLng = [t.fallbackLng]), "string" == typeof t.fallbackNS && (t.fallbackNS = [t.fallbackNS]), t.whitelist && (t.whitelist && t.whitelist.indexOf("cimode") < 0 && (t.whitelist = t.whitelist.concat(["cimode"])), t.supportedLngs = t.whitelist), t.nonExplicitWhitelist && (t.nonExplicitSupportedLngs = t.nonExplicitWhitelist), t.supportedLngs && t.supportedLngs.indexOf("cimode") < 0 && (t.supportedLngs = t.supportedLngs.concat(["cimode"])), t }

    function ne() {} var re = new(function(t) {
        function e() { var t, i = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
                n = arguments.length > 1 ? arguments[1] : undefined; if (_t(this, e), t = St(this, Et(e).call(this)), Xt && It.call(Tt(t)), t.options = ie(i), t.services = {}, t.logger = At, t.modules = { external: [] }, n && !t.isInitialized && !i.isClone) { if (!t.options.initImmediate) return t.init(i, n), St(t, Tt(t));
                setTimeout((function() { t.init(i, n) }), 0) } return t } return Ct(e, t), wt(e, [{ key: "init", value: function() { var t = this,
                    e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
                    i = arguments.length > 1 ? arguments[1] : undefined;

                function n(t) { return t ? "function" == typeof t ? new t : t : null } if ("function" == typeof e && (i = e, e = {}), e.whitelist && !e.supportedLngs && this.logger.deprecate("whitelist", 'option "whitelist" will be renamed to "supportedLngs" in the next major - please make sure to rename this option asap.'), e.nonExplicitWhitelist && !e.nonExplicitSupportedLngs && this.logger.deprecate("whitelist", 'options "nonExplicitWhitelist" will be renamed to "nonExplicitSupportedLngs" in the next major - please make sure to rename this option asap.'), this.options = bt({}, ee(), this.options, ie(e)), this.format = this.options.interpolation.format, i || (i = ne), !this.options.isClone) { this.modules.logger ? At.init(n(this.modules.logger), this.options) : At.init(null, this.options); var r = new Kt(this.options);
                    this.store = new Ht(this.options.resources, this.options); var s = this.services;
                    s.logger = At, s.resourceStore = this.store, s.languageUtils = r, s.pluralResolver = new Zt(r, { prepend: this.options.pluralSeparator, compatibilityJSON: this.options.compatibilityJSON, simplifyPluralSuffix: this.options.simplifyPluralSuffix }), s.interpolator = new Jt(this.options), s.utils = { hasLoadedNamespace: this.hasLoadedNamespace.bind(this) }, s.backendConnector = new te(n(this.modules.backend), s.resourceStore, s, this.options), s.backendConnector.on("*", (function(e) { for (var i = arguments.length, n = new Array(i > 1 ? i - 1 : 0), r = 1; r < i; r++) n[r - 1] = arguments[r];
                        t.emit.apply(t, [e].concat(n)) })), this.modules.languageDetector && (s.languageDetector = n(this.modules.languageDetector), s.languageDetector.init(s, this.options.detection, this.options)), this.modules.i18nFormat && (s.i18nFormat = n(this.modules.i18nFormat), s.i18nFormat.init && s.i18nFormat.init(this)), this.translator = new Wt(this.services, this.options), this.translator.on("*", (function(e) { for (var i = arguments.length, n = new Array(i > 1 ? i - 1 : 0), r = 1; r < i; r++) n[r - 1] = arguments[r];
                        t.emit.apply(t, [e].concat(n)) })), this.modules.external.forEach((function(e) { e.init && e.init(t) })) } this.modules.languageDetector || this.options.lng || this.logger.warn("init: no languageDetector is used and no lng is defined"); var o = ["getResource", "hasResourceBundle", "getResourceBundle", "getDataByLanguage"];
                o.forEach((function(e) { t[e] = function() { var i; return (i = t.store)[e].apply(i, arguments) } })); var a = ["addResource", "addResources", "addResourceBundle", "removeResourceBundle"];
                a.forEach((function(e) { t[e] = function() { var i; return (i = t.store)[e].apply(i, arguments), t } })); var h = Rt(),
                    u = function() { t.changeLanguage(t.options.lng, (function(e, n) { t.isInitialized = !0, t.logger.log("initialized", t.options), t.emit("initialized", t.options), h.resolve(n), i(e, n) })) }; return this.options.resources || !this.options.initImmediate ? u() : setTimeout(u, 0), h } }, { key: "loadResources", value: function(t) { var e = this,
                    i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ne,
                    n = i,
                    r = "string" == typeof t ? t : this.language; if ("function" == typeof t && (n = t), !this.options.resources || this.options.partialBundledLanguages) { if (r && "cimode" === r.toLowerCase()) return n(); var s = [],
                        o = function(t) { t && e.services.languageUtils.toResolveHierarchy(t).forEach((function(t) { s.indexOf(t) < 0 && s.push(t) })) }; if (r) o(r);
                    else { var a = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);
                        a.forEach((function(t) { return o(t) })) } this.options.preload && this.options.preload.forEach((function(t) { return o(t) })), this.services.backendConnector.load(s, this.options.ns, n) } else n(null) } }, { key: "reloadResources", value: function(t, e, i) { var n = Rt(); return t || (t = this.languages), e || (e = this.options.ns), i || (i = ne), this.services.backendConnector.reload(t, e, (function(t) { n.resolve(), i(t) })), n } }, { key: "use", value: function(t) { if (!t) throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()"); if (!t.type) throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()"); return "backend" === t.type && (this.modules.backend = t), ("logger" === t.type || t.log && t.warn && t.error) && (this.modules.logger = t), "languageDetector" === t.type && (this.modules.languageDetector = t), "i18nFormat" === t.type && (this.modules.i18nFormat = t), "postProcessor" === t.type && zt.addPostProcessor(t), "3rdParty" === t.type && this.modules.external.push(t), this } }, { key: "changeLanguage", value: function(t, e) { var i = this;
                this.isLanguageChangingTo = t; var n = Rt();
                this.emit("languageChanging", t); var r = function(t) { var r = "string" == typeof t ? t : i.services.languageUtils.getBestMatchFromCodes(t);
                    r && (i.language || (i.language = r, i.languages = i.services.languageUtils.toResolveHierarchy(r)), i.translator.language || i.translator.changeLanguage(r), i.services.languageDetector && i.services.languageDetector.cacheUserLanguage(r)), i.loadResources(r, (function(t) {! function(t, r) { r ? (i.language = r, i.languages = i.services.languageUtils.toResolveHierarchy(r), i.translator.changeLanguage(r), i.isLanguageChangingTo = undefined, i.emit("languageChanged", r), i.logger.log("languageChanged", r)) : i.isLanguageChangingTo = undefined, n.resolve((function() { return i.t.apply(i, arguments) })), e && e(t, (function() { return i.t.apply(i, arguments) })) }(t, r) })) }; return t || !this.services.languageDetector || this.services.languageDetector.async ? !t && this.services.languageDetector && this.services.languageDetector.async ? this.services.languageDetector.detect(r) : r(t) : r(this.services.languageDetector.detect()), n } }, { key: "getFixedT", value: function(t, e) { var i = this,
                    n = function r(t, e) { var n; if ("object" !== yt(e)) { for (var s = arguments.length, o = new Array(s > 2 ? s - 2 : 0), a = 2; a < s; a++) o[a - 2] = arguments[a];
                            n = i.options.overloadTranslationOptionHandler([t, e].concat(o)) } else n = bt({}, e); return n.lng = n.lng || r.lng, n.lngs = n.lngs || r.lngs, n.ns = n.ns || r.ns, i.t(t, n) }; return "string" == typeof t ? n.lng = t : n.lngs = t, n.ns = e, n } }, { key: "t", value: function() { var t; return this.translator && (t = this.translator).translate.apply(t, arguments) } }, { key: "exists", value: function() { var t; return this.translator && (t = this.translator).exists.apply(t, arguments) } }, { key: "setDefaultNamespace", value: function(t) { this.options.defaultNS = t } }, { key: "hasLoadedNamespace", value: function(t) { var e = this,
                    i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {}; if (!this.isInitialized) return this.logger.warn("hasLoadedNamespace: i18next was not initialized", this.languages), !1; if (!this.languages || !this.languages.length) return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty", this.languages), !1; var n = this.languages[0],
                    r = !!this.options && this.options.fallbackLng,
                    s = this.languages[this.languages.length - 1]; if ("cimode" === n.toLowerCase()) return !0; var o = function(t, i) { var n = e.services.backendConnector.state["".concat(t, "|").concat(i)]; return -1 === n || 2 === n }; if (i.precheck) { var a = i.precheck(this, o); if (a !== undefined) return a } return !!this.hasResourceBundle(n, t) || (!this.services.backendConnector.backend || !(!o(n, t) || r && !o(s, t))) } }, { key: "loadNamespaces", value: function(t, e) { var i = this,
                    n = Rt(); return this.options.ns ? ("string" == typeof t && (t = [t]), t.forEach((function(t) { i.options.ns.indexOf(t) < 0 && i.options.ns.push(t) })), this.loadResources((function(t) { n.resolve(), e && e(t) })), n) : (e && e(), Promise.resolve()) } }, { key: "loadLanguages", value: function(t, e) { var i = Rt(); "string" == typeof t && (t = [t]); var n = this.options.preload || [],
                    r = t.filter((function(t) { return n.indexOf(t) < 0 })); return r.length ? (this.options.preload = n.concat(r), this.loadResources((function(t) { i.resolve(), e && e(t) })), i) : (e && e(), Promise.resolve()) } }, { key: "dir", value: function(t) { if (t || (t = this.languages && this.languages.length > 0 ? this.languages[0] : this.language), !t) return "rtl"; return ["ar", "shu", "sqr", "ssh", "xaa", "yhd", "yud", "aao", "abh", "abv", "acm", "acq", "acw", "acx", "acy", "adf", "ads", "aeb", "aec", "afb", "ajp", "apc", "apd", "arb", "arq", "ars", "ary", "arz", "auz", "avl", "ayh", "ayl", "ayn", "ayp", "bbz", "pga", "he", "iw", "ps", "pbt", "pbu", "pst", "prp", "prd", "ug", "ur", "ydd", "yds", "yih", "ji", "yi", "hbo", "men", "xmn", "fa", "jpr", "peo", "pes", "prs", "dv", "sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(t)) >= 0 ? "rtl" : "ltr" } }, { key: "createInstance", value: function() { var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
                    i = arguments.length > 1 ? arguments[1] : undefined; return new e(t, i) } }, { key: "cloneInstance", value: function() { var t = this,
                    i = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
                    n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ne,
                    r = bt({}, this.options, i, { isClone: !0 }),
                    s = new e(r),
                    o = ["store", "services", "language"]; return o.forEach((function(e) { s[e] = t[e] })), s.services = bt({}, this.services), s.services.utils = { hasLoadedNamespace: s.hasLoadedNamespace.bind(s) }, s.translator = new Wt(s.services, s.options), s.translator.on("*", (function(t) { for (var e = arguments.length, i = new Array(e > 1 ? e - 1 : 0), n = 1; n < e; n++) i[n - 1] = arguments[n];
                    s.emit.apply(s, [t].concat(i)) })), s.init(r, n), s.translator.options = s.options, s.translator.backendConnector.services.utils = { hasLoadedNamespace: s.hasLoadedNamespace.bind(s) }, s } }]), e }(It));
    class se { static add(...t) { re.init({ debug: ot, resources: {}, lng: document.documentElement.lang, fallbackLng: ot ? "cimode" : "en" }) } static use(t, e) { var i, n, r, s; const o = t.url.split("/"),
                a = o[o.length - 1]; if ("json" === t.extension && (a.includes(".cn") || a.includes(".i18"))) { if (a.includes(".cn")) { const e = {}; for (const i in t.data)
                        for (const n in t.data[i]) e[n] || (e[n] = {}), e[n][i] = t.data[i][n]; for (const t in e) re.addResources(t, "translation", e[t]) } a.includes(".i18") && re.addResources(null !== (n = null === (i = t.metadata) || void 0 === i ? void 0 : i.lng) && void 0 !== n ? n : "translation", null !== (s = null === (r = t.metadata) || void 0 === r ? void 0 : r.ns) && void 0 !== s ? s : "translation", t.data), e() } else e() } } class oe { static use(t, e) { var i, n; if (this instanceof r.Loader) { const s = this; if (!t.data || t.type !== r.LoaderResource.TYPE.JSON) return e(); if (null === (n = null === (i = t.data) || void 0 === i ? void 0 : i.meta) || void 0 === n ? void 0 : n.relatedMultiPacks) return t.data.meta.relatedMultiPacks.forEach(e => { const i = e.replace(".json", ""),
                        n = t.url.split("/");
                    n[n.length - 1] = e; const o = n.join("/").replace(s.baseUrl, ""); if (s.resources[i] || s.resources[o]) return; const a = { crossOrigin: t.crossOrigin, loadType: r.LoaderResource.TYPE.JSON, xhrType: r.LoaderResource.XHR_RESPONSE_TYPE.JSON, metadata: null, parentResource: t, name: e.replace(".json", ""), url: o };
                    s.add(a) }), e() } return e() } } class ae extends r.Container { constructor(t, e = null, i, n = !1, s = "") { super(), null != e && (this.spriteBack = r.Sprite.from(e), this.spriteBack.anchor.set(.5), this.addChild(this.spriteBack)), this.scaleContainer = new r.Sprite, this.scaleContainer.anchor.set(.5), this.addChild(this.scaleContainer), this.sprite = r.Sprite.from(t), this.sprite.anchor.set(.5), this.scaleContainer.addChild(this.sprite), this.callback = i, this.interactive = !0, this.on("mouseover", this.onMouseOver, this), this.on("pointerout", this.onPointerOut, this), this.on("pointerup", this.onPointerUp, this), this.on("pointerupoutside", this.onPointerUpOutside, this), this.on("pointerdown", this.onPointerDown, this), this.clicked = !1, this.clickOnce = n, this.biggerness = this.smallerness = .1, this.overallScale = 1, this.style = new r.TextStyle({ align: "center", dropShadow: !1, dropShadowAngle: 0, fill: ["white"], fillGradientType: 1, fontFamily: "LubalinGraphITCTurnerAraBold", fontSize: 30, fontStyle: "normal", fontVariant: "small-caps", lineJoin: "round", strokeThickness: 0 }), this.text = new r.Text(s, this.style), this.text.anchor.set(.5), this.scaleContainer.addChild(this.text), this.text.y = -3 } onMouseOver() { this.scaleContainer.scale.set(this.overallScale) } onPointerOut() { this.scaleContainer.scale.set(this.overallScale) } onPointerDown() { this.scaleContainer.scale.set(this.overallScale - this.smallerness), this.almostClicked = !0 } onPointerUp() { this.almostClicked && (this.clickOnce && this.clicked || this.callback && this.callback(), this.clicked = !0, this.almostClicked = !1), this.onMouseOver() } simulateClick() { this.clickOnce && this.clicked || this.callback && this.callback(), this.clicked = !0, this.almostClicked = !1 } simulateOver() { this.onMouseOver() } simulateOut() { this.onPointerOut() } simulateDown() { this.onPointerDown() } onPointerUpOutside() { this.almostClicked = !1 } changeText(t) { this.text.text = t } changeTextSize(t) { this.style.fontSize = t } changeTextStyle(t, e, i) { this.style = new r.TextStyle({ fill: [t], fontFamily: e, fontSize: i }), this.text.style = this.style } changeSprite(t) { this.sprite.texture = r.Texture.from(t) } setScale(t) { return this.overallScale = t, this.onPointerOut(), t } setHitArea(t) { this.hitArea = t } getSimilarCircle(t = !0) { const e = this.getLocalBounds(); return new r.Circle(e.x + e.width / 2, e.y + e.height / 2, t ? Math.max(e.width / 2, e.height / 2) : Math.min(e.width / 2, e.height / 2)) } onDestroy() { this.removeAllListeners() } } class he { constructor() {} static idealScale(t = 1, e = he.IDEAL_WIDTH, i = he.IDEAL_HEIGHT, n = lt.WIDTH, r = lt.HEIGHT, s = he.DEFAULT_TIEBREAKER) { return s(n / e, r / i) * t } static setScaleRelativeToScreen(t, e, i, n = lt.WIDTH, r = lt.HEIGHT, s = he.DEFAULT_TIEBREAKER) { return t.scale.set(1), t.scale.set(s(n * e / t.width, r * i / t.height)), t.scale.x } static setScaleRelativeToIdeal(t, e = he.IDEAL_WIDTH, i = he.IDEAL_HEIGHT, n = lt.WIDTH, r = lt.HEIGHT, s = he.DEFAULT_TIEBREAKER) { return t.scale.set(s(n / e, r / i)), t.scale.x } static forceWidth(t, e) { return t } static forceHeight(t, e) { return e } } he.IDEAL_WIDTH = 960, he.IDEAL_HEIGHT = 600, he.DEFAULT_TIEBREAKER = Math.min;
    class ue { constructor() {} static initialize(t) { ue.instance = t } static save(t) { return ue.instance ? ue.instance.save(t) : Promise.reject("You didn't call Initialize!") } static load(t) { return ue.instance ? ue.instance.load(t) : Promise.reject("You didn't call Initialize!") } static "delete"(t) { return ue.instance ? ue.instance["delete"](t) : Promise.reject("You didn't call Initialize!") } static getValue(t) { return ue.instance ? ue.instance.getValue(t) : null } static setValue(t, e) { return ue.instance ? ue.instance.setValue(t, e) : null } } class le extends h.a.Tween { constructor(t) { super({ a: 0 }, t) } to(t) { return super.to({ a: 1 }, t) } } class ce { static set muteMusic(t) { this._muteMusic = t, this.musicArray.forEach((t, e) => { q.volume(e, t.volume * (this._muteMusic ? 0 : 1)) }, this) } static get muteMusic() { return this._muteMusic } static playMusic(t, e = 1, i = !0) { if (!this.musicArray.has(t)) { const n = r.Loader.shared.resources[t].sound;
                n.play({ loop: i, volume: e }); const s = this.musicVolume * (this._muteMusic ? 0 : 1);
                q.volume(t, s), this.musicArray.set(t, { volume: this.musicVolume, sound: n }) } } static setFilters(t, e = []) { this.musicArray.has(t) && (this.musicArray.get(t).sound.filters = e) } static stopMusic(t, e = 0) { 0 != e ? this.musicArray.has(t) && (this.fade(t, 0, e), (new le).to(e).onComplete(() => { q.pause(t), q.resume(t), q.stop(t), this.musicArray["delete"](t) }).start()) : this.musicArray.has(t) && (q.pause(t), q.resume(t), q.stop(t), this.musicArray["delete"](t)) } static pauseMusic(t) { this.musicArray.has(t) && q.pause(t) } static resumeMusic(t) { this.musicArray.has(t) && (q.pause(t), q.resume(t)) } static fade(t, e, i) { const n = this.musicArray.get(t);
            n !== undefined && new h.a.Tween(n).to({ volume: e }, i).easing(h.a.Easing.Linear.None).onUpdate(() => { q.volume(t, n.volume * (this._muteMusic ? 0 : 1)) }).start() } static playSound(t, e) {!e && this.soundArray.includes(t) || (q.play(t), q.volume(t, this.soundVolume * (this.muteSound ? 0 : 1)), e || (this.soundArray.push(t), (new le).to(1e3 * this.overlapTime).onComplete(() => { this.soundArray.splice(this.soundArray.indexOf(t), 1) }).start())) } static playFX(t, e = 0, i = !1) { e > 0 ? (new le).to(1e3 * e).onComplete(() => { this.playSound(t, i) }).start() : this.playSound(t, i) } static getVolume(t) { const e = this.musicArray.get(t); return e !== undefined ? e.volume : undefined } } ce.musicArray = new Map, ce.soundArray = [], ce.musicVolume = 1, ce.soundVolume = 1, ce.overlapTime = .1, ce._muteMusic = !1, ce.muteSound = !1;
    class de extends r.Container { constructor(t, e, i, n) { super(), this.bg = r.Sprite.from("atlas/credits/credits.png"), this["in"] = !1, this.boardContainer = new r.Container, this.addChild(this.boardContainer), this.boardContainer.addChild(this.bg); const s = new r.TextStyle({ fontFamily: "LubalinGraphITCTurnerAraBold", align: "center", fill: "black", fontSize: 10, wordWrap: !1, wordWrapWidth: 75 }),
                o = new r.TextStyle({ fontFamily: "LubalinGraphITCTurnerAraBold", align: "center", fill: "black", fontSize: 10, wordWrap: !1, wordWrapWidth: 75 }); for (this.textProd = new r.Text(i, s), this.textProd.anchor.set(.5), this.textProd.x = 150, this.textProd.y = this.bg.height / 2, this.boardContainer.addChild(this.textProd), this.textDev = new r.Text(n, o), this.textDev.anchor.set(.5), this.textDev.x = 365, this.textDev.y = this.bg.height / 2, this.boardContainer.addChild(this.textDev); this.textDev.width > 75;) this.textDev.scale.x -= .01, this.textDev.scale.y -= .01, this.textProd.scale.x -= .01, this.textProd.scale.y -= .01, this.textDev.style.wordWrap = !0; for (; this.textProd.width > 75;) this.textDev.scale.x -= .01, this.textDev.scale.y -= .01, this.textProd.scale.x -= .01, this.textProd.scale.y -= .01, this.textProd.style.wordWrap = !0;
            this.boardContainer.x = 1.2 * -this.boardContainer.width, this.boardContainer.y = -this.boardContainer.height / 2, this.creditsButton = new ae(t, e, () => { this["in"] ? this.getOut() : this.getIn(), ce.playFX("button") }), this.creditsButton.interactive = !1, this.creditsButton.setHitArea(this.creditsButton.getSimilarCircle()), this.addChild(this.creditsButton), this.x = -this.creditsButton.width / 2, this.y = -this.creditsButton.height / 2 } getOut() { const t = new h.a.Tween(this.boardContainer);
            t.to({ x: 1.2 * -this.boardContainer.width }, 500), t.easing(h.a.Easing.Quadratic.Out), t.start(), this["in"] = !1 } getIn() { const t = new h.a.Tween(this.boardContainer);
            t.to({ x: this.boardContainer.width - 1.15 * this.boardContainer.width }, 500), t.easing(h.a.Easing.Quadratic.In), t.start(), this["in"] = !0 } interactiveButton(t) { this.creditsButton.interactive = t } } class pe extends r.Container { constructor(t, e = !1, i = 0, n = 0, s = !1, o = !1) { super(), this.selected = !1, this.spriteSelect = r.Sprite.from("atlas/LevelSelector/buttonLevelIncomplete.png"), this.spriteSelect.anchor.set(.5), this.spriteSelect.scale.set(1.5), this.spriteSelect.y = 3, this.addChild(this.spriteSelect), this.spriteSelect.visible = !1, this.spriteSelect.alpha = .5, this.spriteBack = r.Sprite.from("atlas/LevelSelector/bgbutton.png"), this.spriteBack.anchor.set(.5), this.addChild(this.spriteBack), this.scaleContainer = new r.Sprite, this.scaleContainer.anchor.set(.5), this.addChild(this.scaleContainer), this.sprite = s ? r.Sprite.from("atlas/LevelSelector/buttonLevelComplete.png") : o ? r.Sprite.from("atlas/LevelSelector/buttonLevelIncomplete.png") : r.Sprite.from("atlas/magicPixel.png"), this.sprite.anchor.set(.5), this.scaleContainer.addChild(this.sprite), this.callback = t, this.interactive = !0, n >= 1 && (this.star1 = r.Sprite.from("atlas/LevelSelector/star1.png"), this.star1.anchor.set(.5), this.star1.x = 0, this.star1.y = this.star1.height / 2, this.scaleContainer.addChild(this.star1), this.star1.visible = !1), n >= 2 && (this.star1 = r.Sprite.from("atlas/LevelSelector/star2.png"), this.star1.anchor.set(.5), this.star1.x = 0, this.star1.y = this.star1.height / 2, this.scaleContainer.addChild(this.star1), this.star1.visible = !1), 3 == n && (this.star1 = r.Sprite.from("atlas/LevelSelector/star3.png"), this.star1.anchor.set(.5), this.star1.x = 0, this.star1.y = this.star1.height / 2, this.scaleContainer.addChild(this.star1), this.star1.visible = !1), this.on("mouseover", this.onMouseOver, this), this.on("pointerout", this.onPointerOut, this), this.on("pointerup", this.onPointerUp, this), this.on("pointerupoutside", this.onPointerUpOutside, this), this.on("pointerdown", this.onPointerDown, this), this.clicked = !1, this.clickOnce = e, this.biggerness = this.smallerness = .1, this.overallScale = 1, this.style = new r.TextStyle({ align: "center", dropShadow: !1, dropShadowAngle: 0, fill: ["#BA7381"], fillGradientType: 1, fontFamily: "Fancy_font_02", fontSize: 50, fontStyle: "normal", fontVariant: "small-caps", lineJoin: "round", strokeThickness: 0 }), this.text = new r.Text(i.toString(), this.style), this.text.anchor.set(.5), this.scaleContainer.addChild(this.text), this.text.y = -3, this.text.visible = !1, o && (this.text.style.fill = "#756422") } tweenIn() { this.spriteBack.scale.set(0), this.sprite.scale.set(0); const t = new h.a.Tween(this.spriteBack.scale).to({ x: 1, y: 1 }, 500).easing(h.a.Easing.Quadratic.InOut).delay(0),
                e = new h.a.Tween(this.sprite.scale).to({ x: 1, y: 1 }, 500).easing(h.a.Easing.Quadratic.InOut).delay(0).onComplete(() => { this.text.visible = !0, this.star1 && (this.star1.visible = !0) });
            t.start(), e.start() } tweenOut() { this.text.visible = !1, this.star1 && (this.star1.visible = !1); const t = new h.a.Tween(this.spriteBack.scale).to({ x: 0, y: 0 }, 500).easing(h.a.Easing.Quadratic.InOut).delay(0),
                e = new h.a.Tween(this.sprite.scale).to({ x: 0, y: 0 }, 500).easing(h.a.Easing.Quadratic.InOut).delay(0).onComplete(() => {});
            t.start(), e.start() } onMouseOver() { this.scaleContainer.scale.set(this.overallScale) } onPointerOut() { this.scaleContainer.scale.set(this.overallScale) } onPointerDown() { this.scaleContainer.scale.set(this.overallScale - this.smallerness), this.almostClicked = !0 } onPointerUp() { this.almostClicked && (this.clickOnce && this.clicked || this.callback && this.callback(), this.clicked = !0, this.almostClicked = !1), this.onMouseOver() } simulateClick() { this.clickOnce && this.clicked || this.callback && this.callback(), this.clicked = !0, this.almostClicked = !1 } simulateOver() { this.onMouseOver() } simulateOut() { this.onPointerOut() } simulateDown() { this.onPointerDown() } onPointerUpOutside() { this.almostClicked = !1 } changeText(t) { this.text.text = t } changeTextSize(t) { this.style.fontSize = t } changeTextStyle(t, e, i) { this.style = new r.TextStyle({ fill: [t], fontFamily: e, fontSize: i }), this.text.style = this.style } setScale(t) { return this.overallScale = t, this.onPointerOut(), t } setHitArea(t) { this.hitArea = t } getSimilarCircle(t = !0) { const e = this.getLocalBounds(); return new r.Circle(e.x + e.width / 2, e.y + e.height / 2, t ? Math.max(e.width / 2, e.height / 2) : Math.min(e.width / 2, e.height / 2)) } onDestroy() { this.removeAllListeners() } update(t) { this.selected ? (this.spriteSelect.visible = !0, this.spriteSelect.angle += 1) : this.spriteSelect.visible = !1 } } class fe { constructor(t = 0, e = 0) { this.x = t, this.y = e } clone() { return new fe(this.x, this.y) } static pixi2Vector2(t) { return new fe(t.x, t.y) } addition(t) { return new fe(this.x + t.x, this.y + t.y) } substraction(t) { return new fe(this.x - t.x, this.y - t.y) } multiplication(t) { return new fe(this.x * t.x, this.y * t.y) } division(t) { return new fe(this.x / t.x, this.y / t.y) } scalarMultiplication(t) { return new fe(this.x * t, this.y * t) } dotProduct(t) { return this.x * t.x + this.y * t.y } magnitude() { return Math.sqrt(this.magnitudeSquared()) } magnitudeSquared() { return this.dotProduct(this.clone()) } } class me extends r.Container { constructor(t = !0) { super(), this.states = new Map, this.currentState = null, this._currentStateName = null, this.autoUpdate = t } get currentStateName() { return this._currentStateName } addState(t, e = [], i = !0) { this.states.has(t); const n = new r.AnimatedSprite(e, this.autoUpdate); return n.loop = i, this.states.set(t, n), n } playState(t, e = !1, i = !1, n, r = !1) { if (this.states.has(t)) { let r = 0,
                    s = 0; if (null !== this.currentState && (r = this.currentState.currentFrame, i && (s = this.currentState._currentTime - Math.trunc(this.currentState._currentTime)), this.currentState.stop(), this.removeChild(this.currentState)), this.currentState = this.states.get(t), this._currentStateName = t, n || e) { let t = r; for (n && (t += n); t < 0;) t += this.currentState.totalFrames;
                    this.currentState.gotoAndPlay(t % this.currentState.totalFrames), this.currentState._currentTime = t % this.currentState.totalFrames + s } else this.currentState.play();
                this.addChild(this.currentState) } return this.currentState } hasState(t) { return this.states.has(t) } setAnimationLoop(t, e) { this.states.get(t).loop = e } removeState(t) { if (this.states.has(t)) { const e = this.states.get(t);
                this.currentState === e && (this.currentState = null, this._currentStateName = null, this.removeChild(e)), this.states["delete"](t) } return null !== this.currentState } getAnimation(t) { return this.states.get(t) } customUpdate(t, e = !1) { null !== this.currentState && this.currentState.update(t * (999 * e + 1)) } }
    var ge, ye = i(15);! function(t) { t[t.POLY = 0] = "POLY", t[t.MULTI_POLY = 1] = "MULTI_POLY", t[t.CIRCLE = 2] = "CIRCLE" }(ge || (ge = {})); const ve = { color: 65280, complexColor: 16711680, fillAlpha: 0, strokeAlpha: .75, fillColor: 0, thickness: 1, centerRadius: 5, vertexRadius: 3, show: at };
    class be { constructor() {} static wrap(t, e, i) { const n = i - e + 1; return t < e && (t += n * Math.trunc((e - t) / n + 1)), e + (t - e) % n } static clamp(t, e, i) { return Math.min(Math.max(t, e), i) } static secondsToMSS(t) { return `${((t=Math.round(t))-(t%=60))/60}${9<t?":":":0"}${t}` } static fuzzyComp(t, e) { return Math.abs(t - e) < be.FLOATING_EPSILON ? 0 : Math.sign(t - e) } static fuzzySign(t) { return this.fuzzyComp(t, 0) } static fuzzyEq(t, e) { return Math.abs(t - e) < be.FLOATING_EPSILON } } be.FLOATING_EPSILON = Math.pow(2, -16);
    class _e extends r.Graphics { constructor(t, e) { super(), this.hitableKind = ge.POLY, this.debug = Object.assign(ve, e), e || (this.debug.show = !1), this.setPoints(t) } setPoints(t) { this.points = [], this.points.push(Array.from(t)), this.boundingBox = new r.Rectangle, this.points[0][0].x == this.points[0][this.points[0].length - 1].x && this.points[0][0].y == this.points[0][this.points[0].length - 1].y && this.points[0].pop(); for (let e = 0; e < this.points[0].length; e++) { const t = this.points[0][e],
                    i = e < this.points[0].length - 1 ? this.points[0][e + 1] : this.points[0][0];
                t === i || t.x !== i.x || t.y !== i.y || (this.points[0].splice(e, 1), e -= 1) } if (this.isConvex = _e.isConvex(this.points[0]), !this.isConvex) { const e = [];
                t.forEach(t => e.push(t.x, t.y)); const i = r.utils.earcut(e, [], 2);
                this.points = []; for (let t = 0; t < i.length / 3; t++) { const n = i[3 * t],
                        s = i[3 * t + 1],
                        o = i[3 * t + 2],
                        a = [];
                    a.push(new r.Point(e[2 * n], e[2 * n + 1])), a.push(new r.Point(e[2 * s], e[2 * s + 1])), a.push(new r.Point(e[2 * o], e[2 * o + 1])), this.points.push(a) } } this.vectors = [], this.shapes = []; for (const e of this.points) { const t = []; for (let i = 0; i < e.length; i++) t.push(new ye.Vector);
                this.vectors.push(t), this.shapes.push(new ye.Polygon) } this.clear(); for (const e of this.points) this.beginFill(this.debug.fillColor, this.debug.fillAlpha), this.lineStyle(this.debug.thickness, this.isConvex ? this.debug.color : this.debug.complexColor, this.debug.strokeAlpha), this.drawCircle(0, 0, this.debug.centerRadius), this.moveTo(e[0].x, e[0].y), e.forEach(t => this.lineTo(t.x, t.y)), this.closePath(), this.endFill(), e.forEach(t => { this.drawCircle(t.x, t.y, this.debug.vertexRadius) });
            this.visible = this.debug.show } makeWorldShape(t) { if (!t && (this.lastLocalID = null, this._recursivePostUpdateTransform(), this.parent ? this.displayObjectUpdateTransform() : (this.parent = this._tempDisplayObjectParent, this.displayObjectUpdateTransform(), this.parent = null), this.lastWorldID != this.transform._worldID)) { for (let t = 0; t < this.points.length; t++) { const e = this.points[t],
                        i = this.vectors[t],
                        n = this.shapes[t],
                        s = new r.Point;
                    this.transform.worldTransform.apply(this.position, s), n.pos.x = s.x, n.pos.y = s.y, e.forEach((t, e) => { this.transform.worldTransform.apply(t, s), i[e].x = s.x - n.pos.x, i[e].y = s.y - n.pos.y }), n.setPoints(i) } this.lastWorldID = this.transform._worldID } } makeLocalShape(t) { if (!t && (this.lastWorldID = null, this.transform.updateLocalTransform(), this.lastLocalID != this.transform._worldID)) { for (let t = 0; t < this.points.length; t++) { const e = this.points[t],
                        i = this.vectors[t],
                        n = this.shapes[t],
                        s = new r.Point;
                    this.transform.localTransform.apply(this.position, s), n.pos.x = s.x, n.pos.y = s.y, e.forEach((t, e) => { this.transform.localTransform.apply(t, s), i[e].x = s.x - n.pos.x, i[e].y = s.y - n.pos.y }), n.setPoints(i) } this.lastLocalID = this.transform._worldID } } makeBoundingBox() { let t = Number.POSITIVE_INFINITY,
                e = Number.POSITIVE_INFINITY,
                i = Number.NEGATIVE_INFINITY,
                n = Number.NEGATIVE_INFINITY; for (const r of this.shapes)
                for (const s of r.points) t = Math.min(s.x, t), e = Math.min(s.y, e), i = Math.max(s.x, i), n = Math.max(s.y, n);
            this.boundingBox.x = this.shapes[0].pos.x + t, this.boundingBox.y = this.shapes[0].pos.y + e, this.boundingBox.width = i - t, this.boundingBox.height = n - e } getWorldBoundingBox(t) { return this.makeWorldShape(t), this.makeBoundingBox(), this.boundingBox } getLocalBoundingBox(t) { return this.makeLocalShape(t), this.makeBoundingBox(), this.boundingBox } getWorldShape(t) { return this.makeWorldShape(t), this.shapes } getLocalShape(t) { return this.makeLocalShape(t), this.shapes } static makeBox(t, e, i, n, s) { return new _e([new r.Point(t, e), new r.Point(t + i, e), new r.Point(t + i, e + n), new r.Point(t, e + n)], s) } static makeRegular(t, e, i = 0, n) { const s = []; for (let o = 0; o < t; o++) { const n = e * Math.cos(2 * Math.PI * (o / t) + i),
                    a = e * Math.sin(2 * Math.PI * (o / t) + i);
                s.push(new r.Point(n, a)) } return new _e(s, n) } static isConvex(t) { if (t.length <= 3) return !0; let e, i = 0,
                n = 0,
                r = 0,
                s = 0,
                o = 0,
                a = 0,
                h = 0,
                u = t[t.length - 2],
                l = t[t.length - 1]; for (const c of t) { e = u, u = l, l = c; const t = u.x - e.x,
                    d = u.y - e.y,
                    p = l.x - u.x,
                    f = l.y - u.y; if (be.fuzzySign(p) > 0 ? (0 == n ? r = 1 : n < 0 && (s += 1), n = 1) : be.fuzzySign(p) < 0 && (0 == n ? r = -1 : n > 0 && (s += 1), n = -1), s > 2) return !1; if (be.fuzzySign(f) > 0 ? (0 == o ? a = 1 : o < 0 && (h += 1), o = 1) : be.fuzzySign(f) < 0 && (0 == o ? a = -1 : o > 0 && (h += 1), o = -1), h > 2) return !1; const m = t * f - p * d; if (be.fuzzyEq(i, 0) && !be.fuzzyEq(m, 0)) i = m;
                else { if (be.fuzzySign(i) > 0 && be.fuzzySign(m) < 0) return !1; if (be.fuzzySign(i) < 0 && be.fuzzySign(m) > 0) return !1 } } return 0 != n && 0 != r && n != r && (s += 1), 0 != o && 0 != a && o != a && (h += 1), 2 == s && 2 == h } }
    var xe;! function(t) { t[t.BACKSPACE = 8] = "BACKSPACE", t[t.TAB = 9] = "TAB", t[t.ENTER = 13] = "ENTER", t[t.SHIFT = 16] = "SHIFT", t[t.CTRL = 17] = "CTRL", t[t.ALT = 18] = "ALT", t[t.PAUSE = 19] = "PAUSE", t[t.CAPS_LOCK = 20] = "CAPS_LOCK", t[t.ESCAPE = 27] = "ESCAPE", t[t.SPACE = 32] = "SPACE", t[t.PAGE_UP = 33] = "PAGE_UP", t[t.PAGE_DOWN = 34] = "PAGE_DOWN", t[t.END = 35] = "END", t[t.HOME = 36] = "HOME", t[t.LEFT_ARROW = 37] = "LEFT_ARROW", t[t.UP_ARROW = 38] = "UP_ARROW", t[t.RIGHT_ARROW = 39] = "RIGHT_ARROW", t[t.DOWN_ARROW = 40] = "DOWN_ARROW", t[t.INSERT = 45] = "INSERT", t[t.DELETE = 46] = "DELETE", t[t.KEY_0 = 48] = "KEY_0", t[t.KEY_1 = 49] = "KEY_1", t[t.KEY_2 = 50] = "KEY_2", t[t.KEY_3 = 51] = "KEY_3", t[t.KEY_4 = 52] = "KEY_4", t[t.KEY_5 = 53] = "KEY_5", t[t.KEY_6 = 54] = "KEY_6", t[t.KEY_7 = 55] = "KEY_7", t[t.KEY_8 = 56] = "KEY_8", t[t.KEY_9 = 57] = "KEY_9", t[t.KEY_A = 65] = "KEY_A", t[t.KEY_B = 66] = "KEY_B", t[t.KEY_C = 67] = "KEY_C", t[t.KEY_D = 68] = "KEY_D", t[t.KEY_E = 69] = "KEY_E", t[t.KEY_F = 70] = "KEY_F", t[t.KEY_G = 71] = "KEY_G", t[t.KEY_H = 72] = "KEY_H", t[t.KEY_I = 73] = "KEY_I", t[t.KEY_J = 74] = "KEY_J", t[t.KEY_K = 75] = "KEY_K", t[t.KEY_L = 76] = "KEY_L", t[t.KEY_M = 77] = "KEY_M", t[t.KEY_N = 78] = "KEY_N", t[t.KEY_O = 79] = "KEY_O", t[t.KEY_P = 80] = "KEY_P", t[t.KEY_Q = 81] = "KEY_Q", t[t.KEY_R = 82] = "KEY_R", t[t.KEY_S = 83] = "KEY_S", t[t.KEY_T = 84] = "KEY_T", t[t.KEY_U = 85] = "KEY_U", t[t.KEY_V = 86] = "KEY_V", t[t.KEY_W = 87] = "KEY_W", t[t.KEY_X = 88] = "KEY_X", t[t.KEY_Y = 89] = "KEY_Y", t[t.KEY_Z = 90] = "KEY_Z", t[t.LEFT_META = 91] = "LEFT_META", t[t.RIGHT_META = 92] = "RIGHT_META", t[t.SELECT = 93] = "SELECT", t[t.NUMPAD_0 = 96] = "NUMPAD_0", t[t.NUMPAD_1 = 97] = "NUMPAD_1", t[t.NUMPAD_2 = 98] = "NUMPAD_2", t[t.NUMPAD_3 = 99] = "NUMPAD_3", t[t.NUMPAD_4 = 100] = "NUMPAD_4", t[t.NUMPAD_5 = 101] = "NUMPAD_5", t[t.NUMPAD_6 = 102] = "NUMPAD_6", t[t.NUMPAD_7 = 103] = "NUMPAD_7", t[t.NUMPAD_8 = 104] = "NUMPAD_8", t[t.NUMPAD_9 = 105] = "NUMPAD_9", t[t.MULTIPLY = 106] = "MULTIPLY", t[t.ADD = 107] = "ADD", t[t.SUBTRACT = 109] = "SUBTRACT", t[t.DECIMAL = 110] = "DECIMAL", t[t.DIVIDE = 111] = "DIVIDE", t[t.F1 = 112] = "F1", t[t.F2 = 113] = "F2", t[t.F3 = 114] = "F3", t[t.F4 = 115] = "F4", t[t.F5 = 116] = "F5", t[t.F6 = 117] = "F6", t[t.F7 = 118] = "F7", t[t.F8 = 119] = "F8", t[t.F9 = 120] = "F9", t[t.F10 = 121] = "F10", t[t.F11 = 122] = "F11", t[t.F12 = 123] = "F12", t[t.NUM_LOCK = 144] = "NUM_LOCK", t[t.SCROLL_LOCK = 145] = "SCROLL_LOCK", t[t.SEMICOLON = 186] = "SEMICOLON", t[t.EQUALS = 187] = "EQUALS", t[t.COMMA = 188] = "COMMA", t[t.DASH = 189] = "DASH", t[t.PERIOD = 190] = "PERIOD", t[t.FORWARD_SLASH = 191] = "FORWARD_SLASH", t[t.GRAVE_ACCENT = 192] = "GRAVE_ACCENT", t[t.OPEN_BRACKET = 219] = "OPEN_BRACKET", t[t.BACK_SLASH = 220] = "BACK_SLASH", t[t.CLOSE_BRACKET = 221] = "CLOSE_BRACKET", t[t.SINGLE_QUOTE = 222] = "SINGLE_QUOTE" }(xe || (xe = {})); var we, Te, Se, Ee = function() {
            function t(t, e, i) { this.value = t, this.time = e, this.next = null, this.isStepped = !1, this.ease = i ? "function" == typeof i ? i : Te.generateEase(i) : null } return t.createList = function(e) { if ("list" in e) { var i = e.list,
                        n = void 0,
                        r = i[0],
                        s = r.value,
                        o = r.time,
                        a = n = new t("string" == typeof s ? Te.hexToRGB(s) : s, o, e.ease); if (i.length > 2 || 2 === i.length && i[1].value !== s)
                        for (var h = 1; h < i.length; ++h) { var u = i[h],
                                l = u.value,
                                c = u.time;
                            n.next = new t("string" == typeof l ? Te.hexToRGB(l) : l, c), n = n.next }
                    return a.isStepped = !!e.isStepped, a } var d = new t("string" == typeof e.start ? Te.hexToRGB(e.start) : e.start, 0); return e.end !== e.start && (d.next = new t("string" == typeof e.end ? Te.hexToRGB(e.end) : e.end, 1)), d }, t }(),
        Pe = it;

    function Ce(t) { return we(t) } we = parseInt(/^(\d+)\./.exec(it.VERSION)[1], 10) < 5 ? Pe.Texture.fromImage : Pe.Texture.from, (Se = Te || (Te = {})).verbose = !1, Se.DEG_TO_RADS = Math.PI / 180, Se.rotatePoint = function(t, e) { if (t) { t *= Se.DEG_TO_RADS; var i = Math.sin(t),
                n = Math.cos(t),
                r = e.x * n - e.y * i,
                s = e.x * i + e.y * n;
            e.x = r, e.y = s } }, Se.combineRGBComponents = function(t, e, i) { return t << 16 | e << 8 | i }, Se.normalize = function(t) { var e = 1 / Se.length(t);
        t.x *= e, t.y *= e }, Se.scaleBy = function(t, e) { t.x *= e, t.y *= e }, Se.length = function(t) { return Math.sqrt(t.x * t.x + t.y * t.y) }, Se.hexToRGB = function(t, e) { var i; return e || (e = {}), "#" === t.charAt(0) ? t = t.substr(1) : 0 === t.indexOf("0x") && (t = t.substr(2)), 8 === t.length && (i = t.substr(0, 2), t = t.substr(2)), e.r = parseInt(t.substr(0, 2), 16), e.g = parseInt(t.substr(2, 2), 16), e.b = parseInt(t.substr(4, 2), 16), i && (e.a = parseInt(i, 16)), e }, Se.generateEase = function(t) { var e = t.length,
            i = 1 / e; return function(n) { var r = e * n | 0,
                s = (n - r * i) * e,
                o = t[r] || t[e - 1]; return o.s + s * (2 * (1 - s) * (o.cp - o.s) + s * (o.e - o.s)) } }, Se.getBlendMode = function(t) { if (!t) return it.BLEND_MODES.NORMAL; for (t = t.toUpperCase(); t.indexOf(" ") >= 0;) t = t.replace(" ", "_"); return it.BLEND_MODES[t] || it.BLEND_MODES.NORMAL }, Se.createSteppedGradient = function(t, e) { void 0 === e && (e = 10), ("number" != typeof e || e <= 0) && (e = 10); var i = new Ee(Se.hexToRGB(t[0].value), t[0].time);
        i.isStepped = !0; for (var n = i, r = t[0], s = 1, o = t[s], a = 1; a < e; ++a) { for (var h = a / e; h > o.time;) r = o, o = t[++s];
            h = (h - r.time) / (o.time - r.time); var u = Se.hexToRGB(r.value),
                l = Se.hexToRGB(o.value),
                c = { r: (l.r - u.r) * h + u.r, g: (l.g - u.g) * h + u.g, b: (l.b - u.b) * h + u.b };
            n.next = new Ee(c, a / e), n = n.next } return i }; var Oe = function(t, e) { return (Oe = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) })(t, e) };

    function Ae(t, e) {
        function i() { this.constructor = t } Oe(t, e), t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i) }

    function Ie(t) { return this.ease && (t = this.ease(t)), (this.next.value - this.current.value) * t + this.current.value }

    function Re(t) { this.ease && (t = this.ease(t)); var e = this.current.value,
            i = this.next.value,
            n = (i.r - e.r) * t + e.r,
            r = (i.g - e.g) * t + e.g,
            s = (i.b - e.b) * t + e.b; return Te.combineRGBComponents(n, r, s) }

    function Me(t) { for (this.ease && (t = this.ease(t)); t > this.next.time;) this.current = this.next, this.next = this.next.next; return t = (t - this.current.time) / (this.next.time - this.current.time), (this.next.value - this.current.value) * t + this.current.value }

    function Le(t) { for (this.ease && (t = this.ease(t)); t > this.next.time;) this.current = this.next, this.next = this.next.next;
        t = (t - this.current.time) / (this.next.time - this.current.time); var e = this.current.value,
            i = this.next.value,
            n = (i.r - e.r) * t + e.r,
            r = (i.g - e.g) * t + e.g,
            s = (i.b - e.b) * t + e.b; return Te.combineRGBComponents(n, r, s) }

    function De(t) { for (this.ease && (t = this.ease(t)); this.next && t > this.next.time;) this.current = this.next, this.next = this.next.next; return this.current.value }

    function ke(t) { for (this.ease && (t = this.ease(t)); this.next && t > this.next.time;) this.current = this.next, this.next = this.next.next; var e = this.current.value; return Te.combineRGBComponents(e.r, e.g, e.b) } var Ne, Fe = function() {
            function t(t) { void 0 === t && (t = !1), this.current = null, this.next = null, this.isColor = !!t, this.interpolate = null, this.ease = null } return t.prototype.reset = function(t) { this.current = t, this.next = t.next, this.next && this.next.time >= 1 ? this.interpolate = this.isColor ? Re : Ie : t.isStepped ? this.interpolate = this.isColor ? ke : De : this.interpolate = this.isColor ? Le : Me, this.ease = this.current.ease }, t }(),
        Be = function(t) {
            function e(i) { var n = t.call(this) || this; return n.emitter = i, n.anchor.x = n.anchor.y = .5, n.velocity = new it.Point, n.rotationSpeed = 0, n.rotationAcceleration = 0, n.maxLife = 0, n.age = 0, n.ease = null, n.extraData = null, n.alphaList = new Fe, n.speedList = new Fe, n.speedMultiplier = 1, n.acceleration = new it.Point, n.maxSpeed = NaN, n.scaleList = new Fe, n.scaleMultiplier = 1, n.colorList = new Fe(!0), n._doAlpha = !1, n._doScale = !1, n._doSpeed = !1, n._doAcceleration = !1, n._doColor = !1, n._doNormalMovement = !1, n._oneOverLife = 0, n.next = null, n.prev = null, n.init = n.init, n.Particle_init = e.prototype.init, n.update = n.update, n.Particle_update = e.prototype.update, n.Sprite_destroy = t.prototype.destroy, n.Particle_destroy = e.prototype.destroy, n.applyArt = n.applyArt, n.kill = n.kill, n } return Ae(e, t), e.prototype.init = function() { this.age = 0, this.velocity.x = this.speedList.current.value * this.speedMultiplier, this.velocity.y = 0, Te.rotatePoint(this.rotation, this.velocity), this.noRotation ? this.rotation = 0 : this.rotation *= Te.DEG_TO_RADS, this.rotationSpeed *= Te.DEG_TO_RADS, this.rotationAcceleration *= Te.DEG_TO_RADS, this.alpha = this.alphaList.current.value, this.scale.x = this.scale.y = this.scaleList.current.value, this._doAlpha = !!this.alphaList.current.next, this._doSpeed = !!this.speedList.current.next, this._doScale = !!this.scaleList.current.next, this._doColor = !!this.colorList.current.next, this._doAcceleration = 0 !== this.acceleration.x || 0 !== this.acceleration.y, this._doNormalMovement = this._doSpeed || 0 !== this.speedList.current.value || this._doAcceleration, this._oneOverLife = 1 / this.maxLife; var t = this.colorList.current.value;
                this.tint = Te.combineRGBComponents(t.r, t.g, t.b), this.visible = !0 }, e.prototype.applyArt = function(t) { this.texture = t || it.Texture.EMPTY }, e.prototype.update = function(t) { if (this.age += t, this.age >= this.maxLife || this.age < 0) return this.kill(), -1; var e = this.age * this._oneOverLife; if (this.ease && (e = 4 === this.ease.length ? this.ease(e, 0, 1, 1) : this.ease(e)), this._doAlpha && (this.alpha = this.alphaList.interpolate(e)), this._doScale) { var i = this.scaleList.interpolate(e) * this.scaleMultiplier;
                    this.scale.x = this.scale.y = i } if (this._doNormalMovement) { var n = void 0,
                        r = void 0; if (this._doSpeed) { var s = this.speedList.interpolate(e) * this.speedMultiplier;
                        Te.normalize(this.velocity), Te.scaleBy(this.velocity, s), n = this.velocity.x * t, r = this.velocity.y * t } else if (this._doAcceleration) { var o = this.velocity.x,
                            a = this.velocity.y; if (this.velocity.x += this.acceleration.x * t, this.velocity.y += this.acceleration.y * t, this.maxSpeed) { var h = Te.length(this.velocity);
                            h > this.maxSpeed && Te.scaleBy(this.velocity, this.maxSpeed / h) } n = (o + this.velocity.x) / 2 * t, r = (a + this.velocity.y) / 2 * t } else n = this.velocity.x * t, r = this.velocity.y * t;
                    this.position.x += n, this.position.y += r } if (this._doColor && (this.tint = this.colorList.interpolate(e)), 0 !== this.rotationAcceleration) { var u = this.rotationSpeed + this.rotationAcceleration * t;
                    this.rotation += (this.rotationSpeed + u) / 2 * t, this.rotationSpeed = u } else 0 !== this.rotationSpeed ? this.rotation += this.rotationSpeed * t : this.acceleration && !this.noRotation && (this.rotation = Math.atan2(this.velocity.y, this.velocity.x)); return e }, e.prototype.kill = function() { this.emitter.recycle(this) }, e.prototype.destroy = function() { this.parent && this.parent.removeChild(this), this.Sprite_destroy(), this.emitter = this.velocity = this.colorList = this.scaleList = this.alphaList = this.speedList = this.ease = this.next = this.prev = null }, e.parseArt = function(t) { var e; for (e = t.length; e >= 0; --e) "string" == typeof t[e] && (t[e] = Ce(t[e])); if (Te.verbose)
                    for (e = t.length - 1; e > 0; --e)
                        if (t[e].baseTexture !== t[e - 1].baseTexture) { window.console; break } return t }, e.parseData = function(t) { return t }, e }(it.Sprite),
        je = function() {
            function t(t) { this.segments = [], this.countingLengths = [], this.totalLength = 0, this.init(t) } return t.prototype.init = function(t) { if (t && t.length)
                    if (Array.isArray(t[0]))
                        for (var e = 0; e < t.length; ++e)
                            for (var i = t[e], n = i[0], r = 1; r < i.length; ++r) { var s = i[r];
                                this.segments.push({ p1: n, p2: s, l: 0 }), n = s } else
                                for (n = t[0], e = 1; e < t.length; ++e) { s = t[e];
                                    this.segments.push({ p1: n, p2: s, l: 0 }), n = s } else this.segments.push({ p1: { x: 0, y: 0 }, p2: { x: 0, y: 0 }, l: 0 }); for (e = 0; e < this.segments.length; ++e) { var o = this.segments[e],
                        a = o.p1,
                        h = o.p2,
                        u = Math.sqrt((h.x - a.x) * (h.x - a.x) + (h.y - a.y) * (h.y - a.y));
                    this.segments[e].l = u, this.totalLength += u, this.countingLengths.push(this.totalLength) } }, t.prototype.getRandomPoint = function(t) { var e, i, n = Math.random() * this.totalLength; if (1 === this.segments.length) e = this.segments[0], i = n;
                else
                    for (var r = 0; r < this.countingLengths.length; ++r)
                        if (n < this.countingLengths[r]) { e = this.segments[r], i = 0 === r ? n : n - this.countingLengths[r - 1]; break } i /= e.l || 1; var s = e.p1,
                    o = e.p2;
                t.x = s.x + i * (o.x - s.x), t.y = s.y + i * (o.y - s.y) }, t }(),
        Ue = it;
    Ne = parseInt(/^(\d+)\./.exec(it.VERSION)[1], 10) < 5 ? Ue.ticker.shared : Ue.Ticker.shared; var Ge = new it.Point,
        Xe = function() {
            function t(t, e, i) { this._currentImageIndex = -1, this._particleConstructor = Be, this.particleImages = null, this.startAlpha = null, this.startSpeed = null, this.minimumSpeedMultiplier = 1, this.acceleration = null, this.maxSpeed = NaN, this.startScale = null, this.minimumScaleMultiplier = 1, this.startColor = null, this.minLifetime = 0, this.maxLifetime = 0, this.minStartRotation = 0, this.maxStartRotation = 0, this.noRotation = !1, this.minRotationSpeed = 0, this.maxRotationSpeed = 0, this.particleBlendMode = 0, this.customEase = null, this.extraData = null, this._frequency = 1, this.spawnChance = 1, this.maxParticles = 1e3, this.emitterLifetime = -1, this.spawnPos = null, this.spawnType = null, this._spawnFunc = null, this.spawnRect = null, this.spawnCircle = null, this.spawnPolygonalChain = null, this.particlesPerWave = 1, this.particleSpacing = 0, this.angleStart = 0, this.rotation = 0, this.ownerPos = null, this._prevEmitterPos = null, this._prevPosIsValid = !1, this._posChanged = !1, this._parent = null, this.addAtBack = !1, this.particleCount = 0, this._emit = !1, this._spawnTimer = 0, this._emitterLife = -1, this._activeParticlesFirst = null, this._activeParticlesLast = null, this._poolFirst = null, this._origConfig = null, this._origArt = null, this._autoUpdate = !1, this._currentImageIndex = -1, this._destroyWhenComplete = !1, this._completeCallback = null, this.parent = t, e && i && this.init(e, i), this.recycle = this.recycle, this.update = this.update, this.rotate = this.rotate, this.updateSpawnPos = this.updateSpawnPos, this.updateOwnerPos = this.updateOwnerPos } return Object.defineProperty(t.prototype, "orderedArt", { get: function() { return -1 !== this._currentImageIndex }, set: function(t) { this._currentImageIndex = t ? 0 : -1 }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "frequency", { get: function() { return this._frequency }, set: function(t) { this._frequency = "number" == typeof t && t > 0 ? t : 1 }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "particleConstructor", { get: function() { return this._particleConstructor }, set: function(t) { if (t !== this._particleConstructor) { this._particleConstructor = t, this.cleanup(); for (var e = this._poolFirst; e; e = e.next) e.destroy();
                        this._poolFirst = null, this._origConfig && this._origArt && this.init(this._origArt, this._origConfig) } }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "parent", { get: function() { return this._parent }, set: function(t) { this.cleanup(), this._parent = t }, enumerable: !0, configurable: !0 }), t.prototype.init = function(t, e) { if (t && e) { this.cleanup(), this._origConfig = e, this._origArt = t, t = Array.isArray(t) ? t.slice() : [t]; var i = this._particleConstructor;
                    this.particleImages = i.parseArt ? i.parseArt(t) : t, e.alpha ? this.startAlpha = Ee.createList(e.alpha) : this.startAlpha = new Ee(1, 0), e.speed ? (this.startSpeed = Ee.createList(e.speed), this.minimumSpeedMultiplier = ("minimumSpeedMultiplier" in e ? e.minimumSpeedMultiplier : e.speed.minimumSpeedMultiplier) || 1) : (this.minimumSpeedMultiplier = 1, this.startSpeed = new Ee(0, 0)); var n = e.acceleration;
                    n && (n.x || n.y) ? (this.startSpeed.next = null, this.acceleration = new it.Point(n.x, n.y), this.maxSpeed = e.maxSpeed || NaN) : this.acceleration = new it.Point, e.scale ? (this.startScale = Ee.createList(e.scale), this.minimumScaleMultiplier = ("minimumScaleMultiplier" in e ? e.minimumScaleMultiplier : e.scale.minimumScaleMultiplier) || 1) : (this.startScale = new Ee(1, 0), this.minimumScaleMultiplier = 1), e.color ? this.startColor = Ee.createList(e.color) : this.startColor = new Ee({ r: 255, g: 255, b: 255 }, 0), e.startRotation ? (this.minStartRotation = e.startRotation.min, this.maxStartRotation = e.startRotation.max) : this.minStartRotation = this.maxStartRotation = 0, e.noRotation && (this.minStartRotation || this.maxStartRotation) ? this.noRotation = !!e.noRotation : this.noRotation = !1, e.rotationSpeed ? (this.minRotationSpeed = e.rotationSpeed.min, this.maxRotationSpeed = e.rotationSpeed.max) : this.minRotationSpeed = this.maxRotationSpeed = 0, this.rotationAcceleration = e.rotationAcceleration || 0, this.minLifetime = e.lifetime.min, this.maxLifetime = e.lifetime.max, this.particleBlendMode = Te.getBlendMode(e.blendMode), e.ease ? this.customEase = "function" == typeof e.ease ? e.ease : Te.generateEase(e.ease) : this.customEase = null, i.parseData ? this.extraData = i.parseData(e.extraData) : this.extraData = e.extraData || null, this.spawnRect = this.spawnCircle = null, this.particlesPerWave = 1, e.particlesPerWave && e.particlesPerWave > 1 && (this.particlesPerWave = e.particlesPerWave), this.particleSpacing = 0, this.angleStart = 0, this.parseSpawnType(e), this.frequency = e.frequency, this.spawnChance = "number" == typeof e.spawnChance && e.spawnChance > 0 ? e.spawnChance : 1, this.emitterLifetime = e.emitterLifetime || -1, this.maxParticles = e.maxParticles > 0 ? e.maxParticles : 1e3, this.addAtBack = !!e.addAtBack, this.rotation = 0, this.ownerPos = new it.Point, this.spawnPos = new it.Point(e.pos.x, e.pos.y), this.initAdditional(t, e), this._prevEmitterPos = this.spawnPos.clone(), this._prevPosIsValid = !1, this._spawnTimer = 0, this.emit = e.emit === undefined || !!e.emit, this.autoUpdate = !!e.autoUpdate, this.orderedArt = !!e.orderedArt } }, t.prototype.initAdditional = function(t, e) {}, t.prototype.parseSpawnType = function(t) { var e; switch (t.spawnType) {
                    case "rect":
                        this.spawnType = "rect", this._spawnFunc = this._spawnRect; var i = t.spawnRect;
                        this.spawnRect = new it.Rectangle(i.x, i.y, i.w, i.h); break;
                    case "circle":
                        this.spawnType = "circle", this._spawnFunc = this._spawnCircle, e = t.spawnCircle, this.spawnCircle = new it.Circle(e.x, e.y, e.r); break;
                    case "ring":
                        this.spawnType = "ring", this._spawnFunc = this._spawnRing, e = t.spawnCircle, this.spawnCircle = new it.Circle(e.x, e.y, e.r), this.spawnCircle.minRadius = e.minR; break;
                    case "burst":
                        this.spawnType = "burst", this._spawnFunc = this._spawnBurst, this.particleSpacing = t.particleSpacing, this.angleStart = t.angleStart ? t.angleStart : 0; break;
                    case "point":
                        this.spawnType = "point", this._spawnFunc = this._spawnPoint; break;
                    case "polygonalChain":
                        this.spawnType = "polygonalChain", this._spawnFunc = this._spawnPolygonalChain, this.spawnPolygonalChain = new je(t.spawnPolygon); break;
                    default:
                        this.spawnType = "point", this._spawnFunc = this._spawnPoint } }, t.prototype.recycle = function(t) { t.next && (t.next.prev = t.prev), t.prev && (t.prev.next = t.next), t === this._activeParticlesLast && (this._activeParticlesLast = t.prev), t === this._activeParticlesFirst && (this._activeParticlesFirst = t.next), t.prev = null, t.next = this._poolFirst, this._poolFirst = t, t.parent && t.parent.removeChild(t), --this.particleCount }, t.prototype.rotate = function(t) { if (this.rotation !== t) { var e = t - this.rotation;
                    this.rotation = t, Te.rotatePoint(e, this.spawnPos), this._posChanged = !0 } }, t.prototype.updateSpawnPos = function(t, e) { this._posChanged = !0, this.spawnPos.x = t, this.spawnPos.y = e }, t.prototype.updateOwnerPos = function(t, e) { this._posChanged = !0, this.ownerPos.x = t, this.ownerPos.y = e }, t.prototype.resetPositionTracking = function() { this._prevPosIsValid = !1 }, Object.defineProperty(t.prototype, "emit", { get: function() { return this._emit }, set: function(t) { this._emit = !!t, this._emitterLife = this.emitterLifetime }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "autoUpdate", { get: function() { return this._autoUpdate }, set: function(t) { this._autoUpdate && !t ? Ne.remove(this.update, this) : !this._autoUpdate && t && Ne.add(this.update, this), this._autoUpdate = !!t }, enumerable: !0, configurable: !0 }), t.prototype.playOnceAndDestroy = function(t) { this.autoUpdate = !0, this.emit = !0, this._destroyWhenComplete = !0, this._completeCallback = t }, t.prototype.playOnce = function(t) { this.emit = !0, this._completeCallback = t }, t.prototype.update = function(t) { if (this._autoUpdate && (t = t / it.settings.TARGET_FPMS / 1e3), this._parent) { var e, i, n, r, s; for (i = this._activeParticlesFirst; i; i = n) n = i.next, i.update(t);
                    this._prevPosIsValid && (r = this._prevEmitterPos.x, s = this._prevEmitterPos.y); var o = this.ownerPos.x + this.spawnPos.x,
                        a = this.ownerPos.y + this.spawnPos.y; if (this._emit)
                        for (this._spawnTimer -= t < 0 ? 0 : t; this._spawnTimer <= 0;) { if (this._emitterLife >= 0 && (this._emitterLife -= this._frequency, this._emitterLife <= 0)) { this._spawnTimer = 0, this._emitterLife = 0, this.emit = !1; break } if (this.particleCount >= this.maxParticles) this._spawnTimer += this._frequency;
                            else { var h = void 0; if (h = this.minLifetime === this.maxLifetime ? this.minLifetime : Math.random() * (this.maxLifetime - this.minLifetime) + this.minLifetime, -this._spawnTimer < h) { var u = void 0,
                                        l = void 0; if (this._prevPosIsValid && this._posChanged) { var c = 1 + this._spawnTimer / t;
                                        u = (o - r) * c + r, l = (a - s) * c + s } else u = o, l = a;
                                    e = 0; for (var d = Math.min(this.particlesPerWave, this.maxParticles - this.particleCount); e < d; ++e)
                                        if (!(this.spawnChance < 1 && Math.random() >= this.spawnChance)) { var p = void 0; if (this._poolFirst ? (p = this._poolFirst, this._poolFirst = this._poolFirst.next, p.next = null) : p = new this.particleConstructor(this), this.particleImages.length > 1 ? -1 !== this._currentImageIndex ? (p.applyArt(this.particleImages[this._currentImageIndex++]), (this._currentImageIndex < 0 || this._currentImageIndex >= this.particleImages.length) && (this._currentImageIndex = 0)) : p.applyArt(this.particleImages[Math.floor(Math.random() * this.particleImages.length)]) : p.applyArt(this.particleImages[0]), p.alphaList.reset(this.startAlpha), 1 !== this.minimumSpeedMultiplier && (p.speedMultiplier = Math.random() * (1 - this.minimumSpeedMultiplier) + this.minimumSpeedMultiplier), p.speedList.reset(this.startSpeed), p.acceleration.x = this.acceleration.x, p.acceleration.y = this.acceleration.y, p.maxSpeed = this.maxSpeed, 1 !== this.minimumScaleMultiplier && (p.scaleMultiplier = Math.random() * (1 - this.minimumScaleMultiplier) + this.minimumScaleMultiplier), p.scaleList.reset(this.startScale), p.colorList.reset(this.startColor), this.minRotationSpeed === this.maxRotationSpeed ? p.rotationSpeed = this.minRotationSpeed : p.rotationSpeed = Math.random() * (this.maxRotationSpeed - this.minRotationSpeed) + this.minRotationSpeed, p.rotationAcceleration = this.rotationAcceleration, p.noRotation = this.noRotation, p.maxLife = h, p.blendMode = this.particleBlendMode, p.ease = this.customEase, p.extraData = this.extraData, this.applyAdditionalProperties(p), this._spawnFunc(p, u, l, e), p.init(), p.parent) { var f = this._parent.children; if (f[0] === p) f.shift();
                                                else if (f[f.length - 1] === p) f.pop();
                                                else { var m = f.indexOf(p);
                                                    f.splice(m, 1) } this.addAtBack ? f.unshift(p) : f.push(p) } else this.addAtBack ? this._parent.addChildAt(p, 0) : this._parent.addChild(p);
                                            this._activeParticlesLast ? (this._activeParticlesLast.next = p, p.prev = this._activeParticlesLast, this._activeParticlesLast = p) : this._activeParticlesLast = this._activeParticlesFirst = p, ++this.particleCount, p.update(-this._spawnTimer) } } this._spawnTimer += this._frequency } }
                    if (this._posChanged && (this._prevEmitterPos.x = o, this._prevEmitterPos.y = a, this._prevPosIsValid = !0, this._posChanged = !1), !this._emit && !this._activeParticlesFirst) { if (this._completeCallback) { var g = this._completeCallback;
                            this._completeCallback = null, g() } this._destroyWhenComplete && this.destroy() } } }, t.prototype.applyAdditionalProperties = function(t) {}, t.prototype._spawnPoint = function(t, e, i) { this.minStartRotation === this.maxStartRotation ? t.rotation = this.minStartRotation + this.rotation : t.rotation = Math.random() * (this.maxStartRotation - this.minStartRotation) + this.minStartRotation + this.rotation, t.position.x = e, t.position.y = i }, t.prototype._spawnRect = function(t, e, i) { this.minStartRotation === this.maxStartRotation ? t.rotation = this.minStartRotation + this.rotation : t.rotation = Math.random() * (this.maxStartRotation - this.minStartRotation) + this.minStartRotation + this.rotation, Ge.x = Math.random() * this.spawnRect.width + this.spawnRect.x, Ge.y = Math.random() * this.spawnRect.height + this.spawnRect.y, 0 !== this.rotation && Te.rotatePoint(this.rotation, Ge), t.position.x = e + Ge.x, t.position.y = i + Ge.y }, t.prototype._spawnCircle = function(t, e, i) { this.minStartRotation === this.maxStartRotation ? t.rotation = this.minStartRotation + this.rotation : t.rotation = Math.random() * (this.maxStartRotation - this.minStartRotation) + this.minStartRotation + this.rotation, Ge.x = Math.random() * this.spawnCircle.radius, Ge.y = 0, Te.rotatePoint(360 * Math.random(), Ge), Ge.x += this.spawnCircle.x, Ge.y += this.spawnCircle.y, 0 !== this.rotation && Te.rotatePoint(this.rotation, Ge), t.position.x = e + Ge.x, t.position.y = i + Ge.y }, t.prototype._spawnRing = function(t, e, i) { var n = this.spawnCircle;
                this.minStartRotation === this.maxStartRotation ? t.rotation = this.minStartRotation + this.rotation : t.rotation = Math.random() * (this.maxStartRotation - this.minStartRotation) + this.minStartRotation + this.rotation, n.minRadius !== n.radius ? Ge.x = Math.random() * (n.radius - n.minRadius) + n.minRadius : Ge.x = n.radius, Ge.y = 0; var r = 360 * Math.random();
                t.rotation += r, Te.rotatePoint(r, Ge), Ge.x += this.spawnCircle.x, Ge.y += this.spawnCircle.y, 0 !== this.rotation && Te.rotatePoint(this.rotation, Ge), t.position.x = e + Ge.x, t.position.y = i + Ge.y }, t.prototype._spawnPolygonalChain = function(t, e, i) { this.minStartRotation === this.maxStartRotation ? t.rotation = this.minStartRotation + this.rotation : t.rotation = Math.random() * (this.maxStartRotation - this.minStartRotation) + this.minStartRotation + this.rotation, this.spawnPolygonalChain.getRandomPoint(Ge), 0 !== this.rotation && Te.rotatePoint(this.rotation, Ge), t.position.x = e + Ge.x, t.position.y = i + Ge.y }, t.prototype._spawnBurst = function(t, e, i, n) { 0 === this.particleSpacing ? t.rotation = 360 * Math.random() : t.rotation = this.angleStart + this.particleSpacing * n + this.rotation, t.position.x = e, t.position.y = i }, t.prototype.cleanup = function() { var t, e; for (t = this._activeParticlesFirst; t; t = e) e = t.next, this.recycle(t), t.parent && t.parent.removeChild(t);
                this._activeParticlesFirst = this._activeParticlesLast = null, this.particleCount = 0 }, t.prototype.destroy = function() { var t;
                this.autoUpdate = !1, this.cleanup(); for (var e = this._poolFirst; e; e = t) t = e.next, e.destroy();
                this._poolFirst = this._parent = this.particleImages = this.spawnPos = this.ownerPos = this.startColor = this.startScale = this.startAlpha = this.startSpeed = this.customEase = this._completeCallback = null }, t }(),
        He = new it.Point,
        ze = ["pow", "sqrt", "abs", "floor", "round", "ceil", "E", "PI", "sin", "cos", "tan", "asin", "acos", "atan", "atan2", "log"],
        Ve = new RegExp(["[01234567890\\.\\*\\-\\+\\/\\(\\)x ,]"].concat(ze).join("|"), "g");
    (function(t) {
        function e(e) { var i = t.call(this, e) || this; return i.path = null, i.initialRotation = 0, i.initialPosition = new it.Point, i.movement = 0, i } Ae(e, t), e.prototype.init = function() { this.initialRotation = this.rotation, this.Particle_init(), this.path = this.extraData.path, this._doNormalMovement = !this.path, this.movement = 0, this.initialPosition.x = this.position.x, this.initialPosition.y = this.position.y }, e.prototype.update = function(t) { var e = this.Particle_update(t); if (e >= 0 && this.path) { if (this._doSpeed) { var i = this.speedList.interpolate(e) * this.speedMultiplier;
                    this.movement += i * t } else { i = this.speedList.current.value * this.speedMultiplier;
                    this.movement += i * t } He.x = this.movement, He.y = this.path(this.movement), Te.rotatePoint(this.initialRotation, He), this.position.x = this.initialPosition.x + He.x, this.position.y = this.initialPosition.y + He.y } return e }, e.prototype.destroy = function() { this.Particle_destroy(), this.path = this.initialPosition = null }, e.parseArt = function(t) { return Be.parseArt(t) }, e.parseData = function(t) { var e = {}; if (t && t.path) try { e.path = function(t) { for (var e = t.match(Ve), i = e.length - 1; i >= 0; --i) ze.indexOf(e[i]) >= 0 && (e[i] = "Math." + e[i]); return t = e.join(""), new Function("x", "return " + t + ";") }(t.path) } catch (i) { Te.verbose, e.path = null } else Te.verbose, e.path = null; return e } })(Be),
    function(t) {
        function e(e) { var i = t.call(this, e) || this; return i.textures = null, i.duration = 0, i.framerate = 0, i.elapsed = 0, i.loop = !1, i } Ae(e, t), e.prototype.init = function() { this.Particle_init(), this.elapsed = 0, this.framerate < 0 && (this.duration = this.maxLife, this.framerate = this.textures.length / this.duration) }, e.prototype.applyArt = function(t) { this.textures = t.textures, this.framerate = t.framerate, this.duration = t.duration, this.loop = t.loop }, e.prototype.update = function(t) { var e = this.Particle_update(t); if (e >= 0) { this.elapsed += t, this.elapsed > this.duration && (this.loop ? this.elapsed = this.elapsed % this.duration : this.elapsed = this.duration - 1e-6); var i = this.elapsed * this.framerate + 1e-7 | 0;
                this.texture = this.textures[i] || it.Texture.EMPTY } return e }, e.prototype.destroy = function() { this.Particle_destroy(), this.textures = null }, e.parseArt = function(t) { for (var e = [], i = 0; i < t.length; ++i) { for (var n = t[i], r = e[i] = {}, s = r.textures = [], o = n.textures, a = 0; a < o.length; ++a) { var h = o[a]; if ("string" == typeof h) s.push(Ce(h));
                    else if (h instanceof it.Texture) s.push(h);
                    else { var u = h.count || 1; for (h = "string" == typeof h.texture ? Ce(h.texture) : h.texture; u > 0; --u) s.push(h) } } "matchLife" === n.framerate ? (r.framerate = -1, r.duration = 0, r.loop = !1) : (r.loop = !!n.loop, r.framerate = n.framerate > 0 ? n.framerate : 60, r.duration = s.length / r.framerate) } return e } }(Be);
    class We extends r.Container { constructor(t) { super(), this.spr = new me, this.sprPush = new me, this.velocity = 130, this.velocityDown = 150, this.drill = !1, this.drilling = !1, this.currentMovement = "STOP", this.nextMovementName = "STOP", this.nextPosition = 0, this.row = 0, this.column = 0, this.startColumn = 0, this.posNext = new fe, this.solid = !1, this.solidDown = !1, this.solidLeft = !1, this.solidRight = !1, this.gravity = !1, this.lastAction = "drill", this.bilnk = !1, this.bilnk2 = !1, this.timeAnimation = !1, this.timeAnimation2 = !1, this.winState = !1, this.fall = !1, this.deadPart = new Array, this.lost = !1, this.finish = !1, this.pause = !1, this.stateWin = !1, this.lostanim = !1, this.dead = !1, this.isLanding = !1, this.push = !1, this.setAnimations(this.spr), this.addChild(this.spr), this.spr.playState("idleFront"), this.setAnimationsPush(this.sprPush), this.addChild(this.sprPush), this.sprPush.playState("push"), this.sprPush.visible = !1, this.drawCollider(new r.Rectangle(-this.spr.width / 4, -this.spr.height / 2, this.spr.width / 2, this.spr.height)), this.emitterWalkR = new Xe(t, [r.Texture.from("atlas/particles/dust_1.png")], r.Loader.shared.resources.walkR.data), this.emitterWalkR.emit = !1, this.emitterWalkL = new Xe(t, [r.Texture.from("atlas/particles/dust_1.png")], r.Loader.shared.resources.walkL.data), this.emitterWalkL.emit = !1, this.emitterDigSideR = new Xe(t, [r.Texture.from("atlas/particles/dust_5.png")], r.Loader.shared.resources.digSide.data), this.emitterDigSideR.emit = !1, this.emitterDigSideL = new Xe(t, [r.Texture.from("atlas/particles/dust_5.png")], r.Loader.shared.resources.digSide.data), this.emitterDigSideL.emit = !1, this.emitterDigSideL.acceleration.x = -10, this.emitterDigSideL.minStartRotation = 230, this.emitterDigSideL.maxStartRotation = 250, this.emitterDigDown = new Xe(t, [r.Texture.from("atlas/particles/dust_5.png")], r.Loader.shared.resources.digDown.data), this.emitterDigDown.emit = !1, this.emitterLanding = new Xe(t, [r.Texture.from("atlas/particles/dust_5.png")], r.Loader.shared.resources.landing.data), this.emitterLanding.emit = !1 } setAnimations(t) { this.setState(t, "idleSide", ["idleSide00", "idleSide01", "idleSide02", "idleSide01"], 6), this.setState(t, "idleFront", ["idleFront05", "idleFront06", "idleFront07", "idleFront06"], 6), this.setState(t, "idleFrontBlink", ["idleFront05", "idleFrontBlink1", "idleFrontBlink2", "idleFrontBlink1"], 6), this.setState(t, "idleSideBlink", ["idleSide00", "idleSideBlink1", "idleSideBlink2", "idleSideBlink1"], 6), this.setState(t, "walk", ["walk1", "walk2", "walk3", "walk4", "walk5", "walk6", "walk7", "walk8"], 8), this.setState(t, "drill", ["sideDig1", "sideDig2", "sideDig3", "sideDig4", "sideDig5", "sideDig6", "sideDig7"], 8), this.setState(t, "drilldown", ["downDig1", "downDig2", "downDig3", "downDig4"], 8), this.setState(t, "celebration", ["celebration1", "celebration2", "celebration3", "celebration2"], 8), this.setState(t, "sideFall", ["sideFall"], 8), this.setState(t, "sideLanding", ["sideLanding1", "sideLanding2", "sideLanding3"], 8), this.setState(t, "push", ["push1", "push2", "push3", "push4"], 8), this.setState(t, "frontLanding", ["frontLanding1", "frontLanding2", "frontLanding3"], 8), this.setState(t, "frontFall", ["frontFall"], 8), this.setState(t, "collideSolid", ["idleSide00"], 10) } setAnimationsPush(t) { this.setState(t, "push", ["push1", "push2", "push3", "push4"], 8) } setState(t, e, i, n) { const s = new Array; for (let a = 0; a < i.length; a++) s.push(r.Texture.from(`atlas/Player/${i[a]}.png`)); const o = t.addState(e, s, !0);
            o.anchor.set(.5), o.animationSpeed = n / 60 } drawCollider(t) { this.collider = new _e([new r.Point(t.x, t.y + 20), new r.Point(t.width + t.x, t.y + 20), new r.Point(t.width + t.x, t.height + t.y), new r.Point(t.x, t.height + t.y)], at), this.addChild(this.collider) } positionPlayer(t, e = 0, i = 5) { this.x = t.x, this.y = t.y, this.row = e, this.column = this.startColumn = i } update(t) { if (this.push && (this.push = !1, this.spr.visible = !1, this.sprPush.visible = !0, this.sprPush.scale.x = this.spr.scale.x, (new le).to(500).onComplete(() => { this.spr.visible = !0, this.sprPush.visible = !1 }).start()), this.emitterWalkR.updateOwnerPos(this.x, this.y + this.height / 2), this.emitterWalkR.update(t), this.emitterWalkL.updateOwnerPos(this.x, this.y + this.height / 2), this.emitterWalkL.update(t), this.emitterDigSideR.updateOwnerPos(this.x, this.y), this.emitterDigSideR.update(t), this.emitterDigSideL.updateOwnerPos(this.x, this.y), this.emitterDigSideL.update(t), this.emitterDigDown.updateOwnerPos(this.x, this.y), this.emitterDigDown.update(t), this.emitterLanding.updateOwnerPos(this.x, this.y + this.height / 2), this.emitterLanding.update(t), this.pause) this.spr.currentState.stop();
            else if (this.gravity ? this.nextMovementName = "GRAVITY" : "GRAVITY" != this.currentMovement && "GRAVITY" != this.nextMovementName || (this.currentMovement = "STOP", this.nextMovementName = "STOP"), "STOP" == this.currentMovement && ("RIGHT" == this.nextMovementName && this.column < Ei.columns - 1 && !this.solidRight && (this.currentMovement = this.nextMovementName), "LEFT" == this.nextMovementName && this.column > 0 && !this.solidLeft && (this.currentMovement = this.nextMovementName), "DOWN" == this.nextMovementName && this.row < Ei.rows - 1 && !this.solidDown && (this.currentMovement = this.nextMovementName), "GRAVITY" == this.nextMovementName && this.row < Ei.rows - 1 && (this.currentMovement = this.nextMovementName), this.winState && (this.currentMovement = "STOP"), this.nextMovementName = "STOP", this.nextMovement()), this.gravity || this.isLanding || this.finish || this.dead || this.gravity || this.fall || (Q.isDown(xe.RIGHT_ARROW) && !this.stateWin || "RIGHT" == Ei.directionSwipe ? this.solidRight ? "STOP" == this.currentMovement && (this.spr.scale.x = Math.abs(this.spr.scale.x)) : this.column < Ei.columns - 1 ? this.nextMovementName = "RIGHT" : Ei.directionSwipe = "" : Q.isDown(xe.LEFT_ARROW) && !this.stateWin || "LEFT" == Ei.directionSwipe ? this.solidLeft ? "STOP" == this.currentMovement && (this.spr.scale.x = -Math.abs(this.spr.scale.x)) : this.column > 0 ? this.nextMovementName = "LEFT" : Ei.directionSwipe = "" : !Q.isDown(xe.DOWN_ARROW) && "DOWN" != Ei.directionSwipe || this.solidDown ? this.nextMovementName = "STOP" : this.row < Ei.rows - 1 ? this.nextMovementName = "DOWN" : Ei.directionSwipe = ""), this.dead && (this.currentMovement = "STOP"), this.gravity && (this.nextMovementName = "GRAVITY"), this.isLanding ? (this.nextMovementName = "STOP", this.currentMovement = "STOP", this.posNext = new fe(this.row, this.column), this.nextPosition = this.x) : "STOP" == this.currentMovement && ("RIGHT" == this.nextMovementName && this.column < Ei.columns - 1 && (this.currentMovement = this.nextMovementName), "LEFT" == this.nextMovementName && this.column > 0 && (this.currentMovement = this.nextMovementName), "DOWN" == this.nextMovementName && this.row < Ei.rows - 1 && (this.currentMovement = this.nextMovementName), "GRAVITY" == this.nextMovementName && this.row < Ei.rows - 1 && (this.currentMovement = this.nextMovementName), this.winState && (this.currentMovement = "STOP"), this.nextMovementName = "STOP", this.nextMovement()), this.lost) this.lostanim || this.deadAnim(t);
            else { if (this.solid && (this.currentMovement = this.nextMovementName = "STOP", this.nextPosition = this.x, this.solid = !1, this.matrixReposition()), "RIGHT" == this.currentMovement) { if (!(this.x < this.nextPosition)) return void this.matrixReposition();
                    this.x += this.velocity * t } if ("LEFT" == this.currentMovement) { if (!(this.x > this.nextPosition)) return void this.matrixReposition();
                    this.x -= this.velocity * t } if ("DOWN" == this.currentMovement) { if (!(this.y < this.nextPosition)) return void this.matrixReposition();
                    this.y += this.gravity ? 3 * this.velocityDown * t : this.velocityDown * t } if ("GRAVITY" == this.currentMovement) { if (!(this.y < this.nextPosition)) return void this.matrixReposition();
                    this.y += 3 * this.velocityDown * t } "STOP" == this.currentMovement && (this.drill = !1, this.drilling = !1), this.updateAnimation() } } deadAnim(t) { ce.playFX("hurt", 0, !0); let e = 50 * Math.random() / 100;
            ce.playFX("pop", e, !0), e = 50 * Math.random() / 100, ce.playFX("pop", e, !0), e = 50 * Math.random() / 100, ce.playFX("pop", e, !0), this.dead = !0; for (let i = 0; i < 7; i++) this.deadPart.push(new r.Sprite(r.Texture.from(`atlas/Player/dead${i+1}.png`))), this.addChild(this.deadPart[i]), this.deadPart[i].anchor.set(.5), this.deadPart[i].position = this.spr.position, new h.a.Tween(this.deadPart[i]).to({ x: 1e3 * Math.random() - 500, y: 1e3 }, 15e4 * t).easing(h.a.Easing.Quadratic.InOut).delay(100).onComplete(() => {}).start(), new h.a.Tween(this.deadPart[i]).to({ angle: 90 * Math.random() }, 5e4 * t).easing(h.a.Easing.Quadratic.InOut).delay(100).onComplete(() => {}).start();
            this.currentMovement = "STOP", this.nextMovementName = "STOP", this.spr.visible = !1, this.lostanim = !0 } nextMovement() { switch (this.currentMovement) {
                case "RIGHT":
                    this.posNext = new fe(this.row, this.column + 1), this.nextPosition = this.x + Ei.tile, this.spr.scale.x = Math.abs(this.spr.scale.x); break;
                case "LEFT":
                    this.posNext = new fe(this.row, this.column - 1), this.nextPosition = this.x - Ei.tile, this.spr.scale.x = -Math.abs(this.spr.scale.x); break;
                case "DOWN":
                case "GRAVITY":
                    this.posNext = new fe(this.row + 1, this.column), this.nextPosition = this.y + Ei.tile; break;
                case "STOP":
                    this.posNext = new fe(this.row, this.column), this.nextPosition = this.x } } updateAnimation() { if (!this.winState) { if (!this.gravity && !this.fall) { if ("STOP" != this.currentMovement || "STOP" != this.nextMovementName) this.lastAction = "walk", this.spr.playState("walk"), this.spr.scale.x > 0 ? this.emitterWalkR.emit = !0 : this.emitterWalkL.emit = !0, this.timeAnimation = !1, this.timeAnimation2 = !1, this.bilnk = !1, this.bilnk2 = !1;
                    else if ("celebration" != this.lastAction)
                        if ("drill" == this.lastAction || "walk" == this.lastAction || "sideFall" == this.lastAction) { if (!this.bilnk && (this.spr.playState("idleSide"), this.emitterWalkR.emit = !1, this.emitterWalkL.emit = !1, !this.timeAnimation)) { this.timeAnimation = !0;
                                (new le).to(2e3).onComplete(() => { this.winState || this.gravity || this.pause || "idleSide" == this.spr.currentStateName && (this.emitterWalkR.emit = !1, this.emitterWalkL.emit = !1, this.bilnk = !0, this.spr.playState("idleSideBlink"), this.timeAnimation = !1) }).start() } } else if (!this.bilnk2 && (this.spr.playState("idleFront"), this.emitterWalkR.emit = !1, this.emitterWalkL.emit = !1, this.lastAction = "", !this.timeAnimation2)) { this.timeAnimation2 = !0;
                        (new le).to(2e3).onComplete(() => { this.winState || this.gravity || this.pause || "idleFront" == this.spr.currentStateName && (this.emitterWalkR.emit = !1, this.emitterWalkL.emit = !1, this.bilnk2 = !0, this.spr.playState("idleFrontBlink"), this.timeAnimation2 = !1) }).start() } "STOP" == this.nextMovementName && "drilldown" == this.lastAction && (this.spr.playState("idleFront"), this.emitterWalkL.emit = !1, this.emitterWalkR.emit = !1), "idleFrontBlink" == this.spr.currentStateName && 3 == this.spr.currentState.currentFrame && (this.bilnk2 = !1, this.spr.currentState.gotoAndStop(0), this.spr.playState("idleFront"), this.emitterWalkL.emit = !1, this.emitterWalkR.emit = !1), "idleSideBlink" == this.spr.currentStateName && 3 == this.spr.currentState.currentFrame && (this.bilnk = !1, this.spr.currentState.gotoAndStop(0), this.spr.playState("idleSide"), this.emitterWalkR.emit = !1, this.emitterWalkL.emit = !1), this.drilling ? "DOWN" != this.currentMovement ? (this.spr.playState("drill"), this.spr.scale.x > 0 ? this.emitterDigSideL.emit = !0 : this.emitterDigSideR.emit = !0, this.lastAction = "drill") : (this.spr.playState("drilldown"), this.emitterDigDown.emit = !0, this.lastAction = "drillDown") : (this.emitterDigSideR.emit = !1, this.emitterDigSideL.emit = !1, this.emitterDigDown.emit = !1), this.solid && (this.spr.playState("collideSolid"), 0 == this.spr.getAnimation("collideSolid").currentFrame && (this.solid = !1, this.spr.getAnimation("collideSolid").gotoAndStop(0))) } this.gravity && !this.fall && ("walk" != this.lastAction && "drill" != this.lastAction || (this.spr.playState("sideFall"), ce.playFX("fall"), this.lastAction = "sideFall", this.fall = !0), "drillDown" == this.lastAction && (this.spr.playState("frontFall"), ce.playFX("fall"), this.lastAction = "frontFall", this.fall = !0)), this.fall && !this.gravity ? (this.emitterLanding.emit = !0, "frontFall" == this.lastAction && (this.spr.playState("frontLanding"), this.isLanding = !0), "sideFall" == this.lastAction && (this.spr.playState("sideLanding"), this.isLanding = !0)) : this.emitterLanding.emit = !1, "sideLanding" == this.spr.currentStateName && 2 == this.spr.currentState.currentFrame && (this.spr.currentState.gotoAndStop(0), this.spr.playState("idleSide"), this.emitterWalkR.emit = !1, this.emitterWalkL.emit = !1, this.isLanding = !1, this.fall = !1), "frontLanding" == this.spr.currentStateName && 2 == this.spr.currentState.currentFrame && (this.spr.currentState.gotoAndStop(0), this.spr.playState("idleFront"), this.lastAction = "drilldown", this.isLanding = !1, this.fall = !1) } this.winState && (this.spr.playState("celebration"), this.lastAction = "celebration") } matrixReposition() { "RIGHT" == this.currentMovement && this.column++, "LEFT" == this.currentMovement && this.column--, "DOWN" != this.currentMovement && "GRAVITY" != this.currentMovement || this.row++, this.currentMovement = "STOP", this.column == this.startColumn ? this.x = 0 : this.x = Ei.tile * (this.column - this.startColumn), this.y = Ei.tile * this.row + Ei.offset.y } direction() { return this.spr.scale.x > 0 ? "RIGHT" : "LEFT" } } class Ye extends a { constructor(t = 1e3) { super(), this.darkening = new r.Graphics, this.finishTween = !1, this.fullContainer = new r.Container, this.addChild(this.darkening), this.darkening.interactive = !0, this.addChild(this.fullContainer), this.tweenDuration = t } onExit(t) { this.interactiveChildren = !1, this.interactive = !1, ce.playFX("button"), new h.a.Tween(this.fullContainer.scale).to({ x: 0, y: 0 }, this.tweenDuration / 4).easing(h.a.Easing.Quadratic.Out).start().onComplete(() => { this.fullContainer.visible = !1, t && (t(), this.closeHandler()) }) } onExitDown(t) { this.interactiveChildren = !1, this.tweenDuration = 600, ce.playFX("button"), new h.a.Tween(this.fullContainer).to({ y: 800 }, this.tweenDuration).easing(h.a.Easing.Quadratic.In).start().onComplete(() => { t && t(), this.closeHandler() }) } onStart() { this.fullContainer.scale.set(0), this.interactiveChildren = !0 } onShow() { new h.a.Tween(this.fullContainer.scale).to({ x: 1, y: 1 }, this.tweenDuration).easing(h.a.Easing.Elastic.Out).start().onComplete(() => { this.finishTween = !0 }) } onResize(t, e) { const i = he.idealScale();
            this.scale.set(i), this.x = t / 2, this.y = e / 2, this.darkening.x = this.darkening.y = 0, this.darkening.clear(), this.darkening.beginFill(0, .5), this.darkening.drawRect(-t / this.scale.x, -e / this.scale.x, 2 * t / this.scale.x, 2 * e / this.scale.x), this.darkening.endFill() } } class Ke extends o { constructor(t = 500) { super(), this.darkener = new r.Graphics, this.darkener.clear().beginFill(0, 1).drawRect(0, 0, lt.WIDTH, lt.HEIGHT).endFill().alpha = 0, this.addChild(this.darkener), this.delay = t } startCovering(t) { this.twin(t, 1) } startResolving(t) { t() } startUncovering(t) { this.twin(t, 0) } twin(t, e) { new h.a.Tween(this.darkener).to({ alpha: e }, this.delay).onComplete(() => { t() }).start() } } class qe extends Ye { constructor(t = 0) { super(), this.buttonNumber = 0, this.inTween = !1, this.press = !0, Ei.pauseGame = !0, this.bg = r.Sprite.from("atlas/popups/bgConfirmation.png"), this.bg.anchor.set(.5), this.fullContainer.addChild(this.bg), this.buttons = new r.Container, this.buttonAcept = new ae("atlas/popups/acept.png", null, super.onExit.bind(this, () => { ue.save(), Ei.tap = !1, 0 != t ? lt.changeScene(Pi, [t], Ke) : lt.changeScene(Ci, [t], Ke) }), !0), this.buttonReject = new ae("atlas/popups/reject.png", null, super.onExit.bind(this, () => {}), !0), this.buttons.addChild(this.buttonAcept), this.buttons.addChild(this.buttonReject), this.buttonAcept.x = 85, this.buttonReject.x = -85, this.buttonReject.y = this.buttonReject.height + 25, this.buttonAcept.y = this.buttonReject.y, this.fullContainer.addChild(this.buttons); const e = new r.TextStyle({ fontFamily: "Fancy_font_02", align: "center", fill: "white", fontSize: 40, wordWrap: !0, wordWrapWidth: 300 });
            this.titleText = new r.Text(re.t("CONFIRM"), e), this.titleText.anchor.set(.5), this.fullContainer.addChild(this.titleText) } update() { this.finishTween && (this.press = !1), Q.justPressed(xe.ENTER) && !this.press && (0 == this.buttonNumber && this.buttonReject.simulateClick(), 1 == this.buttonNumber && this.buttonAcept.simulateClick(), this.press = !0), Q.justPressed(xe.LEFT_ARROW) && (this.inTween = !1, this.tween1.stop(), this.buttonNumber > 0 ? this.buttonNumber -= 1 : this.buttonNumber = 1), Q.justPressed(xe.RIGHT_ARROW) && (this.inTween = !1, this.tween1.stop(), this.buttonNumber < 1 ? this.buttonNumber += 1 : this.buttonNumber = 0), 0 != this.buttonNumber || this.inTween || (this.buttonAcept.scale.set(1), this.tween1 = new h.a.Tween(this.buttonReject.scale).to({ x: 1.1, y: 1.1 }, 400).easing(h.a.Easing.Quadratic.InOut).yoyo(!0).repeat(Infinity).onComplete(() => {}), this.tween1.start(), this.inTween = !0), 1 != this.buttonNumber || this.inTween || (this.buttonReject.scale.set(1), this.tween1 = new h.a.Tween(this.buttonAcept.scale).to({ x: 1.1, y: 1.1 }, 400).easing(h.a.Easing.Quadratic.InOut).yoyo(!0).repeat(Infinity).onComplete(() => {}), this.tween1.start(), this.inTween = !0) } } class Qe extends Ye { constructor(t = 0, e) { super(), this.buttonNumber = 0, this.inTween = !1, this.tweenDuration = 0, this.fullContainer.y = -e, this.bg = r.Sprite.from("bgPause"), this.bg.anchor.set(.5), this.fullContainer.addChild(this.bg), this.tween1, this.buttons = new r.Container, this.buttonClose = new ae("atlas/Home/BtnPlay.png", null, super.onExitDown.bind(this, this.onReturn.bind(this)), !0), this.buttons.addChild(this.buttonClose), this.buttonMusicOn = new ae("atlas/Home/soundONBtn.png", null, this.switchMusic.bind(this), !1), this.buttonMusicOff = new ae("atlas/Home/soundOFFBtn.png", null, this.switchMusic.bind(this), !1), this.buttons.addChild(this.buttonMusicOn), this.buttons.addChild(this.buttonMusicOff), this.buttonClose.x = 0, this.buttonClose.y = 0, this.buttonClose.interactive = !1, this.buttonReload = new ae("atlas/popups/reloadsmall.png", null, super.onExit.bind(this, () => { ue.save(), lt.openPopup(qe, [t]) }), !0), this.buttons.addChild(this.buttonReload), this.buttonReload.x = 205, this.buttonReload.y = 0, this.buttonMenu = new ae("atlas/popups/home.png", null, super.onExit.bind(this, () => { ue.save(), lt.openPopup(qe, []) }), !0), this.buttonMenu.x = 285, this.buttons.addChild(this.buttonMenu), this.buttonMusicOn.x = this.buttonMusicOff.x = 125, this.buttonMusicOn.y = this.buttonMusicOff.y = 0; const i = ue.getValue("Music");
            this.buttonMusicOn.visible = i, this.buttonMusicOff.visible = !i, this.fullContainer.addChild(this.buttons); const n = new r.TextStyle({ fontFamily: "Fancy_font_02", align: "right", fill: "#7A4C56", fontSize: 40 });
            this.pauseText = new r.Text(re.t("PAUSE"), n), this.pauseText.anchor.set(1, .5), this.pauseText.x = -85, this.fullContainer.addChild(this.pauseText), Pi.focusLost && (Pi.focusLost = !1, this.tweenDuration = 0), new h.a.Tween(this.fullContainer).to({ y: 0 }, 600).easing(h.a.Easing.Quadratic.InOut).onComplete(() => {}).start() } onReturn() { ue.save() } switchMusic() { ce.playFX("button"), this.buttonMusicOn.visible = !this.buttonMusicOn.visible, this.buttonMusicOff.visible = !this.buttonMusicOff.visible, ce.muteMusic = this.buttonMusicOff.visible, ce.muteSound = this.buttonMusicOff.visible, ue.setValue("Sound", this.buttonMusicOn.visible), ue.setValue("Music", this.buttonMusicOn.visible), ue.save() } update() { this.finishTween && (this.buttonClose.interactive = !0), Q.justPressed(xe.ENTER) && (0 == this.buttonNumber && this.buttonClose.simulateClick(), 1 == this.buttonNumber && (this.buttonMusicOff.visible ? this.buttonMusicOff.simulateClick() : this.buttonMusicOn.simulateClick()), 2 == this.buttonNumber && this.buttonReload.simulateClick(), 3 == this.buttonNumber && this.buttonMenu.simulateClick()), this.buttonClose.interactive && Q.justPressed(xe.ESCAPE) && this.buttonClose.simulateClick(), Q.justPressed(xe.LEFT_ARROW) && (this.inTween = !1, this.tween1.stop(), this.buttonNumber > 0 ? this.buttonNumber -= 1 : this.buttonNumber = 3), Q.justPressed(xe.RIGHT_ARROW) && (this.inTween = !1, this.tween1.stop(), this.buttonNumber < 3 ? this.buttonNumber += 1 : this.buttonNumber = 0), 0 != this.buttonNumber || this.inTween || (this.buttonReload.scale.set(1), this.buttonMusicOff.scale.set(1), this.buttonMusicOn.scale.set(1), this.buttonMenu.scale.set(1), this.tween1 = new h.a.Tween(this.buttonClose.scale).to({ x: 1.1, y: 1.1 }, 400).easing(h.a.Easing.Quadratic.InOut).yoyo(!0).repeat(Infinity).onComplete(() => {}), this.tween1.start(), this.inTween = !0), 1 != this.buttonNumber || this.inTween || (this.buttonReload.scale.set(1), this.buttonMenu.scale.set(1), this.buttonClose.scale.set(1), this.buttonMusicOff.visible ? (this.tween1 = new h.a.Tween(this.buttonMusicOff.scale).to({ x: 1.1, y: 1.1 }, 400).easing(h.a.Easing.Quadratic.InOut).yoyo(!0).repeat(Infinity).onComplete(() => {}), this.tween1.start(), this.inTween = !0) : (this.tween1 = new h.a.Tween(this.buttonMusicOn.scale).to({ x: 1.1, y: 1.1 }, 400).easing(h.a.Easing.Quadratic.InOut).yoyo(!0).repeat(Infinity).onComplete(() => {}), this.tween1.start(), this.inTween = !0)), 2 != this.buttonNumber || this.inTween || (this.buttonMenu.scale.set(1), this.buttonMusicOff.scale.set(1), this.buttonMusicOn.scale.set(1), this.buttonClose.scale.set(1), this.tween1 = new h.a.Tween(this.buttonReload.scale).to({ x: 1.1, y: 1.1 }, 400).easing(h.a.Easing.Quadratic.InOut).yoyo(!0).repeat(Infinity).onComplete(() => {}), this.tween1.start(), this.inTween = !0), 3 != this.buttonNumber || this.inTween || (this.buttonReload.scale.set(1), this.buttonMusicOff.scale.set(1), this.buttonMusicOn.scale.set(1), this.buttonClose.scale.set(1), this.tween1 = new h.a.Tween(this.buttonMenu.scale).to({ x: 1.1, y: 1.1 }, 400).easing(h.a.Easing.Quadratic.InOut).yoyo(!0).repeat(Infinity).onComplete(() => {}), this.tween1.start(), this.inTween = !0) } } class $e extends s { constructor() { super(), ce.fade("menu", 1, 500), this.centerContainer = new r.Container, this.centerContainer.sortableChildren = !0, this.addChild(this.centerContainer), this.bg = r.Sprite.from("bgEnd"), this.bg.anchor.set(.5), this.centerContainer.addChild(this.bg), this.seth = r.Sprite.from("atlas/end/seth.png"), this.seth.anchor.set(.5), this.seth.y = 475, this.centerContainer.addChild(this.seth), this.bgFront = r.Sprite.from("bgFront"), this.bgFront.anchor.set(.5), this.bgFront.y = this.bg.height / 2 - this.bgFront.height / 2, this.centerContainer.addChild(this.bgFront), this.char1 = r.Sprite.from("atlas/end/char1.png"), this.char1.anchor.set(.5), this.char1.x = 850, this.char1.y = 600, this.centerContainer.addChild(this.char1), this.char2 = r.Sprite.from("atlas/end/char2.png"), this.char2.anchor.set(.5), this.char2.x = -850, this.char2.y = 600, this.centerContainer.addChild(this.char2), this.endText = new r.BitmapText(re.t("END"), { fontName: "Fancy 40", align: "Left", tint: 7627555 }), this.endText.anchor = .5, this.endText.y = -this.bg.height / 2 - 100, this.centerContainer.addChild(this.endText), new h.a.Tween(this.seth).to({ y: 75 }, 1e3).easing(h.a.Easing.Quadratic.InOut).delay(250).onComplete(() => { new h.a.Tween(this.seth.scale).to({ x: 1.025, y: 1.025 }, 500).easing(h.a.Easing.Quadratic.InOut).repeat(Infinity).yoyo(!0).start() }).start(), ce.playFX("seth_in", .15, !0), ce.playFX("marimba_up", .5, !0), new h.a.Tween(this.char2).to({ x: -420, y: 200 }, 1e3).easing(h.a.Easing.Quadratic.InOut).delay(1e3).start(), new h.a.Tween(this.char2).to({ angle: 10 }, 1e3).easing(h.a.Easing.Quadratic.InOut).repeat(Infinity).yoyo(!0).start(), ce.playFX("twins", 1.5, !0), new h.a.Tween(this.char1).to({ x: 450, y: 200 }, 1e3).easing(h.a.Easing.Quadratic.InOut).delay(1300).onComplete(() => { new h.a.Tween(this.char1).to({ x: 455, y: 205 }, 500).easing(h.a.Easing.Quadratic.InOut).repeat(Infinity).yoyo(!0).start() }).start(), ce.playFX("brother", 1.8, !0), new h.a.Tween(this.endText).to({ y: -200 }, 1e3).easing(h.a.Easing.Quadratic.InOut).delay(2e3).start(), ce.playFX("star3", 2, !0), ce.playFX("star3", 2.25, !0), ce.playFX("star3", 2.5, !0), ce.playFX("splash", 2.75, !0), (new le).to(1e4).onComplete(() => { lt.changeScene(Oi, [0], Ke) }).start() } onResize(t, e) { he.setScaleRelativeToIdeal(this.centerContainer), this.centerContainer.x = t / 2, this.centerContainer.y = e / 2 } } class Ze extends Ye { constructor(t = 0, e) { super(), this.level = 0, this.buttonNumber = 0, this.inTween = !1, this.inTweenStar = !1, this.press = !0, this.level = t, this.stars = e, this.bg = r.Sprite.from("atlas/popups/bgPopupWin.png"), this.bg.anchor.set(.5), this.fullContainer.addChild(this.bg), this.buttons = new r.Container, this.buttonMenu = new ae("atlas/popups/home.png", null, super.onExit.bind(this, () => { ue.save(), lt.changeScene(Ci, [], Ke) }), !0), this.buttonReload = new ae("atlas/popups/reloadsmall.png", null, super.onExit.bind(this, () => { ue.save(), lt.changeScene(Pi, [this.level], Ke) }), !0), this.level < Oi.MAX_LEVELS ? this.buttonPlay = new ae("atlas/Home/BtnPlay.png", null, super.onExit.bind(this, () => { ue.save(), lt.changeScene(Pi, [this.level + 1], Ke) }), !0) : this.buttonPlay = new ae("atlas/Home/BtnPlay.png", null, super.onExit.bind(this, () => { ue.save(), lt.changeScene($e, [!1], Ke) }), !0), this.buttons.addChild(this.buttonPlay), this.buttonPlay.x = 0, this.buttonPlay.y = this.buttonPlay.height + 24, this.buttons.addChild(this.buttonMenu), this.buttons.addChild(this.buttonReload), this.buttonMenu.x = 1.52 * -this.buttonMenu.width, this.buttonReload.x = 1.52 * this.buttonMenu.width, this.buttonMenu.y = this.buttonPlay.y, this.buttonReload.y = this.buttonPlay.y, this.fullContainer.addChild(this.buttons); const i = new r.TextStyle({ fontFamily: "Fancy_font_02", align: "center", fill: "white", fontSize: 40, wordWrap: !0, wordWrapWidth: 300 }); switch (e) {
                case 0:
                    this.titleText = new r.Text(re.t("WIN0STARS"), i); break;
                case 1:
                    this.titleText = new r.Text(re.t("WIN1STARS"), i); break;
                case 2:
                    this.titleText = new r.Text(re.t("WIN2STARS"), i); break;
                case 3:
                    this.titleText = new r.Text(re.t("WIN3STARS"), i) } this.titleText.anchor.set(.5), this.fullContainer.addChild(this.titleText), this.levelArray = ue.getValue("Levels"), this.star1 = r.Sprite.from("atlas/popups/star1.png"), this.star2 = r.Sprite.from("atlas/popups/star2.png"), this.star3 = r.Sprite.from("atlas/popups/star3.png"), this.stars >= 1 && this.fullContainer.addChild(this.star1), this.stars >= 2 && this.fullContainer.addChild(this.star2), 3 == this.stars && this.fullContainer.addChild(this.star3), this.levelArray[this.level - 1].completed = !0, this.levelArray[this.level - 1].stars < this.stars && (this.levelArray[this.level - 1].stars = this.stars), this.level < Oi.MAX_LEVELS && (this.levelArray[this.level].unblocked || (this.levelArray[this.level].unblocked = !0)), ue.setValue("Levels", this.levelArray), this.star1.anchor.set(.5), this.star2.anchor.set(.5), this.star3.anchor.set(.5), this.star1.x = -this.star1.width, this.star2.x = 0, this.star3.x = this.star3.width, this.star1.y = .75 * -this.star1.height, this.star2.y = .75 * -this.star2.height, this.star3.y = .75 * -this.star3.height, this.star1.scale.set(0), this.star2.scale.set(0), this.star3.scale.set(0) } update() { this.finishTween && (this.press = !1), this.stars >= 1 && this.finishTween && !this.inTweenStar && (this.inTweenStar = !0, ce.playFX("board_star", 0, !0), new h.a.Tween(this.star1.scale).to({ x: 1, y: 1 }, 300).easing(h.a.Easing.Bounce.Out).onComplete(() => { this.stars >= 2 && (ce.playFX("board_star", 0, !0), new h.a.Tween(this.star2.scale).to({ x: 1, y: 1 }, 300).easing(h.a.Easing.Elastic.Out).onComplete(() => { 3 == this.stars && (ce.playFX("board_star", 0, !0), new h.a.Tween(this.star3.scale).to({ x: 1, y: 1 }, 300).easing(h.a.Easing.Elastic.Out).onComplete(() => {}).start()) }).start()) }).start()), Q.justPressed(xe.ENTER) && !this.press && (0 == this.buttonNumber && this.buttonPlay.simulateClick(), 1 == this.buttonNumber && this.buttonReload.simulateClick(), 2 == this.buttonNumber && this.buttonMenu.simulateClick(), this.press = !0), Q.justPressed(xe.LEFT_ARROW) && this.finishTween && (this.inTween = !1, this.tween1.stop(), this.buttonNumber > 0 ? this.buttonNumber -= 1 : this.buttonNumber = 2), Q.justPressed(xe.RIGHT_ARROW) && this.finishTween && (this.inTween = !1, this.tween1.stop(), this.buttonNumber < 2 ? this.buttonNumber += 1 : this.buttonNumber = 0), 0 != this.buttonNumber || this.inTween || (this.buttonReload.scale.set(1), this.buttonMenu.scale.set(1), this.tween1 = new h.a.Tween(this.buttonPlay.scale).to({ x: 1.1, y: 1.1 }, 400).easing(h.a.Easing.Quadratic.InOut).yoyo(!0).repeat(Infinity).onComplete(() => {}), this.tween1.start(), this.inTween = !0), 1 != this.buttonNumber || this.inTween || (this.buttonPlay.scale.set(1), this.buttonMenu.scale.set(1), this.tween1 = new h.a.Tween(this.buttonReload.scale).to({ x: 1.1, y: 1.1 }, 400).easing(h.a.Easing.Quadratic.InOut).yoyo(!0).repeat(Infinity).onComplete(() => {}), this.tween1.start(), this.inTween = !0), 2 != this.buttonNumber || this.inTween || (this.buttonReload.scale.set(1), this.buttonPlay.scale.set(1), this.tween1 = new h.a.Tween(this.buttonMenu.scale).to({ x: 1.1, y: 1.1 }, 400).easing(h.a.Easing.Quadratic.InOut).yoyo(!0).repeat(Infinity).onComplete(() => {}), this.tween1.start(), this.inTween = !0) } } class Je extends Ye { constructor(t = 0) { super(), this.level = 0, this.buttonNumber = 0, this.inTween = !1, this.press = !0, this.level = t, this.bg = r.Sprite.from("atlas/popups/bgPopupLost.png"), this.bg.anchor.set(.5), this.fullContainer.addChild(this.bg), this.buttons = new r.Container, this.buttonMenu = new ae("atlas/popups/home.png", null, super.onExit.bind(this, () => { ue.save(), lt.changeScene(Ci, [], Ke) }), !0), this.buttonReload = new ae("atlas/popups/reload.png", null, super.onExit.bind(this, () => { ue.save(), lt.changeScene(Pi, [this.level], Ke) }), !0), this.buttons.addChild(this.buttonMenu), this.buttons.addChild(this.buttonReload), this.buttonMenu.x = 122, this.buttonReload.y = this.buttonReload.height + 25, this.buttonMenu.y = this.buttonReload.y, this.fullContainer.addChild(this.buttons); const e = new r.TextStyle({ fontFamily: "Fancy_font_02", align: "center", fill: "white", fontSize: 40, wordWrap: !0, wordWrapWidth: 300 });
            this.titleText = new r.Text(re.t("LOST"), e), this.titleText.anchor.set(.5), this.fullContainer.addChild(this.titleText) } update() { this.finishTween && (this.press = !1), Q.justPressed(xe.ENTER) && !this.press && (0 == this.buttonNumber && this.buttonReload.simulateClick(), 1 == this.buttonNumber && this.buttonMenu.simulateClick(), this.press = !0), Q.justPressed(xe.LEFT_ARROW) && (this.inTween = !1, this.tween1.stop(), this.buttonNumber > 0 ? this.buttonNumber -= 1 : this.buttonNumber = 1), Q.justPressed(xe.RIGHT_ARROW) && (this.inTween = !1, this.tween1.stop(), this.buttonNumber < 1 ? this.buttonNumber += 1 : this.buttonNumber = 0), 0 != this.buttonNumber || this.inTween || (this.buttonMenu.scale.set(1), this.tween1 = new h.a.Tween(this.buttonReload.scale).to({ x: 1.1, y: 1.1 }, 400).easing(h.a.Easing.Quadratic.InOut).yoyo(!0).repeat(Infinity).onComplete(() => {}), this.tween1.start(), this.inTween = !0), 1 != this.buttonNumber || this.inTween || (this.buttonReload.scale.set(1), this.tween1 = new h.a.Tween(this.buttonMenu.scale).to({ x: 1.1, y: 1.1 }, 400).easing(h.a.Easing.Quadratic.InOut).yoyo(!0).repeat(Infinity).onComplete(() => {}), this.tween1.start(), this.inTween = !0) } } class ti { static test(t, e, i) { if (i && i.clear(), t.hitableKind == ge.POLY && e.hitableKind == ge.POLY) return ti.checkPolyPoly(t, e, i, !!i); if (t.hitableKind == ge.CIRCLE && e.hitableKind == ge.CIRCLE) return ti.checkCircleCircle(t, e, i, !!i); if (t.hitableKind == ge.POLY && e.hitableKind == ge.CIRCLE) return ti.checkPolyCircle(t, e, i, !!i); if (t.hitableKind == ge.CIRCLE && e.hitableKind == ge.POLY) { const n = ti.checkPolyCircle(e, t, i, !!i); if (n && i) { const t = i.a,
                        e = i.aInB;
                    i.overlapN.reverse(), i.overlapV.reverse(), i.a = i.b, i.b = t, i.aInB = i.bInA, i.bInA = e } return n } return !1 } static checkPolyCircle(t, e, i, n) { let r, s, o, a; if (t.parent == e.parent && n ? (r = t.getLocalShape(), s = e.getLocalShape(), o = t.getLocalBoundingBox(), a = e.getLocalBoundingBox()) : (r = t.getWorldShape(), s = e.getWorldShape(), o = t.getWorldBoundingBox(), a = e.getWorldBoundingBox()), !ti.simpleAABB(o, a)) return !1; if (1 == r.length) return Object(ye.testPolygonCircle)(r[0], s, i); { const t = s.getAABB(); for (const e of r)
                    if (ti.checkAABB(e.getAABB(), t) && Object(ye.testPolygonCircle)(e, s, i)) return !0; return !1 } } static checkPolyPoly(t, e, i, n) { let r, s, o, a; if (t.parent == e.parent && n ? (r = t.getLocalShape(), s = e.getLocalShape(), o = t.getLocalBoundingBox(), a = e.getLocalBoundingBox()) : (r = t.getWorldShape(), s = e.getWorldShape(), o = t.getWorldBoundingBox(), a = e.getWorldBoundingBox()), !ti.simpleAABB(o, a)) return !1; if (1 == r.length && 1 == s.length) return !(i || !ti.isAABB(r[0]) || !ti.isAABB(s[0])) || Object(ye.testPolygonPolygon)(r[0], s[0], i); for (const h of r) { const t = h.getAABB(); for (const e of s)
                    if (ti.checkAABB(t, e.getAABB())) { if (ti.isAABB(h) && ti.isAABB(e)) return !0; if (Object(ye.testPolygonPolygon)(h, e, i)) return !0 } } return !1 } static checkCircleCircle(t, e, i, n) { let r, s, o, a; return t.parent == e.parent && n ? (r = t.getLocalShape(), s = e.getLocalShape(), o = t.getLocalBoundingBox(), a = e.getLocalBoundingBox()) : (r = t.getWorldShape(), s = e.getWorldShape(), o = t.getWorldBoundingBox(), a = e.getWorldBoundingBox()), !!ti.simpleAABB(o, a) && Object(ye.testCircleCircle)(r, s, i) } static checkAABB(t, e) { const i = t.pos.x < e.pos.x ? e.pos.x : t.pos.x; if ((t.pos.x + t.points[2].x > e.pos.x + e.points[2].x ? e.pos.x + e.points[2].x : t.pos.x + t.points[2].x) <= i) return !1; const n = t.pos.y < e.pos.y ? e.pos.y : t.pos.y; return !((t.pos.y + t.points[2].y > e.pos.y + e.points[2].y ? e.pos.y + e.points[2].y : t.pos.y + t.points[2].y) <= n) } static simpleAABB(t, e) { const i = t.x < e.x ? e.x : t.x; if ((t.right > e.right ? e.right : t.right) <= i) return !1; const n = t.y < e.y ? e.y : t.y; return !((t.bottom > e.bottom ? e.bottom : t.bottom) <= n) } static isAABB(t) { if (4 != t.points.length) return !1; const e = t.points[1].y - t.points[0].y,
                i = t.points[1].x - t.points[0].x; return be.fuzzyEq(i * (t.points[2].x - t.points[1].x), -e * (t.points[2].y - t.points[1].y)) && be.fuzzyEq((t.points[3].x - t.points[2].x) * (t.points[0].x - t.points[3].x), -(t.points[3].y - t.points[2].y) * (t.points[0].y - t.points[3].y)) && (be.fuzzyEq(0, e) || be.fuzzyEq(i, 0)) } } class ei extends r.Container { constructor(t, e, i) { var n, s, o, a, u;
            super(), this.actuallyDragging = !1, this.startDragThreshold = new r.Point(0, 0), this.myMask = new r.Graphics, this.content = new r.Container, this.scrollWidth = "disabled" == t ? 1e3 : t, this.scrollHeight = "disabled" == e ? 1e3 : e, this.scrollHorizontal = "disabled" != t, this.scrollVertical = "disabled" != e, (null == i ? void 0 : i.addToContent) && (Array.isArray(i.addToContent) ? this.content.addChild(...i.addToContent) : this.content.addChild(i.addToContent)), this.scrollLimits = null == i ? void 0 : i.scrollLimits, this.startDragThreshold = null !== (n = null == i ? void 0 : i.startDragThreshold) && void 0 !== n ? n : new r.Point, this.restitutionExtraHorizontal = null !== (s = null == i ? void 0 : i.restitutionExtraHorizontal) && void 0 !== s ? s : 0, this.restitutionExtraVertical = null !== (o = null == i ? void 0 : i.restitutionExtraVertical) && void 0 !== o ? o : 0, this.restitutionTime = null !== (a = null == i ? void 0 : i.restitutionTime) && void 0 !== a ? a : 500, this.restitutionEasing = null !== (u = null == i ? void 0 : i.restitutionEasing) && void 0 !== u ? u : h.a.Easing.Exponential.Out, this.bleedOut = !!(null == i ? void 0 : i.bleedOut), this.addChild(this.content), this.addChild(this.myMask), this.hitArea = new r.Rectangle, this.interactive = !0, i.disableDragControls || (this.on("pointerdown", this.onDragStart, this), this.on("pointerup", this.onDragEnd, this), this.on("pointerupoutside", this.onDragEnd, this), this.on("pointerout", this.onDragEnd, this), this.on("pointermove", this.onDragMove, this)) } onDragStart(t) { this.dragLastPos = t.data.getLocalPosition(this) } onDragEnd() { this.dragLastPos = null, this.actuallyDragging = !1, this.content.interactiveChildren = !0, this.constraintRectangle(!0) } onDragMove(t) { if (this.dragLastPos) { const e = t.data.getLocalPosition(this); if (!e.equals(this.dragLastPos)) { const t = e.x - this.dragLastPos.x,
                        i = e.y - this.dragLastPos.y;
                    this._scroll(t, i), this.actuallyDragging && (this.dragLastPos = e) } } } scroll(t = 0, e = 0) { t = this.scrollHorizontal ? t : 0, e = this.scrollVertical ? e : 0, this.content.x += t, this.content.y += e, this.constraintRectangle(!1) } scrollTo(t, e) { t = this.scrollHorizontal ? t : 0, e = this.scrollVertical ? e : 0, this.content.x = -t, this.content.y = -e, this.constraintRectangle(!1) } _scroll(t = 0, e = 0) { return t = this.scrollHorizontal ? t : 0, e = this.scrollVertical ? e : 0, this.actuallyDragging ? (this.content.x += t, this.content.y += e, this.constraintRectangle(!1)) : (!this.startDragThreshold || Math.abs(t) > this.startDragThreshold.x || Math.abs(e) > this.startDragThreshold.y) && (this.actuallyDragging = !0, this.content.interactiveChildren = !1), this.actuallyDragging } constraintRectangle(t) { if (this.scrollLimits) { this.restitutionTween && this.restitutionTween.stop(); const e = this.scrollLimits.width - this.scrollWidth,
                    i = this.scrollLimits.height - this.scrollHeight; if (this.content.x = be.clamp(this.content.x, -(e + (this.scrollHorizontal ? this.restitutionExtraHorizontal : 0)), -(this.scrollLimits.x - (this.scrollHorizontal ? this.restitutionExtraHorizontal : 0))), this.content.y = be.clamp(this.content.y, -(i + (this.scrollVertical ? this.restitutionExtraVertical : 0)), -(this.scrollLimits.y - (this.scrollVertical ? this.restitutionExtraVertical : 0))), t && (this.restitutionExtraHorizontal || this.restitutionExtraVertical)) { const t = be.clamp(this.content.x, -e, -this.scrollLimits.x),
                        n = be.clamp(this.content.y, -i, -this.scrollLimits.y),
                        r = Math.max(Math.abs(this.content.x - t) / (1 | this.restitutionExtraHorizontal), Math.abs(this.content.y - n) / (1 | this.restitutionExtraVertical)) * this.restitutionTime;
                    this.restitutionTween = new h.a.Tween(this.content.position).to({ x: t, y: n }, r).easing(this.restitutionEasing).start() } } } redrawMask() { this.scrollHorizontal || (this.scrollWidth = this.content.width), this.scrollVertical || (this.scrollHeight = this.content.height), this.myMask.width == this.scrollWidth && this.myMask.height == this.scrollHeight || (this.myMask.clear(), this.myMask.beginFill(16711935, 1), this.myMask.drawRect(0, 0, this.scrollWidth, this.scrollHeight), this.myMask.endFill(), this.myMask.lineStyle(2, 2, 65535), this.myMask.drawCircle(0, 0, 20), this.bleedOut ? this.myMask.alpha = 0 : this.mask = this.myMask, this.hitArea.width = this.scrollWidth, this.hitArea.height = this.scrollHeight) } updateTransform() { this.redrawMask(), super.updateTransform() } } class ii extends r.Container { constructor() { super(), this.bg = new Array; let t = 0,
                e = 0,
                i = 0; for (; 0 == t || t >= 4;) t = Math.trunc(10 * Math.random()); for (; 0 == e || e >= 4 || e == t;) e = Math.trunc(10 * Math.random()); for (; 0 == i || i >= 4 || i == t || i == e;) i = Math.trunc(10 * Math.random());
            this.bg.push(new r.Sprite(r.Texture.from(`img/game/bgdark${t}.jpg`))), this.bg.push(new r.Sprite(r.Texture.from(`img/game/bgdark${e}.jpg`))), this.bg.push(new r.Sprite(r.Texture.from(`img/game/bgdark${i}.jpg`))), this.bg.push(new r.Sprite(r.Texture.from(`img/game/bgdark${t}.jpg`))), this.bg.push(new r.Sprite(r.Texture.from(`img/game/bgdark${e}.jpg`))), this.bg.push(new r.Sprite(r.Texture.from(`img/game/bgdark${i}.jpg`))), this.bg.push(new r.Sprite(r.Texture.from(`img/game/bgdark${t}.jpg`))); for (let r = 0; r < 7; r++) this.bg[r].anchor.set(.5), this.bg[r].y = 105 + this.bg[r].height * r - r, this.addChild(this.bg[r]); const n = Math.ceil(5 * Math.random());
            this.startBackground = r.Sprite.from("startBackground" + n), this.startBackground.x = 0, this.startBackground.y = -270, this.startBackground.anchor.set(.5), this.addChild(this.startBackground) } } class ni extends r.Container { constructor() { super(), this.wallLeft = new Array, this.wallRight = new Array; let t = 0,
                e = 0,
                i = 0; for (; 0 == t || t >= 4;) t = Math.trunc(10 * Math.random()); for (; 0 == e || e >= 4 || e == t;) e = Math.trunc(10 * Math.random()); for (; 0 == i || i >= 4 || i == t || i == e;) i = Math.trunc(10 * Math.random());
            this.wallLeft.push(new r.Sprite(r.Texture.from(`atlas/bgGame/wallL${t}.png`))), this.wallLeft.push(new r.Sprite(r.Texture.from(`atlas/bgGame/wallL${e}.png`))), this.wallLeft.push(new r.Sprite(r.Texture.from(`atlas/bgGame/wallL${i}.png`))), this.wallLeft.push(new r.Sprite(r.Texture.from(`atlas/bgGame/wallL${t}.png`))), this.wallLeft.push(new r.Sprite(r.Texture.from(`atlas/bgGame/wallL${e}.png`))), this.wallLeft.push(new r.Sprite(r.Texture.from(`atlas/bgGame/wallL${i}.png`))), this.wallLeft.push(new r.Sprite(r.Texture.from(`atlas/bgGame/wallL${t}.png`))), this.wallRight.push(new r.Sprite(r.Texture.from(`atlas/bgGame/wallR${t}.png`))), this.wallRight.push(new r.Sprite(r.Texture.from(`atlas/bgGame/wallR${e}.png`))), this.wallRight.push(new r.Sprite(r.Texture.from(`atlas/bgGame/wallR${i}.png`))), this.wallRight.push(new r.Sprite(r.Texture.from(`atlas/bgGame/wallR${t}.png`))), this.wallRight.push(new r.Sprite(r.Texture.from(`atlas/bgGame/wallR${e}.png`))), this.wallRight.push(new r.Sprite(r.Texture.from(`atlas/bgGame/wallR${i}.png`))), this.wallRight.push(new r.Sprite(r.Texture.from(`atlas/bgGame/wallR${t}.png`))); for (let n = 0; n < 7; n++) this.wallLeft[n].anchor.set(.5), this.wallLeft[n].y = 105 + this.wallLeft[n].height * n - n, this.wallLeft[n].x = 1.61 * -this.wallLeft[n].width + 1, this.addChild(this.wallLeft[n]), this.wallRight[n].anchor.set(.5), this.wallRight[n].y = 105 + this.wallRight[n].height * n - n, this.wallRight[n].x = 1.61 * this.wallRight[n].width - 1, this.addChild(this.wallRight[n]);
            this.startForeground = r.Sprite.from("img/game/startForeground.png"), this.startForeground.x = 0, this.startForeground.y = -254, this.startForeground.anchor.set(.5), this.startForeground.zIndex = 6, this.addChild(this.startForeground), this.exitFloor = r.Sprite.from("img/game/exitFloor.png"), this.exitFloor.x = 0, this.exitFloor.anchor.set(.5, 0), this.addChild(this.exitFloor) } } class ri extends r.Container { constructor(t, e, i, n, s) { super(), this.row = 0, this.column = 0, this.id = 0, this.isPlatform = !1, this.matrix = new Array, this.stageContainer = new r.Container, this.x = t.x, this.y = t.y, this.row = e, this.column = i, this.id = n, this.isPlatform = s } update(t) {} setMatrix(t, e, i) { this.matrix = t, this.stageContainer = e, this.exitRow = i } playPauseAnimation(t) { this.sprAnim != undefined && this.sprAnim.currentState != undefined && (t ? this.sprAnim.currentState.play() : this.sprAnim.currentState.stop()) } removeObject(t, e, i = !0) { i && this.stageContainer.removeChild(this.matrix[t][e]), this.matrix[t][e] = null } restoreInMatrix(t) { null == this.matrix[t.row][t.column] && (this.matrix[t.row][t.column] = t) } } class si extends r.Container { constructor(t, e, i) { super(), this.solidsBrothers = new Array, this.shape = t, this.id = e, this.continueFall = i } addBrother(t) { t.indexSolid = this.id, t.shape = this.shape, this.solidsBrothers.push(t) } solidFall() { let t = !0; if ("horizontal" == this.shape)
                for (let e = 0; e < this.solidsBrothers.length && (t = this.continueFall(this.solidsBrothers[e].row, this.solidsBrothers[e].column, this.solidsBrothers[e]), t); e++); if ("complex" == this.shape)
                for (let e = this.solidsBrothers.length - 1; e >= 0 && (!this.solidsBrothers[e].floor || (t = this.continueFall(this.solidsBrothers[e].row, this.solidsBrothers[e].column, this.solidsBrothers[e]), t)); e--); if (t)
                for (let e = 0; e < this.solidsBrothers.length; e++) this.solidsBrothers[e].startFalling(); return t } solidUpdate() { let t = !0; if ("vertical" == this.shape) { const e = this.solidsBrothers.length - 1;
                t = this.continueFall(this.solidsBrothers[e].row + 1, this.solidsBrothers[e].column, this.solidsBrothers[e]) } else
                for (let e = 0; e < this.solidsBrothers.length && (!("horizontal" == this.shape || "complex" == this.shape && this.solidsBrothers[e].floor) || (t = this.continueFall(this.solidsBrothers[e].row + 1, this.solidsBrothers[e].column, this.solidsBrothers[e]), t)); e++); for (let e = this.solidsBrothers.length - 1; e >= 0; e--) this.solidsBrothers[e].updateFalling(), t || this.solidsBrothers[e].restartFall() } getBrothersCeil() { const t = new Array; for (let e = 0; e < this.solidsBrothers.length; e++) this.solidsBrothers[e].row == this.solidsBrothers[0].row && t.push(this.solidsBrothers[e]); return t } } class oi extends ri { constructor(t, e, i, n, r, s) { super(t, e, i, n, r), this.gravity = 500, this.velocity = 50, this.acceleration = 50, this.fallTime = !1, this.timeToFall = 1450, this.fall = !0, this.posAux = 0, this.shape = "single", this.inShake = !1, this.soundShake = !1, this.storedObjects = new Array, this.solidComplex = new Array, this.landing = !1, this.continueFall = s, this.posAux = this.x, this.timer = new le, this.timer.to(this.timeToFall), this.timeAux = this.timeToFall } update(t) { if (this.acceleration > this.fallingVelocityMax && (this.acceleration = this.fallingVelocityMax), this.fallTime && (this.y < this.nextPosition && (this.y += this.acceleration * t, this.acceleration += this.gravity * t), this.y >= this.nextPosition && !this.fall && ("single" == this.shape || "beetle" == this.shape ? (this.updateFalling(), this.continueFall(this.row, this.column, this) || this.restartFall()) : this.solidComplex[this.indexSolid].solidUpdate())), this.continueFall(this.row, this.column, this) && this.fall && this.row < this.exitRow) { const t = new Array; if ("single" == this.shape) { this.startFalling(); const e = this.matrix[this.row - 1][this.column];
                    e instanceof oi && (t.push(e), this.ceilFall(t)) } else if ("beetle" != this.shape && this.solidComplex[this.indexSolid].solidFall()) { const e = this.solidComplex[this.indexSolid].getBrothersCeil(); for (let i = 0; i < e.length; i++) { const n = this.matrix[e[i].row - 1][e[i].column];
                        n instanceof oi && t.push(n) } this.ceilFall(t) } } } setParameters(t, e) { this.storedObjects = t, this.solidComplex = e } startFalling() { this.fall && (this.fall = !1, this.soundShake = !0, this.isShakable && this.shake(), this.timer.to(this.timeToFall).onComplete(() => { this.fallTime = !0, this.inShake = !1, this.timeToFall > 0 && ce.playFX("stone_fall", 0, !0), this.nextPosition = this.y + Ei.tile, this.isShakable && (this.shakeTween.stop(), this.shakeTween2.stop(), this.x = this.posAux) }), this.timer.start()) } restartFall() { this.fall = !0, this.fallTime = !1, this.acceleration = this.velocity, this.timeToFall = this.timeAux, this.y = this.nextPosition, this.timer = new le, this.soundShake = !1, this.isShakable && this.shake(!1) } updateFalling() { this.y = this.nextPosition, this.row += 1, this.fall = !0, this.fallTime = !1, this.timeToFall = 0, "beetle" != this.shape && (this.storedObjects.length > 0 && this.storedObjects.forEach(t => { t.restoreInMatrix(t) }), this.matrix[this.row - 1][this.column] = null, null == this.matrix[this.row][this.column] ? (this.matrix[this.row][this.column] = this, this.landing = !0) : (this.storedObjects.push(this.matrix[this.row][this.column]), this.matrix[this.row][this.column] = this)) } shake(t = !0) { this.soundShake && this.timeToFall > 0 && (ce.playFX("tremble", 0, !0), ce.playFX("tremble", .7, !0), this.inShake = !0), this.posAux = this.x, this.shakeTween = new h.a.Tween(this.position).to({ x: t ? this.x - 3 : this.x - 1, y: this.y }, 100).yoyo(!0).easing(h.a.Easing.Quadratic.InOut).onComplete(() => { t ? this.shakeTween2.start() : this.x = this.posAux }), this.shakeTween2 = new h.a.Tween(this.position).to({ x: t ? this.x + 3 : this.x + 1, y: this.y }, 100).yoyo(!0).easing(h.a.Easing.Quadratic.InOut).onComplete(() => { this.shakeTween.start() }), t ? this.shakeTween.start() : this.shakeTween2.start() } ceilFall(t) { if (null == t[0]) return; const e = new Array; for (let i = 0; i < e.length; i++) { const t = e[i]; if (t instanceof oi && "single" == t.shape) t.startFalling();
                else if (t instanceof si && t.solidFall()) break } for (let i = 0; i < t.length; i++) { e.push(t[i]); for (let n = t[i].row - 1; n >= 0; n--) { const r = this.matrix[n][t[i].column];
                    r instanceof oi && e.push(r) } } } } class ai extends ri { constructor(t, e, i, n, r) { super(t, e, i, n, r), this.activate = !1, this.type = "", this.idConnection = n >= 0 && n <= 11 ? "A" : "B", this.sprAnim = new me, this.addChild(this.sprAnim) } setState(t, e, i, n = !0, s = 5) { const o = new Array; for (let h = 0; h < i.length; h++) o.push(r.Texture.from(`atlas/tiles/${i[h]}.png`)); const a = t.addState(e, o, !1);
            a.anchor.set(.5), a.animationSpeed = s / 60, a.loop = n } switchState(t) { t == this.idConnection && (this.activate ? (this.activate = !1, this.sprAnim.playState("deactivate"), this instanceof ui && (ce.playFX("door_close", 0, !0), this.direction = "LEFT"), this.sprAnim.getAnimation("activate").gotoAndStop(0)) : (this.activate = !0, this.sprAnim.playState("activate"), this instanceof ui && (ce.playFX("door_open", 0, !0), this.direction = "RIGHT"), this.sprAnim.getAnimation("deactivate").gotoAndStop(0))) } } class hi extends ri { constructor(t, e, i, n = 0) { super(t, e, i, n, !0), this.spr = r.Sprite.from(`atlas/tiles/solidsPermanent${n+1}.png`), this.spr.anchor.set(.5), this.spr.scale.set(1.0126), this.addChild(this.spr) } } class ui extends ai { constructor(t, e, i, n) { super(t, e, i, n, !1), this.middleActive = !1, this.setState(this.sprAnim, "activate", ["lever4", "lever5", "lever6", "lever7"], !1, 10), this.setState(this.sprAnim, "deactivate", ["lever4", "lever3", "lever2", "lever1"], !1, 10), this.setState(this.sprAnim, "middleActivate", ["lever7", "lever6", "lever5", "lever4"], !1, 10), this.setState(this.sprAnim, "middleDeactivate", ["lever1", "lever2", "lever3", "lever4"], !1, 10), 4 == n || 16 == n ? (this.sprAnim.playState("deactivate", !1, !1, 3), this.direction = "LEFT", this.activate = !1) : (this.sprAnim.playState("activate", !1, !1, 3), this.direction = "RIGHT", this.activate = !0), this.sprite = r.Sprite.from("atlas/tiles/leverBlock.png"), this.sprite.anchor.set(.5), this.sprite.y += Ei.tile, this.addChild(this.sprite), this.type = "Lever", this.isPlatform = !1 } createBase() { this.removeObject(this.row + 1, this.column, !0); const t = new fe(Ei.tile * this.column + Ei.offset.x, Ei.tile * this.row + Ei.offset.y);
            this.matrix[this.row + 1][this.column] = new hi(t, this.row, this.column, 0) } switchLever(t) { this.isPlatform = !1, this.middleActive || t == this.direction ? this.middleActive && (this.middleActive = !1, t == this.entryDirection ? (this.restartAndPlay("LEFT" == this.entryDirection ? "deactivate" : "activate"), this.direction = t, this.leverAction(), ce.playFX("switch", 0, !0)) : this.restartAndPlay("RIGHT" == this.direction ? "activate" : "deactivate")) : ("RIGHT" == this.direction ? this.restartAndPlay("middleActivate") : "LEFT" == this.direction && this.restartAndPlay("middleDeactivate"), this.middleActive = !0, this.entryDirection = t) } leverAction() { for (let t = 0; t < Ei.rows; t++)
                for (let e = 0; e < Ei.columns; e++)
                    if (null != this.matrix[t][e] || t != this.row && e != this.column) { const i = this.matrix[t][e];
                        i instanceof ai && i.switchState(this.idConnection) } } restartAndPlay(t) { this.sprAnim.hasState(t) && (this.sprAnim.getAnimation(t).gotoAndStop(0), this.sprAnim.playState(t)) } } class li extends oi { constructor(t, e, i, n, s = !0, o, a) { super(t, e, i, n, s, a), this.hitboxSize = Ei.tile, this.floor = !1, this.sprite = r.Sprite.from(`atlas/tiles/solidsgravity${n+1}.png`), this.sprite.anchor.set(.5), this.sprite.scale.set(1.0126), this.addChild(this.sprite), this.velocity = this.acceleration = 480, this.fallingVelocityMax = 2500, this.drawCollider(new r.Rectangle(-this.hitboxSize / 2, -this.hitboxSize / 2, this.hitboxSize, this.hitboxSize)), this.isShakable = !0, this.emitter1 = new Xe(o, [r.Texture.from("atlas/particles/dust_1.png")], r.Loader.shared.resources.landing.data), this.emitter1.emit = !1, this.emitter2 = new Xe(o, [r.Texture.from("atlas/particles/dust_1.png")], r.Loader.shared.resources.prefall.data), this.emitter2.emit = !1, this.floor = this.id >= 0 && this.id < 6 && 3 != this.id || 9 == this.id || 12 == this.id || 10 == this.id } drawCollider(t) { this.collider = new _e([new r.Point(t.x, t.y), new r.Point(t.width + t.x, t.y), new r.Point(t.width + t.x, t.height + t.y), new r.Point(t.x, t.height + t.y)], at), this.addChild(this.collider) } update(t) { super.update(t), this.emitter1.update(t), this.emitter1.updateOwnerPos(this.x, this.y + this.sprite.height / 2), this.emitter2.update(t), this.emitter2.updateOwnerPos(this.x, this.y + this.sprite.height / 2), this.inShake && this.floor ? this.emitter2.emit = !0 : this.emitter2.emit = !1, this.landing && 0 != this.timeToFall && this.floor && (this.emitter1.emit = !0, this.landing = !1) } } class ci extends ri { constructor(t, e, i, n) { super(e, i, n, 0, !0), this.spr = new me, this.isPlatform = !1, this.x = e.x, this.y = e.y, this.setAnimationsA(this.spr, t), this.addChild(this.spr), this.spr.playState("idleSide"), this.spr.y = -19 } setAnimationsA(t, e) { this.setState(t, "idleSide", [e + "01", e + "02", e + "03", e + "02"], 6) } setState(t, e, i, n) { const s = new Array; for (let a = 0; a < i.length; a++) s.push(r.Texture.from(`atlas/character/${i[a]}.png`)); const o = t.addState(e, s, !0);
            o.anchor.set(.5), o.animationSpeed = n / 60 } update(t) { t < this.x ? this.scale.x = -1 : this.scale.x = 1 } pause(t) { t ? this.spr.currentState.stop() : this.spr.currentState.playing || this.spr.currentState.play() } } class di extends oi { constructor(t, e, i, n, s, o, a) { super(t, e, i, n, !1, a), this.currentMovement = "STOP", this.previousMovement = "RIGHT", this.tempMovement = "STOP", this.fall = !0, this.onFlip = !1, this.death = !1, this.acceleration = this.velocity = 65, this.gravity = 200, this.fallingVelocityMax = 300, this.sprAnim = new me, this.setState(this.sprAnim, "idle", ["beetle1", "beetle2", "beetle3", "beetle2", "beetle1", "beetle2"]), this.setState(this.sprAnim, "walk", ["beetle4", "beetle5", "beetle6", "beetle7", "beetle8", "beetle9", "beetle10", "beetle11"]), this.setState(this.sprAnim, "turn", ["beetle12", "beetle4"], !1, 10), this.setState(this.sprAnim, "fall", ["beetle13"]), this.setState(this.sprAnim, "death", ["beetle14", "beetle15"], !1, 10), this.previousMovement = s, "RIGHT" == s ? this.toRight() : this.toLeft(), this.addChild(this.sprAnim), this.sprAnim.playState("idle"), this.drawCollider(new r.Rectangle(-this.sprAnim.width / 6, -5, this.sprAnim.width / 3, this.sprAnim.height / 2)), this.isShakable = !1, this.timeToFall = this.timeAux = 0, this.emitterWalkR = new Xe(o, [r.Texture.from("atlas/particles/dust_1.png")], r.Loader.shared.resources.walkR.data), this.emitterWalkR.emit = !0, this.emitterStink = new Xe(o, [r.Texture.from("atlas/particles/poison.png")], r.Loader.shared.resources.stink.data), this.emitterStink.emit = !0, this.emitterCrushed = new Xe(o, [r.Texture.from("atlas/particles/poison.png")], r.Loader.shared.resources.crushed.data), this.emitterCrushed.emit = !0, this.shape = "beetle" } setState(t, e, i, n = !0, s = 5) { const o = new Array; for (let h = 0; h < i.length; h++) o.push(r.Texture.from(`atlas/enemies/${i[h]}.png`)); const a = t.addState(e, o, !0);
            a.anchor.set(.5), a.animationSpeed = s / 60, a.loop = n } drawCollider(t) { this.collider = new _e([new r.Point(t.x, t.y), new r.Point(t.width + t.x, t.y), new r.Point(t.width + t.x, t.height + t.y), new r.Point(t.x, t.height + t.y)], at), this.addChild(this.collider) } update(t) { this.emitterWalkR.updateOwnerPos(this.x + this.sprAnim.x / 2, this.y + this.height / 2), this.emitterWalkR.update(t), this.emitterStink.updateOwnerPos(this.x + this.sprAnim.x / 2, this.y), this.emitterStink.update(t), this.death || (this.emitterCrushed.updateOwnerPos(this.x + this.sprAnim.x / 2, this.y + this.sprAnim.height / 2), this.emitterCrushed.update(t)), this.emitterStink.emit = !0, this.emitterWalkR.emit = !0, this.fallTime ? (this.currentMovement = "GRAVITY", this.emitterWalkR.emit = !1, super.update(t)) : ("RIGHT" == this.currentMovement && (this.x < this.nextPosition ? (this.turnBack(), this.x += this.velocity * t) : (this.currentMovement = "STOP", this.previousMovement = "RIGHT", this.matrixReposition())), "LEFT" == this.currentMovement && (this.x > this.nextPosition ? (this.turnBack(), this.x -= this.velocity * t) : (this.currentMovement = "STOP", this.previousMovement = "LEFT", this.matrixReposition())), "STOP" == this.currentMovement && this.controlMovement(), this.activateFall(), this.continueFall(this.row, this.column, this) && this.fall && this.startFalling()), this.checkCollision(), this.animation() } controlMovement() { let t, e; if (this.column < Ei.columns) { const e = this.matrix[this.row][this.column + 1];
                t = (null == e || e instanceof ui || e instanceof ci) && null != this.matrix[this.row + 1][this.column + 1] && !this.continueFall(this.row, this.column + 1, this) } else t = !1; if (this.column > 0) { const t = this.matrix[this.row][this.column - 1];
                e = (null == t || t instanceof ui || t instanceof ci) && null != this.matrix[this.row + 1][this.column - 1] && !this.continueFall(this.row, this.column - 1, this) } else e = !1; "RIGHT" == this.previousMovement ? t && this.column < Ei.columns ? this.changeDirection("RIGHT", !1) : e ? this.changeDirection("LEFT", !0) : this.currentMovement = "STOP" : "LEFT" == this.previousMovement && (e && this.column >= 0 ? this.changeDirection("LEFT", !1) : t ? this.changeDirection("RIGHT", !0) : this.currentMovement = "STOP"); const i = this.matrix[this.row][this.column],
                n = this.matrix[this.row][this.nextColumn];
            i instanceof ui && "GRAVITY" != this.currentMovement && (i.middleActive || i.switchLever(this.currentMovement), n instanceof ui && null != n || this.column == this.nextColumn || i.switchLever(this.currentMovement)) } toRight() { this.nextColumn = this.column + 1, this.nextPosition = this.nextColumn * Ei.tile + Ei.offset.x, this.previousMovement = "STOP", this.currentMovement = "RIGHT", this.sprAnim.scale.x = Math.abs(this.sprAnim.scale.x) } toLeft() { this.nextColumn = this.column - 1, this.nextPosition = this.nextColumn * Ei.tile + Ei.offset.x, this.previousMovement = "STOP", this.currentMovement = "LEFT", this.sprAnim.scale.x = -Math.abs(this.sprAnim.scale.x) } changeDirection(t, e) { this.fall = !1, this.onFlip = e, e ? (this.sprAnim.playState("turn"), this.tempMovement = t) : "RIGHT" == t ? this.toRight() : "LEFT" == t && this.toLeft() } matrixReposition() { this.column = this.nextColumn, this.sprAnim.playState("idle"), this.x = Ei.tile * this.column + Ei.offset.x, this.y = Ei.tile * this.row + Ei.offset.y } restartFall() { this.onFlip = !1, this.fallTime = !1, this.acceleration = this.velocity, this.currentMovement = "STOP", this.emitterWalkR.emit = !1, this.previousMovement = this.sprAnim.scale.x > 1 ? "RIGHT" : "LEFT", this.nextColumn = this.column, this.matrixReposition() } checkCollision() { const t = new ye.Response; for (let e = 0; e < Ei.rows; e++)
                for (let i = 0; i < Ei.columns; i++) { const n = this.matrix[e][i]; if (n instanceof li && ti.test(this.collider, n.collider, t)) { this.onCollision(); break } } } onCollision() { this.currentMovement = "STOP", this.death || (ce.playFX("bug"), this.emitterCrushed.playOnceAndDestroy()), this.death = !0, this.emitterStink.emit = !1, this.emitterStink.cleanup(), this.emitterWalkR.emit = !1, this.emitterWalkR.cleanup();
            (new le).to(500).onComplete(() => { this.visible = !1 }).start() } animation() { "STOP" != this.currentMovement && (this.sprAnim.playState("walk"), this.emitterWalkR.emit = !0), this.fallTime && this.sprAnim.playState("fall"), this.death && this.sprAnim.playState("death"), this.onFlip && "turn" == this.sprAnim.currentStateName && (0 == this.sprAnim.getAnimation("turn").currentFrame ? "RIGHT" == this.tempMovement ? this.sprAnim.scale.x = Math.abs(this.sprAnim.scale.x) : "LEFT" == this.tempMovement && (this.sprAnim.scale.x = -Math.abs(this.sprAnim.scale.x)) : 1 == this.sprAnim.getAnimation("turn").currentFrame && (this.onFlip = !1, this.sprAnim.getAnimation("turn").gotoAndStop(0), "RIGHT" == this.tempMovement ? this.toRight() : "LEFT" == this.tempMovement && this.toLeft())), "idle" == this.sprAnim.currentStateName && (this.emitterWalkR.emit = !1, this.emitterWalkR.cleanup()) } turnBack() { Math.abs(this.nextColumn * Ei.tile - this.column * Ei.tile) / 2 < Math.abs(this.nextPosition - this.x) && (this.continueFall(this.row, this.nextColumn, this) || this.continueFall(this.row - 1, this.nextColumn, this)) && (this.previousMovement = this.currentMovement, this.currentMovement = "STOP", this.nextColumn = this.column, this.controlMovement()) } activateFall() { "RIGHT" == this.currentMovement ? this.x > this.nextPosition - 10 && (this.column = this.nextColumn, this.fall = !0) : "LEFT" == this.currentMovement && this.x < this.nextPosition + 10 && (this.column = this.nextColumn, this.fall = !0) } } class pi extends ri { constructor(t, e, i, n, s) { super(t, e, i, n, !1), this.hitboxSize = 80, this.collision = !1, this.sprAnim = new me, this.setStateBase(this.sprAnim, "hazard", ["hazard1", "hazard2", "hazard3", "hazard4", "hazard3", "hazard2"], !0, 10), this.sprAnim.playState("hazard", !1, !1, 1e3 * Math.random()), this.sprAnim.angle = 360 * Math.random(), this.emitter = new Xe(s, [r.Texture.from("atlas/particles/poison.png")], r.Loader.shared.resources.hazard.data), this.emitter.emit = !0, this.emitter2 = new Xe(s, [r.Texture.from("atlas/particles/poison.png")], r.Loader.shared.resources.item_pick.data), this.emitter2.emit = !1, this.drawCollider(new r.Rectangle(-this.hitboxSize / 4, -this.hitboxSize / 4, this.hitboxSize / 2, this.hitboxSize / 2)), this.addChild(this.sprAnim) } drawCollider(t) { this.collider = new _e([new r.Point(t.x, t.y), new r.Point(t.width + t.x, t.y), new r.Point(t.width + t.x, t.height + t.y), new r.Point(t.x, t.height + t.y)], at), this.addChild(this.collider) } setStateBase(t, e, i, n = !0, s = 5) { const o = new Array; for (let h = 0; h < i.length; h++) o.push(r.Texture.from(`atlas/tiles/${i[h]}.png`)); const a = t.addState(e, o, !1); return a.anchor.set(.5), a.animationSpeed = s / 60, a.loop = n, a } onCollision(t = !0) { this.emitter2.playOnceAndDestroy(), this.collision || (this.collision = !0, new h.a.Tween(this.scale).to({ x: 1, y: 1 }, 1e3).easing(h.a.Easing.Quadratic.In).delay(0).onComplete(() => { this.visible = !1, this.emitter.cleanup(), this.emitter2.cleanup() }).start(), t && this.removeObject(this.row, this.column)) } update(t) { this.emitter.updateOwnerPos(this.x, this.y), this.emitter.update(t), this.emitter2.updateOwnerPos(this.x, this.y), this.emitter2.update(t), this.checkCollision() } checkCollision() { for (let t = 0; t < Ei.rows; t++)
                for (let e = 0; e < Ei.columns; e++) { const i = this.matrix[t][e]; if (i instanceof li && ti.test(this.collider, i.collider)) { this.onCollision(); break } } } } class fi extends ri { constructor(t, e, i, n, r = !0) { super(t, e, i, n, r), this.animFinish = !1, this.finish = !1, this.sound = !1; const s = Math.ceil(4 * Math.random());
            this.sprAnim = new me, this.setAnimations(this.sprAnim, s), this.sprAnim.playState("ground"), this.zIndex = -1, this.addChild(this.sprAnim) } setAnimations(t, e) { this.setState(t, e, ["ToDown"], 7), this.setState(t, e, ["ToUp"]), this.setState(t, e, ["ToRight"]), this.setState(t, e, ["ToLeft"]), this.setState2(t, e) } setState(t, e, i, n = 5) { const s = new Array; for (let a = 1; a < 4; a++) s.push(r.Texture.from(`atlas/tiles/ground${e}${i[0]}${a}.png`));
            s.push(r.Texture.from("atlas/magicPixel.png")); const o = t.addState("ground" + i[0], s, !1);
            o.anchor.set(.5), o.animationSpeed = n / 60 } setState2(t, e, i = 5) { const n = new Array;
            n.push(r.Texture.from(`atlas/tiles/ground${e}.png`)); const s = t.addState("ground", n, !0);
            s.anchor.set(.5), s.animationSpeed = i / 60 } update(t) { this.finish && this.removeObject(this.row, this.column) } onCollision(t, e = !1) { this.isPlatform = !1, "DOWN" == t && this.sprAnim.playState("groundToDown"), "UP" == t && this.sprAnim.playState("groundToUp"), "RIGHT" == t && this.sprAnim.playState("groundToRight"), "LEFT" == t && this.sprAnim.playState("groundToLeft"), e || (new le).to(1e3).onComplete(() => { this.finish = !0 }).start(), this.sound || (ce.playFX("dig", 0, !1), this.sound = !0) }
        "delete"() { return "ground" != this.sprAnim.currentStateName && this.sprAnim.getAnimation(this.sprAnim.currentStateName).currentFrame > 1 } } class mi extends ri { constructor(t, e, i, n, s) { super(t, e, i, n, !0), this.closed = !0, this.sprAnim = new me, this.setState(this.sprAnim, "close", ["door1"]), this.setState(this.sprAnim, "open", ["door2", "door3", "door4"], !1), this.sprAnim.playState("close"), this.addChild(this.sprAnim), this.emitter1 = new Xe(s, [r.Texture.from("atlas/particles/dust_3.png")], r.Loader.shared.resources.landing.data), this.emitter2 = new Xe(s, [r.Texture.from("atlas/particles/dust_3.png")], r.Loader.shared.resources.landing.data), this.emitter3 = new Xe(s, [r.Texture.from("atlas/particles/dust_3.png")], r.Loader.shared.resources.landing.data), this.emitter4 = new Xe(s, [r.Texture.from("atlas/particles/dust_3.png")], r.Loader.shared.resources.landing.data), this.emitter1.updateOwnerPos(this.x + this.sprAnim.width / 2, this.y), this.emitter1.rotate(90), this.emitter2.updateOwnerPos(this.x - this.sprAnim.width / 2, this.y), this.emitter2.rotate(-90), this.emitter3.updateOwnerPos(this.x, this.y + this.sprAnim.height / 2), this.emitter4.updateOwnerPos(this.x, this.y - this.sprAnim.height / 2), this.emitter4.rotate(180), this.emitter1.emit = !1, this.emitter2.emit = !1, this.emitter3.emit = !1, this.emitter4.emit = !1 } update(t) { this.emitter1.update(t), this.emitter2.update(t), this.emitter3.update(t), this.emitter4.update(t) } setState(t, e, i, n = !0, s = 40) { const o = new Array; for (let h = 0; h < i.length; h++) o.push(r.Texture.from(`atlas/tiles/${i[h]}.png`)); const a = t.addState(e, o, !1);
            a.anchor.set(.5), a.animationSpeed = s / 60, a.loop = n } onCollision() { this.closed = !1, this.sprAnim.playState("open"), this.emitter1.emit = !0, this.emitter2.emit = !0, this.emitter3.emit = !0, this.emitter4.emit = !0, this.isPlatform = !1, ce.playFX("unlock", 0, !0) } } class gi extends ri { constructor(t, e, i, n) { super(t, e, i, n, !1), this.spr = r.Sprite.from("atlas/tiles/exit.png"), this.spr.anchor.set(.5), this.addChild(this.spr) } } class yi extends fi { constructor(t, e, i, n, s, o) { let a;
            super(t, e, i, n), this.rarity = 0, this.pick = !1, this.tweenKey = !1, n >= 8 && n <= 11 ? (this.sprite = r.Sprite.from("atlas/items/key1.png"), this.urlSprite = "key2", this.typeCollectable = "Key") : (0 == n ? (this.sprite = r.Sprite.from(`atlas/items/item${n+1+o}.png`), this.urlSprite = `item${n+1+o}a`, this.rarity = 10, a = r.Texture.from("atlas/particles/sparkle_white.png")) : 1 == n ? (this.sprite = r.Sprite.from(`atlas/items/item${n+3+o}.png`), this.urlSprite = `item${n+3+o}a`, this.rarity = 25, a = r.Texture.from("atlas/particles/sparkle_white.png")) : 2 == n && (this.sprite = r.Sprite.from(`atlas/items/item${n+5+o}.png`), this.urlSprite = `item${n+5+o}a`, this.rarity = 50, a = r.Texture.from("atlas/particles/sparkle_white.png")), this.typeCollectable = "Item"), this.sprite.anchor.set(.5), this.sprite.scale.set(1.0126), this.addChild(this.sprite), "Key" != this.typeCollectable && (this.emitter1 = new Xe(s, [a], r.Loader.shared.resources.item_idle.data), this.emitter2 = new Xe(s, [a], r.Loader.shared.resources.item_pick.data), this.emitter1.updateOwnerPos(this.x, this.y), this.emitter1.emit = !0, this.emitter2.updateOwnerPos(this.x, this.y), this.emitter2.emit = !1) } update(t) { super.update(t), null != this.emitter1 && this.emitter1.emit ? this.emitter1.update(t) : null != this.emitter2 && this.emitter2.emit && this.emitter2.update(t) } onCollisionCollectable(t) { if (super.onCollision(t, !0), !this.pick) { if ("Key" != this.typeCollectable && (this.emitter1.emit = !1, this.emitter1.cleanup(), this.emitter2.playOnceAndDestroy()), this.pick = !0, "Item" == this.typeCollectable) { const t = Math.ceil(3 * Math.random());
                    10 == this.rarity && ce.playFX("item" + t, 0, !0), 25 == this.rarity && ce.playFX("item" + t, 0, !0), 50 == this.rarity && ce.playFX("item" + t, 0, !0) } else ce.playFX("key", 0, !0);
                this.sprite.texture = r.Texture.from(`atlas/items/${this.urlSprite}.png`), this.tween = new h.a.Tween(this.sprite.scale).to({ x: 1.3, y: 1.3 }, 200).easing(h.a.Easing.Quadratic.InOut).yoyo(!0).repeat(3).onComplete(() => { "Item" == this.typeCollectable ? this.tween2.start() : this.tweenKey = !0 }), this.tween2 = new h.a.Tween(this.sprite.scale).to({ x: 0, y: 0 }, 200).easing(h.a.Easing.Quadratic.In).delay(0).onComplete(() => { this.finishCollectable() }), this.tween.start() } return "Item" == this.typeCollectable ? this.rarity : 1 } finishCollectable() { this.visible = !1, this.finish = !0, this.emitter2 && this.emitter2.cleanup() } } class vi extends ai { constructor(t, e, i, n, s, o) { super(t, e, i, n, !0), this.isStuck = !1, this.timerAnim = new le, this.objectOnTop = o, this.setState(this.sprAnim, "activate", ["trapdoor4", "trapdoor3", "trapdoor2", "trapdoor1"], !1, 40), this.setState(this.sprAnim, "deactivate", ["trapdoor1", "trapdoor2", "trapdoor3", "trapdoor4"], !1, 40), 11 == n || 23 == n ? (this.isPlatform = this.activate = !1, this.sprAnim.playState("deactivate", !1, !1, 3)) : (this.isPlatform = this.activate = !0, this.sprAnim.playState("activate", !1, !1, 3)), this.emitter1 = new Xe(s, [r.Texture.from("atlas/particles/dust_3.png")], r.Loader.shared.resources.landing.data), this.emitter2 = new Xe(s, [r.Texture.from("atlas/particles/dust_3.png")], r.Loader.shared.resources.landing.data), this.emitter3 = new Xe(s, [r.Texture.from("atlas/particles/dust_3.png")], r.Loader.shared.resources.landing.data), this.emitter4 = new Xe(s, [r.Texture.from("atlas/particles/dust_3.png")], r.Loader.shared.resources.landing.data), this.emitter1.updateOwnerPos(this.x + this.sprAnim.width / 2, this.y), this.emitter1.rotate(90), this.emitter2.updateOwnerPos(this.x - this.sprAnim.width / 2, this.y), this.emitter2.rotate(-90), this.emitter3.updateOwnerPos(this.x, this.y + this.sprAnim.height / 2), this.emitter4.updateOwnerPos(this.x, this.y - this.sprAnim.height / 2), this.emitter4.rotate(180), this.emitter1.emit = !1, this.emitter2.emit = !1, this.emitter3.emit = !1, this.emitter4.emit = !1, this.type = "trapdoor" } update(t) { this.emitter1.update(t), this.emitter2.update(t), this.emitter3.update(t), this.emitter4.update(t), "deactivate" == this.sprAnim.currentStateName && 0 == this.sprAnim.currentState.currentFrame && (this.emitter1.emit = !0, this.emitter2.emit = !0, this.emitter3.emit = !0, this.emitter4.emit = !0), this.isStuck && (this.objectOnTop(this.row, this.column) || this.timerAnim.isPlaying() || this.timerAnim.to(100).onComplete(() => { this.switchState(this.idConnection) }).start()) } switchState(t) { t == this.idConnection && (this.activate ? (this.activate = !1, this.isStuck = !1, this.sprAnim.playState("deactivate"), this.sprAnim.getAnimation("activate").gotoAndStop(0)) : this.objectOnTop(this.row, this.column) ? (this.sprAnim.getAnimation("activate").gotoAndStop(0), this.isStuck = !0) : (this.isStuck = !1, this.sprAnim.playState("activate", !1, !1, 0), this.sprAnim.getAnimation("deactivate").gotoAndStop(0), this.activate = !0), this.isPlatform = this.activate) } } class bi extends ai { constructor(t, e, i, n, s) { super(t, e, i, n, !0); let o = 0;
            0 == n || 6 == n || 12 == n || 18 == n ? o = 3 : 1 == n || 7 == n || 13 == n || 19 == n ? o = 0 : 2 == n || 8 == n || 14 == n || 20 == n ? o = 1 : 3 != n && 9 != n && 15 != n && 21 != n || (o = 2), this.sprite = r.Sprite.from(`atlas/tiles/spikesBlock${o+1}.png`), this.sprite.anchor.set(.5), this.addChild(this.sprite), this.setState(this.sprAnim, "activate", ["pixel", "spikes1", "spikes2", "spikes3"], !1, 40), this.setState(this.sprAnim, "deactivate", ["spikes3", "spikes2", "spikes1", "pixel"], !1, 40), this.sprAnim.angle = 90 * o, 0 == o ? this.sprAnim.y -= Ei.tile : 1 == o ? this.sprAnim.x += Ei.tile : 2 == o ? this.sprAnim.y += Ei.tile : 3 == o && (this.sprAnim.x -= Ei.tile), n >= 0 && n <= 3 || n >= 12 && n <= 15 ? (this.activate = !0, this.sprAnim.playState("activate", !1, !1, 3)) : (this.activate = !1, this.sprAnim.playState("deactivate", !1, !1, 3)), this.drawCollider(new r.Rectangle(-this.sprite.width / 8, -this.sprite.height / 8, this.sprite.width / 4, this.sprite.height / 4)), this.collider.x = this.sprAnim.x / 1.5, this.collider.y = this.sprAnim.y / 1.5, this.type = "spikes", this.emitter = new Xe(s, [r.Texture.from("atlas/particles/dust_1.png")], r.Loader.shared.resources.landing.data), this.emitter.emit = this.activate, this.emitter.rotate(this.sprAnim.angle) } drawCollider(t) { this.collider = new _e([new r.Point(t.x, t.y), new r.Point(t.width + t.x, t.y), new r.Point(t.width + t.x, t.height + t.y), new r.Point(t.x, t.height + t.y)], at), this.addChild(this.collider) } update(t) { this.emitter.update(t), this.emitter.updateOwnerPos(this.x + this.sprAnim.x / 2, this.y + this.sprAnim.y / 2) } switchState(t) { super.switchState(t), ce.playFX("spikes", 0, !0), this.emitter.emit = this.activate } } class _i extends li { constructor(t, e, i, n = 0, s, o) { super(t, e, i, n, !0, s, o), this.inTween = !1, this.newInTween = !1, this.sprite.texture = r.Texture.from("atlas/tiles/rollingstone.png"), this.sprite.angle = 360 * Math.random(), this.emitterpushR = new Xe(s, [r.Texture.from("atlas/particles/dust_1.png")], r.Loader.shared.resources.walkR.data), this.emitterpushR.emit = !1, this.emitterpushL = new Xe(s, [r.Texture.from("atlas/particles/dust_1.png")], r.Loader.shared.resources.walkL.data), this.emitterpushL.emit = !1 } update(t) { super.update(t), this.emitterpushR.update(t), this.emitterpushL.update(t), this.emitterpushR.updateOwnerPos(this.x + this.sprite.x / 2, this.y + this.sprite.height / 2), this.emitterpushL.updateOwnerPos(this.x - this.sprite.x / 2, this.y + this.sprite.height / 2), this.pushed && this.timeToFall && (this.pushed = !1, this.timeToFall = this.timeAux) } pushRollingStone(t, e) { this.emitterpushL.emit = !0, this.emitterpushR.emit = !0, this.newInTween = !0, this.removeObject(this.row, this.column, !1); const i = this.matrix[this.row][e];
            this.matrix[this.row][e] = this; const n = e > this.column ? 120 : -120;
            t < this.sprite.x ? this.emitterpushL.emit = !0 : this.emitterpushR.emit = !0, this.inTween || (this.fall = !1, this.inTween = !0, this.pushed = !0, this.continueFall(this.row, e, this) ? this.timeToFall = 0 : this.timeToFall = this.timeAux, ce.playFX("push"), new h.a.Tween(this.position).to({ x: t }, 500).easing(h.a.Easing.Quadratic.InOut).delay(100).onComplete(() => { this.inTween = !1, this.newInTween = !1, this.fall = !0, i instanceof pi && (i.onCollision(!1), this.stageContainer.removeChild(i)), this.column = e }).start(), new h.a.Tween(this.sprite).to({ angle: this.sprite.angle + n }, 500).easing(h.a.Easing.Quadratic.InOut).delay(100).start()) } } class xi extends r.Container { constructor(t) { var e, i, n;
            super(), this._anchor = new r.ObservablePoint(this.updateAnchor, this, t.anchorX, t.anchorY), this.graphic = t.texture ? r.Sprite.from(t.texture) : r.Sprite.from(r.Texture.EMPTY), this.background = t.background ? r.Sprite.from(t.background) : r.Sprite.from(r.Texture.EMPTY), this.background.anchor.set(.5), this.cap = t.cap ? r.Sprite.from(t.cap) : r.Sprite.from(r.Texture.EMPTY), this.cap.anchor.set(.5), this.barMask = new r.Graphics, this.vertical = !!t.vertical, this.reverse = !!t.reverse, this.barContainer = new r.Container, t.vertical ? t.reverse ? (this.graphic.anchor.set(0, 0), this.barMask.beginFill(16711935, 1), this.barMask.drawRect(0, 0, this.graphic.width, this.graphic.height), this.barMask.endFill(), this.barContainer.x = -this.graphic.width / 2, this.barContainer.y = -this.graphic.height / 2) : (this.graphic.anchor.set(0, 1), this.barMask.beginFill(16711935, 1), this.barMask.drawRect(0, 0, this.graphic.width, -this.graphic.height), this.barMask.endFill(), this.barContainer.x = -this.graphic.width / 2, this.barContainer.y = +this.graphic.height / 2) : t.reverse ? (this.graphic.anchor.set(1, 0), this.barMask.beginFill(16711935, 1), this.barMask.drawRect(0, 0, -this.graphic.width, this.graphic.height), this.barMask.endFill(), this.barContainer.x = +this.graphic.width / 2, this.barContainer.y = -this.graphic.height / 2) : (this.graphic.anchor.set(0, 0), this.barMask.beginFill(16711935, 1), this.barMask.drawRect(0, 0, this.graphic.width, this.graphic.height), this.barMask.endFill(), this.barContainer.x = -this.graphic.width / 2, this.barContainer.y = -this.graphic.height / 2), this.barContainer.addChild(this.graphic), this.barContainer.addChild(this.barMask), this.barContainer.addChild(this.cap), this.graphic.mask = this.barMask, this.content = new r.Container, this.content.addChild(this.background), this.content.addChild(this.barContainer), this.addChild(this.content), this._min = null !== (e = t.minValue) && void 0 !== e ? e : 0, this._max = null !== (i = t.maxValue) && void 0 !== i ? i : 1, this.value = null !== (n = t.initialValue) && void 0 !== n ? n : 0 } get min() { return this._min } set min(t) { this._min = t, this.updateValue() } get max() { return this._max } set max(t) { this._max = t, this.updateValue() } get value() { return this._value } set value(t) { this._value = t, this.updateValue() } get ratio() { return this._ratio } set ratio(t) { this._value = t * (this._max - this._min) + this._min, this.updateValue() } get anchor() { return this._anchor } set anchor(t) { this._anchor.copyFrom(t) } get animatedRatio() { return this.vertical ? this.barMask.scale.y : this.barMask.scale.x } get animatedValue() { return this.animatedRatio * (this.max - this.min) + this.min } updateValue(t, e) { var i;
            null != t && (this._value = t), null === (i = this.tween) || void 0 === i || i.stop(), this._ratio = be.clamp((this._value - this._min) / (this._max - this._min), 0, 1), e ? (this.tween = new h.a.Tween(this.barMask.scale), this.vertical ? this.tween.to({ y: this._ratio }, e) : this.tween.to({ x: this._ratio }, e), this.tween.easing(h.a.Easing.Quadratic.Out).onUpdate(this.fixCap.bind(this)).start()) : (this.vertical ? this.barMask.scale.y = this._ratio : this.barMask.scale.x = this._ratio, this.fixCap()) } fixCap() { this.vertical ? this.cap.x = this.graphic.width / 2 : this.cap.y = this.graphic.height / 2, this.reverse ? this.vertical ? this.cap.y = this.barMask.height : this.cap.x = -this.barMask.width : this.vertical ? this.cap.y = -this.barMask.height : this.cap.x = this.barMask.width } updateAnchor() { this.content.x = this.content.x * (.5 - this.anchor.x), this.content.y = this.content.y * (.5 - this.anchor.y) } }
    var wi = i(25),
        Ti = i.n(wi);
    class Si extends r.Container { constructor(t, e) { super(), this.stars = new Array, this.starsScore = new Array, this.widthScoreBar = 400, this.levelContainer = new r.Container, this.centerContainer = new r.Container, this.pauseContainer = new r.Container, this.tutorialContainer = new r.Container, this.particlesContainer = new r.Container, this.posEmitter = new fe, this.emitParticle = !1, this.taps = 0, this.keyNum = 0, Si.numberStars = 0, this.pauseFuncRef = e, this.levelBg = r.Sprite.from("atlas/UI/bgLevel.png"), this.levelBg.anchor.set(.5), this.levelBg.x = this.levelBg.width / 2, this.levelBg.y = this.levelBg.height / 2 + 10, this.levelText = t < 10 ? new r.BitmapText("0" + t, { fontName: "Fancy 40", tint: 7627555 }) : new r.BitmapText("" + t, { fontName: "Fancy 40", tint: 7627555 }), this.levelText.anchor = .5, this.levelText.x = this.levelBg.x, this.levelText.y = this.levelBg.height / 2 + 10, this.scoreBar = new xi({ texture: "atlas/UI/scoreBar.png", background: "atlas/UI/bgScoreBar.png", anchorX: .5, anchorY: .5 }), this.scoreBar.anchor.set(.5), this.scoreBar.y = this.scoreBar.height / 2 + 10; for (let i = 0; i < 3; i++) this.stars.push(r.Sprite.from(`atlas/UI/star${i+1}.png`)), this.stars[i].anchor.set(.5), this.stars[i].y = this.scoreBar.y;
            this.keysBg = r.Sprite.from("atlas/UI/bgKeys.png"), this.keysBg.anchor.set(.5), this.keysBg.x = this.scoreBar.width / 2 - this.keysBg.width / 2, this.keysBg.y = this.keysBg.height / 2 + 10, this.keysText = new r.BitmapText("00", { fontName: "Fancy 40", tint: 16381173 }), this.keysText.anchor = .5, this.keysText.x = this.keysBg.x + 25, this.keysText.y = this.keysBg.height / 2 + 12, Si.positionKey = this.toLocal(new fe(this.keysText.position.x, this.keysText.position.y)), this.buttonPause = new ae("atlas/UI/buttonPause.png", "atlas/Home/bgBtn.png", () => { lt.isChangingScene || (this.pauseFuncRef(), ce.playFX("button")) }, !1), this.buttonPause.x = -this.buttonPause.width / 2 - 10, this.buttonPause.y = this.buttonPause.height / 2 + 10, this.levelContainer.addChild(this.levelBg, this.levelText), this.centerContainer.addChild(this.scoreBar); for (let i = 0; i < this.stars.length; i++) this.centerContainer.addChild(this.stars[i]);
            this.centerContainer.addChild(this.keysBg, this.keysText), this.pauseContainer.addChild(this.buttonPause), this.emitter = new Xe(this.particlesContainer, [r.Texture.from("atlas/particles/sparkle_yellow.png")], r.Loader.shared.resources.item_pick.data), this.emitter.emit = !1, this.addChild(this.levelContainer), this.addChild(this.centerContainer), this.addChild(this.pauseContainer), this.addChild(this.tutorialContainer), this.addChild(this.particlesContainer), this.posScoreBar = -this.scoreBar.width / 3 + 40, this.levelArray = ue.getValue("Levels"), 1 != t || this.levelArray[0].completed || (Ti()({ ua: navigator.userAgent, tablet: !0, featureDetect: !0 }) ? this.tutorial = r.Sprite.from("atlas/tutorial/mobile.png") : this.tutorial = r.Sprite.from("atlas/tutorial/PC.png"), this.tutorial.anchor.set(1), this.tutorialContainer.addChild(this.tutorial), Si.isTutorial = !0, Si.isTutorial2 = !1) } updateParticles(t) { this.emitter.update(t), this.emitter.updateOwnerPos(this.posEmitter.x, this.posEmitter.y), this.emitParticle && (this.emitter.playOnce(), this.emitParticle = !1) } update(t) { Si.isTutorial && (Ei.tap && (Ei.tap = !1, this.taps++), Ti()({ ua: navigator.userAgent, tablet: !0, featureDetect: !0 }) ? 3 == this.taps && (this.taps = 4, new h.a.Tween(this.tutorial.scale).to({ x: 0, y: 0 }, 200).easing(h.a.Easing.Quadratic.InOut).onComplete(() => { this.tutorial.texture = r.Texture.from("atlas/tutorial/mobile2.png"), new h.a.Tween(this.tutorial.scale).to({ x: 1, y: 1 }, 200).easing(h.a.Easing.Quadratic.InOut).onComplete(() => { Si.isTutorial = !1, Si.isTutorial2 = !0 }).start() }).start()) : Q.justPressedAny() && (Si.isTutorial = !1, new h.a.Tween(this.tutorial.scale).to({ x: 0, y: 0 }, 2e3).easing(h.a.Easing.Elastic.In).start())), Si.isTutorial2 && ("LEFT" != Ei.directionSwipe && "RIGHT" != Ei.directionSwipe || (Si.isTutorial2 = !1, new h.a.Tween(this.tutorial.scale).to({ x: 0, y: 0 }, 2e3).easing(h.a.Easing.Elastic.In).start())), this.buttonPause.interactive && Q.justPressed(xe.ESCAPE) && !t && this.buttonPause.simulateClick() } setTotalScore(t) { this.scoreBar.max = t } setStarsPosition(t) { t = [50, 75, 100], this.starsScore = this.calculateValue(t); for (let e = 0; e < this.stars.length; e++) this.stars[e].x = this.posScoreBar + t[e] / 100 * this.widthScoreBar } updateScore(t) { this.scoreBar.updateValue(t, 200), this.updateStars() } updateKeys(t) { t != this.keyNum && (this.keyNum = t, this.keysText.text = "0" + t, this.posEmitter = new fe(this.keysText.x, this.keysText.y), this.emitter.updateOwnerPos(this.posEmitter.x, this.posEmitter.y), this.emitParticle = !0, new h.a.Tween(this.keysBg.scale).to({ x: 1.1, y: 1.1 }, 200).easing(h.a.Easing.Quadratic.InOut).onComplete(() => { new h.a.Tween(this.keysBg.scale).to({ x: 1, y: 1 }, 200).easing(h.a.Easing.Quadratic.InOut).onComplete(() => {}).start() }).start()) } calculateValue(t) { const e = this.scoreBar.max,
                i = new Array; for (let n = 0; n < t.length; n++) i.push(t[n] * e / 100); return i } updateStars() { const t = this.scoreBar.value; for (let e = 0; e < this.starsScore.length; e++) this.starsScore[e] <= t && (this.stars[e].texture = r.Texture.from(`atlas/UI/star${e+1}won.png`), ce.playFX("star" + (e + 1), 0, !0), this.posEmitter = new fe(this.stars[e].x, this.y + this.centerContainer.y + this.stars[e].y), this.emitter.updateOwnerPos(this.posEmitter.x, this.posEmitter.y), this.emitParticle = !0, this.starsScore[e] = this.scoreBar.max, Si.numberStars = e + 1) } onResize(t, e) { he.setScaleRelativeToIdeal(this.centerContainer), he.setScaleRelativeToIdeal(this.levelContainer), he.setScaleRelativeToIdeal(this.pauseContainer), he.setScaleRelativeToIdeal(this.particlesContainer), he.setScaleRelativeToIdeal(this.tutorialContainer), this.centerContainer.x = t / 2, this.centerContainer.y = 0, this.levelContainer.x = 0, this.levelContainer.y = 0, this.pauseContainer.x = t, this.pauseContainer.y = 0, this.tutorialContainer.x = t, this.tutorialContainer.y = e, this.particlesContainer.x = t / 2, this.particlesContainer.y = 0 } } Si.isTutorial = !1, Si.isTutorial2 = !1;
    class Ei extends r.Container { constructor(t = 0) { super(), this.tapCancel = !1, this.popupPauseQuantity = 0, this.cameraY = .3, this.matrixObjects = new Array, this.stageBeetles = new Array, this.stageExtras = new Array, this.solidComplex = new Array, this.storedObjects = new Array, this.win = !1, this.lost = !1, this.paused = !1, this.playState = !0, this.winAnimState = !1, this.pointerReleased = !0, this.score = 0, this.keys = 0, this.starsScore = new Array(3), this.minSwipeDistance = 40, this.currentLevel = t, this.levelsMap = r.Loader.shared.resources.levels.data, this.levelArray = ue.getValue("Levels"), this.maxClickPosition = new fe, this.stageContainer = new r.Container, this.viewport = new ei(he.IDEAL_WIDTH, he.IDEAL_HEIGHT, { addToContent: this.stageContainer, bleedOut: !0, disableDragControls: !0 }), this.background = new ii, this.foreground = new ni, this.particleContainer = new r.Container, this.addChild(this.viewport), this.stageContainer.addChild(this.background), this.stageContainer.addChild(this.foreground), this.stageContainer.addChild(this.particleContainer), this.player = new We(this.particleContainer), this.viewport.scrollTo(0, this.player.y + this.viewport.scrollHeight / 2), this.createTilemapObjects(), this.setZindex(), this.characterA = new ci("a", new fe(this.player.x - 360, this.player.y - 6), 0, 0), this.characterB = new ci("b", new fe(this.player.x + 360, this.player.y + 19), 0, 0), this.stageContainer.addChild(this.characterA), this.stageContainer.addChild(this.characterB), this.interactive = !0, this.on("pointerdown", this.onTapDown, this), this.on("pointerup", this.onTapUp, this), this.on("pointermove", this.onTapMove, this) } setZindex() { this.background.zIndex = -1, this.player.zIndex = 1; for (let t = 0; t < Ei.rows; t++)
                for (let e = 0; e < Ei.columns; e++) { const i = this.matrixObjects[t][e];
                    i instanceof yi && (i.zIndex = 2), (i instanceof li || i instanceof hi || i instanceof ai || i instanceof mi) && (i.zIndex = 3), i instanceof _i && (i.zIndex = 0), i instanceof gi && (i.zIndex = -1) } this.foreground.zIndex = 4, this.particleContainer.zIndex = 5 } update(t) { if (Ei.pauseGame && (Ei.pauseGame = !1, this.pauseGameConfirm()), this.player.row >= this.exitRow && (this.winAnimState = !0, this.player.stateWin = !0, 5 == this.player.column || this.player.finish ? (Ei.directionSwipe = "STOP", this.player.finish = !0) : (this.player.column < 5 && "STOP" == this.player.currentMovement && (Ei.directionSwipe = "RIGHT", this.player.nextMovement(), this.player.matrixReposition()), this.player.column > 5 && "STOP" == this.player.currentMovement && (Ei.directionSwipe = "LEFT", this.player.nextMovement(), this.player.matrixReposition()))), !this.paused && this.playState) { this.player.row == this.exitRow && (this.player.gravity = !1), this.player.update(t), this.characterA.update(this.player.x), this.characterB.update(this.player.x), this.checkCollision(), this.fixVerticalCamera(); for (let e = Ei.rows - 1; e >= 0; e--)
                    for (let i = Ei.columns - 1; i >= 0; i--) { const n = this.matrixObjects[e][i];
                        null == n || n instanceof ci || n.update(t), n instanceof yi && n.tweenKey && (n.zIndex = 5, n.tweenKey = !1, new h.a.Tween(n.position).to({ x: Si.positionKey.x - n.width / 2, y: this.stageContainer.toLocal(new fe(Si.positionKey.x, Si.positionKey.y), this).y }, 300).easing(h.a.Easing.Quadratic.In).delay(0).onComplete(() => { n.finishCollectable(), this.emit("updateUI") }).start()) }
                for (let e = 0; e < this.stageBeetles.length; e++) this.player.dead || this.stageBeetles[e].update(t), this.stageBeetles[e].visible || this.stageBeetles.splice(e, 1) } this.pointerReleased && (Ei.directionSwipe = "NONE", this.player.nextMovementName = "STOP") } fixVerticalCamera() { this.viewport.scrollTo(-this.viewport.scrollWidth / 2, this.player.y - this.viewport.scrollHeight * this.cameraY) } checkCollision() { const t = this.player.posNext.x,
                e = this.player.posNext.y; let i = this.matrixObjects[t][e]; if (i instanceof _i) { let n = e;
                this.player.x < i.x ? n += 1 : n -= 1; const r = this.matrixObjects[t][n];!(null == r || r instanceof pi) || i.fallTime || i.newInTween || null == this.matrixObjects[i.row + 1][i.column] ? (this.player.solid = !0, e > this.player.column ? this.player.solidLeft = !0 : this.player.solidRight = !0) : i instanceof _i && (this.player.dead || (i.pushRollingStone(n * Ei.tile + Ei.offset.x, n), this.player.push = !0)) } i instanceof fi && !this.player.gravity && !this.player.isLanding && !this.player.dead && "STOP" != this.player.currentMovement ? (this.player.drill = !0, this.player.drilling = !0, i instanceof yi ? i.pick || ("Item" == i.typeCollectable ? (this.score += i.onCollisionCollectable(this.player.currentMovement), this.emit("updateUI")) : this.keys += i.onCollisionCollectable(this.player.currentMovement)) : i.onCollision(this.player.currentMovement)) : null == i && (this.player.drill = !1, this.player.drilling = !1), i instanceof mi && i.closed && (this.keys > 0 ? (i.onCollision(), i.zIndex = 0, this.keys--, this.emit("updateUI"), this.player.solid = !1, this.player.drill = !1, this.player.drilling = !1, t > this.player.row && (this.player.gravity = !0)) : this.player.solid = !0), i = this.matrixObjects[this.player.row][e], i instanceof gi && (this.win || "STOP" != this.player.currentMovement || ((new le).to(1e3).onComplete(() => { lt.openPopup(Ze, [this.currentLevel, Si.numberStars]), this.playState = !1, ce.playFX("win", 0, !0), ce.playFX("splash", 2, !0) }).start(), this.player.winState = !0, this.player.finish = !0, this.win = !0, this.score > this.levelArray[this.currentLevel - 1].score && (this.levelArray[this.currentLevel - 1].score = this.score, ue.setValue("Levels", this.levelArray)))); const n = this.matrixObjects[this.player.row][this.player.column];
            n instanceof ui && (n.middleActive || n.switchLever(this.player.direction()), i instanceof ui || this.player.column == e || n.switchLever(this.player.direction())), n instanceof pi && (this.lost || (this.toDie(), ce.playFX("ketchup", 0, !0))); for (let r = 0; r < Ei.rows; r++)
                for (let t = 0; t < Ei.columns; t++) { if (i = this.matrixObjects[r][t], i instanceof li) { const t = new ye.Response;
                        ti.test(this.player.collider, i.collider, t) && i.fallTime && ("UP" != this.directionCollision(t.overlapN) || this.lost || this.toDie()) } i instanceof bi && ti.test(this.player.collider, i.collider) && i.activate && !this.lost && this.toDie(), i instanceof vi && (i.zIndex = i.isPlatform ? 3 : -1), i instanceof ci && (this.player.x < i.x ? i.scale.x = -1 : i.scale.x = 1) }
            if (e < Ei.columns) { const t = this.matrixObjects[this.player.row][this.player.column + 1];
                this.player.solidRight = t instanceof _i ? t instanceof _i && null != this.matrixObjects[this.player.row][this.player.column + 2] : this.moveToSolid(t) } if (e > 0) { const t = this.matrixObjects[this.player.row][this.player.column - 1];
                this.player.solidLeft = t instanceof _i ? t instanceof _i && null != this.matrixObjects[this.player.row][this.player.column - 2] : this.moveToSolid(t) } i = this.matrixObjects[this.player.row + 1][this.player.column], this.moveToSolid(i) || i instanceof _i ? (this.player.solidDown = !0, this.player.gravity = !1) : null != i ? (this.player.solidDown = !1, i.isPlatform ? this.player.gravity = !1 : "STOP" == this.player.currentMovement && (this.player.gravity = !0)) : "STOP" == this.player.currentMovement && (this.player.gravity = !0), i = this.matrixObjects[t][e], (i instanceof li || i instanceof hi) && (this.player.solid = !0, this.player.gravity = !1), i = this.matrixObjects[this.player.row][this.player.column], i instanceof vi && i.isStuck && (this.player.gravity = !0); for (let r = 0; r < this.stageBeetles.length; r++) ti.test(this.player.collider, this.stageBeetles[r].collider) && (this.lost || (this.toDie(), ce.playFX("bug"), this.stageBeetles[r].currentMovement = "STOP")) } moveToSolid(t) { return t instanceof li || t instanceof hi || t instanceof bi || t instanceof mi && 0 == this.keys && t.closed || t instanceof vi && t.isPlatform && !t.isStuck } pauseGameWin() { if (this.popupPauseQuantity < 1) { this.popupPauseQuantity += 1, this.player.spr.currentState.stop(); for (let t = 0; t < this.stageBeetles.length; t++) this.stageBeetles[t].playPauseAnimation(!1), this.stageBeetles[t].update(0); for (let t = 0; t < this.stageExtras.length; t++) this.stageExtras[t].pause(!0); for (let t = 0; t < Ei.rows; t++)
                    for (let e = 0; e < Ei.columns; e++) null != this.matrixObjects[t][e] && (this.matrixObjects[t][e].playPauseAnimation(!1), this.matrixObjects[t][e].update(0)) } } pauseGame() { if (this.player.row < this.exitRow && !this.lost && this.playState && this.popupPauseQuantity < 1) { lt.openPopup(Qe, [this.currentLevel, 700]), this.popupPauseQuantity += 1, this.interactive = !1, this.paused = !0, this.player.pause = !0, this.characterA.pause(!0), this.characterB.pause(!0), this.pointerReleased = !0, this.player.spr.currentState.stop(); for (let t = 0; t < this.stageBeetles.length; t++) this.stageBeetles[t].playPauseAnimation(!1); for (let t = 0; t < this.stageExtras.length; t++) this.stageExtras[t].pause(!0); for (let t = 0; t < Ei.rows; t++)
                    for (let e = 0; e < Ei.columns; e++) { const i = this.matrixObjects[t][e];
                        null != i && (i.playPauseAnimation(!1), i.update(0)) } } } pauseGameConfirm() { if (this.player.row < this.exitRow && !this.lost && this.playState && this.popupPauseQuantity < 1) { this.popupPauseQuantity += 1, this.interactive = !1, this.paused = !0, this.player.pause = !0, this.characterA.pause(!0), this.characterB.pause(!0), this.pointerReleased = !0, this.player.spr.currentState.stop(); for (let t = 0; t < this.stageBeetles.length; t++) this.stageBeetles[t].playPauseAnimation(!1); for (let t = 0; t < this.stageExtras.length; t++) this.stageExtras[t].pause(!0); for (let t = 0; t < Ei.rows; t++)
                    for (let e = 0; e < Ei.columns; e++) { const i = this.matrixObjects[t][e];
                        null != i && (i.playPauseAnimation(!1), i.update(0)) } } } unPauseGame() { this.player.spr.currentState.play(); for (let t = 0; t < this.stageBeetles.length; t++) this.stageBeetles[t].playPauseAnimation(!0); for (let t = 0; t < Ei.rows; t++)
                for (let e = 0; e < Ei.columns; e++) { const i = this.matrixObjects[t][e];
                    null != i && i.playPauseAnimation(!0) }
            for (let t = 0; t < this.stageExtras.length; t++) this.stageExtras[t].pause(!1);
            this.playState && (this.interactive = !0, this.pointerReleased = !0, this.player.pause = !1, this.characterA.pause(!1), this.characterB.pause(!1), this.paused = !1), this.checkCollision(), this.popupPauseQuantity = 0 } toDie() { this.player.lost = !0, this.lost = !0, this.player.zIndex = 4, (new le).to(2e3).onComplete(() => { lt.openPopup(Je, [this.currentLevel]), this.playState = !1, ce.playFX("lose", 0, !0) }).start() } directionCollision(t) { return 0 == Math.abs(t.y) ? t.x < 0 ? "LEFT" : "RIGHT" : t.y < 0 ? "UP" : "DOWN" } createTilemapObjects() { const t = this.levelsMap.layers[this.currentLevel - 1],
                e = t.data,
                i = new Array,
                n = this.levelsMap.tilesets;
            Ei.rows = t.height, Ei.columns = t.width, Ei.offset = new fe(-Ei.tile * Ei.columns / 2 + Ei.tile / 2, Ei.tile / 2 - 275); let s = 0; for (let r = 0; r < Ei.rows; r++) i[r] = new Array(Ei.columns), this.matrixObjects[r] = new Array(Ei.columns); let o = 0,
                a = 0,
                h = 0,
                u = 0; for (let r = 0; r < Ei.rows; r++)
                for (let t = 0; t < Ei.columns; t++) { i[r][t] = e[o], o++, 1 == this.tileId(n, i[r][t]) && (s = Math.max(s, r)); const l = new fe(Ei.tile * t + Ei.offset.x, Ei.tile * r + Ei.offset.y); if (0 != i[r][t] && 58 != i[r][t]) { const e = this.tileName(n, i[r][t]),
                            s = this.tileId(n, i[r][t]); switch (e) {
                            case "Solid":
                                this.matrixObjects[r][t] = new hi(l, r, t, s); break;
                            case "solid-falling":
                                this.matrixObjects[r][t] = new li(l, r, t, s, !0, this.particleContainer, this.continueFall.bind(this)); break;
                            case "dirt":
                                this.matrixObjects[r][t] = new fi(l, r, t, s); break;
                            case "doors":
                                2 == s ? this.matrixObjects[r][t] = new mi(l, r, t, s, this.particleContainer) : 1 == s && (this.matrixObjects[r][t] = new gi(l, r, t, s)); break;
                            case "items":
                                if (s >= 0 && s <= 2) switch (s) {
                                    case 0:
                                        this.matrixObjects[r][t] = new yi(l, r, t, s, this.particleContainer, a), a += 1, a > 2 && (a = 0); break;
                                    case 1:
                                        this.matrixObjects[r][t] = new yi(l, r, t, s, this.particleContainer, h), h += 1, h > 2 && (h = 0); break;
                                    case 2:
                                        this.matrixObjects[r][t] = new yi(l, r, t, s, this.particleContainer, u), u += 1, u > 2 && (u = 0) } else this.matrixObjects[r][t] = new yi(l, r, t, s, this.particleContainer, 0); break;
                            case "traps":
                                this.matrixObjects[r][t] = 4 == s || 10 == s || 16 == s || 22 == s ? new ui(l, r, t, s) : 5 == s || 11 == s || 17 == s || 23 == s ? new vi(l, r, t, s, this.particleContainer, this.stuckTrapdoor.bind(this)) : new bi(l, r, t, s, this.particleContainer); break;
                            case "enemies":
                                3 == s || 7 == s || 11 == s || 15 == s ? this.matrixObjects[r][t] = new pi(l, r, t, s, this.particleContainer) : 10 == s ? this.matrixObjects[r][t] = new _i(l, r, t, s, this.particleContainer, this.continueFall.bind(this)) : 0 != s && 1 != s || (this.matrixObjects[r][t] = null, this.stageBeetles.push(new di(l, r, t, s, 0 == s ? "LEFT" : "RIGHT", this.particleContainer, this.continueFall.bind(this)))); break;
                            case "extra":
                                0 == s && (this.matrixObjects[r][t] = new ci("c", l, r, t)), 1 == s && (this.matrixObjects[r][t] = new ci("d", l, r, t)), 2 == s && (this.matrixObjects[r][t] = new ci("e", l, r, t)), 3 == s && (this.matrixObjects[r][t] = new ci("f", l, r, t)), 4 == s && (this.matrixObjects[r][t] = new ci("g", l, r, t)) } } else this.matrixObjects[r][t] = null, 58 == i[r][t] && this.player.positionPlayer(l, r, t);
                    this.matrixObjects[r][t] && null != this.matrixObjects[r][t] && this.stageContainer.addChild(this.matrixObjects[r][t]) } this.exitRow = s; for (let r = 0; r < Ei.rows; r++)
                for (let t = 0; t < Ei.columns; t++) { const e = this.matrixObjects[r][t];
                    e instanceof gi && (this.foreground.exitFloor.y = e.y - 35), e instanceof ri && e.setMatrix(this.matrixObjects, this.stageContainer, this.exitRow), e instanceof ui && e.createBase(), e instanceof oi && e.setParameters(this.storedObjects, this.solidComplex), e instanceof ci && this.stageExtras.push(e) } this.viewport.scrollLimits = new r.Rectangle(-Number.MAX_VALUE, -1.5 * Ei.tile + Ei.offset.y + 5, Number.MAX_VALUE, Ei.tile * (s + 1.5) + Ei.offset.y + 5); for (let r = 0; r < this.stageBeetles.length; r++) this.stageBeetles[r].setMatrix(this.matrixObjects, this.stageContainer, this.exitRow), this.stageContainer.addChild(this.stageBeetles[r]);
            this.stageContainer.addChild(this.player), this.stageContainer.sortableChildren = !0, this.createSolidShape(), this.totalScore = this.calculateTotalScore() } tileName(t, e) { for (let i = 0; i < t.length - 1; i++)
                if (e >= t[i].firstgid && e < t[i + 1].firstgid) return t[i].name; return t[t.length - 1].name } tileId(t, e) { for (let i = 0; i < t.length - 1; i++)
                if (e >= t[i].firstgid && e < t[i + 1].firstgid) return e - t[i].firstgid; return e - t[t.length - 1].firstgid } onResize(t, e) { he.setScaleRelativeToIdeal(this.viewport), this.viewport.scrollHeight = e / this.viewport.scale.y, this.viewport.scrollWidth = t / this.viewport.scale.x, this.maxClickPosition.x = t, this.maxClickPosition.y = e, this.fixVerticalCamera() } onTapDown(t) { this.clickStart = fe.pixi2Vector2(t.data.getLocalPosition(this, t.data.global)), this.pointerReleased = !1 } onTapUp(t) { if (!this.player.finish && !Si.isTutorial2) { this.clickFinal = fe.pixi2Vector2(t.data.getLocalPosition(this, t.data.global)), this.pointerReleased = !0; const e = Math.abs(this.clickStart.x - this.clickFinal.x),
                    i = Math.abs(this.clickStart.y - this.clickFinal.y);
                this.tapCancel ? this.tapCancel = !1 : (e < this.minSwipeDistance || i < this.minSwipeDistance) && "NONE" == Ei.directionSwipe && (Ei.directionSwipe = "DOWN", Ei.tap = !0) } } onTapMove(t) { if (!this.clickStart || this.pointerReleased || this.player.row == this.exitRow || Si.isTutorial) return void(this.tapCancel = !0);
            this.clickFinal = fe.pixi2Vector2(t.data.getLocalPosition(this, t.data.global)), (this.clickFinal.x < this.minSwipeDistance || this.clickFinal.x > this.maxClickPosition.x - this.minSwipeDistance || this.clickFinal.y < this.minSwipeDistance || this.clickFinal.y > this.maxClickPosition.y - this.minSwipeDistance) && (this.pointerReleased = !0); const e = Math.abs(this.clickStart.x - this.clickFinal.x),
                i = Math.abs(this.clickStart.y - this.clickFinal.y);
            (e > this.minSwipeDistance || i > this.minSwipeDistance) && (e > i ? this.clickFinal.x < this.clickStart.x ? Ei.directionSwipe = "LEFT" : Ei.directionSwipe = "RIGHT" : this.clickFinal.y < this.clickStart.y ? Ei.directionSwipe = "UP" : Ei.directionSwipe = "DOWN") } continueFall(t, e, i) { if (t + 1 == Ei.rows) return !1; const n = this.matrixObjects[t + 1][e]; return t < this.exitRow && (null == n || n instanceof fi && n["delete"]() || n instanceof pi || n instanceof ci || n instanceof vi && !n.activate || !(i instanceof di) && n instanceof li && !n.fall) } stuckTrapdoor(t, e) { let i = !1; if (this.player.column == e) { const e = this.player.gravity && this.player.posNext.x == t,
                    n = this.player.gravity && this.player.row == t;
                i = e || n } for (let n = 0; n < this.stageBeetles.length; n++)
                if (this.stageBeetles[n].row == t && this.stageBeetles[n].column == e) { i = !0; break } return this.matrixObjects[t][e].zIndex = i ? -1 : 3, i } createSolidShape() { for (let t = 0; t < Ei.rows; t++)
                for (let e = 0; e < Ei.columns; e++) { const i = this.matrixObjects[t][e];
                    i instanceof li && (1 == i.id && (this.solidComplex.push(new si("horizontal", this.solidComplex.length, this.continueFall.bind(this))), this.toRight(t, e)), 3 == i.id && (this.solidComplex.push(new si("vertical", this.solidComplex.length, this.continueFall.bind(this))), this.toDown(t, e)), 7 == i.id && (this.solidComplex.push(new si("complex", this.solidComplex.length, this.continueFall.bind(this))), this.toComplex(t, e))) } } toRight(t, e) { for (let i = e; i < Ei.columns; i++) { const e = this.matrixObjects[t][i]; if (e instanceof li && (1 != e.id && 5 != e.id && 2 != e.id || this.solidComplex[this.solidComplex.length - 1].addBrother(e), 2 == e.id)) break } } toDown(t, e) { for (let i = t; i < Ei.rows; i++) { const t = this.matrixObjects[i][e]; if (t instanceof li && (3 != t.id && 6 != t.id && 4 != t.id || this.solidComplex[this.solidComplex.length - 1].addBrother(t), 4 == t.id)) break } } toComplex(t, e) { for (let i = t; i < Ei.rows; i++)
                for (let t = e; t < Ei.columns; t++) { const e = this.matrixObjects[i][t]; if (e instanceof li && (e.id >= 7 && e.id <= 15 && this.solidComplex[this.solidComplex.length - 1].addBrother(e), 10 == e.id)) return } } calculateTotalScore() { let t = 0; for (let e = 0; e < Ei.rows; e++)
                for (let i = 0; i < Ei.columns; i++) { const n = this.matrixObjects[e][i];
                    n instanceof yi && (t += n.rarity) }
            return t } totalScoreLevel() { return this.totalScore } starsScoreLevel() { return this.starsScore } viewportScale() { return this.viewport.scale } keysCollected() { return this.keys } currentScore() { return this.score } } Ei.pauseGame = !1, Ei.tile = 80, Ei.rows = 0, Ei.columns = 0, Ei.directionSwipe = "", Ei.tap = !1;
    class Pi extends s { constructor(t = 0) { super(), this.game = new Ei(t), this.ui = new Si(t, this.game.pauseGame.bind(this.game)), this.addChild(this.game), this.addChild(this.ui), ue.getValue("Music") == undefined && ue.setValue("Music", !0), ue.getValue("Sound") == undefined && ue.setValue("Sound", !0), ce.muteMusic = !ue.getValue("Music"), ce.muteSound = !ue.getValue("Sound"), ce.fade("menu", .7, 500), this.initUI(), this.game.on("updateUI", this.updateUI.bind(this)) } onPopupClose() { this.game.unPauseGame() } update(t) { this.game.paused || (this.game.update(t / 1e3), this.ui.updateParticles(t / 1e3)), this.ui.update(this.game.paused) } onResize(t, e) { this.game.onResize(t, e), this.ui.onResize(t, e) } onPause() {} onResume() {} onDestroy() { this.removeAllListeners() } onFocusLost() { this.game.paused || !this.game.playState || this.game.winAnimState || this.game.lost ? this.game.pauseGameWin() : (Pi.focusLost = !0, this.game.pauseGame()) } initUI() { this.ui.setTotalScore(this.game.totalScoreLevel()), this.ui.setStarsPosition(this.game.starsScoreLevel()) } updateUI() { this.ui.updateKeys(this.game.keysCollected()), this.ui.updateScore(this.game.currentScore()) } } Pi.focusLost = !1;
    class Ci extends s { constructor() { if (super(), this.tweenIn = !0, this.tweenBack = !1, this.buttonNumber = -1, this.maxLevelUnlock = 0, ue.getValue("Music") == undefined && ue.setValue("Music", !0), ue.getValue("Sound") == undefined && ue.setValue("Sound", !0), ce.muteMusic = !ue.getValue("Music"), ce.muteSound = !ue.getValue("Sound"), ce.fade("menu", 1, 500), this.centerContainer = new r.Container, this.settingsButtonContainer = new r.Container, this.backButtonContainer = new r.Container, this.centerContainer.sortableChildren = !0, this.addChild(this.centerContainer), this.addChild(this.backButtonContainer), this.addChild(this.settingsButtonContainer), this.bgSky = r.Sprite.from("atlas/Home/bgSky.png"), this.bgSky.anchor.set(.5), this.bgSky.y = -30, this.centerContainer.addChild(this.bgSky), this.bgSky.angle = Oi.angleSky, this.bg = r.Sprite.from("img/menu/bgCave.png"), this.bg.anchor.set(.5), this.centerContainer.addChild(this.bg), this.btnArray = new Array, this.levelArray = ue.getValue("Levels"), !this.levelArray) { this.levelArray = []; for (let t = 0; t < Oi.MAX_LEVELS; t++) this.levelArray.push({ id: t + 1, stars: 0, score: 0, completed: !1, unblocked: !1 });
                this.levelArray[0].unblocked = !0, ue.setValue("Levels", this.levelArray), ue.save() } ue.setValue("Levels", this.levelArray), ue.save(); for (let e = 0; e < Oi.MAX_LEVELS; e++) this.btnLevel = new pe(() => {
                (this.levelArray[e].unblocked || ot) && (ce.playFX("button"), lt.changeScene(Pi, [this.levelArray[e].id], Ke)) }, !0, this.levelArray[e].id, this.levelArray[e].stars, this.levelArray[e].completed, this.levelArray[e].unblocked), this.btnArray.push(this.btnLevel), this.centerContainer.addChild(this.btnLevel); let t = 0; for (let e = 0; e < 3; e++)
                for (let i = 0; i < 7; i++) this.btnArray[t].x = 3 * -this.btnArray[t].width + i * this.btnArray[t].width + 10, this.btnArray[t].y = -this.btnArray[t].width + e * this.btnArray[t].width + 10, t++; for (let e = 1; e < Oi.MAX_LEVELS; e++) this.levelArray[e - 1].completed && this.levelArray[e].unblocked;
            this.backButton = new ae("atlas/LevelSelector/back.png", "atlas/Home/bgBtn.png", () => { ce.playFX("button"), this.tweenBack = !0 }, !1), this.backButton.x = -this.backButton.height / 2, this.backButton.y = -this.backButton.height / 2, this.settingsButton = new ae("atlas/Home/soundONBtn.png", "atlas/Home/bgBtn.png", () => { lt.isChangingScene || (ce.playFX("button"), this.switchSound(!0)) }, !1); for (let e = 0; e < this.btnArray.length; e++) this.btnArray[e].tweenIn();
            ce.playFX("seth_in"), this.switchSound(!1), this.settingsButton.x = -this.settingsButton.width / 2, this.settingsButton.y = this.settingsButton.height / 2, this.settingsButtonContainer.addChild(this.settingsButton), this.backButtonContainer.addChild(this.backButton); for (let e = 0; e < Oi.MAX_LEVELS; e++) this.levelArray[e].unblocked && (this.maxLevelUnlock = e) } onResize(t, e) { he.setScaleRelativeToIdeal(this.centerContainer), he.setScaleRelativeToIdeal(this.settingsButtonContainer), he.setScaleRelativeToIdeal(this.backButtonContainer), this.centerContainer.x = t / 2, this.centerContainer.y = e / 2, this.settingsButtonContainer.x = t, this.settingsButtonContainer.y = 0, this.backButtonContainer.x = 0, this.backButtonContainer.y = e } switchSound(t = !1) { t && (ce.muteMusic = !ce.muteMusic, ce.muteSound = !ce.muteSound, ce.playFX("button"), ue.setValue("Music", !ce.muteMusic), ue.setValue("Sound", !ce.muteSound), ue.save()), ce.muteMusic ? this.settingsButton.changeSprite("atlas/Home/soundOFFBtn.png") : this.settingsButton.changeSprite("atlas/Home/soundONBtn.png") } update(t) { for (let e = 0; e < this.btnArray.length; e++) this.btnArray[e].update(t), e == this.buttonNumber && e <= this.maxLevelUnlock ? this.btnArray[e].selected = !0 : this.btnArray[e].selected = !1, this.btnArray[e].interactive && this.btnArray[e].selected && (Q.justPressed(xe.ENTER) || Q.justPressed(xe.SPACE)) && this.btnArray[e].simulateClick(); if (this.settingsButton.interactive && (Q.justPressed(xe.KEY_S) || Q.justPressed(xe.KEY_M)) && this.settingsButton.simulateClick(), this.backButton.interactive && Q.justPressed(xe.ESCAPE) && this.backButton.simulateClick(), Q.justPressed(xe.LEFT_ARROW) && (this.buttonNumber > 0 ? this.buttonNumber -= 1 : this.buttonNumber = this.maxLevelUnlock), Q.justPressed(xe.RIGHT_ARROW) && (this.buttonNumber < this.maxLevelUnlock ? this.buttonNumber += 1 : this.buttonNumber = 0), this.bgSky.angle += .05, Oi.angleSky = this.bgSky.angle, this.tweenIn) { this.tweenIn = !1;
                new h.a.Tween(this.backButton).to({ x: this.backButton.height / 2 }, 1e3).easing(h.a.Easing.Quadratic.InOut).delay(0).start() } if (this.tweenBack) { this.tweenBack = !1; for (let t = 0; t < this.btnArray.length; t++) this.btnArray[t].tweenOut();
                ce.playFX("seth_out");
                new h.a.Tween(this.backButton).to({ x: -this.backButton.height / 2 }, 1e3).easing(h.a.Easing.Quadratic.InOut).delay(0).onComplete(() => { lt.changeScene(Oi, [0]) }).start() } } } class Oi extends s { constructor() { super(), this.stateAnim = 0, this.stateAnimOut = 0, this.inTween = !1, this.inAnimationOut = !1; const t = ue.getValue("save");
            ut != t && ue["delete"](), ue.getValue("Music") == undefined && ue.setValue("Music", !0), ue.getValue("Sound") == undefined && ue.setValue("Sound", !0), ce.muteMusic = !ue.getValue("Music"), ce.muteSound = !ue.getValue("Sound"), ce.playMusic("menu", .5), ue.setValue("save", ut), ue.save(), this.centerContainer = new r.Container, this.centerContainer.sortableChildren = !0, this.creditsButtonContainer = new r.Container, this.settingsButtonContainer = new r.Container, this.deleteSavedataButtonContainer = new r.Container, this.fungiesLogoContainer = new r.Container, this.addChild(this.centerContainer), this.bgSky = r.Sprite.from("atlas/Home/bgSky.png"), this.bgSky.anchor.set(.5), this.bgSky.y = -30, this.centerContainer.addChild(this.bgSky), -1 != Oi.angleSky && (this.bgSky.angle = Oi.angleSky), this.body = r.Sprite.from("atlas/Home/body.png"), this.body.anchor.set(.5), this.body.y = 450, this.centerContainer.addChild(this.body), this.eye = r.Sprite.from("atlas/Home/eye.png"), this.eye.anchor.set(.5), this.eye.y = 310, this.eye.scale.set(.5), this.centerContainer.addChild(this.eye), Oi.animationFirstTime ? this.mouth = r.Sprite.from("atlas/Home/mouth1.png") : this.mouth = r.Sprite.from("atlas/Home/mouth2.png"), this.mouth.anchor.set(.5), this.mouth.y = 475, this.centerContainer.addChild(this.mouth), this.hands = r.Sprite.from("atlas/Home/hands.png"), this.hands.anchor.set(.5), this.hands.y = 260, this.centerContainer.addChild(this.hands), this.bg = r.Sprite.from("img/menu/bgCave.png"), this.bg.anchor.set(.5), this.centerContainer.addChild(this.bg), this.fingers = r.Sprite.from("atlas/Home/fingers.png"), this.fingers.anchor.set(.5), this.fingers.y = 200, this.centerContainer.addChild(this.fingers), this.bg2 = r.Sprite.from("img/menu/bgCave.png"), this.bg2.anchor.set(.5), this.centerContainer.addChild(this.bg2), this.gameLogo = new r.Text(re.t("GAME_TITLE"), new r.TextStyle({ fontFamily: "Fancy_font_02", stroke: 0, strokeThickness: 3, fontSize: 70, fill: 16166862 })), this.gameLogo.anchor.set(.5), this.gameLogo.y = -500, this.centerContainer.addChild(this.gameLogo), this.fungiesLogo = r.Sprite.from("atlas/Home/fungiesLogo.png"), this.fungiesLogo.anchor.set(.5), this.fungiesLogo.y = -245, this.fungiesLogo.scale.set(0), this.centerContainer.addChild(this.fungiesLogo), this.startButton = new ae("atlas/Home/BtnPlay.png", "atlas/Home/bgBtnPlay.png", () => { this.inAnimationOut = !0, ce.playFX("button") }, !1), this.startButton.position.set(0, 500), this.startButton.interactive = !1, this.credits = new de("atlas/Home/creditsBtn.png", "atlas/Home/bgBtn.png", re.t("PRODUCED"), re.t("DEVELOPED")), this.creditsButtonContainer.addChild(this.credits), this.addChild(this.creditsButtonContainer), this.addChild(this.settingsButtonContainer), this.addChild(this.deleteSavedataButtonContainer), this.addChild(this.fungiesLogoContainer), this.settingsButton = new ae("atlas/Home/soundONBtn.png", "atlas/Home/bgBtn.png", () => { lt.isChangingScene || (ce.playFX("button"), this.switchSound(!0)) }, !1), this.switchSound(!1), this.settingsButton.interactive = !1, Oi.animationFirstTime ? this.settingsButton.x = this.settingsButton.width / 2 : this.settingsButton.x = -this.settingsButton.width / 2, this.settingsButton.y = this.settingsButton.height / 2, this.settingsButtonContainer.addChild(this.settingsButton), this.centerContainer.addChild(this.startButton) } onResize(t, e) { he.setScaleRelativeToIdeal(this.centerContainer), he.setScaleRelativeToIdeal(this.creditsButtonContainer), he.setScaleRelativeToIdeal(this.settingsButtonContainer), he.setScaleRelativeToIdeal(this.fungiesLogoContainer), this.centerContainer.x = t / 2, this.centerContainer.y = e / 2, this.creditsButtonContainer.x = 0, this.creditsButtonContainer.y = e, this.settingsButtonContainer.x = t, this.settingsButtonContainer.y = 0, this.fungiesLogoContainer.x = t, this.fungiesLogoContainer.y = e } switchSound(t = !1) { t && (ce.muteMusic = !ce.muteMusic, ce.muteSound = !ce.muteSound, ce.playFX("button"), ue.setValue("Music", !ce.muteMusic), ue.setValue("Sound", !ce.muteSound), ue.save()), ce.muteMusic ? this.settingsButton.changeSprite("atlas/Home/soundOFFBtn.png") : this.settingsButton.changeSprite("atlas/Home/soundONBtn.png") } update(t) { if (this.bgSky.angle += .05, Oi.angleSky = this.bgSky.angle, this.startButton.interactive && (Q.justPressed(xe.ENTER) || Q.justPressed(xe.SPACE)) && this.startButton.simulateClick(), this.settingsButton.interactive && (Q.justPressed(xe.KEY_S) || Q.justPressed(xe.KEY_M)) && this.settingsButton.simulateClick(), this.inAnimationOut) { if (this.settingsButton.interactive = !1, this.startButton.interactive = !1, this.credits.interactiveButton(!1), 0 == this.stateAnimOut && !this.inTween) { const t = new h.a.Tween(this.startButton).to({ y: 500 }, 700).easing(h.a.Easing.Quadratic.InOut).delay(0).onComplete(() => { this.inTween = !1 }),
                        e = new h.a.Tween(this.fungiesLogo.scale).to({ x: 0, y: 0 }, 700).easing(h.a.Easing.Quadratic.InOut).delay(10),
                        i = new h.a.Tween(this.gameLogo).to({ y: -500 }, 700).easing(h.a.Easing.Quadratic.InOut).delay(200);
                    this.credits.getOut(); const n = new h.a.Tween(this.credits).to({ x: -this.credits.height / 2 }, 700).easing(h.a.Easing.Quadratic.InOut).delay(0).onComplete(() => { this.inTween = !1 });
                    t.start(), e.start(), i.start(), n.start(), this.stateAnimOut++, this.inTween = !0 } if (1 == this.stateAnimOut && !this.inTween) { const t = new h.a.Tween(this.hands).to({ y: 100 }, 500).easing(h.a.Easing.Quadratic.InOut).delay(0).onComplete(() => { this.bg2.visible = !0, this.inTween = !1 }),
                        e = new h.a.Tween(this.fingers).to({ y: 40 }, 500).easing(h.a.Easing.Quadratic.InOut).delay(0);
                    t.start(), e.start(), this.stateAnimOut++, this.inTween = !0 } if (2 == this.stateAnimOut && !this.inTween) { const t = new h.a.Tween(this.body).to({ y: 450 }, 1e3).easing(h.a.Easing.Quadratic.InOut).delay(0),
                        e = new h.a.Tween(this.eye).to({ y: 310 }, 1e3).easing(h.a.Easing.Quadratic.InOut).delay(0),
                        i = new h.a.Tween(this.mouth).to({ y: 475 }, 1e3).easing(h.a.Easing.Quadratic.InOut).delay(0).onComplete(() => { this.inTween = !1, lt.changeScene(Ci, [0]) });
                    ce.playFX("seth_out", 0, !0); const n = new h.a.Tween(this.hands).to({ y: 260 }, 500).easing(h.a.Easing.Quadratic.InOut).delay(0),
                        r = new h.a.Tween(this.fingers).to({ y: 200 }, 500).easing(h.a.Easing.Quadratic.InOut).delay(0);
                    t.start(), e.start(), i.start(), n.start(), r.start(), this.stateAnimOut++, this.inTween = !0 } } else if (Oi.animationFirstTime) { if (0 == this.stateAnim) { const t = new h.a.Tween(this.hands).to({ y: 100 }, 1e3).easing(h.a.Easing.Quadratic.InOut).delay(500),
                        e = new h.a.Tween(this.fingers).to({ y: 40 }, 1e3).easing(h.a.Easing.Quadratic.InOut).delay(500).onComplete(() => { this.inTween = !1, this.bg2.visible = !1 });
                    t.start(), e.start(), this.stateAnim++, this.inTween = !0 } if (1 == this.stateAnim && !this.inTween) { const t = new h.a.Tween(this.hands).to({ y: 185 }, 1e3).easing(h.a.Easing.Quadratic.InOut).delay(0),
                        e = new h.a.Tween(this.body).to({ y: 70 }, 1500).easing(h.a.Easing.Quadratic.InOut).delay(0),
                        i = new h.a.Tween(this.eye).to({ y: -65 }, 1500).easing(h.a.Easing.Quadratic.InOut).delay(0),
                        n = new h.a.Tween(this.mouth).to({ y: 100 }, 1500).easing(h.a.Easing.Quadratic.InOut).delay(0).onComplete(() => { this.inTween = !1, this.mouth.texture = r.Texture.from("atlas/Home/mouth2.png"), this.mouth.scale.set(.1) });
                    ce.playFX("seth_in", .5, !0); const s = new h.a.Tween(this.fingers).to({ y: 125 }, 1e3).easing(h.a.Easing.Quadratic.InOut).delay(0);
                    t.start(), e.start(), i.start(), n.start(), s.start(), this.stateAnim++, this.inTween = !0 } if (2 == this.stateAnim && !this.inTween) { const t = new h.a.Tween(this.mouth.scale).to({ x: 1, y: 1 }, 900).easing(h.a.Easing.Quadratic.InOut).delay(100).onComplete(() => { this.inTween = !1 });
                    ce.playFX("marimba_up", .25, !0); const e = new h.a.Tween(this.eye.scale).to({ x: 1, y: 1 }, 500).easing(h.a.Easing.Quadratic.InOut).delay(250);
                    t.start(), e.start(), this.stateAnim++, this.inTween = !0 } if (3 == this.stateAnim && !this.inTween) { ce.playFX("win", .25, !0); const t = new h.a.Tween(this.settingsButton).to({ x: -this.settingsButton.width / 2 }, 700).easing(h.a.Easing.Quadratic.InOut).delay(0),
                        e = new h.a.Tween(this.credits).to({ x: this.credits.height / 2 }, 700).easing(h.a.Easing.Quadratic.InOut).delay(0).onComplete(() => { this.inTween = !1 });
                    t.start(), e.start(), this.stateAnim++, this.inTween = !0 } if (4 == this.stateAnim && !this.inTween) { ce.playFX("item3", .5, !0), ce.playFX("item2", .6, !0), ce.playFX("item1", .7, !0); const t = new h.a.Tween(this.fungiesLogo.scale).to({ x: .9, y: .9 }, 700).easing(h.a.Easing.Quadratic.InOut).delay(500),
                        e = new h.a.Tween(this.gameLogo).to({ y: -175 }, 700).easing(h.a.Easing.Quadratic.InOut).delay(0).onComplete(() => { this.inTween = !1 });
                    t.start(), e.start(), this.stateAnim++, this.inTween = !0 } if (5 == this.stateAnim && !this.inTween) { ce.playFX("splash", .5, !0);
                    new h.a.Tween(this.startButton).to({ y: 200 }, 700).easing(h.a.Easing.Quadratic.InOut).delay(0).onComplete(() => { this.inTween = !1, this.settingsButton.interactive = !0, this.startButton.interactive = !0, this.credits.interactiveButton(!0), Oi.animationFirstTime = !1 }).start(), this.stateAnim++, this.inTween = !0 } } else { if (0 == this.stateAnim && !this.inTween) { const t = new h.a.Tween(this.hands).to({ y: 100 }, 500).easing(h.a.Easing.Quadratic.InOut).delay(0).onComplete(() => { this.bg2.visible = !0, this.inTween = !1, this.eye.scale.set(1) }),
                        e = new h.a.Tween(this.fingers).to({ y: 40 }, 500).easing(h.a.Easing.Quadratic.InOut).delay(0),
                        i = new h.a.Tween(this.startButton).to({ y: 200 }, 700).easing(h.a.Easing.Quadratic.InOut).delay(0).onComplete(() => { this.inTween = !1, this.bg2.visible = !1 }),
                        n = new h.a.Tween(this.fungiesLogo.scale).to({ x: .9, y: .9 }, 700).easing(h.a.Easing.Quadratic.InOut).delay(500),
                        r = new h.a.Tween(this.gameLogo).to({ y: -175 }, 700).easing(h.a.Easing.Quadratic.InOut).delay(0),
                        s = new h.a.Tween(this.credits).to({ x: this.credits.height / 2 }, 700).easing(h.a.Easing.Quadratic.InOut).delay(0);
                    t.start(), e.start(), i.start(), n.start(), r.start(), s.start(), this.stateAnim++, this.inTween = !0 } if (1 == this.stateAnim && !this.inTween) { const t = new h.a.Tween(this.body).to({ y: 70 }, 1e3).easing(h.a.Easing.Quadratic.InOut).delay(0),
                        e = new h.a.Tween(this.eye).to({ y: -65 }, 1e3).easing(h.a.Easing.Quadratic.InOut).delay(0),
                        i = new h.a.Tween(this.mouth).to({ y: 100 }, 1e3).easing(h.a.Easing.Quadratic.InOut).delay(0).onComplete(() => { this.inTween = !1, this.settingsButton.interactive = !0, this.startButton.interactive = !0, this.credits.interactiveButton(!0) });
                    ce.playFX("seth_in_fast", .5, !0); const n = new h.a.Tween(this.hands).to({ y: 185 }, 500).easing(h.a.Easing.Quadratic.InOut).delay(0),
                        r = new h.a.Tween(this.fingers).to({ y: 125 }, 500).easing(h.a.Easing.Quadratic.InOut).delay(0);
                    t.start(), e.start(), i.start(), n.start(), r.start(), this.stateAnim++, this.inTween = !0 } } } } Oi.MAX_LEVELS = 21, Oi.angleSky = -1, Oi.animationFirstTime = !0;
    class Ai { static add(...t) { r.LoaderResource.setExtensionLoadType("level", r.LoaderResource.LOAD_TYPE.XHR), r.LoaderResource.setExtensionXhrType("level", r.LoaderResource.XHR_RESPONSE_TYPE.JSON) } static use(t, e) { t.extension, e() } } class Ii extends s { constructor(t) { super(), this.aux = r.Sprite.from(t), this.aux.anchor.set(.5), this.addChild(this.aux) } onResize(t, e) { this.aux.x = t / 2, this.aux.y = e / 2, he.setScaleRelativeToScreen(this.aux, 1, 1, t, e, Math.max) } } var Ri = i(26),
        Mi = i.n(Ri);
    class Li {*[Symbol.iterator]() { for (const t in this) this.hasOwnProperty(t) && (yield this[t]) } } var Di = undefined && undefined.__awaiter || function(t, e, i, n) { return new(i || (i = Promise))((function(r, s) {
            function o(t) { try { h(n.next(t)) } catch (e) { s(e) } }

            function a(t) { try { h(n["throw"](t)) } catch (e) { s(e) } }

            function h(t) { var e;
                t.done ? r(t.value) : (e = t.value, e instanceof i ? e : new i((function(t) { t(e) }))).then(o, a) } h((n = n.apply(t, e || [])).next()) })) };
    window.PIXI = i(0), r.settings.STRICT_TEXTURE_CACHE = !0, r.settings.RESOLUTION = window.devicePixelRatio || 1, r.settings.PRECISION_FRAGMENT = r.PRECISION.HIGH; const ki = new r.Application({ backgroundColor: 0, width: 800, resolution: window.devicePixelRatio || 1, autoDensity: !0, height: 600, autoStart: !1, view: document.getElementById("pixi-canvas"), clearBeforeRender: !0, resizeTo: document.getElementById("pixi-content") }); if (document.getElementById("pixi-content").style.background = "#000000", document.getElementById("pixi-content").appendChild(ki.view), function() { if (window.addEventListener("touchmove", (function(t) { t.preventDefault() }), { capture: !1, passive: !1 }), "undefined" != typeof window.devicePixelRatio && window.devicePixelRatio > 2) { document.getElementById("viewport").setAttribute("content", `width=device-width, initial-scale=${2/window.devicePixelRatio}, user-scalable=no`) } }(), function(t = [37, 38, 39, 40, 13, 32]) { document.addEventListener("keydown", e => { t.includes(e.keyCode) && e.preventDefault() }) }(), lt.initialize(ki), ue.initialize(new class { constructor(t) { this.DEFAULT_SAVESLOT = "SAVEDATA", this.internalMap = new Li, this.cryptoKey = t } xorCrypt(t) { if (!this.cryptoKey) return t; let e = ""; for (let i = 0; i < t.length; ++i) e += String.fromCharCode(t.charCodeAt(i) ^ this.cryptoKey.charCodeAt(i % this.cryptoKey.length)); return e } save(t) { return Di(this, void 0, void 0, (function*() { t || (t = this.DEFAULT_SAVESLOT), yield Mi.a.setItem(t, this.xorCrypt(JSON.stringify(this.internalMap))) })) } load(t) { return Di(this, void 0, void 0, (function*() { t || (t = this.DEFAULT_SAVESLOT); try { this.internalMap = JSON.parse(this.xorCrypt(yield Mi.a.getItem(t))), this.internalMap || (this.internalMap = new Li) } catch (e) { this["delete"](t) } })) }
            "delete"(t) { return Di(this, void 0, void 0, (function*() { t || (t = this.DEFAULT_SAVESLOT), this.internalMap = new Li, yield this.save(t) })) } getValue(t) { return this.internalMap[t] } setValue(t, e) { return this.internalMap[t] = e, e } }), ue.load().then(() => { ce.muteMusic = !ue.getValue("Music"), ce.muteSound = !ue.getValue("Sound") }), ot)
        for (const Ni in n);
    window.onresize = () => { const t = Math.max(document.documentElement.clientWidth, window.innerWidth || 0),
            e = Math.max(document.documentElement.clientHeight, window.innerHeight || 0),
            i = Math.min(t / 800, e / 600);
        ki.resizeTo || (ki.view.style.width = Math.floor(800 * i) + "px", ki.view.style.height = Math.floor(600 * i) + "px", ki.view.style.marginLeft = ki.view.style.marginRight = (t - Math.floor(800 * i)) / 2 + "px", ki.view.style.marginTop = ki.view.style.marginBottom = (e - Math.floor(600 * i)) / 2 + "px"), lt.resize(t, e) }, window.dispatchEvent(new Event("resize")), setTimeout(() => window.dispatchEvent(new Event("resize")), 1e3), lt.changeScene(class extends s { constructor() { super(), this.preloaderAssets = [{ name: "background", url: "./preloader/background.png" }, { name: "bar", url: "./preloader/bar.png" }, { name: "logo", url: "./preloader/loaderCNGames.png" }, { name: "play", url: "./preloader/loaderPlay.png" }], this.barContainer = new r.Container, this.barMask = new r.Graphics, this.tweenMask = new h.a.Tween(this.barMask.scale), this.allContainer = new r.Container, this.preloaderReady = !1, r.Loader.registerPlugin(gt), r.Loader.registerPlugin(se), r.Loader.registerPlugin(oe), r.Loader.registerPlugin(Ai); const t = new r.Loader;
            t.defaultQueryString = "v=" + st, t.add(this.preloaderAssets), t.onComplete.once(this.makeLoader, this), t.load() } progress(t) { const e = h.a.Easing.Circular.In(t.progress / 100);
            this.tweenMask.stop(), this.tweenMask = new h.a.Tween(this.barMask.scale).to({ x: e }, 100).easing(h.a.Easing.Linear.None).start() } makeLoader() { this.addChild(this.allContainer), this.bg = r.Sprite.from("background"), this.allContainer.addChild(this.bg), this.bar = r.Sprite.from("bar"), this.bar.anchor.set(.5, 0), this.barContainer.x = this.allContainer.width / 2, this.barContainer.y = this.allContainer.height / 2, this.barContainer.addChild(this.bar), this.allContainer.addChildAt(this.barContainer, 0), this.barContainer.mask = this.barMask, this.barMask.beginFill(1044480, 1), this.barMask.drawRect(0, 0, this.bar.width - 104, this.bar.height), this.barMask.x = -this.bar.width / 2 + 52, this.barMask.scale.x = 0, this.barContainer.addChild(this.barMask), this.logo = r.Sprite.from("logo"), this.logo.anchor.set(.5), this.logo.x = this.allContainer.width / 2, this.logo.y = this.allContainer.height / 4, this.logo.scale.set(.8), this.allContainer.addChild(this.logo), this.play = new ae("play", null, () => { try { q.resumeAll() } catch (t) {} ce.playFX("button"), lt.changeScene(Oi, [!1], Ke) }, !0), this.play.x = this.allContainer.width / 2, this.play.y = 3 * this.allContainer.height / 4, this.play.scale.set(.5), this.play.visible = !1, this.play.interactive = !1, this.allContainer.addChild(this.play), this.preloaderReady = !0, r.Loader.shared.defaultQueryString = "v=" + st, r.Loader.shared.add(ct).add(pt).add(dt), r.Loader.shared.onProgress.add(this.progress, this), r.Loader.shared.onComplete.once(this.startGame, this), r.Loader.shared.load(), this.onResize(lt.WIDTH, lt.HEIGHT) } update(t) { this.preloaderReady && (this.play.interactive && Q.justPressedAny() && this.play.simulateClick(), this.bar.x += .1 * t, this.bar.x >= 52 && (this.bar.x = 0)) } startGame() { this.play.visible = !0, this.play.interactive = !0, lt.setRotateScene("landscape", Ii, ["rotateScreen"]), r.BitmapFont.from("Arial 35", { fill: "white", fontSize: 35, fontFamily: "Arial Rounded MT" }), r.BitmapFont.from("Arial 40", { fill: "white", fontSize: 40, fontFamily: "Arial Rounded MT" }), r.BitmapFont.from("Lubalin 10", { fill: "white", fontSize: 10, fontFamily: "LubalinGraphITCTurnerAraBold" }), r.BitmapFont.from("Fancy 40", { fill: "white", fontSize: 40, fontFamily: "Fancy_font_02" }) } onResize(t, e) { he.setScaleRelativeToIdeal(this, 640, 480), this.position.set((t - this.width) / 2, (e - this.height) / 2) } }) }]);