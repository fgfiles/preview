(function e(t,n,r){function i(a,o){if(!n[a]){if(!t[a]){var u=typeof require=="function"&&require;if(!o&&u)return u(a,!0);if(s)return s(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[a].exports}var s=typeof require=="function"&&require;for(var a=0;a<r.length;a++)i(r[a]);return i})({1:[function(e,t,n){(function(e){function t(e,t){var n=0;for(var r=e.length-1;r>=0;r--){var i=e[r];if(i==="."){e.splice(r,1)}else if(i===".."){e.splice(r,1);n++}else if(n){e.splice(r,1);n--}}if(t){for(;n--;n){e.unshift("..")}}return e}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;var i=function(e){return r.exec(e).slice(1)};n.resolve=function(){var n="",r=false;for(var i=arguments.length-1;i>=-1&&!r;i--){var a=i>=0?arguments[i]:e.cwd();if(typeof a!=="string"){throw new TypeError("Arguments to path.resolve must be strings")}else if(!a){continue}n=a+"/"+n;r=a.charAt(0)==="/"}n=t(s(n.split("/"),function(e){return!!e}),!r).join("/");return(r?"/":"")+n||"."};n.normalize=function(e){var r=n.isAbsolute(e),i=a(e,-1)==="/";e=t(s(e.split("/"),function(e){return!!e}),!r).join("/");if(!e&&!r){e="."}if(e&&i){e+="/"}return(r?"/":"")+e};n.isAbsolute=function(e){return e.charAt(0)==="/"};n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(s(e,function(e,t){if(typeof e!=="string"){throw new TypeError("Arguments to path.join must be strings")}return e}).join("/"))};n.relative=function(e,t){e=n.resolve(e).substr(1);t=n.resolve(t).substr(1);function r(e){var t=0;for(;t<e.length;t++){if(e[t]!=="")break}var n=e.length-1;for(;n>=0;n--){if(e[n]!=="")break}if(t>n)return[];return e.slice(t,n-t+1)}var i=r(e.split("/"));var s=r(t.split("/"));var a=Math.min(i.length,s.length);var o=a;for(var u=0;u<a;u++){if(i[u]!==s[u]){o=u;break}}var c=[];for(var u=o;u<i.length;u++){c.push("..")}c=c.concat(s.slice(o));return c.join("/")};n.sep="/";n.delimiter=":";n.dirname=function(e){var t=i(e),n=t[0],r=t[1];if(!n&&!r){return"."}if(r){r=r.substr(0,r.length-1)}return n+r};n.basename=function(e,t){var n=i(e)[2];if(t&&n.substr(-1*t.length)===t){n=n.substr(0,n.length-t.length)}return n};n.extname=function(e){return i(e)[3]};function s(e,t){if(e.filter)return e.filter(t);var n=[];for(var r=0;r<e.length;r++){if(t(e[r],r,e))n.push(e[r])}return n}var a="ab".substr(-1)==="b"?function(e,t,n){return e.substr(t,n)}:function(e,t,n){if(t<0)t=e.length+t;return e.substr(t,n)}}).call(this,e("2"))},{2:2}],2:[function(e,t,n){var r=t.exports={};var i=[];var s=false;function a(){if(s){return}s=true;var e;var t=i.length;while(t){e=i;i=[];var n=-1;while(++n<t){e[n]()}t=i.length}s=false}r.nextTick=function(e){i.push(e);if(!s){setTimeout(a,0)}};r.title="browser";r.browser=true;r.env={};r.argv=[];r.version="";r.versions={};function o(){}r.on=o;r.addListener=o;r.once=o;r.off=o;r.removeListener=o;r.removeAllListeners=o;r.emit=o;r.binding=function(e){throw new Error("process.binding is not supported")};r.cwd=function(){return"/"};r.chdir=function(e){throw new Error("process.chdir is not supported")};r.umask=function(){return 0}},{}],3:[function(e,t,n){(function(r,i){"use strict";if(typeof define==="function"&&define.amd){define(["eventEmitter/EventEmitter","eventie/eventie"],function(e,t){return i(r,e,t)})}else if(typeof n==="object"){t.exports=i(r,e("5"),e("4"))}else{r.imagesLoaded=i(r,r.EventEmitter,r.eventie)}})(window,function r(e,t,n){"use strict";var r=e.jQuery;var i=e.console;var s=typeof i!=="undefined";function a(e,t){for(var n in t){e[n]=t[n]}return e}var o=Object.prototype.toString;function u(e){return o.call(e)==="[object Array]"}function c(e){var t=[];if(u(e)){t=e}else if(typeof e.length==="number"){for(var n=0,r=e.length;n<r;n++){t.push(e[n])}}else{t.push(e)}return t}function l(e,t,n){if(!(this instanceof l)){return new l(e,t)}if(typeof e==="string"){e=document.querySelectorAll(e)}this.elements=c(e);this.options=a({},this.options);if(typeof t==="function"){n=t}else{a(this.options,t)}if(n){this.on("always",n)}this.getImages();if(r){this.jqDeferred=new r.Deferred}var i=this;setTimeout(function(){i.check()})}l.prototype=new t;l.prototype.options={};l.prototype.getImages=function(){this.images=[];for(var e=0,t=this.elements.length;e<t;e++){var n=this.elements[e];if(n.nodeName==="IMG"){this.addImage(n)}var r=n.nodeType;if(!r||!(r===1||r===9||r===11)){continue}var i=n.querySelectorAll("img");for(var s=0,a=i.length;s<a;s++){var o=i[s];this.addImage(o)}}};l.prototype.addImage=function(e){var t=new h(e);this.images.push(t)};l.prototype.check=function(){var e=this;var t=0;var n=this.images.length;this.hasAnyBroken=false;if(!n){this.complete();return}function r(r,a){if(e.options.debug&&s){i.log("confirm",r,a)}e.progress(r);t++;if(t===n){e.complete()}return true}for(var a=0;a<n;a++){var o=this.images[a];o.on("confirm",r);o.check()}};l.prototype.progress=function(e){this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded;var t=this;setTimeout(function(){t.emit("progress",t,e);if(t.jqDeferred&&t.jqDeferred.notify){t.jqDeferred.notify(t,e)}})};l.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";this.isComplete=true;var t=this;setTimeout(function(){t.emit(e,t);t.emit("always",t);if(t.jqDeferred){var n=t.hasAnyBroken?"reject":"resolve";t.jqDeferred[n](t)}})};if(r){r.fn.imagesLoaded=function(e,t){var n=new l(this,e,t);return n.jqDeferred.promise(r(this))}}function h(e){this.img=e}h.prototype=new t;h.prototype.check=function(){var e=d[this.img.src]||new p(this.img.src);if(e.isConfirmed){this.confirm(e.isLoaded,"cached was confirmed");return}if(this.img.complete&&this.img.naturalWidth!==undefined){this.confirm(this.img.naturalWidth!==0,"naturalWidth");return}var t=this;e.on("confirm",function(e,n){t.confirm(e.isLoaded,n);return true});e.check()};h.prototype.confirm=function(e,t){this.isLoaded=e;this.emit("confirm",this,t)};var d={};function p(e){this.src=e;d[e]=this}p.prototype=new t;p.prototype.check=function(){if(this.isChecked){return}var e=new Image;n.bind(e,"load",this);n.bind(e,"error",this);e.src=this.src;this.isChecked=true};p.prototype.handleEvent=function(e){var t="on"+e.type;if(this[t]){this[t](e)}};p.prototype.onload=function(e){this.confirm(true,"onload");this.unbindProxyEvents(e)};p.prototype.onerror=function(e){this.confirm(false,"onerror");this.unbindProxyEvents(e)};p.prototype.confirm=function(e,t){this.isConfirmed=true;this.isLoaded=e;this.emit("confirm",this,t)};p.prototype.unbindProxyEvents=function(e){n.unbind(e.target,"load",this);n.unbind(e.target,"error",this)};return l})},{4:4,5:5}],4:[function(e,t,n){(function(e){"use strict";var r=document.documentElement;var i=function(){};function s(t){var n=e.event;n.target=n.target||n.srcElement||t;return n}if(r.addEventListener){i=function(e,t,n){e.addEventListener(t,n,false)}}else if(r.attachEvent){i=function(e,t,n){e[t+n]=n.handleEvent?function(){var t=s(e);n.handleEvent.call(n,t)}:function(){var t=s(e);n.call(e,t)};e.attachEvent("on"+t,e[t+n])}}var a=function(){};if(r.removeEventListener){a=function(e,t,n){e.removeEventListener(t,n,false)}}else if(r.detachEvent){a=function(e,t,n){e.detachEvent("on"+t,e[t+n]);try{delete e[t+n]}catch(r){e[t+n]=undefined}}}var o={bind:i,unbind:a};if(typeof define==="function"&&define.amd){define(o)}else if(typeof n==="object"){t.exports=o}else{e.eventie=o}})(window)},{}],5:[function(e,t,n){(function(){"use strict";function e(){}var n=e.prototype;var r=this;var i=r.EventEmitter;function s(e,t){var n=e.length;while(n--){if(e[n].listener===t){return n}}return-1}function a(e){return function t(){return this[e].apply(this,arguments)}}n.getListeners=function o(e){var t=this._getEvents();var n;var r;if(e instanceof RegExp){n={};for(r in t){if(t.hasOwnProperty(r)&&e.test(r)){n[r]=t[r]}}}else{n=t[e]||(t[e]=[])}return n};n.flattenListeners=function u(e){var t=[];var n;for(n=0;n<e.length;n+=1){t.push(e[n].listener)}return t};n.getListenersAsObject=function c(e){var t=this.getListeners(e);var n;if(t instanceof Array){n={};n[e]=t}return n||t};n.addListener=function l(e,t){var n=this.getListenersAsObject(e);var r=typeof t==="object";var i;for(i in n){if(n.hasOwnProperty(i)&&s(n[i],t)===-1){n[i].push(r?t:{listener:t,once:false})}}return this};n.on=a("addListener");n.addOnceListener=function h(e,t){return this.addListener(e,{listener:t,once:true})};n.once=a("addOnceListener");n.defineEvent=function d(e){this.getListeners(e);return this};n.defineEvents=function p(e){for(var t=0;t<e.length;t+=1){this.defineEvent(e[t])}return this};n.removeListener=function f(e,t){var n=this.getListenersAsObject(e);var r;var i;for(i in n){if(n.hasOwnProperty(i)){r=s(n[i],t);if(r!==-1){n[i].splice(r,1)}}}return this};n.off=a("removeListener");n.addListeners=function v(e,t){return this.manipulateListeners(false,e,t)};n.removeListeners=function g(e,t){return this.manipulateListeners(true,e,t)};n.manipulateListeners=function _(e,t,n){var r;var i;var s=e?this.removeListener:this.addListener;var a=e?this.removeListeners:this.addListeners;if(typeof t==="object"&&!(t instanceof RegExp)){for(r in t){if(t.hasOwnProperty(r)&&(i=t[r])){if(typeof i==="function"){s.call(this,r,i)}else{a.call(this,r,i)}}}}else{r=n.length;while(r--){s.call(this,t,n[r])}}return this};n.removeEvent=function m(e){var t=typeof e;var n=this._getEvents();var r;if(t==="string"){delete n[e]}else if(e instanceof RegExp){for(r in n){if(n.hasOwnProperty(r)&&e.test(r)){delete n[r]}}}else{delete this._events}return this};n.removeAllListeners=a("removeEvent");n.emitEvent=function y(e,t){var n=this.getListenersAsObject(e);var r;var i;var s;var a;for(s in n){if(n.hasOwnProperty(s)){i=n[s].length;while(i--){r=n[s][i];if(r.once===true){this.removeListener(e,r.listener)}a=r.listener.apply(this,t||[]);if(a===this._getOnceReturnValue()){this.removeListener(e,r.listener)}}}}return this};n.trigger=a("emitEvent");n.emit=function b(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)};n.setOnceReturnValue=function w(e){this._onceReturnValue=e;return this};n._getOnceReturnValue=function E(){if(this.hasOwnProperty("_onceReturnValue")){return this._onceReturnValue}else{return true}};n._getEvents=function S(){return this._events||(this._events={})};e.noConflict=function j(){r.EventEmitter=i;return e};if(typeof define==="function"&&define.amd){define(function(){return e})}else if(typeof t==="object"&&t.exports){t.exports=e}else{r.EventEmitter=e}}).call(this)},{}],6:[function(e,t,n){var r=e("1");var i=e("9");var s=e("7");var a=e("8");var n=t.exports=function(){var e=s(arguments).map(u);return o(e[0])?i.apply(i,e):r.join.apply(r,e)};var o=n.isUrl=function(e){return a(e)||e==="http://"||e==="https://"||e==="ftp://"};var u=n.replaceUndefined=function(e,t,n){return e===undefined||e===null?o(n[0])?"/":r.sep:e}},{1:1,7:7,8:8,9:9}],7:[function(e,t,n){t.exports=function(e,t){if(!e){e=[]}if(i(e)){e=[].splice.call(e,0)}if(r(e)&&t){e=s(e)}return Array.isArray(e)?e:[e]};function r(e){return Object.prototype.toString.call(e)==="[object Object]"}function i(e){return Object.prototype.toString.call(e)==="[object Arguments]"}function s(e){return Object.keys(e).map(function(t){return e[t]})}},{}],8:[function(e,t,n){t.exports=i;var r=/^(?:\w+:)?\/\/([^\s\.]+\.\S{2}|localhost[\:?\d]*)\S*$/;function i(e){return r.test(e)}},{}],9:[function(e,t,n){function r(e){return e.replace(/[\/]+/g,"/").replace(/\/\?/g,"?").replace(/\/\#/g,"#").replace(/\:\//g,"://")}t.exports=function(){var e=[].slice.call(arguments,0).join("/");return r(e)}},{}],10:[function(e,t,n){t.exports=function a(e,t,n){var a=document.head||document.getElementsByTagName("head")[0];var o=document.createElement("script");if(typeof t==="function"){n=t;t={}}t=t||{};n=n||function(){};o.type=t.type||"text/javascript";o.charset=t.charset||"utf8";o.async="async"in t?!!t.async:true;o.src=e;if(t.attrs){r(o,t.attrs)}if(t.text){o.text=""+t.text}var u="onload"in o?i:s;u(o,n);if(!o.onload){i(o,n)}a.appendChild(o)};function r(e,t){for(var n in t){e.setAttribute(n,t[n])}}function i(e,t){e.onload=function(){this.onerror=this.onload=null;t(null,e)};e.onerror=function(){this.onerror=this.onload=null;t(new Error("Failed to load "+this.src),e)}}function s(e,t){e.onreadystatechange=function(){if(this.readyState!="complete"&&this.readyState!="loaded")return;this.onreadystatechange=null;t(null,e)}}},{}],11:[function(e,t,n){(function(){var e={};(function(){"use strict";function t(e,n,r){var i=function(){};i.prototype=e.prototype;var s=new i;var a=/xyz/.test(function(){xyz})?/\bparent\b/:/.*/;r=r||{};for(var o in r){var u=r[o];var c=s[o];if(typeof c==="function"&&typeof u==="function"&&a.test(u)){s[o]=function(e,t){return function(){var n=this.parent;this.parent=t;var r=e.apply(this,arguments);this.parent=n;return r}}(u,c)}else{s[o]=u}}s.typename=n;var l=function(){if(s.init){s.init.apply(this,arguments)}};l.prototype=s;l.prototype.constructor=l;l.extend=function(e,n){if(typeof e==="object"){n=e;e="anonymous"}return t(l,e,n)};return l}e["object"]=t(Object,"Object",{})})();(function(){"use strict";var t=Array.prototype;var n=Object.prototype;var r={"&":"&amp;",'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;"};var i=/[&"'<>]/g;var s=function(e){return r[e]};var a=e["lib"]={};a.withPrettyErrors=function(e,t,n){try{return n()}catch(r){if(!r.Update){r=new a.TemplateError(r)}r.Update(e);if(!t){var i=r;r=new Error(i.message);r.name=i.name}throw r}};a.TemplateError=function(e,t,n){var r=this;if(e instanceof Error){r=e;e=e.name+": "+e.message}else{if(Error.captureStackTrace){Error.captureStackTrace(r)}}r.name="Template render error";r.message=e;r.lineno=t;r.colno=n;r.firstUpdate=true;r.Update=function(e){var t="("+(e||"unknown path")+")";if(this.firstUpdate){if(this.lineno&&this.colno){t+=" [Line "+this.lineno+", Column "+this.colno+"]"}else if(this.lineno){t+=" [Line "+this.lineno+"]"}}t+="\n ";if(this.firstUpdate){t+=" "}this.message=t+(this.message||"");this.firstUpdate=false;return this};return r};a.TemplateError.prototype=Error.prototype;a.escape=function(e){return e.replace(i,s)};a.isFunction=function(e){return n.toString.call(e)==="[object Function]"};a.isArray=Array.isArray||function(e){return n.toString.call(e)==="[object Array]"};a.isString=function(e){return n.toString.call(e)==="[object String]"};a.isObject=function(e){return n.toString.call(e)==="[object Object]"};a.groupBy=function(e,t){var n={};var r=a.isFunction(t)?t:function(e){return e[t]};for(var i=0;i<e.length;i++){var s=e[i];var o=r(s,i);(n[o]||(n[o]=[])).push(s)}return n};a.toArray=function(e){return Array.prototype.slice.call(e)};a.without=function(e){var t=[];if(!e){return t}var n=-1,r=e.length,i=a.toArray(arguments).slice(1);while(++n<r){if(a.indexOf(i,e[n])===-1){t.push(e[n])}}return t};a.extend=function(e,t){for(var n in t){e[n]=t[n]}return e};a.repeat=function(e,t){var n="";for(var r=0;r<t;r++){n+=e}return n};a.each=function(e,n,r){if(e==null){return}if(t.each&&e.each===t.each){e.forEach(n,r)}else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++){n.call(r,e[i],i,e)}}};a.map=function(e,n){var r=[];if(e==null){return r}if(t.map&&e.map===t.map){return e.map(n)}for(var i=0;i<e.length;i++){r[r.length]=n(e[i],i)}if(e.length===+e.length){r.length=e.length}return r};a.asyncIter=function(e,t,n){var r=-1;function i(){r++;if(r<e.length){t(e[r],r,i,n)}else{n()}}i()};a.asyncFor=function(e,t,n){var r=a.keys(e);var i=r.length;var s=-1;function o(){s++;var a=r[s];if(s<i){t(a,e[a],s,i,o)}else{n()}}o()};a.indexOf=Array.prototype.indexOf?function(e,t,n){return Array.prototype.indexOf.call(e,t,n)}:function(e,t,n){var r=this.length>>>0;n=+n||0;if(Math.abs(n)===Infinity){n=0}if(n<0){n+=r;if(n<0){n=0}}for(;n<r;n++){if(e[n]===t){return n}}return-1};if(!Array.prototype.map){Array.prototype.map=function(){throw new Error("map is unimplemented for this js engine")}}a.keys=function(e){if(Object.prototype.keys){return e.keys()}else{var t=[];for(var n in e){if(e.hasOwnProperty(n)){t.push(n)}}return t}}})();(function(){"use strict";var t=e["lib"];var n=e["object"];var r=n.extend({init:function(e){this.variables={};this.parent=e},set:function(e,t,n){var r=e.split(".");var i=this.variables;var s=this;if(n){if(s=this.resolve(r[0])){s.set(e,t);return}s=this}for(var a=0;a<r.length-1;a++){var o=r[a];if(!i[o]){i[o]={}}i=i[o]}i[r[r.length-1]]=t},get:function(e){var t=this.variables[e];if(t!==undefined&&t!==null){return t}return null},lookup:function(e){var t=this.parent;var n=this.variables[e];if(n!==undefined&&n!==null){return n}return t&&t.lookup(e)},resolve:function(e){var t=this.parent;var n=this.variables[e];if(n!==undefined&&n!==null){return this}return t&&t.resolve(e)},push:function(){return new r(this)},pop:function(){return this.parent}});function i(e,t,n){return function(){var r=o(arguments);var i;var s=a(arguments);if(r>e.length){i=Array.prototype.slice.call(arguments,0,e.length);var u=Array.prototype.slice.call(arguments,i.length,r);for(var c=0;c<u.length;c++){if(c<t.length){s[t[c]]=u[c]}}i.push(s)}else if(r<e.length){i=Array.prototype.slice.call(arguments,0,r);for(var c=r;c<e.length;c++){var l=e[c];i.push(s[l]);delete s[l]}i.push(s)}else{i=arguments}return n.apply(this,i)}}function s(e){e.__keywords=true;return e}function a(e){var t=e.length;if(t){var n=e[t-1];if(n&&n.hasOwnProperty("__keywords")){return n}}return{}}function o(e){var t=e.length;if(t===0){return 0}var n=e[t-1];if(n&&n.hasOwnProperty("__keywords")){return t-1}else{return t}}function u(e){if(typeof e!=="string"){return e}this.val=e}u.prototype=Object.create(String.prototype);u.prototype.valueOf=function(){return this.val};u.prototype.toString=function(){return this.val};function c(e,t){if(e instanceof u){return new u(t)}return t.toString()}function l(e){var t=typeof e;if(t==="string"){return new u(e)}else if(t!=="function"){return e}else{return function(){var t=e.apply(this,arguments);if(typeof t==="string"){return new u(t)}return t}}}function h(e,n){e=e!==undefined&&e!==null?e:"";if(n&&typeof e==="string"){e=t.escape(e)}return e}function d(e,t){e=e||{};if(typeof e[t]==="function"){return function(){return e[t].apply(e,arguments)}}return e[t]}function p(e,t,n){if(!e){throw new Error("Unable to call `"+t+"`, which is undefined or falsey")}else if(typeof e!=="function"){throw new Error("Unable to call `"+t+"`, which is not a function")}return e.apply(this,n)}function f(e,t,n){var r=t.lookup(n);return r!==undefined&&r!==null?r:e.lookup(n)}function v(e,n,r){if(e.lineno){return e}else{return new t.TemplateError(e,n,r)}}function g(e,n,r,i){if(t.isArray(e)){var s=e.length;t.asyncIter(e,function(e,t,i){switch(n){case 1:r(e,t,s,i);break;case 2:r(e[0],e[1],t,s,i);break;case 3:r(e[0],e[1],e[2],t,s,i);break;default:e.push(t,i);r.apply(this,e)}},i)}else{t.asyncFor(e,function(e,t,n,i,s){r(e,t,n,i,s)},i)}}function _(e,n,r,i){var s=0;var a;var o;function u(e,t){s++;o[e]=t;if(s===a){i(null,o.join(""))}}if(t.isArray(e)){a=e.length;o=new Array(a);if(a===0){i(null,"")}else{for(var c=0;c<e.length;c++){var l=e[c];switch(n){case 1:r(l,c,a,u);break;case 2:r(l[0],l[1],c,a,u);break;case 3:r(l[0],l[1],l[2],c,a,u);break;default:l.push(c,u);r.apply(this,l)}}}}else{var h=t.keys(e);a=h.length;o=new Array(a);if(a===0){i(null,"")}else{for(var c=0;c<h.length;c++){var d=h[c];r(d,e[d],c,a,u)}}}}e["runtime"]={Frame:r,makeMacro:i,makeKeywordArgs:s,numArgs:o,suppressValue:h,memberLookup:d,contextOrFrameLookup:f,callWrap:p,handleError:v,isArray:t.isArray,keys:t.keys,SafeString:u,copySafeness:c,markSafe:l,asyncEach:g,asyncAll:_}})();(function(){"use strict";var t=e["path"];var n=e["object"];var r=e["lib"];var i=n.extend({on:function(e,t){this.listeners=this.listeners||{};this.listeners[e]=this.listeners[e]||[];this.listeners[e].push(t)},emit:function(e){var t=Array.prototype.slice.call(arguments,1);if(this.listeners&&this.listeners[e]){r.each(this.listeners[e],function(e){e.apply(null,t)})}},resolve:function(e,n){return t.resolve(t.dirname(e),n)},isRelative:function(e){return e.indexOf("./")===0||e.indexOf("../")===0}});e["loader"]=i})();(function(){"use strict";var t=e["loader"];var n=t.extend({init:function(e,t){this.precompiled=window.nunjucksPrecompiled||{};this.baseURL=e||"";this.neverUpdate=t},getSource:function(e){if(this.precompiled[e]){return{src:{type:"code",obj:this.precompiled[e]},path:e}}else{var t=this.fetch(this.baseURL+"/"+e);if(!t){return null}return{src:t,path:e,noCache:!this.neverUpdate}}},fetch:function(e,t){var n;var r=true;var i;if(window.XMLHttpRequest){n=new XMLHttpRequest}else if(window.ActiveXObject){n=new ActiveXObject("Microsoft.XMLHTTP")}n.onreadystatechange=function(){if(n.readyState===4&&(n.status===0||n.status===200)&&r){r=false;i=n.responseText}};e+=(e.indexOf("?")===-1?"?":"&")+"s="+(new Date).getTime();n.open("GET",e,false);n.send();return i}});e["web-loaders"]={WebLoader:n}})();(function(){if(typeof window==="undefined"||window!==this){e["loaders"]=e["node-loaders"]}else{e["loaders"]=e["web-loaders"]}})();(function(){"use strict";var t=e["lib"];var n=e["runtime"];var r={abs:function(e){return Math.abs(e)},batch:function(e,t,n){var r=[];var i=[];for(var s=0;s<e.length;s++){if(s%t===0&&i.length){r.push(i);i=[]}i.push(e[s])}if(i.length){if(n){for(var s=i.length;s<t;s++){i.push(n)}}r.push(i)}return r},capitalize:function(e){var t=e.toLowerCase();return n.copySafeness(e,t.charAt(0).toUpperCase()+t.slice(1))},center:function(e,r){r=r||80;if(e.length>=r){return e}var i=r-e.length;var s=t.repeat(" ",i/2-i%2);var a=t.repeat(" ",i/2);return n.copySafeness(e,s+e+a)},"default":function(e,t){return e?e:t},dictsort:function(e,n,r){if(!t.isObject(e)){throw new t.TemplateError("dictsort filter: val must be an object")}var i=[];for(var s in e){i.push([s,e[s]])}var a;if(r===undefined||r==="key"){a=0}else if(r==="value"){a=1}else{throw new t.TemplateError("dictsort filter: You can only sort by either key or value")}i.sort(function(e,r){var i=e[a];var s=r[a];if(!n){if(t.isString(i)){i=i.toUpperCase()}if(t.isString(s)){s=s.toUpperCase()}}return i>s?1:i===s?0:-1});return i},escape:function(e){if(typeof e==="string"||e instanceof n.SafeString){return t.escape(e)}return e},safe:function(e){return n.markSafe(e)},first:function(e){return e[0]},groupby:function(e,n){return t.groupBy(e,n)},indent:function(e,r,i){r=r||4;var s="";var a=e.split("\n");var o=t.repeat(" ",r);for(var u=0;u<a.length;u++){if(u===0&&!i){s+=a[u]+"\n"}else{s+=o+a[u]+"\n"}}return n.copySafeness(e,s)},join:function(e,n,r){n=n||"";if(r){e=t.map(e,function(e){return e[r]})}return e.join(n)},last:function(e){return e[e.length-1]},length:function(e){return e!==undefined?e.length:0},list:function(e){if(t.isString(e)){return e.split("")}else if(t.isObject(e)){var n=[];if(Object.keys){n=Object.keys(e)}else{for(var r in e){n.push(r)}}return t.map(n,function(t){return{key:t,value:e[t]}})}else if(t.isArray(e)){return e}else{throw new t.TemplateError("list filter: type not iterable")}},lower:function(e){return e.toLowerCase()},random:function(e){return e[Math.floor(Math.random()*e.length)]},rejectattr:function(e,t){return e.filter(function(e){return!e[t]})},selectattr:function(e,t){return e.filter(function(e){return!!e[t]})},replace:function(e,t,r,i){if(t instanceof RegExp){return e.replace(t,r)}var s=e;var a=s;var o=1;s=s.replace(t,r);while(a!==s){if(o>=i){break}a=s;s=s.replace(t,r);o++}return n.copySafeness(e,s)},reverse:function(e){var i;if(t.isString(e)){i=r.list(e)}else{i=t.map(e,function(e){return e})}i.reverse();if(t.isString(e)){return n.copySafeness(e,i.join(""))}return i},round:function(e,t,n){t=t||0;var r=Math.pow(10,t);var i;if(n==="ceil"){i=Math.ceil}else if(n==="floor"){i=Math.floor}else{i=Math.round}return i(e*r)/r},slice:function(e,t,n){var r=Math.floor(e.length/t);var i=e.length%t;var s=0;var a=[];for(var o=0;o<t;o++){var u=s+o*r;if(o<i){s++}var c=s+(o+1)*r;var l=e.slice(u,c);if(n&&o>=i){l.push(n)}a.push(l)}return a},sort:function(e,n,r,i){e=t.map(e,function(e){return e});e.sort(function(e,s){var a,o;if(i){a=e[i];o=s[i]}else{a=e;o=s}if(!r&&t.isString(a)&&t.isString(o)){a=a.toLowerCase();o=o.toLowerCase()}if(a<o){return n?1:-1}else if(a>o){return n?-1:1}else{return 0}});return e},string:function(e){return n.copySafeness(e,e)},title:function(e){var t=e.split(" ");for(var i=0;i<t.length;i++){t[i]=r.capitalize(t[i])}return n.copySafeness(e,t.join(" "))},trim:function(e){return n.copySafeness(e,e.replace(/^\s*|\s*$/g,""))},truncate:function(e,t,r,i){var s=e;t=t||255;if(e.length<=t)return e;if(r){e=e.substring(0,t)}else{var a=e.lastIndexOf(" ",t);if(a===-1){a=t}e=e.substring(0,a)}e+=i!==undefined&&i!==null?i:"...";return n.copySafeness(s,e)},upper:function(e){return e.toUpperCase()},urlencode:function(e){var n=encodeURIComponent;if(t.isString(e)){return n(e)}else{var r;if(t.isArray(e)){r=e.map(function(e){return n(e[0])+"="+n(e[1])})}else{r=[];for(var i in e){if(e.hasOwnProperty(i)){r.push(n(i)+"="+n(e[i]))}}}return r.join("&")}},urlize:function(e,t,n){if(isNaN(t))t=Infinity;var r=n===true?' rel="nofollow"':"";var i=/^(?:\(|<|&lt;)?(.*?)(?:\.|,|\)|\n|&gt;)?$/;var s=/^[\w.!#$%&'*+\-\/=?\^`{|}~]+@[a-z\d\-]+(\.[a-z\d\-]+)+$/i;var a=/^https?:\/\/.*$/;var o=/^www\./;var u=/\.(?:org|net|com)(?:\:|\/|$)/;var c=e.split(/\s+/).filter(function(e){return e&&e.length}).map(function(e){var n=e.match(i);var c=n&&n[1]||e;if(a.test(c))return'<a href="'+c+'"'+r+">"+c.substr(0,t)+"</a>";if(o.test(c))return'<a href="http://'+c+'"'+r+">"+c.substr(0,t)+"</a>";if(s.test(c))return'<a href="mailto:'+c+'">'+c+"</a>";if(u.test(c))return'<a href="http://'+c+'"'+r+">"+c.substr(0,t)+"</a>";return e});return c.join(" ")},wordcount:function(e){var t=e?e.match(/\w+/g):null;return t?t.length:null},"float":function(e,t){var n=parseFloat(e);return isNaN(n)?t:n},"int":function(e,t){var n=parseInt(e,10);return isNaN(n)?t:n}};r.d=r["default"];r.e=r.escape;e["filters"]=r})();(function(){"use strict";function t(e){var t=-1;return{current:null,reset:function(){t=-1;this.current=null},next:function(){t++;if(t>=e.length){t=0}this.current=e[t];return this.current}}}function n(e){e=e||",";var t=true;return function(){var n=t?"":e;t=false;return n}}var r={range:function(e,t,n){if(!t){t=e;e=0;n=1}else if(!n){n=1}var r=[];for(var i=e;i<t;i+=n){r.push(i)}return r},cycler:function(){return t(Array.prototype.slice.call(arguments))},joiner:function(e){return n(e)}};e["globals"]=r})();(function(){"use strict";var t=e["path"];var n=e["lib"];var r=e["object"];var i=e["lexer"];var s=e["compiler"];var a=e["filters"];var o=e["loaders"];var u=e["runtime"];var c=e["globals"];var l=u.Frame;var h=r.extend({init:function(e,t){var t=this.opts=t||{};this.opts.dev=!!t.dev;this.opts.autoescape=!!t.autoescape;this.opts.trimBlocks=!!t.trimBlocks;this.opts.lstripBlocks=!!t.lstripBlocks;if(!e){if(o.FileSystemLoader){this.loaders=[new o.FileSystemLoader("views")]}else{this.loaders=[new o.WebLoader("/views")]}}else{this.loaders=n.isArray(e)?e:[e]}this.initCache();this.filters={};this.asyncFilters=[];this.extensions={};this.extensionsList=[];for(var r in a){this.addFilter(r,a[r])}},initCache:function(){n.each(this.loaders,function(e){e.cache={};if(typeof e.on==="function"){e.on("update",function(t){e.cache[t]=null})}})},addExtension:function(e,t){t._name=e;this.extensions[e]=t;this.extensionsList.push(t)},getExtension:function(e){return this.extensions[e]},addGlobal:function(e,t){c[e]=t},addFilter:function(e,t,n){var r=t;if(n){this.asyncFilters.push(e)}this.filters[e]=r},getFilter:function(e){if(!this.filters[e]){throw new Error("filter not found: "+e)}return this.filters[e]},resolveTemplate:function(e,t,n){var r=e.isRelative&&t?e.isRelative(n):false;return r&&e.resolve?e.resolve(t,n):n},getTemplate:function(e,t,r,i){var s=this;var a=null;if(e&&e.raw){e=e.raw}if(n.isFunction(r)){i=r;r=null;t=t||false}if(n.isFunction(t)){i=t;t=false}if(typeof e!=="string"){throw new Error("template names must be a string: "+e)}for(var o=0;o<this.loaders.length;o++){var u=this.resolveTemplate(this.loaders[o],r,e);a=this.loaders[o].cache[u];if(a)break}if(a){if(t){a.compile()}if(i){i(null,a)}else{return a}}else{var c;n.asyncIter(this.loaders,function(t,n,i,a){function o(e){if(e){e.loader=t;a(e)}else{i()}}e=s.resolveTemplate(t,r,e);if(t.async){t.getSource(e,function(e,t){if(e){throw e}o(t)})}else{o(t.getSource(e))}},function(n){if(!n){var r=new Error("template not found: "+e);if(i){i(r)}else{throw r}}else{var s=new p(n.src,this,n.path,t);if(!n.noCache){n.loader.cache[e]=s}if(i){i(null,s)}else{c=s}}}.bind(this));return c}},express:function(e){var n=this;function r(e,n){this.name=e;this.path=e;this.defaultEngine=n.defaultEngine;this.ext=t.extname(e);if(!this.ext&&!this.defaultEngine)throw new Error("No default engine was specified and no extension was provided.");if(!this.ext)this.name+=this.ext=("."!==this.defaultEngine[0]?".":"")+this.defaultEngine}r.prototype.render=function(e,t){n.render(this.name,e,t)};e.set("view",r)},render:function(e,t,r){if(n.isFunction(t)){r=t;t=null}var i=null;this.getTemplate(e,function(e,n){if(e&&r){r(e)}else if(e){throw e}else{n.render(t,r||function(e,t){if(e){throw e}i=t})}});return i},renderString:function(e,t,r,i){if(n.isFunction(r)){i=r;r={}}r=r||{};var s=new p(e,this,r.path);return s.render(t,i)}});var d=r.extend({init:function(e,t){this.ctx=e;this.blocks={};this.exported=[];for(var n in t){this.addBlock(n,t[n])}},lookup:function(e){if(e in c&&!(e in this.ctx)){return c[e]}else{return this.ctx[e]}},setVariable:function(e,t){this.ctx[e]=t},getVariables:function(){return this.ctx},addBlock:function(e,t){this.blocks[e]=this.blocks[e]||[];this.blocks[e].push(t)},getBlock:function(e){if(!this.blocks[e]){throw new Error('unknown block "'+e+'"')}return this.blocks[e][0]},getSuper:function(e,t,r,i,s,a){var o=n.indexOf(this.blocks[t]||[],r);var u=this.blocks[t][o+1];var c=this;if(o===-1||!u){throw new Error('no super block available for "'+t+'"')}u(e,c,i,s,a)},addExport:function(e){this.exported.push(e)},getExported:function(){var e={};for(var t=0;t<this.exported.length;t++){var n=this.exported[t];e[n]=this.ctx[n]}return e}});var p=r.extend({init:function(e,t,r,i){this.env=t||new h;if(n.isObject(e)){switch(e.type){case"code":this.tmplProps=e.obj;break;case"string":this.tmplStr=e.obj;break}}else if(n.isString(e)){this.tmplStr=e}else{throw new Error("src must be a string or an object describing "+"the source")}this.path=r;if(i){n.withPrettyErrors(this.path,this.env.dev,this._compile.bind(this))}else{this.compiled=false}},render:function(e,t,r){if(typeof e==="function"){r=e;e={}}else if(typeof t==="function"){r=t;t=null}return n.withPrettyErrors(this.path,this.env.dev,function(){try{this.compile()}catch(n){if(r)return r(n);else throw n}var i=new d(e||{},this.blocks);var s=null;this.rootRenderFunc(this.env,i,t||new l,u,r||function(e,t){if(e){throw e}s=t});return s}.bind(this))},getExported:function(e,t,n){if(typeof e==="function"){n=e;e={}}if(typeof t==="function"){n=t;t=null}try{this.compile()}catch(r){if(n)return n(r);else throw r}var i=new d(e||{},this.blocks);this.rootRenderFunc(this.env,i,t||new l,u,function(){n(null,i.getExported())})},compile:function(){if(!this.compiled){this._compile()}},_compile:function(){var e;if(this.tmplProps){e=this.tmplProps}else{var t=s.compile(this.tmplStr,this.env.asyncFilters,this.env.extensionsList,this.path,this.env.opts);var n=new Function(t);e=n()}this.blocks=this._getBlocks(e);this.rootRenderFunc=e.root;this.compiled=true},_getBlocks:function(e){var t={};for(var n in e){if(n.slice(0,2)==="b_"){t[n.slice(2)]=e[n]}}return t}});e["environment"]={Environment:h,Template:p}})();var n;var r=e["lib"];var i=e["environment"];var s=e["compiler"];var a=e["parser"];var o=e["lexer"];var u=e["runtime"];var c=e["loader"];var l=e["loaders"];var h=e["precompile"];n={};n.Environment=i.Environment;n.Template=i.Template;n.Loader=c;n.FileSystemLoader=l.FileSystemLoader;n.WebLoader=l.WebLoader;n.compiler=s;n.parser=a;n.lexer=o;n.runtime=u;var d;n.configure=function(e,t){t=t||{};if(r.isObject(e)){t=e;e=null}var n="watch"in t?!t.watch:false;
var s=l.FileSystemLoader||l.WebLoader;d=new i.Environment(new s(e,n),t);if(t&&t.express){d.express(t.express)}return d};n.compile=function(e,t,r,i){if(!d){n.configure()}return new n.Template(e,t,r,i)};n.render=function(e,t,r){if(!d){n.configure()}return d.render(e,t,r)};n.renderString=function(e,t,r){if(!d){n.configure()}return d.renderString(e,t,r)};if(h){n.precompile=h.precompile;n.precompileString=h.precompileString}n.require=function(t){return e[t]};if(typeof define==="function"&&define.amd){define(function(){return n})}else{window.nunjucks=n;if(typeof t!=="undefined")t.exports=n}})()},{}],12:[function(e,t,n){var r=e("19");var i=e("6");var s=e("13");var a=e("26");var o={sword1:"sword1.mp3",sword2:"sword2.mp3",sword3:"sword3.mp3",footStep1:"footstep1.mp3",footStep2:"footstep2.mp3",footStep3:"footstep3.mp3",footStep4:"step1.mp3",footStep5:"step2.mp3",footStep6:"step3.mp3",footStep7:"step4.mp3",kill:"kill.mp3",hit1:"hit1.mp3",hit2:"hit2.mp3",hit3:"hit3.mp3",grab:"grab.mp3",jarBreak1:"breakpot.mp3",jarBreak2:"breakpot2.mp3",jarBreak3:"breakpot3.mp3",key:"key.mp3",lootPotion:"potion-loot.mp3",drinkPotion:"potion-loot.mp3",explosion:"explosion.mp3",fireball:"fireball.mp3",gold:"gold.mp3",levelExit:"levelexit.mp3",levelCleared:"levelcleared.mp3",buttonClick:"button.mp3",wick:"wick.mp3",hurt1:"hurt1.mp3",hurt2:"hurt2.mp3",hurt3:"hurt3.mp3",bowDraw:"bow-draw.mp3",bowRelease:"bow-release.mp3",gate:"gate.mp3",buy:"buy.mp3",stunSpell:"spell1.mp3",iceSpell:"spell2.mp3",levelStart:"levelstart.mp3",torch:"torch.mp3",fastClick:"click-fast.mp3",hover:"hover.mp3",map:"map.mp3",block:"block.mp3",bump:"bump.mp3",freeze:"freeze.mp3",locked:"locked.mp3",shop:"shop.mp3",popup:"popup.mp3",end:"end.mp3",death:"death.mp3",dying:"dying.mp3"};r.alternateExtensions=["mp3"];var u=false;var c={};var l={loadAll:function(){_.keys(o).forEach(function(e){this.load(e)},this)},load:function(e){var t=new jQuery.Deferred;r.addEventListener("fileload",function(){t.resolve()}.bind(this));r.registerSound(i(s.paths.audio,o[e]),e);return t.promise()},play:function(e,t){r.play(e,{volume:t!==undefined?1-t/8:1,pan:1e-4})},playHit:function(e){this.play(a.getRandomFromArray(["hit1","hit2","hit3"]),e)},playRandomSword:function(){this.play(a.getRandomFromArray(["sword1","sword2","sword3"]))},playFootStep:function(){this.play(a.getRandomFromArray(["footStep4","footStep5","footStep6","footStep7"]))},playHurt:function(){this.play(a.getRandomFromArray(["hurt1","hurt2","hurt3"]))},playJarBreak:function(e){this.play(a.getRandomFromArray(["jarBreak1","jarBreak2","jarBreak3"]),e)},startTorchLoop:function(){this.torchLoop=r.createInstance(i(s.paths.audio,o["torch"]));this.torchVolume=new TWEEN.Tween;this.torchLoop.play({volume:0,loop:-1,pan:1e-4})},stopTorchLoop:function(){this.torchVolume.reset(this.torchLoop).to({volume:0},2e3).onComplete(function(){this.torchLoop.stop()}.bind(this)).start()},setTorchVolume:function(e){this.torchVolume.reset(this.torchLoop).to({volume:1-e/2.5},250).start()},mute:function(){r.muted=true},unmute:function(){r.muted=false},toggle:function(){r.muted=!r.muted},isMuted:function(){return r.muted}};t.exports=l},{13:13,19:19,26:26,6:6}],13:[function(e,t,n){t.exports={UNIT:1,DEBUG:false,AI:true,INVINCIBLE:false,START_LEVEL:1,FPS:false,AUTOPLAY:false,AUDIO:true,INSTALL_PROMPT:true,SKIP_INTRO:false,IGNORE_PIXEL_RATIO:false,PROFILING:false,ALLOW_FULL_SCREEN:true,RESTORE_STATE:true,GOLD:10,SWORD:0,BOW:0,BOMB:0,WAND:0,MAX_ARROWS:20,MAX_BOMBS:10,MAX_POTIONS:99,ANALYTICS:true,WEBGL_DEBUG:false,VERBOSE:false,scripts:{jquery:"jquery-2.1.4.min.js",underscore:"underscore-min.js",backbone:"backbone-min.js",three:"three.min.js",main:"main.min.js",game:"game.min.js"},paths:{stylesheets:"css/",icons:"icons/",scripts:"js/",images:"img/",audio:"audio/",models:"models/",textures:"textures/"}}},{}],14:[function(e,t,n){(function(){(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["about.html"]=function(){function e(e,t,n,r,i){var s=null;var a=null;var o="";try{o+='<div class="about modal large js-about">\n  <div class="inner">\n    <div class="title"><img src="img/common/modals/about.png" alt="About"></div>\n    <div class="content">\n      <div class="text">\n        Keep Out! is a WebGL game experiment. Explore the dungeon, fight monsters and unlock epic weapons! <br><a class="js-ext-link" target="_blank" href="http://www.forestrygames.com/">Read more about the project</a>\n      </div>\n      <div class="credit-block primary">\n        Made by<br>\n        <a class="js-ext-link" href="http://www.forestrygames.com/" target="_blank">Forestry Games</a>\n      </div>\n      <div class="separator"><img src="img/common/modals/separator.png"></div>\n      <div class="ext-link">Follow <a class="js-ext-link" target="_blank" href="https://twitter.com/forestrygames">@ForestryGames</a> for updates</div>\n    </div>\n    <div class="main-button button primary js-close js-hover-sound js-click-sound">Okay</div>\n  </div>\n</div>';i(null,o)}catch(u){i(r.handleError(u,s,a))}}return{root:e}}()})();(function(){(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["home.html"]=function(){function e(e,t,n,r,i){var s=null;var a=null;var o="";try{o+='<div id="main-container">\n  <div class="title-screen js-title-screen">\n    <div class="inner">\n      <img class="logo" src="img/home/logo.png" />\n      <div class="tagline">A Dungeon Adventure for the Brave</div>\n      <div class="ribbon"></div>\n      <div class="content">\n        <div class="button primary play-button js-play-button">\n          <div class="spinner"><img src="img/home/spinner.png"></div>\n        </div>\n        <div class="more-info js-more-info">\n          <div class="icon"></div>\n          <div class="text">More info</div>\n        </div>\n        ';o+='\n      </div>\n      <div class="credit">A WebGL game by <a class="js-ext-link" href="http://www.forestrygames.com/" target="new"><span class="lw-logo" alt="Forestry Games"></span></a></div>\n    </div>\n  </div>\n  ';e.getTemplate("about.html",false,"home.html",function(e,r){if(e){i(e);return}r.render(t.getVariables(),n.push(),function(e,t){if(e){i(e);return}o+=t;o+="\n</div>";i(null,o)})})}catch(u){i(r.handleError(u,s,a))}}return{root:e}}()})();(function(){(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["sharing.html"]=function(){function e(e,t,n,r,i){var s=null;var a=null;var o="";try{o+='<div class="sharing">\n  <div class="title">Share this</div>\n  <div class="share-buttons">\n    <div class="button square twitter js-twitter js-hover-sound js-click-sound js-sharing-button"\n      data-href="https://twitter.com/share?url=http%3A%2F%2Fforestrygames.com&text=Play%20Keep%20Out!&related=bitreserve"\n      data-width="575"\n      data-height="400">\n    </div>\n    <div class="button square facebook js-facebook js-hover-sound js-click-sound js-sharing-button"\n      data-href="https://www.facebook.com/sharer/sharer.php?u=http://www.forestrygames.com"\n      data-width="575"\n      data-height="400">\n    </div>\n    <div class="button square gplus js-gplus js-hover-sound js-click-sound js-sharing-button"\n      data-href="https://plus.google.com/share?url=http://www.forestrygames.com"\n      data-width="575"\n      data-height="400">\n    </div>\n  </div>\n</div>';i(null,o)}catch(u){i(r.handleError(u,s,a))}}return{root:e}}()})()},{}],15:[function(e,t,n){t.exports={common:["modals/about.png","modals/landscape-modal.png","modals/large-modal.png","modals/modal-button.png","modals/portrait-modal.png","modals/separator.png","sharing/facebook.png","sharing/gplus.png","sharing/twitter.png"],game:["button-bg.png","button-big-bg.png","button-square-bg.png","death/skull.png","death/title.png","end/cup.png","end/glow.png","end/ribbon.png","hud/audio-toggle.png","hud/bomb.png","hud/bow.png","hud/coin.png","hud/healthbar-bg.png","hud/healthbar-fill-white.png","hud/healthbar-fill.png","hud/healthbar-glow.png","hud/key.png","hud/map.png","hud/movement.png","hud/potion.png","hud/sword.png","hud/wand.png","hud/wooden-button.png","map-tileset.png","menu-button-burger.png","menu-button-close.png","modals/key-mapping-azerty.png","modals/key-mapping-qwerty.png","modals/key-mapping-qzerty.png","modals/select-arrows.png","popups/bomb.png","popups/bow.png","popups/death.png","popups/potion.png","popups/sword.png","popups/wand.png","shop/coin.png","shop/glow.png","shop/items/bomb.png","shop/items/bow.png","shop/items/sword.png","shop/items/wand.png","shop/left-arrow.png","shop/lock.png","shop/next-glow.png","shop/next.png","shop/purchase.png","shop/purchased.png","shop/right-arrow.png","shop/shop-bg.jpg","shop/sign.png","titles/cleared.png","titles/digits.png","titles/how-to-play.png","titles/level.png","titles/shop.png"],home:["button-continue.png","button.png","info-icon.png","logo.png","lw.png","mobile-ribbon.png","spinner.png","title-mobile-portrait.jpg","title-torch.jpg"]}},{}],16:[function(e,t,n){t.exports={items:["bag","chest","key","potion","quiver"],mobs:["bat","demon","dragon","ghost","mummy","orc","skeleton","zombie"],props:["door","exitdoor","exitframe","gate","jar","skulls","table","tablecandles","tablecloth","tablecup","tableplates","torch","vasegib"],weapons:["arrow","bomb","bow","sword","wand"]}},{}],17:[function(e,t,n){t.exports={effects:["arrowfxcore.png","bone.png","explosion.png","fireball-sprite.png","fireball-trail.png","flake.png","frost.jpg","glitter.png","hurt.png","mob-healthbar.png","smoke-cloud.png","softglow.png","spark.png","star.png","sword-glitter.png","sword-trail-2.png","sword-trail.png","trail-glitter.png"],items:["bag.png","chest.png","key.png","potion.png"],level:["ao-wall.png","envmap/negx.jpg","envmap/negy.jpg","envmap/negz.jpg","envmap/posx.jpg","envmap/posy.jpg","envmap/posz.jpg","floor.png","shadow.png","stone-wall.png"],mobs:["bat.png","demon.png","dragon.png","eliteorc.png","eliteskeleton.png","explosivebat.png","ghost.png","icedragon.png","mummy.png","orc.png","skeleton.png","zombie.png"],props:["door.png","gate.png","props.jpg","props.png","skulls-shadow.png","table-shadow.png","torch/1.png","torch/2.png","torch/3.png","torch/glow.png"],weapons:["bomb-blink.png","bomb.png","bow.png","powersword.png","sword.png","wand.png"]}},{}],18:[function(e,t,n){(function(n){var r=e;(function i(e,t,n){(function(e,t){"use strict";var n="._tap";var r="._tapActive";var i="tap";var s="clientX clientY screenX screenY pageX pageY".split(" ");var a;var o;var u;var c={count:0,event:0};var l=function(e,n){var r=n.originalEvent;var i=t.Event(r);i.type=e;var a=0;var o=s.length;for(;a<o;a++){i[s[a]]=n[s[a]]}return i};var h=function(e){if(e.isTrigger){return false}var n=c.event;var r=Math.abs(e.pageX-n.pageX);var i=Math.abs(e.pageY-n.pageY);var s=Math.max(r,i);return e.timeStamp-n.timeStamp<t.tap.TIME_DELTA&&s<t.tap.POSITION_DELTA&&(!n.touches||c.count===1)&&f.isTracking};var d=function(e){if(!u){return false}var n=Math.abs(e.pageX-u.pageX);var r=Math.abs(e.pageY-u.pageY);var i=Math.max(n,r);return Math.abs(e.timeStamp-u.timeStamp)<750&&i<t.tap.POSITION_DELTA};var p=function(e){if(e.type.indexOf("touch")===0){e.touches=e.originalEvent.changedTouches;var t=e.touches[0];var n=0;var r=s.length;for(;n<r;n++){e[s[n]]=t[s[n]]}}e.timeStamp=Date.now?Date.now():+new Date};var f={isEnabled:false,isTracking:false,enable:function(){if(f.isEnabled){return}f.isEnabled=true;a=t(e.body).on("touchstart"+n,f.onStart).on("mousedown"+n,f.onStart).on("click"+n,f.onClick)},disable:function(){if(!f.isEnabled){return}f.isEnabled=false;a.off(n)},onStart:function(e){if(e.isTrigger){return}p(e);if(t.tap.LEFT_BUTTON_ONLY&&!e.touches&&e.which!==1){return}if(e.touches){c.count=e.touches.length}if(f.isTracking){return}if(!e.touches&&d(e)){return}f.isTracking=true;c.event=e;if(e.touches){u=e;a.on("touchend"+n+r,f.onEnd).on("touchcancel"+n+r,f.onCancel)}else{a.on("mouseup"+n+r,f.onEnd)}},onEnd:function(e){var n;if(e.isTrigger){return}p(e);if(h(e)){n=l(i,e);o=n;t(c.event.target).trigger(n)}f.onCancel(e)},onCancel:function(e){if(e&&e.type==="touchcancel"){e.preventDefault()}f.isTracking=false;a.off(r)},onClick:function(e){if(!e.isTrigger&&o&&o.isDefaultPrevented()&&o.target===e.target&&o.pageX===e.pageX&&o.pageY===e.pageY&&e.timeStamp-o.timeStamp<750){o=null;return false}}};t(e).ready(f.enable);t.tap={POSITION_DELTA:10,TIME_DELTA:400,LEFT_BUTTON_ONLY:true}})(document,jQuery)}).call(n,t,undefined,undefined)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],19:[function(e,t,n){window.createjs=window.createjs||{},function(){var e=createjs.SoundJS=createjs.SoundJS||{};e.version="0.6.1",e.buildDate="Thu, 21 May 2015 16:17:37 GMT"}(),window.createjs=window.createjs||{},createjs.extend=function(e,t){"use strict";function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n},window.createjs=window.createjs||{},createjs.promote=function(e,t){"use strict";var n=e.prototype,r=Object.getPrototypeOf&&Object.getPrototypeOf(n)||n.__proto__;if(r){n[(t+="_")+"constructor"]=r.constructor;for(var i in r)n.hasOwnProperty(i)&&"function"==typeof r[i]&&(n[t+i]=r[i])}return e},window.createjs=window.createjs||{},createjs.indexOf=function(e,t){"use strict";for(var n=0,r=e.length;r>n;n++)if(t===e[n])return n;return-1},window.createjs=window.createjs||{},function(){"use strict";createjs.proxy=function(e,t){var n=Array.prototype.slice.call(arguments,2);return function(){return e.apply(t,Array.prototype.slice.call(arguments,0).concat(n))}}}(),window.createjs=window.createjs||{},function(){"use strict";function e(){throw"BrowserDetect cannot be instantiated"}var t=e.agent=window.navigator.userAgent;e.isWindowPhone=t.indexOf("IEMobile")>-1||t.indexOf("Windows Phone")>-1,e.isFirefox=t.indexOf("Firefox")>-1,e.isOpera=null!=window.opera,e.isChrome=t.indexOf("Chrome")>-1,e.isIOS=(t.indexOf("iPod")>-1||t.indexOf("iPhone")>-1||t.indexOf("iPad")>-1)&&!e.isWindowPhone,e.isAndroid=t.indexOf("Android")>-1&&!e.isWindowPhone,e.isBlackberry=t.indexOf("Blackberry")>-1,createjs.BrowserDetect=e}(),window.createjs=window.createjs||{},function(){"use strict";function e(){this._listeners=null,this._captureListeners=null}var t=e.prototype;e.initialize=function(e){e.addEventListener=t.addEventListener,e.on=t.on,e.removeEventListener=e.off=t.removeEventListener,e.removeAllEventListeners=t.removeAllEventListeners,e.hasEventListener=t.hasEventListener,e.dispatchEvent=t.dispatchEvent,e._dispatchEvent=t._dispatchEvent,e.willTrigger=t.willTrigger},t.addEventListener=function(e,t,n){var r;r=n?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var i=r[e];return i&&this.removeEventListener(e,t,n),i=r[e],i?i.push(t):r[e]=[t],t},t.on=function(e,t,n,r,i,s){return t.handleEvent&&(n=n||t,t=t.handleEvent),n=n||this,this.addEventListener(e,function(e){t.call(n,e,i),r&&e.remove()},s)},t.removeEventListener=function(e,t,n){var r=n?this._captureListeners:this._listeners;if(r){var i=r[e];if(i)for(var s=0,a=i.length;a>s;s++)if(i[s]==t){1==a?delete r[e]:i.splice(s,1);break}}},t.off=t.removeEventListener,t.removeAllEventListeners=function(e){e?(this._listeners&&delete this._listeners[e],this._captureListeners&&delete this._captureListeners[e]):this._listeners=this._captureListeners=null},t.dispatchEvent=function(e){if("string"==typeof e){var t=this._listeners;if(!t||!t[e])return!1;e=new createjs.Event(e)}else e.target&&e.clone&&(e=e.clone());try{e.target=this}catch(n){}if(e.bubbles&&this.parent){for(var r=this,i=[r];r.parent;)i.push(r=r.parent);var s,a=i.length;for(s=a-1;s>=0&&!e.propagationStopped;s--)i[s]._dispatchEvent(e,1+(0==s));for(s=1;a>s&&!e.propagationStopped;s++)i[s]._dispatchEvent(e,3)}else this._dispatchEvent(e,2);return e.defaultPrevented},t.hasEventListener=function(e){var t=this._listeners,n=this._captureListeners;return!!(t&&t[e]||n&&n[e])},t.willTrigger=function(e){for(var t=this;t;){if(t.hasEventListener(e))return!0;t=t.parent}return!1},t.toString=function(){return"[EventDispatcher]"},t._dispatchEvent=function(e,t){var n,r=1==t?this._captureListeners:this._listeners;if(e&&r){var i=r[e.type];if(!i||!(n=i.length))return;try{e.currentTarget=this}catch(s){}try{e.eventPhase=t}catch(s){}e.removed=!1,i=i.slice();for(var a=0;n>a&&!e.immediatePropagationStopped;a++){var o=i[a];o.handleEvent?o.handleEvent(e):o(e),e.removed&&(this.off(e.type,o,1==t),e.removed=!1)}}},createjs.EventDispatcher=e}(),window.createjs=window.createjs||{},function(){"use strict";function e(e,t,n){this.type=e,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!t,this.cancelable=!!n,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var t=e.prototype;t.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},t.stopPropagation=function(){this.propagationStopped=!0},t.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},t.remove=function(){this.removed=!0},t.clone=function(){return new e(this.type,this.bubbles,this.cancelable)},t.set=function(e){for(var t in e)this[t]=e[t];return this},t.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=e}(),window.createjs=window.createjs||{},function(){"use strict";function e(e,t,n){this.Event_constructor("error"),this.title=e,this.message=t,this.data=n}var t=createjs.extend(e,createjs.Event);t.clone=function(){return new createjs.ErrorEvent(this.title,this.message,this.data)},createjs.ErrorEvent=createjs.promote(e,"Event")}(),window.createjs=window.createjs||{},function(){"use strict";function e(e,t){this.Event_constructor("progress"),this.loaded=e,this.total=null==t?1:t,this.progress=0==t?0:this.loaded/this.total}var t=createjs.extend(e,createjs.Event);t.clone=function(){return new createjs.ProgressEvent(this.loaded,this.total)},createjs.ProgressEvent=createjs.promote(e,"Event")}(window),window.createjs=window.createjs||{},function(){"use strict";function e(){this.src=null,this.type=null,this.id=null,this.maintainOrder=!1,this.callback=null,this.data=null,this.method=createjs.LoadItem.GET,this.values=null,this.headers=null,this.withCredentials=!1,this.mimeType=null,this.crossOrigin=null,this.loadTimeout=n.LOAD_TIMEOUT_DEFAULT}var t=e.prototype={},n=e;n.LOAD_TIMEOUT_DEFAULT=8e3,n.create=function(t){if("string"==typeof t){var r=new e;return r.src=t,r}if(t instanceof n)return t;if(t instanceof Object&&t.src)return null==t.loadTimeout&&(t.loadTimeout=n.LOAD_TIMEOUT_DEFAULT),t;throw new Error("Type not recognized.")},t.set=function(e){for(var t in e)this[t]=e[t];return this},createjs.LoadItem=n}(),function(){var e={};e.ABSOLUTE_PATT=/^(?:\w+:)?\/{2}/i,e.RELATIVE_PATT=/^[./]*?\//i,e.EXTENSION_PATT=/\/?[^/]+\.(\w{1,5})$/i,e.parseURI=function(t){var n={absolute:!1,relative:!1};if(null==t)return n;var r=t.indexOf("?");r>-1&&(t=t.substr(0,r));var i;return e.ABSOLUTE_PATT.test(t)?n.absolute=!0:e.RELATIVE_PATT.test(t)&&(n.relative=!0),(i=t.match(e.EXTENSION_PATT))&&(n.extension=i[1].toLowerCase()),n},e.formatQueryString=function(e,t){if(null==e)throw new Error("You must specify data.");var n=[];for(var r in e)n.push(r+"="+escape(e[r]));return t&&(n=n.concat(t)),n.join("&")},e.buildPath=function(e,t){if(null==t)return e;var n=[],r=e.indexOf("?");if(-1!=r){var i=e.slice(r+1);n=n.concat(i.split("&"))}return-1!=r?e.slice(0,r)+"?"+this._formatQueryString(t,n):e+"?"+this._formatQueryString(t,n)},e.isCrossDomain=function(e){var t=document.createElement("a");t.href=e.src;var n=document.createElement("a");n.href=location.href;var r=""!=t.hostname&&(t.port!=n.port||t.protocol!=n.protocol||t.hostname!=n.hostname);return r},e.isLocal=function(e){var t=document.createElement("a");return t.href=e.src,""==t.hostname&&"file:"==t.protocol},e.isBinary=function(e){switch(e){case createjs.AbstractLoader.IMAGE:case createjs.AbstractLoader.BINARY:return!0;default:return!1}},e.isImageTag=function(e){return e instanceof HTMLImageElement},e.isAudioTag=function(e){return window.HTMLAudioElement?e instanceof HTMLAudioElement:!1},e.isVideoTag=function(e){return window.HTMLVideoElement?e instanceof HTMLVideoElement:!1},e.isText=function(e){switch(e){case createjs.AbstractLoader.TEXT:case createjs.AbstractLoader.JSON:case createjs.AbstractLoader.MANIFEST:case createjs.AbstractLoader.XML:case createjs.AbstractLoader.CSS:case createjs.AbstractLoader.SVG:case createjs.AbstractLoader.JAVASCRIPT:case createjs.AbstractLoader.SPRITESHEET:return!0;default:return!1}},e.getTypeByExtension=function(e){if(null==e)return createjs.AbstractLoader.TEXT;switch(e.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.AbstractLoader.IMAGE;case"ogg":case"mp3":case"webm":return createjs.AbstractLoader.SOUND;case"mp4":case"webm":case"ts":return createjs.AbstractLoader.VIDEO;case"json":return createjs.AbstractLoader.JSON;case"xml":return createjs.AbstractLoader.XML;case"css":return createjs.AbstractLoader.CSS;case"js":return createjs.AbstractLoader.JAVASCRIPT;case"svg":return createjs.AbstractLoader.SVG;default:return createjs.AbstractLoader.TEXT}},createjs.RequestUtils=e}(),window.createjs=window.createjs||{},function(){"use strict";function e(e,t,n){this.EventDispatcher_constructor(),this.loaded=!1,this.canceled=!1,this.progress=0,this.type=n,this.resultFormatter=null,this._item=e?createjs.LoadItem.create(e):null,this._preferXHR=t,this._result=null,this._rawResult=null,this._loadedItems=null,this._tagSrcAttribute=null,this._tag=null}var t=createjs.extend(e,createjs.EventDispatcher),n=e;n.POST="POST",n.GET="GET",n.BINARY="binary",n.CSS="css",n.IMAGE="image",n.JAVASCRIPT="javascript",n.JSON="json",n.JSONP="jsonp",n.MANIFEST="manifest",n.SOUND="sound",n.VIDEO="video",n.SPRITESHEET="spritesheet",n.SVG="svg",n.TEXT="text",n.XML="xml",t.getItem=function(){return this._item},t.getResult=function(e){return e?this._rawResult:this._result},t.getTag=function(){return this._tag},t.setTag=function(e){this._tag=e},t.load=function(){this._createRequest(),this._request.on("complete",this,this),this._request.on("progress",this,this),this._request.on("loadStart",this,this),this._request.on("abort",this,this),this._request.on("timeout",this,this),this._request.on("error",this,this);var e=new createjs.Event("initialize");e.loader=this._request,this.dispatchEvent(e),this._request.load()},t.cancel=function(){this.canceled=!0,this.destroy()},t.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy()),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},t.getLoadedItems=function(){return this._loadedItems},t._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},t._createTag=function(){return null},t._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},t._sendProgress=function(e){if(!this._isCanceled()){var t=null;"number"==typeof e?(this.progress=e,t=new createjs.ProgressEvent(this.progress)):(t=e,this.progress=e.loaded/e.total,t.progress=this.progress,(isNaN(this.progress)||1/0==this.progress)&&(this.progress=0)),this.hasEventListener("progress")&&this.dispatchEvent(t)}},t._sendComplete=function(){if(!this._isCanceled()){this.loaded=!0;var e=new createjs.Event("complete");e.rawResult=this._rawResult,null!=this._result&&(e.result=this._result),this.dispatchEvent(e)}},t._sendError=function(e){!this._isCanceled()&&this.hasEventListener("error")&&(null==e&&(e=new createjs.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(e))},t._isCanceled=function(){return null==window.createjs||this.canceled?!0:!1},t.resultFormatter=null,t.handleEvent=function(e){switch(e.type){case"complete":this._rawResult=e.target._response;var t=this.resultFormatter&&this.resultFormatter(this),n=this;t instanceof Function?t(function(e){n._result=e,n._sendComplete()}):(this._result=t||this._rawResult,this._sendComplete());break;case"progress":this._sendProgress(e);break;case"error":this._sendError(e);break;case"loadstart":this._sendLoadStart();break;case"abort":case"timeout":this._isCanceled()||this.dispatchEvent(e.type)}},t.buildPath=function(e,t){return createjs.RequestUtils.buildPath(e,t)},t.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=createjs.promote(e,"EventDispatcher")}(),window.createjs=window.createjs||{},function(){"use strict";function e(e,t,n){this.AbstractLoader_constructor(e,t,n),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src"}var t=createjs.extend(e,createjs.AbstractLoader);t.load=function(){this._tag||(this._tag=this._createTag(this._item.src)),this._tag.preload="auto",this._tag.load(),this.AbstractLoader_load()},t._createTag=function(){},t._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},t._formatResult=function(e){return this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR&&(e.getTag().src=e.getResult(!0)),e.getTag()},createjs.AbstractMediaLoader=createjs.promote(e,"AbstractLoader")}(),window.createjs=window.createjs||{},function(){"use strict";var e=function(e){this._item=e},t=createjs.extend(e,createjs.EventDispatcher);t.load=function(){},t.destroy=function(){},t.cancel=function(){},createjs.AbstractRequest=createjs.promote(e,"EventDispatcher")}(),window.createjs=window.createjs||{},function(){"use strict";function e(e,t,n){this.AbstractRequest_constructor(e),this._tag=t,this._tagSrcAttribute=n,this._loadedHandler=createjs.proxy(this._handleTagComplete,this),this._addedToDOM=!1,this._startTagVisibility=null}var t=createjs.extend(e,createjs.AbstractRequest);t.load=function(){this._tag.onload=createjs.proxy(this._handleTagComplete,this),this._tag.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this),this._tag.onerror=createjs.proxy(this._handleError,this);var e=new createjs.Event("initialize");e.loader=this._tag,this.dispatchEvent(e),this._hideTag(),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag[this._tagSrcAttribute]=this._item.src,null==this._tag.parentNode&&(window.document.body.appendChild(this._tag),this._addedToDOM=!0)},t.destroy=function(){this._clean(),this._tag=null,this.AbstractRequest_destroy()},t._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var e=this._tag;("loaded"==e.readyState||"complete"==e.readyState)&&this._handleTagComplete()},t._handleError=function(){this._clean(),this.dispatchEvent("error")},t._handleTagComplete=function(){this._rawResult=this._tag,this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult,this._clean(),this._showTag(),this.dispatchEvent("complete")},t._handleTimeout=function(){this._clean(),this.dispatchEvent(new createjs.Event("timeout"))},t._clean=function(){this._tag.onload=null,this._tag.onreadystatechange=null,this._tag.onerror=null,this._addedToDOM&&null!=this._tag.parentNode&&this._tag.parentNode.removeChild(this._tag),clearTimeout(this._loadTimeout)},t._hideTag=function(){this._startTagVisibility=this._tag.style.visibility,this._tag.style.visibility="hidden"},t._showTag=function(){this._tag.style.visibility=this._startTagVisibility},t._handleStalled=function(){},createjs.TagRequest=createjs.promote(e,"AbstractRequest")}(),window.createjs=window.createjs||{},function(){"use strict";function e(e,t,n){this.AbstractRequest_constructor(e),this._tag=t,this._tagSrcAttribute=n,this._loadedHandler=createjs.proxy(this._handleTagComplete,this)}var t=createjs.extend(e,createjs.TagRequest);t.load=function(){var e=createjs.proxy(this._handleStalled,this);this._stalledCallback=e;var t=createjs.proxy(this._handleProgress,this);this._handleProgress=t,this._tag.addEventListener("stalled",e),this._tag.addEventListener("progress",t),this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1),this.TagRequest_load()},t._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var e=this._tag;("loaded"==e.readyState||"complete"==e.readyState)&&this._handleTagComplete()},t._handleStalled=function(){},t._handleProgress=function(e){if(e&&!(e.loaded>0&&0==e.total)){var t=new createjs.ProgressEvent(e.loaded,e.total);this.dispatchEvent(t)}},t._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.removeEventListener("stalled",this._stalledCallback),this._tag.removeEventListener("progress",this._progressCallback),this.TagRequest__clean()},createjs.MediaTagRequest=createjs.promote(e,"TagRequest")}(),window.createjs=window.createjs||{},function(){"use strict";function e(e){this.AbstractRequest_constructor(e),this._request=null,this._loadTimeout=null,this._xhrLevel=1,this._response=null,this._rawResponse=null,this._canceled=!1,this._handleLoadStartProxy=createjs.proxy(this._handleLoadStart,this),this._handleProgressProxy=createjs.proxy(this._handleProgress,this),this._handleAbortProxy=createjs.proxy(this._handleAbort,this),this._handleErrorProxy=createjs.proxy(this._handleError,this),this._handleTimeoutProxy=createjs.proxy(this._handleTimeout,this),this._handleLoadProxy=createjs.proxy(this._handleLoad,this),this._handleReadyStateChangeProxy=createjs.proxy(this._handleReadyStateChange,this),!this._createXHR(e)}var t=createjs.extend(e,createjs.AbstractRequest);e.ACTIVEX_VERSIONS=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],t.getResult=function(e){return e&&this._rawResponse?this._rawResponse:this._response},t.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},t.load=function(){if(null==this._request)return void this._handleError();this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1),1==this._xhrLevel&&(this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout));try{this._item.values&&this._item.method!=createjs.AbstractLoader.GET?this._item.method==createjs.AbstractLoader.POST&&this._request.send(createjs.RequestUtils.formatQueryString(this._item.values)):this._request.send()}catch(e){this.dispatchEvent(new createjs.ErrorEvent("XHR_SEND",null,e))}},t.setResponseType=function(e){this._request.responseType=e},t.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},t.getResponseHeader=function(e){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(e):null},t._handleProgress=function(e){if(e&&!(e.loaded>0&&0==e.total)){var t=new createjs.ProgressEvent(e.loaded,e.total);this.dispatchEvent(t)}},t._handleLoadStart=function(){clearTimeout(this._loadTimeout),this.dispatchEvent("loadstart")},t._handleAbort=function(e){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("XHR_ABORTED",null,e))},t._handleError=function(e){this._clean(),this.dispatchEvent(new createjs.ErrorEvent(e.message))},t._handleReadyStateChange=function(){4==this._request.readyState&&this._handleLoad()},t._handleLoad=function(){if(!this.loaded){this.loaded=!0;var e=this._checkError();if(e)return void this._handleError(e);this._response=this._getResponse(),this._clean(),this.dispatchEvent(new createjs.Event("complete"));
}},t._handleTimeout=function(e){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT",null,e))},t._checkError=function(){var e=parseInt(this._request.status);switch(e){case 404:case 0:return new Error(e)}return null},t._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(e){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(e){}return null},t._createXHR=function(e){var t=createjs.RequestUtils.isCrossDomain(e),n={},r=null;if(window.XMLHttpRequest)r=new XMLHttpRequest,t&&void 0===r.withCredentials&&window.XDomainRequest&&(r=new XDomainRequest);else{for(var i=0,a=s.ACTIVEX_VERSIONS.length;a>i;i++){{s.ACTIVEX_VERSIONS[i]}try{r=new ActiveXObject(axVersions);break}catch(o){}}if(null==r)return!1}null==e.mimeType&&createjs.RequestUtils.isText(e.type)&&(e.mimeType="text/plain; charset=utf-8"),e.mimeType&&r.overrideMimeType&&r.overrideMimeType(e.mimeType),this._xhrLevel="string"==typeof r.responseType?2:1;var u=null;if(u=e.method==createjs.AbstractLoader.GET?createjs.RequestUtils.buildPath(e.src,e.values):e.src,r.open(e.method||createjs.AbstractLoader.GET,u,!0),t&&r instanceof XMLHttpRequest&&1==this._xhrLevel&&(n.Origin=location.origin),e.values&&e.method==createjs.AbstractLoader.POST&&(n["Content-Type"]="application/x-www-form-urlencoded"),t||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),e.headers)for(var c in e.headers)n[c]=e.headers[c];for(c in n)r.setRequestHeader(c,n[c]);return r instanceof XMLHttpRequest&&void 0!==e.withCredentials&&(r.withCredentials=e.withCredentials),this._request=r,!0},t._clean=function(){clearTimeout(this._loadTimeout),this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)},t.toString=function(){return"[PreloadJS XHRRequest]"},createjs.XHRRequest=createjs.promote(e,"AbstractRequest")}(),window.createjs=window.createjs||{},function(){"use strict";function e(e,t){this.AbstractMediaLoader_constructor(e,t,createjs.AbstractLoader.SOUND),createjs.RequestUtils.isAudioTag(e)?this._tag=e:createjs.RequestUtils.isAudioTag(e.src)?this._tag=e:createjs.RequestUtils.isAudioTag(e.tag)&&(this._tag=createjs.RequestUtils.isAudioTag(e)?e:e.src),null!=this._tag&&(this._preferXHR=!1)}var t=createjs.extend(e,createjs.AbstractMediaLoader),n=e;n.canLoadItem=function(e){return e.type==createjs.AbstractLoader.SOUND},t._createTag=function(e){var t=document.createElement("audio");return t.autoplay=!1,t.preload="none",t.src=e,t},createjs.SoundLoader=createjs.promote(e,"AbstractMediaLoader")}(),window.createjs=window.createjs||{},function(){"use strict";var e=function(){this.interrupt=null,this.delay=null,this.offset=null,this.loop=null,this.volume=null,this.pan=null,this.startTime=null,this.duration=null},t=e.prototype={},n=e;n.create=function(e){if(e instanceof n||e instanceof Object){var t=new createjs.PlayPropsConfig;return t.set(e),t}throw new Error("Type not recognized.")},t.set=function(e){for(var t in e)this[t]=e[t];return this},t.toString=function(){return"[PlayPropsConfig]"},createjs.PlayPropsConfig=n}(),window.createjs=window.createjs||{},function(){"use strict";function e(){throw"Sound cannot be instantiated"}function t(e,t){this.init(e,t)}var n=e;n.INTERRUPT_ANY="any",n.INTERRUPT_EARLY="early",n.INTERRUPT_LATE="late",n.INTERRUPT_NONE="none",n.PLAY_INITED="playInited",n.PLAY_SUCCEEDED="playSucceeded",n.PLAY_INTERRUPTED="playInterrupted",n.PLAY_FINISHED="playFinished",n.PLAY_FAILED="playFailed",n.SUPPORTED_EXTENSIONS=["mp3","ogg","opus","mpeg","wav","m4a","mp4","aiff","wma","mid"],n.EXTENSION_MAP={m4a:"mp4"},n.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([/.]*?(?:[^?]+)?\/)?((?:[^/?]+)\.(\w+))(?:\?(\S+)?)?$/,n.defaultInterruptBehavior=n.INTERRUPT_NONE,n.alternateExtensions=[],n.activePlugin=null,n._masterVolume=1,Object.defineProperty(n,"volume",{get:function(){return this._masterVolume},set:function(e){if(null==Number(e))return!1;if(e=Math.max(0,Math.min(1,e)),n._masterVolume=e,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(e))for(var t=this._instances,r=0,i=t.length;i>r;r++)t[r].setMasterVolume(e)}}),n._masterMute=!1,Object.defineProperty(n,"muted",{get:function(){return this._masterMute},set:function(e){if(null==e)return!1;if(this._masterMute=e,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(e))for(var t=this._instances,n=0,r=t.length;r>n;n++)t[n].setMasterMute(e);return!0}}),Object.defineProperty(n,"capabilities",{get:function(){return null==n.activePlugin?null:n.activePlugin._capabilities},set:function(){return!1}}),n._pluginsRegistered=!1,n._lastID=0,n._instances=[],n._idHash={},n._preloadHash={},n._defaultPlayPropsHash={},n.addEventListener=null,n.removeEventListener=null,n.removeAllEventListeners=null,n.dispatchEvent=null,n.hasEventListener=null,n._listeners=null,createjs.EventDispatcher.initialize(n),n.getPreloadHandlers=function(){return{callback:createjs.proxy(n.initLoad,n),types:["sound"],extensions:n.SUPPORTED_EXTENSIONS}},n._handleLoadComplete=function(e){var t=e.target.getItem().src;if(n._preloadHash[t])for(var r=0,i=n._preloadHash[t].length;i>r;r++){var s=n._preloadHash[t][r];if(n._preloadHash[t][r]=!0,n.hasEventListener("fileload")){var e=new createjs.Event("fileload");e.src=s.src,e.id=s.id,e.data=s.data,e.sprite=s.sprite,n.dispatchEvent(e)}}},n._handleLoadError=function(e){var t=e.target.getItem().src;if(n._preloadHash[t])for(var r=0,i=n._preloadHash[t].length;i>r;r++){var s=n._preloadHash[t][r];if(n._preloadHash[t][r]=!1,n.hasEventListener("fileerror")){var e=new createjs.Event("fileerror");e.src=s.src,e.id=s.id,e.data=s.data,e.sprite=s.sprite,n.dispatchEvent(e)}}},n._registerPlugin=function(e){return e.isSupported()?(n.activePlugin=new e,!0):!1},n.registerPlugins=function(e){n._pluginsRegistered=!0;for(var t=0,r=e.length;r>t;t++)if(n._registerPlugin(e[t]))return!0;return!1},n.initializeDefaultPlugins=function(){return null!=n.activePlugin?!0:n._pluginsRegistered?!1:n.registerPlugins([createjs.WebAudioPlugin,createjs.HTMLAudioPlugin])?!0:!1},n.isReady=function(){return null!=n.activePlugin},n.getCapabilities=function(){return null==n.activePlugin?null:n.activePlugin._capabilities},n.getCapability=function(e){return null==n.activePlugin?null:n.activePlugin._capabilities[e]},n.initLoad=function(e){return n._registerSound(e)},n._registerSound=function(e){if(!n.initializeDefaultPlugins())return!1;var r;if(e.src instanceof Object?(r=n._parseSrc(e.src),r.src=e.path+r.src):r=n._parsePath(e.src),null==r)return!1;e.src=r.src,e.type="sound";var i=e.data,s=null;if(null!=i&&(isNaN(i.channels)?isNaN(i)||(s=parseInt(i)):s=parseInt(i.channels),i.audioSprite))for(var a,o=i.audioSprite.length;o--;)a=i.audioSprite[o],n._idHash[a.id]={src:e.src,startTime:parseInt(a.startTime),duration:parseInt(a.duration)},a.defaultPlayProps&&(n._defaultPlayPropsHash[a.id]=createjs.PlayPropsConfig.create(a.defaultPlayProps));null!=e.id&&(n._idHash[e.id]={src:e.src});var u=n.activePlugin.register(e);return t.create(e.src,s),null!=i&&isNaN(i)?e.data.channels=s||t.maxPerChannel():e.data=s||t.maxPerChannel(),u.type&&(e.type=u.type),e.defaultPlayProps&&(n._defaultPlayPropsHash[e.src]=createjs.PlayPropsConfig.create(e.defaultPlayProps)),u},n.registerSound=function(e,t,r,i,s){var a={src:e,id:t,data:r,defaultPlayProps:s};e instanceof Object&&e.src&&(i=t,a=e),a=createjs.LoadItem.create(a),a.path=i,null==i||a.src instanceof Object||(a.src=i+e);var o=n._registerSound(a);if(!o)return!1;if(n._preloadHash[a.src]||(n._preloadHash[a.src]=[]),n._preloadHash[a.src].push(a),1==n._preloadHash[a.src].length)o.on("complete",createjs.proxy(this._handleLoadComplete,this)),o.on("error",createjs.proxy(this._handleLoadError,this)),n.activePlugin.preload(o);else if(1==n._preloadHash[a.src][0])return!0;return a},n.registerSounds=function(e,t){var n=[];e.path&&(t?t+=e.path:t=e.path,e=e.manifest);for(var r=0,i=e.length;i>r;r++)n[r]=createjs.Sound.registerSound(e[r].src,e[r].id,e[r].data,t,e[r].defaultPlayProps);return n},n.removeSound=function(e,r){if(null==n.activePlugin)return!1;e instanceof Object&&e.src&&(e=e.src);var i;if(e instanceof Object?i=n._parseSrc(e):(e=n._getSrcById(e).src,i=n._parsePath(e)),null==i)return!1;e=i.src,null!=r&&(e=r+e);for(var s in n._idHash)n._idHash[s].src==e&&delete n._idHash[s];return t.removeSrc(e),delete n._preloadHash[e],n.activePlugin.removeSound(e),!0},n.removeSounds=function(e,t){var n=[];e.path&&(t?t+=e.path:t=e.path,e=e.manifest);for(var r=0,i=e.length;i>r;r++)n[r]=createjs.Sound.removeSound(e[r].src,t);return n},n.removeAllSounds=function(){n._idHash={},n._preloadHash={},t.removeAll(),n.activePlugin&&n.activePlugin.removeAllSounds()},n.loadComplete=function(e){if(!n.isReady())return!1;var t=n._parsePath(e);return e=t?n._getSrcById(t.src).src:n._getSrcById(e).src,void 0==n._preloadHash[e]?!1:1==n._preloadHash[e][0]},n._parsePath=function(e){"string"!=typeof e&&(e=e.toString());var t=e.match(n.FILE_PATTERN);if(null==t)return!1;for(var r=t[4],i=t[5],s=n.capabilities,a=0;!s[i];)if(i=n.alternateExtensions[a++],a>n.alternateExtensions.length)return null;e=e.replace("."+t[5],"."+i);var o={name:r,src:e,extension:i};return o},n._parseSrc=function(e){var t={name:void 0,src:void 0,extension:void 0},r=n.capabilities;for(var i in e)if(e.hasOwnProperty(i)&&r[i]){t.src=e[i],t.extension=i;break}if(!t.src)return!1;var s=t.src.lastIndexOf("/");return t.name=-1!=s?t.src.slice(s+1):t.src,t},n.play=function(e,t,r,i,s,a,o,u,c){var l;l=createjs.PlayPropsConfig.create(t instanceof Object||t instanceof createjs.PlayPropsConfig?t:{interrupt:t,delay:r,offset:i,loop:s,volume:a,pan:o,startTime:u,duration:c});var h=n.createInstance(e,l.startTime,l.duration),d=n._playInstance(h,l);return d||h._playFailed(),h},n.createInstance=function(e,r,i){if(!n.initializeDefaultPlugins())return new createjs.DefaultSoundInstance(e,r,i);var s=n._defaultPlayPropsHash[e];e=n._getSrcById(e);var a=n._parsePath(e.src),o=null;return null!=a&&null!=a.src?(t.create(a.src),null==r&&(r=e.startTime),o=n.activePlugin.create(a.src,r,i||e.duration),s=s||n._defaultPlayPropsHash[a.src],s&&o.applyPlayProps(s)):o=new createjs.DefaultSoundInstance(e,r,i),o.uniqueId=n._lastID++,o},n.stop=function(){for(var e=this._instances,t=e.length;t--;)e[t].stop()},n.setVolume=function(e){if(null==Number(e))return!1;if(e=Math.max(0,Math.min(1,e)),n._masterVolume=e,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(e))for(var t=this._instances,r=0,i=t.length;i>r;r++)t[r].setMasterVolume(e)},n.getVolume=function(){return this._masterVolume},n.setMute=function(e){if(null==e)return!1;if(this._masterMute=e,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(e))for(var t=this._instances,n=0,r=t.length;r>n;n++)t[n].setMasterMute(e);return!0},n.getMute=function(){return this._masterMute},n.setDefaultPlayProps=function(e,t){e=n._getSrcById(e),n._defaultPlayPropsHash[n._parsePath(e.src).src]=createjs.PlayPropsConfig.create(t)},n.getDefaultPlayProps=function(e){return e=n._getSrcById(e),n._defaultPlayPropsHash[n._parsePath(e.src).src]},n._playInstance=function(e,t){var r=n._defaultPlayPropsHash[e.src]||{};if(null==t.interrupt&&(t.interrupt=r.interrupt||n.defaultInterruptBehavior),null==t.delay&&(t.delay=r.delay||0),null==t.offset&&(t.offset=e.getPosition()),null==t.loop&&(t.loop=e.loop),null==t.volume&&(t.volume=e.volume),null==t.pan&&(t.pan=e.pan),0==t.delay){var i=n._beginPlaying(e,t);if(!i)return!1}else{var s=setTimeout(function(){n._beginPlaying(e,t)},t.delay);e.delayTimeoutId=s}return this._instances.push(e),!0},n._beginPlaying=function(e,n){if(!t.add(e,n.interrupt))return!1;var r=e._beginPlaying(n);if(!r){var i=createjs.indexOf(this._instances,e);return i>-1&&this._instances.splice(i,1),!1}return!0},n._getSrcById=function(e){return n._idHash[e]||{src:e}},n._playFinished=function(e){t.remove(e);var n=createjs.indexOf(this._instances,e);n>-1&&this._instances.splice(n,1)},createjs.Sound=e,t.channels={},t.create=function(e,n){var r=t.get(e);return null==r?(t.channels[e]=new t(e,n),!0):!1},t.removeSrc=function(e){var n=t.get(e);return null==n?!1:(n._removeAll(),delete t.channels[e],!0)},t.removeAll=function(){for(var e in t.channels)t.channels[e]._removeAll();t.channels={}},t.add=function(e,n){var r=t.get(e.src);return null==r?!1:r._add(e,n)},t.remove=function(e){var n=t.get(e.src);return null==n?!1:(n._remove(e),!0)},t.maxPerChannel=function(){return r.maxDefault},t.get=function(e){return t.channels[e]};var r=t.prototype;r.constructor=t,r.src=null,r.max=null,r.maxDefault=100,r.length=0,r.init=function(e,t){this.src=e,this.max=t||this.maxDefault,-1==this.max&&(this.max=this.maxDefault),this._instances=[]},r._get=function(e){return this._instances[e]},r._add=function(e,t){return this._getSlot(t,e)?(this._instances.push(e),this.length++,!0):!1},r._remove=function(e){var t=createjs.indexOf(this._instances,e);return-1==t?!1:(this._instances.splice(t,1),this.length--,!0)},r._removeAll=function(){for(var e=this.length-1;e>=0;e--)this._instances[e].stop()},r._getSlot=function(t){var n,r;if(t!=e.INTERRUPT_NONE&&(r=this._get(0),null==r))return!0;for(var i=0,s=this.max;s>i;i++){if(n=this._get(i),null==n)return!0;if(n.playState==e.PLAY_FINISHED||n.playState==e.PLAY_INTERRUPTED||n.playState==e.PLAY_FAILED){r=n;break}t!=e.INTERRUPT_NONE&&(t==e.INTERRUPT_EARLY&&n.getPosition()<r.getPosition()||t==e.INTERRUPT_LATE&&n.getPosition()>r.getPosition())&&(r=n)}return null!=r?(r._interrupt(),this._remove(r),!0):!1},r.toString=function(){return"[Sound SoundChannel]"}}(),window.createjs=window.createjs||{},function(){"use strict";var e=function(e,t,n,r){this.EventDispatcher_constructor(),this.src=e,this.uniqueId=-1,this.playState=null,this.delayTimeoutId=null,this._volume=1,Object.defineProperty(this,"volume",{get:this.getVolume,set:this.setVolume}),this._pan=0,Object.defineProperty(this,"pan",{get:this.getPan,set:this.setPan}),this._startTime=Math.max(0,t||0),Object.defineProperty(this,"startTime",{get:this.getStartTime,set:this.setStartTime}),this._duration=Math.max(0,n||0),Object.defineProperty(this,"duration",{get:this.getDuration,set:this.setDuration}),this._playbackResource=null,Object.defineProperty(this,"playbackResource",{get:this.getPlaybackResource,set:this.setPlaybackResource}),r!==!1&&r!==!0&&this.setPlaybackResource(r),this._position=0,Object.defineProperty(this,"position",{get:this.getPosition,set:this.setPosition}),this._loop=0,Object.defineProperty(this,"loop",{get:this.getLoop,set:this.setLoop}),this._muted=!1,Object.defineProperty(this,"muted",{get:this.getMuted,set:this.setMuted}),this._paused=!1,Object.defineProperty(this,"paused",{get:this.getPaused,set:this.setPaused})},t=createjs.extend(e,createjs.EventDispatcher);t.play=function(e,t,n,r,i,s){var a;return a=createjs.PlayPropsConfig.create(e instanceof Object||e instanceof createjs.PlayPropsConfig?e:{interrupt:e,delay:t,offset:n,loop:r,volume:i,pan:s}),this.playState==createjs.Sound.PLAY_SUCCEEDED?(this.applyPlayProps(a),void(this._paused&&this.setPaused(!1))):(this._cleanUp(),createjs.Sound._playInstance(this,a),this)},t.stop=function(){return this._position=0,this._paused=!1,this._handleStop(),this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,this},t.destroy=function(){this._cleanUp(),this.src=null,this.playbackResource=null,this.removeAllEventListeners()},t.applyPlayProps=function(e){return null!=e.offset&&this.setPosition(e.offset),null!=e.loop&&this.setLoop(e.loop),null!=e.volume&&this.setVolume(e.volume),null!=e.pan&&this.setPan(e.pan),null!=e.startTime&&(this.setStartTime(e.startTime),this.setDuration(e.duration)),this},t.toString=function(){return"[AbstractSoundInstance]"},t.getPaused=function(){return this._paused},t.setPaused=function(e){return e!==!0&&e!==!1||this._paused==e||1==e&&this.playState!=createjs.Sound.PLAY_SUCCEEDED?void 0:(this._paused=e,e?this._pause():this._resume(),clearTimeout(this.delayTimeoutId),this)},t.setVolume=function(e){return e==this._volume?this:(this._volume=Math.max(0,Math.min(1,e)),this._muted||this._updateVolume(),this)},t.getVolume=function(){return this._volume},t.setMuted=function(e){return e===!0||e===!1?(this._muted=e,this._updateVolume(),this):void 0},t.getMuted=function(){return this._muted},t.setPan=function(e){return e==this._pan?this:(this._pan=Math.max(-1,Math.min(1,e)),this._updatePan(),this)},t.getPan=function(){return this._pan},t.getPosition=function(){return this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED||(this._position=this._calculateCurrentPosition()),this._position},t.setPosition=function(e){return this._position=Math.max(0,e),this.playState==createjs.Sound.PLAY_SUCCEEDED&&this._updatePosition(),this},t.getStartTime=function(){return this._startTime},t.setStartTime=function(e){return e==this._startTime?this:(this._startTime=Math.max(0,e||0),this._updateStartTime(),this)},t.getDuration=function(){return this._duration},t.setDuration=function(e){return e==this._duration?this:(this._duration=Math.max(0,e||0),this._updateDuration(),this)},t.setPlaybackResource=function(e){return this._playbackResource=e,0==this._duration&&this._setDurationFromSource(),this},t.getPlaybackResource=function(){return this._playbackResource},t.getLoop=function(){return this._loop},t.setLoop=function(e){null!=this._playbackResource&&(0!=this._loop&&0==e?this._removeLooping(e):0==this._loop&&0!=e&&this._addLooping(e)),this._loop=e},t._sendEvent=function(e){var t=new createjs.Event(e);this.dispatchEvent(t)},t._cleanUp=function(){clearTimeout(this.delayTimeoutId),this._handleCleanUp(),this._paused=!1,createjs.Sound._playFinished(this)},t._interrupt=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_INTERRUPTED,this._sendEvent("interrupted")},t._beginPlaying=function(e){return this.setPosition(e.offset),this.setLoop(e.loop),this.setVolume(e.volume),this.setPan(e.pan),null!=e.startTime&&(this.setStartTime(e.startTime),this.setDuration(e.duration)),null!=this._playbackResource&&this._position<this._duration?(this._paused=!1,this._handleSoundReady(),this.playState=createjs.Sound.PLAY_SUCCEEDED,this._sendEvent("succeeded"),!0):(this._playFailed(),!1)},t._playFailed=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_FAILED,this._sendEvent("failed")},t._handleSoundComplete=function(){return this._position=0,0!=this._loop?(this._loop--,this._handleLoop(),void this._sendEvent("loop")):(this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,void this._sendEvent("complete"))},t._handleSoundReady=function(){},t._updateVolume=function(){},t._updatePan=function(){},t._updateStartTime=function(){},t._updateDuration=function(){},t._setDurationFromSource=function(){},t._calculateCurrentPosition=function(){},t._updatePosition=function(){},t._removeLooping=function(){},t._addLooping=function(){},t._pause=function(){},t._resume=function(){},t._handleStop=function(){},t._handleCleanUp=function(){},t._handleLoop=function(){},createjs.AbstractSoundInstance=createjs.promote(e,"EventDispatcher"),createjs.DefaultSoundInstance=createjs.AbstractSoundInstance}(),window.createjs=window.createjs||{},function(){"use strict";var e=function(){this._capabilities=null,this._loaders={},this._audioSources={},this._soundInstances={},this._volume=1,this._loaderClass,this._soundInstanceClass},t=e.prototype;e._capabilities=null,e.isSupported=function(){return!0},t.register=function(e){var t=this._loaders[e.src];return t&&!t.canceled?this._loaders[e.src]:(this._audioSources[e.src]=!0,this._soundInstances[e.src]=[],t=new this._loaderClass(e),t.on("complete",createjs.proxy(this._handlePreloadComplete,this)),this._loaders[e.src]=t,t)},t.preload=function(e){e.on("error",createjs.proxy(this._handlePreloadError,this)),e.load()},t.isPreloadStarted=function(e){return null!=this._audioSources[e]},t.isPreloadComplete=function(e){return!(null==this._audioSources[e]||1==this._audioSources[e])},t.removeSound=function(e){if(this._soundInstances[e]){for(var t=this._soundInstances[e].length;t--;){var n=this._soundInstances[e][t];n.destroy()}delete this._soundInstances[e],delete this._audioSources[e],this._loaders[e]&&this._loaders[e].destroy(),delete this._loaders[e]}},t.removeAllSounds=function(){for(var e in this._audioSources)this.removeSound(e)},t.create=function(e,t,n){this.isPreloadStarted(e)||this.preload(this.register(e));var r=new this._soundInstanceClass(e,t,n,this._audioSources[e]);return this._soundInstances[e].push(r),r},t.setVolume=function(e){return this._volume=e,this._updateVolume(),!0},t.getVolume=function(){return this._volume},t.setMute=function(){return this._updateVolume(),!0},t.toString=function(){return"[AbstractPlugin]"},t._handlePreloadComplete=function(e){var t=e.target.getItem().src;this._audioSources[t]=e.result;for(var n=0,r=this._soundInstances[t].length;r>n;n++){var i=this._soundInstances[t][n];i.setPlaybackResource(this._audioSources[t])}},t._handlePreloadError=function(){},t._updateVolume=function(){},createjs.AbstractPlugin=e}(),window.createjs=window.createjs||{},function(){"use strict";function e(e){this.AbstractLoader_constructor(e,!0,createjs.AbstractLoader.SOUND)}var t=createjs.extend(e,createjs.AbstractLoader);e.context=null,t.toString=function(){return"[WebAudioLoader]"},t._createRequest=function(){this._request=new createjs.XHRRequest(this._item,!1),this._request.setResponseType("arraybuffer")},t._sendComplete=function(){e.context.decodeAudioData(this._rawResult,createjs.proxy(this._handleAudioDecoded,this),createjs.proxy(this._sendError,this))},t._handleAudioDecoded=function(e){this._result=e,this.AbstractLoader__sendComplete()},createjs.WebAudioLoader=createjs.promote(e,"AbstractLoader")}(),window.createjs=window.createjs||{},function(){"use strict";function e(e,t,r,i){this.AbstractSoundInstance_constructor(e,t,r,i),this.gainNode=n.context.createGain(),this.panNode=n.context.createPanner(),this.panNode.panningModel=n._panningModel,this.panNode.connect(this.gainNode),this.sourceNode=null,this._soundCompleteTimeout=null,this._sourceNodeNext=null,this._playbackStartTime=0,this._endedHandler=createjs.proxy(this._handleSoundComplete,this)}var t=createjs.extend(e,createjs.AbstractSoundInstance),n=e;n.context=null,n.destinationNode=null,n._panningModel="equalpower",t.destroy=function(){this.AbstractSoundInstance_destroy(),this.panNode.disconnect(0),this.panNode=null,this.gainNode.disconnect(0),this.gainNode=null},t.toString=function(){return"[WebAudioSoundInstance]"},t._updatePan=function(){this.panNode.setPosition(this._pan,0,-.5)},t._removeLooping=function(){this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)},t._addLooping=function(){this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},t._setDurationFromSource=function(){this._duration=1e3*this.playbackResource.duration},t._handleCleanUp=function(){this.sourceNode&&this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout),this._playbackStartTime=0},t._cleanUpAudioNode=function(e){return e&&(e.stop(0),e.disconnect(0),e=null),e},t._handleSoundReady=function(){this.gainNode.connect(n.destinationNode);var e=.001*this._duration,t=.001*this._position;t>e&&(t=e),this.sourceNode=this._createAndPlayAudioNode(n.context.currentTime-e,t),this._playbackStartTime=this.sourceNode.startTime-t,this._soundCompleteTimeout=setTimeout(this._endedHandler,1e3*(e-t)),0!=this._loop&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},t._createAndPlayAudioNode=function(e,t){var r=n.context.createBufferSource();r.buffer=this.playbackResource,r.connect(this.panNode);var i=.001*this._duration;return r.startTime=e+i,r.start(r.startTime,t+.001*this._startTime,i-t),r},t._pause=function(){this._position=1e3*(n.context.currentTime-this._playbackStartTime),this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout)},t._resume=function(){this._handleSoundReady()},t._updateVolume=function(){var e=this._muted?0:this._volume;e!=this.gainNode.gain.value&&(this.gainNode.gain.value=e)},t._calculateCurrentPosition=function(){return 1e3*(n.context.currentTime-this._playbackStartTime)},t._updatePosition=function(){this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),clearTimeout(this._soundCompleteTimeout),this._paused||this._handleSoundReady()},t._handleLoop=function(){this._cleanUpAudioNode(this.sourceNode),this.sourceNode=this._sourceNodeNext,this._playbackStartTime=this.sourceNode.startTime,this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0),this._soundCompleteTimeout=setTimeout(this._endedHandler,this._duration)},t._updateDuration=function(){this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._pause(),this._resume())},createjs.WebAudioSoundInstance=createjs.promote(e,"AbstractSoundInstance")}(),window.createjs=window.createjs||{},function(){"use strict";function e(){this.AbstractPlugin_constructor(),this._panningModel=n._panningModel,this.context=n.context,this.dynamicsCompressorNode=this.context.createDynamicsCompressor(),this.dynamicsCompressorNode.connect(this.context.destination),this.gainNode=this.context.createGain(),this.gainNode.connect(this.dynamicsCompressorNode),createjs.WebAudioSoundInstance.destinationNode=this.gainNode,this._capabilities=n._capabilities,this._loaderClass=createjs.WebAudioLoader,this._soundInstanceClass=createjs.WebAudioSoundInstance,this._addPropsToClasses()}var t=createjs.extend(e,createjs.AbstractPlugin),n=e;n._capabilities=null,n._panningModel="equalpower",n.context=null,n.isSupported=function(){var e=createjs.BrowserDetect.isIOS||createjs.BrowserDetect.isAndroid||createjs.BrowserDetect.isBlackberry;return"file:"!=location.protocol||e||this._isFileXHRSupported()?(n._generateCapabilities(),null==n.context?!1:!0):!1},n.playEmptySound=function(){if(null!=n.context){var e=n.context.createBufferSource();e.buffer=n.context.createBuffer(1,1,22050),e.connect(n.context.destination),e.start(0,0,0)}},n._isFileXHRSupported=function(){var e=!0,t=new XMLHttpRequest;try{t.open("GET","WebAudioPluginTest.fail",!1)}catch(n){return e=!1}t.onerror=function(){e=!1},t.onload=function(){e=404==this.status||200==this.status||0==this.status&&""!=this.response};try{t.send()}catch(n){e=!1}return e},n._generateCapabilities=function(){if(null==n._capabilities){var e=document.createElement("audio");if(null==e.canPlayType)return null;if(null==n.context)if(window.AudioContext)n.context=new AudioContext;else{if(!window.webkitAudioContext)return null;n.context=new webkitAudioContext}n._compatibilitySetUp(),n.playEmptySound(),n._capabilities={panning:!0,volume:!0,tracks:-1};for(var t=createjs.Sound.SUPPORTED_EXTENSIONS,r=createjs.Sound.EXTENSION_MAP,i=0,s=t.length;s>i;i++){var a=t[i],o=r[a]||a;n._capabilities[a]="no"!=e.canPlayType("audio/"+a)&&""!=e.canPlayType("audio/"+a)||"no"!=e.canPlayType("audio/"+o)&&""!=e.canPlayType("audio/"+o)}n.context.destination.numberOfChannels<2&&(n._capabilities.panning=!1)}},n._compatibilitySetUp=function(){if(n._panningModel="equalpower",!n.context.createGain){n.context.createGain=n.context.createGainNode;var e=n.context.createBufferSource();e.__proto__.start=e.__proto__.noteGrainOn,e.__proto__.stop=e.__proto__.noteOff,n._panningModel=0}},t.toString=function(){return"[WebAudioPlugin]"},t._addPropsToClasses=function(){var e=this._soundInstanceClass;e.context=this.context,e.destinationNode=this.gainNode,e._panningModel=this._panningModel,this._loaderClass.context=this.context},t._updateVolume=function(){var e=createjs.Sound._masterMute?0:this._volume;e!=this.gainNode.gain.value&&(this.gainNode.gain.value=e)},createjs.WebAudioPlugin=createjs.promote(e,"AbstractPlugin")}(),window.createjs=window.createjs||{},function(){"use strict";function e(){throw"HTMLAudioTagPool cannot be instantiated"}function t(){this._tags=[]}var n=e;n._tags={},n._tagPool=new t,n._tagUsed={},n.get=function(e){var t=n._tags[e];return null==t?(t=n._tags[e]=n._tagPool.get(),t.src=e):n._tagUsed[e]?(t=n._tagPool.get(),t.src=e):n._tagUsed[e]=!0,t},n.set=function(e,t){t==n._tags[e]?n._tagUsed[e]=!1:n._tagPool.set(t)},n.remove=function(e){var t=n._tags[e];return null==t?!1:(n._tagPool.set(t),delete n._tags[e],delete n._tagUsed[e],!0)},n.getDuration=function(e){var t=n._tags[e];return null==t?0:1e3*t.duration},createjs.HTMLAudioTagPool=e;var r=t.prototype;r.constructor=t,r.get=function(){var e;return e=0==this._tags.length?this._createTag():this._tags.pop(),null==e.parentNode&&document.body.appendChild(e),e},r.set=function(e){var t=createjs.indexOf(this._tags,e);-1==t&&(this._tags.src=null,this._tags.push(e))},r.toString=function(){return"[TagPool]"},r._createTag=function(){var e=document.createElement("audio");return e.autoplay=!1,e.preload="none",e}}(),window.createjs=window.createjs||{},function(){"use strict";function e(e,t,n,r){this.AbstractSoundInstance_constructor(e,t,n,r),this._audioSpriteStopTime=null,this._delayTimeoutId=null,this._endedHandler=createjs.proxy(this._handleSoundComplete,this),this._readyHandler=createjs.proxy(this._handleTagReady,this),this._stalledHandler=createjs.proxy(this._playFailed,this),this._audioSpriteEndHandler=createjs.proxy(this._handleAudioSpriteLoop,this),this._loopHandler=createjs.proxy(this._handleSoundComplete,this),n?this._audioSpriteStopTime=.001*(t+n):this._duration=createjs.HTMLAudioTagPool.getDuration(this.src)}var t=createjs.extend(e,createjs.AbstractSoundInstance);t.setMasterVolume=function(){this._updateVolume()},t.setMasterMute=function(){this._updateVolume()},t.toString=function(){return"[HTMLAudioSoundInstance]"},t._removeLooping=function(){null!=this._playbackResource&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},t._addLooping=function(){null==this._playbackResource||this._audioSpriteStopTime||(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)},t._handleCleanUp=function(){var e=this._playbackResource;if(null!=e){e.pause(),e.loop=!1,e.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),e.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),e.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),e.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),e.removeEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1);try{e.currentTime=this._startTime}catch(t){}createjs.HTMLAudioTagPool.set(this.src,e),this._playbackResource=null}},t._beginPlaying=function(e){return this._playbackResource=createjs.HTMLAudioTagPool.get(this.src),this.AbstractSoundInstance__beginPlaying(e)},t._handleSoundReady=function(){if(4!==this._playbackResource.readyState){var e=this._playbackResource;return e.addEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),e.addEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),e.preload="auto",
void e.load()}this._updateVolume(),this._playbackResource.currentTime=.001*(this._startTime+this._position),this._audioSpriteStopTime?this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1):(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),0!=this._loop&&(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)),this._playbackResource.play()},t._handleTagReady=function(){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),this._handleSoundReady()},t._pause=function(){this._playbackResource.pause()},t._resume=function(){this._playbackResource.play()},t._updateVolume=function(){if(null!=this._playbackResource){var e=this._muted||createjs.Sound._masterMute?0:this._volume*createjs.Sound._masterVolume;e!=this._playbackResource.volume&&(this._playbackResource.volume=e)}},t._calculateCurrentPosition=function(){return 1e3*this._playbackResource.currentTime-this._startTime},t._updatePosition=function(){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1);try{this._playbackResource.currentTime=.001*(this._position+this._startTime)}catch(e){this._handleSetPositionSeek(null)}},t._handleSetPositionSeek=function(){null!=this._playbackResource&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},t._handleAudioSpriteLoop=function(){this._playbackResource.currentTime<=this._audioSpriteStopTime||(this._playbackResource.pause(),0==this._loop?this._handleSoundComplete(null):(this._position=0,this._loop--,this._playbackResource.currentTime=.001*this._startTime,this._paused||this._playbackResource.play(),this._sendEvent("loop")))},t._handleLoop=function(){0==this._loop&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},t._updateStartTime=function(){this._audioSpriteStopTime=.001*(this._startTime+this._duration),this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},t._updateDuration=function(){this._audioSpriteStopTime=.001*(this._startTime+this._duration),this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},createjs.HTMLAudioSoundInstance=createjs.promote(e,"AbstractSoundInstance")}(),window.createjs=window.createjs||{},function(){"use strict";function e(){this.AbstractPlugin_constructor(),this.defaultNumChannels=2,this._capabilities=n._capabilities,this._loaderClass=createjs.SoundLoader,this._soundInstanceClass=createjs.HTMLAudioSoundInstance}var t=createjs.extend(e,createjs.AbstractPlugin),n=e;n.MAX_INSTANCES=30,n._AUDIO_READY="canplaythrough",n._AUDIO_ENDED="ended",n._AUDIO_SEEKED="seeked",n._AUDIO_STALLED="stalled",n._TIME_UPDATE="timeupdate",n._capabilities=null,n.isSupported=function(){return n._generateCapabilities(),null!=n._capabilities},n._generateCapabilities=function(){if(null==n._capabilities){var e=document.createElement("audio");if(null==e.canPlayType)return null;n._capabilities={panning:!1,volume:!0,tracks:-1};for(var t=createjs.Sound.SUPPORTED_EXTENSIONS,r=createjs.Sound.EXTENSION_MAP,i=0,s=t.length;s>i;i++){var a=t[i],o=r[a]||a;n._capabilities[a]="no"!=e.canPlayType("audio/"+a)&&""!=e.canPlayType("audio/"+a)||"no"!=e.canPlayType("audio/"+o)&&""!=e.canPlayType("audio/"+o)}}},t.register=function(e){var t=createjs.HTMLAudioTagPool.get(e.src),n=this.AbstractPlugin_register(e);return n.setTag(t),n},t.removeSound=function(e){this.AbstractPlugin_removeSound(e),createjs.HTMLAudioTagPool.remove(e)},t.create=function(e,t,n){var r=this.AbstractPlugin_create(e,t,n);return r.setPlaybackResource(null),r},t.toString=function(){return"[HTMLAudioPlugin]"},t.setVolume=t.getVolume=t.setMute=null,createjs.HTMLAudioPlugin=createjs.promote(e,"AbstractPlugin")}();if(typeof t==="object"){t.exports=window.createjs.Sound}},{}],20:[function(e,t,n){Number.prototype.lerp=function(e,t){return this+(e-this)*t};Function.prototype.inherit=function(e,t){if(!e||!_.isFunction(e)){throw"parent argument must be a function"}this.prototype=_.extend(Object.create(e.prototype),t)};Function.prototype.mixin=function(e){_.each(e,function(e,t){if(this.prototype[t]===undefined){this.prototype[t]=e}},this)}},{}],21:[function(e,t,n){e("20");e("14");e("18");var r=e("10");var i=e("6");var s=e("3");var a=e("29");var o=e("27");var u=e("22");var c=e("15").game;var l=e("16");var h=e("17");var d=document.querySelector("#preload");var p=e("13");var f=null;var v=false;window.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);window.iOS=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;if(!p.IGNORE_PIXEL_RATIO&&window.isMobile){window.PIXEL_RATIO=window.devicePixelRatio>1.5?1.5:window.devicePixelRatio}else{window.PIXEL_RATIO=1}s(d).on("done",function(){var e={};var t=new a({container:$("body"),context:e});var n=new o({el:$(".js-about"),context:e});t.on("showAbout",function(){n.show();t.veil()});n.on("close",function(){t.unveil()});t.checkContinue();t.show();t.once("pressPlay",function(){t.showSpinner();v=true;if(window.isMobile&&p.ALLOW_FULL_SCREEN){y()}},this);m("three",function(){var e=c.map(function(e){return i(p.paths.images,"game/",e)});var r=_.union(l.props,l.weapons,l.items,l.mobs);var s=_.union(h.props,h.weapons,h.items,h.level,h.effects,h.mobs);$.when(g(),u.loadImages(e),u.loadJSONMeshes(r),u.loadTextures(s)).done(function(){var e=window.initGame;delete window.initGame;u.parseMeshData(r);f=e(u.getCaches(),{about:n});if(p.AUTOPLAY||v){t.hide();f.startGame()}else{t.off("pressPlay");t.once("pressPlay",function(){if(window.isMobile&&p.ALLOW_FULL_SCREEN){y()}setTimeout(function(){t.hide();setTimeout(function(){f.startGame()},350)},150)})}})})});function g(){var e=new $.Deferred;m("game",function(){e.resolve()});return e.promise()}function m(e,t){r(i(p.paths.scripts,p.scripts[e]),t)}function y(){var e=document.getElementById("main-container");if(e.requestFullscreen){e.requestFullscreen()}else if(e.msRequestFullscreen){e.msRequestFullscreen()}else if(e.mozRequestFullScreen){e.mozRequestFullScreen()}else if(e.webkitRequestFullscreen){e.webkitRequestFullscreen()}}},{10:10,13:13,14:14,15:15,16:16,17:17,18:18,20:20,22:22,27:27,29:29,3:3,6:6}],22:[function(e,t,n){var r=e("13");var i=e("6");var s={};var a={};var o={};var u={};var c=_.object(_.flatten(_.map(e("16"),function(e,t){return _.map(e,function(e){return[e,t+"/"+e+".js"]})}),true));var l=_.object(_.flatten(_.map(e("17"),function(e,t){return _.map(e,function(e){return[e,t+"/"+e]})}),true));s.getCaches=function(){return[a,o,u]};s.setCaches=function(e,t,n){a=e;o=t;u=n};s.loadJSONMesh=function(e){if(!_.has(c,e)){throw"Unknown mesh id: "+e}if(_.has(a,e)){return(new $.Deferred).resolve(a[e]).promise()}return $.ajax({url:i(r.paths.models,c[e]),dataType:"text"}).pipe(function(t){a[e]=t;return t})};s.loadJSONMeshes=function(e){return $.when.apply($,_.map(e,s.loadJSONMesh))};s.parseMeshData=function(e){e.forEach(function(e){if(!_.has(a,e)){throw"No JSON found for id: "+e}if(_.has(o,e))return;var t=new THREE.JSONLoader;var n=JSON.parse(a[e]);var i=t.parse(n,r.paths.textures);var u;if(i.materials.length>1){u=new THREE.MeshFaceMaterial(i.materials)}else{u=i.materials[0]}var c=i.geometry;if(e!=="key"){c=(new THREE.BufferGeometry).fromGeometry(i.geometry)}if(i.geometry.animations&&i.geometry.animations.length>0){c.animations=i.geometry.animations;c.bones=i.geometry.bones;var l=i.geometry.skinIndices;var h=i.geometry.skinWeights;var d=i.geometry.faces;s.normalizeSkinIndices(l,h);var p=s.fillFloat32Array(l,d);c.addAttribute("skinIndex",new THREE.BufferAttribute(p,4));var f=s.fillFloat32Array(h,d);c.addAttribute("skinWeight",new THREE.BufferAttribute(f,4))}o[e]={geometry:c,material:u}})};s.fillFloat32Array=function(e,t){var n=new Float32Array(t.length*3*4);for(var r=0,i=0,s=t.length;r<s;r++,i+=3*4){var a=t[r];var o=e[a.a];var u=e[a.b];var c=e[a.c];n[i]=o.x;n[i+1]=o.y;n[i+2]=o.z;n[i+3]=o.w;n[i+4]=u.x;n[i+5]=u.y;n[i+6]=u.z;n[i+7]=u.w;n[i+8]=c.x;n[i+9]=c.y;n[i+10]=c.z;n[i+11]=c.w}return n};s.normalizeSkinIndices=function(e,t){for(var n=0;n<e.length;n++){var r=t[n];var i=1/r.lengthManhattan();if(i!==Infinity){r.multiplyScalar(i)}else{r.set(1)}}};s.getMeshData=function(e){if(!_.has(o,e)){s.parseMeshData([e])}return o[e]};s.loadTexture=function(e){var t=new $.Deferred;if(_.has(u,e)){t.resolve(u[e])}else{THREE.ImageUtils.loadTexture(i(r.paths.textures,l[e]),THREE.UVMapping,function(n){u[e]=n;t.resolve(n)})}return t.promise()};s.loadTextures=function(e){return $.when.apply($,_.map(e,s.loadTexture))};s.getTexture=function(e){if(!_.has(u,e)){throw"Texture not found: "+e}return u[e]};s.loadImage=function(e){var t=new $.Deferred;var n=new Image;n.onload=function(){t.resolve(n)};n.src=e;return t.promise()};s.loadImages=function(e){return $.when.apply($,_.map(e,s.loadImage))};t.exports=s},{13:13,16:16,17:17,6:6}],23:[function(e,t,n){var r={log:function(){var e=["send","event"];if(typeof ga==="undefined"){return}if(arguments.length>1){for(var t=0;t<arguments.length;t++){e.push(arguments[t])}}else{e.push(arguments[0]);e.push(arguments[0])}ga.apply(null,e)},logPageView:function(e){if(typeof ga==="undefined"){return}ga("send","pageview",e)}};t.exports=r},{}],24:[function(e,t,n){var r=function(e){e=_.extend({},{duration:1e3,repeat:false,onStart:function(){},onEnd:function(){}},e);this.duration=e.duration;this.repeat=e.repeat;this.startCallback=e.onStart;this.endCallback=e.onEnd;this.reset()};r.inherit(Object,{reset:function(){this.started=false;this.paused=false;this.ended=false;this.elapsedTime=0;return this},start:function(){if(this.started||this.ended)return this;this.started=true;this.startCallback();return this},stop:function(){if(!this.started)return this;return this.reset()},pause:function(){this.paused=true;return this},resume:function(){this.paused=false;return this},update:function(e){if(!this.started||this.paused||this.ended)return this;this.elapsedTime+=e.delta*1e3;if(this.elapsedTime>this.duration){this.endCallback();this.ended=true}return this}});t.exports=r},{}],25:[function(e,t,n){var r=e("24");var i={_timers:{}};i.delay=function(e,t,n){var s=_.uniqueId("timer_");var a=new r({duration:e,onEnd:function(){t.call(n);delete i._timers[s]}}).start();i._timers[s]=a;return a};i.repeat=function(e,t,n,r){i.delay(t,function(){n.call(r);if(e>1){i.repeat(e-1,t,n,r)}},r)};i.updateTimers=function(e){_.each(i._timers,function(t){t.update(e)})};i.clearTimers=function(){_.each(i._timers,function(e){e.onEnd=null});i._timers={}};t.exports=i},{24:24}],26:[function(e,t,n){var r={};r.getRandomInt=function(e,t){return Math.floor(Math.random()*(t-e))+e};r.getRandomFloat=function(e,t){return Math.random()*(t-e)+e};r.getRandomFromArray=function(e){return e[Math.floor(Math.random()*e.length)]};r.pad=function(e,t,n){n=n||"0";e=e+"";return e.length>=t?e:new Array(t-e.length+1).join(n)+e};r.getAspectRatio=function(){var e=window.innerWidth;var t=window.innerHeight;return t/e};t.exports=r},{}],27:[function(e,t,n){var r=e("28");var i=e("23");var s=r.extend({events:_.extend({},r.prototype.events,{"tap a":"stopPropagation","tap .js-ext-link":"onClickExternalLink"}),initialize:function(){},stopPropagation:function(e){e.stopPropagation()},show:function(){r.prototype.show.call(this);i.logPageView("/about")},onClickExternalLink:function(e){var t=$(e.target).attr("href");i.log("ext-link",t,"about")}});t.exports=s},{23:23,28:28}],28:[function(e,t,n){var r=e("30");var i=e("12");var s=r.extend({events:{tap:"onTap","tap .js-close":"close"},initialize:function(){},onTap:function(e){if(!$(e.target).is(".inner")&&$(e.target).parents(".inner").length===0){this.hide();this.trigger("close")}},show:function(){this.$el.addClass("visible")},hide:function(){this.$el.removeClass("visible")},close:function(e){this.hide();this.trigger("close");e.stopPropagation();e.preventDefault()}});t.exports=s},{12:12,30:30}],29:[function(e,t,n){var r=e("30");var i=e("25");var s=e("23");var a=r.extend({template:"home.html",events:{"tap .js-more-info":"showAbout","touchstart .js-play-button":"touchstartButton","touchend .js-play-button":"touchendButton","tap .js-play-button":"onTapPlayButton","tap .js-ext-link":"onClickExternalLink"},initialize:function(){this.$playButton=this.$(".js-play-button");this.$content=this.$(".js-title-screen");this.$moreInfo=this.$(".js-more-info");if(window.isMobile){this.$el.addClass("mobile")}},show:function(){this.$content.addClass("visible")},hide:function(){this.$content.addClass("fadeout");setTimeout(function(){this.$content.removeClass("fadeout visible")}.bind(this),350)},showAbout:function(e){this.trigger("showAbout");e.stopPropagation();e.preventDefault()},veil:function(){this.$el.addClass("veiled")},unveil:function(){this.$el.removeClass("veiled")},touchstartButton:function(){this.$playButton.addClass("pressed")},touchendButton:function(){this.$playButton.removeClass("pressed")},onTapPlayButton:function(){this.$playButton.removeClass("pressed");this.trigger("pressPlay")},showSpinner:function(){this.$playButton.addClass("waiting");this.$moreInfo.addClass("hidden")},onClickExternalLink:function(e){var t=$(e.target).closest(".js-ext-link").attr("href");s.log("ext-link",t,"home")},checkContinue:function(){var e=localStorage.getItem("gs");if(!e)return;try{var t=atob(e);JSON.parse(t);this.$playButton.addClass("continue")}catch(n){}}});t.exports=a},{23:23,25:25,30:30}],30:[function(e,t,n){var r=e("11");var i=Backbone.View.extend({constructor:function(e){e||(e={});this.cid=_.uniqueId("view");_.extend(this,_.pick(e,s));this._ensureElement();this.delegateEvents();this._options=e;this._container=e.container;this._context=e.context;this._views=this.views;this.views={};if(this.template){this._renderTemplate(e.context);this._insert()}if(e.willInitialize&&_.isFunction(e.willInitialize)){this.setElement(e.willInitialize.call(this));delete e.willInitialize}this._initSubViews(e);this.initialize.apply(this,arguments)},_forEachSubView:function(e){_.each(this._views,function(t,n){var r=_.keys(t)[0];var i=t[r];var s=this.$(r);if(!n||!i){throw"`views` is not declared correctly"}if(s.length==0){throw"Selector of sub-view container is invalid"}e.call(this,n,i,s)},this)},_initSubViews:function(e){this._forEachSubView(function(t,n,r){var i=_.clone(e);i.container=r;this.addSubView(t,new n(i))})},addSubView:function(e,t){this.views[e]=t;t.on("all",function(){this.trigger.apply(this,arguments)},this);if(t._context===undefined){t._context=this._context}return t},_renderTemplate:function(e){var t=$(r.render(this.template,e));this.setElement(t)},_insert:function(){if(this._container){this._container.append(this.$el)}},_renderSubViews:function(e){this._forEachSubView(function(t,n,r){this.views[t]._container=r;this.views[t].render(e)},this)},render:function(e){e=e||this._context;if(this.$el)this.$el.remove();this.dispose();this._renderTemplate(e);this._insert();this._renderSubViews(e);this.initialize(this._options);return this},dispose:function(){},show:function(){this.$el.show();this._container.scrollTop(1);return this},hide:function(){this.$el.hide();return this},isVisible:function(){return this.$el.is(":visible")}});var s=["model","collection","el","id","attributes","className","tagName","events"];t.exports=i},{11:11}]},{},[21]);