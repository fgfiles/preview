!function e(t,i,n){function o(a,s){if(!i[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=i[a]={exports:{}};t[a][0].call(c.exports,function(e){var i=t[a][1][e];return o(i?i:e)},c,c.exports,e,t,i,n)}return i[a].exports}for(var r="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t,i){!function(e){var i=/iPhone/i,n=/iPod/i,o=/iPad/i,r=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,a=/Android/i,s=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,l=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,u=/Windows Phone/i,c=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,h=/BlackBerry/i,_=/BB10/i,f=/Opera Mini/i,p=/(CriOS|Chrome)(?=.*\bMobile\b)/i,d=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,y=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),v=function(e,t){return e.test(t)},w=function(e){var t=e||navigator.userAgent,w=t.split("[FBAN");if("undefined"!=typeof w[1]&&(t=w[0]),w=t.split("Twitter"),"undefined"!=typeof w[1]&&(t=w[0]),this.apple={phone:v(i,t),ipod:v(n,t),tablet:!v(i,t)&&v(o,t),device:v(i,t)||v(n,t)||v(o,t)},this.amazon={phone:v(s,t),tablet:!v(s,t)&&v(l,t),device:v(s,t)||v(l,t)},this.android={phone:v(s,t)||v(r,t),tablet:!v(s,t)&&!v(r,t)&&(v(l,t)||v(a,t)),device:v(s,t)||v(l,t)||v(r,t)||v(a,t)},this.windows={phone:v(u,t),tablet:v(c,t),device:v(u,t)||v(c,t)},this.other={blackberry:v(h,t),blackberry10:v(_,t),opera:v(f,t),firefox:v(d,t),chrome:v(p,t),device:v(h,t)||v(_,t)||v(f,t)||v(d,t)||v(p,t)},this.seven_inch=v(y,t),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},b=function(){var e=new w;return e.Class=w,e};"undefined"!=typeof t&&t.exports&&"undefined"==typeof window?t.exports=w:"undefined"!=typeof t&&t.exports&&"undefined"!=typeof window?t.exports=b():"function"==typeof define&&define.amd?define("isMobile",[],e.isMobile=b()):e.isMobile=b()}(this)},{}],2:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function p(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("./Common"),c=n(u),h=e("./race/RaceCar"),_=n(h),f=function(e){function t(e,i){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return n.acceleration=3.32,n._targetX=0,n._powerupDesire=0,n._baseAccel=0,n}return a(t,e),s(t,[{key:"init",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this),this._targetX=this.offset.x,this._powerupDesire=600*Math.random(),this._baseAccel=this.acceleration,delay(function(){this.applyTargetNoise()},2+4*Math.random(),this)}},{key:"update",value:function(e){var i=c["default"].game.getRacePos(this),n=c["default"].game.getCars();this.acceleration=this._baseAccel+Math.pow(i/n.length*.2,2);var o=this.isSeekingPowerup?this.seekPowerup():null,r=void 0;r=o?o.offset.x:this._targetX+8400*this.engine.getAverageTrackCurvature(this.distance);var a=640;Math.abs(r)>a&&(r=r/Math.abs(r)*a);var s=r-this.offset.x,u=s/Math.abs(s),h=1.6,_=280;s>_?this.turnSpeed=u*this.turnAccel:this.turnSpeed=u*(this.turnAccel*Math.min(1,Math.abs(s/_))),this.turnSpeed/=h,this._powerupDesire+=this.getPowerupDesireModifier(),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e)}},{key:"updateView",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateView",this).call(this,e);var i=4*this.engine.getAverageTrackCurvature(this.distance,2);i+=1.4*this.getPerpTo(this.engine.camera.target),i+=.0014*-this.screenPosition.x;var n=this.engine.getTrackGradient(this.distance)-this.engine.getTrackGradient(this.engine.camera.target.distance);this._view.update(e,this.distance,160*i,.6*n,this.velocity,.08*this.turnVelocity,this._jumpOffset)}},{key:"usePowerup",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"usePowerup",this).call(this,e),this._powerupDesire=0}},{key:"seekPowerup",value:function(){for(var e=Number.MAX_SAFE_INTEGER,t=null,i=c["default"].game.getPickups(),n=0;n<i.length;++n){var o=i[n];if(!o.collected){var r=Math.abs(o.offset.x-this.offset.x),a=o.distance-this.distance;a>0&&a<16&&r<e&&(t=o,e=r)}}return t}},{key:"getOvertakeDesireModifier",value:function(){}},{key:"getPowerupDesireModifier",value:function(){var e=c["default"].game.getCars();return(e.indexOf(this)+1)/e.length*.6}},{key:"applyTargetNoise",value:function(){this._targetX=p3.Utils.randomInt(1140,-1140),delay(function(){this.applyTargetNoise()},4+6*Math.random(),this)}},{key:"isSeekingPowerup",get:function(){return this._powerupDesire>600}}]),t}(_["default"]);i["default"]=f},{"./Common":7,"./race/RaceCar":53}],3:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=e("./scenes/CharacterScene"),s=n(a),l=e("./scenes/ConfirmQuitScene"),u=n(l),c=e("./Common"),h=n(c),_=e("./scenes/GameScene"),f=n(_),p=e("./scenes/PauseScene"),d=n(p),y=e("./scenes/ResultsScene"),v=n(y),w=e("./scenes/SplashScene"),b=n(w),g=e("./scenes/ThemeLoaderScene"),m=n(g),x=function(){function e(){o(this,e),this._overlay=null}return r(e,[{key:"init",value:function(){this.showSplashScene()}},{key:"showSplashScene",value:function(e){h["default"].paused=!1;var t=new b["default"];return t.signals.next.add(function(){this.showCharacterScene()},this),e=e||new p3.FadeTransition,h["default"].scene.add(t,e),t}},{key:"showCharacterScene",value:function(e){var t=new s["default"];return t.signals.next.add(function(e,t){h["default"].playerDriverId=t,this.showThemeLoaderScene()},this),t.signals.home.add(function(){this.showSplashScene()},this),e=e||new p3.FadeTransition,h["default"].scene.add(t,e),t}},{key:"showThemeLoaderScene",value:function(e){var t=new m["default"];return t.signals.next.add(function(e){this.showGameScene(h["default"].isFirstTime)},this),e=e||new p3.FadeTransition,h["default"].scene.add(t,e),t}},{key:"showGameScene",value:function(e,t,i){h["default"].paused=!1;var n=new f["default"](e,t);return n.signals.next.add(function(e,t){this.showResultsScene(h["default"].playerDriverId,t)},this),n.signals.pause.add(function(){n.pauseGame(),this.showOverlay(!0),this.showPauseScene()},this),i=i||new p3.FadeTransition,h["default"].scene.add(n,i),n}},{key:"showPauseScene",value:function(e){h["default"].paused=!0;var t=new d["default"];return t.signals.home.add(function(){this.showConfirmQuitScene()},this),t.signals.next.add(function(){h["default"].paused=!1,this.hideOverlay(!0),h["default"].scene.remove()},this),t.signals.previous.add(function(e){this.showGameScene()},this),e||(e=new p3.Transition,e.push=!0,e.replace=!1),h["default"].scene.add(t,e),t}},{key:"showConfirmQuitScene",value:function(e){var t=new u["default"];return t.signals.next.add(function(){this.showSplashScene()},this),t.signals.previous.add(function(){h["default"].scene.remove()},this),e||(e=new p3.Transition,e.push=!0,e.replace=!0),h["default"].scene.add(t,e),t}},{key:"showResultsScene",value:function(e,t,i){var n=new v["default"](e,t);return n.signals.home.add(function(){this.showSplashScene()},this),n.signals.next.add(function(){this.showCharacterScene()},this),n.signals.previous.add(function(){this.showGameScene(!1,!0)},this),i=i||new p3.FadeTransition,h["default"].scene.add(n,i),n}},{key:"showOverlay",value:function(e,t,i){this.hideOverlay(),this._overlay=new PIXI.Sprite(h["default"].blankTexture),this._overlay.width=p3.View.width,this._overlay.height=p3.View.height,this._overlay.tint=2625926,h["default"].scene.view.addChild(this._overlay),e?(this._overlay.alpha=0,TweenMax.to(this._overlay,.2,{alpha:.6,ease:Power1.easeInOut,onComplete:t,onCompleteScope:i})):this._overlay.alpha=.6}},{key:"hideOverlay",value:function(e,t,i){this._overlay&&(e?TweenMax.to(this._overlay,.2,{alpha:0,ease:Power1.easeInOut,onComplete:function(){this._overlay.parent.removeChild(this._overlay),this._overlay.destroy(),this._overlay=null,t&&t.call(i)},onCompleteScope:this}):(this._overlay.parent.removeChild(this._overlay),this._overlay.destroy(),this._overlay=null))}}]),e}();i["default"]=x},{"./Common":7,"./scenes/CharacterScene":64,"./scenes/ConfirmQuitScene":65,"./scenes/GameScene":66,"./scenes/PauseScene":67,"./scenes/ResultsScene":68,"./scenes/SplashScene":69,"./scenes/ThemeLoaderScene":70}],4:[function(e,t,i){"use strict";function n(){this.id=-1,this.howl=null}t.exports=n,n.prototype.destroy=function(){this._onend&&this.howl.off("end",this._onend),this.stop()},n.prototype.play=function(){this.howl.play(this.id)},n.prototype.stop=function(){this.howl.stop(this.id)},n.prototype.pause=function(){this.howl.pause(this.id)}},{}],5:[function(e,t,i){"use strict";function n(){this._cache={},this._music=null,this._isMuted=!1;var e;"undefined"!=typeof document.hidden?(e="hidden",this.visibilityChange="visibilitychange"):"undefined"!=typeof document.mozHidden?(e="mozHidden",this.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(e="msHidden",this.visibilityChange="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(e="webkitHidden",this.visibilityChange="webkitvisibilitychange"),document.addEventListener(this.visibilityChange,function(){document[e]?Howler.volume(0):Howler.volume(1)},!1)}var o=e("./Audio"),r=e("./AudioParams");t.exports=n,n.prototype.addSounds=function(e,t,i){i=i||"";var n,o,r,a,s,l,u;for(l=0;l<e.length;++l){for(r=i+e[l],r=r.split("/"),o=r[r.length-1],a=[],u=0;u<t.length;++u)s=t[u],a.push(r.join("/")+s);n=new Howl({src:a,volume:1,loop:!1,autoplay:!1}),n.name=o,this._cache[o]=n}},n.prototype.addSoundSprite=function(e,t,i,n){n=n||"";var o,r=n+e;r=r.split("/");for(var a=[],s=0;s<i.length;++s)o=i[s],a.push(r.join("/")+o);var l=new Howl({src:a,sprite:t,volume:1,loop:!1,autoplay:!1});l.isSoundSprite=!0;for(var u in t)t.hasOwnProperty(u)&&(this._cache[u]=l)},n.prototype.removeSounds=function(e){for(var t,i,n,o=0;o<e.length;++o){t=e[o];for(i in this._cache)if(this._cache.hasOwnProperty(key)&&(n=this._cache[key],n.name===i)){n.unload(),delete this._cache[t];break}}},n.prototype.playSound=function(e,t){t=t||new r;var i=-1;"string"!=typeof e&&(e=e[Math.floor(Math.random()*e.length)]);var n=this._cache[e];if(!n)return console.warn("Could not find sound - "+e),i;i=n.isSoundSprite?n.play(e):n.play(),n.volume(t.volume,i),n.loop(t.loop,i);var a=new o;return a.id=i,a.howl=n,t.callback&&(a._onend=function(){t.callback.call(t.scope)},n.on("end",a._onend)),a},n.prototype.playMusic=function(e,t){t=t||new r;var i=-1;if("string"!=typeof e&&(e=e[Math.floor(Math.random()*e.length)]),this._music&&this._music.howl.name===e)return this._music;var n=this._cache[e];if(!n)return console.warn("Could not find music - "+e),null;p3.Device&&p3.Device.isAndroidStockBrowser&&(n.buffer=!0),i=n.play(),n.volume(t.volume,i),n.loop(!0,i);var a=new o;return a.id=i,a.howl=n,t.callback&&(a._onend=function(){t.callback.call(t.scope)},n.on("end",a._onend)),t.fadeIn>0?(this._music&&this.fadeOut(this._music,t.fadeIn,function(e){e.destroy()},this),this.fadeIn(a,t.fadeIn)):this.stopMusic(),this._music=a,a},n.prototype.stopSound=function(e,t){var i=this._cache[e];!i&&console.warn("Could not find sound - "+e),i.stop(t),console.warn("'AudioManager.stopSound()' is deprecated. Use 'Audio.stop()' instead.")},n.prototype.stopMusic=function(){this._music&&(this._music.destroy(),this._music=null)},n.prototype.mute=function(e){this._isMuted=e,this._isMuted?Howler.mute(!0):Howler.mute(!1)},n.prototype.fadeIn=function(e,t,i,n){t=t||1;var o=e.howl.volume(e.id);e.howl.volume(0,e.id),e.__volume=0,TweenMax.killTweensOf(e),TweenMax.to(e,t,{__volume:o,ease:Power1.easeInOut,onUpdate:function(){e.howl.volume(e.__volume,e.id)},onUpdateScope:this,onComplete:i,onCompleteParams:[e],onCompleteScope:n})},n.prototype.fadeOut=function(e,t,i,n){t=t||1,e.__volume=e.howl.volume(e.id),TweenMax.killTweensOf(e),TweenMax.to(e,t,{__volume:0,ease:Power1.easeInOut,onUpdate:function(){e.howl.volume(e.__volume,e.id)},onUpdateScope:this,onComplete:i,onCompleteParams:[e],onCompleteScope:n})},n.prototype.setAudioPos3D=function(e,t,i,n,o){if(!p3.Device.isMobile&&p3.Device.bowser.chrome){n=n||0,o=o||320;var r=i.findLayerForObject(t),a=t.x*(1/r.parallax.x),s=a-i.position.x;s/=Math.abs(s),s==-1?a=Math.min(0,(a+n-i.position.x)/(o-n)):1==s&&(a=Math.max(0,(a-n-i.position.x)/(o-n))),e.howl.pos(a,0,0,e.id)}},n.prototype.setAudioPosStereo=function(e,t,i,n,o,r,a){!p3.Device.isMobile&&p3.Device.bowser.chrome||(a=!0),n=n||0,o=o||320,r=r||0;var s=i.findLayerForObject(t),l=(t.x+r)*(1/s.parallax.x),u=l-i.position.x;u/=Math.abs(u),l=Math.max(0,Math.abs(l-n-i.position.x)/o),l=Math.max(0,Math.min(1,1+(1-l))),e.howl.volume(l,e.id),a||(l=(t.x+r)*(1/s.parallax.x),u==-1?l=Math.min(0,(l+n-i.position.x)/(o-n)):1==u&&(l=Math.max(0,(l-n-i.position.x)/(o-n))),l=Math.max(-1,Math.min(1,l)),e.howl.stereo(l,e.id))},Object.defineProperty(n.prototype,"isMute",{get:function(){return this._isMuted}})},{"./Audio":4,"./AudioParams":6}],6:[function(e,t,i){"use strict";function n(){this.volume=1,this.loop=!1,this.delay=0,this.fadeIn=0,this.priority=0,this.callback=null,this.scope=window}t.exports=n},{}],7:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=function(){function e(){n(this,e)}return o(e,null,[{key:"getHighscore",value:function(){var e=window.localStorage.cn_wackyraces;return e||0}},{key:"saveHighscore",value:function(t){t>e.getHighscore()&&(window.localStorage.cn_wackyraces=t)}}]),e}();i["default"]=r,r.STAGE_WIDTH=1900,r.STAGE_HEIGHT=768,r.PHYSICS_TICK=1/30,r.RACE_ENTITY_SCALE=764,r.stage=null,r.renderer=null,r.timestep=null,r.tracking=null,r.audio=null,r.camera=null,r.copy=null,r.config=null,r.language="en",r.touch=new PIXI.Point(0,0),r.touching=!1,r.paused=!1,r.isWebGL=!1,r.isFirstTime=!0,r.blankTexture=PIXI.Texture.EMPTY,r.playerDriverId=0,r.previousTrackName=null},{}],8:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=e("./Common"),u=n(l),c=e("./RaceLadder"),h=n(c),_=e("./StartingLights"),f=n(_),p=function(e){function t(){o(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._pauseButton=null,e._ladder=null,e._laps=null,e._lapsLabel=null,e._lights=null,e.on("added",e.init,e),e}return a(t,e),s(t,[{key:"init",value:function(){this.off("added",this.init);var e=u["default"].assets,t=new p3.ButtonStates;t.normal=e.getTexture("ui_btn_out"),t.over=e.getTexture("ui_btn_over"),t.down=e.getTexture("ui_btn_down"),t.icon=e.getTexture("ui_icon_pause"),this._pauseButton=new p3.Button(t),this._pauseButton.overSoundName="sfx_btn_rollover_00",this._pauseButton.clickSoundName="sfx_btn_press_00",this.addChild(this._pauseButton),this._ladder=new h["default"],this.addChild(this._ladder),this._laps=new PIXI.Sprite(e.getTexture("ui_icon_laps")),this._laps.x=.5*u["default"].STAGE_WIDTH-28,this._laps.y=80,this._laps.anchor=new PIXI.Point(.5,.5),this._laps.visible=!1,this.addChild(this._laps),this._laps.label=new PIXI.BitmapText("99/99",font(42,"center")),this._laps.label.x=28,this._laps.label.y=2,this._laps.label.pivot.x=.5*this._laps.label.textWidth,this._laps.label.pivot.y=.5*this._laps.label.textHeight,this._laps.addChild(this._laps.label)}},{key:"resize",value:function(){this._pauseButton.x=.5*(u["default"].STAGE_WIDTH+p3.View.width)-100,this._pauseButton.y=100,this._ladder.x=.5*(u["default"].STAGE_WIDTH-p3.View.width)+120,this._ladder.y=60}},{key:"update",value:function(){this._ladder.update()}},{key:"runCountdown",value:function(e,t,i){this._lights=new f["default"],this._lights.x=.5*u["default"].STAGE_WIDTH,this._lights.y=.5*u["default"].STAGE_HEIGHT-280,this.addChild(this._lights),this._lights.animateIn(function(){this._lights.start(e,function(){t&&t.call(i),this._lights.animateOut(function(){this._lights.destroy(),this._laps.alpha=0,TweenMax.to(this._laps,.4,{alpha:1,ease:Power1.easeInOut,onStart:function(){this._laps.visible=!0},onStartScope:this})},this)},this)},this)}},{key:"setLaps",value:function(e,t){this._laps.label.text=e+"/"+t,this._laps.label.pivot.x=.5*this._laps.label.textWidth}},{key:"pauseButton",get:function(){return this._pauseButton}},{key:"ladder",get:function(){return this._ladder}},{key:"startingLights",get:function(){return this._lights}}]),t}(PIXI.Container);i["default"]=p},{"./Common":7,"./RaceLadder":15,"./StartingLights":17}],9:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=e("ismobilejs"),s=n(a),l=function(){function e(){o(this,e),this.signals={mouseMove:new signals.Signal,mouseDown:new signals.Signal,mouseUp:new signals.Signal,mouseClick:new signals.Signal,keyDown:new signals.Signal,keyUp:new signals.Signal,orientation:new signals.Signal,swipeLeft:new signals.Signal,swipeRight:new signals.Signal},this._stage=null,this._keyMap={},this._keyBuffer={},this._touch=null,this._orientation={gamma:0,beta:0,alpha:0},this._swipeStart=null,this._swipeTime=0}return r(e,[{key:"init",value:function(e,t){this._stage=e,this._stage.interactive=!0,this._stage.mousemove=this._stage.touchmove=this._onMouseMove.bind(this),this._stage.mousedown=this._stage.touchstart=this._onMouseDown.bind(this),this._stage.mouseup=this._stage.touchend=this._onMouseUp.bind(this),this._stage.click=this._stage.tap=this._onMouseClick.bind(this),t.onkeydown=this._onKeyDown.bind(this),t.onkeyup=this._onKeyUp.bind(this),t.focus(),document.onclick=function(){t.focus()},s["default"].any&&window.addEventListener("deviceorientation",this._onDeviceOrientation.bind(this))}},{key:"destroy",value:function(){this._stage.mousemove=this._stage.touchmove=null,this._stage.mousedown=this._stage.touchstart=null,this._stage.mouseup=this._stage.touchend=null,this._stage.click=this._stage.tap=null,s["default"].any&&window.removeEventListener("deviceorientation",this._onDeviceOrientation.bind(this)),this.signals.mouseMove.dispose(),this.signals.mouseDown.dispose(),this.signals.mouseUp.dispose(),this.signals.mouseClick.dispose(),this.signals.keyDown.dispose(),this.signals.keyUp.dispose(),this.signals.orientation.dispose(),this.signals.swipeLeft.dispose(),this.signals.swipeRight.dispose()}},{key:"update",value:function(){for(var e in this._keyBuffer)this._keyBuffer.hasOwnProperty(e)&&(this._keyBuffer[e]=!1)}},{key:"isKeyDown",value:function(e){return this._keyMap[e]===!0}},{key:"isKeyPressed",value:function(e){return this._keyBuffer[e]===!0}},{key:"_onMouseMove",value:function(e){this._touch&&(this._touch=e.data.getLocalPosition(this._stage)),this.signals.mouseMove.dispatch(e)}},{key:"_onMouseDown",value:function(e){this._touch=e.data.getLocalPosition(this._stage),s["default"].any&&(this._swipeStart=this._touch.clone(),this._swipeTime=window.performance.now()),this.signals.mouseDown.dispatch(e)}},{key:"_onMouseUp",value:function(e){if(s["default"].any){var t=new p3.Vector2(this._touch.x-this._swipeStart.x,this._touch.y-this._swipeStart.y);if(t.normalize(1),window.performance.now()-this._swipeTime<800){var i=t.dotProduct(new p3.Vector2((-1),0));i>.9&&this.signals.swipeLeft.dispatch();var n=t.dotProduct(new p3.Vector2(1,0));n>.9&&this.signals.swipeRight.dispatch()}}this._touch=null,this.signals.mouseUp.dispatch(e)}},{key:"_onMouseClick",value:function(e){this.signals.mouseClick.dispatch(e)}},{key:"_onKeyDown",value:function(e){!this.isKeyDown(e.keyCode)&&(this._keyBuffer[e.keyCode]=!0),this._keyMap[e.keyCode]=!0,this.signals.keyDown.dispatch(e)}},{key:"_onKeyUp",value:function(e){this._keyMap[e.keyCode]=!1,this.signals.keyUp.dispatch(e)}},{key:"_onDeviceOrientation",value:function(e){this.signals.orientation.dispatch(e)}},{key:"touch",get:function(){return this._touch}},{key:"orientation",get:function(){return this._orientation}}]),e}();i["default"]=l,l.keys={},l.keys.W=87,l.keys.A=65,l.keys.S=83,l.keys.D=68,l.keys.Z=90,l.keys.X=88,l.keys.C=67,l.keys.LEFT=37,l.keys.RIGHT=39,l.keys.UP=38,l.keys.DOWN=40,l.keys.SPACE=32,l.keys.ENTER=13},{ismobilejs:1}],10:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=e("./Application"),s=n(a),l=e("./AudioManager"),u=n(l),c=e("./scenes/BoomerangPreloaderScene"),h=n(c),_=e("./Common"),f=n(_),p=e("./Input"),d=n(p),y=function(){function e(t,i){o(this,e),this._width=t,this._height=i,this._preloader=null,this._game=null}return r(e,[{key:"init",value:function(){f["default"].assets=p3.AssetManager.instance,f["default"].audio=p3.Button.audio=new u["default"],f["default"].language=language;var e=new p3.ViewParams;e.holderId="game",e.width=this._width,e.height=this._height,e.rotateImageUrl="./assets/images/localisation/rotate_"+language+".jpg",e.rotateImageColor="#000000",PIXI.settings.RETINA_PREFIX=/\_(?=[^_]*$)(.+)x/,PIXI.settings.MIPMAP_TEXTURES=!1,p3.Device.init(window.bowser),TweenMax.defaultOverwrite="none",TweenMax.ticker.fps(60);var t=new p3.View(e);t.signals.ready.addOnce(function(t){var i={};i.view=t,i.transparent=!1,i.antialias=!1,i.preserveDrawingBuffer=!1,i.resolution=1;var n=new PIXI.Container;f["default"].stage=n;var o=new d["default"];o.init(n,t),f["default"].input=o,p3.Device.isCocoonJS&&(n.scale.x=window.innerHeight/e.height,n.scale.y=window.innerHeight/e.height);var r=p3.Device.isCocoonJS?new PIXI.WebGLRenderer(window.innerWidth,window.innerHeight,i):PIXI.autoDetectRenderer(this._width,this._height,i);r.backgroundColor=0,f["default"].renderer=r,f["default"].isWebGL=r instanceof PIXI.WebGLRenderer;var a=new p3.SceneManager(r);a.updateAll=!0,f["default"].scene=a,f["default"].stage.addChild(a.view);var s=new PIXI.Graphics;s.beginFill(16777215),s.drawRect(0,0,1,1),s.endFill(),f["default"].blankTexture=s.generateTexture(),PIXI.ticker.shared.add(function(e){window.deltaTime=1/60,a.update(),o.update(),r.render(f["default"].stage)},this),window.delay=function(e,t,i){return TweenMax.delayedCall(t,e,[],i)},window.translate=function(e){var t=f["default"].config.strings[e];return t=t&&t[f["default"].language],"undefined"!=typeof t?t:e},window.font=function(e,t){switch(t=t||"left",language){case"tr":case"ro":case"pl":return e+=10,e>64?{font:e+"px Cervo",align:t}:{font:e+"px Cervo",align:t};default:return e>64?{font:e+"px Antique Olive Std",align:t}:{font:e+"px Antique Olive Std",align:t}}},this.loadPreloader()},this),t.signals.resize.add(this.onCanvasResize,this),f["default"].view=t}},{key:"loadPreloader",value:function(){var e=[{name:"characters",url:"data/characters.json"},{name:"strings",url:"data/strings.json"},{name:"preloader_1x",url:"images/preloader_1x.json"},{name:"antique_64",url:"fonts/antique_64.xml"},{name:"cervo_64",url:"fonts/cervo_64.xml"},{name:"noto_64",url:"fonts/noto_64.xml"}];e.length?(f["default"].assets.addFiles(e,"assets/"),f["default"].assets.signals.complete.addOnce(function(){this.createConfig(),this.loadAssets()},this),f["default"].assets.load()):this.loadAssets()}},{key:"loadAssets",value:function(){var e=[{name:"track01",url:"data/tracks/track01.json"},{name:"track02",url:"data/tracks/track02.json"},{name:"track03",url:"data/tracks/track03.json"},{name:"track04",url:"data/tracks/track04.json"},{name:"track05",url:"data/tracks/track05.json"},{name:"vehicle_pussycat_1x",url:"images/vehicle_pussycat_1x.json"},{name:"vehicle_turbo_1x",url:"images/vehicle_turbo_1x.json"},{name:"vehicle_dastardly_1x",url:"images/vehicle_dastardly_1x.json"},{name:"vehicle_grusome_1x",url:"images/vehicle_grusome_1x.json"},{name:"vehicle_iq_1x",url:"images/vehicle_iq_1x.json"},{name:"ui_splash",url:"images/ui_splash.jpg"},{name:"ui_char_bg",url:"images/ui_char_bg_1x.jpg"},{name:"ui_loading",url:"images/ui_loading.jpg"},{name:"ui0_1x",url:"images/ui0_1x.json"},{name:"ui1_1x",url:"images/ui1_1x.json"},{name:"ui2_1x",url:"images/ui2_1x.json"},{name:"powerups_1x",url:"images/powerups_1x.json"},{name:"logo",url:"images/localisation/logo_en.png"},{name:"ui_tut_circle",url:"images/ui_tut_circle.png"},{name:"particle_emitter_missile_normal_trail",url:"particles/particle_emitter_missile_normal_trail.json"},{name:"particle_emitter_missile_smart_trail",url:"particles/particle_emitter_missile_smart_trail.json"},{name:"particle_emitter_powerup_butterflies",url:"particles/particle_emitter_powerup_butterflies.json"},{name:"particle_emitter_powerup_butterflies2",url:"particles/particle_emitter_powerup_butterflies2.json"},{name:"particle_emitter_powerup_bubbles",url:"particles/particle_emitter_powerup_bubbles.json"},{name:"particle_emitter_powerup_bubbles2",url:"particles/particle_emitter_powerup_bubbles2.json"},{name:"particle_emitter_glue_puddle_00",url:"particles/particle_emitter_glue_puddle_00.json"},{name:"particle_emitter_flameon_00",url:"particles/particle_emitter_flameon_00.json"},{name:"particle_emitter_lightning_speed_00",url:"particles/particle_emitter_lightning_speed_00.json"},{name:"particle_emitter_powerup_steamahead",url:"particles/particle_emitter_powerup_steamahead.json"},{name:"particle_emitter_offtrack_dust_00",url:"particles/particle_emitter_offtrack_dust_00.json"},{name:"particle_emitter_explosion_00",url:"particles/particle_emitter_explosion_00.json"},{name:"particle_emitter_impact_left_00",url:"particles/particle_emitter_impact_left_00.json"},{name:"particle_emitter_impact_right_00",url:"particles/particle_emitter_impact_right_00.json"},{name:"particle_emitter_candy_blast_00",url:"particles/particle_emitter_candy_blast_00.json"},{name:"particle_emitter_trophy_stars_00",url:"particles/particle_emitter_trophy_stars_00.json"}],t=["sfx_btn_press_00","sfx_btn_rollover_00","sfx_btn_nextcar_00","sfx_car_land_00","sfx_whistle_rise_00","sfx_whistle_fall_00","sfx_crowd_cheer_00","sfx_fanfare_00","sfx_carsrush_by_00","sfx_cockerel_cry_00","sfx_change_race_position_00","ui_tracks_poster_reveal_00","sfx_car_hit_00","sfx_car_hit_01","sfx_car_hit_02","sfx_car_hit_03","sfx_car_hit_04","sfx_car_hit_05","sfx_car_hit_06","sfx_car_hit_07","sfx_car_hit_08","sfx_car_hit_09","sfx_car_hit_10","sfx_generic_race_loop_00","sfx_generic_race_loop_01","sfx_generic_race_loop_02","sfx_ambient_wacky_loop_03","sfx_trigger_switch_00","sfx_carhorn_00","sfx_carhorn_01","sfx_carhorn_02","sfx_carhorn_03","sfx_crate_open_squeak_00","sfx_muttly_giggle_00","sfx_offtrack_loop_00","sfx_pussycat_loop_01","sfx_turbo_loop_00","sfx_grusome_loop_01","sfx_dastardly_loop_00","sfx_iq_loop_01","music_intro_start_00","music_intro_loop_00","music_intro_end_00","music_garage_loop_00","music_raceloop_00","music_raceloop_01","music_raceloop_02","music_race_end_00","sfx_race_lights_count_00","sfx_race_lights_go_00","sfx_car_start_tyres_04","sfx_race_start_idle_revs_00","sfx_hit_gravel_00","sfx_hit_gravel_01","sfx_hit_gravel_02","sfx_bomb_explode_big_00","sfx_bomb_explode_big_01","sfx_launch_glue_00","sfx_hit_glue_00","sfx_launch_glue_00","sfx_launch_missile_00","sfx_launch_missile_01","sfx_launch_object_00","sfx_launch_object_01","sfx_launch_object_02","sfx_launch_object_03","sfx_launch_object_04","sfx_launch_object_05","sfx_pickup_powerup_crate_00","sfx_powerup_selected_00","sfx_powerup_speedup_tyre_screech_00","sfx_powerup_randomiser_loop_00","sfx_car_slowdown_skid_00","sfx_powerup_bubbles_00","sfx_powerup_butterflies_01","sfx_powerup_flame_00","sfx_powerup_lightning_01","sfx_powerup_steam_01","sfx_hit_candy_02","sfx_powerup_candy_00"];e.length?(this._preloader=new h["default"],f["default"].scene.add(this._preloader),f["default"].assets.addFiles(e,"assets/"),f["default"].assets.signals.progress.add(this.onLoadingProgress,this),f["default"].assets.signals.complete.addOnce(this.onLoadingCompleted,this),f["default"].assets.load(),f["default"].audio.addSounds(t,[".m4a",".mp3",".ogg"],"assets/audio/")):this.startGame()}},{key:"createConfig",value:function(){var e=f["default"].assets,t={};t.characters=e.getJSON("characters").characters,t.strings=e.getJSON("strings"),f["default"].config=t,console.log(t)}},{key:"startGame",value:function(){delay(function(){this._game=new s["default"],this._game.init()},1,this)}},{key:"onLoadingProgress",value:function(e){this._preloader.loaded=e.progress/100}},{key:"onLoadingCompleted",value:function(){f["default"].assets.signals.progress.removeAll(),f["default"].assets.signals.complete.removeAll(),this._preloader.loaded=1,this.startGame()}},{key:"onCanvasResize",value:function(e){e&&(f["default"].renderer.resize(p3.View.width,p3.View.height),f["default"].scene&&f["default"].scene.resize())}}]),e}();i["default"]=y},{"./Application":3,"./AudioManager":5,"./Common":7,"./Input":9,
"./scenes/BoomerangPreloaderScene":63}],11:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function p(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("./Common"),c=n(u),h=e("./race/RaceEntity"),_=n(h),f=function(e){function t(){o(this,t);var e=c["default"].assets,i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,_["default"].TYPE_STATIC,new PIXI.Sprite(e.getTexture("powerup_mystery_object_00"))));return i.collisionWidth=60,i.collisionLength=34,i.view.anchor=new PIXI.Point(.5,.5),i.signals.collect=new signals.Signal,i.respawnDelay=4,i._collected=!1,i._tweens=[],i}return a(t,e),s(t,[{key:"init",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this),this.startOffsetY=this.offset.y,this._tweens.push(TweenMax.to(this.offset,.8,{y:this.offset.y+40,ease:Power1.easeInOut,yoyo:!0,repeat:-1}))}},{key:"update",value:function(e){}},{key:"destroy",value:function(){this.signals.collect.dispose(),this.killAllTweens(),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"reset",value:function(){this.offset.y=this.startOffsetY,this._collected=!1,this.renderToWorld=!0,this._view.alpha=1,this._view.visible=!0,this.killAllTweens(),this.init()}},{key:"killAllTweens",value:function(){for(var e=0;e<this._tweens.length;++e){var t=this._tweens[e];t.kill()}this._tweens.length=0}},{key:"collect",value:function(e){if(this._collected)return!1;if(this._collected=!0,this.renderToWorld=!1,e.jump(!1),e.id===c["default"].playerDriverId){var t=new TimelineMax;this._tweens.push(t),t.append(TweenMax.to(this._view.scale,.2,{x:1,y:1,ease:Back.easeOut,easeParams:[1]})),t=new TimelineMax,this._tweens.push(t),t.append(TweenMax.to(this._view,.2,{x:e.view.x,y:e.view.y,ease:Power1.easeInOut})),t.append(TweenMax.to(this._view,.34,{y:e.view.y-200,ease:Power2.easeInOut,onComplete:function(){this._view.texture=c["default"].assets.getTexture("powerup_mystery_object_01"),e.id===c["default"].playerDriverId&&c["default"].audio.playSound("sfx_crate_open_squeak_00"),delay(function(){this.signals.collect.dispatch(this,e)},.4,this)},onCompleteScope:this})),t.append(TweenMax.to(this._view,.34,{delay:.2,alpha:0,ease:Power1.easeInOut,onComplete:function(){this._view.texture=c["default"].assets.getTexture("powerup_mystery_object_00"),this._view.visible=!1},onCompleteScope:this}))}else this.view.visible=!1,this.signals.collect.dispatch(this,e);return delay(this.reset,this.respawnDelay,this),e.id===c["default"].playerDriverId&&c["default"].audio.playSound("sfx_pickup_powerup_crate_00"),!0}},{key:"collected",get:function(){return this._collected}}]),t}(_["default"]);i["default"]=f},{"./Common":7,"./race/RaceEntity":57}],12:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function p(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("./Common"),c=n(u),h=e("./powerups/Powerup"),_=n(h),f=function(e){function t(e){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.signals={},i.signals.select=new signals.Signal,i._powerupTypes=_["default"].getRandomTypes(),i._powerupIndex=0,i._inputPressed=!1,i._inputEnabled=e,i._inputFunc=null;var n=c["default"].assets,a=new PIXI.Sprite(n.getTexture("game_powerup_bg"));return a.anchor=new PIXI.Point(.5,.5),a.scale=new PIXI.Point(.8,.8),i.addChild(a),i}return a(t,e),s(t,[{key:"destroy",value:function(e){this._inputEnabled&&c["default"].input.signals.keyDown.remove(this._inputFunc),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this,e)}},{key:"start",value:function(){function e(n){delay(function(){this._powerupIndex++,this._powerupIndex%=this._powerupTypes.length;var n=this._powerupTypes[this._powerupIndex];i.texture=_["default"].getTexture(n),i.scale=new PIXI.Point(.5,.5),TweenMax.to(i.scale,.18,{x:1,y:1,ease:Back.easeOut,easeParams:[4],onComplete:function(){if(--t>0)e.call(this,.02);else{TweenMax.to(this.scale,.34,{delay:.2,x:0,y:0,ease:Back.easeIn,easeParams:[1],onComplete:function(){this.destroy()},onCompleteScope:this});var i=this._powerupTypes[this._powerupIndex];this.signals.select.dispatch(this,i),this.visible&&c["default"].audio.playSound("sfx_powerup_selected_00")}},onCompleteScope:this}),this.visible&&c["default"].audio.playSound("sfx_powerup_randomiser_loop_00")},n,this)}var t=p3.Utils.randomInt(6,12),i=new PIXI.Sprite(PIXI.Texture.EMPTY);i.anchor=new PIXI.Point(.5,.5),this.addChild(i),e.call(this,0),this._inputEnabled&&(this._inputFunc=function(e){this._inputPressed||32!==e.keyCode||(this._inputPressed=!0,t=0)},c["default"].input.signals.keyDown.add(this._inputFunc,this))}},{key:"inputEnabled",get:function(){return this._inputEnabled}}]),t}(PIXI.Container);i["default"]=f},{"./Common":7,"./powerups/Powerup":44}],13:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function x(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:x(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("./AudioParams"),c=n(u),h=e("./Common"),_=n(h),f=e("./Input"),p=n(f),d=e("./cars/PussycatView"),y=n(d),v=e("./race/RaceCar"),w=n(v),b=e("ismobilejs"),g=n(b),m=function(e){function t(e,i){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i||new y["default"]));return n.turnAccel=12e3,n.turnDamping=.94,n._engineSFX=null,n._offroadSFX=null,n._playOffroadSFX=!1,n._hitTime=window.performance.now(),n}return a(t,e),s(t,[{key:"init",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this)}},{key:"destroy",value:function(){this.stopEngineSFX(),this.stopOffroadSFX(),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"update",value:function(e){this.turnSpeed=0;var i=_["default"].input;g["default"].any?i.touch&&(console.log(i.touch.x,.5*p3.View.width),i.touch.x<.5*(p3.View.width-.4*p3.View.width)&&(this.turnSpeed=-this.turnAccel),i.touch.x>.5*(p3.View.width+.4*p3.View.width)&&(this.turnSpeed=this.turnAccel)):((i.isKeyDown(p["default"].keys.A)||i.isKeyDown(p["default"].keys.LEFT))&&(this.turnSpeed=-this.turnAccel),(i.isKeyDown(p["default"].keys.D)||i.isKeyDown(p["default"].keys.RIGHT))&&(this.turnSpeed=this.turnAccel),i.isKeyDown(p["default"].keys.S)||i.isKeyDown(p["default"].keys.DOWN)),this._offroad?(this.engine.camera.applyShake(.1),!this._offroadSFX&&this.startOffroadSFX(),this._playOffroadSFX=!0):(this._offroadSFX&&this.stopOffroadSFX(),this._playOffroadSFX&&(this._playOffroadSFX=!1,_["default"].audio.playSound(["sfx_hit_gravel_00","sfx_hit_gravel_01","sfx_hit_gravel_02"]))),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e)}},{key:"takeHit",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"takeHit",this).call(this,e),_["default"].audio.playSound("sfx_car_slowdown_skid_00")}},{key:"onCollisionBegin",value:function(e,i){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onCollisionBegin",this).call(this,e,i),window.performance.now()-this._hitTime>4e3&&(this._hitTime=window.performance.now(),_["default"].audio.playSound(["sfx_carhorn_00","sfx_carhorn_01","sfx_carhorn_02","sfx_carhorn_03"]),this.engine.camera.applyShake(1,30))}},{key:"startEngineSFX",value:function(){this.stopEngineSFX();var e=void 0;switch(this._id){case 0:e="sfx_pussycat_loop_01";break;case 1:e="sfx_turbo_loop_00";break;case 2:e="sfx_dastardly_loop_00";break;case 3:e="sfx_grusome_loop_01";break;case 4:e="sfx_iq_loop_01"}var t=new c["default"];t.loop=!0,this._engineSFX=_["default"].audio.playSound(e,t)}},{key:"stopEngineSFX",value:function(){this._engineSFX&&this._engineSFX.destroy()}},{key:"startOffroadSFX",value:function(){this.stopOffroadSFX();var e=new c["default"];e.loop=!0,this._offroadSFX=_["default"].audio.playSound("sfx_offtrack_loop_00",e)}},{key:"stopOffroadSFX",value:function(){this._offroadSFX&&(this._offroadSFX.destroy(),this._offroadSFX=null)}}]),t}(w["default"]);i["default"]=m},{"./AudioParams":6,"./Common":7,"./Input":9,"./cars/PussycatView":21,"./race/RaceCar":53,ismobilejs:1}],14:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=e("./Common"),u=n(l),c=e("./powerups/Powerup"),h=n(c),_=function(e){function t(e,i,n){o(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));a.lastRacePos=0,a._id=e,a._car=n,a._texture=i,a.view=new PIXI.Container,a.addChild(a.view);var s=u["default"].assets;return a._hit=new PIXI.Sprite(s.getTexture("ui_icon_char_hit")),a._hit.anchor=new PIXI.Point(.5,.5),a._hit.visible=!1,a.view.addChild(a._hit),a._player=new PIXI.Sprite(s.getTexture("ui_icon_char_player_bg")),a._player.anchor=new PIXI.Point(.5,.5),a._player.visible=a._car.isPlayer,a.view.addChild(a._player),a._character=new PIXI.Sprite(i),a._character.anchor=new PIXI.Point(.5,.5),a.view.addChild(a._character),a._racePosLabel=new PIXI.BitmapText("0",{font:"32px Antique Olive Std",align:"left"}),a._racePosLabel.x=-4,a._racePosLabel.pivot.x=.5*a._racePosLabel.textWidth,a._racePosLabel.pivot.y=.5*a._racePosLabel.textHeight,a.view.addChild(a._racePosLabel),a}return a(t,e),s(t,[{key:"usePowerup",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=new PIXI.Sprite(h["default"].getTexture(e));i.x=60,i.anchor=new PIXI.Point(.5,.5),this.addChild(i);var n=new TimelineMax;if(i.scale=new PIXI.Point,n.append(TweenMax.to(i.scale,.32,{x:.4,y:.4,ease:Back.easeOut,easeParams:[4]})),n.append(TweenMax.to(i.scale,.2,{delay:.4,x:0,y:0,ease:Back.easeIn})),t){var o=new TimelineMax;o.append(TweenMax.to(this.view.scale,.2,{x:1.24,y:1.24,ease:Power0.easeNone})),o.append(TweenMax.to(this.view.scale,.24,{x:1,y:1,ease:Power2.easeOut})),this._hit.alpha=0,this._hit.visible=!0,TweenMax.to(this._hit,.2,{alpha:1,ease:Power2.easeInOut,yoyo:!0,repeat:3,onComplete:function(){this._hit.visible=!1},onCompleteScope:this})}}},{key:"setRacePos",value:function(e){this._racePosLabel.text=e.toString(),this._racePosLabel.validate(),this._racePosLabel.pivot.x=.5*this._racePosLabel.textWidth,this._racePosLabel.pivot.y=.5*this._racePosLabel.textHeight}},{key:"id",get:function(){return this._id}},{key:"car",get:function(){return this._car}}]),t}(PIXI.Container);i["default"]=_},{"./Common":7,"./powerups/Powerup":44}],15:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=e("./Common"),u=n(l),c=e("./RaceAvatar"),h=n(c),_=function(e){function t(){o(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.signals={},e.signals.change=new signals.Signal,e._avatars=[],e._spacing=66,e}return a(t,e),s(t,[{key:"init",value:function(){for(var e=u["default"].game.getCars(),i=0;i<e.length;++i){var n=e[i],o=t.getAvatarTexture(n.id),r=new h["default"](n.id,o,n);r.y=this._spacing*i,r.lastRacePos=i,this.addChild(r),this._avatars.push(r)}}},{key:"animateIn",value:function(e,t){}},{key:"animateOut",value:function(e,t){}},{key:"update",value:function(){this._avatars.sort(function(e,t){return t.car.getTotalDistance()-e.car.getTotalDistance()});for(var e=0;e<this._avatars.length;++e){var t=this._avatars[e];t.y=this._spacing*e,t.setRacePos(e+1),t.lastRacePos!==e&&(t.lastRacePos=e,this.signals.change.dispatch(t,e))}}},{key:"usePowerup",value:function(e,t,i){for(var n=0;n<this._avatars.length;++n){var o=this._avatars[n];o.car===t&&o.usePowerup(e,i)}}}],[{key:"getAvatarTexture",value:function(e){for(var t=u["default"].assets,i=u["default"].config.characters,n=0;n<i.length;++n){var o=i[n];if(o.id===e)return t.getTexture(o.avatar.texture)}}}]),t}(PIXI.Container);i["default"]=_},{"./Common":7,"./RaceAvatar":14}],16:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=e("./Common"),u=n(l),c=function(e){function t(){o(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.createMainLayer(),e.update(1),e}return a(t,e),s(t,[{key:"resize",value:function(){}},{key:"update",value:function(e){e=e||.04;var t=u["default"].engine,i=t.camera,n=i.target,o=i.angle;o<0&&(o+=2*Math.PI),o>2*Math.PI&&(o-=2*Math.PI),o/=2*Math.PI,this._mainLayer.x=-o*this._mainLayer.tileWidth*this._mainLayer.tileCount;var r=-40+240*t.getTrackGradient(n.distance)*2-this._mainLayer.y;this._mainLayer.y+=r*e}},{key:"createMainLayer",value:function(){var e=u["default"].assets,t=e.getTexture("skybox");this._mainLayer=new PIXI.Container,this.addChild(this._mainLayer);for(var i=3,n=void 0,o=0;o<i;++o){n=new PIXI.Sprite(t),n.anchor=new PIXI.Point(.5,.5),this._mainLayer.addChild(n);var r=n.width/n.height;n.width=p3.View.height*r,n.height=p3.View.height,n.x=.5*u["default"].STAGE_WIDTH+n.width*o,n.y=.5*n.height}this._mainLayer.tileWidth=n.width,this._mainLayer.tileCount=i-1}}]),t}(PIXI.Container);i["default"]=c},{"./Common":7}],17:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function _(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:_(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("./Common"),c=n(u),h=function(e){function t(){o(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._lights=[],e._tweens=[];var i=c["default"].assets,n=new PIXI.Sprite(i.getTexture("wr_race_lights_bg"));n.anchor=new PIXI.Point(.5,.5),e.addChild(n);for(var a=[new PIXI.Point((-88),48),new PIXI.Point((-35),48),new PIXI.Point(35,48),new PIXI.Point(84,48)],s=0;s<a.length;++s){var l=new PIXI.Sprite(i.getTexture("wr_race_lights_red"));l.position=a[s].clone(),l.scale.x=s<2?1:-1,l.anchor=new PIXI.Point(.5,.5),l.visible=!1,e.addChild(l),e._lights.push(l)}for(var u=0;u<a.length;++u){var h=new PIXI.Sprite(i.getTexture("wr_race_lights_green"));h.position=a[u].clone(),h.scale.x=u<2?1:-1,h.anchor=new PIXI.Point(.5,.5),h.visible=!1,e.addChild(h),e._lights.push(h)}return e}return a(t,e),s(t,[{key:"destroy",value:function(){for(var e=0;e<this._tweens.length;++e){var i=this._tweens[e];i.kill()}this._tweens.length=0,l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this,{removeChildren:!0})}},{key:"animateIn",value:function(e,t){var i=this.y;this.y-=200,this._tweens.push(TweenMax.to(this,.4,{y:i,ease:Back.easeOut,easeParams:[1],onComplete:e,onCompleteScope:t}))}},{key:"animateOut",value:function(e,t){var i=this.y-200;this._tweens.push(TweenMax.to(this,.4,{delay:.4,y:i,ease:Back.easeIn,onComplete:e,onCompleteScope:t}))}},{key:"start",value:function(e,t,i){function n(){var t=this._lights[r];t.alpha=0,t.visible=!0,this._tweens.push(TweenMax.to(t,.04,{delay:e,alpha:1,ease:Power2.easeInOut,onComplete:function(){++r<4?(n.call(this),c["default"].audio.playSound("sfx_race_lights_count_00")):(delay(o,1,this),c["default"].audio.playSound("sfx_race_lights_count_00"))},onCompleteScope:this}))}function o(){for(var e=0;e<4;++e){var n=this._lights[e];n.visible=!1}for(var o=4;o<this._lights.length;++o){var r=this._lights[o];r.visible=!0,r.alpha=0,this._tweens.push(TweenMax.to(r,.04,{alpha:1,ease:Power2.easeInOut}))}t&&t.call(i),c["default"].audio.playSound("sfx_race_lights_go_00")}var r=0;n.call(this)}},{key:"resume",value:function(){for(var e=0;e<this._tweens.length;++e){var t=this._tweens[e];t.resume()}}},{key:"pause",value:function(){for(var e=0;e<this._tweens.length;++e){var t=this._tweens[e];t.pause()}}}]),t}(PIXI.Container);i["default"]=h},{"./Common":7}],18:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function p(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("../Common"),c=n(u),h=e("../race/RaceCarView"),_=n(h),f=function(e){function t(){o(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._shadow.y=122,e._front.offset.y=-152,e._back.offset.y=-152,e._wheels.front.left.offset=new PIXI.Point((-200),(-20)),e._wheels.front.right.offset=new PIXI.Point(200,(-20)),e._wheels.rear.left.offset=new PIXI.Point((-200),20),e._wheels.rear.right.offset=new PIXI.Point(200,20),e._axles={},e._axles.front={},e._axles.rear={},e._axles.front.left=e.createFrontAxle(),e._axles.front.left.anchor=new PIXI.Point(.5,.5),e.addChildAt(e._axles.front.left,0),e._axles.front.right=e.createFrontAxle(),e._axles.front.right.anchor=new PIXI.Point(.5,.5),e._axles.front.right.scale.x=-1,e.addChildAt(e._axles.front.right,0),e._axles.rear.left=e.createRearAxle(),e._axles.rear.left.anchor=new PIXI.Point(.5,.5),e.addChildAt(e._axles.rear.left,6),e._axles.rear.right=e.createRearAxle(),e._axles.rear.right.anchor=new PIXI.Point(.5,.5),e._axles.rear.right.scale.x=-1,e.addChildAt(e._axles.rear.right,6),e}return a(t,e),s(t,[{key:"init",value:function(){}},{key:"destroy",value:function(e){}},{key:"update",value:function(e,i,n,o,r,a,s){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e,i,n,o,r,a,s);var u=140;this._curvature+=.4*(a+n-this._curvature),this._curvature=Math.max(-u,Math.min(u,this._curvature)),this._front.x=.3*this._curvature+this._front.offset.x,this._front.y=-o*u*1.6+this._front.offset.y-136*s,this._back.x=.1*-this._curvature+this._back.offset.x,this._back.y=o*u+this._back.offset.y-118*s,this._front.rotation=.0012*this._curvature,this._back.rotation=.0012*this._curvature,this._wheels.front.left.x=this._front.x+this._wheels.front.left.offset.x,this._wheels.front.left.y=o*u+this._wheels.front.left.offset.y-74*s,this._wheels.front.right.x=this._front.x+this._wheels.front.right.offset.x,this._wheels.front.right.y=o*u+this._wheels.front.right.offset.y-74*s,this._wheels.rear.left.x=this._back.x+this._wheels.rear.left.offset.x,this._wheels.rear.left.y=o*u+this._wheels.rear.left.offset.y-72*s,this._wheels.rear.right.x=this._back.x+this._wheels.rear.right.offset.x,this._wheels.rear.right.y=o*u+this._wheels.rear.right.offset.y-72*s,r=Math.max(0,r)/.2,this._wheels.front.left.animationSpeed=r,this._wheels.front.right.animationSpeed=r,this._wheels.rear.left.animationSpeed=r,this._wheels.rear.right.animationSpeed=r,this.updateAxles()}},{key:"updateAxles",value:function(){var e=new PIXI.Point(26,84),t=new PIXI.Point(this._front.x,this._front.y),i=this._front.rotation,n=new PIXI.Point(t.x+(Math.cos(i)*-e.x-Math.sin(i)*e.y),t.y+(Math.cos(i)*e.y+Math.sin(i)*-e.x)),o=new PIXI.Point(t.x+(Math.cos(i)*e.x-Math.sin(i)*e.y),t.y+(Math.cos(i)*e.y+Math.sin(i)*e.x));e=new PIXI.Point(74,0),t=new PIXI.Point(this._wheels.front.left.x,this._wheels.front.left.y),i=this._wheels.front.left.rotation;var r=new PIXI.Point(t.x+(Math.cos(i)*e.x-Math.sin(i)*e.y),t.y+(Math.cos(i)*e.y+Math.sin(i)*e.x));t=new PIXI.Point(this._wheels.front.right.x,this._wheels.front.right.y),i=this._wheels.front.right.rotation;var a=new PIXI.Point(t.x+(Math.cos(i)*-e.x-Math.sin(i)*e.y),t.y+(Math.cos(i)*e.y+Math.sin(i)*-e.x)),s=new PIXI.Point(n.x+.5*(r.x-n.x),n.y+.5*(r.y-n.y)),l=Math.atan2(n.y-r.y,n.x-r.x);this._axles.front.left.x=s.x,this._axles.front.left.y=s.y,this._axles.front.left.rotation=l,s=new PIXI.Point(o.x+.5*(a.x-o.x),o.y+.5*(a.y-o.y)),l=Math.atan2(a.y-o.y,a.x-o.x),this._axles.front.right.x=s.x,this._axles.front.right.y=s.y,this._axles.front.right.rotation=l,e=new PIXI.Point(26,112),t=new PIXI.Point(this._back.x,this._back.y),i=this._back.rotation,n=new PIXI.Point(t.x+(Math.cos(i)*-e.x-Math.sin(i)*e.y),t.y+(Math.cos(i)*e.y+Math.sin(i)*-e.x)),o=new PIXI.Point(t.x+(Math.cos(i)*e.x-Math.sin(i)*e.y),t.y+(Math.cos(i)*e.y+Math.sin(i)*e.x)),e=new PIXI.Point(74,0),t=new PIXI.Point(this._wheels.rear.left.x,this._wheels.rear.left.y),i=this._wheels.rear.left.rotation,r=new PIXI.Point(t.x+(Math.cos(i)*e.x-Math.sin(i)*e.y),t.y+(Math.cos(i)*e.y+Math.sin(i)*e.x)),t=new PIXI.Point(this._wheels.rear.right.x,this._wheels.rear.right.y),i=this._wheels.rear.right.rotation,a=new PIXI.Point(t.x+(Math.cos(i)*-e.x-Math.sin(i)*e.y),t.y+(Math.cos(i)*e.y+Math.sin(i)*-e.x)),s=new PIXI.Point(n.x+.5*(r.x-n.x),n.y+.5*(r.y-n.y)),l=Math.atan2(n.y-r.y,n.x-r.x),this._axles.rear.left.x=s.x,this._axles.rear.left.y=s.y,this._axles.rear.left.rotation=l,s=new PIXI.Point(o.x+.5*(a.x-o.x),o.y+.5*(a.y-o.y)),l=Math.atan2(a.y-o.y,a.x-o.x),this._axles.rear.right.x=s.x,this._axles.rear.right.y=s.y,this._axles.rear.right.rotation=l}},{key:"startEngine",value:function(){this.stopEngine(),TweenMax.to(this._front.offset,.05,{y:this._front.offset.y-5,yoyo:!0,repeat:-1}),TweenMax.to(this._back.offset,.05,{y:this._back.offset.y-7,yoyo:!0,repeat:-1}),TweenMax.to(this._front.scale,.04,{y:this._front.scale.y-.04,yoyo:!0,repeat:-1}),TweenMax.to(this._back.scale,.04,{delay:.02,y:this._back.scale.y-.02,yoyo:!0,repeat:-1}),TweenMax.to(this._wheels.front.left.offset,.04,{y:this._wheels.front.left.offset.y-4,yoyo:!0,repeat:-1}),TweenMax.to(this._wheels.front.right.offset,.04,{y:this._wheels.front.right.offset.y-4,yoyo:!0,repeat:-1}),TweenMax.to(this._wheels.rear.left.offset,.03,{y:this._wheels.rear.left.offset.y-6,yoyo:!0,repeat:-1}),TweenMax.to(this._wheels.rear.right.offset,.03,{y:this._wheels.rear.right.offset.y-6,yoyo:!0,repeat:-1})}},{key:"stopEngine",value:function(){TweenMax.killTweensOf(this._front.offset),TweenMax.killTweensOf(this._back.offset),TweenMax.killTweensOf(this._front.scale),TweenMax.killTweensOf(this._back.scale),TweenMax.killTweensOf(this._wheels.front.left.offset),TweenMax.killTweensOf(this._wheels.front.right.offset),TweenMax.killTweensOf(this._wheels.rear.left.offset),TweenMax.killTweensOf(this._wheels.rear.right.offset)}},{key:"createFrontLayer",value:function(){var e=c["default"].assets;return new PIXI.Sprite(e.getTexture("grusome_front_00"))}},{key:"createBackLayer",value:function(){var e=c["default"].assets;return new PIXI.Sprite(e.getTexture("grusome_rear_00"))}},{key:"createFrontWheel",value:function(){var e=c["default"].assets,t=new p3.MovieClipSequence;return t.addTextures([e.getTexture("grusome_front_wheel_spin_00"),e.getTexture("grusome_front_wheel_spin_01")]),new p3.MovieClip(t)}},{key:"createRearWheel",value:function(){var e=c["default"].assets,t=new p3.MovieClipSequence;return t.addTextures([e.getTexture("grusome_rear_wheel_spin_00"),e.getTexture("grusome_rear_wheel_spin_01")]),new p3.MovieClip(t)}},{key:"createShadow",value:function(){var e=c["default"].assets;return new PIXI.Sprite(e.getTexture("grusome_shadow_00"))}},{key:"createFrontAxle",value:function(){var e=c["default"].assets;return new PIXI.Sprite(e.getTexture("grusome_front_axle_bottom_00"))}},{key:"createRearAxle",value:function(){var e=c["default"].assets;return new PIXI.Sprite(e.getTexture("grusome_rear_axle_bottom_00"))}}]),t}(_["default"]);i["default"]=f},{"../Common":7,"../race/RaceCarView":54}],19:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function p(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("../Common"),c=n(u),h=e("../race/RaceCarView"),_=n(h),f=function(e){function t(){o(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._wheels.front.left.offset=new PIXI.Point((-120),30),e._wheels.front.right.offset=new PIXI.Point(120,30),e._wheels.rear.left.offset=new PIXI.Point((-140),58),e._wheels.rear.right.offset=new PIXI.Point(140,58),e}return a(t,e),s(t,[{key:"init",value:function(){}},{key:"destroy",value:function(e){}},{key:"update",
value:function(e,i,n,o,r,a,s){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e,i,n,o,r,a,s);var u=140;this._curvature+=.4*(a+n-this._curvature),this._curvature=Math.max(-u,Math.min(u,this._curvature)),this._front.x=.3*this._curvature+this._front.offset.x,this._front.y=-o*u*1.6+this._front.offset.y-136*s,this._back.x=.1*-this._curvature+this._back.offset.x,this._back.y=o*u+this._back.offset.y-118*s,this._front.rotation=.0012*this._curvature,this._back.rotation=.0012*this._curvature}},{key:"createFrontLayer",value:function(){var e=c["default"].assets;return new PIXI.Sprite(e.getTexture("iq_front_00"))}},{key:"createBackLayer",value:function(){var e=c["default"].assets;return new PIXI.Sprite(e.getTexture("iq_rear_00"))}},{key:"createFrontWheel",value:function(){var e=new p3.MovieClipSequence;return e.addTextures([PIXI.Texture.EMPTY]),new p3.MovieClip(e)}},{key:"createRearWheel",value:function(){var e=new p3.MovieClipSequence;return e.addTextures([PIXI.Texture.EMPTY]),new p3.MovieClip(e)}},{key:"createShadow",value:function(){var e=c["default"].assets;return new PIXI.Sprite(e.getTexture("iq_shadow_00"))}}]),t}(_["default"]);i["default"]=f},{"../Common":7,"../race/RaceCarView":54}],20:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function p(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("../Common"),c=n(u),h=e("../race/RaceCarView"),_=n(h),f=function(e){function t(){o(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._shadow.y=152,e._front.offset.y=-50,e._back.offset.y=-50,e._wheels.front.left.offset=new PIXI.Point((-200),66),e._wheels.front.right.offset=new PIXI.Point(200,66),e._wheels.rear.left.offset=new PIXI.Point((-190),92),e._wheels.rear.right.offset=new PIXI.Point(190,92),e}return a(t,e),s(t,[{key:"init",value:function(){}},{key:"destroy",value:function(e){}},{key:"update",value:function(e,i,n,o,r,a,s){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e,i,n,o,r,a,s);var u=140;this._curvature+=.4*(a+n-this._curvature),this._curvature=Math.max(-u,Math.min(u,this._curvature)),this._front.x=.3*this._curvature+this._front.offset.x,this._front.y=-o*u*1.6+this._front.offset.y-128*s,this._back.x=.1*-this._curvature+this._back.offset.x,this._back.y=o*u+this._back.offset.y-118*s,this._front.rotation=.0012*this._curvature,this._back.rotation=.0012*this._curvature,this._wheels.front.left.x=this._front.x+this._wheels.front.left.offset.x,this._wheels.front.left.y=o*u+this._wheels.front.left.offset.y-104*s,this._wheels.front.right.x=this._front.x+this._wheels.front.right.offset.x,this._wheels.front.right.y=o*u+this._wheels.front.right.offset.y-104*s,this._wheels.rear.left.x=this._back.x+this._wheels.rear.left.offset.x,this._wheels.rear.left.y=o*u+this._wheels.rear.left.offset.y-92*s,this._wheels.rear.right.x=this._back.x+this._wheels.rear.right.offset.x,this._wheels.rear.right.y=o*u+this._wheels.rear.right.offset.y-92*s,r=Math.max(0,r)/.2,this._wheels.front.left.animationSpeed=r,this._wheels.front.right.animationSpeed=r,this._wheels.rear.left.animationSpeed=r,this._wheels.rear.right.animationSpeed=r}},{key:"createFrontLayer",value:function(){var e=c["default"].assets;return new PIXI.Sprite(e.getTexture("dastardly_front_00"))}},{key:"createBackLayer",value:function(){var e=c["default"].assets;return new PIXI.Sprite(e.getTexture("dastardly_rear_00"))}},{key:"createFrontWheel",value:function(){var e=c["default"].assets,t=new p3.MovieClipSequence;return t.addTextures([e.getTexture("dastardly_front_wheel_00")]),new p3.MovieClip(t)}},{key:"createRearWheel",value:function(){var e=c["default"].assets,t=new p3.MovieClipSequence;return t.addTextures([e.getTexture("dastardly_rear_wheel_00")]),new p3.MovieClip(t)}},{key:"createShadow",value:function(){var e=c["default"].assets;return new PIXI.Sprite(e.getTexture("dastardly_shadow_00"))}}]),t}(_["default"]);i["default"]=f},{"../Common":7,"../race/RaceCarView":54}],21:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function p(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("../Common"),c=n(u),h=e("../race/RaceCarView"),_=n(h),f=function(e){function t(){o(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._shadow.y=114,e._wheels.front.left.offset=new PIXI.Point((-120),30),e._wheels.front.right.offset=new PIXI.Point(120,30),e._wheels.rear.left.offset=new PIXI.Point((-140),58),e._wheels.rear.right.offset=new PIXI.Point(140,58),e}return a(t,e),s(t,[{key:"init",value:function(){}},{key:"destroy",value:function(e){}},{key:"update",value:function(e,i,n,o,r,a,s){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e,i,n,o,r,a,s);var u=140;this._curvature+=.4*(a+n-this._curvature),this._curvature=Math.max(-u,Math.min(u,this._curvature)),this._front.x=.3*this._curvature+this._front.offset.x,this._front.y=-o*u*1.6+this._front.offset.y-136*s,this._back.x=.1*-this._curvature+this._back.offset.x,this._back.y=o*u+this._back.offset.y-118*s,this._front.rotation=.0012*this._curvature,this._back.rotation=.0012*this._curvature,this._wheels.front.left.x=this._front.x+this._wheels.front.left.offset.x,this._wheels.front.left.y=o*u+this._wheels.front.left.offset.y-86*s,this._wheels.front.right.x=this._front.x+this._wheels.front.right.offset.x,this._wheels.front.right.y=o*u+this._wheels.front.right.offset.y-86*s,this._wheels.rear.left.x=this._back.x+this._wheels.rear.left.offset.x,this._wheels.rear.left.y=o*u+this._wheels.rear.left.offset.y-72*s,this._wheels.rear.right.x=this._back.x+this._wheels.rear.right.offset.x,this._wheels.rear.right.y=o*u+this._wheels.rear.right.offset.y-72*s,r=Math.max(0,r)/.2,this._wheels.front.left.animationSpeed=r,this._wheels.front.right.animationSpeed=r,this._wheels.rear.left.animationSpeed=r,this._wheels.rear.right.animationSpeed=r}},{key:"createFrontLayer",value:function(){var e=c["default"].assets;return new PIXI.Sprite(e.getTexture("pussycat_front_00"))}},{key:"createBackLayer",value:function(){var e=c["default"].assets;return new PIXI.Sprite(e.getTexture("pussycat_rear_00"))}},{key:"createFrontWheel",value:function(){var e=c["default"].assets,t=new p3.MovieClipSequence;return t.addTextures([e.getTexture("pussycat_front_wheel_spin_00"),e.getTexture("pussycat_front_wheel_spin_01")]),new p3.MovieClip(t)}},{key:"createRearWheel",value:function(){var e=c["default"].assets,t=new p3.MovieClipSequence;return t.addTextures([e.getTexture("pussycat_rear_wheel_spin_00"),e.getTexture("pussycat_rear_wheel_spin_01")]),new p3.MovieClip(t)}},{key:"createShadow",value:function(){var e=c["default"].assets;return new PIXI.Sprite(e.getTexture("pussycat_shadow_00"))}}]),t}(_["default"]);i["default"]=f},{"../Common":7,"../race/RaceCarView":54}],22:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function p(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("../Common"),c=n(u),h=e("../race/RaceCarView"),_=n(h),f=function(e){function t(){o(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._shadow.y=126,e._front.offset.y=-58,e._back.offset.y=-20,e._wheels.front.left.offset=new PIXI.Point((-148),28),e._wheels.front.right.offset=new PIXI.Point(148,28),e._wheels.rear.left.offset=new PIXI.Point((-190),24),e._wheels.rear.right.offset=new PIXI.Point(190,24),e._axles={},e._axles.top={},e._axles.bottom={},e._axles.top.left=e.createTopAxel(),e._axles.top.left.anchor=new PIXI.Point(.5,.5),e.addChild(e._axles.top.left),e._axles.top.right=e.createTopAxel(),e._axles.top.right.anchor=new PIXI.Point(.5,.5),e._axles.top.right.scale.x=-1,e.addChild(e._axles.top.right),e._axles.bottom.left=e.createBottomAxel(),e._axles.bottom.left.anchor=new PIXI.Point(.5,.5),e.addChild(e._axles.bottom.left),e._axles.bottom.right=e.createBottomAxel(),e._axles.bottom.right.anchor=new PIXI.Point(.5,.5),e._axles.bottom.right.scale.x=-1,e.addChild(e._axles.bottom.right),e}return a(t,e),s(t,[{key:"init",value:function(){}},{key:"destroy",value:function(e){}},{key:"update",value:function(e,i,n,o,r,a,s){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e,i,n,o,r,a,s);var u=140;this._curvature+=.4*(a+n-this._curvature),this._curvature=Math.max(-u,Math.min(u,this._curvature)),this._front.x=.3*this._curvature+this._front.offset.x,this._front.y=-o*u*1.6+this._front.offset.y-136*s,this._back.x=.1*-this._curvature+this._back.offset.x,this._back.y=o*u+this._back.offset.y-118*s,this._back.rotation=.0016*this._curvature,this._wheels.front.left.x=this._front.x+this._wheels.front.left.offset.x,this._wheels.front.left.y=o*u+this._wheels.front.left.offset.y-136*s,this._wheels.front.right.x=this._front.x+this._wheels.front.right.offset.x,this._wheels.front.right.y=o*u+this._wheels.front.right.offset.y-136*s,this._wheels.rear.left.x=this._back.x+this._wheels.rear.left.offset.x,this._wheels.rear.left.y=o*u+this._wheels.rear.left.offset.y-72*s,this._wheels.rear.right.x=this._back.x+this._wheels.rear.right.offset.x,this._wheels.rear.right.y=o*u+this._wheels.rear.right.offset.y-72*s,r=Math.max(0,r)/.2,this._wheels.front.left.animationSpeed=r,this._wheels.front.right.animationSpeed=r,this._wheels.rear.left.animationSpeed=r,this._wheels.rear.right.animationSpeed=r,this.updateAxles()}},{key:"updateAxles",value:function(){var e=new PIXI.Point(this._back.x,this._back.y),t=this._back.rotation,i=new PIXI.Point(68,70),n=new PIXI.Point(e.x+(Math.cos(t)*-i.x-Math.sin(t)*i.y),e.y+(Math.cos(t)*i.y+Math.sin(t)*-i.x)),o=new PIXI.Point(e.x+(Math.cos(t)*i.x-Math.sin(t)*i.y),e.y+(Math.cos(t)*i.y+Math.sin(t)*i.x));e=new PIXI.Point(this._wheels.rear.left.x,this._wheels.rear.left.y),t=this._wheels.rear.left.rotation,i=new PIXI.Point(56,0);var r=new PIXI.Point(e.x+(Math.cos(t)*i.x-Math.sin(t)*i.y),e.y+(Math.cos(t)*i.y+Math.sin(t)*i.x));e=new PIXI.Point(this._wheels.rear.right.x,this._wheels.rear.right.y),t=this._wheels.rear.right.rotation;var a=new PIXI.Point(e.x+(Math.cos(t)*-i.x-Math.sin(t)*i.y),e.y+(Math.cos(t)*i.y+Math.sin(t)*-i.x)),s=new PIXI.Point(n.x+.5*(r.x-n.x),n.y+.5*(r.y-n.y)),l=Math.atan2(n.y-r.y,n.x-r.x);this._axles.top.left.x=s.x,this._axles.top.left.y=s.y,this._axles.top.left.rotation=l,s=new PIXI.Point(o.x+.5*(a.x-o.x),o.y+.5*(a.y-o.y)),l=Math.atan2(a.y-o.y,a.x-o.x),this._axles.top.right.x=s.x,this._axles.top.right.y=s.y,this._axles.top.right.rotation=l,e=new PIXI.Point(this._back.x,this._back.y),t=this._back.rotation,i=new PIXI.Point(54,120),n=new PIXI.Point(e.x+(Math.cos(t)*-i.x-Math.sin(t)*i.y),e.y+(Math.cos(t)*i.y+Math.sin(t)*-i.x)),o=new PIXI.Point(e.x+(Math.cos(t)*i.x-Math.sin(t)*i.y),e.y+(Math.cos(t)*i.y+Math.sin(t)*i.x)),e=new PIXI.Point(this._wheels.rear.left.x,this._wheels.rear.left.y),t=this._wheels.rear.left.rotation,i=new PIXI.Point(54,34),r=new PIXI.Point(e.x+(Math.cos(t)*i.x-Math.sin(t)*i.y),e.y+(Math.cos(t)*i.y+Math.sin(t)*i.x)),e=new PIXI.Point(this._wheels.rear.right.x,this._wheels.rear.right.y),t=this._wheels.rear.right.rotation,a=new PIXI.Point(e.x+(Math.cos(t)*-i.x-Math.sin(t)*i.y),e.y+(Math.cos(t)*i.y+Math.sin(t)*-i.x)),s=new PIXI.Point(n.x+.5*(r.x-n.x),n.y+.5*(r.y-n.y)),l=Math.atan2(n.y-r.y,n.x-r.x),this._axles.bottom.left.x=s.x,this._axles.bottom.left.y=s.y,this._axles.bottom.left.rotation=l,s=new PIXI.Point(o.x+.5*(a.x-o.x),o.y+.5*(a.y-o.y)),l=Math.atan2(a.y-o.y,a.x-o.x),this._axles.bottom.right.x=s.x,this._axles.bottom.right.y=s.y,this._axles.bottom.right.rotation=l}},{key:"startEngine",value:function(){this.stopEngine(),TweenMax.to(this._front.scale,.04,{y:this._front.scale.y-.04,yoyo:!0,repeat:-1}),TweenMax.to(this._back.offset,.044,{y:this._back.offset.y-8,yoyo:!0,repeat:-1}),TweenMax.to(this._back.scale,.04,{delay:.02,y:this._back.scale.y-.02,yoyo:!0,repeat:-1})}},{key:"createFrontLayer",value:function(){var e=c["default"].assets;return new PIXI.Sprite(e.getTexture("turbo_front_00"))}},{key:"createBackLayer",value:function(){var e=c["default"].assets;return new PIXI.Sprite(e.getTexture("turbo_rear_00"))}},{key:"createFrontWheel",value:function(){var e=c["default"].assets,t=new p3.MovieClipSequence;return t.addTextures([e.getTexture("turbo_front_wheel_spin_00"),e.getTexture("turbo_front_wheel_spin_01")]),new p3.MovieClip(t)}},{key:"createRearWheel",value:function(){var e=c["default"].assets,t=new p3.MovieClipSequence;return t.addTextures([e.getTexture("turbo_rear_wheel_spin_00"),e.getTexture("turbo_rear_wheel_spin_01")]),new p3.MovieClip(t)}},{key:"createShadow",value:function(){var e=c["default"].assets;return new PIXI.Sprite(e.getTexture("turbo_shadow_00"))}},{key:"createTopAxel",value:function(){var e=c["default"].assets;return new PIXI.Sprite(e.getTexture("turbo_rear_axle_top_00"))}},{key:"createBottomAxel",value:function(){var e=c["default"].assets;return new PIXI.Sprite(e.getTexture("turbo_rear_axle_bottom_00"))}}]),t}(_["default"]);i["default"]=f},{"../Common":7,"../race/RaceCarView":54}],23:[function(e,t,i){(function(t){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var n=e("./Main"),o=i(n);t.Main=o["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Main":10}],24:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function u(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:u(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},l=function(e){function t(e){n(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.duration=8,i.range=4,i.slow=.998,i.swerve=.64,i._owner=e,i._view=null,i}return r(t,e),a(t,[{key:"init",value:function(){this._view=new PIXI.Graphics,this._view.beginFill(255,.2),this._view.drawCircle(0,0,340),this._view.endFill(),this.addChild(this._view),TweenMax.to(this.scale,.6,{x:.8,y:.8,ease:Power1.easeInOut,yoyo:!0,repeat:-1})}},{key:"update",value:function(e){}},{key:"destroy",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this,{removeChildren:!0})}},{key:"owner",get:function(){return this._owner}}]),t}(PIXI.Container);i["default"]=l},{}],25:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function f(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:f(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("./AOE"),c=(n(u),e("./Powerup")),h=n(c),_=function(e){function t(e){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i._aoe=null,i}return a(t,e),s(t,[{key:"update",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e),this._aoe&&(this._aoe.update(e),this._aoe.parent||(this.destroyNextFrame=!0))}},{key:"aoe",get:function(){return this._aoe}}]),t}(h["default"]);i["default"]=_},{"./AOE":24,"./Powerup":44}],26:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=e("../Common"),u=n(l),c=e("../race/RaceMover"),h=n(c),_=function(e){function t(e){o(this,t);var i=new PIXI.Sprite(u["default"].assets.getTexture("game_powerup_bomb"));i.anchor=new PIXI.Point(.5,.5);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i));return n.collisionWidth=60,n.collisionLength=34,n.armDelay=1,n._owner=e,n._emitter=null,n._isEmitterFinished=!1,n._armed=!1,n._arming=!1,n._armBlinkFrame=0,n._armBlinkRate=8,n}return a(t,e),s(t,[{key:"init",value:function(){this._startDist=this.distance}},{key:"update",value:function(e){this._emitter&&this._emitter.update(e),this._emitter&&!this._emitter.emit&&(this._isEmitterFinished||(this._isEmitterFinished=!0,delay(function(){this.destroyNextFrame=!0},1,this))),this._arming&&++this._armBlinkFrame%this._armBlinkRate===0&&(this.alpha=this.alpha?0:1)}},{key:"arm",value:function(){delay(function(){this._armed=!0,this._arming=!1,this.alpha=1},this.armDelay,this),this._arming=!0}},{key:"explode",value:function(){this._armed=!1,this._view.texture=PIXI.Texture.EMPTY,this._createEmitter(),this._emitter.playOnceAndDestroy(),this._view.visible&&this._playSound()}},{key:"_createEmitter",value:function(){var e=u["default"].assets,t=e.getJSON("particle_emitter_explosion_00"),i=new PIXI.Container;i.scale=new PIXI.Point(2,2),this._view.addChild(i),this._emitter=new PIXI.particles.Emitter(i,[e.getTexture("particle_explosion_smoke_00"),e.getTexture("particle_explosion_smoke_01"),e.getTexture("particle_explosion_smoke_02")],t),this._emitter.emit=!1}},{key:"_playSound",value:function(){u["default"].audio.playSound(["sfx_bomb_explode_big_00","sfx_bomb_explode_big_01"])}},{key:"owner",get:function(){return this._owner}},{key:"armed",get:function(){return this._armed}}]),t}(h["default"]);i["default"]=_},{"../Common":7,"../race/RaceMover":58}],27:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function y(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:y(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("./Bomb"),c=n(u),h=e("../Common"),_=n(h),f=e("./Powerup"),p=n(f),d=function(e){function t(e){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.launchDistance=11,i.launchHeight=300,i.launchDuration=.6,i}return a(t,e),s(t,[{key:"update",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e),this._bomb&&this._bomb.destroyNextFrame&&(this.destroyNextFrame=!0)}},{key:"activate",value:function(){var e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"activate",this).call(this);if(e){this._bomb=this._createBomb(),this._bomb.powerupType=this.type,this._bomb.offset.x=this._collector.offset.x,this._bomb.offset.y=-120,this._bomb.moving=!0,this._bomb.lap=this._collector.lap,this._bomb.zDepthOffset=1,this._collector.engine.addEntity(this._bomb,this._collector.distance+1,!1),delay(function(){this._collector.usingPowerup=!1},1,this);var i=new TimelineMax({onComplete:function(){this._bomb.arm()},onCompleteScope:this});i.insert(TweenMax.to(this._bomb,this.launchDuration,{distance:this._bomb.distance+Math.max(0,this.launchDistance),ease:Power1.easeOut})),i.insert(TweenMax.to(this._bomb.offset,.5*this.launchDuration,{y:this._bomb.offset.y-Math.max(0,this.launchHeight),ease:Power1.easeOut,yoyo:!0,repeat:1})),this._playSound()}return e}},{key:"_createBomb",value:function(){return new c["default"](this._collector)}},{key:"_playSound",value:function(){_["default"].audio.playSound(["sfx_launch_object_00","sfx_launch_object_01","sfx_launch_object_02","sfx_launch_object_03","sfx_launch_object_04","sfx_launch_object_05"])}},{key:"bomb",get:function(){return this._bomb}}]),t}(p["default"]);i["default"]=d},{"../Common":7,"./Bomb":26,"./Powerup":44}],28:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function u(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:u(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},l=function(e){function t(e){n(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.duration=1,i.multiplier=1.6,i._owner=e,i._timeout=0,i._active=!1,i}return r(t,e),a(t,[{key:"init",value:function(){this._startBoost()}},{key:"destroy",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this,e)}},{key:"update",value:function(e){this._active&&(this._timeout<=0?this._stopBoost():this._timeout-=e)}},{key:"_startBoost",value:function(){this._owner.startBoost(this.multiplier),this._timeout=this.duration,this._active=!0}},{key:"_stopBoost",value:function(){this._owner.stopBoost(),this._owner.usingPowerup=!1,this._active=!1}},{key:"owner",get:function(){return this._owner}},{key:"active",get:function(){return this._active}}]),t}(PIXI.Container);i["default"]=l},{}],29:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function y(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:y(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("./Boost"),c=n(u),h=e("../Common"),_=n(h),f=e("./Powerup"),p=n(f),d=function(e){function t(e){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),s(t,[{key:"update",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e),this._boost&&(this._boost.update(e),this._boost.parent||(this.destroyNextFrame=!0))}},{key:"activate",value:function(){var e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"activate",this).call(this);return e&&(this._boost=this._createBoost(),this._boost.powerupType=this.type,this._boost.init(),this._collector.view.addChild(this._boost),this._collector.view.visible&&_["default"].audio.playSound("sfx_powerup_speedup_tyre_screech_00")),e}},{key:"_createBoost",value:function(){return new c["default"](this._collector)}},{key:"boost",get:function(){return this._boost}}]),t}(p["default"]);i["default"]=d},{"../Common":7,"./Boost":28,"./Powerup":44}],30:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function p(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("./AOE"),c=n(u),h=e("../Common"),_=n(h),f=function(e){function t(e){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i._emitter=null,i}return a(t,e),s(t,[{key:"init",value:function(){var e=_["default"].assets,t=e.getJSON("particle_emitter_powerup_bubbles2"),i=new PIXI.Container;i.y=100,this.addChild(i),this._emitter=new PIXI.particles.Emitter(i,[e.getTexture("particles_powerup_bubble_00"),e.getTexture("particles_powerup_bubble_01")],t)}},{key:"destroy",value:function(e){this._emitter.destroy(),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this,e)}},{key:"update",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e),this._emitter.update(e)}},{key:"start",value:function(){this._emitter.emit=!0}},{key:"stop",value:function(){this._emitter.emit=!1}}]),t}(c["default"]);i["default"]=f;
},{"../Common":7,"./AOE":24}],31:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function w(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:w(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("./AOEPowerup"),c=n(u),h=e("../AudioParams"),_=n(h),f=e("./Bubbles"),p=n(f),d=e("../Common"),y=n(d),v=function(e){function t(e){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i._loopSFX=null,i}return a(t,e),s(t,[{key:"destroy",value:function(){this._stopLoopSFX(),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"activate",value:function(){var e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"activate",this).call(this);return e&&(this._aoe=new p["default"](this._collector),this._aoe.powerupType=this.type,this._aoe.init(),this._collector.view.addChild(this._aoe),this._aoe.start(),delay(function(){this._collector.usingPowerup=!1,this._aoe.stop(),delay(function(){this._aoe.parent.removeChild(this._aoe),this._aoe.destroy(),this._stopLoopSFX()},1,this)},this._aoe.duration,this),this._collector.view.visible&&this._playLoopSFX()),e}},{key:"pause",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"pause",this).call(this),this._stopLoopSFX()}},{key:"resume",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resume",this).call(this),this._playLoopSFX()}},{key:"_playLoopSFX",value:function(){this._stopLoopSFX();var e=new _["default"];e.loop=!0,this._loopSFX=y["default"].audio.playSound("sfx_powerup_bubbles_00",e)}},{key:"_stopLoopSFX",value:function(){this._loopSFX&&this._loopSFX.stop()}}]),t}(c["default"]);i["default"]=v},{"../AudioParams":6,"../Common":7,"./AOEPowerup":25,"./Bubbles":30}],32:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function p(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("./AOE"),c=n(u),h=e("../Common"),_=n(h),f=function(e){function t(e){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i._emitter=null,i}return a(t,e),s(t,[{key:"init",value:function(){var e=_["default"].assets,t=e.getJSON("particle_emitter_powerup_butterflies2"),i=new PIXI.Container;this.addChild(i),this._emitter=new PIXI.particles.Emitter(i,[e.getTexture("particles_powerup_butterfly_00"),e.getTexture("particles_powerup_butterfly_01"),e.getTexture("particles_powerup_butterfly_02")],t)}},{key:"destroy",value:function(e){this._emitter.destroy(),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this,e)}},{key:"update",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e),this._emitter.update(e)}},{key:"start",value:function(){this._emitter.emit=!0}},{key:"stop",value:function(){this._emitter.emit=!1}}]),t}(c["default"]);i["default"]=f},{"../Common":7,"./AOE":24}],33:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function w(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:w(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("./AOEPowerup"),c=n(u),h=e("../AudioParams"),_=n(h),f=e("./Butterflies"),p=n(f),d=e("../Common"),y=n(d),v=function(e){function t(e){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i._loopSFX=null,i}return a(t,e),s(t,[{key:"destroy",value:function(){this._stopLoopSFX(),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"activate",value:function(){var e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"activate",this).call(this);return e&&(this._aoe=new p["default"](this._collector),this._aoe.powerupType=this.type,this._aoe.init(),this._collector.view.addChild(this._aoe),this._aoe.start(),delay(function(){this._collector.usingPowerup=!1,this._aoe.stop(),delay(function(){this._aoe.parent.removeChild(this._aoe),this._aoe.destroy(),this._stopLoopSFX()},1,this)},this._aoe.duration,this),this._collector.view.visible&&this._playLoopSFX()),e}},{key:"pause",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"pause",this).call(this),this._stopLoopSFX()}},{key:"resume",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resume",this).call(this),this._playLoopSFX()}},{key:"_playLoopSFX",value:function(){var e=new _["default"];e.loop=!0,this._loopSFX=y["default"].audio.playSound("sfx_powerup_butterflies_01",e)}},{key:"_stopLoopSFX",value:function(){this._loopSFX&&this._loopSFX.stop()}}]),t}(c["default"]);i["default"]=v},{"../AudioParams":6,"../Common":7,"./AOEPowerup":25,"./Butterflies":32}],34:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function p(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("./Bomb"),c=n(u),h=e("../Common"),_=n(h),f=function(e){function t(e){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i._view.texture=_["default"].assets.getTexture("game_powerup_candies"),i}return a(t,e),s(t,[{key:"arm",value:function(){this._view.texture=_["default"].assets.getTexture("powerup_patch_candy"),this.offset.y+=80,this.scale=new PIXI.Point(2,2),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"arm",this).call(this)}},{key:"_createEmitter",value:function(){var e=_["default"].assets,t=e.getJSON("particle_emitter_candy_blast_00"),i=new PIXI.Container;this._view.addChild(i),this._emitter=new PIXI.particles.Emitter(i,[e.getTexture("particles_powerup_candy_00"),e.getTexture("particles_powerup_candy_01"),e.getTexture("particles_powerup_candy_02"),e.getTexture("particles_powerup_candy_03"),e.getTexture("particles_powerup_candy_04")],t)}},{key:"_playSound",value:function(){_["default"].audio.playSound("sfx_hit_candy_02")}}]),t}(c["default"]);i["default"]=f},{"../Common":7,"./Bomb":26}],35:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=e("./BombPowerup"),u=n(l),c=e("./Candy"),h=n(c),_=e("../Common"),f=n(_),p=function(e){function t(e){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),s(t,[{key:"_createBomb",value:function(){return new h["default"](this._collector)}},{key:"_playSound",value:function(){f["default"].audio.playSound("sfx_powerup_candy_00")}}]),t}(u["default"]);i["default"]=p},{"../Common":7,"./BombPowerup":27,"./Candy":34}],36:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function p(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("./Boost"),c=n(u),h=e("../Common"),_=n(h),f=function(e){function t(e){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i._emitter=null,i}return a(t,e),s(t,[{key:"init",value:function(){var e=_["default"].assets,i=e.getJSON("particle_emitter_flameon_00"),n=new PIXI.Container;n.y=40,this.addChild(n),this._emitter=new PIXI.particles.Emitter(n,[e.getTexture("particle_powerup_flameon_00"),e.getTexture("particle_powerup_flameon_01"),e.getTexture("particle_powerup_flameon_02"),e.getTexture("particle_powerup_flameon_03"),e.getTexture("particle_powerup_flameon_04"),e.getTexture("particle_powerup_flameon_05")],i),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this)}},{key:"destroy",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this,e),this._emitter.destroy()}},{key:"update",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e),this._emitter.update(e)}},{key:"_startBoost",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_startBoost",this).call(this),this._emitter.emit=!0}},{key:"_stopBoost",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_stopBoost",this).call(this),delay(function(){this._emitter.emit=!1},1,this),delay(function(){this.parent&&this.parent.removeChild(this)},2,this)}}]),t}(c["default"]);i["default"]=f},{"../Common":7,"./Boost":28}],37:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function y(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:y(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("./BoostPowerup"),c=n(u),h=e("../Common"),_=n(h),f=e("./FlameBoost"),p=n(f),d=function(e){function t(e){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),s(t,[{key:"activate",value:function(){var e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"activate",this).call(this);return this._collector.view.visible&&_["default"].audio.playSound("sfx_powerup_flame_00"),e}},{key:"_createBoost",value:function(){return new p["default"](this._collector)}}]),t}(c["default"]);i["default"]=d},{"../Common":7,"./BoostPowerup":29,"./FlameBoost":36}],38:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function p(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("./Bomb"),c=n(u),h=e("../Common"),_=n(h),f=function(e){function t(e){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i._view.texture=_["default"].assets.getTexture("particles_powerup_glue_00"),i}return a(t,e),s(t,[{key:"arm",value:function(){this._view.texture=_["default"].assets.getTexture("powerup_patch_glue"),this.offset.y+=80,this.scale=new PIXI.Point(2,2),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"arm",this).call(this)}},{key:"_createEmitter",value:function(){var e=_["default"].assets,t=e.getJSON("particle_emitter_glue_puddle_00"),i=new PIXI.Container;this._view.addChild(i),this._emitter=new PIXI.particles.Emitter(i,[e.getTexture("particles_powerup_glue_00")],t)}},{key:"_playSound",value:function(){_["default"].audio.playSound("sfx_hit_glue_00")}}]),t}(c["default"]);i["default"]=f},{"../Common":7,"./Bomb":26}],39:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=e("./BombPowerup"),u=n(l),c=e("../Common"),h=n(c),_=e("./Glue"),f=n(_),p=function(e){function t(e){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),s(t,[{key:"_createBomb",value:function(){return new f["default"](this._collector)}},{key:"_playSound",value:function(){h["default"].audio.playSound("sfx_launch_glue_00")}}]),t}(u["default"]);i["default"]=p},{"../Common":7,"./BombPowerup":27,"./Glue":38}],40:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function p(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("./Boost"),c=n(u),h=e("../Common"),_=n(h),f=function(e){function t(e){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i._emitter=null,i}return a(t,e),s(t,[{key:"init",value:function(){var e=_["default"].assets,i=e.getJSON("particle_emitter_lightning_speed_00"),n=new PIXI.Container;n.y=40,this.addChild(n),this._emitter=new PIXI.particles.Emitter(n,[e.getTexture("particle_powerup_lightningspeed_01")],i),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this)}},{key:"destroy",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this,e),this._emitter.destroy()}},{key:"update",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e),this._emitter.update(e)}},{key:"_startBoost",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_startBoost",this).call(this),this._emitter.emit=!0}},{key:"_stopBoost",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_stopBoost",this).call(this),delay(function(){this._emitter.emit=!1},1,this),delay(function(){this.parent&&this.parent.removeChild(this)},2,this)}}]),t}(c["default"]);i["default"]=f},{"../Common":7,"./Boost":28}],41:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function y(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:y(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("./BoostPowerup"),c=n(u),h=e("../Common"),_=n(h),f=e("./LightningBoost"),p=n(f),d=function(e){function t(e){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),s(t,[{key:"activate",value:function(){var e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"activate",this).call(this);return this._collector.view.visible&&_["default"].audio.playSound("sfx_powerup_lightning_01"),e}},{key:"_createBoost",value:function(){return new p["default"](this._collector)}}]),t}(c["default"]);i["default"]=d},{"../Common":7,"./BoostPowerup":29,"./LightningBoost":40}],42:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function p(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("../Common"),c=n(u),h=e("../race/RaceMover"),_=n(h),f=function(e){function t(e){o(this,t);var i=new PIXI.Sprite(c["default"].assets.getTexture("powerup_missile_normal_object_01"));i.anchor=new PIXI.Point(.5,.5),i.tint=16711680;var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i));return n.acceleration=16,n.velocity=n.acceleration,n.linearDamping=.994,n.collisionWidth=60,n.collisionLength=60,n.powerupType=0,n.life=40,n._owner=e,n._startDist=0,n._trailEmitter=null,n._explosionEmitter=null,n._armed=!0,n}return a(t,e),s(t,[{key:"init",value:function(){this._startDist=this.getTotalDistance(),this._createTrailEmitter()}},{key:"destroy",value:function(){this._trailEmitter.destroy(),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"update",value:function(e){if(this._armed){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e);var i=this.getTotalDistance()-this._startDist;i>this.life&&this.explode()}this._trailEmitter&&this._trailEmitter.update(e),this._explosionEmitter&&this._explosionEmitter.update(e),this._explosionEmitter&&!this._explosionEmitter.emit&&(this.destroyNextFrame=!0)}},{key:"explode",value:function(){this._armed=!1,this._createExplosionEmitter(),this._explosionEmitter.playOnceAndDestroy(),this._view.visible&&c["default"].audio.playSound(["sfx_bomb_explode_big_00","sfx_bomb_explode_big_01"])}},{key:"_createTrailEmitter",value:function(){var e=c["default"].assets,t=e.getJSON("particle_emitter_missile_normal_trail"),i=new PIXI.Container;i.scale=new PIXI.Point(2,2),this._view.addChild(i),this._trailEmitter=new PIXI.particles.Emitter(this._view,[e.getTexture("particles_rockettrail_00"),e.getTexture("particles_rockettrail_01"),e.getTexture("particles_rockettrail_02"),e.getTexture("particles_rockettrail_03")],t),this._trailEmitter.emit=!0}},{key:"_createExplosionEmitter",value:function(){var e=c["default"].assets,t=e.getJSON("particle_emitter_explosion_00"),i=new PIXI.Container;i.scale=new PIXI.Point(2,2),this._view.addChild(i),this._explosionEmitter=new PIXI.particles.Emitter(i,[e.getTexture("particle_explosion_smoke_00"),e.getTexture("particle_explosion_smoke_01"),e.getTexture("particle_explosion_smoke_02")],t),this._explosionEmitter.emit=!1}},{key:"owner",get:function(){return this._owner}},{key:"armed",get:function(){return this._armed}}]),t}(_["default"]);i["default"]=f},{"../Common":7,"../race/RaceMover":58}],43:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function y(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:y(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("../Common"),c=n(u),h=e("./Missile"),_=n(h),f=e("./Powerup"),p=n(f),d=function(e){function t(e){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i._missile=null,i}return a(t,e),s(t,[{key:"init",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this)}},{key:"destroy",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"update",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e),this._missile&&this._missile.destroyNextFrame&&(this.destroyNextFrame=!0)}},{key:"activate",value:function(){var e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"activate",this).call(this);return e&&(this._missile=this._createMissile(this._collector),this._missile.powerupType=this.type,this._missile.offset.x=this._collector.offset.x,this._missile.offset.y=-120,this._missile.moving=!0,this._missile.lap=this._collector.lap,this._collector.engine.addEntity(this._missile,this._collector.distance+.2,!1),delay(function(){this._collector.usingPowerup=!1},2,this),this._collector.view.visible&&c["default"].audio.playSound(["sfx_launch_missile_00","sfx_launch_missile_01"])),e}},{key:"_createMissile",value:function(e){return new _["default"](e)}},{key:"missile",get:function(){return this._missile}}]),t}(p["default"]);i["default"]=d},{"../Common":7,"./Missile":42,"./Powerup":44}],44:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=e("../Common"),s=n(a),l=function(){function e(t){o(this,e),this.destroyNextFrame=!1,this.type=0,this._collector=t,this._activated=!1}return r(e,[{key:"destroy",value:function(){}},{key:"update",value:function(e){}},{key:"pause",value:function(){}},{key:"resume",value:function(){}},{key:"activate",value:function(){return!this._activated&&(this._activated=!0,!0)}},{key:"collector",get:function(){return this._collector}},{key:"activated",get:function(){return this._activated}}],[{key:"getRandomTypes",value:function(){for(var e=[0,1,2,3,4,5,6,7,8,9,10],t=[],i=e.length,n=0;n<i;++n){var o=Math.floor(Math.random()*e.length),r=e[o];e.splice(o,1),t.push(r)}return t}},{key:"getTexture",value:function(e){var t=s["default"].assets,i=void 0;switch(e){case 0:i="ui_icon_powerup_bomb";break;case 1:i="ui_icon_powerup_candies";break;case 2:i="ui_icon_powerup_flame";break;case 3:i="ui_icon_powerup_glue";break;case 4:i="ui_icon_powerup_lightning";break;case 5:i="ui_icon_powerup_missile";break;case 6:i="ui_icon_powerup_nails";break;case 7:i="ui_icon_powerup_smart_missile";break;case 8:i="ui_icon_powerup_steam";break;case 9:i="ui_icon_powerup_bubbles";break;case 10:i="ui_icon_powerup_butterfly"}return t.getTexture(i)}}]),e}();i["default"]=l},{"../Common":7}],45:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function p(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("../Common"),c=n(u),h=e("./Missile"),_=n(h),f=function(e){function t(e){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.turnAccel=12e3,i.turnDamping=.914,i.view.texture=c["default"].assets.getTexture("powerup_missile_smart_object_01"),i.view.tint=153,i.minSeekDistance=0,i.maxSeekDistance=16,i}return a(t,e),s(t,[{key:"init",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this)}},{key:"update",value:function(e){if(this._armed){var i=this.seekTarget();if(i){var n=i.offset.x,o=580;Math.abs(n)>o&&(n=n/Math.abs(n)*o);var r=n-this.offset.x,a=r/Math.abs(r),s=1.6,u=280;r>u?this.turnSpeed=a*this.turnAccel:this.turnSpeed=a*(this.turnAccel*Math.min(1,Math.abs(r/u))),this.turnSpeed/=s}}l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e)}},{key:"seekTarget",value:function(){for(var e=Number.MAX_SAFE_INTEGER,t=null,i=c["default"].game.getCars(),n=0;n<i.length;++n){var o=i[n];if(o!==this._owner){var r=this.getDistanceTo(o);r>this.minSeekDistance&&r<this.maxSeekDistance&&r<e&&(t=o,e=r)}}return t}},{key:"_createTrailEmitter",value:function(){var e=c["default"].assets,t=e.getJSON("particle_emitter_missile_smart_trail");this._trailEmitter=new PIXI.particles.Emitter(this._view,[e.getTexture("particles_rockettrail_00"),e.getTexture("particles_rockettrail_01"),e.getTexture("particles_rockettrail_02"),e.getTexture("particles_rockettrail_03")],t),this._trailEmitter.emit=!0}}]),t}(_["default"]);i["default"]=f},{"../Common":7,"./Missile":42}],46:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=e("./MissilePowerup"),u=n(l),c=e("./SmartMissile"),h=n(c),_=function(e){function t(e){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),s(t,[{key:"_createMissile",value:function(e){return new h["default"](e)}}]),t}(u["default"]);i["default"]=_},{"./MissilePowerup":43,"./SmartMissile":45}],47:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function p(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("./Boost"),c=n(u),h=e("../Common"),_=n(h),f=function(e){function t(e){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i._emitter=null,i}return a(t,e),s(t,[{key:"init",value:function(){var e=_["default"].assets,i=e.getJSON("particle_emitter_powerup_steamahead"),n=new PIXI.Container;n.y=40,this.addChild(n),this._emitter=new PIXI.particles.Emitter(n,[e.getTexture("particles_steam_00"),e.getTexture("particles_steam_01"),e.getTexture("particles_steam_02"),e.getTexture("particles_steam_03")],i),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this)}},{key:"destroy",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this,e),this._emitter.destroy()}},{key:"update",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e),this._emitter.update(e)}},{key:"_startBoost",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_startBoost",this).call(this),this._emitter.emit=!0}},{key:"_stopBoost",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_stopBoost",this).call(this),delay(function(){this._emitter.emit=!1},1,this),delay(function(){this.parent&&this.parent.removeChild(this)},2,this)}}]),t}(c["default"]);i["default"]=f},{"../Common":7,"./Boost":28}],48:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function y(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:y(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("./BoostPowerup"),c=n(u),h=e("../Common"),_=n(h),f=e("./SteamBoost"),p=n(f),d=function(e){function t(e){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),s(t,[{key:"activate",value:function(){var e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"activate",this).call(this);return this._collector.view.visible&&_["default"].audio.playSound("sfx_powerup_steam_01"),e}},{key:"_createBoost",value:function(){return new p["default"](this._collector)}}]),t}(c["default"]);i["default"]=d},{"../Common":7,"./BoostPowerup":29,"./SteamBoost":47}],49:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function p(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("./Bomb"),c=n(u),h=e("../Common"),_=n(h),f=function(e){function t(e){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i._view.texture=_["default"].assets.getTexture("game_powerup_nails"),i}return a(t,e),s(t,[{key:"arm",value:function(){this._view.texture=_["default"].assets.getTexture("powerup_patch_tacks"),this.offset.y+=80,this.scale=new PIXI.Point(2,2),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"arm",this).call(this)}},{key:"_createEmitter",value:function(){var e=_["default"].assets,t=e.getJSON("particle_emitter_candy_blast_00"),i=new PIXI.Container;this._view.addChild(i),this._emitter=new PIXI.particles.Emitter(i,[e.getTexture("particles_powerup_nail_00")],t)}}]),t}(c["default"]);i["default"]=f},{"../Common":7,"./Bomb":26}],50:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=e("./BombPowerup"),u=n(l),c=e("./Tacs"),h=n(c),_=function(e){function t(e){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),s(t,[{key:"_createBomb",value:function(){return new h["default"](this._collector)}}]),t}(u["default"]);i["default"]=_},{"./BombPowerup":27,"./Tacs":49}],51:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return s.z=r,s.w=a,s}return r(t,e),a(t,[{key:"clone",value:function(){return new t(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){this.set(e.x,e.y,e.z,e.w)}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w&&this.w}},{key:"set",value:function(e,t,i,n){this.x=e||0,this.y=t||(0!==t?this.x:0),this.z=i||(0!==i?this.x:0),this.w=n||(0!==n?this.x:0)}}]),t}(PIXI.Point);i["default"]=s},{}],52:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=e("./Point4"),s=n(a),l=e("./RaceEntity"),u=(n(l),function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;o(this,e),this.target=null,this.position=t||new s["default"],this.angle=i,this.vanishingPoint=new PIXI.Point,this.fieldOfView=90,this.focus=2.5,this.zoom=30,this.height=-2,this.offset=new PIXI.Point,this.distance=2,this.tilt=1.6,this.tiltEase=.01,this.shake=new PIXI.Point,this.shakeOffset=new PIXI.Point,this.shakeEase=.14,this.shakeMagnitiude=14,this.shakeElapsed=0,this.shakeDuration=0}return r(e,[{key:"applyShake",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:14;this.shakeDuration=e,this.shakeMagnitiude=t,this.shakeElapsed=0}}]),e}());i["default"]=u},{"./Point4":51,"./RaceEntity":57}],53:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function p(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("../Common"),c=n(u),h=e("./RaceMover"),_=n(h),f=function(e){function t(e,i){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i));return n.acceleration=3.4,n.turnAccel=1e4,n.linearDamping=.994,n.turnDamping=.94,n.collisionWidth=400,n.collisionLength=50,n.signals.boost=new signals.Signal,n.speedModifer=1,n.brakeDamping=.97,n.minBrakeSpeed=2,n.usingPowerup=!1,n.offroadStart=1240,n.offroadCoef=.994,n.roadLimit=1420,n._id=e,n._boostActive=!1,n._boostMultiplier=1.4,n._jumping=!1,n._debuffDuration=0,n._debuffSlow=0,n._debuffSwerve=0,n._debuffTime=-1,n._jumpOffset=0,n._dustEmitter=null,n._impactLeftEmitter=null,n._impactRightEmitter=null,n._impactTime=0,n}return a(t,e),s(t,[{key:"init",value:function(){this._view.startEngine(),this._createDustEmitter(),this._createImpactLeftEmitter(),this._createImpactRightEmitter()}},{key:"destroy",value:function(){this.signals.boost.dispose(),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"update",value:function(e){if(this.moving){var t=this.acceleration*this.speedModifer;this._boostActive&&(t*=this._boostMultiplier),this.velocity+=t*e}this.velocity*=this.linearDamping,this.distance+=this.velocity*e;var i=Math.min(1,this.velocity/12);this.turnVelocity+=this.turnSpeed*i*e,this.turnVelocity*=this.turnDamping,this.offset.x+=this.turnVelocity*e,i=this.velocity/6,this.offset.x-=6200*this.engine.getTrackCurvature(this.distance)*i*deltaTime,this.offset.x=Math.max(-this.roadLimit,Math.min(this.roadLimit,this.offset.x)),Math.abs(this.offset.x)>this.offroadStart?(this._offroad=!0,this.velocity*=this.offroadCoef,this._dustEmitter.emit=!0):this._offroad&&(this._offroad=!1,this._dustEmitter.emit=!1),Math.abs(this.velocity)<.01&&(this.velocity=0),Math.abs(this.turnVelocity)<.01&&(this.turnVelocity=0),this.updateDebuff(e),this.updateView(e),this.updateLap(e),this._dustEmitter.update(e),this._impactLeftEmitter.update(e),this._impactRightEmitter.update(e)}},{key:"updateDebuff",value:function(e){this._debuffDuration<=0?(this._debuffDuration=this._debuffSlow=this._debuffSwerve=0,this._debuffTime=-1):(this._debuffDuration-=e,this.turnVelocity+=Math.sin(.012*++this._debuffTime)*Math.random()*this.turnAccel*this._debuffSwerve*e,this.velocity*=this._debuffSlow)}},{key:"updateView",value:function(e){var t=2*this.engine.getTrackCurvature(this.distance),i=this.engine.getTrackGradient(this.distance);this._view.update(e,this.distance,160*t,.56*i,this.velocity,.026*this.turnVelocity,this._jumpOffset)}},{key:"brake",value:function(){this.velocity>this.minBrakeSpeed&&(this.velocity*=this.brakeDamping)}},{key:"jump",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this._jumping){this._jumping=!0;var t=new TimelineMax({onComplete:function(){this._jumping=!1},onCompleteScope:this});t.append(TweenMax.to(this,.3,{_jumpOffset:e?2:1,ease:Power2.easeOut})),t.append(TweenMax.to(this,.2,{_jumpOffset:0,ease:Power1.easeIn,onComplete:function(){e&&this.view.visible&&c["default"].audio.playSound("sfx_car_land_00")},onCompleteScope:this})),t.append(TweenMax.to(this,.1,{_jumpOffset:.12,ease:Power1.easeInOut})),t.append(TweenMax.to(this,.08,{_jumpOffset:0,ease:Power1.easeInOut})),this.view.visible&&c["default"].audio.playSound("sfx_btn_nextcar_00")}}},{key:"startBoost",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1.4;this._boostMultiplier=e,this._boostActive=!0,console.log("start boost",this)}},{key:"stopBoost",value:function(){this._boostActive&&(this._boostActive=!1,console.log("stop boost",this))}},{key:"applyDebuff",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.996,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.64;this._debuffDuration=Math.max(0,e),this._debuffSlow=t,this._debuffSwerve=i,this._debuffTime===-1&&(this._debuffTime=Math.random()*Number.MAX_VALUE)}},{key:"takeHit",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.velocity*=.6,this.jump(),e&&c["default"].audio.playSound(["sfx_car_hit_00","sfx_car_hit_01","sfx_car_hit_02","sfx_car_hit_03","sfx_car_hit_04","sfx_car_hit_05","sfx_car_hit_06","sfx_car_hit_07","sfx_car_hit_08","sfx_car_hit_09","sfx_car_hit_10"])}},{key:"onCollisionBegin",value:function(e,t){var i=Math.abs(this.turnVelocity+t.turnVelocity);if(window.performance.now()-this._impactTime>4e3&&i>1e3){this._impactTime=window.performance.now();var n=t.offset.x-this.offset.x,o=n/Math.abs(n);o===-1?this._impactLeftEmitter.emit=!0:1===o&&(this._impactRightEmitter.emit=!0),this._view.visible&&c["default"].audio.playSound(["sfx_car_hit_00","sfx_car_hit_01","sfx_car_hit_02","sfx_car_hit_03","sfx_car_hit_04","sfx_car_hit_05","sfx_car_hit_06","sfx_car_hit_07","sfx_car_hit_08","sfx_car_hit_09","sfx_car_hit_10"])}}},{key:"onCollisionEnd",value:function(){}},{key:"_createDustEmitter",value:function(){var e=new PIXI.Container;e.y=80,e.scale=new PIXI.Point(2,2),this._view.addChild(e);var t=c["default"].assets,i=t.getJSON("particle_emitter_offtrack_dust_00");this._dustEmitter=new PIXI.particles.Emitter(e,[t.getTexture("particles_car_dust_00"),t.getTexture("particles_car_dust_01"),t.getTexture("particles_car_dust_02"),t.getTexture("particles_car_dust_03")],i),this._dustEmitter.emit=!1}},{key:"_createImpactLeftEmitter",value:function(){var e=new PIXI.Container;e.y=80,e.scale=new PIXI.Point(2,2),this._view.addChild(e);var t=c["default"].assets,i=t.getJSON("particle_emitter_impact_left_00");this._impactLeftEmitter=new PIXI.particles.Emitter(e,[t.getTexture("particle_impact_star_orange"),t.getTexture("particle_impact_star_white"),t.getTexture("particle_impact_star_yellow")],i),this._impactLeftEmitter.emit=!1}},{key:"_createImpactRightEmitter",value:function(){var e=new PIXI.Container;e.y=80,e.scale=new PIXI.Point(2,2),this._view.addChild(e);var t=c["default"].assets,i=t.getJSON("particle_emitter_impact_right_00");this._impactRightEmitter=new PIXI.particles.Emitter(e,[t.getTexture("particle_impact_star_orange"),t.getTexture("particle_impact_star_white"),t.getTexture("particle_impact_star_yellow")],i),this._impactRightEmitter.emit=!1}},{key:"id",get:function(){return this._id}},{key:"offroad",get:function(){return this._offroad}},{key:"debuffed",get:function(){return this._debuffDuration>0}},{key:"isPlayer",get:function(){return this._id===c["default"].playerDriverId}}]),t}(_["default"]);i["default"]=f},{"../Common":7,"./RaceMover":58}],54:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=e("../Common"),u=(n(l),function(e){function t(){o(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._curvature=0,e._shadow=e.createShadow(),e._shadow.anchor=new PIXI.Point(.5,.5),e.addChild(e._shadow),e._wheels={},e._wheels.front={},e._wheels.rear={},e._wheels.front.left=e.createFrontWheel(),e._wheels.front.left.anchor=new PIXI.Point(.5,.5),e._wheels.front.left.offset=new PIXI.Point,e._wheels.front.left.looping=!0,e._wheels.front.left.play(),e.addChild(e._wheels.front.left),e._wheels.front.right=e.createFrontWheel(),e._wheels.front.right.anchor=new PIXI.Point(.5,.5),e._wheels.front.right.offset=new PIXI.Point,e._wheels.front.right.looping=!0,e._wheels.front.right.scale.x=-1,e._wheels.front.right.play(),e.addChild(e._wheels.front.right),e._front=e.createFrontLayer(),e._front.anchor=new PIXI.Point(.5,.5),e._front.offset=new PIXI.Point,e.addChild(e._front),e._wheels.rear.left=e.createRearWheel(),e._wheels.rear.left.anchor=new PIXI.Point(.5,.5),e._wheels.rear.left.offset=new PIXI.Point,e._wheels.rear.left.looping=!0,e._wheels.rear.left.play(),e.addChild(e._wheels.rear.left),e._wheels.rear.right=e.createRearWheel(),e._wheels.rear.right.anchor=new PIXI.Point(.5,.5),e._wheels.rear.right.offset=new PIXI.Point,e._wheels.rear.right.looping=!0,e._wheels.rear.right.scale.x=-1,e._wheels.rear.right.play(),e.addChild(e._wheels.rear.right),e._back=e.createBackLayer(),e._back.anchor=new PIXI.Point(.5,.5),e._back.offset=new PIXI.Point,e.addChild(e._back),e}return a(t,e),s(t,[{key:"init",value:function(){}},{key:"destroy",value:function(e){this.stopEngine()}},{key:"update",value:function(e,t,i,n,o,r,a){this._shadow&&(this._shadow.alpha=1-.8*a)}},{key:"startEngine",value:function(){this.stopEngine(),TweenMax.to(this._front.scale,.04,{y:this._front.scale.y-.04,yoyo:!0,repeat:-1}),TweenMax.to(this._back.offset,.03,{y:this._back.offset.y-4,yoyo:!0,repeat:-1}),TweenMax.to(this._back.scale,.04,{delay:.02,y:this._back.scale.y-.02,yoyo:!0,repeat:-1})}},{key:"stopEngine",value:function(){TweenMax.killTweensOf(this._front.scale),TweenMax.killTweensOf(this._back.offset),TweenMax.killTweensOf(this._back.scale)}},{key:"createFrontLayer",value:function(){return new PIXI.Sprite}},{key:"createBackLayer",value:function(){return new PIXI.Sprite}},{key:"createFrontWheel",value:function(){var e=new p3.MovieClipSequence;return new p3.MovieClip(e)}},{key:"createRearWheel",value:function(){var e=new p3.MovieClipSequence;return new p3.MovieClip(e)}},{key:"createShadow",value:function(){return new PIXI.Sprite(PIXI.Texture.EMPTY)}},{key:"showBubblesEffect",value:function(){}},{key:"front",get:function(){return this._front}},{key:"back",get:function(){return this._back}}]),t}(PIXI.Container));i["default"]=u},{"../Common":7}],55:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function r(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n(this,r),this.left=e,this.right=t,this.top=i,this.bottom=o};i["default"]=o},{}],56:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=e("./Point4"),s=n(a),l=e("./RaceCamera"),u=n(l),c=e("./RaceCollision"),h=n(c),_=e("./RaceEntity"),f=n(_),p=e("./RaceSegment"),d=n(p),y=e("./RaceTrack"),v=(n(y),e("./RaceView")),w=(n(v),function(){function e(t,i){o(this,e),this._camera=null,this._track=t,this._view=i,this._trackSegments=[],this._trackGradients=[],this._trackCells=[],this._entities=[],this._tempCache=[]}return r(e,[{key:"init",value:function(){this._camera=new u["default"];for(var t=0;t<this.track.length;++t){var i=this.track.textures[t],n=new d["default"](e.getTexture(i.rM),e.getTexture(i.rL),e.getTexture(i.rR),e.getTexture(i.sL),e.getTexture(i.sR));n.worldPosition=new s["default"](this.track.track[t].x,this.track.track[t].y,this.track.track[t].h),n.distance=t,n.view.visible=!1,this._view.addChildAt(n.view,0),this._trackSegments.push(n),this._trackCells.push([])}for(var o=0;o<this._trackSegments.length;++o){var r=this._trackSegments[o];r.next=o<this._trackSegments.length-1?this._trackSegments[o+1]:this._trackSegments[0],r.previous=o>0?this._trackSegments[o-1]:this._trackSegments[this._trackSegments.length-1]}this.calculateTrackGradients()}},{key:"addEntity",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._entities.indexOf(e)!==-1&&this.removeEntity(e),e.engine=this,e.distance=t,e.worldPosition=this.getPointAt(t,0),e.view.visible=!i,this._view.addChild(e.view),e.init(),i?this._trackCells[Math.floor(e.distance)].push(e):(this.updateTransform(e),this._view.updateRoadEntity(e),this._entities.push(e))}},{key:"removeEntity",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=0;i<this._entities.length;++i)this._entities[i]===e&&(t&&e.destroy(),this._entities.splice(i,1))}},{key:"update",value:function(t){for(var i=0;i<this._tempCache.length;++i){var n=this._tempCache[i];n.view.visible=!1}this._tempCache.length=0;for(var o=this._entities.length-1;o>=0;--o){var r=this._entities[o];r.destroyNextFrame?(r.destroy(),this._entities.splice(o,1)):(r.preTransform(),r.type===f["default"].TYPE_MOVING&&r.update(t),r.distance%=this.track.length,r.worldPosition=this.getPointAt(r.distance,0),r.position=e.shiftAndRotate(r.worldPosition,this._camera.position.x,this._camera.position.y,-this._camera.angle),r.screenPosition=this.getProjectionFrom3d(r.position),0!==r.zDepth&&(r.screenPosition.x+=r.offset.x/r.zDepth,r.screenPosition.y+=r.offset.y/r.zDepth),r.postTransform())}this.updateCamera(t);var a=this._camera.target?Math.floor(this._camera.target.distance):0,s=a-1;s=s<0?s+this._track.length:s;for(var l=s+2*this._view.drawDistance,u=s;u<l;++u)for(var c=this._trackCells[u%this._track.length],h=0;h<c.length;++h){var _=c[h];_.type===f["default"].TYPE_MOVING&&_.update(t),_.distance%=this.track.length,_.worldPosition=this.getPointAt(_.distance,0),_.position=e.shiftAndRotate(_.worldPosition,this._camera.position.x,this._camera.position.y,-this._camera.angle),_.screenPosition=this.getProjectionFrom3d(_.position),0!==_.zDepth&&(_.screenPosition.x+=_.offset.x/_.zDepth,_.screenPosition.y+=_.offset.y/_.zDepth),this._tempCache.push(_)}for(var p=s;p<l;++p){var d=this._trackSegments[p%this._track.length];d.position=e.shiftAndRotate(d.worldPosition,this._camera.position.x,this._camera.position.y,-this._camera.angle),d.screenPosition=this.getProjectionFrom3d(d.position),d.width=this._view.segmentWidth/d.zDepth,this._tempCache.push(d)}this.sortDepths();for(var y=0;y<this._entities.length;++y){var v=this._entities[y];this._view.updateRoadEntity(v)}for(var w=s;w<l;++w)for(var b=this._trackCells[w%this._track.length],g=0;g<b.length;++g){var m=b[g];this._view.updateRoadEntity(m)}for(var x=s;x<l;++x){var P=this._trackSegments[x%this._track.length],k=this._camera.target&&this._camera.target.getHeading?this._camera.target.getHeading():null;this._view.updateRoadSegment(P,k)}}},{key:"updateTransform",value:function(t){t.distance%=this.track.length,t.worldPosition=this.getPointAt(t.distance,0),t.position=e.shiftAndRotate(t.worldPosition,this._camera.position.x,this._camera.position.y,-this._camera.angle),t.screenPosition=this.getProjectionFrom3d(t.position),0!==t.zDepth&&(t.screenPosition.x+=t.offset.x/t.zDepth,t.screenPosition.y+=t.offset.y/t.zDepth)}},{key:"updateCamera",value:function(e){if(this._camera.target){var t=this.getPointAt(this._camera.target.distance-this._camera.distance,0);if(t.z=this._camera.target.worldPosition.z-this._camera.height,this._camera.offset.x=-this._camera.target.offset.x/30,this._camera.position.x=t.x,this._camera.position.y=t.y,this._camera.position.z=t.z,this._camera.angle=t.w,this._camera.shakeDuration>0)if(this._camera.shakeElapsed<this._camera.shakeDuration){this._camera.shakeElapsed+=e;var i=this._camera.shakeMagnitiude;this._camera.shake=new PIXI.Point(this._camera.shakeOffset.x+Math.random()*(i- -i)+-i,this._camera.shakeOffset.y+Math.random()*(i- -i)+-i),this._view.x+=(this._camera.shake.x-this._view.x)*this._camera.shakeEase,this._view.y+=(this._camera.shake.y-this._view.y)*this._camera.shakeEase}else this._camera.shakeDuration=0;var n=this.getTrackCurvature(this._camera.target.distance),o=(this._camera.target.velocity?this._camera.target.velocity:0)/4,r=n*this._camera.tilt-this.view.rotation;
this.view.rotation+=r*this._camera.tiltEase*o}}},{key:"sortDepths",value:function(){var e=this._entities.concat(this._tempCache);e.sort(function(e,t){return t.zDepth-t.zDepthOffset-(e.zDepth-e.zDepthOffset)});for(var t=e.length-1;t>=0;--t)this.view.addChildAt(e[t].view,0)}},{key:"calculateTrackGradients",value:function(){this._trackGradients=[];for(var e=0;e<this.track.length;++e){var t=this.track.track[e].h,i=e===this.track.length-1?this.track.track[0].h:this.track.track[e+1].h;this._trackGradients.push(t-i)}}},{key:"getPointAt",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t<0&&(t+=this.track.length);var n=Math.floor(t),o=t%1,r=1-o,a=n,l=n+1;a%=this.track.length,l%=this.track.length;var u=(t+i)%1,c=1-u;n=Math.floor(t+i);var h=n,_=n+1;h%=this.track.length,_%=this.track.length;var f=this.track.track[a],p=this.track.track[l],d=this.track.track[h],y=this.track.track[_];return new s["default"](r*f.x+o*p.x,r*f.y+o*p.y,c*d.h+u*y.h,e.angleAverage(f.a,p.a,r,o))}},{key:"getProjectionFrom3d",value:function(e){var t=e.x,i=40*-e.z,n=e.y,o=40*-this._camera.position.z+this._camera.fieldOfView;return new PIXI.Point(this._camera.zoom*(20*n+this._camera.offset.x)/t+this._camera.vanishingPoint.x,-this._camera.zoom*(i-o)/t+this._camera.vanishingPoint.y)}},{key:"getTrackCurvature",value:function(e){var t=this.track.track[Math.floor(e)%this.track.length].a,i=this.track.track[Math.floor(e+1)%this.track.length].a,n=i-t;return n=Math.max(2*-Math.PI,Math.min(2*Math.PI,n)),n>Math.PI?n-=2*Math.PI:n<-Math.PI&&(n+=2*Math.PI),n}},{key:"getAverageTrackCurvature",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;e<0&&(e+=this.track.length);for(var i=0,n=0;n<t;++n)i+=this.getTrackCurvature(e+n);return i/t}},{key:"getTrackGradient",value:function(e){var t=this._trackGradients[Math.floor(e)%this.track.length],i=this._trackGradients[Math.ceil(e)%this.track.length],n=e%1,o=1-n;return o*t+n*i}},{key:"testCollision",value:function(e,t,i,n){var o=.5*(i.x+n.x),r=i.y+n.y,a=e.x-t.x,s=(e.y-t.y)*this._view.segmentHeight,l=void 0;if(Math.abs(a)<o&&Math.abs(s)<r){l=new h["default"];var u=o*s,c=r*a;u>c?u>-c?l.top=!0:l.left=!0:u>-c?l.right=!0:l.bottom=!0}return l}},{key:"camera",get:function(){return this._camera}},{key:"track",get:function(){return this._track}},{key:"view",get:function(){return this._view}}],[{key:"getTexture",value:function(e){return PIXI.Texture.EMPTY}},{key:"rotateAboutOrigin",value:function(e,t){var i=e.x*Math.cos(t)-e.y*Math.sin(t),n=e.y*Math.cos(t)+e.x*Math.sin(t);e.x=i,e.y=n,e.w=e.w+t}},{key:"shiftAndRotate",value:function(t,i,n,o){return t=t.clone(),t.x-=i,t.y-=n,e.rotateAboutOrigin(t,o),t}},{key:"angleAverage",value:function(e,t,i,n){var o=i*Math.cos(e)+n*Math.cos(t),r=i*Math.sin(e)+n*Math.sin(t);return Math.atan2(r,o)}}]),e}());i["default"]=w},{"./Point4":51,"./RaceCamera":52,"./RaceCollision":55,"./RaceEntity":57,"./RaceSegment":59,"./RaceTrack":61,"./RaceView":62}],57:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=e("./Point4"),s=n(a),l=function(){function e(t,i){o(this,e),this.signals={},this.engine=null,this.screenPosition=new PIXI.Point,this.position=new s["default"],this.worldPosition=new s["default"],this.distance=0,this.offset=new PIXI.Point,this.scale=new PIXI.Point(1,1),this.alpha=1,this.renderToWorld=!0,this.zDepthOffset=0,this.collisionWidth=0,this.collisionLength=0,this.destroyNextFrame=!1,this._type=t,this._view=i}return r(e,[{key:"init",value:function(){}},{key:"destroy",value:function(){this._view.parent&&this._view.parent.removeChild(this._view),this.engine=null}},{key:"preTransform",value:function(){}},{key:"update",value:function(e){}},{key:"postTransform",value:function(){}},{key:"type",get:function(){return this._type}},{key:"view",get:function(){return this._view}},{key:"zDepth",get:function(){return this.position.x}}]),e}();i["default"]=l,l.TYPE_STATIC=0,l.TYPE_MOVING=1,l.TYPE_SEGMENT=2},{"./Point4":51}],58:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function p(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("./Point4"),c=n(u),h=e("./RaceEntity"),_=n(h),f=function(e){function t(e){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,_["default"].TYPE_MOVING,e));return i.signals.lap=new signals.Signal,i.acceleration=0,i.turnAccel=0,i.turnSpeed=0,i.velocity=0,i.turnVelocity=0,i.linearDamping=.99,i.turnDamping=.99,i.moving=!1,i.lap=0,i._heading=new c["default"],i._lastDistance=0,i}return a(t,e),s(t,[{key:"init",value:function(){this._lastDistance=this.distance}},{key:"destroy",value:function(){this.signals.lap.dispose(),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"update",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e),this.moving&&(this.velocity+=this.acceleration*e),this.velocity*=this.linearDamping,this.distance+=this.velocity*e,this.turnVelocity+=this.turnSpeed*e,this.turnVelocity*=this.turnDamping,this.offset.x+=this.turnVelocity*e,Math.abs(this.velocity)<.01&&(this.velocity=0),Math.abs(this.turnVelocity)<.01&&(this.turnVelocity=0)}},{key:"postTransform",value:function(){this.updateLap()}},{key:"updateLap",value:function(){this.distance<this._lastDistance&&(++this.lap,this.signals.lap.dispatch(this,this.lap)),this._lastDistance=this.distance}},{key:"getHeading",value:function(){var e=this.worldPosition,t=this.engine.getPointAt(this.distance+Math.max(.001,this.velocity));this._heading.x=t.x-e.x,this._heading.y=t.y-e.y,this._heading.z=t.z-e.z,this._heading.w=1;var i=Math.sqrt(this._heading.x*this._heading.x+this._heading.y*this._heading.y+this._heading.z*this._heading.z);return this._heading.x/=i,this._heading.y/=i,this._heading.z/=i,isNaN(this._heading.x+this._heading.y+this._heading.z)&&alert(i),this._heading}},{key:"getDotTo",value:function(e){var t=this.getHeading(),i=e.getHeading();return t.x*i.x+t.y*i.y}},{key:"getPerpTo",value:function(e){var t=this.getHeading(),i=e.getHeading();return t.y*i.x+-t.x*i.y}},{key:"getTotalDistance",value:function(){var e=this.distance,t=this.engine.track.length*this.lap;return e+t}},{key:"getDistanceTo",value:function(e){var t=this.getTotalDistance(),i=e.getTotalDistance(),n=i-t,o=0!==n?n/Math.abs(n):0;if(o===-1)for(;n<this.engine.track.length*-.5;)n+=this.engine.track.length;else if(1===o)for(;n>.5*this.engine.track.length;)n-=this.engine.track.length;return n}}]),t}(_["default"]);i["default"]=f},{"./Point4":51,"./RaceEntity":57}],59:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=e("./Point4"),u=n(l),c=e("./RaceEntity"),h=n(c),_=e("./RaceSegmentQuad"),f=n(_),p=function(e){function t(e,i,n,a,s){o(this,t);var l=new PIXI.Sprite(e);l.grassLeft=new PIXI.Sprite(a),l.grassLeft.anchor.x=1,l.addChild(l.grassLeft),l.grassRight=new PIXI.Sprite(s),l.addChild(l.grassRight),l.left=new PIXI.Sprite(i),l.left.y=.5*l.left.height,l.left.anchor.x=1,l.left.anchor.y=.5,l.addChild(l.left),l.right=new PIXI.Sprite(n),l.right.x=l.width,l.right.y=.5*l.right.height,l.right.anchor.y=.5,l.addChild(l.right);var c=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,h["default"].TYPE_SEGMENT,l));return c.next=null,c.previous=null,c.width=0,c._quad=new f["default"],c._heading=new u["default"],c}return a(t,e),s(t,[{key:"getQuad",value:function(){return this._quad.topLeft.x=this.screenPosition.x-this.width,this._quad.topLeft.y=this.screenPosition.y,this._quad.topRight.x=this.screenPosition.x+this.width,this._quad.topRight.y=this.screenPosition.y,this._quad.bottomLeft.x=this.previous.screenPosition.x-this.previous.width,this._quad.bottomLeft.y=this.previous.screenPosition.y,this._quad.bottomRight.x=this.previous.screenPosition.x+this.previous.width,this._quad.bottomRight.y=this.previous.screenPosition.y,this._quad}},{key:"getHeading",value:function(){this._heading.x=this.next.worldPosition.x-this.worldPosition.x,this._heading.y=this.next.worldPosition.y-this.worldPosition.y,this._heading.z=this.next.worldPosition.z-this.worldPosition.z,this._heading.w=1;var e=Math.sqrt(this._heading.x*this._heading.x+this._heading.y*this._heading.y+this._heading.z*this._heading.z);return this._heading.x/=e,this._heading.y/=e,this._heading.z/=e,this._heading}}]),t}(h["default"]);i["default"]=p},{"./Point4":51,"./RaceEntity":57,"./RaceSegmentQuad":60}],60:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=function(){function e(t,i,o,r){n(this,e),this.topLeft=t||new PIXI.Point,this.topRight=i||new PIXI.Point,this.bottomLeft=o||new PIXI.Point,this.bottomRight=r||new PIXI.Point}return o(e,[{key:"clone",value:function(){return new e(this.topLeft,this.topRight,this.bottomLeft,this.bottomRight)}}]),e}();i["default"]=r},{}],61:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=function(){function e(t){n(this,e),this.meta=t.meta,this.objects=t.objects,this.track=t.track,this.textures=t.textures}return o(e,[{key:"name",get:function(){return this.meta.name}},{key:"length",get:function(){return this.track.length}}]),e}();i["default"]=r},{}],62:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:830,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:136;n(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r._segmentWidth=e,r._segmentHeight=i,r.drawDistance=14,r}return r(t,e),a(t,[{key:"updateRoadEntity",value:function(e){if(e.renderToWorld){if(e.zDepth>this.drawDistance)return void(e.view.visible=!1);e.view.x=e.screenPosition.x,e.view.y=e.screenPosition.y;var t=1/e.zDepth;e.view.scale.x=t*e.scale.x,e.view.scale.y=t*e.scale.y,e.view.visible=(e.view.scale.x*(1/e.scale.x)>0&&e.view.scale.y*(1/e.scale.y))>0;var i=(this.drawDistance-e.zDepth)/(.05*this.drawDistance);e.view.alpha=Math.max(0,Math.min(1,i))*e.alpha}}},{key:"updateRoadSegment",value:function(e,t){if(e.zDepth<.7||e.zDepth>this.drawDistance)return void(e.view.visible=!1);if(t){var i=e.getHeading(),n=i.x*t.x+i.y*t.y+i.z*t.z;if(n<.1)return void(e.view.visible=!1)}var o=e.getQuad();e.view.x=o.topLeft.x,e.view.y=o.topLeft.y;var r=(o.topRight.x-o.topLeft.x)/this._segmentWidth,a=(o.bottomLeft.y-o.topLeft.y)/this._segmentHeight;e.view.scale.x=2*r,e.view.scale.y=2*a;var s=(this.drawDistance-e.zDepth)/(.05*this.drawDistance);e.view.alpha=Math.max(0,Math.min(1,s)),e.view.visible=!0;var l=(o.topLeft.x-o.bottomLeft.x)/200,u=-(o.topRight.x-o.bottomRight.x)/200,c=1/r;l*=c,u*=c,e.view.x+.5*e.view.texture.width*e.view.scale.x>0?(e.view.left.scale.x=Math.max(0,l),e.view.left.scale.y=l/Math.abs(l),e.view.right.scale.x=Math.abs(u),e.view.right.scale.y=u/Math.abs(u)):e.view.x+.5*e.view.texture.width*e.view.scale.x<0&&(e.view.left.scale.x=Math.abs(l),e.view.left.scale.y=l/Math.abs(l),e.view.right.scale.x=Math.max(0,u),e.view.right.scale.y=u/Math.abs(u)),e.view.grassLeft.x=e.view.left.x,e.view.grassRight.x=e.view.right.x,s=1-(this.drawDistance-e.zDepth)/(1.04*this.drawDistance),e.view.grassLeft.scale.x=24*s,e.view.grassRight.scale.x=24*s}},{key:"segmentWidth",get:function(){return this._segmentWidth}},{key:"segmentHeight",get:function(){return this._segmentHeight}}]),t}(PIXI.Container);i["default"]=s},{}],63:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function _(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:_(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("../Common"),c=n(u),h=function(e){function t(){o(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.loaded=0,e._bar=null,e._text=null,e._logo=null,e}return a(t,e),s(t,[{key:"init",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this);var e=c["default"].assets,i=new PIXI.Graphics;i.clear(),i.beginFill(8859527),i.drawRect(0,0,c["default"].STAGE_WIDTH,c["default"].STAGE_HEIGHT),i.endFill(),this.addChild(i);var n=new PIXI.Container;n.x=.5*c["default"].STAGE_WIDTH,n.y=.5*c["default"].STAGE_HEIGHT+80,this.addChild(n);for(var o=[],r=1;r<10;++r)o.push(e.getTexture("loader_animation000"+r));o.push(e.getTexture("loader_animation0010"));var a=new p3.MovieClipSequence;a.addTextures(o),this._logo=new p3.MovieClip(a),this._logo.x=50,this._logo.y=20,this._logo.anchor=new PIXI.Point(.5,1),this._logo.animationSpeed=.25,this._logo.looping=!1,n.addChild(this._logo),this._bar=new PIXI.Sprite(e.getTexture("preloader_bg")),this._bar.y=34,this._bar.anchor=new PIXI.Point(.5,.5),n.addChild(this._bar),this._bar.fill=new PIXI.Sprite(e.getTexture("preloader_bar")),this._bar.fill.anchor=new PIXI.Point(.5,.5),this._bar.addChild(this._bar.fill),this._bar.fill.mask=new PIXI.Graphics,this._bar.fill.mask.x=.5*-this._bar.fill.texture.width,this._bar.fill.mask.scale.x=0,this._bar.fill.mask.beginFill(16711680),this._bar.fill.mask.drawRect(0,.5*-this._bar.fill.texture.height,this._bar.fill.texture.width,this._bar.fill.texture.height),this._bar.fill.addChild(this._bar.fill.mask),this._bar.frame=new PIXI.Sprite(e.getTexture("preloader_overlay")),this._bar.frame.anchor=new PIXI.Point(.5,.5),this._bar.addChild(this._bar.frame),this._text=new PIXI.Text("0%",{fontSize:"32px",fontFamily:"Arial",fill:"#FFFFFF",align:"center"}),this._text.y=this._bar.y+60,this._text.pivot.x=.5*this._text.width,this._text.pivot.y=.5*this._text.height,n.addChild(this._text);var s=new PIXI.Text("",{fontSize:"1px",fontFamily:"Noto Kufi Arabic"});s.visible=!1,this.addChild(s)}},{key:"appear",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"appear",this).call(this),this._logo.play()}},{key:"resize",value:function(){this.x=.5*(p3.View.width-c["default"].STAGE_WIDTH)}},{key:"update",value:function(){var e=Math.min(1,this.loaded);this._bar.fill.mask.scale.x+=.4*(e-this._bar.fill.mask.scale.x),this._text.text=""+Math.round(100*e)+"%",this._text.pivot.x=.5*this._text.width}}]),t}(p3.Scene);i["default"]=h},{"../Common":7}],64:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function _(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:_(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("../Common"),c=n(u),h=function(e){function t(){o(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._raceButton=null,e._homeButton=null,e._muteButton=null,e._nextButton=null,e._previousButton=null,e._index=c["default"].playerDriverId,e._nameplate=null,e._vehicle=null,e._driver=null,e._sidekick=null,e}return a(t,e),s(t,[{key:"init",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this);var e=c["default"].assets,i=new PIXI.Sprite(e.getTexture("ui_char_bg"));this.addChild(i);var n=new PIXI.Container;n.x=.5*c["default"].STAGE_WIDTH-100,n.y=480,this.addChild(n),this._vehicle=new PIXI.Sprite(PIXI.Texture.EMPTY),this._vehicle.x=.5*c["default"].STAGE_WIDTH-100,this._vehicle.y=480,this._vehicle.anchor=new PIXI.Point(.5,.5),n.addChild(this._vehicle),this._vehicle.shadow=new PIXI.Sprite(PIXI.Texture.EMPTY),this._vehicle.shadow.anchor=new PIXI.Point(.5,.5),this._vehicle.shadow.blendMode=PIXI.BLEND_MODES.MULTIPLY,n.addChildAt(this._vehicle.shadow,this._vehicle.parent.getChildIndex(this._vehicle)),n=new PIXI.Container,n.y=p3.View.height,this.addChild(n),this._sidekick=new PIXI.Sprite(PIXI.Texture.EMPTY),this._sidekick.anchor=new PIXI.Point(.5,1),n.addChild(this._sidekick),this._driver=new PIXI.Sprite(PIXI.Texture.EMPTY),this._driver.anchor=new PIXI.Point(.5,1),n.addChild(this._driver),this._nameplate=new PIXI.Sprite(e.getTexture("ui_char_name_bg")),this._nameplate.x=.5*c["default"].STAGE_WIDTH-80,this._nameplate.y=140,this._nameplate.anchor=new PIXI.Point(.5,.5),this.addChild(this._nameplate),"ar"===language?(this._nameplate.first=new PIXI.Text("",{fontSize:"36px",fontFamily:"Noto Kufi Arabic",fill:16777215,align:"center",padding:6}),this._nameplate.first.y=3,this._nameplate.first.pivot.x=160,this._nameplate.first.pivot.y=Math.round(.8*this._nameplate.first.height),this._nameplate.addChild(this._nameplate.first)):(this._nameplate.first=new PIXI.BitmapText("",font(32,"center")),this._nameplate.first.y=6,this._nameplate.first.pivot.x=240,this._nameplate.first.pivot.y=Math.round(.8*this._nameplate.first.textHeight),this._nameplate.addChild(this._nameplate.first)),"ar"===language?(this._nameplate.second=new PIXI.Text("",{fontSize:"36px",fontFamily:"Noto Kufi Arabic",fill:16777215,align:"center",padding:6}),this._nameplate.second.y=3,this._nameplate.second.pivot.x=120,this._nameplate.addChild(this._nameplate.second)):(this._nameplate.second=new PIXI.BitmapText("",font(32,"center")),this._nameplate.second.y=6,this._nameplate.second.pivot.x=160,this._nameplate.addChild(this._nameplate.second));var o=new p3.ButtonStates;o.normal=e.getTexture("ui_btn_big_out"),o.over=e.getTexture("ui_btn_big_over"),o.down=e.getTexture("ui_btn_big_down"),o.icon=e.getTexture("ui_icon_play"),this._raceButton=new p3.Button(o),this._raceButton.visible=!1,this._raceButton.interactive=!1,this._raceButton.overSoundName="sfx_btn_rollover_00",this._raceButton.clickSoundName="sfx_btn_press_00",this._raceButton.signals.click.add(this.onRaceButtonClick,this),this.addChild(this._raceButton),o=new p3.ButtonStates,o.normal=e.getTexture("ui_btn_out"),o.over=e.getTexture("ui_btn_over"),o.down=e.getTexture("ui_btn_down"),o.icon=e.getTexture("ui_icon_home"),this._homeButton=new p3.Button(o),this._homeButton.visible=!1,this._homeButton.interactive=!1,this._homeButton.overSoundName="sfx_btn_rollover_00",this._homeButton.clickSoundName="sfx_btn_press_00",this._homeButton.signals.click.add(this.onHomeButtonClick,this),this.addChild(this._homeButton),o=new p3.ButtonStates,o.normal=e.getTexture("ui_btn_out"),o.over=e.getTexture("ui_btn_over"),o.down=e.getTexture("ui_btn_down"),o.icon=e.getTexture("ui_icon_sound_on"),o.iconAlt=e.getTexture("ui_icon_sound_off"),this._muteButton=new p3.MuteButton(o),this._muteButton.visible=!1,this._muteButton.interactive=!1,this._muteButton.overSoundName="sfx_btn_rollover_00",this._muteButton.clickSoundName="sfx_btn_press_00",this.addChild(this._muteButton),o=new p3.ButtonStates,o.normal=e.getTexture("ui_btn_arrow_r"),this._nextButton=new p3.Button(o),this._nextButton.visible=!1,this._nextButton.interactive=!1,this._nextButton.overSoundName="sfx_btn_rollover_00",this._nextButton.clickSoundName="sfx_btn_press_00",this._nextButton.signals.click.add(this.onNextButtonClick,this),this.addChild(this._nextButton),o=new p3.ButtonStates,o.normal=e.getTexture("ui_btn_arrow_l"),this._previousButton=new p3.Button(o),this._previousButton.visible=!1,this._previousButton.interactive=!1,this._previousButton.overSoundName="sfx_btn_rollover_00",this._previousButton.clickSoundName="sfx_btn_press_00",this._previousButton.signals.click.add(this.onPreviousButtonClick,this),this.addChild(this._previousButton),this.showCharacter(this._index)}},{key:"destroy",value:function(){var e=c["default"].input;e.signals.swipeLeft.remove(this.onSwipeLeft,this),e.signals.swipeRight.remove(this.onSwipeRight,this),TweenMax.killTweensOf(this._driver.scale),TweenMax.killTweensOf(this._sidekick.scale),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"appear",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"appear",this).call(this);var e=c["default"].input;e.signals.swipeLeft.add(this.onSwipeLeft,this),e.signals.swipeRight.add(this.onSwipeRight,this),c["default"].audio.playMusic("music_garage_loop_00"),c["default"].audio.playSound("sfx_muttly_giggle_00")}},{key:"animateIn",value:function(e,t){this._homeButton.scale=new PIXI.Point,TweenMax.to(this._homeButton.scale,.4,{delay:.1,x:1,y:1,ease:Back.easeOut,easeParams:[2],onStart:function(){this._homeButton.visible=!0},onStartScope:this,onComplete:function(){this._homeButton.interactive=!0},onCompleteScope:this}),this._muteButton.scale=new PIXI.Point,TweenMax.to(this._muteButton.scale,.4,{delay:.16,x:1,y:1,ease:Back.easeOut,easeParams:[2],onStart:function(){this._muteButton.visible=!0},onStartScope:this,onComplete:function(){this._muteButton.interactive=!0},onCompleteScope:this}),this._previousButton.scale=new PIXI.Point,TweenMax.to(this._previousButton.scale,.4,{delay:.22,x:1,y:1,ease:Back.easeOut,easeParams:[3],onStart:function(){this._previousButton.visible=!0},onStartScope:this,onComplete:function(){this._previousButton.interactive=!0},onCompleteScope:this}),this._nextButton.scale=new PIXI.Point,TweenMax.to(this._nextButton.scale,.4,{delay:.22,x:1,y:1,ease:Back.easeOut,easeParams:[3],onStart:function(){this._nextButton.visible=!0},onStartScope:this,onComplete:function(){this._nextButton.interactive=!0},onCompleteScope:this}),this._raceButton.scale=new PIXI.Point,TweenMax.to(this._raceButton.scale,.4,{delay:.1+.24,x:1,y:1,ease:Back.easeOut,easeParams:[4],onStart:function(){this._raceButton.visible=!0},onStartScope:this,onComplete:function(){this._raceButton.interactive=!0},onCompleteScope:this})}},{key:"resize",value:function(){this.x=.5*(p3.View.width-c["default"].STAGE_WIDTH),this._driver.parent.x=.5*c["default"].STAGE_WIDTH+.24*p3.View.width,this._raceButton.x=.5*c["default"].STAGE_WIDTH,this._raceButton.y=p3.View.height-120,this._homeButton.x=.5*(c["default"].STAGE_WIDTH-p3.View.width)+100,this._homeButton.y=100,this._muteButton.x=.5*(c["default"].STAGE_WIDTH+p3.View.width)-100,this._muteButton.y=100,this._nextButton.x=.5*(c["default"].STAGE_WIDTH+p3.View.width)-100,this._nextButton.y=.5*c["default"].STAGE_HEIGHT,this._previousButton.x=.5*(c["default"].STAGE_WIDTH-p3.View.width)+100,this._previousButton.y=.5*c["default"].STAGE_HEIGHT}},{key:"update",value:function(){var e=c["default"].input;e.isKeyPressed(37)&&this.onPreviousButtonClick(null),e.isKeyPressed(39)&&this.onNextButtonClick(null),e.isKeyPressed(32)&&this.onRaceButtonClick(null)}},{key:"showCharacter",value:function(e){var t=c["default"].assets,i=c["default"].config.characters[e];this._nameplate.first.text=translate(i.names.first),this._nameplate.second.text=translate(i.names.second),this._driver.texture=t.getTexture(i.driver.texture),this._driver.x=i.driver.offset.x,this._driver.y=i.driver.offset.y,i.sidekick?(this._sidekick.texture=t.getTexture(i.sidekick.texture),this._sidekick.x=i.sidekick.offset.x,this._sidekick.y=i.sidekick.offset.y):this._sidekick.texture=PIXI.Texture.EMPTY,this._vehicle.texture=t.getTexture(i.vehicle.texture),this._vehicle.x=i.vehicle.offset.x,this._vehicle.y=i.vehicle.offset.y,this._vehicle.shadow.texture=t.getTexture(i.vehicle.shadow.texture),this._vehicle.shadow.x=this._vehicle.x+i.vehicle.shadow.offset.x,this._vehicle.shadow.y=this._vehicle.y+i.vehicle.shadow.offset.y,this._vehicle.alpha=0,TweenMax.killTweensOf(this._vehicle),TweenMax.to(this._vehicle,.32,{alpha:1,ease:Power1.easeInOut,onStart:function(){c["default"].audio.playSound("sfx_btn_nextcar_00")}});var n=new TimelineMax,o=this._vehicle.y;this._vehicle.y=this._vehicle.y-160,n.append(TweenMax.to(this._vehicle,.4,{y:o,ease:Power2.easeIn,onComplete:function(){TweenMax.killTweensOf(this._vehicle.scale),TweenMax.to(this._vehicle.scale,.12,{delay:.01,y:.96,ease:Power1.easeInOut,yoyo:!0,repeat:1}),c["default"].audio.playSound("sfx_car_land_00")},onCompleteScope:this})),n.append(TweenMax.to(this._vehicle,.1,{y:o-18,ease:Power1.easeOut})),n.append(TweenMax.to(this._vehicle,.08,{y:o,ease:Power1.easeIn})),this._vehicle.shadow.alpha=0,TweenMax.killTweensOf(this._vehicle.shadow),TweenMax.to(this._vehicle.shadow,.4,{delay:.04,alpha:1,ease:Power1.easeInOut}),o=this._driver.x,this._driver.x=this._driver.x+800,TweenMax.killTweensOf(this._driver),TweenMax.to(this._driver,.4,{delay:.3,x:o,ease:Back.easeOut,easeParams:[1]}),this._driver.alpha=0,TweenMax.to(this._driver,.2,{delay:.3,alpha:1,ease:Power1.easeInOut}),this._driver.rotation=.14,TweenMax.to(this._driver,.8,{delay:.46,rotation:0,ease:Elastic.easeOut,easeParams:[1]}),this._driver.scale=new PIXI.Point(1,1),TweenMax.killTweensOf(this._driver.scale),TweenMax.to(this._driver.scale,1,{y:.96,ease:Power1.easeInOut,yoyo:!0,repeat:-1}),TweenMax.to(this._driver.scale,1.1,{y:.98,ease:Power1.easeInOut,yoyo:!0,repeat:-1}),o=this._sidekick.x,this._sidekick.x=this._sidekick.x+800,TweenMax.killTweensOf(this._sidekick),TweenMax.to(this._sidekick,.4,{delay:.5,x:o,ease:Back.easeOut,easeParams:[1]}),this._sidekick.alpha=0,TweenMax.to(this._sidekick,.2,{delay:.5,alpha:1,ease:Power1.easeInOut}),this._sidekick.rotation=.14,TweenMax.to(this._sidekick,.8,{delay:.66,rotation:0,ease:Elastic.easeOut,easeParams:[1]}),this._sidekick.scale=new PIXI.Point(1,1),TweenMax.killTweensOf(this._sidekick.scale),TweenMax.to(this._sidekick.scale,1,{delay:.2,y:.96,ease:Power1.easeInOut,yoyo:!0,repeat:-1}),TweenMax.to(this._sidekick.scale,1.1,{delay:.2,y:.98,ease:Power1.easeInOut,yoyo:!0,repeat:-1}),this._nameplate.scale=new PIXI.Point(0,0),TweenMax.killTweensOf(this._nameplate.scale),TweenMax.to(this._nameplate.scale,.34,{delay:.24,x:1,y:1,ease:Back.easeOut,easeParams:[2]})}},{key:"onNextButtonClick",value:function(e){++this._index>=c["default"].config.characters.length&&(this._index=0),this.showCharacter(this._index)}},{key:"onPreviousButtonClick",value:function(e){--this._index<0&&(this._index=c["default"].config.characters.length-1),this.showCharacter(this._index)}},{key:"onRaceButtonClick",value:function(e){this._homeButton.interactive=!1,this._raceButton.interactive=!1;var t=c["default"].config.characters[this._index].id;this.signals.next.dispatch(this,t),c["default"].audio.playSound("sfx_carsrush_by_00")}},{key:"onHomeButtonClick",value:function(e){this._homeButton.interactive=!1,this._raceButton.interactive=!1,this.signals.home.dispatch(this),c["default"].audio.playSound("sfx_whistle_fall_00")}},{key:"onSwipeLeft",value:function(){this.onPreviousButtonClick(null)}},{key:"onSwipeRight",value:function(){this.onNextButtonClick(null)}}]),t}(p3.Scene);i["default"]=h},{"../Common":7}],65:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");
}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function _(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:_(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("../Common"),c=n(u),h=function(e){function t(){o(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._panel=null,e._yesButton=null,e._noButton=null,e}return a(t,e),s(t,[{key:"init",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this);var e=c["default"].assets;this._panel=new PIXI.Sprite(e.getTexture("ui_info_sign")),this._panel.x=.5*c["default"].STAGE_WIDTH,this._panel.y=c["default"].STAGE_HEIGHT,this._panel.anchor=new PIXI.Point(.5,1),this._panel.visible=!1,this.addChild(this._panel),"ar"===language?(this._panel.label=new PIXI.Text(translate("confirm_title"),{fontSize:"32px",fontFamily:"Noto Kufi Arabic",fill:4525121,align:"center",padding:6}),this._panel.label.x=8,this._panel.label.y=-375,this._panel.label.rotation=-.024,this._panel.label.pivot.x=.5*this._panel.label.width,this._panel.label.pivot.y=.5*this._panel.label.height,this._panel.addChild(this._panel.label)):(this._panel.label=new PIXI.BitmapText(translate("confirm_title"),font(34,"center")),this._panel.label.x=8,this._panel.label.y=-375,this._panel.label.rotation=-.024,this._panel.label.pivot.x=.5*this._panel.label.textWidth,this._panel.label.pivot.y=.5*this._panel.label.textHeight,this._panel.label.tint=4525121,this._panel.addChild(this._panel.label));var i=new p3.ButtonStates;i.normal=e.getTexture("ui_btn_big_out"),i.over=e.getTexture("ui_btn_big_over"),i.down=e.getTexture("ui_btn_big_down"),i.icon=e.getTexture("ui_icon_tick"),this._yesButton=new p3.Button(i),this._yesButton.x=.5*c["default"].STAGE_WIDTH+10+130,this._yesButton.y=.5*c["default"].STAGE_HEIGHT+220,this._yesButton.visible=!1,this._yesButton.interactive=!1,this._yesButton.overSoundName="sfx_btn_rollover_00",this._yesButton.clickSoundName="sfx_btn_press_00",this._yesButton.signals.click.add(this.onYesButtonClick,this),this.addChild(this._yesButton),i=new p3.ButtonStates,i.normal=e.getTexture("ui_btn_big_out"),i.over=e.getTexture("ui_btn_big_over"),i.down=e.getTexture("ui_btn_big_down"),i.icon=e.getTexture("ui_icon_cross"),this._noButton=new p3.Button(i),this._noButton.x=.5*c["default"].STAGE_WIDTH+10-130,this._noButton.y=.5*c["default"].STAGE_HEIGHT+220,this._noButton.visible=!1,this._noButton.interactive=!1,this._noButton.overSoundName="sfx_btn_rollover_00",this._noButton.clickSoundName="sfx_btn_press_00",this._noButton.signals.click.add(this.onNoButtonClick,this),this.addChild(this._noButton)}},{key:"appear",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"appear",this).call(this)}},{key:"animateIn",value:function(e,t){var i=this._panel.y;this._panel.y=this._panel.y+40,TweenMax.to(this._panel,.34,{y:i,ease:Power1.easeInOut,onStart:function(){this._panel.visible=!0},onStartScope:this}),this._panel.scale.y=0,TweenMax.to(this._panel.scale,.34,{y:1,ease:Back.easeInOut,easeParams:[2]}),this._noButton.scale=new PIXI.Point,TweenMax.to(this._noButton.scale,.4,{delay:.2,x:1,y:1,ease:Back.easeOut,easeParams:[4],onStart:function(){this._noButton.visible=!0},onStartScope:this,onComplete:function(){this._noButton.interactive=!0},onCompleteScope:this}),this._yesButton.scale=new PIXI.Point,TweenMax.to(this._yesButton.scale,.4,{delay:.26,x:1,y:1,ease:Back.easeOut,easeParams:[4],onStart:function(){this._yesButton.visible=!0},onStartScope:this,onComplete:function(){this._yesButton.interactive=!0},onCompleteScope:this})}},{key:"animateOut",value:function(e,t){var i=new TimelineMax({onComplete:e,onCompleteScope:t});i.insert(TweenMax.to(this._panel,.34,{y:this._panel.y+40,ease:Power1.easeInOut})),i.insert(TweenMax.to(this._panel.scale,.34,{y:0,ease:Back.easeInOut,easeParams:[1],onComplete:function(){this._panel.visible=!1},onCompleteScope:this})),this._yesButton.interactive=!1,i.insert(TweenMax.to(this._yesButton.scale,.24,{x:0,y:0,ease:Back.easeIn,easeParams:[1],onComplete:function(){this._yesButton.visible=!1},onCompleteScope:this})),this._noButton.interactive=!1,i.insert(TweenMax.to(this._noButton.scale,.24,{x:0,y:0,ease:Back.easeIn,easeParams:[1],onComplete:function(){this._noButton.visible=!1},onCompleteScope:this}))}},{key:"resize",value:function(){this.x=.5*(p3.View.width-c["default"].STAGE_WIDTH)}},{key:"update",value:function(){}},{key:"onYesButtonClick",value:function(e){this.signals.next.dispatch(this)}},{key:"onNoButtonClick",value:function(e){this.animateOut(function(){this.signals.previous.dispatch(this)},this)}}]),t}(p3.Scene);i["default"]=h},{"../Common":7}],66:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function Oe(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:Oe(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("../AI"),c=n(u),h=e("../AudioParams"),_=n(h),f=e("../Common"),p=n(f),d=e("../Hud"),y=n(d),v=e("../Player"),w=n(v),b=e("../Pickup"),g=n(b),m=e("../PickupSelector"),x=n(m),P=e("../powerups/Powerup"),k=(n(P),e("../Skybox")),O=n(k),I=e("../cars/DoomBuggyView"),T=n(I),S=e("../cars/PussycatView"),C=n(S),j=e("../cars/MeanMachineView"),M=n(j),B=e("../cars/IQView"),E=n(B),X=e("../cars/TurboView"),D=n(X),A=e("../powerups/BombPowerup"),R=n(A),F=e("../powerups/BoostPowerup"),L=(n(F),e("../powerups/BubblesPowerup")),H=n(L),G=e("../powerups/ButterfliesPowerup"),W=n(G),N=e("../powerups/CandyPowerup"),V=n(N),z=e("../powerups/FlamePowerup"),q=n(z),K=e("../powerups/GluePowerup"),Y=n(K),U=e("../powerups/LightningPowerup"),J=n(U),Q=e("../powerups/MissilePowerup"),Z=n(Q),$=e("../powerups/SmartMissilePowerup"),ee=n($),te=e("../powerups/SteamPowerup"),ie=n(te),ne=e("../powerups/TacsPowerup"),oe=n(ne),re=e("../race/RaceCar"),ae=(n(re),e("../race/RaceEngine")),se=n(ae),le=e("../race/RaceEntity"),ue=n(le),ce=e("../race/RaceTrack"),he=n(ce),_e=e("../race/RaceView"),fe=n(_e),pe=e("../tutorials/TutorialControls"),de=n(pe),ye=e("../tutorials/TutorialLadder"),ve=n(ye),we=e("../tutorials/TutorialLaps"),be=n(we),ge=e("../tutorials/TutorialPowerups"),me=n(ge),xe=e("ismobilejs"),Pe=n(xe),ke=function(e){function t(e,i){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._engine=null,n._hud=null,n._time=0,n._totalLaps=2,n._racing=!1,n._player=null,n._skybox=null,n._offroad=!1,n._pauseImage=null,n._overlay=null,n._gameover=!1,n._cars=[],n._ai=[],n._pickups=[],n._missilePowerups=[],n._aoePowerups=[],n._bombPowerups=[],n._boostPowerups=[],n._ambientSFX=null,n._balanceTime=window.performance.now(),n._balanceDelayMin=4,n._balanceDelayMax=8,n._balanceDelay=p3.Utils.randomRange(n._balanceDelayMax,n._balanceDelayMin),n._tutorial=null,n._tutorialRatios=[0,.06,.12,.172],n._tutorialIndex=0,n._tutorialPause=!1,n._isTutorial=e,n._isReplay=i,n._isRacing=!1,n._startingRevSFX=null,n}return a(t,e),s(t,[{key:"init",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this),p["default"].game=this;var e=p["default"].assets,i=["track01","track02","track03","track04","track05"],n=this._isTutorial?"track01":this._isReplay&&p["default"].previousTrackName?p["default"].previousTrackName:i[Math.floor(Math.random()*i.length)];console.log("track -",n);var o=e.getJSON(n),r=new he["default"](o),a=new fe["default"](1280);a.x=.5*p["default"].STAGE_WIDTH,a.drawDistance=Pe["default"]?16:8,this.addChild(a),se["default"].getTexture=function(t){return e.getTexture(t)},this._engine=new se["default"](r,a),this._engine.init(),p["default"].engine=this._engine,this._engine.camera.vanishingPoint=new PIXI.Point(0,p["default"].STAGE_HEIGHT-350),this._hud=new y["default"],this.addChild(this._hud),this._hud.pauseButton.signals.click.add(this.onPauseButtonClick,this),this._player=new w["default"](p["default"].playerDriverId,t.getRaceCarView(p["default"].playerDriverId)),this._player.view.y=.5*p["default"].STAGE_HEIGHT+246,this._player.offset.y=-54,this._player.zDepthOffset=1,this._player.signals.lap.add(this.onRaceCarLap,this),this._engine.addEntity(this._player,0),this._engine.camera.shakeOffset.x=.5*p["default"].STAGE_WIDTH,this._engine.camera.target=this._player,this._skybox=new O["default"],this.addChildAt(this._skybox,0),this.createAI(),this.placeObjects(),this.start()}},{key:"destroy",value:function(){TweenMax.killAll(),this._pauseImage&&(this._pauseImage.parent.removeChild(this._pauseImage),this._pauseImage.destroy(),this._pauseImage=null),this._player.destroy();for(var e=0;e<this._ai.length;++e){var i=this._ai[e];i.destroy()}this._ai.length=0;for(var n=0;n<this._pickups.length;++n){var o=this._pickups[n];o.destroy()}this._pickups.length=0;for(var r=this._missilePowerups.concat(this._aoePowerups,this._bombPowerups,this._boostPowerups),a=0;a<r.length;++a){var s=r[a];s.destroy()}this._missilePowerups.length=this._bombPowerups.length=this._aoePowerups.length=this._boostPowerups.length=0,this.stopAmbientSFX(),this.stopStartingRevSFX(),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"appear",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"appear",this).call(this),p["default"].isFirstTime&&(p["default"].isFirstTime=!1),p["default"].audio.playSound("sfx_cockerel_cry_00"),p["default"].audio.playMusic(["music_raceloop_00","music_raceloop_01","music_raceloop_02"])}},{key:"show",value:function(){this.resumeGame()}},{key:"hide",value:function(){}},{key:"animateIn",value:function(e,t){}},{key:"animateOut",value:function(e,t){}},{key:"start",value:function(){function e(){this._player.moving=!0,this._isRacing=!0;for(var e=0;e<this._ai.length;++e){var t=this._ai[e];t.moving=!0}this._time=0,this._player.startEngineSFX(),this.stopStartingRevSFX(),p["default"].audio.playSound("sfx_car_start_tyres_04")}this._hud.runCountdown(.8,e,this),this._cars=this._ai.concat([this._player]),console.log(this._cars),this._hud.ladder.signals.change.add(this.onLadderChange,this),this._hud.ladder.init(),this._hud.setLaps(this._player.lap+1,3),this.playAmbientSFX(),this.playStartingRevSFX()}},{key:"end",value:function(){if(!this._gameover){this._gameover=!0,console.log("gameover");var e=this.getRacePos(this._player);this.signals.next.dispatch(this,e)}}},{key:"resize",value:function(){this.x=.5*(p3.View.width-p["default"].STAGE_WIDTH),this._hud.resize(),this._skybox.resize(),this._tutorial&&this._tutorial.resize()}},{key:"update",value:function(){p["default"].paused||(this._updateTutorial(),this._tutorialPause||(this._engine.update(deltaTime),this._hud.update(deltaTime),this._updatePowerups(),this._updateCarsOrder(),this._time+=1e3*deltaTime,this.checkCollisions(),this.checkCollisionsPickups(),this.checkCollisionsMissiles(),this.checkCollisionBombs(),this.checkCollisionAOEs(),this._skybox.update(),this._balanceRace()))}},{key:"resumeGame",value:function(){this._hud.pauseButton.interactive=!0,TweenMax.resumeAll(!0,!0,!0),this._pauseImage&&(this.visible=!0,TweenMax.to(this._pauseImage,.14,{alpha:0,ease:Power1.easeInOut,onComplete:function(){this._pauseImage.parent.removeChild(this._pauseImage),this._pauseImage=null},onCompleteScope:this})),this.resumePowerups(),this.playAmbientSFX(),!this._isRacing&&this.playStartingRevSFX(),this._player.startEngineSFX(),this._player.offroad&&this._player.startOffroadSFX(),!this._isRacing&&this._hud.startingLights.resume()}},{key:"pauseGame",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this._hud.pauseButton.interactive=!1,this._hud.pauseButton.onMouseOut(),TweenMax.pauseAll(!0,!0,!0),e){var t=new PIXI.filters.BlurFilter;t.blur=6,t.quality=3,this.filters=[t],this.filterArea=new PIXI.Rectangle(0,0,p3.View.width,p3.View.height);var i=new PIXI.RenderTexture.create(p3.View.width,p3.View.height,PIXI.SCALE_MODES.DEFAULT,1);p["default"].renderer.render(this,i),this.filters=null,this.filterArea=null,this._pauseImage&&this._pauseImage.parent.removeChild(this._pauseImage),this._pauseImage=new PIXI.Sprite(i),this.parent.addChild(this._pauseImage),this._pauseImage.alpha=0,TweenMax.to(this._pauseImage,.2,{alpha:1,ease:Power1.easeInOut,onComplete:function(){this.visible=!1},onCompleteScope:this})}this.pausePowerups(),this.stopAmbientSFX(),this.stopStartingRevSFX(),this._player.stopEngineSFX(),this._player.stopOffroadSFX(),!this._isRacing&&this._hud.startingLights.pause()}},{key:"createAI",value:function(){var e=[0,1,2,4,3],i=e.indexOf(p["default"].playerDriverId);i!==-1&&e.splice(i,1);for(var n=0;n<e.length;++n){var o=e[n],r=new c["default"](o,t.getRaceCarView(o));r.offset.y=-54,r.zDepthOffset=1,r.signals.lap.add(this.onRaceCarLap,this),this._ai.push(r)}var a=560,s=this._ai.slice(0);this._isTutorial?s.splice(2,0,this._player):s.push(this._player);for(var l=0;l<s.length;++l){var u=s[l];u.offset.x=(l%2?-1:1)*a;var h=this._engine.track.length-2;h-=1.4*l,this._engine.addEntity(u,h)}}},{key:"placeObjects",value:function(){for(var e=p["default"].assets,t=0;t<this._engine.track.objects.length;++t){var i=this._engine.track.objects[t];switch(i.id){case 0:var n=new ue["default"](ue["default"].TYPE_STATIC,new PIXI.Sprite(e.getTexture(i.t)));n.offset.x=i.o.x*p["default"].RACE_ENTITY_SCALE,n.offset.y=240,n.scale.x=6,n.scale.y=6,n.view.anchor=new PIXI.Point(.5,1),this._engine.addEntity(n,i.d,!1);break;case 1:var o=new g["default"];o.offset.x=i.o.x*p["default"].RACE_ENTITY_SCALE,o.offset.y=-120,o.zDepthOffset=1,o.signals.collect.add(this.onPickupCollect,this),o.init(),this._engine.addEntity(o,i.d),this._pickups.push(o)}}}},{key:"checkCollisions",value:function(){for(var e=this.getCars(),t=0;t<e.length;++t){for(var i=e[t],n=!1,o=0;o<e.length;++o){var r=e[o];if(i!==r){var a=i.getDistanceTo(r),s=i.distance,l=s+a,u=this._engine.testCollision(new PIXI.Point(i.offset.x,s),new PIXI.Point(r.offset.x,l),new PIXI.Point(i.collisionWidth,i.collisionLength),new PIXI.Point(r.collisionWidth,r.collisionLength));u&&(i.onCollisionBegin(u,r),r.onCollisionBegin(u,i),n=!0,u.top&&(i.distance=r.distance+(i.collisionLength+r.collisionLength)/this._engine.view.segmentHeight),u.bottom&&(i.distance=r.distance-(i.collisionLength+r.collisionLength)/this._engine.view.segmentHeight),u.left&&(i.offset.x=r.offset.x-.5*(i.collisionWidth+r.collisionWidth)),u.right&&(i.offset.x=r.offset.x+.5*(i.collisionWidth+r.collisionWidth)),i.distance=(i.distance+this._engine.track.length)%this._engine.track.length,u.bottom&&(i.velocity<r.velocity?r.velocity=i.velocity:r.velocity<i.velocity&&(i.velocity=r.velocity)),(u.left||u.right)&&(Math.abs(i.turnVelocity)+Math.abs(r.turnVelocity)>1200?(i.turnVelocity*=-.9,r.turnVelocity*=-.9):(i.turnVelocity=0,r.turnVelocity=0)))}}!n&&i.onCollisionEnd()}}},{key:"checkCollisionsPickups",value:function(){for(var e=this.getCars(),t=0;t<e.length;++t)for(var i=e[t],n=0;n<this._pickups.length;++n){var o=this._pickups[n],r=this._engine.testCollision(new PIXI.Point(i.offset.x,i.distance),new PIXI.Point(o.offset.x,o.distance),new PIXI.Point(i.collisionWidth,i.collisionLength),new PIXI.Point(o.collisionWidth,i.collisionLength));r&&!i.usingPowerup&&o.collect(i)&&(i.usingPowerup=!0)}}},{key:"checkCollisionsMissiles",value:function(){for(var e=this.getCars(),t=0;t<e.length;++t)for(var i=e[t],n=0;n<this._missilePowerups.length;++n){var o=this._missilePowerups[n];if(o.missile.armed){var r=i.getDistanceTo(o.missile),a=i.distance,s=a+r;if(i!==o.missile.owner){var l=this._engine.testCollision(new PIXI.Point(i.offset.x,a),new PIXI.Point(o.missile.offset.x,s),new PIXI.Point(i.collisionWidth,i.collisionLength),new PIXI.Point(o.missile.collisionWidth,o.missile.collisionLength));l&&(o.missile.explode(i),i.takeHit(o.missile.owner.isPlayer||i.isPlayer),(o.missile.owner===this._player||i===this._player)&&this._hud.ladder.usePowerup(o.missile.powerupType,i,!0),i===this._player&&this._engine.camera.applyShake(1,30))}}}}},{key:"checkCollisionBombs",value:function(){for(var e=this.getCars(),t=0;t<e.length;++t)for(var i=e[t],n=0;n<this._bombPowerups.length;++n){var o=this._bombPowerups[n],r=this._engine.testCollision(new PIXI.Point(i.offset.x,i.distance),new PIXI.Point(o.bomb.offset.x,o.bomb.distance),new PIXI.Point(i.collisionWidth,i.collisionLength),new PIXI.Point(o.bomb.collisionWidth,i.collisionLength));r&&o.bomb.armed&&(o.bomb.explode(i),i.takeHit(o.bomb.owner.isPlayer||i.isPlayer),(o.bomb.owner===this._player||i===this._player)&&this._hud.ladder.usePowerup(o.bomb.powerupType,i,!0),i===this._player&&this._engine.camera.applyShake(1,30))}}},{key:"checkCollisionAOEs",value:function(){for(var e=p["default"].game.getCars(),t=0;t<this._aoePowerups.length;++t)for(var i=this._aoePowerups[t],n=0;n<e.length;++n){var o=e[n];if(i.aoe.owner!==o){var r=i.aoe.owner.getDistanceTo(o);!o.debuffed&&Math.abs(r)<=i.aoe.range&&(o.applyDebuff(3,i.aoe.slow,i.aoe.swerve),(i.aoe.owner===this._player||o===this._player)&&this._hud.ladder.usePowerup(i.aoe.powerupType,o,!0),o===this._player&&this._engine.camera.applyShake(3,14))}}}},{key:"playAmbientSFX",value:function(){var e=new _["default"];e.loop=!0,this._ambientSFX=p["default"].audio.playSound(["sfx_generic_race_loop_00","sfx_generic_race_loop_01","sfx_generic_race_loop_02","sfx_ambient_wacky_loop_03"],e)}},{key:"stopAmbientSFX",value:function(){this._ambientSFX&&(this._ambientSFX.stop(),this._ambientSFX=null)}},{key:"playStartingRevSFX",value:function(){var e=new _["default"];e.loop=!0,this._startingRevSFX=p["default"].audio.playSound("sfx_race_start_idle_revs_00",e)}},{key:"stopStartingRevSFX",value:function(){this._startingRevSFX&&(this._startingRevSFX.stop(),this._startingRevSFX=null)}},{key:"resumePowerups",value:function(){for(var e=this._missilePowerups.concat(this._aoePowerups,this._bombPowerups,this._boostPowerups),t=0;t<e.length;++t){var i=e[t];i.resume()}}},{key:"pausePowerups",value:function(){for(var e=this._missilePowerups.concat(this._aoePowerups,this._bombPowerups,this._boostPowerups),t=0;t<e.length;++t){var i=e[t];i.pause()}}},{key:"_updatePowerups",value:function(){for(var e=this._missilePowerups.length-1;e>=0;--e){var t=this._missilePowerups[e];t.destroyNextFrame?this._missilePowerups.splice(e,1):t.update(deltaTime)}for(var i=this._aoePowerups.length-1;i>=0;--i){var n=this._aoePowerups[i];n.destroyNextFrame?this._aoePowerups.splice(i,1):n.update(deltaTime)}for(var o=this._bombPowerups.length-1;o>=0;--o){var r=this._bombPowerups[o];r.destroyNextFrame?this._bombPowerups.splice(o,1):r.update(deltaTime)}for(var a=this._boostPowerups.length-1;a>=0;--a){var s=this._boostPowerups[a];s.destroyNextFrame?this._boostPowerups.splice(a,1):s.update(deltaTime)}}},{key:"_updateCarsOrder",value:function(){this._cars.sort(function(e,t){return t.getTotalDistance()-e.getTotalDistance()})}},{key:"_updateTutorial",value:function(){if(this._isTutorial){var e=p["default"].input;if(e.isKeyPressed(32)&&this._dismissTutorial(),!(1!==this._player.lap||this._tutorialIndex>=this._tutorialRatios.length)){var t=this._tutorialRatios[this._tutorialIndex];if(Math.floor(this._player.distance)/this._engine.track.length>=t){this._tutorialPause=!0,this.pauseGame(!1);var i=void 0;switch(this._tutorialIndex++){case 0:i=new de["default"],i.show(),this.addChild(i);break;case 1:i=new ve["default"],i.show(),this.addChild(i);break;case 2:i=new be["default"],i.show(),this.addChild(i);break;case 3:i=new me["default"],i.show(),this.addChild(i)}i.resize(),delay(this._dismissTutorial,4,this),this._tutorial=i}}}}},{key:"_dismissTutorial",value:function(){this._tutorial&&(this._tutorial.hide(),this._tutorial=null,this._tutorialPause=!1,this.resumeGame())}},{key:"_balanceRace",value:function(){if(!(this.getCars().length<=1)){var e=(window.performance.now()-this._balanceTime)/1e3;if(e>this._balanceDelay){this._balanceTime=window.performance.now();for(var t=0,i=0,n=this.getCars(),o=0;o<n.length;++o)for(var r=n[o],a=0;a<n.length;++a){var s=n[a];r!==s&&(t+=Math.abs(s.getTotalDistance()-r.getTotalDistance()),++i)}var l=Math.max(0,Math.min(1.4,t/i/12));console.log("scalar:",l),t=0,i=0;for(var u=0;u<n.length;++u)for(var c=0;c<n.length;++c){var h=n[c];this._player!==h&&(t+=h.getTotalDistance()-this._player.getTotalDistance(),++i)}var _=t/i;console.log("avgPlayerDist:",_);for(var f=0;f<n.length;++f){var p=n[f],d=this.getRacePos(p),y=void 0;0===d?y=p.isPlayer?-.01:-.026:1===d?y=p.isPlayer?.012:0:2===d?y=p.isPlayer?.026:.02:3===d?y=p.isPlayer?.04:.03:4===d&&(y=p.isPlayer?.054:.04),_>4&&!p.isPlayer&&(y=-.06),p.speedModifer=1+y*l,console.log("place:",f,"modifier:",p.speedModifer)}this._balanceDelay=p3.Utils.randomRange(this._balanceDelayMax,this._balanceDelayMin)}}}},{key:"onPickupCollect",value:function(e,t){var i=t.id===p["default"].playerDriverId,n=new x["default"](i);n.x=e.view.x,n.y=e.view.y,n.visible=i,n.signals.select.add(function(e,i){var n=void 0;switch(i){case 0:n=new R["default"](t),n.type=i,n.activate(),this._bombPowerups.push(n);break;case 1:n=new V["default"](t),n.type=i,n.activate(),this._bombPowerups.push(n);break;case 2:n=new q["default"](t),n.type=i,n.activate(),this._boostPowerups.push(n);break;case 3:n=new Y["default"](t),n.type=i,n.activate(),this._bombPowerups.push(n);break;case 4:n=new J["default"](t),n.type=i,n.activate(),this._boostPowerups.push(n);break;case 5:n=new Z["default"](t),n.type=i,n.activate(),this._missilePowerups.push(n);break;case 6:n=new oe["default"](t),n.type=i,n.activate(),this._bombPowerups.push(n);break;case 7:n=new ee["default"](t),n.type=i,n.activate(),this._missilePowerups.push(n);break;case 8:n=new ie["default"](t),n.type=i,n.activate(),this._boostPowerups.push(n);break;case 9:n=new H["default"](t),n.type=i,n.activate(),this._aoePowerups.push(n);break;case 10:n=new W["default"](t),n.type=i,n.activate(),this._aoePowerups.push(n)}t===this._player&&this._hud.ladder.usePowerup(i,t)},this),this._engine.view.addChild(n);var o=n.y-140;TweenMax.to(n,.4,{y:o,ease:Power1.easeOut,onComplete:function(){n.start()},onCompleteScope:this}),n.scale=new PIXI.Point(.2,.2),TweenMax.to(n.scale,.4,{x:1,y:1,ease:Back.easeOut,easeParams:[2]})}},{key:"onRaceCarLap",value:function(e,t){console.log(e,t),t-1>=this._totalLaps&&e===this._player?this.end():e===this._player&&this._hud.setLaps(Math.max(1,Math.min(this._totalLaps,this._player.lap)),this._totalLaps)}},{key:"onLadderChange",value:function(e,t){e.isPlayer&&(console.log(e,t),p["default"].audio.playSound("sfx_change_race_position_00"))}},{key:"onPauseButtonClick",value:function(e){this.signals.pause.dispatch(this)}},{key:"getCars",value:function(){return this._cars.slice(0)}},{key:"getPickups",value:function(){return this._pickups.slice(0)}},{key:"getRacePos",value:function(e){return this._cars.indexOf(e)}}],[{key:"getRaceCarView",value:function(e){var t=void 0;switch(e){case 0:t=new C["default"];break;case 1:t=new D["default"];break;case 2:t=new M["default"];break;case 3:t=new T["default"];break;case 4:t=new E["default"]}return t}}]),t}(p3.Scene);i["default"]=ke},{"../AI":2,"../AudioParams":6,"../Common":7,"../Hud":8,"../Pickup":11,"../PickupSelector":12,"../Player":13,"../Skybox":16,"../cars/DoomBuggyView":18,"../cars/IQView":19,"../cars/MeanMachineView":20,"../cars/PussycatView":21,"../cars/TurboView":22,"../powerups/BombPowerup":27,"../powerups/BoostPowerup":29,"../powerups/BubblesPowerup":31,"../powerups/ButterfliesPowerup":33,"../powerups/CandyPowerup":35,"../powerups/FlamePowerup":37,"../powerups/GluePowerup":39,"../powerups/LightningPowerup":41,"../powerups/MissilePowerup":43,"../powerups/Powerup":44,"../powerups/SmartMissilePowerup":46,"../powerups/SteamPowerup":48,"../powerups/TacsPowerup":50,"../race/RaceCar":53,"../race/RaceEngine":56,"../race/RaceEntity":57,"../race/RaceTrack":61,"../race/RaceView":62,"../tutorials/TutorialControls":72,"../tutorials/TutorialLadder":73,"../tutorials/TutorialLaps":74,"../tutorials/TutorialPowerups":75,ismobilejs:1}],67:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function p(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("../Common"),c=n(u),h=e("ismobilejs"),_=n(h),f=function(e){function t(){o(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._overlay=null,e._panel=null,e._homeButton=null,e._muteButton=null,e._resumeButton=null,e._replayButton=null,e._images=[],e._index=0,e._pageIndicators=[],e}return a(t,e),s(t,[{key:"init",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this);var e=c["default"].assets;this._panel=new PIXI.Sprite(e.getTexture("ui_help_bg")),this._panel.x=.5*c["default"].STAGE_WIDTH,this._panel.y=c["default"].STAGE_HEIGHT+12,this._panel.anchor=new PIXI.Point(.5,1),this._panel.visible=!1,this.addChild(this._panel),"ar"===language?(this._panel.title=new PIXI.Text(translate("pause_title"),{fontSize:"40px",fontFamily:"Noto Kufi Arabic",fill:16777215,align:"center",padding:6}),this._panel.title.y=-636,this._panel.title.pivot.x=.5*this._panel.title.width,this._panel.title.pivot.y=.5*this._panel.title.height,this._panel.addChild(this._panel.title)):(this._panel.title=new PIXI.BitmapText(translate("pause_title"),font(44,"center")),this._panel.title.y=-636,this._panel.title.pivot.x=.5*this._panel.title.textWidth,this._panel.title.pivot.y=.5*this._panel.title.textHeight,this._panel.addChild(this._panel.title)),this._panel.image=new PIXI.Sprite(PIXI.Texture.EMPTY),this._panel.image.y=.5*-this._panel.height,this._panel.image.anchor=new PIXI.Point(.5,.5),this._panel.addChild(this._panel.image),this._panel.image.mask=new PIXI.Graphics,this._panel.addChild(this._panel.image.mask),this._panel.roll=new PIXI.Sprite(e.getTexture("ui_help_roll")),this._panel.roll.x=6,this._panel.roll.y=-560,this._panel.roll.anchor=new PIXI.Point(.5,.5),this._panel.roll.start=new PIXI.Point(this._panel.roll.x,this._panel.roll.y),this._panel.addChild(this._panel.roll);var i=new p3.ButtonStates;i.normal=e.getTexture("ui_btn_big_out"),i.over=e.getTexture("ui_btn_big_over"),i.down=e.getTexture("ui_btn_big_down"),i.icon=e.getTexture("ui_icon_play"),this._resumeButton=new p3.Button(i),this._resumeButton.visible=!1,this._resumeButton.interactive=!1,this._resumeButton.overSoundName="sfx_btn_rollover_00",this._resumeButton.clickSoundName="sfx_btn_press_00",this._resumeButton.signals.click.add(this.onResumeButtonClick,this),this.addChild(this._resumeButton),i=new p3.ButtonStates,i.normal=e.getTexture("ui_btn_out"),i.over=e.getTexture("ui_btn_over"),i.down=e.getTexture("ui_btn_down"),i.icon=e.getTexture("ui_icon_home"),this._homeButton=new p3.Button(i),this._homeButton.visible=!1,this._homeButton.interactive=!1,this._homeButton.overSoundName="sfx_btn_rollover_00",this._homeButton.clickSoundName="sfx_btn_press_00",this._homeButton.signals.click.add(this.onHomeButtonClick,this),this.addChild(this._homeButton),i=new p3.ButtonStates,i.normal=e.getTexture("ui_btn_out"),i.over=e.getTexture("ui_btn_over"),i.down=e.getTexture("ui_btn_down"),i.icon=e.getTexture("ui_icon_sound_on"),i.iconAlt=e.getTexture("ui_icon_sound_off"),this._muteButton=new p3.MuteButton(i),this._muteButton.visible=!1,this._muteButton.interactive=!1,this._muteButton.overSoundName="sfx_btn_rollover_00",this._muteButton.clickSoundName="sfx_btn_press_00",this.addChild(this._muteButton),i=new p3.ButtonStates,i.normal=e.getTexture("ui_btn_big_out"),i.over=e.getTexture("ui_btn_big_over"),i.down=e.getTexture("ui_btn_big_down"),i.icon=e.getTexture("ui_icon_replay"),this._replayButton=new p3.Button(i),this._replayButton.visible=!1,this._replayButton.interactive=!1,this._replayButton.overSoundName="sfx_btn_rollover_00",this._replayButton.clickSoundName="sfx_btn_press_00",this._replayButton.signals.click.add(this.onReplayButtonClick,this),this.addChild(this._replayButton),i=new p3.ButtonStates,i.normal=e.getTexture("ui_btn_arrow_r"),this._nextButton=new p3.Button(i),this._nextButton.visible=!1,this._nextButton.interactive=!1,this._nextButton.overSoundName="sfx_btn_rollover_00",this._nextButton.clickSoundName="sfx_btn_press_00",this._nextButton.signals.click.add(this.onNextButtonClick,this),this.addChild(this._nextButton),i=new p3.ButtonStates,i.normal=e.getTexture("ui_btn_arrow_l"),this._previousButton=new p3.Button(i),this._previousButton.visible=!1,this._previousButton.interactive=!1,this._previousButton.overSoundName="sfx_btn_rollover_00",this._previousButton.clickSoundName="sfx_btn_press_00",this._previousButton.signals.click.add(this.onPreviousButtonClick,this),this.addChild(this._previousButton),this._images=[{texture:_["default"].any?e.getTexture("ui_help_01_mobile"):e.getTexture("ui_help_01"),text:_["default"].any?translate("pause_info1_mobile"):translate("pause_info1")},{texture:e.getTexture("ui_help_02"),text:translate("pause_info2")},{texture:e.getTexture("ui_help_03"),text:translate("pause_info3")},{texture:e.getTexture("ui_help_04"),text:translate("pause_info4")}];var n=new p3.MovieClipSequence;n.addTextures([e.getTexture("ui_pagination_off"),e.getTexture("ui_pagination_on")]);var o=new PIXI.Container;o.x=.5*c["default"].STAGE_WIDTH,o.y=740,this.addChild(o);for(var r=new PIXI.Point(40,(-8)),a=0;a<this._images.length;++a){var s=new p3.MovieClip(n);s.x=a*r.x-(this._images.length-1)*r.x*.5,
s.y=a%2*r.y,s.anchor=new PIXI.Point(.5,.5),s.visible=!1,o.addChild(s),this._pageIndicators.push(s),a===this._index?s.gotoAndStop(1):s.gotoAndStop(0)}}},{key:"hide",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"hide",this).call(this),this._panel.y=c["default"].STAGE_HEIGHT+12,this._panel.image.texture=PIXI.Texture.EMPTY,this._panel.roll.y=this._panel.roll.start.y,this._panel.roll.scale=new PIXI.Point(1,1),this._panel.roll.visible=!0}},{key:"animateIn",value:function(e,t){var i=this._panel.y;this._panel.y=this._panel.y+40,TweenMax.to(this._panel,.34,{y:i,ease:Power1.easeInOut,onStart:function(){this._panel.visible=!0},onStartScope:this}),this._panel.scale.y=0,TweenMax.to(this._panel.scale,.34,{y:1,ease:Back.easeInOut,easeParams:[2],onComplete:function(){this.showPage(this._index)},onCompleteScope:this}),this._homeButton.scale=new PIXI.Point,TweenMax.to(this._homeButton.scale,.4,{delay:.1,x:1,y:1,ease:Back.easeOut,easeParams:[2],onStart:function(){this._homeButton.visible=!0},onStartScope:this,onComplete:function(){this._homeButton.interactive=!0},onCompleteScope:this}),this._muteButton.scale=new PIXI.Point,TweenMax.to(this._muteButton.scale,.4,{delay:.006,x:1,y:1,ease:Back.easeOut,easeParams:[2],onStart:function(){this._muteButton.visible=!0},onStartScope:this,onComplete:function(){this._muteButton.interactive=!0},onCompleteScope:this}),this._previousButton.scale=new PIXI.Point,TweenMax.to(this._previousButton.scale,.4,{delay:.012,x:1,y:1,ease:Back.easeOut,easeParams:[2],onStart:function(){this._previousButton.visible=!0},onStartScope:this,onComplete:function(){this._previousButton.interactive=!0},onCompleteScope:this}),this._nextButton.scale=new PIXI.Point,TweenMax.to(this._nextButton.scale,.4,{delay:.012,x:1,y:1,ease:Back.easeOut,easeParams:[2],onStart:function(){this._nextButton.visible=!0},onStartScope:this,onComplete:function(){this._nextButton.interactive=!0},onCompleteScope:this}),this._resumeButton.scale=new PIXI.Point,TweenMax.to(this._resumeButton.scale,.4,{delay:.1+.24,x:1,y:1,ease:Back.easeOut,easeParams:[4],onStart:function(){this._resumeButton.visible=!0},onStartScope:this,onComplete:function(){this._resumeButton.interactive=!0},onCompleteScope:this}),this._replayButton.scale=new PIXI.Point,TweenMax.to(this._replayButton.scale,.4,{delay:.1+.24,x:1,y:1,ease:Back.easeOut,easeParams:[4],onStart:function(){this._replayButton.visible=!0},onStartScope:this,onComplete:function(){this._replayButton.interactive=!0},onCompleteScope:this});for(var n=0;n<this._pageIndicators.length;++n){var o=this._pageIndicators[n];o.scale=new PIXI.Point,TweenMax.to(o.scale,.24,{delay:.3+.04*n,x:1,y:1,ease:Back.easeOut,easeParams:[2],onStart:function(e){e.visible=!0},onStartParams:[o],onStartScope:this})}}},{key:"animateOut",value:function(e,t){var i=this,n=new TimelineMax({onComplete:e,onCompleteScope:t});n.insert(TweenMax.to(this._panel,.34,{y:this._panel.y+40,ease:Power1.easeInOut})),n.insert(TweenMax.to(this._panel.scale,.34,{y:0,ease:Back.easeInOut,easeParams:[1],onComplete:function(){this._panel.visible=!1},onCompleteScope:this})),this._homeButton.interactive=!1,n.insert(TweenMax.to(this._homeButton.scale,.24,{x:0,y:0,ease:Back.easeIn,easeParams:[1],onComplete:function(){this._homeButton.visible=!1},onCompleteScope:this})),this._muteButton.interactive=!1,n.insert(TweenMax.to(this._muteButton.scale,.24,{x:0,y:0,ease:Back.easeIn,easeParams:[1],onComplete:function(){this._muteButton.visible=!1},onCompleteScope:this})),this._nextButton.interactive=!1,n.insert(TweenMax.to(this._nextButton.scale,.24,{x:0,y:0,ease:Back.easeIn,easeParams:[1],onComplete:function(){this._nextButton.visible=!1},onCompleteScope:this})),this._previousButton.interactive=!1,n.insert(TweenMax.to(this._previousButton.scale,.24,{x:0,y:0,ease:Back.easeIn,easeParams:[1],onComplete:function(){this._previousButton.visible=!1},onCompleteScope:this})),this._resumeButton.interactive=!1,n.insert(TweenMax.to(this._resumeButton.scale,.24,{x:0,y:0,ease:Back.easeIn,easeParams:[1],onComplete:function(){this._resumeButton.visible=!1},onCompleteScope:this})),this._replayButton.interactive=!1,n.insert(TweenMax.to(this._replayButton.scale,.24,{x:0,y:0,ease:Back.easeIn,easeParams:[1],onComplete:function(){this._replayButton.visible=!1},onCompleteScope:this}));for(var o=function(e){var t=i._pageIndicators[e];n.insert(TweenMax.to(t.scale,.14,{x:0,y:0,ease:Back.easeIn,easeParams:[1],onComplete:function(){t.visible=!1},onCompleteScope:i}))},r=0;r<this._pageIndicators.length;++r)o(r)}},{key:"resize",value:function(){this.x=.5*(p3.View.width-c["default"].STAGE_WIDTH),this._homeButton.x=.5*(c["default"].STAGE_WIDTH-p3.View.width)+100,this._homeButton.y=100,this._muteButton.x=.5*(c["default"].STAGE_WIDTH+p3.View.width)-100,this._muteButton.y=100,this._nextButton.x=.5*(c["default"].STAGE_WIDTH+p3.View.width)-100,this._nextButton.y=.5*c["default"].STAGE_HEIGHT,this._previousButton.x=.5*(c["default"].STAGE_WIDTH-p3.View.width)+100,this._previousButton.y=.5*c["default"].STAGE_HEIGHT,this._resumeButton.x=.5*(c["default"].STAGE_WIDTH+p3.View.width)-120,this._resumeButton.y=p3.View.height-120,this._replayButton.x=.5*(c["default"].STAGE_WIDTH-p3.View.width)+120,this._replayButton.y=p3.View.height-120}},{key:"update",value:function(){var e=c["default"].input;e.isKeyPressed(32)&&this.onResumeButtonClick(null)}},{key:"showPage",value:function(e){var t=this._images[e];this._panel.image.texture=t.texture,this._panel.roll.y=this._panel.roll.start.y,TweenMax.killTweensOf(this._panel.roll),TweenMax.to(this._panel.roll,.4,{y:this._panel.roll.y+354,ease:Power2.easeInOut,onStart:function(){this._panel.roll.visible=!0},onStartScope:this}),this._panel.roll.scale=new PIXI.Point(1,1),TweenMax.killTweensOf(this._panel.roll.scale),TweenMax.to(this._panel.roll.scale,.4,{x:.93,y:.1,ease:Power2.easeInOut,onComplete:function(){this._panel.roll.visible=!1},onCompleteScope:this});var i=this._panel.image.texture.width,n=this._panel.image.texture.height;this._panel.image.mask.clear(),this._panel.image.mask.beginFill(16711680),this._panel.image.mask.drawRect(.5*-i,.5*-n,i,n),this._panel.image.mask.endFill(),this._panel.image.mask.y=this._panel.roll.y-.5*n,TweenMax.killTweensOf(this._panel.image.mask),TweenMax.to(this._panel.image.mask,.418,{y:this._panel.image.mask.y+370,ease:Power2.easeInOut});for(var o=0;o<this._pageIndicators.length;++o){var r=this._pageIndicators[o];o===e?r.gotoAndStop(1):r.gotoAndStop(0)}c["default"].audio.playSound("ui_tracks_poster_reveal_00")}},{key:"onNextButtonClick",value:function(e){++this._index>=this._images.length&&(this._index=0),this.showPage(this._index)}},{key:"onPreviousButtonClick",value:function(e){--this._index<0&&(this._index=this._images.length-1),this.showPage(this._index)}},{key:"onHomeButtonClick",value:function(e){this.animateOut(function(){this.signals.home.dispatch(this)},this),c["default"].audio.playSound("sfx_whistle_fall_00")}},{key:"onResumeButtonClick",value:function(e){this.animateOut(function(){this.signals.next.dispatch(this)},this),c["default"].audio.playSound("sfx_whistle_rise_00")}},{key:"onReplayButtonClick",value:function(e){this.animateOut(function(){this.signals.previous.dispatch(this)},this),c["default"].audio.playSound("sfx_whistle_fall_00")}}]),t}(p3.Scene);i["default"]=f},{"../Common":7,ismobilejs:1}],68:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function p(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("../AudioParams"),c=n(u),h=e("../Common"),_=n(h),f=function(e){function t(e,i){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._id=e||0,n._place=i||0,n._nextButton=null,n._replayButton=null,n._homeButton=null,n._muteButton=null,n._shine1=null,n._shine2=null,n._sign=null,n._badge=null,n._trophy=null,n._emitter=null,n._outroSFX=null,n}return a(t,e),s(t,[{key:"init",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this);var e=_["default"].assets,i=new PIXI.Sprite(_["default"].blankTexture);i.width=_["default"].STAGE_WIDTH,i.height=_["default"].STAGE_HEIGHT,this.addChild(i),this._shine2=new PIXI.Sprite(e.getTexture("ui_result_shine_2")),this._shine2.x=.5*_["default"].STAGE_WIDTH-220,this._shine2.y=.5*_["default"].STAGE_HEIGHT-120,this._shine2.scale=new PIXI.Point(4,4),this._shine2.anchor=new PIXI.Point(.5,.5),this.addChild(this._shine2),this._shine1=new PIXI.Sprite(e.getTexture("ui_result_shine_1")),this._shine1.x=.5*_["default"].STAGE_WIDTH-220,this._shine1.y=.5*_["default"].STAGE_HEIGHT-120,this._shine1.scale=new PIXI.Point(4,4),this._shine1.anchor=new PIXI.Point(.5,.5),this.addChild(this._shine1),this._badge=new PIXI.Sprite(e.getTexture("ui_result_position_bg")),this._badge.x=.5*_["default"].STAGE_WIDTH-200,this._badge.y=.5*_["default"].STAGE_HEIGHT-140,this._badge.anchor=new PIXI.Point(.5,.5),this._badge.visible=!1,this.addChild(this._badge);var n=e.getJSON("particle_emitter_trophy_stars_00"),o=new PIXI.Container;o.x=8,o.y=-12,this._badge.addChild(o),this._emitter=new PIXI.particles.Emitter(o,[e.getTexture("particle_impact_star_orange"),e.getTexture("particle_impact_star_white"),e.getTexture("particle_impact_star_yellow")],n),this._trophy=new PIXI.Sprite(PIXI.Texture.EMPTY),this._trophy.x=-8,this._trophy.y=50,this._trophy.anchor=new PIXI.Point(.5,.5),this._badge.addChild(this._trophy);var r=new PIXI.Sprite(e.getTexture("ui_result_bg_bottom"));r.x=.5*(_["default"].STAGE_WIDTH-r.width),r.y=_["default"].STAGE_HEIGHT-r.height,this.addChild(r),this._sign=new PIXI.Sprite(e.getTexture("ui_info_sign")),this._sign.y=p3.View.height-80,this._sign.anchor=new PIXI.Point(.5,.5),this._sign.visible=!1,this.addChild(this._sign);var a=void 0,s=void 0;s=this._place<=2?["results_sign_amazing","results_sign_brilliant","results_sign_fantastic"]:["results_sign_nice_try","results_sign_keep_trying"],a=s[Math.floor(Math.random()*s.length)],"ar"===language?(this._sign.label=new PIXI.Text(translate(a),{fontSize:"36px",fontFamily:"Noto Kufi Arabic",fill:4525121,align:"center",padding:6}),this._sign.label.x=8,this._sign.label.y=-130,this._sign.label.rotation=-.024,this._sign.label.pivot.x=.5*this._sign.label.width,this._sign.label.pivot.y=.5*this._sign.label.height,this._sign.addChild(this._sign.label)):(this._sign.label=new PIXI.BitmapText(translate(a),font(40,"center")),this._sign.label.x=8,this._sign.label.y=-130,this._sign.label.rotation=-.024,this._sign.label.pivot.x=.5*this._sign.label.textWidth,this._sign.label.pivot.y=.5*this._sign.label.textHeight,this._sign.label.tint=4525121,this._sign.addChild(this._sign.label));var u=_["default"].config.characters[this._id];o=new PIXI.Container,o.y=p3.View.height,this.addChild(o),this._sidekick=new PIXI.Sprite(u.sidekick?e.getTexture(u.sidekick.texture):PIXI.Texture.EMPTY),this._sidekick.x=u.sidekick?u.sidekick.offset.x:0,this._sidekick.y=u.sidekick?u.sidekick.offset.y:0,this._sidekick.anchor=new PIXI.Point(.5,1),this._sidekick.visible=!1,o.addChild(this._sidekick),this._driver=new PIXI.Sprite(e.getTexture(u.driver.texture)),this._driver.x=u.driver.offset.x,this._driver.y=u.driver.offset.y,this._driver.anchor=new PIXI.Point(.5,1),this._driver.visible=!1,o.addChild(this._driver);var c=new p3.ButtonStates;c.normal=e.getTexture("ui_btn_big_out"),c.over=e.getTexture("ui_btn_big_over"),c.down=e.getTexture("ui_btn_big_down"),c.icon=e.getTexture("ui_icon_play"),this._nextButton=new p3.Button(c),this._nextButton.visible=!1,this._nextButton.interactive=!1,this._nextButton.overSoundName="sfx_btn_rollover_00",this._nextButton.clickSoundName="sfx_btn_press_00",this._nextButton.signals.click.add(this.onNextButtonClick,this),this.addChild(this._nextButton),c=new p3.ButtonStates,c.normal=e.getTexture("ui_btn_big_out"),c.over=e.getTexture("ui_btn_big_over"),c.down=e.getTexture("ui_btn_big_down"),c.icon=e.getTexture("ui_icon_replay"),this._replayButton=new p3.Button(c),this._replayButton.visible=!1,this._replayButton.interactive=!1,this._replayButton.overSoundName="sfx_btn_rollover_00",this._replayButton.clickSoundName="sfx_btn_press_00",this._replayButton.signals.click.add(this.onReplayButtonClick,this),this.addChild(this._replayButton),c=new p3.ButtonStates,c.normal=e.getTexture("ui_btn_out"),c.over=e.getTexture("ui_btn_over"),c.down=e.getTexture("ui_btn_down"),c.icon=e.getTexture("ui_icon_home"),this._homeButton=new p3.Button(c),this._homeButton.visible=!1,this._homeButton.interactive=!1,this._homeButton.overSoundName="sfx_btn_rollover_00",this._homeButton.clickSoundName="sfx_btn_press_00",this._homeButton.signals.click.add(this.onHomeButtonClick,this),this.addChild(this._homeButton),c=new p3.ButtonStates,c.normal=e.getTexture("ui_btn_out"),c.over=e.getTexture("ui_btn_over"),c.down=e.getTexture("ui_btn_down"),c.icon=e.getTexture("ui_icon_sound_on"),c.iconAlt=e.getTexture("ui_icon_sound_off"),this._muteButton=new p3.MuteButton(c),this._muteButton.visible=!1,this._muteButton.interactive=!1,this._muteButton.overSoundName="sfx_btn_rollover_00",this._muteButton.clickSoundName="sfx_btn_press_00",this.addChild(this._muteButton),this._place>2?(i.tint=11777500,this._shine1.tint=16777215,this._shine2.tint=8646655,3===this._place?this._trophy.texture=e.getTexture("ui_result_position_4"):4===this._place&&(this._trophy.texture=e.getTexture("ui_result_position_5"))):2===this._place?(i.tint=16021872,this._shine1.tint=16777215,this._shine2.tint=15435298,this._trophy.texture=e.getTexture("ui_result_position_3")):1===this._place?(i.tint=9274061,this._shine1.tint=16777215,this._shine2.tint=16668814,this._trophy.texture=e.getTexture("ui_result_position_2")):0===this._place&&(i.tint=12936090,this._shine1.tint=16771938,this._shine2.tint=16769923,this._trophy.texture=e.getTexture("ui_result_position_1"))}},{key:"destroy",value:function(e){this._emitter.destroy(),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this,e)}},{key:"appear",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"appear",this).call(this),_["default"].audio.playSound("sfx_crowd_cheer_00"),this._place<=2&&_["default"].audio.playSound("sfx_fanfare_00");var e=new c["default"];e.callback=function(){_["default"].audio.playMusic("music_garage_loop_00")},e.scope=this,_["default"].audio.stopMusic(),this._outroSFX=_["default"].audio.playSound("music_race_end_00",e)}},{key:"show",value:function(){}},{key:"animateIn",value:function(e,t){this._homeButton.scale=new PIXI.Point,TweenMax.to(this._homeButton.scale,.4,{delay:.1,x:1,y:1,ease:Back.easeOut,easeParams:[2],onStart:function(){this._homeButton.visible=!0},onStartScope:this,onComplete:function(){this._homeButton.interactive=!0},onCompleteScope:this}),this._muteButton.scale=new PIXI.Point,TweenMax.to(this._muteButton.scale,.4,{delay:.16,x:1,y:1,ease:Back.easeOut,easeParams:[2],onStart:function(){this._muteButton.visible=!0},onStartScope:this,onComplete:function(){this._muteButton.interactive=!0},onCompleteScope:this}),this._replayButton.scale=new PIXI.Point,TweenMax.to(this._replayButton.scale,.4,{delay:.28,x:1,y:1,ease:Back.easeOut,easeParams:[4],onStart:function(){this._replayButton.visible=!0},onStartScope:this,onComplete:function(){this._replayButton.interactive=!0},onCompleteScope:this}),this._nextButton.scale=new PIXI.Point,TweenMax.to(this._nextButton.scale,.4,{delay:.1+.24,x:1,y:1,ease:Back.easeOut,easeParams:[4],onStart:function(){this._nextButton.visible=!0},onStartScope:this,onComplete:function(){this._nextButton.interactive=!0},onCompleteScope:this}),this._badge.scale=new PIXI.Point,TweenMax.killTweensOf(this._badge.scale),TweenMax.to(this._badge.scale,.34,{delay:.04,x:1,y:1,ease:Back.easeOut,easeParams:[1],onStart:function(){this._badge.visible=!0},onStartScope:this}),this._trophy.scale=new PIXI.Point,TweenMax.killTweensOf(this._trophy.scale),TweenMax.to(this._trophy.scale,.34,{delay:.2,x:1,ease:Back.easeOut,easeParams:[1]}),TweenMax.to(this._trophy.scale,.26,{delay:.2,y:1,ease:Back.easeOut,easeParams:[3]});var i=this._sign.y;this._sign.y=this._sign.y+400,TweenMax.killTweensOf(this._sign),TweenMax.to(this._sign,.32,{delay:.52,y:i,ease:Back.easeOut,easeParams:[1],onStart:function(){this._sign.visible=!0},onStartScope:this}),i=this._driver.x,this._driver.x=this._driver.x+800,TweenMax.killTweensOf(this._driver),TweenMax.to(this._driver,.4,{delay:.3,x:i,ease:Back.easeOut,easeParams:[1],onStart:function(){this._driver.visible=!0},onStartScope:this}),this._driver.alpha=0,TweenMax.to(this._driver,.2,{delay:.3,alpha:1,ease:Power1.easeInOut}),this._driver.rotation=.14,TweenMax.to(this._driver,.8,{delay:.46,rotation:0,ease:Elastic.easeOut,easeParams:[1]}),i=this._sidekick.x,this._sidekick.x=this._sidekick.x+800,TweenMax.killTweensOf(this._sidekick),TweenMax.to(this._sidekick,.4,{delay:.5,x:i,ease:Back.easeOut,easeParams:[1],onStart:function(){this._sidekick.visible=!0},onStartScope:this}),this._sidekick.alpha=0,TweenMax.to(this._sidekick,.2,{delay:.5,alpha:1,ease:Power1.easeInOut}),this._sidekick.rotation=.14,TweenMax.to(this._sidekick,.8,{delay:.66,rotation:0,ease:Elastic.easeOut,easeParams:[1]})}},{key:"resize",value:function(){this.x=.5*(p3.View.width-_["default"].STAGE_WIDTH),this._driver.parent.x=.5*_["default"].STAGE_WIDTH+.24*p3.View.width,this._sign.x=.5*_["default"].STAGE_WIDTH-.176*p3.View.width,this._nextButton.x=.5*(_["default"].STAGE_WIDTH+p3.View.width)-120,this._nextButton.y=p3.View.height-120,this._replayButton.x=.5*(_["default"].STAGE_WIDTH-p3.View.width)+120,this._replayButton.y=p3.View.height-120,this._homeButton.x=.5*(_["default"].STAGE_WIDTH-p3.View.width)+100,this._homeButton.y=100,this._muteButton.x=.5*(_["default"].STAGE_WIDTH+p3.View.width)-100,this._muteButton.y=100}},{key:"update",value:function(){this._shine1.rotation+=.12*deltaTime,this._shine2.rotation-=.08*deltaTime,this._emitter.update(deltaTime)}},{key:"onNextButtonClick",value:function(e){this.signals.next.dispatch(this)}},{key:"onReplayButtonClick",value:function(e){this.signals.previous.dispatch(this)}},{key:"onHomeButtonClick",value:function(e){this.signals.home.dispatch(this)}}]),t}(p3.Scene);i["default"]=f},{"../AudioParams":6,"../Common":7}],69:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function p(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("../AudioParams"),c=n(u),h=e("../Common"),_=n(h),f=function(e){function t(){o(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._char1=null,e._char2=null,e._char3=null,e._char4=null,e._logo=null,e._titleLabel=null,e._playButton=null,e._introSFX=null,e}return a(t,e),s(t,[{key:"init",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this);var e=_["default"].assets,i=new PIXI.Sprite(e.getTexture("ui_splash"));if(this.addChild(i),this._char1=new PIXI.Sprite(e.getTexture("ui_char_04a")),this._char1.x=.5*_["default"].STAGE_WIDTH-420,this._char1.y=_["default"].STAGE_HEIGHT+34,this._char1.scale=new PIXI.Point((-.74),.74),this._char1.anchor=new PIXI.Point(.5,1),this._char1.visible=!1,this.addChild(this._char1),this._char1.blink=new PIXI.Sprite(e.getTexture("ui_char_04a_blink")),this._char1.blink.anchor=new PIXI.Point(.5,1),this._char1.blink.visible=!1,this._char1.addChild(this._char1.blink),this.blinkAnimation(this._char1),this._char2=new PIXI.Sprite(e.getTexture("ui_char_04b")),this._char2.x=.5*_["default"].STAGE_WIDTH-298,this._char2.y=_["default"].STAGE_HEIGHT+40,this._char2.scale=new PIXI.Point((-.74),.74),this._char2.anchor=new PIXI.Point(.5,1),this._char2.visible=!1,this.addChild(this._char2),this._char2.blink=new PIXI.Sprite(e.getTexture("ui_char_04b_blink")),this._char2.blink.anchor=new PIXI.Point(.5,1),this._char2.blink.visible=!1,this._char2.addChild(this._char2.blink),this.blinkAnimation(this._char2),this._char4=new PIXI.Sprite(e.getTexture("ui_char_02")),this._char4.x=.5*_["default"].STAGE_WIDTH+400,this._char4.y=_["default"].STAGE_HEIGHT+46,this._char4.scale=new PIXI.Point(.74,.74),this._char4.anchor=new PIXI.Point(.5,1),this._char4.visible=!1,this.addChild(this._char4),this._char4.blink=new PIXI.Sprite(e.getTexture("ui_char_02_blink")),this._char4.blink.anchor=new PIXI.Point(.5,1),this._char4.blink.visible=!1,this._char4.addChild(this._char4.blink),this.blinkAnimation(this._char4),this._char3=new PIXI.Sprite(e.getTexture("ui_char_01")),this._char3.x=.5*_["default"].STAGE_WIDTH+214,this._char3.y=_["default"].STAGE_HEIGHT+60,this._char3.scale=new PIXI.Point(.74,.74),this._char3.anchor=new PIXI.Point(.5,1),this._char3.visible=!1,this.addChild(this._char3),this._char3.blink=new PIXI.Sprite(e.getTexture("ui_char_01_blink")),this._char3.blink.anchor=new PIXI.Point(.5,1),this._char3.blink.visible=!1,this._char3.addChild(this._char3.blink),this.blinkAnimation(this._char3),this._logo=new PIXI.Sprite(e.getTexture("logo")),this._logo.x=.5*_["default"].STAGE_WIDTH,this._logo.y=94,this._logo.anchor=new PIXI.Point(.5,.5),this.addChild(this._logo),"ar"===language)this._titleLabel=new PIXI.Text(translate("splash_title"),{fontSize:"40px",fontFamily:"Noto Kufi Arabic",fill:16777215,align:"center",padding:6}),this._titleLabel.x=.5*_["default"].STAGE_WIDTH,this._titleLabel.y=220,this._titleLabel.pivot.x=.5*this._titleLabel.width,this._titleLabel.pivot.y=.5*this._titleLabel.height,this.addChild(this._titleLabel);else{var n=new PIXI.Container;n.x=.5*_["default"].STAGE_WIDTH,n.y=212,this.addChild(n),this._titleLabel=new PIXI.BitmapText(translate("splash_title"),font(46,"center")),this._titleLabel.tint=16777215,this._titleLabel.maxWidth=340,n.addChild(this._titleLabel),n.pivot.x=.5*n.width,n.pivot.y=.5*n.height}var o=new p3.ButtonStates;o.normal=e.getTexture("ui_btn_big_out"),o.over=e.getTexture("ui_btn_big_over"),o.down=e.getTexture("ui_btn_big_down"),o.icon=e.getTexture("ui_icon_play"),this._playButton=new p3.Button(o),this._playButton.x=.5*_["default"].STAGE_WIDTH,this._playButton.y=.5*_["default"].STAGE_HEIGHT+254,this._playButton.visible=!1,this._playButton.overSoundName="sfx_btn_rollover_00",this._playButton.downSoundName="sfx_btn_press_00",this._playButton.signals.click.add(this.onPlayButtonClick,this),this.addChild(this._playButton),o=new p3.ButtonStates,o.normal=e.getTexture("ui_btn_out"),o.over=e.getTexture("ui_btn_over"),o.down=e.getTexture("ui_btn_down"),o.icon=e.getTexture("ui_icon_sound_on"),o.iconAlt=e.getTexture("ui_icon_sound_off"),this._muteButton=new p3.MuteButton(o),this._muteButton.visible=!1,this._muteButton.interactive=!1,this._muteButton.overSoundName="sfx_btn_rollover_00",this._muteButton.clickSoundName="sfx_btn_press_00",this.addChild(this._muteButton)}},{key:"destroy",value:function(){this._char1.blinkTween&&this._char1.blinkTween.kill(),this._char2.blinkTween&&this._char2.blinkTween.kill(),this._char3.blinkTween&&this._char3.blinkTween.kill(),this._char4.blinkTween&&this._char4.blinkTween.kill(),this._introSFX&&this._introSFX.destroy(),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"appear",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"appear",this).call(this);var e=new c["default"];e.callback=function(){_["default"].audio.playMusic("music_intro_loop_00")},e.scope=this,_["default"].audio.stopMusic(),this._introSFX=_["default"].audio.playSound("music_intro_start_00",e)}},{key:"animateIn",value:function(){this._playButton.scale=new PIXI.Point,TweenMax.to(this._playButton.scale,.4,{delay:.4,x:1,y:1,ease:Back.easeOut,easeParams:[4],onStart:function(){this._playButton.visible=!0},onStartScope:this,onComplete:function(){this._playButton.interactive=!0},onCompleteScope:this}),this._muteButton.scale=new PIXI.Point,TweenMax.to(this._muteButton.scale,.4,{delay:.46,x:1,y:1,ease:Back.easeOut,easeParams:[2],onStart:function(){this._muteButton.visible=!0},onStartScope:this,onComplete:function(){this._muteButton.interactive=!0},onCompleteScope:this}),this.animateDriver(this._char1,1,0),this.animateDriver(this._char2,1,.2),this.animateDriver(this._char3,-1,.1),this.animateDriver(this._char4,-1,.3)}},{key:"animateDriver",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=e.x;1===t?e.x=e.x-800:t===-1&&(e.x=e.x+800),TweenMax.killTweensOf(e),TweenMax.to(e,.4,{delay:i,x:n,ease:Back.easeOut,easeParams:[1],onStart:function(){e.visible=!0},onStartScope:this}),e.alpha=0,TweenMax.to(e,.2,{delay:i,alpha:1,ease:Power1.easeInOut}),1===t?e.rotation=-.14:t===-1&&(e.rotation=.14),TweenMax.to(e,.8,{delay:i+.16,rotation:0,ease:Elastic.easeOut,easeParams:[1]})}},{key:"resize",value:function(){this.x=.5*(p3.View.width-_["default"].STAGE_WIDTH),this._muteButton.x=.5*(_["default"].STAGE_WIDTH+p3.View.width)-100,this._muteButton.y=100}},{key:"update",value:function(){var e=_["default"].input;e.isKeyPressed(32)&&this.onPlayButtonClick(null)}},{key:"blinkAnimation",value:function(e){e.blinkTween=delay(function(){e.blink.visible=!0,e.blinkTween=delay(function(){e.blink.visible=!1,this.blinkAnimation(e)},.1,this),e.scale.y=.734,TweenMax.to(e.scale,.44,{y:.74,ease:Back.easeOut})},1+2*Math.random(),this)}},{key:"onPlayButtonClick",value:function(e){this._playButton.interactive=!1,this.signals.next.dispatch(this),this._introSFX&&this._introSFX.destroy(),_["default"].audio.stopMusic(),_["default"].audio.playSound("sfx_whistle_rise_00"),_["default"].audio.playSound("music_intro_end_00")}}]),t}(p3.Scene);i["default"]=f},{"../AudioParams":6,"../Common":7}],70:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function _(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:_(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("../Common"),c=n(u),h=function(e){function t(){o(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),i=c["default"].assets,n=new PIXI.Sprite(i.getTexture("ui_loading"));return e.addChild(n),e._wheel=new PIXI.Sprite(i.getTexture("ui_loader")),e._wheel.x=.5*c["default"].STAGE_WIDTH,e._wheel.y=.5*p3.View.height,e._wheel.anchor=new PIXI.Point(.5,.5),e.addChild(e._wheel),"ar"===language?(e._loadingLabel=new PIXI.Text(translate("theme_loader"),{fontSize:"54px",fontFamily:"Noto Kufi Arabic",fill:16777215,align:"center",padding:6}),e._loadingLabel.x=.5*c["default"].STAGE_WIDTH,e._loadingLabel.y=.5*p3.View.height+240,e._loadingLabel.pivot.x=.5*e._loadingLabel.width,e._loadingLabel.pivot.y=.5*e._loadingLabel.height,e.addChild(e._loadingLabel)):(e._loadingLabel=new PIXI.BitmapText(translate("theme_loader"),font(64,"center")),e._loadingLabel.x=.5*c["default"].STAGE_WIDTH,e._loadingLabel.y=.5*p3.View.height+240,e._loadingLabel.pivot.x=.5*e._loadingLabel.textWidth,e._loadingLabel.pivot.y=.5*e._loadingLabel.textHeight,e.addChild(e._loadingLabel)),e}return a(t,e),s(t,[{key:"appear",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"appear",this).call(this);var e=c["default"].assets;e.unloadTexture("track"),e.unloadTexture("skybox");var i=Math.floor(5*Math.random()),n=[];switch(i){case 0:n=[{name:"track",url:"images/wr1_mountain_1x.json"},{name:"skybox",url:"images/wr1_mountain_bg_1x.png"}];break;case 1:n=[{name:"track",url:"images/wr2_snow_1x.json"},{name:"skybox",url:"images/wr2_snow_bg_1x.png"}];break;case 2:n=[{name:"track",url:"images/wr3_halloween_1x.json"},{name:"skybox",url:"images/wr3_halloween_bg_1x.png"}];break;case 3:n=[{name:"track",url:"images/wr4_desert_1x.json"},{name:"skybox",url:"images/wr4_desert_bg_1x.png"}];break;case 4:n=[{name:"track",url:"images/wr5_italy_1x.json"},{name:"skybox",url:"images/wr5_italy_bg_1x.png"}]}e.addFiles(n,"assets/"),e.signals.progress.add(this.onLoadingProgress,this),e.signals.complete.addOnce(this.onLoadingCompleted,this),e.load()}},{key:"resize",value:function(){this.x=.5*(p3.View.width-c["default"].STAGE_WIDTH)}},{key:"update",value:function(){this._wheel.rotation+=8*deltaTime}},{key:"onLoadingProgress",value:function(e){console.log("progress:",e.progress+"%")}},{key:"onLoadingCompleted",value:function(){var e=c["default"].assets;e.signals.progress.removeAll(),e.signals.complete.removeAll(),this.signals.next.dispatch(this)}}]),t}(p3.Scene);i["default"]=h},{"../Common":7}],71:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{
value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function _(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:_(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("../Common"),c=n(u),h=function(e){function t(){o(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.signals={complete:new signals.Signal},e._panel=null,e}return a(t,e),s(t,[{key:"destroy",value:function(){this.signals.complete.dispose(),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"show",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=c["default"].assets;this._panel=new PIXI.Sprite(t.getTexture("ui_tut_bg")),this._panel.x=.5*c["default"].STAGE_WIDTH,this._panel.y=.5*p3.View.height+280,this._panel.anchor=new PIXI.Point(.5,.5),this.addChild(this._panel);var i=new PIXI.Container;i.y=-8,this._panel.addChild(i),"ar"===language?(this._panel.label=new PIXI.Text(e,{fontSize:"20px",fontFamily:"Noto Kufi Arabic",fill:4525121,align:"center",padding:6,wordWrap:!0,wordWrapWidth:440}),this._panel.label.x=0,i.addChild(this._panel.label)):(this._panel.label=new PIXI.BitmapText(e,font(26,"center")),this._panel.label.x=0,this._panel.label.maxWidth=440,this._panel.label.tint=4525121,i.addChild(this._panel.label)),i.pivot.x=.5*i.width,i.pivot.y=.5*i.height,this.animateIn(function(){},this)}},{key:"hide",value:function(){this.animateOut(function(){this.destroy()},this)}},{key:"resize",value:function(){}},{key:"animateIn",value:function(e,t){var i=this._panel.y;this._panel.y+=400,TweenMax.to(this._panel,.34,{y:i,ease:Back.easeOut,easeParams:[1],onComplete:e,onCompleteScope:t})}},{key:"animateOut",value:function(e,t){TweenMax.to(this._panel,.2,{y:this._panel.y+400,ease:Back.easeIn,easeParams:[1],onComplete:e,onCompleteScope:t})}}]),t}(PIXI.Container);i["default"]=h},{"../Common":7}],72:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function y(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:y(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("../Common"),c=n(u),h=e("./Tutorial"),_=n(h),f=e("ismobilejs"),p=n(f),d=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return a(t,e),s(t,[{key:"show",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this,p["default"].any?translate("tutorial_controls_mobile"):translate("tutorial_controls")),this._panel.label.x=110;var e=c["default"].assets,i=new PIXI.Sprite(p["default"].any?e.getTexture("ui_tut_hand"):e.getTexture("ui_tut_keys"));i.x=-220,i.y=-8,i.anchor=new PIXI.Point(.5,.5),this._panel.addChild(i)}}]),t}(_["default"]);i["default"]=d},{"../Common":7,"./Tutorial":71,ismobilejs:1}],73:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function p(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("../Common"),c=n(u),h=e("./Tutorial"),_=n(h),f=function(e){function t(){o(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._marker=null,e}return a(t,e),s(t,[{key:"show",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this,translate("tutorial_leaderboard"));var e=c["default"].assets;this._marker=new PIXI.Sprite(e.getTexture("ui_tut_circle")),this._marker.y=194,this._marker.anchor=new PIXI.Point(.5,.5),this._marker.scale=new PIXI.Point(5,5),this.addChildAt(this._marker,0)}},{key:"resize",value:function(){this._marker.x=.5*(c["default"].STAGE_WIDTH-p3.View.width)+90}}]),t}(_["default"]);i["default"]=f},{"../Common":7,"./Tutorial":71}],74:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function p(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("../Common"),c=n(u),h=e("./Tutorial"),_=n(h),f=function(e){function t(){o(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._marker=null,e}return a(t,e),s(t,[{key:"show",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this,translate("tutorial_laps"));var e=c["default"].assets;this._marker=new PIXI.Sprite(e.getTexture("ui_tut_circle")),this._marker.x=.5*c["default"].STAGE_WIDTH-30,this._marker.y=82,this._marker.anchor=new PIXI.Point(.5,.5),this._marker.scale=new PIXI.Point(3,3),this.addChildAt(this._marker,0)}}]),t}(_["default"]);i["default"]=f},{"../Common":7,"./Tutorial":71}],75:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=function p(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:p(o,t,i)}if("value"in n)return n.value;var r=n.get;if(void 0!==r)return r.call(i)},u=e("../Common"),c=n(u),h=e("./Tutorial"),_=n(h),f=function(e){function t(){o(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._marker=null,e}return a(t,e),s(t,[{key:"show",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this,translate("tutorial_powerup")),this._panel.label.x=60;var e=c["default"].assets,i=new PIXI.Sprite(e.getTexture("ui_icon_powerup_bomb"));i.x=-240,i.y=-12,i.anchor=new PIXI.Point(.5,.5),this._panel.addChild(i)}}]),t}(_["default"]);i["default"]=f},{"../Common":7,"./Tutorial":71}]},{},[23]);
//# sourceMappingURL=bundle.min.js.map
