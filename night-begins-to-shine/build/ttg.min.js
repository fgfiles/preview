var BasicGame={music:null,fx:null,menuesMusic:null,juicy:null,screenFlash:null,lives:3,life01Score:"",life02Score:"",life03Score:"",FXEnabled:!0,levelsCacheNames:[],addDistanceToFOV:30,maxDistanceToPlayer:3e3,activeTutorial:!1,activeHelpScreen:!1};BasicGame.Boot=function(a){a.state.add("Preloader",BasicGame.Preloader),a.state.add("MainMenu",BasicGame.MainMenu),a.state.add("Game",BasicGame.Game),a.state.add("GameEnd",BasicGame.GameEnd)},BasicGame.Boot.prototype={init:function(){this.input.maxPointers=2,this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.pageAlignHorizontally=!0,this.scale.pageAlignVertically=!0,this.game.device.desktop||(this.scale.forceOrientation(!0,!1),this.scale.setResizeCallback(this.gameResized,this),this.scale.enterIncorrectOrientation.add(this.enterIncorrectOrientation,this),this.scale.leaveIncorrectOrientation.add(this.leaveIncorrectOrientation,this)),this.scale.refresh(),this.game.stateTransition=this.game.plugins.add(Phaser.Plugin.StateTransition),this.game.stateTransition.configure({duration:.5*Phaser.Timer.SECOND,ease:Phaser.Easing.Exponential.InOut,properties:{alpha:0,scale:{x:1.4,y:1.4}}})},preload:function(){this.load.image("preloaderBar","assets/images/cn_preloader_bar.png"),this.load.image("preloaderBg","assets/images/cn_preloader_bg.jpg"),this.load.image("preloaderBarFill","assets/images/cn_preloader_pattern.jpg")},create:function(){this.state.start("Preloader")},gameResized:function(a,b){},enterIncorrectOrientation:function(){BasicGame.orientated=!1,document.getElementById("orientation").style.display="block",this.game.paused=!0},leaveIncorrectOrientation:function(){BasicGame.orientated=!0,document.getElementById("orientation").style.display="none",this.game.paused=!1}},BasicGame.Game=function(a){},BasicGame.Game.prototype={create:function(){BasicGame.activeTutorial&&(BasicGame.activeHelpScreen=!0),this.game.time.advancedTiming=!0,this.originalLevelIndex=0,this.minimumIndex=3,this.levelsJsonNames=BasicGame.levelsCacheNames,this.lvlFlowState=2,this.lvlFlowPlaying=0,this.lvlFlowTransform=1,this.lvlFlowGameOver=2,this.lvlFlowIntro=3,this.currentFase,this.startLevelSpeed=14,this.fase01LevelMaxSpeed=16,this.fase02LevelMaxSpeed=18,this.fase03LevelMaxSpeed=19,this.levelSpeed=this.startLevelSpeed,this.levelAcceleration=.0025,this.gravity=1500,this.playerInitialPosition=new Phaser.Point(100,300),this.jumpInProgress=!1,this.touchingFloor=!1,this.jumpSpeed=-600,this.jumpsAvailablesOriginal=2,this.jumpsAvailables=this.jumpsAvailablesOriginal,this.nextJumpAvailableTime=3e3,this.jumpTime=300,this.physics.startSystem(Phaser.Physics.ARCADE),this.canDash=!1,this.dashing=!1,this.nextDashOriginalTime=1e3,this.nextDashTime=this.nextDashOriginalTime,this.nextDashTimeAdd=1e3,this.dashExtraSpeed=8,this.dashTime=250,this.dashTimer=this.game.time.create(!1),this.deathTimer=this.game.time.create(!1),this.game.world.setBounds(0,0,1e4,1024),this.distanceNextLevelSpawn=this.game.world.width,this.levelSpawnX=2e3,this.enemiesGroup=this.game.add.group(),this.enemiesGroup.enableBody=!0;for(var a=0;a<5;a++)this.addEnemyToGroup();this.warningIcons=[],this.warningIconsGroup=this.game.add.group();for(var a=0;a<5;a++)this.addWarningIconToGroup();if(this.cassettesGroup=this.game.add.group(),this.cassettesGroup.enableBody=!0,this.floorsGroupFase01=this.game.add.group(),this.floorsGroupFase01.enableBody=!0,this.floorsGroupFase02=this.game.add.group(),this.floorsGroupFase02.enableBody=!0,this.floorsGroupFase03=this.game.add.group(),this.floorsGroupFase03.enableBody=!0,this.deathCassettesEmitter=this.add.emitter(0,0,20),this.deathCassettesEmitter.minParticleSpeed.set(-750,-750),this.deathCassettesEmitter.maxParticleSpeed.set(750,750),this.deathCassettesEmitter.makeParticles("HUD","cassettes"),this.backgroundLyrSkyFase03=this.add.tileSprite(0,0,this.game.width,this.game.world.height,"fase03","cielo03"),this.backgroundLyrAurorasFase03=this.add.tileSprite(0,0,this.game.width,512,"back03_auroras"),this.backgroundLyrAurorasFase03.y=this.game.height,this.backgroundLyrMountainsFase03=this.add.tileSprite(0,0,this.game.width,1024,"back03_detrasPlataformas"),this.backgroundLyrGridFase03=this.add.tileSprite(0,this.game.world.height,this.game.width,498,"fase03","horizontefase03"),this.backgroundLyrGridFase03.anchor.set(0,1),this.backgroundLyrGridFase03.y=this.game.world.height,this.backgroundLyrGridFase03.originalY=this.backgroundLyrGridFase03.y,this.backgroundLyrFrontRocksFase03=this.add.tileSprite(0,this.game.world.height,this.game.width,256,"back03_delantePlataformas"),this.backgroundLyrFrontRocksFase03.anchor.set(0,1),this.backgroundLyrFrontRocksFase03.y=this.game.world.height,this.backgroundLyrFrontRocksFase03.originalY=this.backgroundLyrFrontRocksFase03.y,this.backgroundLyrSkyFase02=this.add.tileSprite(0,0,this.game.width,1024,"cielo02"),this.backgroundMoonFase02=this.add.sprite(0,0,"fase02","luna"),this.backgroundMoonFase02.anchor.set(.5),this.backgroundMoonFase02.x=.5*this.game.width,this.backgroundMoonFase02.y=.85*this.game.height,this.backgroundMoonFase02.originalY=this.backgroundMoonFase02.y,this.backgroundLyrNubeLeftFase02=this.add.sprite(0,0,"back02_nubes"),this.backgroundLyrNubeLeftFase02.anchor.set(.5,1),this.backgroundLyrNubeLeftFase02.x=0,this.backgroundLyrNubeLeftFase02.y=this.game.world.height,this.backgroundLyrNubeRightFase02=this.add.sprite(0,0,"back02_nubes"),this.backgroundLyrNubeRightFase02.anchor.set(.5,1),this.backgroundLyrNubeRightFase02.x=this.game.width,this.backgroundLyrNubeRightFase02.y=this.game.world.height,this.backgroundLyrMountainsFase02=this.add.tileSprite(0,0,this.game.width,1024,"back02_detrasPlataformas"),this.backgroundLyrHorizonteFase02=this.add.tileSprite(0,this.game.world.height,this.game.width,512,"fase02","horizontefase02"),this.backgroundLyrHorizonteFase02.anchor.set(0,1),this.backgroundLyrHorizonteFase02.y=this.game.world.height,this.backgroundLyrHorizonteFase02.originalY=this.backgroundLyrHorizonteFase02.y,this.backgroundLyrFrontRocksFase02=this.add.tileSprite(0,0,this.game.width,256,"back02_delantePlataformas"),this.backgroundLyrFrontRocksFase02.anchor.set(0,1),this.backgroundLyrFrontRocksFase02.y=this.game.world.height,this.backgroundLyrFrontRocksFase02.originalY=this.backgroundLyrFrontRocksFase02.y,this.backgroundLyrSkyFase01=this.add.tileSprite(0,0,this.game.width,1024,"fase01","cielo01"),this.backgroundLyrPlanetasFase01=this.add.tileSprite(0,0,this.game.width,592,"back01_planetas"),this.backgroundLyrPlanetasFase01.anchor.set(0,0),this.backgroundLyrPlanetasFase01.y=0,this.backgroundLyrPlanetasFase01.originalY=this.backgroundLyrPlanetasFase01.y,this.backgroundLyrMeteorosFase01=this.add.tileSprite(0,0,this.game.width,424,"back01_meteoros"),this.backgroundLyrMeteorosFase01.anchor.set(0,1),this.backgroundLyrMeteorosFase01.y=this.game.world.height,this.backgroundLyrMeteorosFase01.originalY=this.backgroundLyrMeteorosFase01.y,this.backgroundLyrNubesFase01=this.add.tileSprite(0,0,this.game.width,439,"back01_nubes"),this.backgroundLyrNubesFase01.anchor.set(0,1),this.backgroundLyrNubesFase01.y=this.game.world.height,this.backgroundLyrNubesFase01.originalY=this.backgroundLyrNubesFase01.y,this.backgroundLyrFrontRocksFase01=this.add.tileSprite(0,0,this.game.width,228,"back01_delantePlataformas"),this.backgroundLyrFrontRocksFase01.anchor.set(0,1),this.backgroundLyrFrontRocksFase01.y=this.game.world.height,this.backgroundLyrFrontRocksFase01.originalY=this.backgroundLyrFrontRocksFase01.y,this.cassettesScore=0,this.cassettesPowerBar=0,this.wolfLimit=300,this.horseLimit=300,this.scoreBackHud=this.add.image(this.game.width-70,20,"HUD","scoreBase"),this.scoreBackHud.fixedToCamera=!0,this.scoreBackHud.anchor.set(1,0),this.txtScore=this.add.bitmapText(this.game.width-85,30,"font","0",32),this.txtScore.fixedToCamera=!0,this.txtScore.anchor.set(1,0),this.iconLives=this.add.image(14,96,"iconLives"),this.iconLives.fixedToCamera=!0,this.txtLives=this.add.bitmapText(60,113,"font",BasicGame.lives.toString(),32),this.txtLives.fixedToCamera=!0,this.txtLives.anchor.set(1,0),this.btnPause=this.add.button(this.game.width-10,10,"HUD",this.btnOpenPause,this,"btn_Pausaover","btn_PausaNormal","btn_PausaDown","btn_PausaNormal"),this.btnPause.fixedToCamera=!0,this.btnPause.anchor.set(1,0),this.barHorseBackHud=this.add.image(300,20,"HUD","barEmpty"),this.barHorseBackHud.fixedToCamera=!0,this.barHorseHud=this.add.image(290,12,"HUD","barPegasoFull"),this.barHorseHud.fixedToCamera=!0,this.barHorseRect=new Phaser.Rectangle(0,0,0,this.barHorseHud.height),this.barHorseHud.crop(this.barHorseRect),this.horseOffHud=this.add.image(485,5,"HUD","PegasoHeadOff"),this.horseOffHud.fixedToCamera=!0,this.horseOnHud=this.add.image(485,5,"HUD","PegasoHeadNormal"),this.horseOnHud.fixedToCamera=!0,this.horseOnHud.visible=!1,this.barWolfBackHud=this.add.image(60,20,"HUD","barEmpty"),this.barWolfBackHud.fixedToCamera=!0,this.barWolfHud=this.add.image(50,12,"HUD","barLoboFull"),this.barWolfHud.fixedToCamera=!0,this.barWolfRect=new Phaser.Rectangle(0,0,0,this.barWolfHud.height),this.barWolfHud.crop(this.barWolfRect),this.wolfOffHud=this.add.image(245,5,"HUD","LoboHeadOff"),this.wolfOffHud.fixedToCamera=!0,this.wolfOnHud=this.add.image(245,5,"HUD","LoboHeadNormal"),this.wolfOnHud.fixedToCamera=!0,this.wolfOnHud.visible=!1,this.cassetteHud=this.add.image(0,0,"HUD","cassetteStar"),this.cassetteHud.fixedToCamera=!0,this.groupHudBars=this.add.group(),this.groupHudBars.add(this.barHorseBackHud),this.groupHudBars.add(this.barHorseHud),this.groupHudBars.add(this.horseOffHud),this.groupHudBars.add(this.horseOnHud),this.groupHudBars.add(this.barWolfBackHud),this.groupHudBars.add(this.barWolfHud),this.groupHudBars.add(this.wolfOffHud),this.groupHudBars.add(this.wolfOnHud),this.groupHudBars.add(this.cassetteHud),this.blackBackground=this.add.tileSprite(0,0,this.game.width,600,"TransformAnim","fondo16x16"),this.blackBackground.fixedToCamera=!0,this.backPausa=this.add.tileSprite(0,0,this.game.width,this.game.height,"HUD","color16x16"),this.backPausa.fixedToCamera=!0,this.panelPausa=this.add.image(this.game.width,0,"HUD","pause_panel"),this.panelPausa.fixedToCamera=!0,this.panelPausa.anchor.set(1,0),this.btnClosePause=this.add.button(this.game.width-10,10,"HUD",this.btnOpenPause,this,"btn_cerrarOver","btn_cerrarNormal","btn_cerrarDown","btn_cerrarNormal"),this.btnClosePause.fixedToCamera=!0,this.btnClosePause.anchor.set(1,0),this.btnAudioOn=this.add.button(this.game.width-15,120,"HUD",this.btnAudioOnClick,this,"btn_sonidoOver","btn_sonidoNormal","btn_sonidoDown","btn_sonidoNormal"),this.btnAudioOn.fixedToCamera=!0,this.btnAudioOn.anchor.set(1,0),this.btnAudioOff=this.add.button(this.game.width-15,120,"HUD",this.btnAudioOnClick,this,"btn_sonidoOFFOver","btn_sonidoOFFNormal","btn_sonidoOFFDown","btn_sonidoOFFNormal"),this.btnAudioOff.fixedToCamera=!0,this.btnAudioOff.anchor.set(1,0),this.game.sound.mute?(this.btnAudioOn.visible=!1,this.btnAudioOff.visible=!0):(this.btnAudioOn.visible=!0,this.btnAudioOff.visible=!1),this.btnHome=this.add.button(this.game.width-15,240,"HUD",this.btnHomeOnClick,this,"btn_homeOver","btn_homeNormal","btn_homeDoen","btn_homeNormal"),this.btnHome.fixedToCamera=!0,this.btnHome.anchor.set(1,0),this.btnHelp=this.add.button(this.game.width-15,360,"HUD",this.btnOpenHelp,this,"btn_helpOver","btn_helpNormal","btn_helpDown","btn_helpNormal"),this.btnHelp.fixedToCamera=!0,this.btnHelp.anchor.set(1,0),this.groupPause=this.add.group(),this.groupPause.add(this.backPausa),this.groupPause.add(this.panelPausa),this.groupPause.add(this.btnClosePause),this.groupPause.add(this.btnAudioOn),this.groupPause.add(this.btnAudioOff),this.groupPause.add(this.btnHome),this.groupPause.add(this.btnHelp),this.panelTutorial=this.add.sprite(.5*this.game.width,.5*this.game.height,"HUD","tutorialScreen"),this.panelTutorial.anchor.set(.5),this.panelTutorial.fixedToCamera=!0,this.btnClosepanelTutorial=this.add.button(.5*this.game.width,this.game.height-10,"HUD",this.btnCloseHelp,this,"btn_cerrarOver","btn_cerrarNormal","btn_cerrarDown","btn_cerrarNormal"),this.btnClosepanelTutorial.fixedToCamera=!0,this.btnClosepanelTutorial.anchor.set(.5,1),this.panelTutorialGroup=this.add.group(),this.panelTutorialGroup.add(this.panelTutorial),this.panelTutorialGroup.add(this.btnClosepanelTutorial),this.groupPause.x=0,this.groupPause.y=0,this.groupPauseShowTween=this.add.tween(this.groupPause),this.groupPauseShowTween.to({x:0},250,Phaser.Easing.Linear.Out),this.groupPauseHideTween=this.add.tween(this.groupPause),this.groupPauseHideTween.to({x:500},250,Phaser.Easing.Linear.Out),this.hidePauseMenu(),this.transLine=this.add.tileSprite(-100,.5*this.game.height,this.game.width+150,130,"TransformAnim","Lines/line02"),this.transLine.anchor.setTo(0,.5),this.transLine.fixedToCamera=!0,this.transLine.angle=2,this.transLine.animations.add("line1",["Lines/line01"],60,!0),this.transLine.animations.add("line2",["Lines/line02"],60,!0),this.transLine.animations.add("line3",["Lines/line03"],60,!0),this.transLine.animations.play("line1"),this.transLine.scale.y=0,this.transLineTween01=this.add.tween(this.transLine.scale),this.transLineTween02=this.add.tween(this.transLine.scale),this.transLineTween01.to({y:3},1e3,Phaser.Easing.Quintic.Out).onComplete.add(function(){this.transLineTween02.to({y:1},500,Phaser.Easing.Quintic.Out,!0).onComplete.add(this.startNextFase,this)},this),this.silhuetteBike01=this.add.image(this.playerInitialPosition.x,this.transLine.y,"TransformAnim","moto01"),this.silhuetteBike01.anchor.setTo(.5),this.silhuetteBike01.fixedToCamera=!0,this.silhuetteBike02=this.add.image(this.playerInitialPosition.x,.5*this.game.height,"TransformAnim","moto02"),this.silhuetteBike02.anchor.setTo(.5),this.silhuetteBike02.fixedToCamera=!0,this.silhuetteHorse=this.add.image(this.playerInitialPosition.x,.5*this.game.height,"TransformAnim","caballo"),this.silhuetteHorse.anchor.setTo(.5),this.silhuetteHorse.fixedToCamera=!0,this.explotionTransformation=this.add.sprite(this.playerInitialPosition.x,.5*this.game.height,"TransformAnim"),this.explotionTransformation.anchor.setTo(.5),this.explotionTransformation.fixedToCamera=!0,this.explotionTransformation.animations.add("explo",Phaser.Animation.generateFrameNames("Explosion/rayos",1,9,"",2),30,!0),this.explotionTransformation.animations.play("explo"),BasicGame.activeTutorial){this.tutorialCyborg=this.add.image(this.playerInitialPosition.x,this.transLine.y,"HUD","cyborgTuto"),this.tutorialCyborg.anchor.setTo(.5),this.tutorialCassette=this.add.image(this.playerInitialPosition.x+500,200,"HUD","cassetteTuto"),this.tutorialCassette.anchor.setTo(.5),this.tutorialCassette.fixedToCamera=!0,this.tutorialCyborgTween=this.add.tween(this.tutorialCyborg),this.tutorialCyborgTween.to({x:this.playerInitialPosition.x+300},1500,Phaser.Easing.Quadratic.Out).onComplete.add(this.startTransformState,this),this.tutorialTeachingJump=!0,this.tutorialTeachingDoubleJump=!1,this.tutorialTeachingDash=!1,this.tutorialGroup=this.add.group(),this.tutorialJumpIcon=this.add.image(.5*this.game.width+100,this.game.height-150,"HUD","botonSalto"),this.tutorialJumpIcon.anchor.setTo(.5),this.tutorialJumpIcon.fixedToCamera=!0;var b=this.game.device.desktop===!0?"iconDJump":"iconDJumpTouch";this.tutorialDoubleJumpIcon=this.add.image(.5*this.game.width+100,this.game.height-150,b),this.tutorialDoubleJumpIcon.anchor.setTo(.5),this.tutorialDoubleJumpIcon.fixedToCamera=!0,this.tutorialDashIcon=this.add.image(.5*this.game.width+100,this.game.height-150,"HUD","botonDash"),this.tutorialDashIcon.anchor.setTo(.5),this.tutorialDashIcon.fixedToCamera=!0,this.game.device.desktop?(this.tutorialUpKey=this.add.image(.5*this.game.width-100,this.game.height-150,"HUD","teclaSalto"),this.tutorialUpKey.anchor.setTo(.5),this.tutorialUpKey.fixedToCamera=!0,this.tutorialDashKey=this.add.image(.5*this.game.width-100,this.game.height-150,"HUD","teclaDash"),this.tutorialDashKey.anchor.setTo(.5),this.tutorialDashKey.fixedToCamera=!0,this.tutorialGroup.add(this.tutorialUpKey),this.tutorialGroup.add(this.tutorialDashKey)):(this.tutorialMobileJumpButton=this.add.image(100,this.game.height-25,"HUD","btn_JumpNormal"),this.tutorialMobileJumpButton.anchor.setTo(0,1),this.tutorialMobileJumpButton.fixedToCamera=!0,this.tutorialMobileDashButton=this.add.image(this.game.width-100,this.game.height-25,"HUD","btn_DashNormal"),this.tutorialMobileDashButton.anchor.setTo(1),this.tutorialMobileDashButton.fixedToCamera=!0,this.tutorialGroup.add(this.tutorialMobileJumpButton),this.tutorialGroup.add(this.tutorialMobileDashButton)),this.tutorialGroup.add(this.tutorialJumpIcon),this.tutorialGroup.add(this.tutorialDoubleJumpIcon),this.tutorialGroup.add(this.tutorialDashIcon)}BasicGame.screenFlash=BasicGame.juicy.createScreenFlash(),BasicGame.screenFlash.fixedToCamera=!0,this.add.existing(BasicGame.screenFlash),this.bikeParticlesFront=this.add.emitter(0,0,36),this.bikeParticlesFront.setXSpeed(-500,-20),this.bikeParticlesFront.setYSpeed(-50,0),this.bikeParticlesFront.gravity=-10,this.bikeParticlesFront.setAlpha(1,0,3e3),this.bikeParticlesFront.setScale(0,1,0,1,3e3,Phaser.Easing.Quintic.Out),this.bikeParticlesFront.makeParticles("HUD","particulaHumo"),this.bikeParticlesFront.lifespan=3e3,this.bikeParticlesBack=this.add.emitter(0,0,36),this.bikeParticlesBack.setXSpeed(-200,-20),this.bikeParticlesBack.setYSpeed(-50,0),this.bikeParticlesBack.gravity=-10,this.bikeParticlesBack.setAlpha(1,0,3e3),this.bikeParticlesBack.setScale(0,1,0,1,3e3,Phaser.Easing.Quintic.Out),this.bikeParticlesBack.makeParticles("HUD","particulaHumo"),this.bikeParticlesBack.lifespan=3e3,this.horseParticles=this.add.emitter(0,0,10),this.horseParticles.setXSpeed(-500,-20),this.horseParticles.setYSpeed(0,0),this.horseParticles.height=100,this.horseParticles.gravity=0,this.horseParticles.setAlpha(1,0,1500),this.horseParticles.setScale(0,1,0,1,3e3,Phaser.Easing.Quintic.Out),this.horseParticles.makeParticles("HUD","particulaCaballo"),this.horseParticles.lifespan=1500,this.bikeParticlesInitialInterval=5,this.bikeParticlesInterval=this.bikeParticlesInitialInterval,this.cassettesParticles=this.add.emitter(0,0,50),this.cassettesParticles.setXSpeed(-400,0),this.cassettesParticles.setYSpeed(0,0),this.cassettesParticles.gravity=0,this.cassettesParticles.setAlpha(1,0,1e3),this.cassettesParticles.makeParticles("HUD","particulasCassettes"),this.cassettesParticles.lifespan=1e3,this.jumpButton=this.input.keyboard.addKey(Phaser.Keyboard.UP),this.playerDashButton=this.input.keyboard.addKey(Phaser.Keyboard.RIGHT),this.pauseButton=this.input.keyboard.addKey(Phaser.Keyboard.ESC),this.input.keyboard.addKeyCapture([Phaser.Keyboard.UP,Phaser.Keyboard.RIGHT,Phaser.Keyboard.ESC]),this.input.onDown.add(this.onTap,this),this.input.onUp.add(this.onRelease,this),this.jumpButton.onDown.add(this.jumpStart,this),this.jumpButton.onUp.add(this.jumpEnd,this),this.pauseButton.onDown.add(this.btnOpenPause,this),this.pressedJump=!1,this.pressedplayerDash=!1,BasicGame.activeTutorial?this.startIntroState():this.startTransformState()},addMobileControlIcons:function(){this.game.device.desktop||(this.controlsGroup=this.add.group(),this.mobileJumpButton=this.add.image(100,this.game.height-25,"HUD","btn_JumpNormal"),this.mobileJumpButton.anchor.setTo(0,1),this.mobileJumpButton.fixedToCamera=!0,this.mobileDashButton=this.add.image(this.game.width-100,this.game.height-25,"HUD","btn_DashNormal"),this.mobileDashButton.anchor.setTo(1),this.mobileDashButton.fixedToCamera=!0,this.controlsGroup.add(this.mobileJumpButton),this.controlsGroup.add(this.mobileDashButton))},clearMobileControlIcons:function(){this.game.device.desktop||(this.mobileDashButton&&this.mobileDashButton.kill(),this.mobileJumpButton&&this.mobileJumpButton.kill())},showBeginningHelpScreen:function(){this.lvlFlowState==this.lvlFlowPlaying&&(this.physics.arcade.isPaused=!this.physics.arcade.isPaused,this.groupPause.visible=!0,this.groupPause.x=0,this.groupPause.y=0,this.panelPausa.visible=!1,this.btnClosePause.visible=!1,this.btnAudioOn.visible=!1,this.btnAudioOff.visible=!1,this.btnHome.visible=!1,this.btnHelp.visible=!1,this.btnPause.inputEnabled=!1,this.btnOpenHelp(),BasicGame.music&&BasicGame.music.pause(),BasicGame.fx.stop("caballo_galope"),BasicGame.fx.stop("moto_andando"))},hideBeginningHelpScreen:function(){BasicGame.activeHelpScreen=!1,this.panelPausa.visible=!0,this.btnClosePause.visible=!0,this.btnAudioOn.visible=!0,this.btnAudioOff.visible=!0,this.btnHome.visible=!0,this.btnHelp.visible=!0,this.btnPause.inputEnabled=!0,this.btnOpenPause()},btnOpenPause:function(){if(!BasicGame.activeHelpScreen&&(BasicGame.fx.play("click_GUI"),this.lvlFlowState==this.lvlFlowPlaying))if(this.physics.arcade.isPaused=!this.physics.arcade.isPaused,this.physics.arcade.isPaused)this.showPauseMenu();else switch(this.hidePauseMenu(),this.currentFase){case 3:BasicGame.fx.play("caballo_galope");break;case 2:case 1:BasicGame.fx.play("moto_andando")}},showPauseMenu:function(){this.groupPause.visible=!0,this.groupPauseShowTween.start(),BasicGame.music&&BasicGame.music.pause(),BasicGame.fx.stop("caballo_galope"),BasicGame.fx.stop("moto_andando")},hidePauseMenu:function(){BasicGame.fx.play("click_GUI"),this.groupPause.visible=!1,this.groupPauseHideTween.start(),BasicGame.music&&BasicGame.music.resume(),this.panelTutorialGroup.visible=!1},btnOpenHelp:function(){BasicGame.activeHelpScreen||BasicGame.fx.play("click_GUI"),this.panelTutorialGroup.visible=!0},btnCloseHelp:function(){BasicGame.fx.play("click_GUI"),BasicGame.activeHelpScreen&&this.hideBeginningHelpScreen(),this.panelTutorialGroup.visible=!1},btnHomeOnClick:function(){BasicGame.fx.play("click_GUI"),this.state.start("MainMenu"),BasicGame.music.stop(),BasicGame.fx.stop("caballo_galope"),BasicGame.fx.stop("moto_andando"),BasicGame.lives=3},btnAudioOnClick:function(){BasicGame.fx.play("click_GUI"),this.game.sound.mute=!this.game.sound.mute,localStorage.setItem("muteState",JSON.stringify(this.game.sound.mute)),this.game.sound.mute?(this.btnAudioOn.visible=!1,this.btnAudioOff.visible=!0):(this.btnAudioOn.visible=!0,this.btnAudioOff.visible=!1)},startIntroState:function(){this.cleanFase(),this.blackBackground.reset(),this.lvlFlowState=this.lvlFlowIntro,this.tutorialCyborg.reset(-200,this.transLine.y),this.tutorialCassette.reset(),this.tutorialCyborgTween.start()},startTransformState:function(){if(BasicGame.fx.play("transicion"),console.log("fase "+this.currentFase),this.lvlFlowState==this.lvlFlowGameOver){if(3==BasicGame.lives)this.currentFase=1,BasicGame.music.play(),this.randomLevelsUnlocked=!1;else{switch(this.currentFase){case 3:this.startLevelSpeed=this.fase02LevelMaxSpeed,this.barWolfRect.width=215,this.barWolfHud.updateCrop(),this.barHorseRect.width=215,this.barHorseHud.updateCrop();break;case 2:this.startLevelSpeed=this.fase01LevelMaxSpeed,this.barWolfRect.width=215,this.barWolfHud.updateCrop();break;case 1:this.startLevelSpeed=14}this.levelSpeed=this.startLevelSpeed,BasicGame.music.resume()}this.levelIndex=this.originalLevelIndex,this.cassettesScore=0,this.cassettesPowerBar=0,this.txtScore.text="0"}else this.lvlFlowState==this.lvlFlowIntro?(this.currentFase=1,this.levelIndex=this.originalLevelIndex,this.randomLevelsUnlocked=!1,this.cassettesScore=0,this.cassettesPowerBar=0,this.txtScore.text="0",BasicGame.music.play()):this.currentFase=Math.min(3,this.currentFase+1);switch(this.cleanFase(),this.lvlFlowState=this.lvlFlowTransform,BasicGame.screenFlash.flash(1,500),this.blackBackground.reset(),this.transLine.reset(),this.transLine.scale.y=0,this.transLineTween01.start(),this.currentFase){case 3:this.transLine.animations.play("line3"),this.silhuetteHorse.reset(),this.barWolfRect.width=215,this.barWolfHud.updateCrop();break;case 2:this.transLine.animations.play("line2"),this.silhuetteBike02.reset();break;case 1:this.transLine.animations.play("line1"),this.silhuetteBike01.reset()}this.explotionTransformation.reset(),this.explotionTransformation.animations.play("explo"),this.dashing=!1,this.dashTimer.stop(),BasicGame.fx.stop("caballo_galope"),BasicGame.fx.stop("moto_andando")},startNextFase:function(){this.cleanFase(),this.lvlFlowState=this.lvlFlowPlaying,BasicGame.activeTutorial?(this.showBeginningHelpScreen(),this.showJumpTutorial(),this.levelFirstFloorHeight=704,this.addFloor(-300,this.levelFirstFloorHeight,this.distanceNextLevelSpawn+300)):(this.currentLevel=this.game.cache.getJSON(this.levelsJsonNames[this.levelIndex]),this.parseLevelBlock(this.currentLevel),this.addFloor(-300,this.levelFirstFloorHeight,this.levelSpawnX+400)),this.playerInitialPosition.y=this.levelFirstFloorHeight-400,BasicGame.screenFlash.flash(1,100),this.chaseX=0,this.chaseAngle=0,this.currentPlayer;var a=.05;switch(this.currentFase){case 3:this.backgroundLyrSkyFase03.reset(),this.backgroundLyrAurorasFase03.reset(),this.backgroundLyrAurorasFase03.reset(),this.backgroundLyrMountainsFase03.reset(),this.backgroundLyrGridFase03.reset(),this.backgroundLyrFrontRocksFase03.reset();var b=this.add.sprite(this.playerInitialPosition.x,this.playerInitialPosition.y,"cyborg03");this.physics.enable(b,Phaser.Physics.ARCADE),b.body.gravity.y=this.gravity,this.playerNormalBodySize=new Phaser.Rectangle(150,140,153,160),this.playerDashBodySize=new Phaser.Rectangle(185,185,145,120),b.body.setSize(this.playerNormalBodySize.x,this.playerNormalBodySize.y,this.playerNormalBodySize.width,this.playerNormalBodySize.height),b.animations.add("run",Phaser.Animation.generateFrameNames("CyborgFase03_Fase03_Avanzar_",0,7,"",3),15,!0),b.animations.add("jumpUp",Phaser.Animation.generateFrameNames("CyborgFase03_Fase03_SaltoUP_",0,5,"",3),60,!1).onComplete.add(this.animCompletedPlayer),b.animations.add("jumpIdle",Phaser.Animation.generateFrameNames("CyborgFase03_Fase03_Salto_Loop_",0,14,"",3),60,!0),b.animations.add("jumpDown",Phaser.Animation.generateFrameNames("CyborgFase03_Fase03_Salto_Down_",0,5,"",3),60,!1).onComplete.add(this.animCompletedPlayer),b.animations.add("dashIn",Phaser.Animation.generateFrameNames("CyborgFase03_Fase03_Dash_In_",0,7,"",3),60,!1).onComplete.add(this.animCompletedPlayer,this),b.animations.add("dashLoop",Phaser.Animation.generateFrameNames("CyborgFase03_Fase03_Dash_Loop_",0,7,"",3),60,!0),b.animations.add("dashOut",Phaser.Animation.generateFrameNames("CyborgFase03_Fase03_Dash_Out_",0,7,"",3),60,!1).onComplete.add(this.animCompletedPlayer,this),b.animations.add("death",Phaser.Animation.generateFrameNames("CyborgFase03_Fase03_Muerte_",0,14,"",3),30,!1).onComplete.add(this.animCompletedPlayer,this),this.currentPlayer=b,this.game.camera.follow(this.currentPlayer,Phaser.Camera.FOLLOW_PLATFORMER,.5,a),this.game.camera.deadzone=new Phaser.Rectangle(0,0,this.game.width,0),BasicGame.fx.play("caballo_galope");break;case 2:this.backgroundLyrSkyFase02.reset(),this.backgroundMoonFase02.reset(.5*this.game.width,.85*this.game.height),this.backgroundMoonFase02.originalY=this.backgroundMoonFase02.y,this.backgroundLyrNubeLeftFase02.reset(0,this.game.world.height),this.backgroundLyrNubeRightFase02.reset(this.game.width,this.game.world.height),this.backgroundLyrMountainsFase02.reset(),this.backgroundLyrHorizonteFase02.reset(),this.backgroundLyrFrontRocksFase02.reset();var b=this.add.sprite(this.playerInitialPosition.x,this.playerInitialPosition.y,"cyborg02");this.physics.enable(b,Phaser.Physics.ARCADE),b.body.gravity.y=this.gravity,this.playerNormalBodySize=new Phaser.Rectangle(150,125,80,120),this.playerDashBodySize=new Phaser.Rectangle(218,130,80,120),b.body.setSize(this.playerNormalBodySize.x,this.playerNormalBodySize.y,this.playerNormalBodySize.width,this.playerNormalBodySize.height),b.animations.add("run",Phaser.Animation.generateFrameNames("CyborgFase02_Fase02_Avanzar_",0,7,"",3),60,!0),b.animations.add("jumpUp",Phaser.Animation.generateFrameNames("CyborgFase02_Fase02_SaltoUP_",0,5,"",3),60,!1).onComplete.add(this.animCompletedPlayer),b.animations.add("jumpIdle",Phaser.Animation.generateFrameNames("CyborgFase02_Fase02_SaltoLoop_",0,14,"",3),60,!0),b.animations.add("jumpDown",Phaser.Animation.generateFrameNames("CyborgFase02_Fase02_SaltoDown_",0,5,"",3),60,!1).onComplete.add(this.animCompletedPlayer),b.animations.add("dashIn",Phaser.Animation.generateFrameNames("CyborgFase02_Fase02_Dash_In_",0,7,"",3),60,!1).onComplete.add(this.animCompletedPlayer,this),b.animations.add("dashLoop",Phaser.Animation.generateFrameNames("CyborgFase02_Fase02_Dash_Loop_",0,7,"",3),60,!0),b.animations.add("dashOut",Phaser.Animation.generateFrameNames("CyborgFase02_Fase02_Dash_Out_",0,7,"",3),60,!1).onComplete.add(this.animCompletedPlayer,this),b.animations.add("death",Phaser.Animation.generateFrameNames("CyborgFase02_Fase02_Muerte_",0,14,"",3),30,!1).onComplete.add(this.animCompletedPlayer,this),this.currentPlayer=b,this.game.camera.follow(this.currentPlayer,Phaser.Camera.FOLLOW_PLATFORMER,.5,a),this.game.camera.deadzone=new Phaser.Rectangle(0,100,this.game.width,0),BasicGame.fx.play("moto_andando");break;case 1:this.backgroundLyrSkyFase01.reset(),this.backgroundLyrNubesFase01.reset(),this.backgroundLyrMeteorosFase01.reset(),this.backgroundLyrPlanetasFase01.reset(),this.backgroundLyrFrontRocksFase01.reset();var b=this.add.sprite(this.playerInitialPosition.x,this.playerInitialPosition.y,"cyborg01");this.physics.enable(b,Phaser.Physics.ARCADE),b.body.gravity.y=this.gravity,this.playerNormalBodySize=new Phaser.Rectangle(120,105,180,230),this.playerDashBodySize=new Phaser.Rectangle(150,105,180,230),b.body.setSize(this.playerNormalBodySize.x,this.playerNormalBodySize.y,this.playerNormalBodySize.width,this.playerNormalBodySize.height),b.animations.add("run",Phaser.Animation.generateFrameNames("CyborgFase01_Fase01_Avanzar_",0,7,"",3),60,!0),b.animations.add("jumpUp",Phaser.Animation.generateFrameNames("CyborgFase01_Fase01_SaltoUP_",0,5,"",3),60,!1).onComplete.add(this.animCompletedPlayer,this),b.animations.add("jumpIdle",Phaser.Animation.generateFrameNames("CyborgFase01_Fase01_SaltoLoop_",0,14,"",3),60,!0),b.animations.add("jumpDown",Phaser.Animation.generateFrameNames("CyborgFase01_Fase01_SaltoDown_",0,5,"",3),60,!1).onComplete.add(this.animCompletedPlayer,this),b.animations.add("dashIn",Phaser.Animation.generateFrameNames("CyborgFase01_Fase01_Dash_In_",0,7,"",3),60,!1).onComplete.add(this.animCompletedPlayer,this),b.animations.add("dashLoop",Phaser.Animation.generateFrameNames("CyborgFase01_Fase01_Dash_Loop_",0,7,"",3),60,!0),b.animations.add("dashOut",Phaser.Animation.generateFrameNames("CyborgFase01_Fase01_Dash_Out_",0,7,"",3),60,!1).onComplete.add(this.animCompletedPlayer,this),b.animations.add("death",Phaser.Animation.generateFrameNames("CyborgFase01_Fase01_Muerte_",0,14,"",3),30,!1).onComplete.add(this.animCompletedPlayer,this),this.currentPlayer=b,this.game.camera.follow(this.currentPlayer,Phaser.Camera.FOLLOW_PLATFORMER,.5,a),this.game.camera.deadzone=new Phaser.Rectangle(0,0,this.game.width,0),BasicGame.fx.play("moto_andando")}this.beforeDashLevelSpeed=this.levelSpeed,this.levelSpeedDash=this.levelSpeed+this.dashExtraSpeed,this.currentPlayer.animations.play("run"),this.game.world.bringToTop(this.backgroundLyrNubeLeftFase02),this.game.world.bringToTop(this.backgroundLyrNubeRightFase02),this.game.world.bringToTop(this.floorsGroupFase03),this.game.world.bringToTop(this.floorsGroupFase02),this.game.world.bringToTop(this.floorsGroupFase01),this.game.world.bringToTop(this.enemiesGroup),this.game.world.bringToTop(this.cassettesGroup),this.game.world.bringToTop(this.currentPlayer),this.game.world.bringToTop(this.backgroundLyrFrontRocksFase03),this.game.world.bringToTop(this.backgroundLyrFrontRocksFase02),this.game.world.bringToTop(this.backgroundLyrFrontRocksFase01),this.game.world.bringToTop(BasicGame.screenFlash),this.game.world.bringToTop(this.deathCassettesEmitter),this.game.world.bringToTop(this.bikeParticlesFront),this.game.world.bringToTop(this.bikeParticlesBack),this.game.world.bringToTop(this.horseParticles),this.game.world.bringToTop(this.cassettesParticles),this.game.world.bringToTop(this.warningIconsGroup),BasicGame.activeTutorial&&this.game.world.bringToTop(this.tutorialGroup),
this.game.world.bringToTop(this.groupHudBars),this.game.world.bringToTop(this.iconLives),this.game.world.bringToTop(this.txtLives),this.game.world.bringToTop(this.groupPause),this.game.world.bringToTop(this.panelTutorialGroup),this.game.device.desktop||BasicGame.activeTutorial||(this.clearMobileControlIcons(),this.addMobileControlIcons(),this.game.world.bringToTop(this.controlsGroup)),this.distanceNextLevelSpawn=this.game.world.width},showJumpTutorial:function(){this.tutorialTeachingJump&&this.tutorialJumpIcon.reset(.5*this.game.width,this.transLine.y),this.game.device.desktop?this.tutorialTeachingJump&&this.tutorialUpKey.reset(.5*this.game.width,this.transLine.y):this.tutorialTeachingJump&&this.tutorialMobileJumpButton.reset(.5*this.game.width,this.transLine.y)},hideJumpTutorial:function(){this.tutorialJumpIcon.kill(),this.game.device.desktop?this.tutorialUpKey.kill():this.tutorialMobileJumpButton.kill()},showDoubleJumpTutorial:function(){this.tutorialTeachingJump=!1,this.tutorialTeachingDoubleJump=!0,this.tutorialTeachingDoubleJump&&this.tutorialDoubleJumpIcon.reset(.5*this.game.width,this.transLine.y)},hideDoubleJumpTutorial:function(){this.tutorialDoubleJumpIcon.kill()},showDashTutorial:function(){this.tutorialTeachingDoubleJump=!1,this.tutorialTeachingDash=!0,this.addEnemy(this.currentPlayer.x+350,800),this.tutorialTeachingDash&&this.tutorialDashIcon.reset(.5*this.game.width,this.transLine.y),this.game.device.desktop?this.tutorialTeachingDash&&this.tutorialDashKey.reset(.5*this.game.width,this.transLine.y):this.tutorialTeachingDash&&this.tutorialMobileDashButton.reset(.5*this.game.width,this.transLine.y)},hideDashTutorial:function(){this.tutorialTeachingDash=!1,BasicGame.activeTutorial=!1,this.tutorialDashIcon.kill(),this.game.device.desktop?this.tutorialDashKey.kill():this.tutorialMobileDashButton.kill()},cleanFase:function(){this.game.camera.unfollow(),this.game.camera.setPosition(0,0),this.floorsGroupFase03.callAll("kill"),this.floorsGroupFase02.callAll("kill"),this.floorsGroupFase01.callAll("kill"),this.enemiesGroup.callAll("kill"),this.cassettesGroup.callAll("kill"),this.warningIconsGroup.callAll("kill");for(var a=0;a<this.warningIcons.length;a++){var b=this.warningIcons[a];null!=b.enemy&&(null!=b.enemy.warIcon&&(this.warningIcons[a].enemy.warIcon=null),this.warningIcons[a].enemy=null),b.kill(),this.warningIcons[a]=null}this.warningIcons=[],this.backgroundLyrSkyFase03.kill(),this.backgroundLyrAurorasFase03.kill(),this.backgroundLyrAurorasFase03.kill(),this.backgroundLyrMountainsFase03.kill(),this.backgroundLyrGridFase03.kill(),this.backgroundLyrFrontRocksFase03.kill(),this.backgroundLyrSkyFase02.kill(),this.backgroundMoonFase02.kill(),this.backgroundLyrNubeLeftFase02.kill(),this.backgroundLyrNubeRightFase02.kill(),this.backgroundLyrMountainsFase02.kill(),this.backgroundLyrHorizonteFase02.kill(),this.backgroundLyrFrontRocksFase02.kill(),this.backgroundLyrSkyFase01.kill(),this.backgroundLyrNubesFase01.kill(),this.backgroundLyrMeteorosFase01.kill(),this.backgroundLyrPlanetasFase01.kill(),this.backgroundLyrFrontRocksFase01.kill(),this.blackBackground.kill(),this.silhuetteBike01.kill(),this.silhuetteBike02.kill(),this.silhuetteHorse.kill(),this.explotionTransformation.kill(),this.transLine.kill(),null!=this.currentPlayer&&this.currentPlayer.destroy(),BasicGame.activeTutorial&&(this.tutorialCyborg.kill(),this.tutorialCassette.kill(),this.tutorialJumpIcon.kill(),this.tutorialDoubleJumpIcon.kill(),this.tutorialDashIcon.kill(),this.game.device.desktop?(this.tutorialUpKey.kill(),this.tutorialDashKey.kill()):(this.tutorialMobileJumpButton.kill(),this.tutorialMobileDashButton.kill())),this.clearMobileControlIcons()},onTap:function(a,b){this.physics.arcade.isPaused||a.screenY<250||(a.worldX>.5*this.game.width?this.pressedplayerDash=!0:this.pressedJump=!0)},onRelease:function(a,b){this.physics.arcade.isPaused||a.screenY<250||a.worldX>.5*this.game.width||(this.pressedJump=!1)},jumpStart:function(){this.pressedJump=!0},jumpEnd:function(){this.pressedJump=!1},parseLevelBlock:function(a){var b=a.layers[0];this.levelFirstFloorHeight=null;for(var c=0;c<b.objects.length;c++){var d=b.objects[c];if(d.gid)switch(d.gid){case 1:this.addCassette(d.x+this.levelSpawnX,d.y);break;case 2:this.addEnemy(d.x+this.levelSpawnX,d.y)}else this.addFloor(d.x+this.levelSpawnX,d.y,d.width),null==this.levelFirstFloorHeight&&(this.levelFirstFloorHeight=d.y)}},addFloorTiles:function(){switch(this.currentFase){case 3:var a=this.floorsGroupFase03.create(0,0,"fase03","Plataforma01a");a.animations.add("block01b",["Plataforma01b"],60,!1),a.animations.add("block02b",["Plataforma02b"],60,!1),a.animations.add("block03b",["Plataforma03b"],60,!1);break;case 2:var a=this.floorsGroupFase02.create(0,0,"fase02","Plataforma01a");a.animations.add("block01b1",["Plataforma01b1"],60,!1),a.animations.add("block02b1",["Plataforma02b1"],60,!1),a.animations.add("block03b1",["Plataforma03b1"],60,!1),a.animations.add("block01b2",["Plataforma01b2"],60,!1),a.animations.add("block02b2",["Plataforma02b2"],60,!1),a.animations.add("block03b2",["Plataforma03b2"],60,!1),a.animations.add("block01b3",["Plataforma01b3"],60,!1),a.animations.add("block02b3",["Plataforma02b3"],60,!1),a.animations.add("block03b3",["Plataforma03b3"],60,!1);break;case 1:var a=this.floorsGroupFase01.create(0,0,"fase01","Plataforma01a");a.animations.add("block01b1",["Plataforma01b1"],60,!1),a.animations.add("block02b1",["Plataforma02b1"],60,!1),a.animations.add("block03b1",["Plataforma03b1"],60,!1),a.animations.add("block01b2",["Plataforma01b2"],60,!1),a.animations.add("block02b2",["Plataforma02b2"],60,!1),a.animations.add("block03b2",["Plataforma03b2"],60,!1),a.animations.add("block01b3",["Plataforma01b3"],60,!1),a.animations.add("block02b3",["Plataforma02b3"],60,!1),a.animations.add("block03b3",["Plataforma03b3"],60,!1)}return a.animations.add("block01a",["Plataforma01a"],60,!1),a.animations.add("block01c",["Plataforma01c"],60,!1),a.animations.add("block02a",["Plataforma02a"],60,!1),a.animations.add("block02c",["Plataforma02c"],60,!1),a.animations.add("block03a",["Plataforma03a"],60,!1),a.animations.add("block03c",["Plataforma03c"],60,!1),a.body.immovable=!0,a.kill(),a},addFloor:function(a,b,c){length=Math.max(c,900);for(var d,e=Math.ceil(3*Math.random()),f=0,g=0;g<3;g++)switch(g){case 0:switch(this.currentFase){case 3:d=this.floorsGroupFase03.getFirstDead();break;case 2:d=this.floorsGroupFase02.getFirstDead();break;case 1:d=this.floorsGroupFase01.getFirstDead()}switch(null==d&&(d=this.addFloorTiles()),d.reset(a+f,b),d.body.setSize(350,150,50,53),e){case 1:d.play("block01a");break;case 2:d.play("block02a");break;case 3:d.play("block03a")}f+=d.width;break;case 1:for(var h=length-800,i=Math.floor(h/100),j=0;j<i;j++)switch(this.currentFase){case 3:switch(d=this.floorsGroupFase03.getFirstDead(),null==d&&(d=this.addFloorTiles()),d.reset(a+f,b),d.body.setSize(100,150,0,53),e){case 1:d.play("block01b");break;case 2:d.play("block02b");break;case 3:d.play("block03b")}f+=d.width;break;case 2:d=this.floorsGroupFase02.getFirstDead(),null==d&&(d=this.addFloorTiles()),d.reset(a+f,b),d.body.setSize(100,150,0,53);var k=Math.ceil(3*Math.random());switch(e){case 1:d.play("block01b"+k);break;case 2:d.play("block02b"+k);break;case 3:d.play("block03b"+k)}f+=d.width;break;case 1:d=this.floorsGroupFase01.getFirstDead(),null==d&&(d=this.addFloorTiles()),d.reset(a+f,b),d.body.setSize(100,150,0,53);var k=Math.ceil(3*Math.random());switch(e){case 1:d.play("block01b"+k);break;case 2:d.play("block02b"+k);break;case 3:d.play("block03b"+k)}f+=d.width}break;case 2:switch(this.currentFase){case 3:d=this.floorsGroupFase03.getFirstDead();break;case 2:d=this.floorsGroupFase02.getFirstDead();break;case 1:d=this.floorsGroupFase01.getFirstDead()}switch(null==d&&(d=this.addFloorTiles()),d.reset(a+f,b),d.body.setSize(350,150,0,53),e){case 1:d.play("block01c");break;case 2:d.play("block02c");break;case 3:d.play("block03c")}f+=d.width}},addEnemy:function(a,b){var c=this.enemiesGroup.getFirstDead();null==c&&(c=this.addEnemyToGroup()),c.play("idleLoop"),c.reset(a,b-c.height),c.x<=BasicGame.maxDistanceToPlayer&&this.addWarningIcon(c.y,c)},addEnemyToGroup:function(){var a=this.enemiesGroup.create(0,0,"enemy");return a.animations.add("idleLoop",Phaser.Animation.generateFrameNames("Enemigo01_Enemigo01_IdleLoop_",0,26,"",3),60,!0),a.animations.add("death",Phaser.Animation.generateFrameNames("Enemigo01_Enemigo01_Muerte_",0,17,"",3),60,!1).onComplete.add(this.animCompletedEnemy),a.body.setSize(95,144,101,75),a.kill(),a},addWarningIcon:function(a,b){var c=this.warningIconsGroup.getFirstDead();null==c&&(c=this.addWarningIconToGroup()),c.reset(this.game.width-100,a+100),c.enemy=b,b.warIcon=c,this.warningIcons.push(c)},addWarningIconToGroup:function(){var a=this.warningIconsGroup.create(0,0,"iconWarning");return a.anchor.set(.5,0),a.kill(),a},addCassette:function(a,b){var c=this.cassettesGroup.getFirstDead();null==c&&(c=this.addCassetteToGroup()),c.reset(a,b-c.height)},addCassetteToGroup:function(){var a=this.cassettesGroup.create(0,0,"HUD","cassettes");return a.kill(),a},update:function(){this.physics.arcade.isPaused||this.lvlFlowState==this.lvlFlowPlaying&&this.updatePlayingState()},updatePlayingState:function(){var a;switch(this.levelSpeed+=this.levelAcceleration,this.currentFase){case 3:a=Math.min(this.levelSpeed,this.fase03LevelMaxSpeed),this.dashing&&(a=this.levelSpeed),this.floorsGroupFase03.forEachAlive(function(b){b.body.position.x-=a,b.body.position.x<-b.width&&b.kill()});break;case 2:a=Math.min(this.levelSpeed,this.fase02LevelMaxSpeed),this.dashing&&(a=this.levelSpeed),this.floorsGroupFase02.forEachAlive(function(b){b.body.position.x-=a,b.body.position.x<-b.width&&b.kill()});break;case 1:a=Math.min(this.levelSpeed,this.fase01LevelMaxSpeed),this.dashing&&(a=this.levelSpeed),this.floorsGroupFase01.forEachAlive(function(b){b.body.position.x-=a,b.body.position.x<-b.width&&b.kill()})}BasicGame.activeTutorial||this.enemiesGroup.forEachAlive(function(b){b.body.position.x-=a,null==b.warIcon&&b.x<=BasicGame.maxDistanceToPlayer&&this.addWarningIcon(b.y,b),b.body.position.x<-b.width&&b.kill()},this);for(var b=0;b<this.warningIcons.length;b++){var c=this.warningIcons[b];if(null!=c.enemy&&c.enemy.alive&&c.enemy.x<=this.game.width+BasicGame.addDistanceToFOV||null!=c.enemy&&!c.enemy.alive){c.enemy.warIcon=null,c.enemy=null,c.kill(),this.warningIcons.slice(this.warningIcons.indexOf(c),1);break}}if(this.cassettesGroup.forEachAlive(function(b){b.body.position.x-=a,b.body.position.x<-b.width&&b.kill()}),this.distanceNextLevelSpawn-=a,this.distanceNextLevelSpawn<this.levelSpawnX&&(this.distanceNextLevelSpawn=this.game.world.width,BasicGame.activeTutorial?(console.log("spawn floor"),this.addFloor(this.levelSpawnX,this.levelFirstFloorHeight,this.distanceNextLevelSpawn)):(this.randomLevelsUnlocked?this.levelIndex=Math.floor(Math.random()*(this.levelsJsonNames.length-1-this.minimumIndex+1))+this.minimumIndex:(this.levelIndex++,this.levelIndex>=this.minimumIndex&&(this.levelIndex=this.minimumIndex,this.randomLevelsUnlocked=!0)),this.currentLevel=this.game.cache.getJSON(this.levelsJsonNames[this.levelIndex]),this.parseLevelBlock(this.currentLevel))),this.currentPlayer.alive){switch(this.touchingFloor=!1,this.currentFase){case 3:this.game.physics.arcade.collide(this.currentPlayer,this.floorsGroupFase03,this.playerCollidePlatforms,null,this);break;case 2:this.game.physics.arcade.collide(this.currentPlayer,this.floorsGroupFase02,this.playerCollidePlatforms,null,this);break;case 1:this.game.physics.arcade.collide(this.currentPlayer,this.floorsGroupFase01,this.playerCollidePlatforms,null,this)}this.game.physics.arcade.overlap(this.currentPlayer,this.enemiesGroup,this.playerCollideEnemy,null,this),this.game.physics.arcade.overlap(this.currentPlayer,this.cassettesGroup,this.playerCollideCassette,null,this)}switch(this.currentPlayer.alive&&this.playerPhysics(),this.currentFase){case 3:this.backgroundLyrSkyFase03.tilePosition.x-=.01*this.levelSpeed,this.backgroundLyrGridFase03.tilePosition.x-=.2*this.levelSpeed,this.backgroundLyrAurorasFase03.tilePosition.x-=.15*this.levelSpeed,this.backgroundLyrMountainsFase03.tilePosition.x-=.04*this.levelSpeed,this.backgroundLyrFrontRocksFase03.tilePosition.x-=1.25*this.levelSpeed,this.backgroundLyrSkyFase03.y=Math.round(.2*this.game.camera.y),this.backgroundLyrGridFase03.y=Math.round(this.backgroundLyrGridFase03.originalY+.2*this.game.camera.y),this.backgroundLyrMountainsFase03.y=Math.round(.1*this.game.camera.y),this.backgroundLyrFrontRocksFase03.y=Math.round(this.backgroundLyrFrontRocksFase03.originalY+.1*this.game.camera.y);break;case 2:this.backgroundLyrHorizonteFase02.tilePosition.x-=.9*this.levelSpeed,this.backgroundLyrMountainsFase02.tilePosition.x-=.08*this.levelSpeed,this.backgroundLyrFrontRocksFase02.tilePosition.x-=1.25*this.levelSpeed,this.backgroundLyrMountainsFase02.y=Math.round(.1*this.game.camera.y),this.backgroundLyrHorizonteFase02.y=Math.round(this.backgroundLyrHorizonteFase02.originalY+.2*this.game.camera.y),this.backgroundLyrFrontRocksFase02.y=Math.round(this.backgroundLyrFrontRocksFase02.originalY+.1*this.game.camera.y),this.backgroundMoonFase02.y=this.backgroundMoonFase02.originalY+.2*this.game.camera.y;break;case 1:this.backgroundLyrSkyFase01.tilePosition.x-=.01*this.levelSpeed,this.backgroundLyrNubesFase01.tilePosition.x-=.5*this.levelSpeed,this.backgroundLyrMeteorosFase01.tilePosition.x-=3*this.levelSpeed,this.backgroundLyrPlanetasFase01.tilePosition.x-=.02*this.levelSpeed,this.backgroundLyrFrontRocksFase01.tilePosition.x-=1*this.levelSpeed,this.backgroundLyrPlanetasFase01.y=Math.round(this.backgroundLyrPlanetasFase01.originalY+.1*this.game.camera.y),this.backgroundLyrMeteorosFase01.y=Math.round(this.backgroundLyrMeteorosFase01.originalY+.1*this.game.camera.y),this.backgroundLyrNubesFase01.y=Math.round(this.backgroundLyrNubesFase01.originalY+.2*this.game.camera.y),this.backgroundLyrFrontRocksFase01.y=Math.round(this.backgroundLyrFrontRocksFase01.originalY+.1*this.game.camera.y)}},playerPhysics:function(){if(this.chaseAngle+=.025,this.chaseX=this.playerInitialPosition.x+30*Math.sin(this.chaseAngle),this.currentPlayer.body.position.x=this.chaseX,this.pressedJump){var a;this.jumpInProgress||this.jumpsAvailables>0&&(this.jumpInProgress=!0,this.touchingFloor=!1,a=this.time.events.add(this.jumpTime,function(){this.jumpInProgress=!1,this.pressedJump=!1},this),this.jumpsAvailables--,BasicGame.activeTutorial&&(this.tutorialTeachingJump?(this.hideJumpTutorial(),this.showDoubleJumpTutorial()):this.tutorialTeachingDoubleJump&&this.jumpsAvailables<=0&&(this.hideDoubleJumpTutorial(),this.showDashTutorial())),this.dashing&&this.playDashEnd())}else a&&a.stop(),this.jumpInProgress=!1;this.jumpInProgress&&(this.currentPlayer.body.velocity.y=this.jumpSpeed);var b;if(!this.dashing&&this.canDash&&(this.playerDashButton.downDuration(1)||this.pressedplayerDash)&&(this.playerDash(),b=this.time.events.add(this.nextDashTime,function(){this.nextDashTime=this.nextDashTime+this.nextDashTimeAdd,this.canDash=!0,this.jumpsAvailables=1},this),BasicGame.activeTutorial&&this.tutorialTeachingDash&&(this.hideDashTutorial(),this.addMobileControlIcons())),this.pressedplayerDash=!1,this.dashing?"dashLoop"!=this.currentPlayer.animations.currentAnim.name&&"dashIn"!=this.currentPlayer.animations.currentAnim.name&&"dashOut"!=this.currentPlayer.animations.currentAnim.name&&(this.currentPlayer.animations.play("dashIn"),BasicGame.fx.play("dash")):this.currentPlayer.body.velocity.y<0?"jumpUp"!=this.currentPlayer.animations.currentAnim.name&&"jumpIdle"!=this.currentPlayer.animations.currentAnim.name&&(this.currentPlayer.animations.play("jumpUp"),3!=this.currentFase?BasicGame.fx.play("salto_moto"):BasicGame.fx.play("caballo_salto")):this.touchingFloor?"jumpUp"!=this.currentPlayer.animations.currentAnim.name&&"jumpIdle"!=this.currentPlayer.animations.currentAnim.name||"jumpDown"!=this.currentPlayer.animations.currentAnim.name&&this.currentPlayer.animations.play("jumpDown"):"jumpIdle"!=this.currentPlayer.animations.currentAnim.name&&this.currentPlayer.animations.play("jumpIdle"),this.currentPlayer.body.y>this.game.world.height-.85*this.currentPlayer.body.height&&this.killPlayer(),BasicGame.FXEnabled)switch(this.currentFase){case 3:this.bikeParticlesInterval--,this.bikeParticlesInterval<0&&(this.horseParticles.x=this.currentPlayer.body.x,this.horseParticles.y=this.currentPlayer.body.y+.5*this.currentPlayer.body.height,this.horseParticles.emitParticle(),this.bikeParticlesInterval=this.bikeParticlesInitialInterval);break;case 2:this.touchingFloor&&(this.bikeParticlesInterval--,this.bikeParticlesInterval<0&&(this.bikeParticlesFront.x=this.currentPlayer.body.x+200,this.bikeParticlesFront.y=this.currentPlayer.body.y+125,this.bikeParticlesFront.emitParticle(),this.bikeParticlesBack.x=this.currentPlayer.body.x+15,this.bikeParticlesBack.y=this.currentPlayer.body.y+125,this.bikeParticlesBack.emitParticle(),this.bikeParticlesInterval=this.bikeParticlesInitialInterval));break;case 1:this.touchingFloor&&(this.bikeParticlesInterval--,this.bikeParticlesInterval<0&&(this.bikeParticlesFront.x=this.currentPlayer.body.x+150,this.bikeParticlesFront.y=this.currentPlayer.body.y+100,this.bikeParticlesFront.emitParticle(),this.bikeParticlesBack.x=this.currentPlayer.body.x+25,this.bikeParticlesBack.y=this.currentPlayer.body.y+100,this.bikeParticlesBack.emitParticle(),this.bikeParticlesInterval=this.bikeParticlesInitialInterval))}},animCompletedPlayer:function(a,b){"jumpUp"==b.name&&a.animations.play("jumpIdle"),"jumpDown"==b.name&&a.animations.play("run"),"dashIn"==b.name&&a.animations.play("dashLoop"),"dashOut"==b.name&&(a.animations.play("run"),this.endDash()),"death"==b.name&&a.kill()},animCompletedEnemy:function(a,b){"death"==b.name&&a.kill()},playerDash:function(){this.beforeDashLevelSpeed=this.levelSpeed,this.levelSpeed=this.levelSpeedDash,this.canDash=!1,this.dashing=!0,this.dashTimer.add(this.dashTime,this.playDashEnd,this),this.dashTimer.start(),this.currentPlayer.body.velocity.y=0,this.currentPlayer.body.gravity.y=0,this.currentPlayer.body.setSize(this.playerDashBodySize.x,this.playerDashBodySize.y,this.playerDashBodySize.width,this.playerDashBodySize.height)},playDashEnd:function(){"dashOut"!=this.currentPlayer.animations.currentAnim.name&&this.currentPlayer.animations.play("dashOut")},endDash:function(){this.levelSpeed=this.beforeDashLevelSpeed,this.dashing=!1,this.currentPlayer.body.gravity.y=this.gravity,this.currentPlayer.body.setSize(this.playerNormalBodySize.x,this.playerNormalBodySize.y,this.playerNormalBodySize.width,this.playerNormalBodySize.height),this.dashTimer.stop()},playerCollideEnemy:function(a,b){"death"!=b.animations.currentAnim.name&&(this.dashing?(b.play("death"),BasicGame.fx.play("muerte_enemigo"),this.addScore(25)):this.killPlayer())},playerCollidePlatforms:function(a,b){a.y+.5*a.height<b.y?(this.jumpsAvailables=this.jumpsAvailablesOriginal,this.canDash=!0,this.nextDashTime=this.nextDashOriginalTime,this.touchingFloor=!0):this.killPlayer()},playerCollideCassette:function(a,b){BasicGame.FXEnabled&&this.cassettesParticles.emitParticle(b.x,b.y),b.kill(),this.addScore(1)},addScore:function(a){switch(this.cassettesScore+=a,this.cassettesPowerBar+=a,this.txtScore.text=""+this.cassettesScore,BasicGame.fx.play("cassette"),this.currentFase){case 3:break;case 2:this.cassettesPowerBar<this.horseLimit?(this.barHorseRect.width=this.cassettesPowerBar*(215/this.wolfLimit),this.barHorseHud.updateCrop()):(this.barHorseRect.width=215,this.barHorseHud.updateCrop(),this.startTransformState(),this.cassettesPowerBar=0);break;case 1:this.cassettesPowerBar<this.wolfLimit?(this.barWolfRect.width=this.cassettesScore*(215/this.wolfLimit),this.barWolfHud.updateCrop()):(this.startTransformState(),this.barWolfRect.width=215,this.barWolfHud.updateCrop(),this.cassettesPowerBar=0)}},killPlayer:function(){this.deathTimer=this.time.events.add(500,this.levelOver,this),this.deathCassettesEmitter.x=this.currentPlayer.x+.5*this.currentPlayer.width,this.deathCassettesEmitter.y=this.currentPlayer.y+.5*this.currentPlayer.height,this.deathCassettesEmitter.start(!0,1e3,null,20),BasicGame.fx.play("muerte_jugador"),this.currentPlayer.alive=!1,"death"!=this.currentPlayer.animations.currentAnim.name&&this.currentPlayer.animations.play("death"),this.currentPlayer.body.gravity.y=0,this.currentPlayer.body.velocity.y=0,this.levelSpeed=0,this.dashing=!1,this.dashTimer.stop(),BasicGame.fx.stop("caballo_galope"),BasicGame.fx.stop("moto_andando")},levelOver:function(){switch(this.lvlFlowState=this.lvlFlowGameOver,BasicGame.fx.stop("caballo_galope"),BasicGame.fx.stop("moto_andando"),BasicGame.lives){case 3:BasicGame.life01Score=this.cassettesScore,this.state.restart();break;case 2:BasicGame.life02Score=this.cassettesScore,this.state.restart();break;case 1:BasicGame.life03Score=this.cassettesScore,BasicGame.music.stop(),this.state.start("GameEnd")}BasicGame.lives--,this.txtLives.text=BasicGame.lives<0?0:BasicGame.lives},render:function(){},renderGroup:function(a){this.game.debug.body(a)}},BasicGame.GameEnd=function(a){},BasicGame.GameEnd.prototype={create:function(){if(this.bg=this.add.tileSprite(0,0,this.game.width,this.game.height,"EndLevelScreen","fondoTileable"),this.luzSuelo=this.add.image(.5*this.game.width,this.game.height,"EndLevelScreen","Luzsuelo"),this.luzSuelo.anchor.set(.5,1),this.column01=this.add.image(.5*this.game.width-300,this.game.height-180,"EndLevelScreen","columnas"),this.column01.anchor.set(1,1),this.column02=this.add.image(.5*this.game.width+250,this.game.height-180,"EndLevelScreen","columnas"),this.column02.anchor.set(0,1),this.enemy=this.add.image(.5*this.game.width,0,"EndLevelScreen","plataformaBoss"),this.enemy.anchor.set(.5,0),this.titanJaula01=this.add.image(.5*this.game.width+200,0,"EndLevelScreen","TitanJaula02"),this.titanJaula01.anchor.set(.5,0),this.titanJaula02=this.add.image(.5*this.game.width-300,0,"EndLevelScreen","TitanJaula01"),this.titanJaula02.anchor.set(.5,0),this.mono=this.add.image(.5*this.game.width+150,20,"EndLevelScreen","mono"),this.mono.anchor.set(0,0),this.cyborgSuelo=this.add.image(.5*this.game.width-150,this.game.height-50,"EndLevelScreen","cyborgSuelo"),this.cyborgSuelo.anchor.set(0,1),this.cassetteRoto=this.add.image(.5*this.game.width-400,this.game.height,"EndLevelScreen","cassetteRoto"),this.cassetteRoto.anchor.set(0,1),this.panelLife01=this.add.image(0,0,"EndLevelScreen","contenedorSmall"),this.textPosLife01=this.add.bitmapText(20,20,"Commodore","1",48),this.textScoreLife01=this.add.bitmapText(225,20,"Commodore",""+BasicGame.life01Score,48),this.groupPanelLife01=this.add.group(),this.groupPanelLife01.add(this.panelLife01),this.groupPanelLife01.add(this.textPosLife01),this.groupPanelLife01.add(this.textScoreLife01),this.groupPanelLife01.x=.5*this.game.width-.5*this.panelLife01.width,this.groupPanelLife01.y=-100,this.panelLife02=this.add.image(0,0,"EndLevelScreen","contenedorSmall"),this.textPosLife02=this.add.bitmapText(20,20,"Commodore","2",48),this.textScoreLife02=this.add.bitmapText(225,20,"Commodore",""+BasicGame.life02Score,48),this.groupPanelLife02=this.add.group(),this.groupPanelLife02.add(this.panelLife02),this.groupPanelLife02.add(this.textPosLife02),this.groupPanelLife02.add(this.textScoreLife02),this.groupPanelLife02.x=.5*this.game.width-.5*this.panelLife02.width,this.groupPanelLife02.y=-100,this.panelLife03=this.add.image(0,0,"EndLevelScreen","contenedorSmall"),this.textPosLife03=this.add.bitmapText(20,20,"Commodore","3",48),this.textScoreLife03=this.add.bitmapText(225,20,"Commodore",""+BasicGame.life03Score,48),this.groupPanelLife03=this.add.group(),this.groupPanelLife03.add(this.panelLife03),this.groupPanelLife03.add(this.textPosLife03),this.groupPanelLife03.add(this.textScoreLife03),this.groupPanelLife03.x=.5*this.game.width-.5*this.panelLife01.width,this.groupPanelLife03.y=-100,BasicGame.screenFlash=BasicGame.juicy.createScreenFlash(),BasicGame.screenFlash.fixedToCamera=!0,this.add.existing(BasicGame.screenFlash),BasicGame.screenFlash.flash(1,150),BasicGame.lives>0)this.PanelLife01Tween=this.add.tween(this.groupPanelLife01),this.PanelLife01Tween.to({y:175},1e3,Phaser.Easing.Elastic.Out,!0,250),BasicGame.lives<2&&(this.PanelLife02Tween=this.add.tween(this.groupPanelLife02),this.PanelLife02Tween.to({y:255},1e3,Phaser.Easing.Elastic.Out,!0,250)),this.btnContinue=this.add.button(this.game.width-50,this.game.height-50,"EndLevelScreen",this.btnContinueClick,this,"btn_NextOver","btn_NextNormal","btn_NextDown","btn_NextNormal"),this.btnContinue.anchor.set(1,1),this.timeCountDown=10,this.txtTimeCounter=this.add.bitmapText(.5*this.game.width,-80,"Commodore",""+this.timeCountDown,64),this.txtTimeCounterTween=this.add.tween(this.txtTimeCounter),this.txtTimeCounterTween.to({y:80},1e3,Phaser.Easing.Bounce.Out,!0,250).onComplete.add(function(){this.playerDashButton=this.input.keyboard.addKey(Phaser.Keyboard.RIGHT),this.input.keyboard.addKeyCapture([Phaser.Keyboard.UP,Phaser.Keyboard.RIGHT]),this.playerDashButton.onDown.add(this.btnContinueClick,this),this.time.events.repeat(Phaser.Timer.SECOND,this.timeCountDown,function(){this.timeCountDown--,this.timeCountDown>0?this.txtTimeCounter.text=""+this.timeCountDown:this.btnContinueClick()},this)},this);else{var a=BasicGame.life01Score+BasicGame.life02Score+BasicGame.life03Score;this.panelFinal=this.add.image(0,0,"EndLevelScreen","contenedorFinal"),this.textPanelFinal=this.add.bitmapText(.5*this.panelFinal.width+35,35,"Commodore",""+a,64),this.groupPanelFinal=this.add.group(),this.groupPanelFinal.add(this.panelFinal),this.groupPanelFinal.add(this.textPanelFinal),this.groupPanelFinal.x=.5*this.game.width-.5*this.panelFinal.width,this.groupPanelFinal.y=-100;var b=JSON.parse(localStorage.getItem("podio01Value")),c=JSON.parse(localStorage.getItem("podio02Value")),d=JSON.parse(localStorage.getItem("podio03Value"));a>b?(d=c,localStorage.setItem("podio03Value",d),c=b,localStorage.setItem("podio02Value",c),b=a,localStorage.setItem("podio01Value",a)):a>c?(d=c,localStorage.setItem("podio03Value",d),c=a,localStorage.setItem("podio02Value",a)):a>d&&(d=a,localStorage.setItem("podio03Value",a)),this.panelPodio=this.add.image(0,0,"EndLevelScreen","contenedorPodio"),this.textPodio01=this.add.bitmapText(.5*this.panelPodio.width+35,35,"Commodore",b,48),this.textPodio02=this.add.bitmapText(.5*this.panelPodio.width+35,110,"Commodore",c,48),this.textPodio03=this.add.bitmapText(.5*this.panelPodio.width+35,190,"Commodore",d,48),a==b&&this.textPodio01.color,this.groupPodio=this.add.group(),this.groupPodio.add(this.panelPodio),this.groupPodio.add(this.textPodio01),this.groupPodio.add(this.textPodio02),this.groupPodio.add(this.textPodio03),this.groupPodio.x=.5*this.game.width-.5*this.panelPodio.width,this.groupPodio.y=-600,this.PanelLife01Tween=this.add.tween(this.groupPanelLife01),this.PanelLife01Tween.to({y:5},1e3,Phaser.Easing.Elastic.Out,!0,250),this.PanelLife02Tween=this.add.tween(this.groupPanelLife02),this.PanelLife02Tween.to({y:85},1e3,Phaser.Easing.Elastic.Out,!0,250),this.PanelLife03Tween=this.add.tween(this.groupPanelLife03),this.PanelLife03Tween.to({y:165},1e3,Phaser.Easing.Elastic.Out,!0,250),this.panelFinalTween=this.add.tween(this.groupPanelFinal),this.panelFinalTween.to({y:225},1e3,Phaser.Easing.Bounce.Out,!0,250),this.panelPodioTween=this.add.tween(this.groupPodio),this.panelPodioTween.to({y:335},1e3,Phaser.Easing.Bounce.Out,!0,250),this.btnRestart=this.add.button(this.game.width-5,this.game.height-50,"EndLevelScreen",this.btnContinueClick,this,"btn_ResetOver","btn_ResetNormal","btn_ResetDown","btn_ResetNormal"),this.btnRestart.anchor.set(1,1),this.btnHome=this.add.button(this.game.width-5,this.game.height-170,"HUD",this.btnHomeClick,this,"btn_homeOver","btn_homeNormal","btn_homeDoen","btn_homeNormal"),this.btnHome.anchor.set(1,1),BasicGame.lives=3,this.playerDashButton=this.input.keyboard.addKey(Phaser.Keyboard.RIGHT),this.input.keyboard.addKeyCapture([Phaser.Keyboard.UP,Phaser.Keyboard.RIGHT]),this.playerDashButton.onDown.add(this.btnContinueClick,this)}BasicGame.menuMusic.play("introMusic")},btnContinueClick:function(){this.state.start("Game"),BasicGame.menuMusic.stop()},btnHomeClick:function(){this.state.start("MainMenu"),BasicGame.menuMusic.stop()},update:function(){}},Phaser.Plugin.Juicy=function(a){Phaser.Plugin.call(this,a),this._boundsCache=Phaser.Utils.extend(!1,{},this.game.world.bounds),this._shakeWorldMax=20,this._shakeWorldTime=0,this._trailCounter=0,this._overScales={},this._overScalesCounter=0},Phaser.Plugin.Juicy.prototype=Object.create(Phaser.Plugin.prototype),Phaser.Plugin.Juicy.prototype.constructor=Phaser.Plugin.Juicy,Phaser.Plugin.Juicy.ScreenFlash=function(a,b){b=b||"white";var c=a.add.bitmapData(a.width,a.height);c.ctx.fillStyle=b,c.ctx.fillRect(0,0,a.width,a.height),Phaser.Sprite.call(this,a,0,0,c),this.alpha=0},Phaser.Plugin.Juicy.ScreenFlash.prototype=Object.create(Phaser.Sprite.prototype),Phaser.Plugin.Juicy.ScreenFlash.prototype.constructor=Phaser.Plugin.Juicy.ScreenFlash,Phaser.Plugin.Juicy.ScreenFlash.prototype.flash=function(a,b){a=a||1,b=b||100;var c=this.game.add.tween(this).to({alpha:a},b,Phaser.Easing.Bounce.InOut,!0,0,0,!0);c.onComplete.add(function(){this.alpha=0},this)},Phaser.Plugin.Juicy.ScreenFlash.prototype.fadeToWhite=function(a,b){a=a||1,b=b||100;this.game.add.tween(this).to({alpha:a},b,Phaser.Easing.Linear.In,!0,0,0,!1)},Phaser.Plugin.Juicy.Trail=function(a,b,c){Phaser.Graphics.call(this,a,0,0),this.target=null,this.trailLength=b||100,this.trailWidth=15,this.trailScaling=!1,this.trailColor=c||16777215,this._segments=[],this._verts=[],this._indices=[]},Phaser.Plugin.Juicy.Trail.prototype=Object.create(Phaser.Graphics.prototype),Phaser.Plugin.Juicy.Trail.prototype.constructor=Phaser.Plugin.Juicy.Trail,Phaser.Plugin.Juicy.Trail.prototype.update=function(){this.target&&(this.x=this.target.x,this.y=this.target.y,this.addSegment(this.target.x,this.target.y),this.redrawSegments(this.target.x,this.target.y))},Phaser.Plugin.Juicy.Trail.prototype.addSegment=function(a,b){for(var c;this._segments.length>this.trailLength;)c=this._segments.shift();c||(c=new Phaser.Point),c.x=a,c.y=b,this._segments.push(c)},Phaser.Plugin.Juicy.Trail.prototype.redrawSegments=function(a,b){this.clear();var c,d,e,f,g=0,h=0,i=0;this._verts.length!==4*(this._segments.length-1)&&(this._verts=[]);for(var j=0;j<this._segments.length;++j){if(c=this._segments[j],d){f=Math.atan2(c.y-d.y,c.x-d.x)+Math.PI/2,h=Math.sin(f),i=Math.cos(f);for(var k=0;k<2;++k)e=(-.5+k/1)*this.trailWidth,this.trailScaling&&(e*=j/this._segments.length),this._verts[g++]=c.x+i*e-a,this._verts[g++]=c.y+h*e-b}d=c.copyTo({})}if(this._verts.length>=8){for(var l=0;l<this._verts.length;l++)this._indices[6*l+0]=2*l+0,this._indices[6*l+1]=2*l+1,this._indices[6*l+2]=2*l+2,this._indices[6*l+3]=2*l+1,this._indices[6*l+4]=2*l+2,this._indices[6*l+5]=2*l+3;this.beginFill(this.trailColor),this.drawTriangles(this._verts,this._indices),this.endFill()}},Phaser.Plugin.Juicy.prototype.shake=function(a,b){this._shakeWorldTime=a||20,this._shakeWorldMax=b||20,this.game.world.setBounds(this._boundsCache.x-this._shakeWorldMax,this._boundsCache.y-this._shakeWorldMax,this._boundsCache.width+this._shakeWorldMax,this._boundsCache.height+this._shakeWorldMax)},Phaser.Plugin.Juicy.prototype.createScreenFlash=function(a){return new Phaser.Plugin.Juicy.ScreenFlash(this.game,a)},Phaser.Plugin.Juicy.prototype.createTrail=function(a,b){return new Phaser.Plugin.Juicy.Trail(this.game,a,b)},Phaser.Plugin.Juicy.prototype.overScale=function(a,b,c){b=b||1.5;var d=this._overScalesCounter++;c=c||new Phaser.Point(1,1);var e=this._overScales[d];e||(e={object:a,cache:c.copyTo({})}),e.scale=b,this._overScales[d]=e},Phaser.Plugin.Juicy.prototype.jelly=function(a,b,c,d){b=b||.2,c=c||0,d=d||new Phaser.Point(1,1),this.game.add.tween(a.scale).to({x:d.x+d.x*b},50,Phaser.Easing.Quadratic.InOut,!0,c).to({x:d.x},600,Phaser.Easing.Elastic.Out,!0),this.game.add.tween(a.scale).to({
y:d.y+d.y*b},50,Phaser.Easing.Quadratic.InOut,!0,c+50).to({y:d.y},600,Phaser.Easing.Elastic.Out,!0)},Phaser.Plugin.Juicy.prototype.mouseStretch=function(a,b,c){b=b||.5,c=c||new Phaser.Point(1,1),a.scale.x=c.x+Math.abs(a.x-this.game.input.activePointer.x)/100*b,a.scale.y=c.y+c.y*b-a.scale.x*b},Phaser.Plugin.Juicy.prototype.update=function(){var a;if(this._shakeWorldTime>0){var b=this._shakeWorldTime/this._shakeWorldMax*this._shakeWorldMax,c=this.game.rnd.integerInRange(-b,b),d=this.game.rnd.integerInRange(-b,b);this.game.camera.x=c,this.game.camera.y=d,this._shakeWorldTime--,this._shakeWorldTime<=0&&this.game.world.setBounds(this._boundsCache.x,this._boundsCache.x,this._boundsCache.width,this._boundsCache.height)}for(var e in this._overScales)this._overScales.hasOwnProperty(e)&&(a=this._overScales[e],a.scale>.01?(a.object.scale.x=a.scale*a.cache.x,a.object.scale.y=a.scale*a.cache.y,a.scale-=this.game.time.elapsed*a.scale*.35):(a.object.scale.x=a.cache.x,a.object.scale.y=a.cache.y,delete this._overScales[e]))},"object"==typeof module&&module.exports&&(module.exports=Phaser.Plugin.Juicy),Phaser.Graphics.prototype.drawTriangle||(Phaser.Graphics.prototype.drawTriangle=function(a,b){var c=new Phaser.Polygon(a);if(b){var d=new Phaser.Point(this.game.camera.x-a[0].x,this.game.camera.y-a[0].y),e=new Phaser.Point(a[1].x-a[0].x,a[1].y-a[0].y),f=new Phaser.Point(a[1].x-a[2].x,a[1].y-a[2].y),g=f.cross(e);d.dot(g)>0&&this.drawPolygon(c)}else this.drawPolygon(c)},Phaser.Graphics.prototype.drawTriangles=function(a,b,c){var d,e=new Phaser.Point,f=new Phaser.Point,g=new Phaser.Point,h=[];if(b)if(a[0]instanceof Phaser.Point)for(d=0;d<b.length/3;d++)h.push(a[b[3*d]]),h.push(a[b[3*d+1]]),h.push(a[b[3*d+2]]),3===h.length&&(this.drawTriangle(h,c),h=[]);else for(d=0;d<b.length;d++)e.x=a[2*b[d]],e.y=a[2*b[d]+1],h.push(e.copyTo({})),3===h.length&&(this.drawTriangle(h,c),h=[]);else if(a[0]instanceof Phaser.Point)for(d=0;d<a.length/3;d++)this.drawTriangle([a[3*d],a[3*d+1],a[3*d+2]],c);else for(d=0;d<a.length/6;d++)e.x=a[6*d+0],e.y=a[6*d+1],f.x=a[6*d+2],f.y=a[6*d+3],g.x=a[6*d+4],g.y=a[6*d+5],this.drawTriangle([e,f,g],c)}),BasicGame.MainMenu=function(a){this.scaleProportional,this.btnPlay,this.btnAudioOn,this.btnAudioOff},BasicGame.MainMenu.prototype={create:function(){this.backgroundLyrSky=this.add.tileSprite(.5*this.game.width,0,this.game.width,this.game.height,"Splash","cielo"),this.backgroundLyrSky.anchor.set(.5,0),this.backgroundMoon=this.add.image(.5*this.game.width,0,"Splash","luna"),this.backgroundMoon.anchor.set(.5,0),this.backgroundLyrClouds=this.add.tileSprite(0,this.game.height,this.game.width,437,"Splash","nubes"),this.backgroundLyrClouds.tilePosition.x=.5*this.game.width-428,this.backgroundLyrClouds.anchor.set(0,1),this.backgroundLyrFloor=this.add.tileSprite(.5*this.game.width,this.game.height,this.game.width,283,"Splash","piso"),this.backgroundLyrFloor.anchor.set(.5,1),this.bikeShadow=this.add.image(-500,this.game.height-25,"Splash","sombramoto"),this.bikeShadow.anchor.set(.5,1),this.bikeCyborg=this.add.image(-500,this.game.height-50,"Splash","motoCyborg"),this.bikeCyborg.anchor.set(.5,1),BasicGame.FXEnabled&&(this.frontWheelSmoke=this.add.emitter(-500,this.game.height-60,50),this.frontWheelSmoke.setXSpeed(-300,0),this.frontWheelSmoke.setYSpeed(-50,0),this.frontWheelSmoke.gravity=-10,this.frontWheelSmoke.setAlpha(1,0,6e3),this.frontWheelSmoke.setScale(.1,1,.1,1,6e3,Phaser.Easing.Quintic.Out),this.frontWheelSmoke.makeParticles("Splash","humo"),this.frontWheelSmoke.start(!1,6e3,150),this.backWheelSmoke=this.add.emitter(-500,this.game.height-60,50),this.backWheelSmoke.setXSpeed(-250,0),this.backWheelSmoke.setYSpeed(-150,0),this.backWheelSmoke.gravity=-10,this.backWheelSmoke.setAlpha(1,0,3e3),this.backWheelSmoke.setScale(.1,1,.1,1,3e3,Phaser.Easing.Quintic.Out),this.backWheelSmoke.makeParticles("Splash","humo"),this.backWheelSmoke.start(!1,3e3,250)),this.backTitle=this.add.image(.5*this.game.width,0,"titleBack"),this.backTitle.anchor.set(.5,0),this.title=this.add.image(.5*this.game.width,0,"title"),this.title.anchor.set(.5,0),this.bird=this.add.sprite(.5*this.game.width-300,-150,"Splash","pajaro01"),this.bird.anchor.set(.5,.5),this.bird.animations.add("fly",["pajaro01"],60,!1),this.bird.animations.add("glide",["pajaro02"],60,!1),this.bird.play("fly"),this.bird.inputEnabled=!0,this.bird.events.onInputDown.add(this.btnCreditsShow,this),this.btnPlay=this.add.button(this.game.width-50,this.game.height-50,"Splash",this.btnPlayOnClick,this,"btnPlayMain_over","btnPlayMain_normal","btnPlayMain_down","btnPlayMain_normal"),this.btnPlay.anchor.set(1,1),this.btnAudioOn=this.add.button(this.game.width,0,"Splash",this.btnAudioOnClick,this,"btnSoundMain_over","btnSoundMain_normal","btnSoundMain_down","btnSoundMain_normal"),this.btnAudioOn.anchor.set(1,0),this.btnAudioOff=this.add.button(this.game.width,0,"Splash",this.btnAudioOnClick,this,"btnSoundMain_offOver","btnSoundMain_offNormal","btnSoundMain_offDown","btnSoundMain_offNormal"),this.btnAudioOff.anchor.set(1,0),this.logoCN=this.add.sprite(20,this.game.height-20,"logoCN"),this.logoCN.anchor.set(0,1),this.logoTT=this.add.sprite(20,20,"logoTT"),this.logoTT.anchor.set(0,0),this.game.sound.mute?(this.btnAudioOn.visible=!1,this.btnAudioOff.visible=!0):(this.btnAudioOn.visible=!0,this.btnAudioOff.visible=!1),this.credits=this.add.image(.5*this.game.width,.5*this.game.height,"Splash","credits"),this.credits.anchor.set(.5),this.credits.visible=!1,this.credits.inputEnabled=!0,this.credits.events.onInputDown.add(this.btnCreditsHide,this),this.bikeCyborgTween=this.add.tween(this.bikeCyborg),this.bikeCyborgTween.to({x:.5*this.game.width+78.5},1250,Phaser.Easing.Cubic.Out,!0),this.bird.angle=45,this.birdTween=this.add.tween(this.bird),this.birdTween.to({x:"+500",y:200,angle:0},1250,Phaser.Easing.Sinusoidal.InOut,!0,1250).onComplete.add(function(){this.birdTween=this.add.tween(this.bird),this.birdTween.to({x:"+20",y:"+10"},1e3,Phaser.Easing.Linear.Out,!0,0,-1,!0),this.bird.play("glide")},this),this.backTitle.scale.x=0,this.backTitle.scale.y=0,this.backtitleTween=this.add.tween(this.backTitle.scale),this.backtitleTween.to({x:1,y:1},1500,Phaser.Easing.Quintic.Out,!0,2e3),this.title.scale.x=0,this.title.scale.y=0,this.titleTween=this.add.tween(this.title.scale),this.titleTween.to({x:1,y:1},3e3,Phaser.Easing.Quintic.Out,!0,2e3),BasicGame.menuMusic.play("splashMusicLoop")},btnCreditsShow:function(){this.credits.visible=!0},btnCreditsHide:function(){this.credits.visible=!1},btnPlayOnClick:function(){BasicGame.fx.play("click_GUI"),this.state.start("Game"),BasicGame.menuMusic.stop()},btnAudioOnClick:function(){BasicGame.fx.play("click_GUI"),this.game.sound.mute=!this.game.sound.mute,localStorage.setItem("muteState",JSON.stringify(this.game.sound.mute)),this.game.sound.mute?(this.btnAudioOn.visible=!1,this.btnAudioOff.visible=!0):(this.btnAudioOn.visible=!0,this.btnAudioOff.visible=!1)},update:function(){this.bikeShadow.x=this.bikeCyborg.x-78.5,BasicGame.FXEnabled&&(this.frontWheelSmoke.x=this.bikeCyborg.x+120,this.backWheelSmoke.x=this.bikeCyborg.x-200),this.backgroundLyrFloor.tilePosition.x-=14}},BasicGame.Preloader=function(a){this.background=null,this.preloadBar=null,this.ready=!1},BasicGame.Preloader.prototype={preload:function(){this.preloaderGroup=this.game.add.group(),this.preloadBar=this.add.sprite(0,140,"preloaderBarFill"),this.preloadBar.anchor.set(0,.5),this.preloaderGroup.addChild(this.preloadBar),this.preloadBarFg=this.add.sprite(0,140,"preloaderBar"),this.preloadBarFg.anchor.set(0,.5),this.preloaderGroup.addChild(this.preloadBarFg),this.background=this.add.image(0,-140,"preloaderBg"),this.background.anchor.set(.5),this.preloaderGroup.addChild(this.background),this.preloadBarFg.x=.5*-this.preloadBarFg.width,this.preloadBar.x=.5*-this.preloadBar.width,this.preloaderGroup.scale.set(.7),this.preloaderGroup.x=this.game.world.centerX,this.preloaderGroup.y=this.game.world.centerY,this.load.onFileComplete.add(this.fileComplete,this),this.load.setPreloadSprite(this.preloadBar),this.load.json("levelList","assets/levels/List.json"),this.load.atlasJSONHash("Splash","assets/texturas/splash_01.png","assets/texturas/splash_01.json"),this.load.image("titleBack","assets/images/Title_Triangle.png"),this.load.image("title","assets/images/Title_SPA.png"),this.load.image("logoCN","assets/images/logo-cn.png"),this.load.image("logoTT","assets/images/logo-teen-titans.png"),this.load.image("iconLives","assets/images/icon-lives.png"),this.load.image("iconWarning","assets/images/icon-warning.png"),this.load.image("iconDJump","assets/images/icon-djump.png"),this.load.image("iconDJumpTouch","assets/images/icon-djump-touch.png"),this.load.atlasJSONHash("cyborg01","assets/texturas/CyborgFase01_01.png","assets/texturas/CyborgFase01_01.json"),this.load.atlasJSONHash("cyborg02","assets/texturas/CyborgFase02_01.png","assets/texturas/CyborgFase02_01.json"),this.load.atlasJSONHash("cyborg03","assets/texturas/CyborgFase03_01.png","assets/texturas/CyborgFase03_01.json"),this.load.atlasJSONHash("enemy","assets/texturas/Enemigo01_01.png","assets/texturas/Enemigo01_01.json"),this.load.atlasJSONHash("HUD","assets/texturas/Hud_01.png","assets/texturas/Hud_01.json"),this.load.atlasJSONHash("TransformAnim","assets/texturas/transformaciones_01.png","assets/texturas/transformaciones_01.json"),this.load.atlasJSONHash("EndLevelScreen","assets/texturas/EndLevel_01.png","assets/texturas/EndLevel_01.json"),this.load.atlasJSONHash("fase03","assets/texturas/Fase03_01.png","assets/texturas/Fase03_01.json"),this.load.image("back03_delantePlataformas","assets/images/backgrounds/F03_delantePlataformas.png"),this.load.image("back03_detrasPlataformas","assets/images/backgrounds/F03_detrasPlataformas.png"),this.load.image("back03_auroras","assets/images/backgrounds/F03_auroras.png"),this.load.atlasJSONHash("fase02","assets/texturas/Fase02_01.png","assets/texturas/Fase02_01.json"),this.load.image("back02_delantePlataformas","assets/images/backgrounds/F02_delantePlataformas.png"),this.load.image("back02_detrasPlataformas","assets/images/backgrounds/F02_detrasPlataformas.png"),this.load.image("back02_nubes","assets/images/backgrounds/F02_nubes.png"),this.load.image("cielo02","assets/images/backgrounds/cielo02.jpg"),this.load.atlasJSONHash("fase01","assets/texturas/Fase01_01.png","assets/texturas/Fase01_01.json"),this.load.image("back01_delantePlataformas","assets/images/backgrounds/F01_delantePlataformas.png"),this.load.image("back01_detrasPlataformas","assets/images/backgrounds/F01_detrasPlataformas.png"),this.load.image("back01_nubes","assets/images/backgrounds/F01_nubes.png"),this.load.image("back01_meteoros","assets/images/backgrounds/meteoros.png"),this.load.image("back01_planetas","assets/images/backgrounds/planetas.png"),this.load.audio("audioMusic",["assets/audio/music.ac3","assets/audio/music.m4a","assets/audio/music.mp3","assets/audio/music.ogg"]),this.load.audiosprite("aditionalMusic",["assets/audio/menuMusic.ac3","assets/audio/menuMusic.m4a","assets/audio/menuMusic.mp3","assets/audio/menuMusic.ogg"],"assets/audio/menuMusic.json"),this.load.audiosprite("audioMix",["assets/audio/soundFx.ac3","assets/audio/soundFx.m4a","assets/audio/soundFx.mp3","assets/audio/soundFx.ogg"],"assets/audio/soundFx.json"),this.load.bitmapFont("Commodore","assets/font/Commodore Rounded v1.2.png","assets/font/Commodore Rounded v1.2.fnt"),this.load.bitmapFont("font","assets/font/font.png","assets/font/font.fnt"),this.load.image("BikeDust","assets/images/particulaHumo.png"),BasicGame.juicy=this.game.plugins.add(new Phaser.Plugin.Juicy(this))},fileComplete:function(a,b,c,d,e){if("levelList"==b)for(var f=this.game.cache.getJSON(b),g=0;g<f.levels.length;g++){var h=f.levels[g].block;this.load.json("level"+g,"assets/levels/"+h),BasicGame.levelsCacheNames[g]="level"+g}},create:function(){BasicGame.FXEnabled=JSON.parse(localStorage.getItem("FXEnabled")),null==BasicGame.FXEnabled&&(BasicGame.FXEnabled=!0),BasicGame.fx=this.add.audioSprite("audioMix"),BasicGame.fx.allowMultiple=!0,BasicGame.music=this.add.audio("audioMusic",1,!0),BasicGame.menuMusic=this.add.audioSprite("aditionalMusic"),BasicGame.menuMusic.allowMultiple=!0,BasicGame.activeTutorial=!0,BasicGame.activeHelpScreen=!0,this.game.sound.mute=JSON.parse(localStorage.getItem("muteState")),this.state.start("MainMenu")},resize:function(a,b){this.preloaderGroup.x=this.game.world.centerX,this.preloaderGroup.y=this.game.world.centerY}},WebFontConfig={google:{families:["Chewy"]}};