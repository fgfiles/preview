!function t(e,i,s){function n(a,r){if(!i[a]){if(!e[a]){var h="function"==typeof require&&require;if(!r&&h)return h(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=i[a]={exports:{}};e[a][0].call(l.exports,function(t){var i=e[a][1][t];return n(i?i:t)},l,l.exports,t,e,i,s)}return i[a].exports}for(var o="function"==typeof require&&require,a=0;a<s.length;a++)n(s[a]);return n}({1:[function(t,e,i){(function(i){var s=e.exports=t("./core");Object.assign(s,t("./extras")),i.WBB=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./core":31,"./extras":36}],2:[function(t,e,i){function s(){}var n=t("./Common"),o=t("./Transition"),a=t("./CutoutTransition"),r=t("./SplashScene"),h=t("./IntroScene1"),u=t("./IntroScene3"),l=t("./GameScene"),p=t("./PauseScene"),c=t("./ResultsScene");e.exports=s,s.prototype.init=function(){this.createSplashScene()},s.prototype.createSplashScene=function(){var t=new r;t.signals.next.add(function(){this.createIntroScene()},this);var e=new a(n.assetManager.getTexture("transition"),n.TRANSITION_COLOR);return e.wait=!1,e.signals["in"].addOnce(function(){n.animator.paused=!1},this),n.sceneManager.add(t,e),n.animator.paused=!1,t},s.prototype.createIntroScene=function(t){t=t||0;var e=[h,u],i=e[t],s=Object.create(i.prototype);s.constructor=i,i.apply(s),s.signals.next.add(function(){t<e.length-1?this.createIntroScene(t+1):this.createGameScene(!0)},this),s.signals.skip.add(function(){this.createGameScene(!0)},this);var r=0===t?new a(n.assetManager.getTexture("transition"),n.TRANSITION_COLOR):new o;return r.wait=!1,n.sceneManager.add(s,r),s},s.prototype.createGameScene=function(t){t=t||!1;var e=new l;e.signals.next.add(function(){this.createResultsScene(!1)},this),e.signals.pause.add(function(){e.interactive=!1,e.interactiveChildren=!1;var t=new PIXI.filters.BlurFilter;t.blur=0,t.passes=2,e.filters=[t],TweenMax.to(t,.2,{blur:4,ease:Power2.easeInOut});var i=this.createPauseScene();i.signals.next.add(function(){e._soundButton.checkState(),e.interactive=!0,e.interactiveChildren=!0,TweenMax.killTweensOf(t),TweenMax.to(t,.2,{blur:0,ease:Power2.easeInOut,onComplete:function(){e.filters=null,e.resume()},onCompleteScope:this})},this,1)},this);var i=t?new a(n.assetManager.getTexture("transition"),n.TRANSITION_COLOR):new o;return n.sceneManager.add(e,i),e},s.prototype.createPauseScene=function(){var t=new p;t.signals.next.add(function(){n.animator.paused=!1,n.sceneManager.remove()},this),t.signals.home.add(function(){this.createSplashScene()},this);var e=new o;return e.push=!0,e.replace=!1,n.sceneManager.add(t,e),n.animator.paused=!0,t},s.prototype.createResultsScene=function(t){t=t||!1;var e=new c;e.signals.home.add(function(){this.createSplashScene()},this),e.signals.next.add(function(){this.createGameScene(!0)},this);var i=t?new a(n.assetManager.getTexture("transition"),n.TRANSITION_COLOR):new o;return n.sceneManager.add(e,i),e}},{"./Common":7,"./CutoutTransition":9,"./GameScene":11,"./IntroScene1":12,"./IntroScene3":13,"./PauseScene":17,"./ResultsScene":20,"./SplashScene":26,"./Transition":28}],3:[function(t,e,i){function s(t){this.type=t,this._isHome=!0,this.busybody=null,this._delta=null,this._now=null,this._then=Date.now(),this.startFrame=0,this.currentFrame=0,this.totalFrames=0,this._timePassed=0,this.defaultSpeed=700,this.animationSpeed=this.defaultSpeed,this._isPlaying=!1,this.currentAnimation=null,this.animations={idle:[1],look:[0,2,1],lookLeft:[2,2,1],lookRight:[0,0,1],shush:[3]},this.bearTextures=["look_left_","look_forward_","look_right_","shush_"];for(var e=0;e<this.bearTextures.length;e++)this.bearTextures[e]+=this.type;return PIXI.Sprite.call(this,n.assetManager.getTexture(this.bearTextures[1])),this.anchor.x=.5,this.anchor.y=1,this}var n=t("./Common"),o=t("./bearsData");e.exports=s,s.prototype=Object.create(PIXI.Sprite.prototype),s.prototype.constructor=s,s.prototype.startAnimation=function(t){this.startFrame=this.animations[t][0],this.currentFrame=0,this.totalFrames=this.animations[t].length,this._now=Date.now(),this._delta=this._now-this._then,this._then=Date.now(),this._timePassed=0,this.currentAnimation=t,this._isPlaying=!0},s.prototype.updateAnimation=function(){this._now=Date.now(),this._delta=this._now-this._then,this._timePassed+=this._delta,this._timePassed>=this.animationSpeed&&(this.currentFrame+=Math.floor(this._timePassed/this.animationSpeed),this.currentFrame>=this.totalFrames&&(this._loop?this.currentFrame=0:(this._numLoops--,this._numLoops<=0&&this._isPlaying?this.stopAnimation():this.currentFrame=0)),this._timePassed=0),this._isPlaying&&(this.texture=n.assetManager.getTexture(this.bearTextures[this.animations[this.currentAnimation][this.currentFrame]])),this._then=this._now},s.prototype.play=function(t,e){this._isPlaying&&this.stopAnimation(),this.animationSpeed=e||this.defaultSpeed,this.loopAnimation(t,1,this.animationSpeed)},s.prototype.gotoAndStop=function(t,e){this._isPlaying&&this.stopAnimation(),this.currentAnimation=t,e&&e>=this.animations[t].length?this.currentFrame=this.animations[t].length-1:e?this.currentFrame=e:this.currentFrame=0,this.texture=n.assetManager.getTexture(this.bearTextures[this.animations[this.currentAnimation][this.currentFrame]])},s.prototype.stopAnimation=function(){this._isPlaying=!1,this.texture=n.assetManager.getTexture(this.bearTextures[this.animations[this.currentAnimation][this.totalFrames-1]]),this._timePassed=0,this.onComplete&&this.onComplete()},s.prototype.loopAnimation=function(t,e,i){this.animationSpeed=i||this.defaultSpeed,this._isPlaying&&this.stopAnimation(),e?(this._loop=!1,this._numLoops=e):this._loop=!0,this.startAnimation(t)},s.prototype.goHome=function(){var t=o[this.type].home;this.x=t.x,this.y=t.y+n.SETTINGS.BEARS.SLIDE_HEIGHT,this.scale.x=-1,this.scale.y=1,this.home=!0,this.busybody=null},s.prototype.doSeppuku=function(){this.onComplete=null,this.stopAnimation()},Object.defineProperty(s.prototype,"home",{get:function(){return this._isHome},set:function(t){this._isHome=t}})},{"./Common":7,"./bearsData":29}],4:[function(t,e,i){function s(t){return this.animate=!1,this.baseScale=new PIXI.Point(1,1),this.signals={},this._normalTexture=t.textures[0]?t.textures[0]:null,this._overTexture=t.textures[1]?t.textures[1]:null,this._downTexture=t.textures[2]?t.textures[2]:null,this._disabledTexture=t.textures[3]?t.textures[3]:null,this._tweenOver=null,this._tweenOut=null,PIXI.Sprite.call(this,this._normalTexture),this.init(t),this.anchorXY=.5,this.baseScale=this.scale.clone(),this.interactive=!0,this.mousedown=this.touchstart=this.onMouseDown.bind(this),this.mouseup=this.touchend=this.onMouseUp.bind(this),this.mouseupoutside=this.touchendoutside=this.onMouseOut.bind(this),this.click=this.tap=this.onMouseClick.bind(this),this.mouseover=this.onMouseOver.bind(this),this.mouseout=this.onMouseOut.bind(this),this}var n=t("./Common");e.exports=s,s.prototype=Object.create(PIXI.Sprite.prototype),s.prototype.constructor=s,s.prototype.init=function(t){this.signals.down=new signals.Signal,this.signals.up=new signals.Signal,this.signals.over=new signals.Signal,this.signals.out=new signals.Signal,this.signals.click=new signals.Signal;for(var e in t)switch(e){case"scope":case"texture":case"textures":break;case"signals":for(var i in t[e])this.signals[i].add(t[e][i],t.signalScope?t.signalScope:this);break;default:this[e]=t[e]}},s.prototype.dispose=function(){this.signals.up.dispose(),this.signals.down.dispose(),this.signals.over.dispose(),this.signals.out.dispose(),this.signals.click.dispose()},s.prototype.onMouseDown=function(t){this.downTexture&&(this.texture=this.downTexture),n.audioManager.playSound("sfx_btn_press"),this.signals.down.dispatch(this,t)},s.prototype.onMouseUp=function(t){this.texture=this.normalTexture,this.signals.up.dispatch(this,t)},s.prototype.onMouseOver=function(t){if(this.overTexture&&(this.texture=this.overTexture),this.animate){var e=TweenMax.getTweensOf(this,!0),i=e.indexOf(this._tweenOut)>-1?e.length-1:e.length;i||(this._tweenOut&&(this._tweenOut.kill(),this._tweenOut=null),this._tweenOver=this.animateOver())}n.audioManager.playSound("sfx_btn_rollover"),this.signals.over.dispatch(this,t)},s.prototype.onMouseOut=function(t){if(this.texture=this.normalTexture,this._tweenOver){var e=TweenMax.getTweensOf(this,!0),i=e.indexOf(this._tweenOver)>-1?e.length-1:e.length;e.length<=i&&(this._tweenOver&&(this._tweenOver.kill(),this._tweenOver=null),this._tweenOut=this.animateOut())}this.signals.out.dispatch(this,t)},s.prototype.onMouseClick=function(t){if(this.texture=this.normalTexture,this._tweenOver){var e=TweenMax.getTweensOf(this,!0),i=e.indexOf(this._tweenOver)>-1?e.length-1:e.length;e.length<=i&&(this._tweenOver&&(this._tweenOver.kill(),this._tweenOver=null),this._tweenOut=this.animateOut())}this.signals.click.dispatch(this,t)},s.prototype.animateOver=function(){return TweenMax.to(this.scale,.8,{x:1.3*this.baseScale.x,y:1.3*this.baseScale.y,ease:Elastic.easeOut,easeParams:[1]})},s.prototype.animateOut=function(){return TweenMax.to(this.scale,.3,{x:this.baseScale.x,y:this.baseScale.y,ease:Back.easeInOut,easeParams:[2]})},Object.defineProperty(s.prototype,"normalTexture",{get:function(){return this._normalTexture}}),Object.defineProperty(s.prototype,"overTexture",{get:function(){return this._overTexture}}),Object.defineProperty(s.prototype,"downTexture",{get:function(){return this._downTexture}}),Object.defineProperty(s.prototype,"disabledTexture",{get:function(){return this._disabledTexture}})},{"./Common":7}],5:[function(t,e,i){function s(){PIXI.Container.call(this),this.dimensions={x:7,y:6},this._isPaused=!1,this.eyesBlinkTimer=null,this.eyesBlinkInterval=n.SETTINGS.GOERS.BLINK,this.bearsIdleTimer=null,this.bearsIdleInterval=n.SETTINGS.BEARS.IDLE,this.coughInterval=0,this.annoymentTimer=null,this.annoymentInterval=1e3*n.SETTINGS.ANNOYMENT.CHECK,this.shushQueue=[],this.audience=[],this.seats=[],this.seatsPositions=o,this.variation={x:6,y:10},this.init()}var n=t("./Common"),o=t("./SeatsPositions"),a=t("./Cinemagoer"),r=t("./Bear");e.exports=s,s.prototype=Object.create(PIXI.Container.prototype),s.prototype.constructor=s,s.prototype.init=function(){this.interactive=!0,this.mousedown=this.touchstart=this.onInput.bind(this);for(var t=0;t<this.dimensions.x*this.dimensions.y;t++)this.audience.push(null);for(this.createSeats(),t=0;t<this.randomInterval(n.SETTINGS.CINEMAGOERS.MIN,n.SETTINGS.CINEMAGOERS.MAX);t++)this.createCinemaGoer();this.createBears()},s.prototype.createBears=function(t){this.brown=new r("brown").addTo(this),this.goHomeBear(this.brown),this.panda=new r("panda").addTo(this),this.goHomeBear(this.panda),this.polar=new r("polar").addTo(this),this.goHomeBear(this.polar)},s.prototype.getFreeBear=function(t){var e=[];if(null===this.brown.busybody&&e.push(this.brown),null===this.panda.busybody&&e.push(this.panda),null===this.polar.busybody&&e.push(this.polar),0===e.length)return t?(this.shushQueue.push(t),null):null;var i=e[Math.floor(Math.random()*e.length)];return i.onComplete=null,i._isPlaying&&i.stopAnimation(),i},s.prototype.playShush=function(){var t=["sfx_shush_00","sfx_shush_01","sfx_shush_02","sfx_shush_03","sfx_shush_04"];n.audioManager.playSound(t[Math.floor(Math.random()*t.length)],{volume:n.SETTINGS.SOUNDS.SHUSH})},s.prototype.moveBear=function(t,e){TweenMax.killTweensOf(t);t.home=!1,t.scale.x=0===this.randomInterval(0,1)?1:-1,t.scale.y=1;var i=t.scale.x*n.BEAR_GOER_OFFSET.x;(t.busybody.x-i<450||t.busybody.x-i>1450)&&(i*=-1,t.scale.x*=-1),t.scale.x*=this.seatsPositions[t.busybody.seat.y].gScale,t.scale.y*=this.seatsPositions[t.busybody.seat.y].gScale,t.x=t.busybody.x-i,t.y=t.busybody.y+n.BEAR_GOER_OFFSET.y+n.SETTINGS.BEARS.SLIDE_HEIGHT,this.removeChild(t);var s=this.children.indexOf(this.seats[t.busybody.seat.y+1]);this.addChildAt(t,s),this.bearSlideUpGoer(t,e),this.playShush(),e.stopTimer(),e.setShushedState(),this.onScoreChange&&this.onScoreChange(e.getScore());var o={a:0};TweenMax.to(o,n.SETTINGS.ANNOYMENT.SHUSH_DURATION,{a:1,ease:Linear.easeNone,onComplete:function(){this.bearSlideDownGoer(t)},onCompleteScope:this})},s.prototype.playNinjaMove=function(){var t=["sfx_ninja_move_00","sfx_ninja_move_01","sfx_ninja_move_02","sfx_ninja_move_03","sfx_ninja_move_04","sfx_ninja_move_05"];n.audioManager.playSound(t[Math.floor(Math.random()*t.length)],{volume:n.SETTINGS.SOUNDS.NINJA})},s.prototype.bearSlideDownGoer=function(t,e){this.playNinjaMove(),TweenMax.killTweensOf(t),t._isPlaying&&t.stopAnimation(),t.play("idle",300),t.jumpTween=TweenMax.to(t.position,.05,{y:t.position.y+n.SETTINGS.BEARS.SLIDE_HEIGHT,ease:Linear.easeNone,onComplete:function(){this.goHomeBear(t)},onCompleteScope:this})},s.prototype.bearSlideDownToNextGoer=function(t,e){this.playNinjaMove(),TweenMax.killTweensOf(t),t._isPlaying&&t.stopAnimation(),t.play("idle",300),t.jumpTween=TweenMax.to(t.position,.05,{y:t.position.y+n.SETTINGS.BEARS.SLIDE_HEIGHT,ease:Linear.easeNone,onComplete:function(){this.moveBear(t,e)},onCompleteScope:this})},s.prototype.bearSlideDownHome=function(t,e){this.playNinjaMove(),TweenMax.killTweensOf(t),t._isPlaying&&t.stopAnimation(),t.play("idle",300),t.jumpTween=TweenMax.to(t.position,.05,{y:t.position.y+n.SETTINGS.BEARS.SLIDE_HEIGHT,ease:Linear.easeNone,onComplete:function(){this.moveBear(t,e)},onCompleteScope:this})},s.prototype.bearSlideUpHome=function(t){TweenMax.killTweensOf(t),t._isPlaying&&t.stopAnimation(),t.play("idle",500),t.jumpTween=TweenMax.to(t.position,.15,{y:t.position.y-n.SETTINGS.BEARS.SLIDE_HEIGHT,ease:Back.easeOut})},s.prototype.bearSlideUpGoer=function(t,e){TweenMax.killTweensOf(t),t._isPlaying&&t.stopAnimation(),t.play("shush",500),t.jumpTween=TweenMax.to(t.position,.15,{y:t.position.y-n.SETTINGS.BEARS.SLIDE_HEIGHT,ease:Back.easeOut})},s.prototype.goToShush=function(t){var e=this.getFreeBear(t);null!==e&&(e.busybody={},e.busybody.x=t.x,e.busybody.y=t.y,e.busybody.seat=t.description.seat,t.description.shushingBear=e,this.bearSlideDownHome(e,t))},s.prototype.goShushAnother=function(t){var e=this.shushQueue.shift();e||this.goHomeBear(t),t.busybody={},t.busybody.x=e.x,t.busybody.y=e.y,t.busybody.seat=e.description.seat,e.description.shushingBear=t,this.bearSlideDownToNextGoer(t,e)},s.prototype.goHomeBear=function(t){t._isPlaying&&t.stopAnimation(),0!==this.shushQueue.length?this.goShushAnother(t):(this.removeChild(t),this.addChildAt(t,0),t.goHome(),this.bearSlideUpHome(t))},s.prototype.randomInterval=function(t,e){return Math.floor(Math.random()*(e+1-t)+t)},s.prototype.createCinemaGoer=function(){var t=this,e=new a;e.mousedown=e.touchstart=function(){e.interactive=!1,null===e.description.shushingBear&&t.goToShush(e)};var i={x:0,y:0};do i.x=Math.floor(Math.random()*this.dimensions.x),i.y=Math.floor(Math.random()*this.dimensions.y);while(null!==this.audience[i.x+this.dimensions.x*i.y]);e.scaleXY=this.seatsPositions[i.y].gScale,e.description.seat.x=i.x,e.description.seat.y=i.y,e.x=n.STAGE_WIDTH/2+o[i.y].scale*o[i.y].goerX[i.x]+this.randomInterval(0,this.variation.x)-Math.floor(this.variation.x/2);var s=this.randomInterval(0,Math.floor(this.variation.y*this.seatsPositions[i.y].gScale));e.y=o[i.y].goerY+s-Math.floor(s/2);var r=this.children.indexOf(this.seats[i.y+1]);this.addChildAt(e,r),this.audience[i.x+this.dimensions.x*i.y]=e},s.prototype.createSeats=function(){for(var t=0;t<o.length;t++){var e=new WBB.Sprite({texture:n.assetManager.getTexture("row2"),anchorX:this.seatsPositions[t].anchorX,anchorY:1,x:n.STAGE_WIDTH/2,y:this.seatsPositions[t].seatY,scaleXY:this.seatsPositions[t].scale}).addTo(this);this.seats.push(e)}},s.prototype.updateBearsAnimation=function(){this.brown.updateAnimation(),this.panda.updateAnimation(),this.polar.updateAnimation()},s.prototype.onInput=function(){n.audioManager.playSound("sfx_press_seat",{volume:n.SETTINGS.SOUNDS.SEAT})},s.prototype.pause=function(){this.interactive=!1,this._isPaused=!0,this.stopEyesBlinkTimer(),this.stopBearsIdleTimer(),this.stopAnnoymentTimer();for(var t=0;t<this.audience.length;t++)null!==this.audience[t]&&this.audience[t].pause()},s.prototype.resume=function(){this.interactive=!0,this._isPaused=!1,this.startEyesBlinkTimer(),this.startBearsIdleTimer(),this.checkAnnoyment();for(var t=0;t<this.audience.length;t++)null!==this.audience[t]&&this.audience[t].resume()},s.prototype.getFreeGoer=function(){var t=null;do t=this.audience[Math.floor(Math.random()*this.audience.length)];while(null===t);return t},s.prototype.startEyesBlinkTimer=function(){var t=this;this.eyesBlinkTimer&&this.stopEyesBlinkTimer(),this.eyesBlinkTimer=setInterval(function(){var e=t.getFreeGoer();null!==e&&e.blink()},this.eyesBlinkInterval)},s.prototype.stopEyesBlinkTimer=function(){clearInterval(this.eyesBlinkTimer),this.eyesBlinkTimer=null},s.prototype.audienceEyesBlink=function(){null!==this.eyesBlinkTimer&&this._isPaused||this.startEyesBlinkTimer()},s.prototype.playCough=function(){if(this.coughInterval++,this.coughInterval===n.SETTINGS.SOUNDS.COUGH){this.coughInterval=0;var t=["sfx_woman_cough_00","sfx_woman_cough_01","sfx_woman_cough_02"],e=t[Math.floor(Math.random()*t.length)];n.audioManager.playSound(e,{volume:n.SETTINGS.SOUNDS.COUGH_VOLUME})}},s.prototype.startBearsIdleTimer=function(){var t=this;this.bearsIdleTimer&&this.stopBearsIdleTimer(),this.bearsIdleTimer=setInterval(function(){t.playCough();var e=t.getFreeBear();if(null!==e)switch(e.type){case"brown":e.play("lookRight",n.SETTINGS.BEARS.IDLE_SPEED);break;case"panda":e.play("look",n.SETTINGS.BEARS.IDLE_SPEED);break;case"polar":e.play("lookLeft",n.SETTINGS.BEARS.IDLE_SPEED)}},this.bearsIdleInterval)},s.prototype.stopBearsIdleTimer=function(){clearInterval(this.bearsIdleTimer),this.bearsIdleTimer=null},s.prototype.bearsIdleAnimation=function(){null!==this.bearsIdleTimer&&this._isPaused||this.startBearsIdleTimer()},s.prototype.annoymentLoop=function(){for(var t=0;t<this.audience.length;t++)null===this.audience[t]||this.audience[t].annoying||this.audience[t].check()},s.prototype.startAnnoymentTimer=function(){this.annoymentTimer=setInterval(this.annoymentLoop.bind(this),this.annoymentInterval)},s.prototype.stopAnnoymentTimer=function(){clearInterval(this.annoymentTimer),this.annoymentTimer=null},s.prototype.checkAnnoyment=function(){null!==this.annoymentTimer&&this._isPaused||this.startAnnoymentTimer()},s.prototype.start=function(){this.audienceEyesBlink(),this.bearsIdleAnimation(),this.checkAnnoyment()},s.prototype.countReallyAnnoying=function(){for(var t=this.parent.noiseMeter.noiseLevel,e=0,i=0;i<this.audience.length;i++)null!==this.audience[i]&&this.audience[i].reallyAnnoying&&e++;t!==e&&this.onNoiseChange(e)},s.prototype.update=function(){if(!this._isPaused){this.updateBearsAnimation();for(var t=0;t<this.audience.length;t++)null!==this.audience[t]&&this.audience[t].update();this.countReallyAnnoying()}},s.prototype.doSeppuku=function(){TweenMax.killAll(),this.stopAnnoymentTimer(),this.stopBearsIdleTimer(),this.stopEyesBlinkTimer();for(var t=0;t<this.audience.length;t++)null!==this.audience[t]&&this.removeChild(this.audience[t]);for(t=0;t<this.audience.length;t++)this.audience[t]instanceof a&&this.audience[t].doSeppuku();for(t=0;t<this.seats.length;t++)this.removeChild(this.seats[t]),this.seats[t].destroy();this.brown._isPlaying&&this.brown.stopAnimation(),this.panda._isPlaying&&this.panda.stopAnimation(),this.panda._isPlaying&&this.panda.stopAnimation(),this.removeChild(this.brown),this.removeChild(this.panda),this.removeChild(this.polar),this.brown.destroy(),this.panda.destroy(),this.polar.destroy(),this.destroy()},Object.defineProperty(s.prototype,"value",{get:function(){},set:function(t){}})},{"./Bear":3,"./Cinemagoer":6,"./Common":7,"./SeatsPositions":24}],6:[function(t,e,i){function s(){PIXI.Container.call(this),this.genders=["male","female"],this.skinTones=["white","black"],this.states=["corn","drink","mobile"],this.shushState="shush",this.description={gender:0,skinTone:0,state:null,subState:null,head:0,body:0,eyes:0,seat:{x:-1,y:-1},shushingBear:null},this.annoyment={chance:n.SETTINGS.ANNOYMENT.CHANCE,increase:n.SETTINGS.ANNOYMENT.INCREASE,start:n.SETTINGS.ANNOYMENT.START_PERFORM_TIME,duration:n.SETTINGS.GOERS.DURATION},this.reactionTime=null,this.head=null,this.headTexture=null,this.eyes=null,this.eyesTexture=null,this.body=null,this.bodyTexture=null,this.state=null,this.stateTexture=null,this.willBeAnnoyingSoon=!1,this._isAnnoying=!1,this._isReallyAnnoying=!1,this._blinkTimer=null,this.timer=new a,this.sound=null,this.init()}var n=t("./Common"),o=t("./cgData"),a=t("./Timer");e.exports=s,s.prototype=Object.create(PIXI.Container.prototype),s.prototype.constructor=s,s.prototype.init=function(){this.randomize();this.description.gender===this.genders[0]?!0:!1;this.body=new WBB.Sprite({texture:n.assetManager.getTexture(this.bodyTexture),anchorX:.5,anchorY:1}).addTo(this),this.head=new WBB.Sprite({texture:n.assetManager.getTexture(this.headTexture),anchorX:.5,anchorY:1,y:0}).addTo(this),this.state=new WBB.Sprite({texture:n.assetManager.getTexture(this.stateTexture),anchorX:.5,anchorY:1,visible:!1}).addTo(this),this.eyes=new WBB.Sprite({texture:n.assetManager.getTexture(this.eyesTexture),anchorX:.5,anchorY:1,x:0,y:0}).addTo(this)},s.prototype.weightedRandom=function(t){for(var e=Math.random(),i=0,s=0;s<t.length;++s)if(i+=t[s],i>e)return s;return s},s.prototype.randomize=function(){this.description.gender=this.weightedRandom(n.CGPROBABILITIES.GENDER),this.description.skinTone=this.weightedRandom(n.CGPROBABILITIES.SKINTONE),this.description.head=this.weightedRandom(n.CGPROBABILITIES.HEAD),this.headTexture=o[this.genders[this.description.gender]][this.skinTones[this.description.skinTone]].head[this.description.head],this.description.body=this.weightedRandom(n.CGPROBABILITIES.BODY),this.bodyTexture=o[this.genders[this.description.gender]][this.skinTones[this.description.skinTone]].body[this.description.body],this.eyesTexture=o[this.genders[this.description.gender]].eyes[0],this.stateTexture=o[this.genders[this.description.gender]][this.skinTones[this.description.skinTone]].state[this.states[0]][0][this.description.body]},s.prototype.eyesOpen=function(){this.eyesTexture=o[this.genders[this.description.gender]].eyes[0],this.eyes.texture=n.assetManager.getTexture(this.eyesTexture)},s.prototype.eyesClose=function(){this.eyesTexture=o[this.genders[this.description.gender]].eyes[1],this.eyes.texture=n.assetManager.getTexture(this.eyesTexture)},s.prototype.eyesState=function(){this.eyesTexture=o[this.genders[this.description.gender]].stateEyes[Math.floor(Math.random()*o[this.genders[this.description.gender]].stateEyes.length)],this.eyes.texture=n.assetManager.getTexture(this.eyesTexture)},s.prototype.eyesDown=function(){this.eyesTexture=o[this.genders[this.description.gender]].stateEyes[0],this.eyes.texture=n.assetManager.getTexture(this.eyesTexture)},s.prototype.eyesShush=function(){this.eyesTexture=o[this.genders[this.description.gender]].shushedEyes,this.eyes.texture=n.assetManager.getTexture(this.eyesTexture)},s.prototype.setNormalState=function(){this.annoying=!1,this.interactive=!1,this.willBeAnnoyingSoon=!1,this._isReallyAnnoying=!1,this.body.visible=!0,this.eyesOpen(),this.state.visible=!1,this.description.state=null,this.reactionTime=null,this.timer.stop(),this.timer.start()},s.prototype.setAnnoyingState=function(t,e){this.body.visible=!1,0===e?(this.description.state=t,n.SETTINGS.GOERS.FORCE_EYES?this.eyesDown():this.eyesState()):this.eyesState(),this.description.subState=e,this.stateTexture=o[this.genders[this.description.gender]][this.skinTones[this.description.skinTone]].state[this.states[t]][e][this.description.body],this.state.texture=n.assetManager.getTexture(this.stateTexture),this.state.visible=!0},s.prototype.stopTimer=function(){this.reactionTime=this.timer.elapsed,this.timer.stop()},s.prototype.getScore=function(){if(1===this.description.subState||null===this.reactionTime)return 0;var t=n.SETTINGS.SCORE.BASE*(n.SETTINGS.SCORE.MULTIPLY-this.reactionTime);return t<n.SETTINGS.SCORE.MINIMUM&&(t=n.SETTINGS.SCORE.MINIMUM),t},s.prototype.shake=function(){TweenMax.to(this,n.SETTINGS.GOERS.SHAKE_DURATION,{rotation:.1*this.description.shushingBear.scale.x,ease:Elastic.easeInOut,yoyo:!0,repeat:1})},s.prototype.setShushedState=function(t){var e=this;this.body.visible=!1,this.eyesShush(),this.shake(),this.stateTexture=o[this.genders[this.description.gender]][this.skinTones[this.description.skinTone]][this.shushState][this.description.body],this.state.visible=!0,this.state.texture=n.assetManager.getTexture(this.stateTexture),this.annoyment.duration-=n.SETTINGS.GOERS.NEXT_TIME,this.annoyment.duration<n.SETTINGS.GOERS.MIN_DURATION&&(this.annoyment.duration=n.SETTINGS.GOERS.MIN_DURATION),this.interactive=!1,this.annoying=!1,this.description.shushingBear=null,this.willBeAnnoyingSoon=!0,this.stopSound(),setTimeout(function(){e.setNormalState()},1e3*this.annoyment.duration)},s.prototype.blink=function(){if(!this.annoying){this.eyesClose();var t={a:0};this._blinkTimer=TweenMax.to(t,n.CGBLINKTIME,{a:1,ease:Linear.easeNone,onComplete:function(){this.eyesOpen()},onCompleteScope:this})}},s.prototype.update=function(){this.timer.elapsed>n.SETTINGS.ANNOYMENT.START_PERFORM_TIME&&this.annoying&&(this._isReallyAnnoying||(this._isReallyAnnoying=!0,this.setAnnoyingState(this.description.state,1),this.playAnnoyingSound()))},s.prototype.randomInterval=function(t,e){return Math.floor(Math.random()*(e+1-t)+t)},s.prototype.stopSound=function(){n.audioManager.stopSound(this.sound),this.sound=null},s.prototype.playCorn=function(){var t=["sfx_eat_00","sfx_eat_01","sfx_eat_02","sfx_eat_03","sfx_eat_04","sfx_eat_05"];this.stopSound(),this.sound=t[Math.floor(Math.random()*t.length)],n.audioManager.playSound(this.sound,{volume:n.SETTINGS.SOUNDS.CUR})},s.prototype.playDrink=function(){var t=["sfx_drink_00","sfx_drink_01","sfx_drink_02","sfx_drink_03","sfx_drink_04","sfx_drink_05"];this.stopSound(),this.sound=t[Math.floor(Math.random()*t.length)],n.audioManager.playSound(this.sound,{volume:n.SETTINGS.SOUNDS.CUR})},s.prototype.playMobile=function(){var t=["sfx_phone_conversation_babble_01","sfx_phone_conversation_babble_02"];this.stopSound(),this.sound=t[Math.floor(Math.random()*t.length)],n.audioManager.playSound(this.sound,{volume:n.SETTINGS.SOUNDS.CUR})},s.prototype.playAnnoyingSound=function(){switch(this.states[this.description.state]){case"corn":this.playCorn();break;case"drink":this.playDrink();break;case"mobile":this.playMobile()}},s.prototype.popUp=function(t){TweenMax.to(this.position,n.SETTINGS.GOERS.POPUP_DURATION,{y:this.position.y-n.SETTINGS.GOERS.POPUP_HEIGHT,ease:Back.easeOut,easeParams:[2],yoyo:!0,repeat:1})},s.prototype.annoyNow=function(t){this.interactive=!0,this.annoying=!0,this.willBeAnnoyingSoon=!1,this.preAnnoymentSound(t),this.popUp(),this.setAnnoyingState(t,0),this.entryTime=Date.now(),this.timer.start()},s.prototype.playPreCorn=function(){var t=["sfx_food_rustle_00","sfx_food_rustle_01"];this.sound=t[Math.floor(Math.random()*t.length)],n.audioManager.playSound(this.sound,{volume:n.SETTINGS.SOUNDS.CUR})},s.prototype.playPreDrink=function(){var t=["sfx_drink_move_00","sfx_drink_move_01","sfx_drink_move_02","sfx_drink_move_03","sfx_drink_move_04","sfx_drink_move_05"];this.sound=t[Math.floor(Math.random()*t.length)],n.audioManager.playSound(this.sound,{volume:n.SETTINGS.SOUNDS.CUR})},s.prototype.playPreMobile=function(){var t=["sfx_message_00","sfx_mobile_message_00","sfx_mobile_message_01","sfx_mobile_tap_00","sfx_mobile_vibrate_00","sfx_ringtone_00"];this.sound=t[Math.floor(Math.random()*t.length)],n.audioManager.playSound(this.sound,{volume:n.SETTINGS.SOUNDS.CUR})},s.prototype.preAnnoymentSound=function(t){switch(this.states[t]){case"corn":this.playPreCorn();break;case"drink":this.playPreDrink();break;case"mobile":this.playPreMobile()}},s.prototype.delayedAnnoyment=function(){var t=this.randomInterval(0,2),e=this.randomInterval(0,n.SETTINGS.GOERS.DELAY)/1e3,i={a:0};TweenMax.to(i,e,{a:1,ease:Linear.easeNone,onComplete:function(){this.annoyNow(t)},onCompleteScope:this})},s.prototype.pause=function(){this.timer.pause()},s.prototype.resume=function(){this.timer.resume()},s.prototype.check=function(){if(!this.willBeAnnoyingSoon){var t=this.randomInterval(0,100);t<this.annoyment.chance?(this.willBeAnnoyingSoon=!0,this.delayedAnnoyment()):(this.annoyment.chance+=this.annoyment.increase,this.annoyment.chance>100&&(this.annoyment.chance=100))}},s.prototype.doSeppuku=function(){this._blinkTimer&&this._blinkTimer.kill(),this.timer.stop(),this.removeChild(this.body),this.removeChild(this.head),this.removeChild(this.eyes),this.removeChild(this.state),this.body.destroy(),this.head.destroy(),this.eyes.destroy(),this.state.destroy(),this.stopSound(),this.destroy()},Object.defineProperty(s.prototype,"annoying",{get:function(){return this._isAnnoying},set:function(t){this._isAnnoying=t}}),Object.defineProperty(s.prototype,"reallyAnnoying",{get:function(){return this._isReallyAnnoying}})},{"./Common":7,"./Timer":27,"./cgData":30}],7:[function(t,e,i){var s={language:"en",languages:null,mobilePrefix:"_mobile",themeMusic:"music_theme_en",gameScene:null,isAudioMuted:null,particles:null,assetManager:null,sceneManager:null,STAGE_WIDTH:1900,STAGE_HEIGHT:768,stage:null,renderer:null,isWebGL:!1,timestep:null,tracking:null,animator:null,paused:!1,instructionsPage:0,score:0,multiplier:0,currentTrack:null,font:null,hasViewedIntro:!1,hasViewedTutorial:!1,commingFromIntro:!0,fillTexture:null,FILLTEXTURE_COLOR:0,introFillTexture:null,FILLTEXTURE_ALPHA:.4,TRANSITION_COLOR:0,BUTTONS_TOP_OFFSET:74,BUTTONS_SIDE_OFFSET:70,SETTINGS:{CINEMAGOERS:{MIN:28,MAX:36},ANNOYMENT:{CHANCE:10,CHECK:3.5,INCREASE:1,START_PERFORM_TIME:1800,NEXT_TIME:.1,SHUSH_DURATION:1},NOISEBAR:{INCREASE:1,FADE_TIME:.2},MULTIPLIER:{TEST:5,CHECK:100,VAL:.5},GOERS:{FORCE_EYES:!1,BLINK:2e3,DELAY:1e3,DURATION:2,MIN_DURATION:1,NEXT_TIME:0,POPUP_DURATION:.1,POPUP_HEIGHT:15,SHAKE_DURATION:.1},BEARS:{IDLE:3500,IDLE_SPEED:700,SLIDE_HEIGHT:100},SCORE:{BASE:10,MULTIPLY:1e3,MINIMUM:100,MAX_MULTIPLIER:10},SOUNDS:{PRE:1,CUR:1,SHUSH:.8,NINJA:.5,COUGH:4,COUGH_VOLUME:1,SEAT:1},MUSIC:{SPLASH:1,PREMOVIE:1,MOVIE:.5},GAMEOVER_DELAY:2,SCORE_DURATION:1.5},BEAR_GOER_OFFSET:{x:120,y:60},CGBLINKTIME:.1,CGPROBABILITIES:{GENDER:[.5,.5],SKINTONE:[.5,.5],HEAD:[.25,.25,.25,.25],BODY:[.3333,.3333,.3334]},PROJECTORGLOW:!0,PATHS:{SCRIPTS:"scripts/",DATA:"data/",IMAGES:"assets/images/",FONTS:"assets/fonts/",SOUNDS:"assets/sounds/"}};s.playGameMusic=function(){var t=["music_castle_50","music_raid_30","music_thriller_30"];s.audioManager.playSound("music_game_start",{volume:s.SETTINGS.MUSIC.PREMOVIE}),s.audioManager.stopSound(s.currentTrack),s.currentTrack=t[Math.floor(Math.random()*t.length)],s.audioManager.playSound(s.currentTrack,{volume:s.SETTINGS.MUSIC.MOVIE,loop:!0,delay:4.3})},e.exports=s},{}],8:[function(t,e,i){function s(t,e,i){e=e||.5,i=i||new PIXI.Point(1,1),PIXI.AbstractFilter.call(this,null,"precision highp float;varying vec2 vTextureCoord;varying vec4 vColor;uniform sampler2D uCutoutMap;uniform float uScale;uniform vec2 uRatio;void main(void) {vec2 textureCoord  = (((vTextureCoord - vec2(0.5, 0.5)) * uRatio) * uScale) + vec2(0.5, 0.5);vec4 mask          = texture2D(uCutoutMap, textureCoord);float alpha        = 1.0 - mask.a;gl_FragColor       = vec4(vColor.r * alpha, vColor.g * alpha, vColor.b * alpha, vColor.a * alpha);}",{uCutoutMap:{type:"sampler2D",value:t},uScale:{type:"f",value:1/Math.max(.001,e)},uRatio:{type:"v2",value:{x:i.x,y:i.y}}}),t.baseTexture.isPowerOfTwo=!1}e.exports=s,s.prototype=Object.create(PIXI.AbstractFilter.prototype),s.prototype.constructor=s,Object.defineProperty(s.prototype,"scale",{get:function(){return 1/this.uniforms.uScale.value},set:function(t){this.uniforms.uScale.value=1/Math.max(.001,t)}}),Object.defineProperty(s.prototype,"ratio",{get:function(){return new PIXI.Point(this.uniforms.uRatio.value.x,this.uniforms.uRatio.value.y)},set:function(t){this.uniforms.uRatio.value.x=t.x,
this.uniforms.uRatio.value.y=t.y}})},{}],9:[function(t,e,i){function s(t,e,i){this.startScale=3,this.endScale=0,this._texture=t,this._color=e||0,this._duration=i||2,this._cutout=null,a.call(this),this.requiresWebGL=!0}var n=t("./CutoutShader"),o=t("./FadeTransition"),a=t("./Transition");e.exports=s,s.prototype=Object.create(a.prototype),s.prototype.constructor=s,s.prototype.init=function(){var t=new PIXI.Graphics;t.drawRect(0,0,1,1);var e=new PIXI.Point(0,0),i=p3.View.width/p3.View.height,s=this._texture.width/this._texture.height;i/s>1?(e.x=1,e.y=1/(i/s)):(e.x=1/(i/s),e.y=1),this._cutout=new PIXI.Sprite(t.generateTexture()),this._cutout.scale=new PIXI.Point(p3.View.width,p3.View.height),this._cutout.tint=this._color,this._cutout.shader=new n(this._texture,0,e),this.addChild(this._cutout)},s.prototype["in"]=function(){this._cutout.shader.scale=this.startScale,TweenMax.to(this._cutout.shader,.5*this._duration,{scale:this.endScale,ease:Power2.easeInOut,onComplete:function(){a.prototype["in"].call(this,this)},onCompleteScope:this})},s.prototype.out=function(){this._cutout.shader.scale=this.endScale,TweenMax.to(this._cutout.shader,.5*this._duration,{scale:this.startScale,ease:Power2.easeInOut,onComplete:function(){a.prototype.out.call(this,this)},onCompleteScope:this})},s.prototype.resize=function(){var t=new PIXI.Point(0,0),e=p3.View.width/p3.View.height,i=this._texture.width/this._texture.height;e/i>1?(t.x=1,t.y=1/(e/i)):(t.x=1/(e/i),t.y=1),this._cutout.scale=new PIXI.Point(p3.View.width,p3.View.height),this._cutout.shader.ratio=t},s.prototype.fallback=function(){return new o(this._color)}},{"./CutoutShader":8,"./FadeTransition":10,"./Transition":28}],10:[function(t,e,i){function s(t,e){this._color=t||0,this._duration=e||.8,this._quad=null,n.call(this)}var n=(t("./Common"),t("./Transition"));e.exports=s,s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.init=function(){this._quad=new PIXI.Graphics,this._quad.visible=!1,this._quad.beginFill(this._color),this._quad.drawRect(0,0,p3.View.width,p3.View.height),this._quad.endFill(),this.addChild(this._quad)},s.prototype["in"]=function(){this._quad.alpha=0,this._quad.visible=!0,TweenMax.to(this._quad,.5*this._duration,{alpha:1,ease:Power2.easeInOut,onComplete:function(){n.prototype["in"].call(this,this)},onCompleteScope:this})},s.prototype.out=function(){TweenMax.to(this._quad,.5*this._duration,{alpha:0,ease:Power2.easeInOut,onComplete:function(){this._quad.visible=!1,n.prototype.out.call(this,this)},onCompleteScope:this})},s.prototype.resize=function(){this._quad.clear(),this._quad.beginFill(this._color),this._quad.drawRect(0,0,p3.View.width,p3.View.height),this._quad.endFill()}},{"./Common":7,"./Transition":28}],11:[function(t,e,i){function s(){this._game=null,this.gameBg=null,this.cinema=null,this.projector=null,this.hudContainer=null,this.noiseMeter=null,this.score=null,this.multiplier=null,this.multiplierPercent=0,this._pauseButton=null,this._soundButton=null,this._isPaused=!1,this.timer=new Timer,o.call(this)}var n=t("./Common"),o=t("./Scene"),a=t("./Button"),r=t("./MuteButton"),h=t("./Projector"),u=t("./NoiseMeter"),l=t("./Score"),p=t("./Multiplier"),c=t("./Cinema");e.exports=s,s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.init=function(){this._game=new PIXI.Container,this.addChild(this._game),this.gameBg=new WBB.Sprite({texture:n.assetManager.getTexture("game_bg",".jpg")}).addTo(this),this.cinema=new c,this.cinema.onScoreChange=this.onScore.bind(this),this.cinema.onNoiseChange=this.onNoise.bind(this),this.addChild(this.cinema),n.PROJECTORGLOW&&(this.projector=new h,this.projector.applyParams({x:n.STAGE_WIDTH/2,y:6}).addTo(this)),this.createHud(),this._pauseButton=new a({textures:[n.assetManager.getTexture("but_pause_def"),n.assetManager.getTexture("but_pause_over"),n.assetManager.getTexture("but_pause_pressed")],signals:{click:this.onPauseButtonClick,over:this.onButtonRollOver},signalScope:this,y:n.BUTTONS_TOP_OFFSET,animate:!0,visible:!1}).addTo(this),this._soundButton=new r({textures:[n.assetManager.getTexture("but_musicon_def"),n.assetManager.getTexture("but_musicoff_def"),n.assetManager.getTexture("but_musicon_over"),n.assetManager.getTexture("but_musicoff_over"),n.assetManager.getTexture("but_musicon_pressed"),n.assetManager.getTexture("but_musicoff_pressed")],signals:{over:this.onButtonRollOver},signalScope:this,y:n.BUTTONS_TOP_OFFSET,animate:!0,visible:!1}).addTo(this),this.start()},s.prototype.createHud=function(){this.hudContainer=(new WBB.Container).addTo(this),this.hudContainer.visible=!1;var t=70;this.noiseMeter=new u,this.noiseMeter.onMaxNoise=this.onGameOver.bind(this),this.noiseMeter.applyParams({x:n.STAGE_WIDTH/2,y:t-5}).addTo(this.hudContainer),this.score=new l,this.score.applyParams({x:n.STAGE_WIDTH/2-388,y:t}).addTo(this.hudContainer),this.multiplier=new p,this.multiplier.applyParams({x:n.STAGE_WIDTH/2-215,y:t}).addTo(this.hudContainer)},s.prototype.animHudIn=function(){this.hudContainer.y=-110,this.hudContainer.visible=!0,TweenMax.to(this.hudContainer.position,.6,{y:0,ease:Cubic.easeOut})},s.prototype.animHudOut=function(){this.hudContainer.y=0,this.hudContainer.visible=!0,TweenMax.to(this.hudContainer.position,.6,{y:-110,ease:Cubic.easeOut})},s.prototype.animHudGameOver=function(){this.cinema.interactive=!1,this.cinema.interactiveChildren=!1,TweenMax.to(this.noiseMeter.scale,.8,{x:1.3,y:1.3,ease:Elastic.easeOut,easeParams:[1]}),TweenMax.to(this.score.scale,.3,{x:0,y:0,ease:Back.easeInOut,easeParams:[2]}),TweenMax.to(this.multiplier.scale,.3,{x:0,y:0,ease:Back.easeInOut,easeParams:[2]}),this.animatePauseButtonOut(),this.animateSoundButtonOut()},s.prototype.dispose=function(){this._pauseButton.dispose(),this._soundButton.dispose(),this.cinema.doSeppuku(),this.cinema=null,n.PROJECTORGLOW&&(this.projector.doSeppuku(),this.projector=null),this.noiseMeter.doSeppuku(),this.noiseMeter=null,this.score.doSeppuku(),this.score=null,this.multiplier.doSeppuku(),this.multiplier=null,this.multiplierPercent=null,n.animator.removeAll(),TweenMax.killAll(),o.prototype.dispose.call(this)},s.prototype.resize=function(){this.x=Math.round((p3.View.width-n.STAGE_WIDTH)/2),this._pauseButton.x=Math.round(.5*(n.STAGE_WIDTH+p3.View.width)-2*n.BUTTONS_SIDE_OFFSET-40),this._soundButton.x=Math.round(.5*(n.STAGE_WIDTH+p3.View.width)-n.BUTTONS_SIDE_OFFSET)},s.prototype.appear=function(){if(n.hasViewedIntro=!0,storage.set("intro",1),n.hasViewedTutorial)this.animateIn();else{n.hasViewedTutorial=!0;var t=this;setTimeout(function(){t.pause(),t.signals.pause.dispatch()},10)}},s.prototype.onScore=function(t){t>0&&(t*=this.multiplier.value,this.score.value+=t)},s.prototype.onNoise=function(t){this.noiseMeter.noiseLevel=t},s.prototype.start=function(){n.score=0,this.score.value=n.score,this.multiplier.value=1,this.noiseMeter.noiseLevel=0,this.cinema.start(),this.timer.stop(),this.timer.start(),n.commingFromIntro||n.playGameMusic(),n.gameScene=this},s.prototype.pause=function(){this._isPaused=!0,n.PROJECTORGLOW&&this.projector.pause(),this.timer.pause(),this.cinema.pause()},s.prototype.resume=function(){this._isPaused=!1,n.PROJECTORGLOW&&this.projector.resume(),this.timer.resume(),this.cinema.resume()},s.prototype.update=function(){this._isPaused||(this.timer.elapsed>n.SETTINGS.MULTIPLIER.CHECK&&(this.timer.stop(),this.noiseMeter.noiseLevel<n.SETTINGS.MULTIPLIER.TEST?this.multiplierPercent+=n.SETTINGS.MULTIPLIER.VAL:this.multiplierPercent-=n.SETTINGS.MULTIPLIER.VAL,this.multiplierPercent>100?(this.multiplier.value++,10!==this.multiplier.value?this.multiplierPercent=0:this.multiplierPercent=100):this.multiplierPercent<0&&(this.multiplier.value--,this.multiplierPercent=100),this.timer.start()),this.multiplier.percent=this.multiplierPercent,this.cinema.update())},s.prototype.animateIn=function(t,e){this.animHudIn(),this._soundButton.scaleXY=0,this._soundButton.visible=!0,TweenMax.to(this._soundButton.scale,.4,{x:1,y:1,ease:Back.easeOut,easeParams:[2]}),this._pauseButton.scaleXY=0,this._pauseButton.visible=!0,TweenMax.to(this._pauseButton.scale,.4,{delay:.2,x:1,y:1,ease:Back.easeOut,easeParams:[2]})},s.prototype.animatePauseButtonOut=function(){TweenMax.killTweensOf(this._pauseButton),TweenMax.to(this._pauseButton.scale,.3,{x:0,y:0,ease:Back.easeIn,easeParams:[2]})},s.prototype.animateSoundButtonOut=function(){TweenMax.to(this._soundButton.scale,.3,{x:0,y:0,ease:Back.easeIn,easeParams:[2]})},s.prototype.onPauseButtonClick=function(t){this.pause(),this.animHudOut(),this.animateSoundButtonOut(),this.animatePauseButtonOut();var e={a:0};TweenMax.to(e,.3,{a:1,ease:Linear.easeNone,onComplete:function(){TweenMax.killTweensOf(this._soundButton),TweenMax.killTweensOf(this._pauseButton),this.signals.pause.dispatch()},onCompleteScope:this})},s.prototype.onButtonRollOver=function(t){},s.prototype.onGameOver=function(){n.gameScene=null,this._isPaused=!0,this.cinema.pause(),this.animHudGameOver(),this.noiseMeter.setNoiseLevel(),TweenMax.killTweensOf(this.noiseMeter),this.noiseMeter.alpha=1,TweenMax.to(this.noiseMeter,n.SETTINGS.GAMEOVER_DELAY/6,{alpha:0,ease:Power1.easeInOut,repeat:-1,yoyo:!0});var t={a:0};TweenMax.to(t,n.SETTINGS.GAMEOVER_DELAY,{a:1,ease:Linear.easeNone,onComplete:function(){TweenMax.killAll(),this.signals.next.dispatch()},onCompleteScope:this})}},{"./Button":4,"./Cinema":5,"./Common":7,"./Multiplier":14,"./MuteButton":15,"./NoiseMeter":16,"./Projector":19,"./Scene":21,"./Score":23}],12:[function(t,e,i){function s(){n.call(this),this.frontRows=null,this.backRows=null,this.brown=null,this.panda=null,this.polar=null,this.panel1=null,this.panel2=null,this.p1f1=null,this.p1f2=null,this.p1f3=null,this.p2f1=null,this.p2f2=null,this.p2f3=null,this.watchingWait=2,this.panel1Speed=.3,this.panel1Wait=1,this.panel2Speed=.3,this.panel2Wait=1,this.walk=a,this.sit=r}var n=t("./SkipScene"),o=t("./Common"),a=t("./wData"),r=t("./sData");e.exports=s,s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.init=function(){this.frontRows=new WBB.Sprite({texture:o.assetManager.getTexture("bg_frontrows"),x:0,y:0}).addTo(this),this.panda=new WBB.Sprite({texture:o.assetManager.getTexture("bear_panda_walking"),x:this.walk.panda.start.x,y:this.walk.panda.start.y,anchorX:.5,anchorY:1,amp:0}).addTo(this),this.polar=new WBB.Sprite({texture:o.assetManager.getTexture("bear_polar_walking"),x:this.walk.polar.start.x,y:this.walk.polar.start.y,anchorX:.5,anchorY:1,amp:0}).addTo(this),this.brown=new WBB.Sprite({texture:o.assetManager.getTexture("bear_grizzly_walking"),x:this.walk.brown.start.x,y:this.walk.brown.start.y,anchorX:.5,anchorY:1,amp:0}).addTo(this),this.backRows=new WBB.Sprite({texture:o.assetManager.getTexture("bg_backrows"),x:0,y:this.frontRows.y+this.frontRows.height-180}).addTo(this),this.dimSprite=new WBB.Sprite({texture:o.introFillTexture,anchorXY:.5,x:o.STAGE_WIDTH/2,y:o.STAGE_HEIGHT/2,width:o.renderer.width,height:o.renderer.height}).addTo(this),this.panel1=new WBB.Container({visible:!1}).addTo(this),this.p1f1=new WBB.Sprite({texture:o.assetManager.getTexture("frame2_img1"),x:o.STAGE_WIDTH/2,y:o.STAGE_HEIGHT/2,anchorX:.5,anchorY:1,visible:!1}).addTo(this.panel1),this.p1f2=new WBB.Sprite({texture:o.assetManager.getTexture("frame2_img2"),x:o.STAGE_WIDTH/2+2,y:o.STAGE_HEIGHT/2,anchorX:1,anchorY:0,visible:!1}).addTo(this.panel1),this.p1f3=new WBB.Sprite({texture:o.assetManager.getTexture("frame2_img3"),x:o.STAGE_WIDTH/2+2,y:o.STAGE_HEIGHT/2,anchorX:0,anchorY:0,visible:!1}).addTo(this.panel1),this.panel2=new WBB.Container({visible:!1}).addTo(this),this.p2f1=new WBB.Sprite({texture:o.assetManager.getTexture("frame3_img1"),x:o.STAGE_WIDTH/2,y:o.STAGE_HEIGHT/2,anchorX:1,anchorY:.5,visible:!1}).addTo(this.panel2),this.p2f2=new WBB.Sprite({texture:o.assetManager.getTexture("frame3_img2"),x:o.STAGE_WIDTH/2,y:o.STAGE_HEIGHT/2,anchorX:0,anchorY:.5,visible:!1}).addTo(this.panel2),this.p2f3=new WBB.Sprite({texture:o.assetManager.getTexture("frame3_img3"),x:o.STAGE_WIDTH/2,y:o.STAGE_HEIGHT,anchorX:.5,anchorY:1,visible:!1}).addTo(this.panel2),n.prototype.init.call(this)},s.prototype.dispose=function(){this.removeChild(this.frontRows),this.removeChild(this.backRows),this.panel1.removeChild(this.p1f1),this.panel1.removeChild(this.p1f2),this.panel1.removeChild(this.p1f3),this.panel2.removeChild(this.p2f1),this.panel2.removeChild(this.p2f2),this.panel2.removeChild(this.p2f3),this.removeChild(this.brown),this.removeChild(this.panda),this.removeChild(this.polar),this.frontRows.destroy(),this.backRows.destroy(),this.p1f1.destroy(),this.p1f2.destroy(),this.p1f3.destroy(),this.p2f1.destroy(),this.p2f2.destroy(),this.p2f3.destroy(),this.brown.destroy(),this.panda.destroy(),this.polar.destroy(),this.panel1.destroy(),this.panel2.destroy(),this.p1f1=null,this.p1f2=null,this.p1f3=null,this.p2f1=null,this.p2f2=null,this.p2f3=null,this.frontRows=null,this.backRows=null,this.brown=null,this.panda=null,this.polar=null,this.panel1=null,this.panel2=null,n.prototype.dispose.call(this),o.animator.removeAll(),TweenMax.killAll()},s.prototype.resize=function(){n.prototype.resize.call(this),this.x=Math.round((p3.View.width-o.STAGE_WIDTH)/2),this.dimSprite.applyParams({width:o.renderer.width,height:o.renderer.height}),this.p1f1.applyParams({x:Math.round(o.STAGE_WIDTH/2),y:Math.round(o.STAGE_HEIGHT/2)}),this.p1f2.applyParams({x:Math.round(o.STAGE_WIDTH/2+2),y:Math.round(o.STAGE_HEIGHT/2)}),this.p1f3.applyParams({x:Math.round(o.STAGE_WIDTH/2+2),y:Math.round(o.STAGE_HEIGHT/2)}),this.p2f1.applyParams({x:Math.round(o.STAGE_WIDTH/2),y:Math.round(o.STAGE_HEIGHT/2)}),this.p2f2.applyParams({x:Math.round(o.STAGE_WIDTH/2),y:Math.round(o.STAGE_HEIGHT/2)}),this.p2f3.applyParams({x:Math.round(o.STAGE_WIDTH/2),y:o.STAGE_HEIGHT})},s.prototype.playNinjaMove=function(){var t=["sfx_ninja_move_00","sfx_ninja_move_01","sfx_ninja_move_02","sfx_ninja_move_03","sfx_ninja_move_04","sfx_ninja_move_05"];o.audioManager.playSound(t[Math.floor(Math.random()*t.length)],{volume:1})},s.prototype.showPanel1=function(){TweenMax.from(this.p1f1,this.panel1Speed,{y:0,ease:Cubic.easeOut,onStart:function(){this.playNinjaMove(),this.panel1.visible=!0,this.p1f1.visible=!0,this.playConversation()},onStartScope:this}),TweenMax.from(this.p1f2,this.panel1Speed,{delay:this.panel1Speed,y:o.STAGE_HEIGHT,ease:Cubic.easeOut,onStart:function(){this.playNinjaMove(),this.p1f2.visible=!0,this.playMobile()},onStartScope:this}),TweenMax.from(this.p1f3,this.panel1Speed,{delay:2*this.panel1Speed,x:o.STAGE_WIDTH,ease:Cubic.easeOut,onStart:function(){this.playNinjaMove(),this.p1f3.visible=!0,this.playCorn()},onStartScope:this,onComplete:function(){this.waitForPanel2()},onCompleteScope:this})},s.prototype.showPanel2=function(){this.brown.visible=!1,this.panda.visible=!1,this.polar.visible=!1,this.panel1.visible=!1,TweenMax.from(this.p2f1,this.panel2Speed,{x:0,ease:Cubic.easeOut,onStart:function(){this.playNinjaMove(),this.panel2.visible=!0,this.p2f1.visible=!0},onStartScope:this}),TweenMax.from(this.p2f2,this.panel2Speed,{delay:this.panel2Speed,x:o.STAGE_WIDTH,ease:Cubic.easeOut,onStart:function(){this.playNinjaMove(),this.p2f2.visible=!0},onStartScope:this}),TweenMax.from(this.p2f3,this.panel2Speed,{delay:2*this.panel2Speed,y:o.STAGE_HEIGHT+560,ease:Cubic.easeOut,onStart:function(){this.playNinjaMove(),this.p2f3.visible=!0},onStartScope:this,onComplete:function(){this.waitForNextScene()},onCompleteScope:this})},s.prototype.waitForPanel1=function(){var t={a:0};TweenMax.to(t,this.watchingWait,{a:1,ease:Linear.easeNone,onComplete:function(){this.showPanel1()},onCompleteScope:this})},s.prototype.waitForPanel2=function(){var t={a:0};TweenMax.to(t,this.panel1Wait,{a:1,ease:Linear.easeNone,onComplete:function(){this.showPanel2()},onCompleteScope:this})},s.prototype.waitForNextScene=function(){var t={a:0};TweenMax.to(t,this.panel2Wait,{a:1,ease:Linear.easeNone,onComplete:function(){this.signals.next.dispatch()},onCompleteScope:this})},s.prototype.sitBrown=function(){this.brown.y=this.sit.brown.y1,TweenMax.to(this.brown,this.sit.brown.speed,{y:this.sit.brown.y2,ease:Back.easeOut,onComplete:function(){},onCompleteScope:this})},s.prototype.sitPanda=function(){this.panda.y=this.sit.panda.y1,TweenMax.to(this.panda,this.sit.panda.speed,{y:this.sit.panda.y2,ease:Back.easeOut,onComplete:function(){},onCompleteScope:this})},s.prototype.sitPolar=function(){this.polar.y=this.sit.polar.y1,TweenMax.to(this.polar,this.sit.polar.speed,{y:this.sit.polar.y2,ease:Back.easeOut,onComplete:function(){this.waitForPanel1()},onCompleteScope:this})},s.prototype.walkAnimation=function(){TweenMax.to(this.brown,(this.walk.brown.start.x-this.walk.brown.end.x)/this.walk.brown.speed,{x:this.walk.brown.end.x,amp:this.walk.brown.amp,ease:Sine.easeOut,easeParams:[.5],onUpdate:function(){this.brown.position.y=this.walk.brown.end.y-this.walk.brown.height*Math.sin(this.brown.amp%Math.PI)},onUpdateScope:this,onComplete:function(){this.brown.texture=o.assetManager.getTexture("bear_grizzly_watching"),this.sitBrown()},onCompleteScope:this}),TweenMax.to(this.panda,(this.walk.panda.start.x-this.walk.panda.end.x)/this.walk.panda.speed,{x:this.walk.panda.end.x,amp:this.walk.panda.amp,ease:Sine.easeOut,easeParams:[.6],onUpdate:function(){this.panda.position.y=this.walk.panda.end.y-this.walk.panda.height*Math.sin(this.panda.amp%Math.PI)},onUpdateScope:this,onComplete:function(){this.panda.texture=o.assetManager.getTexture("bear_panda_watching"),this.sitPanda()},onCompleteScope:this}),TweenMax.to(this.polar,(this.walk.polar.start.x-this.walk.polar.end.x)/this.walk.polar.speed,{x:this.walk.polar.end.x,amp:this.walk.polar.amp,ease:Sine.easeOut,easeParams:[.1],onUpdate:function(){this.polar.position.y=this.walk.polar.end.y-this.walk.polar.height*Math.sin(this.polar.amp%Math.PI)},onUpdateScope:this,onComplete:function(){this.polar.texture=o.assetManager.getTexture("bear_polar_watching"),this.sitPolar()},onCompleteScope:this})},s.prototype.playConversation=function(){var t="sfx_food_rustle_00";o.audioManager.playSound(t,{volume:o.SETTINGS.SOUNDS.CUR})},s.prototype.playMobile=function(){var t="sfx_ringtone_00";o.audioManager.playSound(t,{volume:o.SETTINGS.SOUNDS.CUR})},s.prototype.playCorn=function(){var t="sfx_eat_04";o.audioManager.playSound(t,{volume:o.SETTINGS.SOUNDS.CUR})},s.prototype.animLight=function(){var t=1,e=0;this.scaleTween=TweenMax.to(this.dimSprite,t,{alpha:e,ease:RoughEase.ease.config({template:Linear.easeNone,strength:1,points:15,taper:"none",randomize:!0,clamp:!0}),repeat:-1,yoyo:!0})},s.prototype.appear=function(){n.prototype.appear.call(this),o.playGameMusic(),this.animLight(),this.walkAnimation()},s.prototype.hide=function(){n.prototype.hide.call(this)},s.prototype.update=function(){n.prototype.update.call(this)}},{"./Common":7,"./SkipScene":25,"./sData":34,"./wData":35}],13:[function(t,e,i){function s(){n.call(this),this.bg=null,this.tmpTimer=null}var n=t("./SkipScene"),o=t("./Common");e.exports=s,s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.init=function(){this.bg=new WBB.Sprite({texture:o.assetManager.getTexture("intro3",".jpg"),scaleXY:1.1,anchorXY:.5}).addTo(this),n.prototype.init.call(this)},s.prototype.dispose=function(){clearInterval(this.tmpTimer),n.prototype.dispose.call(this),o.animator.removeAll(),TweenMax.killAll()},s.prototype.resize=function(){n.prototype.resize.call(this),this.x=Math.round((p3.View.width-o.STAGE_WIDTH)/2),this.bg.x=Math.round(o.STAGE_WIDTH/2),this.bg.y=Math.round(o.STAGE_HEIGHT/2)},s.prototype.animateBgIn=function(){TweenMax.to(this.bg.scale,2.5,{x:1.03,y:1.03,ease:Cubic.easeOut,easeParams:[2]})},s.prototype.cameraShake=function(){TweenMax.to(this.position,.1,{x:.5*(p3.View.width-o.STAGE_WIDTH)+10,y:15,ease:Elastic.easeInOut,repeat:1,yoyo:!0})},s.prototype.appear=function(){n.prototype.appear.call(this),this.animateBgIn(),this.cameraShake();var t=this;this.tmpTimer=setTimeout(function(){t.signals.next.dispatch()},1e3)},s.prototype.hide=function(){n.prototype.hide.call(this)},s.prototype.update=function(){n.prototype.update.call(this)}},{"./Common":7,"./SkipScene":25}],14:[function(t,e,i){function s(){PIXI.Container.call(this),this.bg=null,this.bgMask=null,this.maskCounter=0,this.maskCoords={},this.per=0,this.signSprite=null,this.textSprite=null,this._gap=0,this._multiplier=1,this.init()}var n=t("./Common");e.exports=s,s.prototype=Object.create(PIXI.Container.prototype),s.prototype.constructor=s,s.prototype.init=function(){this.bg=new WBB.Sprite({texture:n.assetManager.getTexture("score_multiply_box"),anchorXY:.5,x:0,y:0}).addTo(this),this.bgMask=new PIXI.Graphics,this.addChild(this.bgMask),this.bg.mask=this.bgMask,this.maskCoords.x=this.bg.x-this.bg.anchorX*this.bg.width,this.maskCoords.y=this.bg.y-this.bg.anchorY*this.bg.height,this.maskCoords.w=this.bg.width,this.maskCoords.h=this.bg.height,this.maskCoords.per=this.maskCoords.w/100,this.maskCoords.old=this.maskCoords.w/100,this.updateMask(),this.signSprite=new PIXI.extras.BitmapText("x",{font:"45px Multiply",align:"center"}),this.signSprite.applyParams({x:Math.floor(-this.signSprite.width/2),y:Math.floor(-this.signSprite.height/2)-18}).addTo(this),this.textSprite=new PIXI.extras.BitmapText(this._multiplier+"",{font:"45px Multiply",align:"center"}),this.textSprite.applyParams({x:Math.floor(-this.textSprite.width/2),y:Math.floor(-this.textSprite.height/2)-5}).addTo(this),this.alignTexts()},s.prototype.updateMask=function(){this.per=Math.floor(this.maskCoords.per*this.maskCounter),this.maskCoords.old!==this.per&&(this.bgMask.clear(),this.bgMask.beginFill(0),this.bgMask.drawRect(this.maskCoords.x,this.maskCoords.y,this.per,this.maskCoords.h),this.maskCoords.old=this.per)},s.prototype.doSeppuku=function(){this.removeChild(this.bg),this.removeChild(this.signSprite),this.removeChild(this.textSprite),this.bg.destroy(),this.signSprite.destroy(),this.textSprite.destroy(),this.bg=null,this.bgMask=null,this.maskCoords=null,this.per=null,this.signSprite=null,this.textSprite=null,this.destroy()},s.prototype.alignTexts=function(){this.signSprite.x=-Math.floor((this.signSprite.width+this.textSprite.width+this._gap)/2),this.textSprite.x=this.signSprite.x+this.signSprite.width+this._gap},Object.defineProperty(s.prototype,"value",{get:function(){return this._multiplier},set:function(t){t>n.SETTINGS.SCORE.MAX_MULTIPLIER&&(t=n.SETTINGS.SCORE.MAX_MULTIPLIER),0>t&&(t=0),this._multiplier=t,this.textSprite.text=t,this.alignTexts()}}),Object.defineProperty(s.prototype,"percent",{get:function(){return this.maskCounter},set:function(t){this.maskCounter=t,this.updateMask()}})},{"./Common":7}],15:[function(t,e,i){function s(t){var e=p3.AudioManager.instance;this._onNormalTexture=t.textures[0]?t.textures[0]:null,this._offNormalTexture=t.textures[1]?t.textures[1]:null,this._onOverTexture=t.textures[2]?t.textures[2]:null,this._offOverTexture=t.textures[3]?t.textures[3]:null,this._onDownTexture=t.textures[4]?t.textures[4]:null,this._offDownTexture=t.textures[5]?t.textures[5]:null,this._onDisabledTexture=t.textures[6]?t.textures[6]:null,this._offDisabledTexture=t.textures[7]?t.textures[7]:null,this._normalTexture=e.isMute?this._offNormalTexture:this._onNormalTexture,this._overTexture=e.isMute?this._offOverTexture:this._onOverTexture,this._downTexture=e.isMute?this._offOverTexture:this._onDownTexture,this._disabledTexture=e.isMute?this._offDisabledTexture:this._onDisabledTexture,t.textures[0]=this._normalTexture,t.textures[1]=this._overTexture,t.textures[2]=this._downTexture,t.textures[3]=this._disabledTexture,n.call(this,t)}var n=t("./Button");e.exports=s,s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.checkState=function(){var t=p3.AudioManager.instance;this._normalTexture=t.isMute?this._offNormalTexture:this._onNormalTexture,this._overTexture=t.isMute?this._offOverTexture:this._onOverTexture,this._downTexture=t.isMute?this._offDownTexture:this._onDownTexture,this._disabledTexture=t.isMute?this._offDisabledTexture:this._onDisabledTexture,this.texture=this._normalTexture},s.prototype.onMouseClick=function(t){var e=p3.AudioManager.instance;e.mute(!e.isMute),this.checkState(),n.prototype.onMouseClick.call(this,t)}},{"./Button":4}],16:[function(t,e,i){function s(){PIXI.Container.call(this),this.noiseMeterPositions=[-59,-39,-18,2,23,43,63,84,104,124],this.noiseMeterColors=["red","red","red","red","orange","orange","orange","green","green","green"],this._currentLevel=0,this.noisemeterBg=null,this.noisemeterSprites=[],this.noiseBarsCount=0,this._hasBlinked=!1,this._hasBlinkedTwice=!1,this.init()}var n=t("./Common");e.exports=s,s.prototype=Object.create(PIXI.Container.prototype),s.prototype.constructor=s,s.prototype.init=function(){this.noisemeterBg=new WBB.Sprite({texture:n.assetManager.getTexture("noisemeter_box"),anchorXY:.5,x:0,y:0}).addTo(this);for(var t=0;t<this.noiseMeterColors.length;t++){var e=new WBB.Sprite({texture:n.assetManager.getTexture("noisemeter_"+this.noiseMeterColors[t]),anchorXY:0,alpha:0,x:this.noiseMeterPositions[t],y:-4}).addTo(this);this.noisemeterSprites.push(e)}this.noiseBarsCount=this.noisemeterSprites.length},s.prototype.onMaxLevel=function(){this.onMaxNoise&&this.onMaxNoise()},s.prototype.blinkOnce=function(){this._hasBlinked||(this._hasBlinked=!0,TweenMax.killTweensOf(this),this.alpha=1,TweenMax.to(this,.2,{alpha:0,ease:Power1.easeInOut,repeat:1,yoyo:!0}))},s.prototype.blinkTwice=function(){this._hasBlinkedTwice||(this._hasBlinkedTwice=!0,TweenMax.killTweensOf(this),this.alpha=1,TweenMax.to(this,.2,{alpha:0,ease:Power1.easeInOut,repeat:3,yoyo:!0}))},s.prototype.setNoiseLevel=function(){var t=this._currentLevel;t>this.noiseBarsCount&&(t=this.noiseBarsCount),9===t&&this.blinkOnce(),10===t&&this.blinkTwice();for(var e=0;t>e;e++)TweenMax.killTweensOf(this.noisemeterSprites[e]),1!==this.noisemeterSprites[e].alpha&&TweenMax.to(this.noisemeterSprites[e],n.SETTINGS.NOISEBAR.FADE_TIME,{alpha:1,ease:Linear.easeNone});for(e=t;e<this.noisemeterSprites.length;e++)TweenMax.killTweensOf(this.noisemeterSprites[e]),0!==this.noisemeterSprites[e].alpha&&TweenMax.to(this.noisemeterSprites[e],n.SETTINGS.NOISEBAR.FADE_TIME,{alpha:0,ease:Linear.easeNone})},s.prototype.doSeppuku=function(){for(t=0;t<this.noisemeterSprites.length;t++)TweenMax.killTweensOf(this.noisemeterSprites[t]);this.removeChild(this.noisemeterBg);for(var t=0;t<this.noisemeterSprites.length;t++)this.removeChild(this.noisemeterSprites[t]);for(this.noisemeterBg.destroy(),t=0;t<this.noisemeterSprites.length;t++)this.noisemeterSprites[t].destroy();this._currentLevel=0,this.noisemeterBg=null,this.noisemeterSprites=[],this.destroy()},Object.defineProperty(s.prototype,"levels",{get:function(){return this.noisemeterSprites.length}}),Object.defineProperty(s.prototype,"noiseLevel",{get:function(){return this._currentLevel},set:function(t){this._currentLevel=t,this._currentLevel<0&&(this._currentLevel=0),this.setNoiseLevel(),this._currentLevel>10&&this.onMaxLevel()}})},{"./Common":7}],17:[function(t,e,i){function s(){this.bgFillSprite=null,this.panel1=null,this.panel2=null,this.popupFrame=null,this._prevButton=null,this._nextButton=null,this._playButton=null,this._homeButton=null,this._soundButton=null,this.confirmPanel=null,this._okButton=null,this._cancelButton=null,o.call(this)}var n=t("./Common"),o=(t("./Transition"),t("./Scene")),a=t("./Button"),r=t("./MuteButton");e.exports=s,s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.init=function(){this.bgFillSprite=new WBB.Sprite({texture:n.fillTexture,anchorXY:.5,x:n.STAGE_WIDTH/2,y:n.STAGE_HEIGHT/2,width:n.renderer.width,height:n.renderer.height}).addTo(this),this.createInstructionsDialog(),this.createConfirmationDialog(),this._homeButton=new a({textures:[n.assetManager.getTexture("but_home_def"),n.assetManager.getTexture("but_home_over"),n.assetManager.getTexture("but_home_pressed")],signals:{click:this.onHomeButtonClick,over:this.onButtonRollOver},signalScope:this,y:n.BUTTONS_TOP_OFFSET,visible:!1,animate:!0}).addTo(this),this._soundButton=new r({textures:[n.assetManager.getTexture("but_musicon_def"),n.assetManager.getTexture("but_musicoff_def"),n.assetManager.getTexture("but_musicon_over"),n.assetManager.getTexture("but_musicoff_over"),n.assetManager.getTexture("but_musicon_pressed"),n.assetManager.getTexture("but_musicoff_pressed")],signals:{over:this.onButtonRollOver},signalScope:this,y:n.BUTTONS_TOP_OFFSET,visible:!1,animate:!0}).addTo(this)},s.prototype.dispose=function(){this._prevButton.dispose(),this._nextButton.dispose(),this._playButton.dispose(),this._homeButton.dispose(),this._okButton.dispose(),this._cancelButton.dispose(),this._soundButton.dispose(),o.prototype.dispose.call(this)},s.prototype.resize=function(){this.x=Math.round((p3.View.width-n.STAGE_WIDTH)/2),this.bgFillSprite.applyParams({width:n.renderer.width,height:n.renderer.height}),this._homeButton.x=Math.round((n.STAGE_WIDTH-p3.View.width)/2+n.BUTTONS_SIDE_OFFSET),this._soundButton.x=Math.round((n.STAGE_WIDTH+p3.View.width)/2-n.BUTTONS_SIDE_OFFSET)},s.prototype.createInstructionsDialog=function(){n.instructionsPage=0,this.maxPages=2,this.instructionsContainer=new WBB.Container({x:n.STAGE_WIDTH/2,y:n.STAGE_HEIGHT/2-14,visible:!0}).addTo(this),this.panel1=new WBB.Sprite({texture:n.assetManager.getTexture("tutorial_1"),anchorXY:.5}).addTo(this.instructionsContainer),this.panel2=new WBB.Sprite({texture:n.assetManager.getTexture("tutorial_2"),anchorX:1,anchorY:.5,alpha:0===n.instructionsPage?0:1,x:n.assetManager.getTexture("tutorial_2").width/2}).addTo(this.instructionsContainer),this.popupFrame=new WBB.Sprite({texture:n.assetManager.getTexture("popup"),x:0,y:15,anchorXY:.5}).addTo(this.instructionsContainer),this.instructionsTitleText=new PIXI.Text(n.languages.intructionsTitle[n.language],{font:"55px "+n.font,fill:10897730,align:"center",stroke:4141847,strokeThickness:3,padding:20}),this.instructionsTitleText.applyParams({x:Math.floor(-this.instructionsTitleText.width/2),y:-225}).addTo(this.instructionsContainer);var t=35;("pl"===n.language||"ru"===n.language)&&(t=31),this.instructionsBottomText=new PIXI.Text(this.getInstructionsText(),{font:t+"px "+n.font,fill:10897730,align:"center",padding:20}),this.instructionsBottomText.applyParams({x:Math.floor(-this.instructionsBottomText.width/2),y:"pl"===n.language||"ru"===n.language?166:160}).addTo(this.instructionsContainer);var e=360;this._prevButton=new a({textures:[n.assetManager.getTexture("but_arrow_def"),n.assetManager.getTexture("but_arrow_over"),n.assetManager.getTexture("but_arrow_pressed")],signals:{click:this.onPrevButtonClick,over:this.onButtonRollOver},signalScope:this,x:-e,scaleX:-1,animate:!0}).addTo(this.instructionsContainer),this._nextButton=new a({textures:[n.assetManager.getTexture("but_arrow_def"),n.assetManager.getTexture("but_arrow_over"),n.assetManager.getTexture("but_arrow_pressed")],signals:{click:this.onNextButtonClick,over:this.onButtonRollOver},signalScope:this,x:e,animate:!0}).addTo(this.instructionsContainer),this._playButton=new a({textures:[n.assetManager.getTexture("but_play_def"),n.assetManager.getTexture("but_play_over"),n.assetManager.getTexture("but_play_pressed")],signals:{click:this.onPlayButtonClick,over:this.onButtonRollOver},signalScope:this,x:e,y:240,animate:!0}).addTo(this.instructionsContainer)},s.prototype.getInstructionsText=function(){return p3.Device.isMobile&&n.languages["intructionsDescription"+(n.instructionsPage+1)+n.mobilePrefix]?n.languages["intructionsDescription"+(n.instructionsPage+1)+n.mobilePrefix][n.language]:n.languages["intructionsDescription"+(n.instructionsPage+1)][n.language]},s.prototype.createConfirmationDialog=function(){this.confirmContainer=new WBB.Container({x:n.STAGE_WIDTH/2,y:n.STAGE_HEIGHT/2,visible:!1}).addTo(this),this.confirmPanel=new WBB.Sprite({texture:n.assetManager.getTexture("popup_confirm"),anchorXY:.5}).addTo(this.confirmContainer),this.confirmText=new PIXI.Text(n.languages.confirmation[n.language],{font:"35px "+n.font,fill:10897730,align:"center",padding:20}),this.confirmText.applyParams({
x:Math.floor(-this.confirmText.width/2),y:"ar"===n.language?-38:-58}).addTo(this.confirmContainer);var t={x:78,y:142};this._okButton=new a({textures:[n.assetManager.getTexture("but_ok_def"),n.assetManager.getTexture("but_ok_over"),n.assetManager.getTexture("but_ok_pressed")],signals:{click:this.onOkButtonClick,over:this.onButtonRollOver},signalScope:this,x:t.x,y:t.y,animate:!0}).addTo(this.confirmContainer),this._cancelButton=new a({textures:[n.assetManager.getTexture("but_close_def"),n.assetManager.getTexture("but_close_over"),n.assetManager.getTexture("but_close_pressed")],signals:{click:this.onCancelButtonClick,over:this.onButtonRollOver},signalScope:this,x:-t.x,y:t.y,animate:!0}).addTo(this.confirmContainer)},s.prototype.appear=function(){this.refreshButtons(),this.animateIn()},s.prototype.animateInstructionsIn=function(){this.instructionsContainer.scaleXY=0;var t=TweenMax.to(this.instructionsContainer.scale,.4,{x:1,y:1,ease:Back.easeOut,easeParams:[1],onStart:function(){this.instructionsContainer.visible=!0},onStartScope:this});return t},s.prototype.animateInstructionsOut=function(){var t=TweenMax.to(this.instructionsContainer.scale,.4,{x:0,y:0,ease:Back.easeIn,easeParams:[1],onComplete:function(){this.instructionsContainer.visible=!1},onCompleteScope:this});return t},s.prototype.animateHomeButtonIn=function(){this._homeButton.scaleXY=0;var t=TweenMax.to(this._homeButton.scale,.4,{delay:.2,x:1,y:1,ease:Back.easeOut,easeParams:[2],onStart:function(){this._homeButton.visible=!0},onStartScope:this});return t},s.prototype.animateSoundButtonIn=function(){this._soundButton.scaleXY=0;var t=TweenMax.to(this._soundButton.scale,.4,{x:1,y:1,ease:Back.easeOut,easeParams:[2],onStart:function(){this._soundButton.visible=!0},onStartScope:this});return t},s.prototype.animateSoundButtonOut=function(){var t=TweenMax.to(this._soundButton.scale,.4,{x:0,y:0,ease:Back.easeIn,easeParams:[2],onComplete:function(){this._soundButton.visible=!1},onCompleteScope:this});return t},s.prototype.animateHomeButtonOut=function(){var t=TweenMax.to(this._homeButton.scale,.4,{delay:.2,x:0,y:0,ease:Back.easeIn,easeParams:[2],onComplete:function(){this._homeButton.visible=!1},onCompleteScope:this});return t},s.prototype.animateIn=function(t,e){var i=new TimelineMax;i.vars.onComplete=t,i.vars.onCompleteScope=e,this.bgFillSprite.alpha=0,i.insert(TweenMax.to(this.bgFillSprite,.2,{alpha:.5,ease:Power1.easeInOut})),i.insert(this.animateInstructionsIn()),i.insert(this.animateHomeButtonIn()),i.insert(this.animateSoundButtonIn())},s.prototype.animateOut=function(t,e){var i=new TimelineMax;i.vars.onComplete=t,i.vars.onCompleteScope=e,i.insert(TweenMax.to(this.bgFillSprite,.2,{alpha:0,ease:Power1.easeInOut})),i.insert(this.animateInstructionsOut()),i.insert(this.animateHomeButtonOut()),i.insert(this.animateSoundButtonOut())},s.prototype.refreshButtons=function(){0===n.instructionsPage?(this._prevButton.visible=!1,this._nextButton.visible=!0,this._playButton.visible=!0):n.instructionsPage===this.maxPages-1?(this._prevButton.visible=!0,this._nextButton.visible=!1,this._playButton.visible=!0):(this._prevButton.visible=!0,this._nextButton.visible=!0,this._playButton.visible=!0)},s.prototype.onPrevButtonClick=function(t){n.instructionsPage>0&&(n.instructionsPage--,TweenMax.killTweensOf(this.panel2),TweenMax.to(this.panel2,.5,{alpha:0,ease:Power2.easeOut,easeParams:[1]}),this.instructionsBottomText.text=this.getInstructionsText(),this.instructionsBottomText.x=Math.floor(-this.instructionsBottomText.width/2),this.refreshButtons())},s.prototype.onNextButtonClick=function(t){n.instructionsPage<this.maxPages-1&&(n.instructionsPage++,TweenMax.killTweensOf(this.panel2),TweenMax.to(this.panel2,.5,{alpha:1,ease:Power2.easeOut,easeParams:[1]}),this.instructionsBottomText.text=this.getInstructionsText(),this.instructionsBottomText.x=Math.floor(-this.instructionsBottomText.width/2),this.refreshButtons())},s.prototype.onPlayButtonClick=function(t){this.animateOut(function(){this.signals.next.dispatch()},this)},s.prototype.onHomeButtonClick=function(t){this.animateInstructionsOut(),this.animateHomeButtonOut(),this.confirmContainer.visible=!0},s.prototype.onOkButtonClick=function(t){this.signals.home.dispatch()},s.prototype.onCancelButtonClick=function(t){this.animateInstructionsIn(),this.animateHomeButtonIn(),this.confirmContainer.visible=!1},s.prototype.onButtonRollOver=function(t){}},{"./Button":4,"./Common":7,"./MuteButton":15,"./Scene":21,"./Transition":28}],18:[function(t,e,i){function s(){o.call(this),this.signals.skip=new signals.Signal,this.bar=null,this.barFrame=null,this.barWidth=null,this.barOverlay=null,this._loaded=0}var n=t("./Common"),o=t("./Scene");e.exports=s,s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.init=function(){this.bg=new WBB.Sprite({texture:n.assetManager.getTexture("preloader_bg"),x:n.STAGE_WIDTH/2,y:n.STAGE_HEIGHT/2,anchorXY:.5}).addTo(this),this.bar=new WBB.Sprite({texture:n.assetManager.getTexture("preloader_fill"),x:(n.STAGE_WIDTH-n.assetManager.getTexture("preloader_fill").width)/2,xStart:(n.STAGE_WIDTH-n.assetManager.getTexture("preloader_fill").width)/2,y:n.STAGE_HEIGHT/2+210,anchorX:1,anchorY:.5}).addTo(this),this.barFrame=this.bar.texture.frame,this.barWidth=this.bar.width,this.barOverlay=new WBB.Sprite({texture:n.assetManager.getTexture("preloader_overlay"),x:n.STAGE_WIDTH/2,y:this.bar.y,anchorX:.689,anchorY:.5}).addTo(this)},s.prototype.dispose=function(){this.removeChild(this.bg),this.removeChild(this.bar),this.removeChild(this.barOverlay),this.bg.texture.destroy(!0),this.bar.texture.destroy(!0),this.bar.destroy(!0),this.barOverlay.destroy(),this.bg=null,this.barFrame=null,this.barWidth=null,o.prototype.dispose.call(this)},s.prototype.resize=function(){this.x=Math.round((p3.View.width-n.STAGE_WIDTH)/2)},s.prototype.appear=function(){this.animateIn(null)},s.prototype.update=function(){this.bar.position.x=this.bar.xStart+this._loaded/100*this.barWidth,this.barFrame.width=Math.floor(this._loaded*this.barWidth/100),this.barFrame.x=this.barWidth-this.barFrame.width,this.bar.texture.frame=this.barFrame},Object.defineProperty(s.prototype,"loaded",{get:function(){return this._loaded},set:function(t){this._loaded=t}})},{"./Common":7,"./Scene":21}],19:[function(t,e,i){function s(){PIXI.Container.call(this),this.projectorGlow=null,this.scaleTween=null,this.alphaTween=null,this.init()}var n=t("./Common");e.exports=s,s.prototype=Object.create(PIXI.Container.prototype),s.prototype.constructor=s,s.prototype.init=function(){this.projectorGlow=new WBB.Sprite({texture:n.assetManager.getTexture("projector_glow"),anchorX:.5,anchorY:.05,x:0,y:0,alpha:.2}).addTo(this)},s.prototype.normalize=function(t){return t>1?1:0>t?0:t},s.prototype.play=function(){var t=5,e=3;this.scaleTween=TweenMax.to(this.projectorGlow.scale,t,{x:e,y:e,ease:RoughEase.ease.config({template:Power0.easeNone,strength:1,points:20,taper:"none",randomize:!0,clamp:!1}),repeat:-1,yoyo:!0}),this.alphaTween=TweenMax.to(this.projectorGlow,t,{alpha:.4,ease:Linear.easeNone,repeat:-1,yoyo:!0})},s.prototype.pause=function(){this.scaleTween&&this.scaleTween.pause(),this.alphaTween&&this.alphaTween.pause()},s.prototype.resume=function(){this.scaleTween&&this.alphaTween?(this.scaleTween.resume(),this.alphaTween.resume()):this.play()},s.prototype.doSeppuku=function(){this.scaleTween&&(this.scaleTween.kill(),this.scaleTween=null),this.alphaTween&&(this.alphaTween.kill(),this.alphaTween=null),this.removeChild(this.projectorGlow),this.projectorGlow.destroy(),this.projectorGlow=null,this.destroy()}},{"./Common":7}],20:[function(t,e,i){function s(){this.sceneBgSprite=null,this.wellDoneText=null,this.youHaveScoredText=null,this.scoreText=null,this.elapsed=null,this.now=null,this.emitter=null,this._homeButton=null,this._replayButton=null,this._soundButton=null,o.call(this)}var n=t("./Common"),o=(t("./Transition"),t("./Scene")),a=t("./Button"),r=t("./MuteButton");e.exports=s,s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.init=function(){this.sceneBgSprite=new WBB.Sprite({texture:n.assetManager.getTexture("results",".jpg"),anchorXY:.5,x:n.STAGE_WIDTH/2,y:n.STAGE_HEIGHT/2}).addTo(this);var t=60;"pl"===n.language&&(t=55),this.wellDoneText=new PIXI.Text(n.languages.results_too_noisy[n.language],{font:t+"px "+n.font,fill:10897730,align:"center",stroke:4141847,strokeThickness:3,padding:20}),this.wellDoneText.applyParams({x:Math.floor(n.STAGE_WIDTH/2-this.wellDoneText.width/2),y:"pl"===n.language?86:78}).addTo(this),this.youHaveScoredText=new PIXI.Text(n.languages.results_scored[n.language],{font:"55px "+n.font,fill:10897730,align:"center",stroke:4141847,strokeThickness:3,padding:20}),this.youHaveScoredText.applyParams({x:Math.floor(n.STAGE_WIDTH/2-this.youHaveScoredText.width/2),y:168}).addTo(this),this.scoreText=new PIXI.extras.BitmapText("0",{font:"90px FinalScore",align:"center"}),this.scoreText.applyParams({x:Math.floor(n.STAGE_WIDTH/2-this.scoreText.width/2)-9,y:252}).addTo(this),this._homeButton=new a({textures:[n.assetManager.getTexture("but_home_def"),n.assetManager.getTexture("but_home_over"),n.assetManager.getTexture("but_home_pressed")],signals:{click:this.onHomeButtonClick,over:this.onButtonRollOver},signalScope:this,y:n.BUTTONS_TOP_OFFSET,animate:!0}).addTo(this),this._replayButton=new a({textures:[n.assetManager.getTexture("but_replay_def"),n.assetManager.getTexture("but_replay_over"),n.assetManager.getTexture("but_replay_pressed")],signals:{click:this.onReplayButtonClick,over:this.onButtonRollOver},signalScope:this,x:1320,y:465,animate:!0}).addTo(this),this._soundButton=new r({textures:[n.assetManager.getTexture("but_musicon_def"),n.assetManager.getTexture("but_musicoff_def"),n.assetManager.getTexture("but_musicon_over"),n.assetManager.getTexture("but_musicoff_over"),n.assetManager.getTexture("but_musicon_pressed"),n.assetManager.getTexture("but_musicoff_pressed")],signals:{over:this.onButtonRollOver},signalScope:this,y:n.BUTTONS_TOP_OFFSET,animate:!0}).addTo(this)},s.prototype.dispose=function(){n.animator.removeAll(),TweenMax.killAll(),this.emitter.emit=!1,this.emitter.destroy(),this.emitter=null,this.removeChild(this.wellDoneText),this.removeChild(this.youHaveScoredText),this.removeChild(this.scoreText),this.wellDoneText.destroy(),this.youHaveScoredText.destroy(),this.scoreText.destroy(),this.wellDoneText=null,this.youHaveScoredText=null,this.scoreText=null,this._homeButton.dispose(),this._replayButton.dispose(),this._soundButton.dispose(),o.prototype.dispose.call(this)},s.prototype.resize=function(){this.x=Math.round((p3.View.width-n.STAGE_WIDTH)/2),this._homeButton.x=Math.round((n.STAGE_WIDTH-p3.View.width)/2+n.BUTTONS_SIDE_OFFSET),this._soundButton.x=Math.round((n.STAGE_WIDTH+p3.View.width)/2-n.BUTTONS_SIDE_OFFSET)},s.prototype.playPopcorns=function(){var t="sfx_popcorn_burst_00";n.audioManager.playSound(t,{volume:1})},s.prototype.appear=function(){this.animateIn(),this.playPopcorns(),this.showPopcorns(),n.audioManager.playSound("sfx_bears_yeah")},s.prototype.showPopcorns=function(){var t=[n.assetManager.getTexture("part_popcorn1"),n.assetManager.getTexture("part_popcorn2")];this.emitter=new cloudkid.Emitter(this,t,n.particles),this.emitter.spawnPos.set(n.STAGE_WIDTH/2,460),this.elapsed=Date.now(),this.now=Date.now(),this.emitter.emit=!0},s.prototype.update=function(){this.now=Date.now(),this.emitter.update(.001*(this.now-this.elapsed)),this.elapsed=this.now},s.prototype.animateHomeButtonIn=function(){this._homeButton.scaleXY=0;var t=TweenMax.to(this._homeButton.scale,.4,{x:1,y:1,ease:Back.easeOut,easeParams:[2],onStart:function(){this._homeButton.visible=!0},onStartScope:this});return t},s.prototype.animateHomeButtonOut=function(){var t=TweenMax.to(this._homeButton.scale,.4,{x:0,y:0,ease:Back.easeIn,easeParams:[2],onComplete:function(){this._homeButton.visible=!1},onCompleteScope:this});return t},s.prototype.animateReplayButtonIn=function(){this._replayButton.scaleXY=0;var t=TweenMax.to(this._replayButton.scale,.4,{delay:.2,x:1,y:1,ease:Back.easeOut,easeParams:[2],onStart:function(){this._replayButton.visible=!0},onStartScope:this});return t},s.prototype.animateReplayButtonOut=function(){var t=TweenMax.to(this._replayButton.scale,.4,{x:0,y:0,ease:Back.easeIn,easeParams:[2],onComplete:function(){this._replayButton.visible=!1},onCompleteScope:this});return t},s.prototype.animateScore=function(){var t={val:0},e=TweenMax.to(t,n.SETTINGS.SCORE_DURATION,{val:n.score,ease:Cubic.easeOut,onUpdate:function(){Math.floor(t.val)>99999&&(this.scoreText.font="75 InGameScore",this.scoreText.position.y=264),this.scoreText.text=WBB.formattedNumber(Math.floor(t.val)),this.scoreText.position.x=Math.floor(n.STAGE_WIDTH/2-this.scoreText.width/2)-9},onUpdateScope:this});return e},s.prototype.animateIn=function(t,e){var i=new TimelineMax;i.vars.onComplete=t,i.vars.onCompleteScope=e,i.insert(this.animateScore()),i.insert(this.animateHomeButtonIn()),i.insert(this.animateReplayButtonIn())},s.prototype.animateOut=function(t,e){var i=new TimelineMax;i.vars.onComplete=t,i.vars.onCompleteScope=e,i.insert(this.animateHomeButtonOut()),i.insert(this.animateReplayButtonOut())},s.prototype.onHomeButtonClick=function(t){this.signals.home.dispatch()},s.prototype.onReplayButtonClick=function(t){n.commingFromIntro=!1,this.signals.next.dispatch()},s.prototype.onButtonRollOver=function(t){}},{"./Button":4,"./Common":7,"./MuteButton":15,"./Scene":21,"./Transition":28}],21:[function(t,e,i){function s(){this.signals={},this.signals.next=new signals.Signal,this.signals.previous=new signals.Signal,this.signals.home=new signals.Signal,this.signals.pause=new signals.Signal,PIXI.Container.call(this)}e.exports=s,s.prototype=Object.create(PIXI.Container.prototype),s.prototype.constructor=s,s.prototype.init=function(){},s.prototype.dispose=function(){this.signals.next.dispose(),this.signals.previous.dispose(),this.signals.home.dispose(),this.signals.pause.dispose(),this.removeChildren(),this.parent&&this.parent.removeChild(this),this.destroy()},s.prototype.resize=function(){},s.prototype.update=function(){},s.prototype.appear=function(){this.animateIn()},s.prototype.show=function(){this.animateIn()},s.prototype.hide=function(){},s.prototype.animateIn=function(t,e){e=e||window,t&&t.call(e)},s.prototype.animateOut=function(t,e){e=e||window,t&&t.call(e)}},{}],22:[function(t,e,i){function s(){this.updateAll=!1,this._stage=null,this._renderer=null,this._stack=[],this._transition=null}var n=(t("./Scene"),t("./Transition"));e.exports=s,s.prototype.init=function(t,e){this._stage=t,this._renderer=e},s.prototype.update=function(){if(this._stack.length)if(this.updateAll)for(var t,e=this._stack.length-1;e>=0;--e)t=this._stack[e],t.update();else this.top.update()},s.prototype.add=function(t,e){function i(t){if(this.top)if(this.top.hide(),this._transition.push){if(this._transition.replace)for(var e,i=0;i<this._stack.length;++i)e=this._stack[i],e.parent&&e.parent.removeChild(e)}else for(;this.top;)this.top.parent.removeChild(this.top),this.top.dispose(),this._stack.pop();t.init(),t.resize(),t.parent||this.stage.addChildAt(t,this._transition.parent.getChildIndex(this._transition)),this._stack.push(t),this._transition.wait||p3.Timestep.queueCall(t.appear,null,t),this._transition.out(),console.log(this._stack)}this.transitionInProgress||(this._transition=e||new n,!this._transition.requiresWebGL||this._renderer instanceof PIXI.WebGLRenderer||(this._transition=e.fallback(),this._transition.push=e.push,this._transition.replace=e.replace,this._transition.wait=e.wait,this._transition.update=e.update),this._transition.init(),this._stage.addChild(this._transition),this._transition.signals["in"].addOnce(function(e){p3.Timestep.queueCall(i,[t],this)},this),this._transition.signals.out.addOnce(function(e){this._transition=null,e.parent.removeChild(e),e.dispose(),e.wait&&p3.Timestep.queueCall(t.appear,null,t)},this),this._transition["in"]())},s.prototype.remove=function(t,e){function i(t){for(var e=0;t>e;++e)this.top.hide(),this.top.parent.removeChild(this.top),this.top.dispose(),this._stack.pop();var i=this.top;i.resize(),i.parent||this.stage.addChildAt(i,this._transition.parent.getChildIndex(this._transition)),this._transition.wait||i.show(),this._transition.out(),console.log(this._stack)}this.transitionInProgress||(this._transition=t||new n,e=Math.max(1,e)||1,!this._transition.requiresWebGL||this._renderer instanceof PIXI.WebGLRenderer||(this._transition=t.fallback(),this._transition.push=t.push,this._transition.replace=t.replace,this._transition.wait=t.wait),this._transition.init(),this._stage.addChild(this._transition),this._transition.signals["in"].addOnce(function(t){p3.Timestep.queueCall(i,[e],this)},this),this._transition.signals.out.addOnce(function(t){this._transition=null,t.parent.removeChild(t),t.dispose(),t.wait&&this.top.show()},this),this._transition["in"]())},s.prototype.clear=function(){if(!this.transitionInProgress){for(var t,e=0;e<this._stack.length;++e)t=this._stack[e],t.hide(),t.parent.removeChild(t),t.dispose();this._stack.length=0}},s.prototype.resize=function(){for(var t,e=0;e<this._stack.length;++e)t=this._stack[e],t.resize();this._transition&&this._transition.resize()},Object.defineProperty(s.prototype,"stage",{get:function(){return this._stage}}),Object.defineProperty(s.prototype,"top",{get:function(){return this._stack.length?this._stack[this._stack.length-1]:null}}),Object.defineProperty(s.prototype,"transitionInProgress",{get:function(){return null!==this._transition?!0:!1}})},{"./Scene":21,"./Transition":28}],23:[function(t,e,i){function s(){PIXI.Container.call(this),this.bg=null,this.textSprite=null,this.init()}var n=t("./Common");e.exports=s,s.prototype=Object.create(PIXI.Container.prototype),s.prototype.constructor=s,s.prototype.init=function(){this.bg=new WBB.Sprite({texture:n.assetManager.getTexture("score_box"),anchorXY:.5,x:0,y:0}).addTo(this),this.textSprite=new PIXI.extras.BitmapText(n.score+"",{font:"45px InGameScore",align:"center"}),this.textSprite.applyParams({x:Math.floor(-this.textSprite.width/2),y:Math.floor(-this.textSprite.height/2)-5}).addTo(this)},s.prototype.doSeppuku=function(){this.removeChild(this.bg),this.removeChild(this.textSprite),this.bg.destroy(),this.textSprite.destroy(),this.bg=null,this.textSprite=null,this.destroy()},Object.defineProperty(s.prototype,"value",{get:function(){return n.score},set:function(t){n.score=t,this.textSprite.text=WBB.formattedNumber(n.score),this.textSprite.x=Math.floor(-this.textSprite.width/2)}})},{"./Common":7}],24:[function(t,e,i){var s=[{seatY:340,anchorX:.488,scale:.8,gScale:.9,goerX:[-442,-289,-142,0,150,302,458],goerY:310},{seatY:423,anchorX:.488,scale:.84,gScale:.92,goerX:[-442,-289,-142,0,150,302,458],goerY:386},{seatY:516,anchorX:.488,scale:.879,gScale:.94,goerX:[-442,-289,-142,0,150,302,458],goerY:473},{seatY:596,anchorX:.488,scale:.92,gScale:.96,goerX:[-442,-289,-142,0,150,302,458],goerY:546},{seatY:688,anchorX:.488,scale:.96,gScale:.98,goerX:[-442,-289,-142,0,150,302,458],goerY:631},{seatY:790,anchorX:.488,scale:1,gScale:1,goerX:[-442,-289,-142,0,150,302,458],goerY:725},{seatY:900,anchorX:.488,scale:1.055}];e.exports=s},{}],25:[function(t,e,i){function s(){r.call(this),this._skipButton=null,this._soundButton=null,this._skipped=!1,this.signals.skip=new signals.Signal}var n=t("./Common"),o=t("./Button"),a=t("./MuteButton"),r=t("./Scene");e.exports=s,s.prototype=Object.create(r.prototype),s.prototype.constructor=s,s.prototype.init=function(){n.hasViewedIntro&&(this._skipButton=new o({textures:[n.assetManager.getTexture("but_arrow_def"),n.assetManager.getTexture("but_arrow_over"),n.assetManager.getTexture("but_arrow_pressed")],signals:{click:this.onSkipButtonClick,over:this.onButtonRollOver},signalScope:this,y:p3.View.height-142,animate:!0,visible:!0}).addTo(this)),this._soundButton=new a({textures:[n.assetManager.getTexture("but_musicon_def"),n.assetManager.getTexture("but_musicoff_def"),n.assetManager.getTexture("but_musicon_over"),n.assetManager.getTexture("but_musicoff_over"),n.assetManager.getTexture("but_musicon_pressed"),n.assetManager.getTexture("but_musicoff_pressed")],signals:{over:this.onButtonRollOver},signalScope:this,y:n.BUTTONS_TOP_OFFSET,animate:!0}).addTo(this)},s.prototype.dispose=function(){this._skipButton&&(this._skipButton.dispose(),this.signals.skip.dispose()),this._soundButton.dispose(),r.prototype.dispose.call(this)},s.prototype.resize=function(){this._skipButton&&(this._skipButton.x=(n.STAGE_WIDTH+p3.View.width)/2-140),this._soundButton.x=(n.STAGE_WIDTH+p3.View.width)/2-n.BUTTONS_SIDE_OFFSET},s.prototype.appear=function(){this.animateIn()},s.prototype.hide=function(){this.animateOut()},s.prototype.next=function(){this._skipped||this.signals.next.dispatch()},s.prototype.animateIn=function(){},s.prototype.animateOut=function(){this._skipButton&&TweenMax.to(this._skipButton.scale,.4,{x:0,y:0,ease:Back.easeOut,easeParams:[2]})},s.prototype.onSkipButtonClick=function(t){this._skipped=!0,this.signals.skip.dispatch()},s.prototype.onButtonRollOver=function(t){}},{"./Button":4,"./Common":7,"./MuteButton":15,"./Scene":21}],26:[function(t,e,i){function s(){this._playButton=null,this._soundButton=null,r.call(this)}var n=t("./Common"),o=t("./Button"),a=t("./MuteButton"),r=t("./Scene");t("./Transition");e.exports=s,s.prototype=Object.create(r.prototype),s.prototype.constructor=s,s.prototype.init=function(){this.bg=new WBB.Sprite({texture:n.assetManager.getTexture("splash_screen",".jpg"),scaleXY:1.1,anchorXY:.5}).addTo(this),this.brown=new WBB.Sprite({texture:n.assetManager.getTexture("panda3"),x:615,y:640,anchorX:.5,anchorY:1,visible:!1}).addTo(this),this.polar=new WBB.Sprite({texture:n.assetManager.getTexture("panda2"),x:1120,y:720,anchorX:.5,anchorY:1,visible:!1}).addTo(this),this.panda=new WBB.Sprite({texture:n.assetManager.getTexture("panda1"),x:875,y:960,anchorX:.5,anchorY:1,visible:!1}).addTo(this),this.wbbLogo=new WBB.Sprite({texture:n.assetManager.getTexture("wbb_logo"),x:n.STAGE_WIDTH/2,y:110,anchorX:.5,anchorY:.5}).addTo(this),this.shush=new WBB.Sprite({texture:n.assetManager.getTexture("title"),x:1080,y:310,anchorX:.5,anchorY:.5,visible:!1}).addTo(this),this._playButton=new o({textures:[n.assetManager.getTexture("but_play_def"),n.assetManager.getTexture("but_play_over"),n.assetManager.getTexture("but_play_pressed")],signals:{click:this.onPlayButtonClick,over:this.onButtonRollOver},signalScope:this,y:p3.View.height-142,animate:!0}).addTo(this),this._soundButton=new a({textures:[n.assetManager.getTexture("but_musicon_def"),n.assetManager.getTexture("but_musicoff_def"),n.assetManager.getTexture("but_musicon_over"),n.assetManager.getTexture("but_musicoff_over"),n.assetManager.getTexture("but_musicon_pressed"),n.assetManager.getTexture("but_musicoff_pressed")],signals:{over:this.onButtonRollOver},signalScope:this,y:n.BUTTONS_TOP_OFFSET,animate:!0}).addTo(this)},s.prototype.onPlayButtonClick=function(){n.audioManager.stopSound(n.themeMusic),n.commingFromIntro=!0,this.signals.next.dispatch()},s.prototype.onButtonRollOver=function(){},s.prototype.dispose=function(){this._playButton.dispose(),this._soundButton.dispose(),TweenMax.killAll(),r.prototype.dispose.call(this)},s.prototype.resize=function(){this.x=Math.round((p3.View.width-n.STAGE_WIDTH)/2),this.bg.x=Math.round(n.STAGE_WIDTH/2),this.bg.y=Math.round(n.STAGE_HEIGHT/2),this._playButton.x=Math.round((n.STAGE_WIDTH+p3.View.width)/2-140),this._soundButton.x=Math.round((n.STAGE_WIDTH+p3.View.width)/2-n.BUTTONS_SIDE_OFFSET)},s.prototype.appear=function(){this.animateIn(),n.audioManager.playSound(n.themeMusic,{volume:n.SETTINGS.MUSIC.SPLASH})},s.prototype.animateBgIn=function(){var t=TweenMax.to(this.bg.scale,2.5,{x:1.03,y:1.03,ease:Cubic.easeOut,easeParams:[2],onStart:function(){},onStartScope:this});return t},s.prototype.animatePandaIn=function(){var t=TweenMax.from(this.panda.position,.1,{delay:.7,x:-700,y:350,alpha:0,ease:Cubic.easeOut,easeParams:[2],onStart:function(){this.panda.visible=!0},onStartScope:this});return t},s.prototype.animatePolarIn=function(){var t=TweenMax.from(this.polar.position,.1,{delay:.8,x:2100,y:350,alpha:0,ease:Cubic.easeOut,easeParams:[2],onStart:function(){this.polar.visible=!0},onStartScope:this});return t},s.prototype.animateBrownIn=function(){var t=TweenMax.from(this.brown.position,.1,{delay:.9,y:0,alpha:0,ease:Cubic.easeOut,easeParams:[2],onStart:function(){this.brown.visible=!0},onStartScope:this});return t},s.prototype.animateShushIn=function(){var t=TweenMax.from(this.shush.scale,.4,{delay:1.1,x:1.3,y:1.3,alpha:0,ease:Elastic.easeOut,easeParams:[.7],onStart:function(){this.shush.visible=!0},onStartScope:this});return t},s.prototype.animateShushRotate=function(){var t=(TweenMax.to(this.shush,5,{delay:1.5,rotation:.01,ease:Cubic.easeInOut,repeat:-1,yoyo:!0}),TweenMax.to(this.shush.scale,5,{delay:1.5,x:1.03,y:1.03,ease:Cubic.easeInOut,repeat:-1,yoyo:!0}));return t},s.prototype.animateBrownScale=function(){var t=TweenMax.to(this.brown.scale,.06,{delay:1,x:.9,y:.8,ease:Cubic.easeOut,easeParams:[1],repeat:1,yoyo:!0});return t},s.prototype.cameraShake=function(){var t=TweenMax.to(this.position,.1,{delay:1,x:.5*(p3.View.width-n.STAGE_WIDTH)+10,y:15,ease:Elastic.easeInOut,repeat:1,yoyo:!0});return t},s.prototype.animateSoundButtonIn=function(){this._soundButton.scaleXY=0;var t=TweenMax.to(this._soundButton.scale,.4,{x:1,y:1,ease:Back.easeOut,easeParams:[2],onStart:function(){this._soundButton.visible=!0},onStartScope:this});return t},s.prototype.animatePlayButtonIn=function(){this._playButton.scaleXY=0;var t=TweenMax.to(this._playButton.scale,.4,{delay:.3,x:1,y:1,ease:Back.easeOut,easeParams:[2],onStart:function(){this._playButton.visible=!0},onStartScope:this});return t},s.prototype.animateIn=function(t,e){n.audioManager.stopSound(n.currentTrack);var i=new TimelineMax;i.vars.onComplete=t,i.vars.onCompleteScope=e,i.insert(this.animateBgIn()),i.insert(this.animatePandaIn()),i.insert(this.animatePolarIn()),i.insert(this.animateBrownIn()),i.insert(this.animateBrownScale()),i.insert(this.cameraShake()),i.insert(this.animateShushIn()),i.insert(this.animateShushRotate())}},{"./Button":4,"./Common":7,"./MuteButton":15,"./Scene":21,"./Transition":28}],27:[function(t,e,i){t("./Common");Timer=function(){this.timerStart=null,this.timerEnd=null,this._isPaused=null,this._pauseStart=null,this._pauseTime=null,this._isRunning=null},e.exports=Timer,Timer.prototype.constructor=Timer,Timer.prototype.reset=function(){this.timerStart=0,this.timerEnd=null,this._isPaused=!1,this._pauseStart=Date.now(),this._pauseTime=0,this._isRunning=!1},Timer.prototype.start=function(){this.reset(),this._isRunning=!0,this.timerStart=Date.now()},Timer.prototype.stop=function(){this._isRunning=!1,this.timerEnd=Date.now()},Timer.prototype.pause=function(){this._isPaused||(this._pauseStart=Date.now(),this._isPaused=!0)},Timer.prototype.resume=function(){this._isPaused&&(this._pauseEnd=Date.now(),this._isPaused=!1,this._pauseTime+=this._pauseEnd-this._pauseStart)},Timer.prototype._getTotalTime=function(){return null===this.timerEnd?Date.now()-this.timerStart:this.timerEnd-this.timerStart},Timer.prototype._getExecutionTime=function(){var t=Date.now();return this._isPaused?t-this.timerStart-(t-this._pauseStart)-this._pauseTime:null===this.timerEnd?t-this.timerStart-this._pauseTime:this.timerEnd-this.timerStart-this._pauseTime},Object.defineProperty(Timer.prototype,"running",{get:function(){return this._isRunning},set:function(t){this._isRunning=t}}),Object.defineProperty(Timer.prototype,"paused",{get:function(){return this._isPaused},set:function(t){this._isPaused=t}}),Object.defineProperty(Timer.prototype,"elapsed",{get:function(){return this.running?this._getExecutionTime():0}}),Object.defineProperty(Timer.prototype,"elapsedTotal",{get:function(){return this._getTotalTime()}})},{"./Common":7}],28:[function(t,e,i){function s(){this.signals={},this.signals["in"]=new signals.Signal,this.signals.out=new signals.Signal,this.push=!1,this.replace=!0,this.wait=!0,this.requiresWebGL=!1,PIXI.Container.call(this)}e.exports=s,s.prototype=Object.create(PIXI.Container.prototype),s.prototype.constructor=s,s.prototype.init=function(){},s.prototype.dispose=function(){this.signals["in"].dispose(),this.signals.out.dispose(),this.removeChildren()},s.prototype["in"]=function(){this.signals["in"].dispatch(this)},s.prototype.out=function(){this.signals.out.dispatch(this)},s.prototype.resize=function(){},s.prototype.fallback=function(){}},{}],29:[function(t,e,i){var s={brown:{home:{x:655,y:330}},panda:{home:{x:950,y:310}},polar:{home:{x:1255,y:330}}};e.exports=s},{}],30:[function(t,e,i){var s={male:{white:{head:["male_head_w_001","male_head_w_002","male_head_w_003","male_head_w_004"],body:["male_body_w_001","male_body_w_002","male_body_w_003"],state:{corn:[["male_corn_down_w_001","male_corn_down_w_002","male_corn_down_w_003"],["male_corn_up_w_001","male_corn_up_w_002","male_corn_up_w_003"]],drink:[["male_drink_down_w_001","male_drink_down_w_002","male_drink_down_w_003"],["male_drink_up_w_001","male_drink_up_w_002","male_drink_up_w_003"]],mobile:[["male_mobile_down_w_001","male_mobile_down_w_002","male_mobile_down_w_003"],["male_mobile_up_w_001","male_mobile_up_w_002","male_mobile_up_w_003"]]},shush:["male_shush_w_001","male_shush_w_002","male_shush_w_003"]},black:{head:["male_head_b_001","male_head_b_002","male_head_b_003","male_head_b_004"],body:["male_body_b_001","male_body_b_002","male_body_b_003"],state:{corn:[["male_corn_down_b_001","male_corn_down_b_002","male_corn_down_b_003"],["male_corn_up_b_001","male_corn_up_b_002","male_corn_up_b_003"]],drink:[["male_drink_down_b_001","male_drink_down_b_002","male_drink_down_b_003"],["male_drink_up_b_001","male_drink_up_b_002","male_drink_up_b_003"]],mobile:[["male_mobile_down_b_001","male_mobile_down_b_002","male_mobile_down_b_003"],["male_mobile_up_b_001","male_mobile_up_b_002","male_mobile_up_b_003"]]},shush:["male_shush_b_001","male_shush_b_002","male_shush_b_003"]},eyes:["male_eyes_open","male_eyes_blink"],shushedEyes:"male_eyes_shush",stateEyes:["male_eyes_down","male_eyes_left","male_eyes_crossed","male_eyes_right"]},female:{white:{head:["female_head_w_001","female_head_w_002","female_head_w_003","female_head_w_004"],body:["female_body_w_001","female_body_w_002","female_body_w_003"],state:{corn:[["female_corn_down_w_001","female_corn_down_w_002","female_corn_down_w_003"],["female_corn_up_w_001","female_corn_up_w_002","female_corn_up_w_003"]],drink:[["female_drink_down_w_001","female_drink_down_w_002","female_drink_down_w_003"],["female_drink_up_w_001","female_drink_up_w_002","female_drink_up_w_003"]],mobile:[["female_mobile_down_w_001","female_mobile_down_w_002","female_mobile_down_w_003"],["female_mobile_up_w_001","female_mobile_up_w_002","female_mobile_up_w_003"]]},shush:["female_shush_w_001","female_shush_w_002","female_shush_w_003"]},black:{head:["female_head_b_001","female_head_b_002","female_head_b_003","female_head_b_004"],body:["female_body_b_001","female_body_b_002","female_body_b_003"],state:{corn:[["female_corn_down_b_001","female_corn_down_b_002","female_corn_down_b_003"],["female_corn_up_b_001","female_corn_up_b_002","female_corn_up_b_003"]],drink:[["female_drink_down_b_001","female_drink_down_b_002","female_drink_down_b_003"],["female_drink_up_b_001","female_drink_up_b_002","female_drink_up_b_003"]],mobile:[["female_mobile_down_b_001","female_mobile_down_b_002","female_mobile_down_b_003"],["female_mobile_up_b_001","female_mobile_up_b_002","female_mobile_up_b_003"]]},shush:["female_shush_b_001","female_shush_b_002","female_shush_b_003"]},eyes:["female_eyes_open","female_eyes_blink"],shushedEyes:"female_eyes_shush",stateEyes:["female_eyes_down","female_eyes_left","female_eyes_crossed","female_eyes_right"]}};e.exports=s},{}],31:[function(t,e,i){e.exports={Main:t("./main")}},{"./main":33}],32:[function(t,e,i){function s(){this.id="enea.sk";try{this.isAvailable=!!localStorage.getItem}catch(t){this.isAvailable=!1,
console.log("Local storage is not supported")}}s.prototype.constructor=s,s.prototype.get=function(t,e){var i;try{i=localStorage.getItem(this.id+"."+t)}catch(s){console.log("ENEA.Storage : "+s)}return null===i?e:i},s.prototype.set=function(t,e){try{localStorage.setItem(this.id+"."+t,e)}catch(i){console.log("ENEA.Storage : "+i)}},s.prototype.remove=function(t){localStorage.removeItem(this.id+"."+t)},s.prototype.has=function(t){return null!==localStorage.getItem(this.id+"."+t)},s.prototype.removeAllById=function(){for(var t=localStorage.length-1;t>=0;t--){var e=localStorage.key(t);-1!==e.indexOf(this.id+".")&&localStorage.removeItem(e)}},window.storage=new s},{}],33:[function(t,e,i){function s(t,e,i){this._width=t,this._height=e,this._language=i,this._game=null,this._preloader=null,this.init()}var n=t("./Common"),o=t("./SceneManager"),a=t("./Application"),r=t("./Preloader");t("./localstorage");s.prototype.init=function(){n.language=this._language?this._language:p3.Utils.getURLParameter("lang",n.language);var t=new p3.ViewParams;t.width=this._width,t.height=this._height,t.holderID="game",t.rotateImageUrl=n.PATHS.IMAGES+"language_"+n.language+"/rotate_device.jpg",t.rotateImageColor="#000000",PIXI.RETINA_PREFIX=/\_(?=[^_]*$)(.+)x/,p3.Device.init(window.bowser),n.mobilePrefix=p3.Device.isMobile?"_mobile":"",TweenMax.defaultOverwrite="none",TweenMax.ticker.fps(60),n.assetManager=p3.AssetManager.instance,n.audioManager=p3.AudioManager.instance;var e=new p3.View(t);e.signals.ready.addOnce(function(e){var i={};i.view=e,i.transparent=!1,i.antialias=!1,i.preserveDrawingBuffer=!1,i.resolution=1;var s=new PIXI.Container;n.stage=s,p3.Device.isCocoonJS&&(s.scale.x=window.innerHeight/t.height,s.scale.y=window.innerHeight/t.height);var a=p3.Device.isCocoonJS?new PIXI.WebGLRenderer(window.innerWidth,window.innerHeight,i):PIXI.autoDetectRenderer(this._width,this._height,i);a.backgroundColor=0,n.renderer=a,n.isWebGL=a instanceof PIXI.WebGLRenderer;var r=new o;r.init(s,a),n.sceneManager=r;var h=new p3.Timestep(p3.Timestep.FIXED);h.init(this.update,this.render,this),n.timestep=h,n.animator=new p3.Animator,n.animator.init(),window.delay=function(t,e,i){return n.animator.setTimeout(t,e,i)},n.fillTexture=this.generateFillTexture(),n.introFillTexture=this.generateFillTexture(n.FILLTEXTURE_ALPHA),this.loadPreloader()},this),e.signals.resize.add(this.onCanvasResize,this),n.view=e},s.prototype.generateFillTexture=function(t){var e=new PIXI.Graphics;e.beginFill(n.FILLTEXTURE_COLOR,t||1),e.drawRect(0,0,2,2);var i=e.generateTexture(n.renderer,1,PIXI.SCALE_MODES.LINEAR);return e.destroy(),e=null,i},s.prototype.onLoadingProgress=function(t){this._preloader.loaded=t.progress},s.prototype.onLoadingCompleted=function(){this._preloader.loaded=100,this._preloader.animateOut(),n.languages=n.assetManager.getJSON("languages"),n.particles=n.assetManager.getJSON("particles"),n.animator.setTimeout(function(){n.assetManager.signalProgress.removeAll(),n.assetManager.signalCompleted.removeAll(),this.startGame()},.4,this)},s.prototype.loadPreloader=function(){var t=[{name:"preloader_bg",url:n.PATHS.IMAGES+"preloader.jpg"},{name:"preloader",url:n.PATHS.IMAGES+"preloader.json"}],e=[];n.assetManager.addFiles(t),n.assetManager.signalCompleted.addOnce(function(){this.loadAssets()},this),n.assetManager.load(),p3.AudioManager.instance.addSounds(e,[".mp3",".ogg"],"")},s.prototype.loadAssets=function(){var t=[{name:"transition",url:n.PATHS.IMAGES+"transition.png"},{name:"splash_screen",url:n.PATHS.IMAGES+"splash_screen.jpg"},{name:"results",url:n.PATHS.IMAGES+"endgame_bg.jpg"},{name:"game",url:n.PATHS.IMAGES+"game.json"},{name:"game_bg",url:n.PATHS.IMAGES+"game_bg.jpg"},{name:"intro",url:n.PATHS.IMAGES+"intro.json"},{name:"intro2",url:n.PATHS.IMAGES+"intro2.json"},{name:"intro3",url:n.PATHS.IMAGES+"intro_screen3.jpg"},{name:"shared",url:n.PATHS.IMAGES+"shared.json"},{name:"splash",url:n.PATHS.IMAGES+"splash.json"},{name:"languages",url:n.PATHS.DATA+"languages.json"},{name:"particles",url:n.PATHS.DATA+"particle_emitter_popcorn_ending.json"}];t=t.concat([{name:"title",url:n.PATHS.IMAGES+"language_"+n.language+"/languages.json"},{name:"finalscore_decour_65",url:n.PATHS.FONTS+"finalscore_decour_65.fnt"},{name:"ingamescore_decour_45",url:n.PATHS.FONTS+"ingamescore_decour_45.fnt"},{name:"multiply_decour_45",url:n.PATHS.FONTS+"multiply_decour_45.fnt"},{name:"text_avenir35",url:n.PATHS.FONTS+"text_avenir35.fnt"},{name:"title_decour_80",url:n.PATHS.FONTS+"title_decour_80.fnt"},{name:"title_decour55",url:n.PATHS.FONTS+"title_decour55.fnt"}]);var e=["sfx_btn_rollover","sfx_btn_press","sfx_popcorn_burst_00","sfx_bears_yeah","sfx_drink_00","sfx_drink_01","sfx_drink_02","sfx_drink_03","sfx_drink_04","sfx_drink_05","sfx_drink_move_00","sfx_drink_move_01","sfx_drink_move_02","sfx_drink_move_03","sfx_drink_move_04","sfx_drink_move_05","sfx_eat_00","sfx_eat_01","sfx_eat_02","sfx_eat_03","sfx_eat_04","sfx_eat_05","sfx_food_rustle_00","sfx_food_rustle_01","sfx_message_00","sfx_mobile_message_00","sfx_mobile_message_01","sfx_mobile_tap_00","sfx_mobile_vibrate_00","sfx_phone_conversation_babble_01","sfx_phone_conversation_babble_02","sfx_ninja_move_00","sfx_ninja_move_01","sfx_ninja_move_02","sfx_ninja_move_03","sfx_ninja_move_04","sfx_ninja_move_05","sfx_press_seat","sfx_ringtone_00","sfx_shush_00","sfx_shush_01","sfx_shush_02","sfx_shush_03","sfx_shush_04","sfx_woman_cough_00","sfx_woman_cough_01","sfx_woman_cough_02"],i=["music_castle_50","music_game_start","music_raid_30","music_thriller_30"];switch(n.language){case"fr":case"ar":n.themeMusic="music_theme_"+n.language}i.push(n.themeMusic),t.length?(this._preloader=new r,n.sceneManager.add(this._preloader),n.assetManager.addFiles(t),n.assetManager.signalProgress.add(this.onLoadingProgress,this),n.assetManager.signalCompleted.addOnce(this.onLoadingCompleted,this),n.assetManager.load(),n.audioManager.addSounds(e,[".mp3",".ogg"],n.PATHS.SOUNDS+"sfx/"),n.audioManager.addSounds(i,[".mp3",".ogg"],n.PATHS.SOUNDS+"music/")):this.startGame()},s.prototype.startGame=function(){n.font="ar"===n.language?"FredFredburgerAra-Regular":"FredFredburger-Regular",storage.id="com.cn.weBareBears",storage.has("intro")||storage.set("intro",0),n.hasViewedIntro="1"===storage.get("intro")?!0:!1,this._game=new a,this._game.init()},s.prototype.update=function(){n.view.isCorrectOrientation()&&(n.sceneManager.update(),n.animator.update())},s.prototype.render=function(){n.renderer.render(n.stage)},s.prototype.onCanvasResize=function(t){var e=p3.AudioManager.instance;t?(n.renderer.resize(p3.View.width,p3.View.height),n.sceneManager&&n.sceneManager.resize(),n.gameScene&&(null!==n.isAudioMuted&&e.mute(n.isAudioMuted),console.log("resuming gameScene"),TweenMax.resumeAll(),n.gameScene.resume())):n.gameScene&&(n.isAudioMuted=e.isMute,e.mute(!0),console.log("pausing gameScene"),TweenMax.pauseAll(),n.gameScene.pause())},e.exports=s},{"./Application":2,"./Common":7,"./Preloader":18,"./SceneManager":22,"./localstorage":32}],34:[function(t,e,i){var s={brown:{y1:480,y2:535,speed:.15},panda:{y1:480,y2:535,speed:.1},polar:{y1:480,y2:535,speed:.1}};e.exports=s},{}],35:[function(t,e,i){var s={brown:{start:{x:1200,y:550},end:{x:790,y:550},speed:110,height:15,amp:23},panda:{start:{x:1500,y:550},end:{x:950,y:550},speed:140,height:14,amp:31},polar:{start:{x:1700,y:550},end:{x:1125,y:550},speed:140,height:13,amp:25}};e.exports=s},{}],36:[function(t,e,i){var s=t("./core");PIXI.Container.prototype.applyParams=function(t){for(var e in t)this[e]=t[e];return this},PIXI.Container.prototype.addTo=function(t){return t.addChild(this),this},Object.defineProperty(PIXI.DisplayObject.prototype,"responsive",{set:function(t){this.interactive=t,this.buttonMode=t}}),Object.defineProperty(PIXI.Sprite.prototype,"anchorX",{get:function(){return this.anchor.x},set:function(t){this.anchor.x=t}}),Object.defineProperty(PIXI.Sprite.prototype,"anchorY",{get:function(){return this.anchor.y},set:function(t){this.anchor.y=t}}),Object.defineProperty(PIXI.Sprite.prototype,"anchorXY",{set:function(t){this.anchor.x=t,this.anchor.y=t}}),Object.defineProperty(PIXI.DisplayObject.prototype,"scaleX",{get:function(){return this.scale.x},set:function(t){this.scale.x=t}}),Object.defineProperty(PIXI.DisplayObject.prototype,"scaleY",{get:function(){return this.scale.y},set:function(t){this.scale.y=t}}),Object.defineProperty(PIXI.DisplayObject.prototype,"scaleXY",{set:function(t){this.scale.x=t,this.scale.y=t}}),s.Sprite=function(t){return PIXI.Sprite.call(this,t.texture),this.applyParams(t),this},s.Sprite.prototype=Object.create(PIXI.Sprite.prototype),s.Sprite.prototype.constructor=s.Sprite,s.Container=function(t){return PIXI.Container.call(this),this.applyParams(t),this},s.Container.prototype=Object.create(PIXI.Container.prototype),s.Container.prototype.constructor=s.Container,s.formattedNumber=function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},{"./core":31}]},{},[1]);