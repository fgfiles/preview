!function(){function e(t,n,o){function r(i,s){if(!n[i]){if(!t[i]){var l="function"==typeof require&&require;if(!s&&l)return l(i,!0);if(a)return a(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[i]={exports:{}};t[i][0].call(c.exports,function(e){var n=t[i][1][e];return r(n||e)},c,c.exports,e,t,n,o)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<o.length;i++)r(o[i]);return r}return e}()({1:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=e("./AssetPack"),s=(o(i),e("../utils/Assert")),l=e("../utils/Safe"),u=function(){function e(){r(this,e),this.assetPacks={}}return a(e,[{key:"destroy",value:function(){for(var e=Object.keys(this.assetPacks);e.length>0;)this.assetPacks[e[0]].destroy(),delete this.assetPacks[e[0]],e.shift()}},{key:"preloadAssetPacks",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=0;n<t.length;n++){var o=t[n];(0,l.exists)(this.assetPacks[o])&&(this.addImageLoaders(e,this.assetPacks[o].images),this.addJsonLoaders(e,this.assetPacks[o].json),this.addFlumpLoaders(e,this.assetPacks[o].flump),this.addAudioLoaders(e,this.assetPacks[o].audio),this.addJsonHashAtlasLoaders(e,this.assetPacks[o].jsonAtlasHash),this.addBitmapFonts(e,this.assetPacks[o].bitmapFonts))}}},{key:"loadAssetPacks",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.preloadAssetPacks(e,t),e.load.start()}},{key:"unloadAssetPacks",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=0;n<t.length;n++){var o=t[n];(0,l.exists)(this.assetPacks[o])&&(this.unloadImages(e,this.assetPacks[o].images),this.unloadJson(e,this.assetPacks[o].json),this.unloadFlump(e,this.assetPacks[o].flump),this.unloadAudio(e,this.assetPacks[o].audio),this.unloadJsonAtlasHash(e,this.assetPacks[o].jsonAtlasHash),this.unloadBitmapFonts(e,this.assetPacks[o].bitmapFonts))}}},{key:"addStartCallback",value:function(e,t,n){e.load.onLoadStart.addOnce(t,n)}},{key:"addProgressCallback",value:function(e,t,n){e.load.onFileComplete.add(t,n)}},{key:"addCompleteCallback",value:function(e,t,n){e.load.onLoadComplete.addOnce(t,n)}},{key:"removeStartCallback",value:function(e,t,n){e.load.onLoadStart.remove(t,n)}},{key:"removeProgressCallback",value:function(e,t,n){e.load.onFileComplete.remove(t,n)}},{key:"removeCompleteCallback",value:function(e,t,n){e.load.onLoadComplete.remove(t,n)}},{key:"parseManifest",value:function(e){if((0,l.exists)(e))for(var t in e)this.assetPacks[t]=(0,i.getAssetPack)(e[t])}},{key:"addImageLoaders",value:function(e,t){t.forEach(function(t){(0,l.exists)(t.key)&&(0,l.exists)(t.url)?e.load.image(t.key,t.url):(0,s.fail)("[AssetLoader] Provided image key or url is missing from: "+t)})}},{key:"addJsonLoaders",value:function(e,t){t.forEach(function(t){(0,l.exists)(t.key)&&(0,l.exists)(t.url)?e.load.json(t.key,t.url):(0,s.fail)("[AssetLoader] Provided image key or url is missing from: "+t)})}},{key:"addFlumpLoaders",value:function(e,t){t.forEach(function(t){if((0,l.exists)(t.key)&&(0,l.exists)(t.pngs)&&(0,l.exists)(t.library)){for(var n=(0,l.getElse)([t.pngs,"length"],0),o=0;n>o;o++)e.load.image(t.pngs[o],t.pngs[o]);e.load.json(t.key,t.library)}else(0,s.fail)("[AssetLoader] Provided flump key, pngs, or library is missing from: "+t)})}},{key:"addAudioLoaders",value:function(e,t){t.forEach(function(t){(0,l.exists)(t.key)&&(0,l.exists)(t.url)?e.load.audio(t.key,t.url):(0,s.fail)("[AssetLoader] Provided audio key "+t.key+" or url "+t.url+(" is missing from: "+t))})}},{key:"addJsonHashAtlasLoaders",value:function(e,t){t.forEach(function(t){(0,l.exists)(t.key)&&(0,l.exists)(t.png)&&(0,l.exists)(t.json)?e.load.atlasJSONHash(t.key,t.png,t.json):(0,s.fail)("[AssetLoader] Provided atlas key, png, or json is missing from: "+t)})}},{key:"addBitmapFonts",value:function(e,t){t.forEach(function(t){(0,l.exists)(t.key)&&(0,l.exists)(t.image)&&(0,l.exists)(t.xml)?e.load.bitmapFont(t.key,t.image,t.xml):(0,s.fail)("[AssetLoader] Provided bitmap font key or url is missing from: "+t)})}},{key:"unloadImages",value:function(e,t){t.forEach(function(t){(0,l.exists)(t.key)?e.cache.removeImage(t.key,!0):(0,s.fail)("[AssetLoader] Cannot unload image "+t)})}},{key:"unloadJson",value:function(e,t){t.forEach(function(t){(0,l.exists)(t.key)?e.cache.removeJSON(t.key,!0):(0,s.fail)("[AssetLoader] Cannot unload json "+t)})}},{key:"unloadFlump",value:function(e,t){t.forEach(function(t){if((0,l.exists)(t.key)&&(0,l.exists)(t.pngs)&&(0,l.exists)(t.library)){for(var n=(0,l.getElse)([t.pngs,"length"],0),o=0;n>o;o++)e.cache.removeImage(t.pngs[o],!0);e.cache.removeJSON(t.key)}else(0,s.fail)("[AssetLoader] Cannot unload flump "+t)})}},{key:"unloadAudio",value:function(e,t){t.forEach(function(t){(0,l.exists)(t.key)?e.cache.removeSound(t.key):(0,s.fail)("[AssetLoader] Cannot unload audio "+t)})}},{key:"unloadJsonAtlasHash",value:function(e,t){t.forEach(function(t){(0,l.exists)(t.key)?e.cache.removeTextureAtlas(t.key):(0,s.fail)("[AssetLoader] Cannot unload atlas "+t)})}},{key:"unloadBitmapFonts",value:function(e,t){t.forEach(function(t){(0,l.exists)(t.key)?e.cache.removeBitmapFont(t.key):(0,s.fail)("[AssetLoader] Cannot unload bitmap font "+t)})}}]),e}();n["default"]=u},{"../utils/Assert":19,"../utils/Safe":20,"./AssetPack":2}],2:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){var t=new s;return t.images=(0,i.getElse)([e,"images"],[]),t.json=(0,i.getElse)([e,"json"],[]),t.flump=(0,i.getElse)([e,"flump"],[]),t.audio=(0,i.getElse)([e,"audio"],[]),t.jsonAtlasHash=(0,i.getElse)([e,"jsonAtlasHash"],[]),t.bitmapFonts=(0,i.getElse)([e,"bitmapFonts"],[]),t}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n.getAssetPack=r;var i=e("../utils/Safe"),s=function(){function e(){o(this,e),this.images=null,this.json=null,this.flump=null,this.audio=null,this.jsonAtlasHash=null,this.bitmapFonts=null}return a(e,[{key:"dispose",value:function(){this.images=null,this.json=null,this.flump=null,this.audio=null,this.jsonAtlasHash=null,this.bitmapFonts=null}}]),e}();n["default"]=s},{"../utils/Safe":20}],3:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=e("../utils/Safe"),i=e("./AudioModels"),s=function(){function e(t){o(this,e),this.data=t,this.trackPool={},this.playingTracks={},this.unmutedVolume=this.data.volume,this.onSoundPlayed=new Phaser.Signal}return r(e,[{key:"hasTracks",get:function(){return Object.keys(this.data.trackMap).length>0}}]),r(e,[{key:"destroy",value:function(){this.removeTracks(this.data.trackMap),this.onSoundPlayed.dispose(),this.onSoundPlayed=null,this.data=null}},{key:"appendTracks",value:function(e){if((0,a.exists)(e))for(var t in e)(0,a.exists)(this.data.trackMap[t])?console.warn("[AudioChannel] Failed to append. Duplicate track key "+t+" found."):this.data.trackMap[t]=(0,i.getAudioTrackModel)(e[t])}},{key:"removeTracks",value:function(e){if((0,a.exists)(e))for(var t=Object.keys(e);t.length>0;){var n=t.pop();if((0,a.exists)(this.playingTracks[n])){for(;this.playingTracks[n].length>0;)this.playingTracks[n][0].onStop.removeAll(),this.playingTracks[n][0].destroy(),this.playingTracks[n].shift();delete this.playingTracks[n]}if((0,a.exists)(this.trackPool[n])){for(;this.trackPool[n].length>0;)this.trackPool[n][0]&&this.trackPool[n][0].destroy(),this.trackPool[n].shift();delete this.trackPool[n]}(0,a.exists)(this.data.trackMap[n])&&delete this.data.trackMap[n]}}},{key:"hasTrack",value:function(e){return(0,a.exists)(this.data.trackMap[e])}},{key:"playTrack",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if((0,a.exists)(this.data.trackMap[t])){if(this.data.singleTrack){for(var r in this.playingTracks){var i=this.playingTracks[r];if(this.playingTracks[r].length>0){if(this.data.trackMap[t].priority>this.data.trackMap[i[0].name].priority){this.stopTrack(r);break}return!1}}}var s=this.getNextTrackFromPool(e,t);return s.onStop.addOnce(function(){this.returnTrackToPool(t,s),null!==n&&n.call(o)},this),(0,a.exists)(this.playingTracks[t])||(this.playingTracks[t]=[]),this.playingTracks[t].push(s.play()),this.onSoundPlayed.dispatch(s.key),!0}return!1}},{key:"stopTrack",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1;if((0,a.exists)(this.data.trackMap[e])&&(0,a.exists)(this.playingTracks[e])&&this.playingTracks[e].length>0)for(;this.playingTracks[e].length>0;)t?this.playingTracks[e][0].stop():(this.playingTracks[e][0].onStop.removeAll(),this.playingTracks[e][0].stop(),this.returnTrackToPool(e,this.playingTracks[e][0]))}},{key:"stopAll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!1;for(var t in this.data.trackMap)this.stopTrack(t,e)}},{key:"setVolume",value:function(e){this.data.volume=e,this.unmutedVolume=e;for(var t in this.playingTracks)for(var n=0;n<this.playingTracks[t].length;n++)this.playingTracks[t][n].volume=e}},{key:"mute",value:function(){this.data.volume=0;for(var e in this.playingTracks)for(var t=0;t<this.playingTracks[e].length;t++)this.playingTracks[e][t].volume=0}},{key:"unmute",value:function(){this.data.volume=this.unmutedVolume;for(var e in this.playingTracks)for(var t=0;t<this.playingTracks[e].length;t++)this.playingTracks[e][t].volume=this.unmutedVolume}},{key:"getNextTrackFromPool",value:function(e,t){var n=this.data.trackMap[t].volume*this.data.volume,o=this.data.trackMap[t].looping;if((0,a.exists)(this.trackPool[t])&&this.trackPool[t].length>0){var r=this.trackPool[t].shift();return r.volume=n,r}return e.add.audio(t,n,o)}},{key:"returnTrackToPool",value:function(e,t){var n=this.playingTracks[e].indexOf(t);this.playingTracks[e].splice(n,1),(0,a.exists)(this.trackPool[e])||(this.trackPool[e]=[]),this.trackPool[e].push(t)}}]),e}();n["default"]=s},{"../utils/Safe":20,"./AudioModels":4}],4:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){var t=new l;t.volume=(0,s.getElse)([e,"volume"],1),t.singleTrack=(0,s.getElse)([e,"singleTrack"],!1),t.trackMap={};var n=(0,s.getElse)([e,"trackMap"],{});for(var o in n)t.trackMap[o]=a(n[o]);return t}function a(e){var t=new u;return t.volume=(0,s.getElse)([e,"volume"],1),t.looping=(0,s.getElse)([e,"looping"],!1),t.priority=(0,s.getElse)([e,"priority"],0),t}Object.defineProperty(n,"__esModule",{value:!0}),n.TrackModel=n.ChannelModel=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n.getAudioChannelModel=r,n.getAudioTrackModel=a;var s=e("../utils/Safe"),l=n.ChannelModel=function(){function e(){o(this,e),this.volume=0,this.singleTrack=!1,this.trackMap=null}return i(e,[{key:"destroy",value:function(){for(var e=Object.keys(this.trackMap);e.length>0;){var t=e.pop();delete this.trackMap[t]}}}]),e}(),u=n.TrackModel=function c(){o(this,c),this.volume=0,this.looping=!1,this.priority=0}},{"../utils/Safe":20}],5:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=e("../utils/Safe"),s=e("../utils/Assert"),l=e("./AudioModels"),u=e("./AudioChannel"),c=o(u),h=function(){function e(){r(this,e),this.channels={},this.onSoundPlayed=new Phaser.Signal}return a(e,[{key:"NORMAL",get:function(){return"normal"}},{key:"RANDOM",get:function(){return"random"}},{key:"SEQUENCE",get:function(){return"sequence"}},{key:"CYCLE",get:function(){return"cycle"}}]),a(e,[{key:"destroy",value:function(){for(var e=Object.keys(this.channels);e.length>0;){var t=e.pop();this.channels[t].destroy(),delete this.channels[t]}}},{key:"setupChannels",value:function(e){for(var t in e)(0,i.exists)(this.channels[t])?this.channels[t].appendTracks((0,i.get)([e[t],"trackMap"])):(this.channels[t]=new c["default"]((0,l.getAudioChannelModel)(e[t])),this.channels[t].onSoundPlayed.add(this._onSoundPlayed,this))}},{key:"cleanupChannels",value:function(e){for(var t in e)this.validateChannel(t)&&(this.channels[t].removeTracks((0,i.get)([e[t],"trackMap"])),this.channels[t].hasTracks||(this.channels[t].destroy(),delete this.channels[t]))}},{key:"_onSoundPlayed",value:function(e){this.onSoundPlayed.dispatch(e)}},{key:"play",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;switch(t=this.validatePlaybackOptions(t),t.playbackType){case this.NORMAL:return this.playNormal(e,t,n,o);case this.RANDOM:return this.playRandom(e,t,n,o);case this.SEQUENCE:return this.playSequence(e,t,n,o);case this.CYCLE:return this.playCycle(e,t,n,o);default:(0,s.fail)("[AudioPlayer] Unsupported playbackType "+t.playbackType)}return!1}},{key:"playNormal",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r="string"==typeof t.trackKey?[t.trackKey]:t.trackKey,a=!1,i=null,s=null,l=null,u=0;u<r.length;u++){s=0===u?n:null,l=0===u?o:null;var c=this.formatKey(r[u]);i=this.getChannelOfTrack(c),null!==i&&(a=i.playTrack(e,c,s,l)||a)}return a}},{key:"playRandom",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=e.rnd.pick(t.trackKey);r=this.formatKey(r);var a=this.getChannelOfTrack(r);return null!==a?a.playTrack(e,r,n,o):!1}},{key:"playSequence",value:function(e,t){function n(){return a>=t.trackKey.length?(null!==o&&o.call(r),t.trackKey.length>0):(s=t.trackKey[a++],s=this.formatKey(s),i=this.getChannelOfTrack(s),null===i?n.call(this):i.playTrack(e,s,n,this))}var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=0,i=null,s="";return n.call(this)}},{key:"playCycle",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;(0,i.exists)(t.current)||(t.current=-1),"string"==typeof t.trackKey&&(t.trackKey=[t.trackKey]),t.current=(t.current+1)%t.trackKey.length;var r=t.trackKey[t.current];r=this.formatKey(r);var a=this.getChannelOfTrack(r);return null!==a?a.playTrack(e,r,n,o):!1}},{key:"stop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1,n=this.getChannelOfTrack(e);null!==n&&n.stopTrack(e,t)}},{key:"stopChannel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1;this.validateChannel(e)&&this.channels[e].stopAll(t)}},{key:"stopAllChannels",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!1;for(var t in this.channels)this.channels[t].stopAll(e)}},{key:"setChannelVolume",value:function(e,t){this.validateChannel(e)&&this.channels[e].setVolume(t)}},{key:"muteChannel",value:function(e){this.validateChannel(e)&&this.channels[e].mute()}},{key:"unmuteChannel",value:function(e){this.validateChannel(e)&&this.channels[e].unmute()}},{key:"getChannelOfTrack",value:function(e){for(var t in this.channels)if(this.channels[t].hasTrack(e))return this.channels[t];return console.warn("[AudioPlayer] Cannot find channel for "+e+"."),null}},{key:"validatePlaybackOptions",value:function(e){return(0,i.exists)(e.trackKey)||(0,s.fail)("[AudioPlayer] Provided playback options is missing trackKey property."),"string"==typeof e.trackKey||Array.isArray(e.trackKey)||(0,s.fail)("[AudioPlayer] Provided playback options trackKey property must be a string or an array."),e.playbackType=e.playbackType||this.NORMAL,e}},{key:"validateChannel",value:function(e){return(0,i.exists)(this.channels[e])?!0:(console.warn("[AudioPlayer] Cannot find channel "+e+"."),!1)}},{key:"formatKey",value:function(e){var t=e;return t.lastIndexOf("_")==e.length-1&&(t+=Phaser.Device.desktop?"DT":"MBL"),t}}]),e}();n["default"]=h},{"../utils/Assert":19,"../utils/Safe":20,"./AudioChannel":3,"./AudioModels":4}],6:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=function(){function e(){o(this,e),this.screenOffset=new Phaser.Point,this.scaleModifier=0,this.game=null}return r(e,[{key:"RESIZE_BY_NONE",get:function(){return 0}},{key:"RESIZE_BY_WIDTH",get:function(){return 1}},{key:"RESIZE_BY_HEIGHT",get:function(){return 2}}]),r(e,[{key:"init",value:function(e,t,n,o){switch(this.game=e,this.resolution=new Phaser.Point(t,n),o){case this.RESIZE_BY_WIDTH:this.game.scale.scaleMode=Phaser.ScaleManager.USER_SCALE,this.game.scale.setResizeCallback(this.resizeByWidth,this);break;case this.RESIZE_BY_HEIGHT:this.game.scale.scaleMode=Phaser.ScaleManager.USER_SCALE,this.game.scale.setResizeCallback(this.resizeByHeight,this)}}},{key:"resizeByWidth",value:function(){var e=this.scaleModifier;this.scaleModifier=window.innerWidth/this.game.width,this.game.height*this.scaleModifier>window.innerHeight?this.resizeByHeight():this.resizeGame(this.scaleModifier,e)}},{key:"resizeByHeight",value:function(){var e=this.scaleModifier;this.scaleModifier=window.innerHeight/this.game.height,this.resizeGame(this.scaleModifier,e)}},{key:"resizeGame",value:function(e,t){e!=t&&(this.game.scale.setUserScale(e,e),this.screenOffset.x=.5*(window.innerWidth-this.game.width*e),this.screenOffset.y=.5*(window.innerHeight-this.game.height*e),this.game.canvas.style.position="absolute",this.game.canvas.style.left=this.screenOffset.x+"px",this.game.canvas.style.top=this.screenOffset.y+"px",this.game.scale.refresh())}}]),e}();n["default"]=a},{}],7:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function u(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:u(r,t,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},l=function(e){function t(e,n,a,i,s){o(this,t);var l=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,a,i,s));return l.display=null,l}return a(t,e),i(t,[{key:"update",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this),null!=this.display&&this.alive&&this.display.update()}}]),t}(Phaser.Sprite);n["default"]=l},{}],8:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=e("../utils/Safe"),s=e("../utils/Assert"),l=e("./FlumpLibrary"),u=o(l),c=function(){function e(){r(this,e),this.libraries={}}return a(e,[{key:"destroy",value:function(){for(var e=Object.keys(this.libraries);e.length>0;)this.removeLibrary(e.shift())}},{key:"addLibrary",value:function(e,t,n){(0,i.exists)(this.libraries[t])?(0,s.fail)("[Flump] Library with "+t+" already exists. Be careful of memory leaks."):this.libraries[t]=new u["default"](e,e.cache.getJSON(t),n)}},{key:"removeLibrary",value:function(e){(0,i.exists)(this.libraries[e])&&(this.libraries[e].destroy(),delete this.libraries[e])}}]),e}();n["default"]=c},{"../utils/Assert":19,"../utils/Safe":20,"./FlumpLibrary":9}],9:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=e("../utils/Safe"),s=e("./symbols/FlumpMovieSymbol"),l=o(s),u=e("./symbols/FlumpAtlasSymbol"),c=o(u),h=e("./display/FlumpClip"),f=o(h),p=e("./display/FlumpSubClip"),d=o(p),y=function(){function e(t,n,o){r(this,e),this.frameRate=(0,i.getAssert)([n,"frameRate"],"[FlumpLibrary] Cannot find frame rate value in library.json."),this.movieClips={};var a=(0,i.getAssert)([n,"movies","length"],"[FlumpLibrary] Cannot find frame rate value in library.json.");this.movieSymbols=new Array(a),this.game=t;for(var s=0;s<n.movies.length;s++)this.movieSymbols[s]=n.movies[s].id,this.movieClips[this.movieSymbols[s]]=new l["default"](this,n.movies[s]);var u=n.textureGroups;this.atlases=new Array;for(var h=0;h<u[0].atlases.length;h++)this.atlases.push(new c["default"](this.game,u[0].atlases[h],o))}return a(e,[{key:"destroy",value:function(){if(null!=this.movieClips){for(var e=0;e<this.movieSymbols.length;e++)this.movieClips.hasOwnProperty(this.movieSymbols[e])&&(this.movieClips[this.movieSymbols[e]].destroy(),delete this.movieClips[this.movieSymbols[e]]);this.movieSymbols=null,this.movieClips=null}if(null!=this.atlases){for(;this.atlases.length>0;)this.atlases[0].destroy(),this.atlases.shift();this.atlases=null}this.game=null}},{key:"createClip",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new f["default"](this.game,this.movieClips,this,e)}},{key:"createSubClip",value:function(e,t,n){return new d["default"](this.game,this.movieClips,this,e,t,n)}},{key:"getSprite",value:function(e){for(var t=0;t<this.atlases.length;t++){var n=this.atlases[t].getSprite(e);if(null!=n)return n}return null}}]),e}();n["default"]=y},{"../utils/Safe":20,"./display/FlumpClip":10,"./display/FlumpSubClip":13,"./symbols/FlumpAtlasSymbol":14,"./symbols/FlumpMovieSymbol":17}],10:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function y(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:y(r,t,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},u=e("../../utils/Assert"),c=e("./FlumpLayer"),h=o(c),f=e("../symbols/FlumpMovieSymbol"),p=(o(f),e("../FlumpLibrary")),d=(o(p),function(e){function t(e,n,o){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;r(this,t);var s=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.movieClips=n,s.flumpLibrary=o,s.name="FlumpClip",s.layers=[],s.currentLayers=[],s.subSprites=[],s.subClips=[],s.currentClip=null,s.playbackSpeed=1,s.looping=0,s._paused=!1,s.framePosition=0,s.duration=0,s.fallbackLoop=null,s.skewX=0,s.skewY=0,s.onComplete=new Phaser.Signal,s.onLoop=new Phaser.Signal,null!=i&&s.playClip(i),s}return i(t,e),s(t,[{key:"destroy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!0;this.flumpLibrary=null,this.movieClips=null,this.currentClip=null,this.layers=null,this.currentLayers=null,this.subSprites=null,this.subClips=null,null!=this.onComplete&&(this.onComplete.dispose(),this.onComplete=null),null!=this.onLoop&&(this.onLoop.dispose(),this.onLoop=null),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this,e)}},{key:"play",value:function(e){var t={clip:null,looping:0,restart:!1,fallback:null,callback:null};e=this.setDefaults(e,t),(null!=this.currentClip&&e.clip!=this.currentClip.name||e.restart)&&(this.looping=e.looping,this.onComplete.removeAll(),e.callback&&this.onComplete.addOnce(e.callback.listener,e.callback.context),0!=this.looping&&null==this.fallbackLoop?this.fallbackLoop=this.currentClip.name:this.fallbackLoop=e.fallback,this.playClip(e.clip))}},{key:"playOnce",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!0;(null!=this.currentClip&&e!=this.currentClip.name||n)&&(0==t&&(this.fallbackLoop=null),this.looping=0,this.playClip(e))}},{key:"loop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!0;(null!=this.currentClip&&e!=this.currentClip.name||null==this.currentClip||t)&&(this.looping=-1,this.playClip(e),this.fallbackLoop=this.currentClip.name)}},{key:"update",value:function(){if(l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this),!this._paused&&null!=this.currentClip){this.framePosition+=this.game.time.elapsedMS/1e3*this.playbackSpeed;var e=this.framePosition*this.currentClip.frameRate;this.framePosition>this.duration-1/this.currentClip.frameRate*.5?(this.framePosition=this.framePosition%this.duration,0==this.looping?(null==this.fallbackLoop?(this.framePosition=this.duration-1/this.currentClip.frameRate,e=this.framePosition*this.currentClip.frameRate,this.updateSubSprites(e),this._paused=!0):(this.loop(this.fallbackLoop),this.fallbackLoop=null),this.onComplete.dispatch()):(this.looping>0&&this.looping--,this.onLoop.dispatch())):this.updateSubSprites(e)}}},{key:"updateSubSprites",value:function(e){for(var t=0;t<this.subSprites.length;t++)this.subSprites[t].enabled&&this.subSprites[t]["goto"](e,this.playbackSpeed);for(var t=0;t<this.subClips.length;t++)this.subClips[t].enabled&&(this.subClips[t].update(),this.subClips[t]["goto"](e,this.playbackSpeed))}},{key:"playClip",value:function(e){var t=this.movieClips[e];if(null==t)return void(0,u.fail)("Animation "+e+" not found.");for(var n=0,o=0,r=0;r<t.layers.length;r++)if(this.isSubClip(t.layers[r])){if(n<this.subClips.length)this.subClips[n].setupClip(t.layers[r],t),this.setChildIndex(this.subClips[n],r);else{var a=this.flumpLibrary.createSubClip(t.layers[r].keyframes[0].symbolName,t.layers[r],t);a.visible=!1,this.subClips.push(a),this.addChild(a),this.setChildIndex(a,r)}n++}else{if(o<this.subSprites.length)this.subSprites[o].setupLayer(t.layers[r],t),this.setChildIndex(this.subSprites[o],r);else{var i=new h["default"](this.game,t.layers[r],t,this.flumpLibrary);this.subSprites.push(i),this.addChild(i),this.setChildIndex(i,r)}o++}if(this.subClips.length>n)for(var r=n;r<this.subClips.length;r++)this.subClips[r].setActive(!1);if(this.subSprites.length>o)for(var r=o;r<this.subSprites.length;r++)this.subSprites[r].setActive(!1);this._paused=!1,this.duration=t.duration,this.framePosition=0,this.currentClip=t}},{key:"isSubClip",value:function(e){for(var t=0;t<e.keyframes.length;t++)if(null!=e.keyframes[t].symbolName&&!this.checkSpriteExist(e.keyframes[t].symbolName))return!0;return!1}},{key:"checkSpriteExist",value:function(e){return this.game.cache.checkBitmapDataKey(e)}},{key:"setDefaults",value:function(e,t){for(var n in t)t.hasOwnProperty(n)&&null==e[n]&&(e[n]=t[n]);return e}},{key:"displayObjectUpdateTransform",value:function(e){if(e||this.parent||this.game){var t=this.parent;e?t=e:this.parent||(t=this.game.world);var n,o,r,a,i,s,l=t.worldTransform,u=this.worldTransform;this.rotation%PIXI.PI_2||this.skewX||this.skewY?(n=this.scale.x*Math.cos(this.rotation+this.skewY),o=this.scale.x*Math.sin(this.rotation+this.skewY),r=this.scale.y*Math.sin(-this.rotation-this.skewX),a=this.scale.y*Math.cos(this.rotation+this.skewX),i=this.position.x,s=this.position.y,(this.pivot.x||this.pivot.y)&&(i-=this.pivot.x*n+this.pivot.y*r,s-=this.pivot.x*o+this.pivot.y*a),u.a=n*l.a+o*l.c,u.b=n*l.b+o*l.d,u.c=r*l.a+a*l.c,u.d=r*l.b+a*l.d,u.tx=i*l.a+s*l.c+l.tx,u.ty=i*l.b+s*l.d+l.ty):(n=this.scale.x,a=this.scale.y,i=this.position.x-this.pivot.x*n,s=this.position.y-this.pivot.y*a,u.a=n*l.a,u.b=n*l.b,u.c=a*l.c,u.d=a*l.d,u.tx=i*l.a+s*l.c+l.tx,u.ty=i*l.b+s*l.d+l.ty),this.worldAlpha=this.alpha*t.worldAlpha,this.worldPosition.set(u.tx,u.ty),this.worldScale.set(Math.sqrt(u.a*u.a+u.b*u.b),Math.sqrt(u.c*u.c+u.d*u.d)),this.worldRotation=Math.atan2(-u.c,u.d),this._currentBounds=null,this.transformCallback&&this.transformCallback.call(this.transformCallbackContext,u,l)}}},{key:"paused",get:function(){return this._paused},set:function(e){this._paused=e;for(var t=0;t<this.subSprites.length;t++)this.subSprites[t].paused=this._paused;for(var t=0;t<this.subClips.length;t++)this.subClips[t].paused(this._paused)}}]),t}(Phaser.Image));n["default"]=d},{"../../utils/Assert":19,"../FlumpLibrary":9,"../symbols/FlumpMovieSymbol":17,"./FlumpLayer":11}],11:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t;
}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function d(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:d(r,t,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},u=e("./FlumpSprite"),c=(o(u),e("./FlumpClip")),h=(o(c),e("../FlumpLibrary")),f=(o(h),e("../symbols/FlumpLayerSymbol")),p=(o(f),function(e){function t(e,n,o,i){r(this,t);var s=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.flumpLibrary=i,s.currentSprite=null,s.skewX=0,s.skewY=0,s.name="FlumpLayer",s.setupLayer(n,o),s}return i(t,e),s(t,[{key:"destroy",value:function(e){this.flumpLibrary=null,this.movieClip=null,this.layer=null,l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this,e)}},{key:"setupLayer",value:function(e,t){this.layer=e,this.keyframes=this.layer.keyframes,this.finalFrame=this.keyframes.length-1,this.movieClip=t,this.frameRate=this.movieClip.frameRate,this.duration=this.movieClip.duration,this.playbackSpeed=1,this._paused=!1,this.visible=!0,this.enabled=!0,this.setActive(!0),this.currentFrame=0,this.currentIndex=0,this.currentKeyFrame=this.keyframes[this.currentIndex],this.currentDuration=0,this.currentTime=0,this.nextKeyframe(),this.updateChildTransform(this.currentKeyFrame.x,this.currentKeyFrame.y,this.currentKeyFrame.pivotX,this.currentKeyFrame.pivotY,this.currentKeyFrame.skewX,this.currentKeyFrame.skewY,this.currentKeyFrame.scaleX,this.currentKeyFrame.scaleY,this.currentKeyFrame.alpha)}},{key:"changeFrame",value:function(e){this.currentSprite!=e&&(this.currentSprite=e,null!=this.currentSprite?(this.loadTexture(this.game.cache.getBitmapData(this.currentSprite)),this.visible=!0):this.visible=!1)}},{key:"goto",value:function(e,t,n){this.playbackSpeed=t,this.currentFrame!=e&&(e<this.currentFrame&&(this.currentIndex=0,this.currentDuration=0,this.currentFrame=0,this.currentTime-=this.currentKeyFrame.duration,this.nextKeyframe()),this.composeFrame(e,n))}},{key:"composeFrame",value:function(e,t){if(this.currentFrame=e,e>=this.layer.frames)return this.visible=!1,this.currentIndex=this.finalFrame,void(this.keyframeUpdate=!0);for(;;){if(!(this.currentDuration<=this.currentFrame))break;this.currentIndex++,this.nextKeyframe()}var n=this.keyframes[this.currentIndex],o=n.visible&&null!=n.symbolName;if(this.visible=o,o){var r=n.x,a=n.y,i=n.scaleX,s=n.scaleY,l=n.skewX,u=n.skewY,c=n.alpha;if(n.tweened&&this.currentIndex<this.finalFrame&&null!=this.keyframes[this.currentIndex+1].symbolName){var h=(this.currentFrame-n.index)/n.duration,f=n.ease;if(0!=f){var p;if(0>f){var d=1-h;p=1-d*d,f=-f}else p=h*h;h=f*p+(1-f)*h}var y=this.keyframes[this.currentIndex+1];r+=(y.x-r)*h,a+=(y.y-a)*h,i+=(y.scaleX-i)*h,s+=(y.scaleY-s)*h,l+=(y.skewX-l)*h,u+=(y.skewY-u)*h,c+=(y.alpha-c)*h}this.updateChildTransform(r,a,this.currentKeyFrame.pivotX,this.currentKeyFrame.pivotY,l,u,i,s,c)}}},{key:"nextKeyframe",value:function(){this.currentIndex>=this.keyframes.length?(this.currentIndex=0,this.currentDuration=0,this.currentFrame=0,this.currentTime-=this.currentKeyFrame.duration):this.currentTime=0,this.currentKeyFrame=this.keyframes[this.currentIndex],this.currentDuration+=this.currentKeyFrame.duration,null!=this.currentKeyFrame.symbolName?(this.visible=!0,this.changeFrame(this.currentKeyFrame.symbolName)):this.visible=!1}},{key:"updateChildTransform",value:function(e,t,n,o,r,a,i,s,l){this.visible&&(this.position.set(e,t),this.pivot.set(n,o),this.skewX=r,this.skewY=a,this.scale.set(i,s),this.alpha=l)}},{key:"setActive",value:function(e){this.visible=e,this.enabled=e}},{key:"checkSpriteExist",value:function(e){return this.game.cache.checkBitmapDataKey(e)}},{key:"setChildVisible",value:function(e,t){null!=e&&(e.visible=t)}},{key:"updateTransform",value:function(e){if(e||this.parent||this.game){var t=this.parent;e?t=e:this.parent||(t=this.game.world);var n,o,r,a,i,s,l=t.worldTransform,u=this.worldTransform;this.rotation%PIXI.PI_2||this.skewX||this.skewY?(n=this.scale.x*Math.cos(this.rotation+this.skewY),o=this.scale.x*Math.sin(this.rotation+this.skewY),r=this.scale.y*Math.sin(-this.rotation-this.skewX),a=this.scale.y*Math.cos(this.rotation+this.skewX),i=this.position.x,s=this.position.y,(this.pivot.x||this.pivot.y)&&(i-=this.pivot.x*n+this.pivot.y*r,s-=this.pivot.x*o+this.pivot.y*a),u.a=n*l.a+o*l.c,u.b=n*l.b+o*l.d,u.c=r*l.a+a*l.c,u.d=r*l.b+a*l.d,u.tx=i*l.a+s*l.c+l.tx,u.ty=i*l.b+s*l.d+l.ty):(n=this.scale.x,a=this.scale.y,i=this.position.x-this.pivot.x*n,s=this.position.y-this.pivot.y*a,u.a=n*l.a,u.b=n*l.b,u.c=a*l.c,u.d=a*l.d,u.tx=i*l.a+s*l.c+l.tx,u.ty=i*l.b+s*l.d+l.ty),this.worldAlpha=this.alpha*t.worldAlpha,this.worldPosition.set(u.tx,u.ty),this.worldScale.set(Math.sqrt(u.a*u.a+u.b*u.b),Math.sqrt(u.c*u.c+u.d*u.d)),this.worldRotation=Math.atan2(-u.c,u.d),this._currentBounds=null,this.transformCallback&&this.transformCallback.call(this.transformCallbackContext,u,l)}}},{key:"paused",get:function(){return this._paused},set:function(e){this._paused=e}}]),t}(Phaser.Image));n["default"]=p},{"../FlumpLibrary":9,"../symbols/FlumpLayerSymbol":16,"./FlumpClip":10,"./FlumpSprite":12}],12:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function h(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:h(r,t,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},u=e("../FlumpLibrary"),c=(o(u),function(e){function t(e,n,o,i,s){r(this,t);var l=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,s,o));return l.flumpLibrary=n,l.currentSprite=o,l.skewX=0,l.skewY=0,l.name="FlumpSprite",l.changeFrame(l.currentSprite),l}return i(t,e),s(t,[{key:"destroy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!0;this.flumpLibrary=null,l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this,e)}},{key:"changeFrame",value:function(e){if(this.currentSprite!=e)if(this.currentSprite=e,null!=this.currentSprite){var t=this.flumpLibrary.getSprite(this.currentSprite);this.loadTexture(t.atlas),this.crop(t.rectangle),this.visible=!0}else this.visible=!1}},{key:"updateTransform",value:function(e){if(e||this.parent||this.game){var t=this.parent;e?t=e:this.parent||(t=this.game.world);var n,o,r,a,i,s,l=t.worldTransform,u=this.worldTransform;this.rotation%PIXI.PI_2||this.skewX||this.skewY?(n=this.scale.x*Math.cos(this.rotation+this.skewY),o=this.scale.x*Math.sin(this.rotation+this.skewY),r=this.scale.y*Math.sin(-this.rotation-this.skewX),a=this.scale.y*Math.cos(this.rotation+this.skewX),i=this.position.x,s=this.position.y,(this.pivot.x||this.pivot.y)&&(i-=this.pivot.x*n+this.pivot.y*r,s-=this.pivot.x*o+this.pivot.y*a),u.a=n*l.a+o*l.c,u.b=n*l.b+o*l.d,u.c=r*l.a+a*l.c,u.d=r*l.b+a*l.d,u.tx=i*l.a+s*l.c+l.tx,u.ty=i*l.b+s*l.d+l.ty):(n=this.scale.x,a=this.scale.y,i=this.position.x-this.pivot.x*n,s=this.position.y-this.pivot.y*a,u.a=n*l.a,u.b=n*l.b,u.c=a*l.c,u.d=a*l.d,u.tx=i*l.a+s*l.c+l.tx,u.ty=i*l.b+s*l.d+l.ty),this.worldAlpha=this.alpha*t.worldAlpha,this.worldPosition.set(u.tx,u.ty),this.worldScale.set(Math.sqrt(u.a*u.a+u.b*u.b),Math.sqrt(u.c*u.c+u.d*u.d)),this.worldRotation=Math.atan2(-u.c,u.d),this._currentBounds=null,this.transformCallback&&this.transformCallback.call(this.transformCallbackContext,u,l)}}}]),t}(Phaser.Image));n["default"]=c},{"../FlumpLibrary":9}],13:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function m(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:m(r,t,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},u=e("./FlumpSprite"),c=(o(u),e("./FlumpClip")),h=o(c),f=e("../symbols/FlumpMovieSymbol"),p=(o(f),e("../symbols/FlumpLayerSymbol")),d=(o(p),e("../FlumpLibrary")),y=(o(d),function(e){function t(e,n,o,i,s,l){r(this,t);var u=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,o,i));return u.setupClip(s,l),u}return i(t,e),s(t,[{key:"destroy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!0;this.movieClip=null,l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this,e)}},{key:"setupClip",value:function(e,t){this.layer=e,this.keyframes=this.layer.keyframes,this.finalFrame=this.keyframes.length-1,this.movieClip=t,this.frameRate=this.movieClip.frameRate,this.duration=this.movieClip.duration,this.playbackSpeed=1,this._paused=!1,this.visible=!0,this.enabled=!0,this.setActive(!0),this.currentFrame=0,this.currentIndex=0,this.currentKeyFrame=this.keyframes[this.currentIndex],this.currentDuration=0,this.currentTime=0,this.nextKeyframe(!0),this.updateChildTransform(this.currentKeyFrame.x,this.currentKeyFrame.y,this.currentKeyFrame.pivotX,this.currentKeyFrame.pivotY,this.currentKeyFrame.skewX,this.currentKeyFrame.skewY,this.currentKeyFrame.scaleX,this.currentKeyFrame.scaleY,this.currentKeyFrame.alpha)}},{key:"goto",value:function(e,t,n){this.playbackSpeed=t,this.currentFrame!=e&&(e<this.currentFrame&&(this.currentIndex=0,this.currentDuration=0,this.currentFrame=0,this.currentTime-=this.currentKeyFrame.duration,this.nextKeyframe()),this.composeFrame(e,n))}},{key:"composeFrame",value:function(e,t){if(this.currentFrame=e,e>=this.layer.frames)return this.visible=!1,this.currentIndex=this.finalFrame,void(this.keyframeUpdate=!0);for(;;){if(!(this.currentDuration<=this.currentFrame))break;this.currentIndex++,this.nextKeyframe()}var n=this.keyframes[this.currentIndex],o=n.visible&&null!=n.symbolName;if(this.visible=o,o){var r=n.x,a=n.y,i=n.scaleX,s=n.scaleY,l=n.skewX,u=n.skewY,c=n.alpha;if(n.tweened&&this.currentIndex<this.finalFrame&&null!=this.keyframes[this.currentIndex+1].symbolName){var h=(this.currentFrame-n.index)/n.duration,f=n.ease;if(0!=f){var p;if(0>f){var d=1-h;p=1-d*d,f=-f}else p=h*h;h=f*p+(1-f)*h}var y=this.keyframes[this.currentIndex+1];r+=(y.x-r)*h,a+=(y.y-a)*h,i+=(y.scaleX-i)*h,s+=(y.scaleY-s)*h,l+=(y.skewX-l)*h,u+=(y.skewY-u)*h,c+=(y.alpha-c)*h}this.updateChildTransform(r,a,this.currentKeyFrame.pivotX,this.currentKeyFrame.pivotY,l,u,i,s,c)}}},{key:"nextKeyframe",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!1;this.currentIndex>=this.keyframes.length?(this.currentIndex=0,this.currentDuration=0,this.currentFrame=0,this.currentTime-=this.currentKeyFrame.duration):this.currentTime=0,this.currentKeyFrame=this.keyframes[this.currentIndex],this.currentDuration+=this.currentKeyFrame.duration,null!=this.currentKeyFrame.symbolName?(this.loop(this.currentKeyFrame.symbolName,e),this.visible=!0):this.visible=!1}},{key:"updateChildTransform",value:function(e,t,n,o,r,a,i,s,l){this.position.set(e,t),this.pivot.set(n,o),this.skewX=r,this.skewY=a,this.scale.set(i,s),this.alpha=l}},{key:"setActive",value:function(e){this.visible=e,this.enabled=e}},{key:"paused",get:function(){return this._paused},set:function(e){this._paused=e}}]),t}(h["default"]));n["default"]=y},{"../FlumpLibrary":9,"../symbols/FlumpLayerSymbol":16,"../symbols/FlumpMovieSymbol":17,"./FlumpClip":10,"./FlumpSprite":12}],14:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=e("../../utils/Safe"),s=e("./FlumpTextureSymbol"),l=o(s),u=function(){function e(t,n,o){r(this,e);var a=((0,i.getAssert)([n,"file"],"[FlumpAtlasSymbol] Cannot find file in atlas data."),(0,i.getAssert)([n,"textures"],"[FlumpAtlasSymbol] Cannot find textures in atlas data.")),s=(0,i.getElse)([a,"length"],0);this.atlas=t.cache.getImage(o+n.file),this.textureMap=new Array(s),this.textures={};for(var u=0;s>u;u++)this.textureMap[u]=a[u].symbol,this.textures[this.textureMap[u]]=new l["default"](t,this.atlas,a[u])}return a(e,[{key:"destroy",value:function(){if(this.atlas=null,null!=this.textureMap){for(;this.textureMap.length>0;)null!=this.textures&&this.textures.hasOwnProperty(this.textureMap[0])&&(this.textures[this.textureMap[0]].destroy(),delete this.textures[this.textureMap[0]]),this.textureMap.shift();this.textureMap=null,this.textures=null}this.game=null}}]),e}();n["default"]=u},{"../../utils/Safe":20,"./FlumpTextureSymbol":18}],15:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../utils/Safe"),a=function i(e,t){o(this,i),this.index=null!=t?t.index+t.duration:0,this.duration=(0,r.get)([e,"duration"]),this.symbolName=(0,r.get)([e,"ref"]),this.label=(0,r.get)([e,"label"]);var n=(0,r.getElse)([e,"loc"],[0,0]),a=(0,r.getElse)([e,"scale"],[1,1]),s=(0,r.getElse)([e,"skew"],[0,0]),l=(0,r.getElse)([e,"pivot"],[0,0]);this.x=n[0],this.y=n[1],this.scaleX=a[0],this.scaleY=a[1],this.skewX=s[0],this.skewY=s[1],this.pivotX=l[0],this.pivotY=l[1],this.alpha=(0,r.getElse)([e,"alpha"],1),this.ease=(0,r.getElse)([e,"ease"],0),this.visible=(0,r.getElse)([e,"visible"],!0),this.tweened=(0,r.getElse)([e,"tweened"],!0)};n["default"]=a},{"../../utils/Safe":20}],16:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=e("../../utils/Safe"),s=e("./FlumpKeyframeSymbol"),l=o(s),u=function(){function e(t){r(this,e),this.name=(0,i.getAssert)([t,"name"],"[FlumpLayerSymbol] Cannot find FlumpLayerSymbol name");var n=(0,i.getAssert)([t,"keyframes"],"[FlumpLayerSymbol] Cannot find keyframes."),o=(0,i.getElse)([n,"length"],0);this.keyframes=new Array(o),this.frames=0;for(var a=null,s=0;o>s;s++)a=new l["default"](n[s],a),this.keyframes[s]=a;null!=a?this.frames=a.index+a.duration:this.frames=0}return a(e,[{key:"destroy",value:function(){if(null!=this.keyframes){for(;this.keyframes.length>0;)this.keyframes[0]=null,this.keyframes.shift();this.keyframes=null}this.game=null}}]),e}();n["default"]=u},{"../../utils/Safe":20,"./FlumpKeyframeSymbol":15}],17:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=e("../../utils/Safe"),s=e("./FlumpLayerSymbol"),l=o(s),u=function(){function e(t,n){r(this,e),this.name=(0,i.getAssert)([n,"id"],"[FlumpMovieSymbol] Cannot find id."),this.frames=0;var o=(0,i.getAssert)([n,"layers"],"[FlumpMovieSymbol] Cannot find layers."),a=(0,i.getElse)([o,"length"],0);this.layers=new Array(a);for(var s=0;a>s;s++){var u=new l["default"](o[s]);this.layers[s]=u,this.frames=Math.max(u.frames,this.frames)}this.frameRate=t.frameRate,this.duration=this.frames/this.frameRate}return a(e,[{key:"destroy",value:function(){if(null!=this.layers)for(;this.layers.length>0;)this.layers[0].destroy(),this.layers.shift();this.game=null}}]),e}();n["default"]=u},{"../../utils/Safe":20,"./FlumpLayerSymbol":16}],18:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=e("../../utils/Safe"),i=function(){function e(t,n,r){o(this,e),this.game=t;var i=(0,a.getAssert)([r,"rect"],"[FlumpTextureSymbol] Cannot find texture rect in json."),s=(0,a.getAssert)([i,0],"[FlumpTextureSymbol] Cannot find rect x in json."),l=(0,a.getAssert)([i,1],"[FlumpTextureSymbol] Cannot find rect y in json."),u=(0,a.getAssert)([i,2],"[FlumpTextureSymbol] Cannot find rect with in json."),c=(0,a.getAssert)([i,3],"[FlumpTextureSymbol] Cannot find rect height in json.");this.name=(0,a.getAssert)([r,"symbol"],"[FlumpTextureSymbol] Cannot find texture name."),this.rect=i,this.origin=[(0,a.getAssert)([r,"origin",0],"[FlumpTextureSymbol] Cannot find origin x."),(0,a.getAssert)([r,"origin",1],"[FlumpTextureSymbol] Cannot find origin y.")],this.bitmap=t.make.bitmapData(u,c),this.bitmap.copyRect(n,new Phaser.Rectangle(s,l,u,c),0,0),t.cache.addBitmapData(this.name,this.bitmap)}return r(e,[{key:"destroy",value:function(){this.game.cache.removeBitmapData(this.name),this.bitmap.destroy(),this.bitmap=null,this.game=null}}]),e}();n["default"]=i},{"../../utils/Safe":20}],19:[function(e,t,n){"use strict";function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Assertion Failed";if(e)return e;throw new Error(t)}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Assertion Failed";throw new Error(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.isTrue=o,n.fail=r},{}],20:[function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return"undefined"!=typeof e&&null!==e}function a(e){var t=null,n=null;for(t=e.shift();e.length>0;){if(n=e.shift(),!r(t)||!r(n)||!r(t[n]))return null;t=t[n]}return t}function i(e,t){var n=a(e);return null!==n?n:t}function s(e,t){var n=a(e);return u.isTrue(r(n),t),n}Object.defineProperty(n,"__esModule",{value:!0}),n.exists=r,n.get=a,n.getElse=i,n.getAssert=s;var l=e("./Assert"),u=o(l)},{"./Assert":19}],21:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var r=e("./PhaserExtension"),a=e("./states/BootState"),i=o(a),s=e("./states/LoadingState"),l=o(s),u=e("./states/TitleState"),c=o(u),h=e("./states/GameState"),f=o(h),p=e("./states/TutorialState"),d=o(p);window.gameStart=function(){var e=540,t=Math.min(Math.max(window.innerWidth/window.innerHeight,4/3),16/9)*e;new Phaser.Game(t,e,Phaser.CANVAS,"gameTarget",{preload:function(){this.load.json("manifest","assets/manifest.json"),this.game.load.script("webfont","//ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js")},create:function(){r.assets.parseManifest(this.cache.getJSON("manifest")),this.game.stage.backgroundColor="#000000",this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR).onDown.add(this.onSpaceBarDown,this),this.game.onPause.add(this.onPause,this),this.game.onResume.add(this.onResume,this),this.game.state.add("boot",i["default"]),this.game.state.add("loading",l["default"]),this.game.state.add("title",c["default"]),this.game.state.add("tutorial",d["default"]),this.game.state.add("game",f["default"]),this.game.sound.volume=.5,this.game.state.start("boot")},onSpaceBarDown:function(){},onPause:function(){this.game.input.mspointer.stop()},onResume:function(){this.game.input.mspointer.stop()}})},window.addEventListener("load",function(){window.focus(),document.body.addEventListener("click",function(e){window.focus()},!1)})},{"./PhaserExtension":22,"./states/BootState":44,"./states/GameState":45,"./states/LoadingState":46,"./states/TitleState":47,"./states/TutorialState":48}],22:[function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),n.Assert=n.SafeUtils=n.audio=n.flump=n.SpriteContainer=n.resizer=n.assets=void 0;var a=e("../phaserextension/assets/AssetLoader"),i=r(a),s=e("../phaserextension/display/ScreenResizer"),l=r(s),u=e("../phaserextension/display/SpriteContainer"),c=r(u),h=e("../phaserextension/flump/Flump"),f=r(h),p=e("../phaserextension/audio/AudioPlayer"),d=r(p),y=e("../phaserextension/utils/Safe"),m=o(y),g=e("../phaserextension/utils/Assert"),v=o(g);n.assets=new i["default"],n.resizer=new l["default"];n.SpriteContainer=c["default"];n.flump=new f["default"],n.audio=new d["default"];n.SafeUtils=m,n.Assert=v},{"../phaserextension/assets/AssetLoader":1,"../phaserextension/audio/AudioPlayer":5,"../phaserextension/display/ScreenResizer":6,"../phaserextension/display/SpriteContainer":7,"../phaserextension/flump/Flump":8,"../phaserextension/utils/Assert":19,"../phaserextension/utils/Safe":20}],23:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function c(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:c(r,t,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},l=e("../../PhaserExtension"),u=function(e){function t(e,n,a){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.config=n,i.index=a,i.camreaPrevX=i.game.camera.x,i.camreaPrevY=i.game.camera.y,i.display=null,null!=i.config.display.chunks?i.display=l.flump.libraries.gameLibrary.createClip(i.config.display.chunks[a]):i.display=i.game.add.image(0,0,i.config.display.primary),i.addChild(i.display),i.display.position.set(-i.game.width/2,-i.game.height/2+i.config.transform.position.y),i}return a(t,e),i(t,[{key:"parseConfig",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"parseConfig",this).call(this)}},{key:"update",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this),this.x+=(this.game.camera.x-this.camreaPrevX)*this.config.variables.speed.x,this.y-=(this.game.camera.y-this.camreaPrevY)*this.config.variables.speed.y,this.camreaPrevX=this.game.camera.x,this.camreaPrevY=this.game.camera.y,this.game.camera.x>this.x+this.config.variables.width*this.config.variables.amount&&(this.x+=this.config.variables.width*this.config.variables.amount*3)}},{key:"destroy",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this,e)}}]),t}(Phaser.Sprite);n["default"]=u},{"../../PhaserExtension":22}],24:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function p(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:p(r,t,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},u=e("../../PhaserExtension"),c=e("./ScrollingBackground"),h=o(c),f=function(e){function t(e,n){r(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));o.config=u.SafeUtils.get([o.game.cache.getJSON("gameConfig"),"assets","backgroundContainer"]),o.scrollingBackgrounds=null,o.backgrounds=[];for(var i=0;3>i;i++){var s=new h["default"](o.game,o.config.variables.background||{},i);s.x=i*(o.config.variables.background.variables.width*o.config.variables.background.variables.amount),o.addChild(s),o.backgrounds.push(s)}for(var i=0;3>i;i++){var s=new h["default"](o.game,o.config.variables.foreground||{},i);s.x=i*(o.config.variables.foreground.variables.width*o.config.variables.foreground.variables.amount),o.addChild(s),o.backgrounds.push(s)}return o}return i(t,e),s(t,[{key:"parseConfig",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"parseConfig",this).call(this)}},{key:"update",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this)}},{key:"destroy",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this,e)}}]),t}(Phaser.Group);n["default"]=f},{"../../PhaserExtension":22,"./ScrollingBackground":23}],25:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]={GAME_NAME:"Marvel's Incredible Hulk: Chitauri Takedown",BASE_SPEED:new Phaser.Point(1500,1e3),SUPER_SMASH_TRESHOLD:1500,BASE_ENEMY_POINTS:100,SUPPORT_ENEMY_POINTS:200,OBJECT_POOLS:{ENEMY_NORMAL:"ENEMY_NORMAL",ENEMY_BOOST:"ENEMY_BOOST"},FONT_STYLE:{fill:"#FFFFFF",font:"700 34px Noto Sans",stroke:"#000000",strokeThickness:0}}},{}],26:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.launch=new Phaser.Signal,n.spawnHulkSmash=new Phaser.Signal,n.addPoints=new Phaser.Signal,n.addDestruction=new Phaser.Signal,n.endGame=new Phaser.Signal,n.restartGame=new Phaser.Signal},{}],27:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.NONE=0,n.LAUNCH=1,n.PLAY=2,n.SMASH=3,n.GAME_OVER=4},{}],28:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){var n=new s["default"](e,t);return n}function a(e,t){var n=new u["default"](e,t);return n}Object.defineProperty(n,"__esModule",{value:!0}),n.getEnemyNormal=r,n.getEnemyBoost=a;var i=e("../objects/EnemyNormal"),s=o(i),l=e("../objects/EnemyBoost"),u=o(l)},{"../objects/EnemyBoost":31,"../objects/EnemyNormal":32}],29:[function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=e("../constants/GameStateEnum"),s=o(i),l=function(){function e(){r(this,e),this.reset()}return a(e,[{key:"init",value:function(){}},{key:"reset",value:function(){this.gameState=s.NONE,this.currentScore=0,this.currentDistance=0,this.destructionMeter=0,this.currentVelocity=new Phaser.Point(0,0)}}]),e}();n["default"]=new l},{"../constants/GameStateEnum":27}],30:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function b(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:b(r,t,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},c=e("../../PhaserExtension"),h=e("../constants/GameEvents"),f=r(h),p=e("../constants/GameStateEnum"),d=r(p),y=e("../constants/GameConstants"),m=(o(y),
e("../models/GameModel")),g=o(m),v=function(e){function t(e,n){a(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.config=n,o.stomped=!1,o.display=c.flump.libraries.gameLibrary.createClip(o.config.display.primary),o.display.loop(o.config.display.primary),o.addChild(o.display),o.game.physics.enable(o,Phaser.Physics.ARCADE),o.body.collideWorldBounds=!1,o.body.setSize(o.config.transform.collider.size.x,o.config.transform.collider.size.y),o.body.offset.set(o.config.transform.collider.offset.x,o.config.transform.collider.offset.y),o.body.bounce.set(1),o.body.maxVelocity.y=5e3,o.body.immovable=!0,o.body.allowGravity=!1,o}return s(t,e),l(t,[{key:"update",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this),this.alive&&(this.game.camera.x-this.position.x>this.game.camera.width||g["default"].gameState==d.GAME_OVER)&&this.kill()}},{key:"destroy",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"onStarted",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onStarted",this).call(this)}},{key:"stomp",value:function(e){this.stomped=!0,this.body.velocity.x=e/1.5,this.body.velocity.y=400,f.addPoints.dispatch(this.config.variables.points),g["default"].gameState==d.PLAY&&f.addDestruction.dispatch(this.config.variables.destruction),this.display.playOnce(this.config.display.dead)}},{key:"reset",value:function(e,n,o){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reset",this).call(this,e,n,o),this.display.loop(this.config.display.primary),this.stomped=!1,this.body.velocity.x=this.game.rnd.realInRange(200,500)}}]),t}(c.SpriteContainer);n["default"]=v},{"../../PhaserExtension":22,"../constants/GameConstants":25,"../constants/GameEvents":26,"../constants/GameStateEnum":27,"../models/GameModel":29}],31:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function v(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:v(r,t,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},c=e("../../PhaserExtension"),h=e("../constants/GameEvents"),f=(r(h),e("../constants/GameStateEnum")),p=(r(f),e("../constants/GameConstants")),d=(o(p),e("../models/GameModel")),y=(o(d),e("./Enemy")),m=o(y),g=function(e){function t(e){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,c.SafeUtils.get([e.cache.getJSON("gameConfig"),"assets","enemyBoost"])))}return s(t,e),l(t,[{key:"update",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this)}},{key:"destroy",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"onStarted",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onStarted",this).call(this)}},{key:"stomp",value:function(e){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"stomp",this).call(this,e),c.audio.playNormal(this.game,{trackKey:this.config.sounds.shipBigExplosion})}}]),t}(m["default"]);n["default"]=g},{"../../PhaserExtension":22,"../constants/GameConstants":25,"../constants/GameEvents":26,"../constants/GameStateEnum":27,"../models/GameModel":29,"./Enemy":30}],32:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function v(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:v(r,t,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},c=e("../../PhaserExtension"),h=e("../constants/GameEvents"),f=(r(h),e("../constants/GameStateEnum")),p=(r(f),e("../constants/GameConstants")),d=(o(p),e("../models/GameModel")),y=(o(d),e("./Enemy")),m=o(y),g=function(e){function t(e){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,c.SafeUtils.get([e.cache.getJSON("gameConfig"),"assets","enemyNormal"])))}return s(t,e),l(t,[{key:"update",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this)}},{key:"destroy",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"onStarted",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onStarted",this).call(this)}},{key:"stomp",value:function(e){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"stomp",this).call(this,e),c.audio.playNormal(this.game,{trackKey:this.config.sounds.shipExplosion})}}]),t}(m["default"]);n["default"]=g},{"../../PhaserExtension":22,"../constants/GameConstants":25,"../constants/GameEvents":26,"../constants/GameStateEnum":27,"../models/GameModel":29,"./Enemy":30}],33:[function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function w(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:w(r,t,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},c=e("../../PhaserExtension"),h=e("../models/GameModel"),f=r(h),p=e("../constants/GameStateEnum"),d=o(p),y=e("../factories/EnemyFactory"),m=o(y),g=e("../constants/GameConstants"),v=r(g),b=e("../utils/ObjectPool"),k=r(b),_=function(e){function t(e,n){a(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.config=c.SafeUtils.get([o.game.cache.getJSON("gameConfig"),"assets","enemySpawner"]),o.spawnCounter=0,o.spawnTime=o.config.variables.spawnTime,o.player=n,o.previousSpawnAmount=0,o.currentBoostSpawnChance=95,o.enemyNormalGroup=new Phaser.Group(o.game),o.add(o.enemyNormalGroup),o.enemyBoostGroup=new Phaser.Group(o.game),o.add(o.enemyBoostGroup),o.objectPoolMap={ENEMY_NORMAL:new k["default"](o.game,o.enemyNormalGroup,m.getEnemyNormal,o.config.variables.enemyNormal),ENEMY_BOOST:new k["default"](o.game,o.enemyBoostGroup,m.getEnemyBoost,o.config.variables.enemyBoost)},o}return s(t,e),l(t,[{key:"update",value:function(){if(u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this),(f["default"].gameState==d.PLAY||f["default"].gameState==d.SMASH)&&(this.spawnCounter+=this.game.time.elapsedMS*f["default"].currentVelocity.x/v["default"].BASE_SPEED.x,this.spawnCounter>this.spawnTime)){0==this.previousSpawnAmount?this.previousSpawnAmount=this.game.rnd.realInRange(1,3):this.previousSpawnAmount=this.game.rnd.realInRange(0,3);for(var e=0;e<this.previousSpawnAmount;e++){var n=new Phaser.Point(this.game.camera.x+this.game.width+200+425*e,this.game.height-50*this.game.rnd.realInRange(3,10));this.game.rnd.realInRange(0,100)<this.currentBoostSpawnChance?(this.objectPoolMap.ENEMY_NORMAL.spawn(n.x,n.y),this.currentBoostSpawnChance-=.25):(this.objectPoolMap.ENEMY_BOOST.spawn(n.x,n.y),this.currentBoostSpawnChance=95)}this.spawnCounter=0,this.spawnTime+=5}}},{key:"destroy",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.objectPoolMap.ENEMY_NORMAL.destroy(),this.objectPoolMap.ENEMY_BOOST.destroy(),this.objectPoolMap={}}},{key:"onStarted",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onStarted",this).call(this)}}]),t}(Phaser.Group);n["default"]=_},{"../../PhaserExtension":22,"../constants/GameConstants":25,"../constants/GameStateEnum":27,"../factories/EnemyFactory":28,"../models/GameModel":29,"../utils/ObjectPool":43}],34:[function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function v(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:v(r,t,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},c=e("../../PhaserExtension"),h=e("../models/GameModel"),f=r(h),p=e("../constants/GameStateEnum"),d=o(p),y=e("../constants/GameEvents"),m=o(y),g=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.config=c.SafeUtils.get([n.game.cache.getJSON("gameConfig"),"assets","hulkSmash"]),n.currentVelocity=new Phaser.Point(1e3,1e3),n.cameraFollow=!0,n.cameraOffsetTargetX=0,n.cameraOffsetTargetY=0,n.cameraTargetPositionX=n.x,n.cameraTargetPositionY=n.y,n.display=c.flump.libraries.gameLibrary.createClip(n.config.display.primary),n.display.loop(n.config.display.primary),n.display.position.x=-185,n.display.position.y=-435,n.position.set(n.game.width/2,n.game.height/2),n.addChild(n.display),n.display.anchor.setTo(.5,.5),n.game.physics.enable(n,Phaser.Physics.ARCADE),n.body.collideWorldBounds=!0,n.body.setSize(n.config.transform.collider.size.x,n.config.transform.collider.size.y),n.body.offset.set(n.config.transform.collider.offset.x,n.config.transform.collider.offset.y),n.body.maxVelocity.y=5e3,n.body.immovable=!0,n.body.allowGravity=!1,f["default"].currentVelocity.x=n.config.variables.speed,n.body.velocity.x=f["default"].currentVelocity.x,f["default"].gameState=d.SMASH,n.cameraFollow=!0,n.initialTime=1500,c.audio.playNormal(n.game,{trackKey:n.config.sounds.hulkSmashLoop}),n}return s(t,e),l(t,[{key:"update",value:function(){if(u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this),this.alive){if(this.cameraFollow){var e=this.x+this.cameraOffsetTargetX,n=this.y+this.cameraOffsetTargetY;this.game.camera.x=Phaser.Math.linearInterpolation([this.game.camera.x,e],.15),this.game.camera.y=Phaser.Math.linearInterpolation([this.game.camera.y,n],.5)}this.initialTime>0?this.initialTime-=2*this.game.time.elapsedMS:f["default"].destructionMeter-=2*this.game.time.elapsedMS,f["default"].destructionMeter<0&&(m.endGame.dispatch(),c.audio.stop("hulkSmashLoop"),this.kill())}}},{key:"destroy",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"onStarted",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onStarted",this).call(this)}},{key:"hitEnemy",value:function(){}}]),t}(c.SpriteContainer);n["default"]=g},{"../../PhaserExtension":22,"../constants/GameEvents":26,"../constants/GameStateEnum":27,"../models/GameModel":29}],35:[function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function k(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:k(r,t,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},c=e("../../PhaserExtension"),h=e("../models/GameModel"),f=r(h),p=e("../constants/GameStateEnum"),d=o(p),y=e("../constants/GameEvents"),m=o(y),g=e("../constants/GameConstants"),v=r(g),b=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.config=c.SafeUtils.get([n.game.cache.getJSON("gameConfig"),"assets","player"]),n.keyboard=null,n.startLaunch=!1,n.superSmashing=!1,n.cameraFollow=!0,n.stopped=!1,n.focus=!0,n.timer=null,n.cameraOffsetTargetX=-100,n.cameraOffsetTargetY=-100,n.cameraTargetPositionX=n.x,n.cameraTargetPositionY=n.y,n.display=c.flump.libraries.gameLibrary.createClip(n.config.display.primary),n.position.set(n.config.transform.position.x,n.game.height+n.config.transform.position.y),n.addChild(n.display),n.display.anchor.setTo(.5,.5),n.game.physics.enable(n,Phaser.Physics.ARCADE),n.body.collideWorldBounds=!0,n.body.setSize(n.config.transform.collider.size.x,n.config.transform.collider.size.y),n.body.offset.set(n.config.transform.collider.offset.x,n.config.transform.collider.offset.y),n.body.maxVelocity.y=5e3,n.body.allowGravity=!1,f["default"].gameState=d.LAUNCH,n.game.input.onDown.add(n.groundSmash,n),n.spaceBarKey=n.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),n.spaceBarKey.onDown.add(n.groundSmash,n),n.game.onPause.add(n.onPause,n),n.game.onResume.add(n.onResume,n),m.launch.add(n.launch,n),n}return s(t,e),l(t,[{key:"update",value:function(){if(u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this),f["default"].gameState==d.PLAY){if(this.cameraFollow){var e=this.x+this.cameraOffsetTargetX,n=this.y+this.cameraOffsetTargetY;this.game.camera.x=Phaser.Math.linearInterpolation([this.game.camera.x,e],.35),this.game.camera.y=Phaser.Math.linearInterpolation([this.game.camera.y,n],.5)}this.body.velocity.x>3e3&&(this.body.velocity.x=Phaser.Math.minSub(this.body.velocity.x,25,3e3)),f["default"].currentDistance=Phaser.Math.roundTo(this.body.x/200),this.setWooshVolume()}}},{key:"destroy",value:function(){this.game.input.onDown.remove(this.groundSmash,this),this.spaceBarKey.onDown.remove(this.groundSmash,this),this.game.input.keyboard.removeKey(this.spaceBarKey),this.game.onPause.remove(this.onPause,this),this.game.onResume.remove(this.onResume,this),m.launch.remove(this.launch,this),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"onStarted",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onStarted",this).call(this)}},{key:"launch",value:function(e,t){f["default"].gameState=d.PLAY,this.body.allowGravity=!0,this.display.playOnce(this.config.display.jump),e*=3250,f["default"].currentVelocity.x=Math.cos(t)*e,f["default"].currentVelocity.y=Math.sin(t)*e,this.body.velocity.set(f["default"].currentVelocity.x,f["default"].currentVelocity.y),c.audio.playNormal(this.game,{trackKey:this.config.sounds.launch}),c.audio.playNormal(this.game,{trackKey:this.config.sounds.woosh}),this.cameraFollow=!1,this.game.time.events.add(100,function(){this.cameraFollow=!0},this)}},{key:"stop",value:function(){this.stopped||(f["default"].currentVelocity.x=0,f["default"].currentVelocity.y=0,this.body.velocity.set(f["default"].currentVelocity.x,f["default"].currentVelocity.y),this.stopped=!0,f["default"].currentDistance=Phaser.Math.roundTo(this.body.x/200),null!=this.timer&&this.game.time.events.remove(this.timer),this.display.playOnce(this.config.display.stand),this.timer=this.game.time.events.add(500,function(){f["default"].destructionMeter>99?(this.display.play({clip:this.config.display.smash}),c.audio.playNormal(this.game,{trackKey:this.config.sounds.hulkSmashStart}),this.timer=this.game.time.events.add(900,function(){m.spawnHulkSmash.dispatch(this.position)},this)):m.endGame.dispatch()},this))}},{key:"groundSmash",value:function(){f["default"].gameState==d.PLAY&&!this.stopped&&this.focus&&(f["default"].currentVelocity.y=Math.max(Math.abs(f["default"].currentVelocity.y),1e3),this.body.velocity.y=f["default"].currentVelocity.y)}},{key:"hitGround",value:function(){v["default"].BASE_SPEED.y-f["default"].currentVelocity.y<0?f["default"].currentVelocity.x*=.95:f["default"].currentVelocity.x*=.75,f["default"].currentVelocity.y*=.85,this.body.velocity.x=f["default"].currentVelocity.x,this.body.velocity.y=-Math.abs(f["default"].currentVelocity.y),this.game.camera.shake(.005*f["default"].currentVelocity.x/1e3,250),this.stopped||c.audio.playNormal(this.game,{trackKey:this.config.sounds.groundHit}),this.stomp()}},{key:"hitEnemy",value:function(){this.superSmashing||(f["default"].currentVelocity.y>1e3&&(f["default"].currentVelocity.y=Math.max(.5*f["default"].currentVelocity.y,1e3)),this.body.velocity.x=f["default"].currentVelocity.x,this.body.velocity.y=-Math.abs(f["default"].currentVelocity.y),this.game.camera.shake(.01*f["default"].currentVelocity.x/1e3,250),this.stomp())}},{key:"hitEnemySupport",value:function(){f["default"].currentVelocity.x+=750,f["default"].currentVelocity.y=-(Math.abs(f["default"].currentVelocity.y)+250),f["default"].currentVelocity.y>2500&&(f["default"].currentVelocity.y=2500),this.body.velocity.x=f["default"].currentVelocity.x,this.body.velocity.y=f["default"].currentVelocity.y,this.game.camera.shake(.02*f["default"].currentVelocity.x/1e3,250),this.stomp()}},{key:"stomp",value:function(){this.stopped||(null!=this.timer&&this.game.time.events.remove(this.timer),this.display.playOnce(this.config.display.attack),this.timer=this.game.time.events.add(250,function(){this.display.playOnce(this.config.display.jump)},this))}},{key:"setWooshVolume",value:function(){c.audio.setChannelVolume(this.config.sounds.woosh,f["default"].currentVelocity.x/1e3/2)}},{key:"onPause",value:function(){this.focus=!1}},{key:"onResume",value:function(){this.focus=!0}}]),t}(c.SpriteContainer);n["default"]=b},{"../../PhaserExtension":22,"../constants/GameConstants":25,"../constants/GameEvents":26,"../constants/GameStateEnum":27,"../models/GameModel":29}],36:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function v(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:v(r,t,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},c=e("../../PhaserExtension"),h=e("../constants/GameEvents"),f=r(h),p=e("../constants/GameStateEnum"),d=r(p),y=e("../models/GameModel"),m=o(y),g=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.config=c.SafeUtils.get([n.game.cache.getJSON("gameConfig"),"assets","destructionMeter"]),n.fixedToCamera=!0,n.background=n.game.add.image(n.game.width+n.config.transform.position.x,n.config.transform.position.y,n.config.display.background),n.background.position.x-=n.background.width+50,n.background.position.y+=n.background.height/2+25,n.background.anchor.y=.5,n.addChild(n.background),n.foreground=n.game.add.image(n.background.x,n.background.y,n.config.display.foreground),n.foreground.position.x+=5,n.foreground.position.y+=.5,n.foreground.anchor.y=.5,n.addChild(n.foreground),n.icon=n.game.add.image(n.background.x+n.background.width,n.background.y,n.config.display.icon),n.icon.anchor.set(.5),n.addChild(n.icon),n.baseWidth=n.foreground.width,n.cropRect=new Phaser.Rectangle(0,0,0,n.foreground.height),n.foreground.crop(n.cropRect),f.addDestruction.add(n.addDestruction,n),n}return s(t,e),l(t,[{key:"update",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this),m["default"].gameState==d.SMASH&&(this.cropRect.width=this.baseWidth*m["default"].destructionMeter/1e4,this.foreground.updateCrop())}},{key:"destroy",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),f.addDestruction.remove(this.addDestruction,this)}},{key:"addDestruction",value:function(e){m["default"].destructionMeter=Math.min(m["default"].destructionMeter+e,1e4),this.cropRect.width=this.baseWidth*m["default"].destructionMeter/1e4,this.foreground.updateCrop()}}]),t}(Phaser.Group);n["default"]=g},{"../../PhaserExtension":22,"../constants/GameEvents":26,"../constants/GameStateEnum":27,"../models/GameModel":29}],37:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function m(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:m(r,t,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},c=(e("../../PhaserExtension"),e("../constants/GameEvents")),h=(r(c),e("../models/GameModel")),f=o(h),p=e("../constants/GameConstants"),d=o(p),y=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.fixedToCamera=!0,n.distanceCounter=new Phaser.Text(n.game,n.game.width-20,130,"0FT",d["default"].FONT_STYLE),n.distanceCounter.anchor.setTo(.5),n.distanceCounter.fontSize=23,n.distanceCounter.setShadow(-2,2,"rgba(0,0,0,0.9)",0),n.distanceCounter.anchor.x=1,n.addChild(n.distanceCounter),n}return s(t,e),l(t,[{key:"update",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this),this.distanceCounter.text=f["default"].currentDistance+"FT"}},{key:"destroy",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}}]),t}(Phaser.Group);n["default"]=y},{"../../PhaserExtension":22,"../constants/GameConstants":25,"../constants/GameEvents":26,"../models/GameModel":29}],38:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function v(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:v(r,t,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},c=e("../../PhaserExtension"),h=e("../constants/GameEvents"),f=r(h),p=e("../models/GameModel"),d=o(p),y=e("../constants/GameConstants"),m=o(y),g=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.config=c.SafeUtils.get([n.game.cache.getJSON("gameConfig"),"assets","endScreen"]),n.fixedToCamera=!0;var o;try{o=window.localStorage.getItem("highscore")}catch(r){}var s=Phaser.Math.roundTo(d["default"].currentScore*Phaser.Math.roundTo(1+d["default"].currentDistance/100*.1,-1),1),l=!1;if(null==o&&(o=0),s>o){o=s;try{window.localStorage.setItem("highscore",s)}catch(r){}l=!0}return n.underlay=n.game.add.image(n.game.width/2+n.config.transform.position.x,n.game.height/2+n.config.transform.position.y,"ulBlack"),n.underlay.scale.set(20),n.underlay.anchor.setTo(.5,.5),n.addChild(n.underlay),n.display=n.game.add.image(n.game.width/2+n.config.transform.position.x,n.game.height/2+n.config.transform.position.y,n.config.display.primary),n.display.anchor.setTo(.5,.5),n.addChild(n.display),n.score=new Phaser.Text(n.game,0,-50,"SCORE: "+d["default"].currentScore,m["default"].FONT_STYLE),n.score.anchor.setTo(.5),n.score.fontSize=31,n.score.setShadow(-2,2,"rgba(0,0,0,0.9)",0),n.display.addChild(n.score),n.distance=new Phaser.Text(n.game,0,-20,"x"+Phaser.Math.roundTo(1+d["default"].currentDistance/100*.1,-1)+" ("+d["default"].currentDistance+"FT)",m["default"].FONT_STYLE),n.distance.anchor.setTo(.5),n.distance.fontSize=21,n.distance.setShadow(-2,2,"rgba(0,0,0,0.9)",0),n.display.addChild(n.distance),n.totalScore=new Phaser.Text(n.game,0,10,"TOTAL: "+s,m["default"].FONT_STYLE),n.totalScore.anchor.setTo(.5),n.totalScore.fontSize=31,n.totalScore.setShadow(-2,2,"rgba(0,0,0,0.9)",0),n.display.addChild(n.totalScore),n.highscore=new Phaser.Text(n.game,0,55,"",m["default"].FONT_STYLE),n.highscore.anchor.setTo(.5),n.highscore.fontSize=36,n.highscore.setShadow(-2,2,"rgba(0,0,0,0.9)",0),n.display.addChild(n.highscore),l?n.highscore.text="NEW HIGHSCORE: "+o:n.highscore.text="HIGHSCORE: "+o,n.replayButton=n.game.add.image(0,n.display.height/2+5,n.config.display.replayButton),n.replayButton.hitArea=new Phaser.Rectangle(-100,-50,200,100),n.replayButton.inputEnabled=!0,n.replayButton.input.useHandCursor=!0,n.replayButton.events.onInputUp.add(n.onReplayButtonUp,n),n.replayButton.events.onInputOver.add(n.onReplayButtonHover,n),n.replayButton.events.onInputOut.add(n.onReplayButtonOut,n),n.replayButton.anchor.x=.5,n.replayButton.anchor.y=.5,n.display.addChild(n.replayButton),n}return s(t,e),l(t,[{key:"update",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this)}},{key:"destroy",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"onReplayButtonHover",value:function(){this.replayButton.loadTexture(this.config.display.replayButtonHover)}},{key:"onReplayButtonOut",value:function(){this.replayButton.loadTexture(this.config.display.replayButton)}},{key:"onReplayButtonUp",value:function(){c.audio.playNormal(this.game,{trackKey:this.config.sounds.buttonClick}),f.restartGame.dispatch()}}]),t}(Phaser.Group);n["default"]=g;
},{"../../PhaserExtension":22,"../constants/GameConstants":25,"../constants/GameEvents":26,"../models/GameModel":29}],39:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function v(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:v(r,t,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},c=e("../../PhaserExtension"),h=e("../constants/GameEvents"),f=r(h),p=e("./PowerBar"),d=o(p),y=e("./LaunchArrow"),m=o(y),g=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.config=c.SafeUtils.get([n.game.cache.getJSON("gameConfig"),"assets","launch"]),n.isDown=!1,n.focus=!0,n.fixedToCamera=!0,n.group=n.game.add.group(n),n.group.position.set(0,0),n.powerBar=new d["default"](n.game),n.group.add(n.powerBar),n.launchArrow=new m["default"](n.game),n.group.add(n.launchArrow),n.launchArrow.kill(),n.game.input.onDown.add(n.onTouchDown,n),n.game.input.onUp.add(n.onTouchUp,n),n.game.onPause.add(n.onPause,n),n.game.onResume.add(n.onResume,n),n}return s(t,e),l(t,[{key:"update",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this)}},{key:"destroy",value:function(){this.game.input.onDown.remove(this.onTouchDown,this),this.game.input.onUp.remove(this.onTouchUp,this),this.game.onPause.remove(this.onPause,this),this.game.onResume.remove(this.onResume,this),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"onTouchDown",value:function(){!this.isDown&&this.focus&&(this.isDown=!0,this.powerBar.powerSet?(f.launch.dispatch(this.powerBar.stop(),this.launchArrow.stop()),this.destroy()):(this.powerBar.stop(),this.launchArrow.reset(),c.audio.playNormal(this.game,{trackKey:this.config.sounds.launchSet})))}},{key:"onTouchUp",value:function(){this.isDown=!1}},{key:"onPause",value:function(){this.focus=!1}},{key:"onResume",value:function(){this.focus=!0}}]),t}(Phaser.Group);n["default"]=g},{"../../PhaserExtension":22,"../constants/GameEvents":26,"./LaunchArrow":40,"./PowerBar":41}],40:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function g(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:g(r,t,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},c=e("../../PhaserExtension"),h=e("../constants/GameEvents"),f=(r(h),e("../constants/GameStateEnum")),p=r(f),d=e("../models/GameModel"),y=o(d),m=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.config=c.SafeUtils.get([n.game.cache.getJSON("gameConfig"),"assets","launchArrow"]),n.speed=1.5,n.direction=-1,n.angleSet=!1,n.display=n.game.add.image(n.config.transform.position.x,n.game.height+n.config.transform.position.y,n.config.display.primary),n.display.anchor.x=0,n.display.anchor.y=.5,n.display.angle=-10,n.addChild(n.display),n.launchRange=n.game.add.image(n.display.x+25,n.display.y-160,n.config.display.launchRange),n.addChild(n.launchRange),n}return s(t,e),l(t,[{key:"update",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this),y["default"].gameState==p.LAUNCH&&!this.angleSet&&this.alive&&(this.display.angle+=this.speed*this.direction,(this.display.angle<=-75&&-1==this.direction||this.display.angle>=-10&&1==this.direction)&&(this.direction*=-1,c.audio.playNormal(this.game,{trackKey:this.config.sounds.launchBlip})))}},{key:"destroy",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"stop",value:function(){return this.angleSet=!0,this.display.rotation}}]),t}(Phaser.Sprite);n["default"]=m},{"../../PhaserExtension":22,"../constants/GameEvents":26,"../constants/GameStateEnum":27,"../models/GameModel":29}],41:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function m(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:m(r,t,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},c=e("../../PhaserExtension"),h=e("../constants/GameStateEnum"),f=r(h),p=e("../models/GameModel"),d=o(p),y=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.config=c.SafeUtils.get([n.game.cache.getJSON("gameConfig"),"assets","powerBar"]),n.speed=10,n.direction=1,n.powerSet=!1,n.background=new Phaser.Image(n.game,n.game.width+n.config.transform.position.x,n.game.height+n.config.transform.position.y,n.config.display.background),n.background.anchor.set(1,.5),n.background.angle=90,n.addChild(n.background),n.foreground=new Phaser.Image(n.game,n.background.x-.5,n.background.y-4,n.config.display.foreground),n.foreground.anchor.set(.5,1),n.addChild(n.foreground),n.icon=new Phaser.Image(n.game,n.foreground.x,n.foreground.y-n.foreground.height,n.config.display.icon),n.icon.anchor.set(.5),n.addChild(n.icon),n.baseHeight=n.foreground.height,n.cropRect=new Phaser.Rectangle(0,n.foreground.height,n.foreground.width,n.foreground.height),n.foreground.crop(n.cropRect),n}return s(t,e),l(t,[{key:"update",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this),d["default"].gameState!=f.LAUNCH||this.powerSet||(this.cropRect.y+=this.speed*this.direction,this.foreground.updateCrop(),(this.cropRect.y>=this.baseHeight&&1==this.direction||this.cropRect.y<=0&&-1==this.direction)&&(this.direction*=-1,c.audio.playNormal(this.game,{trackKey:this.config.sounds.launchBlip})))}},{key:"destroy",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"stop",value:function(){this.powerSet=!0;var e=(this.baseHeight-this.cropRect.y)/this.baseHeight;return e+(1-e)*e}}]),t}(Phaser.Sprite);n["default"]=y},{"../../PhaserExtension":22,"../constants/GameStateEnum":27,"../models/GameModel":29}],42:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function g(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:g(r,t,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},c=(e("../../PhaserExtension"),e("../constants/GameEvents")),h=r(c),f=e("../models/GameModel"),p=o(f),d=e("../constants/GameConstants"),y=o(d),m=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.fixedToCamera=!0,n.scoreCounter=new Phaser.Text(n.game,n.game.width-20,100,"SCORE: 0000",y["default"].FONT_STYLE),n.scoreCounter.anchor.setTo(1,.5),n.scoreCounter.setShadow(-2,2,"rgba(0,0,0,0.9)",0),n.addChild(n.scoreCounter),h.addPoints.add(n.addPoints,n),n}return s(t,e),l(t,[{key:"update",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this)}},{key:"destroy",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),h.addPoints.remove(this.addPoints,this)}},{key:"addPoints",value:function(e){p["default"].currentScore+=e,this.scoreCounter.text="SCORE: "+this.pad(p["default"].currentScore,4)}},{key:"pad",value:function(e,t,n){return n=n||"0",e+="",e.length>=t?e:new Array(t-e.length+1).join(n)+e}}]),t}(Phaser.Group);n["default"]=m},{"../../PhaserExtension":22,"../constants/GameConstants":25,"../constants/GameEvents":26,"../models/GameModel":29}],43:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=function(){function e(t,n,r,a){o(this,e),this.game=t,this.objectPool=[],this.group=n,this.createFunction=r;for(var i=0;a>i;i++)this.create()}return r(e,[{key:"create",value:function(){var e=this.createFunction(this.game);return e.kill(),this.objectPool.push(e),this.group.add(e),e}},{key:"spawn",value:function(e,t){for(var n=null,o=0;o<this.objectPool.length;o++)if(!this.objectPool[o].alive){n=this.objectPool[o];break}return null==n&&(n=this.create()),n.reset(e,t),n}},{key:"destroy",value:function(){for(var e=0;e<this.objectPool.length;e++)this.objectPool[e].destroy(!0);this.objectPool=null}}]),e}();n["default"]=a},{}],44:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=e("../PhaserExtension"),l=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),i(t,[{key:"preload",value:function(){s.resizer.init(this.game,this.game.width,this.game.height,s.resizer.RESIZE_BY_WIDTH),s.assets.preloadAssetPacks(this.game,["main"])}},{key:"create",value:function(){var e=s.SafeUtils.get([this.cache.getJSON("mainConfig"),"sounds","channels"]);s.audio.setupChannels(e),this.game.state.start("loading",!0,!1,"title",["title"])}}]),t}(Phaser.State);n["default"]=l},{"../PhaserExtension":22}],45:[function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function N(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:N(r,t,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},c=e("../PhaserExtension"),h=e("../game/objects/Player"),f=r(h),p=e("../game/objects/HulkSmash"),d=r(p),y=e("../game/objects/EnemySpawner"),m=r(y),g=e("../game/background/ScrollingBackgroundContainer"),v=r(g),b=e("../game/constants/GameEvents"),k=o(b),_=e("../game/constants/GameStateEnum"),w=o(_),O=e("../game/models/GameModel"),P=r(O),S=e("../game/ui/DestructionMeter"),x=r(S),j=e("../game/ui/ScoreCounter"),C=r(j),E=e("../game/ui/DistanceCounter"),M=r(E),T=e("../game/ui/EndScreen"),F=r(T),A=e("../game/ui/Launch"),G=r(A),L=e("../game/constants/GameConstants"),R=r(L),B=function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"create",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"create",this).call(this),this.config=c.SafeUtils.get([this.game.cache.getJSON("gameConfig"),"assets","state"]);var e=c.SafeUtils.get([this.cache.getJSON("gameConfig"),"sounds","channels"]);c.audio.setupChannels(e),c.audio.playNormal(this.game,{trackKey:this.config.sounds.bgm}),c.flump.addLibrary(this.game,"gameLibrary","assets/game/flump/");var n=this.game.add.sprite(-50,-50,"skyline");n.scale.set(1.25),n.fixedToCamera=!0,this.backgroundContainer=new v["default"](this.game),this.world.addChild(this.backgroundContainer),this.world.setBounds(0,-10*this.game.height,1e6,11*this.game.height),this.mainground=this.game.add.group(),this.foreground=this.game.add.group(),this.game.physics.startSystem(Phaser.Physics.ARCADE),this.game.physics.arcade.gravity.y=1500,this.enemySpawner=new m["default"](this.game,this.player),this.mainground.add(this.enemySpawner),this.player=new f["default"](this.game),this.foreground.add(this.player),this.ground=new Phaser.Sprite(this.game,0,500),this.world.add(this.ground),this.ground.anchor.setTo(.5,0),this.ground.scale.x=this.game.world.width,this.ground.scale.y=100,this.game.physics.arcade.enable(this.ground,!0),this.ground.body.allowGravity=!1,this.ground.body.immovable=!0,this.ground.body.moves=!1,this.uiGroup=this.game.add.group(),this.destructionMeter=new x["default"](this.game),this.uiGroup.add(this.destructionMeter),this.scoreCounter=new C["default"](this.game),this.uiGroup.add(this.scoreCounter),this.distanceCounter=new M["default"](this.game),this.uiGroup.add(this.distanceCounter),this.launch=new G["default"](this.game),this.uiGroup.add(this.launch),k.spawnHulkSmash.add(this.spawnHulkSmash,this),k.endGame.add(this.endGame,this),k.restartGame.add(this.restartGame,this)}},{key:"update",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this),this.game.physics.arcade.collide(this.player,this.ground,this.onPlayerGroundCollision,null,this),P["default"].gameState==w.PLAY?(this.game.physics.arcade.overlap(this.player,this.enemySpawner.enemyBoostGroup,this.onPlayerEnemySupportCollision,null,this),this.game.physics.arcade.overlap(this.player,this.enemySpawner.enemyNormalGroup,this.onPlayerEnemyCollision,null,this)):P["default"].gameState==w.SMASH&&(this.game.physics.arcade.overlap(this.hulkSmash,this.enemySpawner.enemyBoostGroup,this.onSmashEnemyCollision,null,this),this.game.physics.arcade.overlap(this.hulkSmash,this.enemySpawner.enemyNormalGroup,this.onSmashEnemyCollision,null,this))}},{key:"shutdown",value:function(){k.spawnHulkSmash.remove(this.spawnHulkSmash,this),k.endGame.remove(this.endGame,this),k.restartGame.remove(this.restartGame,this),c.flump.removeLibrary("gameLibrary");var e=c.SafeUtils.get([this.cache.getJSON("gameConfig"),"sounds","channels"]);c.audio.cleanupChannels(e),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"shutdown",this).call(this)}},{key:"onPlayerGroundCollision",value:function(e,t){P["default"].gameState==w.PLAY&&(e.hitGround(),P["default"].currentVelocity.x<300&&e.stop())}},{key:"onPlayerEnemyCollision",value:function(e,t){!t.stomped&&e.body.velocity.y>0&&e.y<t.y+50&&(e.hitEnemy(),t.stomp(e.body.velocity.x))}},{key:"onPlayerEnemySupportCollision",value:function(e,t){!t.stomped&&e.body.velocity.y>0&&e.y<t.y+50&&(e.hitEnemySupport(),t.stomp(e.body.velocity.x))}},{key:"onSmashEnemyCollision",value:function(e,t){t.stomped||(e.hitEnemy(),t.stomp(e.body.velocity.x))}},{key:"render",value:function(){}},{key:"spawnHulkSmash",value:function(e){this.hulkSmash=new d["default"](this.game),this.hulkSmash.position.set(e.x,e.y),this.foreground.addChildAt(this.hulkSmash,0)}},{key:"endGame",value:function(){this.endScreen=new F["default"](this.game),this.add.world.add(this.endScreen),P["default"].gameState=w.GAME_OVER;try{Uatu.warn("game_complete",{game_name:R["default"].GAME_NAME})}catch(e){console.log("Uatu not found.")}}},{key:"restartGame",value:function(){P["default"].reset(),this.game.state.start("loading",!0,!1,"game");try{Uatu.warn("game_continue",{game_name:R["default"].GAME_NAME,game_level:1})}catch(e){console.log("Uatu not found.")}}}]),t}(Phaser.State);n["default"]=B},{"../PhaserExtension":22,"../game/background/ScrollingBackgroundContainer":24,"../game/constants/GameConstants":25,"../game/constants/GameEvents":26,"../game/constants/GameStateEnum":27,"../game/models/GameModel":29,"../game/objects/EnemySpawner":33,"../game/objects/HulkSmash":34,"../game/objects/Player":35,"../game/ui/DestructionMeter":36,"../game/ui/DistanceCounter":37,"../game/ui/EndScreen":38,"../game/ui/Launch":39,"../game/ui/ScoreCounter":42}],46:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=e("../PhaserExtension"),l=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),i(t,[{key:"init",value:function(e,t,n){this.nextState=e,this.loadList=t,this.unloadList=n}},{key:"preload",value:function(){return null==this.loadList&&null==this.unloadList?void this.game.state.start(this.nextState):(this.game.add.image(this.game.width/2,this.game.height/2,"loadingBackground").anchor.set(.5),this.background=new Phaser.Image(this.game,this.game.width/2,this.game.height/2+100,"barContainer"),this.background.anchor.set(.5,1),this.world.add(this.background),this.foreground=new Phaser.Image(this.game,this.background.x-this.background.width/2+5.5,this.background.y-3,"powerBarForeground"),this.foreground.angle=90,this.foreground.anchor.set(1,1),this.world.add(this.foreground),this.baseHeight=this.foreground.height,this.cropRect=new Phaser.Rectangle(0,this.foreground.height,this.foreground.width,this.foreground.height),this.foreground.crop(this.cropRect),s.assets.unloadAssetPacks(this.game,this.unloadList),s.assets.preloadAssetPacks(this.game,this.loadList),void s.assets.addProgressCallback(this.game,this.onLoadProgress,this))}},{key:"create",value:function(){s.assets.removeProgressCallback(this.game,this.onLoadProgress,this),this.game.time.events.add(250,function(){this.game.state.start(this.nextState)},this)}},{key:"onLoadProgress",value:function(e,t,n,o,r){console.log(e,t,n,o,r),this.cropRect.y=this.baseHeight*(1-e/100),this.foreground.updateCrop()}}]),t}(Phaser.State);n["default"]=l},{"../PhaserExtension":22}],47:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function p(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:p(r,t,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},u=e("../PhaserExtension"),c=e("../game/constants/GameConstants"),h=o(c),f=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"create",value:function(){this.config=u.SafeUtils.get([this.game.cache.getJSON("titleConfig"),"assets"]);var e=u.SafeUtils.get([this.cache.getJSON("titleConfig"),"sounds","channels"]);u.audio.setupChannels(e),this.background=this.game.add.image(this.game.width/2,this.game.height/2,this.config.state.display.background),this.background.anchor.set(.5),this.background.inputEnabled=!0,this.background.events.onInputUp.addOnce(this.startMusic,this),this.game.add.image(this.game.width+this.config.copyright.transform.position.x,this.game.height+this.config.copyright.transform.position.y,this.config.copyright.display.primary).anchor.set(1),this.btn=this.game.add.image(0,0,this.config.playButton.display.primary),this.btn.anchor.set(.5),this.btn.position.set(this.game.width/2+125,450),this.btn.hitArea=new Phaser.Rectangle(-100,-50,200,100),this.btn.inputEnabled=!0,this.btn.input.useHandCursor=!0,this.btn.events.onInputUp.add(this.onBtnUp,this),this.btn.events.onInputOver.add(this.onBtnHover,this),this.btn.events.onInputOut.add(this.onBtnOut,this),this.world.add(this.btn)}},{key:"shutdown",value:function(){var e=u.SafeUtils.get([this.cache.getJSON("titleConfig"),"sounds","channels"]);u.audio.cleanupChannels(e),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"shutdown",this).call(this)}},{key:"startMusic",value:function(){u.audio.playNormal(this.game,{trackKey:this.config.state.sounds.bgm})}},{key:"onBtnHover",value:function(){this.btn.loadTexture(this.config.playButton.display.hover)}},{key:"onBtnOut",value:function(){this.btn.loadTexture(this.config.playButton.display.primary)}},{key:"onBtnUp",value:function(){this.game.state.start("loading",!0,!1,"tutorial",["tutorial"],["title"]),u.audio.playNormal(this.game,{trackKey:this.config.playButton.sounds.buttonClick});try{Uatu.warn("game_start",{game_name:h["default"].GAME_NAME})}catch(e){console.log("Uatu not found.")}}}]),t}(Phaser.State);n["default"]=f},{"../PhaserExtension":22,"../game/constants/GameConstants":25}],48:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function f(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:f(r,t,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},u=e("../PhaserExtension"),c=e("../game/constants/GameConstants"),h=(o(c),function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"create",value:function(){this.config=u.SafeUtils.get([this.game.cache.getJSON("tutorialConfig"),"assets"]);var e=u.SafeUtils.get([this.cache.getJSON("tutorialConfig"),"sounds","channels"]);u.audio.setupChannels(e),this.background=null,this.game.device.desktop?this.background=this.game.add.image(this.game.width/2,this.game.height/2,this.config.state.display.tutorialDesktop):this.background=this.game.add.image(this.game.width/2,this.game.height/2,this.config.state.display.tutorialMobile),this.background.anchor.set(.5),this.btn=this.game.add.image(0,0,this.config.playButton.display.primary),this.btn.anchor.set(.5),this.btn.scale.set(.75),this.btn.position.set(this.game.width/2+290,435),console.log(this.btn.x-this.game.width/2),this.btn.hitArea=new Phaser.Rectangle(-100,-50,200,100),this.btn.inputEnabled=!0,this.btn.input.useHandCursor=!0,this.btn.events.onInputUp.add(this.onBtnUp,this),this.btn.events.onInputOver.add(this.onBtnHover,this),this.btn.events.onInputOut.add(this.onBtnOut,this),this.world.add(this.btn),this.startMusic()}},{key:"shutdown",value:function(){var e=u.SafeUtils.get([this.cache.getJSON("tutorialConfig"),"sounds","channels"]);u.audio.cleanupChannels(e),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"shutdown",this).call(this)}},{key:"startMusic",value:function(){u.audio.playNormal(this.game,{trackKey:this.config.state.sounds.bgm})}},{key:"onBtnHover",value:function(){this.btn.loadTexture(this.config.playButton.display.hover)}},{key:"onBtnOut",value:function(){this.btn.loadTexture(this.config.playButton.display.primary)}},{key:"onBtnUp",value:function(){this.game.state.start("loading",!0,!1,"game",["game"],["tutorial"]),u.audio.playNormal(this.game,{trackKey:this.config.playButton.sounds.buttonClick})}}]),t}(Phaser.State));n["default"]=h},{"../PhaserExtension":22,"../game/constants/GameConstants":25}]},{},[21]);