! function(t) { if ("object" == typeof exports) module.exports = t();
    else { var e; "undefined" != typeof window ? e = window : "undefined" != typeof global ? e = global : "undefined" != typeof self && (e = self), e.p2 = t() } }(function() { return function t(e, i, n) {
        function s(a, r) { if (!i[a]) { if (!e[a]) { var h = "function" == typeof require && require; if (!r && h) return h(a, !0); if (o) return o(a, !0); throw new Error("Cannot find module '" + a + "'") } var l = i[a] = { exports: {} };
                e[a][0].call(l.exports, function(t) { var i = e[a][1][t]; return s(i || t) }, l, l.exports, t, e, i, n) } return i[a].exports } for (var o = "function" == typeof require && require, a = 0; a < n.length; a++) s(n[a]); return s }({ 1: [function(t, e, i) {
            function n() {} var s = t("./Scalar");
            e.exports = n, n.lineInt = function(t, e, i) { i = i || 0; var n, o, a, r, h, l, c, u = [0, 0]; return n = t[1][1] - t[0][1], o = t[0][0] - t[1][0], a = n * t[0][0] + o * t[0][1], r = e[1][1] - e[0][1], h = e[0][0] - e[1][0], l = r * e[0][0] + h * e[0][1], c = n * h - r * o, s.eq(c, 0, i) || (u[0] = (h * a - o * l) / c, u[1] = (n * l - r * a) / c), u }, n.segmentsIntersect = function(t, e, i, n) { var s = e[0] - t[0],
                    o = e[1] - t[1],
                    a = n[0] - i[0],
                    r = n[1] - i[1]; if (a * o - r * s == 0) return !1; var h = (s * (i[1] - t[1]) + o * (t[0] - i[0])) / (a * o - r * s),
                    l = (a * (t[1] - i[1]) + r * (i[0] - t[0])) / (r * s - a * o); return h >= 0 && h <= 1 && l >= 0 && l <= 1 } }, { "./Scalar": 4 }], 2: [function(t, e, i) {
            function n() {} e.exports = n, n.area = function(t, e, i) { return (e[0] - t[0]) * (i[1] - t[1]) - (i[0] - t[0]) * (e[1] - t[1]) }, n.left = function(t, e, i) { return n.area(t, e, i) > 0 }, n.leftOn = function(t, e, i) { return n.area(t, e, i) >= 0 }, n.right = function(t, e, i) { return n.area(t, e, i) < 0 }, n.rightOn = function(t, e, i) { return n.area(t, e, i) <= 0 }; var s = [],
                o = [];
            n.collinear = function(t, e, i, a) { if (a) { var r = s,
                        h = o;
                    r[0] = e[0] - t[0], r[1] = e[1] - t[1], h[0] = i[0] - e[0], h[1] = i[1] - e[1]; var l = r[0] * h[0] + r[1] * h[1],
                        c = Math.sqrt(r[0] * r[0] + r[1] * r[1]),
                        u = Math.sqrt(h[0] * h[0] + h[1] * h[1]); return Math.acos(l / (c * u)) < a } return 0 == n.area(t, e, i) }, n.sqdist = function(t, e) { var i = e[0] - t[0],
                    n = e[1] - t[1]; return i * i + n * n } }, {}], 3: [function(t, e, i) {
            function n() { this.vertices = [] }

            function s(t, e, i, n, s) { s = s || 0; var o = e[1] - t[1],
                    a = t[0] - e[0],
                    h = o * t[0] + a * t[1],
                    l = n[1] - i[1],
                    c = i[0] - n[0],
                    u = l * i[0] + c * i[1],
                    p = o * c - l * a; return r.eq(p, 0, s) ? [0, 0] : [(c * h - a * u) / p, (o * u - l * h) / p] } var o = t("./Line"),
                a = t("./Point"),
                r = t("./Scalar");
            e.exports = n, n.prototype.at = function(t) { var e = this.vertices,
                    i = e.length; return e[t < 0 ? t % i + i : t % i] }, n.prototype.first = function() { return this.vertices[0] }, n.prototype.last = function() { return this.vertices[this.vertices.length - 1] }, n.prototype.clear = function() { this.vertices.length = 0 }, n.prototype.append = function(t, e, i) { if (void 0 === e) throw new Error("From is not given!"); if (void 0 === i) throw new Error("To is not given!"); if (i - 1 < e) throw new Error("lol1"); if (i > t.vertices.length) throw new Error("lol2"); if (e < 0) throw new Error("lol3"); for (var n = e; n < i; n++) this.vertices.push(t.vertices[n]) }, n.prototype.makeCCW = function() { for (var t = 0, e = this.vertices, i = 1; i < this.vertices.length; ++i)(e[i][1] < e[t][1] || e[i][1] == e[t][1] && e[i][0] > e[t][0]) && (t = i);
                a.left(this.at(t - 1), this.at(t), this.at(t + 1)) || this.reverse() }, n.prototype.reverse = function() { for (var t = [], e = 0, i = this.vertices.length; e !== i; e++) t.push(this.vertices.pop());
                this.vertices = t }, n.prototype.isReflex = function(t) { return a.right(this.at(t - 1), this.at(t), this.at(t + 1)) }; var h = [],
                l = [];
            n.prototype.canSee = function(t, e) { var i, n, s = h,
                    r = l; if (a.leftOn(this.at(t + 1), this.at(t), this.at(e)) && a.rightOn(this.at(t - 1), this.at(t), this.at(e))) return !1;
                n = a.sqdist(this.at(t), this.at(e)); for (var c = 0; c !== this.vertices.length; ++c)
                    if ((c + 1) % this.vertices.length !== t && c !== t && a.leftOn(this.at(t), this.at(e), this.at(c + 1)) && a.rightOn(this.at(t), this.at(e), this.at(c)) && (s[0] = this.at(t), s[1] = this.at(e), r[0] = this.at(c), r[1] = this.at(c + 1), i = o.lineInt(s, r), a.sqdist(this.at(t), i) < n)) return !1; return !0 }, n.prototype.copy = function(t, e, i) { var s = i || new n; if (s.clear(), t < e)
                    for (o = t; o <= e; o++) s.vertices.push(this.vertices[o]);
                else { for (o = 0; o <= e; o++) s.vertices.push(this.vertices[o]); for (var o = t; o < this.vertices.length; o++) s.vertices.push(this.vertices[o]) } return s }, n.prototype.getCutEdges = function() { for (var t = [], e = [], i = [], s = new n, o = Number.MAX_VALUE, a = 0; a < this.vertices.length; ++a)
                    if (this.isReflex(a))
                        for (var r = 0; r < this.vertices.length; ++r)
                            if (this.canSee(a, r)) { e = this.copy(a, r, s).getCutEdges(), i = this.copy(r, a, s).getCutEdges(); for (var h = 0; h < i.length; h++) e.push(i[h]);
                                e.length < o && (t = e, o = e.length, t.push([this.at(a), this.at(r)])) } return t }, n.prototype.decomp = function() { var t = this.getCutEdges(); return t.length > 0 ? this.slice(t) : [this] }, n.prototype.slice = function(t) { if (0 == t.length) return [this]; if (t instanceof Array && t.length && t[0] instanceof Array && 2 == t[0].length && t[0][0] instanceof Array) { for (var e = [this], i = 0; i < t.length; i++)
                        for (var n = t[i], s = 0; s < e.length; s++) { var o = e[s].slice(n); if (o) { e.splice(s, 1), e.push(o[0], o[1]); break } }
                    return e } var n = t,
                    i = this.vertices.indexOf(n[0]),
                    s = this.vertices.indexOf(n[1]); return -1 != i && -1 != s && [this.copy(i, s), this.copy(s, i)] }, n.prototype.isSimple = function() { for (var t = this.vertices, e = 0; e < t.length - 1; e++)
                    for (var i = 0; i < e - 1; i++)
                        if (o.segmentsIntersect(t[e], t[e + 1], t[i], t[i + 1])) return !1; for (e = 1; e < t.length - 2; e++)
                    if (o.segmentsIntersect(t[0], t[t.length - 1], t[e], t[e + 1])) return !1; return !0 }, n.prototype.quickDecomp = function(t, e, i, o, r, h) { r = r || 100, h = h || 0, o = o || 25, t = void 0 !== t ? t : [], e = e || [], i = i || []; var l = [0, 0],
                    c = [0, 0],
                    u = [0, 0],
                    p = 0,
                    d = 0,
                    m = 0,
                    g = 0,
                    f = 0,
                    y = 0,
                    v = 0,
                    b = new n,
                    _ = new n,
                    S = this,
                    w = this.vertices; if (w.length < 3) return t; if (++h > r) return console.warn("quickDecomp: max level (" + r + ") reached."), t; for (var C = 0; C < this.vertices.length; ++C)
                    if (S.isReflex(C)) { e.push(S.vertices[C]), p = d = Number.MAX_VALUE; for (A = 0; A < this.vertices.length; ++A) a.left(S.at(C - 1), S.at(C), S.at(A)) && a.rightOn(S.at(C - 1), S.at(C), S.at(A - 1)) && (u = s(S.at(C - 1), S.at(C), S.at(A), S.at(A - 1)), a.right(S.at(C + 1), S.at(C), u) && (m = a.sqdist(S.vertices[C], u)) < d && (d = m, c = u, y = A)), a.left(S.at(C + 1), S.at(C), S.at(A + 1)) && a.rightOn(S.at(C + 1), S.at(C), S.at(A)) && (u = s(S.at(C + 1), S.at(C), S.at(A), S.at(A + 1)), a.left(S.at(C - 1), S.at(C), u) && (m = a.sqdist(S.vertices[C], u)) < p && (p = m, l = u, f = A)); if (y == (f + 1) % this.vertices.length) u[0] = (c[0] + l[0]) / 2, u[1] = (c[1] + l[1]) / 2, i.push(u), C < f ? (b.append(S, C, f + 1), b.vertices.push(u), _.vertices.push(u), 0 != y && _.append(S, y, S.vertices.length), _.append(S, 0, C + 1)) : (0 != C && b.append(S, C, S.vertices.length), b.append(S, 0, f + 1), b.vertices.push(u), _.vertices.push(u), _.append(S, y, C + 1));
                        else { if (y > f && (f += this.vertices.length), g = Number.MAX_VALUE, f < y) return t; for (var A = y; A <= f; ++A) a.leftOn(S.at(C - 1), S.at(C), S.at(A)) && a.rightOn(S.at(C + 1), S.at(C), S.at(A)) && (m = a.sqdist(S.at(C), S.at(A))) < g && (g = m, v = A % this.vertices.length);
                            C < v ? (b.append(S, C, v + 1), 0 != v && _.append(S, v, w.length), _.append(S, 0, C + 1)) : (0 != C && b.append(S, C, w.length), b.append(S, 0, v + 1), _.append(S, v, C + 1)) } return b.vertices.length < _.vertices.length ? (b.quickDecomp(t, e, i, o, r, h), _.quickDecomp(t, e, i, o, r, h)) : (_.quickDecomp(t, e, i, o, r, h), b.quickDecomp(t, e, i, o, r, h)), t } return t.push(this), t }, n.prototype.removeCollinearPoints = function(t) { for (var e = 0, i = this.vertices.length - 1; this.vertices.length > 3 && i >= 0; --i) a.collinear(this.at(i - 1), this.at(i), this.at(i + 1), t) && (this.vertices.splice(i % this.vertices.length, 1), i--, e++); return e } }, { "./Line": 1, "./Point": 2, "./Scalar": 4 }], 4: [function(t, e, i) {
            function n() {} e.exports = n, n.eq = function(t, e, i) { return i = i || 0, Math.abs(t - e) < i } }, {}], 5: [function(t, e, i) { e.exports = { Polygon: t("./Polygon"), Point: t("./Point") } }, { "./Point": 2, "./Polygon": 3 }], 6: [function(t, e, i) { e.exports = { name: "p2", version: "0.7.0", description: "A JavaScript 2D physics engine.", author: "Stefan Hedman <schteppe@gmail.com> (http://steffe.se)", keywords: ["p2.js", "p2", "physics", "engine", "2d"], main: "./src/p2.js", engines: { node: "*" }, repository: { type: "git", url: "https://github.com/schteppe/p2.js.git" }, bugs: { url: "https://github.com/schteppe/p2.js/issues" }, licenses: [{ type: "MIT" }], devDependencies: { grunt: "^0.4.5", "grunt-contrib-jshint": "^0.11.2", "grunt-contrib-nodeunit": "^0.4.1", "grunt-contrib-uglify": "~0.4.0", "grunt-contrib-watch": "~0.5.0", "grunt-browserify": "~2.0.1", "grunt-contrib-concat": "^0.4.0" }, dependencies: { "poly-decomp": "0.1.0" } } }, {}], 7: [function(t, e, i) {
            function n(t) { this.lowerBound = s.create(), t && t.lowerBound && s.copy(this.lowerBound, t.lowerBound), this.upperBound = s.create(), t && t.upperBound && s.copy(this.upperBound, t.upperBound) } var s = t("../math/vec2");
            t("../utils/Utils");
            e.exports = n; var o = s.create();
            n.prototype.setFromPoints = function(t, e, i, n) { var a = this.lowerBound,
                    r = this.upperBound; "number" != typeof i && (i = 0), 0 !== i ? s.rotate(a, t[0], i) : s.copy(a, t[0]), s.copy(r, a); for (var h = Math.cos(i), l = Math.sin(i), c = 1; c < t.length; c++) { var u = t[c]; if (0 !== i) { var p = u[0],
                            d = u[1];
                        o[0] = h * p - l * d, o[1] = l * p + h * d, u = o } for (var m = 0; m < 2; m++) u[m] > r[m] && (r[m] = u[m]), u[m] < a[m] && (a[m] = u[m]) } e && (s.add(this.lowerBound, this.lowerBound, e), s.add(this.upperBound, this.upperBound, e)), n && (this.lowerBound[0] -= n, this.lowerBound[1] -= n, this.upperBound[0] += n, this.upperBound[1] += n) }, n.prototype.copy = function(t) { s.copy(this.lowerBound, t.lowerBound), s.copy(this.upperBound, t.upperBound) }, n.prototype.extend = function(t) { for (var e = 2; e--;) { var i = t.lowerBound[e];
                    this.lowerBound[e] > i && (this.lowerBound[e] = i); var n = t.upperBound[e];
                    this.upperBound[e] < n && (this.upperBound[e] = n) } }, n.prototype.overlaps = function(t) { var e = this.lowerBound,
                    i = this.upperBound,
                    n = t.lowerBound,
                    s = t.upperBound; return (n[0] <= i[0] && i[0] <= s[0] || e[0] <= s[0] && s[0] <= i[0]) && (n[1] <= i[1] && i[1] <= s[1] || e[1] <= s[1] && s[1] <= i[1]) }, n.prototype.containsPoint = function(t) { var e = this.lowerBound,
                    i = this.upperBound; return e[0] <= t[0] && t[0] <= i[0] && e[1] <= t[1] && t[1] <= i[1] }, n.prototype.overlapsRay = function(t) { var e = 1 / t.direction[0],
                    i = 1 / t.direction[1],
                    n = (this.lowerBound[0] - t.from[0]) * e,
                    s = (this.upperBound[0] - t.from[0]) * e,
                    o = (this.lowerBound[1] - t.from[1]) * i,
                    a = (this.upperBound[1] - t.from[1]) * i,
                    r = Math.max(Math.max(Math.min(n, s), Math.min(o, a))),
                    h = Math.min(Math.min(Math.max(n, s), Math.max(o, a))); return h < 0 ? -1 : r > h ? -1 : r } }, { "../math/vec2": 30, "../utils/Utils": 57 }], 8: [function(t, e, i) {
            function n(t) { this.type = t, this.result = [], this.world = null, this.boundingVolumeType = n.AABB } var s = t("../math/vec2"),
                o = t("../objects/Body");
            e.exports = n, n.AABB = 1, n.BOUNDING_CIRCLE = 2, n.prototype.setWorld = function(t) { this.world = t }, n.prototype.getCollisionPairs = function(t) {}; var a = s.create();
            n.boundingRadiusCheck = function(t, e) { s.sub(a, t.position, e.position); var i = s.squaredLength(a),
                    n = t.boundingRadius + e.boundingRadius; return i <= n * n }, n.aabbCheck = function(t, e) { return t.getAABB().overlaps(e.getAABB()) }, n.prototype.boundingVolumeCheck = function(t, e) { var i; switch (this.boundingVolumeType) {
                    case n.BOUNDING_CIRCLE:
                        i = n.boundingRadiusCheck(t, e); break;
                    case n.AABB:
                        i = n.aabbCheck(t, e); break;
                    default:
                        throw new Error("Bounding volume type not recognized: " + this.boundingVolumeType) } return i }, n.canCollide = function(t, e) { var i = o.KINEMATIC,
                    n = o.STATIC; return (t.type !== n || e.type !== n) && (!(t.type === i && e.type === n || t.type === n && e.type === i) && ((t.type !== i || e.type !== i) && ((t.sleepState !== o.SLEEPING || e.sleepState !== o.SLEEPING) && !(t.sleepState === o.SLEEPING && e.type === n || e.sleepState === o.SLEEPING && t.type === n)))) }, n.NAIVE = 1, n.SAP = 2 }, { "../math/vec2": 30, "../objects/Body": 31 }], 9: [function(t, e, i) {
            function n() { s.call(this, s.NAIVE) } t("../shapes/Circle"), t("../shapes/Plane"), t("../shapes/Shape"), t("../shapes/Particle"); var s = t("../collision/Broadphase");
            t("../math/vec2");
            e.exports = n, (n.prototype = new s).constructor = n, n.prototype.getCollisionPairs = function(t) { var e = t.bodies,
                    i = this.result;
                i.length = 0; for (var n = 0, o = e.length; n !== o; n++)
                    for (var a = e[n], r = 0; r < n; r++) { var h = e[r];
                        s.canCollide(a, h) && this.boundingVolumeCheck(a, h) && i.push(a, h) }
                return i }, n.prototype.aabbQuery = function(t, e, i) { i = i || []; for (var n = t.bodies, s = 0; s < n.length; s++) { var o = n[s];
                    o.aabbNeedsUpdate && o.updateAABB(), o.aabb.overlaps(e) && i.push(o) } return i } }, { "../collision/Broadphase": 8, "../math/vec2": 30, "../shapes/Circle": 39, "../shapes/Particle": 43, "../shapes/Plane": 44, "../shapes/Shape": 45 }], 10: [function(t, e, i) {
            function n() { this.contactEquations = [], this.frictionEquations = [], this.enableFriction = !0, this.enabledEquations = !0, this.slipForce = 10, this.frictionCoefficient = .3, this.surfaceVelocity = 0, this.contactEquationPool = new c({ size: 32 }), this.frictionEquationPool = new u({ size: 64 }), this.restitution = 0, this.stiffness = d.DEFAULT_STIFFNESS, this.relaxation = d.DEFAULT_RELAXATION, this.frictionStiffness = d.DEFAULT_STIFFNESS, this.frictionRelaxation = d.DEFAULT_RELAXATION, this.enableFrictionReduction = !0, this.collidingBodiesLastStep = new p, this.contactSkinSize = .01 }

            function s(t, e) { a.set(t.vertices[0], .5 * -e.length, -e.radius), a.set(t.vertices[1], .5 * e.length, -e.radius), a.set(t.vertices[2], .5 * e.length, e.radius), a.set(t.vertices[3], .5 * -e.length, e.radius) }

            function o(t, e, i, n) { for (var s = V, o = z, l = Y, c = K, u = t, p = e.vertices, d = null, m = 0; m !== p.length + 1; m++) { var g = p[m % p.length],
                        f = p[(m + 1) % p.length];
                    a.rotate(s, g, n), a.rotate(o, f, n), h(s, s, i), h(o, o, i), r(l, s, u), r(c, o, u); var y = a.crossLength(l, c); if (null === d && (d = y), y * d <= 0) return !1;
                    d = y } return !0 } var a = t("../math/vec2"),
                r = a.sub,
                h = a.add,
                l = a.dot,
                c = (t("../utils/Utils"), t("../utils/ContactEquationPool")),
                u = t("../utils/FrictionEquationPool"),
                p = t("../utils/TupleDictionary"),
                d = t("../equations/Equation"),
                m = (t("../equations/ContactEquation"), t("../equations/FrictionEquation"), t("../shapes/Circle")),
                g = t("../shapes/Convex"),
                f = t("../shapes/Shape"),
                y = (t("../objects/Body"), t("../shapes/Box"));
            e.exports = n; var v = a.fromValues(0, 1),
                b = a.fromValues(0, 0),
                _ = a.fromValues(0, 0),
                S = a.fromValues(0, 0),
                w = a.fromValues(0, 0),
                C = a.fromValues(0, 0),
                A = a.fromValues(0, 0),
                T = a.fromValues(0, 0),
                x = a.fromValues(0, 0),
                P = a.fromValues(0, 0),
                I = a.fromValues(0, 0),
                O = a.fromValues(0, 0),
                E = a.fromValues(0, 0),
                L = a.fromValues(0, 0),
                k = a.fromValues(0, 0),
                M = a.fromValues(0, 0),
                B = a.fromValues(0, 0),
                D = a.fromValues(0, 0),
                G = a.fromValues(0, 0),
                R = [],
                U = a.create(),
                F = a.create();
            n.prototype.bodiesOverlap = function(t, e) { for (var i = U, n = F, s = 0, o = t.shapes.length; s !== o; s++) { var a = t.shapes[s];
                    t.toWorldFrame(i, a.position); for (var r = 0, h = e.shapes.length; r !== h; r++) { var l = e.shapes[r]; if (e.toWorldFrame(n, l.position), this[a.type | l.type](t, a, i, a.angle + t.angle, e, l, n, l.angle + e.angle, !0)) return !0 } } return !1 }, n.prototype.collidedLastStep = function(t, e) { var i = 0 | t.id,
                    n = 0 | e.id; return !!this.collidingBodiesLastStep.get(i, n) }, n.prototype.reset = function() { this.collidingBodiesLastStep.reset(); for (var t = this.contactEquations, e = t.length; e--;) { var i = t[e],
                        n = i.bodyA.id,
                        s = i.bodyB.id;
                    this.collidingBodiesLastStep.set(n, s, !0) } for (var o = this.contactEquations, a = this.frictionEquations, r = 0; r < o.length; r++) this.contactEquationPool.release(o[r]); for (r = 0; r < a.length; r++) this.frictionEquationPool.release(a[r]);
                this.contactEquations.length = this.frictionEquations.length = 0 }, n.prototype.createContactEquation = function(t, e, i, n) { var s = this.contactEquationPool.get(); return s.bodyA = t, s.bodyB = e, s.shapeA = i, s.shapeB = n, s.restitution = this.restitution, s.firstImpact = !this.collidedLastStep(t, e), s.stiffness = this.stiffness, s.relaxation = this.relaxation, s.needsUpdate = !0, s.enabled = this.enabledEquations, s.offset = this.contactSkinSize, s }, n.prototype.createFrictionEquation = function(t, e, i, n) { var s = this.frictionEquationPool.get(); return s.bodyA = t, s.bodyB = e, s.shapeA = i, s.shapeB = n, s.setSlipForce(this.slipForce), s.frictionCoefficient = this.frictionCoefficient, s.relativeVelocity = this.surfaceVelocity, s.enabled = this.enabledEquations, s.needsUpdate = !0, s.stiffness = this.frictionStiffness, s.relaxation = this.frictionRelaxation, s.contactEquations.length = 0, s }, n.prototype.createFrictionFromContact = function(t) { var e = this.createFrictionEquation(t.bodyA, t.bodyB, t.shapeA, t.shapeB); return a.copy(e.contactPointA, t.contactPointA), a.copy(e.contactPointB, t.contactPointB), a.rotate90cw(e.t, t.normalA), e.contactEquations.push(t), e }, n.prototype.createFrictionFromAverage = function(t) { var e = this.contactEquations[this.contactEquations.length - 1],
                    i = this.createFrictionEquation(e.bodyA, e.bodyB, e.shapeA, e.shapeB),
                    n = e.bodyA;
                e.bodyB;
                a.set(i.contactPointA, 0, 0), a.set(i.contactPointB, 0, 0), a.set(i.t, 0, 0); for (var s = 0; s !== t; s++)(e = this.contactEquations[this.contactEquations.length - 1 - s]).bodyA === n ? (a.add(i.t, i.t, e.normalA), a.add(i.contactPointA, i.contactPointA, e.contactPointA), a.add(i.contactPointB, i.contactPointB, e.contactPointB)) : (a.sub(i.t, i.t, e.normalA), a.add(i.contactPointA, i.contactPointA, e.contactPointB), a.add(i.contactPointB, i.contactPointB, e.contactPointA)), i.contactEquations.push(e); var o = 1 / t; return a.scale(i.contactPointA, i.contactPointA, o), a.scale(i.contactPointB, i.contactPointB, o), a.normalize(i.t, i.t), a.rotate90cw(i.t, i.t), i }, n.prototype[f.LINE | f.CONVEX] = n.prototype.convexLine = function(t, e, i, n, s, o, a, r, h) { return !h && 0 }, n.prototype[f.LINE | f.BOX] = n.prototype.lineBox = function(t, e, i, n, s, o, a, r, h) { return !h && 0 }; var N = new y({ width: 1, height: 1 }),
                j = a.create();
            n.prototype[f.CAPSULE | f.CONVEX] = n.prototype[f.CAPSULE | f.BOX] = n.prototype.convexCapsule = function(t, e, i, n, o, r, h, l, c) { var u = j;
                a.set(u, r.length / 2, 0), a.rotate(u, u, l), a.add(u, u, h); var p = this.circleConvex(o, r, u, l, t, e, i, n, c, r.radius);
                a.set(u, -r.length / 2, 0), a.rotate(u, u, l), a.add(u, u, h); var d = this.circleConvex(o, r, u, l, t, e, i, n, c, r.radius); if (c && (p || d)) return !0; var m = N; return s(m, r), this.convexConvex(t, e, i, n, o, m, h, l, c) + p + d }, n.prototype[f.CAPSULE | f.LINE] = n.prototype.lineCapsule = function(t, e, i, n, s, o, a, r, h) { return !h && 0 }; var H = a.create(),
                X = a.create(),
                W = new y({ width: 1, height: 1 });
            n.prototype[f.CAPSULE | f.CAPSULE] = n.prototype.capsuleCapsule = function(t, e, i, n, o, r, h, l, c) { for (var u = H, p = X, d = 0, m = 0; m < 2; m++) { a.set(u, (0 === m ? -1 : 1) * e.length / 2, 0), a.rotate(u, u, n), a.add(u, u, i); for (var g = 0; g < 2; g++) { a.set(p, (0 === g ? -1 : 1) * r.length / 2, 0), a.rotate(p, p, l), a.add(p, p, h), this.enableFrictionReduction && (b = this.enableFriction, this.enableFriction = !1); var f = this.circleCircle(t, e, u, n, o, r, p, l, c, e.radius, r.radius); if (this.enableFrictionReduction && (this.enableFriction = b), c && f) return !0;
                        d += f } } this.enableFrictionReduction && (b = this.enableFriction, this.enableFriction = !1); var y = W;
                s(y, e); var v = this.convexCapsule(t, y, i, n, o, r, h, l, c); if (this.enableFrictionReduction && (this.enableFriction = b), c && v) return !0; if (d += v, this.enableFrictionReduction) { var b = this.enableFriction;
                    this.enableFriction = !1 } s(y, r); var _ = this.convexCapsule(o, y, h, l, t, e, i, n, c); return this.enableFrictionReduction && (this.enableFriction = b), !(!c || !_) || (d += _, this.enableFrictionReduction && d && this.enableFriction && this.frictionEquations.push(this.createFrictionFromAverage(d)), d) }, n.prototype[f.LINE | f.LINE] = n.prototype.lineLine = function(t, e, i, n, s, o, a, r, h) { return !h && 0 }, n.prototype[f.PLANE | f.LINE] = n.prototype.planeLine = function(t, e, i, n, s, o, c, u, p) { var d = b,
                    m = _,
                    g = S,
                    f = w,
                    y = C,
                    I = A,
                    O = T,
                    E = x,
                    L = P,
                    k = R,
                    M = 0;
                a.set(d, -o.length / 2, 0), a.set(m, o.length / 2, 0), a.rotate(g, d, u), a.rotate(f, m, u), h(g, g, c), h(f, f, c), a.copy(d, g), a.copy(m, f), r(y, m, d), a.normalize(I, y), a.rotate90cw(L, I), a.rotate(E, v, n), k[0] = d, k[1] = m; for (var B = 0; B < k.length; B++) { var D = k[B];
                    r(O, D, i); var G = l(O, E); if (G < 0) { if (p) return !0; var U = this.createContactEquation(t, s, e, o);
                        M++, a.copy(U.normalA, E), a.normalize(U.normalA, U.normalA), a.scale(O, E, G), r(U.contactPointA, D, O), r(U.contactPointA, U.contactPointA, t.position), r(U.contactPointB, D, c), h(U.contactPointB, U.contactPointB, c), r(U.contactPointB, U.contactPointB, s.position), this.contactEquations.push(U), this.enableFrictionReduction || this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(U)) } } return !p && (this.enableFrictionReduction || M && this.enableFriction && this.frictionEquations.push(this.createFrictionFromAverage(M)), M) }, n.prototype[f.PARTICLE | f.CAPSULE] = n.prototype.particleCapsule = function(t, e, i, n, s, o, a, r, h) { return this.circleLine(t, e, i, n, s, o, a, r, h, o.radius, 0) }, n.prototype[f.CIRCLE | f.LINE] = n.prototype.circleLine = function(t, e, i, n, s, o, c, u, p, d, m) { var d = d || 0,
                    m = void 0 !== m ? m : e.radius,
                    g = b,
                    f = _,
                    y = S,
                    v = w,
                    M = C,
                    B = A,
                    D = T,
                    G = x,
                    U = P,
                    F = I,
                    N = O,
                    j = E,
                    H = L,
                    X = k,
                    W = R;
                a.set(G, -o.length / 2, 0), a.set(U, o.length / 2, 0), a.rotate(F, G, u), a.rotate(N, U, u), h(F, F, c), h(N, N, c), a.copy(G, F), a.copy(U, N), r(B, U, G), a.normalize(D, B), a.rotate90cw(M, D), r(j, i, G); var V = l(j, M);
                r(v, G, c), r(H, i, c); var z = m + d; if (Math.abs(V) < z) { a.scale(g, M, V), r(y, i, g), a.scale(f, M, l(M, H)), a.normalize(f, f), a.scale(f, f, d), h(y, y, f); var Y = l(D, y),
                        K = l(D, G),
                        q = l(D, U); if (Y > K && Y < q) { if (p) return !0;
                        Q = this.createContactEquation(t, s, e, o); return a.scale(Q.normalA, g, -1), a.normalize(Q.normalA, Q.normalA), a.scale(Q.contactPointA, Q.normalA, m), h(Q.contactPointA, Q.contactPointA, i), r(Q.contactPointA, Q.contactPointA, t.position), r(Q.contactPointB, y, c), h(Q.contactPointB, Q.contactPointB, c), r(Q.contactPointB, Q.contactPointB, s.position), this.contactEquations.push(Q), this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(Q)), 1 } } W[0] = G, W[1] = U; for (var Z = 0; Z < W.length; Z++) { var J = W[Z]; if (r(j, J, i), a.squaredLength(j) < Math.pow(z, 2)) { if (p) return !0; var Q = this.createContactEquation(t, s, e, o); return a.copy(Q.normalA, j), a.normalize(Q.normalA, Q.normalA), a.scale(Q.contactPointA, Q.normalA, m), h(Q.contactPointA, Q.contactPointA, i), r(Q.contactPointA, Q.contactPointA, t.position), r(Q.contactPointB, J, c), a.scale(X, Q.normalA, -d), h(Q.contactPointB, Q.contactPointB, X), h(Q.contactPointB, Q.contactPointB, c), r(Q.contactPointB, Q.contactPointB, s.position), this.contactEquations.push(Q), this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(Q)), 1 } } return 0 }, n.prototype[f.CIRCLE | f.CAPSULE] = n.prototype.circleCapsule = function(t, e, i, n, s, o, a, r, h) { return this.circleLine(t, e, i, n, s, o, a, r, h, o.radius) }, n.prototype[f.CIRCLE | f.CONVEX] = n.prototype[f.CIRCLE | f.BOX] = n.prototype.circleConvex = function(t, e, i, n, s, l, c, u, p, d) { for (var d = "number" == typeof d ? d : e.radius, m = b, g = _, f = S, y = w, v = C, A = I, T = O, x = L, P = k, E = M, D = B, G = !1, R = Number.MAX_VALUE, U = l.vertices, F = 0; F !== U.length + 1; F++) { var N = U[F % U.length],
                        j = U[(F + 1) % U.length]; if (a.rotate(m, N, u), a.rotate(g, j, u), h(m, m, c), h(g, g, c), r(f, g, m), a.normalize(y, f), a.rotate90cw(v, y), a.scale(P, v, -e.radius), h(P, P, i), o(P, l, c, u)) { a.sub(E, m, P); var H = Math.abs(a.dot(E, v));
                        H < R && (a.copy(D, P), R = H, a.scale(x, v, H), a.add(x, x, P), G = !0) } } if (G) { if (p) return !0;
                    W = this.createContactEquation(t, s, e, l); return a.sub(W.normalA, D, i), a.normalize(W.normalA, W.normalA), a.scale(W.contactPointA, W.normalA, d), h(W.contactPointA, W.contactPointA, i), r(W.contactPointA, W.contactPointA, t.position), r(W.contactPointB, x, c), h(W.contactPointB, W.contactPointB, c), r(W.contactPointB, W.contactPointB, s.position), this.contactEquations.push(W), this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(W)), 1 } if (d > 0)
                    for (F = 0; F < U.length; F++) { var X = U[F]; if (a.rotate(T, X, u), h(T, T, c), r(A, T, i), a.squaredLength(A) < Math.pow(d, 2)) { if (p) return !0; var W = this.createContactEquation(t, s, e, l); return a.copy(W.normalA, A), a.normalize(W.normalA, W.normalA), a.scale(W.contactPointA, W.normalA, d), h(W.contactPointA, W.contactPointA, i), r(W.contactPointA, W.contactPointA, t.position), r(W.contactPointB, T, c), h(W.contactPointB, W.contactPointB, c), r(W.contactPointB, W.contactPointB, s.position), this.contactEquations.push(W), this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(W)), 1 } }
                return 0 }; var V = a.create(),
                z = a.create(),
                Y = a.create(),
                K = a.create();
            n.prototype[f.PARTICLE | f.CONVEX] = n.prototype[f.PARTICLE | f.BOX] = n.prototype.particleConvex = function(t, e, i, n, s, c, u, p, d) { var m = b,
                    g = _,
                    f = S,
                    y = w,
                    v = C,
                    x = A,
                    P = T,
                    O = I,
                    E = L,
                    k = D,
                    M = G,
                    B = Number.MAX_VALUE,
                    R = !1,
                    U = c.vertices; if (!o(i, c, u, p)) return 0; if (d) return !0; for (var F = 0; F !== U.length + 1; F++) { var N = U[F % U.length],
                        j = U[(F + 1) % U.length];
                    a.rotate(m, N, p), a.rotate(g, j, p), h(m, m, u), h(g, g, u), r(f, g, m), a.normalize(y, f), a.rotate90cw(v, y), r(O, i, m);
                    l(O, v);
                    r(x, m, u), r(P, i, u), a.sub(k, m, i); var H = Math.abs(a.dot(k, v));
                    H < B && (B = H, a.scale(E, v, H), a.add(E, E, i), a.copy(M, v), R = !0) } if (R) { var X = this.createContactEquation(t, s, e, c); return a.scale(X.normalA, M, -1), a.normalize(X.normalA, X.normalA), a.set(X.contactPointA, 0, 0), h(X.contactPointA, X.contactPointA, i), r(X.contactPointA, X.contactPointA, t.position), r(X.contactPointB, E, u), h(X.contactPointB, X.contactPointB, u), r(X.contactPointB, X.contactPointB, s.position), this.contactEquations.push(X), this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(X)), 1 } return 0 }, n.prototype[f.CIRCLE] = n.prototype.circleCircle = function(t, e, i, n, s, o, l, c, u, p, d) { var m = b,
                    p = p || e.radius,
                    d = d || o.radius;
                r(m, i, l); var g = p + d; if (a.squaredLength(m) > Math.pow(g, 2)) return 0; if (u) return !0; var f = this.createContactEquation(t, s, e, o); return r(f.normalA, l, i), a.normalize(f.normalA, f.normalA), a.scale(f.contactPointA, f.normalA, p), a.scale(f.contactPointB, f.normalA, -d), h(f.contactPointA, f.contactPointA, i), r(f.contactPointA, f.contactPointA, t.position), h(f.contactPointB, f.contactPointB, l), r(f.contactPointB, f.contactPointB, s.position), this.contactEquations.push(f), this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(f)), 1 }, n.prototype[f.PLANE | f.CONVEX] = n.prototype[f.PLANE | f.BOX] = n.prototype.planeConvex = function(t, e, i, n, s, o, c, u, p) { var d = b,
                    m = _,
                    g = S,
                    f = 0;
                a.rotate(m, v, n); for (var y = 0; y !== o.vertices.length; y++) { var w = o.vertices[y]; if (a.rotate(d, w, u), h(d, d, c), r(g, d, i), l(g, m) <= 0) { if (p) return !0;
                        f++; var C = this.createContactEquation(t, s, e, o);
                        r(g, d, i), a.copy(C.normalA, m); var A = l(g, C.normalA);
                        a.scale(g, C.normalA, A), r(C.contactPointB, d, s.position), r(C.contactPointA, d, g), r(C.contactPointA, C.contactPointA, t.position), this.contactEquations.push(C), this.enableFrictionReduction || this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(C)) } } return this.enableFrictionReduction && this.enableFriction && f && this.frictionEquations.push(this.createFrictionFromAverage(f)), f }, n.prototype[f.PARTICLE | f.PLANE] = n.prototype.particlePlane = function(t, e, i, n, s, o, h, c, u) { var p = b,
                    d = _;
                c = c || 0, r(p, i, h), a.rotate(d, v, c); var m = l(p, d); if (m > 0) return 0; if (u) return !0; var g = this.createContactEquation(s, t, o, e); return a.copy(g.normalA, d), a.scale(p, g.normalA, m), r(g.contactPointA, i, p), r(g.contactPointA, g.contactPointA, s.position), r(g.contactPointB, i, t.position), this.contactEquations.push(g), this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(g)), 1 }, n.prototype[f.CIRCLE | f.PARTICLE] = n.prototype.circleParticle = function(t, e, i, n, s, o, l, c, u) { var p = b; if (r(p, l, i), a.squaredLength(p) > Math.pow(e.radius, 2)) return 0; if (u) return !0; var d = this.createContactEquation(t, s, e, o); return a.copy(d.normalA, p), a.normalize(d.normalA, d.normalA), a.scale(d.contactPointA, d.normalA, e.radius), h(d.contactPointA, d.contactPointA, i), r(d.contactPointA, d.contactPointA, t.position), r(d.contactPointB, l, s.position), this.contactEquations.push(d), this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(d)), 1 }; var q = new m({ radius: 1 }),
                Z = a.create(),
                J = a.create();
            a.create();
            n.prototype[f.PLANE | f.CAPSULE] = n.prototype.planeCapsule = function(t, e, i, n, s, o, r, l, c) { var u = Z,
                    p = J,
                    d = q;
                a.set(u, -o.length / 2, 0), a.rotate(u, u, l), h(u, u, r), a.set(p, o.length / 2, 0), a.rotate(p, p, l), h(p, p, r), d.radius = o.radius; var m;
                this.enableFrictionReduction && (m = this.enableFriction, this.enableFriction = !1); var g = this.circlePlane(s, d, u, 0, t, e, i, n, c),
                    f = this.circlePlane(s, d, p, 0, t, e, i, n, c); if (this.enableFrictionReduction && (this.enableFriction = m), c) return g || f; var y = g + f; return this.enableFrictionReduction && y && this.frictionEquations.push(this.createFrictionFromAverage(y)), y }, n.prototype[f.CIRCLE | f.PLANE] = n.prototype.circlePlane = function(t, e, i, n, s, o, c, u, p) { var d = t,
                    m = e,
                    g = i,
                    f = s,
                    y = c,
                    w = u;
                w = w || 0; var C = b,
                    A = _,
                    T = S;
                r(C, g, y), a.rotate(A, v, w); var x = l(A, C); if (x > m.radius) return 0; if (p) return !0; var P = this.createContactEquation(f, d, o, e); return a.copy(P.normalA, A), a.scale(P.contactPointB, P.normalA, -m.radius), h(P.contactPointB, P.contactPointB, g), r(P.contactPointB, P.contactPointB, d.position), a.scale(T, P.normalA, x), r(P.contactPointA, C, T), h(P.contactPointA, P.contactPointA, y), r(P.contactPointA, P.contactPointA, f.position), this.contactEquations.push(P), this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(P)), 1 }, n.prototype[f.CONVEX] = n.prototype[f.CONVEX | f.BOX] = n.prototype[f.BOX] = n.prototype.convexConvex = function(t, e, i, s, o, c, u, p, d, m) { var g = b,
                    f = _,
                    y = S,
                    v = w,
                    A = C,
                    I = T,
                    O = x,
                    E = P,
                    L = 0,
                    m = "number" == typeof m ? m : 0; if (!n.findSeparatingAxis(e, i, s, c, u, p, g)) return 0;
                r(O, u, i), l(g, O) > 0 && a.scale(g, g, -1); var k = n.getClosestEdge(e, s, g, !0),
                    M = n.getClosestEdge(c, p, g); if (-1 === k || -1 === M) return 0; for (var B = 0; B < 2; B++) { var D = k,
                        G = M,
                        R = e,
                        U = c,
                        F = i,
                        N = u,
                        j = s,
                        H = p,
                        X = t,
                        W = o; if (0 === B) { var V;
                        V = D, D = G, G = V, V = R, R = U, U = V, V = F, F = N, N = V, V = j, j = H, H = V, V = X, X = W, W = V } for (var z = G; z < G + 2; z++) { var Y = U.vertices[(z + U.vertices.length) % U.vertices.length];
                        a.rotate(f, Y, H), h(f, f, N); for (var K = 0, q = D - 1; q < D + 2; q++) { var Z = R.vertices[(q + R.vertices.length) % R.vertices.length],
                                J = R.vertices[(q + 1 + R.vertices.length) % R.vertices.length];
                            a.rotate(y, Z, j), a.rotate(v, J, j), h(y, y, F), h(v, v, F), r(A, v, y), a.rotate90cw(E, A), a.normalize(E, E), r(O, f, y);
                            $ = l(E, O);
                            (q === D && $ <= m || q !== D && $ <= 0) && K++ } if (K >= 3) { if (d) return !0; var Q = this.createContactEquation(X, W, R, U);
                            L++; var Z = R.vertices[D % R.vertices.length],
                                J = R.vertices[(D + 1) % R.vertices.length];
                            a.rotate(y, Z, j), a.rotate(v, J, j), h(y, y, F), h(v, v, F), r(A, v, y), a.rotate90cw(Q.normalA, A), a.normalize(Q.normalA, Q.normalA), r(O, f, y); var $ = l(Q.normalA, O);
                            a.scale(I, Q.normalA, $), r(Q.contactPointA, f, F), r(Q.contactPointA, Q.contactPointA, I), h(Q.contactPointA, Q.contactPointA, F), r(Q.contactPointA, Q.contactPointA, X.position), r(Q.contactPointB, f, N), h(Q.contactPointB, Q.contactPointB, N), r(Q.contactPointB, Q.contactPointB, W.position), this.contactEquations.push(Q), this.enableFrictionReduction || this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(Q)) } } } return this.enableFrictionReduction && this.enableFriction && L && this.frictionEquations.push(this.createFrictionFromAverage(L)), L }; var Q = a.fromValues(0, 0);
            n.projectConvexOntoAxis = function(t, e, i, n, s) { var o, r, h = null,
                    c = null,
                    u = Q;
                a.rotate(u, n, -i); for (var p = 0; p < t.vertices.length; p++) o = t.vertices[p], r = l(o, u), (null === h || r > h) && (h = r), (null === c || r < c) && (c = r); if (c > h) { var d = c;
                    c = h, h = d } var m = l(e, n);
                a.set(s, c + m, h + m) }; var $ = a.fromValues(0, 0),
                tt = a.fromValues(0, 0),
                et = a.fromValues(0, 0),
                it = a.fromValues(0, 0),
                nt = a.fromValues(0, 0),
                st = a.fromValues(0, 0);
            n.findSeparatingAxis = function(t, e, i, s, o, h, l) { var c = null,
                    u = !1,
                    p = !1,
                    d = $,
                    m = tt,
                    g = et,
                    f = it,
                    v = nt,
                    b = st; if (t instanceof y && s instanceof y)
                    for (A = 0; 2 !== A; A++) { var _ = t,
                            S = i;
                        1 === A && (_ = s, S = h); for (T = 0; 2 !== T; T++) { 0 === T ? a.set(f, 0, 1) : 1 === T && a.set(f, 1, 0), 0 !== S && a.rotate(f, f, S), n.projectConvexOntoAxis(t, e, i, f, v), n.projectConvexOntoAxis(s, o, h, f, b); var w = v,
                                C = b;
                            v[0] > b[0] && (C = v, w = b, !0), u = (x = C[0] - w[1]) <= 0, (null === c || x > c) && (a.copy(l, f), c = x, p = u) } } else
                        for (var A = 0; 2 !== A; A++) { var _ = t,
                                S = i;
                            1 === A && (_ = s, S = h); for (var T = 0; T !== _.vertices.length; T++) { a.rotate(m, _.vertices[T], S), a.rotate(g, _.vertices[(T + 1) % _.vertices.length], S), r(d, g, m), a.rotate90cw(f, d), a.normalize(f, f), n.projectConvexOntoAxis(t, e, i, f, v), n.projectConvexOntoAxis(s, o, h, f, b); var w = v,
                                    C = b;
                                v[0] > b[0] && (C = v, w = b, !0); var x = C[0] - w[1];
                                u = x <= 0, (null === c || x > c) && (a.copy(l, f), c = x, p = u) } }
                return p }; var ot = a.fromValues(0, 0),
                at = a.fromValues(0, 0),
                rt = a.fromValues(0, 0);
            n.getClosestEdge = function(t, e, i, n) { var s = ot,
                    o = at,
                    h = rt;
                a.rotate(s, i, -e), n && a.scale(s, s, -1); for (var c = -1, u = t.vertices.length, p = -1, d = 0; d !== u; d++) { r(o, t.vertices[(d + 1) % u], t.vertices[d % u]), a.rotate90cw(h, o), a.normalize(h, h); var m = l(h, s);
                    (-1 === c || m > p) && (c = d % u, p = m) } return c }; var ht = a.create(),
                lt = a.create(),
                ct = a.create(),
                ut = a.create(),
                pt = a.create(),
                dt = a.create(),
                mt = a.create();
            n.prototype[f.CIRCLE | f.HEIGHTFIELD] = n.prototype.circleHeightfield = function(t, e, i, n, s, o, l, c, u, p) { var d = o.heights,
                    p = p || e.radius,
                    m = o.elementWidth,
                    g = lt,
                    f = ht,
                    y = pt,
                    v = mt,
                    b = dt,
                    _ = ct,
                    S = ut,
                    w = Math.floor((i[0] - p - l[0]) / m),
                    C = Math.ceil((i[0] + p - l[0]) / m);
                w < 0 && (w = 0), C >= d.length && (C = d.length - 1); for (var A = d[w], T = d[C], x = w; x < C; x++) d[x] < T && (T = d[x]), d[x] > A && (A = d[x]); if (i[1] - p > A) return !u && 0; for (var P = !1, x = w; x < C; x++) { a.set(_, x * m, d[x]), a.set(S, (x + 1) * m, d[x + 1]), a.add(_, _, l), a.add(S, S, l), a.sub(b, S, _), a.rotate(b, b, Math.PI / 2), a.normalize(b, b), a.scale(f, b, -p), a.add(f, f, i), a.sub(g, f, _); var I = a.dot(g, b); if (f[0] >= _[0] && f[0] < S[0] && I <= 0) { if (u) return !0;
                        P = !0, a.scale(g, b, -I), a.add(y, f, g), a.copy(v, b);
                        O = this.createContactEquation(s, t, o, e);
                        a.copy(O.normalA, v), a.scale(O.contactPointB, O.normalA, -p), h(O.contactPointB, O.contactPointB, i), r(O.contactPointB, O.contactPointB, t.position), a.copy(O.contactPointA, y), a.sub(O.contactPointA, O.contactPointA, s.position), this.contactEquations.push(O), this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(O)) } } if (P = !1, p > 0)
                    for (x = w; x <= C; x++)
                        if (a.set(_, x * m, d[x]), a.add(_, _, l), a.sub(g, i, _), a.squaredLength(g) < Math.pow(p, 2)) { if (u) return !0;
                            P = !0; var O = this.createContactEquation(s, t, o, e);
                            a.copy(O.normalA, g), a.normalize(O.normalA, O.normalA), a.scale(O.contactPointB, O.normalA, -p), h(O.contactPointB, O.contactPointB, i), r(O.contactPointB, O.contactPointB, t.position), r(O.contactPointA, _, l), h(O.contactPointA, O.contactPointA, l), r(O.contactPointA, O.contactPointA, s.position), this.contactEquations.push(O), this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(O)) } return P ? 1 : 0 }; var gt = a.create(),
                ft = a.create(),
                yt = a.create(),
                vt = new g({ vertices: [a.create(), a.create(), a.create(), a.create()] });
            n.prototype[f.BOX | f.HEIGHTFIELD] = n.prototype[f.CONVEX | f.HEIGHTFIELD] = n.prototype.convexHeightfield = function(t, e, i, n, s, o, r, h, l) { var c = o.heights,
                    u = o.elementWidth,
                    p = gt,
                    d = ft,
                    m = yt,
                    g = vt,
                    f = Math.floor((t.aabb.lowerBound[0] - r[0]) / u),
                    y = Math.ceil((t.aabb.upperBound[0] - r[0]) / u);
                f < 0 && (f = 0), y >= c.length && (y = c.length - 1); for (var v = c[f], b = c[y], _ = f; _ < y; _++) c[_] < b && (b = c[_]), c[_] > v && (v = c[_]); if (t.aabb.lowerBound[1] > v) return !l && 0; for (var S = 0, _ = f; _ < y; _++) { a.set(p, _ * u, c[_]), a.set(d, (_ + 1) * u, c[_ + 1]), a.add(p, p, r), a.add(d, d, r);
                    a.set(m, .5 * (d[0] + p[0]), .5 * (d[1] + p[1] - 100)), a.sub(g.vertices[0], d, m), a.sub(g.vertices[1], p, m), a.copy(g.vertices[2], g.vertices[1]), a.copy(g.vertices[3], g.vertices[0]), g.vertices[2][1] -= 100, g.vertices[3][1] -= 100, S += this.convexConvex(t, e, i, n, s, g, m, 0, l) } return S } }, { "../equations/ContactEquation": 21, "../equations/Equation": 22, "../equations/FrictionEquation": 23, "../math/vec2": 30, "../objects/Body": 31, "../shapes/Box": 37, "../shapes/Circle": 39, "../shapes/Convex": 40, "../shapes/Shape": 45, "../utils/ContactEquationPool": 48, "../utils/FrictionEquationPool": 49, "../utils/TupleDictionary": 56, "../utils/Utils": 57 }], 11: [function(t, e, i) {
            function n(t) { t = t || {}, this.from = t.from ? o.fromValues(t.from[0], t.from[1]) : o.create(), this.to = t.to ? o.fromValues(t.to[0], t.to[1]) : o.create(), this.checkCollisionResponse = void 0 === t.checkCollisionResponse || t.checkCollisionResponse, this.skipBackfaces = !!t.skipBackfaces, this.collisionMask = void 0 !== t.collisionMask ? t.collisionMask : -1, this.collisionGroup = void 0 !== t.collisionGroup ? t.collisionGroup : -1, this.mode = void 0 !== t.mode ? t.mode : n.ANY, this.callback = t.callback || function(t) {}, this.direction = o.create(), this.length = 1, this.update() }

            function s(t, e, i) { o.sub(r, i, t); var n = o.dot(r, e); return o.scale(h, e, n), o.add(h, h, t), o.squaredDistance(i, h) } e.exports = n; var o = t("../math/vec2");
            t("../collision/RaycastResult"), t("../shapes/Shape"), t("../collision/AABB");
            n.prototype.constructor = n, n.CLOSEST = 1, n.ANY = 2, n.ALL = 4, n.prototype.update = function() { var t = this.direction;
                o.sub(t, this.to, this.from), this.length = o.length(t), o.normalize(t, t) }, n.prototype.intersectBodies = function(t, e) { for (var i = 0, n = e.length; !t.shouldStop(this) && i < n; i++) { var s = e[i],
                        o = s.getAABB();
                    (o.overlapsRay(this) >= 0 || o.containsPoint(this.from)) && this.intersectBody(t, s) } }; var a = o.create();
            n.prototype.intersectBody = function(t, e) { var i = this.checkCollisionResponse; if (!i || e.collisionResponse)
                    for (var n = a, s = 0, r = e.shapes.length; s < r; s++) { var h = e.shapes[s]; if ((!i || h.collisionResponse) && (0 != (this.collisionGroup & h.collisionMask) && 0 != (h.collisionGroup & this.collisionMask))) { o.rotate(n, h.position, e.angle), o.add(n, n, e.position); var l = h.angle + e.angle; if (this.intersectShape(t, h, l, n, e), t.shouldStop(this)) break } } }, n.prototype.intersectShape = function(t, e, i, n, o) { s(this.from, this.direction, n) > e.boundingRadius * e.boundingRadius || (this._currentBody = o, this._currentShape = e, e.raycast(t, this, n, i), this._currentBody = this._currentShape = null) }, n.prototype.getAABB = function(t) { var e = this.to,
                    i = this.from;
                o.set(t.lowerBound, Math.min(e[0], i[0]), Math.min(e[1], i[1])), o.set(t.upperBound, Math.max(e[0], i[0]), Math.max(e[1], i[1])) };
            o.create();
            n.prototype.reportIntersection = function(t, e, i, s) { this.from, this.to; var a = this._currentShape,
                    r = this._currentBody; if (!(this.skipBackfaces && o.dot(i, this.direction) > 0)) switch (this.mode) {
                    case n.ALL:
                        t.set(i, a, r, e, s), this.callback(t); break;
                    case n.CLOSEST:
                        (e < t.fraction || !t.hasHit()) && t.set(i, a, r, e, s); break;
                    case n.ANY:
                        t.set(i, a, r, e, s) } }; var r = o.create(),
                h = o.create() }, { "../collision/AABB": 7, "../collision/RaycastResult": 12, "../math/vec2": 30, "../shapes/Shape": 45 }], 12: [function(t, e, i) {
            function n() { this.normal = s.create(), this.shape = null, this.body = null, this.faceIndex = -1, this.fraction = -1, this.isStopped = !1 } var s = t("../math/vec2"),
                o = t("../collision/Ray");
            e.exports = n, n.prototype.reset = function() { s.set(this.normal, 0, 0), this.shape = null, this.body = null, this.faceIndex = -1, this.fraction = -1, this.isStopped = !1 }, n.prototype.getHitDistance = function(t) { return s.distance(t.from, t.to) * this.fraction }, n.prototype.hasHit = function() { return -1 !== this.fraction }, n.prototype.getHitPoint = function(t, e) { s.lerp(t, e.from, e.to, this.fraction) }, n.prototype.stop = function() { this.isStopped = !0 }, n.prototype.shouldStop = function(t) { return this.isStopped || -1 !== this.fraction && t.mode === o.ANY }, n.prototype.set = function(t, e, i, n, o) { s.copy(this.normal, t), this.shape = e, this.body = i, this.fraction = n, this.faceIndex = o } }, { "../collision/Ray": 11, "../math/vec2": 30 }], 13: [function(t, e, i) {
            function n() { o.call(this, o.SAP), this.axisList = [], this.axisIndex = 0; var t = this;
                this._addBodyHandler = function(e) { t.axisList.push(e.body) }, this._removeBodyHandler = function(e) { var i = t.axisList.indexOf(e.body); - 1 !== i && t.axisList.splice(i, 1) } } var s = t("../utils/Utils"),
                o = t("../collision/Broadphase");
            e.exports = n, (n.prototype = new o).constructor = n, n.prototype.setWorld = function(t) { this.axisList.length = 0, s.appendArray(this.axisList, t.bodies), t.off("addBody", this._addBodyHandler).off("removeBody", this._removeBodyHandler), t.on("addBody", this._addBodyHandler).on("removeBody", this._removeBodyHandler), this.world = t }, n.sortAxisList = function(t, e) { e |= 0; for (var i = 1, n = t.length; i < n; i++) { for (var s = t[i], o = i - 1; o >= 0 && !(t[o].aabb.lowerBound[e] <= s.aabb.lowerBound[e]); o--) t[o + 1] = t[o];
                    t[o + 1] = s } return t }, n.prototype.sortList = function() { var t = this.axisList,
                    e = this.axisIndex;
                n.sortAxisList(t, e) }, n.prototype.getCollisionPairs = function(t) { var e = this.axisList,
                    i = this.result,
                    n = this.axisIndex;
                i.length = 0; for (var s = e.length; s--;) { var a = e[s];
                    a.aabbNeedsUpdate && a.updateAABB() } this.sortList(); for (var r = 0, h = 0 | e.length; r !== h; r++)
                    for (var l = e[r], c = r + 1; c < h; c++) { var u = e[c]; if (!(u.aabb.lowerBound[n] <= l.aabb.upperBound[n])) break;
                        o.canCollide(l, u) && this.boundingVolumeCheck(l, u) && i.push(l, u) }
                return i }, n.prototype.aabbQuery = function(t, e, i) { i = i || [], this.sortList(); var n = this.axisIndex,
                    s = "x";
                1 === n && (s = "y"), 2 === n && (s = "z"); for (var o = this.axisList, a = (e.lowerBound[s], e.upperBound[s], 0); a < o.length; a++) { var r = o[a];
                    r.aabbNeedsUpdate && r.updateAABB(), r.aabb.overlaps(e) && i.push(r) } return i } }, { "../collision/Broadphase": 8, "../utils/Utils": 57 }], 14: [function(t, e, i) {
            function n(t, e, i, n) { this.type = i, n = s.defaults(n, { collideConnected: !0, wakeUpBodies: !0 }), this.equations = [], this.bodyA = t, this.bodyB = e, this.collideConnected = n.collideConnected, n.wakeUpBodies && (t && t.wakeUp(), e && e.wakeUp()) } e.exports = n; var s = t("../utils/Utils");
            n.prototype.update = function() { throw new Error("method update() not implmemented in this Constraint subclass!") }, n.DISTANCE = 1, n.GEAR = 2, n.LOCK = 3, n.PRISMATIC = 4, n.REVOLUTE = 5, n.prototype.setStiffness = function(t) { for (var e = this.equations, i = 0; i !== e.length; i++) { var n = e[i];
                    n.stiffness = t, n.needsUpdate = !0 } }, n.prototype.setRelaxation = function(t) { for (var e = this.equations, i = 0; i !== e.length; i++) { var n = e[i];
                    n.relaxation = t, n.needsUpdate = !0 } } }, { "../utils/Utils": 57 }], 15: [function(t, e, i) {
            function n(t, e, i) { i = r.defaults(i, { localAnchorA: [0, 0], localAnchorB: [0, 0] }), s.call(this, t, e, s.DISTANCE, i), this.localAnchorA = a.fromValues(i.localAnchorA[0], i.localAnchorA[1]), this.localAnchorB = a.fromValues(i.localAnchorB[0], i.localAnchorB[1]); var n = this.localAnchorA,
                    h = this.localAnchorB; if (this.distance = 0, "number" == typeof i.distance) this.distance = i.distance;
                else { var l = a.create(),
                        c = a.create(),
                        u = a.create();
                    a.rotate(l, n, t.angle), a.rotate(c, h, e.angle), a.add(u, e.position, c), a.sub(u, u, l), a.sub(u, u, t.position), this.distance = a.length(u) } var p;
                p = void 0 === i.maxForce ? Number.MAX_VALUE : i.maxForce; var d = new o(t, e, -p, p);
                this.equations = [d], this.maxForce = p; var u = a.create(),
                    m = a.create(),
                    g = a.create(),
                    f = this;
                d.computeGq = function() { var t = this.bodyA,
                        e = this.bodyB,
                        i = t.position,
                        s = e.position; return a.rotate(m, n, t.angle), a.rotate(g, h, e.angle), a.add(u, s, g), a.sub(u, u, m), a.sub(u, u, i), a.length(u) - f.distance }, this.setMaxForce(p), this.upperLimitEnabled = !1, this.upperLimit = 1, this.lowerLimitEnabled = !1, this.lowerLimit = 0, this.position = 0 } var s = t("./Constraint"),
                o = t("../equations/Equation"),
                a = t("../math/vec2"),
                r = t("../utils/Utils");
            e.exports = n, (n.prototype = new s).constructor = n; var h = a.create(),
                l = a.create(),
                c = a.create();
            n.prototype.update = function() { var t = this.equations[0],
                    e = this.bodyA,
                    i = this.bodyB,
                    n = (this.distance, e.position),
                    s = i.position,
                    o = this.equations[0],
                    r = t.G;
                a.rotate(l, this.localAnchorA, e.angle), a.rotate(c, this.localAnchorB, i.angle), a.add(h, s, c), a.sub(h, h, l), a.sub(h, h, n), this.position = a.length(h); var u = !1; if (this.upperLimitEnabled && this.position > this.upperLimit && (o.maxForce = 0, o.minForce = -this.maxForce, this.distance = this.upperLimit, u = !0), this.lowerLimitEnabled && this.position < this.lowerLimit && (o.maxForce = this.maxForce, o.minForce = 0, this.distance = this.lowerLimit, u = !0), !this.lowerLimitEnabled && !this.upperLimitEnabled || u) { o.enabled = !0, a.normalize(h, h); var p = a.crossLength(l, h),
                        d = a.crossLength(c, h);
                    r[0] = -h[0], r[1] = -h[1], r[2] = -p, r[3] = h[0], r[4] = h[1], r[5] = d } else o.enabled = !1 }, n.prototype.setMaxForce = function(t) { var e = this.equations[0];
                e.minForce = -t, e.maxForce = t }, n.prototype.getMaxForce = function() { return this.equations[0].maxForce } }, { "../equations/Equation": 22, "../math/vec2": 30, "../utils/Utils": 57, "./Constraint": 14 }], 16: [function(t, e, i) {
            function n(t, e, i) { i = i || {}, s.call(this, t, e, s.GEAR, i), this.ratio = void 0 !== i.ratio ? i.ratio : 1, this.angle = void 0 !== i.angle ? i.angle : e.angle - this.ratio * t.angle, i.angle = this.angle, i.ratio = this.ratio, this.equations = [new o(t, e, i)], void 0 !== i.maxTorque && this.setMaxTorque(i.maxTorque) } var s = t("./Constraint"),
                o = (t("../equations/Equation"), t("../equations/AngleLockEquation"));
            t("../math/vec2");
            e.exports = n, (n.prototype = new s).constructor = n, n.prototype.update = function() { var t = this.equations[0];
                t.ratio !== this.ratio && t.setRatio(this.ratio), t.angle = this.angle }, n.prototype.setMaxTorque = function(t) { this.equations[0].setMaxTorque(t) }, n.prototype.getMaxTorque = function(t) { return this.equations[0].maxForce } }, { "../equations/AngleLockEquation": 20, "../equations/Equation": 22, "../math/vec2": 30, "./Constraint": 14 }], 17: [function(t, e, i) {
            function n(t, e, i) { i = i || {}, s.call(this, t, e, s.LOCK, i); var n = void 0 === i.maxForce ? Number.MAX_VALUE : i.maxForce,
                    r = (i.localAngleB, new a(t, e, -n, n)),
                    h = new a(t, e, -n, n),
                    l = new a(t, e, -n, n),
                    c = o.create(),
                    u = o.create(),
                    p = this;
                r.computeGq = function() { return o.rotate(c, p.localOffsetB, t.angle), o.sub(u, e.position, t.position), o.sub(u, u, c), u[0] }, h.computeGq = function() { return o.rotate(c, p.localOffsetB, t.angle), o.sub(u, e.position, t.position), o.sub(u, u, c), u[1] }; var d = o.create(),
                    m = o.create();
                l.computeGq = function() { return o.rotate(d, p.localOffsetB, e.angle - p.localAngleB), o.scale(d, d, -1), o.sub(u, t.position, e.position), o.add(u, u, d), o.rotate(m, d, -Math.PI / 2), o.normalize(m, m), o.dot(u, m) }, this.localOffsetB = o.create(), i.localOffsetB ? o.copy(this.localOffsetB, i.localOffsetB) : (o.sub(this.localOffsetB, e.position, t.position), o.rotate(this.localOffsetB, this.localOffsetB, -t.angle)), this.localAngleB = 0, "number" == typeof i.localAngleB ? this.localAngleB = i.localAngleB : this.localAngleB = e.angle - t.angle, this.equations.push(r, h, l), this.setMaxForce(n) } var s = t("./Constraint"),
                o = t("../math/vec2"),
                a = t("../equations/Equation");
            e.exports = n, (n.prototype = new s).constructor = n, n.prototype.setMaxForce = function(t) { for (var e = this.equations, i = 0; i < this.equations.length; i++) e[i].maxForce = t, e[i].minForce = -t }, n.prototype.getMaxForce = function() { return this.equations[0].maxForce }; var r = o.create(),
                h = o.create(),
                l = o.create(),
                c = o.fromValues(1, 0),
                u = o.fromValues(0, 1);
            n.prototype.update = function() { var t = this.equations[0],
                    e = this.equations[1],
                    i = this.equations[2],
                    n = this.bodyA,
                    s = this.bodyB;
                o.rotate(r, this.localOffsetB, n.angle), o.rotate(h, this.localOffsetB, s.angle - this.localAngleB), o.scale(h, h, -1), o.rotate(l, h, Math.PI / 2), o.normalize(l, l), t.G[0] = -1, t.G[1] = 0, t.G[2] = -o.crossLength(r, c), t.G[3] = 1, e.G[0] = 0, e.G[1] = -1, e.G[2] = -o.crossLength(r, u), e.G[4] = 1, i.G[0] = -l[0], i.G[1] = -l[1], i.G[3] = l[0], i.G[4] = l[1], i.G[5] = o.crossLength(h, l) } }, { "../equations/Equation": 22, "../math/vec2": 30, "./Constraint": 14 }], 18: [function(t, e, i) {
            function n(t, e, i) { i = i || {}, s.call(this, t, e, s.PRISMATIC, i); var n = r.fromValues(0, 0),
                    l = r.fromValues(1, 0),
                    c = r.fromValues(0, 0);
                i.localAnchorA && r.copy(n, i.localAnchorA), i.localAxisA && r.copy(l, i.localAxisA), i.localAnchorB && r.copy(c, i.localAnchorB), this.localAnchorA = n, this.localAnchorB = c, this.localAxisA = l; var u = this.maxForce = void 0 !== i.maxForce ? i.maxForce : Number.MAX_VALUE,
                    p = new a(t, e, -u, u),
                    d = new r.create,
                    m = new r.create,
                    g = new r.create,
                    f = new r.create; if (p.computeGq = function() { return r.dot(g, f) }, p.updateJacobian = function() { var i = this.G,
                            s = t.position,
                            o = e.position;
                        r.rotate(d, n, t.angle), r.rotate(m, c, e.angle), r.add(g, o, m), r.sub(g, g, s), r.sub(g, g, d), r.rotate(f, l, t.angle + Math.PI / 2), i[0] = -f[0], i[1] = -f[1], i[2] = -r.crossLength(d, f) + r.crossLength(f, g), i[3] = f[0], i[4] = f[1], i[5] = r.crossLength(m, f) }, this.equations.push(p), !i.disableRotationalLock) { var y = new h(t, e, -u, u);
                    this.equations.push(y) } this.position = 0, this.velocity = 0, this.lowerLimitEnabled = void 0 !== i.lowerLimit, this.upperLimitEnabled = void 0 !== i.upperLimit, this.lowerLimit = void 0 !== i.lowerLimit ? i.lowerLimit : 0, this.upperLimit = void 0 !== i.upperLimit ? i.upperLimit : 1, this.upperLimitEquation = new o(t, e), this.lowerLimitEquation = new o(t, e), this.upperLimitEquation.minForce = this.lowerLimitEquation.minForce = 0, this.upperLimitEquation.maxForce = this.lowerLimitEquation.maxForce = u, this.motorEquation = new a(t, e), this.motorEnabled = !1, this.motorSpeed = 0; var v = this,
                    b = this.motorEquation;
                b.computeGW;
                b.computeGq = function() { return 0 }, b.computeGW = function() { var t = this.G,
                        e = this.bodyA,
                        i = this.bodyB,
                        n = e.velocity,
                        s = i.velocity,
                        o = e.angularVelocity,
                        a = i.angularVelocity; return this.gmult(t, n, o, s, a) + v.motorSpeed } } var s = t("./Constraint"),
                o = t("../equations/ContactEquation"),
                a = t("../equations/Equation"),
                r = t("../math/vec2"),
                h = t("../equations/RotationalLockEquation");
            e.exports = n, (n.prototype = new s).constructor = n; var l = r.create(),
                c = r.create(),
                u = r.create(),
                p = r.create(),
                d = r.create(),
                m = r.create();
            n.prototype.update = function() { var t = this.equations,
                    e = t[0],
                    i = this.upperLimit,
                    n = this.lowerLimit,
                    s = this.upperLimitEquation,
                    o = this.lowerLimitEquation,
                    a = this.bodyA,
                    h = this.bodyB,
                    g = this.localAxisA,
                    f = this.localAnchorA,
                    y = this.localAnchorB;
                e.updateJacobian(), r.rotate(l, g, a.angle), r.rotate(p, f, a.angle), r.add(c, p, a.position), r.rotate(d, y, h.angle), r.add(u, d, h.position); var v = this.position = r.dot(u, l) - r.dot(c, l); if (this.motorEnabled) { var b = this.motorEquation.G;
                    b[0] = l[0], b[1] = l[1], b[2] = r.crossLength(l, d), b[3] = -l[0], b[4] = -l[1], b[5] = -r.crossLength(l, p) } if (this.upperLimitEnabled && v > i ? (r.scale(s.normalA, l, -1), r.sub(s.contactPointA, c, a.position), r.sub(s.contactPointB, u, h.position), r.scale(m, l, i), r.add(s.contactPointA, s.contactPointA, m), -1 === t.indexOf(s) && t.push(s)) : -1 !== (_ = t.indexOf(s)) && t.splice(_, 1), this.lowerLimitEnabled && v < n) r.scale(o.normalA, l, 1), r.sub(o.contactPointA, c, a.position), r.sub(o.contactPointB, u, h.position), r.scale(m, l, n), r.sub(o.contactPointB, o.contactPointB, m), -1 === t.indexOf(o) && t.push(o);
                else { var _ = t.indexOf(o); - 1 !== _ && t.splice(_, 1) } }, n.prototype.enableMotor = function() { this.motorEnabled || (this.equations.push(this.motorEquation), this.motorEnabled = !0) }, n.prototype.disableMotor = function() { if (this.motorEnabled) { var t = this.equations.indexOf(this.motorEquation);
                    this.equations.splice(t, 1), this.motorEnabled = !1 } }, n.prototype.setLimits = function(t, e) { "number" == typeof t ? (this.lowerLimit = t, this.lowerLimitEnabled = !0) : (this.lowerLimit = t, this.lowerLimitEnabled = !1), "number" == typeof e ? (this.upperLimit = e, this.upperLimitEnabled = !0) : (this.upperLimit = e, this.upperLimitEnabled = !1) } }, { "../equations/ContactEquation": 21, "../equations/Equation": 22, "../equations/RotationalLockEquation": 24, "../math/vec2": 30, "./Constraint": 14 }], 19: [function(t, e, i) {
            function n(t, e, i) { i = i || {}, s.call(this, t, e, s.REVOLUTE, i); var n = this.maxForce = void 0 !== i.maxForce ? i.maxForce : Number.MAX_VALUE;
                this.pivotA = h.create(), this.pivotB = h.create(), i.worldPivot ? (h.sub(this.pivotA, i.worldPivot, t.position), h.sub(this.pivotB, i.worldPivot, e.position), h.rotate(this.pivotA, this.pivotA, -t.angle), h.rotate(this.pivotB, this.pivotB, -e.angle)) : (h.copy(this.pivotA, i.localPivotA), h.copy(this.pivotB, i.localPivotB)); var m = this.equations = [new o(t, e, -n, n), new o(t, e, -n, n)],
                    g = m[0],
                    f = m[1],
                    y = this;
                g.computeGq = function() { return h.rotate(l, y.pivotA, t.angle), h.rotate(c, y.pivotB, e.angle), h.add(d, e.position, c), h.sub(d, d, t.position), h.sub(d, d, l), h.dot(d, u) }, f.computeGq = function() { return h.rotate(l, y.pivotA, t.angle), h.rotate(c, y.pivotB, e.angle), h.add(d, e.position, c), h.sub(d, d, t.position), h.sub(d, d, l), h.dot(d, p) }, f.minForce = g.minForce = -n, f.maxForce = g.maxForce = n, this.motorEquation = new a(t, e), this.motorEnabled = !1, this.angle = 0, this.lowerLimitEnabled = !1, this.upperLimitEnabled = !1, this.lowerLimit = 0, this.upperLimit = 0, this.upperLimitEquation = new r(t, e), this.lowerLimitEquation = new r(t, e), this.upperLimitEquation.minForce = 0, this.lowerLimitEquation.maxForce = 0 } var s = t("./Constraint"),
                o = t("../equations/Equation"),
                a = t("../equations/RotationalVelocityEquation"),
                r = t("../equations/RotationalLockEquation"),
                h = t("../math/vec2");
            e.exports = n; var l = h.create(),
                c = h.create(),
                u = h.fromValues(1, 0),
                p = h.fromValues(0, 1),
                d = h.create();
            (n.prototype = new s).constructor = n, n.prototype.setLimits = function(t, e) { "number" == typeof t ? (this.lowerLimit = t, this.lowerLimitEnabled = !0) : (this.lowerLimit = t, this.lowerLimitEnabled = !1), "number" == typeof e ? (this.upperLimit = e, this.upperLimitEnabled = !0) : (this.upperLimit = e, this.upperLimitEnabled = !1) }, n.prototype.update = function() { var t = this.bodyA,
                    e = this.bodyB,
                    i = this.pivotA,
                    n = this.pivotB,
                    s = this.equations,
                    o = (s[0], s[1], s[0]),
                    a = s[1],
                    r = this.upperLimit,
                    d = this.lowerLimit,
                    m = this.upperLimitEquation,
                    g = this.lowerLimitEquation,
                    f = this.angle = e.angle - t.angle; if (this.upperLimitEnabled && f > r ? (m.angle = r, -1 === s.indexOf(m) && s.push(m)) : -1 !== (y = s.indexOf(m)) && s.splice(y, 1), this.lowerLimitEnabled && f < d) g.angle = d, -1 === s.indexOf(g) && s.push(g);
                else { var y = s.indexOf(g); - 1 !== y && s.splice(y, 1) } h.rotate(l, i, t.angle), h.rotate(c, n, e.angle), o.G[0] = -1, o.G[1] = 0, o.G[2] = -h.crossLength(l, u), o.G[3] = 1, o.G[4] = 0, o.G[5] = h.crossLength(c, u), a.G[0] = 0, a.G[1] = -1, a.G[2] = -h.crossLength(l, p), a.G[3] = 0, a.G[4] = 1, a.G[5] = h.crossLength(c, p) }, n.prototype.enableMotor = function() { this.motorEnabled || (this.equations.push(this.motorEquation), this.motorEnabled = !0) }, n.prototype.disableMotor = function() { if (this.motorEnabled) { var t = this.equations.indexOf(this.motorEquation);
                    this.equations.splice(t, 1), this.motorEnabled = !1 } }, n.prototype.motorIsEnabled = function() { return !!this.motorEnabled }, n.prototype.setMotorSpeed = function(t) { if (this.motorEnabled) { var e = this.equations.indexOf(this.motorEquation);
                    this.equations[e].relativeVelocity = t } }, n.prototype.getMotorSpeed = function() { return !!this.motorEnabled && this.motorEquation.relativeVelocity } }, { "../equations/Equation": 22, "../equations/RotationalLockEquation": 24, "../equations/RotationalVelocityEquation": 25, "../math/vec2": 30, "./Constraint": 14 }], 20: [function(t, e, i) {
            function n(t, e, i) { i = i || {}, s.call(this, t, e, -Number.MAX_VALUE, Number.MAX_VALUE), this.angle = i.angle || 0, this.ratio = "number" == typeof i.ratio ? i.ratio : 1, this.setRatio(this.ratio) } var s = t("./Equation");
            t("../math/vec2");
            e.exports = n, (n.prototype = new s).constructor = n, n.prototype.computeGq = function() { return this.ratio * this.bodyA.angle - this.bodyB.angle + this.angle }, n.prototype.setRatio = function(t) { var e = this.G;
                e[2] = t, e[5] = -1, this.ratio = t }, n.prototype.setMaxTorque = function(t) { this.maxForce = t, this.minForce = -t } }, { "../math/vec2": 30, "./Equation": 22 }], 21: [function(t, e, i) {
            function n(t, e) { s.call(this, t, e, 0, Number.MAX_VALUE), this.contactPointA = o.create(), this.penetrationVec = o.create(), this.contactPointB = o.create(), this.normalA = o.create(), this.restitution = 0, this.firstImpact = !1, this.shapeA = null, this.shapeB = null } var s = t("./Equation"),
                o = t("../math/vec2");
            e.exports = n, (n.prototype = new s).constructor = n, n.prototype.computeB = function(t, e, i) { var n = this.bodyA,
                    s = this.bodyB,
                    a = this.contactPointA,
                    r = this.contactPointB,
                    h = n.position,
                    l = s.position,
                    c = this.penetrationVec,
                    u = this.normalA,
                    p = this.G,
                    d = o.crossLength(a, u),
                    m = o.crossLength(r, u);
                p[0] = -u[0], p[1] = -u[1], p[2] = -d, p[3] = u[0], p[4] = u[1], p[5] = m, o.add(c, l, r), o.sub(c, c, h), o.sub(c, c, a); var g, f; return this.firstImpact && 0 !== this.restitution ? (f = 0, g = 1 / e * (1 + this.restitution) * this.computeGW()) : (f = o.dot(u, c) + this.offset, g = this.computeGW()), -f * t - g * e - i * this.computeGiMf() } }, { "../math/vec2": 30, "./Equation": 22 }], 22: [function(t, e, i) {
            function n(t, e, i, s) { this.minForce = void 0 === i ? -Number.MAX_VALUE : i, this.maxForce = void 0 === s ? Number.MAX_VALUE : s, this.bodyA = t, this.bodyB = e, this.stiffness = n.DEFAULT_STIFFNESS, this.relaxation = n.DEFAULT_RELAXATION, this.G = new o.ARRAY_TYPE(6); for (var a = 0; a < 6; a++) this.G[a] = 0;
                this.offset = 0, this.a = 0, this.b = 0, this.epsilon = 0, this.timeStep = 1 / 60, this.needsUpdate = !0, this.multiplier = 0, this.relativeVelocity = 0, this.enabled = !0 } e.exports = n; var s = t("../math/vec2"),
                o = t("../utils/Utils");
            t("../objects/Body");
            n.prototype.constructor = n, n.DEFAULT_STIFFNESS = 1e6, n.DEFAULT_RELAXATION = 4, n.prototype.update = function() { var t = this.stiffness,
                    e = this.relaxation,
                    i = this.timeStep;
                this.a = 4 / (i * (1 + 4 * e)), this.b = 4 * e / (1 + 4 * e), this.epsilon = 4 / (i * i * t * (1 + 4 * e)), this.needsUpdate = !1 }, n.prototype.gmult = function(t, e, i, n, s) { return t[0] * e[0] + t[1] * e[1] + t[2] * i + t[3] * n[0] + t[4] * n[1] + t[5] * s }, n.prototype.computeB = function(t, e, i) { var n = this.computeGW(); return -this.computeGq() * t - n * e - this.computeGiMf() * i }; var a = s.create(),
                r = s.create();
            n.prototype.computeGq = function() { var t = this.G,
                    e = this.bodyA,
                    i = this.bodyB,
                    n = (e.position, i.position, e.angle),
                    s = i.angle; return this.gmult(t, a, n, r, s) + this.offset }, n.prototype.computeGW = function() { var t = this.G,
                    e = this.bodyA,
                    i = this.bodyB,
                    n = e.velocity,
                    s = i.velocity,
                    o = e.angularVelocity,
                    a = i.angularVelocity; return this.gmult(t, n, o, s, a) + this.relativeVelocity }, n.prototype.computeGWlambda = function() { var t = this.G,
                    e = this.bodyA,
                    i = this.bodyB,
                    n = e.vlambda,
                    s = i.vlambda,
                    o = e.wlambda,
                    a = i.wlambda; return this.gmult(t, n, o, s, a) }; var h = s.create(),
                l = s.create();
            n.prototype.computeGiMf = function() { var t = this.bodyA,
                    e = this.bodyB,
                    i = t.force,
                    n = t.angularForce,
                    o = e.force,
                    a = e.angularForce,
                    r = t.invMassSolve,
                    c = e.invMassSolve,
                    u = t.invInertiaSolve,
                    p = e.invInertiaSolve,
                    d = this.G; return s.scale(h, i, r), s.multiply(h, t.massMultiplier, h), s.scale(l, o, c), s.multiply(l, e.massMultiplier, l), this.gmult(d, h, n * u, l, a * p) }, n.prototype.computeGiMGt = function() { var t = this.bodyA,
                    e = this.bodyB,
                    i = t.invMassSolve,
                    n = e.invMassSolve,
                    s = t.invInertiaSolve,
                    o = e.invInertiaSolve,
                    a = this.G; return a[0] * a[0] * i * t.massMultiplier[0] + a[1] * a[1] * i * t.massMultiplier[1] + a[2] * a[2] * s + a[3] * a[3] * n * e.massMultiplier[0] + a[4] * a[4] * n * e.massMultiplier[1] + a[5] * a[5] * o }; var c = s.create(),
                u = s.create(),
                p = s.create();
            s.create(), s.create(), s.create();
            n.prototype.addToWlambda = function(t) { var e = this.bodyA,
                    i = this.bodyB,
                    n = c,
                    o = u,
                    a = p,
                    r = e.invMassSolve,
                    h = i.invMassSolve,
                    l = e.invInertiaSolve,
                    d = i.invInertiaSolve,
                    m = this.G;
                o[0] = m[0], o[1] = m[1], a[0] = m[3], a[1] = m[4], s.scale(n, o, r * t), s.multiply(n, n, e.massMultiplier), s.add(e.vlambda, e.vlambda, n), e.wlambda += l * m[2] * t, s.scale(n, a, h * t), s.multiply(n, n, i.massMultiplier), s.add(i.vlambda, i.vlambda, n), i.wlambda += d * m[5] * t }, n.prototype.computeInvC = function(t) { return 1 / (this.computeGiMGt() + t) } }, { "../math/vec2": 30, "../objects/Body": 31, "../utils/Utils": 57 }], 23: [function(t, e, i) {
            function n(t, e, i) { o.call(this, t, e, -i, i), this.contactPointA = s.create(), this.contactPointB = s.create(), this.t = s.create(), this.contactEquations = [], this.shapeA = null, this.shapeB = null, this.frictionCoefficient = .3 } var s = t("../math/vec2"),
                o = t("./Equation");
            t("../utils/Utils");
            e.exports = n, (n.prototype = new o).constructor = n, n.prototype.setSlipForce = function(t) { this.maxForce = t, this.minForce = -t }, n.prototype.getSlipForce = function() { return this.maxForce }, n.prototype.computeB = function(t, e, i) { this.bodyA, this.bodyB; var n = this.contactPointA,
                    o = this.contactPointB,
                    a = this.t,
                    r = this.G; return r[0] = -a[0], r[1] = -a[1], r[2] = -s.crossLength(n, a), r[3] = a[0], r[4] = a[1], r[5] = s.crossLength(o, a), -this.computeGW() * e - i * this.computeGiMf() } }, { "../math/vec2": 30, "../utils/Utils": 57, "./Equation": 22 }], 24: [function(t, e, i) {
            function n(t, e, i) { i = i || {}, s.call(this, t, e, -Number.MAX_VALUE, Number.MAX_VALUE), this.angle = i.angle || 0; var n = this.G;
                n[2] = 1, n[5] = -1 } var s = t("./Equation"),
                o = t("../math/vec2");
            e.exports = n, (n.prototype = new s).constructor = n; var a = o.create(),
                r = o.create(),
                h = o.fromValues(1, 0),
                l = o.fromValues(0, 1);
            n.prototype.computeGq = function() { return o.rotate(a, h, this.bodyA.angle + this.angle), o.rotate(r, l, this.bodyB.angle), o.dot(a, r) } }, { "../math/vec2": 30, "./Equation": 22 }], 25: [function(t, e, i) {
            function n(t, e) { s.call(this, t, e, -Number.MAX_VALUE, Number.MAX_VALUE), this.relativeVelocity = 1, this.ratio = 1 } var s = t("./Equation");
            t("../math/vec2");
            e.exports = n, (n.prototype = new s).constructor = n, n.prototype.computeB = function(t, e, i) { var n = this.G;
                n[2] = -1, n[5] = this.ratio; var s = this.computeGiMf(); return -this.computeGW() * e - i * s } }, { "../math/vec2": 30, "./Equation": 22 }], 26: [function(t, e, i) { var n = function() {};
            e.exports = n, n.prototype = { constructor: n, on: function(t, e, i) { e.context = i || this, void 0 === this._listeners && (this._listeners = {}); var n = this._listeners; return void 0 === n[t] && (n[t] = []), -1 === n[t].indexOf(e) && n[t].push(e), this }, has: function(t, e) { if (void 0 === this._listeners) return !1; var i = this._listeners; if (e) { if (void 0 !== i[t] && -1 !== i[t].indexOf(e)) return !0 } else if (void 0 !== i[t]) return !0; return !1 }, off: function(t, e) { if (void 0 === this._listeners) return this; var i = this._listeners,
                        n = i[t].indexOf(e); return -1 !== n && i[t].splice(n, 1), this }, emit: function(t) { if (void 0 === this._listeners) return this; var e = this._listeners[t.type]; if (void 0 !== e) { t.target = this; for (var i = 0, n = e.length; i < n; i++) { var s = e[i];
                            s.call(s.context, t) } } return this } } }, {}], 27: [function(t, e, i) {
            function n(t, e, i) { if (i = i || {}, !(t instanceof s && e instanceof s)) throw new Error("First two arguments must be Material instances.");
                this.id = n.idCounter++, this.materialA = t, this.materialB = e, this.friction = void 0 !== i.friction ? Number(i.friction) : .3, this.restitution = void 0 !== i.restitution ? Number(i.restitution) : 0, this.stiffness = void 0 !== i.stiffness ? Number(i.stiffness) : o.DEFAULT_STIFFNESS, this.relaxation = void 0 !== i.relaxation ? Number(i.relaxation) : o.DEFAULT_RELAXATION, this.frictionStiffness = void 0 !== i.frictionStiffness ? Number(i.frictionStiffness) : o.DEFAULT_STIFFNESS, this.frictionRelaxation = void 0 !== i.frictionRelaxation ? Number(i.frictionRelaxation) : o.DEFAULT_RELAXATION, this.surfaceVelocity = void 0 !== i.surfaceVelocity ? Number(i.surfaceVelocity) : 0, this.contactSkinSize = .005 } var s = t("./Material"),
                o = t("../equations/Equation");
            e.exports = n, n.idCounter = 0 }, { "../equations/Equation": 22, "./Material": 28 }], 28: [function(t, e, i) {
            function n(t) { this.id = t || n.idCounter++ } e.exports = n, n.idCounter = 0 }, {}], 29: [function(t, e, i) { var n = {};
            n.GetArea = function(t) { if (t.length < 6) return 0; for (var e = t.length - 2, i = 0, n = 0; n < e; n += 2) i += (t[n + 2] - t[n]) * (t[n + 1] + t[n + 3]); return .5 * -(i += (t[0] - t[e]) * (t[e + 1] + t[1])) }, n.Triangulate = function(t) { var e = t.length >> 1; if (e < 3) return []; for (var i = [], s = [], o = 0; o < e; o++) s.push(o); for (var o = 0, a = e; a > 3;) { var r = s[(o + 0) % a],
                        h = s[(o + 1) % a],
                        l = s[(o + 2) % a],
                        c = t[2 * r],
                        u = t[2 * r + 1],
                        p = t[2 * h],
                        d = t[2 * h + 1],
                        m = t[2 * l],
                        g = t[2 * l + 1],
                        f = !1; if (n._convex(c, u, p, d, m, g)) { f = !0; for (var y = 0; y < a; y++) { var v = s[y]; if (v != r && v != h && v != l && n._PointInTriangle(t[2 * v], t[2 * v + 1], c, u, p, d, m, g)) { f = !1; break } } } if (f) i.push(r, h, l), s.splice((o + 1) % a, 1), a--, o = 0;
                    else if (o++ > 3 * a) break } return i.push(s[0], s[1], s[2]), i }, n._PointInTriangle = function(t, e, i, n, s, o, a, r) { var h = a - i,
                    l = r - n,
                    c = s - i,
                    u = o - n,
                    p = t - i,
                    d = e - n,
                    m = h * h + l * l,
                    g = h * c + l * u,
                    f = h * p + l * d,
                    y = c * c + u * u,
                    v = c * p + u * d,
                    b = 1 / (m * y - g * g),
                    _ = (y * f - g * v) * b,
                    S = (m * v - g * f) * b; return _ >= 0 && S >= 0 && _ + S < 1 }, n._convex = function(t, e, i, n, s, o) { return (e - n) * (s - i) + (i - t) * (o - n) >= 0 }, e.exports = n }, {}], 30: [function(t, e, i) { var n = e.exports = {},
                s = t("../utils/Utils");
            n.crossLength = function(t, e) { return t[0] * e[1] - t[1] * e[0] }, n.crossVZ = function(t, e, i) { return n.rotate(t, e, -Math.PI / 2), n.scale(t, t, i), t }, n.crossZV = function(t, e, i) { return n.rotate(t, i, Math.PI / 2), n.scale(t, t, e), t }, n.rotate = function(t, e, i) { if (0 !== i) { var n = Math.cos(i),
                        s = Math.sin(i),
                        o = e[0],
                        a = e[1];
                    t[0] = n * o - s * a, t[1] = s * o + n * a } else t[0] = e[0], t[1] = e[1] }, n.rotate90cw = function(t, e) { var i = e[0],
                    n = e[1];
                t[0] = n, t[1] = -i }, n.toLocalFrame = function(t, e, i, s) { n.copy(t, e), n.sub(t, t, i), n.rotate(t, t, -s) }, n.toGlobalFrame = function(t, e, i, s) { n.copy(t, e), n.rotate(t, t, s), n.add(t, t, i) }, n.vectorToLocalFrame = function(t, e, i) { n.rotate(t, e, -i) }, n.vectorToGlobalFrame = function(t, e, i) { n.rotate(t, e, i) }, n.centroid = function(t, e, i, s) { return n.add(t, e, i), n.add(t, t, s), n.scale(t, t, 1 / 3), t }, n.create = function() { var t = new s.ARRAY_TYPE(2); return t[0] = 0, t[1] = 0, t }, n.clone = function(t) { var e = new s.ARRAY_TYPE(2); return e[0] = t[0], e[1] = t[1], e }, n.fromValues = function(t, e) { var i = new s.ARRAY_TYPE(2); return i[0] = t, i[1] = e, i }, n.copy = function(t, e) { return t[0] = e[0], t[1] = e[1], t }, n.set = function(t, e, i) { return t[0] = e, t[1] = i, t }, n.add = function(t, e, i) { return t[0] = e[0] + i[0], t[1] = e[1] + i[1], t }, n.subtract = function(t, e, i) { return t[0] = e[0] - i[0], t[1] = e[1] - i[1], t }, n.sub = n.subtract, n.multiply = function(t, e, i) { return t[0] = e[0] * i[0], t[1] = e[1] * i[1], t }, n.mul = n.multiply, n.divide = function(t, e, i) { return t[0] = e[0] / i[0], t[1] = e[1] / i[1], t }, n.div = n.divide, n.scale = function(t, e, i) { return t[0] = e[0] * i, t[1] = e[1] * i, t }, n.distance = function(t, e) { var i = e[0] - t[0],
                    n = e[1] - t[1]; return Math.sqrt(i * i + n * n) }, n.dist = n.distance, n.squaredDistance = function(t, e) { var i = e[0] - t[0],
                    n = e[1] - t[1]; return i * i + n * n }, n.sqrDist = n.squaredDistance, n.length = function(t) { var e = t[0],
                    i = t[1]; return Math.sqrt(e * e + i * i) }, n.len = n.length, n.squaredLength = function(t) { var e = t[0],
                    i = t[1]; return e * e + i * i }, n.sqrLen = n.squaredLength, n.negate = function(t, e) { return t[0] = -e[0], t[1] = -e[1], t }, n.normalize = function(t, e) { var i = e[0],
                    n = e[1],
                    s = i * i + n * n; return s > 0 && (s = 1 / Math.sqrt(s), t[0] = e[0] * s, t[1] = e[1] * s), t }, n.dot = function(t, e) { return t[0] * e[0] + t[1] * e[1] }, n.str = function(t) { return "vec2(" + t[0] + ", " + t[1] + ")" }, n.lerp = function(t, e, i, n) { var s = e[0],
                    o = e[1]; return t[0] = s + n * (i[0] - s), t[1] = o + n * (i[1] - o), t }, n.reflect = function(t, e, i) { var n = e[0] * i[0] + e[1] * i[1];
                t[0] = e[0] - 2 * i[0] * n, t[1] = e[1] - 2 * i[1] * n }, n.getLineSegmentsIntersection = function(t, e, i, s, o) { var a = n.getLineSegmentsIntersectionFraction(e, i, s, o); return !(a < 0) && (t[0] = e[0] + a * (i[0] - e[0]), t[1] = e[1] + a * (i[1] - e[1]), !0) }, n.getLineSegmentsIntersectionFraction = function(t, e, i, n) { var s, o, a = e[0] - t[0],
                    r = e[1] - t[1],
                    h = n[0] - i[0],
                    l = n[1] - i[1]; return s = (-r * (t[0] - i[0]) + a * (t[1] - i[1])) / (-h * r + a * l), o = (h * (t[1] - i[1]) - l * (t[0] - i[0])) / (-h * r + a * l), s >= 0 && s <= 1 && o >= 0 && o <= 1 ? o : -1 } }, { "../utils/Utils": 57 }], 31: [function(t, e, i) {
            function n(t) { t = t || {}, c.call(this), this.id = t.id || ++n._idCounter, this.world = null, this.shapes = [], this.mass = t.mass || 0, this.invMass = 0, this.inertia = 0, this.invInertia = 0, this.invMassSolve = 0, this.invInertiaSolve = 0, this.fixedRotation = !!t.fixedRotation, this.fixedX = !!t.fixedX, this.fixedY = !!t.fixedY, this.massMultiplier = s.create(), this.position = s.fromValues(0, 0), t.position && s.copy(this.position, t.position), this.interpolatedPosition = s.fromValues(0, 0), this.interpolatedAngle = 0, this.previousPosition = s.fromValues(0, 0), this.previousAngle = 0, this.velocity = s.fromValues(0, 0), t.velocity && s.copy(this.velocity, t.velocity), this.vlambda = s.fromValues(0, 0), this.wlambda = 0, this.angle = t.angle || 0, this.angularVelocity = t.angularVelocity || 0, this.force = s.create(), t.force && s.copy(this.force, t.force), this.angularForce = t.angularForce || 0, this.damping = "number" == typeof t.damping ? t.damping : .1, this.angularDamping = "number" == typeof t.angularDamping ? t.angularDamping : .1, this.type = n.STATIC, void 0 !== t.type ? this.type = t.type : t.mass ? this.type = n.DYNAMIC : this.type = n.STATIC, this.boundingRadius = 0, this.aabb = new l, this.aabbNeedsUpdate = !0, this.allowSleep = void 0 === t.allowSleep || t.allowSleep, this.wantsToSleep = !1, this.sleepState = n.AWAKE, this.sleepSpeedLimit = void 0 !== t.sleepSpeedLimit ? t.sleepSpeedLimit : .2, this.sleepTimeLimit = void 0 !== t.sleepTimeLimit ? t.sleepTimeLimit : 1, this.gravityScale = void 0 !== t.gravityScale ? t.gravityScale : 1, this.collisionResponse = void 0 === t.collisionResponse || t.collisionResponse, this.idleTime = 0, this.timeLastSleepy = 0, this.ccdSpeedThreshold = void 0 !== t.ccdSpeedThreshold ? t.ccdSpeedThreshold : -1, this.ccdIterations = void 0 !== t.ccdIterations ? t.ccdIterations : 10, this.concavePath = null, this._wakeUpAfterNarrowphase = !1, this.updateMassProperties() } var s = t("../math/vec2"),
                o = t("poly-decomp"),
                a = t("../shapes/Convex"),
                r = t("../collision/RaycastResult"),
                h = t("../collision/Ray"),
                l = t("../collision/AABB"),
                c = t("../events/EventEmitter");
            e.exports = n, n.prototype = new c, n.prototype.constructor = n, n._idCounter = 0, n.prototype.updateSolveMassProperties = function() { this.sleepState === n.SLEEPING || this.type === n.KINEMATIC ? (this.invMassSolve = 0, this.invInertiaSolve = 0) : (this.invMassSolve = this.invMass, this.invInertiaSolve = this.invInertia) }, n.prototype.setDensity = function(t) { var e = this.getArea();
                this.mass = e * t, this.updateMassProperties() }, n.prototype.getArea = function() { for (var t = 0, e = 0; e < this.shapes.length; e++) t += this.shapes[e].area; return t }, n.prototype.getAABB = function() { return this.aabbNeedsUpdate && this.updateAABB(), this.aabb }; var u = new l,
                p = s.create();
            n.prototype.updateAABB = function() { for (var t = this.shapes, e = t.length, i = p, n = this.angle, o = 0; o !== e; o++) { var a = t[o],
                        r = a.angle + n;
                    s.rotate(i, a.position, n), s.add(i, i, this.position), a.computeAABB(u, i, r), 0 === o ? this.aabb.copy(u) : this.aabb.extend(u) } this.aabbNeedsUpdate = !1 }, n.prototype.updateBoundingRadius = function() { for (var t = this.shapes, e = t.length, i = 0, n = 0; n !== e; n++) { var o = t[n],
                        a = s.length(o.position),
                        r = o.boundingRadius;
                    a + r > i && (i = a + r) } this.boundingRadius = i }, n.prototype.addShape = function(t, e, i) { if (t.body) throw new Error("A shape can only be added to one body.");
                t.body = this, e ? s.copy(t.position, e) : s.set(t.position, 0, 0), t.angle = i || 0, this.shapes.push(t), this.updateMassProperties(), this.updateBoundingRadius(), this.aabbNeedsUpdate = !0 }, n.prototype.removeShape = function(t) { var e = this.shapes.indexOf(t); return -1 !== e && (this.shapes.splice(e, 1), this.aabbNeedsUpdate = !0, t.body = null, !0) }, n.prototype.updateMassProperties = function() { if (this.type === n.STATIC || this.type === n.KINEMATIC) this.mass = Number.MAX_VALUE, this.invMass = 0, this.inertia = Number.MAX_VALUE, this.invInertia = 0;
                else { var t = this.shapes,
                        e = t.length,
                        i = this.mass / e,
                        o = 0; if (this.fixedRotation) this.inertia = Number.MAX_VALUE, this.invInertia = 0;
                    else { for (var a = 0; a < e; a++) { var r = t[a],
                                h = s.squaredLength(r.position);
                            o += r.computeMomentOfInertia(i) + i * h } this.inertia = o, this.invInertia = o > 0 ? 1 / o : 0 } this.invMass = 1 / this.mass, s.set(this.massMultiplier, this.fixedX ? 0 : 1, this.fixedY ? 0 : 1) } };
            s.create();
            n.prototype.applyForce = function(t, e) { if (s.add(this.force, this.force, t), e) { var i = s.crossLength(e, t);
                    this.angularForce += i } }; var d = s.create(),
                m = s.create(),
                g = s.create();
            n.prototype.applyForceLocal = function(t, e) { e = e || g; var i = d,
                    n = m;
                this.vectorToWorldFrame(i, t), this.vectorToWorldFrame(n, e), this.applyForce(i, n) }; var f = s.create();
            n.prototype.applyImpulse = function(t, e) { if (this.type === n.DYNAMIC) { var i = f; if (s.scale(i, t, this.invMass), s.multiply(i, this.massMultiplier, i), s.add(this.velocity, i, this.velocity), e) { var o = s.crossLength(e, t);
                        o *= this.invInertia, this.angularVelocity += o } } }; var y = s.create(),
                v = s.create(),
                b = s.create();
            n.prototype.applyImpulseLocal = function(t, e) { e = e || b; var i = y,
                    n = v;
                this.vectorToWorldFrame(i, t), this.vectorToWorldFrame(n, e), this.applyImpulse(i, n) }, n.prototype.toLocalFrame = function(t, e) { s.toLocalFrame(t, e, this.position, this.angle) }, n.prototype.toWorldFrame = function(t, e) { s.toGlobalFrame(t, e, this.position, this.angle) }, n.prototype.vectorToLocalFrame = function(t, e) { s.vectorToLocalFrame(t, e, this.angle) }, n.prototype.vectorToWorldFrame = function(t, e) { s.vectorToGlobalFrame(t, e, this.angle) }, n.prototype.fromPolygon = function(t, e) { e = e || {}; for (h = this.shapes.length; h >= 0; --h) this.removeShape(this.shapes[h]); var i = new o.Polygon; if (i.vertices = t, i.makeCCW(), "number" == typeof e.removeCollinearPoints && i.removeCollinearPoints(e.removeCollinearPoints), void 0 === e.skipSimpleCheck && !i.isSimple()) return !1;
                this.concavePath = i.vertices.slice(0); for (h = 0; h < this.concavePath.length; h++) { u = [0, 0];
                    s.copy(u, this.concavePath[h]), this.concavePath[h] = u } var n;
                n = e.optimalDecomp ? i.decomp() : i.quickDecomp(); for (var r = s.create(), h = 0; h !== n.length; h++) { for (var l = new a({ vertices: n[h].vertices }), c = 0; c !== l.vertices.length; c++) { var u = l.vertices[c];
                        s.sub(u, u, l.centerOfMass) } s.scale(r, l.centerOfMass, 1), l.updateTriangles(), l.updateCenterOfMass(), l.updateBoundingRadius(), this.addShape(l, r) } return this.adjustCenterOfMass(), this.aabbNeedsUpdate = !0, !0 };
            s.fromValues(0, 0); var _ = s.fromValues(0, 0),
                S = s.fromValues(0, 0),
                w = s.fromValues(0, 0);
            n.prototype.adjustCenterOfMass = function() { var t = _,
                    e = S,
                    i = w,
                    n = 0;
                s.set(e, 0, 0); for (a = 0; a !== this.shapes.length; a++) { o = this.shapes[a];
                    s.scale(t, o.position, o.area), s.add(e, e, t), n += o.area } s.scale(i, e, 1 / n); for (a = 0; a !== this.shapes.length; a++) { var o = this.shapes[a];
                    s.sub(o.position, o.position, i) } s.add(this.position, this.position, i); for (var a = 0; this.concavePath && a < this.concavePath.length; a++) s.sub(this.concavePath[a], this.concavePath[a], i);
                this.updateMassProperties(), this.updateBoundingRadius() }, n.prototype.setZeroForce = function() { s.set(this.force, 0, 0), this.angularForce = 0 }, n.prototype.resetConstraintVelocity = function() { var t = this,
                    e = t.vlambda;
                s.set(e, 0, 0), t.wlambda = 0 }, n.prototype.addConstraintVelocity = function() { var t = this,
                    e = t.velocity;
                s.add(e, e, t.vlambda), t.angularVelocity += t.wlambda }, n.prototype.applyDamping = function(t) { if (this.type === n.DYNAMIC) { var e = this.velocity;
                    s.scale(e, e, Math.pow(1 - this.damping, t)), this.angularVelocity *= Math.pow(1 - this.angularDamping, t) } }, n.prototype.wakeUp = function() { var t = this.sleepState;
                this.sleepState = n.AWAKE, this.idleTime = 0, t !== n.AWAKE && this.emit(n.wakeUpEvent) }, n.prototype.sleep = function() { this.sleepState = n.SLEEPING, this.angularVelocity = 0, this.angularForce = 0, s.set(this.velocity, 0, 0), s.set(this.force, 0, 0), this.emit(n.sleepEvent) }, n.prototype.sleepTick = function(t, e, i) { if (this.allowSleep && this.type !== n.SLEEPING) { this.wantsToSleep = !1;
                    this.sleepState;
                    s.squaredLength(this.velocity) + Math.pow(this.angularVelocity, 2) >= Math.pow(this.sleepSpeedLimit, 2) ? (this.idleTime = 0, this.sleepState = n.AWAKE) : (this.idleTime += i, this.sleepState = n.SLEEPY), this.idleTime > this.sleepTimeLimit && (e ? this.wantsToSleep = !0 : this.sleep()) } }, n.prototype.overlaps = function(t) { return this.world.overlapKeeper.bodiesAreOverlapping(this, t) }; var C = s.create(),
                A = s.create();
            n.prototype.integrate = function(t) { var e = this.invMass,
                    i = this.force,
                    n = this.position,
                    o = this.velocity;
                s.copy(this.previousPosition, this.position), this.previousAngle = this.angle, this.fixedRotation || (this.angularVelocity += this.angularForce * this.invInertia * t), s.scale(C, i, t * e), s.multiply(C, this.massMultiplier, C), s.add(o, C, o), this.integrateToTimeOfImpact(t) || (s.scale(A, o, t), s.add(n, n, A), this.fixedRotation || (this.angle += this.angularVelocity * t)), this.aabbNeedsUpdate = !0 }; var T = new r,
                x = new h({ mode: h.ALL }),
                P = s.create(),
                I = s.create(),
                O = s.create(),
                E = s.create();
            n.prototype.integrateToTimeOfImpact = function(t) { if (this.ccdSpeedThreshold < 0 || s.squaredLength(this.velocity) < Math.pow(this.ccdSpeedThreshold, 2)) return !1;
                s.normalize(P, this.velocity), s.scale(I, this.velocity, t), s.add(I, I, this.position), s.sub(O, I, this.position); var e, i = this.angularVelocity * t,
                    n = s.length(O),
                    o = 1,
                    a = this; if (T.reset(), x.callback = function(t) { t.body !== a && (e = t.body, t.getHitPoint(I, x), s.sub(O, I, a.position), o = s.length(O) / n, t.stop()) }, s.copy(x.from, this.position), s.copy(x.to, I), x.update(), this.world.raycast(T, x), !e) return !1; var r = this.angle;
                s.copy(E, this.position); for (var h = 0, l = 0, c = 0, u = o; u >= l && h < this.ccdIterations;) h++, c = (u - l) / 2, s.scale(A, O, o), s.add(this.position, E, A), this.angle = r + i * o, this.updateAABB(), this.aabb.overlaps(e.aabb) && this.world.narrowphase.bodiesOverlap(this, e) ? l = c : u = c; return o = c, s.copy(this.position, E), this.angle = r, s.scale(A, O, o), s.add(this.position, this.position, A), this.fixedRotation || (this.angle += i * o), !0 }, n.prototype.getVelocityAtPoint = function(t, e) { return s.crossVZ(t, e, this.angularVelocity), s.subtract(t, this.velocity, t), t }, n.sleepyEvent = { type: "sleepy" }, n.sleepEvent = { type: "sleep" }, n.wakeUpEvent = { type: "wakeup" }, n.DYNAMIC = 1, n.STATIC = 2, n.KINEMATIC = 4, n.AWAKE = 0, n.SLEEPY = 1, n.SLEEPING = 2 }, { "../collision/AABB": 7, "../collision/Ray": 11, "../collision/RaycastResult": 12, "../events/EventEmitter": 26, "../math/vec2": 30, "../shapes/Convex": 40, "poly-decomp": 5 }], 32: [function(t, e, i) {
            function n(t, e, i) { i = i || {}, o.call(this, t, e, i), this.localAnchorA = s.fromValues(0, 0), this.localAnchorB = s.fromValues(0, 0), i.localAnchorA && s.copy(this.localAnchorA, i.localAnchorA), i.localAnchorB && s.copy(this.localAnchorB, i.localAnchorB), i.worldAnchorA && this.setWorldAnchorA(i.worldAnchorA), i.worldAnchorB && this.setWorldAnchorB(i.worldAnchorB); var n = s.create(),
                    a = s.create();
                this.getWorldAnchorA(n), this.getWorldAnchorB(a); var r = s.distance(n, a);
                this.restLength = "number" == typeof i.restLength ? i.restLength : r } var s = t("../math/vec2"),
                o = t("./Spring");
            t("../utils/Utils");
            e.exports = n, (n.prototype = new o).constructor = n, n.prototype.setWorldAnchorA = function(t) { this.bodyA.toLocalFrame(this.localAnchorA, t) }, n.prototype.setWorldAnchorB = function(t) { this.bodyB.toLocalFrame(this.localAnchorB, t) }, n.prototype.getWorldAnchorA = function(t) { this.bodyA.toWorldFrame(t, this.localAnchorA) }, n.prototype.getWorldAnchorB = function(t) { this.bodyB.toWorldFrame(t, this.localAnchorB) }; var a = s.create(),
                r = s.create(),
                h = s.create(),
                l = s.create(),
                c = s.create(),
                u = s.create(),
                p = s.create(),
                d = s.create(),
                m = s.create();
            n.prototype.applyForce = function() { var t = this.stiffness,
                    e = this.damping,
                    i = this.restLength,
                    n = this.bodyA,
                    o = this.bodyB,
                    g = a,
                    f = r,
                    y = h,
                    v = l,
                    b = m,
                    _ = c,
                    S = u,
                    w = p,
                    C = d;
                this.getWorldAnchorA(_), this.getWorldAnchorB(S), s.sub(w, _, n.position), s.sub(C, S, o.position), s.sub(g, S, _); var A = s.len(g);
                s.normalize(f, g), s.sub(y, o.velocity, n.velocity), s.crossZV(b, o.angularVelocity, C), s.add(y, y, b), s.crossZV(b, n.angularVelocity, w), s.sub(y, y, b), s.scale(v, f, -t * (A - i) - e * s.dot(y, f)), s.sub(n.force, n.force, v), s.add(o.force, o.force, v); var T = s.crossLength(w, v),
                    x = s.crossLength(C, v);
                n.angularForce -= T, o.angularForce += x } }, { "../math/vec2": 30, "../utils/Utils": 57, "./Spring": 34 }], 33: [function(t, e, i) {
            function n(t, e, i) { i = i || {}, s.call(this, t, e, i), this.restAngle = "number" == typeof i.restAngle ? i.restAngle : e.angle - t.angle } t("../math/vec2"); var s = t("./Spring");
            e.exports = n, (n.prototype = new s).constructor = n, n.prototype.applyForce = function() { var t = this.stiffness,
                    e = this.damping,
                    i = this.restAngle,
                    n = this.bodyA,
                    s = this.bodyB,
                    o = -t * (s.angle - n.angle - i) - e * (s.angularVelocity - n.angularVelocity) * 0;
                n.angularForce -= o, s.angularForce += o } }, { "../math/vec2": 30, "./Spring": 34 }], 34: [function(t, e, i) {
            function n(t, e, i) { i = s.defaults(i, { stiffness: 100, damping: 1 }), this.stiffness = i.stiffness, this.damping = i.damping, this.bodyA = t, this.bodyB = e } t("../math/vec2"); var s = t("../utils/Utils");
            e.exports = n, n.prototype.applyForce = function() {} }, { "../math/vec2": 30, "../utils/Utils": 57 }], 35: [function(t, e, i) {
            function n(t, e) { e = e || {}, this.chassisBody = t, this.wheels = [], this.groundBody = new h({ mass: 0 }), this.world = null; var i = this;
                this.preStepCallback = function() { i.update() } }

            function s(t, e) { e = e || {}, this.vehicle = t, this.forwardEquation = new r(t.chassisBody, t.groundBody), this.sideEquation = new r(t.chassisBody, t.groundBody), this.steerValue = 0, this.engineForce = 0, this.setSideFriction(void 0 !== e.sideFriction ? e.sideFriction : 5), this.localForwardVector = o.fromValues(0, 1), e.localForwardVector && o.copy(this.localForwardVector, e.localForwardVector), this.localPosition = o.fromValues(0, 0), e.localPosition && o.copy(this.localPosition, e.localPosition), a.apply(this, t.chassisBody, t.groundBody), this.equations.push(this.forwardEquation, this.sideEquation), this.setBrakeForce(0) } var o = t("../math/vec2"),
                a = (t("../utils/Utils"), t("../constraints/Constraint")),
                r = t("../equations/FrictionEquation"),
                h = t("../objects/Body");
            e.exports = n, n.prototype.addToWorld = function(t) { this.world = t, t.addBody(this.groundBody), t.on("preStep", this.preStepCallback); for (var e = 0; e < this.wheels.length; e++) { var i = this.wheels[e];
                    t.addConstraint(i) } }, n.prototype.removeFromWorld = function() { var t = this.world;
                t.removeBody(this.groundBody), t.off("preStep", this.preStepCallback); for (var e = 0; e < this.wheels.length; e++) { var i = this.wheels[e];
                    t.removeConstraint(i) } this.world = null }, n.prototype.addWheel = function(t) { var e = new s(this, t); return this.wheels.push(e), e }, n.prototype.update = function() { for (var t = 0; t < this.wheels.length; t++) this.wheels[t].update() }, (s.prototype = new a).setBrakeForce = function(t) { this.forwardEquation.setSlipForce(t) }, s.prototype.setSideFriction = function(t) { this.sideEquation.setSlipForce(t) }; var l = o.create(),
                c = o.create();
            s.prototype.getSpeed = function() { return this.vehicle.chassisBody.vectorToWorldFrame(c, this.localForwardVector), this.vehicle.chassisBody.getVelocityAtPoint(l, c), o.dot(l, c) }; var u = o.create();
            s.prototype.update = function() { this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.t, this.localForwardVector), o.rotate(this.sideEquation.t, this.localForwardVector, Math.PI / 2), this.vehicle.chassisBody.vectorToWorldFrame(this.sideEquation.t, this.sideEquation.t), o.rotate(this.forwardEquation.t, this.forwardEquation.t, this.steerValue), o.rotate(this.sideEquation.t, this.sideEquation.t, this.steerValue), this.vehicle.chassisBody.toWorldFrame(this.forwardEquation.contactPointB, this.localPosition), o.copy(this.sideEquation.contactPointB, this.forwardEquation.contactPointB), this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.contactPointA, this.localPosition), o.copy(this.sideEquation.contactPointA, this.forwardEquation.contactPointA), o.normalize(u, this.forwardEquation.t), o.scale(u, u, this.engineForce), this.vehicle.chassisBody.applyForce(u, this.forwardEquation.contactPointA) } }, { "../constraints/Constraint": 14, "../equations/FrictionEquation": 23, "../math/vec2": 30, "../objects/Body": 31, "../utils/Utils": 57 }], 36: [function(t, e, i) { var n = e.exports = { AABB: t("./collision/AABB"), AngleLockEquation: t("./equations/AngleLockEquation"), Body: t("./objects/Body"), Broadphase: t("./collision/Broadphase"), Capsule: t("./shapes/Capsule"), Circle: t("./shapes/Circle"), Constraint: t("./constraints/Constraint"), ContactEquation: t("./equations/ContactEquation"), ContactEquationPool: t("./utils/ContactEquationPool"), ContactMaterial: t("./material/ContactMaterial"), Convex: t("./shapes/Convex"), DistanceConstraint: t("./constraints/DistanceConstraint"), Equation: t("./equations/Equation"), EventEmitter: t("./events/EventEmitter"), FrictionEquation: t("./equations/FrictionEquation"), FrictionEquationPool: t("./utils/FrictionEquationPool"), GearConstraint: t("./constraints/GearConstraint"), GSSolver: t("./solver/GSSolver"), Heightfield: t("./shapes/Heightfield"), Line: t("./shapes/Line"), LockConstraint: t("./constraints/LockConstraint"), Material: t("./material/Material"), Narrowphase: t("./collision/Narrowphase"), NaiveBroadphase: t("./collision/NaiveBroadphase"), Particle: t("./shapes/Particle"), Plane: t("./shapes/Plane"), Pool: t("./utils/Pool"), RevoluteConstraint: t("./constraints/RevoluteConstraint"), PrismaticConstraint: t("./constraints/PrismaticConstraint"), Ray: t("./collision/Ray"), RaycastResult: t("./collision/RaycastResult"), Box: t("./shapes/Box"), RotationalVelocityEquation: t("./equations/RotationalVelocityEquation"), SAPBroadphase: t("./collision/SAPBroadphase"), Shape: t("./shapes/Shape"), Solver: t("./solver/Solver"), Spring: t("./objects/Spring"), TopDownVehicle: t("./objects/TopDownVehicle"), LinearSpring: t("./objects/LinearSpring"), RotationalSpring: t("./objects/RotationalSpring"), Utils: t("./utils/Utils"), World: t("./world/World"), vec2: t("./math/vec2"), version: t("../package.json").version };
            Object.defineProperty(n, "Rectangle", { get: function() { return console.warn("The Rectangle class has been renamed to Box."), this.Box } }) }, { "../package.json": 6, "./collision/AABB": 7, "./collision/Broadphase": 8, "./collision/NaiveBroadphase": 9, "./collision/Narrowphase": 10, "./collision/Ray": 11, "./collision/RaycastResult": 12, "./collision/SAPBroadphase": 13, "./constraints/Constraint": 14, "./constraints/DistanceConstraint": 15, "./constraints/GearConstraint": 16, "./constraints/LockConstraint": 17, "./constraints/PrismaticConstraint": 18, "./constraints/RevoluteConstraint": 19, "./equations/AngleLockEquation": 20, "./equations/ContactEquation": 21, "./equations/Equation": 22, "./equations/FrictionEquation": 23, "./equations/RotationalVelocityEquation": 25, "./events/EventEmitter": 26, "./material/ContactMaterial": 27, "./material/Material": 28, "./math/vec2": 30, "./objects/Body": 31, "./objects/LinearSpring": 32, "./objects/RotationalSpring": 33, "./objects/Spring": 34, "./objects/TopDownVehicle": 35, "./shapes/Box": 37, "./shapes/Capsule": 38, "./shapes/Circle": 39, "./shapes/Convex": 40, "./shapes/Heightfield": 41, "./shapes/Line": 42, "./shapes/Particle": 43, "./shapes/Plane": 44, "./shapes/Shape": 45, "./solver/GSSolver": 46, "./solver/Solver": 47, "./utils/ContactEquationPool": 48, "./utils/FrictionEquationPool": 49, "./utils/Pool": 55, "./utils/Utils": 57, "./world/World": 61 }], 37: [function(t, e, i) {
            function n(t) { "number" == typeof arguments[0] && "number" == typeof arguments[1] && (t = { width: arguments[0], height: arguments[1] }, console.warn("The Rectangle has been renamed to Box and its constructor signature has changed. Please use the following format: new Box({ width: 1, height: 1, ... })")), t = t || {}; var e = this.width = t.width || 1,
                    i = this.height = t.height || 1,
                    n = [s.fromValues(-e / 2, -i / 2), s.fromValues(e / 2, -i / 2), s.fromValues(e / 2, i / 2), s.fromValues(-e / 2, i / 2)],
                    r = [s.fromValues(1, 0), s.fromValues(0, 1)];
                t.vertices = n, t.axes = r, t.type = o.BOX, a.call(this, t) } var s = t("../math/vec2"),
                o = t("./Shape"),
                a = t("./Convex");
            e.exports = n, (n.prototype = new a).constructor = n, n.prototype.computeMomentOfInertia = function(t) { var e = this.width,
                    i = this.height; return t * (i * i + e * e) / 12 }, n.prototype.updateBoundingRadius = function() { var t = this.width,
                    e = this.height;
                this.boundingRadius = Math.sqrt(t * t + e * e) / 2 };
            s.create(), s.create(), s.create(), s.create();
            n.prototype.computeAABB = function(t, e, i) { t.setFromPoints(this.vertices, e, i, 0) }, n.prototype.updateArea = function() { this.area = this.width * this.height } }, { "../math/vec2": 30, "./Convex": 40, "./Shape": 45 }], 38: [function(t, e, i) {
            function n(t) { "number" == typeof arguments[0] && "number" == typeof arguments[1] && (t = { length: arguments[0], radius: arguments[1] }, console.warn("The Capsule constructor signature has changed. Please use the following format: new Capsule({ radius: 1, length: 1 })")), t = t || {}, this.length = t.length || 1, this.radius = t.radius || 1, t.type = s.CAPSULE, s.call(this, t) } var s = t("./Shape"),
                o = t("../math/vec2");
            e.exports = n, (n.prototype = new s).constructor = n, n.prototype.computeMomentOfInertia = function(t) { var e = this.radius,
                    i = this.length + e,
                    n = 2 * e; return t * (n * n + i * i) / 12 }, n.prototype.updateBoundingRadius = function() { this.boundingRadius = this.radius + this.length / 2 }, n.prototype.updateArea = function() { this.area = Math.PI * this.radius * this.radius + 2 * this.radius * this.length }; var a = o.create();
            n.prototype.computeAABB = function(t, e, i) { var n = this.radius;
                o.set(a, this.length / 2, 0), 0 !== i && o.rotate(a, a, i), o.set(t.upperBound, Math.max(a[0] + n, -a[0] + n), Math.max(a[1] + n, -a[1] + n)), o.set(t.lowerBound, Math.min(a[0] - n, -a[0] - n), Math.min(a[1] - n, -a[1] - n)), o.add(t.lowerBound, t.lowerBound, e), o.add(t.upperBound, t.upperBound, e) }; var r = o.create(),
                h = o.create(),
                l = o.create(),
                c = o.create(),
                u = o.fromValues(0, 1);
            n.prototype.raycast = function(t, e, i, n) { for (var s = e.from, a = e.to, p = (e.direction, r), d = h, m = l, g = c, f = this.length / 2, y = 0; y < 2; y++) { var v = this.radius * (2 * y - 1); if (o.set(m, -f, v), o.set(g, f, v), o.toGlobalFrame(m, m, i, n), o.toGlobalFrame(g, g, i, n), (C = o.getLineSegmentsIntersectionFraction(s, a, m, g)) >= 0 && (o.rotate(d, u, n), o.scale(d, d, 2 * y - 1), e.reportIntersection(t, C, d, -1), t.shouldStop(e))) return } for (var b = Math.pow(this.radius, 2) + Math.pow(f, 2), y = 0; y < 2; y++) { o.set(m, f * (2 * y - 1), 0), o.toGlobalFrame(m, m, i, n); var _ = Math.pow(a[0] - s[0], 2) + Math.pow(a[1] - s[1], 2),
                        S = 2 * ((a[0] - s[0]) * (s[0] - m[0]) + (a[1] - s[1]) * (s[1] - m[1])),
                        w = Math.pow(s[0] - m[0], 2) + Math.pow(s[1] - m[1], 2) - Math.pow(this.radius, 2),
                        C = Math.pow(S, 2) - 4 * _ * w; if (!(C < 0))
                        if (0 === C) { if (o.lerp(p, s, a, C), o.squaredDistance(p, i) > b && (o.sub(d, p, m), o.normalize(d, d), e.reportIntersection(t, C, d, -1), t.shouldStop(e))) return } else { var A = Math.sqrt(C),
                                T = 1 / (2 * _),
                                x = (-S - A) * T,
                                P = (-S + A) * T; if (x >= 0 && x <= 1 && (o.lerp(p, s, a, x), o.squaredDistance(p, i) > b && (o.sub(d, p, m), o.normalize(d, d), e.reportIntersection(t, x, d, -1), t.shouldStop(e)))) return; if (P >= 0 && P <= 1 && (o.lerp(p, s, a, P), o.squaredDistance(p, i) > b && (o.sub(d, p, m), o.normalize(d, d), e.reportIntersection(t, P, d, -1), t.shouldStop(e)))) return } } } }, { "../math/vec2": 30, "./Shape": 45 }], 39: [function(t, e, i) {
            function n(t) { "number" == typeof arguments[0] && (t = { radius: arguments[0] }, console.warn("The Circle constructor signature has changed. Please use the following format: new Circle({ radius: 1 })")), t = t || {}, this.radius = t.radius || 1, t.type = s.CIRCLE, s.call(this, t) } var s = t("./Shape"),
                o = t("../math/vec2");
            e.exports = n, (n.prototype = new s).constructor = n, n.prototype.computeMomentOfInertia = function(t) { var e = this.radius; return t * e * e / 2 }, n.prototype.updateBoundingRadius = function() { this.boundingRadius = this.radius }, n.prototype.updateArea = function() { this.area = Math.PI * this.radius * this.radius }, n.prototype.computeAABB = function(t, e, i) { var n = this.radius;
                o.set(t.upperBound, n, n), o.set(t.lowerBound, -n, -n), e && (o.add(t.lowerBound, t.lowerBound, e), o.add(t.upperBound, t.upperBound, e)) }; var a = o.create(),
                r = o.create();
            n.prototype.raycast = function(t, e, i, n) { var s = e.from,
                    h = e.to,
                    l = this.radius,
                    c = Math.pow(h[0] - s[0], 2) + Math.pow(h[1] - s[1], 2),
                    u = 2 * ((h[0] - s[0]) * (s[0] - i[0]) + (h[1] - s[1]) * (s[1] - i[1])),
                    p = Math.pow(s[0] - i[0], 2) + Math.pow(s[1] - i[1], 2) - Math.pow(l, 2),
                    d = Math.pow(u, 2) - 4 * c * p,
                    m = a,
                    g = r; if (!(d < 0))
                    if (0 === d) o.lerp(m, s, h, d), o.sub(g, m, i), o.normalize(g, g), e.reportIntersection(t, d, g, -1);
                    else { var f = Math.sqrt(d),
                            y = 1 / (2 * c),
                            v = (-u - f) * y,
                            b = (-u + f) * y; if (v >= 0 && v <= 1 && (o.lerp(m, s, h, v), o.sub(g, m, i), o.normalize(g, g), e.reportIntersection(t, v, g, -1), t.shouldStop(e))) return;
                        b >= 0 && b <= 1 && (o.lerp(m, s, h, b), o.sub(g, m, i), o.normalize(g, g), e.reportIntersection(t, b, g, -1)) } } }, { "../math/vec2": 30, "./Shape": 45 }], 40: [function(t, e, i) {
            function n(t) { Array.isArray(arguments[0]) && (t = { vertices: arguments[0], axes: arguments[1] }, console.warn("The Convex constructor signature has changed. Please use the following format: new Convex({ vertices: [...], ... })")), t = t || {}, this.vertices = []; for (var e = void 0 !== t.vertices ? t.vertices : [], i = 0; i < e.length; i++) { var n = o.create();
                    o.copy(n, e[i]), this.vertices.push(n) } if (this.axes = [], t.axes)
                    for (i = 0; i < t.axes.length; i++) { var a = o.create();
                        o.copy(a, t.axes[i]), this.axes.push(a) } else
                        for (i = 0; i < this.vertices.length; i++) { var r = this.vertices[i],
                                h = this.vertices[(i + 1) % this.vertices.length],
                                l = o.create();
                            o.sub(l, h, r), o.rotate90cw(l, l), o.normalize(l, l), this.axes.push(l) }
                if (this.centerOfMass = o.fromValues(0, 0), this.triangles = [], this.vertices.length && (this.updateTriangles(), this.updateCenterOfMass()), this.boundingRadius = 0, t.type = s.CONVEX, s.call(this, t), this.updateBoundingRadius(), this.updateArea(), this.area < 0) throw new Error("Convex vertices must be given in conter-clockwise winding.") } var s = t("./Shape"),
                o = t("../math/vec2"),
                a = t("../math/polyk");
            t("poly-decomp");
            e.exports = n, (n.prototype = new s).constructor = n; var r = o.create(),
                h = o.create();
            n.prototype.projectOntoLocalAxis = function(t, e) { for (var i, n, s = null, a = null, t = r, h = 0; h < this.vertices.length; h++) i = this.vertices[h], n = o.dot(i, t), (null === s || n > s) && (s = n), (null === a || n < a) && (a = n); if (a > s) { var l = a;
                    a = s, s = l } o.set(e, a, s) }, n.prototype.projectOntoWorldAxis = function(t, e, i, n) { var s = h;
                this.projectOntoLocalAxis(t, n), 0 !== i ? o.rotate(s, t, i) : s = t; var a = o.dot(e, s);
                o.set(n, n[0] + a, n[1] + a) }, n.prototype.updateTriangles = function() { this.triangles.length = 0; for (var t = [], e = 0; e < this.vertices.length; e++) { var i = this.vertices[e];
                    t.push(i[0], i[1]) } for (var n = a.Triangulate(t), e = 0; e < n.length; e += 3) { var s = n[e],
                        o = n[e + 1],
                        r = n[e + 2];
                    this.triangles.push([s, o, r]) } }; var l = o.create(),
                c = o.create(),
                u = o.create(),
                p = o.create(),
                d = o.create();
            o.create(), o.create(), o.create(), o.create();
            n.prototype.updateCenterOfMass = function() { var t = this.triangles,
                    e = this.vertices,
                    i = this.centerOfMass,
                    s = l,
                    a = u,
                    r = p,
                    h = d,
                    m = c;
                o.set(i, 0, 0); for (var g = 0, f = 0; f !== t.length; f++) { var y = t[f],
                        a = e[y[0]],
                        r = e[y[1]],
                        h = e[y[2]];
                    o.centroid(s, a, r, h); var v = n.triangleArea(a, r, h);
                    g += v, o.scale(m, s, v), o.add(i, i, m) } o.scale(i, i, 1 / g) }, n.prototype.computeMomentOfInertia = function(t) { for (var e = 0, i = 0, n = this.vertices.length, s = n - 1, a = 0; a < n; s = a, a++) { var r = this.vertices[s],
                        h = this.vertices[a],
                        l = Math.abs(o.crossLength(r, h));
                    e += l * (o.dot(h, h) + o.dot(h, r) + o.dot(r, r)), i += l } return t / 6 * (e / i) }, n.prototype.updateBoundingRadius = function() { for (var t = this.vertices, e = 0, i = 0; i !== t.length; i++) { var n = o.squaredLength(t[i]);
                    n > e && (e = n) } this.boundingRadius = Math.sqrt(e) }, n.triangleArea = function(t, e, i) { return .5 * ((e[0] - t[0]) * (i[1] - t[1]) - (i[0] - t[0]) * (e[1] - t[1])) }, n.prototype.updateArea = function() { this.updateTriangles(), this.area = 0; for (var t = this.triangles, e = this.vertices, i = 0; i !== t.length; i++) { var s = t[i],
                        o = e[s[0]],
                        a = e[s[1]],
                        r = e[s[2]],
                        h = n.triangleArea(o, a, r);
                    this.area += h } }, n.prototype.computeAABB = function(t, e, i) { t.setFromPoints(this.vertices, e, i, 0) }; var m = o.create(),
                g = o.create(),
                f = o.create();
            n.prototype.raycast = function(t, e, i, n) { var s = m,
                    a = g,
                    r = f,
                    h = this.vertices;
                o.toLocalFrame(s, e.from, i, n), o.toLocalFrame(a, e.to, i, n); for (var l = h.length, c = 0; c < l && !t.shouldStop(e); c++) { var u = h[c],
                        p = h[(c + 1) % l],
                        d = o.getLineSegmentsIntersectionFraction(s, a, u, p);
                    d >= 0 && (o.sub(r, p, u), o.rotate(r, r, -Math.PI / 2 + n), o.normalize(r, r), e.reportIntersection(t, d, r, c)) } } }, { "../math/polyk": 29, "../math/vec2": 30, "./Shape": 45, "poly-decomp": 5 }], 41: [function(t, e, i) {
            function n(t) { if (Array.isArray(arguments[0])) { if (t = { heights: arguments[0] }, "object" == typeof arguments[1])
                        for (var e in arguments[1]) t[e] = arguments[1][e];
                    console.warn("The Heightfield constructor signature has changed. Please use the following format: new Heightfield({ heights: [...], ... })") } t = t || {}, this.heights = t.heights ? t.heights.slice(0) : [], this.maxValue = t.maxValue || null, this.minValue = t.minValue || null, this.elementWidth = t.elementWidth || .1, void 0 !== t.maxValue && void 0 !== t.minValue || this.updateMaxMinValues(), t.type = s.HEIGHTFIELD, s.call(this, t) } var s = t("./Shape"),
                o = t("../math/vec2");
            t("../utils/Utils");
            e.exports = n, (n.prototype = new s).constructor = n, n.prototype.updateMaxMinValues = function() { for (var t = this.heights, e = t[0], i = t[0], n = 0; n !== t.length; n++) { var s = t[n];
                    s > e && (e = s), s < i && (i = s) } this.maxValue = e, this.minValue = i }, n.prototype.computeMomentOfInertia = function(t) { return Number.MAX_VALUE }, n.prototype.updateBoundingRadius = function() { this.boundingRadius = Number.MAX_VALUE }, n.prototype.updateArea = function() { for (var t = this.heights, e = 0, i = 0; i < t.length - 1; i++) e += (t[i] + t[i + 1]) / 2 * this.elementWidth;
                this.area = e }; var a = [o.create(), o.create(), o.create(), o.create()];
            n.prototype.computeAABB = function(t, e, i) { o.set(a[0], 0, this.maxValue), o.set(a[1], this.elementWidth * this.heights.length, this.maxValue), o.set(a[2], this.elementWidth * this.heights.length, this.minValue), o.set(a[3], 0, this.minValue), t.setFromPoints(a, e, i) }, n.prototype.getLineSegment = function(t, e, i) { var n = this.heights,
                    s = this.elementWidth;
                o.set(t, i * s, n[i]), o.set(e, (i + 1) * s, n[i + 1]) }, n.prototype.getSegmentIndex = function(t) { return Math.floor(t[0] / this.elementWidth) }, n.prototype.getClampedSegmentIndex = function(t) { var e = this.getSegmentIndex(t); return e = Math.min(this.heights.length, Math.max(e, 0)) };
            o.create(); var r = o.create(),
                h = o.create(),
                l = o.create(),
                c = o.create(),
                u = o.create();
            o.fromValues(0, 1);
            n.prototype.raycast = function(t, e, i, n) { var s = e.from,
                    a = e.to,
                    p = (e.direction, r),
                    d = h,
                    m = l,
                    g = c,
                    f = u;
                o.toLocalFrame(g, s, i, n), o.toLocalFrame(f, a, i, n); var y = this.getClampedSegmentIndex(g),
                    v = this.getClampedSegmentIndex(f); if (y > v) { var b = y;
                    y = v, v = b } for (var _ = 0; _ < this.heights.length - 1; _++) { this.getLineSegment(d, m, _); var S = o.getLineSegmentsIntersectionFraction(g, f, d, m); if (S >= 0 && (o.sub(p, m, d), o.rotate(p, p, n + Math.PI / 2), o.normalize(p, p), e.reportIntersection(t, S, p, -1), t.shouldStop(e))) return } } }, { "../math/vec2": 30, "../utils/Utils": 57, "./Shape": 45 }], 42: [function(t, e, i) {
            function n(t) { "number" == typeof arguments[0] && (t = { length: arguments[0] }, console.warn("The Line constructor signature has changed. Please use the following format: new Line({ length: 1, ... })")), t = t || {}, this.length = t.length || 1, t.type = s.LINE, s.call(this, t) } var s = t("./Shape"),
                o = t("../math/vec2");
            e.exports = n, (n.prototype = new s).constructor = n, n.prototype.computeMomentOfInertia = function(t) { return t * Math.pow(this.length, 2) / 12 }, n.prototype.updateBoundingRadius = function() { this.boundingRadius = this.length / 2 }; var a = [o.create(), o.create()];
            n.prototype.computeAABB = function(t, e, i) { var n = this.length / 2;
                o.set(a[0], -n, 0), o.set(a[1], n, 0), t.setFromPoints(a, e, i, 0) };
            o.create(); var r = o.create(),
                h = o.create(),
                l = o.create(),
                c = o.fromValues(0, 1);
            n.prototype.raycast = function(t, e, i, n) { var s = e.from,
                    a = e.to,
                    u = h,
                    p = l,
                    d = this.length / 2;
                o.set(u, -d, 0), o.set(p, d, 0), o.toGlobalFrame(u, u, i, n), o.toGlobalFrame(p, p, i, n); var m = o.getLineSegmentsIntersectionFraction(u, p, s, a); if (m >= 0) { var g = r;
                    o.rotate(g, c, n), e.reportIntersection(t, m, g, -1) } } }, { "../math/vec2": 30, "./Shape": 45 }], 43: [function(t, e, i) {
            function n(t) {
                (t = t || {}).type = s.PARTICLE, s.call(this, t) } var s = t("./Shape"),
                o = t("../math/vec2");
            e.exports = n, (n.prototype = new s).constructor = n, n.prototype.computeMomentOfInertia = function(t) { return 0 }, n.prototype.updateBoundingRadius = function() { this.boundingRadius = 0 }, n.prototype.computeAABB = function(t, e, i) { o.copy(t.lowerBound, e), o.copy(t.upperBound, e) } }, { "../math/vec2": 30, "./Shape": 45 }], 44: [function(t, e, i) {
            function n(t) {
                (t = t || {}).type = s.PLANE, s.call(this, t) } var s = t("./Shape"),
                o = t("../math/vec2");
            t("../utils/Utils");
            e.exports = n, (n.prototype = new s).constructor = n, n.prototype.computeMomentOfInertia = function(t) { return 0 }, n.prototype.updateBoundingRadius = function() { this.boundingRadius = Number.MAX_VALUE }, n.prototype.computeAABB = function(t, e, i) { var n = i % (2 * Math.PI),
                    s = o.set,
                    a = Number.MAX_VALUE,
                    r = t.lowerBound,
                    h = t.upperBound;
                0 === n ? (s(r, -a, -a), s(h, a, 0)) : n === Math.PI / 2 ? (s(r, 0, -a), s(h, a, a)) : n === Math.PI ? (s(r, -a, 0), s(h, a, a)) : n === 3 * Math.PI / 2 ? (s(r, -a, -a), s(h, 0, a)) : (s(r, -a, -a), s(h, a, a)), o.add(r, r, e), o.add(h, h, e) }, n.prototype.updateArea = function() { this.area = Number.MAX_VALUE }; var a = o.create(),
                r = (o.create(), o.create(), o.create()),
                h = o.create();
            n.prototype.raycast = function(t, e, i, n) { var s = e.from,
                    l = e.to,
                    c = e.direction,
                    u = a,
                    p = r,
                    d = h;
                o.set(p, 0, 1), o.rotate(p, p, n), o.sub(d, s, i); var m = o.dot(d, p); if (o.sub(d, l, i), !(m * o.dot(d, p) > 0 || o.squaredDistance(s, l) < m * m)) { var g = o.dot(p, c);
                    o.sub(u, s, i); var f = -o.dot(p, u) / g / e.length;
                    e.reportIntersection(t, f, p, -1) } } }, { "../math/vec2": 30, "../utils/Utils": 57, "./Shape": 45 }], 45: [function(t, e, i) {
            function n(t) { t = t || {}, this.body = null, this.position = s.fromValues(0, 0), t.position && s.copy(this.position, t.position), this.angle = t.angle || 0, this.type = t.type || 0, this.id = n.idCounter++, this.boundingRadius = 0, this.collisionGroup = void 0 !== t.collisionGroup ? t.collisionGroup : 1, this.collisionResponse = void 0 === t.collisionResponse || t.collisionResponse, this.collisionMask = void 0 !== t.collisionMask ? t.collisionMask : 1, this.material = t.material || null, this.area = 0, this.sensor = void 0 !== t.sensor && t.sensor, this.type && this.updateBoundingRadius(), this.updateArea() } e.exports = n; var s = t("../math/vec2");
            n.idCounter = 0, n.CIRCLE = 1, n.PARTICLE = 2, n.PLANE = 4, n.CONVEX = 8, n.LINE = 16, n.BOX = 32, Object.defineProperty(n, "RECTANGLE", { get: function() { return console.warn("Shape.RECTANGLE is deprecated, use Shape.BOX instead."), n.BOX } }), n.CAPSULE = 64, n.HEIGHTFIELD = 128, n.prototype.computeMomentOfInertia = function(t) {}, n.prototype.updateBoundingRadius = function() {}, n.prototype.updateArea = function() {}, n.prototype.computeAABB = function(t, e, i) {}, n.prototype.raycast = function(t, e, i, n) {} }, { "../math/vec2": 30 }], 46: [function(t, e, i) {
            function n(t) { a.call(this, t, a.GS), t = t || {}, this.iterations = t.iterations || 10, this.tolerance = t.tolerance || 1e-7, this.arrayStep = 30, this.lambda = new r.ARRAY_TYPE(this.arrayStep), this.Bs = new r.ARRAY_TYPE(this.arrayStep), this.invCs = new r.ARRAY_TYPE(this.arrayStep), this.useZeroRHS = !1, this.frictionIterations = 0, this.usedIterations = 0 }

            function s(t) { for (var e = t.length; e--;) t[e] = 0 } var o = t("../math/vec2"),
                a = t("./Solver"),
                r = t("../utils/Utils"),
                h = t("../equations/FrictionEquation");
            e.exports = n, (n.prototype = new a).constructor = n, n.prototype.solve = function(t, e) { this.sortEquations(); var i = 0,
                    a = this.iterations,
                    l = this.frictionIterations,
                    c = this.equations,
                    u = c.length,
                    p = Math.pow(this.tolerance * u, 2),
                    d = e.bodies,
                    m = e.bodies.length,
                    g = (o.add, o.set, this.useZeroRHS),
                    f = this.lambda; if (this.usedIterations = 0, u)
                    for (b = 0; b !== m; b++)(C = d[b]).updateSolveMassProperties();
                f.length < u && (f = this.lambda = new r.ARRAY_TYPE(u + this.arrayStep), this.Bs = new r.ARRAY_TYPE(u + this.arrayStep), this.invCs = new r.ARRAY_TYPE(u + this.arrayStep)), s(f); for (var y = this.invCs, v = this.Bs, f = this.lambda, b = 0; b !== c.length; b++)((_ = c[b]).timeStep !== t || _.needsUpdate) && (_.timeStep = t, _.update()), v[b] = _.computeB(_.a, _.b, t), y[b] = _.computeInvC(_.epsilon); var _, S, w; if (0 !== u) { for (b = 0; b !== m; b++) { var C = d[b];
                        C.resetConstraintVelocity() } if (l) { for (i = 0; i !== l; i++) { for (S = 0, w = 0; w !== u; w++) { _ = c[w];
                                P = n.iterateEquation(w, _, _.epsilon, v, y, f, g, t, i);
                                S += Math.abs(P) } if (this.usedIterations++, S * S <= p) break } for (n.updateMultipliers(c, f, 1 / t), w = 0; w !== u; w++) { var A = c[w]; if (A instanceof h) { for (var T = 0, x = 0; x !== A.contactEquations.length; x++) T += A.contactEquations[x].multiplier;
                                T *= A.frictionCoefficient / A.contactEquations.length, A.maxForce = T, A.minForce = -T } } } for (i = 0; i !== a; i++) { for (S = 0, w = 0; w !== u; w++) { _ = c[w]; var P = n.iterateEquation(w, _, _.epsilon, v, y, f, g, t, i);
                            S += Math.abs(P) } if (this.usedIterations++, S * S <= p) break } for (b = 0; b !== m; b++) d[b].addConstraintVelocity();
                    n.updateMultipliers(c, f, 1 / t) } }, n.updateMultipliers = function(t, e, i) { for (var n = t.length; n--;) t[n].multiplier = e[n] * i }, n.iterateEquation = function(t, e, i, n, s, o, a, r, h) { var l = n[t],
                    c = s[t],
                    u = o[t],
                    p = e.computeGWlambda(),
                    d = e.maxForce,
                    m = e.minForce;
                a && (l = 0); var g = c * (l - p - i * u),
                    f = u + g; return f < m * r ? g = m * r - u : f > d * r && (g = d * r - u), o[t] += g, e.addToWlambda(g), g } }, { "../equations/FrictionEquation": 23, "../math/vec2": 30, "../utils/Utils": 57, "./Solver": 47 }], 47: [function(t, e, i) {
            function n(t, e) { t = t || {}, s.call(this), this.type = e, this.equations = [], this.equationSortFunction = t.equationSortFunction || !1 } t("../utils/Utils"); var s = t("../events/EventEmitter");
            e.exports = n, (n.prototype = new s).constructor = n, n.prototype.solve = function(t, e) { throw new Error("Solver.solve should be implemented by subclasses!") }; var o = { bodies: [] };
            n.prototype.solveIsland = function(t, e) { this.removeAllEquations(), e.equations.length && (this.addEquations(e.equations), o.bodies.length = 0, e.getBodies(o.bodies), o.bodies.length && this.solve(t, o)) }, n.prototype.sortEquations = function() { this.equationSortFunction && this.equations.sort(this.equationSortFunction) }, n.prototype.addEquation = function(t) { t.enabled && this.equations.push(t) }, n.prototype.addEquations = function(t) { for (var e = 0, i = t.length; e !== i; e++) { var n = t[e];
                    n.enabled && this.equations.push(n) } }, n.prototype.removeEquation = function(t) { var e = this.equations.indexOf(t); - 1 !== e && this.equations.splice(e, 1) }, n.prototype.removeAllEquations = function() { this.equations.length = 0 }, n.GS = 1, n.ISLAND = 2 }, { "../events/EventEmitter": 26, "../utils/Utils": 57 }], 48: [function(t, e, i) {
            function n() { o.apply(this, arguments) } var s = t("../equations/ContactEquation"),
                o = t("./Pool");
            e.exports = n, (n.prototype = new o).constructor = n, n.prototype.create = function() { return new s }, n.prototype.destroy = function(t) { return t.bodyA = t.bodyB = null, this } }, { "../equations/ContactEquation": 21, "./Pool": 55 }], 49: [function(t, e, i) {
            function n() { o.apply(this, arguments) } var s = t("../equations/FrictionEquation"),
                o = t("./Pool");
            e.exports = n, (n.prototype = new o).constructor = n, n.prototype.create = function() { return new s }, n.prototype.destroy = function(t) { return t.bodyA = t.bodyB = null, this } }, { "../equations/FrictionEquation": 23, "./Pool": 55 }], 50: [function(t, e, i) {
            function n() { o.apply(this, arguments) } var s = t("../world/IslandNode"),
                o = t("./Pool");
            e.exports = n, (n.prototype = new o).constructor = n, n.prototype.create = function() { return new s }, n.prototype.destroy = function(t) { return t.reset(), this } }, { "../world/IslandNode": 60, "./Pool": 55 }], 51: [function(t, e, i) {
            function n() { o.apply(this, arguments) } var s = t("../world/Island"),
                o = t("./Pool");
            e.exports = n, (n.prototype = new o).constructor = n, n.prototype.create = function() { return new s }, n.prototype.destroy = function(t) { return t.reset(), this } }, { "../world/Island": 58, "./Pool": 55 }], 52: [function(t, e, i) {
            function n() { this.overlappingShapesLastState = new s, this.overlappingShapesCurrentState = new s, this.recordPool = new o({ size: 16 }), this.tmpDict = new s, this.tmpArray1 = [] } var s = t("./TupleDictionary"),
                o = (t("./OverlapKeeperRecord"), t("./OverlapKeeperRecordPool"));
            t("./Utils");
            e.exports = n, n.prototype.tick = function() { for (var t = this.overlappingShapesLastState, e = this.overlappingShapesCurrentState, i = t.keys.length; i--;) { var n = t.keys[i],
                        s = t.getByKey(n);
                    e.getByKey(n);
                    s && this.recordPool.release(s) } t.reset(), t.copy(e), e.reset() }, n.prototype.setOverlapping = function(t, e, i, n) { this.overlappingShapesLastState; var s = this.overlappingShapesCurrentState; if (!s.get(e.id, n.id)) { var o = this.recordPool.get();
                    o.set(t, e, i, n), s.set(e.id, n.id, o) } }, n.prototype.getNewOverlaps = function(t) { return this.getDiff(this.overlappingShapesLastState, this.overlappingShapesCurrentState, t) }, n.prototype.getEndOverlaps = function(t) { return this.getDiff(this.overlappingShapesCurrentState, this.overlappingShapesLastState, t) }, n.prototype.bodiesAreOverlapping = function(t, e) { for (var i = this.overlappingShapesCurrentState, n = i.keys.length; n--;) { var s = i.keys[n],
                        o = i.data[s]; if (o.bodyA === t && o.bodyB === e || o.bodyA === e && o.bodyB === t) return !0 } return !1 }, n.prototype.getDiff = function(t, e, i) { var n = t,
                    s = e;
                (i = i || []).length = 0; for (var o = s.keys.length; o--;) { var a = s.keys[o],
                        r = s.data[a]; if (!r) throw new Error("Key " + a + " had no data!");
                    n.data[a] || i.push(r) } return i }, n.prototype.isNewOverlap = function(t, e) { var i = 0 | t.id,
                    n = 0 | e.id,
                    s = this.overlappingShapesLastState,
                    o = this.overlappingShapesCurrentState; return !s.get(i, n) && !!o.get(i, n) }, n.prototype.getNewBodyOverlaps = function(t) { this.tmpArray1.length = 0; var e = this.getNewOverlaps(this.tmpArray1); return this.getBodyDiff(e, t) }, n.prototype.getEndBodyOverlaps = function(t) { this.tmpArray1.length = 0; var e = this.getEndOverlaps(this.tmpArray1); return this.getBodyDiff(e, t) }, n.prototype.getBodyDiff = function(t, e) { e = e || []; for (var i = this.tmpDict, n = t.length; n--;) { var s = t[n];
                    i.set(0 | s.bodyA.id, 0 | s.bodyB.id, s) } for (n = i.keys.length; n--;)(s = i.getByKey(i.keys[n])) && e.push(s.bodyA, s.bodyB); return i.reset(), e } }, { "./OverlapKeeperRecord": 53, "./OverlapKeeperRecordPool": 54, "./TupleDictionary": 56, "./Utils": 57 }], 53: [function(t, e, i) {
            function n(t, e, i, n) { this.shapeA = e, this.shapeB = n, this.bodyA = t, this.bodyB = i } e.exports = n, n.prototype.set = function(t, e, i, s) { n.call(this, t, e, i, s) } }, {}], 54: [function(t, e, i) {
            function n() { o.apply(this, arguments) } var s = t("./OverlapKeeperRecord"),
                o = t("./Pool");
            e.exports = n, (n.prototype = new o).constructor = n, n.prototype.create = function() { return new s }, n.prototype.destroy = function(t) { return t.bodyA = t.bodyB = t.shapeA = t.shapeB = null, this } }, { "./OverlapKeeperRecord": 53, "./Pool": 55 }], 55: [function(t, e, i) {
            function n(t) { t = t || {}, this.objects = [], void 0 !== t.size && this.resize(t.size) } e.exports = n, n.prototype.resize = function(t) { for (var e = this.objects; e.length > t;) e.pop(); for (; e.length < t;) e.push(this.create()); return this }, n.prototype.get = function() { var t = this.objects; return t.length ? t.pop() : this.create() }, n.prototype.release = function(t) { return this.destroy(t), this.objects.push(t), this } }, {}], 56: [function(t, e, i) {
            function n() { this.data = {}, this.keys = [] } var s = t("./Utils");
            e.exports = n, n.prototype.getKey = function(t, e) { return t |= 0, e |= 0, (0 | t) == (0 | e) ? -1 : 0 | ((0 | t) > (0 | e) ? t << 16 | 65535 & e : e << 16 | 65535 & t) }, n.prototype.getByKey = function(t) { return t |= 0, this.data[t] }, n.prototype.get = function(t, e) { return this.data[this.getKey(t, e)] }, n.prototype.set = function(t, e, i) { if (!i) throw new Error("No data!"); var n = this.getKey(t, e); return this.data[n] || this.keys.push(n), this.data[n] = i, n }, n.prototype.reset = function() { for (var t = this.data, e = this.keys, i = e.length; i--;) delete t[e[i]];
                e.length = 0 }, n.prototype.copy = function(t) { this.reset(), s.appendArray(this.keys, t.keys); for (var e = t.keys.length; e--;) { var i = t.keys[e];
                    this.data[i] = t.data[i] } } }, { "./Utils": 57 }], 57: [function(t, e, i) {
            function n() {} e.exports = n, n.appendArray = function(t, e) { if (e.length < 15e4) t.push.apply(t, e);
                else
                    for (var i = 0, n = e.length; i !== n; ++i) t.push(e[i]) }, n.splice = function(t, e, i) { i = i || 1; for (var n = e, s = t.length - i; n < s; n++) t[n] = t[n + i];
                t.length = s }, n.ARRAY_TYPE = "undefined" != typeof P2_ARRAY_TYPE ? P2_ARRAY_TYPE : "undefined" != typeof Float32Array ? Float32Array : Array, n.extend = function(t, e) { for (var i in e) t[i] = e[i] }, n.defaults = function(t, e) { t = t || {}; for (var i in e) i in t || (t[i] = e[i]); return t } }, {}], 58: [function(t, e, i) {
            function n() { this.equations = [], this.bodies = [] } var s = t("../objects/Body");
            e.exports = n, n.prototype.reset = function() { this.equations.length = this.bodies.length = 0 }; var o = [];
            n.prototype.getBodies = function(t) { var e = t || [],
                    i = this.equations;
                o.length = 0; for (var n = 0; n !== i.length; n++) { var s = i[n]; - 1 === o.indexOf(s.bodyA.id) && (e.push(s.bodyA), o.push(s.bodyA.id)), -1 === o.indexOf(s.bodyB.id) && (e.push(s.bodyB), o.push(s.bodyB.id)) } return e }, n.prototype.wantsToSleep = function() { for (var t = 0; t < this.bodies.length; t++) { var e = this.bodies[t]; if (e.type === s.DYNAMIC && !e.wantsToSleep) return !1 } return !0 }, n.prototype.sleep = function() { for (var t = 0; t < this.bodies.length; t++) this.bodies[t].sleep(); return !0 } }, { "../objects/Body": 31 }], 59: [function(t, e, i) {
            function n(t) { this.nodePool = new s({ size: 16 }), this.islandPool = new o({ size: 8 }), this.equations = [], this.islands = [], this.nodes = [], this.queue = [] } t("../math/vec2"), t("./Island"), t("./IslandNode"); var s = t("./../utils/IslandNodePool"),
                o = t("./../utils/IslandPool"),
                a = t("../objects/Body");
            e.exports = n, n.getUnvisitedNode = function(t) { for (var e = t.length, i = 0; i !== e; i++) { var n = t[i]; if (!n.visited && n.body.type === a.DYNAMIC) return n } return !1 }, n.prototype.visit = function(t, e, i) { e.push(t.body); for (var n = t.equations.length, s = 0; s !== n; s++) { var o = t.equations[s]; - 1 === i.indexOf(o) && i.push(o) } }, n.prototype.bfs = function(t, e, i) { var s = this.queue; for (s.length = 0, s.push(t), t.visited = !0, this.visit(t, e, i); s.length;)
                    for (var o, r = s.pop(); o = n.getUnvisitedNode(r.neighbors);) o.visited = !0, this.visit(o, e, i), o.body.type === a.DYNAMIC && s.push(o) }, n.prototype.split = function(t) { for (var e = t.bodies, i = this.nodes, s = this.equations; i.length;) this.nodePool.release(i.pop()); for (h = 0; h !== e.length; h++) { var o = this.nodePool.get();
                    o.body = e[h], i.push(o) } for (var a = 0; a !== s.length; a++) { var r = s[a],
                        h = e.indexOf(r.bodyA),
                        l = e.indexOf(r.bodyB),
                        c = i[h],
                        u = i[l];
                    c.neighbors.push(u), u.neighbors.push(c), c.equations.push(r), u.equations.push(r) } for (var p = this.islands, h = 0; h < p.length; h++) this.islandPool.release(p[h]);
                p.length = 0; for (var d; d = n.getUnvisitedNode(i);) { var m = this.islandPool.get();
                    this.bfs(d, m.bodies, m.equations), p.push(m) } return p } }, { "../math/vec2": 30, "../objects/Body": 31, "./../utils/IslandNodePool": 50, "./../utils/IslandPool": 51, "./Island": 58, "./IslandNode": 60 }], 60: [function(t, e, i) {
            function n(t) { this.body = t, this.neighbors = [], this.equations = [], this.visited = !1 } e.exports = n, n.prototype.reset = function() { this.equations.length = 0, this.neighbors.length = 0, this.visited = !1, this.body = null } }, {}], 61: [function(t, e, i) {
            function n(t) { u.apply(this), t = t || {}, this.springs = [], this.bodies = [], this.disabledBodyCollisionPairs = [], this.solver = t.solver || new s, this.narrowphase = new y(this), this.islandManager = new _, this.gravity = o.fromValues(0, -9.78), t.gravity && o.copy(this.gravity, t.gravity), this.frictionGravity = o.length(this.gravity) || 10, this.useWorldGravityAsFrictionGravity = !0, this.useFrictionGravityOnZeroGravity = !0, this.broadphase = t.broadphase || new f, this.broadphase.setWorld(this), this.constraints = [], this.defaultMaterial = new d, this.defaultContactMaterial = new m(this.defaultMaterial, this.defaultMaterial), this.lastTimeStep = 1 / 60, this.applySpringForces = !0, this.applyDamping = !0, this.applyGravity = !0, this.solveConstraints = !0, this.contactMaterials = [], this.time = 0, this.accumulator = 0, this.stepping = !1, this.bodiesToBeRemoved = [], this.islandSplit = void 0 === t.islandSplit || !!t.islandSplit, this.emitImpactEvent = !0, this._constraintIdCounter = 0, this._bodyIdCounter = 0, this.postStepEvent = { type: "postStep" }, this.addBodyEvent = { type: "addBody", body: null }, this.removeBodyEvent = { type: "removeBody", body: null }, this.addSpringEvent = { type: "addSpring", spring: null }, this.impactEvent = { type: "impact", bodyA: null, bodyB: null, shapeA: null, shapeB: null, contactEquation: null }, this.postBroadphaseEvent = { type: "postBroadphase", pairs: null }, this.sleepMode = n.NO_SLEEPING, this.beginContactEvent = { type: "beginContact", shapeA: null, shapeB: null, bodyA: null, bodyB: null, contactEquations: [] }, this.endContactEvent = { type: "endContact", shapeA: null, shapeB: null, bodyA: null, bodyB: null }, this.preSolveEvent = { type: "preSolve", contactEquations: null, frictionEquations: null }, this.overlappingShapesLastState = { keys: [] }, this.overlappingShapesCurrentState = { keys: [] }, this.overlapKeeper = new b } var s = t("../solver/GSSolver"),
                o = (t("../solver/Solver"), t("../collision/Ray"), t("../math/vec2")),
                a = t("../shapes/Circle"),
                r = t("../shapes/Convex"),
                h = (t("../shapes/Line"), t("../shapes/Plane")),
                l = t("../shapes/Capsule"),
                c = t("../shapes/Particle"),
                u = t("../events/EventEmitter"),
                p = t("../objects/Body"),
                d = (t("../shapes/Shape"), t("../objects/LinearSpring"), t("../material/Material")),
                m = t("../material/ContactMaterial"),
                g = (t("../constraints/DistanceConstraint"), t("../constraints/Constraint"), t("../constraints/LockConstraint"), t("../constraints/RevoluteConstraint"), t("../constraints/PrismaticConstraint"), t("../constraints/GearConstraint"), t("../../package.json"), t("../collision/Broadphase"), t("../collision/AABB")),
                f = t("../collision/SAPBroadphase"),
                y = t("../collision/Narrowphase"),
                v = t("../utils/Utils"),
                b = t("../utils/OverlapKeeper"),
                _ = t("./IslandManager");
            t("../objects/RotationalSpring");
            e.exports = n, n.prototype = new Object(u.prototype), n.prototype.constructor = n, n.NO_SLEEPING = 1, n.BODY_SLEEPING = 2, n.ISLAND_SLEEPING = 4, n.prototype.addConstraint = function(t) { this.constraints.push(t) }, n.prototype.addContactMaterial = function(t) { this.contactMaterials.push(t) }, n.prototype.removeContactMaterial = function(t) { var e = this.contactMaterials.indexOf(t); - 1 !== e && v.splice(this.contactMaterials, e, 1) }, n.prototype.getContactMaterial = function(t, e) { for (var i = this.contactMaterials, n = 0, s = i.length; n !== s; n++) { var o = i[n]; if (o.materialA.id === t.id && o.materialB.id === e.id || o.materialA.id === e.id && o.materialB.id === t.id) return o } return !1 }, n.prototype.removeConstraint = function(t) { var e = this.constraints.indexOf(t); - 1 !== e && v.splice(this.constraints, e, 1) };
            o.create(), o.create(), o.create(), o.create(), o.create(), o.create(); var S = o.create(),
                w = o.fromValues(0, 0),
                C = o.fromValues(0, 0);
            o.fromValues(0, 0), o.fromValues(0, 0);
            n.prototype.step = function(t, e, i) { if (i = i || 10, 0 === (e = e || 0)) this.internalStep(t), this.time += t;
                else { this.accumulator += e; for (var n = 0; this.accumulator >= t && n < i;) this.internalStep(t), this.time += t, this.accumulator -= t, n++; for (var s = this.accumulator % t / t, a = 0; a !== this.bodies.length; a++) { var r = this.bodies[a];
                        o.lerp(r.interpolatedPosition, r.previousPosition, r.position, s), r.interpolatedAngle = r.previousAngle + s * (r.angle - r.previousAngle) } } }; var A = [];
            n.prototype.internalStep = function(t) { this.stepping = !0; var e = this.springs.length,
                    i = this.springs,
                    s = this.bodies,
                    a = this.gravity,
                    r = this.solver,
                    h = this.bodies.length,
                    l = this.broadphase,
                    c = this.narrowphase,
                    u = this.constraints,
                    d = S,
                    m = (o.scale, o.add),
                    g = (o.rotate, this.islandManager); if (this.overlapKeeper.tick(), this.lastTimeStep = t, this.useWorldGravityAsFrictionGravity) { var f = o.length(this.gravity);
                    0 === f && this.useFrictionGravityOnZeroGravity || (this.frictionGravity = f) } if (this.applyGravity)
                    for (C = 0; C !== h; C++) { var y = (b = s[C]).force;
                        b.type === p.DYNAMIC && b.sleepState !== p.SLEEPING && (o.scale(d, a, b.mass * b.gravityScale), m(y, y, d)) }
                if (this.applySpringForces)
                    for (C = 0; C !== e; C++) i[C].applyForce(); if (this.applyDamping)
                    for (C = 0; C !== h; C++) { var b = s[C];
                        b.type === p.DYNAMIC && b.applyDamping(t) }
                for (var _ = l.getCollisionPairs(this), w = this.disabledBodyCollisionPairs, C = w.length - 2; C >= 0; C -= 2)
                    for (x = _.length - 2; x >= 0; x -= 2)(w[C] === _[x] && w[C + 1] === _[x + 1] || w[C + 1] === _[x] && w[C] === _[x + 1]) && _.splice(x, 2);
                V = u.length; for (C = 0; C !== V; C++) { var T = u[C]; if (!T.collideConnected)
                        for (var x = _.length - 2; x >= 0; x -= 2)(T.bodyA === _[x] && T.bodyB === _[x + 1] || T.bodyB === _[x] && T.bodyA === _[x + 1]) && _.splice(x, 2) } this.postBroadphaseEvent.pairs = _, this.emit(this.postBroadphaseEvent), this.postBroadphaseEvent.pairs = null, c.reset(this); for (var C = 0, P = _.length; C !== P; C += 2)
                    for (var I = _[C], O = _[C + 1], E = 0, L = I.shapes.length; E !== L; E++)
                        for (var k = I.shapes[E], M = k.position, B = k.angle, D = 0, G = O.shapes.length; D !== G; D++) { var R = O.shapes[D],
                                U = R.position,
                                F = R.angle,
                                N = this.defaultContactMaterial; if (k.material && R.material) { var j = this.getContactMaterial(k.material, R.material);
                                j && (N = j) } this.runNarrowphase(c, I, k, M, B, O, R, U, F, N, this.frictionGravity) }
                for (C = 0; C !== h; C++)(z = s[C])._wakeUpAfterNarrowphase && (z.wakeUp(), z._wakeUpAfterNarrowphase = !1); if (this.has("endContact")) { this.overlapKeeper.getEndOverlaps(A); for (var H = this.endContactEvent, D = A.length; D--;) { var X = A[D];
                        H.shapeA = X.shapeA, H.shapeB = X.shapeB, H.bodyA = X.bodyA, H.bodyB = X.bodyB, this.emit(H) } A.length = 0 } var W = this.preSolveEvent;
                W.contactEquations = c.contactEquations, W.frictionEquations = c.frictionEquations, this.emit(W), W.contactEquations = W.frictionEquations = null; var V = u.length; for (C = 0; C !== V; C++) u[C].update(); if (c.contactEquations.length || c.frictionEquations.length || V)
                    if (this.islandSplit) { for (g.equations.length = 0, v.appendArray(g.equations, c.contactEquations), v.appendArray(g.equations, c.frictionEquations), C = 0; C !== V; C++) v.appendArray(g.equations, u[C].equations);
                        g.split(this); for (C = 0; C !== g.islands.length; C++)(q = g.islands[C]).equations.length && r.solveIsland(t, q) } else { for (r.addEquations(c.contactEquations), r.addEquations(c.frictionEquations), C = 0; C !== V; C++) r.addEquations(u[C].equations);
                        this.solveConstraints && r.solve(t, this), r.removeAllEquations() } for (C = 0; C !== h; C++) { var z = s[C];
                    z.integrate(t) } for (C = 0; C !== h; C++) s[C].setZeroForce(); if (this.emitImpactEvent && this.has("impact"))
                    for (var Y = this.impactEvent, C = 0; C !== c.contactEquations.length; C++) { var K = c.contactEquations[C];
                        K.firstImpact && (Y.bodyA = K.bodyA, Y.bodyB = K.bodyB, Y.shapeA = K.shapeA, Y.shapeB = K.shapeB, Y.contactEquation = K, this.emit(Y)) }
                if (this.sleepMode === n.BODY_SLEEPING)
                    for (C = 0; C !== h; C++) s[C].sleepTick(this.time, !1, t);
                else if (this.sleepMode === n.ISLAND_SLEEPING && this.islandSplit) { for (C = 0; C !== h; C++) s[C].sleepTick(this.time, !0, t); for (C = 0; C < this.islandManager.islands.length; C++) { var q = this.islandManager.islands[C];
                        q.wantsToSleep() && q.sleep() } } this.stepping = !1; for (var Z = this.bodiesToBeRemoved, C = 0; C !== Z.length; C++) this.removeBody(Z[C]);
                Z.length = 0, this.emit(this.postStepEvent) }, n.prototype.runNarrowphase = function(t, e, i, n, s, a, r, h, l, c, u) { if (0 != (i.collisionGroup & r.collisionMask) && 0 != (r.collisionGroup & i.collisionMask)) { o.rotate(w, n, e.angle), o.rotate(C, h, a.angle), o.add(w, w, e.position), o.add(C, C, a.position); var d = s + e.angle,
                        m = l + a.angle;
                    t.enableFriction = c.friction > 0, t.frictionCoefficient = c.friction; var g;
                    g = e.type === p.STATIC || e.type === p.KINEMATIC ? a.mass : a.type === p.STATIC || a.type === p.KINEMATIC ? e.mass : e.mass * a.mass / (e.mass + a.mass), t.slipForce = c.friction * u * g, t.restitution = c.restitution, t.surfaceVelocity = c.surfaceVelocity, t.frictionStiffness = c.frictionStiffness, t.frictionRelaxation = c.frictionRelaxation, t.stiffness = c.stiffness, t.relaxation = c.relaxation, t.contactSkinSize = c.contactSkinSize, t.enabledEquations = e.collisionResponse && a.collisionResponse && i.collisionResponse && r.collisionResponse; var f = t[i.type | r.type],
                        y = 0; if (f) { var v = i.sensor || r.sensor,
                            b = t.frictionEquations.length;
                        y = i.type < r.type ? f.call(t, e, i, w, d, a, r, C, m, v) : f.call(t, a, r, C, m, e, i, w, d, v); var _ = t.frictionEquations.length - b; if (y) { if (e.allowSleep && e.type === p.DYNAMIC && e.sleepState === p.SLEEPING && a.sleepState === p.AWAKE && a.type !== p.STATIC && o.squaredLength(a.velocity) + Math.pow(a.angularVelocity, 2) >= 2 * Math.pow(a.sleepSpeedLimit, 2) && (e._wakeUpAfterNarrowphase = !0), a.allowSleep && a.type === p.DYNAMIC && a.sleepState === p.SLEEPING && e.sleepState === p.AWAKE && e.type !== p.STATIC && o.squaredLength(e.velocity) + Math.pow(e.angularVelocity, 2) >= 2 * Math.pow(e.sleepSpeedLimit, 2) && (a._wakeUpAfterNarrowphase = !0), this.overlapKeeper.setOverlapping(e, i, a, r), this.has("beginContact") && this.overlapKeeper.isNewOverlap(i, r)) { var S = this.beginContactEvent; if (S.shapeA = i, S.shapeB = r, S.bodyA = e, S.bodyB = a, S.contactEquations.length = 0, "number" == typeof y)
                                    for (A = t.contactEquations.length - y; A < t.contactEquations.length; A++) S.contactEquations.push(t.contactEquations[A]);
                                this.emit(S) } if ("number" == typeof y && _ > 1)
                                for (var A = t.frictionEquations.length - _; A < t.frictionEquations.length; A++) { var T = t.frictionEquations[A];
                                    T.setSlipForce(T.getSlipForce() / _) } } } } }, n.prototype.addSpring = function(t) { this.springs.push(t); var e = this.addSpringEvent;
                e.spring = t, this.emit(e), e.spring = null }, n.prototype.removeSpring = function(t) { var e = this.springs.indexOf(t); - 1 !== e && v.splice(this.springs, e, 1) }, n.prototype.addBody = function(t) { if (-1 === this.bodies.indexOf(t)) { this.bodies.push(t), t.world = this; var e = this.addBodyEvent;
                    e.body = t, this.emit(e), e.body = null } }, n.prototype.removeBody = function(t) { if (this.stepping) this.bodiesToBeRemoved.push(t);
                else { t.world = null; var e = this.bodies.indexOf(t); - 1 !== e && (v.splice(this.bodies, e, 1), this.removeBodyEvent.body = t, t.resetConstraintVelocity(), this.emit(this.removeBodyEvent), this.removeBodyEvent.body = null) } }, n.prototype.getBodyById = function(t) { for (var e = this.bodies, i = 0; i < e.length; i++) { var n = e[i]; if (n.id === t) return n } return !1 }, n.prototype.disableBodyCollision = function(t, e) { this.disabledBodyCollisionPairs.push(t, e) }, n.prototype.enableBodyCollision = function(t, e) { for (var i = this.disabledBodyCollisionPairs, n = 0; n < i.length; n += 2)
                    if (i[n] === t && i[n + 1] === e || i[n + 1] === t && i[n] === e) return void i.splice(n, 2) }, n.prototype.clear = function() { this.time = 0, this.solver && this.solver.equations.length && this.solver.removeAllEquations(); for (var t = this.constraints, e = t.length - 1; e >= 0; e--) this.removeConstraint(t[e]); for (var i = this.bodies, e = i.length - 1; e >= 0; e--) this.removeBody(i[e]); for (var s = this.springs, e = s.length - 1; e >= 0; e--) this.removeSpring(s[e]); for (var o = this.contactMaterials, e = o.length - 1; e >= 0; e--) this.removeContactMaterial(o[e]);
                n.apply(this) }; var T = o.create(),
                x = (o.fromValues(0, 0), o.fromValues(0, 0));
            n.prototype.hitTest = function(t, e, i) { i = i || 0; var n = new p({ position: t }),
                    s = new c,
                    u = t,
                    d = T,
                    m = x;
                n.addShape(s); for (var g = this.narrowphase, f = [], y = 0, v = e.length; y !== v; y++)
                    for (var b = e[y], _ = 0, S = b.shapes.length; _ !== S; _++) { var w = b.shapes[_];
                        o.rotate(d, w.position, b.angle), o.add(d, d, b.position); var C = w.angle + b.angle;
                        (w instanceof a && g.circleParticle(b, w, d, C, n, s, u, 0, !0) || w instanceof r && g.particleConvex(n, s, u, 0, b, w, d, C, !0) || w instanceof h && g.particlePlane(n, s, u, 0, b, w, d, C, !0) || w instanceof l && g.particleCapsule(n, s, u, 0, b, w, d, C, !0) || w instanceof c && o.squaredLength(o.sub(m, d, t)) < i * i) && f.push(b) }
                return f }, n.prototype.setGlobalStiffness = function(t) { for (var e = this.constraints, i = 0; i !== e.length; i++)
                    for (var n = e[i], s = 0; s !== n.equations.length; s++) { var o = n.equations[s];
                        o.stiffness = t, o.needsUpdate = !0 }
                for (var a = this.contactMaterials, i = 0; i !== a.length; i++)(n = a[i]).stiffness = n.frictionStiffness = t;
                (n = this.defaultContactMaterial).stiffness = n.frictionStiffness = t }, n.prototype.setGlobalRelaxation = function(t) { for (s = 0; s !== this.constraints.length; s++)
                    for (var e = this.constraints[s], i = 0; i !== e.equations.length; i++) { var n = e.equations[i];
                        n.relaxation = t, n.needsUpdate = !0 }
                for (var s = 0; s !== this.contactMaterials.length; s++)(e = this.contactMaterials[s]).relaxation = e.frictionRelaxation = t;
                (e = this.defaultContactMaterial).relaxation = e.frictionRelaxation = t }; var P = new g,
                I = [];
            n.prototype.raycast = function(t, e) { return e.getAABB(P), this.broadphase.aabbQuery(this, P, I), e.intersectBodies(t, I), I.length = 0, t.hasHit() } }, { "../../package.json": 6, "../collision/AABB": 7, "../collision/Broadphase": 8, "../collision/Narrowphase": 10, "../collision/Ray": 11, "../collision/SAPBroadphase": 13, "../constraints/Constraint": 14, "../constraints/DistanceConstraint": 15, "../constraints/GearConstraint": 16, "../constraints/LockConstraint": 17, "../constraints/PrismaticConstraint": 18, "../constraints/RevoluteConstraint": 19, "../events/EventEmitter": 26, "../material/ContactMaterial": 27, "../material/Material": 28, "../math/vec2": 30, "../objects/Body": 31, "../objects/LinearSpring": 32, "../objects/RotationalSpring": 33, "../shapes/Capsule": 38, "../shapes/Circle": 39, "../shapes/Convex": 40, "../shapes/Line": 42, "../shapes/Particle": 43, "../shapes/Plane": 44, "../shapes/Shape": 45, "../solver/GSSolver": 46, "../solver/Solver": 47, "../utils/OverlapKeeper": 52, "../utils/Utils": 57, "./IslandManager": 59 }] }, {}, [36])(36) }),
function() { var t = this,
        e = e || {}; return e.game = null, e.WEBGL_RENDERER = 0, e.CANVAS_RENDERER = 1, e.VERSION = "v2.2.9", e._UID = 0, "undefined" != typeof Float32Array ? (e.Float32Array = Float32Array, e.Uint16Array = Uint16Array, e.Uint32Array = Uint32Array, e.ArrayBuffer = ArrayBuffer) : (e.Float32Array = Array, e.Uint16Array = Array), e.PI_2 = 2 * Math.PI, e.RAD_TO_DEG = 180 / Math.PI, e.DEG_TO_RAD = Math.PI / 180, e.RETINA_PREFIX = "@2x", e.DisplayObject = function() { this.position = new e.Point(0, 0), this.scale = new e.Point(1, 1), this.pivot = new e.Point(0, 0), this.rotation = 0, this.alpha = 1, this.visible = !0, this.hitArea = null, this.renderable = !1, this.parent = null, this.worldAlpha = 1, this.worldTransform = new e.Matrix, this.worldPosition = new e.Point(0, 0), this.worldScale = new e.Point(1, 1), this.worldRotation = 0, this.filterArea = null, this._sr = 0, this._cr = 1, this._bounds = new e.Rectangle(0, 0, 0, 0), this._currentBounds = null, this._mask = null, this._cacheAsBitmap = !1, this._cacheIsDirty = !1 }, e.DisplayObject.prototype.constructor = e.DisplayObject, e.DisplayObject.prototype = { destroy: function() { if (this.children) { for (var t = this.children.length; t--;) this.children[t].destroy();
                this.children = [] } this.hitArea = null, this.parent = null, this.worldTransform = null, this.filterArea = null, this.renderable = !1, this._bounds = null, this._currentBounds = null, this._mask = null, this._destroyCachedSprite() }, updateTransform: function(t) { if (!t && !this.parent && !this.game) return this; var i = this.parent;
            t ? i = t : this.parent || (i = this.game.world); var n, s, o, a, r, h, l = i.worldTransform,
                c = this.worldTransform; return this.rotation % e.PI_2 ? (this.rotation !== this.rotationCache && (this.rotationCache = this.rotation, this._sr = Math.sin(this.rotation), this._cr = Math.cos(this.rotation)), n = this._cr * this.scale.x, s = this._sr * this.scale.x, o = -this._sr * this.scale.y, a = this._cr * this.scale.y, r = this.position.x, h = this.position.y, (this.pivot.x || this.pivot.y) && (r -= this.pivot.x * n + this.pivot.y * o, h -= this.pivot.x * s + this.pivot.y * a), c.a = n * l.a + s * l.c, c.b = n * l.b + s * l.d, c.c = o * l.a + a * l.c, c.d = o * l.b + a * l.d, c.tx = r * l.a + h * l.c + l.tx, c.ty = r * l.b + h * l.d + l.ty) : (n = this.scale.x, a = this.scale.y, r = this.position.x - this.pivot.x * n, h = this.position.y - this.pivot.y * a, c.a = n * l.a, c.b = n * l.b, c.c = a * l.c, c.d = a * l.d, c.tx = r * l.a + h * l.c + l.tx, c.ty = r * l.b + h * l.d + l.ty), this.worldAlpha = this.alpha * i.worldAlpha, this.worldPosition.set(c.tx, c.ty), this.worldScale.set(this.scale.x * Math.sqrt(c.a * c.a + c.c * c.c), this.scale.y * Math.sqrt(c.b * c.b + c.d * c.d)), this.worldRotation = Math.atan2(-c.c, c.d), this._currentBounds = null, this.transformCallback && this.transformCallback.call(this.transformCallbackContext, c, l), this }, preUpdate: function() {}, generateTexture: function(t, i, n) { var s = this.getLocalBounds(),
                o = new e.RenderTexture(0 | s.width, 0 | s.height, n, i, t); return e.DisplayObject._tempMatrix.tx = -s.x, e.DisplayObject._tempMatrix.ty = -s.y, o.render(this, e.DisplayObject._tempMatrix), o }, updateCache: function() { return this._generateCachedSprite(), this }, toGlobal: function(t) { return this.updateTransform(), this.worldTransform.apply(t) }, toLocal: function(t, e) { return e && (t = e.toGlobal(t)), this.updateTransform(), this.worldTransform.applyInverse(t) }, _renderCachedSprite: function(t) { this._cachedSprite.worldAlpha = this.worldAlpha, t.gl ? e.Sprite.prototype._renderWebGL.call(this._cachedSprite, t) : e.Sprite.prototype._renderCanvas.call(this._cachedSprite, t) }, _generateCachedSprite: function() { this._cacheAsBitmap = !1; var t = this.getLocalBounds(); if (t.width = Math.max(1, Math.ceil(t.width)), t.height = Math.max(1, Math.ceil(t.height)), this.updateTransform(), this._cachedSprite) this._cachedSprite.texture.resize(t.width, t.height);
            else { var i = new e.RenderTexture(t.width, t.height);
                this._cachedSprite = new e.Sprite(i), this._cachedSprite.worldTransform = this.worldTransform } var n = this._filters;
            this._filters = null, this._cachedSprite.filters = n, e.DisplayObject._tempMatrix.tx = -t.x, e.DisplayObject._tempMatrix.ty = -t.y, this._cachedSprite.texture.render(this, e.DisplayObject._tempMatrix, !0), this._cachedSprite.anchor.x = -t.x / t.width, this._cachedSprite.anchor.y = -t.y / t.height, this._filters = n, this._cacheAsBitmap = !0 }, _destroyCachedSprite: function() { this._cachedSprite && (this._cachedSprite.texture.destroy(!0), this._cachedSprite = null) } }, e.DisplayObject.prototype.displayObjectUpdateTransform = e.DisplayObject.prototype.updateTransform, Object.defineProperties(e.DisplayObject.prototype, { x: { get: function() { return this.position.x }, set: function(t) { this.position.x = t } }, y: { get: function() { return this.position.y }, set: function(t) { this.position.y = t } }, worldVisible: { get: function() { if (this.visible) { var t = this.parent; if (!t) return this.visible;
                    do { if (!t.visible) return !1;
                        t = t.parent } while (t); return !0 } return !1 } }, mask: { get: function() { return this._mask }, set: function(t) { this._mask && (this._mask.isMask = !1), this._mask = t, t && (this._mask.isMask = !0) } }, filters: { get: function() { return this._filters }, set: function(t) { if (Array.isArray(t)) { for (var i = [], n = 0; n < t.length; n++)
                        for (var s = t[n].passes, o = 0; o < s.length; o++) i.push(s[o]);
                    this._filterBlock = { target: this, filterPasses: i } } this._filters = t, this.blendMode && this.blendMode === e.blendModes.MULTIPLY && (this.blendMode = e.blendModes.NORMAL) } }, cacheAsBitmap: { get: function() { return this._cacheAsBitmap }, set: function(t) { this._cacheAsBitmap !== t && (t ? this._generateCachedSprite() : this._destroyCachedSprite(), this._cacheAsBitmap = t) } } }), e.DisplayObjectContainer = function() { e.DisplayObject.call(this), this.children = [], this.ignoreChildInput = !1 }, e.DisplayObjectContainer.prototype = Object.create(e.DisplayObject.prototype), e.DisplayObjectContainer.prototype.constructor = e.DisplayObjectContainer, e.DisplayObjectContainer.prototype.addChild = function(t) { return this.addChildAt(t, this.children.length) }, e.DisplayObjectContainer.prototype.addChildAt = function(t, e) { if (e >= 0 && e <= this.children.length) return t.parent && t.parent.removeChild(t), t.parent = this, this.children.splice(e, 0, t), t; throw new Error(t + "addChildAt: The index " + e + " supplied is out of bounds " + this.children.length) }, e.DisplayObjectContainer.prototype.swapChildren = function(t, e) { if (t !== e) { var i = this.getChildIndex(t),
                n = this.getChildIndex(e); if (i < 0 || n < 0) throw new Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");
            this.children[i] = e, this.children[n] = t } }, e.DisplayObjectContainer.prototype.getChildIndex = function(t) { var e = this.children.indexOf(t); if (-1 === e) throw new Error("The supplied DisplayObject must be a child of the caller"); return e }, e.DisplayObjectContainer.prototype.setChildIndex = function(t, e) { if (e < 0 || e >= this.children.length) throw new Error("The supplied index is out of bounds"); var i = this.getChildIndex(t);
        this.children.splice(i, 1), this.children.splice(e, 0, t) }, e.DisplayObjectContainer.prototype.getChildAt = function(t) { if (t < 0 || t >= this.children.length) throw new Error("getChildAt: Supplied index " + t + " does not exist in the child list, or the supplied DisplayObject must be a child of the caller"); return this.children[t] }, e.DisplayObjectContainer.prototype.removeChild = function(t) { var e = this.children.indexOf(t); if (-1 !== e) return this.removeChildAt(e) }, e.DisplayObjectContainer.prototype.removeChildAt = function(t) { var e = this.getChildAt(t); return e && (e.parent = void 0, this.children.splice(t, 1)), e }, e.DisplayObjectContainer.prototype.removeChildren = function(t, e) { void 0 === t && (t = 0), void 0 === e && (e = this.children.length); var i = e - t; if (i > 0 && i <= e) { for (var n = this.children.splice(begin, i), s = 0; s < n.length; s++) n[s].parent = void 0; return n } if (0 === i && 0 === this.children.length) return []; throw new Error("removeChildren: Range Error, numeric values are outside the acceptable range") }, e.DisplayObjectContainer.prototype.updateTransform = function() { if (this.visible && (this.displayObjectUpdateTransform(), !this._cacheAsBitmap))
            for (var t = 0; t < this.children.length; t++) this.children[t].updateTransform() }, e.DisplayObjectContainer.prototype.displayObjectContainerUpdateTransform = e.DisplayObjectContainer.prototype.updateTransform, e.DisplayObjectContainer.prototype.getBounds = function(t) { var i = t && t instanceof e.DisplayObject,
            n = !0;
        i ? n = t instanceof e.DisplayObjectContainer && t.contains(this) : t = this; var s; if (i) { var o = t.worldTransform; for (t.worldTransform = e.identityMatrix, s = 0; s < t.children.length; s++) t.children[s].updateTransform() } var a, r, h, l = 1 / 0,
            c = 1 / 0,
            u = -1 / 0,
            p = -1 / 0,
            d = !1; for (s = 0; s < this.children.length; s++) this.children[s].visible && (d = !0, l = l < (a = this.children[s].getBounds()).x ? l : a.x, c = c < a.y ? c : a.y, r = a.width + a.x, h = a.height + a.y, u = u > r ? u : r, p = p > h ? p : h); var m = this._bounds; if (!d) { var g = (m = new e.Rectangle).x,
                f = m.width + m.x,
                y = m.y,
                v = m.height + m.y,
                b = this.worldTransform,
                _ = b.a,
                S = b.b,
                w = b.c,
                C = b.d,
                A = b.tx,
                T = b.ty,
                x = _ * f + w * v + A,
                P = C * v + S * f + T,
                I = _ * g + w * v + A,
                O = C * v + S * g + T,
                E = _ * g + w * y + A,
                L = C * y + S * g + T,
                k = _ * f + w * y + A,
                M = C * y + S * f + T;
            u = x, p = P, c = P, l = k < (l = E < (l = I < (l = x) ? I : l) ? E : l) ? k : l, c = M < (c = L < (c = O < c ? O : c) ? L : c) ? M : c, u = k > (u = E > (u = I > u ? I : u) ? E : u) ? k : u, p = M > (p = L > (p = O > p ? O : p) ? L : p) ? M : p } if (m.x = l, m.y = c, m.width = u - l, m.height = p - c, i)
            for (t.worldTransform = o, s = 0; s < t.children.length; s++) t.children[s].updateTransform(); if (!n) { var B = t.getBounds();
            m.x -= B.x, m.y -= B.y } return m }, e.DisplayObjectContainer.prototype.getLocalBounds = function() { return this.getBounds(this) }, e.DisplayObjectContainer.prototype.contains = function(t) { return !!t && (t === this || this.contains(t.parent)) }, e.DisplayObjectContainer.prototype._renderWebGL = function(t) { if (this.visible && !(this.alpha <= 0))
            if (this._cacheAsBitmap) this._renderCachedSprite(t);
            else { var e; if (this._mask || this._filters) { for (this._filters && (t.spriteBatch.flush(), t.filterManager.pushFilter(this._filterBlock)), this._mask && (t.spriteBatch.stop(), t.maskManager.pushMask(this.mask, t), t.spriteBatch.start()), e = 0; e < this.children.length; e++) this.children[e]._renderWebGL(t);
                    t.spriteBatch.stop(), this._mask && t.maskManager.popMask(this._mask, t), this._filters && t.filterManager.popFilter(), t.spriteBatch.start() } else
                    for (e = 0; e < this.children.length; e++) this.children[e]._renderWebGL(t) } }, e.DisplayObjectContainer.prototype._renderCanvas = function(t) { if (!1 !== this.visible && 0 !== this.alpha)
            if (this._cacheAsBitmap) this._renderCachedSprite(t);
            else { this._mask && t.maskManager.pushMask(this._mask, t); for (var e = 0; e < this.children.length; e++) this.children[e]._renderCanvas(t);
                this._mask && t.maskManager.popMask(t) } }, Object.defineProperty(e.DisplayObjectContainer.prototype, "width", { get: function() { return this.getLocalBounds().width * this.scale.x }, set: function(t) { var e = this.getLocalBounds().width;
            this.scale.x = 0 !== e ? t / e : 1, this._width = t } }), Object.defineProperty(e.DisplayObjectContainer.prototype, "height", { get: function() { return this.getLocalBounds().height * this.scale.y }, set: function(t) { var e = this.getLocalBounds().height;
            this.scale.y = 0 !== e ? t / e : 1, this._height = t } }), e.Sprite = function(t) { e.DisplayObjectContainer.call(this), this.anchor = new e.Point, this.texture = t || e.Texture.emptyTexture, this._width = 0, this._height = 0, this.tint = 16777215, this.cachedTint = -1, this.tintedTexture = null, this.blendMode = e.blendModes.NORMAL, this.shader = null, this.exists = !0, this.texture.baseTexture.hasLoaded && this.onTextureUpdate(), this.renderable = !0 }, e.Sprite.prototype = Object.create(e.DisplayObjectContainer.prototype), e.Sprite.prototype.constructor = e.Sprite, Object.defineProperty(e.Sprite.prototype, "width", { get: function() { return this.scale.x * this.texture.frame.width }, set: function(t) { this.scale.x = t / this.texture.frame.width, this._width = t } }), Object.defineProperty(e.Sprite.prototype, "height", { get: function() { return this.scale.y * this.texture.frame.height }, set: function(t) { this.scale.y = t / this.texture.frame.height, this._height = t } }), e.Sprite.prototype.setTexture = function(t, e) { void 0 !== e && this.texture.baseTexture.destroy(), this.texture.baseTexture.skipRender = !1, this.texture = t, this.texture.valid = !0, this.cachedTint = -1 }, e.Sprite.prototype.onTextureUpdate = function() { this._width && (this.scale.x = this._width / this.texture.frame.width), this._height && (this.scale.y = this._height / this.texture.frame.height) }, e.Sprite.prototype.getBounds = function(t) { var e = this.texture.frame.width,
            i = this.texture.frame.height,
            n = e * (1 - this.anchor.x),
            s = e * -this.anchor.x,
            o = i * (1 - this.anchor.y),
            a = i * -this.anchor.y,
            r = t || this.worldTransform,
            h = r.a,
            l = r.b,
            c = r.c,
            u = r.d,
            p = r.tx,
            d = r.ty,
            m = -1 / 0,
            g = -1 / 0,
            f = 1 / 0,
            y = 1 / 0; if (0 === l && 0 === c) { if (h < 0) { h *= -1;
                v = n;
                n = -s, s = -v } if (u < 0) { u *= -1; var v = o;
                o = -a, a = -v } f = h * s + p, m = h * n + p, y = u * a + d, g = u * o + d } else { var b = h * s + c * a + p,
                _ = u * a + l * s + d,
                S = h * n + c * a + p,
                w = u * a + l * n + d,
                C = h * n + c * o + p,
                A = u * o + l * n + d,
                T = h * s + c * o + p,
                x = u * o + l * s + d;
            f = T < (f = C < (f = S < (f = b < f ? b : f) ? S : f) ? C : f) ? T : f, y = x < (y = A < (y = w < (y = _ < y ? _ : y) ? w : y) ? A : y) ? x : y, m = T > (m = C > (m = S > (m = b > m ? b : m) ? S : m) ? C : m) ? T : m, g = x > (g = A > (g = w > (g = _ > g ? _ : g) ? w : g) ? A : g) ? x : g } var P = this._bounds; return P.x = f, P.width = m - f, P.y = y, P.height = g - y, this._currentBounds = P, P }, e.Sprite.prototype.getLocalBounds = function() { var t = this.worldTransform;
        this.worldTransform = e.identityMatrix; for (var i = 0; i < this.children.length; i++) this.children[i].updateTransform(); var n = this.getBounds(); for (this.worldTransform = t, i = 0; i < this.children.length; i++) this.children[i].updateTransform(); return n }, e.Sprite.prototype._renderWebGL = function(t, e) { if (this.visible && !(this.alpha <= 0) && this.renderable) { var i = this.worldTransform; if (e && (i = e), this._mask || this._filters) { var n = t.spriteBatch;
                this._filters && (n.flush(), t.filterManager.pushFilter(this._filterBlock)), this._mask && (n.stop(), t.maskManager.pushMask(this.mask, t), n.start()), n.render(this); for (s = 0; s < this.children.length; s++) this.children[s]._renderWebGL(t);
                n.stop(), this._mask && t.maskManager.popMask(this._mask, t), this._filters && t.filterManager.popFilter(), n.start() } else { t.spriteBatch.render(this); for (var s = 0; s < this.children.length; s++) this.children[s]._renderWebGL(t, i) } } }, e.Sprite.prototype._renderCanvas = function(t, i) { if (!(!this.visible || 0 === this.alpha || !this.renderable || this.texture.crop.width <= 0 || this.texture.crop.height <= 0)) { var n = this.worldTransform; if (i && (n = i), this.blendMode !== t.currentBlendMode && (t.currentBlendMode = this.blendMode, t.context.globalCompositeOperation = e.blendModesCanvas[t.currentBlendMode]), this._mask && t.maskManager.pushMask(this._mask, t), this.texture.valid) { var s = this.texture.baseTexture.resolution / t.resolution;
                t.context.globalAlpha = this.worldAlpha, t.smoothProperty && t.scaleMode !== this.texture.baseTexture.scaleMode && (t.scaleMode = this.texture.baseTexture.scaleMode, t.context[t.smoothProperty] = t.scaleMode === e.scaleModes.LINEAR); var o = this.texture.trim ? this.texture.trim.x - this.anchor.x * this.texture.trim.width : this.anchor.x * -this.texture.frame.width,
                    a = this.texture.trim ? this.texture.trim.y - this.anchor.y * this.texture.trim.height : this.anchor.y * -this.texture.frame.height,
                    r = n.tx * t.resolution + t.shakeX,
                    h = n.ty * t.resolution + t.shakeY;
                t.roundPixels ? (t.context.setTransform(n.a, n.b, n.c, n.d, 0 | r, 0 | h), o |= 0, a |= 0) : t.context.setTransform(n.a, n.b, n.c, n.d, r, h); var l = this.texture.crop.width,
                    c = this.texture.crop.height; if (o /= s, a /= s, 16777215 !== this.tint)(this.texture.requiresReTint || this.cachedTint !== this.tint) && (this.tintedTexture = e.CanvasTinter.getTintedTexture(this, this.tint), this.cachedTint = this.tint, this.texture.requiresReTint = !1), t.context.drawImage(this.tintedTexture, 0, 0, l, c, o, a, l / s, c / s);
                else { var u = this.texture.crop.x,
                        p = this.texture.crop.y;
                    t.context.drawImage(this.texture.baseTexture.source, u, p, l, c, o, a, l / s, c / s) } } for (var d = 0; d < this.children.length; d++) this.children[d]._renderCanvas(t);
            this._mask && t.maskManager.popMask(t) } }, e.SpriteBatch = function(t) { e.DisplayObjectContainer.call(this), this.textureThing = t, this.ready = !1 }, e.SpriteBatch.prototype = Object.create(e.DisplayObjectContainer.prototype), e.SpriteBatch.prototype.constructor = e.SpriteBatch, e.SpriteBatch.prototype.initWebGL = function(t) { this.fastSpriteBatch = new e.WebGLFastSpriteBatch(t), this.ready = !0 }, e.SpriteBatch.prototype.updateTransform = function() { this.displayObjectUpdateTransform() }, e.SpriteBatch.prototype._renderWebGL = function(t) {!this.visible || this.alpha <= 0 || !this.children.length || (this.ready || this.initWebGL(t.gl), this.fastSpriteBatch.gl !== t.gl && this.fastSpriteBatch.setContext(t.gl), t.spriteBatch.stop(), t.shaderManager.setShader(t.shaderManager.fastShader), this.fastSpriteBatch.begin(this, t), this.fastSpriteBatch.render(this), t.spriteBatch.start()) }, e.SpriteBatch.prototype._renderCanvas = function(t) { if (this.visible && !(this.alpha <= 0) && this.children.length) { var e = t.context;
            e.globalAlpha = this.worldAlpha, this.displayObjectUpdateTransform(); for (var i = this.worldTransform, n = !0, s = 0; s < this.children.length; s++) { var o = this.children[s]; if (o.visible) { var a = o.texture,
                        r = a.frame; if (e.globalAlpha = this.worldAlpha * o.alpha, o.rotation % (2 * Math.PI) == 0) n && (e.setTransform(i.a, i.b, i.c, i.d, i.tx, i.ty), n = !1), e.drawImage(a.baseTexture.source, r.x, r.y, r.width, r.height, o.anchor.x * (-r.width * o.scale.x) + o.position.x + .5 + t.shakeX | 0, o.anchor.y * (-r.height * o.scale.y) + o.position.y + .5 + t.shakeY | 0, r.width * o.scale.x, r.height * o.scale.y);
                    else { n || (n = !0), o.displayObjectUpdateTransform(); var h = o.worldTransform,
                            l = h.tx * t.resolution + t.shakeX,
                            c = h.ty * t.resolution + t.shakeY;
                        t.roundPixels ? e.setTransform(h.a, h.b, h.c, h.d, 0 | l, 0 | c) : e.setTransform(h.a, h.b, h.c, h.d, l, c), e.drawImage(a.baseTexture.source, r.x, r.y, r.width, r.height, o.anchor.x * -r.width + .5 | 0, o.anchor.y * -r.height + .5 | 0, r.width, r.height) } } } } }, e.hex2rgb = function(t) { return [(t >> 16 & 255) / 255, (t >> 8 & 255) / 255, (255 & t) / 255] }, e.rgb2hex = function(t) { return (255 * t[0] << 16) + (255 * t[1] << 8) + 255 * t[2] }, e.canUseNewCanvasBlendModes = function() { if (void 0 === document) return !1; var t = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",
            i = "AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",
            n = new Image;
        n.src = t + "AP804Oa6" + i; var s = new Image;
        s.src = t + "/wCKxvRF" + i; var o = e.CanvasPool.create(this, 6, 1).getContext("2d"); if (o.globalCompositeOperation = "multiply", o.drawImage(n, 0, 0), o.drawImage(s, 2, 0), !o.getImageData(2, 0, 1, 1)) return !1; var a = o.getImageData(2, 0, 1, 1).data; return e.CanvasPool.remove(this), 255 === a[0] && 0 === a[1] && 0 === a[2] }, e.getNextPowerOfTwo = function(t) { if (t > 0 && 0 == (t & t - 1)) return t; for (var e = 1; e < t;) e <<= 1; return e }, e.isPowerOfTwo = function(t, e) { return t > 0 && 0 == (t & t - 1) && e > 0 && 0 == (e & e - 1) }, e.CanvasPool = { create: function(t, i, n) { var s, o = e.CanvasPool.getFirst(); if (-1 === o) { var a = { parent: t, canvas: document.createElement("canvas") };
                e.CanvasPool.pool.push(a), s = a.canvas } else e.CanvasPool.pool[o].parent = t, s = e.CanvasPool.pool[o].canvas; return void 0 !== i && (s.width = i, s.height = n), s }, getFirst: function() { for (var t = e.CanvasPool.pool, i = 0; i < t.length; i++)
                if (!t[i].parent) return i; return -1 }, remove: function(t) { for (var i = e.CanvasPool.pool, n = 0; n < i.length; n++) i[n].parent === t && (i[n].parent = null, i[n].canvas.width = 1, i[n].canvas.height = 1) }, removeByCanvas: function(t) { for (var i = e.CanvasPool.pool, n = 0; n < i.length; n++) i[n].canvas === t && (i[n].parent = null, i[n].canvas.width = 1, i[n].canvas.height = 1) }, getTotal: function() { for (var t = e.CanvasPool.pool, i = 0, n = 0; n < t.length; n++) t[n].parent && i++; return i }, getFree: function() { for (var t = e.CanvasPool.pool, i = 0, n = 0; n < t.length; n++) t[n].parent || i++; return i } }, e.CanvasPool.pool = [], e.initDefaultShaders = function() {}, e.CompileVertexShader = function(t, i) { return e._CompileShader(t, i, t.VERTEX_SHADER) }, e.CompileFragmentShader = function(t, i) { return e._CompileShader(t, i, t.FRAGMENT_SHADER) }, e._CompileShader = function(t, e, i) { var n = e;
        Array.isArray(e) && (n = e.join("\n")); var s = t.createShader(i); return t.shaderSource(s, n), t.compileShader(s), t.getShaderParameter(s, t.COMPILE_STATUS) ? s : (window.console.log(t.getShaderInfoLog(s)), null) }, e.compileProgram = function(t, i, n) { var s = e.CompileFragmentShader(t, n),
            o = e.CompileVertexShader(t, i),
            a = t.createProgram(); return t.attachShader(a, o), t.attachShader(a, s), t.linkProgram(a), t.getProgramParameter(a, t.LINK_STATUS) || (window.console.log(t.getProgramInfoLog(a)), window.console.log("Could not initialise shaders")), a }, e.PixiShader = function(t) { this._UID = e._UID++, this.gl = t, this.program = null, this.fragmentSrc = ["precision lowp float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform sampler2D uSampler;", "void main(void) {", "   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;", "}"], this.textureCount = 0, this.firstRun = !0, this.dirty = !0, this.attributes = [], this.init() }, e.PixiShader.prototype.constructor = e.PixiShader, e.PixiShader.prototype.init = function() { var t = this.gl,
            i = e.compileProgram(t, this.vertexSrc || e.PixiShader.defaultVertexSrc, this.fragmentSrc);
        t.useProgram(i), this.uSampler = t.getUniformLocation(i, "uSampler"), this.projectionVector = t.getUniformLocation(i, "projectionVector"), this.offsetVector = t.getUniformLocation(i, "offsetVector"), this.dimensions = t.getUniformLocation(i, "dimensions"), this.aVertexPosition = t.getAttribLocation(i, "aVertexPosition"), this.aTextureCoord = t.getAttribLocation(i, "aTextureCoord"), this.colorAttribute = t.getAttribLocation(i, "aColor"), -1 === this.colorAttribute && (this.colorAttribute = 2), this.attributes = [this.aVertexPosition, this.aTextureCoord, this.colorAttribute]; for (var n in this.uniforms) this.uniforms[n].uniformLocation = t.getUniformLocation(i, n);
        this.initUniforms(), this.program = i }, e.PixiShader.prototype.initUniforms = function() { this.textureCount = 1; var t, e = this.gl; for (var i in this.uniforms) { var n = (t = this.uniforms[i]).type; "sampler2D" === n ? (t._init = !1, null !== t.value && this.initSampler2D(t)) : "mat2" === n || "mat3" === n || "mat4" === n ? (t.glMatrix = !0, t.glValueLength = 1, "mat2" === n ? t.glFunc = e.uniformMatrix2fv : "mat3" === n ? t.glFunc = e.uniformMatrix3fv : "mat4" === n && (t.glFunc = e.uniformMatrix4fv)) : (t.glFunc = e["uniform" + n], t.glValueLength = "2f" === n || "2i" === n ? 2 : "3f" === n || "3i" === n ? 3 : "4f" === n || "4i" === n ? 4 : 1) } }, e.PixiShader.prototype.initSampler2D = function(t) { if (t.value && t.value.baseTexture && t.value.baseTexture.hasLoaded) { var e = this.gl; if (e.activeTexture(e["TEXTURE" + this.textureCount]), e.bindTexture(e.TEXTURE_2D, t.value.baseTexture._glTextures[e.id]), t.textureData) { var i = t.textureData,
                    n = i.magFilter ? i.magFilter : e.LINEAR,
                    s = i.minFilter ? i.minFilter : e.LINEAR,
                    o = i.wrapS ? i.wrapS : e.CLAMP_TO_EDGE,
                    a = i.wrapT ? i.wrapT : e.CLAMP_TO_EDGE,
                    r = i.luminance ? e.LUMINANCE : e.RGBA; if (i.repeat && (o = e.REPEAT, a = e.REPEAT), e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL, !!i.flipY), i.width) { var h = i.width ? i.width : 512,
                        l = i.height ? i.height : 2,
                        c = i.border ? i.border : 0;
                    e.texImage2D(e.TEXTURE_2D, 0, r, h, l, c, r, e.UNSIGNED_BYTE, null) } else e.texImage2D(e.TEXTURE_2D, 0, r, e.RGBA, e.UNSIGNED_BYTE, t.value.baseTexture.source);
                e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MAG_FILTER, n), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MIN_FILTER, s), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_S, o), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_T, a) } e.uniform1i(t.uniformLocation, this.textureCount), t._init = !0, this.textureCount++ } }, e.PixiShader.prototype.syncUniforms = function() { this.textureCount = 1; var t, i = this.gl; for (var n in this.uniforms) 1 === (t = this.uniforms[n]).glValueLength ? !0 === t.glMatrix ? t.glFunc.call(i, t.uniformLocation, t.transpose, t.value) : t.glFunc.call(i, t.uniformLocation, t.value) : 2 === t.glValueLength ? t.glFunc.call(i, t.uniformLocation, t.value.x, t.value.y) : 3 === t.glValueLength ? t.glFunc.call(i, t.uniformLocation, t.value.x, t.value.y, t.value.z) : 4 === t.glValueLength ? t.glFunc.call(i, t.uniformLocation, t.value.x, t.value.y, t.value.z, t.value.w) : "sampler2D" === t.type && (t._init ? (i.activeTexture(i["TEXTURE" + this.textureCount]), t.value.baseTexture._dirty[i.id] ? e.instances[i.id].updateTexture(t.value.baseTexture) : i.bindTexture(i.TEXTURE_2D, t.value.baseTexture._glTextures[i.id]), i.uniform1i(t.uniformLocation, this.textureCount), this.textureCount++) : this.initSampler2D(t)) }, e.PixiShader.prototype.destroy = function() { this.gl.deleteProgram(this.program), this.uniforms = null, this.gl = null, this.attributes = null }, e.PixiShader.defaultVertexSrc = ["attribute vec2 aVertexPosition;", "attribute vec2 aTextureCoord;", "attribute vec4 aColor;", "uniform vec2 projectionVector;", "uniform vec2 offsetVector;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "const vec2 center = vec2(-1.0, 1.0);", "void main(void) {", "   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);", "   vTextureCoord = aTextureCoord;", "   vColor = vec4(aColor.rgb * aColor.a, aColor.a);", "}"], e.PixiFastShader = function(t) { this._UID = e._UID++, this.gl = t, this.program = null, this.fragmentSrc = ["precision lowp float;", "varying vec2 vTextureCoord;", "varying float vColor;", "uniform sampler2D uSampler;", "void main(void) {", "   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;", "}"], this.vertexSrc = ["attribute vec2 aVertexPosition;", "attribute vec2 aPositionCoord;", "attribute vec2 aScale;", "attribute float aRotation;", "attribute vec2 aTextureCoord;", "attribute float aColor;", "uniform vec2 projectionVector;", "uniform vec2 offsetVector;", "uniform mat3 uMatrix;", "varying vec2 vTextureCoord;", "varying float vColor;", "const vec2 center = vec2(-1.0, 1.0);", "void main(void) {", "   vec2 v;", "   vec2 sv = aVertexPosition * aScale;", "   v.x = (sv.x) * cos(aRotation) - (sv.y) * sin(aRotation);", "   v.y = (sv.x) * sin(aRotation) + (sv.y) * cos(aRotation);", "   v = ( uMatrix * vec3(v + aPositionCoord , 1.0) ).xy ;", "   gl_Position = vec4( ( v / projectionVector) + center , 0.0, 1.0);", "   vTextureCoord = aTextureCoord;", "   vColor = aColor;", "}"], this.textureCount = 0, this.init() }, e.PixiFastShader.prototype.constructor = e.PixiFastShader, e.PixiFastShader.prototype.init = function() { var t = this.gl,
            i = e.compileProgram(t, this.vertexSrc, this.fragmentSrc);
        t.useProgram(i), this.uSampler = t.getUniformLocation(i, "uSampler"), this.projectionVector = t.getUniformLocation(i, "projectionVector"), this.offsetVector = t.getUniformLocation(i, "offsetVector"), this.dimensions = t.getUniformLocation(i, "dimensions"), this.uMatrix = t.getUniformLocation(i, "uMatrix"), this.aVertexPosition = t.getAttribLocation(i, "aVertexPosition"), this.aPositionCoord = t.getAttribLocation(i, "aPositionCoord"), this.aScale = t.getAttribLocation(i, "aScale"), this.aRotation = t.getAttribLocation(i, "aRotation"), this.aTextureCoord = t.getAttribLocation(i, "aTextureCoord"), this.colorAttribute = t.getAttribLocation(i, "aColor"), -1 === this.colorAttribute && (this.colorAttribute = 2), this.attributes = [this.aVertexPosition, this.aPositionCoord, this.aScale, this.aRotation, this.aTextureCoord, this.colorAttribute], this.program = i }, e.PixiFastShader.prototype.destroy = function() { this.gl.deleteProgram(this.program), this.uniforms = null, this.gl = null, this.attributes = null }, e.StripShader = function(t) { this._UID = e._UID++, this.gl = t, this.program = null, this.fragmentSrc = ["precision mediump float;", "varying vec2 vTextureCoord;", "uniform float alpha;", "uniform sampler2D uSampler;", "void main(void) {", "   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * alpha;", "}"], this.vertexSrc = ["attribute vec2 aVertexPosition;", "attribute vec2 aTextureCoord;", "uniform mat3 translationMatrix;", "uniform vec2 projectionVector;", "uniform vec2 offsetVector;", "varying vec2 vTextureCoord;", "void main(void) {", "   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);", "   v -= offsetVector.xyx;", "   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);", "   vTextureCoord = aTextureCoord;", "}"], this.init() }, e.StripShader.prototype.constructor = e.StripShader, e.StripShader.prototype.init = function() { var t = this.gl,
            i = e.compileProgram(t, this.vertexSrc, this.fragmentSrc);
        t.useProgram(i), this.uSampler = t.getUniformLocation(i, "uSampler"), this.projectionVector = t.getUniformLocation(i, "projectionVector"), this.offsetVector = t.getUniformLocation(i, "offsetVector"), this.colorAttribute = t.getAttribLocation(i, "aColor"), this.aVertexPosition = t.getAttribLocation(i, "aVertexPosition"), this.aTextureCoord = t.getAttribLocation(i, "aTextureCoord"), this.attributes = [this.aVertexPosition, this.aTextureCoord], this.translationMatrix = t.getUniformLocation(i, "translationMatrix"), this.alpha = t.getUniformLocation(i, "alpha"), this.program = i }, e.StripShader.prototype.destroy = function() { this.gl.deleteProgram(this.program), this.uniforms = null, this.gl = null, this.attribute = null }, e.PrimitiveShader = function(t) { this._UID = e._UID++, this.gl = t, this.program = null, this.fragmentSrc = ["precision mediump float;", "varying vec4 vColor;", "void main(void) {", "   gl_FragColor = vColor;", "}"], this.vertexSrc = ["attribute vec2 aVertexPosition;", "attribute vec4 aColor;", "uniform mat3 translationMatrix;", "uniform vec2 projectionVector;", "uniform vec2 offsetVector;", "uniform float alpha;", "uniform float flipY;", "uniform vec3 tint;", "varying vec4 vColor;", "void main(void) {", "   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);", "   v -= offsetVector.xyx;", "   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);", "   vColor = aColor * vec4(tint * alpha, alpha);", "}"], this.init() }, e.PrimitiveShader.prototype.constructor = e.PrimitiveShader, e.PrimitiveShader.prototype.init = function() { var t = this.gl,
            i = e.compileProgram(t, this.vertexSrc, this.fragmentSrc);
        t.useProgram(i), this.projectionVector = t.getUniformLocation(i, "projectionVector"), this.offsetVector = t.getUniformLocation(i, "offsetVector"), this.tintColor = t.getUniformLocation(i, "tint"), this.flipY = t.getUniformLocation(i, "flipY"), this.aVertexPosition = t.getAttribLocation(i, "aVertexPosition"), this.colorAttribute = t.getAttribLocation(i, "aColor"), this.attributes = [this.aVertexPosition, this.colorAttribute], this.translationMatrix = t.getUniformLocation(i, "translationMatrix"), this.alpha = t.getUniformLocation(i, "alpha"), this.program = i }, e.PrimitiveShader.prototype.destroy = function() { this.gl.deleteProgram(this.program), this.uniforms = null, this.gl = null, this.attributes = null }, e.ComplexPrimitiveShader = function(t) { this._UID = e._UID++, this.gl = t, this.program = null, this.fragmentSrc = ["precision mediump float;", "varying vec4 vColor;", "void main(void) {", "   gl_FragColor = vColor;", "}"], this.vertexSrc = ["attribute vec2 aVertexPosition;", "uniform mat3 translationMatrix;", "uniform vec2 projectionVector;", "uniform vec2 offsetVector;", "uniform vec3 tint;", "uniform float alpha;", "uniform vec3 color;", "uniform float flipY;", "varying vec4 vColor;", "void main(void) {", "   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);", "   v -= offsetVector.xyx;", "   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);", "   vColor = vec4(color * alpha * tint, alpha);", "}"], this.init() }, e.ComplexPrimitiveShader.prototype.constructor = e.ComplexPrimitiveShader, e.ComplexPrimitiveShader.prototype.init = function() { var t = this.gl,
            i = e.compileProgram(t, this.vertexSrc, this.fragmentSrc);
        t.useProgram(i), this.projectionVector = t.getUniformLocation(i, "projectionVector"), this.offsetVector = t.getUniformLocation(i, "offsetVector"), this.tintColor = t.getUniformLocation(i, "tint"), this.color = t.getUniformLocation(i, "color"), this.flipY = t.getUniformLocation(i, "flipY"), this.aVertexPosition = t.getAttribLocation(i, "aVertexPosition"), this.attributes = [this.aVertexPosition, this.colorAttribute], this.translationMatrix = t.getUniformLocation(i, "translationMatrix"), this.alpha = t.getUniformLocation(i, "alpha"), this.program = i }, e.ComplexPrimitiveShader.prototype.destroy = function() { this.gl.deleteProgram(this.program), this.uniforms = null, this.gl = null, this.attribute = null }, e.glContexts = [], e.instances = [], e.WebGLRenderer = function(t) { this.game = t, e.defaultRenderer || (e.defaultRenderer = this), this.type = e.WEBGL_RENDERER, this.resolution = t.resolution, this.transparent = t.transparent, this.autoResize = !1, this.preserveDrawingBuffer = t.preserveDrawingBuffer, this.clearBeforeRender = t.clearBeforeRender, this.width = t.width, this.height = t.height, this.view = t.canvas, this._contextOptions = { alpha: this.transparent, antialias: t.antialias, premultipliedAlpha: this.transparent && "notMultiplied" !== this.transparent, stencil: !0, preserveDrawingBuffer: this.preserveDrawingBuffer }, this.projection = new e.Point, this.offset = new e.Point, this.shaderManager = new e.WebGLShaderManager, this.spriteBatch = new e.WebGLSpriteBatch, this.maskManager = new e.WebGLMaskManager, this.filterManager = new e.WebGLFilterManager, this.stencilManager = new e.WebGLStencilManager, this.blendModeManager = new e.WebGLBlendModeManager, this.renderSession = {}, this.renderSession.game = this.game, this.renderSession.gl = this.gl, this.renderSession.drawCount = 0, this.renderSession.shaderManager = this.shaderManager, this.renderSession.maskManager = this.maskManager, this.renderSession.filterManager = this.filterManager, this.renderSession.blendModeManager = this.blendModeManager, this.renderSession.spriteBatch = this.spriteBatch, this.renderSession.stencilManager = this.stencilManager, this.renderSession.renderer = this, this.renderSession.resolution = this.resolution, this.initContext(), this.mapBlendModes() }, e.WebGLRenderer.prototype.constructor = e.WebGLRenderer, e.WebGLRenderer.prototype.initContext = function() { var t = this.view.getContext("webgl", this._contextOptions) || this.view.getContext("experimental-webgl", this._contextOptions); if (this.gl = t, !t) throw new Error("This browser does not support webGL. Try using the canvas renderer");
        this.glContextId = t.id = e.WebGLRenderer.glContextId++, e.glContexts[this.glContextId] = t, e.instances[this.glContextId] = this, t.disable(t.DEPTH_TEST), t.disable(t.CULL_FACE), t.enable(t.BLEND), this.shaderManager.setContext(t), this.spriteBatch.setContext(t), this.maskManager.setContext(t), this.filterManager.setContext(t), this.blendModeManager.setContext(t), this.stencilManager.setContext(t), this.renderSession.gl = this.gl, this.resize(this.width, this.height) }, e.WebGLRenderer.prototype.render = function(t) { if (!this.contextLost) { var e = this.gl;
            e.viewport(0, 0, this.width, this.height), e.bindFramebuffer(e.FRAMEBUFFER, null), this.game.clearBeforeRender && (e.clearColor(t._bgColor.r, t._bgColor.g, t._bgColor.b, t._bgColor.a), e.clear(e.COLOR_BUFFER_BIT)), this.offset.x = this.game.camera._shake.x, this.offset.y = this.game.camera._shake.y, this.renderDisplayObject(t, this.projection) } }, e.WebGLRenderer.prototype.renderDisplayObject = function(t, i, n, s) { this.renderSession.blendModeManager.setBlendMode(e.blendModes.NORMAL), this.renderSession.drawCount = 0, this.renderSession.flipY = n ? -1 : 1, this.renderSession.projection = i, this.renderSession.offset = this.offset, this.spriteBatch.begin(this.renderSession), this.filterManager.begin(this.renderSession, n), t._renderWebGL(this.renderSession, s), this.spriteBatch.end() }, e.WebGLRenderer.prototype.resize = function(t, e) { this.width = t * this.resolution, this.height = e * this.resolution, this.view.width = this.width, this.view.height = this.height, this.autoResize && (this.view.style.width = this.width / this.resolution + "px", this.view.style.height = this.height / this.resolution + "px"), this.gl.viewport(0, 0, this.width, this.height), this.projection.x = this.width / 2 / this.resolution, this.projection.y = -this.height / 2 / this.resolution }, e.WebGLRenderer.prototype.updateTexture = function(t) { if (!t.hasLoaded) return !1; var i = this.gl; return t._glTextures[i.id] || (t._glTextures[i.id] = i.createTexture()), i.bindTexture(i.TEXTURE_2D, t._glTextures[i.id]), i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL, t.premultipliedAlpha), i.texImage2D(i.TEXTURE_2D, 0, i.RGBA, i.RGBA, i.UNSIGNED_BYTE, t.source), i.texParameteri(i.TEXTURE_2D, i.TEXTURE_MAG_FILTER, t.scaleMode === e.scaleModes.LINEAR ? i.LINEAR : i.NEAREST), t.mipmap && e.isPowerOfTwo(t.width, t.height) ? (i.texParameteri(i.TEXTURE_2D, i.TEXTURE_MIN_FILTER, t.scaleMode === e.scaleModes.LINEAR ? i.LINEAR_MIPMAP_LINEAR : i.NEAREST_MIPMAP_NEAREST), i.generateMipmap(i.TEXTURE_2D)) : i.texParameteri(i.TEXTURE_2D, i.TEXTURE_MIN_FILTER, t.scaleMode === e.scaleModes.LINEAR ? i.LINEAR : i.NEAREST), t._powerOf2 ? (i.texParameteri(i.TEXTURE_2D, i.TEXTURE_WRAP_S, i.REPEAT), i.texParameteri(i.TEXTURE_2D, i.TEXTURE_WRAP_T, i.REPEAT)) : (i.texParameteri(i.TEXTURE_2D, i.TEXTURE_WRAP_S, i.CLAMP_TO_EDGE), i.texParameteri(i.TEXTURE_2D, i.TEXTURE_WRAP_T, i.CLAMP_TO_EDGE)), t._dirty[i.id] = !1, !0 }, e.WebGLRenderer.prototype.destroy = function() { e.glContexts[this.glContextId] = null, this.projection = null, this.offset = null, this.shaderManager.destroy(), this.spriteBatch.destroy(), this.maskManager.destroy(), this.filterManager.destroy(), this.shaderManager = null, this.spriteBatch = null, this.maskManager = null, this.filterManager = null, this.gl = null, this.renderSession = null, e.CanvasPool.remove(this), e.instances[this.glContextId] = null, e.WebGLRenderer.glContextId-- }, e.WebGLRenderer.prototype.mapBlendModes = function() { var t = this.gl; if (!e.blendModesWebGL) { var i = [],
                n = e.blendModes;
            i[n.NORMAL] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], i[n.ADD] = [t.SRC_ALPHA, t.DST_ALPHA], i[n.MULTIPLY] = [t.DST_COLOR, t.ONE_MINUS_SRC_ALPHA], i[n.SCREEN] = [t.SRC_ALPHA, t.ONE], i[n.OVERLAY] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], i[n.DARKEN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], i[n.LIGHTEN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], i[n.COLOR_DODGE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], i[n.COLOR_BURN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], i[n.HARD_LIGHT] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], i[n.SOFT_LIGHT] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], i[n.DIFFERENCE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], i[n.EXCLUSION] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], i[n.HUE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], i[n.SATURATION] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], i[n.COLOR] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], i[n.LUMINOSITY] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e.blendModesWebGL = i } }, e.WebGLRenderer.glContextId = 0, e.WebGLBlendModeManager = function() { this.currentBlendMode = 99999 }, e.WebGLBlendModeManager.prototype.constructor = e.WebGLBlendModeManager, e.WebGLBlendModeManager.prototype.setContext = function(t) { this.gl = t }, e.WebGLBlendModeManager.prototype.setBlendMode = function(t) { if (this.currentBlendMode === t) return !1;
        this.currentBlendMode = t; var i = e.blendModesWebGL[this.currentBlendMode]; return i && this.gl.blendFunc(i[0], i[1]), !0 }, e.WebGLBlendModeManager.prototype.destroy = function() { this.gl = null }, e.WebGLMaskManager = function() {}, e.WebGLMaskManager.prototype.constructor = e.WebGLMaskManager, e.WebGLMaskManager.prototype.setContext = function(t) { this.gl = t }, e.WebGLMaskManager.prototype.pushMask = function(t, i) { var n = i.gl;
        t.dirty && e.WebGLGraphics.updateGraphics(t, n), void 0 !== t._webGL[n.id] && void 0 !== t._webGL[n.id].data && 0 !== t._webGL[n.id].data.length && i.stencilManager.pushStencil(t, t._webGL[n.id].data[0], i) }, e.WebGLMaskManager.prototype.popMask = function(t, e) { var i = this.gl;
        void 0 !== t._webGL[i.id] && void 0 !== t._webGL[i.id].data && 0 !== t._webGL[i.id].data.length && e.stencilManager.popStencil(t, t._webGL[i.id].data[0], e) }, e.WebGLMaskManager.prototype.destroy = function() { this.gl = null }, e.WebGLStencilManager = function() { this.stencilStack = [], this.reverse = !0, this.count = 0 }, e.WebGLStencilManager.prototype.setContext = function(t) { this.gl = t }, e.WebGLStencilManager.prototype.pushStencil = function(t, e, i) { var n = this.gl;
        this.bindGraphics(t, e, i), 0 === this.stencilStack.length && (n.enable(n.STENCIL_TEST), n.clear(n.STENCIL_BUFFER_BIT), this.reverse = !0, this.count = 0), this.stencilStack.push(e); var s = this.count;
        n.colorMask(!1, !1, !1, !1), n.stencilFunc(n.ALWAYS, 0, 255), n.stencilOp(n.KEEP, n.KEEP, n.INVERT), 1 === e.mode ? (n.drawElements(n.TRIANGLE_FAN, e.indices.length - 4, n.UNSIGNED_SHORT, 0), this.reverse ? (n.stencilFunc(n.EQUAL, 255 - s, 255), n.stencilOp(n.KEEP, n.KEEP, n.DECR)) : (n.stencilFunc(n.EQUAL, s, 255), n.stencilOp(n.KEEP, n.KEEP, n.INCR)), n.drawElements(n.TRIANGLE_FAN, 4, n.UNSIGNED_SHORT, 2 * (e.indices.length - 4)), this.reverse ? n.stencilFunc(n.EQUAL, 255 - (s + 1), 255) : n.stencilFunc(n.EQUAL, s + 1, 255), this.reverse = !this.reverse) : (this.reverse ? (n.stencilFunc(n.EQUAL, s, 255), n.stencilOp(n.KEEP, n.KEEP, n.INCR)) : (n.stencilFunc(n.EQUAL, 255 - s, 255), n.stencilOp(n.KEEP, n.KEEP, n.DECR)), n.drawElements(n.TRIANGLE_STRIP, e.indices.length, n.UNSIGNED_SHORT, 0), this.reverse ? n.stencilFunc(n.EQUAL, s + 1, 255) : n.stencilFunc(n.EQUAL, 255 - (s + 1), 255)), n.colorMask(!0, !0, !0, !0), n.stencilOp(n.KEEP, n.KEEP, n.KEEP), this.count++ }, e.WebGLStencilManager.prototype.bindGraphics = function(t, i, n) { this._currentGraphics = t; var s, o = this.gl,
            a = n.projection,
            r = n.offset;
        1 === i.mode ? (s = n.shaderManager.complexPrimitiveShader, n.shaderManager.setShader(s), o.uniform1f(s.flipY, n.flipY), o.uniformMatrix3fv(s.translationMatrix, !1, t.worldTransform.toArray(!0)), o.uniform2f(s.projectionVector, a.x, -a.y), o.uniform2f(s.offsetVector, -r.x, -r.y), o.uniform3fv(s.tintColor, e.hex2rgb(t.tint)), o.uniform3fv(s.color, i.color), o.uniform1f(s.alpha, t.worldAlpha * i.alpha), o.bindBuffer(o.ARRAY_BUFFER, i.buffer), o.vertexAttribPointer(s.aVertexPosition, 2, o.FLOAT, !1, 8, 0), o.bindBuffer(o.ELEMENT_ARRAY_BUFFER, i.indexBuffer)) : (s = n.shaderManager.primitiveShader, n.shaderManager.setShader(s), o.uniformMatrix3fv(s.translationMatrix, !1, t.worldTransform.toArray(!0)), o.uniform1f(s.flipY, n.flipY), o.uniform2f(s.projectionVector, a.x, -a.y), o.uniform2f(s.offsetVector, -r.x, -r.y), o.uniform3fv(s.tintColor, e.hex2rgb(t.tint)), o.uniform1f(s.alpha, t.worldAlpha), o.bindBuffer(o.ARRAY_BUFFER, i.buffer), o.vertexAttribPointer(s.aVertexPosition, 2, o.FLOAT, !1, 24, 0), o.vertexAttribPointer(s.colorAttribute, 4, o.FLOAT, !1, 24, 8), o.bindBuffer(o.ELEMENT_ARRAY_BUFFER, i.indexBuffer)) }, e.WebGLStencilManager.prototype.popStencil = function(t, e, i) { var n = this.gl; if (this.stencilStack.pop(), this.count--, 0 === this.stencilStack.length) n.disable(n.STENCIL_TEST);
        else { var s = this.count;
            this.bindGraphics(t, e, i), n.colorMask(!1, !1, !1, !1), 1 === e.mode ? (this.reverse = !this.reverse, this.reverse ? (n.stencilFunc(n.EQUAL, 255 - (s + 1), 255), n.stencilOp(n.KEEP, n.KEEP, n.INCR)) : (n.stencilFunc(n.EQUAL, s + 1, 255), n.stencilOp(n.KEEP, n.KEEP, n.DECR)), n.drawElements(n.TRIANGLE_FAN, 4, n.UNSIGNED_SHORT, 2 * (e.indices.length - 4)), n.stencilFunc(n.ALWAYS, 0, 255), n.stencilOp(n.KEEP, n.KEEP, n.INVERT), n.drawElements(n.TRIANGLE_FAN, e.indices.length - 4, n.UNSIGNED_SHORT, 0), this.reverse ? n.stencilFunc(n.EQUAL, s, 255) : n.stencilFunc(n.EQUAL, 255 - s, 255)) : (this.reverse ? (n.stencilFunc(n.EQUAL, s + 1, 255), n.stencilOp(n.KEEP, n.KEEP, n.DECR)) : (n.stencilFunc(n.EQUAL, 255 - (s + 1), 255), n.stencilOp(n.KEEP, n.KEEP, n.INCR)), n.drawElements(n.TRIANGLE_STRIP, e.indices.length, n.UNSIGNED_SHORT, 0), this.reverse ? n.stencilFunc(n.EQUAL, s, 255) : n.stencilFunc(n.EQUAL, 255 - s, 255)), n.colorMask(!0, !0, !0, !0), n.stencilOp(n.KEEP, n.KEEP, n.KEEP) } }, e.WebGLStencilManager.prototype.destroy = function() { this.stencilStack = null, this.gl = null }, e.WebGLShaderManager = function() { this.maxAttibs = 10, this.attribState = [], this.tempAttribState = []; for (var t = 0; t < this.maxAttibs; t++) this.attribState[t] = !1;
        this.stack = [] }, e.WebGLShaderManager.prototype.constructor = e.WebGLShaderManager, e.WebGLShaderManager.prototype.setContext = function(t) { this.gl = t, this.primitiveShader = new e.PrimitiveShader(t), this.complexPrimitiveShader = new e.ComplexPrimitiveShader(t), this.defaultShader = new e.PixiShader(t), this.fastShader = new e.PixiFastShader(t), this.stripShader = new e.StripShader(t), this.setShader(this.defaultShader) }, e.WebGLShaderManager.prototype.setAttribs = function(t) { var e; for (e = 0; e < this.tempAttribState.length; e++) this.tempAttribState[e] = !1; for (e = 0; e < t.length; e++) { var i = t[e];
            this.tempAttribState[i] = !0 } var n = this.gl; for (e = 0; e < this.attribState.length; e++) this.attribState[e] !== this.tempAttribState[e] && (this.attribState[e] = this.tempAttribState[e], this.tempAttribState[e] ? n.enableVertexAttribArray(e) : n.disableVertexAttribArray(e)) }, e.WebGLShaderManager.prototype.setShader = function(t) { return this._currentId !== t._UID && (this._currentId = t._UID, this.currentShader = t, this.gl.useProgram(t.program), this.setAttribs(t.attributes), !0) }, e.WebGLShaderManager.prototype.destroy = function() { this.attribState = null, this.tempAttribState = null, this.primitiveShader.destroy(), this.complexPrimitiveShader.destroy(), this.defaultShader.destroy(), this.fastShader.destroy(), this.stripShader.destroy(), this.gl = null }, e.WebGLSpriteBatch = function() { this.vertSize = 5, this.size = 2e3; var t = 4 * this.size * 4 * this.vertSize,
            i = 6 * this.size;
        this.vertices = new e.ArrayBuffer(t), this.positions = new e.Float32Array(this.vertices), this.colors = new e.Uint32Array(this.vertices), this.indices = new e.Uint16Array(i), this.lastIndexCount = 0; for (var n = 0, s = 0; n < i; n += 6, s += 4) this.indices[n + 0] = s + 0, this.indices[n + 1] = s + 1, this.indices[n + 2] = s + 2, this.indices[n + 3] = s + 0, this.indices[n + 4] = s + 2, this.indices[n + 5] = s + 3;
        this.drawing = !1, this.currentBatchSize = 0, this.currentBaseTexture = null, this.dirty = !0, this.textures = [], this.blendModes = [], this.shaders = [], this.sprites = [], this.defaultShader = new e.AbstractFilter(["precision lowp float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform sampler2D uSampler;", "void main(void) {", "   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;", "}"]) }, e.WebGLSpriteBatch.prototype.setContext = function(t) { this.gl = t, this.vertexBuffer = t.createBuffer(), this.indexBuffer = t.createBuffer(), t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.indexBuffer), t.bufferData(t.ELEMENT_ARRAY_BUFFER, this.indices, t.STATIC_DRAW), t.bindBuffer(t.ARRAY_BUFFER, this.vertexBuffer), t.bufferData(t.ARRAY_BUFFER, this.vertices, t.DYNAMIC_DRAW), this.currentBlendMode = 99999; var i = new e.PixiShader(t);
        i.fragmentSrc = this.defaultShader.fragmentSrc, i.uniforms = {}, i.init(), this.defaultShader.shaders[t.id] = i }, e.WebGLSpriteBatch.prototype.begin = function(t) { this.renderSession = t, this.shader = this.renderSession.shaderManager.defaultShader, this.start() }, e.WebGLSpriteBatch.prototype.end = function() { this.flush() }, e.WebGLSpriteBatch.prototype.render = function(t, e) { var i = t.texture,
            n = t.worldTransform;
        e && (n = e), this.currentBatchSize >= this.size && (this.flush(), this.currentBaseTexture = i.baseTexture); var s = i._uvs; if (s) { var o, a, r, h, l = t.anchor.x,
                c = t.anchor.y; if (i.trim) { var u = i.trim;
                o = (a = u.x - l * u.width) + i.crop.width, r = (h = u.y - c * u.height) + i.crop.height } else o = i.frame.width * (1 - l), a = i.frame.width * -l, r = i.frame.height * (1 - c), h = i.frame.height * -c; var p = 4 * this.currentBatchSize * this.vertSize,
                d = i.baseTexture.resolution,
                m = n.a / d,
                g = n.b / d,
                f = n.c / d,
                y = n.d / d,
                v = n.tx,
                b = n.ty,
                _ = this.colors,
                S = this.positions;
            this.renderSession.roundPixels ? (S[p] = m * a + f * h + v | 0, S[p + 1] = y * h + g * a + b | 0, S[p + 5] = m * o + f * h + v | 0, S[p + 6] = y * h + g * o + b | 0, S[p + 10] = m * o + f * r + v | 0, S[p + 11] = y * r + g * o + b | 0, S[p + 15] = m * a + f * r + v | 0, S[p + 16] = y * r + g * a + b | 0) : (S[p] = m * a + f * h + v, S[p + 1] = y * h + g * a + b, S[p + 5] = m * o + f * h + v, S[p + 6] = y * h + g * o + b, S[p + 10] = m * o + f * r + v, S[p + 11] = y * r + g * o + b, S[p + 15] = m * a + f * r + v, S[p + 16] = y * r + g * a + b), S[p + 2] = s.x0, S[p + 3] = s.y0, S[p + 7] = s.x1, S[p + 8] = s.y1, S[p + 12] = s.x2, S[p + 13] = s.y2, S[p + 17] = s.x3, S[p + 18] = s.y3; var w = t.tint;
            _[p + 4] = _[p + 9] = _[p + 14] = _[p + 19] = (w >> 16) + (65280 & w) + ((255 & w) << 16) + (255 * t.worldAlpha << 24), this.sprites[this.currentBatchSize++] = t } }, e.WebGLSpriteBatch.prototype.renderTilingSprite = function(t) { var i = t.tilingTexture;
        this.currentBatchSize >= this.size && (this.flush(), this.currentBaseTexture = i.baseTexture), t._uvs || (t._uvs = new e.TextureUvs); var n = t._uvs,
            s = i.baseTexture.width,
            o = i.baseTexture.height;
        t.tilePosition.x %= s * t.tileScaleOffset.x, t.tilePosition.y %= o * t.tileScaleOffset.y; var a = t.tilePosition.x / (s * t.tileScaleOffset.x),
            r = t.tilePosition.y / (o * t.tileScaleOffset.y),
            h = t.width / s / (t.tileScale.x * t.tileScaleOffset.x),
            l = t.height / o / (t.tileScale.y * t.tileScaleOffset.y);
        n.x0 = 0 - a, n.y0 = 0 - r, n.x1 = 1 * h - a, n.y1 = 0 - r, n.x2 = 1 * h - a, n.y2 = 1 * l - r, n.x3 = 0 - a, n.y3 = 1 * l - r; var c = t.tint,
            u = (c >> 16) + (65280 & c) + ((255 & c) << 16) + (255 * t.worldAlpha << 24),
            p = this.positions,
            d = this.colors,
            m = t.width,
            g = t.height,
            f = t.anchor.x,
            y = t.anchor.y,
            v = m * (1 - f),
            b = m * -f,
            _ = g * (1 - y),
            S = g * -y,
            w = 4 * this.currentBatchSize * this.vertSize,
            C = i.baseTexture.resolution,
            A = t.worldTransform,
            T = A.a / C,
            x = A.b / C,
            P = A.c / C,
            I = A.d / C,
            O = A.tx,
            E = A.ty;
        p[w++] = T * b + P * S + O, p[w++] = I * S + x * b + E, p[w++] = n.x0, p[w++] = n.y0, d[w++] = u, p[w++] = T * v + P * S + O, p[w++] = I * S + x * v + E, p[w++] = n.x1, p[w++] = n.y1, d[w++] = u, p[w++] = T * v + P * _ + O, p[w++] = I * _ + x * v + E, p[w++] = n.x2, p[w++] = n.y2, d[w++] = u, p[w++] = T * b + P * _ + O, p[w++] = I * _ + x * b + E, p[w++] = n.x3, p[w++] = n.y3, d[w++] = u, this.sprites[this.currentBatchSize++] = t }, e.WebGLSpriteBatch.prototype.flush = function() { if (0 !== this.currentBatchSize) { var t, i = this.gl; if (this.dirty) { this.dirty = !1, i.activeTexture(i.TEXTURE0), i.bindBuffer(i.ARRAY_BUFFER, this.vertexBuffer), i.bindBuffer(i.ELEMENT_ARRAY_BUFFER, this.indexBuffer), t = this.defaultShader.shaders[i.id]; var n = 4 * this.vertSize;
                i.vertexAttribPointer(t.aVertexPosition, 2, i.FLOAT, !1, n, 0), i.vertexAttribPointer(t.aTextureCoord, 2, i.FLOAT, !1, n, 8), i.vertexAttribPointer(t.colorAttribute, 4, i.UNSIGNED_BYTE, !0, n, 16) } if (this.currentBatchSize > .5 * this.size) i.bufferSubData(i.ARRAY_BUFFER, 0, this.vertices);
            else { var s = this.positions.subarray(0, 4 * this.currentBatchSize * this.vertSize);
                i.bufferSubData(i.ARRAY_BUFFER, 0, s) } for (var o, a, r, h, l = 0, c = 0, u = null, p = this.renderSession.blendModeManager.currentBlendMode, d = null, m = !1, g = !1, f = 0, y = this.currentBatchSize; f < y; f++) { o = (h = this.sprites[f]).tilingTexture ? h.tilingTexture.baseTexture : h.texture.baseTexture, m = p !== (a = h.blendMode), g = d !== (r = h.shader || this.defaultShader); var v = o.skipRender; if (v && h.children.length > 0 && (v = !1), (u !== o && !v || m || g) && (this.renderBatch(u, l, c), c = f, l = 0, u = o, m && (p = a, this.renderSession.blendModeManager.setBlendMode(p)), g)) {
                    (t = (d = r).shaders[i.id]) || ((t = new e.PixiShader(i)).fragmentSrc = d.fragmentSrc, t.uniforms = d.uniforms, t.init(), d.shaders[i.id] = t), this.renderSession.shaderManager.setShader(t), t.dirty && t.syncUniforms(); var b = this.renderSession.projection;
                    i.uniform2f(t.projectionVector, b.x, b.y); var _ = this.renderSession.offset;
                    i.uniform2f(t.offsetVector, _.x, _.y) } l++ } this.renderBatch(u, l, c), this.currentBatchSize = 0 } }, e.WebGLSpriteBatch.prototype.renderBatch = function(t, e, i) { if (0 !== e) { var n = this.gl; if (t._dirty[n.id]) { if (!this.renderSession.renderer.updateTexture(t)) return } else n.bindTexture(n.TEXTURE_2D, t._glTextures[n.id]);
            n.drawElements(n.TRIANGLES, 6 * e, n.UNSIGNED_SHORT, 6 * i * 2), this.renderSession.drawCount++ } }, e.WebGLSpriteBatch.prototype.stop = function() { this.flush(), this.dirty = !0 }, e.WebGLSpriteBatch.prototype.start = function() { this.dirty = !0 }, e.WebGLSpriteBatch.prototype.destroy = function() { this.vertices = null, this.indices = null, this.gl.deleteBuffer(this.vertexBuffer), this.gl.deleteBuffer(this.indexBuffer), this.currentBaseTexture = null, this.gl = null }, e.WebGLFastSpriteBatch = function(t) { this.vertSize = 10, this.maxSize = 6e3, this.size = this.maxSize; var i = 4 * this.size * this.vertSize,
            n = 6 * this.maxSize;
        this.vertices = new e.Float32Array(i), this.indices = new e.Uint16Array(n), this.vertexBuffer = null, this.indexBuffer = null, this.lastIndexCount = 0; for (var s = 0, o = 0; s < n; s += 6, o += 4) this.indices[s + 0] = o + 0, this.indices[s + 1] = o + 1, this.indices[s + 2] = o + 2, this.indices[s + 3] = o + 0, this.indices[s + 4] = o + 2, this.indices[s + 5] = o + 3;
        this.drawing = !1, this.currentBatchSize = 0, this.currentBaseTexture = null, this.currentBlendMode = 0, this.renderSession = null, this.shader = null, this.matrix = null, this.setContext(t) }, e.WebGLFastSpriteBatch.prototype.constructor = e.WebGLFastSpriteBatch, e.WebGLFastSpriteBatch.prototype.setContext = function(t) { this.gl = t, this.vertexBuffer = t.createBuffer(), this.indexBuffer = t.createBuffer(), t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.indexBuffer), t.bufferData(t.ELEMENT_ARRAY_BUFFER, this.indices, t.STATIC_DRAW), t.bindBuffer(t.ARRAY_BUFFER, this.vertexBuffer), t.bufferData(t.ARRAY_BUFFER, this.vertices, t.DYNAMIC_DRAW) }, e.WebGLFastSpriteBatch.prototype.begin = function(t, e) { this.renderSession = e, this.shader = this.renderSession.shaderManager.fastShader, this.matrix = t.worldTransform.toArray(!0), this.start() }, e.WebGLFastSpriteBatch.prototype.end = function() { this.flush() }, e.WebGLFastSpriteBatch.prototype.render = function(t) { var e = t.children,
            i = e[0]; if (i.texture._uvs) { this.currentBaseTexture = i.texture.baseTexture, i.blendMode !== this.renderSession.blendModeManager.currentBlendMode && (this.flush(), this.renderSession.blendModeManager.setBlendMode(i.blendMode)); for (var n = 0, s = e.length; n < s; n++) this.renderSprite(e[n]);
            this.flush() } }, e.WebGLFastSpriteBatch.prototype.renderSprite = function(t) { if (t.visible && (t.texture.baseTexture === this.currentBaseTexture || t.texture.baseTexture.skipRender || (this.flush(), this.currentBaseTexture = t.texture.baseTexture, t.texture._uvs))) { var e, i, n, s, o, a, r = this.vertices; if (e = t.texture._uvs, t.texture.frame.width, t.texture.frame.height, t.texture.trim) { var h = t.texture.trim;
                i = (n = h.x - t.anchor.x * h.width) + t.texture.crop.width, s = (o = h.y - t.anchor.y * h.height) + t.texture.crop.height } else i = t.texture.frame.width * (1 - t.anchor.x), n = t.texture.frame.width * -t.anchor.x, s = t.texture.frame.height * (1 - t.anchor.y), o = t.texture.frame.height * -t.anchor.y;
            a = 4 * this.currentBatchSize * this.vertSize, r[a++] = n, r[a++] = o, r[a++] = t.position.x, r[a++] = t.position.y, r[a++] = t.scale.x, r[a++] = t.scale.y, r[a++] = t.rotation, r[a++] = e.x0, r[a++] = e.y1, r[a++] = t.alpha, r[a++] = i, r[a++] = o, r[a++] = t.position.x, r[a++] = t.position.y, r[a++] = t.scale.x, r[a++] = t.scale.y, r[a++] = t.rotation, r[a++] = e.x1, r[a++] = e.y1, r[a++] = t.alpha, r[a++] = i, r[a++] = s, r[a++] = t.position.x, r[a++] = t.position.y, r[a++] = t.scale.x, r[a++] = t.scale.y, r[a++] = t.rotation, r[a++] = e.x2, r[a++] = e.y2, r[a++] = t.alpha, r[a++] = n, r[a++] = s, r[a++] = t.position.x, r[a++] = t.position.y, r[a++] = t.scale.x, r[a++] = t.scale.y, r[a++] = t.rotation, r[a++] = e.x3, r[a++] = e.y3, r[a++] = t.alpha, ++this.currentBatchSize >= this.size && this.flush() } }, e.WebGLFastSpriteBatch.prototype.flush = function() { if (0 !== this.currentBatchSize) { var t = this.gl; if (this.currentBaseTexture._glTextures[t.id] || this.renderSession.renderer.updateTexture(this.currentBaseTexture, t), t.bindTexture(t.TEXTURE_2D, this.currentBaseTexture._glTextures[t.id]), this.currentBatchSize > .5 * this.size) t.bufferSubData(t.ARRAY_BUFFER, 0, this.vertices);
            else { var e = this.vertices.subarray(0, 4 * this.currentBatchSize * this.vertSize);
                t.bufferSubData(t.ARRAY_BUFFER, 0, e) } t.drawElements(t.TRIANGLES, 6 * this.currentBatchSize, t.UNSIGNED_SHORT, 0), this.currentBatchSize = 0, this.renderSession.drawCount++ } }, e.WebGLFastSpriteBatch.prototype.stop = function() { this.flush() }, e.WebGLFastSpriteBatch.prototype.start = function() { var t = this.gl;
        t.activeTexture(t.TEXTURE0), t.bindBuffer(t.ARRAY_BUFFER, this.vertexBuffer), t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.indexBuffer); var e = this.renderSession.projection;
        t.uniform2f(this.shader.projectionVector, e.x, e.y), t.uniformMatrix3fv(this.shader.uMatrix, !1, this.matrix); var i = 4 * this.vertSize;
        t.vertexAttribPointer(this.shader.aVertexPosition, 2, t.FLOAT, !1, i, 0), t.vertexAttribPointer(this.shader.aPositionCoord, 2, t.FLOAT, !1, i, 8), t.vertexAttribPointer(this.shader.aScale, 2, t.FLOAT, !1, i, 16), t.vertexAttribPointer(this.shader.aRotation, 1, t.FLOAT, !1, i, 24), t.vertexAttribPointer(this.shader.aTextureCoord, 2, t.FLOAT, !1, i, 28), t.vertexAttribPointer(this.shader.colorAttribute, 1, t.FLOAT, !1, i, 36) }, e.WebGLFilterManager = function() { this.filterStack = [], this.offsetX = 0, this.offsetY = 0 }, e.WebGLFilterManager.prototype.constructor = e.WebGLFilterManager, e.WebGLFilterManager.prototype.setContext = function(t) { this.gl = t, this.texturePool = [], this.initShaderBuffers() }, e.WebGLFilterManager.prototype.begin = function(t, e) { this.renderSession = t, this.defaultShader = t.shaderManager.defaultShader; var i = this.renderSession.projection;
        this.width = 2 * i.x, this.height = 2 * -i.y, this.buffer = e }, e.WebGLFilterManager.prototype.pushFilter = function(t) { var i = this.gl,
            n = this.renderSession.projection,
            s = this.renderSession.offset;
        t._filterArea = t.target.filterArea || t.target.getBounds(), t._previous_stencil_mgr = this.renderSession.stencilManager, this.renderSession.stencilManager = new e.WebGLStencilManager, this.renderSession.stencilManager.setContext(i), i.disable(i.STENCIL_TEST), this.filterStack.push(t); var o = t.filterPasses[0];
        this.offsetX += t._filterArea.x, this.offsetY += t._filterArea.y; var a = this.texturePool.pop();
        a ? a.resize(this.width * this.renderSession.resolution, this.height * this.renderSession.resolution) : a = new e.FilterTexture(this.gl, this.width * this.renderSession.resolution, this.height * this.renderSession.resolution), i.bindTexture(i.TEXTURE_2D, a.texture); var r = t._filterArea,
            h = o.padding;
        r.x -= h, r.y -= h, r.width += 2 * h, r.height += 2 * h, r.x < 0 && (r.x = 0), r.width > this.width && (r.width = this.width), r.y < 0 && (r.y = 0), r.height > this.height && (r.height = this.height), i.bindFramebuffer(i.FRAMEBUFFER, a.frameBuffer), i.viewport(0, 0, r.width * this.renderSession.resolution, r.height * this.renderSession.resolution), n.x = r.width / 2, n.y = -r.height / 2, s.x = -r.x, s.y = -r.y, i.colorMask(!0, !0, !0, !0), i.clearColor(0, 0, 0, 0), i.clear(i.COLOR_BUFFER_BIT), t._glFilterTexture = a }, e.WebGLFilterManager.prototype.popFilter = function() { var t = this.gl,
            i = this.filterStack.pop(),
            n = i._filterArea,
            s = i._glFilterTexture,
            o = this.renderSession.projection,
            a = this.renderSession.offset; if (i.filterPasses.length > 1) { t.viewport(0, 0, n.width * this.renderSession.resolution, n.height * this.renderSession.resolution), t.bindBuffer(t.ARRAY_BUFFER, this.vertexBuffer), this.vertexArray[0] = 0, this.vertexArray[1] = n.height, this.vertexArray[2] = n.width, this.vertexArray[3] = n.height, this.vertexArray[4] = 0, this.vertexArray[5] = 0, this.vertexArray[6] = n.width, this.vertexArray[7] = 0, t.bufferSubData(t.ARRAY_BUFFER, 0, this.vertexArray), t.bindBuffer(t.ARRAY_BUFFER, this.uvBuffer), this.uvArray[2] = n.width / this.width, this.uvArray[5] = n.height / this.height, this.uvArray[6] = n.width / this.width, this.uvArray[7] = n.height / this.height, t.bufferSubData(t.ARRAY_BUFFER, 0, this.uvArray); var r = s,
                h = this.texturePool.pop();
            h || (h = new e.FilterTexture(this.gl, this.width * this.renderSession.resolution, this.height * this.renderSession.resolution)), h.resize(this.width * this.renderSession.resolution, this.height * this.renderSession.resolution), t.bindFramebuffer(t.FRAMEBUFFER, h.frameBuffer), t.clear(t.COLOR_BUFFER_BIT), t.disable(t.BLEND); for (var l = 0; l < i.filterPasses.length - 1; l++) { var c = i.filterPasses[l];
                t.bindFramebuffer(t.FRAMEBUFFER, h.frameBuffer), t.activeTexture(t.TEXTURE0), t.bindTexture(t.TEXTURE_2D, r.texture), this.applyFilterPass(c, n, n.width, n.height); var u = r;
                r = h, h = u } t.enable(t.BLEND), s = r, this.texturePool.push(h) } var p = i.filterPasses[i.filterPasses.length - 1];
        this.offsetX -= n.x, this.offsetY -= n.y; var d = this.width,
            m = this.height,
            g = 0,
            f = 0,
            y = this.buffer; if (0 === this.filterStack.length) t.colorMask(!0, !0, !0, !0);
        else { var v = this.filterStack[this.filterStack.length - 1];
            d = (n = v._filterArea).width, m = n.height, g = n.x, f = n.y, y = v._glFilterTexture.frameBuffer } o.x = d / 2, o.y = -m / 2, a.x = g, a.y = f; var b = (n = i._filterArea).x - g,
            _ = n.y - f;
        t.bindBuffer(t.ARRAY_BUFFER, this.vertexBuffer), this.vertexArray[0] = b, this.vertexArray[1] = _ + n.height, this.vertexArray[2] = b + n.width, this.vertexArray[3] = _ + n.height, this.vertexArray[4] = b, this.vertexArray[5] = _, this.vertexArray[6] = b + n.width, this.vertexArray[7] = _, t.bufferSubData(t.ARRAY_BUFFER, 0, this.vertexArray), t.bindBuffer(t.ARRAY_BUFFER, this.uvBuffer), this.uvArray[2] = n.width / this.width, this.uvArray[5] = n.height / this.height, this.uvArray[6] = n.width / this.width, this.uvArray[7] = n.height / this.height, t.bufferSubData(t.ARRAY_BUFFER, 0, this.uvArray), t.viewport(0, 0, d * this.renderSession.resolution, m * this.renderSession.resolution), t.bindFramebuffer(t.FRAMEBUFFER, y), t.activeTexture(t.TEXTURE0), t.bindTexture(t.TEXTURE_2D, s.texture), this.renderSession.stencilManager && this.renderSession.stencilManager.destroy(), this.renderSession.stencilManager = i._previous_stencil_mgr, i._previous_stencil_mgr = null, this.renderSession.stencilManager.count > 0 ? t.enable(t.STENCIL_TEST) : t.disable(t.STENCIL_TEST), this.applyFilterPass(p, n, d, m), this.texturePool.push(s), i._glFilterTexture = null }, e.WebGLFilterManager.prototype.applyFilterPass = function(t, i, n, s) { var o = this.gl,
            a = t.shaders[o.id];
        a || ((a = new e.PixiShader(o)).fragmentSrc = t.fragmentSrc, a.uniforms = t.uniforms, a.init(), t.shaders[o.id] = a), this.renderSession.shaderManager.setShader(a), o.uniform2f(a.projectionVector, n / 2, -s / 2), o.uniform2f(a.offsetVector, 0, 0), t.uniforms.dimensions && (t.uniforms.dimensions.value[0] = this.width, t.uniforms.dimensions.value[1] = this.height, t.uniforms.dimensions.value[2] = this.vertexArray[0], t.uniforms.dimensions.value[3] = this.vertexArray[5]), a.syncUniforms(), o.bindBuffer(o.ARRAY_BUFFER, this.vertexBuffer), o.vertexAttribPointer(a.aVertexPosition, 2, o.FLOAT, !1, 0, 0), o.bindBuffer(o.ARRAY_BUFFER, this.uvBuffer), o.vertexAttribPointer(a.aTextureCoord, 2, o.FLOAT, !1, 0, 0), o.bindBuffer(o.ARRAY_BUFFER, this.colorBuffer), o.vertexAttribPointer(a.colorAttribute, 2, o.FLOAT, !1, 0, 0), o.bindBuffer(o.ELEMENT_ARRAY_BUFFER, this.indexBuffer), o.drawElements(o.TRIANGLES, 6, o.UNSIGNED_SHORT, 0), this.renderSession.drawCount++ }, e.WebGLFilterManager.prototype.initShaderBuffers = function() { var t = this.gl;
        this.vertexBuffer = t.createBuffer(), this.uvBuffer = t.createBuffer(), this.colorBuffer = t.createBuffer(), this.indexBuffer = t.createBuffer(), this.vertexArray = new e.Float32Array([0, 0, 1, 0, 0, 1, 1, 1]), t.bindBuffer(t.ARRAY_BUFFER, this.vertexBuffer), t.bufferData(t.ARRAY_BUFFER, this.vertexArray, t.STATIC_DRAW), this.uvArray = new e.Float32Array([0, 0, 1, 0, 0, 1, 1, 1]), t.bindBuffer(t.ARRAY_BUFFER, this.uvBuffer), t.bufferData(t.ARRAY_BUFFER, this.uvArray, t.STATIC_DRAW), this.colorArray = new e.Float32Array([1, 16777215, 1, 16777215, 1, 16777215, 1, 16777215]), t.bindBuffer(t.ARRAY_BUFFER, this.colorBuffer), t.bufferData(t.ARRAY_BUFFER, this.colorArray, t.STATIC_DRAW), t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.indexBuffer), t.bufferData(t.ELEMENT_ARRAY_BUFFER, new Uint16Array([0, 1, 2, 1, 3, 2]), t.STATIC_DRAW) }, e.WebGLFilterManager.prototype.destroy = function() { var t = this.gl;
        this.filterStack = null, this.offsetX = 0, this.offsetY = 0; for (var e = 0; e < this.texturePool.length; e++) this.texturePool[e].destroy();
        this.texturePool = null, t.deleteBuffer(this.vertexBuffer), t.deleteBuffer(this.uvBuffer), t.deleteBuffer(this.colorBuffer), t.deleteBuffer(this.indexBuffer) }, e.FilterTexture = function(t, i, n, s) { this.gl = t, this.frameBuffer = t.createFramebuffer(), this.texture = t.createTexture(), s = s || e.scaleModes.DEFAULT, t.bindTexture(t.TEXTURE_2D, this.texture), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MAG_FILTER, s === e.scaleModes.LINEAR ? t.LINEAR : t.NEAREST), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MIN_FILTER, s === e.scaleModes.LINEAR ? t.LINEAR : t.NEAREST), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, t.CLAMP_TO_EDGE), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, t.CLAMP_TO_EDGE), t.bindFramebuffer(t.FRAMEBUFFER, this.frameBuffer), t.bindFramebuffer(t.FRAMEBUFFER, this.frameBuffer), t.framebufferTexture2D(t.FRAMEBUFFER, t.COLOR_ATTACHMENT0, t.TEXTURE_2D, this.texture, 0), this.renderBuffer = t.createRenderbuffer(), t.bindRenderbuffer(t.RENDERBUFFER, this.renderBuffer), t.framebufferRenderbuffer(t.FRAMEBUFFER, t.DEPTH_STENCIL_ATTACHMENT, t.RENDERBUFFER, this.renderBuffer), this.resize(i, n) }, e.FilterTexture.prototype.constructor = e.FilterTexture, e.FilterTexture.prototype.clear = function() { var t = this.gl;
        t.clearColor(0, 0, 0, 0), t.clear(t.COLOR_BUFFER_BIT) }, e.FilterTexture.prototype.resize = function(t, e) { if (this.width !== t || this.height !== e) { this.width = t, this.height = e; var i = this.gl;
            i.bindTexture(i.TEXTURE_2D, this.texture), i.texImage2D(i.TEXTURE_2D, 0, i.RGBA, t, e, 0, i.RGBA, i.UNSIGNED_BYTE, null), i.bindRenderbuffer(i.RENDERBUFFER, this.renderBuffer), i.renderbufferStorage(i.RENDERBUFFER, i.DEPTH_STENCIL, t, e) } }, e.FilterTexture.prototype.destroy = function() { var t = this.gl;
        t.deleteFramebuffer(this.frameBuffer), t.deleteTexture(this.texture), this.frameBuffer = null, this.texture = null }, e.CanvasBuffer = function(t, i) { this.width = t, this.height = i, this.canvas = e.CanvasPool.create(this, this.width, this.height), this.context = this.canvas.getContext("2d"), this.canvas.width = t, this.canvas.height = i }, e.CanvasBuffer.prototype.constructor = e.CanvasBuffer, e.CanvasBuffer.prototype.clear = function() { this.context.setTransform(1, 0, 0, 1, 0, 0), this.context.clearRect(0, 0, this.width, this.height) }, e.CanvasBuffer.prototype.resize = function(t, e) { this.width = this.canvas.width = t, this.height = this.canvas.height = e }, e.CanvasBuffer.prototype.destroy = function() { e.CanvasPool.remove(this) }, e.CanvasMaskManager = function() {}, e.CanvasMaskManager.prototype.constructor = e.CanvasMaskManager, e.CanvasMaskManager.prototype.pushMask = function(t, i) { var n = i.context;
        n.save(); var s = t.alpha,
            o = t.worldTransform,
            a = i.resolution;
        n.setTransform(o.a * a, o.b * a, o.c * a, o.d * a, o.tx * a, o.ty * a), e.CanvasGraphics.renderGraphicsMask(t, n), n.clip(), t.worldAlpha = s }, e.CanvasMaskManager.prototype.popMask = function(t) { t.context.restore() }, e.CanvasTinter = function() {}, e.CanvasTinter.getTintedTexture = function(t, i) { var n = t.tintedTexture || e.CanvasPool.create(this); return e.CanvasTinter.tintMethod(t.texture, i, n), n }, e.CanvasTinter.tintWithMultiply = function(t, e, i) { var n = i.getContext("2d"),
            s = t.crop;
        i.width === s.width && i.height === s.height || (i.width = s.width, i.height = s.height), n.clearRect(0, 0, s.width, s.height), n.fillStyle = "#" + ("00000" + (0 | e).toString(16)).substr(-6), n.fillRect(0, 0, s.width, s.height), n.globalCompositeOperation = "multiply", n.drawImage(t.baseTexture.source, s.x, s.y, s.width, s.height, 0, 0, s.width, s.height), n.globalCompositeOperation = "destination-atop", n.drawImage(t.baseTexture.source, s.x, s.y, s.width, s.height, 0, 0, s.width, s.height) }, e.CanvasTinter.tintWithPerPixel = function(t, i, n) { var s = n.getContext("2d"),
            o = t.crop;
        n.width = o.width, n.height = o.height, s.globalCompositeOperation = "copy", s.drawImage(t.baseTexture.source, o.x, o.y, o.width, o.height, 0, 0, o.width, o.height); for (var a = e.hex2rgb(i), r = a[0], h = a[1], l = a[2], c = s.getImageData(0, 0, o.width, o.height), u = c.data, p = 0; p < u.length; p += 4)
            if (u[p + 0] *= r, u[p + 1] *= h, u[p + 2] *= l, !e.CanvasTinter.canHandleAlpha) { var d = u[p + 3];
                u[p + 0] /= 255 / d, u[p + 1] /= 255 / d, u[p + 2] /= 255 / d } s.putImageData(c, 0, 0) }, e.CanvasTinter.checkInverseAlpha = function() { var t = new e.CanvasBuffer(2, 1);
        t.context.fillStyle = "rgba(10, 20, 30, 0.5)", t.context.fillRect(0, 0, 1, 1); var i = t.context.getImageData(0, 0, 1, 1); if (null === i) return !1;
        t.context.putImageData(i, 1, 0); var n = t.context.getImageData(1, 0, 1, 1); return n.data[0] === i.data[0] && n.data[1] === i.data[1] && n.data[2] === i.data[2] && n.data[3] === i.data[3] }, e.CanvasTinter.canHandleAlpha = e.CanvasTinter.checkInverseAlpha(), e.CanvasTinter.canUseMultiply = e.canUseNewCanvasBlendModes(), e.CanvasTinter.tintMethod = e.CanvasTinter.canUseMultiply ? e.CanvasTinter.tintWithMultiply : e.CanvasTinter.tintWithPerPixel, e.CanvasRenderer = function(t) { this.game = t, e.defaultRenderer || (e.defaultRenderer = this), this.type = e.CANVAS_RENDERER, this.resolution = t.resolution, this.clearBeforeRender = t.clearBeforeRender, this.transparent = t.transparent, this.autoResize = !1, this.width = t.width * this.resolution, this.height = t.height * this.resolution, this.view = t.canvas, this.context = this.view.getContext("2d", { alpha: this.transparent }), this.refresh = !0, this.count = 0, this.maskManager = new e.CanvasMaskManager, this.renderSession = { context: this.context, maskManager: this.maskManager, scaleMode: null, smoothProperty: Phaser.Canvas.getSmoothingPrefix(this.context), roundPixels: !1 }, this.mapBlendModes(), this.resize(this.width, this.height) }, e.CanvasRenderer.prototype.constructor = e.CanvasRenderer, e.CanvasRenderer.prototype.render = function(t) { this.context.setTransform(1, 0, 0, 1, 0, 0), this.context.globalAlpha = 1, this.renderSession.currentBlendMode = 0, this.renderSession.shakeX = this.game.camera._shake.x, this.renderSession.shakeY = this.game.camera._shake.y, this.context.globalCompositeOperation = "source-over", navigator.isCocoonJS && this.view.screencanvas && (this.context.fillStyle = "black", this.context.clear()), this.clearBeforeRender && (this.transparent ? this.context.clearRect(0, 0, this.width, this.height) : t._bgColor && (this.context.fillStyle = t._bgColor.rgba, this.context.fillRect(0, 0, this.width, this.height))), this.renderDisplayObject(t) }, e.CanvasRenderer.prototype.destroy = function(t) { void 0 === t && (t = !0), t && this.view.parent && this.view.parent.removeChild(this.view), this.view = null, this.context = null, this.maskManager = null, this.renderSession = null }, e.CanvasRenderer.prototype.resize = function(t, i) { this.width = t * this.resolution, this.height = i * this.resolution, this.view.width = this.width, this.view.height = this.height, this.autoResize && (this.view.style.width = this.width / this.resolution + "px", this.view.style.height = this.height / this.resolution + "px"), this.renderSession.smoothProperty && (this.context[this.renderSession.smoothProperty] = this.renderSession.scaleMode === e.scaleModes.LINEAR) }, e.CanvasRenderer.prototype.renderDisplayObject = function(t, e, i) { this.renderSession.context = e || this.context, this.renderSession.resolution = this.resolution, t._renderCanvas(this.renderSession, i) }, e.CanvasRenderer.prototype.mapBlendModes = function() { if (!e.blendModesCanvas) { var t = [],
                i = e.blendModes,
                n = e.canUseNewCanvasBlendModes();
            t[i.NORMAL] = "source-over", t[i.ADD] = "lighter", t[i.MULTIPLY] = n ? "multiply" : "source-over", t[i.SCREEN] = n ? "screen" : "source-over", t[i.OVERLAY] = n ? "overlay" : "source-over", t[i.DARKEN] = n ? "darken" : "source-over", t[i.LIGHTEN] = n ? "lighten" : "source-over", t[i.COLOR_DODGE] = n ? "color-dodge" : "source-over", t[i.COLOR_BURN] = n ? "color-burn" : "source-over", t[i.HARD_LIGHT] = n ? "hard-light" : "source-over", t[i.SOFT_LIGHT] = n ? "soft-light" : "source-over", t[i.DIFFERENCE] = n ? "difference" : "source-over", t[i.EXCLUSION] = n ? "exclusion" : "source-over", t[i.HUE] = n ? "hue" : "source-over", t[i.SATURATION] = n ? "saturation" : "source-over", t[i.COLOR] = n ? "color" : "source-over", t[i.LUMINOSITY] = n ? "luminosity" : "source-over", e.blendModesCanvas = t } }, e.BaseTexture = function(t, i) { this.resolution = 1, this.width = 100, this.height = 100, this.scaleMode = i || e.scaleModes.DEFAULT, this.hasLoaded = !1, this.source = t, this.premultipliedAlpha = !0, this._glTextures = [], this.mipmap = !1, this._dirty = [!0, !0, !0, !0], t && ((this.source.complete || this.source.getContext) && this.source.width && this.source.height && (this.hasLoaded = !0, this.width = this.source.naturalWidth || this.source.width, this.height = this.source.naturalHeight || this.source.height, this.dirty()), this.skipRender = !1, this._powerOf2 = !1) }, e.BaseTexture.prototype.constructor = e.BaseTexture, e.BaseTexture.prototype.forceLoaded = function(t, e) { this.hasLoaded = !0, this.width = t, this.height = e, this.dirty() }, e.BaseTexture.prototype.destroy = function() { this.source && e.CanvasPool.removeByCanvas(this.source), this.source = null, this.unloadFromGPU() }, e.BaseTexture.prototype.updateSourceImage = function(t) { console.warn("PIXI.BaseTexture.updateSourceImage is deprecated. Use Phaser.Sprite.loadTexture instead.") }, e.BaseTexture.prototype.dirty = function() { for (var t = 0; t < this._glTextures.length; t++) this._dirty[t] = !0 }, e.BaseTexture.prototype.unloadFromGPU = function() { this.dirty(); for (var t = this._glTextures.length - 1; t >= 0; t--) { var i = this._glTextures[t],
                n = e.glContexts[t];
            n && i && n.deleteTexture(i) } this._glTextures.length = 0, this.dirty() }, e.BaseTexture.fromCanvas = function(t, i) { return 0 === t.width && (t.width = 1), 0 === t.height && (t.height = 1), new e.BaseTexture(t, i) }, e.TextureSilentFail = !1, e.Texture = function(t, i, n, s) { this.noFrame = !1, i || (this.noFrame = !0, i = new e.Rectangle(0, 0, 1, 1)), t instanceof e.Texture && (t = t.baseTexture), this.baseTexture = t, this.frame = i, this.trim = s, this.valid = !1, this.isTiling = !1, this.requiresUpdate = !1, this.requiresReTint = !1, this._uvs = null, this.width = 0, this.height = 0, this.crop = n || new e.Rectangle(0, 0, 1, 1), t.hasLoaded && (this.noFrame && (i = new e.Rectangle(0, 0, t.width, t.height)), this.setFrame(i)) }, e.Texture.prototype.constructor = e.Texture, e.Texture.prototype.onBaseTextureLoaded = function() { var t = this.baseTexture;
        this.noFrame && (this.frame = new e.Rectangle(0, 0, t.width, t.height)), this.setFrame(this.frame) }, e.Texture.prototype.destroy = function(t) { t && this.baseTexture.destroy(), this.valid = !1 }, e.Texture.prototype.setFrame = function(t) { if (this.noFrame = !1, this.frame = t, this.width = t.width, this.height = t.height, this.crop.x = t.x, this.crop.y = t.y, this.crop.width = t.width, this.crop.height = t.height, this.trim || !(t.x + t.width > this.baseTexture.width || t.y + t.height > this.baseTexture.height)) this.valid = t && t.width && t.height && this.baseTexture.source && this.baseTexture.hasLoaded, this.trim && (this.width = this.trim.width, this.height = this.trim.height, this.frame.width = this.trim.width, this.frame.height = this.trim.height), this.valid && this._updateUvs();
        else { if (!e.TextureSilentFail) throw new Error("Texture Error: frame does not fit inside the base Texture dimensions " + this);
            this.valid = !1 } }, e.Texture.prototype._updateUvs = function() { this._uvs || (this._uvs = new e.TextureUvs); var t = this.crop,
            i = this.baseTexture.width,
            n = this.baseTexture.height;
        this._uvs.x0 = t.x / i, this._uvs.y0 = t.y / n, this._uvs.x1 = (t.x + t.width) / i, this._uvs.y1 = t.y / n, this._uvs.x2 = (t.x + t.width) / i, this._uvs.y2 = (t.y + t.height) / n, this._uvs.x3 = t.x / i, this._uvs.y3 = (t.y + t.height) / n }, e.Texture.fromCanvas = function(t, i) { var n = e.BaseTexture.fromCanvas(t, i); return new e.Texture(n) }, e.TextureUvs = function() { this.x0 = 0, this.y0 = 0, this.x1 = 0, this.y1 = 0, this.x2 = 0, this.y2 = 0, this.x3 = 0, this.y3 = 0 }, e.RenderTexture = function(t, i, n, s, o) { if (this.width = t || 100, this.height = i || 100, this.resolution = o || 1, this.frame = new e.Rectangle(0, 0, this.width * this.resolution, this.height * this.resolution), this.crop = new e.Rectangle(0, 0, this.width * this.resolution, this.height * this.resolution), this.baseTexture = new e.BaseTexture, this.baseTexture.width = this.width * this.resolution, this.baseTexture.height = this.height * this.resolution, this.baseTexture._glTextures = [], this.baseTexture.resolution = this.resolution, this.baseTexture.scaleMode = s || e.scaleModes.DEFAULT, this.baseTexture.hasLoaded = !0, e.Texture.call(this, this.baseTexture, new e.Rectangle(0, 0, this.width * this.resolution, this.height * this.resolution)), this.renderer = n || e.defaultRenderer, this.renderer.type === e.WEBGL_RENDERER) { var a = this.renderer.gl;
            this.baseTexture._dirty[a.id] = !1, this.textureBuffer = new e.FilterTexture(a, this.width, this.height, this.baseTexture.scaleMode), this.baseTexture._glTextures[a.id] = this.textureBuffer.texture, this.render = this.renderWebGL, this.projection = new e.Point(.5 * this.width, .5 * -this.height) } else this.render = this.renderCanvas, this.textureBuffer = new e.CanvasBuffer(this.width * this.resolution, this.height * this.resolution), this.baseTexture.source = this.textureBuffer.canvas;
        this.valid = !0, this.tempMatrix = new Phaser.Matrix, this._updateUvs() }, e.RenderTexture.prototype = Object.create(e.Texture.prototype), e.RenderTexture.prototype.constructor = e.RenderTexture, e.RenderTexture.prototype.resize = function(t, i, n) { t === this.width && i === this.height || (this.valid = t > 0 && i > 0, this.width = t, this.height = i, this.frame.width = this.crop.width = t * this.resolution, this.frame.height = this.crop.height = i * this.resolution, n && (this.baseTexture.width = this.width * this.resolution, this.baseTexture.height = this.height * this.resolution), this.renderer.type === e.WEBGL_RENDERER && (this.projection.x = this.width / 2, this.projection.y = -this.height / 2), this.valid && this.textureBuffer.resize(this.width, this.height)) }, e.RenderTexture.prototype.clear = function() { this.valid && (this.renderer.type === e.WEBGL_RENDERER && this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER, this.textureBuffer.frameBuffer), this.textureBuffer.clear()) }, e.RenderTexture.prototype.renderWebGL = function(t, e, i) { if (this.valid && 0 !== t.alpha) { var n = t.worldTransform;
            n.identity(), n.translate(0, 2 * this.projection.y), e && n.append(e), n.scale(1, -1); for (var s = 0; s < t.children.length; s++) t.children[s].updateTransform(); var o = this.renderer.gl;
            o.viewport(0, 0, this.width * this.resolution, this.height * this.resolution), o.bindFramebuffer(o.FRAMEBUFFER, this.textureBuffer.frameBuffer), i && this.textureBuffer.clear(), this.renderer.spriteBatch.dirty = !0, this.renderer.renderDisplayObject(t, this.projection, this.textureBuffer.frameBuffer, e), this.renderer.spriteBatch.dirty = !0 } }, e.RenderTexture.prototype.renderCanvas = function(t, e, i) { if (this.valid && 0 !== t.alpha) { var n = t.worldTransform;
            n.identity(), e && n.append(e); for (var s = 0; s < t.children.length; s++) t.children[s].updateTransform();
            i && this.textureBuffer.clear(); var o = this.renderer.resolution;
            this.renderer.resolution = this.resolution, this.renderer.renderDisplayObject(t, this.textureBuffer.context, e), this.renderer.resolution = o } }, e.RenderTexture.prototype.getImage = function() { var t = new Image; return t.src = this.getBase64(), t }, e.RenderTexture.prototype.getBase64 = function() { return this.getCanvas().toDataURL() }, e.RenderTexture.prototype.getCanvas = function() { if (this.renderer.type === e.WEBGL_RENDERER) { var t = this.renderer.gl,
                i = this.textureBuffer.width,
                n = this.textureBuffer.height,
                s = new Uint8Array(4 * i * n);
            t.bindFramebuffer(t.FRAMEBUFFER, this.textureBuffer.frameBuffer), t.readPixels(0, 0, i, n, t.RGBA, t.UNSIGNED_BYTE, s), t.bindFramebuffer(t.FRAMEBUFFER, null); var o = new e.CanvasBuffer(i, n),
                a = o.context.getImageData(0, 0, i, n); return a.data.set(s), o.context.putImageData(a, 0, 0), o.canvas } return this.textureBuffer.canvas }, e.AbstractFilter = function(t, e) { this.passes = [this], this.shaders = [], this.dirty = !0, this.padding = 0, this.uniforms = e || {}, this.fragmentSrc = t || [] }, e.AbstractFilter.prototype.constructor = e.AbstractFilter, e.AbstractFilter.prototype.syncUniforms = function() { for (var t = 0, e = this.shaders.length; t < e; t++) this.shaders[t].dirty = !0 }, e.Strip = function(t) { e.DisplayObjectContainer.call(this), this.texture = t, this.uvs = new e.Float32Array([0, 1, 1, 1, 1, 0, 0, 1]), this.vertices = new e.Float32Array([0, 0, 100, 0, 100, 100, 0, 100]), this.colors = new e.Float32Array([1, 1, 1, 1]), this.indices = new e.Uint16Array([0, 1, 2, 3]), this.dirty = !0, this.blendMode = e.blendModes.NORMAL, this.canvasPadding = 0, this.drawMode = e.Strip.DrawModes.TRIANGLE_STRIP }, e.Strip.prototype = Object.create(e.DisplayObjectContainer.prototype), e.Strip.prototype.constructor = e.Strip, e.Strip.prototype._renderWebGL = function(t) {!this.visible || this.alpha <= 0 || (t.spriteBatch.stop(), this._vertexBuffer || this._initWebGL(t), t.shaderManager.setShader(t.shaderManager.stripShader), this._renderStrip(t), t.spriteBatch.start()) }, e.Strip.prototype._initWebGL = function(t) { var e = t.gl;
        this._vertexBuffer = e.createBuffer(), this._indexBuffer = e.createBuffer(), this._uvBuffer = e.createBuffer(), this._colorBuffer = e.createBuffer(), e.bindBuffer(e.ARRAY_BUFFER, this._vertexBuffer), e.bufferData(e.ARRAY_BUFFER, this.vertices, e.DYNAMIC_DRAW), e.bindBuffer(e.ARRAY_BUFFER, this._uvBuffer), e.bufferData(e.ARRAY_BUFFER, this.uvs, e.STATIC_DRAW), e.bindBuffer(e.ARRAY_BUFFER, this._colorBuffer), e.bufferData(e.ARRAY_BUFFER, this.colors, e.STATIC_DRAW), e.bindBuffer(e.ELEMENT_ARRAY_BUFFER, this._indexBuffer), e.bufferData(e.ELEMENT_ARRAY_BUFFER, this.indices, e.STATIC_DRAW) }, e.Strip.prototype._renderStrip = function(t) { var i = t.gl,
            n = t.projection,
            s = t.offset,
            o = t.shaderManager.stripShader,
            a = this.drawMode === e.Strip.DrawModes.TRIANGLE_STRIP ? i.TRIANGLE_STRIP : i.TRIANGLES;
        t.blendModeManager.setBlendMode(this.blendMode), i.uniformMatrix3fv(o.translationMatrix, !1, this.worldTransform.toArray(!0)), i.uniform2f(o.projectionVector, n.x, -n.y), i.uniform2f(o.offsetVector, -s.x, -s.y), i.uniform1f(o.alpha, this.worldAlpha), this.dirty ? (this.dirty = !1, i.bindBuffer(i.ARRAY_BUFFER, this._vertexBuffer), i.bufferData(i.ARRAY_BUFFER, this.vertices, i.STATIC_DRAW), i.vertexAttribPointer(o.aVertexPosition, 2, i.FLOAT, !1, 0, 0), i.bindBuffer(i.ARRAY_BUFFER, this._uvBuffer), i.bufferData(i.ARRAY_BUFFER, this.uvs, i.STATIC_DRAW), i.vertexAttribPointer(o.aTextureCoord, 2, i.FLOAT, !1, 0, 0), i.activeTexture(i.TEXTURE0), this.texture.baseTexture._dirty[i.id] ? t.renderer.updateTexture(this.texture.baseTexture) : i.bindTexture(i.TEXTURE_2D, this.texture.baseTexture._glTextures[i.id]), i.bindBuffer(i.ELEMENT_ARRAY_BUFFER, this._indexBuffer), i.bufferData(i.ELEMENT_ARRAY_BUFFER, this.indices, i.STATIC_DRAW)) : (i.bindBuffer(i.ARRAY_BUFFER, this._vertexBuffer), i.bufferSubData(i.ARRAY_BUFFER, 0, this.vertices), i.vertexAttribPointer(o.aVertexPosition, 2, i.FLOAT, !1, 0, 0), i.bindBuffer(i.ARRAY_BUFFER, this._uvBuffer), i.vertexAttribPointer(o.aTextureCoord, 2, i.FLOAT, !1, 0, 0), i.activeTexture(i.TEXTURE0), this.texture.baseTexture._dirty[i.id] ? t.renderer.updateTexture(this.texture.baseTexture) : i.bindTexture(i.TEXTURE_2D, this.texture.baseTexture._glTextures[i.id]), i.bindBuffer(i.ELEMENT_ARRAY_BUFFER, this._indexBuffer)), i.drawElements(a, this.indices.length, i.UNSIGNED_SHORT, 0) }, e.Strip.prototype._renderCanvas = function(t) { var i = t.context,
            n = this.worldTransform,
            s = n.tx * t.resolution + t.shakeX,
            o = n.ty * t.resolution + t.shakeY;
        t.roundPixels ? i.setTransform(n.a, n.b, n.c, n.d, 0 | s, 0 | o) : i.setTransform(n.a, n.b, n.c, n.d, s, o), this.drawMode === e.Strip.DrawModes.TRIANGLE_STRIP ? this._renderCanvasTriangleStrip(i) : this._renderCanvasTriangles(i) }, e.Strip.prototype._renderCanvasTriangleStrip = function(t) { var e = this.vertices,
            i = this.uvs,
            n = e.length / 2;
        this.count++; for (var s = 0; s < n - 2; s++) { var o = 2 * s;
            this._renderCanvasDrawTriangle(t, e, i, o, o + 2, o + 4) } }, e.Strip.prototype._renderCanvasTriangles = function(t) { var e = this.vertices,
            i = this.uvs,
            n = this.indices,
            s = n.length;
        this.count++; for (var o = 0; o < s; o += 3) { var a = 2 * n[o],
                r = 2 * n[o + 1],
                h = 2 * n[o + 2];
            this._renderCanvasDrawTriangle(t, e, i, a, r, h) } }, e.Strip.prototype._renderCanvasDrawTriangle = function(t, e, i, n, s, o) { var a = this.texture.baseTexture.source,
            r = this.texture.width,
            h = this.texture.height,
            l = e[n],
            c = e[s],
            u = e[o],
            p = e[n + 1],
            d = e[s + 1],
            m = e[o + 1],
            g = i[n] * r,
            f = i[s] * r,
            y = i[o] * r,
            v = i[n + 1] * h,
            b = i[s + 1] * h,
            _ = i[o + 1] * h; if (this.canvasPadding > 0) { var S = this.canvasPadding / this.worldTransform.a,
                w = this.canvasPadding / this.worldTransform.d,
                C = (l + c + u) / 3,
                A = (p + d + m) / 3,
                T = l - C,
                x = p - A,
                P = Math.sqrt(T * T + x * x);
            l = C + T / P * (P + S), p = A + x / P * (P + w), x = d - A, c = C + (T = c - C) / (P = Math.sqrt(T * T + x * x)) * (P + S), d = A + x / P * (P + w), x = m - A, u = C + (T = u - C) / (P = Math.sqrt(T * T + x * x)) * (P + S), m = A + x / P * (P + w) } t.save(), t.beginPath(), t.moveTo(l, p), t.lineTo(c, d), t.lineTo(u, m), t.closePath(), t.clip(); var I = g * b + v * y + f * _ - b * y - v * f - g * _,
            O = l * b + v * u + c * _ - b * u - v * c - l * _,
            E = g * c + l * y + f * u - c * y - l * f - g * u,
            L = g * b * u + v * c * y + l * f * _ - l * b * y - v * f * u - g * c * _,
            k = p * b + v * m + d * _ - b * m - v * d - p * _,
            M = g * d + p * y + f * m - d * y - p * f - g * m,
            B = g * b * m + v * d * y + p * f * _ - p * b * y - v * f * m - g * d * _;
        t.transform(O / I, k / I, E / I, M / I, L / I, B / I), t.drawImage(a, 0, 0), t.restore() }, e.Strip.prototype.renderStripFlat = function(t) { var e = this.context,
            i = t.vertices,
            n = i.length / 2;
        this.count++, e.beginPath(); for (var s = 1; s < n - 2; s++) { var o = 2 * s,
                a = i[o],
                r = i[o + 2],
                h = i[o + 4],
                l = i[o + 1],
                c = i[o + 3],
                u = i[o + 5];
            e.moveTo(a, l), e.lineTo(r, c), e.lineTo(h, u) } e.fillStyle = "#FF0000", e.fill(), e.closePath() }, e.Strip.prototype.onTextureUpdate = function() { this.updateFrame = !0 }, e.Strip.prototype.getBounds = function(t) { for (var i = t || this.worldTransform, n = i.a, s = i.b, o = i.c, a = i.d, r = i.tx, h = i.ty, l = -1 / 0, c = -1 / 0, u = 1 / 0, p = 1 / 0, d = this.vertices, m = 0, g = d.length; m < g; m += 2) { var f = d[m],
                y = d[m + 1],
                v = n * f + o * y + r,
                b = a * y + s * f + h;
            u = v < u ? v : u, p = b < p ? b : p, l = v > l ? v : l, c = b > c ? b : c } if (u === -1 / 0 || c === 1 / 0) return e.EmptyRectangle; var _ = this._bounds; return _.x = u, _.width = l - u, _.y = p, _.height = c - p, this._currentBounds = _, _ }, e.Strip.DrawModes = { TRIANGLE_STRIP: 0, TRIANGLES: 1 }, e.Rope = function(t, i) { e.Strip.call(this, t), this.points = i, this.vertices = new e.Float32Array(4 * i.length), this.uvs = new e.Float32Array(4 * i.length), this.colors = new e.Float32Array(2 * i.length), this.indices = new e.Uint16Array(2 * i.length), this.refresh() }, e.Rope.prototype = Object.create(e.Strip.prototype), e.Rope.prototype.constructor = e.Rope, e.Rope.prototype.refresh = function() { var t = this.points; if (!(t.length < 1)) { var e = this.uvs,
                i = (t[0], this.indices),
                n = this.colors;
            this.count -= .2, e[0] = 0, e[1] = 0, e[2] = 0, e[3] = 1, n[0] = 1, n[1] = 1, i[0] = 0, i[1] = 1; for (var s, o, a, r = t.length, h = 1; h < r; h++) s = t[h], a = h / (r - 1), e[o = 4 * h] = a, e[o + 1] = 0, e[o + 2] = a, e[o + 3] = 1, n[o = 2 * h] = 1, n[o + 1] = 1, i[o = 2 * h] = o, i[o + 1] = o + 1, s } }, e.Rope.prototype.updateTransform = function() { var t = this.points; if (!(t.length < 1)) { var i, n = t[0],
                s = { x: 0, y: 0 };
            this.count -= .2; for (var o, a, r, h, l = this.vertices, c = t.length, u = 0; u < c; u++) o = t[u], a = 4 * u, i = u < t.length - 1 ? t[u + 1] : o, s.y = -(i.x - n.x), s.x = i.y - n.y, 10 * (1 - u / (c - 1)) > 1 && 1, r = Math.sqrt(s.x * s.x + s.y * s.y), h = this.texture.height / 2, s.x /= r, s.y /= r, s.x *= h, s.y *= h, l[a] = o.x + s.x, l[a + 1] = o.y + s.y, l[a + 2] = o.x - s.x, l[a + 3] = o.y - s.y, n = o;
            e.DisplayObjectContainer.prototype.updateTransform.call(this) } }, e.Rope.prototype.setTexture = function(t) { this.texture = t }, e.TilingSprite = function(t, i, n) { e.Sprite.call(this, t), this._width = i || 128, this._height = n || 128, this.tileScale = new e.Point(1, 1), this.tileScaleOffset = new e.Point(1, 1), this.tilePosition = new e.Point, this.renderable = !0, this.tint = 16777215, this.textureDebug = !1, this.blendMode = e.blendModes.NORMAL, this.canvasBuffer = null, this.tilingTexture = null, this.tilePattern = null, this.refreshTexture = !0, this.frameWidth = 0, this.frameHeight = 0 }, e.TilingSprite.prototype = Object.create(e.Sprite.prototype), e.TilingSprite.prototype.constructor = e.TilingSprite, e.TilingSprite.prototype.setTexture = function(t) { this.texture !== t && (this.texture = t, this.refreshTexture = !0, this.cachedTint = 16777215) }, e.TilingSprite.prototype._renderWebGL = function(t) { if (this.visible && this.renderable && 0 !== this.alpha) { if (this._mask && (t.spriteBatch.stop(), t.maskManager.pushMask(this.mask, t), t.spriteBatch.start()), this._filters && (t.spriteBatch.flush(), t.filterManager.pushFilter(this._filterBlock)), this.refreshTexture) { if (this.generateTilingTexture(!0, t), !this.tilingTexture) return;
                this.tilingTexture.needsUpdate && (t.renderer.updateTexture(this.tilingTexture.baseTexture), this.tilingTexture.needsUpdate = !1) } t.spriteBatch.renderTilingSprite(this); for (var e = 0; e < this.children.length; e++) this.children[e]._renderWebGL(t);
            t.spriteBatch.stop(), this._filters && t.filterManager.popFilter(), this._mask && t.maskManager.popMask(this._mask, t), t.spriteBatch.start() } }, e.TilingSprite.prototype._renderCanvas = function(t) { if (this.visible && this.renderable && 0 !== this.alpha) { var i = t.context;
            this._mask && t.maskManager.pushMask(this._mask, t), i.globalAlpha = this.worldAlpha; var n = this.worldTransform,
                s = t.resolution,
                o = n.tx * s + t.shakeX,
                a = n.ty * s + t.shakeY; if (i.setTransform(n.a * s, n.b * s, n.c * s, n.d * s, o, a), this.refreshTexture) { if (this.generateTilingTexture(!1, t), !this.tilingTexture) return;
                this.tilePattern = i.createPattern(this.tilingTexture.baseTexture.source, "repeat") } var r = t.currentBlendMode;
            this.blendMode !== t.currentBlendMode && (t.currentBlendMode = this.blendMode, i.globalCompositeOperation = e.blendModesCanvas[t.currentBlendMode]); var h = this.tilePosition,
                l = this.tileScale;
            h.x %= this.tilingTexture.baseTexture.width, h.y %= this.tilingTexture.baseTexture.height, i.scale(l.x, l.y), i.translate(h.x + this.anchor.x * -this._width, h.y + this.anchor.y * -this._height), i.fillStyle = this.tilePattern; var o = -h.x,
                a = -h.y,
                c = this._width / l.x,
                u = this._height / l.y;
            t.roundPixels && (o |= 0, a |= 0, c |= 0, u |= 0), i.fillRect(o, a, c, u), i.scale(1 / l.x, 1 / l.y), i.translate(-h.x + this.anchor.x * this._width, -h.y + this.anchor.y * this._height), this._mask && t.maskManager.popMask(t); for (var p = 0; p < this.children.length; p++) this.children[p]._renderCanvas(t);
            r !== this.blendMode && (t.currentBlendMode = r, i.globalCompositeOperation = e.blendModesCanvas[r]) } }, e.TilingSprite.prototype.onTextureUpdate = function() {}, e.TilingSprite.prototype.generateTilingTexture = function(t, i) { if (this.texture.baseTexture.hasLoaded) { var n = this.texture,
                s = n.frame,
                o = this._frame.sourceSizeW || this._frame.width,
                a = this._frame.sourceSizeH || this._frame.height,
                r = 0,
                h = 0;
            this._frame.trimmed && (r = this._frame.spriteSourceSizeX, h = this._frame.spriteSourceSizeY), t && (o = e.getNextPowerOfTwo(o), a = e.getNextPowerOfTwo(a)), this.canvasBuffer ? (this.canvasBuffer.resize(o, a), this.tilingTexture.baseTexture.width = o, this.tilingTexture.baseTexture.height = a, this.tilingTexture.needsUpdate = !0) : (this.canvasBuffer = new e.CanvasBuffer(o, a), this.tilingTexture = e.Texture.fromCanvas(this.canvasBuffer.canvas), this.tilingTexture.isTiling = !0, this.tilingTexture.needsUpdate = !0), this.textureDebug && (this.canvasBuffer.context.strokeStyle = "#00ff00", this.canvasBuffer.context.strokeRect(0, 0, o, a)); var l = n.crop.width,
                c = n.crop.height;
            l === o && c === a || (l = o, c = a), this.canvasBuffer.context.drawImage(n.baseTexture.source, n.crop.x, n.crop.y, n.crop.width, n.crop.height, r, h, l, c), this.tileScaleOffset.x = s.width / o, this.tileScaleOffset.y = s.height / a, this.refreshTexture = !1, this.tilingTexture.baseTexture._powerOf2 = !0 } }, e.TilingSprite.prototype.getBounds = function() { var t = this._width,
            e = this._height,
            i = t * (1 - this.anchor.x),
            n = t * -this.anchor.x,
            s = e * (1 - this.anchor.y),
            o = e * -this.anchor.y,
            a = this.worldTransform,
            r = a.a,
            h = a.b,
            l = a.c,
            c = a.d,
            u = a.tx,
            p = a.ty,
            d = r * n + l * o + u,
            m = c * o + h * n + p,
            g = r * i + l * o + u,
            f = c * o + h * i + p,
            y = r * i + l * s + u,
            v = c * s + h * i + p,
            b = r * n + l * s + u,
            _ = c * s + h * n + p,
            S = -1 / 0,
            w = -1 / 0,
            C = 1 / 0,
            A = 1 / 0;
        C = b < (C = y < (C = g < (C = d < C ? d : C) ? g : C) ? y : C) ? b : C, A = _ < (A = v < (A = f < (A = m < A ? m : A) ? f : A) ? v : A) ? _ : A, S = b > (S = y > (S = g > (S = d > S ? d : S) ? g : S) ? y : S) ? b : S, w = _ > (w = v > (w = f > (w = m > w ? m : w) ? f : w) ? v : w) ? _ : w; var T = this._bounds; return T.x = C, T.width = S - C, T.y = A, T.height = w - A, this._currentBounds = T, T }, e.TilingSprite.prototype.destroy = function() { e.Sprite.prototype.destroy.call(this), this.canvasBuffer && (this.canvasBuffer.destroy(), this.canvasBuffer = null), this.tileScale = null, this.tileScaleOffset = null, this.tilePosition = null, this.tilingTexture && (this.tilingTexture.destroy(!0), this.tilingTexture = null) }, Object.defineProperty(e.TilingSprite.prototype, "width", { get: function() { return this._width }, set: function(t) { this._width = t } }), Object.defineProperty(e.TilingSprite.prototype, "height", { get: function() { return this._height }, set: function(t) { this._height = t } }), "undefined" != typeof exports ? ("undefined" != typeof module && module.exports && (exports = module.exports = e), exports.PIXI = e) : "undefined" != typeof define && define.amd ? define("PIXI", t.PIXI = e) : t.PIXI = e, e }.call(this),
    function() {
        function t(t, e) { this._scaleFactor = t, this._deltaMode = e, this.originalEvent = null } var e = this,
            i = i || { VERSION: "2.6.2", GAMES: [], AUTO: 0, CANVAS: 1, WEBGL: 2, HEADLESS: 3, NONE: 0, LEFT: 1, RIGHT: 2, UP: 3, DOWN: 4, SPRITE: 0, BUTTON: 1, IMAGE: 2, GRAPHICS: 3, TEXT: 4, TILESPRITE: 5, BITMAPTEXT: 6, GROUP: 7, RENDERTEXTURE: 8, TILEMAP: 9, TILEMAPLAYER: 10, EMITTER: 11, POLYGON: 12, BITMAPDATA: 13, CANVAS_FILTER: 14, WEBGL_FILTER: 15, ELLIPSE: 16, SPRITEBATCH: 17, RETROFONT: 18, POINTER: 19, ROPE: 20, CIRCLE: 21, RECTANGLE: 22, LINE: 23, MATRIX: 24, POINT: 25, ROUNDEDRECTANGLE: 26, CREATURE: 27, VIDEO: 28, PENDING_ATLAS: -1, HORIZONTAL: 0, VERTICAL: 1, LANDSCAPE: 0, PORTRAIT: 1, ANGLE_UP: 270, ANGLE_DOWN: 90, ANGLE_LEFT: 180, ANGLE_RIGHT: 0, ANGLE_NORTH_EAST: 315, ANGLE_NORTH_WEST: 225, ANGLE_SOUTH_EAST: 45, ANGLE_SOUTH_WEST: 135, TOP_LEFT: 0, TOP_CENTER: 1, TOP_RIGHT: 2, LEFT_TOP: 3, LEFT_CENTER: 4, LEFT_BOTTOM: 5, CENTER: 6, RIGHT_TOP: 7, RIGHT_CENTER: 8, RIGHT_BOTTOM: 9, BOTTOM_LEFT: 10, BOTTOM_CENTER: 11, BOTTOM_RIGHT: 12, blendModes: { NORMAL: 0, ADD: 1, MULTIPLY: 2, SCREEN: 3, OVERLAY: 4, DARKEN: 5, LIGHTEN: 6, COLOR_DODGE: 7, COLOR_BURN: 8, HARD_LIGHT: 9, SOFT_LIGHT: 10, DIFFERENCE: 11, EXCLUSION: 12, HUE: 13, SATURATION: 14, COLOR: 15, LUMINOSITY: 16 }, scaleModes: { DEFAULT: 0, LINEAR: 0, NEAREST: 1 }, PIXI: PIXI || {} }; if (Math.trunc || (Math.trunc = function(t) { return t < 0 ? Math.ceil(t) : Math.floor(t) }), Function.prototype.bind || (Function.prototype.bind = function() { var t = Array.prototype.slice; return function(e) {
                    function i() { var o = s.concat(t.call(arguments));
                        n.apply(this instanceof i ? this : e, o) } var n = this,
                        s = t.call(arguments, 1); if ("function" != typeof n) throw new TypeError; return i.prototype = function t(e) { if (e && (t.prototype = e), !(this instanceof t)) return new t }(n.prototype), i } }()), Array.isArray || (Array.isArray = function(t) { return "[object Array]" === Object.prototype.toString.call(t) }), Array.prototype.forEach || (Array.prototype.forEach = function(t) { "use strict"; if (void 0 === this || null === this) throw new TypeError; var e = Object(this),
                    i = e.length >>> 0; if ("function" != typeof t) throw new TypeError; for (var n = arguments.length >= 2 ? arguments[1] : void 0, s = 0; s < i; s++) s in e && t.call(n, e[s], s, e) }), "function" != typeof window.Uint32Array && "object" != typeof window.Uint32Array) { var n = function(t) { var e = new Array;
                window[t] = function(t) { if ("number" == typeof t) { Array.call(this, t), this.length = t; for (e = 0; e < this.length; e++) this[e] = 0 } else { Array.call(this, t.length), this.length = t.length; for (var e = 0; e < this.length; e++) this[e] = t[e] } }, window[t].prototype = e, window[t].constructor = window[t] };
            n("Uint32Array"), n("Int16Array") } window.console || (window.console = {}, window.console.log = window.console.assert = function() {}, window.console.warn = window.console.assert = function() {}), i.Utils = { reverseString: function(t) { return t.split("").reverse().join("") }, getProperty: function(t, e) { for (var i = e.split("."), n = i.pop(), s = i.length, o = 1, a = i[0]; o < s && (t = t[a]);) a = i[o], o++; return t ? t[n] : null }, setProperty: function(t, e, i) { for (var n = e.split("."), s = n.pop(), o = n.length, a = 1, r = n[0]; a < o && (t = t[r]);) r = n[a], a++; return t && (t[s] = i), t }, chanceRoll: function(t) { return void 0 === t && (t = 50), t > 0 && 100 * Math.random() <= t }, randomChoice: function(t, e) { return Math.random() < .5 ? t : e }, parseDimension: function(t, e) { var i = 0,
                    n = 0; return "string" == typeof t ? "%" === t.substr(-1) ? (i = parseInt(t, 10) / 100, n = 0 === e ? window.innerWidth * i : window.innerHeight * i) : n = parseInt(t, 10) : n = t, n }, pad: function(t, e, i, n) { if (void 0 === e) var e = 0; if (void 0 === i) var i = " "; if (void 0 === n) var n = 3; var s = 0; if (e + 1 >= (t = t.toString()).length) switch (n) {
                    case 1:
                        t = new Array(e + 1 - t.length).join(i) + t; break;
                    case 3:
                        var o = Math.ceil((s = e - t.length) / 2),
                            a = s - o;
                        t = new Array(a + 1).join(i) + t + new Array(o + 1).join(i); break;
                    default:
                        t += new Array(e + 1 - t.length).join(i) }
                return t }, isPlainObject: function(t) { if ("object" != typeof t || t.nodeType || t === t.window) return !1; try { if (t.constructor && !{}.hasOwnProperty.call(t.constructor.prototype, "isPrototypeOf")) return !1 } catch (t) { return !1 } return !0 }, extend: function() { var t, e, n, s, o, a, r = arguments[0] || {},
                    h = 1,
                    l = arguments.length,
                    c = !1; for ("boolean" == typeof r && (c = r, r = arguments[1] || {}, h = 2), l === h && (r = this, --h); h < l; h++)
                    if (null != (t = arguments[h]))
                        for (e in t) n = r[e], r !== (s = t[e]) && (c && s && (i.Utils.isPlainObject(s) || (o = Array.isArray(s))) ? (o ? (o = !1, a = n && Array.isArray(n) ? n : []) : a = n && i.Utils.isPlainObject(n) ? n : {}, r[e] = i.Utils.extend(c, a, s)) : void 0 !== s && (r[e] = s)); return r }, mixinPrototype: function(t, e, i) { void 0 === i && (i = !1); for (var n = Object.keys(e), s = 0; s < n.length; s++) { var o = n[s],
                        a = e[o];!i && o in t || (!a || "function" != typeof a.get && "function" != typeof a.set ? t[o] = a : "function" == typeof a.clone ? t[o] = a.clone() : Object.defineProperty(t, o, a)) } }, mixin: function(t, e) { if (!t || "object" != typeof t) return e; for (var n in t) { var s = t[n]; if (!s.childNodes && !s.cloneNode) { var o = typeof t[n];
                        t[n] && "object" === o ? typeof e[n] === o ? e[n] = i.Utils.mixin(t[n], e[n]) : e[n] = i.Utils.mixin(t[n], new s.constructor) : e[n] = t[n] } } return e } }, i.Circle = function(t, e, n) { t = t || 0, e = e || 0, n = n || 0, this.x = t, this.y = e, this._diameter = n, this._radius = 0, n > 0 && (this._radius = .5 * n), this.type = i.CIRCLE }, i.Circle.prototype = { circumference: function() { return Math.PI * this._radius * 2 }, random: function(t) { void 0 === t && (t = new i.Point); var e = 2 * Math.PI * Math.random(),
                    n = Math.random() + Math.random(),
                    s = n > 1 ? 2 - n : n,
                    o = s * Math.cos(e),
                    a = s * Math.sin(e); return t.x = this.x + o * this.radius, t.y = this.y + a * this.radius, t }, getBounds: function() { return new i.Rectangle(this.x - this.radius, this.y - this.radius, this.diameter, this.diameter) }, setTo: function(t, e, i) { return this.x = t, this.y = e, this._diameter = i, this._radius = .5 * i, this }, copyFrom: function(t) { return this.setTo(t.x, t.y, t.diameter) }, copyTo: function(t) { return t.x = this.x, t.y = this.y, t.diameter = this._diameter, t }, distance: function(t, e) { var n = i.Math.distance(this.x, this.y, t.x, t.y); return e ? Math.round(n) : n }, clone: function(t) { return void 0 === t || null === t ? t = new i.Circle(this.x, this.y, this.diameter) : t.setTo(this.x, this.y, this.diameter), t }, contains: function(t, e) { return i.Circle.contains(this, t, e) }, circumferencePoint: function(t, e, n) { return i.Circle.circumferencePoint(this, t, e, n) }, offset: function(t, e) { return this.x += t, this.y += e, this }, offsetPoint: function(t) { return this.offset(t.x, t.y) }, toString: function() { return "[{Phaser.Circle (x=" + this.x + " y=" + this.y + " diameter=" + this.diameter + " radius=" + this.radius + ")}]" } }, i.Circle.prototype.constructor = i.Circle, Object.defineProperty(i.Circle.prototype, "diameter", { get: function() { return this._diameter }, set: function(t) { t > 0 && (this._diameter = t, this._radius = .5 * t) } }), Object.defineProperty(i.Circle.prototype, "radius", { get: function() { return this._radius }, set: function(t) { t > 0 && (this._radius = t, this._diameter = 2 * t) } }), Object.defineProperty(i.Circle.prototype, "left", { get: function() { return this.x - this._radius }, set: function(t) { t > this.x ? (this._radius = 0, this._diameter = 0) : this.radius = this.x - t } }), Object.defineProperty(i.Circle.prototype, "right", { get: function() { return this.x + this._radius }, set: function(t) { t < this.x ? (this._radius = 0, this._diameter = 0) : this.radius = t - this.x } }), Object.defineProperty(i.Circle.prototype, "top", { get: function() { return this.y - this._radius }, set: function(t) { t > this.y ? (this._radius = 0, this._diameter = 0) : this.radius = this.y - t } }), Object.defineProperty(i.Circle.prototype, "bottom", { get: function() { return this.y + this._radius }, set: function(t) { t < this.y ? (this._radius = 0, this._diameter = 0) : this.radius = t - this.y } }), Object.defineProperty(i.Circle.prototype, "area", { get: function() { return this._radius > 0 ? Math.PI * this._radius * this._radius : 0 } }), Object.defineProperty(i.Circle.prototype, "empty", { get: function() { return 0 === this._diameter }, set: function(t) {!0 === t && this.setTo(0, 0, 0) } }), i.Circle.contains = function(t, e, i) { return t.radius > 0 && e >= t.left && e <= t.right && i >= t.top && i <= t.bottom && (t.x - e) * (t.x - e) + (t.y - i) * (t.y - i) <= t.radius * t.radius }, i.Circle.equals = function(t, e) { return t.x === e.x && t.y === e.y && t.diameter === e.diameter }, i.Circle.intersects = function(t, e) { return i.Math.distance(t.x, t.y, e.x, e.y) <= t.radius + e.radius }, i.Circle.circumferencePoint = function(t, e, n, s) { return void 0 === n && (n = !1), void 0 === s && (s = new i.Point), !0 === n && (e = i.Math.degToRad(e)), s.x = t.x + t.radius * Math.cos(e), s.y = t.y + t.radius * Math.sin(e), s }, i.Circle.intersectsRectangle = function(t, e) { var i = Math.abs(t.x - e.x - e.halfWidth); if (i > e.halfWidth + t.radius) return !1; var n = Math.abs(t.y - e.y - e.halfHeight); if (n > e.halfHeight + t.radius) return !1; if (i <= e.halfWidth || n <= e.halfHeight) return !0; var s = i - e.halfWidth,
                o = n - e.halfHeight; return s * s + o * o <= t.radius * t.radius }, PIXI.Circle = i.Circle, i.Ellipse = function(t, e, n, s) { t = t || 0, e = e || 0, n = n || 0, s = s || 0, this.x = t, this.y = e, this.width = n, this.height = s, this.type = i.ELLIPSE }, i.Ellipse.prototype = { setTo: function(t, e, i, n) { return this.x = t, this.y = e, this.width = i, this.height = n, this }, getBounds: function() { return new i.Rectangle(this.x - this.width, this.y - this.height, this.width, this.height) }, copyFrom: function(t) { return this.setTo(t.x, t.y, t.width, t.height) }, copyTo: function(t) { return t.x = this.x, t.y = this.y, t.width = this.width, t.height = this.height, t }, clone: function(t) { return void 0 === t || null === t ? t = new i.Ellipse(this.x, this.y, this.width, this.height) : t.setTo(this.x, this.y, this.width, this.height), t }, contains: function(t, e) { return i.Ellipse.contains(this, t, e) }, random: function(t) { void 0 === t && (t = new i.Point); var e = Math.random() * Math.PI * 2,
                    n = Math.random(); return t.x = Math.sqrt(n) * Math.cos(e), t.y = Math.sqrt(n) * Math.sin(e), t.x = this.x + t.x * this.width / 2, t.y = this.y + t.y * this.height / 2, t }, toString: function() { return "[{Phaser.Ellipse (x=" + this.x + " y=" + this.y + " width=" + this.width + " height=" + this.height + ")}]" } }, i.Ellipse.prototype.constructor = i.Ellipse, Object.defineProperty(i.Ellipse.prototype, "left", { get: function() { return this.x }, set: function(t) { this.x = t } }), Object.defineProperty(i.Ellipse.prototype, "right", { get: function() { return this.x + this.width }, set: function(t) { t < this.x ? this.width = 0 : this.width = t - this.x } }), Object.defineProperty(i.Ellipse.prototype, "top", { get: function() { return this.y }, set: function(t) { this.y = t } }), Object.defineProperty(i.Ellipse.prototype, "bottom", { get: function() { return this.y + this.height }, set: function(t) { t < this.y ? this.height = 0 : this.height = t - this.y } }), Object.defineProperty(i.Ellipse.prototype, "empty", { get: function() { return 0 === this.width || 0 === this.height }, set: function(t) {!0 === t && this.setTo(0, 0, 0, 0) } }), i.Ellipse.contains = function(t, e, i) { if (t.width <= 0 || t.height <= 0) return !1; var n = (e - t.x) / t.width - .5,
                s = (i - t.y) / t.height - .5; return n *= n, s *= s, n + s < .25 }, PIXI.Ellipse = i.Ellipse, i.Line = function(t, e, n, s) { t = t || 0, e = e || 0, n = n || 0, s = s || 0, this.start = new i.Point(t, e), this.end = new i.Point(n, s), this.type = i.LINE }, i.Line.prototype = { setTo: function(t, e, i, n) { return this.start.setTo(t, e), this.end.setTo(i, n), this }, fromSprite: function(t, e, i) { return void 0 === i && (i = !1), i ? this.setTo(t.center.x, t.center.y, e.center.x, e.center.y) : this.setTo(t.x, t.y, e.x, e.y) }, fromAngle: function(t, e, i, n) { return this.start.setTo(t, e), this.end.setTo(t + Math.cos(i) * n, e + Math.sin(i) * n), this }, rotate: function(t, e) { var i = (this.start.x + this.end.x) / 2,
                    n = (this.start.y + this.end.y) / 2; return this.start.rotate(i, n, t, e), this.end.rotate(i, n, t, e), this }, rotateAround: function(t, e, i, n) { return this.start.rotate(t, e, i, n), this.end.rotate(t, e, i, n), this }, intersects: function(t, e, n) { return i.Line.intersectsPoints(this.start, this.end, t.start, t.end, e, n) }, reflect: function(t) { return i.Line.reflect(this, t) }, midPoint: function(t) { return void 0 === t && (t = new i.Point), t.x = (this.start.x + this.end.x) / 2, t.y = (this.start.y + this.end.y) / 2, t }, centerOn: function(t, e) { var i = t - (this.start.x + this.end.x) / 2,
                    n = e - (this.start.y + this.end.y) / 2;
                this.start.add(i, n), this.end.add(i, n) }, pointOnLine: function(t, e) { return (t - this.start.x) * (this.end.y - this.start.y) == (this.end.x - this.start.x) * (e - this.start.y) }, pointOnSegment: function(t, e) { var i = Math.min(this.start.x, this.end.x),
                    n = Math.max(this.start.x, this.end.x),
                    s = Math.min(this.start.y, this.end.y),
                    o = Math.max(this.start.y, this.end.y); return this.pointOnLine(t, e) && t >= i && t <= n && e >= s && e <= o }, random: function(t) { void 0 === t && (t = new i.Point); var e = Math.random(); return t.x = this.start.x + e * (this.end.x - this.start.x), t.y = this.start.y + e * (this.end.y - this.start.y), t }, coordinatesOnLine: function(t, e) { void 0 === t && (t = 1), void 0 === e && (e = []); var i = Math.round(this.start.x),
                    n = Math.round(this.start.y),
                    s = Math.round(this.end.x),
                    o = Math.round(this.end.y),
                    a = Math.abs(s - i),
                    r = Math.abs(o - n),
                    h = i < s ? 1 : -1,
                    l = n < o ? 1 : -1,
                    c = a - r;
                e.push([i, n]); for (var u = 1; i !== s || n !== o;) { var p = c << 1;
                    p > -r && (c -= r, i += h), p < a && (c += a, n += l), u % t == 0 && e.push([i, n]), u++ } return e }, clone: function(t) { return void 0 === t || null === t ? t = new i.Line(this.start.x, this.start.y, this.end.x, this.end.y) : t.setTo(this.start.x, this.start.y, this.end.x, this.end.y), t } }, Object.defineProperty(i.Line.prototype, "length", { get: function() { return Math.sqrt((this.end.x - this.start.x) * (this.end.x - this.start.x) + (this.end.y - this.start.y) * (this.end.y - this.start.y)) } }), Object.defineProperty(i.Line.prototype, "angle", { get: function() { return Math.atan2(this.end.y - this.start.y, this.end.x - this.start.x) } }), Object.defineProperty(i.Line.prototype, "slope", { get: function() { return (this.end.y - this.start.y) / (this.end.x - this.start.x) } }), Object.defineProperty(i.Line.prototype, "perpSlope", { get: function() { return -(this.end.x - this.start.x) / (this.end.y - this.start.y) } }), Object.defineProperty(i.Line.prototype, "x", { get: function() { return Math.min(this.start.x, this.end.x) } }), Object.defineProperty(i.Line.prototype, "y", { get: function() { return Math.min(this.start.y, this.end.y) } }), Object.defineProperty(i.Line.prototype, "left", { get: function() { return Math.min(this.start.x, this.end.x) } }), Object.defineProperty(i.Line.prototype, "right", { get: function() { return Math.max(this.start.x, this.end.x) } }), Object.defineProperty(i.Line.prototype, "top", { get: function() { return Math.min(this.start.y, this.end.y) } }), Object.defineProperty(i.Line.prototype, "bottom", { get: function() { return Math.max(this.start.y, this.end.y) } }), Object.defineProperty(i.Line.prototype, "width", { get: function() { return Math.abs(this.start.x - this.end.x) } }), Object.defineProperty(i.Line.prototype, "height", { get: function() { return Math.abs(this.start.y - this.end.y) } }), Object.defineProperty(i.Line.prototype, "normalX", { get: function() { return Math.cos(this.angle - 1.5707963267948966) } }), Object.defineProperty(i.Line.prototype, "normalY", { get: function() { return Math.sin(this.angle - 1.5707963267948966) } }), Object.defineProperty(i.Line.prototype, "normalAngle", { get: function() { return i.Math.wrap(this.angle - 1.5707963267948966, -Math.PI, Math.PI) } }), i.Line.intersectsPoints = function(t, e, n, s, o, a) { void 0 === o && (o = !0), void 0 === a && (a = new i.Point); var r = e.y - t.y,
                h = s.y - n.y,
                l = t.x - e.x,
                c = n.x - s.x,
                u = e.x * t.y - t.x * e.y,
                p = s.x * n.y - n.x * s.y,
                d = r * c - h * l; if (0 === d) return null; if (a.x = (l * p - c * u) / d, a.y = (h * u - r * p) / d, o) { var m = (s.y - n.y) * (e.x - t.x) - (s.x - n.x) * (e.y - t.y),
                    g = ((s.x - n.x) * (t.y - n.y) - (s.y - n.y) * (t.x - n.x)) / m,
                    f = ((e.x - t.x) * (t.y - n.y) - (e.y - t.y) * (t.x - n.x)) / m; return g >= 0 && g <= 1 && f >= 0 && f <= 1 ? a : null } return a }, i.Line.intersects = function(t, e, n, s) { return i.Line.intersectsPoints(t.start, t.end, e.start, e.end, n, s) }, i.Line.intersectsRectangle = function(t, e) { if (!i.Rectangle.intersects(t, e)) return !1; var n = t.start.x,
                s = t.start.y,
                o = t.end.x,
                a = t.end.y,
                r = e.x,
                h = e.y,
                l = e.right,
                c = e.bottom,
                u = 0; if (n >= r && n <= l && s >= h && s <= c || o >= r && o <= l && a >= h && a <= c) return !0; if (n < r && o >= r) { if ((u = s + (a - s) * (r - n) / (o - n)) > h && u <= c) return !0 } else if (n > l && o <= l && (u = s + (a - s) * (l - n) / (o - n)) >= h && u <= c) return !0; if (s < h && a >= h) { if ((u = n + (o - n) * (h - s) / (a - s)) >= r && u <= l) return !0 } else if (s > c && a <= c && (u = n + (o - n) * (c - s) / (a - s)) >= r && u <= l) return !0; return !1 }, i.Line.reflect = function(t, e) { return 2 * e.normalAngle - 3.141592653589793 - t.angle }, i.Matrix = function(t, e, n, s, o, a) { void 0 !== t && null !== t || (t = 1), void 0 !== e && null !== e || (e = 0), void 0 !== n && null !== n || (n = 0), void 0 !== s && null !== s || (s = 1), void 0 !== o && null !== o || (o = 0), void 0 !== a && null !== a || (a = 0), this.a = t, this.b = e, this.c = n, this.d = s, this.tx = o, this.ty = a, this.type = i.MATRIX }, i.Matrix.prototype = { fromArray: function(t) { return this.setTo(t[0], t[1], t[3], t[4], t[2], t[5]) }, setTo: function(t, e, i, n, s, o) { return this.a = t, this.b = e, this.c = i, this.d = n, this.tx = s, this.ty = o, this }, clone: function(t) { return void 0 === t || null === t ? t = new i.Matrix(this.a, this.b, this.c, this.d, this.tx, this.ty) : (t.a = this.a, t.b = this.b, t.c = this.c, t.d = this.d, t.tx = this.tx, t.ty = this.ty), t }, copyTo: function(t) { return t.copyFrom(this), t }, copyFrom: function(t) { return this.a = t.a, this.b = t.b, this.c = t.c, this.d = t.d, this.tx = t.tx, this.ty = t.ty, this }, toArray: function(t, e) { return void 0 === e && (e = new PIXI.Float32Array(9)), t ? (e[0] = this.a, e[1] = this.b, e[2] = 0, e[3] = this.c, e[4] = this.d, e[5] = 0, e[6] = this.tx, e[7] = this.ty, e[8] = 1) : (e[0] = this.a, e[1] = this.c, e[2] = this.tx, e[3] = this.b, e[4] = this.d, e[5] = this.ty, e[6] = 0, e[7] = 0, e[8] = 1), e }, apply: function(t, e) { return void 0 === e && (e = new i.Point), e.x = this.a * t.x + this.c * t.y + this.tx, e.y = this.b * t.x + this.d * t.y + this.ty, e }, applyInverse: function(t, e) { void 0 === e && (e = new i.Point); var n = 1 / (this.a * this.d + this.c * -this.b),
                    s = t.x,
                    o = t.y; return e.x = this.d * n * s + -this.c * n * o + (this.ty * this.c - this.tx * this.d) * n, e.y = this.a * n * o + -this.b * n * s + (-this.ty * this.a + this.tx * this.b) * n, e }, translate: function(t, e) { return this.tx += t, this.ty += e, this }, scale: function(t, e) { return this.a *= t, this.d *= e, this.c *= t, this.b *= e, this.tx *= t, this.ty *= e, this }, rotate: function(t) { var e = Math.cos(t),
                    i = Math.sin(t),
                    n = this.a,
                    s = this.c,
                    o = this.tx; return this.a = n * e - this.b * i, this.b = n * i + this.b * e, this.c = s * e - this.d * i, this.d = s * i + this.d * e, this.tx = o * e - this.ty * i, this.ty = o * i + this.ty * e, this }, append: function(t) { var e = this.a,
                    i = this.b,
                    n = this.c,
                    s = this.d; return this.a = t.a * e + t.b * n, this.b = t.a * i + t.b * s, this.c = t.c * e + t.d * n, this.d = t.c * i + t.d * s, this.tx = t.tx * e + t.ty * n + this.tx, this.ty = t.tx * i + t.ty * s + this.ty, this }, identity: function() { return this.setTo(1, 0, 0, 1, 0, 0) } }, i.identityMatrix = new i.Matrix, PIXI.Matrix = i.Matrix, PIXI.identityMatrix = i.identityMatrix, i.Point = function(t, e) { t = t || 0, e = e || 0, this.x = t, this.y = e, this.type = i.POINT }, i.Point.prototype = { copyFrom: function(t) { return this.setTo(t.x, t.y) }, invert: function() { return this.setTo(this.y, this.x) }, setTo: function(t, e) { return this.x = t || 0, this.y = e || (0 !== e ? this.x : 0), this }, set: function(t, e) { return this.x = t || 0, this.y = e || (0 !== e ? this.x : 0), this }, add: function(t, e) { return this.x += t, this.y += e, this }, subtract: function(t, e) { return this.x -= t, this.y -= e, this }, multiply: function(t, e) { return this.x *= t, this.y *= e, this }, divide: function(t, e) { return this.x /= t, this.y /= e, this }, clampX: function(t, e) { return this.x = i.Math.clamp(this.x, t, e), this }, clampY: function(t, e) { return this.y = i.Math.clamp(this.y, t, e), this }, clamp: function(t, e) { return this.x = i.Math.clamp(this.x, t, e), this.y = i.Math.clamp(this.y, t, e), this }, clone: function(t) { return void 0 === t || null === t ? t = new i.Point(this.x, this.y) : t.setTo(this.x, this.y), t }, copyTo: function(t) { return t.x = this.x, t.y = this.y, t }, distance: function(t, e) { return i.Point.distance(this, t, e) }, equals: function(t) { return t.x === this.x && t.y === this.y }, angle: function(t, e) { return void 0 === e && (e = !1), e ? i.Math.radToDeg(Math.atan2(t.y - this.y, t.x - this.x)) : Math.atan2(t.y - this.y, t.x - this.x) }, rotate: function(t, e, n, s, o) { return i.Point.rotate(this, t, e, n, s, o) }, getMagnitude: function() { return Math.sqrt(this.x * this.x + this.y * this.y) }, getMagnitudeSq: function() { return this.x * this.x + this.y * this.y }, setMagnitude: function(t) { return this.normalize().multiply(t, t) }, normalize: function() { if (!this.isZero()) { var t = this.getMagnitude();
                    this.x /= t, this.y /= t } return this }, isZero: function() { return 0 === this.x && 0 === this.y }, dot: function(t) { return this.x * t.x + this.y * t.y }, cross: function(t) { return this.x * t.y - this.y * t.x }, perp: function() { return this.setTo(-this.y, this.x) }, rperp: function() { return this.setTo(this.y, -this.x) }, normalRightHand: function() { return this.setTo(-1 * this.y, this.x) }, floor: function() { return this.setTo(Math.floor(this.x), Math.floor(this.y)) }, ceil: function() { return this.setTo(Math.ceil(this.x), Math.ceil(this.y)) }, toString: function() { return "[{Point (x=" + this.x + " y=" + this.y + ")}]" } }, i.Point.prototype.constructor = i.Point, i.Point.add = function(t, e, n) { return void 0 === n && (n = new i.Point), n.x = t.x + e.x, n.y = t.y + e.y, n }, i.Point.subtract = function(t, e, n) { return void 0 === n && (n = new i.Point), n.x = t.x - e.x, n.y = t.y - e.y, n }, i.Point.multiply = function(t, e, n) { return void 0 === n && (n = new i.Point), n.x = t.x * e.x, n.y = t.y * e.y, n }, i.Point.divide = function(t, e, n) { return void 0 === n && (n = new i.Point), n.x = t.x / e.x, n.y = t.y / e.y, n }, i.Point.equals = function(t, e) { return t.x === e.x && t.y === e.y }, i.Point.angle = function(t, e) { return Math.atan2(t.y - e.y, t.x - e.x) }, i.Point.negative = function(t, e) { return void 0 === e && (e = new i.Point), e.setTo(-t.x, -t.y) }, i.Point.multiplyAdd = function(t, e, n, s) { return void 0 === s && (s = new i.Point), s.setTo(t.x + e.x * n, t.y + e.y * n) }, i.Point.interpolate = function(t, e, n, s) { return void 0 === s && (s = new i.Point), s.setTo(t.x + (e.x - t.x) * n, t.y + (e.y - t.y) * n) }, i.Point.perp = function(t, e) { return void 0 === e && (e = new i.Point), e.setTo(-t.y, t.x) }, i.Point.rperp = function(t, e) { return void 0 === e && (e = new i.Point), e.setTo(t.y, -t.x) }, i.Point.distance = function(t, e, n) { var s = i.Math.distance(t.x, t.y, e.x, e.y); return n ? Math.round(s) : s }, i.Point.project = function(t, e, n) { void 0 === n && (n = new i.Point); var s = t.dot(e) / e.getMagnitudeSq(); return 0 !== s && n.setTo(s * e.x, s * e.y), n }, i.Point.projectUnit = function(t, e, n) { void 0 === n && (n = new i.Point); var s = t.dot(e); return 0 !== s && n.setTo(s * e.x, s * e.y), n }, i.Point.normalRightHand = function(t, e) { return void 0 === e && (e = new i.Point), e.setTo(-1 * t.y, t.x) }, i.Point.normalize = function(t, e) { void 0 === e && (e = new i.Point); var n = t.getMagnitude(); return 0 !== n && e.setTo(t.x / n, t.y / n), e }, i.Point.rotate = function(t, e, n, s, o, a) { if (o && (s = i.Math.degToRad(s)), void 0 === a) { t.subtract(e, n); var r = Math.sin(s),
                    h = Math.cos(s),
                    l = h * t.x - r * t.y,
                    c = r * t.x + h * t.y;
                t.x = l + e, t.y = c + n } else { var u = s + Math.atan2(t.y - n, t.x - e);
                t.x = e + a * Math.cos(u), t.y = n + a * Math.sin(u) } return t }, i.Point.centroid = function(t, e) { if (void 0 === e && (e = new i.Point), "[object Array]" !== Object.prototype.toString.call(t)) throw new Error("Phaser.Point. Parameter 'points' must be an array"); var n = t.length; if (n < 1) throw new Error("Phaser.Point. Parameter 'points' array must not be empty"); if (1 === n) return e.copyFrom(t[0]), e; for (var s = 0; s < n; s++) i.Point.add(e, t[s], e); return e.divide(n, n), e }, i.Point.parse = function(t, e, n) { e = e || "x", n = n || "y"; var s = new i.Point; return t[e] && (s.x = parseInt(t[e], 10)), t[n] && (s.y = parseInt(t[n], 10)), s }, PIXI.Point = i.Point, i.Polygon = function() { this.area = 0, this._points = [], arguments.length > 0 && this.setTo.apply(this, arguments), this.closed = !0, this.flattened = !1, this.type = i.POLYGON }, i.Polygon.prototype = { toNumberArray: function(t) { void 0 === t && (t = []); for (var e = 0; e < this._points.length; e++) "number" == typeof this._points[e] ? (t.push(this._points[e]), t.push(this._points[e + 1]), e++) : (t.push(this._points[e].x), t.push(this._points[e].y)); return t }, flatten: function() { return this._points = this.toNumberArray(), this.flattened = !0, this }, clone: function(t) { var e = this._points.slice(); return void 0 === t || null === t ? t = new i.Polygon(e) : t.setTo(e), t }, contains: function(t, e) { var i = !1; if (this.flattened)
                    for (var n = -2, s = this._points.length - 2;
                        (n += 2) < this._points.length; s = n) { var o = this._points[n],
                            a = this._points[n + 1],
                            r = this._points[s],
                            h = this._points[s + 1];
                        (a <= e && e < h || h <= e && e < a) && t < (r - o) * (e - a) / (h - a) + o && (i = !i) } else
                        for (var n = -1, s = this._points.length - 1; ++n < this._points.length; s = n) { var o = this._points[n].x,
                                a = this._points[n].y,
                                r = this._points[s].x,
                                h = this._points[s].y;
                            (a <= e && e < h || h <= e && e < a) && t < (r - o) * (e - a) / (h - a) + o && (i = !i) }
                return i }, setTo: function(t) { if (this.area = 0, this._points = [], arguments.length > 0) { Array.isArray(t) || (t = Array.prototype.slice.call(arguments)); for (var e = Number.MAX_VALUE, i = 0, n = t.length; i < n; i++) { if ("number" == typeof t[i]) { s = new PIXI.Point(t[i], t[i + 1]);
                            i++ } else if (Array.isArray(t[i])) s = new PIXI.Point(t[i][0], t[i][1]);
                        else var s = new PIXI.Point(t[i].x, t[i].y);
                        this._points.push(s), s.y < e && (e = s.y) } this.calculateArea(e) } return this }, calculateArea: function(t) { for (var e, i, n, s, o = 0, a = this._points.length; o < a; o++) e = this._points[o], i = o === a - 1 ? this._points[0] : this._points[o + 1], n = (e.y - t + (i.y - t)) / 2, s = e.x - i.x, this.area += n * s; return this.area } }, i.Polygon.prototype.constructor = i.Polygon, Object.defineProperty(i.Polygon.prototype, "points", { get: function() { return this._points }, set: function(t) { null != t ? this.setTo(t) : this.setTo() } }), PIXI.Polygon = i.Polygon, i.Rectangle = function(t, e, n, s) { t = t || 0, e = e || 0, n = n || 0, s = s || 0, this.x = t, this.y = e, this.width = n, this.height = s, this.type = i.RECTANGLE }, i.Rectangle.prototype = { offset: function(t, e) { return this.x += t, this.y += e, this }, offsetPoint: function(t) { return this.offset(t.x, t.y) }, setTo: function(t, e, i, n) { return this.x = t, this.y = e, this.width = i, this.height = n, this }, scale: function(t, e) { return void 0 === e && (e = t), this.width *= t, this.height *= e, this }, centerOn: function(t, e) { return this.centerX = t, this.centerY = e, this }, floor: function() { this.x = Math.floor(this.x), this.y = Math.floor(this.y) }, floorAll: function() { this.x = Math.floor(this.x), this.y = Math.floor(this.y), this.width = Math.floor(this.width), this.height = Math.floor(this.height) }, ceil: function() { this.x = Math.ceil(this.x), this.y = Math.ceil(this.y) }, ceilAll: function() { this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this.width = Math.ceil(this.width), this.height = Math.ceil(this.height) }, copyFrom: function(t) { return this.setTo(t.x, t.y, t.width, t.height) }, copyTo: function(t) { return t.x = this.x, t.y = this.y, t.width = this.width, t.height = this.height, t }, inflate: function(t, e) { return i.Rectangle.inflate(this, t, e) }, size: function(t) { return i.Rectangle.size(this, t) }, resize: function(t, e) { return this.width = t, this.height = e, this }, clone: function(t) { return i.Rectangle.clone(this, t) }, contains: function(t, e) { return i.Rectangle.contains(this, t, e) }, containsRect: function(t) { return i.Rectangle.containsRect(t, this) }, equals: function(t) { return i.Rectangle.equals(this, t) }, intersection: function(t, e) { return i.Rectangle.intersection(this, t, e) }, intersects: function(t) { return i.Rectangle.intersects(this, t) }, intersectsRaw: function(t, e, n, s, o) { return i.Rectangle.intersectsRaw(this, t, e, n, s, o) }, union: function(t, e) { return i.Rectangle.union(this, t, e) }, random: function(t) { return void 0 === t && (t = new i.Point), t.x = this.randomX, t.y = this.randomY, t }, getPoint: function(t, e) { switch (void 0 === e && (e = new i.Point), t) {
                    default:
                    case i.TOP_LEFT:
                        return e.set(this.x, this.y);
                    case i.TOP_CENTER:
                        return e.set(this.centerX, this.y);
                    case i.TOP_RIGHT:
                        return e.set(this.right, this.y);
                    case i.LEFT_CENTER:
                        return e.set(this.x, this.centerY);
                    case i.CENTER:
                        return e.set(this.centerX, this.centerY);
                    case i.RIGHT_CENTER:
                        return e.set(this.right, this.centerY);
                    case i.BOTTOM_LEFT:
                        return e.set(this.x, this.bottom);
                    case i.BOTTOM_CENTER:
                        return e.set(this.centerX, this.bottom);
                    case i.BOTTOM_RIGHT:
                        return e.set(this.right, this.bottom) } }, toString: function() { return "[{Rectangle (x=" + this.x + " y=" + this.y + " width=" + this.width + " height=" + this.height + " empty=" + this.empty + ")}]" } }, Object.defineProperty(i.Rectangle.prototype, "halfWidth", { get: function() { return Math.round(this.width / 2) } }), Object.defineProperty(i.Rectangle.prototype, "halfHeight", { get: function() { return Math.round(this.height / 2) } }), Object.defineProperty(i.Rectangle.prototype, "bottom", { get: function() { return this.y + this.height }, set: function(t) { t <= this.y ? this.height = 0 : this.height = t - this.y } }), Object.defineProperty(i.Rectangle.prototype, "bottomLeft", { get: function() { return new i.Point(this.x, this.bottom) }, set: function(t) { this.x = t.x, this.bottom = t.y } }), Object.defineProperty(i.Rectangle.prototype, "bottomRight", { get: function() { return new i.Point(this.right, this.bottom) }, set: function(t) { this.right = t.x, this.bottom = t.y } }), Object.defineProperty(i.Rectangle.prototype, "left", { get: function() { return this.x }, set: function(t) { t >= this.right ? this.width = 0 : this.width = this.right - t, this.x = t } }), Object.defineProperty(i.Rectangle.prototype, "right", { get: function() { return this.x + this.width }, set: function(t) { t <= this.x ? this.width = 0 : this.width = t - this.x } }), Object.defineProperty(i.Rectangle.prototype, "volume", { get: function() { return this.width * this.height } }), Object.defineProperty(i.Rectangle.prototype, "perimeter", { get: function() { return 2 * this.width + 2 * this.height } }), Object.defineProperty(i.Rectangle.prototype, "centerX", { get: function() { return this.x + this.halfWidth }, set: function(t) { this.x = t - this.halfWidth } }), Object.defineProperty(i.Rectangle.prototype, "centerY", { get: function() { return this.y + this.halfHeight }, set: function(t) { this.y = t - this.halfHeight } }), Object.defineProperty(i.Rectangle.prototype, "randomX", { get: function() { return this.x + Math.random() * this.width } }), Object.defineProperty(i.Rectangle.prototype, "randomY", { get: function() { return this.y + Math.random() * this.height } }), Object.defineProperty(i.Rectangle.prototype, "top", { get: function() { return this.y }, set: function(t) { t >= this.bottom ? (this.height = 0, this.y = t) : this.height = this.bottom - t } }), Object.defineProperty(i.Rectangle.prototype, "topLeft", { get: function() { return new i.Point(this.x, this.y) }, set: function(t) { this.x = t.x, this.y = t.y } }), Object.defineProperty(i.Rectangle.prototype, "topRight", { get: function() { return new i.Point(this.x + this.width, this.y) }, set: function(t) { this.right = t.x, this.y = t.y } }), Object.defineProperty(i.Rectangle.prototype, "empty", { get: function() { return !this.width || !this.height }, set: function(t) {!0 === t && this.setTo(0, 0, 0, 0) } }), i.Rectangle.prototype.constructor = i.Rectangle, i.Rectangle.inflate = function(t, e, i) { return t.x -= e, t.width += 2 * e, t.y -= i, t.height += 2 * i, t }, i.Rectangle.inflatePoint = function(t, e) { return i.Rectangle.inflate(t, e.x, e.y) }, i.Rectangle.size = function(t, e) { return void 0 === e || null === e ? e = new i.Point(t.width, t.height) : e.setTo(t.width, t.height), e }, i.Rectangle.clone = function(t, e) { return void 0 === e || null === e ? e = new i.Rectangle(t.x, t.y, t.width, t.height) : e.setTo(t.x, t.y, t.width, t.height), e }, i.Rectangle.contains = function(t, e, i) { return !(t.width <= 0 || t.height <= 0) && (e >= t.x && e < t.right && i >= t.y && i < t.bottom) }, i.Rectangle.containsRaw = function(t, e, i, n, s, o) { return s >= t && s < t + i && o >= e && o < e + n }, i.Rectangle.containsPoint = function(t, e) { return i.Rectangle.contains(t, e.x, e.y) }, i.Rectangle.containsRect = function(t, e) { return !(t.volume > e.volume) && (t.x >= e.x && t.y >= e.y && t.right < e.right && t.bottom < e.bottom) }, i.Rectangle.equals = function(t, e) { return t.x === e.x && t.y === e.y && t.width === e.width && t.height === e.height }, i.Rectangle.sameDimensions = function(t, e) { return t.width === e.width && t.height === e.height }, i.Rectangle.intersection = function(t, e, n) { return void 0 === n && (n = new i.Rectangle), i.Rectangle.intersects(t, e) && (n.x = Math.max(t.x, e.x), n.y = Math.max(t.y, e.y), n.width = Math.min(t.right, e.right) - n.x, n.height = Math.min(t.bottom, e.bottom) - n.y), n }, i.Rectangle.intersects = function(t, e) { return !(t.width <= 0 || t.height <= 0 || e.width <= 0 || e.height <= 0) && !(t.right < e.x || t.bottom < e.y || t.x > e.right || t.y > e.bottom) }, i.Rectangle.intersectsRaw = function(t, e, i, n, s, o) { return void 0 === o && (o = 0), !(e > t.right + o || i < t.left - o || n > t.bottom + o || s < t.top - o) }, i.Rectangle.union = function(t, e, n) { return void 0 === n && (n = new i.Rectangle), n.setTo(Math.min(t.x, e.x), Math.min(t.y, e.y), Math.max(t.right, e.right) - Math.min(t.left, e.left), Math.max(t.bottom, e.bottom) - Math.min(t.top, e.top)) }, i.Rectangle.aabb = function(t, e) { void 0 === e && (e = new i.Rectangle); var n = Number.NEGATIVE_INFINITY,
                s = Number.POSITIVE_INFINITY,
                o = Number.NEGATIVE_INFINITY,
                a = Number.POSITIVE_INFINITY; return t.forEach(function(t) { t.x > n && (n = t.x), t.x < s && (s = t.x), t.y > o && (o = t.y), t.y < a && (a = t.y) }), e.setTo(s, a, n - s, o - a), e }, PIXI.Rectangle = i.Rectangle, PIXI.EmptyRectangle = new i.Rectangle(0, 0, 0, 0), i.RoundedRectangle = function(t, e, n, s, o) { void 0 === t && (t = 0), void 0 === e && (e = 0), void 0 === n && (n = 0), void 0 === s && (s = 0), void 0 === o && (o = 20), this.x = t, this.y = e, this.width = n, this.height = s, this.radius = o || 20, this.type = i.ROUNDEDRECTANGLE }, i.RoundedRectangle.prototype = { clone: function() { return new i.RoundedRectangle(this.x, this.y, this.width, this.height, this.radius) }, contains: function(t, e) { if (this.width <= 0 || this.height <= 0) return !1; var i = this.x; if (t >= i && t <= i + this.width) { var n = this.y; if (e >= n && e <= n + this.height) return !0 } return !1 } }, i.RoundedRectangle.prototype.constructor = i.RoundedRectangle, PIXI.RoundedRectangle = i.RoundedRectangle, i.Camera = function(t, e, n, s, o, a) { this.game = t, this.world = t.world, this.id = 0, this.view = new i.Rectangle(n, s, o, a), this.bounds = new i.Rectangle(n, s, o, a), this.deadzone = null, this.visible = !0, this.roundPx = !0, this.atLimit = { x: !1, y: !1 }, this.target = null, this.displayObject = null, this.scale = null, this.totalInView = 0, this.lerp = new i.Point(1, 1), this.onShakeComplete = new i.Signal, this.onFlashComplete = new i.Signal, this.onFadeComplete = new i.Signal, this.fx = null, this._targetPosition = new i.Point, this._edge = 0, this._position = new i.Point, this._shake = { intensity: 0, duration: 0, horizontal: !1, vertical: !1, shakeBounds: !0, x: 0, y: 0 }, this._fxDuration = 0, this._fxType = 0 }, i.Camera.FOLLOW_LOCKON = 0, i.Camera.FOLLOW_PLATFORMER = 1, i.Camera.FOLLOW_TOPDOWN = 2, i.Camera.FOLLOW_TOPDOWN_TIGHT = 3, i.Camera.SHAKE_BOTH = 4, i.Camera.SHAKE_HORIZONTAL = 5, i.Camera.SHAKE_VERTICAL = 6, i.Camera.ENABLE_FX = !0, i.Camera.prototype = { boot: function() { this.displayObject = this.game.world, this.scale = this.game.world.scale, this.game.camera = this, i.Graphics && i.Camera.ENABLE_FX && (this.fx = new i.Graphics(this.game), this.game.stage.addChild(this.fx)) }, preUpdate: function() { this.totalInView = 0 }, follow: function(t, e, n, s) { void 0 === e && (e = i.Camera.FOLLOW_LOCKON), void 0 === n && (n = 1), void 0 === s && (s = 1), this.target = t, this.lerp.set(n, s); var o; switch (e) {
                    case i.Camera.FOLLOW_PLATFORMER:
                        var a = this.width / 8,
                            r = this.height / 3;
                        this.deadzone = new i.Rectangle((this.width - a) / 2, (this.height - r) / 2 - .25 * r, a, r); break;
                    case i.Camera.FOLLOW_TOPDOWN:
                        o = Math.max(this.width, this.height) / 4, this.deadzone = new i.Rectangle((this.width - o) / 2, (this.height - o) / 2, o, o); break;
                    case i.Camera.FOLLOW_TOPDOWN_TIGHT:
                        o = Math.max(this.width, this.height) / 8, this.deadzone = new i.Rectangle((this.width - o) / 2, (this.height - o) / 2, o, o); break;
                    case i.Camera.FOLLOW_LOCKON:
                    default:
                        this.deadzone = null } }, unfollow: function() { this.target = null }, focusOn: function(t) { this.setPosition(Math.round(t.x - this.view.halfWidth), Math.round(t.y - this.view.halfHeight)) }, focusOnXY: function(t, e) { this.setPosition(Math.round(t - this.view.halfWidth), Math.round(e - this.view.halfHeight)) }, shake: function(t, e, n, s, o) { return void 0 === t && (t = .05), void 0 === e && (e = 500), void 0 === n && (n = !0), void 0 === s && (s = i.Camera.SHAKE_BOTH), void 0 === o && (o = !0), !(!n && this._shake.duration > 0) && (this._shake.intensity = t, this._shake.duration = e, this._shake.shakeBounds = o, this._shake.x = 0, this._shake.y = 0, this._shake.horizontal = s === i.Camera.SHAKE_BOTH || s === i.Camera.SHAKE_HORIZONTAL, this._shake.vertical = s === i.Camera.SHAKE_BOTH || s === i.Camera.SHAKE_VERTICAL, !0) }, flash: function(t, e, i) { return void 0 === t && (t = 16777215), void 0 === e && (e = 500), void 0 === i && (i = !1), !(!this.fx || !i && this._fxDuration > 0) && (this.fx.clear(), this.fx.beginFill(t), this.fx.drawRect(0, 0, this.width, this.height), this.fx.endFill(), this.fx.alpha = 1, this._fxDuration = e, this._fxType = 0, !0) }, fade: function(t, e, i) { return void 0 === t && (t = 0), void 0 === e && (e = 500), void 0 === i && (i = !1), !(!this.fx || !i && this._fxDuration > 0) && (this.fx.clear(), this.fx.beginFill(t), this.fx.drawRect(0, 0, this.width, this.height), this.fx.endFill(), this.fx.alpha = 0, this._fxDuration = e, this._fxType = 1, !0) }, update: function() { this._fxDuration > 0 && this.updateFX(), this._shake.duration > 0 && this.updateShake(), this.bounds && this.checkBounds(), this.roundPx && (this.view.floor(), this._shake.x = Math.floor(this._shake.x), this._shake.y = Math.floor(this._shake.y)), this.displayObject.position.x = -this.view.x, this.displayObject.position.y = -this.view.y }, updateFX: function() { 0 === this._fxType ? (this.fx.alpha -= this.game.time.elapsedMS / this._fxDuration, this.fx.alpha <= 0 && (this._fxDuration = 0, this.fx.alpha = 0, this.onFlashComplete.dispatch())) : (this.fx.alpha += this.game.time.elapsedMS / this._fxDuration, this.fx.alpha >= 1 && (this._fxDuration = 0, this.fx.alpha = 1, this.onFadeComplete.dispatch())) }, updateShake: function() { this._shake.duration -= this.game.time.elapsedMS, this._shake.duration <= 0 ? (this.onShakeComplete.dispatch(), this._shake.x = 0, this._shake.y = 0) : (this._shake.horizontal && (this._shake.x = this.game.rnd.frac() * this._shake.intensity * this.view.width * 2 - this._shake.intensity * this.view.width), this._shake.vertical && (this._shake.y = this.game.rnd.frac() * this._shake.intensity * this.view.height * 2 - this._shake.intensity * this.view.height)) }, updateTarget: function() { this._targetPosition.x = this.view.x + this.target.worldPosition.x, this._targetPosition.y = this.view.y + this.target.worldPosition.y, this.deadzone ? (this._edge = this._targetPosition.x - this.view.x, this._edge < this.deadzone.left ? this.view.x = this.game.math.linear(this.view.x, this._targetPosition.x - this.deadzone.left, this.lerp.x) : this._edge > this.deadzone.right && (this.view.x = this.game.math.linear(this.view.x, this._targetPosition.x - this.deadzone.right, this.lerp.x)), this._edge = this._targetPosition.y - this.view.y, this._edge < this.deadzone.top ? this.view.y = this.game.math.linear(this.view.y, this._targetPosition.y - this.deadzone.top, this.lerp.y) : this._edge > this.deadzone.bottom && (this.view.y = this.game.math.linear(this.view.y, this._targetPosition.y - this.deadzone.bottom, this.lerp.y))) : (this.view.x = this.game.math.linear(this.view.x, this._targetPosition.x - this.view.halfWidth, this.lerp.x), this.view.y = this.game.math.linear(this.view.y, this._targetPosition.y - this.view.halfHeight, this.lerp.y)), this.bounds && this.checkBounds(), this.roundPx && this.view.floor(), this.displayObject.position.x = -this.view.x, this.displayObject.position.y = -this.view.y }, setBoundsToWorld: function() { this.bounds && this.bounds.copyFrom(this.game.world.bounds) }, checkBounds: function() { this.atLimit.x = !1, this.atLimit.y = !1; var t = this.view.x + this._shake.x,
                    e = this.view.right + this._shake.x,
                    i = this.view.y + this._shake.y,
                    n = this.view.bottom + this._shake.y;
                t <= this.bounds.x * this.scale.x && (this.atLimit.x = !0, this.view.x = this.bounds.x * this.scale.x, this._shake.shakeBounds || (this._shake.x = 0)), e >= this.bounds.right * this.scale.x && (this.atLimit.x = !0, this.view.x = this.bounds.right * this.scale.x - this.width, this._shake.shakeBounds || (this._shake.x = 0)), i <= this.bounds.top * this.scale.y && (this.atLimit.y = !0, this.view.y = this.bounds.top * this.scale.y, this._shake.shakeBounds || (this._shake.y = 0)), n >= this.bounds.bottom * this.scale.y && (this.atLimit.y = !0, this.view.y = this.bounds.bottom * this.scale.y - this.height, this._shake.shakeBounds || (this._shake.y = 0)) }, setPosition: function(t, e) { this.view.x = t, this.view.y = e, this.bounds && this.checkBounds() }, setSize: function(t, e) { this.view.width = t, this.view.height = e }, reset: function() { this.target = null, this.view.x = 0, this.view.y = 0, this._shake.duration = 0, this.resetFX() }, resetFX: function() { this.fx.clear(), this.fx.alpha = 0, this._fxDuration = 0 } }, i.Camera.prototype.constructor = i.Camera, Object.defineProperty(i.Camera.prototype, "x", { get: function() { return this.view.x }, set: function(t) { this.view.x = t, this.bounds && this.checkBounds() } }), Object.defineProperty(i.Camera.prototype, "y", { get: function() { return this.view.y }, set: function(t) { this.view.y = t, this.bounds && this.checkBounds() } }), Object.defineProperty(i.Camera.prototype, "position", { get: function() { return this._position.set(this.view.x, this.view.y), this._position }, set: function(t) { void 0 !== t.x && (this.view.x = t.x), void 0 !== t.y && (this.view.y = t.y), this.bounds && this.checkBounds() } }), Object.defineProperty(i.Camera.prototype, "width", { get: function() { return this.view.width }, set: function(t) { this.view.width = t } }), Object.defineProperty(i.Camera.prototype, "height", { get: function() { return this.view.height }, set: function(t) { this.view.height = t } }), Object.defineProperty(i.Camera.prototype, "shakeIntensity", { get: function() { return this._shake.intensity }, set: function(t) { this._shake.intensity = t } }), i.State = function() { this.game = null, this.key = "", this.add = null, this.make = null, this.camera = null, this.cache = null, this.input = null, this.load = null, this.math = null, this.sound = null, this.scale = null, this.stage = null, this.state = null, this.time = null, this.tweens = null, this.world = null, this.particles = null, this.physics = null, this.rnd = null }, i.State.prototype = { init: function() {}, preload: function() {}, loadUpdate: function() {}, loadRender: function() {}, create: function() {}, update: function() {}, preRender: function() {}, render: function() {}, resize: function() {}, paused: function() {}, resumed: function() {}, pauseUpdate: function() {}, shutdown: function() {} }, i.State.prototype.constructor = i.State, i.StateManager = function(t, e) { this.game = t, this.states = {}, this._pendingState = null, void 0 !== e && null !== e && (this._pendingState = e), this._clearWorld = !1, this._clearCache = !1, this._created = !1, this._args = [], this.current = "", this.onStateChange = new i.Signal, this.onInitCallback = null, this.onPreloadCallback = null, this.onCreateCallback = null, this.onUpdateCallback = null, this.onRenderCallback = null, this.onResizeCallback = null, this.onPreRenderCallback = null, this.onLoadUpdateCallback = null, this.onLoadRenderCallback = null, this.onPausedCallback = null, this.onResumedCallback = null, this.onPauseUpdateCallback = null, this.onShutDownCallback = null }, i.StateManager.prototype = { boot: function() { this.game.onPause.add(this.pause, this), this.game.onResume.add(this.resume, this), null !== this._pendingState && "string" != typeof this._pendingState && this.add("default", this._pendingState, !0) }, add: function(t, e, n) { void 0 === n && (n = !1); var s; return e instanceof i.State ? s = e : "object" == typeof e ? (s = e).game = this.game : "function" == typeof e && (s = new e(this.game)), this.states[t] = s, n && (this.game.isBooted ? this.start(t) : this._pendingState = t), s }, remove: function(t) { this.current === t && (this.callbackContext = null, this.onInitCallback = null, this.onShutDownCallback = null, this.onPreloadCallback = null, this.onLoadRenderCallback = null, this.onLoadUpdateCallback = null, this.onCreateCallback = null, this.onUpdateCallback = null, this.onPreRenderCallback = null, this.onRenderCallback = null, this.onResizeCallback = null, this.onPausedCallback = null, this.onResumedCallback = null, this.onPauseUpdateCallback = null), delete this.states[t] }, start: function(t, e, i) { void 0 === e && (e = !0), void 0 === i && (i = !1), this.checkState(t) && (this._pendingState = t, this._clearWorld = e, this._clearCache = i, arguments.length > 3 && (this._args = Array.prototype.splice.call(arguments, 3))) }, restart: function(t, e) { void 0 === t && (t = !0), void 0 === e && (e = !1), this._pendingState = this.current, this._clearWorld = t, this._clearCache = e, arguments.length > 2 && (this._args = Array.prototype.slice.call(arguments, 2)) }, dummy: function() {}, preUpdate: function() { if (this._pendingState && this.game.isBooted) { var t = this.current; if (this.clearCurrentState(), this.setCurrentState(this._pendingState), this.onStateChange.dispatch(this.current, t), this.current !== this._pendingState) return;
                    this._pendingState = null, this.onPreloadCallback ? (this.game.load.reset(!0), this.onPreloadCallback.call(this.callbackContext, this.game), 0 === this.game.load.totalQueuedFiles() && 0 === this.game.load.totalQueuedPacks() ? this.loadComplete() : this.game.load.start()) : this.loadComplete() } }, clearCurrentState: function() { this.current && (this.onShutDownCallback && this.onShutDownCallback.call(this.callbackContext, this.game), this.game.tweens.removeAll(), this.game.camera.reset(), this.game.input.reset(!0), this.game.physics.clear(), this.game.time.removeAll(), this.game.scale.reset(this._clearWorld), this.game.debug && this.game.debug.reset(), this._clearWorld && (this.game.world.shutdown(), this._clearCache && this.game.cache.destroy())) }, checkState: function(t) { return this.states[t] ? !!(this.states[t].preload || this.states[t].create || this.states[t].update || this.states[t].render) || (console.warn("Invalid Phaser State object given. Must contain at least a one of the required functions: preload, create, update or render"), !1) : (console.warn("Phaser.StateManager - No state found with the key: " + t), !1) }, link: function(t) { this.states[t].game = this.game, this.states[t].add = this.game.add, this.states[t].make = this.game.make, this.states[t].camera = this.game.camera, this.states[t].cache = this.game.cache, this.states[t].input = this.game.input, this.states[t].load = this.game.load, this.states[t].math = this.game.math, this.states[t].sound = this.game.sound, this.states[t].scale = this.game.scale, this.states[t].state = this, this.states[t].stage = this.game.stage, this.states[t].time = this.game.time, this.states[t].tweens = this.game.tweens, this.states[t].world = this.game.world, this.states[t].particles = this.game.particles, this.states[t].rnd = this.game.rnd, this.states[t].physics = this.game.physics, this.states[t].key = t }, unlink: function(t) { this.states[t] && (this.states[t].game = null, this.states[t].add = null, this.states[t].make = null, this.states[t].camera = null, this.states[t].cache = null, this.states[t].input = null, this.states[t].load = null, this.states[t].math = null, this.states[t].sound = null, this.states[t].scale = null, this.states[t].state = null, this.states[t].stage = null, this.states[t].time = null, this.states[t].tweens = null, this.states[t].world = null, this.states[t].particles = null, this.states[t].rnd = null, this.states[t].physics = null) }, setCurrentState: function(t) { this.callbackContext = this.states[t], this.link(t), this.onInitCallback = this.states[t].init || this.dummy, this.onPreloadCallback = this.states[t].preload || null, this.onLoadRenderCallback = this.states[t].loadRender || null, this.onLoadUpdateCallback = this.states[t].loadUpdate || null, this.onCreateCallback = this.states[t].create || null, this.onUpdateCallback = this.states[t].update || null, this.onPreRenderCallback = this.states[t].preRender || null, this.onRenderCallback = this.states[t].render || null, this.onResizeCallback = this.states[t].resize || null, this.onPausedCallback = this.states[t].paused || null, this.onResumedCallback = this.states[t].resumed || null, this.onPauseUpdateCallback = this.states[t].pauseUpdate || null, this.onShutDownCallback = this.states[t].shutdown || this.dummy, "" !== this.current && this.game.physics.reset(), this.current = t, this._created = !1, this.onInitCallback.apply(this.callbackContext, this._args), t === this._pendingState && (this._args = []), this.game._kickstart = !0 }, getCurrentState: function() { return this.states[this.current] }, loadComplete: function() {!1 === this._created && this.onLoadUpdateCallback && this.onLoadUpdateCallback.call(this.callbackContext, this.game), !1 === this._created && this.onCreateCallback ? (this._created = !0, this.onCreateCallback.call(this.callbackContext, this.game)) : this._created = !0 }, pause: function() { this._created && this.onPausedCallback && this.onPausedCallback.call(this.callbackContext, this.game) }, resume: function() { this._created && this.onResumedCallback && this.onResumedCallback.call(this.callbackContext, this.game) }, update: function() { this._created ? this.onUpdateCallback && this.onUpdateCallback.call(this.callbackContext, this.game) : this.onLoadUpdateCallback && this.onLoadUpdateCallback.call(this.callbackContext, this.game) }, pauseUpdate: function() { this._created ? this.onPauseUpdateCallback && this.onPauseUpdateCallback.call(this.callbackContext, this.game) : this.onLoadUpdateCallback && this.onLoadUpdateCallback.call(this.callbackContext, this.game) }, preRender: function(t) { this._created && this.onPreRenderCallback && this.onPreRenderCallback.call(this.callbackContext, this.game, t) }, resize: function(t, e) { this.onResizeCallback && this.onResizeCallback.call(this.callbackContext, t, e) }, render: function() { this._created ? this.onRenderCallback && (this.game.renderType === i.CANVAS ? (this.game.context.save(), this.game.context.setTransform(1, 0, 0, 1, 0, 0), this.onRenderCallback.call(this.callbackContext, this.game), this.game.context.restore()) : this.onRenderCallback.call(this.callbackContext, this.game)) : this.onLoadRenderCallback && this.onLoadRenderCallback.call(this.callbackContext, this.game) }, destroy: function() { this._clearWorld = !0, this._clearCache = !0, this.clearCurrentState(), this.callbackContext = null, this.onInitCallback = null, this.onShutDownCallback = null, this.onPreloadCallback = null, this.onLoadRenderCallback = null, this.onLoadUpdateCallback = null, this.onCreateCallback = null, this.onUpdateCallback = null, this.onRenderCallback = null, this.onPausedCallback = null, this.onResumedCallback = null, this.onPauseUpdateCallback = null, this.game = null, this.states = {}, this._pendingState = null, this.current = "" } }, i.StateManager.prototype.constructor = i.StateManager, Object.defineProperty(i.StateManager.prototype, "created", { get: function() { return this._created } }), i.Signal = function() {}, i.Signal.prototype = { _bindings: null, _prevParams: null, memorize: !1, _shouldPropagate: !0, active: !0, _boundDispatch: !1, validateListener: function(t, e) { if ("function" != typeof t) throw new Error("Phaser.Signal: listener is a required param of {fn}() and should be a Function.".replace("{fn}", e)) }, _registerListener: function(t, e, n, s, o) { var a, r = this._indexOfListener(t, n); if (-1 !== r) { if ((a = this._bindings[r]).isOnce() !== e) throw new Error("You cannot add" + (e ? "" : "Once") + "() then add" + (e ? "Once" : "") + "() the same listener without removing the relationship first.") } else a = new i.SignalBinding(this, t, e, n, s, o), this._addBinding(a); return this.memorize && this._prevParams && a.execute(this._prevParams), a }, _addBinding: function(t) { this._bindings || (this._bindings = []); var e = this._bindings.length;
                do { e-- } while (this._bindings[e] && t._priority <= this._bindings[e]._priority);
                this._bindings.splice(e + 1, 0, t) }, _indexOfListener: function(t, e) { if (!this._bindings) return -1;
                void 0 === e && (e = null); for (var i, n = this._bindings.length; n--;)
                    if ((i = this._bindings[n])._listener === t && i.context === e) return n; return -1 }, has: function(t, e) { return -1 !== this._indexOfListener(t, e) }, add: function(t, e, i) { this.validateListener(t, "add"); var n = []; if (arguments.length > 3)
                    for (var s = 3; s < arguments.length; s++) n.push(arguments[s]); return this._registerListener(t, !1, e, i, n) }, addOnce: function(t, e, i) { this.validateListener(t, "addOnce"); var n = []; if (arguments.length > 3)
                    for (var s = 3; s < arguments.length; s++) n.push(arguments[s]); return this._registerListener(t, !0, e, i, n) }, remove: function(t, e) { this.validateListener(t, "remove"); var i = this._indexOfListener(t, e); return -1 !== i && (this._bindings[i]._destroy(), this._bindings.splice(i, 1)), t }, removeAll: function(t) { if (void 0 === t && (t = null), this._bindings) { for (var e = this._bindings.length; e--;) t ? this._bindings[e].context === t && (this._bindings[e]._destroy(), this._bindings.splice(e, 1)) : this._bindings[e]._destroy();
                    t || (this._bindings.length = 0) } }, getNumListeners: function() { return this._bindings ? this._bindings.length : 0 }, halt: function() { this._shouldPropagate = !1 }, dispatch: function() { if (this.active && this._bindings) { var t, e = Array.prototype.slice.call(arguments),
                        i = this._bindings.length; if (this.memorize && (this._prevParams = e), i) { t = this._bindings.slice(), this._shouldPropagate = !0;
                        do { i-- } while (t[i] && this._shouldPropagate && !1 !== t[i].execute(e)) } } }, forget: function() { this._prevParams && (this._prevParams = null) }, dispose: function() { this.removeAll(), this._bindings = null, this._prevParams && (this._prevParams = null) }, toString: function() { return "[Phaser.Signal active:" + this.active + " numListeners:" + this.getNumListeners() + "]" } }, Object.defineProperty(i.Signal.prototype, "boundDispatch", { get: function() { var t = this; return this._boundDispatch || (this._boundDispatch = function() { return t.dispatch.apply(t, arguments) }) } }), i.Signal.prototype.constructor = i.Signal, i.SignalBinding = function(t, e, i, n, s, o) { this._listener = e, i && (this._isOnce = !0), null != n && (this.context = n), this._signal = t, s && (this._priority = s), o && o.length && (this._args = o) }, i.SignalBinding.prototype = { context: null, _isOnce: !1, _priority: 0, _args: null, callCount: 0, active: !0, params: null, execute: function(t) { var e, i; return this.active && this._listener && (i = this.params ? this.params.concat(t) : t, this._args && (i = i.concat(this._args)), e = this._listener.apply(this.context, i), this.callCount++, this._isOnce && this.detach()), e }, detach: function() { return this.isBound() ? this._signal.remove(this._listener, this.context) : null }, isBound: function() { return !!this._signal && !!this._listener }, isOnce: function() { return this._isOnce }, getListener: function() { return this._listener }, getSignal: function() { return this._signal }, _destroy: function() { delete this._signal, delete this._listener, delete this.context }, toString: function() { return "[Phaser.SignalBinding isOnce:" + this._isOnce + ", isBound:" + this.isBound() + ", active:" + this.active + "]" } }, i.SignalBinding.prototype.constructor = i.SignalBinding, i.Filter = function(t, e, n) { this.game = t, this.type = i.WEBGL_FILTER, this.passes = [this], this.shaders = [], this.dirty = !0, this.padding = 0, this.prevPoint = new i.Point; var s = new Date; if (this.uniforms = { resolution: { type: "2f", value: { x: 256, y: 256 } }, time: { type: "1f", value: 0 }, mouse: { type: "2f", value: { x: 0, y: 0 } }, date: { type: "4fv", value: [s.getFullYear(), s.getMonth(), s.getDate(), 60 * s.getHours() * 60 + 60 * s.getMinutes() + s.getSeconds()] }, sampleRate: { type: "1f", value: 44100 }, iChannel0: { type: "sampler2D", value: null, textureData: { repeat: !0 } }, iChannel1: { type: "sampler2D", value: null, textureData: { repeat: !0 } }, iChannel2: { type: "sampler2D", value: null, textureData: { repeat: !0 } }, iChannel3: { type: "sampler2D", value: null, textureData: { repeat: !0 } } }, e)
                for (var o in e) this.uniforms[o] = e[o];
            this.fragmentSrc = n || "" }, i.Filter.prototype = { init: function() {}, setResolution: function(t, e) { this.uniforms.resolution.value.x = t, this.uniforms.resolution.value.y = e }, update: function(t) { if (void 0 !== t) { var e = t.x / this.game.width,
                        i = 1 - t.y / this.game.height;
                    e === this.prevPoint.x && i === this.prevPoint.y || (this.uniforms.mouse.value.x = e.toFixed(2), this.uniforms.mouse.value.y = i.toFixed(2), this.prevPoint.set(e, i)) } this.uniforms.time.value = this.game.time.totalElapsedSeconds() }, addToWorld: function(t, e, i, n, s, o) { void 0 === s && (s = 0), void 0 === o && (o = 0), void 0 !== i && null !== i ? this.width = i : i = this.width, void 0 !== n && null !== n ? this.height = n : n = this.height; var a = this.game.add.image(t, e, "__default"); return a.width = i, a.height = n, a.anchor.set(s, o), a.filters = [this], a }, destroy: function() { this.game = null } }, i.Filter.prototype.constructor = i.Filter, Object.defineProperty(i.Filter.prototype, "width", { get: function() { return this.uniforms.resolution.value.x }, set: function(t) { this.uniforms.resolution.value.x = t } }), Object.defineProperty(i.Filter.prototype, "height", { get: function() { return this.uniforms.resolution.value.y }, set: function(t) { this.uniforms.resolution.value.y = t } }), i.Plugin = function(t, e) { void 0 === e && (e = null), this.game = t, this.parent = e, this.active = !1, this.visible = !1, this.hasPreUpdate = !1, this.hasUpdate = !1, this.hasPostUpdate = !1, this.hasRender = !1, this.hasPostRender = !1 }, i.Plugin.prototype = { preUpdate: function() {}, update: function() {}, render: function() {}, postRender: function() {}, destroy: function() { this.game = null, this.parent = null, this.active = !1, this.visible = !1 } }, i.Plugin.prototype.constructor = i.Plugin, i.PluginManager = function(t) { this.game = t, this.plugins = [], this._len = 0, this._i = 0 }, i.PluginManager.prototype = { add: function(t) { var e = Array.prototype.slice.call(arguments, 1),
                    i = !1; return "function" == typeof t ? t = new t(this.game, this) : (t.game = this.game, t.parent = this), "function" == typeof t.preUpdate && (t.hasPreUpdate = !0, i = !0), "function" == typeof t.update && (t.hasUpdate = !0, i = !0), "function" == typeof t.postUpdate && (t.hasPostUpdate = !0, i = !0), "function" == typeof t.render && (t.hasRender = !0, i = !0), "function" == typeof t.postRender && (t.hasPostRender = !0, i = !0), i ? ((t.hasPreUpdate || t.hasUpdate || t.hasPostUpdate) && (t.active = !0), (t.hasRender || t.hasPostRender) && (t.visible = !0), this._len = this.plugins.push(t), "function" == typeof t.init && t.init.apply(t, e), t) : null }, remove: function(t, e) { for (void 0 === e && (e = !0), this._i = this._len; this._i--;)
                    if (this.plugins[this._i] === t) return e && t.destroy(), this.plugins.splice(this._i, 1), void this._len-- }, removeAll: function() { for (this._i = this._len; this._i--;) this.plugins[this._i].destroy();
                this.plugins.length = 0, this._len = 0 }, preUpdate: function() { for (this._i = this._len; this._i--;) this.plugins[this._i].active && this.plugins[this._i].hasPreUpdate && this.plugins[this._i].preUpdate() }, update: function() { for (this._i = this._len; this._i--;) this.plugins[this._i].active && this.plugins[this._i].hasUpdate && this.plugins[this._i].update() }, postUpdate: function() { for (this._i = this._len; this._i--;) this.plugins[this._i].active && this.plugins[this._i].hasPostUpdate && this.plugins[this._i].postUpdate() }, render: function() { for (this._i = this._len; this._i--;) this.plugins[this._i].visible && this.plugins[this._i].hasRender && this.plugins[this._i].render() }, postRender: function() { for (this._i = this._len; this._i--;) this.plugins[this._i].visible && this.plugins[this._i].hasPostRender && this.plugins[this._i].postRender() }, destroy: function() { this.removeAll(), this.game = null } }, i.PluginManager.prototype.constructor = i.PluginManager, i.Stage = function(t) { this.game = t, PIXI.DisplayObjectContainer.call(this), this.name = "_stage_root", this.disableVisibilityChange = !1, this.exists = !0, this.worldTransform = new PIXI.Matrix, this.stage = this, this.currentRenderOrderID = 0, this._hiddenVar = "hidden", this._onChange = null, this._bgColor = { r: 0, g: 0, b: 0, a: 0, color: 0, rgba: "#000000" }, this.game.transparent || (this._bgColor.a = 1), t.config && this.parseConfig(t.config) }, i.Stage.prototype = Object.create(PIXI.DisplayObjectContainer.prototype), i.Stage.prototype.constructor = i.Stage, i.Stage.prototype.parseConfig = function(t) { t.disableVisibilityChange && (this.disableVisibilityChange = t.disableVisibilityChange), t.backgroundColor && this.setBackgroundColor(t.backgroundColor) }, i.Stage.prototype.boot = function() { i.DOM.getOffset(this.game.canvas, this.offset), i.Canvas.setUserSelect(this.game.canvas, "none"), i.Canvas.setTouchAction(this.game.canvas, "none"), this.checkVisibility() }, i.Stage.prototype.preUpdate = function() { this.currentRenderOrderID = 0; for (var t = 0; t < this.children.length; t++) this.children[t].preUpdate() }, i.Stage.prototype.update = function() { for (var t = this.children.length; t--;) this.children[t].update() }, i.Stage.prototype.postUpdate = function() { this.game.camera.update(), this.game.camera.target && (this.game.camera.target.postUpdate(), this.updateTransform(), this.game.camera.updateTarget()); for (var t = 0; t < this.children.length; t++) this.children[t].postUpdate();
            this.updateTransform() }, i.Stage.prototype.updateTransform = function() { this.worldAlpha = 1; for (var t = 0; t < this.children.length; t++) this.children[t].updateTransform() }, i.Stage.prototype.checkVisibility = function() { void 0 !== document.hidden ? this._hiddenVar = "visibilitychange" : void 0 !== document.webkitHidden ? this._hiddenVar = "webkitvisibilitychange" : void 0 !== document.mozHidden ? this._hiddenVar = "mozvisibilitychange" : void 0 !== document.msHidden ? this._hiddenVar = "msvisibilitychange" : this._hiddenVar = null; var t = this;
            this._onChange = function(e) { return t.visibilityChange(e) }, this._hiddenVar && document.addEventListener(this._hiddenVar, this._onChange, !1), window.onblur = this._onChange, window.onfocus = this._onChange, window.onpagehide = this._onChange, window.onpageshow = this._onChange, this.game.device.cocoonJSApp && (CocoonJS.App.onSuspended.addEventListener(function() { i.Stage.prototype.visibilityChange.call(t, { type: "pause" }) }), CocoonJS.App.onActivated.addEventListener(function() { i.Stage.prototype.visibilityChange.call(t, { type: "resume" }) })) }, i.Stage.prototype.visibilityChange = function(t) { "pagehide" !== t.type && "blur" !== t.type && "pageshow" !== t.type && "focus" !== t.type ? this.disableVisibilityChange || (document.hidden || document.mozHidden || document.msHidden || document.webkitHidden || "pause" === t.type ? this.game.gamePaused(t) : this.game.gameResumed(t)) : "pagehide" === t.type || "blur" === t.type ? this.game.focusLoss(t) : "pageshow" !== t.type && "focus" !== t.type || this.game.focusGain(t) }, i.Stage.prototype.setBackgroundColor = function(t) { this.game.transparent || (i.Color.valueToColor(t, this._bgColor), i.Color.updateColor(this._bgColor), this._bgColor.r /= 255, this._bgColor.g /= 255, this._bgColor.b /= 255, this._bgColor.a = 1) }, i.Stage.prototype.destroy = function() { this._hiddenVar && document.removeEventListener(this._hiddenVar, this._onChange, !1), window.onpagehide = null, window.onpageshow = null, window.onblur = null, window.onfocus = null }, Object.defineProperty(i.Stage.prototype, "backgroundColor", { get: function() { return this._bgColor.color }, set: function(t) { this.setBackgroundColor(t) } }), Object.defineProperty(i.Stage.prototype, "smoothed", { get: function() { return PIXI.scaleModes.DEFAULT === PIXI.scaleModes.LINEAR }, set: function(t) { PIXI.scaleModes.DEFAULT = t ? PIXI.scaleModes.LINEAR : PIXI.scaleModes.NEAREST } }), i.Group = function(t, e, n, s, o, a) { void 0 === s && (s = !1), void 0 === o && (o = !1), void 0 === a && (a = i.Physics.ARCADE), this.game = t, void 0 === e && (e = t.world), this.name = n || "group", this.z = 0, PIXI.DisplayObjectContainer.call(this), s ? (this.game.stage.addChild(this), this.z = this.game.stage.children.length) : e && (e.addChild(this), this.z = e.children.length), this.type = i.GROUP, this.physicsType = i.GROUP, this.alive = !0, this.exists = !0, this.ignoreDestroy = !1, this.pendingDestroy = !1, this.classType = i.Sprite, this.cursor = null, this.inputEnableChildren = !1, this.onChildInputDown = new i.Signal, this.onChildInputUp = new i.Signal, this.onChildInputOver = new i.Signal, this.onChildInputOut = new i.Signal, this.enableBody = o, this.enableBodyDebug = !1, this.physicsBodyType = a, this.physicsSortDirection = null, this.onDestroy = new i.Signal, this.cursorIndex = 0, this.fixedToCamera = !1, this.cameraOffset = new i.Point, this.hash = [], this._sortProperty = "z" }, i.Group.prototype = Object.create(PIXI.DisplayObjectContainer.prototype), i.Group.prototype.constructor = i.Group, i.Group.RETURN_NONE = 0, i.Group.RETURN_TOTAL = 1, i.Group.RETURN_CHILD = 2, i.Group.RETURN_ALL = 3, i.Group.SORT_ASCENDING = -1, i.Group.SORT_DESCENDING = 1, i.Group.prototype.add = function(t, e, i) { return void 0 === e && (e = !1), t.parent === this ? t : (t.body && t.parent && t.parent.hash && t.parent.removeFromHash(t), void 0 === i ? (t.z = this.children.length, this.addChild(t)) : (this.addChildAt(t, i), this.updateZ()), this.enableBody && t.hasOwnProperty("body") && null === t.body ? this.game.physics.enable(t, this.physicsBodyType) : t.body && this.addToHash(t), !this.inputEnableChildren || t.input && !t.inputEnabled || (t.inputEnabled = !0), !e && t.events && t.events.onAddedToGroup$dispatch(t, this), null === this.cursor && (this.cursor = t), t) }, i.Group.prototype.addAt = function(t, e, i) { this.add(t, i, e) }, i.Group.prototype.addToHash = function(t) { return t.parent === this && -1 === this.hash.indexOf(t) && (this.hash.push(t), !0) }, i.Group.prototype.removeFromHash = function(t) { if (t) { var e = this.hash.indexOf(t); if (-1 !== e) return this.hash.splice(e, 1), !0 } return !1 }, i.Group.prototype.addMultiple = function(t, e) { if (t instanceof i.Group) t.moveAll(this, e);
            else if (Array.isArray(t))
                for (var n = 0; n < t.length; n++) this.add(t[n], e); return t }, i.Group.prototype.getAt = function(t) { return t < 0 || t >= this.children.length ? -1 : this.getChildAt(t) }, i.Group.prototype.create = function(t, e, i, n, s, o) { void 0 === s && (s = !0); var a = new this.classType(this.game, t, e, i, n); return a.exists = s, a.visible = s, a.alive = s, this.add(a, !1, o) }, i.Group.prototype.createMultiple = function(t, e, i, n) { void 0 === i && (i = 0), void 0 === n && (n = !1), Array.isArray(e) || (e = [e]), Array.isArray(i) || (i = [i]); var s = this,
                o = []; return e.forEach(function(e) { i.forEach(function(i) { for (var a = 0; a < t; a++) o.push(s.create(0, 0, e, i, n)) }) }), o }, i.Group.prototype.updateZ = function() { for (var t = this.children.length; t--;) this.children[t].z = t }, i.Group.prototype.align = function(t, e, n, s, o, a) { if (void 0 === o && (o = i.TOP_LEFT), void 0 === a && (a = 0), 0 === this.children.length || a > this.children.length || -1 === t && -1 === e) return !1; for (var r = new i.Rectangle(0, 0, n, s), h = t * n, l = e * s, c = a; c < this.children.length; c++) { var u = this.children[c]; if (u.alignIn)
                    if (u.alignIn(r, o), -1 === t) r.y += s, r.y === l && (r.x += n, r.y = 0);
                    else if (-1 === e) r.x += n, r.x === h && (r.x = 0, r.y += s);
                else if (r.x += n, r.x === h && (r.x = 0, r.y += s, r.y === l)) return !0 } return !0 }, i.Group.prototype.resetCursor = function(t) { if (void 0 === t && (t = 0), t > this.children.length - 1 && (t = 0), this.cursor) return this.cursorIndex = t, this.cursor = this.children[this.cursorIndex], this.cursor }, i.Group.prototype.next = function() { if (this.cursor) return this.cursorIndex >= this.children.length - 1 ? this.cursorIndex = 0 : this.cursorIndex++, this.cursor = this.children[this.cursorIndex], this.cursor }, i.Group.prototype.previous = function() { if (this.cursor) return 0 === this.cursorIndex ? this.cursorIndex = this.children.length - 1 : this.cursorIndex--, this.cursor = this.children[this.cursorIndex], this.cursor }, i.Group.prototype.swap = function(t, e) { this.swapChildren(t, e), this.updateZ() }, i.Group.prototype.bringToTop = function(t) { return t.parent === this && this.getIndex(t) < this.children.length && (this.remove(t, !1, !0), this.add(t, !0)), t }, i.Group.prototype.sendToBack = function(t) { return t.parent === this && this.getIndex(t) > 0 && (this.remove(t, !1, !0), this.addAt(t, 0, !0)), t }, i.Group.prototype.moveUp = function(t) { if (t.parent === this && this.getIndex(t) < this.children.length - 1) { var e = this.getIndex(t),
                    i = this.getAt(e + 1);
                i && this.swap(t, i) } return t }, i.Group.prototype.moveDown = function(t) { if (t.parent === this && this.getIndex(t) > 0) { var e = this.getIndex(t),
                    i = this.getAt(e - 1);
                i && this.swap(t, i) } return t }, i.Group.prototype.xy = function(t, e, i) { if (t < 0 || t > this.children.length) return -1;
            this.getChildAt(t).x = e, this.getChildAt(t).y = i }, i.Group.prototype.reverse = function() { this.children.reverse(), this.updateZ() }, i.Group.prototype.getIndex = function(t) { return this.children.indexOf(t) }, i.Group.prototype.getByName = function(t) { for (var e = 0; e < this.children.length; e++)
                if (this.children[e].name === t) return this.children[e]; return null }, i.Group.prototype.replace = function(t, e) { var n = this.getIndex(t); if (-1 !== n) return e.parent && (e.parent instanceof i.Group ? e.parent.remove(e) : e.parent.removeChild(e)), this.remove(t), this.addAt(e, n), t }, i.Group.prototype.hasProperty = function(t, e) { var i = e.length; return 1 === i && e[0] in t || (2 === i && e[0] in t && e[1] in t[e[0]] || (3 === i && e[0] in t && e[1] in t[e[0]] && e[2] in t[e[0]][e[1]] || 4 === i && e[0] in t && e[1] in t[e[0]] && e[2] in t[e[0]][e[1]] && e[3] in t[e[0]][e[1]][e[2]])) }, i.Group.prototype.setProperty = function(t, e, i, n, s) { if (void 0 === s && (s = !1), n = n || 0, !this.hasProperty(t, e) && (!s || n > 0)) return !1; var o = e.length; return 1 === o ? 0 === n ? t[e[0]] = i : 1 === n ? t[e[0]] += i : 2 === n ? t[e[0]] -= i : 3 === n ? t[e[0]] *= i : 4 === n && (t[e[0]] /= i) : 2 === o ? 0 === n ? t[e[0]][e[1]] = i : 1 === n ? t[e[0]][e[1]] += i : 2 === n ? t[e[0]][e[1]] -= i : 3 === n ? t[e[0]][e[1]] *= i : 4 === n && (t[e[0]][e[1]] /= i) : 3 === o ? 0 === n ? t[e[0]][e[1]][e[2]] = i : 1 === n ? t[e[0]][e[1]][e[2]] += i : 2 === n ? t[e[0]][e[1]][e[2]] -= i : 3 === n ? t[e[0]][e[1]][e[2]] *= i : 4 === n && (t[e[0]][e[1]][e[2]] /= i) : 4 === o && (0 === n ? t[e[0]][e[1]][e[2]][e[3]] = i : 1 === n ? t[e[0]][e[1]][e[2]][e[3]] += i : 2 === n ? t[e[0]][e[1]][e[2]][e[3]] -= i : 3 === n ? t[e[0]][e[1]][e[2]][e[3]] *= i : 4 === n && (t[e[0]][e[1]][e[2]][e[3]] /= i)), !0 }, i.Group.prototype.checkProperty = function(t, e, n, s) { return void 0 === s && (s = !1), !(!i.Utils.getProperty(t, e) && s) && i.Utils.getProperty(t, e) === n }, i.Group.prototype.set = function(t, e, i, n, s, o, a) { if (void 0 === a && (a = !1), e = e.split("."), void 0 === n && (n = !1), void 0 === s && (s = !1), (!1 === n || n && t.alive) && (!1 === s || s && t.visible)) return this.setProperty(t, e, i, o, a) }, i.Group.prototype.setAll = function(t, e, i, n, s, o) { void 0 === i && (i = !1), void 0 === n && (n = !1), void 0 === o && (o = !1), t = t.split("."), s = s || 0; for (var a = 0; a < this.children.length; a++)(!i || i && this.children[a].alive) && (!n || n && this.children[a].visible) && this.setProperty(this.children[a], t, e, s, o) }, i.Group.prototype.setAllChildren = function(t, e, n, s, o, a) { void 0 === n && (n = !1), void 0 === s && (s = !1), void 0 === a && (a = !1), o = o || 0; for (var r = 0; r < this.children.length; r++)(!n || n && this.children[r].alive) && (!s || s && this.children[r].visible) && (this.children[r] instanceof i.Group ? this.children[r].setAllChildren(t, e, n, s, o, a) : this.setProperty(this.children[r], t.split("."), e, o, a)) }, i.Group.prototype.checkAll = function(t, e, i, n, s) { void 0 === i && (i = !1), void 0 === n && (n = !1), void 0 === s && (s = !1); for (var o = 0; o < this.children.length; o++)
                if ((!i || i && this.children[o].alive) && (!n || n && this.children[o].visible) && !this.checkProperty(this.children[o], t, e, s)) return !1; return !0 }, i.Group.prototype.addAll = function(t, e, i, n) { this.setAll(t, e, i, n, 1) }, i.Group.prototype.subAll = function(t, e, i, n) { this.setAll(t, e, i, n, 2) }, i.Group.prototype.multiplyAll = function(t, e, i, n) { this.setAll(t, e, i, n, 3) }, i.Group.prototype.divideAll = function(t, e, i, n) { this.setAll(t, e, i, n, 4) }, i.Group.prototype.callAllExists = function(t, e) { var i; if (arguments.length > 2) { i = []; for (n = 2; n < arguments.length; n++) i.push(arguments[n]) } for (var n = 0; n < this.children.length; n++) this.children[n].exists === e && this.children[n][t] && this.children[n][t].apply(this.children[n], i) }, i.Group.prototype.callbackFromArray = function(t, e, i) { if (1 === i) { if (t[e[0]]) return t[e[0]] } else if (2 === i) { if (t[e[0]][e[1]]) return t[e[0]][e[1]] } else if (3 === i) { if (t[e[0]][e[1]][e[2]]) return t[e[0]][e[1]][e[2]] } else if (4 === i) { if (t[e[0]][e[1]][e[2]][e[3]]) return t[e[0]][e[1]][e[2]][e[3]] } else if (t[e]) return t[e]; return !1 }, i.Group.prototype.callAll = function(t, e) { if (void 0 !== t) { var i = (t = t.split(".")).length; if (void 0 === e || null === e || "" === e) e = null;
                else if ("string" == typeof e) var n = (e = e.split(".")).length; var s; if (arguments.length > 2) { s = []; for (r = 2; r < arguments.length; r++) s.push(arguments[r]) } for (var o = null, a = null, r = 0; r < this.children.length; r++) o = this.callbackFromArray(this.children[r], t, i), e && o ? (a = this.callbackFromArray(this.children[r], e, n), o && o.apply(a, s)) : o && o.apply(this.children[r], s) } }, i.Group.prototype.preUpdate = function() { if (this.pendingDestroy) return this.destroy(), !1; if (!this.exists || !this.parent.exists) return this.renderOrderID = -1, !1; for (var t = 0; t < this.children.length; t++) this.children[t].preUpdate(); return !0 }, i.Group.prototype.update = function() { for (var t = this.children.length; t--;) this.children[t].update() }, i.Group.prototype.postUpdate = function() { this.fixedToCamera && (this.x = this.game.camera.view.x + this.cameraOffset.x, this.y = this.game.camera.view.y + this.cameraOffset.y); for (var t = 0; t < this.children.length; t++) this.children[t].postUpdate() }, i.Group.prototype.filter = function(t, e) { for (var n = -1, s = this.children.length, o = []; ++n < s;) { var a = this.children[n];
                (!e || e && a.exists) && t(a, n, this.children) && o.push(a) } return new i.ArraySet(o) }, i.Group.prototype.forEach = function(t, e, i) { if (void 0 === i && (i = !1), arguments.length <= 3)
                for (s = 0; s < this.children.length; s++)(!i || i && this.children[s].exists) && t.call(e, this.children[s]);
            else { for (var n = [null], s = 3; s < arguments.length; s++) n.push(arguments[s]); for (s = 0; s < this.children.length; s++)(!i || i && this.children[s].exists) && (n[0] = this.children[s], t.apply(e, n)) } }, i.Group.prototype.forEachExists = function(t, e) { var n; if (arguments.length > 2) { n = [null]; for (var s = 2; s < arguments.length; s++) n.push(arguments[s]) } this.iterate("exists", !0, i.Group.RETURN_TOTAL, t, e, n) }, i.Group.prototype.forEachAlive = function(t, e) { var n; if (arguments.length > 2) { n = [null]; for (var s = 2; s < arguments.length; s++) n.push(arguments[s]) } this.iterate("alive", !0, i.Group.RETURN_TOTAL, t, e, n) }, i.Group.prototype.forEachDead = function(t, e) { var n; if (arguments.length > 2) { n = [null]; for (var s = 2; s < arguments.length; s++) n.push(arguments[s]) } this.iterate("alive", !1, i.Group.RETURN_TOTAL, t, e, n) }, i.Group.prototype.sort = function(t, e) { this.children.length < 2 || (void 0 === t && (t = "z"), void 0 === e && (e = i.Group.SORT_ASCENDING), this._sortProperty = t, e === i.Group.SORT_ASCENDING ? this.children.sort(this.ascendingSortHandler.bind(this)) : this.children.sort(this.descendingSortHandler.bind(this)), this.updateZ()) }, i.Group.prototype.customSort = function(t, e) { this.children.length < 2 || (this.children.sort(t.bind(e)), this.updateZ()) }, i.Group.prototype.ascendingSortHandler = function(t, e) { return t[this._sortProperty] < e[this._sortProperty] ? -1 : t[this._sortProperty] > e[this._sortProperty] ? 1 : t.z < e.z ? -1 : 1 }, i.Group.prototype.descendingSortHandler = function(t, e) { return t[this._sortProperty] < e[this._sortProperty] ? 1 : t[this._sortProperty] > e[this._sortProperty] ? -1 : 0 }, i.Group.prototype.iterate = function(t, e, n, s, o, a) { if (0 === this.children.length) { if (n === i.Group.RETURN_TOTAL) return 0; if (n === i.Group.RETURN_ALL) return [] } var r = 0; if (n === i.Group.RETURN_ALL) var h = []; for (var l = 0; l < this.children.length; l++)
                if (this.children[l][t] === e) { if (r++, s && (a ? (a[0] = this.children[l], s.apply(o, a)) : s.call(o, this.children[l])), n === i.Group.RETURN_CHILD) return this.children[l];
                    n === i.Group.RETURN_ALL && h.push(this.children[l]) } return n === i.Group.RETURN_TOTAL ? r : n === i.Group.RETURN_ALL ? h : null }, i.Group.prototype.getFirstExists = function(t, e, n, s, o, a) { void 0 === e && (e = !1), "boolean" != typeof t && (t = !0); var r = this.iterate("exists", t, i.Group.RETURN_CHILD); return null === r && e ? this.create(n, s, o, a) : this.resetChild(r, n, s, o, a) }, i.Group.prototype.getFirstAlive = function(t, e, n, s, o) { void 0 === t && (t = !1); var a = this.iterate("alive", !0, i.Group.RETURN_CHILD); return null === a && t ? this.create(e, n, s, o) : this.resetChild(a, e, n, s, o) }, i.Group.prototype.getFirstDead = function(t, e, n, s, o) { void 0 === t && (t = !1); var a = this.iterate("alive", !1, i.Group.RETURN_CHILD); return null === a && t ? this.create(e, n, s, o) : this.resetChild(a, e, n, s, o) }, i.Group.prototype.resetChild = function(t, e, i, n, s) { return null === t ? null : (void 0 === e && (e = null), void 0 === i && (i = null), null !== e && null !== i && t.reset(e, i), void 0 !== n && t.loadTexture(n, s), t) }, i.Group.prototype.getTop = function() { if (this.children.length > 0) return this.children[this.children.length - 1] }, i.Group.prototype.getBottom = function() { if (this.children.length > 0) return this.children[0] }, i.Group.prototype.getClosestTo = function(t, e, n) { for (var s = Number.MAX_VALUE, o = 0, a = null, r = 0; r < this.children.length; r++) { var h = this.children[r];
                h.exists && (o = Math.abs(i.Point.distance(t, h))) < s && (!e || e.call(n, h, o)) && (s = o, a = h) } return a }, i.Group.prototype.getFurthestFrom = function(t, e, n) { for (var s = 0, o = 0, a = null, r = 0; r < this.children.length; r++) { var h = this.children[r];
                h.exists && (o = Math.abs(i.Point.distance(t, h))) > s && (!e || e.call(n, h, o)) && (s = o, a = h) } return a }, i.Group.prototype.countLiving = function() { return this.iterate("alive", !0, i.Group.RETURN_TOTAL) }, i.Group.prototype.countDead = function() { return this.iterate("alive", !1, i.Group.RETURN_TOTAL) }, i.Group.prototype.getRandom = function(t, e) { return void 0 === t && (t = 0), void 0 === e && (e = this.children.length), 0 === e ? null : i.ArrayUtils.getRandomItem(this.children, t, e) }, i.Group.prototype.getRandomExists = function(t, e) { var i = this.getAll("exists", !0, t, e); return this.game.rnd.pick(i) }, i.Group.prototype.getAll = function(t, e, i, n) { void 0 === i && (i = 0), void 0 === n && (n = this.children.length); for (var s = [], o = i; o < n; o++) { var a = this.children[o];
                t && a[t] === e && s.push(a) } return s }, i.Group.prototype.remove = function(t, e, i) { if (void 0 === e && (e = !1), void 0 === i && (i = !1), 0 === this.children.length || -1 === this.children.indexOf(t)) return !1;
            i || !t.events || t.destroyPhase || t.events.onRemovedFromGroup$dispatch(t, this); var n = this.removeChild(t); return this.removeFromHash(t), this.updateZ(), this.cursor === t && this.next(), e && n && n.destroy(!0), !0 }, i.Group.prototype.moveAll = function(t, e) { if (void 0 === e && (e = !1), this.children.length > 0 && t instanceof i.Group) { do { t.add(this.children[0], e) } while (this.children.length > 0);
                this.hash = [], this.cursor = null } return t }, i.Group.prototype.removeAll = function(t, e, i) { if (void 0 === t && (t = !1), void 0 === e && (e = !1), void 0 === i && (i = !1), 0 !== this.children.length) { do {!e && this.children[0].events && this.children[0].events.onRemovedFromGroup$dispatch(this.children[0], this); var n = this.removeChild(this.children[0]);
                    this.removeFromHash(n), t && n && n.destroy(!0, i) } while (this.children.length > 0);
                this.hash = [], this.cursor = null } }, i.Group.prototype.removeBetween = function(t, e, i, n) { if (void 0 === e && (e = this.children.length - 1), void 0 === i && (i = !1), void 0 === n && (n = !1), 0 !== this.children.length) { if (t > e || t < 0 || e > this.children.length) return !1; for (var s = e; s >= t;) {!n && this.children[s].events && this.children[s].events.onRemovedFromGroup$dispatch(this.children[s], this); var o = this.removeChild(this.children[s]);
                    this.removeFromHash(o), i && o && o.destroy(!0), this.cursor === this.children[s] && (this.cursor = null), s-- } this.updateZ() } }, i.Group.prototype.destroy = function(t, e) { null === this.game || this.ignoreDestroy || (void 0 === t && (t = !0), void 0 === e && (e = !1), this.onDestroy.dispatch(this, t, e), this.removeAll(t), this.cursor = null, this.filters = null, this.pendingDestroy = !1, e || (this.parent && this.parent.removeChild(this), this.game = null, this.exists = !1)) }, Object.defineProperty(i.Group.prototype, "total", { get: function() { return this.iterate("exists", !0, i.Group.RETURN_TOTAL) } }), Object.defineProperty(i.Group.prototype, "length", { get: function() { return this.children.length } }), Object.defineProperty(i.Group.prototype, "angle", { get: function() { return i.Math.radToDeg(this.rotation) }, set: function(t) { this.rotation = i.Math.degToRad(t) } }), Object.defineProperty(i.Group.prototype, "centerX", { get: function() { return this.getBounds(this.parent).centerX }, set: function(t) { var e = this.getBounds(this.parent),
                    i = this.x - e.x;
                this.x = t + i - e.halfWidth } }), Object.defineProperty(i.Group.prototype, "centerY", { get: function() { return this.getBounds(this.parent).centerY }, set: function(t) { var e = this.getBounds(this.parent),
                    i = this.y - e.y;
                this.y = t + i - e.halfHeight } }), Object.defineProperty(i.Group.prototype, "left", { get: function() { return this.getBounds(this.parent).left }, set: function(t) { var e = this.getBounds(this.parent),
                    i = this.x - e.x;
                this.x = t + i } }), Object.defineProperty(i.Group.prototype, "right", { get: function() { return this.getBounds(this.parent).right }, set: function(t) { var e = this.getBounds(this.parent),
                    i = this.x - e.x;
                this.x = t + i - e.width } }), Object.defineProperty(i.Group.prototype, "top", { get: function() { return this.getBounds(this.parent).top }, set: function(t) { var e = this.getBounds(this.parent),
                    i = this.y - e.y;
                this.y = t + i } }), Object.defineProperty(i.Group.prototype, "bottom", { get: function() { return this.getBounds(this.parent).bottom }, set: function(t) { var e = this.getBounds(this.parent),
                    i = this.y - e.y;
                this.y = t + i - e.height } }), i.World = function(t) { i.Group.call(this, t, null, "__world", !1), this.bounds = new i.Rectangle(0, 0, t.width, t.height), this.camera = null, this._definedSize = !1, this._width = t.width, this._height = t.height, this.game.state.onStateChange.add(this.stateChange, this) }, i.World.prototype = Object.create(i.Group.prototype), i.World.prototype.constructor = i.World, i.World.prototype.boot = function() { this.camera = new i.Camera(this.game, 0, 0, 0, this.game.width, this.game.height), this.game.stage.addChild(this), this.camera.boot() }, i.World.prototype.stateChange = function() { this.x = 0, this.y = 0, this.camera.reset() }, i.World.prototype.setBounds = function(t, e, i, n) { this._definedSize = !0, this._width = i, this._height = n, this.bounds.setTo(t, e, i, n), this.x = t, this.y = e, this.camera.bounds && this.camera.bounds.setTo(t, e, Math.max(i, this.game.width), Math.max(n, this.game.height)), this.game.physics.setBoundsToWorld() }, i.World.prototype.resize = function(t, e) { this._definedSize && (t < this._width && (t = this._width), e < this._height && (e = this._height)), this.bounds.width = t, this.bounds.height = e, this.game.camera.setBoundsToWorld(), this.game.physics.setBoundsToWorld() }, i.World.prototype.shutdown = function() { this.destroy(!0, !0) }, i.World.prototype.wrap = function(t, e, i, n, s) { void 0 === e && (e = 0), void 0 === i && (i = !1), void 0 === n && (n = !0), void 0 === s && (s = !0), i ? (t.getBounds(), n && (t.x + t._currentBounds.width < this.bounds.x ? t.x = this.bounds.right : t.x > this.bounds.right && (t.x = this.bounds.left)), s && (t.y + t._currentBounds.height < this.bounds.top ? t.y = this.bounds.bottom : t.y > this.bounds.bottom && (t.y = this.bounds.top))) : (n && t.x + e < this.bounds.x ? t.x = this.bounds.right + e : n && t.x - e > this.bounds.right && (t.x = this.bounds.left - e), s && t.y + e < this.bounds.top ? t.y = this.bounds.bottom + e : s && t.y - e > this.bounds.bottom && (t.y = this.bounds.top - e)) }, Object.defineProperty(i.World.prototype, "width", { get: function() { return this.bounds.width }, set: function(t) { t < this.game.width && (t = this.game.width), this.bounds.width = t, this._width = t, this._definedSize = !0 } }), Object.defineProperty(i.World.prototype, "height", { get: function() { return this.bounds.height }, set: function(t) { t < this.game.height && (t = this.game.height), this.bounds.height = t, this._height = t, this._definedSize = !0 } }), Object.defineProperty(i.World.prototype, "centerX", { get: function() { return this.bounds.halfWidth + this.bounds.x } }), Object.defineProperty(i.World.prototype, "centerY", { get: function() { return this.bounds.halfHeight + this.bounds.y } }), Object.defineProperty(i.World.prototype, "randomX", { get: function() { return this.bounds.x < 0 ? this.game.rnd.between(this.bounds.x, this.bounds.width - Math.abs(this.bounds.x)) : this.game.rnd.between(this.bounds.x, this.bounds.width) } }), Object.defineProperty(i.World.prototype, "randomY", { get: function() { return this.bounds.y < 0 ? this.game.rnd.between(this.bounds.y, this.bounds.height - Math.abs(this.bounds.y)) : this.game.rnd.between(this.bounds.y, this.bounds.height) } }), i.Game = function(t, e, n, s, o, a, r, h) { return this.id = i.GAMES.push(this) - 1, this.config = null, this.physicsConfig = h, this.parent = "", this.width = 800, this.height = 600, this.resolution = 1, this._width = 800, this._height = 600, this.transparent = !1, this.antialias = !0, this.preserveDrawingBuffer = !1, this.clearBeforeRender = !0, this.renderer = null, this.renderType = i.AUTO, this.state = null, this.isBooted = !1, this.isRunning = !1, this.raf = null, this.add = null, this.make = null, this.cache = null, this.input = null, this.load = null, this.math = null, this.net = null, this.scale = null, this.sound = null, this.stage = null, this.time = null, this.tweens = null, this.world = null, this.physics = null, this.plugins = null, this.rnd = null, this.device = i.Device, this.camera = null, this.canvas = null, this.context = null, this.debug = null, this.particles = null, this.create = null, this.lockRender = !1, this.stepping = !1, this.pendingStep = !1, this.stepCount = 0, this.onPause = null, this.onResume = null, this.onBlur = null, this.onFocus = null, this._paused = !1, this._codePaused = !1, this.currentUpdateID = 0, this.updatesThisFrame = 1, this._deltaTime = 0, this._lastCount = 0, this._spiraling = 0, this._kickstart = !0, this.fpsProblemNotifier = new i.Signal, this.forceSingleUpdate = !0, this._nextFpsNotification = 0, 1 === arguments.length && "object" == typeof arguments[0] ? this.parseConfig(arguments[0]) : (this.config = { enableDebug: !0 }, void 0 !== t && (this._width = t), void 0 !== e && (this._height = e), void 0 !== n && (this.renderType = n), void 0 !== s && (this.parent = s), void 0 !== a && (this.transparent = a), void 0 !== r && (this.antialias = r), this.rnd = new i.RandomDataGenerator([(Date.now() * Math.random()).toString()]), this.state = new i.StateManager(this, o)), this.device.whenReady(this.boot, this), this }, i.Game.prototype = { parseConfig: function(t) { this.config = t, void 0 === t.enableDebug && (this.config.enableDebug = !0), t.width && (this._width = t.width), t.height && (this._height = t.height), t.renderer && (this.renderType = t.renderer), t.parent && (this.parent = t.parent), void 0 !== t.transparent && (this.transparent = t.transparent), void 0 !== t.antialias && (this.antialias = t.antialias), t.resolution && (this.resolution = t.resolution), void 0 !== t.preserveDrawingBuffer && (this.preserveDrawingBuffer = t.preserveDrawingBuffer), t.physicsConfig && (this.physicsConfig = t.physicsConfig); var e = [(Date.now() * Math.random()).toString()];
                t.seed && (e = t.seed), this.rnd = new i.RandomDataGenerator(e); var n = null;
                t.state && (n = t.state), this.state = new i.StateManager(this, n) }, boot: function() { this.isBooted || (this.onPause = new i.Signal, this.onResume = new i.Signal, this.onBlur = new i.Signal, this.onFocus = new i.Signal, this.isBooted = !0, PIXI.game = this, this.math = i.Math, this.scale = new i.ScaleManager(this, this._width, this._height), this.stage = new i.Stage(this), this.setUpRenderer(), this.world = new i.World(this), this.add = new i.GameObjectFactory(this), this.make = new i.GameObjectCreator(this), this.cache = new i.Cache(this), this.load = new i.Loader(this), this.time = new i.Time(this), this.tweens = new i.TweenManager(this), this.input = new i.Input(this), this.sound = new i.SoundManager(this), this.physics = new i.Physics(this, this.physicsConfig), this.particles = new i.Particles(this), this.create = new i.Create(this), this.plugins = new i.PluginManager(this), this.net = new i.Net(this), this.time.boot(), this.stage.boot(), this.world.boot(), this.scale.boot(), this.input.boot(), this.sound.boot(), this.state.boot(), this.config.enableDebug ? (this.debug = new i.Utils.Debug(this), this.debug.boot()) : this.debug = { preUpdate: function() {}, update: function() {}, reset: function() {} }, this.showDebugHeader(), this.isRunning = !0, this.config && this.config.forceSetTimeOut ? this.raf = new i.RequestAnimationFrame(this, this.config.forceSetTimeOut) : this.raf = new i.RequestAnimationFrame(this, !1), this._kickstart = !0, window.focus && (!window.PhaserGlobal || window.PhaserGlobal && !window.PhaserGlobal.stopFocus) && window.focus(), this.raf.start()) }, showDebugHeader: function() { if (!window.PhaserGlobal || !window.PhaserGlobal.hideBanner) { var t = i.VERSION,
                        e = "Canvas",
                        n = "HTML Audio",
                        s = 1; if (this.renderType === i.WEBGL ? (e = "WebGL", s++) : this.renderType === i.HEADLESS && (e = "Headless"), this.device.webAudio && (n = "WebAudio", s++), this.device.chrome) { for (var o = ["%c %c %c Phaser v" + t + " | Pixi.js | " + e + " | " + n + "  %c %c %c http://phaser.io %c♥%c♥%c♥", "background: #fb8cb3", "background: #d44a52", "color: #ffffff; background: #871905;", "background: #d44a52", "background: #fb8cb3", "background: #ffffff"], a = 0; a < 3; a++) a < s ? o.push("color: #ff2424; background: #fff") : o.push("color: #959595; background: #fff");
                        console.log.apply(console, o) } else window.console && console.log("Phaser v" + t + " | Pixi.js " + PIXI.VERSION + " | " + e + " | " + n + " | http://phaser.io") } }, setUpRenderer: function() { if (this.config.canvas ? this.canvas = this.config.canvas : this.canvas = i.Canvas.create(this, this.width, this.height, this.config.canvasID, !0), this.config.canvasStyle ? this.canvas.style = this.config.canvasStyle : this.canvas.style["-webkit-full-screen"] = "width: 100%; height: 100%", this.renderType === i.HEADLESS || this.renderType === i.CANVAS || this.renderType === i.AUTO && !this.device.webGL) { if (!this.device.canvas) throw new Error("Phaser.Game - Cannot create Canvas or WebGL context, aborting.");
                    this.renderType = i.CANVAS, this.renderer = new PIXI.CanvasRenderer(this), this.context = this.renderer.context } else this.renderType = i.WEBGL, this.renderer = new PIXI.WebGLRenderer(this), this.context = null, this.canvas.addEventListener("webglcontextlost", this.contextLost.bind(this), !1), this.canvas.addEventListener("webglcontextrestored", this.contextRestored.bind(this), !1);
                this.device.cocoonJS && (this.canvas.screencanvas = this.renderType === i.CANVAS), this.renderType !== i.HEADLESS && (this.stage.smoothed = this.antialias, i.Canvas.addToDOM(this.canvas, this.parent, !1), i.Canvas.setTouchAction(this.canvas)) }, contextLost: function(t) { t.preventDefault(), this.renderer.contextLost = !0 }, contextRestored: function() { this.renderer.initContext(), this.cache.clearGLTextures(), this.renderer.contextLost = !1 }, update: function(t) { if (this.time.update(t), this._kickstart) return this.updateLogic(this.time.desiredFpsMult), this.updateRender(this.time.slowMotion * this.time.desiredFps), void(this._kickstart = !1); if (this._spiraling > 1 && !this.forceSingleUpdate) this.time.time > this._nextFpsNotification && (this._nextFpsNotification = this.time.time + 1e4, this.fpsProblemNotifier.dispatch()), this._deltaTime = 0, this._spiraling = 0, this.updateRender(this.time.slowMotion * this.time.desiredFps);
                else { var e = 1e3 * this.time.slowMotion / this.time.desiredFps;
                    this._deltaTime += Math.max(Math.min(3 * e, this.time.elapsed), 0); var i = 0; for (this.updatesThisFrame = Math.floor(this._deltaTime / e), this.forceSingleUpdate && (this.updatesThisFrame = Math.min(1, this.updatesThisFrame)); this._deltaTime >= e && (this._deltaTime -= e, this.currentUpdateID = i, this.updateLogic(this.time.desiredFpsMult), i++, !this.forceSingleUpdate || 1 !== i);) this.time.refresh();
                    i > this._lastCount ? this._spiraling++ : i < this._lastCount && (this._spiraling = 0), this._lastCount = i, this.updateRender(this._deltaTime / e) } }, updateLogic: function(t) { this._paused || this.pendingStep ? (this.scale.pauseUpdate(), this.state.pauseUpdate(), this.debug.preUpdate()) : (this.stepping && (this.pendingStep = !0), this.scale.preUpdate(), this.debug.preUpdate(), this.camera.preUpdate(), this.physics.preUpdate(), this.state.preUpdate(t), this.plugins.preUpdate(t), this.stage.preUpdate(), this.state.update(), this.stage.update(), this.tweens.update(), this.sound.update(), this.input.update(), this.physics.update(), this.particles.update(), this.plugins.update(), this.stage.postUpdate(), this.plugins.postUpdate()), this.stage.updateTransform() }, updateRender: function(t) { this.lockRender || (this.state.preRender(t), this.renderType !== i.HEADLESS && (this.renderer.render(this.stage), this.plugins.render(t), this.state.render(t)), this.plugins.postRender(t)) }, enableStep: function() { this.stepping = !0, this.pendingStep = !1, this.stepCount = 0 }, disableStep: function() { this.stepping = !1, this.pendingStep = !1 }, step: function() { this.pendingStep = !1, this.stepCount++ }, destroy: function() { this.raf.stop(), this.state.destroy(), this.sound.destroy(), this.scale.destroy(), this.stage.destroy(), this.input.destroy(), this.physics.destroy(), this.plugins.destroy(), this.state = null, this.sound = null, this.scale = null, this.stage = null, this.input = null, this.physics = null, this.plugins = null, this.cache = null, this.load = null, this.time = null, this.world = null, this.isBooted = !1, this.renderer.destroy(!1), i.Canvas.removeFromDOM(this.canvas), PIXI.defaultRenderer = null, i.GAMES[this.id] = null }, gamePaused: function(t) { this._paused || (this._paused = !0, this.time.gamePaused(), this.sound.muteOnPause && this.sound.setMute(), this.onPause.dispatch(t), this.device.cordova && this.device.iOS && (this.lockRender = !0)) }, gameResumed: function(t) { this._paused && !this._codePaused && (this._paused = !1, this.time.gameResumed(), this.input.reset(), this.sound.muteOnPause && this.sound.unsetMute(), this.onResume.dispatch(t), this.device.cordova && this.device.iOS && (this.lockRender = !1)) }, focusLoss: function(t) { this.onBlur.dispatch(t), this.stage.disableVisibilityChange || this.gamePaused(t) }, focusGain: function(t) { this.onFocus.dispatch(t), this.stage.disableVisibilityChange || this.gameResumed(t) } }, i.Game.prototype.constructor = i.Game, Object.defineProperty(i.Game.prototype, "paused", { get: function() { return this._paused }, set: function(t) {!0 === t ? (!1 === this._paused && (this._paused = !0, this.sound.setMute(), this.time.gamePaused(), this.onPause.dispatch(this)), this._codePaused = !0) : (this._paused && (this._paused = !1, this.input.reset(), this.sound.unsetMute(), this.time.gameResumed(), this.onResume.dispatch(this)), this._codePaused = !1) } }), i.Input = function(t) { this.game = t, this.hitCanvas = null, this.hitContext = null, this.moveCallbacks = [], this.customCandidateHandler = null, this.customCandidateHandlerContext = null, this.pollRate = 0, this.enabled = !0, this.multiInputOverride = i.Input.MOUSE_TOUCH_COMBINE, this.position = null, this.speed = null, this.circle = null, this.scale = null, this.maxPointers = -1, this.tapRate = 200, this.doubleTapRate = 300, this.holdRate = 2e3, this.justPressedRate = 200, this.justReleasedRate = 200, this.recordPointerHistory = !1, this.recordRate = 100, this.recordLimit = 100, this.pointer1 = null, this.pointer2 = null, this.pointer3 = null, this.pointer4 = null, this.pointer5 = null, this.pointer6 = null, this.pointer7 = null, this.pointer8 = null, this.pointer9 = null, this.pointer10 = null, this.pointers = [], this.activePointer = null, this.mousePointer = null, this.mouse = null, this.keyboard = null, this.touch = null, this.mspointer = null, this.gamepad = null, this.resetLocked = !1, this.onDown = null, this.onUp = null, this.onTap = null, this.onHold = null, this.minPriorityID = 0, this.interactiveItems = new i.ArraySet, this._localPoint = new i.Point, this._pollCounter = 0, this._oldPosition = null, this._x = 0, this._y = 0 }, i.Input.MOUSE_OVERRIDES_TOUCH = 0, i.Input.TOUCH_OVERRIDES_MOUSE = 1, i.Input.MOUSE_TOUCH_COMBINE = 2, i.Input.MAX_POINTERS = 10, i.Input.prototype = { boot: function() { this.mousePointer = new i.Pointer(this.game, 0, i.PointerMode.CURSOR), this.addPointer(), this.addPointer(), this.mouse = new i.Mouse(this.game), this.touch = new i.Touch(this.game), this.mspointer = new i.MSPointer(this.game), i.Keyboard && (this.keyboard = new i.Keyboard(this.game)), i.Gamepad && (this.gamepad = new i.Gamepad(this.game)), this.onDown = new i.Signal, this.onUp = new i.Signal, this.onTap = new i.Signal, this.onHold = new i.Signal, this.scale = new i.Point(1, 1), this.speed = new i.Point, this.position = new i.Point, this._oldPosition = new i.Point, this.circle = new i.Circle(0, 0, 44), this.activePointer = this.mousePointer, this.hitCanvas = PIXI.CanvasPool.create(this, 1, 1), this.hitContext = this.hitCanvas.getContext("2d"), this.mouse.start(), this.touch.start(), this.mspointer.start(), this.mousePointer.active = !0, this.keyboard && this.keyboard.start(); var t = this;
                this._onClickTrampoline = function(e) { t.onClickTrampoline(e) }, this.game.canvas.addEventListener("click", this._onClickTrampoline, !1) }, destroy: function() { this.mouse.stop(), this.touch.stop(), this.mspointer.stop(), this.keyboard && this.keyboard.stop(), this.gamepad && this.gamepad.stop(), this.moveCallbacks = [], PIXI.CanvasPool.remove(this), this.game.canvas.removeEventListener("click", this._onClickTrampoline) }, setInteractiveCandidateHandler: function(t, e) { this.customCandidateHandler = t, this.customCandidateHandlerContext = e }, addMoveCallback: function(t, e) { this.moveCallbacks.push({ callback: t, context: e }) }, deleteMoveCallback: function(t, e) { for (var i = this.moveCallbacks.length; i--;)
                    if (this.moveCallbacks[i].callback === t && this.moveCallbacks[i].context === e) return void this.moveCallbacks.splice(i, 1) }, addPointer: function() { if (this.pointers.length >= i.Input.MAX_POINTERS) return console.warn("Phaser.Input.addPointer: Maximum limit of " + i.Input.MAX_POINTERS + " pointers reached."), null; var t = this.pointers.length + 1,
                    e = new i.Pointer(this.game, t, i.PointerMode.TOUCH); return this.pointers.push(e), this["pointer" + t] = e, e }, update: function() { if (this.keyboard && this.keyboard.update(), this.pollRate > 0 && this._pollCounter < this.pollRate) this._pollCounter++;
                else { this.speed.x = this.position.x - this._oldPosition.x, this.speed.y = this.position.y - this._oldPosition.y, this._oldPosition.copyFrom(this.position), this.mousePointer.update(), this.gamepad && this.gamepad.active && this.gamepad.update(); for (var t = 0; t < this.pointers.length; t++) this.pointers[t].update();
                    this._pollCounter = 0 } }, reset: function(t) { if (this.game.isBooted && !this.resetLocked) { void 0 === t && (t = !1), this.mousePointer.reset(), this.keyboard && this.keyboard.reset(t), this.gamepad && this.gamepad.reset(); for (var e = 0; e < this.pointers.length; e++) this.pointers[e].reset(); "none" !== this.game.canvas.style.cursor && (this.game.canvas.style.cursor = "inherit"), t && (this.onDown.dispose(), this.onUp.dispose(), this.onTap.dispose(), this.onHold.dispose(), this.onDown = new i.Signal, this.onUp = new i.Signal, this.onTap = new i.Signal, this.onHold = new i.Signal, this.moveCallbacks = []), this._pollCounter = 0 } }, resetSpeed: function(t, e) { this._oldPosition.setTo(t, e), this.speed.setTo(0, 0) }, startPointer: function(t) { if (this.maxPointers >= 0 && this.countActivePointers(this.maxPointers) >= this.maxPointers) return null; if (!this.pointer1.active) return this.pointer1.start(t); if (!this.pointer2.active) return this.pointer2.start(t); for (var e = 2; e < this.pointers.length; e++) { var i = this.pointers[e]; if (!i.active) return i.start(t) } return null }, updatePointer: function(t) { if (this.pointer1.active && this.pointer1.identifier === t.identifier) return this.pointer1.move(t); if (this.pointer2.active && this.pointer2.identifier === t.identifier) return this.pointer2.move(t); for (var e = 2; e < this.pointers.length; e++) { var i = this.pointers[e]; if (i.active && i.identifier === t.identifier) return i.move(t) } return null }, stopPointer: function(t) { if (this.pointer1.active && this.pointer1.identifier === t.identifier) return this.pointer1.stop(t); if (this.pointer2.active && this.pointer2.identifier === t.identifier) return this.pointer2.stop(t); for (var e = 2; e < this.pointers.length; e++) { var i = this.pointers[e]; if (i.active && i.identifier === t.identifier) return i.stop(t) } return null }, countActivePointers: function(t) { void 0 === t && (t = this.pointers.length); for (var e = t, i = 0; i < this.pointers.length && e > 0; i++) this.pointers[i].active && e--; return t - e }, getPointer: function(t) { void 0 === t && (t = !1); for (var e = 0; e < this.pointers.length; e++) { var i = this.pointers[e]; if (i.active === t) return i } return null }, getPointerFromIdentifier: function(t) { for (var e = 0; e < this.pointers.length; e++) { var i = this.pointers[e]; if (i.identifier === t) return i } return null }, getPointerFromId: function(t) { for (var e = 0; e < this.pointers.length; e++) { var i = this.pointers[e]; if (i.pointerId === t) return i } return null }, getLocalPosition: function(t, e, n) { void 0 === n && (n = new i.Point); var s = t.worldTransform,
                    o = 1 / (s.a * s.d + s.c * -s.b); return n.setTo(s.d * o * e.x + -s.c * o * e.y + (s.ty * s.c - s.tx * s.d) * o, s.a * o * e.y + -s.b * o * e.x + (-s.ty * s.a + s.tx * s.b) * o) }, hitTest: function(t, e, n) { if (!t.worldVisible) return !1; if (this.getLocalPosition(t, e, this._localPoint), n.copyFrom(this._localPoint), t.hitArea && t.hitArea.contains) return t.hitArea.contains(this._localPoint.x, this._localPoint.y); if (t instanceof i.TileSprite) { var s = t.width,
                        o = t.height,
                        a = -s * t.anchor.x; if (this._localPoint.x >= a && this._localPoint.x < a + s) { r = -o * t.anchor.y; if (this._localPoint.y >= r && this._localPoint.y < r + o) return !0 } } else if (t instanceof PIXI.Sprite) { var s = t.texture.frame.width,
                        o = t.texture.frame.height,
                        a = -s * t.anchor.x; if (this._localPoint.x >= a && this._localPoint.x < a + s) { var r = -o * t.anchor.y; if (this._localPoint.y >= r && this._localPoint.y < r + o) return !0 } } else if (t instanceof i.Graphics)
                    for (l = 0; l < t.graphicsData.length; l++) { var h = t.graphicsData[l]; if (h.fill && (h.shape && h.shape.contains(this._localPoint.x, this._localPoint.y))) return !0 }
                for (var l = 0; l < t.children.length; l++)
                    if (this.hitTest(t.children[l], e, n)) return !0; return !1 }, onClickTrampoline: function() { this.activePointer.processClickTrampolines() } }, i.Input.prototype.constructor = i.Input, Object.defineProperty(i.Input.prototype, "x", { get: function() { return this._x }, set: function(t) { this._x = Math.floor(t) } }), Object.defineProperty(i.Input.prototype, "y", { get: function() { return this._y }, set: function(t) { this._y = Math.floor(t) } }), Object.defineProperty(i.Input.prototype, "pollLocked", { get: function() { return this.pollRate > 0 && this._pollCounter < this.pollRate } }), Object.defineProperty(i.Input.prototype, "totalInactivePointers", { get: function() { return this.pointers.length - this.countActivePointers() } }), Object.defineProperty(i.Input.prototype, "totalActivePointers", { get: function() { return this.countActivePointers() } }), Object.defineProperty(i.Input.prototype, "worldX", { get: function() { return this.game.camera.view.x + this.x } }), Object.defineProperty(i.Input.prototype, "worldY", { get: function() { return this.game.camera.view.y + this.y } }), i.Mouse = function(t) { this.game = t, this.input = t.input, this.callbackContext = this.game, this.mouseDownCallback = null, this.mouseUpCallback = null, this.mouseOutCallback = null, this.mouseOverCallback = null, this.mouseWheelCallback = null, this.capture = !1, this.button = -1, this.wheelDelta = 0, this.enabled = !0, this.locked = !1, this.stopOnGameOut = !1, this.pointerLock = new i.Signal, this.event = null, this._onMouseDown = null, this._onMouseMove = null, this._onMouseUp = null, this._onMouseOut = null, this._onMouseOver = null, this._onMouseWheel = null, this._wheelEvent = null }, i.Mouse.NO_BUTTON = -1, i.Mouse.LEFT_BUTTON = 0, i.Mouse.MIDDLE_BUTTON = 1, i.Mouse.RIGHT_BUTTON = 2, i.Mouse.BACK_BUTTON = 3, i.Mouse.FORWARD_BUTTON = 4, i.Mouse.WHEEL_UP = 1, i.Mouse.WHEEL_DOWN = -1, i.Mouse.prototype = { start: function() { if ((!this.game.device.android || !1 !== this.game.device.chrome) && null === this._onMouseDown) { var e = this;
                    this._onMouseDown = function(t) { return e.onMouseDown(t) }, this._onMouseMove = function(t) { return e.onMouseMove(t) }, this._onMouseUp = function(t) { return e.onMouseUp(t) }, this._onMouseUpGlobal = function(t) { return e.onMouseUpGlobal(t) }, this._onMouseOutGlobal = function(t) { return e.onMouseOutGlobal(t) }, this._onMouseOut = function(t) { return e.onMouseOut(t) }, this._onMouseOver = function(t) { return e.onMouseOver(t) }, this._onMouseWheel = function(t) { return e.onMouseWheel(t) }; var i = this.game.canvas;
                    i.addEventListener("mousedown", this._onMouseDown, !0), i.addEventListener("mousemove", this._onMouseMove, !0), i.addEventListener("mouseup", this._onMouseUp, !0), this.game.device.cocoonJS || (window.addEventListener("mouseup", this._onMouseUpGlobal, !0), window.addEventListener("mouseout", this._onMouseOutGlobal, !0), i.addEventListener("mouseover", this._onMouseOver, !0), i.addEventListener("mouseout", this._onMouseOut, !0)); var n = this.game.device.wheelEvent;
                    n && (i.addEventListener(n, this._onMouseWheel, !0), "mousewheel" === n ? this._wheelEvent = new t(-.025, 1) : "DOMMouseScroll" === n && (this._wheelEvent = new t(1, 1))) } }, onMouseDown: function(t) { this.event = t, this.capture && t.preventDefault(), this.mouseDownCallback && this.mouseDownCallback.call(this.callbackContext, t), this.input.enabled && this.enabled && (t.identifier = 0, this.input.mousePointer.start(t)) }, onMouseMove: function(t) { this.event = t, this.capture && t.preventDefault(), this.mouseMoveCallback && this.mouseMoveCallback.call(this.callbackContext, t), this.input.enabled && this.enabled && (t.identifier = 0, this.input.mousePointer.move(t)) }, onMouseUp: function(t) { this.event = t, this.capture && t.preventDefault(), this.mouseUpCallback && this.mouseUpCallback.call(this.callbackContext, t), this.input.enabled && this.enabled && (t.identifier = 0, this.input.mousePointer.stop(t)) }, onMouseUpGlobal: function(t) { this.input.mousePointer.withinGame || (this.mouseUpCallback && this.mouseUpCallback.call(this.callbackContext, t), t.identifier = 0, this.input.mousePointer.stop(t)) }, onMouseOutGlobal: function(t) { this.event = t, this.capture && t.preventDefault(), this.input.mousePointer.withinGame = !1, this.input.enabled && this.enabled && (this.input.mousePointer.stop(t), this.input.mousePointer.leftButton.stop(t), this.input.mousePointer.rightButton.stop(t)) }, onMouseOut: function(t) { this.event = t, this.capture && t.preventDefault(), this.input.mousePointer.withinGame = !1, this.mouseOutCallback && this.mouseOutCallback.call(this.callbackContext, t), this.input.enabled && this.enabled && this.stopOnGameOut && (t.identifier = 0, this.input.mousePointer.stop(t)) }, onMouseOver: function(t) { this.event = t, this.capture && t.preventDefault(), this.input.mousePointer.withinGame = !0, this.mouseOverCallback && this.mouseOverCallback.call(this.callbackContext, t) }, onMouseWheel: function(t) { this._wheelEvent && (t = this._wheelEvent.bindEvent(t)), this.event = t, this.capture && t.preventDefault(), this.wheelDelta = i.Math.clamp(-t.deltaY, -1, 1), this.mouseWheelCallback && this.mouseWheelCallback.call(this.callbackContext, t) }, requestPointerLock: function() { if (this.game.device.pointerLock) { var t = this.game.canvas;
                    t.requestPointerLock = t.requestPointerLock || t.mozRequestPointerLock || t.webkitRequestPointerLock, t.requestPointerLock(); var e = this;
                    this._pointerLockChange = function(t) { return e.pointerLockChange(t) }, document.addEventListener("pointerlockchange", this._pointerLockChange, !0), document.addEventListener("mozpointerlockchange", this._pointerLockChange, !0), document.addEventListener("webkitpointerlockchange", this._pointerLockChange, !0) } }, pointerLockChange: function(t) { var e = this.game.canvas;
                document.pointerLockElement === e || document.mozPointerLockElement === e || document.webkitPointerLockElement === e ? (this.locked = !0, this.pointerLock.dispatch(!0, t)) : (this.locked = !1, this.pointerLock.dispatch(!1, t)) }, releasePointerLock: function() { document.exitPointerLock = document.exitPointerLock || document.mozExitPointerLock || document.webkitExitPointerLock, document.exitPointerLock(), document.removeEventListener("pointerlockchange", this._pointerLockChange, !0), document.removeEventListener("mozpointerlockchange", this._pointerLockChange, !0), document.removeEventListener("webkitpointerlockchange", this._pointerLockChange, !0) }, stop: function() { var t = this.game.canvas;
                t.removeEventListener("mousedown", this._onMouseDown, !0), t.removeEventListener("mousemove", this._onMouseMove, !0), t.removeEventListener("mouseup", this._onMouseUp, !0), t.removeEventListener("mouseover", this._onMouseOver, !0), t.removeEventListener("mouseout", this._onMouseOut, !0); var e = this.game.device.wheelEvent;
                e && t.removeEventListener(e, this._onMouseWheel, !0), window.removeEventListener("mouseup", this._onMouseUpGlobal, !0), window.removeEventListener("mouseout", this._onMouseOutGlobal, !0), document.removeEventListener("pointerlockchange", this._pointerLockChange, !0), document.removeEventListener("mozpointerlockchange", this._pointerLockChange, !0), document.removeEventListener("webkitpointerlockchange", this._pointerLockChange, !0) } }, i.Mouse.prototype.constructor = i.Mouse, (t.prototype = {}).constructor = t, t.prototype.bindEvent = function(e) { if (!t._stubsGenerated && e) { for (var i in e) i in t.prototype || Object.defineProperty(t.prototype, i, { get: function(t) { return function() { var e = this.originalEvent[t]; return "function" != typeof e ? e : e.bind(this.originalEvent) } }(i) });
                t._stubsGenerated = !0 } return this.originalEvent = e, this }, Object.defineProperties(t.prototype, { type: { value: "wheel" }, deltaMode: { get: function() { return this._deltaMode } }, deltaY: { get: function() { return this._scaleFactor * (this.originalEvent.wheelDelta || this.originalEvent.detail) || 0 } }, deltaX: { get: function() { return this._scaleFactor * this.originalEvent.wheelDeltaX || 0 } }, deltaZ: { value: 0 } }), i.MSPointer = function(t) { this.game = t, this.input = t.input, this.callbackContext = this.game, this.pointerDownCallback = null, this.pointerMoveCallback = null, this.pointerUpCallback = null, this.capture = !0, this.button = -1, this.event = null, this.enabled = !0, this._onMSPointerDown = null, this._onMSPointerMove = null, this._onMSPointerUp = null, this._onMSPointerUpGlobal = null, this._onMSPointerOut = null, this._onMSPointerOver = null }, i.MSPointer.prototype = { start: function() { if (null === this._onMSPointerDown) { var t = this; if (this.game.device.mspointer) { this._onMSPointerDown = function(e) { return t.onPointerDown(e) }, this._onMSPointerMove = function(e) { return t.onPointerMove(e) }, this._onMSPointerUp = function(e) { return t.onPointerUp(e) }, this._onMSPointerUpGlobal = function(e) { return t.onPointerUpGlobal(e) }, this._onMSPointerOut = function(e) { return t.onPointerOut(e) }, this._onMSPointerOver = function(e) { return t.onPointerOver(e) }; var e = this.game.canvas;
                        e.addEventListener("MSPointerDown", this._onMSPointerDown, !1), e.addEventListener("MSPointerMove", this._onMSPointerMove, !1), e.addEventListener("MSPointerUp", this._onMSPointerUp, !1), e.addEventListener("pointerdown", this._onMSPointerDown, !1), e.addEventListener("pointermove", this._onMSPointerMove, !1), e.addEventListener("pointerup", this._onMSPointerUp, !1), e.style["-ms-content-zooming"] = "none", e.style["-ms-touch-action"] = "none", this.game.device.cocoonJS || (window.addEventListener("MSPointerUp", this._onMSPointerUpGlobal, !0), e.addEventListener("MSPointerOver", this._onMSPointerOver, !0), e.addEventListener("MSPointerOut", this._onMSPointerOut, !0), window.addEventListener("pointerup", this._onMSPointerUpGlobal, !0), e.addEventListener("pointerover", this._onMSPointerOver, !0), e.addEventListener("pointerout", this._onMSPointerOut, !0)) } } }, onPointerDown: function(t) { this.event = t, this.capture && t.preventDefault(), this.pointerDownCallback && this.pointerDownCallback.call(this.callbackContext, t), this.input.enabled && this.enabled && (t.identifier = t.pointerId, "mouse" === t.pointerType || 4 === t.pointerType ? this.input.mousePointer.start(t) : this.input.startPointer(t)) }, onPointerMove: function(t) { this.event = t, this.capture && t.preventDefault(), this.pointerMoveCallback && this.pointerMoveCallback.call(this.callbackContext, t), this.input.enabled && this.enabled && (t.identifier = t.pointerId, "mouse" === t.pointerType || 4 === t.pointerType ? this.input.mousePointer.move(t) : this.input.updatePointer(t)) }, onPointerUp: function(t) { this.event = t, this.capture && t.preventDefault(), this.pointerUpCallback && this.pointerUpCallback.call(this.callbackContext, t), this.input.enabled && this.enabled && (t.identifier = t.pointerId, "mouse" === t.pointerType || 4 === t.pointerType ? this.input.mousePointer.stop(t) : this.input.stopPointer(t)) }, onPointerUpGlobal: function(t) { if ("mouse" !== t.pointerType && 4 !== t.pointerType || this.input.mousePointer.withinGame) { var e = this.input.getPointerFromIdentifier(t.identifier);
                    e && e.withinGame && this.onPointerUp(t) } else this.onPointerUp(t) }, onPointerOut: function(t) { if (this.event = t, this.capture && t.preventDefault(), "mouse" === t.pointerType || 4 === t.pointerType) this.input.mousePointer.withinGame = !1;
                else { var e = this.input.getPointerFromIdentifier(t.identifier);
                    e && (e.withinGame = !1) } this.input.mouse.mouseOutCallback && this.input.mouse.mouseOutCallback.call(this.input.mouse.callbackContext, t), this.input.enabled && this.enabled && this.input.mouse.stopOnGameOut && (t.identifier = 0, e ? e.stop(t) : this.input.mousePointer.stop(t)) }, onPointerOver: function(t) { if (this.event = t, this.capture && t.preventDefault(), "mouse" === t.pointerType || 4 === t.pointerType) this.input.mousePointer.withinGame = !0;
                else { var e = this.input.getPointerFromIdentifier(t.identifier);
                    e && (e.withinGame = !0) } this.input.mouse.mouseOverCallback && this.input.mouse.mouseOverCallback.call(this.input.mouse.callbackContext, t) }, stop: function() { var t = this.game.canvas;
                t.removeEventListener("MSPointerDown", this._onMSPointerDown, !1), t.removeEventListener("MSPointerMove", this._onMSPointerMove, !1), t.removeEventListener("MSPointerUp", this._onMSPointerUp, !1), t.removeEventListener("pointerdown", this._onMSPointerDown, !1), t.removeEventListener("pointermove", this._onMSPointerMove, !1), t.removeEventListener("pointerup", this._onMSPointerUp, !1), window.removeEventListener("MSPointerUp", this._onMSPointerUpGlobal, !0), t.removeEventListener("MSPointerOver", this._onMSPointerOver, !0), t.removeEventListener("MSPointerOut", this._onMSPointerOut, !0), window.removeEventListener("pointerup", this._onMSPointerUpGlobal, !0), t.removeEventListener("pointerover", this._onMSPointerOver, !0), t.removeEventListener("pointerout", this._onMSPointerOut, !0) } }, i.MSPointer.prototype.constructor = i.MSPointer, i.DeviceButton = function(t, e) { this.parent = t, this.game = t.game, this.event = null, this.isDown = !1, this.isUp = !0, this.timeDown = 0, this.timeUp = 0, this.repeats = 0, this.altKey = !1, this.shiftKey = !1, this.ctrlKey = !1, this.value = 0, this.buttonCode = e, this.onDown = new i.Signal, this.onUp = new i.Signal, this.onFloat = new i.Signal }, i.DeviceButton.prototype = { start: function(t, e) { this.isDown || (this.isDown = !0, this.isUp = !1, this.timeDown = this.game.time.time, this.repeats = 0, this.event = t, this.value = e, t && (this.altKey = t.altKey, this.shiftKey = t.shiftKey, this.ctrlKey = t.ctrlKey), this.onDown.dispatch(this, e)) }, stop: function(t, e) { this.isUp || (this.isDown = !1, this.isUp = !0, this.timeUp = this.game.time.time, this.event = t, this.value = e, t && (this.altKey = t.altKey, this.shiftKey = t.shiftKey, this.ctrlKey = t.ctrlKey), this.onUp.dispatch(this, e)) }, padFloat: function(t) { this.value = t, this.onFloat.dispatch(this, t) }, justPressed: function(t) { return t = t || 250, this.isDown && this.timeDown + t > this.game.time.time }, justReleased: function(t) { return t = t || 250, this.isUp && this.timeUp + t > this.game.time.time }, reset: function() { this.isDown = !1, this.isUp = !0, this.timeDown = this.game.time.time, this.repeats = 0, this.altKey = !1, this.shiftKey = !1, this.ctrlKey = !1 }, destroy: function() { this.onDown.dispose(), this.onUp.dispose(), this.onFloat.dispose(), this.parent = null, this.game = null } }, i.DeviceButton.prototype.constructor = i.DeviceButton, Object.defineProperty(i.DeviceButton.prototype, "duration", { get: function() { return this.isUp ? -1 : this.game.time.time - this.timeDown } }), i.Pointer = function(t, e, n) { this.game = t, this.id = e, this.type = i.POINTER, this.exists = !0, this.identifier = 0, this.pointerId = null, this.pointerMode = n || i.PointerMode.CURSOR | i.PointerMode.CONTACT, this.target = null, this.button = null, this.leftButton = new i.DeviceButton(this, i.Pointer.LEFT_BUTTON), this.middleButton = new i.DeviceButton(this, i.Pointer.MIDDLE_BUTTON), this.rightButton = new i.DeviceButton(this, i.Pointer.RIGHT_BUTTON), this.backButton = new i.DeviceButton(this, i.Pointer.BACK_BUTTON), this.forwardButton = new i.DeviceButton(this, i.Pointer.FORWARD_BUTTON), this.eraserButton = new i.DeviceButton(this, i.Pointer.ERASER_BUTTON), this._holdSent = !1, this._history = [], this._nextDrop = 0, this._stateReset = !1, this.withinGame = !1, this.clientX = -1, this.clientY = -1, this.pageX = -1, this.pageY = -1, this.screenX = -1, this.screenY = -1, this.rawMovementX = 0, this.rawMovementY = 0, this.movementX = 0, this.movementY = 0, this.x = -1, this.y = -1, this.isMouse = 0 === e, this.isDown = !1, this.isUp = !0, this.timeDown = 0, this.timeUp = 0, this.previousTapTime = 0, this.totalTouches = 0, this.msSinceLastClick = Number.MAX_VALUE, this.targetObject = null, this.interactiveCandidates = [], this.active = !1, this.dirty = !1, this.position = new i.Point, this.positionDown = new i.Point, this.positionUp = new i.Point, this.circle = new i.Circle(0, 0, 44), this._clickTrampolines = null, this._trampolineTargetObject = null }, i.Pointer.NO_BUTTON = 0, i.Pointer.LEFT_BUTTON = 1, i.Pointer.RIGHT_BUTTON = 2, i.Pointer.MIDDLE_BUTTON = 4, i.Pointer.BACK_BUTTON = 8, i.Pointer.FORWARD_BUTTON = 16, i.Pointer.ERASER_BUTTON = 32, i.Pointer.prototype = { resetButtons: function() { this.isDown = !1, this.isUp = !0, this.isMouse && (this.leftButton.reset(), this.middleButton.reset(), this.rightButton.reset(), this.backButton.reset(), this.forwardButton.reset(), this.eraserButton.reset()) }, processButtonsDown: function(t, e) { i.Pointer.LEFT_BUTTON & t && this.leftButton.start(e), i.Pointer.RIGHT_BUTTON & t && this.rightButton.start(e), i.Pointer.MIDDLE_BUTTON & t && this.middleButton.start(e), i.Pointer.BACK_BUTTON & t && this.backButton.start(e), i.Pointer.FORWARD_BUTTON & t && this.forwardButton.start(e), i.Pointer.ERASER_BUTTON & t && this.eraserButton.start(e) }, processButtonsUp: function(t, e) { t === i.Mouse.LEFT_BUTTON && this.leftButton.stop(e), t === i.Mouse.RIGHT_BUTTON && this.rightButton.stop(e), t === i.Mouse.MIDDLE_BUTTON && this.middleButton.stop(e), t === i.Mouse.BACK_BUTTON && this.backButton.stop(e), t === i.Mouse.FORWARD_BUTTON && this.forwardButton.stop(e), 5 === t && this.eraserButton.stop(e) }, updateButtons: function(t) { this.button = t.button; var e = "down" === t.type.toLowerCase().substr(-4);
                void 0 !== t.buttons ? e ? this.processButtonsDown(t.buttons, t) : this.processButtonsUp(t.button, t) : e ? this.leftButton.start(t) : (this.leftButton.stop(t), this.rightButton.stop(t)), 1 === t.buttons && t.ctrlKey && this.leftButton.isDown && (this.leftButton.stop(t), this.rightButton.start(t)), this.isUp = !0, this.isDown = !1, (this.leftButton.isDown || this.rightButton.isDown || this.middleButton.isDown || this.backButton.isDown || this.forwardButton.isDown || this.eraserButton.isDown) && (this.isUp = !1, this.isDown = !0) }, start: function(t) { var e = this.game.input; return t.pointerId && (this.pointerId = t.pointerId), this.identifier = t.identifier, this.target = t.target, this.isMouse ? this.updateButtons(t) : (this.isDown = !0, this.isUp = !1), this.active = !0, this.withinGame = !0, this.dirty = !1, this._history = [], this._clickTrampolines = null, this._trampolineTargetObject = null, this.msSinceLastClick = this.game.time.time - this.timeDown, this.timeDown = this.game.time.time, this._holdSent = !1, this.move(t, !0), this.positionDown.setTo(this.x, this.y), (e.multiInputOverride === i.Input.MOUSE_OVERRIDES_TOUCH || e.multiInputOverride === i.Input.MOUSE_TOUCH_COMBINE || e.multiInputOverride === i.Input.TOUCH_OVERRIDES_MOUSE && 0 === e.totalActivePointers) && (e.x = this.x, e.y = this.y, e.position.setTo(this.x, this.y), e.onDown.dispatch(this, t), e.resetSpeed(this.x, this.y)), this._stateReset = !1, this.totalTouches++, null !== this.targetObject && this.targetObject._touchedHandler(this), this }, update: function() { var t = this.game.input;
                this.active && (this.dirty && (t.interactiveItems.total > 0 && this.processInteractiveObjects(!1), this.dirty = !1), !1 === this._holdSent && this.duration >= t.holdRate && ((t.multiInputOverride === i.Input.MOUSE_OVERRIDES_TOUCH || t.multiInputOverride === i.Input.MOUSE_TOUCH_COMBINE || t.multiInputOverride === i.Input.TOUCH_OVERRIDES_MOUSE && 0 === t.totalActivePointers) && t.onHold.dispatch(this), this._holdSent = !0), t.recordPointerHistory && this.game.time.time >= this._nextDrop && (this._nextDrop = this.game.time.time + t.recordRate, this._history.push({ x: this.position.x, y: this.position.y }), this._history.length > t.recordLimit && this._history.shift())) }, move: function(t, e) { var n = this.game.input; if (!n.pollLocked) { if (void 0 === e && (e = !1), void 0 !== t.button && (this.button = t.button), e && this.isMouse && this.updateButtons(t), this.clientX = t.clientX, this.clientY = t.clientY, this.pageX = t.pageX, this.pageY = t.pageY, this.screenX = t.screenX, this.screenY = t.screenY, this.isMouse && n.mouse.locked && !e && (this.rawMovementX = t.movementX || t.mozMovementX || t.webkitMovementX || 0, this.rawMovementY = t.movementY || t.mozMovementY || t.webkitMovementY || 0, this.movementX += this.rawMovementX, this.movementY += this.rawMovementY), this.x = (this.pageX - this.game.scale.offset.x) * n.scale.x, this.y = (this.pageY - this.game.scale.offset.y) * n.scale.y, this.position.setTo(this.x, this.y), this.circle.x = this.x, this.circle.y = this.y, (n.multiInputOverride === i.Input.MOUSE_OVERRIDES_TOUCH || n.multiInputOverride === i.Input.MOUSE_TOUCH_COMBINE || n.multiInputOverride === i.Input.TOUCH_OVERRIDES_MOUSE && 0 === n.totalActivePointers) && (n.activePointer = this, n.x = this.x, n.y = this.y, n.position.setTo(n.x, n.y), n.circle.x = n.x, n.circle.y = n.y), this.withinGame = this.game.scale.bounds.contains(this.pageX, this.pageY), this.game.paused) return this; for (var s = n.moveCallbacks.length; s--;) n.moveCallbacks[s].callback.call(n.moveCallbacks[s].context, this, this.x, this.y, e); return null !== this.targetObject && !0 === this.targetObject.isDragged ? !1 === this.targetObject.update(this) && (this.targetObject = null) : n.interactiveItems.total > 0 && this.processInteractiveObjects(e), this } }, processInteractiveObjects: function(t) { var e = 0,
                    i = -1,
                    n = null,
                    s = this.game.input.interactiveItems.first; for (this.interactiveCandidates = []; s;) s.checked = !1, s.validForInput(i, e, !1) && (s.checked = !0, (t && s.checkPointerDown(this, !0) || !t && s.checkPointerOver(this, !0)) && (e = s.sprite.renderOrderID, i = s.priorityID, n = s, this.interactiveCandidates.push(s))), s = this.game.input.interactiveItems.next; for (s = this.game.input.interactiveItems.first; s;) !s.checked && s.validForInput(i, e, !0) && (t && s.checkPointerDown(this, !1) || !t && s.checkPointerOver(this, !1)) && (e = s.sprite.renderOrderID, i = s.priorityID, n = s, this.interactiveCandidates.push(s)), s = this.game.input.interactiveItems.next; return this.game.input.customCandidateHandler && (n = this.game.input.customCandidateHandler.call(this.game.input.customCandidateHandlerContext, this, this.interactiveCandidates, n)), this.swapTarget(n, !1), null !== this.targetObject }, swapTarget: function(t, e) { void 0 === e && (e = !1), null === t ? this.targetObject && (this.targetObject._pointerOutHandler(this, e), this.targetObject = null) : null === this.targetObject ? (this.targetObject = t, t._pointerOverHandler(this, e)) : this.targetObject === t ? !1 === t.update(this) && (this.targetObject = null) : (this.targetObject._pointerOutHandler(this, e), this.targetObject = t, this.targetObject._pointerOverHandler(this, e)) }, leave: function(t) { this.withinGame = !1, this.move(t, !1) }, stop: function(t) { var e = this.game.input; { if (!this._stateReset || !this.withinGame) return this.timeUp = this.game.time.time, (e.multiInputOverride === i.Input.MOUSE_OVERRIDES_TOUCH || e.multiInputOverride === i.Input.MOUSE_TOUCH_COMBINE || e.multiInputOverride === i.Input.TOUCH_OVERRIDES_MOUSE && 0 === e.totalActivePointers) && (e.onUp.dispatch(this, t), this.duration >= 0 && this.duration <= e.tapRate && (this.timeUp - this.previousTapTime < e.doubleTapRate ? e.onTap.dispatch(this, !0) : e.onTap.dispatch(this, !1), this.previousTapTime = this.timeUp)), this.isMouse ? this.updateButtons(t) : (this.isDown = !1, this.isUp = !0), this.id > 0 && (this.active = !1), this.withinGame = this.game.scale.bounds.contains(t.pageX, t.pageY), this.pointerId = null, this.identifier = null, this.positionUp.setTo(this.x, this.y), !1 === this.isMouse && e.currentPointers--, e.interactiveItems.callAll("_releasedHandler", this), this._clickTrampolines && (this._trampolineTargetObject = this.targetObject), this.targetObject = null, this;
                    t.preventDefault() } }, justPressed: function(t) { return t = t || this.game.input.justPressedRate, !0 === this.isDown && this.timeDown + t > this.game.time.time }, justReleased: function(t) { return t = t || this.game.input.justReleasedRate, this.isUp && this.timeUp + t > this.game.time.time }, addClickTrampoline: function(t, e, i, n) { if (this.isDown) { for (var s = this._clickTrampolines = this._clickTrampolines || [], o = 0; o < s.length; o++)
                        if (s[o].name === t) { s.splice(o, 1); break } s.push({ name: t, targetObject: this.targetObject, callback: e, callbackContext: i, callbackArgs: n }) } }, processClickTrampolines: function() { var t = this._clickTrampolines; if (t) { for (var e = 0; e < t.length; e++) { var i = t[e];
                        i.targetObject === this._trampolineTargetObject && i.callback.apply(i.callbackContext, i.callbackArgs) } this._clickTrampolines = null, this._trampolineTargetObject = null } }, reset: function() {!1 === this.isMouse && (this.active = !1), this.pointerId = null, this.identifier = null, this.dirty = !1, this.totalTouches = 0, this._holdSent = !1, this._history.length = 0, this._stateReset = !0, this.resetButtons(), this.targetObject && this.targetObject._releasedHandler(this), this.targetObject = null }, resetMovement: function() { this.movementX = 0, this.movementY = 0 } }, i.Pointer.prototype.constructor = i.Pointer, Object.defineProperty(i.Pointer.prototype, "duration", { get: function() { return this.isUp ? -1 : this.game.time.time - this.timeDown } }), Object.defineProperty(i.Pointer.prototype, "worldX", { get: function() { return this.game.world.camera.x + this.x } }), Object.defineProperty(i.Pointer.prototype, "worldY", { get: function() { return this.game.world.camera.y + this.y } }), i.PointerMode = { CURSOR: 1, CONTACT: 2 }, i.Touch = function(t) { this.game = t, this.enabled = !0, this.touchLockCallbacks = [], this.callbackContext = this.game, this.touchStartCallback = null, this.touchMoveCallback = null, this.touchEndCallback = null, this.touchEnterCallback = null, this.touchLeaveCallback = null, this.touchCancelCallback = null, this.preventDefault = !0, this.event = null, this._onTouchStart = null, this._onTouchMove = null, this._onTouchEnd = null, this._onTouchEnter = null, this._onTouchLeave = null, this._onTouchCancel = null, this._onTouchMove = null }, i.Touch.prototype = { start: function() { if (null === this._onTouchStart) { var t = this;
                    this.game.device.touch && (this._onTouchStart = function(e) { return t.onTouchStart(e) }, this._onTouchMove = function(e) { return t.onTouchMove(e) }, this._onTouchEnd = function(e) { return t.onTouchEnd(e) }, this._onTouchEnter = function(e) { return t.onTouchEnter(e) }, this._onTouchLeave = function(e) { return t.onTouchLeave(e) }, this._onTouchCancel = function(e) { return t.onTouchCancel(e) }, this.game.canvas.addEventListener("touchstart", this._onTouchStart, !1), this.game.canvas.addEventListener("touchmove", this._onTouchMove, !1), this.game.canvas.addEventListener("touchend", this._onTouchEnd, !1), this.game.canvas.addEventListener("touchcancel", this._onTouchCancel, !1), this.game.device.cocoonJS || (this.game.canvas.addEventListener("touchenter", this._onTouchEnter, !1), this.game.canvas.addEventListener("touchleave", this._onTouchLeave, !1))) } }, consumeDocumentTouches: function() { this._documentTouchMove = function(t) { t.preventDefault() }, document.addEventListener("touchmove", this._documentTouchMove, !1) }, addTouchLockCallback: function(t, e, i) { void 0 === i && (i = !1), this.touchLockCallbacks.push({ callback: t, context: e, onEnd: i }) }, removeTouchLockCallback: function(t, e) { for (var i = this.touchLockCallbacks.length; i--;)
                    if (this.touchLockCallbacks[i].callback === t && this.touchLockCallbacks[i].context === e) return this.touchLockCallbacks.splice(i, 1), !0; return !1 }, onTouchStart: function(t) { for (i = this.touchLockCallbacks.length; i--;) { var e = this.touchLockCallbacks[i];!e.onEnd && e.callback.call(e.context, this, t) && this.touchLockCallbacks.splice(i, 1) } if (this.event = t, this.game.input.enabled && this.enabled) { this.touchStartCallback && this.touchStartCallback.call(this.callbackContext, t), this.preventDefault && t.preventDefault(); for (var i = 0; i < t.changedTouches.length; i++) this.game.input.startPointer(t.changedTouches[i]) } }, onTouchCancel: function(t) { if (this.event = t, this.touchCancelCallback && this.touchCancelCallback.call(this.callbackContext, t), this.game.input.enabled && this.enabled) { this.preventDefault && t.preventDefault(); for (var e = 0; e < t.changedTouches.length; e++) this.game.input.stopPointer(t.changedTouches[e]) } }, onTouchEnter: function(t) { this.event = t, this.touchEnterCallback && this.touchEnterCallback.call(this.callbackContext, t), this.game.input.enabled && this.enabled && this.preventDefault && t.preventDefault() }, onTouchLeave: function(t) { this.event = t, this.touchLeaveCallback && this.touchLeaveCallback.call(this.callbackContext, t), this.preventDefault && t.preventDefault() }, onTouchMove: function(t) { this.event = t, this.touchMoveCallback && this.touchMoveCallback.call(this.callbackContext, t), this.preventDefault && t.preventDefault(); for (var e = 0; e < t.changedTouches.length; e++) this.game.input.updatePointer(t.changedTouches[e]) }, onTouchEnd: function(t) { for (i = this.touchLockCallbacks.length; i--;) { var e = this.touchLockCallbacks[i];
                    e.onEnd && e.callback.call(e.context, this, t) && this.touchLockCallbacks.splice(i, 1) } this.event = t, this.touchEndCallback && this.touchEndCallback.call(this.callbackContext, t), this.preventDefault && t.preventDefault(); for (var i = 0; i < t.changedTouches.length; i++) this.game.input.stopPointer(t.changedTouches[i]) }, stop: function() { this.game.device.touch && (this.game.canvas.removeEventListener("touchstart", this._onTouchStart), this.game.canvas.removeEventListener("touchmove", this._onTouchMove), this.game.canvas.removeEventListener("touchend", this._onTouchEnd), this.game.canvas.removeEventListener("touchenter", this._onTouchEnter), this.game.canvas.removeEventListener("touchleave", this._onTouchLeave), this.game.canvas.removeEventListener("touchcancel", this._onTouchCancel)) } }, i.Touch.prototype.constructor = i.Touch, i.InputHandler = function(t) { this.sprite = t, this.game = t.game, this.enabled = !1, this.checked = !1, this.priorityID = 0, this.useHandCursor = !1, this._setHandCursor = !1, this.isDragged = !1, this.allowHorizontalDrag = !0, this.allowVerticalDrag = !0, this.bringToTop = !1, this.snapOffset = null, this.snapOnDrag = !1, this.snapOnRelease = !1, this.snapX = 0, this.snapY = 0, this.snapOffsetX = 0, this.snapOffsetY = 0, this.pixelPerfectOver = !1, this.pixelPerfectClick = !1, this.pixelPerfectAlpha = 255, this.draggable = !1, this.boundsRect = null, this.boundsSprite = null, this.scaleLayer = !1, this.dragOffset = new i.Point, this.dragFromCenter = !1, this.dragStopBlocksInputUp = !1, this.dragStartPoint = new i.Point, this.dragDistanceThreshold = 0, this.dragTimeThreshold = 0, this.downPoint = new i.Point, this.snapPoint = new i.Point, this._dragPoint = new i.Point, this._dragPhase = !1, this._pendingDrag = !1, this._dragTimePass = !1, this._dragDistancePass = !1, this._wasEnabled = !1, this._tempPoint = new i.Point, this._pointerData = [], this._pointerData.push({ id: 0, x: 0, y: 0, camX: 0, camY: 0, isDown: !1, isUp: !1, isOver: !1, isOut: !1, timeOver: 0, timeOut: 0, timeDown: 0, timeUp: 0, downDuration: 0, isDragged: !1 }) }, i.InputHandler.prototype = { start: function(t, e) { if (t = t || 0, void 0 === e && (e = !1), !1 === this.enabled) { this.game.input.interactiveItems.add(this), this.useHandCursor = e, this.priorityID = t; for (var n = 0; n < 10; n++) this._pointerData[n] = { id: n, x: 0, y: 0, isDown: !1, isUp: !1, isOver: !1, isOut: !1, timeOver: 0, timeOut: 0, timeDown: 0, timeUp: 0, downDuration: 0, isDragged: !1 };
                    this.snapOffset = new i.Point, this.enabled = !0, this._wasEnabled = !0 } return this.sprite.events.onAddedToGroup.add(this.addedToGroup, this), this.sprite.events.onRemovedFromGroup.add(this.removedFromGroup, this), this.sprite }, addedToGroup: function() { this._dragPhase || this._wasEnabled && !this.enabled && this.start() }, removedFromGroup: function() { this._dragPhase || (this.enabled ? (this._wasEnabled = !0, this.stop()) : this._wasEnabled = !1) }, reset: function() { this.enabled = !1; for (var t = 0; t < 10; t++) this._pointerData[t] = { id: t, x: 0, y: 0, isDown: !1, isUp: !1, isOver: !1, isOut: !1, timeOver: 0, timeOut: 0, timeDown: 0, timeUp: 0, downDuration: 0, isDragged: !1 } }, stop: function() {!1 !== this.enabled && (this.enabled = !1, this.game.input.interactiveItems.remove(this)) }, destroy: function() { this.sprite && (this._setHandCursor && (this.game.canvas.style.cursor = "default", this._setHandCursor = !1), this.enabled = !1, this.game.input.interactiveItems.remove(this), this._pointerData.length = 0, this.boundsRect = null, this.boundsSprite = null, this.sprite = null) }, validForInput: function(t, e, i) { return void 0 === i && (i = !0), !(!this.enabled || 0 === this.sprite.scale.x || 0 === this.sprite.scale.y || this.priorityID < this.game.input.minPriorityID || this.sprite.parent && this.sprite.parent.ignoreChildInput) && (!(!i && (this.pixelPerfectClick || this.pixelPerfectOver)) && (this.priorityID > t || this.priorityID === t && this.sprite.renderOrderID > e)) }, isPixelPerfect: function() { return this.pixelPerfectClick || this.pixelPerfectOver }, pointerX: function(t) { return t = t || 0, this._pointerData[t].x }, pointerY: function(t) { return t = t || 0, this._pointerData[t].y }, pointerDown: function(t) { return t = t || 0, this._pointerData[t].isDown }, pointerUp: function(t) { return t = t || 0, this._pointerData[t].isUp }, pointerTimeDown: function(t) { return t = t || 0, this._pointerData[t].timeDown }, pointerTimeUp: function(t) { return t = t || 0, this._pointerData[t].timeUp }, pointerOver: function(t) { if (!this.enabled) return !1; if (void 0 === t) { for (var e = 0; e < 10; e++)
                        if (this._pointerData[e].isOver) return !0; return !1 } return this._pointerData[t].isOver }, pointerOut: function(t) { if (!this.enabled) return !1; if (void 0 !== t) return this._pointerData[t].isOut; for (var e = 0; e < 10; e++)
                    if (this._pointerData[e].isOut) return !0 }, pointerTimeOver: function(t) { return t = t || 0, this._pointerData[t].timeOver }, pointerTimeOut: function(t) { return t = t || 0, this._pointerData[t].timeOut }, pointerDragged: function(t) { return t = t || 0, this._pointerData[t].isDragged }, checkPointerDown: function(t, e) { return !!(t.isDown && this.enabled && this.sprite && this.sprite.parent && this.sprite.visible && this.sprite.parent.visible && 0 !== this.sprite.worldScale.x && 0 !== this.sprite.worldScale.y) && (!!this.game.input.hitTest(this.sprite, t, this._tempPoint) && (void 0 === e && (e = !1), !(!e && this.pixelPerfectClick) || this.checkPixel(this._tempPoint.x, this._tempPoint.y))) }, checkPointerOver: function(t, e) { return !!(this.enabled && this.sprite && this.sprite.parent && this.sprite.visible && this.sprite.parent.visible && 0 !== this.sprite.worldScale.x && 0 !== this.sprite.worldScale.y) && (!!this.game.input.hitTest(this.sprite, t, this._tempPoint) && (void 0 === e && (e = !1), !(!e && this.pixelPerfectOver) || this.checkPixel(this._tempPoint.x, this._tempPoint.y))) }, checkPixel: function(t, e, i) { if (this.sprite.texture.baseTexture.source) { if (null === t && null === e) { this.game.input.getLocalPosition(this.sprite, i, this._tempPoint); var t = this._tempPoint.x,
                            e = this._tempPoint.y } if (0 !== this.sprite.anchor.x && (t -= -this.sprite.texture.frame.width * this.sprite.anchor.x), 0 !== this.sprite.anchor.y && (e -= -this.sprite.texture.frame.height * this.sprite.anchor.y), t += this.sprite.texture.frame.x, e += this.sprite.texture.frame.y, this.sprite.texture.trim && (t -= this.sprite.texture.trim.x, e -= this.sprite.texture.trim.y, t < this.sprite.texture.crop.x || t > this.sprite.texture.crop.right || e < this.sprite.texture.crop.y || e > this.sprite.texture.crop.bottom)) return this._dx = t, this._dy = e, !1; if (this._dx = t, this._dy = e, this.game.input.hitContext.clearRect(0, 0, 1, 1), this.game.input.hitContext.drawImage(this.sprite.texture.baseTexture.source, t, e, 1, 1, 0, 0, 1, 1), this.game.input.hitContext.getImageData(0, 0, 1, 1).data[3] >= this.pixelPerfectAlpha) return !0 } return !1 }, update: function(t) { if (null !== this.sprite && void 0 !== this.sprite.parent) return this.enabled && this.sprite.visible && this.sprite.parent.visible ? this._pendingDrag ? (this._dragDistancePass || (this._dragDistancePass = i.Math.distance(t.x, t.y, this.downPoint.x, this.downPoint.y) >= this.dragDistanceThreshold), this._dragDistancePass && this._dragTimePass && this.startDrag(t), !0) : this.draggable && this._draggedPointerID === t.id ? this.updateDrag(t, !1) : this._pointerData[t.id].isOver ? this.checkPointerOver(t) ? (this._pointerData[t.id].x = t.x - this.sprite.x, this._pointerData[t.id].y = t.y - this.sprite.y, !0) : (this._pointerOutHandler(t), !1) : void 0 : (this._pointerOutHandler(t), !1) }, _pointerOverHandler: function(t, e) { if (null !== this.sprite) { var n = this._pointerData[t.id]; if (!1 === n.isOver || t.dirty) { var s = !1 === n.isOver;
                        n.isOver = !0, n.isOut = !1, n.timeOver = this.game.time.time, n.x = t.x - this.sprite.x, n.y = t.y - this.sprite.y, this.useHandCursor && !1 === n.isDragged && (this.game.canvas.style.cursor = "pointer", this._setHandCursor = !0), !e && s && this.sprite && this.sprite.events && this.sprite.events.onInputOver$dispatch(this.sprite, t), this.sprite.parent && this.sprite.parent.type === i.GROUP && this.sprite.parent.onChildInputOver.dispatch(this.sprite, t) } } }, _pointerOutHandler: function(t, e) { if (null !== this.sprite) { var n = this._pointerData[t.id];
                    n.isOver = !1, n.isOut = !0, n.timeOut = this.game.time.time, this.useHandCursor && !1 === n.isDragged && (this.game.canvas.style.cursor = "default", this._setHandCursor = !1), !e && this.sprite && this.sprite.events && (this.sprite.events.onInputOut$dispatch(this.sprite, t), this.sprite && this.sprite.parent && this.sprite.parent.type === i.GROUP && this.sprite.parent.onChildInputOut.dispatch(this.sprite, t)) } }, _touchedHandler: function(t) { if (null !== this.sprite) { var e = this._pointerData[t.id]; if (!e.isDown && e.isOver) { if (this.pixelPerfectClick && !this.checkPixel(null, null, t)) return; if (e.isDown = !0, e.isUp = !1, e.timeDown = this.game.time.time, this.downPoint.set(t.x, t.y), t.dirty = !0, this.sprite && this.sprite.events && (this.sprite.events.onInputDown$dispatch(this.sprite, t), this.sprite && this.sprite.parent && this.sprite.parent.type === i.GROUP && this.sprite.parent.onChildInputDown.dispatch(this.sprite, t), null === this.sprite)) return;
                        this.draggable && !1 === this.isDragged && (0 === this.dragTimeThreshold && 0 === this.dragDistanceThreshold ? this.startDrag(t) : (this._pendingDrag = !0, this._dragDistancePass = 0 === this.dragDistanceThreshold, this.dragTimeThreshold > 0 ? (this._dragTimePass = !1, this.game.time.events.add(this.dragTimeThreshold, this.dragTimeElapsed, this, t)) : this._dragTimePass = !0)), this.bringToTop && this.sprite.bringToTop() } } }, dragTimeElapsed: function(t) { this._dragTimePass = !0, this._pendingDrag && this.sprite && this._dragDistancePass && this.startDrag(t) }, _releasedHandler: function(t) { if (null !== this.sprite) { var e = this._pointerData[t.id]; if (e.isDown && t.isUp) { e.isDown = !1, e.isUp = !0, e.timeUp = this.game.time.time, e.downDuration = e.timeUp - e.timeDown; var n = this.checkPointerOver(t);
                        this.sprite && this.sprite.events && (this.dragStopBlocksInputUp && (!this.dragStopBlocksInputUp || this.draggable && this.isDragged && this._draggedPointerID === t.id) || this.sprite.events.onInputUp$dispatch(this.sprite, t, n), this.sprite && this.sprite.parent && this.sprite.parent.type === i.GROUP && this.sprite.parent.onChildInputUp.dispatch(this.sprite, t, n), n && (n = this.checkPointerOver(t))), e.isOver = n, !n && this.useHandCursor && (this.game.canvas.style.cursor = "default", this._setHandCursor = !1), t.dirty = !0, this._pendingDrag = !1, this.draggable && this.isDragged && this._draggedPointerID === t.id && this.stopDrag(t) } } }, updateDrag: function(t, e) { if (void 0 === e && (e = !1), t.isUp) return this.stopDrag(t), !1; var i = this.globalToLocalX(t.x) + this._dragPoint.x + this.dragOffset.x,
                    n = this.globalToLocalY(t.y) + this._dragPoint.y + this.dragOffset.y; if (this.sprite.fixedToCamera) this.allowHorizontalDrag && (this.sprite.cameraOffset.x = i), this.allowVerticalDrag && (this.sprite.cameraOffset.y = n), this.boundsRect && this.checkBoundsRect(), this.boundsSprite && this.checkBoundsSprite(), this.snapOnDrag && (this.sprite.cameraOffset.x = Math.round((this.sprite.cameraOffset.x - this.snapOffsetX % this.snapX) / this.snapX) * this.snapX + this.snapOffsetX % this.snapX, this.sprite.cameraOffset.y = Math.round((this.sprite.cameraOffset.y - this.snapOffsetY % this.snapY) / this.snapY) * this.snapY + this.snapOffsetY % this.snapY, this.snapPoint.set(this.sprite.cameraOffset.x, this.sprite.cameraOffset.y));
                else { var s = this.game.camera.x - this._pointerData[t.id].camX,
                        o = this.game.camera.y - this._pointerData[t.id].camY;
                    this.allowHorizontalDrag && (this.sprite.x = i + s), this.allowVerticalDrag && (this.sprite.y = n + o), this.boundsRect && this.checkBoundsRect(), this.boundsSprite && this.checkBoundsSprite(), this.snapOnDrag && (this.sprite.x = Math.round((this.sprite.x - this.snapOffsetX % this.snapX) / this.snapX) * this.snapX + this.snapOffsetX % this.snapX, this.sprite.y = Math.round((this.sprite.y - this.snapOffsetY % this.snapY) / this.snapY) * this.snapY + this.snapOffsetY % this.snapY, this.snapPoint.set(this.sprite.x, this.sprite.y)) } return this.sprite.events.onDragUpdate.dispatch(this.sprite, t, i, n, this.snapPoint, e), !0 }, justOver: function(t, e) { return t = t || 0, e = e || 500, this._pointerData[t].isOver && this.overDuration(t) < e }, justOut: function(t, e) { return t = t || 0, e = e || 500, this._pointerData[t].isOut && this.game.time.time - this._pointerData[t].timeOut < e }, justPressed: function(t, e) { return t = t || 0, e = e || 500, this._pointerData[t].isDown && this.downDuration(t) < e }, justReleased: function(t, e) { return t = t || 0, e = e || 500, this._pointerData[t].isUp && this.game.time.time - this._pointerData[t].timeUp < e }, overDuration: function(t) { return t = t || 0, this._pointerData[t].isOver ? this.game.time.time - this._pointerData[t].timeOver : -1 }, downDuration: function(t) { return t = t || 0, this._pointerData[t].isDown ? this.game.time.time - this._pointerData[t].timeDown : -1 }, enableDrag: function(t, e, n, s, o, a) { void 0 === t && (t = !1), void 0 === e && (e = !1), void 0 === n && (n = !1), void 0 === s && (s = 255), void 0 === o && (o = null), void 0 === a && (a = null), this._dragPoint = new i.Point, this.draggable = !0, this.bringToTop = e, this.dragOffset = new i.Point, this.dragFromCenter = t, this.pixelPerfectClick = n, this.pixelPerfectAlpha = s, o && (this.boundsRect = o), a && (this.boundsSprite = a) }, disableDrag: function() { if (this._pointerData)
                    for (var t = 0; t < 10; t++) this._pointerData[t].isDragged = !1;
                this.draggable = !1, this.isDragged = !1, this._draggedPointerID = -1, this._pendingDrag = !1 }, startDrag: function(t) { var e = this.sprite.x,
                    i = this.sprite.y; if (this.isDragged = !0, this._draggedPointerID = t.id, this._pointerData[t.id].camX = this.game.camera.x, this._pointerData[t.id].camY = this.game.camera.y, this._pointerData[t.id].isDragged = !0, this.sprite.fixedToCamera) { if (this.dragFromCenter) { n = this.sprite.getBounds();
                        this.sprite.cameraOffset.x = this.globalToLocalX(t.x) + (this.sprite.cameraOffset.x - n.centerX), this.sprite.cameraOffset.y = this.globalToLocalY(t.y) + (this.sprite.cameraOffset.y - n.centerY) } this._dragPoint.setTo(this.sprite.cameraOffset.x - t.x, this.sprite.cameraOffset.y - t.y) } else { if (this.dragFromCenter) { var n = this.sprite.getBounds();
                        this.sprite.x = this.globalToLocalX(t.x) + (this.sprite.x - n.centerX), this.sprite.y = this.globalToLocalY(t.y) + (this.sprite.y - n.centerY) } this._dragPoint.setTo(this.sprite.x - this.globalToLocalX(t.x), this.sprite.y - this.globalToLocalY(t.y)) } this.updateDrag(t, !0), this.bringToTop && (this._dragPhase = !0, this.sprite.bringToTop()), this.dragStartPoint.set(e, i), this.sprite.events.onDragStart$dispatch(this.sprite, t, e, i), this._pendingDrag = !1 }, globalToLocalX: function(t) { return this.scaleLayer && (t -= this.game.scale.grid.boundsFluid.x, t *= this.game.scale.grid.scaleFluidInversed.x), t }, globalToLocalY: function(t) { return this.scaleLayer && (t -= this.game.scale.grid.boundsFluid.y, t *= this.game.scale.grid.scaleFluidInversed.y), t }, stopDrag: function(t) { this.isDragged = !1, this._draggedPointerID = -1, this._pointerData[t.id].isDragged = !1, this._dragPhase = !1, this._pendingDrag = !1, this.snapOnRelease && (this.sprite.fixedToCamera ? (this.sprite.cameraOffset.x = Math.round((this.sprite.cameraOffset.x - this.snapOffsetX % this.snapX) / this.snapX) * this.snapX + this.snapOffsetX % this.snapX, this.sprite.cameraOffset.y = Math.round((this.sprite.cameraOffset.y - this.snapOffsetY % this.snapY) / this.snapY) * this.snapY + this.snapOffsetY % this.snapY) : (this.sprite.x = Math.round((this.sprite.x - this.snapOffsetX % this.snapX) / this.snapX) * this.snapX + this.snapOffsetX % this.snapX, this.sprite.y = Math.round((this.sprite.y - this.snapOffsetY % this.snapY) / this.snapY) * this.snapY + this.snapOffsetY % this.snapY)), this.sprite.events.onDragStop$dispatch(this.sprite, t), !1 === this.checkPointerOver(t) && this._pointerOutHandler(t) }, setDragLock: function(t, e) { void 0 === t && (t = !0), void 0 === e && (e = !0), this.allowHorizontalDrag = t, this.allowVerticalDrag = e }, enableSnap: function(t, e, i, n, s, o) { void 0 === i && (i = !0), void 0 === n && (n = !1), void 0 === s && (s = 0), void 0 === o && (o = 0), this.snapX = t, this.snapY = e, this.snapOffsetX = s, this.snapOffsetY = o, this.snapOnDrag = i, this.snapOnRelease = n }, disableSnap: function() { this.snapOnDrag = !1, this.snapOnRelease = !1 }, checkBoundsRect: function() { this.sprite.fixedToCamera ? (this.sprite.cameraOffset.x < this.boundsRect.left ? this.sprite.cameraOffset.x = this.boundsRect.left : this.sprite.cameraOffset.x + this.sprite.width > this.boundsRect.right && (this.sprite.cameraOffset.x = this.boundsRect.right - this.sprite.width), this.sprite.cameraOffset.y < this.boundsRect.top ? this.sprite.cameraOffset.y = this.boundsRect.top : this.sprite.cameraOffset.y + this.sprite.height > this.boundsRect.bottom && (this.sprite.cameraOffset.y = this.boundsRect.bottom - this.sprite.height)) : (this.sprite.left < this.boundsRect.left ? this.sprite.x = this.boundsRect.x + this.sprite.offsetX : this.sprite.right > this.boundsRect.right && (this.sprite.x = this.boundsRect.right - (this.sprite.width - this.sprite.offsetX)), this.sprite.top < this.boundsRect.top ? this.sprite.y = this.boundsRect.top + this.sprite.offsetY : this.sprite.bottom > this.boundsRect.bottom && (this.sprite.y = this.boundsRect.bottom - (this.sprite.height - this.sprite.offsetY))) }, checkBoundsSprite: function() { this.sprite.fixedToCamera && this.boundsSprite.fixedToCamera ? (this.sprite.cameraOffset.x < this.boundsSprite.cameraOffset.x ? this.sprite.cameraOffset.x = this.boundsSprite.cameraOffset.x : this.sprite.cameraOffset.x + this.sprite.width > this.boundsSprite.cameraOffset.x + this.boundsSprite.width && (this.sprite.cameraOffset.x = this.boundsSprite.cameraOffset.x + this.boundsSprite.width - this.sprite.width), this.sprite.cameraOffset.y < this.boundsSprite.cameraOffset.y ? this.sprite.cameraOffset.y = this.boundsSprite.cameraOffset.y : this.sprite.cameraOffset.y + this.sprite.height > this.boundsSprite.cameraOffset.y + this.boundsSprite.height && (this.sprite.cameraOffset.y = this.boundsSprite.cameraOffset.y + this.boundsSprite.height - this.sprite.height)) : (this.sprite.left < this.boundsSprite.left ? this.sprite.x = this.boundsSprite.left + this.sprite.offsetX : this.sprite.right > this.boundsSprite.right && (this.sprite.x = this.boundsSprite.right - (this.sprite.width - this.sprite.offsetX)), this.sprite.top < this.boundsSprite.top ? this.sprite.y = this.boundsSprite.top + this.sprite.offsetY : this.sprite.bottom > this.boundsSprite.bottom && (this.sprite.y = this.boundsSprite.bottom - (this.sprite.height - this.sprite.offsetY))) } }, i.InputHandler.prototype.constructor = i.InputHandler, i.Gamepad = function(t) { this.game = t, this._gamepadIndexMap = {}, this._rawPads = [], this._active = !1, this.enabled = !0, this._gamepadSupportAvailable = !!navigator.webkitGetGamepads || !!navigator.webkitGamepads || -1 !== navigator.userAgent.indexOf("Firefox/") || !!navigator.getGamepads, this._prevRawGamepadTypes = [], this._prevTimestamps = [], this.callbackContext = this, this.onConnectCallback = null, this.onDisconnectCallback = null, this.onDownCallback = null, this.onUpCallback = null, this.onAxisCallback = null, this.onFloatCallback = null, this._ongamepadconnected = null, this._gamepaddisconnected = null, this._gamepads = [new i.SinglePad(t, this), new i.SinglePad(t, this), new i.SinglePad(t, this), new i.SinglePad(t, this)] }, i.Gamepad.prototype = { addCallbacks: function(t, e) { void 0 !== e && (this.onConnectCallback = "function" == typeof e.onConnect ? e.onConnect : this.onConnectCallback, this.onDisconnectCallback = "function" == typeof e.onDisconnect ? e.onDisconnect : this.onDisconnectCallback, this.onDownCallback = "function" == typeof e.onDown ? e.onDown : this.onDownCallback, this.onUpCallback = "function" == typeof e.onUp ? e.onUp : this.onUpCallback, this.onAxisCallback = "function" == typeof e.onAxis ? e.onAxis : this.onAxisCallback, this.onFloatCallback = "function" == typeof e.onFloat ? e.onFloat : this.onFloatCallback, this.callbackContext = t) }, start: function() { if (!this._active) { this._active = !0; var t = this;
                    this._onGamepadConnected = function(e) { return t.onGamepadConnected(e) }, this._onGamepadDisconnected = function(e) { return t.onGamepadDisconnected(e) }, window.addEventListener("gamepadconnected", this._onGamepadConnected, !1), window.addEventListener("gamepaddisconnected", this._onGamepadDisconnected, !1) } }, onGamepadConnected: function(t) { var e = t.gamepad;
                this._rawPads.push(e), this._gamepads[e.index].connect(e) }, onGamepadDisconnected: function(t) { var e = t.gamepad; for (var i in this._rawPads) this._rawPads[i].index === e.index && this._rawPads.splice(i, 1);
                this._gamepads[e.index].disconnect() }, update: function() { this._pollGamepads(), this.pad1.pollStatus(), this.pad2.pollStatus(), this.pad3.pollStatus(), this.pad4.pollStatus() }, _pollGamepads: function() { if (this._active) { if (navigator.getGamepads) t = navigator.getGamepads();
                    else if (navigator.webkitGetGamepads) t = navigator.webkitGetGamepads();
                    else if (navigator.webkitGamepads) var t = navigator.webkitGamepads(); if (t) { this._rawPads = []; for (var e = !1, i = 0; i < t.length && (typeof t[i] !== this._prevRawGamepadTypes[i] && (e = !0, this._prevRawGamepadTypes[i] = typeof t[i]), t[i] && this._rawPads.push(t[i]), 3 !== i); i++); for (var n = 0; n < this._gamepads.length; n++) this._gamepads[n]._rawPad = this._rawPads[n]; if (e) { for (var s, o = { rawIndices: {}, padIndices: {} }, a = 0; a < this._gamepads.length; a++)
                                if ((s = this._gamepads[a]).connected)
                                    for (var r = 0; r < this._rawPads.length; r++) this._rawPads[r].index === s.index && (o.rawIndices[s.index] = !0, o.padIndices[a] = !0); for (var h = 0; h < this._gamepads.length; h++)
                                if (s = this._gamepads[h], !o.padIndices[h]) { this._rawPads.length < 1 && s.disconnect(); for (var l = 0; l < this._rawPads.length && !o.padIndices[h]; l++) { var c = this._rawPads[l]; if (c) { if (o.rawIndices[c.index]) { s.disconnect(); continue } s.connect(c), o.rawIndices[c.index] = !0, o.padIndices[h] = !0 } else s.disconnect() } } } } } }, setDeadZones: function(t) { for (var e = 0; e < this._gamepads.length; e++) this._gamepads[e].deadZone = t }, stop: function() { this._active = !1, window.removeEventListener("gamepadconnected", this._onGamepadConnected), window.removeEventListener("gamepaddisconnected", this._onGamepadDisconnected) }, reset: function() { this.update(); for (var t = 0; t < this._gamepads.length; t++) this._gamepads[t].reset() }, justPressed: function(t, e) { for (var i = 0; i < this._gamepads.length; i++)
                    if (!0 === this._gamepads[i].justPressed(t, e)) return !0; return !1 }, justReleased: function(t, e) { for (var i = 0; i < this._gamepads.length; i++)
                    if (!0 === this._gamepads[i].justReleased(t, e)) return !0; return !1 }, isDown: function(t) { for (var e = 0; e < this._gamepads.length; e++)
                    if (!0 === this._gamepads[e].isDown(t)) return !0; return !1 }, destroy: function() { this.stop(); for (var t = 0; t < this._gamepads.length; t++) this._gamepads[t].destroy() } }, i.Gamepad.prototype.constructor = i.Gamepad, Object.defineProperty(i.Gamepad.prototype, "active", { get: function() { return this._active } }), Object.defineProperty(i.Gamepad.prototype, "supported", { get: function() { return this._gamepadSupportAvailable } }), Object.defineProperty(i.Gamepad.prototype, "padsConnected", { get: function() { return this._rawPads.length } }), Object.defineProperty(i.Gamepad.prototype, "pad1", { get: function() { return this._gamepads[0] } }), Object.defineProperty(i.Gamepad.prototype, "pad2", { get: function() { return this._gamepads[1] } }), Object.defineProperty(i.Gamepad.prototype, "pad3", { get: function() { return this._gamepads[2] } }), Object.defineProperty(i.Gamepad.prototype, "pad4", { get: function() { return this._gamepads[3] } }), i.Gamepad.BUTTON_0 = 0, i.Gamepad.BUTTON_1 = 1, i.Gamepad.BUTTON_2 = 2, i.Gamepad.BUTTON_3 = 3, i.Gamepad.BUTTON_4 = 4, i.Gamepad.BUTTON_5 = 5, i.Gamepad.BUTTON_6 = 6, i.Gamepad.BUTTON_7 = 7, i.Gamepad.BUTTON_8 = 8, i.Gamepad.BUTTON_9 = 9, i.Gamepad.BUTTON_10 = 10, i.Gamepad.BUTTON_11 = 11, i.Gamepad.BUTTON_12 = 12, i.Gamepad.BUTTON_13 = 13, i.Gamepad.BUTTON_14 = 14, i.Gamepad.BUTTON_15 = 15, i.Gamepad.AXIS_0 = 0, i.Gamepad.AXIS_1 = 1, i.Gamepad.AXIS_2 = 2, i.Gamepad.AXIS_3 = 3, i.Gamepad.AXIS_4 = 4, i.Gamepad.AXIS_5 = 5, i.Gamepad.AXIS_6 = 6, i.Gamepad.AXIS_7 = 7, i.Gamepad.AXIS_8 = 8, i.Gamepad.AXIS_9 = 9, i.Gamepad.XBOX360_A = 0, i.Gamepad.XBOX360_B = 1, i.Gamepad.XBOX360_X = 2, i.Gamepad.XBOX360_Y = 3, i.Gamepad.XBOX360_LEFT_BUMPER = 4, i.Gamepad.XBOX360_RIGHT_BUMPER = 5, i.Gamepad.XBOX360_LEFT_TRIGGER = 6, i.Gamepad.XBOX360_RIGHT_TRIGGER = 7, i.Gamepad.XBOX360_BACK = 8, i.Gamepad.XBOX360_START = 9, i.Gamepad.XBOX360_STICK_LEFT_BUTTON = 10, i.Gamepad.XBOX360_STICK_RIGHT_BUTTON = 11, i.Gamepad.XBOX360_DPAD_LEFT = 14, i.Gamepad.XBOX360_DPAD_RIGHT = 15, i.Gamepad.XBOX360_DPAD_UP = 12, i.Gamepad.XBOX360_DPAD_DOWN = 13, i.Gamepad.XBOX360_STICK_LEFT_X = 0, i.Gamepad.XBOX360_STICK_LEFT_Y = 1, i.Gamepad.XBOX360_STICK_RIGHT_X = 2, i.Gamepad.XBOX360_STICK_RIGHT_Y = 3, i.Gamepad.PS3XC_X = 0, i.Gamepad.PS3XC_CIRCLE = 1, i.Gamepad.PS3XC_SQUARE = 2, i.Gamepad.PS3XC_TRIANGLE = 3, i.Gamepad.PS3XC_L1 = 4, i.Gamepad.PS3XC_R1 = 5, i.Gamepad.PS3XC_L2 = 6, i.Gamepad.PS3XC_R2 = 7, i.Gamepad.PS3XC_SELECT = 8, i.Gamepad.PS3XC_START = 9, i.Gamepad.PS3XC_STICK_LEFT_BUTTON = 10, i.Gamepad.PS3XC_STICK_RIGHT_BUTTON = 11, i.Gamepad.PS3XC_DPAD_UP = 12, i.Gamepad.PS3XC_DPAD_DOWN = 13, i.Gamepad.PS3XC_DPAD_LEFT = 14, i.Gamepad.PS3XC_DPAD_RIGHT = 15, i.Gamepad.PS3XC_STICK_LEFT_X = 0, i.Gamepad.PS3XC_STICK_LEFT_Y = 1, i.Gamepad.PS3XC_STICK_RIGHT_X = 2, i.Gamepad.PS3XC_STICK_RIGHT_Y = 3, i.SinglePad = function(t, e) { this.game = t, this.index = null, this.connected = !1, this.callbackContext = this, this.onConnectCallback = null, this.onDisconnectCallback = null, this.onDownCallback = null, this.onUpCallback = null, this.onAxisCallback = null, this.onFloatCallback = null, this.deadZone = .26, this._padParent = e, this._rawPad = null, this._prevTimestamp = null, this._buttons = [], this._buttonsLen = 0, this._axes = [], this._axesLen = 0 }, i.SinglePad.prototype = { addCallbacks: function(t, e) { void 0 !== e && (this.onConnectCallback = "function" == typeof e.onConnect ? e.onConnect : this.onConnectCallback, this.onDisconnectCallback = "function" == typeof e.onDisconnect ? e.onDisconnect : this.onDisconnectCallback, this.onDownCallback = "function" == typeof e.onDown ? e.onDown : this.onDownCallback, this.onUpCallback = "function" == typeof e.onUp ? e.onUp : this.onUpCallback, this.onAxisCallback = "function" == typeof e.onAxis ? e.onAxis : this.onAxisCallback, this.onFloatCallback = "function" == typeof e.onFloat ? e.onFloat : this.onFloatCallback, this.callbackContext = t) }, getButton: function(t) { return this._buttons[t] ? this._buttons[t] : null }, pollStatus: function() { if (this.connected && this.game.input.enabled && this.game.input.gamepad.enabled && (!this._rawPad.timestamp || this._rawPad.timestamp !== this._prevTimestamp)) { for (var t = 0; t < this._buttonsLen; t++) { var e = isNaN(this._rawPad.buttons[t]) ? this._rawPad.buttons[t].value : this._rawPad.buttons[t];
                        e !== this._buttons[t].value && (1 === e ? this.processButtonDown(t, e) : 0 === e ? this.processButtonUp(t, e) : this.processButtonFloat(t, e)) } for (var i = 0; i < this._axesLen; i++) { var n = this._rawPad.axes[i];
                        n > 0 && n > this.deadZone || n < 0 && n < -this.deadZone ? this.processAxisChange(i, n) : this.processAxisChange(i, 0) } this._prevTimestamp = this._rawPad.timestamp } }, connect: function(t) { var e = !this.connected;
                this.connected = !0, this.index = t.index, this._rawPad = t, this._buttons = [], this._buttonsLen = t.buttons.length, this._axes = [], this._axesLen = t.axes.length; for (var n = 0; n < this._axesLen; n++) this._axes[n] = t.axes[n]; for (var s in t.buttons) s = parseInt(s, 10), this._buttons[s] = new i.DeviceButton(this, s);
                e && this._padParent.onConnectCallback && this._padParent.onConnectCallback.call(this._padParent.callbackContext, this.index), e && this.onConnectCallback && this.onConnectCallback.call(this.callbackContext) }, disconnect: function() { var t = this.connected,
                    e = this.index;
                this.connected = !1, this.index = null, this._rawPad = void 0; for (var i = 0; i < this._buttonsLen; i++) this._buttons[i].destroy();
                this._buttons = [], this._buttonsLen = 0, this._axes = [], this._axesLen = 0, t && this._padParent.onDisconnectCallback && this._padParent.onDisconnectCallback.call(this._padParent.callbackContext, e), t && this.onDisconnectCallback && this.onDisconnectCallback.call(this.callbackContext) }, destroy: function() { this._rawPad = void 0; for (var t = 0; t < this._buttonsLen; t++) this._buttons[t].destroy();
                this._buttons = [], this._buttonsLen = 0, this._axes = [], this._axesLen = 0, this.onConnectCallback = null, this.onDisconnectCallback = null, this.onDownCallback = null, this.onUpCallback = null, this.onAxisCallback = null, this.onFloatCallback = null }, processAxisChange: function(t, e) { this._axes[t] !== e && (this._axes[t] = e, this._padParent.onAxisCallback && this._padParent.onAxisCallback.call(this._padParent.callbackContext, this, t, e), this.onAxisCallback && this.onAxisCallback.call(this.callbackContext, this, t, e)) }, processButtonDown: function(t, e) { this._buttons[t] && this._buttons[t].start(null, e), this._padParent.onDownCallback && this._padParent.onDownCallback.call(this._padParent.callbackContext, t, e, this.index), this.onDownCallback && this.onDownCallback.call(this.callbackContext, t, e) }, processButtonUp: function(t, e) { this._padParent.onUpCallback && this._padParent.onUpCallback.call(this._padParent.callbackContext, t, e, this.index), this.onUpCallback && this.onUpCallback.call(this.callbackContext, t, e), this._buttons[t] && this._buttons[t].stop(null, e) }, processButtonFloat: function(t, e) { this._padParent.onFloatCallback && this._padParent.onFloatCallback.call(this._padParent.callbackContext, t, e, this.index), this.onFloatCallback && this.onFloatCallback.call(this.callbackContext, t, e), this._buttons[t] && this._buttons[t].padFloat(e) }, axis: function(t) { return !!this._axes[t] && this._axes[t] }, isDown: function(t) { return !!this._buttons[t] && this._buttons[t].isDown }, isUp: function(t) { return !!this._buttons[t] && this._buttons[t].isUp }, justReleased: function(t, e) { if (this._buttons[t]) return this._buttons[t].justReleased(e) }, justPressed: function(t, e) { if (this._buttons[t]) return this._buttons[t].justPressed(e) }, buttonValue: function(t) { return this._buttons[t] ? this._buttons[t].value : null }, reset: function() { for (var t = 0; t < this._axes.length; t++) this._axes[t] = 0 } }, i.SinglePad.prototype.constructor = i.SinglePad, i.Key = function(t, e) { this.game = t, this._enabled = !0, this.event = null, this.isDown = !1, this.isUp = !0, this.altKey = !1, this.ctrlKey = !1, this.shiftKey = !1, this.timeDown = 0, this.duration = 0, this.timeUp = -2500, this.repeats = 0, this.keyCode = e, this.onDown = new i.Signal, this.onHoldCallback = null, this.onHoldContext = null, this.onUp = new i.Signal, this._justDown = !1, this._justUp = !1 }, i.Key.prototype = { update: function() { this._enabled && this.isDown && (this.duration = this.game.time.time - this.timeDown, this.repeats++, this.onHoldCallback && this.onHoldCallback.call(this.onHoldContext, this)) }, processKeyDown: function(t) { this._enabled && (this.event = t, this.isDown || (this.altKey = t.altKey, this.ctrlKey = t.ctrlKey, this.shiftKey = t.shiftKey, this.isDown = !0, this.isUp = !1, this.timeDown = this.game.time.time, this.duration = 0, this.repeats = 0, this._justDown = !0, this.onDown.dispatch(this))) }, processKeyUp: function(t) { this._enabled && (this.event = t, this.isUp || (this.isDown = !1, this.isUp = !0, this.timeUp = this.game.time.time, this.duration = this.game.time.time - this.timeDown, this._justUp = !0, this.onUp.dispatch(this))) }, reset: function(t) { void 0 === t && (t = !0), this.isDown = !1, this.isUp = !0, this.timeUp = this.game.time.time, this.duration = 0, this._enabled = !0, this._justDown = !1, this._justUp = !1, t && (this.onDown.removeAll(), this.onUp.removeAll(), this.onHoldCallback = null, this.onHoldContext = null) }, downDuration: function(t) { return void 0 === t && (t = 50), this.isDown && this.duration < t }, upDuration: function(t) { return void 0 === t && (t = 50), !this.isDown && this.game.time.time - this.timeUp < t } }, Object.defineProperty(i.Key.prototype, "justDown", { get: function() { var t = this._justDown; return this._justDown = !1, t } }), Object.defineProperty(i.Key.prototype, "justUp", { get: function() { var t = this._justUp; return this._justUp = !1, t } }), Object.defineProperty(i.Key.prototype, "enabled", { get: function() { return this._enabled }, set: function(t) {
                (t = !!t) !== this._enabled && (t || this.reset(!1), this._enabled = t) } }), i.Key.prototype.constructor = i.Key, i.Keyboard = function(t) { this.game = t, this.enabled = !0, this.event = null, this.pressEvent = null, this.callbackContext = this, this.onDownCallback = null, this.onPressCallback = null, this.onUpCallback = null, this._keys = [], this._capture = [], this._onKeyDown = null, this._onKeyPress = null, this._onKeyUp = null, this._i = 0, this._k = 0 }, i.Keyboard.prototype = { addCallbacks: function(t, e, i, n) { this.callbackContext = t, void 0 !== e && null !== e && (this.onDownCallback = e), void 0 !== i && null !== i && (this.onUpCallback = i), void 0 !== n && null !== n && (this.onPressCallback = n) }, addKey: function(t) { return this._keys[t] || (this._keys[t] = new i.Key(this.game, t), this.addKeyCapture(t)), this._keys[t] }, addKeys: function(t) { var e = {}; for (var i in t) e[i] = this.addKey(t[i]); return e }, removeKey: function(t) { this._keys[t] && (this._keys[t] = null, this.removeKeyCapture(t)) }, createCursorKeys: function() { return this.addKeys({ up: i.KeyCode.UP, down: i.KeyCode.DOWN, left: i.KeyCode.LEFT, right: i.KeyCode.RIGHT }) }, start: function() { if (!this.game.device.cocoonJS && null === this._onKeyDown) { var t = this;
                    this._onKeyDown = function(e) { return t.processKeyDown(e) }, this._onKeyUp = function(e) { return t.processKeyUp(e) }, this._onKeyPress = function(e) { return t.processKeyPress(e) }, window.addEventListener("keydown", this._onKeyDown, !1), window.addEventListener("keyup", this._onKeyUp, !1), window.addEventListener("keypress", this._onKeyPress, !1) } }, stop: function() { window.removeEventListener("keydown", this._onKeyDown), window.removeEventListener("keyup", this._onKeyUp), window.removeEventListener("keypress", this._onKeyPress), this._onKeyDown = null, this._onKeyUp = null, this._onKeyPress = null }, destroy: function() { this.stop(), this.clearCaptures(), this._keys.length = 0, this._i = 0 }, addKeyCapture: function(t) { if ("object" == typeof t)
                    for (var e in t) this._capture[t[e]] = !0;
                else this._capture[t] = !0 }, removeKeyCapture: function(t) { delete this._capture[t] }, clearCaptures: function() { this._capture = {} }, update: function() { for (this._i = this._keys.length; this._i--;) this._keys[this._i] && this._keys[this._i].update() }, processKeyDown: function(t) { if (this.event = t, this.game.input.enabled && this.enabled) { var e = t.keyCode;
                    this._capture[e] && t.preventDefault(), this._keys[e] || (this._keys[e] = new i.Key(this.game, e)), this._keys[e].processKeyDown(t), this._k = e, this.onDownCallback && this.onDownCallback.call(this.callbackContext, t) } }, processKeyPress: function(t) { this.pressEvent = t, this.game.input.enabled && this.enabled && this.onPressCallback && this.onPressCallback.call(this.callbackContext, String.fromCharCode(t.charCode), t) }, processKeyUp: function(t) { if (this.event = t, this.game.input.enabled && this.enabled) { var e = t.keyCode;
                    this._capture[e] && t.preventDefault(), this._keys[e] || (this._keys[e] = new i.Key(this.game, e)), this._keys[e].processKeyUp(t), this.onUpCallback && this.onUpCallback.call(this.callbackContext, t) } }, reset: function(t) { void 0 === t && (t = !0), this.event = null; for (var e = this._keys.length; e--;) this._keys[e] && this._keys[e].reset(t) }, downDuration: function(t, e) { return this._keys[t] ? this._keys[t].downDuration(e) : null }, upDuration: function(t, e) { return this._keys[t] ? this._keys[t].upDuration(e) : null }, isDown: function(t) { return this._keys[t] ? this._keys[t].isDown : null } }, Object.defineProperty(i.Keyboard.prototype, "lastChar", { get: function() { return 32 === this.event.charCode ? "" : String.fromCharCode(this.pressEvent.charCode) } }), Object.defineProperty(i.Keyboard.prototype, "lastKey", { get: function() { return this._keys[this._k] } }), i.Keyboard.prototype.constructor = i.Keyboard, i.KeyCode = { A: "A".charCodeAt(0), B: "B".charCodeAt(0), C: "C".charCodeAt(0), D: "D".charCodeAt(0), E: "E".charCodeAt(0), F: "F".charCodeAt(0), G: "G".charCodeAt(0), H: "H".charCodeAt(0), I: "I".charCodeAt(0), J: "J".charCodeAt(0), K: "K".charCodeAt(0), L: "L".charCodeAt(0), M: "M".charCodeAt(0), N: "N".charCodeAt(0), O: "O".charCodeAt(0), P: "P".charCodeAt(0), Q: "Q".charCodeAt(0), R: "R".charCodeAt(0), S: "S".charCodeAt(0), T: "T".charCodeAt(0), U: "U".charCodeAt(0), V: "V".charCodeAt(0), W: "W".charCodeAt(0), X: "X".charCodeAt(0), Y: "Y".charCodeAt(0), Z: "Z".charCodeAt(0), ZERO: "0".charCodeAt(0), ONE: "1".charCodeAt(0), TWO: "2".charCodeAt(0), THREE: "3".charCodeAt(0), FOUR: "4".charCodeAt(0), FIVE: "5".charCodeAt(0), SIX: "6".charCodeAt(0), SEVEN: "7".charCodeAt(0), EIGHT: "8".charCodeAt(0), NINE: "9".charCodeAt(0), NUMPAD_0: 96, NUMPAD_1: 97, NUMPAD_2: 98, NUMPAD_3: 99, NUMPAD_4: 100, NUMPAD_5: 101, NUMPAD_6: 102, NUMPAD_7: 103, NUMPAD_8: 104, NUMPAD_9: 105, NUMPAD_MULTIPLY: 106, NUMPAD_ADD: 107, NUMPAD_ENTER: 108, NUMPAD_SUBTRACT: 109, NUMPAD_DECIMAL: 110, NUMPAD_DIVIDE: 111, F1: 112, F2: 113, F3: 114, F4: 115, F5: 116, F6: 117, F7: 118, F8: 119, F9: 120, F10: 121, F11: 122, F12: 123, F13: 124, F14: 125, F15: 126, COLON: 186, EQUALS: 187, COMMA: 188, UNDERSCORE: 189, PERIOD: 190, QUESTION_MARK: 191, TILDE: 192, OPEN_BRACKET: 219, BACKWARD_SLASH: 220, CLOSED_BRACKET: 221, QUOTES: 222, BACKSPACE: 8, TAB: 9, CLEAR: 12, ENTER: 13, SHIFT: 16, CONTROL: 17, ALT: 18, CAPS_LOCK: 20, ESC: 27, SPACEBAR: 32, PAGE_UP: 33, PAGE_DOWN: 34, END: 35, HOME: 36, LEFT: 37, UP: 38, RIGHT: 39, DOWN: 40, PLUS: 43, MINUS: 44, INSERT: 45, DELETE: 46, HELP: 47, NUM_LOCK: 144 }; for (var s in i.KeyCode) i.KeyCode.hasOwnProperty(s) && !s.match(/[a-z]/) && (i.Keyboard[s] = i.KeyCode[s]);
        i.Component = function() {}, i.Component.Angle = function() {}, i.Component.Angle.prototype = { angle: { get: function() { return i.Math.wrapAngle(i.Math.radToDeg(this.rotation)) }, set: function(t) { this.rotation = i.Math.degToRad(i.Math.wrapAngle(t)) } } }, i.Component.Animation = function() {}, i.Component.Animation.prototype = { play: function(t, e, i, n) { if (this.animations) return this.animations.play(t, e, i, n) } }, i.Component.AutoCull = function() {}, i.Component.AutoCull.prototype = { autoCull: !1, inCamera: { get: function() { return this.autoCull || this.checkWorldBounds || (this._bounds.copyFrom(this.getBounds()), this._bounds.x += this.game.camera.view.x, this._bounds.y += this.game.camera.view.y), this.game.world.camera.view.intersects(this._bounds) } } }, i.Component.Bounds = function() {}, i.Component.Bounds.prototype = { offsetX: { get: function() { return this.anchor.x * this.width } }, offsetY: { get: function() { return this.anchor.y * this.height } }, centerX: { get: function() { return this.x - this.offsetX + .5 * this.width }, set: function(t) { this.x = t + this.offsetX - .5 * this.width } }, centerY: { get: function() { return this.y - this.offsetY + .5 * this.height }, set: function(t) { this.y = t + this.offsetY - .5 * this.height } }, left: { get: function() { return this.x - this.offsetX }, set: function(t) { this.x = t + this.offsetX } }, right: { get: function() { return this.x + this.width - this.offsetX }, set: function(t) { this.x = t - this.width + this.offsetX } }, top: { get: function() { return this.y - this.offsetY }, set: function(t) { this.y = t + this.offsetY } }, bottom: { get: function() { return this.y + this.height - this.offsetY }, set: function(t) { this.y = t - this.height + this.offsetY } }, alignIn: function(t, e, n, s) { switch (void 0 === n && (n = 0), void 0 === s && (s = 0), e) {
                    default:
                    case i.TOP_LEFT:
                        this.left = t.left - n, this.top = t.top - s; break;
                    case i.TOP_CENTER:
                        this.centerX = t.centerX + n, this.top = t.top - s; break;
                    case i.TOP_RIGHT:
                        this.right = t.right + n, this.top = t.top - s; break;
                    case i.LEFT_CENTER:
                        this.left = t.left - n, this.centerY = t.centerY + s; break;
                    case i.CENTER:
                        this.centerX = t.centerX + n, this.centerY = t.centerY + s; break;
                    case i.RIGHT_CENTER:
                        this.right = t.right + n, this.centerY = t.centerY + s; break;
                    case i.BOTTOM_LEFT:
                        this.left = t.left - n, this.bottom = t.bottom + s; break;
                    case i.BOTTOM_CENTER:
                        this.centerX = t.centerX + n, this.bottom = t.bottom + s; break;
                    case i.BOTTOM_RIGHT:
                        this.right = t.right + n, this.bottom = t.bottom + s } return this }, alignTo: function(t, e, n, s) { switch (void 0 === n && (n = 0), void 0 === s && (s = 0), e) {
                    default:
                    case i.TOP_LEFT:
                        this.left = t.left - n, this.bottom = t.top - s; break;
                    case i.TOP_CENTER:
                        this.centerX = t.centerX + n, this.bottom = t.top - s; break;
                    case i.TOP_RIGHT:
                        this.right = t.right + n, this.bottom = t.top - s; break;
                    case i.LEFT_TOP:
                        this.right = t.left - n, this.top = t.top - s; break;
                    case i.LEFT_CENTER:
                        this.right = t.left - n, this.centerY = t.centerY + s; break;
                    case i.LEFT_BOTTOM:
                        this.right = t.left - n, this.bottom = t.bottom + s; break;
                    case i.RIGHT_TOP:
                        this.left = t.right + n, this.top = t.top - s; break;
                    case i.RIGHT_CENTER:
                        this.left = t.right + n, this.centerY = t.centerY + s; break;
                    case i.RIGHT_BOTTOM:
                        this.left = t.right + n, this.bottom = t.bottom + s; break;
                    case i.BOTTOM_LEFT:
                        this.left = t.left - n, this.top = t.bottom + s; break;
                    case i.BOTTOM_CENTER:
                        this.centerX = t.centerX + n, this.top = t.bottom + s; break;
                    case i.BOTTOM_RIGHT:
                        this.right = t.right + n, this.top = t.bottom + s } return this } }, i.Group.prototype.alignIn = i.Component.Bounds.prototype.alignIn, i.Group.prototype.alignTo = i.Component.Bounds.prototype.alignTo, i.Component.BringToTop = function() {}, i.Component.BringToTop.prototype.bringToTop = function() { return this.parent && this.parent.bringToTop(this), this }, i.Component.BringToTop.prototype.sendToBack = function() { return this.parent && this.parent.sendToBack(this), this }, i.Component.BringToTop.prototype.moveUp = function() { return this.parent && this.parent.moveUp(this), this }, i.Component.BringToTop.prototype.moveDown = function() { return this.parent && this.parent.moveDown(this), this }, i.Component.Core = function() {}, i.Component.Core.install = function(t) { i.Utils.mixinPrototype(this, i.Component.Core.prototype), this.components = {}; for (var e = 0; e < t.length; e++) { var n = t[e],
                    s = !1; "Destroy" === n && (s = !0), i.Utils.mixinPrototype(this, i.Component[n].prototype, s), this.components[n] = !0 } }, i.Component.Core.init = function(t, e, n, s, o) { this.game = t, this.key = s, this.data = {}, this.position.set(e, n), this.world = new i.Point(e, n), this.previousPosition = new i.Point(e, n), this.events = new i.Events(this), this._bounds = new i.Rectangle, this.components.PhysicsBody && (this.body = this.body), this.components.Animation && (this.animations = new i.AnimationManager(this)), this.components.LoadTexture && null !== s && this.loadTexture(s, o), this.components.FixedToCamera && (this.cameraOffset = new i.Point(e, n)) }, i.Component.Core.preUpdate = function() { if (!this.pendingDestroy) { if (this.previousPosition.set(this.world.x, this.world.y), this.previousRotation = this.rotation, !this.exists || !this.parent.exists) return this.renderOrderID = -1, !1;
                this.world.setTo(this.game.camera.x + this.worldTransform.tx, this.game.camera.y + this.worldTransform.ty), this.visible && (this.renderOrderID = this.game.stage.currentRenderOrderID++), this.animations && this.animations.update(), this.body && this.body.preUpdate(); for (var t = 0; t < this.children.length; t++) this.children[t].preUpdate(); return !0 } this.destroy() }, i.Component.Core.prototype = { game: null, name: "", data: {}, components: {}, z: 0, events: void 0, animations: void 0, key: "", world: null, debug: !1, previousPosition: null, previousRotation: 0, renderOrderID: 0, fresh: !0, pendingDestroy: !1, _bounds: null, _exists: !0, exists: { get: function() { return this._exists }, set: function(t) { t ? (this._exists = !0, this.body && this.body.type === i.Physics.P2JS && this.body.addToWorld(), this.visible = !0) : (this._exists = !1, this.body && this.body.type === i.Physics.P2JS && this.body.removeFromWorld(), this.visible = !1) } }, update: function() {}, postUpdate: function() { this.customRender && this.key.render(), this.components.PhysicsBody && i.Component.PhysicsBody.postUpdate.call(this), this.components.FixedToCamera && i.Component.FixedToCamera.postUpdate.call(this); for (var t = 0; t < this.children.length; t++) this.children[t].postUpdate() } }, i.Component.Crop = function() {}, i.Component.Crop.prototype = { cropRect: null, _crop: null, crop: function(t, e) { void 0 === e && (e = !1), t ? (e && null !== this.cropRect ? this.cropRect.setTo(t.x, t.y, t.width, t.height) : e && null === this.cropRect ? this.cropRect = new i.Rectangle(t.x, t.y, t.width, t.height) : this.cropRect = t, this.updateCrop()) : (this._crop = null, this.cropRect = null, this.resetFrame()) }, updateCrop: function() { if (this.cropRect) { var t = this.texture.crop.x,
                        e = this.texture.crop.y,
                        n = this.texture.crop.width,
                        s = this.texture.crop.height;
                    this._crop = i.Rectangle.clone(this.cropRect, this._crop), this._crop.x += this._frame.x, this._crop.y += this._frame.y; var o = Math.max(this._frame.x, this._crop.x),
                        a = Math.max(this._frame.y, this._crop.y),
                        r = Math.min(this._frame.right, this._crop.right) - o,
                        h = Math.min(this._frame.bottom, this._crop.bottom) - a;
                    this.texture.crop.x = o, this.texture.crop.y = a, this.texture.crop.width = r, this.texture.crop.height = h, this.texture.frame.width = Math.min(r, this.cropRect.width), this.texture.frame.height = Math.min(h, this.cropRect.height), this.texture.width = this.texture.frame.width, this.texture.height = this.texture.frame.height, this.texture._updateUvs(), 16777215 === this.tint || t === o && e === a && n === r && s === h || (this.texture.requiresReTint = !0) } } }, i.Component.Delta = function() {}, i.Component.Delta.prototype = { deltaX: { get: function() { return this.world.x - this.previousPosition.x } }, deltaY: { get: function() { return this.world.y - this.previousPosition.y } }, deltaZ: { get: function() { return this.rotation - this.previousRotation } } }, i.Component.Destroy = function() {}, i.Component.Destroy.prototype = { destroyPhase: !1, destroy: function(t, e) { if (null !== this.game && !this.destroyPhase) { void 0 === t && (t = !0), void 0 === e && (e = !1), this.destroyPhase = !0, this.events && this.events.onDestroy$dispatch(this), this.parent && (this.parent instanceof i.Group ? this.parent.remove(this) : this.parent.removeChild(this)), this.input && this.input.destroy(), this.animations && this.animations.destroy(), this.body && this.body.destroy(), this.events && this.events.destroy(), this.game.tweens.removeFrom(this); var n = this.children.length; if (t)
                        for (; n--;) this.children[n].destroy(t);
                    else
                        for (; n--;) this.removeChild(this.children[n]);
                    this._crop && (this._crop = null, this.cropRect = null), this._frame && (this._frame = null), i.Video && this.key instanceof i.Video && this.key.onChangeSource.remove(this.resizeFrame, this), i.BitmapText && this._glyphs && (this._glyphs = []), this.alive = !1, this.exists = !1, this.visible = !1, this.filters = null, this.mask = null, this.game = null, this.data = {}, this.renderable = !1, this.transformCallback && (this.transformCallback = null, this.transformCallbackContext = null), this.hitArea = null, this.parent = null, this.stage = null, this.worldTransform = null, this.filterArea = null, this._bounds = null, this._currentBounds = null, this._mask = null, this._destroyCachedSprite(), e && this.texture.destroy(!0), this.destroyPhase = !1, this.pendingDestroy = !1 } } }, i.Events = function(t) { this.parent = t }, i.Events.prototype = { destroy: function() { this._parent = null, this._onDestroy && this._onDestroy.dispose(), this._onAddedToGroup && this._onAddedToGroup.dispose(), this._onRemovedFromGroup && this._onRemovedFromGroup.dispose(), this._onRemovedFromWorld && this._onRemovedFromWorld.dispose(), this._onKilled && this._onKilled.dispose(), this._onRevived && this._onRevived.dispose(), this._onEnterBounds && this._onEnterBounds.dispose(), this._onOutOfBounds && this._onOutOfBounds.dispose(), this._onInputOver && this._onInputOver.dispose(), this._onInputOut && this._onInputOut.dispose(), this._onInputDown && this._onInputDown.dispose(), this._onInputUp && this._onInputUp.dispose(), this._onDragStart && this._onDragStart.dispose(), this._onDragUpdate && this._onDragUpdate.dispose(), this._onDragStop && this._onDragStop.dispose(), this._onAnimationStart && this._onAnimationStart.dispose(), this._onAnimationComplete && this._onAnimationComplete.dispose(), this._onAnimationLoop && this._onAnimationLoop.dispose() }, onAddedToGroup: null, onRemovedFromGroup: null, onRemovedFromWorld: null, onDestroy: null, onKilled: null, onRevived: null, onOutOfBounds: null, onEnterBounds: null, onInputOver: null, onInputOut: null, onInputDown: null, onInputUp: null, onDragStart: null, onDragUpdate: null, onDragStop: null, onAnimationStart: null, onAnimationComplete: null, onAnimationLoop: null }, i.Events.prototype.constructor = i.Events; for (var o in i.Events.prototype) i.Events.prototype.hasOwnProperty(o) && 0 === o.indexOf("on") && null === i.Events.prototype[o] && function(t, e) { "use strict";
            Object.defineProperty(i.Events.prototype, t, { get: function() { return this[e] || (this[e] = new i.Signal) } }), i.Events.prototype[t + "$dispatch"] = function() { return this[e] ? this[e].dispatch.apply(this[e], arguments) : null } }(o, "_" + o);
        i.Component.FixedToCamera = function() {}, i.Component.FixedToCamera.postUpdate = function() { this.fixedToCamera && (this.position.x = (this.game.camera.view.x + this.cameraOffset.x) / this.game.camera.scale.x, this.position.y = (this.game.camera.view.y + this.cameraOffset.y) / this.game.camera.scale.y) }, i.Component.FixedToCamera.prototype = { _fixedToCamera: !1, fixedToCamera: { get: function() { return this._fixedToCamera }, set: function(t) { t ? (this._fixedToCamera = !0, this.cameraOffset.set(this.x, this.y)) : this._fixedToCamera = !1 } }, cameraOffset: new i.Point }, i.Component.Health = function() {}, i.Component.Health.prototype = { health: 1, maxHealth: 100, damage: function(t) { return this.alive && (this.health -= t, this.health <= 0 && this.kill()), this }, setHealth: function(t) { return this.health = t, this.health > this.maxHealth && (this.health = this.maxHealth), this }, heal: function(t) { return this.alive && (this.health += t, this.health > this.maxHealth && (this.health = this.maxHealth)), this } }, i.Component.InCamera = function() {}, i.Component.InCamera.prototype = { inCamera: { get: function() { return this.game.world.camera.view.intersects(this._bounds) } } }, i.Component.InputEnabled = function() {}, i.Component.InputEnabled.prototype = { input: null, inputEnabled: { get: function() { return this.input && this.input.enabled }, set: function(t) { t ? null === this.input ? (this.input = new i.InputHandler(this), this.input.start()) : this.input && !this.input.enabled && this.input.start() : this.input && this.input.enabled && this.input.stop() } } }, i.Component.InWorld = function() {}, i.Component.InWorld.preUpdate = function() { if (this.autoCull || this.checkWorldBounds) { if (this._bounds.copyFrom(this.getBounds()), this._bounds.x += this.game.camera.view.x, this._bounds.y += this.game.camera.view.y, this.autoCull)
                    if (this.game.world.camera.view.intersects(this._bounds)) this.renderable = !0, this.game.world.camera.totalInView++;
                    else if (this.renderable = !1, this.outOfCameraBoundsKill) return this.kill(), !1; if (this.checkWorldBounds)
                    if (this._outOfBoundsFired && this.game.world.bounds.intersects(this._bounds)) this._outOfBoundsFired = !1, this.events.onEnterBounds$dispatch(this);
                    else if (!this._outOfBoundsFired && !this.game.world.bounds.intersects(this._bounds) && (this._outOfBoundsFired = !0, this.events.onOutOfBounds$dispatch(this), this.outOfBoundsKill)) return this.kill(), !1 } return !0 }, i.Component.InWorld.prototype = { checkWorldBounds: !1, outOfBoundsKill: !1, outOfCameraBoundsKill: !1, _outOfBoundsFired: !1, inWorld: { get: function() { return this.game.world.bounds.intersects(this.getBounds()) } } }, i.Component.LifeSpan = function() {}, i.Component.LifeSpan.preUpdate = function() { return !(this.lifespan > 0 && (this.lifespan -= this.game.time.physicsElapsedMS, this.lifespan <= 0)) || (this.kill(), !1) }, i.Component.LifeSpan.prototype = { alive: !0, lifespan: 0, revive: function(t) { return void 0 === t && (t = 100), this.alive = !0, this.exists = !0, this.visible = !0, "function" == typeof this.setHealth && this.setHealth(t), this.events && this.events.onRevived$dispatch(this), this }, kill: function() { return this.alive = !1, this.exists = !1, this.visible = !1, this.events && this.events.onKilled$dispatch(this), this } }, i.Component.LoadTexture = function() {}, i.Component.LoadTexture.prototype = { customRender: !1, _frame: null, loadTexture: function(t, e, n) { t === i.PENDING_ATLAS ? (t = e, e = 0) : e = e || 0, (n || void 0 === n) && this.animations && this.animations.stop(), this.key = t, this.customRender = !1; var s = this.game.cache,
                    o = !0,
                    a = !this.texture.baseTexture.scaleMode; if (i.RenderTexture && t instanceof i.RenderTexture) this.key = t.key, this.setTexture(t);
                else if (i.BitmapData && t instanceof i.BitmapData) this.customRender = !0, this.setTexture(t.texture), o = s.hasFrameData(t.key, i.Cache.BITMAPDATA) ? !this.animations.loadFrameData(s.getFrameData(t.key, i.Cache.BITMAPDATA), e) : !this.animations.loadFrameData(t.frameData, 0);
                else if (i.Video && t instanceof i.Video) { this.customRender = !0; var r = t.texture.valid;
                    this.setTexture(t.texture), this.setFrame(t.texture.frame.clone()), t.onChangeSource.add(this.resizeFrame, this), this.texture.valid = r } else if (i.Tilemap && t instanceof i.TilemapLayer) this.setTexture(PIXI.Texture.fromCanvas(t.canvas));
                else if (t instanceof PIXI.Texture) this.setTexture(t);
                else { var h = s.getImage(t, !0);
                    this.key = h.key, this.setTexture(new PIXI.Texture(h.base)), this.texture.baseTexture.skipRender = "__default" === t, o = !this.animations.loadFrameData(h.frameData, e) } o && (this._frame = i.Rectangle.clone(this.texture.frame)), a || (this.texture.baseTexture.scaleMode = 1) }, setFrame: function(t) { this._frame = t, this.texture.frame.x = t.x, this.texture.frame.y = t.y, this.texture.frame.width = t.width, this.texture.frame.height = t.height, this.texture.crop.x = t.x, this.texture.crop.y = t.y, this.texture.crop.width = t.width, this.texture.crop.height = t.height, t.trimmed ? (this.texture.trim ? (this.texture.trim.x = t.spriteSourceSizeX, this.texture.trim.y = t.spriteSourceSizeY, this.texture.trim.width = t.sourceSizeW, this.texture.trim.height = t.sourceSizeH) : this.texture.trim = { x: t.spriteSourceSizeX, y: t.spriteSourceSizeY, width: t.sourceSizeW, height: t.sourceSizeH }, this.texture.width = t.sourceSizeW, this.texture.height = t.sourceSizeH, this.texture.frame.width = t.sourceSizeW, this.texture.frame.height = t.sourceSizeH) : !t.trimmed && this.texture.trim && (this.texture.trim = null), this.cropRect && this.updateCrop(), this.texture.requiresReTint = !0, this.texture._updateUvs(), this.tilingTexture && (this.refreshTexture = !0) }, resizeFrame: function(t, e, i) { this.texture.frame.resize(e, i), this.texture.setFrame(this.texture.frame) }, resetFrame: function() { this._frame && this.setFrame(this._frame) }, frame: { get: function() { return this.animations.frame }, set: function(t) { this.animations.frame = t } }, frameName: { get: function() { return this.animations.frameName }, set: function(t) { this.animations.frameName = t } } }, i.Component.Overlap = function() {}, i.Component.Overlap.prototype = { overlap: function(t) { return i.Rectangle.intersects(this.getBounds(), t.getBounds()) } }, i.Component.PhysicsBody = function() {}, i.Component.PhysicsBody.preUpdate = function() { return this.fresh && this.exists ? (this.world.setTo(this.parent.position.x + this.position.x, this.parent.position.y + this.position.y), this.worldTransform.tx = this.world.x, this.worldTransform.ty = this.world.y, this.previousPosition.set(this.world.x, this.world.y), this.previousRotation = this.rotation, this.body && this.body.preUpdate(), this.fresh = !1, !1) : (this.previousPosition.set(this.world.x, this.world.y), this.previousRotation = this.rotation, !(!this._exists || !this.parent.exists) || (this.renderOrderID = -1, !1)) }, i.Component.PhysicsBody.postUpdate = function() { this.exists && this.body && this.body.postUpdate() }, i.Component.PhysicsBody.prototype = { body: null, x: { get: function() { return this.position.x }, set: function(t) { this.position.x = t, this.body && !this.body.dirty && (this.body._reset = !0) } }, y: { get: function() { return this.position.y }, set: function(t) { this.position.y = t, this.body && !this.body.dirty && (this.body._reset = !0) } } }, i.Component.Reset = function() {}, i.Component.Reset.prototype.reset = function(t, e, i) { return void 0 === i && (i = 1), this.world.set(t, e), this.position.set(t, e), this.fresh = !0, this.exists = !0, this.visible = !0, this.renderable = !0, this.components.InWorld && (this._outOfBoundsFired = !1), this.components.LifeSpan && (this.alive = !0, this.health = i), this.components.PhysicsBody && this.body && this.body.reset(t, e, !1, !1), this }, i.Component.ScaleMinMax = function() {}, i.Component.ScaleMinMax.prototype = { transformCallback: null, transformCallbackContext: this, scaleMin: null, scaleMax: null, checkTransform: function(t) { this.scaleMin && (t.a < this.scaleMin.x && (t.a = this.scaleMin.x), t.d < this.scaleMin.y && (t.d = this.scaleMin.y)), this.scaleMax && (t.a > this.scaleMax.x && (t.a = this.scaleMax.x), t.d > this.scaleMax.y && (t.d = this.scaleMax.y)) }, setScaleMinMax: function(t, e, n, s) { void 0 === e ? e = n = s = t : void 0 === n && (n = s = e, e = t), null === t ? this.scaleMin = null : this.scaleMin ? this.scaleMin.set(t, e) : this.scaleMin = new i.Point(t, e), null === n ? this.scaleMax = null : this.scaleMax ? this.scaleMax.set(n, s) : this.scaleMax = new i.Point(n, s), null === this.scaleMin ? this.transformCallback = null : (this.transformCallback = this.checkTransform, this.transformCallbackContext = this) } }, i.Component.Smoothed = function() {}, i.Component.Smoothed.prototype = { smoothed: { get: function() { return !this.texture.baseTexture.scaleMode }, set: function(t) { t ? this.texture && (this.texture.baseTexture.scaleMode = 0) : this.texture && (this.texture.baseTexture.scaleMode = 1) } } }, i.GameObjectFactory = function(t) { this.game = t, this.world = this.game.world }, i.GameObjectFactory.prototype = { existing: function(t) { return this.world.add(t) }, weapon: function(t, e, n, s) { var o = this.game.plugins.add(i.Weapon); return o.createBullets(t, e, n, s), o }, image: function(t, e, n, s, o) { return void 0 === o && (o = this.world), o.add(new i.Image(this.game, t, e, n, s)) }, sprite: function(t, e, i, n, s) { return void 0 === s && (s = this.world), s.create(t, e, i, n) }, creature: function(t, e, n, s, o) { void 0 === o && (o = this.world); var a = new i.Creature(this.game, t, e, n, s); return o.add(a), a }, tween: function(t) { return this.game.tweens.create(t) }, group: function(t, e, n, s, o) { return new i.Group(this.game, t, e, n, s, o) }, physicsGroup: function(t, e, n, s) { return new i.Group(this.game, e, n, s, !0, t) }, spriteBatch: function(t, e, n) { return void 0 === t && (t = null), void 0 === e && (e = "group"), void 0 === n && (n = !1), new i.SpriteBatch(this.game, t, e, n) }, audio: function(t, e, i, n) { return this.game.sound.add(t, e, i, n) }, sound: function(t, e, i, n) { return this.game.sound.add(t, e, i, n) }, audioSprite: function(t) { return this.game.sound.addSprite(t) }, tileSprite: function(t, e, n, s, o, a, r) { return void 0 === r && (r = this.world), r.add(new i.TileSprite(this.game, t, e, n, s, o, a)) }, rope: function(t, e, n, s, o, a) { return void 0 === a && (a = this.world), a.add(new i.Rope(this.game, t, e, n, s, o)) }, text: function(t, e, n, s, o) { return void 0 === o && (o = this.world), o.add(new i.Text(this.game, t, e, n, s)) }, button: function(t, e, n, s, o, a, r, h, l, c) { return void 0 === c && (c = this.world), c.add(new i.Button(this.game, t, e, n, s, o, a, r, h, l)) }, graphics: function(t, e, n) { return void 0 === n && (n = this.world), n.add(new i.Graphics(this.game, t, e)) }, emitter: function(t, e, n) { return this.game.particles.add(new i.Particles.Arcade.Emitter(this.game, t, e, n)) }, retroFont: function(t, e, n, s, o, a, r, h, l) { return new i.RetroFont(this.game, t, e, n, s, o, a, r, h, l) }, bitmapText: function(t, e, n, s, o, a) { return void 0 === a && (a = this.world), a.add(new i.BitmapText(this.game, t, e, n, s, o)) }, tilemap: function(t, e, n, s, o) { return new i.Tilemap(this.game, t, e, n, s, o) }, renderTexture: function(t, e, n, s) { void 0 !== n && "" !== n || (n = this.game.rnd.uuid()), void 0 === s && (s = !1); var o = new i.RenderTexture(this.game, t, e, n); return s && this.game.cache.addRenderTexture(n, o), o }, video: function(t, e) { return new i.Video(this.game, t, e) }, bitmapData: function(t, e, n, s) { void 0 === s && (s = !1), void 0 !== n && "" !== n || (n = this.game.rnd.uuid()); var o = new i.BitmapData(this.game, n, t, e); return s && this.game.cache.addBitmapData(n, o), o }, filter: function(t) { var e = Array.prototype.slice.call(arguments, 1); return (t = new i.Filter[t](this.game)).init.apply(t, e), t }, plugin: function(t) { return this.game.plugins.add(t) } }, i.GameObjectFactory.prototype.constructor = i.GameObjectFactory, i.GameObjectCreator = function(t) { this.game = t, this.world = this.game.world }, i.GameObjectCreator.prototype = { image: function(t, e, n, s) { return new i.Image(this.game, t, e, n, s) }, sprite: function(t, e, n, s) { return new i.Sprite(this.game, t, e, n, s) }, tween: function(t) { return new i.Tween(t, this.game, this.game.tweens) }, group: function(t, e, n, s, o) { return new i.Group(this.game, t, e, n, s, o) }, spriteBatch: function(t, e, n) { return void 0 === e && (e = "group"), void 0 === n && (n = !1), new i.SpriteBatch(this.game, t, e, n) }, audio: function(t, e, i, n) { return this.game.sound.add(t, e, i, n) }, audioSprite: function(t) { return this.game.sound.addSprite(t) }, sound: function(t, e, i, n) { return this.game.sound.add(t, e, i, n) }, tileSprite: function(t, e, n, s, o, a) { return new i.TileSprite(this.game, t, e, n, s, o, a) }, rope: function(t, e, n, s, o) { return new i.Rope(this.game, t, e, n, s, o) }, text: function(t, e, n, s) { return new i.Text(this.game, t, e, n, s) }, button: function(t, e, n, s, o, a, r, h, l) { return new i.Button(this.game, t, e, n, s, o, a, r, h, l) }, graphics: function(t, e) { return new i.Graphics(this.game, t, e) }, emitter: function(t, e, n) { return new i.Particles.Arcade.Emitter(this.game, t, e, n) }, retroFont: function(t, e, n, s, o, a, r, h, l) { return new i.RetroFont(this.game, t, e, n, s, o, a, r, h, l) }, bitmapText: function(t, e, n, s, o, a) { return new i.BitmapText(this.game, t, e, n, s, o, a) }, tilemap: function(t, e, n, s, o) { return new i.Tilemap(this.game, t, e, n, s, o) }, renderTexture: function(t, e, n, s) { void 0 !== n && "" !== n || (n = this.game.rnd.uuid()), void 0 === s && (s = !1); var o = new i.RenderTexture(this.game, t, e, n); return s && this.game.cache.addRenderTexture(n, o), o }, bitmapData: function(t, e, n, s) { void 0 === s && (s = !1), void 0 !== n && "" !== n || (n = this.game.rnd.uuid()); var o = new i.BitmapData(this.game, n, t, e); return s && this.game.cache.addBitmapData(n, o), o }, filter: function(t) { var e = Array.prototype.slice.call(arguments, 1); return (t = new i.Filter[t](this.game)).init.apply(t, e), t } }, i.GameObjectCreator.prototype.constructor = i.GameObjectCreator, i.Sprite = function(t, e, n, s, o) { e = e || 0, n = n || 0, s = s || null, o = o || null, this.type = i.SPRITE, this.physicsType = i.SPRITE, PIXI.Sprite.call(this, i.Cache.DEFAULT), i.Component.Core.init.call(this, t, e, n, s, o) }, i.Sprite.prototype = Object.create(PIXI.Sprite.prototype), i.Sprite.prototype.constructor = i.Sprite, i.Component.Core.install.call(i.Sprite.prototype, ["Angle", "Animation", "AutoCull", "Bounds", "BringToTop", "Crop", "Delta", "Destroy", "FixedToCamera", "Health", "InCamera", "InputEnabled", "InWorld", "LifeSpan", "LoadTexture", "Overlap", "PhysicsBody", "Reset", "ScaleMinMax", "Smoothed"]), i.Sprite.prototype.preUpdatePhysics = i.Component.PhysicsBody.preUpdate, i.Sprite.prototype.preUpdateLifeSpan = i.Component.LifeSpan.preUpdate, i.Sprite.prototype.preUpdateInWorld = i.Component.InWorld.preUpdate, i.Sprite.prototype.preUpdateCore = i.Component.Core.preUpdate, i.Sprite.prototype.preUpdate = function() { return !!(this.preUpdatePhysics() && this.preUpdateLifeSpan() && this.preUpdateInWorld()) && this.preUpdateCore() }, i.Image = function(t, e, n, s, o) { e = e || 0, n = n || 0, s = s || null, o = o || null, this.type = i.IMAGE, PIXI.Sprite.call(this, i.Cache.DEFAULT), i.Component.Core.init.call(this, t, e, n, s, o) }, i.Image.prototype = Object.create(PIXI.Sprite.prototype), i.Image.prototype.constructor = i.Image, i.Component.Core.install.call(i.Image.prototype, ["Angle", "Animation", "AutoCull", "Bounds", "BringToTop", "Crop", "Destroy", "FixedToCamera", "InputEnabled", "LifeSpan", "LoadTexture", "Overlap", "Reset", "ScaleMinMax", "Smoothed"]), i.Image.prototype.preUpdateInWorld = i.Component.InWorld.preUpdate, i.Image.prototype.preUpdateCore = i.Component.Core.preUpdate, i.Image.prototype.preUpdate = function() { return !!this.preUpdateInWorld() && this.preUpdateCore() }, i.Button = function(t, e, n, s, o, a, r, h, l, c) { e = e || 0, n = n || 0, s = s || null, o = o || null, a = a || this, i.Image.call(this, t, e, n, s, h), this.type = i.BUTTON, this.physicsType = i.SPRITE, this._onOverFrame = null, this._onOutFrame = null, this._onDownFrame = null, this._onUpFrame = null, this.onOverSound = null, this.onOutSound = null, this.onDownSound = null, this.onUpSound = null, this.onOverSoundMarker = "", this.onOutSoundMarker = "", this.onDownSoundMarker = "", this.onUpSoundMarker = "", this.onInputOver = new i.Signal, this.onInputOut = new i.Signal, this.onInputDown = new i.Signal, this.onInputUp = new i.Signal, this.onOverMouseOnly = !0, this.justReleasedPreventsOver = i.PointerMode.TOUCH, this.freezeFrames = !1, this.forceOut = !1, this.inputEnabled = !0, this.input.start(0, !0), this.input.useHandCursor = !0, this.setFrames(r, h, l, c), null !== o && this.onInputUp.add(o, a), this.events.onInputOver.add(this.onInputOverHandler, this), this.events.onInputOut.add(this.onInputOutHandler, this), this.events.onInputDown.add(this.onInputDownHandler, this), this.events.onInputUp.add(this.onInputUpHandler, this), this.events.onRemovedFromWorld.add(this.removedFromWorld, this) }, i.Button.prototype = Object.create(i.Image.prototype), i.Button.prototype.constructor = i.Button;
        i.Button.prototype.clearFrames = function() { this.setFrames(null, null, null, null) }, i.Button.prototype.removedFromWorld = function() { this.inputEnabled = !1 }, i.Button.prototype.setStateFrame = function(t, e, i) { var n = "_on" + t + "Frame";
            null !== e ? (this[n] = e, i && this.changeStateFrame(t)) : this[n] = null }, i.Button.prototype.changeStateFrame = function(t) { if (this.freezeFrames) return !1; var e = this["_on" + t + "Frame"]; return "string" == typeof e ? (this.frameName = e, !0) : "number" == typeof e && (this.frame = e, !0) }, i.Button.prototype.setFrames = function(t, e, i, n) { this.setStateFrame("Over", t, this.input.pointerOver()), this.setStateFrame("Out", e, !this.input.pointerOver()), this.setStateFrame("Down", i, this.input.pointerDown()), this.setStateFrame("Up", n, this.input.pointerUp()) }, i.Button.prototype.setStateSound = function(t, e, n) { var s = "on" + t + "Sound",
                o = "on" + t + "SoundMarker";
            e instanceof i.Sound || e instanceof i.AudioSprite ? (this[s] = e, this[o] = "string" == typeof n ? n : "") : (this[s] = null, this[o] = "") }, i.Button.prototype.playStateSound = function(t) { var e = this["on" + t + "Sound"]; if (e) { var i = this["on" + t + "SoundMarker"]; return e.play(i), !0 } return !1 }, i.Button.prototype.setSounds = function(t, e, i, n, s, o, a, r) { this.setStateSound("Over", t, e), this.setStateSound("Out", s, o), this.setStateSound("Down", i, n), this.setStateSound("Up", a, r) }, i.Button.prototype.setOverSound = function(t, e) { this.setStateSound("Over", t, e) }, i.Button.prototype.setOutSound = function(t, e) { this.setStateSound("Out", t, e) }, i.Button.prototype.setDownSound = function(t, e) { this.setStateSound("Down", t, e) }, i.Button.prototype.setUpSound = function(t, e) { this.setStateSound("Up", t, e) }, i.Button.prototype.onInputOverHandler = function(t, e) { e.justReleased() && (this.justReleasedPreventsOver & e.pointerMode) === e.pointerMode || (this.changeStateFrame("Over"), this.onOverMouseOnly && !e.isMouse || (this.playStateSound("Over"), this.onInputOver && this.onInputOver.dispatch(this, e))) }, i.Button.prototype.onInputOutHandler = function(t, e) { this.changeStateFrame("Out"), this.playStateSound("Out"), this.onInputOut && this.onInputOut.dispatch(this, e) }, i.Button.prototype.onInputDownHandler = function(t, e) { this.changeStateFrame("Down"), this.playStateSound("Down"), this.onInputDown && this.onInputDown.dispatch(this, e) }, i.Button.prototype.onInputUpHandler = function(t, e, i) { this.playStateSound("Up"), this.onInputUp && this.onInputUp.dispatch(this, e, i), this.freezeFrames || (!0 === this.forceOut || (this.forceOut & e.pointerMode) === e.pointerMode ? this.changeStateFrame("Out") : this.changeStateFrame("Up") || (i ? this.changeStateFrame("Over") : this.changeStateFrame("Out"))) }, i.SpriteBatch = function(t, e, n, s) { void 0 !== e && null !== e || (e = t.world), PIXI.SpriteBatch.call(this), i.Group.call(this, t, e, n, s), this.type = i.SPRITEBATCH }, i.SpriteBatch.prototype = i.Utils.extend(!0, i.SpriteBatch.prototype, PIXI.SpriteBatch.prototype, i.Group.prototype), i.SpriteBatch.prototype.constructor = i.SpriteBatch, i.BitmapData = function(t, e, n, s, o) { void 0 !== n && 0 !== n || (n = 256), void 0 !== s && 0 !== s || (s = 256), void 0 === o && (o = !1), this.game = t, this.key = e, this.width = n, this.height = s, this.canvas = i.Canvas.create(this, n, s, null, o), this.context = this.canvas.getContext("2d", { alpha: !0 }), this.ctx = this.context, this.smoothProperty = t.renderType === i.CANVAS ? t.renderer.renderSession.smoothProperty : i.Canvas.getSmoothingPrefix(this.context), this.imageData = this.context.getImageData(0, 0, n, s), this.data = null, this.imageData && (this.data = this.imageData.data), this.pixels = null, this.data && (this.imageData.data.buffer ? (this.buffer = this.imageData.data.buffer, this.pixels = new Uint32Array(this.buffer)) : window.ArrayBuffer ? (this.buffer = new ArrayBuffer(this.imageData.data.length), this.pixels = new Uint32Array(this.buffer)) : this.pixels = this.imageData.data), this.baseTexture = new PIXI.BaseTexture(this.canvas), this.texture = new PIXI.Texture(this.baseTexture), this.frameData = new i.FrameData, this.textureFrame = this.frameData.addFrame(new i.Frame(0, 0, 0, n, s, "bitmapData")), this.texture.frame = this.textureFrame, this.type = i.BITMAPDATA, this.disableTextureUpload = !1, this.dirty = !1, this.cls = this.clear, this._image = null, this._pos = new i.Point, this._size = new i.Point, this._scale = new i.Point, this._rotate = 0, this._alpha = { prev: 1, current: 1 }, this._anchor = new i.Point, this._tempR = 0, this._tempG = 0, this._tempB = 0, this._circle = new i.Circle, this._swapCanvas = void 0 }, i.BitmapData.prototype = { move: function(t, e, i) { return 0 !== t && this.moveH(t, i), 0 !== e && this.moveV(e, i), this }, moveH: function(t, e) { void 0 === e && (e = !0), void 0 === this._swapCanvas && (this._swapCanvas = PIXI.CanvasPool.create(this, this.width, this.height)); var i = this._swapCanvas.getContext("2d"),
                    n = this.height,
                    s = this.canvas; if (i.clearRect(0, 0, this.width, this.height), t < 0) { t = Math.abs(t);
                    o = this.width - t;
                    e && i.drawImage(s, 0, 0, t, n, o, 0, t, n), i.drawImage(s, t, 0, o, n, 0, 0, o, n) } else { var o = this.width - t;
                    e && i.drawImage(s, o, 0, t, n, 0, 0, t, n), i.drawImage(s, 0, 0, o, n, t, 0, o, n) } return this.clear(), this.copy(this._swapCanvas) }, moveV: function(t, e) { void 0 === e && (e = !0), void 0 === this._swapCanvas && (this._swapCanvas = PIXI.CanvasPool.create(this, this.width, this.height)); var i = this._swapCanvas.getContext("2d"),
                    n = this.width,
                    s = this.canvas; if (i.clearRect(0, 0, this.width, this.height), t < 0) { t = Math.abs(t);
                    o = this.height - t;
                    e && i.drawImage(s, 0, 0, n, t, 0, o, n, t), i.drawImage(s, 0, t, n, o, 0, 0, n, o) } else { var o = this.height - t;
                    e && i.drawImage(s, 0, o, n, t, 0, 0, n, t), i.drawImage(s, 0, 0, n, o, 0, t, n, o) } return this.clear(), this.copy(this._swapCanvas) }, add: function(t) { if (Array.isArray(t))
                    for (var e = 0; e < t.length; e++) t[e].loadTexture && t[e].loadTexture(this);
                else t.loadTexture(this); return this }, load: function(t) { if ("string" == typeof t && (t = this.game.cache.getImage(t)), t) return this.resize(t.width, t.height), this.cls(), this.draw(t), this.update(), this }, clear: function(t, e, i, n) { return void 0 === t && (t = 0), void 0 === e && (e = 0), void 0 === i && (i = this.width), void 0 === n && (n = this.height), this.context.clearRect(t, e, i, n), this.dirty = !0, this }, fill: function(t, e, i, n) { return void 0 === n && (n = 1), this.context.fillStyle = "rgba(" + t + "," + e + "," + i + "," + n + ")", this.context.fillRect(0, 0, this.width, this.height), this.dirty = !0, this }, generateTexture: function(t) { var e = new Image;
                e.src = this.canvas.toDataURL("image/png"); var i = this.game.cache.addImage(t, "", e); return new PIXI.Texture(i.base) }, resize: function(t, e) { return t === this.width && e === this.height || (this.width = t, this.height = e, this.canvas.width = t, this.canvas.height = e, void 0 !== this._swapCanvas && (this._swapCanvas.width = t, this._swapCanvas.height = e), this.baseTexture.width = t, this.baseTexture.height = e, this.textureFrame.width = t, this.textureFrame.height = e, this.texture.width = t, this.texture.height = e, this.texture.crop.width = t, this.texture.crop.height = e, this.update(), this.dirty = !0), this }, update: function(t, e, i, n) { return void 0 === t && (t = 0), void 0 === e && (e = 0), void 0 === i && (i = Math.max(1, this.width)), void 0 === n && (n = Math.max(1, this.height)), this.imageData = this.context.getImageData(t, e, i, n), this.data = this.imageData.data, this.imageData.data.buffer ? (this.buffer = this.imageData.data.buffer, this.pixels = new Uint32Array(this.buffer)) : window.ArrayBuffer ? (this.buffer = new ArrayBuffer(this.imageData.data.length), this.pixels = new Uint32Array(this.buffer)) : this.pixels = this.imageData.data, this }, processPixelRGB: function(t, e, n, s, o, a) { void 0 === n && (n = 0), void 0 === s && (s = 0), void 0 === o && (o = this.width), void 0 === a && (a = this.height); for (var r = n + o, h = s + a, l = i.Color.createColor(), c = { r: 0, g: 0, b: 0, a: 0 }, u = !1, p = s; p < h; p++)
                    for (var d = n; d < r; d++) i.Color.unpackPixel(this.getPixel32(d, p), l), !1 !== (c = t.call(e, l, d, p)) && null !== c && void 0 !== c && (this.setPixel32(d, p, c.r, c.g, c.b, c.a, !1), u = !0); return u && (this.context.putImageData(this.imageData, 0, 0), this.dirty = !0), this }, processPixel: function(t, e, i, n, s, o) { void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = this.width), void 0 === o && (o = this.height); for (var a = i + s, r = n + o, h = 0, l = 0, c = !1, u = n; u < r; u++)
                    for (var p = i; p < a; p++) h = this.getPixel32(p, u), (l = t.call(e, h, p, u)) !== h && (this.pixels[u * this.width + p] = l, c = !0); return c && (this.context.putImageData(this.imageData, 0, 0), this.dirty = !0), this }, replaceRGB: function(t, e, n, s, o, a, r, h, l) { var c = 0,
                    u = 0,
                    p = this.width,
                    d = this.height,
                    m = i.Color.packPixel(t, e, n, s);
                void 0 !== l && l instanceof i.Rectangle && (c = l.x, u = l.y, p = l.width, d = l.height); for (var g = 0; g < d; g++)
                    for (var f = 0; f < p; f++) this.getPixel32(c + f, u + g) === m && this.setPixel32(c + f, u + g, o, a, r, h, !1); return this.context.putImageData(this.imageData, 0, 0), this.dirty = !0, this }, setHSL: function(t, e, n, s) { var o = t || 0 === t,
                    a = e || 0 === e,
                    r = n || 0 === n; if (o || a || r) { void 0 === s && (s = new i.Rectangle(0, 0, this.width, this.height)); for (var h = i.Color.createColor(), l = s.y; l < s.bottom; l++)
                        for (var c = s.x; c < s.right; c++) i.Color.unpackPixel(this.getPixel32(c, l), h, !0), o && (h.h = t), a && (h.s = e), r && (h.l = n), i.Color.HSLtoRGB(h.h, h.s, h.l, h), this.setPixel32(c, l, h.r, h.g, h.b, h.a, !1); return this.context.putImageData(this.imageData, 0, 0), this.dirty = !0, this } }, shiftHSL: function(t, e, n, s) { if (void 0 !== t && null !== t || (t = !1), void 0 !== e && null !== e || (e = !1), void 0 !== n && null !== n || (n = !1), t || e || n) { void 0 === s && (s = new i.Rectangle(0, 0, this.width, this.height)); for (var o = i.Color.createColor(), a = s.y; a < s.bottom; a++)
                        for (var r = s.x; r < s.right; r++) i.Color.unpackPixel(this.getPixel32(r, a), o, !0), t && (o.h = this.game.math.wrap(o.h + t, 0, 1)), e && (o.s = this.game.math.clamp(o.s + e, 0, 1)), n && (o.l = this.game.math.clamp(o.l + n, 0, 1)), i.Color.HSLtoRGB(o.h, o.s, o.l, o), this.setPixel32(r, a, o.r, o.g, o.b, o.a, !1); return this.context.putImageData(this.imageData, 0, 0), this.dirty = !0, this } }, setPixel32: function(t, e, n, s, o, a, r) { return void 0 === r && (r = !0), t >= 0 && t <= this.width && e >= 0 && e <= this.height && (i.Device.LITTLE_ENDIAN ? this.pixels[e * this.width + t] = a << 24 | o << 16 | s << 8 | n : this.pixels[e * this.width + t] = n << 24 | s << 16 | o << 8 | a, r && (this.context.putImageData(this.imageData, 0, 0), this.dirty = !0)), this }, setPixel: function(t, e, i, n, s, o) { return this.setPixel32(t, e, i, n, s, 255, o) }, getPixel: function(t, e, n) { n || (n = i.Color.createColor()); var s = ~~(t + e * this.width); return s *= 4, n.r = this.data[s], n.g = this.data[++s], n.b = this.data[++s], n.a = this.data[++s], n }, getPixel32: function(t, e) { if (t >= 0 && t <= this.width && e >= 0 && e <= this.height) return this.pixels[e * this.width + t] }, getPixelRGB: function(t, e, n, s, o) { return i.Color.unpackPixel(this.getPixel32(t, e), n, s, o) }, getPixels: function(t) { return this.context.getImageData(t.x, t.y, t.width, t.height) }, getFirstPixel: function(t) { void 0 === t && (t = 0); var e = i.Color.createColor(),
                    n = 0,
                    s = 0,
                    o = 1,
                    a = !1;
                1 === t ? (o = -1, s = this.height) : 3 === t && (o = -1, n = this.width);
                do { i.Color.unpackPixel(this.getPixel32(n, s), e), 0 === t || 1 === t ? ++n === this.width && (n = 0, ((s += o) >= this.height || s <= 0) && (a = !0)) : 2 !== t && 3 !== t || ++s === this.height && (s = 0, ((n += o) >= this.width || n <= 0) && (a = !0)) } while (0 === e.a && !a); return e.x = n, e.y = s, e }, getBounds: function(t) { return void 0 === t && (t = new i.Rectangle), t.x = this.getFirstPixel(2).x, t.x === this.width ? t.setTo(0, 0, 0, 0) : (t.y = this.getFirstPixel(0).y, t.width = this.getFirstPixel(3).x - t.x + 1, t.height = this.getFirstPixel(1).y - t.y + 1, t) }, addToWorld: function(t, e, i, n, s, o) { s = s || 1, o = o || 1; var a = this.game.add.image(t, e, this); return a.anchor.set(i, n), a.scale.set(s, o), a }, copy: function(t, e, n, s, o, a, r, h, l, c, u, p, d, m, g, f, y) { if (void 0 !== t && null !== t || (t = this), (t instanceof i.RenderTexture || t instanceof PIXI.RenderTexture) && (t = t.getCanvas()), this._image = t, t instanceof i.Sprite || t instanceof i.Image || t instanceof i.Text || t instanceof PIXI.Sprite) this._pos.set(t.texture.crop.x, t.texture.crop.y), this._size.set(t.texture.crop.width, t.texture.crop.height), this._scale.set(t.scale.x, t.scale.y), this._anchor.set(t.anchor.x, t.anchor.y), this._rotate = t.rotation, this._alpha.current = t.alpha, t.texture instanceof i.RenderTexture || t.texture instanceof PIXI.RenderTexture ? this._image = t.texture.getCanvas() : this._image = t.texture.baseTexture.source, void 0 !== a && null !== a || (a = t.x), void 0 !== r && null !== r || (r = t.y), t.texture.trim && (a += t.texture.trim.x - t.anchor.x * t.texture.trim.width, r += t.texture.trim.y - t.anchor.y * t.texture.trim.height), 16777215 !== t.tint && (t.cachedTint !== t.tint && (t.cachedTint = t.tint, t.tintedTexture = PIXI.CanvasTinter.getTintedTexture(t, t.tint)), this._image = t.tintedTexture, this._pos.set(0));
                else { if (this._pos.set(0), this._scale.set(1), this._anchor.set(0), this._rotate = 0, this._alpha.current = 1, t instanceof i.BitmapData) this._image = t.canvas;
                    else if ("string" == typeof t) { if (null === (t = this.game.cache.getImage(t))) return;
                        this._image = t } this._size.set(this._image.width, this._image.height) } if (void 0 !== e && null !== e || (e = 0), void 0 !== n && null !== n || (n = 0), s && (this._size.x = s), o && (this._size.y = o), void 0 !== a && null !== a || (a = e), void 0 !== r && null !== r || (r = n), void 0 !== h && null !== h || (h = this._size.x), void 0 !== l && null !== l || (l = this._size.y), "number" == typeof c && (this._rotate = c), "number" == typeof u && (this._anchor.x = u), "number" == typeof p && (this._anchor.y = p), "number" == typeof d && (this._scale.x = d), "number" == typeof m && (this._scale.y = m), "number" == typeof g && (this._alpha.current = g), void 0 === f && (f = null), void 0 === y && (y = !1), !(this._alpha.current <= 0 || 0 === this._scale.x || 0 === this._scale.y || 0 === this._size.x || 0 === this._size.y)) { var v = this.context; return this._alpha.prev = v.globalAlpha, v.save(), v.globalAlpha = this._alpha.current, f && (this.op = f), y && (a |= 0, r |= 0), v.translate(a, r), v.scale(this._scale.x, this._scale.y), v.rotate(this._rotate), v.drawImage(this._image, this._pos.x + e, this._pos.y + n, this._size.x, this._size.y, -h * this._anchor.x, -l * this._anchor.y, h, l), v.restore(), v.globalAlpha = this._alpha.prev, this.dirty = !0, this } }, copyTransform: function(t, e, n) { if (void 0 === e && (e = null), void 0 === n && (n = !1), !t.hasOwnProperty("worldTransform") || !t.worldVisible || 0 === t.worldAlpha) return this; var s = t.worldTransform; if (this._pos.set(t.texture.crop.x, t.texture.crop.y), this._size.set(t.texture.crop.width, t.texture.crop.height), 0 === s.a || 0 === s.d || 0 === this._size.x || 0 === this._size.y) return this;
                t.texture instanceof i.RenderTexture || t.texture instanceof PIXI.RenderTexture ? this._image = t.texture.getCanvas() : this._image = t.texture.baseTexture.source; var o = s.tx,
                    a = s.ty;
                t.texture.trim && (o += t.texture.trim.x - t.anchor.x * t.texture.trim.width, a += t.texture.trim.y - t.anchor.y * t.texture.trim.height), 16777215 !== t.tint && (t.cachedTint !== t.tint && (t.cachedTint = t.tint, t.tintedTexture = PIXI.CanvasTinter.getTintedTexture(t, t.tint)), this._image = t.tintedTexture, this._pos.set(0)), n && (o |= 0, a |= 0); var r = this.context; return this._alpha.prev = r.globalAlpha, r.save(), r.globalAlpha = this._alpha.current, e && (this.op = e), r[this.smoothProperty] = t.texture.baseTexture.scaleMode === PIXI.scaleModes.LINEAR, r.setTransform(s.a, s.b, s.c, s.d, o, a), r.drawImage(this._image, this._pos.x, this._pos.y, this._size.x, this._size.y, -this._size.x * t.anchor.x, -this._size.y * t.anchor.y, this._size.x, this._size.y), r.restore(), r.globalAlpha = this._alpha.prev, this.dirty = !0, this }, copyRect: function(t, e, i, n, s, o, a) { return this.copy(t, e.x, e.y, e.width, e.height, i, n, e.width, e.height, 0, 0, 0, 1, 1, s, o, a) }, draw: function(t, e, i, n, s, o, a) { return this.copy(t, null, null, null, null, e, i, n, s, null, null, null, null, null, null, o, a) }, drawGroup: function(t, e, i) { return t.total > 0 && t.forEachExists(this.drawGroupProxy, this, e, i), this }, drawGroupProxy: function(t, e, n) { if (t.hasOwnProperty("texture") && this.copyTransform(t, e, n), t.type === i.GROUP && t.exists) this.drawGroup(t, e, n);
                else if (t.hasOwnProperty("children") && t.children.length > 0)
                    for (var s = 0; s < t.children.length; s++) t.children[s].exists && this.copyTransform(t.children[s], e, n) }, drawFull: function(t, e, n) { if (!1 === t.worldVisible || 0 === t.worldAlpha || t.hasOwnProperty("exists") && !1 === t.exists) return this; if (t.type !== i.GROUP && t.type !== i.EMITTER && t.type !== i.BITMAPTEXT)
                    if (t.type === i.GRAPHICS) { var s = t.getBounds();
                        this.ctx.save(), this.ctx.translate(s.x, s.y), PIXI.CanvasGraphics.renderGraphics(t, this.ctx), this.ctx.restore() } else this.copy(t, null, null, null, null, t.worldPosition.x, t.worldPosition.y, null, null, t.worldRotation, null, null, t.worldScale.x, t.worldScale.y, t.worldAlpha, e, n); if (t.children)
                    for (var o = 0; o < t.children.length; o++) this.drawFull(t.children[o], e, n); return this }, shadow: function(t, e, i, n) { var s = this.context; return void 0 === t || null === t ? s.shadowColor = "rgba(0,0,0,0)" : (s.shadowColor = t, s.shadowBlur = e || 5, s.shadowOffsetX = i || 10, s.shadowOffsetY = n || 10), this }, alphaMask: function(t, e, i, n) { return void 0 === n || null === n ? this.draw(e).blendSourceAtop() : this.draw(e, n.x, n.y, n.width, n.height).blendSourceAtop(), void 0 === i || null === i ? this.draw(t).blendReset() : this.draw(t, i.x, i.y, i.width, i.height).blendReset(), this }, extract: function(t, e, i, n, s, o, a, r, h) { return void 0 === s && (s = 255), void 0 === o && (o = !1), void 0 === a && (a = e), void 0 === r && (r = i), void 0 === h && (h = n), o && t.resize(this.width, this.height), this.processPixelRGB(function(o, l, c) { return o.r === e && o.g === i && o.b === n && t.setPixel32(l, c, a, r, h, s, !1), !1 }, this), t.context.putImageData(t.imageData, 0, 0), t.dirty = !0, t }, rect: function(t, e, i, n, s) { return void 0 !== s && (this.context.fillStyle = s), this.context.fillRect(t, e, i, n), this }, text: function(t, e, i, n, s, o) { void 0 === e && (e = 0), void 0 === i && (i = 0), void 0 === n && (n = "14px Courier"), void 0 === s && (s = "rgb(255,255,255)"), void 0 === o && (o = !0); var a = this.context,
                    r = a.font; return a.font = n, o && (a.fillStyle = "rgb(0,0,0)", a.fillText(t, e + 1, i + 1)), a.fillStyle = s, a.fillText(t, e, i), a.font = r, this }, circle: function(t, e, i, n) { var s = this.context; return void 0 !== n && (s.fillStyle = n), s.beginPath(), s.arc(t, e, i, 0, 2 * Math.PI, !1), s.closePath(), s.fill(), this }, line: function(t, e, i, n, s, o) { void 0 === s && (s = "#fff"), void 0 === o && (o = 1); var a = this.context; return a.beginPath(), a.moveTo(t, e), a.lineTo(i, n), a.lineWidth = o, a.strokeStyle = s, a.stroke(), a.closePath(), this }, textureLine: function(t, e, n) { if (void 0 === n && (n = "repeat-x"), "string" != typeof e || (e = this.game.cache.getImage(e))) { var s = t.length; "no-repeat" === n && s > e.width && (s = e.width); var o = this.context; return o.fillStyle = o.createPattern(e, n), this._circle = new i.Circle(t.start.x, t.start.y, e.height), this._circle.circumferencePoint(t.angle - 1.5707963267948966, !1, this._pos), o.save(), o.translate(this._pos.x, this._pos.y), o.rotate(t.angle), o.fillRect(0, 0, s, e.height), o.restore(), this.dirty = !0, this } }, render: function() { return !this.disableTextureUpload && this.dirty && (this.baseTexture.dirty(), this.dirty = !1), this }, destroy: function() { this.frameData.destroy(), this.texture.destroy(!0), PIXI.CanvasPool.remove(this) }, blendReset: function() { return this.op = "source-over", this }, blendSourceOver: function() { return this.op = "source-over", this }, blendSourceIn: function() { return this.op = "source-in", this }, blendSourceOut: function() { return this.op = "source-out", this }, blendSourceAtop: function() { return this.op = "source-atop", this }, blendDestinationOver: function() { return this.op = "destination-over", this }, blendDestinationIn: function() { return this.op = "destination-in", this }, blendDestinationOut: function() { return this.op = "destination-out", this }, blendDestinationAtop: function() { return this.op = "destination-atop", this }, blendXor: function() { return this.op = "xor", this }, blendAdd: function() { return this.op = "lighter", this }, blendMultiply: function() { return this.op = "multiply", this }, blendScreen: function() { return this.op = "screen", this }, blendOverlay: function() { return this.op = "overlay", this }, blendDarken: function() { return this.op = "darken", this }, blendLighten: function() { return this.op = "lighten", this }, blendColorDodge: function() { return this.op = "color-dodge", this }, blendColorBurn: function() { return this.op = "color-burn", this }, blendHardLight: function() { return this.op = "hard-light", this }, blendSoftLight: function() { return this.op = "soft-light", this }, blendDifference: function() { return this.op = "difference", this }, blendExclusion: function() { return this.op = "exclusion", this }, blendHue: function() { return this.op = "hue", this }, blendSaturation: function() { return this.op = "saturation", this }, blendColor: function() { return this.op = "color", this }, blendLuminosity: function() { return this.op = "luminosity", this } }, Object.defineProperty(i.BitmapData.prototype, "smoothed", { get: function() { i.Canvas.getSmoothingEnabled(this.context) }, set: function(t) { i.Canvas.setSmoothingEnabled(this.context, t) } }), Object.defineProperty(i.BitmapData.prototype, "op", { get: function() { return this.context.globalCompositeOperation }, set: function(t) { this.context.globalCompositeOperation = t } }), i.BitmapData.getTransform = function(t, e, i, n, s, o) { return "number" != typeof t && (t = 0), "number" != typeof e && (e = 0), "number" != typeof i && (i = 1), "number" != typeof n && (n = 1), "number" != typeof s && (s = 0), "number" != typeof o && (o = 0), { sx: i, sy: n, scaleX: i, scaleY: n, skewX: s, skewY: o, translateX: t, translateY: e, tx: t, ty: e } }, i.BitmapData.prototype.constructor = i.BitmapData, PIXI.Graphics = function() { PIXI.DisplayObjectContainer.call(this), this.renderable = !0, this.fillAlpha = 1, this.lineWidth = 0, this.lineColor = 0, this.graphicsData = [], this.tint = 16777215, this.blendMode = PIXI.blendModes.NORMAL, this.currentPath = null, this._webGL = [], this.isMask = !1, this.boundsPadding = 0, this._localBounds = new PIXI.Rectangle(0, 0, 1, 1), this.dirty = !0, this._boundsDirty = !1, this.webGLDirty = !1, this.cachedSpriteDirty = !1 }, PIXI.Graphics.prototype = Object.create(PIXI.DisplayObjectContainer.prototype), PIXI.Graphics.prototype.constructor = PIXI.Graphics, PIXI.Graphics.prototype.lineStyle = function(t, e, i) { return this.lineWidth = t || 0, this.lineColor = e || 0, this.lineAlpha = void 0 === i ? 1 : i, this.currentPath && (this.currentPath.shape.points.length ? this.drawShape(new PIXI.Polygon(this.currentPath.shape.points.slice(-2))) : (this.currentPath.lineWidth = this.lineWidth, this.currentPath.lineColor = this.lineColor, this.currentPath.lineAlpha = this.lineAlpha)), this }, PIXI.Graphics.prototype.moveTo = function(t, e) { return this.drawShape(new PIXI.Polygon([t, e])), this }, PIXI.Graphics.prototype.lineTo = function(t, e) { return this.currentPath || this.moveTo(0, 0), this.currentPath.shape.points.push(t, e), this.dirty = !0, this._boundsDirty = !0, this }, PIXI.Graphics.prototype.quadraticCurveTo = function(t, e, i, n) { this.currentPath ? 0 === this.currentPath.shape.points.length && (this.currentPath.shape.points = [0, 0]) : this.moveTo(0, 0); var s, o, a = this.currentPath.shape.points;
            0 === a.length && this.moveTo(0, 0); for (var r = a[a.length - 2], h = a[a.length - 1], l = 0, c = 1; c <= 20; ++c) s = r + (t - r) * (l = c / 20), o = h + (e - h) * l, a.push(s + (t + (i - t) * l - s) * l, o + (e + (n - e) * l - o) * l); return this.dirty = !0, this._boundsDirty = !0, this }, PIXI.Graphics.prototype.bezierCurveTo = function(t, e, i, n, s, o) { this.currentPath ? 0 === this.currentPath.shape.points.length && (this.currentPath.shape.points = [0, 0]) : this.moveTo(0, 0); for (var a, r, h, l, c, u = this.currentPath.shape.points, p = u[u.length - 2], d = u[u.length - 1], m = 0, g = 1; g <= 20; ++g) h = (r = (a = 1 - (m = g / 20)) * a) * a, c = (l = m * m) * m, u.push(h * p + 3 * r * m * t + 3 * a * l * i + c * s, h * d + 3 * r * m * e + 3 * a * l * n + c * o); return this.dirty = !0, this._boundsDirty = !0, this }, PIXI.Graphics.prototype.arcTo = function(t, e, i, n, s) { this.currentPath ? 0 === this.currentPath.shape.points.length && this.currentPath.shape.points.push(t, e) : this.moveTo(t, e); var o = this.currentPath.shape.points,
                a = o[o.length - 2],
                r = o[o.length - 1] - e,
                h = a - t,
                l = n - e,
                c = i - t,
                u = Math.abs(r * c - h * l); if (u < 1e-8 || 0 === s) o[o.length - 2] === t && o[o.length - 1] === e || o.push(t, e);
            else { var p = r * r + h * h,
                    d = l * l + c * c,
                    m = r * l + h * c,
                    g = s * Math.sqrt(p) / u,
                    f = s * Math.sqrt(d) / u,
                    y = g * m / p,
                    v = f * m / d,
                    b = g * c + f * h,
                    _ = g * l + f * r,
                    S = h * (f + y),
                    w = r * (f + y),
                    C = c * (g + v),
                    A = l * (g + v),
                    T = Math.atan2(w - _, S - b),
                    x = Math.atan2(A - _, C - b);
                this.arc(b + t, _ + e, s, T, x, h * l > c * r) } return this.dirty = !0, this._boundsDirty = !0, this }, PIXI.Graphics.prototype.arc = function(t, e, i, n, s, o, a) { if (n === s) return this;
            void 0 === o && (o = !1), void 0 === a && (a = 40), !o && s <= n ? s += 2 * Math.PI : o && n <= s && (n += 2 * Math.PI); var r = o ? -1 * (n - s) : s - n,
                h = Math.ceil(Math.abs(r) / (2 * Math.PI)) * a; if (0 === r) return this; var l = t + Math.cos(n) * i,
                c = e + Math.sin(n) * i;
            o && this.filling ? this.moveTo(t, e) : this.moveTo(l, c); for (var u = this.currentPath.shape.points, p = r / (2 * h), d = 2 * p, m = Math.cos(p), g = Math.sin(p), f = h - 1, y = f % 1 / f, v = 0; v <= f; v++) { var b = p + n + d * (v + y * v),
                    _ = Math.cos(b),
                    S = -Math.sin(b);
                u.push((m * _ + g * S) * i + t, (m * -S + g * _) * i + e) } return this.dirty = !0, this._boundsDirty = !0, this }, PIXI.Graphics.prototype.beginFill = function(t, e) { return this.filling = !0, this.fillColor = t || 0, this.fillAlpha = void 0 === e ? 1 : e, this.currentPath && this.currentPath.shape.points.length <= 2 && (this.currentPath.fill = this.filling, this.currentPath.fillColor = this.fillColor, this.currentPath.fillAlpha = this.fillAlpha), this }, PIXI.Graphics.prototype.endFill = function() { return this.filling = !1, this.fillColor = null, this.fillAlpha = 1, this }, PIXI.Graphics.prototype.drawRect = function(t, e, i, n) { return this.drawShape(new PIXI.Rectangle(t, e, i, n)), this }, PIXI.Graphics.prototype.drawRoundedRect = function(t, e, i, n, s) { return this.drawShape(new PIXI.RoundedRectangle(t, e, i, n, s)), this }, PIXI.Graphics.prototype.drawCircle = function(t, e, i) { return this.drawShape(new PIXI.Circle(t, e, i)), this }, PIXI.Graphics.prototype.drawEllipse = function(t, e, i, n) { return this.drawShape(new PIXI.Ellipse(t, e, i, n)), this }, PIXI.Graphics.prototype.drawPolygon = function(t) {
            (t instanceof i.Polygon || t instanceof PIXI.Polygon) && (t = t.points); var e = t; if (!Array.isArray(e)) { e = new Array(arguments.length); for (var n = 0; n < e.length; ++n) e[n] = arguments[n] } return this.drawShape(new i.Polygon(e)), this }, PIXI.Graphics.prototype.clear = function() { return this.lineWidth = 0, this.filling = !1, this.dirty = !0, this._boundsDirty = !0, this.clearDirty = !0, this.graphicsData = [], this.updateLocalBounds(), this }, PIXI.Graphics.prototype.generateTexture = function(t, e, i) { void 0 === t && (t = 1), void 0 === e && (e = PIXI.scaleModes.DEFAULT), void 0 === i && (i = 0); var n = this.getBounds();
            n.width += i, n.height += i; var s = new PIXI.CanvasBuffer(n.width * t, n.height * t),
                o = PIXI.Texture.fromCanvas(s.canvas, e); return o.baseTexture.resolution = t, s.context.scale(t, t), s.context.translate(-n.x, -n.y), PIXI.CanvasGraphics.renderGraphics(this, s.context), o }, PIXI.Graphics.prototype._renderWebGL = function(t) { if (!1 !== this.visible && 0 !== this.alpha && !0 !== this.isMask) { if (this._cacheAsBitmap) return (this.dirty || this.cachedSpriteDirty) && (this._generateCachedSprite(), this.updateCachedSpriteTexture(), this.cachedSpriteDirty = !1, this.dirty = !1), this._cachedSprite.worldAlpha = this.worldAlpha, void PIXI.Sprite.prototype._renderWebGL.call(this._cachedSprite, t); if (t.spriteBatch.stop(), t.blendModeManager.setBlendMode(this.blendMode), this._mask && t.maskManager.pushMask(this._mask, t), this._filters && t.filterManager.pushFilter(this._filterBlock), this.blendMode !== t.spriteBatch.currentBlendMode) { t.spriteBatch.currentBlendMode = this.blendMode; var e = PIXI.blendModesWebGL[t.spriteBatch.currentBlendMode];
                    t.spriteBatch.gl.blendFunc(e[0], e[1]) } if (this.webGLDirty && (this.dirty = !0, this.webGLDirty = !1), PIXI.WebGLGraphics.renderGraphics(this, t), this.children.length) { t.spriteBatch.start(); for (var i = 0; i < this.children.length; i++) this.children[i]._renderWebGL(t);
                    t.spriteBatch.stop() } this._filters && t.filterManager.popFilter(), this._mask && t.maskManager.popMask(this.mask, t), t.drawCount++, t.spriteBatch.start() } }, PIXI.Graphics.prototype._renderCanvas = function(t) { if (!1 !== this.visible && 0 !== this.alpha && !0 !== this.isMask) { if (this._prevTint !== this.tint && (this.dirty = !0, this._prevTint = this.tint), this._cacheAsBitmap) return (this.dirty || this.cachedSpriteDirty) && (this._generateCachedSprite(), this.updateCachedSpriteTexture(), this.cachedSpriteDirty = !1, this.dirty = !1), this._cachedSprite.alpha = this.alpha, void PIXI.Sprite.prototype._renderCanvas.call(this._cachedSprite, t); var e = t.context,
                    i = this.worldTransform;
                this.blendMode !== t.currentBlendMode && (t.currentBlendMode = this.blendMode, e.globalCompositeOperation = PIXI.blendModesCanvas[t.currentBlendMode]), this._mask && t.maskManager.pushMask(this._mask, t); var n = t.resolution,
                    s = i.tx * t.resolution + t.shakeX,
                    o = i.ty * t.resolution + t.shakeY;
                e.setTransform(i.a * n, i.b * n, i.c * n, i.d * n, s, o), PIXI.CanvasGraphics.renderGraphics(this, e); for (var a = 0; a < this.children.length; a++) this.children[a]._renderCanvas(t);
                this._mask && t.maskManager.popMask(t) } }, PIXI.Graphics.prototype.getBounds = function(t) { if (!this._currentBounds) { if (!this.renderable) return PIXI.EmptyRectangle;
                this.dirty && (this.updateLocalBounds(), this.webGLDirty = !0, this.cachedSpriteDirty = !0, this.dirty = !1); var e = this._localBounds,
                    i = e.x,
                    n = e.width + e.x,
                    s = e.y,
                    o = e.height + e.y,
                    a = t || this.worldTransform,
                    r = a.a,
                    h = a.b,
                    l = a.c,
                    c = a.d,
                    u = a.tx,
                    p = a.ty,
                    d = r * n + l * o + u,
                    m = c * o + h * n + p,
                    g = r * i + l * o + u,
                    f = c * o + h * i + p,
                    y = r * i + l * s + u,
                    v = c * s + h * i + p,
                    b = r * n + l * s + u,
                    _ = c * s + h * n + p,
                    S = d,
                    w = m,
                    C = d,
                    A = m;
                C = b < (C = y < (C = g < C ? g : C) ? y : C) ? b : C, A = _ < (A = v < (A = f < A ? f : A) ? v : A) ? _ : A, S = b > (S = y > (S = g > S ? g : S) ? y : S) ? b : S, w = _ > (w = v > (w = f > w ? f : w) ? v : w) ? _ : w, this._bounds.x = C, this._bounds.width = S - C, this._bounds.y = A, this._bounds.height = w - A, this._currentBounds = this._bounds } return this._currentBounds }, PIXI.Graphics.prototype.getLocalBounds = function() { var t = this.worldTransform;
            this.worldTransform = PIXI.identityMatrix; for (var e = 0; e < this.children.length; e++) this.children[e].updateTransform(); var i = this.getBounds(); for (this.worldTransform = t, e = 0; e < this.children.length; e++) this.children[e].updateTransform(); return i }, PIXI.Graphics.prototype.containsPoint = function(t) { this.worldTransform.applyInverse(t, tempPoint); for (var e = this.graphicsData, i = 0; i < e.length; i++) { var n = e[i]; if (n.fill && (n.shape && n.shape.contains(tempPoint.x, tempPoint.y))) return !0 } return !1 }, PIXI.Graphics.prototype.updateLocalBounds = function() { var t = 1 / 0,
                e = -1 / 0,
                n = 1 / 0,
                s = -1 / 0; if (this.graphicsData.length)
                for (var o, a, r, h, l, c, u = 0; u < this.graphicsData.length; u++) { var p = this.graphicsData[u],
                        d = p.type,
                        m = p.lineWidth; if (o = p.shape, d === PIXI.Graphics.RECT || d === PIXI.Graphics.RREC) r = o.x - m / 2, h = o.y - m / 2, l = o.width + m, c = o.height + m, t = r < t ? r : t, e = r + l > e ? r + l : e, n = h < n ? h : n, s = h + c > s ? h + c : s;
                    else if (d === PIXI.Graphics.CIRC) r = o.x, h = o.y, l = o.radius + m / 2, c = o.radius + m / 2, t = r - l < t ? r - l : t, e = r + l > e ? r + l : e, n = h - c < n ? h - c : n, s = h + c > s ? h + c : s;
                    else if (d === PIXI.Graphics.ELIP) r = o.x, h = o.y, l = o.width + m / 2, c = o.height + m / 2, t = r - l < t ? r - l : t, e = r + l > e ? r + l : e, n = h - c < n ? h - c : n, s = h + c > s ? h + c : s;
                    else { a = o.points; for (var g = 0; g < a.length; g++) a[g] instanceof i.Point ? (r = a[g].x, h = a[g].y) : (r = a[g], h = a[g + 1], g < a.length - 1 && g++), t = r - m < t ? r - m : t, e = r + m > e ? r + m : e, n = h - m < n ? h - m : n, s = h + m > s ? h + m : s } } else t = 0, e = 0, n = 0, s = 0; var f = this.boundsPadding;
            this._localBounds.x = t - f, this._localBounds.width = e - t + 2 * f, this._localBounds.y = n - f, this._localBounds.height = s - n + 2 * f }, PIXI.Graphics.prototype._generateCachedSprite = function() { var t = this.getLocalBounds(); if (this._cachedSprite) this._cachedSprite.buffer.resize(t.width, t.height);
            else { var e = new PIXI.CanvasBuffer(t.width, t.height),
                    i = PIXI.Texture.fromCanvas(e.canvas);
                this._cachedSprite = new PIXI.Sprite(i), this._cachedSprite.buffer = e, this._cachedSprite.worldTransform = this.worldTransform } this._cachedSprite.anchor.x = -t.x / t.width, this._cachedSprite.anchor.y = -t.y / t.height, this._cachedSprite.buffer.context.translate(-t.x, -t.y), this.worldAlpha = 1, PIXI.CanvasGraphics.renderGraphics(this, this._cachedSprite.buffer.context), this._cachedSprite.alpha = this.alpha }, PIXI.Graphics.prototype.updateCachedSpriteTexture = function() { var t = this._cachedSprite,
                e = t.texture,
                i = t.buffer.canvas;
            e.baseTexture.width = i.width, e.baseTexture.height = i.height, e.crop.width = e.frame.width = i.width, e.crop.height = e.frame.height = i.height, t._width = i.width, t._height = i.height, e.baseTexture.dirty() }, PIXI.Graphics.prototype.destroyCachedSprite = function() { this._cachedSprite.texture.destroy(!0), this._cachedSprite = null }, PIXI.Graphics.prototype.drawShape = function(t) { this.currentPath && this.currentPath.shape.points.length <= 2 && this.graphicsData.pop(), this.currentPath = null, t instanceof i.Polygon && (t = t.clone()).flatten(); var e = new PIXI.GraphicsData(this.lineWidth, this.lineColor, this.lineAlpha, this.fillColor, this.fillAlpha, this.filling, t); return this.graphicsData.push(e), e.type === PIXI.Graphics.POLY && (e.shape.closed = this.filling, this.currentPath = e), this.dirty = !0, this._boundsDirty = !0, e }, Object.defineProperty(PIXI.Graphics.prototype, "cacheAsBitmap", { get: function() { return this._cacheAsBitmap }, set: function(t) { this._cacheAsBitmap = t, this._cacheAsBitmap ? this._generateCachedSprite() : this.destroyCachedSprite(), this.dirty = !0, this.webGLDirty = !0 } }), PIXI.GraphicsData = function(t, e, i, n, s, o, a) { this.lineWidth = t, this.lineColor = e, this.lineAlpha = i, this._lineTint = e, this.fillColor = n, this.fillAlpha = s, this._fillTint = n, this.fill = o, this.shape = a, this.type = a.type }, PIXI.GraphicsData.prototype.constructor = PIXI.GraphicsData, PIXI.GraphicsData.prototype.clone = function() { return new GraphicsData(this.lineWidth, this.lineColor, this.lineAlpha, this.fillColor, this.fillAlpha, this.fill, this.shape) }, PIXI.EarCut = {}, PIXI.EarCut.Triangulate = function(t, e, i) { i = i || 2; var n = e && e.length,
                s = n ? e[0] * i : t.length,
                o = PIXI.EarCut.linkedList(t, 0, s, i, !0),
                a = []; if (!o) return a; var r, h, l, c, u, p, d; if (n && (o = PIXI.EarCut.eliminateHoles(t, e, o, i)), t.length > 80 * i) { r = l = t[0], h = c = t[1]; for (var m = i; m < s; m += i) u = t[m], p = t[m + 1], u < r && (r = u), p < h && (h = p), u > l && (l = u), p > c && (c = p);
                d = Math.max(l - r, c - h) } return PIXI.EarCut.earcutLinked(o, a, i, r, h, d), a }, PIXI.EarCut.linkedList = function(t, e, i, n, s) { var o, a, r, h = 0; for (o = e, a = i - n; o < i; o += n) h += (t[a] - t[o]) * (t[o + 1] + t[a + 1]), a = o; if (s === h > 0)
                for (o = e; o < i; o += n) r = PIXI.EarCut.insertNode(o, t[o], t[o + 1], r);
            else
                for (o = i - n; o >= e; o -= n) r = PIXI.EarCut.insertNode(o, t[o], t[o + 1], r); return r }, PIXI.EarCut.filterPoints = function(t, e) { if (!t) return t;
            e || (e = t); var i, n = t;
            do { if (i = !1, n.steiner || !PIXI.EarCut.equals(n, n.next) && 0 !== PIXI.EarCut.area(n.prev, n, n.next)) n = n.next;
                else { if (PIXI.EarCut.removeNode(n), (n = e = n.prev) === n.next) return null;
                    i = !0 } } while (i || n !== e); return e }, PIXI.EarCut.earcutLinked = function(t, e, i, n, s, o, a) { if (t) {!a && o && PIXI.EarCut.indexCurve(t, n, s, o); for (var r, h, l = t; t.prev !== t.next;)
                    if (r = t.prev, h = t.next, o ? PIXI.EarCut.isEarHashed(t, n, s, o) : PIXI.EarCut.isEar(t)) e.push(r.i / i), e.push(t.i / i), e.push(h.i / i), PIXI.EarCut.removeNode(t), t = h.next, l = h.next;
                    else if ((t = h) === l) { a ? 1 === a ? (t = PIXI.EarCut.cureLocalIntersections(t, e, i), PIXI.EarCut.earcutLinked(t, e, i, n, s, o, 2)) : 2 === a && PIXI.EarCut.splitEarcut(t, e, i, n, s, o) : PIXI.EarCut.earcutLinked(PIXI.EarCut.filterPoints(t), e, i, n, s, o, 1); break } } }, PIXI.EarCut.isEar = function(t) { var e = t.prev,
                i = t,
                n = t.next; if (PIXI.EarCut.area(e, i, n) >= 0) return !1; for (var s = t.next.next; s !== t.prev;) { if (PIXI.EarCut.pointInTriangle(e.x, e.y, i.x, i.y, n.x, n.y, s.x, s.y) && PIXI.EarCut.area(s.prev, s, s.next) >= 0) return !1;
                s = s.next } return !0 }, PIXI.EarCut.isEarHashed = function(t, e, i, n) { var s = t.prev,
                o = t,
                a = t.next; if (PIXI.EarCut.area(s, o, a) >= 0) return !1; for (var r = s.x < o.x ? s.x < a.x ? s.x : a.x : o.x < a.x ? o.x : a.x, h = s.y < o.y ? s.y < a.y ? s.y : a.y : o.y < a.y ? o.y : a.y, l = s.x > o.x ? s.x > a.x ? s.x : a.x : o.x > a.x ? o.x : a.x, c = s.y > o.y ? s.y > a.y ? s.y : a.y : o.y > a.y ? o.y : a.y, u = PIXI.EarCut.zOrder(r, h, e, i, n), p = PIXI.EarCut.zOrder(l, c, e, i, n), d = t.nextZ; d && d.z <= p;) { if (d !== t.prev && d !== t.next && PIXI.EarCut.pointInTriangle(s.x, s.y, o.x, o.y, a.x, a.y, d.x, d.y) && PIXI.EarCut.area(d.prev, d, d.next) >= 0) return !1;
                d = d.nextZ } for (d = t.prevZ; d && d.z >= u;) { if (d !== t.prev && d !== t.next && PIXI.EarCut.pointInTriangle(s.x, s.y, o.x, o.y, a.x, a.y, d.x, d.y) && PIXI.EarCut.area(d.prev, d, d.next) >= 0) return !1;
                d = d.prevZ } return !0 }, PIXI.EarCut.cureLocalIntersections = function(t, e, i) { var n = t;
            do { var s = n.prev,
                    o = n.next.next;
                PIXI.EarCut.intersects(s, n, n.next, o) && PIXI.EarCut.locallyInside(s, o) && PIXI.EarCut.locallyInside(o, s) && (e.push(s.i / i), e.push(n.i / i), e.push(o.i / i), PIXI.EarCut.removeNode(n), PIXI.EarCut.removeNode(n.next), n = t = o), n = n.next } while (n !== t); return n }, PIXI.EarCut.splitEarcut = function(t, e, i, n, s, o) { var a = t;
            do { for (var r = a.next.next; r !== a.prev;) { if (a.i !== r.i && PIXI.EarCut.isValidDiagonal(a, r)) { var h = PIXI.EarCut.splitPolygon(a, r); return a = PIXI.EarCut.filterPoints(a, a.next), h = PIXI.EarCut.filterPoints(h, h.next), PIXI.EarCut.earcutLinked(a, e, i, n, s, o), void PIXI.EarCut.earcutLinked(h, e, i, n, s, o) } r = r.next } a = a.next } while (a !== t) }, PIXI.EarCut.eliminateHoles = function(t, e, i, n) { var s, o, a, r, h, l = []; for (s = 0, o = e.length; s < o; s++) a = e[s] * n, r = s < o - 1 ? e[s + 1] * n : t.length, (h = PIXI.EarCut.linkedList(t, a, r, n, !1)) === h.next && (h.steiner = !0), l.push(PIXI.EarCut.getLeftmost(h)); for (l.sort(compareX), s = 0; s < l.length; s++) PIXI.EarCut.eliminateHole(l[s], i), i = PIXI.EarCut.filterPoints(i, i.next); return i }, PIXI.EarCut.compareX = function(t, e) { return t.x - e.x }, PIXI.EarCut.eliminateHole = function(t, e) { if (e = PIXI.EarCut.findHoleBridge(t, e)) { var i = PIXI.EarCut.splitPolygon(e, t);
                PIXI.EarCut.filterPoints(i, i.next) } }, PIXI.EarCut.findHoleBridge = function(t, e) { var i, n = e,
                s = t.x,
                o = t.y,
                a = -1 / 0;
            do { if (o <= n.y && o >= n.next.y) { var r = n.x + (o - n.y) * (n.next.x - n.x) / (n.next.y - n.y);
                    r <= s && r > a && (a = r, i = n.x < n.next.x ? n : n.next) } n = n.next } while (n !== e); if (!i) return null; if (t.x === i.x) return i.prev; var h, l = i,
                c = 1 / 0; for (n = i.next; n !== l;) s >= n.x && n.x >= i.x && PIXI.EarCut.pointInTriangle(o < i.y ? s : a, o, i.x, i.y, o < i.y ? a : s, o, n.x, n.y) && ((h = Math.abs(o - n.y) / (s - n.x)) < c || h === c && n.x > i.x) && PIXI.EarCut.locallyInside(n, t) && (i = n, c = h), n = n.next; return i }, PIXI.EarCut.indexCurve = function(t, e, i, n) { var s = t;
            do { null === s.z && (s.z = PIXI.EarCut.zOrder(s.x, s.y, e, i, n)), s.prevZ = s.prev, s.nextZ = s.next, s = s.next } while (s !== t);
            s.prevZ.nextZ = null, s.prevZ = null, PIXI.EarCut.sortLinked(s) }, PIXI.EarCut.sortLinked = function(t) { var e, i, n, s, o, a, r, h, l = 1;
            do { for (i = t, t = null, o = null, a = 0; i;) { for (a++, n = i, r = 0, e = 0; e < l && (r++, n = n.nextZ); e++); for (h = l; r > 0 || h > 0 && n;) 0 === r ? (s = n, n = n.nextZ, h--) : 0 !== h && n ? i.z <= n.z ? (s = i, i = i.nextZ, r--) : (s = n, n = n.nextZ, h--) : (s = i, i = i.nextZ, r--), o ? o.nextZ = s : t = s, s.prevZ = o, o = s;
                    i = n } o.nextZ = null, l *= 2 } while (a > 1); return t }, PIXI.EarCut.zOrder = function(t, e, i, n, s) { return t = 32767 * (t - i) / s, e = 32767 * (e - n) / s, t = 16711935 & (t | t << 8), t = 252645135 & (t | t << 4), t = 858993459 & (t | t << 2), t = 1431655765 & (t | t << 1), e = 16711935 & (e | e << 8), e = 252645135 & (e | e << 4), e = 858993459 & (e | e << 2), e = 1431655765 & (e | e << 1), t | e << 1 }, PIXI.EarCut.getLeftmost = function(t) { var e = t,
                i = t;
            do { e.x < i.x && (i = e), e = e.next } while (e !== t); return i }, PIXI.EarCut.pointInTriangle = function(t, e, i, n, s, o, a, r) { return (s - a) * (e - r) - (t - a) * (o - r) >= 0 && (t - a) * (n - r) - (i - a) * (e - r) >= 0 && (i - a) * (o - r) - (s - a) * (n - r) >= 0 }, PIXI.EarCut.isValidDiagonal = function(t, e) { return PIXI.EarCut.equals(t, e) || t.next.i !== e.i && t.prev.i !== e.i && !PIXI.EarCut.intersectsPolygon(t, e) && PIXI.EarCut.locallyInside(t, e) && PIXI.EarCut.locallyInside(e, t) && PIXI.EarCut.middleInside(t, e) }, PIXI.EarCut.area = function(t, e, i) { return (e.y - t.y) * (i.x - e.x) - (e.x - t.x) * (i.y - e.y) }, PIXI.EarCut.equals = function(t, e) { return t.x === e.x && t.y === e.y }, PIXI.EarCut.intersects = function(t, e, i, n) { return PIXI.EarCut.area(t, e, i) > 0 != PIXI.EarCut.area(t, e, n) > 0 && PIXI.EarCut.area(i, n, t) > 0 != PIXI.EarCut.area(i, n, e) > 0 }, PIXI.EarCut.intersectsPolygon = function(t, e) { var i = t;
            do { if (i.i !== t.i && i.next.i !== t.i && i.i !== e.i && i.next.i !== e.i && PIXI.EarCut.intersects(i, i.next, t, e)) return !0;
                i = i.next } while (i !== t); return !1 }, PIXI.EarCut.locallyInside = function(t, e) { return PIXI.EarCut.area(t.prev, t, t.next) < 0 ? PIXI.EarCut.area(t, e, t.next) >= 0 && PIXI.EarCut.area(t, t.prev, e) >= 0 : PIXI.EarCut.area(t, e, t.prev) < 0 || PIXI.EarCut.area(t, t.next, e) < 0 }, PIXI.EarCut.middleInside = function(t, e) { var i = t,
                n = !1,
                s = (t.x + e.x) / 2,
                o = (t.y + e.y) / 2;
            do { i.y > o != i.next.y > o && s < (i.next.x - i.x) * (o - i.y) / (i.next.y - i.y) + i.x && (n = !n), i = i.next } while (i !== t); return n }, PIXI.EarCut.splitPolygon = function(t, e) { var i = new PIXI.EarCut.Node(t.i, t.x, t.y),
                n = new PIXI.EarCut.Node(e.i, e.x, e.y),
                s = t.next,
                o = e.prev; return t.next = e, e.prev = t, i.next = s, s.prev = i, n.next = i, i.prev = n, o.next = n, n.prev = o, n }, PIXI.EarCut.insertNode = function(t, e, i, n) { var s = new PIXI.EarCut.Node(t, e, i); return n ? (s.next = n.next, s.prev = n, n.next.prev = s, n.next = s) : (s.prev = s, s.next = s), s }, PIXI.EarCut.removeNode = function(t) { t.next.prev = t.prev, t.prev.next = t.next, t.prevZ && (t.prevZ.nextZ = t.nextZ), t.nextZ && (t.nextZ.prevZ = t.prevZ) }, PIXI.EarCut.Node = function(t, e, i) { this.i = t, this.x = e, this.y = i, this.prev = null, this.next = null, this.z = null, this.prevZ = null, this.nextZ = null, this.steiner = !1 }, PIXI.WebGLGraphics = function() {}, PIXI.WebGLGraphics.stencilBufferLimit = 6, PIXI.WebGLGraphics.renderGraphics = function(t, e) { var i, n = e.gl,
                s = e.projection,
                o = e.offset,
                a = e.shaderManager.primitiveShader;
            t.dirty && PIXI.WebGLGraphics.updateGraphics(t, n); for (var r = t._webGL[n.id], h = 0; h < r.data.length; h++) 1 === r.data[h].mode ? (i = r.data[h], e.stencilManager.pushStencil(t, i, e), n.drawElements(n.TRIANGLE_FAN, 4, n.UNSIGNED_SHORT, 2 * (i.indices.length - 4)), e.stencilManager.popStencil(t, i, e)) : (i = r.data[h], e.shaderManager.setShader(a), a = e.shaderManager.primitiveShader, n.uniformMatrix3fv(a.translationMatrix, !1, t.worldTransform.toArray(!0)), n.uniform1f(a.flipY, 1), n.uniform2f(a.projectionVector, s.x, -s.y), n.uniform2f(a.offsetVector, -o.x, -o.y), n.uniform3fv(a.tintColor, PIXI.hex2rgb(t.tint)), n.uniform1f(a.alpha, t.worldAlpha), n.bindBuffer(n.ARRAY_BUFFER, i.buffer), n.vertexAttribPointer(a.aVertexPosition, 2, n.FLOAT, !1, 24, 0), n.vertexAttribPointer(a.colorAttribute, 4, n.FLOAT, !1, 24, 8), n.bindBuffer(n.ELEMENT_ARRAY_BUFFER, i.indexBuffer), n.drawElements(n.TRIANGLE_STRIP, i.indices.length, n.UNSIGNED_SHORT, 0)) }, PIXI.WebGLGraphics.updateGraphics = function(t, e) { var i = t._webGL[e.id];
            i || (i = t._webGL[e.id] = { lastIndex: 0, data: [], gl: e }), t.dirty = !1; var n; if (t.clearDirty) { for (t.clearDirty = !1, n = 0; n < i.data.length; n++) { var s = i.data[n];
                    s.reset(), PIXI.WebGLGraphics.graphicsDataPool.push(s) } i.data = [], i.lastIndex = 0 } var o; for (n = i.lastIndex; n < t.graphicsData.length; n++) { var a = t.graphicsData[n];
                a.type === PIXI.Graphics.POLY ? (a.points = a.shape.points.slice(), a.shape.closed && (a.points[0] === a.points[a.points.length - 2] && a.points[1] === a.points[a.points.length - 1] || a.points.push(a.points[0], a.points[1])), a.fill && a.points.length >= PIXI.WebGLGraphics.stencilBufferLimit && (a.points.length < 2 * PIXI.WebGLGraphics.stencilBufferLimit ? (o = PIXI.WebGLGraphics.switchMode(i, 0), PIXI.WebGLGraphics.buildPoly(a, o) || (o = PIXI.WebGLGraphics.switchMode(i, 1), PIXI.WebGLGraphics.buildComplexPoly(a, o))) : (o = PIXI.WebGLGraphics.switchMode(i, 1), PIXI.WebGLGraphics.buildComplexPoly(a, o))), a.lineWidth > 0 && (o = PIXI.WebGLGraphics.switchMode(i, 0), PIXI.WebGLGraphics.buildLine(a, o))) : (o = PIXI.WebGLGraphics.switchMode(i, 0), a.type === PIXI.Graphics.RECT ? PIXI.WebGLGraphics.buildRectangle(a, o) : a.type === PIXI.Graphics.CIRC || a.type === PIXI.Graphics.ELIP ? PIXI.WebGLGraphics.buildCircle(a, o) : a.type === PIXI.Graphics.RREC && PIXI.WebGLGraphics.buildRoundedRectangle(a, o)), i.lastIndex++ } for (n = 0; n < i.data.length; n++)(o = i.data[n]).dirty && o.upload() }, PIXI.WebGLGraphics.switchMode = function(t, e) { var i; return t.data.length ? (i = t.data[t.data.length - 1]).mode === e && 1 !== e || ((i = PIXI.WebGLGraphics.graphicsDataPool.pop() || new PIXI.WebGLGraphicsData(t.gl)).mode = e, t.data.push(i)) : ((i = PIXI.WebGLGraphics.graphicsDataPool.pop() || new PIXI.WebGLGraphicsData(t.gl)).mode = e, t.data.push(i)), i.dirty = !0, i }, PIXI.WebGLGraphics.buildRectangle = function(t, e) { var i = t.shape,
                n = i.x,
                s = i.y,
                o = i.width,
                a = i.height; if (t.fill) { var r = PIXI.hex2rgb(t.fillColor),
                    h = t.fillAlpha,
                    l = r[0] * h,
                    c = r[1] * h,
                    u = r[2] * h,
                    p = e.points,
                    d = e.indices,
                    m = p.length / 6;
                p.push(n, s), p.push(l, c, u, h), p.push(n + o, s), p.push(l, c, u, h), p.push(n, s + a), p.push(l, c, u, h), p.push(n + o, s + a), p.push(l, c, u, h), d.push(m, m, m + 1, m + 2, m + 3, m + 3) } if (t.lineWidth) { var g = t.points;
                t.points = [n, s, n + o, s, n + o, s + a, n, s + a, n, s], PIXI.WebGLGraphics.buildLine(t, e), t.points = g } }, PIXI.WebGLGraphics.buildRoundedRectangle = function(t, e) { var i = t.shape,
                n = i.x,
                s = i.y,
                o = i.width,
                a = i.height,
                r = i.radius,
                h = []; if (h.push(n, s + r), h = h.concat(PIXI.WebGLGraphics.quadraticBezierCurve(n, s + a - r, n, s + a, n + r, s + a)), h = h.concat(PIXI.WebGLGraphics.quadraticBezierCurve(n + o - r, s + a, n + o, s + a, n + o, s + a - r)), h = h.concat(PIXI.WebGLGraphics.quadraticBezierCurve(n + o, s + r, n + o, s, n + o - r, s)), h = h.concat(PIXI.WebGLGraphics.quadraticBezierCurve(n + r, s, n, s, n, s + r)), t.fill) { var l = PIXI.hex2rgb(t.fillColor),
                    c = t.fillAlpha,
                    u = l[0] * c,
                    p = l[1] * c,
                    d = l[2] * c,
                    m = e.points,
                    g = e.indices,
                    f = m.length / 6,
                    y = PIXI.EarCut.Triangulate(h, null, 2),
                    v = 0; for (v = 0; v < y.length; v += 3) g.push(y[v] + f), g.push(y[v] + f), g.push(y[v + 1] + f), g.push(y[v + 2] + f), g.push(y[v + 2] + f); for (v = 0; v < h.length; v++) m.push(h[v], h[++v], u, p, d, c) } if (t.lineWidth) { var b = t.points;
                t.points = h, PIXI.WebGLGraphics.buildLine(t, e), t.points = b } }, PIXI.WebGLGraphics.quadraticBezierCurve = function(t, e, i, n, s, o) {
            function a(t, e, i) { return t + (e - t) * i } for (var r, h, l, c, u, p, d = [], m = 0, g = 0; g <= 20; g++) r = a(t, i, m = g / 20), h = a(e, n, m), l = a(i, s, m), c = a(n, o, m), u = a(r, l, m), p = a(h, c, m), d.push(u, p); return d }, PIXI.WebGLGraphics.buildCircle = function(t, e) { var i, n, s = t.shape,
                o = s.x,
                a = s.y;
            t.type === PIXI.Graphics.CIRC ? (i = s.radius, n = s.radius) : (i = s.width, n = s.height); var r = 2 * Math.PI / 40,
                h = 0; if (t.fill) { var l = PIXI.hex2rgb(t.fillColor),
                    c = t.fillAlpha,
                    u = l[0] * c,
                    p = l[1] * c,
                    d = l[2] * c,
                    m = e.points,
                    g = e.indices,
                    f = m.length / 6; for (g.push(f), h = 0; h < 41; h++) m.push(o, a, u, p, d, c), m.push(o + Math.sin(r * h) * i, a + Math.cos(r * h) * n, u, p, d, c), g.push(f++, f++);
                g.push(f - 1) } if (t.lineWidth) { var y = t.points; for (t.points = [], h = 0; h < 41; h++) t.points.push(o + Math.sin(r * h) * i, a + Math.cos(r * h) * n);
                PIXI.WebGLGraphics.buildLine(t, e), t.points = y } }, PIXI.WebGLGraphics.buildLine = function(t, e) { var i = 0,
                n = t.points; if (0 !== n.length) { if (t.lineWidth % 2)
                    for (i = 0; i < n.length; i++) n[i] += .5; var s = new PIXI.Point(n[0], n[1]),
                    o = new PIXI.Point(n[n.length - 2], n[n.length - 1]); if (s.x === o.x && s.y === o.y) {
                    (n = n.slice()).pop(), n.pop(); var a = (o = new PIXI.Point(n[n.length - 2], n[n.length - 1])).x + .5 * (s.x - o.x),
                        r = o.y + .5 * (s.y - o.y);
                    n.unshift(a, r), n.push(a, r) } var h, l, c, u, p, d, m, g, f, y, v, b, _, S, w, C, A, T, x, P, I, O, E = e.points,
                    L = e.indices,
                    k = n.length / 2,
                    M = n.length,
                    B = E.length / 6,
                    D = t.lineWidth / 2,
                    G = PIXI.hex2rgb(t.lineColor),
                    R = t.lineAlpha,
                    U = G[0] * R,
                    F = G[1] * R,
                    N = G[2] * R; for (c = n[0], u = n[1], p = n[2], f = -(u - (d = n[3])), y = c - p, f /= O = Math.sqrt(f * f + y * y), y /= O, f *= D, y *= D, E.push(c - f, u - y, U, F, N, R), E.push(c + f, u + y, U, F, N, R), i = 1; i < k - 1; i++) c = n[2 * (i - 1)], u = n[2 * (i - 1) + 1], p = n[2 * i], d = n[2 * i + 1], m = n[2 * (i + 1)], g = n[2 * (i + 1) + 1], f = -(u - d), y = c - p, f /= O = Math.sqrt(f * f + y * y), y /= O, f *= D, y *= D, v = -(d - g), b = p - m, v /= O = Math.sqrt(v * v + b * b), b /= O, A = (-f + c) * (-y + d) - (-f + p) * (-y + u), P = (-(v *= D) + m) * (-(b *= D) + d) - (-v + p) * (-b + g), I = (w = -y + u - (-y + d)) * (x = -v + p - (-v + m)) - (T = -b + g - (-b + d)) * (C = -f + p - (-f + c)), Math.abs(I) < .1 ? (I += 10.1, E.push(p - f, d - y, U, F, N, R), E.push(p + f, d + y, U, F, N, R)) : ((h = (C * P - x * A) / I) - p) * (h - p) + ((l = (T * A - w * P) / I) - d) + (l - d) > 19600 ? (_ = f - v, S = y - b, _ /= O = Math.sqrt(_ * _ + S * S), S /= O, _ *= D, S *= D, E.push(p - _, d - S), E.push(U, F, N, R), E.push(p + _, d + S), E.push(U, F, N, R), E.push(p - _, d - S), E.push(U, F, N, R), M++) : (E.push(h, l), E.push(U, F, N, R), E.push(p - (h - p), d - (l - d)), E.push(U, F, N, R)); for (c = n[2 * (k - 2)], u = n[2 * (k - 2) + 1], p = n[2 * (k - 1)], f = -(u - (d = n[2 * (k - 1) + 1])), y = c - p, f /= O = Math.sqrt(f * f + y * y), y /= O, f *= D, y *= D, E.push(p - f, d - y), E.push(U, F, N, R), E.push(p + f, d + y), E.push(U, F, N, R), L.push(B), i = 0; i < M; i++) L.push(B++);
                L.push(B - 1) } }, PIXI.WebGLGraphics.buildComplexPoly = function(t, e) { var i = t.points.slice(); if (!(i.length < 6)) { var n = e.indices;
                e.points = i, e.alpha = t.fillAlpha, e.color = PIXI.hex2rgb(t.fillColor); for (var s, o, a = 1 / 0, r = -1 / 0, h = 1 / 0, l = -1 / 0, c = 0; c < i.length; c += 2) s = i[c], o = i[c + 1], a = s < a ? s : a, r = s > r ? s : r, h = o < h ? o : h, l = o > l ? o : l;
                i.push(a, h, r, h, r, l, a, l); var u = i.length / 2; for (c = 0; c < u; c++) n.push(c) } }, PIXI.WebGLGraphics.buildPoly = function(t, e) { var i = t.points; if (!(i.length < 6)) { var n = e.points,
                    s = e.indices,
                    o = i.length / 2,
                    a = PIXI.hex2rgb(t.fillColor),
                    r = t.fillAlpha,
                    h = a[0] * r,
                    l = a[1] * r,
                    c = a[2] * r,
                    u = PIXI.EarCut.Triangulate(i, null, 2); if (!u) return !1; var p = n.length / 6,
                    d = 0; for (d = 0; d < u.length; d += 3) s.push(u[d] + p), s.push(u[d] + p), s.push(u[d + 1] + p), s.push(u[d + 2] + p), s.push(u[d + 2] + p); for (d = 0; d < o; d++) n.push(i[2 * d], i[2 * d + 1], h, l, c, r); return !0 } }, PIXI.WebGLGraphics.graphicsDataPool = [], PIXI.WebGLGraphicsData = function(t) { this.gl = t, this.color = [0, 0, 0], this.points = [], this.indices = [], this.buffer = t.createBuffer(), this.indexBuffer = t.createBuffer(), this.mode = 1, this.alpha = 1, this.dirty = !0 }, PIXI.WebGLGraphicsData.prototype.reset = function() { this.points = [], this.indices = [] }, PIXI.WebGLGraphicsData.prototype.upload = function() { var t = this.gl;
            this.glPoints = new PIXI.Float32Array(this.points), t.bindBuffer(t.ARRAY_BUFFER, this.buffer), t.bufferData(t.ARRAY_BUFFER, this.glPoints, t.STATIC_DRAW), this.glIndicies = new PIXI.Uint16Array(this.indices), t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.indexBuffer), t.bufferData(t.ELEMENT_ARRAY_BUFFER, this.glIndicies, t.STATIC_DRAW), this.dirty = !1 }, PIXI.CanvasGraphics = function() {}, PIXI.CanvasGraphics.renderGraphics = function(t, e) { var i = t.worldAlpha;
            t.dirty && (this.updateGraphicsTint(t), t.dirty = !1); for (var n = 0; n < t.graphicsData.length; n++) { var s = t.graphicsData[n],
                    o = s.shape,
                    a = s._fillTint,
                    r = s._lineTint; if (e.lineWidth = s.lineWidth, s.type === PIXI.Graphics.POLY) { e.beginPath(); var h = o.points;
                    e.moveTo(h[0], h[1]); for (var l = 1; l < h.length / 2; l++) e.lineTo(h[2 * l], h[2 * l + 1]);
                    o.closed && e.lineTo(h[0], h[1]), h[0] === h[h.length - 2] && h[1] === h[h.length - 1] && e.closePath(), s.fill && (e.globalAlpha = s.fillAlpha * i, e.fillStyle = "#" + ("00000" + (0 | a).toString(16)).substr(-6), e.fill()), s.lineWidth && (e.globalAlpha = s.lineAlpha * i, e.strokeStyle = "#" + ("00000" + (0 | r).toString(16)).substr(-6), e.stroke()) } else if (s.type === PIXI.Graphics.RECT)(s.fillColor || 0 === s.fillColor) && (e.globalAlpha = s.fillAlpha * i, e.fillStyle = "#" + ("00000" + (0 | a).toString(16)).substr(-6), e.fillRect(o.x, o.y, o.width, o.height)), s.lineWidth && (e.globalAlpha = s.lineAlpha * i, e.strokeStyle = "#" + ("00000" + (0 | r).toString(16)).substr(-6), e.strokeRect(o.x, o.y, o.width, o.height));
                else if (s.type === PIXI.Graphics.CIRC) e.beginPath(), e.arc(o.x, o.y, o.radius, 0, 2 * Math.PI), e.closePath(), s.fill && (e.globalAlpha = s.fillAlpha * i, e.fillStyle = "#" + ("00000" + (0 | a).toString(16)).substr(-6), e.fill()), s.lineWidth && (e.globalAlpha = s.lineAlpha * i, e.strokeStyle = "#" + ("00000" + (0 | r).toString(16)).substr(-6), e.stroke());
                else if (s.type === PIXI.Graphics.ELIP) { var c = 2 * o.width,
                        u = 2 * o.height,
                        p = o.x - c / 2,
                        d = o.y - u / 2;
                    e.beginPath(); var m = c / 2 * .5522848,
                        g = u / 2 * .5522848,
                        f = p + c,
                        y = d + u,
                        v = p + c / 2,
                        b = d + u / 2;
                    e.moveTo(p, b), e.bezierCurveTo(p, b - g, v - m, d, v, d), e.bezierCurveTo(v + m, d, f, b - g, f, b), e.bezierCurveTo(f, b + g, v + m, y, v, y), e.bezierCurveTo(v - m, y, p, b + g, p, b), e.closePath(), s.fill && (e.globalAlpha = s.fillAlpha * i, e.fillStyle = "#" + ("00000" + (0 | a).toString(16)).substr(-6), e.fill()), s.lineWidth && (e.globalAlpha = s.lineAlpha * i, e.strokeStyle = "#" + ("00000" + (0 | r).toString(16)).substr(-6), e.stroke()) } else if (s.type === PIXI.Graphics.RREC) { var _ = o.x,
                        S = o.y,
                        w = o.width,
                        C = o.height,
                        A = o.radius,
                        T = Math.min(w, C) / 2 | 0;
                    A = A > T ? T : A, e.beginPath(), e.moveTo(_, S + A), e.lineTo(_, S + C - A), e.quadraticCurveTo(_, S + C, _ + A, S + C), e.lineTo(_ + w - A, S + C), e.quadraticCurveTo(_ + w, S + C, _ + w, S + C - A), e.lineTo(_ + w, S + A), e.quadraticCurveTo(_ + w, S, _ + w - A, S), e.lineTo(_ + A, S), e.quadraticCurveTo(_, S, _, S + A), e.closePath(), (s.fillColor || 0 === s.fillColor) && (e.globalAlpha = s.fillAlpha * i, e.fillStyle = "#" + ("00000" + (0 | a).toString(16)).substr(-6), e.fill()), s.lineWidth && (e.globalAlpha = s.lineAlpha * i, e.strokeStyle = "#" + ("00000" + (0 | r).toString(16)).substr(-6), e.stroke()) } } }, PIXI.CanvasGraphics.renderGraphicsMask = function(t, e) { var i = t.graphicsData.length; if (0 !== i) { e.beginPath(); for (var n = 0; n < i; n++) { var s = t.graphicsData[n],
                        o = s.shape; if (s.type === PIXI.Graphics.POLY) { var a = o.points;
                        e.moveTo(a[0], a[1]); for (var r = 1; r < a.length / 2; r++) e.lineTo(a[2 * r], a[2 * r + 1]);
                        a[0] === a[a.length - 2] && a[1] === a[a.length - 1] && e.closePath() } else if (s.type === PIXI.Graphics.RECT) e.rect(o.x, o.y, o.width, o.height), e.closePath();
                    else if (s.type === PIXI.Graphics.CIRC) e.arc(o.x, o.y, o.radius, 0, 2 * Math.PI), e.closePath();
                    else if (s.type === PIXI.Graphics.ELIP) { var h = 2 * o.width,
                            l = 2 * o.height,
                            c = o.x - h / 2,
                            u = o.y - l / 2,
                            p = h / 2 * .5522848,
                            d = l / 2 * .5522848,
                            m = c + h,
                            g = u + l,
                            f = c + h / 2,
                            y = u + l / 2;
                        e.moveTo(c, y), e.bezierCurveTo(c, y - d, f - p, u, f, u), e.bezierCurveTo(f + p, u, m, y - d, m, y), e.bezierCurveTo(m, y + d, f + p, g, f, g), e.bezierCurveTo(f - p, g, c, y + d, c, y), e.closePath() } else if (s.type === PIXI.Graphics.RREC) { var v = o.x,
                            b = o.y,
                            _ = o.width,
                            S = o.height,
                            w = o.radius,
                            C = Math.min(_, S) / 2 | 0;
                        w = w > C ? C : w, e.moveTo(v, b + w), e.lineTo(v, b + S - w), e.quadraticCurveTo(v, b + S, v + w, b + S), e.lineTo(v + _ - w, b + S), e.quadraticCurveTo(v + _, b + S, v + _, b + S - w), e.lineTo(v + _, b + w), e.quadraticCurveTo(v + _, b, v + _ - w, b), e.lineTo(v + w, b), e.quadraticCurveTo(v, b, v, b + w), e.closePath() } } } }, PIXI.CanvasGraphics.updateGraphicsTint = function(t) { if (16777215 !== t.tint)
                for (var e = (t.tint >> 16 & 255) / 255, i = (t.tint >> 8 & 255) / 255, n = (255 & t.tint) / 255, s = 0; s < t.graphicsData.length; s++) { var o = t.graphicsData[s],
                        a = 0 | o.fillColor,
                        r = 0 | o.lineColor;
                    o._fillTint = ((a >> 16 & 255) / 255 * e * 255 << 16) + ((a >> 8 & 255) / 255 * i * 255 << 8) + (255 & a) / 255 * n * 255, o._lineTint = ((r >> 16 & 255) / 255 * e * 255 << 16) + ((r >> 8 & 255) / 255 * i * 255 << 8) + (255 & r) / 255 * n * 255 } }, i.Graphics = function(t, e, n) { void 0 === e && (e = 0), void 0 === n && (n = 0), this.type = i.GRAPHICS, this.physicsType = i.SPRITE, this.anchor = new i.Point, PIXI.Graphics.call(this), i.Component.Core.init.call(this, t, e, n, "", null) }, i.Graphics.prototype = Object.create(PIXI.Graphics.prototype), i.Graphics.prototype.constructor = i.Graphics, i.Component.Core.install.call(i.Graphics.prototype, ["Angle", "AutoCull", "Bounds", "Destroy", "FixedToCamera", "InputEnabled", "InWorld", "LifeSpan", "PhysicsBody", "Reset"]), i.Graphics.prototype.preUpdatePhysics = i.Component.PhysicsBody.preUpdate, i.Graphics.prototype.preUpdateLifeSpan = i.Component.LifeSpan.preUpdate, i.Graphics.prototype.preUpdateInWorld = i.Component.InWorld.preUpdate, i.Graphics.prototype.preUpdateCore = i.Component.Core.preUpdate, i.Graphics.prototype.preUpdate = function() { return !!(this.preUpdatePhysics() && this.preUpdateLifeSpan() && this.preUpdateInWorld()) && this.preUpdateCore() }, i.Graphics.prototype.postUpdate = function() { i.Component.PhysicsBody.postUpdate.call(this), i.Component.FixedToCamera.postUpdate.call(this), this._boundsDirty && (this.updateLocalBounds(), this._boundsDirty = !1); for (var t = 0; t < this.children.length; t++) this.children[t].postUpdate() }, i.Graphics.prototype.destroy = function(t) { this.clear(), i.Component.Destroy.prototype.destroy.call(this, t) }, i.Graphics.prototype.drawTriangle = function(t, e) { void 0 === e && (e = !1); var n = new i.Polygon(t); if (e) { var s = new i.Point(this.game.camera.x - t[0].x, this.game.camera.y - t[0].y),
                    o = new i.Point(t[1].x - t[0].x, t[1].y - t[0].y),
                    a = new i.Point(t[1].x - t[2].x, t[1].y - t[2].y).cross(o);
                s.dot(a) > 0 && this.drawPolygon(n) } else this.drawPolygon(n) }, i.Graphics.prototype.drawTriangles = function(t, e, n) { void 0 === n && (n = !1); var s, o = new i.Point,
                a = new i.Point,
                r = new i.Point,
                h = []; if (e)
                if (t[0] instanceof i.Point)
                    for (s = 0; s < e.length / 3; s++) h.push(t[e[3 * s]]), h.push(t[e[3 * s + 1]]), h.push(t[e[3 * s + 2]]), 3 === h.length && (this.drawTriangle(h, n), h = []);
                else
                    for (s = 0; s < e.length; s++) o.x = t[2 * e[s]], o.y = t[2 * e[s] + 1], h.push(o.copyTo({})), 3 === h.length && (this.drawTriangle(h, n), h = []);
            else if (t[0] instanceof i.Point)
                for (s = 0; s < t.length / 3; s++) this.drawTriangle([t[3 * s], t[3 * s + 1], t[3 * s + 2]], n);
            else
                for (s = 0; s < t.length / 6; s++) o.x = t[6 * s + 0], o.y = t[6 * s + 1], a.x = t[6 * s + 2], a.y = t[6 * s + 3], r.x = t[6 * s + 4], r.y = t[6 * s + 5], this.drawTriangle([o, a, r], n) }, i.RenderTexture = function(t, e, n, s, o, a) { void 0 === s && (s = ""), void 0 === o && (o = i.scaleModes.DEFAULT), void 0 === a && (a = 1), this.game = t, this.key = s, this.type = i.RENDERTEXTURE, this._tempMatrix = new PIXI.Matrix, PIXI.RenderTexture.call(this, e, n, this.game.renderer, o, a), this.render = i.RenderTexture.prototype.render }, i.RenderTexture.prototype = Object.create(PIXI.RenderTexture.prototype), i.RenderTexture.prototype.constructor = i.RenderTexture, i.RenderTexture.prototype.renderXY = function(t, e, i, n) { t.updateTransform(), this._tempMatrix.copyFrom(t.worldTransform), this._tempMatrix.tx = e, this._tempMatrix.ty = i, this.renderer.type === PIXI.WEBGL_RENDERER ? this.renderWebGL(t, this._tempMatrix, n) : this.renderCanvas(t, this._tempMatrix, n) }, i.RenderTexture.prototype.renderRawXY = function(t, e, i, n) { this._tempMatrix.identity().translate(e, i), this.renderer.type === PIXI.WEBGL_RENDERER ? this.renderWebGL(t, this._tempMatrix, n) : this.renderCanvas(t, this._tempMatrix, n) }, i.RenderTexture.prototype.render = function(t, e, i) { void 0 === e || null === e ? this._tempMatrix.copyFrom(t.worldTransform) : this._tempMatrix.copyFrom(e), this.renderer.type === PIXI.WEBGL_RENDERER ? this.renderWebGL(t, this._tempMatrix, i) : this.renderCanvas(t, this._tempMatrix, i) }, i.Text = function(t, e, n, s, o) { e = e || 0, n = n || 0, s = void 0 === s || null === s ? "" : s.toString(), o = i.Utils.extend({}, o), this.type = i.TEXT, this.physicsType = i.SPRITE, this.padding = new i.Point, this.textBounds = null, this.canvas = PIXI.CanvasPool.create(this), this.context = this.canvas.getContext("2d"), this.colors = [], this.strokeColors = [], this.fontStyles = [], this.fontWeights = [], this.autoRound = !1, this.useAdvancedWrap = !1, this._res = t.renderer.resolution, this._text = s, this._fontComponents = null, this._lineSpacing = 0, this._charCount = 0, this._width = 0, this._height = 0, i.Sprite.call(this, t, e, n, PIXI.Texture.fromCanvas(this.canvas)), this.setStyle(o), "" !== s && this.updateText() }, i.Text.prototype = Object.create(i.Sprite.prototype), i.Text.prototype.constructor = i.Text, i.Text.prototype.preUpdate = function() { return !!(this.preUpdatePhysics() && this.preUpdateLifeSpan() && this.preUpdateInWorld()) && this.preUpdateCore() }, i.Text.prototype.update = function() {}, i.Text.prototype.destroy = function(t) { this.texture.destroy(!0), i.Component.Destroy.prototype.destroy.call(this, t) }, i.Text.prototype.setShadow = function(t, e, i, n, s, o) { return void 0 === t && (t = 0), void 0 === e && (e = 0), void 0 === i && (i = "rgba(0, 0, 0, 1)"), void 0 === n && (n = 0), void 0 === s && (s = !0), void 0 === o && (o = !0), this.style.shadowOffsetX = t, this.style.shadowOffsetY = e, this.style.shadowColor = i, this.style.shadowBlur = n, this.style.shadowStroke = s, this.style.shadowFill = o, this.dirty = !0, this }, i.Text.prototype.setStyle = function(t, e) { void 0 === e && (e = !1), (t = t || {}).font = t.font || "bold 20pt Arial", t.backgroundColor = t.backgroundColor || null, t.fill = t.fill || "black", t.align = t.align || "left", t.boundsAlignH = t.boundsAlignH || "left", t.boundsAlignV = t.boundsAlignV || "top", t.stroke = t.stroke || "black", t.strokeThickness = t.strokeThickness || 0, t.wordWrap = t.wordWrap || !1, t.wordWrapWidth = t.wordWrapWidth || 100, t.maxLines = t.maxLines || 0, t.shadowOffsetX = t.shadowOffsetX || 0, t.shadowOffsetY = t.shadowOffsetY || 0, t.shadowColor = t.shadowColor || "rgba(0,0,0,0)", t.shadowBlur = t.shadowBlur || 0, t.tabs = t.tabs || 0; var i = this.fontToComponents(t.font); return t.fontStyle && (i.fontStyle = t.fontStyle), t.fontVariant && (i.fontVariant = t.fontVariant), t.fontWeight && (i.fontWeight = t.fontWeight), t.fontSize && ("number" == typeof t.fontSize && (t.fontSize = t.fontSize + "px"), i.fontSize = t.fontSize), this._fontComponents = i, t.font = this.componentsToFont(this._fontComponents), this.style = t, this.dirty = !0, e && this.updateText(), this }, i.Text.prototype.updateText = function() { this.texture.baseTexture.resolution = this._res, this.context.font = this.style.font; var t = this.text;
            this.style.wordWrap && (t = this.runWordWrap(this.text)); var e = t.split(/(?:\r\n|\r|\n)/),
                i = this.style.tabs,
                n = [],
                s = 0,
                o = this.determineFontProperties(this.style.font),
                a = e.length;
            this.style.maxLines > 0 && this.style.maxLines < e.length && (a = this.style.maxLines), this._charCount = 0; for (var r = 0; r < a; r++) { if (0 === i) { l = this.style.strokeThickness + this.padding.x;
                    this.colors.length > 0 || this.strokeColors.length > 0 || this.fontWeights.length > 0 || this.fontStyles.length > 0 ? l += this.measureLine(e[r]) : l += this.context.measureText(e[r]).width, this.style.wordWrap && (l -= this.context.measureText(" ").width) } else { var h = e[r].split(/(?:\t)/),
                        l = this.padding.x + this.style.strokeThickness; if (Array.isArray(i))
                        for (var c = 0, u = 0; u < h.length; u++) { var p = 0;
                            p = this.colors.length > 0 || this.strokeColors.length > 0 || this.fontWeights.length > 0 || this.fontStyles.length > 0 ? this.measureLine(h[u]) : Math.ceil(this.context.measureText(h[u]).width), u > 0 && (c += i[u - 1]), l = c + p } else
                            for (u = 0; u < h.length; u++) this.colors.length > 0 || this.strokeColors.length > 0 || this.fontWeights.length > 0 || this.fontStyles.length > 0 ? l += this.measureLine(h[u]) : l += Math.ceil(this.context.measureText(h[u]).width), l += this.game.math.snapToCeil(l, i) - l } n[r] = Math.ceil(l), s = Math.max(s, n[r]) } this.canvas.width = s * this._res; var d = o.fontSize + this.style.strokeThickness + this.padding.y,
                m = d * a,
                g = this._lineSpacing;
            g < 0 && Math.abs(g) > d && (g = -d), 0 !== g && (m += g > 0 ? g * e.length : g * (e.length - 1)), this.canvas.height = m * this._res, this.context.scale(this._res, this._res), navigator.isCocoonJS && this.context.clearRect(0, 0, this.canvas.width, this.canvas.height), this.style.backgroundColor && (this.context.fillStyle = this.style.backgroundColor, this.context.fillRect(0, 0, this.canvas.width, this.canvas.height)), this.context.fillStyle = this.style.fill, this.context.font = this.style.font, this.context.strokeStyle = this.style.stroke, this.context.textBaseline = "alphabetic", this.context.lineWidth = this.style.strokeThickness, this.context.lineCap = "round", this.context.lineJoin = "round"; var f, y; for (this._charCount = 0, r = 0; r < a; r++) f = this.style.strokeThickness / 2, y = this.style.strokeThickness / 2 + r * d + o.ascent, r > 0 && (y += g * r), "right" === this.style.align ? f += s - n[r] : "center" === this.style.align && (f += (s - n[r]) / 2), this.autoRound && (f = Math.round(f), y = Math.round(y)), this.colors.length > 0 || this.strokeColors.length > 0 || this.fontWeights.length > 0 || this.fontStyles.length > 0 ? this.updateLine(e[r], f, y) : (this.style.stroke && this.style.strokeThickness && (this.updateShadow(this.style.shadowStroke), 0 === i ? this.context.strokeText(e[r], f, y) : this.renderTabLine(e[r], f, y, !1)), this.style.fill && (this.updateShadow(this.style.shadowFill), 0 === i ? this.context.fillText(e[r], f, y) : this.renderTabLine(e[r], f, y, !0)));
            this.updateTexture(), this.dirty = !1 }, i.Text.prototype.renderTabLine = function(t, e, i, n) { var s = t.split(/(?:\t)/),
                o = this.style.tabs,
                a = 0; if (Array.isArray(o))
                for (var r = 0, h = 0; h < s.length; h++) h > 0 && (r += o[h - 1]), a = e + r, n ? this.context.fillText(s[h], a, i) : this.context.strokeText(s[h], a, i);
            else
                for (h = 0; h < s.length; h++) { var l = Math.ceil(this.context.measureText(s[h]).width);
                    a = this.game.math.snapToCeil(e, o), n ? this.context.fillText(s[h], a, i) : this.context.strokeText(s[h], a, i), e = a + l } }, i.Text.prototype.updateShadow = function(t) { t ? (this.context.shadowOffsetX = this.style.shadowOffsetX, this.context.shadowOffsetY = this.style.shadowOffsetY, this.context.shadowColor = this.style.shadowColor, this.context.shadowBlur = this.style.shadowBlur) : (this.context.shadowOffsetX = 0, this.context.shadowOffsetY = 0, this.context.shadowColor = 0, this.context.shadowBlur = 0) }, i.Text.prototype.measureLine = function(t) { for (var e = 0, i = 0; i < t.length; i++) { var n = t[i]; if (this.fontWeights.length > 0 || this.fontStyles.length > 0) { var s = this.fontToComponents(this.context.font);
                    this.fontStyles[this._charCount] && (s.fontStyle = this.fontStyles[this._charCount]), this.fontWeights[this._charCount] && (s.fontWeight = this.fontWeights[this._charCount]), this.context.font = this.componentsToFont(s) } this.style.stroke && this.style.strokeThickness && (this.strokeColors[this._charCount] && (this.context.strokeStyle = this.strokeColors[this._charCount]), this.updateShadow(this.style.shadowStroke)), this.style.fill && (this.colors[this._charCount] && (this.context.fillStyle = this.colors[this._charCount]), this.updateShadow(this.style.shadowFill)), e += this.context.measureText(n).width, this._charCount++ } return Math.ceil(e) }, i.Text.prototype.updateLine = function(t, e, i) { for (var n = 0; n < t.length; n++) { var s = t[n]; if (this.fontWeights.length > 0 || this.fontStyles.length > 0) { var o = this.fontToComponents(this.context.font);
                    this.fontStyles[this._charCount] && (o.fontStyle = this.fontStyles[this._charCount]), this.fontWeights[this._charCount] && (o.fontWeight = this.fontWeights[this._charCount]), this.context.font = this.componentsToFont(o) } this.style.stroke && this.style.strokeThickness && (this.strokeColors[this._charCount] && (this.context.strokeStyle = this.strokeColors[this._charCount]), this.updateShadow(this.style.shadowStroke), this.context.strokeText(s, e, i)), this.style.fill && (this.colors[this._charCount] && (this.context.fillStyle = this.colors[this._charCount]), this.updateShadow(this.style.shadowFill), this.context.fillText(s, e, i)), e += this.context.measureText(s).width, this._charCount++ } }, i.Text.prototype.clearColors = function() { return this.colors = [], this.strokeColors = [], this.dirty = !0, this }, i.Text.prototype.clearFontValues = function() { return this.fontStyles = [], this.fontWeights = [], this.dirty = !0, this }, i.Text.prototype.addColor = function(t, e) { return this.colors[e] = t, this.dirty = !0, this }, i.Text.prototype.addStrokeColor = function(t, e) { return this.strokeColors[e] = t, this.dirty = !0, this }, i.Text.prototype.addFontStyle = function(t, e) { return this.fontStyles[e] = t, this.dirty = !0, this }, i.Text.prototype.addFontWeight = function(t, e) { return this.fontWeights[e] = t, this.dirty = !0, this }, i.Text.prototype.precalculateWordWrap = function(t) { return this.texture.baseTexture.resolution = this._res, this.context.font = this.style.font, this.runWordWrap(t).split(/(?:\r\n|\r|\n)/) }, i.Text.prototype.runWordWrap = function(t) { return this.useAdvancedWrap ? this.advancedWordWrap(t) : this.basicWordWrap(t) }, i.Text.prototype.advancedWordWrap = function(t) { for (var e = this.context, i = this.style.wordWrapWidth, n = "", s = t.replace(/ +/gi, " ").split(/\r?\n/gi), o = s.length, a = 0; a < o; a++) { var r = s[a],
                    h = ""; if (r = r.replace(/^ *|\s*$/gi, ""), e.measureText(r).width < i) n += r + "\n";
                else { for (var l = i, c = r.split(" "), u = 0; u < c.length; u++) { var p = c[u],
                            d = p + " ",
                            m = e.measureText(d).width; if (m > l) { if (0 === u) { for (var g = d; g.length && (g = g.slice(0, -1), !((m = e.measureText(g).width) <= l));); if (!g.length) throw new Error("This text's wordWrapWidth setting is less than a single character!"); var f = p.substr(g.length);
                                c[u] = f, h += g } var y = c[u].length ? u : u + 1,
                                v = c.slice(y).join(" ").replace(/[ \n]*$/gi, "");
                            s[a + 1] = v + " " + (s[a + 1] || ""), o = s.length; break } h += d, l -= m } n += h.replace(/[ \n]*$/gi, "") + "\n" } } return n = n.replace(/[\s|\n]*$/gi, "") }, i.Text.prototype.basicWordWrap = function(t) { for (var e = "", i = t.split("\n"), n = 0; n < i.length; n++) { for (var s = this.style.wordWrapWidth, o = i[n].split(" "), a = 0; a < o.length; a++) { var r = this.context.measureText(o[a]).width,
                        h = r + this.context.measureText(" ").width;
                    h > s ? (a > 0 && (e += "\n"), e += o[a] + " ", s = this.style.wordWrapWidth - r) : (s -= h, e += o[a] + " ") } n < i.length - 1 && (e += "\n") } return e }, i.Text.prototype.updateFont = function(t) { var e = this.componentsToFont(t);
            this.style.font !== e && (this.style.font = e, this.dirty = !0, this.parent && this.updateTransform()) }, i.Text.prototype.fontToComponents = function(t) { var e = t.match(/^\s*(?:\b(normal|italic|oblique|inherit)?\b)\s*(?:\b(normal|small-caps|inherit)?\b)\s*(?:\b(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit)?\b)\s*(?:\b(xx-small|x-small|small|medium|large|x-large|xx-large|larger|smaller|0|\d*(?:[.]\d*)?(?:%|[a-z]{2,5}))?\b)\s*(.*)\s*$/); if (e) { var i = e[5].trim(); return /^(?:inherit|serif|sans-serif|cursive|fantasy|monospace)$/.exec(i) || /['",]/.exec(i) || (i = "'" + i + "'"), { font: t, fontStyle: e[1] || "normal", fontVariant: e[2] || "normal", fontWeight: e[3] || "normal", fontSize: e[4] || "medium", fontFamily: i } } return console.warn("Phaser.Text - unparsable CSS font: " + t), { font: t } }, i.Text.prototype.componentsToFont = function(t) { var e, i = []; return (e = t.fontStyle) && "normal" !== e && i.push(e), (e = t.fontVariant) && "normal" !== e && i.push(e), (e = t.fontWeight) && "normal" !== e && i.push(e), (e = t.fontSize) && "medium" !== e && i.push(e), (e = t.fontFamily) && i.push(e), i.length || i.push(t.font), i.join(" ") }, i.Text.prototype.setText = function(t, e) { return void 0 === e && (e = !1), this.text = t.toString() || "", e ? this.updateText() : this.dirty = !0, this }, i.Text.prototype.parseList = function(t) { if (!Array.isArray(t)) return this; for (var e = "", i = 0; i < t.length; i++) Array.isArray(t[i]) ? (e += t[i].join("\t"), i < t.length - 1 && (e += "\n")) : (e += t[i], i < t.length - 1 && (e += "\t")); return this.text = e, this.dirty = !0, this }, i.Text.prototype.setTextBounds = function(t, e, n, s) { return void 0 === t ? this.textBounds = null : (this.textBounds ? this.textBounds.setTo(t, e, n, s) : this.textBounds = new i.Rectangle(t, e, n, s), this.style.wordWrapWidth > n && (this.style.wordWrapWidth = n)), this.updateTexture(), this }, i.Text.prototype.updateTexture = function() { var t = this.texture.baseTexture,
                e = this.texture.crop,
                i = this.texture.frame,
                n = this.canvas.width,
                s = this.canvas.height; if (t.width = n, t.height = s, e.width = n, e.height = s, i.width = n, i.height = s, this.texture.width = n, this.texture.height = s, this._width = n, this._height = s, this.textBounds) { var o = this.textBounds.x,
                    a = this.textBounds.y; "right" === this.style.boundsAlignH ? o += this.textBounds.width - this.canvas.width / this.resolution : "center" === this.style.boundsAlignH && (o += this.textBounds.halfWidth - this.canvas.width / this.resolution / 2), "bottom" === this.style.boundsAlignV ? a += this.textBounds.height - this.canvas.height / this.resolution : "middle" === this.style.boundsAlignV && (a += this.textBounds.halfHeight - this.canvas.height / this.resolution / 2), this.pivot.x = -o, this.pivot.y = -a } this.renderable = 0 !== n && 0 !== s, this.texture.requiresReTint = !0, this.texture.baseTexture.dirty() }, i.Text.prototype._renderWebGL = function(t) { this.dirty && (this.updateText(), this.dirty = !1), PIXI.Sprite.prototype._renderWebGL.call(this, t) }, i.Text.prototype._renderCanvas = function(t) { this.dirty && (this.updateText(), this.dirty = !1), PIXI.Sprite.prototype._renderCanvas.call(this, t) }, i.Text.prototype.determineFontProperties = function(t) { var e = i.Text.fontPropertiesCache[t]; if (!e) { e = {}; var n = i.Text.fontPropertiesCanvas,
                    s = i.Text.fontPropertiesContext;
                s.font = t; var o = Math.ceil(s.measureText("|MÉq").width),
                    a = Math.ceil(s.measureText("|MÉq").width),
                    r = 2 * a; if (a = 1.4 * a | 0, n.width = o, n.height = r, s.fillStyle = "#f00", s.fillRect(0, 0, o, r), s.font = t, s.textBaseline = "alphabetic", s.fillStyle = "#000", s.fillText("|MÉq", 0, a), !s.getImageData(0, 0, o, r)) return e.ascent = a, e.descent = a + 6, e.fontSize = e.ascent + e.descent, i.Text.fontPropertiesCache[t] = e, e; var h, l, c = s.getImageData(0, 0, o, r).data,
                    u = c.length,
                    p = 4 * o,
                    d = 0,
                    m = !1; for (h = 0; h < a; h++) { for (l = 0; l < p; l += 4)
                        if (255 !== c[d + l]) { m = !0; break } if (m) break;
                    d += p } for (e.ascent = a - h, d = u - p, m = !1, h = r; h > a; h--) { for (l = 0; l < p; l += 4)
                        if (255 !== c[d + l]) { m = !0; break } if (m) break;
                    d -= p } e.descent = h - a, e.descent += 6, e.fontSize = e.ascent + e.descent, i.Text.fontPropertiesCache[t] = e } return e }, i.Text.prototype.getBounds = function(t) { return this.dirty && (this.updateText(), this.dirty = !1), PIXI.Sprite.prototype.getBounds.call(this, t) }, Object.defineProperty(i.Text.prototype, "text", { get: function() { return this._text }, set: function(t) { t !== this._text && (this._text = t.toString() || "", this.dirty = !0, this.parent && this.updateTransform()) } }), Object.defineProperty(i.Text.prototype, "cssFont", { get: function() { return this.componentsToFont(this._fontComponents) }, set: function(t) { t = t || "bold 20pt Arial", this._fontComponents = this.fontToComponents(t), this.updateFont(this._fontComponents) } }), Object.defineProperty(i.Text.prototype, "font", { get: function() { return this._fontComponents.fontFamily }, set: function(t) { t = (t = t || "Arial").trim(), /^(?:inherit|serif|sans-serif|cursive|fantasy|monospace)$/.exec(t) || /['",]/.exec(t) || (t = "'" + t + "'"), this._fontComponents.fontFamily = t, this.updateFont(this._fontComponents) } }), Object.defineProperty(i.Text.prototype, "fontSize", { get: function() { var t = this._fontComponents.fontSize; return t && /(?:^0$|px$)/.exec(t) ? parseInt(t, 10) : t }, set: function(t) { "number" == typeof(t = t || "0") && (t += "px"), this._fontComponents.fontSize = t, this.updateFont(this._fontComponents) } }), Object.defineProperty(i.Text.prototype, "fontWeight", { get: function() { return this._fontComponents.fontWeight || "normal" }, set: function(t) { t = t || "normal", this._fontComponents.fontWeight = t, this.updateFont(this._fontComponents) } }), Object.defineProperty(i.Text.prototype, "fontStyle", { get: function() { return this._fontComponents.fontStyle || "normal" }, set: function(t) { t = t || "normal", this._fontComponents.fontStyle = t, this.updateFont(this._fontComponents) } }), Object.defineProperty(i.Text.prototype, "fontVariant", { get: function() { return this._fontComponents.fontVariant || "normal" }, set: function(t) { t = t || "normal", this._fontComponents.fontVariant = t, this.updateFont(this._fontComponents) } }), Object.defineProperty(i.Text.prototype, "fill", { get: function() { return this.style.fill }, set: function(t) { t !== this.style.fill && (this.style.fill = t, this.dirty = !0) } }), Object.defineProperty(i.Text.prototype, "align", { get: function() { return this.style.align }, set: function(t) { t !== this.style.align && (this.style.align = t, this.dirty = !0) } }), Object.defineProperty(i.Text.prototype, "resolution", { get: function() { return this._res }, set: function(t) { t !== this._res && (this._res = t, this.dirty = !0) } }), Object.defineProperty(i.Text.prototype, "tabs", { get: function() { return this.style.tabs }, set: function(t) { t !== this.style.tabs && (this.style.tabs = t, this.dirty = !0) } }), Object.defineProperty(i.Text.prototype, "boundsAlignH", { get: function() { return this.style.boundsAlignH }, set: function(t) { t !== this.style.boundsAlignH && (this.style.boundsAlignH = t, this.dirty = !0) } }), Object.defineProperty(i.Text.prototype, "boundsAlignV", { get: function() { return this.style.boundsAlignV }, set: function(t) { t !== this.style.boundsAlignV && (this.style.boundsAlignV = t, this.dirty = !0) } }), Object.defineProperty(i.Text.prototype, "stroke", { get: function() { return this.style.stroke }, set: function(t) { t !== this.style.stroke && (this.style.stroke = t, this.dirty = !0) } }), Object.defineProperty(i.Text.prototype, "strokeThickness", { get: function() { return this.style.strokeThickness }, set: function(t) { t !== this.style.strokeThickness && (this.style.strokeThickness = t, this.dirty = !0) } }), Object.defineProperty(i.Text.prototype, "wordWrap", { get: function() { return this.style.wordWrap }, set: function(t) { t !== this.style.wordWrap && (this.style.wordWrap = t, this.dirty = !0) } }), Object.defineProperty(i.Text.prototype, "wordWrapWidth", { get: function() { return this.style.wordWrapWidth }, set: function(t) { t !== this.style.wordWrapWidth && (this.style.wordWrapWidth = t, this.dirty = !0) } }), Object.defineProperty(i.Text.prototype, "lineSpacing", { get: function() { return this._lineSpacing }, set: function(t) { t !== this._lineSpacing && (this._lineSpacing = parseFloat(t), this.dirty = !0, this.parent && this.updateTransform()) } }), Object.defineProperty(i.Text.prototype, "shadowOffsetX", { get: function() { return this.style.shadowOffsetX }, set: function(t) { t !== this.style.shadowOffsetX && (this.style.shadowOffsetX = t, this.dirty = !0) } }), Object.defineProperty(i.Text.prototype, "shadowOffsetY", { get: function() { return this.style.shadowOffsetY }, set: function(t) { t !== this.style.shadowOffsetY && (this.style.shadowOffsetY = t, this.dirty = !0) } }), Object.defineProperty(i.Text.prototype, "shadowColor", { get: function() { return this.style.shadowColor }, set: function(t) { t !== this.style.shadowColor && (this.style.shadowColor = t, this.dirty = !0) } }), Object.defineProperty(i.Text.prototype, "shadowBlur", { get: function() { return this.style.shadowBlur }, set: function(t) { t !== this.style.shadowBlur && (this.style.shadowBlur = t, this.dirty = !0) } }), Object.defineProperty(i.Text.prototype, "shadowStroke", { get: function() { return this.style.shadowStroke }, set: function(t) { t !== this.style.shadowStroke && (this.style.shadowStroke = t, this.dirty = !0) } }), Object.defineProperty(i.Text.prototype, "shadowFill", { get: function() { return this.style.shadowFill }, set: function(t) { t !== this.style.shadowFill && (this.style.shadowFill = t, this.dirty = !0) } }), Object.defineProperty(i.Text.prototype, "width", { get: function() { return this.dirty && (this.updateText(), this.dirty = !1), this.scale.x * this.texture.frame.width }, set: function(t) { this.scale.x = t / this.texture.frame.width, this._width = t } }), Object.defineProperty(i.Text.prototype, "height", { get: function() { return this.dirty && (this.updateText(), this.dirty = !1), this.scale.y * this.texture.frame.height }, set: function(t) { this.scale.y = t / this.texture.frame.height, this._height = t } }), i.Text.fontPropertiesCache = {}, i.Text.fontPropertiesCanvas = document.createElement("canvas"), i.Text.fontPropertiesContext = i.Text.fontPropertiesCanvas.getContext("2d"), i.BitmapText = function(t, e, n, s, o, a, r) { e = e || 0, n = n || 0, s = s || "", o = o || "", a = a || 32, r = r || "left", PIXI.DisplayObjectContainer.call(this), this.type = i.BITMAPTEXT, this.physicsType = i.SPRITE, this.textWidth = 0, this.textHeight = 0, this.anchor = new i.Point, this._prevAnchor = new i.Point, this._glyphs = [], this._maxWidth = 0, this._text = o.toString() || "", this._data = t.cache.getBitmapFont(s), this._font = s, this._fontSize = a, this._align = r, this._tint = 16777215, this.updateText(), this.dirty = !1, i.Component.Core.init.call(this, t, e, n, "", null) }, i.BitmapText.prototype = Object.create(PIXI.DisplayObjectContainer.prototype), i.BitmapText.prototype.constructor = i.BitmapText, i.Component.Core.install.call(i.BitmapText.prototype, ["Angle", "AutoCull", "Bounds", "Destroy", "FixedToCamera", "InputEnabled", "InWorld", "LifeSpan", "PhysicsBody", "Reset"]), i.BitmapText.prototype.preUpdatePhysics = i.Component.PhysicsBody.preUpdate, i.BitmapText.prototype.preUpdateLifeSpan = i.Component.LifeSpan.preUpdate, i.BitmapText.prototype.preUpdateInWorld = i.Component.InWorld.preUpdate, i.BitmapText.prototype.preUpdateCore = i.Component.Core.preUpdate, i.BitmapText.prototype.preUpdate = function() { return !!(this.preUpdatePhysics() && this.preUpdateLifeSpan() && this.preUpdateInWorld()) && this.preUpdateCore() }, i.BitmapText.prototype.postUpdate = function() { i.Component.PhysicsBody.postUpdate.call(this), i.Component.FixedToCamera.postUpdate.call(this), this.body && this.body.type === i.Physics.ARCADE && (this.textWidth === this.body.sourceWidth && this.textHeight === this.body.sourceHeight || this.body.setSize(this.textWidth, this.textHeight)) }, i.BitmapText.prototype.setText = function(t) { this.text = t }, i.BitmapText.prototype.scanLine = function(t, e, i) { for (var n = 0, s = 0, o = -1, a = 0, r = null, h = this._maxWidth > 0 ? this._maxWidth : null, l = [], c = 0; c < i.length; c++) { var u = c === i.length - 1; if (/(?:\r\n|\r|\n)/.test(i.charAt(c))) return { width: s, text: i.substr(0, c), end: u, chars: l }; var p = i.charCodeAt(c),
                    d = t.chars[p],
                    m = 0;
                void 0 === d && (p = 32, d = t.chars[p]); var g = r && d.kerning[r] ? d.kerning[r] : 0; if (/(\s)/.test(i.charAt(c)) && (o = c, a = s), m = (g + d.texture.width + d.xOffset) * e, h && s + m >= h && o > -1) return { width: a || s, text: i.substr(0, c - (c - o)), end: u, chars: l };
                s += (d.xAdvance + g) * e, l.push(n + (d.xOffset + g) * e), n += (d.xAdvance + g) * e, r = p } return { width: s, text: i, end: u, chars: l } }, i.BitmapText.prototype.cleanText = function(t, e) { void 0 === e && (e = ""); var i = this._data.font; if (!i) return ""; for (var n = /\r\n|\n\r|\n|\r/g, s = t.replace(n, "\n").split("\n"), o = 0; o < s.length; o++) { for (var a = "", r = s[o], h = 0; h < r.length; h++) a = i.chars[r.charCodeAt(h)] ? a.concat(r[h]) : a.concat(e);
                s[o] = a } return s.join("\n") }, i.BitmapText.prototype.updateText = function() { var t = this._data.font; if (t) { var e = this.text,
                    i = this._fontSize / t.size,
                    n = [],
                    s = 0;
                this.textWidth = 0;
                do {
                    (c = this.scanLine(t, i, e)).y = s, n.push(c), c.width > this.textWidth && (this.textWidth = c.width), s += t.lineHeight * i, e = e.substr(c.text.length + 1) } while (!1 === c.end);
                this.textHeight = s; for (var o = 0, a = 0, r = this.textWidth * this.anchor.x, h = this.textHeight * this.anchor.y, l = 0; l < n.length; l++) { var c = n[l]; "right" === this._align ? a = this.textWidth - c.width : "center" === this._align && (a = (this.textWidth - c.width) / 2); for (var u = 0; u < c.text.length; u++) { var p = c.text.charCodeAt(u),
                            d = t.chars[p];
                        void 0 === d && (p = 32, d = t.chars[p]); var m = this._glyphs[o];
                        m ? m.texture = d.texture : ((m = new PIXI.Sprite(d.texture)).name = c.text[u], this._glyphs.push(m)), m.position.x = c.chars[u] + a - r, m.position.y = c.y + d.yOffset * i - h, m.scale.set(i), m.tint = this.tint, m.texture.requiresReTint = !0, m.parent || this.addChild(m), o++ } } for (l = o; l < this._glyphs.length; l++) this.removeChild(this._glyphs[l]) } }, i.BitmapText.prototype.purgeGlyphs = function() { for (var t = this._glyphs.length, e = [], i = 0; i < this._glyphs.length; i++) this._glyphs[i].parent !== this ? this._glyphs[i].destroy() : e.push(this._glyphs[i]); return this._glyphs = [], this._glyphs = e, this.updateText(), t - e.length }, i.BitmapText.prototype.updateTransform = function() {!this.dirty && this.anchor.equals(this._prevAnchor) || (this.updateText(), this.dirty = !1, this._prevAnchor.copyFrom(this.anchor)), PIXI.DisplayObjectContainer.prototype.updateTransform.call(this) }, Object.defineProperty(i.BitmapText.prototype, "align", { get: function() { return this._align }, set: function(t) { t === this._align || "left" !== t && "center" !== t && "right" !== t || (this._align = t, this.updateText()) } }), Object.defineProperty(i.BitmapText.prototype, "tint", { get: function() { return this._tint }, set: function(t) { t !== this._tint && (this._tint = t, this.updateText()) } }), Object.defineProperty(i.BitmapText.prototype, "font", { get: function() { return this._font }, set: function(t) { t !== this._font && (this._font = t.trim(), this._data = this.game.cache.getBitmapFont(this._font), this.updateText()) } }), Object.defineProperty(i.BitmapText.prototype, "fontSize", { get: function() { return this._fontSize }, set: function(t) {
                (t = parseInt(t, 10)) !== this._fontSize && t > 0 && (this._fontSize = t, this.updateText()) } }), Object.defineProperty(i.BitmapText.prototype, "text", { get: function() { return this._text }, set: function(t) { t !== this._text && (this._text = t.toString() || "", this.updateText()) } }), Object.defineProperty(i.BitmapText.prototype, "maxWidth", { get: function() { return this._maxWidth }, set: function(t) { t !== this._maxWidth && (this._maxWidth = t, this.updateText()) } }), Object.defineProperty(i.BitmapText.prototype, "smoothed", { get: function() { return !this._data.base.scaleMode }, set: function(t) { this._data.base.scaleMode = t ? 0 : 1 } }), i.RetroFont = function(t, e, n, s, o, a, r, h, l, c) { if (!t.cache.checkImageKey(e)) return !1;
            void 0 !== a && null !== a || (a = t.cache.getImage(e).width / n), this.characterWidth = n, this.characterHeight = s, this.characterSpacingX = r || 0, this.characterSpacingY = h || 0, this.characterPerRow = a, this.offsetX = l || 0, this.offsetY = c || 0, this.align = "left", this.multiLine = !1, this.autoUpperCase = !0, this.customSpacingX = 0, this.customSpacingY = 0, this.fixedWidth = 0, this.fontSet = t.cache.getImage(e), this._text = "", this.grabData = [], this.frameData = new i.FrameData; for (var u = this.offsetX, p = this.offsetY, d = 0, m = 0; m < o.length; m++) { var g = this.frameData.addFrame(new i.Frame(m, u, p, this.characterWidth, this.characterHeight));
                this.grabData[o.charCodeAt(m)] = g.index, ++d === this.characterPerRow ? (d = 0, u = this.offsetX, p += this.characterHeight + this.characterSpacingY) : u += this.characterWidth + this.characterSpacingX } t.cache.updateFrameData(e, this.frameData), this.stamp = new i.Image(t, 0, 0, e, 0), i.RenderTexture.call(this, t, 100, 100, "", i.scaleModes.NEAREST), this.type = i.RETROFONT }, i.RetroFont.prototype = Object.create(i.RenderTexture.prototype), i.RetroFont.prototype.constructor = i.RetroFont, i.RetroFont.ALIGN_LEFT = "left", i.RetroFont.ALIGN_RIGHT = "right", i.RetroFont.ALIGN_CENTER = "center", i.RetroFont.TEXT_SET1 = " !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~", i.RetroFont.TEXT_SET2 = " !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ", i.RetroFont.TEXT_SET3 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ", i.RetroFont.TEXT_SET4 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789", i.RetroFont.TEXT_SET5 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789", i.RetroFont.TEXT_SET6 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789\"(),-.' ", i.RetroFont.TEXT_SET7 = "AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW\")28FLRX-'39", i.RetroFont.TEXT_SET8 = "0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ", i.RetroFont.TEXT_SET9 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'\"?!", i.RetroFont.TEXT_SET10 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ", i.RetroFont.TEXT_SET11 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ.,\"-+!?()':;0123456789", i.RetroFont.prototype.setFixedWidth = function(t, e) { void 0 === e && (e = "left"), this.fixedWidth = t, this.align = e }, i.RetroFont.prototype.setText = function(t, e, i, n, s, o) { this.multiLine = e || !1, this.customSpacingX = i || 0, this.customSpacingY = n || 0, this.align = s || "left", this.autoUpperCase = !o, t.length > 0 && (this.text = t) }, i.RetroFont.prototype.buildRetroFontText = function() { var t = 0,
                e = 0; if (this.clear(), this.multiLine) { var n = this._text.split("\n");
                this.fixedWidth > 0 ? this.resize(this.fixedWidth, n.length * (this.characterHeight + this.customSpacingY) - this.customSpacingY, !0) : this.resize(this.getLongestLine() * (this.characterWidth + this.customSpacingX), n.length * (this.characterHeight + this.customSpacingY) - this.customSpacingY, !0); for (var s = 0; s < n.length; s++) t = 0, this.align === i.RetroFont.ALIGN_RIGHT ? t = this.width - n[s].length * (this.characterWidth + this.customSpacingX) : this.align === i.RetroFont.ALIGN_CENTER && (t = this.width / 2 - n[s].length * (this.characterWidth + this.customSpacingX) / 2, t += this.customSpacingX / 2), t < 0 && (t = 0), this.pasteLine(n[s], t, e, this.customSpacingX), e += this.characterHeight + this.customSpacingY } else this.fixedWidth > 0 ? this.resize(this.fixedWidth, this.characterHeight, !0) : this.resize(this._text.length * (this.characterWidth + this.customSpacingX), this.characterHeight, !0), t = 0, this.align === i.RetroFont.ALIGN_RIGHT ? t = this.width - this._text.length * (this.characterWidth + this.customSpacingX) : this.align === i.RetroFont.ALIGN_CENTER && (t = this.width / 2 - this._text.length * (this.characterWidth + this.customSpacingX) / 2, t += this.customSpacingX / 2), t < 0 && (t = 0), this.pasteLine(this._text, t, 0, this.customSpacingX);
            this.requiresReTint = !0 }, i.RetroFont.prototype.pasteLine = function(t, e, i, n) { for (var s = 0; s < t.length; s++)
                if (" " === t.charAt(s)) e += this.characterWidth + n;
                else if (this.grabData[t.charCodeAt(s)] >= 0 && (this.stamp.frame = this.grabData[t.charCodeAt(s)], this.renderXY(this.stamp, e, i, !1), (e += this.characterWidth + n) > this.width)) break }, i.RetroFont.prototype.getLongestLine = function() { var t = 0; if (this._text.length > 0)
                for (var e = this._text.split("\n"), i = 0; i < e.length; i++) e[i].length > t && (t = e[i].length); return t }, i.RetroFont.prototype.removeUnsupportedCharacters = function(t) { for (var e = "", i = 0; i < this._text.length; i++) { var n = this._text[i],
                    s = n.charCodeAt(0);
                (this.grabData[s] >= 0 || !t && "\n" === n) && (e = e.concat(n)) } return e }, i.RetroFont.prototype.updateOffset = function(t, e) { if (this.offsetX !== t || this.offsetY !== e) { for (var i = t - this.offsetX, n = e - this.offsetY, s = this.game.cache.getFrameData(this.stamp.key).getFrames(), o = s.length; o--;) s[o].x += i, s[o].y += n;
                this.buildRetroFontText() } }, Object.defineProperty(i.RetroFont.prototype, "text", { get: function() { return this._text }, set: function(t) { var e;
                (e = this.autoUpperCase ? t.toUpperCase() : t) !== this._text && (this._text = e, this.removeUnsupportedCharacters(this.multiLine), this.buildRetroFontText()) } }), Object.defineProperty(i.RetroFont.prototype, "smoothed", { get: function() { return this.stamp.smoothed }, set: function(t) { this.stamp.smoothed = t, this.buildRetroFontText() } }), i.Rope = function(t, e, n, s, o, a) { this.points = [], this.points = a, this._hasUpdateAnimation = !1, this._updateAnimationCallback = null, e = e || 0, n = n || 0, s = s || null, o = o || null, this.type = i.ROPE, PIXI.Rope.call(this, i.Cache.DEFAULT, this.points), i.Component.Core.init.call(this, t, e, n, s, o) }, i.Rope.prototype = Object.create(PIXI.Rope.prototype), i.Rope.prototype.constructor = i.Rope, i.Component.Core.install.call(i.Rope.prototype, ["Angle", "Animation", "AutoCull", "Bounds", "BringToTop", "Crop", "Delta", "Destroy", "FixedToCamera", "InWorld", "LifeSpan", "LoadTexture", "Overlap", "PhysicsBody", "Reset", "ScaleMinMax", "Smoothed"]), i.Rope.prototype.preUpdatePhysics = i.Component.PhysicsBody.preUpdate, i.Rope.prototype.preUpdateLifeSpan = i.Component.LifeSpan.preUpdate, i.Rope.prototype.preUpdateInWorld = i.Component.InWorld.preUpdate, i.Rope.prototype.preUpdateCore = i.Component.Core.preUpdate, i.Rope.prototype.preUpdate = function() { return !!(this.preUpdatePhysics() && this.preUpdateLifeSpan() && this.preUpdateInWorld()) && this.preUpdateCore() }, i.Rope.prototype.update = function() { this._hasUpdateAnimation && this.updateAnimation.call(this) }, i.Rope.prototype.reset = function(t, e) { return i.Component.Reset.prototype.reset.call(this, t, e), this }, Object.defineProperty(i.Rope.prototype, "updateAnimation", { get: function() { return this._updateAnimation }, set: function(t) { t && "function" == typeof t ? (this._hasUpdateAnimation = !0, this._updateAnimation = t) : (this._hasUpdateAnimation = !1, this._updateAnimation = null) } }), Object.defineProperty(i.Rope.prototype, "segments", { get: function() { for (var t, e, n, s, o, a, r, h, l = [], c = 0; c < this.points.length; c++) t = 4 * c, e = this.vertices[t] * this.scale.x, n = this.vertices[t + 1] * this.scale.y, s = this.vertices[t + 4] * this.scale.x, o = this.vertices[t + 3] * this.scale.y, a = i.Math.difference(e, s), r = i.Math.difference(n, o), e += this.world.x, n += this.world.y, h = new i.Rectangle(e, n, a, r), l.push(h); return l } }), i.TileSprite = function(t, e, n, s, o, a, r) { e = e || 0, n = n || 0, s = s || 256, o = o || 256, a = a || null, r = r || null, this.type = i.TILESPRITE, this.physicsType = i.SPRITE, this._scroll = new i.Point; var h = t.cache.getImage("__default", !0);
            PIXI.TilingSprite.call(this, new PIXI.Texture(h.base), s, o), i.Component.Core.init.call(this, t, e, n, a, r) }, i.TileSprite.prototype = Object.create(PIXI.TilingSprite.prototype), i.TileSprite.prototype.constructor = i.TileSprite, i.Component.Core.install.call(i.TileSprite.prototype, ["Angle", "Animation", "AutoCull", "Bounds", "BringToTop", "Destroy", "FixedToCamera", "Health", "InCamera", "InputEnabled", "InWorld", "LifeSpan", "LoadTexture", "Overlap", "PhysicsBody", "Reset", "Smoothed"]), i.TileSprite.prototype.preUpdatePhysics = i.Component.PhysicsBody.preUpdate, i.TileSprite.prototype.preUpdateLifeSpan = i.Component.LifeSpan.preUpdate, i.TileSprite.prototype.preUpdateInWorld = i.Component.InWorld.preUpdate, i.TileSprite.prototype.preUpdateCore = i.Component.Core.preUpdate, i.TileSprite.prototype.preUpdate = function() { return 0 !== this._scroll.x && (this.tilePosition.x += this._scroll.x * this.game.time.physicsElapsed), 0 !== this._scroll.y && (this.tilePosition.y += this._scroll.y * this.game.time.physicsElapsed), !!(this.preUpdatePhysics() && this.preUpdateLifeSpan() && this.preUpdateInWorld()) && this.preUpdateCore() }, i.TileSprite.prototype.autoScroll = function(t, e) { this._scroll.set(t, e) }, i.TileSprite.prototype.stopScroll = function() { this._scroll.set(0, 0) }, i.TileSprite.prototype.destroy = function(t) { i.Component.Destroy.prototype.destroy.call(this, t), PIXI.TilingSprite.prototype.destroy.call(this) }, i.TileSprite.prototype.reset = function(t, e) { return i.Component.Reset.prototype.reset.call(this, t, e), this.tilePosition.x = 0, this.tilePosition.y = 0, this }, i.Device = function() { this.deviceReadyAt = 0, this.initialized = !1, this.desktop = !1, this.iOS = !1, this.iOSVersion = 0, this.cocoonJS = !1, this.cocoonJSApp = !1, this.cordova = !1, this.node = !1, this.nodeWebkit = !1, this.electron = !1, this.ejecta = !1, this.crosswalk = !1, this.android = !1, this.chromeOS = !1, this.linux = !1, this.macOS = !1, this.windows = !1, this.windowsPhone = !1, this.canvas = !1, this.canvasBitBltShift = null, this.webGL = !1, this.file = !1, this.fileSystem = !1, this.localStorage = !1, this.worker = !1, this.css3D = !1, this.pointerLock = !1, this.typedArray = !1, this.vibration = !1, this.getUserMedia = !0, this.quirksMode = !1, this.touch = !1, this.mspointer = !1, this.wheelEvent = null, this.arora = !1, this.chrome = !1, this.chromeVersion = 0, this.epiphany = !1, this.firefox = !1, this.firefoxVersion = 0, this.ie = !1, this.ieVersion = 0, this.trident = !1, this.tridentVersion = 0, this.edge = !1, this.mobileSafari = !1, this.midori = !1, this.opera = !1, this.safari = !1, this.safariVersion = 0, this.webApp = !1, this.silk = !1, this.audioData = !1, this.webAudio = !1, this.ogg = !1, this.opus = !1, this.mp3 = !1, this.wav = !1, this.m4a = !1, this.webm = !1, this.dolby = !1, this.oggVideo = !1, this.h264Video = !1, this.mp4Video = !1, this.webmVideo = !1, this.vp9Video = !1, this.hlsVideo = !1, this.iPhone = !1, this.iPhone4 = !1, this.iPad = !1, this.pixelRatio = 0, this.littleEndian = !1, this.LITTLE_ENDIAN = !1, this.support32bit = !1, this.fullscreen = !1, this.requestFullscreen = "", this.cancelFullscreen = "", this.fullscreenKeyboard = !1 }, i.Device = new i.Device, i.Device.onInitialized = new i.Signal, i.Device.whenReady = function(t, e, i) { var n = this._readyCheck; if (this.deviceReadyAt || !n) t.call(e, this);
            else if (n._monitor || i) n._queue = n._queue || [], n._queue.push([t, e]);
            else { n._monitor = n.bind(this), n._queue = n._queue || [], n._queue.push([t, e]); var s = void 0 !== window.cordova,
                    o = navigator.isCocoonJS; "complete" === document.readyState || "interactive" === document.readyState ? window.setTimeout(n._monitor, 0) : s && !o ? document.addEventListener("deviceready", n._monitor, !1) : (document.addEventListener("DOMContentLoaded", n._monitor, !1), window.addEventListener("load", n._monitor, !1)) } }, i.Device._readyCheck = function() { var t = this._readyCheck; if (document.body) { if (!this.deviceReadyAt) { this.deviceReadyAt = Date.now(), document.removeEventListener("deviceready", t._monitor), document.removeEventListener("DOMContentLoaded", t._monitor), window.removeEventListener("load", t._monitor), this._initialize(), this.initialized = !0, this.onInitialized.dispatch(this); for (var e; e = t._queue.shift();) { var i = e[0],
                            n = e[1];
                        i.call(n, this) } this._readyCheck = null, this._initialize = null, this.onInitialized = null } } else window.setTimeout(t._monitor, 20) }, i.Device._initialize = function() {
            function t() { var t = new ArrayBuffer(4),
                    e = new Uint8Array(t),
                    i = new Uint32Array(t); return e[0] = 161, e[1] = 178, e[2] = 195, e[3] = 212, 3569595041 === i[0] || 2712847316 !== i[0] && null }

            function e() { if (void 0 === Uint8ClampedArray) return !1; var t = PIXI.CanvasPool.create(this, 1, 1).getContext("2d"); if (!t) return !1; var e = t.createImageData(1, 1); return PIXI.CanvasPool.remove(this), e.data instanceof Uint8ClampedArray } var i = this;! function() { var t = navigator.userAgent; /Playstation Vita/.test(t) ? i.vita = !0 : /Kindle/.test(t) || /\bKF[A-Z][A-Z]+/.test(t) || /Silk.*Mobile Safari/.test(t) ? i.kindle = !0 : /Android/.test(t) ? i.android = !0 : /CrOS/.test(t) ? i.chromeOS = !0 : /iP[ao]d|iPhone/i.test(t) ? (i.iOS = !0, navigator.appVersion.match(/OS (\d+)/), i.iOSVersion = parseInt(RegExp.$1, 10)) : /Linux/.test(t) ? i.linux = !0 : /Mac OS/.test(t) ? i.macOS = !0 : /Windows/.test(t) && (i.windows = !0), (/Windows Phone/i.test(t) || /IEMobile/i.test(t)) && (i.android = !1, i.iOS = !1, i.macOS = !1, i.windows = !0, i.windowsPhone = !0); var e = /Silk/.test(t);
                (i.windows || i.macOS || i.linux && !e || i.chromeOS) && (i.desktop = !0), (i.windowsPhone || /Windows NT/i.test(t) && /Touch/i.test(t)) && (i.desktop = !1) }(),
            function() { var t = navigator.userAgent; if (/Arora/.test(t) ? i.arora = !0 : /Edge\/\d+/.test(t) ? i.edge = !0 : /Chrome\/(\d+)/.test(t) && !i.windowsPhone ? (i.chrome = !0, i.chromeVersion = parseInt(RegExp.$1, 10)) : /Epiphany/.test(t) ? i.epiphany = !0 : /Firefox\D+(\d+)/.test(t) ? (i.firefox = !0, i.firefoxVersion = parseInt(RegExp.$1, 10)) : /AppleWebKit/.test(t) && i.iOS ? i.mobileSafari = !0 : /MSIE (\d+\.\d+);/.test(t) ? (i.ie = !0, i.ieVersion = parseInt(RegExp.$1, 10)) : /Midori/.test(t) ? i.midori = !0 : /Opera/.test(t) ? i.opera = !0 : /Safari\/(\d+)/.test(t) && !i.windowsPhone ? (i.safari = !0, /Version\/(\d+)\./.test(t) && (i.safariVersion = parseInt(RegExp.$1, 10))) : /Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(t) && (i.ie = !0, i.trident = !0, i.tridentVersion = parseInt(RegExp.$1, 10), i.ieVersion = parseInt(RegExp.$3, 10)), /Silk/.test(t) && (i.silk = !0), navigator.standalone && (i.webApp = !0), void 0 !== window.cordova && (i.cordova = !0), "undefined" != typeof process && "undefined" != typeof require && (i.node = !0), i.node && "object" == typeof process.versions && (i.nodeWebkit = !!process.versions["node-webkit"], i.electron = !!process.versions.electron), navigator.isCocoonJS && (i.cocoonJS = !0), i.cocoonJS) try { i.cocoonJSApp = "undefined" != typeof CocoonJS } catch (t) { i.cocoonJSApp = !1 } void 0 !== window.ejecta && (i.ejecta = !0), /Crosswalk/.test(t) && (i.crosswalk = !0) }(),
            function() { i.audioData = !!window.Audio, i.webAudio = !(!window.AudioContext && !window.webkitAudioContext); var t = document.createElement("audio"); try { if (t.canPlayType && (t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, "") && (i.ogg = !0), (t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/, "") || t.canPlayType("audio/opus;").replace(/^no$/, "")) && (i.opus = !0), t.canPlayType("audio/mpeg;").replace(/^no$/, "") && (i.mp3 = !0), t.canPlayType('audio/wav; codecs="1"').replace(/^no$/, "") && (i.wav = !0), (t.canPlayType("audio/x-m4a;") || t.canPlayType("audio/aac;").replace(/^no$/, "")) && (i.m4a = !0), t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/, "") && (i.webm = !0), "" !== t.canPlayType('audio/mp4;codecs="ec-3"')))
                        if (i.edge) i.dolby = !0;
                        else if (i.safari && i.safariVersion >= 9 && /Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)) { var e = parseInt(RegExp.$1, 10),
                            n = parseInt(RegExp.$2, 10);
                        (10 === e && n >= 11 || e > 10) && (i.dolby = !0) } } catch (t) {} }(),
            function() { var t = document.createElement("video"); try {!!t.canPlayType && (t.canPlayType('video/ogg; codecs="theora"').replace(/^no$/, "") && (i.oggVideo = !0), t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/, "") && (i.h264Video = !0, i.mp4Video = !0), t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/, "") && (i.webmVideo = !0), t.canPlayType('video/webm; codecs="vp9"').replace(/^no$/, "") && (i.vp9Video = !0), t.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/, "") && (i.hlsVideo = !0)) } catch (t) {} }(),
            function() { var t, e = document.createElement("p"),
                    n = { webkitTransform: "-webkit-transform", OTransform: "-o-transform", msTransform: "-ms-transform", MozTransform: "-moz-transform", transform: "transform" };
                document.body.insertBefore(e, null); for (var s in n) void 0 !== e.style[s] && (e.style[s] = "translate3d(1px,1px,1px)", t = window.getComputedStyle(e).getPropertyValue(n[s]));
                document.body.removeChild(e), i.css3D = void 0 !== t && t.length > 0 && "none" !== t }(), i.pixelRatio = window.devicePixelRatio || 1, i.iPhone = -1 !== navigator.userAgent.toLowerCase().indexOf("iphone"), i.iPhone4 = 2 === i.pixelRatio && i.iPhone, i.iPad = -1 !== navigator.userAgent.toLowerCase().indexOf("ipad"), "undefined" != typeof Int8Array ? i.typedArray = !0 : i.typedArray = !1, "undefined" != typeof ArrayBuffer && "undefined" != typeof Uint8Array && "undefined" != typeof Uint32Array && (i.littleEndian = t(), i.LITTLE_ENDIAN = i.littleEndian), i.support32bit = "undefined" != typeof ArrayBuffer && "undefined" != typeof Uint8ClampedArray && "undefined" != typeof Int32Array && null !== i.littleEndian && e(), navigator.vibrate = navigator.vibrate || navigator.webkitVibrate || navigator.mozVibrate || navigator.msVibrate, navigator.vibrate && (i.vibration = !0),
                function() { i.canvas = !!window.CanvasRenderingContext2D || i.cocoonJS; try { i.localStorage = !!localStorage.getItem } catch (t) { i.localStorage = !1 } i.file = !!(window.File && window.FileReader && window.FileList && window.Blob), i.fileSystem = !!window.requestFileSystem, i.webGL = function() { try { var t = document.createElement("canvas"); return t.screencanvas = !1, !!window.WebGLRenderingContext && (t.getContext("webgl") || t.getContext("experimental-webgl")) } catch (t) { return !1 } }(), i.webGL = !!i.webGL, i.worker = !!window.Worker, i.pointerLock = "pointerLockElement" in document || "mozPointerLockElement" in document || "webkitPointerLockElement" in document, i.quirksMode = "CSS1Compat" !== document.compatMode, navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia || navigator.oGetUserMedia, window.URL = window.URL || window.webkitURL || window.mozURL || window.msURL, i.getUserMedia = i.getUserMedia && !!navigator.getUserMedia && !!window.URL, i.firefox && i.firefoxVersion < 21 && (i.getUserMedia = !1), !i.iOS && (i.ie || i.firefox || i.chrome) && (i.canvasBitBltShift = !0), (i.safari || i.mobileSafari) && (i.canvasBitBltShift = !1) }(),
                function() { for (var t = ["requestFullscreen", "requestFullScreen", "webkitRequestFullscreen", "webkitRequestFullScreen", "msRequestFullscreen", "msRequestFullScreen", "mozRequestFullScreen", "mozRequestFullscreen"], e = document.createElement("div"), n = 0; n < t.length; n++)
                        if (e[t[n]]) { i.fullscreen = !0, i.requestFullscreen = t[n]; break } var s = ["cancelFullScreen", "exitFullscreen", "webkitCancelFullScreen", "webkitExitFullscreen", "msCancelFullScreen", "msExitFullscreen", "mozCancelFullScreen", "mozExitFullscreen"]; if (i.fullscreen)
                        for (n = 0; n < s.length; n++)
                            if (document[s[n]]) { i.cancelFullscreen = s[n]; break } window.Element && Element.ALLOW_KEYBOARD_INPUT && (i.fullscreenKeyboard = !0) }(), ("ontouchstart" in document.documentElement || window.navigator.maxTouchPoints && window.navigator.maxTouchPoints >= 1) && (i.touch = !0), (window.navigator.msPointerEnabled || window.navigator.pointerEnabled) && (i.mspointer = !0), i.cocoonJS || ("onwheel" in window || i.ie && "WheelEvent" in window ? i.wheelEvent = "wheel" : "onmousewheel" in window ? i.wheelEvent = "mousewheel" : i.firefox && "MouseScrollEvent" in window && (i.wheelEvent = "DOMMouseScroll")) }, i.Device.canPlayAudio = function(t) { return !("mp3" !== t || !this.mp3) || (!("ogg" !== t || !this.ogg && !this.opus) || (!("m4a" !== t || !this.m4a) || (!("opus" !== t || !this.opus) || (!("wav" !== t || !this.wav) || (!("webm" !== t || !this.webm) || !("mp4" !== t || !this.dolby)))))) }, i.Device.canPlayVideo = function(t) { return !("webm" !== t || !this.webmVideo && !this.vp9Video) || (!("mp4" !== t || !this.mp4Video && !this.h264Video) || (!("ogg" !== t && "ogv" !== t || !this.oggVideo) || !("mpeg" !== t || !this.hlsVideo))) }, i.Device.isConsoleOpen = function() { return !(!window.console || !window.console.firebug) || !(!window.console || (console.profile(), console.profileEnd(), console.clear && console.clear(), !console.profiles)) && console.profiles.length > 0 }, i.Device.isAndroidStockBrowser = function() { var t = window.navigator.userAgent.match(/Android.*AppleWebKit\/([\d.]+)/); return t && t[1] < 537 }, i.Canvas = { create: function(t, e, i, n, s) { e = e || 256, i = i || 256; var o = s ? document.createElement("canvas") : PIXI.CanvasPool.create(t, e, i); return "string" == typeof n && "" !== n && (o.id = n), o.width = e, o.height = i, o.style.display = "block", o }, setBackgroundColor: function(t, e) { return e = e || "rgb(0,0,0)", t.style.backgroundColor = e, t }, setTouchAction: function(t, e) { return e = e || "none", t.style.msTouchAction = e, t.style["ms-touch-action"] = e, t.style["touch-action"] = e, t }, setUserSelect: function(t, e) { return e = e || "none", t.style["-webkit-touch-callout"] = e, t.style["-webkit-user-select"] = e, t.style["-khtml-user-select"] = e, t.style["-moz-user-select"] = e, t.style["-ms-user-select"] = e, t.style["user-select"] = e, t.style["-webkit-tap-highlight-color"] = "rgba(0, 0, 0, 0)", t }, addToDOM: function(t, e, i) { var n; return void 0 === i && (i = !0), e && ("string" == typeof e ? n = document.getElementById(e) : "object" == typeof e && 1 === e.nodeType && (n = e)), n || (n = document.body), i && n.style && (n.style.overflow = "hidden"), n.appendChild(t), t }, removeFromDOM: function(t) { t.parentNode && t.parentNode.removeChild(t) }, setTransform: function(t, e, i, n, s, o, a) { return t.setTransform(n, o, a, s, e, i), t }, setSmoothingEnabled: function(t, e) { var n = i.Canvas.getSmoothingPrefix(t); return n && (t[n] = e), t }, getSmoothingPrefix: function(t) { var e = ["i", "webkitI", "msI", "mozI", "oI"]; for (var i in e) { var n = e[i] + "mageSmoothingEnabled"; if (n in t) return n } return null }, getSmoothingEnabled: function(t) { var e = i.Canvas.getSmoothingPrefix(t); if (e) return t[e] }, setImageRenderingCrisp: function(t) { for (var e = ["optimizeSpeed", "crisp-edges", "-moz-crisp-edges", "-webkit-optimize-contrast", "optimize-contrast", "pixelated"], i = 0; i < e.length; i++) t.style["image-rendering"] = e[i]; return t.style.msInterpolationMode = "nearest-neighbor", t }, setImageRenderingBicubic: function(t) { return t.style["image-rendering"] = "auto", t.style.msInterpolationMode = "bicubic", t } }, i.RequestAnimationFrame = function(t, e) { void 0 === e && (e = !1), this.game = t, this.isRunning = !1, this.forceSetTimeOut = e; for (var i = ["ms", "moz", "webkit", "o"], n = 0; n < i.length && !window.requestAnimationFrame; n++) window.requestAnimationFrame = window[i[n] + "RequestAnimationFrame"], window.cancelAnimationFrame = window[i[n] + "CancelAnimationFrame"];
            this._isSetTimeOut = !1, this._onLoop = null, this._timeOutID = null }, i.RequestAnimationFrame.prototype = { start: function() { this.isRunning = !0; var t = this;!window.requestAnimationFrame || this.forceSetTimeOut ? (this._isSetTimeOut = !0, this._onLoop = function() { return t.updateSetTimeout() }, this._timeOutID = window.setTimeout(this._onLoop, 0)) : (this._isSetTimeOut = !1, this._onLoop = function(e) { return t.updateRAF(e) }, this._timeOutID = window.requestAnimationFrame(this._onLoop)) }, updateRAF: function(t) { this.isRunning && (this.game.update(Math.floor(t)), this._timeOutID = window.requestAnimationFrame(this._onLoop)) }, updateSetTimeout: function() { this.isRunning && (this.game.update(Date.now()), this._timeOutID = window.setTimeout(this._onLoop, this.game.time.timeToCall)) }, stop: function() { this._isSetTimeOut ? clearTimeout(this._timeOutID) : window.cancelAnimationFrame(this._timeOutID), this.isRunning = !1 }, isSetTimeOut: function() { return this._isSetTimeOut }, isRAF: function() { return !1 === this._isSetTimeOut } }, i.RequestAnimationFrame.prototype.constructor = i.RequestAnimationFrame, i.Math = { PI2: 2 * Math.PI, between: function(t, e) { return Math.floor(Math.random() * (e - t + 1) + t) }, fuzzyEqual: function(t, e, i) { return void 0 === i && (i = 1e-4), Math.abs(t - e) < i }, fuzzyLessThan: function(t, e, i) { return void 0 === i && (i = 1e-4), t < e + i }, fuzzyGreaterThan: function(t, e, i) { return void 0 === i && (i = 1e-4), t > e - i }, fuzzyCeil: function(t, e) { return void 0 === e && (e = 1e-4), Math.ceil(t - e) }, fuzzyFloor: function(t, e) { return void 0 === e && (e = 1e-4), Math.floor(t + e) }, average: function() { for (var t = 0, e = arguments.length, i = 0; i < e; i++) t += +arguments[i]; return t / e }, shear: function(t) { return t % 1 }, snapTo: function(t, e, i) { return void 0 === i && (i = 0), 0 === e ? t : (t -= i, t = e * Math.round(t / e), i + t) }, snapToFloor: function(t, e, i) { return void 0 === i && (i = 0), 0 === e ? t : (t -= i, t = e * Math.floor(t / e), i + t) }, snapToCeil: function(t, e, i) { return void 0 === i && (i = 0), 0 === e ? t : (t -= i, t = e * Math.ceil(t / e), i + t) }, roundTo: function(t, e, i) { void 0 === e && (e = 0), void 0 === i && (i = 10); var n = Math.pow(i, -e); return Math.round(t * n) / n }, floorTo: function(t, e, i) { void 0 === e && (e = 0), void 0 === i && (i = 10); var n = Math.pow(i, -e); return Math.floor(t * n) / n }, ceilTo: function(t, e, i) { void 0 === e && (e = 0), void 0 === i && (i = 10); var n = Math.pow(i, -e); return Math.ceil(t * n) / n }, rotateToAngle: function(t, e, n) { return void 0 === n && (n = .05), t === e ? t : (Math.abs(e - t) <= n || Math.abs(e - t) >= i.Math.PI2 - n ? t = e : (Math.abs(e - t) > Math.PI && (e < t ? e += i.Math.PI2 : e -= i.Math.PI2), e > t ? t += n : e < t && (t -= n)), t) }, getShortestAngle: function(t, e) { var i = e - t; return 0 === i ? 0 : i - 360 * Math.floor((i - -180) / 360) }, angleBetween: function(t, e, i, n) { return Math.atan2(n - e, i - t) }, angleBetweenY: function(t, e, i, n) { return Math.atan2(i - t, n - e) }, angleBetweenPoints: function(t, e) { return Math.atan2(e.y - t.y, e.x - t.x) }, angleBetweenPointsY: function(t, e) { return Math.atan2(e.x - t.x, e.y - t.y) }, reverseAngle: function(t) { return this.normalizeAngle(t + Math.PI, !0) }, normalizeAngle: function(t) { return (t %= 2 * Math.PI) >= 0 ? t : t + 2 * Math.PI }, maxAdd: function(t, e, i) { return Math.min(t + e, i) }, minSub: function(t, e, i) { return Math.max(t - e, i) }, wrap: function(t, e, i) { var n = i - e; if (n <= 0) return 0; var s = (t - e) % n; return s < 0 && (s += n), s + e }, wrapValue: function(t, e, i) { return t = Math.abs(t), e = Math.abs(e), i = Math.abs(i), (t + e) % i }, isOdd: function(t) { return !!(1 & t) }, isEven: function(t) { return !(1 & t) }, min: function() { if (1 === arguments.length && "object" == typeof arguments[0]) t = arguments[0];
                else var t = arguments; for (var e = 1, i = 0, n = t.length; e < n; e++) t[e] < t[i] && (i = e); return t[i] }, max: function() { if (1 === arguments.length && "object" == typeof arguments[0]) t = arguments[0];
                else var t = arguments; for (var e = 1, i = 0, n = t.length; e < n; e++) t[e] > t[i] && (i = e); return t[i] }, minProperty: function(t) { if (2 === arguments.length && "object" == typeof arguments[1]) e = arguments[1];
                else var e = arguments.slice(1); for (var i = 1, n = 0, s = e.length; i < s; i++) e[i][t] < e[n][t] && (n = i); return e[n][t] }, maxProperty: function(t) { if (2 === arguments.length && "object" == typeof arguments[1]) e = arguments[1];
                else var e = arguments.slice(1); for (var i = 1, n = 0, s = e.length; i < s; i++) e[i][t] > e[n][t] && (n = i); return e[n][t] }, wrapAngle: function(t, e) { return e ? this.wrap(t, -Math.PI, Math.PI) : this.wrap(t, -180, 180) }, linearInterpolation: function(t, e) { var i = t.length - 1,
                    n = i * e,
                    s = Math.floor(n); return e < 0 ? this.linear(t[0], t[1], n) : e > 1 ? this.linear(t[i], t[i - 1], i - n) : this.linear(t[s], t[s + 1 > i ? i : s + 1], n - s) }, bezierInterpolation: function(t, e) { for (var i = 0, n = t.length - 1, s = 0; s <= n; s++) i += Math.pow(1 - e, n - s) * Math.pow(e, s) * t[s] * this.bernstein(n, s); return i }, catmullRomInterpolation: function(t, e) { var i = t.length - 1,
                    n = i * e,
                    s = Math.floor(n); return t[0] === t[i] ? (e < 0 && (s = Math.floor(n = i * (1 + e))), this.catmullRom(t[(s - 1 + i) % i], t[s], t[(s + 1) % i], t[(s + 2) % i], n - s)) : e < 0 ? t[0] - (this.catmullRom(t[0], t[0], t[1], t[1], -n) - t[0]) : e > 1 ? t[i] - (this.catmullRom(t[i], t[i], t[i - 1], t[i - 1], n - i) - t[i]) : this.catmullRom(t[s ? s - 1 : 0], t[s], t[i < s + 1 ? i : s + 1], t[i < s + 2 ? i : s + 2], n - s) }, linear: function(t, e, i) { return (e - t) * i + t }, bernstein: function(t, e) { return this.factorial(t) / this.factorial(e) / this.factorial(t - e) }, factorial: function(t) { if (0 === t) return 1; for (var e = t; --t;) e *= t; return e }, catmullRom: function(t, e, i, n, s) { var o = .5 * (i - t),
                    a = .5 * (n - e),
                    r = s * s; return (2 * e - 2 * i + o + a) * (s * r) + (-3 * e + 3 * i - 2 * o - a) * r + o * s + e }, difference: function(t, e) { return Math.abs(t - e) }, roundAwayFromZero: function(t) { return t > 0 ? Math.ceil(t) : Math.floor(t) }, sinCosGenerator: function(t, e, i, n) { void 0 === e && (e = 1), void 0 === i && (i = 1), void 0 === n && (n = 1); for (var s = e, o = i, a = n * Math.PI / t, r = [], h = [], l = 0; l < t; l++) s += (o -= s * a) * a, r[l] = o, h[l] = s; return { sin: h, cos: r, length: t } }, distance: function(t, e, i, n) { var s = t - i,
                    o = e - n; return Math.sqrt(s * s + o * o) }, distanceSq: function(t, e, i, n) { var s = t - i,
                    o = e - n; return s * s + o * o }, distancePow: function(t, e, i, n, s) { return void 0 === s && (s = 2), Math.sqrt(Math.pow(i - t, s) + Math.pow(n - e, s)) }, clamp: function(t, e, i) { return t < e ? e : i < t ? i : t }, clampBottom: function(t, e) { return t < e ? e : t }, within: function(t, e, i) { return Math.abs(t - e) <= i }, mapLinear: function(t, e, i, n, s) { return n + (t - e) * (s - n) / (i - e) }, smoothstep: function(t, e, i) { return (t = Math.max(0, Math.min(1, (t - e) / (i - e)))) * t * (3 - 2 * t) }, smootherstep: function(t, e, i) { return (t = Math.max(0, Math.min(1, (t - e) / (i - e)))) * t * t * (t * (6 * t - 15) + 10) }, sign: function(t) { return t < 0 ? -1 : t > 0 ? 1 : 0 }, percent: function(t, e, i) { return void 0 === i && (i = 0), t > e || i > e ? 1 : t < i || i > t ? 0 : (t - i) / e } }; var a = Math.PI / 180,
            r = 180 / Math.PI; return i.Math.degToRad = function(t) { return t * a }, i.Math.radToDeg = function(t) { return t * r }, i.RandomDataGenerator = function(t) { void 0 === t && (t = []), this.c = 1, this.s0 = 0, this.s1 = 0, this.s2 = 0, "string" == typeof t ? this.state(t) : this.sow(t) }, i.RandomDataGenerator.prototype = { rnd: function() { var t = 2091639 * this.s0 + 2.3283064365386963e-10 * this.c; return this.c = 0 | t, this.s0 = this.s1, this.s1 = this.s2, this.s2 = t - this.c, this.s2 }, sow: function(t) { if (this.s0 = this.hash(" "), this.s1 = this.hash(this.s0), this.s2 = this.hash(this.s1), this.c = 1, t)
                    for (var e = 0; e < t.length && null != t[e]; e++) { var i = t[e];
                        this.s0 -= this.hash(i), this.s0 += ~~(this.s0 < 0), this.s1 -= this.hash(i), this.s1 += ~~(this.s1 < 0), this.s2 -= this.hash(i), this.s2 += ~~(this.s2 < 0) } }, hash: function(t) { var e, i, n; for (n = 4022871197, t = t.toString(), i = 0; i < t.length; i++) e = .02519603282416938 * (n += t.charCodeAt(i)), e -= n = e >>> 0, n = (e *= n) >>> 0, n += 4294967296 * (e -= n); return 2.3283064365386963e-10 * (n >>> 0) }, integer: function() { return 4294967296 * this.rnd.apply(this) }, frac: function() { return this.rnd.apply(this) + 1.1102230246251565e-16 * (2097152 * this.rnd.apply(this) | 0) }, real: function() { return this.integer() + this.frac() }, integerInRange: function(t, e) { return Math.floor(this.realInRange(0, e - t + 1) + t) }, between: function(t, e) { return this.integerInRange(t, e) }, realInRange: function(t, e) { return this.frac() * (e - t) + t }, normal: function() { return 1 - 2 * this.frac() }, uuid: function() { var t = "",
                    e = ""; for (e = t = ""; t++ < 36; e += ~t % 5 | 3 * t & 4 ? (15 ^ t ? 8 ^ this.frac() * (20 ^ t ? 16 : 4) : 4).toString(16) : "-"); return e }, pick: function(t) { return t[this.integerInRange(0, t.length - 1)] }, sign: function() { return this.pick([-1, 1]) }, weightedPick: function(t) { return t[~~(Math.pow(this.frac(), 2) * (t.length - 1) + .5)] }, timestamp: function(t, e) { return this.realInRange(t || 9466848e5, e || 1577862e6) }, angle: function() { return this.integerInRange(-180, 180) }, state: function(t) { return "string" == typeof t && t.match(/^!rnd/) && (t = t.split(","), this.c = parseFloat(t[1]), this.s0 = parseFloat(t[2]), this.s1 = parseFloat(t[3]), this.s2 = parseFloat(t[4])), ["!rnd", this.c, this.s0, this.s1, this.s2].join(",") } }, i.RandomDataGenerator.prototype.constructor = i.RandomDataGenerator, i.QuadTree = function(t, e, i, n, s, o, a) { this.maxObjects = 10, this.maxLevels = 4, this.level = 0, this.bounds = {}, this.objects = [], this.nodes = [], this._empty = [], this.reset(t, e, i, n, s, o, a) }, i.QuadTree.prototype = { reset: function(t, e, i, n, s, o, a) { this.maxObjects = s || 10, this.maxLevels = o || 4, this.level = a || 0, this.bounds = { x: Math.round(t), y: Math.round(e), width: i, height: n, subWidth: Math.floor(i / 2), subHeight: Math.floor(n / 2), right: Math.round(t) + Math.floor(i / 2), bottom: Math.round(e) + Math.floor(n / 2) }, this.objects.length = 0, this.nodes.length = 0 }, populate: function(t) { t.forEach(this.populateHandler, this, !0) }, populateHandler: function(t) { t.body && t.exists && this.insert(t.body) }, split: function() { this.nodes[0] = new i.QuadTree(this.bounds.right, this.bounds.y, this.bounds.subWidth, this.bounds.subHeight, this.maxObjects, this.maxLevels, this.level + 1), this.nodes[1] = new i.QuadTree(this.bounds.x, this.bounds.y, this.bounds.subWidth, this.bounds.subHeight, this.maxObjects, this.maxLevels, this.level + 1), this.nodes[2] = new i.QuadTree(this.bounds.x, this.bounds.bottom, this.bounds.subWidth, this.bounds.subHeight, this.maxObjects, this.maxLevels, this.level + 1), this.nodes[3] = new i.QuadTree(this.bounds.right, this.bounds.bottom, this.bounds.subWidth, this.bounds.subHeight, this.maxObjects, this.maxLevels, this.level + 1) }, insert: function(t) { var e, i = 0; if (null == this.nodes[0] || -1 === (e = this.getIndex(t))) { if (this.objects.push(t), this.objects.length > this.maxObjects && this.level < this.maxLevels)
                        for (null == this.nodes[0] && this.split(); i < this.objects.length;) - 1 !== (e = this.getIndex(this.objects[i])) ? this.nodes[e].insert(this.objects.splice(i, 1)[0]) : i++ } else this.nodes[e].insert(t) }, getIndex: function(t) { var e = -1; return t.x < this.bounds.right && t.right < this.bounds.right ? t.y < this.bounds.bottom && t.bottom < this.bounds.bottom ? e = 1 : t.y > this.bounds.bottom && (e = 2) : t.x > this.bounds.right && (t.y < this.bounds.bottom && t.bottom < this.bounds.bottom ? e = 0 : t.y > this.bounds.bottom && (e = 3)), e }, retrieve: function(t) { if (t instanceof i.Rectangle) var e = this.objects,
                    n = this.getIndex(t);
                else { if (!t.body) return this._empty; var e = this.objects,
                        n = this.getIndex(t.body) } return this.nodes[0] && (e = -1 !== n ? e.concat(this.nodes[n].retrieve(t)) : (e = (e = (e = e.concat(this.nodes[0].retrieve(t))).concat(this.nodes[1].retrieve(t))).concat(this.nodes[2].retrieve(t))).concat(this.nodes[3].retrieve(t))), e }, clear: function() { this.objects.length = 0; for (var t = this.nodes.length; t--;) this.nodes[t].clear(), this.nodes.splice(t, 1);
                this.nodes.length = 0 } }, i.QuadTree.prototype.constructor = i.QuadTree, i.Net = function(t) { this.game = t }, i.Net.prototype = { getHostName: function() { return window.location && window.location.hostname ? window.location.hostname : null }, checkDomainName: function(t) { return -1 !== window.location.hostname.indexOf(t) }, updateQueryString: function(t, e, i, n) { void 0 === i && (i = !1), void 0 !== n && "" !== n || (n = window.location.href); var s = "",
                    o = new RegExp("([?|&])" + t + "=.*?(&|#|$)(.*)", "gi"); if (o.test(n)) s = void 0 !== e && null !== e ? n.replace(o, "$1" + t + "=" + e + "$2$3") : n.replace(o, "$1$3").replace(/(&|\?)$/, "");
                else if (void 0 !== e && null !== e) { var a = -1 !== n.indexOf("?") ? "&" : "?",
                        r = n.split("#");
                    n = r[0] + a + t + "=" + e, r[1] && (n += "#" + r[1]), s = n } else s = n; if (!i) return s;
                window.location.href = s }, getQueryString: function(t) { void 0 === t && (t = ""); var e = {},
                    i = location.search.substring(1).split("&"); for (var n in i) { var s = i[n].split("="); if (s.length > 1) { if (t && t === this.decodeURI(s[0])) return this.decodeURI(s[1]);
                        e[this.decodeURI(s[0])] = this.decodeURI(s[1]) } } return e }, decodeURI: function(t) { return decodeURIComponent(t.replace(/\+/g, " ")) } }, i.Net.prototype.constructor = i.Net, i.TweenManager = function(t) { this.game = t, this.frameBased = !1, this._tweens = [], this._add = [], this.easeMap = { Power0: i.Easing.Power0, Power1: i.Easing.Power1, Power2: i.Easing.Power2, Power3: i.Easing.Power3, Power4: i.Easing.Power4, Linear: i.Easing.Linear.None, Quad: i.Easing.Quadratic.Out, Cubic: i.Easing.Cubic.Out, Quart: i.Easing.Quartic.Out, Quint: i.Easing.Quintic.Out, Sine: i.Easing.Sinusoidal.Out, Expo: i.Easing.Exponential.Out, Circ: i.Easing.Circular.Out, Elastic: i.Easing.Elastic.Out, Back: i.Easing.Back.Out, Bounce: i.Easing.Bounce.Out, "Quad.easeIn": i.Easing.Quadratic.In, "Cubic.easeIn": i.Easing.Cubic.In, "Quart.easeIn": i.Easing.Quartic.In, "Quint.easeIn": i.Easing.Quintic.In, "Sine.easeIn": i.Easing.Sinusoidal.In, "Expo.easeIn": i.Easing.Exponential.In, "Circ.easeIn": i.Easing.Circular.In, "Elastic.easeIn": i.Easing.Elastic.In, "Back.easeIn": i.Easing.Back.In, "Bounce.easeIn": i.Easing.Bounce.In, "Quad.easeOut": i.Easing.Quadratic.Out, "Cubic.easeOut": i.Easing.Cubic.Out, "Quart.easeOut": i.Easing.Quartic.Out, "Quint.easeOut": i.Easing.Quintic.Out, "Sine.easeOut": i.Easing.Sinusoidal.Out, "Expo.easeOut": i.Easing.Exponential.Out, "Circ.easeOut": i.Easing.Circular.Out, "Elastic.easeOut": i.Easing.Elastic.Out, "Back.easeOut": i.Easing.Back.Out, "Bounce.easeOut": i.Easing.Bounce.Out, "Quad.easeInOut": i.Easing.Quadratic.InOut, "Cubic.easeInOut": i.Easing.Cubic.InOut, "Quart.easeInOut": i.Easing.Quartic.InOut, "Quint.easeInOut": i.Easing.Quintic.InOut, "Sine.easeInOut": i.Easing.Sinusoidal.InOut, "Expo.easeInOut": i.Easing.Exponential.InOut, "Circ.easeInOut": i.Easing.Circular.InOut, "Elastic.easeInOut": i.Easing.Elastic.InOut, "Back.easeInOut": i.Easing.Back.InOut, "Bounce.easeInOut": i.Easing.Bounce.InOut }, this.game.onPause.add(this._pauseAll, this), this.game.onResume.add(this._resumeAll, this) }, i.TweenManager.prototype = { getAll: function() { return this._tweens }, removeAll: function() { for (var t = 0; t < this._tweens.length; t++) this._tweens[t].pendingDelete = !0;
                this._add = [] }, removeFrom: function(t, e) { void 0 === e && (e = !0); if (Array.isArray(t))
                    for (n = 0, s = t.length; n < s; n++) this.removeFrom(t[n]);
                else if (t.type === i.GROUP && e)
                    for (var n = 0, s = t.children.length; n < s; n++) this.removeFrom(t.children[n]);
                else { for (n = 0, s = this._tweens.length; n < s; n++) t === this._tweens[n].target && this.remove(this._tweens[n]); for (n = 0, s = this._add.length; n < s; n++) t === this._add[n].target && this.remove(this._add[n]) } }, add: function(t) { t._manager = this, this._add.push(t) }, create: function(t) { return new i.Tween(t, this.game, this) }, remove: function(t) { var e = this._tweens.indexOf(t); - 1 !== e ? this._tweens[e].pendingDelete = !0 : -1 !== (e = this._add.indexOf(t)) && (this._add[e].pendingDelete = !0) }, update: function() { var t = this._add.length,
                    e = this._tweens.length; if (0 === e && 0 === t) return !1; for (var i = 0; i < e;) this._tweens[i].update(this.game.time.time) ? i++ : (this._tweens.splice(i, 1), e--); return t > 0 && (this._tweens = this._tweens.concat(this._add), this._add.length = 0), !0 }, isTweening: function(t) { return this._tweens.some(function(e) { return e.target === t }) }, _pauseAll: function() { for (var t = this._tweens.length - 1; t >= 0; t--) this._tweens[t]._pause() }, _resumeAll: function() { for (var t = this._tweens.length - 1; t >= 0; t--) this._tweens[t]._resume() }, pauseAll: function() { for (var t = this._tweens.length - 1; t >= 0; t--) this._tweens[t].pause() }, resumeAll: function() { for (var t = this._tweens.length - 1; t >= 0; t--) this._tweens[t].resume(!0) } }, i.TweenManager.prototype.constructor = i.TweenManager, i.Tween = function(t, e, n) { this.game = e, this.target = t, this.manager = n, this.timeline = [], this.reverse = !1, this.timeScale = 1, this.repeatCounter = 0, this.pendingDelete = !1, this.onStart = new i.Signal, this.onLoop = new i.Signal, this.onRepeat = new i.Signal, this.onChildComplete = new i.Signal, this.onComplete = new i.Signal, this.isRunning = !1, this.current = 0, this.properties = {}, this.chainedTween = null, this.isPaused = !1, this.frameBased = n.frameBased, this._onUpdateCallback = null, this._onUpdateCallbackContext = null, this._pausedTime = 0, this._codePaused = !1, this._hasStarted = !1 }, i.Tween.prototype = { to: function(t, e, n, s, o, a, r) { return (void 0 === e || e <= 0) && (e = 1e3), void 0 !== n && null !== n || (n = i.Easing.Default), void 0 === s && (s = !1), void 0 === o && (o = 0), void 0 === a && (a = 0), void 0 === r && (r = !1), "string" == typeof n && this.manager.easeMap[n] && (n = this.manager.easeMap[n]), this.isRunning ? (console.warn("Phaser.Tween.to cannot be called after Tween.start"), this) : (this.timeline.push(new i.TweenData(this).to(t, e, n, o, a, r)), s && this.start(), this) }, from: function(t, e, n, s, o, a, r) { return void 0 === e && (e = 1e3), void 0 !== n && null !== n || (n = i.Easing.Default), void 0 === s && (s = !1), void 0 === o && (o = 0), void 0 === a && (a = 0), void 0 === r && (r = !1), "string" == typeof n && this.manager.easeMap[n] && (n = this.manager.easeMap[n]), this.isRunning ? (console.warn("Phaser.Tween.from cannot be called after Tween.start"), this) : (this.timeline.push(new i.TweenData(this).from(t, e, n, o, a, r)), s && this.start(), this) }, start: function(t) { if (void 0 === t && (t = 0), null === this.game || null === this.target || 0 === this.timeline.length || this.isRunning) return this; for (i = 0; i < this.timeline.length; i++)
                    for (var e in this.timeline[i].vEnd) this.properties[e] = this.target[e] || 0, Array.isArray(this.properties[e]) || (this.properties[e] *= 1); for (var i = 0; i < this.timeline.length; i++) this.timeline[i].loadValues(); return this.manager.add(this), this.isRunning = !0, (t < 0 || t > this.timeline.length - 1) && (t = 0), this.current = t, this.timeline[this.current].start(), this }, stop: function(t) { return void 0 === t && (t = !1), this.isRunning = !1, this._onUpdateCallback = null, this._onUpdateCallbackContext = null, t && (this.onComplete.dispatch(this.target, this), this._hasStarted = !1, this.chainedTween && this.chainedTween.start()), this.manager.remove(this), this }, updateTweenData: function(t, e, i) { if (0 === this.timeline.length) return this; if (void 0 === i && (i = 0), -1 === i)
                    for (var n = 0; n < this.timeline.length; n++) this.timeline[n][t] = e;
                else this.timeline[i][t] = e; return this }, delay: function(t, e) { return this.updateTweenData("delay", t, e) }, repeat: function(t, e, i) { return void 0 === e && (e = 0), this.updateTweenData("repeatCounter", t, i), this.updateTweenData("repeatDelay", e, i) }, repeatDelay: function(t, e) { return this.updateTweenData("repeatDelay", t, e) }, yoyo: function(t, e, i) { return void 0 === e && (e = 0), this.updateTweenData("yoyo", t, i), this.updateTweenData("yoyoDelay", e, i) }, yoyoDelay: function(t, e) { return this.updateTweenData("yoyoDelay", t, e) }, easing: function(t, e) { return "string" == typeof t && this.manager.easeMap[t] && (t = this.manager.easeMap[t]), this.updateTweenData("easingFunction", t, e) }, interpolation: function(t, e, n) { return void 0 === e && (e = i.Math), this.updateTweenData("interpolationFunction", t, n), this.updateTweenData("interpolationContext", e, n) }, repeatAll: function(t) { return void 0 === t && (t = 0), this.repeatCounter = t, this }, chain: function() { for (var t = arguments.length; t--;) t > 0 ? arguments[t - 1].chainedTween = arguments[t] : this.chainedTween = arguments[t]; return this }, loop: function(t) { return void 0 === t && (t = !0), this.repeatCounter = t ? -1 : 0, this }, onUpdateCallback: function(t, e) { return this._onUpdateCallback = t, this._onUpdateCallbackContext = e, this }, pause: function() { this.isPaused = !0, this._codePaused = !0, this._pausedTime = this.game.time.time }, _pause: function() { this._codePaused || (this.isPaused = !0, this._pausedTime = this.game.time.time) }, resume: function() { if (this.isPaused) { this.isPaused = !1, this._codePaused = !1; for (var t = 0; t < this.timeline.length; t++) this.timeline[t].isRunning || (this.timeline[t].startTime += this.game.time.time - this._pausedTime) } }, _resume: function() { this._codePaused || this.resume() }, update: function(t) { if (this.pendingDelete || !this.target) return !1; if (this.isPaused) return !0; var e = this.timeline[this.current].update(t); if (e === i.TweenData.PENDING) return !0; if (e === i.TweenData.RUNNING) return this._hasStarted || (this.onStart.dispatch(this.target, this), this._hasStarted = !0), null !== this._onUpdateCallback && this._onUpdateCallback.call(this._onUpdateCallbackContext, this, this.timeline[this.current].value, this.timeline[this.current]), this.isRunning; if (e === i.TweenData.LOOPED) return -1 === this.timeline[this.current].repeatCounter ? this.onLoop.dispatch(this.target, this) : this.onRepeat.dispatch(this.target, this), !0; if (e === i.TweenData.COMPLETE) { var n = !1; return this.reverse ? --this.current < 0 && (this.current = this.timeline.length - 1, n = !0) : ++this.current === this.timeline.length && (this.current = 0, n = !0), n ? -1 === this.repeatCounter ? (this.timeline[this.current].start(), this.onLoop.dispatch(this.target, this), !0) : this.repeatCounter > 0 ? (this.repeatCounter--, this.timeline[this.current].start(), this.onRepeat.dispatch(this.target, this), !0) : (this.isRunning = !1, this.onComplete.dispatch(this.target, this), this._hasStarted = !1, this.chainedTween && this.chainedTween.start(), !1) : (this.onChildComplete.dispatch(this.target, this), this.timeline[this.current].start(), !0) } }, generateData: function(t, e) { if (null === this.game || null === this.target) return null;
                void 0 === t && (t = 60), void 0 === e && (e = []); for (n = 0; n < this.timeline.length; n++)
                    for (var i in this.timeline[n].vEnd) this.properties[i] = this.target[i] || 0, Array.isArray(this.properties[i]) || (this.properties[i] *= 1); for (n = 0; n < this.timeline.length; n++) this.timeline[n].loadValues(); for (var n = 0; n < this.timeline.length; n++) e = e.concat(this.timeline[n].generateData(t)); return e } }, Object.defineProperty(i.Tween.prototype, "totalDuration", { get: function() { for (var t = 0, e = 0; e < this.timeline.length; e++) t += this.timeline[e].duration; return t } }), i.Tween.prototype.constructor = i.Tween, i.TweenData = function(t) { this.parent = t, this.game = t.game, this.vStart = {}, this.vStartCache = {}, this.vEnd = {}, this.vEndCache = {}, this.duration = 1e3, this.percent = 0, this.value = 0, this.repeatCounter = 0, this.repeatDelay = 0, this.repeatTotal = 0, this.interpolate = !1, this.yoyo = !1, this.yoyoDelay = 0, this.inReverse = !1, this.delay = 0, this.dt = 0, this.startTime = null, this.easingFunction = i.Easing.Default, this.interpolationFunction = i.Math.linearInterpolation, this.interpolationContext = i.Math, this.isRunning = !1, this.isFrom = !1 }, i.TweenData.PENDING = 0, i.TweenData.RUNNING = 1, i.TweenData.LOOPED = 2, i.TweenData.COMPLETE = 3, i.TweenData.prototype = { to: function(t, e, i, n, s, o) { return this.vEnd = t, this.duration = e, this.easingFunction = i, this.delay = n, this.repeatTotal = s, this.yoyo = o, this.isFrom = !1, this }, from: function(t, e, i, n, s, o) { return this.vEnd = t, this.duration = e, this.easingFunction = i, this.delay = n, this.repeatTotal = s, this.yoyo = o, this.isFrom = !0, this }, start: function() { if (this.startTime = this.game.time.time + this.delay, this.parent.reverse ? this.dt = this.duration : this.dt = 0, this.delay > 0 ? this.isRunning = !1 : this.isRunning = !0, this.isFrom)
                    for (var t in this.vStartCache) this.vStart[t] = this.vEndCache[t], this.vEnd[t] = this.vStartCache[t], this.parent.target[t] = this.vStart[t]; return this.value = 0, this.yoyoCounter = 0, this.repeatCounter = this.repeatTotal, this }, loadValues: function() { for (var t in this.parent.properties) { if (this.vStart[t] = this.parent.properties[t], Array.isArray(this.vEnd[t])) { if (0 === this.vEnd[t].length) continue;
                        0 === this.percent && (this.vEnd[t] = [this.vStart[t]].concat(this.vEnd[t])) } void 0 !== this.vEnd[t] ? ("string" == typeof this.vEnd[t] && (this.vEnd[t] = this.vStart[t] + parseFloat(this.vEnd[t], 10)), this.parent.properties[t] = this.vEnd[t]) : this.vEnd[t] = this.vStart[t], this.vStartCache[t] = this.vStart[t], this.vEndCache[t] = this.vEnd[t] } return this }, update: function(t) { if (this.isRunning) { if (t < this.startTime) return i.TweenData.RUNNING } else { if (!(t >= this.startTime)) return i.TweenData.PENDING;
                    this.isRunning = !0 } var e = this.parent.frameBased ? this.game.time.physicsElapsedMS : this.game.time.elapsedMS;
                this.parent.reverse ? (this.dt -= e * this.parent.timeScale, this.dt = Math.max(this.dt, 0)) : (this.dt += e * this.parent.timeScale, this.dt = Math.min(this.dt, this.duration)), this.percent = this.dt / this.duration, this.value = this.easingFunction(this.percent); for (var n in this.vEnd) { var s = this.vStart[n],
                        o = this.vEnd[n];
                    Array.isArray(o) ? this.parent.target[n] = this.interpolationFunction.call(this.interpolationContext, o, this.value) : this.parent.target[n] = s + (o - s) * this.value } return !this.parent.reverse && 1 === this.percent || this.parent.reverse && 0 === this.percent ? this.repeat() : i.TweenData.RUNNING }, generateData: function(t) { this.parent.reverse ? this.dt = this.duration : this.dt = 0; var e = [],
                    i = !1,
                    n = 1 / t * 1e3;
                do { this.parent.reverse ? (this.dt -= n, this.dt = Math.max(this.dt, 0)) : (this.dt += n, this.dt = Math.min(this.dt, this.duration)), this.percent = this.dt / this.duration, this.value = this.easingFunction(this.percent); var s = {}; for (var o in this.vEnd) { var a = this.vStart[o],
                            r = this.vEnd[o];
                        Array.isArray(r) ? s[o] = this.interpolationFunction(r, this.value) : s[o] = a + (r - a) * this.value } e.push(s), (!this.parent.reverse && 1 === this.percent || this.parent.reverse && 0 === this.percent) && (i = !0) } while (!i); if (this.yoyo) { var h = e.slice();
                    h.reverse(), e = e.concat(h) } return e }, repeat: function() { if (this.yoyo) { if (this.inReverse && 0 === this.repeatCounter) { for (var t in this.vStartCache) this.vStart[t] = this.vStartCache[t], this.vEnd[t] = this.vEndCache[t]; return this.inReverse = !1, i.TweenData.COMPLETE } this.inReverse = !this.inReverse } else if (0 === this.repeatCounter) return i.TweenData.COMPLETE; if (this.inReverse)
                    for (var t in this.vStartCache) this.vStart[t] = this.vEndCache[t], this.vEnd[t] = this.vStartCache[t];
                else { for (var t in this.vStartCache) this.vStart[t] = this.vStartCache[t], this.vEnd[t] = this.vEndCache[t];
                    this.repeatCounter > 0 && this.repeatCounter-- } return this.startTime = this.game.time.time, this.yoyo && this.inReverse ? this.startTime += this.yoyoDelay : this.inReverse || (this.startTime += this.repeatDelay), this.parent.reverse ? this.dt = this.duration : this.dt = 0, i.TweenData.LOOPED } }, i.TweenData.prototype.constructor = i.TweenData, i.Easing = { Linear: { None: function(t) { return t } }, Quadratic: { In: function(t) { return t * t }, Out: function(t) { return t * (2 - t) }, InOut: function(t) { return (t *= 2) < 1 ? .5 * t * t : -.5 * (--t * (t - 2) - 1) } }, Cubic: { In: function(t) { return t * t * t }, Out: function(t) { return --t * t * t + 1 }, InOut: function(t) { return (t *= 2) < 1 ? .5 * t * t * t : .5 * ((t -= 2) * t * t + 2) } }, Quartic: { In: function(t) { return t * t * t * t }, Out: function(t) { return 1 - --t * t * t * t }, InOut: function(t) { return (t *= 2) < 1 ? .5 * t * t * t * t : -.5 * ((t -= 2) * t * t * t - 2) } }, Quintic: { In: function(t) { return t * t * t * t * t }, Out: function(t) { return --t * t * t * t * t + 1 }, InOut: function(t) { return (t *= 2) < 1 ? .5 * t * t * t * t * t : .5 * ((t -= 2) * t * t * t * t + 2) } }, Sinusoidal: { In: function(t) { return 0 === t ? 0 : 1 === t ? 1 : 1 - Math.cos(t * Math.PI / 2) }, Out: function(t) { return 0 === t ? 0 : 1 === t ? 1 : Math.sin(t * Math.PI / 2) }, InOut: function(t) { return 0 === t ? 0 : 1 === t ? 1 : .5 * (1 - Math.cos(Math.PI * t)) } }, Exponential: { In: function(t) { return 0 === t ? 0 : Math.pow(1024, t - 1) }, Out: function(t) { return 1 === t ? 1 : 1 - Math.pow(2, -10 * t) }, InOut: function(t) { return 0 === t ? 0 : 1 === t ? 1 : (t *= 2) < 1 ? .5 * Math.pow(1024, t - 1) : .5 * (2 - Math.pow(2, -10 * (t - 1))) } }, Circular: { In: function(t) { return 1 - Math.sqrt(1 - t * t) }, Out: function(t) { return Math.sqrt(1 - --t * t) }, InOut: function(t) { return (t *= 2) < 1 ? -.5 * (Math.sqrt(1 - t * t) - 1) : .5 * (Math.sqrt(1 - (t -= 2) * t) + 1) } }, Elastic: { In: function(t) { var e, i = .1; return 0 === t ? 0 : 1 === t ? 1 : (!i || i < 1 ? (i = 1, e = .1) : e = .4 * Math.asin(1 / i) / (2 * Math.PI), -i * Math.pow(2, 10 * (t -= 1)) * Math.sin((t - e) * (2 * Math.PI) / .4)) }, Out: function(t) { var e, i = .1; return 0 === t ? 0 : 1 === t ? 1 : (!i || i < 1 ? (i = 1, e = .1) : e = .4 * Math.asin(1 / i) / (2 * Math.PI), i * Math.pow(2, -10 * t) * Math.sin((t - e) * (2 * Math.PI) / .4) + 1) }, InOut: function(t) { var e, i = .1; return 0 === t ? 0 : 1 === t ? 1 : (!i || i < 1 ? (i = 1, e = .1) : e = .4 * Math.asin(1 / i) / (2 * Math.PI), (t *= 2) < 1 ? i * Math.pow(2, 10 * (t -= 1)) * Math.sin((t - e) * (2 * Math.PI) / .4) * -.5 : i * Math.pow(2, -10 * (t -= 1)) * Math.sin((t - e) * (2 * Math.PI) / .4) * .5 + 1) } }, Back: { In: function(t) { var e = 1.70158; return t * t * ((e + 1) * t - e) }, Out: function(t) { var e = 1.70158; return --t * t * ((e + 1) * t + e) + 1 }, InOut: function(t) { var e = 2.5949095; return (t *= 2) < 1 ? t * t * ((e + 1) * t - e) * .5 : .5 * ((t -= 2) * t * ((e + 1) * t + e) + 2) } }, Bounce: { In: function(t) { return 1 - i.Easing.Bounce.Out(1 - t) }, Out: function(t) { return t < 1 / 2.75 ? 7.5625 * t * t : t < 2 / 2.75 ? 7.5625 * (t -= 1.5 / 2.75) * t + .75 : t < 2.5 / 2.75 ? 7.5625 * (t -= 2.25 / 2.75) * t + .9375 : 7.5625 * (t -= 2.625 / 2.75) * t + .984375 }, InOut: function(t) { return t < .5 ? .5 * i.Easing.Bounce.In(2 * t) : .5 * i.Easing.Bounce.Out(2 * t - 1) + .5 } } }, i.Easing.Default = i.Easing.Linear.None, i.Easing.Power0 = i.Easing.Linear.None, i.Easing.Power1 = i.Easing.Quadratic.Out, i.Easing.Power2 = i.Easing.Cubic.Out, i.Easing.Power3 = i.Easing.Quartic.Out, i.Easing.Power4 = i.Easing.Quintic.Out, i.Time = function(t) { this.game = t, this.time = 0, this.prevTime = 0, this.now = 0, this.elapsed = 0, this.elapsedMS = 0, this.physicsElapsed = 1 / 60, this.physicsElapsedMS = 1 / 60 * 1e3, this.desiredFpsMult = 1 / 60, this._desiredFps = 60, this.suggestedFps = this.desiredFps, this.slowMotion = 1, this.advancedTiming = !1, this.frames = 0, this.fps = 0, this.fpsMin = 1e3, this.fpsMax = 0, this.msMin = 1e3, this.msMax = 0, this.pauseDuration = 0, this.timeToCall = 0, this.timeExpected = 0, this.events = new i.Timer(this.game, !1), this._frameCount = 0, this._elapsedAccumulator = 0, this._started = 0, this._timeLastSecond = 0, this._pauseStarted = 0, this._justResumed = !1, this._timers = [] }, i.Time.prototype = { boot: function() { this._started = Date.now(), this.time = Date.now(), this.events.start(), this.timeExpected = this.time }, add: function(t) { return this._timers.push(t), t }, create: function(t) { void 0 === t && (t = !0); var e = new i.Timer(this.game, t); return this._timers.push(e), e }, removeAll: function() { for (var t = 0; t < this._timers.length; t++) this._timers[t].destroy();
                this._timers = [], this.events.removeAll() }, refresh: function() { var t = this.time;
                this.time = Date.now(), this.elapsedMS = this.time - t }, update: function(t) { var e = this.time;
                this.time = Date.now(), this.elapsedMS = this.time - e, this.prevTime = this.now, this.now = t, this.elapsed = this.now - this.prevTime, this.game.raf._isSetTimeOut && (this.timeToCall = Math.floor(Math.max(0, 1e3 / this._desiredFps - (this.timeExpected - t))), this.timeExpected = t + this.timeToCall), this.advancedTiming && this.updateAdvancedTiming(), this.game.paused || (this.events.update(this.time), this._timers.length && this.updateTimers()) }, updateTimers: function() { for (var t = 0, e = this._timers.length; t < e;) this._timers[t].update(this.time) ? t++ : (this._timers.splice(t, 1), e--) }, updateAdvancedTiming: function() { this._frameCount++, this._elapsedAccumulator += this.elapsed, this._frameCount >= 2 * this._desiredFps && (this.suggestedFps = 5 * Math.floor(200 / (this._elapsedAccumulator / this._frameCount)), this._frameCount = 0, this._elapsedAccumulator = 0), this.msMin = Math.min(this.msMin, this.elapsed), this.msMax = Math.max(this.msMax, this.elapsed), this.frames++, this.now > this._timeLastSecond + 1e3 && (this.fps = Math.round(1e3 * this.frames / (this.now - this._timeLastSecond)), this.fpsMin = Math.min(this.fpsMin, this.fps), this.fpsMax = Math.max(this.fpsMax, this.fps), this._timeLastSecond = this.now, this.frames = 0) }, gamePaused: function() { this._pauseStarted = Date.now(), this.events.pause(); for (var t = this._timers.length; t--;) this._timers[t]._pause() }, gameResumed: function() { this.time = Date.now(), this.pauseDuration = this.time - this._pauseStarted, this.events.resume(); for (var t = this._timers.length; t--;) this._timers[t]._resume() }, totalElapsedSeconds: function() { return .001 * (this.time - this._started) }, elapsedSince: function(t) { return this.time - t }, elapsedSecondsSince: function(t) { return .001 * (this.time - t) }, reset: function() { this._started = this.time, this.removeAll() } }, Object.defineProperty(i.Time.prototype, "desiredFps", { get: function() { return this._desiredFps }, set: function(t) { this._desiredFps = t, this.physicsElapsed = 1 / t, this.physicsElapsedMS = 1e3 * this.physicsElapsed, this.desiredFpsMult = 1 / t } }), i.Time.prototype.constructor = i.Time, i.Timer = function(t, e) { void 0 === e && (e = !0), this.game = t, this.running = !1, this.autoDestroy = e, this.expired = !1, this.elapsed = 0, this.events = [], this.onComplete = new i.Signal, this.nextTick = 0, this.timeCap = 1e3, this.paused = !1, this._codePaused = !1, this._started = 0, this._pauseStarted = 0, this._pauseTotal = 0, this._now = Date.now(), this._len = 0, this._marked = 0, this._i = 0, this._diff = 0, this._newTick = 0 }, i.Timer.MINUTE = 6e4, i.Timer.SECOND = 1e3, i.Timer.HALF = 500, i.Timer.QUARTER = 250, i.Timer.prototype = { create: function(t, e, n, s, o, a) { var r = t = Math.round(t);
                0 === this._now ? r += this.game.time.time : r += this._now; var h = new i.TimerEvent(this, t, r, n, e, s, o, a); return this.events.push(h), this.order(), this.expired = !1, h }, add: function(t, e, i) { return this.create(t, !1, 0, e, i, Array.prototype.slice.call(arguments, 3)) }, repeat: function(t, e, i, n) { return this.create(t, !1, e, i, n, Array.prototype.slice.call(arguments, 4)) }, loop: function(t, e, i) { return this.create(t, !0, 0, e, i, Array.prototype.slice.call(arguments, 3)) }, start: function(t) { if (!this.running) { this._started = this.game.time.time + (t || 0), this.running = !0; for (var e = 0; e < this.events.length; e++) this.events[e].tick = this.events[e].delay + this._started } }, stop: function(t) { this.running = !1, void 0 === t && (t = !0), t && (this.events.length = 0) }, remove: function(t) { for (var e = 0; e < this.events.length; e++)
                    if (this.events[e] === t) return this.events[e].pendingDelete = !0, !0; return !1 }, order: function() { this.events.length > 0 && (this.events.sort(this.sortHandler), this.nextTick = this.events[0].tick) }, sortHandler: function(t, e) { return t.tick < e.tick ? -1 : t.tick > e.tick ? 1 : 0 }, clearPendingEvents: function() { for (this._i = this.events.length; this._i--;) this.events[this._i].pendingDelete && this.events.splice(this._i, 1);
                this._len = this.events.length, this._i = 0 }, update: function(t) { if (this.paused) return !0; if (this.elapsed = t - this._now, this._now = t, this.elapsed > this.timeCap && this.adjustEvents(t - this.elapsed), this._marked = 0, this.clearPendingEvents(), this.running && this._now >= this.nextTick && this._len > 0) { for (; this._i < this._len && this.running && this._now >= this.events[this._i].tick && !this.events[this._i].pendingDelete;) this._newTick = this._now + this.events[this._i].delay - (this._now - this.events[this._i].tick), this._newTick < 0 && (this._newTick = this._now + this.events[this._i].delay), !0 === this.events[this._i].loop ? (this.events[this._i].tick = this._newTick, this.events[this._i].callback.apply(this.events[this._i].callbackContext, this.events[this._i].args)) : this.events[this._i].repeatCount > 0 ? (this.events[this._i].repeatCount--, this.events[this._i].tick = this._newTick, this.events[this._i].callback.apply(this.events[this._i].callbackContext, this.events[this._i].args)) : (this._marked++, this.events[this._i].pendingDelete = !0, this.events[this._i].callback.apply(this.events[this._i].callbackContext, this.events[this._i].args)), this._i++;
                    this.events.length > this._marked ? this.order() : (this.expired = !0, this.onComplete.dispatch(this)) } return !this.expired || !this.autoDestroy }, pause: function() { this.running && (this._codePaused = !0, this.paused || (this._pauseStarted = this.game.time.time, this.paused = !0)) }, _pause: function() {!this.paused && this.running && (this._pauseStarted = this.game.time.time, this.paused = !0) }, adjustEvents: function(t) { for (var e = 0; e < this.events.length; e++)
                    if (!this.events[e].pendingDelete) { var i = this.events[e].tick - t;
                        i < 0 && (i = 0), this.events[e].tick = this._now + i } var n = this.nextTick - t;
                this.nextTick = n < 0 ? this._now : this._now + n }, resume: function() { if (this.paused) { var t = this.game.time.time;
                    this._pauseTotal += t - this._now, this._now = t, this.adjustEvents(this._pauseStarted), this.paused = !1, this._codePaused = !1 } }, _resume: function() { this._codePaused || this.resume() }, removeAll: function() { this.onComplete.removeAll(), this.events.length = 0, this._len = 0, this._i = 0 }, destroy: function() { this.onComplete.removeAll(), this.running = !1, this.events = [], this._len = 0, this._i = 0 } }, Object.defineProperty(i.Timer.prototype, "next", { get: function() { return this.nextTick } }), Object.defineProperty(i.Timer.prototype, "duration", { get: function() { return this.running && this.nextTick > this._now ? this.nextTick - this._now : 0 } }), Object.defineProperty(i.Timer.prototype, "length", { get: function() { return this.events.length } }), Object.defineProperty(i.Timer.prototype, "ms", { get: function() { return this.running ? this._now - this._started - this._pauseTotal : 0 } }), Object.defineProperty(i.Timer.prototype, "seconds", { get: function() { return this.running ? .001 * this.ms : 0 } }), i.Timer.prototype.constructor = i.Timer, i.TimerEvent = function(t, e, i, n, s, o, a, r) { this.timer = t, this.delay = e, this.tick = i, this.repeatCount = n - 1, this.loop = s, this.callback = o, this.callbackContext = a, this.args = r, this.pendingDelete = !1 }, i.TimerEvent.prototype.constructor = i.TimerEvent, i.AnimationManager = function(t) { this.sprite = t, this.game = t.game, this.currentFrame = null, this.currentAnim = null, this.updateIfVisible = !0, this.isLoaded = !1, this._frameData = null, this._anims = {}, this._outputFrames = [] }, i.AnimationManager.prototype = { loadFrameData: function(t, e) { if (void 0 === t) return !1; if (this.isLoaded)
                    for (var i in this._anims) this._anims[i].updateFrameData(t); return this._frameData = t, void 0 === e || null === e ? this.frame = 0 : "string" == typeof e ? this.frameName = e : this.frame = e, this.isLoaded = !0, !0 }, copyFrameData: function(t, e) { if (this._frameData = t.clone(), this.isLoaded)
                    for (var i in this._anims) this._anims[i].updateFrameData(this._frameData); return void 0 === e || null === e ? this.frame = 0 : "string" == typeof e ? this.frameName = e : this.frame = e, this.isLoaded = !0, !0 }, add: function(t, e, n, s, o) { return e = e || [], n = n || 60, void 0 === s && (s = !1), void 0 === o && (o = !(!e || "number" != typeof e[0])), this._outputFrames = [], this._frameData.getFrameIndexes(e, o, this._outputFrames), this._anims[t] = new i.Animation(this.game, this.sprite, t, this._frameData, this._outputFrames, n, s), this.currentAnim = this._anims[t], this.sprite.tilingTexture && (this.sprite.refreshTexture = !0), this._anims[t] }, validateFrames: function(t, e) { void 0 === e && (e = !0); for (var i = 0; i < t.length; i++)
                    if (!0 === e) { if (t[i] > this._frameData.total) return !1 } else if (!1 === this._frameData.checkFrameName(t[i])) return !1; return !0 }, play: function(t, e, i, n) { if (this._anims[t]) return this.currentAnim === this._anims[t] ? !1 === this.currentAnim.isPlaying ? (this.currentAnim.paused = !1, this.currentAnim.play(e, i, n)) : this.currentAnim : (this.currentAnim && this.currentAnim.isPlaying && this.currentAnim.stop(), this.currentAnim = this._anims[t], this.currentAnim.paused = !1, this.currentFrame = this.currentAnim.currentFrame, this.currentAnim.play(e, i, n)) }, stop: function(t, e) { void 0 === e && (e = !1), !this.currentAnim || "string" == typeof t && t !== this.currentAnim.name || this.currentAnim.stop(e) }, update: function() { return !(this.updateIfVisible && !this.sprite.visible) && (!(!this.currentAnim || !this.currentAnim.update()) && (this.currentFrame = this.currentAnim.currentFrame, !0)) }, next: function(t) { this.currentAnim && (this.currentAnim.next(t), this.currentFrame = this.currentAnim.currentFrame) }, previous: function(t) { this.currentAnim && (this.currentAnim.previous(t), this.currentFrame = this.currentAnim.currentFrame) }, getAnimation: function(t) { return "string" == typeof t && this._anims[t] ? this._anims[t] : null }, refreshFrame: function() {}, destroy: function() { t = null; for (var t in this._anims) this._anims.hasOwnProperty(t) && this._anims[t].destroy();
                this._anims = {}, this._outputFrames = [], this._frameData = null, this.currentAnim = null, this.currentFrame = null, this.sprite = null, this.game = null } }, i.AnimationManager.prototype.constructor = i.AnimationManager, Object.defineProperty(i.AnimationManager.prototype, "frameData", { get: function() { return this._frameData } }), Object.defineProperty(i.AnimationManager.prototype, "frameTotal", { get: function() { return this._frameData.total } }), Object.defineProperty(i.AnimationManager.prototype, "paused", { get: function() { return this.currentAnim.isPaused }, set: function(t) { this.currentAnim.paused = t } }), Object.defineProperty(i.AnimationManager.prototype, "name", { get: function() { if (this.currentAnim) return this.currentAnim.name } }), Object.defineProperty(i.AnimationManager.prototype, "frame", { get: function() { if (this.currentFrame) return this.currentFrame.index }, set: function(t) { "number" == typeof t && this._frameData && null !== this._frameData.getFrame(t) && (this.currentFrame = this._frameData.getFrame(t), this.currentFrame && this.sprite.setFrame(this.currentFrame)) } }), Object.defineProperty(i.AnimationManager.prototype, "frameName", { get: function() { if (this.currentFrame) return this.currentFrame.name }, set: function(t) { "string" == typeof t && this._frameData && null !== this._frameData.getFrameByName(t) ? (this.currentFrame = this._frameData.getFrameByName(t), this.currentFrame && (this._frameIndex = this.currentFrame.index, this.sprite.setFrame(this.currentFrame))) : console.warn("Cannot set frameName: " + t) } }), i.Animation = function(t, e, n, s, o, a, r) { void 0 === r && (r = !1), this.game = t, this._parent = e, this._frameData = s, this.name = n, this._frames = [], this._frames = this._frames.concat(o), this.delay = 1e3 / a, this.loop = r, this.loopCount = 0, this.killOnComplete = !1, this.isFinished = !1, this.isPlaying = !1, this.isPaused = !1, this._pauseStartTime = 0, this._frameIndex = 0, this._frameDiff = 0, this._frameSkip = 1, this.currentFrame = this._frameData.getFrame(this._frames[this._frameIndex]), this.onStart = new i.Signal, this.onUpdate = null, this.onComplete = new i.Signal, this.onLoop = new i.Signal, this.isReversed = !1, this.game.onPause.add(this.onPause, this), this.game.onResume.add(this.onResume, this) }, i.Animation.prototype = { play: function(t, e, i) { return "number" == typeof t && (this.delay = 1e3 / t), "boolean" == typeof e && (this.loop = e), void 0 !== i && (this.killOnComplete = i), this.isPlaying = !0, this.isFinished = !1, this.paused = !1, this.loopCount = 0, this._timeLastFrame = this.game.time.time, this._timeNextFrame = this.game.time.time + this.delay, this._frameIndex = this.isReversed ? this._frames.length - 1 : 0, this.updateCurrentFrame(!1, !0), this._parent.events.onAnimationStart$dispatch(this._parent, this), this.onStart.dispatch(this._parent, this), this._parent.animations.currentAnim = this, this._parent.animations.currentFrame = this.currentFrame, this }, restart: function() { this.isPlaying = !0, this.isFinished = !1, this.paused = !1, this.loopCount = 0, this._timeLastFrame = this.game.time.time, this._timeNextFrame = this.game.time.time + this.delay, this._frameIndex = 0, this.currentFrame = this._frameData.getFrame(this._frames[this._frameIndex]), this._parent.setFrame(this.currentFrame), this._parent.animations.currentAnim = this, this._parent.animations.currentFrame = this.currentFrame, this.onStart.dispatch(this._parent, this) }, reverse: function() { return this.reversed = !this.reversed, this }, reverseOnce: function() { return this.onComplete.addOnce(this.reverse, this), this.reverse() }, setFrame: function(t, e) { var i; if (void 0 === e && (e = !1), "string" == typeof t)
                    for (n = 0; n < this._frames.length; n++) this._frameData.getFrame(this._frames[n]).name === t && (i = n);
                else if ("number" == typeof t)
                    if (e) i = t;
                    else
                        for (var n = 0; n < this._frames.length; n++) this._frames[n] === t && (i = n);
                i && (this._frameIndex = i - 1, this._timeNextFrame = this.game.time.time, this.update()) }, stop: function(t, e) { void 0 === t && (t = !1), void 0 === e && (e = !1), this.isPlaying = !1, this.isFinished = !0, this.paused = !1, t && (this.currentFrame = this._frameData.getFrame(this._frames[0]), this._parent.setFrame(this.currentFrame)), e && (this._parent.events.onAnimationComplete$dispatch(this._parent, this), this.onComplete.dispatch(this._parent, this)) }, onPause: function() { this.isPlaying && (this._frameDiff = this._timeNextFrame - this.game.time.time) }, onResume: function() { this.isPlaying && (this._timeNextFrame = this.game.time.time + this._frameDiff) }, update: function() { return !this.isPaused && (!!(this.isPlaying && this.game.time.time >= this._timeNextFrame) && (this._frameSkip = 1, this._frameDiff = this.game.time.time - this._timeNextFrame, this._timeLastFrame = this.game.time.time, this._frameDiff > this.delay && (this._frameSkip = Math.floor(this._frameDiff / this.delay), this._frameDiff -= this._frameSkip * this.delay), this._timeNextFrame = this.game.time.time + (this.delay - this._frameDiff), this.isReversed ? this._frameIndex -= this._frameSkip : this._frameIndex += this._frameSkip, !this.isReversed && this._frameIndex >= this._frames.length || this.isReversed && this._frameIndex <= -1 ? this.loop ? (this._frameIndex = Math.abs(this._frameIndex) % this._frames.length, this.isReversed && (this._frameIndex = this._frames.length - 1 - this._frameIndex), this.currentFrame = this._frameData.getFrame(this._frames[this._frameIndex]), this.currentFrame && this._parent.setFrame(this.currentFrame), this.loopCount++, this._parent.events.onAnimationLoop$dispatch(this._parent, this), this.onLoop.dispatch(this._parent, this), !this.onUpdate || (this.onUpdate.dispatch(this, this.currentFrame), !!this._frameData)) : (this.complete(), !1) : this.updateCurrentFrame(!0))) }, updateCurrentFrame: function(t, e) { if (void 0 === e && (e = !1), !this._frameData) return !1; var i = this.currentFrame.index; return this.currentFrame = this._frameData.getFrame(this._frames[this._frameIndex]), this.currentFrame && (e || !e && i !== this.currentFrame.index) && this._parent.setFrame(this.currentFrame), !this.onUpdate || !t || (this.onUpdate.dispatch(this, this.currentFrame), !!this._frameData) }, next: function(t) { void 0 === t && (t = 1); var e = this._frameIndex + t;
                e >= this._frames.length && (this.loop ? e %= this._frames.length : e = this._frames.length - 1), e !== this._frameIndex && (this._frameIndex = e, this.updateCurrentFrame(!0)) }, previous: function(t) { void 0 === t && (t = 1); var e = this._frameIndex - t;
                e < 0 && (this.loop ? e = this._frames.length + e : e++), e !== this._frameIndex && (this._frameIndex = e, this.updateCurrentFrame(!0)) }, updateFrameData: function(t) { this._frameData = t, this.currentFrame = this._frameData ? this._frameData.getFrame(this._frames[this._frameIndex % this._frames.length]) : null }, destroy: function() { this._frameData && (this.game.onPause.remove(this.onPause, this), this.game.onResume.remove(this.onResume, this), this.game = null, this._parent = null, this._frames = null, this._frameData = null, this.currentFrame = null, this.isPlaying = !1, this.onStart.dispose(), this.onLoop.dispose(), this.onComplete.dispose(), this.onUpdate && this.onUpdate.dispose()) }, complete: function() { this._frameIndex = this._frames.length - 1, this.currentFrame = this._frameData.getFrame(this._frames[this._frameIndex]), this.isPlaying = !1, this.isFinished = !0, this.paused = !1, this._parent.events.onAnimationComplete$dispatch(this._parent, this), this.onComplete.dispatch(this._parent, this), this.killOnComplete && this._parent.kill() } }, i.Animation.prototype.constructor = i.Animation, Object.defineProperty(i.Animation.prototype, "paused", { get: function() { return this.isPaused }, set: function(t) { this.isPaused = t, t ? this._pauseStartTime = this.game.time.time : this.isPlaying && (this._timeNextFrame = this.game.time.time + this.delay) } }), Object.defineProperty(i.Animation.prototype, "reversed", { get: function() { return this.isReversed }, set: function(t) { this.isReversed = t } }), Object.defineProperty(i.Animation.prototype, "frameTotal", { get: function() { return this._frames.length } }), Object.defineProperty(i.Animation.prototype, "frame", { get: function() { return null !== this.currentFrame ? this.currentFrame.index : this._frameIndex }, set: function(t) { this.currentFrame = this._frameData.getFrame(this._frames[t]), null !== this.currentFrame && (this._frameIndex = t, this._parent.setFrame(this.currentFrame), this.onUpdate && this.onUpdate.dispatch(this, this.currentFrame)) } }), Object.defineProperty(i.Animation.prototype, "speed", { get: function() { return 1e3 / this.delay }, set: function(t) { t > 0 && (this.delay = 1e3 / t) } }), Object.defineProperty(i.Animation.prototype, "enableUpdate", { get: function() { return null !== this.onUpdate }, set: function(t) { t && null === this.onUpdate ? this.onUpdate = new i.Signal : t || null === this.onUpdate || (this.onUpdate.dispose(), this.onUpdate = null) } }), i.Animation.generateFrameNames = function(t, e, n, s, o) { void 0 === s && (s = ""); var a = [],
                r = ""; if (e < n)
                for (h = e; h <= n; h++) r = t + (r = "number" == typeof o ? i.Utils.pad(h.toString(), o, "0", 1) : h.toString()) + s, a.push(r);
            else
                for (var h = e; h >= n; h--) r = t + (r = "number" == typeof o ? i.Utils.pad(h.toString(), o, "0", 1) : h.toString()) + s, a.push(r); return a }, i.Frame = function(t, e, n, s, o, a) { this.index = t, this.x = e, this.y = n, this.width = s, this.height = o, this.name = a, this.centerX = Math.floor(s / 2), this.centerY = Math.floor(o / 2), this.distance = i.Math.distance(0, 0, s, o), this.rotated = !1, this.rotationDirection = "cw", this.trimmed = !1, this.sourceSizeW = s, this.sourceSizeH = o, this.spriteSourceSizeX = 0, this.spriteSourceSizeY = 0, this.spriteSourceSizeW = 0, this.spriteSourceSizeH = 0, this.right = this.x + this.width, this.bottom = this.y + this.height }, i.Frame.prototype = { resize: function(t, e) { this.width = t, this.height = e, this.centerX = Math.floor(t / 2), this.centerY = Math.floor(e / 2), this.distance = i.Math.distance(0, 0, t, e), this.sourceSizeW = t, this.sourceSizeH = e, this.right = this.x + t, this.bottom = this.y + e }, setTrim: function(t, e, i, n, s, o, a) { this.trimmed = t, t && (this.sourceSizeW = e, this.sourceSizeH = i, this.centerX = Math.floor(e / 2), this.centerY = Math.floor(i / 2), this.spriteSourceSizeX = n, this.spriteSourceSizeY = s, this.spriteSourceSizeW = o, this.spriteSourceSizeH = a) }, clone: function() { var t = new i.Frame(this.index, this.x, this.y, this.width, this.height, this.name); for (var e in this) this.hasOwnProperty(e) && (t[e] = this[e]); return t }, getRect: function(t) { return void 0 === t ? t = new i.Rectangle(this.x, this.y, this.width, this.height) : t.setTo(this.x, this.y, this.width, this.height), t } }, i.Frame.prototype.constructor = i.Frame, i.FrameData = function() { this._frames = [], this._frameNames = [] }, i.FrameData.prototype = { addFrame: function(t) { return t.index = this._frames.length, this._frames.push(t), "" !== t.name && (this._frameNames[t.name] = t.index), t }, getFrame: function(t) { return t >= this._frames.length && (t = 0), this._frames[t] }, getFrameByName: function(t) { return "number" == typeof this._frameNames[t] ? this._frames[this._frameNames[t]] : null }, checkFrameName: function(t) { return null != this._frameNames[t] }, clone: function() { for (var t = new i.FrameData, e = 0; e < this._frames.length; e++) t._frames.push(this._frames[e].clone()); for (var n in this._frameNames) this._frameNames.hasOwnProperty(n) && t._frameNames.push(this._frameNames[n]); return t }, getFrameRange: function(t, e, i) { void 0 === i && (i = []); for (var n = t; n <= e; n++) i.push(this._frames[n]); return i }, getFrames: function(t, e, i) { if (void 0 === e && (e = !0), void 0 === i && (i = []), void 0 === t || 0 === t.length)
                    for (n = 0; n < this._frames.length; n++) i.push(this._frames[n]);
                else
                    for (var n = 0; n < t.length; n++) e ? i.push(this.getFrame(t[n])) : i.push(this.getFrameByName(t[n])); return i }, getFrameIndexes: function(t, e, i) { if (void 0 === e && (e = !0), void 0 === i && (i = []), void 0 === t || 0 === t.length)
                    for (n = 0; n < this._frames.length; n++) i.push(this._frames[n].index);
                else
                    for (var n = 0; n < t.length; n++) e && this._frames[t[n]] ? i.push(this._frames[t[n]].index) : this.getFrameByName(t[n]) && i.push(this.getFrameByName(t[n]).index); return i }, destroy: function() { this._frames = null, this._frameNames = null } }, i.FrameData.prototype.constructor = i.FrameData, Object.defineProperty(i.FrameData.prototype, "total", { get: function() { return this._frames.length } }), i.AnimationParser = { spriteSheet: function(t, e, n, s, o, a, r) { var h = e; if ("string" == typeof e && (h = t.cache.getImage(e)), null === h) return null; var l = h.width,
                    c = h.height;
                n <= 0 && (n = Math.floor(-l / Math.min(-1, n))), s <= 0 && (s = Math.floor(-c / Math.min(-1, s))); var u = Math.floor((l - a) / (n + r)) * Math.floor((c - a) / (s + r)); if (-1 !== o && (u = o), 0 === l || 0 === c || l < n || c < s || 0 === u) return console.warn("Phaser.AnimationParser.spriteSheet: '" + e + "'s width/height zero or width/height < given frameWidth/frameHeight"), null; for (var p = new i.FrameData, d = a, m = a, g = 0; g < u; g++) p.addFrame(new i.Frame(g, d, m, n, s, "")), (d += n + r) + n > l && (d = a, m += s + r); return p }, JSONData: function(t, e) { if (!e.frames) return console.warn("Phaser.AnimationParser.JSONData: Invalid Texture Atlas JSON given, missing 'frames' array"), void console.log(e); for (var n, s = new i.FrameData, o = e.frames, a = 0; a < o.length; a++) n = s.addFrame(new i.Frame(a, o[a].frame.x, o[a].frame.y, o[a].frame.w, o[a].frame.h, o[a].filename)), o[a].trimmed && n.setTrim(o[a].trimmed, o[a].sourceSize.w, o[a].sourceSize.h, o[a].spriteSourceSize.x, o[a].spriteSourceSize.y, o[a].spriteSourceSize.w, o[a].spriteSourceSize.h); return s }, JSONDataPyxel: function(t, e) { if (["layers", "tilewidth", "tileheight", "tileswide", "tileshigh"].forEach(function(t) { if (!e[t]) return console.warn('Phaser.AnimationParser.JSONDataPyxel: Invalid Pyxel Tilemap JSON given, missing "' + t + '" key.'), void console.log(e) }), 1 !== e.layers.length) return console.warn("Phaser.AnimationParser.JSONDataPyxel: Too many layers, this parser only supports flat Tilemaps."), void console.log(e); for (var n = new i.FrameData, s = e.tileheight, o = e.tilewidth, a = e.layers[0].tiles, r = 0; r < a.length; r++) n.addFrame(new i.Frame(r, a[r].x, a[r].y, o, s, "frame_" + r)).setTrim(!1); return n }, JSONDataHash: function(t, e) { if (!e.frames) return console.warn("Phaser.AnimationParser.JSONDataHash: Invalid Texture Atlas JSON given, missing 'frames' object"), void console.log(e); var n, s = new i.FrameData,
                    o = e.frames,
                    a = 0; for (var r in o) n = s.addFrame(new i.Frame(a, o[r].frame.x, o[r].frame.y, o[r].frame.w, o[r].frame.h, r)), o[r].trimmed && n.setTrim(o[r].trimmed, o[r].sourceSize.w, o[r].sourceSize.h, o[r].spriteSourceSize.x, o[r].spriteSourceSize.y, o[r].spriteSourceSize.w, o[r].spriteSourceSize.h), a++; return s }, XMLData: function(t, e) { if (e.getElementsByTagName("TextureAtlas")) { for (var n, s, o, a, r, h, l, c, u, p, d, m = new i.FrameData, g = e.getElementsByTagName("SubTexture"), f = 0; f < g.length; f++) s = (o = g[f].attributes).name.value, a = parseInt(o.x.value, 10), r = parseInt(o.y.value, 10), h = parseInt(o.width.value, 10), l = parseInt(o.height.value, 10), c = null, u = null, o.frameX && (c = Math.abs(parseInt(o.frameX.value, 10)), u = Math.abs(parseInt(o.frameY.value, 10)), p = parseInt(o.frameWidth.value, 10), d = parseInt(o.frameHeight.value, 10)), n = m.addFrame(new i.Frame(f, a, r, h, l, s)), null === c && null === u || n.setTrim(!0, h, l, c, u, p, d); return m } console.warn("Phaser.AnimationParser.XMLData: Invalid Texture Atlas XML given, missing <TextureAtlas> tag") } }, i.Cache = function(t) { this.game = t, this.autoResolveURL = !1, this._cache = { canvas: {}, image: {}, texture: {}, sound: {}, video: {}, text: {}, json: {}, xml: {}, physics: {}, tilemap: {}, binary: {}, bitmapData: {}, bitmapFont: {}, shader: {}, renderTexture: {} }, this._urlMap = {}, this._urlResolver = new Image, this._urlTemp = null, this.onSoundUnlock = new i.Signal, this._cacheMap = [], this._cacheMap[i.Cache.CANVAS] = this._cache.canvas, this._cacheMap[i.Cache.IMAGE] = this._cache.image, this._cacheMap[i.Cache.TEXTURE] = this._cache.texture, this._cacheMap[i.Cache.SOUND] = this._cache.sound, this._cacheMap[i.Cache.TEXT] = this._cache.text, this._cacheMap[i.Cache.PHYSICS] = this._cache.physics, this._cacheMap[i.Cache.TILEMAP] = this._cache.tilemap, this._cacheMap[i.Cache.BINARY] = this._cache.binary, this._cacheMap[i.Cache.BITMAPDATA] = this._cache.bitmapData, this._cacheMap[i.Cache.BITMAPFONT] = this._cache.bitmapFont, this._cacheMap[i.Cache.JSON] = this._cache.json, this._cacheMap[i.Cache.XML] = this._cache.xml, this._cacheMap[i.Cache.VIDEO] = this._cache.video, this._cacheMap[i.Cache.SHADER] = this._cache.shader, this._cacheMap[i.Cache.RENDER_TEXTURE] = this._cache.renderTexture, this.addDefaultImage(), this.addMissingImage() }, i.Cache.CANVAS = 1, i.Cache.IMAGE = 2, i.Cache.TEXTURE = 3, i.Cache.SOUND = 4, i.Cache.TEXT = 5, i.Cache.PHYSICS = 6, i.Cache.TILEMAP = 7, i.Cache.BINARY = 8, i.Cache.BITMAPDATA = 9, i.Cache.BITMAPFONT = 10, i.Cache.JSON = 11, i.Cache.XML = 12, i.Cache.VIDEO = 13, i.Cache.SHADER = 14, i.Cache.RENDER_TEXTURE = 15, i.Cache.DEFAULT = null, i.Cache.MISSING = null, i.Cache.prototype = { addCanvas: function(t, e, i) { void 0 === i && (i = e.getContext("2d")), this._cache.canvas[t] = { canvas: e, context: i } }, addImage: function(t, e, n) { this.checkImageKey(t) && this.removeImage(t); var s = { key: t, url: e, data: n, base: new PIXI.BaseTexture(n), frame: new i.Frame(0, 0, 0, n.width, n.height, t), frameData: new i.FrameData }; return s.frameData.addFrame(new i.Frame(0, 0, 0, n.width, n.height, e)), this._cache.image[t] = s, this._resolveURL(e, s), "__default" === t ? i.Cache.DEFAULT = new PIXI.Texture(s.base) : "__missing" === t && (i.Cache.MISSING = new PIXI.Texture(s.base)), s }, addDefaultImage: function() { var t = new Image;
                t.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="; var e = this.addImage("__default", null, t);
                e.base.skipRender = !0, i.Cache.DEFAULT = new PIXI.Texture(e.base) }, addMissingImage: function() { var t = new Image;
                t.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="; var e = this.addImage("__missing", null, t);
                i.Cache.MISSING = new PIXI.Texture(e.base) }, addSound: function(t, e, i, n, s) { void 0 === n && (n = !0, s = !1), void 0 === s && (n = !1, s = !0); var o = !1;
                s && (o = !0), this._cache.sound[t] = { url: e, data: i, isDecoding: !1, decoded: o, webAudio: n, audioTag: s, locked: this.game.sound.touchLocked }, this._resolveURL(e, this._cache.sound[t]) }, addText: function(t, e, i) { this._cache.text[t] = { url: e, data: i }, this._resolveURL(e, this._cache.text[t]) }, addPhysicsData: function(t, e, i, n) { this._cache.physics[t] = { url: e, data: i, format: n }, this._resolveURL(e, this._cache.physics[t]) }, addTilemap: function(t, e, i, n) { this._cache.tilemap[t] = { url: e, data: i, format: n }, this._resolveURL(e, this._cache.tilemap[t]) }, addBinary: function(t, e) { this._cache.binary[t] = e }, addBitmapData: function(t, e, n) { return e.key = t, void 0 === n && (n = new i.FrameData).addFrame(e.textureFrame), this._cache.bitmapData[t] = { data: e, frameData: n }, e }, addBitmapFont: function(t, e, n, s, o, a, r) { var h = { url: e, data: n, font: null, base: new PIXI.BaseTexture(n) };
                void 0 === a && (a = 0), void 0 === r && (r = 0), h.font = "json" === o ? i.LoaderParser.jsonBitmapFont(s, h.base, a, r) : i.LoaderParser.xmlBitmapFont(s, h.base, a, r), this._cache.bitmapFont[t] = h, this._resolveURL(e, h) }, addJSON: function(t, e, i) { this._cache.json[t] = { url: e, data: i }, this._resolveURL(e, this._cache.json[t]) }, addXML: function(t, e, i) { this._cache.xml[t] = { url: e, data: i }, this._resolveURL(e, this._cache.xml[t]) }, addVideo: function(t, e, i, n) { this._cache.video[t] = { url: e, data: i, isBlob: n, locked: !0 }, this._resolveURL(e, this._cache.video[t]) }, addShader: function(t, e, i) { this._cache.shader[t] = { url: e, data: i }, this._resolveURL(e, this._cache.shader[t]) }, addRenderTexture: function(t, e) { this._cache.renderTexture[t] = { texture: e, frame: new i.Frame(0, 0, 0, e.width, e.height, "", "") } }, addSpriteSheet: function(t, e, n, s, o, a, r, h) { void 0 === a && (a = -1), void 0 === r && (r = 0), void 0 === h && (h = 0); var l = { key: t, url: e, data: n, frameWidth: s, frameHeight: o, margin: r, spacing: h, base: new PIXI.BaseTexture(n), frameData: i.AnimationParser.spriteSheet(this.game, n, s, o, a, r, h) };
                this._cache.image[t] = l, this._resolveURL(e, l) }, addTextureAtlas: function(t, e, n, s, o) { var a = { key: t, url: e, data: n, base: new PIXI.BaseTexture(n) };
                o === i.Loader.TEXTURE_ATLAS_XML_STARLING ? a.frameData = i.AnimationParser.XMLData(this.game, s, t) : o === i.Loader.TEXTURE_ATLAS_JSON_PYXEL ? a.frameData = i.AnimationParser.JSONDataPyxel(this.game, s, t) : Array.isArray(s.frames) ? a.frameData = i.AnimationParser.JSONData(this.game, s, t) : a.frameData = i.AnimationParser.JSONDataHash(this.game, s, t), this._cache.image[t] = a, this._resolveURL(e, a) }, reloadSound: function(t) { var e = this,
                    i = this.getSound(t);
                i && (i.data.src = i.url, i.data.addEventListener("canplaythrough", function() { return e.reloadSoundComplete(t) }, !1), i.data.load()) }, reloadSoundComplete: function(t) { var e = this.getSound(t);
                e && (e.locked = !1, this.onSoundUnlock.dispatch(t)) }, updateSound: function(t, e, i) { var n = this.getSound(t);
                n && (n[e] = i) }, decodedSound: function(t, e) { var i = this.getSound(t);
                i.data = e, i.decoded = !0, i.isDecoding = !1 }, isSoundDecoded: function(t) { var e = this.getItem(t, i.Cache.SOUND, "isSoundDecoded"); if (e) return e.decoded }, isSoundReady: function(t) { var e = this.getItem(t, i.Cache.SOUND, "isSoundDecoded"); if (e) return e.decoded && !this.game.sound.touchLocked }, checkKey: function(t, e) { return !!this._cacheMap[t][e] }, checkURL: function(t) { return !!this._urlMap[this._resolveURL(t)] }, checkCanvasKey: function(t) { return this.checkKey(i.Cache.CANVAS, t) }, checkImageKey: function(t) { return this.checkKey(i.Cache.IMAGE, t) }, checkTextureKey: function(t) { return this.checkKey(i.Cache.TEXTURE, t) }, checkSoundKey: function(t) { return this.checkKey(i.Cache.SOUND, t) }, checkTextKey: function(t) { return this.checkKey(i.Cache.TEXT, t) }, checkPhysicsKey: function(t) { return this.checkKey(i.Cache.PHYSICS, t) }, checkTilemapKey: function(t) { return this.checkKey(i.Cache.TILEMAP, t) }, checkBinaryKey: function(t) { return this.checkKey(i.Cache.BINARY, t) }, checkBitmapDataKey: function(t) { return this.checkKey(i.Cache.BITMAPDATA, t) }, checkBitmapFontKey: function(t) { return this.checkKey(i.Cache.BITMAPFONT, t) }, checkJSONKey: function(t) { return this.checkKey(i.Cache.JSON, t) }, checkXMLKey: function(t) { return this.checkKey(i.Cache.XML, t) }, checkVideoKey: function(t) { return this.checkKey(i.Cache.VIDEO, t) }, checkShaderKey: function(t) { return this.checkKey(i.Cache.SHADER, t) }, checkRenderTextureKey: function(t) { return this.checkKey(i.Cache.RENDER_TEXTURE, t) }, getItem: function(t, e, i, n) { return this.checkKey(e, t) ? void 0 === n ? this._cacheMap[e][t] : this._cacheMap[e][t][n] : (i && console.warn("Phaser.Cache." + i + ': Key "' + t + '" not found in Cache.'), null) }, getCanvas: function(t) { return this.getItem(t, i.Cache.CANVAS, "getCanvas", "canvas") }, getImage: function(t, e) { void 0 !== t && null !== t || (t = "__default"), void 0 === e && (e = !1); var n = this.getItem(t, i.Cache.IMAGE, "getImage"); return null === n && (n = this.getItem("__missing", i.Cache.IMAGE, "getImage")), e ? n : n.data }, getTextureFrame: function(t) { return this.getItem(t, i.Cache.TEXTURE, "getTextureFrame", "frame") }, getSound: function(t) { return this.getItem(t, i.Cache.SOUND, "getSound") }, getSoundData: function(t) { return this.getItem(t, i.Cache.SOUND, "getSoundData", "data") }, getText: function(t) { return this.getItem(t, i.Cache.TEXT, "getText", "data") }, getPhysicsData: function(t, e, n) { var s = this.getItem(t, i.Cache.PHYSICS, "getPhysicsData", "data"); if (null === s || void 0 === e || null === e) return s; if (s[e]) { var o = s[e]; if (!o || !n) return o; for (var a in o)
                        if ((a = o[a]).fixtureKey === n) return a;
                    console.warn('Phaser.Cache.getPhysicsData: Could not find given fixtureKey: "' + n + " in " + t + '"') } else console.warn('Phaser.Cache.getPhysicsData: Invalid key/object: "' + t + " / " + e + '"'); return null }, getTilemapData: function(t) { return this.getItem(t, i.Cache.TILEMAP, "getTilemapData") }, getBinary: function(t) { return this.getItem(t, i.Cache.BINARY, "getBinary") }, getBitmapData: function(t) { return this.getItem(t, i.Cache.BITMAPDATA, "getBitmapData", "data") }, getBitmapFont: function(t) { return this.getItem(t, i.Cache.BITMAPFONT, "getBitmapFont") }, getJSON: function(t, e) { var n = this.getItem(t, i.Cache.JSON, "getJSON", "data"); return n ? e ? i.Utils.extend(!0, Array.isArray(n) ? [] : {}, n) : n : null }, getXML: function(t) { return this.getItem(t, i.Cache.XML, "getXML", "data") }, getVideo: function(t) { return this.getItem(t, i.Cache.VIDEO, "getVideo") }, getShader: function(t) { return this.getItem(t, i.Cache.SHADER, "getShader", "data") }, getRenderTexture: function(t) { return this.getItem(t, i.Cache.RENDER_TEXTURE, "getRenderTexture") }, getBaseTexture: function(t, e) { return void 0 === e && (e = i.Cache.IMAGE), this.getItem(t, e, "getBaseTexture", "base") }, getFrame: function(t, e) { return void 0 === e && (e = i.Cache.IMAGE), this.getItem(t, e, "getFrame", "frame") }, getFrameCount: function(t, e) { var i = this.getFrameData(t, e); return i ? i.total : 0 }, getFrameData: function(t, e) { return void 0 === e && (e = i.Cache.IMAGE), this.getItem(t, e, "getFrameData", "frameData") }, hasFrameData: function(t, e) { return void 0 === e && (e = i.Cache.IMAGE), null !== this.getItem(t, e, "", "frameData") }, updateFrameData: function(t, e, n) { void 0 === n && (n = i.Cache.IMAGE), this._cacheMap[n][t] && (this._cacheMap[n][t].frameData = e) }, getFrameByIndex: function(t, e, i) { var n = this.getFrameData(t, i); return n ? n.getFrame(e) : null }, getFrameByName: function(t, e, i) { var n = this.getFrameData(t, i); return n ? n.getFrameByName(e) : null }, getURL: function(t) { return (t = this._resolveURL(t)) ? this._urlMap[t] : (console.warn('Phaser.Cache.getUrl: Invalid url: "' + t + '" or Cache.autoResolveURL was false'), null) }, getKeys: function(t) { void 0 === t && (t = i.Cache.IMAGE); var e = []; if (this._cacheMap[t])
                    for (var n in this._cacheMap[t]) "__default" !== n && "__missing" !== n && e.push(n); return e }, removeCanvas: function(t) { delete this._cache.canvas[t] }, removeImage: function(t, e) { void 0 === e && (e = !0); var i = this.getImage(t, !0);
                e && i.base && i.base.destroy(), delete this._cache.image[t] }, removeSound: function(t) { delete this._cache.sound[t] }, removeText: function(t) { delete this._cache.text[t] }, removePhysics: function(t) { delete this._cache.physics[t] }, removeTilemap: function(t) { delete this._cache.tilemap[t] }, removeBinary: function(t) { delete this._cache.binary[t] }, removeBitmapData: function(t) { delete this._cache.bitmapData[t] }, removeBitmapFont: function(t) { delete this._cache.bitmapFont[t] }, removeJSON: function(t) { delete this._cache.json[t] }, removeXML: function(t) { delete this._cache.xml[t] }, removeVideo: function(t) { delete this._cache.video[t] }, removeShader: function(t) { delete this._cache.shader[t] }, removeRenderTexture: function(t) { delete this._cache.renderTexture[t] }, removeSpriteSheet: function(t) { delete this._cache.spriteSheet[t] }, removeTextureAtlas: function(t) { delete this._cache.atlas[t] }, clearGLTextures: function() { for (var t in this._cache.image) this._cache.image[t].base._glTextures = [] }, _resolveURL: function(t, e) { return this.autoResolveURL ? (this._urlResolver.src = this.game.load.baseURL + t, this._urlTemp = this._urlResolver.src, this._urlResolver.src = "", e && (this._urlMap[this._urlTemp] = e), this._urlTemp) : null }, destroy: function() { for (var t = 0; t < this._cacheMap.length; t++) { var e = this._cacheMap[t]; for (var i in e) "__default" !== i && "__missing" !== i && (e[i].destroy && e[i].destroy(), delete e[i]) } this._urlMap = null, this._urlResolver = null, this._urlTemp = null } }, i.Cache.prototype.constructor = i.Cache, i.Loader = function(t) { this.game = t, this.cache = t.cache, this.resetLocked = !1, this.isLoading = !1, this.hasLoaded = !1, this.preloadSprite = null, this.crossOrigin = !1, this.baseURL = "", this.path = "", this.headers = { requestedWith: !1, json: "application/json", xml: "application/xml" }, this.onLoadStart = new i.Signal, this.onLoadComplete = new i.Signal, this.onPackComplete = new i.Signal, this.onFileStart = new i.Signal, this.onFileComplete = new i.Signal, this.onFileError = new i.Signal, this.useXDomainRequest = !1, this._warnedAboutXDomainRequest = !1, this.enableParallel = !0, this.maxParallelDownloads = 4, this._withSyncPointDepth = 0, this._fileList = [], this._flightQueue = [], this._processingHead = 0, this._fileLoadStarted = !1, this._totalPackCount = 0, this._totalFileCount = 0, this._loadedPackCount = 0, this._loadedFileCount = 0 }, i.Loader.TEXTURE_ATLAS_JSON_ARRAY = 0, i.Loader.TEXTURE_ATLAS_JSON_HASH = 1, i.Loader.TEXTURE_ATLAS_XML_STARLING = 2, i.Loader.PHYSICS_LIME_CORONA_JSON = 3, i.Loader.PHYSICS_PHASER_JSON = 4, i.Loader.TEXTURE_ATLAS_JSON_PYXEL = 5, i.Loader.prototype = { setPreloadSprite: function(t, e) { e = e || 0, this.preloadSprite = { sprite: t, direction: e, width: t.width, height: t.height, rect: null }, this.preloadSprite.rect = 0 === e ? new i.Rectangle(0, 0, 1, t.height) : new i.Rectangle(0, 0, t.width, 1), t.crop(this.preloadSprite.rect), t.visible = !0 }, resize: function() { this.preloadSprite && this.preloadSprite.height !== this.preloadSprite.sprite.height && (this.preloadSprite.rect.height = this.preloadSprite.sprite.height) }, checkKeyExists: function(t, e) { return this.getAssetIndex(t, e) > -1 }, getAssetIndex: function(t, e) { for (var i = -1, n = 0; n < this._fileList.length; n++) { var s = this._fileList[n]; if (s.type === t && s.key === e && (i = n, !s.loaded && !s.loading)) break } return i }, getAsset: function(t, e) { var i = this.getAssetIndex(t, e); return i > -1 && { index: i, file: this._fileList[i] } }, reset: function(t, e) { void 0 === e && (e = !1), this.resetLocked || (t && (this.preloadSprite = null), this.isLoading = !1, this._processingHead = 0, this._fileList.length = 0, this._flightQueue.length = 0, this._fileLoadStarted = !1, this._totalFileCount = 0, this._totalPackCount = 0, this._loadedPackCount = 0, this._loadedFileCount = 0, e && (this.onLoadStart.removeAll(), this.onLoadComplete.removeAll(), this.onPackComplete.removeAll(), this.onFileStart.removeAll(), this.onFileComplete.removeAll(), this.onFileError.removeAll())) }, addToFileList: function(t, e, i, n, s, o) { if (void 0 === s && (s = !1), void 0 === e || "" === e) return console.warn("Phaser.Loader: Invalid or no key given of type " + t), this; if (void 0 === i || null === i) { if (!o) return console.warn("Phaser.Loader: No URL given for file type: " + t + " key: " + e), this;
                    i = e + o } var a = { type: t, key: e, path: this.path, url: i, syncPoint: this._withSyncPointDepth > 0, data: null, loading: !1, loaded: !1, error: !1 }; if (n)
                    for (var r in n) a[r] = n[r]; var h = this.getAssetIndex(t, e); if (s && h > -1) { var l = this._fileList[h];
                    l.loading || l.loaded ? (this._fileList.push(a), this._totalFileCount++) : this._fileList[h] = a } else -1 === h && (this._fileList.push(a), this._totalFileCount++); return this }, replaceInFileList: function(t, e, i, n) { return this.addToFileList(t, e, i, n, !0) }, pack: function(t, e, i, n) { if (void 0 === e && (e = null), void 0 === i && (i = null), void 0 === n && (n = null), !e && !i) return console.warn("Phaser.Loader.pack - Both url and data are null. One must be set."), this; var s = { type: "packfile", key: t, url: e, path: this.path, syncPoint: !0, data: null, loading: !1, loaded: !1, error: !1, callbackContext: n };
                i && ("string" == typeof i && (i = JSON.parse(i)), s.data = i || {}, s.loaded = !0); for (var o = 0; o < this._fileList.length + 1; o++) { var a = this._fileList[o]; if (!a || !a.loaded && !a.loading && "packfile" !== a.type) { this._fileList.splice(o, 0, s), this._totalPackCount++; break } } return this }, image: function(t, e, i) { return this.addToFileList("image", t, e, void 0, i, ".png") }, images: function(t, e) { if (Array.isArray(e))
                    for (i = 0; i < t.length; i++) this.image(t[i], e[i]);
                else
                    for (var i = 0; i < t.length; i++) this.image(t[i]); return this }, text: function(t, e, i) { return this.addToFileList("text", t, e, void 0, i, ".txt") }, json: function(t, e, i) { return this.addToFileList("json", t, e, void 0, i, ".json") }, shader: function(t, e, i) { return this.addToFileList("shader", t, e, void 0, i, ".frag") }, xml: function(t, e, i) { return this.addToFileList("xml", t, e, void 0, i, ".xml") }, script: function(t, e, i, n) { return void 0 === i && (i = !1), !1 !== i && void 0 === n && (n = this), this.addToFileList("script", t, e, { syncPoint: !0, callback: i, callbackContext: n }, !1, ".js") }, binary: function(t, e, i, n) { return void 0 === i && (i = !1), !1 !== i && void 0 === n && (n = i), this.addToFileList("binary", t, e, { callback: i, callbackContext: n }, !1, ".bin") }, spritesheet: function(t, e, i, n, s, o, a) { return void 0 === s && (s = -1), void 0 === o && (o = 0), void 0 === a && (a = 0), this.addToFileList("spritesheet", t, e, { frameWidth: i, frameHeight: n, frameMax: s, margin: o, spacing: a }, !1, ".png") }, audio: function(t, e, i) { return this.game.sound.noAudio ? this : (void 0 === i && (i = !0), "string" == typeof e && (e = [e]), this.addToFileList("audio", t, e, { buffer: null, autoDecode: i })) }, audioSprite: function(t, e, i, n, s) { return this.game.sound.noAudio ? this : (void 0 === i && (i = null), void 0 === n && (n = null), void 0 === s && (s = !0), this.audio(t, e, s), i ? this.json(t + "-audioatlas", i) : n ? ("string" == typeof n && (n = JSON.parse(n)), this.cache.addJSON(t + "-audioatlas", "", n)) : console.warn("Phaser.Loader.audiosprite - You must specify either a jsonURL or provide a jsonData object"), this) }, audiosprite: function(t, e, i, n, s) { return this.audioSprite(t, e, i, n, s) }, video: function(t, e, i, n) { return void 0 === i && (i = this.game.device.firefox ? "loadeddata" : "canplaythrough"), void 0 === n && (n = !1), "string" == typeof e && (e = [e]), this.addToFileList("video", t, e, { buffer: null, asBlob: n, loadEvent: i }) }, tilemap: function(t, e, n, s) { if (void 0 === e && (e = null), void 0 === n && (n = null), void 0 === s && (s = i.Tilemap.CSV), e || n || (e = s === i.Tilemap.CSV ? t + ".csv" : t + ".json"), n) { switch (s) {
                        case i.Tilemap.CSV:
                            break;
                        case i.Tilemap.TILED_JSON:
                            "string" == typeof n && (n = JSON.parse(n)) } this.cache.addTilemap(t, null, n, s) } else this.addToFileList("tilemap", t, e, { format: s }); return this }, physics: function(t, e, n, s) { return void 0 === e && (e = null), void 0 === n && (n = null), void 0 === s && (s = i.Physics.LIME_CORONA_JSON), e || n || (e = t + ".json"), n ? ("string" == typeof n && (n = JSON.parse(n)), this.cache.addPhysicsData(t, null, n, s)) : this.addToFileList("physics", t, e, { format: s }), this }, bitmapFont: function(t, e, i, n, s, o) { if (void 0 !== e && null !== e || (e = t + ".png"), void 0 === i && (i = null), void 0 === n && (n = null), null === i && null === n && (i = t + ".xml"), void 0 === s && (s = 0), void 0 === o && (o = 0), i) this.addToFileList("bitmapfont", t, e, { atlasURL: i, xSpacing: s, ySpacing: o });
                else if ("string" == typeof n) { var a, r; try { a = JSON.parse(n) } catch (t) { r = this.parseXml(n) } if (!r && !a) throw new Error("Phaser.Loader. Invalid Bitmap Font atlas given");
                    this.addToFileList("bitmapfont", t, e, { atlasURL: null, atlasData: a || r, atlasType: a ? "json" : "xml", xSpacing: s, ySpacing: o }) } return this }, atlasJSONArray: function(t, e, n, s) { return this.atlas(t, e, n, s, i.Loader.TEXTURE_ATLAS_JSON_ARRAY) }, atlasJSONHash: function(t, e, n, s) { return this.atlas(t, e, n, s, i.Loader.TEXTURE_ATLAS_JSON_HASH) }, atlasXML: function(t, e, n, s) { return void 0 === n && (n = null), void 0 === s && (s = null), n || s || (n = t + ".xml"), this.atlas(t, e, n, s, i.Loader.TEXTURE_ATLAS_XML_STARLING) }, atlas: function(t, e, n, s, o) { if (void 0 !== e && null !== e || (e = t + ".png"), void 0 === n && (n = null), void 0 === s && (s = null), void 0 === o && (o = i.Loader.TEXTURE_ATLAS_JSON_ARRAY), n || s || (n = o === i.Loader.TEXTURE_ATLAS_XML_STARLING ? t + ".xml" : t + ".json"), n) this.addToFileList("textureatlas", t, e, { atlasURL: n, format: o });
                else { switch (o) {
                        case i.Loader.TEXTURE_ATLAS_JSON_ARRAY:
                            "string" == typeof s && (s = JSON.parse(s)); break;
                        case i.Loader.TEXTURE_ATLAS_XML_STARLING:
                            if ("string" == typeof s) { var a = this.parseXml(s); if (!a) throw new Error("Phaser.Loader. Invalid Texture Atlas XML given");
                                s = a } } this.addToFileList("textureatlas", t, e, { atlasURL: null, atlasData: s, format: o }) } return this }, withSyncPoint: function(t, e) { this._withSyncPointDepth++; try { t.call(e || this, this) } finally { this._withSyncPointDepth-- } return this }, addSyncPoint: function(t, e) { var i = this.getAsset(t, e); return i && (i.file.syncPoint = !0), this }, removeFile: function(t, e) { var i = this.getAsset(t, e);
                i && (i.loaded || i.loading || this._fileList.splice(i.index, 1)) }, removeAll: function() { this._fileList.length = 0, this._flightQueue.length = 0 }, start: function() { this.isLoading || (this.hasLoaded = !1, this.isLoading = !0, this.updateProgress(), this.processLoadQueue()) }, processLoadQueue: function() { if (!this.isLoading) return console.warn("Phaser.Loader - active loading canceled / reset"), void this.finishedLoading(!0); for (n = 0; n < this._flightQueue.length; n++)((s = this._flightQueue[n]).loaded || s.error) && (this._flightQueue.splice(n, 1), n--, s.loading = !1, s.requestUrl = null, s.requestObject = null, s.error && this.onFileError.dispatch(s.key, s), "packfile" !== s.type ? (this._loadedFileCount++, this.onFileComplete.dispatch(this.progress, s.key, !s.error, this._loadedFileCount, this._totalFileCount)) : "packfile" === s.type && s.error && (this._loadedPackCount++, this.onPackComplete.dispatch(s.key, !s.error, this._loadedPackCount, this._totalPackCount))); for (var t = !1, e = this.enableParallel ? i.Math.clamp(this.maxParallelDownloads, 1, 12) : 1, n = this._processingHead; n < this._fileList.length; n++) { var s = this._fileList[n]; if ("packfile" === s.type && !s.error && s.loaded && n === this._processingHead && (this.processPack(s), this._loadedPackCount++, this.onPackComplete.dispatch(s.key, !s.error, this._loadedPackCount, this._totalPackCount)), s.loaded || s.error ? n === this._processingHead && (this._processingHead = n + 1) : !s.loading && this._flightQueue.length < e && ("packfile" !== s.type || s.data ? t || (this._fileLoadStarted || (this._fileLoadStarted = !0, this.onLoadStart.dispatch()), this._flightQueue.push(s), s.loading = !0, this.onFileStart.dispatch(this.progress, s.key, s.url), this.loadFile(s)) : (this._flightQueue.push(s), s.loading = !0, this.loadFile(s))), !s.loaded && s.syncPoint && (t = !0), this._flightQueue.length >= e || t && this._loadedPackCount === this._totalPackCount) break } if (this.updateProgress(), this._processingHead >= this._fileList.length) this.finishedLoading();
                else if (!this._flightQueue.length) { console.warn("Phaser.Loader - aborting: processing queue empty, loading may have stalled"); var o = this;
                    setTimeout(function() { o.finishedLoading(!0) }, 2e3) } }, finishedLoading: function(t) { this.hasLoaded || (this.hasLoaded = !0, this.isLoading = !1, t || this._fileLoadStarted || (this._fileLoadStarted = !0, this.onLoadStart.dispatch()), this.onLoadComplete.dispatch(), this.game.state.loadComplete(), this.reset()) }, asyncComplete: function(t, e) { void 0 === e && (e = ""), t.loaded = !0, t.error = !!e, e && (t.errorMessage = e, console.warn("Phaser.Loader - " + t.type + "[" + t.key + "]: " + e)), this.processLoadQueue() }, processPack: function(t) { var e = t.data[t.key]; if (e)
                    for (var n = 0; n < e.length; n++) { var s = e[n]; switch (s.type) {
                            case "image":
                                this.image(s.key, s.url, s.overwrite); break;
                            case "text":
                                this.text(s.key, s.url, s.overwrite); break;
                            case "json":
                                this.json(s.key, s.url, s.overwrite); break;
                            case "xml":
                                this.xml(s.key, s.url, s.overwrite); break;
                            case "script":
                                this.script(s.key, s.url, s.callback, t.callbackContext || this); break;
                            case "binary":
                                this.binary(s.key, s.url, s.callback, t.callbackContext || this); break;
                            case "spritesheet":
                                this.spritesheet(s.key, s.url, s.frameWidth, s.frameHeight, s.frameMax, s.margin, s.spacing); break;
                            case "video":
                                this.video(s.key, s.urls); break;
                            case "audio":
                                this.audio(s.key, s.urls, s.autoDecode); break;
                            case "audiosprite":
                                this.audiosprite(s.key, s.urls, s.jsonURL, s.jsonData, s.autoDecode); break;
                            case "tilemap":
                                this.tilemap(s.key, s.url, s.data, i.Tilemap[s.format]); break;
                            case "physics":
                                this.physics(s.key, s.url, s.data, i.Loader[s.format]); break;
                            case "bitmapFont":
                                this.bitmapFont(s.key, s.textureURL, s.atlasURL, s.atlasData, s.xSpacing, s.ySpacing); break;
                            case "atlasJSONArray":
                                this.atlasJSONArray(s.key, s.textureURL, s.atlasURL, s.atlasData); break;
                            case "atlasJSONHash":
                                this.atlasJSONHash(s.key, s.textureURL, s.atlasURL, s.atlasData); break;
                            case "atlasXML":
                                this.atlasXML(s.key, s.textureURL, s.atlasURL, s.atlasData); break;
                            case "atlas":
                                this.atlas(s.key, s.textureURL, s.atlasURL, s.atlasData, i.Loader[s.format]); break;
                            case "shader":
                                this.shader(s.key, s.url, s.overwrite) } } else console.warn("Phaser.Loader - " + t.key + ": pack has data, but not for pack key") }, transformUrl: function(t, e) { return !!t && (t.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/) ? t : this.baseURL + e.path + t) }, loadFile: function(t) { switch (t.type) {
                    case "packfile":
                        this.xhrLoad(t, this.transformUrl(t.url, t), "text", this.fileComplete); break;
                    case "image":
                    case "spritesheet":
                    case "textureatlas":
                    case "bitmapfont":
                        this.loadImageTag(t); break;
                    case "audio":
                        t.url = this.getAudioURL(t.url), t.url ? this.game.sound.usingWebAudio ? this.xhrLoad(t, this.transformUrl(t.url, t), "arraybuffer", this.fileComplete) : this.game.sound.usingAudioTag && this.loadAudioTag(t) : this.fileError(t, null, "No supported audio URL specified or device does not have audio playback support"); break;
                    case "video":
                        t.url = this.getVideoURL(t.url), t.url ? t.asBlob ? this.xhrLoad(t, this.transformUrl(t.url, t), "blob", this.fileComplete) : this.loadVideoTag(t) : this.fileError(t, null, "No supported video URL specified or device does not have video playback support"); break;
                    case "json":
                        this.xhrLoad(t, this.transformUrl(t.url, t), "text", this.jsonLoadComplete); break;
                    case "xml":
                        this.xhrLoad(t, this.transformUrl(t.url, t), "text", this.xmlLoadComplete); break;
                    case "tilemap":
                        t.format === i.Tilemap.TILED_JSON ? this.xhrLoad(t, this.transformUrl(t.url, t), "text", this.jsonLoadComplete) : t.format === i.Tilemap.CSV ? this.xhrLoad(t, this.transformUrl(t.url, t), "text", this.csvLoadComplete) : this.asyncComplete(t, "invalid Tilemap format: " + t.format); break;
                    case "text":
                    case "script":
                    case "shader":
                    case "physics":
                        this.xhrLoad(t, this.transformUrl(t.url, t), "text", this.fileComplete); break;
                    case "binary":
                        this.xhrLoad(t, this.transformUrl(t.url, t), "arraybuffer", this.fileComplete) } }, loadImageTag: function(t) { var e = this;
                t.data = new Image, t.data.name = t.key, this.crossOrigin && (t.data.crossOrigin = this.crossOrigin), t.data.onload = function() { t.data.onload && (t.data.onload = null, t.data.onerror = null, e.fileComplete(t)) }, t.data.onerror = function() { t.data.onload && (t.data.onload = null, t.data.onerror = null, e.fileError(t)) }, t.data.src = this.transformUrl(t.url, t), t.data.complete && t.data.width && t.data.height && (t.data.onload = null, t.data.onerror = null, this.fileComplete(t)) }, loadVideoTag: function(t) { var e = this;
                t.data = document.createElement("video"), t.data.name = t.key, t.data.controls = !1, t.data.autoplay = !1; var n = function() { t.data.removeEventListener(t.loadEvent, n, !1), t.data.onerror = null, t.data.canplay = !0, i.GAMES[e.game.id].load.fileComplete(t) };
                t.data.onerror = function() { t.data.removeEventListener(t.loadEvent, n, !1), t.data.onerror = null, t.data.canplay = !1, e.fileError(t) }, t.data.addEventListener(t.loadEvent, n, !1), t.data.src = this.transformUrl(t.url, t), t.data.load() }, loadAudioTag: function(t) { var e = this; if (this.game.sound.touchLocked) t.data = new Audio, t.data.name = t.key, t.data.preload = "auto", t.data.src = this.transformUrl(t.url, t), this.fileComplete(t);
                else { t.data = new Audio, t.data.name = t.key; var i = function() { t.data.removeEventListener("canplaythrough", i, !1), t.data.onerror = null, e.fileComplete(t) };
                    t.data.onerror = function() { t.data.removeEventListener("canplaythrough", i, !1), t.data.onerror = null, e.fileError(t) }, t.data.preload = "auto", t.data.src = this.transformUrl(t.url, t), t.data.addEventListener("canplaythrough", i, !1), t.data.load() } }, xhrLoad: function(t, e, i, n, s) { if (this.useXDomainRequest && window.XDomainRequest) this.xhrLoadWithXDR(t, e, i, n, s);
                else { var o = new XMLHttpRequest;
                    o.open("GET", e, !0), o.responseType = i, !1 !== this.headers.requestedWith && o.setRequestHeader("X-Requested-With", this.headers.requestedWith), this.headers[t.type] && o.setRequestHeader("Accept", this.headers[t.type]), s = s || this.fileError; var a = this;
                    o.onload = function() { try { return 4 === o.readyState && o.status >= 400 && o.status <= 599 ? s.call(a, t, o) : n.call(a, t, o) } catch (e) { a.hasLoaded ? window.console && console.error(e) : a.asyncComplete(t, e.message || "Exception") } }, o.onerror = function() { try { return s.call(a, t, o) } catch (e) { a.hasLoaded ? window.console && console.error(e) : a.asyncComplete(t, e.message || "Exception") } }, t.requestObject = o, t.requestUrl = e, o.send() } }, xhrLoadWithXDR: function(t, e, i, n, s) { this._warnedAboutXDomainRequest || this.game.device.ie && !(this.game.device.ieVersion >= 10) || (this._warnedAboutXDomainRequest = !0, console.warn("Phaser.Loader - using XDomainRequest outside of IE 9")); var o = new window.XDomainRequest;
                o.open("GET", e, !0), o.responseType = i, o.timeout = 3e3, s = s || this.fileError; var a = this;
                o.onerror = function() { try { return s.call(a, t, o) } catch (e) { a.asyncComplete(t, e.message || "Exception") } }, o.ontimeout = function() { try { return s.call(a, t, o) } catch (e) { a.asyncComplete(t, e.message || "Exception") } }, o.onprogress = function() {}, o.onload = function() { try { return 4 === o.readyState && o.status >= 400 && o.status <= 599 ? s.call(a, t, o) : n.call(a, t, o) } catch (e) { a.asyncComplete(t, e.message || "Exception") } }, t.requestObject = o, t.requestUrl = e, setTimeout(function() { o.send() }, 0) }, getVideoURL: function(t) { for (var e = 0; e < t.length; e++) { var i, n = t[e]; if (n.uri) { if (i = n.type, n = n.uri, this.game.device.canPlayVideo(i)) return n } else { if (0 === n.indexOf("blob:") || 0 === n.indexOf("data:")) return n; if (n.indexOf("?") >= 0 && (n = n.substr(0, n.indexOf("?"))), i = n.substr((Math.max(0, n.lastIndexOf(".")) || 1 / 0) + 1).toLowerCase(), this.game.device.canPlayVideo(i)) return t[e] } } return null }, getAudioURL: function(t) { if (this.game.sound.noAudio) return null; for (var e = 0; e < t.length; e++) { var i, n = t[e]; if (n.uri) { if (i = n.type, n = n.uri, this.game.device.canPlayAudio(i)) return n } else { if (0 === n.indexOf("blob:") || 0 === n.indexOf("data:")) return n; if (n.indexOf("?") >= 0 && (n = n.substr(0, n.indexOf("?"))), i = n.substr((Math.max(0, n.lastIndexOf(".")) || 1 / 0) + 1).toLowerCase(), this.game.device.canPlayAudio(i)) return t[e] } } return null }, fileError: function(t, e, i) { var n = "error loading asset from URL " + (t.requestUrl || this.transformUrl(t.url, t));!i && e && (i = e.status), i && (n = n + " (" + i + ")"), this.asyncComplete(t, n) }, fileComplete: function(t, e) { var n = !0; switch (t.type) {
                    case "packfile":
                        s = JSON.parse(e.responseText);
                        t.data = s || {}; break;
                    case "image":
                        this.cache.addImage(t.key, t.url, t.data); break;
                    case "spritesheet":
                        this.cache.addSpriteSheet(t.key, t.url, t.data, t.frameWidth, t.frameHeight, t.frameMax, t.margin, t.spacing); break;
                    case "textureatlas":
                        if (null == t.atlasURL) this.cache.addTextureAtlas(t.key, t.url, t.data, t.atlasData, t.format);
                        else if (n = !1, t.format === i.Loader.TEXTURE_ATLAS_JSON_ARRAY || t.format === i.Loader.TEXTURE_ATLAS_JSON_HASH || t.format === i.Loader.TEXTURE_ATLAS_JSON_PYXEL) this.xhrLoad(t, this.transformUrl(t.atlasURL, t), "text", this.jsonLoadComplete);
                        else { if (t.format !== i.Loader.TEXTURE_ATLAS_XML_STARLING) throw new Error("Phaser.Loader. Invalid Texture Atlas format: " + t.format);
                            this.xhrLoad(t, this.transformUrl(t.atlasURL, t), "text", this.xmlLoadComplete) } break;
                    case "bitmapfont":
                        t.atlasURL ? (n = !1, this.xhrLoad(t, this.transformUrl(t.atlasURL, t), "text", function(t, e) { var i; try { i = JSON.parse(e.responseText) } catch (t) {} i ? (t.atlasType = "json", this.jsonLoadComplete(t, e)) : (t.atlasType = "xml", this.xmlLoadComplete(t, e)) })) : this.cache.addBitmapFont(t.key, t.url, t.data, t.atlasData, t.atlasType, t.xSpacing, t.ySpacing); break;
                    case "video":
                        if (t.asBlob) try { t.data = e.response } catch (e) { throw new Error("Phaser.Loader. Unable to parse video file as Blob: " + t.key) } this.cache.addVideo(t.key, t.url, t.data, t.asBlob); break;
                    case "audio":
                        this.game.sound.usingWebAudio ? (t.data = e.response, this.cache.addSound(t.key, t.url, t.data, !0, !1), t.autoDecode && this.game.sound.decode(t.key)) : this.cache.addSound(t.key, t.url, t.data, !1, !0); break;
                    case "text":
                        t.data = e.responseText, this.cache.addText(t.key, t.url, t.data); break;
                    case "shader":
                        t.data = e.responseText, this.cache.addShader(t.key, t.url, t.data); break;
                    case "physics":
                        var s = JSON.parse(e.responseText);
                        this.cache.addPhysicsData(t.key, t.url, s, t.format); break;
                    case "script":
                        t.data = document.createElement("script"), t.data.language = "javascript", t.data.type = "text/javascript", t.data.defer = !1, t.data.text = e.responseText, document.head.appendChild(t.data), t.callback && (t.data = t.callback.call(t.callbackContext, t.key, e.responseText)); break;
                    case "binary":
                        t.callback ? t.data = t.callback.call(t.callbackContext, t.key, e.response) : t.data = e.response, this.cache.addBinary(t.key, t.data) } n && this.asyncComplete(t) }, jsonLoadComplete: function(t, e) { var i = JSON.parse(e.responseText); "tilemap" === t.type ? this.cache.addTilemap(t.key, t.url, i, t.format) : "bitmapfont" === t.type ? this.cache.addBitmapFont(t.key, t.url, t.data, i, t.atlasType, t.xSpacing, t.ySpacing) : "json" === t.type ? this.cache.addJSON(t.key, t.url, i) : this.cache.addTextureAtlas(t.key, t.url, t.data, i, t.format), this.asyncComplete(t) }, csvLoadComplete: function(t, e) { var i = e.responseText;
                this.cache.addTilemap(t.key, t.url, i, t.format), this.asyncComplete(t) }, xmlLoadComplete: function(t, e) { var i = e.responseText,
                    n = this.parseXml(i); if (!n) { var s = e.responseType || e.contentType; return console.warn("Phaser.Loader - " + t.key + ": invalid XML (" + s + ")"), void this.asyncComplete(t, "invalid XML") } "bitmapfont" === t.type ? this.cache.addBitmapFont(t.key, t.url, t.data, n, t.atlasType, t.xSpacing, t.ySpacing) : "textureatlas" === t.type ? this.cache.addTextureAtlas(t.key, t.url, t.data, n, t.format) : "xml" === t.type && this.cache.addXML(t.key, t.url, n), this.asyncComplete(t) }, parseXml: function(t) { var e; try { if (window.DOMParser) { var i = new DOMParser;
                        e = i.parseFromString(t, "text/xml") } else(e = new ActiveXObject("Microsoft.XMLDOM")).async = "false", e.loadXML(t) } catch (t) { e = null } return e && e.documentElement && !e.getElementsByTagName("parsererror").length ? e : null }, updateProgress: function() { this.preloadSprite && (0 === this.preloadSprite.direction ? this.preloadSprite.rect.width = Math.floor(this.preloadSprite.width / 100 * this.progress) : this.preloadSprite.rect.height = Math.floor(this.preloadSprite.height / 100 * this.progress), this.preloadSprite.sprite ? this.preloadSprite.sprite.updateCrop() : this.preloadSprite = null) }, totalLoadedFiles: function() { return this._loadedFileCount }, totalQueuedFiles: function() { return this._totalFileCount - this._loadedFileCount }, totalLoadedPacks: function() { return this._totalPackCount }, totalQueuedPacks: function() { return this._totalPackCount - this._loadedPackCount } }, Object.defineProperty(i.Loader.prototype, "progressFloat", { get: function() { var t = this._loadedFileCount / this._totalFileCount * 100; return i.Math.clamp(t || 0, 0, 100) } }), Object.defineProperty(i.Loader.prototype, "progress", { get: function() { return Math.round(this.progressFloat) } }), i.Loader.prototype.constructor = i.Loader, i.LoaderParser = { bitmapFont: function(t, e, i, n) { return this.xmlBitmapFont(t, e, i, n) }, xmlBitmapFont: function(t, e, i, n) { var s = {},
                    o = t.getElementsByTagName("info")[0],
                    a = t.getElementsByTagName("common")[0];
                s.font = o.getAttribute("face"), s.size = parseInt(o.getAttribute("size"), 10), s.lineHeight = parseInt(a.getAttribute("lineHeight"), 10) + n, s.chars = {}; for (var r = t.getElementsByTagName("char"), h = 0; h < r.length; h++) { var l = parseInt(r[h].getAttribute("id"), 10);
                    s.chars[l] = { x: parseInt(r[h].getAttribute("x"), 10), y: parseInt(r[h].getAttribute("y"), 10), width: parseInt(r[h].getAttribute("width"), 10), height: parseInt(r[h].getAttribute("height"), 10), xOffset: parseInt(r[h].getAttribute("xoffset"), 10), yOffset: parseInt(r[h].getAttribute("yoffset"), 10), xAdvance: parseInt(r[h].getAttribute("xadvance"), 10) + i, kerning: {} } } var c = t.getElementsByTagName("kerning"); for (h = 0; h < c.length; h++) { var u = parseInt(c[h].getAttribute("first"), 10),
                        p = parseInt(c[h].getAttribute("second"), 10),
                        d = parseInt(c[h].getAttribute("amount"), 10);
                    s.chars[p].kerning[u] = d } return this.finalizeBitmapFont(e, s) }, jsonBitmapFont: function(t, e, i, n) { var s = { font: t.font.info._face, size: parseInt(t.font.info._size, 10), lineHeight: parseInt(t.font.common._lineHeight, 10) + n, chars: {} }; return t.font.chars.char.forEach(function(t) { var e = parseInt(t._id, 10);
                    s.chars[e] = { x: parseInt(t._x, 10), y: parseInt(t._y, 10), width: parseInt(t._width, 10), height: parseInt(t._height, 10), xOffset: parseInt(t._xoffset, 10), yOffset: parseInt(t._yoffset, 10), xAdvance: parseInt(t._xadvance, 10) + i, kerning: {} } }), t.font.kernings && t.font.kernings.kerning && t.font.kernings.kerning.forEach(function(t) { s.chars[t._second].kerning[t._first] = parseInt(t._amount, 10) }), this.finalizeBitmapFont(e, s) }, finalizeBitmapFont: function(t, e) { return Object.keys(e.chars).forEach(function(n) { var s = e.chars[n];
                    s.texture = new PIXI.Texture(t, new i.Rectangle(s.x, s.y, s.width, s.height)) }), e } }, i.AudioSprite = function(t, e) { this.game = t, this.key = e, this.config = this.game.cache.getJSON(e + "-audioatlas"), this.autoplayKey = null, this.autoplay = !1, this.sounds = {}; for (var i in this.config.spritemap) { var n = this.config.spritemap[i],
                    s = this.game.add.sound(this.key);
                s.addMarker(i, n.start, n.end - n.start, null, n.loop), this.sounds[i] = s } this.config.autoplay && (this.autoplayKey = this.config.autoplay, this.play(this.autoplayKey), this.autoplay = this.sounds[this.autoplayKey]) }, i.AudioSprite.prototype = { play: function(t, e) { return void 0 === e && (e = 1), this.sounds[t].play(t, null, e) }, stop: function(t) { if (t) this.sounds[t].stop();
                else
                    for (var e in this.sounds) this.sounds[e].stop() }, get: function(t) { return this.sounds[t] } }, i.AudioSprite.prototype.constructor = i.AudioSprite, i.Sound = function(t, e, n, s, o) { void 0 === n && (n = 1), void 0 === s && (s = !1), void 0 === o && (o = t.sound.connectToMaster), this.game = t, this.name = e, this.key = e, this.loop = s, this.markers = {}, this.context = null, this.autoplay = !1, this.totalDuration = 0, this.startTime = 0, this.currentTime = 0, this.duration = 0, this.durationMS = 0, this.position = 0, this.stopTime = 0, this.paused = !1, this.pausedPosition = 0, this.pausedTime = 0, this.isPlaying = !1, this.currentMarker = "", this.fadeTween = null, this.pendingPlayback = !1, this.override = !1, this.allowMultiple = !1, this.usingWebAudio = this.game.sound.usingWebAudio, this.usingAudioTag = this.game.sound.usingAudioTag, this.externalNode = null, this.masterGainNode = null, this.gainNode = null, this._sound = null, this.usingWebAudio ? (this.context = this.game.sound.context, this.masterGainNode = this.game.sound.masterGain, void 0 === this.context.createGain ? this.gainNode = this.context.createGainNode() : this.gainNode = this.context.createGain(), this.gainNode.gain.value = n * this.game.sound.volume, o && this.gainNode.connect(this.masterGainNode)) : this.usingAudioTag && (this.game.cache.getSound(e) && this.game.cache.isSoundReady(e) ? (this._sound = this.game.cache.getSoundData(e), this.totalDuration = 0, this._sound.duration && (this.totalDuration = this._sound.duration)) : this.game.cache.onSoundUnlock.add(this.soundHasUnlocked, this)), this.onDecoded = new i.Signal, this.onPlay = new i.Signal, this.onPause = new i.Signal, this.onResume = new i.Signal, this.onLoop = new i.Signal, this.onStop = new i.Signal, this.onMute = new i.Signal, this.onMarkerComplete = new i.Signal, this.onFadeComplete = new i.Signal, this._volume = n, this._buffer = null, this._muted = !1, this._tempMarker = 0, this._tempPosition = 0, this._tempVolume = 0, this._tempPause = 0, this._muteVolume = 0, this._tempLoop = 0, this._paused = !1, this._onDecodedEventDispatched = !1 }, i.Sound.prototype = { soundHasUnlocked: function(t) { t === this.key && (this._sound = this.game.cache.getSoundData(this.key), this.totalDuration = this._sound.duration) }, addMarker: function(t, e, i, n, s) { void 0 !== i && null !== i || (i = 1), void 0 !== n && null !== n || (n = 1), void 0 === s && (s = !1), this.markers[t] = { name: t, start: e, stop: e + i, volume: n, duration: i, durationMS: 1e3 * i, loop: s } }, removeMarker: function(t) { delete this.markers[t] }, onEndedHandler: function() { this._sound.onended = null, this.isPlaying = !1, this.currentTime = this.durationMS, this.stop() }, update: function() { this.game.cache.checkSoundKey(this.key) ? (this.isDecoded && !this._onDecodedEventDispatched && (this.onDecoded.dispatch(this), this._onDecodedEventDispatched = !0), this.pendingPlayback && this.game.cache.isSoundReady(this.key) && (this.pendingPlayback = !1, this.play(this._tempMarker, this._tempPosition, this._tempVolume, this._tempLoop)), this.isPlaying && (this.currentTime = this.game.time.time - this.startTime, this.currentTime >= this.durationMS && (this.usingWebAudio ? this.loop ? (this.onLoop.dispatch(this), this.isPlaying = !1, "" === this.currentMarker ? (this.currentTime = 0, this.startTime = this.game.time.time, this.isPlaying = !0) : (this.onMarkerComplete.dispatch(this.currentMarker, this), this.play(this.currentMarker, 0, this.volume, !0, !0))) : "" !== this.currentMarker && this.stop() : this.loop ? (this.onLoop.dispatch(this), "" === this.currentMarker && (this.currentTime = 0, this.startTime = this.game.time.time), this.isPlaying = !1, this.play(this.currentMarker, 0, this.volume, !0, !0)) : this.stop()))) : this.destroy() }, loopFull: function(t) { return this.play(null, 0, t, !0) }, play: function(t, e, i, n, s) { if (void 0 !== t && !1 !== t && null !== t || (t = ""), void 0 === s && (s = !0), this.isPlaying && !this.allowMultiple && !s && !this.override) return this; if (this._sound && this.isPlaying && !this.allowMultiple && (this.override || s)) { if (this.usingWebAudio) { if (void 0 === this._sound.stop) this._sound.noteOff(0);
                        else try { this._sound.stop(0) } catch (t) {} this.externalNode ? this._sound.disconnect(this.externalNode) : this.gainNode && this._sound.disconnect(this.gainNode) } else this.usingAudioTag && (this._sound.pause(), this._sound.currentTime = 0);
                    this.isPlaying = !1 } if ("" === t && Object.keys(this.markers).length > 0) return this; if ("" !== t) { if (!this.markers[t]) return console.warn("Phaser.Sound.play: audio marker " + t + " doesn't exist"), this;
                    this.currentMarker = t, this.position = this.markers[t].start, this.volume = this.markers[t].volume, this.loop = this.markers[t].loop, this.duration = this.markers[t].duration, this.durationMS = this.markers[t].durationMS, void 0 !== i && (this.volume = i), void 0 !== n && (this.loop = n), this._tempMarker = t, this._tempPosition = this.position, this._tempVolume = this.volume, this._tempLoop = this.loop } else e = e || 0, void 0 === i && (i = this._volume), void 0 === n && (n = this.loop), this.position = Math.max(0, e), this.volume = i, this.loop = n, this.duration = 0, this.durationMS = 0, this._tempMarker = t, this._tempPosition = e, this._tempVolume = i, this._tempLoop = n; return this.usingWebAudio ? this.game.cache.isSoundDecoded(this.key) ? (this._sound = this.context.createBufferSource(), this.externalNode ? this._sound.connect(this.externalNode) : this._sound.connect(this.gainNode), this._buffer = this.game.cache.getSoundData(this.key), this._sound.buffer = this._buffer, this.loop && "" === t && (this._sound.loop = !0), this.loop || "" !== t || (this._sound.onended = this.onEndedHandler.bind(this)), this.totalDuration = this._sound.buffer.duration, 0 === this.duration && (this.duration = this.totalDuration, this.durationMS = Math.ceil(1e3 * this.totalDuration)), void 0 === this._sound.start ? this._sound.noteGrainOn(0, this.position, this.duration) : this.loop && "" === t ? this._sound.start(0, 0) : this._sound.start(0, this.position, this.duration), this.isPlaying = !0, this.startTime = this.game.time.time, this.currentTime = 0, this.stopTime = this.startTime + this.durationMS, this.onPlay.dispatch(this)) : (this.pendingPlayback = !0, this.game.cache.getSound(this.key) && !1 === this.game.cache.getSound(this.key).isDecoding && this.game.sound.decode(this.key, this)) : this.game.cache.getSound(this.key) && this.game.cache.getSound(this.key).locked ? (this.game.cache.reloadSound(this.key), this.pendingPlayback = !0) : this._sound && (this.game.device.cocoonJS || 4 === this._sound.readyState) ? (this._sound.play(), this.totalDuration = this._sound.duration, 0 === this.duration && (this.duration = this.totalDuration, this.durationMS = 1e3 * this.totalDuration), this._sound.currentTime = this.position, this._sound.muted = this._muted, this._muted || this.game.sound.mute ? this._sound.volume = 0 : this._sound.volume = this._volume, this.isPlaying = !0, this.startTime = this.game.time.time, this.currentTime = 0, this.stopTime = this.startTime + this.durationMS, this.onPlay.dispatch(this)) : this.pendingPlayback = !0, this }, restart: function(t, e, i, n) { t = t || "", e = e || 0, i = i || 1, void 0 === n && (n = !1), this.play(t, e, i, n, !0) }, pause: function() { this.isPlaying && this._sound && (this.paused = !0, this.pausedPosition = this.currentTime, this.pausedTime = this.game.time.time, this._tempPause = this._sound.currentTime, this.onPause.dispatch(this), this.stop()) }, resume: function() { if (this.paused && this._sound) { if (this.usingWebAudio) { var t = Math.max(0, this.position + this.pausedPosition / 1e3);
                        this._sound = this.context.createBufferSource(), this._sound.buffer = this._buffer, this.externalNode ? this._sound.connect(this.externalNode) : this._sound.connect(this.gainNode), this.loop && (this._sound.loop = !0), this.loop || "" !== this.currentMarker || (this._sound.onended = this.onEndedHandler.bind(this)); var e = this.duration - this.pausedPosition / 1e3;
                        void 0 === this._sound.start ? this._sound.noteGrainOn(0, t, e) : this.loop && this.game.device.chrome ? 42 === this.game.device.chromeVersion ? this._sound.start(0) : this._sound.start(0, t) : this._sound.start(0, t, e) } else this._sound.currentTime = this._tempPause, this._sound.play();
                    this.isPlaying = !0, this.paused = !1, this.startTime += this.game.time.time - this.pausedTime, this.onResume.dispatch(this) } }, stop: function() { if (this.isPlaying && this._sound)
                    if (this.usingWebAudio) { if (void 0 === this._sound.stop) this._sound.noteOff(0);
                        else try { this._sound.stop(0) } catch (t) {} this.externalNode ? this._sound.disconnect(this.externalNode) : this.gainNode && this._sound.disconnect(this.gainNode) } else this.usingAudioTag && (this._sound.pause(), this._sound.currentTime = 0); if (this.pendingPlayback = !1, this.isPlaying = !1, !this.paused) { var t = this.currentMarker; "" !== this.currentMarker && this.onMarkerComplete.dispatch(this.currentMarker, this), this.currentMarker = "", null !== this.fadeTween && this.fadeTween.stop(), this.onStop.dispatch(this, t) } }, fadeIn: function(t, e, i) { void 0 === e && (e = !1), void 0 === i && (i = this.currentMarker), this.paused || (this.play(i, 0, 0, e), this.fadeTo(t, 1)) }, fadeOut: function(t) { this.fadeTo(t, 0) }, fadeTo: function(t, e) { this.isPlaying && !this.paused && e !== this.volume && (void 0 === t && (t = 1e3), void 0 !== e ? (this.fadeTween = this.game.add.tween(this).to({ volume: e }, t, i.Easing.Linear.None, !0), this.fadeTween.onComplete.add(this.fadeComplete, this)) : console.warn("Phaser.Sound.fadeTo: No Volume Specified.")) }, fadeComplete: function() { this.onFadeComplete.dispatch(this, this.volume), 0 === this.volume && this.stop() }, updateGlobalVolume: function(t) { this.usingAudioTag && this._sound && (this._sound.volume = t * this._volume) }, destroy: function(t) { void 0 === t && (t = !0), this.stop(), t ? this.game.sound.remove(this) : (this.markers = {}, this.context = null, this._buffer = null, this.externalNode = null, this.onDecoded.dispose(), this.onPlay.dispose(), this.onPause.dispose(), this.onResume.dispose(), this.onLoop.dispose(), this.onStop.dispose(), this.onMute.dispose(), this.onMarkerComplete.dispose()) } }, i.Sound.prototype.constructor = i.Sound, Object.defineProperty(i.Sound.prototype, "isDecoding", { get: function() { return this.game.cache.getSound(this.key).isDecoding } }), Object.defineProperty(i.Sound.prototype, "isDecoded", { get: function() { return this.game.cache.isSoundDecoded(this.key) } }), Object.defineProperty(i.Sound.prototype, "mute", { get: function() { return this._muted || this.game.sound.mute }, set: function(t) {
                (t = t || !1) !== this._muted && (t ? (this._muted = !0, this._muteVolume = this._tempVolume, this.usingWebAudio ? this.gainNode.gain.value = 0 : this.usingAudioTag && this._sound && (this._sound.volume = 0)) : (this._muted = !1, this.usingWebAudio ? this.gainNode.gain.value = this._muteVolume : this.usingAudioTag && this._sound && (this._sound.volume = this._muteVolume)), this.onMute.dispatch(this)) } }), Object.defineProperty(i.Sound.prototype, "volume", { get: function() { return this._volume }, set: function(t) { this.game.device.firefox && this.usingAudioTag && (t = this.game.math.clamp(t, 0, 1)), this._muted ? this._muteVolume = t : (this._tempVolume = t, this._volume = t, this.usingWebAudio ? this.gainNode.gain.value = t : this.usingAudioTag && this._sound && (this._sound.volume = t)) } }), i.SoundManager = function(t) { this.game = t, this.onSoundDecode = new i.Signal, this.onVolumeChange = new i.Signal, this.onMute = new i.Signal, this.onUnMute = new i.Signal, this.context = null, this.usingWebAudio = !1, this.usingAudioTag = !1, this.noAudio = !1, this.connectToMaster = !0, this.touchLocked = !1, this.channels = 32, this.muteOnPause = !0, this._codeMuted = !1, this._muted = !1, this._unlockSource = null, this._volume = 1, this._sounds = [], this._watchList = new i.ArraySet, this._watching = !1, this._watchCallback = null, this._watchContext = null }, i.SoundManager.prototype = { boot: function() { if (this.game.device.iOS && !1 === this.game.device.webAudio && (this.channels = 1), window.PhaserGlobal) { if (!0 === window.PhaserGlobal.disableAudio) return this.noAudio = !0, void(this.touchLocked = !1); if (!0 === window.PhaserGlobal.disableWebAudio) return this.usingAudioTag = !0, void(this.touchLocked = !1) } if (window.PhaserGlobal && window.PhaserGlobal.audioContext) this.context = window.PhaserGlobal.audioContext;
                else if (window.AudioContext) try { this.context = new window.AudioContext } catch (t) { this.context = null, this.usingWebAudio = !1, this.touchLocked = !1 } else if (window.webkitAudioContext) try { this.context = new window.webkitAudioContext } catch (t) { this.context = null, this.usingWebAudio = !1, this.touchLocked = !1 }
                if (null === this.context) { if (void 0 === window.Audio) return void(this.noAudio = !0);
                    this.usingAudioTag = !0 } else this.usingWebAudio = !0, void 0 === this.context.createGain ? this.masterGain = this.context.createGainNode() : this.masterGain = this.context.createGain(), this.masterGain.gain.value = 1, this.masterGain.connect(this.context.destination);
                this.noAudio || (!this.game.device.cocoonJS && this.game.device.iOS || window.PhaserGlobal && window.PhaserGlobal.fakeiOSTouchLock) && this.setTouchLock() }, setTouchLock: function() { this.noAudio || window.PhaserGlobal && !0 === window.PhaserGlobal.disableAudio || (this.game.device.iOSVersion > 8 ? this.game.input.touch.addTouchLockCallback(this.unlock, this, !0) : this.game.input.touch.addTouchLockCallback(this.unlock, this), this.touchLocked = !0) }, unlock: function() { if (this.noAudio || !this.touchLocked || null !== this._unlockSource) return !0; if (this.usingAudioTag) this.touchLocked = !1, this._unlockSource = null;
                else if (this.usingWebAudio) { var t = this.context.createBuffer(1, 1, 22050);
                    this._unlockSource = this.context.createBufferSource(), this._unlockSource.buffer = t, this._unlockSource.connect(this.context.destination), void 0 === this._unlockSource.start ? this._unlockSource.noteOn(0) : this._unlockSource.start(0) } return !0 }, stopAll: function() { if (!this.noAudio)
                    for (var t = 0; t < this._sounds.length; t++) this._sounds[t] && this._sounds[t].stop() }, pauseAll: function() { if (!this.noAudio)
                    for (var t = 0; t < this._sounds.length; t++) this._sounds[t] && this._sounds[t].pause() }, resumeAll: function() { if (!this.noAudio)
                    for (var t = 0; t < this._sounds.length; t++) this._sounds[t] && this._sounds[t].resume() }, decode: function(t, e) { e = e || null; var i = this.game.cache.getSoundData(t); if (i && !1 === this.game.cache.isSoundDecoded(t)) { this.game.cache.updateSound(t, "isDecoding", !0); var n = this; try { this.context.decodeAudioData(i, function(i) { i && (n.game.cache.decodedSound(t, i), n.onSoundDecode.dispatch(t, e)) }) } catch (t) {} } }, setDecodedCallback: function(t, e, n) { "string" == typeof t && (t = [t]), this._watchList.reset(); for (var s = 0; s < t.length; s++) t[s] instanceof i.Sound ? this.game.cache.isSoundDecoded(t[s].key) || this._watchList.add(t[s].key) : this.game.cache.isSoundDecoded(t[s]) || this._watchList.add(t[s]);
                0 === this._watchList.total ? (this._watching = !1, e.call(n)) : (this._watching = !0, this._watchCallback = e, this._watchContext = n) }, update: function() { if (!this.noAudio) {!this.touchLocked || null === this._unlockSource || this._unlockSource.playbackState !== this._unlockSource.PLAYING_STATE && this._unlockSource.playbackState !== this._unlockSource.FINISHED_STATE || (this.touchLocked = !1, this._unlockSource = null); for (var t = 0; t < this._sounds.length; t++) this._sounds[t].update(); if (this._watching) { for (var e = this._watchList.first; e;) this.game.cache.isSoundDecoded(e) && this._watchList.remove(e), e = this._watchList.next;
                        0 === this._watchList.total && (this._watching = !1, this._watchCallback.call(this._watchContext)) } } }, add: function(t, e, n, s) { void 0 === e && (e = 1), void 0 === n && (n = !1), void 0 === s && (s = this.connectToMaster); var o = new i.Sound(this.game, t, e, n, s); return this._sounds.push(o), o }, addSprite: function(t) { return new i.AudioSprite(this.game, t) }, remove: function(t) { for (var e = this._sounds.length; e--;)
                    if (this._sounds[e] === t) return this._sounds[e].destroy(!1), this._sounds.splice(e, 1), !0; return !1 }, removeByKey: function(t) { for (var e = this._sounds.length, i = 0; e--;) this._sounds[e].key === t && (this._sounds[e].destroy(!1), this._sounds.splice(e, 1), i++); return i }, play: function(t, e, i) { if (!this.noAudio) { var n = this.add(t, e, i); return n.play(), n } }, setMute: function() { if (!this._muted) { this._muted = !0, this.usingWebAudio && (this._muteVolume = this.masterGain.gain.value, this.masterGain.gain.value = 0); for (var t = 0; t < this._sounds.length; t++) this._sounds[t].usingAudioTag && (this._sounds[t].mute = !0);
                    this.onMute.dispatch() } }, unsetMute: function() { if (this._muted && !this._codeMuted) { this._muted = !1, this.usingWebAudio && (this.masterGain.gain.value = this._muteVolume); for (var t = 0; t < this._sounds.length; t++) this._sounds[t].usingAudioTag && (this._sounds[t].mute = !1);
                    this.onUnMute.dispatch() } }, destroy: function() { this.stopAll(); for (var t = 0; t < this._sounds.length; t++) this._sounds[t] && this._sounds[t].destroy();
                this._sounds = [], this.onSoundDecode.dispose(), this.context && (window.PhaserGlobal ? window.PhaserGlobal.audioContext = this.context : this.context.close && this.context.close()) } }, i.SoundManager.prototype.constructor = i.SoundManager, Object.defineProperty(i.SoundManager.prototype, "mute", { get: function() { return this._muted }, set: function(t) { if (t = t || !1) { if (this._muted) return;
                    this._codeMuted = !0, this.setMute() } else { if (!this._muted) return;
                    this._codeMuted = !1, this.unsetMute() } } }), Object.defineProperty(i.SoundManager.prototype, "volume", { get: function() { return this._volume }, set: function(t) { if (t < 0 ? t = 0 : t > 1 && (t = 1), this._volume !== t) { if (this._volume = t, this.usingWebAudio) this.masterGain.gain.value = t;
                    else
                        for (var e = 0; e < this._sounds.length; e++) this._sounds[e].usingAudioTag && this._sounds[e].updateGlobalVolume(t);
                    this.onVolumeChange.dispatch(t) } } }), i.ScaleManager = function(t, e, n) { this.game = t, this.dom = i.DOM, this.grid = null, this.width = 0, this.height = 0, this.minWidth = null, this.maxWidth = null, this.minHeight = null, this.maxHeight = null, this.offset = new i.Point, this.forceLandscape = !1, this.forcePortrait = !1, this.incorrectOrientation = !1, this._pageAlignHorizontally = !1, this._pageAlignVertically = !1, this.onOrientationChange = new i.Signal, this.enterIncorrectOrientation = new i.Signal, this.leaveIncorrectOrientation = new i.Signal, this.hasPhaserSetFullScreen = !1, this.fullScreenTarget = null, this._createdFullScreenTarget = null, this.onFullScreenInit = new i.Signal, this.onFullScreenChange = new i.Signal, this.onFullScreenError = new i.Signal, this.screenOrientation = this.dom.getScreenOrientation(), this.scaleFactor = new i.Point(1, 1), this.scaleFactorInversed = new i.Point(1, 1), this.margin = { left: 0, top: 0, right: 0, bottom: 0, x: 0, y: 0 }, this.bounds = new i.Rectangle, this.aspectRatio = 0, this.sourceAspectRatio = 0, this.event = null, this.windowConstraints = { right: "layout", bottom: "" }, this.compatibility = { supportsFullScreen: !1, orientationFallback: null, noMargins: !1, scrollTo: null, forceMinimumDocumentHeight: !1, canExpandParent: !0, clickTrampoline: "" }, this._scaleMode = i.ScaleManager.NO_SCALE, this._fullScreenScaleMode = i.ScaleManager.NO_SCALE, this.parentIsWindow = !1, this.parentNode = null, this.parentScaleFactor = new i.Point(1, 1), this.trackParentInterval = 2e3, this.onSizeChange = new i.Signal, this.onResize = null, this.onResizeContext = null, this._pendingScaleMode = null, this._fullScreenRestore = null, this._gameSize = new i.Rectangle, this._userScaleFactor = new i.Point(1, 1), this._userScaleTrim = new i.Point(0, 0), this._lastUpdate = 0, this._updateThrottle = 0, this._updateThrottleReset = 100, this._parentBounds = new i.Rectangle, this._tempBounds = new i.Rectangle, this._lastReportedCanvasSize = new i.Rectangle, this._lastReportedGameSize = new i.Rectangle, this._booted = !1, t.config && this.parseConfig(t.config), this.setupScale(e, n) }, i.ScaleManager.EXACT_FIT = 0, i.ScaleManager.NO_SCALE = 1, i.ScaleManager.SHOW_ALL = 2, i.ScaleManager.RESIZE = 3, i.ScaleManager.USER_SCALE = 4, i.ScaleManager.prototype = { boot: function() { var t = this.compatibility;
                t.supportsFullScreen = this.game.device.fullscreen && !this.game.device.cocoonJS, this.game.device.iPad || this.game.device.webApp || this.game.device.desktop || (this.game.device.android && !this.game.device.chrome ? t.scrollTo = new i.Point(0, 1) : t.scrollTo = new i.Point(0, 0)), this.game.device.desktop ? (t.orientationFallback = "screen", t.clickTrampoline = "when-not-mouse") : (t.orientationFallback = "", t.clickTrampoline = ""); var e = this;
                this._orientationChange = function(t) { return e.orientationChange(t) }, this._windowResize = function(t) { return e.windowResize(t) }, window.addEventListener("orientationchange", this._orientationChange, !1), window.addEventListener("resize", this._windowResize, !1), this.compatibility.supportsFullScreen && (this._fullScreenChange = function(t) { return e.fullScreenChange(t) }, this._fullScreenError = function(t) { return e.fullScreenError(t) }, document.addEventListener("webkitfullscreenchange", this._fullScreenChange, !1), document.addEventListener("mozfullscreenchange", this._fullScreenChange, !1), document.addEventListener("MSFullscreenChange", this._fullScreenChange, !1), document.addEventListener("fullscreenchange", this._fullScreenChange, !1), document.addEventListener("webkitfullscreenerror", this._fullScreenError, !1), document.addEventListener("mozfullscreenerror", this._fullScreenError, !1), document.addEventListener("MSFullscreenError", this._fullScreenError, !1), document.addEventListener("fullscreenerror", this._fullScreenError, !1)), this.game.onResume.add(this._gameResumed, this), this.dom.getOffset(this.game.canvas, this.offset), this.bounds.setTo(this.offset.x, this.offset.y, this.width, this.height), this.setGameSize(this.game.width, this.game.height), this.screenOrientation = this.dom.getScreenOrientation(this.compatibility.orientationFallback), i.FlexGrid && (this.grid = new i.FlexGrid(this, this.width, this.height)), this._booted = !0, null !== this._pendingScaleMode && (this.scaleMode = this._pendingScaleMode, this._pendingScaleMode = null) }, parseConfig: function(t) { void 0 !== t.scaleMode && (this._booted ? this.scaleMode = t.scaleMode : this._pendingScaleMode = t.scaleMode), void 0 !== t.fullScreenScaleMode && (this.fullScreenScaleMode = t.fullScreenScaleMode), t.fullScreenTarget && (this.fullScreenTarget = t.fullScreenTarget) }, setupScale: function(t, e) { var n, s = new i.Rectangle; "" !== this.game.parent && ("string" == typeof this.game.parent ? n = document.getElementById(this.game.parent) : this.game.parent && 1 === this.game.parent.nodeType && (n = this.game.parent)), n ? (this.parentNode = n, this.parentIsWindow = !1, this.getParentBounds(this._parentBounds), s.width = this._parentBounds.width, s.height = this._parentBounds.height, this.offset.set(this._parentBounds.x, this._parentBounds.y)) : (this.parentNode = null, this.parentIsWindow = !0, s.width = this.dom.visualBounds.width, s.height = this.dom.visualBounds.height, this.offset.set(0, 0)); var o = 0,
                    a = 0; "number" == typeof t ? o = t : (this.parentScaleFactor.x = parseInt(t, 10) / 100, o = s.width * this.parentScaleFactor.x), "number" == typeof e ? a = e : (this.parentScaleFactor.y = parseInt(e, 10) / 100, a = s.height * this.parentScaleFactor.y), o = Math.floor(o), a = Math.floor(a), this._gameSize.setTo(0, 0, o, a), this.updateDimensions(o, a, !1) }, _gameResumed: function() { this.queueUpdate(!0) }, setGameSize: function(t, e) { this._gameSize.setTo(0, 0, t, e), this.currentScaleMode !== i.ScaleManager.RESIZE && this.updateDimensions(t, e, !0), this.queueUpdate(!0) }, setUserScale: function(t, e, i, n) { this._userScaleFactor.setTo(t, e), this._userScaleTrim.setTo(0 | i, 0 | n), this.queueUpdate(!0) }, setResizeCallback: function(t, e) { this.onResize = t, this.onResizeContext = e }, signalSizeChange: function() { if (!i.Rectangle.sameDimensions(this, this._lastReportedCanvasSize) || !i.Rectangle.sameDimensions(this.game, this._lastReportedGameSize)) { var t = this.width,
                        e = this.height;
                    this._lastReportedCanvasSize.setTo(0, 0, t, e), this._lastReportedGameSize.setTo(0, 0, this.game.width, this.game.height), this.grid && this.grid.onResize(t, e), this.onSizeChange.dispatch(this, t, e), this.currentScaleMode === i.ScaleManager.RESIZE && (this.game.state.resize(t, e), this.game.load.resize(t, e)) } }, setMinMax: function(t, e, i, n) { this.minWidth = t, this.minHeight = e, void 0 !== i && (this.maxWidth = i), void 0 !== n && (this.maxHeight = n) }, preUpdate: function() { if (!(this.game.time.time < this._lastUpdate + this._updateThrottle)) { var t = this._updateThrottle;
                    this._updateThrottleReset = t >= 400 ? 0 : 100, this.dom.getOffset(this.game.canvas, this.offset); var e = this._parentBounds.width,
                        n = this._parentBounds.height,
                        s = this.getParentBounds(this._parentBounds),
                        o = s.width !== e || s.height !== n,
                        a = this.updateOrientationState();
                    (o || a) && (this.onResize && this.onResize.call(this.onResizeContext, this, s), this.updateLayout(), this.signalSizeChange()); var r = 2 * this._updateThrottle;
                    this._updateThrottle < t && (r = Math.min(t, this._updateThrottleReset)), this._updateThrottle = i.Math.clamp(r, 25, this.trackParentInterval), this._lastUpdate = this.game.time.time } }, pauseUpdate: function() { this.preUpdate(), this._updateThrottle = this.trackParentInterval }, updateDimensions: function(t, e, i) { this.width = t * this.parentScaleFactor.x, this.height = e * this.parentScaleFactor.y, this.game.width = this.width, this.game.height = this.height, this.sourceAspectRatio = this.width / this.height, this.updateScalingAndBounds(), i && (this.game.renderer.resize(this.width, this.height), this.game.camera.setSize(this.width, this.height), this.game.world.resize(this.width, this.height)) }, updateScalingAndBounds: function() { this.scaleFactor.x = this.game.width / this.width, this.scaleFactor.y = this.game.height / this.height, this.scaleFactorInversed.x = this.width / this.game.width, this.scaleFactorInversed.y = this.height / this.game.height, this.aspectRatio = this.width / this.height, this.game.canvas && this.dom.getOffset(this.game.canvas, this.offset), this.bounds.setTo(this.offset.x, this.offset.y, this.width, this.height), this.game.input && this.game.input.scale && this.game.input.scale.setTo(this.scaleFactor.x, this.scaleFactor.y) }, forceOrientation: function(t, e) { void 0 === e && (e = !1), this.forceLandscape = t, this.forcePortrait = e, this.queueUpdate(!0) }, classifyOrientation: function(t) { return "portrait-primary" === t || "portrait-secondary" === t ? "portrait" : "landscape-primary" === t || "landscape-secondary" === t ? "landscape" : null }, updateOrientationState: function() { var t = this.screenOrientation,
                    e = this.incorrectOrientation;
                this.screenOrientation = this.dom.getScreenOrientation(this.compatibility.orientationFallback), this.incorrectOrientation = this.forceLandscape && !this.isLandscape || this.forcePortrait && !this.isPortrait; var i = t !== this.screenOrientation,
                    n = e !== this.incorrectOrientation; return n && (this.incorrectOrientation ? this.enterIncorrectOrientation.dispatch() : this.leaveIncorrectOrientation.dispatch()), (i || n) && this.onOrientationChange.dispatch(this, t, e), i || n }, orientationChange: function(t) { this.event = t, this.queueUpdate(!0) }, windowResize: function(t) { this.event = t, this.queueUpdate(!0) }, scrollTop: function() { var t = this.compatibility.scrollTo;
                t && window.scrollTo(t.x, t.y) }, refresh: function() { this.scrollTop(), this.queueUpdate(!0) }, updateLayout: function() { var t = this.currentScaleMode; if (t !== i.ScaleManager.RESIZE) { if (this.scrollTop(), this.compatibility.forceMinimumDocumentHeight && (document.documentElement.style.minHeight = window.innerHeight + "px"), this.incorrectOrientation ? this.setMaximum() : t === i.ScaleManager.EXACT_FIT ? this.setExactFit() : t === i.ScaleManager.SHOW_ALL ? !this.isFullScreen && this.boundingParent && this.compatibility.canExpandParent ? (this.setShowAll(!0), this.resetCanvas(), this.setShowAll()) : this.setShowAll() : t === i.ScaleManager.NO_SCALE ? (this.width = this.game.width, this.height = this.game.height) : t === i.ScaleManager.USER_SCALE && (this.width = this.game.width * this._userScaleFactor.x - this._userScaleTrim.x, this.height = this.game.height * this._userScaleFactor.y - this._userScaleTrim.y), !this.compatibility.canExpandParent && (t === i.ScaleManager.SHOW_ALL || t === i.ScaleManager.USER_SCALE)) { var e = this.getParentBounds(this._tempBounds);
                        this.width = Math.min(this.width, e.width), this.height = Math.min(this.height, e.height) } this.width = 0 | this.width, this.height = 0 | this.height, this.reflowCanvas() } else this.reflowGame() }, getParentBounds: function(t) { var e = t || new i.Rectangle,
                    n = this.boundingParent,
                    s = this.dom.visualBounds,
                    o = this.dom.layoutBounds; if (n) { var a = n.getBoundingClientRect(),
                        r = n.offsetParent ? n.offsetParent.getBoundingClientRect() : n.getBoundingClientRect();
                    e.setTo(a.left - r.left, a.top - r.top, a.width, a.height); var h = this.windowConstraints; if (h.right) { l = "layout" === h.right ? o : s;
                        e.right = Math.min(e.right, l.width) } if (h.bottom) { var l = "layout" === h.bottom ? o : s;
                        e.bottom = Math.min(e.bottom, l.height) } } else e.setTo(0, 0, s.width, s.height); return e.setTo(Math.round(e.x), Math.round(e.y), Math.round(e.width), Math.round(e.height)), e }, alignCanvas: function(t, e) { var i = this.getParentBounds(this._tempBounds),
                    n = this.game.canvas,
                    s = this.margin; if (t) { s.left = s.right = 0;
                    h = n.getBoundingClientRect(); if (this.width < i.width && !this.incorrectOrientation) { var o = h.left - i.x,
                            a = i.width / 2 - this.width / 2,
                            r = (a = Math.max(a, 0)) - o;
                        s.left = Math.round(r) } n.style.marginLeft = s.left + "px", 0 !== s.left && (s.right = -(i.width - h.width - s.left), n.style.marginRight = s.right + "px") } if (e) { s.top = s.bottom = 0; var h = n.getBoundingClientRect(); if (this.height < i.height && !this.incorrectOrientation) { var o = h.top - i.y,
                            a = i.height / 2 - this.height / 2,
                            r = (a = Math.max(a, 0)) - o;
                        s.top = Math.round(r) } n.style.marginTop = s.top + "px", 0 !== s.top && (s.bottom = -(i.height - h.height - s.top), n.style.marginBottom = s.bottom + "px") } s.x = s.left, s.y = s.top }, reflowGame: function() { this.resetCanvas("", ""); var t = this.getParentBounds(this._tempBounds);
                this.updateDimensions(t.width, t.height, !0) }, reflowCanvas: function() { this.incorrectOrientation || (this.width = i.Math.clamp(this.width, this.minWidth || 0, this.maxWidth || this.width), this.height = i.Math.clamp(this.height, this.minHeight || 0, this.maxHeight || this.height)), this.resetCanvas(), this.compatibility.noMargins || (this.isFullScreen && this._createdFullScreenTarget ? this.alignCanvas(!0, !0) : this.alignCanvas(this.pageAlignHorizontally, this.pageAlignVertically)), this.updateScalingAndBounds() }, resetCanvas: function(t, e) { void 0 === t && (t = this.width + "px"), void 0 === e && (e = this.height + "px"); var i = this.game.canvas;
                this.compatibility.noMargins || (i.style.marginLeft = "", i.style.marginTop = "", i.style.marginRight = "", i.style.marginBottom = ""), i.style.width = t, i.style.height = e }, queueUpdate: function(t) { t && (this._parentBounds.width = 0, this._parentBounds.height = 0), this._updateThrottle = this._updateThrottleReset }, reset: function(t) { t && this.grid && this.grid.reset() }, setMaximum: function() { this.width = this.dom.visualBounds.width, this.height = this.dom.visualBounds.height }, setShowAll: function(t) { var e, i = this.getParentBounds(this._tempBounds),
                    n = i.width,
                    s = i.height;
                e = t ? Math.max(s / this.game.height, n / this.game.width) : Math.min(s / this.game.height, n / this.game.width), this.width = Math.round(this.game.width * e), this.height = Math.round(this.game.height * e) }, setExactFit: function() { var t = this.getParentBounds(this._tempBounds);
                this.width = t.width, this.height = t.height, this.isFullScreen || (this.maxWidth && (this.width = Math.min(this.width, this.maxWidth)), this.maxHeight && (this.height = Math.min(this.height, this.maxHeight))) }, createFullScreenTarget: function() { var t = document.createElement("div"); return t.style.margin = "0", t.style.padding = "0", t.style.background = "#000", t }, startFullScreen: function(t, e) { if (this.isFullScreen) return !1; { if (this.compatibility.supportsFullScreen) { if ("when-not-mouse" === this.compatibility.clickTrampoline) { var n = this.game.input; if (n.activePointer && n.activePointer !== n.mousePointer && (e || !1 !== e)) return void n.activePointer.addClickTrampoline("startFullScreen", this.startFullScreen, this, [t, !1]) } void 0 !== t && this.game.renderType === i.CANVAS && (this.game.stage.smoothed = t); var s = this.fullScreenTarget;
                        s || (this.cleanupCreatedTarget(), this._createdFullScreenTarget = this.createFullScreenTarget(), s = this._createdFullScreenTarget); var o = { targetElement: s }; if (this.hasPhaserSetFullScreen = !0, this.onFullScreenInit.dispatch(this, o), this._createdFullScreenTarget) { var a = this.game.canvas;
                            a.parentNode.insertBefore(s, a), s.appendChild(a) } return this.game.device.fullscreenKeyboard ? s[this.game.device.requestFullscreen](Element.ALLOW_KEYBOARD_INPUT) : s[this.game.device.requestFullscreen](), !0 } var r = this;
                    setTimeout(function() { r.fullScreenError() }, 10) } }, stopFullScreen: function() { return !(!this.isFullScreen || !this.compatibility.supportsFullScreen) && (this.hasPhaserSetFullScreen = !1, document[this.game.device.cancelFullscreen](), !0) }, cleanupCreatedTarget: function() { var t = this._createdFullScreenTarget; if (t && t.parentNode) { var e = t.parentNode;
                    e.insertBefore(this.game.canvas, t), e.removeChild(t) } this._createdFullScreenTarget = null }, prepScreenMode: function(t) { var e = !!this._createdFullScreenTarget,
                    n = this._createdFullScreenTarget || this.fullScreenTarget;
                t ? (e || this.fullScreenScaleMode === i.ScaleManager.EXACT_FIT) && n !== this.game.canvas && (this._fullScreenRestore = { targetWidth: n.style.width, targetHeight: n.style.height }, n.style.width = "100%", n.style.height = "100%") : (this._fullScreenRestore && (n.style.width = this._fullScreenRestore.targetWidth, n.style.height = this._fullScreenRestore.targetHeight, this._fullScreenRestore = null), this.updateDimensions(this._gameSize.width, this._gameSize.height, !0), this.resetCanvas()) }, fullScreenChange: function(t) { this.event = t, this.isFullScreen ? (this.prepScreenMode(!0), this.updateLayout(), this.queueUpdate(!0)) : (this.prepScreenMode(!1), this.cleanupCreatedTarget(), this.updateLayout(), this.queueUpdate(!0)), this.onFullScreenChange.dispatch(this, this.width, this.height) }, fullScreenError: function(t) { this.event = t, this.cleanupCreatedTarget(), console.warn("Phaser.ScaleManager: requestFullscreen failed or device does not support the Fullscreen API"), this.onFullScreenError.dispatch(this) }, scaleSprite: function(t, e, i, n) { if (void 0 === e && (e = this.width), void 0 === i && (i = this.height), void 0 === n && (n = !1), !t || !t.scale) return t; if (t.scale.x = 1, t.scale.y = 1, t.width <= 0 || t.height <= 0 || e <= 0 || i <= 0) return t; var s = e,
                    o = t.height * e / t.width,
                    a = t.width * i / t.height,
                    r = i,
                    h = a > e; return (h = h ? n : !n) ? (t.width = Math.floor(s), t.height = Math.floor(o)) : (t.width = Math.floor(a), t.height = Math.floor(r)), t }, destroy: function() { this.game.onResume.remove(this._gameResumed, this), window.removeEventListener("orientationchange", this._orientationChange, !1), window.removeEventListener("resize", this._windowResize, !1), this.compatibility.supportsFullScreen && (document.removeEventListener("webkitfullscreenchange", this._fullScreenChange, !1), document.removeEventListener("mozfullscreenchange", this._fullScreenChange, !1), document.removeEventListener("MSFullscreenChange", this._fullScreenChange, !1), document.removeEventListener("fullscreenchange", this._fullScreenChange, !1), document.removeEventListener("webkitfullscreenerror", this._fullScreenError, !1), document.removeEventListener("mozfullscreenerror", this._fullScreenError, !1), document.removeEventListener("MSFullscreenError", this._fullScreenError, !1), document.removeEventListener("fullscreenerror", this._fullScreenError, !1)) } }, i.ScaleManager.prototype.constructor = i.ScaleManager, Object.defineProperty(i.ScaleManager.prototype, "boundingParent", { get: function() { return this.parentIsWindow || this.isFullScreen && this.hasPhaserSetFullScreen && !this._createdFullScreenTarget ? null : this.game.canvas && this.game.canvas.parentNode || null } }), Object.defineProperty(i.ScaleManager.prototype, "scaleMode", { get: function() { return this._scaleMode }, set: function(t) { return t !== this._scaleMode && (this.isFullScreen || (this.updateDimensions(this._gameSize.width, this._gameSize.height, !0), this.queueUpdate(!0)), this._scaleMode = t), this._scaleMode } }), Object.defineProperty(i.ScaleManager.prototype, "fullScreenScaleMode", { get: function() { return this._fullScreenScaleMode }, set: function(t) { return t !== this._fullScreenScaleMode && (this.isFullScreen ? (this.prepScreenMode(!1), this._fullScreenScaleMode = t, this.prepScreenMode(!0), this.queueUpdate(!0)) : this._fullScreenScaleMode = t), this._fullScreenScaleMode } }), Object.defineProperty(i.ScaleManager.prototype, "currentScaleMode", { get: function() { return this.isFullScreen ? this._fullScreenScaleMode : this._scaleMode } }), Object.defineProperty(i.ScaleManager.prototype, "pageAlignHorizontally", { get: function() { return this._pageAlignHorizontally }, set: function(t) { t !== this._pageAlignHorizontally && (this._pageAlignHorizontally = t, this.queueUpdate(!0)) } }), Object.defineProperty(i.ScaleManager.prototype, "pageAlignVertically", { get: function() { return this._pageAlignVertically }, set: function(t) { t !== this._pageAlignVertically && (this._pageAlignVertically = t, this.queueUpdate(!0)) } }), Object.defineProperty(i.ScaleManager.prototype, "isFullScreen", { get: function() { return !!(document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement) } }), Object.defineProperty(i.ScaleManager.prototype, "isPortrait", { get: function() { return "portrait" === this.classifyOrientation(this.screenOrientation) } }), Object.defineProperty(i.ScaleManager.prototype, "isLandscape", { get: function() { return "landscape" === this.classifyOrientation(this.screenOrientation) } }), Object.defineProperty(i.ScaleManager.prototype, "isGamePortrait", { get: function() { return this.height > this.width } }), Object.defineProperty(i.ScaleManager.prototype, "isGameLandscape", { get: function() { return this.width > this.height } }), i.Utils.Debug = function(t) { this.game = t, this.sprite = null, this.bmd = null, this.canvas = null, this.context = null, this.font = "14px Courier", this.columnWidth = 100, this.lineHeight = 16, this.renderShadow = !0, this.currentX = 0, this.currentY = 0, this.currentAlpha = 1, this.dirty = !1 }, i.Utils.Debug.prototype = { boot: function() { this.game.renderType === i.CANVAS ? this.context = this.game.context : (this.bmd = new i.BitmapData(this.game, "__DEBUG", this.game.width, this.game.height, !0), this.sprite = this.game.make.image(0, 0, this.bmd), this.game.stage.addChild(this.sprite), this.game.scale.onSizeChange.add(this.resize, this), this.canvas = PIXI.CanvasPool.create(this, this.game.width, this.game.height), this.context = this.canvas.getContext("2d")) }, resize: function(t, e, i) { this.bmd.resize(e, i), this.canvas.width = e, this.canvas.height = i }, preUpdate: function() { this.dirty && this.sprite && (this.bmd.clear(), this.bmd.draw(this.canvas, 0, 0), this.context.clearRect(0, 0, this.game.width, this.game.height), this.dirty = !1) }, reset: function() { this.context && this.context.clearRect(0, 0, this.game.width, this.game.height), this.sprite && this.bmd.clear() }, start: function(t, e, i, n) { "number" != typeof t && (t = 0), "number" != typeof e && (e = 0), i = i || "rgb(255,255,255)", void 0 === n && (n = 0), this.currentX = t, this.currentY = e, this.currentColor = i, this.columnWidth = n, this.dirty = !0, this.context.save(), this.context.setTransform(1, 0, 0, 1, 0, 0), this.context.strokeStyle = i, this.context.fillStyle = i, this.context.font = this.font, this.context.globalAlpha = this.currentAlpha }, stop: function() { this.context.restore() }, line: function() { for (var t = this.currentX, e = 0; e < arguments.length; e++) this.renderShadow && (this.context.fillStyle = "rgb(0,0,0)", this.context.fillText(arguments[e], t + 1, this.currentY + 1), this.context.fillStyle = this.currentColor), this.context.fillText(arguments[e], t, this.currentY), t += this.columnWidth;
                this.currentY += this.lineHeight }, soundInfo: function(t, e, i, n) { this.start(e, i, n), this.line("Sound: " + t.key + " Locked: " + t.game.sound.touchLocked), this.line("Is Ready?: " + this.game.cache.isSoundReady(t.key) + " Pending Playback: " + t.pendingPlayback), this.line("Decoded: " + t.isDecoded + " Decoding: " + t.isDecoding), this.line("Total Duration: " + t.totalDuration + " Playing: " + t.isPlaying), this.line("Time: " + t.currentTime), this.line("Volume: " + t.volume + " Muted: " + t.mute), this.line("WebAudio: " + t.usingWebAudio + " Audio: " + t.usingAudioTag), "" !== t.currentMarker && (this.line("Marker: " + t.currentMarker + " Duration: " + t.duration + " (ms: " + t.durationMS + ")"), this.line("Start: " + t.markers[t.currentMarker].start + " Stop: " + t.markers[t.currentMarker].stop), this.line("Position: " + t.position)), this.stop() }, cameraInfo: function(t, e, i, n) { this.start(e, i, n), this.line("Camera (" + t.width + " x " + t.height + ")"), this.line("X: " + t.x + " Y: " + t.y), t.bounds && this.line("Bounds x: " + t.bounds.x + " Y: " + t.bounds.y + " w: " + t.bounds.width + " h: " + t.bounds.height), this.line("View x: " + t.view.x + " Y: " + t.view.y + " w: " + t.view.width + " h: " + t.view.height), this.line("Total in view: " + t.totalInView), this.stop() }, timer: function(t, e, i, n) { this.start(e, i, n), this.line("Timer (running: " + t.running + " expired: " + t.expired + ")"), this.line("Next Tick: " + t.next + " Duration: " + t.duration), this.line("Paused: " + t.paused + " Length: " + t.length), this.stop() }, pointer: function(t, e, i, n, s) { null != t && (void 0 === e && (e = !1), i = i || "rgba(0,255,0,0.5)", n = n || "rgba(255,0,0,0.5)", !0 === e && !0 === t.isUp || (this.start(t.x, t.y - 100, s), this.context.beginPath(), this.context.arc(t.x, t.y, t.circle.radius, 0, 2 * Math.PI), t.active ? this.context.fillStyle = i : this.context.fillStyle = n, this.context.fill(), this.context.closePath(), this.context.beginPath(), this.context.moveTo(t.positionDown.x, t.positionDown.y), this.context.lineTo(t.position.x, t.position.y), this.context.lineWidth = 2, this.context.stroke(), this.context.closePath(), this.line("ID: " + t.id + " Active: " + t.active), this.line("World X: " + t.worldX + " World Y: " + t.worldY), this.line("Screen X: " + t.x + " Screen Y: " + t.y + " In: " + t.withinGame), this.line("Duration: " + t.duration + " ms"), this.line("is Down: " + t.isDown + " is Up: " + t.isUp), this.stop())) }, spriteInputInfo: function(t, e, i, n) { this.start(e, i, n), this.line("Sprite Input: (" + t.width + " x " + t.height + ")"), this.line("x: " + t.input.pointerX().toFixed(1) + " y: " + t.input.pointerY().toFixed(1)), this.line("over: " + t.input.pointerOver() + " duration: " + t.input.overDuration().toFixed(0)), this.line("down: " + t.input.pointerDown() + " duration: " + t.input.downDuration().toFixed(0)), this.line("just over: " + t.input.justOver() + " just out: " + t.input.justOut()), this.stop() }, key: function(t, e, i, n) { this.start(e, i, n, 150), this.line("Key:", t.keyCode, "isDown:", t.isDown), this.line("justDown:", t.justDown, "justUp:", t.justUp), this.line("Time Down:", t.timeDown.toFixed(0), "duration:", t.duration.toFixed(0)), this.stop() }, inputInfo: function(t, e, i) { this.start(t, e, i), this.line("Input"), this.line("X: " + this.game.input.x + " Y: " + this.game.input.y), this.line("World X: " + this.game.input.worldX + " World Y: " + this.game.input.worldY), this.line("Scale X: " + this.game.input.scale.x.toFixed(1) + " Scale Y: " + this.game.input.scale.x.toFixed(1)), this.line("Screen X: " + this.game.input.activePointer.screenX + " Screen Y: " + this.game.input.activePointer.screenY), this.stop() }, spriteBounds: function(t, e, i) { var n = t.getBounds();
                n.x += this.game.camera.x, n.y += this.game.camera.y, this.rectangle(n, e, i) }, ropeSegments: function(t, e, i) { var n = this;
                t.segments.forEach(function(t) { n.rectangle(t, e, i) }, this) }, spriteInfo: function(t, e, i, n) { this.start(e, i, n), this.line("Sprite:  (" + t.width + " x " + t.height + ") anchor: " + t.anchor.x + " x " + t.anchor.y), this.line("x: " + t.x.toFixed(1) + " y: " + t.y.toFixed(1)), this.line("angle: " + t.angle.toFixed(1) + " rotation: " + t.rotation.toFixed(1)), this.line("visible: " + t.visible + " in camera: " + t.inCamera), this.line("bounds x: " + t._bounds.x.toFixed(1) + " y: " + t._bounds.y.toFixed(1) + " w: " + t._bounds.width.toFixed(1) + " h: " + t._bounds.height.toFixed(1)), this.stop() }, spriteCoords: function(t, e, i, n) { this.start(e, i, n, 100), t.name && this.line(t.name), this.line("x:", t.x.toFixed(2), "y:", t.y.toFixed(2)), this.line("pos x:", t.position.x.toFixed(2), "pos y:", t.position.y.toFixed(2)), this.line("world x:", t.world.x.toFixed(2), "world y:", t.world.y.toFixed(2)), this.stop() }, lineInfo: function(t, e, i, n) { this.start(e, i, n, 80), this.line("start.x:", t.start.x.toFixed(2), "start.y:", t.start.y.toFixed(2)), this.line("end.x:", t.end.x.toFixed(2), "end.y:", t.end.y.toFixed(2)), this.line("length:", t.length.toFixed(2), "angle:", t.angle), this.stop() }, pixel: function(t, e, i, n) { n = n || 2, this.start(), this.context.fillStyle = i, this.context.fillRect(t, e, n, n), this.stop() }, geom: function(t, e, n, s) { void 0 === n && (n = !0), void 0 === s && (s = 0), e = e || "rgba(0,255,0,0.4)", this.start(), this.context.fillStyle = e, this.context.strokeStyle = e, t instanceof i.Rectangle || 1 === s ? n ? this.context.fillRect(t.x - this.game.camera.x, t.y - this.game.camera.y, t.width, t.height) : this.context.strokeRect(t.x - this.game.camera.x, t.y - this.game.camera.y, t.width, t.height) : t instanceof i.Circle || 2 === s ? (this.context.beginPath(), this.context.arc(t.x - this.game.camera.x, t.y - this.game.camera.y, t.radius, 0, 2 * Math.PI, !1), this.context.closePath(), n ? this.context.fill() : this.context.stroke()) : t instanceof i.Point || 3 === s ? this.context.fillRect(t.x - this.game.camera.x, t.y - this.game.camera.y, 4, 4) : (t instanceof i.Line || 4 === s) && (this.context.lineWidth = 1, this.context.beginPath(), this.context.moveTo(t.start.x + .5 - this.game.camera.x, t.start.y + .5 - this.game.camera.y), this.context.lineTo(t.end.x + .5 - this.game.camera.x, t.end.y + .5 - this.game.camera.y), this.context.closePath(), this.context.stroke()), this.stop() }, rectangle: function(t, e, i) { void 0 === i && (i = !0), e = e || "rgba(0, 255, 0, 0.4)", this.start(), i ? (this.context.fillStyle = e, this.context.fillRect(t.x - this.game.camera.x, t.y - this.game.camera.y, t.width, t.height)) : (this.context.strokeStyle = e, this.context.strokeRect(t.x - this.game.camera.x, t.y - this.game.camera.y, t.width, t.height)), this.stop() }, text: function(t, e, i, n, s) { n = n || "rgb(255,255,255)", s = s || "16px Courier", this.start(), this.context.font = s, this.renderShadow && (this.context.fillStyle = "rgb(0,0,0)", this.context.fillText(t, e + 1, i + 1)), this.context.fillStyle = n, this.context.fillText(t, e, i), this.stop() }, quadTree: function(t, e) { e = e || "rgba(255,0,0,0.3)", this.start(); var i = t.bounds; if (0 === t.nodes.length) { this.context.strokeStyle = e, this.context.strokeRect(i.x, i.y, i.width, i.height), this.text("size: " + t.objects.length, i.x + 4, i.y + 16, "rgb(0,200,0)", "12px Courier"), this.context.strokeStyle = "rgb(0,255,0)"; for (n = 0; n < t.objects.length; n++) this.context.strokeRect(t.objects[n].x, t.objects[n].y, t.objects[n].width, t.objects[n].height) } else
                    for (var n = 0; n < t.nodes.length; n++) this.quadTree(t.nodes[n]);
                this.stop() }, body: function(t, e, n) { t.body && (this.start(), t.body.type === i.Physics.ARCADE ? i.Physics.Arcade.Body.render(this.context, t.body, e, n) : t.body.type === i.Physics.NINJA ? i.Physics.Ninja.Body.render(this.context, t.body, e, n) : t.body.type === i.Physics.BOX2D && i.Physics.Box2D.renderBody(this.context, t.body, e), this.stop()) }, bodyInfo: function(t, e, n, s) { t.body && (this.start(e, n, s, 210), t.body.type === i.Physics.ARCADE ? i.Physics.Arcade.Body.renderBodyInfo(this, t.body) : t.body.type === i.Physics.BOX2D && this.game.physics.box2d.renderBodyInfo(this, t.body), this.stop()) }, box2dWorld: function() { this.start(), this.context.translate(-this.game.camera.view.x, -this.game.camera.view.y, 0), this.game.physics.box2d.renderDebugDraw(this.context), this.stop() }, box2dBody: function(t, e) { this.start(), i.Physics.Box2D.renderBody(this.context, t, e), this.stop() }, displayList: function(t) { if (void 0 === t && (t = this.game.world), t.hasOwnProperty("renderOrderID") ? console.log("[" + t.renderOrderID + "]", t) : console.log("[]", t), t.children && t.children.length > 0)
                    for (var e = 0; e < t.children.length; e++) this.game.debug.displayList(t.children[e]) }, destroy: function() { PIXI.CanvasPool.remove(this) } }, i.Utils.Debug.prototype.constructor = i.Utils.Debug, i.DOM = { getOffset: function(t, e) { e = e || new i.Point; var n = t.getBoundingClientRect(),
                    s = i.DOM.scrollY,
                    o = i.DOM.scrollX,
                    a = document.documentElement.clientTop,
                    r = document.documentElement.clientLeft; return e.x = n.left + o - r, e.y = n.top + s - a, e }, getBounds: function(t, e) { return void 0 === e && (e = 0), !(!(t = t && !t.nodeType ? t[0] : t) || 1 !== t.nodeType) && this.calibrate(t.getBoundingClientRect(), e) }, calibrate: function(t, e) { e = +e || 0; var i = { width: 0, height: 0, left: 0, right: 0, top: 0, bottom: 0 }; return i.width = (i.right = t.right + e) - (i.left = t.left - e), i.height = (i.bottom = t.bottom + e) - (i.top = t.top - e), i }, getAspectRatio: function(t) { var e = (t = null == t ? this.visualBounds : 1 === t.nodeType ? this.getBounds(t) : t).width,
                    i = t.height; return "function" == typeof e && (e = e.call(t)), "function" == typeof i && (i = i.call(t)), e / i }, inLayoutViewport: function(t, e) { var i = this.getBounds(t, e); return !!i && i.bottom >= 0 && i.right >= 0 && i.top <= this.layoutBounds.width && i.left <= this.layoutBounds.height }, getScreenOrientation: function(t) { var e = window.screen,
                    i = e.orientation || e.mozOrientation || e.msOrientation; if (i && "string" == typeof i.type) return i.type; if ("string" == typeof i) return i; var n = "portrait-primary",
                    s = "landscape-primary"; if ("screen" === t) return e.height > e.width ? n : s; if ("viewport" === t) return this.visualBounds.height > this.visualBounds.width ? n : s; if ("window.orientation" === t && "number" == typeof window.orientation) return 0 === window.orientation || 180 === window.orientation ? n : s; if (window.matchMedia) { if (window.matchMedia("(orientation: portrait)").matches) return n; if (window.matchMedia("(orientation: landscape)").matches) return s } return this.visualBounds.height > this.visualBounds.width ? n : s }, visualBounds: new i.Rectangle, layoutBounds: new i.Rectangle, documentBounds: new i.Rectangle }, i.Device.whenReady(function(t) { var e = window && "pageXOffset" in window ? function() { return window.pageXOffset } : function() { return document.documentElement.scrollLeft },
                n = window && "pageYOffset" in window ? function() { return window.pageYOffset } : function() { return document.documentElement.scrollTop }; if (Object.defineProperty(i.DOM, "scrollX", { get: e }), Object.defineProperty(i.DOM, "scrollY", { get: n }), Object.defineProperty(i.DOM.visualBounds, "x", { get: e }), Object.defineProperty(i.DOM.visualBounds, "y", { get: n }), Object.defineProperty(i.DOM.layoutBounds, "x", { value: 0 }), Object.defineProperty(i.DOM.layoutBounds, "y", { value: 0 }), t.desktop && document.documentElement.clientWidth <= window.innerWidth && document.documentElement.clientHeight <= window.innerHeight) { var s = function() { return Math.max(window.innerWidth, document.documentElement.clientWidth) },
                    o = function() { return Math.max(window.innerHeight, document.documentElement.clientHeight) };
                Object.defineProperty(i.DOM.visualBounds, "width", { get: s }), Object.defineProperty(i.DOM.visualBounds, "height", { get: o }), Object.defineProperty(i.DOM.layoutBounds, "width", { get: s }), Object.defineProperty(i.DOM.layoutBounds, "height", { get: o }) } else Object.defineProperty(i.DOM.visualBounds, "width", { get: function() { return window.innerWidth } }), Object.defineProperty(i.DOM.visualBounds, "height", { get: function() { return window.innerHeight } }), Object.defineProperty(i.DOM.layoutBounds, "width", { get: function() { var t = document.documentElement.clientWidth,
                        e = window.innerWidth; return t < e ? e : t } }), Object.defineProperty(i.DOM.layoutBounds, "height", { get: function() { var t = document.documentElement.clientHeight,
                        e = window.innerHeight; return t < e ? e : t } });
            Object.defineProperty(i.DOM.documentBounds, "x", { value: 0 }), Object.defineProperty(i.DOM.documentBounds, "y", { value: 0 }), Object.defineProperty(i.DOM.documentBounds, "width", { get: function() { var t = document.documentElement; return Math.max(t.clientWidth, t.offsetWidth, t.scrollWidth) } }), Object.defineProperty(i.DOM.documentBounds, "height", { get: function() { var t = document.documentElement; return Math.max(t.clientHeight, t.offsetHeight, t.scrollHeight) } }) }, null, !0), i.ArraySet = function(t) { this.position = 0, this.list = t || [] }, i.ArraySet.prototype = { add: function(t) { return this.exists(t) || this.list.push(t), t }, getIndex: function(t) { return this.list.indexOf(t) }, getByKey: function(t, e) { for (var i = this.list.length; i--;)
                    if (this.list[i][t] === e) return this.list[i]; return null }, exists: function(t) { return this.list.indexOf(t) > -1 }, reset: function() { this.list.length = 0 }, remove: function(t) { var e = this.list.indexOf(t); if (e > -1) return this.list.splice(e, 1), t }, setAll: function(t, e) { for (var i = this.list.length; i--;) this.list[i] && (this.list[i][t] = e) }, callAll: function(t) { for (var e = Array.prototype.slice.call(arguments, 1), i = this.list.length; i--;) this.list[i] && this.list[i][t] && this.list[i][t].apply(this.list[i], e) }, removeAll: function(t) { void 0 === t && (t = !1); for (var e = this.list.length; e--;)
                    if (this.list[e]) { var i = this.remove(this.list[e]);
                        t && i.destroy() } this.position = 0, this.list = [] } }, Object.defineProperty(i.ArraySet.prototype, "total", { get: function() { return this.list.length } }), Object.defineProperty(i.ArraySet.prototype, "first", { get: function() { return this.position = 0, this.list.length > 0 ? this.list[0] : null } }), Object.defineProperty(i.ArraySet.prototype, "next", { get: function() { return this.position < this.list.length ? (this.position++, this.list[this.position]) : null } }), i.ArraySet.prototype.constructor = i.ArraySet, i.ArrayUtils = { getRandomItem: function(t, e, i) { if (null === t) return null;
                void 0 === e && (e = 0), void 0 === i && (i = t.length); var n = e + Math.floor(Math.random() * i); return void 0 === t[n] ? null : t[n] }, removeRandomItem: function(t, e, i) { if (null == t) return null;
                void 0 === e && (e = 0), void 0 === i && (i = t.length); var n = e + Math.floor(Math.random() * i); if (n < t.length) { var s = t.splice(n, 1); return void 0 === s[0] ? null : s[0] } return null }, shuffle: function(t) { for (var e = t.length - 1; e > 0; e--) { var i = Math.floor(Math.random() * (e + 1)),
                        n = t[e];
                    t[e] = t[i], t[i] = n } return t }, transposeMatrix: function(t) { for (var e = t.length, i = t[0].length, n = new Array(i), s = 0; s < i; s++) { n[s] = new Array(e); for (var o = e - 1; o > -1; o--) n[s][o] = t[o][s] } return n }, rotateMatrix: function(t, e) { if ("string" != typeof e && (e = (e % 360 + 360) % 360), 90 === e || -270 === e || "rotateLeft" === e) t = (t = i.ArrayUtils.transposeMatrix(t)).reverse();
                else if (-90 === e || 270 === e || "rotateRight" === e) t = t.reverse(), t = i.ArrayUtils.transposeMatrix(t);
                else if (180 === Math.abs(e) || "rotate180" === e) { for (var n = 0; n < t.length; n++) t[n].reverse();
                    t = t.reverse() } return t }, findClosest: function(t, e) { if (!e.length) return NaN; if (1 === e.length || t < e[0]) return e[0]; for (var i = 1; e[i] < t;) i++; var n = e[i - 1],
                    s = i < e.length ? e[i] : Number.POSITIVE_INFINITY; return s - t <= t - n ? s : n }, rotateRight: function(t) { var e = t.pop(); return t.unshift(e), e }, rotateLeft: function(t) { var e = t.shift(); return t.push(e), e }, rotate: function(t) { var e = t.shift(); return t.push(e), e }, numberArray: function(t, e) { for (var i = [], n = t; n <= e; n++) i.push(n); return i }, numberArrayStep: function(t, e, n) { void 0 !== t && null !== t || (t = 0), void 0 !== e && null !== e || (e = t, t = 0), void 0 === n && (n = 1); for (var s = [], o = Math.max(i.Math.roundAwayFromZero((e - t) / (n || 1)), 0), a = 0; a < o; a++) s.push(t), t += n; return s } }, i.LinkedList = function() { this.next = null, this.prev = null, this.first = null, this.last = null, this.total = 0 }, i.LinkedList.prototype = { add: function(t) { return 0 === this.total && null === this.first && null === this.last ? (this.first = t, this.last = t, this.next = t, t.prev = this, this.total++, t) : (this.last.next = t, t.prev = this.last, this.last = t, this.total++, t) }, reset: function() { this.first = null, this.last = null, this.next = null, this.prev = null, this.total = 0 }, remove: function(t) { if (1 === this.total) return this.reset(), void(t.next = t.prev = null);
                t === this.first ? this.first = this.first.next : t === this.last && (this.last = this.last.prev), t.prev && (t.prev.next = t.next), t.next && (t.next.prev = t.prev), t.next = t.prev = null, null === this.first && (this.last = null), this.total-- }, callAll: function(t) { if (this.first && this.last) { var e = this.first;
                    do { e && e[t] && e[t].call(e), e = e.next } while (e !== this.last.next) } } }, i.LinkedList.prototype.constructor = i.LinkedList, i.Create = function(t) { this.game = t, this.bmd = null, this.canvas = null, this.ctx = null, this.palettes = [{ 0: "#000", 1: "#9D9D9D", 2: "#FFF", 3: "#BE2633", 4: "#E06F8B", 5: "#493C2B", 6: "#A46422", 7: "#EB8931", 8: "#F7E26B", 9: "#2F484E", A: "#44891A", B: "#A3CE27", C: "#1B2632", D: "#005784", E: "#31A2F2", F: "#B2DCEF" }, { 0: "#000", 1: "#191028", 2: "#46af45", 3: "#a1d685", 4: "#453e78", 5: "#7664fe", 6: "#833129", 7: "#9ec2e8", 8: "#dc534b", 9: "#e18d79", A: "#d6b97b", B: "#e9d8a1", C: "#216c4b", D: "#d365c8", E: "#afaab9", F: "#f5f4eb" }, { 0: "#000", 1: "#2234d1", 2: "#0c7e45", 3: "#44aacc", 4: "#8a3622", 5: "#5c2e78", 6: "#aa5c3d", 7: "#b5b5b5", 8: "#5e606e", 9: "#4c81fb", A: "#6cd947", B: "#7be2f9", C: "#eb8a60", D: "#e23d69", E: "#ffd93f", F: "#fff" }, { 0: "#000", 1: "#fff", 2: "#8b4131", 3: "#7bbdc5", 4: "#8b41ac", 5: "#6aac41", 6: "#3931a4", 7: "#d5de73", 8: "#945a20", 9: "#5a4100", A: "#bd736a", B: "#525252", C: "#838383", D: "#acee8b", E: "#7b73de", F: "#acacac" }, { 0: "#000", 1: "#191028", 2: "#46af45", 3: "#a1d685", 4: "#453e78", 5: "#7664fe", 6: "#833129", 7: "#9ec2e8", 8: "#dc534b", 9: "#e18d79", A: "#d6b97b", B: "#e9d8a1", C: "#216c4b", D: "#d365c8", E: "#afaab9", F: "#fff" }] }, i.Create.PALETTE_ARNE = 0, i.Create.PALETTE_JMP = 1, i.Create.PALETTE_CGA = 2, i.Create.PALETTE_C64 = 3, i.Create.PALETTE_JAPANESE_MACHINE = 4, i.Create.prototype = { texture: function(t, e, i, n, s) { void 0 === i && (i = 8), void 0 === n && (n = i), void 0 === s && (s = 0); var o = e[0].length * i,
                    a = e.length * n;
                null === this.bmd && (this.bmd = this.game.make.bitmapData(), this.canvas = this.bmd.canvas, this.ctx = this.bmd.context), this.bmd.resize(o, a), this.bmd.clear(); for (var r = 0; r < e.length; r++)
                    for (var h = e[r], l = 0; l < h.length; l++) { var c = h[l]; "." !== c && " " !== c && (this.ctx.fillStyle = this.palettes[s][c], this.ctx.fillRect(l * i, r * n, i, n)) }
                return this.bmd.generateTexture(t) }, grid: function(t, e, i, n, s, o) { null === this.bmd && (this.bmd = this.game.make.bitmapData(), this.canvas = this.bmd.canvas, this.ctx = this.bmd.context), this.bmd.resize(e, i), this.ctx.fillStyle = o; for (var a = 0; a < i; a += s) this.ctx.fillRect(0, a, e, 1); for (var r = 0; r < e; r += n) this.ctx.fillRect(r, 0, 1, i); return this.bmd.generateTexture(t) } }, i.Create.prototype.constructor = i.Create, i.FlexGrid = function(t, e, n) { this.game = t.game, this.manager = t, this.width = e, this.height = n, this.boundsCustom = new i.Rectangle(0, 0, e, n), this.boundsFluid = new i.Rectangle(0, 0, e, n), this.boundsFull = new i.Rectangle(0, 0, e, n), this.boundsNone = new i.Rectangle(0, 0, e, n), this.positionCustom = new i.Point(0, 0), this.positionFluid = new i.Point(0, 0), this.positionFull = new i.Point(0, 0), this.positionNone = new i.Point(0, 0), this.scaleCustom = new i.Point(1, 1), this.scaleFluid = new i.Point(1, 1), this.scaleFluidInversed = new i.Point(1, 1), this.scaleFull = new i.Point(1, 1), this.scaleNone = new i.Point(1, 1), this.customWidth = 0, this.customHeight = 0, this.customOffsetX = 0, this.customOffsetY = 0, this.ratioH = e / n, this.ratioV = n / e, this.multiplier = 0, this.layers = [] }, i.FlexGrid.prototype = { setSize: function(t, e) { this.width = t, this.height = e, this.ratioH = t / e, this.ratioV = e / t, this.scaleNone = new i.Point(1, 1), this.boundsNone.width = this.width, this.boundsNone.height = this.height, this.refresh() }, createCustomLayer: function(t, e, n, s) { void 0 === s && (s = !0), this.customWidth = t, this.customHeight = e, this.boundsCustom.width = t, this.boundsCustom.height = e; var o = new i.FlexLayer(this, this.positionCustom, this.boundsCustom, this.scaleCustom); return s && this.game.world.add(o), this.layers.push(o), void 0 !== n && null !== typeof n && o.addMultiple(n), o }, createFluidLayer: function(t, e) { void 0 === e && (e = !0); var n = new i.FlexLayer(this, this.positionFluid, this.boundsFluid, this.scaleFluid); return e && this.game.world.add(n), this.layers.push(n), void 0 !== t && null !== typeof t && n.addMultiple(t), n }, createFullLayer: function(t) { var e = new i.FlexLayer(this, this.positionFull, this.boundsFull, this.scaleFluid); return this.game.world.add(e), this.layers.push(e), void 0 !== t && e.addMultiple(t), e }, createFixedLayer: function(t) { var e = new i.FlexLayer(this, this.positionNone, this.boundsNone, this.scaleNone); return this.game.world.add(e), this.layers.push(e), void 0 !== t && e.addMultiple(t), e }, reset: function() { for (var t = this.layers.length; t--;) this.layers[t].persist || (this.layers[t].position = null, this.layers[t].scale = null, this.layers.slice(t, 1)) }, onResize: function(t, e) { this.ratioH = t / e, this.ratioV = e / t, this.refresh(t, e) }, refresh: function() { this.multiplier = Math.min(this.manager.height / this.height, this.manager.width / this.width), this.boundsFluid.width = Math.round(this.width * this.multiplier), this.boundsFluid.height = Math.round(this.height * this.multiplier), this.scaleFluid.set(this.boundsFluid.width / this.width, this.boundsFluid.height / this.height), this.scaleFluidInversed.set(this.width / this.boundsFluid.width, this.height / this.boundsFluid.height), this.scaleFull.set(this.boundsFull.width / this.width, this.boundsFull.height / this.height), this.boundsFull.width = Math.round(this.manager.width * this.scaleFluidInversed.x), this.boundsFull.height = Math.round(this.manager.height * this.scaleFluidInversed.y), this.boundsFluid.centerOn(this.manager.bounds.centerX, this.manager.bounds.centerY), this.boundsNone.centerOn(this.manager.bounds.centerX, this.manager.bounds.centerY), this.positionFluid.set(this.boundsFluid.x, this.boundsFluid.y), this.positionNone.set(this.boundsNone.x, this.boundsNone.y) }, fitSprite: function(t) { this.manager.scaleSprite(t), t.x = this.manager.bounds.centerX, t.y = this.manager.bounds.centerY }, debug: function() { this.game.debug.text(this.boundsFluid.width + " x " + this.boundsFluid.height, this.boundsFluid.x + 4, this.boundsFluid.y + 16), this.game.debug.geom(this.boundsFluid, "rgba(255,0,0,0.9", !1) } }, i.FlexGrid.prototype.constructor = i.FlexGrid, i.FlexLayer = function(t, e, n, s) { i.Group.call(this, t.game, null, "__flexLayer" + t.game.rnd.uuid(), !1), this.manager = t.manager, this.grid = t, this.persist = !1, this.position = e, this.bounds = n, this.scale = s, this.topLeft = n.topLeft, this.topMiddle = new i.Point(n.halfWidth, 0), this.topRight = n.topRight, this.bottomLeft = n.bottomLeft, this.bottomMiddle = new i.Point(n.halfWidth, n.bottom), this.bottomRight = n.bottomRight }, i.FlexLayer.prototype = Object.create(i.Group.prototype), i.FlexLayer.prototype.constructor = i.FlexLayer, i.FlexLayer.prototype.resize = function() {}, i.FlexLayer.prototype.debug = function() { this.game.debug.text(this.bounds.width + " x " + this.bounds.height, this.bounds.x + 4, this.bounds.y + 16), this.game.debug.geom(this.bounds, "rgba(0,0,255,0.9", !1), this.game.debug.geom(this.topLeft, "rgba(255,255,255,0.9"), this.game.debug.geom(this.topMiddle, "rgba(255,255,255,0.9"), this.game.debug.geom(this.topRight, "rgba(255,255,255,0.9") }, i.Color = { packPixel: function(t, e, n, s) { return i.Device.LITTLE_ENDIAN ? (s << 24 | n << 16 | e << 8 | t) >>> 0 : (t << 24 | e << 16 | n << 8 | s) >>> 0 }, unpackPixel: function(t, e, n, s) { return void 0 !== e && null !== e || (e = i.Color.createColor()), void 0 !== n && null !== n || (n = !1), void 0 !== s && null !== s || (s = !1), i.Device.LITTLE_ENDIAN ? (e.a = (4278190080 & t) >>> 24, e.b = (16711680 & t) >>> 16, e.g = (65280 & t) >>> 8, e.r = 255 & t) : (e.r = (4278190080 & t) >>> 24, e.g = (16711680 & t) >>> 16, e.b = (65280 & t) >>> 8, e.a = 255 & t), e.color = t, e.rgba = "rgba(" + e.r + "," + e.g + "," + e.b + "," + e.a / 255 + ")", n && i.Color.RGBtoHSL(e.r, e.g, e.b, e), s && i.Color.RGBtoHSV(e.r, e.g, e.b, e), e }, fromRGBA: function(t, e) { return e || (e = i.Color.createColor()), e.r = (4278190080 & t) >>> 24, e.g = (16711680 & t) >>> 16, e.b = (65280 & t) >>> 8, e.a = 255 & t, e.rgba = "rgba(" + e.r + "," + e.g + "," + e.b + "," + e.a + ")", e }, toRGBA: function(t, e, i, n) { return t << 24 | e << 16 | i << 8 | n }, toABGR: function(t, e, i, n) { return (n << 24 | i << 16 | e << 8 | t) >>> 0 }, RGBtoHSL: function(t, e, n, s) { s || (s = i.Color.createColor(t, e, n, 1)), t /= 255, e /= 255, n /= 255; var o = Math.min(t, e, n),
                    a = Math.max(t, e, n); if (s.h = 0, s.s = 0, s.l = (a + o) / 2, a !== o) { var r = a - o;
                    s.s = s.l > .5 ? r / (2 - a - o) : r / (a + o), a === t ? s.h = (e - n) / r + (e < n ? 6 : 0) : a === e ? s.h = (n - t) / r + 2 : a === n && (s.h = (t - e) / r + 4), s.h /= 6 } return s }, HSLtoRGB: function(t, e, n, s) { if (s ? (s.r = n, s.g = n, s.b = n) : s = i.Color.createColor(n, n, n), 0 !== e) { var o = n < .5 ? n * (1 + e) : n + e - n * e,
                        a = 2 * n - o;
                    s.r = i.Color.hueToColor(a, o, t + 1 / 3), s.g = i.Color.hueToColor(a, o, t), s.b = i.Color.hueToColor(a, o, t - 1 / 3) } return s.r = Math.floor(255 * s.r | 0), s.g = Math.floor(255 * s.g | 0), s.b = Math.floor(255 * s.b | 0), i.Color.updateColor(s), s }, RGBtoHSV: function(t, e, n, s) { s || (s = i.Color.createColor(t, e, n, 255)), t /= 255, e /= 255, n /= 255; var o = Math.min(t, e, n),
                    a = Math.max(t, e, n),
                    r = a - o; return s.h = 0, s.s = 0 === a ? 0 : r / a, s.v = a, a !== o && (a === t ? s.h = (e - n) / r + (e < n ? 6 : 0) : a === e ? s.h = (n - t) / r + 2 : a === n && (s.h = (t - e) / r + 4), s.h /= 6), s }, HSVtoRGB: function(t, e, n, s) { void 0 === s && (s = i.Color.createColor(0, 0, 0, 1, t, e, 0, n)); var o, a, r, h = Math.floor(6 * t),
                    l = 6 * t - h,
                    c = n * (1 - e),
                    u = n * (1 - l * e),
                    p = n * (1 - (1 - l) * e); switch (h % 6) {
                    case 0:
                        o = n, a = p, r = c; break;
                    case 1:
                        o = u, a = n, r = c; break;
                    case 2:
                        o = c, a = n, r = p; break;
                    case 3:
                        o = c, a = u, r = n; break;
                    case 4:
                        o = p, a = c, r = n; break;
                    case 5:
                        o = n, a = c, r = u } return s.r = Math.floor(255 * o), s.g = Math.floor(255 * a), s.b = Math.floor(255 * r), i.Color.updateColor(s), s }, hueToColor: function(t, e, i) { return i < 0 && (i += 1), i > 1 && (i -= 1), i < 1 / 6 ? t + 6 * (e - t) * i : i < .5 ? e : i < 2 / 3 ? t + (e - t) * (2 / 3 - i) * 6 : t }, createColor: function(t, e, n, s, o, a, r, h) { var l = { r: t || 0, g: e || 0, b: n || 0, a: s || 1, h: o || 0, s: a || 0, l: r || 0, v: h || 0, color: 0, color32: 0, rgba: "" }; return i.Color.updateColor(l) }, updateColor: function(t) { return t.rgba = "rgba(" + t.r.toString() + "," + t.g.toString() + "," + t.b.toString() + "," + t.a.toString() + ")", t.color = i.Color.getColor(t.r, t.g, t.b), t.color32 = i.Color.getColor32(255 * t.a, t.r, t.g, t.b), t }, getColor32: function(t, e, i, n) { return t << 24 | e << 16 | i << 8 | n }, getColor: function(t, e, i) { return t << 16 | e << 8 | i }, RGBtoString: function(t, e, n, s, o) { return void 0 === s && (s = 255), void 0 === o && (o = "#"), "#" === o ? "#" + ((1 << 24) + (t << 16) + (e << 8) + n).toString(16).slice(1) : "0x" + i.Color.componentToHex(s) + i.Color.componentToHex(t) + i.Color.componentToHex(e) + i.Color.componentToHex(n) }, hexToRGB: function(t) { var e = i.Color.hexToColor(t); if (e) return i.Color.getColor32(e.a, e.r, e.g, e.b) }, hexToColor: function(t, e) { t = t.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i, function(t, e, i, n) { return e + e + i + i + n + n }); var n = /^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t); if (n) { var s = parseInt(n[1], 16),
                        o = parseInt(n[2], 16),
                        a = parseInt(n[3], 16);
                    e ? (e.r = s, e.g = o, e.b = a) : e = i.Color.createColor(s, o, a) } return e }, webToColor: function(t, e) { e || (e = i.Color.createColor()); var n = /^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(t); return n && (e.r = parseInt(n[1], 10), e.g = parseInt(n[2], 10), e.b = parseInt(n[3], 10), e.a = void 0 !== n[4] ? parseFloat(n[4]) : 1, i.Color.updateColor(e)), e }, valueToColor: function(t, e) { if (e || (e = i.Color.createColor()), "string" == typeof t) return 0 === t.indexOf("rgb") ? i.Color.webToColor(t, e) : (e.a = 1, i.Color.hexToColor(t, e)); if ("number" == typeof t) { var n = i.Color.getRGB(t); return e.r = n.r, e.g = n.g, e.b = n.b, e.a = n.a / 255, e } return e }, componentToHex: function(t) { var e = t.toString(16); return 1 === e.length ? "0" + e : e }, HSVColorWheel: function(t, e) { void 0 === t && (t = 1), void 0 === e && (e = 1); for (var n = [], s = 0; s <= 359; s++) n.push(i.Color.HSVtoRGB(s / 359, t, e)); return n }, HSLColorWheel: function(t, e) { void 0 === t && (t = .5), void 0 === e && (e = .5); for (var n = [], s = 0; s <= 359; s++) n.push(i.Color.HSLtoRGB(s / 359, t, e)); return n }, interpolateColor: function(t, e, n, s, o) { void 0 === o && (o = 255); var a = i.Color.getRGB(t),
                    r = i.Color.getRGB(e),
                    h = (r.red - a.red) * s / n + a.red,
                    l = (r.green - a.green) * s / n + a.green,
                    c = (r.blue - a.blue) * s / n + a.blue; return i.Color.getColor32(o, h, l, c) }, interpolateColorWithRGB: function(t, e, n, s, o, a) { var r = i.Color.getRGB(t),
                    h = (e - r.red) * a / o + r.red,
                    l = (n - r.green) * a / o + r.green,
                    c = (s - r.blue) * a / o + r.blue; return i.Color.getColor(h, l, c) }, interpolateRGB: function(t, e, n, s, o, a, r, h) { var l = (s - t) * h / r + t,
                    c = (o - e) * h / r + e,
                    u = (a - n) * h / r + n; return i.Color.getColor(l, c, u) }, getRandomColor: function(t, e, n) { if (void 0 === t && (t = 0), void 0 === e && (e = 255), void 0 === n && (n = 255), e > 255 || t > e) return i.Color.getColor(255, 255, 255); var s = t + Math.round(Math.random() * (e - t)),
                    o = t + Math.round(Math.random() * (e - t)),
                    a = t + Math.round(Math.random() * (e - t)); return i.Color.getColor32(n, s, o, a) }, getRGB: function(t) { return t > 16777215 ? { alpha: t >>> 24, red: t >> 16 & 255, green: t >> 8 & 255, blue: 255 & t, a: t >>> 24, r: t >> 16 & 255, g: t >> 8 & 255, b: 255 & t } : { alpha: 255, red: t >> 16 & 255, green: t >> 8 & 255, blue: 255 & t, a: 255, r: t >> 16 & 255, g: t >> 8 & 255, b: 255 & t } }, getWebRGB: function(t) { if ("object" == typeof t) return "rgba(" + t.r.toString() + "," + t.g.toString() + "," + t.b.toString() + "," + (t.a / 255).toString() + ")"; var e = i.Color.getRGB(t); return "rgba(" + e.r.toString() + "," + e.g.toString() + "," + e.b.toString() + "," + (e.a / 255).toString() + ")" }, getAlpha: function(t) { return t >>> 24 }, getAlphaFloat: function(t) { return (t >>> 24) / 255 }, getRed: function(t) { return t >> 16 & 255 }, getGreen: function(t) { return t >> 8 & 255 }, getBlue: function(t) { return 255 & t }, blendNormal: function(t) { return t }, blendLighten: function(t, e) { return e > t ? e : t }, blendDarken: function(t, e) { return e > t ? t : e }, blendMultiply: function(t, e) { return t * e / 255 }, blendAverage: function(t, e) { return (t + e) / 2 }, blendAdd: function(t, e) { return Math.min(255, t + e) }, blendSubtract: function(t, e) { return Math.max(0, t + e - 255) }, blendDifference: function(t, e) { return Math.abs(t - e) }, blendNegation: function(t, e) { return 255 - Math.abs(255 - t - e) }, blendScreen: function(t, e) { return 255 - ((255 - t) * (255 - e) >> 8) }, blendExclusion: function(t, e) { return t + e - 2 * t * e / 255 }, blendOverlay: function(t, e) { return e < 128 ? 2 * t * e / 255 : 255 - 2 * (255 - t) * (255 - e) / 255 }, blendSoftLight: function(t, e) { return e < 128 ? 2 * (64 + (t >> 1)) * (e / 255) : 255 - 2 * (255 - (64 + (t >> 1))) * (255 - e) / 255 }, blendHardLight: function(t, e) { return i.Color.blendOverlay(e, t) }, blendColorDodge: function(t, e) { return 255 === e ? e : Math.min(255, (t << 8) / (255 - e)) }, blendColorBurn: function(t, e) { return 0 === e ? e : Math.max(0, 255 - (255 - t << 8) / e) }, blendLinearDodge: function(t, e) { return i.Color.blendAdd(t, e) }, blendLinearBurn: function(t, e) { return i.Color.blendSubtract(t, e) }, blendLinearLight: function(t, e) { return e < 128 ? i.Color.blendLinearBurn(t, 2 * e) : i.Color.blendLinearDodge(t, 2 * (e - 128)) }, blendVividLight: function(t, e) { return e < 128 ? i.Color.blendColorBurn(t, 2 * e) : i.Color.blendColorDodge(t, 2 * (e - 128)) }, blendPinLight: function(t, e) { return e < 128 ? i.Color.blendDarken(t, 2 * e) : i.Color.blendLighten(t, 2 * (e - 128)) }, blendHardMix: function(t, e) { return i.Color.blendVividLight(t, e) < 128 ? 0 : 255 }, blendReflect: function(t, e) { return 255 === e ? e : Math.min(255, t * t / (255 - e)) }, blendGlow: function(t, e) { return i.Color.blendReflect(e, t) }, blendPhoenix: function(t, e) { return Math.min(t, e) - Math.max(t, e) + 255 } }, i.Physics = function(t, e) { e = e || {}, this.game = t, this.config = e, this.arcade = null, this.p2 = null, this.ninja = null, this.box2d = null, this.chipmunk = null, this.matter = null, this.parseConfig() }, i.Physics.ARCADE = 0, i.Physics.P2JS = 1, i.Physics.NINJA = 2, i.Physics.BOX2D = 3, i.Physics.CHIPMUNK = 4, i.Physics.MATTERJS = 5, i.Physics.prototype = { parseConfig: function() { this.config.hasOwnProperty("arcade") && !0 !== this.config.arcade || !i.Physics.hasOwnProperty("Arcade") || (this.arcade = new i.Physics.Arcade(this.game)), this.config.hasOwnProperty("ninja") && !0 === this.config.ninja && i.Physics.hasOwnProperty("Ninja") && (this.ninja = new i.Physics.Ninja(this.game)), this.config.hasOwnProperty("p2") && !0 === this.config.p2 && i.Physics.hasOwnProperty("P2") && (this.p2 = new i.Physics.P2(this.game, this.config)), this.config.hasOwnProperty("box2d") && !0 === this.config.box2d && i.Physics.hasOwnProperty("BOX2D") && (this.box2d = new i.Physics.BOX2D(this.game, this.config)), this.config.hasOwnProperty("matter") && !0 === this.config.matter && i.Physics.hasOwnProperty("Matter") && (this.matter = new i.Physics.Matter(this.game, this.config)) }, startSystem: function(t) { t === i.Physics.ARCADE ? this.arcade = new i.Physics.Arcade(this.game) : t === i.Physics.P2JS ? null === this.p2 ? this.p2 = new i.Physics.P2(this.game, this.config) : this.p2.reset() : t === i.Physics.NINJA ? this.ninja = new i.Physics.Ninja(this.game) : t === i.Physics.BOX2D ? null === this.box2d ? this.box2d = new i.Physics.Box2D(this.game, this.config) : this.box2d.reset() : t === i.Physics.MATTERJS && (null === this.matter ? this.matter = new i.Physics.Matter(this.game, this.config) : this.matter.reset()) }, enable: function(t, e, n) { void 0 === e && (e = i.Physics.ARCADE), void 0 === n && (n = !1), e === i.Physics.ARCADE ? this.arcade.enable(t) : e === i.Physics.P2JS && this.p2 ? this.p2.enable(t, n) : e === i.Physics.NINJA && this.ninja ? this.ninja.enableAABB(t) : e === i.Physics.BOX2D && this.box2d ? this.box2d.enable(t) : e === i.Physics.MATTERJS && this.matter ? this.matter.enable(t) : console.warn(t.key + " is attempting to enable a physics body using an unknown physics system.") }, preUpdate: function() { this.p2 && this.p2.preUpdate(), this.box2d && this.box2d.preUpdate(), this.matter && this.matter.preUpdate() }, update: function() { this.p2 && this.p2.update(), this.box2d && this.box2d.update(), this.matter && this.matter.update() }, setBoundsToWorld: function() { this.arcade && this.arcade.setBoundsToWorld(), this.ninja && this.ninja.setBoundsToWorld(), this.p2 && this.p2.setBoundsToWorld(), this.box2d && this.box2d.setBoundsToWorld(), this.matter && this.matter.setBoundsToWorld() }, clear: function() { this.p2 && this.p2.clear(), this.box2d && this.box2d.clear(), this.matter && this.matter.clear() }, reset: function() { this.p2 && this.p2.reset(), this.box2d && this.box2d.reset(), this.matter && this.matter.reset() }, destroy: function() { this.p2 && this.p2.destroy(), this.box2d && this.box2d.destroy(), this.matter && this.matter.destroy(), this.arcade = null, this.ninja = null, this.p2 = null, this.box2d = null, this.matter = null } }, i.Physics.prototype.constructor = i.Physics, i.Physics.Arcade = function(t) { this.game = t, this.gravity = new i.Point, this.bounds = new i.Rectangle(0, 0, t.world.width, t.world.height), this.checkCollision = { up: !0, down: !0, left: !0, right: !0 }, this.maxObjects = 10, this.maxLevels = 4, this.OVERLAP_BIAS = 4, this.forceX = !1, this.sortDirection = i.Physics.Arcade.LEFT_RIGHT, this.skipQuadTree = !0, this.isPaused = !1, this.quadTree = new i.QuadTree(this.game.world.bounds.x, this.game.world.bounds.y, this.game.world.bounds.width, this.game.world.bounds.height, this.maxObjects, this.maxLevels), this._total = 0, this.setBoundsToWorld() }, i.Physics.Arcade.prototype.constructor = i.Physics.Arcade, i.Physics.Arcade.SORT_NONE = 0, i.Physics.Arcade.LEFT_RIGHT = 1, i.Physics.Arcade.RIGHT_LEFT = 2, i.Physics.Arcade.TOP_BOTTOM = 3, i.Physics.Arcade.BOTTOM_TOP = 4, i.Physics.Arcade.prototype = { setBounds: function(t, e, i, n) { this.bounds.setTo(t, e, i, n) }, setBoundsToWorld: function() { this.bounds.copyFrom(this.game.world.bounds) }, enable: function(t, e) { void 0 === e && (e = !0); var n = 1; if (Array.isArray(t))
                    for (n = t.length; n--;) t[n] instanceof i.Group ? this.enable(t[n].children, e) : (this.enableBody(t[n]), e && t[n].hasOwnProperty("children") && t[n].children.length > 0 && this.enable(t[n], !0));
                else t instanceof i.Group ? this.enable(t.children, e) : (this.enableBody(t), e && t.hasOwnProperty("children") && t.children.length > 0 && this.enable(t.children, !0)) }, enableBody: function(t) { t.hasOwnProperty("body") && null === t.body && (t.body = new i.Physics.Arcade.Body(t), t.parent && t.parent instanceof i.Group && t.parent.addToHash(t)) }, updateMotion: function(t) { var e = this.computeVelocity(0, t, t.angularVelocity, t.angularAcceleration, t.angularDrag, t.maxAngular) - t.angularVelocity;
                t.angularVelocity += e, t.rotation += t.angularVelocity * this.game.time.physicsElapsed, t.velocity.x = this.computeVelocity(1, t, t.velocity.x, t.acceleration.x, t.drag.x, t.maxVelocity.x), t.velocity.y = this.computeVelocity(2, t, t.velocity.y, t.acceleration.y, t.drag.y, t.maxVelocity.y) }, computeVelocity: function(t, e, i, n, s, o) { return void 0 === o && (o = 1e4), 1 === t && e.allowGravity ? i += (this.gravity.x + e.gravity.x) * this.game.time.physicsElapsed : 2 === t && e.allowGravity && (i += (this.gravity.y + e.gravity.y) * this.game.time.physicsElapsed), n ? i += n * this.game.time.physicsElapsed : s && (i - (s *= this.game.time.physicsElapsed) > 0 ? i -= s : i + s < 0 ? i += s : i = 0), i > o ? i = o : i < -o && (i = -o), i }, overlap: function(t, e, i, n, s) { if (i = i || null, n = n || null, s = s || i, this._total = 0, !Array.isArray(t) && Array.isArray(e))
                    for (o = 0; o < e.length; o++) this.collideHandler(t, e[o], i, n, s, !0);
                else if (Array.isArray(t) && !Array.isArray(e))
                    for (o = 0; o < t.length; o++) this.collideHandler(t[o], e, i, n, s, !0);
                else if (Array.isArray(t) && Array.isArray(e))
                    for (var o = 0; o < t.length; o++)
                        for (var a = 0; a < e.length; a++) this.collideHandler(t[o], e[a], i, n, s, !0);
                else this.collideHandler(t, e, i, n, s, !0); return this._total > 0 }, collide: function(t, e, i, n, s) { if (i = i || null, n = n || null, s = s || i, this._total = 0, !Array.isArray(t) && Array.isArray(e))
                    for (o = 0; o < e.length; o++) this.collideHandler(t, e[o], i, n, s, !1);
                else if (Array.isArray(t) && !Array.isArray(e))
                    for (o = 0; o < t.length; o++) this.collideHandler(t[o], e, i, n, s, !1);
                else if (Array.isArray(t) && Array.isArray(e))
                    for (var o = 0; o < t.length; o++)
                        for (var a = 0; a < e.length; a++) this.collideHandler(t[o], e[a], i, n, s, !1);
                else this.collideHandler(t, e, i, n, s, !1); return this._total > 0 }, sortLeftRight: function(t, e) { return t.body && e.body ? t.body.x - e.body.x : 0 }, sortRightLeft: function(t, e) { return t.body && e.body ? e.body.x - t.body.x : 0 }, sortTopBottom: function(t, e) { return t.body && e.body ? t.body.y - e.body.y : 0 }, sortBottomTop: function(t, e) { return t.body && e.body ? e.body.y - t.body.y : 0 }, sort: function(t, e) { null !== t.physicsSortDirection ? e = t.physicsSortDirection : void 0 === e && (e = this.sortDirection), e === i.Physics.Arcade.LEFT_RIGHT ? t.hash.sort(this.sortLeftRight) : e === i.Physics.Arcade.RIGHT_LEFT ? t.hash.sort(this.sortRightLeft) : e === i.Physics.Arcade.TOP_BOTTOM ? t.hash.sort(this.sortTopBottom) : e === i.Physics.Arcade.BOTTOM_TOP && t.hash.sort(this.sortBottomTop) }, collideHandler: function(t, e, n, s, o, a) { if (void 0 === e && t.physicsType === i.GROUP) return this.sort(t), void this.collideGroupVsSelf(t, n, s, o, a);
                t && e && t.exists && e.exists && (this.sortDirection !== i.Physics.Arcade.SORT_NONE && (t.physicsType === i.GROUP && this.sort(t), e.physicsType === i.GROUP && this.sort(e)), t.physicsType === i.SPRITE ? e.physicsType === i.SPRITE ? this.collideSpriteVsSprite(t, e, n, s, o, a) : e.physicsType === i.GROUP ? this.collideSpriteVsGroup(t, e, n, s, o, a) : e.physicsType === i.TILEMAPLAYER && this.collideSpriteVsTilemapLayer(t, e, n, s, o, a) : t.physicsType === i.GROUP ? e.physicsType === i.SPRITE ? this.collideSpriteVsGroup(e, t, n, s, o, a) : e.physicsType === i.GROUP ? this.collideGroupVsGroup(t, e, n, s, o, a) : e.physicsType === i.TILEMAPLAYER && this.collideGroupVsTilemapLayer(t, e, n, s, o, a) : t.physicsType === i.TILEMAPLAYER && (e.physicsType === i.SPRITE ? this.collideSpriteVsTilemapLayer(e, t, n, s, o, a) : e.physicsType === i.GROUP && this.collideGroupVsTilemapLayer(e, t, n, s, o, a))) }, collideSpriteVsSprite: function(t, e, i, n, s, o) { return !(!t.body || !e.body) && (this.separate(t.body, e.body, n, s, o) && (i && i.call(s, t, e), this._total++), !0) }, collideSpriteVsGroup: function(t, e, n, s, o, a) { if (0 !== e.length && t.body)
                    if (this.skipQuadTree || t.body.skipQuadTree)
                        for (var r = {}, h = 0; h < e.hash.length; h++) { var l = e.hash[h]; if (l && l.exists && l.body) { if (r = l.body.getBounds(r), this.sortDirection === i.Physics.Arcade.LEFT_RIGHT) { if (t.body.right < r.x) break; if (r.right < t.body.x) continue } else if (this.sortDirection === i.Physics.Arcade.RIGHT_LEFT) { if (t.body.x > r.right) break; if (r.x > t.body.right) continue } else if (this.sortDirection === i.Physics.Arcade.TOP_BOTTOM) { if (t.body.bottom < r.y) break; if (r.bottom < t.body.y) continue } else if (this.sortDirection === i.Physics.Arcade.BOTTOM_TOP) { if (t.body.y > r.bottom) break; if (r.y > t.body.bottom) continue } this.collideSpriteVsSprite(t, l, n, s, o, a) } } else { this.quadTree.clear(), this.quadTree.reset(this.game.world.bounds.x, this.game.world.bounds.y, this.game.world.bounds.width, this.game.world.bounds.height, this.maxObjects, this.maxLevels), this.quadTree.populate(e); for (var c = this.quadTree.retrieve(t), h = 0; h < c.length; h++) this.separate(t.body, c[h], s, o, a) && (n && n.call(o, t, c[h].sprite), this._total++) } }, collideGroupVsSelf: function(t, e, n, s, o) { if (0 !== t.length)
                    for (var a = 0; a < t.hash.length; a++) { var r = {},
                            h = t.hash[a]; if (h && h.exists && h.body) { r = h.body.getBounds(r); for (var l = a + 1; l < t.hash.length; l++) { var c = {},
                                    u = t.hash[l]; if (u && u.exists && u.body) { if (c = u.body.getBounds(c), this.sortDirection === i.Physics.Arcade.LEFT_RIGHT) { if (r.right < c.x) break; if (c.right < r.x) continue } else if (this.sortDirection === i.Physics.Arcade.RIGHT_LEFT) { if (r.x > c.right) continue; if (c.x > r.right) break } else if (this.sortDirection === i.Physics.Arcade.TOP_BOTTOM) { if (r.bottom < c.y) continue; if (c.bottom < r.y) break } else if (this.sortDirection === i.Physics.Arcade.BOTTOM_TOP) { if (r.y > c.bottom) continue; if (c.y > h.body.bottom) break } this.collideSpriteVsSprite(h, u, e, n, s, o) } } } } }, collideGroupVsGroup: function(t, e, n, s, o, a) { if (0 !== t.length && 0 !== e.length)
                    for (var r = 0; r < t.children.length; r++) t.children[r].exists && (t.children[r].physicsType === i.GROUP ? this.collideGroupVsGroup(t.children[r], e, n, s, o, a) : this.collideSpriteVsGroup(t.children[r], e, n, s, o, a)) }, separate: function(t, e, i, n, s) { if (!t.enable || !e.enable || t.checkCollision.none || e.checkCollision.none || !this.intersects(t, e)) return !1; if (i && !1 === i.call(n, t.sprite, e.sprite)) return !1; if (t.isCircle && e.isCircle) return this.separateCircle(t, e, s); if (t.isCircle !== e.isCircle) { var o = t.isCircle ? e : t,
                        a = t.isCircle ? t : e,
                        r = { x: o.x, y: o.y, right: o.right, bottom: o.bottom },
                        h = { x: a.x + a.radius, y: a.y + a.radius }; if ((h.y < r.y || h.y > r.bottom) && (h.x < r.x || h.x > r.right)) return this.separateCircle(t, e, s) } var l = !1,
                    c = !1;
                this.forceX || Math.abs(this.gravity.y + t.gravity.y) < Math.abs(this.gravity.x + t.gravity.x) ? (l = this.separateX(t, e, s), this.intersects(t, e) && (c = this.separateY(t, e, s))) : (c = this.separateY(t, e, s), this.intersects(t, e) && (l = this.separateX(t, e, s))); var u = l || c; return u && (s ? (t.onOverlap && t.onOverlap.dispatch(t.sprite, e.sprite), e.onOverlap && e.onOverlap.dispatch(e.sprite, t.sprite)) : (t.onCollide && t.onCollide.dispatch(t.sprite, e.sprite), e.onCollide && e.onCollide.dispatch(e.sprite, t.sprite))), u }, intersects: function(t, e) { return t !== e && (t.isCircle ? e.isCircle ? i.Math.distance(t.center.x, t.center.y, e.center.x, e.center.y) <= t.radius + e.radius : this.circleBodyIntersects(t, e) : e.isCircle ? this.circleBodyIntersects(e, t) : !(t.right <= e.position.x) && (!(t.bottom <= e.position.y) && (!(t.position.x >= e.right) && !(t.position.y >= e.bottom)))) }, circleBodyIntersects: function(t, e) { var n = i.Math.clamp(t.center.x, e.left, e.right),
                    s = i.Math.clamp(t.center.y, e.top, e.bottom); return (t.center.x - n) * (t.center.x - n) + (t.center.y - s) * (t.center.y - s) <= t.radius * t.radius }, separateCircle: function(t, e, n) { this.getOverlapX(t, e), this.getOverlapY(t, e); var s = e.center.x - t.center.x,
                    o = e.center.y - t.center.y,
                    a = Math.atan2(o, s),
                    r = 0; if (t.isCircle !== e.isCircle) { var h = { x: e.isCircle ? t.position.x : e.position.x, y: e.isCircle ? t.position.y : e.position.y, right: e.isCircle ? t.right : e.right, bottom: e.isCircle ? t.bottom : e.bottom },
                        l = { x: t.isCircle ? t.position.x + t.radius : e.position.x + e.radius, y: t.isCircle ? t.position.y + t.radius : e.position.y + e.radius, radius: t.isCircle ? t.radius : e.radius };
                    l.y < h.y ? l.x < h.x ? r = i.Math.distance(l.x, l.y, h.x, h.y) - l.radius : l.x > h.right && (r = i.Math.distance(l.x, l.y, h.right, h.y) - l.radius) : l.y > h.bottom && (l.x < h.x ? r = i.Math.distance(l.x, l.y, h.x, h.bottom) - l.radius : l.x > h.right && (r = i.Math.distance(l.x, l.y, h.right, h.bottom) - l.radius)), r *= -1 } else r = t.radius + e.radius - i.Math.distance(t.center.x, t.center.y, e.center.x, e.center.y); if (n || 0 === r || t.immovable && e.immovable || t.customSeparateX || e.customSeparateX) return 0 !== r && (t.onOverlap && t.onOverlap.dispatch(t.sprite, e.sprite), e.onOverlap && e.onOverlap.dispatch(e.sprite, t.sprite)), 0 !== r; var c = { x: t.velocity.x * Math.cos(a) + t.velocity.y * Math.sin(a), y: t.velocity.x * Math.sin(a) - t.velocity.y * Math.cos(a) },
                    u = { x: e.velocity.x * Math.cos(a) + e.velocity.y * Math.sin(a), y: e.velocity.x * Math.sin(a) - e.velocity.y * Math.cos(a) },
                    p = ((t.mass - e.mass) * c.x + 2 * e.mass * u.x) / (t.mass + e.mass),
                    d = (2 * t.mass * c.x + (e.mass - t.mass) * u.x) / (t.mass + e.mass); return t.immovable || (t.velocity.x = (p * Math.cos(a) - c.y * Math.sin(a)) * t.bounce.x, t.velocity.y = (c.y * Math.cos(a) + p * Math.sin(a)) * t.bounce.y), e.immovable || (e.velocity.x = (d * Math.cos(a) - u.y * Math.sin(a)) * e.bounce.x, e.velocity.y = (u.y * Math.cos(a) + d * Math.sin(a)) * e.bounce.y), Math.abs(a) < Math.PI / 2 ? t.velocity.x > 0 && !t.immovable && e.velocity.x > t.velocity.x ? t.velocity.x *= -1 : e.velocity.x < 0 && !e.immovable && t.velocity.x < e.velocity.x ? e.velocity.x *= -1 : t.velocity.y > 0 && !t.immovable && e.velocity.y > t.velocity.y ? t.velocity.y *= -1 : e.velocity.y < 0 && !e.immovable && t.velocity.y < e.velocity.y && (e.velocity.y *= -1) : Math.abs(a) > Math.PI / 2 && (t.velocity.x < 0 && !t.immovable && e.velocity.x < t.velocity.x ? t.velocity.x *= -1 : e.velocity.x > 0 && !e.immovable && t.velocity.x > e.velocity.x ? e.velocity.x *= -1 : t.velocity.y < 0 && !t.immovable && e.velocity.y < t.velocity.y ? t.velocity.y *= -1 : e.velocity.y > 0 && !e.immovable && t.velocity.x > e.velocity.y && (e.velocity.y *= -1)), t.immovable || (t.x += t.velocity.x * this.game.time.physicsElapsed - r * Math.cos(a), t.y += t.velocity.y * this.game.time.physicsElapsed - r * Math.sin(a)), e.immovable || (e.x += e.velocity.x * this.game.time.physicsElapsed + r * Math.cos(a), e.y += e.velocity.y * this.game.time.physicsElapsed + r * Math.sin(a)), t.onCollide && t.onCollide.dispatch(t.sprite, e.sprite), e.onCollide && e.onCollide.dispatch(e.sprite, t.sprite), !0 }, getOverlapX: function(t, e, i) { var n = 0,
                    s = t.deltaAbsX() + e.deltaAbsX() + this.OVERLAP_BIAS; return 0 === t.deltaX() && 0 === e.deltaX() ? (t.embedded = !0, e.embedded = !0) : t.deltaX() > e.deltaX() ? (n = t.right - e.x) > s && !i || !1 === t.checkCollision.right || !1 === e.checkCollision.left ? n = 0 : (t.touching.none = !1, t.touching.right = !0, e.touching.none = !1, e.touching.left = !0) : t.deltaX() < e.deltaX() && (-(n = t.x - e.width - e.x) > s && !i || !1 === t.checkCollision.left || !1 === e.checkCollision.right ? n = 0 : (t.touching.none = !1, t.touching.left = !0, e.touching.none = !1, e.touching.right = !0)), t.overlapX = n, e.overlapX = n, n }, getOverlapY: function(t, e, i) { var n = 0,
                    s = t.deltaAbsY() + e.deltaAbsY() + this.OVERLAP_BIAS; return 0 === t.deltaY() && 0 === e.deltaY() ? (t.embedded = !0, e.embedded = !0) : t.deltaY() > e.deltaY() ? (n = t.bottom - e.y) > s && !i || !1 === t.checkCollision.down || !1 === e.checkCollision.up ? n = 0 : (t.touching.none = !1, t.touching.down = !0, e.touching.none = !1, e.touching.up = !0) : t.deltaY() < e.deltaY() && (-(n = t.y - e.bottom) > s && !i || !1 === t.checkCollision.up || !1 === e.checkCollision.down ? n = 0 : (t.touching.none = !1, t.touching.up = !0, e.touching.none = !1, e.touching.down = !0)), t.overlapY = n, e.overlapY = n, n }, separateX: function(t, e, i) { var n = this.getOverlapX(t, e, i); if (i || 0 === n || t.immovable && e.immovable || t.customSeparateX || e.customSeparateX) return 0 !== n || t.embedded && e.embedded; var s = t.velocity.x,
                    o = e.velocity.x; if (t.immovable || e.immovable) t.immovable ? (e.x += n, e.velocity.x = s - o * e.bounce.x, t.moves && (e.y += (t.y - t.prev.y) * t.friction.y)) : (t.x -= n, t.velocity.x = o - s * t.bounce.x, e.moves && (t.y += (e.y - e.prev.y) * e.friction.y));
                else { n *= .5, t.x -= n, e.x += n; var a = Math.sqrt(o * o * e.mass / t.mass) * (o > 0 ? 1 : -1),
                        r = Math.sqrt(s * s * t.mass / e.mass) * (s > 0 ? 1 : -1),
                        h = .5 * (a + r);
                    a -= h, r -= h, t.velocity.x = h + a * t.bounce.x, e.velocity.x = h + r * e.bounce.x } return !0 }, separateY: function(t, e, i) { var n = this.getOverlapY(t, e, i); if (i || 0 === n || t.immovable && e.immovable || t.customSeparateY || e.customSeparateY) return 0 !== n || t.embedded && e.embedded; var s = t.velocity.y,
                    o = e.velocity.y; if (t.immovable || e.immovable) t.immovable ? (e.y += n, e.velocity.y = s - o * e.bounce.y, t.moves && (e.x += (t.x - t.prev.x) * t.friction.x)) : (t.y -= n, t.velocity.y = o - s * t.bounce.y, e.moves && (t.x += (e.x - e.prev.x) * e.friction.x));
                else { n *= .5, t.y -= n, e.y += n; var a = Math.sqrt(o * o * e.mass / t.mass) * (o > 0 ? 1 : -1),
                        r = Math.sqrt(s * s * t.mass / e.mass) * (s > 0 ? 1 : -1),
                        h = .5 * (a + r);
                    a -= h, r -= h, t.velocity.y = h + a * t.bounce.y, e.velocity.y = h + r * e.bounce.y } return !0 }, getObjectsUnderPointer: function(t, e, i, n) { if (0 !== e.length && t.exists) return this.getObjectsAtLocation(t.x, t.y, e, i, n, t) }, getObjectsAtLocation: function(t, e, n, s, o, a) { this.quadTree.clear(), this.quadTree.reset(this.game.world.bounds.x, this.game.world.bounds.y, this.game.world.bounds.width, this.game.world.bounds.height, this.maxObjects, this.maxLevels), this.quadTree.populate(n); for (var r = new i.Rectangle(t, e, 1, 1), h = [], l = this.quadTree.retrieve(r), c = 0; c < l.length; c++) l[c].hitTest(t, e) && (s && s.call(o, a, l[c].sprite), h.push(l[c].sprite)); return h }, moveToObject: function(t, e, i, n) { void 0 === i && (i = 60), void 0 === n && (n = 0); var s = Math.atan2(e.y - t.y, e.x - t.x); return n > 0 && (i = this.distanceBetween(t, e) / (n / 1e3)), t.body.velocity.x = Math.cos(s) * i, t.body.velocity.y = Math.sin(s) * i, s }, moveToPointer: function(t, e, i, n) { void 0 === e && (e = 60), i = i || this.game.input.activePointer, void 0 === n && (n = 0); var s = this.angleToPointer(t, i); return n > 0 && (e = this.distanceToPointer(t, i) / (n / 1e3)), t.body.velocity.x = Math.cos(s) * e, t.body.velocity.y = Math.sin(s) * e, s }, moveToXY: function(t, e, i, n, s) { void 0 === n && (n = 60), void 0 === s && (s = 0); var o = Math.atan2(i - t.y, e - t.x); return s > 0 && (n = this.distanceToXY(t, e, i) / (s / 1e3)), t.body.velocity.x = Math.cos(o) * n, t.body.velocity.y = Math.sin(o) * n, o }, velocityFromAngle: function(t, e, n) { return void 0 === e && (e = 60), (n = n || new i.Point).setTo(Math.cos(this.game.math.degToRad(t)) * e, Math.sin(this.game.math.degToRad(t)) * e) }, velocityFromRotation: function(t, e, n) { return void 0 === e && (e = 60), (n = n || new i.Point).setTo(Math.cos(t) * e, Math.sin(t) * e) }, accelerationFromRotation: function(t, e, n) { return void 0 === e && (e = 60), (n = n || new i.Point).setTo(Math.cos(t) * e, Math.sin(t) * e) }, accelerateToObject: function(t, e, i, n, s) { void 0 === i && (i = 60), void 0 === n && (n = 1e3), void 0 === s && (s = 1e3); var o = this.angleBetween(t, e); return t.body.acceleration.setTo(Math.cos(o) * i, Math.sin(o) * i), t.body.maxVelocity.setTo(n, s), o }, accelerateToPointer: function(t, e, i, n, s) { void 0 === i && (i = 60), void 0 === e && (e = this.game.input.activePointer), void 0 === n && (n = 1e3), void 0 === s && (s = 1e3); var o = this.angleToPointer(t, e); return t.body.acceleration.setTo(Math.cos(o) * i, Math.sin(o) * i), t.body.maxVelocity.setTo(n, s), o }, accelerateToXY: function(t, e, i, n, s, o) { void 0 === n && (n = 60), void 0 === s && (s = 1e3), void 0 === o && (o = 1e3); var a = this.angleToXY(t, e, i); return t.body.acceleration.setTo(Math.cos(a) * n, Math.sin(a) * n), t.body.maxVelocity.setTo(s, o), a }, distanceBetween: function(t, e, i) { void 0 === i && (i = !1); var n = i ? t.world.x - e.world.x : t.x - e.x,
                    s = i ? t.world.y - e.world.y : t.y - e.y; return Math.sqrt(n * n + s * s) }, distanceToXY: function(t, e, i, n) { void 0 === n && (n = !1); var s = n ? t.world.x - e : t.x - e,
                    o = n ? t.world.y - i : t.y - i; return Math.sqrt(s * s + o * o) }, distanceToPointer: function(t, e, i) { void 0 === e && (e = this.game.input.activePointer), void 0 === i && (i = !1); var n = i ? t.world.x - e.worldX : t.x - e.worldX,
                    s = i ? t.world.y - e.worldY : t.y - e.worldY; return Math.sqrt(n * n + s * s) }, angleBetween: function(t, e, i) { return void 0 === i && (i = !1), i ? Math.atan2(e.world.y - t.world.y, e.world.x - t.world.x) : Math.atan2(e.y - t.y, e.x - t.x) }, angleBetweenCenters: function(t, e) { var i = e.centerX - t.centerX,
                    n = e.centerY - t.centerY; return Math.atan2(n, i) }, angleToXY: function(t, e, i, n) { return void 0 === n && (n = !1), n ? Math.atan2(i - t.world.y, e - t.world.x) : Math.atan2(i - t.y, e - t.x) }, angleToPointer: function(t, e, i) { return void 0 === e && (e = this.game.input.activePointer), void 0 === i && (i = !1), i ? Math.atan2(e.worldY - t.world.y, e.worldX - t.world.x) : Math.atan2(e.worldY - t.y, e.worldX - t.x) }, worldAngleToPointer: function(t, e) { return this.angleToPointer(t, e, !0) } }, i.Physics.Arcade.Body = function(t) { this.sprite = t, this.game = t.game, this.type = i.Physics.ARCADE, this.enable = !0, this.isCircle = !1, this.radius = 0, this.offset = new i.Point, this.position = new i.Point(t.x, t.y), this.prev = new i.Point(this.position.x, this.position.y), this.allowRotation = !0, this.rotation = t.angle, this.preRotation = t.angle, this.width = t.width, this.height = t.height, this.sourceWidth = t.width, this.sourceHeight = t.height, t.texture && (this.sourceWidth = t.texture.frame.width, this.sourceHeight = t.texture.frame.height), this.halfWidth = Math.abs(t.width / 2), this.halfHeight = Math.abs(t.height / 2), this.center = new i.Point(t.x + this.halfWidth, t.y + this.halfHeight), this.velocity = new i.Point, this.newVelocity = new i.Point, this.deltaMax = new i.Point, this.acceleration = new i.Point, this.drag = new i.Point, this.allowGravity = !0, this.gravity = new i.Point, this.bounce = new i.Point, this.worldBounce = null, this.onWorldBounds = null, this.onCollide = null, this.onOverlap = null, this.maxVelocity = new i.Point(1e4, 1e4), this.friction = new i.Point(1, 0), this.angularVelocity = 0, this.angularAcceleration = 0, this.angularDrag = 0, this.maxAngular = 1e3, this.mass = 1, this.angle = 0, this.speed = 0, this.facing = i.NONE, this.immovable = !1, this.moves = !0, this.customSeparateX = !1, this.customSeparateY = !1, this.overlapX = 0, this.overlapY = 0, this.overlapR = 0, this.embedded = !1, this.collideWorldBounds = !1, this.checkCollision = { none: !1, any: !0, up: !0, down: !0, left: !0, right: !0 }, this.touching = { none: !0, up: !1, down: !1, left: !1, right: !1 }, this.wasTouching = { none: !0, up: !1, down: !1, left: !1, right: !1 }, this.blocked = { up: !1, down: !1, left: !1, right: !1 }, this.tilePadding = new i.Point, this.dirty = !1, this.skipQuadTree = !1, this.syncBounds = !1, this.isMoving = !1, this.stopVelocityOnCollide = !0, this.moveTimer = 0, this.moveDistance = 0, this.moveDuration = 0, this.moveTarget = null, this.moveEnd = null, this.onMoveComplete = new i.Signal, this.movementCallback = null, this.movementCallbackContext = null, this._reset = !0, this._sx = t.scale.x, this._sy = t.scale.y, this._dx = 0, this._dy = 0 }, i.Physics.Arcade.Body.prototype = { updateBounds: function() { if (this.syncBounds) { var t = this.sprite.getBounds();
                    t.ceilAll(), t.width === this.width && t.height === this.height || (this.width = t.width, this.height = t.height, this._reset = !0) } else { var e = Math.abs(this.sprite.scale.x),
                        i = Math.abs(this.sprite.scale.y);
                    e === this._sx && i === this._sy || (this.width = this.sourceWidth * e, this.height = this.sourceHeight * i, this._sx = e, this._sy = i, this._reset = !0) } this._reset && (this.halfWidth = Math.floor(this.width / 2), this.halfHeight = Math.floor(this.height / 2), this.center.setTo(this.position.x + this.halfWidth, this.position.y + this.halfHeight)) }, preUpdate: function() { this.enable && !this.game.physics.arcade.isPaused && (this.dirty = !0, this.wasTouching.none = this.touching.none, this.wasTouching.up = this.touching.up, this.wasTouching.down = this.touching.down, this.wasTouching.left = this.touching.left, this.wasTouching.right = this.touching.right, this.touching.none = !0, this.touching.up = !1, this.touching.down = !1, this.touching.left = !1, this.touching.right = !1, this.blocked.up = !1, this.blocked.down = !1, this.blocked.left = !1, this.blocked.right = !1, this.embedded = !1, this.updateBounds(), this.position.x = this.sprite.world.x - this.sprite.anchor.x * this.sprite.width + this.sprite.scale.x * this.offset.x, this.position.x -= this.sprite.scale.x < 0 ? this.width : 0, this.position.y = this.sprite.world.y - this.sprite.anchor.y * this.sprite.height + this.sprite.scale.y * this.offset.y, this.position.y -= this.sprite.scale.y < 0 ? this.height : 0, this.rotation = this.sprite.angle, this.preRotation = this.rotation, (this._reset || this.sprite.fresh) && (this.prev.x = this.position.x, this.prev.y = this.position.y), this.moves && (this.game.physics.arcade.updateMotion(this), this.newVelocity.set(this.velocity.x * this.game.time.physicsElapsed, this.velocity.y * this.game.time.physicsElapsed), this.position.x += this.newVelocity.x, this.position.y += this.newVelocity.y, this.position.x === this.prev.x && this.position.y === this.prev.y || (this.angle = Math.atan2(this.velocity.y, this.velocity.x)), this.speed = Math.sqrt(this.velocity.x * this.velocity.x + this.velocity.y * this.velocity.y), this.collideWorldBounds && this.checkWorldBounds() && this.onWorldBounds && this.onWorldBounds.dispatch(this.sprite, this.blocked.up, this.blocked.down, this.blocked.left, this.blocked.right)), this._dx = this.deltaX(), this._dy = this.deltaY(), this._reset = !1) }, updateMovement: function() { var t = 0,
                    e = 0 !== this.overlapX || 0 !== this.overlapY; if (this.moveDuration > 0 ? (this.moveTimer += this.game.time.elapsedMS, t = this.moveTimer / this.moveDuration) : (this.moveTarget.end.set(this.position.x, this.position.y), t = this.moveTarget.length / this.moveDistance), this.movementCallback) var i = this.movementCallback.call(this.movementCallbackContext, this, this.velocity, t); return !(e || t >= 1 || void 0 !== i && !0 !== i) || (this.stopMovement(t >= 1 || this.stopVelocityOnCollide && e), !1) }, stopMovement: function(t) { this.isMoving && (this.isMoving = !1, t && this.velocity.set(0), this.onMoveComplete.dispatch(this.sprite, 0 !== this.overlapX || 0 !== this.overlapY)) }, postUpdate: function() { this.enable && this.dirty && (this.isMoving && this.updateMovement(), this.dirty = !1, this.deltaX() < 0 ? this.facing = i.LEFT : this.deltaX() > 0 && (this.facing = i.RIGHT), this.deltaY() < 0 ? this.facing = i.UP : this.deltaY() > 0 && (this.facing = i.DOWN), this.moves && (this._dx = this.deltaX(), this._dy = this.deltaY(), 0 !== this.deltaMax.x && 0 !== this._dx && (this._dx < 0 && this._dx < -this.deltaMax.x ? this._dx = -this.deltaMax.x : this._dx > 0 && this._dx > this.deltaMax.x && (this._dx = this.deltaMax.x)), 0 !== this.deltaMax.y && 0 !== this._dy && (this._dy < 0 && this._dy < -this.deltaMax.y ? this._dy = -this.deltaMax.y : this._dy > 0 && this._dy > this.deltaMax.y && (this._dy = this.deltaMax.y)), this.sprite.position.x += this._dx, this.sprite.position.y += this._dy, this._reset = !0), this.center.setTo(this.position.x + this.halfWidth, this.position.y + this.halfHeight), this.allowRotation && (this.sprite.angle += this.deltaZ()), this.prev.x = this.position.x, this.prev.y = this.position.y) }, checkWorldBounds: function() { var t = this.position,
                    e = this.game.physics.arcade.bounds,
                    i = this.game.physics.arcade.checkCollision,
                    n = this.worldBounce ? -this.worldBounce.x : -this.bounce.x,
                    s = this.worldBounce ? -this.worldBounce.y : -this.bounce.y; if (this.isCircle) { var o = { x: this.center.x - this.radius, y: this.center.y - this.radius, right: this.center.x + this.radius, bottom: this.center.y + this.radius };
                    o.x < e.x && i.left ? (t.x = e.x - this.halfWidth + this.radius, this.velocity.x *= n, this.blocked.left = !0) : o.right > e.right && i.right && (t.x = e.right - this.halfWidth - this.radius, this.velocity.x *= n, this.blocked.right = !0), o.y < e.y && i.up ? (t.y = e.y - this.halfHeight + this.radius, this.velocity.y *= s, this.blocked.up = !0) : o.bottom > e.bottom && i.down && (t.y = e.bottom - this.halfHeight - this.radius, this.velocity.y *= s, this.blocked.down = !0) } else t.x < e.x && i.left ? (t.x = e.x, this.velocity.x *= n, this.blocked.left = !0) : this.right > e.right && i.right && (t.x = e.right - this.width, this.velocity.x *= n, this.blocked.right = !0), t.y < e.y && i.up ? (t.y = e.y, this.velocity.y *= s, this.blocked.up = !0) : this.bottom > e.bottom && i.down && (t.y = e.bottom - this.height, this.velocity.y *= s, this.blocked.down = !0); return this.blocked.up || this.blocked.down || this.blocked.left || this.blocked.right }, moveFrom: function(t, e, i) { if (void 0 === e && (e = this.speed), 0 === e) return !1; var n; return void 0 === i ? (n = this.angle, i = this.game.math.radToDeg(n)) : n = this.game.math.degToRad(i), this.moveTimer = 0, this.moveDuration = t, 0 === i || 180 === i ? this.velocity.set(Math.cos(n) * e, 0) : 90 === i || 270 === i ? this.velocity.set(0, Math.sin(n) * e) : this.velocity.set(Math.cos(n) * e, Math.sin(n) * e), this.isMoving = !0, !0 }, moveTo: function(t, e, n) { var s = e / (t / 1e3); if (0 === s) return !1; var o; return void 0 === n ? (o = this.angle, n = this.game.math.radToDeg(o)) : o = this.game.math.degToRad(n), e = Math.abs(e), this.moveDuration = 0, this.moveDistance = e, null === this.moveTarget && (this.moveTarget = new i.Line, this.moveEnd = new i.Point), this.moveTarget.fromAngle(this.x, this.y, o, e), this.moveEnd.set(this.moveTarget.end.x, this.moveTarget.end.y), this.moveTarget.setTo(this.x, this.y, this.x, this.y), 0 === n || 180 === n ? this.velocity.set(Math.cos(o) * s, 0) : 90 === n || 270 === n ? this.velocity.set(0, Math.sin(o) * s) : this.velocity.set(Math.cos(o) * s, Math.sin(o) * s), this.isMoving = !0, !0 }, setSize: function(t, e, i, n) { void 0 === i && (i = this.offset.x), void 0 === n && (n = this.offset.y), this.sourceWidth = t, this.sourceHeight = e, this.width = this.sourceWidth * this._sx, this.height = this.sourceHeight * this._sy, this.halfWidth = Math.floor(this.width / 2), this.halfHeight = Math.floor(this.height / 2), this.offset.setTo(i, n), this.center.setTo(this.position.x + this.halfWidth, this.position.y + this.halfHeight), this.isCircle = !1, this.radius = 0 }, setCircle: function(t, e, i) { void 0 === e && (e = this.offset.x), void 0 === i && (i = this.offset.y), t > 0 ? (this.isCircle = !0, this.radius = t, this.sourceWidth = 2 * t, this.sourceHeight = 2 * t, this.width = this.sourceWidth * this._sx, this.height = this.sourceHeight * this._sy, this.halfWidth = Math.floor(this.width / 2), this.halfHeight = Math.floor(this.height / 2), this.offset.setTo(e, i), this.center.setTo(this.position.x + this.halfWidth, this.position.y + this.halfHeight)) : this.isCircle = !1 }, reset: function(t, e) { this.velocity.set(0), this.acceleration.set(0), this.speed = 0, this.angularVelocity = 0, this.angularAcceleration = 0, this.position.x = t - this.sprite.anchor.x * this.sprite.width + this.sprite.scale.x * this.offset.x, this.position.x -= this.sprite.scale.x < 0 ? this.width : 0, this.position.y = e - this.sprite.anchor.y * this.sprite.height + this.sprite.scale.y * this.offset.y, this.position.y -= this.sprite.scale.y < 0 ? this.height : 0, this.prev.x = this.position.x, this.prev.y = this.position.y, this.rotation = this.sprite.angle, this.preRotation = this.rotation, this._sx = this.sprite.scale.x, this._sy = this.sprite.scale.y, this.center.setTo(this.position.x + this.halfWidth, this.position.y + this.halfHeight) }, getBounds: function(t) { return this.isCircle ? (t.x = this.center.x - this.radius, t.y = this.center.y - this.radius, t.right = this.center.x + this.radius, t.bottom = this.center.y + this.radius) : (t.x = this.x, t.y = this.y, t.right = this.right, t.bottom = this.bottom), t }, hitTest: function(t, e) { return this.isCircle ? i.Circle.contains(this, t, e) : i.Rectangle.contains(this, t, e) }, onFloor: function() { return this.blocked.down }, onCeiling: function() { return this.blocked.up }, onWall: function() { return this.blocked.left || this.blocked.right }, deltaAbsX: function() { return this.deltaX() > 0 ? this.deltaX() : -this.deltaX() }, deltaAbsY: function() { return this.deltaY() > 0 ? this.deltaY() : -this.deltaY() }, deltaX: function() { return this.position.x - this.prev.x }, deltaY: function() { return this.position.y - this.prev.y }, deltaZ: function() { return this.rotation - this.preRotation }, destroy: function() { this.sprite.parent && this.sprite.parent instanceof i.Group && this.sprite.parent.removeFromHash(this.sprite), this.sprite.body = null, this.sprite = null } }, Object.defineProperty(i.Physics.Arcade.Body.prototype, "left", { get: function() { return this.position.x } }), Object.defineProperty(i.Physics.Arcade.Body.prototype, "right", { get: function() { return this.position.x + this.width } }), Object.defineProperty(i.Physics.Arcade.Body.prototype, "top", { get: function() { return this.position.y } }), Object.defineProperty(i.Physics.Arcade.Body.prototype, "bottom", { get: function() { return this.position.y + this.height } }), Object.defineProperty(i.Physics.Arcade.Body.prototype, "x", { get: function() { return this.position.x }, set: function(t) { this.position.x = t } }), Object.defineProperty(i.Physics.Arcade.Body.prototype, "y", { get: function() { return this.position.y }, set: function(t) { this.position.y = t } }), i.Physics.Arcade.Body.render = function(t, e, i, n) { void 0 === n && (n = !0), i = i || "rgba(0,255,0,0.4)", t.fillStyle = i, t.strokeStyle = i, e.isCircle ? (t.beginPath(), t.arc(e.center.x - e.game.camera.x, e.center.y - e.game.camera.y, e.radius, 0, 2 * Math.PI), n ? t.fill() : t.stroke()) : n ? t.fillRect(e.position.x - e.game.camera.x, e.position.y - e.game.camera.y, e.width, e.height) : t.strokeRect(e.position.x - e.game.camera.x, e.position.y - e.game.camera.y, e.width, e.height) }, i.Physics.Arcade.Body.renderBodyInfo = function(t, e) { t.line("x: " + e.x.toFixed(2), "y: " + e.y.toFixed(2), "width: " + e.width, "height: " + e.height), t.line("velocity x: " + e.velocity.x.toFixed(2), "y: " + e.velocity.y.toFixed(2), "deltaX: " + e._dx.toFixed(2), "deltaY: " + e._dy.toFixed(2)), t.line("acceleration x: " + e.acceleration.x.toFixed(2), "y: " + e.acceleration.y.toFixed(2), "speed: " + e.speed.toFixed(2), "angle: " + e.angle.toFixed(2)), t.line("gravity x: " + e.gravity.x, "y: " + e.gravity.y, "bounce x: " + e.bounce.x.toFixed(2), "y: " + e.bounce.y.toFixed(2)), t.line("touching left: " + e.touching.left, "right: " + e.touching.right, "up: " + e.touching.up, "down: " + e.touching.down), t.line("blocked left: " + e.blocked.left, "right: " + e.blocked.right, "up: " + e.blocked.up, "down: " + e.blocked.down) }, i.Physics.Arcade.Body.prototype.constructor = i.Physics.Arcade.Body, i.Physics.Arcade.TilemapCollision = function() {}, i.Physics.Arcade.TilemapCollision.prototype = { TILE_BIAS: 16, collideSpriteVsTilemapLayer: function(t, e, i, n, s, o) { if (t.body) { var a = e.getTiles(t.body.position.x - t.body.tilePadding.x, t.body.position.y - t.body.tilePadding.y, t.body.width + t.body.tilePadding.x, t.body.height + t.body.tilePadding.y, !1, !1); if (0 !== a.length)
                        for (var r = 0; r < a.length; r++) n ? n.call(s, t, a[r]) && this.separateTile(r, t.body, a[r], e, o) && (this._total++, i && i.call(s, t, a[r])) : this.separateTile(r, t.body, a[r], e, o) && (this._total++, i && i.call(s, t, a[r])) } }, collideGroupVsTilemapLayer: function(t, e, i, n, s, o) { if (0 !== t.length)
                    for (var a = 0; a < t.children.length; a++) t.children[a].exists && this.collideSpriteVsTilemapLayer(t.children[a], e, i, n, s, o) }, separateTile: function(t, e, i, n, s) { if (!e.enable) return !1; var o = n.fixedToCamera ? 0 : n.position.x,
                    a = n.fixedToCamera ? 0 : n.position.y; if (!i.intersects(e.position.x - o, e.position.y - a, e.right - o, e.bottom - a)) return !1; if (s) return !0; if (i.collisionCallback && !i.collisionCallback.call(i.collisionCallbackContext, e.sprite, i)) return !1; if (void 0 !== i.layer.callbacks && i.layer.callbacks[i.index] && !i.layer.callbacks[i.index].callback.call(i.layer.callbacks[i.index].callbackContext, e.sprite, i)) return !1; if (!(i.faceLeft || i.faceRight || i.faceTop || i.faceBottom)) return !1; var r = 0,
                    h = 0,
                    l = 0,
                    c = 1; if (e.deltaAbsX() > e.deltaAbsY() ? l = -1 : e.deltaAbsX() < e.deltaAbsY() && (c = -1), 0 !== e.deltaX() && 0 !== e.deltaY() && (i.faceLeft || i.faceRight) && (i.faceTop || i.faceBottom) && (l = Math.min(Math.abs(e.position.x - o - i.right), Math.abs(e.right - o - i.left)), c = Math.min(Math.abs(e.position.y - a - i.bottom), Math.abs(e.bottom - a - i.top))), l < c) { if ((i.faceLeft || i.faceRight) && 0 !== (r = this.tileCheckX(e, i, n)) && !i.intersects(e.position.x - o, e.position.y - a, e.right - o, e.bottom - a)) return !0;
                    (i.faceTop || i.faceBottom) && (h = this.tileCheckY(e, i, n)) } else { if ((i.faceTop || i.faceBottom) && 0 !== (h = this.tileCheckY(e, i, n)) && !i.intersects(e.position.x - o, e.position.y - a, e.right - o, e.bottom - a)) return !0;
                    (i.faceLeft || i.faceRight) && (r = this.tileCheckX(e, i, n)) } return 0 !== r || 0 !== h }, tileCheckX: function(t, e, i) { var n = 0,
                    s = i.fixedToCamera ? 0 : i.position.x; return t.deltaX() < 0 && !t.blocked.left && e.collideRight && t.checkCollision.left ? e.faceRight && t.x - s < e.right && (n = t.x - s - e.right) < -this.TILE_BIAS && (n = 0) : t.deltaX() > 0 && !t.blocked.right && e.collideLeft && t.checkCollision.right && e.faceLeft && t.right - s > e.left && (n = t.right - s - e.left) > this.TILE_BIAS && (n = 0), 0 !== n && (t.customSeparateX ? t.overlapX = n : this.processTileSeparationX(t, n)), n }, tileCheckY: function(t, e, i) { var n = 0,
                    s = i.fixedToCamera ? 0 : i.position.y; return t.deltaY() < 0 && !t.blocked.up && e.collideDown && t.checkCollision.up ? e.faceBottom && t.y - s < e.bottom && (n = t.y - s - e.bottom) < -this.TILE_BIAS && (n = 0) : t.deltaY() > 0 && !t.blocked.down && e.collideUp && t.checkCollision.down && e.faceTop && t.bottom - s > e.top && (n = t.bottom - s - e.top) > this.TILE_BIAS && (n = 0), 0 !== n && (t.customSeparateY ? t.overlapY = n : this.processTileSeparationY(t, n)), n }, processTileSeparationX: function(t, e) { e < 0 ? t.blocked.left = !0 : e > 0 && (t.blocked.right = !0), t.position.x -= e, 0 === t.bounce.x ? t.velocity.x = 0 : t.velocity.x = -t.velocity.x * t.bounce.x }, processTileSeparationY: function(t, e) { e < 0 ? t.blocked.up = !0 : e > 0 && (t.blocked.down = !0), t.position.y -= e, 0 === t.bounce.y ? t.velocity.y = 0 : t.velocity.y = -t.velocity.y * t.bounce.y } }, i.Utils.mixinPrototype(i.Physics.Arcade.prototype, i.Physics.Arcade.TilemapCollision.prototype), p2.Body.prototype.parent = null, p2.Spring.prototype.parent = null, i.Physics.P2 = function(t, e) { this.game = t, void 0 === e ? e = { gravity: [0, 0], broadphase: new p2.SAPBroadphase } : (e.hasOwnProperty("gravity") || (e.gravity = [0, 0]), e.hasOwnProperty("broadphase") || (e.broadphase = new p2.SAPBroadphase)), this.config = e, this.world = new p2.World(this.config), this.frameRate = 1 / 60, this.useElapsedTime = !1, this.paused = !1, this.materials = [], this.gravity = new i.Physics.P2.InversePointProxy(this, this.world.gravity), this.walls = { left: null, right: null, top: null, bottom: null }, this.onBodyAdded = new i.Signal, this.onBodyRemoved = new i.Signal, this.onSpringAdded = new i.Signal, this.onSpringRemoved = new i.Signal, this.onConstraintAdded = new i.Signal, this.onConstraintRemoved = new i.Signal, this.onContactMaterialAdded = new i.Signal, this.onContactMaterialRemoved = new i.Signal, this.postBroadphaseCallback = null, this.callbackContext = null, this.onBeginContact = new i.Signal, this.onEndContact = new i.Signal, e.hasOwnProperty("mpx") && e.hasOwnProperty("pxm") && e.hasOwnProperty("mpxi") && e.hasOwnProperty("pxmi") && (this.mpx = e.mpx, this.mpxi = e.mpxi, this.pxm = e.pxm, this.pxmi = e.pxmi), this.world.on("beginContact", this.beginContactHandler, this), this.world.on("endContact", this.endContactHandler, this), this.collisionGroups = [], this.nothingCollisionGroup = new i.Physics.P2.CollisionGroup(1), this.boundsCollisionGroup = new i.Physics.P2.CollisionGroup(2), this.everythingCollisionGroup = new i.Physics.P2.CollisionGroup(2147483648), this.boundsCollidesWith = [], this._toRemove = [], this._collisionGroupID = 2, this._boundsLeft = !0, this._boundsRight = !0, this._boundsTop = !0, this._boundsBottom = !0, this._boundsOwnGroup = !1, this.setBoundsToWorld(!0, !0, !0, !0, !1) }, i.Physics.P2.prototype = { removeBodyNextStep: function(t) { this._toRemove.push(t) }, preUpdate: function() { for (var t = this._toRemove.length; t--;) this.removeBody(this._toRemove[t]);
                this._toRemove.length = 0 }, enable: function(t, e, n) { void 0 === e && (e = !1), void 0 === n && (n = !0); var s = 1; if (Array.isArray(t))
                    for (s = t.length; s--;) t[s] instanceof i.Group ? this.enable(t[s].children, e, n) : (this.enableBody(t[s], e), n && t[s].hasOwnProperty("children") && t[s].children.length > 0 && this.enable(t[s], e, !0));
                else t instanceof i.Group ? this.enable(t.children, e, n) : (this.enableBody(t, e), n && t.hasOwnProperty("children") && t.children.length > 0 && this.enable(t.children, e, !0)) }, enableBody: function(t, e) { t.hasOwnProperty("body") && null === t.body && (t.body = new i.Physics.P2.Body(this.game, t, t.x, t.y, 1), t.body.debug = e, void 0 !== t.anchor && t.anchor.set(.5)) }, setImpactEvents: function(t) { t ? this.world.on("impact", this.impactHandler, this) : this.world.off("impact", this.impactHandler, this) }, setPostBroadphaseCallback: function(t, e) { this.postBroadphaseCallback = t, this.callbackContext = e, null !== t ? this.world.on("postBroadphase", this.postBroadphaseHandler, this) : this.world.off("postBroadphase", this.postBroadphaseHandler, this) }, postBroadphaseHandler: function(t) { if (this.postBroadphaseCallback && 0 !== t.pairs.length)
                    for (var e = t.pairs.length - 2; e >= 0; e -= 2) t.pairs[e].parent && t.pairs[e + 1].parent && !this.postBroadphaseCallback.call(this.callbackContext, t.pairs[e].parent, t.pairs[e + 1].parent) && t.pairs.splice(e, 2) }, impactHandler: function(t) { if (t.bodyA.parent && t.bodyB.parent) { var e = t.bodyA.parent,
                        i = t.bodyB.parent;
                    e._bodyCallbacks[t.bodyB.id] && e._bodyCallbacks[t.bodyB.id].call(e._bodyCallbackContext[t.bodyB.id], e, i, t.shapeA, t.shapeB), i._bodyCallbacks[t.bodyA.id] && i._bodyCallbacks[t.bodyA.id].call(i._bodyCallbackContext[t.bodyA.id], i, e, t.shapeB, t.shapeA), e._groupCallbacks[t.shapeB.collisionGroup] && e._groupCallbacks[t.shapeB.collisionGroup].call(e._groupCallbackContext[t.shapeB.collisionGroup], e, i, t.shapeA, t.shapeB), i._groupCallbacks[t.shapeA.collisionGroup] && i._groupCallbacks[t.shapeA.collisionGroup].call(i._groupCallbackContext[t.shapeA.collisionGroup], i, e, t.shapeB, t.shapeA) } }, beginContactHandler: function(t) { t.bodyA && t.bodyB && (this.onBeginContact.dispatch(t.bodyA, t.bodyB, t.shapeA, t.shapeB, t.contactEquations), t.bodyA.parent && t.bodyA.parent.onBeginContact.dispatch(t.bodyB.parent, t.bodyB, t.shapeA, t.shapeB, t.contactEquations), t.bodyB.parent && t.bodyB.parent.onBeginContact.dispatch(t.bodyA.parent, t.bodyA, t.shapeB, t.shapeA, t.contactEquations)) }, endContactHandler: function(t) { t.bodyA && t.bodyB && (this.onEndContact.dispatch(t.bodyA, t.bodyB, t.shapeA, t.shapeB), t.bodyA.parent && t.bodyA.parent.onEndContact.dispatch(t.bodyB.parent, t.bodyB, t.shapeA, t.shapeB), t.bodyB.parent && t.bodyB.parent.onEndContact.dispatch(t.bodyA.parent, t.bodyA, t.shapeB, t.shapeA)) }, setBoundsToWorld: function(t, e, i, n, s) { this.setBounds(this.game.world.bounds.x, this.game.world.bounds.y, this.game.world.bounds.width, this.game.world.bounds.height, t, e, i, n, s) }, setWorldMaterial: function(t, e, i, n, s) { void 0 === e && (e = !0), void 0 === i && (i = !0), void 0 === n && (n = !0), void 0 === s && (s = !0), e && this.walls.left && (this.walls.left.shapes[0].material = t), i && this.walls.right && (this.walls.right.shapes[0].material = t), n && this.walls.top && (this.walls.top.shapes[0].material = t), s && this.walls.bottom && (this.walls.bottom.shapes[0].material = t) }, updateBoundsCollisionGroup: function(t) { void 0 === t && (t = !0); var e = t ? this.boundsCollisionGroup.mask : this.everythingCollisionGroup.mask;
                this.walls.left && (this.walls.left.shapes[0].collisionGroup = e), this.walls.right && (this.walls.right.shapes[0].collisionGroup = e), this.walls.top && (this.walls.top.shapes[0].collisionGroup = e), this.walls.bottom && (this.walls.bottom.shapes[0].collisionGroup = e), this._boundsOwnGroup = t }, setBounds: function(t, e, i, n, s, o, a, r, h) { void 0 === s && (s = this._boundsLeft), void 0 === o && (o = this._boundsRight), void 0 === a && (a = this._boundsTop), void 0 === r && (r = this._boundsBottom), void 0 === h && (h = this._boundsOwnGroup), this.setupWall(s, "left", t, e, 1.5707963267948966, h), this.setupWall(o, "right", t + i, e, -1.5707963267948966, h), this.setupWall(a, "top", t, e, -3.141592653589793, h), this.setupWall(r, "bottom", t, e + n, 0, h), this._boundsLeft = s, this._boundsRight = o, this._boundsTop = a, this._boundsBottom = r, this._boundsOwnGroup = h }, setupWall: function(t, e, i, n, s, o) { t ? (this.walls[e] ? this.walls[e].position = [this.pxmi(i), this.pxmi(n)] : (this.walls[e] = new p2.Body({ mass: 0, position: [this.pxmi(i), this.pxmi(n)], angle: s }), this.walls[e].addShape(new p2.Plane), this.world.addBody(this.walls[e])), o && (this.walls[e].shapes[0].collisionGroup = this.boundsCollisionGroup.mask)) : this.walls[e] && (this.world.removeBody(this.walls[e]), this.walls[e] = null) }, pause: function() { this.paused = !0 }, resume: function() { this.paused = !1 }, update: function() { this.paused || (this.useElapsedTime ? this.world.step(this.game.time.physicsElapsed) : this.world.step(this.frameRate)) }, reset: function() { this.world.on("beginContact", this.beginContactHandler, this), this.world.on("endContact", this.endContactHandler, this), this.nothingCollisionGroup = new i.Physics.P2.CollisionGroup(1), this.boundsCollisionGroup = new i.Physics.P2.CollisionGroup(2), this.everythingCollisionGroup = new i.Physics.P2.CollisionGroup(2147483648), this._collisionGroupID = 2, this.setBoundsToWorld(!0, !0, !0, !0, !1) }, clear: function() { this.world.time = 0, this.world.fixedStepTime = 0, this.world.solver && this.world.solver.equations.length && this.world.solver.removeAllEquations(); for (var t = this.world.constraints, e = t.length - 1; e >= 0; e--) this.world.removeConstraint(t[e]); for (var i = this.world.bodies, e = i.length - 1; e >= 0; e--) this.world.removeBody(i[e]); for (var n = this.world.springs, e = n.length - 1; e >= 0; e--) this.world.removeSpring(n[e]); for (var s = this.world.contactMaterials, e = s.length - 1; e >= 0; e--) this.world.removeContactMaterial(s[e]);
                this.world.off("beginContact", this.beginContactHandler, this), this.world.off("endContact", this.endContactHandler, this), this.postBroadphaseCallback = null, this.callbackContext = null, this.impactCallback = null, this.collisionGroups = [], this._toRemove = [], this.boundsCollidesWith = [], this.walls = { left: null, right: null, top: null, bottom: null } }, destroy: function() { this.clear(), this.game = null }, addBody: function(t) { return !t.data.world && (this.world.addBody(t.data), this.onBodyAdded.dispatch(t), !0) }, removeBody: function(t) { return t.data.world === this.world && (this.world.removeBody(t.data), this.onBodyRemoved.dispatch(t)), t }, addSpring: function(t) { return t instanceof i.Physics.P2.Spring || t instanceof i.Physics.P2.RotationalSpring ? this.world.addSpring(t.data) : this.world.addSpring(t), this.onSpringAdded.dispatch(t), t }, removeSpring: function(t) { return t instanceof i.Physics.P2.Spring || t instanceof i.Physics.P2.RotationalSpring ? this.world.removeSpring(t.data) : this.world.removeSpring(t), this.onSpringRemoved.dispatch(t), t }, createDistanceConstraint: function(t, e, n, s, o, a) { if (t = this.getBody(t), e = this.getBody(e), t && e) return this.addConstraint(new i.Physics.P2.DistanceConstraint(this, t, e, n, s, o, a));
                console.warn("Cannot create Constraint, invalid body objects given") }, createGearConstraint: function(t, e, n, s) { if (t = this.getBody(t), e = this.getBody(e), t && e) return this.addConstraint(new i.Physics.P2.GearConstraint(this, t, e, n, s));
                console.warn("Cannot create Constraint, invalid body objects given") }, createRevoluteConstraint: function(t, e, n, s, o, a) { if (t = this.getBody(t), n = this.getBody(n), t && n) return this.addConstraint(new i.Physics.P2.RevoluteConstraint(this, t, e, n, s, o, a));
                console.warn("Cannot create Constraint, invalid body objects given") }, createLockConstraint: function(t, e, n, s, o) { if (t = this.getBody(t), e = this.getBody(e), t && e) return this.addConstraint(new i.Physics.P2.LockConstraint(this, t, e, n, s, o));
                console.warn("Cannot create Constraint, invalid body objects given") }, createPrismaticConstraint: function(t, e, n, s, o, a, r) { if (t = this.getBody(t), e = this.getBody(e), t && e) return this.addConstraint(new i.Physics.P2.PrismaticConstraint(this, t, e, n, s, o, a, r));
                console.warn("Cannot create Constraint, invalid body objects given") }, addConstraint: function(t) { return this.world.addConstraint(t), this.onConstraintAdded.dispatch(t), t }, removeConstraint: function(t) { return this.world.removeConstraint(t), this.onConstraintRemoved.dispatch(t), t }, addContactMaterial: function(t) { return this.world.addContactMaterial(t), this.onContactMaterialAdded.dispatch(t), t }, removeContactMaterial: function(t) { return this.world.removeContactMaterial(t), this.onContactMaterialRemoved.dispatch(t), t }, getContactMaterial: function(t, e) { return this.world.getContactMaterial(t, e) }, setMaterial: function(t, e) { for (var i = e.length; i--;) e[i].setMaterial(t) }, createMaterial: function(t, e) { t = t || ""; var n = new i.Physics.P2.Material(t); return this.materials.push(n), void 0 !== e && e.setMaterial(n), n }, createContactMaterial: function(t, e, n) { void 0 === t && (t = this.createMaterial()), void 0 === e && (e = this.createMaterial()); var s = new i.Physics.P2.ContactMaterial(t, e, n); return this.addContactMaterial(s) }, getBodies: function() { for (var t = [], e = this.world.bodies.length; e--;) t.push(this.world.bodies[e].parent); return t }, getBody: function(t) { return t instanceof p2.Body ? t : t instanceof i.Physics.P2.Body ? t.data : t.body && t.body.type === i.Physics.P2JS ? t.body.data : null }, getSprings: function() { for (var t = [], e = this.world.springs.length; e--;) t.push(this.world.springs[e].parent); return t }, getConstraints: function() { for (var t = [], e = this.world.constraints.length; e--;) t.push(this.world.constraints[e]); return t }, hitTest: function(t, e, n, s) { void 0 === e && (e = this.world.bodies), void 0 === n && (n = 5), void 0 === s && (s = !1); for (var o = [this.pxmi(t.x), this.pxmi(t.y)], a = [], r = e.length; r--;) e[r] instanceof i.Physics.P2.Body && (!s || e[r].data.type !== p2.Body.STATIC) ? a.push(e[r].data) : e[r] instanceof p2.Body && e[r].parent && (!s || e[r].type !== p2.Body.STATIC) ? a.push(e[r]) : e[r] instanceof i.Sprite && e[r].hasOwnProperty("body") && (!s || e[r].body.data.type !== p2.Body.STATIC) && a.push(e[r].body.data); return this.world.hitTest(o, a, n) }, toJSON: function() { return this.world.toJSON() }, createCollisionGroup: function(t) { var e = Math.pow(2, this._collisionGroupID);
                this.walls.left && (this.walls.left.shapes[0].collisionMask = this.walls.left.shapes[0].collisionMask | e), this.walls.right && (this.walls.right.shapes[0].collisionMask = this.walls.right.shapes[0].collisionMask | e), this.walls.top && (this.walls.top.shapes[0].collisionMask = this.walls.top.shapes[0].collisionMask | e), this.walls.bottom && (this.walls.bottom.shapes[0].collisionMask = this.walls.bottom.shapes[0].collisionMask | e), this._collisionGroupID++; var n = new i.Physics.P2.CollisionGroup(e); return this.collisionGroups.push(n), t && this.setCollisionGroup(t, n), n }, setCollisionGroup: function(t, e) { if (t instanceof i.Group)
                    for (var n = 0; n < t.total; n++) t.children[n].body && t.children[n].body.type === i.Physics.P2JS && t.children[n].body.setCollisionGroup(e);
                else t.body.setCollisionGroup(e) }, createSpring: function(t, e, n, s, o, a, r, h, l) { if (t = this.getBody(t), e = this.getBody(e), t && e) return this.addSpring(new i.Physics.P2.Spring(this, t, e, n, s, o, a, r, h, l));
                console.warn("Cannot create Spring, invalid body objects given") }, createRotationalSpring: function(t, e, n, s, o) { if (t = this.getBody(t), e = this.getBody(e), t && e) return this.addSpring(new i.Physics.P2.RotationalSpring(this, t, e, n, s, o));
                console.warn("Cannot create Rotational Spring, invalid body objects given") }, createBody: function(t, e, n, s, o, a) { void 0 === s && (s = !1); var r = new i.Physics.P2.Body(this.game, null, t, e, n); return !(a && !r.addPolygon(o, a)) && (s && this.world.addBody(r.data), r) }, createParticle: function(t, e, n, s, o, a) { void 0 === s && (s = !1); var r = new i.Physics.P2.Body(this.game, null, t, e, n); return !(a && !r.addPolygon(o, a)) && (s && this.world.addBody(r.data), r) }, convertCollisionObjects: function(t, e, i) { void 0 === i && (i = !0); for (var n = [], s = 0, o = t.collision[e].length; s < o; s++) { var a = t.collision[e][s],
                        r = this.createBody(a.x, a.y, 0, i, {}, a.polyline);
                    r && n.push(r) } return n }, clearTilemapLayerBodies: function(t, e) { e = t.getLayer(e); for (var i = t.layers[e].bodies.length; i--;) t.layers[e].bodies[i].destroy();
                t.layers[e].bodies.length = 0 }, convertTilemap: function(t, e, i, n) { e = t.getLayer(e), void 0 === i && (i = !0), void 0 === n && (n = !0), this.clearTilemapLayerBodies(t, e); for (var s = 0, o = 0, a = 0, r = 0, h = t.layers[e].height; r < h; r++) { s = 0; for (var l = 0, c = t.layers[e].width; l < c; l++) { var u = t.layers[e].data[r][l]; if (u && u.index > -1 && u.collides)
                            if (n) { var p = t.getTileRight(e, l, r);
                                0 === s && (o = u.x * u.width, a = u.y * u.height, s = u.width), p && p.collides ? s += u.width : ((d = this.createBody(o, a, 0, !1)).addRectangle(s, u.height, s / 2, u.height / 2, 0), i && this.addBody(d), t.layers[e].bodies.push(d), s = 0) } else { var d = this.createBody(u.x * u.width, u.y * u.height, 0, !1);
                                d.addRectangle(u.width, u.height, u.width / 2, u.height / 2, 0), i && this.addBody(d), t.layers[e].bodies.push(d) } } } return t.layers[e].bodies }, mpx: function(t) { return t *= 20 }, pxm: function(t) { return .05 * t }, mpxi: function(t) { return t *= -20 }, pxmi: function(t) { return -.05 * t } }, Object.defineProperty(i.Physics.P2.prototype, "friction", { get: function() { return this.world.defaultContactMaterial.friction }, set: function(t) { this.world.defaultContactMaterial.friction = t } }), Object.defineProperty(i.Physics.P2.prototype, "restitution", { get: function() { return this.world.defaultContactMaterial.restitution }, set: function(t) { this.world.defaultContactMaterial.restitution = t } }), Object.defineProperty(i.Physics.P2.prototype, "contactMaterial", { get: function() { return this.world.defaultContactMaterial }, set: function(t) { this.world.defaultContactMaterial = t } }), Object.defineProperty(i.Physics.P2.prototype, "applySpringForces", { get: function() { return this.world.applySpringForces }, set: function(t) { this.world.applySpringForces = t } }), Object.defineProperty(i.Physics.P2.prototype, "applyDamping", { get: function() { return this.world.applyDamping }, set: function(t) { this.world.applyDamping = t } }), Object.defineProperty(i.Physics.P2.prototype, "applyGravity", { get: function() { return this.world.applyGravity }, set: function(t) { this.world.applyGravity = t } }), Object.defineProperty(i.Physics.P2.prototype, "solveConstraints", { get: function() { return this.world.solveConstraints }, set: function(t) { this.world.solveConstraints = t } }), Object.defineProperty(i.Physics.P2.prototype, "time", { get: function() { return this.world.time } }), Object.defineProperty(i.Physics.P2.prototype, "emitImpactEvent", { get: function() { return this.world.emitImpactEvent }, set: function(t) { this.world.emitImpactEvent = t } }), Object.defineProperty(i.Physics.P2.prototype, "sleepMode", { get: function() { return this.world.sleepMode }, set: function(t) { this.world.sleepMode = t } }), Object.defineProperty(i.Physics.P2.prototype, "total", { get: function() { return this.world.bodies.length } }), i.Physics.P2.FixtureList = function(t) { Array.isArray(t) || (t = [t]), this.rawList = t, this.init(), this.parse(this.rawList) }, i.Physics.P2.FixtureList.prototype = { init: function() { this.namedFixtures = {}, this.groupedFixtures = [], this.allFixtures = [] }, setCategory: function(t, e) { this.getFixtures(e).forEach(function(e) { e.collisionGroup = t }) }, setMask: function(t, e) { this.getFixtures(e).forEach(function(e) { e.collisionMask = t }) }, setSensor: function(t, e) { this.getFixtures(e).forEach(function(e) { e.sensor = t }) }, setMaterial: function(t, e) { this.getFixtures(e).forEach(function(e) { e.material = t }) }, getFixtures: function(t) { var e = []; if (t) { t instanceof Array || (t = [t]); var i = this; return t.forEach(function(t) { i.namedFixtures[t] && e.push(i.namedFixtures[t]) }), this.flatten(e) } return this.allFixtures }, getFixtureByKey: function(t) { return this.namedFixtures[t] }, getGroup: function(t) { return this.groupedFixtures[t] }, parse: function() { var t, e, i, n;
                i = this.rawList, n = []; for (t in i) e = i[t], isNaN(t - 0) ? this.namedFixtures[t] = this.flatten(e) : (this.groupedFixtures[t] = this.groupedFixtures[t] || [], this.groupedFixtures[t] = this.groupedFixtures[t].concat(e)), n.push(this.allFixtures = this.flatten(this.groupedFixtures)) }, flatten: function(t) { var e, i; return e = [], i = arguments.callee, t.forEach(function(t) { return Array.prototype.push.apply(e, Array.isArray(t) ? i(t) : [t]) }), e } }, i.Physics.P2.PointProxy = function(t, e) { this.world = t, this.destination = e }, i.Physics.P2.PointProxy.prototype.constructor = i.Physics.P2.PointProxy, Object.defineProperty(i.Physics.P2.PointProxy.prototype, "x", { get: function() { return this.world.mpx(this.destination[0]) }, set: function(t) { this.destination[0] = this.world.pxm(t) } }), Object.defineProperty(i.Physics.P2.PointProxy.prototype, "y", { get: function() { return this.world.mpx(this.destination[1]) }, set: function(t) { this.destination[1] = this.world.pxm(t) } }), Object.defineProperty(i.Physics.P2.PointProxy.prototype, "mx", { get: function() { return this.destination[0] }, set: function(t) { this.destination[0] = t } }), Object.defineProperty(i.Physics.P2.PointProxy.prototype, "my", { get: function() { return this.destination[1] }, set: function(t) { this.destination[1] = t } }), i.Physics.P2.InversePointProxy = function(t, e) { this.world = t, this.destination = e }, i.Physics.P2.InversePointProxy.prototype.constructor = i.Physics.P2.InversePointProxy, Object.defineProperty(i.Physics.P2.InversePointProxy.prototype, "x", { get: function() { return this.world.mpxi(this.destination[0]) }, set: function(t) { this.destination[0] = this.world.pxmi(t) } }), Object.defineProperty(i.Physics.P2.InversePointProxy.prototype, "y", { get: function() { return this.world.mpxi(this.destination[1]) }, set: function(t) { this.destination[1] = this.world.pxmi(t) } }), Object.defineProperty(i.Physics.P2.InversePointProxy.prototype, "mx", { get: function() { return this.destination[0] }, set: function(t) { this.destination[0] = -t } }), Object.defineProperty(i.Physics.P2.InversePointProxy.prototype, "my", { get: function() { return this.destination[1] }, set: function(t) { this.destination[1] = -t } }), i.Physics.P2.Body = function(t, e, n, s, o) { e = e || null, n = n || 0, s = s || 0, void 0 === o && (o = 1), this.game = t, this.world = t.physics.p2, this.sprite = e, this.type = i.Physics.P2JS, this.offset = new i.Point, this.data = new p2.Body({ position: [this.world.pxmi(n), this.world.pxmi(s)], mass: o }), this.data.parent = this, this.velocity = new i.Physics.P2.InversePointProxy(this.world, this.data.velocity), this.force = new i.Physics.P2.InversePointProxy(this.world, this.data.force), this.gravity = new i.Point, this.onBeginContact = new i.Signal, this.onEndContact = new i.Signal, this.collidesWith = [], this.removeNextStep = !1, this.debugBody = null, this.dirty = !1, this._collideWorldBounds = !0, this._bodyCallbacks = {}, this._bodyCallbackContext = {}, this._groupCallbacks = {}, this._groupCallbackContext = {}, this._reset = !1, e && (this.setRectangleFromSprite(e), e.exists && this.game.physics.p2.addBody(this)) }, i.Physics.P2.Body.prototype = { createBodyCallback: function(t, e, i) { var n = -1;
                t.id ? n = t.id : t.body && (n = t.body.id), n > -1 && (null === e ? (delete this._bodyCallbacks[n], delete this._bodyCallbackContext[n]) : (this._bodyCallbacks[n] = e, this._bodyCallbackContext[n] = i)) }, createGroupCallback: function(t, e, i) { null === e ? (delete this._groupCallbacks[t.mask], delete this._groupCallbackContext[t.mask]) : (this._groupCallbacks[t.mask] = e, this._groupCallbackContext[t.mask] = i) }, getCollisionMask: function() { var t = 0;
                this._collideWorldBounds && (t = this.game.physics.p2.boundsCollisionGroup.mask); for (var e = 0; e < this.collidesWith.length; e++) t |= this.collidesWith[e].mask; return t }, updateCollisionMask: function(t) { var e = this.getCollisionMask(); if (void 0 === t)
                    for (var i = this.data.shapes.length - 1; i >= 0; i--) this.data.shapes[i].collisionMask = e;
                else t.collisionMask = e }, setCollisionGroup: function(t, e) { var i = this.getCollisionMask(); if (void 0 === e)
                    for (var n = this.data.shapes.length - 1; n >= 0; n--) this.data.shapes[n].collisionGroup = t.mask, this.data.shapes[n].collisionMask = i;
                else e.collisionGroup = t.mask, e.collisionMask = i }, clearCollision: function(t, e, i) { if (void 0 === t && (t = !0), void 0 === e && (e = !0), void 0 === i)
                    for (var n = this.data.shapes.length - 1; n >= 0; n--) t && (this.data.shapes[n].collisionGroup = null), e && (this.data.shapes[n].collisionMask = null);
                else t && (i.collisionGroup = null), e && (i.collisionMask = null);
                t && (this.collidesWith.length = 0) }, removeCollisionGroup: function(t, e, i) { void 0 === e && (e = !0); var n; if (Array.isArray(t))
                    for (o = 0; o < t.length; o++)(n = this.collidesWith.indexOf(t[o])) > -1 && (this.collidesWith.splice(n, 1), e && (delete this._groupCallbacks[t.mask], delete this._groupCallbackContext[t.mask]));
                else(n = this.collidesWith.indexOf(t)) > -1 && (this.collidesWith.splice(n, 1), e && (delete this._groupCallbacks[t.mask], delete this._groupCallbackContext[t.mask])); var s = this.getCollisionMask(); if (void 0 === i)
                    for (var o = this.data.shapes.length - 1; o >= 0; o--) this.data.shapes[o].collisionMask = s;
                else i.collisionMask = s }, collides: function(t, e, i, n) { if (Array.isArray(t))
                    for (o = 0; o < t.length; o++) - 1 === this.collidesWith.indexOf(t[o]) && (this.collidesWith.push(t[o]), e && this.createGroupCallback(t[o], e, i));
                else -1 === this.collidesWith.indexOf(t) && (this.collidesWith.push(t), e && this.createGroupCallback(t, e, i)); var s = this.getCollisionMask(); if (void 0 === n)
                    for (var o = this.data.shapes.length - 1; o >= 0; o--) this.data.shapes[o].collisionMask = s;
                else n.collisionMask = s }, adjustCenterOfMass: function() { this.data.adjustCenterOfMass(), this.shapeChanged() }, getVelocityAtPoint: function(t, e) { return this.data.getVelocityAtPoint(t, e) }, applyDamping: function(t) { this.data.applyDamping(t) }, applyImpulse: function(t, e, i) { this.data.applyImpulse(t, [this.world.pxmi(e), this.world.pxmi(i)]) }, applyImpulseLocal: function(t, e, i) { this.data.applyImpulseLocal(t, [this.world.pxmi(e), this.world.pxmi(i)]) }, applyForce: function(t, e, i) { this.data.applyForce(t, [this.world.pxmi(e), this.world.pxmi(i)]) }, setZeroForce: function() { this.data.setZeroForce() }, setZeroRotation: function() { this.data.angularVelocity = 0 }, setZeroVelocity: function() { this.data.velocity[0] = 0, this.data.velocity[1] = 0 }, setZeroDamping: function() { this.data.damping = 0, this.data.angularDamping = 0 }, toLocalFrame: function(t, e) { return this.data.toLocalFrame(t, e) }, toWorldFrame: function(t, e) { return this.data.toWorldFrame(t, e) }, rotateLeft: function(t) { this.data.angularVelocity = this.world.pxm(-t) }, rotateRight: function(t) { this.data.angularVelocity = this.world.pxm(t) }, moveForward: function(t) { var e = this.world.pxmi(-t),
                    i = this.data.angle + Math.PI / 2;
                this.data.velocity[0] = e * Math.cos(i), this.data.velocity[1] = e * Math.sin(i) }, moveBackward: function(t) { var e = this.world.pxmi(-t),
                    i = this.data.angle + Math.PI / 2;
                this.data.velocity[0] = -e * Math.cos(i), this.data.velocity[1] = -e * Math.sin(i) }, thrust: function(t) { var e = this.world.pxmi(-t),
                    i = this.data.angle + Math.PI / 2;
                this.data.force[0] += e * Math.cos(i), this.data.force[1] += e * Math.sin(i) }, thrustLeft: function(t) { var e = this.world.pxmi(-t),
                    i = this.data.angle;
                this.data.force[0] += e * Math.cos(i), this.data.force[1] += e * Math.sin(i) }, thrustRight: function(t) { var e = this.world.pxmi(-t),
                    i = this.data.angle;
                this.data.force[0] -= e * Math.cos(i), this.data.force[1] -= e * Math.sin(i) }, reverse: function(t) { var e = this.world.pxmi(-t),
                    i = this.data.angle + Math.PI / 2;
                this.data.force[0] -= e * Math.cos(i), this.data.force[1] -= e * Math.sin(i) }, moveLeft: function(t) { this.data.velocity[0] = this.world.pxmi(-t) }, moveRight: function(t) { this.data.velocity[0] = this.world.pxmi(t) }, moveUp: function(t) { this.data.velocity[1] = this.world.pxmi(-t) }, moveDown: function(t) { this.data.velocity[1] = this.world.pxmi(t) }, preUpdate: function() { this.dirty = !0, this.removeNextStep && (this.removeFromWorld(), this.removeNextStep = !1) }, postUpdate: function() { this.sprite.x = this.world.mpxi(this.data.position[0]) + this.offset.x, this.sprite.y = this.world.mpxi(this.data.position[1]) + this.offset.y, this.fixedRotation || (this.sprite.rotation = this.data.angle), this.debugBody && this.debugBody.updateSpriteTransform(), this.dirty = !1 }, reset: function(t, e, i, n) { void 0 === i && (i = !1), void 0 === n && (n = !1), this.setZeroForce(), this.setZeroVelocity(), this.setZeroRotation(), i && this.setZeroDamping(), n && (this.mass = 1), this.x = t, this.y = e }, addToWorld: function() { if (this.game.physics.p2._toRemove)
                    for (var t = 0; t < this.game.physics.p2._toRemove.length; t++) this.game.physics.p2._toRemove[t] === this && this.game.physics.p2._toRemove.splice(t, 1);
                this.data.world !== this.game.physics.p2.world && this.game.physics.p2.addBody(this) }, removeFromWorld: function() { this.data.world === this.game.physics.p2.world && this.game.physics.p2.removeBodyNextStep(this) }, destroy: function() { this.removeFromWorld(), this.clearShapes(), this._bodyCallbacks = {}, this._bodyCallbackContext = {}, this._groupCallbacks = {}, this._groupCallbackContext = {}, this.debugBody && this.debugBody.destroy(!0, !0), this.debugBody = null, this.sprite && (this.sprite.body = null, this.sprite = null) }, clearShapes: function() { for (var t = this.data.shapes.length; t--;) this.data.removeShape(this.data.shapes[t]);
                this.shapeChanged() }, addShape: function(t, e, i, n) { return void 0 === e && (e = 0), void 0 === i && (i = 0), void 0 === n && (n = 0), this.data.addShape(t, [this.world.pxmi(e), this.world.pxmi(i)], n), this.shapeChanged(), t }, addCircle: function(t, e, i, n) { var s = new p2.Circle({ radius: this.world.pxm(t) }); return this.addShape(s, e, i, n) }, addRectangle: function(t, e, i, n, s) { var o = new p2.Box({ width: this.world.pxm(t), height: this.world.pxm(e) }); return this.addShape(o, i, n, s) }, addPlane: function(t, e, i) { var n = new p2.Plane; return this.addShape(n, t, e, i) }, addParticle: function(t, e, i) { var n = new p2.Particle; return this.addShape(n, t, e, i) }, addLine: function(t, e, i, n) { var s = new p2.Line({ length: this.world.pxm(t) }); return this.addShape(s, e, i, n) }, addCapsule: function(t, e, i, n, s) { var o = new p2.Capsule({ length: this.world.pxm(t), radius: this.world.pxm(e) }); return this.addShape(o, i, n, s) }, addPolygon: function(t, e) { t = t || {}, Array.isArray(e) || (e = Array.prototype.slice.call(arguments, 1)); var i = []; if (1 === e.length && Array.isArray(e[0])) i = e[0].slice(0);
                else if (Array.isArray(e[0])) i = e.slice();
                else if ("number" == typeof e[0])
                    for (var n = 0, s = e.length; n < s; n += 2) i.push([e[n], e[n + 1]]); var o = i.length - 1;
                i[o][0] === i[0][0] && i[o][1] === i[0][1] && i.pop(); for (var a = 0; a < i.length; a++) i[a][0] = this.world.pxmi(i[a][0]), i[a][1] = this.world.pxmi(i[a][1]); var r = this.data.fromPolygon(i, t); return this.shapeChanged(), r }, removeShape: function(t) { var e = this.data.removeShape(t); return this.shapeChanged(), e }, setCircle: function(t, e, i, n) { return this.clearShapes(), this.addCircle(t, e, i, n) }, setRectangle: function(t, e, i, n, s) { return void 0 === t && (t = 16), void 0 === e && (e = 16), this.clearShapes(), this.addRectangle(t, e, i, n, s) }, setRectangleFromSprite: function(t) { return void 0 === t && (t = this.sprite), this.clearShapes(), this.addRectangle(t.width, t.height, 0, 0, t.rotation) }, setMaterial: function(t, e) { if (void 0 === e)
                    for (var i = this.data.shapes.length - 1; i >= 0; i--) this.data.shapes[i].material = t;
                else e.material = t }, shapeChanged: function() { this.debugBody && this.debugBody.draw() }, addPhaserPolygon: function(t, e) { for (var i = this.game.cache.getPhysicsData(t, e), n = [], s = 0; s < i.length; s++) { var o = i[s],
                        a = this.addFixture(o);
                    n[o.filter.group] = n[o.filter.group] || [], n[o.filter.group] = n[o.filter.group].concat(a), o.fixtureKey && (n[o.fixtureKey] = a) } return this.data.aabbNeedsUpdate = !0, this.shapeChanged(), n }, addFixture: function(t) { var e = []; if (t.circle) {
                    (l = new p2.Circle({ radius: this.world.pxm(t.circle.radius) })).collisionGroup = t.filter.categoryBits, l.collisionMask = t.filter.maskBits, l.sensor = t.isSensor; var i = p2.vec2.create();
                    i[0] = this.world.pxmi(t.circle.position[0] - this.sprite.width / 2), i[1] = this.world.pxmi(t.circle.position[1] - this.sprite.height / 2), this.data.addShape(l, i), e.push(l) } else
                    for (var n = t.polygons, s = p2.vec2.create(), o = 0; o < n.length; o++) { for (var a = n[o], r = [], h = 0; h < a.length; h += 2) r.push([this.world.pxmi(a[h]), this.world.pxmi(a[h + 1])]); for (var l = new p2.Convex({ vertices: r }), c = 0; c !== l.vertices.length; c++) { var u = l.vertices[c];
                            p2.vec2.sub(u, u, l.centerOfMass) } p2.vec2.scale(s, l.centerOfMass, 1), s[0] -= this.world.pxmi(this.sprite.width / 2), s[1] -= this.world.pxmi(this.sprite.height / 2), l.updateTriangles(), l.updateCenterOfMass(), l.updateBoundingRadius(), l.collisionGroup = t.filter.categoryBits, l.collisionMask = t.filter.maskBits, l.sensor = t.isSensor, this.data.addShape(l, s), e.push(l) }
                return e }, loadPolygon: function(t, e) { if (null === t) i = e;
                else var i = this.game.cache.getPhysicsData(t, e); for (var n = p2.vec2.create(), s = 0; s < i.length; s++) { for (var o = [], a = 0; a < i[s].shape.length; a += 2) o.push([this.world.pxmi(i[s].shape[a]), this.world.pxmi(i[s].shape[a + 1])]); for (var r = new p2.Convex({ vertices: o }), h = 0; h !== r.vertices.length; h++) { var l = r.vertices[h];
                        p2.vec2.sub(l, l, r.centerOfMass) } p2.vec2.scale(n, r.centerOfMass, 1), n[0] -= this.world.pxmi(this.sprite.width / 2), n[1] -= this.world.pxmi(this.sprite.height / 2), r.updateTriangles(), r.updateCenterOfMass(), r.updateBoundingRadius(), this.data.addShape(r, n) } return this.data.aabbNeedsUpdate = !0, this.shapeChanged(), !0 } }, i.Physics.P2.Body.prototype.constructor = i.Physics.P2.Body, i.Physics.P2.Body.DYNAMIC = 1, i.Physics.P2.Body.STATIC = 2, i.Physics.P2.Body.KINEMATIC = 4, Object.defineProperty(i.Physics.P2.Body.prototype, "static", { get: function() { return this.data.type === i.Physics.P2.Body.STATIC }, set: function(t) { t && this.data.type !== i.Physics.P2.Body.STATIC ? (this.data.type = i.Physics.P2.Body.STATIC, this.mass = 0) : t || this.data.type !== i.Physics.P2.Body.STATIC || (this.data.type = i.Physics.P2.Body.DYNAMIC, this.mass = 1) } }), Object.defineProperty(i.Physics.P2.Body.prototype, "dynamic", { get: function() { return this.data.type === i.Physics.P2.Body.DYNAMIC }, set: function(t) { t && this.data.type !== i.Physics.P2.Body.DYNAMIC ? (this.data.type = i.Physics.P2.Body.DYNAMIC, this.mass = 1) : t || this.data.type !== i.Physics.P2.Body.DYNAMIC || (this.data.type = i.Physics.P2.Body.STATIC, this.mass = 0) } }), Object.defineProperty(i.Physics.P2.Body.prototype, "kinematic", { get: function() { return this.data.type === i.Physics.P2.Body.KINEMATIC }, set: function(t) { t && this.data.type !== i.Physics.P2.Body.KINEMATIC ? (this.data.type = i.Physics.P2.Body.KINEMATIC, this.mass = 4) : t || this.data.type !== i.Physics.P2.Body.KINEMATIC || (this.data.type = i.Physics.P2.Body.STATIC, this.mass = 0) } }), Object.defineProperty(i.Physics.P2.Body.prototype, "allowSleep", { get: function() { return this.data.allowSleep }, set: function(t) { t !== this.data.allowSleep && (this.data.allowSleep = t) } }), Object.defineProperty(i.Physics.P2.Body.prototype, "angle", { get: function() { return i.Math.wrapAngle(i.Math.radToDeg(this.data.angle)) }, set: function(t) { this.data.angle = i.Math.degToRad(i.Math.wrapAngle(t)) } }), Object.defineProperty(i.Physics.P2.Body.prototype, "angularDamping", { get: function() { return this.data.angularDamping }, set: function(t) { this.data.angularDamping = t } }), Object.defineProperty(i.Physics.P2.Body.prototype, "angularForce", { get: function() { return this.data.angularForce }, set: function(t) { this.data.angularForce = t } }), Object.defineProperty(i.Physics.P2.Body.prototype, "angularVelocity", { get: function() { return this.data.angularVelocity }, set: function(t) { this.data.angularVelocity = t } }), Object.defineProperty(i.Physics.P2.Body.prototype, "damping", { get: function() { return this.data.damping }, set: function(t) { this.data.damping = t } }), Object.defineProperty(i.Physics.P2.Body.prototype, "fixedRotation", { get: function() { return this.data.fixedRotation }, set: function(t) { t !== this.data.fixedRotation && (this.data.fixedRotation = t) } }), Object.defineProperty(i.Physics.P2.Body.prototype, "inertia", { get: function() { return this.data.inertia }, set: function(t) { this.data.inertia = t } }), Object.defineProperty(i.Physics.P2.Body.prototype, "mass", { get: function() { return this.data.mass }, set: function(t) { t !== this.data.mass && (this.data.mass = t, this.data.updateMassProperties()) } }), Object.defineProperty(i.Physics.P2.Body.prototype, "motionState", { get: function() { return this.data.type }, set: function(t) { t !== this.data.type && (this.data.type = t) } }), Object.defineProperty(i.Physics.P2.Body.prototype, "rotation", { get: function() { return this.data.angle }, set: function(t) { this.data.angle = t } }), Object.defineProperty(i.Physics.P2.Body.prototype, "sleepSpeedLimit", { get: function() { return this.data.sleepSpeedLimit }, set: function(t) { this.data.sleepSpeedLimit = t } }), Object.defineProperty(i.Physics.P2.Body.prototype, "x", { get: function() { return this.world.mpxi(this.data.position[0]) }, set: function(t) { this.data.position[0] = this.world.pxmi(t) } }), Object.defineProperty(i.Physics.P2.Body.prototype, "y", { get: function() { return this.world.mpxi(this.data.position[1]) }, set: function(t) { this.data.position[1] = this.world.pxmi(t) } }), Object.defineProperty(i.Physics.P2.Body.prototype, "id", { get: function() { return this.data.id } }), Object.defineProperty(i.Physics.P2.Body.prototype, "debug", { get: function() { return null !== this.debugBody }, set: function(t) { t && !this.debugBody ? this.debugBody = new i.Physics.P2.BodyDebug(this.game, this.data) : !t && this.debugBody && (this.debugBody.destroy(), this.debugBody = null) } }), Object.defineProperty(i.Physics.P2.Body.prototype, "collideWorldBounds", { get: function() { return this._collideWorldBounds }, set: function(t) { t && !this._collideWorldBounds ? (this._collideWorldBounds = !0, this.updateCollisionMask()) : !t && this._collideWorldBounds && (this._collideWorldBounds = !1, this.updateCollisionMask()) } }), i.Physics.P2.BodyDebug = function(t, e, n) { i.Group.call(this, t); var s = { pixelsPerLengthUnit: t.physics.p2.mpx(1), debugPolygons: !1, lineWidth: 1, alpha: .5 };
            this.settings = i.Utils.extend(s, n), this.ppu = this.settings.pixelsPerLengthUnit, this.ppu = -1 * this.ppu, this.body = e, this.canvas = new i.Graphics(t), this.canvas.alpha = this.settings.alpha, this.add(this.canvas), this.draw(), this.updateSpriteTransform() }, i.Physics.P2.BodyDebug.prototype = Object.create(i.Group.prototype), i.Physics.P2.BodyDebug.prototype.constructor = i.Physics.P2.BodyDebug, i.Utils.extend(i.Physics.P2.BodyDebug.prototype, { updateSpriteTransform: function() { this.position.x = this.body.position[0] * this.ppu, this.position.y = this.body.position[1] * this.ppu, this.rotation = this.body.angle }, draw: function() { var t, e, i, n, s, o, a, r, h, l, c, u, p, d; if (a = this.body, (h = this.canvas).clear(), i = parseInt(this.randomPastelHex(), 16), 16711680, o = this.lineWidth, a instanceof p2.Body && a.shapes.length) { var m = a.shapes.length; for (n = 0; n !== m;) { if (e = a.shapes[n], r = e.position || 0, t = e.angle || 0, e instanceof p2.Circle) this.drawCircle(h, r[0] * this.ppu, r[1] * this.ppu, t, e.radius * this.ppu, i, o);
                        else if (e instanceof p2.Capsule) this.drawCapsule(h, r[0] * this.ppu, r[1] * this.ppu, t, e.length * this.ppu, e.radius * this.ppu, 16711680, i, o);
                        else if (e instanceof p2.Plane) this.drawPlane(h, r[0] * this.ppu, -r[1] * this.ppu, i, 16711680, 5 * o, 10 * o, 10 * o, 100 * this.ppu, t);
                        else if (e instanceof p2.Line) this.drawLine(h, e.length * this.ppu, 16711680, o);
                        else if (e instanceof p2.Box) this.drawRectangle(h, r[0] * this.ppu, r[1] * this.ppu, t, e.width * this.ppu, e.height * this.ppu, 16711680, i, o);
                        else if (e instanceof p2.Convex) { for (c = [], u = p2.vec2.create(), s = p = 0, d = e.vertices.length; 0 <= d ? p < d : p > d; s = 0 <= d ? ++p : --p) l = e.vertices[s], p2.vec2.rotate(u, l, t), c.push([(u[0] + r[0]) * this.ppu, -(u[1] + r[1]) * this.ppu]);
                            this.drawConvex(h, c, e.triangles, 16711680, i, o, this.settings.debugPolygons, [r[0] * this.ppu, -r[1] * this.ppu]) } n++ } } }, drawRectangle: function(t, e, i, n, s, o, a, r, h) { void 0 === h && (h = 1), void 0 === a && (a = 0), t.lineStyle(h, a, 1), t.beginFill(r), t.drawRect(e - s / 2, i - o / 2, s, o) }, drawCircle: function(t, e, i, n, s, o, a) { void 0 === a && (a = 1), void 0 === o && (o = 16777215), t.lineStyle(a, 0, 1), t.beginFill(o, 1), t.drawCircle(e, i, 2 * -s), t.endFill(), t.moveTo(e, i), t.lineTo(e + s * Math.cos(-n), i + s * Math.sin(-n)) }, drawLine: function(t, e, i, n) { void 0 === n && (n = 1), void 0 === i && (i = 0), t.lineStyle(5 * n, i, 1), t.moveTo(-e / 2, 0), t.lineTo(e / 2, 0) }, drawConvex: function(t, e, i, n, s, o, a, r) { var h, l, c, u, p, d, m, g, f, y, v; if (void 0 === o && (o = 1), void 0 === n && (n = 0), a) { for (h = [16711680, 65280, 255], l = 0; l !== e.length + 1;) u = e[l % e.length], p = e[(l + 1) % e.length], m = u[0], y = u[1], g = p[0], v = p[1], t.lineStyle(o, h[l % h.length], 1), t.moveTo(m, -y), t.lineTo(g, -v), t.drawCircle(m, -y, 2 * o), l++; return t.lineStyle(o, 0, 1), t.drawCircle(r[0], r[1], 2 * o) } for (t.lineStyle(o, n, 1), t.beginFill(s), l = 0; l !== e.length;) d = (c = e[l])[0], f = c[1], 0 === l ? t.moveTo(d, -f) : t.lineTo(d, -f), l++; if (t.endFill(), e.length > 2) return t.moveTo(e[e.length - 1][0], -e[e.length - 1][1]), t.lineTo(e[0][0], -e[0][1]) }, drawPath: function(t, e, i, n, s) { var o, a, r, h, l, c, u, p, d, m, g; for (void 0 === s && (s = 1), void 0 === i && (i = 0), t.lineStyle(s, i, 1), "number" == typeof n && t.beginFill(n), a = null, r = null, o = 0; o < e.length;) m = (d = e[o])[0], g = d[1], m === a && g === r || (0 === o ? t.moveTo(m, g) : (h = a, l = r, c = m, u = g, p = e[(o + 1) % e.length][0], 0 !== (c - h) * (e[(o + 1) % e.length][1] - l) - (p - h) * (u - l) && t.lineTo(m, g)), a = m, r = g), o++; "number" == typeof n && t.endFill(), e.length > 2 && "number" == typeof n && (t.moveTo(e[e.length - 1][0], e[e.length - 1][1]), t.lineTo(e[0][0], e[0][1])) }, drawPlane: function(t, e, i, n, s, o, a, r, h, l) { var c, u;
                void 0 === o && (o = 1), void 0 === n && (n = 16777215), t.lineStyle(o, s, 11), t.beginFill(n), t.moveTo(e, -i), c = e + Math.cos(l) * this.game.width, u = i + Math.sin(l) * this.game.height, t.lineTo(c, -u), t.moveTo(e, -i), c = e + Math.cos(l) * -this.game.width, u = i + Math.sin(l) * -this.game.height, t.lineTo(c, -u) }, drawCapsule: function(t, e, i, n, s, o, a, r, h) { void 0 === h && (h = 1), void 0 === a && (a = 0), t.lineStyle(h, a, 1); var l = Math.cos(n),
                    c = Math.sin(n);
                t.beginFill(r, 1), t.drawCircle(-s / 2 * l + e, -s / 2 * c + i, 2 * -o), t.drawCircle(s / 2 * l + e, s / 2 * c + i, 2 * -o), t.endFill(), t.lineStyle(h, a, 0), t.beginFill(r, 1), t.moveTo(-s / 2 * l + o * c + e, -s / 2 * c + o * l + i), t.lineTo(s / 2 * l + o * c + e, s / 2 * c + o * l + i), t.lineTo(s / 2 * l - o * c + e, s / 2 * c - o * l + i), t.lineTo(-s / 2 * l - o * c + e, -s / 2 * c - o * l + i), t.endFill(), t.lineStyle(h, a, 1), t.moveTo(-s / 2 * l + o * c + e, -s / 2 * c + o * l + i), t.lineTo(s / 2 * l + o * c + e, s / 2 * c + o * l + i), t.moveTo(-s / 2 * l - o * c + e, -s / 2 * c - o * l + i), t.lineTo(s / 2 * l - o * c + e, s / 2 * c - o * l + i) }, randomPastelHex: function() { var t, e, i, n; return i = [255, 255, 255], n = Math.floor(256 * Math.random()), e = Math.floor(256 * Math.random()), t = Math.floor(256 * Math.random()), n = Math.floor((n + 3 * i[0]) / 4), e = Math.floor((e + 3 * i[1]) / 4), t = Math.floor((t + 3 * i[2]) / 4), this.rgbToHex(n, e, t) }, rgbToHex: function(t, e, i) { return this.componentToHex(t) + this.componentToHex(e) + this.componentToHex(i) }, componentToHex: function(t) { var e; return 2 === (e = t.toString(16)).length ? e : e + "0" } }), i.Physics.P2.Spring = function(t, e, i, n, s, o, a, r, h, l) { this.game = t.game, this.world = t, void 0 === n && (n = 1), void 0 === s && (s = 100), void 0 === o && (o = 1); var c = { restLength: n = t.pxm(n), stiffness: s, damping: o };
            void 0 !== a && null !== a && (c.worldAnchorA = [t.pxm(a[0]), t.pxm(a[1])]), void 0 !== r && null !== r && (c.worldAnchorB = [t.pxm(r[0]), t.pxm(r[1])]), void 0 !== h && null !== h && (c.localAnchorA = [t.pxm(h[0]), t.pxm(h[1])]), void 0 !== l && null !== l && (c.localAnchorB = [t.pxm(l[0]), t.pxm(l[1])]), this.data = new p2.LinearSpring(e, i, c), this.data.parent = this }, i.Physics.P2.Spring.prototype.constructor = i.Physics.P2.Spring, i.Physics.P2.RotationalSpring = function(t, e, i, n, s, o) { this.game = t.game, this.world = t, void 0 === n && (n = null), void 0 === s && (s = 100), void 0 === o && (o = 1), n && (n = t.pxm(n)); var a = { restAngle: n, stiffness: s, damping: o };
            this.data = new p2.RotationalSpring(e, i, a), this.data.parent = this }, i.Physics.P2.Spring.prototype.constructor = i.Physics.P2.Spring, i.Physics.P2.Material = function(t) { this.name = t, p2.Material.call(this) }, i.Physics.P2.Material.prototype = Object.create(p2.Material.prototype), i.Physics.P2.Material.prototype.constructor = i.Physics.P2.Material, i.Physics.P2.ContactMaterial = function(t, e, i) { p2.ContactMaterial.call(this, t, e, i) }, i.Physics.P2.ContactMaterial.prototype = Object.create(p2.ContactMaterial.prototype), i.Physics.P2.ContactMaterial.prototype.constructor = i.Physics.P2.ContactMaterial, i.Physics.P2.CollisionGroup = function(t) { this.mask = t }, i.Physics.P2.DistanceConstraint = function(t, e, i, n, s, o, a) { void 0 === n && (n = 100), void 0 === s && (s = [0, 0]), void 0 === o && (o = [0, 0]), void 0 === a && (a = Number.MAX_VALUE), this.game = t.game, this.world = t; var r = { distance: n = t.pxm(n), localAnchorA: s = [t.pxmi(s[0]), t.pxmi(s[1])], localAnchorB: o = [t.pxmi(o[0]), t.pxmi(o[1])], maxForce: a };
            p2.DistanceConstraint.call(this, e, i, r) }, i.Physics.P2.DistanceConstraint.prototype = Object.create(p2.DistanceConstraint.prototype), i.Physics.P2.DistanceConstraint.prototype.constructor = i.Physics.P2.DistanceConstraint, i.Physics.P2.GearConstraint = function(t, e, i, n, s) { void 0 === n && (n = 0), void 0 === s && (s = 1), this.game = t.game, this.world = t; var o = { angle: n, ratio: s };
            p2.GearConstraint.call(this, e, i, o) }, i.Physics.P2.GearConstraint.prototype = Object.create(p2.GearConstraint.prototype), i.Physics.P2.GearConstraint.prototype.constructor = i.Physics.P2.GearConstraint, i.Physics.P2.LockConstraint = function(t, e, i, n, s, o) { void 0 === n && (n = [0, 0]), void 0 === s && (s = 0), void 0 === o && (o = Number.MAX_VALUE), this.game = t.game, this.world = t; var a = { localOffsetB: n = [t.pxm(n[0]), t.pxm(n[1])], localAngleB: s, maxForce: o };
            p2.LockConstraint.call(this, e, i, a) }, i.Physics.P2.LockConstraint.prototype = Object.create(p2.LockConstraint.prototype), i.Physics.P2.LockConstraint.prototype.constructor = i.Physics.P2.LockConstraint, i.Physics.P2.PrismaticConstraint = function(t, e, i, n, s, o, a, r) { void 0 === n && (n = !0), void 0 === s && (s = [0, 0]), void 0 === o && (o = [0, 0]), void 0 === a && (a = [0, 0]), void 0 === r && (r = Number.MAX_VALUE), this.game = t.game, this.world = t; var h = { localAnchorA: s = [t.pxmi(s[0]), t.pxmi(s[1])], localAnchorB: o = [t.pxmi(o[0]), t.pxmi(o[1])], localAxisA: a, maxForce: r, disableRotationalLock: !n };
            p2.PrismaticConstraint.call(this, e, i, h) }, i.Physics.P2.PrismaticConstraint.prototype = Object.create(p2.PrismaticConstraint.prototype), i.Physics.P2.PrismaticConstraint.prototype.constructor = i.Physics.P2.PrismaticConstraint, i.Physics.P2.RevoluteConstraint = function(t, e, i, n, s, o, a) { void 0 === o && (o = Number.MAX_VALUE), void 0 === a && (a = null), this.game = t.game, this.world = t, i = [t.pxmi(i[0]), t.pxmi(i[1])], s = [t.pxmi(s[0]), t.pxmi(s[1])], a && (a = [t.pxmi(a[0]), t.pxmi(a[1])]); var r = { worldPivot: a, localPivotA: i, localPivotB: s, maxForce: o };
            p2.RevoluteConstraint.call(this, e, n, r) }, i.Physics.P2.RevoluteConstraint.prototype = Object.create(p2.RevoluteConstraint.prototype), i.Physics.P2.RevoluteConstraint.prototype.constructor = i.Physics.P2.RevoluteConstraint, i.ImageCollection = function(t, e, i, n, s, o, a) {
            (void 0 === i || i <= 0) && (i = 32), (void 0 === n || n <= 0) && (n = 32), void 0 === s && (s = 0), void 0 === o && (o = 0), this.name = t, this.firstgid = 0 | e, this.imageWidth = 0 | i, this.imageHeight = 0 | n, this.imageMargin = 0 | s, this.imageSpacing = 0 | o, this.properties = a || {}, this.images = [], this.total = 0 }, i.ImageCollection.prototype = { containsImageIndex: function(t) { return t >= this.firstgid && t < this.firstgid + this.total }, addImage: function(t, e) { this.images.push({ gid: t, image: e }), this.total++ } }, i.ImageCollection.prototype.constructor = i.ImageCollection, i.Tile = function(t, e, i, n, s, o) { this.layer = t, this.index = e, this.x = i, this.y = n, this.rotation = 0, this.flipped = !1, this.worldX = i * s, this.worldY = n * o, this.width = s, this.height = o, this.centerX = Math.abs(s / 2), this.centerY = Math.abs(o / 2), this.alpha = 1, this.properties = {}, this.scanned = !1, this.faceTop = !1, this.faceBottom = !1, this.faceLeft = !1, this.faceRight = !1, this.collideLeft = !1, this.collideRight = !1, this.collideUp = !1, this.collideDown = !1, this.collisionCallback = null, this.collisionCallbackContext = this }, i.Tile.prototype = { containsPoint: function(t, e) { return !(t < this.worldX || e < this.worldY || t > this.right || e > this.bottom) }, intersects: function(t, e, i, n) { return !(i <= this.worldX) && (!(n <= this.worldY) && (!(t >= this.worldX + this.width) && !(e >= this.worldY + this.height))) }, setCollisionCallback: function(t, e) { this.collisionCallback = t, this.collisionCallbackContext = e }, destroy: function() { this.collisionCallback = null, this.collisionCallbackContext = null, this.properties = null }, setCollision: function(t, e, i, n) { this.collideLeft = t, this.collideRight = e, this.collideUp = i, this.collideDown = n, this.faceLeft = t, this.faceRight = e, this.faceTop = i, this.faceBottom = n }, resetCollision: function() { this.collideLeft = !1, this.collideRight = !1, this.collideUp = !1, this.collideDown = !1, this.faceTop = !1, this.faceBottom = !1, this.faceLeft = !1, this.faceRight = !1 }, isInteresting: function(t, e) { return t && e ? this.collideLeft || this.collideRight || this.collideUp || this.collideDown || this.faceTop || this.faceBottom || this.faceLeft || this.faceRight || this.collisionCallback : t ? this.collideLeft || this.collideRight || this.collideUp || this.collideDown : !!e && (this.faceTop || this.faceBottom || this.faceLeft || this.faceRight) }, copy: function(t) { this.index = t.index, this.alpha = t.alpha, this.properties = t.properties, this.collideUp = t.collideUp, this.collideDown = t.collideDown, this.collideLeft = t.collideLeft, this.collideRight = t.collideRight, this.collisionCallback = t.collisionCallback, this.collisionCallbackContext = t.collisionCallbackContext } }, i.Tile.prototype.constructor = i.Tile, Object.defineProperty(i.Tile.prototype, "collides", { get: function() { return this.collideLeft || this.collideRight || this.collideUp || this.collideDown } }), Object.defineProperty(i.Tile.prototype, "canCollide", { get: function() { return this.collideLeft || this.collideRight || this.collideUp || this.collideDown || this.collisionCallback } }), Object.defineProperty(i.Tile.prototype, "left", { get: function() { return this.worldX } }), Object.defineProperty(i.Tile.prototype, "right", { get: function() { return this.worldX + this.width } }), Object.defineProperty(i.Tile.prototype, "top", { get: function() { return this.worldY } }), Object.defineProperty(i.Tile.prototype, "bottom", { get: function() { return this.worldY + this.height } }), i.Tilemap = function(t, e, n, s, o, a) { this.game = t, this.key = e; var r = i.TilemapParser.parse(this.game, e, n, s, o, a);
            null !== r && (this.width = r.width, this.height = r.height, this.tileWidth = r.tileWidth, this.tileHeight = r.tileHeight, this.orientation = r.orientation, this.format = r.format, this.version = r.version, this.properties = r.properties, this.widthInPixels = r.widthInPixels, this.heightInPixels = r.heightInPixels, this.layers = r.layers, this.tilesets = r.tilesets, this.imagecollections = r.imagecollections, this.tiles = r.tiles, this.objects = r.objects, this.collideIndexes = [], this.collision = r.collision, this.images = r.images, this.enableDebug = !1, this.currentLayer = 0, this.debugMap = [], this._results = [], this._tempA = 0, this._tempB = 0) }, i.Tilemap.CSV = 0, i.Tilemap.TILED_JSON = 1, i.Tilemap.NORTH = 0, i.Tilemap.EAST = 1, i.Tilemap.SOUTH = 2, i.Tilemap.WEST = 3, i.Tilemap.prototype = { create: function(t, e, i, n, s, o) { return void 0 === o && (o = this.game.world), this.width = e, this.height = i, this.setTileSize(n, s), this.layers.length = 0, this.createBlankLayer(t, e, i, n, s, o) }, setTileSize: function(t, e) { this.tileWidth = t, this.tileHeight = e, this.widthInPixels = this.width * t, this.heightInPixels = this.height * e }, addTilesetImage: function(t, e, n, s, o, a, r) { if (void 0 === t) return null;
                void 0 === n && (n = this.tileWidth), void 0 === s && (s = this.tileHeight), void 0 === o && (o = 0), void 0 === a && (a = 0), void 0 === r && (r = 0), 0 === n && (n = 32), 0 === s && (s = 32); var h = null; if (void 0 !== e && null !== e || (e = t), e instanceof i.BitmapData) h = e.canvas;
                else { if (!this.game.cache.checkImageKey(e)) return console.warn('Phaser.Tilemap.addTilesetImage: Invalid image key given: "' + e + '"'), null;
                    h = this.game.cache.getImage(e) } var l = this.getTilesetIndex(t); if (null === l && this.format === i.Tilemap.TILED_JSON) return console.warn('Phaser.Tilemap.addTilesetImage: No data found in the JSON matching the tileset name: "' + t + '"'), null; if (this.tilesets[l]) return this.tilesets[l].setImage(h), this.tilesets[l]; var c = new i.Tileset(t, r, n, s, o, a, {});
                c.setImage(h), this.tilesets.push(c); for (var u = this.tilesets.length - 1, p = o, d = o, m = 0, g = 0, f = 0, y = r; y < r + c.total && (this.tiles[y] = [p, d, u], p += n + a, ++m !== c.total) && (++g !== c.columns || (p = o, d += s + a, g = 0, ++f !== c.rows)); y++); return c }, createFromObjects: function(t, e, n, s, o, a, r, h, l) { if (void 0 === o && (o = !0), void 0 === a && (a = !1), void 0 === r && (r = this.game.world), void 0 === h && (h = i.Sprite), void 0 === l && (l = !0), this.objects[t])
                    for (var c = 0; c < this.objects[t].length; c++) { var u = !1,
                            p = this.objects[t][c]; if (void 0 !== p.gid && "number" == typeof e && p.gid === e ? u = !0 : void 0 !== p.id && "number" == typeof e && p.id === e ? u = !0 : void 0 !== p.name && "string" == typeof e && p.name === e && (u = !0), u) { var d = new h(this.game, parseFloat(p.x, 10), parseFloat(p.y, 10), n, s);
                            d.name = p.name, d.visible = p.visible, d.autoCull = a, d.exists = o, p.width && (d.width = p.width), p.height && (d.height = p.height), p.rotation && (d.angle = p.rotation), l && (d.y -= d.height), r.add(d); for (var m in p.properties) r.set(d, m, p.properties[m], !1, !1, 0, !0) } } else console.warn("Tilemap.createFromObjects: Invalid objectgroup name given: " + t) }, createFromTiles: function(t, e, n, s, o, a) { "number" == typeof t && (t = [t]), void 0 === e || null === e ? e = [] : "number" == typeof e && (e = [e]), s = this.getLayer(s), void 0 === o && (o = this.game.world), void 0 === a && (a = {}), void 0 === a.customClass && (a.customClass = i.Sprite), void 0 === a.adjustY && (a.adjustY = !0); var r = this.layers[s].width,
                    h = this.layers[s].height; if (this.copy(0, 0, r, h, s), this._results.length < 2) return 0; for (var l, c = 0, u = 1, p = this._results.length; u < p; u++)
                    if (-1 !== t.indexOf(this._results[u].index)) { l = new a.customClass(this.game, this._results[u].worldX, this._results[u].worldY, n); for (var d in a) l[d] = a[d];
                        o.add(l), c++ } if (1 === e.length)
                    for (u = 0; u < t.length; u++) this.replace(t[u], e[0], 0, 0, r, h, s);
                else if (e.length > 1)
                    for (u = 0; u < t.length; u++) this.replace(t[u], e[u], 0, 0, r, h, s); return c }, createLayer: function(t, e, n, s) { void 0 === e && (e = this.game.width), void 0 === n && (n = this.game.height), void 0 === s && (s = this.game.world); var o = t; if ("string" == typeof t && (o = this.getLayerIndex(t)), !(null === o || o > this.layers.length)) { void 0 === e || e <= 0 ? e = Math.min(this.game.width, this.layers[o].widthInPixels) : e > this.game.width && (e = this.game.width), void 0 === n || n <= 0 ? n = Math.min(this.game.height, this.layers[o].heightInPixels) : n > this.game.height && (n = this.game.height), this.enableDebug && (console.group("Tilemap.createLayer"), console.log("Name:", this.layers[o].name), console.log("Size:", e, "x", n), console.log("Tileset:", this.tilesets[0].name, "index:", o)); var a = s.add(new i.TilemapLayer(this.game, this, o, e, n)); return this.enableDebug && console.groupEnd(), a } console.warn("Tilemap.createLayer: Invalid layer ID given: " + o) }, createBlankLayer: function(t, e, n, s, o, a) { void 0 === a && (a = this.game.world); { if (null === this.getLayerIndex(t)) { for (var r, h = { name: t, x: 0, y: 0, width: e, height: n, widthInPixels: e * s, heightInPixels: n * o, alpha: 1, visible: !0, properties: {}, indexes: [], callbacks: [], bodies: [], data: null }, l = [], c = 0; c < n; c++) { r = []; for (var u = 0; u < e; u++) r.push(new i.Tile(h, -1, u, c, s, o));
                            l.push(r) } h.data = l, this.layers.push(h), this.currentLayer = this.layers.length - 1; var p = h.widthInPixels,
                            d = h.heightInPixels; return p > this.game.width && (p = this.game.width), d > this.game.height && (d = this.game.height), (l = new i.TilemapLayer(this.game, this, this.layers.length - 1, p, d)).name = t, a.add(l) } console.warn("Tilemap.createBlankLayer: Layer with matching name already exists: " + t) } }, getIndex: function(t, e) { for (var i = 0; i < t.length; i++)
                    if (t[i].name === e) return i; return null }, getLayerIndex: function(t) { return this.getIndex(this.layers, t) }, getTilesetIndex: function(t) { return this.getIndex(this.tilesets, t) }, getImageIndex: function(t) { return this.getIndex(this.images, t) }, setTileIndexCallback: function(t, e, i, n) { if (n = this.getLayer(n), "number" == typeof t) this.layers[n].callbacks[t] = { callback: e, callbackContext: i };
                else
                    for (var s = 0, o = t.length; s < o; s++) this.layers[n].callbacks[t[s]] = { callback: e, callbackContext: i } }, setTileLocationCallback: function(t, e, i, n, s, o, a) { if (a = this.getLayer(a), this.copy(t, e, i, n, a), !(this._results.length < 2))
                    for (var r = 1; r < this._results.length; r++) this._results[r].setCollisionCallback(s, o) }, setCollision: function(t, e, i, n) { if (void 0 === e && (e = !0), void 0 === n && (n = !0), i = this.getLayer(i), "number" == typeof t) return this.setCollisionByIndex(t, e, i, !0); if (Array.isArray(t)) { for (var s = 0; s < t.length; s++) this.setCollisionByIndex(t[s], e, i, !1);
                    n && this.calculateFaces(i) } }, setCollisionBetween: function(t, e, i, n, s) { if (void 0 === i && (i = !0), void 0 === s && (s = !0), n = this.getLayer(n), !(t > e)) { for (var o = t; o <= e; o++) this.setCollisionByIndex(o, i, n, !1);
                    s && this.calculateFaces(n) } }, setCollisionByExclusion: function(t, e, i, n) { void 0 === e && (e = !0), void 0 === n && (n = !0), i = this.getLayer(i); for (var s = 0, o = this.tiles.length; s < o; s++) - 1 === t.indexOf(s) && this.setCollisionByIndex(s, e, i, !1);
                n && this.calculateFaces(i) }, setCollisionByIndex: function(t, e, i, n) { if (void 0 === e && (e = !0), void 0 === i && (i = this.currentLayer), void 0 === n && (n = !0), e) this.collideIndexes.push(t);
                else { var s = this.collideIndexes.indexOf(t);
                    s > -1 && this.collideIndexes.splice(s, 1) } for (var o = 0; o < this.layers[i].height; o++)
                    for (var a = 0; a < this.layers[i].width; a++) { var r = this.layers[i].data[o][a];
                        r && r.index === t && (e ? r.setCollision(!0, !0, !0, !0) : r.resetCollision(), r.faceTop = e, r.faceBottom = e, r.faceLeft = e, r.faceRight = e) }
                return n && this.calculateFaces(i), i }, getLayer: function(t) { return void 0 === t ? t = this.currentLayer : "string" == typeof t ? t = this.getLayerIndex(t) : t instanceof i.TilemapLayer && (t = t.index), t }, setPreventRecalculate: function(t) { if (!0 === t && !0 !== this.preventingRecalculate && (this.preventingRecalculate = !0, this.needToRecalculate = {}), !1 === t && !0 === this.preventingRecalculate) { this.preventingRecalculate = !1; for (var e in this.needToRecalculate) this.calculateFaces(e);
                    this.needToRecalculate = !1 } }, calculateFaces: function(t) { if (this.preventingRecalculate) this.needToRecalculate[t] = !0;
                else
                    for (var e = null, i = null, n = null, s = null, o = 0, a = this.layers[t].height; o < a; o++)
                        for (var r = 0, h = this.layers[t].width; r < h; r++) { var l = this.layers[t].data[o][r];
                            l && (e = this.getTileAbove(t, r, o), i = this.getTileBelow(t, r, o), n = this.getTileLeft(t, r, o), s = this.getTileRight(t, r, o), l.collides && (l.faceTop = !0, l.faceBottom = !0, l.faceLeft = !0, l.faceRight = !0), e && e.collides && (l.faceTop = !1), i && i.collides && (l.faceBottom = !1), n && n.collides && (l.faceLeft = !1), s && s.collides && (l.faceRight = !1)) } }, getTileAbove: function(t, e, i) { return i > 0 ? this.layers[t].data[i - 1][e] : null }, getTileBelow: function(t, e, i) { return i < this.layers[t].height - 1 ? this.layers[t].data[i + 1][e] : null }, getTileLeft: function(t, e, i) { return e > 0 ? this.layers[t].data[i][e - 1] : null }, getTileRight: function(t, e, i) { return e < this.layers[t].width - 1 ? this.layers[t].data[i][e + 1] : null }, setLayer: function(t) { t = this.getLayer(t), this.layers[t] && (this.currentLayer = t) }, hasTile: function(t, e, i) { return i = this.getLayer(i), void 0 !== this.layers[i].data[e] && void 0 !== this.layers[i].data[e][t] && this.layers[i].data[e][t].index > -1 }, removeTile: function(t, e, n) { if (n = this.getLayer(n), t >= 0 && t < this.layers[n].width && e >= 0 && e < this.layers[n].height && this.hasTile(t, e, n)) { var s = this.layers[n].data[e][t]; return this.layers[n].data[e][t] = new i.Tile(this.layers[n], -1, t, e, this.tileWidth, this.tileHeight), this.layers[n].dirty = !0, this.calculateFaces(n), s } }, removeTileWorldXY: function(t, e, i, n, s) { return s = this.getLayer(s), t = this.game.math.snapToFloor(t, i) / i, e = this.game.math.snapToFloor(e, n) / n, this.removeTile(t, e, s) }, putTile: function(t, e, n, s) { if (null === t) return this.removeTile(e, n, s); if (s = this.getLayer(s), e >= 0 && e < this.layers[s].width && n >= 0 && n < this.layers[s].height) { var o; return t instanceof i.Tile ? (o = t.index, this.hasTile(e, n, s) ? this.layers[s].data[n][e].copy(t) : this.layers[s].data[n][e] = new i.Tile(s, o, e, n, t.width, t.height)) : (o = t, this.hasTile(e, n, s) ? this.layers[s].data[n][e].index = o : this.layers[s].data[n][e] = new i.Tile(this.layers[s], o, e, n, this.tileWidth, this.tileHeight)), this.collideIndexes.indexOf(o) > -1 ? this.layers[s].data[n][e].setCollision(!0, !0, !0, !0) : this.layers[s].data[n][e].resetCollision(), this.layers[s].dirty = !0, this.calculateFaces(s), this.layers[s].data[n][e] } return null }, putTileWorldXY: function(t, e, i, n, s, o) { return o = this.getLayer(o), e = this.game.math.snapToFloor(e, n) / n, i = this.game.math.snapToFloor(i, s) / s, this.putTile(t, e, i, o) }, searchTileIndex: function(t, e, i, n) { void 0 === e && (e = 0), void 0 === i && (i = !1), n = this.getLayer(n); var s = 0; if (i) { for (o = this.layers[n].height - 1; o >= 0; o--)
                        for (a = this.layers[n].width - 1; a >= 0; a--)
                            if (this.layers[n].data[o][a].index === t) { if (s === e) return this.layers[n].data[o][a];
                                s++ } } else
                    for (var o = 0; o < this.layers[n].height; o++)
                        for (var a = 0; a < this.layers[n].width; a++)
                            if (this.layers[n].data[o][a].index === t) { if (s === e) return this.layers[n].data[o][a];
                                s++ } return null }, getTile: function(t, e, i, n) { return void 0 === n && (n = !1), i = this.getLayer(i), t >= 0 && t < this.layers[i].width && e >= 0 && e < this.layers[i].height ? -1 === this.layers[i].data[e][t].index ? n ? this.layers[i].data[e][t] : null : this.layers[i].data[e][t] : null }, getTileWorldXY: function(t, e, i, n, s, o) { return void 0 === i && (i = this.tileWidth), void 0 === n && (n = this.tileHeight), s = this.getLayer(s), t = this.game.math.snapToFloor(t, i) / i, e = this.game.math.snapToFloor(e, n) / n, this.getTile(t, e, s, o) }, copy: function(t, e, i, n, s) { s = this.getLayer(s); { if (this.layers[s]) { void 0 === t && (t = 0), void 0 === e && (e = 0), void 0 === i && (i = this.layers[s].width), void 0 === n && (n = this.layers[s].height), t < 0 && (t = 0), e < 0 && (e = 0), i > this.layers[s].width && (i = this.layers[s].width), n > this.layers[s].height && (n = this.layers[s].height), this._results.length = 0, this._results.push({ x: t, y: e, width: i, height: n, layer: s }); for (var o = e; o < e + n; o++)
                            for (var a = t; a < t + i; a++) this._results.push(this.layers[s].data[o][a]); return this._results } this._results.length = 0 } }, paste: function(t, e, i, n) { if (void 0 === t && (t = 0), void 0 === e && (e = 0), n = this.getLayer(n), i && !(i.length < 2)) { for (var s = t - i[1].x, o = e - i[1].y, a = 1; a < i.length; a++) this.layers[n].data[o + i[a].y][s + i[a].x].copy(i[a]);
                    this.layers[n].dirty = !0, this.calculateFaces(n) } }, swap: function(t, e, i, n, s, o, a) { a = this.getLayer(a), this.copy(i, n, s, o, a), this._results.length < 2 || (this._tempA = t, this._tempB = e, this._results.forEach(this.swapHandler, this), this.paste(i, n, this._results, a)) }, swapHandler: function(t) { t.index === this._tempA ? t.index = this._tempB : t.index === this._tempB && (t.index = this._tempA) }, forEach: function(t, e, i, n, s, o, a) { a = this.getLayer(a), this.copy(i, n, s, o, a), this._results.length < 2 || (this._results.forEach(t, e), this.paste(i, n, this._results, a)) }, replace: function(t, e, i, n, s, o, a) { if (a = this.getLayer(a), this.copy(i, n, s, o, a), !(this._results.length < 2)) { for (var r = 1; r < this._results.length; r++) this._results[r].index === t && (this._results[r].index = e);
                    this.paste(i, n, this._results, a) } }, random: function(t, e, i, n, s) { if (s = this.getLayer(s), this.copy(t, e, i, n, s), !(this._results.length < 2)) { for (var o = [], a = 1; a < this._results.length; a++)
                        if (this._results[a].index) { var r = this._results[a].index; - 1 === o.indexOf(r) && o.push(r) } for (var h = 1; h < this._results.length; h++) this._results[h].index = this.game.rnd.pick(o);
                    this.paste(t, e, this._results, s) } }, shuffle: function(t, e, n, s, o) { if (o = this.getLayer(o), this.copy(t, e, n, s, o), !(this._results.length < 2)) { for (var a = [], r = 1; r < this._results.length; r++) this._results[r].index && a.push(this._results[r].index);
                    i.ArrayUtils.shuffle(a); for (var h = 1; h < this._results.length; h++) this._results[h].index = a[h - 1];
                    this.paste(t, e, this._results, o) } }, fill: function(t, e, i, n, s, o) { if (o = this.getLayer(o), this.copy(e, i, n, s, o), !(this._results.length < 2)) { for (var a = 1; a < this._results.length; a++) this._results[a].index = t;
                    this.paste(e, i, this._results, o) } }, removeAllLayers: function() { this.layers.length = 0, this.currentLayer = 0 }, dump: function() { for (var t = "", e = [""], i = 0; i < this.layers[this.currentLayer].height; i++) { for (var n = 0; n < this.layers[this.currentLayer].width; n++) t += "%c  ", this.layers[this.currentLayer].data[i][n] > 1 ? this.debugMap[this.layers[this.currentLayer].data[i][n]] ? e.push("background: " + this.debugMap[this.layers[this.currentLayer].data[i][n]]) : e.push("background: #ffffff") : e.push("background: rgb(0, 0, 0)");
                    t += "\n" } e[0] = t, console.log.apply(console, e) }, destroy: function() { this.removeAllLayers(), this.data = [], this.game = null } }, i.Tilemap.prototype.constructor = i.Tilemap, Object.defineProperty(i.Tilemap.prototype, "layer", { get: function() { return this.layers[this.currentLayer] }, set: function(t) { t !== this.currentLayer && this.setLayer(t) } }), i.TilemapLayer = function(t, e, n, s, o) { s |= 0, o |= 0, i.Sprite.call(this, t, 0, 0), this.map = e, this.index = n, this.layer = e.layers[n], this.canvas = PIXI.CanvasPool.create(this, s, o), this.context = this.canvas.getContext("2d"), this.setTexture(new PIXI.Texture(new PIXI.BaseTexture(this.canvas))), this.type = i.TILEMAPLAYER, this.physicsType = i.TILEMAPLAYER, this.renderSettings = { enableScrollDelta: !1, overdrawRatio: .2, copyCanvas: null }, this.debug = !1, this.exists = !0, this.debugSettings = { missingImageFill: "rgb(255,255,255)", debuggedTileOverfill: "rgba(0,255,0,0.4)", forceFullRedraw: !0, debugAlpha: .5, facingEdgeStroke: "rgba(0,255,0,1)", collidingTileOverfill: "rgba(0,255,0,0.2)" }, this.scrollFactorX = 1, this.scrollFactorY = 1, this.dirty = !0, this.rayStepRate = 4, this._wrap = !1, this._mc = { scrollX: 0, scrollY: 0, renderWidth: 0, renderHeight: 0, tileWidth: e.tileWidth, tileHeight: e.tileHeight, cw: e.tileWidth, ch: e.tileHeight, tilesets: [] }, this._scrollX = 0, this._scrollY = 0, this._results = [], t.device.canvasBitBltShift || (this.renderSettings.copyCanvas = i.TilemapLayer.ensureSharedCopyCanvas()), this.fixedToCamera = !0 }, i.TilemapLayer.prototype = Object.create(i.Sprite.prototype), i.TilemapLayer.prototype.constructor = i.TilemapLayer, i.TilemapLayer.prototype.preUpdateCore = i.Component.Core.preUpdate, i.TilemapLayer.sharedCopyCanvas = null, i.TilemapLayer.ensureSharedCopyCanvas = function() { return this.sharedCopyCanvas || (this.sharedCopyCanvas = PIXI.CanvasPool.create(this, 2, 2)), this.sharedCopyCanvas }, i.TilemapLayer.prototype.preUpdate = function() { return this.preUpdateCore() }, i.TilemapLayer.prototype.postUpdate = function() { this.fixedToCamera && (this.position.x = (this.game.camera.view.x + this.cameraOffset.x) / this.game.camera.scale.x, this.position.y = (this.game.camera.view.y + this.cameraOffset.y) / this.game.camera.scale.y), this._scrollX = this.game.camera.view.x * this.scrollFactorX / this.scale.x, this._scrollY = this.game.camera.view.y * this.scrollFactorY / this.scale.y }, i.TilemapLayer.prototype._renderCanvas = function(t) { this.fixedToCamera && (this.position.x = (this.game.camera.view.x + this.cameraOffset.x) / this.game.camera.scale.x, this.position.y = (this.game.camera.view.y + this.cameraOffset.y) / this.game.camera.scale.y), this._scrollX = this.game.camera.view.x * this.scrollFactorX / this.scale.x, this._scrollY = this.game.camera.view.y * this.scrollFactorY / this.scale.y, this.render(), PIXI.Sprite.prototype._renderCanvas.call(this, t) }, i.TilemapLayer.prototype._renderWebGL = function(t) { this.fixedToCamera && (this.position.x = (this.game.camera.view.x + this.cameraOffset.x) / this.game.camera.scale.x, this.position.y = (this.game.camera.view.y + this.cameraOffset.y) / this.game.camera.scale.y), this._scrollX = this.game.camera.view.x * this.scrollFactorX / this.scale.x, this._scrollY = this.game.camera.view.y * this.scrollFactorY / this.scale.y, this.render(), PIXI.Sprite.prototype._renderWebGL.call(this, t) }, i.TilemapLayer.prototype.destroy = function() { PIXI.CanvasPool.remove(this), i.Component.Destroy.prototype.destroy.call(this) }, i.TilemapLayer.prototype.resize = function(t, e) { this.canvas.width = t, this.canvas.height = e, this.texture.frame.resize(t, e), this.texture.width = t, this.texture.height = e, this.texture.crop.width = t, this.texture.crop.height = e, this.texture.baseTexture.width = t, this.texture.baseTexture.height = e, this.texture.baseTexture.dirty(), this.texture.requiresUpdate = !0, this.texture._updateUvs(), this.dirty = !0 }, i.TilemapLayer.prototype.resizeWorld = function() { this.game.world.setBounds(0, 0, this.layer.widthInPixels * this.scale.x, this.layer.heightInPixels * this.scale.y) }, i.TilemapLayer.prototype._fixX = function(t) { return 1 === this.scrollFactorX || 0 === this.scrollFactorX && 0 === this.position.x ? t : 0 === this.scrollFactorX && 0 !== this.position.x ? t - this.position.x : this._scrollX + (t - this._scrollX / this.scrollFactorX) }, i.TilemapLayer.prototype._unfixX = function(t) { return 1 === this.scrollFactorX ? t : this._scrollX / this.scrollFactorX + (t - this._scrollX) }, i.TilemapLayer.prototype._fixY = function(t) { return 1 === this.scrollFactorY || 0 === this.scrollFactorY && 0 === this.position.y ? t : 0 === this.scrollFactorY && 0 !== this.position.y ? t - this.position.y : this._scrollY + (t - this._scrollY / this.scrollFactorY) }, i.TilemapLayer.prototype._unfixY = function(t) { return 1 === this.scrollFactorY ? t : this._scrollY / this.scrollFactorY + (t - this._scrollY) }, i.TilemapLayer.prototype.getTileX = function(t) { return Math.floor(this._fixX(t) / this._mc.tileWidth) }, i.TilemapLayer.prototype.getTileY = function(t) { return Math.floor(this._fixY(t) / this._mc.tileHeight) }, i.TilemapLayer.prototype.getTileXY = function(t, e, i) { return i.x = this.getTileX(t), i.y = this.getTileY(e), i }, i.TilemapLayer.prototype.getRayCastTiles = function(t, e, i, n) { e || (e = this.rayStepRate), void 0 === i && (i = !1), void 0 === n && (n = !1); var s = this.getTiles(t.x, t.y, t.width, t.height, i, n); if (0 === s.length) return []; for (var o = t.coordinatesOnLine(e), a = [], r = 0; r < s.length; r++)
                for (var h = 0; h < o.length; h++) { var l = s[r],
                        c = o[h]; if (l.containsPoint(c[0], c[1])) { a.push(l); break } }
            return a }, i.TilemapLayer.prototype.getTiles = function(t, e, i, n, s, o) { void 0 === s && (s = !1), void 0 === o && (o = !1); var a = !(s || o);
            t = this._fixX(t), e = this._fixY(e); for (var r = Math.floor(t / (this._mc.cw * this.scale.x)), h = Math.floor(e / (this._mc.ch * this.scale.y)), l = Math.ceil((t + i) / (this._mc.cw * this.scale.x)) - r, c = Math.ceil((e + n) / (this._mc.ch * this.scale.y)) - h; this._results.length;) this._results.pop(); for (var u = h; u < h + c; u++)
                for (var p = r; p < r + l; p++) { var d = this.layer.data[u];
                    d && d[p] && (a || d[p].isInteresting(s, o)) && this._results.push(d[p]) }
            return this._results.slice() }, i.TilemapLayer.prototype.resolveTileset = function(t) { var e = this._mc.tilesets; if (t < 2e3)
                for (; e.length < t;) e.push(void 0); var i = this.map.tiles[t] && this.map.tiles[t][2]; if (null !== i) { var n = this.map.tilesets[i]; if (n && n.containsTileIndex(t)) return e[t] = n } return e[t] = null }, i.TilemapLayer.prototype.resetTilesetCache = function() { for (var t = this._mc.tilesets; t.length;) t.pop() }, i.TilemapLayer.prototype.setScale = function(t, e) { t = t || 1, e = e || t; for (var i = 0; i < this.layer.data.length; i++)
                for (var n = this.layer.data[i], s = 0; s < n.length; s++) { var o = n[s];
                    o.width = this.map.tileWidth * t, o.height = this.map.tileHeight * e, o.worldX = o.x * o.width, o.worldY = o.y * o.height } this.scale.setTo(t, e) }, i.TilemapLayer.prototype.shiftCanvas = function(t, e, i) { var n = t.canvas,
                s = n.width - Math.abs(e),
                o = n.height - Math.abs(i),
                a = 0,
                r = 0,
                h = e,
                l = i;
            e < 0 && (a = -e, h = 0), i < 0 && (r = -i, l = 0); var c = this.renderSettings.copyCanvas; if (c) {
                (c.width < s || c.height < o) && (c.width = s, c.height = o); var u = c.getContext("2d");
                u.clearRect(0, 0, s, o), u.drawImage(n, a, r, s, o, 0, 0, s, o), t.clearRect(h, l, s, o), t.drawImage(c, 0, 0, s, o, h, l, s, o) } else t.save(), t.globalCompositeOperation = "copy", t.drawImage(n, a, r, s, o, h, l, s, o), t.restore() }, i.TilemapLayer.prototype.renderRegion = function(t, e, i, n, s, o) { var a = this.context,
                r = this.layer.width,
                h = this.layer.height,
                l = this._mc.tileWidth,
                c = this._mc.tileHeight,
                u = this._mc.tilesets,
                p = NaN;
            this._wrap || (i <= s && (i = Math.max(0, i), s = Math.min(r - 1, s)), n <= o && (n = Math.max(0, n), o = Math.min(h - 1, o))); var d, m, g, f, y, v, b = i * l - t,
                _ = (i + (1 << 20) * r) % r; for (f = (n + (1 << 20) * h) % h, v = o - n, m = n * c - e; v >= 0; f++, v--, m += c) { f >= h && (f -= h); var S = this.layer.data[f]; for (g = _, y = s - i, d = b; y >= 0; g++, y--, d += l) { g >= r && (g -= r); var w = S[g]; if (w && !(w.index < 0)) { var C = w.index,
                            A = u[C];
                        void 0 === A && (A = this.resolveTileset(C)), w.alpha === p || this.debug || (a.globalAlpha = w.alpha, p = w.alpha), A ? w.rotation || w.flipped ? (a.save(), a.translate(d + w.centerX, m + w.centerY), a.rotate(w.rotation), w.flipped && a.scale(-1, 1), A.draw(a, -w.centerX, -w.centerY, C), a.restore()) : A.draw(a, d, m, C) : this.debugSettings.missingImageFill && (a.fillStyle = this.debugSettings.missingImageFill, a.fillRect(d, m, l, c)), w.debug && this.debugSettings.debuggedTileOverfill && (a.fillStyle = this.debugSettings.debuggedTileOverfill, a.fillRect(d, m, l, c)) } } } }, i.TilemapLayer.prototype.renderDeltaScroll = function(t, e) { var i = this._mc.scrollX,
                n = this._mc.scrollY,
                s = this.canvas.width,
                o = this.canvas.height,
                a = this._mc.tileWidth,
                r = this._mc.tileHeight,
                h = 0,
                l = -a,
                c = 0,
                u = -r; if (t < 0 ? (h = s + t, l = s - 1) : t > 0 && (l = t), e < 0 ? (c = o + e, u = o - 1) : e > 0 && (u = e), this.shiftCanvas(this.context, t, e), h = Math.floor((h + i) / a), l = Math.floor((l + i) / a), c = Math.floor((c + n) / r), u = Math.floor((u + n) / r), h <= l) { this.context.clearRect(h * a - i, 0, (l - h + 1) * a, o); var p = Math.floor((0 + n) / r),
                    d = Math.floor((o - 1 + n) / r);
                this.renderRegion(i, n, h, p, l, d) } if (c <= u) { this.context.clearRect(0, c * r - n, s, (u - c + 1) * r); var m = Math.floor((0 + i) / a),
                    g = Math.floor((s - 1 + i) / a);
                this.renderRegion(i, n, m, c, g, u) } }, i.TilemapLayer.prototype.renderFull = function() { var t = this._mc.scrollX,
                e = this._mc.scrollY,
                i = this.canvas.width,
                n = this.canvas.height,
                s = this._mc.tileWidth,
                o = this._mc.tileHeight,
                a = Math.floor(t / s),
                r = Math.floor((i - 1 + t) / s),
                h = Math.floor(e / o),
                l = Math.floor((n - 1 + e) / o);
            this.context.clearRect(0, 0, i, n), this.renderRegion(t, e, a, h, r, l) }, i.TilemapLayer.prototype.render = function() { var t = !1; if (this.visible) {
                (this.dirty || this.layer.dirty) && (this.layer.dirty = !1, t = !0); var e = this.canvas.width,
                    i = this.canvas.height,
                    n = 0 | this._scrollX,
                    s = 0 | this._scrollY,
                    o = this._mc,
                    a = o.scrollX - n,
                    r = o.scrollY - s; if (t || 0 !== a || 0 !== r || o.renderWidth !== e || o.renderHeight !== i) return this.context.save(), o.scrollX = n, o.scrollY = s, o.renderWidth === e && o.renderHeight === i || (o.renderWidth = e, o.renderHeight = i), this.debug && (this.context.globalAlpha = this.debugSettings.debugAlpha, this.debugSettings.forceFullRedraw && (t = !0)), !t && this.renderSettings.enableScrollDelta && Math.abs(a) + Math.abs(r) < Math.min(e, i) ? this.renderDeltaScroll(a, r) : this.renderFull(), this.debug && (this.context.globalAlpha = 1, this.renderDebug()), this.texture.baseTexture.dirty(), this.dirty = !1, this.context.restore(), !0 } }, i.TilemapLayer.prototype.renderDebug = function() { var t, e, i, n, s, o, a = this._mc.scrollX,
                r = this._mc.scrollY,
                h = this.context,
                l = this.canvas.width,
                c = this.canvas.height,
                u = this.layer.width,
                p = this.layer.height,
                d = this._mc.tileWidth,
                m = this._mc.tileHeight,
                g = Math.floor(a / d),
                f = Math.floor((l - 1 + a) / d),
                y = Math.floor(r / m),
                v = Math.floor((c - 1 + r) / m),
                b = g * d - a,
                _ = y * m - r,
                S = (g + (1 << 20) * u) % u,
                w = (y + (1 << 20) * p) % p; for (h.strokeStyle = this.debugSettings.facingEdgeStroke, n = w, o = v - y, e = _; o >= 0; n++, o--, e += m) { n >= p && (n -= p); var C = this.layer.data[n]; for (i = S, s = f - g, t = b; s >= 0; i++, s--, t += d) { i >= u && (i -= u); var A = C[i];!A || A.index < 0 || !A.collides || (this.debugSettings.collidingTileOverfill && (h.fillStyle = this.debugSettings.collidingTileOverfill, h.fillRect(t, e, this._mc.cw, this._mc.ch)), this.debugSettings.facingEdgeStroke && (h.beginPath(), A.faceTop && (h.moveTo(t, e), h.lineTo(t + this._mc.cw, e)), A.faceBottom && (h.moveTo(t, e + this._mc.ch), h.lineTo(t + this._mc.cw, e + this._mc.ch)), A.faceLeft && (h.moveTo(t, e), h.lineTo(t, e + this._mc.ch)), A.faceRight && (h.moveTo(t + this._mc.cw, e), h.lineTo(t + this._mc.cw, e + this._mc.ch)), h.closePath(), h.stroke())) } } }, Object.defineProperty(i.TilemapLayer.prototype, "wrap", { get: function() { return this._wrap }, set: function(t) { this._wrap = t, this.dirty = !0 } }), Object.defineProperty(i.TilemapLayer.prototype, "scrollX", { get: function() { return this._scrollX }, set: function(t) { this._scrollX = t } }), Object.defineProperty(i.TilemapLayer.prototype, "scrollY", { get: function() { return this._scrollY }, set: function(t) { this._scrollY = t } }), Object.defineProperty(i.TilemapLayer.prototype, "collisionWidth", { get: function() { return this._mc.cw }, set: function(t) { this._mc.cw = 0 | t, this.dirty = !0 } }), Object.defineProperty(i.TilemapLayer.prototype, "collisionHeight", { get: function() { return this._mc.ch }, set: function(t) { this._mc.ch = 0 | t, this.dirty = !0 } }), i.TilemapParser = { INSERT_NULL: !1, parse: function(t, e, n, s, o, a) { if (void 0 === n && (n = 32), void 0 === s && (s = 32), void 0 === o && (o = 10), void 0 === a && (a = 10), void 0 === e) return this.getEmptyData(); if (null === e) return this.getEmptyData(n, s, o, a); var r = t.cache.getTilemapData(e); if (r) { if (r.format === i.Tilemap.CSV) return this.parseCSV(e, r.data, n, s); if (!r.format || r.format === i.Tilemap.TILED_JSON) return this.parseTiledJSON(r.data) } else console.warn("Phaser.TilemapParser.parse - No map data found for key " + e) }, parseCSV: function(t, e, n, s) { for (var o = this.getEmptyData(), a = [], r = (e = e.trim()).split("\n"), h = r.length, l = 0, c = 0; c < r.length; c++) { a[c] = []; for (var u = r[c].split(","), p = 0; p < u.length; p++) a[c][p] = new i.Tile(o.layers[0], parseInt(u[p], 10), p, c, n, s);
                    0 === l && (l = u.length) } return o.format = i.Tilemap.CSV, o.name = t, o.width = l, o.height = h, o.tileWidth = n, o.tileHeight = s, o.widthInPixels = l * n, o.heightInPixels = h * s, o.layers[0].width = l, o.layers[0].height = h, o.layers[0].widthInPixels = o.widthInPixels, o.layers[0].heightInPixels = o.heightInPixels, o.layers[0].data = a, o }, getEmptyData: function(t, e, i, n) { return { width: void 0 !== i && null !== i ? i : 0, height: void 0 !== n && null !== n ? n : 0, tileWidth: void 0 !== t && null !== t ? t : 0, tileHeight: void 0 !== e && null !== e ? e : 0, orientation: "orthogonal", version: "1", properties: {}, widthInPixels: 0, heightInPixels: 0, layers: [{ name: "layer", x: 0, y: 0, width: 0, height: 0, widthInPixels: 0, heightInPixels: 0, alpha: 1, visible: !0, properties: {}, indexes: [], callbacks: [], bodies: [], data: [] }], images: [], objects: {}, collision: {}, tilesets: [], tiles: [] } }, parseTiledJSON: function(t) {
                function e(t, e) { var i = {}; for (var n in e) { var s = e[n];
                        void 0 !== t[s] && (i[s] = t[s]) } return i } if ("orthogonal" !== t.orientation) return console.warn("TilemapParser.parseTiledJSON - Only orthogonal map types are supported in this version of Phaser"), null; for (var n = { width: t.width, height: t.height, tileWidth: t.tilewidth, tileHeight: t.tileheight, orientation: t.orientation, format: i.Tilemap.TILED_JSON, version: t.version, properties: t.properties, widthInPixels: t.width * t.tilewidth, heightInPixels: t.height * t.tileheight }, s = [], o = 0; o < t.layers.length; o++)
                    if ("tilelayer" === t.layers[o].type) { var a = t.layers[o]; if (!a.compression && a.encoding && "base64" === a.encoding) { for (var r = window.atob(a.data), h = r.length, l = new Array(h), c = 0; c < h; c += 4) l[c / 4] = (r.charCodeAt(c) | r.charCodeAt(c + 1) << 8 | r.charCodeAt(c + 2) << 16 | r.charCodeAt(c + 3) << 24) >>> 0;
                            a.data = l, delete a.encoding } else if (a.compression) { console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '" + a.name + "'"); continue } U = { name: a.name, x: a.x, y: a.y, width: a.width, height: a.height, widthInPixels: a.width * t.tilewidth, heightInPixels: a.height * t.tileheight, alpha: a.opacity, visible: a.visible, properties: {}, indexes: [], callbacks: [], bodies: [] };
                        a.properties && (U.properties = a.properties); for (var u, p, d, m = 0, g = [], f = [], y = 0, h = a.data.length; y < h; y++) { if (u = 0, p = !1, P = a.data[y], d = 0, P > 536870912) switch (P > 2147483648 && (P -= 2147483648, d += 4), P > 1073741824 && (P -= 1073741824, d += 2), P > 536870912 && (P -= 536870912, d += 1), d) {
                                case 5:
                                    u = Math.PI / 2; break;
                                case 6:
                                    u = Math.PI; break;
                                case 3:
                                    u = 3 * Math.PI / 2; break;
                                case 4:
                                    u = 0, p = !0; break;
                                case 7:
                                    u = Math.PI / 2, p = !0; break;
                                case 2:
                                    u = Math.PI, p = !0; break;
                                case 1:
                                    u = 3 * Math.PI / 2, p = !0 } P > 0 ? ((F = new i.Tile(U, P, m, f.length, t.tilewidth, t.tileheight)).rotation = u, F.flipped = p, 0 !== d && (F.flippedVal = d), g.push(F)) : i.TilemapParser.INSERT_NULL ? g.push(null) : g.push(new i.Tile(U, -1, m, f.length, t.tilewidth, t.tileheight)), ++m === a.width && (f.push(g), m = 0, g = []) } U.data = f, s.push(U) } n.layers = s; for (var v = [], o = 0; o < t.layers.length; o++)
                    if ("imagelayer" === t.layers[o].type) { var b = t.layers[o],
                            _ = { name: b.name, image: b.image, x: b.x, y: b.y, alpha: b.opacity, visible: b.visible, properties: {} };
                        b.properties && (_.properties = b.properties), v.push(_) } n.images = v; for (var S = [], w = [], C = null, o = 0; o < t.tilesets.length; o++) { if ((j = t.tilesets[o]).image) { var A = new i.Tileset(j.name, j.firstgid, j.tilewidth, j.tileheight, j.margin, j.spacing, j.properties);
                        j.tileproperties && (A.tileProperties = j.tileproperties), A.updateTileData(j.imagewidth, j.imageheight), S.push(A) } else { var T = new i.ImageCollection(j.name, j.firstgid, j.tilewidth, j.tileheight, j.margin, j.spacing, j.properties); for (var x in j.tiles) { var _ = j.tiles[x].image,
                                P = j.firstgid + parseInt(x, 10);
                            T.addImage(P, _) } w.push(T) } C && (C.lastgid = j.firstgid - 1), C = j } n.tilesets = S, n.imagecollections = w; for (var I = {}, O = {}, o = 0; o < t.layers.length; o++)
                    if ("objectgroup" === t.layers[o].type) { var E = t.layers[o];
                        I[E.name] = [], O[E.name] = []; for (var L = 0, h = E.objects.length; L < h; L++)
                            if (E.objects[L].gid) { M = { gid: E.objects[L].gid, name: E.objects[L].name, type: E.objects[L].hasOwnProperty("type") ? E.objects[L].type : "", x: E.objects[L].x, y: E.objects[L].y, visible: E.objects[L].visible, properties: E.objects[L].properties };
                                E.objects[L].rotation && (M.rotation = E.objects[L].rotation), I[E.name].push(M) } else if (E.objects[L].polyline) { M = { name: E.objects[L].name, type: E.objects[L].type, x: E.objects[L].x, y: E.objects[L].y, width: E.objects[L].width, height: E.objects[L].height, visible: E.objects[L].visible, properties: E.objects[L].properties };
                            E.objects[L].rotation && (M.rotation = E.objects[L].rotation), M.polyline = []; for (k = 0; k < E.objects[L].polyline.length; k++) M.polyline.push([E.objects[L].polyline[k].x, E.objects[L].polyline[k].y]);
                            O[E.name].push(M), I[E.name].push(M) } else if (E.objects[L].polygon) {
                            (M = e(E.objects[L], ["name", "type", "x", "y", "visible", "rotation", "properties"])).polygon = []; for (var k = 0; k < E.objects[L].polygon.length; k++) M.polygon.push([E.objects[L].polygon[k].x, E.objects[L].polygon[k].y]);
                            I[E.name].push(M) } else if (E.objects[L].ellipse) { var M = e(E.objects[L], ["name", "type", "ellipse", "x", "y", "width", "height", "visible", "rotation", "properties"]);
                            I[E.name].push(M) } else(M = e(E.objects[L], ["name", "type", "x", "y", "width", "height", "visible", "rotation", "properties"])).rectangle = !0, I[E.name].push(M) } n.objects = I, n.collision = O, n.tiles = []; for (o = 0; o < n.tilesets.length; o++)
                    for (var m = (j = n.tilesets[o]).tileMargin, B = j.tileMargin, D = 0, G = 0, R = 0, y = j.firstgid; y < j.firstgid + j.total && (n.tiles[y] = [m, B, o], m += j.tileWidth + j.tileSpacing, ++D !== j.total) && (++G !== j.columns || (m = j.tileMargin, B += j.tileHeight + j.tileSpacing, G = 0, ++R !== j.rows)); y++); for (var U, F, N, j, o = 0; o < n.layers.length; o++) { U = n.layers[o], j = null; for (c = 0; c < U.data.length; c++) { g = U.data[c]; for (var H = 0; H < g.length; H++) null === (F = g[H]) || F.index < 0 || (N = n.tiles[F.index][2], (j = n.tilesets[N]).tileProperties && j.tileProperties[F.index - j.firstgid] && (F.properties = i.Utils.mixin(j.tileProperties[F.index - j.firstgid], F.properties))) } } return n } }, i.Tileset = function(t, e, i, n, s, o, a) {
            (void 0 === i || i <= 0) && (i = 32), (void 0 === n || n <= 0) && (n = 32), void 0 === s && (s = 0), void 0 === o && (o = 0), this.name = t, this.firstgid = 0 | e, this.tileWidth = 0 | i, this.tileHeight = 0 | n, this.tileMargin = 0 | s, this.tileSpacing = 0 | o, this.properties = a || {}, this.image = null, this.rows = 0, this.columns = 0, this.total = 0, this.drawCoords = [] }, i.Tileset.prototype = { draw: function(t, e, i, n) { var s = n - this.firstgid << 1;
                s >= 0 && s + 1 < this.drawCoords.length && t.drawImage(this.image, this.drawCoords[s], this.drawCoords[s + 1], this.tileWidth, this.tileHeight, e, i, this.tileWidth, this.tileHeight) }, containsTileIndex: function(t) { return t >= this.firstgid && t < this.firstgid + this.total }, setImage: function(t) { this.image = t, this.updateTileData(t.width, t.height) }, setSpacing: function(t, e) { this.tileMargin = 0 | t, this.tileSpacing = 0 | e, this.image && this.updateTileData(this.image.width, this.image.height) }, updateTileData: function(t, e) { var i = (e - 2 * this.tileMargin + this.tileSpacing) / (this.tileHeight + this.tileSpacing),
                    n = (t - 2 * this.tileMargin + this.tileSpacing) / (this.tileWidth + this.tileSpacing);
                i % 1 == 0 && n % 1 == 0 || console.warn("Phaser.Tileset - " + this.name + " image tile area is not an even multiple of tile size"), i = Math.floor(i), n = Math.floor(n), (this.rows && this.rows !== i || this.columns && this.columns !== n) && console.warn("Phaser.Tileset - actual and expected number of tile rows and columns differ"), this.rows = i, this.columns = n, this.total = i * n, this.drawCoords.length = 0; for (var s = this.tileMargin, o = this.tileMargin, a = 0; a < this.rows; a++) { for (var r = 0; r < this.columns; r++) this.drawCoords.push(s), this.drawCoords.push(o), s += this.tileWidth + this.tileSpacing;
                    s = this.tileMargin, o += this.tileHeight + this.tileSpacing } } }, i.Tileset.prototype.constructor = i.Tileset, i.Particle = function(t, e, n, s, o) { i.Sprite.call(this, t, e, n, s, o), this.autoScale = !1, this.scaleData = null, this._s = 0, this.autoAlpha = !1, this.alphaData = null, this._a = 0 }, i.Particle.prototype = Object.create(i.Sprite.prototype), i.Particle.prototype.constructor = i.Particle, i.Particle.prototype.update = function() { this.autoScale && (--this._s ? this.scale.set(this.scaleData[this._s].x, this.scaleData[this._s].y) : this.autoScale = !1), this.autoAlpha && (--this._a ? this.alpha = this.alphaData[this._a].v : this.autoAlpha = !1) }, i.Particle.prototype.onEmit = function() {}, i.Particle.prototype.setAlphaData = function(t) { this.alphaData = t, this._a = t.length - 1, this.alpha = this.alphaData[this._a].v, this.autoAlpha = !0 }, i.Particle.prototype.setScaleData = function(t) { this.scaleData = t, this._s = t.length - 1, this.scale.set(this.scaleData[this._s].x, this.scaleData[this._s].y), this.autoScale = !0 }, i.Particle.prototype.reset = function(t, e, n) { return i.Component.Reset.prototype.reset.call(this, t, e, n), this.alpha = 1, this.scale.set(1), this.autoScale = !1, this.autoAlpha = !1, this }, i.Particles = function(t) { this.game = t, this.emitters = {}, this.ID = 0 }, i.Particles.prototype = { add: function(t) { return this.emitters[t.name] = t, t }, remove: function(t) { delete this.emitters[t.name] }, update: function() { for (var t in this.emitters) this.emitters[t].exists && this.emitters[t].update() } }, i.Particles.prototype.constructor = i.Particles, i.Particles.Arcade = {}, i.Particles.Arcade.Emitter = function(t, e, n, s) { this.maxParticles = s || 50, i.Group.call(this, t), this.name = "emitter" + this.game.particles.ID++, this.type = i.EMITTER, this.physicsType = i.GROUP, this.area = new i.Rectangle(e, n, 1, 1), this.minParticleSpeed = new i.Point(-100, -100), this.maxParticleSpeed = new i.Point(100, 100), this.minParticleScale = 1, this.maxParticleScale = 1, this.scaleData = null, this.minRotation = -360, this.maxRotation = 360, this.minParticleAlpha = 1, this.maxParticleAlpha = 1, this.alphaData = null, this.gravity = 100, this.particleClass = i.Particle, this.particleDrag = new i.Point, this.angularDrag = 0, this.frequency = 100, this.lifespan = 2e3, this.bounce = new i.Point, this.on = !1, this.particleAnchor = new i.Point(.5, .5), this.blendMode = i.blendModes.NORMAL, this.emitX = e, this.emitY = n, this.autoScale = !1, this.autoAlpha = !1, this.particleBringToTop = !1, this.particleSendToBack = !1, this._minParticleScale = new i.Point(1, 1), this._maxParticleScale = new i.Point(1, 1), this._quantity = 0, this._timer = 0, this._counter = 0, this._flowQuantity = 0, this._flowTotal = 0, this._explode = !0, this._frames = null }, i.Particles.Arcade.Emitter.prototype = Object.create(i.Group.prototype), i.Particles.Arcade.Emitter.prototype.constructor = i.Particles.Arcade.Emitter, i.Particles.Arcade.Emitter.prototype.update = function() { if (this.on && this.game.time.time >= this._timer)
                if (this._timer = this.game.time.time + this.frequency * this.game.time.slowMotion, 0 !== this._flowTotal)
                    if (this._flowQuantity > 0) { for (t = 0; t < this._flowQuantity; t++)
                            if (this.emitParticle() && (this._counter++, -1 !== this._flowTotal && this._counter >= this._flowTotal)) { this.on = !1; break } } else this.emitParticle() && (this._counter++, -1 !== this._flowTotal && this._counter >= this._flowTotal && (this.on = !1));
            else this.emitParticle() && (this._counter++, this._quantity > 0 && this._counter >= this._quantity && (this.on = !1)); for (var t = this.children.length; t--;) this.children[t].exists && this.children[t].update() }, i.Particles.Arcade.Emitter.prototype.makeParticles = function(t, e, i, n, s) { void 0 === e && (e = 0), void 0 === i && (i = this.maxParticles), void 0 === n && (n = !1), void 0 === s && (s = !1); var o, a = 0,
                r = t,
                h = e; for (this._frames = e, i > this.maxParticles && (this.maxParticles = i); a < i;) Array.isArray(t) && (r = this.game.rnd.pick(t)), Array.isArray(e) && (h = this.game.rnd.pick(e)), o = new this.particleClass(this.game, 0, 0, r, h), this.game.physics.arcade.enable(o, !1), n ? (o.body.checkCollision.any = !0, o.body.checkCollision.none = !1) : o.body.checkCollision.none = !0, o.body.collideWorldBounds = s, o.body.skipQuadTree = !0, o.exists = !1, o.visible = !1, o.anchor.copyFrom(this.particleAnchor), this.add(o), a++; return this }, i.Particles.Arcade.Emitter.prototype.kill = function() { return this.on = !1, this.alive = !1, this.exists = !1, this }, i.Particles.Arcade.Emitter.prototype.revive = function() { return this.alive = !0, this.exists = !0, this }, i.Particles.Arcade.Emitter.prototype.explode = function(t, e) { return this._flowTotal = 0, this.start(!0, t, 0, e, !1), this }, i.Particles.Arcade.Emitter.prototype.flow = function(t, e, i, n, s) { return void 0 !== i && 0 !== i || (i = 1), void 0 === n && (n = -1), void 0 === s && (s = !0), i > this.maxParticles && (i = this.maxParticles), this._counter = 0, this._flowQuantity = i, this._flowTotal = n, s ? (this.start(!0, t, e, i), this._counter += i, this.on = !0, this._timer = this.game.time.time + e * this.game.time.slowMotion) : this.start(!1, t, e, i), this }, i.Particles.Arcade.Emitter.prototype.start = function(t, e, i, n, s) { if (void 0 === t && (t = !0), void 0 === e && (e = 0), void 0 !== i && null !== i || (i = 250), void 0 === n && (n = 0), void 0 === s && (s = !1), n > this.maxParticles && (n = this.maxParticles), this.revive(), this.visible = !0, this.lifespan = e, this.frequency = i, t || s)
                for (var o = 0; o < n; o++) this.emitParticle();
            else this.on = !0, this._quantity = n, this._counter = 0, this._timer = this.game.time.time + i * this.game.time.slowMotion; return this }, i.Particles.Arcade.Emitter.prototype.emitParticle = function(t, e, i, n) { void 0 === t && (t = null), void 0 === e && (e = null); var s = this.getFirstExists(!1); if (null === s) return !1; var o = this.game.rnd;
            void 0 !== i && void 0 !== n ? s.loadTexture(i, n) : void 0 !== i && s.loadTexture(i); var a = this.emitX,
                r = this.emitY;
            null !== t ? a = t : this.width > 1 && (a = o.between(this.left, this.right)), null !== e ? r = e : this.height > 1 && (r = o.between(this.top, this.bottom)), s.reset(a, r), s.angle = 0, s.lifespan = this.lifespan, this.particleBringToTop ? this.bringToTop(s) : this.particleSendToBack && this.sendToBack(s), this.autoScale ? s.setScaleData(this.scaleData) : 1 !== this.minParticleScale || 1 !== this.maxParticleScale ? s.scale.set(o.realInRange(this.minParticleScale, this.maxParticleScale)) : this._minParticleScale.x === this._maxParticleScale.x && this._minParticleScale.y === this._maxParticleScale.y || s.scale.set(o.realInRange(this._minParticleScale.x, this._maxParticleScale.x), o.realInRange(this._minParticleScale.y, this._maxParticleScale.y)), void 0 === n && (Array.isArray(this._frames) ? s.frame = this.game.rnd.pick(this._frames) : s.frame = this._frames), this.autoAlpha ? s.setAlphaData(this.alphaData) : s.alpha = o.realInRange(this.minParticleAlpha, this.maxParticleAlpha), s.blendMode = this.blendMode; var h = s.body; return h.updateBounds(), h.bounce.copyFrom(this.bounce), h.drag.copyFrom(this.particleDrag), h.velocity.x = o.between(this.minParticleSpeed.x, this.maxParticleSpeed.x), h.velocity.y = o.between(this.minParticleSpeed.y, this.maxParticleSpeed.y), h.angularVelocity = o.between(this.minRotation, this.maxRotation), h.gravity.y = this.gravity, h.angularDrag = this.angularDrag, s.onEmit(), !0 }, i.Particles.Arcade.Emitter.prototype.destroy = function() { this.game.particles.remove(this), i.Group.prototype.destroy.call(this, !0, !1) }, i.Particles.Arcade.Emitter.prototype.setSize = function(t, e) { return this.area.width = t, this.area.height = e, this }, i.Particles.Arcade.Emitter.prototype.setXSpeed = function(t, e) { return t = t || 0, e = e || 0, this.minParticleSpeed.x = t, this.maxParticleSpeed.x = e, this }, i.Particles.Arcade.Emitter.prototype.setYSpeed = function(t, e) { return t = t || 0, e = e || 0, this.minParticleSpeed.y = t, this.maxParticleSpeed.y = e, this }, i.Particles.Arcade.Emitter.prototype.setRotation = function(t, e) { return t = t || 0, e = e || 0, this.minRotation = t, this.maxRotation = e, this }, i.Particles.Arcade.Emitter.prototype.setAlpha = function(t, e, n, s, o) { if (void 0 === t && (t = 1), void 0 === e && (e = 1), void 0 === n && (n = 0), void 0 === s && (s = i.Easing.Linear.None), void 0 === o && (o = !1), this.minParticleAlpha = t, this.maxParticleAlpha = e, this.autoAlpha = !1, n > 0 && t !== e) { var a = { v: t },
                    r = this.game.make.tween(a).to({ v: e }, n, s);
                r.yoyo(o), this.alphaData = r.generateData(60), this.alphaData.reverse(), this.autoAlpha = !0 } return this }, i.Particles.Arcade.Emitter.prototype.setScale = function(t, e, n, s, o, a, r) { if (void 0 === t && (t = 1), void 0 === e && (e = 1), void 0 === n && (n = 1), void 0 === s && (s = 1), void 0 === o && (o = 0), void 0 === a && (a = i.Easing.Linear.None), void 0 === r && (r = !1), this.minParticleScale = 1, this.maxParticleScale = 1, this._minParticleScale.set(t, n), this._maxParticleScale.set(e, s), this.autoScale = !1, o > 0 && (t !== e || n !== s)) { var h = { x: t, y: n },
                    l = this.game.make.tween(h).to({ x: e, y: s }, o, a);
                l.yoyo(r), this.scaleData = l.generateData(60), this.scaleData.reverse(), this.autoScale = !0 } return this }, i.Particles.Arcade.Emitter.prototype.at = function(t) { return t.center ? (this.emitX = t.center.x, this.emitY = t.center.y) : (this.emitX = t.world.x + t.anchor.x * t.width, this.emitY = t.world.y + t.anchor.y * t.height), this }, Object.defineProperty(i.Particles.Arcade.Emitter.prototype, "width", { get: function() { return this.area.width }, set: function(t) { this.area.width = t } }), Object.defineProperty(i.Particles.Arcade.Emitter.prototype, "height", { get: function() { return this.area.height }, set: function(t) { this.area.height = t } }), Object.defineProperty(i.Particles.Arcade.Emitter.prototype, "x", { get: function() { return this.emitX }, set: function(t) { this.emitX = t } }), Object.defineProperty(i.Particles.Arcade.Emitter.prototype, "y", { get: function() { return this.emitY }, set: function(t) { this.emitY = t } }), Object.defineProperty(i.Particles.Arcade.Emitter.prototype, "left", { get: function() { return Math.floor(this.x - this.area.width / 2) } }), Object.defineProperty(i.Particles.Arcade.Emitter.prototype, "right", { get: function() { return Math.floor(this.x + this.area.width / 2) } }), Object.defineProperty(i.Particles.Arcade.Emitter.prototype, "top", { get: function() { return Math.floor(this.y - this.area.height / 2) } }), Object.defineProperty(i.Particles.Arcade.Emitter.prototype, "bottom", { get: function() { return Math.floor(this.y + this.area.height / 2) } }), i.Weapon = function(t, e) { i.Plugin.call(this, t, e), this.bullets = null, this.autoExpandBulletsGroup = !1, this.autofire = !1, this.shots = 0, this.fireLimit = 0, this.fireRate = 100, this.fireRateVariance = 0, this.fireFrom = new i.Rectangle(0, 0, 1, 1), this.fireAngle = i.ANGLE_UP, this.bulletInheritSpriteSpeed = !1, this.bulletAnimation = "", this.bulletFrameRandom = !1, this.bulletFrameCycle = !1, this.bulletWorldWrap = !1, this.bulletWorldWrapPadding = 0, this.bulletAngleOffset = 0, this.bulletAngleVariance = 0, this.bulletSpeed = 200, this.bulletSpeedVariance = 0, this.bulletLifespan = 0, this.bulletKillDistance = 0, this.bulletGravity = new i.Point(0, 0), this.bulletRotateToVelocity = !1, this.bulletKey = "", this.bulletFrame = "", this._bulletClass = i.Bullet, this._bulletCollideWorldBounds = !1, this._bulletKillType = i.Weapon.KILL_WORLD_BOUNDS, this._data = { customBody: !1, width: 0, height: 0, offsetX: 0, offsetY: 0 }, this.bounds = new i.Rectangle, this.bulletBounds = t.world.bounds, this.bulletFrames = [], this.bulletFrameIndex = 0, this.anims = {}, this.onFire = new i.Signal, this.onKill = new i.Signal, this.onFireLimit = new i.Signal, this.trackedSprite = null, this.trackedPointer = null, this.trackRotation = !1, this.trackOffset = new i.Point, this._nextFire = 0, this._rotatedPoint = new i.Point }, i.Weapon.prototype = Object.create(i.Plugin.prototype), i.Weapon.prototype.constructor = i.Weapon, i.Weapon.KILL_NEVER = 0, i.Weapon.KILL_LIFESPAN = 1, i.Weapon.KILL_DISTANCE = 2, i.Weapon.KILL_WEAPON_BOUNDS = 3, i.Weapon.KILL_CAMERA_BOUNDS = 4, i.Weapon.KILL_WORLD_BOUNDS = 5, i.Weapon.KILL_STATIC_BOUNDS = 6, i.Weapon.prototype.createBullets = function(t, e, n, s) { return void 0 === t && (t = 1), void 0 === s && (s = this.game.world), this.bullets || (this.bullets = this.game.add.physicsGroup(i.Physics.ARCADE, s), this.bullets.classType = this._bulletClass), 0 !== t && (-1 === t && (this.autoExpandBulletsGroup = !0, t = 1), this.bullets.createMultiple(t, e, n), this.bullets.setAll("data.bulletManager", this), this.bulletKey = e, this.bulletFrame = n), this }, i.Weapon.prototype.forEach = function(t, e) { return this.bullets.forEachExists(t, e, arguments), this }, i.Weapon.prototype.pauseAll = function() { return this.bullets.setAll("body.enable", !1), this }, i.Weapon.prototype.resumeAll = function() { return this.bullets.setAll("body.enable", !0), this }, i.Weapon.prototype.killAll = function() { return this.bullets.callAllExists("kill", !0), this.bullets.setAll("body.enable", !0), this }, i.Weapon.prototype.resetShots = function(t) { return this.shots = 0, void 0 !== t && (this.fireLimit = t), this }, i.Weapon.prototype.destroy = function() { this.parent.remove(this, !1), this.bullets.destroy(), this.game = null, this.parent = null, this.active = !1, this.visible = !1 }, i.Weapon.prototype.update = function() { this._bulletKillType === i.Weapon.KILL_WEAPON_BOUNDS && (this.trackedSprite ? (this.trackedSprite.updateTransform(), this.bounds.centerOn(this.trackedSprite.worldPosition.x, this.trackedSprite.worldPosition.y)) : this.trackedPointer && this.bounds.centerOn(this.trackedPointer.worldX, this.trackedPointer.worldY)), this.autofire && this.fire() }, i.Weapon.prototype.trackSprite = function(t, e, i, n) { return void 0 === e && (e = 0), void 0 === i && (i = 0), void 0 === n && (n = !1), this.trackedPointer = null, this.trackedSprite = t, this.trackRotation = n, this.trackOffset.set(e, i), this }, i.Weapon.prototype.trackPointer = function(t, e, i) { return void 0 === t && (t = this.game.input.activePointer), void 0 === e && (e = 0), void 0 === i && (i = 0), this.trackedPointer = t, this.trackedSprite = null, this.trackRotation = !1, this.trackOffset.set(e, i), this }, i.Weapon.prototype.fire = function(t, e, n) { if (this.game.time.now < this._nextFire || this.fireLimit > 0 && this.shots === this.fireLimit) return !1; var s = this.bulletSpeed;
            0 !== this.bulletSpeedVariance && (s += i.Math.between(-this.bulletSpeedVariance, this.bulletSpeedVariance)), t ? this.fireFrom.width > 1 ? this.fireFrom.centerOn(t.x, t.y) : (this.fireFrom.x = t.x, this.fireFrom.y = t.y) : this.trackedSprite ? (this.trackRotation ? (this._rotatedPoint.set(this.trackedSprite.world.x + this.trackOffset.x, this.trackedSprite.world.y + this.trackOffset.y), this._rotatedPoint.rotate(this.trackedSprite.world.x, this.trackedSprite.world.y, this.trackedSprite.rotation), this.fireFrom.width > 1 ? this.fireFrom.centerOn(this._rotatedPoint.x, this._rotatedPoint.y) : (this.fireFrom.x = this._rotatedPoint.x, this.fireFrom.y = this._rotatedPoint.y)) : this.fireFrom.width > 1 ? this.fireFrom.centerOn(this.trackedSprite.world.x + this.trackOffset.x, this.trackedSprite.world.y + this.trackOffset.y) : (this.fireFrom.x = this.trackedSprite.world.x + this.trackOffset.x, this.fireFrom.y = this.trackedSprite.world.y + this.trackOffset.y), this.bulletInheritSpriteSpeed && (s += this.trackedSprite.body.speed)) : this.trackedPointer && (this.fireFrom.width > 1 ? this.fireFrom.centerOn(this.trackedPointer.world.x + this.trackOffset.x, this.trackedPointer.world.y + this.trackOffset.y) : (this.fireFrom.x = this.trackedPointer.world.x + this.trackOffset.x, this.fireFrom.y = this.trackedPointer.world.y + this.trackOffset.y)); var o = this.fireFrom.width > 1 ? this.fireFrom.randomX : this.fireFrom.x,
                a = this.fireFrom.height > 1 ? this.fireFrom.randomY : this.fireFrom.y,
                r = this.trackRotation ? this.trackedSprite.angle : this.fireAngle;
            void 0 !== e && void 0 !== n && (r = this.game.math.radToDeg(Math.atan2(n - a, e - o))), 0 !== this.bulletAngleVariance && (r += i.Math.between(-this.bulletAngleVariance, this.bulletAngleVariance)); var h = 0,
                l = 0;
            0 === r || 180 === r ? h = Math.cos(this.game.math.degToRad(r)) * s : 90 === r || 270 === r ? l = Math.sin(this.game.math.degToRad(r)) * s : (h = Math.cos(this.game.math.degToRad(r)) * s, l = Math.sin(this.game.math.degToRad(r)) * s); var c = null; if (this.autoExpandBulletsGroup ? (c = this.bullets.getFirstExists(!1, !0, o, a, this.bulletKey, this.bulletFrame)).data.bulletManager = this : c = this.bullets.getFirstExists(!1), c) { if (c.reset(o, a), c.data.fromX = o, c.data.fromY = a, c.data.killType = this.bulletKillType, c.data.killDistance = this.bulletKillDistance, c.data.rotateToVelocity = this.bulletRotateToVelocity, this.bulletKillType === i.Weapon.KILL_LIFESPAN && (c.lifespan = this.bulletLifespan), c.angle = r + this.bulletAngleOffset, "" !== this.bulletAnimation) { if (null === c.animations.getAnimation(this.bulletAnimation)) { var u = this.anims[this.bulletAnimation];
                        c.animations.add(u.name, u.frames, u.frameRate, u.loop, u.useNumericIndex) } c.animations.play(this.bulletAnimation) } else this.bulletFrameCycle ? (c.frame = this.bulletFrames[this.bulletFrameIndex], ++this.bulletFrameIndex >= this.bulletFrames.length && (this.bulletFrameIndex = 0)) : this.bulletFrameRandom && (c.frame = this.bulletFrames[Math.floor(Math.random() * this.bulletFrames.length)]); if (c.data.bodyDirty && (this._data.customBody && c.body.setSize(this._data.width, this._data.height, this._data.offsetX, this._data.offsetY), c.body.collideWorldBounds = this.bulletCollideWorldBounds, c.data.bodyDirty = !1), c.body.velocity.set(h, l), c.body.gravity.set(this.bulletGravity.x, this.bulletGravity.y), 0 !== this.bulletSpeedVariance) { var p = this.fireRate;
                    (p += i.Math.between(-this.fireRateVariance, this.fireRateVariance)) < 0 && (p = 0), this._nextFire = this.game.time.now + p } else this._nextFire = this.game.time.now + this.fireRate;
                this.shots++, this.onFire.dispatch(c, this, s), this.fireLimit > 0 && this.shots === this.fireLimit && this.onFireLimit.dispatch(this, this.fireLimit) } return c }, i.Weapon.prototype.fireAtPointer = function(t) { return void 0 === t && (t = this.game.input.activePointer), this.fire(null, t.worldX, t.worldY) }, i.Weapon.prototype.fireAtSprite = function(t) { return this.fire(null, t.world.x, t.world.y) }, i.Weapon.prototype.fireAtXY = function(t, e) { return this.fire(null, t, e) }, i.Weapon.prototype.setBulletBodyOffset = function(t, e, i, n) { return void 0 === i && (i = 0), void 0 === n && (n = 0), this._data.customBody = !0, this._data.width = t, this._data.height = e, this._data.offsetX = i, this._data.offsetY = n, this.bullets.callAll("body.setSize", "body", t, e, i, n), this.bullets.setAll("data.bodyDirty", !1), this }, i.Weapon.prototype.setBulletFrames = function(t, e, n, s) { return void 0 === n && (n = !0), void 0 === s && (s = !1), this.bulletFrames = i.ArrayUtils.numberArray(t, e), this.bulletFrameIndex = 0, this.bulletFrameCycle = n, this.bulletFrameRandom = s, this }, i.Weapon.prototype.addBulletAnimation = function(t, e, i, n, s) { return this.anims[t] = { name: t, frames: e, frameRate: i, loop: n, useNumericIndex: s }, this.bullets.callAll("animations.add", "animations", t, e, i, n, s), this.bulletAnimation = t, this }, i.Weapon.prototype.debug = function(t, e, i) { void 0 === t && (t = 16), void 0 === e && (e = 32), void 0 === i && (i = !1), this.game.debug.text("Weapon Plugin", t, e), this.game.debug.text("Bullets Alive: " + this.bullets.total + " - Total: " + this.bullets.length, t, e + 24), i && this.bullets.forEachExists(this.game.debug.body, this.game.debug, "rgba(255, 0, 255, 0.8)") }, Object.defineProperty(i.Weapon.prototype, "bulletClass", { get: function() { return this._bulletClass }, set: function(t) { this._bulletClass = t, this.bullets.classType = this._bulletClass } }), Object.defineProperty(i.Weapon.prototype, "bulletKillType", { get: function() { return this._bulletKillType }, set: function(t) { switch (t) {
                    case i.Weapon.KILL_STATIC_BOUNDS:
                    case i.Weapon.KILL_WEAPON_BOUNDS:
                        this.bulletBounds = this.bounds; break;
                    case i.Weapon.KILL_CAMERA_BOUNDS:
                        this.bulletBounds = this.game.camera.view; break;
                    case i.Weapon.KILL_WORLD_BOUNDS:
                        this.bulletBounds = this.game.world.bounds } this._bulletKillType = t } }), Object.defineProperty(i.Weapon.prototype, "bulletCollideWorldBounds", { get: function() { return this._bulletCollideWorldBounds }, set: function(t) { this._bulletCollideWorldBounds = t, this.bullets.setAll("body.collideWorldBounds", t), this.bullets.setAll("data.bodyDirty", !1) } }), Object.defineProperty(i.Weapon.prototype, "x", { get: function() { return this.fireFrom.x }, set: function(t) { this.fireFrom.x = t } }), Object.defineProperty(i.Weapon.prototype, "y", { get: function() { return this.fireFrom.y }, set: function(t) { this.fireFrom.y = t } }), i.Bullet = function(t, e, n, s, o) { i.Sprite.call(this, t, e, n, s, o), this.anchor.set(.5), this.data = { bulletManager: null, fromX: 0, fromY: 0, bodyDirty: !0, rotateToVelocity: !1, killType: 0, killDistance: 0 } }, i.Bullet.prototype = Object.create(i.Sprite.prototype), i.Bullet.prototype.constructor = i.Bullet, i.Bullet.prototype.kill = function() { return this.alive = !1, this.exists = !1, this.visible = !1, this.data.bulletManager.onKill.dispatch(this), this }, i.Bullet.prototype.update = function() { this.exists && (this.data.killType > i.Weapon.KILL_LIFESPAN && (this.data.killType === i.Weapon.KILL_DISTANCE ? this.game.physics.arcade.distanceToXY(this, this.data.fromX, this.data.fromY, !0) > this.data.killDistance && this.kill() : this.data.bulletManager.bulletBounds.intersects(this) || this.kill()), this.data.rotateToVelocity && (this.rotation = Math.atan2(this.body.velocity.y, this.body.velocity.x)), this.data.bulletManager.bulletWorldWrap && this.game.world.wrap(this, this.data.bulletManager.bulletWorldWrapPadding)) }, i.Video = function(t, e, n) { if (void 0 === e && (e = null), void 0 === n && (n = null), this.game = t, this.key = e, this.width = 0, this.height = 0, this.type = i.VIDEO, this.disableTextureUpload = !1, this.touchLocked = !1, this.onPlay = new i.Signal, this.onChangeSource = new i.Signal, this.onComplete = new i.Signal, this.onAccess = new i.Signal, this.onError = new i.Signal, this.onTimeout = new i.Signal, this.timeout = 15e3, this._timeOutID = null, this.video = null, this.videoStream = null, this.isStreaming = !1, this.retryLimit = 20, this.retry = 0, this.retryInterval = 500, this._retryID = null, this._codeMuted = !1, this._muted = !1, this._codePaused = !1, this._paused = !1, this._pending = !1, this._autoplay = !1, this._endCallback = null, this._playCallback = null, e && this.game.cache.checkVideoKey(e)) { var s = this.game.cache.getVideo(e);
                s.isBlob ? this.createVideoFromBlob(s.data) : this.video = s.data, this.width = this.video.videoWidth, this.height = this.video.videoHeight } else n && this.createVideoFromURL(n, !1);
            this.video && !n ? (this.baseTexture = new PIXI.BaseTexture(this.video), this.baseTexture.forceLoaded(this.width, this.height)) : (this.baseTexture = new PIXI.BaseTexture(i.Cache.DEFAULT.baseTexture.source), this.baseTexture.forceLoaded(this.width, this.height)), this.texture = new PIXI.Texture(this.baseTexture), this.textureFrame = new i.Frame(0, 0, 0, this.width, this.height, "video"), this.texture.setFrame(this.textureFrame), this.texture.valid = !1, null !== e && this.video && (this.texture.valid = this.video.canplay), this.snapshot = null, i.BitmapData && (this.snapshot = new i.BitmapData(this.game, "", this.width, this.height)), !this.game.device.cocoonJS && (this.game.device.iOS || this.game.device.android) || window.PhaserGlobal && window.PhaserGlobal.fakeiOSTouchLock ? this.setTouchLock() : s && (s.locked = !1) }, i.Video.prototype = { connectToMediaStream: function(t, e) { return t && e && (this.video = t, this.videoStream = e, this.isStreaming = !0, this.baseTexture.source = this.video, this.updateTexture(null, this.video.videoWidth, this.video.videoHeight), this.onAccess.dispatch(this)), this }, startMediaStream: function(t, e, i) { if (void 0 === t && (t = !1), void 0 === e && (e = null), void 0 === i && (i = null), !this.game.device.getUserMedia) return this.onError.dispatch(this, "No getUserMedia"), !1;
                null !== this.videoStream && (this.videoStream.active ? this.videoStream.active = !1 : this.videoStream.stop()), this.removeVideoElement(), this.video = document.createElement("video"), this.video.setAttribute("autoplay", "autoplay"), null !== e && (this.video.width = e), null !== i && (this.video.height = i), this._timeOutID = window.setTimeout(this.getUserMediaTimeout.bind(this), this.timeout); try { navigator.getUserMedia({ audio: t, video: !0 }, this.getUserMediaSuccess.bind(this), this.getUserMediaError.bind(this)) } catch (t) { this.getUserMediaError(t) } return this }, getUserMediaTimeout: function() { clearTimeout(this._timeOutID), this.onTimeout.dispatch(this) }, getUserMediaError: function(t) { clearTimeout(this._timeOutID), this.onError.dispatch(this, t) }, getUserMediaSuccess: function(t) { clearTimeout(this._timeOutID), this.videoStream = t, void 0 !== this.video.mozSrcObject ? this.video.mozSrcObject = t : this.video.src = window.URL && window.URL.createObjectURL(t) || t; var e = this;
                this.video.onloadeddata = function() {
                    function t() { if (i > 0)
                            if (e.video.videoWidth > 0) { var n = e.video.videoWidth,
                                    s = e.video.videoHeight;
                                isNaN(e.video.videoHeight) && (s = n / (4 / 3)), e.video.play(), e.isStreaming = !0, e.baseTexture.source = e.video, e.updateTexture(null, n, s), e.onAccess.dispatch(e) } else window.setTimeout(t, 500);
                        else console.warn("Unable to connect to video stream. Webcam error?");
                        i-- } var i = 10;
                    t() } }, createVideoFromBlob: function(t) { var e = this; return this.video = document.createElement("video"), this.video.controls = !1, this.video.setAttribute("autoplay", "autoplay"), this.video.addEventListener("loadeddata", function(t) { e.updateTexture(t) }, !0), this.video.src = window.URL.createObjectURL(t), this.video.canplay = !0, this }, createVideoFromURL: function(t, e) { return void 0 === e && (e = !1), this.texture && (this.texture.valid = !1), this.video = document.createElement("video"), this.video.controls = !1, e && this.video.setAttribute("autoplay", "autoplay"), this.video.src = t, this.video.canplay = !0, this.video.load(), this.retry = this.retryLimit, this._retryID = window.setTimeout(this.checkVideoProgress.bind(this), this.retryInterval), this.key = t, this }, updateTexture: function(t, e, i) { var n = !1;
                void 0 !== e && null !== e || (e = this.video.videoWidth, n = !0), void 0 !== i && null !== i || (i = this.video.videoHeight), this.width = e, this.height = i, this.baseTexture.source !== this.video && (this.baseTexture.source = this.video), this.baseTexture.forceLoaded(e, i), this.texture.frame.resize(e, i), this.texture.width = e, this.texture.height = i, this.texture.valid = !0, this.snapshot && this.snapshot.resize(e, i), n && null !== this.key && (this.onChangeSource.dispatch(this, e, i), this._autoplay && (this.video.play(), this.onPlay.dispatch(this, this.loop, this.playbackRate))) }, complete: function() { this.onComplete.dispatch(this) }, play: function(t, e) { return void 0 === t && (t = !1), void 0 === e && (e = 1), this.game.sound.onMute && (this.game.sound.onMute.add(this.setMute, this), this.game.sound.onUnMute.add(this.unsetMute, this), this.game.sound.mute && this.setMute()), this.game.onPause.add(this.setPause, this), this.game.onResume.add(this.setResume, this), this._endCallback = this.complete.bind(this), this.video.addEventListener("ended", this._endCallback, !0), this.video.addEventListener("webkitendfullscreen", this._endCallback, !0), this.video.loop = t ? "loop" : "", this.video.playbackRate = e, this.touchLocked ? this._pending = !0 : (this._pending = !1, null !== this.key && (4 !== this.video.readyState ? (this.retry = this.retryLimit, this._retryID = window.setTimeout(this.checkVideoProgress.bind(this), this.retryInterval)) : (this._playCallback = this.playHandler.bind(this), this.video.addEventListener("playing", this._playCallback, !0))), this.video.play(), this.onPlay.dispatch(this, t, e)), this }, playHandler: function() { this.video.removeEventListener("playing", this._playCallback, !0), this.updateTexture() }, stop: function() { return this.game.sound.onMute && (this.game.sound.onMute.remove(this.setMute, this), this.game.sound.onUnMute.remove(this.unsetMute, this)), this.game.onPause.remove(this.setPause, this), this.game.onResume.remove(this.setResume, this), this.isStreaming ? (this.video.mozSrcObject ? (this.video.mozSrcObject.stop(), this.video.src = null) : (this.video.src = "", this.videoStream.active ? this.videoStream.active = !1 : this.videoStream.getTracks ? this.videoStream.getTracks().forEach(function(t) { t.stop() }) : this.videoStream.stop()), this.videoStream = null, this.isStreaming = !1) : (this.video.removeEventListener("ended", this._endCallback, !0), this.video.removeEventListener("webkitendfullscreen", this._endCallback, !0), this.video.removeEventListener("playing", this._playCallback, !0), this.touchLocked ? this._pending = !1 : this.video.pause()), this }, add: function(t) { if (Array.isArray(t))
                    for (var e = 0; e < t.length; e++) t[e].loadTexture && t[e].loadTexture(this);
                else t.loadTexture(this); return this }, addToWorld: function(t, e, i, n, s, o) { s = s || 1, o = o || 1; var a = this.game.add.image(t, e, this); return a.anchor.set(i, n), a.scale.set(s, o), a }, render: function() {!this.disableTextureUpload && this.playing && this.baseTexture.dirty() }, setMute: function() { this._muted || (this._muted = !0, this.video.muted = !0) }, unsetMute: function() { this._muted && !this._codeMuted && (this._muted = !1, this.video.muted = !1) }, setPause: function() { this._paused || this.touchLocked || (this._paused = !0, this.video.pause()) }, setResume: function() {!this._paused || this._codePaused || this.touchLocked || (this._paused = !1, this.video.ended || this.video.play()) }, changeSource: function(t, e) { return void 0 === e && (e = !0), this.texture.valid = !1, this.video.pause(), this.retry = this.retryLimit, this._retryID = window.setTimeout(this.checkVideoProgress.bind(this), this.retryInterval), this.video.src = t, this.video.load(), this._autoplay = e, e || (this.paused = !0), this }, checkVideoProgress: function() { 4 === this.video.readyState ? this.updateTexture() : --this.retry > 0 ? this._retryID = window.setTimeout(this.checkVideoProgress.bind(this), this.retryInterval) : console.warn("Phaser.Video: Unable to start downloading video in time", this.isStreaming) }, setTouchLock: function() { this.game.input.touch.addTouchLockCallback(this.unlock, this), this.touchLocked = !0 }, unlock: function() { if (this.touchLocked = !1, this.video.play(), this.onPlay.dispatch(this, this.loop, this.playbackRate), this.key) { var t = this.game.cache.getVideo(this.key);
                    t && !t.isBlob && (t.locked = !1) } return !0 }, grab: function(t, e, i) { if (void 0 === t && (t = !1), void 0 === e && (e = 1), void 0 === i && (i = null), null !== this.snapshot) return t && this.snapshot.cls(), this.snapshot.copy(this.video, 0, 0, this.width, this.height, 0, 0, this.width, this.height, 0, 0, 0, 1, 1, e, i), this.snapshot;
                console.warn("Video.grab cannot run because Phaser.BitmapData is unavailable") }, removeVideoElement: function() { if (this.video) { for (this.video.parentNode && this.video.parentNode.removeChild(this.video); this.video.hasChildNodes();) this.video.removeChild(this.video.firstChild);
                    this.video.removeAttribute("autoplay"), this.video.removeAttribute("src"), this.video = null } }, destroy: function() { this.stop(), this.removeVideoElement(), this.touchLocked && this.game.input.touch.removeTouchLockCallback(this.unlock, this), this._retryID && window.clearTimeout(this._retryID) } }, Object.defineProperty(i.Video.prototype, "currentTime", { get: function() { return this.video ? this.video.currentTime : 0 }, set: function(t) { this.video.currentTime = t } }), Object.defineProperty(i.Video.prototype, "duration", { get: function() { return this.video ? this.video.duration : 0 } }), Object.defineProperty(i.Video.prototype, "progress", { get: function() { return this.video ? this.video.currentTime / this.video.duration : 0 } }), Object.defineProperty(i.Video.prototype, "mute", { get: function() { return this._muted }, set: function(t) { if (t = t || null) { if (this._muted) return;
                    this._codeMuted = !0, this.setMute() } else { if (!this._muted) return;
                    this._codeMuted = !1, this.unsetMute() } } }), Object.defineProperty(i.Video.prototype, "paused", { get: function() { return this._paused }, set: function(t) { if (t = t || null, !this.touchLocked)
                    if (t) { if (this._paused) return;
                        this._codePaused = !0, this.setPause() } else { if (!this._paused) return;
                        this._codePaused = !1, this.setResume() } } }), Object.defineProperty(i.Video.prototype, "volume", { get: function() { return this.video ? this.video.volume : 1 }, set: function(t) { t < 0 ? t = 0 : t > 1 && (t = 1), this.video && (this.video.volume = t) } }), Object.defineProperty(i.Video.prototype, "playbackRate", { get: function() { return this.video ? this.video.playbackRate : 1 }, set: function(t) { this.video && (this.video.playbackRate = t) } }), Object.defineProperty(i.Video.prototype, "loop", { get: function() { return !!this.video && this.video.loop }, set: function(t) { t && this.video ? this.video.loop = "loop" : this.video && (this.video.loop = "") } }), Object.defineProperty(i.Video.prototype, "playing", { get: function() { return !(this.video.paused && this.video.ended) } }), i.Video.prototype.constructor = i.Video, void 0 === PIXI.blendModes && (PIXI.blendModes = i.blendModes), void 0 === PIXI.scaleModes && (PIXI.scaleModes = i.scaleModes), void 0 === PIXI.Texture.emptyTexture && (PIXI.Texture.emptyTexture = new PIXI.Texture(new PIXI.BaseTexture)), void 0 === PIXI.DisplayObject._tempMatrix && (PIXI.DisplayObject._tempMatrix = new PIXI.Matrix), void 0 === PIXI.RenderTexture.tempMatrix && (PIXI.RenderTexture.tempMatrix = new PIXI.Matrix), PIXI.Graphics && void 0 === PIXI.Graphics.POLY && (PIXI.Graphics.POLY = i.POLYGON, PIXI.Graphics.RECT = i.RECTANGLE, PIXI.Graphics.CIRC = i.CIRCLE, PIXI.Graphics.ELIP = i.ELLIPSE, PIXI.Graphics.RREC = i.ROUNDEDRECTANGLE), PIXI.TextureSilentFail = !0, "undefined" != typeof exports ? ("undefined" != typeof module && module.exports && (exports = module.exports = i), exports.Phaser = i) : "undefined" != typeof define && define.amd ? define("Phaser", e.Phaser = i) : e.Phaser = i, i }.call(this);
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    PhaserNineSlice;
! function(t) { var e = function(t) {
        function e(e, i, n, s, o, a, r, h) { var l = t.call(this, e, i, n, s, o) || this; return l.baseTexture = l.texture.baseTexture, l.baseFrame = l.texture.frame, null === o || h ? h || (h = e.cache.getNineSlice(s)) : h = e.cache.getNineSlice(o), void 0 === h ? l : (l.topSize = h.top, h.left ? l.leftSize = h.left : l.leftSize = l.topSize, h.right ? l.rightSize = h.right : l.rightSize = l.leftSize, h.bottom ? l.bottomSize = h.bottom : l.bottomSize = l.topSize, l.loadTexture(new Phaser.RenderTexture(l.game, l.localWidth, l.localHeight)), l.resize(a, r), l) } return __extends(e, t), e.prototype.renderTexture = function() { this.texture.resize(this.localWidth, this.localHeight, !0); var t = [0, this.leftSize, this.baseFrame.width - this.rightSize, this.baseFrame.width],
                e = [0, this.topSize, this.baseFrame.height - this.bottomSize, this.baseFrame.height],
                i = [0, this.leftSize, this.localWidth - this.rightSize, this.localWidth],
                n = [0, this.topSize, this.localHeight - this.bottomSize, this.localHeight];
            this.texture.clear(); for (var s = 0; s < 3; s++)
                for (var o = 0; o < 3; o++) { var a = this.createTexturePart(t[o], e[s], t[o + 1] - t[o], e[s + 1] - e[s]);
                    a.width = i[o + 1] - i[o], a.height = n[s + 1] - n[s], this.texture.renderXY(a, i[o], n[s]) } }, e.prototype.resize = function(t, e) { this.localWidth = t, this.localHeight = e, this.renderTexture() }, e.prototype.destroy = function() { for (var e = [], i = 0; i < arguments.length; i++) e[i] = arguments[i];
            t.prototype.destroy.call(this, e[0]), this.texture.destroy(!0), this.texture = null, this.baseTexture = null, this.baseFrame = null }, e.prototype.createTexturePart = function(t, e, i, n) { var s = new PIXI.Rectangle(this.baseFrame.x + this.texture.frame.x + t, this.baseFrame.y + this.texture.frame.y + e, Math.max(i, 1), Math.max(n, 1)); return new Phaser.Sprite(this.game, 0, 0, new PIXI.Texture(this.baseTexture, s)) }, e }(Phaser.Sprite);
    t.NineSlice = e }(PhaserNineSlice || (PhaserNineSlice = {}));
var PhaserNineSlice;
! function(t) { var e = function(e) {
        function i(t, i) { var n = e.call(this, t, i) || this; return n.addNineSliceCache(), n.addNineSliceFactory(), n.addNineSliceLoader(), n } return __extends(i, e), i.prototype.addNineSliceLoader = function() { Phaser.Loader.prototype.nineSlice = function(t, e, i, n, s, o) { var a = { top: i };
                n && (a.left = n), s && (a.right = s), o && (a.bottom = o), this.addToFileList("image", t, e), this.game.cache.addNineSlice(t, a) } }, i.prototype.addNineSliceFactory = function() { Phaser.GameObjectFactory.prototype.nineSlice = function(e, i, n, s, o, a, r) { void 0 === r && (r = this.world); var h = new t.NineSlice(this.game, e, i, n, s, o, a); return r.add(h) }, Phaser.GameObjectCreator.prototype.nineSlice = function(e, i, n, s, o, a) { return new t.NineSlice(this.game, e, i, n, s, o, a) } }, i.prototype.addNineSliceCache = function() { Phaser.Cache.prototype.nineSlice = {}, Phaser.Cache.prototype.addNineSlice = function(t, e) { this.nineSlice[t] = e }, Phaser.Cache.prototype.getNineSlice = function(t) { var e = this.nineSlice[t]; return void 0 === e && console.warn('Phaser.Cache.getNineSlice: Key "' + t + '" not found in Cache.'), e } }, i }(Phaser.Plugin);
    t.Plugin = e }(PhaserNineSlice || (PhaserNineSlice = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    Ph2;
! function(t) { var e;! function(t) { t[t.STOPPED = 0] = "STOPPED", t[t.PLAYING = 1] = "PLAYING", t[t.PAUSED = 2] = "PAUSED", t[t.AUTO_PAUSED = 3] = "AUTO_PAUSED", t[t.BATCH_PAUSED = 4] = "BATCH_PAUSED" }(e = t.AnimationStatus || (t.AnimationStatus = {})); var i = function() {
        function t(t, i, n, s) { this.initValues = [], this.name = t, this.speed = i, this.parent = n, this.loop = s, this.status = e.STOPPED, this.loopCount = 0, this.onComplete = new Phaser.Signal, this.onLoop = new Phaser.Signal, this.onStart = new Phaser.Signal, this.onEvent = new Phaser.Signal, this.timeline = new TimelineMax({ paused: !0, autoRemoveChildren: !1 }), this.timeline.eventCallback("onComplete", this.onCompleteCallback, null, this), this.timeline.eventCallback("onRepeat", this.onLoopCallback, null, this), this.timeline.eventCallback("onStart", this.onStartCallback, null, this) } return t.prototype.onCompleteCallback = function() { this.status = e.STOPPED, this.onComplete.dispatch(this.parent, this) }, t.prototype.onStartCallback = function() { this.onStart.dispatch(this.parent, this) }, t.prototype.onLoopCallback = function() { this.loopCount++, this.onLoop.dispatch(this.parent, this) }, t.prototype.onEventCallback = function(t) { this.onEvent.dispatch(t, this.parent, this) }, t.prototype.addTimelineChild = function(t) { this.timeline.add(t, 0), t.resume() }, t.prototype.play = function(t, i) { if (this.timeline.invalidate(), this.initValues)
                for (var n = 0; n < this.initValues.length; n++) { var s = this.initValues[n];
                    s.target[s.property] = s.value }
            return t = void 0 !== t ? t : 1, void 0 === i && (i = this.loop), i ? (this.loopCount = 0, this.timeline.repeat(-1)) : this.timeline.repeat(0), this.timeline.timeScale(t), this.timeline.seek(this.timeline.duration()), this.timeline.play(0), this.status = e.PLAYING, this }, t.prototype.stop = function(t, i) { var n = !1;
            void 0 !== i && (n = !i), void 0 !== t ? t ? this.timeline.pause(this.timeline.duration(), n) : this.timeline.pause(null, n) : this.timeline.pause(this.timeline.duration(), n), this.removeListeners(), this.status = e.STOPPED }, t.prototype.isPlaying = function() { return this.status === e.PLAYING }, t.prototype.isStopped = function() { return this.status === e.STOPPED }, t.prototype.isPaused = function() { return this.status === e.PAUSED }, t.prototype.pause = function() { this.status !== e.PAUSED && (this.status = e.PAUSED, this.timeline.pause()) }, t.prototype.resume = function() { this.status !== e.PAUSED && this.status !== e.BATCH_PAUSED || (this.status = e.PLAYING, this.timeline.play()) }, t.prototype.autoPause = function() { this.status === e.PLAYING && (this.status = e.AUTO_PAUSED, this.timeline.pause()) }, t.prototype.autoResume = function() { this.status === e.AUTO_PAUSED && (this.status = e.PLAYING, this.timeline.play()) }, t.prototype.batchPause = function() { this.status === e.PLAYING && (this.status = e.BATCH_PAUSED, this.timeline.pause()) }, t.prototype.batchResume = function() { this.status === e.BATCH_PAUSED && (this.status = e.PLAYING, this.timeline.play()) }, t.prototype.addEvent = function(t) { this.timeline.addCallback(this.onEventCallback, t.frame / 1e3, [t.name], this) }, t.prototype.removeListeners = function() { this.onLoop.removeAll(), this.onEvent.removeAll(), this.onStart.removeAll(), this.onComplete.removeAll() }, t.prototype.changeFrame = function(t, e) { t.frameName = e }, t.prototype.checkTimelineDuration = function() { 0 === this.timeline.duration() && this.timeline.addCallback(function() {}, "+=0.0001") }, t.prototype.getTimelineMax = function() { return this.timeline }, t.prototype.addInitValue = function(t, e, i) { this.initValues.push({ target: t, property: e, value: i }) }, t.prototype.destroy = function() { this.removeListeners(), this.timeline.eventCallback("onComplete", null), this.timeline.eventCallback("onRepeat", null), this.timeline.eventCallback("onStart", null), this.initValues.length = 0, this.initValues = null, this.timeline.kill(), this.timeline = null }, t }();
    t.Animation = i }(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) { var e = function() {
        function e(e) { this.game = e, this.cache = new t.AnimationCache(this.game), this.scale = 1, this.pauseAllSignal = new Phaser.Signal, this.resumeAllSignal = new Phaser.Signal, this.stopAllSignal = new Phaser.Signal } return e.prototype.setGameScale = function(t) { this.scale = t }, Object.defineProperty(e.prototype, "gameScale", { get: function() { return this.scale }, enumerable: !0, configurable: !0 }), e.prototype.pauseAll = function() { this.pauseAllSignal.dispatch() }, e.prototype.resumeAll = function() { this.resumeAllSignal.dispatch() }, e.prototype.stopAll = function() { this.stopAllSignal.dispatch() }, e.prototype.getAnimationData = function(t) { var e = this.game.ph2AnimationManager.cache.getAnimationData(t); return e || (e = this.getAnimationDataFromJSON(t)) && this.cache.saveAnimationData(t, e), e }, e.prototype.getAnimationObject = function(t, e) { var i = this.getAnimationData(t); return this.createTree(i.hierarchy, e, null) }, e.prototype.getAnimationDataFromJSON = function(t) { var e = this.game.cache.getJSON(t); return e ? this.generateAnimationData(e) : (console.warn("You should load the animation JSON first for: ", t), null) }, e.prototype.generateAnimationData = function(e) { var i = e.hierarchy,
                n = e.properties,
                s = this.createCacheAnimationDataTree(i, n, null, null); return new t.AnimationData(s) }, e.prototype.createCacheAnimationDataTree = function(t, e, i, n) { var s = null; if (t) { var o = t.name; if (s = this.createCacheNode(t, e, t.animations, i, n), t.children) { n = null !== n ? 0 === n.length ? o : n + "/" + o : ""; for (var a = t.children, r = 0; r < a.length; r++) { var h = this.createCacheAnimationDataTree(a[r], e, s, n);
                        h && s.addChild(h) } } } return s }, e.prototype.createCacheNode = function(e, i, n, s, o) { var a = e.name,
                r = a;
            o && (r = o + "/" + a); var h = null; if (null === s)(h = new t.CacheAnimationElementGroup).name = a;
            else { var l = i[r],
                    c = l.type; "sprite" === c ? ((h = new t.CacheAnimationElementSprite).name = a, h.textureName = l.file, void 0 !== l.anchor && (h.anchor.x = l.anchor.x, h.anchor.y = l.anchor.y), void 0 !== l.angle && (h.angle = l.angle), void 0 !== l.scale && (h.scale.x = l.scale.x, h.scale.y = l.scale.y), void 0 !== l.color && (h.tint = Phaser.Color.hexToRGB(l.color)), void 0 !== l.alpha && (h.alpha = l.alpha), void 0 !== l.position && (h.position.x = l.position.x, h.position.y = l.position.y)) : "container" === c ? ((h = new t.CacheAnimationElementGroup).name = a, void 0 !== l.position && (h.position.x = l.position.x, h.position.y = l.position.y), void 0 !== l.angle && (h.angle = l.angle), void 0 !== l.scale && (h.scale.x = l.scale.x, h.scale.y = l.scale.y), void 0 !== l.alpha && (h.alpha = l.alpha)) : "text" === c && ((h = new t.CacheAnimationElementText).name = a, void 0 !== l.anchor && (h.anchor.x = l.anchor.x, h.anchor.y = l.anchor.y), void 0 !== l.angle && (h.angle = l.angle), void 0 !== l.scale && (h.scale.x = l.scale.x, h.scale.y = l.scale.y), void 0 !== l.color && (h.tint = l.color), void 0 !== l.alpha && (h.alpha = l.alpha), void 0 !== l.position && (h.position.x = l.position.x, h.position.y = l.position.y), void 0 !== l.font && (h.fontName = l.font.name, h.fontSize = l.font.fontSize), void 0 !== l.text && (h.text = l.text), void 0 !== l.align && (h.align = l.align), void 0 !== l.stroke && (h.stroke = l.stroke), void 0 !== l.strokeThickness && (h.strokeThickness = l.strokeThickness)) } if (n)
                for (var u = 0; u < n.length; u++) this.addCacheAnimation(h, n[u]); return h }, e.prototype.addCacheAnimation = function(e, i) { var n = this.game.cache.getJSON(i); if (n) { var s = void 0 !== n.speed ? n.speed : 1,
                    o = void 0 !== n.mode ? n.mode : null,
                    a = n.data,
                    r = n.events,
                    h = t.AnimationMode.NORMAL;
                o && "loop" === o.toLowerCase() && (h = t.AnimationMode.LOOP), e.addAnimation(this.createCacheTimelineForAnimation(i, a, s, h, r)) } else console.warn("You should load the animation JSON first for: ", i) }, e.prototype.createCacheTimelineForAnimation = function(e, i, n, s, o) { var a = new t.CacheAnimation(e, n);
            a.mode = s; for (var r = Object.keys(i), h = 0; h < r.length; h++)
                for (var l = r[h], c = i[l], u = Object.keys(c), p = 0; p < u.length; p++) { var d = u[p],
                        m = c[d],
                        g = this.createCacheTimelineForProperty(l, d, m);
                    a.addTimeline(g) }
            if (o && o.length > 0)
                for (h = 0; h < o.length; h++) { var f = new t.CacheEvent;
                    f.frame = o[h].frame, f.name = o[h].name, a.addEvent(f) }
            return a }, e.prototype.createCacheTimelineForProperty = function(e, i, n) { for (var s = new t.CacheTimeline(e, i), o = 0; o < n.length; o++) { var a = new t.CacheFrame;
                a.frame = n[o].frame, a.value = n[o].value, s.addFrame(a) } return s }, e.prototype.createTree = function(t, e, i) { var n = null; if (t) { if (n = this.createNode(t, e, i), t.children)
                    for (var s = t.children, o = 0; o < s.length; o++) { var a = this.createTree(s[o], e, n);
                        a && n.addChild(a) }
                if (t.animations && t.animations.length > 0)
                    for (var r = t.animations, h = 0; h < r.length; h++) this.addAnimationToNode(n, r[h]) } return n }, e.prototype.createNode = function(e, i, n) { var s = e.name,
                o = null; return null === n ? (o = new t.AnimationGroup(this.game)).name = s : e instanceof t.CacheAnimationElementSprite ? ((o = new t.AnimationSprite(this.game, i, e.textureName)).name = s, o.anchor.x = e.anchor.x, o.anchor.y = e.anchor.y, o.angle = e.angle, o.scale.x = e.scale.x, o.scale.y = e.scale.y, o.alpha = e.alpha, o.tint = e.tint, o.x = e.position.x * this.gameScale, o.y = e.position.y * this.gameScale) : e instanceof t.CacheAnimationElementGroup ? ((o = new t.AnimationGroup(this.game)).name = s, o.x = e.position.x * this.gameScale, o.y = e.position.y * this.gameScale, o.angle = e.angle, o.scale.x = e.scale.x, o.scale.y = e.scale.y, o.alpha = e.alpha) : e instanceof t.CacheAnimationElementText && ((o = new t.AnimationText(this.game, e.position.x * this.gameScale, e.position.y * this.gameScale, e.text, { font: e.fontSize * this.gameScale + "px " + e.fontName, fill: e.tint, align: e.align, stroke: e.stroke, strokeThickness: e.strokeThickness * this.gameScale })).name = e.name, o.angle = e.angle, o.anchor.x = e.anchor.x, o.anchor.y = e.anchor.y, o.scale.x = e.scale.x, o.scale.y = e.scale.y, o.alpha = e.alpha), o }, e.prototype.addAnimationToNode = function(e, i) { for (var n = i.mode === t.AnimationMode.LOOP, s = new t.Animation(i.name, i.speed, e, n), o = null, a = null, r = 0; r < i.timelines.length; r++) { var h = i.timelines[r],
                    l = h.target;
                l !== o && (a = "__this__" === l ? e : t.AnimationSystem.findObject(l, e)), null === a && console.log("Element" + l + " not found"); var c = new TimelineMax({ paused: !0, autoRemoveChildren: !1 }),
                    u = 0,
                    p = a.key;
                p && e.game.cache.getFrameData(p); for (var d = 0; d < h.frames.length; d++) { var m = h.frames[d],
                        g = m.frame / 1e3,
                        f = g - u,
                        y = m.value; switch (h.property) {
                        case "scaleX":
                            0 === f ? (s.addInitValue(a, "scaleX", y), c.set(a, { scaleX: y }, 0)) : c.to(a, f, { scaleX: y }); break;
                        case "scaleY":
                            0 === f ? (s.addInitValue(a, "scaleY", y), c.set(a, { scaleY: y }, 0)) : c.to(a, f, { scaleY: y }); break;
                        case "angle":
                            0 === f ? (s.addInitValue(a, "angle", y), c.set(a, { angle: y }, 0)) : c.to(a, f, { angle: y }); break;
                        case "alpha":
                            0 === f ? (s.addInitValue(a, "alpha", y), c.set(a, { alpha: y }, 0)) : c.to(a, f, { alpha: y }); break;
                        case "position":
                            0 === f ? (s.addInitValue(a, "x", y[0] * this.gameScale), s.addInitValue(a, "y", y[1] * this.gameScale), c.set(a, { x: y[0] * this.gameScale, y: y[1] * this.gameScale }, 0)) : c.to(a, f, { x: y[0] * this.gameScale, y: y[1] * this.gameScale }); break;
                        case "x":
                            0 === f ? (s.addInitValue(a, "x", y * this.gameScale), c.set(a, { x: y * this.gameScale }, 0)) : c.to(a, f, { x: y * this.gameScale }); break;
                        case "y":
                            0 === f ? (s.addInitValue(a, "y", y * this.gameScale), c.set(a, { y: y * this.gameScale }, 0)) : c.to(a, f, { y: y * this.gameScale }); break;
                        case "frameName":
                            0 === f && s.addInitValue(a, "frameName", y), c.addCallback(s.changeFrame, g, [a, y], this); break;
                        default:
                            console.log("Animation property not supported: " + h.property) } u = g } s.addTimelineChild(c), o = l } if (s.checkTimelineDuration(), i.events && i.events.length > 0)
                for (r = 0; r < i.events.length; r++) s.addEvent(i.events[r]);
            e.ph2Animations.add(s) }, e.findObject = function(t, e) { for (var i = e, n = "/" !== t[0] ? 0 : 1, s = t.split("/"), o = n; o < s.length; o++) { var a = s[o],
                    r = i.children;
                i = null; for (var h = 0, l = r.length; h < l; ++h) { var c = r[h]; if (c.name === a) { i = c; break } } if (!i) return null } return i }, e }();
    t.AnimationSystem = e }(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) { var e = function() {
        function t(t) { this.game = t, this.animationData = {} } return t.prototype.getAnimationData = function(t) { var e = this.animationData[t]; return e || null }, t.prototype.saveAnimationData = function(t, e) { this.animationData[t] = e }, t }();
    t.AnimationCache = e }(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) { var e = function() {
        function t() { this.animations = [], this.children = [] } return t.prototype.addChild = function(t) { this.children.push(t) }, t.prototype.addAnimation = function(t) { this.animations.push(t) }, t }();
    t.CacheAnimationElement = e; var i = function(t) {
        function e() { var e = t.call(this) || this; return e.anchor = new Phaser.Point(.5, .5), e.angle = 0, e.scale = new Phaser.Point(1, 1), e.tint = 16777215, e.alpha = 1, e.position = new Phaser.Point(0, 0), e } return __extends(e, t), e }(e);
    t.CacheAnimationElementSprite = i; var n = function(t) {
        function e() { var e = t.call(this) || this; return e.position = new Phaser.Point(0, 0), e.angle = 0, e.scale = new Phaser.Point(1, 1), e.alpha = 1, e } return __extends(e, t), e }(e);
    t.CacheAnimationElementGroup = n; var s = function(t) {
        function e() { var e = t.call(this) || this; return e.anchor = new Phaser.Point(.5, .5), e.angle = 0, e.scale = new Phaser.Point(1, 1), e.tint = "#FFFFFF", e.alpha = 1, e.position = new Phaser.Point(0, 0), e.text = "", e.fontName = "Arial", e.fontSize = 24, e.align = "center", e.stroke = "black", e.strokeThickness = 0, e } return __extends(e, t), e }(e);
    t.CacheAnimationElementText = s; var o = function() {
        function t(t, e) { this.name = t, this.timelines = [], this.speed = e, this.events = [] } return t.prototype.addTimeline = function(t) { this.timelines.push(t) }, t.prototype.addEvent = function(t) { this.events.push(t) }, t }();
    t.CacheAnimation = o; var a = function() {
        function t(t, e) { this.target = t, this.property = e, this.frames = [] } return t.prototype.addFrame = function(t) { this.frames.push(t) }, t }();
    t.CacheTimeline = a; var r = function() { return function() {} }();
    t.CacheFrame = r; var h = function() { return function() {} }();
    t.CacheEvent = h; var l = function() { return function(t) { this.hierarchy = t } }();
    t.AnimationData = l;! function(t) { t[t.NORMAL = 0] = "NORMAL", t[t.LOOP = 1] = "LOOP" }(t.AnimationMode || (t.AnimationMode = {})) }(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) { var e = function() { return function(t, e) { this.key = t, this.value = e } }();
    t.CacheOrientationProperty = e; var i = function() {
        function i() { this.backup = [], this.portrait = [], this.landscape = [] } return i.prototype.addProperty = function(i, n, s) { null === s ? this.backup.push(new e(i, n)) : s === t.AlignmentScope.LANDSCAPE ? this.landscape.push(new e(i, n)) : s === t.AlignmentScope.PORTRAIT && this.portrait.push(new e(i, n)) }, i }();
    t.CacheOrientationProperties = i; var n = function() {
        function e() { this.children = [], this.orientationVisibility = t.OrientationType.BOTH, this.platformVisibility = t.PlatformType.BOTH } return e.prototype.addChild = function(t) { this.children.push(t) }, e.prototype.addAlignment = function(e, i, n, o, a, r) { var h = new s;
            h.type = e, h.offset.x = i, h.offset.y = n, h.isAbsoluteX = o, h.isAbsoluteY = a, r === t.AlignmentScope.ALL ? this.alignment = h : r === t.AlignmentScope.PORTRAIT ? this.portraitAlignment = h : r === t.AlignmentScope.LANDSCAPE && (this.landscapeAlignment = h) }, e.prototype.addOrientationProperty = function(t, e, n) { this.orientationProperties || (this.orientationProperties = new i), void 0 !== e && this.orientationProperties.addProperty(t, e, n) }, e.prototype.setOrientationVisibility = function(t) { this.orientationVisibility = t }, e.prototype.setPlatformVisibility = function(t) { this.platformVisibility = t }, e }();
    t.CacheUIElement = n; var s = function() { return function() { this.offset = new Phaser.Point(0, 0), this.isAbsoluteX = !0, this.isAbsoluteY = !0 } }();
    t.CacheAlignment = s; var o = function() { return function(t, e, i, n) { this.top = t, this.bottom = e, this.left = i, this.right = n } }();
    t.CacheSliceData = o; var a = function() { return function(t, e) { this.width = t, this.height = e } }();
    t.CacheTiledData = a; var r = function(t) {
        function e() { var e = t.call(this) || this; return e.anchor = new Phaser.Point(.5, .5), e.angle = 0, e.scale = new Phaser.Point(1, 1), e.tint = 16777215, e.alpha = 1, e.position = new Phaser.Point(0, 0), e.imageType = "SIMPLE", e } return __extends(e, t), e.prototype.addSliceData = function(t, e, i, n, s, a) { this.sliceData = new o(t, e, i, n), this.sliceData.width = s, this.sliceData.height = a }, e.prototype.addTiledData = function(t, e) { this.tiledData = new a(t, e) }, e }(n);
    t.CacheUISprite = r; var h = function(t) {
        function e() { var e = t.call(this) || this; return e.designResolution = new Phaser.Rectangle(0, 0, 0, 0), e } return __extends(e, t), e.prototype.setSafeZone = function(t, e) { this.safeZone = new Phaser.Rectangle(0, 0, t, e) }, e }(n);
    t.CacheUICanvas = h; var l = function(t) {
        function e() { var e = t.call(this) || this; return e.position = new Phaser.Point(0, 0), e.angle = 0, e.scale = new Phaser.Point(1, 1), e.alpha = 1, e } return __extends(e, t), e.prototype.addSize = function(t, e) { this.size = new Phaser.Rectangle(0, 0, t, e) }, e }(n);
    t.CacheUIGroup = l; var c = function() { return function(t, e, i) { this.normal = t, this.pressed = e, this.hover = i } }();
    t.CacheUIButtonStates = c; var u = function(t) {
        function e() { var e = t.call(this) || this; return e.anchor = new Phaser.Point(.5, .5), e.angle = 0, e.scale = new Phaser.Point(1, 1), e.tint = 16777215, e.alpha = 1, e.position = new Phaser.Point(0, 0), e.imageType = "SIMPLE", e } return __extends(e, t), e.prototype.addSliceData = function(t, e, i, n, s, a) { this.sliceData = new o(t, e, i, n), this.sliceData.width = s, this.sliceData.height = a }, e.prototype.addStates = function(t, e, i) { this.statesData = new c(t, e, i) }, e }(n);
    t.CacheUIButton = u; var p = function(t) {
        function e() { var e = t.call(this) || this; return e.anchor = new Phaser.Point(.5, .5), e.angle = 0, e.scale = new Phaser.Point(1, 1), e.tint = "#FFFFFF", e.alpha = 1, e.position = new Phaser.Point(0, 0), e.text = "", e.fontName = "Arial", e.fontSize = 24, e.lineHeight = 24, e.align = "center", e.stroke = "black", e.strokeThickness = 0, e } return __extends(e, t), e }(n);
    t.CacheUIText = p; var d = function(t) {
        function e() { return t.call(this) || this } return __extends(e, t), e }(n);
    t.CacheUINode = d; var m = function() { return function(t) { this.hierarchy = t } }();
    t.UIData = m }(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) { var e = function(e) {
        function i(i) { var n = e.call(this, i, 0, 0, null) || this; return n.ph2Animations = new t.AnimationManager(i), n } return __extends(i, e), Object.defineProperty(i.prototype, "scaleX", { get: function() { return this.scale.x }, set: function(t) { this.scale.x = t }, enumerable: !0, configurable: !0 }), Object.defineProperty(i.prototype, "scaleY", { get: function() { return this.scale.y }, set: function(t) { this.scale.y = t }, enumerable: !0, configurable: !0 }), i }(Phaser.Sprite);
    t.AnimationGroup = e }(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) { var e = function(e) {
        function i(i, n, s) { var o = e.call(this, i, 0, 0, n, s) || this; return o.ph2Animations = new t.AnimationManager(i), o } return __extends(i, e), Object.defineProperty(i.prototype, "scaleX", { get: function() { return this.scale.x }, set: function(t) { this.scale.x = t }, enumerable: !0, configurable: !0 }), Object.defineProperty(i.prototype, "scaleY", { get: function() { return this.scale.y }, set: function(t) { this.scale.y = t }, enumerable: !0, configurable: !0 }), i }(Phaser.Sprite);
    t.AnimationSprite = e }(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) { var e = function(e) {
        function i(i, n, s, o, a) { var r = e.call(this, i, n, s, o, a) || this; return r.ph2Animations = new t.AnimationManager(i), r } return __extends(i, e), i }(Phaser.Text);
    t.AnimationText = e }(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) {! function(t) { t[t.PORTRAIT = 0] = "PORTRAIT", t[t.LANDSCAPE = 1] = "LANDSCAPE", t[t.BOTH = 2] = "BOTH", t[t.NONE = 3] = "NONE" }(t.OrientationType || (t.OrientationType = {}));! function(t) { t[t.DESKTOP = 0] = "DESKTOP", t[t.MOBILE = 1] = "MOBILE", t[t.BOTH = 2] = "BOTH" }(t.PlatformType || (t.PlatformType = {}));! function(t) { t[t.PARENT = 0] = "PARENT", t[t.WORLD = 1] = "WORLD" }(t.AlignTargetType || (t.AlignTargetType = {}));! function(t) { t[t.ALL = 0] = "ALL", t[t.PORTRAIT = 1] = "PORTRAIT", t[t.LANDSCAPE = 2] = "LANDSCAPE" }(t.AlignmentScope || (t.AlignmentScope = {})) }(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) { var e = function() {
        function t() {} return t.prototype.getOffset = function(t) { return this.isAbsolute ? this.offset : this.offset * t }, t }();
    t.AlignmentOffset = e; var i = function() {
        function t() { this.offsetX = new e, this.offsetY = new e } return t.prototype.getType = function() { switch (this.type) {
                case "TOP_LEFT":
                    return Phaser.TOP_LEFT;
                case "TOP_CENTER":
                    return Phaser.TOP_CENTER;
                case "TOP_RIGHT":
                    return Phaser.TOP_RIGHT;
                case "LEFT_TOP":
                    return Phaser.LEFT_TOP;
                case "LEFT_CENTER":
                    return Phaser.LEFT_CENTER;
                case "LEFT_BOTTOM":
                    return Phaser.LEFT_BOTTOM;
                case "CENTER":
                    return Phaser.CENTER;
                case "RIGHT_TOP":
                    return Phaser.RIGHT_TOP;
                case "RIGHT_CENTER":
                    return Phaser.RIGHT_CENTER;
                case "RIGHT_BOTTOM":
                    return Phaser.RIGHT_BOTTOM;
                case "BOTTOM_LEFT":
                    return Phaser.BOTTOM_LEFT;
                case "BOTTOM_CENTER":
                    return Phaser.BOTTOM_CENTER;
                case "BOTTOM_RIGHT":
                    return Phaser.BOTTOM_RIGHT;
                default:
                    return Phaser.CENTER } }, t }();
    t.Alignment = i; var n = function() {
        function e(t) { this.game = t, this.landscapeAlignment = new i, this.portraitAlignment = new i, this.enabled = !0 } return e.prototype.enable = function(t) { this.enabled = t }, e.prototype.setAlignTarget = function(t) { this.alignTargetType = t }, e.prototype.setLandscapeAlignment = function(t, e, i, n, s) { this.landscapeAlignment.type = t, this.landscapeAlignment.offsetX.offset = e * (i ? this.game.ph2UIManager.gameScale : 1), this.landscapeAlignment.offsetX.isAbsolute = i, this.landscapeAlignment.offsetY.offset = n * (s ? this.game.ph2UIManager.gameScale : 1), this.landscapeAlignment.offsetY.isAbsolute = s }, e.prototype.setPortraitAlignment = function(t, e, i, n, s) { this.portraitAlignment.type = t, this.portraitAlignment.offsetX.offset = e * (i ? this.game.ph2UIManager.gameScale : 1), this.portraitAlignment.offsetX.isAbsolute = i, this.portraitAlignment.offsetY.offset = n * (s ? this.game.ph2UIManager.gameScale : 1), this.portraitAlignment.offsetY.isAbsolute = s }, e.prototype.getCurrentAlignment = function() { return this.game.ph2UIManager.alignmentManager.getCurrentOrientation() === t.Orientation.LANDSCAPE ? this.landscapeAlignment : this.portraitAlignment }, e.prototype.applyAlignment = function(e) { if (this.enabled) { var i = this.getCurrentAlignment();
                this.alignTargetType === t.AlignTargetType.WORLD ? e.alignIn(this.game.ph2UIManager.alignmentManager.alignBounds, i.getType(), i.offsetX.getOffset(this.game.ph2UIManager.alignmentManager.alignBounds.width), i.offsetY.getOffset(this.game.ph2UIManager.alignmentManager.alignBounds.height)) : this.alignTargetType === t.AlignTargetType.PARENT && t.AlignmentSystem.alignInParent(e, i.getType(), i.offsetX.getOffset(e.parent.width), i.offsetY.getOffset(e.parent.height)) } }, e.prototype.destroy = function() { this.game = null, this.alignTargetType = null, this.landscapeAlignment = null, this.portraitAlignment = null }, e }();
    t.UIAlignment = n }(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) { var e = function() {
        function e(t, e) { this.game = t, this.enabled = this.game.ph2UIManager.enableVisibilityAndOrientationComponent, this.elementProperties = {}, this.landscapeProperties = {}, this.portraitProperties = {} } return e.prototype.enable = function(t) { this.enabled = t }, e.prototype.backupOriginalProperty = function(t, e) { this.elementProperties[t] = e }, e.prototype.addPortraitProperty = function(t, e) { this.portraitProperties[t] = e }, e.prototype.addLandscapePortrait = function(t, e) { this.landscapeProperties[t] = e }, e.prototype.applyOriginalProperties = function(t) { for (var e = Object.keys(this.elementProperties), i = 0; i < e.length; i++) { var n = e[i];
                t[n] = this.elementProperties[n] } }, e.prototype.applyPortraitProperties = function(t) { this.applyOriginalProperties(t); for (var e = Object.keys(this.portraitProperties), i = 0; i < e.length; i++) { var n = e[i];
                t[n] = this.portraitProperties[n] } }, e.prototype.applyLandscapeProperties = function(t) { this.applyOriginalProperties(t); for (var e = Object.keys(this.landscapeProperties), i = 0; i < e.length; i++) { var n = e[i];
                t[n] = this.landscapeProperties[n] } }, e.prototype.apply = function(e) { this.enabled && (this.game.ph2UIManager.alignmentManager.getCurrentOrientation() === t.Orientation.PORTRAIT ? this.applyPortraitProperties(e) : this.game.ph2UIManager.alignmentManager.getCurrentOrientation() === t.Orientation.LANDSCAPE && this.applyLandscapeProperties(e)) }, e }();
    t.UIOrientationProperties = e }(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) { var e = function() {
        function e(e) { this.game = e, this.enabled = this.game.ph2UIManager.enableVisibilityAndOrientationComponent, this.orientationType = t.OrientationType.BOTH, this.platformType = t.PlatformType.BOTH } return e.prototype.setOrientationVisible = function(t) { this.orientationType = t }, e.prototype.setPlatformVisible = function(t) { this.platformType = t }, e.prototype.enable = function(t) { this.enabled = t }, e.prototype.applyVisibility = function(e) { if (this.enabled) { var i = this.platformType === t.PlatformType.BOTH || this.platformType === t.PlatformType.DESKTOP && "desktop" === this.game.ph2UIManager.currentPlatform || this.platformType === t.PlatformType.MOBILE && "mobile" === this.game.ph2UIManager.currentPlatform,
                    n = this.orientationType === t.OrientationType.BOTH || this.orientationType === t.OrientationType.LANDSCAPE && this.game.ph2UIManager.alignmentManager.getCurrentOrientation() === t.Orientation.LANDSCAPE || this.orientationType === t.OrientationType.PORTRAIT && this.game.ph2UIManager.alignmentManager.getCurrentOrientation() === t.Orientation.PORTRAIT; return e.visible = i && n, e.visible } }, e }();
    t.UIVisibility = e }(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) { var e = function() {
        function e() {} return e.UICanvas = function(e, i) { var n = new t.CacheUICanvas; return n.name = e, void 0 !== i.design && (n.designResolution.width = i.design.width, n.designResolution.height = i.design.height), void 0 !== i.safeZone && n.setSafeZone(i.safeZone.width, i.safeZone.height), n }, e.UISprite = function(e, i) { var n = new t.CacheUISprite; if (n.name = e, n.textureName = i.file, t.CacheFactory.addAnchorProperty(n, i), t.CacheFactory.addAngleProperty(n, i), t.CacheFactory.addScaleProperty(n, i), t.CacheFactory.addColorProperty(n, i), t.CacheFactory.addPositionProperty(n, i), t.CacheFactory.addAlignmentProperty(n, i, t.AlignmentScope.ALL), t.CacheFactory.addOrientationProperty(n, i), t.CacheFactory.addPlatformVisibilityProperty(n, i), void 0 !== i.image) { var s = i.image; if (n.imageType = s, "SLICED" === s) { var o = i.slice;
                    n.addSliceData(o.top, o.bottom, o.left, o.right, i.size.width, i.size.height) } else "TILED" === s && n.addTiledData(i.size.width, i.size.height) } else n.imageType = "NORMAL"; return n }, e.UIGroup = function(e, i) { var n = new t.CacheUIGroup; return n.name = e, t.CacheFactory.addPositionProperty(n, i), t.CacheFactory.addAngleProperty(n, i), t.CacheFactory.addScaleProperty(n, i), t.CacheFactory.addAlphaProperty(n, i), t.CacheFactory.addAlignmentProperty(n, i, t.AlignmentScope.ALL), t.CacheFactory.addPlatformVisibilityProperty(n, i), t.CacheFactory.addOrientationProperty(n, i), void 0 !== i.size && n.addSize(i.size.width, i.size.height), n }, e.UIButton = function(e, i) { var n = new t.CacheUIButton; if (n.name = e, n.textureName = i.file, t.CacheFactory.addAnchorProperty(n, i), t.CacheFactory.addAngleProperty(n, i), t.CacheFactory.addScaleProperty(n, i), t.CacheFactory.addColorProperty(n, i), t.CacheFactory.addAlphaProperty(n, i), t.CacheFactory.addPositionProperty(n, i), t.CacheFactory.addAlignmentProperty(n, i, t.AlignmentScope.ALL), t.CacheFactory.addPlatformVisibilityProperty(n, i), t.CacheFactory.addOrientationProperty(n, i), void 0 !== i.image) { var s = i.image; if (n.imageType = s, "SLICED" === s) { var o = i.slice;
                    n.addSliceData(o.top, o.bottom, o.left, o.right, i.size.width, i.size.height) } } else n.imageType = "NORMAL"; return void 0 !== i.transitionMode && (n.transitionMode = i.transitionMode, "image" === n.transitionMode ? n.addStates(i.transition.normal, i.transition.pressed, i.transition.hover) : "color" === n.transitionMode ? (n.addStates(i.transition.normal, i.transition.pressed, i.transition.hover), console.log("WARNING. Unsupported transition Mode [color]. " + n.transitionMode)) : "scale" === n.transitionMode && (n.addStates(i.transition.normal, i.transition.pressed, i.transition.hover), console.log("WARNING. Unsupported transition Mode [scale] " + n.transitionMode))), n }, e.UIText = function(e, i) { var n = new t.CacheUIText; return n.name = e, t.CacheFactory.addAnchorProperty(n, i), t.CacheFactory.addAngleProperty(n, i), t.CacheFactory.addScaleProperty(n, i), t.CacheFactory.addColorProperty(n, i, !0), t.CacheFactory.addAlphaProperty(n, i), t.CacheFactory.addPositionProperty(n, i), t.CacheFactory.addPlatformVisibilityProperty(n, i), t.CacheFactory.addAlignmentProperty(n, i, t.AlignmentScope.ALL), t.CacheFactory.addOrientationProperty(n, i), void 0 !== i.font && (n.fontName = i.font.name, n.fontSize = i.font.fontSize, n.lineHeight = i.font.lineHeight), void 0 !== i.text && (n.text = i.text), void 0 !== i.align && (n.align = i.align), void 0 !== i.stroke && (n.stroke = i.stroke), void 0 !== i.strokeThickness && (n.strokeThickness = i.strokeThickness), n }, e.addAnchorProperty = function(t, e) { void 0 !== e.anchor && (t.anchor.x = e.anchor.x, t.anchor.y = e.anchor.y) }, e.addAngleProperty = function(t, e) { void 0 !== e.angle && (t.angle = e.angle) }, e.addScaleProperty = function(t, e) { void 0 !== e.scale && (t.scale.x = e.scale.x, t.scale.y = e.scale.y) }, e.addColorProperty = function(t, e, i) { void 0 !== e.color && (t.tint = i ? e.color : Phaser.Color.hexToRGB(e.color)) }, e.addAlphaProperty = function(t, e) { void 0 !== e.alpha && (t.alpha = e.alpha) }, e.addPositionProperty = function(t, e) { void 0 !== e.position && (t.position.x = e.position.x, t.position.y = e.position.y) }, e.addAlignmentProperty = function(t, e, i) { if (void 0 !== e.alignment) { var n = 0,
                    s = 0,
                    o = !0,
                    a = !0;
                void 0 !== e.alignment.offset && (n = e.alignment.offset.x, s = e.alignment.offset.y, "string" == typeof n && (o = !1, n = Number(n.split("%")[0]) / 100), "string" == typeof s && (a = !1, s = Number(s.split("%")[0]) / 100)), t.addAlignment(e.alignment.type, n, s, o, a, i) } }, e.addOrientationProperty = function(e, i) { var n = t.OrientationType.BOTH; if (void 0 !== i.orientation) { if ((void 0 !== i.orientation.landscape && void 0 !== i.orientation.landscape.properties || void 0 !== i.orientation.portrait && void 0 !== i.orientation.portrait.properties) && (e.addOrientationProperty("scale", e.scale, null), e.addOrientationProperty("angle", e.angle, null), e.addOrientationProperty("anchor", e.anchor, null), e.addOrientationProperty("alpha", e.alpha, null), e.addOrientationProperty("position", e.position, null)), void 0 !== i.orientation.landscape) { if (void 0 !== i.orientation.landscape.alignment) { s = i.orientation.landscape;
                        t.CacheFactory.addAlignmentProperty(e, s, t.AlignmentScope.LANDSCAPE) } void 0 !== i.orientation.landscape.properties && t.CacheFactory.addOrientationPropertyForOrientation(e, i.orientation.landscape.properties, t.AlignmentScope.LANDSCAPE), void 0 !== i.orientation.landscape.hide && i.orientation.landscape.hide && (n = t.OrientationType.PORTRAIT) } if (void 0 !== i.orientation.portrait) { if (void 0 !== i.orientation.portrait.alignment) { var s = i.orientation.portrait;
                        t.CacheFactory.addAlignmentProperty(e, s, t.AlignmentScope.PORTRAIT) } void 0 !== i.orientation.portrait.properties && t.CacheFactory.addOrientationPropertyForOrientation(e, i.orientation.portrait.properties, t.AlignmentScope.PORTRAIT), void 0 !== i.orientation.portrait.hide && i.orientation.portrait.hide && (n === t.OrientationType.PORTRAIT ? n = t.OrientationType.NONE : n === t.OrientationType.BOTH && (n = t.OrientationType.LANDSCAPE)) } } e.setOrientationVisibility(n) }, e.addOrientationPropertyForOrientation = function(t, e, i) { void 0 !== e.scale && t.addOrientationProperty("scale", new Phaser.Point(e.scale.x, e.scale.y), i), void 0 !== e.angle && t.addOrientationProperty("angle", e.angle, i), void 0 !== e.anchor && t.addOrientationProperty("anchor", new Phaser.Point(e.anchor.x, e.anchor.y), i), void 0 !== e.alpha && t.addOrientationProperty("alpha", e.alpha, i), void 0 !== e.position && t.addOrientationProperty("position", new Phaser.Point(e.position.x, e.position.y), i) }, e.addPlatformVisibilityProperty = function(e, i) { var n = t.PlatformType.BOTH;
            void 0 !== i.visibility && (n = "desktop" === i.visibility ? t.PlatformType.DESKTOP : "mobile" === i.visibility ? t.PlatformType.MOBILE : t.PlatformType.BOTH), e.setPlatformVisibility(n) }, e }();
    t.CacheFactory = e }(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) { var e = function() {
        function e() {} return e.UICanvas = function(e, i) { var n = new t.UI(e, i.designResolution.width, i.designResolution.height); return n.name = i.name, i.safeZone && n.setSafeZone(i.safeZone.width * e.ph2UIManager.gameScale, i.safeZone.height * e.ph2UIManager.gameScale), n }, e.UISprite = function(e, i, n, s) { var o; if (i.sliceData ? ((o = new t.UISlicedSprite(e, i.position.x * e.ph2UIManager.gameScale, i.position.y * e.ph2UIManager.gameScale, n, i.textureName, i.sliceData.width * e.ph2UIManager.gameScale, i.sliceData.height * e.ph2UIManager.gameScale, { top: i.sliceData.top * e.ph2UIManager.gameScale, bottom: i.sliceData.bottom * e.ph2UIManager.gameScale, left: i.sliceData.left * e.ph2UIManager.gameScale, right: i.sliceData.right * e.ph2UIManager.gameScale })).name = i.name, o.anchor.x = i.anchor.x, o.anchor.y = i.anchor.y, o.angle = i.angle, o.scale.x = i.scale.x, o.scale.y = i.scale.y, o.alpha = i.alpha, o.tint = i.tint, o.x = i.position.x * e.ph2UIManager.gameScale, o.y = i.position.y * e.ph2UIManager.gameScale) : i.tiledData ? ((o = new t.UITiledSprite(e, 0, 0, i.tiledData.width * e.ph2UIManager.gameScale, i.tiledData.height * e.ph2UIManager.gameScale, n, i.textureName)).name = i.name, o.anchor.x = i.anchor.x, o.anchor.y = i.anchor.y, o.angle = i.angle, o.scale.x = i.scale.x, o.scale.y = i.scale.y, o.alpha = i.alpha, o.tint = i.tint, o.x = i.position.x * e.ph2UIManager.gameScale, o.y = i.position.y * e.ph2UIManager.gameScale) : ((o = new t.UISprite(e, 0, 0, n, i.textureName)).name = i.name, o.anchor.x = i.anchor.x, o.anchor.y = i.anchor.y, o.angle = i.angle, o.scale.x = i.scale.x, o.scale.y = i.scale.y, o.alpha = i.alpha, o.tint = i.tint, o.x = i.position.x * e.ph2UIManager.gameScale, o.y = i.position.y * e.ph2UIManager.gameScale), i.alignment && (o.enableAlignment(), o.alignment.setLandscapeAlignment(i.alignment.type, i.alignment.offset.x, i.alignment.isAbsoluteX, i.alignment.offset.y, i.alignment.isAbsoluteY), o.alignment.setPortraitAlignment(i.alignment.type, i.alignment.offset.x, i.alignment.isAbsoluteX, i.alignment.offset.y, i.alignment.isAbsoluteY), s instanceof t.UI ? o.alignment.setAlignTarget(t.AlignTargetType.WORLD) : o.alignment.setAlignTarget(t.AlignTargetType.PARENT)), i.portraitAlignment && (o.alignment || o.enableAlignment(), o.alignment.setPortraitAlignment(i.portraitAlignment.type, i.portraitAlignment.offset.x, i.portraitAlignment.isAbsoluteX, i.portraitAlignment.offset.y, i.portraitAlignment.isAbsoluteY)), i.landscapeAlignment && (o.alignment || o.enableAlignment(), o.alignment.setLandscapeAlignment(i.landscapeAlignment.type, i.landscapeAlignment.offset.x, i.landscapeAlignment.isAbsoluteX, i.landscapeAlignment.offset.y, i.landscapeAlignment.isAbsoluteY)), i.orientationProperties) { o.enableOrientationProperties(); for (a = 0; a < i.orientationProperties.backup.length; a++) "position" === (r = i.orientationProperties.backup[a]).key && (r.value.x = r.value.x * e.ph2UIManager.gameScale, r.value.y = r.value.y * e.ph2UIManager.gameScale), o.orientationProperties.backupOriginalProperty(r.key, r.value); for (a = 0; a < i.orientationProperties.portrait.length; a++) "position" === (r = i.orientationProperties.portrait[a]).key && (r.value.x = r.value.x * e.ph2UIManager.gameScale, r.value.y = r.value.y * e.ph2UIManager.gameScale), o.orientationProperties.addPortraitProperty(r.key, r.value); for (var a = 0; a < i.orientationProperties.landscape.length; a++) { var r = i.orientationProperties.landscape[a]; "position" === r.key && (r.value.x = r.value.x * e.ph2UIManager.gameScale, r.value.y = r.value.y * e.ph2UIManager.gameScale), o.orientationProperties.addLandscapePortrait(r.key, r.value) } } return o.enableVisibility(i.platformVisibility, i.orientationVisibility), o }, e.UIGroup = function(e, i, n) { var s = new t.UIGroup(e); if (s.name = i.name, s.x = i.position.x * e.ph2UIManager.gameScale, s.y = i.position.y * e.ph2UIManager.gameScale, s.angle = i.angle, s.scale.x = i.scale.x, s.scale.y = i.scale.y, s.alpha = i.alpha, i.alignment && (s.enableAlignment(), s.alignment.setLandscapeAlignment(i.alignment.type, i.alignment.offset.x, i.alignment.isAbsoluteX, i.alignment.offset.y, i.alignment.isAbsoluteY), s.alignment.setPortraitAlignment(i.alignment.type, i.alignment.offset.x, i.alignment.isAbsoluteX, i.alignment.offset.y, i.alignment.isAbsoluteY), n instanceof t.UI ? s.alignment.setAlignTarget(t.AlignTargetType.WORLD) : s.alignment.setAlignTarget(t.AlignTargetType.PARENT)), i.portraitAlignment && (s.alignment || s.enableAlignment(), s.alignment.setPortraitAlignment(i.portraitAlignment.type, i.portraitAlignment.offset.x, i.portraitAlignment.isAbsoluteX, i.portraitAlignment.offset.y, i.portraitAlignment.isAbsoluteY)), i.landscapeAlignment && (s.alignment || s.enableAlignment(), s.alignment.setLandscapeAlignment(i.landscapeAlignment.type, i.landscapeAlignment.offset.x, i.landscapeAlignment.isAbsoluteX, i.landscapeAlignment.offset.y, i.landscapeAlignment.isAbsoluteY)), i.orientationProperties) { s.enableOrientationProperties(); for (o = 0; o < i.orientationProperties.backup.length; o++) "position" === (a = i.orientationProperties.backup[o]).key && (a.value.x = a.value.x * e.ph2UIManager.gameScale, a.value.y = a.value.y * e.ph2UIManager.gameScale), s.orientationProperties.backupOriginalProperty(a.key, a.value); for (o = 0; o < i.orientationProperties.portrait.length; o++) "position" === (a = i.orientationProperties.portrait[o]).key && (a.value.x = a.value.x * e.ph2UIManager.gameScale, a.value.y = a.value.y * e.ph2UIManager.gameScale), s.orientationProperties.addPortraitProperty(a.key, a.value); for (var o = 0; o < i.orientationProperties.landscape.length; o++) { var a = i.orientationProperties.landscape[o]; "position" === a.key && (a.value.x = a.value.x * e.ph2UIManager.gameScale, a.value.y = a.value.y * e.ph2UIManager.gameScale), s.orientationProperties.addLandscapePortrait(a.key, a.value) } } return s.enableVisibility(i.platformVisibility, i.orientationVisibility), s }, e.UIText = function(e, i, n) { var s = new t.UIText(e, i.position.x * e.ph2UIManager.gameScale, i.position.y * e.ph2UIManager.gameScale, i.text, { font: i.fontSize * e.ph2UIManager.gameScale + "px " + i.fontName, fill: i.tint, align: i.align, stroke: i.stroke, strokeThickness: i.strokeThickness * e.ph2UIManager.gameScale }); if (s.name = i.name, s.angle = i.angle, s.anchor.x = i.anchor.x, s.anchor.y = i.anchor.y, s.scale.x = i.scale.x, s.scale.y = i.scale.y, s.alpha = i.alpha, i.alignment && (s.enableAlignment(), s.alignment.setLandscapeAlignment(i.alignment.type, i.alignment.offset.x, i.alignment.isAbsoluteX, i.alignment.offset.y, i.alignment.isAbsoluteY), s.alignment.setPortraitAlignment(i.alignment.type, i.alignment.offset.x, i.alignment.isAbsoluteX, i.alignment.offset.y, i.alignment.isAbsoluteY), n instanceof t.UI ? s.alignment.setAlignTarget(t.AlignTargetType.WORLD) : s.alignment.setAlignTarget(t.AlignTargetType.PARENT)), i.portraitAlignment && (s.alignment || s.enableAlignment(), s.alignment.setPortraitAlignment(i.portraitAlignment.type, i.portraitAlignment.offset.x, i.portraitAlignment.isAbsoluteX, i.portraitAlignment.offset.y, i.portraitAlignment.isAbsoluteY)), i.landscapeAlignment && (s.alignment || s.enableAlignment(), s.alignment.setLandscapeAlignment(i.landscapeAlignment.type, i.landscapeAlignment.offset.x, i.landscapeAlignment.isAbsoluteX, i.landscapeAlignment.offset.y, i.landscapeAlignment.isAbsoluteY)), i.orientationProperties) { s.enableOrientationProperties(); for (o = 0; o < i.orientationProperties.backup.length; o++) "position" === (a = i.orientationProperties.backup[o]).key && (a.value.x = a.value.x * e.ph2UIManager.gameScale, a.value.y = a.value.y * e.ph2UIManager.gameScale), s.orientationProperties.backupOriginalProperty(a.key, a.value); for (o = 0; o < i.orientationProperties.portrait.length; o++) "position" === (a = i.orientationProperties.portrait[o]).key && (a.value.x = a.value.x * e.ph2UIManager.gameScale, a.value.y = a.value.y * e.ph2UIManager.gameScale), s.orientationProperties.addPortraitProperty(a.key, a.value); for (var o = 0; o < i.orientationProperties.landscape.length; o++) { var a = i.orientationProperties.landscape[o]; "position" === a.key && (a.value.x = a.value.x * e.ph2UIManager.gameScale, a.value.y = a.value.y * e.ph2UIManager.gameScale), s.orientationProperties.addLandscapePortrait(a.key, a.value) } } return s.enableVisibility(i.platformVisibility, i.orientationVisibility), s }, e.UIButton = function(e, i, n, s) { var o; if (i.sliceData ? ((o = new t.UISlicedButton(e, i.position.x * e.ph2UIManager.gameScale, i.position.y * e.ph2UIManager.gameScale, n, i.textureName, i.sliceData.width * e.ph2UIManager.gameScale, i.sliceData.height * e.ph2UIManager.gameScale, { top: i.sliceData.top * e.ph2UIManager.gameScale, bottom: i.sliceData.bottom * e.ph2UIManager.gameScale, left: i.sliceData.left * e.ph2UIManager.gameScale, right: i.sliceData.right * e.ph2UIManager.gameScale })).name = i.name, o.anchor.x = i.anchor.x, o.anchor.y = i.anchor.y, o.angle = i.angle, o.scale.x = i.scale.x, o.scale.y = i.scale.y, o.alpha = i.alpha, o.tint = i.tint, o.x = i.position.x * e.ph2UIManager.gameScale, o.y = i.position.y * e.ph2UIManager.gameScale, i.statesData && "color" === i.transitionMode && o.setTransitionColor(i.statesData.normal, i.statesData.pressed, i.statesData.hover)) : (o = new t.UIButton(e, n), i.statesData ? "image" === i.transitionMode && o.setFrames(i.statesData.hover, i.statesData.normal, i.statesData.pressed, i.statesData.normal) : o.setFrames(i.textureName, i.textureName, i.textureName, i.textureName), o.name = i.name, o.anchor.x = i.anchor.x, o.anchor.y = i.anchor.y, o.angle = i.angle, o.scale.x = i.scale.x, o.scale.y = i.scale.y, o.alpha = i.alpha, o.tint = i.tint, o.x = i.position.x * e.ph2UIManager.gameScale, o.y = i.position.y * e.ph2UIManager.gameScale), i.alignment && (o.enableAlignment(), o.alignment.setLandscapeAlignment(i.alignment.type, i.alignment.offset.x, i.alignment.isAbsoluteX, i.alignment.offset.y, i.alignment.isAbsoluteY), o.alignment.setPortraitAlignment(i.alignment.type, i.alignment.offset.x, i.alignment.isAbsoluteX, i.alignment.offset.y, i.alignment.isAbsoluteY), s instanceof t.UI ? o.alignment.setAlignTarget(t.AlignTargetType.WORLD) : o.alignment.setAlignTarget(t.AlignTargetType.PARENT)), i.portraitAlignment && (o.alignment || o.enableAlignment(), o.alignment.setPortraitAlignment(i.portraitAlignment.type, i.portraitAlignment.offset.x, i.portraitAlignment.isAbsoluteX, i.portraitAlignment.offset.y, i.portraitAlignment.isAbsoluteY)), i.landscapeAlignment && (o.alignment || o.enableAlignment(), o.alignment.setLandscapeAlignment(i.landscapeAlignment.type, i.landscapeAlignment.offset.x, i.landscapeAlignment.isAbsoluteX, i.landscapeAlignment.offset.y, i.landscapeAlignment.isAbsoluteY)), i.orientationProperties) { o.enableOrientationProperties(); for (a = 0; a < i.orientationProperties.backup.length; a++) "position" === (r = i.orientationProperties.backup[a]).key && (r.value.x = r.value.x * e.ph2UIManager.gameScale, r.value.y = r.value.y * e.ph2UIManager.gameScale), o.orientationProperties.backupOriginalProperty(r.key, r.value); for (a = 0; a < i.orientationProperties.portrait.length; a++) "position" === (r = i.orientationProperties.portrait[a]).key && (r.value.x = r.value.x * e.ph2UIManager.gameScale, r.value.y = r.value.y * e.ph2UIManager.gameScale), o.orientationProperties.addPortraitProperty(r.key, r.value); for (var a = 0; a < i.orientationProperties.landscape.length; a++) { var r = i.orientationProperties.landscape[a]; "position" === r.key && (r.value.x = r.value.x * e.ph2UIManager.gameScale, r.value.y = r.value.y * e.ph2UIManager.gameScale), o.orientationProperties.addLandscapePortrait(r.key, r.value) } } return o.enableVisibility(i.platformVisibility, i.orientationVisibility), o }, e }();
    t.UIFactory = e }(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) { var e = function(t) {
        function e(e, i, n) { var s = t.call(this, e) || this; return s.designResolution = new Phaser.Rectangle(0, 0, i, n), s.safeZone = new Phaser.Rectangle(0, 0, i, n), e.ph2UIManager.events.gameSizeChanged.add(s.onGameSizeChanged, s), s } return __extends(e, t), e.prototype.onGameSizeChanged = function() { this.windowSizeChanged() }, e.prototype.setSafeZone = function(t, e) { this.safeZone.width = t, this.safeZone.height = e }, e.prototype.setDesignResolution = function(t, e) { this.designResolution.width = t, this.designResolution.height = e }, e.prototype.getDesignResolution = function() { return this.designResolution }, e.prototype.getSafeZone = function() { return this.safeZone }, e.prototype.enableAlignment = function() {}, e.prototype.enableOrientationProperties = function() {}, e.prototype.windowSizeChanged = function() { for (var t = 0; t < this.children.length; t++) "function" == typeof this.children[t].windowSizeChanged && this.children[t].windowSizeChanged() }, e.prototype.destroy = function(e, i) { t.prototype.destroy.call(this, e, i), this.safeZone = null, this.designResolution = null }, e }(Phaser.Group);
    t.UI = e }(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) { var e = function(e) {
        function i(t, i) { var n = e.call(this, t, 0, 0, i) || this; return n.forceOut = !0, n } return __extends(i, e), i.prototype.enableAlignment = function() { this.alignment = new t.UIAlignment(this.game) }, i.prototype.enableOrientationProperties = function() { this.orientationProperties = new t.UIOrientationProperties(this.game, this) }, i.prototype.enableVisibility = function(e, i) { this.visibility = new t.UIVisibility(this.game), this.visibility.setPlatformVisible(e), this.visibility.setOrientationVisible(i) }, i.prototype.windowSizeChanged = function() { this.visibility && this.visibility.applyVisibility(this), this.orientationProperties && this.orientationProperties.apply(this), this.alignment && this.alignment.applyAlignment(this); for (var t = 0; t < this.children.length; t++) "function" == typeof this.children[t].windowSizeChanged && this.children[t].windowSizeChanged() }, i.prototype.destroy = function(t) { e.prototype.destroy.call(this, t), this.alignment && (this.alignment.destroy(), this.alignment = null) }, i }(Phaser.Button);
    t.UIButton = e }(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) { var e = function(e) {
        function i(t) { return e.call(this, t) || this } return __extends(i, e), i.prototype.enableAlignment = function() { this.alignment = new t.UIAlignment(this.game) }, i.prototype.enableVisibility = function(e, i) { this.visibility = new t.UIVisibility(this.game), this.visibility.setPlatformVisible(e), this.visibility.setOrientationVisible(i) }, i.prototype.enableOrientationProperties = function() { this.orientationProperties = new t.UIOrientationProperties(this.game, this) }, i.prototype.windowSizeChanged = function() { this.visibility && this.visibility.applyVisibility(this), this.orientationProperties && this.orientationProperties.apply(this), this.alignment && this.alignment.applyAlignment(this); for (var t = 0; t < this.children.length; t++) "function" == typeof this.children[t].windowSizeChanged && this.children[t].windowSizeChanged() }, i.prototype.destroy = function(t, i) { e.prototype.destroy.call(this, t, i), this.alignment && (this.alignment.destroy(), this.alignment = null) }, i }(Phaser.Group);
    t.UIGroup = e }(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) { var e = function(e) {
        function i(t, i, n, s, o, a, r, h) { var l = e.call(this, t, i, n, s, o, a, r, h) || this; return l.inputEnabled = !0, l.input.start(0, !0), l.input.useHandCursor = !0, l.events.onInputOver.add(l.onInputOverHandler, l), l.events.onInputOut.add(l.onInputOutHandler, l), l.events.onInputDown.add(l.onInputDownHandler, l), l.events.onInputUp.add(l.onInputUpHandler, l), l.justReleasedPreventsOver = Phaser.PointerMode.CURSOR, l.onOverMouseOnly = !0, l.onInputOver = new Phaser.Signal, l.onInputOut = new Phaser.Signal, l.onInputDown = new Phaser.Signal, l.onInputUp = new Phaser.Signal, l.freezeFrames = !1, l.forceOut = !0, l.hoverColor = "#FFFFFF", l.normalColor = "#FFFFFF", l.pressedColor = "#FFFFFF", l } return __extends(i, e), i.prototype.onInputOverHandler = function(t, e) { e.justReleased() && (this.justReleasedPreventsOver & e.pointerMode) === e.pointerMode || this.onOverMouseOnly && !e.isMouse || this.onInputOver && this.onInputOver.dispatch(this, e) }, i.prototype.onInputOutHandler = function(t, e) { this.onInputOut && this.onInputOut.dispatch(this, e) }, i.prototype.onInputDownHandler = function(t, e) { this.onInputDown && this.onInputDown.dispatch(this, e) }, i.prototype.onInputUpHandler = function(t, e, i) { this.onInputUp && this.onInputUp.dispatch(this, e, i) }, i.prototype.setTransitionColor = function(t, e, i) { this.normalColor = t, this.pressedColor = e, this.hoverColor = i }, i.prototype.enableAlignment = function() { this.alignment = new t.UIAlignment(this.game) }, i.prototype.enableOrientationProperties = function() { this.orientationProperties = new t.UIOrientationProperties(this.game, this) }, i.prototype.enableVisibility = function(e, i) { this.visibility = new t.UIVisibility(this.game), this.visibility.setPlatformVisible(e), this.visibility.setOrientationVisible(i) }, i.prototype.windowSizeChanged = function() { this.visibility && this.visibility.applyVisibility(this), this.orientationProperties && this.orientationProperties.apply(this), this.alignment && this.alignment.applyAlignment(this); for (var t = 0; t < this.children.length; t++) "function" == typeof this.children[t].windowSizeChanged && this.children[t].windowSizeChanged() }, i.prototype.destroy = function() { for (var t = [], i = 0; i < arguments.length; i++) t[i] = arguments[i];
            e.prototype.destroy.call(this, t), this.onInputOver.dispose(), this.onInputOut.dispose(), this.onInputDown.dispose(), this.onInputUp.dispose() }, i }(PhaserNineSlice.NineSlice);
    t.UISlicedButton = e }(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) { var e = function(e) {
        function i(t, i, n, s, o, a, r, h) { return e.call(this, t, i, n, s, o, a, r, h) || this } return __extends(i, e), i.prototype.enableAlignment = function() { this.alignment = new t.UIAlignment(this.game) }, i.prototype.enableOrientationProperties = function() { this.orientationProperties = new t.UIOrientationProperties(this.game, this) }, i.prototype.enableVisibility = function(e, i) { this.visibility = new t.UIVisibility(this.game), this.visibility.setPlatformVisible(e), this.visibility.setOrientationVisible(i) }, i.prototype.windowSizeChanged = function() { this.visibility && this.visibility.applyVisibility(this), this.orientationProperties && this.orientationProperties.apply(this), this.alignment && this.alignment.applyAlignment(this); for (var t = 0; t < this.children.length; t++) "function" == typeof this.children[t].windowSizeChanged && this.children[t].windowSizeChanged() }, i.prototype.destroy = function() { for (var t = [], i = 0; i < arguments.length; i++) t[i] = arguments[i];
            e.prototype.destroy.call(this, t), this.alignment && (this.alignment.destroy(), this.alignment = null) }, i }(PhaserNineSlice.NineSlice);
    t.UISlicedSprite = e }(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) { var e = function(e) {
        function i(t, i, n, s, o) { return e.call(this, t, i, n, s, o) || this } return __extends(i, e), i.prototype.enableAlignment = function() { this.alignment = new t.UIAlignment(this.game) }, i.prototype.enableVisibility = function(e, i) { this.visibility = new t.UIVisibility(this.game), this.visibility.setPlatformVisible(e), this.visibility.setOrientationVisible(i) }, i.prototype.enableOrientationProperties = function() { this.orientationProperties = new t.UIOrientationProperties(this.game, this) }, i.prototype.windowSizeChanged = function() { this.visibility && this.visibility.applyVisibility(this), this.orientationProperties && this.orientationProperties.apply(this), this.alignment && this.alignment.applyAlignment(this); for (var t = 0; t < this.children.length; t++) "function" == typeof this.children[t].windowSizeChanged && this.children[t].windowSizeChanged() }, i.prototype.destroy = function(t) { e.prototype.destroy.call(this, t), this.alignment && (this.alignment.destroy(), this.alignment = null) }, i }(Phaser.Sprite);
    t.UISprite = e }(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) { var e = function(e) {
        function i(t, i, n, s, o) { var a = e.call(this, t, i, n, s, o) || this; return a.fitEnable = !1, a } return __extends(i, e), i.prototype.enableAnimation = function() { this.ph2Animations = new t.AnimationManager(this.game), this.cacheAnimations = [], this.animationsName = [] }, i.prototype.addAnimation = function(t) { this.cacheAnimations.push(t), this.animationsName.push(t.name) }, i.prototype.getAnimations = function() { return this.cacheAnimations }, i.prototype.getAnimationsName = function() { return this.animationsName }, i.prototype.enableFitSizetext = function(t, e, i) { this.originSize = t, this.maxWidth = e, this.maxHeight = i, this.fitFontSizeText(), this.fitEnable = !0 }, i.prototype.fitFontSizeText = function() { var t, e, n, s; for (this.fontSize = this.originSize, e = this.width, n = this.height, s = this.fontSize; e > this.maxWidth || n > this.maxHeight && -1 !== this.maxHeight;) { if ((t = parseInt(s.toString().replace("px", ""), 10) - 1) < i.minFontSize) { s = t = i.minFontSize, this.setStyle({ fontSize: s }, !0); break } s = t, this.fontSize = s, e = this.width, n = this.height } }, Object.defineProperty(i.prototype, "text", { get: function() { return this._text }, set: function(t) { t !== this._text && (this._text = t.toString() || "", this.dirty = !0, this.parent && this.updateTransform()), !0 === this.fitEnable && this.fitFontSizeText() }, enumerable: !0, configurable: !0 }), Object.defineProperty(i.prototype, "scaleX", { get: function() { return this.scale.x }, set: function(t) { this.scale.x = t }, enumerable: !0, configurable: !0 }), Object.defineProperty(i.prototype, "scaleY", { get: function() { return this.scale.y }, set: function(t) { this.scale.y = t }, enumerable: !0, configurable: !0 }), i.prototype.enableAlignment = function() { this.alignment = new t.UIAlignment(this.game) }, i.prototype.enableOrientationProperties = function() { this.orientationProperties = new t.UIOrientationProperties(this.game, this) }, i.prototype.enableVisibility = function(e, i) { this.visibility = new t.UIVisibility(this.game), this.visibility.setPlatformVisible(e), this.visibility.setOrientationVisible(i) }, i.prototype.enableState = function(e) { this.stateManager = new t.UIStates(this, e) }, i.prototype.setCurrentState = function(t) { this.stateManager.setCurrentState(t) }, i.prototype.getAllStates = function() { return this.stateManager ? this.stateManager.getAllStates() : [] }, i.prototype.getCurrentState = function() { return this.stateManager.getCurrentState() }, i.prototype.checkExistState = function(t) { return void 0 !== this.stateManager && this.stateManager.checkExistState(t) }, i.prototype.windowSizeChanged = function() { this.visibility && this.visibility.applyVisibility(this), this.orientationProperties && this.orientationProperties.apply(this), this.alignment && this.alignment.applyAlignment(this); for (var t = 0; t < this.children.length; t++) void 0 !== this.children[t].windowSizeChanged && this.children[t].windowSizeChanged() }, i.prototype.determineFontProperties = function(e) { var i, n = Phaser.Text.fontPropertiesCache[e]; if (t.UITextStyle.textStyles[e] || (i = new t.UITextStyle, t.UITextStyle.textStyles[e] = i), (i = t.UITextStyle.textStyles[e]).needUpdate || !n) { i.needUpdate = !1; var s = Phaser.Text.fontPropertiesCanvas,
                    o = Phaser.Text.fontPropertiesContext;
                o.font = e; var a = Math.ceil(o.measureText(i.testString).width * i.baselineX),
                    r = a,
                    h = 2 * r; if (r = r * i.baselineY | 0, s.width = a, s.height = h, o.fillStyle = "#f00", o.fillRect(0, 0, a, h), o.font = e, o.textBaseline = "alphabetic", o.fillStyle = "#000", o.fillText(i.testString, 0, r), n = { ascent: 0, descent: 0, fontSize: 0 }, !o.getImageData(0, 0, a, h)) return n.ascent = r, n.descent = r + 6, n.fontSize = n.ascent + n.descent, Phaser.Text.fontPropertiesCache[e] = n, n; var l = o.getImageData(0, 0, a, h).data,
                    c = l.length,
                    u = 4 * a,
                    p = void 0,
                    d = void 0,
                    m = 0,
                    g = !1; for (p = 0; p < r; p++) { for (d = 0; d < u; d += 4)
                        if (255 !== l[m + d]) { g = !0; break } if (g) break;
                    m += u } for (n.ascent = r - p, m = c - u, g = !1, p = h; p > r; p--) { for (d = 0; d < u; d += 4)
                        if (255 !== l[m + d]) { g = !0; break } if (g) break;
                    m -= u } n.descent = p - r, n.fontSize = n.descent + n.ascent } return n }, i.prototype.destroy = function(t) { e.prototype.destroy.call(this, t), this.alignment && (this.alignment.destroy(), this.alignment = null) }, i.minFontSize = 10, i }(Phaser.Text);
    t.UIText = e }(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) { var e = function(e) {
        function i(t, i, n, s, o, a, r) { return e.call(this, t, i, n, s, o, a, r) || this } return __extends(i, e), i.prototype.enableAlignment = function() { this.alignment = new t.UIAlignment(this.game) }, i.prototype.enableOrientationProperties = function() { this.orientationProperties = new t.UIOrientationProperties(this.game, this) }, i.prototype.enableVisibility = function(e, i) { this.visibility = new t.UIVisibility(this.game), this.visibility.setPlatformVisible(e), this.visibility.setOrientationVisible(i) }, i.prototype.windowSizeChanged = function() { this.visibility && this.visibility.applyVisibility(this), this.orientationProperties && this.orientationProperties.apply(this), this.alignment && this.alignment.applyAlignment(this); for (var t = 0; t < this.children.length; t++) "function" == typeof this.children[t].windowSizeChanged && this.children[t].windowSizeChanged() }, i.prototype.destroy = function(t) { e.prototype.destroy.call(this, t), this.alignment && (this.alignment.destroy(), this.alignment = null) }, i }(Phaser.TileSprite);
    t.UITiledSprite = e }(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) { var e = function() {
        function t(t) { this.animations = {}, this.game = t, this.game.onPause.add(this.onPause, this), this.game.onResume.add(this.onResume, this), this.game.ph2AnimationManager.pauseAllSignal.add(this.pauseAll, this), this.game.ph2AnimationManager.resumeAllSignal.add(this.resumeAll, this), this.game.ph2AnimationManager.stopAllSignal.add(this.stopAll, this) } return t.prototype.play = function(t, e, i) { return this.animations[t] ? this.currentAnim ? this.currentAnim.name === t ? this.currentAnim.isPlaying() ? this.currentAnim : this.currentAnim.play(e, i) : (this.currentAnim.isPlaying() && this.currentAnim.stop(), this.currentAnim = this.animations[t], this.currentAnim.play(e, i)) : (this.currentAnim = this.animations[t], this.currentAnim.play(e, i)) : null }, t.prototype.stop = function(t, e, i) { this.currentAnim && (t ? this.currentAnim.name === t && this.currentAnim.stop(e, i) : this.currentAnim.stop(e, i)) }, t.prototype.pause = function(t) { this.currentAnim && (t ? this.currentAnim.name === t && this.currentAnim.pause() : this.currentAnim.pause()) }, t.prototype.resume = function(t) { this.currentAnim && (t ? this.currentAnim.name === t && this.currentAnim.resume() : this.currentAnim.resume()) }, t.prototype.add = function(t) { this.animations[t.name] = t }, t.prototype.onPause = function() { this.currentAnim && this.currentAnim.autoPause() }, t.prototype.onResume = function() { this.currentAnim && this.currentAnim.autoResume() }, t.prototype.getAnimations = function() { return this.animations }, t.prototype.getCurrentAnimation = function() { return this.currentAnim }, t.prototype.removeListeners = function(t) { var e = this.animations[t];
            e && e.removeListeners() }, t.prototype.pauseAll = function() { this.currentAnim && this.currentAnim.batchPause() }, t.prototype.resumeAll = function() { this.currentAnim && this.currentAnim.batchResume() }, t.prototype.stopAll = function() { this.currentAnim && !this.currentAnim.isStopped() && this.currentAnim.stop() }, t.prototype.destroy = function() { this.currentAnim && this.currentAnim.stop(), this.game.onPause.remove(this.onPause, this), this.game.onResume.remove(this.onResume, this), this.game.ph2AnimationManager.pauseAllSignal.remove(this.pauseAll, this), this.game.ph2AnimationManager.resumeAllSignal.remove(this.resumeAll, this), this.game.ph2AnimationManager.stopAllSignal.remove(this.stopAll, this); for (var t = Object.keys(this.animations), e = 0; e < t.length; e++) this.animations[t[e]].destroy() }, t }();
    t.AnimationManager = e }(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) { var e = function() {
        function t(t) { this.game = t, this.alignBounds = new Phaser.Rectangle(0, 0, this.game.width, this.game.height) } return t.prototype.changeOrientation = function(t) { this.currentOrientation = t }, t.prototype.getCurrentOrientation = function() { return this.currentOrientation }, t.alignInParent = function(t, e, i, n) { if ("__world" !== t.parent.name) { var s = t.parent.scale;
                t.parent.scale.setTo(1), t.alignIn(t.parent, e, i, n), t.left -= t.parent.left + t.parent.width * t.parent.anchor.x, t.top -= t.parent.top + t.parent.height * t.parent.anchor.y, t.parent.scale = s } }, t }();
    t.AlignmentSystem = e }(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) {! function(t) { t[t.LANDSCAPE = 0] = "LANDSCAPE", t[t.PORTRAIT = 1] = "PORTRAIT" }(t.Orientation || (t.Orientation = {})); var e = function() {
        function e(t) { this.game = t, this.gameSizeChanged = new Phaser.Signal, this.orientationChanged = new Phaser.Signal } return e.prototype.onGameResize = function(e, i) { this.game.ph2UIManager.alignmentManager.alignBounds.width = e, this.game.ph2UIManager.alignmentManager.alignBounds.height = i, e > i ? this.game.ph2UIManager.alignmentManager.changeOrientation(t.Orientation.LANDSCAPE) : this.game.ph2UIManager.alignmentManager.changeOrientation(t.Orientation.PORTRAIT), this.gameSizeChanged.dispatch(e, i) }, e }();
    t.UIEventManager = e }(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) { var e = function(e) {
        function i(t, i) { var n = e.call(this, t, i) || this; return TweenLite.defaultEase = Linear.easeNone, n.addAnimationManager(), n.addAnimationFactory(), n } return __extends(i, e), i.prototype.addAnimationManager = function() { Phaser.Game.prototype.ph2AnimationManager = new t.AnimationSystem(this.game), Phaser.Game.prototype.ph2UIManager = new t.UISystem(this.game) }, i.prototype.addAnimationFactory = function() { Phaser.GameObjectFactory.prototype.ph2AnimationObject = function(t, e, i, n, s) { void 0 === s && (s = this.world); var o = this.game.ph2AnimationManager.getAnimationObject(i, n); return o.x = t, o.y = e, s.add(o), o }, Phaser.GameObjectCreator.prototype.ph2AnimationObject = function(t, e, i, n) { var s = this.game.ph2AnimationManager.getAnimationObject(i, n); return s.x = t, s.y = e, s }, Phaser.GameObjectFactory.prototype.ph2UI = function(t, e, i) { void 0 === i && (i = this.world); var n = this.game.ph2UIManager.getUI(t, e); return i.add(n), n }, Phaser.GameObjectCreator.prototype.ph2UI = function(t, e) { return this.game.ph2UIManager.getUI(t, e) } }, i }(Phaser.Plugin);
    t.AnimationPlugin = e }(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) { var e = function() {
        function e(e) { this.game = e, this.events = new t.UIEventManager(this.game), this.alignmentManager = new t.AlignmentSystem(this.game), this.scale = 1, this.enableVisibilityAndOrientationComponent = !0 } return e.prototype.setCurrentPlatform = function(t) { this.currentPlatform = t }, e.prototype.setGameScale = function(t) { this.scale = t }, Object.defineProperty(e.prototype, "gameScale", { get: function() { return this.scale }, enumerable: !0, configurable: !0 }), e.prototype.createCacheUINode = function(e, i, n, s, o) { var a = e.name,
                r = a;
            o && (r = o + "/" + a); var h = null,
                l = i[r]; if (null === s) h = t.CacheFactory.UICanvas(a, l);
            else { var c = l.type; "sprite" === c ? h = t.CacheFactory.UISprite(a, l) : "container" === c ? h = t.CacheFactory.UIGroup(a, l) : "button" === c ? h = t.CacheFactory.UIButton(a, l) : "text" === c && (h = t.CacheFactory.UIText(a, l)) } return h }, e.prototype.createCacheUIDataTree = function(t, e, i, n) { var s = null; if (t) { var o = t.name; if (s = this.createCacheUINode(t, e, t.animations, i, n), t.children) { n = null !== n ? 0 === n.length ? o : n + "/" + o : ""; for (var a = t.children, r = 0; r < a.length; r++) { var h = this.createCacheUIDataTree(a[r], e, s, n);
                        h && s.addChild(h) } } } return s }, e.prototype.generateUIData = function(e) { var i = e.hierarchy,
                n = e.properties,
                s = this.createCacheUIDataTree(i, n, null, null); return new t.UIData(s) }, e.prototype.getUIDataFromJSON = function(t) { var e = this.game.cache.getJSON(t); return e ? this.generateUIData(e) : (console.warn("You should load the UI JSON first for: ", t), null) }, e.prototype.getUIData = function(t) { return this.getUIDataFromJSON(t) }, e.prototype.getUI = function(t, e) { var i = this.getUIData(t),
                n = this.createTree(i.hierarchy, e, null); return n.windowSizeChanged(), n }, e.prototype.createTree = function(t, e, i) { var n = null; if (t && (n = this.createNode(t, e, i), t.children))
                for (var s = t.children, o = 0; o < s.length; o++) { var a = this.createTree(s[o], e, n);
                    a && n.addChild(a) }
            return n }, e.prototype.createNode = function(e, i, n) { var s = null; return null === n ? s = t.UIFactory.UICanvas(this.game, e) : e instanceof t.CacheUISprite ? s = t.UIFactory.UISprite(this.game, e, i, n) : e instanceof t.CacheUIGroup ? s = t.UIFactory.UIGroup(this.game, e, n) : e instanceof t.CacheUIButton ? s = t.UIFactory.UIButton(this.game, e, i, n) : e instanceof t.CacheUIText && (s = t.UIFactory.UIText(this.game, e, n)), s }, e.findObject = function(t, e) { for (var i = e, n = "/" !== t[0] ? 0 : 1, s = t.split("/"), o = n; o < s.length; o++) { var a = s[o],
                    r = i.children;
                i = null; for (var h = 0, l = r.length; h < l; ++h) { var c = r[h]; if (c.name === a) { i = c; break } } if (!i) return null } return i }, e }();
    t.UISystem = e }(Ph2 || (Ph2 = {})), Phaser.Text.prototype.determineFontProperties = function(t) { var e = Phaser.Text.fontPropertiesCache[t]; if (!e) { e = {}; var i = Phaser.Text.fontPropertiesCanvas,
                n = Phaser.Text.fontPropertiesContext;
            n.font = t; var s = "ÎȚÂĂ|MÉq1234567890",
                o = Math.ceil(n.measureText(s).width),
                a = Math.ceil(n.measureText(s).width),
                r = 2 * a; if (a = 1.6 * a | 0, i.width = o, i.height = r, n.fillStyle = "#f00", n.fillRect(0, 0, o, r), n.font = t, n.textBaseline = "alphabetic", n.fillStyle = "#000", n.fillText(s, 0, a), !n.getImageData(0, 0, o, r)) return e.ascent = a, e.descent = a + 6, e.fontSize = e.ascent + e.descent, Phaser.Text.fontPropertiesCache[t] = e, e; var h, l, c = n.getImageData(0, 0, o, r).data,
                u = c.length,
                p = 4 * o,
                d = 0,
                m = !1; for (h = 0; h < a; h++) { for (l = 0; l < p; l += 4)
                    if (255 !== c[d + l]) { m = !0; break } if (m) break;
                d += p } for (e.ascent = a - h, d = u - p, m = !1, h = r; h > a; h--) { for (l = 0; l < p; l += 4)
                    if (255 !== c[d + l]) { m = !0; break } if (m) break;
                d -= p } e.descent = h - a, e.descent += 6, e.fontSize = e.ascent + e.descent, Phaser.Text.fontPropertiesCache[t] = e } return e }, Ph2.UIText.prototype.determineFontProperties = function(t) { var e = Phaser.Text.fontPropertiesCache[t]; if (!e) { e = {}; var i = Phaser.Text.fontPropertiesCanvas,
                n = Phaser.Text.fontPropertiesContext;
            n.font = t; var s = "ÎȚÂĂ|MÉq1234567890",
                o = Math.ceil(n.measureText(s).width),
                a = Math.ceil(n.measureText(s).width),
                r = 2 * a; if (a = 1.6 * a | 0, i.width = o, i.height = r, n.fillStyle = "#f00", n.fillRect(0, 0, o, r), n.font = t, n.textBaseline = "alphabetic", n.fillStyle = "#000", n.fillText(s, 0, a), !n.getImageData(0, 0, o, r)) return e.ascent = a, e.descent = a + 6, e.fontSize = e.ascent + e.descent, Phaser.Text.fontPropertiesCache[t] = e, e; var h, l, c = n.getImageData(0, 0, o, r).data,
                u = c.length,
                p = 4 * o,
                d = 0,
                m = !1; for (h = 0; h < a; h++) { for (l = 0; l < p; l += 4)
                    if (255 !== c[d + l]) { m = !0; break } if (m) break;
                d += p } for (e.ascent = a - h + 5, d = u - p, m = !1, h = r; h > a; h--) { for (l = 0; l < p; l += 4)
                    if (255 !== c[d + l]) { m = !0; break } if (m) break;
                d -= p } e.descent = h - a, e.descent += 6, e.fontSize = e.ascent + e.descent, Phaser.Text.fontPropertiesCache[t] = e } return e },
    function(t) {
        function e(t, e) { for (var i = t.length; i--;)
                if (t[i] === e) return i; return -1 }

        function i(t, e) { if (t.length != e.length) return !1; for (var i = 0; i < t.length; i++)
                if (t[i] !== e[i]) return !1; return !0 }

        function n(t) { for (p in g) g[p] = t[S[p]] }

        function s(t) {
            [32, 37, 38, 39, 40].indexOf(t.keyCode) > -1 && t.preventDefault(); var i, s, o, a, l, c; if (i = t.keyCode, -1 == e(_, i) && _.push(i), 93 != i && 224 != i || (i = 91), i in g) { g[i] = !0; for (o in y) y[o] == i && (r[o] = !0) } else if (n(t), r.filter.call(this, t) && i in m)
                for (c = h(), a = 0; a < m[i].length; a++)
                    if ((s = m[i][a]).scope == c || "all" == s.scope) { l = s.mods.length > 0; for (o in g)(!g[o] && e(s.mods, +o) > -1 || g[o] && -1 == e(s.mods, +o)) && (l = !1);
                        (0 != s.mods.length || g[16] || g[18] || g[17] || g[91]) && !l || !1 === s.method(t, s) && (t.preventDefault ? t.preventDefault() : t.returnValue = !1, t.stopPropagation && t.stopPropagation(), t.cancelBubble && (t.cancelBubble = !0)) } }

        function o(t) { var i, n = t.keyCode,
                s = e(_, n); if (s >= 0 && _.splice(s, 1), 93 != n && 224 != n || (n = 91), n in g) { g[n] = !1; for (i in y) y[i] == n && (r[i] = !1) } }

        function a() { for (p in g) g[p] = !1; for (p in y) r[p] = !1 }

        function r(t, e, i) { var n, s;
            n = l(t), void 0 === i && (i = e, e = "all"); for (var o = 0; o < n.length; o++) s = [], (t = n[o].split("+")).length > 1 && (s = c(t), t = [t[t.length - 1]]), t = t[0], (t = b(t)) in m || (m[t] = []), m[t].push({ shortcut: n[o], scope: e, method: i, key: n[o], mods: s }) }

        function h() { return f || "all" }

        function l(t) { var e; return t = t.replace(/\s/g, ""), "" == (e = t.split(","))[e.length - 1] && (e[e.length - 2] += ","), e }

        function c(t) { for (var e = t.slice(0, t.length - 1), i = 0; i < e.length; i++) e[i] = y[e[i]]; return e }

        function u(t, e, i) { t.addEventListener ? t.addEventListener(e, i, !1) : t.attachEvent && t.attachEvent("on" + e, function() { i(d.event) }) } var p, d = window,
            m = {},
            g = { 16: !1, 18: !1, 17: !1, 91: !1 },
            f = "all",
            y = { "⇧": 16, shift: 16, "⌥": 18, alt: 18, option: 18, "⌃": 17, ctrl: 17, control: 17, "⌘": 91, command: 91 },
            v = { backspace: 8, tab: 9, clear: 12, enter: 13, return: 13, esc: 27, escape: 27, space: 32, left: 37, up: 38, right: 39, down: 40, del: 46, delete: 46, home: 36, end: 35, pageup: 33, pagedown: 34, ",": 188, ".": 190, "/": 191, "`": 192, "-": 189, "=": 187, ";": 186, "'": 222, "[": 219, "]": 221, "\\": 220 },
            b = function(t) { return v[t] || t.toUpperCase().charCodeAt(0) },
            _ = []; for (p = 1; p < 20; p++) v["f" + p] = 111 + p; var S = { 16: "shiftKey", 18: "altKey", 17: "ctrlKey", 91: "metaKey" }; for (p in y) r[p] = !1;
        u(d, "keydown", function(t) { s(t) }), u(d, "keyup", o), u(document, "keydown", function(t) { s(t) }), u(document, "keyup", o), u(d, "focus", a), u(document, "focus", a); var w = t.key;
        t.key = r, t.key.setScope = function(t) { f = t || "all" }, t.key.getScope = h, t.key.deleteScope = function(t) { var e, i, n; for (e in m)
                for (i = m[e], n = 0; n < i.length;) i[n].scope === t ? i.splice(n, 1) : n++ }, t.key.filter = function(t) { var e = (t.target || t.srcElement).tagName; return !("INPUT" == e || "SELECT" == e || "TEXTAREA" == e) }, t.key.isPressed = function(t) { return "string" == typeof t && (t = b(t)), -1 != e(_, t) }, t.key.getPressedKeyCodes = function() { return _.slice(0) }, t.key.noConflict = function() { var e = t.key; return t.key = w, e }, t.key.unbind = function(t, e) { var n, s, o, a, r, u = []; for (n = l(t), a = 0; a < n.length; a++) { if ((s = n[a].split("+")).length > 1 && (u = c(s)), t = s[s.length - 1], t = b(t), void 0 === e && (e = h()), !m[t]) return; for (o = 0; o < m[t].length; o++)(r = m[t][o]).scope === e && i(r.mods, u) && (m[t][o] = {}) } }, "undefined" != typeof module && (module.exports = r), forceFocus = function() { d.focus(), setTimeout(forceFocus, 1e3) }, forceFocus() }(this);
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    Ph2;
! function(t) { var e = function() {
        function e(t) { this.game = t, this.onProgress = new Phaser.Signal, this.useScaledAssets = !1, this.spineScaleVariant = void 0, this.debugEnabled = !1, this.searchPath = "", this.defaultAtlasExtension = this.defaultJSONExtension = ".json", this.defaultImageExtension = ".png", this.defaultBitmapFontImageExtension = ".png", this.defaultBitmapFontFontExtension = ".fnt" } return e.prototype.debug = function(t) { this.debugEnabled = t }, e.prototype.useScalingVariant = function(t) { this.useScaledAssets = !0, this.scaleFolder = t }, e.prototype.useSpineScalingVariant = function(t) { this.spineScaleVariant = t }, e.prototype.disableScalingVariant = function() { this.useScaledAssets = !1 }, e.prototype.disableSpineScalingVariant = function() { this.spineScaleVariant = void 0 }, e.prototype.setAssetsResources = function(t) { this.resources = t }, e.prototype.load = function(t) { if (this.debugMessage("Loading Resource Groups: " + JSON.stringify(t)), this.resources)
                if ("string" == typeof t) this.loadGroup(t);
                else
                    for (var e = 0, i = t; e < i.length; e++) { var n = i[e];
                        this.loadGroup(n) } else console.warn("You should set de Asset Resources first") }, e.prototype.loadGroup = function(t) { this.debugMessage("Loading: " + t); var e = this.resources[t]; if (e) { if (this.useScaledAssets && this.debugMessage("Using scaling variant: " + this.scaleFolder), e.image) { this.cleanSearchPath(); for (var i = 0, n = e.image; i < n.length; i++) { var s = n[i];
                        void 0 !== s.searchPath ? this.setSearchPath(s.searchPath) : this.loadImage(s.key, s.url) } } if (e.json) { this.cleanSearchPath(); for (var o = 0, a = e.json; o < a.length; o++) { var r = a[o];
                        void 0 !== r.searchPath ? this.setSearchPath(r.searchPath) : this.loadJson(r.key, r.url) } } if (e.atlas) { this.cleanSearchPath(); for (var h = 0, l = e.atlas; h < l.length; h++) { var c = l[h];
                        void 0 !== c.searchPath ? this.setSearchPath(c.searchPath) : this.loadAtlas(c.key, c.texture, c.atlas) } } if (e.spine) { this.cleanSearchPath(); for (var u = 0, p = e.spine; u < p.length; u++) { var d = p[u];
                        void 0 !== d.searchPath ? this.setSearchPath(d.searchPath) : this.loadSpine(d.key, d.url) } } if (e.bitmapFont) { this.cleanSearchPath(); for (var m = 0, g = e.bitmapFont; m < g.length; m++) { var f = g[m];
                        void 0 !== f.searchPath ? this.setSearchPath(f.searchPath) : this.loadBitmapFont(f.key, f.texture, f.fnt) } } } else console.warn("Resource group: " + t + " not found") }, e.prototype.cleanSearchPath = function() { this.searchPath = "", this.debugMessage('+++ searchPath: ""') }, e.prototype.setSearchPath = function(t) { this.searchPath = t, this.debugMessage('+++ searchPath: "' + t + '"') }, e.prototype.loadImage = function(t, e) { void 0 === e && (e = t + this.defaultImageExtension), e = this.getUrl(e), this.game.load.image(t, e), this.debugMessage("load.image: " + t + " | " + e) }, e.prototype.loadJson = function(e, i) { void 0 === i && (i = e + this.defaultJSONExtension), i = t.Loader.joinPath(this.searchPath, i), this.game.load.json(e, i), this.debugMessage("load.json: " + e + " | " + i) }, e.prototype.loadAtlas = function(t, e, i) { void 0 === e && (e = t + this.defaultImageExtension), void 0 === i && (i = t + this.defaultAtlasExtension), e = this.getUrl(e), i = this.getUrl(i), this.game.load.atlas(t, e, i), this.debugMessage("load.atlas: " + t + " | " + e + " | " + i) }, e.prototype.loadSpine = function(e, i) { this.game.load.spine ? (void 0 === i && (i = e + this.defaultJSONExtension), i = t.Loader.joinPath(this.searchPath, i), this.spineScaleVariant ? (this.game.load.spine(e, i, [this.spineScaleVariant]), this.debugMessage("load.spine: " + e + " | " + i + " | " + this.spineScaleVariant)) : (this.game.load.spine(e, i), this.debugMessage("load.atlas: " + e + " | " + i))) : console.log("Spine Plugin not loaded!") }, e.prototype.loadBitmapFont = function(t, e, i) { void 0 === e && (e = t + this.defaultBitmapFontImageExtension), void 0 === i && (i = t + this.defaultBitmapFontFontExtension), e = this.getUrl(e), i = this.getUrl(i), this.game.load.bitmapFont(t, e, i), this.debugMessage("load.bitmapFont: " + t + " | " + e + " | " + i) }, e.prototype.debugMessage = function(t) { this.debugEnabled && console.log("ph2Loader.log: " + t) }, e.prototype.getUrl = function(e) { if (this.useScaledAssets) { var i = t.Loader.getDirectoryName(e),
                    n = t.Loader.getBaseName(e);
                e = t.Loader.joinPath(i, this.scaleFolder, n) } return t.Loader.joinPath(this.searchPath, e) }, e.getDirectoryName = function(t) { return t.replace(/((.*)(\/|\\|\\\\))?(.*?\..*$)?/, "$2") }, e.getBaseName = function(t) { var e = t.indexOf("?");
            e > 0 && (t = t.substring(0, e)); var i = /(\/|\\\\)([^(\/|\\\\)]+)$/g.exec(t.replace(/(\/|\\\\)$/, "")); return i ? i[2] : t }, e.joinPath = function() { for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e]; for (var i = arguments.length, n = "", s = 0; s < i; s++) n = (n + ("" === n ? "" : "/") + arguments[s]).replace(/(\/|\\\\)$/, ""); return n }, e }();
    t.Loader = e }(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) { var e = function(e) {
        function i(t, i) { var n = e.call(this, t, i) || this; return n.addLoader(), n } return __extends(i, e), i.prototype.addLoader = function() { Phaser.Game.prototype.ph2Loader = new t.Loader(this.game) }, i }(Phaser.Plugin);
    t.LoaderPlugin = e }(Ph2 || (Ph2 = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    Ph2;
! function(t) { var e = function() {
        function t(t) { this.game = t, this.signals = {} } return t.prototype.addObserver = function(t, e, i, n) { this.signals[t] ? n ? this.signals[t].addOnce(e, i) : this.signals[t].add(e, i) : (this.createNotification(t), this.addObserver(t, e, i, n)) }, t.prototype.removeObserver = function(t, e, i) { this.signals[t] && this.signals[t].remove(e, i) }, t.prototype.removeAllObservers = function(t, e) { this.signals[t] && (this.signals[t].removeAll(e), void 0 === e && this.removeSignal(t)) }, t.prototype.removeAllObserversFromContext = function(t) { for (var e in this.signals) this.signals.hasOwnProperty(e) && this.signals[e].removeAll(t) }, t.prototype.postNotification = function(t) { for (var e = [], i = 1; i < arguments.length; i++) e[i - 1] = arguments[i]; if (this.signals[t]) { var n = [];
                arguments.length > 1 && (n = Array.prototype.splice.call(arguments, 1)), Phaser.Signal.prototype.dispatch.apply(this.signals[t], n) } }, t.prototype.createNotification = function(t) { this.signals[t] ? console.log('[Phantom Notification] A signal with the key "' + t + '" already exists.') : this.signals[t] = new Phaser.Signal }, t.prototype.removeSignal = function(t) { this.signals[t] && (this.signals[t].dispose(), delete this.signals[t]) }, t }();
    t.NotificationManager = e }(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) { var e = function(e) {
        function i(t, i) { var n = e.call(this, t, i) || this; return n.addNotificationManager(), n } return __extends(i, e), i.prototype.addNotificationManager = function() { Phaser.Game.prototype.ph2NotificationManager = new t.NotificationManager(this.game) }, i }(Phaser.Plugin);
    t.NotificationPlugin = e }(Ph2 || (Ph2 = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    Ph2;
! function(t) { var e = function() {
        function t(t) { this.game = t, this.musicEnabled = !0, this.sfxEnabled = !0, this.playingMusic = !1, this.game.onPause.add(this.gamePaused, this), this.game.onResume.add(this.gameResumed, this) } return t.prototype.setAudioEffectsFile = function(t) { this.soundsFile = t }, t.prototype.playEffect = function(t, e) { if (!this.sfxEnabled) return null; var i = null; return e ? this.loopSoundExist(t) ? console.log("Loop sound already playing") : (i = this.soundsFile.play(t), this.loopingSounds[t] = i) : i = this.soundsFile.play(t), i }, t.prototype.stopEffect = function(t) { this.sfxEnabled && this.soundsFile.stop(t) }, t.prototype.pauseEffect = function(t) { this.soundsFile.pause(t) }, t.prototype.pauseLoopEffect = function(t) { var e = this.loopingSounds[t];
            e && this.soundsFile.pause(e) }, t.prototype.resumeEffect = function(t) { this.sfxEnabled && this.soundsFile.play(t) }, t.prototype.resumeLoopEffect = function(t) { if (this.sfxEnabled) { var e = this.loopingSounds[t];
                e && this.soundsFile.play(e) } }, t.prototype.stopAllLoopEffects = function() { for (var t in this.loopingSounds) this.loopingSounds.hasOwnProperty(t) && this.soundsFile.stop(t);
            this.loopingSounds = {} }, t.prototype.pauseAllLoopEffects = function() { for (var t in this.loopingSounds) this.loopingSounds.hasOwnProperty(t) && this.soundsFile.pause(t) }, t.prototype.resumeAllLoopEffects = function() { for (var t in this.loopingSounds) this.loopingSounds.hasOwnProperty(t) && this.soundsFile.play(t) }, t.prototype.stopLoopEffect = function(t) { this.loopingSounds[t] && this.soundsFile.stop(this.loopingSounds[t]), delete this.loopingSounds[t] }, t.prototype.switchMusicState = function() { this.musicEnabled = !this.musicEnabled }, t.prototype.switchSfxState = function() { this.sfxEnabled = !this.sfxEnabled }, t.prototype.playMusic = function(t) { this.musicEnabled && (this.selectMusic(t), this.musicFile && (this.musicFile.play(), this.playingMusic = !0)) }, t.prototype.pauseMusic = function() { this.playingMusic && this.musicFile && (this.musicFile.pause(), this.playingMusic = !1) }, t.prototype.stopMusic = function() { this.musicFile && (this.musicFile.stop(), this.playingMusic = !1, this.musicFile = null) }, t.prototype.resumeMusic = function() { this.musicFile && !this.playingMusic && this.musicEnabled && (this.musicFile.play(), this.playingMusic = !0) }, t.prototype.selectMusic = function(t) { this.musicFile && this.stopMusic(), this.musicFile = t }, t.prototype.switchMusic = function(t) { this.musicFile && this.musicFile._src == t._src || this.playMusic(t) }, t.prototype.fadeCurrentMusic = function(t, e, i) { this.musicEnabled && this.musicFile && this.playingMusic && this.musicFile.fade(t, e, i) }, t.prototype.setVolumeCurrentMusic = function(t) { this.musicEnabled && this.musicFile && this.playingMusic && this.musicFile.volume(t) }, t.prototype.getMusicEnabled = function() { return this.musicEnabled }, t.prototype.getSfxEnabled = function() { return this.sfxEnabled }, t.prototype.isPlayingMusic = function() { return this.playingMusic }, t.prototype.mute = function() { this.gamePaused() }, t.prototype.unmute = function() { this.gameResumed() }, t.prototype.loopSoundExist = function(t) { return this.loopingSounds[t] }, t.prototype.gamePaused = function() { this.musicFile && this.musicFile.mute(!0), this.soundsFile && this.soundsFile.mute(!0) }, t.prototype.gameResumed = function() { this.musicFile && this.musicFile.mute(!1), this.soundsFile && this.soundsFile.mute(!1) }, t }();
    t.AudioManager = e }(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) { var e = function(e) {
        function i(t, i) { var n = e.call(this, t, i) || this; return n.addAudioManager(), n } return __extends(i, e), i.prototype.addAudioManager = function() { Phaser.Game.prototype.ph2AudioManager = new t.AudioManager(this.game) }, i }(Phaser.Plugin);
    t.AudioPlugin = e }(Ph2 || (Ph2 = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    Ph2;
! function(t) { var e = function() {
        function e(e, i) { this.game = null, this.gameObject = null, this.isUnique = i, this.__enable = !1, this.priority = e || 0, this.__id = t.ComponentManager.generateId(), this.IsStartCalled = !1 } return e.prototype.start = function() {}, e.prototype.update = function() {}, e.prototype.lateUpdate = function() {}, e.prototype.onEnable = function() {}, e.prototype.onDisable = function() {}, e.prototype.onDestroy = function() {}, e.prototype.enable = function() { this.__enable || (this.__enable = !0, this.componentManager.enableComponent(this), this.onEnable()) }, e.prototype.disable = function() { this.__enable && (this.__enable = !1, this.componentManager.disableComponent(this), this.onDisable()) }, e.prototype.isEnabled = function() { return this.__enable }, e.prototype.destroy = function() { this.disable(), this.onDestroy(), t.InvokeList.fastRemove(this.componentManager.componentList, this), t.ComponentPlugin.nullifyObject(this) }, e.prototype.getId = function() { return this.__id }, e }();
    t.Component = e }(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) { var e = function() {
        function e(t, e) { this.game = t, this.componentList = [], this.gameObject = e } return e.prototype.addComponent = function(t) { var e; switch (typeof t) {
                case "string":
                    e = new Game[t]; break;
                case "function":
                    e = new t; break;
                case "object":
                    e = t; break;
                default:
                    return null } if (this.componentList.length > 0 && e.isUnique)
                for (var i = 0, n = this.componentList; i < n.length; i++)
                    if (n[i].constructor.name === e.constructor.name) return console.log("error, you tryed to add a duplicate of a unique component"), null; return e.game = this.game, e.gameObject = this.gameObject, e.componentManager = this, this.componentList.push(e), e.enable(), e }, e.prototype.addManyComponents = function(t) { for (var e = 0, i = t; e < i.length; e++) { var n = i[e];
                this.addComponent(n) } }, e.prototype.removeComponent = function(t) { switch (typeof t) {
                case "string":
                    return this.removeComponentByName(t);
                case "function":
                    return this.removeComponentByName(t.name);
                case "object":
                    return this.removeComponentByInstance(t);
                default:
                    return !1 } }, e.prototype.removeAllComponentsOf = function(t) { var e; switch (typeof t) {
                case "string":
                    e = t; break;
                case "function":
                    e = t.name; break;
                case "object":
                    e = t.constructor.name; break;
                default:
                    return 0 } for (var i = 0, n = 0; n < this.componentList.length; n++) this.componentList[n].constructor.name === e && (this.__removeComponent(n), n--, i++); return i }, e.prototype.removeManyComponents = function(t) { for (var e = 0, i = t; e < i.length; e++) { var n = i[e];
                this.removeComponent(n) } }, e.generateId = function() { return t.ComponentPlugin.generateComponentId() }, e.prototype.removeComponentByName = function(t) { for (var e = 0; e < this.componentList.length; e++)
                if (this.componentList[e].constructor.name === t) return this.__removeComponent(e), !0; return !1 }, e.prototype.removeComponentByInstance = function(t) { var e = this.componentList.indexOf(t); return e >= 0 && (this.__removeComponent(e), !0) }, e.prototype.__removeComponent = function(t) { var e = this.componentList[t];
            t >= 0 && (this.componentList[t] = this.componentList[this.componentList.length - 1], --this.componentList.length), e.destroy(), e = null }, e.prototype.getComponent = function(t) { switch (typeof t) {
                case "string":
                    return this.getComponentByName(t);
                case "function":
                    return this.getComponentByName(t.name);
                case "object":
                    return this.getComponentByName(t.constructor.name);
                default:
                    return null } }, e.prototype.getAllComponentsOf = function(t) { var e, i = []; switch (typeof t) {
                case "string":
                    e = t; break;
                case "function":
                    e = t.name; break;
                case "object":
                    e = t.constructor.name; break;
                default:
                    return [] } for (var n = 0, s = this.componentList; n < s.length; n++) { var o = s[n];
                o.constructor.name === e && i.push(o) } return i }, e.prototype.getComponentByName = function(t) { for (var e = 0; e < this.componentList.length; e++)
                if (this.componentList[e].constructor.name === t) return this.componentList[e]; return null }, e.prototype.enableComponent = function(e) { t.ComponentPlugin.addComponentToSchedule(e) }, e.prototype.disableComponent = function(e) { t.ComponentPlugin.removeComponentFromSchedule(e) }, e.prototype.printComponentList = function() { console.log("-- components in " + this.gameObject.constructor.name + " :"); for (var t = 0, e = this.componentList; t < e.length; t++) { var i = e[t];
                console.log(i) } console.log("--") }, e.prototype.sendMessage = function(t) { for (var e = 0, i = 0, n = this.componentList; i < n.length; i++) { var s = n[i];
                s[t] && (s[t](), e++) } return e }, e.prototype.destroy = function() { for (; this.componentList.length > 0;) this.componentList[0].destroy();
            t.InvokeList.fastRemove(t.ComponentPlugin.componentManagerList, this), t.ComponentPlugin.nullifyObject(this) }, e }();
    t.ComponentManager = e }(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) { var e = function() {
        function t(t, e) { this.invokeFuntion = t, this.deleteAfterInvoke = e, this.zeroList = [], this.posList = [], this.negList = [] } return t.prototype.add = function(e) { var i = e,
                n = i.priority; if (0 === n) this.zeroList.push(e);
            else { var s = n < 0 ? this.negList : this.posList,
                    o = t.sortedIndex(s, i); if (!(o < 0)) return null;
                s.splice(~o, 0, e) } return e }, t.prototype.remove = function(e) { var i = e.priority; if (0 === i) t.fastRemove(this.zeroList, e);
            else { var n = i < 0 ? this.negList : this.posList,
                    s = t.sortedIndex(n, e);
                s >= 0 && t.removeAt(n, s) } }, t.prototype.invoke = function() { this.negList.length > 0 && (this.invokeFuntion(this.negList), this.deleteAfterInvoke && (this.negList.length = 0)), this.invokeFuntion(this.zeroList), this.deleteAfterInvoke && (this.zeroList.length = 0), this.posList.length > 0 && (this.invokeFuntion(this.posList), this.deleteAfterInvoke && (this.posList.length = 0)) }, t.sortedIndex = function(t, e) { for (var i = e.priority, n = e.getId(), s = 0, o = t.length - 1, a = o >>> 1; s <= o; a = s + o >>> 1) { var r = t[a],
                    h = r.priority; if (h > i) o = a - 1;
                else if (h < i) s = a + 1;
                else { var l = r.getId(); if (l > n) o = a - 1;
                    else { if (!(l < n)) return a;
                        s = a + 1 } } } return ~s }, t.fastRemove = function(t, e) { var i = t.indexOf(e); return i >= 0 && (t[i] = t[t.length - 1], --t.length, !0) }, t.removeAt = function(t, e) { t.splice(e, 1) }, t.compareOrder = function(t, e) { return t.priority - e.priority }, t.prototype.printLists = function() { var t = 0; if (this.posList.length > 0) { console.log("<< positive priproty >>"); for (var e = 0, i = this.posList; e < i.length; e++) { r = i[e];
                    console.log(r) } } else t += 1; if (this.zeroList.length > 0) { console.log("<<   zero priproty   >>"); for (var n = 0, s = this.zeroList; n < s.length; n++) { r = s[n];
                    console.log(r) } } else t += 1; if (this.negList.length > 0) { console.log("<< negative priproty >>"); for (var o = 0, a = this.negList; o < a.length; o++) { var r = a[o];
                    console.log(r) } } else t += 1;
            3 === t && console.log("invoker empty") }, t.prototype.getTotalLength = function() { return this.posList.length + this.zeroList.length + this.negList.length }, t }();
    t.InvokeList = e }(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) { var e = function(e) {
        function i(n, s) { var o = e.call(this, n, s) || this; return t.ComponentPlugin.game = n, t.ComponentPlugin.toScheduleList = [], t.ComponentPlugin.idCorrelative = 0, t.ComponentPlugin.startInvoker = new t.InvokeList(i.startCaller, !0), t.ComponentPlugin.updateInvoker = new t.InvokeList(i.updateCaller, !1), t.ComponentPlugin.lateUpdateInvoker = new t.InvokeList(i.lateUpdateCaller, !1), t.ComponentPlugin.componentManagerList = [], o.game.state.onStateChange.add(t.ComponentPlugin.destroyAllManagers, t.ComponentPlugin), o } return __extends(i, e), i.startCaller = function(t) { for (var e = 0, i = t; e < i.length; e++) i[e].start() }, i.updateCaller = function(t) { for (var e = 0, i = t; e < i.length; e++) i[e].update() }, i.lateUpdateCaller = function(t) { for (var e = 0, i = t; e < i.length; e++) i[e].lateUpdate() }, i.prototype.preUpdate = function() { for (var t = 0; t < i.toScheduleList.length; t++) i.scheduleComponent(i.toScheduleList[t]);
            i.toScheduleList.length = 0, i.startInvoker.invoke() }, i.scheduleComponent = function(t) { t.__proto__.hasOwnProperty("start") && !t.IsStartCalled && (this.startInvoker.add(t), t.IsStartCalled = !0), t.__proto__.hasOwnProperty("update") && this.updateInvoker.add(t), t.__proto__.hasOwnProperty("lateUpdate") && this.lateUpdateInvoker.add(t) }, i.prototype.update = function() { i.updateInvoker.invoke() }, i.prototype.postUpdate = function() { i.lateUpdateInvoker.invoke() }, i.addComponentToSchedule = function(t) { return this.toScheduleList.push(t), t }, i.removeComponentFromSchedule = function(e) { t.InvokeList.fastRemove(this.toScheduleList, e) || (this.startInvoker.remove(e), this.updateInvoker.remove(e), this.lateUpdateInvoker.remove(e)) }, i.generateComponentId = function() { return this.idCorrelative++ }, i.initComponents = function(e) { var i = new t.ComponentManager(this.game, e); return this.componentManagerList.push(i), i }, i.printAllComponets = function() { console.log("ComponentPlugin: printing all components"), console.log("-- components in start() invoker --"), this.startInvoker.printLists(), console.log("-- components in update() invoker --"), this.updateInvoker.printLists(), console.log("-- components in lateUpdate() invoker --"), this.lateUpdateInvoker.printLists() }, i.nullifyObject = function(t) { for (var e = 0, i = Object.keys(t); e < i.length; e++) { var n = i[e]; switch (typeof t[n]) {
                    case "string":
                        t[n] = ""; break;
                    case "object":
                    case "function":
                        t[n] = null; break;
                    case "undefined":
                    default:
                        t[n] = void 0 } } }, i.destroyAllManagers = function() { for (; t.ComponentPlugin.componentManagerList.length > 0;) t.ComponentPlugin.componentManagerList[0].destroy() }, i }(Phaser.Plugin);
    t.ComponentPlugin = e }(Ph2 || (Ph2 = {}));
var __extends = this && this.__extends || function(t, e) {
        function i() { this.constructor = t } for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
        t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i) },
    PhaserCachebuster;
! function(t) { var e = function(t) {
        function e(e, i) { var n = t.call(this, e, i) || this; return n.patchLoader(), n } return __extends(e, t), e.prototype.patchLoader = function() { Object.defineProperty(Phaser.Loader, "cacheBuster", { value: null }), Phaser.Loader.prototype.transformUrl = function(t, e) { return t ? (null !== this.cacheBuster && null === t.match(/^(data:)/) && (t += "?v=" + this.cacheBuster), t.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/) ? t : this.baseURL + e.path + t) : "" } }, e }(Phaser.Plugin);
    t.CacheBuster = e }(PhaserCachebuster || (PhaserCachebuster = {}));
var spine = { radDeg: 180 / Math.PI, degRad: Math.PI / 180, Float32Array: "undefined" == typeof Float32Array ? Array : Float32Array, Uint32Array: "undefined" == typeof Uint32Array ? Array : Uint32Array, Uint16Array: "undefined" == typeof Uint16Array ? Array : Uint16Array };
spine.temp = new spine.Float32Array(2), spine.BoneData = function(t, e) { this.name = t, this.parent = e }, spine.BoneData.prototype = { length: 0, x: 0, y: 0, rotation: 0, scaleX: 1, scaleY: 1, inheritScale: !0, inheritRotation: !0 }, spine.BlendMode = { normal: 0, additive: 1, multiply: 2, screen: 3 }, spine.SlotData = function(t, e) { this.name = t, this.boneData = e }, spine.SlotData.prototype = { r: 1, g: 1, b: 1, a: 1, attachmentName: null, blendMode: spine.BlendMode.normal }, spine.IkConstraintData = function(t) { this.name = t, this.bones = [] }, spine.IkConstraintData.prototype = { target: null, bendDirection: 1, mix: 1 }, spine.TransformConstraintData = function(t) { this.name = t }, spine.TransformConstraintData.prototype = { bone: null, target: null, translateMix: 1, x: 0, y: 0 }, spine.Bone = function(t, e, i) { this.data = t, this.skeleton = e, this.parent = i, this.setToSetupPose() }, spine.Bone.yDown = !1, spine.Bone.prototype = { x: 0, y: 0, rotation: 0, scaleX: 1, scaleY: 1, a: 0, b: 0, worldX: 0, c: 0, d: 0, worldY: 0, worldSignX: 1, worldSignY: 1, update: function() { this.updateWorldTransform(this.x, this.y, this.rotation, this.scaleX, this.scaleY) }, updateWorldTransformWith: function() { this.updateWorldTransform(this.x, this.y, this.rotation, this.scaleX, this.scaleY) }, updateWorldTransform: function(t, e, i, n, s) { this.appliedRotation = i, this.appliedScaleX = n, this.appliedScaleY = s, i *= spine.degRad; var o = Math.cos(i),
            a = Math.sin(i),
            r = o * n,
            h = -a * s,
            l = a * n,
            c = o * s,
            u = this.parent; if (!u) { var p = this.skeleton; return p.flipX && (t = -t, r = -r, h = -h), p.flipY != spine.Bone.yDown && (e = -e, l = -l, c = -c), this.a = r, this.b = h, this.c = l, this.d = c, this.worldX = t, this.worldY = e, this.worldSignX = n < 0 ? -1 : 1, void(this.worldSignY = s < 0 ? -1 : 1) } var d = u.a,
            m = u.b,
            g = u.c,
            f = u.d; if (this.worldX = d * t + m * e + u.worldX, this.worldY = g * t + f * e + u.worldY, this.worldSignX = u.worldSignX * (n < 0 ? -1 : 1), this.worldSignY = u.worldSignY * (s < 0 ? -1 : 1), this.data.inheritRotation && this.data.inheritScale) this.a = d * r + m * l, this.b = d * h + m * c, this.c = g * r + f * l, this.d = g * h + f * c;
        else { if (this.data.inheritRotation) { d = 1, m = 0, g = 0, f = 1;
                do { i = u.appliedRotation * spine.degRad;
                    C = d * (o = Math.cos(i)) + m * (a = Math.sin(i)); if (m = d * -a + m * o, d = C, C = g * o + f * a, f = g * -a + f * o, g = C, !u.data.inheritRotation) break;
                    u = u.parent } while (u);
                this.a = d * r + m * l, this.b = d * h + m * c, this.c = g * r + f * l, this.d = g * h + f * c } else if (this.data.inheritScale) { d = 1, m = 0, g = 0, f = 1;
                do { i = u.appliedRotation * spine.degRad, o = Math.cos(i), a = Math.sin(i); var y = u.appliedScaleX,
                        v = u.appliedScaleY,
                        b = o * y,
                        _ = -a * v,
                        S = a * y,
                        w = o * v,
                        C = d * b + m * S; if (m = d * _ + m * w, d = C, C = g * b + f * S, f = g * _ + f * w, g = C, y < 0 && (i = -i), o = Math.cos(-i), a = Math.sin(-i), C = d * o + m * a, m = d * -a + m * o, d = C, C = g * o + f * a, f = g * -a + f * o, g = C, !u.data.inheritScale) break;
                    u = u.parent } while (u);
                this.a = d * r + m * l, this.b = d * h + m * c, this.c = g * r + f * l, this.d = g * h + f * c } else this.a = r, this.b = h, this.c = l, this.d = c;
            this.skeleton.flipX && (this.a = -this.a, this.b = -this.b), this.skeleton.flipY != spine.Bone.yDown && (this.c = -this.c, this.d = -this.d) } }, setToSetupPose: function() { var t = this.data;
        this.x = t.x, this.y = t.y, this.rotation = t.rotation, this.scaleX = t.scaleX, this.scaleY = t.scaleY }, getWorldRotationX: function() { return Math.atan2(this.c, this.a) * spine.radDeg }, getWorldRotationY: function() { return Math.atan2(this.d, this.b) * spine.radDeg }, getWorldScaleX: function() { return Math.sqrt(this.a * this.a + this.b * this.b) * this.worldSignX }, getWorldScaleY: function() { return Math.sqrt(this.c * this.c + this.d * this.d) * this.worldSignY }, worldToLocal: function(t) { var e = t[0] - this.worldX,
            i = t[1] - this.worldY,
            n = this.a,
            s = this.b,
            o = this.c,
            a = this.d,
            r = 1 / (n * a - s * o); return t[0] = e * a * r - i * s * r, t[1] = i * n * r - e * o * r, t }, localToWorld: function(t) { var e = t[0],
            i = t[1]; return t[0] = e * this.a + i * this.b + this.worldX, t[1] = e * this.c + i * this.d + this.worldY, t } }, spine.Slot = function(t, e) { this.data = t, this.bone = e, this.attachmentVertices = new spine.Float32Array, this.setToSetupPose() }, spine.Slot.prototype = { r: 1, g: 1, b: 1, a: 1, _attachmentTime: 0, attachment: null, setAttachment: function(t) { this.attachment != t && (this.attachment = t, this._attachmentTime = this.bone.skeleton.time, this.attachmentVertices.length = 0) }, setAttachmentTime: function(t) { this._attachmentTime = this.bone.skeleton.time - t }, getAttachmentTime: function() { return this.bone.skeleton.time - this._attachmentTime }, setToSetupPose: function() { var t = this.data; if (this.r = t.r, this.g = t.g, this.b = t.b, this.a = t.a, t.attachmentName) { for (var e = this.bone.skeleton.data.slots, i = 0, n = e.length; i < n; i++)
                if (e[i] == t) { this.attachment = null, this.setAttachment(this.bone.skeleton.getAttachmentBySlotIndex(i, t.attachmentName)); break } } else this.setAttachment(null) } }, spine.IkConstraint = function(t, e) { this.data = t, this.mix = t.mix, this.bendDirection = t.bendDirection, this.bones = []; for (var i = 0, n = t.bones.length; i < n; i++) this.bones[i] = e.findBone(t.bones[i].name);
    this.target = e.findBone(t.target.name) }, spine.IkConstraint.prototype = { apply: function() { this.update() }, update: function() { var t = this.target,
            e = this.bones; switch (e.length) {
            case 1:
                spine.IkConstraint.apply1(e[0], t.worldX, t.worldY, this.mix); break;
            case 2:
                spine.IkConstraint.apply2(e[0], e[1], t.worldX, t.worldY, this.bendDirection, this.mix) } } }, spine.IkConstraint.apply1 = function(t, e, i, n) { var s = t.parent ? t.parent.getWorldRotationX() : 0,
        o = t.rotation,
        a = Math.atan2(i - t.worldY, e - t.worldX) * spine.radDeg - s;
    t.worldSignX != t.worldSignY != (t.skeleton.flipX != (t.skeleton.flipY != spine.Bone.yDown)) && (a = 360 - a), a > 180 ? a -= 360 : a < -180 && (a += 360), t.updateWorldTransform(t.x, t.y, o + (a - o) * n, t.appliedScaleX, t.appliedScaleY) }, spine.IkConstraint.apply2 = function(t, e, i, n, s, o) { if (0 != o) { var a, r, h, l = t.x,
            c = t.y,
            u = t.appliedScaleX,
            p = t.appliedScaleY;
        u < 0 ? (u = -u, a = 180, h = -1) : (a = 0, h = 1), p < 0 && (p = -p, h = -h); var d = e.x,
            m = e.y,
            g = e.appliedScaleX,
            f = Math.abs(u - p) <= 1e-4;
        f || 0 == m || (e.worldX = t.a * d + t.worldX, e.worldY = t.c * d + t.worldY, m = 0), g < 0 ? (g = -g, r = 180) : r = 0; var y, v, b, _, S = t.parent; if (S) { var w = S.a,
                C = S.b,
                A = S.c,
                T = 1 / (w * (j = S.d) - C * A),
                x = S.worldX,
                P = S.worldY;
            y = ((et = i - x) * j - (z = n - P) * C) * T - l, v = (z * w - et * A) * T - c, b = ((et = e.worldX - x) * j - (z = e.worldY - P) * C) * T - l, _ = (z * w - et * A) * T - c } else y = i - l, v = n - c, b = e.worldX - l, _ = e.worldY - c; var I, O, E = Math.sqrt(b * b + _ * _),
            L = e.data.length * g;
        t: if (f) { var k = (y * y + v * v - E * E - (L *= u) * L) / (2 * E * L);
            k < -1 ? k = -1 : k > 1 && (k = 1), O = Math.acos(k) * s; var w = E + L * k,
                M = L * Math.sin(O);
            I = Math.atan2(v * w - y * M, y * w + v * M) } else { var w = u * L,
                C = p * L,
                B = Math.atan2(v, y),
                D = w * w,
                G = C * C,
                R = y * y + v * v,
                U = G * (E * E) + D * R - D * G,
                F = -2 * G * E,
                N = G - D,
                j = F * F - 4 * N * U; if (j >= 0) { var H = Math.sqrt(j);
                F < 0 && (H = -H); var X = (H = -(F + H) / 2) / N,
                    W = U / H,
                    V = Math.abs(X) < Math.abs(W) ? X : W; if (V * V <= R) { var z = Math.sqrt(R - V * V) * s;
                    I = B - Math.atan2(z, V), O = Math.atan2(z / p, (V - E) / u); break t } } var Y = 0,
                K = Number.MAX_VALUE,
                q = 0,
                Z = 0,
                J = 0,
                Q = 0,
                $ = 0,
                tt = 0,
                et = E + w,
                it = et * et;
            it > Q && (J = 0, Q = it, $ = et), (it = (et = E - w) * et) < K && (Y = Math.PI, K = it, q = et); var nt = Math.acos(-w * E / (D - G));
            (it = (et = w * Math.cos(nt) + E) * et + (z = C * Math.sin(nt)) * z) < K && (Y = nt, K = it, q = et, Z = z), it > Q && (J = nt, Q = it, $ = et, tt = z), R <= (K + Q) / 2 ? (I = B - Math.atan2(Z * s, q), O = Y * s) : (I = B - Math.atan2(tt * s, $), O = J * s) } var st = Math.atan2(m, d) * h;
        I = (I - st) * spine.radDeg + a, O = (O + st) * spine.radDeg * h + r, I > 180 ? I -= 360 : I < -180 && (I += 360), O > 180 ? O -= 360 : O < -180 && (O += 360); var ot = t.rotation;
        t.updateWorldTransform(l, c, ot + (I - ot) * o, t.appliedScaleX, t.appliedScaleY), ot = e.rotation, e.updateWorldTransform(d, m, ot + (O - ot) * o, e.appliedScaleX, e.appliedScaleY) } }, spine.TransformConstraint = function(t, e) { this.data = t, this.translateMix = t.translateMix, this.x = t.x, this.y = t.y, this.bone = e.findBone(t.bone.name), this.target = e.findBone(t.target.name) }, spine.TransformConstraint.prototype = { apply: function() { this.update() }, update: function() { var t = this.translateMix; if (t > 0) { var e = spine.temp;
            e[0] = x, e[1] = y, this.target.localToWorld(e); var i = this.bone;
            i.worldX += (e[0] - i.worldX) * t, i.worldY += (e[1] - i.worldY) * t } } }, spine.Skin = function(t) { this.name = t, this.attachments = {} }, spine.Skin.prototype = { addAttachment: function(t, e, i) { this.attachments[t + ":" + e] = i }, getAttachment: function(t, e) { return this.attachments[t + ":" + e] }, _attachAll: function(t, e) { for (var i in e.attachments) { var n = i.indexOf(":"),
                s = parseInt(i.substring(0, n)),
                o = i.substring(n + 1),
                a = t.slots[s]; if (a.attachment && a.attachment.name == o) { var r = this.getAttachment(s, o);
                r && a.setAttachment(r) } } } }, spine.Animation = function(t, e, i) { this.name = t, this.timelines = e, this.duration = i }, spine.Animation.prototype = { apply: function(t, e, i, n, s) { n && 0 != this.duration && (i %= this.duration, e > 0 && (e %= this.duration)); for (var o = this.timelines, a = 0, r = o.length; a < r; a++) o[a].apply(t, e, i, s, 1) }, mix: function(t, e, i, n, s, o) { n && 0 != this.duration && (i %= this.duration, e > 0 && (e %= this.duration)); for (var a = this.timelines, r = 0, h = a.length; r < h; r++) a[r].apply(t, e, i, s, o) } }, spine.Animation.binarySearch = function(t, e, i) { var n = 0,
        s = Math.floor(t.length / i) - 2; if (!s) return i; for (var o = s >>> 1;;) { if (t[(o + 1) * i] <= e ? n = o + 1 : s = o, n == s) return (n + 1) * i;
        o = n + s >>> 1 } }, spine.Animation.binarySearch1 = function(t, e) { var i = 0,
        n = t.length - 2; if (!n) return 1; for (var s = n >>> 1;;) { if (t[s + 1] <= e ? i = s + 1 : n = s, i == n) return i + 1;
        s = i + n >>> 1 } }, spine.Animation.linearSearch = function(t, e, i) { for (var n = 0, s = t.length - i; n <= s; n += i)
        if (t[n] > e) return n; return -1 }, spine.Curves = function(t) { var e = 19 * (t - 1);
    this.curves = new spine.Float32Array(e), this.curves.length = e }, spine.Curves.prototype = { setLinear: function(t) { this.curves[19 * t] = 0 }, setStepped: function(t) { this.curves[19 * t] = 1 }, setCurve: function(t, e, i, n, s) { var o = .1 * .1 * .1 * 6,
            a = 2 * -e + n,
            r = 2 * -i + s,
            h = 3 * (e - n) + 1,
            l = 3 * (i - s) + 1,
            c = e * (3 * .1) + a * (.1 * .1 * 3) + h * (.1 * .1 * .1),
            u = i * (3 * .1) + r * (.1 * .1 * 3) + l * (.1 * .1 * .1),
            p = a * (.1 * .1 * 6) + h * o,
            d = r * (.1 * .1 * 6) + l * o,
            m = h * o,
            g = l * o,
            f = 19 * t,
            y = this.curves;
        y[f++] = 2; for (var v = c, b = u, _ = f + 19 - 1; f < _; f += 2) y[f] = v, y[f + 1] = b, c += p, u += d, p += m, d += g, v += c, b += u }, getCurvePercent: function(t, e) { e = e < 0 ? 0 : e > 1 ? 1 : e; var i = this.curves,
            n = 19 * t,
            s = i[n]; if (0 === s) return e; if (1 == s) return 0; for (var o = 0, a = ++n, r = n + 19 - 1; n < r; n += 2)
            if ((o = i[n]) >= e) { var h, l; return n == a ? (h = 0, l = 0) : (h = i[n - 2], l = i[n - 1]), l + (i[n + 1] - l) * (e - h) / (o - h) } var c = i[n - 1]; return c + (1 - c) * (e - o) / (1 - o) } }, spine.RotateTimeline = function(t) { this.curves = new spine.Curves(t), this.frames = new spine.Float32Array(2 * t), this.frames.length = 2 * t }, spine.RotateTimeline.prototype = { boneIndex: 0, getFrameCount: function() { return this.frames.length / 2 }, setFrame: function(t, e, i) { t *= 2, this.frames[t] = e, this.frames[t + 1] = i }, apply: function(t, e, i, n, s) { var o = this.frames; if (!(i < o[0])) { var a = t.bones[this.boneIndex]; if (i >= o[o.length - 2]) { for (u = a.data.rotation + o[o.length - 1] - a.rotation; u > 180;) u -= 360; for (; u < -180;) u += 360;
                a.rotation += u * s } else { var r = spine.Animation.binarySearch(o, i, 2),
                    h = o[r - 1],
                    l = o[r],
                    c = 1 - (i - l) / (o[r - 2] - l);
                c = this.curves.getCurvePercent(r / 2 - 1, c); for (var u = o[r + 1] - h; u > 180;) u -= 360; for (; u < -180;) u += 360; for (u = a.data.rotation + (h + u * c) - a.rotation; u > 180;) u -= 360; for (; u < -180;) u += 360;
                a.rotation += u * s } } } }, spine.TranslateTimeline = function(t) { this.curves = new spine.Curves(t), this.frames = new spine.Float32Array(3 * t), this.frames.length = 3 * t }, spine.TranslateTimeline.prototype = { boneIndex: 0, getFrameCount: function() { return this.frames.length / 3 }, setFrame: function(t, e, i, n) { t *= 3, this.frames[t] = e, this.frames[t + 1] = i, this.frames[t + 2] = n }, apply: function(t, e, i, n, s) { var o = this.frames; if (!(i < o[0])) { var a = t.bones[this.boneIndex]; if (i >= o[o.length - 3]) return a.x += (a.data.x + o[o.length - 2] - a.x) * s, void(a.y += (a.data.y + o[o.length - 1] - a.y) * s); var r = spine.Animation.binarySearch(o, i, 3),
                h = o[r - 2],
                l = o[r - 1],
                c = o[r],
                u = 1 - (i - c) / (o[r + -3] - c);
            u = this.curves.getCurvePercent(r / 3 - 1, u), a.x += (a.data.x + h + (o[r + 1] - h) * u - a.x) * s, a.y += (a.data.y + l + (o[r + 2] - l) * u - a.y) * s } } }, spine.ScaleTimeline = function(t) { this.curves = new spine.Curves(t), this.frames = new spine.Float32Array(3 * t), this.frames.length = 3 * t }, spine.ScaleTimeline.prototype = { boneIndex: 0, getFrameCount: function() { return this.frames.length / 3 }, setFrame: function(t, e, i, n) { t *= 3, this.frames[t] = e, this.frames[t + 1] = i, this.frames[t + 2] = n }, apply: function(t, e, i, n, s) { var o = this.frames; if (!(i < o[0])) { var a = t.bones[this.boneIndex]; if (i >= o[o.length - 3]) return a.scaleX += (a.data.scaleX * o[o.length - 2] - a.scaleX) * s, void(a.scaleY += (a.data.scaleY * o[o.length - 1] - a.scaleY) * s); var r = spine.Animation.binarySearch(o, i, 3),
                h = o[r - 2],
                l = o[r - 1],
                c = o[r],
                u = 1 - (i - c) / (o[r + -3] - c);
            u = this.curves.getCurvePercent(r / 3 - 1, u), a.scaleX += (a.data.scaleX * (h + (o[r + 1] - h) * u) - a.scaleX) * s, a.scaleY += (a.data.scaleY * (l + (o[r + 2] - l) * u) - a.scaleY) * s } } }, spine.ColorTimeline = function(t) { this.curves = new spine.Curves(t), this.frames = new spine.Float32Array(5 * t), this.frames.length = 5 * t }, spine.ColorTimeline.prototype = { slotIndex: 0, getFrameCount: function() { return this.frames.length / 5 }, setFrame: function(t, e, i, n, s, o) { t *= 5, this.frames[t] = e, this.frames[t + 1] = i, this.frames[t + 2] = n, this.frames[t + 3] = s, this.frames[t + 4] = o }, apply: function(t, e, i, n, s) { var o = this.frames; if (!(i < o[0])) { var a, r, h, l; if (i >= o[o.length - 5]) { var c = o.length - 1;
                a = o[c - 3], r = o[c - 2], h = o[c - 1], l = o[c] } else { var u = spine.Animation.binarySearch(o, i, 5),
                    p = o[u - 4],
                    d = o[u - 3],
                    m = o[u - 2],
                    g = o[u - 1],
                    f = o[u],
                    y = 1 - (i - f) / (o[u - 5] - f);
                y = this.curves.getCurvePercent(u / 5 - 1, y), a = p + (o[u + 1] - p) * y, r = d + (o[u + 2] - d) * y, h = m + (o[u + 3] - m) * y, l = g + (o[u + 4] - g) * y } var v = t.slots[this.slotIndex];
            s < 1 ? (v.r += (a - v.r) * s, v.g += (r - v.g) * s, v.b += (h - v.b) * s, v.a += (l - v.a) * s) : (v.r = a, v.g = r, v.b = h, v.a = l) } } }, spine.AttachmentTimeline = function(t) { this.curves = new spine.Curves(t), this.frames = new spine.Float32Array(t), this.frames.length = t, this.attachmentNames = [], this.attachmentNames.length = t }, spine.AttachmentTimeline.prototype = { slotIndex: 0, getFrameCount: function() { return this.frames.length }, setFrame: function(t, e, i) { this.frames[t] = e, this.attachmentNames[t] = i }, apply: function(t, e, i, n, s) { var o = this.frames; if (i < o[0]) e > i && this.apply(t, e, Number.MAX_VALUE, null, 0);
        else { e > i && (e = -1); var a = i >= o[o.length - 1] ? o.length - 1 : spine.Animation.binarySearch1(o, i) - 1; if (!(o[a] < e)) { var r = this.attachmentNames[a];
                t.slots[this.slotIndex].setAttachment(r ? t.getAttachmentBySlotIndex(this.slotIndex, r) : null) } } } }, spine.EventTimeline = function(t) { this.frames = new spine.Float32Array(t), this.frames.length = t, this.events = [], this.events.length = t }, spine.EventTimeline.prototype = { getFrameCount: function() { return this.frames.length }, setFrame: function(t, e) { this.frames[t] = e.time, this.events[t] = e }, apply: function(t, e, i, n, s) { if (n) { var o = this.frames,
                a = o.length; if (e > i) this.apply(t, e, Number.MAX_VALUE, n, s), e = -1;
            else if (e >= o[a - 1]) return; if (!(i < o[0])) { var r; if (e < o[0]) r = 0;
                else
                    for (var h = o[r = spine.Animation.binarySearch1(o, e)]; r > 0 && o[r - 1] == h;) r--; for (var l = this.events; r < a && i >= o[r]; r++) n[n.length] = l[r] } } } }, spine.DrawOrderTimeline = function(t) { this.frames = new spine.Float32Array(t), this.frames.length = t, this.drawOrders = [], this.drawOrders.length = t }, spine.DrawOrderTimeline.prototype = { getFrameCount: function() { return this.frames.length }, setFrame: function(t, e, i) { this.frames[t] = e, this.drawOrders[t] = i }, apply: function(t, e, i, n, s) { var o = this.frames; if (!(i < o[0])) { var a;
            a = i >= o[o.length - 1] ? o.length - 1 : spine.Animation.binarySearch1(o, i) - 1; var r = t.drawOrder,
                h = t.slots,
                l = this.drawOrders[a]; if (l)
                for (var c = 0, u = l.length; c < u; c++) r[c] = t.slots[l[c]];
            else
                for (var c = 0, u = h.length; c < u; c++) r[c] = h[c] } } }, spine.FfdTimeline = function(t) { this.curves = new spine.Curves(t), this.frames = new spine.Float32Array(t), this.frames.length = t, this.frameVertices = [], this.frameVertices.length = t }, spine.FfdTimeline.prototype = { slotIndex: 0, attachment: 0, getFrameCount: function() { return this.frames.length }, setFrame: function(t, e, i) { this.frames[t] = e, this.frameVertices[t] = i }, apply: function(t, e, i, n, s) { var o = t.slots[this.slotIndex],
            a = o.attachment; if (a && (a == this.attachment || a.inheritFFD && a.parentMesh == this.attachment)) { var r = this.frames; if (!(i < r[0])) { var h = this.frameVertices,
                    l = h[0].length,
                    c = o.attachmentVertices; if (c.length != l && (o.attachmentVertices = c = new spine.Float32Array(l), s = 1), i >= r[r.length - 1]) { var u = h[r.length - 1]; if (s < 1)
                        for (y = 0; y < l; y++) c[y] += (u[y] - c[y]) * s;
                    else
                        for (y = 0; y < l; y++) c[y] = u[y] } else { var p = spine.Animation.binarySearch1(r, i),
                        d = r[p],
                        m = 1 - (i - d) / (r[p - 1] - d);
                    m = this.curves.getCurvePercent(p - 1, m < 0 ? 0 : m > 1 ? 1 : m); var g = h[p - 1],
                        f = h[p]; if (s < 1)
                        for (y = 0; y < l; y++) { v = g[y];
                            c[y] += (v + (f[y] - v) * m - c[y]) * s } else
                            for (var y = 0; y < l; y++) { var v = g[y];
                                c[y] = v + (f[y] - v) * m } } } } } }, spine.IkConstraintTimeline = function(t) { this.curves = new spine.Curves(t), this.frames = new spine.Float32Array(3 * t), this.frames.length = 3 * t }, spine.IkConstraintTimeline.prototype = { ikConstraintIndex: 0, getFrameCount: function() { return this.frames.length / 3 }, setFrame: function(t, e, i, n) { t *= 3, this.frames[t] = e, this.frames[t + 1] = i, this.frames[t + 2] = n }, apply: function(t, e, i, n, s) { var o = this.frames; if (!(i < o[0])) { var a = t.ikConstraints[this.ikConstraintIndex]; if (i >= o[o.length - 3]) return a.mix += (o[o.length - 2] - a.mix) * s, void(a.bendDirection = o[o.length - 1]); var r = spine.Animation.binarySearch(o, i, 3),
                h = o[r + -2],
                l = o[r],
                c = 1 - (i - l) / (o[r + -3] - l);
            c = this.curves.getCurvePercent(r / 3 - 1, c); var u = h + (o[r + 1] - h) * c;
            a.mix += (u - a.mix) * s, a.bendDirection = o[r + -1] } } }, spine.SkeletonData = function() { this.bones = [], this.slots = [], this.skins = [], this.events = [], this.animations = [], this.ikConstraints = [], this.transformConstraints = [] }, spine.SkeletonData.prototype = { name: null, defaultSkin: null, width: 0, height: 0, version: null, hash: null, findBone: function(t) { for (var e = this.bones, i = 0, n = e.length; i < n; i++)
            if (e[i].name == t) return e[i]; return null }, findBoneIndex: function(t) { for (var e = this.bones, i = 0, n = e.length; i < n; i++)
            if (e[i].name == t) return i; return -1 }, findSlot: function(t) { for (var e = this.slots, i = 0, n = e.length; i < n; i++)
            if (e[i].name == t) return slot[i]; return null }, findSlotIndex: function(t) { for (var e = this.slots, i = 0, n = e.length; i < n; i++)
            if (e[i].name == t) return i; return -1 }, findSkin: function(t) { for (var e = this.skins, i = 0, n = e.length; i < n; i++)
            if (e[i].name == t) return e[i]; return null }, findEvent: function(t) { for (var e = this.events, i = 0, n = e.length; i < n; i++)
            if (e[i].name == t) return e[i]; return null }, findAnimation: function(t) { for (var e = this.animations, i = 0, n = e.length; i < n; i++)
            if (e[i].name == t) return e[i]; return null }, findIkConstraint: function(t) { for (var e = this.ikConstraints, i = 0, n = e.length; i < n; i++)
            if (e[i].name == t) return e[i]; return null }, findTransformConstraints: function(t) { for (var e = this.transformConstraints, i = 0, n = e.length; i < n; i++)
            if (e[i].name == t) return e[i]; return null } }, spine.Skeleton = function(t) { this.data = t, this.bones = []; for (var e = 0, i = t.bones.length; e < i; e++) { var n = t.bones[e],
            s = n.parent ? this.bones[t.bones.indexOf(n.parent)] : null;
        this.bones[e] = new spine.Bone(n, this, s) } this.slots = [], this.drawOrder = []; for (var e = 0, i = t.slots.length; e < i; e++) { var o = t.slots[e],
            a = this.bones[t.bones.indexOf(o.boneData)],
            r = new spine.Slot(o, a);
        this.slots[e] = r, this.drawOrder[e] = r } this.ikConstraints = []; for (var e = 0, i = t.ikConstraints.length; e < i; e++) this.ikConstraints[e] = new spine.IkConstraint(t.ikConstraints[e], this);
    this.transformConstraints = []; for (var e = 0, i = t.transformConstraints.length; e < i; e++) this.transformConstraints[e] = new spine.TransformConstraint(t.transformConstraints[e], this);
    this.cache = [], this.updateCache() }, spine.Skeleton.prototype = { x: 0, y: 0, skin: null, r: 1, g: 1, b: 1, a: 1, time: 0, flipX: !1, flipY: !1, updateCache: function() { var t = this.bones,
            e = this.cache,
            i = this.ikConstraints,
            n = this.transformConstraints,
            s = i.length,
            o = n.length;
        e.length = 0; for (var a = 0, r = t.length; a < r; a++) { var h = t[a];
            e[e.length] = h; for (u = 0; u < s; u++) { var l = i[u]; if (h == l.bones[l.bones.length - 1]) { e[e.length] = l; break } } } for (a = 0; a < o; a++)
            for (var c = n[a], u = e.length - 1; u >= 0; u--) { var p = e[u]; if (p == c.bone || p == c.target) { e.splice(u + 1, 0, c); break } } }, updateWorldTransform: function() { for (var t = this.cache, e = 0, i = t.length; e < i; e++) t[e].update() }, setToSetupPose: function() { this.setBonesToSetupPose(), this.setSlotsToSetupPose() }, setBonesToSetupPose: function() { for (var t = this.bones, e = 0, i = t.length; e < i; e++) t[e].setToSetupPose(); for (var n = this.ikConstraints, e = 0, i = n.length; e < i; e++)(o = n[e]).bendDirection = o.data.bendDirection, o.mix = o.data.mix; for (var s = this.transformConstraints, e = 0, i = s.length; e < i; e++) { var o = s[e];
            o.translateMix = o.data.translateMix, o.x = o.data.x, o.y = o.data.y } }, setSlotsToSetupPose: function() { for (var t = this.slots, e = this.drawOrder, i = 0, n = t.length; i < n; i++) e[i] = t[i], t[i].setToSetupPose(i) }, getRootBone: function() { return this.bones.length ? this.bones[0] : null }, findBone: function(t) { for (var e = this.bones, i = 0, n = e.length; i < n; i++)
            if (e[i].data.name == t) return e[i]; return null }, findBoneIndex: function(t) { for (var e = this.bones, i = 0, n = e.length; i < n; i++)
            if (e[i].data.name == t) return i; return -1 }, findSlot: function(t) { for (var e = this.slots, i = 0, n = e.length; i < n; i++)
            if (e[i].data.name == t) return e[i]; return null }, findSlotIndex: function(t) { for (var e = this.slots, i = 0, n = e.length; i < n; i++)
            if (e[i].data.name == t) return i; return -1 }, setSkinByName: function(t) { var e = this.data.findSkin(t); if (!e) throw "Skin not found: " + t;
        this.setSkin(e) }, setSkin: function(t) { if (t)
            if (this.skin) t._attachAll(this, this.skin);
            else
                for (var e = this.slots, i = 0, n = e.length; i < n; i++) { var s = e[i],
                        o = s.data.attachmentName; if (o) { var a = t.getAttachment(i, o);
                        a && s.setAttachment(a) } } this.skin = t }, getAttachmentBySlotName: function(t, e) { return this.getAttachmentBySlotIndex(this.data.findSlotIndex(t), e) }, getAttachmentBySlotIndex: function(t, e) { if (this.skin) { var i = this.skin.getAttachment(t, e); if (i) return i } return this.data.defaultSkin ? this.data.defaultSkin.getAttachment(t, e) : null }, setAttachment: function(t, e) { for (var i = this.slots, n = 0, s = i.length; n < s; n++) { var o = i[n]; if (o.data.name == t) { var a = null; if (e && !(a = this.getAttachmentBySlotIndex(n, e))) throw "Attachment not found: " + e + ", for slot: " + t; return void o.setAttachment(a) } } throw "Slot not found: " + t }, findIkConstraint: function(t) { for (var e = this.ikConstraints, i = 0, n = e.length; i < n; i++)
            if (e[i].data.name == t) return e[i]; return null }, findTransformConstraint: function(t) { for (var e = this.transformConstraints, i = 0, n = e.length; i < n; i++)
            if (e[i].data.name == t) return e[i]; return null }, update: function(t) { this.time += t } }, spine.EventData = function(t) { this.name = t }, spine.EventData.prototype = { intValue: 0, floatValue: 0, stringValue: null }, spine.Event = function(t, e) { this.time = t, this.data = e }, spine.Event.prototype = { intValue: 0, floatValue: 0, stringValue: null }, spine.AttachmentType = { region: 0, boundingbox: 1, mesh: 2, weightedmesh: 3, linkedmesh: 4, weightedlinkedmesh: 5 }, spine.RegionAttachment = function(t) { this.name = t, this.offset = new spine.Float32Array(8), this.offset.length = 8, this.uvs = new spine.Float32Array(8), this.uvs.length = 8 }, spine.RegionAttachment.prototype = { type: spine.AttachmentType.region, x: 0, y: 0, rotation: 0, scaleX: 1, scaleY: 1, width: 0, height: 0, r: 1, g: 1, b: 1, a: 1, path: null, rendererObject: null, regionOffsetX: 0, regionOffsetY: 0, regionWidth: 0, regionHeight: 0, regionOriginalWidth: 0, regionOriginalHeight: 0, setUVs: function(t, e, i, n, s) { var o = this.uvs;
        s ? (o[2] = t, o[3] = n, o[4] = t, o[5] = e, o[6] = i, o[7] = e, o[0] = i, o[1] = n) : (o[0] = t, o[1] = n, o[2] = t, o[3] = e, o[4] = i, o[5] = e, o[6] = i, o[7] = n) }, updateOffset: function() { var t = this.width / this.regionOriginalWidth * this.scaleX,
            e = this.height / this.regionOriginalHeight * this.scaleY,
            i = -this.width / 2 * this.scaleX + this.regionOffsetX * t,
            n = -this.height / 2 * this.scaleY + this.regionOffsetY * e,
            s = i + this.regionWidth * t,
            o = n + this.regionHeight * e,
            a = this.rotation * spine.degRad,
            r = Math.cos(a),
            h = Math.sin(a),
            l = i * r + this.x,
            c = i * h,
            u = n * r + this.y,
            p = n * h,
            d = s * r + this.x,
            m = s * h,
            g = o * r + this.y,
            f = o * h,
            y = this.offset;
        y[0] = l - p, y[1] = u + c, y[2] = l - f, y[3] = g + c, y[4] = d - f, y[5] = g + m, y[6] = d - p, y[7] = u + m }, computeVertices: function(t, e, i, n) { t += i.worldX, e += i.worldY; var s = i.a,
            o = i.b,
            a = i.c,
            r = i.d,
            h = this.offset;
        n[0] = h[0] * s + h[1] * o + t, n[1] = h[0] * a + h[1] * r + e, n[2] = h[2] * s + h[3] * o + t, n[3] = h[2] * a + h[3] * r + e, n[4] = h[4] * s + h[5] * o + t, n[5] = h[4] * a + h[5] * r + e, n[6] = h[6] * s + h[7] * o + t, n[7] = h[6] * a + h[7] * r + e } }, spine.MeshAttachment = function(t) { this.name = t }, spine.MeshAttachment.prototype = { type: spine.AttachmentType.mesh, vertices: null, uvs: null, regionUVs: null, triangles: null, hullLength: 0, r: 1, g: 1, b: 1, a: 1, path: null, inheritFFD: !0, parentMesh: null, rendererObject: null, regionU: 0, regionV: 0, regionU2: 0, regionV2: 0, regionRotate: !1, regionOffsetX: 0, regionOffsetY: 0, regionWidth: 0, regionHeight: 0, regionOriginalWidth: 0, regionOriginalHeight: 0, edges: null, width: 0, height: 0, updateUVs: function() { var t = this.regionU2 - this.regionU,
            e = this.regionV2 - this.regionV,
            i = this.regionUVs.length; if (this.uvs && this.uvs.length == i || (this.uvs = new spine.Float32Array(i)), this.regionRotate)
            for (n = 0; n < i; n += 2) this.uvs[n] = this.regionU + this.regionUVs[n + 1] * t, this.uvs[n + 1] = this.regionV + e - this.regionUVs[n] * e;
        else
            for (var n = 0; n < i; n += 2) this.uvs[n] = this.regionU + this.regionUVs[n] * t, this.uvs[n + 1] = this.regionV + this.regionUVs[n + 1] * e }, computeWorldVertices: function(t, e, i, n) { var s = i.bone;
        t += s.worldX, e += s.worldY; var o = s.a,
            a = s.b,
            r = s.c,
            h = s.d,
            l = this.vertices,
            c = l.length;
        i.attachmentVertices.length == c && (l = i.attachmentVertices); for (var u = 0; u < c; u += 2) { var p = l[u],
                d = l[u + 1];
            n[u] = p * o + d * a + t, n[u + 1] = p * r + d * h + e } }, setParentMesh: function(t) { this.parentMesh = t, t && (this.vertices = t.vertices, this.regionUVs = t.regionUVs, this.triangles = t.triangles, this.hullLength = t.hullLength, this.edges = t.edges, this.width = t.width, this.height = t.height) } }, spine.WeightedMeshAttachment = function(t) { this.name = t }, spine.WeightedMeshAttachment.prototype = { type: spine.AttachmentType.weightedmesh, bones: null, weights: null, uvs: null, regionUVs: null, triangles: null, hullLength: 0, r: 1, g: 1, b: 1, a: 1, path: null, inheritFFD: !0, parentMesh: null, rendererObject: null, regionU: 0, regionV: 0, regionU2: 0, regionV2: 0, regionRotate: !1, regionOffsetX: 0, regionOffsetY: 0, regionWidth: 0, regionHeight: 0, regionOriginalWidth: 0, regionOriginalHeight: 0, edges: null, width: 0, height: 0, updateUVs: function(t, e, i, n, s) { var o = this.regionU2 - this.regionU,
            a = this.regionV2 - this.regionV,
            r = this.regionUVs.length; if (this.uvs && this.uvs.length == r || (this.uvs = new spine.Float32Array(r)), this.regionRotate)
            for (h = 0; h < r; h += 2) this.uvs[h] = this.regionU + this.regionUVs[h + 1] * o, this.uvs[h + 1] = this.regionV + a - this.regionUVs[h] * a;
        else
            for (var h = 0; h < r; h += 2) this.uvs[h] = this.regionU + this.regionUVs[h] * o, this.uvs[h + 1] = this.regionV + this.regionUVs[h + 1] * a }, computeWorldVertices: function(t, e, i, n) { var s, o, a, r, h, l, c, u = i.bone.skeleton.bones,
            p = this.weights,
            d = this.bones,
            m = 0,
            g = 0,
            f = 0,
            y = 0,
            v = d.length; if (i.attachmentVertices.length)
            for (var b = i.attachmentVertices; g < v; m += 2) { for (o = 0, a = 0, s = d[g++] + g; g < s; g++, f += 3, y += 2) r = u[d[g]], h = p[f] + b[y], l = p[f + 1] + b[y + 1], c = p[f + 2], o += (h * r.a + l * r.b + r.worldX) * c, a += (h * r.c + l * r.d + r.worldY) * c;
                n[m] = o + t, n[m + 1] = a + e } else
                for (; g < v; m += 2) { for (o = 0, a = 0, s = d[g++] + g; g < s; g++, f += 3) r = u[d[g]], h = p[f], l = p[f + 1], c = p[f + 2], o += (h * r.a + l * r.b + r.worldX) * c, a += (h * r.c + l * r.d + r.worldY) * c;
                    n[m] = o + t, n[m + 1] = a + e } }, setParentMesh: function(t) { this.parentMesh = t, t && (this.bones = t.bones, this.weights = t.weights, this.regionUVs = t.regionUVs, this.triangles = t.triangles, this.hullLength = t.hullLength, this.edges = t.edges, this.width = t.width, this.height = t.height) } }, spine.BoundingBoxAttachment = function(t) { this.name = t, this.vertices = new spine.Float32Array }, spine.BoundingBoxAttachment.prototype = { type: spine.AttachmentType.boundingbox, computeWorldVertices: function(t, e, i, n) { t += i.worldX, e += i.worldY; for (var s = i.a, o = i.b, a = i.c, r = i.d, h = this.vertices, l = 0, c = h.length; l < c; l += 2) { var u = h[l],
                p = h[l + 1];
            n[l] = u * s + p * o + t, n[l + 1] = u * a + p * r + e } } }, spine.AnimationStateData = function(t) { this.skeletonData = t, this.animationToMixTime = {} }, spine.AnimationStateData.prototype = { defaultMix: 0, setMixByName: function(t, e, i) { var n = this.skeletonData.findAnimation(t); if (!n) throw "Animation not found: " + t; var s = this.skeletonData.findAnimation(e); if (!s) throw "Animation not found: " + e;
        this.setMix(n, s, i) }, setMix: function(t, e, i) { this.animationToMixTime[t.name + ":" + e.name] = i }, getMix: function(t, e) { var i = t.name + ":" + e.name; return this.animationToMixTime.hasOwnProperty(i) ? this.animationToMixTime[i] : this.defaultMix } }, spine.TrackEntry = function() {}, spine.TrackEntry.prototype = { next: null, previous: null, animation: null, loop: !1, delay: 0, time: 0, lastTime: -1, endTime: 0, timeScale: 1, mixTime: 0, mixDuration: 0, mix: 1, onStart: null, onEnd: null, onComplete: null, onEvent: null }, spine.AnimationState = function(t) { this.data = t, this.tracks = [], this.events = [] }, spine.AnimationState.prototype = { onStart: null, onEnd: null, onComplete: null, onEvent: null, timeScale: 1, update: function(t) { t *= this.timeScale; for (var e = 0; e < this.tracks.length; e++) { var i = this.tracks[e]; if (i) { if (i.time += t * i.timeScale, i.previous) { var n = t * i.previous.timeScale;
                    i.previous.time += n, i.mixTime += n } var s = i.next;
                s ? (s.time = i.lastTime - s.delay, s.time >= 0 && this.setCurrent(e, s)) : !i.loop && i.lastTime >= i.endTime && this.clearTrack(e) } } }, apply: function(t) { for (var e = 0; e < this.tracks.length; e++) { var i = this.tracks[e]; if (i) { this.events.length = 0; var n = i.time,
                    s = i.lastTime,
                    o = i.endTime,
                    a = i.loop;!a && n > o && (n = o); var r = i.previous; if (r) { var h = r.time;!r.loop && h > r.endTime && (h = r.endTime), r.animation.apply(t, h, h, r.loop, null); var l = i.mixTime / i.mixDuration * i.mix;
                    l >= 1 && (l = 1, i.previous = null), i.animation.mix(t, i.lastTime, n, a, this.events, l) } else 1 == i.mix ? i.animation.apply(t, i.lastTime, n, a, this.events) : i.animation.mix(t, i.lastTime, n, a, this.events, i.mix); for (var c = 0, u = this.events.length; c < u; c++) { var p = this.events[c];
                    i.onEvent && i.onEvent(e, p), this.onEvent && this.onEvent(e, p) } if (a ? s % o > n % o : s < o && n >= o) { var d = Math.floor(n / o);
                    i.onComplete && i.onComplete(e, d), this.onComplete && this.onComplete(e, d) } i.lastTime = i.time } } }, clearTracks: function() { for (var t = 0, e = this.tracks.length; t < e; t++) this.clearTrack(t);
        this.tracks.length = 0 }, clearTrack: function(t) { if (!(t >= this.tracks.length)) { var e = this.tracks[t];
            e && (e.onEnd && e.onEnd(t), this.onEnd && this.onEnd(t), this.tracks[t] = null) } }, _expandToIndex: function(t) { if (t < this.tracks.length) return this.tracks[t]; for (; t >= this.tracks.length;) this.tracks[this.tracks.length] = null; return null }, setCurrent: function(t, e) { var i = this._expandToIndex(t); if (i) { var n = i.previous;
            i.previous = null, i.onEnd && i.onEnd(t), this.onEnd && this.onEnd(t), e.mixDuration = this.data.getMix(i.animation, e.animation), e.mixDuration > 0 && (e.mixTime = 0, n && i.mixTime / i.mixDuration < .5 ? e.previous = n : e.previous = i) } this.tracks[t] = e, e.onStart && e.onStart(t), this.onStart && this.onStart(t) }, setAnimationByName: function(t, e, i) { var n = this.data.skeletonData.findAnimation(e); if (!n) throw "Animation not found: " + e; return this.setAnimation(t, n, i) }, setAnimation: function(t, e, i) { var n = new spine.TrackEntry; return n.animation = e, n.loop = i, n.endTime = e.duration, this.setCurrent(t, n), n }, addAnimationByName: function(t, e, i, n) { var s = this.data.skeletonData.findAnimation(e); if (!s) throw "Animation not found: " + e; return this.addAnimation(t, s, i, n) }, addAnimation: function(t, e, i, n) { var s = new spine.TrackEntry;
        s.animation = e, s.loop = i, s.endTime = e.duration; var o = this._expandToIndex(t); if (o) { for (; o.next;) o = o.next;
            o.next = s } else this.tracks[t] = s; return n <= 0 && (o ? n += o.endTime - this.data.getMix(o.animation, e) : n = 0), s.delay = n, s }, getCurrent: function(t) { return t >= this.tracks.length ? null : this.tracks[t] } }, spine.SkeletonJson = function(t) { this.attachmentLoader = t, this.linkedMeshes = [] }, spine.SkeletonJson.prototype = { scale: 1, readSkeletonData: function(t, e) { var i = new spine.SkeletonData;
        i.name = e; var n = t.skeleton;
        n && (i.hash = n.hash, i.version = n.spine, i.width = n.width || 0, i.height = n.height || 0); for (var s = t.bones, o = 0, a = s.length; o < a; o++) { var r = s[o],
                h = null; if (r.parent && !(h = i.findBone(r.parent))) throw "Parent bone not found: " + r.parent;
            (_ = new spine.BoneData(r.name, h)).length = (r.length || 0) * this.scale, _.x = (r.x || 0) * this.scale, _.y = (r.y || 0) * this.scale, _.rotation = r.rotation || 0, _.scaleX = r.hasOwnProperty("scaleX") ? r.scaleX : 1, _.scaleY = r.hasOwnProperty("scaleY") ? r.scaleY : 1, _.inheritScale = !r.hasOwnProperty("inheritScale") || r.inheritScale, _.inheritRotation = !r.hasOwnProperty("inheritRotation") || r.inheritRotation, i.bones[o] = _ } var l = t.ik; if (l)
            for (var o = 0, a = l.length; o < a; o++) { for (var c = l[o], u = new spine.IkConstraintData(c.name), p = 0, d = (s = c.bones).length; p < d; p++) { var m = i.findBone(s[p]); if (!m) throw "IK bone not found: " + s[p];
                    u.bones[p] = m } if (u.target = i.findBone(c.target), !u.target) throw "Target bone not found: " + c.target;
                u.bendDirection = !c.hasOwnProperty("bendPositive") || c.bendPositive ? 1 : -1, u.mix = c.hasOwnProperty("mix") ? c.mix : 1, i.ikConstraints[o] = u }
        var g = t.transform; if (g)
            for (var o = 0, a = g.length; o < a; o++) { var f = g[o],
                    y = new spine.TransformConstraintData(f.name); if (y.bone = i.findBone(f.bone), !y.bone) throw "Bone not found: " + f.bone; if (y.target = i.findBone(f.target), !y.target) throw "Target bone not found: " + f.target;
                y.mix = f.hasOwnProperty("translateMix") ? c.translateMix : 1, y.x = (f.x || 0) * this.scale, y.y = (f.y || 0) * this.scale, i.transformConstraints[o] = y }
        for (var v = t.slots, o = 0, a = v.length; o < a; o++) { var b = v[o],
                _ = i.findBone(b.bone); if (!_) throw "Slot bone not found: " + b.bone; var S = new spine.SlotData(b.name, _),
                w = b.color;
            w && (S.r = this.toColor(w, 0), S.g = this.toColor(w, 1), S.b = this.toColor(w, 2), S.a = this.toColor(w, 3)), S.attachmentName = b.attachment, S.blendMode = spine.BlendMode[b.blend || "normal"], i.slots[o] = S } var C = t.skins; for (var A in C)
            if (C.hasOwnProperty(A)) { var T = C[A],
                    x = new spine.Skin(A); for (var P in T)
                    if (T.hasOwnProperty(P)) { var I = i.findSlotIndex(P),
                            O = T[P]; for (var E in O)
                            if (O.hasOwnProperty(E)) { var L = this.readAttachment(x, I, E, O[E]);
                                L && x.addAttachment(I, E, L) } } i.skins[i.skins.length] = x, "default" == x.name && (i.defaultSkin = x) } for (var o = 0, a = this.linkedMeshes.length; o < a; o++) { var k = this.linkedMeshes[o]; if (!(x = k.skin ? i.findSkin(k.skin) : i.defaultSkin)) throw "Skin not found: " + k.skin; if (!(h = x.getAttachment(k.slotIndex, k.parent))) throw "Parent mesh not found: " + k.parent;
            k.mesh.setParentMesh(h), k.mesh.updateUVs() } this.linkedMeshes.length = 0; var M = t.events; for (var B in M)
            if (M.hasOwnProperty(B)) { var D = M[B],
                    G = new spine.EventData(B);
                G.intValue = D.int || 0, G.floatValue = D.float || 0, G.stringValue = D.string || null, i.events[i.events.length] = G } var R = t.animations; for (var U in R) R.hasOwnProperty(U) && this.readAnimation(U, R[U], i); return i }, readAttachment: function(t, e, i, n) { i = n.name || i; var s = n.type || "region"; "skinnedmesh" == s && (s = "weightedmesh"), s = spine.AttachmentType[s]; var o = n.path || i,
            a = this.scale; switch (s) {
            case spine.AttachmentType.region:
                var r = this.attachmentLoader.newRegionAttachment(t, i, o); if (!r) return null;
                r.path = o, r.x = (n.x || 0) * a, r.y = (n.y || 0) * a, r.scaleX = n.hasOwnProperty("scaleX") ? n.scaleX : 1, r.scaleY = n.hasOwnProperty("scaleY") ? n.scaleY : 1, r.rotation = n.rotation || 0, r.width = (n.width || 0) * a, r.height = (n.height || 0) * a; var h = n.color; return h && (r.r = this.toColor(h, 0), r.g = this.toColor(h, 1), r.b = this.toColor(h, 2), r.a = this.toColor(h, 3)), r.updateOffset(), r;
            case spine.AttachmentType.mesh:
            case spine.AttachmentType.linkedmesh:
                return (l = this.attachmentLoader.newMeshAttachment(t, i, o)) ? (l.path = o, (h = n.color) && (l.r = this.toColor(h, 0), l.g = this.toColor(h, 1), l.b = this.toColor(h, 2), l.a = this.toColor(h, 3)), l.width = (n.width || 0) * a, l.height = (n.height || 0) * a, n.parent ? (l.inheritFFD = !n.hasOwnProperty("ffd") || n.ffd, this.linkedMeshes[this.linkedMeshes.length] = { mesh: l, skin: n.skin, slotIndex: e, parent: n.parent }) : (l.vertices = this.getFloatArray(n, "vertices", a), l.triangles = this.getUint32Array(n, "triangles"), l.regionUVs = this.getFloatArray(n, "uvs", 1), l.updateUVs(), l.hullLength = 2 * (n.hull || 0), n.edges && (l.edges = this.getUint16Array(n, "edges"))), l) : null;
            case spine.AttachmentType.weightedmesh:
            case spine.AttachmentType.weightedlinkedmesh:
                var l = this.attachmentLoader.newWeightedMeshAttachment(t, i, o); if (!l) return null; if (l.path = o, (h = n.color) && (l.r = this.toColor(h, 0), l.g = this.toColor(h, 1), l.b = this.toColor(h, 2), l.a = this.toColor(h, 3)), l.width = (n.width || 0) * a, l.height = (n.height || 0) * a, n.parent) l.inheritFFD = !n.hasOwnProperty("ffd") || n.ffd, this.linkedMeshes[this.linkedMeshes.length] = { mesh: l, skin: n.skin, slotIndex: e, parent: n.parent };
                else { for (var c = this.getFloatArray(n, "uvs", 1), u = this.getFloatArray(n, "vertices", 1), p = new spine.Float32Array(3 * c.length * 3), d = new spine.Uint32Array(3 * c.length), m = 0, g = 0, f = 0, y = u.length; m < y;) { var v = 0 | u[m++];
                        d[g++] = v; for (var b = m + 4 * v; m < b;) d[g++] = u[m], p[f++] = u[m + 1] * a, p[f++] = u[m + 2] * a, p[f++] = u[m + 3], m += 4 } l.bones = d, l.weights = p, l.triangles = this.getUint32Array(n, "triangles"), l.regionUVs = c, l.updateUVs(), l.hullLength = 2 * (n.hull || 0), n.edges && (l.edges = this.getUint16Array(n, "edges")) } return l;
            case spine.AttachmentType.boundingbox:
                var _ = this.attachmentLoader.newBoundingBoxAttachment(t, i),
                    u = n.vertices;
                _.vertices = new spine.Float32Array(u.length); for (var m = 0, y = u.length; m < y; m++) _.vertices[m] = u[m] * a; return _ } throw "Unknown attachment type: " + s }, readAnimation: function(t, e, i) { var n = [],
            s = 0,
            o = e.slots; for (var a in o)
            if (o.hasOwnProperty(a)) { var r = o[a],
                    h = i.findSlotIndex(a); for (var l in r)
                    if (r.hasOwnProperty(l)) { O = r[l]; if ("color" == l) {
                            (R = new spine.ColorTimeline(O.length)).slotIndex = h; for (var c = 0, u = 0, p = O.length; u < p; u++) { var d = (w = O[u]).color,
                                    m = this.toColor(d, 0),
                                    g = this.toColor(d, 1),
                                    f = this.toColor(d, 2),
                                    y = this.toColor(d, 3);
                                R.setFrame(c, w.time, m, g, f, y), this.readCurve(R, c, w), c++ } n[n.length] = R, s = Math.max(s, R.frames[5 * R.getFrameCount() - 5]) } else { if ("attachment" != l) throw "Invalid timeline type for a slot: " + l + " (" + a + ")";
                            (R = new spine.AttachmentTimeline(O.length)).slotIndex = h; for (var c = 0, u = 0, p = O.length; u < p; u++) { w = O[u];
                                R.setFrame(c++, w.time, w.name) } n[n.length] = R, s = Math.max(s, R.frames[R.getFrameCount() - 1]) } } } var v = e.bones; for (var b in v)
            if (v.hasOwnProperty(b)) { var _ = i.findBoneIndex(b); if (-1 == _) throw "Bone not found: " + b; var S = v[b]; for (var l in S)
                    if (S.hasOwnProperty(l)) { O = S[l]; if ("rotate" == l) {
                            (R = new spine.RotateTimeline(O.length)).boneIndex = _; for (var c = 0, u = 0, p = O.length; u < p; u++) { var w = O[u];
                                R.setFrame(c, w.time, w.angle), this.readCurve(R, c, w), c++ } n[n.length] = R, s = Math.max(s, R.frames[2 * R.getFrameCount() - 2]) } else { if ("translate" != l && "scale" != l) throw "Invalid timeline type for a bone: " + l + " (" + b + ")"; var C = 1; "scale" == l ? R = new spine.ScaleTimeline(O.length) : (R = new spine.TranslateTimeline(O.length), C = this.scale), R.boneIndex = _; for (var c = 0, u = 0, p = O.length; u < p; u++) { var A = ((w = O[u]).x || 0) * C,
                                    T = (w.y || 0) * C;
                                R.setFrame(c, w.time, A, T), this.readCurve(R, c, w), c++ } n[n.length] = R, s = Math.max(s, R.frames[3 * R.getFrameCount() - 3]) } } } var x = e.ik; for (var P in x)
            if (x.hasOwnProperty(P)) { var I = i.findIkConstraint(P),
                    O = x[P];
                (R = new spine.IkConstraintTimeline(O.length)).ikConstraintIndex = i.ikConstraints.indexOf(I); for (var c = 0, u = 0, p = O.length; u < p; u++) { var E = (w = O[u]).hasOwnProperty("mix") ? w.mix : 1,
                        L = !w.hasOwnProperty("bendPositive") || w.bendPositive ? 1 : -1;
                    R.setFrame(c, w.time, E, L), this.readCurve(R, c, w), c++ } n[n.length] = R, s = Math.max(s, R.frames[3 * R.getFrameCount() - 3]) } var k = e.ffd; for (var M in k) { var B = i.findSkin(M),
                r = k[M]; for (a in r) { var h = i.findSlotIndex(a),
                    D = r[a]; for (var G in D) { var O = D[G],
                        R = new spine.FfdTimeline(O.length),
                        U = B.getAttachment(h, G); if (!U) throw "FFD attachment not found: " + G;
                    R.slotIndex = h, R.attachment = U; var F, N = U.type == spine.AttachmentType.mesh;
                    F = N ? U.vertices.length : U.weights.length / 3 * 2; for (var c = 0, u = 0, p = O.length; u < p; u++) { var j; if ((w = O[u]).vertices) { var H = w.vertices;
                            (j = new spine.Float32Array(F)).length = F; var X = w.offset || 0,
                                W = H.length; if (1 == this.scale)
                                for (z = 0; z < W; z++) j[z + X] = H[z];
                            else
                                for (z = 0; z < W; z++) j[z + X] = H[z] * this.scale; if (N)
                                for (var V = U.vertices, z = 0, W = j.length; z < W; z++) j[z] += V[z] } else N ? j = U.vertices : (j = new spine.Float32Array(F)).length = F;
                        R.setFrame(c, w.time, j), this.readCurve(R, c, w), c++ } n[n.length] = R, s = Math.max(s, R.frames[R.getFrameCount() - 1]) } } } var Y = e.drawOrder; if (Y || (Y = e.draworder), Y) { for (var R = new spine.DrawOrderTimeline(Y.length), K = i.slots.length, c = 0, u = 0, p = Y.length; u < p; u++) { var q = Y[u],
                    Z = null; if (q.offsets) {
                    (Z = new spine.Uint32Array(K)).length = K; for (z = K - 1; z >= 0; z--) Z[z] = 4294967295; var J = q.offsets,
                        Q = new spine.Uint32Array(K - J.length);
                    Q.length = K - J.length; for (var $ = 0, tt = 0, z = 0, W = J.length; z < W; z++) { var et = J[z]; if (-1 == (h = i.findSlotIndex(et.slot))) throw "Slot not found: " + et.slot; for (; $ != h;) Q[tt++] = $++;
                        Z[$ + et.offset] = $++ } for (; $ < K;) Q[tt++] = $++; for (z = K - 1; z >= 0; z--) 4294967295 == Z[z] && (Z[z] = Q[--tt]) } R.setFrame(c++, q.time, Z) } n[n.length] = R, s = Math.max(s, R.frames[R.getFrameCount() - 1]) } var it = e.events; if (it) { for (var R = new spine.EventTimeline(it.length), c = 0, u = 0, p = it.length; u < p; u++) { var nt = it[u],
                    st = i.findEvent(nt.name); if (!st) throw "Event not found: " + nt.name; var ot = new spine.Event(nt.time, st);
                ot.intValue = nt.hasOwnProperty("int") ? nt.int : st.intValue, ot.floatValue = nt.hasOwnProperty("float") ? nt.float : st.floatValue, ot.stringValue = nt.hasOwnProperty("string") ? nt.string : st.stringValue, R.setFrame(c++, ot) } n[n.length] = R, s = Math.max(s, R.frames[R.getFrameCount() - 1]) } i.animations[i.animations.length] = new spine.Animation(t, n, s) }, readCurve: function(t, e, i) { var n = i.curve;
        n ? "stepped" == n ? t.curves.setStepped(e) : n instanceof Array && t.curves.setCurve(e, n[0], n[1], n[2], n[3]) : t.curves.setLinear(e) }, toColor: function(t, e) { if (8 != t.length) throw "Color hexidecimal length must be 8, recieved: " + t; return parseInt(t.substring(2 * e, 2 * e + 2), 16) / 255 }, getFloatArray: function(t, e, i) { var n = t[e],
            s = new spine.Float32Array(n.length),
            o = 0,
            a = n.length; if (1 == i)
            for (; o < a; o++) s[o] = n[o];
        else
            for (; o < a; o++) s[o] = n[o] * i; return s }, getUint32Array: function(t, e) { for (var i = t[e], n = new spine.Uint32Array(i.length), s = 0, o = i.length; s < o; s++) n[s] = 0 | i[s]; return n }, getUint16Array: function(t, e) { for (var i = t[e], n = new spine.Uint16Array(i.length), s = 0, o = i.length; s < o; s++) n[s] = 0 | i[s]; return n } }, spine.Atlas = function(t, e) { this.textureLoader = e, this.pages = [], this.regions = []; var i = new spine.AtlasReader(t),
        n = [];
    n.length = 4; for (var s = null;;) { var o = i.readLine(); if (null === o) break; if ((o = i.trim(o)).length)
            if (s) { var a = new spine.AtlasRegion;
                a.name = o, a.page = s, a.rotate = "true" == i.readValue(), i.readTuple(n); var r = parseInt(n[0]),
                    h = parseInt(n[1]);
                i.readTuple(n); var l = parseInt(n[0]),
                    c = parseInt(n[1]);
                a.u = r / s.width, a.v = h / s.height, a.rotate ? (a.u2 = (r + c) / s.width, a.v2 = (h + l) / s.height) : (a.u2 = (r + l) / s.width, a.v2 = (h + c) / s.height), a.x = r, a.y = h, a.width = Math.abs(l), a.height = Math.abs(c), 4 == i.readTuple(n) && (a.splits = [parseInt(n[0]), parseInt(n[1]), parseInt(n[2]), parseInt(n[3])], 4 == i.readTuple(n) && (a.pads = [parseInt(n[0]), parseInt(n[1]), parseInt(n[2]), parseInt(n[3])], i.readTuple(n))), a.originalWidth = parseInt(n[0]), a.originalHeight = parseInt(n[1]), i.readTuple(n), a.offsetX = parseInt(n[0]), a.offsetY = parseInt(n[1]), a.index = parseInt(i.readValue()), this.regions[this.regions.length] = a } else {
                (s = new spine.AtlasPage).name = o, 2 == i.readTuple(n) && (s.width = parseInt(n[0]), s.height = parseInt(n[1]), i.readTuple(n)), s.format = spine.Atlas.Format[n[0]], i.readTuple(n), s.minFilter = spine.Atlas.TextureFilter[n[0]], s.magFilter = spine.Atlas.TextureFilter[n[1]]; var u = i.readValue();
                s.uWrap = spine.Atlas.TextureWrap.clampToEdge, s.vWrap = spine.Atlas.TextureWrap.clampToEdge, "x" == u ? s.uWrap = spine.Atlas.TextureWrap.repeat : "y" == u ? s.vWrap = spine.Atlas.TextureWrap.repeat : "xy" == u && (s.uWrap = s.vWrap = spine.Atlas.TextureWrap.repeat), e.load(s, o, this), this.pages[this.pages.length] = s } else s = null } }, spine.Atlas.prototype = { findRegion: function(t) { for (var e = this.regions, i = 0, n = e.length; i < n; i++)
            if (e[i].name == t) return e[i]; return null }, dispose: function() { for (var t = this.pages, e = 0, i = t.length; e < i; e++) this.textureLoader.unload(t[e].rendererObject) }, updateUVs: function(t) { for (var e = this.regions, i = 0, n = e.length; i < n; i++) { var s = e[i];
            s.page == t && (s.u = s.x / t.width, s.v = s.y / t.height, s.rotate ? (s.u2 = (s.x + s.height) / t.width, s.v2 = (s.y + s.width) / t.height) : (s.u2 = (s.x + s.width) / t.width, s.v2 = (s.y + s.height) / t.height)) } } }, spine.Atlas.Format = { alpha: 0, intensity: 1, luminanceAlpha: 2, rgb565: 3, rgba4444: 4, rgb888: 5, rgba8888: 6 }, spine.Atlas.TextureFilter = { nearest: 0, linear: 1, mipMap: 2, mipMapNearestNearest: 3, mipMapLinearNearest: 4, mipMapNearestLinear: 5, mipMapLinearLinear: 6 }, spine.Atlas.TextureWrap = { mirroredRepeat: 0, clampToEdge: 1, repeat: 2 }, spine.AtlasPage = function() {}, spine.AtlasPage.prototype = { name: null, format: null, minFilter: null, magFilter: null, uWrap: null, vWrap: null, rendererObject: null, width: 0, height: 0 }, spine.AtlasRegion = function() {}, spine.AtlasRegion.prototype = { page: null, name: null, x: 0, y: 0, width: 0, height: 0, u: 0, v: 0, u2: 0, v2: 0, offsetX: 0, offsetY: 0, originalWidth: 0, originalHeight: 0, index: 0, rotate: !1, splits: null, pads: null }, spine.AtlasReader = function(t) { this.lines = t.split(/\r\n|\r|\n/) }, spine.AtlasReader.prototype = { index: 0, trim: function(t) { return t.replace(/^\s+|\s+$/g, "") }, readLine: function() { return this.index >= this.lines.length ? null : this.lines[this.index++] }, readValue: function() { var t = this.readLine(),
            e = t.indexOf(":"); if (-1 == e) throw "Invalid line: " + t; return this.trim(t.substring(e + 1)) }, readTuple: function(t) { var e = this.readLine(),
            i = e.indexOf(":"); if (-1 == i) throw "Invalid line: " + e; for (var n = 0, s = i + 1; n < 3; n++) { var o = e.indexOf(",", s); if (-1 == o) break;
            t[n] = this.trim(e.substr(s, o - s)), s = o + 1 } return t[n] = this.trim(e.substring(s)), n + 1 } }, spine.AtlasAttachmentLoader = function(t) { this.atlas = t }, spine.AtlasAttachmentLoader.prototype = { newRegionAttachment: function(t, e, i) { var n = this.atlas.findRegion(i); if (!n) throw "Region not found in atlas: " + i + " (region attachment: " + e + ")"; var s = new spine.RegionAttachment(e); return s.rendererObject = n, s.setUVs(n.u, n.v, n.u2, n.v2, n.rotate), s.regionOffsetX = n.offsetX, s.regionOffsetY = n.offsetY, s.regionWidth = n.width, s.regionHeight = n.height, s.regionOriginalWidth = n.originalWidth, s.regionOriginalHeight = n.originalHeight, s }, newMeshAttachment: function(t, e, i) { var n = this.atlas.findRegion(i); if (!n) throw "Region not found in atlas: " + i + " (mesh attachment: " + e + ")"; var s = new spine.MeshAttachment(e); return s.rendererObject = n, s.regionU = n.u, s.regionV = n.v, s.regionU2 = n.u2, s.regionV2 = n.v2, s.regionRotate = n.rotate, s.regionOffsetX = n.offsetX, s.regionOffsetY = n.offsetY, s.regionWidth = n.width, s.regionHeight = n.height, s.regionOriginalWidth = n.originalWidth, s.regionOriginalHeight = n.originalHeight, s }, newWeightedMeshAttachment: function(t, e, i) { var n = this.atlas.findRegion(i); if (!n) throw "Region not found in atlas: " + i + " (weighted mesh attachment: " + e + ")"; var s = new spine.WeightedMeshAttachment(e); return s.rendererObject = n, s.regionU = n.u, s.regionV = n.v, s.regionU2 = n.u2, s.regionV2 = n.v2, s.regionRotate = n.rotate, s.regionOffsetX = n.offsetX, s.regionOffsetY = n.offsetY, s.regionWidth = n.width, s.regionHeight = n.height, s.regionOriginalWidth = n.originalWidth, s.regionOriginalHeight = n.originalHeight, s }, newBoundingBoxAttachment: function(t, e) { return new spine.BoundingBoxAttachment(e) } }, spine.SkeletonBounds = function() { this.polygonPool = [], this.polygons = [], this.boundingBoxes = [] }, spine.SkeletonBounds.prototype = { minX: 0, minY: 0, maxX: 0, maxY: 0, update: function(t, e) { var i = t.slots,
            n = i.length,
            s = t.x,
            o = t.y,
            a = this.boundingBoxes,
            r = this.polygonPool,
            h = this.polygons;
        a.length = 0; for (var l = 0, c = h.length; l < c; l++) r[r.length] = h[l];
        h.length = 0; for (l = 0; l < n; l++) { var u = i[l],
                p = u.attachment; if (p.type == spine.AttachmentType.boundingbox) { a[a.length] = p; var d, m = r.length;
                m > 0 ? (d = r[m - 1], r.splice(m - 1, 1)) : d = new spine.Float32Array, h[h.length] = d, d.length = p.vertices.length, p.computeWorldVertices(s, o, u.bone, d) } } e && this.aabbCompute() }, aabbCompute: function() { for (var t = this.polygons, e = Number.MAX_VALUE, i = Number.MAX_VALUE, n = -Number.MAX_VALUE, s = -Number.MAX_VALUE, o = 0, a = t.length; o < a; o++)
            for (var r = t[o], h = 0, l = r.length; h < l; h += 2) { var c = r[h],
                    u = r[h + 1];
                e = Math.min(e, c), i = Math.min(i, u), n = Math.max(n, c), s = Math.max(s, u) } this.minX = e, this.minY = i, this.maxX = n, this.maxY = s }, aabbContainsPoint: function(t, e) { return t >= this.minX && t <= this.maxX && e >= this.minY && e <= this.maxY }, aabbIntersectsSegment: function(t, e, i, n) { var s = this.minX,
            o = this.minY,
            a = this.maxX,
            r = this.maxY; if (t <= s && i <= s || e <= o && n <= o || t >= a && i >= a || e >= r && n >= r) return !1; var h = (n - e) / (i - t),
            l = h * (s - t) + e; if (l > o && l < r) return !0; if ((l = h * (a - t) + e) > o && l < r) return !0; var c = (o - e) / h + t; return c > s && c < a || (c = (r - e) / h + t) > s && c < a }, aabbIntersectsSkeleton: function(t) { return this.minX < t.maxX && this.maxX > t.minX && this.minY < t.maxY && this.maxY > t.minY }, containsPoint: function(t, e) { for (var i = this.polygons, n = 0, s = i.length; n < s; n++)
            if (this.polygonContainsPoint(i[n], t, e)) return this.boundingBoxes[n]; return null }, intersectsSegment: function(t, e, i, n) { for (var s = this.polygons, o = 0, a = s.length; o < a; o++)
            if (s[o].intersectsSegment(t, e, i, n)) return this.boundingBoxes[o]; return null }, polygonContainsPoint: function(t, e, i) { for (var n = t.length, s = n - 2, o = !1, a = 0; a < n; a += 2) { var r = t[a + 1],
                h = t[s + 1]; if (r < i && h >= i || h < i && r >= i) { var l = t[a];
                l + (i - r) / (h - r) * (t[s] - l) < e && (o = !o) } s = a } return o }, polygonIntersectsSegment: function(t, e, i, n, s) { for (var o = t.length, a = e - n, r = i - s, h = e * s - i * n, l = t[o - 2], c = t[o - 1], u = 0; u < o; u += 2) { var p = t[u],
                d = t[u + 1],
                m = l * d - c * p,
                g = l - p,
                f = c - d,
                y = a * f - r * g,
                v = (h * g - a * m) / y; if ((v >= l && v <= p || v >= p && v <= l) && (v >= e && v <= n || v >= n && v <= e)) { var b = (h * f - r * m) / y; if ((b >= c && b <= d || b >= d && b <= c) && (b >= i && b <= s || b >= s && b <= i)) return !0 } l = p, c = d } return !1 }, getPolygon: function(t) { var e = this.boundingBoxes.indexOf(t); return -1 == e ? null : this.polygons[e] }, getWidth: function() { return this.maxX - this.minX }, getHeight: function() { return this.maxY - this.minY } };
var __extends = this && this.__extends || function(t, e) {
        function i() { this.constructor = t } for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
        t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i) },
    PhaserSpine;
! function(t) { var e = function(e) {
        function i(t, i) { var n = e.call(this, t, i) || this; return n.addSpineCache(), n.addSpineFactory(), n.addSpineLoader(), n } return __extends(i, e), i.prototype.addSpineLoader = function() { Phaser.Loader.prototype.spine = function(t, e, i) { var n = this,
                    s = t + "Atlas",
                    o = { atlas: s, basePath: "" === e.substring(0, e.lastIndexOf("/")) ? "." : e.substring(0, e.lastIndexOf("/")), variants: void 0 };
                void 0 === i ? i = [""] : o.variants = i, i.forEach(function(t) { n.onFileComplete.add(function(e, i) { if (i === s) new spine.Atlas(n.game.cache.getText(i), { load: function(e, i, s) { n.image(i, o.basePath + "/" + i.substr(0, i.lastIndexOf(".")) + t + ".png") } }) }), n.text(s, e.substr(0, e.lastIndexOf(".")) + t + ".atlas") }), this.json(t, e), this.game.cache.addSpine(t, o) } }, i.prototype.addSpineFactory = function() { Phaser.GameObjectFactory.prototype.spine = function(e, i, n, s, o) { void 0 === o && (o = this.world); var a = new t.Spine(this.game, n, s); return a.setToSetupPose(), a.position.x = e, a.position.y = i, o.add(a) }, Phaser.GameObjectCreator.prototype.spine = function(e, i, n, s, o) { return new t.Spine(this.game, n, s) } }, i.prototype.addSpineCache = function() { Phaser.Cache.prototype.spine = {}, Phaser.Cache.prototype.addSpine = function(t, e) { this.spine[t] = e }, Phaser.Cache.prototype.getSpine = function(t) { return this.spine.hasOwnProperty(t) || console.warn('Phaser.Cache.getSpine: Key "' + t + '" not found in Cache.'), this.spine[t] } }, i }(Phaser.Plugin);
    e.RESOLUTION_REGEXP = /@(.+)x/, t.SpinePlugin = e }(PhaserSpine || (PhaserSpine = {})), Phaser.Rope.prototype.postUpdate = function() {}, spine.Bone.yDown = !0;
var PhaserSpine;
! function(t) { var e = function(e) {
        function i(i, n, s) { var o = e.call(this, i) || this;
            o.imageScale = 1; var a = o.game.cache.getSpine(n);
            void 0 !== s && -1 !== a.variants.indexOf(s) ? o.imageScale = o.getScaleFromVariant(s) : a.variants && a.variants.length >= 1 && (o.imageScale = o.getScaleFromVariant(a.variants[0])); var r = new t.SpineTextureLoader(i),
                h = new spine.Atlas(i.cache.getText(a.atlas), r),
                l = new spine.AtlasAttachmentLoader(h),
                c = new spine.SkeletonJson(l); if (o.skeletonData = c.readSkeletonData(i.cache.getJSON(n)), !o.skeletonData) throw new Error("Spine data must be preloaded using Loader.spine");
            o.onEvent = new Phaser.Signal, o.onComplete = new Phaser.Signal, o.onEnd = new Phaser.Signal, o.skeleton = new spine.Skeleton(o.skeletonData), o.skeleton.updateWorldTransform(), o.stateData = new spine.AnimationStateData(o.skeletonData), o.state = new spine.AnimationState(o.stateData), o.state.onEvent = o.onEvent.dispatch.bind(o.onEvent), o.state.onComplete = o.onComplete.dispatch.bind(o.onComplete), o.state.onEnd = o.onEnd.dispatch.bind(o.onEnd), o.slotContainers = []; for (var u = 0, p = o.skeleton.slots.length; u < p; u++) { var d = o.skeleton.slots[u],
                    m = d.attachment,
                    g = new Phaser.Group(i); if (o.slotContainers.push(g), o.add(g), m instanceof spine.RegionAttachment) { var f = m.rendererObject.name,
                        y = o.createSprite(d, m);
                    d.currentSprite = y, d.currentSpriteName = f, g.add(y) } else { if (!(m instanceof spine.WeightedMeshAttachment)) continue; var v = o.createMesh(d, m);
                    d.currentMesh = v, d.currentMeshName = m.name, g.add(v) } } return o.autoUpdate = !0, o } return __extends(i, e), Object.defineProperty(i.prototype, "autoUpdate", { get: function() { return this.updateTransform === t.Spine.prototype.autoUpdateTransform }, set: function(e) { this.updateTransform = e ? t.Spine.prototype.autoUpdateTransform : PIXI.DisplayObjectContainer.prototype.updateTransform }, enumerable: !0, configurable: !0 }), i.prototype.getScaleFromVariant = function(e) { var i = t.SpinePlugin.RESOLUTION_REGEXP.exec(e); return i ? parseFloat(i[1]) : 1 }, i.prototype.setTint = function(t) { this.globalTint = t; for (var e = this.skeleton.slots, i = 0; i < e.length; i++) e[i].currentSprite.tint = t }, i.prototype.update = function(t) { if (void 0 !== t) { this.state.update(t), this.state.apply(this.skeleton), this.skeleton.updateWorldTransform(); for (var e = this.skeleton.drawOrder, i = this.skeleton.slots, n = 0, s = e.length; n < s; n++) void 0 !== e[n].currentSprite && (this.children[n] = e[n].currentSprite.parent); for (var n = 0, s = i.length; n < s; n++) { var o = i[n],
                        a = o.attachment,
                        r = this.slotContainers[n]; if (a) { var h = a.type; if (h === spine.AttachmentType.region) { if (a.rendererObject && (!o.currentSpriteName || o.currentSpriteName !== a.name)) { var l = a.rendererObject.name; if (void 0 !== o.currentSprite && (o.currentSprite.visible = !1), o.sprites = o.sprites || {}, void 0 !== o.sprites[l]) o.sprites[l].visible = !0;
                                else { var c = this.createSprite(o, a);
                                    r.add(c) } o.currentSprite = o.sprites[l], o.currentSpriteName = l } var u = o.bone;
                            r.position.x = a.x * u.a + a.y * u.b + u.worldX, r.position.y = a.x * u.c + a.y * u.d + u.worldY, r.scale.x = u.getWorldScaleX(), r.scale.y = u.getWorldScaleY(), r.rotation = (u.getWorldRotationX() - a.rotation) * Math.PI / 180, u.getWorldScaleY() < 0 && (r.scale.y = -r.scale.y), u.getWorldScaleX() < 0 && (r.scale.x = -r.scale.x), (u.getWorldScaleY() < 0 || u.getWorldScaleX() < 0) && (r.rotation = -r.rotation), o.currentSprite.blendMode = o.blendMode, this.globalTint || (o.currentSprite.tint = o.currentSprite.tint = parseInt(Phaser.Color.componentToHex(255 * o.r).substring(0, 2) + Phaser.Color.componentToHex(255 * o.g).substring(0, 2) + Phaser.Color.componentToHex(255 * o.b).substring(0, 2), 16)) } else { if (h !== spine.AttachmentType.weightedmesh && h !== spine.AttachmentType.weightedlinkedmesh) { r.visible = !1; continue } if (!o.currentMeshName || o.currentMeshName !== a.name) { var p = a.name; if (void 0 !== o.currentMesh && (o.currentMesh.visible = !1), o.meshes = o.meshes || {}, void 0 !== o.meshes[p]) o.meshes[p].visible = !0;
                                else { var d = this.createMesh(o, a);
                                    r.add(d) } o.currentMesh = o.meshes[p], o.currentMeshName = p } a.computeWorldVertices(o.bone.skeleton.x, o.bone.skeleton.y, o, o.currentMesh.vertices) } r.visible = !0, r.alpha = o.a } else r.visible = !1 } } }, i.prototype.destroy = function(t, i) { e.prototype.destroy.call(this, !0, i) }, i.prototype.autoUpdateTransform = function() { if (i.globalAutoUpdate) { this.lastTime = this.lastTime || Date.now(); var t = .001 * (Date.now() - this.lastTime);
                this.lastTime = Date.now(), this.update(t) } else this.lastTime = 0;
            PIXI.DisplayObjectContainer.prototype.updateTransform.call(this) }, i.prototype.createSprite = function(t, e) { var i = e.rendererObject,
                n = i.page.rendererObject,
                s = new PIXI.Rectangle(i.x, i.y, i.rotate ? i.height : i.width, i.rotate ? i.width : i.height),
                o = new PIXI.Texture(n, s),
                a = new Phaser.Sprite(this.game, 0, 0, o),
                r = i.rotate ? .5 * Math.PI : 0; if (a.scale.x = i.width / i.originalWidth * e.scaleX / this.imageScale, a.scale.y = i.height / i.originalHeight * e.scaleY / this.imageScale, a.rotation = r, a.anchor.x = (.5 * i.originalWidth - i.offsetX) / i.width, a.anchor.y = 1 - (.5 * i.originalHeight - i.offsetY) / i.height, a.alpha = e.a, i.rotate) { var h = a.scale.x;
                a.scale.x = a.scale.y, a.scale.y = h } return t.sprites = t.sprites || {}, t.sprites[i.name] = a, a }, i.prototype.createMesh = function(t, e) { var i = e.rendererObject.page.rendererObject,
                n = new PIXI.Texture(i),
                s = new Phaser.Rope(this.game, 0, 0, n); return s.drawMode = 1, s.canvasPadding = 1.5, s.vertices = new spine.Float32Array(e.uvs.length), s.uvs = e.uvs, s.indices = e.triangles, s.alpha = e.a, t.meshes = t.meshes || {}, t.meshes[e.name] = s, s }, i.prototype.setMixByName = function(t, e, i) { this.stateData.setMixByName(t, e, i) }, i.prototype.setAnimationByName = function(t, e, i) { void 0 === i && (i = !1); var n = this.state.data.skeletonData.findAnimation(e); return n ? this.state.setAnimation(t, n, i) : (console.warn("Animation not found: " + e), null) }, i.prototype.addAnimationByName = function(t, e, i, n) { void 0 === i && (i = !1), void 0 === n && (n = 0); var s = this.state.data.skeletonData.findAnimation(e); return s ? this.state.addAnimation(t, s, i, n) : (console.warn("Animation not found: " + e), null) }, i.prototype.getCurrentAnimationForTrack = function(t) { return this.state.tracks[t].animation.name }, i.prototype.setSkinByName = function(t) { var e = this.skeleton.data.findSkin(t);
            e ? this.skeleton.setSkin(e) : console.warn("Skin not found: " + t) }, i.prototype.setSkin = function(t) { this.skeleton.setSkin(t) }, i.prototype.setToSetupPose = function() { this.skeleton.setToSetupPose() }, i.prototype.createCombinedSkin = function(t) { for (var e = [], i = 1; i < arguments.length; i++) e[i - 1] = arguments[i]; if (0 !== e.length) { for (var n = new spine.Skin(t), s = 0; s < e.length; s++) { var o = e[s],
                        a = this.skeleton.data.findSkin(o); if (!a) return void console.warn("Skin not found: " + o); for (var r in a.attachments) { var h = r.split(":"),
                            l = h[0],
                            c = h[1],
                            u = a.attachments[r]; if (void 0 === l || void 0 === c) return void console.warn("something went wrong with reading the attachments index and/or name");
                        void 0 === n.getAttachment(l, c) ? n.addAttachment(l, c, u) : console.warn("Found double attachment for: " + o + ". Skipping") } } return this.skeleton.data.skins.push(n), n } console.warn("Unable to combine skins when no skins are passed...") }, i }(Phaser.Group);
    e.globalAutoUpdate = !0, t.Spine = e }(PhaserSpine || (PhaserSpine = {}));
var PhaserSpine;
! function(t) { var e = function() { return function(t) { this.load = function(t, e, i) { var n = this.game.make.image(0, 0, e);
                t.rendererObject = n.texture.baseTexture }, this.unload = function(t) { t.destroy() }, this.game = t } }();
    t.SpineTextureLoader = e }(PhaserSpine || (PhaserSpine = {}));
var PhaserSuperStorage;
! function(t) {! function(t) { var e = function() {
            function t(t) { void 0 === t && (t = ""), this.namespace = "", this.forcePromises = !1, this.setNamespace(t) } return Object.defineProperty(t.prototype, "length", { get: function() { return null !== this.getNameSpaceMatches() ? this.getNameSpaceMatches().length : 0 }, enumerable: !0, configurable: !0 }), t.prototype.key = function(t) { var e = this.getNameSpaceMatches()[t],
                    i = this.getCookiesForNameSpace()[e] || null; return this.forcePromises ? this.promisefy(i) : i }, t.prototype.getItem = function(t) { var e = this.getCookiesForNameSpace()[t] || null; return this.forcePromises ? this.promisefy(e) : e }, t.prototype.setItem = function(t, e) { if (document.cookie = encodeURIComponent(this.namespace + t) + "=" + encodeURIComponent(e) + "; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/", this.forcePromises) return this.promisefy(null) }, t.prototype.removeItem = function(t) { if (document.cookie = encodeURIComponent(this.namespace + t) + "=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/", this.forcePromises) return this.promisefy(null) }, t.prototype.clear = function() { var t = this.getCookiesForNameSpace(); for (var e in t) t.hasOwnProperty(e) && this.removeItem(e); if (this.forcePromises) return this.promisefy(null) }, t.prototype.setNamespace = function(t) { if (t && (this.namespace = t + ":", this.reg = new RegExp("^" + this.namespace + "[a-zA-Z0-9]*", "g")), this.forcePromises) return this.promisefy(t) }, t.prototype.getNameSpaceMatches = function() { var t = this; return decodeURIComponent(document.cookie).split("; ").filter(function(e) { return null !== e.match(t.reg) && e.match(t.reg).length > 0 }) }, t.prototype.getCookiesForNameSpace = function() { var t = this,
                    e = {}; return this.getNameSpaceMatches().forEach(function(i) { var n = i.replace(t.namespace, "").split("=");
                    e[n[0]] = n[1] }), e }, t.prototype.promisefy = function(t) { return new Promise(function(e, i) { e(t) }) }, t }();
        t.CookieStorage = e }(t.StorageAdapters || (t.StorageAdapters = {})) }(PhaserSuperStorage || (PhaserSuperStorage = {}));
var PhaserSuperStorage;
! function(t) {! function(t) { var e = function() {
            function t() { this.namespace = "", this.keys = [] } return Object.defineProperty(t.prototype, "forcePromises", { get: function() { return !0 }, set: function(t) {}, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "length", { get: function() { return this.keys.length }, enumerable: !0, configurable: !0 }), t.prototype.key = function(t) { return this.promisefy(this.keys[t]) }, t.prototype.getItem = function(t) { var e = this; return new Promise(function(i, n) { NativeStorage.getItem(e.namespace + t, function(t) { i(t) }, function(t) { 2 === t.code ? i(null) : n(t) }) }) }, t.prototype.setItem = function(t, e) { var i = this; { if (!(t.length < 1)) return new Promise(function(n, s) { NativeStorage.setItem(i.namespace + t, e, function() { i.keys.indexOf(t) < 0 && (i.keys.push(t), i.save()), n(null) }, function(t) { s(t) }) });
                    console.error("CordovaStorage: Key cannot be an empty string!") } }, t.prototype.removeItem = function(t) { var e = this; return new Promise(function(i, n) { NativeStorage.remove(e.namespace + t, function() { var n = e.keys.indexOf(t);
                        n >= 0 && (e.keys.splice(n, 1), e.save()), i(null) }, function(t) { n(t) }) }) }, t.prototype.clear = function() { var t = this; return new Promise(function(e, i) { for (var n = 0, s = 0; s < t.keys.length; s++) NativeStorage.remove(t.namespace + t.keys[s], function() {++n >= t.keys.length && (t.keys = [], t.save(), e(null)) }, function(t) { i(t) }) }) }, t.prototype.setNamespace = function(t) { var e = this; return void 0 === t && (t = ""), this.namespace = t + ":", this.keys = [], new Promise(function(t, i) { e.load().then(t).catch(t) }) }, t.prototype.promisefy = function(t) { return new Promise(function(e, i) { e(t) }) }, t.prototype.load = function() { var t = this; return new Promise(function(e, i) { NativeStorage.getItem(t.namespace, function(i) { t.keys = JSON.parse(i), e(null) }, function(t) { i(t) }) }) }, t.prototype.save = function() { NativeStorage.setItem(this.namespace, JSON.stringify(this.keys), function() {}, function(t) { console.warn("CordovaStorage: Failed to save keys of namespace.") }) }, t }();
        t.CordovaStorage = e }(t.StorageAdapters || (t.StorageAdapters = {})) }(PhaserSuperStorage || (PhaserSuperStorage = {}));
var PhaserSuperStorage;
! function(t) {! function(e) { var i = function() {
            function e(t, e) { void 0 === t && (t = ""), void 0 === e && (e = "*"), this.namespace = "", this.expectedOrigin = "", this.storageLength = 0, this.enabled = !1, "" !== t && this.setNamespace(t), this.expectedOrigin = e } return Object.defineProperty(e.prototype, "forcePromises", { get: function() { return !0 }, set: function(t) {}, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "length", { get: function() { return this.storageLength }, enumerable: !0, configurable: !0 }), e.prototype.init = function() { var e = this; return this.sendMessage({ command: t.StorageCommand.init }).then(function() { e.enabled = !0 }) }, e.prototype.key = function(e) { return this.sendMessage({ command: t.StorageCommand.key, value: e }) }, e.prototype.getItem = function(e) { return this.sendMessage({ command: t.StorageCommand.getItem, key: e }) }, e.prototype.setItem = function(e, i) { return this.sendMessage({ command: t.StorageCommand.setItem, key: e, value: i }) }, e.prototype.removeItem = function(e) { return this.sendMessage({ command: t.StorageCommand.removeItem, key: e }) }, e.prototype.clear = function() { return this.sendMessage({ command: t.StorageCommand.clear }) }, e.prototype.setNamespace = function(e) { return this.sendMessage({ command: t.StorageCommand.setNamespace, value: e }) }, e.prototype.sendMessage = function(e) { var i, n = this;
                e.command === t.StorageCommand.init && (i = !1); var s = new MessageChannel; return new Promise(function(o, a) { n.enabled || e.command === t.StorageCommand.init || a("Messaging not enabled!"), e.command === t.StorageCommand.init && setTimeout(function() { i || a("Unable to get a response in time") }, 1e3), s.port1.onmessage = function(e) { console.log("Frame received message", e); var s = t.StorageUtils.validateMessage(e.data); switch (s.command === t.StorageCommand.init && (i = !0), void 0 !== s.status && "ok" === s.status || a(s.value), void 0 !== s.length && (n.storageLength = s.length), s.command) {
                            case t.StorageCommand.setNamespace:
                                n.namespace = s.value + ":";
                            case t.StorageCommand.getItem:
                            case t.StorageCommand.length:
                            case t.StorageCommand.key:
                                o(s.value); break;
                            case t.StorageCommand.setItem:
                            case t.StorageCommand.removeItem:
                            case t.StorageCommand.clear:
                            case t.StorageCommand.init:
                                o(s.status); break;
                            default:
                                a(s.value) } }, (n.enabled || e.command === t.StorageCommand.init) && (console.log("Sending message to parent: ", e), window.parent.postMessage(e, n.expectedOrigin, [s.port2])) }) }, e }();
        e.IframeStorage = i }(t.StorageAdapters || (t.StorageAdapters = {})) }(PhaserSuperStorage || (PhaserSuperStorage = {}));
var PhaserSuperStorage;
! function(t) {! function(e) { var i = function() {
            function e(t) { void 0 === t && (t = ""), this.namespace = "", this.forcePromises = !1, this.setNamespace(t) } return Object.defineProperty(e.prototype, "length", { get: function() { var e = Object.keys(localStorage); return t.StorageUtils.nameSpaceKeyFilter(e, this.namespace).length }, enumerable: !0, configurable: !0 }), e.prototype.key = function(t) { return this.forcePromises ? this.promisefy(this._key, arguments) : this._key(t) }, e.prototype._key = function(e) { var i = Object.keys(localStorage),
                    n = t.StorageUtils.nameSpaceKeyFilter(i, this.namespace); return localStorage.getItem(n[e]) }, e.prototype.getItem = function(t) { return this.forcePromises ? this.promisefy(this._getItem, arguments) : this._getItem(t) }, e.prototype._getItem = function(t) { return localStorage.getItem(this.namespace + t) }, e.prototype.setItem = function(t, e) { return this.forcePromises ? this.promisefy(this._setItem, arguments) : this._setItem(t, e) }, e.prototype._setItem = function(t, e) { return localStorage.setItem(this.namespace + t, e) }, e.prototype.removeItem = function(t) { return this.forcePromises ? this.promisefy(this._removeItem, arguments) : this._removeItem(t) }, e.prototype._removeItem = function(t) { return localStorage.removeItem(this.namespace + t) }, e.prototype.clear = function() { return this.forcePromises ? this.promisefy(this._clear, arguments) : this._clear() }, e.prototype._clear = function() { for (var e = Object.keys(localStorage), i = t.StorageUtils.nameSpaceKeyFilter(e, this.namespace), n = 0; n < i.length; n++) localStorage.removeItem(i[n]) }, e.prototype.setNamespace = function(t) { return this.forcePromises ? this.promisefy(this._setNameSpace, arguments) : this._setNameSpace(t) }, e.prototype._setNameSpace = function(t) { t && (this.namespace = t + ":") }, e.prototype.promisefy = function(t, e) { var i = this; return new Promise(function(n, s) { n(t.apply(i, e)) }) }, e }();
        e.LocalStorage = i }(t.StorageAdapters || (t.StorageAdapters = {})) }(PhaserSuperStorage || (PhaserSuperStorage = {}));
var PhaserSuperStorage;
! function(t) { var e = function() {
        function e(i) { if (void 0 !== i) Object.defineProperty(i, "storage", { value: this });
            else { if (null !== e.instance) return e.instance;
                e.instance = this } t.StorageUtils.isLocalStorageSupport() ? this.setAdapter(new t.StorageAdapters.LocalStorage) : this.setAdapter(new t.StorageAdapters.CookieStorage) } return e.prototype.setAdapter = function(t) { this.storage = t }, Object.defineProperty(e.prototype, "forcePromises", { get: function() { return this.storage.forcePromises }, set: function(t) { this.storage.forcePromises = t }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "length", { get: function() { return null === this.storage ? 0 : this.storage.length }, enumerable: !0, configurable: !0 }), e.prototype.setNamespace = function(t) { if (null !== this.storage) return this.storage.setNamespace(t) }, e.prototype.key = function(t) { return null === this.storage ? "" : this.storage.key(t) }, e.prototype.getItem = function(t) { return null === this.storage ? null : this.storage.getItem(t) }, e.prototype.setItem = function(t, e) { if (null !== this.storage) return this.storage.setItem(t, e) }, e.prototype.removeItem = function(t) { if (null !== this.storage) return this.storage.removeItem(t) }, e.prototype.clear = function() { if (null !== this.storage) return this.storage.clear() }, e.instance = null, e }();
    t.StoragePlugin = e }(PhaserSuperStorage || (PhaserSuperStorage = {})), void 0 !== window.Phaser && Phaser.Utils.mixinPrototype(PhaserSuperStorage.StoragePlugin, Phaser.Plugin);
var PhaserSuperStorage;
! function(t) {! function(t) { t[t.init = 0] = "init", t[t.setItem = 1] = "setItem", t[t.getItem = 2] = "getItem", t[t.removeItem = 3] = "removeItem", t[t.clear = 4] = "clear", t[t.setNamespace = 5] = "setNamespace", t[t.length = 6] = "length", t[t.key = 7] = "key", t[t.error = 8] = "error" }(t.StorageCommand || (t.StorageCommand = {}));
    t.StorageCommand; var e = function() {
        function t() {} return t.isLocalStorageSupport = function() { try { if ("object" == typeof localStorage) return localStorage.setItem("testingLocalStorage", "foo"), localStorage.removeItem("testingLocalStorage"), !0 } catch (t) { return !1 } return !1 }, t.validateMessage = function(t) { return t.hasOwnProperty("command") ? t : null }, t.nameSpaceKeyFilter = function(t, e) { return t.filter(function(t) { return t.substring(0, e.length) === e }) }, t }();
    t.StorageUtils = e }(PhaserSuperStorage || (PhaserSuperStorage = {}));
var PhaserSuperStorage;
! function(t) {! function(t) { t[t.init = 0] = "init", t[t.setItem = 1] = "setItem", t[t.getItem = 2] = "getItem", t[t.removeItem = 3] = "removeItem", t[t.clear = 4] = "clear", t[t.setNamespace = 5] = "setNamespace", t[t.length = 6] = "length", t[t.key = 7] = "key", t[t.error = 8] = "error" }(t.StorageCommand || (t.StorageCommand = {}));
    t.StorageCommand; var e = function() {
        function t() {} return t.isLocalStorageSupport = function() { try { if ("object" == typeof localStorage) return localStorage.setItem("testingLocalStorage", "foo"), localStorage.removeItem("testingLocalStorage"), !0 } catch (t) { return !1 } return !1 }, t.validateMessage = function(t) { return t.hasOwnProperty("command") ? t : null }, t.nameSpaceKeyFilter = function(t, e) { return t.filter(function(t) { return t.substring(0, e.length) === e }) }, t }();
    t.StorageUtils = e }(PhaserSuperStorage || (PhaserSuperStorage = {}));
var PhaserSuperStorage;
! function(t) {! function(e) { var i = function() {
            function e(t) { void 0 === t && (t = ""), this.namespace = "", this.forcePromises = !1, this.setNamespace(t) } return Object.defineProperty(e.prototype, "length", { get: function() { var e = Object.keys(localStorage); return t.StorageUtils.nameSpaceKeyFilter(e, this.namespace).length }, enumerable: !0, configurable: !0 }), e.prototype.key = function(t) { return this.forcePromises ? this.promisefy(this._key, arguments) : this._key(t) }, e.prototype._key = function(e) { var i = Object.keys(localStorage),
                    n = t.StorageUtils.nameSpaceKeyFilter(i, this.namespace); return localStorage.getItem(n[e]) }, e.prototype.getItem = function(t) { return this.forcePromises ? this.promisefy(this._getItem, arguments) : this._getItem(t) }, e.prototype._getItem = function(t) { return localStorage.getItem(this.namespace + t) }, e.prototype.setItem = function(t, e) { return this.forcePromises ? this.promisefy(this._setItem, arguments) : this._setItem(t, e) }, e.prototype._setItem = function(t, e) { return localStorage.setItem(this.namespace + t, e) }, e.prototype.removeItem = function(t) { return this.forcePromises ? this.promisefy(this._removeItem, arguments) : this._removeItem(t) }, e.prototype._removeItem = function(t) { return localStorage.removeItem(this.namespace + t) }, e.prototype.clear = function() { return this.forcePromises ? this.promisefy(this._clear, arguments) : this._clear() }, e.prototype._clear = function() { for (var e = Object.keys(localStorage), i = t.StorageUtils.nameSpaceKeyFilter(e, this.namespace), n = 0; n < i.length; n++) localStorage.removeItem(i[n]) }, e.prototype.setNamespace = function(t) { return this.forcePromises ? this.promisefy(this._setNameSpace, arguments) : this._setNameSpace(t) }, e.prototype._setNameSpace = function(t) { t && (this.namespace = t + ":") }, e.prototype.promisefy = function(t, e) { var i = this; return new Promise(function(n, s) { n(t.apply(i, e)) }) }, e }();
        e.LocalStorage = i }(t.StorageAdapters || (t.StorageAdapters = {})) }(PhaserSuperStorage || (PhaserSuperStorage = {}));
var StorageCommand = PhaserSuperStorage.StorageCommand,
    StorageUtils = PhaserSuperStorage.StorageUtils,
    LocalStorage = PhaserSuperStorage.StorageAdapters.LocalStorage;
! function() { var t = window.gameOrigin || "*",
        e = StorageUtils.isLocalStorageSupport(),
        i = e ? new LocalStorage : null;
    window.addEventListener("message", function(n) { if ("*" === t || n.origin === t) { var s = StorageUtils.validateMessage(n.data),
                o = n.ports[0]; if (void 0 !== o && o) { var a = function(t, e) { o.postMessage({ status: "error", command: t, value: e }) }; if (null !== s) switch (e || a(s.command, "localStorage not supported"), s.command) {
                    case StorageCommand.init:
                        o.postMessage({ status: "ok", command: s.command, length: i.length }); break;
                    case StorageCommand.getItem:
                        try { var r = i.getItem(s.key);
                            o.postMessage({ status: "ok", command: s.command, value: r, length: i.length }) } catch (t) { a(s.command, t.message) } break;
                    case StorageCommand.setItem:
                        try { i.setItem(s.key, s.value), o.postMessage({ status: "ok", command: s.command, length: i.length }) } catch (t) { a(s.command, t.message) } break;
                    case StorageCommand.removeItem:
                        try { i.removeItem(s.key), o.postMessage({ status: "ok", command: s.command, length: i.length }) } catch (t) { a(s.command, t.message) } break;
                    case StorageCommand.setNamespace:
                        try { i.setNamespace(s.value), o.postMessage({ status: "ok", command: s.command, value: s.value, length: i.length }) } catch (t) { a(s.command, t.message) } break;
                    case StorageCommand.clear:
                        try { i.clear(), o.postMessage({ status: "ok", command: s.command, length: i.length }) } catch (t) { a(s.command, t.message) } break;
                    case StorageCommand.length:
                        try { o.postMessage({ status: "ok", command: s.command, value: i.length, length: i.length }) } catch (t) { a(s.command, t.message) } break;
                    case StorageCommand.key:
                        try { var h = i.key(s.value);
                            o.postMessage({ status: "ok", command: s.command, value: h, length: i.length }) } catch (t) { a(s.command, t.message) } break;
                    default:
                        a(s.command, "Command not found") } else a(StorageCommand.error, "Empty message!") } } }) }(),
function() {
    function t(t, e, i) { return t.call.apply(t.bind, arguments) }

    function e(t, e, i) { if (!t) throw Error(); if (2 < arguments.length) { var n = Array.prototype.slice.call(arguments, 2); return function() { var i = Array.prototype.slice.call(arguments); return Array.prototype.unshift.apply(i, n), t.apply(e, i) } } return function() { return t.apply(e, arguments) } }

    function i(n, s, o) { return (i = Function.prototype.bind && -1 != Function.prototype.bind.toString().indexOf("native code") ? t : e).apply(null, arguments) }

    function n(t, e) { this.a = t, this.o = e || t, this.c = this.o.document }

    function s(t, e, i, n) { if (e = t.c.createElement(e), i)
            for (var s in i) i.hasOwnProperty(s) && ("style" == s ? e.style.cssText = i[s] : e.setAttribute(s, i[s])); return n && e.appendChild(t.c.createTextNode(n)), e }

    function o(t, e, i) {
        (t = t.c.getElementsByTagName(e)[0]) || (t = document.documentElement), t.insertBefore(i, t.lastChild) }

    function a(t) { t.parentNode && t.parentNode.removeChild(t) }

    function r(t, e, i) { e = e || [], i = i || []; for (var n = t.className.split(/\s+/), s = 0; s < e.length; s += 1) { for (var o = !1, a = 0; a < n.length; a += 1)
                if (e[s] === n[a]) { o = !0; break } o || n.push(e[s]) } for (e = [], s = 0; s < n.length; s += 1) { for (o = !1, a = 0; a < i.length; a += 1)
                if (n[s] === i[a]) { o = !0; break } o || e.push(n[s]) } t.className = e.join(" ").replace(/\s+/g, " ").replace(/^\s+|\s+$/, "") }

    function h(t, e) { for (var i = t.className.split(/\s+/), n = 0, s = i.length; n < s; n++)
            if (i[n] == e) return !0; return !1 }

    function l(t) { return t.o.location.hostname || t.a.location.hostname }

    function c(t, e, i) {
        function n() { l && a && r && (l(h), l = null) } e = s(t, "link", { rel: "stylesheet", href: e, media: "all" }); var a = !1,
            r = !0,
            h = null,
            l = i || null;
        et ? (e.onload = function() { a = !0, n() }, e.onerror = function() { a = !0, h = Error("Stylesheet failed to load"), n() }) : setTimeout(function() { a = !0, n() }, 0), o(t, "head", e) }

    function u(t, e, i, n) { var o = t.c.getElementsByTagName("head")[0]; if (o) { var a = s(t, "script", { src: e }),
                r = !1; return a.onload = a.onreadystatechange = function() { r || this.readyState && "loaded" != this.readyState && "complete" != this.readyState || (r = !0, i && i(null), a.onload = a.onreadystatechange = null, "HEAD" == a.parentNode.tagName && o.removeChild(a)) }, o.appendChild(a), setTimeout(function() { r || (r = !0, i && i(Error("Script load timeout"))) }, n || 5e3), a } return null }

    function p() { this.a = 0, this.c = null }

    function d(t) { return t.a++,
            function() { t.a--, g(t) } }

    function m(t, e) { t.c = e, g(t) }

    function g(t) { 0 == t.a && t.c && (t.c(), t.c = null) }

    function f(t) { this.a = t || "-" }

    function y(t, e) { this.c = t, this.f = 4, this.a = "n"; var i = (e || "n4").match(/^([nio])([1-9])$/i);
        i && (this.a = i[1], this.f = parseInt(i[2], 10)) }

    function v(t) { return S(t) + " " + t.f + "00 300px " + b(t.c) }

    function b(t) { var e = [];
        t = t.split(/,\s*/); for (var i = 0; i < t.length; i++) { var n = t[i].replace(/['"]/g, ""); - 1 != n.indexOf(" ") || /^\d/.test(n) ? e.push("'" + n + "'") : e.push(n) } return e.join(",") }

    function _(t) { return t.a + t.f }

    function S(t) { var e = "normal"; return "o" === t.a ? e = "oblique" : "i" === t.a && (e = "italic"), e }

    function w(t) { var e = 4,
            i = "n",
            n = null; return t && ((n = t.match(/(normal|oblique|italic)/i)) && n[1] && (i = n[1].substr(0, 1).toLowerCase()), (n = t.match(/([1-9]00|normal|bold)/i)) && n[1] && (/bold/i.test(n[1]) ? e = 7 : /[1-9]00/.test(n[1]) && (e = parseInt(n[1].substr(0, 1), 10)))), i + e }

    function C(t, e) { this.c = t, this.f = t.o.document.documentElement, this.h = e, this.a = new f("-"), this.j = !1 !== e.events, this.g = !1 !== e.classes }

    function A(t) { t.g && r(t.f, [t.a.c("wf", "loading")]), x(t, "loading") }

    function T(t) { if (t.g) { var e = h(t.f, t.a.c("wf", "active")),
                i = [],
                n = [t.a.c("wf", "loading")];
            e || i.push(t.a.c("wf", "inactive")), r(t.f, i, n) } x(t, "inactive") }

    function x(t, e, i) { t.j && t.h[e] && (i ? t.h[e](i.c, _(i)) : t.h[e]()) }

    function P() { this.c = {} }

    function I(t, e, i) { var n, s = []; for (n in e)
            if (e.hasOwnProperty(n)) { var o = t.c[n];
                o && s.push(o(e[n], i)) } return s }

    function O(t, e) { this.c = t, this.f = e, this.a = s(this.c, "span", { "aria-hidden": "true" }, this.f) }

    function E(t) { o(t.c, "body", t.a) }

    function L(t) { return "display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:" + b(t.c) + ";font-style:" + S(t) + ";font-weight:" + t.f + "00;" }

    function k(t, e, i, n, s, o) { this.g = t, this.j = e, this.a = n, this.c = i, this.f = s || 3e3, this.h = o || void 0 }

    function M(t, e, i, n, s, o, a) { this.v = t, this.B = e, this.c = i, this.a = n, this.s = a || "BESbswy", this.f = {}, this.w = s || 3e3, this.u = o || null, this.m = this.j = this.h = this.g = null, this.g = new O(this.c, this.s), this.h = new O(this.c, this.s), this.j = new O(this.c, this.s), this.m = new O(this.c, this.s), t = L(t = new y(this.a.c + ",serif", _(this.a))), this.g.a.style.cssText = t, t = L(t = new y(this.a.c + ",sans-serif", _(this.a))), this.h.a.style.cssText = t, t = L(t = new y("serif", _(this.a))), this.j.a.style.cssText = t, t = L(t = new y("sans-serif", _(this.a))), this.m.a.style.cssText = t, E(this.g), E(this.h), E(this.j), E(this.m) }

    function B() { if (null === nt) { var t = /AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);
            nt = !!t && (536 > parseInt(t[1], 10) || 536 === parseInt(t[1], 10) && 11 >= parseInt(t[2], 10)) } return nt }

    function D(t, e, i) { for (var n in it)
            if (it.hasOwnProperty(n) && e === t.f[it[n]] && i === t.f[it[n]]) return !0; return !1 }

    function G(t) { var e, i = t.g.a.offsetWidth,
            n = t.h.a.offsetWidth;
        (e = i === t.f.serif && n === t.f["sans-serif"]) || (e = B() && D(t, i, n)), e ? tt() - t.A >= t.w ? B() && D(t, i, n) && (null === t.u || t.u.hasOwnProperty(t.a.c)) ? U(t, t.v) : U(t, t.B) : R(t) : U(t, t.v) }

    function R(t) { setTimeout(i(function() { G(this) }, t), 50) }

    function U(t, e) { setTimeout(i(function() { a(this.g.a), a(this.h.a), a(this.j.a), a(this.m.a), e(this.a) }, t), 0) }

    function F(t, e, i) { this.c = t, this.a = e, this.f = 0, this.m = this.j = !1, this.s = i }

    function N(t) { 0 == --t.f && t.j && (t.m ? ((t = t.a).g && r(t.f, [t.a.c("wf", "active")], [t.a.c("wf", "loading"), t.a.c("wf", "inactive")]), x(t, "active")) : T(t.a)) }

    function j(t) { this.j = t, this.a = new P, this.h = 0, this.f = this.g = !0 }

    function H(t, e, n, s, o) { var a = 0 == --t.h;
        (t.f || t.g) && setTimeout(function() { var t = o || null,
                h = s || null || {}; if (0 === n.length && a) T(e.a);
            else { e.f += n.length, a && (e.j = a); var l, c = []; for (l = 0; l < n.length; l++) { var u = n[l],
                        p = h[u.c],
                        d = e.a,
                        m = u; if (d.g && r(d.f, [d.a.c("wf", m.c, _(m).toString(), "loading")]), x(d, "fontloading", m), d = null, null === st)
                        if (window.FontFace) { var m = /Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),
                                g = /OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent) && /Apple/.exec(window.navigator.vendor);
                            st = m ? 42 < parseInt(m[1], 10) : !g } else st = !1;
                    d = st ? new k(i(e.g, e), i(e.h, e), e.c, u, e.s, p) : new M(i(e.g, e), i(e.h, e), e.c, u, e.s, t, p), c.push(d) } for (l = 0; l < c.length; l++) c[l].start() } }, 0) }

    function X(t, e, i) { var n = [],
            s = i.timeout;
        A(e); var n = I(t.a, i, t.c),
            o = new F(t.c, e, s); for (t.h = n.length, e = 0, i = n.length; e < i; e++) n[e].load(function(e, i, n) { H(t, o, e, i, n) }) }

    function W(t, e) { this.c = t, this.a = e }

    function V(t, e) { this.c = t, this.a = e }

    function z(t, e) { this.c = t || ot, this.a = [], this.f = [], this.g = e || "" }

    function Y(t, e) { for (var i = e.length, n = 0; n < i; n++) { var s = e[n].split(":");
            3 == s.length && t.f.push(s.pop()); var o = "";
            2 == s.length && "" != s[1] && (o = ":"), t.a.push(s.join(o)) } }

    function K(t) { if (0 == t.a.length) throw Error("No fonts to load!"); if (-1 != t.c.indexOf("kit=")) return t.c; for (var e = t.a.length, i = [], n = 0; n < e; n++) i.push(t.a[n].replace(/ /g, "+")); return e = t.c + "?family=" + i.join("%7C"), 0 < t.f.length && (e += "&subset=" + t.f.join(",")), 0 < t.g.length && (e += "&text=" + encodeURIComponent(t.g)), e }

    function q(t) { this.f = t, this.a = [], this.c = {} }

    function Z(t) { for (var e = t.f.length, i = 0; i < e; i++) { var n = t.f[i].split(":"),
                s = n[0].replace(/\+/g, " "),
                o = ["n4"]; if (2 <= n.length) { var a; if (a = [], r = n[1])
                    for (var r = r.split(","), h = r.length, l = 0; l < h; l++) { var c; if ((c = r[l]).match(/^[\w-]+$/))
                            if (null == (p = lt.exec(c.toLowerCase()))) c = "";
                            else { if (c = p[2], c = null == c || "" == c ? "n" : ht[c], null == (p = p[1]) || "" == p) p = "4";
                                else var u = rt[p],
                                    p = u || (isNaN(p) ? "4" : p.substr(0, 1));
                                c = [c, p].join("") } else c = "";
                        c && a.push(c) } 0 < a.length && (o = a), 3 == n.length && (n = n[2], a = [], 0 < (n = n ? n.split(",") : a).length && (n = at[n[0]]) && (t.c[s] = n)) } for (t.c[s] || (n = at[s]) && (t.c[s] = n), n = 0; n < o.length; n += 1) t.a.push(new y(s, o[n])) } }

    function J(t, e) { this.c = t, this.a = e }

    function Q(t, e) { this.c = t, this.a = e }

    function $(t, e) { this.c = t, this.f = e, this.a = [] } var tt = Date.now || function() { return +new Date },
        et = !!window.FontFace;
    f.prototype.c = function(t) { for (var e = [], i = 0; i < arguments.length; i++) e.push(arguments[i].replace(/[\W_]+/g, "").toLowerCase()); return e.join(this.a) }, k.prototype.start = function() { var t = this.c.o.document,
            e = this,
            i = tt(),
            n = new Promise(function(n, s) {
                function o() { tt() - i >= e.f ? s() : t.fonts.load(v(e.a), e.h).then(function(t) { 1 <= t.length ? n() : setTimeout(o, 25) }, function() { s() }) } o() }),
            s = null,
            o = new Promise(function(t, i) { s = setTimeout(i, e.f) });
        Promise.race([o, n]).then(function() { s && (clearTimeout(s), s = null), e.g(e.a) }, function() { e.j(e.a) }) }; var it = { D: "serif", C: "sans-serif" },
        nt = null;
    M.prototype.start = function() { this.f.serif = this.j.a.offsetWidth, this.f["sans-serif"] = this.m.a.offsetWidth, this.A = tt(), G(this) }; var st = null;
    F.prototype.g = function(t) { var e = this.a;
        e.g && r(e.f, [e.a.c("wf", t.c, _(t).toString(), "active")], [e.a.c("wf", t.c, _(t).toString(), "loading"), e.a.c("wf", t.c, _(t).toString(), "inactive")]), x(e, "fontactive", t), this.m = !0, N(this) }, F.prototype.h = function(t) { var e = this.a; if (e.g) { var i = h(e.f, e.a.c("wf", t.c, _(t).toString(), "active")),
                n = [],
                s = [e.a.c("wf", t.c, _(t).toString(), "loading")];
            i || n.push(e.a.c("wf", t.c, _(t).toString(), "inactive")), r(e.f, n, s) } x(e, "fontinactive", t), N(this) }, j.prototype.load = function(t) { this.c = new n(this.j, t.context || this.j), this.g = !1 !== t.events, this.f = !1 !== t.classes, X(this, new C(this.c, t), t) }, W.prototype.load = function(t) {
        function e() { if (o["__mti_fntLst" + n]) { var i, s = o["__mti_fntLst" + n](),
                    a = []; if (s)
                    for (var r = 0; r < s.length; r++) { var h = s[r].fontfamily;
                        void 0 != s[r].fontStyle && void 0 != s[r].fontWeight ? (i = s[r].fontStyle + s[r].fontWeight, a.push(new y(h, i))) : a.push(new y(h)) } t(a) } else setTimeout(function() { e() }, 50) } var i = this,
            n = i.a.projectId,
            s = i.a.version; if (n) { var o = i.c.o;
            u(this.c, (i.a.api || "https://fast.fonts.net/jsapi") + "/" + n + ".js" + (s ? "?v=" + s : ""), function(s) { s ? t([]) : (o["__MonotypeConfiguration__" + n] = function() { return i.a }, e()) }).id = "__MonotypeAPIScript__" + n } else t([]) }, V.prototype.load = function(t) { var e, i, n = this.a.urls || [],
            s = this.a.families || [],
            o = this.a.testStrings || {},
            a = new p; for (e = 0, i = n.length; e < i; e++) c(this.c, n[e], d(a)); var r = []; for (e = 0, i = s.length; e < i; e++)
            if ((n = s[e].split(":"))[1])
                for (var h = n[1].split(","), l = 0; l < h.length; l += 1) r.push(new y(n[0], h[l]));
            else r.push(new y(n[0]));
        m(a, function() { t(r, o) }) }; var ot = "https://fonts.googleapis.com/css",
        at = { latin: "BESbswy", "latin-ext": "çöüğş", cyrillic: "йяЖ", greek: "αβΣ", khmer: "កខគ", Hanuman: "កខគ" },
        rt = { thin: "1", extralight: "2", "extra-light": "2", ultralight: "2", "ultra-light": "2", light: "3", regular: "4", book: "4", medium: "5", "semi-bold": "6", semibold: "6", "demi-bold": "6", demibold: "6", bold: "7", "extra-bold": "8", extrabold: "8", "ultra-bold": "8", ultrabold: "8", black: "9", heavy: "9", l: "3", r: "4", b: "7" },
        ht = { i: "i", italic: "i", n: "n", normal: "n" },
        lt = /^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/,
        ct = { Arimo: !0, Cousine: !0, Tinos: !0 };
    J.prototype.load = function(t) { var e = new p,
            i = this.c,
            n = new z(this.a.api, this.a.text),
            s = this.a.families;
        Y(n, s); var o = new q(s);
        Z(o), c(i, K(n), d(e)), m(e, function() { t(o.a, o.c, ct) }) }, Q.prototype.load = function(t) { var e = this.a.id,
            i = this.c.o;
        e ? u(this.c, (this.a.api || "https://use.typekit.net") + "/" + e + ".js", function(e) { if (e) t([]);
            else if (i.Typekit && i.Typekit.config && i.Typekit.config.fn) { e = i.Typekit.config.fn; for (var n = [], s = 0; s < e.length; s += 2)
                    for (var o = e[s], a = e[s + 1], r = 0; r < a.length; r++) n.push(new y(o, a[r])); try { i.Typekit.load({ events: !1, classes: !1, async: !0 }) } catch (t) {} t(n) } }, 2e3) : t([]) }, $.prototype.load = function(t) { var e = this.f.id,
            i = this.c.o,
            n = this;
        e ? (i.__webfontfontdeckmodule__ || (i.__webfontfontdeckmodule__ = {}), i.__webfontfontdeckmodule__[e] = function(e, i) { for (var s = 0, o = i.fonts.length; s < o; ++s) { var a = i.fonts[s];
                n.a.push(new y(a.name, w("font-weight:" + a.weight + ";font-style:" + a.style))) } t(n.a) }, u(this.c, (this.f.api || "https://f.fontdeck.com/s/css/js/") + l(this.c) + "/" + e + ".js", function(e) { e && t([]) })) : t([]) }; var ut = new j(window);
    ut.a.c.custom = function(t, e) { return new V(e, t) }, ut.a.c.fontdeck = function(t, e) { return new $(e, t) }, ut.a.c.monotype = function(t, e) { return new W(e, t) }, ut.a.c.typekit = function(t, e) { return new Q(e, t) }, ut.a.c.google = function(t, e) { return new J(e, t) }; var pt = { load: i(ut.load, ut) }; "function" == typeof define && define.amd ? define(function() { return pt }) : "undefined" != typeof module && module.exports ? module.exports = pt : (window.WebFont = pt, window.WebFontConfig && ut.load(window.WebFontConfig)) }();
var _gsScope = "undefined" != typeof module && module.exports && "undefined" != typeof global ? global : this || window;
(_gsScope._gsQueue || (_gsScope._gsQueue = [])).push(function() { "use strict";
        _gsScope._gsDefine("TweenMax", ["core.Animation", "core.SimpleTimeline", "TweenLite"], function(t, e, i) { var n = function(t) { var e, i = [],
                            n = t.length; for (e = 0; e !== n; i.push(t[e++])); return i },
                    s = function(t, e, i) { var n, s, o = t.cycle; for (n in o) s = o[n], t[n] = "function" == typeof s ? s(i, e[i]) : s[i % s.length];
                        delete t.cycle },
                    o = function(t, e, n) { i.call(this, t, e, n), this._cycle = 0, this._yoyo = !0 === this.vars.yoyo || !!this.vars.yoyoEase, this._repeat = this.vars.repeat || 0, this._repeatDelay = this.vars.repeatDelay || 0, this._repeat && this._uncache(!0), this.render = o.prototype.render },
                    a = i._internals,
                    r = a.isSelector,
                    h = a.isArray,
                    l = o.prototype = i.to({}, .1, {}),
                    c = [];
                o.version = "1.20.5", l.constructor = o, l.kill()._gc = !1, o.killTweensOf = o.killDelayedCallsTo = i.killTweensOf, o.getTweensOf = i.getTweensOf, o.lagSmoothing = i.lagSmoothing, o.ticker = i.ticker, o.render = i.render, l.invalidate = function() { return this._yoyo = !0 === this.vars.yoyo || !!this.vars.yoyoEase, this._repeat = this.vars.repeat || 0, this._repeatDelay = this.vars.repeatDelay || 0, this._yoyoEase = null, this._uncache(!0), i.prototype.invalidate.call(this) }, l.updateTo = function(t, e) { var n, s = this.ratio,
                        o = this.vars.immediateRender || t.immediateRender;
                    e && this._startTime < this._timeline._time && (this._startTime = this._timeline._time, this._uncache(!1), this._gc ? this._enabled(!0, !1) : this._timeline.insert(this, this._startTime - this._delay)); for (n in t) this.vars[n] = t[n]; if (this._initted || o)
                        if (e) this._initted = !1, o && this.render(0, !0, !0);
                        else if (this._gc && this._enabled(!0, !1), this._notifyPluginsOfEnabled && this._firstPT && i._onPluginEvent("_onDisable", this), this._time / this._duration > .998) { var a = this._totalTime;
                        this.render(0, !0, !1), this._initted = !1, this.render(a, !0, !1) } else if (this._initted = !1, this._init(), this._time > 0 || o)
                        for (var r, h = 1 / (1 - s), l = this._firstPT; l;) r = l.s + l.c, l.c *= h, l.s = r - l.c, l = l._next; return this }, l.render = function(t, e, n) { this._initted || 0 === this._duration && this.vars.repeat && this.invalidate(); var s, o, r, h, l, c, u, p, d, m = this._dirty ? this.totalDuration() : this._totalDuration,
                        g = this._time,
                        f = this._totalTime,
                        y = this._cycle,
                        v = this._duration,
                        b = this._rawPrevTime; if (t >= m - 1e-7 && t >= 0 ? (this._totalTime = m, this._cycle = this._repeat, this._yoyo && 0 != (1 & this._cycle) ? (this._time = 0, this.ratio = this._ease._calcEnd ? this._ease.getRatio(0) : 0) : (this._time = v, this.ratio = this._ease._calcEnd ? this._ease.getRatio(1) : 1), this._reversed || (s = !0, o = "onComplete", n = n || this._timeline.autoRemoveChildren), 0 === v && (this._initted || !this.vars.lazy || n) && (this._startTime === this._timeline._duration && (t = 0), (b < 0 || t <= 0 && t >= -1e-7 || 1e-10 === b && "isPause" !== this.data) && b !== t && (n = !0, b > 1e-10 && (o = "onReverseComplete")), this._rawPrevTime = p = !e || t || b === t ? t : 1e-10)) : t < 1e-7 ? (this._totalTime = this._time = this._cycle = 0, this.ratio = this._ease._calcEnd ? this._ease.getRatio(0) : 0, (0 !== f || 0 === v && b > 0) && (o = "onReverseComplete", s = this._reversed), t < 0 && (this._active = !1, 0 === v && (this._initted || !this.vars.lazy || n) && (b >= 0 && (n = !0), this._rawPrevTime = p = !e || t || b === t ? t : 1e-10)), this._initted || (n = !0)) : (this._totalTime = this._time = t, 0 !== this._repeat && (h = v + this._repeatDelay, this._cycle = this._totalTime / h >> 0, 0 !== this._cycle && this._cycle === this._totalTime / h && f <= t && this._cycle--, this._time = this._totalTime - this._cycle * h, this._yoyo && 0 != (1 & this._cycle) && (this._time = v - this._time, (d = this._yoyoEase || this.vars.yoyoEase) && (this._yoyoEase || (!0 !== d || this._initted ? this._yoyoEase = d = !0 === d ? this._ease : d instanceof Ease ? d : Ease.map[d] : (d = this.vars.ease, this._yoyoEase = d = d ? d instanceof Ease ? d : "function" == typeof d ? new Ease(d, this.vars.easeParams) : Ease.map[d] || i.defaultEase : i.defaultEase)), this.ratio = d ? 1 - d.getRatio((v - this._time) / v) : 0)), this._time > v ? this._time = v : this._time < 0 && (this._time = 0)), this._easeType && !d ? (l = this._time / v, c = this._easeType, u = this._easePower, (1 === c || 3 === c && l >= .5) && (l = 1 - l), 3 === c && (l *= 2), 1 === u ? l *= l : 2 === u ? l *= l * l : 3 === u ? l *= l * l * l : 4 === u && (l *= l * l * l * l), 1 === c ? this.ratio = 1 - l : 2 === c ? this.ratio = l : this._time / v < .5 ? this.ratio = l / 2 : this.ratio = 1 - l / 2) : d || (this.ratio = this._ease.getRatio(this._time / v))), g !== this._time || n || y !== this._cycle) { if (!this._initted) { if (this._init(), !this._initted || this._gc) return; if (!n && this._firstPT && (!1 !== this.vars.lazy && this._duration || this.vars.lazy && !this._duration)) return this._time = g, this._totalTime = f, this._rawPrevTime = b, this._cycle = y, a.lazyTweens.push(this), void(this._lazy = [t, e]);!this._time || s || d ? s && this._ease._calcEnd && !d && (this.ratio = this._ease.getRatio(0 === this._time ? 0 : 1)) : this.ratio = this._ease.getRatio(this._time / v) } for (!1 !== this._lazy && (this._lazy = !1), this._active || !this._paused && this._time !== g && t >= 0 && (this._active = !0), 0 === f && (2 === this._initted && t > 0 && this._init(), this._startAt && (t >= 0 ? this._startAt.render(t, !0, n) : o || (o = "_dummyGS")), this.vars.onStart && (0 === this._totalTime && 0 !== v || e || this._callback("onStart"))), r = this._firstPT; r;) r.f ? r.t[r.p](r.c * this.ratio + r.s) : r.t[r.p] = r.c * this.ratio + r.s, r = r._next;
                        this._onUpdate && (t < 0 && this._startAt && this._startTime && this._startAt.render(t, !0, n), e || (this._totalTime !== f || o) && this._callback("onUpdate")), this._cycle !== y && (e || this._gc || this.vars.onRepeat && this._callback("onRepeat")), o && (this._gc && !n || (t < 0 && this._startAt && !this._onUpdate && this._startTime && this._startAt.render(t, !0, n), s && (this._timeline.autoRemoveChildren && this._enabled(!1, !1), this._active = !1), !e && this.vars[o] && this._callback(o), 0 === v && 1e-10 === this._rawPrevTime && 1e-10 !== p && (this._rawPrevTime = 0))) } else f !== this._totalTime && this._onUpdate && (e || this._callback("onUpdate")) }, o.to = function(t, e, i) { return new o(t, e, i) }, o.from = function(t, e, i) { return i.runBackwards = !0, i.immediateRender = 0 != i.immediateRender, new o(t, e, i) }, o.fromTo = function(t, e, i, n) { return n.startAt = i, n.immediateRender = 0 != n.immediateRender && 0 != i.immediateRender, new o(t, e, n) }, o.staggerTo = o.allTo = function(t, e, a, l, u, p, d) { l = l || 0; var m, g, f, y, v = 0,
                        b = [],
                        _ = a.cycle,
                        S = a.startAt && a.startAt.cycle; for (h(t) || ("string" == typeof t && (t = i.selector(t) || t), r(t) && (t = n(t))), t = t || [], l < 0 && ((t = n(t)).reverse(), l *= -1), m = t.length - 1, f = 0; f <= m; f++) { g = {}; for (y in a) g[y] = a[y]; if (_ && (s(g, t, f), null != g.duration && (e = g.duration, delete g.duration)), S) { S = g.startAt = {}; for (y in a.startAt) S[y] = a.startAt[y];
                            s(g.startAt, t, f) } g.delay = v + (g.delay || 0), f === m && u && (g.onComplete = function() { a.onComplete && a.onComplete.apply(a.onCompleteScope || this, arguments), u.apply(d || a.callbackScope || this, p || c) }), b[f] = new o(t[f], e, g), v += l } return b }, o.staggerFrom = o.allFrom = function(t, e, i, n, s, a, r) { return i.runBackwards = !0, i.immediateRender = 0 != i.immediateRender, o.staggerTo(t, e, i, n, s, a, r) }, o.staggerFromTo = o.allFromTo = function(t, e, i, n, s, a, r, h) { return n.startAt = i, n.immediateRender = 0 != n.immediateRender && 0 != i.immediateRender, o.staggerTo(t, e, n, s, a, r, h) }, o.delayedCall = function(t, e, i, n, s) { return new o(e, 0, { delay: t, onComplete: e, onCompleteParams: i, callbackScope: n, onReverseComplete: e, onReverseCompleteParams: i, immediateRender: !1, useFrames: s, overwrite: 0 }) }, o.set = function(t, e) { return new o(t, 0, e) }, o.isTweening = function(t) { return i.getTweensOf(t, !0).length > 0 }; var u = function(t, e) { for (var n = [], s = 0, o = t._first; o;) o instanceof i ? n[s++] = o : (e && (n[s++] = o), s = (n = n.concat(u(o, e))).length), o = o._next; return n },
                    p = o.getAllTweens = function(e) { return u(t._rootTimeline, e).concat(u(t._rootFramesTimeline, e)) };
                o.killAll = function(t, i, n, s) { null == i && (i = !0), null == n && (n = !0); var o, a, r, h = p(0 != s),
                        l = h.length,
                        c = i && n && s; for (r = 0; r < l; r++) a = h[r], (c || a instanceof e || (o = a.target === a.vars.onComplete) && n || i && !o) && (t ? a.totalTime(a._reversed ? 0 : a.totalDuration()) : a._enabled(!1, !1)) }, o.killChildTweensOf = function(t, e) { if (null != t) { var s, l, c, u, p, d = a.tweenLookup; if ("string" == typeof t && (t = i.selector(t) || t), r(t) && (t = n(t)), h(t))
                            for (u = t.length; --u > -1;) o.killChildTweensOf(t[u], e);
                        else { s = []; for (c in d)
                                for (l = d[c].target.parentNode; l;) l === t && (s = s.concat(d[c].tweens)), l = l.parentNode; for (p = s.length, u = 0; u < p; u++) e && s[u].totalTime(s[u].totalDuration()), s[u]._enabled(!1, !1) } } }; var d = function(t, i, n, s) { i = !1 !== i, n = !1 !== n; for (var o, a, r = p(s = !1 !== s), h = i && n && s, l = r.length; --l > -1;) a = r[l], (h || a instanceof e || (o = a.target === a.vars.onComplete) && n || i && !o) && a.paused(t) }; return o.pauseAll = function(t, e, i) { d(!0, t, e, i) }, o.resumeAll = function(t, e, i) { d(!1, t, e, i) }, o.globalTimeScale = function(e) { var n = t._rootTimeline,
                        s = i.ticker.time; return arguments.length ? (e = e || 1e-10, n._startTime = s - (s - n._startTime) * n._timeScale / e, n = t._rootFramesTimeline, s = i.ticker.frame, n._startTime = s - (s - n._startTime) * n._timeScale / e, n._timeScale = t._rootTimeline._timeScale = e, e) : n._timeScale }, l.progress = function(t, e) { return arguments.length ? this.totalTime(this.duration() * (this._yoyo && 0 != (1 & this._cycle) ? 1 - t : t) + this._cycle * (this._duration + this._repeatDelay), e) : this._time / this.duration() }, l.totalProgress = function(t, e) { return arguments.length ? this.totalTime(this.totalDuration() * t, e) : this._totalTime / this.totalDuration() }, l.time = function(t, e) { return arguments.length ? (this._dirty && this.totalDuration(), t > this._duration && (t = this._duration), this._yoyo && 0 != (1 & this._cycle) ? t = this._duration - t + this._cycle * (this._duration + this._repeatDelay) : 0 !== this._repeat && (t += this._cycle * (this._duration + this._repeatDelay)), this.totalTime(t, e)) : this._time }, l.duration = function(e) { return arguments.length ? t.prototype.duration.call(this, e) : this._duration }, l.totalDuration = function(t) { return arguments.length ? -1 === this._repeat ? this : this.duration((t - this._repeat * this._repeatDelay) / (this._repeat + 1)) : (this._dirty && (this._totalDuration = -1 === this._repeat ? 999999999999 : this._duration * (this._repeat + 1) + this._repeatDelay * this._repeat, this._dirty = !1), this._totalDuration) }, l.repeat = function(t) { return arguments.length ? (this._repeat = t, this._uncache(!0)) : this._repeat }, l.repeatDelay = function(t) { return arguments.length ? (this._repeatDelay = t, this._uncache(!0)) : this._repeatDelay }, l.yoyo = function(t) { return arguments.length ? (this._yoyo = t, this) : this._yoyo }, o }, !0), _gsScope._gsDefine("TimelineLite", ["core.Animation", "core.SimpleTimeline", "TweenLite"], function(t, e, i) { var n = function(t) { e.call(this, t), this._labels = {}, this.autoRemoveChildren = !0 === this.vars.autoRemoveChildren, this.smoothChildTiming = !0 === this.vars.smoothChildTiming, this._sortChildren = !0, this._onUpdate = this.vars.onUpdate; var i, n, s = this.vars; for (n in s) i = s[n], r(i) && -1 !== i.join("").indexOf("{self}") && (s[n] = this._swapSelfInParams(i));
                        r(s.tweens) && this.add(s.tweens, 0, s.align, s.stagger) },
                    s = i._internals,
                    o = n._internals = {},
                    a = s.isSelector,
                    r = s.isArray,
                    h = s.lazyTweens,
                    l = s.lazyRender,
                    c = _gsScope._gsDefine.globals,
                    u = function(t) { var e, i = {}; for (e in t) i[e] = t[e]; return i },
                    p = function(t, e, i) { var n, s, o = t.cycle; for (n in o) s = o[n], t[n] = "function" == typeof s ? s(i, e[i]) : s[i % s.length];
                        delete t.cycle },
                    d = o.pauseCallback = function() {},
                    m = function(t) { var e, i = [],
                            n = t.length; for (e = 0; e !== n; i.push(t[e++])); return i },
                    g = n.prototype = new e; return n.version = "1.20.4", g.constructor = n, g.kill()._gc = g._forcingPlayhead = g._hasPause = !1, g.to = function(t, e, n, s) { var o = n.repeat && c.TweenMax || i; return e ? this.add(new o(t, e, n), s) : this.set(t, n, s) }, g.from = function(t, e, n, s) { return this.add((n.repeat && c.TweenMax || i).from(t, e, n), s) }, g.fromTo = function(t, e, n, s, o) { var a = s.repeat && c.TweenMax || i; return e ? this.add(a.fromTo(t, e, n, s), o) : this.set(t, s, o) }, g.staggerTo = function(t, e, s, o, r, h, l, c) { var d, g, f = new n({ onComplete: h, onCompleteParams: l, callbackScope: c, smoothChildTiming: this.smoothChildTiming }),
                        y = s.cycle; for ("string" == typeof t && (t = i.selector(t) || t), a(t = t || []) && (t = m(t)), (o = o || 0) < 0 && ((t = m(t)).reverse(), o *= -1), g = 0; g < t.length; g++)(d = u(s)).startAt && (d.startAt = u(d.startAt), d.startAt.cycle && p(d.startAt, t, g)), y && (p(d, t, g), null != d.duration && (e = d.duration, delete d.duration)), f.to(t[g], e, d, g * o); return this.add(f, r) }, g.staggerFrom = function(t, e, i, n, s, o, a, r) { return i.immediateRender = 0 != i.immediateRender, i.runBackwards = !0, this.staggerTo(t, e, i, n, s, o, a, r) }, g.staggerFromTo = function(t, e, i, n, s, o, a, r, h) { return n.startAt = i, n.immediateRender = 0 != n.immediateRender && 0 != i.immediateRender, this.staggerTo(t, e, n, s, o, a, r, h) }, g.call = function(t, e, n, s) { return this.add(i.delayedCall(0, t, e, n), s) }, g.set = function(t, e, n) { return n = this._parseTimeOrLabel(n, 0, !0), null == e.immediateRender && (e.immediateRender = n === this._time && !this._paused), this.add(new i(t, 0, e), n) }, n.exportRoot = function(t, e) { null == (t = t || {}).smoothChildTiming && (t.smoothChildTiming = !0); var s, o, a, r, h = new n(t),
                        l = h._timeline; for (null == e && (e = !0), l._remove(h, !0), h._startTime = 0, h._rawPrevTime = h._time = h._totalTime = l._time, a = l._first; a;) r = a._next, e && a instanceof i && a.target === a.vars.onComplete || ((o = a._startTime - a._delay) < 0 && (s = 1), h.add(a, o)), a = r; return l.add(h, 0), s && h.totalDuration(), h }, g.add = function(s, o, a, h) { var l, c, u, p, d, m; if ("number" != typeof o && (o = this._parseTimeOrLabel(o, 0, !0, s)), !(s instanceof t)) { if (s instanceof Array || s && s.push && r(s)) { for (a = a || "normal", h = h || 0, l = o, c = s.length, u = 0; u < c; u++) r(p = s[u]) && (p = new n({ tweens: p })), this.add(p, l), "string" != typeof p && "function" != typeof p && ("sequence" === a ? l = p._startTime + p.totalDuration() / p._timeScale : "start" === a && (p._startTime -= p.delay())), l += h; return this._uncache(!0) } if ("string" == typeof s) return this.addLabel(s, o); if ("function" != typeof s) throw "Cannot add " + s + " into the timeline; it is not a tween, timeline, function, or string.";
                        s = i.delayedCall(0, s) } if (e.prototype.add.call(this, s, o), s._time && s.render((this.rawTime() - s._startTime) * s._timeScale, !1, !1), (this._gc || this._time === this._duration) && !this._paused && this._duration < this.duration())
                        for (m = (d = this).rawTime() > s._startTime; d._timeline;) m && d._timeline.smoothChildTiming ? d.totalTime(d._totalTime, !0) : d._gc && d._enabled(!0, !1), d = d._timeline; return this }, g.remove = function(e) { if (e instanceof t) { this._remove(e, !1); var i = e._timeline = e.vars.useFrames ? t._rootFramesTimeline : t._rootTimeline; return e._startTime = (e._paused ? e._pauseTime : i._time) - (e._reversed ? e.totalDuration() - e._totalTime : e._totalTime) / e._timeScale, this } if (e instanceof Array || e && e.push && r(e)) { for (var n = e.length; --n > -1;) this.remove(e[n]); return this } return "string" == typeof e ? this.removeLabel(e) : this.kill(null, e) }, g._remove = function(t, i) { return e.prototype._remove.call(this, t, i), this._last ? this._time > this.duration() && (this._time = this._duration, this._totalTime = this._totalDuration) : this._time = this._totalTime = this._duration = this._totalDuration = 0, this }, g.append = function(t, e) { return this.add(t, this._parseTimeOrLabel(null, e, !0, t)) }, g.insert = g.insertMultiple = function(t, e, i, n) { return this.add(t, e || 0, i, n) }, g.appendMultiple = function(t, e, i, n) { return this.add(t, this._parseTimeOrLabel(null, e, !0, t), i, n) }, g.addLabel = function(t, e) { return this._labels[t] = this._parseTimeOrLabel(e), this }, g.addPause = function(t, e, n, s) { var o = i.delayedCall(0, d, n, s || this); return o.vars.onComplete = o.vars.onReverseComplete = e, o.data = "isPause", this._hasPause = !0, this.add(o, t) }, g.removeLabel = function(t) { return delete this._labels[t], this }, g.getLabelTime = function(t) { return null != this._labels[t] ? this._labels[t] : -1 }, g._parseTimeOrLabel = function(e, i, n, s) { var o, a; if (s instanceof t && s.timeline === this) this.remove(s);
                    else if (s && (s instanceof Array || s.push && r(s)))
                        for (a = s.length; --a > -1;) s[a] instanceof t && s[a].timeline === this && this.remove(s[a]); if (o = "number" != typeof e || i ? this.duration() > 99999999999 ? this.recent().endTime(!1) : this._duration : 0, "string" == typeof i) return this._parseTimeOrLabel(i, n && "number" == typeof e && null == this._labels[i] ? e - o : 0, n); if (i = i || 0, "string" != typeof e || !isNaN(e) && null == this._labels[e]) null == e && (e = o);
                    else { if (-1 === (a = e.indexOf("="))) return null == this._labels[e] ? n ? this._labels[e] = o + i : i : this._labels[e] + i;
                        i = parseInt(e.charAt(a - 1) + "1", 10) * Number(e.substr(a + 1)), e = a > 1 ? this._parseTimeOrLabel(e.substr(0, a - 1), 0, n) : o } return Number(e) + i }, g.seek = function(t, e) { return this.totalTime("number" == typeof t ? t : this._parseTimeOrLabel(t), !1 !== e) }, g.stop = function() { return this.paused(!0) }, g.gotoAndPlay = function(t, e) { return this.play(t, e) }, g.gotoAndStop = function(t, e) { return this.pause(t, e) }, g.render = function(t, e, i) { this._gc && this._enabled(!0, !1); var n, s, o, a, r, c, u, p = this._time,
                        d = this._dirty ? this.totalDuration() : this._totalDuration,
                        m = this._startTime,
                        g = this._timeScale,
                        f = this._paused; if (p !== this._time && (t += this._time - p), t >= d - 1e-7 && t >= 0) this._totalTime = this._time = d, this._reversed || this._hasPausedChild() || (s = !0, a = "onComplete", r = !!this._timeline.autoRemoveChildren, 0 === this._duration && (t <= 0 && t >= -1e-7 || this._rawPrevTime < 0 || 1e-10 === this._rawPrevTime) && this._rawPrevTime !== t && this._first && (r = !0, this._rawPrevTime > 1e-10 && (a = "onReverseComplete"))), this._rawPrevTime = this._duration || !e || t || this._rawPrevTime === t ? t : 1e-10, t = d + 1e-4;
                    else if (t < 1e-7)
                        if (this._totalTime = this._time = 0, (0 !== p || 0 === this._duration && 1e-10 !== this._rawPrevTime && (this._rawPrevTime > 0 || t < 0 && this._rawPrevTime >= 0)) && (a = "onReverseComplete", s = this._reversed), t < 0) this._active = !1, this._timeline.autoRemoveChildren && this._reversed ? (r = s = !0, a = "onReverseComplete") : this._rawPrevTime >= 0 && this._first && (r = !0), this._rawPrevTime = t;
                        else { if (this._rawPrevTime = this._duration || !e || t || this._rawPrevTime === t ? t : 1e-10, 0 === t && s)
                                for (n = this._first; n && 0 === n._startTime;) n._duration || (s = !1), n = n._next;
                            t = 0, this._initted || (r = !0) } else { if (this._hasPause && !this._forcingPlayhead && !e) { if (t >= p)
                                for (n = this._first; n && n._startTime <= t && !c;) n._duration || "isPause" !== n.data || n.ratio || 0 === n._startTime && 0 === this._rawPrevTime || (c = n), n = n._next;
                            else
                                for (n = this._last; n && n._startTime >= t && !c;) n._duration || "isPause" === n.data && n._rawPrevTime > 0 && (c = n), n = n._prev;
                            c && (this._time = t = c._startTime, this._totalTime = t + this._cycle * (this._totalDuration + this._repeatDelay)) } this._totalTime = this._time = this._rawPrevTime = t } if (this._time !== p && this._first || i || r || c) { if (this._initted || (this._initted = !0), this._active || !this._paused && this._time !== p && t > 0 && (this._active = !0), 0 === p && this.vars.onStart && (0 === this._time && this._duration || e || this._callback("onStart")), (u = this._time) >= p)
                            for (n = this._first; n && (o = n._next, u === this._time && (!this._paused || f));)(n._active || n._startTime <= u && !n._paused && !n._gc) && (c === n && this.pause(), n._reversed ? n.render((n._dirty ? n.totalDuration() : n._totalDuration) - (t - n._startTime) * n._timeScale, e, i) : n.render((t - n._startTime) * n._timeScale, e, i)), n = o;
                        else
                            for (n = this._last; n && (o = n._prev, u === this._time && (!this._paused || f));) { if (n._active || n._startTime <= p && !n._paused && !n._gc) { if (c === n) { for (c = n._prev; c && c.endTime() > this._time;) c.render(c._reversed ? c.totalDuration() - (t - c._startTime) * c._timeScale : (t - c._startTime) * c._timeScale, e, i), c = c._prev;
                                        c = null, this.pause() } n._reversed ? n.render((n._dirty ? n.totalDuration() : n._totalDuration) - (t - n._startTime) * n._timeScale, e, i) : n.render((t - n._startTime) * n._timeScale, e, i) } n = o } this._onUpdate && (e || (h.length && l(), this._callback("onUpdate"))), a && (this._gc || m !== this._startTime && g === this._timeScale || (0 === this._time || d >= this.totalDuration()) && (s && (h.length && l(), this._timeline.autoRemoveChildren && this._enabled(!1, !1), this._active = !1), !e && this.vars[a] && this._callback(a))) } }, g._hasPausedChild = function() { for (var t = this._first; t;) { if (t._paused || t instanceof n && t._hasPausedChild()) return !0;
                        t = t._next } return !1 }, g.getChildren = function(t, e, n, s) { s = s || -9999999999; for (var o = [], a = this._first, r = 0; a;) a._startTime < s || (a instanceof i ? !1 !== e && (o[r++] = a) : (!1 !== n && (o[r++] = a), !1 !== t && (r = (o = o.concat(a.getChildren(!0, e, n))).length))), a = a._next; return o }, g.getTweensOf = function(t, e) { var n, s, o = this._gc,
                        a = [],
                        r = 0; for (o && this._enabled(!0, !0), s = (n = i.getTweensOf(t)).length; --s > -1;)(n[s].timeline === this || e && this._contains(n[s])) && (a[r++] = n[s]); return o && this._enabled(!1, !0), a }, g.recent = function() { return this._recent }, g._contains = function(t) { for (var e = t.timeline; e;) { if (e === this) return !0;
                        e = e.timeline } return !1 }, g.shiftChildren = function(t, e, i) { i = i || 0; for (var n, s = this._first, o = this._labels; s;) s._startTime >= i && (s._startTime += t), s = s._next; if (e)
                        for (n in o) o[n] >= i && (o[n] += t); return this._uncache(!0) }, g._kill = function(t, e) { if (!t && !e) return this._enabled(!1, !1); for (var i = e ? this.getTweensOf(e) : this.getChildren(!0, !0, !1), n = i.length, s = !1; --n > -1;) i[n]._kill(t, e) && (s = !0); return s }, g.clear = function(t) { var e = this.getChildren(!1, !0, !0),
                        i = e.length; for (this._time = this._totalTime = 0; --i > -1;) e[i]._enabled(!1, !1); return !1 !== t && (this._labels = {}), this._uncache(!0) }, g.invalidate = function() { for (var e = this._first; e;) e.invalidate(), e = e._next; return t.prototype.invalidate.call(this) }, g._enabled = function(t, i) { if (t === this._gc)
                        for (var n = this._first; n;) n._enabled(t, !0), n = n._next; return e.prototype._enabled.call(this, t, i) }, g.totalTime = function(e, i, n) { this._forcingPlayhead = !0; var s = t.prototype.totalTime.apply(this, arguments); return this._forcingPlayhead = !1, s }, g.duration = function(t) { return arguments.length ? (0 !== this.duration() && 0 !== t && this.timeScale(this._duration / t), this) : (this._dirty && this.totalDuration(), this._duration) }, g.totalDuration = function(t) { if (!arguments.length) { if (this._dirty) { for (var e, i, n = 0, s = this._last, o = 999999999999; s;) e = s._prev, s._dirty && s.totalDuration(), s._startTime > o && this._sortChildren && !s._paused && !this._calculatingDuration ? (this._calculatingDuration = 1, this.add(s, s._startTime - s._delay), this._calculatingDuration = 0) : o = s._startTime, s._startTime < 0 && !s._paused && (n -= s._startTime, this._timeline.smoothChildTiming && (this._startTime += s._startTime / this._timeScale, this._time -= s._startTime, this._totalTime -= s._startTime, this._rawPrevTime -= s._startTime), this.shiftChildren(-s._startTime, !1, -9999999999), o = 0), (i = s._startTime + s._totalDuration / s._timeScale) > n && (n = i), s = e;
                            this._duration = this._totalDuration = n, this._dirty = !1 } return this._totalDuration } return t && this.totalDuration() ? this.timeScale(this._totalDuration / t) : this }, g.paused = function(e) { if (!e)
                        for (var i = this._first, n = this._time; i;) i._startTime === n && "isPause" === i.data && (i._rawPrevTime = 0), i = i._next; return t.prototype.paused.apply(this, arguments) }, g.usesFrames = function() { for (var e = this._timeline; e._timeline;) e = e._timeline; return e === t._rootFramesTimeline }, g.rawTime = function(t) { return t && (this._paused || this._repeat && this.time() > 0 && this.totalProgress() < 1) ? this._totalTime % (this._duration + this._repeatDelay) : this._paused ? this._totalTime : (this._timeline.rawTime(t) - this._startTime) * this._timeScale }, n }, !0), _gsScope._gsDefine("TimelineMax", ["TimelineLite", "TweenLite", "easing.Ease"], function(t, e, i) { var n = function(e) { t.call(this, e), this._repeat = this.vars.repeat || 0, this._repeatDelay = this.vars.repeatDelay || 0, this._cycle = 0, this._yoyo = !0 === this.vars.yoyo, this._dirty = !0 },
                    s = e._internals,
                    o = s.lazyTweens,
                    a = s.lazyRender,
                    r = _gsScope._gsDefine.globals,
                    h = new i(null, null, 1, 0),
                    l = n.prototype = new t; return l.constructor = n, l.kill()._gc = !1, n.version = "1.20.4", l.invalidate = function() { return this._yoyo = !0 === this.vars.yoyo, this._repeat = this.vars.repeat || 0, this._repeatDelay = this.vars.repeatDelay || 0, this._uncache(!0), t.prototype.invalidate.call(this) }, l.addCallback = function(t, i, n, s) { return this.add(e.delayedCall(0, t, n, s), i) }, l.removeCallback = function(t, e) { if (t)
                        if (null == e) this._kill(null, t);
                        else
                            for (var i = this.getTweensOf(t, !1), n = i.length, s = this._parseTimeOrLabel(e); --n > -1;) i[n]._startTime === s && i[n]._enabled(!1, !1); return this }, l.removePause = function(e) { return this.removeCallback(t._internals.pauseCallback, e) }, l.tweenTo = function(t, i) { i = i || {}; var n, s, o, a = { ease: h, useFrames: this.usesFrames(), immediateRender: !1, lazy: !1 },
                        l = i.repeat && r.TweenMax || e; for (s in i) a[s] = i[s]; return a.time = this._parseTimeOrLabel(t), n = Math.abs(Number(a.time) - this._time) / this._timeScale || .001, o = new l(this, n, a), a.onStart = function() { o.target.paused(!0), o.vars.time === o.target.time() || n !== o.duration() || o.isFromTo || o.duration(Math.abs(o.vars.time - o.target.time()) / o.target._timeScale).render(o.time(), !0, !0), i.onStart && i.onStart.apply(i.onStartScope || i.callbackScope || o, i.onStartParams || []) }, o }, l.tweenFromTo = function(t, e, i) { i = i || {}, t = this._parseTimeOrLabel(t), i.startAt = { onComplete: this.seek, onCompleteParams: [t], callbackScope: this }, i.immediateRender = !1 !== i.immediateRender; var n = this.tweenTo(e, i); return n.isFromTo = 1, n.duration(Math.abs(n.vars.time - t) / this._timeScale || .001) }, l.render = function(t, e, i) { this._gc && this._enabled(!0, !1); var n, s, r, h, l, c, u, p, d = this._time,
                        m = this._dirty ? this.totalDuration() : this._totalDuration,
                        g = this._duration,
                        f = this._totalTime,
                        y = this._startTime,
                        v = this._timeScale,
                        b = this._rawPrevTime,
                        _ = this._paused,
                        S = this._cycle; if (d !== this._time && (t += this._time - d), t >= m - 1e-7 && t >= 0) this._locked || (this._totalTime = m, this._cycle = this._repeat), this._reversed || this._hasPausedChild() || (s = !0, h = "onComplete", l = !!this._timeline.autoRemoveChildren, 0 === this._duration && (t <= 0 && t >= -1e-7 || b < 0 || 1e-10 === b) && b !== t && this._first && (l = !0, b > 1e-10 && (h = "onReverseComplete"))), this._rawPrevTime = this._duration || !e || t || this._rawPrevTime === t ? t : 1e-10, this._yoyo && 0 != (1 & this._cycle) ? this._time = t = 0 : (this._time = g, t = g + 1e-4);
                    else if (t < 1e-7)
                        if (this._locked || (this._totalTime = this._cycle = 0), this._time = 0, (0 !== d || 0 === g && 1e-10 !== b && (b > 0 || t < 0 && b >= 0) && !this._locked) && (h = "onReverseComplete", s = this._reversed), t < 0) this._active = !1, this._timeline.autoRemoveChildren && this._reversed ? (l = s = !0, h = "onReverseComplete") : b >= 0 && this._first && (l = !0), this._rawPrevTime = t;
                        else { if (this._rawPrevTime = g || !e || t || this._rawPrevTime === t ? t : 1e-10, 0 === t && s)
                                for (n = this._first; n && 0 === n._startTime;) n._duration || (s = !1), n = n._next;
                            t = 0, this._initted || (l = !0) } else if (0 === g && b < 0 && (l = !0), this._time = this._rawPrevTime = t, this._locked || (this._totalTime = t, 0 !== this._repeat && (c = g + this._repeatDelay, this._cycle = this._totalTime / c >> 0, 0 !== this._cycle && this._cycle === this._totalTime / c && f <= t && this._cycle--, this._time = this._totalTime - this._cycle * c, this._yoyo && 0 != (1 & this._cycle) && (this._time = g - this._time), this._time > g ? (this._time = g, t = g + 1e-4) : this._time < 0 ? this._time = t = 0 : t = this._time)), this._hasPause && !this._forcingPlayhead && !e) { if ((t = this._time) >= d || this._repeat && S !== this._cycle)
                            for (n = this._first; n && n._startTime <= t && !u;) n._duration || "isPause" !== n.data || n.ratio || 0 === n._startTime && 0 === this._rawPrevTime || (u = n), n = n._next;
                        else
                            for (n = this._last; n && n._startTime >= t && !u;) n._duration || "isPause" === n.data && n._rawPrevTime > 0 && (u = n), n = n._prev;
                        u && u._startTime < g && (this._time = t = u._startTime, this._totalTime = t + this._cycle * (this._totalDuration + this._repeatDelay)) } if (this._cycle !== S && !this._locked) { var w = this._yoyo && 0 != (1 & S),
                            C = w === (this._yoyo && 0 != (1 & this._cycle)),
                            A = this._totalTime,
                            T = this._cycle,
                            x = this._rawPrevTime,
                            P = this._time; if (this._totalTime = S * g, this._cycle < S ? w = !w : this._totalTime += g, this._time = d, this._rawPrevTime = 0 === g ? b - 1e-4 : b, this._cycle = S, this._locked = !0, d = w ? 0 : g, this.render(d, e, 0 === g), e || this._gc || this.vars.onRepeat && (this._cycle = T, this._locked = !1, this._callback("onRepeat")), d !== this._time) return; if (C && (this._cycle = S, this._locked = !0, d = w ? g + 1e-4 : -1e-4, this.render(d, !0, !1)), this._locked = !1, this._paused && !_) return;
                        this._time = P, this._totalTime = A, this._cycle = T, this._rawPrevTime = x } if (this._time !== d && this._first || i || l || u) { if (this._initted || (this._initted = !0), this._active || !this._paused && this._totalTime !== f && t > 0 && (this._active = !0), 0 === f && this.vars.onStart && (0 === this._totalTime && this._totalDuration || e || this._callback("onStart")), (p = this._time) >= d)
                            for (n = this._first; n && (r = n._next, p === this._time && (!this._paused || _));)(n._active || n._startTime <= this._time && !n._paused && !n._gc) && (u === n && this.pause(), n._reversed ? n.render((n._dirty ? n.totalDuration() : n._totalDuration) - (t - n._startTime) * n._timeScale, e, i) : n.render((t - n._startTime) * n._timeScale, e, i)), n = r;
                        else
                            for (n = this._last; n && (r = n._prev, p === this._time && (!this._paused || _));) { if (n._active || n._startTime <= d && !n._paused && !n._gc) { if (u === n) { for (u = n._prev; u && u.endTime() > this._time;) u.render(u._reversed ? u.totalDuration() - (t - u._startTime) * u._timeScale : (t - u._startTime) * u._timeScale, e, i), u = u._prev;
                                        u = null, this.pause() } n._reversed ? n.render((n._dirty ? n.totalDuration() : n._totalDuration) - (t - n._startTime) * n._timeScale, e, i) : n.render((t - n._startTime) * n._timeScale, e, i) } n = r } this._onUpdate && (e || (o.length && a(), this._callback("onUpdate"))), h && (this._locked || this._gc || y !== this._startTime && v === this._timeScale || (0 === this._time || m >= this.totalDuration()) && (s && (o.length && a(), this._timeline.autoRemoveChildren && this._enabled(!1, !1), this._active = !1), !e && this.vars[h] && this._callback(h))) } else f !== this._totalTime && this._onUpdate && (e || this._callback("onUpdate")) }, l.getActive = function(t, e, i) { null == t && (t = !0), null == e && (e = !0), null == i && (i = !1); var n, s, o = [],
                        a = this.getChildren(t, e, i),
                        r = 0,
                        h = a.length; for (n = 0; n < h; n++)(s = a[n]).isActive() && (o[r++] = s); return o }, l.getLabelAfter = function(t) { t || 0 !== t && (t = this._time); var e, i = this.getLabelsArray(),
                        n = i.length; for (e = 0; e < n; e++)
                        if (i[e].time > t) return i[e].name; return null }, l.getLabelBefore = function(t) { null == t && (t = this._time); for (var e = this.getLabelsArray(), i = e.length; --i > -1;)
                        if (e[i].time < t) return e[i].name; return null }, l.getLabelsArray = function() { var t, e = [],
                        i = 0; for (t in this._labels) e[i++] = { time: this._labels[t], name: t }; return e.sort(function(t, e) { return t.time - e.time }), e }, l.invalidate = function() { return this._locked = !1, t.prototype.invalidate.call(this) }, l.progress = function(t, e) { return arguments.length ? this.totalTime(this.duration() * (this._yoyo && 0 != (1 & this._cycle) ? 1 - t : t) + this._cycle * (this._duration + this._repeatDelay), e) : this._time / this.duration() || 0 }, l.totalProgress = function(t, e) { return arguments.length ? this.totalTime(this.totalDuration() * t, e) : this._totalTime / this.totalDuration() || 0 }, l.totalDuration = function(e) { return arguments.length ? -1 !== this._repeat && e ? this.timeScale(this.totalDuration() / e) : this : (this._dirty && (t.prototype.totalDuration.call(this), this._totalDuration = -1 === this._repeat ? 999999999999 : this._duration * (this._repeat + 1) + this._repeatDelay * this._repeat), this._totalDuration) }, l.time = function(t, e) { return arguments.length ? (this._dirty && this.totalDuration(), t > this._duration && (t = this._duration), this._yoyo && 0 != (1 & this._cycle) ? t = this._duration - t + this._cycle * (this._duration + this._repeatDelay) : 0 !== this._repeat && (t += this._cycle * (this._duration + this._repeatDelay)), this.totalTime(t, e)) : this._time }, l.repeat = function(t) { return arguments.length ? (this._repeat = t, this._uncache(!0)) : this._repeat }, l.repeatDelay = function(t) { return arguments.length ? (this._repeatDelay = t, this._uncache(!0)) : this._repeatDelay }, l.yoyo = function(t) { return arguments.length ? (this._yoyo = t, this) : this._yoyo }, l.currentLabel = function(t) { return arguments.length ? this.seek(t, !0) : this.getLabelBefore(this._time + 1e-8) }, n }, !0),
            function() { var t = 180 / Math.PI,
                    e = [],
                    i = [],
                    n = [],
                    s = {},
                    o = _gsScope._gsDefine.globals,
                    a = function(t, e, i, n) { i === n && (i = n - (n - e) / 1e6), t === e && (e = t + (i - t) / 1e6), this.a = t, this.b = e, this.c = i, this.d = n, this.da = n - t, this.ca = i - t, this.ba = e - t },
                    r = function(t, e, i, n) { var s = { a: t },
                            o = {},
                            a = {},
                            r = { c: n },
                            h = (t + e) / 2,
                            l = (e + i) / 2,
                            c = (i + n) / 2,
                            u = (h + l) / 2,
                            p = (l + c) / 2,
                            d = (p - u) / 8; return s.b = h + (t - h) / 4, o.b = u + d, s.c = o.a = (s.b + o.b) / 2, o.c = a.a = (u + p) / 2, a.b = p - d, r.b = c + (n - c) / 4, a.c = r.a = (a.b + r.b) / 2, [s, o, a, r] },
                    h = function(t, s, o, a, h) { var l, c, u, p, d, m, g, f, y, v, b, _, S, w = t.length - 1,
                            C = 0,
                            A = t[0].a; for (l = 0; l < w; l++) c = (d = t[C]).a, u = d.d, p = t[C + 1].d, h ? (b = e[l], S = ((_ = i[l]) + b) * s * .25 / (a ? .5 : n[l] || .5), f = u - ((m = u - (u - c) * (a ? .5 * s : 0 !== b ? S / b : 0)) + (((g = u + (p - u) * (a ? .5 * s : 0 !== _ ? S / _ : 0)) - m) * (3 * b / (b + _) + .5) / 4 || 0))) : f = u - ((m = u - (u - c) * s * .5) + (g = u + (p - u) * s * .5)) / 2, m += f, g += f, d.c = y = m, d.b = 0 !== l ? A : A = d.a + .6 * (d.c - d.a), d.da = u - c, d.ca = y - c, d.ba = A - c, o ? (v = r(c, A, y, u), t.splice(C, 1, v[0], v[1], v[2], v[3]), C += 4) : C++, A = g;
                        (d = t[C]).b = A, d.c = A + .4 * (d.d - A), d.da = d.d - d.a, d.ca = d.c - d.a, d.ba = A - d.a, o && (v = r(d.a, A, d.c, d.d), t.splice(C, 1, v[0], v[1], v[2], v[3])) },
                    l = function(t, n, s, o) { var r, h, l, c, u, p, d = []; if (o)
                            for (h = (t = [o].concat(t)).length; --h > -1;) "string" == typeof(p = t[h][n]) && "=" === p.charAt(1) && (t[h][n] = o[n] + Number(p.charAt(0) + p.substr(2))); if ((r = t.length - 2) < 0) return d[0] = new a(t[0][n], 0, 0, t[0][n]), d; for (h = 0; h < r; h++) l = t[h][n], c = t[h + 1][n], d[h] = new a(l, 0, 0, c), s && (u = t[h + 2][n], e[h] = (e[h] || 0) + (c - l) * (c - l), i[h] = (i[h] || 0) + (u - c) * (u - c)); return d[h] = new a(t[h][n], 0, 0, t[h + 1][n]), d },
                    c = function(t, o, a, r, c, u) { var p, d, m, g, f, y, v, b, _ = {},
                            S = [],
                            w = u || t[0];
                        c = "string" == typeof c ? "," + c + "," : ",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,", null == o && (o = 1); for (d in t[0]) S.push(d); if (t.length > 1) { for (b = t[t.length - 1], v = !0, p = S.length; --p > -1;)
                                if (d = S[p], Math.abs(w[d] - b[d]) > .05) { v = !1; break } v && (t = t.concat(), u && t.unshift(u), t.push(t[1]), u = t[t.length - 3]) } for (e.length = i.length = n.length = 0, p = S.length; --p > -1;) d = S[p], s[d] = -1 !== c.indexOf("," + d + ","), _[d] = l(t, d, s[d], u); for (p = e.length; --p > -1;) e[p] = Math.sqrt(e[p]), i[p] = Math.sqrt(i[p]); if (!r) { for (p = S.length; --p > -1;)
                                if (s[d])
                                    for (y = (m = _[S[p]]).length - 1, g = 0; g < y; g++) f = m[g + 1].da / i[g] + m[g].da / e[g] || 0, n[g] = (n[g] || 0) + f * f; for (p = n.length; --p > -1;) n[p] = Math.sqrt(n[p]) } for (p = S.length, g = a ? 4 : 1; --p > -1;) m = _[d = S[p]], h(m, o, a, r, s[d]), v && (m.splice(0, g), m.splice(m.length - g, g)); return _ },
                    u = function(t, e, i) { var n, s, o, r, h, l, c, u, p, d, m, g = {},
                            f = "cubic" === (e = e || "soft") ? 3 : 2,
                            y = "soft" === e,
                            v = []; if (y && i && (t = [i].concat(t)), null == t || t.length < f + 1) throw "invalid Bezier data"; for (p in t[0]) v.push(p); for (l = v.length; --l > -1;) { for (g[p = v[l]] = h = [], d = 0, u = t.length, c = 0; c < u; c++) n = null == i ? t[c][p] : "string" == typeof(m = t[c][p]) && "=" === m.charAt(1) ? i[p] + Number(m.charAt(0) + m.substr(2)) : Number(m), y && c > 1 && c < u - 1 && (h[d++] = (n + h[d - 2]) / 2), h[d++] = n; for (u = d - f + 1, d = 0, c = 0; c < u; c += f) n = h[c], s = h[c + 1], o = h[c + 2], r = 2 === f ? 0 : h[c + 3], h[d++] = m = 3 === f ? new a(n, s, o, r) : new a(n, (2 * s + n) / 3, (2 * s + o) / 3, o);
                            h.length = d } return g },
                    p = function(t, e, i) { for (var n, s, o, a, r, h, l, c, u, p, d, m = 1 / i, g = t.length; --g > -1;)
                            for (o = (p = t[g]).a, a = p.d - o, r = p.c - o, h = p.b - o, n = s = 0, c = 1; c <= i; c++) n = s - (s = ((l = m * c) * l * a + 3 * (u = 1 - l) * (l * r + u * h)) * l), e[d = g * i + c - 1] = (e[d] || 0) + n * n },
                    d = function(t, e) { var i, n, s, o, a = [],
                            r = [],
                            h = 0,
                            l = 0,
                            c = (e = e >> 0 || 6) - 1,
                            u = [],
                            d = []; for (i in t) p(t[i], a, e); for (s = a.length, n = 0; n < s; n++) h += Math.sqrt(a[n]), d[o = n % e] = h, o === c && (l += h, u[o = n / e >> 0] = d, r[o] = l, h = 0, d = []); return { length: l, lengths: r, segments: u } },
                    m = _gsScope._gsDefine.plugin({ propName: "bezier", priority: -1, version: "1.3.8", API: 2, global: !0, init: function(t, e, i) { this._target = t, e instanceof Array && (e = { values: e }), this._func = {}, this._mod = {}, this._props = [], this._timeRes = null == e.timeResolution ? 6 : parseInt(e.timeResolution, 10); var n, s, o, a, r, h = e.values || [],
                                l = {},
                                p = h[0],
                                m = e.autoRotate || i.vars.orientToBezier;
                            this._autoRotate = m ? m instanceof Array ? m : [
                                ["x", "y", "rotation", !0 === m ? 0 : Number(m) || 0]
                            ] : null; for (n in p) this._props.push(n); for (o = this._props.length; --o > -1;) n = this._props[o], this._overwriteProps.push(n), s = this._func[n] = "function" == typeof t[n], l[n] = s ? t[n.indexOf("set") || "function" != typeof t["get" + n.substr(3)] ? n : "get" + n.substr(3)]() : parseFloat(t[n]), r || l[n] !== h[0][n] && (r = l); if (this._beziers = "cubic" !== e.type && "quadratic" !== e.type && "soft" !== e.type ? c(h, isNaN(e.curviness) ? 1 : e.curviness, !1, "thruBasic" === e.type, e.correlate, r) : u(h, e.type, l), this._segCount = this._beziers[n].length, this._timeRes) { var g = d(this._beziers, this._timeRes);
                                this._length = g.length, this._lengths = g.lengths, this._segments = g.segments, this._l1 = this._li = this._s1 = this._si = 0, this._l2 = this._lengths[0], this._curSeg = this._segments[0], this._s2 = this._curSeg[0], this._prec = 1 / this._curSeg.length } if (m = this._autoRotate)
                                for (this._initialRotations = [], m[0] instanceof Array || (this._autoRotate = m = [m]), o = m.length; --o > -1;) { for (a = 0; a < 3; a++) n = m[o][a], this._func[n] = "function" == typeof t[n] && t[n.indexOf("set") || "function" != typeof t["get" + n.substr(3)] ? n : "get" + n.substr(3)];
                                    n = m[o][2], this._initialRotations[o] = (this._func[n] ? this._func[n].call(this._target) : this._target[n]) || 0, this._overwriteProps.push(n) }
                            return this._startRatio = i.vars.runBackwards ? 1 : 0, !0 }, set: function(e) { var i, n, s, o, a, r, h, l, c, u, p = this._segCount,
                                d = this._func,
                                m = this._target,
                                g = e !== this._startRatio; if (this._timeRes) { if (c = this._lengths, u = this._curSeg, e *= this._length, s = this._li, e > this._l2 && s < p - 1) { for (l = p - 1; s < l && (this._l2 = c[++s]) <= e;);
                                    this._l1 = c[s - 1], this._li = s, this._curSeg = u = this._segments[s], this._s2 = u[this._s1 = this._si = 0] } else if (e < this._l1 && s > 0) { for (; s > 0 && (this._l1 = c[--s]) >= e;);
                                    0 === s && e < this._l1 ? this._l1 = 0 : s++, this._l2 = c[s], this._li = s, this._curSeg = u = this._segments[s], this._s1 = u[(this._si = u.length - 1) - 1] || 0, this._s2 = u[this._si] } if (i = s, e -= this._l1, s = this._si, e > this._s2 && s < u.length - 1) { for (l = u.length - 1; s < l && (this._s2 = u[++s]) <= e;);
                                    this._s1 = u[s - 1], this._si = s } else if (e < this._s1 && s > 0) { for (; s > 0 && (this._s1 = u[--s]) >= e;);
                                    0 === s && e < this._s1 ? this._s1 = 0 : s++, this._s2 = u[s], this._si = s } r = (s + (e - this._s1) / (this._s2 - this._s1)) * this._prec || 0 } else r = (e - (i = e < 0 ? 0 : e >= 1 ? p - 1 : p * e >> 0) * (1 / p)) * p; for (n = 1 - r, s = this._props.length; --s > -1;) o = this._props[s], h = (r * r * (a = this._beziers[o][i]).da + 3 * n * (r * a.ca + n * a.ba)) * r + a.a, this._mod[o] && (h = this._mod[o](h, m)), d[o] ? m[o](h) : m[o] = h; if (this._autoRotate) { var f, y, v, b, _, S, w, C = this._autoRotate; for (s = C.length; --s > -1;) o = C[s][2], S = C[s][3] || 0, w = !0 === C[s][4] ? 1 : t, a = this._beziers[C[s][0]], f = this._beziers[C[s][1]], a && f && (a = a[i], f = f[i], y = a.a + (a.b - a.a) * r, y += ((b = a.b + (a.c - a.b) * r) - y) * r, b += (a.c + (a.d - a.c) * r - b) * r, v = f.a + (f.b - f.a) * r, v += ((_ = f.b + (f.c - f.b) * r) - v) * r, _ += (f.c + (f.d - f.c) * r - _) * r, h = g ? Math.atan2(_ - v, b - y) * w + S : this._initialRotations[s], this._mod[o] && (h = this._mod[o](h, m)), d[o] ? m[o](h) : m[o] = h) } } }),
                    g = m.prototype;
                m.bezierThrough = c, m.cubicToQuadratic = r, m._autoCSS = !0, m.quadraticToCubic = function(t, e, i) { return new a(t, (2 * e + t) / 3, (2 * e + i) / 3, i) }, m._cssRegister = function() { var t = o.CSSPlugin; if (t) { var e = t._internals,
                            i = e._parseToProxy,
                            n = e._setPluginRatio,
                            s = e.CSSPropTween;
                        e._registerComplexSpecialProp("bezier", { parser: function(t, e, o, a, r, h) { e instanceof Array && (e = { values: e }), h = new m; var l, c, u, p = e.values,
                                    d = p.length - 1,
                                    g = [],
                                    f = {}; if (d < 0) return r; for (l = 0; l <= d; l++) u = i(t, p[l], a, r, h, d !== l), g[l] = u.end; for (c in e) f[c] = e[c]; return f.values = g, r = new s(t, "bezier", 0, 0, u.pt, 2), r.data = u, r.plugin = h, r.setRatio = n, 0 === f.autoRotate && (f.autoRotate = !0), !f.autoRotate || f.autoRotate instanceof Array || (l = !0 === f.autoRotate ? 0 : Number(f.autoRotate), f.autoRotate = null != u.end.left ? [
                                    ["left", "top", "rotation", l, !1]
                                ] : null != u.end.x && [
                                    ["x", "y", "rotation", l, !1]
                                ]), f.autoRotate && (a._transform || a._enableTransforms(!1), u.autoRotate = a._target._gsTransform, u.proxy.rotation = u.autoRotate.rotation || 0, a._overwriteProps.push("rotation")), h._onInitTween(u.proxy, f, a._tween), r } }) } }, g._mod = function(t) { for (var e, i = this._overwriteProps, n = i.length; --n > -1;)(e = t[i[n]]) && "function" == typeof e && (this._mod[i[n]] = e) }, g._kill = function(t) { var e, i, n = this._props; for (e in this._beziers)
                        if (e in t)
                            for (delete this._beziers[e], delete this._func[e], i = n.length; --i > -1;) n[i] === e && n.splice(i, 1); if (n = this._autoRotate)
                        for (i = n.length; --i > -1;) t[n[i][2]] && n.splice(i, 1); return this._super._kill.call(this, t) } }(), _gsScope._gsDefine("plugins.CSSPlugin", ["plugins.TweenPlugin", "TweenLite"], function(t, e) { var i, n, s, o, a = function() { t.call(this, "css"), this._overwriteProps.length = 0, this.setRatio = a.prototype.setRatio },
                    r = _gsScope._gsDefine.globals,
                    h = {},
                    l = a.prototype = new t("css");
                l.constructor = a, a.version = "1.20.5", a.API = 2, a.defaultTransformPerspective = 0, a.defaultSkewType = "compensated", a.defaultSmoothOrigin = !0, l = "px", a.suffixMap = { top: l, right: l, bottom: l, left: l, width: l, height: l, fontSize: l, padding: l, margin: l, perspective: l, lineHeight: "" }; var c, u, p, d, m, g, f, y, v = /(?:\-|\.|\b)(\d|\.|e\-)+/g,
                    b = /(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,
                    _ = /(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,
                    S = /(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,
                    w = /(?:\d|\-|\+|=|#|\.)*/g,
                    C = /opacity *= *([^)]*)/i,
                    A = /opacity:([^;]*)/i,
                    T = /alpha\(opacity *=.+?\)/i,
                    x = /^(rgb|hsl)/,
                    P = /([A-Z])/g,
                    I = /-([a-z])/gi,
                    O = /(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,
                    E = function(t, e) { return e.toUpperCase() },
                    L = /(?:Left|Right|Width)/i,
                    k = /(M11|M12|M21|M22)=[\d\-\.e]+/gi,
                    M = /progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,
                    B = /,(?=[^\)]*(?:\(|$))/gi,
                    D = /[\s,\(]/i,
                    G = Math.PI / 180,
                    R = 180 / Math.PI,
                    U = {},
                    F = { style: {} },
                    N = _gsScope.document || { createElement: function() { return F } },
                    j = function(t, e) { return N.createElementNS ? N.createElementNS(e || "http://www.w3.org/1999/xhtml", t) : N.createElement(t) },
                    H = j("div"),
                    X = j("img"),
                    W = a._internals = { _specialProps: h },
                    V = (_gsScope.navigator || {}).userAgent || "",
                    z = function() { var t = V.indexOf("Android"),
                            e = j("a"); return p = -1 !== V.indexOf("Safari") && -1 === V.indexOf("Chrome") && (-1 === t || parseFloat(V.substr(t + 8, 2)) > 3), m = p && parseFloat(V.substr(V.indexOf("Version/") + 8, 2)) < 6, d = -1 !== V.indexOf("Firefox"), (/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(V) || /Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(V)) && (g = parseFloat(RegExp.$1)), !!e && (e.style.cssText = "top:1px;opacity:.55;", /^0.55/.test(e.style.opacity)) }(),
                    Y = function(t) { return C.test("string" == typeof t ? t : (t.currentStyle ? t.currentStyle.filter : t.style.filter) || "") ? parseFloat(RegExp.$1) / 100 : 1 },
                    K = function(t) { _gsScope.console && console.log(t) },
                    q = "",
                    Z = "",
                    J = function(t, e) { var i, n, s = (e = e || H).style; if (void 0 !== s[t]) return t; for (t = t.charAt(0).toUpperCase() + t.substr(1), i = ["O", "Moz", "ms", "Ms", "Webkit"], n = 5; --n > -1 && void 0 === s[i[n] + t];); return n >= 0 ? (Z = 3 === n ? "ms" : i[n], q = "-" + Z.toLowerCase() + "-", Z + t) : null },
                    Q = ("undefined" != typeof window ? window : N.defaultView || { getComputedStyle: function() {} }).getComputedStyle,
                    $ = a.getStyle = function(t, e, i, n, s) { var o; return z || "opacity" !== e ? (!n && t.style[e] ? o = t.style[e] : (i = i || Q(t)) ? o = i[e] || i.getPropertyValue(e) || i.getPropertyValue(e.replace(P, "-$1").toLowerCase()) : t.currentStyle && (o = t.currentStyle[e]), null == s || o && "none" !== o && "auto" !== o && "auto auto" !== o ? o : s) : Y(t) },
                    tt = W.convertToPixels = function(t, i, n, s, o) { if ("px" === s || !s && "lineHeight" !== i) return n; if ("auto" === s || !n) return 0; var r, h, l, c = L.test(i),
                            u = t,
                            p = H.style,
                            d = n < 0,
                            m = 1 === n; if (d && (n = -n), m && (n *= 100), "lineHeight" !== i || s)
                            if ("%" === s && -1 !== i.indexOf("border")) r = n / 100 * (c ? t.clientWidth : t.clientHeight);
                            else { if (p.cssText = "border:0 solid red;position:" + $(t, "position") + ";line-height:0;", "%" !== s && u.appendChild && "v" !== s.charAt(0) && "rem" !== s) p[c ? "borderLeftWidth" : "borderTopWidth"] = n + s;
                                else { if (u = t.parentNode || N.body, -1 !== $(u, "display").indexOf("flex") && (p.position = "absolute"), h = u._gsCache, l = e.ticker.frame, h && c && h.time === l) return h.width * n / 100;
                                    p[c ? "width" : "height"] = n + s } u.appendChild(H), r = parseFloat(H[c ? "offsetWidth" : "offsetHeight"]), u.removeChild(H), c && "%" === s && !1 !== a.cacheWidths && ((h = u._gsCache = u._gsCache || {}).time = l, h.width = r / n * 100), 0 !== r || o || (r = tt(t, i, n, s, !0)) } else h = Q(t).lineHeight, t.style.lineHeight = n, r = parseFloat(Q(t).lineHeight), t.style.lineHeight = h; return m && (r /= 100), d ? -r : r },
                    et = W.calculateOffset = function(t, e, i) { if ("absolute" !== $(t, "position", i)) return 0; var n = "left" === e ? "Left" : "Top",
                            s = $(t, "margin" + n, i); return t["offset" + n] - (tt(t, e, parseFloat(s), s.replace(w, "")) || 0) },
                    it = function(t, e) { var i, n, s, o = {}; if (e = e || Q(t, null))
                            if (i = e.length)
                                for (; --i > -1;) - 1 !== (s = e[i]).indexOf("-transform") && Ot !== s || (o[s.replace(I, E)] = e.getPropertyValue(s));
                            else
                                for (i in e) - 1 !== i.indexOf("Transform") && It !== i || (o[i] = e[i]);
                        else if (e = t.currentStyle || t.style)
                            for (i in e) "string" == typeof i && void 0 === o[i] && (o[i.replace(I, E)] = e[i]); return z || (o.opacity = Y(t)), n = Xt(t, e, !1), o.rotation = n.rotation, o.skewX = n.skewX, o.scaleX = n.scaleX, o.scaleY = n.scaleY, o.x = n.x, o.y = n.y, Lt && (o.z = n.z, o.rotationX = n.rotationX, o.rotationY = n.rotationY, o.scaleZ = n.scaleZ), o.filters && delete o.filters, o },
                    nt = function(t, e, i, n, s) { var o, a, r, h = {},
                            l = t.style; for (a in i) "cssText" !== a && "length" !== a && isNaN(a) && (e[a] !== (o = i[a]) || s && s[a]) && -1 === a.indexOf("Origin") && ("number" != typeof o && "string" != typeof o || (h[a] = "auto" !== o || "left" !== a && "top" !== a ? "" !== o && "auto" !== o && "none" !== o || "string" != typeof e[a] || "" === e[a].replace(S, "") ? o : 0 : et(t, a), void 0 !== l[a] && (r = new vt(l, a, l[a], r)))); if (n)
                            for (a in n) "className" !== a && (h[a] = n[a]); return { difs: h, firstMPT: r } },
                    st = { width: ["Left", "Right"], height: ["Top", "Bottom"] },
                    ot = ["marginLeft", "marginRight", "marginTop", "marginBottom"],
                    at = function(t, e, i) { if ("svg" === (t.nodeName + "").toLowerCase()) return (i || Q(t))[e] || 0; if (t.getCTM && Nt(t)) return t.getBBox()[e] || 0; var n = parseFloat("width" === e ? t.offsetWidth : t.offsetHeight),
                            s = st[e],
                            o = s.length; for (i = i || Q(t, null); --o > -1;) n -= parseFloat($(t, "padding" + s[o], i, !0)) || 0, n -= parseFloat($(t, "border" + s[o] + "Width", i, !0)) || 0; return n },
                    rt = function(t, e) { if ("contain" === t || "auto" === t || "auto auto" === t) return t + " ";
                        null != t && "" !== t || (t = "0 0"); var i, n = t.split(" "),
                            s = -1 !== t.indexOf("left") ? "0%" : -1 !== t.indexOf("right") ? "100%" : n[0],
                            o = -1 !== t.indexOf("top") ? "0%" : -1 !== t.indexOf("bottom") ? "100%" : n[1]; if (n.length > 3 && !e) { for (n = t.split(", ").join(",").split(","), t = [], i = 0; i < n.length; i++) t.push(rt(n[i])); return t.join(",") } return null == o ? o = "center" === s ? "50%" : "0" : "center" === o && (o = "50%"), ("center" === s || isNaN(parseFloat(s)) && -1 === (s + "").indexOf("=")) && (s = "50%"), t = s + " " + o + (n.length > 2 ? " " + n[2] : ""), e && (e.oxp = -1 !== s.indexOf("%"), e.oyp = -1 !== o.indexOf("%"), e.oxr = "=" === s.charAt(1), e.oyr = "=" === o.charAt(1), e.ox = parseFloat(s.replace(S, "")), e.oy = parseFloat(o.replace(S, "")), e.v = t), e || t },
                    ht = function(t, e) { return "function" == typeof t && (t = t(y, f)), "string" == typeof t && "=" === t.charAt(1) ? parseInt(t.charAt(0) + "1", 10) * parseFloat(t.substr(2)) : parseFloat(t) - parseFloat(e) || 0 },
                    lt = function(t, e) { return "function" == typeof t && (t = t(y, f)), null == t ? e : "string" == typeof t && "=" === t.charAt(1) ? parseInt(t.charAt(0) + "1", 10) * parseFloat(t.substr(2)) + e : parseFloat(t) || 0 },
                    ct = function(t, e, i, n) { var s, o, a, r, h; return "function" == typeof t && (t = t(y, f)), null == t ? r = e : "number" == typeof t ? r = t : (s = 360, o = t.split("_"), a = ((h = "=" === t.charAt(1)) ? parseInt(t.charAt(0) + "1", 10) * parseFloat(o[0].substr(2)) : parseFloat(o[0])) * (-1 === t.indexOf("rad") ? 1 : R) - (h ? 0 : e), o.length && (n && (n[i] = e + a), -1 !== t.indexOf("short") && (a %= s) !== a % (s / 2) && (a = a < 0 ? a + s : a - s), -1 !== t.indexOf("_cw") && a < 0 ? a = (a + 9999999999 * s) % s - (a / s | 0) * s : -1 !== t.indexOf("ccw") && a > 0 && (a = (a - 9999999999 * s) % s - (a / s | 0) * s)), r = e + a), r < 1e-6 && r > -1e-6 && (r = 0), r },
                    ut = { aqua: [0, 255, 255], lime: [0, 255, 0], silver: [192, 192, 192], black: [0, 0, 0], maroon: [128, 0, 0], teal: [0, 128, 128], blue: [0, 0, 255], navy: [0, 0, 128], white: [255, 255, 255], fuchsia: [255, 0, 255], olive: [128, 128, 0], yellow: [255, 255, 0], orange: [255, 165, 0], gray: [128, 128, 128], purple: [128, 0, 128], green: [0, 128, 0], red: [255, 0, 0], pink: [255, 192, 203], cyan: [0, 255, 255], transparent: [255, 255, 255, 0] },
                    pt = function(t, e, i) { return 255 * (6 * (t = t < 0 ? t + 1 : t > 1 ? t - 1 : t) < 1 ? e + (i - e) * t * 6 : t < .5 ? i : 3 * t < 2 ? e + (i - e) * (2 / 3 - t) * 6 : e) + .5 | 0 },
                    dt = a.parseColor = function(t, e) { var i, n, s, o, a, r, h, l, c, u, p; if (t)
                            if ("number" == typeof t) i = [t >> 16, t >> 8 & 255, 255 & t];
                            else { if ("," === t.charAt(t.length - 1) && (t = t.substr(0, t.length - 1)), ut[t]) i = ut[t];
                                else if ("#" === t.charAt(0)) 4 === t.length && (t = "#" + (n = t.charAt(1)) + n + (s = t.charAt(2)) + s + (o = t.charAt(3)) + o), i = [(t = parseInt(t.substr(1), 16)) >> 16, t >> 8 & 255, 255 & t];
                                else if ("hsl" === t.substr(0, 3))
                                    if (i = p = t.match(v), e) { if (-1 !== t.indexOf("=")) return t.match(b) } else a = Number(i[0]) % 360 / 360, r = Number(i[1]) / 100, n = 2 * (h = Number(i[2]) / 100) - (s = h <= .5 ? h * (r + 1) : h + r - h * r), i.length > 3 && (i[3] = Number(i[3])), i[0] = pt(a + 1 / 3, n, s), i[1] = pt(a, n, s), i[2] = pt(a - 1 / 3, n, s);
                                else i = t.match(v) || ut.transparent;
                                i[0] = Number(i[0]), i[1] = Number(i[1]), i[2] = Number(i[2]), i.length > 3 && (i[3] = Number(i[3])) } else i = ut.black; return e && !p && (n = i[0] / 255, s = i[1] / 255, o = i[2] / 255, h = ((l = Math.max(n, s, o)) + (c = Math.min(n, s, o))) / 2, l === c ? a = r = 0 : (u = l - c, r = h > .5 ? u / (2 - l - c) : u / (l + c), a = l === n ? (s - o) / u + (s < o ? 6 : 0) : l === s ? (o - n) / u + 2 : (n - s) / u + 4, a *= 60), i[0] = a + .5 | 0, i[1] = 100 * r + .5 | 0, i[2] = 100 * h + .5 | 0), i },
                    mt = function(t, e) { var i, n, s, o = t.match(gt) || [],
                            a = 0,
                            r = ""; if (!o.length) return t; for (i = 0; i < o.length; i++) n = o[i], a += (s = t.substr(a, t.indexOf(n, a) - a)).length + n.length, 3 === (n = dt(n, e)).length && n.push(1), r += s + (e ? "hsla(" + n[0] + "," + n[1] + "%," + n[2] + "%," + n[3] : "rgba(" + n.join(",")) + ")"; return r + t.substr(a) },
                    gt = "(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b"; for (l in ut) gt += "|" + l + "\\b";
                gt = new RegExp(gt + ")", "gi"), a.colorStringFilter = function(t) { var e, i = t[0] + " " + t[1];
                    gt.test(i) && (e = -1 !== i.indexOf("hsl(") || -1 !== i.indexOf("hsla("), t[0] = mt(t[0], e), t[1] = mt(t[1], e)), gt.lastIndex = 0 }, e.defaultStringFilter || (e.defaultStringFilter = a.colorStringFilter); var ft = function(t, e, i, n) { if (null == t) return function(t) { return t }; var s, o = e ? (t.match(gt) || [""])[0] : "",
                            a = t.split(o).join("").match(_) || [],
                            r = t.substr(0, t.indexOf(a[0])),
                            h = ")" === t.charAt(t.length - 1) ? ")" : "",
                            l = -1 !== t.indexOf(" ") ? " " : ",",
                            c = a.length,
                            u = c > 0 ? a[0].replace(v, "") : ""; return c ? s = e ? function(t) { var e, p, d, m; if ("number" == typeof t) t += u;
                            else if (n && B.test(t)) { for (m = t.replace(B, "|").split("|"), d = 0; d < m.length; d++) m[d] = s(m[d]); return m.join(",") } if (e = (t.match(gt) || [o])[0], p = t.split(e).join("").match(_) || [], d = p.length, c > d--)
                                for (; ++d < c;) p[d] = i ? p[(d - 1) / 2 | 0] : a[d]; return r + p.join(l) + l + e + h + (-1 !== t.indexOf("inset") ? " inset" : "") } : function(t) { var e, o, p; if ("number" == typeof t) t += u;
                            else if (n && B.test(t)) { for (o = t.replace(B, "|").split("|"), p = 0; p < o.length; p++) o[p] = s(o[p]); return o.join(",") } if (e = t.match(_) || [], p = e.length, c > p--)
                                for (; ++p < c;) e[p] = i ? e[(p - 1) / 2 | 0] : a[p]; return r + e.join(l) + h } : function(t) { return t } },
                    yt = function(t) { return t = t.split(","),
                            function(e, i, n, s, o, a, r) { var h, l = (i + "").split(" "); for (r = {}, h = 0; h < 4; h++) r[t[h]] = l[h] = l[h] || l[(h - 1) / 2 >> 0]; return s.parse(e, r, o, a) } },
                    vt = (W._setPluginRatio = function(t) { this.plugin.setRatio(t); for (var e, i, n, s, o, a = this.data, r = a.proxy, h = a.firstMPT; h;) e = r[h.v], h.r ? e = h.r(e) : e < 1e-6 && e > -1e-6 && (e = 0), h.t[h.p] = e, h = h._next; if (a.autoRotate && (a.autoRotate.rotation = a.mod ? a.mod.call(this._tween, r.rotation, this.t, this._tween) : r.rotation), 1 === t || 0 === t)
                            for (h = a.firstMPT, o = 1 === t ? "e" : "b"; h;) { if ((i = h.t).type) { if (1 === i.type) { for (s = i.xs0 + i.s + i.xs1, n = 1; n < i.l; n++) s += i["xn" + n] + i["xs" + (n + 1)];
                                        i[o] = s } } else i[o] = i.s + i.xs0;
                                h = h._next } }, function(t, e, i, n, s) { this.t = t, this.p = e, this.v = i, this.r = s, n && (n._prev = this, this._next = n) }),
                    bt = (W._parseToProxy = function(t, e, i, n, s, o) { var a, r, h, l, c, u = n,
                            p = {},
                            d = {},
                            m = i._transform,
                            g = U; for (i._transform = null, U = e, n = c = i.parse(t, e, n, s), U = g, o && (i._transform = m, u && (u._prev = null, u._prev && (u._prev._next = null))); n && n !== u;) { if (n.type <= 1 && (r = n.p, d[r] = n.s + n.c, p[r] = n.s, o || (l = new vt(n, "s", r, l, n.r), n.c = 0), 1 === n.type))
                                for (a = n.l; --a > 0;) h = "xn" + a, d[r = n.p + "_" + h] = n.data[h], p[r] = n[h], o || (l = new vt(n, h, r, l, n.rxp[h]));
                            n = n._next } return { proxy: p, end: d, firstMPT: l, pt: c } }, W.CSSPropTween = function(t, e, n, s, a, r, h, l, c, u, p) { this.t = t, this.p = e, this.s = n, this.c = s, this.n = h || e, t instanceof bt || o.push(this.n), this.r = l ? "function" == typeof l ? l : Math.round : l, this.type = r || 0, c && (this.pr = c, i = !0), this.b = void 0 === u ? n : u, this.e = void 0 === p ? n + s : p, a && (this._next = a, a._prev = this) }),
                    _t = function(t, e, i, n, s, o) { var a = new bt(t, e, i, n - i, s, -1, o); return a.b = i, a.e = a.xs0 = n, a },
                    St = a.parseComplex = function(t, e, i, n, s, o, r, h, l, u) { i = i || o || "", "function" == typeof n && (n = n(y, f)), r = new bt(t, e, 0, 0, r, u ? 2 : 1, null, !1, h, i, n), n += "", s && gt.test(n + i) && (n = [i, n], a.colorStringFilter(n), i = n[0], n = n[1]); var p, d, m, g, _, S, w, C, A, T, x, P, I, O = i.split(", ").join(",").split(" "),
                            E = n.split(", ").join(",").split(" "),
                            L = O.length,
                            k = !1 !== c; for (-1 === n.indexOf(",") && -1 === i.indexOf(",") || (-1 !== (n + i).indexOf("rgb") || -1 !== (n + i).indexOf("hsl") ? (O = O.join(" ").replace(B, ", ").split(" "), E = E.join(" ").replace(B, ", ").split(" ")) : (O = O.join(" ").split(",").join(", ").split(" "), E = E.join(" ").split(",").join(", ").split(" ")), L = O.length), L !== E.length && (L = (O = (o || "").split(" ")).length), r.plugin = l, r.setRatio = u, gt.lastIndex = 0, p = 0; p < L; p++)
                            if (g = O[p], _ = E[p] + "", (C = parseFloat(g)) || 0 === C) r.appendXtra("", C, ht(_, C), _.replace(b, ""), !(!k || -1 === _.indexOf("px")) && Math.round, !0);
                            else if (s && gt.test(g)) P = ")" + ((P = _.indexOf(")") + 1) ? _.substr(P) : ""), I = -1 !== _.indexOf("hsl") && z, T = _, g = dt(g, I), _ = dt(_, I), (A = g.length + _.length > 6) && !z && 0 === _[3] ? (r["xs" + r.l] += r.l ? " transparent" : "transparent", r.e = r.e.split(E[p]).join("transparent")) : (z || (A = !1), I ? r.appendXtra(T.substr(0, T.indexOf("hsl")) + (A ? "hsla(" : "hsl("), g[0], ht(_[0], g[0]), ",", !1, !0).appendXtra("", g[1], ht(_[1], g[1]), "%,", !1).appendXtra("", g[2], ht(_[2], g[2]), A ? "%," : "%" + P, !1) : r.appendXtra(T.substr(0, T.indexOf("rgb")) + (A ? "rgba(" : "rgb("), g[0], _[0] - g[0], ",", Math.round, !0).appendXtra("", g[1], _[1] - g[1], ",", Math.round).appendXtra("", g[2], _[2] - g[2], A ? "," : P, Math.round), A && (g = g.length < 4 ? 1 : g[3], r.appendXtra("", g, (_.length < 4 ? 1 : _[3]) - g, P, !1))), gt.lastIndex = 0;
                        else if (S = g.match(v)) { if (!(w = _.match(b)) || w.length !== S.length) return r; for (m = 0, d = 0; d < S.length; d++) x = S[d], T = g.indexOf(x, m), r.appendXtra(g.substr(m, T - m), Number(x), ht(w[d], x), "", !(!k || "px" !== g.substr(T + x.length, 2)) && Math.round, 0 === d), m = T + x.length;
                            r["xs" + r.l] += g.substr(m) } else r["xs" + r.l] += r.l || r["xs" + r.l] ? " " + _ : _; if (-1 !== n.indexOf("=") && r.data) { for (P = r.xs0 + r.data.s, p = 1; p < r.l; p++) P += r["xs" + p] + r.data["xn" + p];
                            r.e = P + r["xs" + p] } return r.l || (r.type = -1, r.xs0 = r.e), r.xfirst || r },
                    wt = 9; for ((l = bt.prototype).l = l.pr = 0; --wt > 0;) l["xn" + wt] = 0, l["xs" + wt] = "";
                l.xs0 = "", l._next = l._prev = l.xfirst = l.data = l.plugin = l.setRatio = l.rxp = null, l.appendXtra = function(t, e, i, n, s, o) { var a = this,
                        r = a.l; return a["xs" + r] += o && (r || a["xs" + r]) ? " " + t : t || "", i || 0 === r || a.plugin ? (a.l++, a.type = a.setRatio ? 2 : 1, a["xs" + a.l] = n || "", r > 0 ? (a.data["xn" + r] = e + i, a.rxp["xn" + r] = s, a["xn" + r] = e, a.plugin || (a.xfirst = new bt(a, "xn" + r, e, i, a.xfirst || a, 0, a.n, s, a.pr), a.xfirst.xs0 = 0), a) : (a.data = { s: e + i }, a.rxp = {}, a.s = e, a.c = i, a.r = s, a)) : (a["xs" + r] += e + (n || ""), a) }; var Ct = function(t, e) { e = e || {}, this.p = e.prefix ? J(t) || t : t, h[t] = h[this.p] = this, this.format = e.formatter || ft(e.defaultValue, e.color, e.collapsible, e.multi), e.parser && (this.parse = e.parser), this.clrs = e.color, this.multi = e.multi, this.keyword = e.keyword, this.dflt = e.defaultValue, this.pr = e.priority || 0 },
                    At = W._registerComplexSpecialProp = function(t, e, i) { "object" != typeof e && (e = { parser: i }); var n, s = t.split(","),
                            o = e.defaultValue; for (i = i || [o], n = 0; n < s.length; n++) e.prefix = 0 === n && e.prefix, e.defaultValue = i[n] || o, new Ct(s[n], e) },
                    Tt = W._registerPluginProp = function(t) { if (!h[t]) { var e = t.charAt(0).toUpperCase() + t.substr(1) + "Plugin";
                            At(t, { parser: function(t, i, n, s, o, a, l) { var c = r.com.greensock.plugins[e]; return c ? (c._cssRegister(), h[n].parse(t, i, n, s, o, a, l)) : (K("Error: " + e + " js file not loaded."), o) } }) } };
                (l = Ct.prototype).parseComplex = function(t, e, i, n, s, o) { var a, r, h, l, c, u, p = this.keyword; if (this.multi && (B.test(i) || B.test(e) ? (r = e.replace(B, "|").split("|"), h = i.replace(B, "|").split("|")) : p && (r = [e], h = [i])), h) { for (l = h.length > r.length ? h.length : r.length, a = 0; a < l; a++) e = r[a] = r[a] || this.dflt, i = h[a] = h[a] || this.dflt, p && (c = e.indexOf(p)) !== (u = i.indexOf(p)) && (-1 === u ? r[a] = r[a].split(p).join("") : -1 === c && (r[a] += " " + p));
                        e = r.join(", "), i = h.join(", ") } return St(t, this.p, e, i, this.clrs, this.dflt, n, this.pr, s, o) }, l.parse = function(t, e, i, n, o, a, r) { return this.parseComplex(t.style, this.format($(t, this.p, s, !1, this.dflt)), this.format(e), o, a) }, a.registerSpecialProp = function(t, e, i) { At(t, { parser: function(t, n, s, o, a, r, h) { var l = new bt(t, s, 0, 0, a, 2, s, !1, i); return l.plugin = r, l.setRatio = e(t, n, o._tween, s), l }, priority: i }) }, a.useSVGTransformAttr = !0; var xt, Pt = "scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),
                    It = J("transform"),
                    Ot = q + "transform",
                    Et = J("transformOrigin"),
                    Lt = null !== J("perspective"),
                    kt = W.Transform = function() { this.perspective = parseFloat(a.defaultTransformPerspective) || 0, this.force3D = !(!1 === a.defaultForce3D || !Lt) && (a.defaultForce3D || "auto") },
                    Mt = _gsScope.SVGElement,
                    Bt = function(t, e, i) { var n, s = N.createElementNS("http://www.w3.org/2000/svg", t),
                            o = /([a-z])([A-Z])/g; for (n in i) s.setAttributeNS(null, n.replace(o, "$1-$2").toLowerCase(), i[n]); return e.appendChild(s), s },
                    Dt = N.documentElement || {},
                    Gt = function() { var t, e, i, n = g || /Android/i.test(V) && !_gsScope.chrome; return N.createElementNS && !n && (t = Bt("svg", Dt), i = (e = Bt("rect", t, { width: 100, height: 50, x: 100 })).getBoundingClientRect().width, e.style[Et] = "50% 50%", e.style[It] = "scaleX(0.5)", n = i === e.getBoundingClientRect().width && !(d && Lt), Dt.removeChild(t)), n }(),
                    Rt = function(t, e, i, n, s, o) { var r, h, l, c, u, p, d, m, g, f, y, v, b, _, S = t._gsTransform,
                            w = Ht(t, !0);
                        S && (b = S.xOrigin, _ = S.yOrigin), (!n || (r = n.split(" ")).length < 2) && (0 === (d = t.getBBox()).x && 0 === d.y && d.width + d.height === 0 && (d = { x: parseFloat(t.hasAttribute("x") ? t.getAttribute("x") : t.hasAttribute("cx") ? t.getAttribute("cx") : 0) || 0, y: parseFloat(t.hasAttribute("y") ? t.getAttribute("y") : t.hasAttribute("cy") ? t.getAttribute("cy") : 0) || 0, width: 0, height: 0 }), r = [(-1 !== (e = rt(e).split(" "))[0].indexOf("%") ? parseFloat(e[0]) / 100 * d.width : parseFloat(e[0])) + d.x, (-1 !== e[1].indexOf("%") ? parseFloat(e[1]) / 100 * d.height : parseFloat(e[1])) + d.y]), i.xOrigin = c = parseFloat(r[0]), i.yOrigin = u = parseFloat(r[1]), n && w !== jt && (p = w[0], d = w[1], m = w[2], g = w[3], f = w[4], y = w[5], (v = p * g - d * m) && (h = c * (g / v) + u * (-m / v) + (m * y - g * f) / v, l = c * (-d / v) + u * (p / v) - (p * y - d * f) / v, c = i.xOrigin = r[0] = h, u = i.yOrigin = r[1] = l)), S && (o && (i.xOffset = S.xOffset, i.yOffset = S.yOffset, S = i), s || !1 !== s && !1 !== a.defaultSmoothOrigin ? (h = c - b, l = u - _, S.xOffset += h * w[0] + l * w[2] - h, S.yOffset += h * w[1] + l * w[3] - l) : S.xOffset = S.yOffset = 0), o || t.setAttribute("data-svg-origin", r.join(" ")) },
                    Ut = function(t) { var e, i = j("svg", this.ownerSVGElement && this.ownerSVGElement.getAttribute("xmlns") || "http://www.w3.org/2000/svg"),
                            n = this.parentNode,
                            s = this.nextSibling,
                            o = this.style.cssText; if (Dt.appendChild(i), i.appendChild(this), this.style.display = "block", t) try { e = this.getBBox(), this._originalGetBBox = this.getBBox, this.getBBox = Ut } catch (t) {} else this._originalGetBBox && (e = this._originalGetBBox()); return s ? n.insertBefore(this, s) : n.appendChild(this), Dt.removeChild(i), this.style.cssText = o, e },
                    Ft = function(t) { try { return t.getBBox() } catch (e) { return Ut.call(t, !0) } },
                    Nt = function(t) { return !(!Mt || !t.getCTM || t.parentNode && !t.ownerSVGElement || !Ft(t)) },
                    jt = [1, 0, 0, 1, 0, 0],
                    Ht = function(t, e) { var i, n, s, o, a, r, h = t._gsTransform || new kt,
                            l = t.style; if (It ? n = $(t, Ot, null, !0) : t.currentStyle && (n = (n = t.currentStyle.filter.match(k)) && 4 === n.length ? [n[0].substr(4), Number(n[2].substr(4)), Number(n[1].substr(4)), n[3].substr(4), h.x || 0, h.y || 0].join(",") : ""), i = !n || "none" === n || "matrix(1, 0, 0, 1, 0, 0)" === n, !It || !(r = !Q(t) || "none" === Q(t).display) && t.parentNode || (r && (o = l.display, l.display = "block"), t.parentNode || (a = 1, Dt.appendChild(t)), i = !(n = $(t, Ot, null, !0)) || "none" === n || "matrix(1, 0, 0, 1, 0, 0)" === n, o ? l.display = o : r && Yt(l, "display"), a && Dt.removeChild(t)), (h.svg || t.getCTM && Nt(t)) && (i && -1 !== (l[It] + "").indexOf("matrix") && (n = l[It], i = 0), s = t.getAttribute("transform"), i && s && (n = "matrix(" + (s = t.transform.baseVal.consolidate().matrix).a + "," + s.b + "," + s.c + "," + s.d + "," + s.e + "," + s.f + ")", i = 0)), i) return jt; for (s = (n || "").match(v) || [], wt = s.length; --wt > -1;) o = Number(s[wt]), s[wt] = (a = o - (o |= 0)) ? (1e5 * a + (a < 0 ? -.5 : .5) | 0) / 1e5 + o : o; return e && s.length > 6 ? [s[0], s[1], s[4], s[5], s[12], s[13]] : s },
                    Xt = W.getTransform = function(t, i, n, s) { if (t._gsTransform && n && !s) return t._gsTransform; var o, r, h, l, c, u, p = n ? t._gsTransform || new kt : new kt,
                            d = p.scaleX < 0,
                            m = Lt ? parseFloat($(t, Et, i, !1, "0 0 0").split(" ")[2]) || p.zOrigin || 0 : 0,
                            g = parseFloat(a.defaultTransformPerspective) || 0; if (p.svg = !(!t.getCTM || !Nt(t)), p.svg && (Rt(t, $(t, Et, i, !1, "50% 50%") + "", p, t.getAttribute("data-svg-origin")), xt = a.useSVGTransformAttr || Gt), (o = Ht(t)) !== jt) { if (16 === o.length) { var f, y, v, b, _, S = o[0],
                                    w = o[1],
                                    C = o[2],
                                    A = o[3],
                                    T = o[4],
                                    x = o[5],
                                    P = o[6],
                                    I = o[7],
                                    O = o[8],
                                    E = o[9],
                                    L = o[10],
                                    k = o[12],
                                    M = o[13],
                                    B = o[14],
                                    D = o[11],
                                    G = Math.atan2(P, L);
                                p.zOrigin && (k = O * (B = -p.zOrigin) - o[12], M = E * B - o[13], B = L * B + p.zOrigin - o[14]), p.rotationX = G * R, G && (f = T * (b = Math.cos(-G)) + O * (_ = Math.sin(-G)), y = x * b + E * _, v = P * b + L * _, O = T * -_ + O * b, E = x * -_ + E * b, L = P * -_ + L * b, D = I * -_ + D * b, T = f, x = y, P = v), G = Math.atan2(-C, L), p.rotationY = G * R, G && (y = w * (b = Math.cos(-G)) - E * (_ = Math.sin(-G)), v = C * b - L * _, E = w * _ + E * b, L = C * _ + L * b, D = A * _ + D * b, S = f = S * b - O * _, w = y, C = v), G = Math.atan2(w, S), p.rotation = G * R, G && (f = S * (b = Math.cos(G)) + w * (_ = Math.sin(G)), y = T * b + x * _, v = O * b + E * _, w = w * b - S * _, x = x * b - T * _, E = E * b - O * _, S = f, T = y, O = v), p.rotationX && Math.abs(p.rotationX) + Math.abs(p.rotation) > 359.9 && (p.rotationX = p.rotation = 0, p.rotationY = 180 - p.rotationY), G = Math.atan2(T, x), p.scaleX = (1e5 * Math.sqrt(S * S + w * w + C * C) + .5 | 0) / 1e5, p.scaleY = (1e5 * Math.sqrt(x * x + P * P) + .5 | 0) / 1e5, p.scaleZ = (1e5 * Math.sqrt(O * O + E * E + L * L) + .5 | 0) / 1e5, S /= p.scaleX, T /= p.scaleY, w /= p.scaleX, x /= p.scaleY, Math.abs(G) > 2e-5 ? (p.skewX = G * R, T = 0, "simple" !== p.skewType && (p.scaleY *= 1 / Math.cos(G))) : p.skewX = 0, p.perspective = D ? 1 / (D < 0 ? -D : D) : 0, p.x = k, p.y = M, p.z = B, p.svg && (p.x -= p.xOrigin - (p.xOrigin * S - p.yOrigin * T), p.y -= p.yOrigin - (p.yOrigin * w - p.xOrigin * x)) } else if (!Lt || s || !o.length || p.x !== o[4] || p.y !== o[5] || !p.rotationX && !p.rotationY) { var U = o.length >= 6,
                                    F = U ? o[0] : 1,
                                    N = o[1] || 0,
                                    j = o[2] || 0,
                                    H = U ? o[3] : 1;
                                p.x = o[4] || 0, p.y = o[5] || 0, h = Math.sqrt(F * F + N * N), l = Math.sqrt(H * H + j * j), c = F || N ? Math.atan2(N, F) * R : p.rotation || 0, u = j || H ? Math.atan2(j, H) * R + c : p.skewX || 0, p.scaleX = h, p.scaleY = l, p.rotation = c, p.skewX = u, Lt && (p.rotationX = p.rotationY = p.z = 0, p.perspective = g, p.scaleZ = 1), p.svg && (p.x -= p.xOrigin - (p.xOrigin * F + p.yOrigin * j), p.y -= p.yOrigin - (p.xOrigin * N + p.yOrigin * H)) } Math.abs(p.skewX) > 90 && Math.abs(p.skewX) < 270 && (d ? (p.scaleX *= -1, p.skewX += p.rotation <= 0 ? 180 : -180, p.rotation += p.rotation <= 0 ? 180 : -180) : (p.scaleY *= -1, p.skewX += p.skewX <= 0 ? 180 : -180)), p.zOrigin = m; for (r in p) p[r] < 2e-5 && p[r] > -2e-5 && (p[r] = 0) } return n && (t._gsTransform = p, p.svg && (xt && t.style[It] ? e.delayedCall(.001, function() { Yt(t.style, It) }) : !xt && t.getAttribute("transform") && e.delayedCall(.001, function() { t.removeAttribute("transform") }))), p },
                    Wt = function(t) { var e, i, n = this.data,
                            s = -n.rotation * G,
                            o = s + n.skewX * G,
                            a = (Math.cos(s) * n.scaleX * 1e5 | 0) / 1e5,
                            r = (Math.sin(s) * n.scaleX * 1e5 | 0) / 1e5,
                            h = (Math.sin(o) * -n.scaleY * 1e5 | 0) / 1e5,
                            l = (Math.cos(o) * n.scaleY * 1e5 | 0) / 1e5,
                            c = this.t.style,
                            u = this.t.currentStyle; if (u) { i = r, r = -h, h = -i, e = u.filter, c.filter = ""; var p, d, m = this.t.offsetWidth,
                                f = this.t.offsetHeight,
                                y = "absolute" !== u.position,
                                v = "progid:DXImageTransform.Microsoft.Matrix(M11=" + a + ", M12=" + r + ", M21=" + h + ", M22=" + l,
                                b = n.x + m * n.xPercent / 100,
                                _ = n.y + f * n.yPercent / 100; if (null != n.ox && (b += (p = (n.oxp ? m * n.ox * .01 : n.ox) - m / 2) - (p * a + (d = (n.oyp ? f * n.oy * .01 : n.oy) - f / 2) * r), _ += d - (p * h + d * l)), v += y ? ", Dx=" + ((p = m / 2) - (p * a + (d = f / 2) * r) + b) + ", Dy=" + (d - (p * h + d * l) + _) + ")" : ", sizingMethod='auto expand')", -1 !== e.indexOf("DXImageTransform.Microsoft.Matrix(") ? c.filter = e.replace(M, v) : c.filter = v + " " + e, 0 !== t && 1 !== t || 1 === a && 0 === r && 0 === h && 1 === l && (y && -1 === v.indexOf("Dx=0, Dy=0") || C.test(e) && 100 !== parseFloat(RegExp.$1) || -1 === e.indexOf(e.indexOf("Alpha")) && c.removeAttribute("filter")), !y) { var S, A, T, x = g < 8 ? 1 : -1; for (p = n.ieOffsetX || 0, d = n.ieOffsetY || 0, n.ieOffsetX = Math.round((m - ((a < 0 ? -a : a) * m + (r < 0 ? -r : r) * f)) / 2 + b), n.ieOffsetY = Math.round((f - ((l < 0 ? -l : l) * f + (h < 0 ? -h : h) * m)) / 2 + _), wt = 0; wt < 4; wt++) T = (i = -1 !== (S = u[A = ot[wt]]).indexOf("px") ? parseFloat(S) : tt(this.t, A, parseFloat(S), S.replace(w, "")) || 0) !== n[A] ? wt < 2 ? -n.ieOffsetX : -n.ieOffsetY : wt < 2 ? p - n.ieOffsetX : d - n.ieOffsetY, c[A] = (n[A] = Math.round(i - T * (0 === wt || 2 === wt ? 1 : x))) + "px" } } },
                    Vt = W.set3DTransformRatio = W.setTransformRatio = function(t) { var e, i, n, s, o, a, r, h, l, c, u, p, m, g, f, y, v, b, _, S, w, C = this.data,
                            A = this.t.style,
                            T = C.rotation,
                            x = C.rotationX,
                            P = C.rotationY,
                            I = C.scaleX,
                            O = C.scaleY,
                            E = C.scaleZ,
                            L = C.x,
                            k = C.y,
                            M = C.z,
                            B = C.svg,
                            D = C.perspective,
                            R = C.force3D,
                            U = C.skewY,
                            F = C.skewX; if (U && (F += U, T += U), !((1 !== t && 0 !== t || "auto" !== R || this.tween._totalTime !== this.tween._totalDuration && this.tween._totalTime) && R || M || D || P || x || 1 !== E) || xt && B || !Lt) T || F || B ? (T *= G, S = F * G, w = 1e5, i = Math.cos(T) * I, o = Math.sin(T) * I, n = Math.sin(T - S) * -O, a = Math.cos(T - S) * O, S && "simple" === C.skewType && (e = Math.tan(S - U * G), n *= e = Math.sqrt(1 + e * e), a *= e, U && (e = Math.tan(U * G), i *= e = Math.sqrt(1 + e * e), o *= e)), B && (L += C.xOrigin - (C.xOrigin * i + C.yOrigin * n) + C.xOffset, k += C.yOrigin - (C.xOrigin * o + C.yOrigin * a) + C.yOffset, xt && (C.xPercent || C.yPercent) && (f = this.t.getBBox(), L += .01 * C.xPercent * f.width, k += .01 * C.yPercent * f.height), L < (f = 1e-6) && L > -f && (L = 0), k < f && k > -f && (k = 0)), _ = (i * w | 0) / w + "," + (o * w | 0) / w + "," + (n * w | 0) / w + "," + (a * w | 0) / w + "," + L + "," + k + ")", B && xt ? this.t.setAttribute("transform", "matrix(" + _) : A[It] = (C.xPercent || C.yPercent ? "translate(" + C.xPercent + "%," + C.yPercent + "%) matrix(" : "matrix(") + _) : A[It] = (C.xPercent || C.yPercent ? "translate(" + C.xPercent + "%," + C.yPercent + "%) matrix(" : "matrix(") + I + ",0,0," + O + "," + L + "," + k + ")";
                        else { if (d && (I < (f = 1e-4) && I > -f && (I = E = 2e-5), O < f && O > -f && (O = E = 2e-5), !D || C.z || C.rotationX || C.rotationY || (D = 0)), T || F) T *= G, y = i = Math.cos(T), v = o = Math.sin(T), F && (T -= F * G, y = Math.cos(T), v = Math.sin(T), "simple" === C.skewType && (e = Math.tan((F - U) * G), y *= e = Math.sqrt(1 + e * e), v *= e, C.skewY && (e = Math.tan(U * G), i *= e = Math.sqrt(1 + e * e), o *= e))), n = -v, a = y;
                            else { if (!(P || x || 1 !== E || D || B)) return void(A[It] = (C.xPercent || C.yPercent ? "translate(" + C.xPercent + "%," + C.yPercent + "%) translate3d(" : "translate3d(") + L + "px," + k + "px," + M + "px)" + (1 !== I || 1 !== O ? " scale(" + I + "," + O + ")" : ""));
                                i = a = 1, n = o = 0 } c = 1, s = r = h = l = u = p = 0, m = D ? -1 / D : 0, g = C.zOrigin, f = 1e-6, ",", "0", (T = P * G) && (y = Math.cos(T), h = -(v = Math.sin(T)), u = m * -v, s = i * v, r = o * v, c = y, m *= y, i *= y, o *= y), (T = x * G) && (e = n * (y = Math.cos(T)) + s * (v = Math.sin(T)), b = a * y + r * v, l = c * v, p = m * v, s = n * -v + s * y, r = a * -v + r * y, c *= y, m *= y, n = e, a = b), 1 !== E && (s *= E, r *= E, c *= E, m *= E), 1 !== O && (n *= O, a *= O, l *= O, p *= O), 1 !== I && (i *= I, o *= I, h *= I, u *= I), (g || B) && (g && (L += s * -g, k += r * -g, M += c * -g + g), B && (L += C.xOrigin - (C.xOrigin * i + C.yOrigin * n) + C.xOffset, k += C.yOrigin - (C.xOrigin * o + C.yOrigin * a) + C.yOffset), L < f && L > -f && (L = "0"), k < f && k > -f && (k = "0"), M < f && M > -f && (M = 0)), _ = C.xPercent || C.yPercent ? "translate(" + C.xPercent + "%," + C.yPercent + "%) matrix3d(" : "matrix3d(", _ += (i < f && i > -f ? "0" : i) + "," + (o < f && o > -f ? "0" : o) + "," + (h < f && h > -f ? "0" : h), _ += "," + (u < f && u > -f ? "0" : u) + "," + (n < f && n > -f ? "0" : n) + "," + (a < f && a > -f ? "0" : a), x || P || 1 !== E ? (_ += "," + (l < f && l > -f ? "0" : l) + "," + (p < f && p > -f ? "0" : p) + "," + (s < f && s > -f ? "0" : s), _ += "," + (r < f && r > -f ? "0" : r) + "," + (c < f && c > -f ? "0" : c) + "," + (m < f && m > -f ? "0" : m) + ",") : _ += ",0,0,0,0,1,0,", _ += L + "," + k + "," + M + "," + (D ? 1 + -M / D : 1) + ")", A[It] = _ } };
                (l = kt.prototype).x = l.y = l.z = l.skewX = l.skewY = l.rotation = l.rotationX = l.rotationY = l.zOrigin = l.xPercent = l.yPercent = l.xOffset = l.yOffset = 0, l.scaleX = l.scaleY = l.scaleZ = 1, At("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin", { parser: function(t, e, i, n, o, r, h) { if (n._lastParsedTransform === h) return o;
                        n._lastParsedTransform = h; var l, c = h.scale && "function" == typeof h.scale ? h.scale : 0; "function" == typeof h[i] && (l = h[i], h[i] = e), c && (h.scale = c(y, t)); var u, p, d, m, g, v, b, _, S, w = t._gsTransform,
                            C = t.style,
                            A = Pt.length,
                            T = h,
                            x = {},
                            P = Xt(t, s, !0, T.parseTransform),
                            I = T.transform && ("function" == typeof T.transform ? T.transform(y, f) : T.transform); if (P.skewType = T.skewType || P.skewType || a.defaultSkewType, n._transform = P, I && "string" == typeof I && It)(p = H.style)[It] = I, p.display = "block", p.position = "absolute", -1 !== I.indexOf("%") && (p.width = $(t, "width"), p.height = $(t, "height")), N.body.appendChild(H), u = Xt(H, null, !1), "simple" === P.skewType && (u.scaleY *= Math.cos(u.skewX * G)), P.svg && (v = P.xOrigin, b = P.yOrigin, u.x -= P.xOffset, u.y -= P.yOffset, (T.transformOrigin || T.svgOrigin) && (I = {}, Rt(t, rt(T.transformOrigin), I, T.svgOrigin, T.smoothOrigin, !0), v = I.xOrigin, b = I.yOrigin, u.x -= I.xOffset - P.xOffset, u.y -= I.yOffset - P.yOffset), (v || b) && (_ = Ht(H, !0), u.x -= v - (v * _[0] + b * _[2]), u.y -= b - (v * _[1] + b * _[3]))), N.body.removeChild(H), u.perspective || (u.perspective = P.perspective), null != T.xPercent && (u.xPercent = lt(T.xPercent, P.xPercent)), null != T.yPercent && (u.yPercent = lt(T.yPercent, P.yPercent));
                        else if ("object" == typeof T) { if (u = { scaleX: lt(null != T.scaleX ? T.scaleX : T.scale, P.scaleX), scaleY: lt(null != T.scaleY ? T.scaleY : T.scale, P.scaleY), scaleZ: lt(T.scaleZ, P.scaleZ), x: lt(T.x, P.x), y: lt(T.y, P.y), z: lt(T.z, P.z), xPercent: lt(T.xPercent, P.xPercent), yPercent: lt(T.yPercent, P.yPercent), perspective: lt(T.transformPerspective, P.perspective) }, null != (g = T.directionalRotation))
                                if ("object" == typeof g)
                                    for (p in g) T[p] = g[p];
                                else T.rotation = g; "string" == typeof T.x && -1 !== T.x.indexOf("%") && (u.x = 0, u.xPercent = lt(T.x, P.xPercent)), "string" == typeof T.y && -1 !== T.y.indexOf("%") && (u.y = 0, u.yPercent = lt(T.y, P.yPercent)), u.rotation = ct("rotation" in T ? T.rotation : "shortRotation" in T ? T.shortRotation + "_short" : "rotationZ" in T ? T.rotationZ : P.rotation, P.rotation, "rotation", x), Lt && (u.rotationX = ct("rotationX" in T ? T.rotationX : "shortRotationX" in T ? T.shortRotationX + "_short" : P.rotationX || 0, P.rotationX, "rotationX", x), u.rotationY = ct("rotationY" in T ? T.rotationY : "shortRotationY" in T ? T.shortRotationY + "_short" : P.rotationY || 0, P.rotationY, "rotationY", x)), u.skewX = ct(T.skewX, P.skewX), u.skewY = ct(T.skewY, P.skewY) } for (Lt && null != T.force3D && (P.force3D = T.force3D, m = !0), (d = P.force3D || P.z || P.rotationX || P.rotationY || u.z || u.rotationX || u.rotationY || u.perspective) || null == T.scale || (u.scaleZ = 1); --A > -1;)((I = u[S = Pt[A]] - P[S]) > 1e-6 || I < -1e-6 || null != T[S] || null != U[S]) && (m = !0, o = new bt(P, S, P[S], I, o), S in x && (o.e = x[S]), o.xs0 = 0, o.plugin = r, n._overwriteProps.push(o.n)); return I = T.transformOrigin, P.svg && (I || T.svgOrigin) && (v = P.xOffset, b = P.yOffset, Rt(t, rt(I), u, T.svgOrigin, T.smoothOrigin), o = _t(P, "xOrigin", (w ? P : u).xOrigin, u.xOrigin, o, "transformOrigin"), o = _t(P, "yOrigin", (w ? P : u).yOrigin, u.yOrigin, o, "transformOrigin"), v === P.xOffset && b === P.yOffset || (o = _t(P, "xOffset", w ? v : P.xOffset, P.xOffset, o, "transformOrigin"), o = _t(P, "yOffset", w ? b : P.yOffset, P.yOffset, o, "transformOrigin")), I = "0px 0px"), (I || Lt && d && P.zOrigin) && (It ? (m = !0, S = Et, I = (I || $(t, S, s, !1, "50% 50%")) + "", (o = new bt(C, S, 0, 0, o, -1, "transformOrigin")).b = C[S], o.plugin = r, Lt ? (p = P.zOrigin, I = I.split(" "), P.zOrigin = (I.length > 2 && (0 === p || "0px" !== I[2]) ? parseFloat(I[2]) : p) || 0, o.xs0 = o.e = I[0] + " " + (I[1] || "50%") + " 0px", (o = new bt(P, "zOrigin", 0, 0, o, -1, o.n)).b = p, o.xs0 = o.e = P.zOrigin) : o.xs0 = o.e = I) : rt(I + "", P)), m && (n._transformType = P.svg && xt || !d && 3 !== this._transformType ? 2 : 3), l && (h[i] = l), c && (h.scale = c), o }, prefix: !0 }), At("boxShadow", { defaultValue: "0px 0px 0px 0px #999", prefix: !0, color: !0, multi: !0, keyword: "inset" }), At("borderRadius", { defaultValue: "0px", parser: function(t, e, i, o, a, r) { e = this.format(e); var h, l, c, u, p, d, m, g, f, y, v, b, _, S, w, C, A = ["borderTopLeftRadius", "borderTopRightRadius", "borderBottomRightRadius", "borderBottomLeftRadius"],
                            T = t.style; for (f = parseFloat(t.offsetWidth), y = parseFloat(t.offsetHeight), h = e.split(" "), l = 0; l < A.length; l++) this.p.indexOf("border") && (A[l] = J(A[l])), -1 !== (p = u = $(t, A[l], s, !1, "0px")).indexOf(" ") && (p = (u = p.split(" "))[0], u = u[1]), d = c = h[l], m = parseFloat(p), b = p.substr((m + "").length), (_ = "=" === d.charAt(1)) ? (g = parseInt(d.charAt(0) + "1", 10), d = d.substr(2), g *= parseFloat(d), v = d.substr((g + "").length - (g < 0 ? 1 : 0)) || "") : (g = parseFloat(d), v = d.substr((g + "").length)), "" === v && (v = n[i] || b), v !== b && (S = tt(t, "borderLeft", m, b), w = tt(t, "borderTop", m, b), "%" === v ? (p = S / f * 100 + "%", u = w / y * 100 + "%") : "em" === v ? (p = S / (C = tt(t, "borderLeft", 1, "em")) + "em", u = w / C + "em") : (p = S + "px", u = w + "px"), _ && (d = parseFloat(p) + g + v, c = parseFloat(u) + g + v)), a = St(T, A[l], p + " " + u, d + " " + c, !1, "0px", a); return a }, prefix: !0, formatter: ft("0px 0px 0px 0px", !1, !0) }), At("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius", { defaultValue: "0px", parser: function(t, e, i, n, o, a) { return St(t.style, i, this.format($(t, i, s, !1, "0px 0px")), this.format(e), !1, "0px", o) }, prefix: !0, formatter: ft("0px 0px", !1, !0) }), At("backgroundPosition", { defaultValue: "0 0", parser: function(t, e, i, n, o, a) { var r, h, l, c, u, p, d = "background-position",
                            m = s || Q(t, null),
                            f = this.format((m ? g ? m.getPropertyValue(d + "-x") + " " + m.getPropertyValue(d + "-y") : m.getPropertyValue(d) : t.currentStyle.backgroundPositionX + " " + t.currentStyle.backgroundPositionY) || "0 0"),
                            y = this.format(e); if (-1 !== f.indexOf("%") != (-1 !== y.indexOf("%")) && y.split(",").length < 2 && (p = $(t, "backgroundImage").replace(O, "")) && "none" !== p) { for (r = f.split(" "), h = y.split(" "), X.setAttribute("src", p), l = 2; --l > -1;)(c = -1 !== (f = r[l]).indexOf("%")) !== (-1 !== h[l].indexOf("%")) && (u = 0 === l ? t.offsetWidth - X.width : t.offsetHeight - X.height, r[l] = c ? parseFloat(f) / 100 * u + "px" : parseFloat(f) / u * 100 + "%");
                            f = r.join(" ") } return this.parseComplex(t.style, f, y, o, a) }, formatter: rt }), At("backgroundSize", { defaultValue: "0 0", formatter: function(t) { return "co" === (t += "").substr(0, 2) ? t : rt(-1 === t.indexOf(" ") ? t + " " + t : t) } }), At("perspective", { defaultValue: "0px", prefix: !0 }), At("perspectiveOrigin", { defaultValue: "50% 50%", prefix: !0 }), At("transformStyle", { prefix: !0 }), At("backfaceVisibility", { prefix: !0 }), At("userSelect", { prefix: !0 }), At("margin", { parser: yt("marginTop,marginRight,marginBottom,marginLeft") }), At("padding", { parser: yt("paddingTop,paddingRight,paddingBottom,paddingLeft") }), At("clip", { defaultValue: "rect(0px,0px,0px,0px)", parser: function(t, e, i, n, o, a) { var r, h, l; return g < 9 ? (h = t.currentStyle, l = g < 8 ? " " : ",", r = "rect(" + h.clipTop + l + h.clipRight + l + h.clipBottom + l + h.clipLeft + ")", e = this.format(e).split(",").join(l)) : (r = this.format($(t, this.p, s, !1, this.dflt)), e = this.format(e)), this.parseComplex(t.style, r, e, o, a) } }), At("textShadow", { defaultValue: "0px 0px 0px #999", color: !0, multi: !0 }), At("autoRound,strictUnits", { parser: function(t, e, i, n, s) { return s } }), At("border", { defaultValue: "0px solid #000", parser: function(t, e, i, n, o, a) { var r = $(t, "borderTopWidth", s, !1, "0px"),
                            h = this.format(e).split(" "),
                            l = h[0].replace(w, ""); return "px" !== l && (r = parseFloat(r) / tt(t, "borderTopWidth", 1, l) + l), this.parseComplex(t.style, this.format(r + " " + $(t, "borderTopStyle", s, !1, "solid") + " " + $(t, "borderTopColor", s, !1, "#000")), h.join(" "), o, a) }, color: !0, formatter: function(t) { var e = t.split(" "); return e[0] + " " + (e[1] || "solid") + " " + (t.match(gt) || ["#000"])[0] } }), At("borderWidth", { parser: yt("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth") }), At("float,cssFloat,styleFloat", { parser: function(t, e, i, n, s, o) { var a = t.style,
                            r = "cssFloat" in a ? "cssFloat" : "styleFloat"; return new bt(a, r, 0, 0, s, -1, i, !1, 0, a[r], e) } }); var zt = function(t) { var e, i = this.t,
                        n = i.filter || $(this.data, "filter") || "",
                        s = this.s + this.c * t | 0;
                    100 === s && (-1 === n.indexOf("atrix(") && -1 === n.indexOf("radient(") && -1 === n.indexOf("oader(") ? (i.removeAttribute("filter"), e = !$(this.data, "filter")) : (i.filter = n.replace(T, ""), e = !0)), e || (this.xn1 && (i.filter = n = n || "alpha(opacity=" + s + ")"), -1 === n.indexOf("pacity") ? 0 === s && this.xn1 || (i.filter = n + " alpha(opacity=" + s + ")") : i.filter = n.replace(C, "opacity=" + s)) };
                At("opacity,alpha,autoAlpha", { defaultValue: "1", parser: function(t, e, i, n, o, a) { var r = parseFloat($(t, "opacity", s, !1, "1")),
                            h = t.style,
                            l = "autoAlpha" === i; return "string" == typeof e && "=" === e.charAt(1) && (e = ("-" === e.charAt(0) ? -1 : 1) * parseFloat(e.substr(2)) + r), l && 1 === r && "hidden" === $(t, "visibility", s) && 0 !== e && (r = 0), z ? o = new bt(h, "opacity", r, e - r, o) : ((o = new bt(h, "opacity", 100 * r, 100 * (e - r), o)).xn1 = l ? 1 : 0, h.zoom = 1, o.type = 2, o.b = "alpha(opacity=" + o.s + ")", o.e = "alpha(opacity=" + (o.s + o.c) + ")", o.data = t, o.plugin = a, o.setRatio = zt), l && ((o = new bt(h, "visibility", 0, 0, o, -1, null, !1, 0, 0 !== r ? "inherit" : "hidden", 0 === e ? "hidden" : "inherit")).xs0 = "inherit", n._overwriteProps.push(o.n), n._overwriteProps.push(i)), o } }); var Yt = function(t, e) { e && (t.removeProperty ? ("ms" !== e.substr(0, 2) && "webkit" !== e.substr(0, 6) || (e = "-" + e), t.removeProperty(e.replace(P, "-$1").toLowerCase())) : t.removeAttribute(e)) },
                    Kt = function(t) { if (this.t._gsClassPT = this, 1 === t || 0 === t) { this.t.setAttribute("class", 0 === t ? this.b : this.e); for (var e = this.data, i = this.t.style; e;) e.v ? i[e.p] = e.v : Yt(i, e.p), e = e._next;
                            1 === t && this.t._gsClassPT === this && (this.t._gsClassPT = null) } else this.t.getAttribute("class") !== this.e && this.t.setAttribute("class", this.e) };
                At("className", { parser: function(t, e, n, o, a, r, h) { var l, c, u, p, d, m = t.getAttribute("class") || "",
                            g = t.style.cssText; if (a = o._classNamePT = new bt(t, n, 0, 0, a, 2), a.setRatio = Kt, a.pr = -11, i = !0, a.b = m, c = it(t, s), u = t._gsClassPT) { for (p = {}, d = u.data; d;) p[d.p] = 1, d = d._next;
                            u.setRatio(1) } return t._gsClassPT = a, a.e = "=" !== e.charAt(1) ? e : m.replace(new RegExp("(?:\\s|^)" + e.substr(2) + "(?![\\w-])"), "") + ("+" === e.charAt(0) ? " " + e.substr(2) : ""), t.setAttribute("class", a.e), l = nt(t, c, it(t), h, p), t.setAttribute("class", m), a.data = l.firstMPT, t.style.cssText = g, a = a.xfirst = o.parse(t, l.difs, a, r) } }); var qt = function(t) { if ((1 === t || 0 === t) && this.data._totalTime === this.data._totalDuration && "isFromStart" !== this.data.data) { var e, i, n, s, o, a = this.t.style,
                            r = h.transform.parse; if ("all" === this.e) a.cssText = "", s = !0;
                        else
                            for (n = (e = this.e.split(" ").join("").split(",")).length; --n > -1;) i = e[n], h[i] && (h[i].parse === r ? s = !0 : i = "transformOrigin" === i ? Et : h[i].p), Yt(a, i);
                        s && (Yt(a, It), (o = this.t._gsTransform) && (o.svg && (this.t.removeAttribute("data-svg-origin"), this.t.removeAttribute("transform")), delete this.t._gsTransform)) } }; for (At("clearProps", { parser: function(t, e, n, s, o) { return o = new bt(t, n, 0, 0, o, 2), o.setRatio = qt, o.e = e, o.pr = -10, o.data = s._tween, i = !0, o } }), l = "bezier,throwProps,physicsProps,physics2D".split(","), wt = l.length; wt--;) Tt(l[wt]);
                (l = a.prototype)._firstPT = l._lastParsedTransform = l._transform = null, l._onInitTween = function(t, e, r, l) { if (!t.nodeType) return !1;
                    this._target = f = t, this._tween = r, this._vars = e, y = l, c = e.autoRound, i = !1, n = e.suffixMap || a.suffixMap, s = Q(t, ""), o = this._overwriteProps; var d, g, v, b, _, S, w, C, T, x = t.style; if (u && "" === x.zIndex && ("auto" !== (d = $(t, "zIndex", s)) && "" !== d || this._addLazySet(x, "zIndex", 0)), "string" == typeof e && (b = x.cssText, d = it(t, s), x.cssText = b + ";" + e, d = nt(t, d, it(t)).difs, !z && A.test(e) && (d.opacity = parseFloat(RegExp.$1)), e = d, x.cssText = b), e.className ? this._firstPT = g = h.className.parse(t, e.className, "className", this, null, null, e) : this._firstPT = g = this.parse(t, e, null), this._transformType) { for (T = 3 === this._transformType, It ? p && (u = !0, "" === x.zIndex && ("auto" !== (w = $(t, "zIndex", s)) && "" !== w || this._addLazySet(x, "zIndex", 0)), m && this._addLazySet(x, "WebkitBackfaceVisibility", this._vars.WebkitBackfaceVisibility || (T ? "visible" : "hidden"))) : x.zoom = 1, v = g; v && v._next;) v = v._next;
                        C = new bt(t, "transform", 0, 0, null, 2), this._linkCSSP(C, null, v), C.setRatio = It ? Vt : Wt, C.data = this._transform || Xt(t, s, !0), C.tween = r, C.pr = -1, o.pop() } if (i) { for (; g;) { for (S = g._next, v = b; v && v.pr > g.pr;) v = v._next;
                            (g._prev = v ? v._prev : _) ? g._prev._next = g: b = g, (g._next = v) ? v._prev = g : _ = g, g = S } this._firstPT = b } return !0 }, l.parse = function(t, e, i, o) { var a, r, l, u, p, d, m, g, v, b, _ = t.style; for (a in e) { if ("function" == typeof(d = e[a]) && (d = d(y, f)), r = h[a]) i = r.parse(t, d, a, this, i, o, e);
                        else { if ("--" === a.substr(0, 2)) { this._tween._propLookup[a] = this._addTween.call(this._tween, t.style, "setProperty", Q(t).getPropertyValue(a) + "", d + "", a, !1, a); continue } p = $(t, a, s) + "", v = "string" == typeof d, "color" === a || "fill" === a || "stroke" === a || -1 !== a.indexOf("Color") || v && x.test(d) ? (v || (d = ((d = dt(d)).length > 3 ? "rgba(" : "rgb(") + d.join(",") + ")"), i = St(_, a, p, d, !0, "transparent", i, 0, o)) : v && D.test(d) ? i = St(_, a, p, d, !0, null, i, 0, o) : (m = (l = parseFloat(p)) || 0 === l ? p.substr((l + "").length) : "", "" !== p && "auto" !== p || ("width" === a || "height" === a ? (l = at(t, a, s), m = "px") : "left" === a || "top" === a ? (l = et(t, a, s), m = "px") : (l = "opacity" !== a ? 0 : 1, m = "")), (b = v && "=" === d.charAt(1)) ? (u = parseInt(d.charAt(0) + "1", 10), d = d.substr(2), u *= parseFloat(d), g = d.replace(w, "")) : (u = parseFloat(d), g = v ? d.replace(w, "") : ""), "" === g && (g = a in n ? n[a] : m), d = u || 0 === u ? (b ? u + l : u) + g : e[a], m !== g && ("" === g && "lineHeight" !== a || (u || 0 === u) && l && (l = tt(t, a, l, m), "%" === g ? (l /= tt(t, a, 100, "%") / 100, !0 !== e.strictUnits && (p = l + "%")) : "em" === g || "rem" === g || "vw" === g || "vh" === g ? l /= tt(t, a, 1, g) : "px" !== g && (u = tt(t, a, u, g), g = "px"), b && (u || 0 === u) && (d = u + l + g))), b && (u += l), !l && 0 !== l || !u && 0 !== u ? void 0 !== _[a] && (d || d + "" != "NaN" && null != d) ? (i = new bt(_, a, u || l || 0, 0, i, -1, a, !1, 0, p, d)).xs0 = "none" !== d || "display" !== a && -1 === a.indexOf("Style") ? d : p : K("invalid " + a + " tween value: " + e[a]) : (i = new bt(_, a, l, u - l, i, 0, a, !1 !== c && ("px" === g || "zIndex" === a), 0, p, d)).xs0 = g) } o && i && !i.plugin && (i.plugin = o) } return i }, l.setRatio = function(t) { var e, i, n, s = this._firstPT; if (1 !== t || this._tween._time !== this._tween._duration && 0 !== this._tween._time)
                        if (t || this._tween._time !== this._tween._duration && 0 !== this._tween._time || -1e-6 === this._tween._rawPrevTime)
                            for (; s;) { if (e = s.c * t + s.s, s.r ? e = s.r(e) : e < 1e-6 && e > -1e-6 && (e = 0), s.type)
                                    if (1 === s.type)
                                        if (2 === (n = s.l)) s.t[s.p] = s.xs0 + e + s.xs1 + s.xn1 + s.xs2;
                                        else if (3 === n) s.t[s.p] = s.xs0 + e + s.xs1 + s.xn1 + s.xs2 + s.xn2 + s.xs3;
                                else if (4 === n) s.t[s.p] = s.xs0 + e + s.xs1 + s.xn1 + s.xs2 + s.xn2 + s.xs3 + s.xn3 + s.xs4;
                                else if (5 === n) s.t[s.p] = s.xs0 + e + s.xs1 + s.xn1 + s.xs2 + s.xn2 + s.xs3 + s.xn3 + s.xs4 + s.xn4 + s.xs5;
                                else { for (i = s.xs0 + e + s.xs1, n = 1; n < s.l; n++) i += s["xn" + n] + s["xs" + (n + 1)];
                                    s.t[s.p] = i } else -1 === s.type ? s.t[s.p] = s.xs0 : s.setRatio && s.setRatio(t);
                                else s.t[s.p] = e + s.xs0;
                                s = s._next } else
                                for (; s;) 2 !== s.type ? s.t[s.p] = s.b : s.setRatio(t), s = s._next;
                        else
                            for (; s;) { if (2 !== s.type)
                                    if (s.r && -1 !== s.type)
                                        if (e = s.r(s.s + s.c), s.type) { if (1 === s.type) { for (n = s.l, i = s.xs0 + e + s.xs1, n = 1; n < s.l; n++) i += s["xn" + n] + s["xs" + (n + 1)];
                                                s.t[s.p] = i } } else s.t[s.p] = e + s.xs0;
                                else s.t[s.p] = s.e;
                                else s.setRatio(t);
                                s = s._next } }, l._enableTransforms = function(t) { this._transform = this._transform || Xt(this._target, s, !0), this._transformType = this._transform.svg && xt || !t && 3 !== this._transformType ? 2 : 3 }; var Zt = function(t) { this.t[this.p] = this.e, this.data._linkCSSP(this, this._next, null, !0) };
                l._addLazySet = function(t, e, i) { var n = this._firstPT = new bt(t, e, 0, 0, this._firstPT, 2);
                    n.e = i, n.setRatio = Zt, n.data = this }, l._linkCSSP = function(t, e, i, n) { return t && (e && (e._prev = t), t._next && (t._next._prev = t._prev), t._prev ? t._prev._next = t._next : this._firstPT === t && (this._firstPT = t._next, n = !0), i ? i._next = t : n || null !== this._firstPT || (this._firstPT = t), t._next = e, t._prev = i), t }, l._mod = function(t) { for (var e = this._firstPT; e;) "function" == typeof t[e.p] && (e.r = t[e.p]), e = e._next }, l._kill = function(e) { var i, n, s, o = e; if (e.autoAlpha || e.alpha) { o = {}; for (n in e) o[n] = e[n];
                        o.opacity = 1, o.autoAlpha && (o.visibility = 1) } for (e.className && (i = this._classNamePT) && ((s = i.xfirst) && s._prev ? this._linkCSSP(s._prev, i._next, s._prev._prev) : s === this._firstPT && (this._firstPT = i._next), i._next && this._linkCSSP(i._next, i._next._next, s._prev), this._classNamePT = null), i = this._firstPT; i;) i.plugin && i.plugin !== n && i.plugin._kill && (i.plugin._kill(e), n = i.plugin), i = i._next; return t.prototype._kill.call(this, o) }; var Jt = function(t, e, i) { var n, s, o, a; if (t.slice)
                        for (s = t.length; --s > -1;) Jt(t[s], e, i);
                    else
                        for (s = (n = t.childNodes).length; --s > -1;) a = (o = n[s]).type, o.style && (e.push(it(o)), i && i.push(o)), 1 !== a && 9 !== a && 11 !== a || !o.childNodes.length || Jt(o, e, i) }; return a.cascadeTo = function(t, i, n) { var s, o, a, r, h = e.to(t, i, n),
                        l = [h],
                        c = [],
                        u = [],
                        p = [],
                        d = e._internals.reservedProps; for (t = h._targets || h.target, Jt(t, c, p), h.render(i, !0, !0), Jt(t, u), h.render(0, !0, !0), h._enabled(!0), s = p.length; --s > -1;)
                        if ((o = nt(p[s], c[s], u[s])).firstMPT) { o = o.difs; for (a in n) d[a] && (o[a] = n[a]);
                            r = {}; for (a in o) r[a] = c[s][a];
                            l.push(e.fromTo(p[s], i, r, o)) } return l }, t.activate([a]), a }, !0),
            function() { var t = function(t) { var e = t < 1 ? Math.pow(10, (t + "").length - 2) : 1; return function(i) { return (Math.round(i / t) * t * e | 0) / e } },
                    e = function(t, e) { for (; t;) t.f || t.blob || (t.m = e || Math.round), t = t._next },
                    i = _gsScope._gsDefine.plugin({ propName: "roundProps", version: "1.7.0", priority: -1, API: 2, init: function(t, e, i) { return this._tween = i, !0 } }).prototype;
                i._onInitAllProps = function() { var i, n, s, o, a = this._tween,
                        r = a.vars.roundProps,
                        h = {},
                        l = a._propLookup.roundProps; if ("object" != typeof r || r.push)
                        for ("string" == typeof r && (r = r.split(",")), s = r.length; --s > -1;) h[r[s]] = Math.round;
                    else
                        for (o in r) h[o] = t(r[o]); for (o in h)
                        for (i = a._firstPT; i;) n = i._next, i.pg ? i.t._mod(h) : i.n === o && (2 === i.f && i.t ? e(i.t._firstPT, h[o]) : (this._add(i.t, o, i.s, i.c, h[o]), n && (n._prev = i._prev), i._prev ? i._prev._next = n : a._firstPT === i && (a._firstPT = n), i._next = i._prev = null, a._propLookup[o] = l)), i = n; return !1 }, i._add = function(t, e, i, n, s) { this._addTween(t, e, i, i + n, e, s || Math.round), this._overwriteProps.push(e) } }(), _gsScope._gsDefine.plugin({ propName: "attr", API: 2, version: "0.6.1", init: function(t, e, i, n) { var s, o; if ("function" != typeof t.setAttribute) return !1; for (s in e) "function" == typeof(o = e[s]) && (o = o(n, t)), this._addTween(t, "setAttribute", t.getAttribute(s) + "", o + "", s, !1, s), this._overwriteProps.push(s); return !0 } }), _gsScope._gsDefine.plugin({ propName: "directionalRotation", version: "0.3.1", API: 2, init: function(t, e, i, n) { "object" != typeof e && (e = { rotation: e }), this.finals = {}; var s, o, a, r, h, l, c = !0 === e.useRadians ? 2 * Math.PI : 360; for (s in e) "useRadians" !== s && ("function" == typeof(r = e[s]) && (r = r(n, t)), o = (l = (r + "").split("_"))[0], a = parseFloat("function" != typeof t[s] ? t[s] : t[s.indexOf("set") || "function" != typeof t["get" + s.substr(3)] ? s : "get" + s.substr(3)]()), h = (r = this.finals[s] = "string" == typeof o && "=" === o.charAt(1) ? a + parseInt(o.charAt(0) + "1", 10) * Number(o.substr(2)) : Number(o) || 0) - a, l.length && (-1 !== (o = l.join("_")).indexOf("short") && (h %= c) !== h % (c / 2) && (h = h < 0 ? h + c : h - c), -1 !== o.indexOf("_cw") && h < 0 ? h = (h + 9999999999 * c) % c - (h / c | 0) * c : -1 !== o.indexOf("ccw") && h > 0 && (h = (h - 9999999999 * c) % c - (h / c | 0) * c)), (h > 1e-6 || h < -1e-6) && (this._addTween(t, s, a, a + h, s), this._overwriteProps.push(s))); return !0 }, set: function(t) { var e; if (1 !== t) this._super.setRatio.call(this, t);
                    else
                        for (e = this._firstPT; e;) e.f ? e.t[e.p](this.finals[e.p]) : e.t[e.p] = this.finals[e.p], e = e._next } })._autoCSS = !0, _gsScope._gsDefine("easing.Back", ["easing.Ease"], function(t) { var e, i, n, s, o = _gsScope.GreenSockGlobals || _gsScope,
                    a = o.com.greensock,
                    r = 2 * Math.PI,
                    h = Math.PI / 2,
                    l = a._class,
                    c = function(e, i) { var n = l("easing." + e, function() {}, !0),
                            s = n.prototype = new t; return s.constructor = n, s.getRatio = i, n },
                    u = t.register || function() {},
                    p = function(t, e, i, n, s) { var o = l("easing." + t, { easeOut: new e, easeIn: new i, easeInOut: new n }, !0); return u(o, t), o },
                    d = function(t, e, i) { this.t = t, this.v = e, i && (this.next = i, i.prev = this, this.c = i.v - e, this.gap = i.t - t) },
                    m = function(e, i) { var n = l("easing." + e, function(t) { this._p1 = t || 0 === t ? t : 1.70158, this._p2 = 1.525 * this._p1 }, !0),
                            s = n.prototype = new t; return s.constructor = n, s.getRatio = i, s.config = function(t) { return new n(t) }, n },
                    g = p("Back", m("BackOut", function(t) { return (t -= 1) * t * ((this._p1 + 1) * t + this._p1) + 1 }), m("BackIn", function(t) { return t * t * ((this._p1 + 1) * t - this._p1) }), m("BackInOut", function(t) { return (t *= 2) < 1 ? .5 * t * t * ((this._p2 + 1) * t - this._p2) : .5 * ((t -= 2) * t * ((this._p2 + 1) * t + this._p2) + 2) })),
                    f = l("easing.SlowMo", function(t, e, i) { e = e || 0 === e ? e : .7, null == t ? t = .7 : t > 1 && (t = 1), this._p = 1 !== t ? e : 0, this._p1 = (1 - t) / 2, this._p2 = t, this._p3 = this._p1 + this._p2, this._calcEnd = !0 === i }, !0),
                    y = f.prototype = new t; return y.constructor = f, y.getRatio = function(t) { var e = t + (.5 - t) * this._p; return t < this._p1 ? this._calcEnd ? 1 - (t = 1 - t / this._p1) * t : e - (t = 1 - t / this._p1) * t * t * t * e : t > this._p3 ? this._calcEnd ? 1 === t ? 0 : 1 - (t = (t - this._p3) / this._p1) * t : e + (t - e) * (t = (t - this._p3) / this._p1) * t * t * t : this._calcEnd ? 1 : e }, f.ease = new f(.7, .7), y.config = f.config = function(t, e, i) { return new f(t, e, i) }, e = l("easing.SteppedEase", function(t, e) { t = t || 1, this._p1 = 1 / t, this._p2 = t + (e ? 0 : 1), this._p3 = e ? 1 : 0 }, !0), y = e.prototype = new t, y.constructor = e, y.getRatio = function(t) { return t < 0 ? t = 0 : t >= 1 && (t = .999999999), ((this._p2 * t | 0) + this._p3) * this._p1 }, y.config = e.config = function(t, i) { return new e(t, i) }, i = l("easing.ExpoScaleEase", function(t, e, i) { this._p1 = Math.log(e / t), this._p2 = e - t, this._p3 = t, this._ease = i }, !0), y = i.prototype = new t, y.constructor = i, y.getRatio = function(t) { return this._ease && (t = this._ease.getRatio(t)), (this._p3 * Math.exp(this._p1 * t) - this._p3) / this._p2 }, y.config = i.config = function(t, e, n) { return new i(t, e, n) }, n = l("easing.RoughEase", function(e) { for (var i, n, s, o, a, r, h = (e = e || {}).taper || "none", l = [], c = 0, u = 0 | (e.points || 20), p = u, m = !1 !== e.randomize, g = !0 === e.clamp, f = e.template instanceof t ? e.template : null, y = "number" == typeof e.strength ? .4 * e.strength : .4; --p > -1;) i = m ? Math.random() : 1 / u * p, n = f ? f.getRatio(i) : i, s = "none" === h ? y : "out" === h ? (o = 1 - i) * o * y : "in" === h ? i * i * y : i < .5 ? (o = 2 * i) * o * .5 * y : (o = 2 * (1 - i)) * o * .5 * y, m ? n += Math.random() * s - .5 * s : p % 2 ? n += .5 * s : n -= .5 * s, g && (n > 1 ? n = 1 : n < 0 && (n = 0)), l[c++] = { x: i, y: n }; for (l.sort(function(t, e) { return t.x - e.x }), r = new d(1, 1, null), p = u; --p > -1;) a = l[p], r = new d(a.x, a.y, r);
                    this._prev = new d(0, 0, 0 !== r.t ? r : r.next) }, !0), y = n.prototype = new t, y.constructor = n, y.getRatio = function(t) { var e = this._prev; if (t > e.t) { for (; e.next && t >= e.t;) e = e.next;
                        e = e.prev } else
                        for (; e.prev && t <= e.t;) e = e.prev; return this._prev = e, e.v + (t - e.t) / e.gap * e.c }, y.config = function(t) { return new n(t) }, n.ease = new n, p("Bounce", c("BounceOut", function(t) { return t < 1 / 2.75 ? 7.5625 * t * t : t < 2 / 2.75 ? 7.5625 * (t -= 1.5 / 2.75) * t + .75 : t < 2.5 / 2.75 ? 7.5625 * (t -= 2.25 / 2.75) * t + .9375 : 7.5625 * (t -= 2.625 / 2.75) * t + .984375 }), c("BounceIn", function(t) { return (t = 1 - t) < 1 / 2.75 ? 1 - 7.5625 * t * t : t < 2 / 2.75 ? 1 - (7.5625 * (t -= 1.5 / 2.75) * t + .75) : t < 2.5 / 2.75 ? 1 - (7.5625 * (t -= 2.25 / 2.75) * t + .9375) : 1 - (7.5625 * (t -= 2.625 / 2.75) * t + .984375) }), c("BounceInOut", function(t) { var e = t < .5; return (t = e ? 1 - 2 * t : 2 * t - 1) < 1 / 2.75 ? t *= 7.5625 * t : t = t < 2 / 2.75 ? 7.5625 * (t -= 1.5 / 2.75) * t + .75 : t < 2.5 / 2.75 ? 7.5625 * (t -= 2.25 / 2.75) * t + .9375 : 7.5625 * (t -= 2.625 / 2.75) * t + .984375, e ? .5 * (1 - t) : .5 * t + .5 })), p("Circ", c("CircOut", function(t) { return Math.sqrt(1 - (t -= 1) * t) }), c("CircIn", function(t) { return -(Math.sqrt(1 - t * t) - 1) }), c("CircInOut", function(t) { return (t *= 2) < 1 ? -.5 * (Math.sqrt(1 - t * t) - 1) : .5 * (Math.sqrt(1 - (t -= 2) * t) + 1) })), s = function(e, i, n) { var s = l("easing." + e, function(t, e) { this._p1 = t >= 1 ? t : 1, this._p2 = (e || n) / (t < 1 ? t : 1), this._p3 = this._p2 / r * (Math.asin(1 / this._p1) || 0), this._p2 = r / this._p2 }, !0),
                        o = s.prototype = new t; return o.constructor = s, o.getRatio = i, o.config = function(t, e) { return new s(t, e) }, s }, p("Elastic", s("ElasticOut", function(t) { return this._p1 * Math.pow(2, -10 * t) * Math.sin((t - this._p3) * this._p2) + 1 }, .3), s("ElasticIn", function(t) { return -this._p1 * Math.pow(2, 10 * (t -= 1)) * Math.sin((t - this._p3) * this._p2) }, .3), s("ElasticInOut", function(t) { return (t *= 2) < 1 ? this._p1 * Math.pow(2, 10 * (t -= 1)) * Math.sin((t - this._p3) * this._p2) * -.5 : this._p1 * Math.pow(2, -10 * (t -= 1)) * Math.sin((t - this._p3) * this._p2) * .5 + 1 }, .45)), p("Expo", c("ExpoOut", function(t) { return 1 - Math.pow(2, -10 * t) }), c("ExpoIn", function(t) { return Math.pow(2, 10 * (t - 1)) - .001 }), c("ExpoInOut", function(t) { return (t *= 2) < 1 ? .5 * Math.pow(2, 10 * (t - 1)) : .5 * (2 - Math.pow(2, -10 * (t - 1))) })), p("Sine", c("SineOut", function(t) { return Math.sin(t * h) }), c("SineIn", function(t) { return 1 - Math.cos(t * h) }), c("SineInOut", function(t) { return -.5 * (Math.cos(Math.PI * t) - 1) })), l("easing.EaseLookup", { find: function(e) { return t.map[e] } }, !0), u(o.SlowMo, "SlowMo", "ease,"), u(n, "RoughEase", "ease,"), u(e, "SteppedEase", "ease,"), g }, !0) }), _gsScope._gsDefine && _gsScope._gsQueue.pop()(),
    function(t, e) { "use strict"; var i = {},
            n = t.document,
            s = t.GreenSockGlobals = t.GreenSockGlobals || t; if (s.TweenLite) return s.TweenLite; var o, a, r, h, l, c = function(t) { var e, i = t.split("."),
                    n = s; for (e = 0; e < i.length; e++) n[i[e]] = n = n[i[e]] || {}; return n },
            u = c("com.greensock"),
            p = function(t) { var e, i = [],
                    n = t.length; for (e = 0; e !== n; i.push(t[e++])); return i },
            d = function() {},
            m = function() { var t = Object.prototype.toString,
                    e = t.call([]); return function(i) { return null != i && (i instanceof Array || "object" == typeof i && !!i.push && t.call(i) === e) } }(),
            g = {},
            f = function(e, n, o, a) { this.sc = g[e] ? g[e].sc : [], g[e] = this, this.gsClass = null, this.func = o; var r = [];
                this.check = function(h) { for (var l, u, p, d, m = n.length, y = m; --m > -1;)(l = g[n[m]] || new f(n[m], [])).gsClass ? (r[m] = l.gsClass, y--) : h && l.sc.push(this); if (0 === y && o) { if (u = ("com.greensock." + e).split("."), p = u.pop(), d = c(u.join("."))[p] = this.gsClass = o.apply(o, r), a)
                            if (s[p] = i[p] = d, "undefined" != typeof module && module.exports)
                                if ("TweenMax" === e) { module.exports = i.TweenMax = d; for (m in i) d[m] = i[m] } else i.TweenMax && (i.TweenMax[p] = d);
                        else "function" == typeof define && define.amd && define((t.GreenSockAMDPath ? t.GreenSockAMDPath + "/" : "") + e.split(".").pop(), [], function() { return d }); for (m = 0; m < this.sc.length; m++) this.sc[m].check() } }, this.check(!0) },
            y = t._gsDefine = function(t, e, i, n) { return new f(t, e, i, n) },
            v = u._class = function(t, e, i) { return e = e || function() {}, y(t, [], function() { return e }, i), e };
        y.globals = s; var b = [0, 0, 1, 1],
            _ = v("easing.Ease", function(t, e, i, n) { this._func = t, this._type = i || 0, this._power = n || 0, this._params = e ? b.concat(e) : b }, !0),
            S = _.map = {},
            w = _.register = function(t, e, i, n) { for (var s, o, a, r, h = e.split(","), l = h.length, c = (i || "easeIn,easeOut,easeInOut").split(","); --l > -1;)
                    for (o = h[l], s = n ? v("easing." + o, null, !0) : u.easing[o] || {}, a = c.length; --a > -1;) r = c[a], S[o + "." + r] = S[r + o] = s[r] = t.getRatio ? t : t[r] || new t }; for ((r = _.prototype)._calcEnd = !1, r.getRatio = function(t) { if (this._func) return this._params[0] = t, this._func.apply(null, this._params); var e = this._type,
                    i = this._power,
                    n = 1 === e ? 1 - t : 2 === e ? t : t < .5 ? 2 * t : 2 * (1 - t); return 1 === i ? n *= n : 2 === i ? n *= n * n : 3 === i ? n *= n * n * n : 4 === i && (n *= n * n * n * n), 1 === e ? 1 - n : 2 === e ? n : t < .5 ? n / 2 : 1 - n / 2 }, a = (o = ["Linear", "Quad", "Cubic", "Quart", "Quint,Strong"]).length; --a > -1;) r = o[a] + ",Power" + a, w(new _(null, null, 1, a), r, "easeOut", !0), w(new _(null, null, 2, a), r, "easeIn" + (0 === a ? ",easeNone" : "")), w(new _(null, null, 3, a), r, "easeInOut");
        S.linear = u.easing.Linear.easeIn, S.swing = u.easing.Quad.easeInOut; var C = v("events.EventDispatcher", function(t) { this._listeners = {}, this._eventTarget = t || this });
        (r = C.prototype).addEventListener = function(t, e, i, n, s) { s = s || 0; var o, a, r = this._listeners[t],
                c = 0; for (this !== h || l || h.wake(), null == r && (this._listeners[t] = r = []), a = r.length; --a > -1;)(o = r[a]).c === e && o.s === i ? r.splice(a, 1) : 0 === c && o.pr < s && (c = a + 1);
            r.splice(c, 0, { c: e, s: i, up: n, pr: s }) }, r.removeEventListener = function(t, e) { var i, n = this._listeners[t]; if (n)
                for (i = n.length; --i > -1;)
                    if (n[i].c === e) return void n.splice(i, 1) }, r.dispatchEvent = function(t) { var e, i, n, s = this._listeners[t]; if (s)
                for ((e = s.length) > 1 && (s = s.slice(0)), i = this._eventTarget; --e > -1;)(n = s[e]) && (n.up ? n.c.call(n.s || i, { type: t, target: i }) : n.c.call(n.s || i)) }; var A = t.requestAnimationFrame,
            T = t.cancelAnimationFrame,
            x = Date.now || function() { return (new Date).getTime() },
            P = x(); for (a = (o = ["ms", "moz", "webkit", "o"]).length; --a > -1 && !A;) A = t[o[a] + "RequestAnimationFrame"], T = t[o[a] + "CancelAnimationFrame"] || t[o[a] + "CancelRequestAnimationFrame"];
        v("Ticker", function(t, e) { var i, s, o, a, r, c = this,
                u = x(),
                p = !(!1 === e || !A) && "auto",
                m = 500,
                g = 33,
                f = function(t) { var e, n, h = x() - P;
                    h > m && (u += h - g), P += h, c.time = (P - u) / 1e3, e = c.time - r, (!i || e > 0 || !0 === t) && (c.frame++, r += e + (e >= a ? .004 : a - e), n = !0), !0 !== t && (o = s(f)), n && c.dispatchEvent("tick") };
            C.call(c), c.time = c.frame = 0, c.tick = function() { f(!0) }, c.lagSmoothing = function(t, e) { if (!arguments.length) return m < 1e10;
                m = t || 1e10, g = Math.min(e, m, 0) }, c.sleep = function() { null != o && (p && T ? T(o) : clearTimeout(o), s = d, o = null, c === h && (l = !1)) }, c.wake = function(t) { null !== o ? c.sleep() : t ? u += -P + (P = x()) : c.frame > 10 && (P = x() - m + 5), s = 0 === i ? d : p && A ? A : function(t) { return setTimeout(t, 1e3 * (r - c.time) + 1 | 0) }, c === h && (l = !0), f(2) }, c.fps = function(t) { if (!arguments.length) return i;
                a = 1 / ((i = t) || 60), r = this.time + a, c.wake() }, c.useRAF = function(t) { if (!arguments.length) return p;
                c.sleep(), p = t, c.fps(i) }, c.fps(t), setTimeout(function() { "auto" === p && c.frame < 5 && "hidden" !== (n || {}).visibilityState && c.useRAF(!1) }, 1500) }), (r = u.Ticker.prototype = new u.events.EventDispatcher).constructor = u.Ticker; var I = v("core.Animation", function(t, e) { if (this.vars = e = e || {}, this._duration = this._totalDuration = t || 0, this._delay = Number(e.delay) || 0, this._timeScale = 1, this._active = !0 === e.immediateRender, this.data = e.data, this._reversed = !0 === e.reversed, K) { l || h.wake(); var i = this.vars.useFrames ? Y : K;
                i.add(this, i._time), this.vars.paused && this.paused(!0) } });
        h = I.ticker = new u.Ticker, (r = I.prototype)._dirty = r._gc = r._initted = r._paused = !1, r._totalTime = r._time = 0, r._rawPrevTime = -1, r._next = r._last = r._onUpdate = r._timeline = r.timeline = null, r._paused = !1; var O = function() { l && x() - P > 2e3 && ("hidden" !== (n || {}).visibilityState || !h.lagSmoothing()) && h.wake(); var t = setTimeout(O, 2e3);
            t.unref && t.unref() };
        O(), r.play = function(t, e) { return null != t && this.seek(t, e), this.reversed(!1).paused(!1) }, r.pause = function(t, e) { return null != t && this.seek(t, e), this.paused(!0) }, r.resume = function(t, e) { return null != t && this.seek(t, e), this.paused(!1) }, r.seek = function(t, e) { return this.totalTime(Number(t), !1 !== e) }, r.restart = function(t, e) { return this.reversed(!1).paused(!1).totalTime(t ? -this._delay : 0, !1 !== e, !0) }, r.reverse = function(t, e) { return null != t && this.seek(t || this.totalDuration(), e), this.reversed(!0).paused(!1) }, r.render = function(t, e, i) {}, r.invalidate = function() { return this._time = this._totalTime = 0, this._initted = this._gc = !1, this._rawPrevTime = -1, !this._gc && this.timeline || this._enabled(!0), this }, r.isActive = function() { var t, e = this._timeline,
                i = this._startTime; return !e || !this._gc && !this._paused && e.isActive() && (t = e.rawTime(!0)) >= i && t < i + this.totalDuration() / this._timeScale - 1e-7 }, r._enabled = function(t, e) { return l || h.wake(), this._gc = !t, this._active = this.isActive(), !0 !== e && (t && !this.timeline ? this._timeline.add(this, this._startTime - this._delay) : !t && this.timeline && this._timeline._remove(this, !0)), !1 }, r._kill = function(t, e) { return this._enabled(!1, !1) }, r.kill = function(t, e) { return this._kill(t, e), this }, r._uncache = function(t) { for (var e = t ? this : this.timeline; e;) e._dirty = !0, e = e.timeline; return this }, r._swapSelfInParams = function(t) { for (var e = t.length, i = t.concat(); --e > -1;) "{self}" === t[e] && (i[e] = this); return i }, r._callback = function(t) { var e = this.vars,
                i = e[t],
                n = e[t + "Params"],
                s = e[t + "Scope"] || e.callbackScope || this; switch (n ? n.length : 0) {
                case 0:
                    i.call(s); break;
                case 1:
                    i.call(s, n[0]); break;
                case 2:
                    i.call(s, n[0], n[1]); break;
                default:
                    i.apply(s, n) } }, r.eventCallback = function(t, e, i, n) { if ("on" === (t || "").substr(0, 2)) { var s = this.vars; if (1 === arguments.length) return s[t];
                null == e ? delete s[t] : (s[t] = e, s[t + "Params"] = m(i) && -1 !== i.join("").indexOf("{self}") ? this._swapSelfInParams(i) : i, s[t + "Scope"] = n), "onUpdate" === t && (this._onUpdate = e) } return this }, r.delay = function(t) { return arguments.length ? (this._timeline.smoothChildTiming && this.startTime(this._startTime + t - this._delay), this._delay = t, this) : this._delay }, r.duration = function(t) { return arguments.length ? (this._duration = this._totalDuration = t, this._uncache(!0), this._timeline.smoothChildTiming && this._time > 0 && this._time < this._duration && 0 !== t && this.totalTime(this._totalTime * (t / this._duration), !0), this) : (this._dirty = !1, this._duration) }, r.totalDuration = function(t) { return this._dirty = !1, arguments.length ? this.duration(t) : this._totalDuration }, r.time = function(t, e) { return arguments.length ? (this._dirty && this.totalDuration(), this.totalTime(t > this._duration ? this._duration : t, e)) : this._time }, r.totalTime = function(t, e, i) { if (l || h.wake(), !arguments.length) return this._totalTime; if (this._timeline) { if (t < 0 && !i && (t += this.totalDuration()), this._timeline.smoothChildTiming) { this._dirty && this.totalDuration(); var n = this._totalDuration,
                        s = this._timeline; if (t > n && !i && (t = n), this._startTime = (this._paused ? this._pauseTime : s._time) - (this._reversed ? n - t : t) / this._timeScale, s._dirty || this._uncache(!1), s._timeline)
                        for (; s._timeline;) s._timeline._time !== (s._startTime + s._totalTime) / s._timeScale && s.totalTime(s._totalTime, !0), s = s._timeline } this._gc && this._enabled(!0, !1), this._totalTime === t && 0 !== this._duration || (B.length && Z(), this.render(t, e, !1), B.length && Z()) } return this }, r.progress = r.totalProgress = function(t, e) { var i = this.duration(); return arguments.length ? this.totalTime(i * t, e) : i ? this._time / i : this.ratio }, r.startTime = function(t) { return arguments.length ? (t !== this._startTime && (this._startTime = t, this.timeline && this.timeline._sortChildren && this.timeline.add(this, t - this._delay)), this) : this._startTime }, r.endTime = function(t) { return this._startTime + (0 != t ? this.totalDuration() : this.duration()) / this._timeScale }, r.timeScale = function(t) { if (!arguments.length) return this._timeScale; var e, i; for (t = t || 1e-10, this._timeline && this._timeline.smoothChildTiming && (i = (e = this._pauseTime) || 0 === e ? e : this._timeline.totalTime(), this._startTime = i - (i - this._startTime) * this._timeScale / t), this._timeScale = t, i = this.timeline; i && i.timeline;) i._dirty = !0, i.totalDuration(), i = i.timeline; return this }, r.reversed = function(t) { return arguments.length ? (t != this._reversed && (this._reversed = t, this.totalTime(this._timeline && !this._timeline.smoothChildTiming ? this.totalDuration() - this._totalTime : this._totalTime, !0)), this) : this._reversed }, r.paused = function(t) { if (!arguments.length) return this._paused; var e, i, n = this._timeline; return t != this._paused && n && (l || t || h.wake(), i = (e = n.rawTime()) - this._pauseTime, !t && n.smoothChildTiming && (this._startTime += i, this._uncache(!1)), this._pauseTime = t ? e : null, this._paused = t, this._active = this.isActive(), !t && 0 !== i && this._initted && this.duration() && (e = n.smoothChildTiming ? this._totalTime : (e - this._startTime) / this._timeScale, this.render(e, e === this._totalTime, !0))), this._gc && !t && this._enabled(!0, !1), this }; var E = v("core.SimpleTimeline", function(t) { I.call(this, 0, t), this.autoRemoveChildren = this.smoothChildTiming = !0 });
        (r = E.prototype = new I).constructor = E, r.kill()._gc = !1, r._first = r._last = r._recent = null, r._sortChildren = !1, r.add = r.insert = function(t, e, i, n) { var s, o; if (t._startTime = Number(e || 0) + t._delay, t._paused && this !== t._timeline && (t._pauseTime = this.rawTime() - (t._timeline.rawTime() - t._pauseTime)), t.timeline && t.timeline._remove(t, !0), t.timeline = t._timeline = this, t._gc && t._enabled(!0, !0), s = this._last, this._sortChildren)
                for (o = t._startTime; s && s._startTime > o;) s = s._prev; return s ? (t._next = s._next, s._next = t) : (t._next = this._first, this._first = t), t._next ? t._next._prev = t : this._last = t, t._prev = s, this._recent = t, this._timeline && this._uncache(!0), this }, r._remove = function(t, e) { return t.timeline === this && (e || t._enabled(!1, !0), t._prev ? t._prev._next = t._next : this._first === t && (this._first = t._next), t._next ? t._next._prev = t._prev : this._last === t && (this._last = t._prev), t._next = t._prev = t.timeline = null, t === this._recent && (this._recent = this._last), this._timeline && this._uncache(!0)), this }, r.render = function(t, e, i) { var n, s = this._first; for (this._totalTime = this._time = this._rawPrevTime = t; s;) n = s._next, (s._active || t >= s._startTime && !s._paused && !s._gc) && (s._reversed ? s.render((s._dirty ? s.totalDuration() : s._totalDuration) - (t - s._startTime) * s._timeScale, e, i) : s.render((t - s._startTime) * s._timeScale, e, i)), s = n }, r.rawTime = function() { return l || h.wake(), this._totalTime }; var L = v("TweenLite", function(e, i, n) { if (I.call(this, i, n), this.render = L.prototype.render, null == e) throw "Cannot tween a null target.";
                this.target = e = "string" != typeof e ? e : L.selector(e) || e; var s, o, a, r = e.jquery || e.length && e !== t && e[0] && (e[0] === t || e[0].nodeType && e[0].style && !e.nodeType),
                    h = this.vars.overwrite; if (this._overwrite = h = null == h ? z[L.defaultOverwrite] : "number" == typeof h ? h >> 0 : z[h], (r || e instanceof Array || e.push && m(e)) && "number" != typeof e[0])
                    for (this._targets = a = p(e), this._propLookup = [], this._siblings = [], s = 0; s < a.length; s++)(o = a[s]) ? "string" != typeof o ? o.length && o !== t && o[0] && (o[0] === t || o[0].nodeType && o[0].style && !o.nodeType) ? (a.splice(s--, 1), this._targets = a = a.concat(p(o))) : (this._siblings[s] = J(o, this, !1), 1 === h && this._siblings[s].length > 1 && $(o, this, null, 1, this._siblings[s])) : "string" == typeof(o = a[s--] = L.selector(o)) && a.splice(s + 1, 1) : a.splice(s--, 1);
                else this._propLookup = {}, this._siblings = J(e, this, !1), 1 === h && this._siblings.length > 1 && $(e, this, null, 1, this._siblings);
                (this.vars.immediateRender || 0 === i && 0 === this._delay && !1 !== this.vars.immediateRender) && (this._time = -1e-10, this.render(Math.min(0, -this._delay))) }, !0),
            k = function(e) { return e && e.length && e !== t && e[0] && (e[0] === t || e[0].nodeType && e[0].style && !e.nodeType) },
            M = function(t, e) { var i, n = {}; for (i in t) V[i] || i in e && "transform" !== i && "x" !== i && "y" !== i && "width" !== i && "height" !== i && "className" !== i && "border" !== i || !(!H[i] || H[i] && H[i]._autoCSS) || (n[i] = t[i], delete t[i]);
                t.css = n };
        (r = L.prototype = new I).constructor = L, r.kill()._gc = !1, r.ratio = 0, r._firstPT = r._targets = r._overwrittenProps = r._startAt = null, r._notifyPluginsOfEnabled = r._lazy = !1, L.version = "1.20.5", L.defaultEase = r._ease = new _(null, null, 1, 1), L.defaultOverwrite = "auto", L.ticker = h, L.autoSleep = 120, L.lagSmoothing = function(t, e) { h.lagSmoothing(t, e) }, L.selector = t.$ || t.jQuery || function(e) { var i = t.$ || t.jQuery; return i ? (L.selector = i, i(e)) : (n || (n = t.document), n ? n.querySelectorAll ? n.querySelectorAll(e) : n.getElementById("#" === e.charAt(0) ? e.substr(1) : e) : e) }; var B = [],
            D = {},
            G = /(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,
            R = /[\+-]=-?[\.\d]/,
            U = function(t) { for (var e, i = this._firstPT; i;) e = i.blob ? 1 === t && null != this.end ? this.end : t ? this.join("") : this.start : i.c * t + i.s, i.m ? e = i.m.call(this._tween, e, this._target || i.t, this._tween) : e < 1e-6 && e > -1e-6 && !i.blob && (e = 0), i.f ? i.fp ? i.t[i.p](i.fp, e) : i.t[i.p](e) : i.t[i.p] = e, i = i._next },
            F = function(t, e, i, n) { var s, o, a, r, h, l, c, u = [],
                    p = 0,
                    d = "",
                    m = 0; for (u.start = t, u.end = e, t = u[0] = t + "", e = u[1] = e + "", i && (i(u), t = u[0], e = u[1]), u.length = 0, s = t.match(G) || [], o = e.match(G) || [], n && (n._next = null, n.blob = 1, u._firstPT = u._applyPT = n), h = o.length, r = 0; r < h; r++) c = o[r], d += (l = e.substr(p, e.indexOf(c, p) - p)) || !r ? l : ",", p += l.length, m ? m = (m + 1) % 5 : "rgba(" === l.substr(-5) && (m = 1), c === s[r] || s.length <= r ? d += c : (d && (u.push(d), d = ""), a = parseFloat(s[r]), u.push(a), u._firstPT = { _next: u._firstPT, t: u, p: u.length - 1, s: a, c: ("=" === c.charAt(1) ? parseInt(c.charAt(0) + "1", 10) * parseFloat(c.substr(2)) : parseFloat(c) - a) || 0, f: 0, m: m && m < 4 ? Math.round : 0 }), p += c.length; return (d += e.substr(p)) && u.push(d), u.setRatio = U, R.test(e) && (u.end = null), u },
            N = function(t, e, i, n, s, o, a, r, h) { "function" == typeof n && (n = n(h || 0, t)); var l = typeof t[e],
                    c = "function" !== l ? "" : e.indexOf("set") || "function" != typeof t["get" + e.substr(3)] ? e : "get" + e.substr(3),
                    u = "get" !== i ? i : c ? a ? t[c](a) : t[c]() : t[e],
                    p = "string" == typeof n && "=" === n.charAt(1),
                    d = { t: t, p: e, s: u, f: "function" === l, pg: 0, n: s || e, m: o ? "function" == typeof o ? o : Math.round : 0, pr: 0, c: p ? parseInt(n.charAt(0) + "1", 10) * parseFloat(n.substr(2)) : parseFloat(n) - u || 0 }; if (("number" != typeof u || "number" != typeof n && !p) && (a || isNaN(u) || !p && isNaN(n) || "boolean" == typeof u || "boolean" == typeof n ? (d.fp = a, d = { t: F(u, p ? parseFloat(d.s) + d.c + (d.s + "").replace(/[0-9\-\.]/g, "") : n, r || L.defaultStringFilter, d), p: "setRatio", s: 0, c: 1, f: 2, pg: 0, n: s || e, pr: 0, m: 0 }) : (d.s = parseFloat(u), p || (d.c = parseFloat(n) - d.s || 0))), d.c) return (d._next = this._firstPT) && (d._next._prev = d), this._firstPT = d, d },
            j = L._internals = { isArray: m, isSelector: k, lazyTweens: B, blobDif: F },
            H = L._plugins = {},
            X = j.tweenLookup = {},
            W = 0,
            V = j.reservedProps = { ease: 1, delay: 1, overwrite: 1, onComplete: 1, onCompleteParams: 1, onCompleteScope: 1, useFrames: 1, runBackwards: 1, startAt: 1, onUpdate: 1, onUpdateParams: 1, onUpdateScope: 1, onStart: 1, onStartParams: 1, onStartScope: 1, onReverseComplete: 1, onReverseCompleteParams: 1, onReverseCompleteScope: 1, onRepeat: 1, onRepeatParams: 1, onRepeatScope: 1, easeParams: 1, yoyo: 1, immediateRender: 1, repeat: 1, repeatDelay: 1, data: 1, paused: 1, reversed: 1, autoCSS: 1, lazy: 1, onOverwrite: 1, callbackScope: 1, stringFilter: 1, id: 1, yoyoEase: 1 },
            z = { none: 0, all: 1, auto: 2, concurrent: 3, allOnStart: 4, preexisting: 5, true: 1, false: 0 },
            Y = I._rootFramesTimeline = new E,
            K = I._rootTimeline = new E,
            q = 30,
            Z = j.lazyRender = function() { var t, e = B.length; for (D = {}; --e > -1;)(t = B[e]) && !1 !== t._lazy && (t.render(t._lazy[0], t._lazy[1], !0), t._lazy = !1);
                B.length = 0 };
        K._startTime = h.time, Y._startTime = h.frame, K._active = Y._active = !0, setTimeout(Z, 1), I._updateRoot = L.render = function() { var t, e, i; if (B.length && Z(), K.render((h.time - K._startTime) * K._timeScale, !1, !1), Y.render((h.frame - Y._startTime) * Y._timeScale, !1, !1), B.length && Z(), h.frame >= q) { q = h.frame + (parseInt(L.autoSleep, 10) || 120); for (i in X) { for (t = (e = X[i].tweens).length; --t > -1;) e[t]._gc && e.splice(t, 1);
                    0 === e.length && delete X[i] } if ((!(i = K._first) || i._paused) && L.autoSleep && !Y._first && 1 === h._listeners.tick.length) { for (; i && i._paused;) i = i._next;
                    i || h.sleep() } } }, h.addEventListener("tick", I._updateRoot); var J = function(t, e, i) { var n, s, o = t._gsTweenID; if (X[o || (t._gsTweenID = o = "t" + W++)] || (X[o] = { target: t, tweens: [] }), e && (n = X[o].tweens, n[s = n.length] = e, i))
                    for (; --s > -1;) n[s] === e && n.splice(s, 1); return X[o].tweens },
            Q = function(t, e, i, n) { var s, o, a = t.vars.onOverwrite; return a && (s = a(t, e, i, n)), (a = L.onOverwrite) && (o = a(t, e, i, n)), !1 !== s && !1 !== o },
            $ = function(t, e, i, n, s) { var o, a, r, h; if (1 === n || n >= 4) { for (h = s.length, o = 0; o < h; o++)
                        if ((r = s[o]) !== e) r._gc || r._kill(null, t, e) && (a = !0);
                        else if (5 === n) break; return a } var l, c = e._startTime + 1e-10,
                    u = [],
                    p = 0,
                    d = 0 === e._duration; for (o = s.length; --o > -1;)(r = s[o]) === e || r._gc || r._paused || (r._timeline !== e._timeline ? (l = l || tt(e, 0, d), 0 === tt(r, l, d) && (u[p++] = r)) : r._startTime <= c && r._startTime + r.totalDuration() / r._timeScale > c && ((d || !r._initted) && c - r._startTime <= 2e-10 || (u[p++] = r))); for (o = p; --o > -1;)
                    if (r = u[o], 2 === n && r._kill(i, t, e) && (a = !0), 2 !== n || !r._firstPT && r._initted) { if (2 !== n && !Q(r, e)) continue;
                        r._enabled(!1, !1) && (a = !0) } return a },
            tt = function(t, e, i) { for (var n = t._timeline, s = n._timeScale, o = t._startTime; n._timeline;) { if (o += n._startTime, s *= n._timeScale, n._paused) return -100;
                    n = n._timeline } return (o /= s) > e ? o - e : i && o === e || !t._initted && o - e < 2e-10 ? 1e-10 : (o += t.totalDuration() / t._timeScale / s) > e + 1e-10 ? 0 : o - e - 1e-10 };
        r._init = function() { var t, e, i, n, s, o, a = this.vars,
                r = this._overwrittenProps,
                h = this._duration,
                l = !!a.immediateRender,
                c = a.ease; if (a.startAt) { this._startAt && (this._startAt.render(-1, !0), this._startAt.kill()), s = {}; for (n in a.startAt) s[n] = a.startAt[n]; if (s.data = "isStart", s.overwrite = !1, s.immediateRender = !0, s.lazy = l && !1 !== a.lazy, s.startAt = s.delay = null, s.onUpdate = a.onUpdate, s.onUpdateParams = a.onUpdateParams, s.onUpdateScope = a.onUpdateScope || a.callbackScope || this, this._startAt = L.to(this.target || {}, 0, s), l)
                    if (this._time > 0) this._startAt = null;
                    else if (0 !== h) return } else if (a.runBackwards && 0 !== h)
                if (this._startAt) this._startAt.render(-1, !0), this._startAt.kill(), this._startAt = null;
                else { 0 !== this._time && (l = !1), i = {}; for (n in a) V[n] && "autoCSS" !== n || (i[n] = a[n]); if (i.overwrite = 0, i.data = "isFromStart", i.lazy = l && !1 !== a.lazy, i.immediateRender = l, this._startAt = L.to(this.target, 0, i), l) { if (0 === this._time) return } else this._startAt._init(), this._startAt._enabled(!1), this.vars.immediateRender && (this._startAt = null) } if (this._ease = c = c ? c instanceof _ ? c : "function" == typeof c ? new _(c, a.easeParams) : S[c] || L.defaultEase : L.defaultEase, a.easeParams instanceof Array && c.config && (this._ease = c.config.apply(c, a.easeParams)), this._easeType = this._ease._type, this._easePower = this._ease._power, this._firstPT = null, this._targets)
                for (o = this._targets.length, t = 0; t < o; t++) this._initProps(this._targets[t], this._propLookup[t] = {}, this._siblings[t], r ? r[t] : null, t) && (e = !0);
            else e = this._initProps(this.target, this._propLookup, this._siblings, r, 0); if (e && L._onPluginEvent("_onInitAllProps", this), r && (this._firstPT || "function" != typeof this.target && this._enabled(!1, !1)), a.runBackwards)
                for (i = this._firstPT; i;) i.s += i.c, i.c = -i.c, i = i._next;
            this._onUpdate = a.onUpdate, this._initted = !0 }, r._initProps = function(e, i, n, s, o) { var a, r, h, l, c, u; if (null == e) return !1;
            D[e._gsTweenID] && Z(), this.vars.css || e.style && e !== t && e.nodeType && H.css && !1 !== this.vars.autoCSS && M(this.vars, e); for (a in this.vars)
                if (u = this.vars[a], V[a]) u && (u instanceof Array || u.push && m(u)) && -1 !== u.join("").indexOf("{self}") && (this.vars[a] = u = this._swapSelfInParams(u, this));
                else if (H[a] && (l = new H[a])._onInitTween(e, this.vars[a], this, o)) { for (this._firstPT = c = { _next: this._firstPT, t: l, p: "setRatio", s: 0, c: 1, f: 1, n: a, pg: 1, pr: l._priority, m: 0 }, r = l._overwriteProps.length; --r > -1;) i[l._overwriteProps[r]] = this._firstPT;
                (l._priority || l._onInitAllProps) && (h = !0), (l._onDisable || l._onEnable) && (this._notifyPluginsOfEnabled = !0), c._next && (c._next._prev = c) } else i[a] = N.call(this, e, a, "get", u, a, 0, null, this.vars.stringFilter, o); return s && this._kill(s, e) ? this._initProps(e, i, n, s, o) : this._overwrite > 1 && this._firstPT && n.length > 1 && $(e, this, i, this._overwrite, n) ? (this._kill(i, e), this._initProps(e, i, n, s, o)) : (this._firstPT && (!1 !== this.vars.lazy && this._duration || this.vars.lazy && !this._duration) && (D[e._gsTweenID] = !0), h) }, r.render = function(t, e, i) { var n, s, o, a, r = this._time,
                h = this._duration,
                l = this._rawPrevTime; if (t >= h - 1e-7 && t >= 0) this._totalTime = this._time = h, this.ratio = this._ease._calcEnd ? this._ease.getRatio(1) : 1, this._reversed || (n = !0, s = "onComplete", i = i || this._timeline.autoRemoveChildren), 0 === h && (this._initted || !this.vars.lazy || i) && (this._startTime === this._timeline._duration && (t = 0), (l < 0 || t <= 0 && t >= -1e-7 || 1e-10 === l && "isPause" !== this.data) && l !== t && (i = !0, l > 1e-10 && (s = "onReverseComplete")), this._rawPrevTime = a = !e || t || l === t ? t : 1e-10);
            else if (t < 1e-7) this._totalTime = this._time = 0, this.ratio = this._ease._calcEnd ? this._ease.getRatio(0) : 0, (0 !== r || 0 === h && l > 0) && (s = "onReverseComplete", n = this._reversed), t < 0 && (this._active = !1, 0 === h && (this._initted || !this.vars.lazy || i) && (l >= 0 && (1e-10 !== l || "isPause" !== this.data) && (i = !0), this._rawPrevTime = a = !e || t || l === t ? t : 1e-10)), (!this._initted || this._startAt && this._startAt.progress()) && (i = !0);
            else if (this._totalTime = this._time = t, this._easeType) { var c = t / h,
                    u = this._easeType,
                    p = this._easePower;
                (1 === u || 3 === u && c >= .5) && (c = 1 - c), 3 === u && (c *= 2), 1 === p ? c *= c : 2 === p ? c *= c * c : 3 === p ? c *= c * c * c : 4 === p && (c *= c * c * c * c), this.ratio = 1 === u ? 1 - c : 2 === u ? c : t / h < .5 ? c / 2 : 1 - c / 2 } else this.ratio = this._ease.getRatio(t / h); if (this._time !== r || i) { if (!this._initted) { if (this._init(), !this._initted || this._gc) return; if (!i && this._firstPT && (!1 !== this.vars.lazy && this._duration || this.vars.lazy && !this._duration)) return this._time = this._totalTime = r, this._rawPrevTime = l, B.push(this), void(this._lazy = [t, e]);
                    this._time && !n ? this.ratio = this._ease.getRatio(this._time / h) : n && this._ease._calcEnd && (this.ratio = this._ease.getRatio(0 === this._time ? 0 : 1)) } for (!1 !== this._lazy && (this._lazy = !1), this._active || !this._paused && this._time !== r && t >= 0 && (this._active = !0), 0 === r && (this._startAt && (t >= 0 ? this._startAt.render(t, !0, i) : s || (s = "_dummyGS")), this.vars.onStart && (0 === this._time && 0 !== h || e || this._callback("onStart"))), o = this._firstPT; o;) o.f ? o.t[o.p](o.c * this.ratio + o.s) : o.t[o.p] = o.c * this.ratio + o.s, o = o._next;
                this._onUpdate && (t < 0 && this._startAt && -1e-4 !== t && this._startAt.render(t, !0, i), e || (this._time !== r || n || i) && this._callback("onUpdate")), s && (this._gc && !i || (t < 0 && this._startAt && !this._onUpdate && -1e-4 !== t && this._startAt.render(t, !0, i), n && (this._timeline.autoRemoveChildren && this._enabled(!1, !1), this._active = !1), !e && this.vars[s] && this._callback(s), 0 === h && 1e-10 === this._rawPrevTime && 1e-10 !== a && (this._rawPrevTime = 0))) } }, r._kill = function(t, e, i) { if ("all" === t && (t = null), null == t && (null == e || e === this.target)) return this._lazy = !1, this._enabled(!1, !1);
            e = "string" != typeof e ? e || this._targets || this.target : L.selector(e) || e; var n, s, o, a, r, h, l, c, u, p = i && this._time && i._startTime === this._startTime && this._timeline === i._timeline; if ((m(e) || k(e)) && "number" != typeof e[0])
                for (n = e.length; --n > -1;) this._kill(t, e[n], i) && (h = !0);
            else { if (this._targets) { for (n = this._targets.length; --n > -1;)
                        if (e === this._targets[n]) { r = this._propLookup[n] || {}, this._overwrittenProps = this._overwrittenProps || [], s = this._overwrittenProps[n] = t ? this._overwrittenProps[n] || {} : "all"; break } } else { if (e !== this.target) return !1;
                    r = this._propLookup, s = this._overwrittenProps = t ? this._overwrittenProps || {} : "all" } if (r) { if (l = t || r, c = t !== s && "all" !== s && t !== r && ("object" != typeof t || !t._tempKill), i && (L.onOverwrite || this.vars.onOverwrite)) { for (o in l) r[o] && (u || (u = []), u.push(o)); if ((u || !t) && !Q(this, i, e, u)) return !1 } for (o in l)(a = r[o]) && (p && (a.f ? a.t[a.p](a.s) : a.t[a.p] = a.s, h = !0), a.pg && a.t._kill(l) && (h = !0), a.pg && 0 !== a.t._overwriteProps.length || (a._prev ? a._prev._next = a._next : a === this._firstPT && (this._firstPT = a._next), a._next && (a._next._prev = a._prev), a._next = a._prev = null), delete r[o]), c && (s[o] = 1);!this._firstPT && this._initted && this._enabled(!1, !1) } } return h }, r.invalidate = function() { return this._notifyPluginsOfEnabled && L._onPluginEvent("_onDisable", this), this._firstPT = this._overwrittenProps = this._startAt = this._onUpdate = null, this._notifyPluginsOfEnabled = this._active = this._lazy = !1, this._propLookup = this._targets ? {} : [], I.prototype.invalidate.call(this), this.vars.immediateRender && (this._time = -1e-10, this.render(Math.min(0, -this._delay))), this }, r._enabled = function(t, e) { if (l || h.wake(), t && this._gc) { var i, n = this._targets; if (n)
                    for (i = n.length; --i > -1;) this._siblings[i] = J(n[i], this, !0);
                else this._siblings = J(this.target, this, !0) } return I.prototype._enabled.call(this, t, e), !(!this._notifyPluginsOfEnabled || !this._firstPT) && L._onPluginEvent(t ? "_onEnable" : "_onDisable", this) }, L.to = function(t, e, i) { return new L(t, e, i) }, L.from = function(t, e, i) { return i.runBackwards = !0, i.immediateRender = 0 != i.immediateRender, new L(t, e, i) }, L.fromTo = function(t, e, i, n) { return n.startAt = i, n.immediateRender = 0 != n.immediateRender && 0 != i.immediateRender, new L(t, e, n) }, L.delayedCall = function(t, e, i, n, s) { return new L(e, 0, { delay: t, onComplete: e, onCompleteParams: i, callbackScope: n, onReverseComplete: e, onReverseCompleteParams: i, immediateRender: !1, lazy: !1, useFrames: s, overwrite: 0 }) }, L.set = function(t, e) { return new L(t, 0, e) }, L.getTweensOf = function(t, e) { if (null == t) return [];
            t = "string" != typeof t ? t : L.selector(t) || t; var i, n, s, o; if ((m(t) || k(t)) && "number" != typeof t[0]) { for (i = t.length, n = []; --i > -1;) n = n.concat(L.getTweensOf(t[i], e)); for (i = n.length; --i > -1;)
                    for (o = n[i], s = i; --s > -1;) o === n[s] && n.splice(i, 1) } else if (t._gsTweenID)
                for (i = (n = J(t).concat()).length; --i > -1;)(n[i]._gc || e && !n[i].isActive()) && n.splice(i, 1); return n || [] }, L.killTweensOf = L.killDelayedCallsTo = function(t, e, i) { "object" == typeof e && (i = e, e = !1); for (var n = L.getTweensOf(t, e), s = n.length; --s > -1;) n[s]._kill(i, t) }; var et = v("plugins.TweenPlugin", function(t, e) { this._overwriteProps = (t || "").split(","), this._propName = this._overwriteProps[0], this._priority = e || 0, this._super = et.prototype }, !0); if (r = et.prototype, et.version = "1.19.0", et.API = 2, r._firstPT = null, r._addTween = N, r.setRatio = U, r._kill = function(t) { var e, i = this._overwriteProps,
                    n = this._firstPT; if (null != t[this._propName]) this._overwriteProps = [];
                else
                    for (e = i.length; --e > -1;) null != t[i[e]] && i.splice(e, 1); for (; n;) null != t[n.n] && (n._next && (n._next._prev = n._prev), n._prev ? (n._prev._next = n._next, n._prev = null) : this._firstPT === n && (this._firstPT = n._next)), n = n._next; return !1 }, r._mod = r._roundProps = function(t) { for (var e, i = this._firstPT; i;)(e = t[this._propName] || null != i.n && t[i.n.split(this._propName + "_").join("")]) && "function" == typeof e && (2 === i.f ? i.t._applyPT.m = e : i.m = e), i = i._next }, L._onPluginEvent = function(t, e) { var i, n, s, o, a, r = e._firstPT; if ("_onInitAllProps" === t) { for (; r;) { for (a = r._next, n = s; n && n.pr > r.pr;) n = n._next;
                        (r._prev = n ? n._prev : o) ? r._prev._next = r: s = r, (r._next = n) ? n._prev = r : o = r, r = a } r = e._firstPT = s } for (; r;) r.pg && "function" == typeof r.t[t] && r.t[t]() && (i = !0), r = r._next; return i }, et.activate = function(t) { for (var e = t.length; --e > -1;) t[e].API === et.API && (H[(new t[e])._propName] = t[e]); return !0 }, y.plugin = function(t) { if (!(t && t.propName && t.init && t.API)) throw "illegal plugin definition."; var e, i = t.propName,
                    n = t.priority || 0,
                    s = t.overwriteProps,
                    o = { init: "_onInitTween", set: "setRatio", kill: "_kill", round: "_mod", mod: "_mod", initAll: "_onInitAllProps" },
                    a = v("plugins." + i.charAt(0).toUpperCase() + i.substr(1) + "Plugin", function() { et.call(this, i, n), this._overwriteProps = s || [] }, !0 === t.global),
                    r = a.prototype = new et(i);
                r.constructor = a, a.API = t.API; for (e in o) "function" == typeof t[e] && (r[o[e]] = t[e]); return a.version = t.version, et.activate([a]), a }, o = t._gsQueue) { for (a = 0; a < o.length; a++) o[a](); for (r in g) g[r].func || t.console.log("GSAP encountered missing dependency: " + r) } l = !1 }("undefined" != typeof module && module.exports && "undefined" != typeof global ? global : this || window),
    function(t, e, i, n) { "use strict";

        function s(t, e, i) { return setTimeout(l(t, i), e) }

        function o(t, e, i) { return !!Array.isArray(t) && (a(t, i[e], i), !0) }

        function a(t, e, i) { var s; if (t)
                if (t.forEach) t.forEach(e, i);
                else if (t.length !== n)
                for (s = 0; s < t.length;) e.call(i, t[s], s, t), s++;
            else
                for (s in t) t.hasOwnProperty(s) && e.call(i, t[s], s, t) }

        function r(e, i, n) { var s = "DEPRECATED METHOD: " + i + "\n" + n + " AT \n"; return function() { var i = new Error("get-stack-trace"),
                    n = i && i.stack ? i.stack.replace(/^[^\(]+?[\n$]/gm, "").replace(/^\s+at\s+/gm, "").replace(/^Object.<anonymous>\s*\(/gm, "{anonymous}()@") : "Unknown Stack Trace",
                    o = t.console && (t.console.warn || t.console.log); return o && o.call(t.console, s, n), e.apply(this, arguments) } }

        function h(t, e, i) { var n, s = e.prototype;
            (n = t.prototype = Object.create(s)).constructor = t, n._super = s, i && ct(n, i) }

        function l(t, e) { return function() { return t.apply(e, arguments) } }

        function c(t, e) { return typeof t == dt ? t.apply(e ? e[0] || n : n, e) : t }

        function u(t, e) { return t === n ? e : t }

        function p(t, e, i) { a(f(e), function(e) { t.addEventListener(e, i, !1) }) }

        function d(t, e, i) { a(f(e), function(e) { t.removeEventListener(e, i, !1) }) }

        function m(t, e) { for (; t;) { if (t == e) return !0;
                t = t.parentNode } return !1 }

        function g(t, e) { return t.indexOf(e) > -1 }

        function f(t) { return t.trim().split(/\s+/g) }

        function y(t, e, i) { if (t.indexOf && !i) return t.indexOf(e); for (var n = 0; n < t.length;) { if (i && t[n][i] == e || !i && t[n] === e) return n;
                n++ } return -1 }

        function v(t) { return Array.prototype.slice.call(t, 0) }

        function b(t, e, i) { for (var n = [], s = [], o = 0; o < t.length;) { var a = e ? t[o][e] : t[o];
                y(s, a) < 0 && n.push(t[o]), s[o] = a, o++ } return i && (n = e ? n.sort(function(t, i) { return t[e] > i[e] }) : n.sort()), n }

        function _(t, e) { for (var i, s, o = e[0].toUpperCase() + e.slice(1), a = 0; a < ut.length;) { if (i = ut[a], (s = i ? i + o : e) in t) return s;
                a++ } return n }

        function S() { return bt++ }

        function w(e) { var i = e.ownerDocument || e; return i.defaultView || i.parentWindow || t }

        function C(t, e) { var i = this;
            this.manager = t, this.callback = e, this.element = t.element, this.target = t.options.inputTarget, this.domHandler = function(e) { c(t.options.enable, [t]) && i.handler(e) }, this.init() }

        function A(t) { var e = t.options.inputClass; return new(e || (wt ? U : Ct ? j : St ? X : R))(t, T) }

        function T(t, e, i) { var n = i.pointers.length,
                s = i.changedPointers.length,
                o = e & Tt && n - s == 0,
                a = e & (Pt | It) && n - s == 0;
            i.isFirst = !!o, i.isFinal = !!a, o && (t.session = {}), i.eventType = e, x(t, i), t.emit("hammer.input", i), t.recognize(i), t.session.prevInput = i }

        function x(t, e) { var i = t.session,
                n = e.pointers,
                s = n.length;
            i.firstInput || (i.firstInput = O(e)), s > 1 && !i.firstMultiple ? i.firstMultiple = O(e) : 1 === s && (i.firstMultiple = !1); var o = i.firstInput,
                a = i.firstMultiple,
                r = a ? a.center : o.center,
                h = e.center = E(n);
            e.timeStamp = ft(), e.deltaTime = e.timeStamp - o.timeStamp, e.angle = B(r, h), e.distance = M(r, h), P(i, e), e.offsetDirection = k(e.deltaX, e.deltaY); var l = L(e.deltaTime, e.deltaX, e.deltaY);
            e.overallVelocityX = l.x, e.overallVelocityY = l.y, e.overallVelocity = gt(l.x) > gt(l.y) ? l.x : l.y, e.scale = a ? G(a.pointers, n) : 1, e.rotation = a ? D(a.pointers, n) : 0, e.maxPointers = i.prevInput ? e.pointers.length > i.prevInput.maxPointers ? e.pointers.length : i.prevInput.maxPointers : e.pointers.length, I(i, e); var c = t.element;
            m(e.srcEvent.target, c) && (c = e.srcEvent.target), e.target = c }

        function P(t, e) { var i = e.center,
                n = t.offsetDelta || {},
                s = t.prevDelta || {},
                o = t.prevInput || {};
            e.eventType !== Tt && o.eventType !== Pt || (s = t.prevDelta = { x: o.deltaX || 0, y: o.deltaY || 0 }, n = t.offsetDelta = { x: i.x, y: i.y }), e.deltaX = s.x + (i.x - n.x), e.deltaY = s.y + (i.y - n.y) }

        function I(t, e) { var i, s, o, a, r = t.lastInterval || e,
                h = e.timeStamp - r.timeStamp; if (e.eventType != It && (h > At || r.velocity === n)) { var l = e.deltaX - r.deltaX,
                    c = e.deltaY - r.deltaY,
                    u = L(h, l, c);
                s = u.x, o = u.y, i = gt(u.x) > gt(u.y) ? u.x : u.y, a = k(l, c), t.lastInterval = e } else i = r.velocity, s = r.velocityX, o = r.velocityY, a = r.direction;
            e.velocity = i, e.velocityX = s, e.velocityY = o, e.direction = a }

        function O(t) { for (var e = [], i = 0; i < t.pointers.length;) e[i] = { clientX: mt(t.pointers[i].clientX), clientY: mt(t.pointers[i].clientY) }, i++; return { timeStamp: ft(), pointers: e, center: E(e), deltaX: t.deltaX, deltaY: t.deltaY } }

        function E(t) { var e = t.length; if (1 === e) return { x: mt(t[0].clientX), y: mt(t[0].clientY) }; for (var i = 0, n = 0, s = 0; s < e;) i += t[s].clientX, n += t[s].clientY, s++; return { x: mt(i / e), y: mt(n / e) } }

        function L(t, e, i) { return { x: e / t || 0, y: i / t || 0 } }

        function k(t, e) { return t === e ? Ot : gt(t) >= gt(e) ? t < 0 ? Et : Lt : e < 0 ? kt : Mt }

        function M(t, e, i) { i || (i = Rt); var n = e[i[0]] - t[i[0]],
                s = e[i[1]] - t[i[1]]; return Math.sqrt(n * n + s * s) }

        function B(t, e, i) { i || (i = Rt); var n = e[i[0]] - t[i[0]],
                s = e[i[1]] - t[i[1]]; return 180 * Math.atan2(s, n) / Math.PI }

        function D(t, e) { return B(e[1], e[0], Ut) + B(t[1], t[0], Ut) }

        function G(t, e) { return M(e[0], e[1], Ut) / M(t[0], t[1], Ut) }

        function R() { this.evEl = Nt, this.evWin = jt, this.pressed = !1, C.apply(this, arguments) }

        function U() { this.evEl = Wt, this.evWin = Vt, C.apply(this, arguments), this.store = this.manager.session.pointerEvents = [] }

        function F() { this.evTarget = Yt, this.evWin = Kt, this.started = !1, C.apply(this, arguments) }

        function N(t, e) { var i = v(t.touches),
                n = v(t.changedTouches); return e & (Pt | It) && (i = b(i.concat(n), "identifier", !0)), [i, n] }

        function j() { this.evTarget = Zt, this.targetIds = {}, C.apply(this, arguments) }

        function H(t, e) { var i = v(t.touches),
                n = this.targetIds; if (e & (Tt | xt) && 1 === i.length) return n[i[0].identifier] = !0, [i, i]; var s, o, a = v(t.changedTouches),
                r = [],
                h = this.target; if (o = i.filter(function(t) { return m(t.target, h) }), e === Tt)
                for (s = 0; s < o.length;) n[o[s].identifier] = !0, s++; for (s = 0; s < a.length;) n[a[s].identifier] && r.push(a[s]), e & (Pt | It) && delete n[a[s].identifier], s++; return r.length ? [b(o.concat(r), "identifier", !0), r] : void 0 }

        function X() { C.apply(this, arguments); var t = l(this.handler, this);
            this.touch = new j(this.manager, t), this.mouse = new R(this.manager, t), this.primaryTouch = null, this.lastTouches = [] }

        function W(t, e) { t & Tt ? (this.primaryTouch = e.changedPointers[0].identifier, V.call(this, e)) : t & (Pt | It) && V.call(this, e) }

        function V(t) { var e = t.changedPointers[0]; if (e.identifier === this.primaryTouch) { var i = { x: e.clientX, y: e.clientY };
                this.lastTouches.push(i); var n = this.lastTouches;
                setTimeout(function() { var t = n.indexOf(i);
                    t > -1 && n.splice(t, 1) }, Jt) } }

        function z(t) { for (var e = t.srcEvent.clientX, i = t.srcEvent.clientY, n = 0; n < this.lastTouches.length; n++) { var s = this.lastTouches[n],
                    o = Math.abs(e - s.x),
                    a = Math.abs(i - s.y); if (o <= Qt && a <= Qt) return !0 } return !1 }

        function Y(t, e) { this.manager = t, this.set(e) }

        function K(t) { if (g(t, ne)) return ne; var e = g(t, se),
                i = g(t, oe); return e && i ? ne : e || i ? e ? se : oe : g(t, ie) ? ie : ee }

        function q(t) { this.options = ct({}, this.defaults, t || {}), this.id = S(), this.manager = null, this.options.enable = u(this.options.enable, !0), this.state = re, this.simultaneous = {}, this.requireFail = [] }

        function Z(t) { return t & pe ? "cancel" : t & ce ? "end" : t & le ? "move" : t & he ? "start" : "" }

        function J(t) { return t == Mt ? "down" : t == kt ? "up" : t == Et ? "left" : t == Lt ? "right" : "" }

        function Q(t, e) { var i = e.manager; return i ? i.get(t) : t }

        function $() { q.apply(this, arguments) }

        function tt() { $.apply(this, arguments), this.pX = null, this.pY = null }

        function et() { $.apply(this, arguments) }

        function it() { q.apply(this, arguments), this._timer = null, this._input = null }

        function nt() { $.apply(this, arguments) }

        function st() { $.apply(this, arguments) }

        function ot() { q.apply(this, arguments), this.pTime = !1, this.pCenter = !1, this._timer = null, this._input = null, this.count = 0 }

        function at(t, e) { return e = e || {}, e.recognizers = u(e.recognizers, at.defaults.preset), new rt(t, e) }

        function rt(t, e) { this.options = ct({}, at.defaults, e || {}), this.options.inputTarget = this.options.inputTarget || t, this.handlers = {}, this.session = {}, this.recognizers = [], this.oldCssProps = {}, this.element = t, this.input = A(this), this.touchAction = new Y(this, this.options.touchAction), ht(this, !0), a(this.options.recognizers, function(t) { var e = this.add(new t[0](t[1]));
                t[2] && e.recognizeWith(t[2]), t[3] && e.requireFailure(t[3]) }, this) }

        function ht(t, e) { var i = t.element; if (i.style) { var n;
                a(t.options.cssProps, function(s, o) { n = _(i.style, o), e ? (t.oldCssProps[n] = i.style[n], i.style[n] = s) : i.style[n] = t.oldCssProps[n] || "" }), e || (t.oldCssProps = {}) } }

        function lt(t, i) { var n = e.createEvent("Event");
            n.initEvent(t, !0, !0), n.gesture = i, i.target.dispatchEvent(n) } var ct, ut = ["", "webkit", "Moz", "MS", "ms", "o"],
            pt = e.createElement("div"),
            dt = "function",
            mt = Math.round,
            gt = Math.abs,
            ft = Date.now;
        ct = "function" != typeof Object.assign ? function(t) { if (t === n || null === t) throw new TypeError("Cannot convert undefined or null to object"); for (var e = Object(t), i = 1; i < arguments.length; i++) { var s = arguments[i]; if (s !== n && null !== s)
                    for (var o in s) s.hasOwnProperty(o) && (e[o] = s[o]) } return e } : Object.assign; var yt = r(function(t, e, i) { for (var s = Object.keys(e), o = 0; o < s.length;)(!i || i && t[s[o]] === n) && (t[s[o]] = e[s[o]]), o++; return t }, "extend", "Use `assign`."),
            vt = r(function(t, e) { return yt(t, e, !0) }, "merge", "Use `assign`."),
            bt = 1,
            _t = /mobile|tablet|ip(ad|hone|od)|android/i,
            St = "ontouchstart" in t,
            wt = _(t, "PointerEvent") !== n,
            Ct = St && _t.test(navigator.userAgent),
            At = 25,
            Tt = 1,
            xt = 2,
            Pt = 4,
            It = 8,
            Ot = 1,
            Et = 2,
            Lt = 4,
            kt = 8,
            Mt = 16,
            Bt = Et | Lt,
            Dt = kt | Mt,
            Gt = Bt | Dt,
            Rt = ["x", "y"],
            Ut = ["clientX", "clientY"];
        C.prototype = { handler: function() {}, init: function() { this.evEl && p(this.element, this.evEl, this.domHandler), this.evTarget && p(this.target, this.evTarget, this.domHandler), this.evWin && p(w(this.element), this.evWin, this.domHandler) }, destroy: function() { this.evEl && d(this.element, this.evEl, this.domHandler), this.evTarget && d(this.target, this.evTarget, this.domHandler), this.evWin && d(w(this.element), this.evWin, this.domHandler) } }; var Ft = { mousedown: Tt, mousemove: xt, mouseup: Pt },
            Nt = "mousedown",
            jt = "mousemove mouseup";
        h(R, C, { handler: function(t) { var e = Ft[t.type];
                e & Tt && 0 === t.button && (this.pressed = !0), e & xt && 1 !== t.which && (e = Pt), this.pressed && (e & Pt && (this.pressed = !1), this.callback(this.manager, e, { pointers: [t], changedPointers: [t], pointerType: "mouse", srcEvent: t })) } }); var Ht = { pointerdown: Tt, pointermove: xt, pointerup: Pt, pointercancel: It, pointerout: It },
            Xt = { 2: "touch", 3: "pen", 4: "mouse", 5: "kinect" },
            Wt = "pointerdown",
            Vt = "pointermove pointerup pointercancel";
        t.MSPointerEvent && !t.PointerEvent && (Wt = "MSPointerDown", Vt = "MSPointerMove MSPointerUp MSPointerCancel"), h(U, C, { handler: function(t) { var e = this.store,
                    i = !1,
                    n = t.type.toLowerCase().replace("ms", ""),
                    s = Ht[n],
                    o = Xt[t.pointerType] || t.pointerType,
                    a = "touch" == o,
                    r = y(e, t.pointerId, "pointerId");
                s & Tt && (0 === t.button || a) ? r < 0 && (e.push(t), r = e.length - 1) : s & (Pt | It) && (i = !0), r < 0 || (e[r] = t, this.callback(this.manager, s, { pointers: e, changedPointers: [t], pointerType: o, srcEvent: t }), i && e.splice(r, 1)) } }); var zt = { touchstart: Tt, touchmove: xt, touchend: Pt, touchcancel: It },
            Yt = "touchstart",
            Kt = "touchstart touchmove touchend touchcancel";
        h(F, C, { handler: function(t) { var e = zt[t.type]; if (e === Tt && (this.started = !0), this.started) { var i = N.call(this, t, e);
                    e & (Pt | It) && i[0].length - i[1].length == 0 && (this.started = !1), this.callback(this.manager, e, { pointers: i[0], changedPointers: i[1], pointerType: "touch", srcEvent: t }) } } }); var qt = { touchstart: Tt, touchmove: xt, touchend: Pt, touchcancel: It },
            Zt = "touchstart touchmove touchend touchcancel";
        h(j, C, { handler: function(t) { var e = qt[t.type],
                    i = H.call(this, t, e);
                i && this.callback(this.manager, e, { pointers: i[0], changedPointers: i[1], pointerType: "touch", srcEvent: t }) } }); var Jt = 2500,
            Qt = 25;
        h(X, C, { handler: function(t, e, i) { var n = "touch" == i.pointerType,
                    s = "mouse" == i.pointerType; if (!(s && i.sourceCapabilities && i.sourceCapabilities.firesTouchEvents)) { if (n) W.call(this, e, i);
                    else if (s && z.call(this, i)) return;
                    this.callback(t, e, i) } }, destroy: function() { this.touch.destroy(), this.mouse.destroy() } }); var $t = _(pt.style, "touchAction"),
            te = $t !== n,
            ee = "auto",
            ie = "manipulation",
            ne = "none",
            se = "pan-x",
            oe = "pan-y",
            ae = function() { if (!te) return !1; var e = {},
                    i = t.CSS && t.CSS.supports; return ["auto", "manipulation", "pan-y", "pan-x", "pan-x pan-y", "none"].forEach(function(n) { e[n] = !i || t.CSS.supports("touch-action", n) }), e }();
        Y.prototype = { set: function(t) { "compute" == t && (t = this.compute()), te && this.manager.element.style && ae[t] && (this.manager.element.style[$t] = t), this.actions = t.toLowerCase().trim() }, update: function() { this.set(this.manager.options.touchAction) }, compute: function() { var t = []; return a(this.manager.recognizers, function(e) { c(e.options.enable, [e]) && (t = t.concat(e.getTouchAction())) }), K(t.join(" ")) }, preventDefaults: function(t) { var e = t.srcEvent,
                    i = t.offsetDirection; if (this.manager.session.prevented) e.preventDefault();
                else { var n = this.actions,
                        s = g(n, ne) && !ae[ne],
                        o = g(n, oe) && !ae[oe],
                        a = g(n, se) && !ae[se]; if (s) { var r = 1 === t.pointers.length,
                            h = t.distance < 2,
                            l = t.deltaTime < 250; if (r && h && l) return } if (!a || !o) return s || o && i & Bt || a && i & Dt ? this.preventSrc(e) : void 0 } }, preventSrc: function(t) { this.manager.session.prevented = !0, t.preventDefault() } }; var re = 1,
            he = 2,
            le = 4,
            ce = 8,
            ue = ce,
            pe = 16;
        q.prototype = { defaults: {}, set: function(t) { return ct(this.options, t), this.manager && this.manager.touchAction.update(), this }, recognizeWith: function(t) { if (o(t, "recognizeWith", this)) return this; var e = this.simultaneous; return t = Q(t, this), e[t.id] || (e[t.id] = t, t.recognizeWith(this)), this }, dropRecognizeWith: function(t) { return o(t, "dropRecognizeWith", this) ? this : (t = Q(t, this), delete this.simultaneous[t.id], this) }, requireFailure: function(t) { if (o(t, "requireFailure", this)) return this; var e = this.requireFail; return t = Q(t, this), -1 === y(e, t) && (e.push(t), t.requireFailure(this)), this }, dropRequireFailure: function(t) { if (o(t, "dropRequireFailure", this)) return this;
                t = Q(t, this); var e = y(this.requireFail, t); return e > -1 && this.requireFail.splice(e, 1), this }, hasRequireFailures: function() { return this.requireFail.length > 0 }, canRecognizeWith: function(t) { return !!this.simultaneous[t.id] }, emit: function(t) {
                function e(e) { i.manager.emit(e, t) } var i = this,
                    n = this.state;
                n < ce && e(i.options.event + Z(n)), e(i.options.event), t.additionalEvent && e(t.additionalEvent), n >= ce && e(i.options.event + Z(n)) }, tryEmit: function(t) { if (this.canEmit()) return this.emit(t);
                this.state = 32 }, canEmit: function() { for (var t = 0; t < this.requireFail.length;) { if (!(this.requireFail[t].state & (32 | re))) return !1;
                    t++ } return !0 }, recognize: function(t) { var e = ct({}, t); if (!c(this.options.enable, [this, e])) return this.reset(), void(this.state = 32);
                this.state & (ue | pe | 32) && (this.state = re), this.state = this.process(e), this.state & (he | le | ce | pe) && this.tryEmit(e) }, process: function(t) {}, getTouchAction: function() {}, reset: function() {} }, h($, q, { defaults: { pointers: 1 }, attrTest: function(t) { var e = this.options.pointers; return 0 === e || t.pointers.length === e }, process: function(t) { var e = this.state,
                    i = t.eventType,
                    n = e & (he | le),
                    s = this.attrTest(t); return n && (i & It || !s) ? e | pe : n || s ? i & Pt ? e | ce : e & he ? e | le : he : 32 } }), h(tt, $, { defaults: { event: "pan", threshold: 10, pointers: 1, direction: Gt }, getTouchAction: function() { var t = this.options.direction,
                    e = []; return t & Bt && e.push(oe), t & Dt && e.push(se), e }, directionTest: function(t) { var e = this.options,
                    i = !0,
                    n = t.distance,
                    s = t.direction,
                    o = t.deltaX,
                    a = t.deltaY; return s & e.direction || (e.direction & Bt ? (s = 0 === o ? Ot : o < 0 ? Et : Lt, i = o != this.pX, n = Math.abs(t.deltaX)) : (s = 0 === a ? Ot : a < 0 ? kt : Mt, i = a != this.pY, n = Math.abs(t.deltaY))), t.direction = s, i && n > e.threshold && s & e.direction }, attrTest: function(t) { return $.prototype.attrTest.call(this, t) && (this.state & he || !(this.state & he) && this.directionTest(t)) }, emit: function(t) { this.pX = t.deltaX, this.pY = t.deltaY; var e = J(t.direction);
                e && (t.additionalEvent = this.options.event + e), this._super.emit.call(this, t) } }), h(et, $, { defaults: { event: "pinch", threshold: 0, pointers: 2 }, getTouchAction: function() { return [ne] }, attrTest: function(t) { return this._super.attrTest.call(this, t) && (Math.abs(t.scale - 1) > this.options.threshold || this.state & he) }, emit: function(t) { if (1 !== t.scale) { var e = t.scale < 1 ? "in" : "out";
                    t.additionalEvent = this.options.event + e } this._super.emit.call(this, t) } }), h(it, q, { defaults: { event: "press", pointers: 1, time: 251, threshold: 9 }, getTouchAction: function() { return [ee] }, process: function(t) { var e = this.options,
                    i = t.pointers.length === e.pointers,
                    n = t.distance < e.threshold,
                    o = t.deltaTime > e.time; if (this._input = t, !n || !i || t.eventType & (Pt | It) && !o) this.reset();
                else if (t.eventType & Tt) this.reset(), this._timer = s(function() { this.state = ue, this.tryEmit() }, e.time, this);
                else if (t.eventType & Pt) return ue; return 32 }, reset: function() { clearTimeout(this._timer) }, emit: function(t) { this.state === ue && (t && t.eventType & Pt ? this.manager.emit(this.options.event + "up", t) : (this._input.timeStamp = ft(), this.manager.emit(this.options.event, this._input))) } }), h(nt, $, { defaults: { event: "rotate", threshold: 0, pointers: 2 }, getTouchAction: function() { return [ne] }, attrTest: function(t) { return this._super.attrTest.call(this, t) && (Math.abs(t.rotation) > this.options.threshold || this.state & he) } }), h(st, $, { defaults: { event: "swipe", threshold: 10, velocity: .3, direction: Bt | Dt, pointers: 1 }, getTouchAction: function() { return tt.prototype.getTouchAction.call(this) }, attrTest: function(t) { var e, i = this.options.direction; return i & (Bt | Dt) ? e = t.overallVelocity : i & Bt ? e = t.overallVelocityX : i & Dt && (e = t.overallVelocityY), this._super.attrTest.call(this, t) && i & t.offsetDirection && t.distance > this.options.threshold && t.maxPointers == this.options.pointers && gt(e) > this.options.velocity && t.eventType & Pt }, emit: function(t) { var e = J(t.offsetDirection);
                e && this.manager.emit(this.options.event + e, t), this.manager.emit(this.options.event, t) } }), h(ot, q, { defaults: { event: "tap", pointers: 1, taps: 1, interval: 300, time: 250, threshold: 9, posThreshold: 10 }, getTouchAction: function() { return [ie] }, process: function(t) { var e = this.options,
                    i = t.pointers.length === e.pointers,
                    n = t.distance < e.threshold,
                    o = t.deltaTime < e.time; if (this.reset(), t.eventType & Tt && 0 === this.count) return this.failTimeout(); if (n && o && i) { if (t.eventType != Pt) return this.failTimeout(); var a = !this.pTime || t.timeStamp - this.pTime < e.interval,
                        r = !this.pCenter || M(this.pCenter, t.center) < e.posThreshold; if (this.pTime = t.timeStamp, this.pCenter = t.center, r && a ? this.count += 1 : this.count = 1, this._input = t, 0 === this.count % e.taps) return this.hasRequireFailures() ? (this._timer = s(function() { this.state = ue, this.tryEmit() }, e.interval, this), he) : ue } return 32 }, failTimeout: function() { return this._timer = s(function() { this.state = 32 }, this.options.interval, this), 32 }, reset: function() { clearTimeout(this._timer) }, emit: function() { this.state == ue && (this._input.tapCount = this.count, this.manager.emit(this.options.event, this._input)) } }), at.VERSION = "2.0.7", at.defaults = { domEvents: !1, touchAction: "compute", enable: !0, inputTarget: null, inputClass: null, preset: [
                [nt, { enable: !1 }],
                [et, { enable: !1 },
                    ["rotate"]
                ],
                [st, { direction: Bt }],
                [tt, { direction: Bt },
                    ["swipe"]
                ],
                [ot],
                [ot, { event: "doubletap", taps: 2 },
                    ["tap"]
                ],
                [it]
            ], cssProps: { userSelect: "none", touchSelect: "none", touchCallout: "none", contentZooming: "none", userDrag: "none", tapHighlightColor: "rgba(0,0,0,0)" } };
        rt.prototype = { set: function(t) { return ct(this.options, t), t.touchAction && this.touchAction.update(), t.inputTarget && (this.input.destroy(), this.input.target = t.inputTarget, this.input.init()), this }, stop: function(t) { this.session.stopped = t ? 2 : 1 }, recognize: function(t) { var e = this.session; if (!e.stopped) { this.touchAction.preventDefaults(t); var i, n = this.recognizers,
                        s = e.curRecognizer;
                    (!s || s && s.state & ue) && (s = e.curRecognizer = null); for (var o = 0; o < n.length;) i = n[o], 2 === e.stopped || s && i != s && !i.canRecognizeWith(s) ? i.reset() : i.recognize(t), !s && i.state & (he | le | ce) && (s = e.curRecognizer = i), o++ } }, get: function(t) { if (t instanceof q) return t; for (var e = this.recognizers, i = 0; i < e.length; i++)
                    if (e[i].options.event == t) return e[i]; return null }, add: function(t) { if (o(t, "add", this)) return this; var e = this.get(t.options.event); return e && this.remove(e), this.recognizers.push(t), t.manager = this, this.touchAction.update(), t }, remove: function(t) { if (o(t, "remove", this)) return this; if (t = this.get(t)) { var e = this.recognizers,
                        i = y(e, t); - 1 !== i && (e.splice(i, 1), this.touchAction.update()) } return this }, on: function(t, e) { if (t !== n && e !== n) { var i = this.handlers; return a(f(t), function(t) { i[t] = i[t] || [], i[t].push(e) }), this } }, off: function(t, e) { if (t !== n) { var i = this.handlers; return a(f(t), function(t) { e ? i[t] && i[t].splice(y(i[t], e), 1) : delete i[t] }), this } }, emit: function(t, e) { this.options.domEvents && lt(t, e); var i = this.handlers[t] && this.handlers[t].slice(); if (i && i.length) { e.type = t, e.preventDefault = function() { e.srcEvent.preventDefault() }; for (var n = 0; n < i.length;) i[n](e), n++ } }, destroy: function() { this.element && ht(this, !1), this.handlers = {}, this.session = {}, this.input.destroy(), this.element = null } }, ct(at, { INPUT_START: Tt, INPUT_MOVE: xt, INPUT_END: Pt, INPUT_CANCEL: It, STATE_POSSIBLE: re, STATE_BEGAN: he, STATE_CHANGED: le, STATE_ENDED: ce, STATE_RECOGNIZED: ue, STATE_CANCELLED: pe, STATE_FAILED: 32, DIRECTION_NONE: Ot, DIRECTION_LEFT: Et, DIRECTION_RIGHT: Lt, DIRECTION_UP: kt, DIRECTION_DOWN: Mt, DIRECTION_HORIZONTAL: Bt, DIRECTION_VERTICAL: Dt, DIRECTION_ALL: Gt, Manager: rt, Input: C, TouchAction: Y, TouchInput: j, MouseInput: R, PointerEventInput: U, TouchMouseInput: X, SingleTouchInput: F, Recognizer: q, AttrRecognizer: $, Tap: ot, Pan: tt, Swipe: st, Pinch: et, Rotate: nt, Press: it, on: p, off: d, each: a, merge: vt, extend: yt, assign: ct, inherit: h, bindFn: l, prefixed: _ }), (void 0 !== t ? t : "undefined" != typeof self ? self : {}).Hammer = at, "function" == typeof define && define.amd ? define(function() { return at }) : "undefined" != typeof module && module.exports ? module.exports = at : t.Hammer = at }(window, document),
    function() { "use strict"; var t = function() { this.init() };
        t.prototype = { init: function() { var t = this || e; return t._counter = 1e3, t._html5AudioPool = [], t.html5PoolSize = 10, t._codecs = {}, t._howls = [], t._muted = !1, t._volume = 1, t._canPlayEvent = "canplaythrough", t._navigator = "undefined" != typeof window && window.navigator ? window.navigator : null, t.masterGain = null, t.noAudio = !1, t.usingWebAudio = !0, t.autoSuspend = !0, t.ctx = null, t.autoUnlock = !0, t._setup(), t }, volume: function(t) { var i = this || e; if (t = parseFloat(t), i.ctx || l(), void 0 !== t && t >= 0 && t <= 1) { if (i._volume = t, i._muted) return i;
                    i.usingWebAudio && i.masterGain.gain.setValueAtTime(t, e.ctx.currentTime); for (var n = 0; n < i._howls.length; n++)
                        if (!i._howls[n]._webAudio)
                            for (var s = i._howls[n]._getSoundIds(), o = 0; o < s.length; o++) { var a = i._howls[n]._soundById(s[o]);
                                a && a._node && (a._node.volume = a._volume * t) }
                    return i } return i._volume }, mute: function(t) { var i = this || e;
                i.ctx || l(), i._muted = t, i.usingWebAudio && i.masterGain.gain.setValueAtTime(t ? 0 : i._volume, e.ctx.currentTime); for (var n = 0; n < i._howls.length; n++)
                    if (!i._howls[n]._webAudio)
                        for (var s = i._howls[n]._getSoundIds(), o = 0; o < s.length; o++) { var a = i._howls[n]._soundById(s[o]);
                            a && a._node && (a._node.muted = !!t || a._muted) }
                return i }, unload: function() { for (var t = this || e, i = t._howls.length - 1; i >= 0; i--) t._howls[i].unload(); return t.usingWebAudio && t.ctx && void 0 !== t.ctx.close && (t.ctx.close(), t.ctx = null, l()), t }, codecs: function(t) { return (this || e)._codecs[t.replace(/^x-/, "")] }, _setup: function() { var t = this || e; if (t.state = t.ctx ? t.ctx.state || "suspended" : "suspended", t._autoSuspend(), !t.usingWebAudio)
                    if ("undefined" != typeof Audio) try { void 0 === (i = new Audio).oncanplaythrough && (t._canPlayEvent = "canplay") } catch (e) { t.noAudio = !0 } else t.noAudio = !0; try { var i = new Audio;
                    i.muted && (t.noAudio = !0) } catch (t) {} return t.noAudio || t._setupCodecs(), t }, _setupCodecs: function() { var t = this || e,
                    i = null; try { i = "undefined" != typeof Audio ? new Audio : null } catch (e) { return t } if (!i || "function" != typeof i.canPlayType) return t; var n = i.canPlayType("audio/mpeg;").replace(/^no$/, ""),
                    s = t._navigator && t._navigator.userAgent.match(/OPR\/([0-6].)/g),
                    o = s && parseInt(s[0].split("/")[1], 10) < 33; return t._codecs = { mp3: !(o || !n && !i.canPlayType("audio/mp3;").replace(/^no$/, "")), mpeg: !!n, opus: !!i.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/, ""), ogg: !!i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, ""), oga: !!i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, ""), wav: !!i.canPlayType('audio/wav; codecs="1"').replace(/^no$/, ""), aac: !!i.canPlayType("audio/aac;").replace(/^no$/, ""), caf: !!i.canPlayType("audio/x-caf;").replace(/^no$/, ""), m4a: !!(i.canPlayType("audio/x-m4a;") || i.canPlayType("audio/m4a;") || i.canPlayType("audio/aac;")).replace(/^no$/, ""), mp4: !!(i.canPlayType("audio/x-mp4;") || i.canPlayType("audio/mp4;") || i.canPlayType("audio/aac;")).replace(/^no$/, ""), weba: !!i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/, ""), webm: !!i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/, ""), dolby: !!i.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/, ""), flac: !!(i.canPlayType("audio/x-flac;") || i.canPlayType("audio/flac;")).replace(/^no$/, "") }, t }, _unlockAudio: function() { var t = this || e; if (!t._audioUnlocked && t.ctx) { t._audioUnlocked = !1, t.autoUnlock = !1, t._mobileUnloaded || 44100 === t.ctx.sampleRate || (t._mobileUnloaded = !0, t.unload()), t._scratchBuffer = t.ctx.createBuffer(1, 1, 22050); var i = function(e) { for (s = 0; s < t.html5PoolSize; s++) try { var n = new Audio;
                            n._unlocked = !0, t._releaseHtml5Audio(n) } catch (e) { t.noAudio = !0 }
                        for (var s = 0; s < t._howls.length; s++)
                            if (!t._howls[s]._webAudio)
                                for (var o = t._howls[s]._getSoundIds(), a = 0; a < o.length; a++) { var r = t._howls[s]._soundById(o[a]);
                                    r && r._node && !r._node._unlocked && (r._node._unlocked = !0, r._node.load()) } t._autoResume(); var h = t.ctx.createBufferSource();
                        h.buffer = t._scratchBuffer, h.connect(t.ctx.destination), void 0 === h.start ? h.noteOn(0) : h.start(0), "function" == typeof t.ctx.resume && t.ctx.resume(), h.onended = function() { h.disconnect(0), t._audioUnlocked = !0, document.removeEventListener("touchstart", i, !0), document.removeEventListener("touchend", i, !0), document.removeEventListener("click", i, !0); for (var e = 0; e < t._howls.length; e++) t._howls[e]._emit("unlock") } }; return document.addEventListener("touchstart", i, !0), document.addEventListener("touchend", i, !0), document.addEventListener("click", i, !0), t } }, _obtainHtml5Audio: function() { var t = this || e; if (t._html5AudioPool.length) return t._html5AudioPool.pop(); var i = (new Audio).play(); return i && "undefined" != typeof Promise && (i instanceof Promise || "function" == typeof i.then) && i.catch(function() { console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.") }), new Audio }, _releaseHtml5Audio: function(t) { var i = this || e; return t._unlocked && i._html5AudioPool.push(t), i }, _autoSuspend: function() { var t = this; if (t.autoSuspend && t.ctx && void 0 !== t.ctx.suspend && e.usingWebAudio) { for (var i = 0; i < t._howls.length; i++)
                        if (t._howls[i]._webAudio)
                            for (var n = 0; n < t._howls[i]._sounds.length; n++)
                                if (!t._howls[i]._sounds[n]._paused) return t; return t._suspendTimer && clearTimeout(t._suspendTimer), t._suspendTimer = setTimeout(function() { t.autoSuspend && (t._suspendTimer = null, t.state = "suspending", t.ctx.suspend().then(function() { t.state = "suspended", t._resumeAfterSuspend && (delete t._resumeAfterSuspend, t._autoResume()) })) }, 3e4), t } }, _autoResume: function() { var t = this; if (t.ctx && void 0 !== t.ctx.resume && e.usingWebAudio) return "running" === t.state && t._suspendTimer ? (clearTimeout(t._suspendTimer), t._suspendTimer = null) : "suspended" === t.state ? (t.ctx.resume().then(function() { t.state = "running"; for (var e = 0; e < t._howls.length; e++) t._howls[e]._emit("resume") }), t._suspendTimer && (clearTimeout(t._suspendTimer), t._suspendTimer = null)) : "suspending" === t.state && (t._resumeAfterSuspend = !0), t } }; var e = new t,
            i = function(t) { var e = this;
                t.src && 0 !== t.src.length ? e.init(t) : console.error("An array of source files must be passed with any new Howl.") };
        i.prototype = { init: function(t) { var i = this; return e.ctx || l(), i._autoplay = t.autoplay || !1, i._format = "string" != typeof t.format ? t.format : [t.format], i._html5 = t.html5 || !1, i._muted = t.mute || !1, i._loop = t.loop || !1, i._pool = t.pool || 5, i._preload = "boolean" != typeof t.preload || t.preload, i._rate = t.rate || 1, i._sprite = t.sprite || {}, i._src = "string" != typeof t.src ? t.src : [t.src], i._volume = void 0 !== t.volume ? t.volume : 1, i._xhrWithCredentials = t.xhrWithCredentials || !1, i._duration = 0, i._state = "unloaded", i._sounds = [], i._endTimers = {}, i._queue = [], i._playLock = !1, i._onend = t.onend ? [{ fn: t.onend }] : [], i._onfade = t.onfade ? [{ fn: t.onfade }] : [], i._onload = t.onload ? [{ fn: t.onload }] : [], i._onloaderror = t.onloaderror ? [{ fn: t.onloaderror }] : [], i._onplayerror = t.onplayerror ? [{ fn: t.onplayerror }] : [], i._onpause = t.onpause ? [{ fn: t.onpause }] : [], i._onplay = t.onplay ? [{ fn: t.onplay }] : [], i._onstop = t.onstop ? [{ fn: t.onstop }] : [], i._onmute = t.onmute ? [{ fn: t.onmute }] : [], i._onvolume = t.onvolume ? [{ fn: t.onvolume }] : [], i._onrate = t.onrate ? [{ fn: t.onrate }] : [], i._onseek = t.onseek ? [{ fn: t.onseek }] : [], i._onunlock = t.onunlock ? [{ fn: t.onunlock }] : [], i._onresume = [], i._webAudio = e.usingWebAudio && !i._html5, void 0 !== e.ctx && e.ctx && e.autoUnlock && e._unlockAudio(), e._howls.push(i), i._autoplay && i._queue.push({ event: "play", action: function() { i.play() } }), i._preload && i.load(), i }, load: function() { var t = this,
                    i = null; if (e.noAudio) t._emit("loaderror", null, "No audio support.");
                else { "string" == typeof t._src && (t._src = [t._src]); for (var s = 0; s < t._src.length; s++) { var a, r; if (t._format && t._format[s]) a = t._format[s];
                        else { if ("string" != typeof(r = t._src[s])) { t._emit("loaderror", null, "Non-string found in selected audio sources - ignoring."); continue }(a = /^data:audio\/([^;,]+);/i.exec(r)) || (a = /\.([^.]+)$/.exec(r.split("?", 1)[0])), a && (a = a[1].toLowerCase()) } if (a || console.warn('No file extension was found. Consider using the "format" property or specify an extension.'), a && e.codecs(a)) { i = t._src[s]; break } } if (i) return t._src = i, t._state = "loading", "https:" === window.location.protocol && "http:" === i.slice(0, 5) && (t._html5 = !0, t._webAudio = !1), new n(t), t._webAudio && o(t), t;
                    t._emit("loaderror", null, "No codec support for selected audio sources.") } }, play: function(t, i) { var n = this,
                    s = null; if ("number" == typeof t) s = t, t = null;
                else { if ("string" == typeof t && "loaded" === n._state && !n._sprite[t]) return null; if (void 0 === t && (t = "__default", !n._playLock)) { for (var o = 0, a = 0; a < n._sounds.length; a++) n._sounds[a]._paused && !n._sounds[a]._ended && (o++, s = n._sounds[a]._id);
                        1 === o ? t = null : s = null } } var r = s ? n._soundById(s) : n._inactiveSound(); if (!r) return null; if (s && !t && (t = r._sprite || "__default"), "loaded" !== n._state) { r._sprite = t, r._ended = !1; var h = r._id; return n._queue.push({ event: "play", action: function() { n.play(h) } }), h } if (s && !r._paused) return i || n._loadQueue("play"), r._id;
                n._webAudio && e._autoResume(); var l = Math.max(0, r._seek > 0 ? r._seek : n._sprite[t][0] / 1e3),
                    c = Math.max(0, (n._sprite[t][0] + n._sprite[t][1]) / 1e3 - l),
                    u = 1e3 * c / Math.abs(r._rate),
                    p = n._sprite[t][0] / 1e3,
                    d = (n._sprite[t][0] + n._sprite[t][1]) / 1e3,
                    m = !(!r._loop && !n._sprite[t][2]);
                r._sprite = t, r._ended = !1; var g = function() { r._paused = !1, r._seek = l, r._start = p, r._stop = d, r._loop = m }; if (!(l >= d)) { var f = r._node; if (n._webAudio) { var y = function() { n._playLock = !1, g(), n._refreshBuffer(r); var t = r._muted || n._muted ? 0 : r._volume;
                            f.gain.setValueAtTime(t, e.ctx.currentTime), r._playStart = e.ctx.currentTime, void 0 === f.bufferSource.start ? r._loop ? f.bufferSource.noteGrainOn(0, l, 86400) : f.bufferSource.noteGrainOn(0, l, c) : r._loop ? f.bufferSource.start(0, l, 86400) : f.bufferSource.start(0, l, c), u !== 1 / 0 && (n._endTimers[r._id] = setTimeout(n._ended.bind(n, r), u)), i || setTimeout(function() { n._emit("play", r._id), n._loadQueue() }, 0) }; "running" === e.state ? y() : (n._playLock = !0, n.once("resume", y), n._clearTimer(r._id)) } else { var v = function() { f.currentTime = l, f.muted = r._muted || n._muted || e._muted || f.muted, f.volume = r._volume * e.volume(), f.playbackRate = r._rate; try { var s = f.play(); if (s && "undefined" != typeof Promise && (s instanceof Promise || "function" == typeof s.then) ? (n._playLock = !0, g(), s.then(function() { n._playLock = !1, f._unlocked = !0, i || (n._emit("play", r._id), n._loadQueue()) }).catch(function() { n._playLock = !1, n._emit("playerror", r._id, "Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."), r._ended = !0, r._paused = !0 })) : i || (n._playLock = !1, g(), n._emit("play", r._id), n._loadQueue()), f.playbackRate = r._rate, f.paused) return void n._emit("playerror", r._id, "Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."); "__default" !== t || r._loop ? n._endTimers[r._id] = setTimeout(n._ended.bind(n, r), u) : (n._endTimers[r._id] = function() { n._ended(r), f.removeEventListener("ended", n._endTimers[r._id], !1) }, f.addEventListener("ended", n._endTimers[r._id], !1)) } catch (t) { n._emit("playerror", r._id, t) } }; "data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA" === f.src && (f.src = n._src, f.load()); var b = window && window.ejecta || !f.readyState && e._navigator.isCocoonJS; if (f.readyState >= 3 || b) v();
                        else { n._playLock = !0; var _ = function() { v(), f.removeEventListener(e._canPlayEvent, _, !1) };
                            f.addEventListener(e._canPlayEvent, _, !1), n._clearTimer(r._id) } } return r._id } n._ended(r) }, pause: function(t) { var e = this; if ("loaded" !== e._state || e._playLock) return e._queue.push({ event: "pause", action: function() { e.pause(t) } }), e; for (var i = e._getSoundIds(t), n = 0; n < i.length; n++) { e._clearTimer(i[n]); var s = e._soundById(i[n]); if (s && !s._paused && (s._seek = e.seek(i[n]), s._rateSeek = 0, s._paused = !0, e._stopFade(i[n]), s._node))
                        if (e._webAudio) { if (!s._node.bufferSource) continue;
                            void 0 === s._node.bufferSource.stop ? s._node.bufferSource.noteOff(0) : s._node.bufferSource.stop(0), e._cleanBuffer(s._node) } else isNaN(s._node.duration) && s._node.duration !== 1 / 0 || s._node.pause();
                    arguments[1] || e._emit("pause", s ? s._id : null) } return e }, stop: function(t, e) { var i = this; if ("loaded" !== i._state || i._playLock) return i._queue.push({ event: "stop", action: function() { i.stop(t) } }), i; for (var n = i._getSoundIds(t), s = 0; s < n.length; s++) { i._clearTimer(n[s]); var o = i._soundById(n[s]);
                    o && (o._seek = o._start || 0, o._rateSeek = 0, o._paused = !0, o._ended = !0, i._stopFade(n[s]), o._node && (i._webAudio ? o._node.bufferSource && (void 0 === o._node.bufferSource.stop ? o._node.bufferSource.noteOff(0) : o._node.bufferSource.stop(0), i._cleanBuffer(o._node)) : isNaN(o._node.duration) && o._node.duration !== 1 / 0 || (o._node.currentTime = o._start || 0, o._node.pause(), o._node.duration === 1 / 0 && i._clearSound(o._node))), e || i._emit("stop", o._id)) } return i }, mute: function(t, i) { var n = this; if ("loaded" !== n._state || n._playLock) return n._queue.push({ event: "mute", action: function() { n.mute(t, i) } }), n; if (void 0 === i) { if ("boolean" != typeof t) return n._muted;
                    n._muted = t } for (var s = n._getSoundIds(i), o = 0; o < s.length; o++) { var a = n._soundById(s[o]);
                    a && (a._muted = t, a._interval && n._stopFade(a._id), n._webAudio && a._node ? a._node.gain.setValueAtTime(t ? 0 : a._volume, e.ctx.currentTime) : a._node && (a._node.muted = !!e._muted || t), n._emit("mute", a._id)) } return n }, volume: function() { var t, i, n = this,
                    s = arguments; if (0 === s.length) return n._volume;
                1 === s.length || 2 === s.length && void 0 === s[1] ? n._getSoundIds().indexOf(s[0]) >= 0 ? i = parseInt(s[0], 10) : t = parseFloat(s[0]) : s.length >= 2 && (t = parseFloat(s[0]), i = parseInt(s[1], 10)); var o; if (!(void 0 !== t && t >= 0 && t <= 1)) return (o = i ? n._soundById(i) : n._sounds[0]) ? o._volume : 0; if ("loaded" !== n._state || n._playLock) return n._queue.push({ event: "volume", action: function() { n.volume.apply(n, s) } }), n;
                void 0 === i && (n._volume = t), i = n._getSoundIds(i); for (var a = 0; a < i.length; a++)(o = n._soundById(i[a])) && (o._volume = t, s[2] || n._stopFade(i[a]), n._webAudio && o._node && !o._muted ? o._node.gain.setValueAtTime(t, e.ctx.currentTime) : o._node && !o._muted && (o._node.volume = t * e.volume()), n._emit("volume", o._id)); return n }, fade: function(t, i, n, s) { var o = this; if ("loaded" !== o._state || o._playLock) return o._queue.push({ event: "fade", action: function() { o.fade(t, i, n, s) } }), o;
                t = parseFloat(t), i = parseFloat(i), n = parseFloat(n), o.volume(t, s); for (var a = o._getSoundIds(s), r = 0; r < a.length; r++) { var h = o._soundById(a[r]); if (h) { if (s || o._stopFade(a[r]), o._webAudio && !h._muted) { var l = e.ctx.currentTime,
                                c = l + n / 1e3;
                            h._volume = t, h._node.gain.setValueAtTime(t, l), h._node.gain.linearRampToValueAtTime(i, c) } o._startFadeInterval(h, t, i, n, a[r], void 0 === s) } } return o }, _startFadeInterval: function(t, e, i, n, s, o) { var a = this,
                    r = e,
                    h = i - e,
                    l = Math.abs(h / .01),
                    c = Math.max(4, l > 0 ? n / l : n),
                    u = Date.now();
                t._fadeTo = i, t._interval = setInterval(function() { var s = (Date.now() - u) / n;
                    u = Date.now(), r += h * s, r = Math.max(0, r), r = Math.min(1, r), r = Math.round(100 * r) / 100, a._webAudio ? t._volume = r : a.volume(r, t._id, !0), o && (a._volume = r), (i < e && r <= i || i > e && r >= i) && (clearInterval(t._interval), t._interval = null, t._fadeTo = null, a.volume(i, t._id), a._emit("fade", t._id)) }, c) }, _stopFade: function(t) { var i = this,
                    n = i._soundById(t); return n && n._interval && (i._webAudio && n._node.gain.cancelScheduledValues(e.ctx.currentTime), clearInterval(n._interval), n._interval = null, i.volume(n._fadeTo, t), n._fadeTo = null, i._emit("fade", t)), i }, loop: function() { var t, e, i, n = this,
                    s = arguments; if (0 === s.length) return n._loop; if (1 === s.length) { if ("boolean" != typeof s[0]) return !!(i = n._soundById(parseInt(s[0], 10))) && i._loop;
                    t = s[0], n._loop = t } else 2 === s.length && (t = s[0], e = parseInt(s[1], 10)); for (var o = n._getSoundIds(e), a = 0; a < o.length; a++)(i = n._soundById(o[a])) && (i._loop = t, n._webAudio && i._node && i._node.bufferSource && (i._node.bufferSource.loop = t, t && (i._node.bufferSource.loopStart = i._start || 0, i._node.bufferSource.loopEnd = i._stop))); return n }, rate: function() { var t, i, n = this,
                    s = arguments;
                0 === s.length ? i = n._sounds[0]._id : 1 === s.length ? n._getSoundIds().indexOf(s[0]) >= 0 ? i = parseInt(s[0], 10) : t = parseFloat(s[0]) : 2 === s.length && (t = parseFloat(s[0]), i = parseInt(s[1], 10)); var o; if ("number" != typeof t) return (o = n._soundById(i)) ? o._rate : n._rate; if ("loaded" !== n._state || n._playLock) return n._queue.push({ event: "rate", action: function() { n.rate.apply(n, s) } }), n;
                void 0 === i && (n._rate = t), i = n._getSoundIds(i); for (var a = 0; a < i.length; a++)
                    if (o = n._soundById(i[a])) { n.playing(i[a]) && (o._rateSeek = n.seek(i[a]), o._playStart = n._webAudio ? e.ctx.currentTime : o._playStart), o._rate = t, n._webAudio && o._node && o._node.bufferSource ? o._node.bufferSource.playbackRate.setValueAtTime(t, e.ctx.currentTime) : o._node && (o._node.playbackRate = t); var r = n.seek(i[a]),
                            h = 1e3 * ((n._sprite[o._sprite][0] + n._sprite[o._sprite][1]) / 1e3 - r) / Math.abs(o._rate);!n._endTimers[i[a]] && o._paused || (n._clearTimer(i[a]), n._endTimers[i[a]] = setTimeout(n._ended.bind(n, o), h)), n._emit("rate", o._id) } return n }, seek: function() { var t, i, n = this,
                    s = arguments; if (0 === s.length ? i = n._sounds[0]._id : 1 === s.length ? n._getSoundIds().indexOf(s[0]) >= 0 ? i = parseInt(s[0], 10) : n._sounds.length && (i = n._sounds[0]._id, t = parseFloat(s[0])) : 2 === s.length && (t = parseFloat(s[0]), i = parseInt(s[1], 10)), void 0 === i) return n; if ("loaded" !== n._state || n._playLock) return n._queue.push({ event: "seek", action: function() { n.seek.apply(n, s) } }), n; var o = n._soundById(i); if (o) { if (!("number" == typeof t && t >= 0)) { if (n._webAudio) { var a = n.playing(i) ? e.ctx.currentTime - o._playStart : 0,
                                r = o._rateSeek ? o._rateSeek - o._seek : 0; return o._seek + (r + a * Math.abs(o._rate)) } return o._node.currentTime } var h = n.playing(i);
                    h && n.pause(i, !0), o._seek = t, o._ended = !1, n._clearTimer(i), n._webAudio || !o._node || isNaN(o._node.duration) || (o._node.currentTime = t); var l = function() { n._emit("seek", i), h && n.play(i, !0) }; if (h && !n._webAudio) { var c = function() { n._playLock ? setTimeout(c, 0) : l() };
                        setTimeout(c, 0) } else l() } return n }, playing: function(t) { var e = this; if ("number" == typeof t) { var i = e._soundById(t); return !!i && !i._paused } for (var n = 0; n < e._sounds.length; n++)
                    if (!e._sounds[n]._paused) return !0; return !1 }, duration: function(t) { var e = this,
                    i = e._duration,
                    n = e._soundById(t); return n && (i = e._sprite[n._sprite][1] / 1e3), i }, state: function() { return this._state }, unload: function() { for (var t = this, i = t._sounds, n = 0; n < i.length; n++) i[n]._paused || t.stop(i[n]._id), t._webAudio || (t._clearSound(i[n]._node), i[n]._node.removeEventListener("error", i[n]._errorFn, !1), i[n]._node.removeEventListener(e._canPlayEvent, i[n]._loadFn, !1), e._releaseHtml5Audio(i[n]._node)), delete i[n]._node, t._clearTimer(i[n]._id); var o = e._howls.indexOf(t);
                o >= 0 && e._howls.splice(o, 1); var a = !0; for (n = 0; n < e._howls.length; n++)
                    if (e._howls[n]._src === t._src || t._src.indexOf(e._howls[n]._src) >= 0) { a = !1; break } return s && a && delete s[t._src], e.noAudio = !1, t._state = "unloaded", t._sounds = [], t = null, null }, on: function(t, e, i, n) { var s = this,
                    o = s["_on" + t]; return "function" == typeof e && o.push(n ? { id: i, fn: e, once: n } : { id: i, fn: e }), s }, off: function(t, e, i) { var n = this,
                    s = n["_on" + t],
                    o = 0; if ("number" == typeof e && (i = e, e = null), e || i)
                    for (o = 0; o < s.length; o++) { var a = i === s[o].id; if (e === s[o].fn && a || !e && a) { s.splice(o, 1); break } } else if (t) n["_on" + t] = [];
                    else { var r = Object.keys(n); for (o = 0; o < r.length; o++) 0 === r[o].indexOf("_on") && Array.isArray(n[r[o]]) && (n[r[o]] = []) } return n }, once: function(t, e, i) { var n = this; return n.on(t, e, i, 1), n }, _emit: function(t, e, i) { for (var n = this, s = n["_on" + t], o = s.length - 1; o >= 0; o--) s[o].id && s[o].id !== e && "load" !== t || (setTimeout(function(t) { t.call(this, e, i) }.bind(n, s[o].fn), 0), s[o].once && n.off(t, s[o].fn, s[o].id)); return n._loadQueue(t), n }, _loadQueue: function(t) { var e = this; if (e._queue.length > 0) { var i = e._queue[0];
                    i.event === t && (e._queue.shift(), e._loadQueue()), t || i.action() } return e }, _ended: function(t) { var i = this,
                    n = t._sprite; if (!i._webAudio && t._node && !t._node.paused && !t._node.ended && t._node.currentTime < t._stop) return setTimeout(i._ended.bind(i, t), 100), i; var s = !(!t._loop && !i._sprite[n][2]); if (i._emit("end", t._id), !i._webAudio && s && i.stop(t._id, !0).play(t._id), i._webAudio && s) { i._emit("play", t._id), t._seek = t._start || 0, t._rateSeek = 0, t._playStart = e.ctx.currentTime; var o = 1e3 * (t._stop - t._start) / Math.abs(t._rate);
                    i._endTimers[t._id] = setTimeout(i._ended.bind(i, t), o) } return i._webAudio && !s && (t._paused = !0, t._ended = !0, t._seek = t._start || 0, t._rateSeek = 0, i._clearTimer(t._id), i._cleanBuffer(t._node), e._autoSuspend()), i._webAudio || s || i.stop(t._id, !0), i }, _clearTimer: function(t) { var e = this; if (e._endTimers[t]) { if ("function" != typeof e._endTimers[t]) clearTimeout(e._endTimers[t]);
                    else { var i = e._soundById(t);
                        i && i._node && i._node.removeEventListener("ended", e._endTimers[t], !1) } delete e._endTimers[t] } return e }, _soundById: function(t) { for (var e = this, i = 0; i < e._sounds.length; i++)
                    if (t === e._sounds[i]._id) return e._sounds[i]; return null }, _inactiveSound: function() { var t = this;
                t._drain(); for (var e = 0; e < t._sounds.length; e++)
                    if (t._sounds[e]._ended) return t._sounds[e].reset(); return new n(t) }, _drain: function() { var t = this,
                    e = t._pool,
                    i = 0,
                    n = 0; if (!(t._sounds.length < e)) { for (n = 0; n < t._sounds.length; n++) t._sounds[n]._ended && i++; for (n = t._sounds.length - 1; n >= 0; n--) { if (i <= e) return;
                        t._sounds[n]._ended && (t._webAudio && t._sounds[n]._node && t._sounds[n]._node.disconnect(0), t._sounds.splice(n, 1), i--) } } }, _getSoundIds: function(t) { var e = this; if (void 0 === t) { for (var i = [], n = 0; n < e._sounds.length; n++) i.push(e._sounds[n]._id); return i } return [t] }, _refreshBuffer: function(t) { var i = this; return t._node.bufferSource = e.ctx.createBufferSource(), t._node.bufferSource.buffer = s[i._src], t._panner ? t._node.bufferSource.connect(t._panner) : t._node.bufferSource.connect(t._node), t._node.bufferSource.loop = t._loop, t._loop && (t._node.bufferSource.loopStart = t._start || 0, t._node.bufferSource.loopEnd = t._stop || 0), t._node.bufferSource.playbackRate.setValueAtTime(t._rate, e.ctx.currentTime), i }, _cleanBuffer: function(t) { var i = this,
                    n = e._navigator && e._navigator.vendor.indexOf("Apple") >= 0; if (e._scratchBuffer && t.bufferSource && (t.bufferSource.onended = null, t.bufferSource.disconnect(0), n)) try { t.bufferSource.buffer = e._scratchBuffer } catch (t) {}
                return t.bufferSource = null, i }, _clearSound: function(t) { /MSIE |Trident\//.test(e._navigator && e._navigator.userAgent) || (t.src = "data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA") } }; var n = function(t) { this._parent = t, this.init() };
        n.prototype = { init: function() { var t = this,
                    i = t._parent; return t._muted = i._muted, t._loop = i._loop, t._volume = i._volume, t._rate = i._rate, t._seek = 0, t._paused = !0, t._ended = !0, t._sprite = "__default", t._id = ++e._counter, i._sounds.push(t), t.create(), t }, create: function() { var t = this,
                    i = t._parent,
                    n = e._muted || t._muted || t._parent._muted ? 0 : t._volume; return i._webAudio ? (t._node = void 0 === e.ctx.createGain ? e.ctx.createGainNode() : e.ctx.createGain(), t._node.gain.setValueAtTime(n, e.ctx.currentTime), t._node.paused = !0, t._node.connect(e.masterGain)) : (t._node = e._obtainHtml5Audio(), t._errorFn = t._errorListener.bind(t), t._node.addEventListener("error", t._errorFn, !1), t._loadFn = t._loadListener.bind(t), t._node.addEventListener(e._canPlayEvent, t._loadFn, !1), t._node.src = i._src, t._node.preload = "auto", t._node.volume = n * e.volume(), t._node.load()), t }, reset: function() { var t = this,
                    i = t._parent; return t._muted = i._muted, t._loop = i._loop, t._volume = i._volume, t._rate = i._rate, t._seek = 0, t._rateSeek = 0, t._paused = !0, t._ended = !0, t._sprite = "__default", t._id = ++e._counter, t }, _errorListener: function() { var t = this;
                t._parent._emit("loaderror", t._id, t._node.error ? t._node.error.code : 0), t._node.removeEventListener("error", t._errorFn, !1) }, _loadListener: function() { var t = this,
                    i = t._parent;
                i._duration = Math.ceil(10 * t._node.duration) / 10, 0 === Object.keys(i._sprite).length && (i._sprite = { __default: [0, 1e3 * i._duration] }), "loaded" !== i._state && (i._state = "loaded", i._emit("load"), i._loadQueue()), t._node.removeEventListener(e._canPlayEvent, t._loadFn, !1) } }; var s = {},
            o = function(t) { var e = t._src; if (s[e]) return t._duration = s[e].duration, void h(t); if (/^data:[^;]+;base64,/.test(e)) { for (var i = atob(e.split(",")[1]), n = new Uint8Array(i.length), o = 0; o < i.length; ++o) n[o] = i.charCodeAt(o);
                    r(n.buffer, t) } else { var l = new XMLHttpRequest;
                    l.open("GET", e, !0), l.withCredentials = t._xhrWithCredentials, l.responseType = "arraybuffer", l.onload = function() { var e = (l.status + "")[0]; "0" === e || "2" === e || "3" === e ? r(l.response, t) : t._emit("loaderror", null, "Failed loading audio file with status: " + l.status + ".") }, l.onerror = function() { t._webAudio && (t._html5 = !0, t._webAudio = !1, t._sounds = [], delete s[e], t.load()) }, a(l) } },
            a = function(t) { try { t.send() } catch (e) { t.onerror() } },
            r = function(t, i) { var n = function() { i._emit("loaderror", null, "Decoding audio data failed.") },
                    o = function(t) { t && i._sounds.length > 0 ? (s[i._src] = t, h(i, t)) : n() }; "undefined" != typeof Promise && 1 === e.ctx.decodeAudioData.length ? e.ctx.decodeAudioData(t).then(o).catch(n) : e.ctx.decodeAudioData(t, o, n) },
            h = function(t, e) { e && !t._duration && (t._duration = e.duration), 0 === Object.keys(t._sprite).length && (t._sprite = { __default: [0, 1e3 * t._duration] }), "loaded" !== t._state && (t._state = "loaded", t._emit("load"), t._loadQueue()) },
            l = function() { if (e.usingWebAudio) { try { "undefined" != typeof AudioContext ? e.ctx = new AudioContext : "undefined" != typeof webkitAudioContext ? e.ctx = new webkitAudioContext : e.usingWebAudio = !1 } catch (t) { e.usingWebAudio = !1 } e.ctx || (e.usingWebAudio = !1); var t = /iP(hone|od|ad)/.test(e._navigator && e._navigator.platform),
                        i = e._navigator && e._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),
                        n = i ? parseInt(i[1], 10) : null; if (t && n && n < 9) { var s = /safari/.test(e._navigator && e._navigator.userAgent.toLowerCase());
                        (e._navigator && e._navigator.standalone && !s || e._navigator && !e._navigator.standalone && !s) && (e.usingWebAudio = !1) } e.usingWebAudio && (e.masterGain = void 0 === e.ctx.createGain ? e.ctx.createGainNode() : e.ctx.createGain(), e.masterGain.gain.setValueAtTime(e._muted ? 0 : 1, e.ctx.currentTime), e.masterGain.connect(e.ctx.destination)), e._setup() } }; "function" == typeof define && define.amd && define([], function() { return { Howler: e, Howl: i } }), "undefined" != typeof exports && (exports.Howler = e, exports.Howl = i), "undefined" != typeof window ? (window.HowlerGlobal = t, window.Howler = e, window.Howl = i, window.Sound = n) : "undefined" != typeof global && (global.HowlerGlobal = t, global.Howler = e, global.Howl = i, global.Sound = n) }(),
    function() { "use strict";
        HowlerGlobal.prototype._pos = [0, 0, 0], HowlerGlobal.prototype._orientation = [0, 0, -1, 0, 1, 0], HowlerGlobal.prototype.stereo = function(t) { var e = this; if (!e.ctx || !e.ctx.listener) return e; for (var i = e._howls.length - 1; i >= 0; i--) e._howls[i].stereo(t); return e }, HowlerGlobal.prototype.pos = function(t, e, i) { var n = this; return n.ctx && n.ctx.listener ? (e = "number" != typeof e ? n._pos[1] : e, i = "number" != typeof i ? n._pos[2] : i, "number" != typeof t ? n._pos : (n._pos = [t, e, i], void 0 !== n.ctx.listener.positionX ? (n.ctx.listener.positionX.setTargetAtTime(n._pos[0], Howler.ctx.currentTime, .1), n.ctx.listener.positionY.setTargetAtTime(n._pos[1], Howler.ctx.currentTime, .1), n.ctx.listener.positionZ.setTargetAtTime(n._pos[2], Howler.ctx.currentTime, .1)) : n.ctx.listener.setPosition(n._pos[0], n._pos[1], n._pos[2]), n)) : n }, HowlerGlobal.prototype.orientation = function(t, e, i, n, s, o) { var a = this; if (!a.ctx || !a.ctx.listener) return a; var r = a._orientation; return e = "number" != typeof e ? r[1] : e, i = "number" != typeof i ? r[2] : i, n = "number" != typeof n ? r[3] : n, s = "number" != typeof s ? r[4] : s, o = "number" != typeof o ? r[5] : o, "number" != typeof t ? r : (a._orientation = [t, e, i, n, s, o], void 0 !== a.ctx.listener.forwardX ? (a.ctx.listener.forwardX.setTargetAtTime(t, Howler.ctx.currentTime, .1), a.ctx.listener.forwardY.setTargetAtTime(e, Howler.ctx.currentTime, .1), a.ctx.listener.forwardZ.setTargetAtTime(i, Howler.ctx.currentTime, .1), a.ctx.listener.upX.setTargetAtTime(t, Howler.ctx.currentTime, .1), a.ctx.listener.upY.setTargetAtTime(e, Howler.ctx.currentTime, .1), a.ctx.listener.upZ.setTargetAtTime(i, Howler.ctx.currentTime, .1)) : a.ctx.listener.setOrientation(t, e, i, n, s, o), a) }, Howl.prototype.init = function(t) { return function(e) { var i = this; return i._orientation = e.orientation || [1, 0, 0], i._stereo = e.stereo || null, i._pos = e.pos || null, i._pannerAttr = { coneInnerAngle: void 0 !== e.coneInnerAngle ? e.coneInnerAngle : 360, coneOuterAngle: void 0 !== e.coneOuterAngle ? e.coneOuterAngle : 360, coneOuterGain: void 0 !== e.coneOuterGain ? e.coneOuterGain : 0, distanceModel: void 0 !== e.distanceModel ? e.distanceModel : "inverse", maxDistance: void 0 !== e.maxDistance ? e.maxDistance : 1e4, panningModel: void 0 !== e.panningModel ? e.panningModel : "HRTF", refDistance: void 0 !== e.refDistance ? e.refDistance : 1, rolloffFactor: void 0 !== e.rolloffFactor ? e.rolloffFactor : 1 }, i._onstereo = e.onstereo ? [{ fn: e.onstereo }] : [], i._onpos = e.onpos ? [{ fn: e.onpos }] : [], i._onorientation = e.onorientation ? [{ fn: e.onorientation }] : [], t.call(this, e) } }(Howl.prototype.init), Howl.prototype.stereo = function(e, i) { var n = this; if (!n._webAudio) return n; if ("loaded" !== n._state) return n._queue.push({ event: "stereo", action: function() { n.stereo(e, i) } }), n; var s = void 0 === Howler.ctx.createStereoPanner ? "spatial" : "stereo"; if (void 0 === i) { if ("number" != typeof e) return n._stereo;
                n._stereo = e, n._pos = [e, 0, 0] } for (var o = n._getSoundIds(i), a = 0; a < o.length; a++) { var r = n._soundById(o[a]); if (r) { if ("number" != typeof e) return r._stereo;
                    r._stereo = e, r._pos = [e, 0, 0], r._node && (r._pannerAttr.panningModel = "equalpower", r._panner && r._panner.pan || t(r, s), "spatial" === s ? void 0 !== r._panner.positionX ? (r._panner.positionX.setValueAtTime(e, Howler.ctx.currentTime), r._panner.positionY.setValueAtTime(0, Howler.ctx.currentTime), r._panner.positionZ.setValueAtTime(0, Howler.ctx.currentTime)) : r._panner.setPosition(e, 0, 0) : r._panner.pan.setValueAtTime(e, Howler.ctx.currentTime)), n._emit("stereo", r._id) } } return n }, Howl.prototype.pos = function(e, i, n, s) { var o = this; if (!o._webAudio) return o; if ("loaded" !== o._state) return o._queue.push({ event: "pos", action: function() { o.pos(e, i, n, s) } }), o; if (i = "number" != typeof i ? 0 : i, n = "number" != typeof n ? -.5 : n, void 0 === s) { if ("number" != typeof e) return o._pos;
                o._pos = [e, i, n] } for (var a = o._getSoundIds(s), r = 0; r < a.length; r++) { var h = o._soundById(a[r]); if (h) { if ("number" != typeof e) return h._pos;
                    h._pos = [e, i, n], h._node && (h._panner && !h._panner.pan || t(h, "spatial"), void 0 !== h._panner.positionX ? (h._panner.positionX.setValueAtTime(e, Howler.ctx.currentTime), h._panner.positionY.setValueAtTime(i, Howler.ctx.currentTime), h._panner.positionZ.setValueAtTime(n, Howler.ctx.currentTime)) : h._panner.setPosition(e, i, n)), o._emit("pos", h._id) } } return o }, Howl.prototype.orientation = function(e, i, n, s) { var o = this; if (!o._webAudio) return o; if ("loaded" !== o._state) return o._queue.push({ event: "orientation", action: function() { o.orientation(e, i, n, s) } }), o; if (i = "number" != typeof i ? o._orientation[1] : i, n = "number" != typeof n ? o._orientation[2] : n, void 0 === s) { if ("number" != typeof e) return o._orientation;
                o._orientation = [e, i, n] } for (var a = o._getSoundIds(s), r = 0; r < a.length; r++) { var h = o._soundById(a[r]); if (h) { if ("number" != typeof e) return h._orientation;
                    h._orientation = [e, i, n], h._node && (h._panner || (h._pos || (h._pos = o._pos || [0, 0, -.5]), t(h, "spatial")), void 0 !== h._panner.orientationX ? (h._panner.orientationX.setValueAtTime(e, Howler.ctx.currentTime), h._panner.orientationY.setValueAtTime(i, Howler.ctx.currentTime), h._panner.orientationZ.setValueAtTime(n, Howler.ctx.currentTime)) : h._panner.setOrientation(e, i, n)), o._emit("orientation", h._id) } } return o }, Howl.prototype.pannerAttr = function() { var e, i, n, s = this,
                o = arguments; if (!s._webAudio) return s; if (0 === o.length) return s._pannerAttr; if (1 === o.length) { if ("object" != typeof o[0]) return (n = s._soundById(parseInt(o[0], 10))) ? n._pannerAttr : s._pannerAttr;
                e = o[0], void 0 === i && (e.pannerAttr || (e.pannerAttr = { coneInnerAngle: e.coneInnerAngle, coneOuterAngle: e.coneOuterAngle, coneOuterGain: e.coneOuterGain, distanceModel: e.distanceModel, maxDistance: e.maxDistance, refDistance: e.refDistance, rolloffFactor: e.rolloffFactor, panningModel: e.panningModel }), s._pannerAttr = { coneInnerAngle: void 0 !== e.pannerAttr.coneInnerAngle ? e.pannerAttr.coneInnerAngle : s._coneInnerAngle, coneOuterAngle: void 0 !== e.pannerAttr.coneOuterAngle ? e.pannerAttr.coneOuterAngle : s._coneOuterAngle, coneOuterGain: void 0 !== e.pannerAttr.coneOuterGain ? e.pannerAttr.coneOuterGain : s._coneOuterGain, distanceModel: void 0 !== e.pannerAttr.distanceModel ? e.pannerAttr.distanceModel : s._distanceModel, maxDistance: void 0 !== e.pannerAttr.maxDistance ? e.pannerAttr.maxDistance : s._maxDistance, refDistance: void 0 !== e.pannerAttr.refDistance ? e.pannerAttr.refDistance : s._refDistance, rolloffFactor: void 0 !== e.pannerAttr.rolloffFactor ? e.pannerAttr.rolloffFactor : s._rolloffFactor, panningModel: void 0 !== e.pannerAttr.panningModel ? e.pannerAttr.panningModel : s._panningModel }) } else 2 === o.length && (e = o[0], i = parseInt(o[1], 10)); for (var a = s._getSoundIds(i), r = 0; r < a.length; r++)
                if (n = s._soundById(a[r])) { var h = n._pannerAttr;
                    h = { coneInnerAngle: void 0 !== e.coneInnerAngle ? e.coneInnerAngle : h.coneInnerAngle, coneOuterAngle: void 0 !== e.coneOuterAngle ? e.coneOuterAngle : h.coneOuterAngle, coneOuterGain: void 0 !== e.coneOuterGain ? e.coneOuterGain : h.coneOuterGain, distanceModel: void 0 !== e.distanceModel ? e.distanceModel : h.distanceModel, maxDistance: void 0 !== e.maxDistance ? e.maxDistance : h.maxDistance, refDistance: void 0 !== e.refDistance ? e.refDistance : h.refDistance, rolloffFactor: void 0 !== e.rolloffFactor ? e.rolloffFactor : h.rolloffFactor, panningModel: void 0 !== e.panningModel ? e.panningModel : h.panningModel }; var l = n._panner;
                    l ? (l.coneInnerAngle = h.coneInnerAngle, l.coneOuterAngle = h.coneOuterAngle, l.coneOuterGain = h.coneOuterGain, l.distanceModel = h.distanceModel, l.maxDistance = h.maxDistance, l.refDistance = h.refDistance, l.rolloffFactor = h.rolloffFactor, l.panningModel = h.panningModel) : (n._pos || (n._pos = s._pos || [0, 0, -.5]), t(n, "spatial")) } return s }, Sound.prototype.init = function(t) { return function() { var e = this,
                    i = e._parent;
                e._orientation = i._orientation, e._stereo = i._stereo, e._pos = i._pos, e._pannerAttr = i._pannerAttr, t.call(this), e._stereo ? i.stereo(e._stereo) : e._pos && i.pos(e._pos[0], e._pos[1], e._pos[2], e._id) } }(Sound.prototype.init), Sound.prototype.reset = function(t) { return function() { var e = this,
                    i = e._parent; return e._orientation = i._orientation, e._stereo = i._stereo, e._pos = i._pos, e._pannerAttr = i._pannerAttr, e._stereo ? i.stereo(e._stereo) : e._pos ? i.pos(e._pos[0], e._pos[1], e._pos[2], e._id) : e._panner && (e._panner.disconnect(0), e._panner = void 0, i._refreshBuffer(e)), t.call(this) } }(Sound.prototype.reset); var t = function(t, e) { "spatial" === (e = e || "spatial") ? (t._panner = Howler.ctx.createPanner(), t._panner.coneInnerAngle = t._pannerAttr.coneInnerAngle, t._panner.coneOuterAngle = t._pannerAttr.coneOuterAngle, t._panner.coneOuterGain = t._pannerAttr.coneOuterGain, t._panner.distanceModel = t._pannerAttr.distanceModel, t._panner.maxDistance = t._pannerAttr.maxDistance, t._panner.refDistance = t._pannerAttr.refDistance, t._panner.rolloffFactor = t._pannerAttr.rolloffFactor, t._panner.panningModel = t._pannerAttr.panningModel, void 0 !== t._panner.positionX ? (t._panner.positionX.setValueAtTime(t._pos[0], Howler.ctx.currentTime), t._panner.positionY.setValueAtTime(t._pos[1], Howler.ctx.currentTime), t._panner.positionZ.setValueAtTime(t._pos[2], Howler.ctx.currentTime)) : t._panner.setPosition(t._pos[0], t._pos[1], t._pos[2]), void 0 !== t._panner.orientationX ? (t._panner.orientationX.setValueAtTime(t._orientation[0], Howler.ctx.currentTime), t._panner.orientationY.setValueAtTime(t._orientation[1], Howler.ctx.currentTime), t._panner.orientationZ.setValueAtTime(t._orientation[2], Howler.ctx.currentTime)) : t._panner.setOrientation(t._orientation[0], t._orientation[1], t._orientation[2])) : (t._panner = Howler.ctx.createStereoPanner(), t._panner.pan.setValueAtTime(t._stereo, Howler.ctx.currentTime)), t._panner.connect(t._node), t._paused || t._parent.pause(t._id, !0).play(t._id, !0) } }();
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    Game;
! function(t) { var e = function(t) {
        function e(e, i, n) { var s = t.call(this, null, !1) || this; return s.percent = 100, s.sprite = new Phaser.Sprite(e, 0, 0, i, n), s.totalHeight = s.sprite.height, s.totalWidth = s.sprite.width, s.rect = new Phaser.Rectangle(0, 0, s.percent / 100 * s.totalWidth, s.totalHeight), s.sprite.crop(s.rect, !0), s } return __extends(e, t), e.prototype.setAnchor = function(t, e) { this.sprite.anchor.set(t, e), this.sprite.pivot.x = this.totalWidth * this.sprite.anchor.x, this.sprite.pivot.y = this.totalHeight * this.sprite.anchor.y }, e.prototype.setPercent = function(t) { if (t !== this.percent) { if (t < 0 ? t = 0 : t > 100 && (t = 100), this.percent = t, this.totalHeight <= 0) return;
                this.rect.width = Math.max(0, this.percent / 100 * this.totalWidth), this.sprite.crop(this.rect, !0) } }, e.prototype.destroy = function() { this.sprite.destroy(), this.sprite = null, this.rect = null, t.prototype.destroy.call(this) }, e }(Ph2.Component);
    t.LoadingBar = e }(Game || (Game = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    Game;
! function(t) { var e = function(e) {
        function i(i, n) { var s = e.call(this, null, !1) || this;
            s.game = i, s.group = n, s.componentMgr = Ph2.ComponentPlugin.initComponents(s), s.loadingBar = s.componentMgr.addComponent(new t.LoadingBar(i, "load_cn", "loading1.png")); var o = new Phaser.Point(s.game.width / 2, s.game.height / 2); return s.logo = new Phaser.Sprite(s.game, o.x, o.y - 55, "fg_logo"), s.logo.anchor.set(.5, .5), s.loadingBg = new Phaser.Sprite(s.game, o.x, o.y + 150, "load_cn", "loading0.png"), s.loadingBg.anchor.set(.5, .5), s.loadingBar.sprite.x = o.x - s.loadingBg.width / 2, s.loadingBar.sprite.y = o.y + 98 + 75, s.loadingBar.setAnchor(0, .5), s.playButton = new Phaser.Sprite(s.game, o.x + 20, o.y + 200, "load_cn", "play_button.png"), s.playButton.anchor.set(.5, .5), s.playButton.inputEnabled = !0, s.playButton.input.useHandCursor = !0, s.playButton.visible = !1, s.group.add(s.logo), s.group.add(s.loadingBg), s.group.add(s.loadingBar.sprite), s.group.add(s.playButton), s.game.onBlur.add(s.onBlur, s), s.game.onFocus.add(s.onFocus, s), s } return __extends(i, e), i.prototype.showPlayButton = function() { this.loadingBg.visible = !1, this.loadingBar.sprite.visible = !1, this.playButton.visible = !0, this.playButton.events.onInputUp.addOnce(this.pressPlayButton, this), this.tween = this.game.add.tween(this.playButton.scale).to({ x: 1.1, y: 1.1 }, 500, Phaser.Easing.Back.Out, !0, 1e3, 0, !0), this.tween.repeat(-1, 800) }, i.prototype.pressPlayButton = function() { void 0 !== this.gameObject.pressPlayButton && this.gameObject.pressPlayButton() }, i.prototype.setPercent = function(t) { this.loadingBar.setPercent(t) }, i.prototype.resize = function() { var t = new Phaser.Point(this.game.width / 2, this.game.height / 2);
            this.playButton.position.set(t.x + 20, t.y + 200), this.logo.position.set(t.x, t.y - 55), this.loadingBg.position.set(t.x, t.y + 150), this.loadingBar.sprite.position.set(t.x - this.loadingBg.width / 2, t.y + 98 + 75) }, i.prototype.onBlur = function() { this.tween && this.tween.pause() }, i.prototype.onFocus = function() { this.tween && this.tween.resume() }, i.prototype.destroy = function() { this.group.remove(this.logo), this.group.remove(this.loadingBg), this.group.remove(this.loadingBar.sprite), this.game.onBlur.remove(this.onBlur, this), this.game.onFocus.remove(this.onFocus, this), this.tween.stop(), this.group = null, this.logo.destroy(), this.logo = null, this.loadingBg.destroy(), this.loadingBg = null, this.componentMgr.removeComponent(this.loadingBar), this.componentMgr = null, e.prototype.destroy.call(this) }, i }(Ph2.Component);
    t.LoadingCN = e }(Game || (Game = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    Game;
! function(t) { var e = function(t) {
        function e(e, i) { var n = t.call(this, null, !1) || this; return n.game = e, n.graphics = n.game.add.graphics(0, 0), n.graphics.beginFill(0, 1), n.graphics.drawRect(0, 0, n.game.width, n.game.height), n.graphics.endFill(), n.opacityNum = i, n.graphics.alpha = i, n.graphics.inputEnabled = !0, n.graphics.input.useHandCursor = !1, n.game.scale.onSizeChange.add(n.resize, n), n.activeTween = null, n.resize(), n.kill(), n } return __extends(e, t), Object.defineProperty(e.prototype, "overlaySprite", { get: function() { return this.graphics }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "opacity", { set: function(t) { this.opacityNum = t, this.graphics.alpha = t }, enumerable: !0, configurable: !0 }), e.prototype.kill = function() { this.graphics.alive = !1, this.graphics.exists = !1, this.graphics.visible = !1, this.game.scale.onSizeChange.remove(this.resize, this) }, e.prototype.revive = function() { this.graphics.alive = !0, this.graphics.exists = !0, this.graphics.visible = !0, this.resize(), this.game.scale.onSizeChange.add(this.resize, this) }, e.prototype.fadeIn = function(t, e, i, n) { void 0 === e && (e = this.opacityNum); var s;
            this.graphics.alpha = .2, s = this.game.add.tween(this.graphics).to({ alpha: e }, t, "Linear", !0), i && n && s.onComplete.addOnce(i, n), this.activeTween = s }, e.prototype.fadeOut = function(t, e, i, n) { void 0 === e && (e = this.opacityNum); var s;
            this.graphics.alpha = e, s = this.game.add.tween(this.graphics).to({ alpha: 0 }, t, "Linear", !0), i && n && s.onComplete.addOnce(i, n), this.activeTween = s }, e.prototype.pause = function() { this.activeTween && this.activeTween.pause() }, e.prototype.resume = function() { this.activeTween && this.activeTween.resume() }, e.prototype.resize = function() { this.graphics.clear(), this.graphics.beginFill(0, 1), this.graphics.drawRect(0, 0, this.game.width, this.game.height), this.graphics.endFill() }, e.prototype.destroy = function() { this.game.scale.onSizeChange.remove(this.resize, this), this.graphics.destroy(), t.prototype.destroy.call(this) }, e }(Ph2.Component);
    t.Overlay = e }(Game || (Game = {}));
var Game;
! function(t) { var e = function() {
        function t() {} return t.GAME_SCALE = 1, t.CALCULATED_WIDTH = 0, t.CALCULATED_HEIGHT = 0, t.GAME_WIDTH = 960, t.GAME_HEIGHT = 640, t.GAME_RATIO = 1, t.LANDSCAPE_LOCKED = !0, t.PORTRAIT_LOCKED = !1, t.RENDER_DEBUG = !1, t.KEY_DEBUG = !1, t.IOS_BUTTON_PATCH = !1, t.FONT = "LubalinGraphITCTurnerAra-Bd", t.GAME_KEY = "", t.SECRET_KEY = "", t.GOOGLE_ID = "", t.GOOGLE_APP_NAME = "", t.AUTO_FULLSCREEN_ENABLED = !0, t.GAME_VERSION = 6, t }();
    t.Constants = e }(Game || (Game = {}));
var Game;
! function(t) { var e;! function(t) { t[t.menu = 0] = "menu" }(e = t.MUSIC || (t.MUSIC = {})); var i = function() {
        function i() {} return i.loadAudioSprite = function(e, n) { for (var s = e.cache.getJSON(n), o = s.urls.length, a = [], r = 0; r < o; r++) a.push("assets/audio/" + s.urls[r] + "?v=" + t.Constants.GAME_VERSION);
            i.audioSprite = new Howl({ src: a, preload: !0, sprite: s.sprite }), e.ph2AudioManager.setAudioEffectsFile(i.audioSprite) }, i.playMusic = function(n, s, o) { void 0 === o && (o = 0), s && (n.ph2AudioManager.switchMusic(i.music[e.menu]), i.actualMusic = e.menu), !1 === t.Instances.dataManager.getAudio() && this.disableAudio(n) }, i.stopMusic = function(t) { t.ph2AudioManager.stopMusic() }, i.playSfx = function(t, e) { if (t.ph2AudioManager.getMusicEnabled()) { var n = t.ph2AudioManager.playEffect(e, !1);
                i.addSoundPlaying(n) } }, i.addSoundPlaying = function(t) { null !== t && (i.sfxPlaying.push(t), Howler._howls[1].on("end", function() { i.removeSoundPlaying(t) }, t)) }, i.removeSoundPlaying = function(t) { i.sfxPlaying.splice(i.sfxPlaying.indexOf(t), 1) }, i.playCorrectMove = function(t) { var e = t.ph2AudioManager.playEffect(i.audiosCorrectMove[i.indexCorrectMove], !1);
            i.addSoundPlaying(e), i.indexCorrectMove = i.indexCorrectMove + 1 < i.audiosCorrectMove.length ? i.indexCorrectMove + 1 : 0 }, i.playSfxComic = function(t) { var e = t.ph2AudioManager.playEffect(i.audiosComic[i.indexComic], !1);
            i.addSoundPlaying(e), i.indexComic = 0 === i.indexComic ? 1 : 0 }, i.resumeAllSfx = function() {}, i.pauseAllSfx = function() {}, i.disableAudio = function(t) { t.ph2AudioManager.getMusicEnabled() && (t.ph2AudioManager.switchMusicState(), t.ph2AudioManager.switchSfxState(), t.ph2AudioManager.stopMusic()) }, i.enableAudio = function(t) { t.ph2AudioManager.getMusicEnabled() || (t.ph2AudioManager.switchMusicState(), t.ph2AudioManager.switchSfxState(), t.ph2AudioManager.switchMusic(i.music[i.actualMusic])) }, i.onBlur = function(t) { t.ph2AudioManager.pauseMusic(), i.pauseAllSfx() }, i.onFocus = function(t) { t.ph2AudioManager.resumeMusic(), i.resumeAllSfx() }, i.music = [new Howl({ src: ["assets/audio/menu.ogg?v=" + t.Constants.GAME_VERSION, "assets/audio/menu.mp3?v=" + t.Constants.GAME_VERSION], preload: !0, loop: !0, volume: 1 })], i.sfxPlaying = [], i.audiosCorrectMove = ["correct_move_v1", "correct_move_v2", "correct_move_v3", "correct_move_v4"], i.indexCorrectMove = 0, i.audiosComic = ["slide_story_v1", "slide_story_v2"], i.indexComic = 0, i }();
    t.Audios = i }(Game || (Game = {}));
var Game;
! function(t) {! function(t) { t[t.left = 0] = "left", t[t.right = 1] = "right", t[t.up = 2] = "up", t[t.down = 3] = "down" }(t.DirectionType || (t.DirectionType = {}));! function(t) { t[t.debugging = 0] = "debugging", t[t.statemachine = 1] = "statemachine", t[t.glitches = 2] = "glitches", t[t.commands = 3] = "commands" }(t.GameName || (t.GameName = {})) }(Game || (Game = {}));
var Game;
! function(t) { var e = function() {
        function e() {} return e.initDataManager = function(e) { void 0 === this.dataManager && (this.dataManager = new t.DataManager(e)) }, e.initLocalizationManager = function(e) { void 0 === this.localization && (this.localization = new t.LocalizationManager(e)) }, e.initTransitionAnim = function(e) { void 0 === this.transitionAnim && (this.transitionAnim = new t.Transition(e, "transition")) }, e.initControlButtonUI = function(e) { void 0 === this.controlButtonUI && (this.controlButtonUI = new t.ControlButtonUI(e)) }, e }();
    t.Instances = e }(Game || (Game = {}));
var Game;
! function(t) { var e = function() {
        function t(t) { this.data = { uiMainMenu: { init: "none", none: { up: "buttonPlay", down: "buttonPlay", left: "buttonPlay", right: "buttonPlay", key: "hl_mm.png" }, buttonPlay: { up: "buttonAudio", down: "buttonAudio", left: "buttonAudio", right: "buttonAudio", key: "hl_mm.png" }, buttonAudio: { up: "buttonPlay", down: "buttonPlay", left: "buttonPlay", right: "buttonPlay", key: "hl_mid.png" } }, uiGameSelect: { init: "none", none: { up: "button1", down: "button1", left: "button1", right: "button1", key: "hl_mid.png" }, button1: { up: "back", down: null, left: "back", right: "button2", key: "highlight.png" }, button2: { up: null, down: null, left: "button1", right: "button3", key: "highlight.png" }, button3: { up: null, down: null, left: "button2", right: "button4", key: "highlight.png" }, button4: { up: "audio", down: null, left: "button3", right: "audio", key: "highlight.png" }, back: { up: null, down: "button1", left: null, right: "button1", key: "hl_mid.png" }, audio: { up: null, down: "button4", left: "button4", right: null, key: "hl_mid.png" } } }, this.ui = "uiMainMenu", this.onChangeButton = new Phaser.Signal } return t.prototype.initControl = function(t) { return this.actualUI = t, this.actualButton = this.data[t].init, this.onChangeButton.dispatch(this.actualButton), this.data[t].init }, t.prototype.addControl = function(t) { var e = t.input.keyboard.addKey(Phaser.Keyboard.UP),
                i = t.input.keyboard.addKey(Phaser.Keyboard.DOWN),
                n = t.input.keyboard.addKey(Phaser.Keyboard.LEFT),
                s = t.input.keyboard.addKey(Phaser.Keyboard.RIGHT);
            e.onDown.add(this.moveUp, this), i.onDown.add(this.moveDown, this), n.onDown.add(this.moveLeft, this), s.onDown.add(this.moveRight, this) }, t.prototype.removeControl = function(t) { var e = t.input.keyboard.addKey(Phaser.Keyboard.UP),
                i = t.input.keyboard.addKey(Phaser.Keyboard.DOWN),
                n = t.input.keyboard.addKey(Phaser.Keyboard.LEFT),
                s = t.input.keyboard.addKey(Phaser.Keyboard.RIGHT);
            e.onDown.removeAll(this), i.onDown.removeAll(this), n.onDown.removeAll(this), s.onDown.removeAll(this) }, t.prototype.setButton = function(t) { this.actualButton = t, this.onChangeButton.dispatch(this.actualButton) }, t.prototype.getHightLight = function() { return this.data[this.actualUI][this.actualButton].key }, t.prototype.setButtonFlow = function(t, e, i, n, s, o) { this.data[this.actualUI][t] || (this.data[this.actualUI][t] = { up: null, down: null, left: null, right: null, key: "hl_mm.png" }), this.data[this.actualUI][t].key = e, this.data[this.actualUI][t].up = i, this.data[this.actualUI][t].down = n, this.data[this.actualUI][t].left = s, this.data[this.actualUI][t].right = o }, t.prototype.moveLeft = function() { var t = this.data[this.actualUI][this.actualButton].left;
            null !== t && (this.actualButton = t, this.onChangeButton.dispatch(t)) }, t.prototype.moveRight = function() { var t = this.data[this.actualUI][this.actualButton].right;
            null !== t && (this.actualButton = t, this.onChangeButton.dispatch(t)) }, t.prototype.moveUp = function() { var t = this.data[this.actualUI][this.actualButton].up;
            null !== t && (this.actualButton = t, this.onChangeButton.dispatch(t)) }, t.prototype.moveDown = function() { var t = this.data[this.actualUI][this.actualButton].down;
            null !== t && (this.actualButton = t, this.onChangeButton.dispatch(t)) }, t }();
    t.ControlButtonUI = e }(Game || (Game = {}));
var Game;
! function(t) { var e = function() {
        function e(e) { this.game = e, this.version = t.Constants.GAME_VERSION, this.key = "ben10-collection-" + language, this.loadData() } return e.prototype.loadData = function() { var t = this.game.storage.getItem(this.key);
            this.gameData = JSON.parse(t), null !== t && this.gameData.version === this.version || this.initData() }, e.prototype.saveData = function() { this.game.storage.setItem(this.key, JSON.stringify(this.gameData)) }, e.prototype.initData = function() { var t;
            t = { version: this.version, seeComicIntro: !1, seeComicEnd: !1, audioEnable: !0, lastProgress: [0, 0, 0, 0] }, this.gameData = t, this.saveData() }, e.prototype.getAudio = function() { return this.gameData.audioEnable }, e.prototype.getSeeComicIntro = function() { return this.gameData.seeComicIntro }, e.prototype.getSeeComicEnd = function() { return this.gameData.seeComicEnd }, e.prototype.getLastProgress = function(t) { return this.gameData.lastProgress[t] }, e.prototype.seeComicIntro = function() { this.gameData.seeComicIntro = !0, this.saveData() }, e.prototype.seeComicEnd = function() { this.gameData.seeComicEnd = !0, this.saveData() }, e.prototype.setAudio = function(t) { this.gameData.audioEnable = t, this.saveData() }, e.prototype.saveLastProgress = function(t, e) { this.gameData.lastProgress[t] = e, this.saveData() }, e.prototype.getCurrentProgress = function(e) { var i, n = 0,
                s = 0; switch (e) {
                case t.GameName.commands:
                    n = ((i = GameCommands.Instances.dataManager.getLevelCompelteded()) + 1) / 9; break;
                case t.GameName.debugging:
                    n = ((i = DebuggingGame.Instances.dataManager.getLevelCompelteded()) + 1) / 10; break;
                case t.GameName.glitches:
                    i = GameGlitch.Instances.dataManager.getLevelCompelteded(); for (var o = 0; o < i + 1; o++)(s = GameGlitch.Instances.dataManager.getStarsLevel(o)) > 0 && s;
                    n = (i + 1) / 10; break;
                case t.GameName.statemachine:
                    n = (i = GameStateMachine.Instances.DataManager.getLastLevelUnlocked()) / 10 } return n }, e }();
    t.DataManager = e }(Game || (Game = {}));
var Game;
! function(t) { var e = function() {
        function t(t, e) { void 0 === e && (e = "us"), this.game = t, this.language = e, this.jsonKey = "localization", this.localizationData = this.game.cache.getJSON(this.jsonKey), this.charInitArg = "{", this.charEndArg = "}", this.defaulString = "*", this.showDefault = !1 } return t.prototype.setLanguage = function(t) { return void 0 === t && (t = "us"), t === this.language || (this.jsonKey = "localization_" + t, this.game.cache.getJSON(this.jsonKey) ? (this.language = t, this.localizationData = this.game.cache.getJSON(this.jsonKey), !0) : (this.jsonKey = "localization_" + this.language, !1)) }, t.prototype.getLanguage = function() { return this.language }, t.prototype.getLocalizationData = function() { return this.localizationData }, t.prototype.localizeText = function(t, e, i, n, s) { void 0 === n && (n = !1), void 0 === s && (s = !1); var o, a; if (o = Ph2.UISystem.findObject(t, e), a = i, !n) { if (void 0 === this.localizationData[i]) return console.log("No found key: " + i), o;
                a = this.localizationData[i] } return !0 === this.showDefault && (a = this.defaulString), o.text = s ? a.toUpperCase() : a, o }, t.prototype.getSringForKey = function(t) { for (var e = [], i = 1; i < arguments.length; i++) e[i - 1] = arguments[i]; var n = this.localizationData[t]; if (void 0 === this.localizationData[t]) return console.log("No found key: " + t), ""; for (var s = n.indexOf(this.charInitArg) + 1, o = n.indexOf(this.charEndArg), a = 0, r = n.substring(s, o);
                "" !== r && a < e.length;) n = n.split(this.charInitArg + r + this.charEndArg).join(e[a]), a++, s = n.indexOf(this.charInitArg) + 1, o = n.indexOf(this.charEndArg), r = n.substring(s, o); return !0 === this.showDefault && (n = this.defaulString), n }, t.prototype.addSpriteTo = function(t) { for (var e = [], i = 1; i < arguments.length; i++) e[i - 1] = arguments[i]; for (var n = this.localizationData[t], s = n.indexOf(this.charInitArg) + 1, o = n.indexOf(this.charEndArg), a = 0, r = n.substring(s, o);
                "" !== r && a < e.length;) n = n.split(this.charInitArg + r + this.charEndArg).join(e[a]), a++, s = n.indexOf(this.charInitArg) + 1, o = n.indexOf(this.charEndArg), r = n.substring(s, o); return n }, t.prototype.fitFontSizeUI = function(e, i, n, s, o, a) { void 0 === s && (s = -1), void 0 === o && (o = -1), void 0 === a && (a = t.MIN_FONT_SIZE_DEFAULT); var r;
            r = Ph2.UISystem.findObject(e, i), this.fitFontSizeText(r, n, s, o, a) }, t.prototype.fitFontSizeText = function(e, i, n, s, o) { void 0 === n && (n = -1), void 0 === s && (s = -1), void 0 === o && (o = t.MIN_FONT_SIZE_DEFAULT); var a, r, h, l; for (s > 0 && (e.fontSize = s), r = e.width, h = e.height, l = e.fontSize; r > i || h > n && -1 !== n;) { if ((a = parseInt(l.toString().replace("px", ""), 10) - 1) < o) { l = a = o, e.setStyle({ fontSize: l }, !0); break } l = a, e.fontSize = l, r = e.width, h = e.height } }, t.MIN_FONT_SIZE_DEFAULT = 1, t }();
    t.LocalizationManager = e }(Game || (Game = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    Game;
! function(t) { var e = function(e) {
        function i(i, n) { var s = e.call(this, i, n) || this; return s.skinsKey = ["logo_debugging", "logo_state_machines", "logo_glitches", "logo_command", "logo"], s.pauseFocus = !1, s.pauseOrientation = !1, s.onCompletedIn = new Phaser.Signal, s.onCompletedOut = new Phaser.Signal, s.game.onBlur.add(s.onBlur, s), s.game.onFocus.add(s.onFocus, s), t.Instances.onIncorrectOrientation.add(s.onIncorrecOrientation, s), t.Instances.onCorrectOrientation.add(s.onCorrectOrientation, s), window.addEventListener("resize", function() { return s.resize() }), s.visible = !1, s.resize(), s } return __extends(i, e), i.prototype.createLoading = function() { this.ui = this.game.add.ph2UI("ui_transition_bar", "atlas_mission_select"), this.percentBar = Ph2.UISystem.findObject("bar_container/bar", this.ui), this.percentText = Ph2.UISystem.findObject("bar_container/text", this.ui), this.ui.visible = !1, this.game.stage.addChild(this.ui) }, i.prototype.showLoading = function() { this.ui.visible = !0 }, i.prototype.hideLoading = function() { this.ui.visible = !1 }, i.prototype.updatePercent = function(t) { this.percentBar.width = t / 100 * 308, this.percentText.text = String(t) + "%" }, i.prototype.setSkinTransition = function(e) { switch (e) {
                case t.GameName.debugging:
                    this.slotContainers[13].children[0].loadTexture("atlas_texts_debugging", "logo_1.png"); break;
                case t.GameName.commands:
                    this.slotContainers[13].children[0].loadTexture("atlas_texts_commands", "logo.png"); break;
                case t.GameName.glitches:
                    this.slotContainers[13].children[0].loadTexture("logo_glitches"); break;
                case t.GameName.statemachine:
                    this.slotContainers[13].children[0].loadTexture("atlas_text_statemachine", "logo_" + language + ".png"); break;
                default:
                    this.slotContainers[13].children[0].loadTexture("logo") } }, i.prototype.onBlur = function() { this.pauseFocus = !0, this.state.timeScale = 0 }, i.prototype.onFocus = function() { this.pauseFocus = !1, this.checkResume() }, i.prototype.onIncorrecOrientation = function() { this.pauseOrientation = !0, this.state.timeScale = 0 }, i.prototype.onCorrectOrientation = function() { this.pauseOrientation = !1, this.checkResume() }, i.prototype.checkResume = function() { this.pauseFocus || this.pauseOrientation || (this.state.timeScale = 1) }, i.prototype.resize = function() { this.x = this.game.width / 2, this.y = this.game.height / 2; var t = this.game.width / 960;
            this.scale.x = t, this.scale.y = t }, i.prototype.playIn = function() { this.visible = !0, this.game.input.enabled = !1, this.visible = !0, t.Audios.playSfx(this.game, "transition"), this.setAnimationByName(0, "in", !1).onComplete = this.endIn.bind(this), this.setToSetupPose() }, i.prototype.endIn = function() { this.setAnimationByName(0, "stand", !0), this.game.input.enabled = !0, this.onCompletedIn.dispatch() }, i.prototype.playStand = function() { this.game.input.enabled = !1, this.visible = !0, this.setAnimationByName(0, "stand", !0), this.setToSetupPose() }, i.prototype.playOut = function() { this.game.input.enabled = !1, this.visible = !0, this.setAnimationByName(0, "out", !1).onComplete = this.endOut.bind(this), this.setToSetupPose() }, i.prototype.endOut = function() { this.game.input.enabled = !0, this.visible = !1, this.onCompletedOut.dispatch() }, i.prototype.destroy = function() { this.onCompletedIn.dispose(), this.onCompletedOut.dispose(), this.game.onBlur.remove(this.onBlur, this), this.game.onFocus.remove(this.onFocus, this), t.Instances.onIncorrectOrientation.remove(this.onIncorrecOrientation, this), t.Instances.onCorrectOrientation.remove(this.onCorrectOrientation, this), e.prototype.destroy.call(this) }, i }(PhaserSpine.Spine);
    t.Transition = e }(Game || (Game = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    Game;
! function(t) { var e = function(e) {
        function i() { return e.call(this) || this } return __extends(i, e), i.prototype.init = function() { var e = this; if (this.game.input.maxPointers = 1, this.game.canvas.oncontextmenu = function(t) { t.preventDefault() }, this.game.device.desktop) this.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL, this.scale.pageAlignHorizontally = !0, this.game.scale.windowConstraints.bottom = "visual", t.Instances.onCorrectOrientation = new Phaser.Signal, t.Instances.onIncorrectOrientation = new Phaser.Signal, t.Constants.CALCULATED_WIDTH = this.game.width, t.Constants.CALCULATED_HEIGHT = this.game.height, GameCommands.Constants.CALCULATED_WIDTH = t.Constants.CALCULATED_WIDTH, GameCommands.Constants.CALCULATED_HEIGHT = t.Constants.CALCULATED_HEIGHT, DebuggingGame.Constants.CALCULATED_WIDTH = t.Constants.CALCULATED_WIDTH, DebuggingGame.Constants.CALCULATED_HEIGHT = t.Constants.CALCULATED_HEIGHT, GameGlitch.Constants.CALCULATED_WIDTH = t.Constants.CALCULATED_WIDTH, GameGlitch.Constants.CALCULATED_HEIGHT = t.Constants.CALCULATED_HEIGHT, GameStateMachine.Constants.CALCULATED_WIDTH = t.Constants.CALCULATED_WIDTH, GameStateMachine.Constants.CALCULATED_HEIGHT = t.Constants.CALCULATED_HEIGHT;
            else { this.scale.scaleMode = Phaser.ScaleManager.USER_SCALE, this.scale.fullScreenScaleMode = Phaser.ScaleManager.USER_SCALE, window.addEventListener("resize", function(t) { return i.mobileResizeCallback(e.game.scale) }), this.game.scale.onSizeChange.add(function() { e.game.state.getCurrentState().resize() }, this), this.game.state.onStateChange.add(function(t) { return i.initFullScreenListener(e.game) }); var n = this.game.scale;
                this.game.scale.onFullScreenChange.add(function() { i.mobileResizeCallback(n) }, this), t.Instances.onCorrectOrientation = new Phaser.Signal, t.Instances.onIncorrectOrientation = new Phaser.Signal, i.mobileResizeCallback(this.game.scale) } this.game.onFocus.add(i.resumeMusic, i), i.setScaling(this.game); var s = navigator.userAgent,
                o = !1,
                a = !1; /iPod|iPhone/i.test(s) && (navigator.appVersion.match(/OS (\d+)/), /AppleWebKit/.test(s) && (a = !0), o = !0), o && a && (this.iosTimer = setInterval(function() { window.scrollTo(1, 1) }, 1e3), t.Constants.IOS_BUTTON_PATCH = !0) }, i.resumeMusic = function() { "suspended" === Howler.ctx.state && Howler.ctx.resume() }, i.mobileResizeCallback = function(e) { var n = window.innerWidth,
                s = window.innerHeight,
                o = t.Constants.GAME_WIDTH * t.Constants.GAME_SCALE,
                a = t.Constants.GAME_HEIGHT * t.Constants.GAME_SCALE,
                r = 1;
            r /= n > s ? s / a : s / o, t.Constants.LANDSCAPE_LOCKED ? n > s ? i.handleCorrect() : i.handleIncorrect() : t.Constants.PORTRAIT_LOCKED && (n < s ? i.handleCorrect() : i.handleIncorrect()), t.Constants.CALCULATED_WIDTH = Math.ceil(n * r), t.Constants.CALCULATED_HEIGHT = Math.ceil(s * r), GameCommands.Constants.CALCULATED_WIDTH = t.Constants.CALCULATED_WIDTH, GameCommands.Constants.CALCULATED_HEIGHT = t.Constants.CALCULATED_HEIGHT, DebuggingGame.Constants.CALCULATED_WIDTH = t.Constants.CALCULATED_WIDTH, DebuggingGame.Constants.CALCULATED_HEIGHT = t.Constants.CALCULATED_HEIGHT, GameGlitch.Constants.CALCULATED_WIDTH = t.Constants.CALCULATED_WIDTH, GameGlitch.Constants.CALCULATED_HEIGHT = t.Constants.CALCULATED_HEIGHT, GameStateMachine.Constants.CALCULATED_WIDTH = t.Constants.CALCULATED_WIDTH, GameStateMachine.Constants.CALCULATED_HEIGHT = t.Constants.CALCULATED_HEIGHT, e.game.ph2UIManager.events.onGameResize(t.Constants.CALCULATED_WIDTH, t.Constants.CALCULATED_HEIGHT), e.setGameSize(t.Constants.CALCULATED_WIDTH, t.Constants.CALCULATED_HEIGHT), e.setUserScale(1 / r, 1 / r) }, i.setScaling = function(e) { if (e.device.desktop) return t.Constants.GAME_SCALE = 1, void e.ph2Loader.useScalingVariant("x1"); var n = window.innerWidth,
                s = window.innerHeight;
            t.Constants.LANDSCAPE_LOCKED ? n > s ? i.handleCorrect() : i.handleIncorrect() : t.Constants.PORTRAIT_LOCKED && (n < s ? i.handleCorrect() : i.handleIncorrect()), t.Constants.GAME_SCALE = 1, e.ph2Loader.useScalingVariant("x1"), e.ph2UIManager.events.onGameResize(t.Constants.CALCULATED_WIDTH, t.Constants.CALCULATED_HEIGHT) }, i.initFullScreenListener = function(t) { t.input.onTap.add(function(e) { return i.startFullScreen(t) }) }, i.startFullScreen = function(e) { t.Constants.AUTO_FULLSCREEN_ENABLED && e.device.android && (e.scale.isFullScreen || e.scale.startFullScreen(!1)) }, i.handleCorrect = function() { document.getElementById("orientation").style.display = "none", document.getElementById("content").style.display = "block", t.Instances.isCorrectOrientation = !0, GameStateMachine.Instances.IncorrectOrientation = !0, t.Instances.onCorrectOrientation.dispatch(), console.log("handle correct") }, i.handleIncorrect = function() { document.getElementById("orientation").style.display = "block", document.getElementById("content").style.display = "none", t.Instances.isCorrectOrientation = !1, GameStateMachine.Instances.IncorrectOrientation = !1, t.Instances.onIncorrectOrientation.dispatch(), console.log("handle incorrect") }, i.prototype.create = function() { var t = this,
                e = function() { t.recursiveUpdateText(t.stage) };
            WebFont.load({ custom: { families: ["LubalinGraphITCTurner", "LubalinGraphITCTurnerAra-Bd", "LubalinGraphITCTurnerAra-Bd"], urls: ["assets/fonts/LubalinGraphITCTurner/LubalinGraphITCTurner-Bold.css", "assets/fonts/LubalinGraphITCTurnerAra/LubalinGraphITCTurnerAra-Bd.css", "commands/assets/css/LubalinGraphITCTurnerAra-Bd.css"] }, active: e, inactive: e }), this.game.state.start("preloader") }, i.prototype.recursiveUpdateText = function(t) { var e = this;
            t instanceof Phaser.Text && (t.dirty = !0), t.children && t.children.length > 0 && t.children.forEach(function(t) { e.recursiveUpdateText(t) }) }, i.prototype.preload = function() { this.game.load.cacheBuster = "undefined" == typeof version ? null : version, "en" === language ? (this.game.load.image("logo", "assets/localization/en/logo.png"), this.game.load.json("localization", "assets/localization/en/localization.json"), this.game.load.json("localization_glitches", "glitches/assets/localization/en/localization.json"), this.game.load.atlas("atlas_texts_commands", this.game.ph2Loader.getUrl("commands/assets/atlases/atlas_texts.png"), this.game.ph2Loader.getUrl("commands/assets/atlases/atlas_texts.json")), this.game.load.atlas("atlas_texts_debugging", this.game.ph2Loader.getUrl("debugging/assets/atlases/atlas_texts.png"), this.game.ph2Loader.getUrl("debugging/assets/atlases/atlas_texts.json"))) : (this.game.load.json("localization", "assets/localization/" + language + "/localization.json"), this.game.load.json("localization_glitches", "glitches/assets/localization/" + language + "/localization.json"), this.game.load.image("logo", "assets/localization/" + language + "/logo.png"), this.game.load.atlas("atlas_texts_commands", "commands/assets/localization/" + language + "/atlas_texts.png", "commands/assets/localization/" + language + "/atlas_texts.json"), this.game.load.atlas("atlas_texts_debugging", "debugging/assets/localization/" + language + "/atlas_texts_" + language + ".png", "debugging/assets/localization/" + language + "/atlas_texts_" + language + ".json")), this.game.load.json("resources_commands", "commands/resources.json"), this.game.load.json("audiosprite_commands", "commands/assets/audio/audiosprite.json"), this.game.load.json("audiosprite_debugging", "debugging/assets/audio/audiosprite.json"), this.game.load.json("resources_debugging", "debugging/resources.json"), this.game.load.json("audiosprite_glitch", "glitches/assets/audio/audiosprite.json"), this.game.load.json("levelConfig_glitch", "glitches/assets/balance/levelConfig.json"), this.game.load.json("resources_glitch", "glitches/resources.json"), this.game.load.image("logo_glitches", "glitches/assets/localization/" + language + "/logo_" + language + ".png"), this.game.load.atlas("atlas_text_statemachine", "state-machine/assets/localization/" + language + "/atlas_text.png", "state-machine/assets/localization/" + language + "/atlas_text.json"), this.game.load.json("resources_statemachine", "state-machine/resources.json"), this.game.load.json("balance_statemachine", "state-machine/assets/json/balance.json"), this.game.load.json("localization_statemachine", "state-machine/assets/json/localization.json"), this.game.load.json("audiosprite", "assets/audio/audiosprite.json"), this.game.load.json("resources", "./resources.json"), this.game.load.atlas("load_cn", this.game.ph2Loader.getUrl("assets/atlases/load_cn.png"), this.game.ph2Loader.getUrl("assets/atlases/load_cn.json")), this.game.load.image("fg_logo", this.game.ph2Loader.getUrl("assets/images/fg_logo.png")) }, i }(Phaser.State);
    t.BootState = e }(Game || (Game = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    Game;
! function(t) { var e = function(e) {
        function i() { return e.call(this) || this } return __extends(i, e), i.prototype.init = function() { this.game.world.removeAll(), this.pauseFocus = !1, this.pauseOrientation = !1, t.Instances.onIncorrectOrientation.add(this.onIncorrecOrientation, this), t.Instances.onCorrectOrientation.add(this.onCorrectOrientation, this), this.game.onBlur.add(this.onBlur, this), this.game.onFocus.add(this.onFocus, this), this.lastprogress = [], this.newprogress = []; for (var e = 0; e < 4; e++) this.lastprogress[t.GameName.debugging + e] = t.Instances.dataManager.getLastProgress(t.GameName.debugging + e), this.newprogress[t.GameName.debugging + e] = t.Instances.dataManager.getCurrentProgress(t.GameName.debugging + e), t.Instances.dataManager.saveLastProgress(t.GameName.debugging + e, this.newprogress[t.GameName.debugging + e]) }, i.prototype.create = function() { e.prototype.create.call(this), t.Audios.playMusic(this.game, !0), this.mainGroup = this.game.add.group(), this.componentMgr = Ph2.ComponentPlugin.initComponents(this), this.componentOverlay = this.componentMgr.addComponent(new t.Overlay(this.game, .7)), this.bg = new Phaser.Sprite(this.game, 0, 0, "gsbg"), this.bg.width = this.game.width, this.bg.height = this.game.height, this.bgComic = new Phaser.Sprite(this.game, 0, 0, "bg_comic"), this.bgComic.width = this.game.width, this.bgComic.height = this.game.height, this.bgComic.visible = !1, this.isComic = !1, this.uiComic = new t.UIComic(this, t.COMICID.outro), this.uiComic.visible = !1, this.uiMessage = new t.UIFinalMessage(this), this.uiMainMenu = new t.UIGameSelect(this), this.mainGroup.add(this.bg), this.mainGroup.add(this.bgComic), this.mainGroup.add(this.uiMainMenu), this.mainGroup.add(this.uiComic), this.mainGroup.add(this.componentOverlay.overlaySprite), this.mainGroup.add(this.uiMessage), this.resize(); for (var i = 0; i < 4; i++) this.uiMainMenu.setProgress(t.GameName.debugging + i, this.lastprogress[t.GameName.debugging + i]);
            this.uiMainMenu.disableAll(), t.Instances.transitionAnim.playOut(), t.Instances.transitionAnim.onCompletedOut.addOnce(this.checkProgress, this), this.addCheats() }, i.prototype.checkProgress = function() { t.Instances.transitionAnim.setSkinTransition(4); for (var e = 0; e < 4; e++) this.uiMainMenu.playProgress(t.GameName.debugging + e, this.lastprogress[t.GameName.debugging + e], this.newprogress[t.GameName.debugging + e]) }, i.prototype.onSelectGame = function(e) { this.uiMainMenu.endControlKeyboard(), this.gameSelect = e, t.Instances.transitionAnim.setSkinTransition(e), t.Instances.transitionAnim.playIn(), t.Instances.transitionAnim.onCompletedIn.addOnce(this.onEndTransitionAnim, this) }, i.prototype.onEndTransitionAnim = function() { this.gameSelect === t.GameName.commands ? this.game.state.start("commandspreloader") : this.gameSelect === t.GameName.debugging ? this.game.state.start("debuggingpreloader") : this.gameSelect === t.GameName.glitches ? this.game.state.start("glitchpreloader") : this.game.state.start("statemachinepreloaderState"), t.Audios.onBlur(this.game) }, i.prototype.switchAudio = function() { var e = t.Instances.dataManager.getAudio(); return t.Instances.dataManager.setAudio(!e), !e }, i.prototype.completedInUI = function() { this.needShowComic() ? this.showCompletedComicStep1() : this.needShowCompletedText() ? this.showCompletedText() : (this.uiMainMenu.enableAll(), this.uiMainMenu.initControlKeyboard()) }, i.prototype.needShowComic = function() { for (e = 0; e < 4; e++)
                if (this.newprogress[t.GameName.debugging + e] < 1) return !1; for (var e = 0; e < 4; e++)
                if (this.lastprogress[t.GameName.debugging + e] < 1) return !0; return !1 }, i.prototype.needShowCompletedText = function() { for (var e = 0; e < 4; e++)
                if (1 === this.newprogress[t.GameName.debugging + e] && this.lastprogress[t.GameName.debugging + e] < 1) return !0; return !1 }, i.prototype.showCompletedText = function() { this.componentOverlay.revive(), this.componentOverlay.fadeIn(200), this.uiMessage.show(), console.log() }, i.prototype.closeFinalMessage = function() { this.componentOverlay.fadeOut(200, .7, this.onEndOutOverlay, this) }, i.prototype.onEndOutOverlay = function() { this.uiMainMenu.enableAll(), this.uiMainMenu.initControlKeyboard(), this.componentOverlay.kill() }, i.prototype.showCompletedComicStep1 = function() { t.Instances.transitionAnim.playIn(), t.Instances.transitionAnim.onCompletedIn.addOnce(this.showCompletedComicStep2, this) }, i.prototype.showCompletedComicStep2 = function() { this.isComic = !0, this.uiMainMenu.disableAll(), this.uiMainMenu.visible = !1, this.uiComic.visible = !0, this.bgComic.visible = !0, this.bg.visible = !1, t.Instances.transitionAnim.playOut(), t.Instances.transitionAnim.onCompletedOut.addOnce(this.showEndComic, this) }, i.prototype.showEndComic = function() { this.uiComic.showComic() }, i.prototype.endShowComic = function() { t.Instances.transitionAnim.playIn(), t.Instances.transitionAnim.onCompletedIn.addOnce(this.goToGameSelect, this) }, i.prototype.goToGameSelect = function() { this.isComic = !1, this.uiMainMenu.enableAll(), this.uiMainMenu.initControlKeyboard(), this.uiMainMenu.visible = !0, this.uiComic.visible = !1, this.bgComic.visible = !1, this.bg.visible = !0, t.Instances.transitionAnim.playOut() }, i.prototype.pressHome = function() { this.uiMainMenu.endControlKeyboard(), t.Instances.transitionAnim.playIn(), t.Instances.transitionAnim.onCompletedIn.addOnce(this.goToMainMenu, this) }, i.prototype.goToMainMenu = function() { this.game.state.start("mainmenu") }, i.prototype.onBlur = function() { this.pauseFocus = !0, this.isComic && this.uiComic.onBlur(), this.uiMainMenu.onBlur(), t.Audios.onBlur(this.game) }, i.prototype.onFocus = function() { this.pauseFocus = !1, this.checkResume() }, i.prototype.onIncorrecOrientation = function() { this.pauseOrientation = !0, this.isComic && this.uiComic.onBlur(), t.Audios.onBlur(this.game) }, i.prototype.onCorrectOrientation = function() { this.pauseOrientation = !1, this.checkResume() }, i.prototype.checkResume = function() { this.pauseFocus || this.pauseOrientation || (t.Audios.onFocus(this.game), this.isComic && this.uiComic.onFocus(), this.uiMainMenu.onFocus()) }, i.prototype.addCheats = function() { if (!0 === t.Constants.KEY_DEBUG) { var e = this.game.input.keyboard.addKey(Phaser.Keyboard.ONE),
                    i = this.game.input.keyboard.addKey(Phaser.Keyboard.TWO),
                    n = this.game.input.keyboard.addKey(Phaser.Keyboard.THREE),
                    s = this.game.input.keyboard.addKey(Phaser.Keyboard.FOUR),
                    o = this.game.input.keyboard.addKey(Phaser.Keyboard.FIVE),
                    a = this.game.input.keyboard.addKey(Phaser.Keyboard.SIX),
                    r = this.game.input.keyboard.addKey(Phaser.Keyboard.SEVEN),
                    h = this.game.input.keyboard.addKey(Phaser.Keyboard.EIGHT),
                    l = this.game.input.keyboard.addKey(Phaser.Keyboard.NINE),
                    c = this.game.input.keyboard.addKey(Phaser.Keyboard.ZERO),
                    u = this.game.input.keyboard.addKey(Phaser.Keyboard.Q),
                    p = this.game.input.keyboard.addKey(Phaser.Keyboard.W);
                e.onDown.add(function() { console.log("%c key 1", "background: #272; color: #bada55"), GameGlitch.Instances.dataManager.initData() }, this), i.onDown.add(function() { console.log("%c key 2", "background: #272; color: #bada55"), GameGlitch.Instances.dataManager.initData(), GameGlitch.Instances.dataManager.completedLevel(9, 1), GameGlitch.Instances.dataManager.seeComicIntro() }, this), n.onDown.add(function() { console.log("%c key 3", "background: #272; color: #bada55"), GameGlitch.Instances.dataManager.initData(), GameGlitch.Instances.dataManager.completedLevel(9, 1), GameGlitch.Instances.dataManager.seeComicIntro(), GameGlitch.Instances.dataManager.seeComicEnd() }, this), u.onDown.add(function() { console.log("%c key q", "background: #272; color: #bada55"), GameGlitch.Instances.dataManager.initData(); for (var t = 0; t < 10; t++) GameGlitch.Instances.dataManager.completedLevel(t, 3);
                    GameGlitch.Instances.dataManager.seeComicIntro(), GameGlitch.Instances.dataManager.seeComicEnd() }, this), s.onDown.add(function() { console.log("%c key 4", "background: #272; color: #bada55"), GameCommands.Instances.dataManager.initData() }, this), o.onDown.add(function() { console.log("%c key 5", "background: #272; color: #bada55"), GameCommands.Instances.dataManager.initData(), GameCommands.Instances.dataManager.completedLevel(8), GameCommands.Instances.dataManager.seeComicIntro() }, this), a.onDown.add(function() { console.log("%c key 6", "background: #272; color: #bada55"), GameCommands.Instances.dataManager.initData(), GameCommands.Instances.dataManager.completedLevel(8), GameCommands.Instances.dataManager.seeComicIntro(), GameCommands.Instances.dataManager.seeComicEnd() }, this), r.onDown.add(function() { console.log("%c key 7", "background: #272; color: #bada55"), DebuggingGame.Instances.dataManager.initData() }, this), h.onDown.add(function() { console.log("%c key 8", "background: #272; color: #bada55"), DebuggingGame.Instances.dataManager.initData(), DebuggingGame.Instances.dataManager.completedLevel(9), DebuggingGame.Instances.dataManager.seeComicIntro() }, this), l.onDown.add(function() { console.log("%c key 9", "background: #272; color: #bada55"), DebuggingGame.Instances.dataManager.initData(), DebuggingGame.Instances.dataManager.completedLevel(9), DebuggingGame.Instances.dataManager.seeComicIntro(), DebuggingGame.Instances.dataManager.seeComicEnd() }, this), c.onDown.add(function() { console.log("%c key 0", "background: #272; color: #bada55"), GameStateMachine.Instances.DataManager.initData(), GameStateMachine.Instances.DataManager.saveLastLevelUnlocked(9) }, this), p.onDown.add(function() { console.log("%c key W", "background: #272; color: #bada55"), GameStateMachine.Instances.DataManager.initData() }, this), console.log("%c ***Keys glitch***                               ", "background: #222; color: #bada55"), console.log("%c 1 = ResetData                            ", "background: #222; color: #bada55"), console.log("%c 2 = ResetData unlock level 10 no comic end", "background: #222; color: #bada55"), console.log("%c 3 = ResetData unlock level 10             ", "background: #222; color: #bada55"), console.log("%c q = ResetData unlock level 10 3stars      ", "background: #222; color: #bada55"), console.log("%c ***Keys Commands***                               ", "background: #222; color: #bada55"), console.log("%c 4 = ResetData                            ", "background: #222; color: #bada55"), console.log("%c 5 = ResetData unlock level 9 no comic end", "background: #222; color: #bada55"), console.log("%c 6 = ResetData unlock level 9             ", "background: #222; color: #bada55"), console.log("%c ***Keys debugging***                               ", "background: #222; color: #bada55"), console.log("%c 7 = ResetData                            ", "background: #222; color: #bada55"), console.log("%c 8 = ResetData unlock level 10 no comic end", "background: #222; color: #bada55"), console.log("%c 9 = ResetData unlock level 10             ", "background: #222; color: #bada55"), console.log("%c ***Keys state***                               ", "background: #222; color: #bada55"), console.log("%c w = ResetData                            ", "background: #222; color: #bada55"), console.log("%c 0 = ResetData unlock level 9            ", "background: #222; color: #bada55") } }, i.prototype.shutdown = function() { e.prototype.shutdown.call(this), this.componentMgr.removeComponent(this.componentOverlay), this.componentMgr.destroy(), this.componentMgr = null, this.componentOverlay = null, this.uiMainMenu = null, this.uiMessage = null, this.uiComic = null, this.game.onBlur.remove(this.onBlur, this), this.game.onFocus.remove(this.onFocus, this), t.Instances.onIncorrectOrientation.remove(this.onIncorrecOrientation, this), t.Instances.onCorrectOrientation.remove(this.onCorrectOrientation, this) }, i.prototype.resize = function() { this.bg.width = this.game.width, this.bg.height = this.game.height }, i }(Phaser.State);
    t.GameSelectState = e }(Game || (Game = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    Game;
! function(t) { var e = function(e) {
        function i() { return e.call(this) || this } return __extends(i, e), i.prototype.init = function() { this.game.world.removeAll() }, i.prototype.create = function() { e.prototype.create.call(this), t.Audios.playMusic(this.game, !0), this.mainGroup = this.game.add.group(), this.bg = new Phaser.Sprite(this.game, 0, 0, "main_new_bg"), this.bg.width = this.game.width, this.bg.height = this.game.height, this.bgComic = new Phaser.Sprite(this.game, 0, 0, "bg_comic"), this.bgComic.width = this.game.width, this.bgComic.height = this.game.height, this.bgComic.visible = !1, this.isComic = !1, this.uiMainMenu = new t.UIMainMenu(this), this.pauseFocus = !1, this.pauseOrientation = !1, t.Instances.onIncorrectOrientation.add(this.onIncorrecOrientation, this), t.Instances.onCorrectOrientation.add(this.onCorrectOrientation, this), this.game.onBlur.add(this.onBlur, this), this.game.onFocus.add(this.onFocus, this), this.uiComic = new t.UIComic(this, t.COMICID.intro), this.uiComic.visible = !1, this.mainGroup.add(this.bg), this.mainGroup.add(this.bgComic), this.mainGroup.add(this.uiMainMenu), this.mainGroup.add(this.uiComic), this.resize(), t.Instances.transitionAnim.playOut() }, i.prototype.pressPlay = function() { t.Instances.transitionAnim.playIn(), t.Instances.transitionAnim.onCompletedIn.addOnce(this.onEndTransitionAnim, this) }, i.prototype.onEndTransitionAnim = function() { t.Instances.dataManager.getSeeComicIntro() ? this.game.state.start("gameSelect") : (this.isComic = !0, this.uiMainMenu.disableAllInput(), this.uiMainMenu.visible = !1, this.uiComic.visible = !0, this.bgComic.visible = !0, this.bg.visible = !1, t.Instances.transitionAnim.playOut(), t.Instances.transitionAnim.onCompletedOut.addOnce(this.showInitComic, this)) }, i.prototype.showInitComic = function() { this.uiComic.showComic() }, i.prototype.switchAudio = function() { var e = t.Instances.dataManager.getAudio(); return t.Instances.dataManager.setAudio(!e), !e }, i.prototype.endShowComic = function() { t.Instances.transitionAnim.playIn(), t.Instances.transitionAnim.onCompletedIn.addOnce(this.goToLevelSelect, this) }, i.prototype.goToLevelSelect = function() { t.Instances.dataManager.seeComicIntro(), this.game.state.start("gameSelect") }, i.prototype.onBlur = function() { this.pauseFocus = !0, this.isComic ? this.uiComic.onBlur() : this.uiMainMenu.onBlur(), t.Audios.onBlur(this.game) }, i.prototype.onFocus = function() { this.pauseFocus = !1, this.checkResume() }, i.prototype.onIncorrecOrientation = function() { this.pauseOrientation = !0, this.isComic ? this.uiComic.onBlur() : this.uiMainMenu.onBlur(), t.Audios.onBlur(this.game) }, i.prototype.onCorrectOrientation = function() { this.pauseOrientation = !1, this.checkResume() }, i.prototype.checkResume = function() { this.pauseFocus || this.pauseOrientation || (this.isComic ? this.uiComic.onFocus() : this.uiMainMenu.onFocus(), t.Audios.onFocus(this.game)) }, i.prototype.shutdown = function() { this.game.onBlur.remove(this.onBlur, this), this.game.onFocus.remove(this.onFocus, this), t.Instances.onIncorrectOrientation.remove(this.onIncorrecOrientation, this), t.Instances.onCorrectOrientation.remove(this.onCorrectOrientation, this) }, i.prototype.resize = function() { this.isComic ? this.uiComic.resize() : this.uiMainMenu.resize(), this.bg.width = this.game.width, this.bg.height = this.game.height, this.bgComic.width = this.game.width, this.bgComic.height = this.game.height }, i }(Phaser.State);
    t.MainMenuState = e }(Game || (Game = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    Game;
! function(t) { var e = function(e) {
        function i() { return e.call(this) || this } return __extends(i, e), i.prototype.init = function() { var t = this.game.cache.getJSON("resources");
            this.game.ph2Loader.debug(!0), this.game.ph2Loader.setAssetsResources(t) }, i.prototype.preload = function() { this.game.stage.backgroundColor = 197379, this.game.ph2UIManager.enableVisibilityAndOrientationComponent = !1, this.group = new Phaser.Group(this.game), this.add.existing(this.group), this.componentMgr = Ph2.ComponentPlugin.initComponents(this), this.loadingCN = this.componentMgr.addComponent(new t.LoadingCN(this.game, this.group)), this.resize(), this.progress(0), t.Audios.loadAudioSprite(this.game, "audiosprite"), this.game.ph2Loader.load("firstLoad"), this.game.load.onFileComplete.add(this.progress, this) }, i.prototype.progress = function(t) { this.loadingCN.setPercent(t) }, i.prototype.create = function() { this.changeFontUI(), GameCommands.Instances.initDataManager(this.game), DebuggingGame.Instances.initDataManager(this.game), GameGlitch.Instances.initDataManager(this.game), GameCommands.Instances.initDataManager(this.game), GameStateMachine.Instances.DataManager = new GameStateMachine.DataManager(this.game), t.Instances.initDataManager(this.game), t.Instances.initLocalizationManager(this.game), t.Instances.initTransitionAnim(this.game), t.Instances.transitionAnim.setSkinTransition(4), t.Instances.initControlButtonUI(this.game), t.Instances.dataManager.getAudio() ? t.Audios.enableAudio(this.game) : t.Audios.disableAudio(this.game), this.game.stage.addChild(t.Instances.transitionAnim), t.Instances.transitionAnim.createLoading(), this.loadingCN.showPlayButton() }, i.prototype.changeFontUI = function() { if (-1 !== ["ru", "ro", "bg", "pl"].indexOf(language))
                for (var t, e = ["ui_mission_select"], i = 0, n = e.length; i < n; i++) { t = this.game.cache.getJSON(e[i]).properties; for (var s in t) t.hasOwnProperty(s) && void 0 !== t[s].font && (t[s].font.name = "LubalinGraphITCTurnerAra-Bd" === t[s].font.name ? "LubalinGraphITCTurner" : t[s].font.name) } }, i.prototype.pressPlayButton = function() { t.Instances.transitionAnim.playIn(), t.Instances.transitionAnim.onCompletedIn.addOnce(this.onEndTransitionAnim, this) }, i.prototype.onEndTransitionAnim = function() { this.game.state.start("mainmenu") }, i.prototype.resize = function() { this.loadingCN.resize() }, i.prototype.shutdown = function() { this.game.load.onFileComplete.remove(this.progress, this), this.componentMgr.removeComponent(this.loadingCN), this.group.destroy(), this.componentMgr = null, e.prototype.shutdown.call(this) }, i }(Phaser.State);
    t.PreloaderState = e }(Game || (Game = {}));
var Game;
! function(t) { var e = function() {
        function t() {} return t.addTouchCallbackToButton = function(t, e, i, n, s) { void 0 === s && (s = 0); for (var o = [], a = 5; a < arguments.length; a++) o[a - 5] = arguments[a]; var r; return (r = Ph2.UISystem.findObject(t, e)).onInputUp.add(i, n, s, o), r }, t.addTouchCallbackToText = function(t, e, i, n) { var s; return s = Ph2.UISystem.findObject(t, e), s.inputEnabled = !0, s.input.useHandCursor = !0, s.events.onInputUp.add(i, n), s }, t.addTouchCallbackToSprite = function(t, e, i, n) { var s; return s = Ph2.UISystem.findObject(t, e), s.inputEnabled = !0, s.input.useHandCursor = !0, s.events.onInputUp.add(i, n), s }, t.addTouchCallbackToSpriteAnimation = function(t, e, i, n) { var s; return s = Ph2.AnimationSystem.findObject(t, e), s.inputEnabled = !0, s.input.useHandCursor = !0, s.events.onInputUp.add(i, n), s }, t.addInputToPreventPropagation = function(t, e) { var i;
            (i = Ph2.UISystem.findObject(t, e)).inputEnabled = !0, i.input.useHandCursor = !1 }, t.disableTouch = function(t, e) { Ph2.UISystem.findObject(t, e).inputEnabled = !1 }, t.enableTouch = function(t, e) { var i;
            (i = Ph2.UISystem.findObject(t, e)).inputEnabled = !0, i.input.useHandCursor = !0 }, t.disableTouchAnimation = function(t, e) { Ph2.AnimationSystem.findObject(t, e).inputEnabled = !1 }, t.enableTouchAnimation = function(t, e) { var i;
            (i = Ph2.AnimationSystem.findObject(t, e)).inputEnabled = !0, i.input.useHandCursor = !0 }, t }();
    t.Util = e }(Game || (Game = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    Game;
! function(t) { var e;! function(t) { t[t.intro = 0] = "intro", t[t.end = 1] = "end", t[t.outro = 2] = "outro" }(e = t.COMICID || (t.COMICID = {})); var i = function(i) {
        function n(t, e) { var n = i.call(this, t.game) || this;
            n.controller = t, n.id = e, n.tweens = [], n.ui = n.game.add.ph2UI("ui_comic2", "atlas_comic2"), n.btnPlay = Ph2.UISystem.findObject("play_pivot", n.ui); var s = Ph2.UISystem.findObject("play_pivot", n.ui); return n.animButton = n.game.add.ph2AnimationObject(0, 0, "play_main2", "atlas_ui_main_menu"), s.addChild(n.animButton), n.timerSound = n.game.time.create(!1), n.animButton.visible = !1, n.btnAudio = Ph2.UISystem.findObject("sound", n.ui), n.btnAudio.visible = !1, n.buttonSprite = Ph2.AnimationSystem.findObject("base", n.animButton), n.buttonSprite.inputEnabled = !0, n.selectSprite = new Phaser.Sprite(n.game, 0, 0, "atlas_ui_main_menu", "hl_mid.png"), n.selectSprite.anchor.set(.5, .5), n.addComic(), n.ui.addChild(n.selectSprite), n.ui.bringToTop(n.btnPlay), n.add(n.ui), n.addKeysControl(), n.addTouchCallback(), n.disableAllInput(), n.checkFixIOS(), n } return __extends(n, i), n.prototype.checkFixIOS = function() { if (t.Constants.IOS_BUTTON_PATCH) { var e = void 0;
                (e = Ph2.UISystem.findObject("sound", this.ui)).y += 30, e.alignment.setLandscapeAlignment("BOTTOM_RIGHT", -.1, !0, -528, !0), (e = Ph2.UISystem.findObject("play_pivot", this.ui)).y -= 20, e.alignment.setLandscapeAlignment("BOTTOM_RIGHT", -120.5, !0, -113.4, !0) } }, n.prototype.addKeysControl = function() { this.keyStart = this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER) }, n.prototype.addComic = function() { var t = Ph2.UISystem.findObject("comic_pivot", this.ui);
            this.id === e.intro ? (this.comic = this.game.add.ph2AnimationObject(0, 0, "comic_intro", "atlas_ui_comic2"), this.timerSound.add(100, this.playIntroStripComic, this), this.timerSound.add(656, this.playIntroStripComic, this), this.timerSound.add(1100, this.playIntroStripComic, this), this.timerSound.add(2100, this.playIntroStripComic, this), this.timerSound.add(2800, this.playIntroStripComic, this), this.timerSound.add(3200, this.playIntroStripComic, this), this.timerSound.add(6500, this.playIntroStripComic, this), this.timerSound.add(7200, this.playIntroStripComic, this), this.timerSound.add(7800, this.playIntroStripComic, this), this.timerSound.add(8300, this.playIntroStripComic, this), this.comic2 = this.game.add.ph2AnimationObject(0, 0, "comic_final", "atlas_ui_comic2"), t.addChild(this.comic), t.addChild(this.comic2), this.comic2.visible = !1) : (this.comic = this.game.add.ph2AnimationObject(0, 0, "comic_outro", "atlas_comic2"), this.timerSound.add(100, this.playIntroStripComic, this), this.timerSound.add(1067, this.playIntroStripComic, this), t.addChild(this.comic)) }, n.prototype.addTouchCallback = function() { this.buttonSprite.events.onInputDown.add(this.pressPlayBtn, this), t.Util.addTouchCallbackToButton("sound", this.ui, this.switchAudio, this) }, n.prototype.playIntroStripComic = function() { t.Audios.playSfxComic(this.game) }, n.prototype.setSelectButton = function() { switch (this.selectSprite.visible = !0, t.Instances.controlButtonUI.actualButton) {
                case "buttonPlay":
                    this.selectSprite.x = this.btnPlay.x, this.selectSprite.y = this.btnPlay.y, this.selectSprite.scale.set(.7, .7); break;
                case "buttonAudio":
                    this.selectSprite.x = this.btnAudio.x, this.selectSprite.y = this.btnAudio.y, this.selectSprite.scale.set(1, 1); break;
                case "none":
                    this.selectSprite.visible = !1 } this.selectSprite.frameName = t.Instances.controlButtonUI.getHightLight() }, n.prototype.onSelectButton = function() { switch (t.Instances.controlButtonUI.actualButton) {
                case "buttonPlay":
                    this.pressPlayBtn(); break;
                case "buttonAudio":
                    this.switchAudio(); break;
                case "none":
                    this.pressPlayBtn() } }, n.prototype.switchAudio = function() { t.Audios.playSfx(this.game, "generic_button"); var e = this.controller.switchAudio();
            this.setButtonAudio(e) }, n.prototype.setButtonAudio = function(e) {!0 === e ? (t.Audios.enableAudio(this.game), this.btnAudio.setFrames("sound1.png", "sound1.png", "sound1_press.png", "sound1.png")) : (t.Audios.disableAudio(this.game), this.btnAudio.setFrames("sound2.png", "sound2.png", "sound2_press.png", "sound2.png")) }, n.prototype.showComic = function() { this.resize(), this.animButton.visible = !1, this.btnAudio.visible = !1, t.Instances.controlButtonUI.initControl("uiMainMenu"), t.Instances.controlButtonUI.onChangeButton.add(this.setSelectButton, this), t.Instances.controlButtonUI.removeControl(this.game), this.timerSound.start(); var i; if (this.id === e.intro) i = "comic_intro_play2";
            else if (this.id === e.end) i = "comic_final_play2", this.comic.visible = !1, this.comic2.visible = !0, this.comic = this.comic2;
            else { i = "comic_outro_play2"; var n = Ph2.AnimationSystem.findObject("base2/text", this.comic);
                n.text = t.Instances.localization.getSringForKey("well_done_message_2"), n.wordWrapWidth = 433, n.wordWrap = !0, t.Instances.localization.fitFontSizeText(n, 433, 256, 55, 10) } this.comic.ph2Animations.play(i, 1, !1).onComplete.addOnce(this.onEndshowComic, this) }, n.prototype.onEndshowComic = function() { t.Instances.controlButtonUI.addControl(this.game), this.id !== e.intro ? (this.animButton.visible = !0, this.btnAudio.visible = !0) : (this.animButton.ph2Animations.play("play_anim2_press", 1, !1).onComplete.addOnce(this.hideComic, this), this.disableAllInput()), this.animButton.alpha = 0, this.btnAudio.alpha = 0, this.tweens = []; var i;
            (i = this.game.add.tween(this.animButton).to({ alpha: 1 }, 300, "Linear", !0)).onComplete.add(this.onEndShowButtons, this), this.tweens.push(i), i = this.game.add.tween(this.btnAudio).to({ alpha: 1 }, 300, "Linear", !0), this.tweens.push(i), this.setButtonAudio(t.Instances.dataManager.getAudio()), this.setSelectButton() }, n.prototype.onEndShowButtons = function() { this.animButton.ph2Animations.play("play_anim2", 1, !0), this.tweens = [], this.enableAllInput() }, n.prototype.enableAllInput = function() { this.keyStart.onDown.add(this.onSelectButton, this), this.buttonSprite.inputEnabled = !0 }, n.prototype.disableAllInput = function() { this.keyStart.onDown.remove(this.onSelectButton, this), this.buttonSprite.inputEnabled = !1, this.selectSprite.visible = !1 }, n.prototype.pressPlayBtn = function() { if (this.id === e.intro)(i = this.animButton.ph2Animations.play("play_anim2_press", 1, !1)).onComplete.addOnce(this.hideComic, this);
            else { var i = this.animButton.ph2Animations.play("play_anim2_press", 1, !1);
                i.onComplete.addOnce(this.hideComic, this) } this.disableAllInput(), t.Audios.playSfx(this.game, "play_button") }, n.prototype.hideComic = function() { var t;
            this.id === e.intro ? (this.id = e.end, t = "comic_intro_out2", this.comic.ph2Animations.play(t, 1, !1).onComplete.addOnce(this.showComic, this)) : this.id === e.end ? (t = "comic_final_out2", this.comic.ph2Animations.play(t, 1, !1).onComplete.addOnce(this.onEndPlayBtnAnim, this)) : (t = "comic_outro_out2", this.comic.ph2Animations.play(t, 1, !1).onComplete.addOnce(this.onEndPlayBtnAnim, this)) }, n.prototype.onEndPlayBtnAnim = function() { this.controller.endShowComic() }, n.prototype.onBlur = function() { this.animButton.ph2Animations.pause(), this.comic.ph2Animations.pause(), this.timerSound.pause(); for (var t = 0, e = this.tweens; t < e.length; t++) e[t].pause() }, n.prototype.onFocus = function() { this.animButton.ph2Animations.resume(), this.comic.ph2Animations.resume(), this.timerSound.resume(); for (var t = 0, e = this.tweens; t < e.length; t++) e[t].resume() }, n.prototype.resize = function() { this.game.width < 960 ? (this.comic.scale.x = this.game.width / 960, this.comic.scale.y = this.game.width / 960, this.animButton.scale.x = this.game.width / 960, this.animButton.scale.y = this.game.width / 960) : (this.comic.scale.x = 1, this.comic.scale.y = 1, this.animButton.scale.x = 1, this.animButton.scale.y = 1) }, n.prototype.destroy = function() { t.Instances.controlButtonUI.removeControl(this.game), t.Instances.controlButtonUI.onChangeButton.remove(this.setSelectButton, this), i.prototype.destroy.call(this) }, n }(Phaser.Group);
    t.UIComic = i }(Game || (Game = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    Game;
! function(t) { var e;! function(t) { t[t.title = 0] = "title", t[t.description = 1] = "description" }(e || (e = {})); var i = function(e) {
        function i(t) { var i = e.call(this, t.game) || this; return i.controller = t, i.ui = i.game.add.ph2UI("ui_final_message", "atlas_ui_popups2"), i.tweenShow = null, i.tweenHide = null, i.decor = i.game.add.ph2AnimationObject(0, 0, "shine", "atlas_ui_popups2"), Ph2.UISystem.findObject("final_base/shine_pivot", i.ui).addChild(i.decor), i.add(i.ui), i.visible = !1, i.isShow = !1, i.localization(), i.addKeysControl(), i.addTouchCallback(), i } return __extends(i, e), i.prototype.addTouchCallback = function() { t.Util.addTouchCallbackToButton("yes", this.ui, this.pressContinue, this) }, i.prototype.addKeysControl = function() { this.keyStart = this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER) }, i.prototype.localization = function() { var t;
            (t = Ph2.UISystem.findObject("final_base/final_container/final_message1", this.ui)).loadTexture("atlas_texts_commands"), t.frameName = "final_message1.png", (t = Ph2.UISystem.findObject("final_base/final_container/final_message2", this.ui)).loadTexture("atlas_texts_commands"), t.frameName = "final_message2.png" }, i.prototype.show = function() { this.enableAllInput(), this.decor.ph2Animations.play("final_message_anim", 1, !0), this.visible = !0, this.isShow = !0 }, i.prototype.animOut = function() { this.tweenHide = this.game.add.tween(this.ui).to({ y: this.game.height + 200 }, 300, Phaser.Easing.Linear.None, !0), this.tweenHide.onComplete.addOnce(this.hide, this) }, i.prototype.pressContinue = function() { this.hide(), this.disableAllInput(), t.Audios.playSfx(this.game, "generic_button"), this.controller.closeFinalMessage() }, i.prototype.enableAllInput = function() { this.keyStart.onDown.add(this.pressContinue, this), t.Util.enableTouch("yes", this.ui) }, i.prototype.disableAllInput = function() { this.keyStart.onDown.remove(this.pressContinue, this), t.Util.disableTouch("yes", this.ui) }, i.prototype.hide = function() { this.isShow = !1, this.decor.ph2Animations.destroy(), this.decor = null, this.visible = !1 }, i.prototype.pause = function() { this.decor && this.decor.ph2Animations.pause("final_message_anim") }, i.prototype.resume = function() { this.decor && this.decor.ph2Animations.resume("final_message_anim") }, i }(Phaser.Group);
    t.UIFinalMessage = i }(Game || (Game = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    Game;
! function(t) { var e;! function(t) { t[t.buttonGame1 = 0] = "buttonGame1", t[t.buttonGame2 = 1] = "buttonGame2", t[t.buttonGame3 = 2] = "buttonGame3", t[t.buttonGame4 = 3] = "buttonGame4", t[t.textPercent1 = 4] = "textPercent1", t[t.textPercent2 = 5] = "textPercent2", t[t.textPercent3 = 6] = "textPercent3", t[t.textPercent4 = 7] = "textPercent4", t[t.barPercent1 = 8] = "barPercent1", t[t.barPercent2 = 9] = "barPercent2", t[t.barPercent3 = 10] = "barPercent3", t[t.barPercent4 = 11] = "barPercent4", t[t.barCompleted1 = 12] = "barCompleted1", t[t.barCompleted2 = 13] = "barCompleted2", t[t.barCompleted3 = 14] = "barCompleted3", t[t.barCompleted4 = 15] = "barCompleted4", t[t.back = 16] = "back", t[t.audio = 17] = "audio" }(e || (e = {})); var i = function(i) {
        function n(e) { var n = i.call(this, e.game) || this; return n.controller = e, n.ui = n.game.add.ph2UI("ui_mission_select", "atlas_mission_select"), n.selectSprite = new Phaser.Sprite(n.game, 0, 0, "atlas_mission_select", "hl_mid.png"), n.selectSprite.anchor.set(.5, .5), n.tweenSelect = null, n.selectSprite.visible = !1, n.currentTweens = [], n.progressAnimationCompleted = 0, n.saveElements(), n.add(n.selectSprite), n.add(n.ui), n.addKeysControl(), n.addTouchCallback(), n.setButtonAudio(t.Instances.dataManager.getAudio()), t.Instances.localization.localizeText("title_container/text", n.ui, "title_game_select"), n.checkFixIOS(), n } return __extends(n, i), n.prototype.checkFixIOS = function() { if (t.Constants.IOS_BUTTON_PATCH) { var i = void 0;
                (i = this.elementsUI[e.back].parent).y += 30, i.alignment.setLandscapeAlignment("TOP_LEFT", -7.6, !0, -21.6, !0), (i = this.elementsUI[e.audio].parent).y += 30, i.alignment.setLandscapeAlignment("TOP_RIGHT", -5, !0, -31.5, !0) } }, n.prototype.addKeysControl = function() { this.keyStart = this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER), this.keyBack = this.game.input.keyboard.addKey(Phaser.Keyboard.ESC) }, n.prototype.onSelectButton = function() { switch (t.Instances.controlButtonUI.actualButton) {
                case "back":
                    this.pressHomeBtn(); break;
                case "none":
                    this.pressButtonGame(null, null, t.GameName.debugging); break;
                case "audio":
                    this.switchAudio(); break;
                case "button1":
                    this.pressButtonGame(null, null, t.GameName.debugging); break;
                case "button2":
                    this.pressButtonGame(null, null, t.GameName.debugging + 1); break;
                case "button3":
                    this.pressButtonGame(null, null, t.GameName.debugging + 2); break;
                case "button4":
                    this.pressButtonGame(null, null, t.GameName.debugging + 3) } }, n.prototype.setSelectButton = function() { var i; switch (this.selectSprite.visible = !0, this.tweenSelect && (this.tweenSelect.stop(), this.tweenSelect.target.y = 0), t.Instances.controlButtonUI.actualButton) {
                case "back":
                    i = this.elementsUI[e.back], this.selectSprite.x = i.x + i.parent.x, this.selectSprite.y = i.y + i.parent.y; break;
                case "audio":
                    i = this.elementsUI[e.audio], this.selectSprite.x = i.x + i.parent.x, this.selectSprite.y = i.y + i.parent.y; break;
                case "button1":
                    i = this.elementsUI[e.buttonGame1], this.tweenSelect = this.game.add.tween(i.children[0]), this.tweenSelect.to({ y: -4 }, 750).to({ y: 5.6 }, 1e3).to({ y: 0 }, 750), this.tweenSelect.loop(!0), this.tweenSelect.start(), this.selectSprite.x = i.x, this.selectSprite.y = i.y; break;
                case "button2":
                    i = this.elementsUI[e.buttonGame2], this.tweenSelect = this.game.add.tween(i.children[0]), this.tweenSelect.to({ y: -4 }, 750).to({ y: 5.6 }, 1e3).to({ y: 0 }, 750), this.tweenSelect.loop(!0), this.tweenSelect.start(), this.selectSprite.x = i.x, this.selectSprite.y = i.y; break;
                case "button3":
                    i = this.elementsUI[e.buttonGame3], this.tweenSelect = this.game.add.tween(i.children[0]), this.tweenSelect.to({ y: -4 }, 750).to({ y: 5.6 }, 1e3).to({ y: 0 }, 750), this.tweenSelect.loop(!0), this.tweenSelect.start(), this.selectSprite.x = i.x, this.selectSprite.y = i.y; break;
                case "button4":
                    i = this.elementsUI[e.buttonGame4], this.tweenSelect = this.game.add.tween(i.children[0]), this.tweenSelect.to({ y: -4 }, 750).to({ y: 5.6 }, 1e3).to({ y: 0 }, 750), this.tweenSelect.loop(!0), this.tweenSelect.start(), this.selectSprite.x = i.x, this.selectSprite.y = i.y; break;
                default:
                    this.selectSprite.visible = !1 } this.selectSprite.frameName = t.Instances.controlButtonUI.getHightLight() }, n.prototype.initControlKeyboard = function() { t.Instances.controlButtonUI.addControl(this.game), t.Instances.controlButtonUI.initControl("uiGameSelect"), t.Instances.controlButtonUI.onChangeButton.add(this.setSelectButton, this), this.setSelectButton() }, n.prototype.endControlKeyboard = function() { t.Instances.controlButtonUI.removeControl(this.game), t.Instances.controlButtonUI.removeControl(this.game), t.Instances.controlButtonUI.onChangeButton.remove(this.setSelectButton, this) }, n.prototype.saveElements = function() { this.elementsUI = []; for (var t = ["button_game1", "button_game2", "button_game3", "button_game4", "button_game1/bar_container/text", "button_game2/bar_container/text", "button_game3/bar_container/text", "button_game4/bar_container/text", "button_game1/bar_container/bar", "button_game2/bar_container/bar", "button_game3/bar_container/bar", "button_game4/bar_container/bar", "button_game1/bar_container/complete_bar", "button_game2/bar_container/complete_bar", "button_game3/bar_container/complete_bar", "button_game4/bar_container/complete_bar", "back_container/back", "sound_container/sound"], i = 0; i < t.length; i++) this.elementsUI[e.buttonGame1 + i] = Ph2.UISystem.findObject(t[i], this.ui) }, n.prototype.addTouchCallback = function() { for (var i, n = 0; n < 4; n++)(i = this.elementsUI[e.buttonGame1 + n]).inputEnabled = !0, i.events.onInputDown.add(this.pressButtonGame, this, 0, t.GameName.debugging + n), i.events.onInputOver.add(this.onOverButton, this, 0, t.GameName.debugging + n);
            (i = this.elementsUI[e.audio]).inputEnabled = !0, i.events.onInputDown.add(this.switchAudio, this), (i = this.elementsUI[e.back]).inputEnabled = !0, i.events.onInputDown.add(this.pressHomeBtn, this) }, n.prototype.pressHomeBtn = function() { this.disableAll(), t.Audios.playSfx(this.game, "generic_button"), this.controller.pressHome() }, n.prototype.setButtonAudio = function(i) {!0 === i ? (t.Audios.enableAudio(this.game), this.elementsUI[e.audio].setFrames("sound1.png", "sound1.png", "sound1_press.png", "sound1.png")) : (t.Audios.disableAudio(this.game), this.elementsUI[e.audio].setFrames("sound2.png", "sound2.png", "sound2_press.png", "sound2.png")) }, n.prototype.switchAudio = function() { t.Audios.playSfx(this.game, "generic_button"); var e = this.controller.switchAudio();
            this.setButtonAudio(e) }, n.prototype.setProgress = function(t, i) { this.elementsUI[e.textPercent1 + t].text = String(Math.floor(100 * i)) + "%", this.elementsUI[e.barPercent1 + t].width = 112 * i, this.elementsUI[e.barCompleted1 + t].visible = i >= 1 }, n.prototype.playProgress = function(e, i, n) { var s; if (i === n) return this.progressAnimationCompleted++, void this.checkCompletedIn(); switch (e) {
                case t.GameName.commands:
                    this.progress1 = 100 * i, s = this.game.add.tween(this).to({ progress1: 100 * n }, 500, "Linear").to({ progress1: 100 * n }, 100, "Linear"); break;
                case t.GameName.debugging:
                    this.progress2 = 100 * i, s = this.game.add.tween(this).to({ progress2: 100 * n }, 500, "Linear").to({ progress2: 100 * n }, 500, "Linear"); break;
                case t.GameName.glitches:
                    this.progress3 = 100 * i, s = this.game.add.tween(this).to({ progress3: 100 * n }, 500, "Linear").to({ progress3: 100 * n }, 500, "Linear"); break;
                case t.GameName.statemachine:
                    this.progress4 = 100 * i, s = this.game.add.tween(this).to({ progress4: 100 * n }, 500, "Linear").to({ progress4: 100 * n }, 500, "Linear") } s.start(); var o = this;
            s.onUpdateCallback(function() { o.onUpdateProgress(e) }, this), s.onComplete.addOnce(this.onCompletedProgress, this, 0, e), this.currentTweens[e] = s }, n.prototype.onUpdateProgress = function(i) { var n; switch (i) {
                case t.GameName.commands:
                    n = this.progress1; break;
                case t.GameName.debugging:
                    n = this.progress2; break;
                case t.GameName.glitches:
                    n = this.progress3; break;
                case t.GameName.statemachine:
                    n = this.progress4 } this.elementsUI[e.textPercent1 + i].text = String(Math.floor(n)) + "%", this.elementsUI[e.barPercent1 + i].width = n / 100 * 112 }, n.prototype.onCompletedProgress = function(i, n, s) { var o; switch (s) {
                case t.GameName.commands:
                    o = this.progress1; break;
                case t.GameName.debugging:
                    o = this.progress2; break;
                case t.GameName.glitches:
                    o = this.progress3; break;
                case t.GameName.statemachine:
                    o = this.progress4 } this.elementsUI[e.textPercent1 + s].text = String(Math.floor(o)) + "%", this.elementsUI[e.barPercent1 + s].width = o / 100 * 112, this.elementsUI[e.barCompleted1 + s].visible = o >= 100, this.progressAnimationCompleted++, this.checkCompletedIn() }, n.prototype.checkCompletedIn = function() { 4 === this.progressAnimationCompleted && this.controller.completedInUI() }, n.prototype.onOverButton = function(e, i, n) { switch (n) {
                case t.GameName.commands:
                    t.Instances.controlButtonUI.setButton("button4"); break;
                case t.GameName.debugging:
                    t.Instances.controlButtonUI.setButton("button1"); break;
                case t.GameName.glitches:
                    t.Instances.controlButtonUI.setButton("button3"); break;
                case t.GameName.statemachine:
                    t.Instances.controlButtonUI.setButton("button2") } }, n.prototype.pressButtonGame = function(e, i, n) { t.Audios.playSfx(this.game, "play_button"), this.controller.onSelectGame(n), this.disableAll() }, n.prototype.disableAll = function() { for (var t = 0; t < 4; t++) this.elementsUI[e.buttonGame1 + t].inputEnabled = !1;
            this.keyStart.onDown.remove(this.onSelectButton, this), this.keyBack.onDown.remove(this.pressHomeBtn, this) }, n.prototype.enableAll = function() { for (var t = 0; t < 4; t++) this.elementsUI[e.buttonGame1 + t].inputEnabled = !0;
            this.keyStart.onDown.add(this.onSelectButton, this), this.keyBack.onDown.add(this.pressHomeBtn, this) }, n.prototype.onBlur = function() { this.tweenSelect && this.tweenSelect.pause(); for (var t = 0, e = this.currentTweens; t < e.length; t++) { var i = e[t];
                i && i.pause() } }, n.prototype.onFocus = function() { this.tweenSelect && this.tweenSelect.resume(); for (var t = 0, e = this.currentTweens; t < e.length; t++) { var i = e[t];
                i && i.resume() } }, n.prototype.destroy = function() { this.endControlKeyboard(), this.tweenSelect && (this.tweenSelect.stop(), this.tweenSelect.target.y = 0); for (var t = 0, e = this.currentTweens; t < e.length; t++) { var n = e[t];
                n && n.stop() } this.ui = null, this.elementsUI = [], this.selectSprite = null, this.keyStart = null, this.keyBack = null, this.tweenSelect = null, this.currentTweens = null, i.prototype.destroy.call(this) }, n }(Phaser.Group);
    t.UIGameSelect = i }(Game || (Game = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    Game;
! function(t) { var e = function(e) {
        function i(i) { var n = e.call(this, i.game) || this;
            n.controller = i, n.ui = n.game.add.ph2UI("ui_main_menu_new", "ui_main_menu_2"), n.btnPlay = Ph2.UISystem.findObject("play", n.ui), n.btnAudio = Ph2.UISystem.findObject("sound", n.ui), n.logoPivot = Ph2.UISystem.findObject("logo/image", n.ui), n.logoPivot.loadTexture("logo"), n.selectSprite = new Phaser.Sprite(n.game, 0, 0, "atlas_ui_level_select", "hl_mid.png"), n.selectSprite.anchor.set(.5, .5), n.game.device.desktop || (n.selectSprite.visible = !1), n.animBg = []; var s; return (s = n.game.add.ph2AnimationObject(0, 0, "bg_decor", "atlas_ui_main_menu_new")).ph2Animations.play("bg_decor_anim", 1, !0), s.x = n.game.width / 2, s.y = n.game.height / 2, n.animBg.push(s), (s = n.game.add.ph2AnimationObject(0, 0, "bg_decor2", "atlas_ui_main_menu_new")).ph2Animations.play("bg_decor2_anim", 1, !0), s.x = n.game.width / 2, s.y = n.game.height / 2, n.animBg.push(s), n.ui.addChild(n.selectSprite), n.ui.bringToTop(n.btnPlay), n.ui.bringToTop(n.btnAudio), n.add(n.animBg[0]), n.add(n.animBg[1]), n.add(n.ui), t.Instances.controlButtonUI.initControl("uiMainMenu"), t.Instances.controlButtonUI.onChangeButton.add(n.setSelectButton, n), t.Instances.controlButtonUI.addControl(n.game), n.setSelectButton(), n.addAnimation(), n.addTouchCallback(), n.addKeysControl(), n.enableAllInput(), n.setButtonAudio(t.Instances.dataManager.getAudio()), n.checkFixIOS(), n } return __extends(i, e), i.prototype.checkFixIOS = function() { if (t.Constants.IOS_BUTTON_PATCH) { var e = void 0;
                (e = Ph2.UISystem.findObject("sound", this.ui)).y += 30, e.alignment.setLandscapeAlignment("TOP_RIGHT", -10.1, !0, -36, !0) } }, i.prototype.addAnimation = function() { var t = Ph2.UISystem.findObject("character", this.ui);
            this.animCharacter = this.game.add.spine(0, 0, "ben"), this.animCharacter.setAnimationByName(0, "stand", !0), t.addChild(this.animCharacter); var e = Ph2.UISystem.findObject("play", this.ui);
            this.animButton = this.game.add.ph2AnimationObject(0, 0, "play_main2", "ui_main_menu_2"), this.animButton.ph2Animations.play("play_anim2", 1, !0), e.addChild(this.animButton), this.buttonSprite = Ph2.AnimationSystem.findObject("base", this.animButton), this.buttonSprite.inputEnabled = !0 }, i.prototype.addKeysControl = function() { this.keyStart = this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER) }, i.prototype.setSelectButton = function() { switch (this.selectSprite.visible = !0, t.Instances.controlButtonUI.actualButton) {
                case "buttonPlay":
                    this.selectSprite.x = this.btnPlay.x, this.selectSprite.y = this.btnPlay.y, this.selectSprite.scale.set(.7, .7); break;
                case "buttonAudio":
                    this.selectSprite.x = this.btnAudio.x, this.selectSprite.y = this.btnAudio.y, this.selectSprite.scale.set(1, 1); break;
                case "none":
                    this.selectSprite.visible = !1 } this.selectSprite.frameName = t.Instances.controlButtonUI.getHightLight() }, i.prototype.onSelectButton = function() { switch (t.Instances.controlButtonUI.actualButton) {
                case "buttonPlay":
                    this.pressPlayBtn(); break;
                case "buttonAudio":
                    this.switchAudio(); break;
                case "none":
                    this.pressPlayBtn() } }, i.prototype.addTouchCallback = function() { this.buttonSprite.events.onInputDown.add(this.pressPlayBtn, this), t.Util.addTouchCallbackToButton("sound", this.ui, this.switchAudio, this) }, i.prototype.pressHome = function() { t.Instances.transitionAnim.playIn(), t.Instances.transitionAnim.onCompletedIn.addOnce(this.pressGoHome, this) }, i.prototype.pressGoHome = function() { this.game.state.start("mainmenu", !0, !1, !0) }, i.prototype.setButtonAudio = function(e) {!0 === e ? (t.Audios.enableAudio(this.game), this.btnAudio.setFrames("sound1.png", "sound1.png", "sound1_press.png", "sound1.png")) : (t.Audios.disableAudio(this.game), this.btnAudio.setFrames("sound2.png", "sound2.png", "sound2_press.png", "sound2.png")) }, i.prototype.switchAudio = function() { t.Audios.playSfx(this.game, "generic_button"); var e = this.controller.switchAudio();
            this.setButtonAudio(e) }, i.prototype.enableAllInput = function() { t.Util.enableTouch("sound", this.ui), this.keyStart.onDown.add(this.onSelectButton, this) }, i.prototype.disableAllInput = function() { t.Util.disableTouch("sound", this.ui), this.buttonSprite.inputEnabled = !1, this.keyStart.onDown.remove(this.onSelectButton, this) }, i.prototype.pressPlayBtn = function() { this.disableAllInput(), t.Audios.playSfx(this.game, "play_button"), this.animButton.ph2Animations.play("play_anim2_press", 1, !1).onComplete.addOnce(this.onEndPlayBtnAnim, this) }, i.prototype.onEndPlayBtnAnim = function() { this.controller.pressPlay() }, i.prototype.onBlur = function() { this.animCharacter.state.timeScale = 0, this.animButton.ph2Animations.pause(); for (var t = 0, e = this.animBg; t < e.length; t++) e[t].ph2Animations.pause() }, i.prototype.onFocus = function() { this.animCharacter.state.timeScale = 1, this.animButton.ph2Animations.resume(); for (var t = 0, e = this.animBg; t < e.length; t++) e[t].ph2Animations.resume() }, i.prototype.resize = function() { for (var t = 0, e = this.animBg; t < e.length; t++) { var i = e[t];
                i.x = this.game.width / 2, i.y = this.game.height / 2 } }, i.prototype.destroy = function() { this.animCharacter.state.timeScale = 0, t.Instances.controlButtonUI.removeControl(this.game), t.Instances.controlButtonUI.onChangeButton.remove(this.setSelectButton, this), this.keyStart.onDown.remove(this.onSelectButton, this); for (var i = 0, n = this.animBg; i < n.length; i++) { var s = n[i];
                s.ph2Animations.stop(), s.destroy() } this.animBg = [], this.animCharacter.destroy(), this.animCharacter = null, e.prototype.destroy.call(this) }, i }(Phaser.Group);
    t.UIMainMenu = e }(Game || (Game = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    Game;
! function(t) { var e = function(e) {
        function i() { var n = this,
                s = t.Constants.RENDER_DEBUG ? Phaser.CANVAS : i.getRender(); return (n = e.call(this, { enableDebug: !0, width: t.Constants.GAME_WIDTH, height: t.Constants.GAME_HEIGHT, renderer: s, parent: "content", transparent: !1, antialias: !0, preserveDrawingBuffer: !1, physicsConfig: null, seed: "", state: null, forceSetTimeOut: !1 }) || this).state.add("boot", t.BootState, !1), n.state.add("mainmenu", t.MainMenuState, !1), n.state.add("gameSelect", t.GameSelectState, !1), n.state.add("preloader", t.PreloaderState, !1), n.state.add("commandsgameplay", GameCommands.GameplayState, !1), n.state.add("commandsmainmenu", GameCommands.MainMenuState, !1), n.state.add("commandslevelselect", GameCommands.LevelSelectState, !1), n.state.add("commandspreloader", GameCommands.PreloaderState, !1), n.state.add("debuggingseparatebug", DebuggingGame.SeparateBugState, !1), n.state.add("debuggingfixbug", DebuggingGame.FixBugState, !1), n.state.add("debuggingcombat", DebuggingGame.CombatState, !1), n.state.add("debuggingboss", DebuggingGame.BossState, !1), n.state.add("debuggingmainmenu", DebuggingGame.MainMenuState, !1), n.state.add("debugginglevelselect", DebuggingGame.LevelSelectState, !1), n.state.add("debuggingpreloader", DebuggingGame.PreloaderState, !1), n.state.add("glitchgameplay", GameGlitch.GameplayState, !1), n.state.add("glitchmainmenu", GameGlitch.MainMenuState, !1), n.state.add("glitchlevelselect", GameGlitch.LevelSelectState, !1), n.state.add("glitchpreloader", GameGlitch.PreloaderState, !1), n.state.add("statemachinecomicState", GameStateMachine.ComicState, !1), n.state.add("statemachinegameplayState", GameStateMachine.GameplayState, !1), n.state.add("statemachinemainMenuState", GameStateMachine.MainMenuState, !1), n.state.add("statemachinelevelSelectState", GameStateMachine.LevelSelectState, !1), n.state.add("statemachinepreloaderState", GameStateMachine.PreloaderState, !1), Phaser.Device.whenReady(function() { n.stage.disableVisibilityChange = !1; var t = n.device.desktop ? "click" : "touchstart";
                document.getElementById("content").addEventListener(t, function(t) { n.gameResumed(t) }), n.plugins.add(Ph2.LoaderPlugin), n.plugins.add(Ph2.AnimationPlugin), n.plugins.add(Ph2.NotificationPlugin), n.plugins.add(Ph2.ComponentPlugin), n.plugins.add(Ph2.AudioPlugin), n.plugins.add(PhaserSuperStorage.StoragePlugin), n.plugins.add(PhaserCachebuster.CacheBuster), n.plugins.add(PhaserSpine.SpinePlugin) }), n } return __extends(i, e), i.getRender = function() { var t = navigator.userAgent; return /Kindle/.test(t) || /\bKF[A-Z][A-Z]+/.test(t) || /Silk.*Mobile Safari/.test(t) ? Phaser.CANVAS : Phaser.AUTO }, i.getInstance = function() { return null === i.instance && (i.instance = new i), i.instance }, i.prototype.start = function() { this.state.start("boot") }, i.instance = null, i }(Phaser.Game);
    t.App = e }(Game || (Game = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameCommands;
! function(t) { var e = function(e) {
        function i() { return e.call(this) || this } return __extends(i, e), i.prototype.init = function(e) { this.game.world.removeAll(), this.level = e, this.tutorialID = t.ConfigGame.levelTutorial.indexOf(e + 1), this.updateTime = !1, this.isTutorial = !1, this.isPaused = !1, this.pauseFocus = !1, this.pauseOrientation = !1, this.isCompleted = !1, Game.Instances.onIncorrectOrientation.add(this.incorrectOrientation, this), Game.Instances.onCorrectOrientation.add(this.onCorrectOrientation, this), t.Audios.playMusic(this.game, !1, e), this.game.onBlur.add(this.onBlur, this), this.game.onFocus.add(this.onFocus, this), t.Instances.controlButtonUI.addControl(this.game) }, i.prototype.create = function() { e.prototype.create.call(this), this.introAnim = null, this.endAnim = null, this.mainGroup = this.game.add.group(), this.overlayGroup = this.game.add.group(), this.frontGroup = this.game.add.group(), this.backGroup = this.game.add.group(), this.particleGroup = this.game.add.group(), this.bg = new Phaser.TileSprite(this.game, 0, 0, this.game.width, this.game.height, "bg_gameplay"), this.floor = new Phaser.TileSprite(this.game, 0, this.game.height - 193, this.game.width, 193, "bg_floor"), this.obstacleIndex = 0, this.fadeWhite = this.game.add.graphics(0, 0), this.fadeWhite.beginFill(16777215, 1), this.fadeWhite.drawRect(0, 0, this.game.width, this.game.height), this.fadeWhite.endFill(), this.fadeWhite.visible = !1, this.fadeWhite.alpha = 0, this.checkPoint = new Phaser.Point(0, 0), this.checkPoint.set(4900, this.game.world.height - 70); var i = t.ConfigGame.levels[this.level].player;
            this.simulateCamera = new t.SimulateCamera(this.game, this.frontGroup, this.backGroup, this.particleGroup, t.ConfigGame.levels[this.level].deceleration), this.player = new t.Player(-400, this.game.world.height - 70, this.game, i), this.createObstacle(), this.uiGameplay = new t.UIGameplay(this, this.obstacles.length), this.uiGameplay.fixedToCamera = !0, this.uiPause = new t.UIPause(this), this.uiConfirmation = new t.UIConfirmation(this), this.uiTutorial = new t.UITutorial(this), this.uiLevelCompleted = new t.UILevelCompleted(this, this.level + 1), this.componentMgr = Ph2.ComponentPlugin.initComponents(this), this.componentAnimManager = this.componentMgr.addComponent(new t.AnimSceneManager(this.game)), this.componentOverlay = this.componentMgr.addComponent(new t.Overlay(this.game, .7)), this.componentTimeOut = this.componentMgr.addComponent(new t.ComponentTimer(this.game, t.ConfigGame.levels[this.level].timeLimit, !1)), this.componentCollisionDistance = this.componentMgr.addComponent(new t.DistanceCollisionChecker), this.componentTimeOut.stopTimer(), this.componentTimeOut.onEndTime.add(this.timeOut, this), this.obstacleGroupBack = new Phaser.Group(this.game), this.obstacleGroupFront = new Phaser.Group(this.game), this.obstacleGroupBack.addMultiple(this.obstacles); for (var n = 0, s = this.obstacles; n < s.length; n++) { var o = s[n];
                o.isFront ? this.obstacleGroupFront.add(o) : this.obstacleGroupBack.add(o) } this.mainGroup.add(this.bg), this.mainGroup.add(this.floor), this.mainGroup.add(this.backGroup), this.mainGroup.add(this.obstacleGroupBack), this.mainGroup.add(this.player), this.mainGroup.add(this.obstacleGroupFront), this.mainGroup.add(this.particleGroup), this.mainGroup.add(this.frontGroup), this.mainGroup.add(this.uiGameplay), this.mainGroup.add(this.fadeWhite), this.overlayGroup.add(this.componentOverlay.overlaySprite), this.overlayGroup.add(this.uiPause), this.overlayGroup.add(this.uiConfirmation), this.overlayGroup.add(this.uiLevelCompleted), this.overlayGroup.fixedToCamera = !0, this.overlayGroup.add(this.uiTutorial), -1 !== this.tutorialID && this.uiTutorial.setTutorialID(this.tutorialID), t.Instances.transitionAnim.playOut(), this.simulateCamera.start(), this.simulateCamera.addTile(this.bg), this.simulateCamera.addTile(this.floor), this.simulateCamera.addPlayer(this.player), this.componentAnimManager.onEndAnimation.add(this.onEndAnimScene, this), this.componentCollisionDistance.addCollision(this.player, this.actObstacle, this.actObstacle.distanceCommand), this.componentCollisionDistance.onCollide.removeAll(this), this.componentCollisionDistance.onCollide.addOnce(this.startShowCommands, this), t.Instances.transitionAnim.onCompletedOut.addOnce(this.introAnimStep1, this) }, i.prototype.introAnimStep1 = function() { this.introAnim = this.game.add.tween(this.simulateCamera).to({ playerFixX: 0 }, 100, "Linear", !0, 400), this.introAnim.onComplete.addOnce(this.introAnimStep2, this) }, i.prototype.introAnimStep2 = function() { t.Audios.playSfx(this.game, "level_start1"), this.introAnim = this.game.add.tween(this.simulateCamera).to({ playerFixX: 500 }, 900, "Linear", !0), this.introAnim.onComplete.addOnce(this.introAnimStep3, this) }, i.prototype.introAnimStep3 = function() { this.introAnim = this.game.add.tween(this.simulateCamera).to({ playerFixX: 300 }, 400, "Linear", !0), this.introAnim.onComplete.addOnce(this.introAnimStep4, this) }, i.prototype.introAnimStep4 = function() { this.simulateCamera.resetMoveX(), this.introAnim = this.game.add.tween(this.simulateCamera).to({ playerFixX: 100 }, 400, "Linear", !0) }, i.prototype.createObstacle = function() { var e, i = t.ConfigGame.levels[this.level].obstacles;
            this.obstacles = []; for (var n = 0, s = i; n < s.length; n++) { var o = s[n];
                e = new t.Obstacle(this.game, o.name, o.position.x + 5e3, o.position.y, o.commands), this.obstacles.push(e), this.simulateCamera.addObstacle(e) } this.actObstacle = this.obstacles[0] }, i.prototype.startShowCommands = function() { console.log("startShowCommands"), t.Audios.playSfx(this.game, "time_to_choose"), this.simulateCamera.setOffsetObjective(300), this.componentTimeOut.resetTimer(), this.componentTimeOut.startTimer(), this.uiGameplay.setTime(this.componentTimeOut.time, t.ConfigGame.levels[this.level].timeLimit), this.updateTime = !0, this.componentCollisionDistance.removeCollisionObject(); var e = this.actObstacle.commandsToShow;
            this.uiGameplay.showCommands(e), this.simulateCamera.setSpeedScale(1), this.uiGameplay.startTimerSong(), this.simulateCamera.changeEasingScale(t.ConfigGame.levels[this.level].minPercentScale);
            this.actObstacle.distanceCommand, this.actObstacle.distanceAnim;
            0 === this.obstacleIndex && -1 !== this.tutorialID ? (this.uiTutorial.showMessage(), this.uiGameplay.disableAllInput(), this.isTutorial = !0, 0 === this.tutorialID && this.uiGameplay.disablecommandContainerInput(1), this.componentCollisionDistance.addCollision(this.player, this.actObstacle, 1.5 * this.actObstacle.distanceAnim), this.componentCollisionDistance.onCollide.removeAll(this), this.componentCollisionDistance.onCollide.addOnce(this.stopMoveTutorial, this)) : (this.componentCollisionDistance.addCollision(this.player, this.actObstacle, this.actObstacle.distanceAnim), this.componentCollisionDistance.onCollide.removeAll(this), this.componentCollisionDistance.onCollide.addOnce(this.stopMove, this)) }, i.prototype.stopMoveTutorial = function() { this.uiGameplay.stopTimerSong(), this.componentTimeOut.stopTimer(), this.updateTime = !1, this.simulateCamera.setSpeedScale(0), this.player.runPlayer(.1) }, i.prototype.stopMove = function() { this.simulateCamera.setSpeedScale(0), this.player.runPlayer(1) }, i.prototype.selectCommand = function(e, i) { console.log("selectCommand"), this.uiGameplay.stopTimerSong(), 0 === this.obstacleIndex && -1 !== this.tutorialID && (this.uiTutorial.hideMessage(), this.isTutorial = !1, this.uiGameplay.enableAllInput()), this.simulateCamera.changeEasingScale(1), this.selectCommandIndex = i, this.updateTime = !1, this.componentTimeOut.stopTimer(), this.isGoodSelection = this.actObstacle.isCommandsSelectuseful(this.selectCommandIndex), this.isGoodSelection ? (t.Audios.playSfx(this.game, "correct_option"), this.uiGameplay.playAnimGoodCommand(i)) : (t.Audios.playSfx(this.game, "wrong_option"), this.uiGameplay.playAnimBadCommand(i)), this.componentCollisionDistance.onCollide.removeAll(this), this.componentCollisionDistance.addCollision(this.player, this.actObstacle, this.actObstacle.distanceAnim), this.componentCollisionDistance.onCollide.addOnce(this.startCommandAnim, this) }, i.prototype.startCommandAnim = function() { console.log("startCommandAnim"); var e = this.obstacles.indexOf(this.actObstacle),
                i = t.ConfigGame.levels[this.level].obstacles[e].anims[this.selectCommandIndex];
            this.isGoodSelection || (this.simulateCamera.setSpeedScale(0), this.simulateCamera.hideParticle()), this.componentAnimManager.startAnim(i, this.player, this.actObstacle, this.actObstacle.extraSprite, this.player.bullet[0], this.player.bullet[1], this.player.bullet[2]) }, i.prototype.initStopWordlDistance = function(t, e, i) { void 0 === e && (e = null), void 0 === i && (i = null), this.functionDistanceStop = e, this.contextDistanceStop = i, 0 === t ? this.endStopWordlDistance() : (this.componentCollisionDistance.addCollision(this.player, this.actObstacle, t), this.componentCollisionDistance.onCollide.removeAll(this), this.componentCollisionDistance.onCollide.addOnce(this.endStopWordlDistance, this)) }, i.prototype.endStopWordlDistance = function() { this.simulateCamera.setSpeedScale(0), this.simulateCamera.stop(), this.player.setScaleAnim(1), this.functionDistanceStop.call(this.contextDistanceStop) }, i.prototype.initStartWordlDistance = function() { this.simulateCamera.changeEasingScale(1), this.simulateCamera.start() }, i.prototype.setVelocityMoveScale = function(t) { this.simulateCamera.changeOiriginVelocityScale(t) }, i.prototype.timeOut = function() { this.uiGameplay.stopTimerSong(), this.simulateCamera.needUpdateScale = !1, console.log("timeOut"), this.componentCollisionDistance.onCollide.removeAll(this), this.simulateCamera.changeEasingScale(1), this.uiGameplay.hideCommands(!0), this.simulateCamera.hideParticle(), t.Audios.playSfx(this.game, "no_answer"), this.componentAnimManager.startAnim("timeOut", this.player, this.actObstacle) }, i.prototype.onEndAnimScene = function(t) { switch (console.log("onEndAnimScene"), this.setVelocityMoveScale(1), t) {
                case "fadeInWhite":
                    this.simulateCamera.showParticle(), this.simulateCamera.needUpdateScale = !0, this.player.x = 100, this.simulateCamera.setPosition(), this.simulateCamera.start(), this.simulateCamera.setSpeedScale(1), this.player.runPlayer(1), this.componentCollisionDistance.addCollision(this.player, this.actObstacle, this.actObstacle.distanceCommand), this.componentCollisionDistance.onCollide.removeAll(this), this.componentCollisionDistance.onCollide.addOnce(this.startShowCommands, this), this.componentAnimManager.startAnim("fadeOutWhite", this.fadeWhite); for (var e = 0; e < this.obstacleIndex; e++) this.obstacles[e].visible = !1; break;
                case "fadeOutWhite":
                    this.actObstacle = this.obstacles[this.obstacleIndex], this.fadeWhite.visible = !1; break;
                case "win":
                    this.isCompleted = !0, this.endAnimStep1(); break;
                case "timeOut":
                    this.fadeWhite.alpha = 0, this.restarLevelLose(), this.fadeWhite.visible = !0; break;
                default:
                    this.isGoodSelection ? (this.simulateCamera.setOffsetObjective(0), this.checkPoint.set(this.player.x, this.player.y), this.obstacleIndex++, this.uiGameplay.setObstacle(this.obstacleIndex), this.obstacleIndex === this.obstacles.length ? this.winGame() : (this.actObstacle = this.obstacles[this.obstacleIndex], this.componentCollisionDistance.addCollision(this.player, this.actObstacle, this.actObstacle.distanceCommand), this.componentCollisionDistance.onCollide.removeAll(this), this.componentCollisionDistance.onCollide.addOnce(this.startShowCommands, this), this.player.startMovePlayer(), this.simulateCamera.resetMoveX())) : (this.fadeWhite.alpha = 0, this.restarLevelLose(), this.fadeWhite.visible = !0) } }, i.prototype.restarLevelLose = function() { this.restartLevel() }, i.prototype.winGame = function() { this.simulateCamera.setOffsetObjective(this.game.width / 2 - 80), this.simulateCamera.onEndMoveOffset.addOnce(this.onCompletedCenterWin, this), t.Instances.dataManager.completedLevel(this.level) }, i.prototype.onCompletedCenterWin = function() { this.uiGameplay.playCompletedAnim(), this.componentAnimManager.startAnim("win", this.player) }, i.prototype.openLevelCompleted = function() { this.simulateCamera.xVelocity = 0, this.player.stopMovePlayer(), this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiLevelCompleted), this.componentOverlay.revive(), this.componentOverlay.fadeIn(500), this.uiLevelCompleted.show() }, i.prototype.endAnimStep1 = function() { this.endAnim = this.game.add.tween(this.simulateCamera).to({ playerFixX: this.game.world.width + 600 }, 1200, "Linear", !0, 400), this.endAnim.onComplete.addOnce(this.endAnimStep2, this) }, i.prototype.endAnimStep2 = function() { this.simulateCamera.xVelocity = 0, this.player.stopMovePlayer(), this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiLevelCompleted), this.componentOverlay.revive(), this.componentOverlay.fadeIn(500), this.uiLevelCompleted.show() }, i.prototype.openTutorial = function() { this.startShowCommands(), this.componentTimeOut.pauseTimer(), this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiTutorial), this.componentOverlay.revive(), this.componentOverlay.fadeIn(500), this.uiTutorial.show() }, i.prototype.closeTutorial = function() { this.componentTimeOut.pauseTimer(), this.componentOverlay.fadeOut(500, .7, this.onEndCloseTutorial, this) }, i.prototype.onEndCloseTutorial = function() { this.componentOverlay.kill(), this.componentTimeOut.resumeTimer() }, i.prototype.pressPause = function() { if (!this.isCompleted) { for (var t = 0, e = this.obstacles; t < e.length; t++) e[t].pause();
                this.introAnim && this.introAnim.pause(), this.uiGameplay.visible = !1, this.simulateCamera.pauseParticle(), this.simulateCamera.stop(), this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiPause), this.uiGameplay.disableAllInput(), this.componentTimeOut.isRunning && this.uiGameplay.disableCommandsContainerInput(), this.isPaused = !0, this.componentTimeOut.pauseTimer(), this.updateTime = !1, this.componentAnimManager.pause = !0, this.player.pause(), this.componentOverlay.revive(), this.componentOverlay.fadeIn(500), this.uiPause.show(), this.uiGameplay.pause() } }, i.prototype.pressResume = function() { this.uiGameplay.visible = !0, this.componentOverlay.fadeOut(500, .7, this.onEndOverlayPauseFadeOut, this) }, i.prototype.onEndOverlayPauseFadeOut = function() { for (var t = 0, e = this.obstacles; t < e.length; t++) e[t].resume();
            this.introAnim && this.introAnim.resume(), this.simulateCamera.resumeParticle(), this.simulateCamera.start(), this.isPaused = !1, this.componentOverlay.kill(), this.componentTimeOut.resumeTimer(), this.uiGameplay.enableAllInput(), this.componentTimeOut.isRunning && (this.updateTime = !0, this.uiGameplay.enablecommandContainerInput()), this.componentAnimManager.pause = !1, this.player.resume(), this.uiGameplay.resume() }, i.prototype.switchAudio = function() { var e = t.Instances.dataManager.getAudio(); return t.Instances.dataManager.setAudio(!e), !e }, i.prototype.pressRestart = function() { this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiConfirmation), this.uiConfirmation.show(t.CONFIRMATIONTYPE.RESTART) }, i.prototype.pressHowToPlay = function() { this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiTutorial), this.uiTutorial.show() }, i.prototype.closeConfirmation = function() { this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiPause), this.uiPause.enableAllInput() }, i.prototype.closeHowToPlay = function() { this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiPause), this.uiPause.enableAllInput() }, i.prototype.pressExit = function() { this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiConfirmation), this.uiConfirmation.show(t.CONFIRMATIONTYPE.EXIT) }, i.prototype.goToLevelSelect = function() { t.Instances.transitionAnim.playIn(), t.Instances.transitionAnim.onCompletedIn.addOnce(this.transitionLevelSelect, this) }, i.prototype.transitionLevelSelect = function() { this.game.state.start("commandslevelselect") }, i.prototype.restartLevel = function() { t.Instances.transitionAnim.playIn(), t.Instances.transitionAnim.onCompletedIn.addOnce(this.transitionLevel, this) }, i.prototype.transitionLevel = function() { this.game.state.start("commandsgameplay", !0, !1, this.level) }, i.prototype.incorrectOrientation = function() { if (this.pauseOrientation = !0, t.Audios.onBlur(this.game), this.uiTutorial.pause(), this.isTutorial) { for (var e = 0, i = this.obstacles; e < i.length; e++) i[e].pause(); return this.uiGameplay.pause(), this.player.pause(), this.simulateCamera.pauseParticle(), this.simulateCamera.stop(), void this.componentTimeOut.pauseTimer() } if (!this.isPaused) return this.isCompleted ? (this.endAnim.pause(), this.uiGameplay.pause(), this.simulateCamera.pauseParticle(), this.simulateCamera.stop(), this.uiLevelCompleted.pause(), void this.player.pause()) : void this.pressPause() }, i.prototype.onCorrectOrientation = function() { this.pauseOrientation = !1, this.checkResume() }, i.prototype.onBlur = function() { if (this.pauseFocus = !0, t.Audios.onBlur(this.game), this.uiTutorial.pause(), this.isTutorial) { for (var e = 0, i = this.obstacles; e < i.length; e++) i[e].pause(); return this.uiGameplay.pause(), this.player.pause(), this.simulateCamera.pauseParticle(), this.simulateCamera.stop(), void this.componentTimeOut.pauseTimer() } if (!this.isPaused) return this.isCompleted ? (this.endAnim.pause(), this.uiGameplay.pause(), this.simulateCamera.pauseParticle(), this.simulateCamera.stop(), this.uiLevelCompleted.pause(), void this.player.pause()) : void this.pressPause() }, i.prototype.onFocus = function() { this.pauseFocus = !1, this.checkResume() }, i.prototype.checkResume = function() { if (!this.pauseFocus && !this.pauseOrientation) { if (t.Audios.onFocus(this.game), this.uiTutorial.resume(), this.isTutorial) { for (var e = 0, i = this.obstacles; e < i.length; e++) i[e].resume(); return this.uiGameplay.resume(), this.player.resume(), this.simulateCamera.resumeParticle(), this.simulateCamera.start(), void this.componentTimeOut.resumeTimer() } return this.isCompleted ? (this.simulateCamera.resumeParticle(), this.simulateCamera.start(), this.player.resume(), this.endAnim.resume(), this.uiGameplay.resume(), void this.uiLevelCompleted.resume()) : void 0 } }, i.prototype.update = function() { this.updateTime && this.uiGameplay.setTime(this.componentTimeOut.time, t.ConfigGame.levels[this.level].timeLimit), this.simulateCamera.update() }, i.prototype.shutdown = function() { this.game.onFocus.remove(this.onFocus, this), this.game.onBlur.remove(this.onBlur, this), Game.Instances.onIncorrectOrientation.remove(this.incorrectOrientation, this), Game.Instances.onCorrectOrientation.remove(this.onCorrectOrientation, this), this.componentMgr.removeComponent("AnimSceneManager"), this.componentMgr.removeComponent("SimpleCollisionChecker"), this.player.destroy(), this.actObstacle.destroy(), this.bg.destroy(), this.floor.destroy(), this.mainGroup.destroy(), this.bg = null, this.floor = null, this.player = null, this.actObstacle = null, this.mainGroup = null, e.prototype.shutdown.call(this) }, i.prototype.render = function() { if (t.Constants.RENDER_DEBUG)
                for (var e = 0, i = this.obstacles; e < i.length; e++) i[e].render() }, i.prototype.resize = function() { this.uiTutorial.resize(), this.bg.width = this.game.width, this.bg.height = this.game.height, this.floor.width = this.game.width, this.floor.height = this.game.height, this.fadeWhite.clear(), this.fadeWhite.beginFill(16777215, 1), this.fadeWhite.drawRect(0, 0, this.game.width, this.game.height), this.fadeWhite.endFill(), this.uiGameplay.resize() }, i }(Phaser.State);
    t.GameplayState = e }(GameCommands || (GameCommands = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameCommands;
! function(t) { var e = function(e) {
        function i() { return e.call(this) || this } return __extends(i, e), i.prototype.init = function() { this.game.world.removeAll(), t.Audios.playMusic(this.game, !0), this.pauseFocus = !1, this.pauseOrientation = !1, Game.Instances.onIncorrectOrientation.add(this.onIncorrecOrientation, this), Game.Instances.onCorrectOrientation.add(this.onCorrectOrientation, this), this.game.onBlur.add(this.onBlur, this), this.game.onFocus.add(this.onFocus, this) }, i.prototype.create = function() { e.prototype.create.call(this), this.mainGroup = this.game.add.group(), this.componentMgr = Ph2.ComponentPlugin.initComponents(this), this.componentOverlay = this.componentMgr.addComponent(new t.Overlay(this.game, .7)), this.bg = new Phaser.Sprite(this.game, 0, 0, "select_bg"), this.bg.width = this.game.width, this.bg.height = this.game.height, this.bgComic = new Phaser.Sprite(this.game, 0, 0, "bg_comic"), this.bgComic.width = this.game.width, this.bgComic.height = this.game.height, this.bgComic.visible = !1, this.isComic = !1, this.uiLevelSelect = new t.UILevelSelect(this), this.uiComic = new t.UIComic(this, t.COMICID.end), this.checNeedShowComicEnd(), this.mainGroup.add(this.bg), this.mainGroup.add(this.bgComic), this.mainGroup.add(this.uiLevelSelect), this.mainGroup.add(this.componentOverlay.overlaySprite), t.Instances.transitionAnim.playOut(), t.Instances.transitionAnim.onCompletedOut.addOnce(this.initUi, this), this.resize() }, i.prototype.checNeedShowComicEnd = function() { var e = t.Instances.dataManager.getSeeComicEnd(),
                i = t.Instances.dataManager.getLevelCompelteded();!1 === e && i + 1 === t.ConfigGame.levelCount ? (this.uiComic.visible = !0, this.uiLevelSelect.visible = !1, this.bgComic.visible = !0, this.bg.visible = !1, this.isComic = !0) : (this.uiLevelSelect.init(), this.isComic = !1, this.uiComic.visible = !1, this.uiLevelSelect.visible = !0) }, i.prototype.initUi = function() { this.isComic ? this.uiComic.showComic() : this.uiLevelSelect.initAnimation() }, i.prototype.switchAudio = function() { var e = t.Instances.dataManager.getAudio(); return t.Instances.dataManager.setAudio(!e), !e }, i.prototype.endShowComic = function() { t.Instances.dataManager.seeComicEnd(), this.pressHome() }, i.prototype.goToLevelSelect = function() { t.Instances.transitionAnim.playOut(), t.Instances.transitionAnim.onCompletedOut.addOnce(this.initUi, this), this.uiComic.visible = !1, this.bg.visible = !0, this.bgComic.visible = !1, this.uiLevelSelect.visible = !0, this.isComic = !1, this.uiComic.destroy(), this.uiLevelSelect.init() }, i.prototype.pressHome = function() { t.Instances.transitionAnim.playIn(), t.Instances.transitionAnim.onCompletedIn.addOnce(this.transitionMainMenu, this) }, i.prototype.transitionMainMenu = function() { this.game.state.start("gameSelect", !0, !1) }, i.prototype.selectLevel = function(e) { t.Instances.transitionAnim.playIn(), t.Instances.transitionAnim.onCompletedIn.addOnce(this.transitionLevel, this, 0, e) }, i.prototype.transitionLevel = function(t) { this.game.state.start("commandsgameplay", !0, !1, t) }, i.prototype.onBlur = function() { this.pauseFocus = !0, this.isComic ? this.uiComic.onBlur() : this.uiLevelSelect.onBlur(), t.Audios.onBlur(this.game) }, i.prototype.onIncorrecOrientation = function() { this.pauseOrientation = !0, this.isComic ? this.uiComic.onBlur() : this.uiLevelSelect.onBlur(), t.Audios.onBlur(this.game) }, i.prototype.onFocus = function() { this.pauseFocus = !1, this.checkResume() }, i.prototype.onCorrectOrientation = function() { this.pauseOrientation = !1, this.checkResume() }, i.prototype.checkResume = function() { this.pauseFocus || this.pauseOrientation || (this.isComic ? this.uiComic.onFocus() : this.uiLevelSelect.onFocus(), t.Audios.onFocus(this.game)) }, i.prototype.shutdown = function() { Game.Instances.onIncorrectOrientation.remove(this.onIncorrecOrientation, this), Game.Instances.onCorrectOrientation.remove(this.onCorrectOrientation, this), this.game.onBlur.remove(this.onBlur, this), this.game.onFocus.remove(this.onFocus, this) }, i.prototype.resize = function() { this.isComic && this.uiComic.resize(), this.bg.width = this.game.width, this.bg.height = this.game.height, this.bgComic.width = this.game.width, this.bgComic.height = this.game.height }, i }(Phaser.State);
    t.LevelSelectState = e }(GameCommands || (GameCommands = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameCommands;
! function(t) { var e = function(e) {
        function i() { return e.call(this) || this } return __extends(i, e), i.prototype.init = function() { this.game.world.removeAll() }, i.prototype.create = function() { if (e.prototype.create.call(this), t.Audios.playMusic(this.game, !0), this.mainGroup = this.game.add.group(), this.bgComic = new Phaser.Sprite(this.game, 0, 0, "bg_comic"), this.bgComic.width = this.game.width, this.bgComic.height = this.game.height, this.bgComic.visible = !1, this.isComic = !1, this.pauseFocus = !1, this.pauseOrientation = !1, Game.Instances.onIncorrectOrientation.add(this.onIncorrecOrientation, this), Game.Instances.onCorrectOrientation.add(this.onCorrectOrientation, this), this.game.onBlur.add(this.onBlur, this), this.game.onFocus.add(this.onFocus, this), this.uiComic = new t.UIComic(this, t.COMICID.intro), this.uiComic.visible = !1, this.mainGroup.add(this.bgComic), this.mainGroup.add(this.uiComic), this.resize(), this.onEndTransitionAnim(), t.Instances.transitionAnim.playOut(), !0 === t.Constants.KEY_DEBUG) { var i = this.game.input.keyboard.addKey(Phaser.Keyboard.ONE),
                    n = this.game.input.keyboard.addKey(Phaser.Keyboard.TWO),
                    s = this.game.input.keyboard.addKey(Phaser.Keyboard.THREE),
                    o = this.game.input.keyboard.addKey(Phaser.Keyboard.FOUR),
                    a = this.game.input.keyboard.addKey(Phaser.Keyboard.FIVE),
                    r = this.game.input.keyboard.addKey(Phaser.Keyboard.SIX),
                    h = this.game.input.keyboard.addKey(Phaser.Keyboard.SEVEN),
                    l = this.game.input.keyboard.addKey(Phaser.Keyboard.EIGHT),
                    c = this.game.input.keyboard.addKey(Phaser.Keyboard.NINE);
                i.onDown.add(function() { console.log("%c key 1", "background: #272; color: #bada55"), t.Instances.dataManager.initData() }, this), n.onDown.add(function() { console.log("%c key 2", "background: #272; color: #bada55"), t.Instances.dataManager.initData(), t.Instances.dataManager.completedLevel(0), t.Instances.dataManager.seeComicIntro() }, this), s.onDown.add(function() { console.log("%c key 3", "background: #272; color: #bada55"), t.Instances.dataManager.initData(), t.Instances.dataManager.completedLevel(7), t.Instances.dataManager.seeComicIntro() }, this), o.onDown.add(function() { console.log("%c key 4", "background: #272; color: #bada55"), t.Instances.dataManager.initData(), t.Instances.dataManager.completedLevel(8), t.Instances.dataManager.seeComicIntro() }, this), a.onDown.add(function() { console.log("%c key 5", "background: #272; color: #bada55"), t.Instances.dataManager.initData(), t.Instances.dataManager.completedLevel(8), t.Instances.dataManager.seeComicIntro(), t.Instances.dataManager.seeComicEnd() }, this), r.onDown.add(function() { console.log("%c key 6", "background: #272; color: #bada55"), t.Instances.dataManager.initData(), t.Instances.dataManager.completedLevel(1), t.Instances.dataManager.seeComicIntro() }, this), h.onDown.add(function() { console.log("%c key 7", "background: #272; color: #bada55"), t.Instances.dataManager.initData(), t.Instances.dataManager.completedLevel(2), t.Instances.dataManager.seeComicIntro() }, this), l.onDown.add(function() { console.log("%c key 8", "background: #272; color: #bada55"), t.Instances.dataManager.initData(), t.Instances.dataManager.completedLevel(3), t.Instances.dataManager.seeComicIntro() }, this), c.onDown.add(function() { console.log("%c key 9", "background: #272; color: #bada55"), t.Instances.dataManager.initData(), t.Instances.dataManager.completedLevel(4), t.Instances.dataManager.seeComicIntro() }, this), console.log("%c ***Keys***                               ", "background: #222; color: #bada55"), console.log("%c 1 = ResetData                            ", "background: #222; color: #bada55"), console.log("%c 2 = ResetData unlock level 1             ", "background: #222; color: #bada55"), console.log("%c 3 = ResetData unlock level 8             ", "background: #222; color: #bada55"), console.log("%c 4 = ResetData unlock level 9 no comic end", "background: #222; color: #bada55"), console.log("%c 5 = ResetData unlock level 9             ", "background: #222; color: #bada55"), console.log("%c 6 = ResetData unlock level 2             ", "background: #222; color: #bada55"), console.log("%c 7 = ResetData unlock level 3             ", "background: #222; color: #bada55"), console.log("%c 8 = ResetData unlock level 4             ", "background: #222; color: #bada55"), console.log("%c 9 = ResetData unlock level 5             ", "background: #222; color: #bada55") } }, i.prototype.pressPlay = function() { t.Instances.transitionAnim.playIn(), t.Instances.transitionAnim.onCompletedIn.addOnce(this.onEndTransitionAnim, this) }, i.prototype.onEndTransitionAnim = function() { t.Instances.dataManager.getSeeComicIntro() ? this.game.state.start("commandslevelselect") : (this.isComic = !0, this.uiComic.visible = !0, this.bgComic.visible = !0, t.Instances.transitionAnim.playOut(), t.Instances.transitionAnim.onCompletedOut.addOnce(this.showInitComic, this)) }, i.prototype.showInitComic = function() { this.uiComic.showComic() }, i.prototype.switchAudio = function() { var e = t.Instances.dataManager.getAudio(); return t.Instances.dataManager.setAudio(!e), !e }, i.prototype.endShowComic = function() { t.Instances.transitionAnim.playIn(), t.Instances.transitionAnim.onCompletedIn.addOnce(this.goToLevelSelect, this) }, i.prototype.goToLevelSelect = function() { t.Instances.dataManager.seeComicIntro(), this.game.state.start("commandslevelselect") }, i.prototype.onBlur = function() { this.pauseFocus = !0, this.isComic && this.uiComic.onBlur(), t.Audios.onBlur(this.game) }, i.prototype.onFocus = function() { this.pauseFocus = !1, this.checkResume() }, i.prototype.onIncorrecOrientation = function() { this.pauseOrientation = !0, this.isComic && this.uiComic.onBlur(), t.Audios.onBlur(this.game) }, i.prototype.onCorrectOrientation = function() { this.pauseOrientation = !1, this.checkResume() }, i.prototype.checkResume = function() { this.pauseFocus || this.pauseOrientation || (this.isComic && this.uiComic.onFocus(), t.Audios.onFocus(this.game)) }, i.prototype.shutdown = function() { this.game.onBlur.remove(this.onBlur, this), this.game.onFocus.remove(this.onFocus, this), Game.Instances.onIncorrectOrientation.remove(this.onIncorrecOrientation, this), Game.Instances.onCorrectOrientation.remove(this.onCorrectOrientation, this) }, i.prototype.resize = function() { this.isComic && this.uiComic.resize(), this.bgComic.width = this.game.width, this.bgComic.height = this.game.height }, i }(Phaser.State);
    t.MainMenuState = e }(GameCommands || (GameCommands = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameCommands;
! function(t) { var e = function(e) {
        function i() { return e.call(this) || this } return __extends(i, e), i.prototype.init = function() { this.game.width > this.game.height ? this.game.world.setBounds(0, 0, this.game.width, this.game.height) : this.game.world.setBounds(0, 0, this.game.height, this.game.width), this.game.load.onFileComplete.removeAll(); var t = this.game.cache.getJSON("resources_commands"),
                e = this.game.cache.spine; for (var i in e) e.hasOwnProperty(i) && "transition" !== i && "ben" !== i && (this.game.cache.checkJSONKey(i) && this.game.cache.removeJSON(i), this.game.cache.checkTextKey(i + "Atlas") && this.game.cache.removeText(i + "Atlas"), "2" === i[i.length - 1] ? this.game.cache.checkImageKey(i.slice(0, i.length - 1) + ".png") && this.game.cache.removeImage(i.slice(0, i.length - 1) + ".png", !0) : this.game.cache.checkImageKey(i + ".png") && this.game.cache.removeImage(i + ".png", !0), delete this.game.cache.spine[i]);
            this.game.ph2Loader.debug(!0), this.game.ph2Loader.setAssetsResources(t) }, i.prototype.preload = function() { this.game.stage.backgroundColor = 197379, this.game.ph2UIManager.enableVisibilityAndOrientationComponent = !1, this.group = new Phaser.Group(this.game), this.add.existing(this.group), this.resize(), t.Instances.initTransitionAnim(this.game), t.Instances.transitionAnim.updatePercent(0), t.Instances.transitionAnim.showLoading(), this.game.load.onFileComplete.add(t.Instances.transitionAnim.updatePercent, t.Instances.transitionAnim), t.Audios.loadAudioSprite(this.game, "audiosprite_commands"), this.game.ph2Loader.load("firstLoad"), this.game.ph2AnimationManager.cache.animationData = {}, this.game.load.onFileStart.add(this.onFileStart, this) }, i.prototype.onFileStart = function(t, e, i) { this.game.cache.checkJSONKey(e) && -1 !== i.indexOf(".json") && this.game.cache.removeJSON(e), this.game.cache.checkImageKey(e) && -1 !== i.indexOf(".png") && this.game.cache.removeImage(e) }, i.prototype.create = function() { this.setConfigData(), t.Instances.initLocalizationManager(this.game), t.Instances.initControlButtonUI(this.game), t.Instances.dataManager.getAudio() ? t.Audios.enableAudio(this.game) : t.Audios.disableAudio(this.game), this.onEndTransitionAnim() }, i.prototype.onEndTransitionAnim = function() { this.game.load.onFileComplete.remove(t.Instances.transitionAnim.updatePercent, t.Instances.transitionAnim), t.Instances.transitionAnim.hideLoading(), this.game.state.start("commandsmainmenu") }, i.prototype.setConfigData = function() { var e = this.game.cache.getJSON("commands"),
                i = this.game.cache.getJSON("obstacles"),
                n = this.game.cache.getJSON("levels"),
                s = this.game.cache.getJSON("anims");
            t.ConfigGame.obstacles = i, t.ConfigGame.commands = e.commands, t.ConfigGame.levels = n.levels, t.ConfigGame.anims = s.anims, t.ConfigGame.tweens = s.tweens; for (var o = 0, a = 0, r = e.commands; a < r.length; a++) { var h = r[a];
                t.COMMANDSID[o] = h.name, t.COMMANDSID[h.name] = o, o++ } }, i.prototype.shutdown = function() { e.prototype.shutdown.call(this), this.group.destroy() }, i }(Phaser.State);
    t.PreloaderState = e }(GameCommands || (GameCommands = {}));
var GameCommands;
! function(t) { var e = function() {
        function t(t) { this.data = { uiMainMenu: { init: "none", none: { up: "buttonPlay", down: "buttonPlay", left: "buttonPlay", right: "buttonPlay", key: "hl_mm.png" }, buttonPlay: { up: "buttonAudio", down: "buttonAudio", left: "buttonAudio", right: "buttonAudio", key: "hl_mm.png" }, buttonAudio: { up: "buttonPlay", down: "buttonPlay", left: "buttonPlay", right: "buttonPlay", key: "hl_mid.png" } }, uiLevelSelect: { init: "buttonBack", none: { up: "buttonlvl1", down: "buttonlvl1", left: "buttonlvl1", right: "buttonlvl1", key: "hl_mid.png" }, buttonBack: { up: null, down: "buttonlvl1", left: null, right: "buttonAudio", key: "hl_mid.png" }, buttonAudio: { up: null, down: null, left: "buttonBack", right: null, key: "hl_mid.png" } }, uiPause: { init: "none", none: { up: "buttonPlay", down: "buttonPlay", left: "buttonPlay", right: "buttonPlay", key: "hl_rom.png" }, buttonPlay: { up: null, down: null, left: "buttonRestart", right: "buttonTutorial", key: "hl_rom.png" }, buttonAudio: { up: null, down: "buttonTutorial", left: "buttonTutorial", right: null, key: "hl_mid.png" }, buttonTutorial: { up: "buttonAudio", down: null, left: "buttonPlay", right: "buttonAudio", key: "hl_big.png" }, buttonRestart: { up: "buttonHome", down: null, left: "buttonHome", right: "buttonPlay", key: "hl_big.png" }, buttonHome: { up: null, down: "buttonRestart", left: null, right: "buttonRestart", key: "hl_mid.png" } }, uiConfirmation: { init: "none", none: { up: "buttonYes", down: "buttonYes", left: "buttonYes", right: "buttonYes", key: "hl_big.png" }, buttonYes: { up: null, down: null, left: "buttonNo", right: null, key: "hl_big.png" }, buttonNo: { up: null, down: null, left: null, right: "buttonYes", key: "hl_big.png" } }, uiLevelCompleted: { init: "none", none: { up: "buttonPlay", down: "buttonPlay", left: "buttonPlay", right: "buttonPlay", key: "hl_mid.png" }, buttonPlay: { up: "buttonAudio", down: null, left: "buttonRestart", right: "buttonAudio", key: "hl_rom.png" }, buttonAudio: { up: null, down: "buttonPlay", left: "buttonPlay", right: null, key: "hl_mid.png" }, buttonRestart: { up: null, down: null, left: null, right: "buttonPlay", key: "hl_big.png" } } }, this.ui = "uiMainMenu", this.onChangeButton = new Phaser.Signal } return t.prototype.initControl = function(t) { return this.actualUI = t, this.actualButton = this.data[t].init, this.onChangeButton.dispatch(this.actualButton), this.data[t].init }, t.prototype.addControl = function(t) { var e = t.input.keyboard.addKey(Phaser.Keyboard.UP),
                i = t.input.keyboard.addKey(Phaser.Keyboard.DOWN),
                n = t.input.keyboard.addKey(Phaser.Keyboard.LEFT),
                s = t.input.keyboard.addKey(Phaser.Keyboard.RIGHT);
            e.onDown.add(this.moveUp, this), i.onDown.add(this.moveDown, this), n.onDown.add(this.moveLeft, this), s.onDown.add(this.moveRight, this) }, t.prototype.removeControl = function(t) { var e = t.input.keyboard.addKey(Phaser.Keyboard.UP),
                i = t.input.keyboard.addKey(Phaser.Keyboard.DOWN),
                n = t.input.keyboard.addKey(Phaser.Keyboard.LEFT),
                s = t.input.keyboard.addKey(Phaser.Keyboard.RIGHT);
            e.onDown.removeAll(this), i.onDown.removeAll(this), n.onDown.removeAll(this), s.onDown.removeAll(this) }, t.prototype.setButton = function(t) { this.actualButton = t, this.onChangeButton.dispatch(this.actualButton) }, t.prototype.getHightLight = function() { return this.data[this.actualUI][this.actualButton].key }, t.prototype.setButtonFlow = function(t, e, i, n, s, o) { this.data[this.actualUI][t] || (this.data[this.actualUI][t] = { up: null, down: null, left: null, right: null, key: "hl_mm.png" }), this.data[this.actualUI][t].key = e, this.data[this.actualUI][t].up = i, this.data[this.actualUI][t].down = n, this.data[this.actualUI][t].left = s, this.data[this.actualUI][t].right = o }, t.prototype.moveLeft = function() { var t = this.data[this.actualUI][this.actualButton].left;
            null !== t && (this.actualButton = t, this.onChangeButton.dispatch(t)) }, t.prototype.moveRight = function() { var t = this.data[this.actualUI][this.actualButton].right;
            null !== t && (this.actualButton = t, this.onChangeButton.dispatch(t)) }, t.prototype.moveUp = function() { var t = this.data[this.actualUI][this.actualButton].up;
            null !== t && (this.actualButton = t, this.onChangeButton.dispatch(t)) }, t.prototype.moveDown = function() { var t = this.data[this.actualUI][this.actualButton].down;
            null !== t && (this.actualButton = t, this.onChangeButton.dispatch(t)) }, t }();
    t.ControlButtonUI = e }(GameCommands || (GameCommands = {}));
var GameCommands;
! function(t) { var e = function() {
        function t(t) { this.game = t, this.version = Game.Constants.GAME_VERSION, this.key = "ben10-collection-commands" + language, this.loadData() } return t.prototype.loadData = function() { var t = this.game.storage.getItem(this.key);
            this.gameData = JSON.parse(t), null !== t && this.gameData.version === this.version || this.initData() }, t.prototype.saveData = function() { this.game.storage.setItem(this.key, JSON.stringify(this.gameData)) }, t.prototype.initData = function() { var t;
            t = { version: this.version, seeComicIntro: !1, seeComicEnd: !1, audioEnable: !0, lastLevelCompleted: -1, needAnimLevelUnlock: !1 }, this.gameData = t, this.saveData() }, t.prototype.getAudio = function() { return Game.Instances.dataManager.getAudio() }, t.prototype.getSeeComicIntro = function() { return this.gameData.seeComicIntro }, t.prototype.getSeeComicEnd = function() { return this.gameData.seeComicEnd }, t.prototype.getLevelCompelteded = function() { return this.gameData.lastLevelCompleted }, t.prototype.seeComicIntro = function() { this.gameData.seeComicIntro = !0, this.saveData() }, t.prototype.seeComicEnd = function() { this.gameData.seeComicEnd = !0, this.saveData() }, t.prototype.setAudio = function(t) { Game.Instances.dataManager.setAudio(t), this.saveData() }, t.prototype.completedLevel = function(t) { this.gameData.lastLevelCompleted >= t || (this.gameData.needAnimLevelUnlock = !0, this.gameData.lastLevelCompleted = t, this.saveData()) }, t.prototype.seeLevelUnlock = function() { this.gameData.needAnimLevelUnlock = !1, this.saveData() }, t.prototype.getNeedAnimLevelAnim = function() { return this.gameData.needAnimLevelUnlock }, t }();
    t.DataManager = e }(GameCommands || (GameCommands = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameCommands;
! function(t) { var e = function(e) {
        function i(i, n, s, o, a) { var r = e.call(this, i) || this;
            r.x = s, r.y = o, r.nameID = n, r.commandsShow = a, r.commandUseful = [], r.hasAnim = !1, r.visualObjectExtra = null, r.speedAnimation = 1; var h = t.ConfigGame.obstacles[r.nameID].visual; if (r.isFront = "front" === t.ConfigGame.obstacles[r.nameID].visual.group, void 0 !== h) switch (r.visualType = h.type, h.type) {
                case "sprite":
                    r.visualObject = new Phaser.Sprite(i, 0, 0, "atlas_gameplay", h.key), r.visualObject.anchor.set(.5, .5), r.add(r.visualObject), h.anim && (r.visualObject.animations.add("loop", h.anim, 4, !0), r.visualObject.play("loop"), r.hasAnim = !0), h.extra && (r.visualObjectExtra = new Phaser.Sprite(i, h.extra.x, h.extra.y, "atlas_gameplay", h.extra.key), r.visualObjectExtra.anchor.set(.5, .5), r.add(r.visualObjectExtra), "laser_on.png" === h.extra.key && (r.tween = r.game.add.tween(r.visualObjectExtra).to({ alpha: 0 }, 500, Phaser.Easing.Linear.None, !0, 0, -1, !0))); break;
                case "spine":
                    r.visualObject = r.game.add.spine(0, 0, h.key), r.visualObject.setToSetupPose(), r.hasAnimStand = void 0 !== h.animsStands, r.hasAnimStand && r.playStandAnimCoco(h.animsStands), r.add(r.visualObject); break;
                case "coco":
                    r.visualObject = r.game.add.ph2AnimationObject(0, 0, h.key, h.atlas), r.hasAnimStand = void 0 !== h.animsStands, r.hasAnimStand && r.playStandAnimCoco(h.animsStands), r.add(r.visualObject) } r.addCommandsUseful(), r.componentMgr = Ph2.ComponentPlugin.initComponents(r), r.distanceCommand = void 0 === t.ConfigGame.obstacles[r.nameID].distanceCommand ? 1200 : t.ConfigGame.obstacles[r.nameID].distanceCommand, r.distanceAnim = void 0 === t.ConfigGame.obstacles[r.nameID].distanceAnim ? 350 : t.ConfigGame.obstacles[r.nameID].distanceAnim; var l = t.ConfigGame.obstacles[r.nameID].width; return l = void 0 === l ? 200 : l, r.componentSimpleBody = r.componentMgr.addComponent(new t.RectangleBody(i, l, 600)), r } return __extends(i, e), i.prototype.addCommandsUseful = function() { for (var e, i, n = 0, s = e = t.ConfigGame.obstacles[this.nameID].useful_commands; n < s.length; n++) { var o = s[n];
                i = { category: void 0 === o.category ? null : o.category, key: o.name, name: void 0 === o.name ? null : o.name }, this.commandUseful.push(i) } }, Object.defineProperty(i.prototype, "simpleBody", { get: function() { return this.componentSimpleBody.getBody() }, enumerable: !0, configurable: !0 }), Object.defineProperty(i.prototype, "extraSprite", { get: function() { return this.visualObjectExtra }, enumerable: !0, configurable: !0 }), i.prototype.playStandAnimCoco = function(t) { "coco" === this.visualType && (t.length > 1 ? (this.visualObject.ph2Animations.getAnimations()[t[0]].onComplete.add(this.playAnimCoco, this, 0, t[1]), this.visualObject.ph2Animations.getAnimations()[t[1]].onComplete.add(this.playAnimCoco, this, 0, t[0]), this.playAnimCoco(null, null, t[0])) : this.visualObject.ph2Animations.play(t[0], this.speedAnimation, !0)), "spine" === this.visualType && 1 === t.length && this.visualObject.setAnimationByName(0, t[0], !0) }, i.prototype.playAnimCoco = function(t, e, i) { this.visualObject.ph2Animations.play(i, this.speedAnimation, !1) }, i.prototype.updateSpeed = function(t) { if ("coco" === this.visualType && this.hasAnimStand) { e = i.minScaleAnim > t ? i.minScaleAnim : t;
                this.speedAnimation !== e && (this.speedAnimation = e, this.visualObject.ph2Animations.currentAnim.speed = this.speedAnimation) } else if ("spine" === this.visualType && this.hasAnimStand) { var e = i.minScaleAnim > t ? i.minScaleAnim : t;
                this.speedAnimation !== e && (this.speedAnimation = e, this.visualObject.state.timeScale = e) } }, i.prototype.destroy = function() { "coco" === this.visualType && null !== this.visualObject && (this.hasAnimStand && this.visualObject.ph2Animations.currentAnim.onComplete.removeAll(this), this.visualObject.ph2Animations.stop()), this.visualObject.destroy(), this.componentMgr.removeComponent(this.componentSimpleBody), this.visualObject = null, this.componentSimpleBody = null, this.componentMgr = null, e.prototype.destroy.call(this) }, i.prototype.playAnim = function(t, e, i, n, s) { if (void 0 === n && (n = null), void 0 === s && (s = null), "stopTween" !== t) { if ("startTween" === t) return this.visualObjectExtra.alpha = 1, void(this.tween = this.game.add.tween(this.visualObjectExtra).to({ alpha: 0 }, 500, Phaser.Easing.Linear.None, !0, 0, -1, !0)); switch (this.visualType) {
                    case "sprtie":
                        n.call(s); break;
                    case "spine":
                        var o = this.visualObject.setAnimationByName(0, t, e);
                        this.visualObject.setToSetupPose(), e || null === n || (o.onComplete = n.bind(s)); break;
                    case "coco":
                        var a = void 0 === i ? this.speedAnimation : this.speedAnimation * i,
                            r = this.visualObject.ph2Animations.play(t, a, e);
                        r.onComplete.removeAll(this), e || null === n || r.onComplete.addOnce(n, s); break;
                    default:
                        n.call(s) } } else this.tween.stop() }, i.prototype.pause = function() { if (1 === this.alpha && (this.hasAnim || this.hasAnimStand)) switch (this.visualType) {
                case "spine":
                    this.lastSpeed = this.visualObject.state.timeScale, this.visualObject.state.timeScale = 0; break;
                case "coco":
                    this.visualObject.ph2Animations.pause() } }, i.prototype.resume = function() { if (1 === this.alpha && (this.hasAnim || this.hasAnimStand)) switch (this.visualType) {
                case "spine":
                    this.visualObject.state.timeScale = this.lastSpeed; break;
                case "coco":
                    this.visualObject.ph2Animations.resume() } }, i.prototype.render = function() { if (t.Constants.RENDER_DEBUG) { var e = this.game.debug.context;
                e.fillStyle = "rgba(0,255,0,0.4)", e.strokeStyle = "rgba(0,255,0,0.4)", e.beginPath(), e.lineWidth = 10, e.moveTo(this.x - this.distanceAnim, this.y), e.lineTo(this.x, this.y), e.stroke(), e.closePath(), e.fillStyle = "rgba(0,0,255,0.4)", e.strokeStyle = "rgba(0,0,255,0.4)", e.beginPath(), e.lineWidth = 10, e.moveTo(this.x - this.distanceCommand, this.y), e.lineTo(this.x, this.y), e.stroke() } }, Object.defineProperty(i.prototype, "commandsToShow", { get: function() { return this.commandsShow }, enumerable: !0, configurable: !0 }), i.prototype.isCommandsSelectuseful = function(e) { for (var i = t.ConfigGame.commands[t.COMMANDSID[this.commandsShow[e]]], n = 0, s = this.commandUseful; n < s.length; n++) { var o = s[n]; if (i.name === o.name || i.category === o.category) return !0 } return !1 }, i.minScaleAnim = .4, i }(Phaser.Group);
    t.Obstacle = e }(GameCommands || (GameCommands = {}));
var GameCommands;
! function(t) { var e = function() {
        function t(t, e) { this.game = t, this.particleGroup = e, this.newParticle = 300, this.particles = [], this.tweenHide = [], this.positionY = [320, 100, 150, 200, 400, 450, 250], this.velocityScaleX = [1, .9, 2, 1.5, 1.7, 1, 2] } return t.prototype.update = function(t, e) { this.newParticle -= t * e, this.newParticle <= 0 && this.createParticle(); for (var i = [], n = 0, s = this.particles; n < s.length; n++)(r = s[n]).sprite.x -= t * e * r.velocityScale, r.sprite.x < -600 && i.push(r); for (var o = 0, a = i; o < a.length; o++) { var r = a[o];
                this.particles.splice(this.particles.indexOf(r), 1), this.positionY.push(r.sprite.y), this.velocityScaleX.push(r.velocityScale), r.sprite.destroy() } }, t.prototype.createParticle = function() { if (0 !== this.positionY.length) { this.positionY = Phaser.ArrayUtils.shuffle(this.positionY), this.velocityScaleX = Phaser.ArrayUtils.shuffle(this.velocityScaleX); var t = new Phaser.Sprite(this.game, 3e3, this.positionY.splice(0, 1)[0], "particle"),
                    e = { sprite: t, velocityScale: this.velocityScaleX.splice(0, 1)[0] };
                t.anchor.set(.5, .5), this.particleGroup.add(t), this.particles.push(e) } }, t.prototype.hideParticle = function() { this.tweenHide = []; for (var t, e = 0, i = this.particles; e < i.length; e++) { var n = i[e];
                t = this.game.add.tween(n.sprite).to({ alpha: 0 }, 200, "Linear", !0), this.tweenHide.push(t) } }, t.prototype.showParticle = function() { this.tweenHide = []; for (var t = 0, e = this.particles; t < e.length; t++) e[t].sprite.alpha = 1 }, t.prototype.pause = function() { for (var t = 0, e = this.tweenHide; t < e.length; t++) e[t].pause() }, t.prototype.resume = function() { for (var t = 0, e = this.tweenHide; t < e.length; t++) e[t].resume() }, t }();
    t.ParticleManager = e }(GameCommands || (GameCommands = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameCommands;
! function(t) { var e = function(e) {
        function i(i, n, s, o) { var a = e.call(this, s) || this;
            a.x = i, a.y = n, a.playerID = o, a.visualObject = a.game.add.spine(0, 50, String(a.playerID)), a.actAnim = a.visualObject.setAnimationByName(0, "run", !0), a.visualObject.setToSetupPose(), a.add(a.visualObject), a.bullet = []; for (var r = 0, h = void 0; r < 3; r++)(h = new Phaser.Sprite(a.game, 0, 0, "atlas_gameplay", "cannonbolt_spike.png")).alpha = 0, a.bullet.push(h), a.add(h); return a.componentMgr = Ph2.ComponentPlugin.initComponents(a), a.componentSimpleBody = a.componentMgr.addComponent(new t.RectangleBody(s, 100, 100)), a.componentDynamic = a.componentMgr.addComponent(new t.DynamicObject(s)), a.componentDynamic.serLimits(0, a.game.world.height - t.ConfigGame.floor, -400, a.game.world.width + 600), a.componentDynamic.setGravity(0, -10), a.dynamicPause = !1, a } return __extends(i, e), Object.defineProperty(i.prototype, "width", { get: function() { return this.componentSimpleBody.width }, enumerable: !0, configurable: !0 }), Object.defineProperty(i.prototype, "anchor", { get: function() { return new Phaser.Point(.5, .5) }, enumerable: !0, configurable: !0 }), Object.defineProperty(i.prototype, "height", { get: function() { return this.componentSimpleBody.height }, enumerable: !0, configurable: !0 }), Object.defineProperty(i.prototype, "speed", { get: function() { return this.componentDynamic.velocity }, enumerable: !0, configurable: !0 }), Object.defineProperty(i.prototype, "simpleBody", { get: function() { return this.componentSimpleBody.getBody() }, enumerable: !0, configurable: !0 }), i.prototype.setSpeed = function(t, e) { this.componentDynamic.setSpeed(t, e) }, i.prototype.startMovePlayer = function() { this.actAnim = this.visualObject.setAnimationByName(0, "run", !0), this.visualObject.setToSetupPose(), this.componentDynamic.paused = !1, this.dynamicPause = !1 }, i.prototype.runPlayer = function(t) { this.visualObject.setAnimationByName(0, "run", !0);
            this.visualObject.setToSetupPose(), this.visualObject.state.timeScale = i.minScaleAnim > t ? i.minScaleAnim : t }, i.prototype.setScaleAnim = function(t) { this.visualObject.state.timeScale = i.minScaleAnim > t ? i.minScaleAnim : t }, i.prototype.stopMovePlayer = function() { this.componentDynamic.paused = !0, this.dynamicPause = !0, this.visualObject.state.timeScale = 0 }, i.prototype.playAnim = function(t, e, i, n, s) { void 0 === n && (n = null), void 0 === s && (s = null); var o = this.visualObject.setAnimationByName(0, t, e);
            this.actAnim = o, this.visualObject.setToSetupPose(), e || (o.onComplete = n.bind(s)) }, i.prototype.destroy = function() { this.visualObject.destroy(), this.componentMgr.removeComponent(this.componentDynamic), this.componentMgr.removeComponent(this.componentSimpleBody), this.visualObject = null, this.componentDynamic = null, this.componentSimpleBody = null, this.componentMgr = null, e.prototype.destroy.call(this) }, i.prototype.render = function() { t.Constants.RENDER_DEBUG && (this.componentDynamic.render(), this.componentSimpleBody.render()) }, i.prototype.pause = function() { this.lastSpeed = this.visualObject.state.timeScale, this.visualObject.state.timeScale = 0, this.componentDynamic.paused = !0 }, i.prototype.resume = function() { this.visualObject.state.timeScale = this.lastSpeed, this.componentDynamic.paused = this.dynamicPause }, i.minScaleAnim = .4, i }(Phaser.Group);
    t.Player = e }(GameCommands || (GameCommands = {}));
var GameCommands;
! function(t) { var e;! function(t) { t[t.moveLeft = 0] = "moveLeft", t[t.moveRight = 1] = "moveRight", t[t.stand = 2] = "stand" }(e = t.IncrementState || (t.IncrementState = {})); var i = function() {
        function i(n, s, o, a, r, h, l) { void 0 === h && (h = 0), void 0 === l && (l = 0), this.game = n, this.widthWorld = h, this.widthView = l, this.frontGroup = s, this.backGroup = o, this.particleManager = new t.ParticleManager(n, a), this.xPos = 0, this.isRunning = !1, this.tiles = [], this.obstacles = [], this.xPlayer = 0, this.playerFixX = -400, this.xVelocity = t.ConfigGame.speed, this.playerState = e.moveRight, this.speedScale = 1, this.moveX = 0, this.accelerationScale = r, this.onEndMoveOffset = new Phaser.Signal, this.xNewFront = i.distanceFront / 2, this.frontObstacles = [], this.frontIndex = 0, this.speedScaleFront = 1.5, this.actOffSetX = 0, this.lastOffSetX = 0, this.objectiveOffSetX = 0, this.offSetXFactor = .2, this.moveXOffset = 0, this.xNewBack = 200, this.backObstacles = [], this.backIndex = 0, this.speedScaleBack = 1 } return i.prototype.changeOiriginVelocityScale = function(e) { this.xVelocity = t.ConfigGame.speed * e }, i.prototype.createNewFrontObject = function() { var t = new Phaser.Sprite(this.game, i.distanceFront, i.fronObjectData[this.frontIndex].y, "atlas_gameplay", i.fronObjectData[this.frontIndex].key);
            t.anchor.set(.5, .5), this.frontObstacles.push(t), this.frontGroup.add(t), this.frontIndex = this.frontIndex + 1 < i.fronObjectData.length ? this.frontIndex + 1 : 0 }, i.prototype.createNewBackObject = function() { for (var t = 0, e = i.backObjectData[this.backIndex]; t < e.length; t++) { var n = e[t],
                    s = new Phaser.Sprite(this.game, 2e3 + n.x, n.y, n.atlas, n.key);
                s.anchor.set(.5, .5), this.backObstacles.push(s), this.backGroup.add(s) } this.backIndex = this.backIndex + 1 < i.backObjectData.length ? this.backIndex + 1 : 0 }, i.prototype.setSpeedScale = function(t) { this.speedScale = t, this.needUpdateScale = !1 }, i.prototype.changeEasingScale = function(t) { this.changeScale = this.speedScale < t ? e.moveLeft : e.moveRight, this.needUpdateScale = !0, this.targetScale = t }, i.prototype.setOffsetObjective = function(t) { this.objectiveOffSetX < t ? this.playerState = e.moveRight : this.playerState = e.moveLeft, this.objectiveOffSetX = t }, i.prototype.addTile = function(t) { this.tiles.push(t) }, i.prototype.addPlayer = function(t) { this.player = t }, i.prototype.addObstacle = function(t) { this.obstacles.push(t) }, i.prototype.start = function() { this.isRunning = !0 }, i.prototype.stop = function() { this.player.x = this.playerFixX + this.actOffSetX, this.isRunning = !1 }, i.prototype.setPosition = function() { this.moveX = 5e3, this.objectiveOffSetX = 0; for (var t = 0, e = this.tiles; t < e.length; t++) e[t].tilePosition.x += this.moveX; for (var i = 0, n = this.obstacles; i < n.length; i++) n[i].x += this.moveX; for (var s = 0, o = this.frontObstacles; s < o.length; s++) o[s].x += this.moveX * this.speedScaleFront; for (var a = 0, r = this.backObstacles; a < r.length; a++) r[a].x += this.moveX * this.speedScaleBack;
            this.actOffSetX = 0, this.lastOffSetX = this.actOffSetX, this.xNewFront += this.moveX * this.speedScaleFront, this.xNewBack += this.moveX * this.speedScaleBack, this.moveX = 0 }, i.prototype.resetMoveX = function() { this.moveX = 0 }, i.prototype.hideParticle = function() { this.particleManager.hideParticle() }, i.prototype.showParticle = function() { this.particleManager.showParticle() }, i.prototype.pauseParticle = function() { this.particleManager.pause() }, i.prototype.resumeParticle = function() { this.particleManager.resume() }, i.prototype.update = function() { if (this.isRunning) { this.game.time.elapsedMS;
                this.needUpdateScale && (this.changeScale === e.moveLeft && (this.speedScale < this.targetScale ? (this.speedScale += this.accelerationScale, this.player.setScaleAnim(this.speedScale)) : (this.speedScale = this.targetScale, this.needUpdateScale = !1, this.player.setScaleAnim(this.speedScale))), this.changeScale === e.moveRight && (this.speedScale > this.targetScale ? (this.speedScale -= this.accelerationScale, this.player.setScaleAnim(this.speedScale)) : (this.speedScale = this.targetScale, this.needUpdateScale = !1, this.player.setScaleAnim(this.speedScale)))), this.particleManager.update(this.xVelocity, this.speedScale); for (var t = 0, n = this.tiles; t < n.length; t++)(O = n[t]).tilePosition.x -= this.xVelocity * this.speedScale; for (var s = 0, o = this.obstacles; s < o.length; s++)(k = o[s]).x -= this.xVelocity * this.speedScale, k.updateSpeed(this.speedScale);
                this.moveX += this.xVelocity * this.speedScale, this.xNewFront -= this.xVelocity * this.speedScale * this.speedScaleFront, this.xNewFront <= 0 && (this.xNewFront = i.distanceFront, this.createNewFrontObject()), this.xNewBack -= this.xVelocity * this.speedScale * this.speedScaleBack, this.xNewBack <= 0 && (this.xNewBack = 2e3, this.createNewBackObject()); var a = void 0;
                a = []; for (var r = 0, h = this.backObstacles; r < h.length; r++)(x = h[r]).x -= this.xVelocity * this.speedScale * this.speedScaleBack, x.x < -5e3 && a.push(x); for (var l = 0, c = a; l < c.length; l++) { g = c[l];
                    this.backObstacles.splice(this.backObstacles.indexOf(g), 1), g.destroy() } a = []; for (var u = 0, p = this.frontObstacles; u < p.length; u++)(D = p[u]).x -= this.xVelocity * this.speedScale * this.speedScaleFront, D.x < -5e3 && a.push(D); for (var d = 0, m = a; d < m.length; d++) { var g = m[d];
                    this.frontObstacles.splice(this.frontObstacles.indexOf(g), 1), g.destroy() } if (this.player.x = this.playerFixX + this.actOffSetX, this.playerState === e.moveRight) { for (var f = 0, y = this.backObstacles; f < y.length; f++)(x = y[f]).x += this.actOffSetX - this.lastOffSetX; for (var v = 0, b = this.tiles; v < b.length; v++)(O = b[v]).tilePosition.x += this.actOffSetX - this.lastOffSetX; for (var _ = 0, S = this.obstacles; _ < S.length; _++)(k = S[_]).x += this.actOffSetX - this.lastOffSetX; for (var w = 0, C = this.frontObstacles; w < C.length; w++)(D = C[w]).x += (this.actOffSetX - this.lastOffSetX) * this.speedScaleFront;
                    this.moveXOffset += this.actOffSetX - this.lastOffSetX, this.lastOffSetX = this.actOffSetX, this.actOffSetX < this.objectiveOffSetX ? this.actOffSetX += this.xVelocity * this.speedScale * this.offSetXFactor : (this.actOffSetX = this.objectiveOffSetX, this.playerState = e.stand, this.onEndMoveOffset.dispatch()) } if (this.playerState === e.moveLeft) { for (var A = 0, T = this.backObstacles; A < T.length; A++) { var x = T[A];
                        x.x += this.actOffSetX - this.lastOffSetX } for (var P = 0, I = this.tiles; P < I.length; P++) { var O = I[P];
                        O.tilePosition.x += this.actOffSetX - this.lastOffSetX } for (var E = 0, L = this.obstacles; E < L.length; E++) { var k = L[E];
                        k.x += this.actOffSetX - this.lastOffSetX } for (var M = 0, B = this.frontObstacles; M < B.length; M++) { var D = B[M];
                        D.x += (this.actOffSetX - this.lastOffSetX) * this.speedScaleFront } this.moveXOffset += this.actOffSetX - this.lastOffSetX, this.lastOffSetX = this.actOffSetX, this.actOffSetX > this.objectiveOffSetX ? this.actOffSetX -= this.xVelocity * this.speedScale * this.offSetXFactor : (this.actOffSetX = this.objectiveOffSetX, this.playerState = e.stand, this.onEndMoveOffset.dispatch()) } } }, i.fronObjectData = [{ key: "deco_front_1.png", y: 535.5 }, { key: "deco_front_2.png", y: 550 }, { key: "deco_front_3.png", y: 320 }, { key: "deco_front_4.png", y: 320 }], i.backObjectData = [
            [{ atlas: "atlas_gameplay", key: "deco_1.png", x: 0, y: 248 }],
            [{ atlas: "atlas_gameplay", key: "deco_4.png", x: 0, y: 214 }],
            [{ atlas: "atlas_gameplay", key: "deco_3.png", x: 0, y: 248 }],
            [{ atlas: "bg_transition", x: 0, y: 127 }, { atlas: "atlas_gameplay", key: "deco_back_2.png", x: 0, y: 60 }, { atlas: "atlas_gameplay", key: "deco_back_3.png", x: 0, y: 320 }, { atlas: "atlas_gameplay", key: "trans_left.png", x: -480, y: 229 }, { atlas: "atlas_gameplay", key: "trans_right.png", x: 480, y: 229 }],
            [{ atlas: "atlas_gameplay", key: "deco_5.png", x: 0, y: 214 }],
            [{ atlas: "atlas_gameplay", key: "deco_6.png", x: 0, y: 282 }],
            [{ atlas: "atlas_gameplay", key: "deco_2.png", x: 0, y: 248 }],
            [{ atlas: "bg_transition", x: 0, y: 127 }, { atlas: "atlas_gameplay", key: "deco_back_1.png", x: 0, y: 120 }, { atlas: "atlas_gameplay", key: "trans_left.png", x: -480, y: 229 }, { atlas: "atlas_gameplay", key: "trans_right.png", x: 480, y: 229 }]
        ], i.distanceFront = 3750, i }();
    t.SimulateCamera = i }(GameCommands || (GameCommands = {}));
var GameCommands;
! function(t) { var e = function() {
        function t(t, e, i, n, s) { void 0 === s && (s = null), this.game = t, this.vStart = e, this.vAct = {}; for (var o in this.vStart)
                if (this.vStart.hasOwnProperty(o)) { var a = e[o];
                    this.vAct[o] = a } this.vEnd = i, this.duration = n, this.finished = !1, this.dt = 0, this.interpolationFunction = Phaser.Math.linearInterpolation, this.interpolationFunction = Phaser.Math, void 0 !== s && null !== s || (s = Phaser.Easing.Default), "string" == typeof s && this.game.tweens.easeMap[s] && (this.easingFunction = this.game.tweens.easeMap[s]) } return t.prototype.update = function(t, e) { void 0 === e && (e = !0), e ? this.dt += t : this.dt = t, this.dt = Math.min(this.dt, this.duration), this.percent = this.dt / this.duration, this.value = this.easingFunction(this.percent); for (var i in this.vEnd)
                if (this.vEnd.hasOwnProperty(i)) { var n = this.vStart[i],
                        s = this.vEnd[i];
                    Array.isArray(s) ? this.vAct[i] = this.interpolationFunction.call(this.interpolationContext, s, this.value) : this.vAct[i] = n + (s - n) * this.value } this.finished = 1 === this.value, console.log() }, t.prototype.setObjectProperty = function(t, e) { void 0 === e && (e = null); for (var i in this.vEnd) this.vEnd.hasOwnProperty(i) && (t[i] = null === e ? this.vAct[i] : this.vAct[i] + e[i]) }, t.prototype.getProperty = function() { var t = []; for (var e in this.vStart) this.vStart.hasOwnProperty(e) && t.push(e); return t }, t.prototype.changeToBezierTween = function() { this.interpolationFunction = function(t, e) { return Phaser.Math.bezierInterpolation(t, e) } }, t.prototype.destroy = function() { this.vStart = null, this.vAct = null, this.vEnd = null, this.easingFunction = null, this.interpolationFunction = null, this.interpolationContext = null }, t }();
    t.CalculatorTween = e }(GameCommands || (GameCommands = {}));
var GameCommands;
! function(t) { var e = function() {
        function t(t, e) { void 0 === e && (e = "us"), this.game = t, this.language = e, this.jsonKey = "localization_" + e, this.localizationData = this.game.cache.getJSON(this.jsonKey), this.charInitArg = "{", this.charEndArg = "}", this.defaulString = "*", this.showDefault = !1 } return t.prototype.setLanguage = function(t) { return void 0 === t && (t = "us"), t === this.language || (this.jsonKey = "localization_" + t, this.game.cache.getJSON(this.jsonKey) ? (this.language = t, this.localizationData = this.game.cache.getJSON(this.jsonKey), !0) : (this.jsonKey = "localization_" + this.language, !1)) }, t.prototype.getLanguage = function() { return this.language }, t.prototype.getLocalizationData = function() { return this.localizationData }, t.prototype.localizeText = function(t, e, i, n, s) { void 0 === n && (n = !1), void 0 === s && (s = !1); var o, a; if (o = Ph2.UISystem.findObject(t, e), a = i, !n) { if (void 0 === this.localizationData[i]) return console.log("No found key: " + i), o;
                a = this.localizationData[i] } return !0 === this.showDefault && (a = this.defaulString), o.text = s ? a.toUpperCase() : a, o }, t.prototype.getSringForKey = function(t) { for (var e = [], i = 1; i < arguments.length; i++) e[i - 1] = arguments[i]; var n = this.localizationData[t]; if (void 0 === this.localizationData[t]) return console.log("No found key: " + t), ""; for (var s = n.indexOf(this.charInitArg) + 1, o = n.indexOf(this.charEndArg), a = 0, r = n.substring(s, o);
                "" !== r && a < e.length;) n = n.split(this.charInitArg + r + this.charEndArg).join(e[a]), a++, s = n.indexOf(this.charInitArg) + 1, o = n.indexOf(this.charEndArg), r = n.substring(s, o); return !0 === this.showDefault && (n = this.defaulString), n }, t.prototype.addSpriteTo = function(t) { for (var e = [], i = 1; i < arguments.length; i++) e[i - 1] = arguments[i]; for (var n = this.localizationData[t], s = n.indexOf(this.charInitArg) + 1, o = n.indexOf(this.charEndArg), a = 0, r = n.substring(s, o);
                "" !== r && a < e.length;) n = n.split(this.charInitArg + r + this.charEndArg).join(e[a]), a++, s = n.indexOf(this.charInitArg) + 1, o = n.indexOf(this.charEndArg), r = n.substring(s, o); return n }, t.prototype.fitFontSizeUI = function(e, i, n, s, o, a) { void 0 === s && (s = -1), void 0 === o && (o = -1), void 0 === a && (a = t.MIN_FONT_SIZE_DEFAULT); var r;
            r = Ph2.UISystem.findObject(e, i), this.fitFontSizeText(r, n, s, o, a) }, t.prototype.fitFontSizeText = function(e, i, n, s, o) { void 0 === n && (n = -1), void 0 === s && (s = -1), void 0 === o && (o = t.MIN_FONT_SIZE_DEFAULT); var a, r, h, l; for (s > 0 && (e.fontSize = s), r = e.width, h = e.height, l = e.fontSize; r > i || h > n && -1 !== n;) { if ((a = parseInt(l.toString().replace("px", ""), 10) - 1) < o) { l = a = o, e.setStyle({ fontSize: l }, !0); break } l = a, e.fontSize = l, r = e.width, h = e.height } }, t.MIN_FONT_SIZE_DEFAULT = 1, t }();
    t.LocalizationManager = e }(GameCommands || (GameCommands = {}));
var GameCommands;
! function(t) { var e = function() {
        function t() {} return t.addTouchCallbackToButton = function(t, e, i, n, s) { void 0 === s && (s = 0); for (var o = [], a = 5; a < arguments.length; a++) o[a - 5] = arguments[a]; var r; return (r = Ph2.UISystem.findObject(t, e)).onInputUp.add(i, n, s, o), r }, t.addTouchCallbackToText = function(t, e, i, n) { var s; return s = Ph2.UISystem.findObject(t, e), s.inputEnabled = !0, s.input.useHandCursor = !0, s.events.onInputUp.add(i, n), s }, t.addTouchCallbackToSprite = function(t, e, i, n) { var s; return s = Ph2.UISystem.findObject(t, e), s.inputEnabled = !0, s.input.useHandCursor = !0, s.events.onInputUp.add(i, n), s }, t.addTouchCallbackToSpriteAnimation = function(t, e, i, n) { var s; return s = Ph2.AnimationSystem.findObject(t, e), s.inputEnabled = !0, s.input.useHandCursor = !0, s.events.onInputUp.add(i, n), s }, t.addInputToPreventPropagation = function(t, e) { var i;
            (i = Ph2.UISystem.findObject(t, e)).inputEnabled = !0, i.input.useHandCursor = !1 }, t.disableTouch = function(t, e) { Ph2.UISystem.findObject(t, e).inputEnabled = !1 }, t.enableTouch = function(t, e) { var i;
            (i = Ph2.UISystem.findObject(t, e)).inputEnabled = !0, i.input.useHandCursor = !0 }, t.disableTouchAnimation = function(t, e) { Ph2.AnimationSystem.findObject(t, e).inputEnabled = !1 }, t.enableTouchAnimation = function(t, e) { var i;
            (i = Ph2.AnimationSystem.findObject(t, e)).inputEnabled = !0, i.input.useHandCursor = !0 }, t }();
    t.Util = e }(GameCommands || (GameCommands = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameCommands;
! function(t) { var e = function(t) {
        function e(e, i) { var n = t.call(this, null, !1) || this; return n.game = e, n.graphics = n.game.add.graphics(0, 0), n.graphics.beginFill(0, 1), n.graphics.drawRect(0, 0, n.game.width, n.game.height), n.graphics.endFill(), n.opacityNum = i, n.graphics.alpha = i, n.graphics.inputEnabled = !0, n.graphics.input.useHandCursor = !1, n.game.scale.onSizeChange.add(n.resize, n), n.resize(), n.kill(), n } return __extends(e, t), Object.defineProperty(e.prototype, "overlaySprite", { get: function() { return this.graphics }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "opacity", { set: function(t) { this.opacityNum = t, this.graphics.alpha = t }, enumerable: !0, configurable: !0 }), e.prototype.kill = function() { this.graphics.alive = !1, this.graphics.exists = !1, this.graphics.visible = !1, this.game.scale.onSizeChange.remove(this.resize, this) }, e.prototype.revive = function() { this.graphics.alive = !0, this.graphics.exists = !0, this.graphics.visible = !0, this.resize(), this.game.scale.onSizeChange.add(this.resize, this) }, e.prototype.fadeIn = function(t, e, i, n) { void 0 === e && (e = this.opacityNum); var s;
            this.graphics.alpha = 0, s = this.game.add.tween(this.graphics).to({ alpha: e }, t, "Linear", !0), i && n && s.onComplete.addOnce(i, n) }, e.prototype.fadeOut = function(t, e, i, n) { void 0 === e && (e = this.opacityNum); var s;
            this.graphics.alpha = e, s = this.game.add.tween(this.graphics).to({ alpha: 0 }, t, "Linear", !0), i && n && s.onComplete.addOnce(i, n) }, e.prototype.resize = function() { this.graphics.clear(), this.graphics.beginFill(0, 1), this.graphics.drawRect(0, 0, this.game.width, this.game.height), this.graphics.endFill() }, e.prototype.destroy = function() { this.game.scale.onSizeChange.remove(this.resize, this), this.graphics.destroy(), t.prototype.destroy.call(this) }, e }(Ph2.Component);
    t.Overlay = e }(GameCommands || (GameCommands = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameCommands;
! function(t) { var e = function(e) {
        function i(i) { var n = e.call(this, null, !1) || this; return n.game = i, n.actTweens = [], n.indexActCompleted = [], n.onEndAnimation = new Phaser.Signal, n.pause = !1, n.tweenData = t.ConfigGame.tweens, n.animData = t.ConfigGame.anims, n.createTweens(), n } return __extends(i, e), i.prototype.createTweens = function() { this.tweens = []; for (var e in this.tweenData)
                if (this.tweenData.hasOwnProperty(e)) { var i = this.tweenData[e],
                        n = i.initData,
                        s = i.endData,
                        o = i.isBezier;
                    this.tweens[e] = new t.CalculatorTween(this.game, n, s, i.duration, i.easing), o && this.tweens[e].changeToBezierTween() } }, i.prototype.update = function() { if (!this.pause) { this.game.time.elapsedMS; for (var t = 0, e = void 0, i = this.actTweens.length; t < i; t++)(e = this.actTweens[t]).delta += this.game.time.elapsedMS, this.tweens[e.tween].update(e.delta, !1), !0 === this.tweenData[e.tween].ignoreOriginData ? this.tweens[e.tween].setObjectProperty(e.obj) : this.tweens[e.tween].setObjectProperty(e.obj, e.originData), this.tweens[e.tween].finished && this.indexActCompleted.push(t); for (; this.indexActCompleted.length > 0;) { var n = this.indexActCompleted.splice(this.indexActCompleted.length - 1, 1)[0],
                        s = this.actTweens[n].completed;
                    this.actTweens.splice(n, 1), this.nextStep(s) } } }, i.prototype.startAnim = function(t) { void 0 === t && (t = ""); for (var e = [], i = 1; i < arguments.length; i++) e[i - 1] = arguments[i];
            this.enable(), this.animName = t; var n = this.animData[t].steps;
            this.objectAnims = e, this.steps = []; for (var s = 0, o = n; s < o.length; s++) { var a = o[s];
                void 0 === this.steps[a.signalPlay] && (this.steps[a.signalPlay] = []), this.steps[a.signalPlay].push(a) } this.actStep = this.steps.init, this.startStep() }, i.prototype.startStep = function() { for (var e = this, i = 0, n = this.actStep.length; i < n; i++) ! function(i, n) { if ("tween" === e.actStep[i].animType) { for (var s = e.actStep[i].animName, o = e.tweens[s].getProperty(), a = e.objectAnims[e.actStep[i].object], r = {}, h = 0, l = o; h < l.length; h++) { var c = l[h],
                            u = a[c];
                        r[c] = u } var p = { delta: 0, obj: a, tween: s, completed: f = e.actStep[i].signalCompleted, originData: r };
                    e.actTweens.push(p) } else if ("objectAnim" === e.actStep[i].animType) { var a = e.objectAnims[e.actStep[i].object],
                        d = e.actStep[i].animName; if ("function" != typeof a.playAnim) f = e.actStep[i].signalCompleted, e.nextStep(f);
                    else if (e.actStep[i].isLoop) a.playAnim(d, e.actStep[i].isLoop), f = e.actStep[i].signalCompleted, e.nextStep(f);
                    else { var m = e.actStep[i].signalCompleted;
                        a.playAnim(d, e.actStep[i].isLoop, e.actStep[i].speed, function() { this.nextStep(m) }, e) } } else if ("stopWorld" === e.actStep[i].animType) { var g = e.actStep[i].signalCompleted;
                    e.gameObject.initStopWordlDistance(e.actStep[i].distance, function() { this.nextStep(g) }, e) } else if ("startWorld" === e.actStep[i].animType) f = e.actStep[i].signalCompleted, e.gameObject.initStartWordlDistance(), e.nextStep(f);
                else if ("setVelocity" === e.actStep[i].animType) f = e.actStep[i].signalCompleted, e.gameObject.setVelocityMoveScale(e.actStep[i].velocity), e.nextStep(f);
                else if ("audio" === e.actStep[i].animType) { var f = e.actStep[i].signalCompleted;
                    t.Audios.playSfx(e.game, e.actStep[i].animName), e.nextStep(f) } }(i) }, i.prototype.nextStep = function(t) { "end" !== t ? null !== t && "end" !== t && (this.actStep = this.steps[t], this.startStep()) : this.endAnim() }, i.prototype.endAnim = function() { this.disable(), this.onEndAnimation.dispatch(this.animName), this.steps = [] }, i.prototype.destroy = function() { for (this.actTweens = [], this.objectAnims = [], this.onEndAnimation.dispose(); this.tweens.length > 0;) this.tweens[0].destroy(), this.tweens.splice(0, 1);
            e.prototype.destroy.call(this) }, i }(Ph2.Component);
    t.AnimSceneManager = e }(GameCommands || (GameCommands = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameCommands;
! function(t) { var e = function(t) {
        function e(e, i, n) { void 0 === n && (n = !1); var s = t.call(this, null, !1) || this; return s.game = e, s.timer = 0, s.timeLimit = i, s.paused = !0, s.isLoop = n, s.onEndTime = new Phaser.Signal, s.running = !1, s } return __extends(e, t), e.prototype.startTimer = function() { this.running = !0, this.paused = !1 }, e.prototype.stopTimer = function() { this.running = !1 }, e.prototype.update = function() {!this.paused && this.running && (this.timer += this.game.time.elapsedMS, this.timer >= this.timeLimit && this.onTimerEnd()) }, e.prototype.pauseTimer = function() { this.paused = !0 }, e.prototype.resumeTimer = function() { this.paused = !1 }, e.prototype.resetTimer = function() { this.timer = 0 }, Object.defineProperty(e.prototype, "time", { get: function() { return this.timer }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "isRunning", { get: function() { return this.running }, enumerable: !0, configurable: !0 }), e.prototype.onTimerEnd = function() { this.isLoop ? this.resetTimer() : this.running = !1, this.onEndTime.dispatch() }, e.prototype.destroy = function() { this.onEndTime.dispose(), this.onEndTime = null, t.prototype.destroy.call(this) }, e }(Ph2.Component);
    t.ComponentTimer = e }(GameCommands || (GameCommands = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameCommands;
! function(t) { var e;! function(t) { t[t.TOP = 0] = "TOP", t[t.BOTTOM = 1] = "BOTTOM", t[t.LEFT = 2] = "LEFT", t[t.RIGHT = 3] = "RIGHT", t[t.TOP_LEFT = 4] = "TOP_LEFT", t[t.TOP_RIGHT = 5] = "TOP_RIGHT", t[t.BOTTOM_LEFT = 6] = "BOTTOM_LEFT", t[t.BOTTOM_RIGHT = 7] = "BOTTOM_RIGHT" }(e = t.LIMITTOUCH || (t.LIMITTOUCH = {})); var i = function(t) {
        function i(e) { var i = t.call(this, null, !1) || this; return i.game = e, i.velocity = new Phaser.Point(0, 0), i.gravity = new Phaser.Point(0, 0), i.limitLeft = 0, i.limitRight = i.game.world.width, i.limitTop = 0, i.limitBottom = i.game.world.height, i.paused = !1, i.onCollisionLimit = new Phaser.Signal, i.onSeparateLimit = new Phaser.Signal, i.debug = !0, i.renderColor = "rgba(255,0,0,0.4)", i } return __extends(i, t), i.prototype.start = function() { var t = this.gameObject.width / 2,
                e = this.gameObject.height / 2;
            this.gameObject.x - t <= this.limitLeft ? (this.gameObject.x = this.limitLeft + t, this.isTouchLeft = !0, this.isTouchRight = !1) : this.gameObject.x + t >= this.limitRight ? (this.gameObject.x = this.limitRight - t, this.isTouchLeft = !1, this.isTouchRight = !0) : (this.isTouchLeft = !1, this.isTouchRight = !1), this.gameObject.y - e <= this.limitTop ? (this.gameObject.y = this.limitTop + e, this.isTouchTop = !0, this.isTouchBottom = !1) : this.gameObject.y + e >= this.limitBottom ? (this.gameObject.y = this.limitBottom - e, this.isTouchTop = !1, this.isTouchBottom = !0) : (this.isTouchTop = !1, this.isTouchBottom = !1) }, i.prototype.update = function() { if (!0 !== this.paused) { var t = this.game.time.elapsedMS / 60,
                    e = this.gameObject.width / 2,
                    i = this.gameObject.height / 2,
                    n = this.isTouchLeft,
                    s = this.isTouchRight,
                    o = this.isTouchTop,
                    a = this.isTouchBottom;
                this.gameObject.x = this.gameObject.x + this.velocity.x * t, this.gameObject.y = this.gameObject.y + this.velocity.y * t, this.velocity.x -= this.gravity.x * t, this.velocity.y -= this.gravity.y * t, this.gameObject.x - e <= this.limitLeft ? (this.gameObject.x = this.limitLeft + e, this.isTouchLeft = !0, this.isTouchRight = !1) : this.gameObject.x + e >= this.limitRight ? (this.gameObject.x = this.limitRight - e, this.isTouchLeft = !1, this.isTouchRight = !0) : (this.isTouchLeft = !1, this.isTouchRight = !1), this.gameObject.y - i <= this.limitTop ? (this.gameObject.y = this.limitTop + i, this.isTouchTop = !0, this.isTouchBottom = !1) : this.gameObject.y + i >= this.limitBottom ? (this.gameObject.y = this.limitBottom - i, this.isTouchTop = !1, this.isTouchBottom = !0) : (this.isTouchTop = !1, this.isTouchBottom = !1), this.checkCollisionLimit(o, a, n, s), this.checkSepareteLimit(o, a, n, s) } }, i.prototype.setSpeed = function(t, e) { this.velocity.set(t, e) }, i.prototype.setGravity = function(t, e) { this.gravity.set(t, e) }, i.prototype.serLimits = function(t, e, i, n) { this.limitTop = t, this.limitBottom = e, this.limitRight = n, this.limitLeft = i }, i.prototype.checkCollisionLimit = function(t, i, n, s) { var o, a = "",
                r = "";!1 === t && !0 === this.isTouchTop ? a = "TOP" : !1 === i && !0 === this.isTouchBottom && (a = "BOTTOM"), !1 === n && !0 === this.isTouchLeft ? r = "LEFT" : !1 === s && !0 === this.isTouchRight && (r = "RIGHT"), "" !== (o = "" !== a && "" !== r ? a + "_" + r : a + r) && this.onCollisionLimit.dispatch(e[o]) }, i.prototype.checkSepareteLimit = function(t, i, n, s) { var o, a = "",
                r = "";!0 === t && !1 === this.isTouchTop ? a = "TOP" : !0 === i && !1 === this.isTouchBottom && (a = "BOTTOM"), !0 === n && !1 === this.isTouchLeft ? r = "LEFT" : !0 === s && !1 === this.isTouchRight && (r = "RIGHT"), "" !== (o = "" !== a && "" !== r ? a + "_" + r : a + r) && this.onSeparateLimit.dispatch(e[o]) }, i.prototype.destroy = function() { this.onCollisionLimit.dispose(), this.onSeparateLimit.dispose(), this.onCollisionLimit = null, this.onSeparateLimit = null, this.velocity = null, this.gravity = null, t.prototype.destroy.call(this) }, i.prototype.render = function(t) { if (this.debug && this.game.debug.context) { void 0 === t && (t = !1); var e = this.game.debug.context;
                e.fillStyle = this.renderColor, e.strokeStyle = this.renderColor; var i = this.limitLeft - this.game.camera.x,
                    n = this.limitTop - this.game.camera.y,
                    s = Math.abs(this.limitRight - this.limitLeft),
                    o = Math.abs(this.limitTop - this.limitBottom);
                t ? e.fillRect(i, n, s, o) : e.strokeRect(i, n, s, o) } }, i }(Ph2.Component);
    t.DynamicObject = i }(GameCommands || (GameCommands = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameCommands;
! function(t) { var e = function(t) {
        function e() { var e = t.call(this, null, !1) || this; return e.gameObjects = [], e.pause = !1, e.onCollide = new Phaser.Signal, e } return __extends(e, t), e.prototype.update = function() { this.pause || this.gameObjects.length > 0 && Math.abs(this.gameObjects[0].x - this.gameObjects[1].x) < this.distance && this.onCollide.dispatch() }, e.prototype.addCollision = function(t, e, i) { this.gameObjects = [], this.distance = i, this.gameObjects.push(t), this.gameObjects.push(e) }, e.prototype.removeCollisionObject = function() { this.gameObjects = [] }, e.prototype.destroy = function() { this.gameObjects = [], this.onCollide.dispose(), t.prototype.destroy.call(this) }, e }(Ph2.Component);
    t.DistanceCollisionChecker = e }(GameCommands || (GameCommands = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameCommands;
! function(t) { var e = function(t) {
        function e(e, i, n, s, o) { void 0 === i && (i = 10), void 0 === n && (n = 10), void 0 === s && (s = 0), void 0 === o && (o = 0); var a = t.call(this, null, !1) || this; return a.game = e, a.width = i, a.height = n, a.offSet = new Phaser.Point(s, o), a.debug = !0, a.renderColor = "rgba(0,255,0,0.4)", a } return __extends(e, t), e.prototype.render = function(t) { if (this.debug && this.game.debug.context) { void 0 === t && (t = !0); var e = this.game.debug.context;
                e.fillStyle = this.renderColor, e.strokeStyle = this.renderColor; var i = this.gameObject.x + this.offSet.x - this.width / 2 - this.game.camera.x,
                    n = this.gameObject.y + this.offSet.y - this.height / 2 - this.game.camera.y;
                t ? e.fillRect(i, n, this.width, this.height) : e.strokeRect(i, n, this.width, this.height) } }, e.prototype.setBody = function(t, e, i, n) { this.width = t, this.height = void 0 !== e ? e : this.height; var s = void 0 !== i ? i : this.offSet.x,
                o = void 0 !== n ? n : this.offSet.y;
            this.offSet = new Phaser.Point(s, o) }, e.prototype.getBody = function() { return { x: this.gameObject.x + this.offSet.x, y: this.gameObject.y + this.offSet.y, width: this.width, height: this.height } }, e }(Ph2.Component);
    t.RectangleBody = e }(GameCommands || (GameCommands = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameCommands;
! function(t) { var e = function(t) {
        function e() { var e = t.call(this, null, !1) || this; return e.objectsCheckColliding = [], e.listenerCollision = [], e.pause = !1, e } return __extends(e, t), e.prototype.update = function() { if (!this.pause)
                for (var t = 0, e = this.objectsCheckColliding.length - 1, i = this.objectsCheckColliding.length; t < e; t++)
                    for (var n = this.objectsCheckColliding[t].simpleBody, s = t + 1; s < i; s++) { var o = this.objectsCheckColliding[s].simpleBody;
                        Math.abs(n.x - o.x) <= n.width / 2 + o.width / 2 && Math.abs(n.y - o.y) <= n.height / 2 + o.height / 2 && this.onCollide(this.objectsCheckColliding[t], this.objectsCheckColliding[s]) } }, e.prototype.onCollide = function(t, e) { for (var i, n = 0, s = this.listenerCollision.length; n < s; n++)(i = this.listenerCollision[n]).listener.call(i.context, t, e) }, e.prototype.addCollisionObject = function(t) {-1 === this.objectsCheckColliding.indexOf(t) && void 0 !== t.simpleBody && this.objectsCheckColliding.push(t) }, e.prototype.removeCollisionObject = function(t) { var e = this.objectsCheckColliding.indexOf(t); - 1 !== e && this.objectsCheckColliding.splice(e, 1) }, e.prototype.addCallbackCollision = function(t, e) { var i = { listener: t, context: e };
            this.listenerCollision.push(i) }, e.prototype.removeCallbackCollision = function(t, e) { var i = this.indexOfListener(t, e, this.listenerCollision); - 1 !== i && (this.listenerCollision[i].listener = null, this.listenerCollision[i].context = null, this.listenerCollision.splice(i, 1)) }, e.prototype.indexOfListener = function(t, e, i) { if (!i) return -1;
            void 0 === e && (e = null); for (var n, s = 0, o = i.length; s < o; s++)
                if ((n = i[s]).listener === t && n.context === e) return s; return -1 }, e.prototype.destroy = function() { for (this.objectsCheckColliding = []; this.listenerCollision.length > 0;) this.removeCallbackCollision(this.listenerCollision[0].listener, this.listenerCollision[0].context);
            t.prototype.destroy.call(this) }, e }(Ph2.Component);
    t.SimpleCollisionChecker = e }(GameCommands || (GameCommands = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameCommands;
! function(t) { var e = function(t) {
        function e(e, i, n) { var s = t.call(this, null, !1) || this; return s.percent = 100, s.sprite = new Phaser.Sprite(e, 0, 0, i, n), s.totalHeight = s.sprite.height, s.totalWidth = s.sprite.width, s.rect = new Phaser.Rectangle(0, 0, s.percent / 100 * s.totalWidth, s.totalHeight), s.sprite.crop(s.rect, !0), s } return __extends(e, t), e.prototype.setAnchor = function(t, e) { this.sprite.anchor.set(t, e), this.sprite.pivot.x = this.totalWidth * this.sprite.anchor.x, this.sprite.pivot.y = this.totalHeight * this.sprite.anchor.y }, e.prototype.setPercent = function(t) { if (t !== this.percent) { if (t < 0 ? t = 0 : t > 100 && (t = 100), this.percent = t, this.totalHeight <= 0) return;
                this.rect.width = Math.max(0, this.percent / 100 * this.totalWidth), this.sprite.crop(this.rect, !0) } }, e.prototype.destroy = function() { this.sprite.destroy(), this.sprite = null, this.rect = null, t.prototype.destroy.call(this) }, e }(Ph2.Component);
    t.LoadingBar = e }(GameCommands || (GameCommands = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameCommands;
! function(t) { var e = function(e) {
        function i(i, n) { var s = e.call(this, null, !1) || this;
            s.game = i, s.group = n, s.componentMgr = Ph2.ComponentPlugin.initComponents(s), s.loadingBar = s.componentMgr.addComponent(new t.LoadingBar(i, "load_cn", "loading1.png")); var o = new Phaser.Point(s.game.width / 2, s.game.height / 2); return s.logo = new Phaser.Sprite(s.game, o.x, o.y - 55, "fg_logo"), s.logo.anchor.set(.5, .5), s.loadingBg = new Phaser.Sprite(s.game, o.x, o.y + 150, "load_cn", "loading0.png"), s.loadingBg.anchor.set(.5, .5), s.loadingBar.sprite.x = o.x - s.loadingBg.width / 2, s.loadingBar.sprite.y = o.y + 98 + 75, s.loadingBar.setAnchor(0, .5), s.playButton = new Phaser.Sprite(s.game, o.x + 20, o.y + 200, "load_cn", "play_button.png"), s.playButton.anchor.set(.5, .5), s.playButton.inputEnabled = !0, s.playButton.input.useHandCursor = !0, s.playButton.visible = !1, s.group.add(s.logo), s.group.add(s.loadingBg), s.group.add(s.loadingBar.sprite), s.group.add(s.playButton), s.game.onBlur.add(s.onBlur, s), s.game.onFocus.add(s.onFocus, s), s } return __extends(i, e), i.prototype.showPlayButton = function() { this.loadingBg.visible = !1, this.loadingBar.sprite.visible = !1, this.playButton.visible = !0, this.playButton.events.onInputUp.addOnce(this.pressPlayButton, this), this.tween = this.game.add.tween(this.playButton.scale).to({ x: 1.1, y: 1.1 }, 500, Phaser.Easing.Back.Out, !0, 1e3, 0, !0), this.tween.repeat(-1, 800) }, i.prototype.pressPlayButton = function() { void 0 !== this.gameObject.pressPlayButton && this.gameObject.pressPlayButton() }, i.prototype.setPercent = function(t) { this.loadingBar.setPercent(t) }, i.prototype.resize = function() { var t = new Phaser.Point(this.game.width / 2, this.game.height / 2);
            this.playButton.position.set(t.x + 20, t.y + 200), this.logo.position.set(t.x, t.y - 55), this.loadingBg.position.set(t.x, t.y + 150), this.loadingBar.sprite.position.set(t.x - this.loadingBg.width / 2, t.y + 98 + 75) }, i.prototype.onBlur = function() { this.tween && this.tween.pause() }, i.prototype.onFocus = function() { this.tween && this.tween.resume() }, i.prototype.destroy = function() { this.group.remove(this.logo), this.group.remove(this.loadingBg), this.group.remove(this.loadingBar.sprite), this.game.onBlur.remove(this.onBlur, this), this.game.onFocus.remove(this.onFocus, this), this.tween && this.tween.stop(), this.group = null, this.logo.destroy(), this.logo = null, this.loadingBg.destroy(), this.loadingBg = null, this.componentMgr.removeComponent(this.loadingBar), this.componentMgr = null, e.prototype.destroy.call(this) }, i }(Ph2.Component);
    t.LoadingCN = e }(GameCommands || (GameCommands = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameCommands;
! function(t) { var e;! function(t) { t[t.EXIT = 0] = "EXIT", t[t.RESTART = 1] = "RESTART" }(e = t.CONFIRMATIONTYPE || (t.CONFIRMATIONTYPE = {})); var i = function(i) {
        function n(t) { var e = i.call(this, t.game) || this; return e.controller = t, e.ui = e.game.add.ph2UI("ui_confirmation", "atlas_ui_popups"), e.selectSprite = new Phaser.Sprite(e.game, 0, 0, "atlas_ui_level_select", "hl_mid.png"), e.selectSprite.anchor.set(.5, .5), e.btnYes = Ph2.UISystem.findObject("yes", e.ui), e.btnNo = Ph2.UISystem.findObject("no", e.ui), e.textDescription = [], e.textDescription[0] = Ph2.UISystem.findObject("container/description1", e.ui), e.textDescription[1] = Ph2.UISystem.findObject("container/description2", e.ui), e.game.device.desktop || (e.selectSprite.visible = !1), e.add(e.selectSprite), e.add(e.ui), e.addTouchCallback(), e.addKeysControl(), e.hide(), e.addTouchCallback(), e.localization(), e } return __extends(n, i), n.prototype.localization = function() { this.textDescription[0].loadTexture("atlas_texts_commands"), this.textDescription[0].frameName = "ui_confirmation_text1.png", this.textDescription[1].loadTexture("atlas_texts_commands"), this.textDescription[1].frameName = "ui_confirmation_text2.png" }, n.prototype.addTouchCallback = function() { t.Util.addTouchCallbackToButton("yes", this.ui, this.pressYesBtn, this), t.Util.addTouchCallbackToButton("no", this.ui, this.pressNoBtn, this) }, n.prototype.addKeysControl = function() { this.keyYes = this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER), this.keyNo = this.game.input.keyboard.addKey(Phaser.Keyboard.ESC) }, n.prototype.enableAllInput = function() { t.Util.enableTouch("yes", this.ui), t.Util.enableTouch("no", this.ui), t.Instances.controlButtonUI.onChangeButton.add(this.setSelectButton, this), this.keyYes.onDown.add(this.onSelectButton, this), this.keyNo.onDown.add(this.pressNoBtn, this) }, n.prototype.disableAllInput = function() { t.Util.disableTouch("yes", this.ui), t.Util.disableTouch("no", this.ui), t.Instances.controlButtonUI.onChangeButton.remove(this.setSelectButton, this), this.keyYes.onDown.removeAll(this), this.keyNo.onDown.removeAll(this) }, n.prototype.setSelectButton = function() { switch (this.selectSprite.visible = !0, t.Instances.controlButtonUI.actualButton) {
                case "none":
                    this.selectSprite.visible = !1; break;
                case "buttonYes":
                    this.selectSprite.x = this.btnYes.x, this.selectSprite.y = this.btnYes.y; break;
                case "buttonNo":
                    this.selectSprite.x = this.btnNo.x, this.selectSprite.y = this.btnNo.y } this.selectSprite.frameName = t.Instances.controlButtonUI.getHightLight() }, n.prototype.onSelectButton = function() { switch (t.Instances.controlButtonUI.actualButton) {
                case "none":
                case "buttonYes":
                    this.pressYesBtn(); break;
                case "buttonNo":
                    this.pressNoBtn() } }, n.prototype.pressYesBtn = function() { this.disableAllInput(), t.Audios.playSfx(this.game, "generic_button"), this.typeConfirmation === e.RESTART ? this.controller.restartLevel() : this.controller.goToLevelSelect() }, n.prototype.pressNoBtn = function() { this.hide(), this.disableAllInput(), t.Audios.playSfx(this.game, "generic_button"), this.controller.closeConfirmation() }, n.prototype.show = function(i) { t.Audios.playSfx(this.game, "popup"), t.Instances.controlButtonUI.initControl("uiConfirmation"), this.setSelectButton(), this.typeConfirmation = i, this.typeConfirmation === e.RESTART ? (this.textDescription[0].visible = !1, this.textDescription[1].visible = !0) : (this.textDescription[0].visible = !0, this.textDescription[1].visible = !1), this.enableAllInput(), this.visible = !0 }, n.prototype.hide = function() { this.disableAllInput(), this.visible = !1 }, n }(Phaser.Group);
    t.UIConfirmation = i }(GameCommands || (GameCommands = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameCommands;
! function(t) { var e;! function(t) { t[t.intro = 0] = "intro", t[t.end = 1] = "end" }(e = t.COMICID || (t.COMICID = {})); var i = function(i) {
        function n(t, e) { var n = i.call(this, t.game) || this;
            n.controller = t, n.id = e, n.tweens = [], n.ui = n.game.add.ph2UI("ui_comic", "atlas_comic"), n.btnPlay = Ph2.UISystem.findObject("play", n.ui); var s = Ph2.UISystem.findObject("play", n.ui); return n.animButton = n.game.add.ph2AnimationObject(0, 0, "play_main", "atlas_ui_main_menu_new"), s.addChild(n.animButton), n.animButton.visible = !1, n.btnAudio = Ph2.UISystem.findObject("sound", n.ui), n.btnAudio.visible = !1, n.buttonSprite = Ph2.AnimationSystem.findObject("base", n.animButton), n.buttonSprite.inputEnabled = !0, n.selectSprite = new Phaser.Sprite(n.game, 0, 0, "atlas_ui_level_select", "hl_mid.png"), n.selectSprite.anchor.set(.5, .5), n.timerSound = n.game.time.create(!1), n.addComic(), n.ui.addChild(n.selectSprite), n.ui.bringToTop(n.btnPlay), n.add(n.comic), n.add(n.ui), n.addTouchCallback(), n.addKeysControl(), n.disableAllInput(), n.checkFixIOS(), n } return __extends(n, i), n.prototype.checkFixIOS = function() { if (t.Constants.IOS_BUTTON_PATCH) { var e = void 0;
                (e = Ph2.UISystem.findObject("sound", this.ui)).y += 30, e.alignment.setLandscapeAlignment("TOP_RIGHT", -4.4, !0, -30.5, !0), (e = Ph2.UISystem.findObject("play", this.ui)).y -= 10, e.alignment.setLandscapeAlignment("BOTTOM_RIGHT", 6, !0, 17.4, !0) } }, n.prototype.addKeysControl = function() { this.keyStart = this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER) }, n.prototype.addComic = function() { this.id === e.intro ? (this.comic = this.game.add.ph2AnimationObject(0, 0, "comic_intro", "atlas_comic"), this.timerSound.add(100, this.playIntroStripComic, this), this.timerSound.add(933, this.playIntroStripComic, this)) : (this.comic = this.game.add.ph2AnimationObject(0, 0, "comic_final", "atlas_comic"), this.timerSound.add(100, this.playIntroStripComic, this), this.timerSound.add(933, this.playIntroStripComic, this), this.timerSound.add(1600, this.playIntroStripComic, this)), this.comic.x = this.game.width / 2, this.comic.y = this.game.height / 2 }, n.prototype.addTouchCallback = function() { this.buttonSprite.events.onInputDown.add(this.pressPlayBtn, this), t.Util.addTouchCallbackToButton("sound", this.ui, this.switchAudio, this) }, n.prototype.playIntroStripComic = function() { t.Audios.playSfxComic(this.game) }, n.prototype.setSelectButton = function() { switch (this.selectSprite.visible = !0, t.Instances.controlButtonUI.actualButton) {
                case "buttonPlay":
                    this.selectSprite.x = this.btnPlay.x, this.selectSprite.y = this.btnPlay.y, this.selectSprite.scale.set(.7, .7); break;
                case "buttonAudio":
                    this.selectSprite.x = this.btnAudio.x, this.selectSprite.y = this.btnAudio.y, this.selectSprite.scale.set(1, 1); break;
                case "none":
                    this.selectSprite.visible = !1 } this.selectSprite.frameName = t.Instances.controlButtonUI.getHightLight() }, n.prototype.onSelectButton = function() { switch (t.Instances.controlButtonUI.actualButton) {
                case "buttonPlay":
                    this.pressPlayBtn(); break;
                case "buttonAudio":
                    this.switchAudio(); break;
                case "none":
                    this.pressPlayBtn() } }, n.prototype.switchAudio = function() { t.Audios.playSfx(this.game, "generic_button"); var e = this.controller.switchAudio();
            this.setButtonAudio(e) }, n.prototype.setButtonAudio = function(e) {!0 === e ? (t.Audios.enableAudio(this.game), this.btnAudio.setFrames("sound1.png", "sound1.png", "sound1_press.png", "sound1.png")) : (t.Audios.disableAudio(this.game), this.btnAudio.setFrames("sound2.png", "sound2.png", "sound2_press.png", "sound2.png")) }, n.prototype.showComic = function() { this.resize(), t.Instances.controlButtonUI.initControl("uiMainMenu"), t.Instances.controlButtonUI.onChangeButton.add(this.setSelectButton, this); var i = this.id === e.intro ? "comic_intro_play2" : "comic_final_play2",
                n = this.comic.ph2Animations.play(i, 1, !1);
            this.timerSound.start(), n.onComplete.addOnce(this.onEndshowComic, this) }, n.prototype.onEndshowComic = function() { this.animButton.visible = !0, this.btnAudio.visible = !0, this.animButton.alpha = 0, this.btnAudio.alpha = 0, this.tweens = []; var e;
            (e = this.game.add.tween(this.animButton).to({ alpha: 1 }, 300, "Linear", !0)).onComplete.add(this.onEndShowButtons, this), this.tweens.push(e), e = this.game.add.tween(this.btnAudio).to({ alpha: 1 }, 300, "Linear", !0), this.tweens.push(e), this.setButtonAudio(t.Instances.dataManager.getAudio()), this.setSelectButton() }, n.prototype.onEndShowButtons = function() { this.animButton.ph2Animations.play("play_anim", 1, !0), this.tweens = [], this.enableAllInput(), t.Instances.controlButtonUI.addControl(this.game) }, n.prototype.enableAllInput = function() { this.keyStart.onDown.add(this.onSelectButton, this), this.buttonSprite.inputEnabled = !0 }, n.prototype.disableAllInput = function() { this.keyStart.onDown.remove(this.onSelectButton, this), this.buttonSprite.inputEnabled = !1, this.selectSprite.visible = !1 }, n.prototype.pressPlayBtn = function() { this.disableAllInput(), t.Audios.playSfx(this.game, "play_button"), this.animButton.ph2Animations.play("play_anim_press", 1, !1).onComplete.addOnce(this.hideComic, this) }, n.prototype.hideComic = function() { var t = this.id === e.intro ? "comic_intro_out2" : "comic_final_out2";
            this.comic.ph2Animations.play(t, 1, !1).onComplete.addOnce(this.onEndPlayBtnAnim, this) }, n.prototype.onEndPlayBtnAnim = function() { this.controller.endShowComic() }, n.prototype.onBlur = function() { this.animButton.ph2Animations.pause(), this.comic.ph2Animations.pause(), this.timerSound.pause(); for (var t = 0, e = this.tweens; t < e.length; t++) e[t].pause() }, n.prototype.onFocus = function() { this.animButton.ph2Animations.resume(), this.comic.ph2Animations.resume(), this.timerSound.resume(); for (var t = 0, e = this.tweens; t < e.length; t++) e[t].resume() }, n.prototype.resize = function() { this.comic.x = this.game.width / 2, this.comic.y = this.game.height / 2, this.game.width < 960 ? (this.comic.scale.x = this.game.width / 960, this.comic.scale.y = this.game.width / 960) : (this.comic.scale.x = 1, this.comic.scale.y = 1) }, n.prototype.destroy = function() { t.Instances.controlButtonUI.removeControl(this.game), t.Instances.controlButtonUI.onChangeButton.remove(this.setSelectButton, this), i.prototype.destroy.call(this) }, n }(Phaser.Group);
    t.UIComic = i }(GameCommands || (GameCommands = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameCommands;
! function(t) { var e;! function(t) { t[t.title = 0] = "title", t[t.description = 1] = "description" }(e || (e = {})); var i = function(e) {
        function i(t) { var i = e.call(this, t.game) || this; return i.controller = t, i.ui = i.game.add.ph2UI("ui_final_message", "atlas_ui_popups"), i.tweenShow = null, i.tweenHide = null, i.decor = i.game.add.ph2AnimationObject(0, 0, "shine", "atlas_ui_popups"), Ph2.UISystem.findObject("final_base/shine_pivot", i.ui).addChild(i.decor), i.add(i.ui), i.visible = !1, i.isShow = !1, i.localization(), i.addKeysControl(), i.addTouchCallback(), i } return __extends(i, e), i.prototype.addTouchCallback = function() { t.Util.addTouchCallbackToButton("yes", this.ui, this.pressContinue, this) }, i.prototype.addKeysControl = function() { this.keyStart = this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER) }, i.prototype.localization = function() { var t;
            (t = Ph2.UISystem.findObject("final_base/final_container/final_message1", this.ui)).loadTexture("atlas_texts_commands"), t.frameName = "final_message1.png", (t = Ph2.UISystem.findObject("final_base/final_container/final_message2", this.ui)).loadTexture("atlas_texts_commands"), t.frameName = "final_message2.png" }, i.prototype.show = function() { this.enableAllInput(), this.decor.ph2Animations.play("final_message_anim", 1, !0), this.visible = !0, this.isShow = !0 }, i.prototype.animOut = function() { this.tweenHide = this.game.add.tween(this.ui).to({ y: this.game.height + 200 }, 300, Phaser.Easing.Linear.None, !0), this.tweenHide.onComplete.addOnce(this.hide, this) }, i.prototype.pressContinue = function() { this.hide(), this.disableAllInput(), t.Audios.playSfx(this.game, "generic_button") }, i.prototype.enableAllInput = function() { this.keyStart.onDown.add(this.pressContinue, this), t.Util.enableTouch("yes", this.ui) }, i.prototype.disableAllInput = function() { this.keyStart.onDown.remove(this.pressContinue, this), t.Util.disableTouch("yes", this.ui) }, i.prototype.hide = function() { this.isShow = !1, this.decor.ph2Animations.destroy(), this.decor = null, this.visible = !1 }, i.prototype.pause = function() { this.decor && this.decor.ph2Animations.pause("final_message_anim") }, i.prototype.resume = function() { this.decor && this.decor.ph2Animations.resume("final_message_anim") }, i }(Phaser.Group);
    t.UIFinalMessage = i }(GameCommands || (GameCommands = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameCommands;
! function(t) { var e = function(e) {
        function i(t, i) { var n = e.call(this, t.game) || this;
            n.controller = t, n.commandButtons = [], n.commandLights = [], n.obstaclesCount = i, n.commands = [], n.ui = n.game.add.ph2UI("ui_gameplay", "atlas_ui_gameplay"); var s, o, a;
            n.tweensButton = [], n.tweensLight = [], n.buttonShines = [], n.tweenClock = null, n.animCompleted = null, n.needCompletedAnim = !1, n.lastpercent = 1; for (var r = 0; r < 4; r++) a = n.game.add.ph2AnimationObject(0, 0, "button_shine", "atlas_ui_gameplay"), n.buttonShines.push(a), o = Ph2.UISystem.findObject("button" + r, n.ui), n.commandButtons.push(o), o.addChild(a), s = Ph2.UISystem.findObject("button" + r + "_light", n.ui), n.commandLights.push(s), n.tweensButton.push(null), n.tweensLight.push(null); return n.timeContainer = Ph2.UISystem.findObject("bar_bg", n.ui), n.timeSprite = Ph2.UISystem.findObject("bar_bg/bar_front", n.ui), n.pivotAnim = Ph2.UISystem.findObject("level_container/pivot", n.ui), n.checkSprite = Ph2.UISystem.findObject("level_container/check", n.ui), n.checkSprite.visible = !1, n.graphicClock = new Phaser.Graphics(n.game), n.graphicClock.beginFill(65280, 1), n.graphicClock.arc(0, 0, 62, Phaser.Math.degToRad(275), Phaser.Math.degToRad(-85), !0), n.graphicClock.endFill(), n.timeContainer.addChild(n.graphicClock), n.timeContainer.swapChildren(n.graphicClock, n.timeSprite), n.shine = n.game.add.ph2AnimationObject(0, 0, "bar_shine", "atlas_ui_gameplay"), n.timeContainer.addChild(n.shine), n.barFrontGroup = n.game.add.ph2AnimationObject(0, 0, "bar", "atlas_ui_gameplay"), n.timeSprite.addChild(n.barFrontGroup), n.textObstacles = Ph2.UISystem.findObject("level_container/level", n.ui), n.setObstacle(0), n.distanceCommand = 143.6, n.centerCommandX = n.game.width / 2, n.timerSong = n.game.time.create(!1), n.add(n.ui), n.addTouchCallback(), n.addKeysControl(), n.hideCommands(), n.checkFixIOS(), n } return __extends(i, e), i.prototype.checkFixIOS = function() { if (t.Constants.IOS_BUTTON_PATCH) { var e = void 0;
                (e = Ph2.UISystem.findObject("pause", this.ui)).y += 30, e.alignment.setLandscapeAlignment("TOP_RIGHT", -22, !0, -42.6, !0) } }, i.prototype.addTouchCallback = function() { for (var e = 0; e < 4; e++) t.Util.addTouchCallbackToButton("button" + e, this.ui, this.selectCommand, this, 0, e);
            t.Util.addTouchCallbackToButton("pause", this.ui, this.pressPause, this) }, i.prototype.addKeysControl = function() { var t;
            this.keyCommands = [], t = this.game.input.keyboard.addKey(Phaser.Keyboard.ONE), this.keyCommands.push(t), t = this.game.input.keyboard.addKey(Phaser.Keyboard.TWO), this.keyCommands.push(t), t = this.game.input.keyboard.addKey(Phaser.Keyboard.THREE), this.keyCommands.push(t), t = this.game.input.keyboard.addKey(Phaser.Keyboard.FOUR), this.keyCommands.push(t), this.keyPause = this.game.input.keyboard.addKey(Phaser.Keyboard.ESC), this.keyPause.onDown.add(this.pressPause, this) }, i.prototype.showCommands = function(t) { this.commands = t; var e;
            e = t.length % 2 == 0 ? t.length / 2 * -this.distanceCommand + this.centerCommandX + this.distanceCommand / 2 : (t.length - 2) * -this.distanceCommand + this.centerCommandX, this.enablecommandContainerInput(), this.timeContainer.visible = !0, this.timeContainer.alpha = 1; for (var i, n = 0, s = t.length; n < s; n++) i = this.searchKeyCommand(t[n]), this.commandButtons[n].setFrames(i + "_0.png", i + "_0.png", i + "_2.png", i + "_0.png"), this.commandButtons[n].x = e + n * this.distanceCommand, this.commandLights[n].x = e + n * this.distanceCommand, this.keyCommands[n].onDown.add(this.selectCommandKey, this, 0, n), null !== this.tweensButton[n] && this.tweensButton[n].stop(), this.commandButtons[n].scale.set(0, 0), this.tweensButton[n] = this.game.add.tween(this.commandButtons[n].scale).to({ x: 1.1, y: 1.1 }, 200, "Linear", !1, 200 * n).to({ x: .9, y: .9 }, 100, "Linear").to({ x: 1, y: 1 }, 100, "Linear").start(), this.tweensButton[n].onComplete.addOnce(this.animShineButton, this, 0, n), null !== this.tweensLight[n] && this.tweensLight[n].stop(), this.commandLights[n].scale.set(0, 0), this.tweensLight[n] = this.game.add.tween(this.commandLights[n].scale).to({ x: 1.1, y: 1.1 }, 200, "Linear", !1, 200 * n).to({ x: .9, y: .9 }, 100, "Linear").to({ x: 1, y: 1 }, 100, "Linear").start(), this.commandButtons[n].visible = !0, this.commandLights[n].visible = !0;
            this.shine.ph2Animations.play("bar_shine_anim", 1, !0), this.barFrontGroup.ph2Animations.play("bar_anim_green", 1, !0) }, i.prototype.startTimerSong = function() { var e = t.ConfigGame.maxTimeTicTactClockSFX,
                i = t.ConfigGame.minTimeTicTactClockSFX;
            e * (1 - this.lastpercent) > i && this.lastpercent;
            this.timerSong.add(e, this.playSongTime, this), this.timerSong.start() }, i.prototype.stopTimerSong = function() { this.timerSong.stop(!1) }, i.prototype.playSongTime = function() { var e = t.ConfigGame.maxTimeTicTactClockSFX,
                i = t.ConfigGame.minTimeTicTactClockSFX,
                n = e * (1 - this.lastpercent) > i ? e * (1 - this.lastpercent) : i;
            this.timerSong.add(n, this.playSongTime, this), t.Audios.playSfxTicTac(this.game) }, i.prototype.animShineButton = function(t, e, i) { this.buttonShines[i].ph2Animations.play("button_shine_play") }, i.prototype.searchKeyCommand = function(e) { for (var i = 0, n = t.ConfigGame.commands; i < n.length; i++) { var s = n[i]; if (s.name === e) return s.key } }, i.prototype.enablecommandContainerInput = function() { for (t = 0; t < 4; t++) this.commandButtons[t].inputEnabled = !0; for (var t = 0; t < 4; t++) this.keyCommands[t].enabled = !0 }, i.prototype.disableCommandsContainerInput = function() { for (t = 0; t < 4; t++) this.commandButtons[t].inputEnabled = !1; for (var t = 0; t < 4; t++) this.keyCommands[t].enabled = !1 }, i.prototype.disablecommandContainerInput = function(t) { this.commandButtons[t].inputEnabled = !1, this.keyCommands[t].enabled = !1 }, i.prototype.enableAllInput = function() { t.Util.enableTouch("pause", this.ui), this.keyPause.onDown.add(this.pressPause, this) }, i.prototype.disableAllInput = function() { t.Util.disableTouch("pause", this.ui), this.keyPause.onDown.removeAll(this) }, i.prototype.selectCommandKey = function(t, e) { for (var i = 0; i < 4; i++) this.keyCommands[i].onDown.removeAll(this);
            this.disableCommandsContainerInput(), this.controller.selectCommand(this.commands[e], e) }, i.prototype.selectCommand = function(e, i, n, s) { for (var o = s[0], a = 0; a < 4; a++) this.keyCommands[a].onDown.removeAll(this);
            t.Audios.playSfx(this.game, "generic_button"), this.disableCommandsContainerInput(), this.shine.ph2Animations.stop("bar_shine_anim"), this.barFrontGroup.ph2Animations.stop("bar_anim_green"), this.controller.selectCommand(this.commands[o], o) }, i.prototype.addAnimation = function(t, e) { var i = this.searchKeyCommand(this.commands[e]),
                n = t ? "good" : "bad";
            this.animGroup = this.game.add.ph2AnimationObject(this.commandButtons[e].x, this.commandButtons[e].y, n, "atlas_ui_gameplay"), this.animGroup.ph2Animations.play("button_play", 1, !1).onComplete.addOnce(this.completeButtonAnim, this), t || this.commandButtons[e].setFrames(i + "_1.png", i + "_1.png", i + "_2.png", i + "_1.png"), this.ui.addChild(this.animGroup), this.ui.sendToBack(this.animGroup) }, i.prototype.completeButtonAnim = function() { this.animGroup.destroy(), this.animGroup = null, this.hideCommands(!0) }, i.prototype.playAnimGoodCommand = function(t) { this.addAnimation(!0, t) }, i.prototype.playAnimBadCommand = function(t) { this.addAnimation(!1, t) }, i.prototype.setTime = function(e, i) { var n = e / i;
            1 - n < t.ConfigGame.percentTimeAlert && 1 - this.lastpercent >= t.ConfigGame.percentTimeAlert && t.Audios.playSfx(this.game, "alert"), this.lastpercent = n, this.shine.x = 55 * Math.cos(Phaser.Math.degToRad(360 * n - 85)), this.shine.y = 55 * Math.sin(Phaser.Math.degToRad(360 * n - 85)), this.graphicClock.clear(), this.graphicClock.beginFill(65280, 1), this.graphicClock.arc(0, 0, 60, Phaser.Math.degToRad(275), Phaser.Math.degToRad(360 * n - 85), !0), this.graphicClock.endFill() }, i.prototype.setObstacle = function(t) { this.tweenCount = this.game.add.tween(this.textObstacles.scale).to({ x: 1.2, y: 1.2 }, 300, "Linear", !0), this.tweenCount.onComplete.addOnce(this.endTweenCount1, this, 0, t) }, i.prototype.endTweenCount1 = function(t, e, i) { this.textObstacles.text = i + "/" + this.obstaclesCount, this.tweenCount = this.game.add.tween(this.textObstacles.scale).to({ x: 1, y: 1 }, 300, "Linear", !0), this.tweenCount.onComplete.addOnce(this.endTweenCount2, this) }, i.prototype.endTweenCount2 = function(e, i, n) { this.needCompletedAnim && (t.Audios.playSfx(this.game, "stage_completed"), this.animCompleted = this.game.add.ph2AnimationObject(0, 0, "circle", "atlas_ui_gameplay"), this.animCompleted.ph2Animations.play("circle_check", 1, !1), this.pivotAnim.add(this.animCompleted), this.textObstacles.visible = !1, this.checkSprite.visible = !0) }, i.prototype.playCompletedAnim = function() { this.needCompletedAnim = !0 }, i.prototype.hideCommands = function(t) { if (void 0 === t && (t = !1), t) { this.tweenClock = this.game.add.tween(this.timeContainer).to({ alpha: 0 }, 150, "Linear").start(); for (var e = 0, i = this.commandButtons.length; e < i; e++) this.buttonShines[e].ph2Animations.stop("button_shine_play"), null !== this.tweensButton[e] && this.tweensButton[e].stop(), this.tweensButton[e] = this.game.add.tween(this.commandButtons[e]).to({ alpha: 0 }, 150, "Linear").start(), this.tweensButton[e].onComplete.addOnce(this.hideGroup, this), null !== this.tweensLight[e] && this.tweensLight[e].stop(), this.commandLights[e].scale.set(0, 0), this.tweensLight[e] = this.game.add.tween(this.commandLights[e].scale).to({ alpha: 0 }, 150, "Linear").start(), this.tweensLight[e].onComplete.addOnce(this.hideGroup, this) } else { this.timeContainer.visible = !1; for (var n = 0, s = this.commandButtons; n < s.length; n++)(r = s[n]).visible = !1; for (var o = 0, a = this.commandLights; o < a.length; o++) { var r = a[o];
                    r.visible = !1 } } for (e = 0; e < 4; e++) this.keyCommands[e].onDown.removeAll(this) }, i.prototype.hideGroup = function(t) { t.visible = !1, t.alpha = 1 }, i.prototype.pressPause = function() { t.Audios.playSfx(this.game, "generic_button"), this.controller.pressPause() }, i.prototype.resize = function() { this.centerCommandX = this.game.width / 2; var t;
            t = this.commands.length % 2 == 0 ? this.commands.length / 2 * -this.distanceCommand + this.centerCommandX + this.distanceCommand / 2 : (this.commands.length - 2) * -this.distanceCommand + this.centerCommandX; for (var e = 0, i = this.commands.length; e < i; e++) this.commandButtons[e].x = t + e * this.distanceCommand, this.commandLights[e].x = t + e * this.distanceCommand }, i.prototype.destroy = function() { this.shine.ph2Animations.stop("bar_shine_anim"), this.barFrontGroup.ph2Animations.stop("bar_anim_green"); for (var t = 0, i = this.commandButtons.length; t < i; t++) this.buttonShines[t].ph2Animations.stop("button_shine_play"), this.buttonShines[t].destroy();
            this.timerSong.stop(!0), this.shine.destroy(), this.barFrontGroup.destroy(), this.buttonShines = [], this.shine = null, this.barFrontGroup = null, e.prototype.destroy.call(this) }, i.prototype.pause = function() { for (var t = 0, e = this.commandButtons.length; t < e; t++) null !== this.tweensButton[t] && this.tweensButton[t].pause(), null !== this.tweensLight[t] && this.tweensLight[t].pause(); for (var t = 0, e = this.commandButtons.length; t < e; t++) this.buttonShines[t].ph2Animations.pause("button_shine_play");
            this.timerSong.pause(), this.tweenClock && this.tweenClock.pause(), this.animCompleted && this.animCompleted.ph2Animations.pause(), this.tweenCount && this.tweenCount.pause(), this.timerSong.pause(), this.shine.ph2Animations.pause("bar_shine_anim"), this.barFrontGroup.ph2Animations.pause("bar_anim_green") }, i.prototype.resume = function() { for (var t = 0, e = this.commandButtons.length; t < e; t++) null !== this.tweensButton[t] && this.tweensButton[t].resume(), null !== this.tweensLight[t] && this.tweensLight[t].resume(); for (var t = 0, e = this.commandButtons.length; t < e; t++) this.buttonShines[t].ph2Animations.resume("button_shine_play");
            null !== this.tweenClock && this.tweenClock.resume(), this.animCompleted && this.animCompleted.ph2Animations.resume(), this.tweenCount && this.tweenCount.resume(), this.timerSong.resume(), this.shine.ph2Animations.resume("bar_shine_anim"), this.barFrontGroup.ph2Animations.resume("bar_anim_green") }, i }(Phaser.Group);
    t.UIGameplay = e }(GameCommands || (GameCommands = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameCommands;
! function(t) { var e = function(e) {
        function i(i) { var n = e.call(this, i.game) || this; return n.controller = i, n.commandContainers = [], n.selectLevelIndex = 0, n.ui = n.game.add.ph2UI("ui_level_selection", "atlas_ui_level_select"), n.selectSprite = new Phaser.Sprite(n.game, 0, 0, "atlas_ui_level_select", "hl_mid.png"), n.selectSprite.anchor.set(.5, .5), n.game.device.desktop || (n.selectSprite.visible = !1), n.levelCharacterAnimation = n.game.add.ph2AnimationObject(0, 0, "cannonbolt2", "atlas_ui_level_select"), n.levelCharacterAnimation.visible = !1, n.levelSelectAnimation = n.game.add.ph2AnimationObject(0, 0, "lvl_select", "atlas_ui_level_select"), n.levelSelectAnimation.ph2Animations.play("lvl_loop"), n.ui.addChild(n.levelSelectAnimation), n.ui.sendToBack(n.levelSelectAnimation), n.chargeAnimation = n.game.add.ph2AnimationObject(0, 0, "charge_level", "atlas_ui_level_select"), n.chargeAnimation.visible = !1, n.add(n.selectSprite), n.add(n.ui), n.btnHome = Ph2.UISystem.findObject("back", n.ui), n.btnAudio = Ph2.UISystem.findObject("sound", n.ui), n.btnHome.loadTexture("atlas_ui_level_select"), n.btnHome.setFrames("main.png", "main.png", "main_press.png", "main.png"), n.localization(), n.addTouchCallback(), n.addKeysControl(), n.disableAllInput(), n.setButtonAudio(t.Instances.dataManager.getAudio()), n.checkFixIOS(), n } return __extends(i, e), i.prototype.checkFixIOS = function() { if (t.Constants.IOS_BUTTON_PATCH) { var e = void 0;
                (e = Ph2.UISystem.findObject("back", this.ui)).y += 30, e.alignment.setLandscapeAlignment("TOP_LEFT", -7.6, !0, -21.6, !0), (e = Ph2.UISystem.findObject("sound", this.ui)).y += 30, e.alignment.setLandscapeAlignment("TOP_RIGHT", -5, !0, -31.5, !0) } }, i.prototype.localization = function() { var t = Ph2.UISystem.findObject("container/title", this.ui);
            t.loadTexture("atlas_texts_commands"), t.frameName = "ui_lvl_select_text.png" }, i.prototype.init = function() { t.Instances.controlButtonUI.initControl("uiLevelSelect"), this.createLevelBtn(), t.Instances.controlButtonUI.onChangeButton.add(this.setSelectButton, this), this.setSelectButton() }, i.prototype.initAnimation = function() { t.Instances.controlButtonUI.addControl(this.game), this.enableAllInput(), t.Instances.dataManager.getNeedAnimLevelAnim() ? (t.Instances.dataManager.getLevelCompelteded() < 8 ? this.addAnimation() : this.initAnimStep1(), t.Instances.dataManager.seeLevelUnlock()) : this.initAnimStep1() }, i.prototype.showFinalMessage = function() { this.levelSelectAnimation.visible = !1, this.levelSelectAnimation.ph2Animations.stop() }, i.prototype.endFinalMessage = function() { this.levelSelectAnimation.visible = !0, this.enableAllInput(), t.Instances.controlButtonUI.addControl(this.game), this.levelSelectAnimation.ph2Animations.play("lvl_loop") }, i.prototype.initAnimStep1 = function() { this.disableAllInput(); var e = t.Instances.dataManager.getLevelCompelteded() < 8 ? t.Instances.dataManager.getLevelCompelteded() : 7,
                i = Ph2.UISystem.findObject("stage" + String(e + 2), this.ui);
            this.levelCharacterAnimation.visible = !0, this.changeCharacterAnim(this.selectLevelIndex), this.levelCharacterAnimation.ph2Animations.play("character_play", 1, !1).onComplete.addOnce(this.initAnimStep2, this), i.addChild(this.levelCharacterAnimation) }, i.prototype.initAnimStep2 = function() { this.levelCharacterAnimation.ph2Animations.play("character_color_out").onComplete.addOnce(this.initAnimStep3, this) }, i.prototype.initAnimStep3 = function() { this.levelCharacterAnimation.visible = !1, this.enableAllInput(), t.Instances.controlButtonUI.addControl(this.game) }, i.prototype.addKeysControl = function() { this.keyStart = this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER), this.keyBack = this.game.input.keyboard.addKey(Phaser.Keyboard.ESC) }, i.prototype.setSelectButton = function() { switch (this.selectSprite.visible = !0, this.selectSprite.scale.set(1, 1), t.Instances.controlButtonUI.actualButton) {
                case "buttonBack":
                    this.selectSprite.scale.set(1.25, 1.25), this.selectSprite.x = this.btnHome.x, this.selectSprite.y = this.btnHome.y; break;
                case "buttonAudio":
                    this.selectSprite.x = this.btnAudio.x, this.selectSprite.y = this.btnAudio.y; break;
                case "none":
                    this.selectSprite.visible = !1; var e = t.Instances.dataManager.getLevelCompelteded(),
                        i = e < 0 ? 1 : e + 2;
                    i = 10 === i ? 9 : i, this.changeLevel(i - 1); break;
                default:
                    var n = parseInt(t.Instances.controlButtonUI.actualButton[t.Instances.controlButtonUI.actualButton.length - 1], 10),
                        s = Ph2.UISystem.findObject("stage" + String(n), this.ui);
                    this.selectSprite.x = s.x, this.selectSprite.y = s.y, this.selectSprite.scale.set(1, 1), this.changeLevel(n - 1) } this.selectSprite.frameName = t.Instances.controlButtonUI.getHightLight() }, i.prototype.onSelectButton = function() { switch (t.Instances.controlButtonUI.actualButton) {
                case "buttonBack":
                    this.pressHomeBtn(); break;
                case "none":
                    this.startSelectLevel(); break;
                case "buttonAudio":
                    this.switchAudio(); break;
                default:
                    this.startSelectLevel() } }, i.prototype.addAnimation = function() { var e = Ph2.UISystem.findObject("stage" + String(t.Instances.dataManager.getLevelCompelteded() + 2), this.ui);
            this.animGroup = this.game.add.ph2AnimationObject(0, 0, "stage", "atlas_ui_level_select"); var i = this.animGroup.ph2Animations.play("stage_anim", 1, !1);
            e.setFrames("level_0.png", "level_0.png", "level_0.png", "level_0.png"), t.Audios.playSfx(this.game, "level_unlocked"), i.onComplete.addOnce(this.completeUnlockAnimStep1, this), e.addChild(this.animGroup) }, i.prototype.completeUnlockAnimStep1 = function() { var e = Ph2.UISystem.findObject("stage" + String(t.Instances.dataManager.getLevelCompelteded() + 2), this.ui);
            this.animGroup.visible = !1, this.animGroup.destroy(), this.animGroup = null, this.changeCharacterAnim(this.selectLevelIndex), e.setFrames("level_2.png", "level_2.png", "level_2.png", "level_2.png"), this.levelCharacterAnimation.visible = !0, this.levelCharacterAnimation.ph2Animations.play("character_in", 1, !1).onComplete.addOnce(this.completeUnlockAnimStep2, this), e.addChild(this.levelCharacterAnimation) }, i.prototype.completeUnlockAnimStep2 = function() { this.levelCharacterAnimation.ph2Animations.play("character_change", 1, !1).onComplete.addOnce(this.completeUnlockAnimStep3, this) }, i.prototype.completeUnlockAnimStep3 = function() { this.levelCharacterAnimation.ph2Animations.play("character_play", 1, !1).onComplete.addOnce(this.completeUnlockAnimStep4, this) }, i.prototype.completeUnlockAnimStep4 = function() { this.levelCharacterAnimation.ph2Animations.play("character_color_out").onComplete.addOnce(this.completeUnlockAnimStep5, this) }, i.prototype.completeUnlockAnimStep5 = function() { this.levelCharacterAnimation.visible = !1, this.enableAllInput(), t.Instances.controlButtonUI.addControl(this.game) }, i.prototype.createLevelBtn = function() { var e, i = t.Instances.dataManager.getLevelCompelteded();
            this.levelCompleted = i; for (l = 0; l < 9; l++) e = Ph2.UISystem.findObject("stage" + String(l + 1), this.ui), Ph2.UISystem.findObject("stage" + String(l + 1) + "/stage", this.ui).setText(String(l + 1)), l <= i ? e.setFrames("level_1.png", "level_1.png", "level_1.png", "level_1.png") : l <= i + 1 ? e.setFrames("level_2.png", "level_2.png", "level_2.png", "level_2.png") : e.setFrames("level_0.png", "level_0.png", "level_0.png", "level_0.png"), this.commandContainers.push(e);
            t.Instances.controlButtonUI.setButton("none"); var n;
            n = i > -1 ? i < 4 ? i + 1 : 4 : -1; var s, o, a, r, h = i < 0 ? 1 : i + 2;
            h = 10 === h ? 9 : h; for (var l = 0; l < h; l++) s = 0 === l ? "buttonBack" : l === n ? "buttonAudio" : l > 4 ? "buttonlvl" + (l - 3) : null, r = l + 1 <= i + 1 && l + 2 < 10 ? "buttonlvl" + (l + 2) : null, a = l - 1 >= 0 ? "buttonlvl" + l : null, o = 0 === l && i >= 4 ? "buttonlvl6" : l <= 4 && i >= 4 && l + 4 <= i + 1 ? "buttonlvl" + (l + 5) : null, t.Instances.controlButtonUI.setButtonFlow("buttonlvl" + (l + 1), "select.png", s, o, a, r);
            t.Instances.controlButtonUI.setButtonFlow("none", "hl_mid.png", "buttonlvl" + h, "buttonlvl" + h, "buttonlvl" + h, "buttonlvl" + h), i >= 4 ? t.Instances.controlButtonUI.setButtonFlow("buttonAudio", "hl_mid.png", null, "buttonlvl5", "buttonBack", null) : i >= -1 && t.Instances.controlButtonUI.setButtonFlow("buttonAudio", "hl_mid.png", null, "buttonlvl" + (i + 2), "buttonBack", null) }, i.prototype.addTouchCallback = function() { t.Util.addTouchCallbackToButton("back", this.ui, this.pressHomeBtn, this), t.Util.addTouchCallbackToButton("sound", this.ui, this.switchAudio, this); for (var e = this, i = this, n = 0; n < 9; n++) ! function(n) { t.Util.addTouchCallbackToButton("stage" + String(n + 1), i.ui, function() { e.selectLevel(n) }, i) }(n) }, i.prototype.setButtonAudio = function(e) {!0 === e ? (t.Audios.enableAudio(this.game), this.btnAudio.setFrames("sound1.png", "sound1.png", "sound1_press.png", "sound1.png")) : (t.Audios.disableAudio(this.game), this.btnAudio.setFrames("sound2.png", "sound2.png", "sound2_press.png", "sound2.png")) }, i.prototype.switchAudio = function() { t.Audios.playSfx(this.game, "generic_button"); var e = this.controller.switchAudio();
            this.setButtonAudio(e) }, i.prototype.enableAllInput = function() { t.Util.enableTouch("back", this.ui), t.Util.enableTouch("sound", this.ui), this.keyStart.onDown.add(this.onSelectButton, this), this.keyBack.onDown.add(this.pressHomeBtn, this); for (var e = 0; e < this.commandContainers.length; e++) this.commandContainers[e].inputEnabled = !0 }, i.prototype.disableAllInput = function() { t.Util.disableTouch("back", this.ui), t.Util.disableTouch("sound", this.ui), this.keyStart.onDown.remove(this.onSelectButton, this), this.keyBack.onDown.remove(this.pressHomeBtn, this); for (var e = 0; e < this.commandContainers.length; e++) this.commandContainers[e].inputEnabled = !1 }, i.prototype.startSelectLevel = function() { this.selectLevel(this.selectLevelIndex) }, i.prototype.changeLevel = function(t) { var e = this.selectLevelIndex;
            this.selectLevelIndex = t, this.changeSelectLevel(e, this.selectLevelIndex) }, i.prototype.playLevel = function(t, e, i) { this.disableAllInput(), this.controller.selectLevel(i) }, i.prototype.changeSelectLevel = function(t, e) { var i;
            (i = Ph2.UISystem.findObject("stage" + String(t + 1), this.ui)).setFrames("level_1.png", "level_1.png", "level_1.png", "level_1.png"), (i = Ph2.UISystem.findObject("stage" + String(e + 1), this.ui)).setFrames("level_2.png", "level_2.png", "level_2.png", "level_2.png"), this.levelSelectAnimation.x = i.x, this.levelSelectAnimation.y = i.y }, i.prototype.selectLevel = function(e) { e > t.Instances.dataManager.getLevelCompelteded() + 1 || (this.disableAllInput(), this.changeLevel(e), t.Audios.playSfx(this.game, "generic_button"), this.animGroup && this.animGroup.ph2Animations.stop(), this.levelCharacterAnimation.ph2Animations.removeListeners("character_color_out"), this.levelCharacterAnimation.ph2Animations.removeListeners("character_play"), this.levelCharacterAnimation.ph2Animations.stop("character_color_out", !0, !1), this.levelCharacterAnimation.ph2Animations.stop("character_play", !0, !1), this.selectLevelAnimStep1()) }, i.prototype.selectLevelAnimStep1 = function() { this.changeCharacterAnim(this.selectLevelIndex); var t = Ph2.UISystem.findObject("stage" + String(this.selectLevelIndex + 1), this.ui);
            this.levelCharacterAnimation.visible = !0, this.levelCharacterAnimation.ph2Animations.play("character_play", 1, !1), t.addChild(this.levelCharacterAnimation), t.addChild(this.chargeAnimation); var e = this.chargeAnimation.ph2Animations.play("charge_play");
            this.chargeAnimation.visible = !0, e.onComplete.removeAll(this), e.onComplete.addOnce(this.playLevel, this, 0, this.selectLevelIndex) }, i.prototype.pressHomeBtn = function() { this.animGroup && this.animGroup.ph2Animations.stop("charge_play", !0, !1), this.levelCharacterAnimation.ph2Animations.removeListeners("character_color_out"), this.levelCharacterAnimation.ph2Animations.removeListeners("character_play"), this.levelCharacterAnimation.ph2Animations.stop("character_color_out", !0, !1), this.levelCharacterAnimation.ph2Animations.stop("character_play", !0, !1), this.disableAllInput(), t.Audios.playSfx(this.game, "generic_button"), this.controller.pressHome() }, i.prototype.changeCharacterAnim = function(e) { var i = Ph2.AnimationSystem.findObject("color", this.levelCharacterAnimation),
                n = Ph2.AnimationSystem.findObject("grey", this.levelCharacterAnimation); "xlr8" === t.ConfigGame.levels[e].player ? (i.frameName = "xlr8_1.png", n.frameName = "xlr8_2.png") : "four_arms" === t.ConfigGame.levels[e].player ? (i.frameName = "four_1.png", n.frameName = "four_2.png") : "cannonbolt" === t.ConfigGame.levels[e].player && (i.frameName = "cann_1.png", n.frameName = "cann_2.png") }, i.prototype.onBlur = function() { this.levelCharacterAnimation.ph2Animations.pause(), this.chargeAnimation.ph2Animations.pause(), this.levelSelectAnimation.ph2Animations.pause(), this.animGroup && this.animGroup.ph2Animations.pause() }, i.prototype.onFocus = function() { this.levelCharacterAnimation.ph2Animations.resume(), this.chargeAnimation.ph2Animations.resume(), this.levelSelectAnimation.ph2Animations.resume(), this.animGroup && this.animGroup.ph2Animations.resume() }, i.prototype.destroy = function() { this.game.onBlur.remove(this.onBlur, this), this.game.onFocus.remove(this.onFocus, this), t.Instances.controlButtonUI.removeControl(this.game), t.Instances.controlButtonUI.onChangeButton.remove(this.setSelectButton, this), this.chargeAnimation.ph2Animations.stop(), this.levelSelectAnimation.ph2Animations.stop(), this.levelCharacterAnimation.ph2Animations.stop(), this.chargeAnimation = null, this.levelSelectAnimation = null, this.levelCharacterAnimation = null, this.keyStart.onDown.remove(this.onSelectButton, this), this.keyBack.onDown.remove(this.pressHomeBtn, this), e.prototype.destroy.call(this) }, i }(Phaser.Group);
    t.UILevelSelect = e }(GameCommands || (GameCommands = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameCommands;
! function(t) { var e = function(e) {
        function i(i, n) { var s = e.call(this, i.game) || this; return s.controller = i, s.level = n, s.ui = s.game.add.ph2UI("ui_level_completed", "atlas_ui_popups"), s.selectSprite = new Phaser.Sprite(s.game, 0, 0, "atlas_ui_level_select", "hl_mid.png"), s.selectSprite.anchor.set(.5, .5), s.btnContinue = Ph2.UISystem.findObject("play", s.ui), s.btnRestart = Ph2.UISystem.findObject("retry", s.ui), s.btnAudio = Ph2.UISystem.findObject("sound", s.ui), s.animGroup = s.game.add.ph2AnimationObject(0, 0, "stage", "atlas_ui_popups"), s.game.device.desktop || (s.selectSprite.visible = !1), Ph2.UISystem.findObject("container/pivot", s.ui).addChild(s.animGroup), s.add(s.selectSprite), s.add(s.ui), s.hide(), s.localization(), s.setButtonAudio(t.Instances.dataManager.getAudio()), s.addTouchCallback(), s.addKeysControl(), s.checkFixIOS(), s } return __extends(i, e), i.prototype.checkFixIOS = function() { if (t.Constants.IOS_BUTTON_PATCH) { var e = void 0;
                (e = Ph2.UISystem.findObject("sound", this.ui)).y += 30, e.alignment.setLandscapeAlignment("TOP_RIGHT", -16.3, !0, -31.5, !0) } }, i.prototype.localization = function() { t.Instances.localization.localizeText("container/level", this.ui, String(this.level), !0); var e = Ph2.UISystem.findObject("container/title", this.ui);
            e.loadTexture("atlas_texts_commands"), e.frameName = "ui_lvl_completed_text.png" }, i.prototype.addTouchCallback = function() { t.Util.addTouchCallbackToButton("play", this.ui, this.pressContinueBtn, this), t.Util.addTouchCallbackToButton("sound", this.ui, this.switchAudio, this), t.Util.addTouchCallbackToButton("retry", this.ui, this.pressRestartBtn, this) }, i.prototype.addKeysControl = function() { this.keyStart = this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER) }, i.prototype.setButtonAudio = function(e) {!0 === e ? (t.Audios.enableAudio(this.game), this.btnAudio.setFrames("sound1.png", "sound1.png", "sound1_press.png", "sound1.png")) : (t.Audios.disableAudio(this.game), this.btnAudio.setFrames("sound2.png", "sound2.png", "sound2_press.png", "sound2.png")) }, i.prototype.switchAudio = function() { t.Audios.playSfx(this.game, "generic_button"); var e = this.controller.switchAudio();
            this.setButtonAudio(e) }, i.prototype.setSelectButton = function() { switch (this.selectSprite.visible = !0, t.Instances.controlButtonUI.actualButton) {
                case "none":
                    this.selectSprite.visible = !1; break;
                case "buttonPlay":
                    this.selectSprite.x = this.btnContinue.x, this.selectSprite.y = this.btnContinue.y, this.selectSprite.scale.set(.8, .8); break;
                case "buttonRestart":
                    this.selectSprite.x = this.btnRestart.x, this.selectSprite.y = this.btnRestart.y, this.selectSprite.scale.set(1, 1); break;
                case "buttonAudio":
                    this.selectSprite.x = this.btnAudio.x, this.selectSprite.y = this.btnAudio.y, this.selectSprite.scale.set(1, 1) } this.selectSprite.frameName = t.Instances.controlButtonUI.getHightLight() }, i.prototype.onSelectButton = function() { switch (t.Instances.controlButtonUI.actualButton) {
                case "none":
                case "buttonPlay":
                    this.pressContinueBtn(); break;
                case "buttonAudio":
                    this.switchAudio(); break;
                case "buttonRestart":
                    this.pressRestartBtn() } }, i.prototype.enableAllInput = function() { t.Util.enableTouch("play", this.ui), t.Util.enableTouch("sound", this.ui), t.Util.enableTouch("retry", this.ui), t.Instances.controlButtonUI.initControl("uiLevelCompleted"), this.setSelectButton(), t.Instances.controlButtonUI.onChangeButton.add(this.setSelectButton, this), this.keyStart.onDown.add(this.onSelectButton, this) }, i.prototype.disableAllInput = function() { t.Util.disableTouch("play", this.ui), t.Util.disableTouch("sound", this.ui), t.Util.disableTouch("retry", this.ui), t.Instances.controlButtonUI.onChangeButton.remove(this.setSelectButton, this), this.keyStart.onDown.removeAll(this) }, i.prototype.pressContinueBtn = function() { t.Audios.playSfx(this.game, "play_button"), this.disableAllInput(), this.hide(), this.controller.goToLevelSelect() }, i.prototype.pressRestartBtn = function() { t.Audios.playSfx(this.game, "generic_button"), this.disableAllInput(), this.hide(), this.controller.restartLevel() }, i.prototype.show = function() { this.animGroup.ph2Animations.play("stage_anim", 1, !1), this.visible = !0, this.enableAllInput() }, i.prototype.hide = function() { this.visible = !1 }, i.prototype.pause = function() { this.animGroup.ph2Animations.pause("stage_anim") }, i.prototype.resume = function() { this.animGroup.ph2Animations.resume("stage_anim") }, i }(Phaser.Group);
    t.UILevelCompleted = e }(GameCommands || (GameCommands = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameCommands;
! function(t) { var e = function(e) {
        function i(i) { var n = e.call(this, i.game) || this; return n.controller = i, n.ui = n.game.add.ph2UI("ui_pause", "atlas_ui_popups"), n.btnAudio = Ph2.UISystem.findObject("sound", n.ui), n.btnPlay = Ph2.UISystem.findObject("play", n.ui), n.btnExit = Ph2.UISystem.findObject("home", n.ui), n.btnTutorial = Ph2.UISystem.findObject("tutorial", n.ui), n.btnReplay = Ph2.UISystem.findObject("retry", n.ui), n.btnExit.loadTexture("atlas_comic2"), n.btnExit.setFrames("main.png", "main.png", " main_press.png", "main.png"), n.selectSprite = new Phaser.Sprite(n.game, 0, 0, "atlas_ui_level_select", "hl_mid.png"), n.selectSprite.anchor.set(.5, .5), n.game.device.desktop || (n.selectSprite.visible = !1), n.lastButton = "none", n.add(n.selectSprite), n.add(n.ui), n.addTouchCallback(), n.addKeysControl(), n.setButtonAudio(t.Instances.dataManager.getAudio()), n.localization(), n.hide(), n.checkFixIOS(), n } return __extends(i, e), i.prototype.checkFixIOS = function() { if (t.Constants.IOS_BUTTON_PATCH) { var e = void 0;
                (e = Ph2.UISystem.findObject("home", this.ui)).y += 30, e.alignment.setLandscapeAlignment("TOP_LEFT", -16.2, !0, -33.2, !0), (e = Ph2.UISystem.findObject("sound", this.ui)).y += 30, e.alignment.setLandscapeAlignment("TOP_RIGHT", -16.2, !0, -31.5, !0) } }, i.prototype.localization = function() { var t = Ph2.UISystem.findObject("container/title", this.ui);
            t.loadTexture("atlas_texts_commands"), t.frameName = "ui_pause_text.png" }, i.prototype.addTouchCallback = function() { t.Util.addTouchCallbackToButton("play", this.ui, this.pressResumeBtn, this), t.Util.addTouchCallbackToButton("sound", this.ui, this.switchAudio, this), t.Util.addTouchCallbackToButton("home", this.ui, this.pressExitBtn, this), t.Util.addTouchCallbackToButton("retry", this.ui, this.pressRestartBtn, this), t.Util.addTouchCallbackToButton("tutorial", this.ui, this.pressHowToPlayBtn, this) }, i.prototype.addKeysControl = function() { this.keyStart = this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER), this.keyHome = this.game.input.keyboard.addKey(Phaser.Keyboard.ESC) }, i.prototype.setSelectButton = function() { switch (this.selectSprite.visible = !0, t.Instances.controlButtonUI.actualButton) {
                case "none":
                    this.selectSprite.visible = !1; break;
                case "buttonPlay":
                    this.selectSprite.x = this.btnPlay.x, this.selectSprite.y = this.btnPlay.y, this.selectSprite.scale.set(1, 1); break;
                case "buttonHome":
                    this.selectSprite.x = this.btnExit.x, this.selectSprite.y = this.btnExit.y, this.selectSprite.scale.set(1, 1); break;
                case "buttonTutorial":
                    this.selectSprite.x = this.btnTutorial.x, this.selectSprite.y = this.btnTutorial.y, this.selectSprite.scale.set(1, 1); break;
                case "buttonRestart":
                    this.selectSprite.x = this.btnReplay.x, this.selectSprite.y = this.btnReplay.y, this.selectSprite.scale.set(1, 1); break;
                case "buttonAudio":
                    this.selectSprite.x = this.btnAudio.x, this.selectSprite.y = this.btnAudio.y, this.selectSprite.scale.set(1, 1) } this.selectSprite.frameName = t.Instances.controlButtonUI.getHightLight() }, i.prototype.onSelectButton = function() { switch (t.Instances.controlButtonUI.actualButton) {
                case "none":
                case "buttonPlay":
                    this.pressResumeBtn(); break;
                case "buttonAudio":
                    this.switchAudio(); break;
                case "buttonHome":
                    this.pressExitBtn(); break;
                case "buttonTutorial":
                    this.pressHowToPlayBtn(); break;
                case "buttonRestart":
                    this.pressRestartBtn() } }, i.prototype.show = function() { t.Audios.playSfx(this.game, "popup"), t.Instances.controlButtonUI.initControl("uiPause"), this.setSelectButton(), this.lastButton = "none", this.enableAllInput(), this.visible = !0 }, i.prototype.hide = function() { this.lastButton = "none", this.disableAllInput(), this.visible = !1 }, i.prototype.setButtonAudio = function(e) {!0 === e ? (t.Audios.enableAudio(this.game), this.btnAudio.setFrames("sound1.png", "sound1.png", "sound1_press.png", "sound1.png")) : (t.Audios.disableAudio(this.game), this.btnAudio.setFrames("sound2.png", "sound2.png", "sound2_press.png", "sound2.png")) }, i.prototype.switchAudio = function() { t.Audios.playSfx(this.game, "generic_button"); var e = this.controller.switchAudio();
            this.setButtonAudio(e) }, i.prototype.pressResumeBtn = function() { t.Audios.playSfx(this.game, "generic_button"), this.hide(), this.controller.pressResume() }, i.prototype.pressRestartBtn = function() { t.Audios.playSfx(this.game, "generic_button"), this.disableAllInput(), this.controller.pressRestart() }, i.prototype.pressExitBtn = function() { t.Audios.playSfx(this.game, "generic_button"), this.disableAllInput(), this.controller.pressExit() }, i.prototype.pressHowToPlayBtn = function() { t.Audios.playSfx(this.game, "generic_button"), this.disableAllInput(), this.controller.pressHowToPlay() }, i.prototype.enableAllInput = function() { t.Util.enableTouch("play", this.ui), t.Util.enableTouch("sound", this.ui), t.Util.enableTouch("home", this.ui), t.Util.enableTouch("retry", this.ui), t.Util.enableTouch("tutorial", this.ui), t.Instances.controlButtonUI.initControl("uiPause"), t.Instances.controlButtonUI.setButton(this.lastButton), t.Instances.controlButtonUI.onChangeButton.add(this.setSelectButton, this), this.keyStart.onDown.add(this.onSelectButton, this), this.keyHome.onDown.add(this.pressExitBtn, this) }, i.prototype.disableAllInput = function() { t.Util.disableTouch("play", this.ui), t.Util.disableTouch("sound", this.ui), t.Util.disableTouch("home", this.ui), t.Util.disableTouch("retry", this.ui), t.Util.disableTouch("tutorial", this.ui), this.lastButton = t.Instances.controlButtonUI.actualButton, t.Instances.controlButtonUI.onChangeButton.remove(this.setSelectButton, this), this.keyStart.onDown.removeAll(this), this.keyHome.onDown.removeAll(this) }, i }(Phaser.Group);
    t.UIPause = e }(GameCommands || (GameCommands = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameCommands;
! function(t) { var e = function(e) {
        function i(t) { var i = e.call(this, t.game) || this;
            i.controller = t, i.ui = i.game.add.ph2UI("ui_tutorial", "atlas_tutorial"), i.containerGame = Ph2.UISystem.findObject("container_ingame", i.ui), i.containerUI = Ph2.UISystem.findObject("container", i.ui), i.buttonClose = Ph2.UISystem.findObject("back", i.ui); var n = i.game.device.desktop ? "tutorial_desktop" : "tutorial_mobile",
                s = i.game.device.desktop ? "arrow" : "hand"; return i.animTutorial = i.game.add.ph2AnimationObject(0, 0, n, "atlas_tutorial"), i.containerUI.addChild(i.animTutorial), i.animCursorTutorial = i.game.add.ph2AnimationObject(0, 0, s, "atlas_tutorial"), i.animCursorTutorial.visible = !1, i.containerUI.addChild(i.animCursorTutorial), i.selectSprite = new Phaser.Sprite(i.game, 0, 0, "atlas_ui_level_select", "hl_big.png"), i.selectSprite.anchor.set(.5, .5), i.game.device.desktop || (i.selectSprite.visible = !1), i.textDescription = [], i.textDescription[0] = Ph2.UISystem.findObject("container_ingame/text1", i.ui), i.textDescription[1] = Ph2.UISystem.findObject("container_ingame/text2", i.ui), i.tutorialID = -1, i.resize(), i.add(i.selectSprite), i.add(i.ui), i.add(i.animCursorTutorial), i.setSelectButton(), i.addKeysControl(), i.hide(), i.hideMessage(), i.addTouchCallback(), i.disableAllInput(), i.localization(), i } return __extends(i, e), i.prototype.localization = function() { this.textDescription[0].loadTexture("atlas_texts_commands"), this.textDescription[0].frameName = "ui_tutorial_text2.png", this.textDescription[1].loadTexture("atlas_texts_commands"), this.textDescription[1].frameName = "ui_tutorial_text2.png" }, i.prototype.addKeysControl = function() { this.keyStart = this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER), this.keyHome = this.game.input.keyboard.addKey(Phaser.Keyboard.ESC) }, i.prototype.addTouchCallback = function() { t.Util.addTouchCallbackToButton("back", this.ui, this.pressCloseBtn, this) }, i.prototype.enableAllInput = function() { this.keyStart.onDown.add(this.pressCloseBtn, this), this.keyHome.onDown.add(this.pressCloseBtn, this), t.Instances.controlButtonUI.onChangeButton.add(this.setSelectButton, this), t.Util.enableTouch("back", this.ui) }, i.prototype.disableAllInput = function() { this.keyStart.onDown.remove(this.pressCloseBtn, this), this.keyHome.onDown.remove(this.pressCloseBtn, this), t.Instances.controlButtonUI.onChangeButton.remove(this.setSelectButton, this), t.Util.disableTouch("back", this.ui) }, i.prototype.pressCloseBtn = function() { t.Audios.playSfx(this.game, "generic_button"), this.disableAllInput(), this.hide(), this.controller.closeHowToPlay() }, i.prototype.show = function() { t.Audios.playSfx(this.game, "popup"), this.animTutorial.ph2Animations.play("tutorial_loop", 1, !0), this.containerUI.visible = !0, this.buttonClose.visible = !0, this.game.device.desktop && (this.selectSprite.visible = !0), this.enableAllInput() }, i.prototype.hide = function() { this.animTutorial.ph2Animations.stop("tutorial_loop"), this.containerUI.visible = !1, this.buttonClose.visible = !1, this.selectSprite.visible = !1, this.keyStart.onDown.remove(this.pressCloseBtn, this), this.keyHome.onDown.remove(this.pressCloseBtn, this) }, i.prototype.setTutorialID = function(t) { this.tutorialID = t, 0 === t ? (this.textDescription[0].visible = !0, this.textDescription[1].visible = !1) : (this.textDescription[0].visible = !1, this.textDescription[1].visible = !0) }, i.prototype.showMessage = function() { this.containerGame.visible = !0, 0 === this.tutorialID && (this.animCursorTutorial.ph2Animations.play("tutorial", 1, !0), this.animCursorTutorial.visible = !0) }, i.prototype.hideMessage = function() { this.containerGame.visible = !1, 0 === this.tutorialID && (this.animCursorTutorial.ph2Animations.stop(), this.animCursorTutorial.visible = !1) }, i.prototype.setSelectButton = function() { this.selectSprite.x = this.buttonClose.x, this.selectSprite.y = this.buttonClose.y, this.selectSprite.scale.set(1, 1) }, i.prototype.pause = function() { this.animCursorTutorial && this.animCursorTutorial.ph2Animations.pause(), this.animTutorial && this.animTutorial.ph2Animations.pause() }, i.prototype.resume = function() { this.animCursorTutorial && this.animCursorTutorial.ph2Animations.resume(), this.animTutorial && this.animTutorial.ph2Animations.resume() }, i.prototype.resize = function() { var t = this.game.width / 2 - 80,
                e = this.game.height / 2 - 110;
            this.animCursorTutorial.x = t, this.animCursorTutorial.y = e }, i.prototype.destroy = function() { this.animCursorTutorial.ph2Animations.stop(), this.animTutorial.ph2Animations.stop(), this.animCursorTutorial.destroy(), this.animTutorial.destroy(), this.animCursorTutorial = null, this.animTutorial = null, e.prototype.destroy.call(this) }, i }(Phaser.Group);
    t.UITutorial = e }(GameCommands || (GameCommands = {}));
var GameCommands;
! function(t) { var e;! function(t) { t[t.menu = 0] = "menu", t[t.gp1 = 1] = "gp1", t[t.gp2 = 2] = "gp2", t[t.gp3 = 3] = "gp3" }(e = t.MUSIC || (t.MUSIC = {})); var i = function() {
        function i() {} return i.loadAudioSprite = function(t, e) { for (var n = t.cache.getJSON(e), s = n.urls.length, o = [], a = 0; a < s; a++) o.push("commands/assets/audio/" + n.urls[a]);
            i.audioSprite = new Howl({ src: o, preload: !0, sprite: n.sprite }), t.ph2AudioManager.setAudioEffectsFile(i.audioSprite) }, i.playMusic = function(n, s, o) { if (void 0 === o && (o = 0), s) n.ph2AudioManager.switchMusic(i.music[e.menu]), i.actualMusic = e.menu;
            else switch (o % 3) {
                case 0:
                    n.ph2AudioManager.switchMusic(i.music[e.gp1]), i.actualMusic = e.gp1; break;
                case 1:
                    n.ph2AudioManager.switchMusic(i.music[e.gp2]), i.actualMusic = e.gp2; break;
                case 2:
                    n.ph2AudioManager.switchMusic(i.music[e.gp3]), i.actualMusic = e.gp3 }!1 === t.Instances.dataManager.getAudio() && this.disableAudio(n) }, i.stopMusic = function(t) { t.ph2AudioManager.stopMusic() }, i.disableAudio = function(t) { t.ph2AudioManager.getMusicEnabled() && (t.ph2AudioManager.switchMusicState(), t.ph2AudioManager.switchSfxState(), t.ph2AudioManager.stopMusic()) }, i.enableAudio = function(t) { t.ph2AudioManager.getMusicEnabled() || (t.ph2AudioManager.switchMusicState(), t.ph2AudioManager.switchSfxState(), t.ph2AudioManager.switchMusic(i.music[i.actualMusic])) }, i.onBlur = function(t) { t.ph2AudioManager.pauseMusic(), i.pauseAllSfx() }, i.onFocus = function(t) { t.ph2AudioManager.resumeMusic(), i.resumeAllSfx() }, i.playSfx = function(t, e) { var n = t.ph2AudioManager.playEffect(e, !1);
            i.addSoundPlaying(n) }, i.addSoundPlaying = function(t) { null !== t && (i.sfxPlaying.push(t), Howler._howls[4].on("end", function() { i.removeSoundPlaying(t) }, t)) }, i.removeSoundPlaying = function(t) { i.sfxPlaying.splice(i.sfxPlaying.indexOf(t), 1) }, i.resumeAllSfx = function() { for (var t = 0, e = i.sfxPlaying.length; t < e; t++) Howler._howls[4].play(i.sfxPlaying[t]) }, i.pauseAllSfx = function() { for (var t = 0, e = i.sfxPlaying.length; t < e; t++) Howler._howls[4].pause(i.sfxPlaying[t]) }, i.resumeSfxID = function(t, e) { null !== e && t.ph2AudioManager.resumeEffect(e) }, i.pauseSfxID = function(t, e) { null !== e && t.ph2AudioManager.pauseEffect(e) }, i.playSfxTicTac = function(t) { var e = t.ph2AudioManager.playEffect(i.audiosTioTac[i.indexTioTac], !1);
            i.addSoundPlaying(e), i.indexTioTac = 0 === i.indexTioTac ? 1 : 0 }, i.playSfxComic = function(t) { var e = t.ph2AudioManager.playEffect(i.audiosComic[i.indexComic], !1);
            i.addSoundPlaying(e), i.indexComic = 0 === i.indexComic ? 1 : 0 }, i.music = [new Howl({ src: ["commands/assets/audio/menu.ogg", "commands/assets/audio/menu.mp3"], preload: !0, loop: !0, volume: 1 }), new Howl({ src: ["commands/assets/audio/gp1.ogg", "commands/assets/audio/gp1.mp3"], preload: !0, loop: !0, volume: 1 }), new Howl({ src: ["commands/assets/audio/gp2.ogg", "commands/assets/audio/gp2.mp3"], preload: !0, loop: !0, volume: 1 }), new Howl({ src: ["commands/assets/audio/gp3.ogg", "commands/assets/audio/gp3.mp3"], preload: !0, loop: !0, volume: 1 })], i.sfxPlaying = [], i.audiosTioTac = ["tic_tac1", "tic_tac2"], i.indexTioTac = 0, i.audiosComic = ["slide_story_v1", "slide_story_v1"], i.indexComic = 0, i }();
    t.Audios = i }(GameCommands || (GameCommands = {}));
var GameCommands;
! function(t) { var e = function() {
        function t() {} return t.GAME_SCALE = 1, t.CALCULATED_WIDTH = 0, t.CALCULATED_HEIGHT = 0, t.GAME_WIDTH = 960, t.GAME_HEIGHT = 640, t.GAME_RATIO = 1, t.LANDSCAPE_LOCKED = !0, t.PORTRAIT_LOCKED = !1, t.RENDER_DEBUG = !1, t.KEY_DEBUG = !1, t.IOS_BUTTON_PATCH = !1, t.GAME_KEY = "", t.SECRET_KEY = "", t.GOOGLE_ID = "", t.GOOGLE_APP_NAME = "", t.AUTO_FULLSCREEN_ENABLED = !0, t }();
    t.Constants = e }(GameCommands || (GameCommands = {}));
var GameCommands;
! function(t) { t.COMMANDSID || (t.COMMANDSID = {});! function(t) { t[t.xlr8 = 0] = "xlr8", t[t.fourArms = 1] = "fourArms", t[t.cannonbolt = 2] = "cannonbolt" }(t.PLAYERSID || (t.PLAYERSID = {})); var e = function() {
        function t() {} return t.floor = 150, t.levelTutorial = [1], t.levelCount = 9, t.speed = 30, t.percentTimeAlert = .2, t.maxTimeTicTactClockSFX = 500, t.minTimeTicTactClockSFX = 300, t }();
    t.ConfigGame = e }(GameCommands || (GameCommands = {}));
var GameCommands;
! function(t) { var e = function() {
        function e() {} return e.initDataManager = function(e) { void 0 === this.dataManager && (this.dataManager = new t.DataManager(e)) }, e.initLocalizationManager = function(e) { void 0 === this.localization && (this.localization = new t.LocalizationManager(e)) }, e.initTransitionAnim = function(t) { void 0 === this.transitionAnim && (this.transitionAnim = Game.Instances.transitionAnim) }, e.initControlButtonUI = function(e) { void 0 === this.controlButtonUI && (this.controlButtonUI = new t.ControlButtonUI(e)) }, e }();
    t.Instances = e }(GameCommands || (GameCommands = {}));
var DebuggingGame;
! function(t) { var e = function() {
        function e() {} return e.initDataManager = function(e) { void 0 === this.dataManager && (this.dataManager = new t.DataManager(e)) }, e.initLocalizationManager = function(e) { void 0 === this.localization && (this.localization = new t.LocalizationManager(e)) }, e.initTransitionAnim = function(t) { void 0 === this.transitionAnim && (this.transitionAnim = Game.Instances.transitionAnim) }, e.initControlButtonUI = function(e) { void 0 === this.controlButtonUI && (this.controlButtonUI = new t.ControlButtonUI(e)) }, e }();
    t.Instances = e }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e;! function(t) { t[t.introShowPlayer = 0] = "introShowPlayer", t[t.introMessage = 1] = "introMessage", t[t.introPlayer = 2] = "introPlayer", t[t.playing = 3] = "playing", t[t.endGame = 4] = "endGame" }(e = t.BossInternalState || (t.BossInternalState = {})); var i;! function(t) { t[t.LEFT = 0] = "LEFT", t[t.RIGHT = 1] = "RIGHT", t[t.ONE = 2] = "ONE", t[t.TWO = 3] = "TWO", t[t.THREE = 4] = "THREE" }(i || (i = {})); var n = function(n) {
        function s() { return n.call(this) || this } return __extends(s, n), s.prototype.init = function() { t.Instances.controlButtonUI.addControl(this.game), t.Audios.playMusic(this.game, t.MUSIC.gp2), this.isPause = !1, this.game.world.removeAll(), this.lastWidth = this.game.width, this.lastBgScale = 1, this.battleData = t.GameStateManager.instances.levelData.battle, this.currentWave = 0, this.bullets = [], this.enemies = [], this.bulletsDead = [], this.keys = [], this.lastSpotEnable = !1, this.isChangeSpot = !1, this.isNextFirstChangeSpot = !0, this.currentPlayerSpot = 1, this.itemEnableSpawn = !0, this.nextItem = this.battleData.itemSpawn, this.pauseFocus = !1, this.pauseOrientation = !1, Game.Instances.onIncorrectOrientation.add(this.onIncorrecOrientation, this), Game.Instances.onCorrectOrientation.add(this.onCorrectOrientation, this), this.game.onFocus.add(this.onFocus, this), this.game.onBlur.add(this.onBlur, this) }, s.prototype.create = function() { n.prototype.create.call(this), this.lives = this.battleData.lives, this.componentManager = Ph2.ComponentPlugin.initComponents(this), this.componentCollision = this.componentManager.addComponent(new t.GroupCollisionChecker), this.componentSpawn = this.componentManager.addComponent(new t.SpawnerManagerRange), this.componentOverlay = this.componentManager.addComponent(new t.Overlay(this.game, .7)), this.mainGroup = this.game.add.group(), this.bulletGroup = this.game.add.group(), this.enemyGroup = this.game.add.group(), this.enemyUpGroup = this.game.add.group(), this.itemGroup = this.game.add.group(), this.animGroup = this.game.add.group(), this.overlayGroup = this.game.add.group(), this.bg = new Phaser.Sprite(this.game, 0, 0, "bg_1"), this.bg.anchor.set(.5, 0), this.bg.x = this.game.width / 2, this.whitefade = this.game.add.graphics(0, 0), this.whitefade.beginFill(16777215, 1), this.whitefade.drawRect(0, 0, this.game.width, this.game.height), this.whitefade.endFill(), this.whitefade.visible = !1, this.whitefade.alpha = 0, this.addSpots(), this.addPlayer(), this.ui = new t.UIGameplayBattle(this), this.uiPause = new t.UIPause(this), this.uiConfirmation = new t.UIConfirmation(this), this.uiLevelCompleted = new t.UILevelCompleted(this, t.GameStateManager.instances.levelIndex), this.uiGameOver = new t.UIGameOver(this), this.uiTutorial = new t.UITutorial(this, t.TutorialID.combat1), this.timerInit = this.game.time.create(), this.mainGroup.add(this.bg), this.mainGroup.add(this.enemyGroup), this.mainGroup.add(this.itemGroup), this.mainGroup.add(this.bulletGroup), this.mainGroup.add(this.player), this.mainGroup.add(this.enemyUpGroup), this.mainGroup.add(this.animGroup), this.mainGroup.add(this.ui), this.mainGroup.add(this.whitefade), this.overlayGroup.add(this.componentOverlay.overlaySprite), this.overlayGroup.add(this.uiPause), this.overlayGroup.add(this.uiConfirmation), this.overlayGroup.add(this.uiGameOver), this.overlayGroup.add(this.uiTutorial), this.overlayGroup.add(this.uiLevelCompleted), this.componentCollision.addPairsCollisions(t.CollisionGroups.PLAYER, t.CollisionGroups.BULLETENEMY), this.componentCollision.addPairsCollisions(t.CollisionGroups.PLAYER, t.CollisionGroups.ENEMY), this.componentCollision.addPairsCollisions(t.CollisionGroups.ENEMY, t.CollisionGroups.BULLETPLAYER), this.componentCollision.addPairsCollisions(t.CollisionGroups.BOSS, t.CollisionGroups.BULLETPLAYER), this.componentCollision.addPairsCollisions(t.CollisionGroups.ITEM, t.CollisionGroups.BULLETPLAYER), this.componentCollision.addCollisionBody(this.player, t.CollisionGroups.PLAYER), this.componentCollision.onCollision.add(this.checkCollisionGroup, this), this.componentSpawn.onSpawn.add(this.spawnElement, this), t.Instances.transitionAnim.playOut(), t.Instances.transitionAnim.onCompletedOut.addOnce(this.initIntroAnimationTransformation, this), this.addKeyControl(), t.AnimationPool.instance.setInitScale(this.game, this.lastBgScale), this.resize() }, s.prototype.cheatUsed = function(t) { this.player.stop(); for (var e = 0, i = this.spots; e < i.length; e++) i[e].disableInput();
            this.disableKeyControl(); for (var n = 0, s = this.enemies; n < s.length; n++) s[n].stop(); for (var o = 0, a = this.bullets; o < a.length; o++) a[o].stop();
            this.game.state.start(t, !0, !1, !0) }, s.prototype.addKeyControl = function() { var t;
            (t = this.game.input.keyboard.addKey(Phaser.Keyboard.LEFT)).onDown.add(this.pressKeyLeft, this), this.keys[i.LEFT] = t, (t = this.game.input.keyboard.addKey(Phaser.Keyboard.RIGHT)).onDown.add(this.pressKeyRight, this), this.keys[i.RIGHT] = t, (t = this.game.input.keyboard.addKey(Phaser.Keyboard.ONE)).onDown.add(this.pressKey1, this), this.keys[i.ONE] = t, (t = this.game.input.keyboard.addKey(Phaser.Keyboard.TWO)).onDown.add(this.pressKey2, this), this.keys[i.TWO] = t, (t = this.game.input.keyboard.addKey(Phaser.Keyboard.THREE)).onDown.add(this.pressKey3, this), this.keys[i.THREE] = t }, s.prototype.disableKeyControl = function() { for (var t = 0, e = this.keys; t < e.length; t++) e[t].enabled = !1 }, s.prototype.enableKeyControl = function() { for (var t = 0, e = this.keys; t < e.length; t++) e[t].enabled = !0 }, s.prototype.removeKeyControl = function() { for (var t = 0, e = this.keys; t < e.length; t++) e[t].onDown.removeAll(this) }, s.prototype.pressKey1 = function() { this.startChangeSpot(0) }, s.prototype.pressKey2 = function() { this.startChangeSpot(1) }, s.prototype.pressKey3 = function() { this.startChangeSpot(2) }, s.prototype.pressKeyLeft = function() { this.currentPlayerSpot > 0 && this.startChangeSpot(this.currentPlayerSpot - 1) }, s.prototype.pressKeyRight = function() { this.currentPlayerSpot < 2 && this.startChangeSpot(this.currentPlayerSpot + 1) }, s.prototype.addPlayer = function() { this.player = new t.Player(this.game, this), this.player.visible = !1, this.player.x = this.spots[this.currentPlayerSpot].x, this.player.y = this.game.height - t.ConfigGame.playerY }, s.prototype.additem = function(e, i) { t.Audios.playSfx(this.game, "powerup_appears"), this.item = new t.ItemPowerup(this.game, this, 0), this.item.x = e, this.item.y = i, this.item.setBgScale(this.lastBgScale), this.item.setPerpective(), this.itemGroup.add(this.item), this.componentCollision.addCollisionBody(this.item, t.CollisionGroups.ITEM) }, s.prototype.addEnemy = function(e) { var i;
            (i = new t.Enemy(this.game, this, e.type, e.lane)).y = -100, i.setOrigin(this.lastBgScale), i.moveToOrigin(), i.setTarget(this.lastBgScale), i.initMove(), this.componentCollision.addCollisionBody(i, t.CollisionGroups.ENEMY), this.enemies.push(i), this.enemyGroup.add(i), this.enemyGroup.sendToBack(i) }, s.prototype.addBoss = function(e) { this.boss = new t.Boss(this.game, this, e), this.enemyGroup.add(this.boss), this.boss.y = -100, this.boss.x = this.game.width / 2, this.boss.setTarget(this.boss.x, this.boss.y + this.game.height), this.boss.initMove(), this.componentCollision.addCollisionBody(this.boss, t.CollisionGroups.BOSS) }, s.prototype.addSpots = function() { this.spots = []; var e;
            (e = new t.Spot(this.game, 0, this)).x = this.game.width / 2 - t.ConfigGame.spotsDistanceX, e.y = this.game.height - t.ConfigGame.spotsY, this.spots.push(e), (e = new t.Spot(this.game, 1, this)).x = this.game.width / 2, e.y = this.game.height - t.ConfigGame.spotsY, this.spots.push(e), (e = new t.Spot(this.game, 2, this)).x = this.game.width / 2 + t.ConfigGame.spotsDistanceX, e.y = this.game.height - t.ConfigGame.spotsY, this.spots.push(e) }, s.prototype.createBullet = function() { var e; return this.bulletsDead.length > 0 ? (e = this.bulletsDead.splice(0, 1)[0]).wakeup() : (e = new t.Bullet(this.game, this), this.bulletGroup.add(e)), e }, s.prototype.initIntroAnimationTransformation = function() { for (var i = 0, n = this.spots; i < n.length; i++) n[i].disableInput();
            this.ui.disableAllInput(), this.disableKeyControl(), t.Audios.playSfx(this.game, "banner_fase3"), this.internalState = e.introShowPlayer, this.introAnimation = this.game.add.ph2AnimationObject(this.game.width / 2, this.game.height / 2, "character", "character_atlas"), this.animGroup.add(this.introAnimation); var s = t.GameStateManager.instances.getLevel(),
                o = t.VisualData.battleCharacter[s.character].intro;
            this.introAnimation.ph2Animations.play(o, 1, !1).onComplete.addOnce(this.initIntroAnimationMessage, this) }, s.prototype.initIntroAnimationMessage = function() { this.internalState = e.introMessage, this.introAnimation.destroy(), this.introAnimation = this.game.add.ph2AnimationObject(this.game.width / 2, this.game.height / 2, "message", "ui_gameplay_battle"); var t = Ph2.AnimationSystem.findObject("base/text", this.introAnimation);
            t.loadTexture("atlas_texts_debugging"), t.frameName = "ui_gameplay_text1.png", this.animGroup.add(this.introAnimation), this.introAnimation.ph2Animations.play("message_anim", 1, !1).onComplete.addOnce(this.initIntroCharacterAnimation, this) }, s.prototype.initIntroCharacterAnimation = function() { this.internalState = e.introPlayer, this.introAnimation.destroy(), this.introAnimation = t.AnimationPool.instance.getPh2Animation(this.game, "transport_fx", "atlas_gameplay", !0), this.introAnimation.x = this.spots[this.currentPlayerSpot].x, this.introAnimation.y = this.spots[this.currentPlayerSpot].y - 100, this.introAnimation.ph2Animations.play("transport_anim", 1, !1).onComplete.addOnce(this.endIntroAnim, this), this.animGroup.add(this.introAnimation) }, s.prototype.endIntroAnim = function() { this.introAnimation = null, this.internalState = e.playing, this.ui.enableAllInput(), this.player.visible = !0; for (var i = 0, n = this.spots; i < n.length; i++) n[i].enableInput();
            this.enableKeyControl(), this.timerInit.add(t.ConfigGame.timeDelayStartbattle * Phaser.Timer.SECOND, this.startCombat, this), this.timerInit.start() }, s.prototype.startCombat = function() { this.initPlayerShoot(), this.startWave(), this.initBoss() }, s.prototype.initBoss = function() { var t = this.battleData.boss.bossType;
            this.addBoss(t) }, s.prototype.startWave = function() { var t = this.battleData.boss.lane0,
                e = this.battleData.boss.lane2;
            this.componentSpawn.addSpawnData(t.timeEnemy, t.enemyType, t.enemyWeight, t.initCooldown, { lane: 0, type: "" }), this.componentSpawn.addSpawnData(e.timeEnemy, e.enemyType, e.enemyWeight, e.initCooldown, { lane: 2, type: "" }), this.componentSpawn.startTimer() }, s.prototype.initPlayerShoot = function() { this.player.shootAnim() }, s.prototype.shootPlayer = function() { var e, i, n, s = t.GameStateManager.instances.getLevel(),
                o = new Phaser.Point(t.ConfigGame.battleShoots[s.character].bulletOffset.x, t.ConfigGame.battleShoots[s.character].bulletOffset.y),
                a = new Phaser.Point(0, 0),
                r = new Phaser.Point(0, 0); switch (0 === this.currentPlayerSpot && (o.x = -1 * o.x), this.currentPlayerSpot) {
                case 0:
                    a.x = this.player.x + o.x + 40 * this.lastBgScale, a.y = this.player.y + o.y + 100; break;
                case 1:
                    a.x = this.player.x + o.x, a.y = this.player.y + o.y + 100; break;
                case 2:
                    a.x = this.player.x + o.x - 40 * this.lastBgScale, a.y = this.player.y + o.y + 100 }(e = this.createBullet()).setBullet(t.BulletType.player), e.setBodyBlueColor(), e.x = this.player.x + o.x, e.y = this.player.y + o.y, i = 180 * Math.atan2(a.y - e.y, e.x - a.x) / Math.PI, e.setAngle(i - 90), n = Math.abs(a.x - e.x) + Math.abs(a.y - e.y), r.x = (a.x - e.x) / n, r.y = (a.y - e.y) / n, this.componentCollision.addCollisionBody(e, t.CollisionGroups.BULLETPLAYER); var h = t.ConfigGame.battleShoots[s.character].bulletSpeed;
            e.velocity.set(h * r.x, -h * r.y), e.setInitScale(this.lastBgScale), t.Audios.playShotPlayer(this.game), this.bullets.push(e) }, s.prototype.shootEnemy = function(e, i) { t.Audios.playSfx(this.game, "enemy_shot"); var n, s, o, a;
            o = Math.abs(e.x - this.spots[e.lane].x) + Math.abs(e.y - this.player.y), n = this.createBullet(); var r = i ? t.BulletType.boss : t.BulletType.enemy;
            n.setBullet(r), n.setBodyGreenColor(), this.componentCollision.addCollisionBody(n, t.CollisionGroups.BULLETENEMY), n.x = e.x, n.y = e.y, a = 180 * Math.atan2(this.player.y - n.y, this.spots[e.lane].x - n.x) / Math.PI, n.setAngle(a), s = new Phaser.Point((this.spots[e.lane].x - e.x) / o, (this.player.y - e.y) / o), n.velocity.set(s.x * e.bulletSpeed, s.y * e.bulletSpeed), n.setInitScale(this.lastBgScale), this.bullets.push(n) }, s.prototype.checkCollisionGroup = function(e, i, n, s) { if (!1 === this.isChangeSpot && n === t.CollisionGroups.PLAYER && s === t.CollisionGroups.BULLETENEMY && !1 === this.player.isInvulnerable) { var o = i.rectangleBody.x,
                    a = i.rectangleBody.y; return this.playImpactAnim(o, a, i.angleSprite), this.player.stun(), this.damagePlayer(this.battleData.damage.bullet), this.nextItem > 0 && (this.nextItem = this.battleData.itemSpawn), void this.destroyBullet(i) } if (n === t.CollisionGroups.ENEMY && s === t.CollisionGroups.BULLETPLAYER) return 0 === (r = e.lives - 1) && (t.Audios.playDestroyEnemy(this.game), this.playDestroyEnemy(e.rectangleBody.x, e.rectangleBody.y), this.itemEnableSpawn && 0 === --this.nextItem && (this.additem(e.rectangleBody.x, e.rectangleBody.y), this.itemEnableSpawn = !1)), e.damage(), void this.destroyBullet(i); if (n === t.CollisionGroups.PLAYER && s === t.CollisionGroups.ENEMY && !e.isInvulnerable) return this.player.stun(), void this.explodeEnemyPlayer(i); if (n === t.CollisionGroups.BOSS && s === t.CollisionGroups.BULLETPLAYER) { var r = this.boss.lives - 1; return this.boss.damage(), this.playImpactBossAnim(i.rectangleBody.x, i.rectangleBody.y), 0 === r && this.playDestroyBoss(e.rectangleBody.x, e.rectangleBody.y), void this.destroyBullet(i) } n === t.CollisionGroups.ITEM && s === t.CollisionGroups.BULLETPLAYER && (e.removeLifes(), this.destroyBullet(i)) }, s.prototype.spawnElement = function(t, e) { for (var i = 0, n = t.length; i < n; i++) e[i].type = t[i], this.addEnemy(e[i]) }, s.prototype.startInactiveAnim = function() { this.isInactiveAnim = !0, this.inactiveAnim = this.game.add.ph2AnimationObject(0, 0, "tutorial", "atlas_gameplay"), this.animGroup.add(this.inactiveAnim), this.startLeftInactiveAnim() }, s.prototype.startLeftInactiveAnim = function() { this.inactiveAnim.x = this.spots[2].x + 50, this.inactiveAnim.y = this.spots[2].y + 50; var t = this.game.device.desktop ? "desktop" : "mobile";
            this.inactiveAnim.ph2Animations.play("tutorial_tap_" + t, 1, !1).onComplete.addOnce(this.startRightInactiveAnim, this) }, s.prototype.startRightInactiveAnim = function() { this.inactiveAnim.x = this.spots[0].x + 50, this.inactiveAnim.y = this.spots[0].y + 50; var t = this.game.device.desktop ? "desktop" : "mobile";
            this.inactiveAnim.ph2Animations.play("tutorial_tap_" + t, 1, !1).onComplete.addOnce(this.startLeftInactiveAnim, this) }, s.prototype.stopInactiveAnim = function() { this.isInactiveAnim && (this.inactiveAnim.visible = !1, this.inactiveAnim.ph2Animations.stop()), this.isInactiveAnim = !1 }, s.prototype.startChangeSpot = function(e) { var i; if (i = this.spots[e], this.inactiveAnim && this.stopInactiveAnim(), this.isNextFirstChangeSpot = !1, this.player.x !== i.x && !this.player.isShooting && !this.player.isDisableMove) { t.Audios.playChangeSpot(this.game), this.isChangeSpot = !0, this.playSpotOutAnim(e), this.currentPlayerSpot = e; for (var n = 0, s = this.spots; n < s.length; n++)(i = s[n]).disableInput();
                this.disableKeyControl(), i = this.spots[e], this.player.changeSpotOut() } }, s.prototype.playSpotOutAnim = function(e) { var i = t.AnimationPool.instance.getPh2Animation(this.game, "transport_fx", "atlas_gameplay", !0);
            i.x = this.spots[this.currentPlayerSpot].x, i.y = this.spots[this.currentPlayerSpot].y - 100, i.ph2Animations.play("transport_anim", 1, !1).onComplete.addOnce(this.onEndOutAnim, this, 0, e), this.animGroup.add(i) }, s.prototype.onEndOutAnim = function(t, e, i) { this.player.changeSpotIn(this.spots[i].x, i), this.playSpotInAnim(i) }, s.prototype.playSpotInAnim = function(e) { var i = t.AnimationPool.instance.getPh2Animation(this.game, "transport_fx", "atlas_gameplay", !0);
            i.x = this.spots[e].x, i.y = this.spots[e].y - 100, i.ph2Animations.play("transport_anim", 1, !1).onComplete.addOnce(this.stopChangeSpot, this), this.animGroup.add(i) }, s.prototype.stopChangeSpot = function() { if (this.isChangeSpot = !1, this.internalState !== e.endGame) { for (var t = 0, i = this.spots; t < i.length; t++) i[t].enableInput();
                this.enableKeyControl() } }, s.prototype.startEndAnim = function() { t.Instances.transitionAnim.playIn(), t.Instances.transitionAnim.onCompletedIn.addOnce(this.onCompletedTransition, this) }, s.prototype.onCompletedTransition = function() { this.nextState() }, s.prototype.playImpactBossAnim = function(e, i) { var n = t.AnimationPool.instance.getPh2Animation(this.game, "shoot_enemy", "atlas_gameplay", !0);
            n.x = e, n.y = i, n.ph2Animations.play("shoot_enemy_anim", 1, !1), this.animGroup.add(n) }, s.prototype.playImpactAnim = function(e, i, n) { var s = t.AnimationPool.instance.getPh2Animation(this.game, "shoot", "atlas_gameplay", !0);
            s.x = e, s.y = i, s.angle = n, s.ph2Animations.play("shoot_anim", 1, !1), this.animGroup.add(s) }, s.prototype.destroyBullet = function(e) { var i = this.bullets.indexOf(e); - 1 !== i && (this.bullets.splice(i, 1), e.sleep(), this.bulletsDead.push(e), this.componentCollision.removeCollisionBody(e, t.CollisionGroups.BULLETENEMY), this.componentCollision.removeCollisionBody(e, t.CollisionGroups.BULLETPLAYER)) }, s.prototype.playDestroyBoss = function(e, i) { t.Audios.playSfx(this.game, "destroy_boss"), this.componentCollision.removeCollisionBody(this.boss, t.CollisionGroups.BOSS), this.player.stopLogic(); for (var n = 0, s = this.spots; n < s.length; n++) s[n].disableInput();
            this.disableKeyControl(); var o = t.AnimationPool.instance.getPh2Animation(this.game, "exp_enemy", "atlas_gameplay", !0);
            o.x = e, o.y = i, o.ph2Animations.play("exp_enemy_anim", 1, !1).onComplete.addOnce(this.initWinAnim, this), this.animGroup.add(o) }, s.prototype.onEndFinishAttackBoss = function() { this.initGameOverBoss() }, s.prototype.playDestroyEnemy = function(e, i) { var n = t.AnimationPool.instance.getPh2Animation(this.game, "exp_enemy", "atlas_gameplay", !0);
            n.x = e, n.y = i, n.ph2Animations.play("exp_enemy_anim", 1, !1), this.animGroup.add(n) }, s.prototype.explodeEnemyLimitBottom = function(e) { var i = this.enemies.indexOf(e); - 1 !== i && (this.playExplosionEnemy(e.x, e.y), this.enemies.splice(i, 1), this.componentCollision.removeCollisionBody(e, t.CollisionGroups.ENEMY), e.destroy(), this.enemiesDeath++, this.damagePlayer(this.battleData.damage.collisionOmnitrix)) }, s.prototype.explodeEnemyPlayer = function(e) { var i = this.enemies.indexOf(e); - 1 !== i && (this.playExplosionEnemy(e.x, e.y), this.enemies.splice(i, 1), this.componentCollision.removeCollisionBody(e, t.CollisionGroups.ENEMY), e.destroy(), this.enemiesDeath++, this.damagePlayer(this.battleData.damage.collisionPlayer)) }, s.prototype.damagePlayer = function(e) { this.lives = this.lives - e < 0 ? 0 : this.lives - e, this.lives < t.ConfigGame.levelLives / 4 && !this.inactiveAnim && this.isNextFirstChangeSpot && this.startInactiveAnim(), this.ui.setLives(this.lives, this.battleData.lives), 0 !== this.lives || this.initGameOver() }, s.prototype.playExplosionEnemy = function(e, i) { var n = t.AnimationPool.instance.getPh2Animation(this.game, "out_enemy", "atlas_gameplay", !0);
            n.x = e, n.y = i, n.ph2Animations.play("out_enemy_anim", 1, !1), this.animGroup.add(n) }, s.prototype.destroyEnemy = function(e) { var i = this.enemies.indexOf(e); - 1 !== i && (this.enemies.splice(i, 1), this.componentCollision.removeCollisionBody(e, t.CollisionGroups.ENEMY), e.destroy(), this.enemiesDeath++) }, s.prototype.playActiveAnim = function() { var e = t.AnimationPool.instance.getPh2Animation(this.game, "life_out", "atlas_gameplay", !0);
            e.x = this.item.x, e.y = this.item.y, e.ph2Animations.play("life_out_anim", 1, !1), this.animGroup.add(e) }, s.prototype.startDefeatAll = function(e) { void 0 === e && (e = !0); var i; for (t.Audios.playSfx(this.game, "powerup_used"); this.enemies.length > 0;) this.playDestroyEnemy(this.enemies[0].rectangleBody.x, this.enemies[0].rectangleBody.y), i = this.enemies[0].lives, this.enemies[0].damage(i);
            this.boss.damage(), 0 === (i = this.boss.lives - 1) && this.playDestroyBoss(this.boss.rectangleBody.x, this.boss.rectangleBody.y), e && (this.itemEnableSpawn = !0, this.nextItem = this.battleData.itemSpawn, this.componentCollision.removeCollisionBody(this.item, t.CollisionGroups.ITEM), this.playActiveAnim(), this.item = null) }, s.prototype.disappearItem = function() { this.componentCollision.removeCollisionBody(this.item, t.CollisionGroups.ITEM), this.item.destroy(), this.item = null, this.itemEnableSpawn = !0, this.nextItem = this.battleData.itemSpawn }, s.prototype.initWinAnim = function() { if (t.Instances.dataManager.completedLevel(t.GameStateManager.instances.levelIndex), this.inactiveAnim && this.stopInactiveAnim(), this.internalState !== e.endGame) { this.internalState = e.endGame, this.ui.disableAllInput(); for (var i = 0, n = this.spots; i < n.length; i++) n[i].disableInput();
                this.disableKeyControl(), this.componentSpawn.stopTimer(), this.componentCollision.removeCollisionBody(this.item, t.CollisionGroups.ITEM), this.startDefeatAll(!1), this.boss.destroyWinAnim(); for (var s = 0, o = this.bullets; s < o.length; s++) { var a = o[s];
                    this.componentCollision.removeCollisionBody(a, t.CollisionGroups.BULLETENEMY), this.componentCollision.removeCollisionBody(a, t.CollisionGroups.BULLETPLAYER) } } }, s.prototype.onEndBossWinAnim = function() { t.Audios.playSfx(this.game, "stage_completed"), this.player.destroyWinAnim() }, s.prototype.onEndPlayerWinAnim = function() { this.completedGame() }, s.prototype.initGameOverBoss = function() { if (this.inactiveAnim && this.stopInactiveAnim(), this.internalState !== e.endGame) { t.Audios.playSfx(this.game, "game_over"), this.internalState = e.endGame, this.ui.disableAllInput(); for (var i = 0, n = this.spots; i < n.length; i++) n[i].disableInput();
                this.disableKeyControl(); for (var s = 0, o = this.enemies; s < o.length; s++) o[s].destroyGameoverAnim();
                this.player.stopLogic(), this.componentSpawn.stopTimer(), this.componentCollision.removeCollisionBody(this.item, t.CollisionGroups.ITEM), this.boss.destroyGameoverAnim(), this.startInExplosionBossAnim(); for (var a = 0, r = this.bullets; a < r.length; a++) { var h = r[a];
                    this.componentCollision.removeCollisionBody(h, t.CollisionGroups.BULLETENEMY), this.componentCollision.removeCollisionBody(h, t.CollisionGroups.BULLETPLAYER) } } }, s.prototype.startInExplosionBossAnim = function() { this.whitefade.visible = !0, this.whitefade.alpha = 0, this.game.add.tween(this.whitefade).to({ alpha: 1 }, 500, "Linear", !0).onComplete.addOnce(this.startOutExplosionBossAnim, this) }, s.prototype.startOutExplosionBossAnim = function() { this.ui.setLives(0, this.battleData.lives), this.whitefade.visible = !0, this.whitefade.alpha = 1, this.game.add.tween(this.whitefade).to({ alpha: 0 }, 500, "Linear", !0).onComplete.addOnce(this.onEndBossGameOverAnim, this) }, s.prototype.onEndBossGameOverAnim = function() { this.player.destroyGameoverAnim() }, s.prototype.onEndPlayerGameOverAnim = function() { this.game.time.events.add(1e3, this.gameOver, this) }, s.prototype.initGameOver = function() { if (this.inactiveAnim && this.stopInactiveAnim(), this.internalState !== e.endGame) { t.Audios.playSfx(this.game, "game_over"), this.internalState = e.endGame, this.ui.disableAllInput(); for (var i = 0, n = this.spots; i < n.length; i++) n[i].disableInput();
                this.disableKeyControl(); for (var s = 0, o = this.enemies; s < o.length; s++) o[s].destroyGameoverAnim();
                this.player.stopLogic(), this.boss.stopLogic(), this.componentSpawn.stopTimer(), this.componentCollision.removeCollisionBody(this.item, t.CollisionGroups.ITEM), this.player.destroyGameoverAnim(); for (var a = 0, r = this.bullets; a < r.length; a++) { var h = r[a];
                    this.componentCollision.removeCollisionBody(h, t.CollisionGroups.BULLETENEMY), this.componentCollision.removeCollisionBody(h, t.CollisionGroups.BULLETPLAYER) } } }, s.prototype.completedGame = function() { this.player.stop(); for (var t = 0, e = this.spots; t < e.length; t++) e[t].disableInput();
            this.disableKeyControl(); for (var i = 0, n = this.enemies; i < n.length; i++) n[i].stop(); for (var s = 0, o = this.bullets; s < o.length; s++) o[s].stop();
            console.log("win"), this.showLevelCompleted() }, s.prototype.showLevelCompleted = function() { this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiLevelCompleted), this.componentOverlay.revive(), this.componentOverlay.fadeIn(500), this.uiLevelCompleted.show() }, s.prototype.gameOver = function() { this.player.stop(); for (var t = 0, e = this.enemies; t < e.length; t++) e[t].stop(); for (var i = 0, n = this.spots; i < n.length; i++) n[i].disableInput();
            this.disableKeyControl(); for (var s = 0, o = this.bullets; s < o.length; s++) o[s].stop();
            console.log("GameOver"), this.showGameOver() }, s.prototype.showGameOver = function() { this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiGameOver), this.componentOverlay.revive(), this.componentOverlay.fadeIn(500), this.uiGameOver.show() }, s.prototype.nextState = function() { var e = t.GameStateManager.instances.endGame();
            this.game.state.start(e, !0, !1, !0) }, s.prototype.closeConfirmation = function() { this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiPause), this.uiPause.enableAllInput() }, s.prototype.pressHowToPlay = function() { this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiTutorial), this.uiTutorial.showHowToPlay() }, s.prototype.closeHowToPlay = function() { this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiPause), this.uiPause.enableAllInput() }, s.prototype.pressExit = function() { this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiConfirmation), this.uiConfirmation.show(t.CONFIRMATIONTYPE.EXIT) }, s.prototype.goToLevelSelect = function() { t.Instances.transitionAnim.playIn(), t.Instances.transitionAnim.onCompletedIn.addOnce(this.transitionLevelSelect, this) }, s.prototype.transitionLevelSelect = function() { this.game.state.start("debugginglevelselect") }, s.prototype.pressRestart = function() { this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiConfirmation), this.uiConfirmation.show(t.CONFIRMATIONTYPE.RESTART) }, s.prototype.restartLevel = function() { t.Instances.transitionAnim.playIn(), t.Instances.transitionAnim.onCompletedIn.addOnce(this.transitionLevel, this) }, s.prototype.transitionLevel = function() { var e = t.GameStateManager.instances.start(t.GameStateManager.instances.levelIndex);
            this.game.state.start(e, !0, !1, t.GameStateManager.instances.levelIndex) }, s.prototype.restartLevelGameOver = function() { t.Instances.transitionAnim.playIn(), t.Instances.transitionAnim.onCompletedIn.addOnce(this.transitionLevelRestart, this) }, s.prototype.transitionLevelRestart = function() { var e = t.GameStateManager.instances.restart();
            this.game.state.start(e, !0, !1, !1) }, s.prototype.switchAudio = function() { var e = t.Instances.dataManager.getAudio(); return t.Instances.dataManager.setAudio(!e), !e }, s.prototype.pressPause = function() { switch (this.isPause = !0, this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiPause), this.componentOverlay.revive(), this.componentOverlay.fadeIn(500), this.uiPause.show(), this.ui.visible = !1, this.timerInit.pause(), this.game.time.events.paused = !0, this.internalState) {
                case e.playing:
                    this.pauseGame(); break;
                default:
                    this.introAnimation.ph2Animations.pause() } this.item && this.item.pause(), this.lastSpotEnable = this.spots[0].isEnableInput; for (var t = 0, i = this.spots; t < i.length; t++) i[t].disableInput();
            this.disableKeyControl() }, s.prototype.pressResume = function() { this.ui.visible = !0, this.componentOverlay.fadeOut(500, .7, this.onEndOverlayPauseFadeOut, this) }, s.prototype.onEndOverlayPauseFadeOut = function() { switch (this.isPause = !1, this.ui.enableAllInput(), this.componentOverlay.kill(), this.timerInit.resume(), this.game.time.events.paused = !1, this.internalState) {
                case e.playing:
                    this.resumeGame(); break;
                default:
                    this.introAnimation.ph2Animations.resume() } if (this.item && this.item.resume(), this.lastSpotEnable) { for (var t = 0, i = this.spots; t < i.length; t++) i[t].enableInput();
                this.enableKeyControl() } }, s.prototype.onBlur = function() { if (this.ui.pauseEnable && (this.ui.disableAllInput(), this.pressPause()), this.pauseFocus = !0, this.uiTutorial.pause(), t.Audios.onBlur(this.game), this.isPause) this.componentOverlay.pause();
            else switch (this.item && this.item.pause(), this.timerInit.pause(), this.game.time.events.paused = !0, this.internalState) {
                case e.endGame:
                case e.playing:
                    this.pauseGame(); break;
                default:
                    this.introAnimation.ph2Animations.pause() } }, s.prototype.onFocus = function() { this.pauseFocus = !1, this.checkResume() }, s.prototype.onIncorrecOrientation = function() { if (this.ui.pauseEnable && (this.ui.disableAllInput(), this.pressPause()), this.uiTutorial.pause(), this.pauseOrientation = !0, t.Audios.onBlur(this.game), this.isPause) this.componentOverlay.pause();
            else switch (this.item && this.item.pause(), this.timerInit.pause(), this.game.time.events.paused = !0, this.internalState) {
                case e.endGame:
                case e.playing:
                    this.pauseGame(); break;
                default:
                    this.introAnimation.ph2Animations.pause() } }, s.prototype.onCorrectOrientation = function() { this.pauseOrientation = !1, this.checkResume() }, s.prototype.checkResume = function() { if (!this.pauseFocus && !this.pauseOrientation)
                if (this.uiTutorial.resume(), t.Audios.onFocus(this.game), this.isPause) this.componentOverlay.resume();
                else switch (this.item && this.item.resume(), this.timerInit.resume(), this.game.time.events.paused = !1, this.internalState) {
                    case e.endGame:
                        this.ui.resume(); break;
                    case e.playing:
                        this.resumeGame(); break;
                    default:
                        this.introAnimation.ph2Animations.resume() } }, s.prototype.pauseGame = function() { this.player.pause(), this.boss && this.boss.pause(), this.componentSpawn.pauseTimer(); for (var e = 0, i = this.bullets; e < i.length; e++) i[e].pause(); for (var n = 0, s = this.enemies; n < s.length; n++) s[n].pause();
            this.inactiveAnim && this.inactiveAnim.ph2Animations.resume(), t.AnimationPool.instance.pauseAllActive(), this.ui.pause() }, s.prototype.resumeGame = function() { this.player.resume(), this.boss && this.boss.resume(), this.componentSpawn.resumeTimer(); for (var e = 0, i = this.bullets; e < i.length; e++) i[e].resume(); for (var n = 0, s = this.enemies; n < s.length; n++) s[n].resume();
            this.inactiveAnim && this.inactiveAnim.ph2Animations.resume(), t.AnimationPool.instance.resumeAllActive(), this.ui.resume() }, s.prototype.resize = function() { this.uiPause.resize(), this.uiConfirmation.resize(), this.uiGameOver.resize(), this.uiLevelCompleted.resize(), this.game.width < 960 ? (this.bg.width = this.game.width + 320, this.spots[0].x = this.game.width / 2 - t.ConfigGame.spotsDistanceX * this.bg.scale.x, this.spots[1].x = this.game.width / 2, this.spots[2].x = this.game.width / 2 + t.ConfigGame.spotsDistanceX * this.bg.scale.x, this.lastBgScale = this.bg.scale.x) : this.game.width > 1280 ? (this.bg.width = this.game.width, this.spots[0].x = this.game.width / 2 - t.ConfigGame.spotsDistanceX * this.bg.scale.x, this.spots[1].x = this.game.width / 2, this.spots[2].x = this.game.width / 2 + t.ConfigGame.spotsDistanceX * this.bg.scale.x, this.lastBgScale = this.bg.scale.x) : (this.lastBgScale = 1, this.bg.scale.x = 1, this.spots[0].x = this.game.width / 2 - t.ConfigGame.spotsDistanceX, this.spots[1].x = this.game.width / 2, this.spots[2].x = this.game.width / 2 + t.ConfigGame.spotsDistanceX), this.boss && (this.boss.x = this.game.width / 2), this.introAnimation && (this.introAnimation.x = this.game.width / 2, this.introAnimation.y = this.game.height / 2), this.item && this.item.resize(this.lastBgScale); for (var e = 0, i = this.enemies; e < i.length; e++) i[e].resize(this.lastBgScale); for (var n = 0, s = this.bullets; n < s.length; n++) s[n].resize(this.lastBgScale);
            t.AnimationPool.instance.resizeAllActive(this.game, this.lastBgScale), this.bg.x = this.game.width / 2, this.player.x = this.spots[this.currentPlayerSpot].x, this.lastWidth = this.game.width, this.ui.resize() }, s.prototype.shutdown = function() { switch (t.Instances.controlButtonUI.removeControl(this.game), this.removeKeyControl(), this.internalState) {
                case e.endGame:
                case e.playing:
                case e.introPlayer:
                    break;
                default:
                    this.introAnimation.ph2Animations.removeListeners("message_anim"), this.introAnimation.ph2Animations.removeListeners("transport_anim"), this.introAnimation.ph2Animations.stop(), this.introAnimation.destroy() } this.introAnimation = null, this.game.onFocus.remove(this.onFocus, this), this.game.onBlur.remove(this.onBlur, this), Game.Instances.onIncorrectOrientation.remove(this.onIncorrecOrientation, this), Game.Instances.onCorrectOrientation.remove(this.onCorrectOrientation, this), this.componentManager.removeComponent(this.componentCollision), this.componentManager.removeComponent(this.componentSpawn), this.componentManager.destroy(), this.componentManager = null, this.componentCollision = null, this.componentSpawn = null, t.AnimationPool.instance.clearAll(), this.player.destroy(), this.player = null; for (var i = 0, n = this.spots; i < n.length; i++) n[i].destroy();
            this.spots = []; for (var s = 0, o = this.bullets.concat(this.bulletsDead); s < o.length; s++) o[s].render();
            this.bullets = [], this.bulletsDead = [] }, s }(Phaser.State);
    t.BossState = n }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e;! function(t) { t[t.introShowPlayer = 0] = "introShowPlayer", t[t.introMessage = 1] = "introMessage", t[t.introPlayer = 2] = "introPlayer", t[t.playing = 3] = "playing", t[t.endGame = 4] = "endGame" }(e = t.CombatInternalState || (t.CombatInternalState = {})); var i;! function(t) { t[t.LEFT = 0] = "LEFT", t[t.RIGHT = 1] = "RIGHT", t[t.ONE = 2] = "ONE", t[t.TWO = 3] = "TWO", t[t.THREE = 4] = "THREE" }(i || (i = {})); var n = function(n) {
        function s() { return n.call(this) || this } return __extends(s, n), s.prototype.init = function() { t.Instances.controlButtonUI.addControl(this.game), t.Audios.playMusic(this.game, t.MUSIC.gp2), this.isPause = !1, this.game.world.removeAll(), this.lastWidth = this.game.width, this.lastBgScale = 1, this.battleData = t.GameStateManager.instances.levelData.battle, this.enemyCount = 0, this.isTutorial = 0 === t.GameStateManager.instances.levelIndex, this.waves = this.battleData.waves.length; for (var e = 0, i = this.battleData.waves; e < i.length; e++)
                for (var n = 0, s = i[e]; n < s.length; n++) { s[n];
                    this.enemyCount++ } this.currentWave = 0, this.bullets = [], this.enemies = [], this.bulletsDead = [], this.keys = [], this.isInactiveAnim = !1, this.isNextFirstChangeSpot = !0, this.isChangeSpot = !1, this.currentPlayerSpot = 1, this.itemEnableSpawn = !0, this.nextItem = this.battleData.itemSpawn, this.pauseFocus = !1, this.pauseOrientation = !1, this.game.onFocus.add(this.onFocus, this), this.game.onBlur.add(this.onBlur, this), Game.Instances.onIncorrectOrientation.add(this.onIncorrecOrientation, this), Game.Instances.onCorrectOrientation.add(this.onCorrectOrientation, this) }, s.prototype.create = function() { n.prototype.create.call(this), this.lives = this.battleData.lives, this.componentManager = Ph2.ComponentPlugin.initComponents(this), this.componentCollision = this.componentManager.addComponent(new t.GroupCollisionChecker), this.componentSpawn = this.componentManager.addComponent(new t.SpawnerManager), this.componentOverlay = this.componentManager.addComponent(new t.Overlay(this.game, .7)), this.mainGroup = this.game.add.group(), this.bulletGroup = this.game.add.group(), this.enemyGroup = this.game.add.group(), this.enemyUpGroup = this.game.add.group(), this.itemGroup = this.game.add.group(), this.animGroup = this.game.add.group(), this.overlayGroup = this.game.add.group(), this.bg = new Phaser.Sprite(this.game, 0, 0, "bg_1"), this.bg.anchor.set(.5, 0), this.bg.x = this.game.width / 2, this.whitefade = this.game.add.graphics(0, 0), this.whitefade.beginFill(16777215, 1), this.whitefade.drawRect(0, 0, this.game.width, this.game.height), this.whitefade.endFill(), this.whitefade.visible = !1, this.whitefade.alpha = 0, this.addSpots(), this.addPlayer(), this.addXlr8Bullet(), this.ui = new t.UIGameplayBattle(this, this.enemyCount), this.uiPause = new t.UIPause(this), this.uiConfirmation = new t.UIConfirmation(this), this.uiLevelCompleted = new t.UILevelCompleted(this, t.GameStateManager.instances.levelIndex), this.uiGameOver = new t.UIGameOver(this), this.uiTutorial = new t.UITutorial(this, t.TutorialID.combat1), this.uiTutorialGame = new t.UITutorialGame(this, t.TutorialID.combat1), this.timerInit = this.game.time.create(), this.mainGroup.add(this.bg), this.mainGroup.add(this.enemyGroup), this.mainGroup.add(this.itemGroup), this.mainGroup.add(this.bulletGroup), this.mainGroup.add(this.player), this.mainGroup.add(this.enemyUpGroup), this.mainGroup.add(this.animGroup), this.mainGroup.add(this.ui), this.mainGroup.add(this.whitefade), this.overlayGroup.add(this.componentOverlay.overlaySprite), this.overlayGroup.add(this.uiPause), this.overlayGroup.add(this.uiLevelCompleted), this.overlayGroup.add(this.uiPause), this.overlayGroup.add(this.uiGameOver), this.overlayGroup.add(this.uiTutorial), this.overlayGroup.add(this.uiTutorialGame), this.componentCollision.addPairsCollisions(t.CollisionGroups.PLAYER, t.CollisionGroups.BULLETENEMY), this.componentCollision.addPairsCollisions(t.CollisionGroups.PLAYER, t.CollisionGroups.ENEMY), this.componentCollision.addPairsCollisions(t.CollisionGroups.ENEMY, t.CollisionGroups.BULLETPLAYER), this.componentCollision.addPairsCollisions(t.CollisionGroups.BOSS, t.CollisionGroups.BULLETPLAYER), this.componentCollision.addPairsCollisions(t.CollisionGroups.ITEM, t.CollisionGroups.BULLETPLAYER), this.componentCollision.addCollisionBody(this.player, t.CollisionGroups.PLAYER), this.componentCollision.onCollision.add(this.checkCollisionGroup, this), this.componentSpawn.onSpawn.add(this.spawnElement, this), t.Instances.transitionAnim.playOut(), t.Instances.transitionAnim.onCompletedOut.addOnce(this.initIntroAnimationTransformation, this), this.addKeyControl(), t.AnimationPool.instance.setInitScale(this.game, this.lastBgScale), this.resize() }, s.prototype.cheatUsed = function(t) { this.player.stop(); for (var e = 0, i = this.spots; e < i.length; e++) i[e].disableInput(); for (var n = 0, s = this.enemies; n < s.length; n++) s[n].stop(); for (var o = 0, a = this.bullets; o < a.length; o++) a[o].stop();
            this.game.state.start(t, !0, !1, !0) }, s.prototype.addKeyControl = function() { var t;
            (t = this.game.input.keyboard.addKey(Phaser.Keyboard.LEFT)).onDown.add(this.pressKeyLeft, this), this.keys[i.LEFT] = t, (t = this.game.input.keyboard.addKey(Phaser.Keyboard.RIGHT)).onDown.add(this.pressKeyRight, this), this.keys[i.RIGHT] = t, (t = this.game.input.keyboard.addKey(Phaser.Keyboard.ONE)).onDown.add(this.pressKey1, this), this.keys[i.ONE] = t, (t = this.game.input.keyboard.addKey(Phaser.Keyboard.TWO)).onDown.add(this.pressKey2, this), this.keys[i.TWO] = t, (t = this.game.input.keyboard.addKey(Phaser.Keyboard.THREE)).onDown.add(this.pressKey3, this), this.keys[i.THREE] = t }, s.prototype.disableKeyControl = function() { this.keys[i.LEFT].onDown.remove(this.pressKeyLeft, this), this.keys[i.RIGHT].onDown.remove(this.pressKeyRight, this), this.keys[i.ONE].onDown.remove(this.pressKey1, this), this.keys[i.TWO].onDown.remove(this.pressKey2, this), this.keys[i.THREE].onDown.remove(this.pressKey3, this) }, s.prototype.enableKeyControl = function() { this.keys[i.LEFT].onDown.add(this.pressKeyLeft, this), this.keys[i.RIGHT].onDown.add(this.pressKeyRight, this), this.keys[i.ONE].onDown.add(this.pressKey1, this), this.keys[i.TWO].onDown.add(this.pressKey2, this), this.keys[i.THREE].onDown.add(this.pressKey3, this) }, s.prototype.removeKeyControl = function() { for (var t = 0, e = this.keys; t < e.length; t++) e[t].onDown.removeAll(this) }, s.prototype.pressKey1 = function() { this.startChangeSpot(0) }, s.prototype.pressKey2 = function() { this.startChangeSpot(1) }, s.prototype.pressKey3 = function() { this.startChangeSpot(2) }, s.prototype.pressKeyLeft = function() { this.currentPlayerSpot > 0 && this.startChangeSpot(this.currentPlayerSpot - 1) }, s.prototype.pressKeyRight = function() { this.currentPlayerSpot < 2 && this.startChangeSpot(this.currentPlayerSpot + 1) }, s.prototype.addPlayer = function() { this.player = new t.Player(this.game, this), this.player.visible = !1, this.player.x = this.spots[this.currentPlayerSpot].x, this.player.y = this.game.height - t.ConfigGame.playerY }, s.prototype.additem = function(e, i, n) { t.Audios.playSfx(this.game, "powerup_appears"), this.item = new t.ItemPowerup(this.game, this, 0, n), this.item.x = e, this.item.y = i, this.item.setBgScale(this.lastBgScale), this.item.setPerpective(), this.itemGroup.add(this.item), this.componentCollision.addCollisionBody(this.item, t.CollisionGroups.ITEM) }, s.prototype.addEnemy = function(e) { var i;
            (i = new t.Enemy(this.game, this, e.type, e.lane)).y = -100, i.setOrigin(this.lastBgScale), i.moveToOrigin(), i.setTarget(this.lastBgScale), i.initMove(), this.componentCollision.addCollisionBody(i, t.CollisionGroups.ENEMY), this.enemies.push(i), this.enemyGroup.add(i), this.enemyGroup.sendToBack(i) }, s.prototype.addXlr8Bullet = function() { this.bulletXlr8 = new Phaser.Sprite(this.game, this.spots[this.currentPlayerSpot].x, this.spots[this.currentPlayerSpot].y, "atlas_gameplay", "xlr8_attack1.png"), this.bulletXlr8.anchor.set(.5, 1); var t = Phaser.Animation.generateFrameNames("xlr8_attack", 1, 6, ".png");
            this.bulletXlr8.animations.add("attack", t, 30, !1).onComplete.add(this.endXlr8Attack, this), this.bulletGroup.add(this.bulletXlr8), this.bulletXlr8.visible = !1 }, s.prototype.endXlr8Attack = function() { this.player.endAttackXlr8(), this.bulletXlr8.visible = !1 }, s.prototype.addSpots = function() { this.spots = []; var e;
            (e = new t.Spot(this.game, 0, this)).x = this.game.width / 2 - t.ConfigGame.spotsDistanceX, e.y = this.game.height - t.ConfigGame.spotsY, this.spots.push(e), (e = new t.Spot(this.game, 1, this)).x = this.game.width / 2, e.y = this.game.height - t.ConfigGame.spotsY, this.spots.push(e), (e = new t.Spot(this.game, 2, this)).x = this.game.width / 2 + t.ConfigGame.spotsDistanceX, e.y = this.game.height - t.ConfigGame.spotsY, this.spots.push(e) }, s.prototype.createBullet = function() { var e; return this.bulletsDead.length > 0 ? (e = this.bulletsDead.splice(0, 1)[0]).wakeup() : (e = new t.Bullet(this.game, this), this.bulletGroup.add(e)), e }, s.prototype.initIntroAnimationTransformation = function() { for (var i = 0, n = this.spots; i < n.length; i++) n[i].disableInput();
            this.ui.disableAllInput(), this.disableKeyControl(), t.Audios.playSfx(this.game, "banner_fase3"), this.internalState = e.introShowPlayer, this.introAnimation = this.game.add.ph2AnimationObject(this.game.width / 2, this.game.height / 2, "character", "character_atlas"), this.animGroup.add(this.introAnimation); var s = t.GameStateManager.instances.getLevel(),
                o = t.VisualData.battleCharacter[s.character].intro;
            this.introAnimation.ph2Animations.play(o, 1, !1).onComplete.addOnce(this.initIntroAnimationMessage, this) }, s.prototype.initIntroAnimationMessage = function() { this.internalState = e.introMessage, this.introAnimation.destroy(), this.introAnimation = this.game.add.ph2AnimationObject(this.game.width / 2, this.game.height / 2, "message", "ui_gameplay_battle"); var t = Ph2.AnimationSystem.findObject("base/text", this.introAnimation);
            t.loadTexture("atlas_texts_debugging"), t.frameName = "ui_gameplay_text1.png", this.animGroup.add(this.introAnimation), this.introAnimation.ph2Animations.play("message_anim", 1, !1).onComplete.addOnce(this.initIntroCharacterAnimation, this) }, s.prototype.initIntroCharacterAnimation = function() { this.internalState = e.introPlayer, this.introAnimation.destroy(), this.introAnimation = t.AnimationPool.instance.getPh2Animation(this.game, "transport_fx", "atlas_gameplay", !0), this.introAnimation.x = this.spots[this.currentPlayerSpot].x, this.introAnimation.y = this.spots[this.currentPlayerSpot].y - 100, this.introAnimation.ph2Animations.play("transport_anim", 1, !1).onComplete.addOnce(this.endIntroAnim, this), this.animGroup.add(this.introAnimation) }, s.prototype.endIntroAnim = function() { if (this.player.visible = !0, this.introAnimation = null, this.isTutorial) this.internalState = e.playing, this.showTutorial();
            else { this.ui.enableAllInput(), this.internalState = e.playing; for (var i = 0, n = this.spots; i < n.length; i++) n[i].enableInput();
                this.enableKeyControl(), this.timerInit.add(t.ConfigGame.timeDelayStartbattle * Phaser.Timer.SECOND, this.startCombat, this), this.timerInit.start() } }, s.prototype.showTutorial = function() { this.componentOverlay.revive(), this.componentOverlay.fadeIn(500), this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiTutorialGame), this.uiTutorialGame.showTutorial() }, s.prototype.closeTutorial = function() { this.componentOverlay.fadeOut(500, .7, this.onEndOverlayCloseTutorial, this) }, s.prototype.onEndOverlayCloseTutorial = function() { this.componentOverlay.kill(), this.internalState = e.playing; for (var i = 0, n = this.spots; i < n.length; i++) n[i].enableInput();
            this.enableKeyControl(), this.timerInit.add(t.ConfigGame.timeDelayStartbattle * Phaser.Timer.SECOND, this.startCombat, this), this.timerInit.start(), this.ui.enableAllInput() }, s.prototype.startCombat = function() { this.initPlayerShoot(), this.startWave() }, s.prototype.startWave = function() { this.waveData = this.battleData.waves[this.currentWave], this.enemiesDeath = 0, this.enemiesWave = this.waveData.length; for (var t, e = 0; e < this.enemiesWave; e++) t = { type: this.waveData[e].type, lane: this.waveData[e].lane, direction: this.waveData[e].direction, distance: this.waveData[e].distance }, this.componentSpawn.addSpawnData("enemy", this.waveData[e].time * Phaser.Timer.SECOND, t);
            this.componentSpawn.startTimer() }, s.prototype.initPlayerShoot = function() { this.player.shootAnim() }, s.prototype.initNextWave = function() {++this.currentWave < this.waves ? (this.componentSpawn.resetSpawn(), this.enemiesDeath = 0, this.startWave()) : this.initWinAnim() }, s.prototype.shootPlayerXlr8 = function() { var e = this.searchEnemy(this.currentPlayerSpot),
                i = this.searchItem(this.currentPlayerSpot, e); if (this.bulletXlr8.visible = !0, this.bulletXlr8.animations.play("attack"), this.bulletXlr8.x = this.spots[this.currentPlayerSpot].x, t.Audios.playShotPlayer(this.game), i) { this.bulletXlr8.height = this.spots[this.currentPlayerSpot].y - i.y;
                s = 180 * Math.atan2(i.y - this.spots[this.currentPlayerSpot].y, i.x - this.spots[this.currentPlayerSpot].x) / Math.PI;
                this.bulletXlr8.angle = s + 90, i.removeLifes() } else if (e) { this.bulletXlr8.height = this.spots[this.currentPlayerSpot].y - e.y;
                s = 180 * Math.atan2(e.y - this.spots[this.currentPlayerSpot].y, e.x - this.spots[this.currentPlayerSpot].x) / Math.PI;
                this.damageEnemy(e), this.bulletXlr8.angle = s + 90 } else { this.bulletXlr8.scale.y = 1; var n = void 0; switch (this.currentPlayerSpot) {
                    case 0:
                        n = this.game.width / 2 - 140 * this.lastBgScale; break;
                    case 1:
                        n = this.game.width / 2; break;
                    case 2:
                        n = this.game.width / 2 + 140 * this.lastBgScale } var s = 180 * Math.atan2(0 - this.spots[this.currentPlayerSpot].y, n - this.spots[this.currentPlayerSpot].x) / Math.PI;
                this.bulletXlr8.angle = s + 90 } }, s.prototype.searchEnemy = function(e) { for (var i = null, n = 0, s = this.enemies; n < s.length; n++) { var o = s[n];
                o.lane === e && (null === i || o.y > i.y) && o.y < this.spots[this.currentPlayerSpot].y && o.y > t.ConfigGame.destroyBulletY && (i = o) } return i }, s.prototype.searchItem = function(e, i) { return this.item && this.item.lane === e && (null === i || this.item.y > i.y) && this.item.y < this.spots[this.currentPlayerSpot].y && this.item.y > t.ConfigGame.destroyBulletY ? this.item : null }, s.prototype.update = function() { console.log() }, s.prototype.shootPlayer = function() { var e, i, n, s = t.GameStateManager.instances.getLevel(),
                o = new Phaser.Point(t.ConfigGame.battleShoots[s.character].bulletOffset.x, t.ConfigGame.battleShoots[s.character].bulletOffset.y),
                a = new Phaser.Point(0, 0),
                r = new Phaser.Point(0, 0); switch (0 === this.currentPlayerSpot && (o.x = -1 * o.x), this.currentPlayerSpot) {
                case 0:
                    a.x = this.player.x + o.x + 40 * this.lastBgScale, a.y = this.player.y + o.y + 100; break;
                case 1:
                    a.x = this.player.x + o.x, a.y = this.player.y + o.y + 100; break;
                case 2:
                    a.x = this.player.x + o.x - 40 * this.lastBgScale, a.y = this.player.y + o.y + 100 } e = this.createBullet(), "fourarms" === s.character || "greymatter" === s.character ? e.setBullet(t.BulletType.playerRock) : e.setBullet(t.BulletType.player), e.setBodyBlueColor(), e.x = this.player.x + o.x, e.y = this.player.y + o.y, i = 180 * Math.atan2(a.y - e.y, e.x - a.x) / Math.PI, e.setAngle(i - 90), n = Math.abs(a.x - e.x) + Math.abs(a.y - e.y), r.x = (a.x - e.x) / n, r.y = (a.y - e.y) / n, this.componentCollision.addCollisionBody(e, t.CollisionGroups.BULLETPLAYER); var h = t.ConfigGame.battleShoots[s.character].bulletSpeed;
            e.velocity.set(h * r.x, -h * r.y), e.setInitScale(this.lastBgScale), t.Audios.playShotPlayer(this.game), this.bullets.push(e) }, s.prototype.shootEnemy = function(e, i) { var n, s, o, a;
            t.Audios.playSfx(this.game, "enemy_shot"), o = Math.abs(e.x - this.spots[e.lane].x) + Math.abs(e.y - this.player.y), (n = this.createBullet()).setBullet(t.BulletType.enemy), n.setBodyGreenColor(), this.componentCollision.addCollisionBody(n, t.CollisionGroups.BULLETENEMY), n.x = e.x, n.y = e.y, a = 180 * Math.atan2(this.player.y - n.y, this.spots[e.lane].x - n.x) / Math.PI, n.setAngle(a), s = new Phaser.Point((this.spots[e.lane].x - e.x) / o, (this.player.y - e.y) / o), n.velocity.set(s.x * e.bulletSpeed, s.y * e.bulletSpeed), n.setInitScale(this.lastBgScale), this.bullets.push(n) }, s.prototype.checkCollisionGroup = function(e, i, n, s) { if (!1 === this.isChangeSpot && n === t.CollisionGroups.PLAYER && s === t.CollisionGroups.BULLETENEMY && !1 === this.player.isInvulnerable) { var o = i.rectangleBody.x,
                    a = i.rectangleBody.y; return this.playImpactAnim(o, a, i.angleSprite), this.damagePlayer(this.battleData.damage.bullet), this.player.stun(), this.nextItem > 0 && (this.nextItem = this.battleData.itemSpawn), void this.destroyBullet(i) } return n === t.CollisionGroups.ENEMY && s === t.CollisionGroups.BULLETPLAYER ? (this.damageEnemy(e), void this.destroyBullet(i)) : n !== t.CollisionGroups.PLAYER || s !== t.CollisionGroups.ENEMY || e.isInvulnerable ? void(n !== t.CollisionGroups.BOSS || s !== t.CollisionGroups.BULLETPLAYER ? n === t.CollisionGroups.ITEM && s === t.CollisionGroups.BULLETPLAYER && (e.removeLifes(), this.destroyBullet(i)) : this.destroyBullet(i)) : (this.player.stun(), void this.explodeEnemyPlayer(i)) }, s.prototype.damageEnemy = function(e) { 0 === e.lives - 1 && (t.Audios.playDestroyEnemy(this.game), this.playDestroyEnemy(e.rectangleBody.x, e.rectangleBody.y), this.itemEnableSpawn && 0 === --this.nextItem && (this.additem(e.rectangleBody.x, e.rectangleBody.y, e.lane), this.itemEnableSpawn = !1)), e.damage() }, s.prototype.checkCompletedWave = function() { this.ui.updateEnemiesCount(this.enemyCount), this.enemiesDeath === this.enemiesWave && (this.componentSpawn.stopTimer(), this.initNextWave()) }, s.prototype.spawnElement = function(t, e) { for (var i = 0, n = t.length; i < n; i++) switch (t[i]) {
                case "enemy":
                    this.addEnemy(e[i]) } }, s.prototype.startInactiveAnim = function() { this.isInactiveAnim = !0, this.inactiveAnim = this.game.add.ph2AnimationObject(0, 0, "tutorial", "atlas_gameplay"), this.animGroup.add(this.inactiveAnim), this.startLeftInactiveAnim() }, s.prototype.startLeftInactiveAnim = function() { this.inactiveAnim.x = this.spots[2].x + 50, this.inactiveAnim.y = this.spots[2].y + 50; var t = this.game.device.desktop ? "desktop" : "mobile";
            this.inactiveAnim.ph2Animations.play("tutorial_tap_" + t, 1, !1).onComplete.addOnce(this.startRightInactiveAnim, this) }, s.prototype.startRightInactiveAnim = function() { this.inactiveAnim.x = this.spots[0].x + 50, this.inactiveAnim.y = this.spots[0].y + 50; var t = this.game.device.desktop ? "desktop" : "mobile";
            this.inactiveAnim.ph2Animations.play("tutorial_tap_" + t, 1, !1).onComplete.addOnce(this.startLeftInactiveAnim, this) }, s.prototype.stopInactiveAnim = function() { this.isInactiveAnim && (this.inactiveAnim.visible = !1, this.inactiveAnim.ph2Animations.stop()), this.isInactiveAnim = !1 }, s.prototype.startChangeSpot = function(e) { var i; if (i = this.spots[e], this.inactiveAnim && this.stopInactiveAnim(), this.isNextFirstChangeSpot = !1, this.player.x !== i.x && !this.player.isShooting && !this.player.isDisableMove) { t.Audios.playChangeSpot(this.game), this.isChangeSpot = !0, this.currentPlayerSpot = e, this.playSpotOutAnim(e); for (var n = 0, s = this.spots; n < s.length; n++)(i = s[n]).disableInput();
                this.disableKeyControl(), i = this.spots[e], this.player.changeSpotOut() } }, s.prototype.playSpotOutAnim = function(e) { var i = t.AnimationPool.instance.getPh2Animation(this.game, "transport_fx", "atlas_gameplay", !0);
            i.x = this.spots[this.currentPlayerSpot].x, i.y = this.spots[this.currentPlayerSpot].y - 100, i.ph2Animations.play("transport_anim", 1, !1).onComplete.addOnce(this.onEndOutAnim, this, 0, e), this.animGroup.add(i) }, s.prototype.onEndOutAnim = function(t, e, i) { this.player.changeSpotIn(this.spots[i].x, i), this.playSpotInAnim(i) }, s.prototype.playSpotInAnim = function(e) { var i = t.AnimationPool.instance.getPh2Animation(this.game, "transport_fx", "atlas_gameplay", !0);
            i.x = this.spots[e].x, i.y = this.spots[e].y - 100, i.ph2Animations.play("transport_anim", 1, !1).onComplete.addOnce(this.stopChangeSpot, this), this.animGroup.add(i) }, s.prototype.stopChangeSpot = function() { if (this.isChangeSpot = !1, this.internalState !== e.endGame) { for (var t = 0, i = this.spots; t < i.length; t++) i[t].enableInput();
                this.enableKeyControl() } }, s.prototype.startEndAnim = function() { t.Instances.transitionAnim.playIn(), t.Instances.transitionAnim.onCompletedIn.addOnce(this.onCompletedTransition, this) }, s.prototype.onCompletedTransition = function() { this.nextState() }, s.prototype.playImpactAnim = function(e, i, n) { var s = t.AnimationPool.instance.getPh2Animation(this.game, "shoot", "atlas_gameplay", !0);
            s.x = e, s.y = i, s.angle = n, s.ph2Animations.play("shoot_anim", 1, !1), this.animGroup.add(s) }, s.prototype.destroyBullet = function(e) { var i = this.bullets.indexOf(e); - 1 !== i && (this.bullets.splice(i, 1), e.sleep(), this.bulletsDead.push(e), this.componentCollision.removeCollisionBody(e, t.CollisionGroups.BULLETENEMY), this.componentCollision.removeCollisionBody(e, t.CollisionGroups.BULLETPLAYER)) }, s.prototype.playDestroyEnemy = function(e, i) { var n = t.AnimationPool.instance.getPh2Animation(this.game, "exp_enemy", "atlas_gameplay", !0);
            n.x = e, n.y = i, n.ph2Animations.play("exp_enemy_anim", 1, !1), this.animGroup.add(n) }, s.prototype.explodeEnemyLimitBottom = function(e) { var i = this.enemies.indexOf(e); - 1 !== i && (this.playExplosionEnemy(e.x, e.y), this.enemies.splice(i, 1), this.componentCollision.removeCollisionBody(e, t.CollisionGroups.ENEMY), e.destroy(), this.enemiesDeath++, this.enemyCount--, this.damagePlayer(this.battleData.damage.collisionOmnitrix)) }, s.prototype.explodeEnemyPlayer = function(e) { var i = this.enemies.indexOf(e); - 1 !== i && (this.playExplosionEnemy(e.x, e.y), this.enemies.splice(i, 1), this.componentCollision.removeCollisionBody(e, t.CollisionGroups.ENEMY), e.destroy(), this.enemiesDeath++, this.enemyCount--, this.damagePlayer(this.battleData.damage.collisionPlayer)) }, s.prototype.damagePlayer = function(e) { this.lives = this.lives - e < 0 ? 0 : this.lives - e, this.lives < t.ConfigGame.levelLives / 4 && !this.inactiveAnim && this.isNextFirstChangeSpot && this.startInactiveAnim(), this.ui.setLives(this.lives, this.battleData.lives), 0 !== this.lives ? this.checkCompletedWave() : this.initGameOver() }, s.prototype.playExplosionEnemy = function(e, i) { var n = t.AnimationPool.instance.getPh2Animation(this.game, "out_enemy", "atlas_gameplay", !0);
            n.x = e, n.y = i, n.ph2Animations.play("out_enemy_anim", 1, !1), this.animGroup.add(n) }, s.prototype.destroyEnemy = function(e) { var i = this.enemies.indexOf(e); - 1 !== i && (this.enemies.splice(i, 1), this.componentCollision.removeCollisionBody(e, t.CollisionGroups.ENEMY), e.destroy(), this.enemiesDeath++, this.enemyCount--, this.checkCompletedWave()) }, s.prototype.playActiveAnim = function() { var e = t.AnimationPool.instance.getPh2Animation(this.game, "life_out", "atlas_gameplay", !0);
            e.x = this.item.x, e.y = this.item.y, e.ph2Animations.play("life_out_anim", 1, !1), this.animGroup.add(e) }, s.prototype.startDefeatAll = function() { var e; for (t.Audios.playSfx(this.game, "powerup_used"); this.enemies.length > 0;) this.playDestroyEnemy(this.enemies[0].rectangleBody.x, this.enemies[0].rectangleBody.y), e = this.enemies[0].lives, this.enemies[0].damage(e);
            this.itemEnableSpawn = !0, this.nextItem = this.battleData.itemSpawn, this.componentCollision.removeCollisionBody(this.item, t.CollisionGroups.ITEM), this.playActiveAnim(), this.item = null }, s.prototype.disappearItem = function() { this.componentCollision.removeCollisionBody(this.item, t.CollisionGroups.ITEM), this.item.destroy(), this.item = null, this.itemEnableSpawn = !0, this.nextItem = this.battleData.itemSpawn }, s.prototype.initWinAnim = function() { if (t.Instances.dataManager.completedLevel(t.GameStateManager.instances.levelIndex), this.inactiveAnim && this.stopInactiveAnim(), this.internalState !== e.endGame) { this.internalState = e.endGame, this.ui.disableAllInput(); for (var i = 0, n = this.spots; i < n.length; i++) n[i].disableInput();
                this.disableKeyControl(), this.componentSpawn.stopTimer(), this.componentCollision.removeCollisionBody(this.item, t.CollisionGroups.ITEM), this.player.stopLogic(), this.player.destroyWinAnim(); for (var s = 0, o = this.bullets; s < o.length; s++) { var a = o[s];
                    this.componentCollision.removeCollisionBody(a, t.CollisionGroups.BULLETENEMY), this.componentCollision.removeCollisionBody(a, t.CollisionGroups.BULLETPLAYER) } } }, s.prototype.onEndBossWinAnim = function() { this.player.destroyWinAnim() }, s.prototype.onEndPlayerWinAnim = function() { t.Audios.playSfx(this.game, "stage_completed"), this.game.time.events.add(1e3, this.completedGame, this) }, s.prototype.initGameOver = function() { if (this.inactiveAnim && this.stopInactiveAnim(), this.internalState !== e.endGame) { t.Audios.playSfx(this.game, "game_over"), this.internalState = e.endGame, this.ui.disableAllInput(); for (var i = 0, n = this.spots; i < n.length; i++) n[i].disableInput();
                this.disableKeyControl(); for (var s = 0, o = this.enemies; s < o.length; s++) o[s].destroyGameoverAnim();
                this.player.stopLogic(), this.componentSpawn.stopTimer(), this.componentCollision.removeCollisionBody(this.item, t.CollisionGroups.ITEM), this.player.destroyGameoverAnim(); for (var a = 0, r = this.bullets; a < r.length; a++) { var h = r[a];
                    this.componentCollision.removeCollisionBody(h, t.CollisionGroups.BULLETENEMY), this.componentCollision.removeCollisionBody(h, t.CollisionGroups.BULLETPLAYER) } } }, s.prototype.onEndPlayerGameOverAnim = function() { this.game.time.events.add(1e3, this.gameOver, this) }, s.prototype.completedGame = function() { this.player.stop(); for (var t = 0, e = this.spots; t < e.length; t++) e[t].disableInput();
            this.disableKeyControl(); for (var i = 0, n = this.bullets; i < n.length; i++) n[i].stop();
            console.log("win"), this.showLevelCompleted() }, s.prototype.showLevelCompleted = function() { this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiLevelCompleted), this.componentOverlay.revive(), this.componentOverlay.fadeIn(500), this.uiLevelCompleted.show() }, s.prototype.gameOver = function() { this.player.stop(); for (var t = 0, e = this.enemies; t < e.length; t++) e[t].stop(); for (var i = 0, n = this.spots; i < n.length; i++) n[i].disableInput();
            this.disableKeyControl(); for (var s = 0, o = this.bullets; s < o.length; s++) o[s].stop();
            console.log("GameOver"), this.showGameOver() }, s.prototype.showGameOver = function() { this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiGameOver), this.componentOverlay.revive(), this.componentOverlay.fadeIn(500), this.uiGameOver.show() }, s.prototype.nextState = function() { var e = t.GameStateManager.instances.endGame();
            this.game.state.start(e, !0, !1, !0) }, s.prototype.closeConfirmation = function() { this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiPause), this.uiPause.enableAllInput() }, s.prototype.pressHowToPlay = function() { this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiTutorial), this.uiTutorial.showHowToPlay() }, s.prototype.closeHowToPlay = function() { this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiPause), this.uiPause.enableAllInput() }, s.prototype.pressExit = function() { this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiConfirmation), this.uiConfirmation.show(t.CONFIRMATIONTYPE.EXIT) }, s.prototype.goToLevelSelect = function() { t.Instances.transitionAnim.playIn(), t.Instances.transitionAnim.onCompletedIn.addOnce(this.transitionLevelSelect, this) }, s.prototype.transitionLevelSelect = function() { this.game.state.start("debugginglevelselect") }, s.prototype.pressRestart = function() { this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiConfirmation), this.uiConfirmation.show(t.CONFIRMATIONTYPE.RESTART) }, s.prototype.restartLevel = function() { t.Instances.transitionAnim.playIn(), t.Instances.transitionAnim.onCompletedIn.addOnce(this.transitionLevel, this) }, s.prototype.transitionLevel = function() { var e = t.GameStateManager.instances.start(t.GameStateManager.instances.levelIndex);
            this.game.state.start(e, !0, !1, t.GameStateManager.instances.levelIndex) }, s.prototype.restartLevelGameOver = function() { t.Instances.transitionAnim.playIn(), t.Instances.transitionAnim.onCompletedIn.addOnce(this.transitionLevelRestart, this) }, s.prototype.transitionLevelRestart = function() { var e = t.GameStateManager.instances.restart();
            this.game.state.start(e, !0, !1, !1) }, s.prototype.switchAudio = function() { var e = t.Instances.dataManager.getAudio(); return t.Instances.dataManager.setAudio(!e), !e }, s.prototype.pressPause = function() { switch (this.isPause = !0, this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiPause), this.componentOverlay.revive(), this.componentOverlay.fadeIn(500), this.uiPause.show(), this.ui.visible = !1, this.timerInit.pause(), this.internalState) {
                case e.playing:
                    this.pauseGame(); break;
                default:
                    this.introAnimation.ph2Animations.pause() } this.lastSpotEnable = this.spots[0].isEnableInput; for (var t = 0, i = this.spots; t < i.length; t++) i[t].disableInput();
            this.item && this.item.pause(), this.disableKeyControl() }, s.prototype.pressResume = function() { this.ui.visible = !0, this.componentOverlay.fadeOut(500, .7, this.onEndOverlayPauseFadeOut, this) }, s.prototype.onEndOverlayPauseFadeOut = function() { switch (this.isPause = !1, this.ui.enableAllInput(), this.componentOverlay.kill(), this.timerInit.resume(), this.internalState) {
                case e.playing:
                    this.resumeGame(); break;
                default:
                    this.introAnimation.ph2Animations.resume() } if (this.lastSpotEnable) { for (var t = 0, i = this.spots; t < i.length; t++) i[t].enableInput();
                this.enableKeyControl() } this.item && this.item.resume() }, s.prototype.onBlur = function() { if (this.ui.pauseEnable && (this.ui.disableAllInput(), this.pressPause()), this.pauseFocus = !0, this.uiTutorial.pause(), this.uiTutorialGame.pause(), t.Audios.onBlur(this.game), this.isPause) this.componentOverlay.pause();
            else switch (this.item && this.item.pause(), this.timerInit.pause(), this.internalState) {
                case e.endGame:
                case e.playing:
                    this.pauseGame(); break;
                default:
                    this.introAnimation.ph2Animations.pause() } }, s.prototype.onFocus = function() { this.pauseFocus = !1, this.checkResume() }, s.prototype.onIncorrecOrientation = function() { if (this.ui.pauseEnable && (this.ui.disableAllInput(), this.pressPause()), this.uiTutorial.pause(), this.uiTutorialGame.pause(), this.pauseOrientation = !0, t.Audios.onBlur(this.game), this.isPause) this.componentOverlay.pause();
            else switch (this.item && this.item.pause(), this.timerInit.pause(), this.internalState) {
                case e.endGame:
                case e.playing:
                    this.pauseGame(); break;
                default:
                    this.introAnimation.ph2Animations.pause() } }, s.prototype.onCorrectOrientation = function() { this.pauseOrientation = !1, this.checkResume() }, s.prototype.checkResume = function() { if (!this.pauseFocus && !this.pauseOrientation)
                if (this.uiTutorial.resume(), this.uiTutorialGame.resume(), t.Audios.onFocus(this.game), this.isPause) this.componentOverlay.resume();
                else switch (this.item && this.item.resume(), this.timerInit.resume(), this.internalState) {
                    case e.endGame:
                        break;
                    case e.playing:
                        this.resumeGame(); break;
                    default:
                        this.introAnimation.ph2Animations.resume() } }, s.prototype.pauseGame = function() { this.player.pause(), this.bulletXlr8 && (this.bulletXlr8.animations.paused = !0), this.componentSpawn.pauseTimer(); for (var e = 0, i = this.bullets; e < i.length; e++) i[e].pause(); for (var n = 0, s = this.enemies; n < s.length; n++) s[n].pause();
            this.inactiveAnim && this.inactiveAnim.ph2Animations.pause(), t.AnimationPool.instance.pauseAllActive(), this.ui.pause() }, s.prototype.resumeGame = function() { this.player.resume(), this.componentSpawn.resumeTimer(), this.bulletXlr8 && (this.bulletXlr8.animations.paused = !1); for (var e = 0, i = this.bullets; e < i.length; e++) i[e].resume(); for (var n = 0, s = this.enemies; n < s.length; n++) s[n].resume();
            this.inactiveAnim && this.inactiveAnim.ph2Animations.resume(), t.AnimationPool.instance.resumeAllActive(), this.ui.resume() }, s.prototype.resize = function() { this.uiPause.resize(), this.uiConfirmation.resize(), this.uiGameOver.resize(), this.uiLevelCompleted.resize(); var e = this.lastBgScale;
            this.game.width < 960 ? (this.bg.width = this.game.width + 320, this.spots[0].x = this.game.width / 2 - t.ConfigGame.spotsDistanceX * this.bg.scale.x, this.spots[1].x = this.game.width / 2, this.spots[2].x = this.game.width / 2 + t.ConfigGame.spotsDistanceX * this.bg.scale.x, this.lastBgScale = this.bg.scale.x) : this.game.width > 1280 ? (this.bg.width = this.game.width, this.spots[0].x = this.game.width / 2 - t.ConfigGame.spotsDistanceX * this.bg.scale.x, this.spots[1].x = this.game.width / 2, this.spots[2].x = this.game.width / 2 + t.ConfigGame.spotsDistanceX * this.bg.scale.x, this.lastBgScale = this.bg.scale.x) : (this.lastBgScale = 1, this.bg.scale.x = 1, this.spots[0].x = this.game.width / 2 - t.ConfigGame.spotsDistanceX, this.spots[1].x = this.game.width / 2, this.spots[2].x = this.game.width / 2 + t.ConfigGame.spotsDistanceX), this.introAnimation && (this.introAnimation.x = this.game.width / 2, this.introAnimation.y = this.game.height / 2), this.item && this.item.resize(this.lastBgScale); for (var i = 0, n = this.enemies; i < n.length; i++) n[i].resize(this.lastBgScale); for (var s = 0, o = this.bullets; s < o.length; s++) o[s].resize(this.lastBgScale); if (this.bulletXlr8) { var a = this.bulletXlr8.x - this.lastWidth / 2;
                this.bulletXlr8.x = this.game.width / 2 + a / e * this.lastBgScale } t.AnimationPool.instance.resizeAllActive(this.game, this.lastBgScale), this.bg.x = this.game.width / 2, this.player.x = this.spots[this.currentPlayerSpot].x, this.lastWidth = this.game.width, this.ui.resize() }, s.prototype.shutdown = function() { switch (t.Instances.controlButtonUI.removeControl(this.game), this.removeKeyControl(), this.internalState) {
                case e.endGame:
                    this.ui.resume(); break;
                case e.playing:
                    break;
                default:
                    this.introAnimation.ph2Animations.removeListeners("message_anim"), this.introAnimation.ph2Animations.removeListeners("transport_anim"), this.introAnimation.ph2Animations.stop(), this.introAnimation.destroy() } this.introAnimation = null, this.game.onFocus.remove(this.onFocus, this), this.game.onBlur.remove(this.onBlur, this), Game.Instances.onIncorrectOrientation.remove(this.onIncorrecOrientation, this), Game.Instances.onCorrectOrientation.remove(this.onCorrectOrientation, this), t.AnimationPool.instance.clearAll(), this.componentManager.removeComponent(this.componentCollision), this.componentManager.removeComponent(this.componentSpawn), this.componentManager.destroy(), this.componentManager = null, this.componentCollision = null, this.componentSpawn = null, this.player.destroy(), this.player = null; for (var i = 0, n = this.spots; i < n.length; i++) n[i].destroy();
            this.spots = []; for (var s = 0, o = this.bullets.concat(this.bulletsDead); s < o.length; s++) o[s].render();
            this.bullets = [], this.bulletsDead = [] }, s }(Phaser.State);
    t.CombatState = n }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e = function(e) {
        function i() { return e.call(this) || this } return __extends(i, e), i.prototype.init = function() { t.Audios.playMusic(this.game, t.MUSIC.gp1), this.pauseFocus = !1, this.pauseOrientation = !1, this.game.world.removeAll(), this.game.onFocus.add(this.onFocus, this), this.game.onBlur.add(this.onBlur, this), Game.Instances.onIncorrectOrientation.add(this.onIncorrecOrientation, this), Game.Instances.onCorrectOrientation.add(this.onCorrectOrientation, this), t.Instances.controlButtonUI.addControl(this.game), this.isTutorial = 0 === t.GameStateManager.instances.levelIndex }, i.prototype.create = function() { e.prototype.create.call(this), this.isFastTutorial = !1, this.mainGroup = this.game.add.group(), this.animGroup = this.game.add.group(), this.overlayGroup = this.game.add.group(), this.componentMgr = Ph2.ComponentPlugin.initComponents(this), this.componentOverlay = this.componentMgr.addComponent(new t.Overlay(this.game, .7)), this.levelData = t.GameStateManager.instances.getLevel(), this.uiGameplay = new t.UIGameplayFix(this, this.animGroup), this.uiPause = new t.UIPause(this), this.uiConfirmation = new t.UIConfirmation(this), this.uiTutorial = new t.UITutorial(this, t.TutorialID.fix), this.uiTutorialGame = new t.UITutorialGame(this, t.TutorialID.fix), this.timeInactive = this.game.time.create(!1), this.bg = new Phaser.Sprite(this.game, 0, 0, "gameplay_fix_bg"), this.mainGroup.add(this.bg), this.mainGroup.add(this.uiGameplay), this.overlayGroup.add(this.componentOverlay.overlaySprite), this.overlayGroup.add(this.uiPause), this.overlayGroup.add(this.uiConfirmation), this.overlayGroup.add(this.uiTutorial), this.overlayGroup.add(this.uiTutorialGame), this.createSwipeImage(), this.mainGroup.add(this.componentSwipeImage.group), t.GameStateManager.instances.addCheatKeys(this.game, this.cheatUsed, this), t.Instances.transitionAnim.playOut(), t.Instances.transitionAnim.onCompletedOut.addOnce(this.introAnim, this), this.resize() }, i.prototype.createSwipeImage = function() { for (var e, i = [], n = [], s = this.levelData.character, o = [], a = t.GameStateManager.instances.levelData.dna.bugCharacters[t.GameStateManager.instances.bug], r = [t.ConfigGame.bugCharacter[a].TOP, t.ConfigGame.bugCharacter[a].MID, t.ConfigGame.bugCharacter[a].BOT], h = 0, l = this.levelData.dna.fixParts.length; h < l; h++) { o[h] = this.levelData.dna.fixParts[h].slice(), o[h].splice(o[h].indexOf(r[h]), 1), o[h] = Phaser.ArrayUtils.shuffle(o[h]); for (var c = 0, u = o[h].length + 1; c < u; c++) e = 1 === c ? { id: r[h], atlas: t.VisualData.parts[r[h]][t.BodyParts[h]].atlas, key: t.VisualData.parts[r[h]][t.BodyParts[h]].key, offsetY: 0 } : c > 1 ? { id: o[h][c - 1], atlas: t.VisualData.parts[o[h][c - 1]][t.BodyParts[h]].atlas, key: t.VisualData.parts[o[h][c - 1]][t.BodyParts[h]].key, offsetY: 0 } : { id: o[h][c], atlas: t.VisualData.parts[o[h][c]][t.BodyParts[h]].atlas, key: t.VisualData.parts[o[h][c]][t.BodyParts[h]].key, offsetY: 0 }, h === t.BodyParts.TOP && (e.offsetY = 5), n.push(e);
                i.push({ icons: n, width: 573, height: t.ConfigGame.carrilHeight[h], distance: 579, offsetY: 5 }), n = [] } var p = this.game.width / 2 + 47;
            this.componentSwipeImage = this.componentMgr.addComponent(new t.SwipeCorrectImage(this.game, i, s, p, 135)), this.componentSwipeImage.onStartMove.add(this.onMoveSwipe, this), this.componentSwipeImage.onEndMove.add(this.onEndMoveSwipe, this), this.componentSwipeImage.onEndSwipe.add(this.onEndSwipe, this), this.componentSwipeImage.onStartSwipe.add(this.onInitSwipe, this) }, i.prototype.introAnim = function() { this.uiGameplay.disableAllInput(), this.componentSwipeImage.disableInput(), this.uiGameplay.playIntroAnimStep1() }, i.prototype.endIntroAnim = function() { this.isTutorial ? this.showTutorial() : (this.uiGameplay.enableAllInput(), this.componentSwipeImage.enableInput(), this.startInactiveTime()) }, i.prototype.showTutorial = function() { this.componentOverlay.revive(), this.componentOverlay.fadeIn(500), this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiTutorialGame), this.uiTutorialGame.showTutorial(), this.uiGameplay.hideButtonCompleted() }, i.prototype.closeTutorial = function() { this.uiGameplay.showButtonCompleted(), this.componentOverlay.fadeOut(500, .7, this.onEndOverlayCloseTutorial, this) }, i.prototype.onEndOverlayCloseTutorial = function() { this.componentOverlay.kill(), this.uiGameplay.enableAllInput(), this.componentSwipeImage.enableInput(), this.startInactiveTime() }, i.prototype.enableSwipe = function() { this.componentSwipeImage.enableInput() }, i.prototype.disableSwipe = function() { this.componentSwipeImage.disableInput() }, i.prototype.stopInactiveTime = function() { this.isFastTutorial = !1, this.isInactiveAnim ? (this.uiGameplay.stopInactiveAnim(), this.isInactiveAnim = !1) : (this.timeInactive.stop(), this.timeInactive.removeAll()) }, i.prototype.startInactiveTime = function() { this.timeInactive.removeAll(); var t = this.isFastTutorial ? 2 : 10;
            this.timeInactive.add(t * Phaser.Timer.SECOND, this.initInactiveAnim, this), this.timeInactive.start() }, i.prototype.initInactiveAnim = function() { this.isInactiveAnim = !0; var t = this.componentSwipeImage.isSwipeZoneCorrect(0),
                e = this.componentSwipeImage.isSwipeZoneCorrect(1),
                i = this.componentSwipeImage.isSwipeZoneCorrect(2);
            t ? e ? i ? this.uiGameplay.playInactiveAnim(3) : this.uiGameplay.playInactiveAnim(2) : this.uiGameplay.playInactiveAnim(1) : this.uiGameplay.playInactiveAnim(0) }, i.prototype.endInactiveAnim = function() { this.isInactiveAnim = !1, this.isFastTutorial = !0, this.startInactiveTime() }, i.prototype.cheatUsed = function(t) { this.game.state.start(t, !0, !1, !0) }, i.prototype.onInitSwipe = function() { this.uiGameplay.onInitSwipe() }, i.prototype.onMoveSwipe = function() { this.stopInactiveTime(), t.Audios.playSfx(this.game, "change_slide"), this.uiGameplay.disableCompletedButton() }, i.prototype.onEndMoveSwipe = function() { this.startInactiveTime(), this.uiGameplay.enableCompletedButton() }, i.prototype.onEndSwipe = function(e) { this.uiGameplay.onEndSwipe(), this.componentSwipeImage.isSwipeZoneCorrect(e) ? t.Audios.playSfx(this.game, "option_correct") : t.Audios.playSfx(this.game, "option_incorrect") }, i.prototype.checkCompleted = function() { t.GameStateManager.instances.bug + 1 >= t.GameStateManager.instances.fixCharacters.length ? this.nextState() : (t.GameStateManager.instances.bug++, this.componentMgr.removeComponent(this.componentSwipeImage), this.createSwipeImage(), this.mainGroup.add(this.componentSwipeImage.group), this.componentSwipeImage.hideSwipe(0), this.componentSwipeImage.hideSwipe(1), this.componentSwipeImage.hideSwipe(2), this.componentSwipeImage.disableInput(), this.uiGameplay.showNextAlienStep1()) }, i.prototype.showSwipe = function(t) { this.componentSwipeImage.showSwipe(t) }, i.prototype.onEndNextAlient = function() { this.componentSwipeImage.enableInput() }, i.prototype.nextState = function() { t.Instances.transitionAnim.playIn(), t.Instances.transitionAnim.onCompletedIn.addOnce(this.onEndInTransitionNextState, this) }, i.prototype.onEndInTransitionNextState = function() { t.GameStateManager.instances.fixCharacters[t.GameStateManager.instances.bug] = !0; var e = t.GameStateManager.instances.completed();
            this.game.state.start(e) }, i.prototype.moveLeft = function(t) { this.componentSwipeImage.moveLeft(t) }, i.prototype.moveRight = function(t) { this.componentSwipeImage.moveRight(t) }, i.prototype.checkFixBug = function() { if (this.componentSwipeImage.checkCorrectImage()) t.Audios.playSfx(this.game, "character_completed"), this.uiGameplay.playCorrectAnim();
            else { var e = this.componentSwipeImage.isSwipeZoneCorrect(0),
                    i = this.componentSwipeImage.isSwipeZoneCorrect(1),
                    n = this.componentSwipeImage.isSwipeZoneCorrect(2);
                this.uiGameplay.playIncorrectAnim(e, i, n), this.playIncorrectAnim(e, i, n), this.uiGameplay.disableAllInput(), this.componentSwipeImage.disableInput(), this.componentSwipeImage.onCompletedWrong.addOnce(this.uiGameplay.enableAllInput, this.uiGameplay), this.componentSwipeImage.onCompletedWrong.addOnce(this.componentSwipeImage.enableInput, this.componentSwipeImage) } this.startInactiveTime() }, i.prototype.playIncorrectAnim = function(t, e, i) { t || this.componentSwipeImage.playWrongSwipeZone(0), e || this.componentSwipeImage.playWrongSwipeZone(1), i || this.componentSwipeImage.playWrongSwipeZone(2) }, i.prototype.disableInput = function() { this.componentSwipeImage.disableInput() }, i.prototype.closeConfirmation = function() { this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiPause), this.uiPause.enableAllInput() }, i.prototype.pressHowToPlay = function() { this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiTutorial), this.uiTutorial.showHowToPlay() }, i.prototype.closeHowToPlay = function() { this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiPause), this.uiPause.enableAllInput() }, i.prototype.pressExit = function() { this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiConfirmation), this.uiConfirmation.show(t.CONFIRMATIONTYPE.EXIT) }, i.prototype.goToLevelSelect = function() { t.Instances.transitionAnim.playIn(), t.Instances.transitionAnim.onCompletedIn.addOnce(this.transitionLevelSelect, this) }, i.prototype.transitionLevelSelect = function() { this.game.state.start("debugginglevelselect") }, i.prototype.pressRestart = function() { this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiConfirmation), this.uiConfirmation.show(t.CONFIRMATIONTYPE.RESTART) }, i.prototype.restartLevel = function() { t.Instances.transitionAnim.playIn(), t.Instances.transitionAnim.onCompletedIn.addOnce(this.transitionLevel, this) }, i.prototype.transitionLevel = function() { var e = t.GameStateManager.instances.start(t.GameStateManager.instances.levelIndex);
            this.game.state.start(e, !0, !1, !1) }, i.prototype.switchAudio = function() { var e = t.Instances.dataManager.getAudio(); return t.Instances.dataManager.setAudio(!e), !e }, i.prototype.pressPause = function() { this.isPause = !0, this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiPause), this.componentOverlay.revive(), this.componentOverlay.fadeIn(500), this.uiPause.show(), this.uiGameplay.pause(), this.timeInactive.pause(), this.timeInactive.pause(), this.componentSwipeImage.pauseZone(), this.uiGameplay.pause(), this.componentSwipeImage.disableInput() }, i.prototype.pressResume = function() { this.componentOverlay.fadeOut(500, .7, this.onEndOverlayPauseFadeOut, this) }, i.prototype.onEndOverlayPauseFadeOut = function() { this.uiGameplay.enableAllInput(), this.isPause = !1, this.uiGameplay.resume(), this.timeInactive.resume(), this.componentOverlay.kill(), this.timeInactive.resume(), this.componentSwipeImage.resumeZone(), this.uiGameplay.resume(), this.componentSwipeImage.enableInput() }, i.prototype.onBlur = function() { this.uiGameplay.pauseEnable && (this.uiGameplay.disableAllInput(), this.pressPause()), this.pauseFocus = !0, this.uiTutorial.pause(), this.uiTutorialGame.pause(), t.Audios.onBlur(this.game), this.isPause ? this.componentOverlay.pause() : (this.timeInactive.pause(), this.componentSwipeImage.pauseZone(), this.uiGameplay.pause()) }, i.prototype.onFocus = function() { this.pauseFocus = !1, this.checkResume() }, i.prototype.onIncorrecOrientation = function() { this.uiGameplay.pauseEnable && (this.uiGameplay.disableAllInput(), this.pressPause()), this.pauseOrientation = !0, this.uiTutorial.pause(), this.uiTutorialGame.pause(), t.Audios.onBlur(this.game), this.isPause ? this.componentOverlay.pause() : (this.timeInactive.pause(), this.componentSwipeImage.pauseZone(), this.uiGameplay.pause()) }, i.prototype.onCorrectOrientation = function() { this.pauseOrientation = !1, this.checkResume() }, i.prototype.checkResume = function() { this.pauseFocus || this.pauseOrientation || (this.uiTutorial.resume(), this.uiTutorialGame.resume(), t.Audios.onFocus(this.game), this.isPause ? this.componentOverlay.resume() : (this.timeInactive.resume(), this.componentSwipeImage.resumeZone(), this.uiGameplay.resume())) }, i.prototype.resize = function() { this.componentSwipeImage.x = this.game.width / 2 + 47, this.componentSwipeImage.y = 135, this.uiPause.resize(), this.uiConfirmation.resize(), this.uiGameplay.resize(), this.bg.width = this.game.width, this.bg.height = this.game.height }, i.prototype.shutdown = function() { t.Instances.controlButtonUI.removeControl(this.game), this.game.onFocus.remove(this.onFocus, this), this.game.onBlur.remove(this.onBlur, this), Game.Instances.onIncorrectOrientation.remove(this.onIncorrecOrientation, this), Game.Instances.onCorrectOrientation.remove(this.onCorrectOrientation, this), this.componentMgr.removeComponent(this.componentSwipeImage), this.componentMgr.destroy(), this.componentSwipeImage = null, this.componentMgr = null, e.prototype.shutdown.call(this) }, i }(Phaser.State);
    t.FixBugState = e }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e = function(e) {
        function i() { return e.call(this) || this } return __extends(i, e), i.prototype.init = function() { this.game.world.removeAll(), t.Audios.playMusic(this.game, t.MUSIC.menu), this.pauseFocus = !1, this.pauseOrientation = !1, Game.Instances.onIncorrectOrientation.add(this.onIncorrecOrientation, this), Game.Instances.onCorrectOrientation.add(this.onCorrectOrientation, this), this.game.onBlur.add(this.onBlur, this), this.game.onFocus.add(this.onFocus, this) }, i.prototype.create = function() { e.prototype.create.call(this), this.mainGroup = this.game.add.group(), this.componentMgr = Ph2.ComponentPlugin.initComponents(this), this.componentOverlay = this.componentMgr.addComponent(new t.Overlay(this.game, .7)), this.bg = new Phaser.Sprite(this.game, 0, 0, "level_seelct_bg"), this.bg.width = this.game.width, this.bg.height = this.game.height, this.bgComic = new Phaser.Sprite(this.game, 0, 0, "bg_comic"), this.bgComic.width = this.game.width, this.bgComic.height = this.game.height, this.bgComic.visible = !1, this.isComic = !1, this.uiLevelSelect = new t.UILevelSelect(this), this.uiComic = new t.UIComic(this, t.COMICID.end), this.checNeedShowComicEnd(), this.mainGroup.add(this.bg), this.mainGroup.add(this.uiLevelSelect), this.mainGroup.add(this.componentOverlay.overlaySprite), this.mainGroup.add(this.bgComic), this.mainGroup.add(this.uiComic), t.Instances.transitionAnim.playOut(), t.Instances.transitionAnim.onCompletedOut.addOnce(this.initUi, this), this.resize() }, i.prototype.checNeedShowComicEnd = function() { var e = t.Instances.dataManager.getSeeComicEnd(),
                i = t.Instances.dataManager.getLevelCompelteded();!1 === e && i + 1 === t.ConfigGame.levelCount ? (this.uiComic.visible = !0, this.uiLevelSelect.visible = !1, this.bgComic.visible = !0, this.bg.visible = !1, this.isComic = !0) : (this.uiLevelSelect.init(), this.isComic = !1, this.uiComic.visible = !1, this.uiLevelSelect.visible = !0) }, i.prototype.switchAudio = function() { var e = t.Instances.dataManager.getAudio(); return t.Instances.dataManager.setAudio(!e), !e }, i.prototype.endShowComic = function() { t.Instances.dataManager.seeComicEnd(), this.pressHome() }, i.prototype.goToLevelSelect = function() { t.Instances.transitionAnim.playOut(), t.Instances.transitionAnim.onCompletedOut.addOnce(this.initUi, this), this.uiComic.visible = !1, this.bg.visible = !0, this.bgComic.visible = !1, this.uiLevelSelect.visible = !0, this.isComic = !1, this.uiComic.destroy(), this.uiLevelSelect.init() }, i.prototype.pressHome = function() { t.Instances.transitionAnim.playIn(), t.Instances.transitionAnim.onCompletedIn.addOnce(this.transitionMainMenu, this) }, i.prototype.transitionMainMenu = function() { this.game.state.start("gameSelect") }, i.prototype.selectLevel = function(e) { t.Instances.transitionAnim.playIn(), t.Instances.transitionAnim.onCompletedIn.addOnce(this.transitionLevel, this, 0, e) }, i.prototype.transitionLevel = function(e) { var i = t.GameStateManager.instances.start(e);
            this.game.state.start(i, !0, !1, e) }, i.prototype.initUi = function() { this.isComic ? this.uiComic.showComic() : this.uiLevelSelect.initAnimation() }, i.prototype.onBlur = function() { this.pauseFocus = !0, t.Audios.onBlur(this.game), this.isComic ? this.uiComic.onBlur() : this.uiLevelSelect.onBlur() }, i.prototype.onFocus = function() { this.pauseFocus = !1, this.checkResume() }, i.prototype.onIncorrecOrientation = function() { this.pauseOrientation = !0, t.Audios.onBlur(this.game), this.isComic ? this.uiComic.onBlur() : this.uiLevelSelect.onBlur() }, i.prototype.onCorrectOrientation = function() { this.pauseOrientation = !1, this.checkResume() }, i.prototype.checkResume = function() { this.pauseFocus || this.pauseOrientation || (t.Audios.onFocus(this.game), this.isComic ? this.uiComic.onFocus() : this.uiLevelSelect.onFocus()) }, i.prototype.shutdown = function() { this.game.onBlur.remove(this.onBlur, this), this.game.onFocus.remove(this.onFocus, this), Game.Instances.onIncorrectOrientation.remove(this.onIncorrecOrientation, this), Game.Instances.onCorrectOrientation.remove(this.onCorrectOrientation, this) }, i.prototype.resize = function() { this.isComic ? this.uiComic.resize() : this.uiLevelSelect.resize(), this.bg.width = this.game.width, this.bg.height = this.game.height, this.bgComic.width = this.game.width, this.bgComic.height = this.game.height }, i }(Phaser.State);
    t.LevelSelectState = e }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e = function(e) {
        function i() { return e.call(this) || this } return __extends(i, e), i.prototype.init = function() { this.game.world.removeAll(), this.pauseFocus = !1, this.pauseOrientation = !1, Game.Instances.onIncorrectOrientation.add(this.onIncorrecOrientation, this), Game.Instances.onCorrectOrientation.add(this.onCorrectOrientation, this), this.game.onBlur.add(this.onBlur, this), this.game.onFocus.add(this.onFocus, this) }, i.prototype.create = function() { if (e.prototype.create.call(this), t.Audios.playMusic(this.game, t.MUSIC.menu), this.mainGroup = this.game.add.group(), this.bgComic = new Phaser.Sprite(this.game, 0, 0, "bg_comic"), this.bgComic.width = this.game.width, this.bgComic.height = this.game.height, this.bgComic.visible = !1, this.isComic = !1, this.uiComic = new t.UIComic(this, t.COMICID.intro), this.uiComic.visible = !1, this.mainGroup.add(this.bgComic), this.mainGroup.add(this.uiComic), this.resize(), this.onEndTransitionAnim(), !0 === t.Constants.KEY_DEBUG) { var i = this.game.input.keyboard.addKey(Phaser.Keyboard.ONE),
                    n = this.game.input.keyboard.addKey(Phaser.Keyboard.TWO),
                    s = this.game.input.keyboard.addKey(Phaser.Keyboard.THREE),
                    o = this.game.input.keyboard.addKey(Phaser.Keyboard.FOUR),
                    a = this.game.input.keyboard.addKey(Phaser.Keyboard.FIVE),
                    r = this.game.input.keyboard.addKey(Phaser.Keyboard.SIX),
                    h = this.game.input.keyboard.addKey(Phaser.Keyboard.SEVEN),
                    l = this.game.input.keyboard.addKey(Phaser.Keyboard.EIGHT),
                    c = this.game.input.keyboard.addKey(Phaser.Keyboard.NINE);
                i.onDown.add(function() { console.log("%c key 1", "background: #272; color: #bada55"), t.Instances.dataManager.initData() }, this), n.onDown.add(function() { console.log("%c key 2", "background: #272; color: #bada55"), t.Instances.dataManager.initData(), t.Instances.dataManager.completedLevel(0), t.Instances.dataManager.seeComicIntro() }, this), s.onDown.add(function() { console.log("%c key 3", "background: #272; color: #bada55"), t.Instances.dataManager.initData(), t.Instances.dataManager.completedLevel(7), t.Instances.dataManager.seeComicIntro() }, this), o.onDown.add(function() { console.log("%c key 4", "background: #272; color: #bada55"), t.Instances.dataManager.initData(), t.Instances.dataManager.completedLevel(9), t.Instances.dataManager.seeComicIntro() }, this), a.onDown.add(function() { console.log("%c key 5", "background: #272; color: #bada55"), t.Instances.dataManager.initData(), t.Instances.dataManager.completedLevel(9), t.Instances.dataManager.seeComicIntro(), t.Instances.dataManager.seeComicEnd() }, this), r.onDown.add(function() { console.log("%c key 6", "background: #272; color: #bada55"), t.Instances.dataManager.initData(), t.Instances.dataManager.completedLevel(1), t.Instances.dataManager.seeComicIntro() }, this), h.onDown.add(function() { console.log("%c key 7", "background: #272; color: #bada55"), t.Instances.dataManager.initData(), t.Instances.dataManager.completedLevel(2), t.Instances.dataManager.seeComicIntro() }, this), l.onDown.add(function() { console.log("%c key 8", "background: #272; color: #bada55"), t.Instances.dataManager.initData(), t.Instances.dataManager.completedLevel(3), t.Instances.dataManager.seeComicIntro() }, this), c.onDown.add(function() { console.log("%c key 9", "background: #272; color: #bada55"), t.Instances.dataManager.initData(), t.Instances.dataManager.completedLevel(4), t.Instances.dataManager.seeComicIntro() }, this), console.log("%c ***Keys***                               ", "background: #222; color: #bada55"), console.log("%c 1 = ResetData                            ", "background: #222; color: #bada55"), console.log("%c 2 = ResetData unlock level 1             ", "background: #222; color: #bada55"), console.log("%c 3 = ResetData unlock level 8             ", "background: #222; color: #bada55"), console.log("%c 4 = ResetData unlock level 10 no comic end", "background: #222; color: #bada55"), console.log("%c 5 = ResetData unlock level 10             ", "background: #222; color: #bada55"), console.log("%c 6 = ResetData unlock level 2             ", "background: #222; color: #bada55"), console.log("%c 7 = ResetData unlock level 3             ", "background: #222; color: #bada55"), console.log("%c 8 = ResetData unlock level 4             ", "background: #222; color: #bada55"), console.log("%c 9 = ResetData unlock level 5             ", "background: #222; color: #bada55") } }, i.prototype.onEndTransitionAnim = function() { t.Instances.dataManager.getSeeComicIntro() ? this.game.state.start("debugginglevelselect") : (this.isComic = !0, this.uiComic.visible = !0, this.bgComic.visible = !0, t.Instances.transitionAnim.playOut(), t.Instances.transitionAnim.onCompletedOut.addOnce(this.showInitComic, this)) }, i.prototype.showInitComic = function() { this.uiComic.showComic() }, i.prototype.switchAudio = function() { var e = t.Instances.dataManager.getAudio(); return t.Instances.dataManager.setAudio(!e), !e }, i.prototype.endShowComic = function() { t.Instances.transitionAnim.playIn(), t.Instances.transitionAnim.onCompletedIn.addOnce(this.goToLevelSelect, this) }, i.prototype.goToLevelSelect = function() { t.Instances.dataManager.seeComicIntro(), this.game.state.start("debugginglevelselect") }, i.prototype.onBlur = function() { this.pauseFocus = !0, this.isComic && this.uiComic.onBlur(), t.Audios.onBlur(this.game) }, i.prototype.onFocus = function() { this.pauseFocus = !1, this.checkResume() }, i.prototype.onIncorrecOrientation = function() { this.pauseOrientation = !0, this.isComic && this.uiComic.onBlur(), t.Audios.onBlur(this.game) }, i.prototype.onCorrectOrientation = function() { this.pauseOrientation = !1, this.checkResume() }, i.prototype.checkResume = function() { this.pauseFocus || this.pauseOrientation || (this.isComic && this.uiComic.onFocus(), t.Audios.onFocus(this.game)) }, i.prototype.shutdown = function() { this.game.onBlur.remove(this.onBlur, this), this.game.onFocus.remove(this.onFocus, this), Game.Instances.onIncorrectOrientation.remove(this.onIncorrecOrientation, this), Game.Instances.onCorrectOrientation.remove(this.onCorrectOrientation, this) }, i.prototype.resize = function() { this.bgComic.width = this.game.width, this.bgComic.height = this.game.height, this.isComic && this.uiComic.resize() }, i }(Phaser.State);
    t.MainMenuState = e }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e = function(e) {
        function i() { return e.call(this) || this } return __extends(i, e), i.prototype.init = function() { this.game.width > this.game.height ? this.game.world.setBounds(0, 0, this.game.width, this.game.height) : this.game.world.setBounds(0, 0, this.game.height, this.game.width), this.game.load.onFileComplete.removeAll(); var t = this.game.cache.getJSON("resources_debugging"),
                e = this.game.cache.spine; for (var i in e) e.hasOwnProperty(i) && "transition" !== i && "ben" !== i && (this.game.cache.checkJSONKey(i) && this.game.cache.removeJSON(i), this.game.cache.checkTextKey(i + "Atlas") && this.game.cache.removeText(i + "Atlas"), "2" === i[i.length - 1] ? this.game.cache.checkImageKey(i.slice(0, i.length - 1) + ".png") && this.game.cache.removeImage(i.slice(0, i.length - 1) + ".png", !0) : this.game.cache.checkImageKey(i + ".png") && this.game.cache.removeImage(i + ".png", !0), delete this.game.cache.spine[i]);
            this.game.ph2Loader.debug(!0), this.game.ph2Loader.setAssetsResources(t) }, i.prototype.preload = function() { this.game.stage.backgroundColor = 197379, this.game.ph2UIManager.enableVisibilityAndOrientationComponent = !1, this.group = new Phaser.Group(this.game), this.add.existing(this.group), t.Instances.initTransitionAnim(this.game), t.Instances.transitionAnim.updatePercent(0), t.Instances.transitionAnim.showLoading(), this.game.load.onFileComplete.add(t.Instances.transitionAnim.updatePercent, t.Instances.transitionAnim), t.Audios.loadAudioSprite(this.game, "audiosprite_debugging"), this.game.ph2Loader.load("firstLoad"), this.game.ph2AnimationManager.cache.animationData = {}, this.game.load.onFileStart.add(this.onFileStart, this) }, i.prototype.onFileStart = function(t, e, i) { this.game.cache.checkJSONKey(e) && -1 !== i.indexOf(".json") && this.game.cache.removeJSON(e), this.game.cache.checkImageKey(e) && -1 !== i.indexOf(".png") && this.game.cache.removeImage(e) }, i.prototype.create = function() { this.setConfigData(), t.Instances.initLocalizationManager(this.game), t.Instances.initControlButtonUI(this.game), t.Instances.dataManager.getAudio() ? t.Audios.enableAudio(this.game) : t.Audios.disableAudio(this.game), this.onEndTransitionAnim() }, i.prototype.onEndTransitionAnim = function() { this.game.load.onFileComplete.remove(t.Instances.transitionAnim.updatePercent, t.Instances.transitionAnim), t.Instances.transitionAnim.hideLoading(), this.game.state.start("debuggingmainmenu") }, i.prototype.setConfigData = function() { var e = this.game.cache.getJSON("alienConfig"),
                i = this.game.cache.getJSON("gameConfig"),
                n = this.game.cache.getJSON("enemyConfig"),
                s = this.game.cache.getJSON("levelConfig");
            t.ConfigGame.enemyTypeConfig = n, t.ConfigGame.levels = s.levels; for (var o in e.VisualData) e.VisualData.hasOwnProperty(o) && (t.VisualData[o] = e.VisualData[o]); for (var o in e.ConfigGame) e.ConfigGame.hasOwnProperty(o) && (t.ConfigGame[o] = e.ConfigGame[o]); for (var o in i) i.hasOwnProperty(o) && (t.ConfigGame[o] = i[o]);
            t.GameStateManager.transitions.start = t.ConfigGame.initState }, i.prototype.shutdown = function() { e.prototype.shutdown.call(this), this.group.destroy() }, i }(Phaser.State);
    t.PreloaderState = e }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e = function(e) {
        function i() { return e.call(this) || this } return __extends(i, e), i.prototype.init = function() { t.Audios.playMusic(this.game, t.MUSIC.gp1), this.pauseFocus = !1, this.pauseOrientation = !1, this.game.world.removeAll(), this.game.onFocus.add(this.onFocus, this), this.game.onBlur.add(this.onBlur, this), Game.Instances.onIncorrectOrientation.add(this.onIncorrecOrientation, this), Game.Instances.onCorrectOrientation.add(this.onCorrectOrientation, this), this.isPause = !1, t.Instances.controlButtonUI.addControl(this.game), this.isTutorial = 0 === t.GameStateManager.instances.levelIndex }, i.prototype.create = function() { e.prototype.create.call(this), this.isFastTutorial = !1, this.tweenInactive = null, this.main = this.game.add.group(), this.groupAlien = this.game.add.group(), this.animGroup = this.game.add.group(), this.overlayGroup = this.game.add.group(), this.animInactiveGroup = this.game.add.group(), this.componentMgr = Ph2.ComponentPlugin.initComponents(this), this.componentDragZone = this.componentMgr.addComponent(new t.DragZone(this.game, !1)), this.componentOverlay = this.componentMgr.addComponent(new t.Overlay(this.game, .7)), this.levelData = t.GameStateManager.instances.getLevel(), this.groupsParts = [], this.tweensIntroObject = [], this.tweensCorrect = [], this.indexEnableInactive = [], this.addGroupsParts(), this.addFolders(), this.uiGameplay = new t.UIGameplaySelect(this), this.timeInactive = this.game.time.create(!1), this.timeInactive.start(), this.isInactiveAnim = !1, this.componentDragZone.addZone(this.goodFolder, "good"), this.componentDragZone.addZone(this.bugFolder, "bug"), this.componentDragZone.onCorrectDragZone.add(this.onCorrectDragZone, this), this.componentDragZone.onIncorrectDragZone.add(this.onIncorrectDragZone, this), this.componentDragZone.onNothingDragZone.add(this.onNothingDragZone, this), this.uiPause = new t.UIPause(this), this.uiConfirmation = new t.UIConfirmation(this), this.uiTutorial = new t.UITutorial(this, t.TutorialID.separate), this.uiTutorialGame = new t.UITutorialGame(this, t.TutorialID.separate), this.dragObjectCount = this.groupsParts.length, this.correctDragCount = 0, this.bg = new Phaser.Sprite(this.game, 0, 0, "gameplay_fix_bg"), this.main.add(this.bg), this.main.add(this.uiGameplay), this.main.add(this.animGroup), this.groupAlien.addMultiple(this.groupsParts), this.main.add(this.groupAlien), this.main.add(this.animInactiveGroup), this.main.add(this.bugFolder), this.main.add(this.goodFolder), this.overlayGroup.add(this.componentOverlay.overlaySprite), this.overlayGroup.add(this.uiPause), this.overlayGroup.add(this.uiConfirmation), this.overlayGroup.add(this.uiTutorial), this.overlayGroup.add(this.uiTutorialGame), this.createInactiveAnim(), t.Instances.transitionAnim.playOut(), t.Instances.transitionAnim.onCompletedOut.addOnce(this.introAnim, this), t.GameStateManager.instances.addCheatKeys(this.game, this.cheatUsed, this), this.resize() }, i.prototype.createInactiveAnim = function() { this.inactiveAnim = this.game.add.ph2AnimationObject(20, 30, "tutorial", "atlas_gameplay"), this.spriteInactiveAnim = new Phaser.Sprite(this.game, 0, 0, "ui_gameplay_select", "bad_alien1.png"), this.spriteInactiveAnim.alpha = .7, this.spriteInactiveAnim.anchor.set(.5, .5), this.animInactiveGroup.visible = !1, this.animInactiveGroup.x = this.game.width / 2, this.animInactiveGroup.y = this.game.height / 2, this.animInactiveGroup.add(this.spriteInactiveAnim), this.animInactiveGroup.add(this.inactiveAnim) }, i.prototype.initInactiveAnim = function() { this.isInactiveAnim = !0, this.indexEnableInactive.length > 0 && this.playInactiveAnimStep1() }, i.prototype.playInactiveAnimStep1 = function() { this.spriteInactiveAnim.frameName = this.groupsParts[this.indexEnableInactive[0]].frameName, this.animInactiveGroup.x = this.groupsParts[this.indexEnableInactive[0]].x, this.animInactiveGroup.y = this.groupsParts[this.indexEnableInactive[0]].y; var t = this.game.device.desktop ? "desktop" : "mobile",
                e = this.inactiveAnim.ph2Animations.play("tutorial_drag_" + t + "_in", 1, !1);
            this.animInactiveGroup.visible = !0, e.onComplete.addOnce(this.playInactiveAnimStep2, this) }, i.prototype.playInactiveAnimStep2 = function() { var t = this.groupsParts[this.indexEnableInactive[0]].isBug ? { x: this.bugFolder.x - 10, y: this.bugFolder.y - 40 } : { x: this.goodFolder.x + 20, y: this.goodFolder.y - 40 };
            this.tweenInactive = this.game.add.tween(this.animInactiveGroup).to({ x: t.x, y: t.y }, 2e3, "Linear", !0), this.tweenInactive.onComplete.addOnce(this.playInactiveAnimStep3, this) }, i.prototype.playInactiveAnimStep3 = function() { var t = this.game.device.desktop ? "desktop" : "mobile";
            this.inactiveAnim.ph2Animations.play("tutorial_drag_" + t + "_out", 1, !1).onComplete.addOnce(this.playInactiveAnimStep4, this) }, i.prototype.playInactiveAnimStep4 = function() { this.animInactiveGroup.visible = !1, this.isInactiveAnim = !1, this.isFastTutorial = !0, this.startInactiveTime() }, i.prototype.stopInactiveTime = function() { this.isFastTutorial = !1, this.animInactiveGroup.visible = !1, this.isInactiveAnim ? (this.tweenInactive && this.tweenInactive.stop(), this.inactiveAnim.ph2Animations && this.inactiveAnim.ph2Animations.stop(), this.isInactiveAnim = !1) : (this.timeInactive.stop(), this.timeInactive.removeAll()) }, i.prototype.startInactiveTime = function() { this.timeInactive.removeAll(); var t = this.isFastTutorial ? 2 : 10;
            this.timeInactive.add(t * Phaser.Timer.SECOND, this.initInactiveAnim, this), this.timeInactive.start() }, i.prototype.cheatUsed = function(t) { this.game.state.start(t, !0, !1, !0) }, i.prototype.introAnim = function() { this.isTutorial && (this.uiGameplay.disableInput(), this.uiGameplay.disableKeyInput()); for (var t = 0, e = this.groupsParts; t < e.length; t++) { var i = e[t];
                i.disableInput(), i.alpha = 0 } this.uiGameplay.playIntroAnimStep1() }, i.prototype.endIntroAnim = function() { if (this.isTutorial) { for (var t = void 0, e = 0, i = this.groupsParts; e < i.length; e++) { o = i[e];
                    t = this.game.add.tween(o).to({ alpha: 1 }, 500, Phaser.Easing.Linear.None, !0), this.tweensIntroObject.push(t) } t.onComplete.addOnce(this.showTutorial, this) } else { for (var n = 0, s = this.groupsParts; n < s.length; n++) { var o = s[n];
                    (t = this.game.add.tween(o).to({ alpha: 1 }, 500, Phaser.Easing.Linear.None, !0)).onComplete.addOnce(o.enableInput, o), this.tweensIntroObject.push(t) } this.startInactiveTime() } }, i.prototype.showTutorial = function() { this.componentOverlay.revive(), this.componentOverlay.fadeIn(500), this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiTutorialGame), this.uiTutorialGame.showTutorial() }, i.prototype.closeTutorial = function() { this.componentOverlay.fadeOut(500, .7, this.onEndOverlayCloseTutorial, this) }, i.prototype.onEndOverlayCloseTutorial = function() { this.componentOverlay.kill(); for (var t = 0, e = this.groupsParts; t < e.length; t++) e[t].enableInput(null, null);
            this.startInactiveTime(), this.uiGameplay.enableInput(), this.uiGameplay.enableKeyInput() }, i.prototype.addGroupsParts = function() { var e, i, n, s = {},
                o = this.levelData.dna.groups - this.levelData.dna.bugCharacters.length,
                a = this.levelData.dna.bugCharacters.length,
                r = this.levelData.character,
                h = t.ConfigGame.positionsFix[a + o - 1].slice();
            n = h.splice(Math.floor(Math.random() * h.length), 1)[0]; for (l = 0; l < o; l++) s = { atlas: t.VisualData.aliens[r].atlas, frame: t.VisualData.aliens[r].key, x: this.game.width / 2 + n.x, y: this.game.height / 2 + n.y }, this.indexEnableInactive.push(l), (i = new t.GroupParts(this.game, this, s, !1)).onStarDrag.add(this.onDragStart, this), i.onEndTween.add(this.enableAllDrag, this), i.alpha = 0, this.componentDragZone.addDragObject(i, "good", "bug"), this.groupsParts.push(i), n = h.splice(Math.floor(Math.random() * h.length), 1)[0]; for (var l = 0; l < a; l++) e = t.GameStateManager.instances.levelData.dna.bugCharacters[l], s = { atlas: t.ConfigGame.bugCharacter[e].RESOURCE.atlas, frame: t.ConfigGame.bugCharacter[e].RESOURCE.key, x: this.game.width / 2 + n.x, y: this.game.height / 2 + n.y }, this.indexEnableInactive.push(l + o), (i = new t.GroupParts(this.game, this, s, !0)).onStarDrag.add(this.onDragStart, this), i.onEndTween.add(this.enableAllDrag, this), i.alpha = 0, this.componentDragZone.addDragObject(i, "bug", "good"), this.groupsParts.push(i), n = h.splice(Math.floor(Math.random() * h.length), 1)[0] }, i.prototype.onDragStart = function() { this.stopInactiveTime(), this.disableAllDrag() }, i.prototype.disableAllDrag = function() { for (var t = 0, e = this.groupsParts; t < e.length; t++) e[t].disableDrag() }, i.prototype.enableAllDrag = function() { for (var t = 0, e = this.groupsParts; t < e.length; t++) e[t].enableDrag() }, i.prototype.correctAnimEnd = function() { for (var t = 0, e = this.groupsParts; t < e.length; t++) e[t].enableDrag() }, i.prototype.hideAllBody = function() { this.stopInactiveTime(); for (var t = 0, e = this.groupsParts; t < e.length; t++) { var i = e[t];
                i.alpha = 1; var n = this.game.add.tween(i).to({ alpha: 0 }, 200, Phaser.Easing.Linear.None, !0);
                i.disableInput(), this.tweensIntroObject.push(n) } }, i.prototype.showAllBody = function() { this.startInactiveTime(); for (var t = 0, e = this.groupsParts; t < e.length; t++) { var i = e[t];
                i.alpha = 0; var n = this.game.add.tween(i).to({ alpha: 1 }, 200, Phaser.Easing.Linear.None, !0);
                n.onComplete.addOnce(i.enableInput, i, 0, !1), this.tweensIntroObject.push(n) } }, i.prototype.addFolders = function() { this.goodFolder = new t.Folder(this.game), this.bugFolder = new t.Folder(this.game), this.goodFolder.x = 885, this.goodFolder.y = 350, this.bugFolder.x = 70, this.bugFolder.y = 350 }, i.prototype.onCorrectDragZone = function(e, i) { t.Audios.playSfx(this.game, "option_correct"), e.disableInput(), this.indexEnableInactive.splice(this.indexEnableInactive.indexOf(this.groupsParts.indexOf(e)), 1), this.correctDragCount++; var n = e.isBug ? { x: this.bugFolder.x, y: this.bugFolder.y } : { x: this.goodFolder.x, y: this.goodFolder.y };
            this.tweensCorrect[0] = this.game.add.tween(e.scale).to({ x: 0, y: 0 }, 200, Phaser.Easing.Linear.None, !0), this.tweensCorrect[1] = this.game.add.tween(e).to(n, 400, Phaser.Easing.Linear.None, !0), this.tweensCorrect[1].onComplete.addOnce(this.checkCorrectDrag, this), this.playCorrectAnim(e.isBug) }, i.prototype.checkCorrectDrag = function(t) { t.visible = !1, this.correctAnimEnd(), this.correctDragCount === this.dragObjectCount && (this.stopInactiveTime(), this.endSeparetaBug()) }, i.prototype.onIncorrectDragZone = function(e, i) { t.Audios.playSfx(this.game, "option_incorrect"), e.playIncorrectTween(i), this.playIncorrectAnim(e.isBug) }, i.prototype.onNothingDragZone = function(t, e) { this.startInactiveTime(), this.uiGameplay.playIncorrectDragAnim(t.isBug), t.playIncorrectTween(e) }, i.prototype.resetAllStandAnim = function() { for (var t = 0, e = this.groupsParts; t < e.length; t++) e[t].playAnimSelectEnable() }, i.prototype.playCorrectAnim = function(t) { this.startInactiveTime(), this.uiGameplay.playCorrectDragZoneAnim(t) }, i.prototype.playIncorrectAnim = function(t) { this.startInactiveTime(), this.uiGameplay.playIncorrectDragZoneAnim(t) }, i.prototype.startEndAnim = function() { t.Instances.transitionAnim.playIn(), t.Instances.transitionAnim.onCompletedIn.addOnce(this.onCompletedFadeIn, this) }, i.prototype.onCompletedFadeIn = function() { this.uiGameplay.setUI(!0), t.GameStateManager.instances.bug = 0; var e = t.GameStateManager.instances.next();
            this.game.state.start(e) }, i.prototype.endSeparetaBug = function() { this.uiGameplay.showCompleted() }, i.prototype.closeConfirmation = function() { this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiPause), this.uiPause.enableAllInput() }, i.prototype.pressHowToPlay = function() { this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiTutorial), this.uiTutorial.showHowToPlay() }, i.prototype.closeHowToPlay = function() { this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiPause), this.uiPause.enableAllInput() }, i.prototype.pressExit = function() { this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiConfirmation), this.uiConfirmation.show(t.CONFIRMATIONTYPE.EXIT) }, i.prototype.goToLevelSelect = function() { t.Instances.transitionAnim.playIn(), t.Instances.transitionAnim.onCompletedIn.addOnce(this.transitionLevelSelect, this) }, i.prototype.transitionLevelSelect = function() { this.game.state.start("debugginglevelselect") }, i.prototype.pressRestart = function() { this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiConfirmation), this.uiConfirmation.show(t.CONFIRMATIONTYPE.RESTART) }, i.prototype.restartLevel = function() { t.Instances.transitionAnim.playIn(), t.Instances.transitionAnim.onCompletedIn.addOnce(this.transitionLevel, this) }, i.prototype.transitionLevel = function() { var e = t.GameStateManager.instances.start(t.GameStateManager.instances.levelIndex);
            this.game.state.start(e, !0, !1, !1) }, i.prototype.switchAudio = function() { var e = t.Instances.dataManager.getAudio(); return t.Instances.dataManager.setAudio(!e), !e }, i.prototype.pressPause = function() { this.isPause = !0, this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiPause), this.componentOverlay.revive(), this.componentOverlay.fadeIn(500), this.uiPause.show(), this.uiGameplay.pause(), this.timeInactive.pause(), this.isInactiveAnim && (this.tweenInactive && this.tweenInactive.pause(), this.inactiveAnim.ph2Animations && this.inactiveAnim.ph2Animations.pause()); for (var t = 0, e = this.tweensIntroObject; t < e.length; t++)(s = e[t]).pause(); for (var i = 0, n = this.tweensCorrect; i < n.length; i++) { var s = n[i];
                s.pause() } for (var o = 0, a = this.groupsParts; o < a.length; o++) { var r = a[o];
                r.pause(), r.disableInput() } }, i.prototype.pressResume = function() { this.componentOverlay.fadeOut(500, .7, this.onEndOverlayPauseFadeOut, this) }, i.prototype.onEndOverlayPauseFadeOut = function() { this.uiGameplay.enableKeyInput(), this.uiGameplay.enableInput(), this.isPause = !1, this.uiGameplay.resume(), this.timeInactive.resume(), this.componentOverlay.kill(), this.isInactiveAnim && (this.tweenInactive && this.tweenInactive.resume(), this.inactiveAnim.ph2Animations && this.inactiveAnim.ph2Animations.resume()); for (var t = 0, e = this.tweensIntroObject; t < e.length; t++)(s = e[t]).resume(); for (var i = 0, n = this.tweensCorrect; i < n.length; i++) { var s = n[i];
                s.resume() } for (var o = 0, a = this.groupsParts; o < a.length; o++) { var r = a[o];
                r.resume(), r.enableInput(null, null, !0) } }, i.prototype.onBlur = function() { if (this.uiGameplay.pauseEnable && (this.uiGameplay.disableKeyInput(), this.uiGameplay.disableInput(), this.pressPause()), this.pauseFocus = !0, this.uiTutorial.pause(), this.uiTutorialGame.pause(), t.Audios.onBlur(this.game), this.isPause) this.componentOverlay.pause();
            else { this.uiGameplay.pause(), this.timeInactive.pause(), this.isInactiveAnim && (this.tweenInactive && this.tweenInactive.pause(), this.inactiveAnim.ph2Animations && this.inactiveAnim.ph2Animations.pause()); for (var e = 0, i = this.tweensIntroObject; e < i.length; e++)(r = i[e]).pause(); for (var n = 0, s = this.groupsParts; n < s.length; n++) s[n].pause(); for (var o = 0, a = this.tweensCorrect; o < a.length; o++) { var r = a[o];
                    r.pause() } } }, i.prototype.onFocus = function() { this.pauseFocus = !1, this.checkResume() }, i.prototype.onIncorrecOrientation = function() { if (this.uiGameplay.pauseEnable && (this.uiGameplay.disableKeyInput(), this.pressPause()), this.uiTutorial.pause(), this.uiTutorialGame.pause(), this.pauseOrientation = !0, t.Audios.onBlur(this.game), this.isPause) this.componentOverlay.pause();
            else { this.uiGameplay.pause(), this.timeInactive.pause(), this.isInactiveAnim && (this.tweenInactive && this.tweenInactive.pause(), this.inactiveAnim.ph2Animations && this.inactiveAnim.ph2Animations.pause()); for (var e = 0, i = this.tweensIntroObject; e < i.length; e++)(o = i[e]).pause(); for (var n = 0, s = this.tweensCorrect; n < s.length; n++) { var o = s[n];
                    o.pause() } for (var a = 0, r = this.groupsParts; a < r.length; a++) r[a].pause() } }, i.prototype.onCorrectOrientation = function() { this.pauseOrientation = !1, this.checkResume() }, i.prototype.resize = function() { this.bg.width = this.game.width, this.bg.height = this.game.height, this.goodFolder.x = this.game.width - 75, this.uiGameplay.resize(), this.uiPause.resize(), this.uiConfirmation.resize(); var e = .9; if (t.Constants.CALCULATED_WIDTH < 960) { e = t.Constants.CALCULATED_WIDTH / 960 - .1; for (var i = 0, n = this.groupsParts; i < n.length; i++)(h = n[i]).scale.x = e, h.scale.y = e } else { e = .9; for (var s = 0, o = this.groupsParts; s < o.length; s++)(h = o[s]).scale.x = e, h.scale.y = e } for (var a = 0, r = this.groupsParts; a < r.length; a++) { var h = r[a];
                h.resize(e + .05) } }, i.prototype.checkResume = function() { if (!this.pauseFocus && !this.pauseOrientation)
                if (t.Audios.onFocus(this.game), this.uiTutorial.resume(), this.uiTutorialGame.resume(), this.isPause) this.componentOverlay.resume();
                else { this.uiGameplay.resume(), this.timeInactive.resume(), this.isInactiveAnim && (this.tweenInactive && this.tweenInactive.resume(), this.inactiveAnim.ph2Animations && this.inactiveAnim.ph2Animations.resume()); for (var e = 0, i = this.tweensIntroObject; e < i.length; e++)(o = i[e]).resume(); for (var n = 0, s = this.tweensCorrect; n < s.length; n++) { var o = s[n];
                        o.resume() } for (var a = 0, r = this.groupsParts; a < r.length; a++) r[a].resume() } }, i.prototype.shutdown = function() { t.Instances.controlButtonUI.removeControl(this.game); for (var i = 0, n = this.tweensIntroObject; i < n.length; i++)(a = n[i]).onComplete.removeAll(), a.stop(); for (var s = 0, o = this.tweensCorrect; s < o.length; s++) { var a = o[s];
                a.onComplete.removeAll(), a.stop() } this.game.onFocus.remove(this.onFocus, this), this.game.onBlur.remove(this.onBlur, this), Game.Instances.onIncorrectOrientation.remove(this.onIncorrecOrientation, this), Game.Instances.onCorrectOrientation.remove(this.onCorrectOrientation, this), this.componentMgr.removeComponent(this.componentDragZone), t.AnimationPool.instance.clearAll(), this.componentMgr.destroy(), this.componentMgr = null, this.componentDragZone = null; for (var r = 0, h = this.groupsParts; r < h.length; r++) h[r].destroy();
            e.prototype.shutdown.call(this) }, i }(Phaser.State);
    t.SeparateBugState = e }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e = function(t) {
        function e(e, i, n, s, o) { void 0 === i && (i = 10), void 0 === n && (n = 10), void 0 === s && (s = 0), void 0 === o && (o = 0); var a = t.call(this, null, !1) || this; return a.game = e, a.width = i, a.height = n, a.offSet = new Phaser.Point(s, o), a.debug = !0, a.renderColor = "rgba(255,0,0,0.4)", a } return __extends(e, t), e.prototype.render = function(t) { if (this.debug && this.game.debug.context) { void 0 === t && (t = !0); var e = this.game.debug.context;
                e.fillStyle = this.renderColor, e.strokeStyle = this.renderColor; var i = this.gameObject.x + this.offSet.x - this.width / 2,
                    n = this.gameObject.y + this.offSet.y - this.height / 2;
                t ? e.fillRect(i, n, this.width, this.height) : e.strokeRect(i, n, this.width, this.height) } }, e.prototype.setBody = function(t, e, i, n) { this.width = t, this.height = void 0 !== e ? e : this.height; var s = void 0 !== i ? i : this.offSet.x,
                o = void 0 !== n ? n : this.offSet.y;
            this.offSet = new Phaser.Point(s, o) }, e.prototype.getBody = function() { return { x: this.gameObject.x + this.offSet.x, y: this.gameObject.y + this.offSet.y, width: this.width, height: this.height } }, e }(Ph2.Component);
    t.RectangleBody = e }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e = function(t) {
        function e(e, i, n, s, o) { var a = t.call(this, null, !1) || this; return a.percent = 100, a.posX = i, a.posY = n, a.graphic = new Phaser.Graphics(e, a.posX, a.posY), a.graphic.beginFill(16711680), a.graphic.drawRect(0, 0, s, o), a.totalHeight = o, a.totalWidth = s, a } return __extends(e, t), e.prototype.setPercent = function(t) { if (t !== this.percent) { if (t < 0 ? t = 0 : t > 100 && (t = 100), this.percent = t, this.totalHeight <= 0) return;
                this.graphic.clear(), this.graphic.beginFill(16711680), this.graphic.drawRect(0, 0, this.percent / 100 * this.totalWidth, this.totalHeight) } }, e.prototype.destroy = function() { this.graphic.destroy(), this.graphic = null, this.rect = null, t.prototype.destroy.call(this) }, e }(Ph2.Component);
    t.BarPercent = e }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e = function(t) {
        function e(i, n) { void 0 === n && (n = !0); var s = t.call(this, e.priority, !1) || this; return s.game = i, s.enabled = !0, s.isSelect = !1, s.mouseIsOver = !1, s.useHandCursor = n, s.onInputDown = new Phaser.Signal, e.priority++, s.inputEnable = !0, s.game.input.onDown.add(s.checkInputDown, s), s } return __extends(e, t), e.prototype.update = function() { if (this.useHandCursor && this.inputEnable) { var t = void 0,
                    i = this.game.input.activePointer;
                (t = this.gameObject.rectangleBody).x - t.width / 2 <= i.x && t.x + t.width / 2 >= i.x && t.y - t.height / 2 <= i.y && t.y + t.height / 2 >= i.y ? this.mouseIsOver || (this.mouseIsOver = !0, e.mouseIsOverCount++, this.game.canvas.style.cursor = "pointer") : this.mouseIsOver && (this.mouseIsOver = !1, e.mouseIsOverCount--, 0 === e.mouseIsOverCount && (this.game.canvas.style.cursor = "default")) } }, e.prototype.checkInputDown = function(t, e) { var i;
            (i = this.gameObject.rectangleBody).x - i.width / 2 <= t.x && i.x + i.width / 2 >= t.x && i.y - i.height / 2 <= t.y && i.y + i.height / 2 >= t.y && this.onInputDown.dispatch(t) }, e.prototype.enableInput = function() { this.inputEnable || (this.game.input.onDown.add(this.checkInputDown, this), this.inputEnable = !0) }, e.prototype.disableInput = function() { this.inputEnable && (this.useHandCursor && this.mouseIsOver && (this.mouseIsOver = !1, e.mouseIsOverCount--, 0 === e.mouseIsOverCount && (this.game.canvas.style.cursor = "default")), this.game.input.onDown.remove(this.checkInputDown, this), this.inputEnable = !1) }, e.prototype.destroy = function() { this.useHandCursor && this.mouseIsOver && (this.mouseIsOver = !1, e.mouseIsOverCount--, 0 === e.mouseIsOverCount && (this.game.canvas.style.cursor = "default")), this.onInputDown.dispose(), this.onInputDown = null, t.prototype.destroy.call(this) }, e.priority = 1, e.mouseIsOverCount = 0, e }(Ph2.Component);
    t.BasicInput = e }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e = function(t) {
        function e(i, n, s) { void 0 === n && (n = 0), void 0 === s && (s = 0); var o = t.call(this, e.priority, !1) || this; return e.priority++, o.game = i, o.offSet = new Phaser.Point(n, s), o.dragging = !1, o.paused = !1, o.onStarDrag = new Phaser.Signal, o.onStopDrag = new Phaser.Signal, o.enableSelect = !0, o } return __extends(e, t), e.prototype.startDrag = function() { e.isSelect || !1 === this.enableSelect || (e.isSelect = !0, this.onStarDrag.dispatch(), this.dragging = !0, this.game.input.onUp.addOnce(this.stopDrag, this)) }, e.prototype.update = function() { if (this.dragging && !this.paused) { var t = this.game.input.activePointer;
                this.gameObject.x = t.x + this.offSet.x, this.gameObject.y = t.y + this.offSet.y } }, e.prototype.stopDrag = function() { this.onStopDrag.dispatch(), e.isSelect = !1, this.dragging = !1 }, e.prototype.destroy = function() { this.dragging && this.stopDrag(), t.prototype.destroy.call(this) }, e.priority = 1, e.isSelect = !1, e }(Ph2.Component);
    t.BasicDrag = e }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e = function(t) {
        function e(e) { var i = t.call(this, null, !1) || this; return i.game = e, i } return __extends(e, t), e.prototype.checkOverlapped = function(t, e) { var i, n, s = !1; return i = t.rectangleBody, n = e.rectangleBody, Math.abs(i.x - n.x) <= i.width / 2 + n.width / 2 && Math.abs(i.y - n.y) <= i.height / 2 + n.height / 2 && (s = !0), s }, e }(Ph2.Component);
    t.BasicOverlap = e }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e = function(e) {
        function i(i, n) { void 0 === n && (n = !0); var s = e.call(this, null, !1) || this; return s.game = i, s.removeSignalCorrect = n, s.onCorrectDragZone = new Phaser.Signal, s.onIncorrectDragZone = new Phaser.Signal, s.zones = [], s.dragObject = [], s.dragGoodZone = [], s.dragBadZone = [], s.dragInitPosition = [], s.onCorrectDragZone = new Phaser.Signal, s.onIncorrectDragZone = new Phaser.Signal, s.onNothingDragZone = new Phaser.Signal, s.componentMgr = Ph2.ComponentPlugin.initComponents(s), s.componentOverlap = s.componentMgr.addComponent(new t.BasicOverlap(s.game)), s } return __extends(i, e), i.prototype.addZone = function(t, e) { this.zones[e] = t }, i.prototype.addDragObject = function(t, e, i) { var n = this.dragObject.indexOf(t); - 1 === n ? (this.dragObject.push(t), this.dragGoodZone.push(e), this.dragBadZone.push(i), this.dragInitPosition.push({ x: t.rectangleBody.x, y: t.rectangleBody.y }), this.addObjectListener(t)) : (this.dragGoodZone[n] = e, this.dragBadZone.push(i)) }, i.prototype.addObjectListener = function(t) { t.onStopDrag.add(function() { this.checkInputOnDragObject(t) }, this) }, i.prototype.checkInputOnDragObject = function(t) { var e = this.dragObject.indexOf(t),
                i = this.dragGoodZone[e],
                n = this.zones[i],
                s = this.componentOverlap.checkOverlapped(t, n),
                o = this.dragInitPosition[e]; if (s) this.onCorrectDragZone.dispatch(t, o), this.removeSignalCorrect && t.onStopDrag.removeAll(this);
            else { var a = this.dragBadZone[e],
                    r = this.zones[a];
                this.componentOverlap.checkOverlapped(t, r) ? this.onIncorrectDragZone.dispatch(t, o) : this.onNothingDragZone.dispatch(t, o) } }, i.prototype.destroy = function() { for (var t = 0, i = this.dragObject; t < i.length; t++) i[t].onStopDrag.removeAll(this);
            this.zones = [], this.dragObject = [], this.dragGoodZone = [], this.dragInitPosition = [], this.onCorrectDragZone.dispose(), this.onIncorrectDragZone.dispose(), this.onCorrectDragZone = null, this.onIncorrectDragZone = null, e.prototype.destroy.call(this) }, i }(Ph2.Component);
    t.DragZone = e }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e = function(e) {
        function i(i, n, s, o, a) { void 0 === a && (a = !0); var r = e.call(this, null, !1) || this; return r.game = i, r.icons = [], r.paused = !1, r.positions = [], r.iconsID = [], r.velocity = 6, r.deceleration = 1, r.isManual = !0, r.needMove = !1, r.inputPoint = new Phaser.Point(0, 0), r.startSwipePoint = new Phaser.Point(0, 0), r.mainGroup = r.game.add.group(), r.componentMgr = Ph2.ComponentPlugin.initComponents(r), r.width = n, r.height = s, r.distanceItems = o, r.componentBody = r.componentMgr.addComponent(new t.RectangleBody(r.game, r.width, r.height)), r.componentInput = r.componentMgr.addComponent(new t.BasicInput(r.game)), r.componentInput.onInputDown.add(r.onInitSwipe, r), r.onEndSwipe = new Phaser.Signal, r.onEndMove = new Phaser.Signal, r.onStartMove = new Phaser.Signal, r.onStartSwipe = new Phaser.Signal, r.useMask = a, r.minVelocity = 8, r.useMask && (r.mask = new Phaser.Graphics(r.game), r.mask.beginFill(16777215), r.mask.drawRect(-r.width / 2, -r.height / 2, r.width, r.height), r.mainGroup.add(r.mask)), r } return __extends(i, e), Object.defineProperty(i.prototype, "group", { get: function() { return this.mainGroup }, enumerable: !0, configurable: !0 }), Object.defineProperty(i.prototype, "x", { get: function() { return this.mainGroup.x }, set: function(t) { this.mainGroup.x = t }, enumerable: !0, configurable: !0 }), Object.defineProperty(i.prototype, "y", { get: function() { return this.mainGroup.y }, set: function(t) { this.mainGroup.y = t }, enumerable: !0, configurable: !0 }), Object.defineProperty(i.prototype, "rectangleBody", { get: function() { return this.componentBody.getBody() }, enumerable: !0, configurable: !0 }), i.prototype.addIcon = function(t, e, i, n) { void 0 === i && (i = 0); var s = this.icons.length * this.distanceItems - this.distanceItems;
            this.positions.push(s); var o = new Phaser.Sprite(this.game, s, i, e, n);
            o.anchor.set(.5, .5), this.useMask && (o.mask = this.mask), this.mainGroup.add(o), this.icons.push(o), this.iconsID.push(t) }, i.prototype.onInitSwipe = function(t) { if (!(this.positions.length <= 1)) { this.needMove = !1, this.isManual = !1, this.onStartSwipe.dispatch(), this.onStartMove.dispatch(), this.initTimeSwipe = (new Date).getTime(); var e = this.icons[0].x - this.positions[0];
                this.inputPoint.x = t.x - e, this.inputPoint.y = t.y - e, this.startSwipePoint.set(t.x, t.y), this.game.input.addMoveCallback(this.move, this), this.game.input.onUp.addOnce(this.endSwipe, this) } }, i.prototype.move = function(t) { for (var e = t.x, i = e - this.inputPoint.x, n = 0, s = this.positions.length; n < s; n++) this.icons[n].x = this.positions[n] + i; var o, a;
            i > this.distanceItems / 2 ? (o = this.icons.splice(this.icons.length - 1, 1)[0], a = this.iconsID.splice(this.iconsID.length - 1, 1)[0], this.icons.unshift(o), this.iconsID.unshift(a), this.inputPoint.x = e + this.distanceItems / 2) : i < -this.distanceItems / 2 && (o = this.icons.splice(0, 1)[0], a = this.iconsID.splice(0, 1)[0], this.icons.push(o), this.iconsID.push(a), this.inputPoint.x = e - this.distanceItems / 2) }, i.prototype.endSwipe = function(t) { this.endTimeSwipe = (new Date).getTime(), this.needMove = !0, this.isManual = !1, this.game.input.deleteMoveCallback(this.move, this), this.onEndSwipe.dispatch(); var e = this.endTimeSwipe - this.initTimeSwipe,
                i = t.x - this.startSwipePoint.x;
            this.velocity = i / e * 10 }, i.prototype.getItemId = function(t) { return t >= this.iconsID.length ? null : this.iconsID[t] }, i.prototype.update = function() { if (this.needMove && !this.paused)
                if (this.isManual) { for (var t = !1, e = 0, i = this.positions.length; e < i; e++) this.icons[e].x > this.positions[e] ? (this.icons[e].x -= this.velocity, this.icons[e].x <= this.positions[e] ? (this.icons[e].x = this.positions[e], t = !0) : t = !1) : this.icons[e].x < this.positions[e] && (this.icons[e].x += this.velocity, this.icons[e].x >= this.positions[e] ? (this.icons[e].x = this.positions[e], t = !0) : t = !1); if (t) { for (var e = 0, i = this.positions.length; e < i; e++) this.icons[e].x = this.positions[e];
                        this.needMove = !1, this.onEndMove.dispatch() } } else if (Math.abs(this.velocity) > this.minVelocity) { var n = void 0,
                    s = void 0; if (this.velocity >= 0) { if (Math.abs(this.icons[0].x - this.positions[0]) > Math.abs(this.icons[0].x - this.positions[1])) { n = this.icons.splice(this.icons.length - 1, 1)[0], s = this.iconsID.splice(this.iconsID.length - 1, 1)[0], this.icons.unshift(n), this.iconsID.unshift(s);
                        a = this.icons[1].x - this.positions[1];
                        this.icons[0].x = this.positions[0] + a } } else { var o = this.icons.length - 1; if (Math.abs(this.icons[o].x - this.positions[o]) > Math.abs(this.icons[o].x - this.positions[o - 1])) { n = this.icons.splice(0, 1)[0], s = this.iconsID.splice(0, 1)[0], this.icons.push(n), this.iconsID.push(s); var a = this.icons[1].x - this.positions[1];
                        this.icons[o].x = this.positions[o] + a } } for (var e = 0, i = this.positions.length; e < i; e++) this.icons[e].x += this.velocity;
                this.velocity = this.velocity > 0 ? this.velocity - this.deceleration : this.velocity + this.deceleration } else { this.velocity = this.minVelocity; for (var t = !0, e = 0, i = this.positions.length; e < i; e++) this.icons[e].x > this.positions[e] ? (this.icons[e].x -= this.velocity, this.icons[e].x <= this.positions[e] ? this.icons[e].x = this.positions[e] : t = !1) : this.icons[e].x < this.positions[e] && (this.icons[e].x += this.velocity, this.icons[e].x >= this.positions[e] ? this.icons[e].x = this.positions[e] : t = !1); if (t) { for (var e = 0, i = this.positions.length; e < i; e++) this.icons[e].x = this.positions[e];
                    this.needMove = !1, this.onEndMove.dispatch() } } }, i.prototype.enableInput = function() { this.componentInput.enableInput() }, i.prototype.disableInput = function() { this.componentInput.disableInput() }, i.prototype.render = function() { this.componentBody.render() }, i.prototype.moveLeft = function() { if (!0 !== this.needMove) { this.onStartMove.dispatch(); var t, e;
                this.needMove = !0, this.isManual = !0, this.velocity = 24, this.onEndSwipe.dispatch(), t = this.icons.splice(this.icons.length - 1, 1)[0], e = this.iconsID.splice(this.iconsID.length - 1, 1)[0], this.icons.unshift(t), this.iconsID.unshift(e), this.icons[0].x = this.positions[0], this.onEndSwipe.dispatch() } }, i.prototype.moveRight = function() { if (!0 !== this.needMove) { this.onStartMove.dispatch(); var t, e;
                this.needMove = !0, this.isManual = !0, this.velocity = 24, t = this.icons.splice(0, 1)[0], e = this.iconsID.splice(0, 1)[0], this.icons.push(t), this.iconsID.push(e), this.icons[this.icons.length - 1].x = this.positions[this.icons.length - 1], this.onEndSwipe.dispatch() } }, i.prototype.destroy = function() { this.componentMgr.removeComponent(this.componentInput), this.componentMgr.removeComponent(this.componentBody), this.componentMgr.destroy(), this.componentInput = null, this.componentBody = null, this.componentMgr = null, this.mainGroup.destroy(!0), this.mainGroup = null, this.icons = [], this.iconsID = [], this.positions = [], this.mask = null, this.onEndSwipe.dispose(), this.onEndSwipe = null, this.onEndMove.dispose(), this.onEndMove = null, e.prototype.destroy.call(this) }, i }(Ph2.Component);
    t.SwipeZone = e }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e = function(t) {
        function e(e) { var i = t.call(this, null, !1) || this; return i.maxLifes = e, i.lifesAct = e, i.onNoLife = new Phaser.Signal, i.onLostLife = new Phaser.Signal, i.onEarnLife = new Phaser.Signal, i } return __extends(e, t), e.prototype.addLife = function(t) { void 0 === t && (t = 1), this.lifesAct + t > this.maxLifes ? this.lifesAct = this.maxLifes : this.lifesAct += t, this.onEarnLife.dispatch() }, e.prototype.removeLife = function(t) { void 0 === t && (t = 1), this.lifesAct - t <= 0 ? (this.lifesAct = 0, this.onNoLife.dispatch()) : (this.lifesAct -= t, this.onLostLife.dispatch()) }, Object.defineProperty(e.prototype, "live", { get: function() { return this.lifesAct }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "maxlifes", { get: function() { return this.maxLifes }, enumerable: !0, configurable: !0 }), e.prototype.destroy = function() { this.onNoLife.dispose(), this.onLostLife.dispose(), this.onEarnLife.dispose(), this.onEarnLife = null, this.onNoLife = null, this.onLostLife = null, t.prototype.destroy.call(this) }, e }(Ph2.Component);
    t.Life = e }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e = function(t) {
        function e(e, i, n) { var s = t.call(this, null, !1) || this; return s.percent = 100, s.sprite = new Phaser.Sprite(e, 0, 0, i, n), s.totalHeight = s.sprite.height, s.totalWidth = s.sprite.width, s.rect = new Phaser.Rectangle(0, 0, s.percent / 100 * s.totalWidth, s.totalHeight), s.sprite.crop(s.rect, !0), s } return __extends(e, t), e.prototype.setAnchor = function(t, e) { this.sprite.anchor.set(t, e), this.sprite.pivot.x = this.totalWidth * this.sprite.anchor.x, this.sprite.pivot.y = this.totalHeight * this.sprite.anchor.y }, e.prototype.setPercent = function(t) { if (t !== this.percent) { if (t < 0 ? t = 0 : t > 100 && (t = 100), this.percent = t, this.totalHeight <= 0) return;
                this.rect.width = Math.max(0, this.percent / 100 * this.totalWidth), this.sprite.crop(this.rect, !0) } }, e.prototype.destroy = function() { this.sprite.destroy(), this.sprite = null, this.rect = null, t.prototype.destroy.call(this) }, e }(Ph2.Component);
    t.LoadingBar = e }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e = function(e) {
        function i(i, n) { var s = e.call(this, null, !1) || this;
            s.game = i, s.group = n, s.componentMgr = Ph2.ComponentPlugin.initComponents(s), s.loadingBar = s.componentMgr.addComponent(new t.LoadingBar(i, "load_cn", "loading1.png")); var o = new Phaser.Point(s.game.width / 2, s.game.height / 2); return s.logo = new Phaser.Sprite(s.game, o.x, o.y - 55, "fg_logo"), s.logo.anchor.set(.5, .5), s.loadingBg = new Phaser.Sprite(s.game, o.x, o.y + 150, "load_cn", "loading0.png"), s.loadingBg.anchor.set(.5, .5), s.loadingBar.sprite.x = o.x - s.loadingBg.width / 2, s.loadingBar.sprite.y = o.y + 98 + 75, s.loadingBar.setAnchor(0, .5), s.playButton = new Phaser.Sprite(s.game, o.x + 20, o.y + 200, "load_cn", "play_button.png"), s.playButton.anchor.set(.5, .5), s.playButton.inputEnabled = !0, s.playButton.input.useHandCursor = !0, s.playButton.visible = !1, s.group.add(s.logo), s.group.add(s.loadingBg), s.group.add(s.loadingBar.sprite), s.group.add(s.playButton), s.game.onBlur.add(s.onBlur, s), s.game.onFocus.add(s.onFocus, s), s } return __extends(i, e), i.prototype.showPlayButton = function() { this.loadingBg.visible = !1, this.loadingBar.sprite.visible = !1, this.playButton.visible = !0, this.playButton.events.onInputUp.addOnce(this.pressPlayButton, this), this.tween = this.game.add.tween(this.playButton.scale).to({ x: 1.1, y: 1.1 }, 500, Phaser.Easing.Back.Out, !0, 1e3, 0, !0), this.tween.repeat(-1, 800) }, i.prototype.pressPlayButton = function() { void 0 !== this.gameObject.pressPlayButton && this.gameObject.pressPlayButton() }, i.prototype.setPercent = function(t) { this.loadingBar.setPercent(t) }, i.prototype.resize = function() { var t = new Phaser.Point(this.game.width / 2, this.game.height / 2);
            this.playButton.position.set(t.x + 20, t.y + 200), this.logo.position.set(t.x, t.y - 55), this.loadingBg.position.set(t.x, t.y + 150), this.loadingBar.sprite.position.set(t.x - this.loadingBg.width / 2, t.y + 98 + 75) }, i.prototype.onBlur = function() { this.tween && this.tween.pause() }, i.prototype.onFocus = function() { this.tween && this.tween.resume() }, i.prototype.destroy = function() { this.group.remove(this.logo), this.group.remove(this.loadingBg), this.group.remove(this.loadingBar.sprite), this.game.onBlur.remove(this.onBlur, this), this.game.onFocus.remove(this.onFocus, this), this.tween.stop(), this.group = null, this.logo.destroy(), this.logo = null, this.loadingBg.destroy(), this.loadingBg = null, this.componentMgr.removeComponent(this.loadingBar), this.componentMgr = null, e.prototype.destroy.call(this) }, i }(Ph2.Component);
    t.LoadingCN = e }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e = function(t) {
        function e(e, i) { var n = t.call(this, null, !1) || this; return n.game = e, n.graphics = n.game.add.graphics(0, 0), n.graphics.beginFill(0, 1), n.graphics.drawRect(0, 0, n.game.width, n.game.height), n.graphics.endFill(), n.opacityNum = i, n.graphics.alpha = i, n.graphics.inputEnabled = !0, n.graphics.input.useHandCursor = !1, n.game.scale.onSizeChange.add(n.resize, n), n.activeTween = null, n.resize(), n.kill(), n } return __extends(e, t), Object.defineProperty(e.prototype, "overlaySprite", { get: function() { return this.graphics }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "opacity", { set: function(t) { this.opacityNum = t, this.graphics.alpha = t }, enumerable: !0, configurable: !0 }), e.prototype.kill = function() { this.graphics.alive = !1, this.graphics.exists = !1, this.graphics.visible = !1, this.game.scale.onSizeChange.remove(this.resize, this) }, e.prototype.revive = function() { this.graphics.alive = !0, this.graphics.exists = !0, this.graphics.visible = !0, this.resize(), this.game.scale.onSizeChange.add(this.resize, this) }, e.prototype.fadeIn = function(t, e, i, n) { void 0 === e && (e = this.opacityNum); var s;
            this.graphics.alpha = .2, s = this.game.add.tween(this.graphics).to({ alpha: e }, t, "Linear", !0), i && n && s.onComplete.addOnce(i, n), this.activeTween = s }, e.prototype.fadeOut = function(t, e, i, n) { void 0 === e && (e = this.opacityNum); var s;
            this.graphics.alpha = e, s = this.game.add.tween(this.graphics).to({ alpha: 0 }, t, "Linear", !0), i && n && s.onComplete.addOnce(i, n), this.activeTween = s }, e.prototype.pause = function() { this.activeTween && this.activeTween.pause() }, e.prototype.resume = function() { this.activeTween && this.activeTween.resume() }, e.prototype.resize = function() { this.graphics.clear(), this.graphics.beginFill(0, 1), this.graphics.drawRect(0, 0, this.game.width, this.game.height), this.graphics.endFill() }, e.prototype.destroy = function() { this.game.scale.onSizeChange.remove(this.resize, this), this.graphics.destroy(), t.prototype.destroy.call(this) }, e }(Ph2.Component);
    t.Overlay = e }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e;! function(t) { t[t.TOP = 0] = "TOP", t[t.BOTTOM = 1] = "BOTTOM", t[t.LEFT = 2] = "LEFT", t[t.RIGHT = 3] = "RIGHT", t[t.TOP_LEFT = 4] = "TOP_LEFT", t[t.TOP_RIGHT = 5] = "TOP_RIGHT", t[t.BOTTOM_LEFT = 6] = "BOTTOM_LEFT", t[t.BOTTOM_RIGHT = 7] = "BOTTOM_RIGHT" }(e = t.LIMITTOUCH || (t.LIMITTOUCH = {})); var i = function(t) {
        function i(e) { var i = t.call(this, null, !1) || this; return i.game = e, i.velocity = new Phaser.Point(0, 0), i.gravity = new Phaser.Point(0, 0), i.limitLeft = 0, i.limitRight = i.game.world.width, i.limitTop = 0, i.limitBottom = i.game.world.height, i.paused = !1, i.onCollisionLimit = new Phaser.Signal, i.onSeparateLimit = new Phaser.Signal, i.debug = !0, i.renderColor = "rgba(255,0,0,0.4)", i } return __extends(i, t), i.prototype.start = function() { var t = this.gameObject.width / 2,
                e = this.gameObject.height / 2;
            this.gameObject.x - t <= this.limitLeft ? (this.gameObject.x = this.limitLeft + t, this.isTouchLeft = !0, this.isTouchRight = !1) : this.gameObject.x + t >= this.limitRight ? (this.gameObject.x = this.limitRight - t, this.isTouchLeft = !1, this.isTouchRight = !0) : (this.isTouchLeft = !1, this.isTouchRight = !1), this.gameObject.y - e <= this.limitTop ? (this.gameObject.y = this.limitTop + e, this.isTouchTop = !0, this.isTouchBottom = !1) : this.gameObject.y + e >= this.limitBottom ? (this.gameObject.y = this.limitBottom - e, this.isTouchTop = !1, this.isTouchBottom = !0) : (this.isTouchTop = !1, this.isTouchBottom = !1) }, i.prototype.update = function() { if (!0 !== this.paused) { var t = this.game.time.elapsedMS / 60,
                    e = this.gameObject.width / 2,
                    i = this.gameObject.height / 2,
                    n = this.isTouchLeft,
                    s = this.isTouchRight,
                    o = this.isTouchTop,
                    a = this.isTouchBottom;
                this.gameObject.x = this.gameObject.x + this.velocity.x * t, this.gameObject.y = this.gameObject.y + this.velocity.y * t, this.velocity.x -= this.gravity.x * t, this.velocity.y -= this.gravity.y * t, this.gameObject.x - e <= this.limitLeft ? (this.gameObject.x = this.limitLeft + e, this.isTouchLeft = !0, this.isTouchRight = !1) : this.gameObject.x + e >= this.limitRight ? (this.gameObject.x = this.limitRight - e, this.isTouchLeft = !1, this.isTouchRight = !0) : (this.isTouchLeft = !1, this.isTouchRight = !1), this.gameObject.y - i <= this.limitTop ? (this.gameObject.y = this.limitTop + i, this.isTouchTop = !0, this.isTouchBottom = !1) : this.gameObject.y + i >= this.limitBottom ? (this.gameObject.y = this.limitBottom - i, this.isTouchTop = !1, this.isTouchBottom = !0) : (this.isTouchTop = !1, this.isTouchBottom = !1), this.checkCollisionLimit(o, a, n, s), this.checkSepareteLimit(o, a, n, s) } }, i.prototype.setSpeed = function(t, e) { this.velocity.set(t, e) }, i.prototype.setGravity = function(t, e) { this.gravity.set(t, e) }, i.prototype.setLimits = function(t, e, i, n) { this.limitTop = t, this.limitBottom = e, this.limitRight = n, this.limitLeft = i }, i.prototype.checkCollisionLimit = function(t, i, n, s) { var o, a = "",
                r = "";!1 === t && !0 === this.isTouchTop ? a = "TOP" : !1 === i && !0 === this.isTouchBottom && (a = "BOTTOM"), !1 === n && !0 === this.isTouchLeft ? r = "LEFT" : !1 === s && !0 === this.isTouchRight && (r = "RIGHT"), "" !== (o = "" !== a && "" !== r ? a + "_" + r : a + r) && this.onCollisionLimit.dispatch(e[o]) }, i.prototype.checkSepareteLimit = function(t, i, n, s) { var o, a = "",
                r = "";!0 === t && !1 === this.isTouchTop ? a = "TOP" : !0 === i && !1 === this.isTouchBottom && (a = "BOTTOM"), !0 === n && !1 === this.isTouchLeft ? r = "LEFT" : !0 === s && !1 === this.isTouchRight && (r = "RIGHT"), "" !== (o = "" !== a && "" !== r ? a + "_" + r : a + r) && this.onSeparateLimit.dispatch(e[o]) }, i.prototype.destroy = function() { this.onCollisionLimit.dispose(), this.onSeparateLimit.dispose(), this.onCollisionLimit = null, this.onSeparateLimit = null, this.velocity = null, this.gravity = null, t.prototype.destroy.call(this) }, i.prototype.render = function(t) { if (this.debug && this.game.debug.context) { void 0 === t && (t = !1); var e = this.game.debug.context;
                e.fillStyle = this.renderColor, e.strokeStyle = this.renderColor; var i = this.limitLeft,
                    n = this.limitTop,
                    s = Math.abs(this.limitRight - this.limitLeft),
                    o = Math.abs(this.limitTop - this.limitBottom);
                t ? e.fillRect(i, n, s, o) : e.strokeRect(i, n, s, o) } }, i }(Ph2.Component);
    t.DynamicObject = i }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e = function(e) {
        function i(t, i, n, s, o) { var a = e.call(this, null, !1) || this; return a.game = t, a.correctID = n, a.componentMgr = Ph2.ComponentPlugin.initComponents(a), a.mainGroup = a.game.add.group(), a.position = new Phaser.Point(s, o), a.isDisableInputCorrect = !1, a.onCompletedImage = new Phaser.Signal, a.onEndSwipe = new Phaser.Signal, a.onEndMove = new Phaser.Signal, a.onStartMove = new Phaser.Signal, a.onStartSwipe = new Phaser.Signal, a.onCompletedWrong = new Phaser.Signal, a.tweenWrong = [], a.addLayers(i), a } return __extends(i, e), i.prototype.addLayers = function(e) { var i, n = this.position.x,
                s = this.position.y,
                o = 0;
            this.componentsSwipeZone = []; for (var a = 0, r = e; a < r.length; a++) { var h = r[a];
                this.componentsSwipeZone.length >= 1 && (s += h.height / 2), i = this.componentMgr.addComponent(new t.SwipeZone(this.game, h.width, h.height, h.distance)); for (var l = 0, c = h.icons; l < c.length; l++) { var u = c[l];
                    i.addIcon(u.id, u.atlas, u.offsetY, u.key) } i.x = n, i.y = s, i.onStartSwipe.add(this.onInitSwipe, this), i.onEndSwipe.add(this.checkCorrectLayer, this, 0, o), i.onStartMove.add(this.onInitMove, this), i.onEndMove.add(this.checkZoneNeedMove, this), o++, s += h.height / 2, s += h.offsetY, this.componentsSwipeZone.push(i), this.mainGroup.add(i.group) } this.isDisableInputCorrect && this.disableInputCorrect() }, i.prototype.onInitSwipe = function() { this.onStartSwipe.dispatch() }, i.prototype.onInitMove = function() { this.onStartMove.dispatch() }, i.prototype.checkCorrectLayer = function(t) { this.onEndSwipe.dispatch(t), this.checkZoneNeedMove(), this.isDisableInputCorrect && this.disableInputCorrect(); for (var e = 0, i = this.componentsSwipeZone; e < i.length; e++)
                if ((o = i[e]).getItemId(1) !== this.correctID) return; for (var n = 0, s = this.componentsSwipeZone; n < s.length; n++) { var o = s[n];
                this.isDisableInputCorrect && o.disableInput(), o.onEndMove.addOnce(this.completedCorrect, this) } }, i.prototype.checkCorrectImage = function() { for (var t = 0, e = this.componentsSwipeZone.length; t < e; t++)
                if (!this.isSwipeZoneCorrect(t)) return !1; return !0 }, i.prototype.isSwipeZoneCorrect = function(t) { return this.componentsSwipeZone[t].getItemId(1) === this.correctID }, i.prototype.moveLeft = function(t) { this.componentsSwipeZone[t].moveLeft() }, i.prototype.moveRight = function(t) { this.componentsSwipeZone[t].moveRight() }, i.prototype.showSwipe = function(t) { this.componentsSwipeZone[t].group.visible = !0 }, i.prototype.hideSwipe = function(t) { this.componentsSwipeZone[t].group.visible = !1 }, i.prototype.completedCorrect = function() { this.onCompletedImage.dispatch() }, i.prototype.checkZoneNeedMove = function() { for (var t = 0, e = 0, i = this.componentsSwipeZone; e < i.length; e++) i[e].needMove && t++;
            0 === t && this.onEndMove.dispatch() }, i.prototype.disableInputCorrect = function() { for (var t = 0, e = this.componentsSwipeZone; t < e.length; t++) { var i = e[t];
                i.getItemId(1) === this.correctID && i.disableInput() } }, i.prototype.enableInput = function() { for (var t = 0, e = this.componentsSwipeZone; t < e.length; t++) e[t].enableInput();
            this.isDisableInputCorrect && this.disableInputCorrect() }, i.prototype.disableInput = function() { for (var t = 0, e = this.componentsSwipeZone; t < e.length; t++) e[t].disableInput() }, i.prototype.pauseZone = function() { for (var t = 0, e = this.componentsSwipeZone; t < e.length; t++) e[t].paused = !0; for (var i = 0, n = this.tweenWrong; i < n.length; i++) { var s = n[i];
                s && s.pause() } }, i.prototype.resumeZone = function() { for (var t = 0, e = this.componentsSwipeZone; t < e.length; t++) e[t].paused = !1; for (var i = 0, n = this.tweenWrong; i < n.length; i++) { var s = n[i];
                s && s.resume() } }, i.prototype.playWrongSwipeZone = function(t) { var e; return this.tweenWrong[t] && this.tweenWrong[t].stop(!0), e = this.componentsSwipeZone[t].x, this.tweenWrong[t] = this.game.add.tween(this.componentsSwipeZone[t]).to({ x: e + 10 }, 100, "Linear", !0, 0, 3, !0), this.tweenWrong[t].onComplete.addOnce(this.completedWrongTween, this, 0, t, e), this.componentsSwipeZone[t].getItemId(1) === this.correctID }, i.prototype.completedWrongTween = function(t, e, i, n) { this.componentsSwipeZone[i].x = n, this.onCompletedWrong.dispatch() }, Object.defineProperty(i.prototype, "group", { get: function() { return this.mainGroup }, enumerable: !0, configurable: !0 }), Object.defineProperty(i.prototype, "x", { get: function() { return this.position.x }, set: function(t) { for (var e = this.position.x, i = 0, n = this.componentsSwipeZone; i < n.length; i++) { var s = n[i];
                    s.x = s.x - e + t } this.position.x = t }, enumerable: !0, configurable: !0 }), Object.defineProperty(i.prototype, "y", { get: function() { return this.position.y }, set: function(t) { for (var e = this.position.y, i = 0, n = this.componentsSwipeZone; i < n.length; i++) { var s = n[i];
                    s.y = s.y - e + t } this.position.y = t }, enumerable: !0, configurable: !0 }), i.prototype.render = function() { for (var t = 0, e = this.componentsSwipeZone; t < e.length; t++) e[t].render() }, i.prototype.destroy = function() { this.mainGroup.removeAll(); for (var t = 0, i = this.componentsSwipeZone; t < i.length; t++) { var n = i[t];
                this.componentMgr.removeComponent(n) } for (var s = 0, o = this.tweenWrong; s < o.length; s++) { var a = o[s];
                a && a.stop() } this.tweenWrong = [], this.onCompletedWrong.dispose(), this.onCompletedWrong = null, this.onCompletedImage.dispose(), this.onCompletedImage = null, this.onEndSwipe.dispose(), this.onEndSwipe = null, this.componentsSwipeZone = [], this.componentMgr.destroy(), this.componentMgr = null, this.mainGroup.destroy(), this.mainGroup = null, e.prototype.destroy.call(this) }, i }(Ph2.Component);
    t.SwipeCorrectImage = e }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e = function(t) {
        function e() { var e = t.call(this, null, !1) || this; return e.onCollision = new Phaser.Signal, e.groupCheckColliding = [], e.collisionPairs = [], e.bodyCollision = [], e.bodyGroupNum = [], e.pendingSignal = [], e } return __extends(e, t), e.prototype.addCollisionBody = function(t, e) { var i = this.bodyCollision.indexOf(t); - 1 === i ? (this.bodyCollision.push(t), this.bodyGroupNum.push(e)) : (this.groupCheckColliding[this.bodyGroupNum[i]].splice(this.groupCheckColliding[this.bodyGroupNum[i]].indexOf(t), 1), this.bodyGroupNum[i] = e), void 0 === this.groupCheckColliding[e] && (this.groupCheckColliding[e] = []), -1 === this.groupCheckColliding[e].indexOf(t) && this.groupCheckColliding[e].push(t) }, e.prototype.removeCollisionBody = function(t, e) { var i = this.bodyCollision.indexOf(t); - 1 !== i && (this.groupCheckColliding[this.bodyGroupNum[i]].splice(this.groupCheckColliding[this.bodyGroupNum[i]].indexOf(t), 1), this.bodyGroupNum.splice(i, 1), this.bodyCollision.splice(i, 1)) }, e.prototype.addPairsCollisions = function(t, e) { this.collisionPairs.push([t, e]) }, e.prototype.update = function() { for (var t = 0; t < this.collisionPairs.length; t++) this.checkCollisionGroups(this.collisionPairs[t][0], this.collisionPairs[t][1]) }, e.prototype.checkCollisionGroups = function(t, e) { var i = this.groupCheckColliding[t],
                n = this.groupCheckColliding[e]; if (!(void 0 === i || void 0 === n || i.length <= 0 || n.length <= 0)) { for (var s = 0, o = i.length; s < o; s++)
                    for (var a = 0, r = n.length; a < r; a++) this.collisionBodies(i[s], n[a], t, e);
                this.sendPendingsSignal() } }, e.prototype.collisionBodies = function(t, e, i, n) { var s = t.rectangleBody,
                o = e.rectangleBody; if (Math.abs(s.x - o.x) <= s.width / 2 + o.width / 2 && Math.abs(s.y - o.y) <= s.height / 2 + o.height / 2) { var a = { body1: t, body2: e, groupNum1: i, groupNum2: n };
                this.pendingSignal.push(a) } }, e.prototype.sendPendingsSignal = function() { for (var t, e = 0, i = this.pendingSignal.length; e < i; e++) t = this.pendingSignal[e], this.onCollision.dispatch(t.body1, t.body2, t.groupNum1, t.groupNum2);
            this.pendingSignal = [] }, e.prototype.destroy = function() { this.groupCheckColliding = [], this.collisionPairs = [], this.bodyCollision = [], this.bodyGroupNum = [], this.onCollision.dispose(), this.onCollision = null }, e }(Ph2.Component);
    t.GroupCollisionChecker = e }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e = function(t) {
        function e(e) { var i = t.call(this, null, !1) || this; return i.actions = e, i } return __extends(e, t), e.prototype.initAction = function(t) { if (void 0 !== this.actions[t])
                for (var e = 0, i = this.actions[t]; e < i.length; e++) { var n = i[e]; "function" == typeof this.gameObject[n] ? this.gameObject[n].call(this.gameObject) : console.error("gameObject no tiene la funcion: " + n) } else console.warn("no hay una funcion definida para la señal: " + t) }, e }(Ph2.Component);
    t.BehaviorControler = e }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e = function(t) {
        function e() { var e = t.call(this, null, !1) || this; return e.timer = 0, e.timeLimit = 0, e.paused = !0, e.running = !1, e.objSpawn = [], e.spawnIndex = 0, e.onSpawn = new Phaser.Signal, e } return __extends(e, t), e.prototype.addSpawnData = function(t, e, i) { void 0 === i && (i = null); var n, s; if (this.paused && this.running && this.resumeTimer(), (e += this.timer) > this.timeLimit && (this.timeLimit = e), 0 === this.objSpawn.length) s = { obj: [t], time: e, extraData: [i] }, this.objSpawn.push(s);
            else { for (var o = 0, a = this.objSpawn.length; o < a; o++) { if ((n = this.objSpawn[o]).time > e) return s = { obj: [t], time: e, extraData: [i] }, void this.objSpawn.splice(o, 0, s); if (n.time === e) return n.obj.push(t), void n.extraData.push(i) } s = { obj: [t], time: e, extraData: [i] }, this.objSpawn.push(s) } }, e.prototype.startTimer = function() { this.running = !0, this.paused = !1 }, e.prototype.stopTimer = function() { this.running = !1 }, e.prototype.update = function() { this.paused || !this.running || this.spawnIndex >= this.objSpawn.length || (this.timer += this.game.time.elapsedMS, this.timer >= this.objSpawn[this.spawnIndex].time && (this.spawn(this.objSpawn[this.spawnIndex].obj, this.objSpawn[this.spawnIndex].extraData), this.spawnIndex++), this.timer >= this.timeLimit && this.pauseTimer()) }, e.prototype.spawn = function(t, e) { this.onSpawn.dispatch(t, e) }, e.prototype.pauseTimer = function() { this.paused = !0 }, e.prototype.resumeTimer = function() { this.paused = !1 }, e.prototype.resetSpawn = function() { this.timer = 0, this.objSpawn = [], this.timeLimit = 0, this.spawnIndex = 0, this.paused = !0, this.running = !1 }, Object.defineProperty(e.prototype, "time", { get: function() { return this.timer }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "isRunning", { get: function() { return this.running }, enumerable: !0, configurable: !0 }), e.prototype.onTimerEnd = function() { this.running = !1 }, e.prototype.destroy = function() { this.objSpawn = [], this.onSpawn.dispose(), this.onSpawn = null }, e }(Ph2.Component);
    t.SpawnerManager = e }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e = function(t) {
        function e() { var e = t.call(this, null, !1) || this; return e.timer = 0, e.timeLimit = 0, e.paused = !0, e.running = !1, e.objSpawn = [], e.spawnIndex = 0, e.spawnsData = [], e.onSpawn = new Phaser.Signal, e } return __extends(e, t), e.prototype.addSpawnData = function(t, e, i, n, s) { for (var o = 0, a = 0, r = i; a < r.length; a++) o += r[a]; var h = { timeRange: t, objectID: e, objectWeight: i, totalWeight: o, initCooldown: n, lastObjectID: -1, countCreate: 0, extraData: s };
            this.spawnsData.push(h), this.generateFrame(this.spawnsData.length - 1) }, e.prototype.generateFrame = function(t) { for (var e = this.spawnsData[t].totalWeight, i = this.game.rnd.between(0, e), n = this.game.rnd.between(this.spawnsData[t].timeRange[0], this.spawnsData[t].timeRange[1]), s = 0, o = 0, a = this.spawnsData[t].objectWeight.length; o < a; o++) i <= this.spawnsData[t].objectWeight[o] ? (this.spawnsData[t].lastObjectID !== s ? (this.spawnsData[t].lastObjectID = s, this.spawnsData[t].countCreate = 0) : (this.spawnsData[t].countCreate++, this.spawnsData[t].initCooldown[s] > 0 && this.spawnsData[t].initCooldown[s] < this.spawnsData[t].countCreate && (s + 1 < this.spawnsData[t].objectID.length ? (s++, this.spawnsData[t].lastObjectID = s, this.spawnsData[t].countCreate = 0) : (s = 0, this.spawnsData[t].lastObjectID = s, this.spawnsData[t].countCreate = 0))), o = a) : (i -= this.spawnsData[t].objectWeight[o], s++);
            this.addSpawnFrame(this.spawnsData[t].objectID[s], n * Phaser.Timer.SECOND, this.spawnsData[t].extraData, t) }, e.prototype.addSpawnFrame = function(t, e, i, n) { var s, o; if (this.paused && this.running && this.resumeTimer(), (e += this.timer) > this.timeLimit && (this.timeLimit = e), 0 === this.objSpawn.length) o = { objectID: [t], time: e, extraData: [i], spawnDataIndex: [n] }, this.objSpawn.push(o);
            else { for (var a = 0, r = this.objSpawn.length; a < r; a++) { if ((s = this.objSpawn[a]).time > e) return o = { objectID: [t], time: e, extraData: [i], spawnDataIndex: [n] }, void this.objSpawn.splice(a, 0, o); if (s.time === e) return s.objectID.push(t), s.extraData.push(i), void s.spawnDataIndex.push(n) } o = { objectID: [t], time: e, extraData: [i], spawnDataIndex: [n] }, this.objSpawn.push(o) } }, e.prototype.startTimer = function() { this.running = !0, this.paused = !1 }, e.prototype.stopTimer = function() { this.running = !1 }, e.prototype.update = function() { if (!(this.paused || !this.running || this.spawnIndex >= this.objSpawn.length)) { if (this.timer += this.game.time.elapsedMS, this.timer >= this.objSpawn[this.spawnIndex].time) { for (var t = 0, e = this.objSpawn[this.spawnIndex].spawnDataIndex; t < e.length; t++) { var i = e[t];
                        this.generateFrame(i) } this.spawn(this.objSpawn[this.spawnIndex].objectID, this.objSpawn[this.spawnIndex].extraData), this.spawnIndex++ } this.timer >= this.timeLimit && this.pauseTimer() } }, e.prototype.spawn = function(t, e) { this.onSpawn.dispatch(t, e) }, e.prototype.pauseTimer = function() { this.paused = !0 }, e.prototype.resumeTimer = function() { this.paused = !1 }, e.prototype.resetSpawn = function() { this.timer = 0, this.objSpawn = [], this.timeLimit = 0, this.spawnIndex = 0, this.paused = !0, this.running = !1 }, Object.defineProperty(e.prototype, "time", { get: function() { return this.timer }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "isRunning", { get: function() { return this.running }, enumerable: !0, configurable: !0 }), e.prototype.onTimerEnd = function() { this.running = !1 }, e.prototype.destroy = function() { this.objSpawn = [], this.onSpawn.dispose(), this.onSpawn = null }, e }(Ph2.Component);
    t.SpawnerManagerRange = e }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e = function(t) {
        function e(e, i, n) { void 0 === n && (n = !1); var s = t.call(this, null, !1) || this; return s.game = e, s.timer = 0, s.timeLimit = i, s.paused = !0, s.isLoop = n, s.onEndTime = new Phaser.Signal, s.running = !1, s } return __extends(e, t), e.prototype.setTimeLimit = function(t) { this.running = !1, this.paused = !1, this.timer = 0, this.timeLimit = t }, e.prototype.startTimer = function() { this.running = !0, this.paused = !1, this.resetTimer() }, e.prototype.stopTimer = function() { this.running = !1 }, e.prototype.update = function() {!this.paused && this.running && (this.timer += this.game.time.elapsedMS, this.timer >= this.timeLimit && this.onTimerEnd()) }, e.prototype.pauseTimer = function() { this.paused = !0 }, e.prototype.resumeTimer = function() { this.paused = !1 }, e.prototype.resetTimer = function() { this.timer = 0 }, Object.defineProperty(e.prototype, "time", { get: function() { return this.timer }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "isRunning", { get: function() { return this.running }, enumerable: !0, configurable: !0 }), e.prototype.onTimerEnd = function() { this.isLoop ? this.resetTimer() : this.running = !1, this.onEndTime.dispatch() }, e.prototype.destroy = function() { this.onEndTime.dispose(), this.onEndTime = null, t.prototype.destroy.call(this) }, e }(Ph2.Component);
    t.ComponentTimer = e }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e = function(e) {
        function i(i) { var n = e.call(this, i) || this; return n.componentMgr = Ph2.ComponentPlugin.initComponents(n), n.componentBody = n.componentMgr.addComponent(new t.RectangleBody(i, 50, 50)), n.componentInput = n.componentMgr.addComponent(new t.BasicInput(i)), n.componentLife = n.componentMgr.addComponent(new t.Life(1)), n.componentBehavior = n.componentMgr.addComponent(new t.BehaviorControler(t.ConfigGame.actionsList)), n.componentInput.onInputDown.add(n.clickBody, n), n.componentLife.onNoLife.add(n.onDeath, n), n.componentMove = n.componentMgr.addComponent(new t.DynamicObject(i)), n.componentMove.onCollisionLimit.add(n.colllisionLimit, n), n.ownWorldWidth = 100, n.ownWorldHeight = 100, n.ownWorldPositionX = 100, n.ownWorldPositionY = 100, n.setOwnWorldLimit(), n.isAlive = !0, n } return __extends(i, e), Object.defineProperty(i.prototype, "deadSignal", { get: function() { return this.componentLife.onNoLife }, enumerable: !0, configurable: !0 }), i.prototype.startBehavior1 = function() { this.componentBehavior.initAction("signal1") }, i.prototype.startBehavior2 = function() { this.componentBehavior.initAction("signal2") }, i.prototype.startBehavior3 = function() { this.componentBehavior.initAction("signal3") }, Object.defineProperty(i.prototype, "velocity", { get: function() { return this.componentMove.velocity }, enumerable: !0, configurable: !0 }), Object.defineProperty(i.prototype, "rectangleBody", { get: function() { return this.componentBody.getBody() }, enumerable: !0, configurable: !0 }), Object.defineProperty(i.prototype, "width", { get: function() { return this.componentBody.width }, enumerable: !0, configurable: !0 }), Object.defineProperty(i.prototype, "height", { get: function() { return this.componentBody.height }, enumerable: !0, configurable: !0 }), i.prototype.setOwnWorldLimit = function() { var t = this.ownWorldPositionY - this.ownWorldHeight / 2,
                e = this.ownWorldPositionY + this.ownWorldHeight / 2,
                i = this.ownWorldPositionX - this.ownWorldWidth / 2,
                n = this.ownWorldPositionX + this.ownWorldWidth / 2;
            this.componentMove.setLimits(t, e, i, n) }, i.prototype.sayHi = function() { console.log("Hi") }, i.prototype.colllisionLimit = function(t) { console.log() }, i.prototype.onDeath = function() { this.isAlive = !1 }, i.prototype.clickBody = function() { this.componentLife.removeLife(), console.log() }, i.prototype.setBodyColor = function() { this.componentBody.renderColor = "rgba(0,255,0,0.4)" === this.componentBody.renderColor ? "rgba(255,0,0,0.4)" : "rgba(0,255,0,0.4)" }, i.prototype.setBodyBlueColor = function() { this.componentBody.renderColor = "rgba(0,0,255,0.4)" }, i.prototype.setBodyRedColor = function() { this.componentBody.renderColor = "rgba(255,0,0,0.4)" }, i.prototype.setBodyGreenColor = function() { this.componentBody.renderColor = "rgba(0,255,0,0.4)" }, i.prototype.render = function() { this.isAlive && (this.componentBody.render(), this.componentMove.render()) }, i }(Phaser.Group);
    t.BasicObject = e }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e = function(e) {
        function i(i, n, s, o, a) { void 0 === o && (o = !0), void 0 === a && (a = !0); var r = e.call(this, i) || this; return r.controller = n, r.standTween = null, r.incorrectTween = null, r.componentMgr = Ph2.ComponentPlugin.initComponents(r), r.componentBody = r.componentMgr.addComponent(new t.RectangleBody(i, 140, 240)), r.componentInput = r.componentMgr.addComponent(new t.BasicInput(i)), r.componentInput.onInputDown.add(r.clickBody, r), r.draggeable = a, a && (r.componentDrag = r.componentMgr.addComponent(new t.BasicDrag(i)), r.componentDrag.onStarDrag.add(r.setBodyRedColor, r), r.componentDrag.onStopDrag.add(r.setBodyGreenColor, r)), r.onEndTween = new Phaser.Signal, r.onClick = new Phaser.Signal, r.positionCenter = new Phaser.Point(s.x - r.game.width / 2, s.y - r.game.height / 2), r.x = s.x, r.y = s.y, r.visualObject = new Phaser.Sprite(r.game, 0, 0, s.atlas, s.frame), r.visualObject.anchor.set(.5, .5), r.isBug = o, r.add(r.visualObject), r } return __extends(i, e), Object.defineProperty(i.prototype, "frameName", { get: function() { return this.visualObject.frameName }, enumerable: !0, configurable: !0 }), Object.defineProperty(i.prototype, "rectangleBody", { get: function() { return this.componentBody.getBody() }, enumerable: !0, configurable: !0 }), Object.defineProperty(i.prototype, "onStarDrag", { get: function() { return this.componentDrag.onStarDrag }, enumerable: !0, configurable: !0 }), Object.defineProperty(i.prototype, "onStopDrag", { get: function() { return this.componentDrag.onStopDrag }, enumerable: !0, configurable: !0 }), i.prototype.clickBody = function() { this.incorrectTween && this.incorrectTween.isRunning || (t.Audios.playSfx(this.game, "select_character"), this.onClick.dispatch(), this.parent.bringToTop(this), this.draggeable && this.componentDrag.enableSelect && (this.standTween.stop(), this.visualObject.scale.set(1, 1), this.componentDrag.startDrag())) }, i.prototype.setBodyColor = function() { this.componentBody.renderColor = "rgba(0,255,0,0.4)" === this.componentBody.renderColor ? "rgba(255,0,0,0.4)" : "rgba(0,255,0,0.4)" }, i.prototype.setBodyBlueColor = function() { this.componentBody.renderColor = "rgba(0,0,255,0.4)" }, i.prototype.setBodyRedColor = function() { this.componentBody.renderColor = "rgba(255,0,0,0.4)" }, i.prototype.enableInput = function(t, e, i) { void 0 === i && (i = !0), i && this.playAnimSelectEnable(), this.componentInput.enableInput() }, i.prototype.disableInput = function() { this.componentInput.disableInput() }, i.prototype.disableDrag = function() { this.componentDrag.enableSelect = !1 }, i.prototype.enableDrag = function() { this.componentDrag.enableSelect = !0 }, i.prototype.setBodyGreenColor = function() { this.componentBody.renderColor = "rgba(0,255,0,0.4)" }, i.prototype.playIncorrectTween = function(t) { this.standTween.stop(); var e = this.positionCenter.x * this.scale.x + this.game.width / 2,
                i = this.positionCenter.y + this.game.height / 2,
                n = Math.abs(this.x - e) + Math.abs(this.y - i);
            this.incorrectTween = this.game.add.tween(this).to({ x: this.x + 20, y: this.y }, 80, Phaser.Easing.Linear.None).to({ x: this.x, y: this.y }, 80, Phaser.Easing.Linear.None).to({ x: this.x + 20, y: this.y }, 80, Phaser.Easing.Linear.None).to({ x: this.x, y: this.y }, 80, Phaser.Easing.Linear.None).to({ x: e, y: i }, n / 100 * 100, Phaser.Easing.Linear.None), this.incorrectTween.start(), this.incorrectTween.onComplete.add(this.onCompletedIncorrectAnim, this) }, i.prototype.onCompletedIncorrectAnim = function() { this.controller.resetAllStandAnim(), this.onEndTween.dispatch() }, i.prototype.render = function() { this.componentBody.render() }, i.prototype.playAnimSelectEnable = function() { this.visualObject.scale.set(1, 1), this.standTween && this.standTween.stop(), this.standTween = this.game.add.tween(this.visualObject.scale).to({ x: 1.05, y: 1.05 }, 500, "Linear", !0, 0, -1, !0) }, i.prototype.pause = function() { this.incorrectTween && this.incorrectTween.pause(), this.standTween && this.standTween.pause() }, i.prototype.resume = function() { this.incorrectTween && this.incorrectTween.resume(), this.standTween && this.standTween.resume() }, i.prototype.resize = function(t) { this.x = this.positionCenter.x * t + this.game.width / 2, this.y = this.positionCenter.y + this.game.height / 2 }, i.prototype.destroy = function() { this.draggeable && (this.componentMgr.removeComponent(this.componentDrag), this.componentDrag = null), this.componentMgr.removeComponent(this.componentInput), this.componentMgr.removeComponent(this.componentBody), this.componentMgr.destroy(), this.onClick.dispose(), this.onClick = null, this.componentMgr = null, this.componentInput = null, this.componentBody = null, e.prototype.destroy.call(this) }, i }(Phaser.Group);
    t.GroupParts = e }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e = function(e) {
        function i(i) { var n = e.call(this, i) || this; return n.componentMgr = Ph2.ComponentPlugin.initComponents(n), n.componentBody = n.componentMgr.addComponent(new t.RectangleBody(i, 80, 500)), n } return __extends(i, e), Object.defineProperty(i.prototype, "rectangleBody", { get: function() { return this.componentBody.getBody() }, enumerable: !0, configurable: !0 }), Object.defineProperty(i.prototype, "sprite", { get: function() { return this.visualObject }, enumerable: !0, configurable: !0 }), i.prototype.setBodyColor = function() { this.componentBody.renderColor = "rgba(0,255,0,0.4)" === this.componentBody.renderColor ? "rgba(255,0,0,0.4)" : "rgba(0,255,0,0.4)" }, i.prototype.setBodyBlueColor = function() { this.componentBody.renderColor = "rgba(0,0,255,0.4)" }, i.prototype.setBodyRedColor = function() { this.componentBody.renderColor = "rgba(255,0,0,0.4)" }, i.prototype.setBodyGreenColor = function() { this.componentBody.renderColor = "rgba(0,255,0,0.4)" }, i.prototype.render = function() { this.componentBody.render() }, i }(Phaser.Group);
    t.Folder = e }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e;! function(t) { t[t.player = 0] = "player", t[t.playerRock = 1] = "playerRock", t[t.enemy = 2] = "enemy", t[t.boss = 3] = "boss" }(e = t.BulletType || (t.BulletType = {})); var i = function(i) {
        function n(e, n) { var s = i.call(this, e) || this;
            s.componentManager = Ph2.ComponentPlugin.initComponents(s), s.componentBody = s.componentManager.addComponent(new t.RectangleBody(e, 15, 15)), s.componentMove = s.componentManager.addComponent(new t.DynamicObject(e)), s.componentMove.onCollisionLimit.add(s.colllisionLimit, s), s.combatController = n, s.visualObject = new Phaser.Sprite(s.game, 0, 0, "atlas_gameplay", "heatblast_fireball.png"), s.visualObject.anchor.set(.5, .5), s.rock = new Phaser.Sprite(s.game, 0, 0, "atlas_gameplay", "rock1.png"), s.rock.anchor.set(.5, .5), s.rock.visible = !1, s.visualObject.scale.set(.5, .5), s.isRock = !1; var o, a = t.GameStateManager.instances.getLevel().character; return (o = Phaser.Animation.generateFrameNames(t.VisualData.bullet[a].key, 1, 4, ".png")).push(t.VisualData.bullet[a].key + "1.png"), s.visualObject.animations.add("ben", o), (o = Phaser.Animation.generateFrameNames("enemy_attack", 1, 4, ".png")).push("enemy_attack1.png"), s.visualObject.animations.add("enemy", o), (o = Phaser.Animation.generateFrameNames("enemy_attack2_", 1, 4, ".png")).push("enemy_attack2_1.png"), s.visualObject.animations.add("enemy2", o), s.add(s.visualObject), s.add(s.rock), s.componentMove.setLimits(t.ConfigGame.destroyBulletY, s.game.height + 10, -10, s.game.width + 10), s.isAlive = !0, s.needUpdatePerspective = !0, s } return __extends(n, i), n.prototype.setInitScale = function(t) { this.lastBgScale = t, this.lastGameWidth = this.game.width }, n.prototype.setBullet = function(i) { this.isEnemy = i === e.enemy || i === e.boss, this.alpha = 1, this.isRock = !1, this.rock.visible = !1, this.tween && this.tween.stop(), this.isEnemy ? (this.componentBody.width = 15, this.componentBody.height = 15, this.visualObject.scale.set(.5, .5), i === e.boss ? this.visualObject.play("enemy2", 10, !0) : this.visualObject.play("enemy", 10, !0), this.componentMove.setLimits(-300, this.game.height + 10, -10, this.game.width + 10)) : (i === e.playerRock && (this.isRock = !0, this.rock.visible = !0), this.componentBody.width = 22.5, this.componentBody.height = 22.5, this.visualObject.scale.set(.5, .75), this.visualObject.play("ben", 10, !0), this.componentMove.setLimits(t.ConfigGame.destroyBulletY, this.game.height + 10, -10, this.game.width + 10)) }, Object.defineProperty(n.prototype, "angleSprite", { get: function() { return this.isRock ? this.rock.angle : this.visualObject.angle }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "velocity", { get: function() { return this.componentMove.velocity }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "rectangleBody", { get: function() { return this.componentBody.getBody() }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "width", { get: function() { return this.componentBody.width }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "height", { get: function() { return this.componentBody.height }, enumerable: !0, configurable: !0 }), n.prototype.colllisionLimit = function() { this.combatController.destroyBullet(this) }, n.prototype.setBodyBlueColor = function() { this.componentBody.renderColor = "rgba(20,20,255,0.5)" }, n.prototype.setBodyGreenColor = function() { this.componentBody.renderColor = "rgba(0,255,0,0.4)" }, n.prototype.setAngle = function(t) { this.isRock ? this.rock.angle = t - 90 : this.visualObject.angle = t - 90 }, n.prototype.resize = function(t) { var e = this.x - this.lastGameWidth / 2;
            this.x = this.game.width / 2 + e / this.lastBgScale * t, this.componentMove.velocity.x = this.componentMove.velocity.x / this.lastBgScale * this.lastBgScale, this.lastGameWidth = this.game.width, this.lastBgScale = t }, n.prototype.render = function() { this.isAlive && (this.componentBody.render(), this.componentMove.render()) }, n.prototype.sleep = function() { this.componentMove.paused = !0, this.visible = !1, this.needUpdatePerspective = !1 }, n.prototype.wakeup = function() { this.componentMove.paused = !1, this.visible = !0, this.needUpdatePerspective = !0 }, n.prototype.update = function() { if (this.needUpdatePerspective) { var e = t.ConfigGame.getPerspectivePercent(this.y);
                this.isEnemy ? (this.visualObject.scale.x = .5 * e, this.visualObject.scale.y = .5 * e) : (this.isRock && (this.rock.scale.x = e, this.rock.scale.y = e), this.visualObject.scale.x = .5 * e, this.visualObject.scale.y = .75 * e), this.isEnemy || !(this.y <= t.ConfigGame.initAlphaBulletY) || this.tween && this.tween.isRunning || (this.tween = this.game.add.tween(this).to({ alpha: 0 }, t.ConfigGame.timeAlphaBulletY * Phaser.Timer.SECOND, "Linear", !0)) } }, n.prototype.stop = function() { this.componentMove.paused = !0 }, n.prototype.pause = function() { this.componentMove.paused = !0, this.visualObject.animations.paused = !0, this.tween && this.tween.pause() }, n.prototype.resume = function() { this.componentMove.paused = !1, this.visualObject.animations.paused = !1, this.tween && this.tween.resume() }, n.prototype.destroy = function() { this.componentManager.removeComponent(this.componentBody), this.componentManager.removeComponent(this.componentMove), this.componentManager = null, this.componentBody = null, this.componentMove = null, this.combatController = null, i.prototype.destroy.call(this) }, n }(Phaser.Group);
    t.Bullet = i }(DebuggingGame || (DebuggingGame = {}));
var DebuggingGame;
! function(t) { var e = function() {
        function t(t) { this.data = { uiMainMenu: { init: "none", none: { up: "buttonPlay", down: "buttonPlay", left: "buttonPlay", right: "buttonPlay", key: "hl_mm.png" }, buttonPlay: { up: "buttonAudio", down: "buttonAudio", left: "buttonAudio", right: "buttonAudio", key: "hl_mm.png" }, buttonAudio: { up: "buttonPlay", down: "buttonPlay", left: "buttonPlay", right: "buttonPlay", key: "hl_mid.png" } }, uiLevelSelect: { init: "buttonBack", none: { up: "buttonlvl1", down: "buttonlvl1", left: "buttonlvl1", right: "buttonlvl1", key: "hl_mid.png" }, buttonBack: { up: null, down: "buttonlvl1", left: null, right: "buttonAudio", key: "hl_mid.png" }, buttonAudio: { up: null, down: null, left: "buttonBack", right: null, key: "hl_mid.png" } }, uiPause: { init: "none", none: { up: "buttonPlay", down: "buttonPlay", left: "buttonPlay", right: "buttonPlay", key: "hl_rom.png" }, buttonPlay: { up: null, down: null, left: "buttonRestart", right: "buttonTutorial", key: "hl_rom.png" }, buttonAudio: { up: null, down: "buttonTutorial", left: "buttonTutorial", right: null, key: "hl_mid.png" }, buttonTutorial: { up: "buttonAudio", down: null, left: "buttonPlay", right: "buttonAudio", key: "hl_big.png" }, buttonRestart: { up: "buttonHome", down: null, left: "buttonHome", right: "buttonPlay", key: "hl_big.png" }, buttonHome: { up: null, down: "buttonRestart", left: null, right: "buttonRestart", key: "hl_mid.png" } }, uiConfirmation: { init: "none", none: { up: "buttonYes", down: "buttonYes", left: "buttonYes", right: "buttonYes", key: "hl_big.png" }, buttonYes: { up: null, down: null, left: "buttonNo", right: null, key: "hl_big.png" }, buttonNo: { up: null, down: null, left: null, right: "buttonYes", key: "hl_big.png" } }, uiLevelCompleted: { init: "none", none: { up: "buttonPlay", down: "buttonPlay", left: "buttonPlay", right: "buttonPlay", key: "hl_mid.png" }, buttonPlay: { up: "buttonAudio", down: null, left: "buttonRestart", right: "buttonAudio", key: "hl_rom.png" }, buttonAudio: { up: null, down: "buttonPlay", left: "buttonPlay", right: null, key: "hl_mid.png" }, buttonRestart: { up: null, down: null, left: null, right: "buttonPlay", key: "hl_big.png" } }, uiGameover: { init: "none", none: { up: "buttonRestart", down: "buttonRestart", left: "buttonRestart", right: "buttonRestart", key: "hl_big.png" }, buttonRestart: { up: null, down: null, left: null, right: "buttonNo", key: "hl_big.png" }, buttonNo: { up: null, down: null, left: "buttonRestart", right: null, key: "hl_big.png" } } }, this.ui = "uiMainMenu", this.onChangeButton = new Phaser.Signal } return t.prototype.initControl = function(t) { return this.actualUI = t, this.actualButton = this.data[t].init, this.onChangeButton.dispatch(this.actualButton), this.data[t].init }, t.prototype.addControl = function(t) { var e = t.input.keyboard.addKey(Phaser.Keyboard.UP),
                i = t.input.keyboard.addKey(Phaser.Keyboard.DOWN),
                n = t.input.keyboard.addKey(Phaser.Keyboard.LEFT),
                s = t.input.keyboard.addKey(Phaser.Keyboard.RIGHT);
            e.onDown.add(this.moveUp, this), i.onDown.add(this.moveDown, this), n.onDown.add(this.moveLeft, this), s.onDown.add(this.moveRight, this) }, t.prototype.removeControl = function(t) { var e = t.input.keyboard.addKey(Phaser.Keyboard.UP),
                i = t.input.keyboard.addKey(Phaser.Keyboard.DOWN),
                n = t.input.keyboard.addKey(Phaser.Keyboard.LEFT),
                s = t.input.keyboard.addKey(Phaser.Keyboard.RIGHT);
            e.onDown.removeAll(this), i.onDown.removeAll(this), n.onDown.removeAll(this), s.onDown.removeAll(this) }, t.prototype.setButton = function(t) { this.actualButton = t, this.onChangeButton.dispatch(this.actualButton) }, t.prototype.getHightLight = function() { return this.data[this.actualUI][this.actualButton].key }, t.prototype.setButtonFlow = function(t, e, i, n, s, o) { this.data[this.actualUI][t] || (this.data[this.actualUI][t] = { up: null, down: null, left: null, right: null, key: "hl_mm.png" }), this.data[this.actualUI][t].key = e, this.data[this.actualUI][t].up = i, this.data[this.actualUI][t].down = n, this.data[this.actualUI][t].left = s, this.data[this.actualUI][t].right = o }, t.prototype.moveLeft = function() { var t = this.data[this.actualUI][this.actualButton].left;
            null !== t && (this.actualButton = t, this.onChangeButton.dispatch(t)) }, t.prototype.moveRight = function() { var t = this.data[this.actualUI][this.actualButton].right;
            null !== t && (this.actualButton = t, this.onChangeButton.dispatch(t)) }, t.prototype.moveUp = function() { var t = this.data[this.actualUI][this.actualButton].up;
            null !== t && (this.actualButton = t, this.onChangeButton.dispatch(t)) }, t.prototype.moveDown = function() { var t = this.data[this.actualUI][this.actualButton].down;
            null !== t && (this.actualButton = t, this.onChangeButton.dispatch(t)) }, t }();
    t.ControlButtonUI = e }(DebuggingGame || (DebuggingGame = {}));
var DebuggingGame;
! function(t) { var e = function() {
        function t(t) { this.game = t, this.version = Game.Constants.GAME_VERSION, this.key = "ben10-collection-debugging" + language, this.loadData() } return t.prototype.loadData = function() { var t = this.game.storage.getItem(this.key);
            this.gameData = JSON.parse(t), null !== t && this.gameData.version === this.version || this.initData() }, t.prototype.saveData = function() { this.game.storage.setItem(this.key, JSON.stringify(this.gameData)) }, t.prototype.initData = function() { var t;
            t = { version: this.version, seeComicIntro: !1, seeComicEnd: !1, audioEnable: !0, lastLevelCompleted: -1, needAnimLevelUnlock: !1 }, this.gameData = t, this.saveData() }, t.prototype.getAudio = function() { return Game.Instances.dataManager.getAudio() }, t.prototype.getSeeComicIntro = function() { return this.gameData.seeComicIntro }, t.prototype.getSeeComicEnd = function() { return this.gameData.seeComicEnd }, t.prototype.getLevelCompelteded = function() { return this.gameData.lastLevelCompleted }, t.prototype.seeComicIntro = function() { this.gameData.seeComicIntro = !0, this.saveData() }, t.prototype.seeComicEnd = function() { this.gameData.seeComicEnd = !0, this.saveData() }, t.prototype.setAudio = function(t) { Game.Instances.dataManager.setAudio(t), this.saveData() }, t.prototype.completedLevel = function(t) { this.gameData.lastLevelCompleted >= t || (this.gameData.needAnimLevelUnlock = !0, this.gameData.lastLevelCompleted = t, this.saveData()) }, t.prototype.seeLevelUnlock = function() { this.gameData.needAnimLevelUnlock = !1, this.saveData() }, t.prototype.getNeedAnimLevelAnim = function() { return this.gameData.needAnimLevelUnlock }, t }();
    t.DataManager = e }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) {! function(t) { t[t.LEFT = 0] = "LEFT", t[t.RIGHT = 1] = "RIGHT", t[t.DOWN = 2] = "DOWN" }(t.Direction || (t.Direction = {})); var e = function(e) {
        function i(i, n, s, o, a) { void 0 === a && (a = -1); var r = e.call(this, i) || this; if (r.lane = o, r.combatController = n, r.spotTarget = a, r.enemyType = s, r.isMove = !1, r.origin = new Phaser.Point, r.target = new Phaser.Point, r.shootEnable = t.ConfigGame.enemyTypeConfig[r.enemyType].shootEnable, r.bulletSpeed = t.ConfigGame.enemyTypeConfig[r.enemyType].bulletSpeed, r.componentManager = Ph2.ComponentPlugin.initComponents(r), r.componentBody = r.componentManager.addComponent(new t.RectangleBody(i, t.ConfigGame.enemySizeBody, t.ConfigGame.enemySizeBody)), r.shootEnable) { var h = t.ConfigGame.enemyTypeConfig[r.enemyType].cooldownShoot;
                r.componentTimeShoot = r.componentManager.addComponent(new t.ComponentTimer(r.game, h * Phaser.Timer.SECOND, !0)), r.componentTimeShoot.onEndTime.add(r.shoot, r) } return r.componentLife = r.componentManager.addComponent(new t.Life(1)), r.componentLife.onNoLife.add(r.onDeath, r), r.componentMove = r.componentManager.addComponent(new t.DynamicObject(i)), r.componentMove.onCollisionLimit.add(r.colllisionLimit, r), r.componentMove.setLimits(-500, r.game.world.height, 0, r.game.world.width), r.visualObject = r.game.add.spine(0, 0, "enemy"), r.visualObject.setSkinByName("red_bug"), r.visualObject.setAnimationByName(0, "stand_1", !0), r.visualObject.setToSetupPose(), r.add(r.visualObject), r.isAlive = !0, r.isNextLanePlayer = !1, r.isInitChangeLane = !0, r } return __extends(i, e), i.prototype.setOrigin = function(t) { switch (this.lane) {
                case 0:
                    this.origin.x = this.game.width / 2 - 140 * t; break;
                case 1:
                    this.origin.x = this.game.width / 2; break;
                case 2:
                    this.origin.x = this.game.width / 2 + 140 * t } this.origin.y = -100 }, i.prototype.moveToOrigin = function() { this.x = this.origin.x, this.y = this.origin.y }, i.prototype.setTarget = function(t) { switch (this.lane) {
                case 0:
                    this.target.x = this.origin.x - 190 * t, this.target.y = this.origin.y + this.game.height; break;
                case 1:
                    this.target.x = this.origin.x, this.target.y = this.origin.y + this.game.height; break;
                case 2:
                    this.target.x = this.origin.x + 190 * t, this.target.y = this.origin.y + this.game.height } }, i.prototype.setVelocity = function() { var e = Math.abs(this.target.x - this.origin.x) + Math.abs(this.target.y - this.origin.y),
                i = t.ConfigGame.enemyTypeConfig[this.enemyType].velocity;
            this.componentMove.velocity.x = (this.target.x - this.origin.x) / e * i, this.componentMove.velocity.y = (this.target.y - this.origin.y) / e * i }, i.prototype.initMove = function() { this.shootEnable && this.componentTimeShoot.startTimer(), this.setVelocity(), this.isMove = !0 }, i.prototype.shoot = function() { if (!(this.y > t.ConfigGame.shootYEnable)) { this.visualObject.setAnimationByName(0, "attack_1", !1).onComplete = this.playStandAnim.bind(this), this.combatController.shootEnemy(this, !1) } }, i.prototype.playStandAnim = function() { this.visualObject.setAnimationByName(0, "stand_1", !0), this.shootEnable && this.componentTimeShoot.startTimer() }, i.prototype.damage = function(t) { void 0 === t && (t = 1), this.componentLife.removeLife(t) }, Object.defineProperty(i.prototype, "lives", { get: function() { return this.componentLife.live }, enumerable: !0, configurable: !0 }), Object.defineProperty(i.prototype, "deadSignal", { get: function() { return this.componentLife.onNoLife }, enumerable: !0, configurable: !0 }), Object.defineProperty(i.prototype, "velocity", { get: function() { return this.componentMove.velocity }, enumerable: !0, configurable: !0 }), Object.defineProperty(i.prototype, "rectangleBody", { get: function() { return this.componentBody.getBody() }, enumerable: !0, configurable: !0 }), Object.defineProperty(i.prototype, "width", { get: function() { return this.componentBody.width }, enumerable: !0, configurable: !0 }), Object.defineProperty(i.prototype, "height", { get: function() { return this.componentBody.height }, enumerable: !0, configurable: !0 }), i.prototype.setOwnWorldLimit = function() { var t = this.ownWorldPositionY - this.ownWorldHeight / 2,
                e = this.ownWorldPositionY + this.ownWorldHeight / 2,
                i = this.ownWorldPositionX - this.ownWorldWidth / 2,
                n = this.ownWorldPositionX + this.ownWorldWidth / 2;
            this.componentMove.setLimits(t, e, i, n) }, i.prototype.colllisionLimit = function(t) { this.componentMove.velocity.set(0, 0), this.explode() }, i.prototype.explode = function() { this.combatController.explodeEnemyLimitBottom(this) }, i.prototype.onDeath = function() { this.isAlive = !1, this.combatController.destroyEnemy(this) }, i.prototype.setBodyRedColor = function() { this.componentBody.renderColor = "rgba(255,0,0,0.4)" }, i.prototype.render = function() { this.isAlive && (this.componentBody.render(), this.componentMove.render()) }, i.prototype.stop = function() { this.visualObject.autoUpdate = !1, this.componentMove.paused = !0, this.shootEnable && this.componentTimeShoot.stopTimer() }, i.prototype.update = function() { if (this.isMove) { var e = t.ConfigGame.getPerspectivePercent(this.y);
                this.visualObject.scale.x = this.visualObject.scale.x >= 0 ? e : -e, this.visualObject.scale.y = e, this.y > 530 && this.combatController.enemyUpGroup.add(this) } }, i.prototype.pause = function() { this.visualObject.state.timeScale = 0, this.shootEnable && this.componentTimeShoot.pauseTimer(), this.componentMove.paused = !0 }, i.prototype.destroyGameoverAnim = function() { this.shootEnable && this.componentTimeShoot.stopTimer(), this.componentMove.setSpeed(0, 0);
            this.visualObject.setAnimationByName(0, "stand_1", !1) }, i.prototype.resize = function(t) { var e = Math.abs(this.y - this.origin.y);
            this.setOrigin(t), this.moveToOrigin(), this.setTarget(t), this.setVelocity(); var i = e / this.componentMove.velocity.y;
            this.x += this.componentMove.velocity.x * i, this.y += this.componentMove.velocity.y * i }, i.prototype.resume = function() { this.visualObject.state.timeScale = 1, this.shootEnable && this.componentTimeShoot.resumeTimer(), this.componentMove.paused = !1 }, i.prototype.destroy = function() { this.componentManager.removeComponent(this.componentBody), this.componentManager.removeComponent(this.componentBody), this.shootEnable && this.componentManager.removeComponent(this.componentTimeShoot), this.componentManager.removeComponent(this.componentLife), this.componentManager.removeComponent(this.componentMove), this.componentManager.destroy(), this.componentManager = null, this.componentBody = null, this.componentTimeShoot = null, this.componentLife = null, this.componentMove = null, this.combatController = null, e.prototype.destroy.call(this) }, i }(Phaser.Group);
    t.Enemy = e }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e = function(e) {
        function i(i, n, s) { var o = e.call(this, i) || this; if (o.lane = 1, o.combatController = n, o.enemyType = s, o.isMove = !1, o.chargeIndex = -1, o.lastSpeed = 1, o.target = new Phaser.Point, o.shootEnable = t.ConfigGame.enemyTypeConfig[o.enemyType].shootEnable, o.bulletSpeed = t.ConfigGame.enemyTypeConfig[o.enemyType].bulletSpeed, o.timeCharge = t.ConfigGame.enemyTypeConfig[o.enemyType].timeStateChange, o.componentManager = Ph2.ComponentPlugin.initComponents(o), o.componentBody = o.componentManager.addComponent(new t.RectangleBody(i, t.ConfigGame.enemySizeBody, t.ConfigGame.enemySizeBody)), o.shootEnable) { o.cooldownShootRange = t.ConfigGame.enemyTypeConfig[o.enemyType].cooldownShoot; var a = o.game.rnd.between(o.cooldownShootRange[0], o.cooldownShootRange[1]);
                o.componentTimeShoot = o.componentManager.addComponent(new t.ComponentTimer(o.game, a * Phaser.Timer.SECOND, !0)), o.componentTimeShoot.onEndTime.add(o.shoot, o) } return o.componentChangeCharge = o.componentManager.addComponent(new t.ComponentTimer(o.game, 0, !0)), o.componentChangeCharge.onEndTime.add(o.checkNextCharge, o), o.componentLife = o.componentManager.addComponent(new t.Life(t.ConfigGame.enemyTypeConfig[o.enemyType].lives)), o.componentLife.onNoLife.add(o.onDeath, o), o.componentMove = o.componentManager.addComponent(new t.DynamicObject(i)), o.componentMove.onCollisionLimit.add(o.colllisionLimit, o), o.componentMove.setLimits(-500, o.game.world.height - 300, 0, o.game.world.width), o.componentBar = o.componentManager.addComponent(new t.BarPercent(o.game, -50, -55, 100, 10)), o.visualObject = o.game.add.spine(0, 0, "enemy"), o.visualObject.setSkinByName("red_bug_big"), o.visualObject.setAnimationByName(0, "walk", !0), o.visualObject.setToSetupPose(), o.add(o.visualObject), o.add(o.componentBar.graphic), o.isAlive = !0, o.isNextLanePlayer = !1, o.isInitChangeLane = !0, o } return __extends(i, e), i.prototype.setTarget = function(t, e) { this.target.x = t, this.target.y = e }, i.prototype.initMove = function() { var e = Math.abs(this.target.x - this.x) + Math.abs(this.target.y - this.y),
                i = t.ConfigGame.enemyTypeConfig[this.enemyType].velocity;
            this.shootEnable && this.componentTimeShoot.startTimer(), this.componentMove.velocity.x = (this.target.x - this.x) / e * i, this.componentMove.velocity.y = (this.target.y - this.y) / e * i, this.isMove = !0 }, i.prototype.shoot = function() { if (!(this.y > t.ConfigGame.shootYEnable)) { this.visualObject.setAnimationByName(0, "attack_2", !1).onComplete = this.playStandAnim.bind(this), this.visualObject.setToSetupPose(), this.combatController.shootEnemy(this, !0) } }, i.prototype.playStandAnim = function() { if (this.visualObject.setAnimationByName(0, "walk", !0), this.visualObject.setToSetupPose(), this.shootEnable) { var t = this.game.rnd.between(this.cooldownShootRange[0], this.cooldownShootRange[1]);
                this.componentTimeShoot.setTimeLimit(t * Phaser.Timer.SECOND), this.componentTimeShoot.startTimer() } }, i.prototype.damage = function() { this.componentLife.removeLife(1); var t = this.componentLife.live / this.componentLife.maxlifes * 100;
            this.componentBar.setPercent(t) }, Object.defineProperty(i.prototype, "lives", { get: function() { return this.componentLife.live }, enumerable: !0, configurable: !0 }), Object.defineProperty(i.prototype, "deadSignal", { get: function() { return this.componentLife.onNoLife }, enumerable: !0, configurable: !0 }), Object.defineProperty(i.prototype, "velocity", { get: function() { return this.componentMove.velocity }, enumerable: !0, configurable: !0 }), Object.defineProperty(i.prototype, "rectangleBody", { get: function() { return this.componentBody.getBody() }, enumerable: !0, configurable: !0 }), Object.defineProperty(i.prototype, "width", { get: function() { return this.componentBody.width }, enumerable: !0, configurable: !0 }), Object.defineProperty(i.prototype, "height", { get: function() { return this.componentBody.height }, enumerable: !0, configurable: !0 }), i.prototype.colllisionLimit = function(t) { this.componentMove.velocity.set(0, 0), this.shootEnable && this.componentTimeShoot.stopTimer(); var e;
            e = this.visualObject.setAnimationByName(0, "big_attack_in", !1), this.visualObject.setToSetupPose(), e.onComplete = this.initCharge.bind(this) }, i.prototype.initCharge = function() { this.chargeIndex = 0, this.changeChargeAnim(); var t = this.timeCharge[this.chargeIndex] * Phaser.Timer.SECOND;
            this.componentChangeCharge.setTimeLimit(t), this.componentChangeCharge.startTimer() }, i.prototype.checkNextCharge = function() { if (++this.chargeIndex < this.timeCharge.length) { this.changeChargeAnim(); var t = this.timeCharge[this.chargeIndex] * Phaser.Timer.SECOND;
                this.componentChangeCharge.setTimeLimit(t), this.componentChangeCharge.startTimer() } else { this.componentChangeCharge.stopTimer(); var e = void 0;
                e = this.visualObject.setAnimationByName(0, "big_attack_out", !1), this.visualObject.setToSetupPose(), e.onComplete = this.endFinishAttack.bind(this) } }, i.prototype.endFinishAttack = function() { this.combatController.onEndFinishAttackBoss() }, i.prototype.changeChargeAnim = function() { this.visualObject.setAnimationByName(0, "big_attack_loop" + (this.chargeIndex + 1), !0), this.visualObject.setToSetupPose() }, i.prototype.onDeath = function() { this.isAlive = !1 }, i.prototype.setBodyRedColor = function() { this.componentBody.renderColor = "rgba(255,0,0,0.4)" }, i.prototype.render = function() { this.isAlive && (this.componentBody.render(), this.componentMove.render()) }, i.prototype.stop = function() { this.visualObject.autoUpdate = !1, this.componentMove.paused = !0, this.shootEnable && this.componentTimeShoot.stopTimer() }, i.prototype.update = function() { if (this.isMove) { var e = t.ConfigGame.getPerspectivePercent(this.y);
                this.visualObject.scale.x = this.visualObject.scale.x >= 0 ? e : -e, this.visualObject.scale.y = e } }, i.prototype.stopLogic = function() { this.visualObject.state.timeScale = 0, this.shootEnable && this.componentTimeShoot.stopTimer(), this.componentChangeCharge.stopTimer(), this.componentMove.velocity.set(0, 0) }, i.prototype.pause = function() { this.lastSpeed = this.visualObject.state.timeScale, this.visualObject.state.timeScale = 0, this.shootEnable && this.componentTimeShoot.pauseTimer(), this.componentChangeCharge.pauseTimer(), this.componentMove.paused = !0 }, i.prototype.resume = function() { this.visualObject.state.timeScale = this.lastSpeed, this.shootEnable && this.componentTimeShoot.resumeTimer(), this.componentChangeCharge.resumeTimer(), this.componentMove.paused = !1 }, i.prototype.destroyWinAnim = function() { this.componentBar.graphic.visible = !1, this.shootEnable && this.componentTimeShoot.stopTimer(), this.componentChangeCharge.stopTimer(), this.componentMove.setSpeed(0, 0); var t;
            t = this.visualObject.setAnimationByName(0, "death", !1), this.visualObject.setToSetupPose(), t.onComplete = this.combatController.onEndBossWinAnim.bind(this.combatController) }, i.prototype.destroyGameoverAnim = function() { this.componentBar.graphic.visible = !1, this.shootEnable && this.componentTimeShoot.stopTimer(), this.componentChangeCharge.stopTimer(), this.componentMove.setSpeed(0, 0);
            this.visualObject.setAnimationByName(0, "death2", !1), this.visualObject.setToSetupPose() }, i.prototype.destroy = function() { this.componentManager.removeComponent(this.componentBody), this.componentManager.removeComponent(this.componentBody), this.shootEnable && this.componentManager.removeComponent(this.componentTimeShoot), this.componentManager.removeComponent(this.componentLife), this.componentManager.removeComponent(this.componentMove), this.componentManager.removeComponent(this.componentChangeCharge), this.componentManager.destroy(), this.componentManager = null, this.componentBody = null, this.componentTimeShoot = null, this.componentLife = null, this.componentMove = null, this.componentChangeCharge = null, this.combatController = null, e.prototype.destroy.call(this) }, i }(Phaser.Group);
    t.Boss = e }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e;! function(t) { t[t.DEFEATALL = 0] = "DEFEATALL" }(e = t.PowerType || (t.PowerType = {})); var i = function(i) {
        function n(e, n, s, o) { void 0 === o && (o = 0); var a = i.call(this, e) || this; return a.powerType = s, a.lane = o, a.componentManager = Ph2.ComponentPlugin.initComponents(a), a.componentBody = a.componentManager.addComponent(new t.RectangleBody(e, t.ConfigGame.enemySizeBody, t.ConfigGame.enemySizeBody)), a.componentLife = a.componentManager.addComponent(new t.Life(1)), a.combatController = n, a.componentLife.onNoLife.add(a.activatePower, a), a.componentEnableTime = a.componentManager.addComponent(new t.ComponentTimer(a.game, t.ConfigGame.timeEnableItem * Phaser.Timer.SECOND)), a.componentEnableTime.onEndTime.add(a.disappear, a), a.componentEnableTime.startTimer(), a.visualObject = a.game.add.ph2AnimationObject(0, 0, "powerup_icon", "atlas_gameplay"), a.visualObject.ph2Animations.play("powerup_icon_loop", 1, !0), a.add(a.visualObject), a.setBodyColorItem(), a } return __extends(n, i), n.prototype.setBgScale = function(t) { this.lastBgScale = t, this.lastGameWidth = this.game.width }, n.prototype.setPerpective = function() { var e = t.ConfigGame.getPerspectivePercent(this.y);
            this.visualObject.scale.x = e, this.visualObject.scale.y = e }, n.prototype.activatePower = function() { switch (this.powerType) {
                case e.DEFEATALL:
                    this.combatController.startDefeatAll() } this.componentEnableTime.stopTimer(), this.visualObject.ph2Animations.play("powerup_icon_out", 1, !1).onComplete.addOnce(this.destroy, this) }, n.prototype.removeLifes = function(t) { void 0 === t && (t = 1), this.componentLife.removeLife(t) }, n.prototype.setBodyColorItem = function() { switch (this.powerType) {
                case e.DEFEATALL:
                    this.componentBody.renderColor = "rgba(255,0,155,0.4)" } }, Object.defineProperty(n.prototype, "rectangleBody", { get: function() { return this.componentBody.getBody() }, enumerable: !0, configurable: !0 }), n.prototype.resize = function(t) { var e = this.x - this.lastGameWidth / 2;
            this.x = this.game.width / 2 + e / this.lastBgScale * t, this.lastGameWidth = this.game.width, this.lastBgScale = t }, n.prototype.render = function() { this.componentBody.render() }, n.prototype.disappear = function() { this.combatController.disappearItem() }, n.prototype.pause = function() { this.componentEnableTime && (this.visualObject.ph2Animations.pause(), this.componentEnableTime.pauseTimer()) }, n.prototype.resume = function() { this.componentEnableTime && (this.visualObject.ph2Animations.resume(), this.componentEnableTime.resumeTimer()) }, n.prototype.destroy = function() { this.componentManager.removeComponent(this.componentBody), this.componentManager.removeComponent(this.componentLife), this.componentManager.removeComponent(this.componentEnableTime), this.visualObject.visible = !1, this.visualObject.ph2Animations.stop(), this.visualObject.destroy(), this.visualObject = null, this.componentManager.destroy(), this.componentManager = null, this.componentBody = null, this.componentLife = null, this.combatController = null, this.componentEnableTime = null, i.prototype.destroy.call(this) }, n }(Phaser.Group);
    t.ItemPowerup = i }(DebuggingGame || (DebuggingGame = {}));
var DebuggingGame;
! function(t) { var e = function() {
        function t(t, e) { void 0 === e && (e = "us"), this.game = t, this.language = e, this.jsonKey = "localization_" + e, this.localizationData = this.game.cache.getJSON(this.jsonKey), this.charInitArg = "{", this.charEndArg = "}", this.defaulString = "*", this.showDefault = !1 } return t.prototype.setLanguage = function(t) { return void 0 === t && (t = "us"), t === this.language || (this.jsonKey = "localization_" + t, this.game.cache.getJSON(this.jsonKey) ? (this.language = t, this.localizationData = this.game.cache.getJSON(this.jsonKey), !0) : (this.jsonKey = "localization_" + this.language, !1)) }, t.prototype.getLanguage = function() { return this.language }, t.prototype.getLocalizationData = function() { return this.localizationData }, t.prototype.localizeText = function(t, e, i, n, s) { void 0 === n && (n = !1), void 0 === s && (s = !1); var o, a; if (o = Ph2.UISystem.findObject(t, e), a = i, !n) { if (void 0 === this.localizationData[i]) return console.log("No found key: " + i), o;
                a = this.localizationData[i] } return !0 === this.showDefault && (a = this.defaulString), o.text = s ? a.toUpperCase() : a, o }, t.prototype.getSringForKey = function(t) { for (var e = [], i = 1; i < arguments.length; i++) e[i - 1] = arguments[i]; var n = this.localizationData[t]; if (void 0 === this.localizationData[t]) return console.log("No found key: " + t), ""; for (var s = n.indexOf(this.charInitArg) + 1, o = n.indexOf(this.charEndArg), a = 0, r = n.substring(s, o);
                "" !== r && a < e.length;) n = n.split(this.charInitArg + r + this.charEndArg).join(e[a]), a++, s = n.indexOf(this.charInitArg) + 1, o = n.indexOf(this.charEndArg), r = n.substring(s, o); return !0 === this.showDefault && (n = this.defaulString), n }, t.prototype.addSpriteTo = function(t) { for (var e = [], i = 1; i < arguments.length; i++) e[i - 1] = arguments[i]; for (var n = this.localizationData[t], s = n.indexOf(this.charInitArg) + 1, o = n.indexOf(this.charEndArg), a = 0, r = n.substring(s, o);
                "" !== r && a < e.length;) n = n.split(this.charInitArg + r + this.charEndArg).join(e[a]), a++, s = n.indexOf(this.charInitArg) + 1, o = n.indexOf(this.charEndArg), r = n.substring(s, o); return n }, t.prototype.fitFontSizeUI = function(e, i, n, s, o, a) { void 0 === s && (s = -1), void 0 === o && (o = -1), void 0 === a && (a = t.MIN_FONT_SIZE_DEFAULT); var r;
            r = Ph2.UISystem.findObject(e, i), this.fitFontSizeText(r, n, s, o, a) }, t.prototype.fitFontSizeText = function(e, i, n, s, o) { void 0 === n && (n = -1), void 0 === s && (s = -1), void 0 === o && (o = t.MIN_FONT_SIZE_DEFAULT); var a, r, h, l; for (s > 0 && (e.fontSize = s), r = e.width, h = e.height, l = e.fontSize; r > i || h > n && -1 !== n;) { if ((a = parseInt(l.toString().replace("px", ""), 10) - 1) < o) { l = a = o, e.setStyle({ fontSize: l }, !0); break } l = a, e.fontSize = l, r = e.width, h = e.height } }, t.MIN_FONT_SIZE_DEFAULT = 1, t }();
    t.LocalizationManager = e }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e;! function(t) { t[t.LEFT = 0] = "LEFT", t[t.RIGHT = 1] = "RIGHT", t[t.FRONT = 2] = "FRONT" }(e = t.DirectionAttack || (t.DirectionAttack = {})); var i = function(i) {
        function n(e, n) { var s = i.call(this, e) || this;
            s.componentManager = Ph2.ComponentPlugin.initComponents(s), s.componentBody = s.componentManager.addComponent(new t.RectangleBody(e, 100, 70)), s.componentBody.offSet.y = 50, s.combatController = n; var o = t.GameStateManager.instances.getLevel(),
                a = t.VisualData.battleCharacter[o.character].spine,
                r = t.VisualData.battleCharacter[o.character].stun,
                h = t.ConfigGame.battleShoots[o.character].cooldownShoot; return s.character = o.character, s.componentTimeShootCooldown = s.componentManager.addComponent(new t.ComponentTimer(s.game, h * Phaser.Timer.SECOND, !0)), s.componentTimeShootCooldown.onEndTime.add(s.enableShoot, s), s.componentInvulnerableCooldown = s.componentManager.addComponent(new t.ComponentTimer(s.game, t.ConfigGame.playerInvulnerable * Phaser.Timer.SECOND, !0)), s.componentInvulnerableCooldown.onEndTime.add(s.endInvulnerableTime, s), s.visualObject = s.game.add.spine(0, 80, a), s.visualObject.setAnimationByName(0, "stand", !0), s.visualObject.setToSetupPose(), s.stunAnimation = s.game.add.ph2AnimationObject(r.x, r.y, "character_stars", "atlas_gameplay"), s.stunAnimation.visible = !1, s.add(s.visualObject), s.add(s.stunAnimation), s.isInvulnerable = !1, s.isDisableMove = !1, s.isShootEnable = !0, s.isShooting = !1, s.tweenAnim = null, s } return __extends(n, i), Object.defineProperty(n.prototype, "rectangleBody", { get: function() { return this.componentBody.getBody() }, enumerable: !0, configurable: !0 }), n.prototype.endInvulnerableTime = function() { this.isInvulnerable = !1, this.alpha = 1, this.tweenAnim.stop() }, n.prototype.stun = function() { this.isShootEnable = !1, this.visualObject.setAnimationByName(0, "stand", !0), this.visualObject.setToSetupPose(), this.stunCount = 0, this.componentInvulnerableCooldown.startTimer(), this.componentTimeShootCooldown.stopTimer(), this.alpha = 1, this.tweenAnim && this.tweenAnim.stop(), this.tweenAnim = this.game.add.tween(this).to({ alpha: .5 }, 500, "Linear", !0, 0, -1, !0), this.isInvulnerable = !0, this.isDisableMove = !0, this.stunAnimation.visible = !0, this.playStun() }, n.prototype.playStun = function() { var e = this.stunAnimation.ph2Animations.play("character_stars_anim", 1, !1);
            e.onComplete.removeAll(this), this.stunCount < t.ConfigGame.stunLoop ? e.onComplete.addOnce(this.playStun, this) : e.onComplete.addOnce(this.playLoseToStand, this), this.stunCount++ }, n.prototype.startInvulnerable = function() { this.componentInvulnerableCooldown.startTimer(), this.tweenAnim = this.game.add.tween(this).to({ alpha: .5 }, 500, "Linear", !0, 0, -1, !0), this.isInvulnerable = !0 }, n.prototype.changeSpotOut = function() { this.visualObject.visible = !1, this.componentTimeShootCooldown.stopTimer() }, n.prototype.changeSpotIn = function(t, e) { this.componentTimeShootCooldown.resetTimer(), this.x = t, this.visualObject.scale.x = 0 === e ? -1 : 1, this.visualObject.visible = !0, this.visualObject.setAnimationByName(0, "stand", !0), this.visualObject.setToSetupPose(), this.isStopLogic ? (this.stopLogic(), this.completedFuntion.call(this)) : (this.isShootEnable = !0, this.shootAnim()) }, n.prototype.enableShoot = function() { this.isShootEnable = !0, this.shootAnim() }, n.prototype.shootAnim = function() {!0 === this.isShootEnable && !0 !== this.isStopLogic && ("xlr8" === this.character ? (this.isShooting = !0, this.isShootEnable = !1, this.isInvulnerable = !0, this.animAttackXlr8(e.FRONT)) : (this.isShooting = !0, this.isShootEnable = !1, this.componentTimeShootCooldown.startTimer(), this.animAttack(e.FRONT))) }, n.prototype.animAttack = function(t) { var i, n; switch (t) {
                case e.LEFT:
                    n = "attack_left"; break;
                case e.FRONT:
                    n = "attack_front2"; break;
                case e.RIGHT:
                    n = "attack_right" } i = this.visualObject.setAnimationByName(0, n, !1), this.visualObject.setToSetupPose(), i.onComplete = this.playAttackToStand.bind(this), this.shootBullet() }, n.prototype.playAttackToStand = function() { this.visualObject.setAnimationByName(0, "stand", !0), this.visualObject.setToSetupPose() }, n.prototype.shootBullet = function() { this.combatController.shootPlayer(), this.isShooting = !1 }, n.prototype.animAttackXlr8 = function(t) { var i; switch (t) {
                case e.LEFT:
                    i = "attack_left"; break;
                case e.FRONT:
                    i = "attack_front2"; break;
                case e.RIGHT:
                    i = "attack_right" } this.visualObject.setAnimationByName(0, i, !1), this.visualObject.setToSetupPose(), this.combatController.shootPlayerXlr8() }, n.prototype.endAttackXlr8 = function() { this.isStopLogic || (this.isInvulnerable = !1, this.visualObject.setAnimationByName(0, "attack_to_stand", !1).onComplete = this.playAttackToStand.bind(this), this.visualObject.setToSetupPose(), this.isShooting = !1, this.isStopLogic || this.componentTimeShootCooldown.startTimer()) }, n.prototype.playLoseToStand = function() { this.stunAnimation.visible = !1, this.visualObject.setAnimationByName(0, "stand", !0), this.visualObject.setToSetupPose(), this.isShooting = !1, this.isDisableMove = !1, this.isShootEnable = !0, this.componentTimeShootCooldown.startTimer() }, n.prototype.stop = function() { this.visualObject.autoUpdate = !1, this.isShootEnable = !1, this.isDisableMove = !0, this.tweenAnim && this.tweenAnim.stop(), this.alpha = 1, this.componentTimeShootCooldown.stopTimer(), this.componentInvulnerableCooldown.stopTimer() }, n.prototype.stopLogic = function() { this.isStopLogic = !0, this.componentTimeShootCooldown.stopTimer(), this.componentInvulnerableCooldown.stopTimer(), this.visualObject.setAnimationByName(0, "stand", !0) }, n.prototype.destroyWinAnim = function() { this.tweenAnim && this.tweenAnim.stop(), this.stunAnimation.visible = !1, this.stunAnimation.ph2Animations.stop(), this.completedFuntion = this.destroyWinAnim; var t;
            t = this.visualObject.setAnimationByName(0, "win", !1), this.visualObject.setToSetupPose(), t.onComplete = this.combatController.onEndPlayerWinAnim.bind(this.combatController) }, n.prototype.destroyGameoverAnim = function() { this.tweenAnim && this.tweenAnim.stop(), this.stunAnimation.visible = !1, this.stunAnimation.ph2Animations.stop(), this.completedFuntion = this.destroyGameoverAnim; var t;
            t = this.visualObject.setAnimationByName(0, "lose_final_in", !1), this.visualObject.setToSetupPose(), t.onComplete = this.playLoopLose.bind(this) }, n.prototype.playLoopLose = function() { this.tweenAnim && this.tweenAnim.stop(), this.stunAnimation.visible = !1, this.stunAnimation.ph2Animations.stop(), this.completedFuntion = this.playLoopLose;
            this.visualObject.setAnimationByName(0, "lose_final", !0), this.visualObject.setToSetupPose(), this.combatController.onEndPlayerGameOverAnim() }, n.prototype.pause = function() { this.visualObject.state.timeScale = 0, this.componentTimeShootCooldown.pauseTimer(), this.componentInvulnerableCooldown.pauseTimer(), this.tweenAnim && this.tweenAnim.pause(), this.stunAnimation.ph2Animations.pause() }, n.prototype.resume = function() { this.visualObject.state.timeScale = 1, this.componentTimeShootCooldown.resumeTimer(), this.componentInvulnerableCooldown.resumeTimer(), this.tweenAnim && this.tweenAnim.resume(), this.stunAnimation.ph2Animations.resume() }, n.prototype.destroy = function() { this.componentManager.removeComponent(this.componentBody), this.componentManager.removeComponent(this.componentTimeShootCooldown), this.componentManager.removeComponent(this.componentInvulnerableCooldown), this.componentManager.destroy(), this.stunAnimation.ph2Animations.stop(), this.stunAnimation.destroy(), this.stunAnimation = null, this.componentTimeShootCooldown = null, this.componentInvulnerableCooldown = null, this.componentManager = null, this.componentBody = null, this.combatController = null, i.prototype.destroy.call(this) }, n.prototype.render = function() { this.componentBody.render() }, n }(Phaser.Group);
    t.Player = i }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e = function(e) {
        function i(i, n, s) { var o = e.call(this, i) || this; return o.componentManager = Ph2.ComponentPlugin.initComponents(o), o.componentBody = o.componentManager.addComponent(new t.RectangleBody(i, 330, 750)), o.componentInput = o.componentManager.addComponent(new t.BasicInput(i)), o.combatController = s, o.spotIndex = n, o.componentInput.onInputDown.add(o.onPress, o), o } return __extends(i, e), Object.defineProperty(i.prototype, "isEnableInput", { get: function() { return this.componentInput.inputEnable }, enumerable: !0, configurable: !0 }), Object.defineProperty(i.prototype, "rectangleBody", { get: function() { return this.componentBody.getBody() }, enumerable: !0, configurable: !0 }), i.prototype.onPress = function() { this.combatController.startChangeSpot(this.spotIndex) }, i.prototype.disableInput = function() { this.componentInput.disableInput() }, i.prototype.enableInput = function() { this.componentInput.enableInput() }, i.prototype.render = function() { this.componentBody.render() }, i.prototype.destroy = function() { this.componentManager.removeComponent(this.componentBody), this.componentManager.removeComponent(this.componentInput), this.componentManager.destroy(), this.componentManager = null, this.componentBody = null, this.componentInput = null, this.combatController = null, e.prototype.destroy.call(this) }, i }(Phaser.Group);
    t.Spot = e }(DebuggingGame || (DebuggingGame = {}));
var DebuggingGame;
! function(t) { var e = function() {
        function t() {} return t.addTouchCallbackToButton = function(t, e, i, n, s) { void 0 === s && (s = 0); for (var o = [], a = 5; a < arguments.length; a++) o[a - 5] = arguments[a]; var r; return (r = Ph2.UISystem.findObject(t, e)).onInputUp.add(i, n, s, o), r }, t.addTouchCallbackToText = function(t, e, i, n) { var s; return s = Ph2.UISystem.findObject(t, e), s.inputEnabled = !0, s.input.useHandCursor = !0, s.events.onInputUp.add(i, n), s }, t.addTouchCallbackToSprite = function(t, e, i, n) { var s; return s = Ph2.UISystem.findObject(t, e), s.inputEnabled = !0, s.input.useHandCursor = !0, s.events.onInputUp.add(i, n), s }, t.addTouchCallbackToSpriteAnimation = function(t, e, i, n) { var s; return s = Ph2.AnimationSystem.findObject(t, e), s.inputEnabled = !0, s.input.useHandCursor = !0, s.events.onInputUp.add(i, n), s }, t.addInputToPreventPropagation = function(t, e) { var i;
            (i = Ph2.UISystem.findObject(t, e)).inputEnabled = !0, i.input.useHandCursor = !1 }, t.disableTouch = function(t, e) { Ph2.UISystem.findObject(t, e).inputEnabled = !1 }, t.enableTouch = function(t, e) { var i;
            (i = Ph2.UISystem.findObject(t, e)).inputEnabled = !0, i.input.useHandCursor = !0 }, t.disableTouchAnimation = function(t, e) { Ph2.AnimationSystem.findObject(t, e).inputEnabled = !1 }, t.enableTouchAnimation = function(t, e) { var i;
            (i = Ph2.AnimationSystem.findObject(t, e)).inputEnabled = !0, i.input.useHandCursor = !0 }, t }();
    t.Util = e }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e;! function(t) { t[t.intro = 0] = "intro", t[t.end = 1] = "end" }(e = t.COMICID || (t.COMICID = {})); var i = function(i) {
        function n(t, e) { var n = i.call(this, t.game) || this;
            n.controller = t, n.id = e, n.tweens = [], n.comic = null, n.ui = n.game.add.ph2UI("ui_comic", "atlas_comic"), n.btnPlay = Ph2.UISystem.findObject("play_pivot", n.ui); var s = Ph2.UISystem.findObject("play_pivot", n.ui); return n.animButton = n.game.add.ph2AnimationObject(0, 0, "play_main", "atlas_ui_main_menu"), s.addChild(n.animButton), n.timerSound = n.game.time.create(!1), n.animButton.visible = !1, n.btnAudio = Ph2.UISystem.findObject("sound", n.ui), n.btnAudio.visible = !1, n.buttonSprite = Ph2.AnimationSystem.findObject("base", n.animButton), n.buttonSprite.inputEnabled = !0, n.selectSprite = new Phaser.Sprite(n.game, 0, 0, "atlas_ui_main_menu", "hl_mid.png"), n.selectSprite.anchor.set(.5, .5), n.addComic(), n.ui.addChild(n.selectSprite), n.ui.bringToTop(n.btnPlay), n.add(n.ui), n.addKeysControl(), n.addTouchCallback(), n.disableAllInput(), n.checkFixIOS(), n } return __extends(n, i), n.prototype.checkFixIOS = function() { if (t.Constants.IOS_BUTTON_PATCH) { var e = void 0;
                (e = Ph2.UISystem.findObject("sound", this.ui)).y += 30, e.alignment.setLandscapeAlignment("BOTTOM_RIGHT", -.1, !0, -528, !0), (e = Ph2.UISystem.findObject("play_pivot", this.ui)).y -= 20, e.alignment.setLandscapeAlignment("BOTTOM_RIGHT", -120.5, !0, -113.4, !0) } }, n.prototype.addKeysControl = function() { this.keyStart = this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER) }, n.prototype.addComic = function() { this.id === e.intro ? (this.comic = this.game.add.ph2AnimationObject(0, 0, "comic_intro", "atlas_comic"), this.timerSound.add(100, this.playIntroStripComic, this), this.timerSound.add(1433, this.playIntroStripComic, this), this.timerSound.add(2550, this.playIntroStripComic, this), this.timerSound.add(3867, this.playIntroStripComic, this)) : (this.comic = this.game.add.ph2AnimationObject(0, 0, "comic_end", "atlas_comic"), this.timerSound.add(100, this.playIntroStripComic, this), this.timerSound.add(1067, this.playIntroStripComic, this), this.timerSound.add(2367, this.playIntroStripComic, this)), Ph2.UISystem.findObject("comic_pivot", this.ui).addChild(this.comic) }, n.prototype.addTouchCallback = function() { this.buttonSprite.events.onInputDown.add(this.pressPlayBtn, this), t.Util.addTouchCallbackToButton("sound", this.ui, this.switchAudio, this) }, n.prototype.playIntroStripComic = function() { t.Audios.playSfxComic(this.game) }, n.prototype.setSelectButton = function() { switch (this.selectSprite.visible = !0, t.Instances.controlButtonUI.actualButton) {
                case "buttonPlay":
                    this.selectSprite.x = this.btnPlay.x, this.selectSprite.y = this.btnPlay.y, this.selectSprite.scale.set(.7, .7); break;
                case "buttonAudio":
                    this.selectSprite.x = this.btnAudio.x, this.selectSprite.y = this.btnAudio.y, this.selectSprite.scale.set(1, 1); break;
                case "none":
                    this.selectSprite.visible = !1 } this.selectSprite.frameName = t.Instances.controlButtonUI.getHightLight() }, n.prototype.onSelectButton = function() { switch (t.Instances.controlButtonUI.actualButton) {
                case "buttonPlay":
                    this.pressPlayBtn(); break;
                case "buttonAudio":
                    this.switchAudio(); break;
                case "none":
                    this.pressPlayBtn() } }, n.prototype.switchAudio = function() { t.Audios.playSfx(this.game, "generic_button"); var e = this.controller.switchAudio();
            this.setButtonAudio(e) }, n.prototype.setButtonAudio = function(e) {!0 === e ? (t.Audios.enableAudio(this.game), this.btnAudio.setFrames("sound1.png", "sound1.png", "sound1_press.png", "sound1.png")) : (t.Audios.disableAudio(this.game), this.btnAudio.setFrames("sound2.png", "sound2.png", "sound2_press.png", "sound2.png")) }, n.prototype.showComic = function() { this.resize(), t.Instances.controlButtonUI.initControl("uiMainMenu"), t.Instances.controlButtonUI.onChangeButton.add(this.setSelectButton, this), t.Instances.controlButtonUI.removeControl(this.game), this.timerSound.start(); var i = this.id === e.intro ? "comic_intro_anim" : "comic_end_anim";
            this.comic.ph2Animations.play(i, 1, !1).onComplete.addOnce(this.onEndshowComic, this) }, n.prototype.onEndshowComic = function() { t.Instances.controlButtonUI.addControl(this.game), this.animButton.visible = !0, this.btnAudio.visible = !0, this.animButton.alpha = 0, this.btnAudio.alpha = 0, this.tweens = []; var e;
            (e = this.game.add.tween(this.animButton).to({ alpha: 1 }, 300, "Linear", !0)).onComplete.add(this.onEndShowButtons, this), this.tweens.push(e), e = this.game.add.tween(this.btnAudio).to({ alpha: 1 }, 300, "Linear", !0), this.tweens.push(e), this.setButtonAudio(t.Instances.dataManager.getAudio()), this.setSelectButton() }, n.prototype.onEndShowButtons = function() { this.animButton.ph2Animations.play("play_anim", 1, !0), this.tweens = [], this.enableAllInput() }, n.prototype.enableAllInput = function() { this.keyStart.onDown.add(this.onSelectButton, this), this.buttonSprite.inputEnabled = !0 }, n.prototype.disableAllInput = function() { this.keyStart.onDown.remove(this.onSelectButton, this), this.buttonSprite.inputEnabled = !1, this.selectSprite.visible = !1 }, n.prototype.pressPlayBtn = function() { this.disableAllInput(), t.Audios.playSfx(this.game, "play_button"), this.animButton.ph2Animations.play("play_anim_press", 1, !1).onComplete.addOnce(this.hideComic, this) }, n.prototype.hideComic = function() { var t = this.id === e.intro ? "comic_intro_out_anim" : "comic_end_out_anim";
            this.comic.ph2Animations.play(t, 1, !1).onComplete.addOnce(this.onEndPlayBtnAnim, this) }, n.prototype.onEndPlayBtnAnim = function() { this.controller.endShowComic() }, n.prototype.onBlur = function() { this.animButton.ph2Animations.pause(), this.comic.ph2Animations.pause(), this.timerSound.pause(); for (var t = 0, e = this.tweens; t < e.length; t++) e[t].pause() }, n.prototype.onFocus = function() { this.animButton.ph2Animations.resume(), this.comic.ph2Animations.resume(), this.timerSound.resume(); for (var t = 0, e = this.tweens; t < e.length; t++) e[t].resume() }, n.prototype.resize = function() { this.game.width < 960 ? (this.comic.scale.x = this.game.width / 960, this.comic.scale.y = this.game.width / 960, this.animButton.scale.x = this.game.width / 960, this.animButton.scale.y = this.game.width / 960) : (this.comic.scale.x = 1, this.comic.scale.y = 1, this.animButton.scale.x = 1, this.animButton.scale.y = 1) }, n.prototype.destroy = function() { t.Instances.controlButtonUI.removeControl(this.game), t.Instances.controlButtonUI.onChangeButton.remove(this.setSelectButton, this), i.prototype.destroy.call(this) }, n }(Phaser.Group);
    t.UIComic = i }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e;! function(t) { t[t.EXIT = 0] = "EXIT", t[t.RESTART = 1] = "RESTART" }(e = t.CONFIRMATIONTYPE || (t.CONFIRMATIONTYPE = {})); var i = function(i) {
        function n(t) { var e = i.call(this, t.game) || this; return e.controller = t, e.ui = e.game.add.ph2UI("ui_confirmation", "atlas_ui_popups"), e.selectSprite = new Phaser.Sprite(e.game, 0, 0, "atlas_ui_main_menu", "hl_mid.png"), e.selectSprite.anchor.set(.5, .5), e.btnYes = Ph2.UISystem.findObject("yes", e.ui), e.btnNo = Ph2.UISystem.findObject("no", e.ui), e.textDescription = [], e.textDescription[0] = Ph2.UISystem.findObject("container/description1", e.ui), e.textDescription[1] = Ph2.UISystem.findObject("container/description2", e.ui), e.game.device.desktop || (e.selectSprite.visible = !1), e.add(e.selectSprite), e.add(e.ui), e.addTouchCallback(), e.addKeysControl(), e.hide(), e.addTouchCallback(), e.localization(), e } return __extends(n, i), n.prototype.localization = function() { this.textDescription[0].loadTexture("atlas_texts_debugging"), this.textDescription[0].frameName = "ui_confirmation_text1.png", this.textDescription[1].loadTexture("atlas_texts_debugging"), this.textDescription[1].frameName = "ui_confirmation_text2.png" }, n.prototype.addTouchCallback = function() { t.Util.addTouchCallbackToButton("yes", this.ui, this.pressYesBtn, this), t.Util.addTouchCallbackToButton("no", this.ui, this.pressNoBtn, this) }, n.prototype.addKeysControl = function() { this.keyYes = this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER), this.keyNo = this.game.input.keyboard.addKey(Phaser.Keyboard.ESC) }, n.prototype.enableAllInput = function() { t.Util.enableTouch("yes", this.ui), t.Util.enableTouch("no", this.ui), t.Instances.controlButtonUI.onChangeButton.add(this.setSelectButton, this), this.keyYes.onDown.add(this.onSelectButton, this), this.keyNo.onDown.add(this.pressNoBtn, this) }, n.prototype.disableAllInput = function() { t.Util.disableTouch("yes", this.ui), t.Util.disableTouch("no", this.ui), t.Instances.controlButtonUI.onChangeButton.remove(this.setSelectButton, this), this.keyYes.onDown.removeAll(this), this.keyNo.onDown.removeAll(this) }, n.prototype.setSelectButton = function() { switch (this.selectSprite.visible = !0, t.Instances.controlButtonUI.actualButton) {
                case "none":
                    this.selectSprite.visible = !1; break;
                case "buttonYes":
                    this.selectSprite.x = this.btnYes.x, this.selectSprite.y = this.btnYes.y; break;
                case "buttonNo":
                    this.selectSprite.x = this.btnNo.x, this.selectSprite.y = this.btnNo.y } this.selectSprite.frameName = t.Instances.controlButtonUI.getHightLight() }, n.prototype.onSelectButton = function() { switch (t.Instances.controlButtonUI.actualButton) {
                case "none":
                case "buttonYes":
                    this.pressYesBtn(); break;
                case "buttonNo":
                    this.pressNoBtn() } }, n.prototype.pressYesBtn = function() { t.Audios.playSfx(this.game, "generic_button"), this.disableAllInput(), this.typeConfirmation === e.RESTART ? this.controller.restartLevel() : this.controller.goToLevelSelect() }, n.prototype.pressNoBtn = function() { t.Audios.playSfx(this.game, "generic_button"), this.disableAllInput(), this.hide(), this.controller.closeConfirmation() }, n.prototype.show = function(i) { t.Audios.playSfx(this.game, "popup"), t.Instances.controlButtonUI.initControl("uiConfirmation"), this.setSelectButton(), this.typeConfirmation = i, this.typeConfirmation === e.RESTART ? (this.textDescription[0].visible = !1, this.textDescription[1].visible = !0) : (this.textDescription[0].visible = !0, this.textDescription[1].visible = !1), this.enableAllInput(), this.visible = !0 }, n.prototype.resize = function() { this.setSelectButton() }, n.prototype.hide = function() { this.disableAllInput(), this.visible = !1 }, n }(Phaser.Group);
    t.UIConfirmation = i }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e;! function(t) { t[t.title = 0] = "title", t[t.description = 1] = "description" }(e || (e = {})); var i = function(e) {
        function i(t) { var i = e.call(this, t.game) || this; return i.controller = t, i.ui = i.game.add.ph2UI("ui_final_message", "atlas_ui_popups"), i.tweenShow = null, i.tweenHide = null, i.decor = i.game.add.ph2AnimationObject(0, 0, "shine", "atlas_ui_popups"), Ph2.UISystem.findObject("final_base/shine_pivot", i.ui).addChild(i.decor), i.add(i.ui), i.visible = !1, i.isShow = !1, i.localization(), i.addKeysControl(), i.addTouchCallback(), i } return __extends(i, e), i.prototype.addTouchCallback = function() { t.Util.addTouchCallbackToButton("yes", this.ui, this.pressContinue, this) }, i.prototype.addKeysControl = function() { this.keyStart = this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER) }, i.prototype.localization = function() { var t;
            (t = Ph2.UISystem.findObject("final_base/final_container/final_message1", this.ui)).loadTexture("atlas_texts_debugging"), t.frameName = "final_message1.png", (t = Ph2.UISystem.findObject("final_base/final_container/final_message2", this.ui)).loadTexture("atlas_texts_debugging"), t.frameName = "final_message2.png" }, i.prototype.show = function() { this.enableAllInput(), this.decor.ph2Animations.play("final_message_anim", 1, !0), this.visible = !0, this.isShow = !0 }, i.prototype.animOut = function() { this.tweenHide = this.game.add.tween(this.ui).to({ y: this.game.height + 200 }, 300, Phaser.Easing.Linear.None, !0), this.tweenHide.onComplete.addOnce(this.hide, this) }, i.prototype.pressContinue = function() { this.hide(), this.disableAllInput(), t.Audios.playSfx(this.game, "generic_button") }, i.prototype.enableAllInput = function() { this.keyStart.onDown.add(this.pressContinue, this), t.Util.enableTouch("yes", this.ui) }, i.prototype.disableAllInput = function() { this.keyStart.onDown.remove(this.pressContinue, this), t.Util.disableTouch("yes", this.ui) }, i.prototype.hide = function() { this.isShow = !1, this.decor.ph2Animations.destroy(), this.decor = null, this.visible = !1 }, i.prototype.pause = function() { this.decor && this.decor.ph2Animations.pause("final_message_anim") }, i.prototype.resume = function() { this.decor && this.decor.ph2Animations.resume("final_message_anim") }, i }(Phaser.Group);
    t.UIFinalMessage = i }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e = function(e) {
        function i(i) { var n = e.call(this, i.game) || this; return n.controller = i, n.ui = n.game.add.ph2UI("ui_gameover", "ui_gameover"), n.selectSprite = new Phaser.Sprite(n.game, 0, 0, "atlas_ui_main_menu", "hl_mid.png"), n.selectSprite.anchor.set(.5, .5), n.btnContinue = Ph2.UISystem.findObject("container/no", n.ui), n.btnRestart = Ph2.UISystem.findObject("container/replay", n.ui), n.game.device.desktop || (n.selectSprite.visible = !1), n.add(n.selectSprite), n.add(n.ui), n.hide(), n.localization(), n.addTouchCallback(), n.addKeysControl(), t.Instances.controlButtonUI.initControl("uiGameover"), n } return __extends(i, e), i.prototype.addTouchCallback = function() { t.Util.addTouchCallbackToButton("container/no", this.ui, this.pressContinueBtn, this), t.Util.addTouchCallbackToButton("container/replay", this.ui, this.pressRestartBtn, this) }, i.prototype.addKeysControl = function() { this.keyStart = this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER) }, i.prototype.setSelectButton = function() { switch (this.selectSprite.visible = !0, t.Instances.controlButtonUI.actualButton) {
                case "none":
                    this.selectSprite.visible = !1; break;
                case "buttonNo":
                    this.selectSprite.x = this.btnContinue.parent.x + this.btnContinue.x, this.selectSprite.y = this.btnContinue.parent.y + this.btnContinue.y, this.selectSprite.scale.set(1, 1); break;
                case "buttonRestart":
                    this.selectSprite.x = this.btnRestart.parent.x + this.btnRestart.x, this.selectSprite.y = this.btnRestart.parent.y + this.btnRestart.y, this.selectSprite.scale.set(1, 1) } this.selectSprite.frameName = t.Instances.controlButtonUI.getHightLight() }, i.prototype.onSelectButton = function() { switch (t.Instances.controlButtonUI.actualButton) {
                case "none":
                    this.pressRestartBtn(); break;
                case "buttonNo":
                    this.pressContinueBtn(); break;
                case "buttonRestart":
                    this.pressRestartBtn() } }, i.prototype.enableAllInput = function() { t.Util.enableTouch("container/no", this.ui), t.Util.enableTouch("container/replay", this.ui), t.Instances.controlButtonUI.initControl("uiGameover"), this.setSelectButton(), t.Instances.controlButtonUI.onChangeButton.add(this.setSelectButton, this), this.keyStart.onDown.add(this.onSelectButton, this) }, i.prototype.disableAllInput = function() { t.Util.disableTouch("container/no", this.ui), t.Util.disableTouch("container/replay", this.ui), t.Instances.controlButtonUI.onChangeButton.remove(this.setSelectButton, this), this.keyStart.onDown.removeAll(this) }, i.prototype.pressContinueBtn = function() { t.Audios.playSfx(this.game, "generic_button"), this.disableAllInput(), this.hide(), this.controller.goToLevelSelect() }, i.prototype.pressRestartBtn = function() { t.Audios.playSfx(this.game, "generic_button"), this.disableAllInput(), this.hide(), this.controller.restartLevelGameOver() }, i.prototype.show = function() { t.Audios.playSfx(this.game, "popup"), this.visible = !0, this.enableAllInput() }, i.prototype.hide = function() { this.visible = !1 }, i.prototype.resize = function() { this.setSelectButton() }, i.prototype.localization = function() { var t = Ph2.UISystem.findObject("container/text", this.ui);
            t.loadTexture("atlas_texts_debugging"), t.frameName = "ui_gameover_text.png" }, i }(Phaser.Group);
    t.UIGameOver = e }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e;! function(t) { t[t.ESC = 0] = "ESC" }(e || (e = {})); var i = function(i) {
        function n(t, e) { void 0 === e && (e = -1); var n = i.call(this, t.game) || this; return n.controller = t, n.keys = [], n.pauseEnable = !0, n.ui = n.game.add.ph2UI("ui_gameplay_battle", "ui_gameplay_battle"), n.lifeBar = Ph2.UISystem.findObject("bar1/bar_base/bar", n.ui), n.borderAnimation = n.game.add.ph2AnimationObject(0, 0, "border_bar", "ui_gameplay_battle"), n.enemyCountBase = Ph2.UISystem.findObject("enemies_counter", n.ui), n.enemyCountNumber = Ph2.UISystem.findObject("enemies_counter/enemy_number", n.ui), n.enemySprite = Ph2.UISystem.findObject("enemies_counter/enemies", n.ui), n.barBase = Ph2.UISystem.findObject("bar1/bar_base", n.ui), n.lifeBarHeight = n.lifeBar.height, n.rectangle = new Phaser.Graphics(n.game, -n.lifeBar.width / 2, n.lifeBar.y - n.lifeBar.height), n.rectangle.beginFill(16777215), n.rectangle.drawRect(0, 0, n.lifeBar.width, n.lifeBar.height), n.lastPercent = 1, n.lifeBar.mask = n.rectangle, n.barBase.addChild(n.rectangle), n.tweenBar = null, n.tweenAnimMove = null, n.tweenLive = null, Ph2.UISystem.findObject("border_bar_pivot", n.ui).addChild(n.borderAnimation), n.animationCompelted = n.game.add.ph2AnimationObject(0, 0, "circle", "ui_gameplay_fix"), n.enemySprite.addChild(n.animationCompelted), n.add(n.ui), n.addTouchCallback(), n.updateEnemiesCount(e), n.addKeyControl(), n.checkFixIOS(), n } return __extends(n, i), n.prototype.checkFixIOS = function() { if (t.Constants.IOS_BUTTON_PATCH) { var e = void 0;
                (e = Ph2.UISystem.findObject("pause", this.ui)).y += 30, e.alignment.setLandscapeAlignment("TOP_RIGHT", -15, !0, -42, !0), (e = Ph2.UISystem.findObject("border_bar_pivot", this.ui)).y += 30, e.alignment.setLandscapeAlignment("TOP_RIGHT", -45.2, !0, -216.8, !0), (e = Ph2.UISystem.findObject("bar1", this.ui)).y += 30, e.alignment.setLandscapeAlignment("TOP_RIGHT", -1.7, !0, -103.8, !0) } }, n.prototype.addTouchCallback = function() { t.Util.addTouchCallbackToButton("pause", this.ui, this.pressPause, this) }, n.prototype.addKeyControl = function() { var t;
            (t = this.game.input.keyboard.addKey(Phaser.Keyboard.ESC)).onDown.add(this.pressPause, this), this.keys[e.ESC] = t }, n.prototype.enableKeyInput = function() { this.keys[e.ESC].onDown.add(this.pressPause, this) }, n.prototype.disableKeyInput = function() { this.keys[e.ESC].onDown.remove(this.pressPause, this) }, n.prototype.setLives = function(e, i, n) { void 0 === n && (n = !0); var s = e / i; if (n) { var o = this.borderAnimation.ph2Animations.play("border_bar_anim", 1, !1);
                o.onComplete.removeAll(this), o.onComplete.addOnce(function() { this.borderAnimation.ph2Animations.play("border_bar_anim", 1, !1) }, this), this.tweenBar && (this.tweenBar.stop(), this.tweenAnimMove.stop()), t.Audios.playSfx(this.game, "damage"), this.barBase.x = 0, this.borderAnimation.x = 0, this.tweenBar = this.game.add.tween(this.barBase).to({ x: 5 }, 100, "Linear", !0, 0, 2, !1), this.tweenAnimMove = this.game.add.tween(this.borderAnimation).to({ x: 5 }, 100, "Linear", !0, 0, 2, !1), this.tweenLive = this.game.add.tween(this).to({ percentLive: s }, 200, "Linear", !0) } else this.percentLive = s, this.lastPercent = s }, Object.defineProperty(n.prototype, "percentLive", { get: function() { return this.lastPercent }, set: function(t) { this.rectangle.clear(), this.rectangle.beginFill(16777215), this.rectangle.drawRect(0, this.lifeBar.height - t * this.lifeBar.height, this.lifeBar.width, t * this.lifeBar.height), this.lastPercent = t }, enumerable: !0, configurable: !0 }), n.prototype.updateEnemiesCount = function(t) {-1 === t ? this.enemyCountNumber.setText("∞") : (this.enemyCountNumber.setText(String(t)), 0 === t && this.completedAnim()) }, n.prototype.completedAnim = function() { this.animationCompelted.ph2Animations.play("circle_check", 1, !1).onComplete.addOnce(this.onEndCompletedAnim, this) }, n.prototype.onEndCompletedAnim = function() { this.enemySprite.frameName = "ticket.png" }, n.prototype.pause = function() { this.borderAnimation.ph2Animations.pause(), this.animationCompelted.ph2Animations.pause(), this.tweenBar && (this.tweenBar.pause(), this.tweenAnimMove.pause()), this.tweenLive && this.tweenLive.pause() }, n.prototype.pressPause = function() { t.Audios.playSfx(this.game, "generic_button"), this.disableAllInput(), this.controller.pressPause() }, n.prototype.resume = function() { this.borderAnimation.ph2Animations.resume(), this.animationCompelted.ph2Animations.resume(), this.tweenBar && (this.tweenBar.resume(), this.tweenAnimMove.resume()), this.tweenLive && this.tweenLive.resume() }, n.prototype.enableAllInput = function() { this.enableKeyInput(), this.pauseEnable = !0, t.Util.enableTouch("pause", this.ui) }, n.prototype.disableAllInput = function() { this.disableKeyInput(), this.pauseEnable = !1, t.Util.disableTouch("pause", this.ui) }, n.prototype.resize = function() {}, n }(Phaser.Group);
    t.UIGameplayBattle = i }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e;! function(t) { t[t.TOP = 0] = "TOP", t[t.MID = 1] = "MID", t[t.BOT = 2] = "BOT", t[t.CONFIRM = 3] = "CONFIRM", t[t.NONE = 4] = "NONE" }(e || (e = {})); var i;! function(t) { t[t.UP = 0] = "UP", t[t.DOWN = 1] = "DOWN", t[t.LEFT = 2] = "LEFT", t[t.RIGHT = 3] = "RIGHT", t[t.ENTER = 4] = "ENTER", t[t.ESC = 5] = "ESC" }(i || (i = {})); var n = function(n) {
        function s(i, s) { var o = n.call(this, i.game) || this;
            o.controller = i, o.animOverGroup = s, o.selectControl = e.NONE, o.keys = [], o.tweensGood = [], o.tweenButton = null, o.pauseEnable = !0, o.isIntro = !0, o.timer = o.game.time.create(!1), o.timerChange = o.game.time.create(!1), o.ui = o.game.add.ph2UI("ui_gameplay_fix", "ui_gameplay_fix"), o.groupBugCharacter = Ph2.UISystem.findObject("counter/character_pivot", o.ui), o.animGood = o.game.add.ph2AnimationObject(0, 0, "circle", "ui_gameplay_fix"), o.animGood.visible = !1, o.animIntro = o.game.add.ph2AnimationObject(485, 515, "objetive", "character_atlas"); var a = t.GameStateManager.instances.getLevel(),
                r = t.VisualData.objetives[a.character].skin;
            Ph2.AnimationSystem.findObject("base/alien", o.animIntro).ph2Animations.play(r), Ph2.UISystem.findObject("object/silhouettes", o.ui).frameName = t.VisualData.silhouette[a.character].key; var h;
            h = ["container/head/head_error", "container/torso/torso_error", "container/legs/legs_error"], o.wrongBox = [], o.wrongBoxTween = []; for (var l = 0, c = h; l < c.length; l++) { d = c[l];
                (m = Ph2.UISystem.findObject(d, o.ui)).visible = !1, m.x = m.parent.x + m.parent.parent.x, m.y = m.parent.y + m.parent.parent.y, o.animOverGroup.add(m), o.wrongBox.push(m), o.wrongBoxTween.push(null) } o.swipesLineBg = []; for (var u = 0, p = h = ["container/head", "container/torso", "container/legs"]; u < p.length; u++) { var d = p[u],
                    m = Ph2.UISystem.findObject(d, o.ui);
                o.swipesLineBg.push(m) } o.animChange = []; for (var g, f = 0, y = h = ["container/head/transition_fx_pivot", "container/torso/transition_fx_pivot", "container/legs/transition_fx_pivot"]; f < y.length; f++) { var d = y[f],
                    m = Ph2.UISystem.findObject(d, o.ui);
                (g = o.game.add.ph2AnimationObject(0, 0, "transition_fx", "ui_gameplay_fix")).visible = !1, o.animChange.push(g), m.addChild(g) } o.swipesLineArrows = []; for (var v = 0, b = h = ["container/head", "container/torso", "container/legs"]; v < b.length; v++) { var d = b[v],
                    m = Ph2.UISystem.findObject(d, o.ui);
                o.swipesLineArrows.push(m) } o.arrowsLeft = []; for (var _ = 0, S = h = ["container/arrow_head_l", "container/arrow_torso_l", "container/arrow_legs_l"]; _ < S.length; _++) { var d = S[_],
                    m = Ph2.UISystem.findObject(d, o.ui);
                o.arrowsLeft.push(m) } o.arrowsRight = []; for (var w = 0, C = h = ["container/arrow_head_r", "container/arrow_torso_r", "container/arrow_legs_r"]; w < C.length; w++) { var d = C[w],
                    m = Ph2.UISystem.findObject(d, o.ui);
                o.arrowsRight.push(m) } h = ["container/arrow_head_r", "container/arrow_torso_r", "container/arrow_legs_r", "button_fx_pivot"], o.pivotInactive = []; for (var A = 0, T = h; A < T.length; A++) { var d = T[A],
                    x = Ph2.UISystem.findObject(d, o.ui);
                o.pivotInactive.push(x) } var P = Ph2.UISystem.findObject("button_fx_pivot", o.ui); return o.buttonFx = o.game.add.ph2AnimationObject(0, 0, "button_fx", "ui_gameplay_fix"), o.inactiveAnim = o.game.add.ph2AnimationObject(0, 0, "tutorial", "atlas_gameplay"), o.buttonSprite = Ph2.AnimationSystem.findObject("complete", o.buttonFx), o.selectSprite = new Phaser.Sprite(o.game, 2, -20, "atlas_ui_main_menu", "select.png"), o.selectSprite.anchor.set(.5, .5), o.selectSprite.visible = !1, P.addChild(o.selectSprite), P.addChild(o.buttonFx), o.add(o.ui), o.animOverGroup.add(o.animIntro), o.addTouchCallback(), o.addKeyControl(), o.addVisualBugs(), o.groupBugCharacter.add(o.animGood), o.checkFixIOS(), o } return __extends(s, n), s.prototype.checkFixIOS = function() { if (t.Constants.IOS_BUTTON_PATCH) { var e = void 0;
                (e = Ph2.UISystem.findObject("pause", this.ui)).y += 30, e.alignment.setLandscapeAlignment("TOP_RIGHT", -15, !0, -42, !0), (e = Ph2.UISystem.findObject("button_fx_pivot", this.ui)).y -= 20, e.alignment.setLandscapeAlignment("BOTTOM_RIGHT", -81.5, !0, -84.5, !0) } }, s.prototype.addVisualBugs = function() { this.bugIndex = 0, this.bugsIcons = []; var e, i, n = this.controller.levelData.dna.bugCharacters.length;
            this.maskBugIcon = new Phaser.Graphics(this.game), this.maskBugIcon.beginFill(16777215), this.maskBugIcon.drawRect(-50, -50, 200, 277), this.groupBugCharacter.addChild(this.maskBugIcon); for (var s = 0; s < n; s++) e = t.GameStateManager.instances.levelData.dna.bugCharacters[s], (i = new Phaser.Sprite(this.game, 0, 100 * s, t.ConfigGame.bugCharacter[e].RESOURCE.atlas, t.ConfigGame.bugCharacter[e].RESOURCE.key)).anchor.set(.5, .5), i.scale.set(.4, .4), i.alpha = .5, i.mask = this.maskBugIcon, this.bugsIcons.push(i), this.groupBugCharacter.addChild(i);
            this.setBugAlpha() }, s.prototype.setBugAlpha = function() { this.bugsIcons[this.bugIndex].alpha = 1 }, s.prototype.showButtonCompleted = function() { this.buttonSprite.alpha = 0, this.tweenButton = this.game.add.tween(this.buttonSprite).to({ alpha: 1 }, 200, "Linear", !0) }, s.prototype.hideButtonCompleted = function() { this.buttonSprite.alpha = 1, this.tweenButton = this.game.add.tween(this.buttonSprite).to({ alpha: 0 }, 200, "Linear", !0) }, s.prototype.addTouchCallback = function() { this.enableCompletedButton(), this.buttonSprite.events.onInputDown.add(this.checkCompleted, this), t.Util.addTouchCallbackToButton("object", this.ui, this.pressSilhouette, this), t.Util.addTouchCallbackToButton("pause", this.ui, this.pressPause, this), t.Util.addTouchCallbackToButton("container/arrow_head_l", this.ui, this.moveLeft, this, 0, 0), t.Util.addTouchCallbackToButton("container/arrow_head_r", this.ui, this.moveRight, this, 0, 0), t.Util.addTouchCallbackToButton("container/arrow_torso_l", this.ui, this.moveLeft, this, 0, 1), t.Util.addTouchCallbackToButton("container/arrow_torso_r", this.ui, this.moveRight, this, 0, 1), t.Util.addTouchCallbackToButton("container/arrow_legs_l", this.ui, this.moveLeft, this, 0, 2), t.Util.addTouchCallbackToButton("container/arrow_legs_r", this.ui, this.moveRight, this, 0, 2) }, s.prototype.playIntroAnimStep1 = function() { t.Audios.playSfx(this.game, "omnitrix_open");
            this.animIntro.ph2Animations.play("light_base_in_2", 1, !1);
            this.timer.add(2500, this.playIntroAnimStep2, this), this.timer.start(), this.game.input.onDown.add(this.playIntroAnimStep2, this) }, s.prototype.playIntroAnimStep2 = function() { this.timer.removeAll(), this.timer.stop(), this.game.input.onDown.remove(this.playIntroAnimStep2, this), t.Audios.playSfx(this.game, "omnitrix_close"), this.animIntro.ph2Animations.play("light_base_out_2", 1, !1).onComplete.addOnce(this.endIntroAnim, this) }, s.prototype.endIntroAnim = function() { this.isIntro = !1, this.controller.endIntroAnim() }, s.prototype.pressSilhouette = function() {!0 !== this.isIntro && (this.disableAllInput(), this.controller.stopInactiveTime(), this.controller.disableSwipe(), this.playSilhouetteAnimStep1(), this.controller instanceof t.SeparateBugState && this.controller.disableAllDrag()) }, s.prototype.playSilhouetteAnimStep1 = function() { t.Audios.playSfx(this.game, "omnitrix_open");
            this.animIntro.ph2Animations.play("light_base_in_2", 1, !1);
            this.timer.add(2500, this.playSilhouetteAnimStep2, this), this.timer.start(), this.game.input.onDown.add(this.playSilhouetteAnimStep2, this) }, s.prototype.playSilhouetteAnimStep2 = function() { this.timer.removeAll(), this.game.input.onDown.remove(this.playSilhouetteAnimStep2, this), this.timer.stop(), t.Audios.playSfx(this.game, "omnitrix_close"), this.animIntro.ph2Animations.play("light_base_out_2", 1, !1).onComplete.addOnce(this.endSilhouetteAnim, this) }, s.prototype.endSilhouetteAnim = function() { this.enableAllInput(), this.controller.enableSwipe(), this.controller.startInactiveTime() }, s.prototype.addKeyControl = function() { var t;
            (t = this.game.input.keyboard.addKey(Phaser.Keyboard.UP)).onDown.add(this.pressKeyUp, this), this.keys[i.UP] = t, (t = this.game.input.keyboard.addKey(Phaser.Keyboard.DOWN)).onDown.add(this.pressKeyDown, this), this.keys[i.DOWN] = t, (t = this.game.input.keyboard.addKey(Phaser.Keyboard.LEFT)).onDown.add(this.pressKeyLeft, this), this.keys[i.LEFT] = t, (t = this.game.input.keyboard.addKey(Phaser.Keyboard.RIGHT)).onDown.add(this.pressKeyRight, this), this.keys[i.RIGHT] = t, (t = this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER)).onDown.add(this.pressKeyEnter, this), this.keys[i.ENTER] = t, (t = this.game.input.keyboard.addKey(Phaser.Keyboard.ESC)).onDown.add(this.pressPause, this), this.keys[i.ESC] = t }, s.prototype.enableKeyInput = function() { this.keys[i.UP].onDown.add(this.pressKeyUp, this), this.keys[i.DOWN].onDown.add(this.pressKeyDown, this), this.keys[i.LEFT].onDown.add(this.pressKeyLeft, this), this.keys[i.RIGHT].onDown.add(this.pressKeyRight, this), this.keys[i.ENTER].onDown.add(this.pressKeyEnter, this), this.keys[i.ESC].onDown.add(this.pressPause, this) }, s.prototype.disableKeyInput = function() { this.keys[i.UP].onDown.remove(this.pressKeyUp, this), this.keys[i.DOWN].onDown.remove(this.pressKeyDown, this), this.keys[i.LEFT].onDown.remove(this.pressKeyLeft, this), this.keys[i.RIGHT].onDown.remove(this.pressKeyRight, this), this.keys[i.ENTER].onDown.remove(this.pressKeyEnter, this), this.keys[i.ESC].onDown.remove(this.pressPause, this) }, s.prototype.onInitSwipe = function() { this.selectControl = e.NONE, this.switchSelectControl(), this.disableKeyInput() }, s.prototype.onEndSwipe = function() { this.enableKeyInput() }, s.prototype.pressKeyUp = function() { this.controller.stopInactiveTime(), this.controller.startInactiveTime(); for (var t = 0, i = this.arrowsLeft; t < i.length; t++)(o = i[t]).frameName = "arrow_l.png"; for (var n = 0, s = this.arrowsRight; n < s.length; n++) { var o = s[n];
                o.frameName = "arrow_r.png" } switch (this.selectControl) {
                case e.NONE:
                    this.selectControl = e.TOP; break;
                case e.TOP:
                    this.selectControl = e.CONFIRM; break;
                case e.CONFIRM:
                    this.selectControl = e.BOT; break;
                case e.BOT:
                    this.selectControl = e.MID; break;
                case e.MID:
                    this.selectControl = e.TOP } this.switchSelectControl() }, s.prototype.pressKeyDown = function() { this.controller.stopInactiveTime(), this.controller.startInactiveTime(); for (var t = 0, i = this.arrowsLeft; t < i.length; t++)(o = i[t]).frameName = "arrow_l.png"; for (var n = 0, s = this.arrowsRight; n < s.length; n++) { var o = s[n];
                o.frameName = "arrow_r.png" } switch (this.selectControl) {
                case e.NONE:
                    this.selectControl = e.TOP; break;
                case e.TOP:
                    this.selectControl = e.MID; break;
                case e.CONFIRM:
                    this.selectControl = e.TOP; break;
                case e.BOT:
                    this.selectControl = e.CONFIRM; break;
                case e.MID:
                    this.selectControl = e.BOT } this.switchSelectControl() }, s.prototype.pressKeyLeft = function() { for (var t = 0, i = this.arrowsRight; t < i.length; t++)(o = i[t]).frameName = "arrow_r.png"; for (var n = 0, s = this.arrowsLeft; n < s.length; n++) { var o = s[n];
                o.frameName = "arrow_l.png" } switch (this.selectControl) {
                case e.NONE:
                    this.selectControl = e.TOP, this.switchSelectControl(); break;
                case e.TOP:
                    this.arrowsLeft[0].frameName = "arrow_l2.png", this.controller.moveLeft(0); break;
                case e.MID:
                    this.arrowsLeft[1].frameName = "arrow_l2.png", this.controller.moveLeft(1); break;
                case e.BOT:
                    this.arrowsLeft[2].frameName = "arrow_l2.png", this.controller.moveLeft(2) } }, s.prototype.pressKeyRight = function() { for (var t = 0, i = this.arrowsRight; t < i.length; t++)(o = i[t]).frameName = "arrow_r.png"; for (var n = 0, s = this.arrowsLeft; n < s.length; n++) { var o = s[n];
                o.frameName = "arrow_l.png" } switch (this.selectControl) {
                case e.NONE:
                    this.selectControl = e.TOP, this.switchSelectControl(); break;
                case e.TOP:
                    this.arrowsRight[0].frameName = "arrow_r2.png", this.controller.moveRight(0); break;
                case e.MID:
                    this.arrowsRight[1].frameName = "arrow_r2.png", this.controller.moveRight(1); break;
                case e.BOT:
                    this.arrowsRight[2].frameName = "arrow_r2.png", this.controller.moveRight(2) } }, s.prototype.pressKeyEnter = function() { this.checkCompleted() }, s.prototype.switchSelectControl = function() { switch (this.selectControl) {
                case e.NONE:
                    this.swipesLineBg[0].frameName = "head2.png", this.swipesLineBg[1].frameName = "center2.png", this.swipesLineBg[2].frameName = "down2.png", this.selectSprite.visible = !1; for (var t = 0, i = this.arrowsRight; t < i.length; t++)(o = i[t]).frameName = "arrow_r.png"; for (var n = 0, s = this.arrowsLeft; n < s.length; n++) { var o = s[n];
                        o.frameName = "arrow_l.png" } break;
                case e.TOP:
                    this.swipesLineBg[0].frameName = "head2.png", this.swipesLineBg[1].frameName = "center.png", this.swipesLineBg[2].frameName = "down.png", this.selectSprite.visible = !1; break;
                case e.BOT:
                    this.swipesLineBg[0].frameName = "head.png", this.swipesLineBg[1].frameName = "center.png", this.swipesLineBg[2].frameName = "down2.png", this.selectSprite.visible = !1; break;
                case e.MID:
                    this.swipesLineBg[0].frameName = "head.png", this.swipesLineBg[1].frameName = "center2.png", this.swipesLineBg[2].frameName = "down.png", this.selectSprite.visible = !1; break;
                case e.CONFIRM:
                    this.swipesLineBg[0].frameName = "head.png", this.swipesLineBg[1].frameName = "center.png", this.swipesLineBg[2].frameName = "down.png", this.selectSprite.visible = !0 } }, s.prototype.moveLeft = function(e, i, n, s) { t.Audios.playSfx(this.game, "generic_button"), this.controller.moveLeft(s[0]) }, s.prototype.moveRight = function(e, i, n, s) { t.Audios.playSfx(this.game, "generic_button"), this.controller.moveRight(s[0]) }, s.prototype.checkCompleted = function() { this.controller.checkFixBug() }, s.prototype.enableCompletedButton = function() { this.buttonSprite.inputEnabled = !0, this.keys[i.ENTER] && this.keys[i.ENTER].onDown.add(this.pressKeyEnter, this), this.buttonFx.ph2Animations.play("button_active") }, s.prototype.disableCompletedButton = function() { this.buttonSprite.inputEnabled = !1, this.keys[i.ENTER] && this.keys[i.ENTER].onDown.remove(this.pressKeyEnter, this), this.buttonSprite.frameName = "complete_inv.png" }, s.prototype.playCorrectAnim = function() { this.controller.disableInput(), this.disableAllInput(), this.buttonFx.ph2Animations.play("button_anim").onComplete.addOnce(this.endFixBugStep1, this); for (var t = 0, e = this.keys; t < e.length; t++) e[t].onDown.removeAll(this) }, s.prototype.endFixBugStep1 = function() { this.bugsIcons[this.bugIndex].alpha = 1, t.Audios.playSfx(this.game, "great_popup"); var e = this.game.add.tween(this.bugsIcons[this.bugIndex]).to({ alpha: 0 }, 200, "Linear", !0),
                i = this.animGood.ph2Animations.play("circle_check", 1, !1);
            this.animGood.x = this.bugsIcons[this.bugIndex].x, this.animGood.y = this.bugsIcons[this.bugIndex].y, this.animGood.visible = !0, this.tweensGood.push(e), i.onComplete.addOnce(this.endFixBugStep2, this) }, s.prototype.endFixBugStep2 = function() { var t;
            this.animGood.visible = !1; for (var e = 0, i = this.bugsIcons; e < i.length; e++) { var n = i[e];
                t = this.game.add.tween(n).to({ y: n.y - 100 }, 200, "Linear", !0), this.tweensGood.push(t) } t.onComplete.addOnce(this.endFixBugStep3, this) }, s.prototype.endFixBugStep3 = function() { this.tweensGood = [], this.controller.checkCompleted() }, s.prototype.showNextAlienStep1 = function() { t.Audios.playSfx(this.game, "shake_slides"), this.animChange[0].ph2Animations.play("transition_fix_anim", 1, !0), this.animChange[1].ph2Animations.play("transition_fix_anim", 1, !0), this.animChange[2].ph2Animations.play("transition_fix_anim", 1, !0), this.animChange[0].visible = !0, this.animChange[1].visible = !0, this.animChange[2].visible = !0, this.timerChange.add(500, this.showNextAlienStep2, this), this.timerChange.start() }, s.prototype.showNextAlienStep2 = function() { this.controller.showSwipe(0), this.animChange[0].ph2Animations.stop(), this.animChange[0].visible = !1, this.timerChange.add(500, this.showNextAlienStep3, this), this.timerChange.start() }, s.prototype.showNextAlienStep3 = function() { this.controller.showSwipe(1), this.animChange[1].ph2Animations.stop(), this.animChange[1].visible = !1, this.timerChange.add(500, this.showNextAlienStep4, this), this.timerChange.start() }, s.prototype.showNextAlienStep4 = function() { this.bugIndex++, this.setBugAlpha(), this.controller.showSwipe(2), this.animChange[2].visible = !1, this.animChange[2].ph2Animations.stop(), this.enableAllInput(), this.controller.onEndNextAlient() }, s.prototype.playIncorrectAnim = function(t, e, i) { t || this.playWrongBox(0), e || this.playWrongBox(1), i || this.playWrongBox(2) }, s.prototype.playWrongBox = function(t) { this.wrongBox[t].alpha = 0, this.wrongBox[t].visible = !0, this.wrongBoxTween[t] && this.wrongBoxTween[t].stop(), this.wrongBoxTween[t] = this.game.add.tween(this.wrongBox[t]).to({ alpha: 1 }, 133, "Linear").to({ alpha: 1 }, 117, "Linear").to({ alpha: 0 }, 117, "Linear").to({ alpha: 1 }, 133, "Linear").to({ alpha: 1 }, 117, "Linear").to({ alpha: 0 }, 117, "Linear"), this.wrongBoxTween[t].start(), this.wrongBoxTween[t].onComplete.addOnce(this.hideWrongBox, this, 0, t) }, s.prototype.hideWrongBox = function(t, e, i) { this.wrongBox[i].visible = !1 }, s.prototype.playInactiveAnim = function(t) { this.pivotInactive[t].addChild(this.inactiveAnim), this.inactiveAnim.x = 3 === t ? 34 : 25, this.inactiveAnim.y = 3 === t ? 22 : 28; var e = this.game.device.desktop ? "desktop" : "mobile",
                i = this.inactiveAnim.ph2Animations.play("tutorial_tap_" + e, 1, !1);
            this.inactiveAnim.visible = !0, i.onComplete.addOnce(this.endInactiveAnim, this) }, s.prototype.endInactiveAnim = function() { this.inactiveAnim.visible = !1, this.controller.endInactiveAnim() }, s.prototype.stopInactiveAnim = function() { this.inactiveAnim.visible = !1, this.inactiveAnim.ph2Animations.stop() }, s.prototype.pressPause = function() { t.Audios.playSfx(this.game, "generic_button"), this.disableAllInput(), this.controller.pressPause() }, s.prototype.enableAllInput = function() { this.buttonSprite.inputEnabled = !0, t.Util.enableTouch("object", this.ui), t.Util.enableTouch("pause", this.ui), this.pauseEnable = !0, t.Util.enableTouch("container/arrow_head_l", this.ui), t.Util.enableTouch("container/arrow_head_r", this.ui), t.Util.enableTouch("container/arrow_torso_l", this.ui), t.Util.enableTouch("container/arrow_torso_r", this.ui), t.Util.enableTouch("container/arrow_legs_l", this.ui), t.Util.enableTouch("container/arrow_legs_r", this.ui), this.enableKeyInput() }, s.prototype.disableAllInput = function() { this.buttonSprite.inputEnabled = !1, t.Util.disableTouch("object", this.ui), t.Util.disableTouch("pause", this.ui), this.pauseEnable = !1, t.Util.disableTouch("container/arrow_head_l", this.ui), t.Util.disableTouch("container/arrow_head_r", this.ui), t.Util.disableTouch("container/arrow_torso_l", this.ui), t.Util.disableTouch("container/arrow_torso_r", this.ui), t.Util.disableTouch("container/arrow_legs_l", this.ui), t.Util.disableTouch("container/arrow_legs_r", this.ui), this.disableKeyInput() }, s.prototype.pause = function() { for (var t = 0, e = this.wrongBoxTween; t < e.length; t++)(s = e[t]) && s.pause(); for (var i = 0, n = this.tweensGood; i < n.length; i++) { var s = n[i];
                s && s.pause() } for (var o = 0, a = this.animChange; o < a.length; o++) a[o].ph2Animations.pause();
            this.tweenButton && this.tweenButton.pause(), this.animGood.ph2Animations.pause(), this.animIntro.ph2Animations.pause(), this.inactiveAnim.ph2Animations.pause(), this.buttonFx.ph2Animations.pause(), this.timer.pause(), this.timerChange.pause() }, s.prototype.resume = function() { for (var t = 0, e = this.wrongBoxTween; t < e.length; t++)(s = e[t]) && s.resume(); for (var i = 0, n = this.tweensGood; i < n.length; i++) { var s = n[i];
                s && s.resume() } for (var o = 0, a = this.animChange; o < a.length; o++) a[o].ph2Animations.resume();
            this.tweenButton && this.tweenButton.resume(), this.animGood.ph2Animations.resume(), this.animIntro.ph2Animations.resume(), this.inactiveAnim.ph2Animations.resume(), this.buttonFx.ph2Animations.resume(), this.timer.resume(), this.timerChange.resume() }, s.prototype.resize = function() { for (var t = 0, e = this.wrongBox; t < e.length; t++) e[t].x = this.game.width / 2 + 48 }, s.prototype.destroy = function() { for (var t = 0, e = this.keys; t < e.length; t++) e[t].onDown.removeAll(this);
            this.animIntro.ph2Animations.removeListeners("light_base_out"), this.animIntro.ph2Animations.stop(), this.inactiveAnim.ph2Animations.stop(), this.buttonFx.ph2Animations.stop(), this.animIntro.destroy(), this.inactiveAnim.destroy(), this.buttonFx.destroy(), this.animIntro = null, this.inactiveAnim = null, this.buttonFx = null, this.keys = null, n.prototype.destroy.call(this) }, s }(Phaser.Group);
    t.UIGameplayFix = n }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e;! function(t) { t[t.ESC = 0] = "ESC", t[t.ENTER = 1] = "ENTER" }(e || (e = {})); var i = function(i) {
        function n(e) { var n = i.call(this, e.game) || this;
            n.controller = e, n.keys = [], n.isCompleted = !1, n.tweenBase = null, n.pauseEnable = !0, n.ui = n.game.add.ph2UI("ui_gameplay_select", "ui_gameplay_select"), n.lifeBar = Ph2.UISystem.findObject("bar_base/bar", n.ui), n.animIntro = n.game.add.ph2AnimationObject(485, 515, "objetive", "character_atlas"), n.animIntro.x = n.game.width / 2; var s = t.GameStateManager.instances.getLevel(),
                o = t.VisualData.objetives[s.character].skin;
            Ph2.AnimationSystem.findObject("base/alien", n.animIntro).ph2Animations.play(o), Ph2.UISystem.findObject("base/silhouette", n.ui).frameName = t.VisualData.silhouette[s.character].key, n.timer = n.game.time.create(!1), n.randomTimerLines = n.game.time.create(!1), n.randomTimerLines.loop(2 * Phaser.Timer.SECOND, n.playRandomAnimLine, n); var a;
            a = ["bad/bubles_pivot1", "bad/bubles_pivot2", "good/bubles_pivot1", "good/bubles_pivot2"], n.animBubbles = []; for (var r = 0, h = a; r < h.length; r++) { var l = h[r],
                    c = Ph2.UISystem.findObject(l, n.ui);
                (d = n.game.add.ph2AnimationObject(0, 0, "bubles", "atlas_ui_fx")).ph2Animations.play("bubles_anim", 1, !0), c.addChild(d), n.animBubbles.push(d) } a = ["base/ticket_base_pivot"], n.animTicket = []; for (var u = 0, p = a; u < p.length; u++) { var l = p[u],
                    c = Ph2.UISystem.findObject(l, n.ui),
                    d = n.game.add.ph2AnimationObject(0, 0, "ticket_base", "atlas_ui_fx");
                c.addChild(d), n.animTicket.push(d) } n.pivotBadIncorrect = Ph2.UISystem.findObject("bad/incorrect_folder_pivot", n.ui), n.pivotGoodIncorrect = Ph2.UISystem.findObject("good/incorrect_folder_pivot", n.ui), n.pivotBadCorrect = Ph2.UISystem.findObject("bad/feedback_pivot", n.ui), n.pivotGoodCorrect = Ph2.UISystem.findObject("good/feedback_pivot", n.ui), n.baseButton = Ph2.UISystem.findObject("base", n.ui), n.animCorrectZone = n.game.add.ph2AnimationObject(0, 0, "correct_folder", "atlas_ui_fx"), n.animIncorrectZone = n.game.add.ph2AnimationObject(0, 0, "incorrect_folder", "ui_gameplay_select"), n.linesBg = [], a = ["container/lines_bg1", "container/lines_bg2"]; for (var m = 0; m < 2; m++) { var c = Ph2.UISystem.findObject(a[m], n.ui),
                    d = n.game.add.ph2AnimationObject(0, 0, "lines_bg" + (m + 1), "ui_gameplay_select");
                1 === m && (d.scale.y = -1), c.addChild(d), n.linesBg.push(d) } return n.nextLine = 0, n.randomTimerLines.start(), n.isIntro = !0, n.add(n.ui), n.add(n.animIntro), n.addTouchCallback(), n.setUI(!1), n.addKeyControl(), n.checkFixIOS(), n } return __extends(n, i), n.prototype.checkFixIOS = function() { if (t.Constants.IOS_BUTTON_PATCH) { var e = Ph2.UISystem.findObject("pause", this.ui);
                e.y += 30, e.alignment.setLandscapeAlignment("TOP_RIGHT", -15, !0, -42, !0) } }, n.prototype.addKeyControl = function() { var t;
            (t = this.game.input.keyboard.addKey(Phaser.Keyboard.ESC)).onDown.add(this.pressPause, this), this.keys[e.ESC] = t, t = this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER), this.keys[e.ENTER] = t }, n.prototype.addTouchCallback = function() { t.Util.addTouchCallbackToButton("base", this.ui, this.pressSilhouette, this), t.Util.addTouchCallbackToButton("pause", this.ui, this.pressPause, this) }, n.prototype.setLives = function(t, e) { this.lifeBar.scale.x = t / e }, n.prototype.setUI = function(t) { t && (Ph2.UISystem.findObject("bad/bad_2", this.ui).visible = !1, Ph2.UISystem.findObject("good", this.ui).visible = !1) }, n.prototype.playRandomAnimLine = function() { this.linesBg[this.nextLine].ph2Animations.play("lines_bg_anim", .5, !1), this.nextLine = (this.nextLine + 1) % 2 }, n.prototype.playIntroAnimStep1 = function() { t.Audios.playSfx(this.game, "omnitrix_open");
            this.animIntro.ph2Animations.play("light_base_in", 1, !1);
            this.timer.add(2500, this.playIntroAnimStep2, this), this.timer.start(), this.game.input.onDown.add(this.playIntroAnimStep2, this) }, n.prototype.playIntroAnimStep2 = function() { this.timer.removeAll(), this.timer.stop(), this.game.input.onDown.remove(this.playIntroAnimStep2, this), t.Audios.playSfx(this.game, "omnitrix_close"), this.animIntro.ph2Animations.play("light_base_out", 1, !1).onComplete.addOnce(this.endIntroAnim, this) }, n.prototype.endIntroAnim = function() { this.controller instanceof t.SeparateBugState && (this.isIntro = !1, this.controller.endIntroAnim()) }, n.prototype.pressSilhouette = function() {!0 !== this.isIntro && (t.Util.disableTouch("base", this.ui), this.playSilhouetteAnimStep1(), this.controller instanceof t.SeparateBugState && this.controller.disableAllDrag()) }, n.prototype.playSilhouetteAnimStep1 = function() { t.Audios.playSfx(this.game, "omnitrix_open");
            this.animIntro.ph2Animations.play("light_base_in", 1, !1);
            this.controller.hideAllBody(), this.timer.add(2500, this.playSilhouetteAnimStep2, this), this.timer.start(), this.game.input.onDown.add(this.playSilhouetteAnimStep2, this) }, n.prototype.playSilhouetteAnimStep2 = function() { this.timer.removeAll(), this.game.input.onDown.remove(this.playSilhouetteAnimStep2, this), this.timer.stop(), t.Audios.playSfx(this.game, "omnitrix_close"), this.animIntro.ph2Animations.play("light_base_out", 1, !1).onComplete.addOnce(this.endSilhouetteAnim, this) }, n.prototype.endSilhouetteAnim = function() { this.controller.showAllBody(), this.controller instanceof t.SeparateBugState && this.controller.enableAllDrag(), t.Util.enableTouch("base", this.ui) }, n.prototype.enableInput = function() { this.pauseEnable = !0, t.Util.enableTouch("base", this.ui), t.Util.enableTouch("pause", this.ui) }, n.prototype.disableInput = function() { this.pauseEnable = !1, t.Util.disableTouch("base", this.ui), t.Util.disableTouch("pause", this.ui) }, n.prototype.enableKeyInput = function() { this.keys[e.ESC].onDown.add(this.pressPause, this) }, n.prototype.disableKeyInput = function() { this.keys[e.ESC].onDown.remove(this.pressPause, this) }, n.prototype.showCompleted = function() { this.disableInput(), this.controller.startEndAnim() }, n.prototype.playIncorrectDragAnim = function(t) { for (var e = t ? "ticket_anim" : "ticket_anim_good", i = 0, n = this.animTicket; i < n.length; i++) n[i].ph2Animations.play(e, 1, !1) }, n.prototype.playIncorrectDragZoneAnim = function(t) { t ? this.pivotGoodIncorrect.addChild(this.animIncorrectZone) : this.pivotBadIncorrect.addChild(this.animIncorrectZone), this.animIncorrectZone.ph2Animations.play("incorrect_folder_anim", 1, !1) }, n.prototype.playCorrectDragZoneAnim = function(t) { t ? this.pivotBadCorrect.addChild(this.animCorrectZone) : this.pivotGoodCorrect.addChild(this.animCorrectZone), this.animCorrectZone.ph2Animations.play("correct_folder_anim", 1, !1) }, n.prototype.pressPause = function() { t.Audios.playSfx(this.game, "generic_button"), this.disableKeyInput(), this.disableInput(), this.controller.pressPause() }, n.prototype.resize = function() { this.animIntro.x = this.game.width / 2 }, n.prototype.pause = function() { this.animIntro.ph2Animations.pause(), this.timer.pause(); for (var t = 0, e = this.animBubbles; t < e.length; t++)(a = e[t]).ph2Animations.pause(); for (var i = 0, n = this.animTicket; i < n.length; i++)(a = n[i]).ph2Animations.pause(); for (var s = 0, o = this.linesBg; s < o.length; s++) { var a = o[s];
                a.ph2Animations.pause() } this.tweenBase && this.tweenBase.pause(), this.animCorrectZone.ph2Animations.pause(), this.animIncorrectZone.ph2Animations.pause(), this.randomTimerLines.pause() }, n.prototype.resume = function() { this.animIntro.ph2Animations.resume(), this.timer.resume(); for (var t = 0, e = this.animBubbles; t < e.length; t++)(a = e[t]).ph2Animations.resume(); for (var i = 0, n = this.animTicket; i < n.length; i++)(a = n[i]).ph2Animations.resume(); for (var s = 0, o = this.linesBg; s < o.length; s++) { var a = o[s];
                a.ph2Animations.resume() } this.tweenBase && this.tweenBase.resume(), this.animCorrectZone.ph2Animations.resume(), this.animIncorrectZone.ph2Animations.resume(), this.randomTimerLines.resume() }, n.prototype.destroy = function() { for (var t = 0, e = this.keys; t < e.length; t++) e[t].onDown.removeAll(this); for (var n = 0, s = this.animBubbles; n < s.length; n++)(l = s[n]).ph2Animations.stop(), l.destroy(); for (var o = 0, a = this.animTicket; o < a.length; o++)(l = a[o]).ph2Animations.stop(), l.destroy(); for (var r = 0, h = this.linesBg; r < h.length; r++) { var l = h[r];
                l.ph2Animations.stop(), l.destroy() } this.animCorrectZone.ph2Animations.stop(), this.animIncorrectZone.ph2Animations.stop(), this.animCorrectZone.destroy(), this.animIncorrectZone.destroy(), this.animCorrectZone = null, this.animIncorrectZone = null, this.animBubbles = [], this.animTicket = [], this.linesBg = [], this.animIntro.ph2Animations.removeListeners("light_base_out"), this.animIntro.ph2Animations.stop(), this.animIntro.destroy(), this.randomTimerLines.stop(!0), this.randomTimerLines.destroy(), this.timer.stop(), this.timer.destroy(), i.prototype.destroy.call(this) }, n }(Phaser.Group);
    t.UIGameplaySelect = i }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e = function(e) {
        function i(i, n) { var s = e.call(this, i.game) || this; return s.controller = i, s.level = n + 1, s.ui = s.game.add.ph2UI("ui_level_completed", "atlas_ui_popups"), s.selectSprite = new Phaser.Sprite(s.game, 0, 0, "atlas_ui_main_menu", "hl_mid.png"), s.selectSprite.anchor.set(.5, .5), s.btnContinue = Ph2.UISystem.findObject("play", s.ui), s.btnRestart = Ph2.UISystem.findObject("retry", s.ui), s.btnAudio = Ph2.UISystem.findObject("sound", s.ui), s.animGroup = s.game.add.ph2AnimationObject(0, 0, "stage", "atlas_ui_popups"), s.game.device.desktop || (s.selectSprite.visible = !1), Ph2.UISystem.findObject("container/pivot", s.ui).addChild(s.animGroup), s.add(s.selectSprite), s.add(s.ui), s.hide(), s.localization(), s.setButtonAudio(t.Instances.dataManager.getAudio()), s.addTouchCallback(), s.addKeysControl(), s.checkFixIOS(), s } return __extends(i, e), i.prototype.checkFixIOS = function() { if (t.Constants.IOS_BUTTON_PATCH) { var e = void 0;
                (e = Ph2.UISystem.findObject("sound", this.ui)).y += 30, e.alignment.setLandscapeAlignment("TOP_RIGHT", -16.3, !0, -31.5, !0) } }, i.prototype.addTouchCallback = function() { t.Util.addTouchCallbackToButton("play", this.ui, this.pressContinueBtn, this), t.Util.addTouchCallbackToButton("sound", this.ui, this.switchAudio, this), t.Util.addTouchCallbackToButton("retry", this.ui, this.pressRestartBtn, this) }, i.prototype.addKeysControl = function() { this.keyStart = this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER) }, i.prototype.setButtonAudio = function(e) {!0 === e ? (t.Audios.enableAudio(this.game), this.btnAudio.setFrames("sound1.png", "sound1.png", "sound1_press.png", "sound1.png")) : (t.Audios.disableAudio(this.game), this.btnAudio.setFrames("sound2.png", "sound2.png", "sound2_press.png", "sound2.png")) }, i.prototype.switchAudio = function() { t.Audios.playSfx(this.game, "generic_button"); var e = this.controller.switchAudio();
            this.setButtonAudio(e) }, i.prototype.setSelectButton = function() { switch (this.selectSprite.visible = !0, t.Instances.controlButtonUI.actualButton) {
                case "none":
                    this.selectSprite.visible = !1; break;
                case "buttonPlay":
                    this.selectSprite.x = this.btnContinue.x, this.selectSprite.y = this.btnContinue.y, this.selectSprite.scale.set(.8, .8); break;
                case "buttonRestart":
                    this.selectSprite.x = this.btnRestart.x, this.selectSprite.y = this.btnRestart.y, this.selectSprite.scale.set(1, 1); break;
                case "buttonAudio":
                    this.selectSprite.x = this.btnAudio.x, this.selectSprite.y = this.btnAudio.y, this.selectSprite.scale.set(1, 1) } this.selectSprite.frameName = t.Instances.controlButtonUI.getHightLight() }, i.prototype.onSelectButton = function() { switch (t.Instances.controlButtonUI.actualButton) {
                case "none":
                case "buttonPlay":
                    this.pressContinueBtn(); break;
                case "buttonAudio":
                    this.switchAudio(); break;
                case "buttonRestart":
                    this.pressRestartBtn() } }, i.prototype.enableAllInput = function() { t.Util.enableTouch("play", this.ui), t.Util.enableTouch("sound", this.ui), t.Util.enableTouch("retry", this.ui), t.Instances.controlButtonUI.initControl("uiLevelCompleted"), this.setSelectButton(), t.Instances.controlButtonUI.onChangeButton.add(this.setSelectButton, this), this.keyStart.onDown.add(this.onSelectButton, this) }, i.prototype.disableAllInput = function() { t.Util.disableTouch("play", this.ui), t.Util.disableTouch("sound", this.ui), t.Util.disableTouch("retry", this.ui), t.Instances.controlButtonUI.onChangeButton.remove(this.setSelectButton, this), this.keyStart.onDown.removeAll(this) }, i.prototype.pressContinueBtn = function() { this.disableAllInput(), t.Audios.playSfx(this.game, "play_button"), this.hide(), this.controller.goToLevelSelect() }, i.prototype.pressRestartBtn = function() { t.Audios.playSfx(this.game, "generic_button"), this.disableAllInput(), this.hide(), this.controller.restartLevel() }, i.prototype.show = function() { t.Audios.playSfx(this.game, "popup"), this.animGroup.ph2Animations.play("stage_anim", 1, !1), this.visible = !0, this.enableAllInput() }, i.prototype.hide = function() { this.visible = !1 }, i.prototype.localization = function() { t.Instances.localization.localizeText("container/level", this.ui, String(this.level), !0); var e = Ph2.UISystem.findObject("container/title", this.ui);
            e.loadTexture("atlas_texts_debugging"), e.frameName = "ui_level_completed_text.png" }, i.prototype.pause = function() { this.animGroup.ph2Animations.pause("stage_anim") }, i.prototype.resume = function() { this.animGroup.ph2Animations.resume("stage_anim") }, i.prototype.resize = function() { this.setSelectButton() }, i }(Phaser.Group);
    t.UILevelCompleted = e }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e = function(e) {
        function i(i) { var n = e.call(this, i.game) || this; return n.controller = i, n.levelButtons = [], n.ui = n.game.add.ph2UI("ui_level_select", "ui_levels_select"), n.selectSprite = new Phaser.Sprite(n.game, 0, 0, "atlas_ui_main_menu", "hl_mid.png"), n.selectSprite.anchor.set(.5, .5), n.game.device.desktop || (n.selectSprite.visible = !1), n.levelSelectAnimation = n.game.add.ph2AnimationObject(0, 0, "stand_stage_fx", "ui_levels_select"), n.levelSelectAnimation.ph2Animations.play("stand_stage_anim", 1, !0), n.ui.addChild(n.levelSelectAnimation), n.ui.sendToBack(n.levelSelectAnimation), n.chargeAnimation = n.game.add.ph2AnimationObject(0, 0, "stage_select", "ui_levels_select"), n.chargeAnimation.visible = !1, n.add(n.selectSprite), n.add(n.ui), t.Instances.controlButtonUI.initControl("uiLevelSelect"), n.btnHome = Ph2.UISystem.findObject("back", n.ui), n.btnAudio = Ph2.UISystem.findObject("sound", n.ui), n.btnHome.loadTexture("ui_levels_select"), n.btnHome.setFrames("main.png", "main.png", "main_press.png", "main.png"), n.localization(), n.addTouchCallback(), n.addKeysControl(), n.disableAllInput(), n.setButtonAudio(t.Instances.dataManager.getAudio()), n.checkFixIOS(), n } return __extends(i, e), i.prototype.checkFixIOS = function() { t.Constants.IOS_BUTTON_PATCH && (this.btnAudio.y += 30, this.btnAudio.alignment.setLandscapeAlignment("BOTTOM_RIGHT", -9.6, !0, -526.5, !0), this.btnHome.y += 30, this.btnHome.alignment.setLandscapeAlignment("BOTTOM_LEFT", -7, !0, -526.5, !0)) }, i.prototype.init = function() { t.Instances.controlButtonUI.initControl("uiLevelSelect"), this.createLevelBtn(), t.Instances.controlButtonUI.onChangeButton.add(this.setSelectButton, this), this.setSelectButton() }, i.prototype.initAnimation = function() { this.enableAllInput(), t.Instances.controlButtonUI.addControl(this.game), t.Instances.dataManager.getNeedAnimLevelAnim() && (t.Instances.dataManager.getLevelCompelteded() < 9 && this.addAnimation(), t.Instances.dataManager.seeLevelUnlock()) }, i.prototype.addKeysControl = function() { this.keyStart = this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER), this.keyBack = this.game.input.keyboard.addKey(Phaser.Keyboard.ESC) }, i.prototype.setSelectButton = function() { switch (this.selectSprite.visible = !0, this.selectSprite.scale.set(1, 1), t.Instances.controlButtonUI.actualButton) {
                case "buttonBack":
                    this.selectSprite.scale.set(1.25, 1.25), this.selectSprite.x = this.btnHome.x, this.selectSprite.y = this.btnHome.y; break;
                case "buttonAudio":
                    this.selectSprite.x = this.btnAudio.x, this.selectSprite.y = this.btnAudio.y, this.selectSprite.scale.set(1, 1); break;
                case "none":
                    this.selectSprite.visible = !1; var e = t.Instances.dataManager.getLevelCompelteded(),
                        i = e < 0 ? 1 : e + 2;
                    i = 11 === i ? 10 : i, this.changeLevel(i - 1); break;
                default:
                    var n = parseInt(t.Instances.controlButtonUI.actualButton[t.Instances.controlButtonUI.actualButton.length - 1], 10);
                    0 === n && (n = 10); var s = Ph2.UISystem.findObject("stage_" + String(n), this.ui);
                    this.selectSprite.x = s.x, this.selectSprite.y = s.y, this.selectSprite.scale.set(1.2, 1.2), this.changeLevel(n - 1) } this.selectSprite.frameName = t.Instances.controlButtonUI.getHightLight() }, i.prototype.showFinalMessage = function() { this.levelSelectAnimation.visible = !1, this.levelSelectAnimation.ph2Animations.stop() }, i.prototype.endFinalMessage = function() { this.levelSelectAnimation.visible = !0, this.enableAllInput(), t.Instances.controlButtonUI.addControl(this.game), this.levelSelectAnimation.ph2Animations.play("lvl_loop") }, i.prototype.onSelectButton = function() { switch (t.Instances.controlButtonUI.actualButton) {
                case "buttonBack":
                    this.pressHomeBtn(); break;
                case "none":
                    this.startSelectLevel(); break;
                case "buttonAudio":
                    this.switchAudio(); break;
                default:
                    this.startSelectLevel() } }, i.prototype.addAnimation = function() { var e = Ph2.UISystem.findObject("stage_" + String(t.Instances.dataManager.getLevelCompelteded() + 2) + "/stage_fx_pivot", this.ui);
            this.animGroup = this.game.add.ph2AnimationObject(0, 0, "stage_fx", "atlas_ui_fx"); var i = this.animGroup.ph2Animations.play("stage_fx_anim", 1, !1),
                n = Ph2.UISystem.findObject("stage_" + String(t.Instances.dataManager.getLevelCompelteded() + 2) + "/level_base/character", this.ui),
                s = t.ConfigGame.levels[t.Instances.dataManager.getLevelCompelteded() + 1],
                o = t.VisualData.levelSelectIcons[s.character].key;
            n.frameName = o + "_2.png", i.onComplete.addOnce(this.completeUnlockAnim, this), t.Audios.playSfx(this.game, "level_unlocked"), e.addChild(this.animGroup) }, i.prototype.completeUnlockAnim = function() { Ph2.UISystem.findObject("stage_" + String(t.Instances.dataManager.getLevelCompelteded() + 2), this.ui);
            this.animGroup.visible = !1, this.animGroup.destroy(), this.animGroup = null; var e = Ph2.UISystem.findObject("stage_" + String(t.Instances.dataManager.getLevelCompelteded() + 2) + "/level_base/character", this.ui),
                i = t.ConfigGame.levels[t.Instances.dataManager.getLevelCompelteded() + 1],
                n = t.VisualData.levelSelectIcons[i.character].key;
            e.frameName = n + "_1.png", this.enableAllInput(), t.Instances.controlButtonUI.addControl(this.game) }, i.prototype.createLevelBtn = function() { var e, i, n = t.Instances.dataManager.getLevelCompelteded();
            this.levelCompleted = n; for (p = 0; p < 10; p++) { var s = t.ConfigGame.levels[p],
                    o = t.VisualData.levelSelectIcons[s.character].key;
                e = Ph2.UISystem.findObject("stage_" + String(p + 1) + "/level_base", this.ui), i = Ph2.UISystem.findObject("stage_" + String(p + 1) + "/level_base/character", this.ui), Ph2.UISystem.findObject("stage_" + String(p + 1) + "/level_base/number_base/number", this.ui).setText(String(p + 1)), p <= n ? i.frameName = o + "_1.png" : p <= n + 1 ? t.Instances.dataManager.getNeedAnimLevelAnim() && t.Instances.dataManager.getLevelCompelteded() < 9 ? i.frameName = o + "_2.png" : i.frameName = o + "_1.png" : i.frameName = o + "_2.png", this.levelButtons.push(e) } t.Instances.controlButtonUI.setButton("none"); var a;
            a = n > -1 ? n < 2 ? n + 1 : 2 : -1; var r, h, l, c, u = n < 0 ? 1 : n + 2;
            u = 11 === u ? 10 : u; for (var p = 0; p < u; p++) r = 0 === p ? "buttonBack" : p === a ? "buttonAudio" : p > 2 && p < 6 ? "buttonlvl" + (p - 2) : p > 6 ? "buttonlvl" + (p - 3) : 6 === p ? "buttonlvl" + (p - 3) : null, c = p <= n && p + 2 <= 10 ? "buttonlvl" + (p + 2) : null, l = p - 1 >= 0 ? "buttonlvl" + p : null, h = n > 1 && p < 7 ? (p < 3 || 6 === p) && p + 3 <= n + 1 ? "buttonlvl" + (p + 4) : p > 2 && p < 6 && p + 4 <= n + 1 ? "buttonlvl" + (p + 5) : null : null, t.Instances.controlButtonUI.setButtonFlow("buttonlvl" + (p + 1), "select.png", r, h, l, c);
            t.Instances.controlButtonUI.setButtonFlow("none", "hl_mid.png", "buttonlvl" + u, "buttonlvl" + u, "buttonlvl" + u, "buttonlvl" + u), n >= 3 ? t.Instances.controlButtonUI.setButtonFlow("buttonAudio", "hl_mid.png", null, "buttonlvl3", "buttonBack", null) : n >= -1 && t.Instances.controlButtonUI.setButtonFlow("buttonAudio", "hl_mid.png", null, "buttonlvl" + (n + 2), "buttonBack", null) }, i.prototype.addTouchCallback = function() { t.Util.addTouchCallbackToButton("back", this.ui, this.pressHomeBtn, this), t.Util.addTouchCallbackToButton("sound", this.ui, this.switchAudio, this); for (var e = this, i = this, n = 0; n < 10; n++) ! function(n) { t.Util.addTouchCallbackToButton("stage_" + String(n + 1) + "/level_base", i.ui, function() { e.selectLevel(n) }, i) }(n) }, i.prototype.setButtonAudio = function(e) {!0 === e ? (t.Audios.enableAudio(this.game), this.btnAudio.setFrames("sound1.png", "sound1.png", "sound1_press.png", "sound1.png")) : (t.Audios.disableAudio(this.game), this.btnAudio.setFrames("sound2.png", "sound2.png", "sound2_press.png", "sound2.png")) }, i.prototype.switchAudio = function() { t.Audios.playSfx(this.game, "generic_button"); var e = this.controller.switchAudio();
            this.setButtonAudio(e) }, i.prototype.enableAllInput = function() { t.Util.enableTouch("back", this.ui), t.Util.enableTouch("sound", this.ui), this.keyStart.onDown.add(this.onSelectButton, this), this.keyBack.onDown.add(this.pressHomeBtn, this); for (var e = 0; e < this.levelButtons.length; e++) this.levelButtons[e].inputEnabled = !0 }, i.prototype.disableAllInput = function() { t.Util.enableTouch("back", this.ui), t.Util.enableTouch("sound", this.ui), this.keyStart.onDown.remove(this.onSelectButton, this), this.keyBack.onDown.remove(this.pressHomeBtn, this); for (var e = 0; e < this.levelButtons.length; e++) this.levelButtons[e].inputEnabled = !1 }, i.prototype.startSelectLevel = function() { this.selectLevel(this.selectLevelIndex) }, i.prototype.changeLevel = function(t) { var e = this.selectLevelIndex;
            this.selectLevelIndex = t, this.changeSelectLevel(e, this.selectLevelIndex) }, i.prototype.playLevel = function(t, e, i) { this.disableAllInput(), this.controller.selectLevel(i) }, i.prototype.changeSelectLevel = function(t, e) { Ph2.UISystem.findObject("stage_" + String(e + 1) + "/stand_stage_pivot", this.ui).addChild(this.levelSelectAnimation) }, i.prototype.selectLevel = function(e) { if (!(e > t.Instances.dataManager.getLevelCompelteded() + 1)) { t.Audios.playSfx(this.game, "generic_button"), this.disableAllInput(), this.changeLevel(e);
                Ph2.UISystem.findObject("stage_" + String(e + 1) + "/level_base/stage_select_pivot", this.ui).addChild(this.chargeAnimation), this.chargeAnimation.visible = !0, this.chargeAnimation.ph2Animations.play("stage_select_anim").onComplete.addOnce(this.playLevel, this, 0, e) } }, i.prototype.pressHomeBtn = function() { t.Audios.playSfx(this.game, "generic_button"), this.disableAllInput(), this.controller.pressHome() }, i.prototype.localization = function() { var t = Ph2.UISystem.findObject("title/text", this.ui);
            t.loadTexture("atlas_texts_debugging"), t.frameName = "ui_level_select_text.png" }, i.prototype.onBlur = function() { this.animGroup && this.animGroup.ph2Animations.pause(), this.chargeAnimation.ph2Animations.pause("charge_play"), this.levelSelectAnimation.ph2Animations.pause("lvl_loop") }, i.prototype.onFocus = function() { this.animGroup && this.animGroup.ph2Animations.resume(), this.chargeAnimation.ph2Animations.resume("charge_play"), this.levelSelectAnimation.ph2Animations.resume("lvl_loop") }, i.prototype.resize = function() { this.setSelectButton() }, i.prototype.destroy = function() { this.game.onBlur.remove(this.onBlur, this), this.game.onFocus.remove(this.onFocus, this), t.Instances.controlButtonUI.removeControl(this.game), t.Instances.controlButtonUI.onChangeButton.remove(this.setSelectButton, this), this.chargeAnimation.ph2Animations.stop(), this.levelSelectAnimation.ph2Animations.stop(), this.chargeAnimation = null, this.levelSelectAnimation = null, this.keyStart.onDown.remove(this.onSelectButton, this), this.keyBack.onDown.remove(this.pressHomeBtn, this), e.prototype.destroy.call(this) }, i }(Phaser.Group);
    t.UILevelSelect = e }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e = function(e) {
        function i(i) { var n = e.call(this, i.game) || this; return n.controller = i, n.ui = n.game.add.ph2UI("ui_pause", "atlas_ui_popups"), n.btnAudio = Ph2.UISystem.findObject("sound", n.ui), n.btnPlay = Ph2.UISystem.findObject("play", n.ui), n.btnExit = Ph2.UISystem.findObject("home", n.ui), n.btnTutorial = Ph2.UISystem.findObject("tutorial", n.ui), n.btnReplay = Ph2.UISystem.findObject("retry", n.ui), n.btnExit.loadTexture("atlas_comic2"), n.btnExit.setFrames("main.png", "main.png", " main_press.png", "main.png"), n.selectSprite = new Phaser.Sprite(n.game, 0, 0, "atlas_ui_main_menu", "hl_mid.png"), n.selectSprite.anchor.set(.5, .5), n.game.device.desktop || (n.selectSprite.visible = !1), n.lastButton = "none", n.add(n.selectSprite), n.add(n.ui), n.addTouchCallback(), n.addKeysControl(), n.setButtonAudio(t.Instances.dataManager.getAudio()), n.localization(), n.hide(), n.checkFixIOS(), n } return __extends(i, e), i.prototype.checkFixIOS = function() { if (t.Constants.IOS_BUTTON_PATCH) { var e = void 0;
                (e = Ph2.UISystem.findObject("home", this.ui)).y += 30, e.alignment.setLandscapeAlignment("TOP_LEFT", -16.2, !0, -33.2, !0), (e = Ph2.UISystem.findObject("sound", this.ui)).y += 30, e.alignment.setLandscapeAlignment("TOP_RIGHT", -16.2, !0, -31.5, !0) } }, i.prototype.addTouchCallback = function() { t.Util.addTouchCallbackToButton("play", this.ui, this.pressResumeBtn, this), t.Util.addTouchCallbackToButton("sound", this.ui, this.switchAudio, this), t.Util.addTouchCallbackToButton("home", this.ui, this.pressExitBtn, this), t.Util.addTouchCallbackToButton("retry", this.ui, this.pressRestartBtn, this), t.Util.addTouchCallbackToButton("tutorial", this.ui, this.pressHowToPlayBtn, this) }, i.prototype.addKeysControl = function() { this.keyStart = this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER), this.keyHome = this.game.input.keyboard.addKey(Phaser.Keyboard.ESC) }, i.prototype.setSelectButton = function() { switch (this.selectSprite.visible = !0, t.Instances.controlButtonUI.actualButton) {
                case "none":
                    this.selectSprite.visible = !1; break;
                case "buttonPlay":
                    this.selectSprite.x = this.btnPlay.x, this.selectSprite.y = this.btnPlay.y, this.selectSprite.scale.set(1, 1); break;
                case "buttonHome":
                    this.selectSprite.x = this.btnExit.x, this.selectSprite.y = this.btnExit.y, this.selectSprite.scale.set(1, 1); break;
                case "buttonTutorial":
                    this.selectSprite.x = this.btnTutorial.x, this.selectSprite.y = this.btnTutorial.y, this.selectSprite.scale.set(1, 1); break;
                case "buttonRestart":
                    this.selectSprite.x = this.btnReplay.x, this.selectSprite.y = this.btnReplay.y, this.selectSprite.scale.set(1, 1); break;
                case "buttonAudio":
                    this.selectSprite.x = this.btnAudio.x, this.selectSprite.y = this.btnAudio.y, this.selectSprite.scale.set(1, 1) } this.selectSprite.frameName = t.Instances.controlButtonUI.getHightLight() }, i.prototype.onSelectButton = function() { switch (t.Instances.controlButtonUI.actualButton) {
                case "none":
                case "buttonPlay":
                    this.pressResumeBtn(); break;
                case "buttonAudio":
                    this.switchAudio(); break;
                case "buttonHome":
                    this.pressExitBtn(); break;
                case "buttonTutorial":
                    this.pressHowToPlayBtn(); break;
                case "buttonRestart":
                    this.pressRestartBtn() } }, i.prototype.show = function() { t.Audios.playSfx(this.game, "popup"), t.Instances.controlButtonUI.initControl("uiPause"), this.setSelectButton(), this.lastButton = "none", this.enableAllInput(), this.visible = !0 }, i.prototype.hide = function() { this.lastButton = "none", this.disableAllInput(), this.visible = !1 }, i.prototype.setButtonAudio = function(e) {!0 === e ? (t.Audios.enableAudio(this.game), this.btnAudio.setFrames("sound1.png", "sound1.png", "sound1_press.png", "sound1.png")) : (t.Audios.disableAudio(this.game), this.btnAudio.setFrames("sound2.png", "sound2.png", "sound2_press.png", "sound2.png")) }, i.prototype.switchAudio = function() { t.Audios.playSfx(this.game, "generic_button"); var e = this.controller.switchAudio();
            this.setButtonAudio(e) }, i.prototype.pressResumeBtn = function() { t.Audios.playSfx(this.game, "generic_button"), this.hide(), this.controller.pressResume() }, i.prototype.pressRestartBtn = function() { t.Audios.playSfx(this.game, "generic_button"), this.disableAllInput(), this.controller.pressRestart() }, i.prototype.pressExitBtn = function() { t.Audios.playSfx(this.game, "generic_button"), this.disableAllInput(), this.controller.pressExit() }, i.prototype.pressHowToPlayBtn = function() { t.Audios.playSfx(this.game, "generic_button"), this.disableAllInput(), this.controller.pressHowToPlay() }, i.prototype.enableAllInput = function() { t.Util.enableTouch("play", this.ui), t.Util.enableTouch("sound", this.ui), t.Util.enableTouch("home", this.ui), t.Util.enableTouch("retry", this.ui), t.Util.enableTouch("tutorial", this.ui), t.Instances.controlButtonUI.initControl("uiPause"), t.Instances.controlButtonUI.setButton(this.lastButton), t.Instances.controlButtonUI.onChangeButton.add(this.setSelectButton, this), this.keyStart.onDown.add(this.onSelectButton, this), this.keyHome.onDown.add(this.pressExitBtn, this) }, i.prototype.disableAllInput = function() { t.Util.disableTouch("play", this.ui), t.Util.disableTouch("sound", this.ui), t.Util.disableTouch("home", this.ui), t.Util.disableTouch("retry", this.ui), t.Util.disableTouch("tutorial", this.ui), this.lastButton = t.Instances.controlButtonUI.actualButton, t.Instances.controlButtonUI.onChangeButton.remove(this.setSelectButton, this), this.keyStart.onDown.removeAll(this), this.keyHome.onDown.removeAll(this) }, i.prototype.localization = function() { var t = Ph2.UISystem.findObject("container/title", this.ui);
            t.loadTexture("atlas_texts_debugging"), t.frameName = "ui_pause_text.png" }, i.prototype.resize = function() { this.setSelectButton() }, i }(Phaser.Group);
    t.UIPause = e }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e;! function(t) { t[t.separate = 0] = "separate", t[t.fix = 1] = "fix", t[t.combat1 = 2] = "combat1", t[t.combat2 = 3] = "combat2" }(e = t.TutorialID || (t.TutorialID = {})); var i;! function(t) { t[t.tutorial = 0] = "tutorial", t[t.howToPlay = 1] = "howToPlay" }(i = t.TutorialType || (t.TutorialType = {})); var n = function(n) {
        function s(t, e) { var i = n.call(this, t.game) || this;
            i.controller = t, i.ui = i.game.add.ph2UI("ui_tutorial_pause", "ui_tutorial"), i.selectSprite = new Phaser.Sprite(i.game, 0, 0, "atlas_ui_main_menu", "hl_big.png"), i.selectSprite.anchor.set(.5, .5), i.game.device.desktop || (i.selectSprite.visible = !1), i.buttonArrowLeft = Ph2.UISystem.findObject("arrows/left", i.ui), i.buttonArrowRight = Ph2.UISystem.findObject("arrows/right", i.ui), i.arrowContainer = Ph2.UISystem.findObject("arrows", i.ui), i.spriteCircles = [], i.spriteCirclesSelect = []; var s; return s = Ph2.UISystem.findObject("container_pause/circle1", i.ui), i.spriteCircles.push(s), s = Ph2.UISystem.findObject("container_pause/circle2", i.ui), i.spriteCircles.push(s), s = Ph2.UISystem.findObject("container_pause/circle3", i.ui), i.spriteCircles.push(s), s = Ph2.UISystem.findObject("container_pause/circle1/circle", i.ui), i.spriteCirclesSelect.push(s), s = Ph2.UISystem.findObject("container_pause/circle2/circle", i.ui), i.spriteCirclesSelect.push(s), s = Ph2.UISystem.findObject("container_pause/circle3/circle", i.ui), i.spriteCirclesSelect.push(s), i.tutorialID = e, i.buttonClose = Ph2.UISystem.findObject("back", i.ui), i.resize(), i.add(i.selectSprite), i.add(i.ui), i.setInitUI(), i.addKeysControl(), i.hide(), i.addTouchCallback(), i } return __extends(s, n), s.prototype.addTouchCallback = function() { t.Util.addTouchCallbackToButton("back", this.ui, this.close, this), t.Util.addTouchCallbackToButton("arrows/left/arrow_left", this.ui, this.moveLeft, this), t.Util.addTouchCallbackToButton("arrows/right/arrow_right", this.ui, this.moveRight, this), this.spriteCircles[0].events.onInputDown.add(this.setPageCircle, this, 0, 0), this.spriteCircles[1].events.onInputDown.add(this.setPageCircle, this, 0, 1), this.spriteCircles[2].events.onInputDown.add(this.setPageCircle, this, 0, 2) }, s.prototype.setPageCircle = function(t, i, n) { this.tutorialID === e.separate ? this.setPageSeparate(n) : this.setPageCombat(n) }, s.prototype.addKeysControl = function() { this.keyStart = this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER), this.keyHome = this.game.input.keyboard.addKey(Phaser.Keyboard.ESC), this.keyLeft = this.game.input.keyboard.addKey(Phaser.Keyboard.LEFT), this.keyRight = this.game.input.keyboard.addKey(Phaser.Keyboard.RIGHT) }, s.prototype.setInitUI = function() { switch (this.tutorialID) {
                case e.fix:
                    this.pages = 1; for (var t = 0, i = this.spriteCircles; t < i.length; t++) i[t].visible = !1;
                    this.arrowContainer.visible = !1, this.addAnimation(); break;
                case e.separate:
                    this.pages = 2, this.addAnimation(); break;
                case e.combat1:
                    this.pages = 3, this.addAnimation() } }, s.prototype.addAnimation = function() { var t, i; switch (this.animsTutorial = [], this.tutorialID) {
                case e.fix:
                    i = this.game.add.ph2AnimationObject(0, 0, "fix_tutorial", "ui_tutorial"), (t = Ph2.UISystem.findObject("container_pause/tutorial_pivot", this.ui)).addChild(i), this.animsTutorial.push(i); break;
                case e.separate:
                    i = this.game.add.ph2AnimationObject(0, 0, "select_tutorial", "ui_tutorial"), (t = Ph2.UISystem.findObject("container_pause/tutorial_pivot", this.ui)).addChild(i), this.animsTutorial.push(i); break;
                case e.combat1:
                    i = this.game.add.ph2AnimationObject(0, 0, "gameplay_tutorial", "ui_tutorial"), (t = Ph2.UISystem.findObject("container_pause/tutorial_pivot", this.ui)).addChild(i), this.animsTutorial.push(i), i = this.game.add.ph2AnimationObject(0, 0, "gameplay_powerup_tutorial", "ui_tutorial"), t.addChild(i), this.animsTutorial.push(i) } }, s.prototype.showHowToPlay = function() { switch (t.Audios.playSfx(this.game, "popup"), this.keyStart.onDown.add(this.close, this), this.keyHome.onDown.add(this.close, this), this.visible = !0, this.tutorialType = i.howToPlay, this.enableAllInput(), this.tutorialID) {
                case e.fix:
                    var n = this.game.device.desktop ? "fix_tutorial_anim2" : "fix_tutorial_anim2_mobile";
                    this.animsTutorial[0].ph2Animations.play(n, 1, !0); break;
                case e.separate:
                    this.keyLeft.onDown.remove(this.moveLeft, this), this.keyRight.onDown.remove(this.moveRight, this), this.setPageSeparate(0); break;
                case e.combat1:
                    this.keyLeft.onDown.remove(this.moveLeft, this), this.keyRight.onDown.remove(this.moveRight, this), this.setPageCombat(0) } }, s.prototype.setPageCombat = function(t) { switch (this.currentPage = t, this.keyLeft.onDown.remove(this.moveLeft, this), this.keyRight.onDown.remove(this.moveRight, this), t) {
                case 0:
                    this.animsTutorial[0].ph2Animations.play("gameplay_tutorial_anim2", 1, !0), this.animsTutorial[1].ph2Animations.stop(), this.animsTutorial[0].visible = !0, this.animsTutorial[1].visible = !1, this.buttonArrowLeft.alpha = 0, this.buttonArrowRight.alpha = 1, this.spriteCirclesSelect[0].visible = !0, this.spriteCirclesSelect[1].visible = !1, this.spriteCirclesSelect[2].visible = !1, this.spriteCircles[0].inputEnabled = !1, this.spriteCircles[1].inputEnabled = !0, this.spriteCircles[2].inputEnabled = !0, this.keyRight.onDown.add(this.moveRight, this); break;
                case 1:
                    var e = this.game.device.desktop ? "gameplay_tutorial_anim" : "gameplay_tutorial_anim_mobile";
                    this.animsTutorial[0].ph2Animations.play(e, 1, !0), this.animsTutorial[1].ph2Animations.stop(), this.animsTutorial[0].visible = !0, this.animsTutorial[1].visible = !1, this.buttonArrowLeft.alpha = 1, this.buttonArrowRight.alpha = 0, this.spriteCirclesSelect[0].visible = !1, this.spriteCirclesSelect[1].visible = !0, this.spriteCirclesSelect[2].visible = !1, this.spriteCircles[0].inputEnabled = !0, this.spriteCircles[1].inputEnabled = !1, this.spriteCircles[2].inputEnabled = !0, this.keyLeft.onDown.add(this.moveLeft, this), this.keyRight.onDown.add(this.moveRight, this); break;
                case 2:
                    this.animsTutorial[0].ph2Animations.stop(), this.animsTutorial[1].ph2Animations.play("gameplay_tutorial_powerupl_anim", 1, !0), this.animsTutorial[0].visible = !1, this.animsTutorial[1].visible = !0, this.buttonArrowRight.alpha = 0, this.buttonArrowLeft.alpha = 1, this.spriteCirclesSelect[0].visible = !1, this.spriteCirclesSelect[1].visible = !1, this.spriteCirclesSelect[2].visible = !0, this.spriteCircles[0].inputEnabled = !0, this.spriteCircles[1].inputEnabled = !0, this.spriteCircles[2].inputEnabled = !1, this.keyLeft.onDown.add(this.moveLeft, this) } }, s.prototype.setPageSeparate = function(t) { this.currentPage = t, this.keyLeft.onDown.remove(this.moveLeft, this), this.keyRight.onDown.remove(this.moveRight, this), this.spriteCirclesSelect[2].visible = !1, this.spriteCircles[2].visible = !1; var e; switch (t) {
                case 0:
                    e = this.game.device.desktop ? "select_tutorial_anim" : "select_tutorial_anim_mobile", this.animsTutorial[0].ph2Animations.play(e, 1, !0), this.buttonArrowLeft.alpha = 0, this.buttonArrowRight.alpha = 1, this.spriteCirclesSelect[0].visible = !0, this.spriteCirclesSelect[1].visible = !1, this.spriteCircles[0].inputEnabled = !1, this.spriteCircles[1].inputEnabled = !0, this.keyRight.onDown.add(this.moveRight, this); break;
                case 1:
                    e = this.game.device.desktop ? "select_tutorial_anim2" : "select_tutorial_anim2_mobile", this.animsTutorial[0].ph2Animations.play(e, 1, !0), this.buttonArrowLeft.alpha = 1, this.buttonArrowRight.alpha = 0, this.spriteCirclesSelect[0].visible = !1, this.spriteCirclesSelect[1].visible = !0, this.spriteCircles[0].inputEnabled = !0, this.spriteCircles[1].inputEnabled = !1, this.keyLeft.onDown.add(this.moveLeft, this) } }, s.prototype.moveLeft = function() { 0 !== this.currentPage && (t.Audios.playSfx(this.game, "generic_button"), this.tutorialID === e.separate ? this.setPageSeparate(this.currentPage - 1) : this.setPageCombat(this.currentPage - 1)) }, s.prototype.moveRight = function() { this.currentPage + 1 !== this.pages && (t.Audios.playSfx(this.game, "generic_button"), this.tutorialID === e.separate ? this.setPageSeparate(this.currentPage + 1) : this.setPageCombat(this.currentPage + 1)) }, s.prototype.close = function() { switch (t.Audios.playSfx(this.game, "generic_button"), this.keyStart.onDown.remove(this.close, this), this.keyHome.onDown.remove(this.close, this), this.keyLeft.onDown.remove(this.moveLeft, this), this.keyRight.onDown.remove(this.moveRight, this), this.tutorialType) {
                case i.howToPlay:
                    this.animsTutorial[0].ph2Animations.stop(), this.hide(), this.controller.closeHowToPlay(); break;
                case i.tutorial:
                    this.animsTutorial[0].ph2Animations.stop(), this.hide(), this.controller.closeTutorial() } }, s.prototype.hide = function() { this.disableAllInput(), this.visible = !1 }, s.prototype.enableAllInput = function() { t.Util.enableTouch("back", this.ui) }, s.prototype.disableAllInput = function() { t.Util.disableTouch("back", this.ui) }, s.prototype.pause = function() { for (var t = 0, e = this.animsTutorial; t < e.length; t++) e[t].ph2Animations.pause() }, s.prototype.resume = function() { for (var t = 0, e = this.animsTutorial; t < e.length; t++) e[t].ph2Animations.resume() }, s.prototype.resize = function() { this.selectSprite.x = this.buttonClose.x, this.selectSprite.y = this.buttonClose.y }, s.prototype.destroy = function() { for (var t = 0, e = this.animsTutorial; t < e.length; t++) { var i = e[t];
                i.ph2Animations.stop(), i.destroy() } this.animsTutorial = [], n.prototype.destroy.call(this) }, s }(Phaser.Group);
    t.UITutorial = n }(DebuggingGame || (DebuggingGame = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    DebuggingGame;
! function(t) { var e = function(e) {
        function i(t, i) { var n = e.call(this, t.game) || this; return n.controller = t, n.ui = n.game.add.ph2UI("ui_tutorial_ingame", "ui_tutorial"), n.selectSprite = new Phaser.Sprite(n.game, 0, 0, "atlas_ui_main_menu", "hl_big.png"), n.selectSprite.anchor.set(.5, .5), n.game.device.desktop || (n.selectSprite.visible = !1), n.currentPage = 0, n.tutorialID = i, n.buttonClose = Ph2.UISystem.findObject("back", n.ui), n.textTutorial = Ph2.UISystem.findObject("container_pause/text", n.ui), n.textTutorial.loadTexture("atlas_texts_debugging"), n.resize(), n.add(n.selectSprite), n.add(n.ui), n.setInitUI(), n.addKeysControl(), n.hide(), n.addTouchCallback(), n.checkFixIOS(), n } return __extends(i, e), i.prototype.checkFixIOS = function() { if (t.Constants.IOS_BUTTON_PATCH) { var e = Ph2.UISystem.findObject("back", this.ui);
                e.y -= 20, e.alignment.setLandscapeAlignment("TOP_CENTER", 0, !0, -493, !0) } }, i.prototype.addTouchCallback = function() { t.Util.addTouchCallbackToButton("back", this.ui, this.nextPage, this) }, i.prototype.addKeysControl = function() { this.keyStart = this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER), this.keyHome = this.game.input.keyboard.addKey(Phaser.Keyboard.ESC) }, i.prototype.setInitUI = function() { switch (this.tutorialID) {
                case t.TutorialID.fix:
                    this.pages = 1, this.textTutorial.frameName = "ui_tutorial4_text.png", this.addAnimation(); break;
                case t.TutorialID.separate:
                    this.pages = 2, this.addAnimation(); break;
                case t.TutorialID.combat1:
                    this.pages = 3, this.addAnimation() } }, i.prototype.addAnimation = function() { var e, i; switch (this.animsTutorial = [], this.tutorialID) {
                case t.TutorialID.fix:
                    i = this.game.add.ph2AnimationObject(0, 0, "fix_tutorial", "ui_tutorial"), (e = Ph2.UISystem.findObject("container_pause/tutorial_pivot", this.ui)).addChild(i), this.animsTutorial.push(i); break;
                case t.TutorialID.separate:
                    i = this.game.add.ph2AnimationObject(0, 0, "select_tutorial", "ui_tutorial"), (e = Ph2.UISystem.findObject("container_pause/tutorial_pivot", this.ui)).addChild(i), this.animsTutorial.push(i); break;
                case t.TutorialID.combat1:
                    i = this.game.add.ph2AnimationObject(0, 0, "gameplay_tutorial", "ui_tutorial"), (e = Ph2.UISystem.findObject("container_pause/tutorial_pivot", this.ui)).addChild(i), this.animsTutorial.push(i), i = this.game.add.ph2AnimationObject(0, 0, "gameplay_powerup_tutorial", "ui_tutorial"), e.addChild(i), this.animsTutorial.push(i) } }, i.prototype.showTutorial = function() { switch (t.Audios.playSfx(this.game, "popup"), this.keyStart.onDown.add(this.nextPage, this), this.keyHome.onDown.add(this.nextPage, this), this.visible = !0, this.tutorialType = t.TutorialType.tutorial, this.enableAllInput(), this.tutorialID) {
                case t.TutorialID.fix:
                    var e = this.game.device.desktop ? "fix_tutorial_anim2" : "fix_tutorial_anim2_mobile";
                    this.animsTutorial[0].ph2Animations.play(e, 1, !0); break;
                case t.TutorialID.separate:
                    this.setPageSeparate(0); break;
                case t.TutorialID.combat1:
                    this.setPageCombat(0) } }, i.prototype.setPageCombat = function(t) { switch (this.currentPage = t, t) {
                case 0:
                    this.textTutorial.frameName = "ui_tutorial5_text.png", this.animsTutorial[0].ph2Animations.play("gameplay_tutorial_anim2", 1, !0), this.animsTutorial[1].ph2Animations.stop(), this.animsTutorial[0].visible = !0, this.animsTutorial[1].visible = !1; break;
                case 1:
                    this.textTutorial.frameName = "ui_tutorial6_text2.png"; var e = this.game.device.desktop ? "gameplay_tutorial_anim" : "gameplay_tutorial_anim_mobile";
                    this.animsTutorial[0].ph2Animations.play(e, 1, !0), this.animsTutorial[1].ph2Animations.stop(), this.animsTutorial[0].visible = !0, this.animsTutorial[1].visible = !1; break;
                case 2:
                    this.textTutorial.frameName = "ui_tutorial7_text.png", this.animsTutorial[0].ph2Animations.stop(), this.animsTutorial[1].ph2Animations.play("gameplay_tutorial_powerupl_anim", 1, !0), this.animsTutorial[0].visible = !1, this.animsTutorial[1].visible = !0 } }, i.prototype.setPageSeparate = function(t) { this.currentPage = t; var e; switch (t) {
                case 0:
                    this.textTutorial.frameName = "ui_tutorial1_text.png", e = this.game.device.desktop ? "select_tutorial_anim" : "select_tutorial_anim_mobile", this.animsTutorial[0].ph2Animations.play(e, 1, !0); break;
                case 1:
                    this.textTutorial.frameName = "ui_tutorial2_text.png", e = this.game.device.desktop ? "select_tutorial_anim2" : "select_tutorial_anim2_mobile", this.animsTutorial[0].ph2Animations.play(e, 1, !0) } }, i.prototype.moveLeft = function() { t.Audios.playSfx(this.game, "generic_button"), this.setPageCombat(0) }, i.prototype.moveRight = function() { t.Audios.playSfx(this.game, "generic_button"), this.setPageCombat(1) }, i.prototype.nextPage = function() { t.Audios.playSfx(this.game, "generic_button"), this.currentPage + 1 < this.pages ? this.tutorialID === t.TutorialID.separate ? this.setPageSeparate(this.currentPage + 1) : this.setPageCombat(this.currentPage + 1) : this.close() }, i.prototype.close = function() { switch (t.Audios.playSfx(this.game, "generic_button"), this.keyStart.onDown.remove(this.nextPage, this), this.keyHome.onDown.remove(this.nextPage, this), this.tutorialType) {
                case t.TutorialType.howToPlay:
                    this.animsTutorial[0].ph2Animations.stop(), this.hide(), this.controller.closeHowToPlay(); break;
                case t.TutorialType.tutorial:
                    this.animsTutorial[0].ph2Animations.stop(), this.hide(), this.controller.closeTutorial() } }, i.prototype.hide = function() { this.disableAllInput(), this.visible = !1 }, i.prototype.enableAllInput = function() { t.Util.enableTouch("back", this.ui) }, i.prototype.disableAllInput = function() { t.Util.disableTouch("back", this.ui) }, i.prototype.pause = function() { for (var t = 0, e = this.animsTutorial; t < e.length; t++) e[t].ph2Animations.pause() }, i.prototype.resume = function() { for (var t = 0, e = this.animsTutorial; t < e.length; t++) e[t].ph2Animations.resume() }, i.prototype.resize = function() { this.selectSprite.x = this.buttonClose.x, this.selectSprite.y = this.buttonClose.y }, i.prototype.destroy = function() { for (var t = 0, i = this.animsTutorial; t < i.length; t++) { var n = i[t];
                n.ph2Animations.stop(), n.destroy() } this.animsTutorial = [], e.prototype.destroy.call(this) }, i }(Phaser.Group);
    t.UITutorialGame = e }(DebuggingGame || (DebuggingGame = {}));
var DebuggingGame;
! function(t) { var e;! function(t) { t[t.menu = 0] = "menu", t[t.gp1 = 1] = "gp1", t[t.gp2 = 2] = "gp2" }(e = t.MUSIC || (t.MUSIC = {})); var i = function() {
        function i() {} return i.loadAudioSprite = function(t, e) { for (var n = t.cache.getJSON(e), s = n.urls.length, o = [], a = 0; a < s; a++) o.push("debugging/assets/audio/" + n.urls[a]);
            i.audioSprite = new Howl({ src: o, preload: !0, sprite: n.sprite }), t.ph2AudioManager.setAudioEffectsFile(i.audioSprite) }, i.playMusic = function(n, s) { switch (s) {
                case e.menu:
                    n.ph2AudioManager.switchMusic(i.music[e.menu]), i.actualMusic = e.menu; break;
                case e.gp1:
                    n.ph2AudioManager.switchMusic(i.music[e.gp1]), i.actualMusic = e.gp1; break;
                case e.gp2:
                    n.ph2AudioManager.switchMusic(i.music[e.gp2]), i.actualMusic = e.gp2 }!1 === t.Instances.dataManager.getAudio() && this.disableAudio(n) }, i.playSfx = function(t, e) { var n = t.ph2AudioManager.playEffect(e, !1);
            i.addSoundPlaying(n) }, i.addSoundPlaying = function(t) { null !== t && (i.sfxPlaying.push(t), Howler._howls[3].on("end", function() { i.removeSoundPlaying(t) }, t)) }, i.removeSoundPlaying = function(t) { i.sfxPlaying.splice(i.sfxPlaying.indexOf(t), 1) }, i.playChangeSpot = function(t) { var e = t.ph2AudioManager.playEffect(i.audiosChangeSpot[i.indexChangeSpot], !1);
            i.addSoundPlaying(e), i.indexChangeSpot = i.indexChangeSpot + 1 < i.audiosChangeSpot.length ? i.indexChangeSpot + 1 : 0 }, i.playDestroyEnemy = function(t) { var e = t.ph2AudioManager.playEffect(i.audiosDestroyEnemy[i.indexDestroyEnemy], !1);
            i.addSoundPlaying(e), i.indexDestroyEnemy = i.indexDestroyEnemy + 1 < i.audiosDestroyEnemy.length ? i.indexDestroyEnemy + 1 : 0 }, i.playShotPlayer = function(t) { var e = t.ph2AudioManager.playEffect(i.audiosShotPlayer[i.indexShotPlayer], !1);
            i.addSoundPlaying(e), i.indexShotPlayer = i.indexShotPlayer + 1 < i.audiosShotPlayer.length ? i.indexShotPlayer + 1 : 0 }, i.playSfxComic = function(t) { var e = t.ph2AudioManager.playEffect(i.audiosComic[i.indexComic], !1);
            i.addSoundPlaying(e), i.indexComic = 0 === i.indexComic ? 1 : 0 }, i.resumeAllSfx = function() { for (var t = 0, e = i.sfxPlaying.length; t < e; t++) Howler._howls[3].play(i.sfxPlaying[t]) }, i.pauseAllSfx = function() { for (var t = 0, e = i.sfxPlaying.length; t < e; t++) Howler._howls[3].pause(i.sfxPlaying[t]) }, i.disableAudio = function(t) { t.ph2AudioManager.getMusicEnabled() && (t.ph2AudioManager.switchMusicState(), t.ph2AudioManager.switchSfxState(), t.ph2AudioManager.stopMusic()) }, i.enableAudio = function(t) { t.ph2AudioManager.getMusicEnabled() || (t.ph2AudioManager.switchMusicState(), t.ph2AudioManager.switchSfxState(), t.ph2AudioManager.switchMusic(i.music[i.actualMusic])) }, i.onBlur = function(t) { t.ph2AudioManager.pauseMusic(), i.pauseAllSfx() }, i.onFocus = function(t) { t.ph2AudioManager.resumeMusic(), i.resumeAllSfx() }, i.music = [new Howl({ src: ["debugging/assets/audio/menu.ogg", "debugging/assets/audio/menu.mp3"], preload: !0, loop: !0, volume: 1 }), new Howl({ src: ["debugging/assets/audio/gp1.ogg", "debugging/assets/audio/gp1.mp3"], preload: !0, loop: !0, volume: 1 }), new Howl({ src: ["debugging/assets/audio/gp2.ogg", "debugging/assets/audio/gp2.mp3"], preload: !0, loop: !0, volume: 1 })], i.sfxPlaying = [], i.audiosChangeSpot = ["character_move_v1", "character_move_v2", "character_move_v3"], i.indexChangeSpot = 0, i.audiosDestroyEnemy = ["destroy_enemy_v1", "destroy_enemy_v2", "destroy_enemy_v3"], i.indexDestroyEnemy = 0, i.audiosShotPlayer = ["shot_v1", "shot_v2"], i.indexShotPlayer = 0, i.audiosComic = ["slide_story_v1", "slide_story_v1"], i.indexComic = 0, i }();
    t.Audios = i }(DebuggingGame || (DebuggingGame = {}));
var DebuggingGame;
! function(t) { var e = function() {
        function t() {} return t.parts = { ALIEN1: { TOP: { atlas: "ui_gameplay_fix", key: "heatblast_head.png" }, MID: { atlas: "ui_gameplay_fix", key: "heatblast_torso.png" }, BOT: { atlas: "ui_gameplay_fix", key: "heatblast_legs.png" } }, ALIEN2: { TOP: { atlas: "ui_gameplay_fix", key: "overflow_head.png" }, MID: { atlas: "ui_gameplay_fix", key: "overflow_torso.png" }, BOT: { atlas: "ui_gameplay_fix", key: "overflow_legs.png" } }, ALIEN3: { TOP: { atlas: "ui_gameplay_fix", key: "stinkfly_head.png" }, MID: { atlas: "ui_gameplay_fix", key: "stinkfly_torso.png" }, BOT: { atlas: "ui_gameplay_fix", key: "stinkfly_legs.png" } }, ALIEN4: { TOP: { atlas: "ui_gameplay_fix", key: "wildvine_head.png" }, MID: { atlas: "ui_gameplay_fix", key: "wildvine_torso.png" }, BOT: { atlas: "ui_gameplay_fix", key: "wildvine_legs.png" } }, ALIEN5: { TOP: { atlas: "ui_gameplay_fix", key: "xlr8_head.png" }, MID: { atlas: "ui_gameplay_fix", key: "xlr8_torso.png" }, BOT: { atlas: "ui_gameplay_fix", key: "xlr8_legs.png" } }, ALIEN6: { TOP: { atlas: "ui_gameplay_fix", key: "diamondhead_head.png" }, MID: { atlas: "ui_gameplay_fix", key: "xlr8_torso.png" }, BOT: { atlas: "ui_gameplay_fix", key: "xlr8_legs.png" } } }, t.aliens = { ALIEN1: { atlas: "ui_gameplay_select", key: "good_alien1.png" } }, t }();
    t.VisualData = e; var i = function() {
        function t() {} return t.getPerspectivePercent = function(e) { if (e < t.perpectiveMinY) return t.perpectiveMinScale; if (e > t.perpectiveMaxY) return t.perpectiveMaxScale; var i = t.perpectiveMaxY - t.perpectiveMinY,
                n = 1 - (t.perpectiveMaxY - e) / i,
                s = t.perpectiveMaxScale - t.perpectiveMinScale; return t.perpectiveMinScale + s * n }, t.bugCharacter = [{ TOP: "ALIEN3", MID: "ALIEN1", BOT: "ALIEN4", RESOURCE: { atlas: "ui_gameplay_select", key: "bad_alien1.png" } }, { TOP: "ALIEN1", MID: "ALIEN5", BOT: "ALIEN1", RESOURCE: { atlas: "ui_gameplay_select", key: "bad_alien2.png" } }, { TOP: "ALIEN6", MID: "ALIEN2", BOT: "ALIEN1", RESOURCE: { atlas: "ui_gameplay_select", key: "bad_alien3.png" } }], t.levels = [], t.carrilHeight = [170, 136, 194], t.actionsList = [{ start: ["initMove"], endMoveHorizontal: ["startShootTime"] }, { start: ["initMove", "startShootTime"], endMoveHorizontal: ["startSleep"], wakeup: ["changeDirectionHor", "initMove", "startShootTime"] }, { start: ["initMove"], endMoveHorizontal: ["changeLine", "initMove"], endMoveVertical: ["startSleep"], wakeup: ["changeLine", "initMove"], endMovePlayer: ["explode"] }, { start: ["startShootTime"] }], t.enemyTypeConfig = { MOVE: { shootEnable: !0, cooldownShoot: 1, velocity: 10, bulletSpeed: 40 }, MOVE2: { shootEnable: !1, velocity: 10, bulletSpeed: 40 }, BOSS: { cooldownShoot: [3, 5], velocity: 2, shootEnable: !0, bulletSpeed: 40, lives: 20, timeStateChange: [2, 2, 2] } }, t.levelCount = 10, t.stunLoop = 0, t.timeEnableItem = 5, t.shootYEnable = 450, t.lanesY = [100, 200, 300, 530], t.enemySizeBody = 54, t.spotsY = 100, t.spotsDistanceX = 330, t.playerY = 140, t.playerInvulnerable = 2.5, t.levelLives = 10, t.perpectiveMinY = 100, t.perpectiveMinScale = .6, t.perpectiveMaxY = 530, t.perpectiveMaxScale = 1.2, t.initState = "boss", t.destroyBulletY = 10, t.initAlphaBulletY = 200, t.timeAlphaBulletY = .5, t.timeDelayStartbattle = 2, t.positionsFix = [
            [{ x: 0, y: -100 }],
            [{ x: -125, y: -100 }, { x: 125, y: -100 }],
            [{ x: 0, y: -100 }, { x: -250, y: -100 }, { x: 250, y: -100 }],
            [{ x: -280, y: -150 }, { x: -140, y: 50 }, { x: 140, y: 50 }, { x: 280, y: -150 }],
            [{ x: -280, y: -150 }, { x: -140, y: 50 }, { x: 0, y: -150 }, { x: 140, y: 50 }, { x: 280, y: -150 }]
        ], t }();
    t.ConfigGame = i }(DebuggingGame || (DebuggingGame = {}));
var DebuggingGame;
! function(t) { var e = function() {
        function t() {} return t.GAME_SCALE = 1, t.CALCULATED_WIDTH = 0, t.CALCULATED_HEIGHT = 0, t.GAME_WIDTH = 960, t.GAME_HEIGHT = 640, t.GAME_RATIO = 1, t.LANDSCAPE_LOCKED = !0, t.PORTRAIT_LOCKED = !1, t.RENDER_DEBUG = !1, t.KEY_DEBUG = !1, t.IOS_BUTTON_PATCH = !1, t.GAME_KEY = "", t.SECRET_KEY = "", t.GOOGLE_ID = "", t.GOOGLE_APP_NAME = "", t.AUTO_FULLSCREEN_ENABLED = !0, t }();
    t.Constants = e }(DebuggingGame || (DebuggingGame = {}));
var DebuggingGame;
! function(t) {! function(t) { t[t.TOP = 0] = "TOP", t[t.MID = 1] = "MID", t[t.BOT = 2] = "BOT" }(t.BodyParts || (t.BodyParts = {}));! function(t) { t[t.STAND = 0] = "STAND", t[t.MOVE = 1] = "MOVE", t[t.KAMIKAZE = 2] = "KAMIKAZE", t[t.BOSS = 3] = "BOSS" }(t.EnemyType || (t.EnemyType = {}));! function(t) { t[t.PLAYER = 0] = "PLAYER", t[t.BULLETPLAYER = 1] = "BULLETPLAYER", t[t.BULLETENEMY = 2] = "BULLETENEMY", t[t.ENEMY = 3] = "ENEMY", t[t.ITEM = 4] = "ITEM", t[t.BOSS = 5] = "BOSS" }(t.CollisionGroups || (t.CollisionGroups = {})) }(DebuggingGame || (DebuggingGame = {}));
var DebuggingGame;
! function(t) { var e = function() {
        function t() { this.poolPh2Anims = [], this.activeAnim = [], this.resizeAnim = [] } return Object.defineProperty(t, "instance", { get: function() { return this.animationPool || (this.animationPool = new t), this.animationPool }, enumerable: !0, configurable: !0 }), t.prototype.createPh2Animation = function(t, e, i, n) { void 0 === n && (n = !1); var s = t.add.ph2AnimationObject(0, 0, e, i),
                o = s.ph2Animations.getAnimations(); for (var a in o) o.hasOwnProperty(a) && o[a].onComplete.add(function() { this.poolPh2Anims[e].push(s), this.activeAnim.splice(this.activeAnim.indexOf(s), 1), n && this.resizeAnim.splice(this.resizeAnim.indexOf(s), 1) }, this);
            this.poolPh2Anims[e].push(s) }, t.prototype.getPh2Animation = function(t, e, i, n) { void 0 === n && (n = !1), void 0 === this.poolPh2Anims[e] && (this.poolPh2Anims[e] = []), 0 === this.poolPh2Anims[e].length && this.createPh2Animation(t, e, i, n); var s = this.poolPh2Anims[e].splice(0, 1)[0]; return this.activeAnim.push(s), n && this.resizeAnim.push(s), s }, t.prototype.clearAll = function() { for (var t in this.poolPh2Anims)
                if (this.poolPh2Anims.hasOwnProperty(t)) { for (var e = 0, i = this.poolPh2Anims[t]; e < i.length; e++)(o = i[e]).destroy();
                    this.poolPh2Anims[t] = [] } this.poolPh2Anims = []; for (var n = 0, s = this.activeAnim; n < s.length; n++) { var o = s[n];
                o.ph2Animations.getCurrentAnimation() && o.ph2Animations.getCurrentAnimation().onComplete.removeAll(), o.ph2Animations.destroy() } this.activeAnim = [], this.resizeAnim = [] }, t.prototype.pauseAllActive = function() { for (var t = 0, e = this.activeAnim; t < e.length; t++) e[t].ph2Animations.pause() }, t.prototype.resumeAllActive = function() { for (var t = 0, e = this.activeAnim; t < e.length; t++) e[t].ph2Animations.resume() }, t.prototype.setInitScale = function(t, e) { this.lastBgScale = e, this.lastGameWidth = t.width }, t.prototype.resizeAllActive = function(t, e) { for (var i, n = 0, s = this.resizeAnim; n < s.length; n++) { var o = s[n];
                i = o.x - this.lastGameWidth / 2, o.x = t.width / 2 + i / this.lastBgScale * e } this.lastGameWidth = t.width, this.lastBgScale = e }, t }();
    t.AnimationPool = e }(DebuggingGame || (DebuggingGame = {}));
var DebuggingGame;
! function(t) { var e = function() {
        function e() { this.state = null, this.bug = 0 } return e.prototype.next = function() { return e.instances.bug = 0, this.state = e.transitions.next[this.state], this.state }, e.prototype.restart = function() { return this.state }, e.prototype.start = function(i) { this.levelIndex = i, this.levelData = t.ConfigGame.levels[i], this.fixCharacters = [], this.completedAnimFix = []; for (var n = 0, s = this.levelData.dna.bugCharacters; n < s.length; n++) { s[n];
                this.fixCharacters.push(!1), this.completedAnimFix.push(!1) } return this.state = e.transitions.start, this.state }, e.prototype.endGame = function() { this.fixCharacters = [], this.completedAnimFix = []; for (var t = 0, i = this.levelData.dna.bugCharacters; t < i.length; t++) { i[t];
                this.fixCharacters.push(!1), this.completedAnimFix.push(!1) } return this.state = e.transitions.endGame[this.state], this.state }, e.prototype.getLevel = function() { return this.levelData }, e.prototype.getBugCount = function() { var t;
            t = this.levelData.dna.bugCharacters.length; for (var e = 0, i = this.fixCharacters; e < i.length; e++) i[e] && t--; return t }, e.prototype.getTotalBug = function() { return this.levelData.dna.bugCharacters.length }, e.prototype.completed = function() { this.fixCharacters = [], this.completedAnimFix = []; for (var t = 0, i = this.levelData.dna.bugCharacters; t < i.length; t++) { i[t];
                this.fixCharacters.push(!1), this.completedAnimFix.push(!1) } return this.state = e.transitions.completed[this.state], "debuggingcombat" === this.state && this.levelData.battle.boss && (this.state = "debuggingboss"), this.state }, Object.defineProperty(e, "instances", { get: function() { return void 0 === e.manager && (e.manager = new e), e.manager }, enumerable: !0, configurable: !0 }), e.prototype.addCheatKeys = function(e, i, n) { if (!1 !== t.Constants.KEY_DEBUG) { var s;
                this.keys = [], (s = e.input.keyboard.addKey(Phaser.Keyboard.ONE)).onDown.add(this.pressOne, this, 0, i, n), this.keys.push(s), (s = e.input.keyboard.addKey(Phaser.Keyboard.TWO)).onDown.add(this.pressTwo, this, 0, i, n), this.keys.push(s), (s = e.input.keyboard.addKey(Phaser.Keyboard.THREE)).onDown.add(this.pressThree, this, 0, i, n), this.keys.push(s), (s = e.input.keyboard.addKey(Phaser.Keyboard.FOUR)).onDown.add(this.pressFour, this, 0, i, n), this.keys.push(s) } }, e.prototype.removeCheatKeys = function() { if (!1 !== t.Constants.KEY_DEBUG)
                for (var e = 0, i = this.keys; e < i.length; e++) i[e].onDown.removeAll() }, e.prototype.pressOne = function(t, e, i) { this.removeCheatKeys(), e.call(i, "debuggingseparatebug"), this.state = "debuggingseparatebug", this.fixCharacters = [], this.completedAnimFix = []; for (var n = 0, s = this.levelData.dna.bugCharacters; n < s.length; n++) { s[n];
                this.fixCharacters.push(!1), this.completedAnimFix.push(!1) } }, e.prototype.pressTwo = function(t, i, n) { this.removeCheatKeys(), e.instances.bug = 0, i.call(n, "debuggingfixbug"), this.state = "debuggingfixbug", this.fixCharacters = [], this.completedAnimFix = []; for (var s = 0, o = this.levelData.dna.bugCharacters; s < o.length; s++) { o[s];
                this.fixCharacters.push(!1), this.completedAnimFix.push(!1) } }, e.prototype.pressThree = function(t, e, i) { this.removeCheatKeys(), e.call(i, "debuggingcombat"), this.state = "debuggingcombat", this.fixCharacters = [], this.completedAnimFix = []; for (var n = 0, s = this.levelData.dna.bugCharacters; n < s.length; n++) { s[n];
                this.fixCharacters.push(!1), this.completedAnimFix.push(!1) } }, e.prototype.pressFour = function(t, e, i) { this.removeCheatKeys(), e.call(i, "debuggingboss"), this.state = "debuggingboss", this.fixCharacters = [], this.completedAnimFix = []; for (var n = 0, s = this.levelData.dna.bugCharacters; n < s.length; n++) { s[n];
                this.fixCharacters.push(!1), this.completedAnimFix.push(!1) } }, e.transitions = { start: t.ConfigGame.initState, next: { debuggingseparatebug: "debuggingfixbug", debuggingfixbug: "debuggingfixbug", debuggingcombat: "debuggingseparatebug", debuggingboss: "debuggingseparatebug" }, completed: { debuggingfixbug: "debuggingcombat" }, endGame: { debuggingcombat: "debugginglevelselect", debuggingboss: "debugginglevelselect" } }, e }();
    t.GameStateManager = e }(DebuggingGame || (DebuggingGame = {}));
var GameGlitch;
! function(t) { var e = function() {
        function t() {} return t.GAME_SCALE = 1, t.CALCULATED_WIDTH = 0, t.CALCULATED_HEIGHT = 0, t.GAME_WIDTH = 960, t.GAME_HEIGHT = 640, t.GAME_RATIO = 1, t.LANDSCAPE_LOCKED = !0, t.PORTRAIT_LOCKED = !1, t.RENDER_DEBUG = !1, t.KEY_DEBUG = !1, t.IOS_BUTTON_PATCH = !1, t.FONT = "LubalinGraphITCTurnerAra-Bd", t.GAME_KEY = "", t.SECRET_KEY = "", t.GOOGLE_ID = "", t.GOOGLE_APP_NAME = "", t.AUTO_FULLSCREEN_ENABLED = !0, t.GAME_VERSION = 4, t }();
    t.Constants = e }(GameGlitch || (GameGlitch = {}));
var GameGlitch;
! function(t) { var e = function() {
        function e() {} return e.initDataManager = function(e) { void 0 === this.dataManager && (this.dataManager = new t.DataManager(e)) }, e.initLocalizationManager = function(e) { void 0 === this.localization && (this.localization = new t.LocalizationManager(e)) }, e.initTransitionAnim = function(t) { void 0 === this.transitionAnim && (this.transitionAnim = Game.Instances.transitionAnim) }, e.initControlButtonUI = function(e) { void 0 === this.controlButtonUI && (this.controlButtonUI = new t.ControlButtonUI(e)) }, e }();
    t.Instances = e }(GameGlitch || (GameGlitch = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameGlitch;
! function(t) { var e = function(e) {
        function i() { return e.call(this) || this } return __extends(i, e), i.prototype.init = function(e) { t.Audios.playMusic(this.game, !1, e), this.level = e, this.pauseFocus = !1, this.pauseOrientation = !1, this.isCompleted = !1, this.game.world.removeAll(), this.game.onFocus.add(this.onFocus, this), this.game.onBlur.add(this.onBlur, this), Game.Instances.onIncorrectOrientation.add(this.onIncorrecOrientation, this), Game.Instances.onCorrectOrientation.add(this.onCorrectOrientation, this), this.isPause = !1, t.Instances.controlButtonUI.addControl(this.game) }, i.prototype.create = function() { e.prototype.create.call(this), this.main = this.game.add.group(), this.overlayGroup = this.game.add.group(), this.staticGroup = this.game.add.group(), this.componentMgr = Ph2.ComponentPlugin.initComponents(this), this.componentOverlay = this.componentMgr.addComponent(new t.Overlay(this.game, .7)), this.isPendingStop = !1, this.isRunningCommands = !1, this.updateInitInputPosition = !1, this.initCameraPosition = new Phaser.Point(0, 0), this.initInputPosition = new Phaser.Point(0, 0), this.timerDelay = this.game.time.create(!1), this.uiPause = new t.UIPause(this), this.uiConfirmation = new t.UIConfirmation(this), this.uiTutorial = new t.UITutorial(this), this.uiLevelCompleted = new t.UILevelCompleted(this, this.level), this.factorScaleBgStatic = 1.3, this.factorMoveBgStatic = .1, this.factorMoveBg = .15, this.offSetStaticBg = new Phaser.Point(0, 0), this.bg = new Phaser.TileSprite(this.game, 0, 0, this.game.world.width, this.game.world.height, "background"), this.bg.width = this.game.width * this.factorScaleBgStatic, this.bg.height = this.game.height * this.factorScaleBgStatic, this.bg.x = this.game.width / 2, this.bg.y = this.game.height / 2, this.bg.anchor.set(.5, .5), this.bgStatic = new Phaser.TileSprite(this.game, 0, 0, 1020, this.game.world.height, "lines"), this.bgStatic.scale.x = this.game.width * this.factorScaleBgStatic / 1020, this.bgStatic.height = this.game.height, this.bgStatic.x = this.game.width / 2, this.bgStatic.y = this.game.height / 2, this.bgStatic.anchor.set(.5, .5), this.tutorialManager = new t.TutorialManager(this.game, this, this.level), this.initLevel(), this.staticGroup.fixedToCamera = !0, this.staticGroup.add(this.bg), this.staticGroup.add(this.bgStatic), this.main.add(this.staticGroup), this.main.add(this.levelManager), this.main.add(this.uiGameplay), this.uiGameplay.fixedToCamera = !0, this.overlayGroup.add(this.componentOverlay.overlaySprite), this.overlayGroup.add(this.uiPause), this.overlayGroup.add(this.uiConfirmation), this.overlayGroup.add(this.uiTutorial), this.overlayGroup.add(this.uiLevelCompleted), this.overlayGroup.fixedToCamera = !0, this.addScroll(), t.Instances.transitionAnim.playOut(), t.Instances.transitionAnim.onCompletedOut.addOnce(this.playAudioStart, this), this.resize(), this.tutorialManager.checkGameplaySignal(t.TutorialGameSignals.start) }, i.prototype.playAudioStart = function() { t.Audios.playSfx(this.game, "start_level") }, i.prototype.setInitData = function() { this.score = 0, this.totalSteps = 0, this.weaponCharges = void 0 === t.ConfigGame.levels[this.level].weapons ? 0 : t.ConfigGame.levels[this.level].weapons, this.scoreToStar = t.ConfigGame.levels[this.level].score, this.stepsToStar = t.ConfigGame.levels[this.level].steps; var e = t.Instances.dataManager.getLevelData();
            this.weaponEnable && this.uiGameplay.setWeapomCharge(this.weaponCharges), e && (this.score = e.score, this.totalSteps = e.steps), this.uiGameplay.setTextScore(this.score), this.uiGameplay.setTextStep(this.totalSteps, this.stepsToStar) }, i.prototype.addScroll = function() { this.game.input.onDown.add(this.initScroll, this, 1), this.game.input.onUp.add(this.endScroll, this), this.game.input.addMoveCallback(this.moveScroll, this) }, i.prototype.removeScroll = function() { this.isScroll = !1, this.game.input.onDown.remove(this.initScroll, this) }, i.prototype.initScroll = function(t, e) { this.isRunningCommands || (this.isScroll = !0, this.initCameraPosition.x = this.camera.x, this.initCameraPosition.y = this.camera.y, this.initInputPosition.x = t.x, this.initInputPosition.y = t.y, this.levelManager.cameraUnfollowPlayer()) }, i.prototype.moveScroll = function(e) { e.y > this.game.height - 100 ? this.updateInitInputPosition = !0 : (this.updateInitInputPosition && (this.initInputPosition.x = e.x, this.initInputPosition.y = e.y, this.initCameraPosition.x = this.camera.x, this.initCameraPosition.y = this.camera.y, this.updateInitInputPosition = !1), this.isScroll && !this.levelManager.isTweenCameraRunning() && (this.tutorialManager.checkGameplaySignal(t.TutorialGameSignals.swipe), this.camera.x = this.initCameraPosition.x - (e.x - this.initInputPosition.x), this.camera.y = this.initCameraPosition.y - (e.y - this.initInputPosition.y), this.levelManager.isPlayerInCamera() ? this.uiGameplay.hideButtonGoToPlayer() : this.uiGameplay.showButtonGoToPlayer())) }, i.prototype.endScroll = function() { this.isScroll && (this.isScroll = !1) }, i.prototype.getElementUI = function(t) { return this.uiGameplay.getElement(t) }, i.prototype.pressGoToPlayer = function() { this.tutorialManager.checkGameplaySignal(t.TutorialGameSignals.pressCharacter), this.levelManager.cameraFollowPlayer(!0) }, i.prototype.initLevel = function() { for (var e = [], i = 0, n = t.ConfigGame.levels[this.level].commandsEnable; i < n.length; i++) { var s = n[i];
                e.push(t.CommandType[s]), this.weaponEnable = t.CommandType[s] === t.CommandType.weapon } this.commandController = new t.CommandController(e), this.uiGameplay = new t.UIGameplay(this, this.commandController.commandsEnable, this.level), this.levelManager = new t.LevelManager(this.game, this, this.level), this.setInitData() }, i.prototype.addCommand = function(e, i) { void 0 === i && (i = null); var n = this.commandController.addCommand(e, i); if (this.tutorialManager.checkGameplaySignal(t.TutorialGameSignals.command), n) { var s = this.commandController.getCurrentCommands();
                this.uiGameplay.setCommadsPlaylist(this.commandController.getCurrentCommands()), s.length > 1 && this.tutorialManager.checkGameplaySignal(t.TutorialGameSignals.enableChangeCommand), t.Audios.playSfx(this.game, "icon_add") } else t.Audios.playSfx(this.game, "icon_chain_completed") }, i.prototype.startListCommand = function() { this.isPendingStop = !1, this.isRunningCommands || (this.tutorialManager.checkGameplaySignal(t.TutorialGameSignals.playCommands), this.goodCommands = 0, this.uiGameplay.hideButtonGoToPlayer(), this.levelManager.cameraFollowPlayer(!0), this.isRunningCommands = !0, this.playCommands()) }, i.prototype.playCommands = function() { var e = this.commandController.getCommand(),
                i = this.commandController.getCurrentCommandIndex() - 1; if (e === t.CommandType.none) this.uiGameplay.onCompletedCommandList(), this.isRunningCommands = !1;
            else if (e === t.CommandType.weapon)
                if (this.weaponCharges > 0) 0 === --this.weaponCharges && this.uiGameplay.disableWeapon(), this.uiGameplay.setCurrentCommandPlayList(i), this.levelManager.playCommand(e), this.totalSteps++, this.uiGameplay.setTextStep(this.totalSteps, this.stepsToStar);
                else { this.totalSteps++, this.uiGameplay.setTextStep(this.totalSteps, this.stepsToStar); var n = this.commandController.getCurrentCommandIndex() - 1;
                    this.uiGameplay.setCurrentCommandBad(n), this.timerDelay.add(50, this.onNoWeaponAmount, this), this.timerDelay.start(), this.levelManager.onPlayStand() } else this.uiGameplay.setCurrentCommandPlayList(i), this.levelManager.playCommand(e), this.totalSteps++, this.uiGameplay.setTextStep(this.totalSteps, this.stepsToStar) }, i.prototype.onCompletedCommand = function(e, i, n) { if (i) return t.Audios.playSfx(this.game, "incorrect_move"), void this.restartCheckPoint();
            this.weaponEnable && this.uiGameplay.setWeapomCharge(this.weaponCharges); var s = this.commandController.getCurrentCommandIndex() - 1; if (e) { t.Audios.playCorrectMove(this.game); var o = Math.floor(this.goodCommands / 3);
                o = o >= t.ConfigGame.scoresCombo.length ? t.ConfigGame.scoresCombo.length - 1 : o, this.goodCommands++, this.score += t.ConfigGame.scoresCombo[o], this.uiGameplay.setTextScore(this.score), this.uiGameplay.setCurrentCommandGood(s, t.ConfigGame.scoresCombo[o]) } else t.Audios.playSfx(this.game, "incorrect_move"), this.uiGameplay.setCurrentCommandBad(s);
            n && (this.timerDelay.add(500, this.win, this), this.timerDelay.start()), this.commandController.getCommand(!1) === t.CommandType.none ? (this.timerDelay.add(500, this.onCompletedCommandList, this), this.timerDelay.start(), this.levelManager.onEndPlayList()) : this.isPendingStop ? (this.commandController.resetCommandIndex(), this.isRunningCommands = !1, this.levelManager.onEndPlayList(), this.uiGameplay.onCompletedCommandList()) : this.playCommands() }, i.prototype.onNoWeaponAmount = function() { this.commandController.getCommand(!1) === t.CommandType.none ? (this.timerDelay.add(500, this.onCompletedCommandList, this), this.timerDelay.start()) : this.isPendingStop ? (this.commandController.resetCommandIndex(), this.isRunningCommands = !1, this.uiGameplay.onCompletedCommandList()) : this.playCommands() }, i.prototype.onCompletedCommandList = function() { this.isRunningCommands = !1, this.uiGameplay.onCompletedCommandList(), this.clearCommands(), this.uiGameplay.setCommadsPlaylist(this.commandController.getCurrentCommands()) }, i.prototype.onCheckPointCollision = function(e, i) { t.Instances.dataManager.saveLevelData(e, this.score, this.totalSteps, i) }, i.prototype.removeCommand = function(e) { t.Audios.playSfx(this.game, "icon_remove"), this.commandController.removeCommand(e), this.uiGameplay.setCommadsPlaylist(this.commandController.getCurrentCommands()) }, i.prototype.clearCommands = function() { this.commandController.clearCommands(), this.uiGameplay.setCommadsPlaylist(this.commandController.getCurrentCommands()), this.uiGameplay.enableAllInput() }, i.prototype.stopCommand = function() { this.isPendingStop = !0 }, i.prototype.closeConfirmation = function() { this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiPause), this.uiPause.enableAllInput() }, i.prototype.pressHowToPlay = function() { this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiTutorial), this.uiTutorial.showHowToPlay() }, i.prototype.closeHowToPlay = function() { this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiPause), this.uiPause.enableAllInput() }, i.prototype.pressExit = function() { this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiConfirmation), this.uiConfirmation.show(t.CONFIRMATIONTYPE.EXIT) }, i.prototype.goToLevelSelect = function() { t.Instances.dataManager.clearLevelData(), t.Instances.transitionAnim.playIn(), t.Instances.transitionAnim.onCompletedIn.addOnce(this.transitionLevelSelect, this) }, i.prototype.transitionLevelSelect = function() { this.game.state.start("glitchlevelselect") }, i.prototype.pressRestart = function() { this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiConfirmation), this.uiConfirmation.show(t.CONFIRMATIONTYPE.RESTART) }, i.prototype.restartLevel = function() { t.Instances.dataManager.clearLevelData(), t.Instances.transitionAnim.playIn(), t.Instances.transitionAnim.onCompletedIn.addOnce(this.transitionLevel, this) }, i.prototype.transitionLevel = function() { this.game.state.start("glitchgameplay", !0, !1, this.level) }, i.prototype.restartCheckPoint = function() { t.Instances.transitionAnim.playIn(), t.Instances.transitionAnim.onCompletedIn.addOnce(this.transitionLevel, this) }, i.prototype.switchAudio = function() { var e = t.Instances.dataManager.getAudio(); return t.Instances.dataManager.setAudio(!e), !e }, i.prototype.pressPause = function() { this.isCompleted || (this.uiGameplay.visible = !1, this.tutorialManager.pause(), this.isPause = !0, this.endScroll(), this.removeScroll(), this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiPause), this.componentOverlay.revive(), this.componentOverlay.fadeIn(500), this.uiPause.show(), this.uiGameplay.pause(), this.levelManager.pause(), this.timerDelay.pause()) }, i.prototype.pressResume = function() { this.componentOverlay.fadeOut(500, .7, this.onEndOverlayPauseFadeOut, this) }, i.prototype.onEndOverlayPauseFadeOut = function() { this.addScroll(), this.uiGameplay.enableKeyInput(), this.uiGameplay.enableInput(), this.uiGameplay.visible = !0, this.isPause = !1, this.tutorialManager.resume(), this.uiGameplay.resume(), this.levelManager.resume(), this.timerDelay.resume(), this.componentOverlay.kill() }, i.prototype.showLevelCompleted = function() { this.uiGameplay.visible = !1, this.overlayGroup.bringToTop(this.componentOverlay.overlaySprite), this.overlayGroup.bringToTop(this.uiLevelCompleted), this.componentOverlay.revive(), this.componentOverlay.fadeIn(500); var e = 1;
            this.score >= this.scoreToStar && e++, this.totalSteps <= this.stepsToStar && e++, t.Instances.dataManager.completedLevel(this.level, e), this.uiLevelCompleted.setUI(this.scoreToStar, this.score, this.stepsToStar, this.totalSteps, e), this.uiLevelCompleted.show() }, i.prototype.win = function() { this.uiGameplay.pause(), this.levelManager.pause(), this.timerDelay.pause(), this.endScroll(), this.removeScroll(), this.uiGameplay.disableAllInput(), this.showLevelCompleted(), this.isCompleted = !0, console.warn("win No implementado") }, i.prototype.lose = function() { console.warn("No implementado") }, i.prototype.onBlur = function() { this.isCompleted ? this.uiLevelCompleted.pause() : (this.uiGameplay.pauseEnable && (this.uiGameplay.disableKeyInput(), this.uiGameplay.disableInput(), this.pressPause()), this.pauseFocus = !0, this.uiTutorial.pause(), t.Audios.onBlur(this.game), this.isPause ? this.componentOverlay.pause() : this.uiGameplay.pause()) }, i.prototype.onFocus = function() { this.pauseFocus = !1, this.checkResume() }, i.prototype.onIncorrecOrientation = function() { this.isCompleted ? this.uiLevelCompleted.pause() : (this.uiGameplay.pauseEnable && (this.uiGameplay.disableKeyInput(), this.pressPause()), this.uiTutorial.pause(), this.pauseOrientation = !0, t.Audios.onBlur(this.game), this.isPause ? this.componentOverlay.pause() : this.uiGameplay.pause()) }, i.prototype.onCorrectOrientation = function() { this.pauseOrientation = !1, this.checkResume() }, i.prototype.update = function() { var t = this.camera.x * this.factorMoveBg,
                e = this.camera.y * this.factorMoveBg;
            Math.abs(t) > (this.bg.width - this.game.width) / 2 && (t = t > 0 ? (this.bg.width - this.game.width) / 2 : -(this.bg.width - this.game.width) / 2), this.bg.tilePosition.x = t * this.factorMoveBg + this.game.width / 2, this.bg.tilePosition.y = e * this.factorMoveBg + this.game.height / 2, this.bgStatic.x = t / this.factorMoveBg * this.factorMoveBgStatic + this.game.width / 2, this.bgStatic.tilePosition.y = e / this.factorMoveBg * this.factorMoveBgStatic + this.game.height / 2 }, i.prototype.resize = function() { this.bg.width = this.game.world.width, this.bg.height = this.game.world.height, this.uiGameplay.resize(), this.uiPause.resize(), this.uiConfirmation.resize(), this.bgStatic.scale.x = this.game.width * this.factorScaleBgStatic / 1020, this.bgStatic.height = this.game.height * this.factorScaleBgStatic, this.bg.width = this.game.width * this.factorScaleBgStatic, this.bg.height = this.game.height * this.factorScaleBgStatic }, i.prototype.checkResume = function() { this.pauseFocus || this.pauseOrientation || (this.isCompleted ? this.uiLevelCompleted.resume() : (t.Audios.onFocus(this.game), this.uiTutorial.resume(), this.isPause ? this.componentOverlay.resume() : this.uiGameplay.resume())) }, i.prototype.shutdown = function() { t.Instances.controlButtonUI.removeControl(this.game), this.game.onFocus.remove(this.onFocus, this), this.game.onBlur.remove(this.onBlur, this), Game.Instances.onIncorrectOrientation.remove(this.onIncorrecOrientation, this), Game.Instances.onCorrectOrientation.remove(this.onCorrectOrientation, this), this.componentMgr.destroy(), this.componentMgr = null, this.tutorialManager.destroy(), this.tutorialManager = null, e.prototype.shutdown.call(this) }, i }(Phaser.State);
    t.GameplayState = e }(GameGlitch || (GameGlitch = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameGlitch;
! function(t) { var e = function(e) {
        function i() { return e.call(this) || this } return __extends(i, e), i.prototype.init = function() { this.game.world.removeAll(), t.Audios.playMusic(this.game, !0), this.pauseFocus = !1, this.pauseOrientation = !1, Game.Instances.onIncorrectOrientation.add(this.onIncorrecOrientation, this), Game.Instances.onCorrectOrientation.add(this.onCorrectOrientation, this), this.game.onBlur.add(this.onBlur, this), this.game.onFocus.add(this.onFocus, this) }, i.prototype.create = function() { e.prototype.create.call(this), this.mainGroup = this.game.add.group(), this.componentMgr = Ph2.ComponentPlugin.initComponents(this), this.componentOverlay = this.componentMgr.addComponent(new t.Overlay(this.game, .7)), this.bg = new Phaser.Sprite(this.game, 0, 0, "level_seelct_bg"), this.bg.width = this.game.width, this.bg.height = this.game.height, this.bgComic = new Phaser.Sprite(this.game, 0, 0, "bg_comic"), this.bgComic.width = this.game.width, this.bgComic.height = this.game.height, this.bgComic.visible = !1, this.isComic = !1, this.uiLevelSelect = new t.UILevelSelect(this), this.uiComic = new t.UIComic(this, t.COMICID.end), this.uiComicOutro = new t.UIComic(this, t.COMICID.outro), this.uiComicOutro.visible = !1, this.checNeedShowComicEnd(), this.mainGroup.add(this.bg), this.mainGroup.add(this.uiLevelSelect), this.mainGroup.add(this.componentOverlay.overlaySprite), this.mainGroup.add(this.bgComic), this.mainGroup.add(this.uiComic), t.Instances.transitionAnim.playOut(), t.Instances.transitionAnim.onCompletedOut.addOnce(this.initUi, this), this.resize() }, i.prototype.checNeedShowComicEnd = function() { var e = t.Instances.dataManager.getSeeComicEnd(),
                i = t.Instances.dataManager.getLevelCompelteded();!1 === e && i + 1 === t.ConfigGame.levelCount ? (this.uiComic.visible = !0, this.uiLevelSelect.visible = !1, this.bgComic.visible = !0, this.bg.visible = !1, this.isComic = !0) : (this.uiLevelSelect.init(), this.isComic = !1, this.uiComic.visible = !1, this.uiLevelSelect.visible = !0) }, i.prototype.switchAudio = function() { var e = t.Instances.dataManager.getAudio(); return t.Instances.dataManager.setAudio(!e), !e }, i.prototype.endShowComic = function() { t.Instances.dataManager.seeComicEnd(), this.pressHome() }, i.prototype.showComicOutro = function() { this.uiComic.visible = !1, this.uiComicOutro.visible = !0, this.uiComicOutro.showComic() }, i.prototype.goToLevelSelect = function() { t.Instances.transitionAnim.playOut(), this.uiLevelSelect.showFinalMessage(), this.uiComic.visible = !1, this.uiComicOutro.visible = !1, this.bg.visible = !0, this.bgComic.visible = !1, this.uiLevelSelect.visible = !0, this.isComic = !1, this.uiComicOutro.destroy(), this.uiLevelSelect.init(), this.onEndOutOverlay() }, i.prototype.pressHome = function() { t.Instances.transitionAnim.playIn(), t.Instances.transitionAnim.onCompletedIn.addOnce(this.transitionMainMenu, this) }, i.prototype.transitionMainMenu = function() { this.game.state.start("gameSelect") }, i.prototype.selectLevel = function(e) { t.Instances.transitionAnim.playIn(), t.Instances.transitionAnim.onCompletedIn.addOnce(this.transitionLevel, this, 0, e) }, i.prototype.transitionLevel = function(t) { this.game.state.start("glitchgameplay", !0, !1, t) }, i.prototype.closeFinalMessage = function() { this.componentOverlay.fadeOut(200, .7, this.onEndOutOverlay, this) }, i.prototype.onEndOutOverlay = function() { this.uiLevelSelect.endFinalMessage(), this.componentOverlay.kill() }, i.prototype.initUi = function() { this.isComic ? this.uiComic.showComic() : this.uiLevelSelect.initAnimation() }, i.prototype.onBlur = function() { this.pauseFocus = !0, t.Audios.onBlur(this.game), this.isComic ? (this.uiComic.onBlur(), this.uiComicOutro.onBlur()) : this.uiLevelSelect.onBlur() }, i.prototype.onFocus = function() { this.pauseFocus = !1, this.checkResume() }, i.prototype.onIncorrecOrientation = function() { this.pauseOrientation = !0, t.Audios.onBlur(this.game), this.isComic ? (this.uiComic.onBlur(), this.uiComicOutro.onBlur()) : this.uiLevelSelect.onBlur() }, i.prototype.onCorrectOrientation = function() { this.pauseOrientation = !1, this.checkResume() }, i.prototype.checkResume = function() { this.pauseFocus || this.pauseOrientation || (t.Audios.onFocus(this.game), this.isComic ? (this.uiComic.onFocus(), this.uiComicOutro.onFocus()) : this.uiLevelSelect.onFocus()) }, i.prototype.shutdown = function() { this.game.onBlur.remove(this.onBlur, this), this.game.onFocus.remove(this.onFocus, this), Game.Instances.onIncorrectOrientation.remove(this.onIncorrecOrientation, this), Game.Instances.onCorrectOrientation.remove(this.onCorrectOrientation, this) }, i.prototype.resize = function() { this.isComic && (this.uiComic.resize(), this.uiComicOutro.resize()), this.uiLevelSelect.resize(), this.bg.width = this.game.width, this.bg.height = this.game.height, this.bgComic.width = this.game.width, this.bgComic.height = this.game.height }, i }(Phaser.State);
    t.LevelSelectState = e }(GameGlitch || (GameGlitch = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameGlitch;
! function(t) { var e = function(e) {
        function i() { return e.call(this) || this } return __extends(i, e), i.prototype.init = function() { this.game.world.removeAll(), this.pauseFocus = !1, this.pauseOrientation = !1, Game.Instances.onIncorrectOrientation.add(this.onIncorrecOrientation, this), Game.Instances.onCorrectOrientation.add(this.onCorrectOrientation, this), this.game.onBlur.add(this.onBlur, this), this.game.onFocus.add(this.onFocus, this) }, i.prototype.create = function() { e.prototype.create.call(this), t.Audios.playMusic(this.game, !0), this.mainGroup = this.game.add.group(), this.bgComic = new Phaser.Sprite(this.game, 0, 0, "bg_comic"), this.bgComic.width = this.game.width, this.bgComic.height = this.game.height, this.bgComic.visible = !1, this.isComic = !1, this.uiComic = new t.UIComic(this, t.COMICID.intro), this.uiComic.visible = !1, this.mainGroup.add(this.bgComic), this.mainGroup.add(this.uiComic), this.resize(), this.onEndTransitionAnim() }, i.prototype.onEndTransitionAnim = function() { t.Instances.dataManager.getSeeComicIntro() ? this.game.state.start("glitchlevelselect") : (this.isComic = !0, this.uiComic.visible = !0, this.bgComic.visible = !0, t.Instances.transitionAnim.playOut(), t.Instances.transitionAnim.onCompletedOut.addOnce(this.showInitComic, this)) }, i.prototype.showInitComic = function() { this.uiComic.showComic() }, i.prototype.switchAudio = function() { var e = t.Instances.dataManager.getAudio(); return t.Instances.dataManager.setAudio(!e), !e }, i.prototype.endShowComic = function() { t.Instances.transitionAnim.playIn(), t.Instances.transitionAnim.onCompletedIn.addOnce(this.goToLevelSelect, this) }, i.prototype.showComicOutro = function() { console.log() }, i.prototype.goToLevelSelect = function() { t.Instances.dataManager.seeComicIntro(), this.game.state.start("glitchlevelselect") }, i.prototype.onBlur = function() { this.pauseFocus = !0, this.isComic && this.uiComic.onBlur(), t.Audios.onBlur(this.game) }, i.prototype.onFocus = function() { this.pauseFocus = !1, this.checkResume() }, i.prototype.onIncorrecOrientation = function() { this.pauseOrientation = !0, this.isComic && this.uiComic.onBlur(), t.Audios.onBlur(this.game) }, i.prototype.onCorrectOrientation = function() { this.pauseOrientation = !1, this.checkResume() }, i.prototype.checkResume = function() { this.pauseFocus || this.pauseOrientation || (this.isComic && this.uiComic.onFocus(), t.Audios.onFocus(this.game)) }, i.prototype.shutdown = function() { this.game.onBlur.remove(this.onBlur, this), this.game.onFocus.remove(this.onFocus, this), Game.Instances.onIncorrectOrientation.remove(this.onIncorrecOrientation, this), Game.Instances.onCorrectOrientation.remove(this.onCorrectOrientation, this) }, i.prototype.resize = function() { this.bgComic.width = this.game.width, this.bgComic.height = this.game.height, this.isComic && this.uiComic.resize() }, i }(Phaser.State);
    t.MainMenuState = e }(GameGlitch || (GameGlitch = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameGlitch;
! function(t) { var e = function(e) {
        function i() { return e.call(this) || this } return __extends(i, e), i.prototype.init = function() { this.game.load.onFileComplete.removeAll(); var t = this.game.cache.getJSON("resources_glitch"),
                e = this.game.cache.spine; for (var i in e) e.hasOwnProperty(i) && "transition" !== i && "ben" !== i && (this.game.cache.checkJSONKey(i) && this.game.cache.removeJSON(i), this.game.cache.checkTextKey(i + "Atlas") && this.game.cache.removeText(i + "Atlas"), "2" === i[i.length - 1] ? this.game.cache.checkImageKey(i.slice(0, i.length - 1) + ".png") && this.game.cache.removeImage(i.slice(0, i.length - 1) + ".png", !0) : this.game.cache.checkImageKey(i + ".png") && this.game.cache.removeImage(i + ".png", !0), delete this.game.cache.spine[i]);
            this.game.ph2Loader.debug(!0), this.game.ph2Loader.setAssetsResources(t) }, i.prototype.preload = function() { this.game.stage.backgroundColor = 197379, this.game.ph2UIManager.enableVisibilityAndOrientationComponent = !1, this.group = new Phaser.Group(this.game), this.add.existing(this.group), this.resize(), t.Instances.initTransitionAnim(this.game), t.Instances.transitionAnim.updatePercent(0), t.Instances.transitionAnim.showLoading(), this.game.load.onFileComplete.add(t.Instances.transitionAnim.updatePercent, t.Instances.transitionAnim), t.Audios.loadAudioSprite(this.game, "audiosprite_glitch"), this.game.ph2Loader.load("firstLoad"); for (var e = 0, i = this.game.cache.getJSON("levelConfig_glitch").levels; e < i.length; e++) { var n = i[e];
                this.game.load.json(n.file, "glitches/assets/balance/levels/" + n.file + ".json") } this.game.ph2AnimationManager.cache.animationData = {}, this.game.load.onFileStart.add(this.onFileStart, this) }, i.prototype.onFileStart = function(t, e, i) { this.game.cache.checkJSONKey(e) && -1 !== i.indexOf(".json") && this.game.cache.removeJSON(e), this.game.cache.checkImageKey(e) && -1 !== i.indexOf(".png") && this.game.cache.removeImage(e) }, i.prototype.create = function() { this.setConfigData(), t.Instances.initLocalizationManager(this.game), t.Instances.initControlButtonUI(this.game), t.Instances.dataManager.getAudio() ? t.Audios.enableAudio(this.game) : t.Audios.disableAudio(this.game), this.onEndTransitionAnim() }, i.prototype.pressPlayButton = function() { t.Instances.transitionAnim.playIn(), t.Instances.transitionAnim.onCompletedIn.addOnce(this.onEndTransitionAnim, this) }, i.prototype.onEndTransitionAnim = function() { this.game.load.onFileComplete.remove(t.Instances.transitionAnim.updatePercent, t.Instances.transitionAnim), t.Instances.transitionAnim.hideLoading(), this.changeFontUI(), this.game.state.start("glitchmainmenu") }, i.prototype.setConfigData = function() { var e = this.game.cache.getJSON("levelConfig_glitch");
            t.ConfigGame.levels = e.levels }, i.prototype.changeFontUI = function() { if (-1 !== ["bg", "cs", "pl", "ro", "ru", "tr"].indexOf(language)) { var e, i = ["ui_comic", "ui_confirmation", "ui_final_message", "ui_gameover", "ui_gameplay", "ui_level_completed", "ui_level_selection", "ui_main_menu_new", "ui_pause", "ui_tutorial_ingame", "ui_tutorial_pause"];
                t.Constants.FONT = "LubalinGraphITCTurner"; for (var n = 0, s = i.length; n < s; n++) { e = this.game.cache.getJSON(i[n]).properties; for (var o in e) e.hasOwnProperty(o) && void 0 !== e[o].font && (e[o].font.name = "LubalinGraphITCTurnerAra-Bd" === e[o].font.name ? "LubalinGraphITCTurner" : e[o].font.name) } for (var a, r = ["comic_outro"], n = 0, s = r.length; n < s; n++) { a = this.game.cache.getJSON(r[n]).properties; for (var o in a) a.hasOwnProperty(o) && void 0 !== a[o].font && (a[o].font.name = "LubalinGraphITCTurnerAra-Bd" === a[o].font.name ? "LubalinGraphITCTurner" : a[o].font.name) } } }, i.prototype.shutdown = function() { e.prototype.shutdown.call(this), this.group.destroy() }, i }(Phaser.State);
    t.PreloaderState = e }(GameGlitch || (GameGlitch = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameGlitch;
! function(t) { var e = function(t) {
        function e(e, i, n) { var s = t.call(this, null, !1) || this; return s.percent = 100, s.sprite = new Phaser.Sprite(e, 0, 0, i, n), s.totalHeight = s.sprite.height, s.totalWidth = s.sprite.width, s.rect = new Phaser.Rectangle(0, 0, s.percent / 100 * s.totalWidth, s.totalHeight), s.sprite.crop(s.rect, !0), s } return __extends(e, t), e.prototype.setAnchor = function(t, e) { this.sprite.anchor.set(t, e), this.sprite.pivot.x = this.totalWidth * this.sprite.anchor.x, this.sprite.pivot.y = this.totalHeight * this.sprite.anchor.y }, e.prototype.setPercent = function(t) { if (t !== this.percent) { if (t < 0 ? t = 0 : t > 100 && (t = 100), this.percent = t, this.totalHeight <= 0) return;
                this.rect.width = Math.max(0, this.percent / 100 * this.totalWidth), this.sprite.crop(this.rect, !0) } }, e.prototype.destroy = function() { this.sprite.destroy(), this.sprite = null, this.rect = null, t.prototype.destroy.call(this) }, e }(Ph2.Component);
    t.LoadingBar = e }(GameGlitch || (GameGlitch = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameGlitch;
! function(t) { var e = function(e) {
        function i(i, n) { var s = e.call(this, null, !1) || this;
            s.game = i, s.group = n, s.componentMgr = Ph2.ComponentPlugin.initComponents(s), s.loadingBar = s.componentMgr.addComponent(new t.LoadingBar(i, "load_cn", "loading1.png")); var o = new Phaser.Point(s.game.width / 2, s.game.height / 2); return s.logo = new Phaser.Sprite(s.game, o.x, o.y - 55, "fg_logo"), s.logo.anchor.set(.5, .5), s.loadingBg = new Phaser.Sprite(s.game, o.x, o.y + 150, "load_cn", "loading0.png"), s.loadingBg.anchor.set(.5, .5), s.loadingBar.sprite.x = o.x - s.loadingBg.width / 2, s.loadingBar.sprite.y = o.y + 98 + 75, s.loadingBar.setAnchor(0, .5), s.playButton = new Phaser.Sprite(s.game, o.x + 20, o.y + 200, "load_cn", "play_button.png"), s.playButton.anchor.set(.5, .5), s.playButton.inputEnabled = !0, s.playButton.input.useHandCursor = !0, s.playButton.visible = !1, s.group.add(s.logo), s.group.add(s.loadingBg), s.group.add(s.loadingBar.sprite), s.group.add(s.playButton), s.game.onBlur.add(s.onBlur, s), s.game.onFocus.add(s.onFocus, s), s } return __extends(i, e), i.prototype.showPlayButton = function() { this.loadingBg.visible = !1, this.loadingBar.sprite.visible = !1, this.playButton.visible = !0, this.playButton.events.onInputUp.addOnce(this.pressPlayButton, this), this.tween = this.game.add.tween(this.playButton.scale).to({ x: 1.1, y: 1.1 }, 500, Phaser.Easing.Back.Out, !0, 1e3, 0, !0), this.tween.repeat(-1, 800) }, i.prototype.pressPlayButton = function() { void 0 !== this.gameObject.pressPlayButton && this.gameObject.pressPlayButton() }, i.prototype.setPercent = function(t) { this.loadingBar.setPercent(t) }, i.prototype.resize = function() { var t = new Phaser.Point(this.game.width / 2, this.game.height / 2);
            this.playButton.position.set(t.x + 20, t.y + 200), this.logo.position.set(t.x, t.y - 55), this.loadingBg.position.set(t.x, t.y + 150), this.loadingBar.sprite.position.set(t.x - this.loadingBg.width / 2, t.y + 98 + 75) }, i.prototype.onBlur = function() { this.tween && this.tween.pause() }, i.prototype.onFocus = function() { this.tween && this.tween.resume() }, i.prototype.destroy = function() { this.group.remove(this.logo), this.group.remove(this.loadingBg), this.group.remove(this.loadingBar.sprite), this.game.onBlur.remove(this.onBlur, this), this.game.onFocus.remove(this.onFocus, this), this.tween.stop(), this.group = null, this.logo.destroy(), this.logo = null, this.loadingBg.destroy(), this.loadingBg = null, this.componentMgr.removeComponent(this.loadingBar), this.componentMgr = null, e.prototype.destroy.call(this) }, i }(Ph2.Component);
    t.LoadingCN = e }(GameGlitch || (GameGlitch = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameGlitch;
! function(t) { var e = function(t) {
        function e(e, i) { var n = t.call(this, null, !1) || this; return n.game = e, n.graphics = n.game.add.graphics(0, 0), n.graphics.beginFill(0, 1), n.graphics.drawRect(0, 0, n.game.width, n.game.height), n.graphics.endFill(), n.opacityNum = i, n.graphics.alpha = i, n.graphics.inputEnabled = !0, n.graphics.input.useHandCursor = !1, n.game.scale.onSizeChange.add(n.resize, n), n.activeTween = null, n.resize(), n.kill(), n } return __extends(e, t), Object.defineProperty(e.prototype, "overlaySprite", { get: function() { return this.graphics }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "opacity", { set: function(t) { this.opacityNum = t, this.graphics.alpha = t }, enumerable: !0, configurable: !0 }), e.prototype.kill = function() { this.graphics.alive = !1, this.graphics.exists = !1, this.graphics.visible = !1, this.game.scale.onSizeChange.remove(this.resize, this) }, e.prototype.revive = function() { this.graphics.alive = !0, this.graphics.exists = !0, this.graphics.visible = !0, this.resize(), this.game.scale.onSizeChange.add(this.resize, this) }, e.prototype.fadeIn = function(t, e, i, n) { void 0 === e && (e = this.opacityNum); var s;
            this.graphics.alpha = .2, s = this.game.add.tween(this.graphics).to({ alpha: e }, t, "Linear", !0), i && n && s.onComplete.addOnce(i, n), this.activeTween = s }, e.prototype.fadeOut = function(t, e, i, n) { void 0 === e && (e = this.opacityNum); var s;
            this.graphics.alpha = e, s = this.game.add.tween(this.graphics).to({ alpha: 0 }, t, "Linear", !0), i && n && s.onComplete.addOnce(i, n), this.activeTween = s }, e.prototype.pause = function() { this.activeTween && this.activeTween.pause() }, e.prototype.resume = function() { this.activeTween && this.activeTween.resume() }, e.prototype.resize = function() { this.graphics.clear(), this.graphics.beginFill(0, 1), this.graphics.drawRect(0, 0, this.game.width, this.game.height), this.graphics.endFill() }, e.prototype.destroy = function() { this.game.scale.onSizeChange.remove(this.resize, this), this.graphics.destroy(), t.prototype.destroy.call(this) }, e }(Ph2.Component);
    t.Overlay = e }(GameGlitch || (GameGlitch = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameGlitch;
! function(t) { var e;! function(t) { t[t.floor = 0] = "floor", t[t.dead = 1] = "dead" }(e = t.BlockType || (t.BlockType = {})); var i = function() {
        function t() {} return t.resources = [{ atlas: "atlas_gameplay", key: "tile_1.png" }, { atlas: "atlas_fireeffect", key: "fire_0.png" }], t }();
    t.VisualBlockConfig = i; var n = function(t) {
        function n(n, s, o, a) { void 0 === o && (o = !1); var r = t.call(this, n) || this; if (r.blockType = s, r.moveEnabled = o, r.direction = a, r.visualObject = new Phaser.Sprite(n, 0, 0, i.resources[r.blockType].atlas, i.resources[r.blockType].key), r.add(r.visualObject), r.blockType === e.dead) { var h = Phaser.Animation.generateFrameNames("fire_", 0, 27, ".png");
                r.visualObject.y = -100, r.visualObject.width = 100, r.visualObject.animations.add("loop", h), r.visualObject.animations.play("loop", 30, !0) } return r } return __extends(n, t), n.prototype.setPosition = function(t, i) { this.x = 100 * i, this.y = 100 * t, this.currentI = t, this.currentJ = i, this.blockType === e.floor && (t + i) % 2 == 1 && (this.visualObject.frameName = "tile_2.png") }, n.prototype.pause = function() { this.blockType === e.dead && (this.visualObject.animations.currentAnim.paused = !0) }, n.prototype.resume = function() { this.blockType === e.dead && (this.visualObject.animations.currentAnim.paused = !1) }, n.prototype.moveTo = function() { console.warn("No implementado") }, n }(Phaser.Group);
    t.Block = n }(GameGlitch || (GameGlitch = {}));
var GameGlitch;
! function(t) { var e;! function(t) { t[t.walkLeft = 0] = "walkLeft", t[t.walkRight = 1] = "walkRight", t[t.turnAround = 2] = "turnAround", t[t.jump = 3] = "jump", t[t.attack = 4] = "attack", t[t.weapon = 5] = "weapon", t[t.none = 6] = "none" }(e = t.CommandType || (t.CommandType = {})); var i = function() {
        function t(t) { this.commandsEnable = t, this.currentCommands = [], this.currentCommandIndex = -1, this.maxCommands = 12 } return t.prototype.getCurrentCommands = function() { return this.currentCommands }, t.prototype.getCurrentCommandIndex = function() { return this.currentCommandIndex }, t.prototype.addCommand = function(t, e) { return !(this.currentCommands.length + 1 > 12) && (null !== e ? this.currentCommands.splice(e, 0, t) : this.currentCommands.push(t), this.currentCommands.length > 0 && (this.currentCommandIndex = 0), !0) }, t.prototype.removeCommand = function(t) { t >= this.currentCommands.length || t < 0 || (this.currentCommands.splice(t, 1), 0 === this.currentCommands.length && (this.currentCommandIndex = -1)) }, t.prototype.getCommand = function(t) { if (void 0 === t && (t = !0), -1 === this.currentCommandIndex || this.currentCommands.length <= this.currentCommandIndex) return e.none; var i = this.currentCommands[this.currentCommandIndex]; return t && this.currentCommandIndex++, i }, t.prototype.clearCommands = function() { this.currentCommands = [], this.currentCommandIndex = -1 }, t.prototype.moveCommand = function(t, e) { if (!(t >= this.currentCommands.length || t < 0 || e >= this.currentCommands.length || e < 0)) { var i = this.currentCommands[t],
                    n = this.currentCommands[e];
                this.currentCommands[t] = n, this.currentCommands[e] = i } }, t.prototype.resetCommandIndex = function() { this.currentCommands.length > 0 && (this.currentCommandIndex = 0) }, t }();
    t.CommandController = i }(GameGlitch || (GameGlitch = {}));
var GameGlitch;
! function(t) { var e = function() {
        function t(t) { this.data = { uiMainMenu: { init: "none", none: { up: "buttonPlay", down: "buttonPlay", left: "buttonPlay", right: "buttonPlay", key: "hl_mm.png" }, buttonPlay: { up: "buttonAudio", down: "buttonAudio", left: "buttonAudio", right: "buttonAudio", key: "hl_mm.png" }, buttonAudio: { up: "buttonPlay", down: "buttonPlay", left: "buttonPlay", right: "buttonPlay", key: "hl_mid.png" } }, uiLevelSelect: { init: "buttonBack", none: { up: "buttonlvl1", down: "buttonlvl1", left: "buttonlvl1", right: "buttonlvl1", key: "hl_mid.png" }, buttonBack: { up: null, down: "buttonlvl1", left: null, right: "buttonAudio", key: "hl_mid.png" }, buttonAudio: { up: null, down: null, left: "buttonBack", right: null, key: "hl_mid.png" } }, uiPause: { init: "none", none: { up: "buttonPlay", down: "buttonPlay", left: "buttonPlay", right: "buttonPlay", key: "hl_rom.png" }, buttonPlay: { up: null, down: null, left: "buttonRestart", right: "buttonAudio", key: "hl_rom.png" }, buttonAudio: { up: null, down: "buttonPlay", left: "buttonPlay", right: null, key: "hl_mid.png" }, buttonRestart: { up: "buttonHome", down: null, left: "buttonHome", right: "buttonPlay", key: "hl_big.png" }, buttonHome: { up: null, down: "buttonRestart", left: null, right: "buttonRestart", key: "hl_mid.png" } }, uiConfirmation: { init: "none", none: { up: "buttonYes", down: "buttonYes", left: "buttonYes", right: "buttonYes", key: "hl_big.png" }, buttonYes: { up: null, down: null, left: "buttonNo", right: null, key: "hl_big.png" }, buttonNo: { up: null, down: null, left: null, right: "buttonYes", key: "hl_big.png" } }, uiLevelCompleted: { init: "none", none: { up: "buttonPlay", down: "buttonPlay", left: "buttonPlay", right: "buttonPlay", key: "hl_mid.png" }, buttonPlay: { up: "buttonAudio", down: null, left: "buttonRestart", right: "buttonAudio", key: "hl_rom.png" }, buttonAudio: { up: null, down: "buttonPlay", left: "buttonPlay", right: null, key: "hl_mid.png" }, buttonRestart: { up: null, down: null, left: null, right: "buttonPlay", key: "hl_big.png" } }, uiGameover: { init: "none", none: { up: "buttonRestart", down: "buttonRestart", left: "buttonRestart", right: "buttonRestart", key: "hl_big.png" }, buttonRestart: { up: null, down: null, left: null, right: "buttonNo", key: "hl_big.png" }, buttonNo: { up: null, down: null, left: "buttonRestart", right: null, key: "hl_big.png" } } }, this.ui = "uiMainMenu", this.onChangeButton = new Phaser.Signal } return t.prototype.initControl = function(t) { return this.actualUI = t, this.actualButton = this.data[t].init, this.onChangeButton.dispatch(this.actualButton), this.data[t].init }, t.prototype.addControl = function(t) { var e = t.input.keyboard.addKey(Phaser.Keyboard.UP),
                i = t.input.keyboard.addKey(Phaser.Keyboard.DOWN),
                n = t.input.keyboard.addKey(Phaser.Keyboard.LEFT),
                s = t.input.keyboard.addKey(Phaser.Keyboard.RIGHT);
            e.onDown.add(this.moveUp, this), i.onDown.add(this.moveDown, this), n.onDown.add(this.moveLeft, this), s.onDown.add(this.moveRight, this) }, t.prototype.removeControl = function(t) { var e = t.input.keyboard.addKey(Phaser.Keyboard.UP),
                i = t.input.keyboard.addKey(Phaser.Keyboard.DOWN),
                n = t.input.keyboard.addKey(Phaser.Keyboard.LEFT),
                s = t.input.keyboard.addKey(Phaser.Keyboard.RIGHT);
            e.onDown.removeAll(this), i.onDown.removeAll(this), n.onDown.removeAll(this), s.onDown.removeAll(this) }, t.prototype.setButton = function(t) { this.actualButton = t, this.onChangeButton.dispatch(this.actualButton) }, t.prototype.getHightLight = function() { return this.data[this.actualUI][this.actualButton].key }, t.prototype.setButtonFlow = function(t, e, i, n, s, o) { this.data[this.actualUI][t] || (this.data[this.actualUI][t] = { up: null, down: null, left: null, right: null, key: "hl_mm.png" }), this.data[this.actualUI][t].key = e, this.data[this.actualUI][t].up = i, this.data[this.actualUI][t].down = n, this.data[this.actualUI][t].left = s, this.data[this.actualUI][t].right = o }, t.prototype.moveLeft = function() { var t = this.data[this.actualUI][this.actualButton].left;
            null !== t && (this.actualButton = t, this.onChangeButton.dispatch(t)) }, t.prototype.moveRight = function() { var t = this.data[this.actualUI][this.actualButton].right;
            null !== t && (this.actualButton = t, this.onChangeButton.dispatch(t)) }, t.prototype.moveUp = function() { var t = this.data[this.actualUI][this.actualButton].up;
            null !== t && (this.actualButton = t, this.onChangeButton.dispatch(t)) }, t.prototype.moveDown = function() { var t = this.data[this.actualUI][this.actualButton].down;
            null !== t && (this.actualButton = t, this.onChangeButton.dispatch(t)) }, t }();
    t.ControlButtonUI = e }(GameGlitch || (GameGlitch = {}));
var GameGlitch;
! function(t) { var e = function() {
        function t(t) { this.game = t, this.version = Game.Constants.GAME_VERSION, this.key = "ben10-collection-glitch" + language, this.levelData = null, this.loadData() } return t.prototype.loadData = function() { var t = this.game.storage.getItem(this.key);
            this.gameData = JSON.parse(t), null !== t && this.gameData.version === this.version || this.initData() }, t.prototype.saveData = function() { this.game.storage.setItem(this.key, JSON.stringify(this.gameData)) }, t.prototype.initData = function() { var t;
            t = { version: this.version, seeComicIntro: !1, seeComicEnd: !1, audioEnable: !0, lastLevelCompleted: -1, needAnimLevelUnlock: !1, starsLevels: [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1] }, this.gameData = t, this.saveData() }, t.prototype.getAudio = function() { return Game.Instances.dataManager.getAudio() }, t.prototype.getSeeComicIntro = function() { return this.gameData.seeComicIntro }, t.prototype.getSeeComicEnd = function() { return this.gameData.seeComicEnd }, t.prototype.getLevelCompelteded = function() { return this.gameData.lastLevelCompleted }, t.prototype.getStarsLevel = function(t) { return this.gameData.starsLevels[t] }, t.prototype.seeComicIntro = function() { this.gameData.seeComicIntro = !0, this.saveData() }, t.prototype.seeComicEnd = function() { this.gameData.seeComicEnd = !0, this.saveData() }, t.prototype.setAudio = function(t) { Game.Instances.dataManager.setAudio(t), this.saveData() }, t.prototype.completedLevel = function(t, e) { e > this.gameData.starsLevels[t] && (this.gameData.starsLevels[t] = e, this.saveData()), this.gameData.lastLevelCompleted >= t || (this.gameData.needAnimLevelUnlock = !0, this.gameData.lastLevelCompleted = t, this.saveData()) }, t.prototype.seeLevelUnlock = function() { this.gameData.needAnimLevelUnlock = !1, this.saveData() }, t.prototype.getNeedAnimLevelAnim = function() { return this.gameData.needAnimLevelUnlock }, t.prototype.saveLevelData = function(t, e, i, n) { this.levelData = { objectStruct: t, score: e, steps: i, playerIsRight: n } }, t.prototype.getLevelData = function() { return this.levelData }, t.prototype.clearLevelData = function() { this.levelData = null }, t }();
    t.DataManager = e }(GameGlitch || (GameGlitch = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameGlitch;
! function(t) {! function(t) { t[t.horizontal = 0] = "horizontal", t[t.vertical = 1] = "vertical" }(t.ElevatorType || (t.ElevatorType = {})); var e = function() {
        function t() {} return t.resources = [{ atlas: "atlas_gameplay", key: "plataform_side.png" }, { atlas: "atlas_gameplay", key: "plataform_up.png" }], t }();
    t.VisualElevatorConfig = e; var i = function(i) {
        function n(t, n, s, o) { var a = i.call(this, t) || this; return a.levelManager = o, a.blockType = n, a.moveEnabled = !0, a.direction = s, a.currentTween = null, a.visualObject = new Phaser.Sprite(t, 0, 0, e.resources[a.blockType].atlas, e.resources[a.blockType].key), a.setScale(), a.add(a.visualObject), a } return __extends(n, i), Object.defineProperty(n.prototype, "i", { get: function() { return this.currentI }, enumerable: !0, configurable: !0 }), Object.defineProperty(n.prototype, "j", { get: function() { return this.currentJ }, enumerable: !0, configurable: !0 }), n.prototype.setScale = function() { switch (this.direction) {
                case t.DirectionType.down:
                    this.visualObject.scale.y = -1, this.visualObject.y = 50; break;
                case t.DirectionType.up:
                    this.visualObject.scale.y = 1, this.visualObject.y = 0; break;
                case t.DirectionType.left:
                    this.visualObject.scale.x = 1, this.visualObject.x = 0; break;
                case t.DirectionType.right:
                    this.visualObject.scale.x = -1, this.visualObject.x = 200 } }, n.prototype.switchDirection = function() { switch (this.direction) {
                case t.DirectionType.down:
                    this.direction = t.DirectionType.up; break;
                case t.DirectionType.up:
                    this.direction = t.DirectionType.down; break;
                case t.DirectionType.left:
                    this.direction = t.DirectionType.right; break;
                case t.DirectionType.right:
                    this.direction = t.DirectionType.left } this.setScale() }, n.prototype.moveToPosition = function(t, e) { var i = 300 * (Math.abs(100 * this.currentI - 100 * t) + Math.abs(100 * this.currentJ - 100 * e)) / 150;
            this.currentTween = this.game.add.tween(this).to({ y: 100 * t, x: 100 * e }, i, "Linear", !0), this.currentI = t, this.currentJ = e, this.currentTween.onComplete.add(this.levelManager.onCompletedMoveElevator, this.levelManager) }, n.prototype.setPosition = function(t, e) { this.x = 100 * e, this.y = 100 * t, this.currentI = t, this.currentJ = e }, n.prototype.pause = function() { this.currentTween && this.currentTween.pause() }, n.prototype.resume = function() { this.currentTween && this.currentTween.resume() }, n }(Phaser.Group);
    t.Elevator = i }(GameGlitch || (GameGlitch = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameGlitch;
! function(t) { var e;! function(t) { t[t.weak = 0] = "weak", t[t.strong = 1] = "strong" }(e = t.EnemyType || (t.EnemyType = {}));! function(t) { t[t.normal = 0] = "normal", t[t.strong = 1] = "strong" }(t.AttackType || (t.AttackType = {})); var i = function() {
        function t() {} return t.resources = [{ spine: "enemies" }, { spine: "enemies" }], t }();
    t.VisualEnemyConfig = i; var n = function(n) {
        function s(t, e, s, o, a) { void 0 === s && (s = !1), void 0 === a && (a = !1); var r = n.call(this, t) || this; return r.isBoss = a, r.isDead = !1, r.enemyType = e, r.levelManager = o, r.currentTween = null, r.currentSpineAnimation = null, r.visualObject = r.game.add.spine(50, 95, i.resources[r.enemyType].spine), r.add(r.visualObject), r.playStand(), s ? (r.scale.x = 1, r.visualObject.x = 50) : (r.scale.x = -1, r.visualObject.x = -50), r.isBoss && (r.visualObject.y += 5), r } return __extends(s, n), s.prototype.playStand = function() { this.enemyType === e.strong ? this.isBoss ? this.visualObject.setAnimationByName(0, "stand_big", !0) : this.visualObject.setAnimationByName(0, "stand_middle", !0) : this.visualObject.setAnimationByName(0, "stand_small", !0) }, s.prototype.setPosition = function(t, e) { this.x = 100 * e, this.y = 100 * t, this.currentI = t, this.currentJ = e }, s.prototype.attack = function() { this.isBoss ? (this.currentSpineAnimation = this.visualObject.setAnimationByName(0, "attack_big_in", !1), this.currentSpineAnimation.onComplete = this.attackBossStep2.bind(this)) : (this.currentSpineAnimation = this.visualObject.setAnimationByName(0, "attack_middle", !1), t.Audios.playSfx(this.game, "attack"), this.visualObject.onEvent.addOnce(this.completedAttack, this)) }, s.prototype.attackBossStep2 = function() { this.currentSpineAnimation = this.visualObject.setAnimationByName(0, "attack_big_loop", !1), this.currentSpineAnimation.onComplete = this.attackBossStep3.bind(this) }, s.prototype.attackBossStep3 = function() { this.currentSpineAnimation = this.visualObject.setAnimationByName(0, "attack_big_end", !1), t.Audios.playSfx(this.game, "attack"), this.visualObject.onEvent.addOnce(this.completedAttack, this) }, s.prototype.completedAttack = function(t, e) { this.levelManager.onCompletedAttackEnemy() }, s.prototype.playHit = function() { var t;
            t = this.enemyType === e.strong ? this.isBoss ? "hit_big" : "hit_middle" : "hit_small", this.currentSpineAnimation = this.visualObject.setAnimationByName(0, t, !1) }, s.prototype.playDead = function() { var i;
            this.enemyType === e.strong ? this.isBoss ? (t.Audios.playSfx(this.game, "destroy1_v2"), i = "death_big") : (t.Audios.playSfx(this.game, "destroy2"), i = "death_middle") : (t.Audios.playSfx(this.game, "destroy1_v1"), i = "death_small"), this.currentSpineAnimation = this.visualObject.setAnimationByName(0, i, !1), this.currentSpineAnimation.onComplete = this.onCompletedDead.bind(this) }, s.prototype.onCompletedDead = function() { this.visualObject.visible = !1, this.levelManager.onCompletedCommand() }, s.prototype.pause = function() { this.currentTween && this.currentTween.pause(), this.visualObject.state.timeScale = 0 }, s.prototype.resume = function() { this.currentTween && this.currentTween.resume(), this.visualObject.state.timeScale = 1 }, s }(Phaser.Group);
    t.Enemy = n }(GameGlitch || (GameGlitch = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameGlitch;
! function(t) { var e;! function(t) { t[t.none = 0] = "none", t[t.enemyWeakRight = 1] = "enemyWeakRight", t[t.elevatorVerUp = 2] = "elevatorVerUp", t[t.elevatorVerDown = 3] = "elevatorVerDown", t[t.elevatorStop = 4] = "elevatorStop", t[t.elevatorSwitchDirection = 5] = "elevatorSwitchDirection", t[t.enemyStrongLeft = 6] = "enemyStrongLeft", t[t.floor = 7] = "floor", t[t.dead = 8] = "dead", t[t.enemyStrongRight = 9] = "enemyStrongRight", t[t.enemyWeakLeft = 10] = "enemyWeakLeft", t[t.player = 11] = "player", t[t.boss = 12] = "boss", t[t.checkpoint = 13] = "checkpoint", t[t.elevatorHorLeft = 14] = "elevatorHorLeft", t[t.elevatorHorRight = 15] = "elevatorHorRight" }(e = t.ObjectType || (t.ObjectType = {})); var i = function(i) {
        function n(t, e, n) { var s = i.call(this, t) || this;
            s.isGameOver = !1, s.isCompleted = !1, s.controller = e, s.level = n, s.createLevel(), s.createHitAnimation(), s.bringToTop(s.player), s.currentElevator = null, s.newElevatorPosition = [], s.oldElevatorPosition = []; for (var o = 0, a = s.enemies; o < a.length; o++) { var r = a[o];
                s.bringToTop(r) } return s.bringToTop(s.player), s.bringToTop(s.hitAnimation), s.cameraFollowPlayer(), s.game.world.setBounds(0, 0, 100 * s.levelStruct[0].length, 100 * s.levelStruct.length), s } return __extends(n, i), n.prototype.createHitAnimation = function() { this.hitAnimation = new Phaser.Sprite(this.game, 0, 0, "atlas_gameplay", "fx_hit1.png"); var t = Phaser.Animation.generateFrameNames("fx_hit", 1, 6, ".png");
            this.hitAnimation.animations.add("hit", t, 17, !1), this.hitAnimation.anchor.set(.5, .5), this.hitAnimation.visible = !1, this.hitAnimation.animations.getAnimation("hit").onStart.add(this.showHitAnimation, this), this.hitAnimation.animations.getAnimation("hit").onComplete.add(this.hideHitAnimation, this), this.add(this.hitAnimation) }, n.prototype.showHitAnimation = function() { this.hitAnimation.visible = !0 }, n.prototype.hideHitAnimation = function() { this.hitAnimation.visible = !1 }, n.prototype.cameraFollowPlayer = function(t) { if (void 0 === t && (t = !1), t) { var e = this.player.x - this.game.camera.width / 2,
                    i = this.player.y - this.game.camera.height / 2;
                this.tweenCamera && this.tweenCamera.stop(), this.tweenCamera = this.game.add.tween(this.game.camera).to({ x: e, y: i }, 700, "Linear", !0), this.tweenCamera.onComplete.add(this.onEndCameraTween, this) } else this.tweenCamera && this.tweenCamera.stop(), this.game.camera.follow(this.player) }, n.prototype.isTweenCameraRunning = function() { return !!this.tweenCamera && this.tweenCamera.isRunning }, n.prototype.onEndCameraTween = function() { this.game.camera.follow(this.player) }, n.prototype.cameraUnfollowPlayer = function() { this.game.camera.unfollow() }, n.prototype.isPlayerInCamera = function() { var t = this.player.x,
                e = this.player.x + 100,
                i = this.player.y,
                n = this.player.y + 100; return e >= this.game.camera.x && t <= this.game.camera.x + this.game.camera.width && n >= this.game.camera.y && i <= this.game.camera.y + this.game.camera.height }, n.prototype.createLevel = function() { this.levelStruct = []; var i, n = !0,
                s = t.Instances.dataManager.getLevelData();
            s ? (i = s.objectStruct, n = s.playerIsRight) : i = this.getDataStructArrayLevel(); for (l = 0; l < i.length; l++) { this.levelStruct[l] = []; for (u = 0; u < i[l].length; u++) this.levelStruct[l][u] = { objectType: i[l][u], object: null } } this.enemies = [], this.deadTiles = [], this.enemiesAlive = 0; for (var o, a, r, h, l = 0, c = this.levelStruct.length; l < c; l++)
                for (var u = 0, p = this.levelStruct[l].length; u < p; u++) switch (this.levelStruct[l][u].objectType) {
                    case e.floor:
                        (o = new t.Block(this.game, t.BlockType.floor)).setPosition(l, u), this.add(o), this.levelStruct[l][u].object = o; break;
                    case e.dead:
                        (o = new t.Block(this.game, t.BlockType.dead)).setPosition(l, u), this.add(o), this.deadTiles.push(o), this.levelStruct[l][u].object = o; break;
                    case e.elevatorVerDown:
                        this.levelStruct[l][u - 1].objectType === e.elevatorVerDown ? this.levelStruct[l][u].object = this.levelStruct[l][u - 1].object : ((h = new t.Elevator(this.game, t.ElevatorType.vertical, t.DirectionType.down, this)).setPosition(l, u), this.add(h), this.levelStruct[l][u].object = h); break;
                    case e.elevatorVerUp:
                        this.levelStruct[l][u - 1].objectType === e.elevatorVerUp ? this.levelStruct[l][u].object = this.levelStruct[l][u - 1].object : ((h = new t.Elevator(this.game, t.ElevatorType.vertical, t.DirectionType.up, this)).setPosition(l, u), this.add(h), this.levelStruct[l][u].object = h); break;
                    case e.elevatorHorLeft:
                        this.levelStruct[l][u - 1].objectType === e.elevatorHorLeft ? this.levelStruct[l][u].object = this.levelStruct[l][u - 1].object : ((h = new t.Elevator(this.game, t.ElevatorType.horizontal, t.DirectionType.left, this)).setPosition(l, u), this.add(h), this.levelStruct[l][u].object = h); break;
                    case e.elevatorHorRight:
                        this.levelStruct[l][u - 1].objectType === e.elevatorHorRight ? this.levelStruct[l][u].object = this.levelStruct[l][u - 1].object : ((h = new t.Elevator(this.game, t.ElevatorType.horizontal, t.DirectionType.right, this)).setPosition(l, u), this.add(h), this.levelStruct[l][u].object = h); break;
                    case e.player:
                        (a = new t.Player(this.game, t.PlayerType[t.ConfigGame.levels[this.level].alien], this)).setPosition(l, u), this.add(a), this.levelStruct[l][u].object = a, this.player = a, this.playerStart = this.levelStruct[l][u], n || this.player.turnAround(!1); break;
                    case e.enemyWeakLeft:
                        this.enemiesAlive++, (r = new t.Enemy(this.game, t.EnemyType.weak, !0, this)).setPosition(l, u), this.add(r), this.enemies.push(r), this.levelStruct[l][u].object = r; break;
                    case e.enemyWeakRight:
                        this.enemiesAlive++, (r = new t.Enemy(this.game, t.EnemyType.weak, !1, this)).setPosition(l, u), this.add(r), this.enemies.push(r), this.levelStruct[l][u].object = r; break;
                    case e.enemyStrongLeft:
                        this.enemiesAlive++, (r = new t.Enemy(this.game, t.EnemyType.strong, !0, this)).setPosition(l, u), this.add(r), this.enemies.push(r), this.levelStruct[l][u].object = r; break;
                    case e.enemyStrongRight:
                        this.enemiesAlive++, (r = new t.Enemy(this.game, t.EnemyType.strong, !1, this)).setPosition(l, u), this.add(r), this.enemies.push(r), this.levelStruct[l][u].object = r; break;
                    case e.boss:
                        this.enemiesAlive++, (r = new t.Enemy(this.game, t.EnemyType.strong, !0, this, !0)).setPosition(l, u), this.add(r), this.enemies.push(r), this.levelStruct[l][u].object = r } }, n.prototype.getDataStructArrayLevel = function() { var e, i = this.game.cache.getJSON(t.ConfigGame.levels[this.level].file),
                n = i.width,
                s = i.height,
                o = i.layers[0].data;
            e = []; for (var a = 0; a < s; a++) { e[a] = []; for (var r = 0; r < n; r++) e[a][r] = o[a * n + r] } return e }, n.prototype.playCommand = function(i) { var n, s; switch (this.currentCommand = i, i) {
                case t.CommandType.walkRight:
                    if (this.lastCommand === t.CommandType.walkRight && !this.lastCommandIsGood) { this.player.moveRightWrongShort(), this.isGoodCommand = !1; break } if (this.levelStruct[this.player.i][this.player.j + 1].objectType === e.none || this.levelStruct[this.player.i][this.player.j + 1].objectType === e.player || null === this.levelStruct[this.player.i][this.player.j + 1].object) { if (n = this.player.i, s = this.player.j + 1, (n = this.searchDownFloor(n, s)) === this.levelStruct.length - 1) n += 2, this.isGameOver = !0, this.isGoodCommand = !1;
                        else { if (this.levelStruct[n + 1][s].objectType === e.dead) { this.isGameOver = !0, this.isGoodCommand = !1, this.player.moveToDead(n, s); break } this.isGoodCommand = !0 } this.player.moveRight(n, s) } else this.player.moveRightWrong(), this.isGoodCommand = !1; break;
                case t.CommandType.walkLeft:
                    if (this.lastCommand === t.CommandType.walkLeft && !this.lastCommandIsGood) { this.player.moveLeftWrongShort(), this.isGoodCommand = !1; break } if (this.levelStruct[this.player.i][this.player.j - 1].objectType === e.none || this.levelStruct[this.player.i][this.player.j - 1].objectType === e.player || null === this.levelStruct[this.player.i][this.player.j - 1].object) { if (n = this.player.i, s = this.player.j - 1, (n = this.searchDownFloor(n, s)) === this.levelStruct.length - 1) n += 2, this.isGameOver = !0, this.isGoodCommand = !1;
                        else { if (this.levelStruct[n + 1][s].objectType === e.dead) { this.isGameOver = !0, this.isGoodCommand = !1, this.player.moveToDead(n, s); break } this.isGoodCommand = !0 } this.player.moveLeft(n, s) } else this.player.moveLeftWrong(), this.isGoodCommand = !1; break;
                case t.CommandType.turnAround:
                    this.isGoodCommand = this.lastCommand !== t.CommandType.turnAround, this.player.turnAround(); break;
                case t.CommandType.jump:
                    if (s = this.player.scale.x > 0 ? this.player.j + 1 : this.player.j - 1, this.levelStruct[this.player.i - 1][s].object || this.levelStruct[this.player.i][s].objectType === e.enemyWeakRight || this.levelStruct[this.player.i][s].objectType === e.enemyWeakLeft || this.levelStruct[this.player.i][s].objectType === e.enemyStrongRight || this.levelStruct[this.player.i][s].objectType === e.boss || this.levelStruct[this.player.i][s].objectType === e.enemyStrongLeft) this.isGoodCommand = !1, this.player.jumpWrong();
                    else { if (n = this.player.i - 1, (n = this.searchDownFloor(n, s)) === this.levelStruct.length - 1) n += 2, this.isGameOver = !0, this.isGoodCommand = !1;
                        else { if (this.levelStruct[n + 1][s].objectType === e.dead) { this.isGameOver = !0, this.isGoodCommand = !1, this.player.moveToDead(n, s, !0); break } this.isGoodCommand = !0 } this.player.jump(n, s) } break;
                case t.CommandType.attack:
                    s = this.player.scale.x > 0 ? this.player.j + 1 : this.player.j - 1, this.levelStruct[this.player.i][s].objectType === e.enemyWeakLeft || this.levelStruct[this.player.i][s].objectType === e.enemyWeakRight ? (this.currentEnemyData = this.levelStruct[this.player.i][s], this.isGoodCommand = !0, this.player.attack(!1)) : this.levelStruct[this.player.i][s].objectType === e.enemyStrongLeft || this.levelStruct[this.player.i][s].objectType === e.enemyStrongRight || this.levelStruct[this.player.i][s].objectType === e.boss ? (this.isGoodCommand = !1, this.currentEnemyData = this.levelStruct[this.player.i][s], this.player.attack(!1)) : (this.isGoodCommand = !1, this.player.attack(!0)); break;
                case t.CommandType.weapon:
                    if (s = this.player.scale.x > 0 ? this.player.j + 1 : this.player.j - 1, this.levelStruct[this.player.i][s].objectType === e.enemyWeakLeft || this.levelStruct[this.player.i][s].objectType === e.enemyWeakRight || this.levelStruct[this.player.i][s].objectType === e.enemyStrongLeft || this.levelStruct[this.player.i][s].objectType === e.boss || this.levelStruct[this.player.i][s].objectType === e.enemyStrongRight) { this.currentEnemyData = this.levelStruct[this.player.i][s], this.isGoodCommand = !0, this.player.attackWeapon(!1); break } if ((s = this.player.scale.x > 0 ? this.player.j + 2 : this.player.j - 2) < this.levelStruct[this.player.i].length && (this.levelStruct[this.player.i][s].objectType === e.enemyWeakLeft || this.levelStruct[this.player.i][s].objectType === e.enemyWeakRight || this.levelStruct[this.player.i][s].objectType === e.enemyStrongLeft || this.levelStruct[this.player.i][s].objectType === e.boss || this.levelStruct[this.player.i][s].objectType === e.enemyStrongRight)) { this.currentEnemyData = this.levelStruct[this.player.i][s], this.isGoodCommand = !0, this.player.attackWeapon(!1); break } this.isGoodCommand = !1, this.player.attackWeapon(!0); break;
                case t.CommandType.none:
                    this.onCompletedCommand() } }, n.prototype.searchDownFloor = function(t, i) { for (var n = t, s = t; s < this.levelStruct.length && (this.levelStruct[s][i].objectType === e.none || this.levelStruct[s][i].objectType === e.player || null === this.levelStruct[s][i].object); s++) n = s; return n }, n.prototype.onCompletedAttackPlayer = function() { this.hitAnimation.x = this.currentEnemyData.object.x + 75, this.hitAnimation.y = this.currentEnemyData.object.y - 50, this.hitAnimation.animations.stop("hit"), this.hitAnimation.play("hit"), this.playTweenCameraEffect(), this.isGoodCommand ? (this.currentEnemyData.object.playDead(), this.currentEnemyData.objectType = e.none, this.currentEnemyData.object = null, 0 === --this.enemiesAlive && (this.isCompleted = !0)) : this.currentEnemyData.object.attack() }, n.prototype.playTweenCameraEffect = function() { this.game.camera.shake(.02, 200, !0, Phaser.Camera.SHAKE_HORIZONTAL) }, n.prototype.onHitEnemy = function() { this.playTweenCameraEffect(), this.hitAnimation.x = this.currentEnemyData.object.x + 75, this.hitAnimation.y = this.currentEnemyData.object.y - 50, this.hitAnimation.play("hit"), this.currentEnemyData.object.playHit() }, n.prototype.onCompletedAttackEnemy = function() { this.isGameOver = !0, this.currentEnemyData.objectType === e.boss ? t.Audios.playSfx(this.game, "lose2") : t.Audios.playSfx(this.game, "lose1"), this.player.playDead() }, n.prototype.onCompletedMovePlayer = function() { if (this.player.i + 2 >= this.levelStruct.length - 1) this.onCompletedCommand();
            else if (this.checkPlayerCollisionCheckPoint(), this.currentElevator) { if (this.playerIsOverElevator()) { if (this.levelStruct[this.player.i + 1][this.player.j].object !== this.currentElevator && this.playerIsOverElevator() && this.levelStruct[this.player.i + 1][this.player.j].object) return void this.startMoveElevator() } else this.currentElevator = null;
                this.onCompletedCommand() } else this.playerIsOverElevator() && this.levelStruct[this.player.i + 1][this.player.j].object ? this.startMoveElevator() : this.onCompletedCommand() }, n.prototype.onCompletedMoveElevator = function() { this.oldElevatorPosition[0].object = null, this.newElevatorPosition[0].object = this.currentElevator, this.oldElevatorPosition[1].object = null, this.newElevatorPosition[1].object = this.currentElevator, this.newElevatorPosition[0].objectType !== e.elevatorStop && this.currentElevator.switchDirection(), this.onCompletedCommand() }, n.prototype.onCompletedJump = function() { this.player.i + 2 >= this.levelStruct.length - 1 ? this.onCompletedCommand() : (this.checkPlayerCollisionCheckPoint(), this.currentElevator ? this.playerIsOverElevator() ? this.startMoveElevator() : (this.currentElevator = null, this.onCompletedCommand()) : this.playerIsOverElevator() && this.levelStruct[this.player.i + 1][this.player.j].object ? this.startMoveElevator() : this.onCompletedCommand()) }, n.prototype.checkPlayerCollisionCheckPoint = function() { if (this.levelStruct[this.player.i][this.player.j].objectType === e.checkpoint) { this.playerStart.objectType = e.none, this.levelStruct[this.player.i][this.player.j].objectType = e.player, this.playerStart = this.levelStruct[this.player.i][this.player.j]; for (var t = [], i = 0; i < this.levelStruct.length; i++) { t[i] = []; for (var n = 0; n < this.levelStruct[i].length; n++) t[i][n] = this.levelStruct[i][n].objectType } this.controller.onCheckPointCollision(t, 1 === this.player.scale.x) } }, n.prototype.playerIsOverElevator = function() { return !(this.levelStruct[this.player.i + 1][this.player.j].objectType !== e.elevatorStop && this.levelStruct[this.player.i + 1][this.player.j].objectType !== e.elevatorSwitchDirection && this.levelStruct[this.player.i + 1][this.player.j].objectType !== e.elevatorVerDown && this.levelStruct[this.player.i + 1][this.player.j].objectType !== e.elevatorVerUp && this.levelStruct[this.player.i + 1][this.player.j].objectType !== e.elevatorHorRight && this.levelStruct[this.player.i + 1][this.player.j].objectType !== e.elevatorHorLeft) }, n.prototype.startMoveElevator = function() { this.currentElevator = this.levelStruct[this.player.i + 1][this.player.j].object; var t = this.searchStopElevator(this.currentElevator.i, this.currentElevator.j, this.currentElevator.direction);
            this.newElevatorPosition[0] = this.levelStruct[t.i][t.j], this.oldElevatorPosition[0] = this.levelStruct[this.currentElevator.i][this.currentElevator.j], this.newElevatorPosition[1] = this.levelStruct[t.i][t.j + 1], this.oldElevatorPosition[1] = this.levelStruct[this.currentElevator.i][this.currentElevator.j + 1]; var e = t.i - 1,
                i = t.j + (this.player.j - this.currentElevator.j);
            this.player.playStand(), this.player.moveToPosition(e, i), this.currentElevator.moveToPosition(t.i, t.j) }, n.prototype.searchStopElevator = function(i, n, s) { var o = { i: i, j: n, type: e.none }; switch (s) {
                case t.DirectionType.up:
                    for (a = i - 1; a > -1; a--)
                        if (this.levelStruct[a][n].objectType === e.elevatorStop || this.levelStruct[a][n].objectType === e.elevatorSwitchDirection || this.levelStruct[a][n].objectType === e.elevatorVerDown || this.levelStruct[a][n].objectType === e.elevatorVerUp || this.levelStruct[a][n].objectType === e.elevatorHorRight || this.levelStruct[a][n].objectType === e.elevatorHorLeft) return o.i = a, o.type = this.levelStruct[a][n].objectType, o; break;
                case t.DirectionType.down:
                    for (var a = i + 1; a < this.levelStruct.length; a++)
                        if (this.levelStruct[a][n].objectType === e.elevatorStop || this.levelStruct[a][n].objectType === e.elevatorSwitchDirection || this.levelStruct[a][n].objectType === e.elevatorVerDown || this.levelStruct[a][n].objectType === e.elevatorVerUp || this.levelStruct[a][n].objectType === e.elevatorHorRight || this.levelStruct[a][n].objectType === e.elevatorHorLeft) return o.i = a, o.type = this.levelStruct[a][n].objectType, o; break;
                case t.DirectionType.left:
                    for (r = n - 1; r > -1; r--)
                        if ((this.levelStruct[i][r].objectType === e.elevatorStop || this.levelStruct[i][r].objectType === e.elevatorSwitchDirection || this.levelStruct[i][r].objectType === e.elevatorVerDown || this.levelStruct[i][r].objectType === e.elevatorVerUp || this.levelStruct[i][r].objectType === e.elevatorHorRight || this.levelStruct[i][r].objectType === e.elevatorHorLeft) && null === this.levelStruct[i][r].object) return o.j = r - 1, o.type = this.levelStruct[i][r].objectType, o; break;
                case t.DirectionType.right:
                    for (var r = n + 1; r < this.levelStruct[i].length; r++)
                        if ((this.levelStruct[i][r].objectType === e.elevatorStop || this.levelStruct[i][r].objectType === e.elevatorSwitchDirection || this.levelStruct[i][r].objectType === e.elevatorVerDown || this.levelStruct[i][r].objectType === e.elevatorVerUp || this.levelStruct[i][r].objectType === e.elevatorHorRight || this.levelStruct[i][r].objectType === e.elevatorHorLeft) && null === this.levelStruct[i][r].object) return o.j = r, o.type = this.levelStruct[i][r].objectType, o } return o }, n.prototype.onCompletedCommand = function() { this.lastCommandIsGood = this.isGoodCommand, this.lastCommand = this.currentCommand, this.controller.onCompletedCommand(this.isGoodCommand, this.isGameOver, this.isCompleted) }, n.prototype.onEndPlayList = function() { this.player.playStand(), this.lastCommand = t.CommandType.none }, n.prototype.onPlayStand = function() { this.player.playStand() }, n.prototype.pause = function() { this.player && this.player.pause(); for (var t = 0, e = this.enemies; t < e.length; t++) e[t].pause(); for (var i = 0, n = this.deadTiles; i < n.length; i++) n[i].pause();
            this.currentElevator && this.currentElevator.pause(), this.tweenCamera && this.tweenCamera.pause() }, n.prototype.resume = function() { this.player && this.player.resume(); for (var t = 0, e = this.deadTiles; t < e.length; t++) e[t].resume(); for (var i = 0, n = this.enemies; i < n.length; i++) n[i].resume();
            this.currentElevator && this.currentElevator.resume(), this.tweenCamera && this.tweenCamera.resume() }, n }(Phaser.Group);
    t.LevelManager = i }(GameGlitch || (GameGlitch = {}));
var GameGlitch;
! function(t) { var e = function() {
        function t(t, e) { void 0 === e && (e = "us"), this.game = t, this.language = e, this.jsonKey = "localization_glitches", this.localizationData = this.game.cache.getJSON(this.jsonKey), this.charInitArg = "{", this.charEndArg = "}", this.defaulString = "*", this.showDefault = !1 } return t.prototype.setLanguage = function(t) { return void 0 === t && (t = "us"), t === this.language || (this.jsonKey = "localization_" + t, this.game.cache.getJSON(this.jsonKey) ? (this.language = t, this.localizationData = this.game.cache.getJSON(this.jsonKey), !0) : (this.jsonKey = "localization_" + this.language, !1)) }, t.prototype.getLanguage = function() { return this.language }, t.prototype.getLocalizationData = function() { return this.localizationData }, t.prototype.localizeText = function(t, e, i, n, s) { void 0 === n && (n = !1), void 0 === s && (s = !1); var o, a; if (o = Ph2.UISystem.findObject(t, e), a = i, !n) { if (void 0 === this.localizationData[i]) return console.log("No found key: " + i), o;
                a = this.localizationData[i] } return !0 === this.showDefault && (a = this.defaulString), o.text = s ? a.toUpperCase() : a, o }, t.prototype.getSringForKey = function(t) { for (var e = [], i = 1; i < arguments.length; i++) e[i - 1] = arguments[i]; var n = this.localizationData[t]; if (void 0 === this.localizationData[t]) return console.log("No found key: " + t), ""; for (var s = n.indexOf(this.charInitArg) + 1, o = n.indexOf(this.charEndArg), a = 0, r = n.substring(s, o);
                "" !== r && a < e.length;) n = n.split(this.charInitArg + r + this.charEndArg).join(e[a]), a++, s = n.indexOf(this.charInitArg) + 1, o = n.indexOf(this.charEndArg), r = n.substring(s, o); return !0 === this.showDefault && (n = this.defaulString), n }, t.prototype.addSpriteTo = function(t) { for (var e = [], i = 1; i < arguments.length; i++) e[i - 1] = arguments[i]; for (var n = this.localizationData[t], s = n.indexOf(this.charInitArg) + 1, o = n.indexOf(this.charEndArg), a = 0, r = n.substring(s, o);
                "" !== r && a < e.length;) n = n.split(this.charInitArg + r + this.charEndArg).join(e[a]), a++, s = n.indexOf(this.charInitArg) + 1, o = n.indexOf(this.charEndArg), r = n.substring(s, o); return n }, t.prototype.fitFontSizeUI = function(e, i, n, s, o, a) { void 0 === s && (s = -1), void 0 === o && (o = -1), void 0 === a && (a = t.MIN_FONT_SIZE_DEFAULT); var r;
            r = Ph2.UISystem.findObject(e, i), this.fitFontSizeText(r, n, s, o, a) }, t.prototype.fitFontSizeText = function(e, i, n, s, o) { void 0 === n && (n = -1), void 0 === s && (s = -1), void 0 === o && (o = t.MIN_FONT_SIZE_DEFAULT); var a, r, h, l; for (s > 0 && (e.fontSize = s), r = e.width, h = e.height, l = e.fontSize; r > i || h > n && -1 !== n;) { if ((a = parseInt(l.toString().replace("px", ""), 10) - 1) < o) { l = a = o, e.setStyle({ fontSize: l }, !0); break } l = a, e.fontSize = l, r = e.width, h = e.height } }, t.MIN_FONT_SIZE_DEFAULT = 1, t }();
    t.LocalizationManager = e }(GameGlitch || (GameGlitch = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameGlitch;
! function(t) { var e;! function(t) { t[t.wildvine = 0] = "wildvine", t[t.fourarms = 1] = "fourarms" }(e = t.PlayerType || (t.PlayerType = {})); var i = function() {
        function t() {} return t.resources = [{ spine: "wildvine" }, { spine: "four_arms" }], t }();
    t.VisualPlayerConfig = i; var n = function() {
        function t() {} return t.times = { walk: 400, walkWrong: 200, walkWrongShort: 50, turnAround: 200, jump: 400, jumpWrong: 400 }, t }();
    t.AnimationPlayerConfig = n; var s = function(s) {
        function o(e, n, o) { var a = s.call(this, e) || this;
            a.levelManager = o, a.direction = t.DirectionType.right, a.playerType = n, a.currentTween = null, a.currentSpineAnimation = null, a.timerDelay = a.game.time.create(!1), a.visualObject = a.game.add.spine(50, 95, i.resources[a.playerType].spine), a.animationDead = new Phaser.Sprite(a.game, 50, 30, "atlas_gameplay", "death_fx0.png"); var r = Phaser.Animation.generateFrameNames("death_fx", 0, 13, ".png"); return a.animationDead.animations.add("loop", r, 30, !1), a.animationDead.anchor.set(.5, .5), a.animationDead.visible = !1, a.add(a.visualObject), a.add(a.animationDead), a.playStand(), a } return __extends(o, s), Object.defineProperty(o.prototype, "i", { get: function() { return this.currentI }, enumerable: !0, configurable: !0 }), Object.defineProperty(o.prototype, "j", { get: function() { return this.currentJ }, enumerable: !0, configurable: !0 }), o.prototype.setPosition = function(t, e) { this.x = 100 * e, this.y = 100 * t, this.currentI = t, this.currentJ = e }, o.prototype.playStand = function() { null !== this.currentSpineAnimation && "stand" === this.currentSpineAnimation.animation.name || (this.currentSpineAnimation = this.visualObject.setAnimationByName(0, "stand", !0), this.visualObject.setToSetupPose()) }, o.prototype.playWalk = function() { null !== this.currentSpineAnimation && "walk" === this.currentSpineAnimation.animation.name || (this.currentSpineAnimation = this.visualObject.setAnimationByName(0, "walk", !0), this.visualObject.setToSetupPose()) }, o.prototype.moveRight = function(t, e) { this.scale.x = 1, this.visualObject.x = 50, this.animationDead.x = 50, this.playWalk(), this.currentTween = this.game.add.tween(this).to({ x: 100 * e - 20 }, .8 * n.times.walk, "Linear").to({ x: 100 * e, y: 100 * t }, .2 * n.times.walk, "Linear"), this.currentTween.start(), this.currentTween.onComplete.add(this.levelManager.onCompletedMovePlayer, this.levelManager), this.currentI = t, this.currentJ = e }, o.prototype.moveRightWrong = function() { this.scale.x = 1, this.visualObject.x = 50, this.animationDead.x = 50, this.playWalk(), this.timerDelay.add(n.times.walkWrong, this.levelManager.onCompletedCommand, this.levelManager), this.timerDelay.start() }, o.prototype.moveRightWrongShort = function() { this.scale.x = 1, this.visualObject.x = 50, this.animationDead.x = 50, this.playWalk(), this.timerDelay.add(n.times.walkWrongShort, this.levelManager.onCompletedCommand, this.levelManager), this.timerDelay.start() }, o.prototype.moveLeft = function(t, e) { this.scale.x = -1, this.visualObject.x = -50, this.animationDead.x = -50, this.playWalk(), this.currentTween = this.game.add.tween(this).to({ x: 100 * e + 20 }, .8 * n.times.walk, "Linear").to({ x: 100 * e, y: 100 * t }, .2 * n.times.walk, "Linear"), this.currentTween.start(), this.currentTween.onComplete.add(this.levelManager.onCompletedMovePlayer, this.levelManager), this.currentI = t, this.currentJ = e }, o.prototype.moveLeftWrong = function() { this.scale.x = -1, this.visualObject.x = -50, this.animationDead.x = -50, this.playWalk(), this.timerDelay.add(n.times.walkWrong, this.levelManager.onCompletedCommand, this.levelManager), this.timerDelay.start() }, o.prototype.moveLeftWrongShort = function() { this.scale.x = -1, this.visualObject.x = -50, this.animationDead.x = -50, this.playWalk(), this.timerDelay.add(n.times.walkWrongShort, this.levelManager.onCompletedCommand, this.levelManager), this.timerDelay.start() }, o.prototype.turnAround = function(t) { void 0 === t && (t = !0), this.scale.x > 0 ? (this.scale.x = -1, this.animationDead.x = -50, this.visualObject.x = -50) : (this.scale.x = 1, this.animationDead.x = 50, this.visualObject.x = 50), t && (this.timerDelay.add(n.times.turnAround, this.levelManager.onCompletedCommand, this.levelManager), this.timerDelay.start()) }, o.prototype.jumpWrong = function() { this.currentTween = this.game.add.tween(this).to({ y: this.y - 150 }, .5 * n.times.jumpWrong, "Linear", !0, 0, 0, !0), this.currentSpineAnimation = this.visualObject.setAnimationByName(0, "jump_in", !1), this.currentSpineAnimation.onComplete = this.jumpStand.bind(this), this.currentTween.onComplete.add(this.jumpOut, this) }, o.prototype.jump = function(t, e) { this.currentSpineAnimation = this.visualObject.setAnimationByName(0, "jump_in", !1), this.currentSpineAnimation.onComplete = this.jumpStand.bind(this), this.currentTween = this.game.add.tween(this).to({ y: this.y - 150, x: 100 * e - 50 * this.scale.x }, .5 * n.times.jump, "Linear").to({ y: 100 * t, x: 100 * e }, .5 * n.times.jump, "Linear"), this.currentI = t, this.currentJ = e, this.currentTween.onComplete.add(this.jumpOut, this), this.currentTween.start() }, o.prototype.jumpStand = function() { this.currentSpineAnimation = this.visualObject.setAnimationByName(0, "jump_stand", !0) }, o.prototype.jumpOut = function() { this.currentSpineAnimation = this.visualObject.setAnimationByName(0, "jump_out", !1), this.currentSpineAnimation.onComplete = this.levelManager.onCompletedJump.bind(this.levelManager) }, o.prototype.attack = function(t) { this.sendCompleted = t, this.attacks = 0, this.currentSpineAnimation = this.visualObject.setAnimationByName(0, "attack", !1), this.visualObject.setToSetupPose(), this.visualObject.onEvent.add(this.onEventAttack, this, 0) }, o.prototype.attackWeapon = function(i) { this.currentSpineAnimation = this.visualObject.setAnimationByName(0, "weapon", !1), this.visualObject.setToSetupPose(), this.playerType === e.fourarms ? t.Audios.playSfx(this.game, "special1") : t.Audios.playSfx(this.game, "special2"), this.visualObject.onEvent.addOnce(this.onEventAttackWeapon, this, 0, i) }, o.prototype.onEventAttack = function(e, i) { t.Audios.playSfx(this.game, "attack_v" + (this.attacks + 1)), 2 === this.attacks ? (this.visualObject.onEvent.removeAll(this), this.sendCompleted ? this.currentSpineAnimation.onComplete = this.onCompletedAttackAnimation.bind(this) : (this.currentSpineAnimation.onComplete = this.playStand.bind(this), this.levelManager.onCompletedAttackPlayer())) : (this.sendCompleted || (this.currentSpineAnimation.onComplete = this.playStand.bind(this), this.levelManager.onHitEnemy()), this.attacks++) }, o.prototype.onEventAttackWeapon = function(t, e, i) { i ? this.currentSpineAnimation.onComplete = this.onCompletedAttackAnimation.bind(this) : (this.currentSpineAnimation.onComplete = this.playStand.bind(this), this.levelManager.onCompletedAttackPlayer()) }, o.prototype.onCompletedAttackAnimation = function() { this.playStand(), this.levelManager.onCompletedCommand() }, o.prototype.moveToPosition = function(t, e) { var i = 300 * (Math.abs(100 * this.currentI - 100 * t) + Math.abs(100 * this.currentJ - 100 * e)) / 150;
            this.currentTween = this.game.add.tween(this).to({ y: 100 * t, x: 100 * e }, i, "Linear", !0), this.currentI = t, this.currentJ = e }, o.prototype.moveToDead = function(t, e, i) { void 0 === i && (i = !1), e < this.currentJ && (this.scale.x = -1, this.visualObject.x = -50, this.animationDead.x = -50), e > this.currentJ && (this.scale.x = 1, this.visualObject.x = 50, this.animationDead.x = 50), i ? (this.currentSpineAnimation = this.visualObject.setAnimationByName(0, "jump_in", !1), this.currentSpineAnimation.onComplete = this.jumpStand.bind(this), this.currentTween = this.game.add.tween(this).to({ y: this.y - 150, x: 100 * e - 50 * this.scale.x }, .5 * n.times.jump, "Linear")) : (this.currentSpineAnimation = this.visualObject.setAnimationByName(0, "walk", !0), this.currentTween = this.game.add.tween(this).to({ x: 100 * e + 20 }, .8 * n.times.walk, "Linear")), this.visualObject.setToSetupPose(), this.currentTween.start(), this.currentTween.onComplete.add(this.initFallDead, this, 0, t, e) }, o.prototype.initFallDead = function(t, e, i, n) { this.currentSpineAnimation = this.visualObject.setAnimationByName(0, "jump_stand", !0), this.currentTween = this.game.add.tween(this).to({ x: 100 * n, y: 100 * i + 50 }, 180, "Linear"), this.currentTween.start(), this.currentTween.onComplete.add(this.onCompletedFallToDead, this) }, o.prototype.onCompletedFallToDead = function() { t.Audios.playSfx(this.game, "lose1"), this.playDead() }, o.prototype.playDead = function() { this.visualObject.visible = !1, this.animationDead.visible = !0, this.animationDead.animations.play("loop").onComplete.add(this.levelManager.onCompletedCommand, this.levelManager) }, o.prototype.pause = function() { this.currentTween && this.currentTween.pause(), this.timerDelay && this.timerDelay.pause(), this.visualObject.state.timeScale = 0 }, o.prototype.resume = function() { this.currentTween && this.currentTween.resume(), this.timerDelay && this.timerDelay.resume(), this.visualObject.state.timeScale = 1 }, o }(Phaser.Group);
    t.Player = s }(GameGlitch || (GameGlitch = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameGlitch;
! function(t) {! function(t) { t[t.start = 0] = "start", t[t.command = 1] = "command", t[t.playCommands = 2] = "playCommands", t[t.swipe = 3] = "swipe", t[t.pressCharacter = 4] = "pressCharacter", t[t.enableChangeCommand = 5] = "enableChangeCommand", t[t.none = 10] = "none" }(t.TutorialGameSignals || (t.TutorialGameSignals = {})); var e;! function(t) { t[t.center = 0] = "center", t[t.left = 1] = "left", t[t.right = 2] = "right" }(e = t.TutorialMessageAlign || (t.TutorialMessageAlign = {})); var i;! function(t) { t[t.noArrow = 0] = "noArrow", t[t.arrowRight = 1] = "arrowRight", t[t.arrowLeft = 2] = "arrowLeft", t[t.arrowbottomRight = 3] = "arrowbottomRight", t[t.arrowbottomLeft = 4] = "arrowbottomLeft", t[t.arrowbottomCenter = 5] = "arrowbottomCenter" }(i = t.SliceType || (t.SliceType = {})); var n = function() {
        function t() {} return t.sliceTutorialConfig = [{ key: "container_tutorial1.png", data: { top: 20, bottom: 20, left: 20, right: 20 } }, { key: "container_tutorial10.png", data: { top: 0, bottom: 0, left: 18, right: 40 } }, { key: "container_tutorial2.png", data: { top: 38, bottom: 16, left: 42, right: 18 } }, { key: "container_tutorial8.png", data: { top: 16, bottom: 32, left: 16, right: 56 } }, { key: "container_tutorial4.png", data: { top: 14, bottom: 35, left: 59, right: 17 } }, { key: "container_tutorial9.png", data: { top: 14, bottom: 30, left: 0, right: 0 } }], t.levelsTutorial = { 0: [{ messages: [{ x: 0, y: -150, text: "tutorial_level_1_1", slice: i.noArrow, uiElement: 0, autoCenter: !0 }, { x: -70, y: 0, text: "walk", slice: i.arrowRight, uiElement: 1, align: 1 }, { x: 70, y: 0, text: "tutorial_level_6_2", slice: i.arrowLeft, uiElement: 2, align: 2 }], start: 0, end: 1 }, { messages: [{ x: 0, y: -150, text: "tutorial_level_1_2", slice: i.noArrow, uiElement: 0, autoCenter: !0 }, { x: 70, y: 0, text: "clear", slice: i.arrowLeft, uiElement: 3, align: 2 }, { x: -70, y: 0, text: "run", slice: i.arrowRight, uiElement: 4, align: 1 }], start: 1, end: 2 }], 1: [{ messages: [{ x: 100, y: 0, text: "tutorial_level_2_2", slice: i.arrowLeft, widthMax: 300, uiElement: 5, align: 2 }], start: 0, end: 4 }, { messages: [{ x: 0, y: -150, text: "tutorial_level_2_1", slice: i.noArrow, uiElement: 0, autoCenter: !0, animation: "swipe" }], start: 0, end: 3, time: 12e3, blockNewTutorials: !0 }, { messages: [{ x: 0, y: -70, text: "tutorial_level_2_3", slice: i.arrowbottomCenter, text2: "tutorial_level_2_4", slice2: i.arrowbottomCenter, timeChange: 2e3, uiElement: 6 }], start: 5, end: 2, time: 12e3, blockNewTutorials: !0 }], 2: [{ messages: [{ x: 40, y: -70, text: "turn_around", slice: i.arrowbottomRight, uiElement: 2, align: 1 }], start: 0, end: 1 }, { messages: [{ x: 0, y: -150, text: "tutorial_level_3_1", slice: i.noArrow, uiElement: 0, autoCenter: !0 }], start: 0, time: 5e3, end: 10 }], 3: [{ messages: [{ x: 0, y: -150, text: "tutorial_level_4_1", slice: i.noArrow, uiElement: 0, autoCenter: !0, commands: ["sel_right.png", "sel_right.png", "sel_up.png", "sel_up.png", "sel_atack.png", "sel_right.png", "sel_right.png", "sel_up.png", "sel_up.png", "sel_atack.png"] }], start: 0, time: 5e3, end: 10 }], 5: [{ messages: [{ x: -50, y: -70, text: "tutorial_level_6_3", slice: i.arrowbottomLeft, uiElement: 7, align: 2 }], start: 0, end: 1 }] }, t }();
    t.ConfigTutorial = n; var s = function(s) {
        function o(i, o) { var a = this,
                r = o.x,
                h = o.y,
                l = o.widthMax,
                c = o.heightMax,
                u = o.text,
                p = o.autoCenter,
                d = o.align,
                m = o.animation,
                g = o.text2,
                f = o.timeChange,
                y = o.commands,
                v = n.sliceTutorialConfig[o.slice].data,
                b = n.sliceTutorialConfig[o.slice].key; if (a = s.call(this, i) || this, a.nineSlice = new PhaserNineSlice.NineSlice(i, 0, 0, "atlas_ui_tutorial", b, 200, 200, v), a.maxWidth = void 0 === l ? 700 : l, a.maxHeight = void 0 === c ? 500 : c, a.alignMessage = void 0 === d ? e.center : d, a.text = new Ph2.UIText(a.game, 0, 0, t.Instances.localization.getSringForKey(u), { font: "30px " + t.Constants.FONT, fill: "#ffffff", stroke: "#000000", strokeThickness: 2 }), a.fitMessage(0, o.slice), a.addChild(a.nineSlice), a.addChild(a.text), a.alignMessage === e.left ? (a.text.anchor.set(1, .5), a.text.x -= 20, a.nineSlice.anchor.set(1, .5)) : a.alignMessage === e.right ? (a.text.anchor.set(0, .5), a.text.x += 20, a.nineSlice.anchor.set(0, .5)) : (a.text.anchor.set(.5, .5), a.nineSlice.anchor.set(.5, .5)), a.autoCenter = void 0 !== p && p, p ? (a.offset = new Phaser.Point(r, h), a.resizeWindown()) : (a.x = r, a.y = h), void 0 !== m && (a.spine = a.game.add.spine(0, a.nineSlice.height + 50, "skeleton"), a.spine.setAnimationByName(0, "swipe_left", !0), a.spine.state.timeScale = .5, a.spine.setSkinByName("medium"), a.addChild(a.spine)), void 0 !== g && (a.timeChange = f, a.currentText = 0, v = n.sliceTutorialConfig[o.slice2].data, b = n.sliceTutorialConfig[o.slice2].key, a.nineSlice2 = new PhaserNineSlice.NineSlice(i, 0, 0, "atlas_ui_tutorial", b, 200, 200, v), a.text2 = new Ph2.UIText(a.game, 0, 0, t.Instances.localization.getSringForKey(g), { font: "30px " + t.Constants.FONT, fill: "#ffffff", stroke: "#000000", strokeThickness: 2 }), a.fitMessage(1, o.slice2), a.addChild(a.nineSlice2), a.addChild(a.text2), a.alignMessage === e.left ? (a.text2.anchor.set(1, .5), a.text2.x -= 20, a.nineSlice2.anchor.set(1, .5)) : a.alignMessage === e.right ? (a.text2.anchor.set(0, .5), a.text2.x += 20, a.nineSlice2.anchor.set(0, .5)) : (a.text2.anchor.set(.5, .5), a.nineSlice2.anchor.set(.5, .5)), a.nineSlice2.visible = !1, a.text2.visible = !1, a.timerChange = a.game.time.create(!1), a.timerChange.add(a.timeChange, a.changeText, a), a.timerChange.start()), void 0 !== y) { var _ = void 0,
                    S = -64 * Math.floor(y.length / 2);
                a.nineSlice.y += 35, a.nineSlice.width < 681 ? a.nineSlice.resize(681, a.nineSlice.height + 70) : a.nineSlice.resize(a.nineSlice.width, a.nineSlice.height + 70); for (var w = 0, C = y; w < C.length; w++) { var A = C[w];
                    _ = new Phaser.Sprite(a.game, S, 32, "atlas_ui_gameplay", A), S += 64, a.addChild(_) } } return a } return __extends(o, s), o.prototype.changeText = function() { 0 === this.currentText ? (this.currentText = 1, this.nineSlice.visible = !1, this.text.visible = !1, this.nineSlice2.visible = !0, this.text2.visible = !0) : (this.currentText = 0, this.nineSlice.visible = !0, this.text.visible = !0, this.nineSlice2.visible = !1, this.text2.visible = !1), this.timerChange.add(this.timeChange, this.changeText, this), this.timerChange.start() }, o.prototype.pause = function() { this.spine && (this.spine.state.timeScale = 0), this.timerChange && this.timerChange.pause() }, o.prototype.resume = function() { this.spine && (this.spine.state.timeScale = .5), this.timerChange && this.timerChange.resume() }, o.prototype.fitMessage = function(t, e) { var n = 0 === t ? this.text : this.text2,
                s = 0 === t ? this.nineSlice : this.nineSlice2,
                o = 0,
                a = 0; switch (e) {
                case i.arrowRight:
                    o = 20, n.x -= o; break;
                case i.arrowLeft:
                    o = 20, n.x += o; break;
                case i.arrowbottomRight:
                case i.arrowbottomLeft:
                case i.arrowbottomCenter:
                    a = 15, n.y -= 10 } n.width + o < this.maxWidth - 40 && n.height + a < this.maxHeight - 20 ? s.resize(n.width + 40 + o, n.height + 20 + a) : (n.wordWrap = !0, n.wordWrapWidth = this.maxWidth - 40, n.width + o < this.maxWidth - 40 && n.height + a < this.maxHeight - 20 ? s.resize(n.width + 40 + o, n.height + 20 + a) : (n.enableFitSizetext(30, this.maxWidth - 40, this.maxHeight - 20), s.resize(n.width + 40 + o, n.height + 20 + a))) }, o.prototype.resizeWindown = function() { this.autoCenter && (this.x = this.game.width / 2 + this.offset.x, this.y = this.game.height / 2 + this.offset.y) }, o.prototype.destroy = function() { s.prototype.destroy.call(this), this.timerChange && (this.timerChange.stop(), this.timerChange.destroy(), this.timerChange = null) }, o }(Phaser.Group);
    t.TutorialMessage = s; var o = function() {
        function t(t, e, i) { this.game = t, this.blockNewTutorials = !1, this.currentSteps = [], void 0 === n.levelsTutorial[i] ? this.tutorialSteps = [] : this.tutorialSteps = n.levelsTutorial[i].slice(), this.controller = e, this.currentTutorialmessage = [], this.game.scale.onSizeChange.add(this.resize, this) } return t.prototype.checkGameplaySignal = function(t) { for (var e, i = 0, n = e = this.currentSteps.slice(); i < n.length; i++) t === (a = n[i]).end && this.endTutorial(a); if (!this.blockNewTutorials)
                for (var s = 0, o = e = this.tutorialSteps.slice(); s < o.length; s++) { var a = o[s];
                    t === a.start && this.startTutorial(a) } }, t.prototype.startTutorial = function(t) { this.currentSteps.push(this.tutorialSteps.splice(this.tutorialSteps.indexOf(t), 1)[0]); var e;
            t.currentTutorialmessage = [], this.blockNewTutorials = !!t.blockNewTutorials && t.blockNewTutorials, t.time && (t.timer = this.game.time.create(!1), t.timer.add(t.time, this.endTutorial, this, t), t.timer.start()); for (var i = 0, n = t.messages; i < n.length; i++) { var o = n[i];
                e = new s(this.game, o), t.currentTutorialmessage.push(e), this.controller.getElementUI(o.uiElement).addChild(e) } }, t.prototype.endTutorial = function(t) { this.blockNewTutorials = !t.blockNewTutorials && this.blockNewTutorials, t.time && (t.timer.stop(), t.timer = null), this.currentSteps.splice(this.currentSteps.indexOf(t), 1); for (var e = 0, i = t.currentTutorialmessage; e < i.length; e++) i[e].destroy();
            t.currentTutorialmessage = [] }, t.prototype.resize = function() { for (var t = 0, e = this.currentTutorialmessage; t < e.length; t++) e[t].resizeWindown() }, t.prototype.destroy = function() { this.currentTutorialmessage = [], this.game.scale.onSizeChange.remove(this.resize, this) }, t.prototype.pause = function() { for (var t, e = 0, i = t = this.currentSteps.slice(); e < i.length; e++) { var n = i[e];
                n.timer && n.timer.pause(); for (var s = 0, o = n.currentTutorialmessage; s < o.length; s++) o[s].pause() } }, t.prototype.resume = function() { for (var t, e = 0, i = t = this.currentSteps.slice(); e < i.length; e++) { var n = i[e];
                n.timer && n.timer.resume(); for (var s = 0, o = n.currentTutorialmessage; s < o.length; s++) o[s].resume() } }, t }();
    t.TutorialManager = o }(GameGlitch || (GameGlitch = {}));
var GameGlitch;
! function(t) { var e = function() {
        function t() {} return t.addTouchCallbackToButton = function(t, e, i, n, s) { void 0 === s && (s = 0); for (var o = [], a = 5; a < arguments.length; a++) o[a - 5] = arguments[a]; var r; return (r = Ph2.UISystem.findObject(t, e)).onInputUp.add(i, n, s, o), r }, t.addTouchCallbackToText = function(t, e, i, n) { var s; return s = Ph2.UISystem.findObject(t, e), s.inputEnabled = !0, s.input.useHandCursor = !0, s.events.onInputUp.add(i, n), s }, t.addTouchCallbackToSprite = function(t, e, i, n) { var s; return s = Ph2.UISystem.findObject(t, e), s.inputEnabled = !0, s.input.useHandCursor = !0, s.events.onInputUp.add(i, n), s }, t.addTouchCallbackToSpriteAnimation = function(t, e, i, n) { var s; return s = Ph2.AnimationSystem.findObject(t, e), s.inputEnabled = !0, s.input.useHandCursor = !0, s.events.onInputUp.add(i, n), s }, t.addInputToPreventPropagation = function(t, e) { var i;
            (i = Ph2.UISystem.findObject(t, e)).inputEnabled = !0, i.input.useHandCursor = !1 }, t.disableTouch = function(t, e) { Ph2.UISystem.findObject(t, e).inputEnabled = !1 }, t.enableTouch = function(t, e) { var i;
            (i = Ph2.UISystem.findObject(t, e)).inputEnabled = !0, i.input.useHandCursor = !0 }, t.disableTouchAnimation = function(t, e) { Ph2.AnimationSystem.findObject(t, e).inputEnabled = !1 }, t.enableTouchAnimation = function(t, e) { var i;
            (i = Ph2.AnimationSystem.findObject(t, e)).inputEnabled = !0, i.input.useHandCursor = !0 }, t }();
    t.Util = e }(GameGlitch || (GameGlitch = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameGlitch;
! function(t) { var e;! function(t) { t[t.intro = 0] = "intro", t[t.end = 1] = "end", t[t.outro = 2] = "outro" }(e = t.COMICID || (t.COMICID = {})); var i = function(i) {
        function n(t, e) { var n = i.call(this, t.game) || this;
            n.controller = t, n.id = e, n.tweens = [], n.ui = n.game.add.ph2UI("ui_comic", "atlas_comic"), n.btnPlay = Ph2.UISystem.findObject("play_pivot", n.ui); var s = Ph2.UISystem.findObject("play_pivot", n.ui); return n.animButton = n.game.add.ph2AnimationObject(0, 0, "play_main", "atlas_ui_main_menu"), s.addChild(n.animButton), n.timerSound = n.game.time.create(!1), n.animButton.visible = !1, n.btnAudio = Ph2.UISystem.findObject("sound", n.ui), n.btnAudio.visible = !1, n.buttonSprite = Ph2.AnimationSystem.findObject("base", n.animButton), n.buttonSprite.inputEnabled = !0, n.selectSprite = new Phaser.Sprite(n.game, 0, 0, "atlas_ui_main_menu", "hl_mid.png"), n.selectSprite.anchor.set(.5, .5), n.addComic(), n.ui.addChild(n.selectSprite), n.ui.bringToTop(n.btnPlay), n.add(n.ui), n.addKeysControl(), n.addTouchCallback(), n.disableAllInput(), n.checkFixIOS(), n } return __extends(n, i), n.prototype.checkFixIOS = function() { if (t.Constants.IOS_BUTTON_PATCH) { var e = void 0;
                (e = Ph2.UISystem.findObject("sound", this.ui)).y += 30, e.alignment.setLandscapeAlignment("BOTTOM_RIGHT", -.1, !0, -528, !0), (e = Ph2.UISystem.findObject("play_pivot", this.ui)).y -= 20, e.alignment.setLandscapeAlignment("BOTTOM_RIGHT", -120.5, !0, -113.4, !0) } }, n.prototype.addKeysControl = function() { this.keyStart = this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER) }, n.prototype.addComic = function() { this.id === e.intro ? (this.comic = this.game.add.ph2AnimationObject(0, 0, "comic_intro", "atlas_comic"), this.timerSound.add(100, this.playIntroStripComic, this), this.timerSound.add(933, this.playIntroStripComic, this)) : this.id === e.end ? (this.comic = this.game.add.ph2AnimationObject(0, 0, "comic_final", "atlas_comic"), this.timerSound.add(100, this.playIntroStripComic, this), this.timerSound.add(1067, this.playIntroStripComic, this)) : (this.comic = this.game.add.ph2AnimationObject(0, 0, "comic_outro", "atlas_comic"), this.timerSound.add(100, this.playIntroStripComic, this), this.timerSound.add(1067, this.playIntroStripComic, this)), Ph2.UISystem.findObject("comic_pivot", this.ui).addChild(this.comic) }, n.prototype.addTouchCallback = function() { this.buttonSprite.events.onInputDown.add(this.pressPlayBtn, this), t.Util.addTouchCallbackToButton("sound", this.ui, this.switchAudio, this) }, n.prototype.playIntroStripComic = function() { t.Audios.playSfxComic(this.game) }, n.prototype.setSelectButton = function() { switch (this.selectSprite.visible = !0, t.Instances.controlButtonUI.actualButton) {
                case "buttonPlay":
                    this.selectSprite.x = this.btnPlay.x, this.selectSprite.y = this.btnPlay.y, this.selectSprite.scale.set(.7, .7); break;
                case "buttonAudio":
                    this.selectSprite.x = this.btnAudio.x, this.selectSprite.y = this.btnAudio.y, this.selectSprite.scale.set(1, 1); break;
                case "none":
                    this.selectSprite.visible = !1 } this.selectSprite.frameName = t.Instances.controlButtonUI.getHightLight() }, n.prototype.onSelectButton = function() { switch (t.Instances.controlButtonUI.actualButton) {
                case "buttonPlay":
                    this.pressPlayBtn(); break;
                case "buttonAudio":
                    this.switchAudio(); break;
                case "none":
                    this.pressPlayBtn() } }, n.prototype.switchAudio = function() { t.Audios.playSfx(this.game, "generic_button"); var e = this.controller.switchAudio();
            this.setButtonAudio(e) }, n.prototype.setButtonAudio = function(e) {!0 === e ? (t.Audios.enableAudio(this.game), this.btnAudio.setFrames("sound1.png", "sound1.png", "sound1_press.png", "sound1.png")) : (t.Audios.disableAudio(this.game), this.btnAudio.setFrames("sound2.png", "sound2.png", "sound2_press.png", "sound2.png")) }, n.prototype.showComic = function() { this.resize(), t.Instances.controlButtonUI.initControl("uiMainMenu"), t.Instances.controlButtonUI.onChangeButton.add(this.setSelectButton, this), t.Instances.controlButtonUI.removeControl(this.game), this.timerSound.start(); var i; if (this.id === e.intro) i = "comic_intro_play2";
            else if (this.id === e.end) i = "comic_final_play2";
            else { i = "comic_outro_play2"; var n = Ph2.AnimationSystem.findObject("base2/text", this.comic);
                n.text = t.Instances.localization.getSringForKey("well_done_message_2"), n.wordWrapWidth = 433, n.wordWrap = !0, t.Instances.localization.fitFontSizeText(n, 433, 256, 55, 10) } this.comic.ph2Animations.play(i, 1, !1).onComplete.addOnce(this.onEndshowComic, this) }, n.prototype.onEndshowComic = function() { t.Instances.controlButtonUI.addControl(this.game), this.animButton.visible = !0, this.btnAudio.visible = !0, this.animButton.alpha = 0, this.btnAudio.alpha = 0, this.tweens = []; var e;
            (e = this.game.add.tween(this.animButton).to({ alpha: 1 }, 300, "Linear", !0)).onComplete.add(this.onEndShowButtons, this), this.tweens.push(e), e = this.game.add.tween(this.btnAudio).to({ alpha: 1 }, 300, "Linear", !0), this.tweens.push(e), this.setButtonAudio(t.Instances.dataManager.getAudio()), this.setSelectButton() }, n.prototype.onEndShowButtons = function() { this.animButton.ph2Animations.play("play_anim", 1, !0), this.tweens = [], this.enableAllInput() }, n.prototype.enableAllInput = function() { this.keyStart.onDown.add(this.onSelectButton, this), this.buttonSprite.inputEnabled = !0 }, n.prototype.disableAllInput = function() { this.keyStart.onDown.remove(this.onSelectButton, this), this.buttonSprite.inputEnabled = !1, this.selectSprite.visible = !1 }, n.prototype.pressPlayBtn = function() { this.disableAllInput(), t.Audios.playSfx(this.game, "play_button"), this.animButton.ph2Animations.play("play_anim_press", 1, !1).onComplete.addOnce(this.hideComic, this) }, n.prototype.hideComic = function() { var t;
            t = this.id === e.intro ? "comic_intro_out2" : this.id === e.end ? "comic_final_out2" : "comic_outro_out2", this.comic.ph2Animations.play(t, 1, !1).onComplete.addOnce(this.onEndPlayBtnAnim, this) }, n.prototype.onEndPlayBtnAnim = function() { this.controller.endShowComic() }, n.prototype.onBlur = function() { this.animButton.ph2Animations.pause(), this.comic.ph2Animations.pause(), this.timerSound.pause(); for (var t = 0, e = this.tweens; t < e.length; t++) e[t].pause() }, n.prototype.onFocus = function() { this.animButton.ph2Animations.resume(), this.comic.ph2Animations.resume(), this.timerSound.resume(); for (var t = 0, e = this.tweens; t < e.length; t++) e[t].resume() }, n.prototype.resize = function() { this.game.width < 960 ? (this.comic.scale.x = this.game.width / 960, this.comic.scale.y = this.game.width / 960, this.animButton.scale.x = this.game.width / 960, this.animButton.scale.y = this.game.width / 960) : (this.comic.scale.x = 1, this.comic.scale.y = 1, this.animButton.scale.x = 1, this.animButton.scale.y = 1) }, n.prototype.destroy = function() { t.Instances.controlButtonUI.removeControl(this.game), t.Instances.controlButtonUI.onChangeButton.remove(this.setSelectButton, this), i.prototype.destroy.call(this) }, n }(Phaser.Group);
    t.UIComic = i }(GameGlitch || (GameGlitch = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameGlitch;
! function(t) { var e;! function(t) { t[t.EXIT = 0] = "EXIT", t[t.RESTART = 1] = "RESTART" }(e = t.CONFIRMATIONTYPE || (t.CONFIRMATIONTYPE = {})); var i = function(i) {
        function n(t) { var e = i.call(this, t.game) || this; return e.controller = t, e.ui = e.game.add.ph2UI("ui_confirmation", "atlas_ui_popups"), e.selectSprite = new Phaser.Sprite(e.game, 0, 0, "atlas_ui_main_menu", "hl_mid.png"), e.selectSprite.anchor.set(.5, .5), e.btnYes = Ph2.UISystem.findObject("yes", e.ui), e.btnNo = Ph2.UISystem.findObject("no", e.ui), e.game.device.desktop || (e.selectSprite.visible = !1), e.add(e.selectSprite), e.add(e.ui), e.addTouchCallback(), e.addKeysControl(), e.hide(), e.addTouchCallback(), Ph2.UISystem.findObject("container/description1", e.ui).wordWrap = !0, Ph2.UISystem.findObject("container/description1", e.ui).wordWrapWidth = 400, e } return __extends(n, i), n.prototype.localization = function(i) { i === e.EXIT ? t.Instances.localization.localizeText("container/description1", this.ui, "exit_confirmation") : t.Instances.localization.localizeText("container/description1", this.ui, "restart_confirmation") }, n.prototype.addTouchCallback = function() { t.Util.addTouchCallbackToButton("yes", this.ui, this.pressYesBtn, this), t.Util.addTouchCallbackToButton("no", this.ui, this.pressNoBtn, this) }, n.prototype.addKeysControl = function() { this.keyYes = this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER), this.keyNo = this.game.input.keyboard.addKey(Phaser.Keyboard.ESC) }, n.prototype.enableAllInput = function() { t.Util.enableTouch("yes", this.ui), t.Util.enableTouch("no", this.ui), t.Instances.controlButtonUI.onChangeButton.add(this.setSelectButton, this), this.keyYes.onDown.add(this.onSelectButton, this), this.keyNo.onDown.add(this.pressNoBtn, this) }, n.prototype.disableAllInput = function() { t.Util.disableTouch("yes", this.ui), t.Util.disableTouch("no", this.ui), t.Instances.controlButtonUI.onChangeButton.remove(this.setSelectButton, this), this.keyYes.onDown.removeAll(this), this.keyNo.onDown.removeAll(this) }, n.prototype.setSelectButton = function() { switch (this.selectSprite.visible = !0, t.Instances.controlButtonUI.actualButton) {
                case "none":
                    this.selectSprite.visible = !1; break;
                case "buttonYes":
                    this.selectSprite.x = this.btnYes.x, this.selectSprite.y = this.btnYes.y; break;
                case "buttonNo":
                    this.selectSprite.x = this.btnNo.x, this.selectSprite.y = this.btnNo.y } this.selectSprite.frameName = t.Instances.controlButtonUI.getHightLight() }, n.prototype.onSelectButton = function() { switch (t.Instances.controlButtonUI.actualButton) {
                case "none":
                case "buttonYes":
                    this.pressYesBtn(); break;
                case "buttonNo":
                    this.pressNoBtn() } }, n.prototype.pressYesBtn = function() { t.Audios.playSfx(this.game, "generic_button"), this.disableAllInput(), this.typeConfirmation === e.RESTART ? this.controller.restartLevel() : this.controller.goToLevelSelect() }, n.prototype.pressNoBtn = function() { t.Audios.playSfx(this.game, "generic_button"), this.disableAllInput(), this.hide(), this.controller.closeConfirmation() }, n.prototype.show = function(e) { t.Audios.playSfx(this.game, "popup"), t.Instances.controlButtonUI.initControl("uiConfirmation"), this.setSelectButton(), this.typeConfirmation = e, this.localization(this.typeConfirmation), this.enableAllInput(), this.visible = !0 }, n.prototype.resize = function() { this.setSelectButton() }, n.prototype.hide = function() { this.disableAllInput(), this.visible = !1 }, n }(Phaser.Group);
    t.UIConfirmation = i }(GameGlitch || (GameGlitch = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameGlitch;
! function(t) { var e = function(e) {
        function i(i) { var n = e.call(this, i.game) || this; return n.controller = i, n.ui = n.game.add.ph2UI("ui_gameover", "ui_gameover"), n.selectSprite = new Phaser.Sprite(n.game, 0, 0, "atlas_ui_main_menu", "hl_mid.png"), n.selectSprite.anchor.set(.5, .5), n.btnContinue = Ph2.UISystem.findObject("container/no", n.ui), n.btnRestart = Ph2.UISystem.findObject("container/replay", n.ui), n.game.device.desktop || (n.selectSprite.visible = !1), n.add(n.selectSprite), n.add(n.ui), n.hide(), n.localization(), n.addTouchCallback(), n.addKeysControl(), t.Instances.controlButtonUI.initControl("uiGameover"), n } return __extends(i, e), i.prototype.addTouchCallback = function() { t.Util.addTouchCallbackToButton("container/no", this.ui, this.pressContinueBtn, this), t.Util.addTouchCallbackToButton("container/replay", this.ui, this.pressRestartBtn, this) }, i.prototype.addKeysControl = function() { this.keyStart = this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER) }, i.prototype.setSelectButton = function() { switch (this.selectSprite.visible = !0, t.Instances.controlButtonUI.actualButton) {
                case "none":
                    this.selectSprite.visible = !1; break;
                case "buttonNo":
                    this.selectSprite.x = this.btnContinue.parent.x + this.btnContinue.x, this.selectSprite.y = this.btnContinue.parent.y + this.btnContinue.y, this.selectSprite.scale.set(1, 1); break;
                case "buttonRestart":
                    this.selectSprite.x = this.btnRestart.parent.x + this.btnRestart.x, this.selectSprite.y = this.btnRestart.parent.y + this.btnRestart.y, this.selectSprite.scale.set(1, 1) } this.selectSprite.frameName = t.Instances.controlButtonUI.getHightLight() }, i.prototype.onSelectButton = function() { switch (t.Instances.controlButtonUI.actualButton) {
                case "none":
                    this.pressRestartBtn(); break;
                case "buttonNo":
                    this.pressContinueBtn(); break;
                case "buttonRestart":
                    this.pressRestartBtn() } }, i.prototype.enableAllInput = function() { t.Util.enableTouch("container/no", this.ui), t.Util.enableTouch("container/replay", this.ui), t.Instances.controlButtonUI.initControl("uiGameover"), this.setSelectButton(), t.Instances.controlButtonUI.onChangeButton.add(this.setSelectButton, this), this.keyStart.onDown.add(this.onSelectButton, this) }, i.prototype.disableAllInput = function() { t.Util.disableTouch("container/no", this.ui), t.Util.disableTouch("container/replay", this.ui), t.Instances.controlButtonUI.onChangeButton.remove(this.setSelectButton, this), this.keyStart.onDown.removeAll(this) }, i.prototype.pressContinueBtn = function() { t.Audios.playSfx(this.game, "generic_button"), this.disableAllInput(), this.hide(), this.controller.goToLevelSelect() }, i.prototype.pressRestartBtn = function() { t.Audios.playSfx(this.game, "generic_button"), this.disableAllInput(), this.hide(), this.controller.restartLevel() }, i.prototype.show = function() { t.Audios.playSfx(this.game, "popup"), this.visible = !0, this.enableAllInput() }, i.prototype.hide = function() { this.visible = !1 }, i.prototype.resize = function() { this.setSelectButton() }, i.prototype.localization = function() { var t = Ph2.UISystem.findObject("container/text", this.ui);
            t.loadTexture("atlas_texts"), t.frameName = "ui_gameover_text.png" }, i }(Phaser.Group);
    t.UIGameOver = e }(GameGlitch || (GameGlitch = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameGlitch;
! function(t) { var e;! function(t) { t[t.ESC = 0] = "ESC", t[t.ENTER = 1] = "ENTER" }(e || (e = {})); var i;! function(t) { t[t.canvas = 0] = "canvas", t[t.command1 = 1] = "command1", t[t.command2 = 2] = "command2", t[t.delete = 3] = "delete", t[t.play = 4] = "play", t[t.characterButton = 5] = "characterButton", t[t.playlist = 6] = "playlist", t[t.command6 = 7] = "command6" }(i = t.UIElement || (t.UIElement = {})); var n = function() {
        function t() {} return t.resourcesBarSelect = [{ key: "back.png" }, { key: "right.png" }, { key: "spin.png" }, { key: "up.png" }, { key: "atack.png" }, { key: "arm.png" }], t.resourcesPlaylistSelect = [{ key: "sel_left.png" }, { key: "sel_right.png" }, { key: "sel_spin.png" }, { key: "sel_up.png" }, { key: "sel_atack.png" }, { key: "sel_arm.png" }], t.resourcesNewCommands = "selec_1.png", t }();
    t.VisualButtonConfig = n; var s = function(s) {
        function o(t, e, i) { var n = s.call(this, t.game) || this; return n.controller = t, n.commandsEnable = e, n.keys = [], n.isCompleted = !1, n.pauseEnable = !0, n.isPlay = !0, n.buttonsCommandsEnabled = !0, n.buttonsEnabled = !0, n.timerInitDrag = n.game.time.create(!1), n.commandPlaylistType = [], n.level = i, n.weaponEnable = !0, n.ui = n.game.add.ph2UI("ui_gameplay", "atlas_ui_gameplay"), n.add(n.ui), n.getElementsUI(), n.hideButtonGoToPlayer(), n.createPlaylist(), n.setInitButton(), n.addTouchCallback(), n.addKeyControl(), n.checkFixIOS(), n.setContainerPlaylist(1), n.saveElementTutorial(), n.localization(), n } return __extends(o, s), o.prototype.localization = function() { t.Instances.localization.localizeText("container_score/score_text", this.ui, "score"), t.Instances.localization.localizeText("container_score/steps_text", this.ui, "steps") }, o.prototype.saveElementTutorial = function() { this.elements = [], this.elements[i.canvas] = this.ui, this.elements[i.command1] = Ph2.UISystem.findObject("container_commands/button1", this.ui), this.elements[i.command2] = Ph2.UISystem.findObject("container_commands/button2", this.ui), this.elements[i.command6] = Ph2.UISystem.findObject("container_commands/button6", this.ui), this.elements[i.play] = Ph2.UISystem.findObject("container_play/play", this.ui), this.elements[i.delete] = Ph2.UISystem.findObject("container_delete/delete", this.ui), this.elements[i.characterButton] = Ph2.UISystem.findObject("character", this.ui), this.elements[i.playlist] = this.groupPlaylist }, o.prototype.getElementsUI = function() { this.buttonGoToPlayer = Ph2.UISystem.findObject("character", this.ui), this.textScore = Ph2.UISystem.findObject("container_score/score", this.ui), this.textStep = Ph2.UISystem.findObject("container_score/steps1", this.ui), this.textTotal = Ph2.UISystem.findObject("container_score/steps3", this.ui), t.PlayerType[t.ConfigGame.levels[this.level].alien] === t.PlayerType.fourarms ? this.buttonGoToPlayer.frameName = "fourarms.png" : this.buttonGoToPlayer.frameName = "wildvine.png" }, o.prototype.getElement = function(t) { return this.elements[t] }, o.prototype.createPlaylist = function() { Ph2.UISystem.findObject("container_commands/container_playlist", this.ui).visible = !1, this.groupPlaylist = this.game.add.group(), this.groupPlaylist.y = -93.2, this.backGroundParts = [], this.commandsPlaylist = [], this.scoresPlaylist = [], this.scoresTweens = []; for (var t, e, i, s = 0; s < 12; s++)(t = new Phaser.Sprite(this.game, 0, 0, "atlas_ui_gameplay", "base_3.png")).anchor.set(.5, .5), this.groupPlaylist.add(t), this.backGroundParts.push(t); for (s = 0; s < 12; s++)(e = new Phaser.Sprite(this.game, 0, 0, "atlas_ui_gameplay", n.resourcesNewCommands)).anchor.set(.5, .5), this.groupPlaylist.add(e), this.commandsPlaylist.push(e), i = new Phaser.Text(this.game, 0, 0, "00", { font: "24px LubalinGraphITCTurnerAra-Bd", fill: "#ffffff", stroke: "#000000", strokeThickness: 5 }), this.groupPlaylist.add(i), this.scoresTweens.push(null), this.scoresPlaylist.push(i), i.visible = !1;
            this.textWeaponsCharge = new Phaser.Text(this.game, 0, 0, "00", { font: "24px LubalinGraphITCTurnerAra-Bd", fill: "#ffffff", stroke: "#000000", strokeThickness: 5 }), this.textWeaponsCharge.visible = !1, this.commandPlaylistSelect = new Phaser.Sprite(this.game, 0, 0, "atlas_ui_gameplay", n.resourcesNewCommands), this.commandPlaylistSelect.anchor.set(.5, .5), this.commandPlaylistSelect.visible = !1, this.groupPlaylist.add(this.commandPlaylistSelect) }, o.prototype.setInitButton = function() { var t, e = Ph2.UISystem.findObject("container_commands", this.ui);
            e.addChild(this.groupPlaylist); var i = Ph2.UISystem.findObject("container_commands/container_playlist", this.ui);
            e.swapChildren(i, this.groupPlaylist), e.resize(80 + 80 * this.commandsEnable.length, 80); for (var s = this.commandsEnable.length % 2 == 0 ? -40 - 80 * (Math.floor(this.commandsEnable.length / 2) - 1) : -80 * Math.floor(this.commandsEnable.length / 2), o = 0; o < 6; o++)
                if (t = Ph2.UISystem.findObject("container_commands/button" + (o + 1), this.ui), o < this.commandsEnable.length) { t.x = s + 80 * o; var a = n.resourcesBarSelect[this.commandsEnable[o]].key;
                    t.setFrames(a, a, a, a), this.lastButtonCommand = t } else t.visible = !1 }, o.prototype.disableWeapon = function() { this.weaponEnable = !1 }, o.prototype.setContainerPlaylist = function(t) { var e = t % 2 == 0 ? -32 - 64 * (Math.floor(t / 2) - 1) : -64 * Math.floor(t / 2);
            this.offSetXPlayList = e; for (var i = 0, n = 3, s = 0; s < t; s++) 3 === i && (i = 0, n = 3 === n ? 5 : 3), this.backGroundParts[s].x = e + 64 * s, this.backGroundParts[s].y = 0, this.backGroundParts[s].frameName = "base_" + n + ".png", this.backGroundParts[s].visible = !0, this.commandsPlaylist[s].x = e + 64 * s, this.commandsPlaylist[s].y = 0, this.commandsPlaylist[s].visible = !0, 0 === s && (this.backGroundParts[s].frameName = "base_2.png"), s === t - 1 && t > 1 && (n = 3 === n ? 1 : 4, this.backGroundParts[s].frameName = "base_" + n + ".png"), i++; for (s = t; s < 12; s++) this.backGroundParts[s].visible = !1, this.commandsPlaylist[s].visible = !1;
            1 === t && (this.backGroundParts[0].visible = !0, this.backGroundParts[1].visible = !0, this.backGroundParts[0].x = -32, this.backGroundParts[1].x = 32, this.backGroundParts[0].frameName = "base_2.png", this.backGroundParts[1].frameName = "base_1.png") }, o.prototype.setCommadsPlaylist = function(t) { for (var e = 0; e < t.length; e++) this.commandsPlaylist[e].frameName = n.resourcesPlaylistSelect[t[e]].key;
            t.length < 12 && (this.commandsPlaylist[t.length].frameName = n.resourcesNewCommands), this.commandPlaylistType = t.slice(); var i = t.length < 12 ? t.length + 1 : 12;
            this.setContainerPlaylist(i) }, o.prototype.setWeapomCharge = function(t) { this.lastButtonCommand.parent.addChild(this.textWeaponsCharge), this.textWeaponsCharge.visible = !0, this.textWeaponsCharge.x = this.lastButtonCommand.x + 5, this.textWeaponsCharge.y = this.lastButtonCommand.y, this.textWeaponsCharge.text = String(t) }, o.prototype.setTextScore = function(t) { this.textScore.text = String(t) }, o.prototype.setTextStep = function(t, e) { this.textStep.text = String(t), this.textTotal.text = String(e) }, o.prototype.checkFixIOS = function() { if (t.Constants.IOS_BUTTON_PATCH) { var e = Ph2.UISystem.findObject("pause", this.ui);
                e.y += 30, e.alignment.setLandscapeAlignment("TOP_RIGHT", -15, !0, -42, !0) } }, o.prototype.addKeyControl = function() { var t;
            (t = this.game.input.keyboard.addKey(Phaser.Keyboard.ESC)).onDown.add(this.pressPause, this), this.keys[e.ESC] = t, t = this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER), this.keys[e.ENTER] = t }, o.prototype.addTouchCallback = function() { t.Util.addTouchCallbackToButton("pause", this.ui, this.pressPause, this), t.Util.addTouchCallbackToButton("container_delete/delete", this.ui, this.pressDelete, this), t.Util.addTouchCallbackToButton("container_play/play", this.ui, this.pressPlayOrStop, this), t.Util.addTouchCallbackToSprite("character", this.ui, this.pressGoToPlayer, this); for (e = 0; e < 6; e++) e < this.commandsEnable.length && t.Util.addTouchCallbackToButton("container_commands/button" + (e + 1), this.ui, this.addCommand, this, 0, e); for (var e = 0; e < 12; e++) this.commandsPlaylist[e].inputEnabled = !0, this.commandsPlaylist[e].events.onInputDown.add(this.initInputCommand, this, 0, e) }, o.prototype.addCommand = function(e, i, n, s) {
            (this.commandsEnable[s[0]] !== t.CommandType.weapon || this.weaponEnable) && this.controller.addCommand(this.commandsEnable[s[0]]) }, o.prototype.initInputCommand = function(t, e, i) { i >= this.commandPlaylistType.length ? this.commandPlaylistSelectIndex = -1 : (this.controller.endScroll(), this.commandPlaylistSelectIndex = i, this.commandsPlaylist[i].events.onInputUp.addOnce(this.endInputCommand, this, 0, i), this.isDrag = !1, this.timerInitDrag.add(300, this.changeToDrag, this), this.timerInitDrag.start()) }, o.prototype.changeToDrag = function() { this.isDrag = !0, this.timerInitDrag.stop(), this.timerInitDrag.removeAll(), this.commandSelectType = this.commandPlaylistType[this.commandPlaylistSelectIndex]; var t = this.commandsPlaylist[this.commandPlaylistSelectIndex].frameName;
            this.controller.removeCommand(this.commandPlaylistSelectIndex), this.commandPlaylistSelect.frameName = t, this.commandPlaylistSelect.visible = !0, this.game.input.addMoveCallback(this.onMoveInput, this); var e = this.game.input.getLocalPosition(this.commandPlaylistSelect.parent, this.game.input.activePointer);
            this.commandPlaylistSelect.x = e.x, this.commandPlaylistSelect.y = e.y }, o.prototype.onMoveInput = function(t, e, i) { var n = this.game.input.getLocalPosition(this.commandPlaylistSelect.parent, t);
            this.commandPlaylistSelect.x = n.x, this.commandPlaylistSelect.y = n.y }, o.prototype.endInputCommand = function(t, e, i, n) { if (-1 !== this.commandPlaylistSelectIndex)
                if (this.isDrag) { for (var s = 0, o = 0, a = this.commandsPlaylist; o < a.length; o++) a[o].visible && (s += 1);
                    s < 12 && (s += 1), s *= 64;
                    new Phaser.Point(this.commandPlaylistSelect.x, this.commandPlaylistSelect.y); if (Math.abs(this.commandPlaylistSelect.y) < 65 && Math.abs(this.commandPlaylistSelect.x - this.groupPlaylist.x) < s / 2) { var r = this.commandPlaylistSelect.x - this.offSetXPlayList,
                            h = Math.floor(r / 64) + 1;
                        this.controller.addCommand(this.commandSelectType, h), this.commandPlaylistSelect.x < this.offSetXPlayList && this.commandPlaylistSelect.x + 32 >= this.offSetXPlayList && (h = 0) } this.game.input.deleteMoveCallback(this.onMoveInput, this), this.commandPlaylistSelect.visible = !1 } else this.timerInitDrag.stop(), this.timerInitDrag.removeAll(), this.controller.removeCommand(n) }, o.prototype.enableInput = function() { this.pauseEnable = !0, this.buttonsEnabled = !0, this.enableButtonCommands(), t.Util.enableTouch("pause", this.ui), t.Util.enableTouch("container_delete/delete", this.ui), t.Util.enableTouch("container_play/play", this.ui) }, o.prototype.enableButtonCommands = function() { if (this.buttonsEnabled && this.buttonsCommandsEnabled) { for (e = 0; e < 12; e++) this.commandsPlaylist[e].inputEnabled = !0; for (var e = 0; e < 6; e++) e < this.commandsEnable.length && t.Util.enableTouch("container_commands/button" + (e + 1), this.ui) } }, o.prototype.disableInput = function() { this.pauseEnable = !1, this.buttonsEnabled = !1, this.disableButtonCommands(), t.Util.disableTouch("pause", this.ui), t.Util.disableTouch("container_delete/delete", this.ui), t.Util.disableTouch("container_play/play", this.ui) }, o.prototype.disableButtonCommands = function() { for (e = 0; e < 12; e++) this.commandsPlaylist[e].inputEnabled = !1; for (var e = 0; e < 6; e++) e < this.commandsEnable.length && t.Util.disableTouch("container_commands/button" + (e + 1), this.ui) }, o.prototype.enableKeyInput = function() { this.keys[e.ESC].onDown.add(this.pressPause, this) }, o.prototype.disableKeyInput = function() { this.keys[e.ESC].onDown.remove(this.pressPause, this) }, o.prototype.enableAllInput = function() { this.enableKeyInput(), this.enableInput() }, o.prototype.disableAllInput = function() { this.disableKeyInput(), this.disableInput() }, o.prototype.pressPause = function() { t.Audios.playSfx(this.game, "generic_button"), this.disableAllInput(), this.controller.pressPause() }, o.prototype.pressDelete = function() { t.Audios.playSfx(this.game, "icon_remove_all"), this.disableAllInput(), this.controller.clearCommands() }, o.prototype.pressGoToPlayer = function() { t.Audios.playSfx(this.game, "generic_button"), this.controller.pressGoToPlayer(), this.hideButtonGoToPlayer() }, o.prototype.pressPlayOrStop = function() { t.Audios.playSfx(this.game, "generic_button"); var e, i = Ph2.UISystem.findObject("container_delete", this.ui),
                n = Ph2.UISystem.findObject("container_play/play", this.ui);
            this.isPlay ? (e = "stop_1.png", n.setFrames(e, e, "stop_2.png", e), i.visible = !1, this.isPlay = !this.isPlay, this.buttonsCommandsEnabled = !1, this.disableButtonCommands(), this.controller.startListCommand()) : (e = "play_1.png", n.setFrames(e, e, "play_2.png", e), i.visible = !0, this.isPlay = !this.isPlay, this.controller.stopCommand()) }, o.prototype.onCompletedCommandList = function() { var t = Ph2.UISystem.findObject("container_delete", this.ui);
            Ph2.UISystem.findObject("container_play/play", this.ui).setFrames("play_1.png", "play_1.png", "play_2.png", "play_1.png"), t.visible = !0, this.isPlay = !0, this.buttonsCommandsEnabled = !0, this.clearCommands(), this.enableButtonCommands() }, o.prototype.setCurrentCommandPlayList = function(t) { this.commandsPlaylist[t].tint = 10066431 }, o.prototype.setCurrentCommandGood = function(t, e) { this.commandsPlaylist[t].tint = 10092441, this.scoresPlaylist[t].text = String(e), this.scoresPlaylist[t].visible = !0, this.scoresPlaylist[t].x = this.commandsPlaylist[t].x - 10, this.scoresPlaylist[t].y = this.commandsPlaylist[t].y - 20, this.scoresPlaylist[t].alpha = 1, this.scoresTweens[t] = this.game.add.tween(this.scoresPlaylist[t]).to({ y: this.scoresPlaylist[t].y - 30, alpha: 0 }, 500, "Linear", !0), this.scoresTweens[t].onComplete.addOnce(this.onCompletedScoreAnim, this) }, o.prototype.onCompletedScoreAnim = function(t) { t.alpha = 1, t.visible = !1 }, o.prototype.setCurrentCommandBad = function(t) { this.commandsPlaylist[t].tint = 16751001 }, o.prototype.clearCommands = function() { for (var t = 0, e = this.commandsPlaylist; t < e.length; t++) e[t].tint = 16777215 }, o.prototype.showButtonGoToPlayer = function() { this.buttonGoToPlayer.visible = !0 }, o.prototype.hideButtonGoToPlayer = function() { this.buttonGoToPlayer.visible = !1 }, o.prototype.pause = function() { console.log() }, o.prototype.resume = function() { console.log() }, o.prototype.resize = function() { console.log() }, o.prototype.destroy = function() { for (var t = 0, e = this.keys; t < e.length; t++) e[t].onDown.removeAll(this);
            s.prototype.destroy.call(this) }, o }(Phaser.Group);
    t.UIGameplay = s }(GameGlitch || (GameGlitch = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameGlitch;
! function(t) { var e = function(e) {
        function i(i, n) { var s = e.call(this, i.game) || this; return s.controller = i, s.level = n + 1, s.ui = s.game.add.ph2UI("ui_level_completed", "atlas_ui_popups"), s.selectSprite = new Phaser.Sprite(s.game, 0, 0, "atlas_ui_main_menu", "hl_mid.png"), s.selectSprite.anchor.set(.5, .5), s.btnContinue = Ph2.UISystem.findObject("play", s.ui), s.btnRestart = Ph2.UISystem.findObject("retry", s.ui), s.btnAudio = Ph2.UISystem.findObject("sound", s.ui), s.animGroup = s.game.add.ph2AnimationObject(0, 0, "stage", "atlas_ui_popups"), s.animGroup.visible = !1, s.game.device.desktop || (s.selectSprite.visible = !1), s.add(s.selectSprite), s.add(s.ui), s.hide(), s.localization(), s.setButtonAudio(t.Instances.dataManager.getAudio()), s.addTouchCallback(), s.addKeysControl(), s.checkFixIOS(), s } return __extends(i, e), i.prototype.checkFixIOS = function() { if (t.Constants.IOS_BUTTON_PATCH) { var e = void 0;
                (e = Ph2.UISystem.findObject("sound", this.ui)).y += 30, e.alignment.setLandscapeAlignment("TOP_RIGHT", -16.3, !0, -31.5, !0) } }, i.prototype.addTouchCallback = function() { t.Util.addTouchCallbackToButton("play", this.ui, this.pressContinueBtn, this), t.Util.addTouchCallbackToButton("sound", this.ui, this.switchAudio, this), t.Util.addTouchCallbackToButton("retry", this.ui, this.pressRestartBtn, this) }, i.prototype.addKeysControl = function() { this.keyStart = this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER) }, i.prototype.setButtonAudio = function(e) {!0 === e ? (t.Audios.enableAudio(this.game), this.btnAudio.setFrames("sound1.png", "sound1.png", "sound1_press.png", "sound1.png")) : (t.Audios.disableAudio(this.game), this.btnAudio.setFrames("sound2.png", "sound2.png", "sound2_press.png", "sound2.png")) }, i.prototype.switchAudio = function() { t.Audios.playSfx(this.game, "generic_button"); var e = this.controller.switchAudio();
            this.setButtonAudio(e) }, i.prototype.setSelectButton = function() { switch (this.selectSprite.visible = !0, t.Instances.controlButtonUI.actualButton) {
                case "none":
                    this.selectSprite.visible = !1; break;
                case "buttonPlay":
                    this.selectSprite.x = this.btnContinue.x, this.selectSprite.y = this.btnContinue.y, this.selectSprite.scale.set(.8, .8); break;
                case "buttonRestart":
                    this.selectSprite.x = this.btnRestart.x, this.selectSprite.y = this.btnRestart.y, this.selectSprite.scale.set(1, 1); break;
                case "buttonAudio":
                    this.selectSprite.x = this.btnAudio.x, this.selectSprite.y = this.btnAudio.y, this.selectSprite.scale.set(1, 1) } this.selectSprite.frameName = t.Instances.controlButtonUI.getHightLight() }, i.prototype.onSelectButton = function() { switch (t.Instances.controlButtonUI.actualButton) {
                case "none":
                case "buttonPlay":
                    this.pressContinueBtn(); break;
                case "buttonAudio":
                    this.switchAudio(); break;
                case "buttonRestart":
                    this.pressRestartBtn() } }, i.prototype.enableAllInput = function() { t.Util.enableTouch("play", this.ui), t.Util.enableTouch("sound", this.ui), t.Util.enableTouch("retry", this.ui), t.Instances.controlButtonUI.initControl("uiLevelCompleted"), this.setSelectButton(), t.Instances.controlButtonUI.onChangeButton.add(this.setSelectButton, this), this.keyStart.onDown.add(this.onSelectButton, this) }, i.prototype.disableAllInput = function() { t.Util.disableTouch("play", this.ui), t.Util.disableTouch("sound", this.ui), t.Util.disableTouch("retry", this.ui), t.Instances.controlButtonUI.onChangeButton.remove(this.setSelectButton, this), this.keyStart.onDown.removeAll(this) }, i.prototype.pressContinueBtn = function() { this.disableAllInput(), t.Audios.playSfx(this.game, "play_button"), this.hide(), this.controller.goToLevelSelect() }, i.prototype.pressRestartBtn = function() { t.Audios.playSfx(this.game, "generic_button"), this.disableAllInput(), this.hide(), this.controller.restartLevel() }, i.prototype.show = function() { t.Audios.playSfx(this.game, "stage_completed"), this.animGroup.ph2Animations.play("stage_anim", 1, !1), this.visible = !0, this.enableAllInput() }, i.prototype.hide = function() { this.visible = !1 }, i.prototype.localization = function() { t.Instances.localization.localizeText("container/level", this.ui, String(this.level), !0), t.Instances.localization.localizeText("container/title", this.ui, "level_completed"), t.Instances.localization.localizeText("container/score_text", this.ui, "score"), t.Instances.localization.localizeText("container/steps_text", this.ui, "steps") }, i.prototype.setUI = function(e, i, n, s, o) { var a = [];
            a.push(Ph2.UISystem.findObject("container/star1", this.ui)), a.push(Ph2.UISystem.findObject("container/star2", this.ui)), a.push(Ph2.UISystem.findObject("container/star3", this.ui)); for (var r = 0; r < 3; r++) a[r].visible = r < o;
            t.Instances.localization.localizeText("container/high_score", this.ui, String(i), !0), t.Instances.localization.localizeText("container/score", this.ui, String(e), !0), t.Instances.localization.localizeText("container/high_step", this.ui, String(s), !0), t.Instances.localization.localizeText("container/step", this.ui, String(n), !0) }, i.prototype.pause = function() { this.animGroup.ph2Animations.pause("stage_anim") }, i.prototype.resume = function() { this.animGroup.ph2Animations.resume("stage_anim") }, i.prototype.resize = function() { this.setSelectButton() }, i }(Phaser.Group);
    t.UILevelCompleted = e }(GameGlitch || (GameGlitch = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameGlitch;
! function(t) { var e = function(e) {
        function i(i) { var n = e.call(this, i.game) || this; return n.controller = i, n.commandContainers = [], n.selectLevelIndex = 0, n.ui = n.game.add.ph2UI("ui_level_selection", "atlas_ui_level_select"), n.selectSprite = new Phaser.Sprite(n.game, 0, 0, "atlas_ui_level_select", "hl_mid.png"), n.selectSprite.anchor.set(.5, .5), n.game.device.desktop || (n.selectSprite.visible = !1), n.levelSelectAnimation = n.game.add.ph2AnimationObject(0, 0, "lvl_select", "atlas_ui_level_select"), n.levelSelectAnimation.ph2Animations.play("lvl_loop"), n.ui.addChild(n.levelSelectAnimation), n.ui.sendToBack(n.levelSelectAnimation), n.chargeAnimation = n.game.add.ph2AnimationObject(0, 0, "charge_level", "atlas_ui_level_select"), n.chargeAnimation.visible = !1, n.add(n.selectSprite), n.add(n.ui), n.btnHome = Ph2.UISystem.findObject("back", n.ui), n.btnAudio = Ph2.UISystem.findObject("sound", n.ui), n.btnHome.loadTexture("atlas_ui_level_select"), n.btnHome.setFrames("main.png", "main.png", "main_press.png", "main.png"), n.localization(), n.addTouchCallback(), n.addKeysControl(), n.disableAllInput(), n.setButtonAudio(t.Instances.dataManager.getAudio()), n.checkFixIOS(), n } return __extends(i, e), i.prototype.checkFixIOS = function() { if (Game.Constants.IOS_BUTTON_PATCH) { var t = void 0;
                (t = Ph2.UISystem.findObject("back", this.ui)).y += 30, t.alignment.setLandscapeAlignment("TOP_LEFT", -7.6, !0, -21.6, !0), (t = Ph2.UISystem.findObject("sound", this.ui)).y += 30, t.alignment.setLandscapeAlignment("TOP_RIGHT", -5, !0, -31.5, !0) } }, i.prototype.localization = function() { t.Instances.localization.localizeText("container/title", this.ui, "level_select") }, i.prototype.init = function() { t.Instances.controlButtonUI.initControl("uiLevelSelect"), this.createLevelBtn(), t.Instances.controlButtonUI.onChangeButton.add(this.setSelectButton, this), this.setSelectButton() }, i.prototype.initAnimation = function() { t.Instances.controlButtonUI.addControl(this.game), this.enableAllInput(), t.Instances.dataManager.getNeedAnimLevelAnim() ? (t.Instances.dataManager.getLevelCompelteded() < 8 ? this.addAnimation() : this.initAnimStep1(), t.Instances.dataManager.seeLevelUnlock()) : this.initAnimStep1() }, i.prototype.showFinalMessage = function() { this.levelSelectAnimation.visible = !1, this.levelSelectAnimation.ph2Animations.stop() }, i.prototype.endFinalMessage = function() { this.levelSelectAnimation.visible = !0, this.enableAllInput(), t.Instances.controlButtonUI.addControl(this.game), this.levelSelectAnimation.ph2Animations.play("lvl_loop") }, i.prototype.initAnimStep1 = function() { this.initAnimStep3() }, i.prototype.initAnimStep2 = function() { this.levelCharacterAnimation.ph2Animations.play("character_color_out").onComplete.addOnce(this.initAnimStep3, this) }, i.prototype.initAnimStep3 = function() { this.enableAllInput(), t.Instances.controlButtonUI.addControl(this.game) }, i.prototype.addKeysControl = function() { this.keyStart = this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER), this.keyBack = this.game.input.keyboard.addKey(Phaser.Keyboard.ESC) }, i.prototype.setSelectButton = function() { switch (this.selectSprite.visible = !0, this.selectSprite.scale.set(1, 1), t.Instances.controlButtonUI.actualButton) {
                case "buttonBack":
                    this.selectSprite.scale.set(1.25, 1.25), this.selectSprite.x = this.btnHome.x, this.selectSprite.y = this.btnHome.y; break;
                case "buttonAudio":
                    this.selectSprite.x = this.btnAudio.x, this.selectSprite.y = this.btnAudio.y; break;
                case "none":
                    this.selectSprite.visible = !1; var e = t.Instances.dataManager.getLevelCompelteded(),
                        i = e < 0 ? 1 : e + 2;
                    i = 11 === i ? 10 : i, this.changeLevel(i - 1); break;
                default:
                    var n = parseInt(t.Instances.controlButtonUI.actualButton[t.Instances.controlButtonUI.actualButton.length - 1], 10);
                    0 === n && (n = 10); var s = Ph2.UISystem.findObject("stage" + String(n), this.ui);
                    this.selectSprite.x = s.x, this.selectSprite.y = s.y, this.selectSprite.scale.set(1, 1), this.changeLevel(n - 1) } this.selectSprite.frameName = t.Instances.controlButtonUI.getHightLight() }, i.prototype.onSelectButton = function() { switch (t.Instances.controlButtonUI.actualButton) {
                case "buttonBack":
                    this.pressHomeBtn(); break;
                case "none":
                    this.startSelectLevel(); break;
                case "buttonAudio":
                    this.switchAudio(); break;
                default:
                    this.startSelectLevel() } }, i.prototype.addAnimation = function() { this.disableAllInput(); var e = Ph2.UISystem.findObject("stage" + String(t.Instances.dataManager.getLevelCompelteded() + 2), this.ui);
            this.animGroup = this.game.add.ph2AnimationObject(0, 0, "stage", "atlas_ui_level_select"); var i = this.animGroup.ph2Animations.play("stage_anim", 1, !1);
            e.setFrames("level_0.png", "level_0.png", "level_0.png", "level_0.png"), t.Audios.playSfx(this.game, "level_unlocked"), i.onComplete.addOnce(this.completeUnlockAnimStep1, this), e.addChild(this.animGroup) }, i.prototype.completeUnlockAnimStep1 = function() { var e = Ph2.UISystem.findObject("stage" + String(t.Instances.dataManager.getLevelCompelteded() + 2), this.ui);
            this.animGroup.visible = !1, this.animGroup.destroy(), this.animGroup = null, this.changeCharacterAnim(this.selectLevelIndex), this.completeUnlockAnimStep5(), e.setFrames("level_2.png", "level_2.png", "level_2.png", "level_2.png") }, i.prototype.completeUnlockAnimStep2 = function() { this.levelCharacterAnimation.ph2Animations.play("character_change", 1, !1).onComplete.addOnce(this.completeUnlockAnimStep3, this) }, i.prototype.completeUnlockAnimStep3 = function() { this.levelCharacterAnimation.ph2Animations.play("character_play", 1, !1).onComplete.addOnce(this.completeUnlockAnimStep4, this) }, i.prototype.completeUnlockAnimStep4 = function() { this.levelCharacterAnimation.ph2Animations.play("character_color_out").onComplete.addOnce(this.completeUnlockAnimStep5, this) }, i.prototype.completeUnlockAnimStep5 = function() { this.enableAllInput(), t.Instances.controlButtonUI.addControl(this.game) }, i.prototype.createLevelBtn = function() { var e, i, n, s, o, a = t.Instances.dataManager.getLevelCompelteded();
            this.levelCompleted = a; for (g = 0; g < 10; g++) { e = Ph2.UISystem.findObject("stage" + String(g + 1), this.ui), i = Ph2.UISystem.findObject("stage" + String(g + 1) + "/stage", this.ui), n = Ph2.UISystem.findObject("stage" + String(g + 1) + "/container_star", this.ui), s = [], o = t.Instances.dataManager.getStarsLevel(g); for (var r = 0; r < 3; r++) s.push(Ph2.UISystem.findObject("stage" + String(g + 1) + "/container_star/star" + (r + 1), this.ui)); if (i.setText(String(g + 1)), g <= a) { n.visible = !0; for (h = 0; h < 3; h++) s[h].visible = h < o;
                    e.setFrames("level_1.png", "level_1.png", "level_1.png", "level_1.png") } else if (g <= a + 1) { n.visible = !0; for (var h = 0; h < 3; h++) s[h].visible = h < o;
                    e.setFrames("level_2.png", "level_2.png", "level_2.png", "level_2.png") } else n.visible = !1, e.setFrames("level_0.png", "level_0.png", "level_0.png", "level_0.png");
                this.commandContainers.push(e) } t.Instances.controlButtonUI.setButton("none"); var l;
            l = a > -1 ? a < 4 ? a + 1 : 4 : -1; var c, u, p, d, m = a < 0 ? 1 : a + 2;
            m = 11 === m ? 10 : m; for (var g = 0; g < m; g++) c = 0 === g ? "buttonBack" : g === l ? "buttonAudio" : g > 5 ? "buttonlvl" + (g - 4) : null, d = g + 1 <= a + 1 && g + 2 < 11 ? "buttonlvl" + (g + 2) : null, p = g - 1 >= 0 ? "buttonlvl" + g : null, u = 0 === g && a >= 5 ? "buttonlvl6" : g <= 5 && a >= 5 && g + 5 <= a + 1 ? "buttonlvl" + (g + 6) : null, t.Instances.controlButtonUI.setButtonFlow("buttonlvl" + (g + 1), "select.png", c, u, p, d);
            t.Instances.controlButtonUI.setButtonFlow("none", "hl_mid.png", "buttonlvl" + m, "buttonlvl" + m, "buttonlvl" + m, "buttonlvl" + m), a >= 4 ? t.Instances.controlButtonUI.setButtonFlow("buttonAudio", "hl_mid.png", null, "buttonlvl5", "buttonBack", null) : a >= -1 && t.Instances.controlButtonUI.setButtonFlow("buttonAudio", "hl_mid.png", null, "buttonlvl" + (a + 2), "buttonBack", null) }, i.prototype.addTouchCallback = function() { t.Util.addTouchCallbackToButton("back", this.ui, this.pressHomeBtn, this), t.Util.addTouchCallbackToButton("sound", this.ui, this.switchAudio, this); for (var e = this, i = this, n = 0; n < 10; n++) ! function(n) { t.Util.addTouchCallbackToButton("stage" + String(n + 1), i.ui, function() { e.selectLevel(n) }, i) }(n) }, i.prototype.setButtonAudio = function(e) {!0 === e ? (t.Audios.enableAudio(this.game), this.btnAudio.setFrames("sound1.png", "sound1.png", "sound1_press.png", "sound1.png")) : (t.Audios.disableAudio(this.game), this.btnAudio.setFrames("sound2.png", "sound2.png", "sound2_press.png", "sound2.png")) }, i.prototype.switchAudio = function() { t.Audios.playSfx(this.game, "generic_button"); var e = this.controller.switchAudio();
            this.setButtonAudio(e) }, i.prototype.enableAllInput = function() { t.Util.enableTouch("back", this.ui), t.Util.enableTouch("sound", this.ui), this.keyStart.onDown.add(this.onSelectButton, this), this.keyBack.onDown.add(this.pressHomeBtn, this); for (var e = 0; e < this.commandContainers.length; e++) this.commandContainers[e].inputEnabled = !0 }, i.prototype.disableAllInput = function() { t.Util.disableTouch("back", this.ui), t.Util.disableTouch("sound", this.ui), this.keyStart.onDown.remove(this.onSelectButton, this), this.keyBack.onDown.remove(this.pressHomeBtn, this); for (var e = 0; e < this.commandContainers.length; e++) this.commandContainers[e].inputEnabled = !1 }, i.prototype.startSelectLevel = function() { this.selectLevel(this.selectLevelIndex) }, i.prototype.changeLevel = function(t) { var e = this.selectLevelIndex;
            this.selectLevelIndex = t, this.changeSelectLevel(e, this.selectLevelIndex) }, i.prototype.playLevel = function(t, e, i) { this.disableAllInput(), this.controller.selectLevel(i) }, i.prototype.changeSelectLevel = function(t, e) { var i;
            (i = Ph2.UISystem.findObject("stage" + String(t + 1), this.ui)).setFrames("level_1.png", "level_1.png", "level_1.png", "level_1.png"), (i = Ph2.UISystem.findObject("stage" + String(e + 1), this.ui)).setFrames("level_2.png", "level_2.png", "level_2.png", "level_2.png"), this.levelSelectAnimation.x = i.x, this.levelSelectAnimation.y = i.y }, i.prototype.selectLevel = function(e) { e > t.Instances.dataManager.getLevelCompelteded() + 1 || (this.disableAllInput(), this.changeLevel(e), t.Audios.playSfx(this.game, "generic_button"), this.animGroup && this.animGroup.ph2Animations.stop(), this.selectLevelAnimStep1()) }, i.prototype.selectLevelAnimStep1 = function() { this.changeCharacterAnim(this.selectLevelIndex); var t = Ph2.UISystem.findObject("stage" + String(this.selectLevelIndex + 1), this.ui);
            t.addChild(this.chargeAnimation), t.swapChildren(t.children[0], this.chargeAnimation); var e = this.chargeAnimation.ph2Animations.play("charge_play");
            this.chargeAnimation.visible = !0, e.onComplete.removeAll(this), e.onComplete.addOnce(this.playLevel, this, 0, this.selectLevelIndex) }, i.prototype.pressHomeBtn = function() { this.animGroup && this.animGroup.ph2Animations.stop("charge_play", !0, !1), this.disableAllInput(), t.Audios.playSfx(this.game, "generic_button"), this.controller.pressHome() }, i.prototype.changeCharacterAnim = function(t) {}, i.prototype.onBlur = function() { this.chargeAnimation.ph2Animations.pause(), this.levelSelectAnimation.ph2Animations.pause(), this.animGroup && this.animGroup.ph2Animations.pause() }, i.prototype.onFocus = function() { this.chargeAnimation.ph2Animations.resume(), this.levelSelectAnimation.ph2Animations.resume(), this.animGroup && this.animGroup.ph2Animations.resume() }, i.prototype.resize = function() { this.changeLevel(this.selectLevelIndex) }, i.prototype.destroy = function() { this.game.onBlur.remove(this.onBlur, this), this.game.onFocus.remove(this.onFocus, this), t.Instances.controlButtonUI.removeControl(this.game), t.Instances.controlButtonUI.onChangeButton.remove(this.setSelectButton, this), this.chargeAnimation.ph2Animations.stop(), this.levelSelectAnimation.ph2Animations.stop(), this.chargeAnimation = null, this.levelSelectAnimation = null, this.keyStart.onDown.remove(this.onSelectButton, this), this.keyBack.onDown.remove(this.pressHomeBtn, this), e.prototype.destroy.call(this) }, i }(Phaser.Group);
    t.UILevelSelect = e }(GameGlitch || (GameGlitch = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameGlitch;
! function(t) { var e = function(e) {
        function i(i) { var n = e.call(this, i.game) || this; return n.controller = i, n.ui = n.game.add.ph2UI("ui_pause", "atlas_ui_popups"), n.btnAudio = Ph2.UISystem.findObject("sound", n.ui), n.btnPlay = Ph2.UISystem.findObject("play", n.ui), n.btnExit = Ph2.UISystem.findObject("home", n.ui), n.btnReplay = Ph2.UISystem.findObject("retry", n.ui), n.btnExit.loadTexture("atlas_comic2"), n.btnExit.setFrames("main.png", "main.png", " main_press.png", "main.png"), n.selectSprite = new Phaser.Sprite(n.game, 0, 0, "atlas_ui_main_menu", "hl_mid.png"), n.selectSprite.anchor.set(.5, .5), n.game.device.desktop || (n.selectSprite.visible = !1), n.lastButton = "none", n.add(n.selectSprite), n.add(n.ui), n.addTouchCallback(), n.addKeysControl(), n.setButtonAudio(t.Instances.dataManager.getAudio()), n.localization(), n.hide(), n.checkFixIOS(), n } return __extends(i, e), i.prototype.checkFixIOS = function() { if (t.Constants.IOS_BUTTON_PATCH) { var e = void 0;
                (e = Ph2.UISystem.findObject("home", this.ui)).y += 30, e.alignment.setLandscapeAlignment("TOP_LEFT", -16.2, !0, -33.2, !0), (e = Ph2.UISystem.findObject("sound", this.ui)).y += 30, e.alignment.setLandscapeAlignment("TOP_RIGHT", -16.2, !0, -31.5, !0) } }, i.prototype.addTouchCallback = function() { t.Util.addTouchCallbackToButton("play", this.ui, this.pressResumeBtn, this), t.Util.addTouchCallbackToButton("sound", this.ui, this.switchAudio, this), t.Util.addTouchCallbackToButton("home", this.ui, this.pressExitBtn, this), t.Util.addTouchCallbackToButton("retry", this.ui, this.pressRestartBtn, this) }, i.prototype.addKeysControl = function() { this.keyStart = this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER), this.keyHome = this.game.input.keyboard.addKey(Phaser.Keyboard.ESC) }, i.prototype.setSelectButton = function() { switch (this.selectSprite.visible = !0, t.Instances.controlButtonUI.actualButton) {
                case "none":
                    this.selectSprite.visible = !1; break;
                case "buttonPlay":
                    this.selectSprite.x = this.btnPlay.x, this.selectSprite.y = this.btnPlay.y, this.selectSprite.scale.set(1, 1); break;
                case "buttonHome":
                    this.selectSprite.x = this.btnExit.x, this.selectSprite.y = this.btnExit.y, this.selectSprite.scale.set(1, 1); break;
                case "buttonRestart":
                    this.selectSprite.x = this.btnReplay.x, this.selectSprite.y = this.btnReplay.y, this.selectSprite.scale.set(1, 1); break;
                case "buttonAudio":
                    this.selectSprite.x = this.btnAudio.x, this.selectSprite.y = this.btnAudio.y, this.selectSprite.scale.set(1, 1) } this.selectSprite.frameName = t.Instances.controlButtonUI.getHightLight() }, i.prototype.onSelectButton = function() { switch (t.Instances.controlButtonUI.actualButton) {
                case "none":
                case "buttonPlay":
                    this.pressResumeBtn(); break;
                case "buttonAudio":
                    this.switchAudio(); break;
                case "buttonHome":
                    this.pressExitBtn(); break;
                case "buttonRestart":
                    this.pressRestartBtn() } }, i.prototype.show = function() { t.Audios.playSfx(this.game, "popup"), t.Instances.controlButtonUI.initControl("uiPause"), this.setSelectButton(), this.lastButton = "none", this.enableAllInput(), this.visible = !0 }, i.prototype.hide = function() { this.lastButton = "none", this.disableAllInput(), this.visible = !1 }, i.prototype.setButtonAudio = function(e) {!0 === e ? (t.Audios.enableAudio(this.game), this.btnAudio.setFrames("sound1.png", "sound1.png", "sound1_press.png", "sound1.png")) : (t.Audios.disableAudio(this.game), this.btnAudio.setFrames("sound2.png", "sound2.png", "sound2_press.png", "sound2.png")) }, i.prototype.switchAudio = function() { t.Audios.playSfx(this.game, "generic_button"); var e = this.controller.switchAudio();
            this.setButtonAudio(e) }, i.prototype.pressResumeBtn = function() { t.Audios.playSfx(this.game, "generic_button"), this.hide(), this.controller.pressResume() }, i.prototype.pressRestartBtn = function() { t.Audios.playSfx(this.game, "generic_button"), this.disableAllInput(), this.controller.pressRestart() }, i.prototype.pressExitBtn = function() { t.Audios.playSfx(this.game, "generic_button"), this.disableAllInput(), this.controller.pressExit() }, i.prototype.pressHowToPlayBtn = function() { t.Audios.playSfx(this.game, "generic_button"), this.disableAllInput(), this.controller.pressHowToPlay() }, i.prototype.enableAllInput = function() { t.Util.enableTouch("play", this.ui), t.Util.enableTouch("sound", this.ui), t.Util.enableTouch("home", this.ui), t.Util.enableTouch("retry", this.ui), t.Instances.controlButtonUI.initControl("uiPause"), t.Instances.controlButtonUI.setButton(this.lastButton), t.Instances.controlButtonUI.onChangeButton.add(this.setSelectButton, this), this.keyStart.onDown.add(this.onSelectButton, this), this.keyHome.onDown.add(this.pressExitBtn, this) }, i.prototype.disableAllInput = function() { t.Util.disableTouch("play", this.ui), t.Util.disableTouch("sound", this.ui), t.Util.disableTouch("home", this.ui), t.Util.disableTouch("retry", this.ui), this.lastButton = t.Instances.controlButtonUI.actualButton, t.Instances.controlButtonUI.onChangeButton.remove(this.setSelectButton, this), this.keyStart.onDown.removeAll(this), this.keyHome.onDown.removeAll(this) }, i.prototype.localization = function() { t.Instances.localization.localizeText("container/title", this.ui, "pause") }, i.prototype.resize = function() { this.setSelectButton() }, i }(Phaser.Group);
    t.UIPause = e }(GameGlitch || (GameGlitch = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameGlitch;
! function(t) {! function(t) { t[t.separate = 0] = "separate", t[t.fix = 1] = "fix", t[t.combat1 = 2] = "combat1", t[t.combat2 = 3] = "combat2" }(t.TutorialID || (t.TutorialID = {})); var e;! function(t) { t[t.tutorial = 0] = "tutorial", t[t.howToPlay = 1] = "howToPlay" }(e = t.TutorialType || (t.TutorialType = {})); var i = function(i) {
        function n(t) { var e = i.call(this, t.game) || this;
            e.controller = t, e.ui = e.game.add.ph2UI("ui_tutorial_pause", "ui_tutorial"), e.selectSprite = new Phaser.Sprite(e.game, 0, 0, "atlas_ui_main_menu", "hl_big.png"), e.selectSprite.anchor.set(.5, .5), e.game.device.desktop || (e.selectSprite.visible = !1), e.buttonArrowLeft = Ph2.UISystem.findObject("arrows/left", e.ui), e.buttonArrowRight = Ph2.UISystem.findObject("arrows/right", e.ui), e.arrowContainer = Ph2.UISystem.findObject("arrows", e.ui), e.spriteCircles = [], e.spriteCirclesSelect = []; var n; return n = Ph2.UISystem.findObject("container_pause/circle1", e.ui), e.spriteCircles.push(n), n = Ph2.UISystem.findObject("container_pause/circle2", e.ui), e.spriteCircles.push(n), n = Ph2.UISystem.findObject("container_pause/circle3", e.ui), e.spriteCircles.push(n), n = Ph2.UISystem.findObject("container_pause/circle1/circle", e.ui), e.spriteCirclesSelect.push(n), n = Ph2.UISystem.findObject("container_pause/circle2/circle", e.ui), e.spriteCirclesSelect.push(n), n = Ph2.UISystem.findObject("container_pause/circle3/circle", e.ui), e.spriteCirclesSelect.push(n), e.buttonClose = Ph2.UISystem.findObject("back", e.ui), e.resize(), e.add(e.selectSprite), e.add(e.ui), e.setInitUI(), e.addKeysControl(), e.hide(), e.addTouchCallback(), e } return __extends(n, i), n.prototype.addTouchCallback = function() { t.Util.addTouchCallbackToButton("back", this.ui, this.close, this) }, n.prototype.addKeysControl = function() { this.keyStart = this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER), this.keyHome = this.game.input.keyboard.addKey(Phaser.Keyboard.ESC), this.keyLeft = this.game.input.keyboard.addKey(Phaser.Keyboard.LEFT), this.keyRight = this.game.input.keyboard.addKey(Phaser.Keyboard.RIGHT) }, n.prototype.setInitUI = function() { this.pages = 1; for (var t = 0, e = this.spriteCircles; t < e.length; t++) e[t].visible = !1;
            this.arrowContainer.visible = !1, this.addAnimation() }, n.prototype.addAnimation = function() { var t;
            this.animsTutorial = [], t = this.game.add.ph2AnimationObject(0, 0, "fix_tutorial", "ui_tutorial"), Ph2.UISystem.findObject("container_pause/tutorial_pivot", this.ui).addChild(t), this.animsTutorial.push(t) }, n.prototype.showHowToPlay = function() { t.Audios.playSfx(this.game, "popup"), this.keyStart.onDown.add(this.close, this), this.keyHome.onDown.add(this.close, this), this.visible = !0, this.tutorialType = e.howToPlay, this.enableAllInput(); var i = this.game.device.desktop ? "fix_tutorial_anim2" : "fix_tutorial_anim2_mobile";
            this.animsTutorial[0].ph2Animations.play(i, 1, !0) }, n.prototype.close = function() { switch (t.Audios.playSfx(this.game, "generic_button"), this.keyStart.onDown.remove(this.close, this), this.keyHome.onDown.remove(this.close, this), this.tutorialType) {
                case e.howToPlay:
                    this.animsTutorial[0].ph2Animations.stop(), this.hide(), this.controller.closeHowToPlay(); break;
                case e.tutorial:
                    this.animsTutorial[0].ph2Animations.stop(), this.hide(), this.controller.closeTutorial() } }, n.prototype.hide = function() { this.disableAllInput(), this.visible = !1 }, n.prototype.enableAllInput = function() { t.Util.enableTouch("back", this.ui) }, n.prototype.disableAllInput = function() { t.Util.disableTouch("back", this.ui) }, n.prototype.pause = function() { for (var t = 0, e = this.animsTutorial; t < e.length; t++) e[t].ph2Animations.pause() }, n.prototype.resume = function() { for (var t = 0, e = this.animsTutorial; t < e.length; t++) e[t].ph2Animations.resume() }, n.prototype.resize = function() { this.selectSprite.x = this.buttonClose.x, this.selectSprite.y = this.buttonClose.y }, n.prototype.destroy = function() { for (var t = 0, e = this.animsTutorial; t < e.length; t++) { var n = e[t];
                n.ph2Animations.stop(), n.destroy() } this.animsTutorial = [], i.prototype.destroy.call(this) }, n }(Phaser.Group);
    t.UITutorial = i }(GameGlitch || (GameGlitch = {}));
var GameGlitch;
! function(t) { var e;! function(t) { t[t.menu = 0] = "menu", t[t.gp1 = 1] = "gp1", t[t.gp2 = 2] = "gp2", t[t.gp3 = 3] = "gp3" }(e = t.MUSIC || (t.MUSIC = {})); var i = function() {
        function i() {} return i.loadAudioSprite = function(e, n) { for (var s = e.cache.getJSON(n), o = s.urls.length, a = [], r = 0; r < o; r++) a.push("glitches/assets/audio/" + s.urls[r] + "?v=" + t.Constants.GAME_VERSION);
            i.audioSprite = new Howl({ src: a, preload: !0, sprite: s.sprite }), e.ph2AudioManager.setAudioEffectsFile(i.audioSprite) }, i.playMusic = function(n, s, o) { void 0 === o && (o = 0), s ? (n.ph2AudioManager.switchMusic(i.music[e.menu]), i.actualMusic = e.menu) : 9 === o ? (n.ph2AudioManager.switchMusic(i.music[e.gp3]), i.actualMusic = e.gp3) : 1 === o || 3 === o || 5 === o || 7 === o ? (n.ph2AudioManager.switchMusic(i.music[e.gp2]), i.actualMusic = e.gp2) : (n.ph2AudioManager.switchMusic(i.music[e.gp1]), i.actualMusic = e.gp1), !1 === t.Instances.dataManager.getAudio() && this.disableAudio(n) }, i.playSfx = function(t, e) { var n = t.ph2AudioManager.playEffect(e, !1);
            i.addSoundPlaying(n) }, i.addSoundPlaying = function(t) { null !== t && (i.sfxPlaying.push(t), Howler._howls[3].on("end", function() { i.removeSoundPlaying(t) }, t)) }, i.removeSoundPlaying = function(t) { i.sfxPlaying.splice(i.sfxPlaying.indexOf(t), 1) }, i.playCorrectMove = function(t) { var e = t.ph2AudioManager.playEffect(i.audiosCorrectMove[i.indexCorrectMove], !1);
            i.addSoundPlaying(e), i.indexCorrectMove = i.indexCorrectMove + 1 < i.audiosCorrectMove.length ? i.indexCorrectMove + 1 : 0 }, i.playSfxComic = function(t) { var e = t.ph2AudioManager.playEffect(i.audiosComic[i.indexComic], !1);
            i.addSoundPlaying(e), i.indexComic = 0 === i.indexComic ? 1 : 0 }, i.resumeAllSfx = function() { for (var t = 0, e = i.sfxPlaying.length; t < e; t++) Howler._howls[3].play(i.sfxPlaying[t]) }, i.pauseAllSfx = function() { for (var t = 0, e = i.sfxPlaying.length; t < e; t++) Howler._howls[3].pause(i.sfxPlaying[t]) }, i.disableAudio = function(t) { t.ph2AudioManager.getMusicEnabled() && (t.ph2AudioManager.switchMusicState(), t.ph2AudioManager.switchSfxState(), t.ph2AudioManager.stopMusic()) }, i.enableAudio = function(t) { t.ph2AudioManager.getMusicEnabled() || (t.ph2AudioManager.switchMusicState(), t.ph2AudioManager.switchSfxState(), t.ph2AudioManager.switchMusic(i.music[i.actualMusic])) }, i.onBlur = function(t) { t.ph2AudioManager.pauseMusic(), i.pauseAllSfx() }, i.onFocus = function(t) { t.ph2AudioManager.resumeMusic(), i.resumeAllSfx() }, i.music = [new Howl({ src: ["glitches/assets/audio/menu.ogg?v=" + t.Constants.GAME_VERSION, "glitches/assets/audio/menu.mp3?v=" + t.Constants.GAME_VERSION], preload: !0, loop: !0, volume: 1 }), new Howl({ src: ["glitches/assets/audio/gp1.ogg?v=" + t.Constants.GAME_VERSION, "glitches/assets/audio/gp1.mp3?v=" + t.Constants.GAME_VERSION], preload: !0, loop: !0, volume: 1 }), new Howl({ src: ["glitches/assets/audio/gp2.ogg?v=" + t.Constants.GAME_VERSION, "glitches/assets/audio/gp2.mp3?v=" + t.Constants.GAME_VERSION], preload: !0, loop: !0, volume: 1 }), new Howl({ src: ["glitches/assets/audio/gp3.ogg?v=" + t.Constants.GAME_VERSION, "glitches/assets/audio/gp3.mp3?v=" + t.Constants.GAME_VERSION], preload: !0, loop: !0, volume: 1 })], i.sfxPlaying = [], i.audiosCorrectMove = ["correct_move_v1", "correct_move_v2", "correct_move_v3", "correct_move_v4"], i.indexCorrectMove = 0, i.audiosComic = ["slide_story_v1", "slide_story_v2"], i.indexComic = 0, i }();
    t.Audios = i }(GameGlitch || (GameGlitch = {}));
var GameGlitch;
! function(t) { var e = function() {
        function t() {} return t.levels = [], t.levelCount = 10, t.scoresCombo = [10, 20, 50, 100], t }();
    t.ConfigGame = e }(GameGlitch || (GameGlitch = {}));
var GameGlitch;
! function(t) {! function(t) { t[t.left = 0] = "left", t[t.right = 1] = "right", t[t.up = 2] = "up", t[t.down = 3] = "down" }(t.DirectionType || (t.DirectionType = {})) }(GameGlitch || (GameGlitch = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameStateMachine;
! function(t) { var e = function(e) {
        function i() { return e.call(this) || this } return __extends(i, e), i.prototype.init = function(e) { this.isIntroComic = e, this.isDesktop = this.game.device.desktop, this.keyEnter = this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER), this.keyMoveUp = this.game.input.keyboard.addKey(Phaser.Keyboard.UP), this.keyMoveDown = this.game.input.keyboard.addKey(Phaser.Keyboard.DOWN), this.keyMoveLeft = this.game.input.keyboard.addKey(Phaser.Keyboard.LEFT), this.keyMoveRight = this.game.input.keyboard.addKey(Phaser.Keyboard.RIGHT), this.keyMoveUp.enabled = !1, this.keyMoveDown.enabled = !1, this.keyMoveLeft.enabled = !1, this.keyMoveRight.enabled = !1, this.currentItem = t.ITEM_MENU.PLAY, this.keyEnter.enabled = !1, this.currentSound = 1 }, i.prototype.create = function() { var e, i = this;
            this.bgComicState = new Phaser.Sprite(this.game, .5 * this.game.width, .5 * this.game.height, "bg_comic"), this.bgComicState.anchor.set(.5), this.add.existing(this.bgComicState), this.group = new Phaser.Group(this.game), this.add.existing(this.group), this.uiComic = this.game.add.ph2UI("ui_comic", "atlas_comic"), this.containerButton = Ph2.UISystem.findObject("play_pivot", this.uiComic), this.containerComic = Ph2.UISystem.findObject("comic_pivot", this.uiComic), this.buttonAudio = Ph2.UISystem.findObject("sound", this.uiComic), e = Ph2.UISystem.findObject("play_pivot", this.uiComic), this.buttonPlay = this.game.add.ph2AnimationObject(0, 0, "play", "atlas_comic"), this.isIntroComic ? this.animationComic = this.game.add.ph2AnimationObject(0, 0, "comic_intro", "atlas_comic") : this.animationComic = this.game.add.ph2AnimationObject(0, 0, "comic_end", "atlas_comic"), this.buttonPlay.visible = !1, this.animationComic.visible = !1, this.highlightSound = new Phaser.Sprite(this.game, 0, 0, "atlas_ui", "hl_mid.png"), this.highlightSound.anchor.set(.5), this.highlightPlay = new Phaser.Sprite(this.game, 0, 0, "atlas_ui", "hl_rom.png"), this.highlightPlay.anchor.set(.5), this.originalSoundY = Ph2.UISystem.findObject("sound", this.uiComic).y, this.containerComic.addChild(this.animationComic), this.containerButton.addChild(this.buttonPlay), this.group.add(this.highlightSound), this.group.add(this.uiComic), e.addChild(this.highlightPlay), this.highlightPlay.visible = !1, this.highlightSound.visible = !1, t.Instances.Transition.playOut(), t.Instances.Transition.onCompletedOut.addOnce(function() { i.showComic() }, this), this.game.onBlur.add(function() { t.Instances.DataManager.getAudio() && i.game.ph2AudioManager.pauseMusic() }, this), this.game.onFocus.add(function() { t.Instances.DataManager.getAudio() && !t.Instances.IncorrectOrientation && i.game.ph2AudioManager.resumeMusic() }, this), t.Constants.IOS_BUTTON_PATCH && this.repositionButtonsIOS(), this.checkAudio(), this.resize() }, i.prototype.repositionButtonsIOS = function() { Ph2.UISystem.findObject("sound", this.uiComic).y = this.originalSoundY + 35 }, i.prototype.checkAudio = function() { t.Instances.DataManager.getAudio() ? (this.buttonAudio.setFrames("sound1.png", "sound1.png", "sound1_press.png", "sound1.png"), this.game.ph2AudioManager.switchMusic(t.Music.MainMenu), t.Instances.IncorrectOrientation && this.game.ph2AudioManager.pauseMusic()) : this.buttonAudio.setFrames("sound2.png", "sound2.png", "sound2_press.png", "sound2.png") }, i.prototype.showComic = function() { var t, e = this;
            this.animationComic.visible = !0, this.isIntroComic ? (t = this.animationComic.ph2Animations.play("comic_intro_anim", 1, !1), Ph2.AnimationSystem.findObject("comic1_2/comic_screen", this.animationComic).ph2Animations.play("comic_screen_anim", 1, !0)) : t = this.animationComic.ph2Animations.play("comic_end_anim", 1, !1), t.onComplete.add(this.showButton, this), t.onEvent.add(function() { e.playSoundComic() }, this) }, i.prototype.playSoundComic = function() { 1 === this.currentSound ? (this.game.ph2AudioManager.playEffect("slide_story_v1", !1), this.currentSound++) : (this.game.ph2AudioManager.playEffect("slide_story_v2", !1), this.currentSound = 1) }, i.prototype.showButton = function() { this.buttonPlay.visible = !0, this.buttonPlay.ph2Animations.play("play_comic_anim", 1, !1).onComplete.add(this.addTouchListeners, this) }, i.prototype.addTouchListeners = function() { this.buttonPlay.inputEnabled = !0, this.buttonPlay.input.useHandCursor = !0, this.buttonPlay.events.onInputDown.add(this.playButtonAnimation, this), this.buttonAudio.events.onInputUp.add(this.switchAudio, this), this.keyMoveUp.enabled = !0, this.keyMoveDown.enabled = !0, this.keyMoveLeft.enabled = !0, this.keyMoveRight.enabled = !0, this.keyEnter.enabled = !0, this.keyMoveUp.onDown.add(this.moveMenuUp, this), this.keyMoveDown.onDown.add(this.moveMenuDown, this), this.keyMoveLeft.onDown.add(this.moveMenuLeft, this), this.keyMoveRight.onDown.add(this.moveMenuRight, this), this.keyEnter.onDown.add(this.actionKeyPressed, this) }, i.prototype.switchAudio = function() { this.game.ph2AudioManager.playEffect("generic_button", !1), t.Instances.DataManager.getAudio() ? (t.Instances.DataManager.saveAudio(!1), this.buttonAudio.setFrames("sound2.png", "sound2.png", "sound2_press.png", "sound2.png"), this.game.ph2AudioManager.stopMusic(), this.game.ph2AudioManager.switchSfxState(), this.game.ph2AudioManager.switchMusicState()) : (t.Instances.DataManager.saveAudio(!0), this.buttonAudio.setFrames("sound1.png", "sound1.png", "sound1_press.png", "sound1.png"), this.game.ph2AudioManager.switchMusicState(), this.game.ph2AudioManager.switchMusic(t.Music.MainMenu), this.game.ph2AudioManager.switchSfxState()) }, i.prototype.moveMenuUp = function() { switch (this.currentItem) {
                case t.ITEM_MENU.PLAY:
                    this.currentItem = t.ITEM_MENU.AUDIO; break;
                case t.ITEM_MENU.AUDIO:
            } this.updateButtonOn() }, i.prototype.moveMenuDown = function() { switch (this.currentItem) {
                case t.ITEM_MENU.PLAY:
                    break;
                case t.ITEM_MENU.AUDIO:
                    this.currentItem = t.ITEM_MENU.PLAY } this.updateButtonOn() }, i.prototype.moveMenuLeft = function() { switch (this.currentItem) {
                case t.ITEM_MENU.PLAY:
                    break;
                case t.ITEM_MENU.AUDIO:
                    this.currentItem = t.ITEM_MENU.PLAY } this.updateButtonOn() }, i.prototype.moveMenuRight = function() { switch (this.currentItem) {
                case t.ITEM_MENU.PLAY:
                    this.currentItem = t.ITEM_MENU.AUDIO; break;
                case t.ITEM_MENU.AUDIO:
            } this.updateButtonOn() }, i.prototype.actionKeyPressed = function() { switch (this.currentItem) {
                case t.ITEM_MENU.PLAY:
                    this.goToLevelSelect(); break;
                case t.ITEM_MENU.AUDIO:
                    this.switchAudio() } }, i.prototype.updateButtonOn = function() { this.isDesktop && (this.highlightSound.visible = !1, this.highlightPlay.visible = !1, this.currentItem === t.ITEM_MENU.PLAY ? this.highlightPlay.visible = !0 : (this.highlightSound.x = this.buttonAudio.x, this.highlightSound.y = this.buttonAudio.y, this.highlightSound.visible = !0)) }, i.prototype.playButtonAnimation = function() { this.game.ph2AudioManager.playEffect("generic_button", !1), this.game.ph2AudioManager.playEffect("slide_story_v1", !1), this.buttonPlay.inputEnabled = !1, this.keyEnter.enabled = !1, this.highlightPlay.visible = !1, this.buttonPlay.ph2Animations.play("play_comic_anim2", 1, !1).onComplete.add(this.playComicOutAnimation, this), this.game.add.tween(this.buttonPlay).to({ alpha: 0 }, 750, "Linear", !0) }, i.prototype.playComicOutAnimation = function() {
            (this.isIntroComic ? this.animationComic.ph2Animations.play("comic_intro_out_anim", 1, !1) : this.animationComic.ph2Animations.play("comic_end_out_anim", 1, !1)).onComplete.add(this.goToLevelSelect, this) }, i.prototype.goToLevelSelect = function() { var e = this;
            this.game.ph2AudioManager.playEffect("generic_button", !1), t.Instances.Transition.playIn(), t.Instances.Transition.onCompletedIn.addOnce(function() { t.Instances.Transition.playStand(), e.isIntroComic ? e.game.state.start("statemachinelevelSelectState", !0, !1, !e.isIntroComic) : e.game.state.start("gameSelect", !0, !1, !e.isIntroComic) }, this) }, i.prototype.resize = function() { var e, i, n;
            this.bgComicState.x = .5 * this.game.width, this.bgComicState.y = .5 * this.game.height, this.bgComicState.scale.set(1, 1), (i = t.Constants.CALCULATED_WIDTH - this.bgComicState.width) > (e = t.Constants.CALCULATED_HEIGHT - this.bgComicState.height) ? i > 0 && (n = t.Constants.CALCULATED_WIDTH / this.bgComicState.width, this.bgComicState.scale.set(n, n)) : e > 0 && (n = t.Constants.CALCULATED_HEIGHT / this.bgComicState.height, this.bgComicState.scale.set(n, n)) }, i }(Phaser.State);
    t.ComicState = e }(GameStateMachine || (GameStateMachine = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameStateMachine;
! function(t) { var e = function(e) {
        function i() { return e.call(this) || this } return __extends(i, e), i.prototype.init = function(e) { switch (this.currentLevel = e, this.selectedAlien = t.ALIEN.GREY_MATTER, this.bugs = [], this.orbs = [], this.aliens = [], this.projectiles = [], this.tutorialCircles = [], this.animationsTutorial = [], this.gameCompleted = !1, this.hackingCompleted = !1, this.showingReturnHome = !1, this.showingRestartGame = !1, this.powerUpActive = !1, this.isPaused = !1, this.isHandTimerActive = !1, this.isDecreasingHack = !1, this.isShowingHint = !1, this.powerUpBarSize = 104, this.forcedOrbCount = 0, this.levelData = this.game.cache.getJSON("level_data").levels[this.currentLevel], this.alienData = this.game.cache.getJSON("alien_data"), this.hackingBarSize = this.levelData.hack_bar_size, this.keyAlien1 = this.game.input.keyboard.addKey(Phaser.Keyboard.ONE), this.keyAlien2 = this.game.input.keyboard.addKey(Phaser.Keyboard.TWO), this.keyAlien3 = this.game.input.keyboard.addKey(Phaser.Keyboard.THREE), this.keyAlien4 = this.game.input.keyboard.addKey(Phaser.Keyboard.FOUR), this.keyAction = this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR), this.keyUp = this.game.input.keyboard.addKey(Phaser.Keyboard.UP), this.keyDown = this.game.input.keyboard.addKey(Phaser.Keyboard.DOWN), this.keyLeft = this.game.input.keyboard.addKey(Phaser.Keyboard.LEFT), this.keyRight = this.game.input.keyboard.addKey(Phaser.Keyboard.RIGHT), this.keyPause = this.game.input.keyboard.addKey(Phaser.Keyboard.ESC), this.keyContinue = this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER), this.keyAlien1.enabled = !1, this.keyAlien2.enabled = !1, this.keyAlien3.enabled = !1, this.keyAlien4.enabled = !1, this.keyAction.enabled = !1, this.keyUp.enabled = !1, this.keyDown.enabled = !1, this.keyLeft.enabled = !1, this.keyRight.enabled = !1, this.keyPause.enabled = !1, this.keyContinue.enabled = !1, this.changingAlien = !1, this.isDesktop = this.game.device.desktop, this.forceOrb = !1, this.inTutorialState = !1, this.counterToForceOrb = 0, this.currentItem = t.ITEM_GAMEPLAY.RESUME, this.currentTutorialPage = 0, this.bugTutorial = null, this.orbTutorial = null, this.enemyTutorial = !1, this.firstColorEnemyTutorial = !1, this.attackTutorialPassed = !1, this.isOverheatTutorial = !1, this.isDiamondHeadFirstLevel = !1, this.isWildvineFirstLevel = !1, this.isTwoAttackAlienLevel = !1, this.isHacking = !1, this.timerDecreaseHack = 0, this.audioHacking = null, this.audioPowerUp = null, this.followingOrb = !1, this.orbToFollow = null, 3 === this.currentLevel ? t.Instances.DataManager.saveTutorialPowerUp(!1) : t.Instances.DataManager.saveTutorialPowerUp(!0), this.currentLevel) {
                case 0:
                case 1:
                case 2:
                case 3:
                    this.alienKeysDisabled = !0; break;
                default:
                    this.alienKeysDisabled = !1 } this.actionKeyDisabled = !1, this.canShowHint = this.currentLevel <= 4 }, i.prototype.create = function() { var e = this;
            this.bgTile = new Phaser.TileSprite(this.game, 0, 0, this.game.width, this.game.height, "bg_tile"), this.add.existing(this.bgTile), this.group = new Phaser.Group(this.game), this.add.existing(this.group), this.groupUI = new Phaser.Group(this.game), this.add.existing(this.groupUI), this.overlayPause = new t.Overlay(this.game, .7, "bg_black"), this.overlayPause.kill(), this.uiGameplay = this.game.add.ph2UI("ui_gameplay", "atlas_gameplay"), this.uiLevelComplete = this.game.add.ph2UI("ui_level_completed", "atlas_ui_popups"), this.uiConfirmation = this.game.add.ph2UI("ui_confirmation", "atlas_ui_popups"), this.uiPause = this.game.add.ph2UI("ui_pause", "atlas_ui_popups"), this.uiTutorial = this.game.add.ph2UI("ui_tutorial", "atlas_ui_tutorial"), this.uiTutorialPause = this.game.add.ph2UI("ui_tutorial_pause", "atlas_ui_tutorial"), this.buttonPause = Ph2.UISystem.findObject("pause", this.uiGameplay), this.buttonResume = Ph2.UISystem.findObject("play", this.uiPause), this.buttonRestart = Ph2.UISystem.findObject("retry", this.uiPause), this.buttonHome = Ph2.UISystem.findObject("home", this.uiPause), this.buttonHowToPlay = Ph2.UISystem.findObject("tutorial", this.uiPause), this.buttonAudio = Ph2.UISystem.findObject("sound", this.uiPause), this.buttonConfirm = Ph2.UISystem.findObject("yes", this.uiConfirmation), this.buttonCancel = Ph2.UISystem.findObject("no", this.uiConfirmation), this.buttonNextLevel = Ph2.UISystem.findObject("play", this.uiLevelComplete), this.buttonRestartLevelComplete = Ph2.UISystem.findObject("retry", this.uiLevelComplete), this.buttonAudioLevelComplete = Ph2.UISystem.findObject("sound", this.uiLevelComplete), this.buttonNextTutorial = Ph2.UISystem.findObject("container_pause/arrow_right", this.uiTutorialPause), this.buttonPreviousTutorial = Ph2.UISystem.findObject("container_pause/arrow_left", this.uiTutorialPause), this.buttonBackTutorial = Ph2.UISystem.findObject("back", this.uiTutorialPause), this.buttonAudioTutorial = Ph2.UISystem.findObject("sound", this.uiTutorialPause), this.buttonAlien1 = Ph2.UISystem.findObject("select/grey_matter_button", this.uiGameplay), this.buttonAlien2 = Ph2.UISystem.findObject("select/heatblast_button", this.uiGameplay), this.buttonAlien3 = Ph2.UISystem.findObject("select/diamondhead_button", this.uiGameplay), this.buttonAlien4 = Ph2.UISystem.findObject("select/wildvine_button", this.uiGameplay), this.buttonHack = Ph2.UISystem.findObject("powerup_icon/hack_button", this.uiGameplay), this.buttonAttack = Ph2.UISystem.findObject("powerup_icon/hand", this.uiGameplay), this.buttonAction = Ph2.UISystem.findObject("powerup_icon", this.uiGameplay), this.textPowerUp = Ph2.UISystem.findObject("powerup_icon/number", this.uiGameplay), this.textHackNumber = Ph2.UISystem.findObject("hack_bar1/hack_bar1/hack_number", this.uiGameplay), this.textNumberAlien1 = Ph2.UISystem.findObject("select/grey_matter_button/number", this.uiGameplay), this.textNumberAlien2 = Ph2.UISystem.findObject("select/heatblast_button/number", this.uiGameplay), this.textNumberAlien3 = Ph2.UISystem.findObject("select/diamondhead_button/number", this.uiGameplay), this.textNumberAlien4 = Ph2.UISystem.findObject("select/wildvine_button/number", this.uiGameplay), this.hackingBar = Ph2.UISystem.findObject("hack_bar1/hack_bar_2/hack_bar2", this.uiGameplay), this.heatBar = Ph2.UISystem.findObject("powerup_icon/powerup_bar", this.uiGameplay), this.heatBar.height = 0, this.buttonHome.loadTexture("atlas_comic2"), this.buttonHome.setFrames("main.png", "main.png", " main_press.png", "main.png"), Ph2.UISystem.findObject("powerup_icon/check", this.uiGameplay).visible = !1, Ph2.UISystem.findObject("powerup_icon/check", this.uiGameplay).visibility.enable(!1), this.highlightDiamondBig = new Phaser.Sprite(this.game, 0, 0, "atlas_ui", "hl_rom.png"), this.highlightDiamond = new Phaser.Sprite(this.game, 0, 0, "atlas_ui", "hl_rom2.png"), this.highlightSquareBig = new Phaser.Sprite(this.game, 0, 0, "atlas_ui", "hl_big.png"), this.highlightSquare = new Phaser.Sprite(this.game, 0, 0, "atlas_ui", "hl_mid.png"), this.highlightSquare.anchor.set(.5), this.highlightDiamond.anchor.set(.5), this.highlightSquareBig.anchor.set(.5), this.highlightDiamondBig.anchor.set(.5), this.highlightDiamond.visible = !1, this.highlightDiamondBig.visible = !1, this.highlightSquare.visible = !1, this.highlightSquareBig.visible = !1, this.player = new t.Player(this.game, this.alienData, this.levelData), this.buttonAlien1.visible = !1, this.buttonAlien2.visible = !1, this.buttonAlien3.visible = !1, this.buttonAlien4.visible = !1, this.buttonHack.visibility.enable(!1), this.buttonAttack.visibility.enable(!1), this.buttonAlien1.visibility.enable(!1), this.buttonAlien1.visibility.enable(!1), this.buttonAlien2.visibility.enable(!1), this.buttonAlien3.visibility.enable(!1), this.buttonAlien4.visibility.enable(!1), this.uiPause.visible = !1, this.uiTutorial.visible = !1, this.uiConfirmation.visible = !1, this.uiLevelComplete.visible = !1, this.uiTutorialPause.visible = !1, this.originalPauseY = Ph2.UISystem.findObject("pause", this.uiGameplay).y, this.originalHomeY = Ph2.UISystem.findObject("home", this.uiPause).y, this.originalSoundY1 = Ph2.UISystem.findObject("sound", this.uiPause).y, this.originalSoundY2 = Ph2.UISystem.findObject("sound", this.uiLevelComplete).y, this.originalSoundY3 = Ph2.UISystem.findObject("sound", this.uiTutorialPause).y, this.createDecorations(), this.reOrderGameplay(), this.group.add(this.uiGameplay), this.groupUI.add(this.overlayPause), this.groupUI.add(this.highlightSquare), this.groupUI.add(this.highlightSquareBig), this.groupUI.add(this.highlightDiamond), this.groupUI.add(this.highlightDiamondBig), this.groupUI.add(this.uiPause), this.groupUI.add(this.uiTutorialPause), this.groupUI.add(this.uiTutorial), this.groupUI.add(this.uiConfirmation), this.groupUI.add(this.uiLevelComplete), this.showBorder(t.ALIEN.GREY_MATTER), this.changeHackingBarHeight(), this.createPowerUpBar(), this.checkAudio(), this.createComponents(), this.createAliens(), this.createBoss(), this.createAnimations(), this.createTutorialElements(), this.checkFirstLevelNewAliens(), this.hideAllTutorialsInGame(), this.localizeUI(), this.clearEventsOnKeys(), this.resize(), this.createBugsPool(), this.createProjectilesPool(), this.createCheats(), t.Constants.IOS_BUTTON_PATCH && this.repositionButtonsIOS(), this.game.ph2NotificationManager.addObserver("_CREATE_PROJECTILE", this.createProjectile, this), this.game.ph2NotificationManager.addObserver("_CREATE_ORB", this.createOrb, this), this.game.ph2NotificationManager.addObserver("_PAUSE_HACKING_COMPONENT", this.pauseHackingComponent, this), this.game.ph2NotificationManager.addObserver("_RESUME_HACKING_COMPONENT", this.resumeHackingComponent, this), this.game.ph2NotificationManager.addObserver("_REMOVE_BUG_FROM_ARRAY", this.removeBugFromArray, this), this.game.ph2NotificationManager.addObserver("_END_POWER_UP", this.endPowerUp, this), this.game.ph2NotificationManager.addObserver("_UPDATE_POWER_UP_BAR", this.updatePowerUpBar, this), this.game.ph2NotificationManager.addObserver("_ADD_FORCE_ORB", this.addToForceOrb, this), this.game.ph2NotificationManager.addObserver("_RESET_COUNTER", this.resetForceOrb, this), this.game.ph2NotificationManager.addObserver("_LAUNCH_ATTACK_BOSS", this.launchAttackBoss, this), this.game.ph2NotificationManager.addObserver("_ENABLE_TRANSFORMATION", this.enableTransform, this), this.game.ph2NotificationManager.addObserver("_SHOW_BEN", this.startBenAnimation, this), this.game.ph2NotificationManager.addObserver("_SHOW_OVERHEAT_TUTORIAL", this.showTutorialOverheatPart1, this), this.game.ph2NotificationManager.addObserver("_SHOW_RELOAD_TUTORIAL", this.showTutorialOverheatPart2, this), this.game.ph2NotificationManager.addObserver("_REMOVE_TUTORIAL_POWER_UP", this.hideTutorialPowerUp, this), t.Instances.Transition.playOut(), t.Instances.Transition.onCompletedOut.addOnce(function() { e.showStartMessage() }, this), this.game.onBlur.add(function() { e.canShowPause() && e.openPause(), t.Instances.DataManager.getAudio() && e.game.ph2AudioManager.pauseMusic() }, this), this.game.onFocus.add(function() { t.Instances.DataManager.getAudio() && !t.Instances.IncorrectOrientation && e.game.ph2AudioManager.resumeMusic() }, this) }, i.prototype.repositionButtonsIOS = function() { Ph2.UISystem.findObject("pause", this.uiGameplay).y = this.originalPauseY + 35, Ph2.UISystem.findObject("home", this.uiPause).y = this.originalHomeY + 35, Ph2.UISystem.findObject("sound", this.uiPause).y = this.originalSoundY1 + 35, Ph2.UISystem.findObject("sound", this.uiLevelComplete).y = this.originalSoundY2 + 35, Ph2.UISystem.findObject("sound", this.uiTutorialPause).y = this.originalSoundY3 + 35 }, i.prototype.showStartMessage = function() { this.animationStart.visible = !1, this.addTouchListeners(), this.showTutorialHackingPart1() }, i.prototype.reOrderGameplay = function() { var t;
            t = Ph2.UISystem.findObject("select", this.uiGameplay), this.uiGameplay.bringToTop(t) }, i.prototype.createBugsPool = function() { this.normalBugPool = new t.BugPool(this.game, t.COLOR.NORMAL, this.levelData, this.player), this.redBugPool = new t.BugPool(this.game, t.COLOR.RED, this.levelData, this.player), this.blueBugPool = new t.BugPool(this.game, t.COLOR.BLUE, this.levelData, this.player), this.greenBugPool = new t.BugPool(this.game, t.COLOR.GREEN, this.levelData, this.player) }, i.prototype.createProjectilesPool = function() { this.redProjectilePool = new t.ProjectilePool(this.game, t.COLOR.RED, this.boss), this.blueProjectilePool = new t.ProjectilePool(this.game, t.COLOR.BLUE, this.boss), this.greenProjectilePool = new t.ProjectilePool(this.game, t.COLOR.GREEN, this.boss) }, i.prototype.createDecorations = function() { var t, e, i, n; for (t = 0; t < 5; t++) e = 720 + 960 * t, i = .35 * this.game.height, (n = new Phaser.Sprite(this.game, e, i, "deco_1")).anchor.set(.5), this.group.add(n); for (t = 0; t < 5; t++) e = 864 + 960 * t, i = .35 * this.game.height, (n = new Phaser.Sprite(this.game, e, i, "deco_1")).anchor.set(.5), this.group.add(n); for (t = 0; t < 5; t++) e = 384 + 960 * t, i = .38 * this.game.height, (n = new Phaser.Sprite(this.game, e, i, "deco_2")).anchor.set(.5), this.group.add(n) }, i.prototype.checkAudio = function() { 0 === this.currentLevel || 1 === this.currentLevel || 2 === this.currentLevel || 3 === this.currentLevel ? this.currentMusic = t.Music.Gameplay1 : 4 === this.currentLevel || 5 === this.currentLevel || 6 === this.currentLevel ? this.currentMusic = t.Music.Gameplay2 : 7 !== this.currentLevel && 8 !== this.currentLevel && 9 !== this.currentLevel || (this.currentMusic = t.Music.Gameplay3), t.Instances.DataManager.getAudio() ? (this.game.ph2AudioManager.switchMusic(this.currentMusic), t.Instances.IncorrectOrientation && this.game.ph2AudioManager.pauseMusic()) : (this.buttonAudio.setFrames("sound2.png", "sound2.png", "sound2_press.png", "sound2.png"), this.buttonAudioLevelComplete.setFrames("sound2.png", "sound2.png", "sound2_press.png", "sound2.png"), this.buttonAudioTutorial.setFrames("sound2.png", "sound2.png", "sound2_press.png", "sound2.png")) }, i.prototype.changeHackingBarHeight = function() { var e;
            e = this.hackingBarSize * t.Constants.HACKING_BAR_MAX_POSITION / t.Constants.HEIGHT_HACKING, Ph2.UISystem.findObject("hack_bar1/hack_bar_2", this.uiGameplay).y = e }, i.prototype.createPowerUpBar = function() { var e;
            this.circleProgressBar = new t.CircleProgressBar(this.game), this.powerUpBase = new Phaser.Sprite(this.game, 0, 0, "atlas_gameplay", "hand_base.png"), this.powerUpBase.anchor.set(.5), (e = Ph2.UISystem.findObject("powerup_icon/base", this.uiGameplay)).addChild(this.circleProgressBar.graphicBar), e.addChild(this.powerUpBase), this.circleProgressBar.hideProgressBar(), this.circleProgressBar.setProgress(0, t.SETTINGS.POWER_UP_CHARGE_NEEDED) }, i.prototype.createComponents = function() { this.componentManager = Ph2.ComponentPlugin.initComponents(this), this.componentHacking = new t.ComponentHacking(this.game, this.levelData.hacking_speed, this.levelData.hacking_needed, this.levelData.decrease_hack_speed), this.componentWaveCreation = new t.ComponentWaveCreator(this.game, this.currentLevel, this.levelData), this.componentManager.addComponent(this.componentHacking), this.componentManager.addComponent(this.componentWaveCreation) }, i.prototype.createAnimations = function() { var t, e, i, n, s, o, a, r, h, l;
            t = Ph2.UISystem.findObject("hack_bar1", this.uiGameplay), e = Ph2.UISystem.findObject("powerup_icon", this.uiGameplay), i = Ph2.UISystem.findObject("hack_bar1/hack_bar1/hack_screen_pivot", this.uiGameplay), n = Ph2.UISystem.findObject("hack_bar1/hack_bar1/bar_elect_pivot", this.uiGameplay), s = Ph2.UISystem.findObject("powerup_icon/hand_shine_pivot", this.uiGameplay), o = Ph2.UISystem.findObject("powerup_icon/hack_button/wheel_pivot", this.uiGameplay), a = Ph2.UISystem.findObject("hack_bar1/ben_gameplay_pivot", this.uiGameplay), r = Ph2.UISystem.findObject("hack_bar1/box/hack_shine_pivot", this.uiGameplay), h = Ph2.UISystem.findObject("start_message_pivot", this.uiGameplay), l = Ph2.UISystem.findObject("powerup_icon/circle_pivot", this.uiGameplay), this.animationOrbPickup = this.game.add.ph2AnimationObject(-10, -45, "powerup_bar_fx", "atlas_gameplay_fx2"), this.animationPowerUpActivation = this.game.add.ph2AnimationObject(this.player.x + 50, this.player.y + -25, "powerup_fx", "atlas_gameplay_fx"), this.animationHackComplete = this.game.add.ph2AnimationObject(0, 0, "bar_elect", "atlas_gameplay_fx"), this.animationPowerUpEnabled = this.game.add.ph2AnimationObject(-60, -37, "powerup_bar", "atlas_gameplay_fx2"), this.animationHacking = this.game.add.ph2AnimationObject(0, 0, "hack_screen", "atlas_gameplay_fx2"), this.animationHackError = this.game.add.ph2AnimationObject(0, 0, "hack_error", "atlas_gameplay_fx2"), this.animationHackError.ph2Animations.play("hack_error_anim", 1, !0), this.animationHandShine = this.game.add.ph2AnimationObject(0, 0, "hand_shine", "atlas_gameplay"), this.animationHackingWheel = this.game.add.ph2AnimationObject(0, 0, "powerup_wheel", "atlas_gameplay"), this.animationBen = this.game.add.ph2AnimationObject(0, 0, "ben_gameplay", "atlas_gameplay_fx2"), this.animationHackingPowerUp = this.game.add.ph2AnimationObject(0, 0, "hack_shine", "atlas_gameplay_fx2"), this.animationStart = this.game.add.ph2AnimationObject(0, 0, "start_message", "atlas_gameplay"), this.animationCircleCheck = this.game.add.ph2AnimationObject(0, 0, "circle", "atlas_ui"), this.animationArrowHack = this.game.add.ph2AnimationObject(0, 0, "hack_tutorial_shine", "atlas_ui_tutorial"), this.animationArrowDown = this.game.add.ph2AnimationObject(0, 0, "arrow", "atlas_ui_tutorial"), this.animationArrowRight = this.game.add.ph2AnimationObject(0, 0, "arrow_right", "atlas_ui_tutorial"), this.animationArrowTouch = this.game.add.ph2AnimationObject(0, 0, "arrow_touch", "atlas_ui_tutorial"), this.animationPowerUpTutorial = this.game.add.ph2AnimationObject(0, 0, "powerup_shine_tutorial", "atlas_ui_tutorial"), this.animationWarningTutorial = this.game.add.ph2AnimationObject(0, 0, "sign_tutorial", "atlas_ui_tutorial"), this.animationCircleCheck.visible = !1, this.animationArrowDown.visible = !1, this.animationArrowRight.visible = !1, this.animationArrowTouch.visible = !1, this.animationPowerUpTutorial.visible = !1, this.animationWarningTutorial.visible = !1, this.animationHacking.visible = !1, this.animationHackError.visible = !0, this.animationPowerUpActivation.visible = !1, this.animationHackComplete.visible = !1, this.animationPowerUpEnabled.visible = !1, this.animationOrbPickup.visible = !1, this.animationHandShine.visible = !1, this.animationBen.visible = !1, this.animationHackingPowerUp.visible = !1, this.group.add(this.animationPowerUpActivation), this.groupUI.add(this.animationOrbPickup), this.heatBar.addChild(this.animationOrbPickup), e.addChild(this.animationPowerUpTutorial), e.addChild(this.animationPowerUpEnabled), n.addChild(this.animationHackError), t.addChild(this.animationHackComplete), i.addChild(this.animationHacking), s.addChild(this.animationHandShine), o.addChild(this.animationHackingWheel), a.addChild(this.animationBen), r.addChild(this.animationHackingPowerUp), h.addChild(this.animationStart), l.addChild(this.animationCircleCheck), this.animationHandShine.ph2Animations.play("hand_anim", 1, !0), this.animationHackingPowerUp.ph2Animations.play("hack_shine_anim", 1, !0), this.groupUI.add(this.animationArrowDown), this.groupUI.add(this.animationArrowTouch), this.groupUI.add(this.animationArrowRight) }, i.prototype.createTutorialElements = function() { var t, e, i, n, s, o, a, r, h, l; for (a = this.isDesktop ? "_desktop" : "_mobile", t = Ph2.UISystem.findObject("container_pause/tutorial_pivot", this.uiTutorialPause), e = this.game.add.ph2AnimationObject(0, 0, "tutorial_1" + a, "atlas_ui_tutorial"), i = this.game.add.ph2AnimationObject(0, 0, "tutorial_2" + a, "atlas_ui_tutorial"), n = this.game.add.ph2AnimationObject(0, 0, "tutorial_3" + a, "atlas_ui_tutorial"), s = this.game.add.ph2AnimationObject(0, 0, "tutorial_4_desktop_how_to_play", "atlas_ui_tutorial"), o = this.game.add.ph2AnimationObject(0, 0, "tutorial_5", "atlas_ui_tutorial"), e.visible = !1, i.visible = !1, n.visible = !1, s.visible = !1, o.visible = !1, t.addChild(e), t.addChild(i), t.addChild(n), t.addChild(s), t.addChild(o), this.animationsTutorial.push(e), this.animationsTutorial.push(i), this.animationsTutorial.push(n), this.animationsTutorial.push(s), this.animationsTutorial.push(o), this.tutorialCircles.push(Ph2.UISystem.findObject("container_pause/circle1/circle_select", this.uiTutorialPause)), this.tutorialCircles.push(Ph2.UISystem.findObject("container_pause/circle2/circle_select", this.uiTutorialPause)), this.tutorialCircles.push(Ph2.UISystem.findObject("container_pause/circle3/circle_select", this.uiTutorialPause)), this.tutorialCircles.push(Ph2.UISystem.findObject("container_pause/circle4/circle_select", this.uiTutorialPause)), this.tutorialCircles.push(Ph2.UISystem.findObject("container_pause/circle5/circle_select", this.uiTutorialPause)), this.buttonPreviousTutorial.visibility.enable(!1), this.buttonPreviousTutorial.visible = !1, this.tutorialCircles[0].visibility.enable(!1), l = 1; l < this.tutorialCircles.length; l++) this.tutorialCircles[l].visible = !1, this.tutorialCircles[l].visibility.enable(!1);
            this.isDesktop && (r = Ph2.UISystem.findObject("tutorial_3/space_pivot", this.uiTutorial), h = Ph2.UISystem.findObject("tutorial_5/space_pivot", this.uiTutorial), this.animationSpace1 = this.game.add.ph2AnimationObject(0, 0, "space_tutorial", "atlas_ui_tutorial"), this.animationSpace2 = this.game.add.ph2AnimationObject(0, 0, "space_tutorial", "atlas_ui_tutorial"), r.addChild(this.animationSpace1), h.addChild(this.animationSpace2)) }, i.prototype.hideAllTutorialsInGame = function() { var t; for (t = 1; t < 13; t++) Ph2.UISystem.findObject("tutorial_" + t, this.uiTutorial).visible = !1, Ph2.UISystem.findObject("tutorial_" + t, this.uiTutorial).visibility.enable(!1);
            this.animationArrowDown.visible = !1, this.animationArrowTouch.visible = !1, this.animationArrowRight.visible = !1, this.animationWarningTutorial.visible = !1, this.animationPowerUpTutorial.visible = !1 }, i.prototype.checkFirstLevelNewAliens = function() { var e, i, n; for (e = 0; e < 10; e++)
                for (n = this.game.cache.getJSON("level_data").levels[e], i = 0; i < n.aliens_active.length; i++) n.aliens_active[i] === t.ALIEN.DIAMOND_HEAD && (this.firstLevelDiamondHead = e, i = n.aliens_active.length, e = 10); for (e = 0; e < 10; e++)
                for (n = this.game.cache.getJSON("level_data").levels[e], i = 0; i < n.aliens_active.length; i++) n.aliens_active[i] === t.ALIEN.WILD_VINE && (this.firstLevelWildvine = e, i = n.aliens_active.length, e = 10); for (e = 0; e < 10; e++)(n = this.game.cache.getJSON("level_data").levels[e]).aliens_active.length >= 3 && (this.firstLevelTwoAttackAlien = e, e = 10);
            this.currentLevel === this.firstLevelDiamondHead && (this.isDiamondHeadFirstLevel = !0), this.currentLevel === this.firstLevelWildvine && (this.isWildvineFirstLevel = !0), this.currentLevel === this.firstLevelTwoAttackAlien && (this.isTwoAttackAlienLevel = !0) }, i.prototype.createAliens = function() { var e; for (this.aliens = this.player.aliens, 4 === this.aliens.length ? (this.buttonAlien4.visible = !0, this.buttonAlien3.visible = !0, this.buttonAlien2.visible = !0, this.buttonAlien1.visible = !0) : 3 === this.aliens.length ? (this.buttonAlien3.visible = !0, this.buttonAlien2.visible = !0, this.buttonAlien1.visible = !0, this.keyAlien4.enabled = !1) : 2 === this.aliens.length ? (this.buttonAlien2.visible = !0, this.buttonAlien1.visible = !0) : this.buttonAlien1.visible = !0, e = 0; e < this.aliens.length; e++)
                if (1 === e) switch (this.aliens[e].alienType) {
                    case t.ALIEN.HEAT_BLAST:
                        this.buttonAlien2.setFrames("heatblast_button.png", "heatblast_button.png", "heatblast_button.png", "heatblast_button.png"), Ph2.UISystem.findObject("select/heatblast_button/red_border", this.uiGameplay).frameName = "edge_red.png"; break;
                    case t.ALIEN.DIAMOND_HEAD:
                        this.buttonAlien2.setFrames("diamondhead_button.png", "diamondhead_button.png", "diamondhead_button.png", "diamondhead_button.png"), Ph2.UISystem.findObject("select/heatblast_button/red_border", this.uiGameplay).frameName = "edge_blue.png"; break;
                    case t.ALIEN.WILD_VINE:
                        this.buttonAlien2.setFrames("wildvine_button.png", "wildvine_button.png", "wildvine_button.png", "wildvine_button.png"), Ph2.UISystem.findObject("select/heatblast_button/red_border", this.uiGameplay).frameName = "edge_green.png" } else if (2 === e) switch (this.aliens[e].alienType) {
                    case t.ALIEN.HEAT_BLAST:
                        this.buttonAlien3.setFrames("heatblast_button.png", "heatblast_button.png", "heatblast_button.png", "heatblast_button.png"), Ph2.UISystem.findObject("select/diamondhead_button/blue_border", this.uiGameplay).frameName = "edge_red.png"; break;
                    case t.ALIEN.DIAMOND_HEAD:
                        this.buttonAlien3.setFrames("diamondhead_button.png", "diamondhead_button.png", "diamondhead_button.png", "diamondhead_button.png"), Ph2.UISystem.findObject("select/diamondhead_button/blue_border", this.uiGameplay).frameName = "edge_blue.png"; break;
                    case t.ALIEN.WILD_VINE:
                        this.buttonAlien3.setFrames("wildvine_button.png", "wildvine_button.png", "wildvine_button.png", "wildvine_button.png"), Ph2.UISystem.findObject("select/diamondhead_button/blue_border", this.uiGameplay).frameName = "edge_green.png" } else if (3 === e) switch (this.aliens[e].alienType) {
                    case t.ALIEN.HEAT_BLAST:
                        this.buttonAlien4.setFrames("heatblast_button.png", "heatblast_button.png", "heatblast_button.png", "heatblast_button.png"), Ph2.UISystem.findObject("select/wildvine_button/green_border", this.uiGameplay).frameName = "edge_red.png"; break;
                    case t.ALIEN.DIAMOND_HEAD:
                        this.buttonAlien4.setFrames("diamondhead_button.png", "diamondhead_button.png", "diamondhead_button.png", "diamondhead_button.png"), Ph2.UISystem.findObject("select/wildvine_button/green_border", this.uiGameplay).frameName = "edge_blue.png"; break;
                    case t.ALIEN.WILD_VINE:
                        this.buttonAlien4.setFrames("wildvine_button.png", "wildvine_button.png", "wildvine_button.png", "wildvine_button.png"), Ph2.UISystem.findObject("select/wildvine_button/green_border", this.uiGameplay).frameName = "edge_green.png" } }, i.prototype.createBug = function(e) { var i, n; if (3 === this.currentLevel && this.forcedOrbCount >= 1 && this.forcedOrbCount <= 3) switch (this.forcedOrbCount++, e) {
                case t.COLOR.NORMAL:
                    n = this.normalBugPool.getBug(!0); break;
                case t.COLOR.RED:
                    n = this.redBugPool.getBug(!0); break;
                case t.COLOR.BLUE:
                    n = this.blueBugPool.getBug(!0); break;
                case t.COLOR.GREEN:
                    n = this.greenBugPool.getBug(!0); break;
                default:
                    n = this.normalBugPool.getBug(!0) } else switch (e) {
                case t.COLOR.NORMAL:
                    n = this.normalBugPool.getBug(this.forceOrb); break;
                case t.COLOR.RED:
                    n = this.redBugPool.getBug(this.forceOrb); break;
                case t.COLOR.BLUE:
                    n = this.blueBugPool.getBug(this.forceOrb); break;
                case t.COLOR.GREEN:
                    n = this.greenBugPool.getBug(this.forceOrb); break;
                default:
                    n = this.normalBugPool.getBug(this.forceOrb) }
            for (this.forceOrb && (this.forceOrb = !1), this.bugs.push(n), this.group.add(n), i = 0; i < this.projectiles.length; i++) this.projectiles[i].updateCollisionComponent(this.bugs);
            this.attackTutorialPassed || 0 !== this.currentLevel || (this.bugTutorial = n, this.enemyTutorial = !0, this.attackTutorialPassed = !0), this.isDiamondHeadFirstLevel && null === this.bugTutorial && (this.bugTutorial = n, this.enemyTutorial = !0), this.isWildvineFirstLevel && null === this.bugTutorial && (this.bugTutorial = n, this.enemyTutorial = !0), this.isTwoAttackAlienLevel && null === this.bugTutorial && (this.bugTutorial = n, this.enemyTutorial = !0) }, i.prototype.createBoss = function() { this.currentLevel >= 9 ? (this.boss = new t.Boss(this.game, this.player), this.group.add(this.boss), this.group.add(this.player)) : (this.boss = null, this.group.add(this.player)) }, i.prototype.createProjectile = function(e, i, n, s) { var o; switch (n) {
                case t.COLOR.RED:
                    o = this.redProjectilePool.getProjectile(e, i, s); break;
                case t.COLOR.BLUE:
                    o = this.blueProjectilePool.getProjectile(e, i, s); break;
                case t.COLOR.GREEN:
                    o = this.greenProjectilePool.getProjectile(e, i, s) } o.playAnimation(), o.updateCollisionComponent(this.bugs), this.projectiles.push(o), this.group.add(o) }, i.prototype.createOrb = function(e) { var i, n;
            this.orbs.length >= t.SETTINGS.MAX_ORBS_ON_SCREEN || this.powerUpActive || (n = this.player.y, (i = new t.Orb(this.game, e, n, this.player)).right > .9 * this.game.width && (i.repositionOnScreen(), this.orbToFollow = i, this.followingOrb = !0), this.group.add(i), this.orbs.push(i), this.game.ph2AudioManager.playEffect("item_appears", !1), t.Instances.DataManager.getTutorialPowerUp() || (i.isTutorialOrb = !0, this.orbTutorial = i, this.showTutorialPowerUp(i), this.forcedOrbCount++)) }, i.prototype.localizeUI = function() { var e, i;
            e = this.currentLevel < 9 ? "0" + (this.currentLevel + 1).toString() : (this.currentLevel + 1).toString(), t.Instances.LocalizationManager.localizeTextImage("container/title", this.uiPause, "atlas_text_statemachine", "ui_pause_text.png"), t.Instances.LocalizationManager.localizeTextImage("container/description1", this.uiConfirmation, "atlas_text_statemachine", "ui_confirmation_text1.png"), t.Instances.LocalizationManager.localizeTextImage("container/description2", this.uiConfirmation, "atlas_text_statemachine", "ui_confirmation_text2.png"), t.Instances.LocalizationManager.localizeTextImage("container/title", this.uiLevelComplete, "atlas_text_statemachine", "ui_lvl_completed_text.png"), t.Instances.LocalizationManager.localizeText("container/level", this.uiLevelComplete, e, !0), t.Instances.LocalizationManager.localizeTextImage("tutorial_1/text", this.uiTutorial, "atlas_text_statemachine", "tutorial1_text.png"), t.Instances.LocalizationManager.localizeTextImage("tutorial_2/text", this.uiTutorial, "atlas_text_statemachine", "tutorial2_text.png"), t.Instances.LocalizationManager.localizeTextImage("tutorial_4/text", this.uiTutorial, "atlas_text_statemachine", "tutorial4_text.png"), t.Instances.LocalizationManager.localizeTextImage("tutorial_6/text", this.uiTutorial, "atlas_text_statemachine", "tutorial6_text.png"), t.Instances.LocalizationManager.localizeTextImage("tutorial_7/text", this.uiTutorial, "atlas_text_statemachine", "tutorial7_text.png"), t.Instances.LocalizationManager.localizeTextImage("tutorial_8/text", this.uiTutorial, "atlas_text_statemachine", "tutorial8_text.png"), t.Instances.LocalizationManager.localizeTextImage("tutorial_9/text", this.uiTutorial, "atlas_text_statemachine", "tutorial9_text.png"), t.Instances.LocalizationManager.localizeTextImage("tutorial_10/text", this.uiTutorial, "atlas_text_statemachine", "tutorial10_text.png"), t.Instances.LocalizationManager.localizeTextImage("tutorial_11/text", this.uiTutorial, "atlas_text_statemachine", "tutorial11_text.png"), t.Instances.LocalizationManager.localizeTextImage("tutorial_12/text", this.uiTutorial, "atlas_text_statemachine", "tutorial12_text.png"), this.isDesktop ? (t.Instances.LocalizationManager.localizeTextImage("tutorial_3/text", this.uiTutorial, "atlas_text_statemachine", "tutorial3_text.png"), t.Instances.LocalizationManager.localizeTextImage("tutorial_5/text", this.uiTutorial, "atlas_text_statemachine", "tutorial_5_desktop.png")) : (t.Instances.LocalizationManager.localizeTextImage("tutorial_3/text_mobile", this.uiTutorial, "atlas_text_statemachine", "tutorial3_text.png"), t.Instances.LocalizationManager.localizeTextImage("tutorial_5/text_mobile", this.uiTutorial, "atlas_text_statemachine", "tutorial5_text.png")), (i = new Phaser.Sprite(this.game, 0, 0, "atlas_text_statemachine", "start_message_text.png")).anchor.set(.5), Ph2.AnimationSystem.findObject("base/ready/text", this.animationStart).addChild(i) }, i.prototype.addTouchListeners = function() { this.buttonAttack.inputEnabled = !1, this.buttonHack.inputEnabled = !1, this.buttonAction.inputEnabled = !0, this.buttonAction.input.useHandCursor = !0, this.buttonAlien1.inputEnabled = !0, this.buttonAlien2.inputEnabled = !0, this.buttonAlien3.inputEnabled = !0, this.buttonAlien4.inputEnabled = !0, this.buttonPause.inputEnabled = !0, this.buttonConfirm.inputEnabled = !0, this.buttonCancel.inputEnabled = !0, this.buttonNextTutorial.inputEnabled = !0, this.buttonPreviousTutorial.inputEnabled = !0, this.buttonAudioLevelComplete.inputEnabled = !0, this.buttonNextLevel.inputEnabled = !0, this.buttonRestartLevelComplete.inputEnabled = !0, this.buttonAudio.events.onInputUp.add(this.switchAudio, this), this.buttonAudioLevelComplete.events.onInputUp.add(this.switchAudio, this), this.buttonAudioTutorial.events.onInputUp.add(this.switchAudio, this), this.buttonPause.events.onInputDown.add(this.openPause, this), this.buttonResume.events.onInputDown.add(this.closePause, this), this.buttonHowToPlay.events.onInputDown.add(this.showHowToPlay, this), this.buttonRestart.events.onInputDown.add(this.showRestartPopUp, this), this.buttonHome.events.onInputDown.add(this.showExitPopUp, this), this.buttonConfirm.events.onInputDown.add(this.confirmAction, this), this.buttonCancel.events.onInputDown.add(this.cancelAction, this), this.buttonNextLevel.events.onInputDown.add(this.goToNextLevel, this), this.buttonRestartLevelComplete.events.onInputDown.add(this.restartLevel, this), this.buttonAction.events.onInputDown.add(this.onActionKeyPressed, this), this.buttonAction.events.onInputOut.add(this.onUpHackButton, this), this.buttonAction.events.onInputUp.add(this.onUpHackButton, this), this.buttonNextTutorial.events.onInputDown.add(this.showTutorialNextPage, this), this.buttonPreviousTutorial.events.onInputDown.add(this.showTutorialPreviousPage, this), this.buttonBackTutorial.events.onInputDown.add(this.closeHowToPlay, this), this.buttonAlien1.events.onInputDown.add(this.changeAlien, this), this.buttonAlien2.events.onInputDown.add(this.changeAlien, this), this.buttonAlien3.events.onInputDown.add(this.changeAlien, this), this.buttonAlien4.events.onInputDown.add(this.changeAlien, this), this.keyAction.enabled = !0, 4 === this.aliens.length ? (this.keyAlien4.enabled = !0, this.keyAlien3.enabled = !0, this.keyAlien2.enabled = !0, this.keyAlien1.enabled = !0) : 3 === this.aliens.length ? (this.keyAlien3.enabled = !0, this.keyAlien2.enabled = !0, this.keyAlien1.enabled = !0) : 2 === this.aliens.length ? (this.keyAlien2.enabled = !0, this.keyAlien1.enabled = !0) : this.keyAlien1.enabled = !0, this.currentLevel === this.firstLevelDiamondHead && (this.keyAlien2.enabled = !1, this.buttonAlien2.inputEnabled = !1), this.currentLevel === this.firstLevelWildvine && (this.keyAlien2.enabled = !1, this.buttonAlien2.inputEnabled = !1), this.currentLevel === this.firstLevelTwoAttackAlien && (this.keyAlien2.enabled = !1, this.keyAlien3.enabled = !1, this.buttonAlien2.inputEnabled = !1, this.buttonAlien3.inputEnabled = !1), this.keyUp.enabled = !0, this.keyDown.enabled = !0, this.keyLeft.enabled = !0, this.keyRight.enabled = !0, this.keyPause.enabled = !0, this.keyContinue.enabled = !0, this.keyAlien1.onDown.add(this.changeAlienKey, this), this.keyAlien2.onDown.add(this.changeAlienKey, this), this.keyAlien3.onDown.add(this.changeAlienKey, this), this.keyAlien4.onDown.add(this.changeAlienKey, this), this.keyAction.onDown.add(this.onActionKeyPressed, this), this.keyAction.onUp.add(this.onUpHackButton, this), this.keyUp.onDown.add(this.moveMenuUp, this), this.keyDown.onDown.add(this.moveMenuDown, this), this.keyLeft.onDown.add(this.moveMenuLeft, this), this.keyRight.onDown.add(this.moveMenuRight, this), this.keyPause.onDown.add(this.checkActionEsc, this), this.keyContinue.onDown.add(this.menuActionKeyPressed, this), 3 === this.aliens.length ? this.keyAlien4.enabled = !1 : 2 === this.aliens.length && (this.keyAlien3.enabled = !1, this.keyAlien4.enabled = !1) }, i.prototype.clearEventsOnKeys = function() { this.keyAlien1.onDown.removeAll(this), this.keyAlien2.onDown.removeAll(this), this.keyAlien3.onDown.removeAll(this), this.keyAlien4.onDown.removeAll(this), this.keyAction.onDown.removeAll(this), this.keyAction.onUp.removeAll(this) }, i.prototype.switchAudio = function() { this.game.ph2AudioManager.playEffect("generic_button", !1), t.Instances.DataManager.getAudio() ? (t.Instances.DataManager.saveAudio(!1), this.buttonAudio.setFrames("sound2.png", "sound2.png", "sound2_press.png", "sound2.png"), this.buttonAudioLevelComplete.setFrames("sound2.png", "sound2.png", "sound2_press.png", "sound2.png"), this.buttonAudioTutorial.setFrames("sound2.png", "sound2.png", "sound2_press.png", "sound2.png"), this.game.ph2AudioManager.stopMusic(), this.game.ph2AudioManager.switchSfxState(), this.game.ph2AudioManager.switchMusicState()) : (t.Instances.DataManager.saveAudio(!0), this.buttonAudio.setFrames("sound1.png", "sound1.png", "sound1_press.png", "sound1.png"), this.buttonAudioLevelComplete.setFrames("sound1.png", "sound1.png", "sound1_press.png", "sound1.png"), this.buttonAudioTutorial.setFrames("sound1.png", "sound1.png", "sound1_press.png", "sound1.png"), this.game.ph2AudioManager.switchMusicState(), this.game.ph2AudioManager.switchMusic(this.currentMusic), this.game.ph2AudioManager.switchSfxState()) }, i.prototype.addToForceOrb = function() {++this.counterToForceOrb >= this.levelData.force_power_up && (this.forceOrb = !0, this.counterToForceOrb = 0) }, i.prototype.resetForceOrb = function() { this.counterToForceOrb = 0, this.forceOrb = !1 }, i.prototype.changeAlienKey = function(t) { if (!(this.alienKeysDisabled || this.inTutorialState && 3 === this.currentLevel && t.keyCode === Phaser.Keyboard.TWO)) switch (t.keyCode) {
                case Phaser.Keyboard.ONE:
                    this.changeAlien(this.buttonAlien1); break;
                case Phaser.Keyboard.TWO:
                    this.changeAlien(this.buttonAlien2); break;
                case Phaser.Keyboard.THREE:
                    this.changeAlien(this.buttonAlien3); break;
                case Phaser.Keyboard.FOUR:
                    this.changeAlien(this.buttonAlien4) } }, i.prototype.changeAlien = function(e) { var i, n, s; if (!(this.uiPause.visible || this.uiConfirmation.visible || this.gameCompleted || this.hackingCompleted)) { switch (e.name) {
                    case "grey_matter_button":
                        n = t.ALIEN.GREY_MATTER, s = this.aliens[this.selectedAlien].alienType; break;
                    case "heatblast_button":
                        n = t.ALIEN.HEAT_BLAST, s = this.aliens[1].alienType; break;
                    case "diamondhead_button":
                        n = t.ALIEN.DIAMOND_HEAD, s = this.aliens[2].alienType; break;
                    case "wildvine_button":
                        n = t.ALIEN.WILD_VINE, s = this.aliens[3].alienType } if (n !== this.selectedAlien && !this.changingAlien) { for (i = 0; i < this.aliens.length; i++) this.aliens[i].hide();
                    this.selectedAlien = n, this.player.changeAlien(n, s), this.changingAlien = !0, this.selectedAlien === t.ALIEN.GREY_MATTER ? (this.animationHandShine.visible = !1, this.buttonAttack.visible = !1, this.buttonHack.visible = !0, !this.inTutorialState && this.animationArrowDown.visible && (this.buttonAction.addChild(this.animationArrowDown), this.animationArrowDown.y = .5 * -this.buttonAction.height)) : (this.game.ph2AudioManager.pauseEffect(this.audioHacking), this.componentHacking.pauseComponent(), this.isHacking = !1, this.animationHandShine.visible = !0, this.buttonAttack.visible = !0, this.buttonHack.visible = !1, this.animationHackingPowerUp.visible = !1, !this.inTutorialState && this.animationArrowDown.visible && (this.buttonAlien1.addChild(this.animationArrowDown), this.animationArrowDown.y = .5 * -this.buttonAlien1.height), this.inTutorialState && n === t.ALIEN.HEAT_BLAST && this.showTutorialAttackPart2(), this.inTutorialState && s === t.ALIEN.DIAMOND_HEAD && (this.inTutorialState = !1, this.isPaused = !1, this.alienKeysDisabled = !1, this.actionKeyDisabled = !1, this.resumeGame(), this.enableButtons(), this.hideAllTutorialsInGame()), this.inTutorialState && s === t.ALIEN.WILD_VINE && (this.inTutorialState = !1, this.isPaused = !1, this.alienKeysDisabled = !1, this.resumeGame(), this.enableButtons(), this.hideAllTutorialsInGame())), this.showBorder(n), 0 === this.selectedAlien || 2 === this.selectedAlien ? this.game.ph2AudioManager.playEffect("transformation_1", !1) : 1 !== this.selectedAlien && 3 !== this.selectedAlien || this.game.ph2AudioManager.playEffect("transformation_2", !1) } } }, i.prototype.enableTransform = function() { this.changingAlien = !1, this.selectedAlien === t.ALIEN.GREY_MATTER && this.keyAction.isDown && this.onDownHackButton() }, i.prototype.onActionKeyPressed = function() { this.gameCompleted || this.uiPause.visible || this.uiConfirmation.visible || this.actionKeyDisabled || this.hackingCompleted || (this.inTutorialState && (this.enableButtons(), this.hideAllTutorialsInGame(), this.alienKeysDisabled = !1, this.inTutorialState = !1, this.uiTutorial.visible = !1, this.isPaused = !1, this.resumeGame()), this.selectedAlien === t.ALIEN.GREY_MATTER ? this.onDownHackButton() : this.attackAlien()) }, i.prototype.attackAlien = function() { this.uiConfirmation.visible || this.uiPause.visible || (this.timerHand = 0, this.isHandTimerActive = !0, this.animationHandShine.visible = !1, this.player.activeAlienAttack()) }, i.prototype.onDownHackButton = function() { this.selectedAlien !== t.ALIEN.GREY_MATTER || this.hackingCompleted || (this.powerUpActive && (this.animationHackingPowerUp.visible = !0), this.isHacking = !0, this.isDecreasingHack = !1, this.componentHacking.increasing = !0, this.animationHackingWheel.visible = !0, this.animationHacking.visible = !0, this.animationHackError.visible = !1, this.animationHackingWheel.ph2Animations.play("powerup_wheel_anim", 1, !0), this.animationHacking.ph2Animations.play("hack_screen_anim", 1, !0), this.componentHacking.resumeComponent(), this.player.startHacking(), this.animationArrowDown.visible = !1, this.isShowingHint = !1, null === this.audioHacking ? this.audioHacking = this.game.ph2AudioManager.playEffect("power_1", !1) : this.game.ph2AudioManager.resumeEffect(this.audioHacking)) }, i.prototype.onUpHackButton = function() { this.selectedAlien !== t.ALIEN.GREY_MATTER || this.keyAction.isDown || (this.isHacking = !1, this.animationHackingPowerUp.visible = !1, this.animationHackingWheel.ph2Animations.stop("powerup_wheel_anim", !0), this.animationHacking.visible = !1, this.animationHackError.visible = !0, this.animationHackError.ph2Animations.play("hack_error_anim", 1, !0), this.componentHacking.pauseComponent(), this.player.stopHacking(), this.game.ph2AudioManager.pauseEffect(this.audioHacking)) }, i.prototype.showBorder = function(e) { switch (Ph2.UISystem.findObject("select/grey_matter_button/green_border", this.uiGameplay).visible = !1, Ph2.UISystem.findObject("select/heatblast_button/red_border", this.uiGameplay).visible = !1, Ph2.UISystem.findObject("select/diamondhead_button/blue_border", this.uiGameplay).visible = !1, Ph2.UISystem.findObject("select/wildvine_button/green_border", this.uiGameplay).visible = !1, Ph2.UISystem.findObject("select/grey_matter_button/green_border", this.uiGameplay).visibility.enable(!1), Ph2.UISystem.findObject("select/heatblast_button/red_border", this.uiGameplay).visibility.enable(!1), Ph2.UISystem.findObject("select/diamondhead_button/blue_border", this.uiGameplay).visibility.enable(!1), Ph2.UISystem.findObject("select/wildvine_button/green_border", this.uiGameplay).visibility.enable(!1), e) {
                case t.ALIEN.GREY_MATTER:
                    Ph2.UISystem.findObject("select/grey_matter_button/green_border", this.uiGameplay).visible = !0; break;
                case t.ALIEN.HEAT_BLAST:
                    Ph2.UISystem.findObject("select/heatblast_button/red_border", this.uiGameplay).visible = !0; break;
                case t.ALIEN.DIAMOND_HEAD:
                    Ph2.UISystem.findObject("select/diamondhead_button/blue_border", this.uiGameplay).visible = !0; break;
                case t.ALIEN.WILD_VINE:
                    Ph2.UISystem.findObject("select/wildvine_button/green_border", this.uiGameplay).visible = !0 } }, i.prototype.removeBugFromArray = function(t) { var e; for (e = this.bugs.length - 1; e >= 0; e--) t === this.bugs[e] && this.bugs.splice(e, 1) }, i.prototype.updatePowerUpBar = function(e, i, n) { var s, o = this,
                a = { charge: i };
            this.animationOrbPickup.visible = !0, this.animationOrbPickup.ph2Animations.play("powerup_bar_anim2", 1, !1), this.circleProgressBar.showProgressBar(), this.circleProgressBar.setProgress(i, t.SETTINGS.POWER_UP_CHARGE_NEEDED), (s = this.game.add.tween(a).to({ charge: e }, t.SETTINGS.POWER_FILL_SPEED, "Linear", !0)).onUpdateCallback(function() { o.circleProgressBar.setProgress(a.charge, t.SETTINGS.POWER_UP_CHARGE_NEEDED) }, this), n && s.onComplete.add(this.activatePowerUp, this) }, i.prototype.activatePowerUp = function() { var t = this;
            this.powerUpActive = !0, this.animationPowerUpActivation.x = this.player.x, this.animationPowerUpActivation.y = this.player.y, this.animationPowerUpActivation.visible = !0, this.animationPowerUpActivation.ph2Animations.play("powerup_fx_anim", 1, !1).onComplete.add(function() { t.player.showPowerUp() }, this), this.player.onEnablePowerUp(), this.componentHacking.changeIncreaseValue(this.levelData.hacking_speed_power_up), this.game.ph2AudioManager.playEffect("powerup_available", !1), null === this.audioPowerUp ? this.audioPowerUp = this.game.ph2AudioManager.playEffect("powerup_active", !1) : this.game.ph2AudioManager.resumeEffect(this.audioPowerUp) }, i.prototype.endPowerUp = function() { this.powerUpActive = !1, this.animationPowerUpActivation.visible = !1, this.animationHackingPowerUp.visible = !1, this.player.endPowerUp(), this.circleProgressBar.hideProgressBar(), this.animationPowerUpActivation.ph2Animations.stop(), this.componentHacking.changeIncreaseValue(this.levelData.hacking_speed), this.game.ph2AudioManager.pauseEffect(this.audioPowerUp) }, i.prototype.pauseHackingComponent = function() { this.componentHacking.pauseComponent() }, i.prototype.resumeHackingComponent = function() { this.componentHacking.resumeComponent() }, i.prototype.onHackingComplete = function() { var e, i, n, s = this; for (this.gameEnd = t.GAME_END.WIN, this.hackingCompleted = !0, this.circleProgressBar.hideProgressBar(), this.circleProgressBar.setProgress(0, t.SETTINGS.POWER_UP_DURATION), this.disableButtons(), this.stopComponentsOnLevelComplete(), this.animationHacking.visible = !1, this.animationHackingPowerUp.visible = !1, this.animationHackComplete.visible = !0, this.keyAction.enabled = !1, this.buttonAction.inputEnabled = !1, this.player.onLevelComplete(this.gameEnd), e = 0; e < this.bugs.length; e++) this.bugs[e].onLevelComplete();
            n = Ph2.UISystem.findObject("powerup_icon/check", this.uiGameplay), this.animationHackComplete.ph2Animations.play("bar_elect_anim", 1, !1).onComplete.add(function() { s.animationCircleCheck.visible = !0, (i = s.animationCircleCheck.ph2Animations.play("circle_check", 1, !1)).onComplete.add(function() { s.animationCircleCheck.visible = !1, n.visible = !0 }, s) }, this), this.game.ph2AudioManager.pauseEffect(this.audioHacking), null !== this.audioPowerUp && this.game.ph2AudioManager.pauseEffect(this.audioPowerUp), this.game.ph2AudioManager.stopAllLoopEffects() }, i.prototype.launchAttackBoss = function(t) { var e, i, n = this;
            this.group.add(t), t.angle = 60, t.x = this.boss.x, t.y = this.boss.y - 65, t.visible = !0, e = this.player.x, i = this.player.y - 40, this.game.add.tween(t).to({ x: e, y: i }, 250, "Linear", !0).onComplete.add(function() { t.visible = !1, n.player.onBossDamage() }, this) }, i.prototype.onLostAllHitPoints = function() { this.gameEnd = t.GAME_END.LOSE, this.circleProgressBar.hideProgressBar(), this.circleProgressBar.setProgress(0, t.SETTINGS.POWER_UP_DURATION), this.disableButtons(), this.stopComponentsOnLevelComplete(), this.onLevelComplete() }, i.prototype.menuActionKeyPressed = function() { if (this.canUseMoveKeys()) switch (this.currentItem) {
                case t.ITEM_GAMEPLAY.AUDIO:
                    this.switchAudio(); break;
                case t.ITEM_GAMEPLAY.TUTORIAL:
                    this.showHowToPlay(); break;
                case t.ITEM_GAMEPLAY.RESUME:
                    this.closePause(); break;
                case t.ITEM_GAMEPLAY.RESTART:
                    this.showRestartPopUp(); break;
                case t.ITEM_GAMEPLAY.HOME:
                    this.showExitPopUp(); break;
                case t.ITEM_GAMEPLAY.YES:
                    this.confirmAction(); break;
                case t.ITEM_GAMEPLAY.NO:
                    this.cancelAction(); break;
                case t.ITEM_GAMEPLAY.AUDIO_TUTORIAL:
                    this.switchAudio(); break;
                case t.ITEM_GAMEPLAY.BACK_TUTORIAL:
                    this.closeHowToPlay(); break;
                case t.ITEM_GAMEPLAY.NEXT_LEVEL:
                    this.goToNextLevel(); break;
                case t.ITEM_GAMEPLAY.RESTART_LEVEL_COMPLETE:
                    this.restartLevel(); break;
                case t.ITEM_GAMEPLAY.AUDIO_LEVEL_COMPLETE:
                    this.switchAudio() } }, i.prototype.moveMenuUp = function() { if (this.canUseMoveKeys()) { switch (this.currentItem) {
                    case t.ITEM_GAMEPLAY.TUTORIAL:
                        this.currentItem = t.ITEM_GAMEPLAY.AUDIO; break;
                    case t.ITEM_GAMEPLAY.RESTART:
                        this.currentItem = t.ITEM_GAMEPLAY.HOME; break;
                    case t.ITEM_GAMEPLAY.BACK_TUTORIAL:
                        this.currentItem = t.ITEM_GAMEPLAY.AUDIO_TUTORIAL; break;
                    case t.ITEM_GAMEPLAY.NEXT_LEVEL:
                        this.currentItem = t.ITEM_GAMEPLAY.AUDIO_LEVEL_COMPLETE; break;
                    case t.ITEM_GAMEPLAY.RESTART_LEVEL_COMPLETE:
                        this.gameEnd === t.GAME_END.LOSE && (this.currentItem = t.ITEM_GAMEPLAY.AUDIO_LEVEL_COMPLETE) } this.updateButtonOn() } }, i.prototype.moveMenuDown = function() { if (this.canUseMoveKeys()) { switch (this.currentItem) {
                    case t.ITEM_GAMEPLAY.AUDIO:
                        this.currentItem = t.ITEM_GAMEPLAY.TUTORIAL; break;
                    case t.ITEM_GAMEPLAY.HOME:
                        this.currentItem = t.ITEM_GAMEPLAY.RESTART; break;
                    case t.ITEM_GAMEPLAY.AUDIO_TUTORIAL:
                        this.currentItem = t.ITEM_GAMEPLAY.BACK_TUTORIAL; break;
                    case t.ITEM_GAMEPLAY.AUDIO_LEVEL_COMPLETE:
                        if (this.gameEnd === t.GAME_END.WIN) { this.currentItem = t.ITEM_GAMEPLAY.NEXT_LEVEL; break } this.currentItem = t.ITEM_GAMEPLAY.RESTART_LEVEL_COMPLETE } this.updateButtonOn() } }, i.prototype.moveMenuLeft = function() { if (this.canUseMoveKeys()) { switch (this.uiTutorialPause.visible && this.showTutorialPreviousPage(), this.currentItem) {
                    case t.ITEM_GAMEPLAY.AUDIO:
                        this.currentItem = t.ITEM_GAMEPLAY.TUTORIAL; break;
                    case t.ITEM_GAMEPLAY.TUTORIAL:
                        this.currentItem = t.ITEM_GAMEPLAY.RESUME; break;
                    case t.ITEM_GAMEPLAY.RESUME:
                        this.currentItem = t.ITEM_GAMEPLAY.RESTART; break;
                    case t.ITEM_GAMEPLAY.RESTART:
                        this.currentItem = t.ITEM_GAMEPLAY.HOME; break;
                    case t.ITEM_GAMEPLAY.YES:
                    case t.ITEM_GAMEPLAY.NO:
                        this.currentItem = t.ITEM_GAMEPLAY.NO; break;
                    case t.ITEM_GAMEPLAY.NEXT_LEVEL:
                        this.currentItem = t.ITEM_GAMEPLAY.RESTART_LEVEL_COMPLETE; break;
                    case t.ITEM_GAMEPLAY.AUDIO_LEVEL_COMPLETE:
                        if (this.gameEnd === t.GAME_END.WIN) { this.currentItem = t.ITEM_GAMEPLAY.NEXT_LEVEL; break } this.currentItem = t.ITEM_GAMEPLAY.RESTART_LEVEL_COMPLETE } this.updateButtonOn() } }, i.prototype.moveMenuRight = function() { if (this.canUseMoveKeys()) { switch (this.uiTutorialPause.visible && this.showTutorialNextPage(), this.currentItem) {
                    case t.ITEM_GAMEPLAY.TUTORIAL:
                        this.currentItem = t.ITEM_GAMEPLAY.AUDIO; break;
                    case t.ITEM_GAMEPLAY.RESUME:
                        this.currentItem = t.ITEM_GAMEPLAY.TUTORIAL; break;
                    case t.ITEM_GAMEPLAY.RESTART:
                        this.currentItem = t.ITEM_GAMEPLAY.RESUME; break;
                    case t.ITEM_GAMEPLAY.HOME:
                        this.currentItem = t.ITEM_GAMEPLAY.RESTART; break;
                    case t.ITEM_GAMEPLAY.YES:
                    case t.ITEM_GAMEPLAY.NO:
                        this.currentItem = t.ITEM_GAMEPLAY.YES; break;
                    case t.ITEM_GAMEPLAY.NEXT_LEVEL:
                        this.currentItem = t.ITEM_GAMEPLAY.AUDIO_LEVEL_COMPLETE; break;
                    case t.ITEM_GAMEPLAY.RESTART_LEVEL_COMPLETE:
                        this.gameEnd === t.GAME_END.WIN ? this.currentItem = t.ITEM_GAMEPLAY.NEXT_LEVEL : this.currentItem = t.ITEM_GAMEPLAY.AUDIO_LEVEL_COMPLETE } this.updateButtonOn() } }, i.prototype.hideButtonHighlights = function() { this.highlightDiamond.visible = !1, this.highlightDiamondBig.visible = !1, this.highlightSquareBig.visible = !1, this.highlightSquare.visible = !1 }, i.prototype.updateButtonOn = function() { var e, i; if (this.isDesktop) { switch (this.hideButtonHighlights(), this.currentItem) {
                    case t.ITEM_GAMEPLAY.HOME:
                        i = this.buttonHome, e = this.highlightSquare; break;
                    case t.ITEM_GAMEPLAY.AUDIO:
                        i = this.buttonAudio, e = this.highlightSquare; break;
                    case t.ITEM_GAMEPLAY.RESTART:
                        i = this.buttonRestart, e = this.highlightSquareBig; break;
                    case t.ITEM_GAMEPLAY.RESUME:
                        i = this.buttonResume, e = this.highlightDiamondBig; break;
                    case t.ITEM_GAMEPLAY.TUTORIAL:
                        i = this.buttonHowToPlay, e = this.highlightSquareBig; break;
                    case t.ITEM_GAMEPLAY.YES:
                        i = this.buttonConfirm, e = this.highlightSquareBig; break;
                    case t.ITEM_GAMEPLAY.NO:
                        i = this.buttonCancel, e = this.highlightSquareBig; break;
                    case t.ITEM_GAMEPLAY.BACK_TUTORIAL:
                        i = this.buttonBackTutorial, e = this.highlightSquareBig; break;
                    case t.ITEM_GAMEPLAY.AUDIO_TUTORIAL:
                        i = this.buttonAudioTutorial, e = this.highlightSquare; break;
                    case t.ITEM_GAMEPLAY.NEXT_LEVEL:
                        i = this.buttonNextLevel, e = this.highlightDiamond; break;
                    case t.ITEM_GAMEPLAY.RESTART_LEVEL_COMPLETE:
                        i = this.buttonRestartLevelComplete, e = this.highlightSquareBig; break;
                    case t.ITEM_GAMEPLAY.AUDIO_LEVEL_COMPLETE:
                        i = this.buttonAudioLevelComplete, e = this.highlightSquare; break;
                    default:
                        e = null, i = null } null !== e && null !== i && (e.x = i.x, e.y = i.y, e.visible = !0) } }, i.prototype.checkActionEsc = function() { this.inTutorialState || this.uiLevelComplete.visible || this.animationStart.visible || (this.uiConfirmation.visible ? this.cancelAction() : this.uiTutorialPause.visible ? this.closeHowToPlay() : this.isPaused ? this.closePause() : this.openPause()) }, i.prototype.pauseGame = function() { this.game.ph2AudioManager.pauseEffect(this.audioHacking), this.game.ph2AudioManager.pauseEffect(this.audioPowerUp), this.pauseComponents(), this.hideUIGameplay() }, i.prototype.resumeGame = function() { this.powerUpActive && this.game.ph2AudioManager.resumeEffect(this.audioPowerUp), this.resumeComponents(), this.showUIGameplay() }, i.prototype.openPause = function() { this.isPaused = !0, this.uiPause.visible = !0, this.overlayPause.revive(), this.game.ph2AudioManager.playEffect("generic_button", !1), this.game.ph2AudioManager.playEffect("popup", !1), this.currentItem = t.ITEM_GAMEPLAY.RESUME, this.hideButtonHighlights(), this.disableButtons(), this.pauseGame(), this.keyPause.enabled = !0 }, i.prototype.closePause = function() { this.isPaused = !1, this.uiPause.visible = !1, this.overlayPause.kill(), this.game.ph2AudioManager.playEffect("generic_button", !1), this.enableButtons(), this.resumeGame(), this.highlightSquareBig.visible = !1, this.highlightSquare.visible = !1, this.highlightDiamondBig.visible = !1 }, i.prototype.hideUIGameplay = function() { var t, e, i, n;
            t = Ph2.UISystem.findObject("select", this.uiGameplay), e = Ph2.UISystem.findObject("powerup_icon", this.uiGameplay), i = Ph2.UISystem.findObject("hack_bar1/hack_bar1", this.uiGameplay), n = Ph2.UISystem.findObject("hack_bar1/hack_bar_2", this.uiGameplay), t.visible = !1, e.visible = !1, i.visible = !1, n.visible = !1, t.visibility.enable(!1), e.visibility.enable(!1), i.visibility.enable(!1), n.visibility.enable(!1) }, i.prototype.showUIGameplay = function() { var t, e, i, n;
            t = Ph2.UISystem.findObject("select", this.uiGameplay), e = Ph2.UISystem.findObject("powerup_icon", this.uiGameplay), i = Ph2.UISystem.findObject("hack_bar1/hack_bar1", this.uiGameplay), n = Ph2.UISystem.findObject("hack_bar1/hack_bar_2", this.uiGameplay), t.visible = !0, e.visible = !0, i.visible = !0, n.visible = !0 }, i.prototype.confirmAction = function() { this.buttonCancel.inputEnabled = !1, this.buttonConfirm.inputEnabled = !1, this.keyContinue.enabled = !1, this.disableButtons(), this.game.ph2AudioManager.playEffect("generic_button", !1), this.showingReturnHome ? this.goToLevelSelect() : this.showingRestartGame && this.restartLevel() }, i.prototype.cancelAction = function() { this.showingRestartGame ? this.currentItem = t.ITEM_GAMEPLAY.RESTART : this.showingReturnHome && (this.currentItem = t.ITEM_GAMEPLAY.HOME), this.hideButtonHighlights(), this.game.ph2AudioManager.playEffect("generic_button", !1), this.showingRestartGame = !1, this.showingReturnHome = !1, this.uiConfirmation.visible = !1, this.uiPause.visible = !0 }, i.prototype.showHowToPlay = function() { var e, i; for (i = this.isDesktop ? "" : "_mobile", this.uiPause.visible = !1, this.uiTutorialPause.visible = !0, e = 0; e < this.animationsTutorial.length; e++) this.animationsTutorial[e].visible = !1, this.tutorialCircles[e].visible = !1;
            this.buttonPreviousTutorial.visible = !1, this.buttonNextTutorial.visible = !0, this.tutorialCircles[0].visible = !0, this.animationsTutorial[0].visible = !0, this.animationsTutorial[0].ph2Animations.play("tutorial_1_anim" + i, 1, !0), this.game.ph2AudioManager.playEffect("generic_button", !1), this.game.ph2AudioManager.playEffect("popup", !1), this.currentItem = t.ITEM_GAMEPLAY.BACK_TUTORIAL, this.currentTutorialPage = 0, this.hideButtonHighlights() }, i.prototype.showTutorialNextPage = function() { var t, e, i; if (!(this.currentTutorialPage >= 4)) { for (this.currentTutorialPage++, t = 0; t < this.animationsTutorial.length; t++) this.animationsTutorial[t].visible = !1, this.tutorialCircles[t].visible = !1;
                this.tutorialCircles[this.currentTutorialPage].visible = !0, e = this.isDesktop ? "" : "_mobile", (i = this.animationsTutorial[this.currentTutorialPage]).visible = !0, this.currentTutorialPage < 3 ? (i.ph2Animations.stop(), i.ph2Animations.play("tutorial_" + (this.currentTutorialPage + 1) + "_anim" + e, 1, !0)) : 3 === this.currentTutorialPage ? (i.ph2Animations.stop(), i.ph2Animations.play("tutorial_4_anim_how_to_play", 1, !0)) : 4 === this.currentTutorialPage && (i.ph2Animations.stop(), i.ph2Animations.play("tutorial_5_anim", 1, !0)), this.buttonPreviousTutorial.visible = !0, this.currentTutorialPage >= 4 && (this.currentTutorialPage = 4, this.buttonNextTutorial.visible = !1, this.buttonNextTutorial.visibility.enable(!1)), this.game.ph2AudioManager.playEffect("generic_button", !1) } }, i.prototype.showTutorialPreviousPage = function() { var t, e, i; if (!(this.currentTutorialPage <= 0)) { for (this.currentTutorialPage--, t = 0; t < this.animationsTutorial.length; t++) this.animationsTutorial[t].visible = !1, this.tutorialCircles[t].visible = !1;
                this.tutorialCircles[this.currentTutorialPage].visible = !0, e = this.isDesktop ? "" : "_mobile", (i = this.animationsTutorial[this.currentTutorialPage]).visible = !0, this.currentTutorialPage < 3 ? (i.ph2Animations.stop(), i.ph2Animations.play("tutorial_" + (this.currentTutorialPage + 1) + "_anim" + e, 1, !0)) : 3 === this.currentTutorialPage ? (i.ph2Animations.stop(), i.ph2Animations.play("tutorial_4_anim_how_to_play", 1, !0)) : 4 === this.currentTutorialPage && (i.ph2Animations.stop(), i.ph2Animations.play("tutorial_5_anim", 1, !0)), this.buttonNextTutorial.visible = !0, this.currentTutorialPage <= 0 && (this.currentTutorialPage = 0, this.buttonPreviousTutorial.visible = !1, this.buttonPreviousTutorial.visibility.enable(!1)), this.game.ph2AudioManager.playEffect("generic_button", !1) } }, i.prototype.closeHowToPlay = function() { this.uiPause.visible = !0, this.uiTutorialPause.visible = !1, this.game.ph2AudioManager.playEffect("generic_button", !1), this.currentItem = t.ITEM_GAMEPLAY.TUTORIAL, this.hideButtonHighlights() }, i.prototype.showTutorialHackingPart1 = function() { 0 === this.currentLevel && (this.alienKeysDisabled = !0, this.actionKeyDisabled = !0, this.uiTutorial.visible = !0, this.inTutorialState = !0, this.keyAction.enabled = !1, this.keyAlien1.enabled = !1, this.keyAlien2.enabled = !1, this.buttonAlien1.inputEnabled = !1, this.buttonAlien2.inputEnabled = !1, this.buttonAction.inputEnabled = !1, this.buttonPause.inputEnabled = !1, this.isPaused = !0, this.pauseGame(), this.showUIGameplay(), this.animationArrowHack.ph2Animations.play("hack_tutorial_anim", 1, !0), Ph2.UISystem.findObject("hack_bar1/hack_tutorial", this.uiGameplay).addChild(this.animationArrowHack), Ph2.UISystem.findObject("tutorial_1", this.uiTutorial).visible = !0, this.game.time.events.add(t.SETTINGS.TIME_TUTORIAL, this.showTutorialHackingPart2, this)) }, i.prototype.showTutorialHackingPart2 = function() { this.animationArrowHack.visible = !1, this.animationArrowRight.visible = !1, this.animationArrowDown.visible = !0, this.animationArrowDown.y = .5 * -this.buttonAlien1.height, this.animationArrowDown.ph2Animations.play("arrow_anim", 1, !0), this.buttonAlien1.addChild(this.animationArrowDown), Ph2.UISystem.findObject("tutorial_1", this.uiTutorial).visible = !1, Ph2.UISystem.findObject("tutorial_2", this.uiTutorial).visible = !0, this.game.time.events.add(t.SETTINGS.TIME_TUTORIAL, this.showTutorialHackingPart3, this) }, i.prototype.showTutorialHackingPart3 = function() { this.animationArrowDown.visible = !1, this.animationPowerUpTutorial.visible = !0, this.animationPowerUpTutorial.ph2Animations.play("powerup_shine_yellow", 1, !0), this.isDesktop && this.animationSpace1.ph2Animations.play("space_anim", 1, !0), Ph2.UISystem.findObject("tutorial_2", this.uiTutorial).visible = !1, Ph2.UISystem.findObject("tutorial_3", this.uiTutorial).visible = !0, this.keyAction.enabled = !0, this.buttonAction.inputEnabled = !0, this.actionKeyDisabled = !1 }, i.prototype.showTutorialAttackPart1 = function() { 0 === this.currentLevel && (this.disableButtons(), this.onUpHackButton(), this.enemyTutorial = !1, this.inTutorialState = !0, this.uiTutorial.visible = !0, this.isPaused = !0, this.keyAlien2.enabled = !0, this.buttonAlien2.inputEnabled = !0, this.actionKeyDisabled = !0, this.alienKeysDisabled = !1, this.pauseGame(), this.showUIGameplay(), this.animationWarningTutorial.x = this.bugTutorial.x - 125, this.animationWarningTutorial.y = this.bugTutorial.y + .25 * this.bugTutorial.height, this.animationWarningTutorial.visible = !0, this.animationWarningTutorial.ph2Animations.play("sign_tutorial_anim", 1, !0), this.group.add(this.animationWarningTutorial), this.selectedAlien === t.ALIEN.GREY_MATTER ? (Ph2.UISystem.findObject("tutorial_3", this.uiTutorial).visible = !1, Ph2.UISystem.findObject("tutorial_4", this.uiTutorial).visible = !0, this.animationArrowDown.visible = !0, this.animationArrowDown.y = .5 * -this.buttonAlien2.height, this.animationArrowDown.ph2Animations.stop(), this.animationArrowDown.ph2Animations.play("arrow_anim", 1, !0), this.buttonAlien2.addChild(this.animationArrowDown)) : this.showTutorialAttackPart2()) }, i.prototype.showTutorialAttackPart2 = function() { Ph2.UISystem.findObject("tutorial_4", this.uiTutorial).visible = !1, Ph2.UISystem.findObject("tutorial_5", this.uiTutorial).visible = !0, this.alienKeysDisabled = !0, this.actionKeyDisabled = !1, this.keyAction.enabled = !0, this.buttonAction.inputEnabled = !0, this.animationArrowDown.visible = !1, this.animationPowerUpTutorial.visible = !0, this.animationPowerUpTutorial.ph2Animations.play("powerup_shine_blue", 1, !0), this.isDesktop && this.animationSpace2.ph2Animations.play("space_anim", 1, !0) }, i.prototype.showTutorialColorChange = function() { this.hideAllTutorialsInGame(), this.disableButtons(), this.uiTutorial.visible = !0, this.isPaused = !0, this.pauseGame(), this.showUIGameplay(), this.inTutorialState = !0, this.enemyTutorial = !1, this.keyAlien3.enabled = !0, this.buttonAlien3.inputEnabled = !0, this.animationArrowDown.visible = !0, this.animationArrowDown.y = .5 * -this.buttonAlien3.height, this.animationArrowDown.ph2Animations.stop(), this.animationArrowDown.ph2Animations.play("arrow_anim", 1, !0), this.buttonAlien3.addChild(this.animationArrowDown), this.alienKeysDisabled = !1, this.actionKeyDisabled = !0, Ph2.UISystem.findObject("tutorial_12", this.uiTutorial).visible = !0 }, i.prototype.showTutorialDiamondHead = function() { this.hideAllTutorialsInGame(), this.disableButtons(), this.pauseGame(), this.showUIGameplay(), this.isPaused = !0, this.keyAlien2.enabled = !0, this.buttonAlien2.inputEnabled = !0, this.actionKeyDisabled = !0, this.alienKeysDisabled = !1, this.uiTutorial.visible = !0, this.inTutorialState = !0, this.isWildvineFirstLevel = !1, this.enemyTutorial = !1, this.animationArrowDown.visible = !0, this.animationArrowDown.y = .5 * -this.buttonAlien2.height, this.animationArrowDown.ph2Animations.stop(), this.animationArrowDown.ph2Animations.play("arrow_anim", 1, !0), this.buttonAlien2.addChild(this.animationArrowDown), Ph2.UISystem.findObject("tutorial_8", this.uiTutorial).visible = !0 }, i.prototype.showTutorialWildvine = function() { this.hideAllTutorialsInGame(), this.disableButtons(), this.pauseGame(), this.showUIGameplay(), this.isPaused = !0, this.keyAlien2.enabled = !0, this.buttonAlien2.inputEnabled = !0, this.actionKeyDisabled = !0, this.alienKeysDisabled = !1, this.uiTutorial.visible = !0, this.isWildvineFirstLevel = !1, this.enemyTutorial = !1, this.inTutorialState = !0, this.animationArrowDown.visible = !0, this.animationArrowDown.y = .5 * -this.buttonAlien2.height, this.animationArrowDown.ph2Animations.stop(), this.animationArrowDown.ph2Animations.play("arrow_anim", 1, !0), this.buttonAlien2.addChild(this.animationArrowDown), Ph2.UISystem.findObject("tutorial_9", this.uiTutorial).visible = !0 }, i.prototype.showTutorialOverheatPart1 = function() { var e = this;
            this.hideAllTutorialsInGame(), this.uiTutorial.visible = !0, this.isPaused = !0, this.pauseGame(), this.showUIGameplay(), this.disableButtons(), this.inTutorialState = !0, this.animationPowerUpTutorial.visible = !0, this.animationPowerUpTutorial.ph2Animations.play("powerup_shine_red", 1, !0), this.actionKeyDisabled = !0, this.alienKeysDisabled = !0, Ph2.UISystem.findObject("tutorial_6", this.uiTutorial).visible = !0, this.game.time.events.add(t.SETTINGS.TIME_TUTORIAL, function() { e.isPaused = !1, e.uiTutorial.visible = !1, e.inTutorialState = !1, e.actionKeyDisabled = !1, e.alienKeysDisabled = !1, e.resumeGame(), e.enableButtons(), e.hideAllTutorialsInGame() }, this) }, i.prototype.showTutorialOverheatPart2 = function() { this.hideAllTutorialsInGame(), this.uiTutorial.visible = !0, this.isPaused = !0, this.pauseGame(), this.showUIGameplay(), this.disableButtons(), this.keyAction.enabled = !0, this.buttonAction.inputEnabled = !0, this.isOverheatTutorial = !0, this.inTutorialState = !0, this.actionKeyDisabled = !1, this.alienKeysDisabled = !0, this.animationPowerUpTutorial.visible = !0, this.animationPowerUpTutorial.ph2Animations.play("powerup_shine_blue", 1, !0), Ph2.UISystem.findObject("tutorial_7", this.uiTutorial).visible = !0 }, i.prototype.showTutorialPowerUp = function(t) { this.hideAllTutorialsInGame(), this.uiTutorial.visible = !0, this.inTutorialState = !0, this.isPaused = !0, this.pauseGame(), this.showUIGameplay(), this.disableButtons(), this.actionKeyDisabled = !0, this.alienKeysDisabled = !0, this.animationArrowTouch.visible = !0, this.animationArrowTouch.x = t.x + 40, this.animationArrowTouch.y = t.y + 30, this.animationArrowTouch.ph2Animations.play("arrow_touch_anim", 1, !0), Ph2.UISystem.findObject("tutorial_10", this.uiTutorial).visible = !0 }, i.prototype.hideTutorialPowerUp = function() { var e = this;
            this.hideAllTutorialsInGame(), this.resumeGame(), this.enableButtons(), this.isPaused = !1, this.inTutorialState = !1, this.actionKeyDisabled = !1, this.alienKeysDisabled = !1, this.animationPowerUpTutorial.visible = !0, this.animationPowerUpTutorial.ph2Animations.play("powerup_shine_blue", 1, !0), Ph2.UISystem.findObject("tutorial_11", this.uiTutorial).visible = !0, this.game.time.events.add(t.SETTINGS.TIME_TUTORIAL, function() { e.uiTutorial.visible = !1, e.hideAllTutorialsInGame() }, this) }, i.prototype.showRestartPopUp = function() { var e, i;
            e = Ph2.UISystem.findObject("container/description1", this.uiConfirmation), i = Ph2.UISystem.findObject("container/description2", this.uiConfirmation), e.visible = !1, i.visible = !0, this.showingRestartGame = !0, this.uiPause.visible = !1, this.uiConfirmation.visible = !0, this.game.ph2AudioManager.playEffect("generic_button", !1), this.game.ph2AudioManager.playEffect("popup", !1), this.currentItem = t.ITEM_GAMEPLAY.NO, this.hideButtonHighlights() }, i.prototype.showExitPopUp = function() { var e, i;
            e = Ph2.UISystem.findObject("container/description1", this.uiConfirmation), i = Ph2.UISystem.findObject("container/description2", this.uiConfirmation), e.visible = !0, i.visible = !1, this.showingReturnHome = !0, this.uiPause.visible = !1, this.uiConfirmation.visible = !0, this.game.ph2AudioManager.playEffect("generic_button", !1), this.game.ph2AudioManager.playEffect("popup", !1), this.currentItem = t.ITEM_GAMEPLAY.NO, this.hideButtonHighlights() }, i.prototype.goToLevelSelect = function() { var e = this;
            this.gameCompleted || this.stopComponentsOnLevelComplete(), this.clearEventsOnKeys(), this.game.ph2NotificationManager.removeAllObserversFromContext(this), this.game.ph2AudioManager.playEffect("generic_button", !1), t.Instances.Transition.playIn(), t.Instances.Transition.onCompletedIn.addOnce(function() { e.game.ph2AnimationManager.stopAll(), e.game.state.start("statemachinelevelSelectState", !0, !1, !1) }, this) }, i.prototype.goToNextLevel = function() { var e = this;
            this.gameCompleted || this.stopComponentsOnLevelComplete(), this.clearEventsOnKeys(), this.game.ph2NotificationManager.removeAllObserversFromContext(this), this.game.ph2AudioManager.playEffect("play_button", !1), t.Instances.Transition.playIn(), t.Instances.Transition.onCompletedIn.addOnce(function() { e.game.ph2AnimationManager.stopAll(), e.currentLevel >= 9 && !t.Instances.DataManager.getSeeComicEnd() ? (t.Instances.DataManager.seeComicEnd(), e.game.state.start("statemachinecomicState", !0, !1, !1)) : e.game.state.start("statemachinelevelSelectState", !0, !1, !1) }, this) }, i.prototype.restartLevel = function() { var e = this;
            this.gameCompleted || this.stopComponentsOnLevelComplete(), this.clearEventsOnKeys(), this.game.ph2NotificationManager.removeAllObserversFromContext(this), this.game.ph2AudioManager.playEffect("generic_button", !1), t.Instances.Transition.playIn(), t.Instances.Transition.onCompletedIn.addOnce(function() { e.game.ph2AnimationManager.stopAll(), e.game.state.start("statemachinegameplayState", !0, !1, e.currentLevel) }, this) }, i.prototype.startBenAnimation = function() { var t = this;
            this.player.animationPowerUpHack.visible = !1, this.player.animationPowerUpAttack.visible = !1, this.animationHackingWheel.visible = !1, this.animationBen.visible = !0, this.animationBen.ph2Animations.play("ben_anim", 1, !1).onComplete.add(function() { t.player.animationPowerUpHack.visible = !1, t.player.animationPowerUpAttack.visible = !1, t.animationBen.ph2Animations.play("ben_anim_loop", 1, !0), t.onLevelComplete() }, this) }, i.prototype.onLevelComplete = function() { var e;
            this.gameCompleted = !0, this.gameEnd === t.GAME_END.WIN ? (t.Instances.LocalizationManager.localizeTextImage("container/title", this.uiLevelComplete, "atlas_text_statemachine", "ui_lvl_completed_text.png"), this.game.ph2AudioManager.playEffect("stage_completed", !1), this.currentLevel + 1 >= t.Instances.DataManager.getLastLevelUnlocked() && ((e = this.currentLevel + 1) >= 10 && (e = 10), t.Instances.DataManager.saveLastLevelUnlocked(e))) : (t.Instances.LocalizationManager.localizeTextImage("container/title", this.uiLevelComplete, "atlas_text_statemachine", "ui_gameover_text.png"), this.buttonNextLevel.visible = !1, this.buttonNextLevel.visibility.enable(!1), this.buttonRestartLevelComplete.x = .5 * this.game.width), this.game.ph2AudioManager.pauseEffect(this.audioHacking), null !== this.audioPowerUp && this.game.ph2AudioManager.pauseEffect(this.audioPowerUp), this.game.time.events.add(2e3, this.showLevelComplete, this) }, i.prototype.showLevelComplete = function() { this.overlayPause.revive(), this.uiLevelComplete.visible = !0, this.currentItem = t.ITEM_GAMEPLAY.NEXT_LEVEL, this.game.ph2AnimationManager.stopAll(), this.gameEnd === t.GAME_END.LOSE && (this.currentItem = t.ITEM_GAMEPLAY.RESTART_LEVEL_COMPLETE, this.game.ph2AudioManager.playEffect("level_failed", !1)), this.hideButtonHighlights() }, i.prototype.pauseComponents = function() { var e; for (this.game.ph2AnimationManager.pauseAll(), this.selectedAlien === t.ALIEN.GREY_MATTER && this.componentHacking.pauseComponent(), null !== this.componentWaveCreation && this.componentWaveCreation.pauseTimer(), this.player.onPause(), e = 0; e < this.bugs.length; e++) this.bugs[e].onPause(); for (e = 0; e < this.projectiles.length; e++) this.projectiles[e].onPause();
            null !== this.boss && this.boss.onPause() }, i.prototype.resumeComponents = function() { var t; for (this.game.ph2AnimationManager.resumeAll(), null !== this.componentWaveCreation && this.componentWaveCreation.resumeTimer(), this.player.onResume(), t = 0; t < this.bugs.length; t++) this.bugs[t].onResume(); for (t = 0; t < this.projectiles.length; t++) this.projectiles[t].onResume();
            null !== this.boss && this.boss.onResume() }, i.prototype.stopComponentsOnLevelComplete = function() { var t; for (this.componentHacking.pauseComponent(), null !== this.componentWaveCreation && this.componentWaveCreation.pauseTimer(), t = 0; t < this.aliens.length; t++) this.aliens[t].onLevelComplete(this.gameEnd); for (t = 0; t < this.bugs.length; t++) this.bugs[t].onLevelComplete(); for (t = 0; t < this.projectiles.length; t++) this.projectiles[t].onLevelComplete();
            null !== this.boss && this.boss.onLevelComplete(this.gameEnd), this.player.onLevelComplete(this.gameEnd) }, i.prototype.enableButtons = function() { this.buttonPause.inputEnabled = !0, this.buttonAlien1.inputEnabled = !0, this.buttonAlien2.inputEnabled = !0, this.buttonAlien3.inputEnabled = !0, this.buttonAlien4.inputEnabled = !0, this.buttonAction.inputEnabled = !0, this.keyAction.enabled = !0, this.keyAlien1.enabled = !0, this.keyAlien2.enabled = !0, this.keyAlien3.enabled = !0, this.keyAlien4.enabled = !0, this.keyPause.enabled = !0 }, i.prototype.disableButtons = function() { this.buttonPause.inputEnabled = !1, this.buttonAlien1.inputEnabled = !1, this.buttonAlien2.inputEnabled = !1, this.buttonAlien3.inputEnabled = !1, this.buttonAlien4.inputEnabled = !1, this.buttonAction.inputEnabled = !1, this.keyAction.enabled = !1, this.keyAlien1.enabled = !1, this.keyAlien2.enabled = !1, this.keyAlien3.enabled = !1, this.keyAlien4.enabled = !1, this.keyPause.enabled = !1 }, i.prototype.update = function() { this.gameCompleted || (this.checkHacking(), this.checkHitPoints(), this.checkPowerUpBar(), this.checkHeatBar(), this.checkOverheat(), this.checkOrbs(), this.checkHandShine(), this.checkEnemyTutorial(), this.checkColorEnemyTutorial(), this.checkHackingDecrease(), this.checkHint(), this.followOrb()) }, i.prototype.checkEnemyTutorial = function() { this.enemyTutorial && this.bugTutorial.x < .85 * this.game.width && (this.isDiamondHeadFirstLevel ? this.showTutorialDiamondHead() : this.isWildvineFirstLevel ? this.showTutorialWildvine() : this.isTwoAttackAlienLevel ? this.showTutorialColorChange() : this.showTutorialAttackPart1()) }, i.prototype.checkColorEnemyTutorial = function() {}, i.prototype.checkHandShine = function() {!this.isPaused && this.selectedAlien !== t.ALIEN.GREY_MATTER && this.isHandTimerActive && (this.timerHand += this.game.time.elapsedMS, this.timerHand >= 4e3 && (this.isHandTimerActive = !1, this.timerHand = 0, this.animationHandShine.visible = !0)) }, i.prototype.checkHacking = function() { var t, e;
            t = (this.hackingBarSize - 2) * this.componentHacking.percentageCompleted / 100, e = Math.floor(this.componentHacking.percentageCompleted), this.hackingBar.height = -t, e <= 0 ? this.textHackNumber.setText("0%") : this.textHackNumber.setText(e + "%") }, i.prototype.checkHitPoints = function() { this.player.hitPoints <= 0 && (this.gameCompleted = !0, this.onLostAllHitPoints()) }, i.prototype.checkPowerUpBar = function() { this.gameCompleted || this.hackingCompleted || this.powerUpActive && this.circleProgressBar.decreaseBar(this.player.componentTimerPowerUp.getCurrentTime(), t.SETTINGS.POWER_UP_DURATION) }, i.prototype.checkHeatBar = function() { var e, i;
            this.selectedAlien !== t.ALIEN.GREY_MATTER ? (i = 100 * this.player.aliens[this.selectedAlien].totalHeat / 100, e = this.powerUpBarSize * i / 100, this.game.add.tween(this.heatBar).to({ height: -e }, 75, "Linear", !0)) : this.heatBar.height = 0 }, i.prototype.checkOverheat = function() { this.player.aliens[this.selectedAlien].isOverheated ? this.heatBar.frameName = "powerup_red_bar.png" : this.heatBar.frameName = "powerup_blue_bar.png" }, i.prototype.checkOrbs = function() { var t; for (t = this.orbs.length - 1; t >= 0; t--) this.orbs[t].isActive || this.orbs.splice(t, 1) }, i.prototype.followOrb = function() { this.followingOrb && this.animationArrowTouch.visible && (this.animationArrowTouch.x = this.orbToFollow.x + 40, this.animationArrowTouch.y = this.orbToFollow.y + 30) }, i.prototype.checkHackingDecrease = function() { this.isPaused || this.isDecreasingHack || this.isHacking || this.animationStart.visible ? this.timerDecreaseHack = 0 : (this.timerDecreaseHack += this.game.time.elapsedMS, this.timerDecreaseHack >= this.levelData.time_to_decrease_hack && (this.timerDecreaseHack = 0, this.isDecreasingHack = !0, this.componentHacking.increasing = !1, this.componentHacking.resumeComponent(), this.canShowHint && (this.selectedAlien === t.ALIEN.GREY_MATTER ? (this.buttonAction.addChild(this.animationArrowDown), this.animationArrowDown.y = .5 * -this.buttonAction.height) : (this.buttonAlien1.addChild(this.animationArrowDown), this.animationArrowDown.y = .5 * -this.buttonAlien1.height), this.isShowingHint = !0, this.animationArrowDown.visible = !0, this.animationArrowDown.ph2Animations.play("arrow_anim", 1, !0)))) }, i.prototype.checkHint = function() { var t, e; if (this.canShowHint && this.isShowingHint) { for (e = !0, t = 0; t < this.bugs.length; t++) this.bugs[t].visible && this.bugs[t].x < .55 * this.game.width && (e = !1);
                null !== this.boss && this.boss.x < .55 * this.game.width && (e = !1), this.animationArrowDown.visible = e } }, i.prototype.resize = function() { this.isDesktop || "portrait" !== t.Constants.CURRENT_ORIENTATION && (this.overlayPause.width = this.game.width, this.overlayPause.height = this.game.height, this.bgTile.width = this.game.width, this.bgTile.height = this.game.height, this.gameCompleted && this.gameEnd === t.GAME_END.LOSE && (this.buttonRestartLevelComplete.x = .5 * this.game.width), t.Constants.CALCULATED_HEIGHT > t.Constants.CALCULATED_WIDTH && this.canShowPause() && this.openPause(), (this.uiPause.visible || this.uiConfirmation.visible || this.uiTutorialPause.visible || this.uiLevelComplete.visible) && this.updateButtonOn(), t.Constants.IOS_BUTTON_PATCH && this.repositionButtonsIOS()) }, i.prototype.canShowPause = function() { return !this.gameCompleted && (!this.inTutorialState && (!this.animationStart.visible && (!this.uiConfirmation.visible && (!this.uiTutorialPause.visible && (!this.uiPause.visible && !this.uiLevelComplete.visible))))) }, i.prototype.canUseMoveKeys = function() { return !!this.uiPause.visible || (!!this.uiTutorialPause.visible || (!!this.uiConfirmation.visible || this.uiLevelComplete.visible)) }, i.prototype.shutdown = function() { var t; for (this.game.onFocus.removeAll(this), this.game.onBlur.removeAll(this), t = 0; t < this.bugs.length; t++) this.bugs[t].removeListeners(); for (t = 0; t < this.aliens.length; t++) this.aliens[t].removeListeners();
            this.player.removeListeners(), this.game.ph2NotificationManager.removeAllObserversFromContext(this) }, i.prototype.createCheats = function() { var e = this;
            t.Constants.CHEATS_ENABLED && this.game.input.keyboard.addKey(Phaser.Keyboard.ZERO).onDown.add(function() { e.onHackingComplete() }, this) }, i }(Phaser.State);
    t.GameplayState = e }(GameStateMachine || (GameStateMachine = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameStateMachine;
! function(t) { var e = function(e) {
        function i() { return e.call(this) || this } return __extends(i, e), i.prototype.init = function(t) { this.fromState = t }, i.prototype.create = function() { t.Instances.Transition.playStand(), 0 !== t.Instances.DataManager.getLastLevelUnlocked() || t.Instances.DataManager.getSeeComicIntro() ? (this.game.ph2AnimationManager.stopAll(), this.game.state.start("statemachinelevelSelectState", !0, !1, !1)) : (t.Instances.DataManager.seeComicIntro(), this.game.ph2AnimationManager.stopAll(), this.game.state.start("statemachinecomicState", !0, !1, !0)) }, i }(Phaser.State);
    t.MainMenuState = e }(GameStateMachine || (GameStateMachine = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameStateMachine;
! function(t) { var e = function(e) {
        function i() { return e.call(this) || this } return __extends(i, e), i.prototype.init = function(e) { this.levelSelected = t.Instances.DataManager.getLastLevelUnlocked(), this.lastLevelUnlocked = t.Instances.DataManager.getLastLevelUnlocked(), this.buttons = [], this.keyAction = this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER), this.keyEsc = this.game.input.keyboard.addKey(Phaser.Keyboard.ESC), this.keyUp = this.game.input.keyboard.addKey(Phaser.Keyboard.UP), this.keyDown = this.game.input.keyboard.addKey(Phaser.Keyboard.DOWN), this.keyLeft = this.game.input.keyboard.addKey(Phaser.Keyboard.LEFT), this.keyRight = this.game.input.keyboard.addKey(Phaser.Keyboard.RIGHT), this.isDesktop = this.game.device.desktop, this.showingFinalMessage = !1 }, i.prototype.create = function() { var e = this;
            this.bgLevelSelect = new Phaser.Sprite(this.game, 0, 0, "bg_select"), this.add.existing(this.bgLevelSelect), this.groupBack = new Phaser.Group(this.game), this.add.existing(this.groupBack), this.group = new Phaser.Group(this.game), this.add.existing(this.group), this.overlayFinalMessage = new t.Overlay(this.game, .7, "bg_black"), this.uiLevelSelect = this.game.add.ph2UI("ui_level_select", "atlas_ui_level_select"), this.uiFinalMessage = this.game.add.ph2UI("ui_final_message", "atlas_ui_popups"), this.buttonBack = Ph2.UISystem.findObject("back", this.uiLevelSelect), this.buttonAudio = Ph2.UISystem.findObject("sound", this.uiLevelSelect), this.buttonBack.loadTexture("atlas_ui_level_select"), this.buttonBack.setFrames("main.png", "main.png", "main_press.png", "main.png"), this.buttonLevel1 = Ph2.UISystem.findObject("stage1", this.uiLevelSelect), this.buttonLevel2 = Ph2.UISystem.findObject("stage2", this.uiLevelSelect), this.buttonLevel3 = Ph2.UISystem.findObject("stage3", this.uiLevelSelect), this.buttonLevel4 = Ph2.UISystem.findObject("stage4", this.uiLevelSelect), this.buttonLevel5 = Ph2.UISystem.findObject("stage5", this.uiLevelSelect), this.buttonLevel6 = Ph2.UISystem.findObject("stage6", this.uiLevelSelect), this.buttonLevel7 = Ph2.UISystem.findObject("stage7", this.uiLevelSelect), this.buttonLevel8 = Ph2.UISystem.findObject("stage8", this.uiLevelSelect), this.buttonLevel9 = Ph2.UISystem.findObject("stage9", this.uiLevelSelect), this.buttonLevel10 = Ph2.UISystem.findObject("stage10", this.uiLevelSelect), this.buttonYes = Ph2.UISystem.findObject("yes", this.uiFinalMessage), this.highlightLevel = new Phaser.Sprite(this.game, 0, 0, "atlas_ui_level_select", "select.png"), this.highlightLevel.anchor.set(.5), this.highlightButton = new Phaser.Sprite(this.game, 0, 0, "atlas_ui", "hl_mid.png"), this.highlightButton.anchor.set(.5), this.originalSoundY = Ph2.UISystem.findObject("sound", this.uiLevelSelect).y, this.originalBackY = Ph2.UISystem.findObject("back", this.uiLevelSelect).y, this.overlayFinalMessage.kill(), this.uiFinalMessage.visible = !1, this.groupBack.add(this.highlightButton), this.group.add(this.uiLevelSelect), this.group.add(this.overlayFinalMessage), this.group.add(this.uiFinalMessage), this.buttons.push(this.buttonLevel1), this.buttons.push(this.buttonLevel2), this.buttons.push(this.buttonLevel3), this.buttons.push(this.buttonLevel4), this.buttons.push(this.buttonLevel5), this.buttons.push(this.buttonLevel6), this.buttons.push(this.buttonLevel7), this.buttons.push(this.buttonLevel8), this.buttons.push(this.buttonLevel9), this.buttons.push(this.buttonLevel10), this.checkAudio(), this.checkCurrentItem(), this.localizeUI(), this.createAnimations(), this.disableLevelButtons(!0), this.resize(), this.updateButtonOn(), t.Constants.IOS_BUTTON_PATCH && this.repositionButtonsIOS(), t.Instances.Transition.playOut(), t.Instances.Transition.onCompletedOut.addOnce(function() { e.addTouchListeners(), e.showingFinalMessage ? e.showFinalMessage() : e.disableLevelButtons(!1) }, this), this.game.onBlur.add(function() { t.Instances.DataManager.getAudio() && e.game.ph2AudioManager.pauseMusic() }, this), this.game.onFocus.add(function() { t.Instances.DataManager.getAudio() && !t.Instances.IncorrectOrientation && e.game.ph2AudioManager.resumeMusic() }, this) }, i.prototype.repositionButtonsIOS = function() { Ph2.UISystem.findObject("sound", this.uiLevelSelect).y = this.originalSoundY + 35, Ph2.UISystem.findObject("back", this.uiLevelSelect).y = this.originalBackY + 35 }, i.prototype.checkAudio = function() { t.Instances.DataManager.getAudio() ? (this.buttonAudio.setFrames("sound1.png", "sound1.png", "sound1_press.png", "sound1.png"), this.game.ph2AudioManager.switchMusic(t.Music.MainMenu), t.Instances.IncorrectOrientation && this.game.ph2AudioManager.pauseMusic()) : this.buttonAudio.setFrames("sound2.png", "sound2.png", "sound2_press.png", "sound2.png") }, i.prototype.createAnimations = function() { this.animationLevelUnlocked = this.game.add.ph2AnimationObject(0, 0, "stage", "atlas_ui"), this.animationLevelSelect = this.game.add.ph2AnimationObject(0, 0, "stage_select", "atlas_ui"), this.animationLevelStand = this.game.add.ph2AnimationObject(0, 0, "stage_stand", "atlas_ui"), this.animationShineMessage = this.game.add.ph2AnimationObject(0, 0, "shine", "atlas_ui_popups"), this.animationLevelUnlocked.visible = !1, this.groupBack.add(this.animationLevelStand), Ph2.UISystem.findObject("final_base/shine_pivot", this.uiFinalMessage).addChild(this.animationShineMessage) }, i.prototype.checkCurrentItem = function() { var e; switch (this.levelSelected) {
                case 0:
                    e = this.buttonLevel1, this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_1; break;
                case 1:
                    e = this.buttonLevel2, this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_2; break;
                case 2:
                    e = this.buttonLevel3, this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_3; break;
                case 3:
                    e = this.buttonLevel4, this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_4; break;
                case 4:
                    e = this.buttonLevel5, this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_5; break;
                case 5:
                    e = this.buttonLevel6, this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_6; break;
                case 6:
                    e = this.buttonLevel7, this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_7; break;
                case 7:
                    e = this.buttonLevel8, this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_8; break;
                case 8:
                    e = this.buttonLevel9, this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_9; break;
                case 9:
                    e = this.buttonLevel10, this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_10; break;
                default:
                    e = this.buttonLevel1, this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_1 } this.highlightLevel.visible = !0, e.addChild(this.highlightLevel) }, i.prototype.localizeUI = function() { t.Instances.LocalizationManager.localizeTextImage("container/title", this.uiLevelSelect, "atlas_text_statemachine", "ui_lvl_select_text.png"), t.Instances.LocalizationManager.localizeTextImage("final_base/final_container/final_message1", this.uiFinalMessage, "atlas_text_statemachine", "final_message1.png"), t.Instances.LocalizationManager.localizeTextImage("final_base/final_container/final_message2", this.uiFinalMessage, "atlas_text_statemachine", "final_message2.png") }, i.prototype.addTouchListeners = function() { this.buttonBack.inputEnabled = !0, this.buttonAudio.inputEnabled = !0, this.buttonLevel1.inputEnabled = !0, this.buttonLevel2.inputEnabled = !0, this.buttonLevel3.inputEnabled = !0, this.buttonLevel4.inputEnabled = !0, this.buttonLevel5.inputEnabled = !0, this.buttonLevel6.inputEnabled = !0, this.buttonLevel7.inputEnabled = !0, this.buttonLevel8.inputEnabled = !0, this.buttonLevel9.inputEnabled = !0, this.buttonLevel10.inputEnabled = !0, this.buttonBack.events.onInputDown.add(this.goToMainMenu, this), this.buttonAudio.events.onInputUp.add(this.switchAudio, this), this.buttonLevel1.events.onInputDown.add(this.selectLevel, this), this.buttonLevel2.events.onInputDown.add(this.selectLevel, this), this.buttonLevel3.events.onInputDown.add(this.selectLevel, this), this.buttonLevel4.events.onInputDown.add(this.selectLevel, this), this.buttonLevel5.events.onInputDown.add(this.selectLevel, this), this.buttonLevel6.events.onInputDown.add(this.selectLevel, this), this.buttonLevel7.events.onInputDown.add(this.selectLevel, this), this.buttonLevel8.events.onInputDown.add(this.selectLevel, this), this.buttonLevel9.events.onInputDown.add(this.selectLevel, this), this.buttonLevel10.events.onInputDown.add(this.selectLevel, this), this.buttonYes.events.onInputDown.add(this.closeFinalMessage, this), this.buttonLevel1.events.onInputOver.add(this.onButtonLevelOver, this), this.buttonLevel2.events.onInputOver.add(this.onButtonLevelOver, this), this.buttonLevel3.events.onInputOver.add(this.onButtonLevelOver, this), this.buttonLevel4.events.onInputOver.add(this.onButtonLevelOver, this), this.buttonLevel5.events.onInputOver.add(this.onButtonLevelOver, this), this.buttonLevel6.events.onInputOver.add(this.onButtonLevelOver, this), this.buttonLevel7.events.onInputOver.add(this.onButtonLevelOver, this), this.buttonLevel8.events.onInputOver.add(this.onButtonLevelOver, this), this.buttonLevel9.events.onInputOver.add(this.onButtonLevelOver, this), this.buttonLevel10.events.onInputOver.add(this.onButtonLevelOver, this), this.keyAction.onDown.add(this.actionKeyPressed, this), this.keyEsc.onDown.add(this.goToMainMenu, this), this.keyUp.onDown.add(this.moveMenuUp, this), this.keyDown.onDown.add(this.moveMenuDown, this), this.keyLeft.onDown.add(this.moveMenuLeft, this), this.keyRight.onDown.add(this.moveMenuRight, this) }, i.prototype.disableButtons = function() { this.buttonBack.inputEnabled = !1, this.buttonAudio.inputEnabled = !1, this.buttonLevel1.inputEnabled = !1, this.buttonLevel2.inputEnabled = !1, this.buttonLevel3.inputEnabled = !1, this.buttonLevel4.inputEnabled = !1, this.buttonLevel5.inputEnabled = !1, this.buttonLevel6.inputEnabled = !1, this.buttonLevel7.inputEnabled = !1, this.buttonLevel8.inputEnabled = !1, this.buttonLevel9.inputEnabled = !1, this.buttonLevel10.inputEnabled = !1, this.keyAction.enabled = !1, this.keyEsc.enabled = !1, this.keyUp.enabled = !1, this.keyDown.enabled = !1, this.keyLeft.enabled = !1, this.keyRight.enabled = !1 }, i.prototype.switchAudio = function() { this.game.ph2AudioManager.playEffect("generic_button", !1), t.Instances.DataManager.getAudio() ? (t.Instances.DataManager.saveAudio(!1), this.buttonAudio.setFrames("sound2.png", "sound2.png", "sound2_press.png", "sound2.png"), this.game.ph2AudioManager.stopMusic(), this.game.ph2AudioManager.switchSfxState(), this.game.ph2AudioManager.switchMusicState()) : (t.Instances.DataManager.saveAudio(!0), this.buttonAudio.setFrames("sound1.png", "sound1.png", "sound1_press.png", "sound1.png"), this.game.ph2AudioManager.switchMusicState(), this.game.ph2AudioManager.switchMusic(t.Music.MainMenu), this.game.ph2AudioManager.switchSfxState()) }, i.prototype.showFinalMessage = function() { this.overlayFinalMessage.revive(), this.uiFinalMessage.visible = !0, this.animationShineMessage.ph2Animations.play("final_message_anim", 1, !0) }, i.prototype.closeFinalMessage = function() { this.overlayFinalMessage.kill(), this.uiFinalMessage.visible = !1, this.disableLevelButtons(!1) }, i.prototype.selectLevel = function(t) { switch (t.name) {
                case "stage1":
                    this.levelSelected = 0; break;
                case "stage2":
                    this.levelSelected = 1; break;
                case "stage3":
                    this.levelSelected = 2; break;
                case "stage4":
                    this.levelSelected = 3; break;
                case "stage5":
                    this.levelSelected = 4; break;
                case "stage6":
                    this.levelSelected = 5; break;
                case "stage7":
                    this.levelSelected = 6; break;
                case "stage8":
                    this.levelSelected = 7; break;
                case "stage9":
                    this.levelSelected = 8; break;
                case "stage10":
                    this.levelSelected = 9; break;
                default:
                    this.levelSelected = 0 } this.showAnimationSelected() }, i.prototype.checkMovementUp = function(e) { return this.levelSelected === this.lastLevelUnlocked ? (this.animationLevelStand.visible = !1, t.ITEM_LEVEL_SELECT.AUDIO) : e }, i.prototype.checkMovementDown = function(e) { if (this.lastLevelUnlocked >= 4) return this.levelSelected = 4, t.ITEM_LEVEL_SELECT.LEVEL_5; switch (this.lastLevelUnlocked) {
                case 0:
                    return e;
                case 1:
                    return this.levelSelected = 1, t.ITEM_LEVEL_SELECT.LEVEL_2;
                case 2:
                    return this.levelSelected = 2, t.ITEM_LEVEL_SELECT.LEVEL_3;
                case 3:
                    return this.levelSelected = 3, t.ITEM_LEVEL_SELECT.LEVEL_4;
                case 4:
                    return this.levelSelected = 4, t.ITEM_LEVEL_SELECT.LEVEL_5;
                default:
                    return e } }, i.prototype.moveMenuUp = function() { if (!this.uiFinalMessage.visible) switch (this.currentItem) {
                case t.ITEM_LEVEL_SELECT.LEVEL_1:
                    this.currentItem = t.ITEM_LEVEL_SELECT.BACK, this.updateButtonOn(); break;
                case t.ITEM_LEVEL_SELECT.LEVEL_2:
                case t.ITEM_LEVEL_SELECT.LEVEL_3:
                case t.ITEM_LEVEL_SELECT.LEVEL_4:
                    this.checkMovementUp(this.currentItem), this.updateButtonOn(); break;
                case t.ITEM_LEVEL_SELECT.LEVEL_5:
                    this.currentItem = t.ITEM_LEVEL_SELECT.AUDIO, this.updateButtonOn(); break;
                case t.ITEM_LEVEL_SELECT.LEVEL_6:
                    this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_1, this.levelSelected = 0, this.updateSelectedLevel(), this.updateButtonOn(); break;
                case t.ITEM_LEVEL_SELECT.LEVEL_7:
                    this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_2, this.levelSelected = 1, this.updateSelectedLevel(), this.updateButtonOn(); break;
                case t.ITEM_LEVEL_SELECT.LEVEL_8:
                    this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_3, this.levelSelected = 2, this.updateSelectedLevel(), this.updateButtonOn(); break;
                case t.ITEM_LEVEL_SELECT.LEVEL_9:
                    this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_4, this.levelSelected = 3, this.updateSelectedLevel(), this.updateButtonOn(); break;
                case t.ITEM_LEVEL_SELECT.LEVEL_10:
                    this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_5, this.levelSelected = 4, this.updateSelectedLevel(), this.updateButtonOn() } }, i.prototype.moveMenuDown = function() { if (!this.uiFinalMessage.visible) switch (this.currentItem) {
                case t.ITEM_LEVEL_SELECT.LEVEL_1:
                    if (this.lastLevelUnlocked < 5) return;
                    this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_6, this.levelSelected = 5, this.updateSelectedLevel(), this.updateButtonOn(); break;
                case t.ITEM_LEVEL_SELECT.LEVEL_2:
                    if (this.lastLevelUnlocked < 6) return;
                    this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_7, this.levelSelected = 6, this.updateSelectedLevel(), this.updateButtonOn(); break;
                case t.ITEM_LEVEL_SELECT.LEVEL_3:
                    if (this.lastLevelUnlocked < 7) return;
                    this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_8, this.levelSelected = 7, this.updateSelectedLevel(), this.updateButtonOn(); break;
                case t.ITEM_LEVEL_SELECT.LEVEL_4:
                    if (this.lastLevelUnlocked < 8) return;
                    this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_9, this.levelSelected = 8, this.updateSelectedLevel(), this.updateButtonOn(); break;
                case t.ITEM_LEVEL_SELECT.LEVEL_5:
                    if (this.lastLevelUnlocked < 9) return;
                    this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_10, this.levelSelected = 9, this.updateSelectedLevel(), this.updateButtonOn(); break;
                case t.ITEM_LEVEL_SELECT.AUDIO:
                    this.currentItem = this.checkMovementDown(this.currentItem), this.updateSelectedLevel(), this.updateButtonOn(); break;
                case t.ITEM_LEVEL_SELECT.BACK:
                    this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_1, this.levelSelected = 0, this.updateSelectedLevel(), this.updateButtonOn() } }, i.prototype.moveMenuLeft = function() { if (!this.uiFinalMessage.visible) switch (this.currentItem) {
                case t.ITEM_LEVEL_SELECT.LEVEL_1:
                    this.currentItem = t.ITEM_LEVEL_SELECT.BACK, this.updateButtonOn(); break;
                case t.ITEM_LEVEL_SELECT.LEVEL_2:
                    this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_1, this.levelSelected = 0, this.updateSelectedLevel(), this.updateButtonOn(); break;
                case t.ITEM_LEVEL_SELECT.LEVEL_3:
                    this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_2, this.levelSelected = 1, this.updateSelectedLevel(), this.updateButtonOn(); break;
                case t.ITEM_LEVEL_SELECT.LEVEL_4:
                    this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_3, this.levelSelected = 2, this.updateSelectedLevel(), this.updateButtonOn(); break;
                case t.ITEM_LEVEL_SELECT.LEVEL_5:
                    this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_4, this.levelSelected = 3, this.updateSelectedLevel(), this.updateButtonOn(); break;
                case t.ITEM_LEVEL_SELECT.LEVEL_7:
                    this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_6, this.levelSelected = 5, this.updateSelectedLevel(), this.updateButtonOn(); break;
                case t.ITEM_LEVEL_SELECT.LEVEL_8:
                    this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_7, this.levelSelected = 6, this.updateSelectedLevel(), this.updateButtonOn(); break;
                case t.ITEM_LEVEL_SELECT.LEVEL_9:
                    this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_8, this.levelSelected = 7, this.updateSelectedLevel(), this.updateButtonOn(); break;
                case t.ITEM_LEVEL_SELECT.LEVEL_10:
                    this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_9, this.levelSelected = 8, this.updateSelectedLevel(), this.updateButtonOn(); break;
                case t.ITEM_LEVEL_SELECT.AUDIO:
                    this.currentItem = t.ITEM_LEVEL_SELECT.BACK, this.updateButtonOn() } }, i.prototype.moveMenuRight = function() { if (!this.uiFinalMessage.visible) switch (this.currentItem) {
                case t.ITEM_LEVEL_SELECT.LEVEL_1:
                    if (this.lastLevelUnlocked < 1) return;
                    this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_2, this.levelSelected = 1, this.updateSelectedLevel(), this.updateButtonOn(); break;
                case t.ITEM_LEVEL_SELECT.LEVEL_2:
                    if (this.lastLevelUnlocked < 2) return;
                    this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_3, this.levelSelected = 2, this.updateSelectedLevel(), this.updateButtonOn(); break;
                case t.ITEM_LEVEL_SELECT.LEVEL_3:
                    if (this.lastLevelUnlocked < 3) return;
                    this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_4, this.levelSelected = 3, this.updateSelectedLevel(), this.updateButtonOn(); break;
                case t.ITEM_LEVEL_SELECT.LEVEL_4:
                    if (this.lastLevelUnlocked < 4) return;
                    this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_5, this.levelSelected = 4, this.updateSelectedLevel(), this.updateButtonOn(); break;
                case t.ITEM_LEVEL_SELECT.LEVEL_5:
                    this.currentItem = t.ITEM_LEVEL_SELECT.AUDIO, this.updateButtonOn(); break;
                case t.ITEM_LEVEL_SELECT.LEVEL_6:
                    if (this.lastLevelUnlocked < 6) return;
                    this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_7, this.levelSelected = 6, this.updateSelectedLevel(), this.updateButtonOn(); break;
                case t.ITEM_LEVEL_SELECT.LEVEL_7:
                    if (this.lastLevelUnlocked < 7) return;
                    this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_8, this.levelSelected = 7, this.updateSelectedLevel(), this.updateButtonOn(); break;
                case t.ITEM_LEVEL_SELECT.LEVEL_8:
                    if (this.lastLevelUnlocked < 8) return;
                    this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_9, this.levelSelected = 8, this.updateSelectedLevel(), this.updateButtonOn(); break;
                case t.ITEM_LEVEL_SELECT.LEVEL_9:
                    if (this.lastLevelUnlocked < 9) return;
                    this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_10, this.levelSelected = 9, this.updateSelectedLevel(), this.updateButtonOn(); break;
                case t.ITEM_LEVEL_SELECT.BACK:
                    this.currentItem = t.ITEM_LEVEL_SELECT.AUDIO, this.updateButtonOn() } }, i.prototype.updateButtonOn = function() { switch (this.animationLevelStand.visible = !1, this.highlightLevel.visible = !1, this.highlightButton.visible = !1, this.highlightButton.scale.set(1, 1), this.currentItem) {
                case t.ITEM_LEVEL_SELECT.BACK:
                    this.highlightButton.scale.set(1.25, 1.25), this.highlightButton.x = this.buttonBack.x, this.highlightButton.y = this.buttonBack.y, this.highlightButton.visible = !0; break;
                case t.ITEM_LEVEL_SELECT.AUDIO:
                    this.highlightButton.x = this.buttonAudio.x, this.highlightButton.y = this.buttonAudio.y, this.highlightButton.visible = !0; break;
                case t.ITEM_LEVEL_SELECT.LEVEL_1:
                    this.buttonLevel1.addChild(this.highlightLevel), this.highlightLevel.visible = !0, this.animationLevelStand.visible = !0; break;
                case t.ITEM_LEVEL_SELECT.LEVEL_2:
                    this.buttonLevel2.addChild(this.highlightLevel), this.highlightLevel.visible = !0, this.animationLevelStand.visible = !0; break;
                case t.ITEM_LEVEL_SELECT.LEVEL_3:
                    this.buttonLevel3.addChild(this.highlightLevel), this.highlightLevel.visible = !0, this.animationLevelStand.visible = !0; break;
                case t.ITEM_LEVEL_SELECT.LEVEL_4:
                    this.buttonLevel4.addChild(this.highlightLevel), this.highlightLevel.visible = !0, this.animationLevelStand.visible = !0; break;
                case t.ITEM_LEVEL_SELECT.LEVEL_5:
                    this.buttonLevel5.addChild(this.highlightLevel), this.highlightLevel.visible = !0, this.animationLevelStand.visible = !0; break;
                case t.ITEM_LEVEL_SELECT.LEVEL_6:
                    this.buttonLevel6.addChild(this.highlightLevel), this.highlightLevel.visible = !0, this.animationLevelStand.visible = !0; break;
                case t.ITEM_LEVEL_SELECT.LEVEL_7:
                    this.buttonLevel7.addChild(this.highlightLevel), this.highlightLevel.visible = !0, this.animationLevelStand.visible = !0; break;
                case t.ITEM_LEVEL_SELECT.LEVEL_8:
                    this.buttonLevel8.addChild(this.highlightLevel), this.highlightLevel.visible = !0, this.animationLevelStand.visible = !0; break;
                case t.ITEM_LEVEL_SELECT.LEVEL_9:
                    this.buttonLevel9.addChild(this.highlightLevel), this.highlightLevel.visible = !0, this.animationLevelStand.visible = !0; break;
                case t.ITEM_LEVEL_SELECT.LEVEL_10:
                    this.buttonLevel10.addChild(this.highlightLevel), this.highlightLevel.visible = !0, this.animationLevelStand.visible = !0 } }, i.prototype.updateSelectedLevel = function() { var t; switch (this.levelSelected) {
                case 0:
                    t = this.buttonLevel1; break;
                case 1:
                    t = this.buttonLevel2; break;
                case 2:
                    t = this.buttonLevel3; break;
                case 3:
                    t = this.buttonLevel4; break;
                case 4:
                    t = this.buttonLevel5; break;
                case 5:
                    t = this.buttonLevel6; break;
                case 6:
                    t = this.buttonLevel7; break;
                case 7:
                    t = this.buttonLevel8; break;
                case 8:
                    t = this.buttonLevel9; break;
                case 9:
                    t = this.buttonLevel10; break;
                default:
                    t = this.buttonLevel1 } this.animationLevelStand.x = t.x, this.animationLevelStand.y = t.y, this.animationLevelStand.visible = !0, this.animationLevelStand.ph2Animations.play("stage_stand_anim", 1, !0), this.highlightLevel.visible = !0, t.addChild(this.highlightLevel) }, i.prototype.onButtonLevelOver = function(e) { switch (e.name) {
                case "stage1":
                    this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_1, this.levelSelected = 0; break;
                case "stage2":
                    this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_2, this.levelSelected = 1; break;
                case "stage3":
                    this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_3, this.levelSelected = 2; break;
                case "stage4":
                    this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_4, this.levelSelected = 3; break;
                case "stage5":
                    this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_5, this.levelSelected = 4; break;
                case "stage6":
                    this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_6, this.levelSelected = 5; break;
                case "stage7":
                    this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_7, this.levelSelected = 6; break;
                case "stage8":
                    this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_8, this.levelSelected = 7; break;
                case "stage9":
                    this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_9, this.levelSelected = 8; break;
                case "stage10":
                    this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_10, this.levelSelected = 9; break;
                default:
                    this.currentItem = t.ITEM_LEVEL_SELECT.LEVEL_1, this.levelSelected = 0 } this.animationLevelStand.x = e.x, this.animationLevelStand.y = e.y, this.animationLevelStand.visible = !0, this.animationLevelStand.ph2Animations.play("stage_stand_anim", 1, !0), this.highlightLevel.visible = !0, e.addChild(this.highlightLevel) }, i.prototype.actionKeyPressed = function() { if (this.uiFinalMessage.visible) this.closeFinalMessage();
            else switch (this.currentItem) {
                case t.ITEM_LEVEL_SELECT.BACK:
                    this.goToMainMenu(); break;
                case t.ITEM_LEVEL_SELECT.AUDIO:
                    this.switchAudio(); break;
                case t.ITEM_LEVEL_SELECT.LEVEL_1:
                case t.ITEM_LEVEL_SELECT.LEVEL_3:
                case t.ITEM_LEVEL_SELECT.LEVEL_4:
                case t.ITEM_LEVEL_SELECT.LEVEL_5:
                case t.ITEM_LEVEL_SELECT.LEVEL_2:
                case t.ITEM_LEVEL_SELECT.LEVEL_6:
                case t.ITEM_LEVEL_SELECT.LEVEL_7:
                case t.ITEM_LEVEL_SELECT.LEVEL_8:
                case t.ITEM_LEVEL_SELECT.LEVEL_9:
                case t.ITEM_LEVEL_SELECT.LEVEL_10:
                    this.showAnimationSelected() } }, i.prototype.showAnimationSelected = function() { var t; switch (this.disableButtons(), this.levelSelected) {
                case 0:
                    t = "stage1/stage_select_pivot"; break;
                case 1:
                    t = "stage2/stage_select_pivot"; break;
                case 2:
                    t = "stage3/stage_select_pivot"; break;
                case 3:
                    t = "stage4/stage_select_pivot"; break;
                case 4:
                    t = "stage5/stage_select_pivot"; break;
                case 5:
                    t = "stage6/stage_select_pivot"; break;
                case 6:
                    t = "stage7/stage_select_pivot"; break;
                case 7:
                    t = "stage8/stage_select_pivot"; break;
                case 8:
                    t = "stage9/stage_select_pivot"; break;
                case 9:
                    t = "stage10/stage_select_pivot" } Ph2.UISystem.findObject(t, this.uiLevelSelect).addChild(this.animationLevelSelect), this.animationLevelSelect.visible = !0, this.animationLevelSelect.ph2Animations.play("stage_select_anim", 1, !1).onComplete.add(this.goToGameplay, this), this.game.ph2AudioManager.playEffect("generic_button", !1) }, i.prototype.disableLevelButtons = function(e) { var i, n, s, o = this; for (s = t.Instances.DataManager.getLastLevelUnlocked(), i = 0; i < this.buttons.length; i++) i < s && (this.buttons[i].frameName = "level_2.png"), i === s && (n = i, this.buttons[i].frameName = "level_0.png", this.buttons[i].addChild(this.highlightLevel), this.buttons[i].addChild(this.animationLevelUnlocked), this.showingFinalMessage ? this.buttons[n].frameName = "level_1.png" : e || (this.animationLevelUnlocked.visible = !0, this.animationLevelUnlocked.ph2Animations.play("stage_anim", 1, !1).onComplete.add(function() { o.animationLevelUnlocked.visible = !1, o.buttons[n].frameName = "level_1.png" }, this)), this.animationLevelStand.x = this.buttons[i].x, this.animationLevelStand.y = this.buttons[i].y, this.animationLevelStand.visible = !0, this.animationLevelStand.ph2Animations.play("stage_stand_anim", 1, !0), e || this.game.ph2AudioManager.playEffect("level_unlocked", !1)), i > s && (this.buttons[i].frameName = "level_0.png", this.buttons[i].inputEnabled = !1) }, i.prototype.goToMainMenu = function() { var e = this;
            this.disableButtons(), this.game.ph2AudioManager.playEffect("generic_button", !1), t.Instances.Transition.playIn(), t.Instances.Transition.onCompletedIn.addOnce(function() { t.Instances.Transition.playStand(), e.game.state.start("gameSelect") }, this) }, i.prototype.goToGameplay = function() { var e = this;
            this.disableButtons(), t.Instances.Transition.playIn(), t.Instances.Transition.onCompletedIn.addOnce(function() { t.Instances.Transition.playStand(), e.game.state.start("statemachinegameplayState", !0, !1, e.levelSelected) }, this) }, i.prototype.resize = function() { this.isDesktop || (this.overlayFinalMessage.width = this.game.width, this.overlayFinalMessage.height = this.game.height, this.bgLevelSelect.width = this.game.width, this.bgLevelSelect.height = this.game.height, this.updateSelectedLevel(), this.updateButtonOn()) }, i }(Phaser.State);
    t.LevelSelectState = e }(GameStateMachine || (GameStateMachine = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameStateMachine;
! function(t) { var e = function(e) {
        function i() { return e.call(this) || this } return __extends(i, e), i.prototype.init = function() { this.game.load.onFileComplete.removeAll(); var t = this.game.cache.getJSON("resources_statemachine"),
                e = this.game.cache.spine; for (var i in e) e.hasOwnProperty(i) && "transition" !== i && "ben" !== i && (this.game.cache.checkJSONKey(i) && this.game.cache.removeJSON(i), this.game.cache.checkTextKey(i + "Atlas") && this.game.cache.removeText(i + "Atlas"), "2" === i[i.length - 1] ? this.game.cache.checkImageKey(i.slice(0, i.length - 1) + ".png") && this.game.cache.removeImage(i.slice(0, i.length - 1) + ".png", !0) : this.game.cache.checkImageKey(i + ".png") && this.game.cache.removeImage(i + ".png", !0), delete this.game.cache.spine[i]);
            this.game.ph2Loader.debug(!0), this.game.ph2Loader.setAssetsResources(t), this.resize() }, i.prototype.preload = function() { this.checkBalanceData(), this.game.ph2Loader.load("firstLoad"), t.Instances.Transition = Game.Instances.transitionAnim, t.Instances.Transition.updatePercent(0), t.Instances.Transition.showLoading(), this.game.load.onFileComplete.add(t.Instances.Transition.updatePercent, t.Instances.Transition), this.group = new Phaser.Group(this.game), this.game.stage.backgroundColor = "#030303", this.game.ph2AnimationManager.cache.animationData = {}, this.game.load.onFileStart.add(this.onFileStart, this), this.loadAudio() }, i.prototype.onFileStart = function(t, e, i) { this.game.cache.checkJSONKey(e) && -1 !== i.indexOf(".json") && this.game.cache.removeJSON(e), this.game.cache.checkImageKey(e) && -1 !== i.indexOf(".png") && this.game.cache.removeImage(e) }, i.prototype.loadAudio = function() { var e = new Howl({ src: ["state-machine/assets/audios/gp1.ogg?v=" + Game.Constants.GAME_VERSION, "state-machine/assets/audios/gp1.mp3?v=" + Game.Constants.GAME_VERSION], preload: !0, loop: !0 }),
                i = new Howl({ src: ["state-machine/assets/audios/gp2.ogg?v=" + Game.Constants.GAME_VERSION, "state-machine/assets/audios/gp2.mp3?v=" + Game.Constants.GAME_VERSION], preload: !0, loop: !0 }),
                n = new Howl({ src: ["state-machine/assets/audios/gp3.ogg?v=" + Game.Constants.GAME_VERSION, "state-machine/assets/audios/gp3.mp3?v=" + Game.Constants.GAME_VERSION], preload: !0, loop: !0 }),
                s = new Howl({ src: ["state-machine/assets/audios/menu.ogg?v=" + Game.Constants.GAME_VERSION, "state-machine/assets/audios/menu.mp3?v=" + Game.Constants.GAME_VERSION], preload: !0, loop: !0 }),
                o = new Howl({ src: ["state-machine/assets/audios/audiosprite.ogg?v=" + Game.Constants.GAME_VERSION, "state-machine/assets/audios/audiosprite.mp3?v=" + Game.Constants.GAME_VERSION, "state-machine/assets/audios/audiosprite.m4a?v=" + Game.Constants.GAME_VERSION], preload: !0, sprite: { collect_item: [0, 966.530612244898], cool_down: [2e3, 1436.7346938775509], damage: [5e3, 626.9387755102046], destroy_enemy_v1: [7e3, 914.2857142857146], destroy_enemy_v2: [9e3, 966.5306122448989], destroy_enemy_v3: [11e3, 940.4081632653067], enemy_block_v1: [13e3, 522.448979591836], enemy_block_v2: [15e3, 522.448979591836], enemy_block_v3: [17e3, 522.448979591836], generic_button: [19e3, 365.7142857142866], item_appears: [21e3, 287.3469387755101], item_disappears: [23e3, 522.448979591836], level_failed: [25e3, 1018.7755102040832], level_unlocked: [28e3, 1828.5714285714291], play_button: [31e3, 600.8163265306123], popup: [33e3, 574.6938775510203], power_1: [35e3, 5564.081632653064, !0], power_2_v1: [42e3, 653.0612244897966], power_2_v2: [44e3, 757.5510204081652], power_3_v1: [46e3, 705.3061224489809], power_3_v2: [48e3, 679.1836734693889], power_4_v1: [5e4, 653.0612244897966], power_4_v2: [52e3, 757.5510204081652], power_down: [54e3, 653.0612244897966], powerup_active: [56e3, 12068.571428571431, !0], powerup_available: [7e4, 1018.7755102040796], score_count_v1: [73e3, 574.6938775510273], score_count_v2: [75e3, 574.6938775510273], score_count_v3: [77e3, 574.6938775510273], score_count_v4: [79e3, 574.6938775510273], slide_story_v1: [81e3, 653.0612244897895], slide_story_v2: [83e3, 862.0408163265267], stage_completed: [85e3, 4466.938775510201], transformation_1: [91e3, 1018.7755102040796], transformation_2: [94e3, 888.1632653061189], transition: [96e3, 1541.2244897959226] } });
            this.game.ph2AudioManager.setAudioEffectsFile(o), t.Music.MainMenu = s, t.Music.Gameplay1 = e, t.Music.Gameplay2 = i, t.Music.Gameplay3 = n }, i.prototype.create = function() { t.Instances.LocalizationManager = new t.LocalizationManager(this.game, t.Instances.DataManager.getLanguage()), this.game.load.onFileComplete.remove(t.Instances.Transition.updatePercent, t.Instances.Transition), t.Instances.Transition.hideLoading(), this.game.state.start("statemachinemainMenuState", !0, !1, "preloaderState") }, i.prototype.checkBalanceData = function() { var e;
            e = this.game.cache.getJSON("balance_statemachine"); for (var i in e)
                if (e.hasOwnProperty(i) && "undefined" !== t[i])
                    for (var n in e[i]) e[i].hasOwnProperty(n) && "undefined" !== t[i][n] && (t[i][n] = e[i][n]) }, i }(Phaser.State);
    t.PreloaderState = e }(GameStateMachine || (GameStateMachine = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameStateMachine;
! function(t) { var e = function(t) {
        function e(e, i, n) { var s = t.call(this) || this; return s.game = e, s.targets = n, s.distanceToCollision = i, s.canCheckCollision = !1, s.paused = !0, s } return __extends(e, t), e.prototype.start = function() { this.paused = !1, this.canCheckCollision = !0 }, e.prototype.update = function() { var t, e; if (!this.paused && this.canCheckCollision)
                for (t = this.targets.length - 1; t >= 0; t--)(e = this.targets[t]).visible && Phaser.Math.distance(e.x, e.y, this.gameObject.x, this.gameObject.y) <= this.distanceToCollision && (this.canCheckCollision = !1, this.gameObject.onCollision(e)) }, e.prototype.pauseComponent = function() { this.paused = !0 }, e.prototype.resumeComponent = function() { this.paused = !1 }, e.prototype.resetComponent = function() { this.canCheckCollision = !0 }, e.prototype.updateTargets = function(t, e) { var i, n; if (this.targets = [], this.targets = t, null !== e) { for (n = !1, i = 0; i < this.targets.length; i++) this.targets[i] === e && (n = !0);
                n || this.targets.push(e) } }, e }(Ph2.Component);
    t.ComponentCollision = e }(GameStateMachine || (GameStateMachine = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameStateMachine;
! function(t) { var e = function(t) {
        function e(e, i, n, s) { var o = t.call(this) || this; return o.game = e, o.paused = !0, o.increasing = !0, o.increaseValue = i / 16.6, o.decreaseValue = s / 16.6, o.totalValue = n, o.counter = 0, o.percentageCompleted = 0, o.previousInteger = 0, o.currentInteger = 0, o.currentSound = 1, o } return __extends(e, t), e.prototype.start = function() { this.paused = !0 }, e.prototype.update = function() { this.paused || this.percentageCompleted >= 100 || (this.increasing ? (this.counter += this.increaseValue * this.game.time.elapsedMS, this.percentageCompleted = 100 * this.counter / this.totalValue, this.currentInteger = Math.floor(this.percentageCompleted), this.currentInteger !== this.previousInteger && (this.previousInteger = this.currentInteger, this.game.ph2AudioManager.playEffect("score_count_v" + this.currentSound, !1), ++this.currentSound >= 5 && (this.currentSound = 1)), this.percentageCompleted >= 100 && this.endHacking()) : this.counter > 0 && (this.counter -= this.decreaseValue * this.game.time.elapsedMS, this.percentageCompleted = 100 * this.counter / this.totalValue, this.counter <= 0 && (this.counter = 0, this.pauseComponent()))) }, e.prototype.pauseComponent = function() { this.paused || (this.paused = !0) }, e.prototype.resumeComponent = function() { this.paused && (this.paused = !1) }, e.prototype.endHacking = function() { this.gameObject.onHackingComplete() }, e.prototype.changeIncreaseValue = function(t) { this.increaseValue = t / 16.6 }, e.prototype.changeDecreaseValue = function(t) { this.decreaseValue = t / 16.6 }, e }(Ph2.Component);
    t.ComponentHacking = e }(GameStateMachine || (GameStateMachine = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameStateMachine;
! function(t) { var e = function(t) {
        function e(e, i, n) { var s = t.call(this, null, !1) || this; return s.percent = 100, s.sprite = new Phaser.Sprite(e, 0, 0, i, n), s.totalHeight = s.sprite.height, s.totalWidth = s.sprite.width, s.rect = new Phaser.Rectangle(0, 0, s.percent / 100 * s.totalWidth, s.totalHeight), s.sprite.crop(s.rect, !0), s } return __extends(e, t), e.prototype.setAnchor = function(t, e) { this.sprite.anchor.set(t, e), this.sprite.pivot.x = this.totalWidth * this.sprite.anchor.x, this.sprite.pivot.y = this.totalHeight * this.sprite.anchor.y }, e.prototype.setPercent = function(t) { if (t !== this.percent) { if (t < 0 ? t = 0 : t > 100 && (t = 100), this.percent = t, this.totalHeight <= 0) return;
                this.rect.width = Math.max(0, this.percent / 100 * this.totalWidth), this.sprite.crop(this.rect, !0) } }, e.prototype.destroy = function() { this.sprite.destroy(), this.sprite = null, this.rect = null, t.prototype.destroy.call(this) }, e.prototype.hideLoadingBar = function() { this.sprite.visible = !1 }, e }(Ph2.Component);
    t.ComponentLoadingBar = e }(GameStateMachine || (GameStateMachine = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameStateMachine;
! function(t) { var e = function(e) {
        function i(i, n) { var s = e.call(this, null, !1) || this;
            s.game = i, s.group = n, s.componentMgr = Ph2.ComponentPlugin.initComponents(s), s.loadingBar = new t.ComponentLoadingBar(s.game, "load_cn", "loading1.png"), s.componentMgr.addComponent(s.loadingBar); var o = new Phaser.Point(s.game.width / 2, s.game.height / 2); return s.logo = new Phaser.Sprite(s.game, o.x, o.y - 55, "fg_logo"), s.logo.anchor.set(.5, .5), s.loadingBg = new Phaser.Sprite(s.game, o.x, o.y + 150, "load_cn", "loading0.png"), s.loadingBg.anchor.set(.5, .5), s.loadingBar.sprite.x = o.x - s.loadingBg.width / 2, s.loadingBar.sprite.y = o.y + 98 + 75, s.loadingBar.setAnchor(0, .5), s.group.add(s.logo), s.group.add(s.loadingBg), s.group.add(s.loadingBar.sprite), s } return __extends(i, e), i.prototype.setPercent = function(t) { this.loadingBar.setPercent(t) }, i.prototype.destroy = function() { this.group.remove(this.logo), this.group.remove(this.loadingBg), this.group.remove(this.loadingBar.sprite), this.group = null, this.logo.destroy(), this.logo = null, this.loadingBg.destroy(), this.loadingBg = null, this.componentMgr.removeComponent(this.loadingBar), this.componentMgr = null, e.prototype.destroy.call(this) }, i.prototype.resize = function() { var t = new Phaser.Point(this.game.width / 2, this.game.height / 2);
            this.logo.x = t.x, this.logo.y = t.y - 55, this.loadingBg.x = t.x, this.loadingBg.y = t.y + 150, this.loadingBar.sprite.x = t.x - this.loadingBg.width / 2, this.loadingBar.sprite.y = t.y + 98 + 75 }, i.prototype.hideLoadingBar = function() { this.loadingBg.visible = !1, this.loadingBar.hideLoadingBar() }, i }(Ph2.Component);
    t.ComponentLoadingCN = e }(GameStateMachine || (GameStateMachine = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameStateMachine;
! function(t) { var e;! function(t) { t[t.UP = 0] = "UP", t[t.DOWN = 1] = "DOWN", t[t.LEFT = 2] = "LEFT", t[t.RIGHT = 3] = "RIGHT" }(e = t.DIRECTION || (t.DIRECTION = {})); var i = function(t) {
        function i(e, i, n) { var s = t.call(this) || this; return s.game = e, s.speed = i / 16.6, s.direction = n, s.paused = !0, s } return __extends(i, t), i.prototype.start = function() { this.paused = !1 }, i.prototype.update = function() { this.paused || (this.direction === e.UP && (this.gameObject.y -= this.speed * this.game.time.elapsedMS), this.direction === e.DOWN && (this.gameObject.y += this.speed * this.game.time.elapsedMS), this.direction === e.LEFT && (this.gameObject.x -= this.speed * this.game.time.elapsedMS), this.direction === e.RIGHT && (this.gameObject.x += this.speed * this.game.time.elapsedMS)) }, i.prototype.pauseMovement = function() { this.paused = !0 }, i.prototype.resumeMovement = function() { this.paused && (this.paused = !1) }, i.prototype.changeSpeed = function(t) { this.speed = t / 16.6 }, i }(Ph2.Component);
    t.ComponentMovement = i }(GameStateMachine || (GameStateMachine = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameStateMachine;
! function(t) { var e = function(t) {
        function e(e, i, n, s) { var o = t.call(this) || this; return o.game = e, o.timer = 0, o.timeLimit = i, o.signalName = n, o.paused = !0, o.autoStart = s, o } return __extends(e, t), e.prototype.start = function() { this.autoStart && (this.paused = !1) }, e.prototype.update = function() {!this.paused && this.gameObject.visible && (this.timer += this.game.time.elapsedMS, this.timer >= this.timeLimit && this.onTimerEnd()) }, e.prototype.getCurrentTime = function() { return this.timer }, e.prototype.pauseTimer = function() { this.paused || (this.paused = !0) }, e.prototype.resumeTimer = function() { this.paused && (this.paused = !1) }, e.prototype.resetTimer = function() { this.timer = 0 }, e.prototype.changeTimeLimit = function(t) { this.timeLimit = t }, e.prototype.onTimerEnd = function() { this.resetTimer(), this.game.ph2NotificationManager.postNotification(this.signalName) }, e }(Ph2.Component);
    t.ComponentTimer = e }(GameStateMachine || (GameStateMachine = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameStateMachine;
! function(t) { var e = function(t) {
        function e(e, i, n) { var s = t.call(this) || this; return s.game = e, s.level = i, s.levelData = n, s.paused = !1, s.wavesData = s.game.cache.getJSON("waves_data").waves, s.wavesSelected = s.levelData.waves, s.waveCounter = 0, s.waveIndex = s.wavesSelected[s.waveCounter], s.bugCounter = 0, s.timer = 0, s.nextBugOrder(), s } return __extends(e, t), e.prototype.start = function() { this.paused = !1 }, e.prototype.nextBugOrder = function() { this.bugOrder = this.wavesData[this.waveIndex].bugs_order, this.bugTimeBetween = this.wavesData[this.waveIndex].time_between_bugs, this.timeToCreateBug = this.bugTimeBetween[this.bugCounter] }, e.prototype.onTimeReached = function() { this.timer = 0, this.gameObject.createBug(this.bugOrder[this.bugCounter]), ++this.bugCounter >= this.bugOrder.length ? (this.bugCounter = 0, ++this.waveCounter >= this.wavesSelected.length ? (this.waveCounter = 0, this.waveIndex = this.wavesSelected[this.waveCounter], this.nextBugOrder()) : (this.waveIndex = this.wavesSelected[this.waveCounter], this.nextBugOrder())) : this.timeToCreateBug = this.bugTimeBetween[this.bugCounter] }, e.prototype.update = function() { this.paused || (this.timer += this.game.time.elapsedMS, this.timer >= this.timeToCreateBug && this.onTimeReached()) }, e.prototype.pauseTimer = function() { this.paused || (this.paused = !0) }, e.prototype.resumeTimer = function() { this.paused && (this.paused = !1) }, e }(Ph2.Component);
    t.ComponentWaveCreator = e }(GameStateMachine || (GameStateMachine = {}));
var GameStateMachine;
! function(t) { var e = function() {
        function t() {} return t.GAME_SCALE = 1, t.CALCULATED_WIDTH = 960, t.CALCULATED_HEIGHT = 640, t.CURRENT_ORIENTATION = "landscape", t.GAME_WIDTH = 960, t.GAME_HEIGHT = 640, t.GAME_RATIO = 1, t.LANDSCAPE_LOCKED = !0, t.PORTRAIT_LOCKED = !1, t.MIN_FONT_SIZE_DEFAULT = 10, t.CHEATS_ENABLED = !1, t.HEIGHT_HACKING = 160, t.HACKING_BAR_MAX_POSITION = 153.4, t.AUTO_FULLSCREEN_ENABLED = !0, t.IOS_BUTTON_PATCH = !1, t.RENDER_DEBUG = !1, t.GAME_KEY = "", t.SECRET_KEY = "", t.GOOGLE_ID = "", t.GOOGLE_APP_NAME = "", t }();
    t.Constants = e }(GameStateMachine || (GameStateMachine = {}));
var GameStateMachine;
! function(t) { var e = function() {
        function t() {} return t.DataManager = null, t.LocalizationManager = null, t.Transition = null, t.IncorrectOrientation = !1, t }();
    t.Instances = e; var i = function() {
        function t() {} return t.MainMenu = null, t.Gameplay1 = null, t.Gameplay2 = null, t.Gameplay3 = null, t }();
    t.Music = i }(GameStateMachine || (GameStateMachine = {}));
var GameStateMachine;
! function(t) { var e = function() {
        function t() {} return t.BUG_DAMAGE = 0, t.HACK_POSITION = [], t.ATTACK_POSITION = [], t.BUG_INITIAL_POSITION = [], t.BOSS_INITIAL_POSITION = [], t.POWER_FILL_SPEED = 0, t.POWER_UP_DAMAGE = 0, t.POWER_UP_RATE = 0, t.POWER_UP_PROJECTILE_SPEED = 0, t.POWER_UP_DURATION = 0, t.POWER_UP_CHARGE_PER_ORB = 0, t.POWER_UP_CHARGE_NEEDED = 0, t.TIME_TO_START_COOLING = 0, t.BOSS_SPEED = 0, t.BOSS_SLOW_SPEED = 0, t.BOSS_SLOW_TIME = 0, t.BOSS_DAMAGE_TO_BE_PUSHED = 0, t.BOSS_OFF_SCREEN_TIME = 0, t.BOSS_CHANGE_COLOR_TIME = 0, t.BOSS_ATTACK_DISTANCE = 0, t.BOSS_ATTACK_PHASE_1 = 0, t.BOSS_ATTACK_PHASE_2 = 0, t.BOSS_ATTACK_PHASE_3 = 0, t.BOSS_COLOR_FEEDBACK = 0, t }();
    t.SETTINGS = e;! function(t) { t[t.LANDSCAPE = 0] = "LANDSCAPE", t[t.PORTRAIT = 1] = "PORTRAIT" }(t.SCREEN_ORIENTATION || (t.SCREEN_ORIENTATION = {}));! function(t) { t[t.GREY_MATTER = 0] = "GREY_MATTER", t[t.HEAT_BLAST = 1] = "HEAT_BLAST", t[t.DIAMOND_HEAD = 2] = "DIAMOND_HEAD", t[t.WILD_VINE = 3] = "WILD_VINE" }(t.ALIEN || (t.ALIEN = {}));! function(t) { t[t.WIN = 0] = "WIN", t[t.LOSE = 1] = "LOSE" }(t.GAME_END || (t.GAME_END = {}));! function(t) { t[t.NORMAL = 0] = "NORMAL", t[t.RED = 1] = "RED", t[t.BLUE = 2] = "BLUE", t[t.GREEN = 3] = "GREEN" }(t.COLOR || (t.COLOR = {}));! function(t) { t[t.PLAY = 0] = "PLAY", t[t.AUDIO = 1] = "AUDIO" }(t.ITEM_MENU || (t.ITEM_MENU = {}));! function(t) { t[t.BACK = 0] = "BACK", t[t.AUDIO = 1] = "AUDIO", t[t.LEVEL_1 = 2] = "LEVEL_1", t[t.LEVEL_2 = 3] = "LEVEL_2", t[t.LEVEL_3 = 4] = "LEVEL_3", t[t.LEVEL_4 = 5] = "LEVEL_4", t[t.LEVEL_5 = 6] = "LEVEL_5", t[t.LEVEL_6 = 7] = "LEVEL_6", t[t.LEVEL_7 = 8] = "LEVEL_7", t[t.LEVEL_8 = 9] = "LEVEL_8", t[t.LEVEL_9 = 10] = "LEVEL_9", t[t.LEVEL_10 = 11] = "LEVEL_10" }(t.ITEM_LEVEL_SELECT || (t.ITEM_LEVEL_SELECT = {}));! function(t) { t[t.HOME = 0] = "HOME", t[t.AUDIO = 1] = "AUDIO", t[t.RESTART = 2] = "RESTART", t[t.RESUME = 3] = "RESUME", t[t.TUTORIAL = 4] = "TUTORIAL", t[t.YES = 5] = "YES", t[t.NO = 6] = "NO", t[t.BACK_TUTORIAL = 7] = "BACK_TUTORIAL", t[t.AUDIO_TUTORIAL = 8] = "AUDIO_TUTORIAL", t[t.AUDIO_LEVEL_COMPLETE = 9] = "AUDIO_LEVEL_COMPLETE", t[t.RESTART_LEVEL_COMPLETE = 10] = "RESTART_LEVEL_COMPLETE", t[t.NEXT_LEVEL = 11] = "NEXT_LEVEL" }(t.ITEM_GAMEPLAY || (t.ITEM_GAMEPLAY = {}));! function(t) { t[t.PHASE_1 = 0] = "PHASE_1", t[t.PHASE_2 = 1] = "PHASE_2", t[t.PHASE_3 = 2] = "PHASE_3" }(t.BOSS_ATTACK || (t.BOSS_ATTACK = {})) }(GameStateMachine || (GameStateMachine = {}));
var GameStateMachine;
! function(t) { var e = function() {
        function t(t) { this.game = t, this.version = Game.Constants.GAME_VERSION, this.key = "ben10-collection-state-machine" + language, this.loadData() } return t.prototype.loadData = function() { var t = this.game.storage.getItem(this.key);
            this.gameData = JSON.parse(t), null !== t && this.gameData.version === this.version || this.initData() }, t.prototype.saveData = function() { this.game.storage.setItem(this.key, JSON.stringify(this.gameData)) }, t.prototype.initData = function() { var t;
            t = { version: this.version, created: !0, language: "en-US", music: !0, audio: !0, lastLevelUnlocked: 0, tutorialPowerUp: !1, tutorialOverheat: !1, tutorialReload: !1, seeComicIntro: !1, seeComicEnd: !1 }, this.gameData = t, this.saveData() }, t.prototype.saveLanguage = function(t) { this.gameData.language = t, this.saveData() }, t.prototype.saveAudio = function(t) { Game.Instances.dataManager.setAudio(t), this.saveData() }, t.prototype.saveMusic = function(t) { this.gameData.music = t, this.saveData() }, t.prototype.saveLastLevelUnlocked = function(t) { this.gameData.lastLevelUnlocked = t, this.saveData() }, t.prototype.saveTutorialPowerUp = function(t) { this.gameData.tutorialPowerUp = t, this.saveData() }, t.prototype.saveTutorialOverheated = function(t) { this.gameData.tutorialOverheat = t, this.saveData() }, t.prototype.saveTutorialReload = function(t) { this.gameData.tutorialReload = t, this.saveData() }, t.prototype.seeComicIntro = function() { this.gameData.seeComicIntro = !0, this.saveData() }, t.prototype.seeComicEnd = function() { this.gameData.seeComicEnd = !0, this.saveData() }, t.prototype.getLanguage = function() { return this.gameData.language }, t.prototype.getMusic = function() { return this.gameData.music }, t.prototype.getAudio = function() { return Game.Instances.dataManager.getAudio() }, t.prototype.getLastLevelUnlocked = function() { return this.gameData.lastLevelUnlocked }, t.prototype.getTutorialPowerUp = function() { return this.gameData.tutorialPowerUp }, t.prototype.getTutorialOverheated = function() { return this.gameData.tutorialOverheat }, t.prototype.getTutorialReload = function() { return this.gameData.tutorialReload }, t.prototype.getSeeComicIntro = function() { return this.gameData.seeComicIntro }, t.prototype.getSeeComicEnd = function() { return this.gameData.seeComicEnd }, t }();
    t.DataManager = e }(GameStateMachine || (GameStateMachine = {}));
var GameStateMachine;
! function(t) { var e = function() {
        function e(t, e) { this.game = t, this.language = e, this.jsonKey = "localization_statemachine", this.localizationData = this.game.cache.getJSON(this.jsonKey)[this.language], this.charInitArg = "[", this.charEndArg = "]" } return e.prototype.localizeText = function(t, i, n, s) { void 0 === s && (s = !1); var o, a; return o = Ph2.UISystem.findObject(t, i), a = n, s || (a = this.localizationData[n]), o.clearColors(), o.text = a, o = e.checkColorStyle(o) }, e.prototype.localizeTextImage = function(t, e, i, n) { var s, o, a; for ((o = new Phaser.Sprite(this.game, 0, 0, i, n)).anchor.set(.5), s = Ph2.UISystem.findObject(t, e), a = 0; a < s.children.length; a++) s.children[a].visible = !1;
            s.addChild(o) }, e.prototype.localizeAnimText = function(t, e, i, n) { void 0 === n && (n = !1); var s, o; return s = Ph2.AnimationSystem.findObject(t, e), o = i, n || (o = this.localizationData[i]), s.clearColors(), s.text = o, s }, e.prototype.getStringForKey = function(t) { for (var e = [], i = 1; i < arguments.length; i++) e[i - 1] = arguments[i]; for (var n = this.localizationData[t], s = n.indexOf(this.charInitArg) + 1, o = n.indexOf(this.charEndArg), a = 0, r = n.substring(s, o);
                "" !== r && a < e.length;) n = n.split(this.charInitArg + r + this.charEndArg).join(e[a]), a++, s = n.indexOf(this.charInitArg) + 1, o = n.indexOf(this.charEndArg), r = n.substring(s, o); return n }, e.prototype.addSpriteTo = function(t) { for (var e = [], i = 1; i < arguments.length; i++) e[i - 1] = arguments[i]; for (var n = this.localizationData[t], s = n.indexOf(this.charInitArg) + 1, o = n.indexOf(this.charEndArg), a = 0, r = n.substring(s, o);
                "" !== r && a < e.length;) n = n.split(this.charInitArg + r + this.charEndArg).join(e[a]), a++, s = n.indexOf(this.charInitArg) + 1, o = n.indexOf(this.charEndArg), r = n.substring(s, o); return n }, e.fitFontSizeUI = function(i, n, s, o, a, r) { void 0 === o && (o = -1), void 0 === a && (a = -1), void 0 === r && (r = t.Constants.MIN_FONT_SIZE_DEFAULT); var h;
            h = Ph2.UISystem.findObject(i, n), e.fitFontSizeText(h, s, o, a, r) }, e.fitFontSizeText = function(e, i, n, s, o) { void 0 === n && (n = -1), void 0 === s && (s = -1), void 0 === o && (o = t.Constants.MIN_FONT_SIZE_DEFAULT); var a, r, h, l; for (s > 0 && (e.fontSize = s), r = e.width, h = e.height, l = e.fontSize; r > i || h > n && -1 !== n;) { if ((a = parseInt(l.toString().replace("px", ""), 10) - 1) < o) { l = a = o, e.fontSize = l; break } l = a, e.fontSize = l, r = e.width, h = e.height } }, e.prototype.getLanguage = function() { return this.language }, e.checkColorStyle = function(t) { var e, i, n, s, o, a, r, h, l, c, u; for (0, o = (i = t.text).length, e = 0; e < o; e++)(n = i.indexOf("<s", 0)) < 0 ? e = o : (l = i.indexOf("|") + 1, c = i.indexOf(">"), u = parseFloat(i.substring(l, c)), a = i.slice(n + 3, n + 10), s = i.indexOf("s>", 1), r = i.substring(n, s + 2), h = i.substring(c + 1, s - 2), e = s + 1, i = i.replace(r, h), t.text = t.text.replace(r, h), t.strokeThickness = u, t.addStrokeColor(a, n), o = i.length); for (e = 0; e < o; e++)(n = i.indexOf("<c", 0)) < 0 ? e = o : (a = i.slice(n + 3, n + 10), s = i.indexOf("c>", 1), r = i.substring(n, s + 2), h = i.substring(n + 11, s - 2), e = s + 1, i = i.replace(r, h), t.text = t.text.replace(r, h), t.addColor(a, n), o = i.length); return t }, e }();
    t.LocalizationManager = e }(GameStateMachine || (GameStateMachine = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameStateMachine;
! function(t) { var e = function(e) {
        function i(t, i, n, s, o) { var a = e.call(this, t) || this; return a.x = i, a.y = n, a.alienType = s, null !== o ? (a.damage = o.damage, a.projectileSpeed = o.speed, a.attackRate = o.attack_rate, a.powerUpDamage = o.power_up_damage, a.powerUpAttackRate = o.power_up_attack_rate, a.powerUpProjectileSpeed = o.power_up_speed, a.heatPerShot = o.heat_per_shot, a.coolingSpeed = o.cooling_speed, a.timeBetweenAttacks = o.time_between_attacks, a.timeToSpam = o.time_to_spam) : (a.damage = 0, a.projectileSpeed = 0, a.attackRate = 0, a.powerUpDamage = 0, a.powerUpAttackRate = 0, a.powerUpProjectileSpeed = 0, a.heatPerShot = 0, a.coolingSpeed = 0), a.timerCooling = 0, a.lastAttack = "attack2", a.poweredUp = !1, a.canAttack = !0, a.isHacking = !1, a.isOverheated = !1, a.isCooling = !1, a.isAttacking = !1, a.canSpam = !1, a.totalHeat = 0, a.timerToSpam = 0, a.timerBetweenAttacks = 0, a.isHackingComplete = !1, a.createSpine(), a } return __extends(i, e), i.prototype.createSpine = function() { var e, i; switch (this.alienType) {
                case t.ALIEN.GREY_MATTER:
                    i = "grey_matter", e = !0, this.color = t.COLOR.NORMAL; break;
                case t.ALIEN.HEAT_BLAST:
                    i = "heatblast", e = !1, this.color = t.COLOR.RED; break;
                case t.ALIEN.DIAMOND_HEAD:
                    i = "diamondhead", e = !1, this.color = t.COLOR.BLUE; break;
                case t.ALIEN.WILD_VINE:
                    i = "wildvine", e = !1, this.color = t.COLOR.GREEN; break;
                default:
                    i = "grey_matter", e = !0 } this.spineAlien = this.game.add.spine(0, 0, i), this.alienType === t.ALIEN.GREY_MATTER ? this.spineAlien.setAnimationByName(0, "stand2", !0) : this.spineAlien.setAnimationByName(0, "stand", !0), this.spineAlien.setToSetupPose(), this.visible = e, this.add(this.spineAlien) }, i.prototype.startHacking = function() { this.isHackingComplete || this.isHacking || (this.spineAlien.setAnimationByName(0, "stand", !0), this.spineAlien.setToSetupPose(), this.isHacking = !0) }, i.prototype.stopHacking = function() { this.isHackingComplete || this.isHacking && (this.spineAlien.setAnimationByName(0, "stand2", !0), this.spineAlien.setToSetupPose(), this.isHacking = !1) }, i.prototype.attackAnimation = function() { var e, i, n, s, o; if (e = this, s = !1, this.isOverheated) { if (!(this.totalHeat <= 55 && this.totalHeat >= 45)) return;
                this.isOverheated = !1, this.totalHeat = 0, this.game.ph2AudioManager.playEffect("cool_down", !1) } if (this.visible && this.canAttack) { switch (this.alienType === t.ALIEN.WILD_VINE ? "attack2" === this.lastAttack ? (n = "stand_to_attack", this.lastAttack = "stand_to_attack") : (s = !0, n = "attack2", this.lastAttack = "attack2") : n = this.canSpam ? "attack" : "stand_to_attack", i = this.spineAlien.setAnimationByName(0, n, !1), this.spineAlien.setToSetupPose(), s ? (this.canSpam ? this.launchProjectile() : i.onEvent = function() { e.launchProjectile() }, i.onComplete = function() { e.spineAlien.setAnimationByName(0, "stand", !0), e.spineAlien.setToSetupPose(), e.isAttacking = !1 }) : this.canSpam ? this.launchProjectile() : i.onComplete = function() { e.launchProjectile() }, this.canAttack = !1, this.isCooling = !1, this.timerCooling = 0, this.timerBetweenAttacks = 0, this.alienType) {
                    case t.ALIEN.HEAT_BLAST:
                        o = "power_2_v"; break;
                    case t.ALIEN.DIAMOND_HEAD:
                        o = "power_3_v"; break;
                    case t.ALIEN.WILD_VINE:
                        o = "power_4_v"; break;
                    default:
                        o = "power_2_v" } o += this.game.rnd.integerInRange(1, 2), this.game.ph2AudioManager.playEffect(o, !1), this.poweredUp || (this.totalHeat += this.heatPerShot, this.totalHeat >= 100 && (this.totalHeat = 100, this.isOverheated = !0, this.isCooling = !0, this.game.ph2AudioManager.playEffect("power_down", !1), t.Instances.DataManager.getTutorialOverheated() || (t.Instances.DataManager.saveTutorialOverheated(!0), this.game.ph2NotificationManager.postNotification("_SHOW_OVERHEAT_TUTORIAL")))) } }, i.prototype.launchProjectile = function() { var t = this; "attack2" !== this.lastAttack && (this.spineAlien.setAnimationByName(0, "attack", !1).onComplete = function() { t.spineAlien.setAnimationByName(0, "stand", !0), t.spineAlien.setToSetupPose(), t.isAttacking = !1 }), this.spineAlien.setToSetupPose(), this.game.ph2NotificationManager.postNotification("_CREATE_PROJECTILE", 350, 350, this.color, this.poweredUp), this.canSpam = !0, this.isAttacking = !0, this.timerToSpam = 0 }, i.prototype.receiveDamage = function() { var e = this;
            this.alienType === t.ALIEN.GREY_MATTER && this.game.ph2NotificationManager.postNotification("_PAUSE_HACKING_COMPONENT"), this.spineAlien.setAnimationByName(0, "lose", !1).onComplete = function() { e.canAttack = !0, e.isAttacking = !1, e.alienType === t.ALIEN.GREY_MATTER ? e.isHacking ? e.spineAlien.setAnimationByName(0, "stand", !0) : e.spineAlien.setAnimationByName(0, "stand2", !0) : e.spineAlien.setAnimationByName(0, "stand", !0), e.spineAlien.setToSetupPose(), e.alienType === t.ALIEN.GREY_MATTER && e.isHacking && e.game.ph2NotificationManager.postNotification("_RESUME_HACKING_COMPONENT") } }, i.prototype.enableDisablePowerUp = function(t) { null !== this.alienType && (this.poweredUp = t) }, i.prototype.transform = function() { this.visible = !0, this.canAttack = !0, this.canSpam = !1, this.alienType === t.ALIEN.GREY_MATTER ? this.isHacking ? (this.spineAlien.setAnimationByName(0, "stand", !0), this.spineAlien.setToSetupPose()) : (this.spineAlien.setAnimationByName(0, "stand2", !0), this.spineAlien.setToSetupPose()) : (this.spineAlien.setAnimationByName(0, "stand", !0), this.spineAlien.setToSetupPose(), this.lastAttack = "stand_to_attack") }, i.prototype.hide = function() { this.visible = !1, this.canAttack = !0 }, i.prototype.onPause = function() { this.isPaused = !0, t.Util.pauseSpine(this.spineAlien) }, i.prototype.onResume = function() { this.isPaused = !1, t.Util.resumeSpine(this.spineAlien) }, i.prototype.onLevelComplete = function(e) { var i, n = this;
            this.alienType === t.ALIEN.GREY_MATTER ? (this.isHackingComplete = !0, e === t.GAME_END.WIN ? (i = this.spineAlien.setAnimationByName(0, "win_in", !1), this.spineAlien.setToSetupPose(), i.onComplete = function() { n.spineAlien.visible = !1, n.game.ph2NotificationManager.postNotification("_START_BEN_CHANGE"), n.game.ph2NotificationManager.removeAllObserversFromContext(n) }) : (i = this.spineAlien.setAnimationByName(0, "lose_end", !1), this.spineAlien.setToSetupPose(), i.onComplete = function() { n.spineAlien.setAnimationByName(0, "lose_end_loop", !0), n.spineAlien.setToSetupPose(), n.game.ph2NotificationManager.removeAllObserversFromContext(n) })) : e && (i = this.spineAlien.setAnimationByName(0, "lose_end", !1), this.spineAlien.setToSetupPose(), i.onComplete = function() { n.spineAlien.setAnimationByName(0, "lose_end_loop", !0), n.spineAlien.setToSetupPose(), n.game.ph2NotificationManager.removeAllObserversFromContext(n) }) }, i.prototype.update = function() { this.isPaused || (this.checkOverheat(), this.checkCooling(), this.checkInstantAttack(), this.checkTimeBetweenAttacks()) }, i.prototype.checkOverheat = function() { this.isCooling && (this.totalHeat <= 0 ? this.totalHeat = 0 : (this.totalHeat -= this.coolingSpeed, this.totalHeat <= 0 && (this.totalHeat = 0, this.isCooling = !1, this.isOverheated && (this.isOverheated = !1)), this.isOverheated && this.totalHeat <= 55 && this.totalHeat >= 45 && !t.Instances.DataManager.getTutorialReload() && this.visible && (t.Instances.DataManager.saveTutorialReload(!0), this.game.ph2NotificationManager.postNotification("_SHOW_RELOAD_TUTORIAL")))) }, i.prototype.checkCooling = function() { this.isOverheated || this.isCooling || (this.timerCooling += this.game.time.elapsedMS, this.timerCooling >= t.SETTINGS.TIME_TO_START_COOLING && (this.timerCooling = 0, this.isCooling = !0)) }, i.prototype.checkInstantAttack = function() {!this.isPaused && this.canSpam && this.isAttacking && (this.timerToSpam += this.game.time.elapsedMS, this.timerToSpam >= this.timeToSpam && (this.timerToSpam = 0, this.canSpam = !1)) }, i.prototype.checkTimeBetweenAttacks = function() { this.isPaused || this.canAttack || !this.isAttacking || (this.timerBetweenAttacks += this.game.time.elapsedMS, this.timerBetweenAttacks >= this.timeBetweenAttacks && (this.timerBetweenAttacks = 0, this.canAttack = !0)) }, i.prototype.removeListeners = function() { this.game.ph2NotificationManager.removeAllObserversFromContext(this) }, i }(Phaser.Group);
    t.Alien = e }(GameStateMachine || (GameStateMachine = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameStateMachine;
! function(t) { var e = function(e) {
        function i(i, n) { var s = e.call(this, i) || this; return s.game = i, s.x = s.game.width + t.SETTINGS.BOSS_INITIAL_POSITION[0], s.y = t.SETTINGS.BOSS_INITIAL_POSITION[1], s.player = n, s.initialX = s.game.width + t.SETTINGS.BOSS_INITIAL_POSITION[0], s.initialY = t.SETTINGS.BOSS_INITIAL_POSITION[1], s.speed = t.SETTINGS.BOSS_SPEED, s.slowSpeed = t.SETTINGS.BOSS_SLOW_SPEED, s.slowTime = t.SETTINGS.BOSS_SLOW_TIME, s.damageToPushOff = t.SETTINGS.BOSS_DAMAGE_TO_BE_PUSHED, s.offScreenTime = t.SETTINGS.BOSS_OFF_SCREEN_TIME, s.changeColorsTime = t.SETTINGS.BOSS_CHANGE_COLOR_TIME, s.totalDamage = 0, s.color = null, s.movingOutOfScreen = !1, s.isOffScreen = !1, s.isPaused = !1, s.color = t.COLOR.NORMAL, s.currentPhase = t.BOSS_ATTACK.PHASE_1, s.isChargingAttack = !1, s.showingFeedbackColor = !1, s.nextColor = null, s.previousColor = "white", s.chargingTime = 0, s.feedbackTimer = 0, s.createComponents(), s.createAnimations(), s } return __extends(i, e), i.prototype.createAnimations = function() { this.spineBoss = this.game.add.spine(0, -100, "enemy"), this.spineBoss.setAnimationByName(0, "walk", !0), this.spineBoss.setSkinByName("normal_bug_big"), this.spineBoss.setToSetupPose(), this.add(this.spineBoss), this.animationHit = this.game.add.ph2AnimationObject(0, 0, "exp_robot", "atlas_gameplay_fx"), this.animationMissed = this.game.add.ph2AnimationObject(0, 0, "robot_shoot", "atlas_gameplay_fx"), this.animationAttack = this.game.add.ph2AnimationObject(0, -50, "enemy_attack", "atlas_gameplay_fx2"), this.animationAttack.ph2Animations.play("enemy_attack_anim", 1, !0), this.animationHit.visible = !1, this.animationMissed.visible = !1, this.animationAttack.visible = !1, this.add(this.animationMissed), this.add(this.animationHit), this.add(this.animationAttack) }, i.prototype.createComponents = function() { this.componentManager = Ph2.ComponentPlugin.initComponents(this), this.componentCollision = new t.ComponentCollision(this.game, t.SETTINGS.BOSS_ATTACK_DISTANCE, [this.player]), this.componentMovement = new t.ComponentMovement(this.game, this.speed, t.DIRECTION.LEFT), this.componentScreenTimer = new t.ComponentTimer(this.game, this.offScreenTime, "_COMPLETE_OFF_SCREEN", !1), this.componentSlowTimer = new t.ComponentTimer(this.game, this.slowTime, "_COMPLETE_SLOW_TIME", !1), this.componentChangeColorTimer = new t.ComponentTimer(this.game, this.changeColorsTime, "_COMPLETE_CHANGE_COLOR", !0), this.componentSlowTimer.pauseTimer(), this.componentSlowTimer.resetTimer(), this.componentScreenTimer.pauseTimer(), this.componentScreenTimer.resetTimer(), this.componentManager.addComponent(this.componentMovement), this.componentManager.addComponent(this.componentCollision), this.componentManager.addComponent(this.componentSlowTimer), this.componentManager.addComponent(this.componentScreenTimer), this.componentManager.addComponent(this.componentChangeColorTimer), this.game.ph2NotificationManager.addObserver("_COMPLETE_OFF_SCREEN", this.onScreenTimerComplete, this), this.game.ph2NotificationManager.addObserver("_COMPLETE_SLOW_TIME", this.onSlowTimerComplete, this), this.game.ph2NotificationManager.addObserver("_COMPLETE_CHANGE_COLOR", this.startColorFeedback, this) }, i.prototype.onScreenTimerComplete = function() { this.totalDamage = 0, this.componentScreenTimer.pauseTimer(), this.componentScreenTimer.resetTimer(), this.componentMovement.resumeMovement(), this.componentMovement.changeSpeed(this.speed), this.componentChangeColorTimer.resumeTimer(), this.componentCollision.resetComponent() }, i.prototype.onSlowTimerComplete = function() { this.componentSlowTimer.pauseTimer(), this.componentSlowTimer.resetTimer(), this.componentMovement.changeSpeed(this.speed) }, i.prototype.startColorFeedback = function() { var e; if (this.newColor = this.game.rnd.integerInRange(0, 3), this.componentChangeColorTimer.pauseTimer(), this.newColor !== this.color) { switch (this.color) {
                    case t.COLOR.RED:
                        this.previousColor = "red"; break;
                    case t.COLOR.BLUE:
                        this.previousColor = "blue"; break;
                    case t.COLOR.GREEN:
                        this.previousColor = "green"; break;
                    default:
                        this.previousColor = "white" } switch (this.newColor) {
                    case t.COLOR.RED:
                        this.nextColor = "red"; break;
                    case t.COLOR.BLUE:
                        this.nextColor = "blue"; break;
                    case t.COLOR.GREEN:
                        this.nextColor = "green"; break;
                    default:
                        this.nextColor = "white" } this.showingFeedbackColor = !0, e = this.previousColor + "_to_" + this.nextColor, this.spineBoss.setAnimationByName(1, e, !0), this.spineBoss.setToSetupPose() } else this.startColorFeedback() }, i.prototype.changeColor = function() { var e; switch (e = this.previousColor + "_to_" + this.nextColor, this.newColor) {
                case t.COLOR.RED:
                    this.spineBoss.setSkinByName("red_bug_big"); break;
                case t.COLOR.BLUE:
                    this.spineBoss.setSkinByName("blue_bug_big"); break;
                case t.COLOR.GREEN:
                    this.spineBoss.setSkinByName("green_bug_big"); break;
                default:
                    this.spineBoss.setSkinByName("normal_bug_big") } this.color = this.newColor, this.componentChangeColorTimer.resetTimer(), this.componentChangeColorTimer.resumeTimer(), this.spineBoss.setAnimationByName(1, e, !1), this.spineBoss.setToSetupPose() }, i.prototype.receiveDamage = function(e, i, n) { var s, o;
            this.isOffScreen || this.movingOutOfScreen || (o = this.game.rnd.integerInRange(1, 3), this.color === t.COLOR.NORMAL || this.color === i || n ? (this.animationHit.visible = !0, this.animationHit.ph2Animations.play("exp_robot_anim", 1, !1), this.totalDamage += e, this.componentMovement.changeSpeed(this.slowSpeed), this.game.ph2AudioManager.playEffect("destroy_enemy_v" + o, !1), this.componentSlowTimer.resumeTimer(), this.componentSlowTimer.resetTimer(), this.totalDamage >= this.damageToPushOff && (this.totalDamage = 0, this.pushOffScreen())) : (s = this.getNameMissedAnimation(), this.animationMissed.visible = !0, this.animationMissed.ph2Animations.play(s, 1, !1), this.game.ph2AudioManager.playEffect("enemy_block_v" + o, !1))) }, i.prototype.pushOffScreen = function() { this.isChargingAttack = !1, this.movingOutOfScreen = !0, this.componentMovement.pauseMovement(), this.animationOffScreen() }, i.prototype.animationOffScreen = function() { var t = this;
            this.spineBoss.setAnimationByName(0, "push", !1), this.spineBoss.setToSetupPose(), this.game.add.tween(this).to({ x: this.initialX }, 3e3, Phaser.Easing.Quintic.Out, !0).onComplete.add(function() { t.movingOutOfScreen = !1, t.componentScreenTimer.resetTimer(), t.componentScreenTimer.resumeTimer(), t.spineBoss.setAnimationByName(0, "walk", !0), t.spineBoss.setToSetupPose() }, this) }, i.prototype.getNameMissedAnimation = function() { switch (this.color) {
                case t.COLOR.RED:
                    return "red_shoot";
                case t.COLOR.BLUE:
                    return "blue_shoot";
                case t.COLOR.GREEN:
                    return "green_shoot";
                default:
                    return "red_shoot" } }, i.prototype.onCollision = function() { var e, i;
            i = this, this.componentChangeColorTimer.pauseTimer(), this.componentMovement.pauseMovement(), this.currentPhase = t.BOSS_ATTACK.PHASE_1, this.isChargingAttack = !0, e = this.spineBoss.setAnimationByName(0, "big_attack_in", !1), this.spineBoss.setToSetupPose(), e.onComplete = function() { i.spineBoss.setAnimationByName(0, "big_attack_loop1", !0), i.spineBoss.setToSetupPose() } }, i.prototype.attackPlayer = function() { var t, e;
            e = this, this.chargingTime = 0, this.isChargingAttack = !1, t = this.spineBoss.setAnimationByName(0, "big_attack_out", !1), this.spineBoss.setToSetupPose(), t.onEvent = function() { e.launchAttack(), e.spineBoss.setAnimationByName(0, "stand_2", !0), e.spineBoss.setToSetupPose() } }, i.prototype.launchAttack = function() { this.game.ph2NotificationManager.postNotification("_LAUNCH_ATTACK_BOSS", this.animationAttack) }, i.prototype.onPause = function() { t.Util.pauseSpine(this.spineBoss), this.componentChangeColorTimer.pauseTimer(), this.componentScreenTimer.pauseTimer(), this.componentSlowTimer.pauseTimer(), this.componentMovement.pauseMovement(), this.isPaused = !0 }, i.prototype.onResume = function() { t.Util.resumeSpine(this.spineBoss), this.componentChangeColorTimer.resumeTimer(), this.componentScreenTimer.resumeTimer(), this.componentSlowTimer.resumeTimer(), this.componentMovement.resumeMovement(), this.isPaused = !1 }, i.prototype.onLevelComplete = function(e) { this.isPaused = !0, e === t.GAME_END.WIN && (this.spineBoss.setAnimationByName(0, "death", !1), this.spineBoss.setToSetupPose()), this.componentCollision.pauseComponent(), this.componentMovement.pauseMovement(), this.componentScreenTimer.pauseTimer(), this.componentSlowTimer.pauseTimer(), this.componentChangeColorTimer.pauseTimer(), this.game.ph2NotificationManager.removeAllObserversFromContext(this) }, i.prototype.update = function() { this.checkAttackPhase(), this.checkChangeColorFeedback() }, i.prototype.checkAttackPhase = function() { this.isChargingAttack && !this.isPaused && (this.currentPhase === t.BOSS_ATTACK.PHASE_1 && (this.chargingTime += this.game.time.elapsedMS, this.chargingTime >= t.SETTINGS.BOSS_ATTACK_PHASE_1 && (this.chargingTime = 0, this.currentPhase = t.BOSS_ATTACK.PHASE_2, this.spineBoss.setAnimationByName(0, "big_attack_loop2", !0), this.spineBoss.setToSetupPose())), this.currentPhase === t.BOSS_ATTACK.PHASE_2 && (this.chargingTime += this.game.time.elapsedMS, this.chargingTime >= t.SETTINGS.BOSS_ATTACK_PHASE_2 && (this.chargingTime = 0, this.currentPhase = t.BOSS_ATTACK.PHASE_3, this.spineBoss.setAnimationByName(0, "big_attack_loop3", !0), this.spineBoss.setToSetupPose())), this.currentPhase === t.BOSS_ATTACK.PHASE_3 && (this.chargingTime += this.game.time.elapsedMS, this.chargingTime >= t.SETTINGS.BOSS_ATTACK_PHASE_3 && this.attackPlayer())) }, i.prototype.checkChangeColorFeedback = function() { this.showingFeedbackColor && !this.isPaused && (this.feedbackTimer += this.game.time.elapsedMS, this.feedbackTimer >= t.SETTINGS.BOSS_COLOR_FEEDBACK && (this.feedbackTimer = 0, this.showingFeedbackColor = !1, this.changeColor())) }, i.prototype.removeListeners = function() { this.game.ph2NotificationManager.removeAllObserversFromContext(this) }, i }(Phaser.Group);
    t.Boss = e }(GameStateMachine || (GameStateMachine = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameStateMachine;
! function(t) { var e = function(e) {
        function i(i, n, s, o, a) { var r = e.call(this, i) || this; switch (r.game = i, r.x = r.game.width + t.SETTINGS.BUG_INITIAL_POSITION[0], r.y = t.SETTINGS.BUG_INITIAL_POSITION[1], r.color = n, r.levelData = s, r.player = o, r.forceOrb = a, r.hasOrb = !1, r.canBeDestroyed = !1, r.isDestroyed = !1, r.animationMissed = null, r.isAlive = !1, r.hasCollision = !0, r.color) {
                case t.COLOR.RED:
                    r.speed = r.levelData.bug_red_speed, r.hitPoints = r.levelData.bug_red_hp; break;
                case t.COLOR.BLUE:
                    r.speed = r.levelData.bug_blue_speed, r.hitPoints = r.levelData.bug_blue_hp; break;
                case t.COLOR.GREEN:
                    r.speed = r.levelData.bug_green_speed, r.hitPoints = r.levelData.bug_green_hp; break;
                default:
                    r.speed = r.levelData.bug_normal_speed, r.hitPoints = r.levelData.bug_normal_hp } return r.createAnimations(), r.createComponents(), r.levelData.orbs && r.createOrb(), r.damageCounter = 0, r } return __extends(i, e), i.prototype.createAnimations = function() { switch (0, this.spineBug = this.game.add.spine(0, 0, "enemy"), this.spineBug.setAnimationByName(0, "stand_1", !0), this.color) {
                case t.COLOR.RED:
                    this.spineBug.setSkinByName("red_bug"); break;
                case t.COLOR.BLUE:
                    this.spineBug.setSkinByName("blue_bug"); break;
                case t.COLOR.GREEN:
                    this.spineBug.setSkinByName("green_bug"); break;
                default:
                    this.spineBug.setSkinByName("normal_bug") } this.spineBug.setToSetupPose(), this.add(this.spineBug), this.animationHit = this.game.add.ph2AnimationObject(0, 0, "exp_robot", "atlas_gameplay_fx"), this.animationDestroyed = this.game.add.ph2AnimationObject(0, 0, "out_enemy", "atlas_gameplay_fx"), this.animationMissed = this.game.add.ph2AnimationObject(0, 0, "robot_shoot", "atlas_gameplay_fx"), this.animationHit.visible = !1, this.animationDestroyed.visible = !1, this.animationMissed.visible = !1, this.add(this.animationDestroyed), this.add(this.animationMissed), this.add(this.animationHit) }, i.prototype.createComponents = function() { this.componentManager = Ph2.ComponentPlugin.initComponents(this), this.componentCollision = new t.ComponentCollision(this.game, 50, [this.player]), this.componentMovement = new t.ComponentMovement(this.game, this.speed, t.DIRECTION.LEFT), this.componentManager.addComponent(this.componentMovement), this.componentManager.addComponent(this.componentCollision) }, i.prototype.createOrb = function() { var e;
            e = this.game.rnd.integerInRange(1, 100), this.forceOrb ? this.hasOrb = !0 : this.hasOrb = e <= t.SETTINGS.POWER_UP_RATE }, i.prototype.receiveDamage = function(e, i, n) { var s, o; if (!this.isDestroyed && this.isAlive)
                if (o = this.game.rnd.integerInRange(1, 3), n || this.color === t.COLOR.NORMAL || i === this.color) { if (++this.damageCounter < 3) { switch (this.color) {
                            case t.COLOR.RED:
                                this.spineBug.setSkinByName("red_bug_damage" + this.damageCounter); break;
                            case t.COLOR.BLUE:
                                this.spineBug.setSkinByName("blue_bug_damage" + this.damageCounter); break;
                            case t.COLOR.GREEN:
                                this.spineBug.setSkinByName("green_bug_damage" + this.damageCounter); break;
                            default:
                                this.spineBug.setSkinByName("normal_bug_damage" + this.damageCounter) } this.spineBug.setAnimationByName(0, "stand_1", !0), this.spineBug.setToSetupPose() } this.animationHit.visible = !0, this.game.ph2AudioManager.playEffect("destroy_enemy_v" + o, !1), this.animationHit.ph2Animations.play("exp_robot_anim", 1, !1), this.hitPoints -= e, this.hitPoints <= 0 && (this.hasOrb ? (this.game.ph2NotificationManager.postNotification("_CREATE_ORB", this.x), this.game.ph2NotificationManager.postNotification("_RESET_COUNTER")) : this.game.ph2NotificationManager.postNotification("_ADD_FORCE_ORB"), this.destroyBug()) } else s = this.getNameMissedAnimation(), this.animationMissed.visible = !0, this.animationMissed.ph2Animations.play(s, 1, !1), this.game.ph2AudioManager.playEffect("enemy_block_v" + o, !1) }, i.prototype.getNameMissedAnimation = function() { switch (this.color) {
                case t.COLOR.RED:
                    return "red_shoot";
                case t.COLOR.BLUE:
                    return "blue_shoot";
                case t.COLOR.GREEN:
                    return "green_shoot";
                default:
                    return "red_shoot" } }, i.prototype.onCollision = function(t) { var e, i = this;
            this.isAlive && this.visible && this.hasCollision && (t.onBugCollision(), this.hasCollision = !1, this.componentMovement.pauseMovement(), e = this.spineBug.setAnimationByName(0, "attack_1", !1), this.spineBug.setToSetupPose(), e.onComplete = function() { i.destroyBug() }) }, i.prototype.destroyBug = function() { var t = this;
            this.componentCollision.pauseComponent(), this.componentMovement.pauseMovement(), this.spineBug.visible = !1, this.game.ph2NotificationManager.postNotification("_REMOVE_BUG_FROM_ARRAY", this), this.animationDestroyed.visible = !0, this.animationDestroyed.ph2Animations.play("out_enemy_anim", 1, !1).onComplete.add(function() { t.animationHit.ph2Animations.stop(), t.killBug() }, this) }, i.prototype.onPause = function() { this.componentCollision.pauseComponent(), this.componentMovement.pauseMovement(), t.Util.pauseSpine(this.spineBug) }, i.prototype.onResume = function() { this.componentCollision.resumeComponent(), this.componentMovement.resumeMovement(), t.Util.resumeSpine(this.spineBug) }, i.prototype.onLevelComplete = function() { var t, e, i = this;
            t = this.game.rnd.integerInRange(5, 15), this.game.time.events.add(125 * t, function() { i.componentCollision.pauseComponent(), i.componentMovement.pauseMovement(), i.spineBug.visible = !1, i.animationDestroyed.visible = !0, (e = i.animationDestroyed.ph2Animations.play("out_enemy_anim", 1, !1)).onComplete.add(function() { i.animationDestroyed.ph2Animations.stop(), i.animationMissed.ph2Animations.stop(), i.animationHit.ph2Animations.stop(), i.canBeDestroyed = !0 }, i) }, this) }, i.prototype.reviveBug = function(e, i, n) { switch (this.x = e, this.y = i, this.forceOrb = n, this.damageCounter = 0, this.isAlive = !0, this.visible = !0, this.hasCollision = !0, this.color) {
                case t.COLOR.RED:
                    this.hitPoints = this.levelData.bug_red_hp; break;
                case t.COLOR.BLUE:
                    this.hitPoints = this.levelData.bug_blue_hp; break;
                case t.COLOR.GREEN:
                    this.hitPoints = this.levelData.bug_green_hp; break;
                default:
                    this.hitPoints = this.levelData.bug_normal_hp } switch (this.levelData.orbs && this.createOrb(), this.spineBug.visible = !0, this.spineBug.setAnimationByName(0, "stand_1", !0), this.color) {
                case t.COLOR.RED:
                    this.spineBug.setSkinByName("red_bug"); break;
                case t.COLOR.BLUE:
                    this.spineBug.setSkinByName("blue_bug"); break;
                case t.COLOR.GREEN:
                    this.spineBug.setSkinByName("green_bug"); break;
                default:
                    this.spineBug.setSkinByName("normal_bug") } this.spineBug.setToSetupPose(), this.animationHit.visible = !1, this.animationDestroyed.visible = !1, this.animationMissed.visible = !1, this.componentMovement.resumeMovement(), this.componentCollision.resumeComponent(), this.componentCollision.resetComponent() }, i.prototype.killBug = function() { this.isAlive = !1, this.visible = !1, this.hasCollision = !1, this.componentMovement.pauseMovement(), this.componentCollision.pauseComponent(), this.componentCollision.resetComponent() }, i.prototype.removeListeners = function() { this.game.ph2NotificationManager.removeAllObserversFromContext(this) }, i }(Phaser.Group);
    t.Bug = e }(GameStateMachine || (GameStateMachine = {}));
var GameStateMachine;
! function(t) { var e = function() {
        function e(t, e, i, n) { this.game = t, this.color = e, this.levelData = i, this.player = n, this.bugs = [], this.createPool() } return e.prototype.createPool = function() { var t, e; for (t = 0; t < 3; t++) e = this.createBug(), this.bugs.push(e) }, e.prototype.createBug = function() { var e; return (e = new t.Bug(this.game, this.color, this.levelData, this.player, !1)).killBug(), e }, e.prototype.getBug = function(e) { var i, n, s; return null === (i = this.getFirstDead()) && (i = this.createBug(), this.bugs.push(i)), n = this.game.width + t.SETTINGS.BUG_INITIAL_POSITION[0], s = t.SETTINGS.BUG_INITIAL_POSITION[1], i.reviveBug(n, s, e), i }, e.prototype.getFirstDead = function() { var t; for (t = 0; t < this.bugs.length; t++)
                if (!this.bugs[t].isAlive) return this.bugs[t]; return null }, e }();
    t.BugPool = e }(GameStateMachine || (GameStateMachine = {}));
var GameStateMachine;
! function(t) { var e = function() {
        function t(t) { this.game = t, this.createBar() } return t.prototype.createBar = function() { this.graphicBar = new Phaser.Graphics(this.game), this.graphicBar.angle = -10, this.graphicBar.beginFill(65280, 1), this.graphicBar.arc(0, 0, 62, Phaser.Math.degToRad(275), Phaser.Math.degToRad(-85), !0), this.graphicBar.endFill() }, t.prototype.setProgress = function(t, e) { var i;
            i = 1 - t / e, this.graphicBar.angle = -5, this.graphicBar.clear(), this.graphicBar.beginFill(60159, 1), this.graphicBar.arc(-1, -1, 65.5, Phaser.Math.degToRad(275), Phaser.Math.degToRad(360 * i - 85), !0), this.graphicBar.endFill() }, t.prototype.decreaseBar = function(t, e) { var i;
            i = t / e, this.graphicBar.angle = -2, this.graphicBar.clear(), this.graphicBar.beginFill(60159, 1), this.graphicBar.arc(-1, -1, 65.5, Phaser.Math.degToRad(275), Phaser.Math.degToRad(360 * i - 85), !0), this.graphicBar.endFill() }, t.prototype.showProgressBar = function() { this.graphicBar.visible = !0 }, t.prototype.hideProgressBar = function() { this.graphicBar.visible = !1 }, t }();
    t.CircleProgressBar = e }(GameStateMachine || (GameStateMachine = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameStateMachine;
! function(t) { var e = function(e) {
        function i(t, i, n, s) { var o = e.call(this, t) || this; return o.x = i, o.y = n, o.player = s, o.timerActive = 0, o.isDestroying = !1, o.isActive = !0, o.isTutorialOrb = !1, o.tweenRepositionX = null, o.tweenRepositionY = null, o.createAnimation(), o.createInputListener(), o } return __extends(i, e), i.prototype.createAnimation = function() { var t, e, i = this;
            this.animationOrb = this.game.add.ph2AnimationObject(0, 0, "powerup_icon", "atlas_gameplay_fx2"), this.animationOrb.ph2Animations.play("powerup_icon_loop", 1, !0), this.add(this.animationOrb), t = this.y - 10, e = this.y + 10, this.game.add.tween(this).to({ y: t }, 500, "Linear", !0).onComplete.add(function() { i.tweenRepositionY = i.game.add.tween(i).to({ y: e }, 1e3, "Linear", !0, 0, -1, !0) }, this) }, i.prototype.createInputListener = function() { this.animationOrb.inputEnabled = !0, this.animationOrb.events.onInputDown.add(this.onOrbClick, this) }, i.prototype.onOrbClick = function() { this.animationOrb.inputEnabled = !1, this.isActive = !1, this.game.ph2AudioManager.playEffect("collect_item", !1), this.animationOrb.ph2Animations.play("powerup_icon_out", 1, !1).onComplete.add(this.onPlayerReached, this) }, i.prototype.onTimerComplete = function() { this.timerActive = 0, this.isDestroying = !0, this.animationOrb.inputEnabled = !1, this.isActive = !1, this.game.ph2AudioManager.playEffect("item_disappears", !1), this.animationOrb.ph2Animations.play("powerup_icon_out", 1, !1).onComplete.add(this.onAnimationComplete, this) }, i.prototype.onPlayerReached = function() { this.player.addOrbCharge(this.isTutorialOrb), this.isDestroying = !0, this.animationOrb.ph2Animations.stop(), this.destroyOrb() }, i.prototype.onAnimationComplete = function() { this.animationOrb.ph2Animations.stop(), this.destroyOrb() }, i.prototype.repositionOnScreen = function() { var t, e, i;
            e = .85 * this.game.width, i = .9 * this.game.width, t = this.game.rnd.integerInRange(e, i), this.tweenRepositionX = this.game.add.tween(this).to({ x: t }, 1250, "Linear", !0) }, i.prototype.update = function() { this.checkTimer() }, i.prototype.checkTimer = function() { this.isDestroying || this.isTutorialOrb || (this.timerActive += this.game.time.elapsedMS, this.timerActive >= t.SETTINGS.ORB_TIME_ON_SCREEN && this.onTimerComplete()) }, i.prototype.destroyOrb = function() { null !== this.tweenRepositionX && this.tweenRepositionX.stop(!0), this.destroy(!0) }, i }(Phaser.Group);
    t.Orb = e }(GameStateMachine || (GameStateMachine = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameStateMachine;
! function(t) { var e = function(t) {
        function e(e, i, n) { var s = t.call(this, e, 0, 0, e.world.width, e.world.height, n) || this; return s.game = e, s.alpha = i || 1, s.inputEnabled = !0, s.kill(), s } return __extends(e, t), e.prototype.kill = function() { this.alive = !1, this.exists = !1, this.visible = !1 }, e.prototype.revive = function() { this.alive = !0, this.exists = !0, this.visible = !0 }, e }(Phaser.TileSprite);
    t.Overlay = e }(GameStateMachine || (GameStateMachine = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameStateMachine;
! function(t) { var e = function(e) {
        function i(i, n, s) { var o = e.call(this, i) || this; return o.x = t.SETTINGS.HACK_POSITION[0], o.y = t.SETTINGS.HACK_POSITION[1], o.alienData = n, o.levelData = s, o.hitPoints = s.player_hp, o.totalHitPoints = s.player_hp, o.aliens = [], o.powerUpCharge = 0, o.powerUpActive = !1, o.levelCompleted = !1, o.currentAlien = t.ALIEN.GREY_MATTER, o.healthBarSize = 93, o.healthBarOffsetY = 175, o.createAnimations(), o.createAliens(), o.createHealthBar(), o.createComponents(), o.game.ph2NotificationManager.addObserver("_START_BEN_CHANGE", o.startChangingToBen, o), o } return __extends(i, e), i.prototype.createAliens = function() { var e, i, n, s, o, a; for (a = this.levelData.aliens_active, e = 0; e < a.length; e++) { switch (s = a[e], i = 120, s) {
                    case t.ALIEN.HEAT_BLAST:
                        o = this.alienData.heat_blast; break;
                    case t.ALIEN.DIAMOND_HEAD:
                        o = this.alienData.diamond_head; break;
                    case t.ALIEN.WILD_VINE:
                        o = this.alienData.wild_vine; break;
                    default:
                        o = null, i = 0 } n = new t.Alien(this.game, 0, i, s, o), this.add(n), this.aliens.push(n) } this.add(this.animationFrontRed), this.add(this.animationFrontBlue), this.add(this.animationFrontGreen), this.add(this.animationChangeGrey), this.add(this.animationHit), this.add(this.animationPowerUpHack), this.add(this.animationPowerUpAttack) }, i.prototype.createAnimations = function() { this.animationChangeGrey = this.game.add.ph2AnimationObject(0, -40, "grey_change", "atlas_gameplay_fx"), this.animationHit = this.game.add.ph2AnimationObject(0, 0, "shoot", "atlas_gameplay_fx"), this.animationBackRed = this.game.add.ph2AnimationObject(0, 0, "change_fx_back_red", "atlas_gameplay_fx"), this.animationBackBlue = this.game.add.ph2AnimationObject(0, 0, "change_fx_back_blue", "atlas_gameplay_fx"), this.animationBackGreen = this.game.add.ph2AnimationObject(0, 0, "change_fx_back_green", "atlas_gameplay_fx"), this.animationFrontRed = this.game.add.ph2AnimationObject(0, 0, "change_fx_front_red", "atlas_gameplay_fx"), this.animationFrontBlue = this.game.add.ph2AnimationObject(0, 0, "change_fx_front_blue", "atlas_gameplay_fx"), this.animationFrontGreen = this.game.add.ph2AnimationObject(0, 0, "change_fx_front_green", "atlas_gameplay_fx"), this.animationHealthBar = this.game.add.ph2AnimationObject(0, 0, "character_bar", "atlas_gameplay"), this.animationPowerUpHack = this.game.add.ph2AnimationObject(0, 0, "greymatter_powerup", "atlas_gameplay_fx2"), this.animationPowerUpAttack = this.game.add.ph2AnimationObject(0, 0, "powerup_shine", "atlas_gameplay_fx"), this.animationBackRed.visible = !1, this.animationBackBlue.visible = !1, this.animationBackGreen.visible = !1, this.animationFrontRed.visible = !1, this.animationFrontBlue.visible = !1, this.animationFrontGreen.visible = !1, this.animationPowerUpHack.visible = !1, this.animationPowerUpAttack.visible = !1, this.animationChangeGrey.visible = !1, this.animationHit.visible = !1, this.add(this.animationBackRed), this.add(this.animationBackBlue), this.add(this.animationBackGreen) }, i.prototype.createHealthBar = function() { this.healthBar = Ph2.AnimationSystem.findObject("life_bar1/life_bar2", this.animationHealthBar), this.animationHealthBar.y = .3 * this.healthBarOffsetY, this.addChild(this.animationHealthBar) }, i.prototype.createComponents = function() { this.componentManager = Ph2.ComponentPlugin.initComponents(this), this.componentTimerPowerUp = new t.ComponentTimer(this.game, t.SETTINGS.POWER_UP_DURATION, "_ON_POWERUP_END", !1), this.componentTimerPowerUp.pauseTimer(), this.componentTimerPowerUp.resetTimer(), this.componentManager.addComponent(this.componentTimerPowerUp), this.game.ph2NotificationManager.addObserver("_ON_POWERUP_END", this.onPowerUpEnd, this) }, i.prototype.startHacking = function() { this.currentAlien === t.ALIEN.GREY_MATTER && this.aliens[this.currentAlien].startHacking() }, i.prototype.stopHacking = function() { this.currentAlien === t.ALIEN.GREY_MATTER && this.aliens[this.currentAlien].stopHacking() }, i.prototype.changeAlien = function(e, i) { var n, s, o, a, r = this;
            n = this.currentAlien, this.currentColorAnimation = i, this.currentAlien = e, this.animationHealthBar.visible = !1, this.animationPowerUpAttack.visible = !1, this.animationPowerUpHack.visible = !1, n === t.ALIEN.GREY_MATTER ? (this.x = t.SETTINGS.HACK_POSITION[0], this.y = t.SETTINGS.HACK_POSITION[1], this.animationChangeGrey.visible = !0, (s = this.animationChangeGrey.ph2Animations.play("grey_change_anim", 1, !1)).onComplete.removeAll(this), s.onComplete.add(function() { r.animationChangeGrey.visible = !1, r.transformToAttackAlien() }, this)) : e === t.ALIEN.GREY_MATTER ? (o = this.getBackTransformAnimation(), a = this.getFrontTransformAnimation(), o.visible = !0, a.visible = !0, a.ph2Animations.play("change_front", 1, !1), (s = o.ph2Animations.play("change_back", 1, !1)).onComplete.removeAll(this), s.onComplete.add(function() { o.visible = !1, a.visible = !1, r.transformToHackingAlien() }, this)) : this.transformToAttackAlien() }, i.prototype.getBackTransformAnimation = function() { switch (this.currentColorAnimation) {
                case t.ALIEN.HEAT_BLAST:
                    return this.animationBackRed;
                case t.ALIEN.DIAMOND_HEAD:
                    return this.animationBackBlue;
                case t.ALIEN.WILD_VINE:
                    return this.animationBackGreen;
                default:
                    return null } }, i.prototype.getFrontTransformAnimation = function() { switch (this.currentColorAnimation) {
                case t.ALIEN.HEAT_BLAST:
                    return this.animationFrontRed;
                case t.ALIEN.DIAMOND_HEAD:
                    return this.animationFrontBlue;
                case t.ALIEN.WILD_VINE:
                    return this.animationFrontGreen;
                default:
                    return null } }, i.prototype.transformToHackingAlien = function() { var e, i = this;
            this.x = t.SETTINGS.HACK_POSITION[0], this.y = t.SETTINGS.HACK_POSITION[1], this.animationHealthBar.y = .3 * this.healthBarOffsetY, this.animationHealthBar.visible = !0, this.animationChangeGrey.visible = !0, this.aliens[this.currentAlien].transform(), (e = this.animationChangeGrey.ph2Animations.play("grey_change_anim", 1, !1)).onComplete.removeAll(this), e.onComplete.add(function() { i.animationChangeGrey.visible = !1, i.game.ph2NotificationManager.postNotification("_ENABLE_TRANSFORMATION"), i.powerUpActive && (i.animationPowerUpHack.visible = !0) }, this) }, i.prototype.transformToAttackAlien = function() { var e, i, n, s = this;
            this.x = t.SETTINGS.ATTACK_POSITION[0], this.y = t.SETTINGS.ATTACK_POSITION[1], this.animationHealthBar.y = .62 * -this.healthBarOffsetY, this.animationHealthBar.visible = !0, this.aliens[this.currentAlien].transform(), i = this.getBackTransformAnimation(), n = this.getFrontTransformAnimation(), i.visible = !0, n.visible = !0, n.ph2Animations.play("change_front", 1, !1), (e = i.ph2Animations.play("change_back", 1, !1)).onComplete.removeAll(this), e.onComplete.add(function() { i.visible = !1, n.visible = !1, s.game.ph2NotificationManager.postNotification("_ENABLE_TRANSFORMATION"), s.powerUpActive && (s.animationPowerUpAttack.visible = !0) }, this) }, i.prototype.activeAlienAttack = function() { this.currentAlien !== t.ALIEN.GREY_MATTER && this.aliens[this.currentAlien].attackAnimation() }, i.prototype.onBugCollision = function() { var e, i, n = this;
            this.levelCompleted || (this.hitPoints -= t.SETTINGS.BUG_DAMAGE, this.aliens[this.currentAlien].receiveDamage(), this.animationHit.visible = !0, this.animationHit.ph2Animations.play("shoot_anim", 1, !1).onComplete.add(function() { n.animationHit.visible = !1 }, this), i = 100 * this.hitPoints / this.totalHitPoints, e = this.healthBarSize * i / 100, this.healthBar.width = e, this.animationHealthBar.ph2Animations.play("character_bar_anim", 1, !1), this.game.ph2AudioManager.playEffect("damage", !1)) }, i.prototype.onBossDamage = function() { var t, e, i = this;
            this.levelCompleted || (this.hitPoints = 0, this.aliens[this.currentAlien].receiveDamage(), this.animationHit.visible = !0, this.animationHit.ph2Animations.play("shoot_anim", 1, !1).onComplete.add(function() { i.animationHit.visible = !1 }, this), e = 100 * this.hitPoints / this.totalHitPoints, t = this.healthBarSize * e / 100, this.healthBar.width = t, this.animationHealthBar.ph2Animations.play("character_bar_anim", 1, !1)) }, i.prototype.addOrbCharge = function(e) { var i, n;
            this.powerUpActive || this.powerUpCharge >= t.SETTINGS.POWER_UP_CHARGE_NEEDED || (e && (this.game.ph2NotificationManager.postNotification("_REMOVE_TUTORIAL_POWER_UP", this.powerUpCharge), t.Instances.DataManager.saveTutorialPowerUp(!0)), n = !1, i = this.powerUpCharge, this.powerUpCharge += t.SETTINGS.POWER_UP_CHARGE_PER_ORB, this.powerUpCharge >= t.SETTINGS.POWER_UP_CHARGE_NEEDED && (n = !0, this.powerUpCharge = t.SETTINGS.POWER_UP_CHARGE_NEEDED), this.game.ph2NotificationManager.postNotification("_UPDATE_POWER_UP_BAR", this.powerUpCharge, i, n)) }, i.prototype.onEnablePowerUp = function() { this.powerUpCharge = 0, this.powerUpActive = !0, this.componentTimerPowerUp.resumeTimer(), this.enableDisablePowerUp(!0) }, i.prototype.onPowerUpEnd = function() { this.powerUpActive = !1, this.componentTimerPowerUp.pauseTimer(), this.componentTimerPowerUp.resetTimer(), this.enableDisablePowerUp(!1), this.game.ph2NotificationManager.postNotification("_END_POWER_UP") }, i.prototype.enableDisablePowerUp = function(t) { var e; for (e = 0; e < this.aliens.length; e++) this.aliens[e].enableDisablePowerUp(t) }, i.prototype.getGreyAnimation = function() { return this.animationChangeGrey }, i.prototype.getHitAnimation = function() { return this.animationHit }, i.prototype.showPowerUp = function() { this.animationPowerUpHack.ph2Animations.play("greymatter_powerup_anim", 1, !0), this.animationPowerUpAttack.ph2Animations.play("powerup_shine_anim", 1, !0), this.currentAlien === t.ALIEN.GREY_MATTER ? (this.animationPowerUpHack.visible = !0, this.animationPowerUpAttack.visible = !1) : (this.animationPowerUpAttack.visible = !0, this.animationPowerUpHack.visible = !1) }, i.prototype.endPowerUp = function() { this.animationPowerUpHack.visible = !1, this.animationPowerUpAttack.visible = !1, this.animationPowerUpHack.ph2Animations.stop(), this.animationPowerUpAttack.ph2Animations.stop() }, i.prototype.onPause = function() { var t; for (this.animationHealthBar.visible = !1, t = 0; t < this.aliens.length; t++) this.aliens[t].onPause() }, i.prototype.onResume = function() { var t; for (this.animationHealthBar.visible = !0, t = 0; t < this.aliens.length; t++) this.aliens[t].onResume() }, i.prototype.onLevelComplete = function(t) { this.levelCompleted = !0, this.aliens[0].onLevelComplete(t), this.componentTimerPowerUp.pauseTimer(), this.animationPowerUpHack.visible = !1, this.animationPowerUpAttack.visible = !1 }, i.prototype.startChangingToBen = function() { var t = this;
            this.animationChangeGrey.visible = !0, this.animationHealthBar.visible = !1, this.animationPowerUpHack.visible = !1, this.animationPowerUpAttack.visible = !1, this.animationChangeGrey.ph2Animations.play("grey_change_anim", 1, !1).onComplete.add(function() { t.game.ph2NotificationManager.postNotification("_SHOW_BEN") }, this) }, i.prototype.removeListeners = function() { this.game.ph2NotificationManager.removeAllObserversFromContext(this) }, i }(Phaser.Group);
    t.Player = e }(GameStateMachine || (GameStateMachine = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameStateMachine;
! function(t) { var e = function(e) {
        function i(t, i, n, s, o, a, r, h, l, c) { var u = e.call(this, t) || this; return u.x = i, u.y = n, u.speedPowerUp = o, u.speed = s, u.damage = a, u.color = h, u.bugs = l, u.boss = c, u.isPoweredUp = r, u.isAlive = !1, u.visible = !1, u.createAnimation(), u.createComponent(), u } return __extends(i, e), i.prototype.createAnimation = function() { var e; switch (this.color) {
                case t.COLOR.RED:
                    e = "heatblast_attack"; break;
                case t.COLOR.BLUE:
                    e = "diamondhead_attack"; break;
                case t.COLOR.GREEN:
                    e = "wildvine_attack" } this.spriteProjectile = this.game.add.ph2AnimationObject(0, 0, e, "atlas_gameplay_fx2"), this.add(this.spriteProjectile) }, i.prototype.playAnimation = function() { var e; switch (this.color) {
                case t.COLOR.RED:
                    e = "heatblast_attack_anim"; break;
                case t.COLOR.BLUE:
                    e = "diamondhead_attack_anim"; break;
                case t.COLOR.GREEN:
                    e = "wildvine_attack_anim" } this.spriteProjectile.ph2Animations.play(e, 1, !0) }, i.prototype.createComponent = function() { var e;
            this.componentManager = Ph2.ComponentPlugin.initComponents(this), this.componentMovement = new t.ComponentMovement(this.game, this.speed, t.DIRECTION.RIGHT), null !== this.boss ? ((e = this.bugs).push(this.boss), this.componentCollision = new t.ComponentCollision(this.game, 75, e)) : this.componentCollision = new t.ComponentCollision(this.game, 75, this.bugs), this.componentManager.addComponent(this.componentMovement), this.componentManager.addComponent(this.componentCollision) }, i.prototype.onCollision = function(t) {!t.isDestroyed && this.visible && this.isAlive && (t.receiveDamage(this.damage, this.color, this.isPoweredUp), this.visible = !1, this.spriteProjectile.ph2Animations.stop(), this.componentCollision.resetComponent(), this.componentMovement.pauseMovement(), this.isAlive = !1) }, i.prototype.onPause = function() { this.componentMovement.pauseMovement(), this.componentCollision.pauseComponent() }, i.prototype.onResume = function() { this.componentMovement.resumeMovement(), this.componentCollision.resumeComponent() }, i.prototype.onLevelComplete = function() { this.componentMovement.pauseMovement(), this.componentCollision.pauseComponent() }, i.prototype.updateCollisionComponent = function(t) { null !== this.boss ? this.componentCollision.updateTargets(t, this.boss) : this.componentCollision.updateTargets(t, null) }, i.prototype.reviveProjectile = function(t, e, i) { this.x = t, this.y = e, this.isPoweredUp = i, this.componentCollision.resetComponent(), this.componentCollision.resumeComponent(), this.componentMovement.resumeMovement(), i ? this.componentMovement.changeSpeed(this.speedPowerUp) : this.componentMovement.changeSpeed(this.speed), this.isAlive = !0, this.visible = !0 }, i.prototype.killProjectile = function() { this.isAlive = !1, this.visible = !1, this.componentMovement.pauseMovement(), this.componentCollision.pauseComponent() }, i.prototype.update = function() { this.isAlive && this.x > this.game.width + this.width && (this.isAlive = !1) }, i }(Phaser.Group);
    t.Projectile = e }(GameStateMachine || (GameStateMachine = {}));
var GameStateMachine;
! function(t) { var e = function() {
        function e(t, e, i) { this.game = t, this.color = e, this.boss = i, this.projectiles = [], this.alienData = this.game.cache.getJSON("alien_data"), this.createPool() } return e.prototype.createPool = function() { var t, e; for (t = 0; t < 4; t++) e = this.createProjectile(), this.projectiles.push(e) }, e.prototype.createProjectile = function() { var e, i, n, s, o; switch (this.color) {
                case t.COLOR.RED:
                    o = this.alienData.heat_blast; break;
                case t.COLOR.BLUE:
                    o = this.alienData.diamond_head; break;
                case t.COLOR.GREEN:
                    o = this.alienData.wild_vine } return i = o.power_up_speed, n = o.speed, s = o.damage, (e = new t.Projectile(this.game, 0, 0, n, i, s, !1, this.color, [], this.boss)).killProjectile(), e }, e.prototype.getProjectile = function(t, e, i) { var n; return null === (n = this.getFirstDead()) && (n = this.createProjectile(), this.projectiles.push(n)), n.reviveProjectile(t, e, i), n }, e.prototype.getFirstDead = function() { var t; for (t = 0; t < this.projectiles.length; t++)
                if (!this.projectiles[t].isAlive) return this.projectiles[t]; return null }, e }();
    t.ProjectilePool = e }(GameStateMachine || (GameStateMachine = {}));
var __extends = this && this.__extends || function() { var t = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t, e) { t.__proto__ = e } || function(t, e) { for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i]) }; return function(e, i) {
            function n() { this.constructor = e } t(e, i), e.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(),
    GameStateMachine;
! function(t) { var e = function(e) {
        function i(t, i) { var n = e.call(this, t, i) || this; return n.gamePhaser = t, n.onCompletedIn = new Phaser.Signal, n.onCompletedOut = new Phaser.Signal, window.addEventListener("resize", function() { return n.resize() }), n.resize(), n } return __extends(i, e), i.prototype.resize = function() { this.x = this.game.width / 2, this.y = this.game.height / 2; var t = this.game.width / 960;
            this.scale.x = t, this.scale.y = t }, i.prototype.playIn = function() { this.visible = !0, this.setAnimationByName(0, "in", !1).onComplete = this.endIn.bind(this), t.Instances.DataManager.getAudio() && this.gamePhaser.ph2AudioManager.playEffect("transition", !1), this.setToSetupPose() }, i.prototype.endIn = function() { this.onCompletedIn.dispatch() }, i.prototype.playStand = function() { this.visible = !0, this.setAnimationByName(0, "stand", !0), this.setToSetupPose() }, i.prototype.playOut = function() { this.visible = !0, this.setAnimationByName(0, "out", !1).onComplete = this.endOut.bind(this), this.setToSetupPose() }, i.prototype.endOut = function() { this.visible = !1, this.onCompletedOut.dispatch() }, i.prototype.destroy = function() { this.onCompletedIn.dispose(), this.onCompletedOut.dispose(), e.prototype.destroy.call(this) }, i }(PhaserSpine.Spine);
    t.Transition = e }(GameStateMachine || (GameStateMachine = {}));
var GameStateMachine;
! function(t) { var e = function() {
        function t() {} return t.pauseSpine = function(t) { t.state.timeScale = 0 }, t.resumeSpine = function(t) { t.state.timeScale = 1 }, t }();
    t.Util = e }(GameStateMachine || (GameStateMachine = {}));