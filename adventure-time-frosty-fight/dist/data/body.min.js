/* Created by Olphabet */
var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(){function a(a,b,c){void 0===a&&(a=0),void 0===b&&(b=0),void 0===c&&(c=0),this.x=a,this.y=b,this.scale=c}return a}();a.Coord3D=b;var c=function(){function a(a,b,c,d){void 0===a&&(a=0),void 0===b&&(b=0),void 0===c&&(c=null),void 0===d&&(d=-1),this.type=a,this.powerUps=b,this.visual=c,this.mark=d}return a}();a.GridCell=c;var d=function(){function a(a,b){void 0===a&&(a=0),void 0===b&&(b=0),this.x=a,this.y=b}return a}();a.PathPoint=d;var e=function(e){function f(a){var c=e.call(this,a,0,0)||this;return f._varCoord3D=new b,c}return __extends(f,e),f.prototype.init=function(a){this._map=[],this._bonfireArray=[],this._spikesArray=[],this._switchArray=[],this._totalOrb=0,this._spikesOn=!1,this._bonfireTimer=-100,this._gameUI=a;for(var b=0;b<f.MAP_HEIGHT;b++){this._map[b]=[];for(var d=0;d<f.MAP_WIDTH;d++)this._map[b][d]=new c}},f.prototype.clear=function(){this._bonfireArray=[],this._spikesArray=[],this._switchArray=[],this._totalOrb=0,this._spikesOn=!1;for(var a=0;a<f.MAP_HEIGHT;a++)for(var b=0;b<f.MAP_WIDTH;b++)this.removeChild(this._map[a][b].visual),this._map[a][b].visual=null,this._map[a][b].powerUps=0,this._map[a][b].type=0},f.prototype.load=function(b,c,d){for(var e,g=[],h=0;h<f.MAP_HEIGHT;h++)for(var i=0;i<f.MAP_WIDTH;i++)if(this._map[h][i].type=b[h][i],this._map[h][i].powerUps=c[h][i],1==b[h][i]&&this._totalOrb++,5==b[h][i]&&this._bonfireArray.push(new Phaser.Point(i,h)),6==b[h][i]&&this._spikesArray.push(new Phaser.Point(i,h)),7==b[h][i]&&this._switchArray.push(new Phaser.Point(i,h)),0!=b[h][i]){this._map[h][i].visual=new a.Platform(this.game,b[h][i],i,h),0!=c[h][i]&&(this._map[h][i].visual.setPowerUp(c[h][i]),g[g.length]=this._map[h][i].visual);var j=100-100/7*h,k=(f.FOCAL_LENGTH,f.FOCAL_LENGTH,f.get3DCoordinate(i,h));this._map[h][i].visual.x=k.x,this._map[h][i].visual.y=k.y,this._map[h][i].visual.alpha=0,this._map[h][i].visual.scale.x=this._map[h][i].visual.scale.y=k.scale,this.addChild(this._map[h][i].visual)}for(var l=b.length,m=b[0].length,n=0,o=0;o<l+m-1;o++){for(var p=!1,q=Math.max(o-l+1,0);q<Math.min(o+1,m);q++)if(0!=b[o-q][q]){p=!0;var r=this._map[o-q][q].visual,s=r.y;r.y=s+20,e=this.game.add.tween(r).to({alpha:1,y:s},150,Phaser.Easing.Linear.None,!0,150*n*3/4),e.start()}p&&n++}for(var t=0;t<g.length;t++)g[t].setPowerUpAnumbtion(150*n*3/4+150*t);if(d&&e.onComplete.add(d),this._gameUI.levelOrb=this._totalOrb,this._bonfireArray.length>0){this._bonfireTimer=2;for(var t=0;t<this._bonfireArray.length;t++)this.game.rnd.integerInRange(1,2)%2==0?this._map[this._bonfireArray[t].y][this._bonfireArray[t].x].visual.bonfireStatus=!0:this._map[this._bonfireArray[t].y][this._bonfireArray[t].x].visual.bonfireStatus=!1}},f.prototype.hide=function(){this.alpha=0},f.prototype.simpleShow=function(){this.alpha=1},f.prototype.timerUpdate=function(){if(this._bonfireArray.length>0){var b=this.game.time.elapsed/1e3;if(b>.02&&(b=.02),this._bonfireTimer-=b,this._bonfireTimer<0&&this._bonfireTimer>-100){a.SoundMixer.playSound("burnOver"),this._bonfireTimer=2;for(var c=0;c<this._bonfireArray.length;c++)this._map[this._bonfireArray[c].y][this._bonfireArray[c].x].visual.igniteFire(),this._map[this._bonfireArray[c].y][this._bonfireArray[c].x].visual.dangers&&this._gameUI.checkDangers(this._bonfireArray[c].x,this._bonfireArray[c].y)}}if(this.game.device.desktop)for(var d=0;d<f.MAP_HEIGHT;d++)for(var e=0;e<f.MAP_WIDTH;e++)this._map[d][e].visual&&this._map[d][e].visual.hoopCheker()},f.prototype.getDistance=function(a,b,c,d){var e=c-a,f=d-b;return Math.sqrt(e*e+f*f)},f.prototype.findNextCellH=function(a,b,c,d,e){var f=0==this._map[b][a-1].type?e:this.getDistance(a-1,b,c,d),g=0==this._map[b][a+1].type?e:this.getDistance(a+1,b,c,d);return f<g?0==f?-1:-1*f:0==g?1:g},f.prototype.findNextCellV=function(a,b,c,d,e){var f=0==this._map[b-1][a].type?e:this.getDistance(a,b-1,c,d),g=0==this._map[b+1][a].type?e:this.getDistance(a,b+1,c,d);return f<g?0==f?-1:-1*f:0==g?1:g},f.prototype.findNextCell=function(a,b,c,e,f){if(f&&f(a,b))return null;if(a==c&&b==e)return null;var g=new d(0,0);return g.x=a!=c?this.findNextCellH(a,b,c,e,1e6):1e6,g.y=b!=e?this.findNextCellV(a,b,c,e,1e6):1e6,g.x<g.y?(1e6==g.x||0==g.x?g.x=0:g.x=g.x<0?-1:1,g.y=0):(1e6==g.y||0==g.y?g.y=0:g.y=g.y<0?-1:1,g.x=0),g},f.prototype.pathFind=function(a,b,c,d,e){for(var g=new EasyStar.js,h=[],i=0;i<f.MAP_HEIGHT;i++){h[i]=[];for(var j=0;j<f.MAP_WIDTH;j++)h[i][j]=1,0==this._map[i][j].type&&(h[i][j]=0)}return g.setGrid(h),g.setAcceptableTiles([1]),g.findPath(a,b,c,d,e),g.calculate(),null},f.prototype.getMapValue=function(a,b){return a<0||b<0||a>=f.MAP_WIDTH||b>=f.MAP_HEIGHT?0:this._map[b][a].type},f.prototype.splashInPlatform=function(b,c,d,e,g){var h=this.game.add.sprite(d-10,e+100,"Objects","splash_10001");h.anchor.set(.5,1),h.scale.set(g,g),h.animations.add("splash",Phaser.Animation.generateFrameNames("splash_",10001,10017),24,!1),h.animations.play("splash",24,!1,!0);var i=0,j=b,k=!0;if(c<0)i=0;else if(c>=f.MAP_HEIGHT)i=this.children.length;else{for(var l=0;l<f.MAP_WIDTH;l++)if(this._map[c][l].visual){k=!1;break}if(!k){for(var m=0;m<f.MAP_WIDTH&&!this._map[c][j].visual;m++){if(this._map[c][j+1].visual){j++;break}if(this._map[c][j-1].visual){j--;break}j++}i=this.getChildIndex(this._map[c][j].visual)+1}}this.addChildAt(h,i),a.SoundMixer.playSound("fallInWater")},f.prototype.getPowerUpValue=function(a,b){return a<0||b<0||a>=f.MAP_WIDTH||b>=f.MAP_HEIGHT?0:this._map[b][a].powerUps},f.prototype.actionOnPlatformStep=function(b,c,d,e){var g=this;if(b<0||c<0||b>=f.MAP_WIDTH||c>=f.MAP_HEIGHT||0==this._map[c][b].type)return void e.hit(!0);this._map[c][b].visual.stepOnPlatform(d),d&&(1==this._map[c][b].type?(a.SoundMixer.playSound("bounce"),a.SoundMixer.playSound("cheese"),this._gameUI.addScore(),this._map[c][b].type=1.5):4==this._map[c][b].type?(this._gameUI.dropScoreModificator(),this._gameUI.rechangePath(),a.SoundMixer.playSound("bounce"),setTimeout(function(){g.startPlatformCrash(b,c),g._map[c][b].type=0},500)):7==this._map[c][b].type?(this._gameUI.dropScoreModificator(),a.SoundMixer.playSound("switch"),this.activateSpikes()):3==this._map[c][b].type?a.SoundMixer.playSound("cup"):2==this._map[c][b].type?a.SoundMixer.playSound("drum"):(this._gameUI.dropScoreModificator(),a.SoundMixer.playSound("bounce")),0!=this._map[c][b].powerUps&&(this._map[c][b].powerUps=0,this._gameUI.addPowerUP(),a.SoundMixer.playSound("powerUp"))),6==this._map[c][b].type?this._spikesOn&&(e.hit(),d?a.SoundMixer.playSound("screamBurn"):a.SoundMixer.playSound("screamEnemy")):5==this._map[c][b].type&&this._map[c][b].visual.dangers&&(e.hit(),d?a.SoundMixer.playSound("screamBurn"):a.SoundMixer.playSound("screamEnemy"))},f.prototype.activateSpikes=function(){var a=this;this._spikesOn=!this._spikesOn,this._spikesArray.forEach(function(b){a._map[b.y][b.x].visual.activateSoul(a._spikesOn),a._gameUI.checkDangers(b.x,b.y)}),this._switchArray.forEach(function(b){a._map[b.y][b.x].visual.activateSoul(a._spikesOn)})},f.prototype.startPlatformCrash=function(b,c){var d=this;this._map[c][b].visual.crashPlatform(),setTimeout(function(){a.SoundMixer.playSound("cake"),d._gameUI.checkDangers(b,c,!0)},500)},f.get3DCoordinate=function(a,b){var c=100-100/7*b,d=f.FOCAL_LENGTH/(f.FOCAL_LENGTH+c);return f._varCoord3D.x=(f.TILE_SIZE*a-f.X_START_POS)*(.96*d)+f.X_START_POS-f.TEMP_MODEL_WIDTH*d+f.X_START_OFFSET,f._varCoord3D.y=f.TILE_SIZE*b*.525*d+f.Y_START_POS,f._varCoord3D.scale=d,f._varCoord3D},f}(Phaser.Sprite);e.MAP_WIDTH=9,e.MAP_HEIGHT=8,e.X_START_POS=420,e.X_START_OFFSET=-5,e.Y_START_POS=110,e.FOCAL_LENGTH=120,e.TEMP_MODEL_WIDTH=30,e.MODEL_SIZE_SCALAR=1.25,e.TILE_SIZE_CONSTANT=85,e.TILE_SIZE=e.TILE_SIZE_CONSTANT*e.MODEL_SIZE_SCALAR,a.Grid=e}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(a,c,d,e){var f=b.call(this,a,0,0)||this;return f._wattingTime=25,f._grid=e,f._cx=c,f._cy=d,f._canMove=!0,f._waitingTimer=f._wattingTime,f._stupid=0,f._stupedCounter=0,f._animationTimeHorizont=400,f._animationTimeVertical=400,f._stupidPath=[],f.setGridPosition(f._cx,f._cy),f._canUpdate=!0,f}return __extends(c,b),Object.defineProperty(c.prototype,"animationTimeHorizont",{get:function(){return this._animationTimeHorizont},set:function(a){this._animationTimeHorizont=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"animationTimeVertical",{get:function(){return this._animationTimeVertical},set:function(a){this._animationTimeVertical=a},enumerable:!0,configurable:!0}),c.prototype.setGrid=function(a){this._grid=a},c.prototype.setStupid=function(a){this._stupid=a,this._stupedCounter=0},c.prototype.setGridPosition=function(b,d,e){var f=this;void 0===e&&(e=0),this._cx=b,this._cy=d;var g=a.Grid.get3DCoordinate(this._cx,this._cy);if(0==e)this.x=g.x,this.y=g.y,this.myScale=g.scale;else{this._canMove=!1;var h=void 0;this._updateTimer=c.ENTITY_TIME_UPDATE,h=this.game.add.tween(this).to({x:g.x,y:g.y,myScale:g.scale},e,Phaser.Easing.Linear.None,!0),h.onComplete.addOnce(function(){f._canMove=!0;var a=f.parent;f._waitingTimer=f._wattingTime,a.removeChild(f),a.addChild(f),f.onStep()},this),h.onUpdateCallback(function(){if(f._updateTimer<=0){f._updateTimer=c.ENTITY_TIME_UPDATE;var a=f.parent;a.removeChild(f),a.addChild(f)}else f._updateTimer--})}},c.prototype.onStep=function(){},c.prototype.hit=function(a){void 0===a&&(a=!1)},c.prototype.gameWin=function(a){},c.prototype._gotoRandom=function(){var a,b=Math.random()<.5?1:-1;Math.random()<.5?(a=this._grid.getMapValue(this._cx+b,this._cy),0!=a?this.gotoHorizont(b,this.animationTimeHorizont):this.gotoRandom()):(a=this._grid.getMapValue(this._cx,this._cy+b),0!=a?this.gotoVertical(b,this.animationTimeVertical):this.gotoRandom())},c.prototype.gotoRandom=function(){if(this._canMove){if(this._waitingTimer>0)return void this._waitingTimer--;this._waitingTimer=this._wattingTime,this._gotoRandom()}},c.prototype.iNeedFindPath=function(){this._stupedCounter=0,this._waitingTimer=.5*this._wattingTime},c.prototype.goto=function(a,b){var c=this;if(this._canUpdate&&(a!=this.cx||b!=this.cy)&&this._canMove){if(this._waitingTimer>0)return void this._waitingTimer--;if(this._waitingTimer=this._wattingTime,0!=this._stupid){if(this._stupedCounter>0){var d=this._stupidPath.shift();return null==d?(this._stupedCounter=0,void(this._waitingTimer=.5*this._wattingTime)):(d.x=d.x-this.cx,d.y=d.y-this.cy,this.gotoHorizont(d.x,this.animationTimeHorizont),this.gotoVertical(d.y,this.animationTimeVertical),void this._stupedCounter--)}this._stupedCounter=this._stupid}this._canUpdate=!1,this._grid.pathFind(this.cx,this.cy,a,b,function(a){c._stupidPath=a,c._canUpdate=!0,c._stupidPath.shift();var b=c._stupidPath.shift();if(null==b)return void(c._stupedCounter=0);b.x=b.x-c.cx,b.y=b.y-c.cy,c.gotoHorizont(b.x,c.animationTimeHorizont),c.gotoVertical(b.y,c.animationTimeVertical)})}},c.prototype.checkExit=function(a,b){if(null!=this._stupidPath){for(var c=0;c<this._stupidPath.length;c++)if(this._stupidPath[c].x==a&&this._stupidPath[c].y==b)return!0;return!1}},c.prototype.gotoHorizont=function(a,b,c){return void 0===a&&(a=1),void 0===b&&(b=0),void 0===c&&(c=!1),this._canMove&&0!=a&&null!=a?(this._horisontMove=!0,this._moveValue=a,this._cx+=a,!c&&(this._cx<0||this._cx>8)?void(this._cx-=a):(this.setGridPosition(this._cx,this._cy,b),this.moveAnimation(),this._cellType=this._grid.getMapValue(this._cx,this._cy),this._powerUpType=this._grid.getPowerUpValue(this._cx,this._cy),this._cellType)):-2},c.prototype.gotoVertical=function(a,b,c){return void 0===a&&(a=1),void 0===b&&(b=0),void 0===c&&(c=!1),this._canMove&&0!=a&&null!=a?(this._horisontMove=!1,this._moveValue=a,this._cy+=a,!c&&(this._cy<0||this._cy>7)?void(this._cy-=a):(this.setGridPosition(this._cx,this._cy,b),this.moveAnimation(),this._cellType=this._grid.getMapValue(this._cx,this._cy),this._powerUpType=this._grid.getPowerUpValue(this._cx,this._cy),this._cellType)):-2},c.prototype.imBooked=function(a,b){return!!this._canMove&&(a==this.cx&&b==this.cy)},c.prototype.moveAnimation=function(){},c.prototype.actionOnPlatformStep=function(a,b){this._grid.actionOnPlatformStep(this._cx,this._cy,a,b)},Object.defineProperty(c.prototype,"myScale",{get:function(){return this.scale.x},set:function(a){this.scale.x=this.scale.y=a},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"cx",{get:function(){return this._cx},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"cy",{get:function(){return this._cy},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"cellType",{get:function(){return this._cellType},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"powerUpType",{get:function(){return this._powerUpType},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"canMove",{get:function(){return this._canMove},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"horisontMove",{get:function(){return this._horisontMove},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"moveValue",{get:function(){return this._moveValue},enumerable:!0,configurable:!0}),c.prototype.setWattingTimeAndDropTimer=function(a){this._wattingTime=a,this._waitingTimer=this._wattingTime},c}(Phaser.Sprite);b.ENTITY_TIME_UPDATE=3,a.GridEntity=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(c,d,e,f,g){var h=b.call(this,c,d,e,f)||this;return h._linesAnimations=[],h._gameUI=g,h._visual=new a.DBSprite(a.Boot.CHARACTERS,"_DB/hyperIceking"),h.addChild(h._visual),h.setWattingTimeAndDropTimer(60),h.animationTimeHorizont=500,h.animationTimeVertical=400,h.setLinesOnIceking(),h}return __extends(c,b),c.prototype.myreset=function(a,b,c){this._visual.play("down_idle"),this.setGrid(b),this.setGridPosition(a.x,a.y,0),this._gameUI=c},c.prototype.setLinesOnIceking=function(){this._visual.addEvent("frameEvent",this.hitEvent,this);for(var a=1;a<=7;a++){var b=this.game.add.sprite(0,0,"Objects","fx_line_10000");b.anchor.set(.5,.8);var c=b.animations.add("line",Phaser.Animation.generateFrameNames("fx_line_",1e4,10007));this._visual.getBone("fx"+a).addChild(b),this._linesAnimations.push(c)}for(var a=1;a<=7;a++){var b=this.game.add.sprite(0,0,"Objects","fx_line_10000");b.anchor.set(.5,.8);var c=b.animations.add("line",Phaser.Animation.generateFrameNames("fx_line_",1e4,10007));this._visual.getBone("fx_"+a).addChild(b),this._linesAnimations.push(c)}},c.prototype.hitEvent=function(a){"hit"==a.name&&this._linesAnimations.forEach(function(a){return a.play(30,!0)})},c.prototype.lineUpdate=function(){this._linesAnimations.forEach(function(a){a.update(),3==a.loopCount&&a.stop()})},c.prototype.onStep=function(){this.actionOnPlatformStep(!1,this),this._gameUI.checkPlayer()},c.prototype.hit=function(){var a=this;this.setWattingTimeAndDropTimer(80),this._visual.playEx("burn",null,function(b){"burn"==b.label&&a.setWattingTimeAndDropTimer(25)})},c.prototype.lose=function(){this._visual.play("lose")},c.prototype.fight=function(){this._visual.play("fight")},c.prototype.moveAnimation=function(){this.horisontMove?this.moveValue<0?(this._visual.scale.set(1,1),this._visual.play("left_jump")):(this._visual.scale.set(-1,1),this._visual.play("left_jump")):this.moveValue<0?(this._visual.scale.set(1,1),this._visual.play("up_jump")):(this._visual.scale.set(1,1),this._visual.play("down_jump"))},c.prototype.free=function(){this._visual.removeEvent("frameEvent",this.hitEvent),this._visual.free()},c}(a.GridEntity);a.IceKing=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(c,d,e,f,g){var h=b.call(this,c,d,e,f)||this;return h._linesAnimations=[],h._gameUI=g,h._visual=new a.DBSprite(a.Boot.CHARACTERS,"_DB/hyperGunter"),h.addChild(h._visual),h.setWattingTimeAndDropTimer(45),h.animationTimeVertical=750,h.animationTimeHorizont=500,h.setLinesOnPinguin(),h}return __extends(c,b),c.prototype.hitEvent=function(a){"hit"==a.name&&this._linesAnimations.forEach(function(a){return a.play(30,!0)})},c.prototype.lineUpdate=function(){this._linesAnimations.forEach(function(a){a.update(),3==a.loopCount&&a.stop()})},c.prototype.setLinesOnPinguin=function(){this._visual.addEvent("frameEvent",this.hitEvent,this);for(var a=1;a<=7;a++){var b=this.game.add.sprite(0,0,"Objects","fx_line_10000");b.anchor.set(.5,.8);var c=b.animations.add("line",Phaser.Animation.generateFrameNames("fx_line_",1e4,10007));this._visual.getBone("fx"+a).addChild(b),this._linesAnimations.push(c)}},c.prototype.myreset=function(a,b,c){this._visual.play("down_idle"),this.setGrid(b),this.setGridPosition(a.x,a.y,0),this._gameUI=c},c.prototype.onStep=function(){this.actionOnPlatformStep(!1,this),this._gameUI.checkPlayer()},c.prototype.hit=function(){var a=this;this._burn=0,this.setWattingTimeAndDropTimer(100),this._visual.playEx("burn","burn",function(b){"burn"==b.label&&++a._burn>1&&a.setWattingTimeAndDropTimer(5)})},c.prototype.fight=function(){this._visual.play("fight")},c.prototype.moveAnimation=function(){this.horisontMove?this.moveValue<0?(this._visual.scale.set(1,1),this._visual.play("left_jump")):(this._visual.scale.set(-1,1),this._visual.play("left_jump")):this.moveValue<0?(this._visual.scale.set(1,1),this._visual.play("up_jump")):(this._visual.scale.set(1,1),this._visual.play("down_jump"))},c.prototype.lose=function(){this._visual.play("burn")},c.prototype.free=function(){this._visual.removeEvent("frameEvent",this.hitEvent),this._linesAnimations.forEach(function(a){return a.destroy()}),this._visual.free()},c}(a.GridEntity);a.Pinguin=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(a){function b(b,c,d,e){var f=a.call(this,b,0,0)||this;switch(f._flameArray=[],f._flameAnimationArray=[],f._cx=d,f._cy=e,f._type=c,f._dangers=!1,f._bonfireStatus=!1,f.anchor.set(.5),f._hoop=f.game.add.sprite(0,0,"Objects","hoop_10000"),f._hoop.anchor.set(.5),f.addChild(f._hoop),f._hoopAnimation=f._hoop.animations.add("bounce",Phaser.Animation.generateFrameNames("hoop_",1e4,10029),24,!1),f._hoop.frameName="hoop_10029",f._type){case 1:f.createRandomBody(),f._soul=f.game.add.sprite(0,0,"Objects","pl_cheese_10000"),f._soul.anchor.set(.5,.9),f._soul.animations.add("idle",Phaser.Animation.generateFrameNames("pl_cheese_",1e4,10007),24,!0),f._soul.animations.play("idle"),f.addChild(f._soul),f._hoop.position.set(0,.45*f._body.height);break;case 2:f._body=f.game.add.sprite(0,0,"Objects","platform_drum_10000"),f._body.anchor.set(.7,.1),f.addChild(f._body),f._body.animations.add("bounce",Phaser.Animation.generateFrameNames("platform_drum_",10001,10003),24,!1),f._body.animations.add("idle",Phaser.Animation.generateFrameNames("platform_drum_",10003,10003),24,!1),f._body.animations.play("idle"),f._hoop.position.set(0,.45*f._body.height);break;case 3:f._body=f.game.add.sprite(0,0,"Objects","platform_cup0000"),f._body.anchor.set(.7,.12),f.addChild(f._body),f._hoop.position.set(0,.5*f._body.height);break;case 4:f._body=f.game.add.sprite(0,0,"Objects","platform_cake_10000"),f._body.anchor.set(.62,.12),f.addChild(f._body),f._body.animations.add("idle",Phaser.Animation.generateFrameNames("platform_cake_",1e4,1e4),24,!1),f._body.animations.add("bounce",Phaser.Animation.generateFrameNames("platform_cake_",10001,10006),24,!1),f._body.animations.add("break",Phaser.Animation.generateFrameNames("platform_cake_",10007,10041),24,!1),f._body.animations.play("idle"),f._hoop.position.set(0,.45*f._body.height);break;case 5:f._body=f.game.add.sprite(0,0,"Objects","platform_base_10000"),f._body.anchor.set(.7,.12),f.addChild(f._body),f.createBonfire(),f._hoop.position.set(-5,.4*f._body.height);break;case 6:f._body=f.game.add.sprite(0,0,"Objects","platform_base_10000"),f._body.anchor.set(.7,.12),f.addChild(f._body),f._soul=f.game.add.sprite(0,0,"Objects","pl_spikes_10000"),f._soul.anchor.set(.5,.85),f.addChild(f._soul),f._soul.animations.add("up",Phaser.Animation.generateFrameNames("pl_spikes_",1e4,10008),24,!1),f._soul.animations.add("down",Phaser.Animation.generateFrameNames("pl_spikes_",10008,1e4),24,!1),f._hoop.position.set(-5,.4*f._body.height);break;case 7:f._body=f.game.add.sprite(0,0,"Objects","platform_base_10000"),f._body.anchor.set(.7,.12),f.addChild(f._body),f._soul=f.game.add.sprite(0,0,"Objects","platform_hot_plate_switch_10000"),f._soul.anchor.set(.5),f.addChild(f._soul),f._soul.animations.add("up",Phaser.Animation.generateFrameNames("platform_hot_plate_switch_",10001,10003),24,!1),f._soul.animations.add("down",Phaser.Animation.generateFrameNames("platform_hot_plate_switch_",10003,1e4),24,!1),f._hoop.position.set(-5,.4*f._body.height)}return f}return __extends(b,a),b.prototype.stepOnPlatform=function(a){this._dangers||(this._hoop.alpha=1,this._hoopAnimation.play(),a&&1==this._type&&this._soul?this._soul.destroy():a&&4==this._type&&!this._dangers?this._body.animations.play("bounce"):a&&2==this._type&&this._body.animations.play("bounce"),a&&this._boost&&this._boost.destroy())},b.prototype.hoopCheker=function(){this._hoopAnimation.isPlaying||this._hoopAnimation.frame==this._hoopAnimation.frameTotal||1!=this._hoop.alpha||(this._hoop.alpha=0)},b.prototype.crashPlatform=function(){this._dangers||(this._dangers=!0,this._body.animations.play("break"))},b.prototype.setPowerUp=function(a){this._boost=this.game.add.sprite(-5,-10,"Objects","pl_sausage_10000"),this._boost.anchor.set(.45,.9),this._boost.animations.add("idle",Phaser.Animation.generateFrameNames("pl_sausage_",1e4,10065),24,!0),this._boost.animations.play("idle"),this._boost.alpha=0,this.addChild(this._boost)},b.prototype.setPowerUpAnumbtion=function(a){this._boost.y-=30,this.game.add.tween(this._boost).to({alpha:1},50,Phaser.Easing.Linear.None,!0,a),this.game.add.tween(this._boost).to({y:this._boost.y+30},250,Phaser.Easing.Bounce.Out,!0,a)},b.prototype.createRandomBody=function(){this._body=this.game.add.sprite(0,0,"Objects","platform_base_1000"+this.game.rnd.integerInRange(0,4)),this._body.anchor.set(.7,.12),this.addChild(this._body)},b.prototype.createBonfire=function(){this._soul=this.game.add.sprite(0,0,"Objects","platform_firepit.png"),this._soul.anchor.set(.5),this._body.addChild(this._soul),this.getFlame(-12,35-this._soul.height,.34),this.getFlame(12,35-this._soul.height,.34),this.getFlame(0,40-this._soul.height,.34)},b.prototype.igniteFire=function(){this._bonfireStatus=!this._bonfireStatus;for(var a=0;a<this._flameArray.length;a++)this._bonfireStatus?(this._flameArray[a].visible=this._bonfireStatus,this._dangers=!0,this._flameAnimationArray[a].play()):(this._flameArray[a].visible=this._bonfireStatus,this._dangers=!1)},b.prototype.activateSoul=function(a){a?(6==this._type&&(this._dangers=!0),this._soul.animations.play("up")):(6==this._type&&(this._dangers=!1),this._soul.animations.play("down"))},b.prototype.getFlame=function(a,b,c){var d=this._flameArray.length;this._flameArray[d]=this.game.add.sprite(a,b,"Objects","flambit_baby_10000"),this._flameAnimationArray[d]=this._flameArray[d].animations.add("up",Phaser.Animation.generateFrameNames("flambit_baby_",1e4,10009),24,!1),this._flameArray[d].scale.set(c),this._flameArray[d].anchor.set(.5,.9),this._soul.addChild(this._flameArray[d]),this._flameArray[d].visible=!1},Object.defineProperty(b.prototype,"dangers",{get:function(){return this._dangers},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"bonfireStatus",{set:function(a){this._bonfireStatus=a},enumerable:!0,configurable:!0}),b}(Phaser.Sprite);a.Platform=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(c,d,e,f,g){var h=b.call(this,c,d,e,f)||this;return h._gameUI=g,h._myGrid=f,h._visual=new a.DBSprite(a.Boot.CHARACTERS,"_DB/hyperFinn"),h._visual.play("down_idle"),h.addChild(h._visual),h}return __extends(c,b),c.prototype.myreset=function(a,b,c){this._wasHit=!1,this.setGrid(b),this.setGridPosition(a.x,a.y),this._gameUI=c,this._visual.play("down_idle"),this.visible=!0},c.prototype.onStep=function(){this.actionOnPlatformStep(!0,this),this._gameUI.checkPlayer(),2!=this.cellType||this._wasHit||(this.horisontMove?this.gotoHorizont(2*this.moveValue,1e3,!0):this.gotoVertical(2*this.moveValue,900,!0))},c.prototype.hit=function(b,c){var d=this;void 0===b&&(b=!1),void 0===c&&(c=!1),this._wasHit||(this._wasHit=!0,b&&setTimeout(function(){d._myGrid.splashInPlatform(d.cx,d.cy,d.x,d.y,d.scale.x)},250),c&&a.SoundMixer.playSound("caughtOnEnemyHit"),this._visual.playEx("lose","down_idle",function(){d.visible=!1}),this._gameUI.gameOver())},Object.defineProperty(c.prototype,"isFlipped",{get:function(){return this._visual.scale.x<0},enumerable:!0,configurable:!0}),c.prototype.gameWin=function(b){a.SoundMixer.playSound("fullCharge"),this._visual.playEx("sword",null,function(a){"sword"==a.label&&b()})},c.prototype.gameWinAnimation=function(){this._visual.play("win")},c.prototype.moveAnimation=function(){var a=1==Math.abs(this.moveValue)?"":"X2";this.horisontMove?this.moveValue<0?(this._visual.scale.set(1,1),this._visual.play("left_jump"+a)):(this._visual.scale.set(-1,1),this._visual.play("left_jump"+a)):this.moveValue<0?(this._visual.scale.set(1,1),this._visual.playEx("up_jump"+a,"up_idle")):(this._visual.scale.set(1,1),this._visual.play("down_jump"+a))},c.prototype.free=function(){this._visual.free()},c}(a.GridEntity);a.Player=b}(TProject||(TProject={}));var TProject;!function(a){var b=function(){function a(){this._levels=new Array(20);var b=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,3,0,0,0,0],[0,0,0,1,1,1,0,0,0],[0,0,1,1,0,1,1,0,0],[0,0,0,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]],c=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];this._levels[0]={grid:b,gridPowerUps:c,playerPosition:new Phaser.Point(4,2),enemy1:a.EMPTY_ENEMY,enemy2:a.EMPTY_ENEMY,enemy3:a.EMPTY_ENEMY,scoreArray:[80,130,150]};var d=[[0,0,0,0,0,0,0,0,0],[0,0,3,0,0,0,0,0,0],[0,0,1,1,1,1,1,0,0],[0,0,1,2,0,1,1,0,0],[0,0,1,1,0,2,1,0,0],[0,0,1,1,1,1,1,0,0],[0,0,0,0,0,3,0,0,0],[0,0,0,0,0,0,0,0,0]],e=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]],f={name:a.KING,position:new Phaser.Point(5,6),stupid:3};this._levels[1]={grid:d,gridPowerUps:e,playerPosition:new Phaser.Point(2,1),enemy1:f,enemy2:a.EMPTY_ENEMY,enemy3:a.EMPTY_ENEMY,scoreArray:[150,400,535]};var g=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,3,1,1,1,1,0,0],[0,0,1,5,1,5,1,0,0],[0,0,1,1,4,1,1,0,0],[0,0,1,1,1,1,3,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]],h=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,2,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]],i={name:a.KING,position:new Phaser.Point(6,5),stupid:3};this._levels[2]={grid:g,gridPowerUps:h,scoreArray:[170,420,565],playerPosition:new Phaser.Point(2,2),enemy1:i,enemy2:a.EMPTY_ENEMY,enemy3:a.EMPTY_ENEMY};var j=[[0,0,0,0,0,0,0,0,0],[0,0,0,1,1,1,0,0,0],[0,0,3,1,5,1,1,0,0],[0,0,1,1,0,1,1,0,0],[0,0,1,1,0,1,1,0,0],[0,0,3,1,5,1,3,0,0],[0,0,0,1,1,1,0,0,0],[0,0,0,0,0,0,0,0,0]],k=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,2,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,2,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]],l={name:a.KING,position:new Phaser.Point(6,5),stupid:3},m={name:a.PINGUIN,position:new Phaser.Point(2,5),stupid:3};this._levels[3]={grid:j,gridPowerUps:k,scoreArray:[300,750,1060],playerPosition:new Phaser.Point(2,2),enemy1:l,enemy2:m,enemy3:a.EMPTY_ENEMY};var n=[[0,0,0,0,0,0,0,0,0],[0,0,3,0,0,0,0,0,0],[0,0,1,1,1,1,5,0,0],[0,0,1,7,6,2,1,0,0],[0,0,1,2,6,7,1,0,0],[0,0,5,1,1,1,1,0,0],[0,0,0,0,0,0,3,0,0],[0,0,0,0,0,0,0,0,0]],o=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,2,0,0,0],[0,0,0,2,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]],p={name:a.KING,position:new Phaser.Point(6,6),stupid:3};this._levels[4]={grid:n,gridPowerUps:o,scoreArray:[120,250,330],playerPosition:new Phaser.Point(2,1),enemy1:p,enemy2:a.EMPTY_ENEMY,enemy3:a.EMPTY_ENEMY};var q=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,3,0,0,0,0],[0,0,0,1,1,1,0,0,0],[0,5,1,1,2,2,1,5,0],[0,5,1,2,2,1,1,5,0],[0,0,0,1,1,1,0,0,0],[0,0,0,0,3,0,0,0,0],[0,0,0,0,0,0,0,0,0]],r=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,2,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]],s={name:a.KING,position:new Phaser.Point(4,6),stupid:3};this._levels[5]={grid:q,gridPowerUps:r,playerPosition:new Phaser.Point(4,1),scoreArray:[150,250,385],enemy1:s,enemy2:a.EMPTY_ENEMY,enemy3:a.EMPTY_ENEMY};var t=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,3,0,0,0,0],[0,1,4,1,1,1,4,1,0],[0,1,2,1,4,1,1,1,0],[0,1,4,1,1,1,4,1,0],[0,3,1,1,2,1,2,3,0],[0,0,1,1,1,1,1,0,0],[0,0,0,0,0,0,0,0,0]],u=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,2,0,0,0,2,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]],v={name:a.PINGUIN,position:new Phaser.Point(1,5),stupid:3},w={name:a.PINGUIN,position:new Phaser.Point(7,5),stupid:3};this._levels[6]={grid:t,gridPowerUps:u,scoreArray:[300,700,930],playerPosition:new Phaser.Point(4,1),enemy1:a.EMPTY_ENEMY,enemy2:v,enemy3:w};var x=[[0,0,0,0,0,0,0,0,0],[0,0,0,1,3,1,0,0,0],[0,0,0,1,6,1,0,0,0],[0,1,1,7,2,7,1,1,0],[0,1,6,1,0,1,6,1,0],[0,3,0,1,1,1,0,3,0],[0,0,0,0,5,0,0,0,0],[0,0,0,0,0,0,0,0,0]],y=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,1,0,0,0,0],[0,0,0,0,0,0,0,0,0]],z={name:a.PINGUIN,position:new Phaser.Point(1,5),stupid:3},A={name:a.PINGUIN,position:new Phaser.Point(7,5),stupid:3};this._levels[7]={grid:x,gridPowerUps:y,scoreArray:[80,180,265],playerPosition:new Phaser.Point(4,1),enemy1:a.EMPTY_ENEMY,enemy2:z,enemy3:A}
;var B=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,3,0,0,0,0],[0,1,1,1,7,1,1,1,0],[0,0,2,1,1,1,2,0,0],[0,4,0,6,6,6,0,4,0],[0,3,1,1,1,1,1,3,0],[0,1,1,1,7,1,1,1,0],[0,0,0,0,0,0,0,0,0]],C=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,2,0,0,0,0,0,2,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]],D={name:a.PINGUIN,position:new Phaser.Point(1,5),stupid:2},E={name:a.PINGUIN,position:new Phaser.Point(7,5),stupid:2};this._levels[8]={grid:B,gridPowerUps:C,scoreArray:[80,400,590],playerPosition:new Phaser.Point(4,1),enemy1:a.EMPTY_ENEMY,enemy2:D,enemy3:E};var F=[[0,0,0,0,0,0,0,0,0],[0,5,3,1,2,1,1,5,0],[0,1,1,1,5,1,1,1,0],[0,1,1,5,4,5,1,1,0],[0,3,1,5,4,5,1,3,0],[0,1,1,1,5,1,1,1,0],[0,5,1,1,3,1,1,5,0],[0,0,0,0,0,0,0,0,0]],G=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,2,0,0,0,0],[0,0,0,0,1,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]],H={name:a.KING,position:new Phaser.Point(4,6),stupid:2},I={name:a.PINGUIN,position:new Phaser.Point(7,4),stupid:2},J={name:a.PINGUIN,position:new Phaser.Point(1,4),stupid:2};this._levels[9]={grid:F,gridPowerUps:G,scoreArray:[80,600,875],playerPosition:new Phaser.Point(2,1),enemy1:H,enemy2:I,enemy3:J};var K=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,3,1,5,1,5,0,0],[0,0,5,1,5,1,5,0,0],[0,0,1,1,1,1,1,0,0],[0,0,5,1,5,1,3,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]],L=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]],M={name:a.KING,position:new Phaser.Point(6,5),stupid:1};this._levels[10]={grid:K,gridPowerUps:L,scoreArray:[50,120,160],playerPosition:new Phaser.Point(2,2),enemy1:M,enemy2:a.EMPTY_ENEMY,enemy3:a.EMPTY_ENEMY};var N=[[0,0,0,0,0,0,0,0,0],[0,0,3,0,0,0,0,0,0],[0,0,1,4,1,4,1,0,0],[0,0,1,1,1,1,1,0,0],[0,4,1,4,1,4,1,4,0],[0,0,1,1,1,1,1,0,0],[0,0,0,0,0,0,3,0,0],[0,0,0,0,0,0,0,0,0]],O=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,2,0,0,0,0,0,2,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]],P={name:a.KING,position:new Phaser.Point(6,6),stupid:1};this._levels[11]={grid:N,gridPowerUps:O,scoreArray:[50,400,670],playerPosition:new Phaser.Point(2,1),enemy1:P,enemy2:a.EMPTY_ENEMY,enemy3:a.EMPTY_ENEMY};var Q=[[0,0,0,0,0,0,0,0,0],[0,3,5,0,1,5,1,1,0],[0,1,1,2,1,4,1,5,0],[0,5,1,0,1,1,2,1,0],[0,0,1,2,0,1,0,1,0],[0,4,1,0,0,5,1,1,0],[0,0,1,1,1,1,3,0,0],[0,0,0,0,0,0,0,0,0]],R=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,2,0],[0,2,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]],S={name:a.KING,position:new Phaser.Point(6,6),stupid:1};this._levels[12]={grid:Q,gridPowerUps:R,scoreArray:[50,300,480],playerPosition:new Phaser.Point(1,1),enemy1:S,enemy2:a.EMPTY_ENEMY,enemy3:a.EMPTY_ENEMY};var T=[[0,0,0,0,0,0,0,0,0],[0,3,0,1,1,1,0,0,0],[0,7,1,1,1,1,1,0,0],[0,0,1,6,6,6,1,5,0],[0,1,1,6,1,6,1,3,0],[0,1,1,6,6,6,1,7,0],[0,5,1,1,1,1,1,5,0],[0,0,0,0,0,0,0,0,0]],U=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,1,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]],V={name:a.KING,position:new Phaser.Point(7,4),stupid:1};this._levels[13]={grid:T,gridPowerUps:U,scoreArray:[30,80,116],playerPosition:new Phaser.Point(1,1),enemy1:V,enemy2:a.EMPTY_ENEMY,enemy3:a.EMPTY_ENEMY};var W=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,3,1,1,1,1,0,0],[0,0,1,1,5,1,1,0,0],[0,0,1,1,5,1,1,0,0],[0,0,3,1,1,1,3,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]],X=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,2,0,0,0,0],[0,0,0,0,2,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]],Y={name:a.PINGUIN,position:new Phaser.Point(2,5),stupid:1},Z={name:a.PINGUIN,position:new Phaser.Point(6,5),stupid:1};this._levels[14]={grid:W,gridPowerUps:X,scoreArray:[80,600,730],playerPosition:new Phaser.Point(2,2),enemy1:a.EMPTY_ENEMY,enemy2:Y,enemy3:Z};var $=[[0,0,0,0,0,0,0,0,0],[0,1,1,1,3,1,1,1,0],[0,2,2,0,1,0,2,2,0],[0,0,0,0,0,0,0,0,0],[0,1,1,1,2,1,1,1,0],[0,1,1,1,1,1,1,1,0],[0,3,1,1,5,1,1,3,0],[0,0,0,0,0,0,0,0,0]],_=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,2,2,0,0,0,2,2,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]],aa={name:a.PINGUIN,position:new Phaser.Point(1,6),stupid:1},ba={name:a.PINGUIN,position:new Phaser.Point(7,6),stupid:1};this._levels[15]={grid:$,gridPowerUps:_,scoreArray:[80,800,1080],playerPosition:new Phaser.Point(4,1),enemy1:a.EMPTY_ENEMY,enemy2:aa,enemy3:ba};var ca=[[0,0,0,0,0,0,0,0,0],[0,3,2,0,5,0,2,1,0],[0,2,0,0,2,0,0,5,0],[0,0,0,0,0,0,0,1,0],[0,5,2,0,5,2,0,5,0],[0,1,0,2,1,0,0,1,0],[0,0,0,0,1,0,4,1,0],[0,0,0,0,0,0,0,0,0]],da=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,2,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0],[0,0,0,0,0,0,0,0,0]];this._levels[16]={grid:ca,gridPowerUps:da,scoreArray:[30,180,245],playerPosition:new Phaser.Point(1,1),enemy1:a.EMPTY_ENEMY,enemy2:a.EMPTY_ENEMY,enemy3:a.EMPTY_ENEMY};var ea=[[0,0,0,0,0,0,0,0,0],[0,4,1,1,1,5,1,3,0],[0,3,1,5,1,1,1,5,0],[0,0,0,0,0,0,0,2,0],[0,1,0,0,0,0,0,0,0],[0,1,1,5,1,1,1,1,0],[0,3,1,1,1,5,1,1,0],[0,0,0,0,0,0,0,0,0]],fa=[[0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,2,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]],ga={name:a.PINGUIN,position:new Phaser.Point(7,1),stupid:1},ha={name:a.PINGUIN,position:new Phaser.Point(1,6),stupid:1};this._levels[17]={grid:ea,gridPowerUps:fa,scoreArray:[80,500,770],playerPosition:new Phaser.Point(1,2),enemy1:a.EMPTY_ENEMY,enemy2:ga,enemy3:ha};var ia=[[0,0,0,0,0,0,0,0,0],[0,3,7,6,7,6,7,3,0],[0,7,6,1,6,1,6,7,0],[0,6,7,6,5,6,7,6,0],[0,5,6,1,6,1,6,5,0],[0,6,7,6,1,6,7,6,0],[0,3,1,7,6,7,1,3,0],[0,0,0,0,0,0,0,0,0]],ja=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,1,0,0,0,0],[0,2,0,0,0,0,0,2,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]],ka={name:a.KING,position:new Phaser.Point(7,6),stupid:1};this._levels[18]={grid:ia,gridPowerUps:ja,scoreArray:[80,135,335],playerPosition:new Phaser.Point(1,1),enemy1:ka,enemy2:a.EMPTY_ENEMY,enemy3:a.EMPTY_ENEMY};var la=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,3,0,0,0,0,0],[0,0,0,1,1,1,3,0,0],[0,0,0,1,5,1,0,0,0],[0,0,3,1,1,1,0,0,0],[0,0,0,0,0,3,0,0,0],[0,0,0,0,0,0,0,0,0]],ma=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,2,0,0],[0,0,0,0,1,0,0,0,0],[0,0,2,0,0,0,0,0,0],[0,0,0,0,0,2,0,0,0],[0,0,0,0,0,0,0,0,0]],na={name:a.KING,position:new Phaser.Point(5,6),stupid:1},oa={name:a.PINGUIN,position:new Phaser.Point(2,5),stupid:1},pa={name:a.PINGUIN,position:new Phaser.Point(6,3),stupid:1};this._levels[19]={grid:la,gridPowerUps:ma,scoreArray:[80,480,580],playerPosition:new Phaser.Point(3,2),enemy1:na,enemy2:oa,enemy3:pa}}return a.prototype.getLevel=function(a){return this._levels[a]},a}();b.EMPTY_ENEMY={name:"empty",position:new Phaser.Point(0,0),stupid:3},b.KING="KING",b.PINGUIN="PINGUIN",a.WorldModel=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(a){function b(b){return a.call(this,b,0,0)||this}return __extends(b,a),b.prototype.addChild=function(b){var c=0,d=this.children.length;for(c;c<d&&!(this.children[c].y>b.y);c++);return a.prototype.addChildAt.call(this,b,c)},b}(Phaser.Sprite);a.ZSprite=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){!function(a){a[a.LOSE=0]="LOSE",a[a.BRONZE=1]="BRONZE",a[a.SILVER=2]="SILVER",a[a.GOLD=3]="GOLD"}(a.PLACE||(a.PLACE={}));var b=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return __extends(b,a),b.prototype.create=function(){if(this.isPaused=!1,this._debugMode=!1,this.game.device.desktop)this.game.input.keyboard.onDownCallback=this.onKeyDown,this.game.input.keyboard.onUpCallback=this.onKeyUp,this.game.onBlur.add(this.clearKeyBoard,this);else{this._mobilePanel=new Phaser.Sprite(this.game,640,370),this._mobilePanel.scale.set(1.2),this._mobilePanel.alpha=0,this._mobileButtons=[];this._mobileButtons.push(new c(this,Phaser.Keyboard.UP,!1,0,-23)),this._mobilePanel.addChild(this._mobileButtons[0]),this._mobileButtons.push(new c(this,Phaser.Keyboard.DOWN,!1,0,69)),this._mobilePanel.addChild(this._mobileButtons[1]),this._mobileButtons.push(new c(this,Phaser.Keyboard.RIGHT,!1,46,23)),this._mobilePanel.addChild(this._mobileButtons[2]),this._mobileButtons.push(new c(this,Phaser.Keyboard.LEFT,!1,-46,23)),this._mobilePanel.addChild(this._mobileButtons[3]),this.stage.addChild(this._mobilePanel)}},b.prototype.showMobilePAD=function(){null!=this._mobilePanel&&this.add.tween(this._mobilePanel).to({alpha:1},200,Phaser.Easing.Linear.None,!0)},b.prototype.hideMobilePAD=function(){null!=this._mobilePanel&&this.add.tween(this._mobilePanel).to({alpha:0},200,Phaser.Easing.Linear.None,!0)},b.prototype.clearKeyBoard=function(){for(var a in b.keysDown)b.keysDown[a]=!1,b.keysPressed[a]=!1},b.prototype.update=function(){for(var a in b.keysPressed)b.keysPressed[a]=!1},b.prototype.onKeyDown=function(a){b.ValidKeyCodes.indexOf(a.keyCode)>-1&&!b.keysDown[a.keyCode]&&(b.keysDown[a.keyCode]=!0,b.keysPressed[a.keyCode]=!0)},b.prototype.onKeyUp=function(a){b.ValidKeyCodes.indexOf(a.keyCode)>-1&&(b.keysDown[a.keyCode]=!1,b.keysPressed[a.keyCode]=!1)},b.prototype.isAnyKeyPressed=function(){for(var a in b.keysPressed)if(b.keysPressed[a])return!0;return!1},b.prototype.simulateKey=function(a,c){void 0===c&&(c=!0),c?b.ValidKeyCodes.indexOf(a)>-1&&!b.keysDown[a]&&(b.keysDown[a]=!0,b.keysPressed[a]=!0):b.ValidKeyCodes.indexOf(a)>-1&&(b.keysDown[a]=!1,b.keysPressed[a]=!1)},b.prototype.shutdown=function(){if(this.game.device.desktop)this.game.input.keyboard.onDownCallback=null,this.game.input.keyboard.onUpCallback=null,this.game.onBlur.remove(this.clearKeyBoard,this);else{for(this.game.stage.removeChild(this._mobilePanel);this._mobileButtons.length;)this._mobileButtons[this._mobileButtons.length-1].enabled=!1,this._mobilePanel.removeChild(this._mobileButtons.pop());this._mobileButtons=null}this.free()},b.prototype.setDebugMode=function(){this.game.time.advancedTiming=!0,this._debugMode=!0},b.prototype.free=function(){},b.prototype.replay=function(){},b.prototype.render=function(){this._debugMode&&this.game.debug.text(""+this.game.time.fps,2,14,"#00ff00")},Object.defineProperty(b.prototype,"currentLevel",{set:function(a){b.CURRENT_LEVEL=a},enumerable:!0,configurable:!0}),b}(Phaser.State);b.ValidKeyCodes=[Phaser.Keyboard.LEFT,Phaser.Keyboard.RIGHT,Phaser.Keyboard.UP,Phaser.Keyboard.DOWN,Phaser.Keyboard.W,Phaser.Keyboard.A,Phaser.Keyboard.S,Phaser.Keyboard.D],b.keysPressed={},b.keysDown={},b.CURRENT_LEVEL=0,a.AbstractGame=b;var c=function(a){function b(b,c,d,e,f){void 0===d&&(d=!1),void 0===e&&(e=0),void 0===f&&(f=0);var g=this;switch(g=a.call(this,b.game,e,f,"mobileButton")||this,c){case Phaser.Keyboard.LEFT:g.angle=-90;break;case Phaser.Keyboard.RIGHT:g.angle=90;break;case Phaser.Keyboard.UP:g.angle=0;break;case Phaser.Keyboard.DOWN:g.angle=180}return g._code=c,g._name=name,g.anchor.set(.5),g.inputEnabled=!1,g.defScale=1,g._sticky=d,g._agame=b,g.enabled=!0,g._agame.game.world.add(g),g}return __extends(b,a),Object.defineProperty(b.prototype,"enabled",{get:function(){return this.inputEnabled},set:function(a){a&&this.enabled||(this.inputEnabled=a,a?(this.events.onInputDown.add(this.down,this),this.events.onInputUp.add(this.up,this)):(this.events.onInputDown.removeAll(this),this.events.onInputUp.removeAll(this)))},enumerable:!0,configurable:!0}),b.prototype.update=function(){this._down&&this._sticky&&this.down()},b.prototype.testUp=function(){this.input.pointerDown()&&this._down&&this.up()},b.prototype.up=function(){this._agame.simulateKey(this._code,!1),this._down=!1,this.scale.set(this.defScale,1)},b.prototype.down=function(){if(!this._agame.isPaused){var a=!1;this._sticky&&(this._agame.simulateKey(this._code),a=!0),this._down||(this._down=!0,this.scale.set(.9*this.defScale,.9),a||this._agame.simulateKey(this._code))}},b.prototype.setPos=function(a,b){void 0===a&&(a=0),void 0===b&&(b=0),this.x=a,this.y=b},b}(Phaser.Sprite);a.SimpleButton=c}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(a){function b(b,c,d,e){void 0===d&&(d=0);var f=a.call(this,b,0,0)||this;return b.world.add(f),f._images=[],f._images.push(new Phaser.Image(b,d,0,c,e)),f._imgWidth=f._images[0].width,f._images.push(new Phaser.Image(b,d+f._imgWidth-1,0,c,e)),f.addChild(f._images[0]),f.addChild(f._images[1]),f}return __extends(b,a),b.prototype.updateScroll=function(a){this._images[0].x-=a,this._images[1].x-=a,this._images[0].x<=-this._imgWidth&&(this._images[0].x=this._images[1].x+this._imgWidth-1),this._images[1].x<=-this._imgWidth&&(this._images[1].x=this._images[0].x+this._imgWidth-1)},b.prototype.free=function(){this.removeChild(this._images[0]),this.removeChild(this._images[1]),this._images.pop().destroy(!0),this._images.pop().destroy(!0),this._images=null},b.prototype.setPosition=function(a){this._images[0].x=a,this._images[1].x=a+this._imgWidth-1},b}(Phaser.Sprite);a.ParallaxImage=b}(TProject||(TProject={}));var TProject;!function(a){var b=function(){function b(){}return b.save=function(){b._canSaveProress&&localStorage.setItem(this.SAVE_DATA_NAME,JSON.stringify(this._savedata))},b.load=function(){if(b._canSaveProress=!1,!b.isLocalStorageNameSupported())return void b.reset();b._canSaveProress=!0,this._savedata=JSON.parse(localStorage.getItem(this.SAVE_DATA_NAME)),null==this._savedata&&(b.reset(),localStorage.setItem(this.SAVE_DATA_NAME,JSON.stringify(this._savedata)))},b.reset=function(){null==this._savedata&&(this._savedata={sfx:!0,levelStatus:[2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],gemsStatus:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]})},Object.defineProperty(b,"levelStatus",{get:function(){return this._savedata.levelStatus},enumerable:!0,configurable:!0}),Object.defineProperty(b,"gemsStatus",{get:function(){return this._savedata.gemsStatus},enumerable:!0,configurable:!0}),Object.defineProperty(b,"sfx",{get:function(){return this._savedata.sfx},set:function(b){this._savedata.sfx!=b&&(this._savedata.sfx=b,b?a.SoundMixer.on():a.SoundMixer.off())},enumerable:!0,configurable:!0}),b.isLocalStorageNameSupported=function(){var a=window.localStorage;try{return a.setItem("test","1"),a.removeItem("test"),!0}catch(a){return!1}},b}();b.SAVE_DATA_NAME="FrostyFight_03",a.SavedData=b}(TProject||(TProject={}));var TProject;!function(a){var b=function(){function b(){}return b.setGlobalAudioSettings=function(a){b._audio=a.add.audioSprite("Sfx")},b.setAudioForState=function(c,d){void 0===d&&(d=.16);var e=b.getBgNameMusic(c);b._audio.stop(null),a.SavedData.sfx&&(this._bgSound=b._audio.play(e,d),this._bgSound.allowMultiple=!0),b._currentAudioLoop=c},b.getBgNameMusic=function(a){switch(a){case 0:return"bGLoop)";case 1:return"bGGameLoop"}},b.playSound=function(c,d){void 0===d&&(d=.3),a.SavedData.sfx&&(b._audio.play(c,d).allowMultiple=!0)},b.stopCurrentLoop=function(){this._bgSound&&this._bgSound.stop()},b.stopSound=function(a){b._audio.stop(a)},b.on=function(){this._bgSound&&this._bgSound.stop();var a=b.getBgNameMusic(b._currentAudioLoop);this._bgSound=b._audio.play(a,.16),this._bgSound.allowMultiple=!0},b.off=function(){b._audio.stop(null)},b}();a.SoundMixer=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),dragonBones;!function(a){var b=function(b){function c(a){var c=b.call(this,a)||this;return c._eventDispatcher=new EventEmitter,c}return __extends(c,b),c.prototype._onClear=function(){this._debugDrawer,this._armature=null,this._debugDrawer=null,this.destroy()},c.prototype._debugDraw=function(a){},c.prototype.hasEvent=function(a){return this._eventDispatcher.listeners(a,!0)},c.prototype.addEvent=function(a,b,c){this._eventDispatcher.addListener(a,b,c)},c.prototype.removeEvent=function(a,b,c){this._eventDispatcher.removeListener(a,b,c)},c.prototype._dispatchEvent=function(a,b){this._eventDispatcher.emit(a,b)},c.prototype.dispose=function(a){void 0===a&&(a=!0),this._armature&&(this._armature.dispose(),this._armature=null)},Object.defineProperty(c.prototype,"armature",{get:function(){return this._armature},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"animation",{get:function(){return this._armature.animation},enumerable:!0,configurable:!0}),c.prototype.advanceTimeBySelf=function(b){this._armature.clock=b?a.PhaserFactory._clock:null},c}(Phaser.Group);a.PhaserArmatureDisplay=b}(dragonBones||(dragonBones={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),dragonBones;!function(a){var b=function(b){function c(d,e){void 0===d&&(d=null);var f=b.call(this,d)||this;return c._eventManager||(c._eventManager=new a.PhaserArmatureDisplay(e),c._clock=new a.WorldClock,c._game=e),f}return __extends(c,b),c._clockHandler=function(a){void 0===a&&(a=-1),null!=c._clock&&c._clock.advanceTime(a)},Object.defineProperty(c,"clock",{get:function(){return c._clock},enumerable:!0,configurable:!0}),Object.defineProperty(c,"factory",{get:function(){return c._factory||(c._factory=new c(null,this._game)),c._factory},enumerable:!0,configurable:!0}),c.startLoop=function(a){void 0===a&&(a=20),c._clockID=setInterval(function(){c._clockHandler()},a)},c.stopLoop=function(){-1!=c._clockID&&clearInterval(c._clockID)},c.prototype._generateTextureAtlasData=function(b,c){return b?b.texture=c:b=a.BaseObject.borrowObject(a.PhaserTextureAtlasData),b},c.prototype._generateArmature=function(b){var d=a.BaseObject.borrowObject(a.Armature),e=new a.PhaserArmatureDisplay(c._game);return e._armature=d,d._init(b.armature,b.skin,e,e,c._eventManager),d},c.prototype._generateSlot=function(b,d,e){var f=a.BaseObject.borrowObject(a.PhaserSlot);f._init(d,new Phaser.Sprite(c._game,null,null),null);for(var g=[],h=0,i=d.displays.length;h<i;++h){var j=d.displays[h];switch(j.type){case 0:j.texture&&!b.textureAtlasName||(j.texture=this._getTextureData(b.textureAtlasName||b.dataName,j.path)),g.push(f.rawDisplay);break;case 2:j.texture&&!b.textureAtlasName||(j.texture=this._getTextureData(b.textureAtlasName||b.dataName,j.path)),!j.mesh&&j.share&&(j.mesh=d.getMesh(j.share)),g.push(f.meshDisplay);break;case 1:var k=this.buildArmature(j.path,b.dataName,null,b.textureAtlasName);if(k){if(k.inheritAnimation=j.inheritAnimation,!k.inheritAnimation){var l=d.slot.actions.length>0?d.slot.actions:k.armatureData.actions;if(l.length>0)for(var m=0,n=l.length;m<n;++m)k._bufferAction(l[m]);else k.animation.play()}j.armature=k.armatureData}g.push(k);break;default:g.push(null)}}return f._setDisplayList(g),f},c.prototype.buildArmatureDisplay=function(a,b,d,e){void 0===b&&(b=null),void 0===d&&(d=null),void 0===e&&(e=null);var f=this.buildArmature(a,b,d,e);if(f){var g=f.display;return c._clock.add(f),g}return null},c.prototype.getTextureDisplay=function(a,b){void 0===b&&(b=null);var c=this._getTextureData(b,a);if(c){if(!c.texture){var d=c.parent.texture,e=new PIXI.Rectangle(0,0,c.region.width,c.region.height);c.texture=new PIXI.Texture(d,null,c.region,e)}return new PIXI.Sprite(c.texture)}return null},Object.defineProperty(c.prototype,"soundEventManater",{get:function(){return c._eventManager},enumerable:!0,configurable:!0}),c}(a.BaseFactory);b._factory=null,b._eventManager=null,b._clock=null,b._clockID=-1,a.PhaserFactory=b}(dragonBones||(dragonBones={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),dragonBones;!function(a){var b=function(b){function c(){return b.call(this)||this}return __extends(c,b),c.toString=function(){return"[class dragonBones.PhaserSlot]"},c.prototype._onClear=function(){b.prototype._onClear.call(this),this._renderDisplay=null},c.prototype._initDisplay=function(a){},c.prototype._disposeDisplay=function(a){a&&a.destroy()},c.prototype._onUpdateDisplay=function(){this._renderDisplay=this._display?this._display:this._rawDisplay},c.prototype._addDisplay=function(){this._armature.display.addChild(this._renderDisplay)},c.prototype._replaceDisplay=function(a){var b=this._armature.display,c=a;b.addChild(this._renderDisplay),b.swapChildren(this._renderDisplay,c),b.removeChild(c)},c.prototype._removeDisplay=function(){this._renderDisplay.parent.removeChild(this._renderDisplay)},c.prototype._updateZOrder=function(){this._armature.display.addChildAt(this._renderDisplay,this._zOrder)},c.prototype._updateVisible=function(){this._renderDisplay.visible=this._parent.visible},c.prototype._updateBlendMode=function(){switch(this._blendMode){case 0:this._renderDisplay.blendMode=PIXI.blendModes.NORMAL;break;case 1:this._renderDisplay.blendMode=PIXI.blendModes.ADD;break;case 3:this._renderDisplay.blendMode=PIXI.blendModes.DARKEN;break;case 4:this._renderDisplay.blendMode=PIXI.blendModes.DIFFERENCE;break;case 6:this._renderDisplay.blendMode=PIXI.blendModes.HARD_LIGHT;break;case 9:this._renderDisplay.blendMode=PIXI.blendModes.LIGHTEN;break;case 10:this._renderDisplay.blendMode=PIXI.blendModes.MULTIPLY;break;case 11:this._renderDisplay.blendMode=PIXI.blendModes.OVERLAY;break;case 12:this._renderDisplay.blendMode=PIXI.blendModes.SCREEN}},c.prototype._updateColor=function(){this._renderDisplay.alpha=this._colorTransform.alphaMultiplier},c.prototype._updateFrame=function(){var b=this._meshData&&this._display===this._meshDisplay,c=this._textureData;if(this._displayIndex>=0&&this._display&&c){var d=c.parent;this._armature.replacedTexture&&this._displayData&&d===this._displayData.texture.parent&&(d=this._armature._replaceTextureAtlasData,d||(d=a.BaseObject.borrowObject(a.PhaserTextureAtlasData),d.copyFrom(c.parent),d.texture=this._armature.replacedTexture,this._armature._replaceTextureAtlasData=d),c=d.getTexture(c.name));var e=d.texture;if(e){if(c.texture||(c.texture=new PIXI.Texture(e,c.region,c.region,new PIXI.Rectangle(0,0,c.region.width,c.region.height))),b){var f=this._renderDisplay,g=e?e.width:1,h=e?e.height:1;f.uvs=new Float32Array(this._meshData.uvs),f.vertices=new Float32Array(this._meshData.vertices),f.indices=new Uint16Array(this._meshData.vertexIndices);for(var i=0,j=f.uvs.length;i<j;i+=2){var k=f.uvs[i],l=f.uvs[i+1];f.uvs[i]=(c.region.x+k*c.region.width)/g,f.uvs[i+1]=(c.region.y+l*c.region.height)/h}f.texture=c.texture,f.dirty=!0}else{var m=this._renderDisplay;m.texture=c.texture}return void this._updateVisible()}}if(b){var f=this._renderDisplay;f.visible=!1,f.texture=null,f.x=0,f.y=0}else{var m=this._renderDisplay;m.visible=!1,m.texture=null,m.x=0,m.y=0}},c.prototype._updateMesh=function(){var a=this._renderDisplay,b=this._ffdVertices.length>0;if(this._meshData.skinned)for(var c=0,d=0,e=this._meshData.vertices.length;c<e;c+=2){for(var f=c/2,g=this._meshData.boneIndices[f],h=this._meshData.boneVertices[f],i=this._meshData.weights[f],j=0,k=0,l=0,m=g.length;l<m;++l){var n=this._meshBones[g[l]],o=n.globalTransformMatrix,p=i[l],q=0,r=0;b?(q=h[2*l]+this._ffdVertices[d],r=h[2*l+1]+this._ffdVertices[d+1]):(q=h[2*l],r=h[2*l+1]),j+=(o.a*q+o.c*r+o.tx)*p,k+=(o.b*q+o.d*r+o.ty)*p,d+=2}a.vertices[c]=j,a.vertices[c+1]=k}else if(b)for(var s=this._meshData.vertices,c=0,e=this._meshData.vertices.length;c<e;c+=2){var j=s[c]+this._ffdVertices[c],k=s[c+1]+this._ffdVertices[c+1];a.vertices[c]=j,a.vertices[c+1]=k}},c.prototype._updateTransform=function(a){if(a)this._renderDisplay.position.x=0,this._renderDisplay.position.y=0,this._renderDisplay.scale.x=1,this._renderDisplay.scale.y=1,this._renderDisplay.rotation=0,this._renderDisplay.skew.x=0,this._renderDisplay.skew.y=0,this._renderDisplay.pivot.x=0,this._renderDisplay.pivot.y=0;else{var b=this.globalTransformMatrix.tx-(this.globalTransformMatrix.a*this._pivotX+this.globalTransformMatrix.c*this._pivotY),c=this.globalTransformMatrix.ty-(this.globalTransformMatrix.b*this._pivotX+this.globalTransformMatrix.d*this._pivotY);if(this._renderDisplay instanceof Phaser.Rope){this._renderDisplay.position.x=b||0,this._renderDisplay.position.y=c||0,this._renderDisplay.worldTransform.tx=this.globalTransformMatrix.tx,this._renderDisplay.worldTransform.ty=this.globalTransformMatrix.ty,this._renderDisplay.worldTransform.a=this.globalTransformMatrix.a,this._renderDisplay.worldTransform.b=this.globalTransformMatrix.b,this._renderDisplay.worldTransform.c=this.globalTransformMatrix.c,this._renderDisplay.worldTransform.d=this.globalTransformMatrix.d;var d=this._renderDisplay.parent.scale.x?this._renderDisplay.parent.scale.x:1,e=this._renderDisplay.parent.scale.y?this._renderDisplay.parent.scale.y:1;this._renderDisplay.worldTransform.scale(d,e),this._renderDisplay.worldTransform.translate(this._renderDisplay.parent.x,this._renderDisplay.parent.y)}else this._renderDisplay instanceof PIXI.Sprite&&(this.updateGlobalTransform(),this._renderDisplay.position.x=this.globalTransformMatrix.tx-(this.globalTransformMatrix.a*this._pivotX+this.globalTransformMatrix.c*this._pivotY),this._renderDisplay.position.y=this.globalTransformMatrix.ty-(this.globalTransformMatrix.b*this._pivotX+this.globalTransformMatrix.d*this._pivotY),this._renderDisplay.scale.x=this.global.scaleX?this.global.scaleX:1,this._renderDisplay.scale.y=this.global.scaleY?this.global.scaleY:1,this._renderDisplay.rotation=this.global.skewX,this._renderDisplay.skew.x=0,this._renderDisplay.skew.y=this.global.skewY-this.global.skewX)}},c}(a.Slot);a.PhaserSlot=b}(dragonBones||(dragonBones={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),dragonBones;!function(a){var b=function(b){function d(){return b.call(this)||this}return __extends(d,b),d.toString=function(){return"[class dragonBones.PhaserTextureAtlasData]"},d.prototype._onClear=function(){b.prototype._onClear.call(this),this.texture&&(this.texture=null)},d.prototype.generateTexture=function(){return a.BaseObject.borrowObject(c)},d}(a.TextureAtlasData);a.PhaserTextureAtlasData=b;var c=function(a){function b(){return a.call(this)||this}return __extends(b,a),b.toString=function(){return"[class dragonBones.PhaserTextureData]"},b.prototype._onClear=function(){a.prototype._onClear.call(this),this.texture&&(this.texture.destroy(!0),this.texture=null)},b}(a.TextureData);a.PhaserTextureData=c}(dragonBones||(dragonBones={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(c,d,e,f){var g=b.call(this,c,d,e)||this;return g._bg=new a.DBSprite(a.Boot.MENU_UI,"_DB/ice_kingdom",g.game),g.game.device.desktop&&g.createRipples(),g.addChild(g._bg),g}return __extends(c,b),c.prototype.createRipples=function(){this._ripplesAnimation=[],this._ripples=[],this._timers=[],this._startRipples=!1;for(var a=1;a<=7;a++){var b=this.game.add.sprite(0,0,"MenuUI","ripple_movie_10000");b.anchor.set(.1,.4),this._ripplesAnimation.push(b.animations.add("ripple",Phaser.Animation.generateFrameNames("ripple_movie_",1e4,10065),24,!1)),this._bg.getBone("ripples"+a).addChild(b),this._ripples.push(b)}},c.prototype.getDBObject=function(){return this._bg},c.prototype.gotoLevel=function(a){this.game.device.desktop&&this.stopRipples(),this._bg.play(a.toString()),this.game.device.desktop&&this.playRipples()},c.prototype.playRipples=function(){for(var a=0;a<7;a++)this._timers[a]=.5*a,this._ripplesAnimation[a].frame=0;this._startRipples=!0},c.prototype.stopRipples=function(){this._startRipples=!1},c.prototype.riplesUpdate=function(){var a=this.game.time.elapsed/1e3;if(a>.02&&(a=.02),this._startRipples)for(var b=0;b<7;b++)this._timers[b]-=a,this._ripplesAnimation[b].update(),this._ripplesAnimation[b].isPlaying||this._ripplesAnimation[b].frame==this._ripplesAnimation[b].frameTotal||1!=this._ripples[b].alpha||(this._ripples[b].alpha=0),this._timers[b]<0&&this._timers[b]>-100&&(this._ripplesAnimation[b].play(),this._ripples[b].alpha=1,this._timers[b]=c.RIPPLES_START_DELAY[b]+24*this._ripplesAnimation[b].frameTotal/1e3)},c}(Phaser.Sprite);b.RIPPLES_START_DELAY=[1.8,3,1.5,1.5,3,1.5,1],a.BackGround=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(c,d){var e=b.call(this,c,0,0)||this;return e._baseGame=d,e._levelPanel=e.game.add.sprite(381,22,"IngameUI","hud_short-02"),e._levelPanel.anchor.set(.5),e.addChild(e._levelPanel),e._levelText=e.game.add.text(19,-7,"0",{font:a.Boot.LOCALE.pickUpFont(a.FontType.LIGHT),fontSize:"20px",fontWeight:"bold",fill:"#000000"}),e._levelText.anchor.set(.5),e._levelText.align="center",e._levelPanel.addChild(e._levelText),e._scorePanel=e.game.add.sprite(540,22,"IngameUI","hud_long-01"),e._scorePanel.anchor.set(.5),e.addChild(e._scorePanel),e._scoreText=e.game.add.text(3,-7,"0",{font:a.Boot.LOCALE.pickUpFont(a.FontType.LIGHT),fontSize:"20px",fontWeight:"bold",fill:"#000000"}),e._scoreText.anchor.set(.5),e._scoreText.align="center",e._scorePanel.addChild(e._scoreText),e._swordIndicator=new a.SwordIndicator(e.game,17,-15),e.addChild(e._swordIndicator),e._scoreInScreen=new a.ScoreInScreen(e.game),e.addChild(e._scoreInScreen),e._startWinLose=new a.StartWinLose(e.game,function(){e._baseGame.simpleShowConrainer()},function(){e._baseGame.restartLevel()},function(){e._baseGame.newLevel()},function(){e.game.state.start("Menu",!0)}),e.addChild(e._startWinLose),e}return __extends(c,b),c.prototype.init=function(){this._currentScoreArray=[],this._player=null,this._iceKing=null,this._score=0,this._levelOrbMax=0,this._levelOrbCurrent=0,this._scoreModificator=1,this._levelText.text=(a.AbstractGame.CURRENT_LEVEL+1).toString(),
this._scoreText.text="0",this._swordIndicator.setSwordScale(0)},c.prototype.dropForNextLevel=function(){this._score=0,this._levelOrbCurrent=0,this._scoreModificator=1,this._levelText.text=(a.AbstractGame.CURRENT_LEVEL+1).toString(),this._scoreText.text="0",this._swordIndicator.setSwordScale(0)},Object.defineProperty(c.prototype,"player",{set:function(a){this._player=a},enumerable:!0,configurable:!0}),c.prototype.setEnemy=function(a,b,c){this._iceKing=a,this._pinguin1=b,this._pinguin2=c},c.prototype.checkDangers=function(a,b,c){void 0===c&&(c=!1),this._player&&this._player.cx==a&&this._player.cy==b&&this._player.canMove&&this._player.hit(c),this._iceKing&&this._iceKing.cx==a&&this._iceKing.cy==b&&this._iceKing.canMove&&this._iceKing.hit(),this._pinguin1&&this._pinguin1.cx==a&&this._pinguin1.cy==b&&this._pinguin1.canMove&&this._pinguin1.hit(),this._pinguin2&&this._pinguin2.cx==a&&this._pinguin2.cy==b&&this._pinguin2.canMove&&this._pinguin2.hit()},c.prototype.addPowerUP=function(){this._score+=100,this._scoreText.text=this._score.toString(),this._scoreInScreen.addScore(this._player.x,this._player.y,"100",!0)},c.prototype.checkPlayer=function(){this._iceKing.visible&&this._player&&this._player.imBooked(this._iceKing.cx,this._iceKing.cy)&&(this._player.hit(!1,!0),this._iceKing.fight(),this.gameOver()),this._pinguin1.visible&&this._player&&this._player.imBooked(this._pinguin1.cx,this._pinguin1.cy)&&(this._player.hit(!1,!0),this._pinguin1.fight(),this.gameOver()),this._pinguin2.visible&&this._player&&this._player.imBooked(this._pinguin2.cx,this._pinguin2.cy)&&(this._player.hit(!1,!0),this._pinguin2.fight(),this.gameOver())},c.prototype.dropScoreModificator=function(){this._scoreModificator=1},c.prototype.addScore=function(){var a=5*this._scoreModificator;this._scoreModificator++,this._score+=a,this._scoreText.text=this._score.toString(),this._levelOrbCurrent++,this._swordIndicator.setSwordScale(this._levelOrbCurrent/this._levelOrbMax),this._scoreInScreen.addScore(this._player.x,this._player.y,a.toString()),this._levelOrbCurrent==this._levelOrbMax&&this.gameWin()},c.prototype.gameOver=function(){this._baseGame.playerLost()},c.prototype.gameWin=function(){a.SavedData.levelStatus[a.AbstractGame.CURRENT_LEVEL]=3,a.AbstractGame.CURRENT_LEVEL<19&&3!=a.SavedData.levelStatus[a.AbstractGame.CURRENT_LEVEL+1]&&(a.SavedData.levelStatus[a.AbstractGame.CURRENT_LEVEL+1]=2);var b=1;this._score>=this._currentScoreArray[1]&&(b=2),this._score>=this._currentScoreArray[2]&&(b=3),a.SavedData.gemsStatus[a.AbstractGame.CURRENT_LEVEL]<b&&(a.SavedData.gemsStatus[a.AbstractGame.CURRENT_LEVEL]=b),a.SavedData.save(),this._baseGame.playerWon()},c.prototype.showLevelStartMenu=function(){this._startWinLose.setState("start")},c.prototype.showLevelWinMenu=function(){var a=1;this._score>=this._currentScoreArray[1]&&(a=2),this._score>=this._currentScoreArray[2]&&(a=3),this._startWinLose.setState("win",a),this._baseGame.hideMobilePAD()},c.prototype.showLevelLoseMenu=function(){a.SoundMixer.playSound("levelFail"),this._startWinLose.setState("lose"),this._baseGame.hideMobilePAD()},c.prototype.showGameWinMenu=function(){var b=this;this._baseGame.hideMobilePAD();var c=this.game.add.sprite(this.game.world.centerX,this.game.world.centerY,"IngameUI","ingame_panel0000");c.anchor.set(.5),this.addChild(c);var d=this.game.add.sprite(140,92,"MenuUI","pl_cheese_10000");d.animations.add("orb",Phaser.Animation.generateFrameNames("pl_cheese_",1e4,10007)),d.play("orb",30,!0),d.scale.set(.8);var e=this.game.add.sprite(96,100,"MenuUI","pl_cheese_10000");e.animations.add("orb",Phaser.Animation.generateFrameNames("pl_cheese_",1e4,10007)),e.play("orb",30,!0),e.scale.set(.7);var f=this.game.add.sprite(61,116,"MenuUI","pl_cheese_10000");f.animations.add("orb",Phaser.Animation.generateFrameNames("pl_cheese_",1e4,10007)),f.play("orb",30,!0),f.scale.set(.6),c.addChild(e),c.addChild(f),c.addChild(d);var g=this.game.add.sprite(-184,97,"MenuUI","pl_cheese_10000");g.animations.add("orb",Phaser.Animation.generateFrameNames("pl_cheese_",1e4,10007)),g.play("orb",30,!0),g.scale.set(.6);var h=this.game.add.sprite(-245,98,"MenuUI","pl_cheese_10000");h.animations.add("orb",Phaser.Animation.generateFrameNames("pl_cheese_",1e4,10007)),h.play("orb",30,!0),h.scale.set(.6),c.addChild(g),c.addChild(h);var i=new a.DBSprite(a.Boot.CHARACTERS,"_DB/hyperFinn");i.setPos(140,170),i.play("win"),i.scale.set(-1.35,1.35),c.addChild(i);var j=new a.DBSprite(a.Boot.CHARACTERS,"_DB/bubblegum_win");j.setPos(-190,170),j.play("idle"),c.addChild(j);var k=new a.DBSprite(a.Boot.CHARACTERS,"_DB/heart_fly");k.setPos(-160,-60),k.play("idle"),c.addChild(k);var l=new a.DBSprite(a.Boot.CHARACTERS,"_DB/heart_fly2");l.setPos(-180,-80),l.play("idle"),c.addChild(l);var m=this.game.add.text(-5,-95,a.Boot.LOCALE.get("complete"),{font:a.Boot.LOCALE.pickUpFont(a.FontType.LIGHT),fontSize:"35px",fontWeight:"bold",fill:"#FFFFFF"});m.anchor.set(.5),c.addChild(m);var n=this.game.add.text(-3,-32,a.Boot.LOCALE.get("complete2"),{font:a.Boot.LOCALE.pickUpFont(a.FontType.LIGHT),fontSize:"20px",fontWeight:"normal",fill:"#FFFFFF"});n.anchor.set(.5),n.wordWrap=!0,n.lineSpacing-=10,n.wordWrapWidth=300,n.align="center",c.addChild(n),c.inputEnabled=!0,c.events.onInputDown.add(function(){i.free(),j.free(),k.free(),l.free(),c.destroy(!0),b._baseGame.free()})},c.prototype.rechangePath=function(){this._iceKing&&this._iceKing.iNeedFindPath()},Object.defineProperty(c.prototype,"levelOrb",{set:function(a){this._levelOrbMax=a},enumerable:!0,configurable:!0}),c.prototype.setScoreArray=function(a){this._currentScoreArray=a},c}(Phaser.Sprite);a.GameUI=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(a,c,d,e,f,g){var h=b.call(this,a,c,d)||this;return h._levelStatus=f,h._levelNumber=e,h._gemCount=g,1==h._levelStatus?(h.createDiscAndPrincess(),h.createOverlay(),h._upOverlay.alpha=.9):2==h._levelStatus?(h.createDiscAndPrincess(),h.createOverlay(),h._upOverlay.alpha=.8):3==h._levelStatus&&(h.createOverlay(),h.createDiscAndPrincess(),3==h._levelStatus&&h.createGem(),h._upOverlay.position.set(-2,11)),h}return __extends(c,b),c.prototype.createOverlay=function(){this._upOverlay=this.game.add.sprite(0,0,"MenuUI","level_select_"+this._levelStatus),this._upOverlay.anchor.set(.5),this.addChild(this._upOverlay),1==this._levelStatus&&(this._levelNumberText=this.game.add.text(0,-5,this._levelNumber.toString(),{font:a.Boot.LOCALE.pickUpFont(a.FontType.MEDIUM),fontSize:"35px",fontWeight:"bold",fill:"#71a2e1",stroke:"#3d466a",strokeThickness:2}),this._levelNumberText.anchor.set(.5),this._upOverlay.addChild(this._levelNumberText))},c.prototype.createDiscAndPrincess=function(){this._disc=this.game.add.sprite(0,0,"MenuUI","gfx.lvl_select_disk0000"),this._disc.anchor.set(.5),this.addChild(this._disc);var a=this._levelNumber-1;this._princess=this.game.add.sprite(-1,-21,"MenuUI",a<10?"princesses_1000"+a:"princesses_100"+a),this._princess.anchor.set(.5),this.addChild(this._princess)},c.prototype.createGem=function(){this._gemCount>0&&(this._gem1=this.game.add.sprite(-27,39,"MenuUI","gfx.lvl_select_gem_1"),this._gem1.anchor.set(.5),this.addChild(this._gem1),this._gemCount>1&&(this._gem2=this.game.add.sprite(0,43,"MenuUI","gfx.lvl_select_gem_2"),this._gem2.anchor.set(.5),this.addChild(this._gem2),this._gemCount>2&&(this._gem3=this.game.add.sprite(28,39,"MenuUI","gfx.lvl_select_gem_3"),this._gem3.anchor.set(.5),this.addChild(this._gem3))))},Object.defineProperty(c.prototype,"levelStatus",{get:function(){return this._levelStatus},enumerable:!0,configurable:!0}),c}(Phaser.Sprite);a.LevelSelectIcon=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(c,d,e,f){var g=b.call(this,c,d,e)||this;return g.anchor.set(.5),g._iceShine=new a.DBSprite(a.Boot.PRINCESSES,"_DB/ice_shine",g.game),g._iceShine.setPos(5,5),g._iceShine.play("idle"),g.addChild(g._iceShine),g._iceShinePoly=new Phaser.Polygon([new Phaser.Point(81.1,41.25),new Phaser.Point(104.2,41.25),new Phaser.Point(127.1,61.1),new Phaser.Point(132.2,79),new Phaser.Point(111.1,120.05),new Phaser.Point(65.1,111.1),new Phaser.Point(54.1,93.1),new Phaser.Point(60.2,66.15)]),g._iceShineGraph=g.game.add.graphics(g._iceShine.x,g._iceShine.y),g._iceShineGraph.beginFill(65280),g._iceShineGraph.drawPolygon(g._iceShinePoly.points),g._iceShineGraph.endFill(),g.addChild(g._iceShineGraph),g._iceShine.getBone("lines").mask=g._iceShineGraph,g._level_select_icon=new a.DBSprite(a.Boot.PRINCESSES,"_DB/level_select_icons",g.game),g._level_select_icon.setPos(0,0),g._level_select_icon.play("lock"),g.addChild(g._level_select_icon),g._level_select_icon.addEvent("frameEvent",g.hitEvent,g),g._level_select_icon.getBone("ice_shine").addChild(g._iceShine),g._iceShineGraph.scale.set(g._level_select_icon.getBone("ice_shine").scale.x,g._level_select_icon.getBone("ice_shine").scale.y),g._iceShineGraph.x-=132,g._iceShineGraph.y-=116,g._currentPrincess=g.game.add.sprite(7,6,"Princesses",f<10?"princesses_1000"+f:"princesses_100"+f),g._level_select_icon.getBone("princesses").addChild(g._currentPrincess),g._gems_reveal=new a.DBSprite(a.Boot.PRINCESSES,"_DB/gems_reveal",g.game),g._gems_reveal.setPos(7,6),g._gems_reveal.play("idle"),g.addChild(g._gems_reveal),g._level_select_icon.getBone("gems").addChild(g._gems_reveal),g}return __extends(c,b),c.prototype.hitEvent=function(b){"sound"==b.name&&a.SoundMixer.playSound("unlock")},c.prototype.setState=function(a,b){var c=this;switch(void 0===b&&(b=1),a){case"changePrincess":this._level_select_icon.play("lock"),this._gems_reveal.play("idle"),this._iceShine.play("idle"),this._currentPrincess.destroy(),this._gems_reveal.visible=!1,this._currentPrincess=this.game.add.sprite(7,6,"Princesses",b<10?"princesses_1000"+b:"princesses_100"+b),this._level_select_icon.getBone("princesses").addChild(this._currentPrincess);break;case"start":this._level_select_icon.play("lock"),this._gems_reveal.play("idle"),this._iceShine.play("action"),this._gems_reveal.visible=!1;break;case"fin":this._gems_reveal.visible=!0,this._gems_reveal.play("idle"),this._iceShine.play("idle"),this._level_select_icon.play("unlockanim"),setTimeout(function(){c._gems_reveal.play("gem"+b)},3e3);break;case"unlock":this._level_select_icon.play("unlock"),this._gems_reveal.play("idle"),this._gems_reveal.visible=!1,this._iceShine.play("action")}},c}(Phaser.Sprite);a.PrincessUI=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(a){var c=b.call(this,a,0,0)||this;return c._currentScore=[],c.anchor.set(.5),c}return __extends(c,b),c.prototype.addScore=function(b,c,d,e){var f=this;void 0===e&&(e=!1);var g=this.game.add.text(b-5,c-10,d,{font:a.Boot.LOCALE.pickUpFont(a.FontType.MEDIUM),fontSize:e?"20px":"25px",fontWeight:"bold",fill:e?"#ff2121":"#ffe52c",stroke:"#403f2e",strokeThickness:2});g.anchor.set(.5),g.alpha=0,this.addChild(g);this.game.add.tween(g).to({alpha:1},100,Phaser.Easing.Linear.None,!0);this.game.add.tween(g).to({y:g.y-50},350,Phaser.Easing.Linear.None,!0).onComplete.addOnce(function(){f.game.add.tween(g).to({alpha:0},250,Phaser.Easing.Linear.None,!0,450).onComplete.addOnce(function(){g.destroy()})})},c}(Phaser.Sprite);a.ScoreInScreen=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(c,d,e,f,g){var h=b.call(this,c,c.world.centerX,-c.world.centerY)||this;return h.anchor.set(.5),h._cbStart=d,h._cbLose=e,h._cbWin=f,h._cbMenu=g,h._start=!0,h._back=h.game.add.sprite(0,0,"IngameUI","ingame_panel0000"),h._back.anchor.set(.5),h.addChild(h._back),h._btnGoToMenu=new a.OButton(h.game,"IngameUI",["btn_exit0000","btn_exit0001","btn_exit0001"],function(){h.goToMenu()}),h._btnGoToMenu.position.set(-207,-157),h._back.addChild(h._btnGoToMenu),h._btnGoToMenu.inputEnabled=!1,h._btnReplay=new a.OButton(h.game,"IngameUI",["btn_replay0000","btn_replay0001","btn_replay0001"],function(){h.restart()}),h._btnReplay.position.set(196,170),h._back.addChild(h._btnReplay),h._btnReplay.visible=!1,h._btnReplay.inputEnabled=!1,h._btnNext=new a.OButton(h.game,"IngameUI",["btn_next0000","btn_next0001","btn_next0001"],function(){h.next()}),h._btnNext.position.set(196,170),h._back.addChild(h._btnNext),h._btnNext.inputEnabled=!1,h._princess=new a.PrincessUI(h.game,-129,-178,a.AbstractGame.CURRENT_LEVEL),h._back.addChild(h._princess),h._banner=h.game.add.sprite(11,26,"IngameUI","start_banner"),h._banner.anchor.set(.5),h._back.addChild(h._banner),h._banner.visible=!1,h._upText=h.game.add.text(11,127,"TEST",{font:a.Boot.LOCALE.pickUpFont(a.FontType.LIGHT),fontSize:"30px",fontWeight:"normal",fill:"#000000"}),h._upText.anchor.set(.5),h._back.addChild(h._upText),h._downText=h.game.add.text(11,81,"TEST",{font:a.Boot.LOCALE.pickUpFont(a.FontType.LIGHT),fontSize:"20px",fontWeight:"normal",fill:"#FFFFFF"}),h._downText.anchor.set(.5),h._back.addChild(h._downText),h._upText.wordWrap=!0,h._upText.lineSpacing-=10,h._upText.wordWrapWidth=300,h._upText.align="center",h._downText.wordWrap=!0,h._downText.lineSpacing-=10,h._downText.wordWrapWidth=300,h._downText.align="center",h}return __extends(c,b),c.prototype.setState=function(b,c){var d=this;switch(void 0===c&&(c=1),b){case"start":this._princess.setState("changePrincess",a.AbstractGame.CURRENT_LEVEL),this._btnReplay.visible=!1,this._btnNext.visible=!0,this._start=!0,this._upText.position.set(11,127),this._upText.fill="#FFFFFF",this._downText.text=a.Boot.LOCALE.get("IntroText"),this._upText.fontWeight="normal",this._downText.position.set(11,85),this._upText.text=a.Boot.LOCALE.get((a.AbstractGame.CURRENT_LEVEL+1).toString()),this._banner.visible=!1;this.game.add.tween(this).to({y:this.game.world.centerY},a.Menu.BOARD_SHOW_TIME,Phaser.Easing.Bounce.Out,!0).onComplete.add(function(){d._btnNext.inputEnabled=!0,d._btnGoToMenu.inputEnabled=!0,d._princess.setState("start")},this);break;case"lose":this._btnReplay.visible=!0,this._btnNext.visible=!1,this._upText.position.set(6,53),this._upText.fill="#000000",this._downText.position.set(5,106),this._upText.text=a.Boot.LOCALE.get("loser"),this._upText.fontWeight="bold",this._downText.text=a.Boot.LOCALE.get("trapped"),this._banner.visible=!0;this.game.add.tween(this).to({y:this.game.world.centerY},a.Menu.BOARD_SHOW_TIME,Phaser.Easing.Bounce.Out,!0).onComplete.add(function(){d._btnReplay.inputEnabled=!0,d._btnGoToMenu.inputEnabled=!0,d._princess.setState("start")},this);break;case"win":this._btnReplay.visible=!1,this._btnNext.visible=!0,this._upText.position.set(11,127),this._upText.fill="#FFFFFF",this._downText.text=a.Boot.LOCALE.get("SavedPrincess"),this._upText.text=a.Boot.LOCALE.get((a.AbstractGame.CURRENT_LEVEL+1).toString()),this._downText.position.set(11,85),this._upText.fontWeight="normal",this._banner.visible=!1;this.game.add.tween(this).to({y:this.game.world.centerY},a.Menu.BOARD_SHOW_TIME,Phaser.Easing.Bounce.Out,!0).onComplete.add(function(){d._btnNext.inputEnabled=!0,d._btnGoToMenu.inputEnabled=!0,d._princess.setState("fin",c)},this)}},c.prototype.goToMenu=function(){var b=this;this._btnNext.inputEnabled=!1,this._btnReplay.inputEnabled=!1,this._btnGoToMenu.inputEnabled=!1,this.game.add.tween(this).to({y:-this.game.world.centerY},a.Menu.BOARD_HIDE_TIME,Phaser.Easing.Linear.None,!0).onComplete.add(function(){b._cbMenu()})},c.prototype.restart=function(){var b=this;this._btnReplay.inputEnabled=!1,this._btnNext.inputEnabled=!1,this._btnGoToMenu.inputEnabled=!1,this.game.add.tween(this).to({y:-this.game.world.centerY},a.Menu.BOARD_HIDE_TIME,Phaser.Easing.Linear.None,!0).onComplete.add(function(){b._cbLose()})},c.prototype.next=function(){var b=this;this._btnNext.inputEnabled=!1,this._btnReplay.inputEnabled=!1,this._btnGoToMenu.inputEnabled=!1,this.game.add.tween(this).to({y:-this.game.world.centerY},a.Menu.BOARD_HIDE_TIME,Phaser.Easing.Linear.None,!0).onComplete.add(function(){b._start?(b._start=!1,b._cbStart()):b._cbWin()})},c}(Phaser.Sprite);a.StartWinLose=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(a){function b(b,c,d){var e=a.call(this,b,c,d)||this;return e.anchor.set(.5),e._glowBg=e.game.add.image(37,4,"IngameUI","swordInd0000"),e.addChild(e._glowBg),e._swordBG=e.game.add.sprite(53,21,"IngameUI","swordBG0000"),e.addChild(e._swordBG),e._swordBGPoly=new Phaser.Polygon([new Phaser.Point(50.7,9.75),new Phaser.Point(94.65,11.8),new Phaser.Point(89.15,4.5),new Phaser.Point(142.15,7.45),new Phaser.Point(138.85,.4),new Phaser.Point(201.25,8.85),new Phaser.Point(197.15,10.1),new Phaser.Point(163.6,11.3),new Phaser.Point(168.2,23.8),new Phaser.Point(113.1,20.75),new Phaser.Point(117.55,31.8),new Phaser.Point(50,30.1)]),e._swordBGGraph=e.game.add.graphics(3,19),e._swordBGGraph.beginFill(65280),e._swordBGGraph.drawPolygon(e._swordBGPoly.points),e._swordBGGraph.endFill(),e.addChild(e._swordBGGraph),e._swordBGReal=e.game.add.graphics(0,0),e._swordBGReal.beginFill(13382502),e._swordBGReal.drawRect(0,0,150.55,40),e._swordBGReal.endFill(),e._swordBGContainer=e.game.add.sprite(54,15,""),e._swordBGContainer.addChild(e._swordBGReal),e._swordBGReal.mask=e._swordBGGraph,e._swordBGContainer.anchor.set(0,0),e.addChild(e._swordBGContainer),e._sword=e.game.add.sprite(2,18,"IngameUI","sword_indicator0000"),e.addChild(e._sword),e._sheen=e.game.add.sprite(56,22,"IngameUI","sheen0000"),e.addChild(e._sheen),e._swordBGContainer.scale.set(0,1),e}return __extends(b,a),b.prototype.setSwordScale=function(a){a<0&&(a=0),a>1&&(a=1),this._glowBg.alpha=a<.53?0:a<.9?a/.9*.6:.6+.4*a,this._swordBGContainer.scale.set(a,1)},b}(Phaser.Sprite);a.SwordIndicator=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(a){function b(b,c,d){var e=a.call(this)||this;return d&&d.world.add(e),e._eventsBounds=null,e._visual=b.buildArmatureDisplay(c),e.addChild(e._visual),e}return __extends(b,a),b.prototype.free=function(){this._eventsBounds&&this._eventsBounds.destroy(!0),this._visual.dispose(!0)},b.prototype.stopInteractive=function(){this._eventsBounds.inputEnabled=!1},b.prototype.addEvent=function(a,b,c){this._visual.addEvent(a,b,c||this)},b.prototype.removeEvent=function(a,b){this._visual.removeEvent(a,b,null)},b.prototype.removeFromParent=function(){this.parent&&this.parent.removeChild(this)},b.prototype.play=function(a,b){if(a!=this._currentLabel||0!=this._playTimes){this._currentLabel=a;var c=this._visual.animation.play(a,b);return this._playTimes=c.playTimes,c}},b.prototype.playEx=function(a,b,c,d){this._nextState=b,this._cb=c,this._cbContex=d||this;var e=this.play(a);return(b||c)&&this.addEvent(1==e.playTimes?"complete":"loopComplete",this.completePlaying),e},b.prototype.completePlaying=function(a){this.removeEvent("complete",this.completePlaying),this.removeEvent("loopComplete",this.completePlaying),a.label=this.currentLabel,"function"==typeof this._cb&&this._cb.bind(this._cbContex)(a),this._nextState?this.playEx(this._nextState,null,this._cb,this._cbContex):this._cb=null},b.prototype.getBone=function(a){return this._visual.armature.getSlot(a).display},b.prototype.getBoneAnimation=function(a){return this._visual.armature.getSlot(a).childArmature.animation},b.prototype.getSprite=function(a){return this._visual.getAt(a)},b.prototype.setPos=function(a,b){this.x=a||this.x,this.y=b||this.y},b.prototype.createBounds=function(a){null!=this._eventsBounds&&(this.removeChild(this._eventsBounds),this._eventsBounds.destroy(!0));var b=this.getBounds();this._eventsBounds=new Phaser.Graphics(a,0,0),this._eventsBounds.beginFill(16711680,0),this._eventsBounds.drawRect(.5*-b.width,.5*-b.height,b.width,b.height),this._eventsBounds.endFill(),this.addChild(this._eventsBounds)},Object.defineProperty(b.prototype,"animation",{get:function(){return this._visual.animation},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"armature",{get:function(){return this._visual._armature},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"sprites",{get:function(){return this._visual.children},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"events",{get:function(){return this._eventsBounds?this._eventsBounds.events:null},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"input",{get:function(){return this._eventsBounds?this._eventsBounds.input:null},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"inputEnabled",{get:function(){return!!this._eventsBounds&&this._eventsBounds.inputEnabled},set:function(a){this._eventsBounds.inputEnabled=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"currentLabel",{get:function(){return this._currentLabel},enumerable:!0,configurable:!0}),b.prototype.update=function(){},b.prototype.postUpdate=function(){},b}(PIXI.DisplayObjectContainer);a.DBSprite=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return __extends(b,a),b.loadFactory=function(a,b,c,d,e){d=d||"_tex",e=e||"_ske",c+=b,a.load.json(b+"textureData",c+d+".json"),a.load.json(b+"dragonBonesData",c+e+".json"),a.load.image(b+"texture",c+d+".png")},b.createFactory=function(a,b){var c=new dragonBones.PhaserFactory(null,a);return c.parseDragonBonesData(a.cache.getJSON(b+"dragonBonesData")),c.parseTextureAtlasData(a.cache.getJSON(b+"textureData"),a.cache.getBaseTexture(b+"texture")),c},b}(Phaser.State);a.Factories=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(a){function b(b){var c=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main() {","vec4 sum = vec4(0);","vec2 texcoord = vTextureCoord;","for(int xx = -4; xx <= 4; xx++) {","for(int yy = -3; yy <= 3; yy++) {","float dist = sqrt(float(xx*xx) + float(yy*yy));","float factor = 0.0;","if (dist == 0.0) {","factor = 2.0;","} else {","factor = 2.0/abs(float(dist));","}","sum += texture2D(uSampler, texcoord + vec2(xx, yy) * 0.002) * factor;","}","}","gl_FragColor = sum * 0.025 + texture2D(uSampler, texcoord);","}"];return a.call(this,b,[],c)||this}return __extends(b,a),b}(Phaser.Filter);a.Glow=b}(TProject||(TProject={}));var TProject;!function(a){var b;!function(a){a[a.LIGHT=0]="LIGHT",a[a.MEDIUM=1]="MEDIUM",a[a.HARD=2]="HARD"}(b=a.FontType||(a.FontType={}));var c=function(){function a(a,b){this._xml=b,this._curLocale=a}return a.prototype.get=function(a){return this._xml.getElementById(a).innerHTML},a.prototype.pickUpFont=function(a){if(void 0===a&&(a=b.MEDIUM),"ar"==this._curLocale)switch(a){case b.LIGHT:return this.getFreeburger(2);default:return this.getFreeburger(4)}else if("ru"==this._curLocale||"bg"==this._curLocale)return a==b.LIGHT?"Fred Fredburger W04 Regular":"Fred Fredburger W04 Bold";switch(a){case b.LIGHT:return this.getFreeburger(1);case b.MEDIUM:return this.getFreeburger(3);default:return"ITC Lubalin Graph W03 D1489630"}},a.prototype.getFreeburger=function(a){switch(a){case 1:return"Fred Fredburger W04 Regular";case 2:return"Fred Fredburger Ara W21 Regula";case 3:return"Fred Fredburger W04 Bold";case 4:return"Fred Fredburger Ara W21 Bold";case 5:return"Fred Fredburger Ara Head W21Bl";case 6:return"Fred FredburgerAraHeadW21Shado";case 7:return"Fred Fredburger W04 Condensed";case 8:return"Fred Fredburger Ara W21 Cond";case 9:return"Fred Fredburger Headline W04Bl";case 10:return"FredFredburgerHeadlineW04Shado"}},Object.defineProperty(a.prototype,"currentLocale",{get:function(){return this._curLocale},enumerable:!0,configurable:!0}),a}();a.LanguageManager=c}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(a,c,d,e){void 0===e&&(e=null);var f=this,g=null,h=null,i=null;return d.length>0&&(g=d[0],d.length>1?(h=d[1],i=d.length>2?d[2]:d[0]):(h=d[0],i=d[0])),f=b.call(this,a,0,0,c,null,null,h,g,i,null)||this,f._framesString=[g,h,i],f.soundOver="over",f.soundDown="click",f.anchor.setTo(.5),f._cb=e,f._deltaScale=.1,f._defaultScale=1,f._isDown=!1,f._isOver=!1,f.onInputOver.add(f.over,f),f.onInputOut.add(f.out,f),f.onInputDown.add(f.down,f),f.onInputUp.add(f.up,f),f}return __extends(c,b),c.prototype.setCBContext=function(a){this._cntxt=a},c.prototype.setAnimationScale=function(a,b){void 0===a&&(a=0),void 0===b&&(b=1),this._deltaScale=a,this._defaultScale=b},c.prototype.setNewFrames=function(a){var b=null,c=null,d=null;a.length>0&&(b=a[0],a.length>1?(c=a[1],d=a.length>2?a[2]:a[0]):(c=a[0],d=a[0])),this._framesString=[b,c,d],this.setFrames(c,b,d)},c.prototype.over=function(){this._isDown,a.SoundMixer.playSound("buttonOver"),this._isOver=!0},c.prototype.out=function(){this._isDown||this.scale.set(this._defaultScale),this._isOver=!1},c.prototype.up=function(){var b=this;if(this._isDown){this.scale.set(this._defaultScale);var c=this.game.device.desktop?this._isOver:this.input.pointerOver();this._isOver?this.frameName=this._framesString[1]:c&&setTimeout(function(){b.frameName=b._framesString[0]},5),this._isDown=!1,c&&null!=this._cb?(a.SoundMixer.playSound("button"),this._cntxt?this._cb.bind(this._cntxt)():this._cb(),this.frameName=this._framesString[0]):0==c&&this.scale.set(this._defaultScale)}},c.prototype.down=function(){this._isDown||(this.scale.set(this._defaultScale-this._deltaScale),this._isDown=!0)},c.prototype.deleteFromParent=function(){this.parent&&this.parent.removeChild(this),this.onInputOver.remove(this.over,this),this.onInputOut.remove(this.out,this),this.onInputDown.remove(this.down,this),this.onInputUp.remove(this.up,this)},Object.defineProperty(c.prototype,"enabled",{set:function(a){var b=this;this.inputEnabled=a,a||setTimeout(function(){b.frameName=b._framesString[0],b.scale.set(b._defaultScale)},5)},enumerable:!0,configurable:!0}),c}(Phaser.Button);a.OButton=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(a,c,d,e,f){void 0===f&&(f=0);var g=b.call(this,a,c,d)||this;return g._endPoint=e,g._lightningBitmap=null,g._lightning=null,g._childs=f,g.generateBitmap(),g}return __extends(c,b),c.prototype.generateBitmap=function(){var a=this._endPoint.x,b=this._endPoint.y,c=320,d=b-c,e=a-35,f=Math.sqrt(e*e+d*d),g=Math.atan2(e,-d);Math.abs(g-Math.PI/2)<.1&&(c+=100,d=b-c,f=Math.sqrt(e*e+d*d),g=Math.atan2(e,-d));var h=Math.abs(f*Math.cos(g)),i=Math.abs(f*Math.sin(g));0==this._childs&&(this.rotation=g),this.lightningBimap=this.game.add.bitmapData(h+15,i+15)},Object.defineProperty(c.prototype,"lightningBimap",{set:function(b){if(null!=this._lightning)throw"Bitmap data already exists";this._lightningBitmap=b,this._lightning=this.game.add.image(0,0,this._lightningBitmap),this.addChild(this._lightning),0==this._childs&&(this._lightning.filters=[new a.Glow(this.game)]),this._lightning.anchor.set(.5,0)},enumerable:!0,configurable:!0}),c.prototype.zap=function(a,b){var d=this;this.createLightningTexture(this._lightningBitmap.width/2,0,20,3,!1),this._lightning.alpha=1;var e=this.game.add.tween(this._lightning).to({alpha:.5},100,Phaser.Easing.Bounce.Out).to({alpha:1},100,Phaser.Easing.Bounce.Out);e.start(),this._childs<4&&e.onComplete.add(function(){var e=new c(d.game,0,0,d._endPoint,d._childs+1);d.addChild(e),e.zap(a,b)},this);var f=this.game.add.tween(this._lightning).to({alpha:.5},100,Phaser.Easing.Bounce.Out).to({alpha:1},100,Phaser.Easing.Bounce.Out).to({alpha:0},250,Phaser.Easing.Bounce.Out);4==this._childs&&a&&e.onComplete.add(a,b),e.chain(f)},c.prototype.createLightningTexture=function(a,b,c,d,e){var f=this._lightningBitmap.context,g=this._lightningBitmap.width,h=this._lightningBitmap.height;e||f.clearRect(0,0,g,h);for(var i=0;i<c&&(f.strokeStyle="rgb(251, 211, 227)",f.lineWidth=d,f.beginPath(),f.moveTo(a,b),e?(a+=this.game.rnd.integerInRange(-10,10),b+=this.game.rnd.integerInRange(10,20)):(a+=this.game.rnd.integerInRange(-10,10),b+=this.game.rnd.integerInRange(20,h/c)),a<10&&(a=10),a>g-10&&(a=g-10),(!e&&i==c-1||b>h)&&(b=h),f.lineTo(a,b),f.stroke(),!(b>=h));i++)e||Phaser.Utils.chanceRoll(20)&&this.createLightningTexture(a,b,10,1,!0),this._lightningBitmap.dirty=!0},c}(Phaser.Sprite);a.Zap=b}(TProject||(TProject={}));var TProject;!function(a){var b=function(){function a(){}return a}();b.CURRENT_STATE="Menu",a.LocalConfig=b}(TProject||(TProject={}));var TProject;!function(a){var b=function(){function b(){this.game=new Phaser.Game(750,500,Phaser.AUTO,"game_container",null,!1),this.game.state.add("PreBoot",a.PreBoot,!0),this.game.state.add("Boot",a.Boot),this.game.state.add("Preloader",a.Preloader),this.game.state.add("BaseGame",a.BaseGame),this.game.state.add("Menu",a.Menu)}return b.gotoFunction=function(a){var b=window[a];"function"==typeof b&&b()},b}();b.DEBUG=!0,a.Main=b}(TProject||(TProject={})),window.onload=function(){new TProject.Main;setTimeout("window.scrollTo(0, 1)",10),document.body.addEventListener("touchmove",function(a){a.preventDefault()},!1)};var __extends=this&&this.__extends||function(){
var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b;!function(a){a[a.ALPHA_CHANGIN=0]="ALPHA_CHANGIN",a[a.POST_ALPHA_CHANGING=1]="POST_ALPHA_CHANGING",a[a.PLAYER_WON=2]="PLAYER_WON",a[a.POST_WIN=3]="POST_WIN",a[a.PLAYER_LOST=4]="PLAYER_LOST",a[a.PLAYER_LOST_TIMEOUT=5]="PLAYER_LOST_TIMEOUT",a[a.GAME_RUNNING=6]="GAME_RUNNING"}(b||(b={}));var c=function(c){function d(){return null!==c&&c.apply(this,arguments)||this}return __extends(d,c),d.prototype.create=function(){var d=this;c.prototype.create.call(this),this._worldModel=new a.WorldModel,this._conainer=this.game.add.sprite(0,0),this._entitiesContainer=new a.ZSprite(this.game),this._pinguins=new Array(2),this._grid=new a.Grid(this.game),this._gameUI=new a.GameUI(this.game,this),this._gameUI.init(),this._currentLevel=this._worldModel.getLevel(a.AbstractGame.CURRENT_LEVEL),this._grid.init(this._gameUI),this._player=new a.Player(this.game,this._currentLevel.playerPosition.x,this._currentLevel.playerPosition.y,this._grid,this._gameUI),this._entitiesContainer.addChild(this._player),this._iceKing=new a.IceKing(this.game,4,6,this._grid,this._gameUI),this._iceKing.setStupid(3),this._entitiesContainer.addChild(this._iceKing),this._gameBG=new a.BackGround(this.game,this.world.centerX,0,1),this.world.addChild(this._gameBG),this._pinguins[0]=new a.Pinguin(this.game,0,0,this._grid,this._gameUI),this._pinguins[1]=new a.Pinguin(this.game,0,0,this._grid,this._gameUI),this._entitiesContainer.addChild(this._pinguins[0]),this._entitiesContainer.addChild(this._pinguins[1]),this.world.addChild(this._conainer),this._conainer.addChild(this._grid),this._conainer.addChild(this._entitiesContainer),this.world.addChild(this._gameUI),this._princess=new a.DBSprite(a.Boot.PRINCESSES,"_DB/mc.Ice cube game"),this._conainer.addChild(this._princess),this._currentPrincess=this.game.add.sprite(-72,-173,"IngameUI","princessFull_10000"),this._princess.getBone("princess").addChild(this._currentPrincess),this._princess.setPos(60,this.game.world.height-170),this._conainer.alpha=0,this.isPaused=!0,this.loadLevel(!0),this._levelState=b.ALPHA_CHANGIN,this._gameBG.gotoLevel(a.AbstractGame.CURRENT_LEVEL+1),this._gameUI.showLevelStartMenu(),a.SoundMixer.setAudioForState(1);var e="btn_mute0003",f="btn_mute0002";a.SavedData.sfx&&(e="btn_mute0001",f="btn_mute0000"),this._volumeBtn=new a.OButton(this.game,"IngameUI",[e,f,f],function(){a.SavedData.sfx=!a.SavedData.sfx,a.SavedData.save(),a.SavedData.sfx?(d._volumeBtn.setFrames("btn_mute0000","btn_mute0001","btn_mute0000"),a.SoundMixer.on()):(a.SoundMixer.off(),d._volumeBtn.setFrames("btn_mute0002","btn_mute0003","btn_mute0002"))}),this._volumeBtn.position.set(687,40),this.stage.addChild(this._volumeBtn)},d.prototype.zap=function(){var c=this,d=this._player.x-10,e=this._player.y-220*this._player.scale.y;this._player.isFlipped&&(d+=33*this._player.scale.x),a.SoundMixer.playSound("sword");var f=new a.Zap(this.game,d,e,new Phaser.Point(d,e));this.world.addChild(f),f.zap(function(){a.SoundMixer.playSound("iceBreakWin"),c._princess.playEx("smash",null,function(a){"smash"==a.label&&(c._player.gameWinAnimation(),c._levelState=b.POST_WIN)}),c._timer=700,a.SoundMixer.stopSound("sword")},this)},d.prototype.hideEntities=function(){this._player.alpha=0,this._iceKing.alpha=0,this._pinguins.forEach(function(a){return a.alpha=0})},d.prototype.showEntities=function(){var a=this,c=this._player.y;this._player.y-=20,this._player.alpha=0,this._player.visible=!0,this.game.add.tween(this._player).to({y:c},500,Phaser.Easing.Bounce.Out,!0).onComplete.add(function(){a._levelState=b.POST_ALPHA_CHANGING,a._timer=300}),this.game.add.tween(this._player).to({alpha:1},500,Phaser.Easing.Linear.None,!0),c=this._iceKing.y,this._iceKing.y-=20,this.game.add.tween(this._iceKing).to({y:c},500,Phaser.Easing.Bounce.Out,!0),this.game.add.tween(this._iceKing).to({alpha:1},500,Phaser.Easing.Linear.None,!0),this._pinguins.forEach(function(b){var c=b.y;b.y-=20,a.game.add.tween(b).to({y:c},500,Phaser.Easing.Bounce.Out,!0),a.game.add.tween(b).to({alpha:1},500,Phaser.Easing.Linear.None,!0)})},d.prototype.loadLevel=function(c){if(void 0===c&&(c=!1),this._gameWinWasCalled=!1,this._princess.play("idle"),this._grid.alpha=1,this._levelState=b.ALPHA_CHANGIN,this._currentLevel=this._worldModel.getLevel(a.AbstractGame.CURRENT_LEVEL),c?this._grid.load(this._currentLevel.grid,this._currentLevel.gridPowerUps):this._grid.load(this._currentLevel.grid,this._currentLevel.gridPowerUps,this.showEntities.bind(this)),this._player.myreset(this._currentLevel.playerPosition,this._grid,this._gameUI),this._entitiesContainer.addChild(this._player),this._currentLevel.enemy1.name===a.WorldModel.KING){var d=this._currentLevel.enemy1;this._iceKing.visible=!0,this._iceKing.myreset(d.position,this._grid,this._gameUI),this._iceKing.setStupid(d.stupid)}else this._iceKing.visible=!1;if(this._currentLevel.enemy2.name==a.WorldModel.PINGUIN){var d=this._currentLevel.enemy2;this._pinguins[0].visible=!0,this._pinguins[0].myreset(d.position,this._grid,this._gameUI),this._pinguins[0].setStupid(d.stupid)}else this._pinguins[0].visible=!1;if(this._currentLevel.enemy3.name==a.WorldModel.PINGUIN){var d=this._currentLevel.enemy3;this._pinguins[1].visible=!0,this._pinguins[1].myreset(d.position,this._grid,this._gameUI),this._pinguins[1].setStupid(d.stupid)}else this._pinguins[1].visible=!1;this._gameUI.player=this._player,this._gameUI.setEnemy(this._iceKing,this._pinguins[0],this._pinguins[1]),this._gameUI.setScoreArray(this._currentLevel.scoreArray),this.isPaused=!1;var e="";a.AbstractGame.CURRENT_LEVEL<10&&(e="0"),e+=a.AbstractGame.CURRENT_LEVEL.toString(),this._currentPrincess.loadTexture("IngameUI","princessFull_100"+e)},d.prototype.hide=function(){var a=this,b=this.game.add.tween(this._conainer).to({alpha:0},1e3,Phaser.Easing.Linear.None);b.onComplete.add(function(){a._grid.hide(),a.hideEntities()}),b.start()},d.prototype.simpleShowConrainer=function(){var a=this;this.game.add.tween(this._conainer).to({alpha:1},500,Phaser.Easing.Linear.None,!0).onComplete.add(function(){a._levelState=b.POST_ALPHA_CHANGING,a.showMobilePAD()},this)},d.prototype.restartLevel=function(){this.hideEntities(),this._grid.alpha=0,this._gameUI.init(),this._grid.clear(),this.loadLevel(),this.isPaused=!1,this.showMobilePAD()},d.prototype.newLevel=function(){this.isPaused=!0,this._grid.hide(),this._conainer.alpha=0,this._gameUI.init(),this._grid.clear(),this._levelState=b.ALPHA_CHANGIN,a.AbstractGame.CURRENT_LEVEL++,a.AbstractGame.CURRENT_LEVEL<20?(this.loadLevel(!0),this._princess.alpha=1,this._gameBG.gotoLevel(a.AbstractGame.CURRENT_LEVEL+1),this._gameUI.dropForNextLevel(),this._gameUI.showLevelStartMenu()):this._gameUI.showGameWinMenu()},d.prototype.playerLost=function(){this._levelState!=b.PLAYER_LOST_TIMEOUT&&(this._levelState=b.PLAYER_LOST)},d.prototype.playerWon=function(){this._levelState=b.PLAYER_WON},d.prototype.update=function(){switch(this.game.device.desktop&&this._gameBG.riplesUpdate(),this._levelState){case b.ALPHA_CHANGIN:break;case b.POST_ALPHA_CHANGING:this._timer>0?this._timer-=this.game.time.elapsed:(this.isPaused=!1,this._levelState=b.GAME_RUNNING);case b.GAME_RUNNING:this.isPaused||(a.AbstractGame.keysPressed[Phaser.Keyboard.LEFT]?this._player.gotoHorizont(-1,600):a.AbstractGame.keysPressed[Phaser.Keyboard.RIGHT]?this._player.gotoHorizont(1,600):a.AbstractGame.keysPressed[Phaser.Keyboard.UP]?this._player.gotoVertical(-1,600):a.AbstractGame.keysPressed[Phaser.Keyboard.DOWN]&&this._player.gotoVertical(1,600),this._iceKing.visible&&this._iceKing.goto(this._player.cx,this._player.cy),this._pinguins.forEach(function(a){a.visible&&a.gotoRandom()}),c.prototype.update.call(this),this._grid.timerUpdate());break;case b.PLAYER_LOST:c.prototype.update.call(this),this.isPaused||(this.isPaused=!0,this._timer=1e3,this._levelState=b.PLAYER_LOST_TIMEOUT);break;case b.PLAYER_LOST_TIMEOUT:this._timer>0?this._timer-=this.game.time.elapsedMS:(this._gameUI.showLevelLoseMenu(),this._levelState=b.ALPHA_CHANGIN);break;case b.PLAYER_WON:c.prototype.update.call(this),this.isPaused||(this._player.gameWin(this.zap.bind(this)),this._iceKing.visible&&this._iceKing.lose(),this._pinguins.forEach(function(a){a.visible&&a.lose()})),this.isPaused=!0;break;case b.POST_WIN:this._timer>0?this._timer-=this.game.time.elapsedMS:this._gameWinWasCalled||(this._gameUI.showLevelWinMenu(),this._gameWinWasCalled=!0)}this._iceKing.lineUpdate(),this._pinguins.forEach(function(a){return a.lineUpdate()})},d.prototype.free=function(){this._player.free(),this._iceKing.free(),this._pinguins.forEach(function(a){return a.free()}),this._princess.free(),this._grid.clear(),this._grid.destroy(!0),this._entitiesContainer.destroy(!0),this._conainer.destroy(!0),this._gameUI.destroy(!0),this._gameBG.destroy(!0),this._volumeBtn.destroy(!0)},d}(a.AbstractGame);a.BaseGame=c}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(){var a=null!==b&&b.apply(this,arguments)||this;return a._loadedAssets=!1,a}return __extends(c,b),c.prototype.preload=function(){this.game.load.onFileComplete.add(this.loadingUpdate,this),a.SavedData.load(),this._curLocale="en","string"==typeof window.LOCALE&&(this._curLocale=window.LOCALE),this.game.load.image("cn_logo",c.PATH_IMAGES+"Preloader/cnlogo.jpg"),this.game.load.atlas("preload",c.PATH_IMAGES+"Preloader/Preloader.png",c.PATH_IMAGES+"Preloader/Preloader.json"),this.game.load.xml("locale",c.PATH_LOCALE+this._curLocale+"/locale.xml")},c.prototype.create=function(){this.enabledMultitouch(!0),this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.scale.fullScreenScaleMode=Phaser.ScaleManager.SHOW_ALL,this.LOCK(),this.game.scale.pageAlignHorizontally=!0,this.game.scale.pageAlignVertically=!0,this.game.scale.refresh(),this.game.input.touch.preventDefault=!1,this.game.device.desktop?this.game.input.mouse.enabled=!0:this.game.input.mouse.enabled=!1,this.game.stage.disableVisibilityChange=!0,this.game.stage.backgroundColor=0},c.prototype.loadingUpdate=function(b,d,e,f,g){b>=100&&(this.game.load.onFileComplete.removeAll(),c.LOCALE=new a.LanguageManager(this._curLocale,this.game.cache.getXML("locale")),this._loadedAssets=!0)},c.prototype.update=function(){this._loadedAssets&&c.CAN_START&&(this._loadedAssets=!1,this.game.state.start("Preloader",!0))},c.prototype.enabledMultitouch=function(a){a?(this.game.input.maxPointers=2,this.game.input.addPointer(),this.game.input.addPointer()):this.game.input.maxPointers=1},c.prototype.LOCK=function(){var a=this;c.CAN_START=this.game.scale.isLandscape,this.game.scale.forceOrientation(!0,!1),this.game.scale.enterIncorrectOrientation.add(function(){a.enterIncorrectOrientation()},this),this.game.scale.leaveIncorrectOrientation.add(function(){a.game.world.removeChild(c.LOCK_SCREN),c.CAN_START=!0},this)},c.prototype.enterIncorrectOrientation=function(){var a,b=this;null==c.LOCK_SCREN&&(c.LOCK_SCREN=this.game.make.graphics(0,0),c.LOCK_SCREN.beginFill(2169377),c.LOCK_SCREN.drawRect(0,0,5e4,5e4),c.LOCK_SCREN.endFill(),a=this.game.make.image(this.game.world.centerX,this.game.world.centerY,"lockOrientation"),a.anchor.set(.5),a.alpha=0,setTimeout(function(){b.game.add.tween(a).to({alpha:1},300,Phaser.Easing.Linear.None,!0),a.scale.set(.5/b.game.scale.scaleFactor.y,.5/b.game.scale.scaleFactor.x)},800),c.LOCK_SCREN.addChild(a)),this.game.world.addChild(c.LOCK_SCREN),c.CAN_START=!1},c}(Phaser.State);b.PATH_IMAGES="./assets/images/",b.PATH_FONTS="./assets/fonts/",b.PATH_LOCALE="./assets/localStrings/",b.CAN_START=!1,a.Boot=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return __extends(c,b),c.prototype.create=function(){var c=this;b.prototype.create.call(this),this._overButton=!1,this._backGround=new a.BackGround(this.game,this.world.centerX,0,1),this.world.addChild(this._backGround),this._bgMainmenuFore=this.game.add.sprite(6,7,"MenuUI","menu_fore0000"),this._menuOrbs=[],this._menuOrbs.push(this.game.add.sprite(337,287,"MenuUI","pl_cheese_10000")),this._menuOrbs[0].scale.set(.8),this._menuOrbs[0].animations.add("orb",Phaser.Animation.generateFrameNames("pl_cheese_",1e4,10007)),this._menuOrbs.push(this.game.add.sprite(557,313,"MenuUI","pl_cheese_10000")),this._menuOrbs[1].animations.add("orb",Phaser.Animation.generateFrameNames("pl_cheese_",1e4,10007)),this._menuOrbs.forEach(function(a){c._bgMainmenuFore.addChild(a),a.play("orb",30,!0)}),this._playBtn=this.game.add.sprite(37,10,"MenuUI","btn_play0000"),this._playBtn.anchor.set(1,.5),this._playBtn.inputEnabled=!0,this._playBtn.events.onInputOver.add(function(){c._playBtn.loadTexture("MenuUI","btn_play0001"),a.SoundMixer.playSound("buttonOver"),c._overButton=!0},this),this._playBtn.events.onInputOut.add(function(){c._overButton=!1,c._playBtn.loadTexture("MenuUI","btn_play0000")}),this._playBtn.events.onInputUp.add(function(){c._overButton&&(a.SoundMixer.playSound("button"),c.showLevelMenu())},this),this._playBtnText=this.game.add.text(-60,-3,a.Boot.LOCALE.get("play"),{font:a.Boot.LOCALE.pickUpFont(a.FontType.LIGHT),fontSize:"30px",fontWeight:"bold",fill:"#ffffff",stroke:"#eb991d",strokeThickness:2}),this._playBtnText.anchor.set(1,.5),this._playBtn.addChild(this._playBtnText),this._instractionBtn=this.game.add.sprite(37,10,"MenuUI","btn_instructions0000"),this._instractionBtn.anchor.set(1,.5),this._instractionBtn.inputEnabled=!0,this._instractionBtn.events.onInputOver.add(function(){c._instractionBtn.loadTexture("MenuUI","btn_instructions0001"),c._overButton=!0,a.SoundMixer.playSound("buttonOver")},this),this._instractionBtn.events.onInputOut.add(function(){c._instractionBtn.loadTexture("MenuUI","btn_instructions0000"),c._overButton=!1},this),this._instractionBtn.events.onInputUp.add(function(){c._overButton&&(a.SoundMixer.playSound("button"),c.showInstructionsMenu())},this),this._instractionBtnText=this.game.add.text(-60,-3,a.Boot.LOCALE.get("instructions"),{font:a.Boot.LOCALE.pickUpFont(a.FontType.LIGHT),fontSize:"25px",fontWeight:"bold",fill:"#ffffff",stroke:"#eb991d",strokeThickness:2}),this._instractionBtnText.anchor.set(1,.5),this._instractionBtn.addChild(this._instractionBtnText),this._titleImage=this.game.add.sprite(0,0,"Title"),this.game.stage.backgroundColor=12582847,this._menu=new a.DBSprite(a.Boot.MENU_UI,"_DB/main_menu",this.game),this._menu.getBone("bg_mainmenu_fore").addChild(this._bgMainmenuFore),this._menu.getBone("play btn").addChild(this._playBtn),this._menu.getBone("instructions btn").addChild(this._instractionBtn),this._menu.getBone("title").addChild(this._titleImage),this._menu.play("idle"),this._menu.setPos(0,0),this.world.addChild(this._menu),this._linesAnimations=[],this._boardHeaderTextStyle={font:a.Boot.LOCALE.pickUpFont(a.FontType.MEDIUM),fill:"#ce3436",align:"center",fontSize:"22px",stroke:"#7b0714",strokeThickness:2},this._normalTextStyle={font:a.Boot.LOCALE.pickUpFont(a.FontType.LIGHT),fill:"#8c8670",align:"center",fontSize:"14px"},this.changeCursorStyleEvents(this._instractionBtn),this.changeCursorStyleEvents(this._playBtn),this.initLevelMenu(),this.initInructionsMenu(),a.SoundMixer.setAudioForState(0);var d="btn_mute0003",e="btn_mute0002";a.SavedData.sfx&&(d="btn_mute0001",e="btn_mute0000"),this._volumeBtn=new a.OButton(this.game,"IngameUI",[d,e,e],function(){a.SavedData.sfx=!a.SavedData.sfx,a.SavedData.save(),a.SavedData.sfx?(c._volumeBtn.setFrames("btn_mute0000","btn_mute0001","btn_mute0000"),a.SoundMixer.on()):(a.SoundMixer.off(),c._volumeBtn.setFrames("btn_mute0002","btn_mute0003","btn_mute0002"))}),this._volumeBtn.position.set(687,40),this.world.addChild(this._volumeBtn)},c.prototype.initInstructionSprites=function(){var b=this;this._finnSprite=new a.DBSprite(a.Boot.CHARACTERS,"_DB/hyperFinn"),this._finnSprite.setPos(-220,-25),this._finnSprite.scale.set(.75,.75),this._finnSprite.play("down_idle"),this._instructionsBoard.addChild(this._finnSprite);var c=new a.DBSprite(a.Boot.CHARACTERS,"_DB/hyperGunter");c.setPos(-130,165),c.scale.set(.75,.75),c.play("down_idle"),this._instructionsBoard.addChild(c);var d=new a.DBSprite(a.Boot.CHARACTERS,"_DB/hyperIceking");d.setPos(-225,165),d.scale.set(.6,.6),d.play("down_idle"),this._instructionsBoard.addChild(d);var e=this.game.add.sprite(-100,195,"Objects","platform_base_10000");e.anchor.set(0,1),e.scale.set(.7),this._instructionsBoard.addChild(e);var f=this.game.add.sprite(e.width/2+10,-e.height-40,"Objects","platform_firepit.png");f.addChild(this.getFlame(5,10-f.height,.34)),f.addChild(this.getFlame(20,20-f.height,.34)),f.addChild(this.getFlame(40,10-f.height,.34)),e.addChild(f),e=this.game.add.sprite(40,195,"Objects","platform_base_10000"),e.anchor.set(0,1),e.scale.set(.7);var g=this.game.add.sprite(72,-125,"Objects","platform_hot_plate_switch_10000");this._buttonAnimation=g.animations.add("flame",Phaser.Animation.generateFrameNames("platform_hot_plate_switch_",1e4,10003)),this._buttonAnimation.play(4,!1),e.addChild(g),this._instructionsBoard.addChild(e),this._iceKingOnSpikes=new a.DBSprite(a.Boot.CHARACTERS,"_DB/hyperIceking"),this._iceKingOnSpikes.setPos(100,-140),this._iceKingOnSpikes.scale.set(.8,.8),this.setLinesOnIceking(),e=this.game.add.sprite(170,195,"Objects","platform_base_10000"),e.anchor.set(0,1),e.scale.set(.7);var h=this.game.add.sprite(70,-170,"Objects","pl_spikes_10000");this._spikesAnimation=h.animations.add("spike",Phaser.Animation.generateFrameNames("pl_spikes_",1e4,10008)),this._animationsCounter=0,this._buttonAnimation.onComplete.add(function(){b._spikesAnimation.play(60)},this),this._spikesAnimation.onComplete.add(function(){b._spikesAnimation.reverse(),b._animationsCounter=(b._animationsCounter+1)%2,0==b._animationsCounter?b._buttonAnimation.play(6):(b._iceKingOnSpikes.play("burn"),b._spikesAnimation.play(60))},this),e.addChild(h),e.addChild(this._iceKingOnSpikes),this._iceKingOnSpikes.play("down_idle",0),this._instructionsBoard.addChild(e),e=this.game.add.sprite(71,24,"Objects","platform_base_10000"),e.anchor.set(0,1),e.scale.set(.7),this._instructionsBoard.addChild(e),f=this.game.add.sprite(e.width/2+10,-e.height-40,"Objects","platform_firepit.png"),f.addChild(this.getFlame(5,10-f.height,.34)),f.addChild(this.getFlame(20,20-f.height,.34)),f.addChild(this.getFlame(40,10-f.height,.34)),e.addChild(f),e=this.game.add.sprite(-141,24,"Objects","platform_base_10000"),e.anchor.set(0,1),e.scale.set(.7),this._instructionsBoard.addChild(e);var i=this.game.add.sprite(81,-147,"Objects","pl_cheese_10000");i.animations.add("orb",Phaser.Animation.generateFrameNames("pl_cheese_",1e4,10007)),i.play("orb",24,!0),e.addChild(i),e=this.game.add.sprite(-46,24,"Objects","platform_base_10000"),e.anchor.set(0,1),e.scale.set(.7),this._instructionsBoard.addChild(e);var j=this.game.add.sprite(72,-148,"Objects","pl_sausage_10065");j.animations.add("coin",Phaser.Animation.generateFrameNames("pl_sausage_",1e4,10065)),j.play("coin",24,!0),e.addChild(j)},c.prototype.setLinesOnIceking=function(){var a=this;this._iceKingOnSpikes.addEvent("frameEvent",function(b){"hit"==b.name&&a._linesAnimations.forEach(function(a){return a.play(30,!0)})},this);for(var b=1;b<=7;b++){var c=this.game.add.sprite(0,0,"Objects","fx_line_10000");c.anchor.set(.5,.8);var d=c.animations.add("line",Phaser.Animation.generateFrameNames("fx_line_",1e4,10007));this._iceKingOnSpikes.getBone("fx"+b).addChild(c),this._linesAnimations.push(d)}},c.prototype.getFlame=function(a,b,c){var d=this.game.add.sprite(a,b,"Objects","flambit_baby_10004");return d.animations.add("flame",Phaser.Animation.generateFrameNames("flambit_baby_",10004,10009)),d.animations.play("flame",24,!0),d.scale.set(c),d},c.prototype.initInructionsMenu=function(){var b=this;this._instructionsBoard=this.game.add.sprite(this.game.world.centerX,this.game.world.centerY,"MenuUI","Instruction Menu0000"),this._instructionsBoard.anchor.set(.5),this.world.addChild(this._instructionsBoard),this._instructionsBoard.visible=!1,this._continueBtn=this.game.add.sprite(0,this._instructionsBoard.height/2,"MenuUI","btn_close0000"),this._continueBtn.anchor.set(.5,.6),this._instructionsBoard.addChild(this._continueBtn),this._continueBtn.events.onInputOver.add(function(){a.SoundMixer.playSound("buttonOver"),b._overButton=!0,b._continueBtn.loadTexture("MenuUI","btn_close0001")},this),this._continueBtn.events.onInputOut.add(function(){b._overButton=!1,b._continueBtn.loadTexture("MenuUI","btn_close0000")},this),this._continueBtn.events.onInputUp.add(function(){b._overButton&&(a.SoundMixer.playSound("button"),b.hideInstructionsMenu())},this),this.changeCursorStyleEvents(this._continueBtn);var c=this.game.add.text(0,-10,a.Boot.LOCALE.get("continueText"),{font:a.Boot.LOCALE.pickUpFont(a.FontType.MEDIUM),fill:"#ffffff",align:"center",fontSize:"26px"});c.anchor.set(.5),c.scale.set(.9),this._continueBtn.addChild(c);var d=this.game.add.text(0,-190,a.Boot.LOCALE.get("instructions"),this._boardHeaderTextStyle);d.anchor.set(.5,0),d.scale.set(.9),this._instructionsBoard.addChild(d),d=this.game.add.text(-130,-110,a.Boot.LOCALE.get("inst1"),this._normalTextStyle),d.wordWrap=!0,d.lineSpacing-=10,d.wordWrapWidth=200,d.align="right",this._instructionsBoard.addChild(d),d=this.game.add.text(130,-110,a.Boot.LOCALE.get("inst2"),this._normalTextStyle),d.lineSpacing-=10,d.wordWrap=!0,"bg"==a.Boot.LOCALE.currentLocale?(d.wordWrapWidth=160,d.x-=10):d.wordWrapWidth=150,d.align="right",this._instructionsBoard.addChild(d),d=this.game.add.text(-200,45,a.Boot.LOCALE.get("inst3"),this._normalTextStyle),d.lineSpacing-=10,d.wordWrap=!0,d.wordWrapWidth=230,d.align="right",this._instructionsBoard.addChild(d),d=this.game.add.text(85,45,a.Boot.LOCALE.get("inst4"),this._normalTextStyle),d.lineSpacing-=10,d.wordWrap=!0,d.wordWrapWidth=100,d.align="left","bg"==a.Boot.LOCALE.currentLocale&&(d.x-=8),this._instructionsBoard.addChild(d),this.initInstructionSprites()},c.prototype.showInstructionsMenu=function(){var a=this;this.game.canvas.style.cursor="default",this.disableButtons(),this.game.add.tween(this._menu).to({alpha:0},c.MAIN_MENU_HIDE_TIME,Phaser.Easing.Linear.None,!0).onComplete.add(function(){a._instructionsBoard.y=-a._instructionsBoard.height,a._instructionsBoard.visible=!0,a.game.add.tween(a._instructionsBoard).to({y:a.game.world.centerY-15},c.BOARD_SHOW_TIME,Phaser.Easing.Bounce.Out,!0).onComplete.add(function(){a._continueBtn.inputEnabled=!0},a)})},c.prototype.hideInstructionsMenu=function(){var a=this;this.game.canvas.style.cursor="default",this._continueBtn.inputEnabled=!1,this._overButton=!1,this._continueBtn.loadTexture("MenuUI","btn_close0000"),this.game.add.tween(this._instructionsBoard).to({y:-this.game.world.centerY},c.BOARD_HIDE_TIME,Phaser.Easing.Linear.None,!0).onComplete.add(function(){a._instructionsBoard.visible=!1,a._menu.alpha=1,a._menu.play("idle"),a.enableMenuButtonds()})},c.prototype.initLevelMenu=function(){var b=this;this._downButton=!1,this._levelSelectBack=this.game.add.sprite(this.world.centerX,-this.world.centerY,"MenuUI","Level select0000"),this._levelSelectBack.anchor.set(.5),this._menuContainer=this.game.add.sprite(-this._levelSelectBack.width/2,-this._levelSelectBack.height/2),this._exitBtn=this.game.add.sprite(20,95,"IngameUI","btn_exit0000"),this._exitBtn.anchor.set(.5,1),this._exitBtn.events.onInputOver.add(function(){a.SoundMixer.playSound("buttonOver"),b._overButton=!0,b._exitBtn.loadTexture("IngameUI","btn_exit0001"),b._downButton&&b._exitBtn.scale.set(.85)}),this._exitBtn.events.onInputOut.add(function(){b._overButton=!1,b._exitBtn.loadTexture("IngameUI","btn_exit0000"),b._exitBtn.scale.set(1)}),this._exitBtn.events.onInputUp.add(function(){b._downButton=!1,b._overButton&&(a.SoundMixer.playSound("button"),b.hideLevelMenu(),b._exitBtn.scale.set(1))}),this._exitBtn.events.onInputDown.add(function(){b._downButton=!0,b._exitBtn.scale.set(.85)}),this.changeCursorStyleEvents(this._exitBtn),this._levelSelectBacktext=this.game.add.text(this._levelSelectBack.width/2,this._exitBtn.centerY,a.Boot.LOCALE.get("levelselect"),this._boardHeaderTextStyle),this._levelSelectBacktext.scale.set(.9),this._levelSelectBacktext.anchor.set(.5),"hu"==window.LOCALE&&(this._levelSelectBacktext.fontSize=20,this._levelSelectBacktext.wordWrap=!0,this._levelSelectBacktext.wordWrapWidth=350,this._levelSelectBacktext.lineSpacing=-10,this._levelSelectBacktext.y+=6);this._levelIcons=[];for(var c=1;c<=4;c++)for(var d=1;d<=5;d++){var e=5*(c-1)+d,f=a.SavedData.levelStatus[e-1],g=a.SavedData.gemsStatus[e-1],h=new a.LevelSelectIcon(this.game,32+95*d,52+85*c,e,f,g);h.anchor.set(.5,0),h.scale.set(.7),this._levelIcons.push(h),this._menuContainer.addChild(this._levelIcons[this._levelIcons.length-1])}for(var i=this,c=0;c<this._levelIcons.length;c++)!function(c){if(i._levelIcons[c].levelStatus>1){var d=i.game.add.graphics(i._levelIcons[c].x,i._levelIcons[c].y);d.beginFill(13382502,0),d.drawRect(-40,-40,80,80),d.endFill(),i._menuContainer.addChild(d),d.inputEnabled=!0,d.events.onInputUp.add(function(){a.SoundMixer.playSound("button"),a.AbstractGame.CURRENT_LEVEL=c,b.free()})}}(c);this._levelSelectBack.addChild(this._menuContainer),this._menuContainer.addChild(this._exitBtn),this._menuContainer.addChild(this._levelSelectBacktext),this._levelSelectBack.visible=!1},c.prototype.showLevelMenu=function(){var b=this;a.SoundMixer.stopCurrentLoop(),this.game.canvas.style.cursor="default",this.disableButtons(),this.game.add.tween(this._menu).to({alpha:0},c.MAIN_MENU_HIDE_TIME,Phaser.Easing.Linear.None,!0).onComplete.add(function(){b._levelSelectBack.y=-b.world.height/2,b._levelSelectBack.visible=!0,b.game.add.tween(b._levelSelectBack).to({y:b.world.centerY},c.BOARD_SHOW_TIME,Phaser.Easing.Bounce.Out,!0).onComplete.add(function(){for(var a=0;a<b._levelIcons.length;a++)b._levelIcons[a].inputEnabled=!0;b._exitBtn.inputEnabled=!0,b.game.device.desktop&&b._backGround.playRipples()})},this)},c.prototype.hideLevelMenu=function(){var b=this;this.game.canvas.style.cursor="default",this._overButton=!1,this._exitBtn.loadTexture("IngameUI","btn_exit0000"),this._exitBtn.inputEnabled=!1;for(var d=0;d<this._levelIcons.length;d++)this._levelIcons[d].inputEnabled=!1;this.game.add.tween(this._levelSelectBack).to({y:-this.world.centerY},c.BOARD_HIDE_TIME,Phaser.Easing.Linear.None,!0).onComplete.add(function(){b.game.device.desktop&&b._backGround.stopRipples(),b._levelSelectBack.visible=!1,b._menu.alpha=1,b._menu.play("idle"),a.SavedData.sfx&&a.SoundMixer.on(),b.enableMenuButtonds()})},c.prototype.update=function(){this._linesAnimations.forEach(function(a){a.update(),3==a.loopCount&&a.stop()}),this._menuOrbs.forEach(function(a){return a.animations.getAnimation("orb").update()})},c.prototype.changeCursorStyleEvents=function(a){var b=this;a.events.onInputOver.add(function(){b.game.canvas.style.cursor="pointer"},this),a.events.onInputOut.add(function(){b.game.canvas.style.cursor="default"},this)},c.prototype.disableButtons=function(){this._instractionBtn.inputEnabled=!1,this._playBtn.inputEnabled=!1},c.prototype.enableMenuButtonds=function(){this._instractionBtn.loadTexture("MenuUI","btn_instructions0000"),this._playBtn.loadTexture("MenuUI","btn_play0000"),this._instractionBtn.inputEnabled=!0,this._playBtn.inputEnabled=!0},c.prototype.shutdown=function(){this._menu&&this._menu.free(),this._bgMainmenuFore&&this._bgMainmenuFore.destroy(),this._playBtn&&(this._playBtn.events.onInputUp.removeAll(),this._playBtn.events.onInputOver.removeAll(),this._playBtn.events.onInputOut.removeAll(),this._playBtn.events.onInputDown.removeAll(),this._playBtn.destroy()),this._instractionBtn&&(this._instractionBtn.events.onInputUp.removeAll(),this._instractionBtn.events.onInputOver.removeAll(),this._instractionBtn.events.onInputOut.removeAll(),this._instractionBtn.events.onInputDown.removeAll(),this._instractionBtn.destroy()),this._titleImage&&this._titleImage.destroy(),this._playBtnText&&this._playBtnText.destroy(),this._levelSelectBack&&this._levelSelectBack.destroy(),this._levelSelectBacktext&&this._levelSelectBacktext.destroy(),this._menuContainer&&this._menuContainer.destroy(),this._exitBtn&&(this._exitBtn.events.onInputUp.removeAll(),this._exitBtn.events.onInputOver.removeAll(),this._exitBtn.events.onInputOut.removeAll(),this._exitBtn.events.onInputDown.removeAll(),this._exitBtn.destroy()),this._volumeBtn&&(this._volumeBtn.events.onInputUp.removeAll(),this._volumeBtn.events.onInputOver.removeAll(),this._volumeBtn.events.onInputOut.removeAll(),this._volumeBtn.events.onInputDown.removeAll(),this._volumeBtn.destroy()),this._continueBtn&&(this._continueBtn.events.onInputUp.removeAll(),this._continueBtn.events.onInputOver.removeAll(),this._continueBtn.events.onInputOut.removeAll(),this._continueBtn.events.onInputDown.removeAll(),this._continueBtn.destroy()),this._finnSprite&&this._finnSprite.free(),this._spikesAnimation&&this._spikesAnimation.destroy(),this._buttonAnimation&&this._buttonAnimation.destroy(),this._iceKingOnSpikes&&this._iceKingOnSpikes.free(),this._linesAnimations.forEach(function(a){return a.destroy()}),this._menuOrbs.forEach(function(a){return a.destroy()}),this._backGround&&this._backGround.destroy(),this._levelIcons.forEach(function(a){return a.destroy()})},c.prototype.free=function(){this.game.state.start("BaseGame",!0)},c}(Phaser.State);b.BOARD_SHOW_TIME=1e3,b.MAIN_MENU_HIDE_TIME=100,b.BOARD_HIDE_TIME=200,a.Menu=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return __extends(c,b),c.prototype.preload=function(){this.game.load.onFileComplete.add(this.loadingUpdate,this),this.game.load.image("lockOrientation",a.Boot.PATH_IMAGES+"ui/lock.png")},c.prototype.loadingUpdate=function(a,b,c,d,e){a>=100&&(this.game.load.onFileComplete.removeAll(),this.game.state.start("Boot",!0))},c}(Phaser.State);a.PreBoot=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(){var a=null!==b&&b.apply(this,arguments)||this;return a._loadedAssets=!1,a._loadedFont=!1,a}return __extends(c,b),c.prototype.preload=function(){var b=this;this.game.load.onFileComplete.add(this.loadingUpdate,this),this._cnLogo=this.add.image(this.world.centerX-3,this.world.centerY-100+60,"cn_logo"),this._cnLogo.scale.set(.8),this._cnLogo.anchor.set(.5),this._loading=new a.ParallaxImage(this.game,"preload",0,"bgProress0000"),this._loading.anchor.set(.5),this._footer=this.add.image(this.world.centerX,this.world.centerY+120-20,"preload","preloaderFooter0000"),
this._footer.anchor.set(.5),this._loading.x=this._footer.x-.5*this._footer.width-2,this._loading.y=this._footer.y-50,this._loadingMask=this.add.graphics(4,24),this._loadingMask.beginFill(16711680,.5),this._loadingMask.drawRect(0,0,this._footer.width-5,this._footer.height-5),this._loadingMask.endFill(),this._loading.addChild(this._loadingMask),this._loading.mask=this._loadingMask,this._loadingMask.scale.x=0,this._intervalId=setInterval(function(){b._loading.updateScroll(1.2)},20),"string"==typeof window.LOCALE&&(this._curLogo=window.LOCALE),this.fontsLoading(),a.Factories.loadFactory(this.game,"MenuUI",a.Boot.PATH_IMAGES+"DB/MenuUI/"),a.Factories.loadFactory(this.game,"Chars",a.Boot.PATH_IMAGES+"DB/CharAndObj/"),this.game.load.atlas("MenuUI",a.Boot.PATH_IMAGES+"MenuUI.png",a.Boot.PATH_IMAGES+"MenuUI.json"),this.game.load.atlas("IngameUI",a.Boot.PATH_IMAGES+"IngameUI.png",a.Boot.PATH_IMAGES+"IngameUI.json"),this.game.load.atlas("Objects",a.Boot.PATH_IMAGES+"CharsAndObjects.png",a.Boot.PATH_IMAGES+"CharsAndObjects.json"),a.Factories.loadFactory(this.game,"Princesses",a.Boot.PATH_IMAGES+"DB/Princesses/"),this.game.load.atlas("Princesses",a.Boot.PATH_IMAGES+"Princesses.png",a.Boot.PATH_IMAGES+"Princesses.json"),this.game.load.atlas("MenuUI",a.Boot.PATH_IMAGES+"MenuUI.png",a.Boot.PATH_IMAGES+"MenuUI.json"),this.game.load.image("Title",a.Boot.PATH_IMAGES+"GameTitle/"+this._curLogo+".png"),this.game.load.audiosprite("Sfx",["assets/sounds/sfx.mp3","assets/sounds/sfx.ogg"],"assets/sounds/sfx.json"),this.game.load.image("mobileButton",a.Boot.PATH_IMAGES+"FrostyFights-DPad-Btn.png")},c.prototype.shutdown=function(){this._cnLogo.destroy(),this._cnLogo=null,this._loading.destroy(),this._loading=null,this._footer.destroy(),this._footer=null,this._loadingMask.destroy(),this._loadingMask=null},c.prototype.loadingUpdate=function(b,c,d,e,f){this._loadingMask.scale.x=b/100,b>=100&&(this.game.load.onFileComplete.removeAll(),a.SoundMixer.setGlobalAudioSettings(this.game),a.Boot.MENU_UI=a.Factories.createFactory(this.game,"MenuUI"),a.Boot.CHARACTERS=a.Factories.createFactory(this.game,"Chars"),a.Boot.PRINCESSES=a.Factories.createFactory(this.game,"Princesses"),dragonBones.PhaserFactory.startLoop(),this._loadedAssets=!0,clearInterval(this._intervalId))},c.prototype.update=function(){var b=this;this._loadedAssets&&this._loadedFont&&(this._loadedAssets=!1,setTimeout(function(){b.game.state.start(a.LocalConfig.CURRENT_STATE,!0)},400))},c.prototype.fontsLoading=function(){var b,c=this;b=["Fred Fredburger W04 Regular","Fred Fredburger Ara W21 Regula","Fred Fredburger W04 Bold","Fred Fredburger Ara W21 Bold","Fred Fredburger Ara Head W21Bl","Fred FredburgerAraHeadW21Shado","Fred Fredburger W04 Condensed","Fred Fredburger Ara W21 Cond","Fred Fredburger Headline W04Bl","FredFredburgerHeadlineW04Shado","ITC Lubalin Graph W03 Bd CnObl","ITC Lubalin Graph W03 Book","ITC Lubalin Graph W03 D1489630","Lubalin Graph ITCTurnerAraW03B"],WebFont.load({custom:{families:b,urls:[a.Boot.PATH_FONTS+"fonts.css"]},active:function(){window.setTimeout(function(){c._loadedFont=!0},100)}})},c}(Phaser.State);a.Preloader=b}(TProject||(TProject={}));