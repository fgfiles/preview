!function(){function t(e,i,a){function o(r,s){if(!i[r]){if(!e[r]){var l="function"==typeof require&&require;if(!s&&l)return l(r,!0);if(n)return n(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var _=i[r]={exports:{}};e[r][0].call(_.exports,function(t){var i=e[r][1][t];return o(i||t)},_,_.exports,t,e,i,a)}return i[r].exports}for(var n="function"==typeof require&&require,r=0;r<a.length;r++)o(a[r]);return o}return t}()({1:[function(t,e,i){!function(t){var i=/iPhone/i,a=/iPod/i,o=/iPad/i,n=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,r=/Android/i,s=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,l=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,u=/Windows Phone/i,_=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,h=/BlackBerry/i,c=/BB10/i,d=/Opera Mini/i,p=/(CriOS|Chrome)(?=.*\bMobile\b)/i,f=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,m=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),y=function(t,e){return t.test(e)},b=function(t){var e=t||navigator.userAgent,b=e.split("[FBAN");if("undefined"!=typeof b[1]&&(e=b[0]),b=e.split("Twitter"),"undefined"!=typeof b[1]&&(e=b[0]),this.apple={phone:y(i,e),ipod:y(a,e),tablet:!y(i,e)&&y(o,e),device:y(i,e)||y(a,e)||y(o,e)},this.amazon={phone:y(s,e),tablet:!y(s,e)&&y(l,e),device:y(s,e)||y(l,e)},this.android={phone:y(s,e)||y(n,e),tablet:!y(s,e)&&!y(n,e)&&(y(l,e)||y(r,e)),device:y(s,e)||y(l,e)||y(n,e)||y(r,e)},this.windows={phone:y(u,e),tablet:y(_,e),device:y(u,e)||y(_,e)},this.other={blackberry:y(h,e),blackberry10:y(c,e),opera:y(d,e),firefox:y(f,e),chrome:y(p,e),device:y(h,e)||y(c,e)||y(d,e)||y(f,e)||y(p,e)},this.seven_inch=y(m,e),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},w=function(){var t=new b;return t.Class=b,t};"undefined"!=typeof e&&e.exports&&"undefined"==typeof window?e.exports=b:"undefined"!=typeof e&&e.exports&&"undefined"!=typeof window?e.exports=w():"function"==typeof define&&define.amd?define("isMobile",[],t.isMobile=w()):t.isMobile=w()}(this)},{}],2:[function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),r=t("./Common"),s=a(r),l=t("./CostumeScene"),u=a(l),_=t("./EndScene"),h=a(_),c=t("./GameScene"),d=a(c),p=t("./GoalScene"),f=a(p),m=t("./IntroScene"),y=a(m),b=t("./PauseScene"),w=a(b),v=t("./RescueScene"),x=a(v),P=t("./SplashScene"),g=a(P),I=t("./NewCostumeScene"),k=a(I),S=function(){function t(){o(this,t),this._game=null}return n(t,[{key:"init",value:function(){this.showSplashScene(),console.log(s["default"].getHighscore())}},{key:"showSplashScene",value:function(){var t=new g["default"];t.autoAppear=!1,t.signals.next.add(function(){s["default"].isFirstTime?this.showIntroScene():this.showGameScene()},this),t.signals.previous.add(function(){this.showCostumeScene()},this);var e=new P3.FadeTransition;return s["default"].stage.addChild(e),e.signals["in"].add(function(e){e.out(),s["default"].scene.show(t)},this),e.signals.out.add(function(e){e.parent.removeChild(e),e.destroy(),t.appear()},this),e["in"](),t}},{key:"showIntroScene",value:function(){var t=new y["default"];t.autoAppear=!1,t.signals.next.add(function(){this.showGameScene()},this);var e=new P3.FadeTransition;return s["default"].stage.addChild(e),e.signals["in"].add(function(e){e.out(),s["default"].scene.show(t)},this),e.signals.out.add(function(e){e.parent.removeChild(e),e.destroy(),t.appear()},this),e["in"](),t}},{key:"showGameScene",value:function(){s["default"].paused=!1,this._game=new d["default"],this._game.autoAppear=!1,this._game.signals.goal.add(function(t){this.showGoalScene()},this),this._game.signals.rescue.add(function(t,e){this.showRescueScene(e)},this),this._game.signals.next.add(function(t,e){s["default"].saveHighscore(e),this.showEndScene(e)},this),this._game.signals.pause.add(function(t){this.showPauseScene()},this);var t=new P3.FadeTransition;return s["default"].stage.addChild(t),t.signals["in"].add(function(t){t.out(),s["default"].scene.show(this._game)},this),t.signals.out.add(function(t){t.parent.removeChild(t),t.destroy(),this._game.appear()},this),t["in"](),this._game}},{key:"showGoalScene",value:function(){var t=new f["default"];return t.signals.next.add(function(){s["default"].scene.remove(),this._game.start()},this),s["default"].scene.add(t),t}},{key:"showPauseScene",value:function(){s["default"].paused=!0;var t=new w["default"];return t.signals.home.add(function(){this.showSplashScene()},this),t.signals.next.add(function(){s["default"].paused=!1,s["default"].scene.remove()},this),s["default"].scene.add(t,!0),t}},{key:"showEndScene",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=new h["default"](t);return e.signals.next.add(function(){this._game.ignoreStabCallback(),this.showGameScene()},this),e.signals.previous.add(function(){this._game.ignoreStabCallback(),this.showCostumeScene(!0)},this),e.signals.home.add(function(){this._game.ignoreStabCallback(),this.showSplashScene()},this),s["default"].scene.add(e),e}},{key:"showRescueScene",value:function(t){var e=new x["default"](t);return e.signals.next.add(function(){var e=s["default"].config.costumes[t.costume];this.showNewCostumeScene(e)},this),s["default"].scene.add(e),e}},{key:"showCostumeScene",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=new u["default"];return e.signals.next.add(function(){s["default"].isFirstTime?this.showIntroScene():this.showGameScene()},this),e.signals.home.add(function(){this.showSplashScene()},this),t?s["default"].scene.swap(e):s["default"].scene.add(e),e}},{key:"showNewCostumeScene",value:function(t){var e=new k["default"](t);return e.signals.next.add(function(e,i){i&&this._game.player.changeCostume(t),s["default"].getUnlockCharacter()?delay(this.showGoalScene,.5,this):this._game.start(),s["default"].scene.remove()},this),s["default"].scene.swap(e),e}}]),t}();i["default"]=S},{"./Common":4,"./CostumeScene":5,"./EndScene":6,"./GameScene":7,"./GoalScene":8,"./IntroScene":10,"./NewCostumeScene":13,"./PauseScene":14,"./RescueScene":16,"./SplashScene":17}],3:[function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),l=function c(t,e,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,e);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:c(o,e,i)}if("value"in a)return a.value;var n=a.get;if(void 0!==n)return n.call(i)},u=t("./Common"),_=a(u),h=function(t){function e(){o(this,e);var t=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.loaded=0,t._bar=null,t._text=null,t._logo=null,t}return r(e,t),s(e,[{key:"init",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).call(this);var t=_["default"].assets,i=new PIXI.Graphics;i.clear(),i.beginFill(8859527),i.drawRect(0,0,_["default"].STAGE_WIDTH,_["default"].STAGE_HEIGHT),i.endFill(),this.addChild(i);var a=new PIXI.Container;a.x=.5*_["default"].STAGE_WIDTH,a.y=.5*_["default"].STAGE_HEIGHT+46,this.addChild(a);for(var o=[],n=1;n<10;++n)o.push(t.texture("loader_animation000"+n));o.push(t.texture("loader_animation0010"));var r=new P3.MovieClipSequence;r.addTextures(o),this._logo=new P3.MovieClip(r),this._logo.x=50,this._logo.y=20,this._logo.anchor=new PIXI.Point(.5,1),this._logo.animationSpeed=12,this._logo.looping=!1,a.addChild(this._logo),this._bar=new PIXI.Sprite(t.texture("preloader_bg")),this._bar.y=34,this._bar.anchor=new PIXI.Point(.5,.5),a.addChild(this._bar),this._bar.fill=new PIXI.Sprite(t.texture("preloader_bar")),this._bar.fill.anchor=new PIXI.Point(.5,.5),this._bar.addChild(this._bar.fill),this._bar.fill.mask=new PIXI.Graphics,this._bar.fill.mask.x=.5*-this._bar.fill.texture.width,this._bar.fill.mask.scale.x=0,this._bar.fill.mask.beginFill(16711680),this._bar.fill.mask.drawRect(0,.5*-this._bar.fill.texture.height,this._bar.fill.texture.width,this._bar.fill.texture.height),this._bar.fill.addChild(this._bar.fill.mask),this._bar.frame=new PIXI.Sprite(t.texture("preloader_overlay")),this._bar.frame.anchor=new PIXI.Point(.5,.5),this._bar.addChild(this._bar.frame),this._text=new PIXI.Text("0%",{fontSize:"32px",fontFamily:"Arial",fill:"#FFFFFF",align:"center"}),this._text.y=this._bar.y+60,this._text.pivot.x=.5*this._text.width,this._text.pivot.y=.5*this._text.height,a.addChild(this._text)}},{key:"appear",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"appear",this).call(this),this._logo.play()}},{key:"resize",value:function(){this.x=.5*(P3.View.width-_["default"].STAGE_WIDTH)}},{key:"update",value:function(){var t=Math.min(1,this.loaded);this._bar.fill.mask.scale.x+=.4*(t-this._bar.fill.mask.scale.x),this._text.text=""+Math.round(100*t)+"%",this._text.pivot.x=.5*this._text.width}}]),e}(P3.Scene);i["default"]=h},{"./Common":4}],4:[function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),n=function(){function t(){a(this,t)}return o(t,null,[{key:"getHighscore",value:function(){var t=window.localStorage.cn_ozswipeout_score;return t||0}},{key:"saveHighscore",value:function(e){e>t.getHighscore()&&(window.localStorage.cn_ozswipeout_score=e)}},{key:"getRoomCount",value:function(){var t=window.localStorage.cn_ozswipeout_room;return parseInt(t)||0}},{key:"saveRoomCount",value:function(e){e>t.getRoomCount()&&(window.localStorage.cn_ozswipeout_room=e)}},{key:"getUnlockCharacter",value:function(){for(var e=t.getRoomCount(),i=0,a=0;a<t.config.characters.length;++a){var o=t.config.characters[a],n=o.steps+i;if(!(e>=n))return o;i+=o.steps}return null}},{key:"getPreviousCharacter",value:function(){var e=t.getUnlockCharacter(),i=t.config.characters.indexOf(e);return i>0?t.config.characters[i-1]:null}},{key:"getTotalCharacterSteps",value:function(){for(var e=t.getRoomCount(),i=0,a=0;a<t.config.characters.length;++a){var o=t.config.characters[a],n=o.steps+i;if(!(e>=n))break;i+=o.steps}return i}},{key:"getUnlockCostume",value:function(){var e=t.getUnlockCharacter();return e?t.config.costumes[e.costume]:null}},{key:"isCharacterUnlocked",value:function(e){for(var i=t.getRoomCount(),a=0,o=0;o<e+1;++o){var n=t.config.characters[o];a+=n.steps}return i>=a}},{key:"isRescueRoom",value:function(){var e=t.getRoomCount(),i=t.getUnlockCharacter(),a=t.getTotalCharacterSteps();return!!i&&(e>0&&e+1===i.steps+a)}},{key:"getCostume",value:function(e){var i=t.config.costumes;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];if(o.id===e)return o}}}]),t}();i["default"]=n,n.STAGE_WIDTH=1664,n.STAGE_HEIGHT=768,n.PHYSICS_TICK=1/30,n.stage=null,n.renderer=null,n.audio=null,n.camera=null,n.copy=null,n.config=null,n.language="en",n.paused=!1,n.isWebGL=!1,n.isFirstTime=!0,n.blankTexture=PIXI.Texture.EMPTY,n.costumeId=0},{}],5:[function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),l=function c(t,e,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,e);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:c(o,e,i)}if("value"in a)return a.value;var n=a.get;if(void 0!==n)return n.call(i)},u=t("./Common"),_=a(u),h=function(t){function e(){o(this,e);var t=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._overlay=null,t._panel=null,t._homeButton=null,t._nextButton=null,t._previousButton=null,t._wearButton=null,t._costume=null,t._padlock=null,t._cost=null,t._pageIndex=0,t._sparkleEmitter=null,t}return r(e,t),s(e,[{key:"init",value:function(){var t=_["default"].assets;this._overlay=new PIXI.Graphics,this._overlay.interactive=!0,this._overlay.visible=!1,this.addChild(this._overlay);var e=new PIXI.Container;e.x=.5*_["default"].STAGE_WIDTH,e.y=.5*P3.View.height,this.addChild(e);var i=t.json("particle_emitter_purple_sparkles_cloud_00");this._sparkleEmitter=new PIXI.particles.Emitter(e,[t.texture("particle_purple_sparkle_00"),t.texture("particle_purple_sparkle_01"),t.texture("particle_purple_sparkle_02"),t.texture("particle_purple_sparkle_03")],i),this._sparkleEmitter.emit=!1,this._panel=new PIXI.Sprite(t.texture("outfit_wardrobe_back")),this._panel.x=.5*_["default"].STAGE_WIDTH,this._panel.y=.5*P3.View.height,this._panel.anchor=new PIXI.Point(.5,.5),this._panel.scale.set(.8),this._panel.visible=!1,this.addChild(this._panel),this._costume=new PIXI.Sprite(PIXI.Texture.EMPTY),this._costume.y=24,this._costume.anchor=new PIXI.Point(.5,.5),this._panel.addChild(this._costume),this._frame=new PIXI.Sprite(t.texture("outfit_wardrobe_top")),this._frame.anchor=new PIXI.Point(.5,.5),this._panel.addChild(this._frame),this._frame.avatar=new PIXI.Sprite(PIXI.Texture.EMPTY),this._frame.avatar.anchor=new PIXI.Point(.5,.5),this._frame.addChild(this._frame.avatar),this._padlock=new PIXI.Sprite(t.texture("outfit_lock")),this._padlock.y=20,this._padlock.anchor=new PIXI.Point(.5,.5),this._panel.addChild(this._padlock),this._cost=new PIXI.Sprite(t.texture("outfit_locked_panel")),this._cost.y=246,this._cost.anchor=new PIXI.Point(.5,.5),this._cost.visible=!1,this._panel.addChild(this._cost),this._cost.label=new PIXI.BitmapText("99",{font:"70px WindsorEF-Elongated",align:"center"}),this._cost.label.y=4,this._cost.label.pivot.x=.5*this._cost.label.textWidth,this._cost.label.pivot.y=.5*this._cost.label.textHeight,this._cost.addChild(this._cost.label);var a=new P3.ButtonStates;a.normal=PIXI.Texture.EMPTY,a.icon=t.texture("icon_primary_small_home_off"),a.iconOver=t.texture("icon_primary_small_home_over"),a.iconDown=t.texture("icon_primary_small_home_down"),this._homeButton=new P3.Button(a),this._homeButton.visible=!1,this._homeButton.defaultScale.set(.8),this._homeButton.scale.set(.8),this._homeButton.interactive=!1,this._homeButton.setShortcutIcon(t.texture("icon_keyboard_esc"),new PIXI.Point(50,50)),this._homeButton.signals.click.add(this._onHomeButtonClick,this),this.addChild(this._homeButton),this._nextButton=P3.Button.create(t.texture("icon_primary_large_next_off"),t.texture("icon_primary_large_next_over"),t.texture("icon_primary_large_next_down")),this._nextButton.x=280,this._nextButton.visible=!1,this._nextButton.clickSoundName="sfx_wardrobe_next_costume_00",this._nextButton.setShortcutIcon(t.texture("icon_keyboard_right"),new PIXI.Point(60,70)),this._nextButton.signals.click.add(this._onNextButtonClick,this),this._panel.addChild(this._nextButton),this._previousButton=P3.Button.create(t.texture("icon_primary_large_previous_off"),t.texture("icon_primary_large_previous_over"),t.texture("icon_primary_large_previous_down")),this._previousButton.x=-280,this._previousButton.visible=!1,this._previousButton.clickSoundName="sfx_wardrobe_previous_costume_00",this._previousButton.setShortcutIcon(t.texture("icon_keyboard_left"),new PIXI.Point(60,70)),this._previousButton.signals.click.add(this._onPreviousButtonClick,this),this._panel.addChild(this._previousButton),this._wearButton=P3.Button.create(t.texture("btn_wear_off"),t.texture("btn_wear_over"),t.texture("btn_wear_down")),this._wearButton.x=0,this._wearButton.y=246,this._wearButton.setShortcutIcon(t.texture("icon_keyboard_enter"),new PIXI.Point(140,60)),this._wearButton.signals.click.add(this._onWearButtonClick,this),this._panel.addChild(this._wearButton),webfont?(this._wearButton.label=new PIXI.Text(translate("costume_wear_button"),{fontSize:"44px",fontFamily:"Arial",fill:16777215,align:"center"}),this._wearButton.label.pivot.x=.5*this._wearButton.label.width,this._wearButton.label.pivot.y=.5*this._wearButton.label.height,this._wearButton.addChild(this._wearButton.label)):(this._wearButton.label=new PIXI.BitmapText(translate("costume_wear_button"),{font:"64px WindsorEF-Elongated",align:"center"}),this._wearButton.label.pivot.x=.5*this._wearButton.label.textWidth,this._wearButton.label.pivot.y=.5*this._wearButton.label.textHeight,this._wearButton.addChild(this._wearButton.label)),this.showPage(0)}},{key:"destroy",value:function(){TweenMax.killChildTweensOf(this),this._sparkleEmitter.destroy(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"appear",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"appear",this).call(this),_["default"].audio.playMusic("music_ambient_wardrobe_loop_00",{fadeIn:2})}},{key:"resize",value:function(){this.x=.5*(P3.View.width-_["default"].STAGE_WIDTH),this._overlay.clear(),this._overlay.beginFill(0,.6),this._overlay.drawRect(.5*(_["default"].STAGE_WIDTH-P3.View.width),0,P3.View.width,P3.View.height),this._overlay.endFill(),this._homeButton.x=.5*(_["default"].STAGE_WIDTH-P3.View.width)+140,this._homeButton.y=120}},{key:"update",value:function(){this._sparkleEmitter.update(deltaTime),_["default"].input.isKeyPressed(13)&&_["default"].isCharacterUnlocked(this._pageIndex)&&this._onWearButtonClick(null),_["default"].input.isKeyPressed(27)&&this._onHomeButtonClick(null),_["default"].input.isKeyPressed(37)&&this._previousButton.visible&&this._onPreviousButtonClick(null),_["default"].input.isKeyPressed(39)&&this._nextButton.visible&&this._onNextButtonClick(null)}},{key:"animateIn",value:function(){this._overlay.alpha=0,TweenMax.to(this._overlay,.34,{delay:.2,alpha:1,ease:Power1.easeInOut,onStart:function(){this._overlay.visible=!0},onStartScope:this}),this._panel.scale=new PIXI.Point,TweenMax.to(this._panel.scale,.4,{delay:.2,x:.8,y:.8,ease:Back.easeOut,easeParams:[3],onStart:function(){this._panel.visible=!0},onStartScope:this,onComplete:function(){this._sparkleEmitter.emit=!0,_["default"].audio.playSound("sfx_wardrobe_appear_00")},onCompleteScope:this}),this._homeButton.scale=new PIXI.Point,TweenMax.to(this._homeButton.scale,.4,{delay:.6,x:this._homeButton.defaultScale.x,y:this._homeButton.defaultScale.y,ease:Back.easeOut,easeParams:[1],onStart:function(){this._homeButton.interactive=!1,this._homeButton.visible=!0},onStartScope:this,onComplete:function(){this._homeButton.interactive=!0},onCompleteScope:this})}},{key:"animateOut",value:function(){}},{key:"showPage",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=_["default"].config.characters[t],a=_["default"].config.costumes[i.costume];console.log(i,a);var o=_["default"].isCharacterUnlocked(t);this._padlock.visible=!o,this._wearButton.visible=o,this._cost.visible=_["default"].isCharacterUnlocked(t>0?t-1:t);var n=_["default"].assets;this._frame.avatar.texture=n.texture(i.textures.wardrobe),this._costume.texture=n.texture(a.textures.wardrobe);var r=i.steps;this._cost.label.text=r.toString(),this._cost.label.validate(),this._cost.label.pivot.x=.5*this._cost.label.textWidth;var s=_["default"].config.characters.length;this._nextButton.visible=this._pageIndex<s-1,this._previousButton.visible=this._pageIndex>0,e&&(this._wearButton.visible&&(this._wearButton.scale=new PIXI.Point,TweenMax.killTweensOf(this._wearButton.scale),TweenMax.to(this._wearButton.scale,.32,{x:1,y:1,ease:Back.easeOut,easeParams:[2]})),this._cost.visible&&(this._cost.scale=new PIXI.Point,TweenMax.killTweensOf(this._cost.scale),TweenMax.to(this._cost.scale,.32,{x:1,y:1,ease:Back.easeOut,easeParams:[2]})))}},{key:"_onHomeButtonClick",value:function(t){this.signals.home.dispatch(this)}},{key:"_onNextButtonClick",value:function(t){this.showPage(++this._pageIndex,!0)}},{key:"_onPreviousButtonClick",value:function(t){this.showPage(--this._pageIndex,!0)}},{key:"_onWearButtonClick",value:function(t){var e=_["default"].config.characters[this._pageIndex],i=_["default"].config.costumes[e.costume];_["default"].costumeId=i.id,console.log("costume set:",i.id),this.signals.next.dispatch(this),_["default"].audio.playSound(i.sounds.attach||"sfx_wardrobe_attach_outfit_generic_00")}}]),e}(P3.Scene);i["default"]=h},{"./Common":4}],6:[function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),l=function c(t,e,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,e);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:c(o,e,i)}if("value"in a)return a.value;var n=a.get;if(void 0!==n)return n.call(i)},u=t("./Common"),_=a(u),h=function(t){function e(t){o(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i._overlay=null,i._panel=null,i._score=null,i._scoreValue=t,i._bar=null,i._best=null,i._homeButton=null,i._costumeButton=null,i._replayButton=null,i._sparkleEmitter=null,i}return r(e,t),s(e,[{key:"init",value:function(){var t=_["default"].assets;this._overlay=new PIXI.Graphics,this._overlay.interactive=!0,this._overlay.visible=!1,this.addChild(this._overlay);var e=new PIXI.Container;e.x=.5*_["default"].STAGE_WIDTH,e.y=.5*P3.View.height-140,this.addChild(e);var i=t.json("particle_emitter_purple_sparkles_cloud_00");this._sparkleEmitter=new PIXI.particles.Emitter(e,[t.texture("particle_purple_sparkle_00"),t.texture("particle_purple_sparkle_01"),t.texture("particle_purple_sparkle_02"),t.texture("particle_purple_sparkle_03")],i),this._sparkleEmitter.emit=!1;var a=_["default"].getUnlockCharacter();this._title=new PIXI.Sprite(_["default"].assets.texture("end_game_mist")),this._title.x=.5*_["default"].STAGE_WIDTH,this._title.y=160,this._title.anchor.set(.5),this._title.scale.set(.8),this._title.visible=!1,this.addChild(this._title),webfont?(this._title.label=new PIXI.Text(translate("end_title"),{fontSize:"64px",fontFamily:"Arial",fill:16777215,align:"center"}),this._title.label.y=-7,this._title.label.pivot.x=.5*this._title.label.width,this._title.label.pivot.y=.5*this._title.label.height,this._title.addChild(this._title.label)):(this._title.label=new PIXI.BitmapText(translate("end_title"),{font:"120px WindsorEF-Elongated",align:"center"}),this._title.label.y=-14,this._title.label.pivot.x=.5*this._title.label.textWidth,this._title.label.pivot.y=.5*this._title.label.textHeight,this._title.addChild(this._title.label)),this._panel=new PIXI.Sprite(t.texture("end_game_panel")),this._panel.x=.5*_["default"].STAGE_WIDTH,this._panel.y=.5*P3.View.height-90,this._panel.anchor=new PIXI.Point(.5,.5),this._panel.visible=!1,this.addChild(this._panel),null===a&&(this._title.label.y=0,this._panel.addChild(this._title.label)),this._score=new PIXI.Sprite(t.texture("ui_score")),this._score.y=-180,this._score.anchor=new PIXI.Point(.5,.5),this._panel.addChild(this._score),this._score.label=new PIXI.BitmapText(this._scoreValue.toString(),{font:"80px WindsorEF-Elongated",align:"center"}),this._score.label.x=-4,this._score.label.y=26,this._score.label.pivot.x=.5*this._score.label.textWidth,this._score.label.pivot.y=.5*this._score.label.textHeight,this._score.addChild(this._score.label),this._bar=new PIXI.Sprite(t.texture("progress_back")),this._bar.x=-20,this._bar.y=-16,this._bar.anchor=new PIXI.Point(.5,.5),this._bar.visible=null!==a,this._panel.addChild(this._bar),this._bar.fill=new PIXI.Sprite(t.texture("progress_fill")),this._bar.fill.anchor=new PIXI.Point(.5,.5),this._bar.addChild(this._bar.fill),this._bar.fill.mask=new PIXI.Graphics,this._bar.fill.mask.x=.5*-this._bar.fill.texture.width,this._bar.fill.mask.y=.5*-this._bar.fill.texture.height,this._bar.fill.mask.scale.x=0,this._bar.fill.mask.beginFill(16711680),this._bar.fill.mask.drawRect(0,0,this._bar.fill.texture.width,this._bar.fill.texture.height),this._bar.fill.mask.endFill(),this._bar.fill.addChild(this._bar.fill.mask),this._bar.frame=new PIXI.Sprite(t.texture("progress_frame")),this._bar.frame.anchor=new PIXI.Point(.5,.5),this._bar.addChild(this._bar.frame),e=new PIXI.Container,this._bar.addChild(e),i=t.json("particle_emitter_rubyshoes_trail_00"),this._bar.emitter=new PIXI.particles.Emitter(e,[t.texture("particle_shoes_00"),t.texture("particle_shoes_01"),t.texture("particle_shoes_02"),t.texture("particle_shoes_03"),t.texture("particle_shoes_04")],i),this._bar.emitter.emit=!1,this._bar.score=new PIXI.Sprite(a?t.texture(a.textures.goal):PIXI.Texture.EMPTY),this._bar.score.x=260,this._bar.score.y=-14,this._bar.score.anchor=new PIXI.Point(.5,.5),this._bar.score.scale=new PIXI.Point(.75,.75),this._bar.addChild(this._bar.score),this._bar.panel=new PIXI.Sprite(t.texture("progress_arrowpanel")),this._bar.panel.x=this._bar.fill.mask.x+this._bar.fill.mask.width+4,this._bar.panel.y=74,this._bar.panel.anchor=new PIXI.Point(.5,.5),this._bar.addChild(this._bar.panel),this._bar.panel.label=new PIXI.BitmapText(a?"0/"+a.steps:"",{font:"44px WindsorEF-Elongated",align:"center"}),this._bar.panel.label.x=16,this._bar.panel.label.y=4,this._bar.panel.label.pivot.x=.5*this._bar.panel.label.textWidth,this._bar.panel.label.pivot.y=.5*this._bar.panel.label.textHeight,this._bar.panel.addChild(this._bar.panel.label),this._best=new PIXI.Sprite(t.texture("end_game_best")),this._best.x=0,this._best.y=180,this._best.anchor=new PIXI.Point(.5,.5),this._panel.addChild(this._best),webfont?(this._best.label=new PIXI.Text(translate("end_best").replace("[SCORE]",_["default"].getHighscore()),{fontSize:"34px",fontFamily:"Arial",fill:16777215,align:"center"}),this._best.label.x=32,this._best.label.pivot.x=.5*this._best.label.width,this._best.label.pivot.y=.5*this._best.label.height,this._best.addChild(this._best.label)):(this._best.label=new PIXI.BitmapText(translate("end_best").replace("[SCORE]",_["default"].getHighscore()),{font:"60px WindsorEF-Elongated",align:"center"}),this._best.label.x=20,this._best.label.pivot.x=.5*this._best.label.textWidth,this._best.label.pivot.y=.5*this._best.label.textHeight,this._best.addChild(this._best.label));var o=new P3.ButtonStates;o.normal=t.texture("icon_primary_large_home_off"),o.over=t.texture("icon_primary_large_home_over"),o.off=t.texture("icon_primary_large_home_down"),this._homeButton=new P3.Button(o),this._homeButton.x=.5*_["default"].STAGE_WIDTH-200,this._homeButton.y=P3.View.height-160,this._homeButton.visible=!1,this._homeButton.defaultScale.set(.8),this._homeButton.scale.set(.8),this._homeButton.clickSoundName="sfx_btn_press_play_00",this._homeButton.setShortcutIcon(t.texture("icon_keyboard_esc"),new PIXI.Point(60,70)),this._homeButton.signals.click.add(this._onHomeButtonClick,this),this.addChild(this._homeButton),o=new P3.ButtonStates,o.normal=t.texture("btn_splash_small_down"),o.over=t.texture("btn_splash_small_over"),o.off=t.texture("btn_splash_small_off"),o.icon=t.texture("icon_splash_costume_off"),o.iconOver=t.texture("icon_splash_costume_over"),o.iconDown=t.texture("icon_splash_costume_down"),this._costumeButton=new P3.Button(o),this._costumeButton.x=.5*_["default"].STAGE_WIDTH,this._costumeButton.y=P3.View.height-160,this._costumeButton.visible=!1,this._costumeButton.defaultScale.set(.8),this._costumeButton.scale.set(.8),this._costumeButton.clickSoundName="sfx_btn_press_play_00",this._costumeButton.setShortcutIcon(t.texture("icon_keyboard_right"),new PIXI.Point(60,70)),this._costumeButton.signals.click.add(this._onCostumeButtonClick,this),this.addChild(this._costumeButton),o=new P3.ButtonStates,o.normal=t.texture("icon_primary_large_replay_off"),o.over=t.texture("icon_primary_large_replay_over"),o.off=t.texture("icon_primary_large_replay_down"),this._replayButton=new P3.Button(o),this._replayButton.x=.5*_["default"].STAGE_WIDTH+200,this._replayButton.y=P3.View.height-160,this._replayButton.visible=!1,this._replayButton.defaultScale.set(.8),this._replayButton.scale.set(.8),this._replayButton.clickSoundName="sfx_btn_press_play_00",this._replayButton.setShortcutIcon(t.texture("icon_keyboard_enter"),new PIXI.Point(60,70)),this._replayButton.signals.click.add(this._onReplayButtonClick,this),this.addChild(this._replayButton)}},{key:"destroy",value:function(){TweenMax.killChildTweensOf(this),this._sparkleEmitter.destroy(),this._bar.emitter.destroy(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"resize",value:function(){this.x=.5*(P3.View.width-_["default"].STAGE_WIDTH),this._overlay.clear(),this._overlay.beginFill(0,.6),this._overlay.drawRect(.5*(_["default"].STAGE_WIDTH-P3.View.width),0,P3.View.width,P3.View.height),this._overlay.endFill()}},{key:"show",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"show",this).call(this),this._homeButton.interactive=!0,this._costumeButton.interactive=!0,this._replayButton.interactive=!0}},{key:"update",value:function(){this._sparkleEmitter.update(deltaTime),this._bar.emitter.update(deltaTime),_["default"].input.isKeyPressed(27)&&this._onHomeButtonClick(null),_["default"].input.isKeyPressed(39)&&this._onCostumeButtonClick(null),_["default"].input.isKeyPressed(13)&&this._onReplayButtonClick(null)}},{key:"animateIn",value:function(t,e){var i=_["default"].getUnlockCharacter();this._overlay.alpha=0,
TweenMax.to(this._overlay,.34,{delay:.2,alpha:1,ease:Power1.easeInOut,onStart:function(){this._overlay.visible=!0},onStartScope:this}),this._panel.scale=new PIXI.Point,TweenMax.to(this._panel.scale,.4,{delay:.2,x:1,y:1,ease:Back.easeOut,easeParams:[3],onStart:function(){this._panel.visible=!0},onStartScope:this,onComplete:function(){this._sparkleEmitter.emit=!0},onCompleteScope:this}),i&&this._animateBar(),this._homeButton.scale=new PIXI.Point(.5,.5),TweenMax.to(this._homeButton.scale,.4,{delay:.6,x:this._homeButton.defaultScale.x,y:this._homeButton.defaultScale.y,ease:Back.easeOut,easeParams:[2],onStart:function(){this._homeButton.visible=!0},onStartScope:this,onComplete:function(){this._homeButton.interactive=!0},onCompleteScope:this}),this._costumeButton.scale=new PIXI.Point(.5,.5),TweenMax.to(this._costumeButton.scale,.4,{delay:.6,x:this._costumeButton.defaultScale.x,y:this._costumeButton.defaultScale.y,ease:Back.easeOut,easeParams:[2],onStart:function(){this._costumeButton.visible=!0},onStartScope:this,onComplete:function(){this._costumeButton.interactive=!0},onCompleteScope:this}),this._replayButton.scale=new PIXI.Point(.5,.5),TweenMax.to(this._replayButton.scale,.4,{delay:.6,x:this._replayButton.defaultScale.x,y:this._replayButton.defaultScale.y,ease:Back.easeOut,easeParams:[2],onStart:function(){this._replayButton.visible=!0},onStartScope:this,onComplete:function(){this._replayButton.interactive=!0},onCompleteScope:this})}},{key:"animateOut",value:function(t,e){TweenMax.to(this,.34,{alpha:0,ease:Power2.easeInOut,onComplete:t,onCompleteScope:e})}},{key:"_animateBar",value:function(t,e){e=e||window;var i=_["default"].getUnlockCharacter(),a=_["default"].getTotalCharacterSteps(),o=_["default"].getRoomCount(),n=(o-a)/i.steps;TweenMax.to(this._bar.fill.mask.scale,n,{delay:.6,x:n,ease:Power1.easeInOut,onStart:function(){this._bar.emitter.emit=!0,_["default"].audio.playSound("sfx_magic_reward_00")},onStartScope:this,onUpdate:function(){this._bar.panel.label.text=Math.round(this._bar.fill.mask.scale.x*i.steps)+"/"+i.steps,this._bar.panel.label.validate(),this._bar.panel.label.pivot.x=.5*this._bar.panel.label.textWidth,this._bar.panel.x=this._bar.fill.mask.x+this._bar.fill.mask.width+4,this._bar.emitter.updateOwnerPos(this._bar.fill.mask.x+this._bar.fill.mask.width,4)},onUpdateScope:this,onComplete:function(){this._bar.emitter.emit=!1,t&&t.call(e)},onCompleteScope:this})}},{key:"_onHomeButtonClick",value:function(t){this._homeButton.interactive=!1,this._costumeButton.interactive=!1,this._replayButton.interactive=!1,this.signals.home.dispatch(this)}},{key:"_onCostumeButtonClick",value:function(t){this._homeButton.interactive=!1,this._costumeButton.interactive=!1,this._replayButton.interactive=!1,this.animateOut(function(){this.signals.previous.dispatch(this)},this)}},{key:"_onReplayButtonClick",value:function(t){this._homeButton.interactive=!1,this._costumeButton.interactive=!1,this._replayButton.interactive=!1,_["default"].audio.playSound("sfx_dorothy_restart_click_heels_00"),this.signals.next.dispatch(this)}},{key:"score",get:function(){return this._score}}]),e}(P3.Scene);i["default"]=h},{"./Common":4}],7:[function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),l=function D(t,e,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,e);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:D(o,e,i)}if("value"in a)return a.value;var n=a.get;if(void 0!==n)return n.call(i)},u=t("./Common"),_=a(u),h=t("./Hud"),c=a(h),d=t("./Mist"),p=a(d),f=t("./Player"),m=a(f),y=t("./rooms/BaseRoom"),b=(a(y),t("./rooms/RescueRoom")),w=a(b),v=t("./rooms/StartingRoom"),x=a(v),P=t("./rooms/trap/CampfireRoom"),g=a(P),I=t("./rooms/reveal/MonkeyRoom"),k=a(I),S=t("./rooms/frogger/RiverRoom"),O=a(S),C=t("./rooms/reveal/RockRoom"),B=a(C),T=t("./rooms/trap/TrapdoorRoom"),X=a(T),M=t("./rooms/reveal/WallRoom"),E=a(M),j=t("ismobilejs"),A=a(j),R=function(t){function e(){o(this,e);var t=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.signals.goal=new signals.Signal,t.signals.rescue=new signals.Signal,t._game=null,t._currentRoom=null,t._rooms=[],t._roomCount=0,t._canMove=!1,t._player=null,t._mist=null,t._hud=null,t._mistSpeedMin=100,t._mistSpeedMax=200,t._mistRoomTarget=50,t._gameOverSFX=null,t._isHighscore=!1,t._gameOver=!1,t._ignoreStabCallback=!1,t}return r(e,t),s(e,[{key:"init",value:function(){this._game=new PIXI.Container,this.addChild(this._game);var t=new PIXI.Sprite(_["default"].blankTexture);t.width=.5*Math.abs(P3.View.width-1024),t.height=P3.View.height,t.tint=1057580,this.addChild(t);var e=new PIXI.Sprite(_["default"].blankTexture);e.x=P3.View.width,e.width=.5*Math.abs(P3.View.width-1024),e.height=P3.View.height,e.anchor.x=1,e.tint=1057580,this.addChild(e),this._hud=new c["default"],this._hud.setBestScore(_["default"].getHighscore()),this._hud.pauseButton.signals.click.add(this._onPauseButtonClick,this),this.addChild(this._hud);var i=new P3.Camera(new PIXI.Point(.5*P3.View.width,.5*P3.View.height));i.ease.x=i.ease.y=1,i.addLayer(new P3.CameraLayer(this._game,new PIXI.Point(1,1))),i.setTarget(new PIXI.Point,!0),_["default"].camera=i,this._mist=new p["default"],this._mist.x=Number.MAX_VALUE,this._game.addChild(this._mist),this._player=new m["default"],this._game.addChild(this._player),this._currentRoom=this._createRoom(0),this._hud.setScore(0)}},{key:"destroy",value:function(){TweenMax.killChildTweensOf(this,!1),this.signals.goal.dispose(),this.signals.rescue.dispose(),this._player.destroy(),this._currentRoom.destroy(),this._gameOverSFX&&(TweenMax.killTweensOf(this._gameOverSFX),this._gameOverSFX.destroy(),this._gameOverSFX=null),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"resize",value:function(){this._hud.resize()}},{key:"update",value:function(){_["default"].camera.update(deltaTime),this._player.update(deltaTime);var t=_["default"].input;if(t.isKeyPressed(37)&&(console.log("left"),this.movePlayer(0)),t.isKeyPressed(38)&&(console.log("up"),this.movePlayer(1)),t.isKeyPressed(39)&&(console.log("right"),this.movePlayer(2)),t.isKeyPressed(40)&&(console.log("down"),this.movePlayer(3)),t.isKeyPressed(27)&&this._onPauseButtonClick(null),this._currentRoom&&this._currentRoom.update(deltaTime),!this._currentRoom.isSafe&&!this._player.invulnerable&&!this._gameOver){var e=new P3.Vector2(this._player.x-this._mist.x,this._player.y-this._mist.y),i=this._currentRoom.fromDirection;0===i||2===i?Math.abs(e.x)-340<=8&&this.end():1!==i&&3!==i||Math.abs(e.y)-340<=8&&this.end()}}},{key:"appear",value:function(){var t=_["default"].input;t.signals.swipeLeft.add(this._onSwipeLeft,this),t.signals.swipeRight.add(this._onSwipeRight,this),t.signals.swipeUp.add(this._onSwipeUp,this),t.signals.swipeDown.add(this._onSwipeDown,this),_["default"].getUnlockCharacter()?this.signals.goal.dispatch(this):this.start(),_["default"].isFirstTime&&(_["default"].isFirstTime=!1,A["default"].any?this._hud.showTutorialAnimationMobile():this._hud.showTutorialAnimation())}},{key:"show",value:function(){this.resumeGame(),_["default"].audio.playMusic("music_ambient_forest_loop_00",{fadeIn:2})}},{key:"start",value:function(){this._canMove=!0}},{key:"end",value:function(){this._gameOver=!0,this._canMove=!1,this._ignoreStabCallback=!1,this._player.playDieState(),this._currentRoom.deactivate(),this.stopPlayer(),this.stopMist();var t=_["default"].audio;t.playSound("sfx_dorothy_disappear_00"),t.playSound("sfx_witch_cackle_00"),t.stopMusic(),this._gameOverSFX=t.playSound("music_game_over_stab_00",{callback:function(){!this._ignoreStabCallback&&t.playMusic("music_results_score_screen_00",{fadeIn:1})},scope:this}),delay(function(){this.signals.next.dispatch(this,this._roomCount)},1,this)}},{key:"resumeGame",value:function(){TweenMax.resumeAll(!0,!0,!0),this._currentRoom.resumeRoom()}},{key:"pauseGame",value:function(){TweenMax.pauseAll(!0,!0,!0),this._currentRoom.pauseRoom()}},{key:"movePlayer",value:function(t){if(!_["default"].paused&&this._canMove)if(this._currentRoom.checkMove(t)){this._canMove=!1,this._currentRoom.deactivate(),this._hud.hideTutorialAnimation();var e=new PIXI.Point(this._currentRoom.x,this._currentRoom.y),i=1024;switch(t){case 0:e.x-=i;break;case 1:e.y-=i;break;case 2:e.x+=i;break;case 3:e.y+=i}var a=void 0,o=!1;_["default"].isRescueRoom()?(a=this._createRoom(1,t,e.clone()),o=!0):a=this._roomProgression(t,e),a.alpha=0,++this._roomCount,this._roomCount>_["default"].getHighscore()&&(this._hud.setBestScore(this._roomCount),this._isHighscore||(this._isHighscore=!0,_["default"].audio.playSound("sfx_highscore_new_01"))),this._hud.setScore(this._roomCount),_["default"].getUnlockCharacter()&&_["default"].saveRoomCount(_["default"].getRoomCount()+1),console.log(_["default"].getRoomCount()),console.log(_["default"].getUnlockCharacter()),console.log(_["default"].getUnlockCostume()),TweenMax.to(this._player,.4,{x:e.x,y:e.y,ease:Power1.easeInOut,onStart:function(){this._player.invulnerable=!0,this._player.startShoesEmitter(),this._player.playMoveState(t),Math.random()<.4&&delay(function(){_["default"].audio.playSound("sfx_dorothy_skid_in_01")},.34,this)},onStartScope:this,onComplete:function(){this._player.invulnerable=!1,this._player.stopShoesEmitter(),this._player.playHappyState();var t=_["default"].camera;TweenMax.to(t.target,.34,{x:a.x,y:a.y,ease:Power2.easeInOut,onComplete:function(){a.activate(),o?delay(function(){this.signals.rescue.dispatch(this,a.character)},3.4,this):(this._canMove=!0,this._currentRoom.isSafe||(this.resetMist(a),this.startMist()))},onCompleteScope:this}),a.animateIn(),this._currentRoom.animateOut(0,function(t){this._destroyRoom(t)},this),this._currentRoom=a},onCompleteScope:this}),_["default"].audio.playSound(["sfx_swipe_out_00","sfx_swipe_out_01"])}else{this._canMove=!1;var n=new PIXI.Point(this._player.x,this._player.y),r=80;switch(t){case 0:n.x-=r;break;case 1:n.y-=r;break;case 2:n.x+=r;break;case 3:n.y+=r}TweenMax.to(this._player,.1,{x:n.x,y:n.y,ease:Power1.easeInOut,repeat:1,yoyo:!0,onStart:function(){this._player.playMoveState(t)},onStartScope:this,onComplete:function(){this._canMove=!0,this._player.playIdleState()},onCompleteScope:this}),_["default"].audio.playSound("sfx_swipe_blocked_00"),_["default"].audio.playSound(["music_swipe_stab_blocked_00","music_swipe_stab_blocked_01","music_swipe_stab_blocked_02","music_swipe_stab_blocked_03"])}}},{key:"stopPlayer",value:function(){TweenMax.killTweensOf(this._player)}},{key:"startMist",value:function(){var t=new PIXI.Point(this._currentRoom.x,this._currentRoom.y),e=(this._mistSpeedMax-this._mistSpeedMin)/this._mistRoomTarget*5,i=Math.floor(this._roomCount/5),a=this._mistSpeedMin+e*i,o=768;TweenMax.to(this._mist,o/a,{x:t.x,y:t.y,ease:Power0.easeNone})}},{key:"stopMist",value:function(){TweenMax.killTweensOf(this._mist)}},{key:"resetMist",value:function(){TweenMax.killTweensOf(this._mist);var t=new PIXI.Point(this._currentRoom.x,this._currentRoom.y),e=768,i=0;switch(this._currentRoom.fromDirection){case 1:t.y+=e,i=.5*-Math.PI;break;case 2:t.x-=e,i=0;break;case 3:t.y-=e,i=.5*Math.PI;break;default:t.x+=e,i=Math.PI}this._mist.x=t.x,this._mist.y=t.y,this._mist.rotation=i}},{key:"ignoreStabCallback",value:function(){this._ignoreStabCallback=!0}},{key:"_createRoom",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],i=arguments[2];i=i||new PIXI.Point;var a=_["default"].assets,o=void 0;switch(t){case 0:o=new x["default"](e);break;case 1:var n=_["default"].getUnlockCharacter();0===e?o=new w["default"](n,a.texture("road_right"),[!1,!0,!1,!0],e):1===e?o=new w["default"](n,a.texture("road_btm"),[!0,!1,!0,!1],e):2===e?o=new w["default"](n,a.texture("road_left"),[!1,!0,!1,!0],e):3===e&&(o=new w["default"](n,a.texture("road_top"),[!0,!1,!0,!1],e));break;case 2:var r=Math.floor(2*Math.random());switch(r){case 0:0===e?o=new B["default"](a.texture("road_right"),[!1,!0,!1,!0],e,(!1)):1===e?o=new B["default"](a.texture("road_btm"),[!0,!1,!0,!1],e,(!1)):2===e?o=new B["default"](a.texture("road_left"),[!1,!0,!1,!0],e,(!1)):3===e&&(o=new B["default"](a.texture("road_top"),[!0,!1,!0,!1],e,(!1)));break;case 1:0===e?o=new E["default"](a.texture("road_right"),[!1,!0,!1,!0],e,(!1)):1===e?o=new E["default"](a.texture("road_btm"),[!0,!1,!0,!1],e,(!1)):2===e?o=new E["default"](a.texture("road_left"),[!1,!0,!1,!0],e,(!1)):3===e&&(o=new E["default"](a.texture("road_top"),[!0,!1,!0,!1],e,(!1)))}break;case 3:var s=Math.floor(3*Math.random());switch(s){case 0:0===e?o=new B["default"](a.texture("road_cross"),[!0,!0,!1,!0],e,(!1)):1===e?o=new B["default"](a.texture("road_cross"),[!0,!0,!0,!1],e,(!1)):2===e?o=new B["default"](a.texture("road_cross"),[!1,!0,!0,!0],e,(!1)):3===e&&(o=new B["default"](a.texture("road_cross"),[!0,!1,!0,!0],e,(!1)));break;case 1:0===e?o=new E["default"](a.texture("road_cross"),[!0,!0,!1,!0],e,(!1)):1===e?o=new E["default"](a.texture("road_cross"),[!0,!0,!0,!1],e,(!1)):2===e?o=new E["default"](a.texture("road_cross"),[!1,!0,!0,!0],e,(!1)):3===e&&(o=new E["default"](a.texture("road_cross"),[!0,!1,!0,!0],e,(!1)));break;case 2:0===e?o=new k["default"](a.texture("road_cross"),[!0,!0,!1,!0],e,(!1)):1===e?o=new k["default"](a.texture("road_cross"),[!0,!0,!0,!1],e,(!1)):2===e?o=new k["default"](a.texture("road_cross"),[!1,!0,!0,!0],e,(!1)):3===e&&(o=new k["default"](a.texture("road_cross"),[!0,!1,!0,!0],e,(!1)))}break;case 4:var l=Math.floor(2*Math.random());switch(l){case 0:0===e?o=new g["default"](a.texture("road_right"),[!1,!0,!1,!0],e,(!1)):1===e?o=new g["default"](a.texture("road_btm"),[!0,!1,!0,!1],e,(!1)):2===e?o=new g["default"](a.texture("road_left"),[!1,!0,!1,!0],e,(!1)):3===e&&(o=new g["default"](a.texture("road_top"),[!0,!1,!0,!1],e,(!1)));break;case 1:0===e?o=new X["default"](a.texture("road_right"),[!1,!0,!1,!0],e,(!1)):1===e?o=new X["default"](a.texture("road_btm"),[!0,!1,!0,!1],e,(!1)):2===e?o=new X["default"](a.texture("road_left"),[!1,!0,!1,!0],e,(!1)):3===e&&(o=new X["default"](a.texture("road_top"),[!0,!1,!0,!1],e,(!1)))}break;case 5:var u=Math.floor(2*Math.random());switch(u){case 0:0===e?o=new g["default"](a.texture("road_cross"),[!0,!0,!1,!0],e,(!1)):1===e?o=new g["default"](a.texture("road_cross"),[!0,!0,!0,!1],e,(!1)):2===e?o=new g["default"](a.texture("road_cross"),[!1,!0,!0,!0],e,(!1)):3===e&&(o=new g["default"](a.texture("road_cross"),[!0,!1,!0,!0],e,(!1)));break;case 1:0===e?o=new X["default"](a.texture("road_cross"),[!0,!0,!1,!0],e,(!1)):1===e?o=new X["default"](a.texture("road_cross"),[!0,!0,!0,!1],e,(!1)):2===e?o=new X["default"](a.texture("road_cross"),[!1,!0,!0,!0],e,(!1)):3===e&&(o=new X["default"](a.texture("road_cross"),[!0,!1,!0,!0],e,(!1)))}break;case 6:if(0===e)return this._createRoom(3,e,i);if(1===e)o=new O["default"](a.texture("road_river_up"),[!1,!0,!1,!1],e,(!1));else{if(2===e)return this._createRoom(3,e,i);3===e&&(o=new O["default"](a.texture("road_river_down"),[!1,!1,!1,!0],e,(!1)))}}return o.x=i.x,o.y=i.y,this._game.addChildAt(o,this._player.parent.getChildIndex(this._mist)),this._rooms.push(o),o}},{key:"_destroyRoom",value:function(t){var e=this._rooms.indexOf(t),i=e!==-1;return i&&(this._rooms.splice(e,1),t.destroy({children:!0})),i}},{key:"_roomProgression",value:function(t,e){var i=[2];return this._roomCount>=3&&i.push(3,4),this._roomCount>=6&&i.push(5,6),this._createRoom(P3.utils.selectRandom(i),t,e.clone())}},{key:"_onSwipeLeft",value:function(){this.movePlayer(0)}},{key:"_onSwipeRight",value:function(){this.movePlayer(2)}},{key:"_onSwipeUp",value:function(){this.movePlayer(1)}},{key:"_onSwipeDown",value:function(){this.movePlayer(3)}},{key:"_onPauseButtonClick",value:function(t){this.pauseGame(),this.signals.pause.dispatch(this)}},{key:"player",get:function(){return this._player}}]),e}(P3.Scene);i["default"]=R},{"./Common":4,"./Hud":9,"./Mist":12,"./Player":15,"./rooms/BaseRoom":19,"./rooms/RescueRoom":20,"./rooms/StartingRoom":21,"./rooms/frogger/RiverRoom":22,"./rooms/reveal/MonkeyRoom":23,"./rooms/reveal/RockRoom":25,"./rooms/reveal/WallRoom":26,"./rooms/trap/CampfireRoom":27,"./rooms/trap/TrapdoorRoom":29,ismobilejs:1}],8:[function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),l=function c(t,e,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,e);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:c(o,e,i)}if("value"in a)return a.value;var n=a.get;if(void 0!==n)return n.call(i)},u=t("./Common"),_=a(u),h=function(t){function e(){o(this,e);var t=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._overlay=null,t._bg=null,t._panel=null,t._playButton=null,t._sparkleEmitter=null,t}return r(e,t),s(e,[{key:"init",value:function(){var t=_["default"].assets;this._overlay=new PIXI.Graphics,this._overlay.interactive=!0,this._overlay.visible=!1,this.addChild(this._overlay),this._bg=new PIXI.Sprite(t.texture("ui_mist")),this._bg.x=.5*_["default"].STAGE_WIDTH,this._bg.y=.5*P3.View.height,this._bg.anchor=new PIXI.Point(.5,.5),this._bg.visible=!1,this._bg.blendMode=PIXI.BLEND_MODES.ADD,this.addChild(this._bg);var e=new PIXI.Container;e.x=.5*_["default"].STAGE_WIDTH,e.y=.5*P3.View.height-80,this.addChild(e);var i=t.json("particle_emitter_purple_sparkles_cloud_00");this._sparkleEmitter=new PIXI.particles.Emitter(e,[t.texture("particle_purple_sparkle_00"),t.texture("particle_purple_sparkle_01"),t.texture("particle_purple_sparkle_02"),t.texture("particle_purple_sparkle_03")],i),this._sparkleEmitter.emit=!1,this._panel=new PIXI.Sprite(t.texture("game_goal_panel")),this._panel.x=.5*_["default"].STAGE_WIDTH,this._panel.y=.5*_["default"].STAGE_HEIGHT-40,this._panel.anchor=new PIXI.Point(.5,.5),this._panel.visible=!1,this.addChild(this._panel);var a=_["default"].getUnlockCharacter();this._icon=new PIXI.Sprite(t.texture(a.textures.goal)),this._icon.y=-220,this._icon.anchor=new PIXI.Point(.5,.5),this._panel.addChild(this._icon),webfont?(this._nameLabel=new PIXI.Text(translate("goal_name").replace("[NAME]",translate(a.name)),{fontSize:"40px",fontFamily:"Arial",fill:16777215,align:"center"}),this._nameLabel.y=-70,this._nameLabel.pivot.x=.5*this._nameLabel.width,this._nameLabel.pivot.y=.5*this._nameLabel.height,this._panel.addChild(this._nameLabel)):(this._nameLabel=new PIXI.BitmapText(translate("goal_name").replace("[NAME]",translate(a.name)),{font:"60px WindsorEF-Elongated",align:"center"}),this._nameLabel.y=-70,this._nameLabel.pivot.x=.5*this._nameLabel.textWidth,this._nameLabel.pivot.y=.5*this._nameLabel.textHeight,this._panel.addChild(this._nameLabel)),this._bar=new PIXI.Sprite(t.texture("progress_back")),this._bar.x=-60,this._bar.y=36,this._bar.anchor=new PIXI.Point(.5,.5),this._panel.addChild(this._bar),this._bar.fill=new PIXI.Sprite(t.texture("progress_fill")),this._bar.fill.anchor=new PIXI.Point(.5,.5),this._bar.addChild(this._bar.fill),this._bar.fill.mask=new PIXI.Graphics,this._bar.fill.mask.x=.5*-this._bar.fill.texture.width,this._bar.fill.mask.y=.5*-this._bar.fill.texture.height,this._bar.fill.mask.scale.x=0,this._bar.fill.mask.beginFill(16711680),this._bar.fill.mask.drawRect(0,0,this._bar.fill.texture.width,this._bar.fill.texture.height),this._bar.fill.mask.endFill(),this._bar.fill.addChild(this._bar.fill.mask),this._bar.frame=new PIXI.Sprite(t.texture("progress_frame")),this._bar.frame.anchor=new PIXI.Point(.5,.5),this._bar.addChild(this._bar.frame),e=new PIXI.Container,this._bar.addChild(e),i=t.json("particle_emitter_rubyshoes_trail_00"),this._bar.emitter=new PIXI.particles.Emitter(e,[t.texture("particle_shoes_00"),t.texture("particle_shoes_01"),t.texture("particle_shoes_02"),t.texture("particle_shoes_03"),t.texture("particle_shoes_04")],i),this._bar.emitter.emit=!1,this._bar.score=new PIXI.Sprite(t.texture("progress_score")),this._bar.score.x=280,this._bar.score.anchor=new PIXI.Point(.5,.5),this._bar.addChild(this._bar.score),this._bar.score.label=new PIXI.BitmapText("0/"+a.steps,{font:"60px WindsorEF-Elongated",align:"center"}),this._bar.score.label.x=26,this._bar.score.label.y=3,this._bar.score.label.pivot.x=.5*this._bar.score.label.textWidth,this._bar.score.label.pivot.y=.5*this._bar.score.label.textHeight,this._bar.score.addChild(this._bar.score.label);var o=new P3.ButtonStates;o.normal=t.texture("btn_splash_play_off"),o.over=t.texture("btn_splash_play_over"),o.off=t.texture("btn_splash_play_down"),o.icon=t.texture("icon_splash_play_off"),o.iconOver=t.texture("icon_splash_play_over"),o.iconDown=t.texture("icon_splash_play_down"),this._playButton=new P3.Button(o),this._playButton.y=210,this._playButton.visible=!1,this._playButton.defaultScale.set(.8),this._playButton.scale.set(.8),this._playButton.interactive=!1,this._playButton.clickSoundName="sfx_btn_press_play_00",this._playButton.setShortcutIcon(t.texture("icon_keyboard_enter"),new PIXI.Point(80,80)),this._playButton.signals.click.add(this._onPlayButtonClick,this),this._panel.addChild(this._playButton)}},{key:"destroy",value:function(){TweenMax.killChildTweensOf(this),this._sparkleEmitter.destroy(),this._bar.emitter.destroy(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"appear",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"appear",this).call(this),delay(function(){_["default"].audio.playSound("sfx_dorothy_appear_start_00")},.4,this)}},{key:"resize",value:function(){this.x=.5*(P3.View.width-_["default"].STAGE_WIDTH),this._overlay.clear(),this._overlay.beginFill(0,.6),this._overlay.drawRect(.5*(_["default"].STAGE_WIDTH-P3.View.width),0,P3.View.width,P3.View.height),this._overlay.endFill()}},{key:"update",value:function(){this._sparkleEmitter.update(deltaTime),this._bar.emitter.update(deltaTime),_["default"].input.isKeyPressed(13)&&this._onPlayButtonClick(null)}},{key:"animateIn",value:function(t,e){this._overlay.alpha=0,TweenMax.to(this._overlay,.34,{delay:.2,alpha:1,ease:Power1.easeInOut,onStart:function(){this._overlay.visible=!0},onStartScope:this}),this._panel.scale=new PIXI.Point,TweenMax.to(this._panel.scale,.4,{delay:.2,x:1,y:1,ease:Back.easeOut,easeParams:[3],onStart:function(){this._panel.visible=!0},onStartScope:this,onComplete:function(){this._sparkleEmitter.emit=!0},onCompleteScope:this}),this._bg.alpha=0,TweenMax.to(this._bg,1.4,{delay:.4,alpha:1,ease:Power2.easeOut,onStart:function(){this._bg.visible=!0},onStartScope:this}),this._bg.scale=new PIXI.Point(1.4,1.4),TweenMax.to(this._bg.scale,1.4,{delay:.2,x:1,y:1,ease:Power2.easeInOut}),this._animateBar(function(){this._playButton.scale=new PIXI.Point(.5,.5),TweenMax.to(this._playButton.scale,.4,{x:this._playButton.defaultScale.x,y:this._playButton.defaultScale.y,ease:Back.easeOut,easeParams:[2],onStart:function(){this._playButton.visible=!0},onStartScope:this,onComplete:function(){this._playButton.interactive=!0},onCompleteScope:this})},this)}},{key:"animateOut",value:function(t,e){TweenMax.to(this,.34,{alpha:0,ease:Power2.easeInOut,onComplete:t,onCompleteScope:e})}},{key:"_animateBar",value:function(t,e){e=e||window;var i=_["default"].getUnlockCharacter(),a=_["default"].getTotalCharacterSteps(),o=_["default"].getRoomCount(),n=(o-a)/i.steps;TweenMax.to(this._bar.fill.mask.scale,n,{delay:.6,x:n,ease:Power1.easeInOut,onStart:function(){this._bar.emitter.emit=!0,_["default"].audio.playSound("sfx_magic_reward_00")},onStartScope:this,onUpdate:function(){this._bar.score.label.text=Math.round(this._bar.fill.mask.scale.x*i.steps)+"/"+i.steps,this._bar.score.label.validate(),this._bar.score.label.pivot.x=.5*this._bar.score.label.textWidth,this._bar.emitter.updateOwnerPos(this._bar.fill.mask.x+this._bar.fill.mask.width,4)},onUpdateScope:this,onComplete:function(){this._bar.emitter.emit=!1,t&&t.call(e)},onCompleteScope:this})}},{key:"_onPlayButtonClick",value:function(t){this._playButton.interactive=!1,this.animateOut(function(){this.signals.next.dispatch(this)},this)}}]),e}(P3.Scene);i["default"]=h},{"./Common":4}],9:[function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),l=t("./Common"),u=a(l),_=function(t){function e(){o(this,e);var t=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),i=u["default"].assets;t._score=new PIXI.Sprite(i.texture("ui_score")),t._score.x=144,t._score.y=100,t._score.anchor=new PIXI.Point(.5,.5),t._score.scale.set(.8),t.addChild(t._score),t._score.label=new PIXI.BitmapText("0",{font:"80px WindsorEF-Elongated",align:"center"}),t._score.label.x=-4,t._score.label.y=26,t._score.label.pivot.x=.5*t._score.label.textWidth,t._score.label.pivot.y=.5*t._score.label.textHeight,t._score.addChild(t._score.label),t._best=new PIXI.Sprite(i.texture("ui_best")),t._best.x=40,t._best.y=226,t._best.anchor=new PIXI.Point(0,.5),t._best.scale.set(.8),t.addChild(t._best),t._best.label=new PIXI.BitmapText("0",{font:"60px WindsorEF-Elongated",align:"center"}),t._best.label.x=.5*t._best.texture.width+26,t._best.label.y=2,t._best.label.pivot.x=.5*t._best.label.textWidth,t._best.label.pivot.y=.5*t._best.label.textHeight,t._best.addChild(t._best.label);var a=new P3.ButtonStates;return a.normal=PIXI.Texture.EMPTY,a.icon=i.texture("icon_primary_small_pause_off"),a.iconOver=i.texture("icon_primary_small_pause_over"),a.iconDown=i.texture("icon_primary_small_pause_down"),t._pauseButton=new P3.Button(a),t._pauseButton.defaultScale.set(.8),t._pauseButton.scale.set(.8),t._pauseButton.clickSoundName="sfx_btn_press_play_00",t._pauseButton.setShortcutIcon(i.texture("icon_keyboard_esc"),new PIXI.Point(50,50)),t.addChild(t._pauseButton),t._tutorial=new PIXI.Container,t._tutorial.visible=!1,t.addChild(t._tutorial),t}return r(e,t),s(e,[{key:"resize",value:function(){this._pauseButton.x=P3.View.width-120,this._pauseButton.y=140}},{key:"setScore",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this._score.label.text=t.toString(),this._score.label.validate(),this._score.label.pivot.x=.5*this._score.label.textWidth,this._score.label.pivot.y=.5*this._score.label.textHeight,e){var i=new TimelineMax;i.append(TweenMax.to(this._score.scale,.2,{x:.96,y:.96,ease:Power0.easeNone})),i.append(TweenMax.to(this._score.scale,.16,{x:.8,y:.8,ease:Power2.easeInOut}))}}},{key:"setBestScore",value:function(t){this._best.label.text=t.toString(),this._best.label.pivot.x=.5*this._best.label.textWidth}},{key:"showTutorialAnimation",value:function(){TweenMax.killChildTweensOf(this._tutorial),this._tutorial.removeChildren();var t=260,e=u["default"].assets,i=new PIXI.Sprite(e.texture("tutorial_left_key_normal_00"));i.x=.5*P3.View.width-t,i.y=.5*P3.View.height,i.anchor=new PIXI.Point(.5,.5),this._tutorial.addChild(i);var a=new PIXI.Sprite(e.texture("tutorial_right_key_normal_00"));a.x=.5*P3.View.width+t,a.y=.5*P3.View.height,a.anchor=new PIXI.Point(.5,.5),this._tutorial.addChild(a);var o=new P3.MovieClipSequence;o.addTextures([e.texture("tutorial_up_key_normal_00"),e.texture("tutorial_up_key_pressed_00")]);var n=new P3.MovieClip(o);n.x=.5*P3.View.width,n.y=.5*P3.View.height-t,n.anchor=new PIXI.Point(.5,.5),n.looping=!0,n.animationSpeed=2,this._tutorial.addChild(n);var r=new PIXI.Sprite(e.texture("tutorial_down_key_normal_00"));r.x=.5*P3.View.width,r.y=.5*P3.View.height+t,r.anchor=new PIXI.Point(.5,.5),this._tutorial.addChild(r),this._tutorial.alpha=0,TweenMax.to(this._tutorial,.24,{delay:3,alpha:1,ease:Power1.easeInOut,onStart:function(){this._tutorial.visible=!0,n.play()},onStartScope:this})}},{key:"showTutorialAnimationMobile",value:function(){TweenMax.killChildTweensOf(this._tutorial),this._tutorial.removeChildren(),this._tutorial.visible=!0;var t=u["default"].assets,e=new PIXI.Sprite(t.texture("tutorial_finger"));e.x=.5*P3.View.width+64,e.y=.5*P3.View.height,e.anchor=new PIXI.Point(.5,.5),this._tutorial.addChild(e),e.alpha=0;var i=new TimelineMax({delay:3,repeat:-1});i.append(TweenMax.to(e,.24,{alpha:1,ease:Power1.easeInOut})),i.append(TweenMax.to(e,.6,{delay:.2,y:e.y-240,ease:Power2.easeInOut})),i.append(TweenMax.to(e,.24,{alpha:0,ease:Power1.easeInOut})),i.append(TweenMax.delayedCall(1,function(){}))}},{key:"hideTutorialAnimation",value:function(){TweenMax.to(this._tutorial,.34,{alpha:0,ease:Power1.easeInOut,onComplete:function(){TweenMax.killChildTweensOf(this._tutorial),this._tutorial.removeChildren(),this._tutorial.alpha=0,this._tutorial.visible=!1},onCompleteScope:this})}},{key:"pauseButton",get:function(){return this._pauseButton}}]),e}(PIXI.Container);i["default"]=_},{"./Common":4}],10:[function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),l=function c(t,e,i){
null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,e);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:c(o,e,i)}if("value"in a)return a.value;var n=a.get;if(void 0!==n)return n.call(i)},u=t("./Common"),_=a(u),h=function(t){function e(){o(this,e);var t=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._image1=null,t._image2=null,t._image3=null,t._playButton=null,t}return r(e,t),s(e,[{key:"init",value:function(){var t=_["default"].assets;this._image1=new PIXI.Sprite(t.texture("intro_panel_001")),this._image1.x=.5*_["default"].STAGE_WIDTH,this._image1.y=.5*P3.View.height,this._image1.anchor=new PIXI.Point(.5,.5),this._image1.visible=!1,this.addChild(this._image1),this._image2=new PIXI.Sprite(t.texture("intro_panel_002")),this._image2.x=.5*_["default"].STAGE_WIDTH,this._image2.y=.5*P3.View.height,this._image2.anchor=new PIXI.Point(.5,.5),this._image2.visible=!1,this.addChild(this._image2),this._image3=new PIXI.Sprite(t.texture("intro_panel_003")),this._image3.x=.5*_["default"].STAGE_WIDTH,this._image3.y=.5*P3.View.height,this._image3.anchor=new PIXI.Point(.5,.5),this._image3.visible=!1,this.addChild(this._image3);var e=new PIXI.Sprite(t.texture("intro_overlay_top"));e.x=.5*_["default"].STAGE_WIDTH,e.y=.5*P3.View.height,e.anchor=new PIXI.Point(.5,.5),this.addChild(e);var i=new PIXI.Sprite(t.texture("intro_overlay_btm"));i.x=.5*_["default"].STAGE_WIDTH,i.y=.5*P3.View.height,i.anchor=new PIXI.Point(.5,.5),this.addChild(i),this._skipButton=P3.Button.create(t.texture("icon_primary_large_next_off"),t.texture("icon_primary_large_next_over"),t.texture("icon_primary_large_next_down")),this._skipButton.visible=!1,this._skipButton.defaultScale.set(.8),this._skipButton.scale.set(.8),this._skipButton.setShortcutIcon(t.texture("icon_keyboard_enter"),new PIXI.Point(60,70)),this._skipButton.signals.click.add(this._onSkipButtonClick,this),this.addChild(this._skipButton)}},{key:"destroy",value:function(){}},{key:"show",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"show",this).call(this),this._skipButton.interactive=!0}},{key:"resize",value:function(){this.x=.5*(P3.View.width-_["default"].STAGE_WIDTH),this._skipButton.x=.5*(_["default"].STAGE_WIDTH+P3.View.width)-140,this._skipButton.y=P3.View.height-160}},{key:"update",value:function(){_["default"].input.isKeyPressed(13)&&this._onSkipButtonClick(null)}},{key:"animateIn",value:function(){var t=this._image1.x;this._image1.x-=this._image1.texture.width,TweenMax.to(this._image1,.4,{delay:.2,x:t,ease:Back.easeOut,easeParams:[1],onStart:function(){this._image1.visible=!0,_["default"].audio.playSound("music_swipe_stab_blocked_03")},onStartScope:this}),t=this._image2.x,this._image2.x+=this._image2.texture.width,TweenMax.to(this._image2,.4,{delay:1,x:t,ease:Back.easeOut,easeParams:[1],onStart:function(){this._image2.visible=!0,_["default"].audio.playSound("music_swipe_stab_blocked_01")},onStartScope:this}),t=this._image3.x,this._image3.x-=this._image3.texture.width,TweenMax.to(this._image3,.4,{delay:1.8,x:t,ease:Back.easeOut,easeParams:[1],onStart:function(){this._image3.visible=!0,_["default"].audio.playSound("music_swipe_stab_blocked_00")},onStartScope:this}),this._skipButton.scale=new PIXI.Point,TweenMax.to(this._skipButton.scale,.4,{delay:_["default"].isFirstTime?2:.2,x:this._skipButton.defaultScale.x,y:this._skipButton.defaultScale.y,ease:Back.easeOut,easeParams:[2],onStart:function(){this._skipButton.interactive=!1,this._skipButton.visible=!0},onStartScope:this,onComplete:function(){this._skipButton.interactive=!0},onCompleteScope:this})}},{key:"animateOut",value:function(){}},{key:"_onSkipButtonClick",value:function(t){this._skipButton.interactive=!1,_["default"].audio.playSound("sfx_btn_press_play_00"),this.signals.next.dispatch(this)}}]),e}(P3.Scene);i["default"]=h},{"./Common":4}],11:[function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),r=t("./Application"),s=a(r),l=t("./BoomerangPreloaderScene"),u=a(l),_=t("./Common"),h=a(_),c=t("ismobilejs"),d=a(c),p=function(){function t(e,i){o(this,t),this._width=e,this._height=i,this._game=null,this._preloader=null}return n(t,[{key:"init",value:function(){h["default"].assets=new P3.AssetManager,h["default"].audio=P3.Button.audio=new P3.AudioManager,h["default"].language=language,Howler.mobileAutoEnable=!1,PIXI.settings.RETINA_PREFIX=/\_(?=[^_]*$)(.+)x/,PIXI.settings.MIPMAP_TEXTURES=!1,TweenMax.defaultOverwrite="none",TweenMax.ticker.fps(60);var t={width:this._width,height:this._height,holderId:"game",portrait:!1,rotateImageUrl:"./assets/images/localisation/rotate_"+language+".jpg",rotateImageColor:"#000000",aspectRatioFillHeight:!0},e=new P3.View(t);e.signals.ready.addOnce(function(t){var e={};e.view=t,e.transparent=!1,e.antialias=!1,e.preserveDrawingBuffer=!1,e.resolution=1;var i=new PIXI.Container;h["default"].stage=i;var a=new P3.Input;a.init(i,t),h["default"].input=a,P3.utils.isCocoonJS()&&(i.scale.x=window.innerHeight/e.height,i.scale.y=window.innerHeight/e.height);var o=P3.utils.isCocoonJS()?new PIXI.WebGLRenderer(window.innerWidth,window.innerHeight,e):PIXI.autoDetectRenderer(this._width,this._height,e);o.backgroundColor=1057580,h["default"].renderer=o,h["default"].isWebGL=o instanceof PIXI.WebGLRenderer;var n=new P3.SceneManager(o);h["default"].scene=n,h["default"].stage.addChild(n.view);var r=new PIXI.Graphics;r.beginFill(16777215),r.drawRect(0,0,1,1),r.endFill(),h["default"].blankTexture=r.generateTexture(),PIXI.ticker.shared.add(function(t){window.deltaTime=t/PIXI.settings.TARGET_FPMS/1e3,n.update(),o.render(h["default"].stage),a.update()},this),d["default"].any&&(P3.Button.prototype.setShortcutIcon=function(){this._shortcutIcon.visible=!1}),window.delay=function(t,e,i){return TweenMax.delayedCall(e,t,[],i)},window.delayarg=function(t,e,i,a){return TweenMax.delayedCall(e,t,i,a)},window.translate=function(t){var e=h["default"].config.strings[t];return e=e&&e[h["default"].language],"undefined"!=typeof e?e:t},this.loadPreloader()},this),e.signals.resize.add(this.onCanvasResize,this),h["default"].view=e}},{key:"loadPreloader",value:function(){var t=[{name:"preloader_1x",url:"images/preloader_1x.json"},{name:"strings",url:"data/strings.json"},{name:"characters",url:"data/characters.json"},{name:"costumes",url:"data/costumes.json"},{name:"windsor_75",url:"fonts/windsor_75.xml"}];t.length?(h["default"].assets.addFiles(t,"assets/"),h["default"].assets.signals.complete.addOnce(function(){this.createConfig(),this.loadAssets()},this),h["default"].assets.load()):this.loadAssets()}},{key:"loadAssets",value:function(){var t=[{name:"splash_bg",url:"images/splash_bg.jpg"},{name:"pause_bg",url:"images/pause_bg.jpg"},{name:"game_bg_001",url:"images/game_bg_001.jpg"},{name:"game_bg_002",url:"images/game_bg_002.jpg"},{name:"game_bg_003",url:"images/game_bg_003.jpg"},{name:"game_bg_004",url:"images/game_bg_004.jpg"},{name:"game_bg_005",url:"images/game_bg_005.jpg"},{name:"game_bg_006",url:"images/game_bg_006.jpg"},{name:"game_bg_007",url:"images/game_bg_007.jpg"},{name:"game_0_1x",url:"images/game_0_1x.json"},{name:"game_1_1x",url:"images/game_1_1x.json"},{name:"game_2_1x",url:"images/game_2_1x.json"},{name:"game_ui_0_1x",url:"images/game_ui_0_1x.json"},{name:"game_ui_1_1x",url:"images/game_ui_1_1x.json"},{name:"game_ui_2_1x",url:"images/game_ui_2_1x.json"},{name:"buttons_1x",url:"images/buttons_1x.json"},{name:"ui_0_1x",url:"images/ui_0_1x.json"},{name:"ui_1_1x",url:"images/ui_1_1x.json"},{name:"pause_mist_mask",url:"images/pause_mist_mask.png"},{name:"particle_emitter_fairydust_00",url:"particles/particle_emitter_fairydust_00.json"},{name:"particle_emitter_magic_fire_1",url:"particles/particle_emitter_magic_fire_1.json"},{name:"particle_emitter_magic_fire_2",url:"particles/particle_emitter_magic_fire_2.json"},{name:"particle_emitter_rubyshoes_trail_00",url:"particles/particle_emitter_rubyshoes_trail_00.json"},{name:"particle_emitter_purple_sparkles_cloud_00",url:"particles/particle_emitter_purple_sparkles_cloud_00.json"},{name:"dorothy",url:"images/dorothy.json"}],e=["sfx_dorothy_disappear_00","sfx_dorothy_restart_click_heels_00","sfx_btn_press_play_00","sfx_swipe_out_00","sfx_swipe_out_01","sfx_swipe_blocked_00","sfx_witch_cackle_00","sfx_dorothy_skid_in_01","sfx_wardrobe_appear_00","sfx_wardrobe_next_costume_00","sfx_wardrobe_previous_costume_00","sfx_wardrobe_attach_outfit_generic_00","sfx_wardrobe_attach_outfit_lion_00","sfx_wardrobe_attach_outfit_scarecrow_00","sfx_wardrobe_attach_outfit_tinman_00","sfx_ambient_birdsong_no_danger_00","sfx_magic_reward_00","sfx_dorothy_appear_start_00","sfx_rescue_generic_friend_00","sfx_rescue_lion_00","sfx_rescue_queen_complete_01","sfx_rescue_scarecrow_00","sfx_rescue_toto_bark_00","sfx_game_door_disappear_00","sfx_game_fire_magic_appear_00","sfx_game_object_appear_01","sfx_game_trapdoor_close_00","sfx_game_trapdoor_open_00","sfx_btn_help_window_swish_00","sfx_highscore_new_01","music_main_menu_00","music_ambient_wardrobe_loop_00","music_ambient_forest_loop_00","music_game_over_stab_00","music_results_score_screen_00","music_rescue_generic_00","music_pausehelp_menu_01","music_swipe_stab_blocked_00","music_swipe_stab_blocked_01","music_swipe_stab_blocked_02","music_swipe_stab_blocked_03"];t.length?(this._preloader=new u["default"],h["default"].scene.show(this._preloader),h["default"].assets.addFiles(t,"assets/"),h["default"].assets.signals.progress.add(this.onLoadingProgress,this),h["default"].assets.signals.complete.addOnce(this.onLoadingCompleted,this),h["default"].assets.load(),h["default"].audio.addSounds(e,[".ogg",".m4a",".mp3"],"assets/audio/")):this.startGame()}},{key:"createConfig",value:function(){var t=h["default"].assets,e={};e.strings=t.json("strings"),e.characters=t.json("characters").characters,e.costumes=t.json("costumes").costumes,h["default"].config=e,console.log(e)}},{key:"startGame",value:function(){delay(function(){this._game=new s["default"],this._game.init()},1,this)}},{key:"onLoadingProgress",value:function(t){this._preloader.loaded=t.progress/100}},{key:"onLoadingCompleted",value:function(){h["default"].assets.signals.progress.removeAll(),h["default"].assets.signals.complete.removeAll(),this._preloader.loaded=1;var t=h["default"].assets,e=new P3.ButtonStates;e.normal=t.texture("btn_splash_play_off"),e.over=t.texture("btn_splash_play_over"),e.off=t.texture("btn_splash_play_down"),e.icon=t.texture("icon_splash_play_off"),e.iconOver=t.texture("icon_splash_play_over"),e.iconDown=t.texture("icon_splash_play_down"),this._playButton=new P3.Button(e),this._playButton.scale.set(0),this._playButton.defaultScale.set(.8),this._playButton.clickSoundName="sfx_btn_press_play_00",this._playButton.signals.click.add(this._onPlayButtonClick,this),this._preloader.addChild(this._playButton),this._playButton.x=.5*h["default"].STAGE_WIDTH,this._playButton.y=.5*h["default"].STAGE_HEIGHT+180,this._preloader._bar.visible=!1,this._preloader._text.visible=!1,TweenMax.to(this._playButton.scale,.4,{x:this._playButton.defaultScale.x,y:this._playButton.defaultScale.y,ease:Back.easeOut,easeParams:[2],onStart:function(){this._playButton.interactive=!1,this._playButton.visible=!0},onStartScope:this,onComplete:function(){this._playButton.interactive=!0},onCompleteScope:this})}},{key:"_onPlayButtonClick",value:function(){this.startGame()}},{key:"onCanvasResize",value:function(t){t&&(h["default"].renderer.resize(P3.View.width,P3.View.height),h["default"].scene&&h["default"].scene.resize())}}]),t}();i["default"]=p},{"./Application":2,"./BoomerangPreloaderScene":3,"./Common":4,ismobilejs:1}],12:[function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var s=t("./Common"),l=a(s),u=function(t){function e(){o(this,e);var t=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),i=l["default"].assets;return t._view=new PIXI.Sprite(i.texture("mist")),t._view.blendMode=PIXI.BLEND_MODES.ADD,t._view.anchor=new PIXI.Point(.5,.5),t.addChild(t._view),t}return r(e,t),e}(PIXI.Container);i["default"]=u},{"./Common":4}],13:[function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),l=function c(t,e,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,e);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:c(o,e,i)}if("value"in a)return a.value;var n=a.get;if(void 0!==n)return n.call(i)},u=t("./Common"),_=a(u),h=function(t){function e(t){o(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i._overlay=null,i._mist=null,i._radial1=null,i._radial2=null,i._wear=null,i._costume=t,i._yesButton=null,i._noButton=null,i._sparkleEmitter=null,i}return r(e,t),s(e,[{key:"init",value:function(){var t=_["default"].assets;this._overlay=new PIXI.Graphics,this._overlay.interactive=!0,this._overlay.visible=!1,this.addChild(this._overlay),this._mist=new PIXI.Sprite(t.texture("ui_mist")),this._mist.x=.5*P3.View.width,this._mist.y=.5*_["default"].STAGE_HEIGHT,this._mist.anchor=new PIXI.Point(.5,.5),this._mist.visible=!1,this.addChild(this._mist);var e=new PIXI.Container;e.x=.5*P3.View.width,e.y=.5*P3.View.height,this.addChild(e);var i=t.json("particle_emitter_purple_sparkles_cloud_00");this._sparkleEmitter=new PIXI.particles.Emitter(e,[t.texture("particle_purple_sparkle_00"),t.texture("particle_purple_sparkle_01"),t.texture("particle_purple_sparkle_02"),t.texture("particle_purple_sparkle_03")],i),this._sparkleEmitter.emit=!1,this._radial1=new PIXI.Sprite(t.texture("new_radial_001")),this._radial1.x=.5*P3.View.width,this._radial1.y=.5*_["default"].STAGE_HEIGHT-40,this._radial1.anchor=new PIXI.Point(.5,.5),this._radial1.blendMode=PIXI.BLEND_MODES.ADD,this._radial1.visible=!1,this.addChild(this._radial1),this._radial2=new PIXI.Sprite(t.texture("new_radial_002")),this._radial2.x=.5*P3.View.width,this._radial2.y=.5*_["default"].STAGE_HEIGHT-40,this._radial2.anchor=new PIXI.Point(.5,.5),this._radial2.blendMode=PIXI.BLEND_MODES.ADD,this._radial2.visible=!1,this.addChild(this._radial2),this._avatar=new PIXI.Sprite(t.texture(this._costume.textures["new"])),this._avatar.x=.5*P3.View.width,this._avatar.y=.5*_["default"].STAGE_HEIGHT-60,this._avatar.anchor=new PIXI.Point(.5,.5),this._avatar.visible=!1,this.addChild(this._avatar),this._wear=new PIXI.Sprite(t.texture("new_dress_panel")),this._wear.x=.5*P3.View.width,this._wear.y=.5*(_["default"].STAGE_HEIGHT+P3.View.height)-220,this._wear.anchor=new PIXI.Point(.5,.5),this.addChild(this._wear),webfont?(this._wear.label=new PIXI.Text(translate("new_costume_title"),{fontSize:"48px",fontFamily:"Arial",fill:16777215,align:"center"}),this._wear.label.y=-40,this._wear.label.pivot.x=.5*this._wear.label.width,this._wear.label.pivot.y=.5*this._wear.label.height,this._wear.addChild(this._wear.label)):(this._wear.label=new PIXI.BitmapText(translate("new_costume_title"),{font:"80px WindsorEF-Elongated",align:"center"}),this._wear.label.y=-40,this._wear.label.pivot.x=.5*this._wear.label.textWidth,this._wear.label.pivot.y=.5*this._wear.label.textHeight,this._wear.addChild(this._wear.label)),this._yesButton=P3.Button.create(t.texture("icon_primary_large_tick_off"),t.texture("icon_primary_large_tick_over"),t.texture("icon_primary_large_tick_down")),this._yesButton.x=-120,this._yesButton.y=82,this._yesButton.defaultScale.set(.8),this._yesButton.scale.set(.8),this._yesButton.clickSoundName="sfx_btn_press_play_00",this._yesButton.setShortcutIcon(t.texture("icon_keyboard_enter"),new PIXI.Point(60,70)),this._yesButton.signals.click.add(this._onYesButtonClick,this),this._wear.addChild(this._yesButton),this._noButton=P3.Button.create(t.texture("icon_primary_large_cross_off"),t.texture("icon_primary_large_cross_over"),t.texture("icon_primary_large_cross_down")),this._noButton.x=120,this._noButton.y=82,this._noButton.defaultScale.set(.8),this._noButton.scale.set(.8),this._noButton.clickSoundName="sfx_btn_press_play_00",this._noButton.setShortcutIcon(t.texture("icon_keyboard_esc"),new PIXI.Point(60,70)),this._noButton.signals.click.add(this._onNoButtonClick,this),this._wear.addChild(this._noButton)}},{key:"destroy",value:function(){TweenMax.killChildTweensOf(this),this._sparkleEmitter.destroy(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"appear",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"appear",this).call(this),delay(function(){_["default"].audio.playSound("sfx_dorothy_appear_start_00")},1,this),_["default"].audio.playSound("music_rescue_generic_00")}},{key:"resize",value:function(){this.y=.5*(P3.View.height-_["default"].STAGE_HEIGHT),this._overlay.clear(),this._overlay.beginFill(0,.6),this._overlay.drawRect(0,.5*(_["default"].STAGE_HEIGHT-P3.View.height),P3.View.width,P3.View.height),this._overlay.endFill()}},{key:"update",value:function(){this._radial1.rotation+=.12*deltaTime,this._radial2.rotation+=.2*deltaTime,this._sparkleEmitter.update(deltaTime);var t=_["default"].input;t.isKeyPressed(13)&&this._onYesButtonClick(null),t.isKeyPressed(27)&&this._onNoButtonClick(null)}},{key:"animateIn",value:function(t,e){this._overlay.alpha=0,TweenMax.to(this._overlay,.34,{delay:.2,alpha:1,ease:Power1.easeInOut,onStart:function(){this._overlay.visible=!0},onStartScope:this}),this._mist.alpha=0,TweenMax.to(this._mist,1.4,{delay:.4,alpha:.25,ease:Power2.easeOut,onStart:function(){this._mist.visible=!0},onStartScope:this}),this._mist.scale=new PIXI.Point(1.4,1.4),TweenMax.to(this._mist.scale,1.4,{delay:.2,x:1,y:1,ease:Power2.easeInOut}),this._radial1.rotation=Math.random()*(2*Math.PI),this._radial1.scale=new PIXI.Point,TweenMax.to(this._radial1.scale,.4,{delay:.8,x:1,y:1,ease:Back.easeOut,easeParams:[2],onStart:function(){this._radial1.visible=!0},onStartScope:this}),this._radial2.rotation=Math.random()*(2*Math.PI),this._radial2.scale=new PIXI.Point,TweenMax.to(this._radial2.scale,.4,{delay:.7,x:1,y:1,ease:Back.easeOut,easeParams:[2],onStart:function(){this._radial2.visible=!0},onStartScope:this}),this._avatar.scale=new PIXI.Point,TweenMax.to(this._avatar.scale,.5,{delay:.6,x:1,y:1,ease:Back.easeOut,easeParams:[2],onStart:function(){this._avatar.visible=!0,_["default"].audio.playSound("sfx_magic_reward_00")},onStartScope:this,onComplete:function(){this._sparkleEmitter.emit=!0},onCompleteScope:this}),this._wear.scale=new PIXI.Point,TweenMax.to(this._wear.scale,.4,{delay:1,x:1,y:1,ease:Back.easeOut,easeParams:[2],onStart:function(){this._wear.visible=!0},onStartScope:this})}},{key:"animateOut",value:function(t,e){TweenMax.to(this,.34,{alpha:0,ease:Power2.easeInOut,onComplete:t,onCompleteScope:e})}},{key:"_onYesButtonClick",value:function(t){this.animateOut(function(){this.signals.next.dispatch(this,!0)},this)}},{key:"_onNoButtonClick",value:function(t){this.animateOut(function(){this.signals.next.dispatch(this,!1)},this)}},{key:"costume",get:function(){return this._costume}}]),e}(P3.Scene);i["default"]=h},{"./Common":4}],14:[function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),l=function p(t,e,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,e);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:p(o,e,i)}if("value"in a)return a.value;var n=a.get;if(void 0!==n)return n.call(i)},u=t("./Common"),_=a(u),h=t("ismobilejs"),c=a(h),d=function(t){function e(){o(this,e);var t=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._pageIndex=0,t._ball=null,t._dorothy=null,t._mist1=null,t._mist2=null,t._blink=null,t._nextButton=null,t._previousButton=null,t._homeButton=null,t._resumeButton=null,t._muteButton=null,t._helpAnim=null,t}return r(e,t),s(e,[{key:"init",value:function(){var t=_["default"].assets,e=new PIXI.Sprite(t.texture("pause_bg"));e.position.set(.5*_["default"].STAGE_WIDTH,.5*P3.View.height),e.anchor.set(.5),e.height=768,e.scale.x=e.scale.y,this.addChild(e),this._blink=new PIXI.Sprite(t.texture("pause_witch_blink")),this._blink.x=.5*_["default"].STAGE_WIDTH,this._blink.y=.5*_["default"].STAGE_HEIGHT-322,this._blink.visible=!1,this._blink.scale.set(e.scale.x),this._blink.anchor.set(.5),this.addChild(this._blink),this._ball=new PIXI.Container,this._ball.x=.5*_["default"].STAGE_WIDTH,this._ball.y=.5*P3.View.height,this._ball.scale.set(.8),this.addChild(this._ball),this._ball.help=new PIXI.Sprite(t.texture("pause_tutorial_001")),this._ball.help.anchor=new PIXI.Point(.5,.5),this._ball.addChild(this._ball.help),this._dorothy=new PIXI.Sprite(t.texture("pause_dorothy")),this._dorothy.anchor=new PIXI.Point(.5,.5),this._ball.addChild(this._dorothy),this._dorothy.mask=new PIXI.Graphics,this._dorothy.mask.beginFill(16711680),this._dorothy.mask.drawCircle(0,0,300),this._dorothy.mask.endFill(),this._ball.addChild(this._dorothy.mask);var i=new PIXI.Sprite(t.texture("pause_mist_mask"));i.anchor=new PIXI.Point(.5,.5),this._ball.addChild(i),this._mist1=new PIXI.Sprite(t.texture("pause_mist_001")),this._mist1.x=-140,this._mist1.rotation=Math.random()*Math.PI*2,this._mist1.scale=new PIXI.Point(4,4),this._mist1.anchor=new PIXI.Point(.5,.5),this._mist1.tint=3660686,this._mist1.blendMode=PIXI.BLEND_MODES.ADD,this._mist1.mask=i,this._ball.addChild(this._mist1),this._mist2=new PIXI.Sprite(t.texture("pause_mist_002")),this._mist2.x=140,this._mist2.rotation=Math.random()*Math.PI*2,this._mist2.scale=new PIXI.Point(4,4),this._mist2.anchor=new PIXI.Point(.5,.5),this._mist2.tint=2330462,this._mist2.blendMode=PIXI.BLEND_MODES.ADD,this._mist2.mask=i,this._ball.addChild(this._mist2),this._ball.shine=new PIXI.Sprite(t.texture("pause_tutorial_highlight")),this._ball.shine.alpha=.4,this._ball.shine.anchor=new PIXI.Point(.5,.5),this._ball.shine.blendMode=PIXI.BLEND_MODES.ADD,this._ball.addChild(this._ball.shine),this._ball.overlay=new PIXI.Sprite(t.texture("pause_tutorial_overlay")),this._ball.overlay.anchor=new PIXI.Point(.5,.5),this._ball.addChild(this._ball.overlay);var a=new P3.ButtonStates;a.normal=PIXI.Texture.EMPTY,a.icon=t.texture("icon_primary_small_home_off"),a.iconOver=t.texture("icon_primary_small_home_over"),a.iconDown=t.texture("icon_primary_small_home_down"),this._homeButton=new P3.Button(a),this._homeButton.x=.5*_["default"].STAGE_WIDTH-260,this._homeButton.y=P3.View.height-160,this._homeButton.visible=!1,this._homeButton.defaultScale.set(.8),this._homeButton.scale.set(.8),this._homeButton.clickSoundName="sfx_btn_press_play_00",this._homeButton.setShortcutIcon(t.texture("icon_keyboard_esc"),new PIXI.Point(50,50)),this._homeButton.signals.click.add(this._onHomeButtonClick,this),this.addChild(this._homeButton),a=new P3.ButtonStates,a.normal=PIXI.Texture.EMPTY,a.icon=t.texture("icon_primary_large_play_off"),a.iconOver=t.texture("icon_primary_large_play_over"),a.iconDown=t.texture("icon_primary_large_play_down"),this._resumeButton=new P3.Button(a),this._resumeButton.x=.5*_["default"].STAGE_WIDTH,this._resumeButton.y=P3.View.height-160,this._resumeButton.visible=!1,this._resumeButton.defaultScale.set(.8),this._resumeButton.scale.set(.8),this._resumeButton.clickSoundName="sfx_btn_press_play_00",this._resumeButton.setShortcutIcon(t.texture("icon_keyboard_enter"),new PIXI.Point(60,70)),this._resumeButton.signals.click.add(this._onResumeButtonClick,this),this.addChild(this._resumeButton),a=new P3.ButtonStates,a.normal=PIXI.Texture.EMPTY,a.icon=t.texture("icon_primary_small_sound_off"),a.iconOver=t.texture("icon_primary_small_sound_over"),a.iconDown=t.texture("icon_primary_small_sound_down"),a.iconAlt=t.texture("icon_primary_small_mute_off"),a.iconOverAlt=t.texture("icon_primary_small_mute_over"),a.iconDownAlt=t.texture("icon_primary_small_mute_down"),this._muteButton=new P3.MuteButton(a),this._muteButton.x=.5*_["default"].STAGE_WIDTH+260,this._muteButton.y=P3.View.height-160,this._muteButton.visible=!1,this._muteButton.defaultScale.set(.8),this._muteButton.scale.set(.8),this._muteButton.clickSoundName="sfx_btn_press_play_00",this._muteButton.setShortcutIcon(t.texture("icon_keyboard_m"),new PIXI.Point(50,50)),this.addChild(this._muteButton),this.showPage(this._pageIndex)}},{key:"destroy",value:function(){TweenMax.killChildTweensOf(this),this._helpAnim.kill(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"resize",value:function(){this.x=.5*(P3.View.width-_["default"].STAGE_WIDTH)}},{key:"update",value:function(){this._mist1.rotation+=.4*deltaTime,this._mist2.rotation-=.5*deltaTime,_["default"].input.isKeyPressed(13)&&this._onResumeButtonClick(null),_["default"].input.isKeyPressed(27)&&this._onHomeButtonClick(null),_["default"].input.isKeyPressed(77)&&this._muteButton._onMouseClick(null)}},{key:"appear",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"appear",this).call(this),this._startBlink(),_["default"].audio.playMusic("music_pausehelp_menu_01",{fadeIn:2})}},{key:"show",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"show",this).call(this),this._resumeButton.interactive=!0,this._homeButton.interactive=!0}},{key:"animateIn",value:function(t,e){this._resumeButton.scale=new PIXI.Point,TweenMax.to(this._resumeButton.scale,.4,{delay:.2,x:this._resumeButton.defaultScale.x,y:this._resumeButton.defaultScale.y,ease:Back.easeOut,easeParams:[2],onStart:function(){this._resumeButton.interactive=!1,this._resumeButton.visible=!0},onStartScope:this,onComplete:function(){this._resumeButton.interactive=!0},onCompleteScope:this}),this._homeButton.scale=new PIXI.Point,TweenMax.to(this._homeButton.scale,.4,{delay:.26,x:this._homeButton.defaultScale.x,y:this._homeButton.defaultScale.y,ease:Back.easeOut,easeParams:[2],onStart:function(){this._homeButton.interactive=!1,this._homeButton.visible=!0},onStartScope:this,onComplete:function(){this._homeButton.interactive=!0},onCompleteScope:this}),this._muteButton.scale=new PIXI.Point,TweenMax.to(this._muteButton.scale,.4,{delay:.32,x:this._muteButton.defaultScale.x,y:this._muteButton.defaultScale.y,ease:Back.easeOut,easeParams:[2],onStart:function(){this._muteButton.interactive=!1,this._muteButton.visible=!0},onStartScope:this,onComplete:function(){this._muteButton.interactive=!0},onCompleteScope:this}),TweenMax.to(this._mist1,2,{alpha:.6,ease:Power1.easeInOut,yoyo:!0,repeat:-1}),TweenMax.to(this._mist1,3,{alpha:.6,ease:Power1.easeInOut,yoyo:!0,repeat:-1}),c["default"].any?this._showAnimationMobile():this._showAnimation()}},{key:"animateOut",value:function(t,e){}},{key:"showPage",value:function(t){}},{key:"_startBlink",value:function(){this._stopBlink(),this._blinkTween=delay(function(){this._blink.visible=!0,this._blinkTween=delay(function(){this._blink.visible=!1,this._startBlink()},.06,this)},2+2*Math.random(),this)}},{key:"_stopBlink",value:function(){this._blinkTween&&this._blinkTween.kill()}},{key:"_showAnimation",value:function(){var t=_["default"].assets,e=180,i=new PIXI.Sprite(t.texture("tutorial_left_key_normal_00"));i.x=-e,i.anchor=new PIXI.Point(.5,.5),this._ball.addChildAt(i,this._dorothy.parent.getChildIndex(this._dorothy));var a=new P3.MovieClipSequence;a.addTextures([t.texture("tutorial_right_key_normal_00"),t.texture("tutorial_right_key_pressed_00"),t.texture("tutorial_right_key_normal_00")]);var o=new P3.MovieClip(a);o.x=e,o.anchor=new PIXI.Point(.5,.5),o.animationSpeed=2,this._ball.addChildAt(o,this._dorothy.parent.getChildIndex(this._dorothy));var n=new PIXI.Sprite(t.texture("tutorial_up_key_normal_00"));n.y=-e,n.anchor=new PIXI.Point(.5,.5),this._ball.addChildAt(n,this._dorothy.parent.getChildIndex(this._dorothy));var r=new PIXI.Sprite(t.texture("tutorial_down_key_normal_00"));r.y=e,r.anchor=new PIXI.Point(.5,.5),this._ball.addChildAt(r,this._dorothy.parent.getChildIndex(this._dorothy)),this._helpAnim=new TimelineMax({repeat:-1}),this._helpAnim.append(TweenMax.delayedCall(0,function(){this._dorothy.scale.x=1},[],this)),this._helpAnim.append(TweenMax.delayedCall(1,function(){o.gotoAndPlay(0)})),this._helpAnim.append(TweenMax.to(this._dorothy,.4,{delay:.4,x:340,ease:Power2.easeInOut,onStart:function(){this._dorothy.scale.x=-1},onStartScope:this})),this._helpAnim.append(TweenMax.delayedCall(1,function(){}))}},{key:"_showAnimationMobile",value:function(){var t=_["default"].assets,e=new PIXI.Sprite(t.texture("tutorial_finger"));e.x=60,e.y=60,e.anchor=new PIXI.Point(.5,.5),e.alpha=0,e.visible=!1,e.mask=this._dorothy.mask,this._ball.addChildAt(e,this._dorothy.parent.getChildIndex(this._dorothy)+1),this._helpAnim=new TimelineMax({delay:1,repeat:-1}),this._helpAnim.append(TweenMax.to(e,.4,{alpha:1,ease:Power1.easeInOut,onStart:function(){e.visible=!0,this._dorothy.scale.x=1},onStartScope:this})),this._helpAnim.append(TweenMax.to(e,.4,{delay:.2,x:380,ease:Power2.easeInOut,onStart:function(){_["default"].audio.playSound("sfx_btn_help_window_swish_00")},onStartScope:this})),this._helpAnim.append(TweenMax.to(this._dorothy,.4,{x:340,ease:Power2.easeInOut,onStart:function(){this._dorothy.scale.x=-1},onStartScope:this})),this._helpAnim.append(TweenMax.delayedCall(1,function(){}))}},{key:"_onNextButtonClick",value:function(t){++this._pageIndex,this.showPage(this._pageIndex)}},{key:"_onPreviousButtonClick",value:function(t){--this._pageIndex,this.showPage(this._pageIndex)}},{key:"_onHomeButtonClick",value:function(t){this._resumeButton.interactive=!1,
this._homeButton.interactive=!1,this.signals.home.dispatch(this)}},{key:"_onResumeButtonClick",value:function(t){this._resumeButton.interactive=!1,this._homeButton.interactive=!1,this.signals.next.dispatch(this)}}]),e}(P3.Scene);i["default"]=d},{"./Common":4,ismobilejs:1}],15:[function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),l=function c(t,e,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,e);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:c(o,e,i)}if("value"in a)return a.value;var n=a.get;if(void 0!==n)return n.call(i)},u=t("./Common"),_=a(u),h=function(t){function e(){o(this,e);var t=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));t.invulnerable=!1;var i=_["default"].assets,a=_["default"].getCostume(_["default"].costumeId),r=new PIXI.Container;t.addChild(r),t._view=new PIXI.spine.Spine(i.spineData("dorothy")),t._view.position.set(6,0),t._view.scale.set(.2,.2),t._view.skeleton.setToSetupPose(),t._view.skeleton.setSkin(null),t._view.autoUpdate=!1,t._view.update(0),r.addChild(t._view);var s=t._view.stateData;s.setMix("idle_happy","idle_think",.1),s.setMix("idle_happy","idle_ready",.1),s.setMix("idle_think","idle_happy",.1),s.setMix("idle_ready","idle_happy",.1),s.setMix("exit_up","idle_think",.1),s.setMix("exit_up","idle_ready",.1),s.setMix("exit_side_left","idle_think",.05),s.setMix("exit_side_left","idle_ready",.05),s.setMix("exit_side_right","idle_think",.05),s.setMix("exit_side_right","idle_ready",.05),s.setMix("exit_down","idle_think",.1),s.setMix("exit_down","idle_ready",.1),t._shadow=new PIXI.Sprite(i.texture("char_shadow")),t._shadow.x=4,t._shadow.anchor=new PIXI.Point(.5,.5),t.addChild(t._shadow);var l=t._view.skeleton;return l.setSkin(null),l.setSkinByName(a.skin),t.on("added",t.init,t),t}return r(e,t),s(e,[{key:"init",value:function(){this.off("added",this.init);var t=new PIXI.Container;this.parent.addChildAt(t,this.parent.getChildIndex(this));var e=_["default"].assets,i=e.json("particle_emitter_rubyshoes_trail_00");this._shoesEmitter=new PIXI.particles.Emitter(t,[e.texture("particle_shoes_00"),e.texture("particle_shoes_01"),e.texture("particle_shoes_02"),e.texture("particle_shoes_03"),e.texture("particle_shoes_04")],i),this._shoesEmitter.emit=!1,this.playIdleState()}},{key:"destroy",value:function(){TweenMax.killTweensOf(this._view.scale),this._shoesEmitter.destroy(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this,{removeChildren:!0})}},{key:"update",value:function(t){this._view.update(t),this._shoesEmitter.updateOwnerPos(this.x-4,this.y),this._shoesEmitter.update(t)}},{key:"startShoesEmitter",value:function(){this._shoesEmitter.emit=!0}},{key:"stopShoesEmitter",value:function(){this._shoesEmitter.emit=!1}},{key:"playHappyState",value:function(){this._view.state.setAnimation(0,"idle_happy",!0),this._view.state.addAnimation(0,P3.utils.selectRandom(["idle_think","idle_ready"]),!0,0)}},{key:"playIdleState",value:function(){this._view.state.setAnimation(0,P3.utils.selectRandom(["idle_think","idle_ready"]),!0)}},{key:"playMoveState",value:function(t){var e=void 0;switch(t){case 0:e="exit_side_left";break;case 1:e="exit_up";break;case 2:e="exit_side_right";break;case 3:e="exit_down"}this._view.state.setAnimation(0,e,!0)}},{key:"playDieState",value:function(){this._view.state.setAnimation(0,"lose")}},{key:"changeCostume",value:function(t){_["default"].costumeId=t.id;var e=this._view.skeleton;e.setSkin(null),e.setSkinByName(t.skin)}},{key:"view",get:function(){return this._view}}]),e}(PIXI.Container);i["default"]=h},{"./Common":4}],16:[function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),l=function c(t,e,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,e);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:c(o,e,i)}if("value"in a)return a.value;var n=a.get;if(void 0!==n)return n.call(i)},u=t("./Common"),_=a(u),h=function(t){function e(t){o(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i._overlay=null,i._mist=null,i._radial1=null,i._radial2=null,i._name=null,i._character=t,i._sparkleEmitter=null,i}return r(e,t),s(e,[{key:"init",value:function(){var t=_["default"].assets;this._overlay=new PIXI.Graphics,this._overlay.interactive=!0,this._overlay.visible=!1,this.addChild(this._overlay),this._mist=new PIXI.Sprite(t.texture("ui_mist")),this._mist.x=.5*P3.View.width,this._mist.y=.5*_["default"].STAGE_HEIGHT,this._mist.anchor=new PIXI.Point(.5,.5),this._mist.visible=!1,this.addChild(this._mist);var e=new PIXI.Container;e.x=.5*P3.View.width,e.y=.5*P3.View.height,this.addChild(e);var i=t.json("particle_emitter_purple_sparkles_cloud_00");this._sparkleEmitter=new PIXI.particles.Emitter(e,[t.texture("particle_purple_sparkle_00"),t.texture("particle_purple_sparkle_01"),t.texture("particle_purple_sparkle_02"),t.texture("particle_purple_sparkle_03")],i),this._sparkleEmitter.emit=!1,this._radial1=new PIXI.Sprite(t.texture("new_radial_001")),this._radial1.x=.5*P3.View.width,this._radial1.y=.5*_["default"].STAGE_HEIGHT-40,this._radial1.anchor=new PIXI.Point(.5,.5),this._radial1.blendMode=PIXI.BLEND_MODES.ADD,this._radial1.visible=!1,this.addChild(this._radial1),this._radial2=new PIXI.Sprite(t.texture("new_radial_002")),this._radial2.x=.5*P3.View.width,this._radial2.y=.5*_["default"].STAGE_HEIGHT-40,this._radial2.anchor=new PIXI.Point(.5,.5),this._radial2.blendMode=PIXI.BLEND_MODES.ADD,this._radial2.visible=!1,this.addChild(this._radial2),this._avatar=new PIXI.Sprite(t.texture(this._character.textures["new"])),this._avatar.x=.5*P3.View.width,this._avatar.y=.5*_["default"].STAGE_HEIGHT,this._avatar.anchor=new PIXI.Point(.5,.5),this._avatar.visible=!1,this.addChild(this._avatar),this._avatar.glow=new PIXI.Sprite(t.texture(this._character.textures.glow)),this._avatar.glow.anchor=new PIXI.Point(.5,.5),this._avatar.glow.blendMode=PIXI.BLEND_MODES.ADD,this._avatar.addChild(this._avatar.glow),this._name=new PIXI.Sprite(t.texture("new_panel")),this._name.x=.5*P3.View.width,this._name.y=.5*(_["default"].STAGE_HEIGHT+P3.View.height)-200,this._name.anchor=new PIXI.Point(.5,.5),this._name.visible=!1,this.addChild(this._name),webfont?(this._name.label=new PIXI.Text(translate(this._character.name),{fontSize:"44px",fontFamily:"Arial",fill:16777215,align:"center"}),this._name.label.y=-10,this._name.label.pivot.x=.5*this._name.label.width,this._name.label.pivot.y=.5*this._name.label.height,this._name.addChild(this._name.label)):(this._name.label=new PIXI.BitmapText(translate(this._character.name),{font:"60px WindsorEF-Elongated",align:"center"}),this._name.label.y=-10,this._name.label.pivot.x=.5*this._name.label.textWidth,this._name.label.pivot.y=.5*this._name.label.textHeight,this._name.addChild(this._name.label)),this._nextButton=P3.Button.create(t.texture("icon_primary_large_next_off"),t.texture("icon_primary_large_next_over"),t.texture("icon_primary_large_next_down")),this._nextButton.x=.5*P3.View.width+280,this._nextButton.y=P3.View.height-160,this._nextButton.visible=!1,this._nextButton.defaultScale.set(.8),this._nextButton.scale.set(.8),this._nextButton.clickSoundName="sfx_btn_press_play_00",this._nextButton.setShortcutIcon(t.texture("icon_keyboard_enter"),new PIXI.Point(60,70)),this._nextButton.signals.click.add(this._onNextButtonClick,this),this.addChild(this._nextButton)}},{key:"destroy",value:function(){TweenMax.killChildTweensOf(this),this._sparkleEmitter.destroy(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"appear",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"appear",this).call(this),delay(function(){_["default"].audio.playSound("sfx_dorothy_appear_start_00")},1,this),_["default"].audio.playSound("music_rescue_generic_00")}},{key:"resize",value:function(){this.y=.5*(P3.View.height-_["default"].STAGE_HEIGHT),this._overlay.clear(),this._overlay.beginFill(0,.6),this._overlay.drawRect(0,.5*(_["default"].STAGE_HEIGHT-P3.View.height),P3.View.width,P3.View.height),this._overlay.endFill()}},{key:"update",value:function(){this._radial1.rotation+=.12*deltaTime,this._radial2.rotation+=.2*deltaTime,this._sparkleEmitter.update(deltaTime);var t=_["default"].input;t.isKeyPressed(13)&&this._onNextButtonClick(null)}},{key:"animateIn",value:function(t,e){this._overlay.alpha=0,TweenMax.to(this._overlay,.34,{delay:.2,alpha:1,ease:Power1.easeInOut,onStart:function(){this._overlay.visible=!0},onStartScope:this}),this._mist.alpha=0,TweenMax.to(this._mist,1.4,{delay:.4,alpha:.25,ease:Power2.easeOut,onStart:function(){this._mist.visible=!0},onStartScope:this}),this._mist.scale=new PIXI.Point(1.4,1.4),TweenMax.to(this._mist.scale,1.4,{delay:.2,x:1,y:1,ease:Power2.easeInOut}),this._radial1.rotation=Math.random()*(2*Math.PI),this._radial1.scale=new PIXI.Point,TweenMax.to(this._radial1.scale,.4,{delay:.8,x:1,y:1,ease:Back.easeOut,easeParams:[2],onStart:function(){this._radial1.visible=!0},onStartScope:this}),this._radial2.rotation=Math.random()*(2*Math.PI),this._radial2.scale=new PIXI.Point,TweenMax.to(this._radial2.scale,.4,{delay:.7,x:1,y:1,ease:Back.easeOut,easeParams:[2],onStart:function(){this._radial2.visible=!0},onStartScope:this}),this._avatar.scale=new PIXI.Point,TweenMax.to(this._avatar.scale,.5,{delay:.6,x:1,y:1,ease:Back.easeOut,easeParams:[2],onStart:function(){this._avatar.visible=!0,_["default"].audio.playSound("sfx_magic_reward_00")},onStartScope:this,onComplete:function(){this._sparkleEmitter.emit=!0,_["default"].audio.playSound(this._character.sounds.rescue||"sfx_rescue_generic_friend_00")},onCompleteScope:this}),this._avatar.glow.alpha=1,TweenMax.to(this._avatar.glow,.6,{delay:.74,alpha:0,ease:Power2.easeInOut}),this._name.scale=new PIXI.Point,TweenMax.to(this._name.scale,.4,{delay:1,x:1,y:1,ease:Back.easeOut,easeParams:[2],onStart:function(){this._name.visible=!0},onStartScope:this}),this._nextButton.scale=new PIXI.Point(.5,.5),TweenMax.to(this._nextButton.scale,.4,{delay:1.2,x:this._nextButton.defaultScale.x,y:this._nextButton.defaultScale.y,ease:Back.easeOut,easeParams:[1],onStart:function(){this._nextButton.visible=!0},onStartScope:this,onComplete:function(){this._nextButton.interactive=!0},onCompleteScope:this})}},{key:"animateOut",value:function(t,e){TweenMax.to(this,.34,{alpha:0,ease:Power2.easeInOut,onComplete:t,onCompleteScope:e})}},{key:"_onNextButtonClick",value:function(t){this._nextButton.interactive=!1,this.animateOut(function(){this.signals.next.dispatch(this)},this)}},{key:"character",get:function(){return this._character}}]),e}(P3.Scene);i["default"]=h},{"./Common":4}],17:[function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),l=function c(t,e,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,e);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:c(o,e,i)}if("value"in a)return a.value;var n=a.get;if(void 0!==n)return n.call(i)},u=t("./Common"),_=a(u),h=function(t){function e(){o(this,e);var t=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._bg=null,t._mistTop=null,t._mistRight=null,t._mistBottom=null,t._dorothy=null,t._logo=null,t._playButton=null,t._costumeButton=null,t._muteButton=null,t._dustEmitter=null,t._shoesEmitter=null,t}return r(e,t),s(e,[{key:"init",value:function(){var t=_["default"].assets;this._bg=new PIXI.Sprite(t.texture("splash_bg")),this._bg.y=.5*P3.View.height,this._bg.width=_["default"].STAGE_WIDTH,this._bg.anchor.y=.5,this.addChild(this._bg),this._mistTop=new PIXI.Sprite(t.texture("splash_mist_top")),this._mistTop.x=.5*_["default"].STAGE_WIDTH,this._mistTop.y=-140,this._mistTop.anchor.x=.5,this._mistTop.blendMode=PIXI.BLEND_MODES.ADD,this._mistTop.visible=!1,this.addChild(this._mistTop),this._mistBottom=new PIXI.Sprite(t.texture("splash_mist_btm")),this._mistBottom.x=.5*_["default"].STAGE_WIDTH,this._mistBottom.y=P3.View.height+120,this._mistBottom.anchor.set(.5,1),this._mistBottom.blendMode=PIXI.BLEND_MODES.ADD,this._mistBottom.visible=!1,this.addChild(this._mistBottom);var e=new PIXI.Container;e.x=.5*_["default"].STAGE_WIDTH-160,e.y=.5*_["default"].STAGE_HEIGHT+66,e.visible=!1,this.addChild(e),this._dorothy=new PIXI.spine.Spine(t.spineData("dorothy")),this._dorothy.position.set(0,114),this._dorothy.scale.set(.26),this._dorothy.skeleton.setToSetupPose(),this._dorothy.skeleton.setSkin(null),this._dorothy.autoUpdate=!1,this._dorothy.update(0),e.addChild(this._dorothy);var i=this._dorothy.skeleton;i.setSkin(null),i.setSkinByName("dorothy"),this._dorothy.stateData.setMix("exit_side_left","idle_ready",.2),e=new PIXI.Container,this.addChild(e);var a=t.json("particle_emitter_rubyshoes_trail_00");this._shoesEmitter=new PIXI.particles.Emitter(e,[t.texture("particle_shoes_00"),t.texture("particle_shoes_01"),t.texture("particle_shoes_02"),t.texture("particle_shoes_03"),t.texture("particle_shoes_04")],a),this._shoesEmitter.emit=!1;var o=new PIXI.Sprite(t.texture("splash_fg_top"));o.x=.5*_["default"].STAGE_WIDTH,o.y=-110,o.anchor.x=.5,this.addChild(o);var n=new PIXI.Sprite(t.texture("splash_fg_btm"));n.x=.5*_["default"].STAGE_WIDTH,n.y=P3.View.height+120,n.anchor.set(.5,1),this.addChild(n),e=new PIXI.Container,e.x=.5*_["default"].STAGE_WIDTH,e.y=.5*_["default"].STAGE_HEIGHT,this.addChild(e),a=t.json("particle_emitter_fairydust_00"),this._dustEmitter=new PIXI.particles.Emitter(e,[t.texture("particle_fairy_dust_00"),t.texture("particle_fairy_dust_01"),t.texture("particle_fairy_dust_02"),t.texture("particle_fairy_dust_03")],a),this._dustEmitter.emit=!0,this._logo=new PIXI.Sprite(t.texture("splash_title_en")),this._logo.x=.5*_["default"].STAGE_WIDTH,this._logo.y=.5*_["default"].STAGE_HEIGHT-220,this._logo.anchor=new PIXI.Point(.5,.5),this._logo.scale.set(.8),this._logo.visible=!1,this.addChild(this._logo);var r=new P3.ButtonStates;r.normal=t.texture("btn_splash_play_off"),r.over=t.texture("btn_splash_play_over"),r.off=t.texture("btn_splash_play_down"),r.icon=t.texture("icon_splash_play_off"),r.iconOver=t.texture("icon_splash_play_over"),r.iconDown=t.texture("icon_splash_play_down"),this._playButton=new P3.Button(r),this._playButton.visible=!1,this._playButton.scale.set(.8),this._playButton.defaultScale.set(.8),this._playButton.clickSoundName="sfx_btn_press_play_00",this._playButton.setShortcutIcon(t.texture("icon_keyboard_enter"),new PIXI.Point(80,80)),this._playButton.signals.click.add(this._onPlayButtonClick,this),this.addChild(this._playButton),r=new P3.ButtonStates,r.normal=t.texture("btn_splash_small_down"),r.over=t.texture("btn_splash_small_over"),r.off=t.texture("btn_splash_small_off"),r.icon=t.texture("icon_splash_costume_off"),r.iconOver=t.texture("icon_splash_costume_over"),r.iconDown=t.texture("icon_splash_costume_down"),r.shortcutIcon=t.texture("icon_keyboard_esc"),this._costumeButton=new P3.Button(r),this._costumeButton.visible=!1,this._costumeButton.scale.set(.8),this._costumeButton.defaultScale.set(.8),this._costumeButton.clickSoundName="sfx_btn_press_play_00",this._costumeButton.setShortcutIcon(t.texture("icon_keyboard_esc"),new PIXI.Point(80,80)),this._costumeButton.signals.click.add(this._onCostumeButtonClick,this),this.addChild(this._costumeButton),r=new P3.ButtonStates,r.normal=PIXI.Texture.EMPTY,r.icon=t.texture("icon_primary_small_sound_off"),r.iconOver=t.texture("icon_primary_small_sound_over"),r.iconDown=t.texture("icon_primary_small_sound_down"),r.iconAlt=t.texture("icon_primary_small_mute_off"),r.iconOverAlt=t.texture("icon_primary_small_mute_over"),r.iconDownAlt=t.texture("icon_primary_small_mute_down"),r.shortcutIcon=t.texture("icon_keyboard_m"),this._muteButton=new P3.MuteButton(r),this._muteButton.visible=!1,this._muteButton.scale.set(.8),this._muteButton.defaultScale.set(.8),this._muteButton.clickSoundName="sfx_btn_press_play_00",this._muteButton.setShortcutIcon(t.texture("icon_keyboard_m"),new PIXI.Point(50,50)),this.addChild(this._muteButton),console.log(_["default"].getUnlockCharacter()),console.log(_["default"].getPreviousCharacter())}},{key:"destroy",value:function(){this._shoesEmitter.destroy(),this._dustEmitter.destroy(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"appear",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"appear",this).call(this),_["default"].audio.playMusic("music_main_menu_00",{fadeIn:2}),_["default"].audio.playSound("sfx_magic_reward_00"),delay(function(){_["default"].audio.playSound("sfx_witch_cackle_00")},1)}},{key:"show",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"show",this).call(this),this._playButton.interactive=!0,this._costumeButton.interactive=!0}},{key:"resize",value:function(){this.x=.5*(P3.View.width-_["default"].STAGE_WIDTH),this._playButton.x=.5*_["default"].STAGE_WIDTH+230,this._playButton.y=.5*_["default"].STAGE_HEIGHT+240,this._costumeButton.x=.5*_["default"].STAGE_WIDTH-230,this._costumeButton.y=.5*_["default"].STAGE_HEIGHT+240,this._muteButton.x=.5*(_["default"].STAGE_WIDTH+P3.View.width)-140,this._muteButton.y=120}},{key:"update",value:function(){this._dorothy.update(deltaTime),this._shoesEmitter.update(deltaTime),this._dustEmitter.update(deltaTime),_["default"].input.isKeyPressed(13)&&this._onPlayButtonClick(null),_["default"].input.isKeyPressed(27)&&this._onCostumeButtonClick(null),_["default"].input.isKeyPressed(77)&&this._muteButton._onMouseClick(null)}},{key:"animateIn",value:function(t,e){var i=this._dorothy.parent.x;this._dorothy.parent.x+=680,TweenMax.to(this._dorothy.parent,.8,{x:i,ease:Back.easeOut,easeParams:[.6],onStart:function(){this._dorothy.parent.visible=!0,this._dorothy.state.setAnimation(0,"exit_side_left",!0),this._shoesEmitter.emit=!0},onStartScope:this,onUpdate:function(){this._shoesEmitter.updateOwnerPos(this._dorothy.parent.x+12,this._dorothy.parent.y+90)},onUpdateScope:this,onComplete:function(){this._dorothy.state.setAnimation(0,"idle_ready",!0),this._shoesEmitter.emit=!1},onCompleteScope:this}),this._dorothy.parent.scale=new PIXI.Point(.34,.34),TweenMax.to(this._dorothy.parent.scale,.8,{x:1,y:1,ease:Back.easeOut,easeParams:[.6]}),i=this._mistTop.y,this._mistTop.y-=this._mistTop.texture.height,TweenMax.to(this._mistTop,2,{y:i,ease:Back.easeOut,easeParams:[.6],onStart:function(){this._mistTop.visible=!0},onStartScope:this}),i=this._mistBottom.y,this._mistBottom.y+=this._mistBottom.texture.height,TweenMax.to(this._mistBottom,1.8,{y:i,ease:Back.easeOut,easeParams:[.6],onStart:function(){this._mistBottom.visible=!0},onStartScope:this}),this._logo.scale=new PIXI.Point,TweenMax.to(this._logo.scale,.6,{delay:.1,x:.8,y:.8,ease:Back.easeOut,easeParams:[3],onStart:function(){this._logo.visible=!0},onStartScope:this}),this._playButton.scale=new PIXI.Point,TweenMax.to(this._playButton.scale,.4,{delay:.2,x:this._playButton.defaultScale.x,y:this._playButton.defaultScale.y,ease:Back.easeOut,easeParams:[2],onStart:function(){this._playButton.interactive=!1,this._playButton.visible=!0},onStartScope:this,onComplete:function(){this._playButton.interactive=!0},onCompleteScope:this}),this._costumeButton.scale=new PIXI.Point,TweenMax.to(this._costumeButton.scale,.4,{delay:.3,x:this._costumeButton.defaultScale.x,y:this._costumeButton.defaultScale.y,ease:Back.easeOut,easeParams:[2],onStart:function(){this._costumeButton.interactive=!1,this._costumeButton.visible=!0},onStartScope:this,onComplete:function(){this._costumeButton.interactive=!0},onCompleteScope:this}),this._muteButton.scale=new PIXI.Point,TweenMax.to(this._muteButton.scale,.4,{delay:.4,x:this._muteButton.defaultScale.x,y:this._muteButton.defaultScale.y,ease:Back.easeOut,easeParams:[1],onStart:function(){this._muteButton.interactive=!1,this._muteButton.visible=!0},onStartScope:this,onComplete:function(){this._muteButton.interactive=!0},onCompleteScope:this})}},{key:"animateOut",value:function(){}},{key:"_onPlayButtonClick",value:function(t){this._playButton.interactive=!1,this._costumeButton.interactive=!1,this.signals.next.dispatch(this)}},{key:"_onCostumeButtonClick",value:function(t){this._playButton.interactive=!1,this._costumeButton.interactive=!1,this.signals.previous.dispatch(this)}}]),e}(P3.Scene);i["default"]=h},{"./Common":4}],18:[function(t,e,i){(function(e){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}var a=t("./Main"),o=i(a);e.Main=o["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Main":11}],19:[function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),l=function c(t,e,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,e);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:c(o,e,i)}if("value"in a)return a.value;var n=a.get;if(void 0!==n)return n.call(i)},u=t("../Common"),_=a(u),h=function(t){function e(t,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];o(this,e);var s=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));s._overlay=null,s._directions=i,s._safeDirections=[!1,!1,!1,!1],s._fromDirection=a,s._isSafe=r;var l=_["default"].assets,u=new PIXI.Sprite(l.texture(P3.utils.selectRandom(["game_bg_001","game_bg_002","game_bg_003","game_bg_004","game_bg_005","game_bg_006","game_bg_007"])));u.anchor=new PIXI.Point(.5,.5),s.addChild(u);var h=new PIXI.Sprite(t);return h.anchor=new PIXI.Point(.5,.5),s.addChild(h),s.on("added",s.init,s),s}return r(e,t),s(e,[{key:"init",value:function(){this.off("added",this.init),this._createDustEmitter(),this._createOverlay()}},{key:"destroy",value:function(){this._overlay.destroy(),this._dustEmitter&&this._dustEmitter.destroy(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this,{removeChildren:!0})}},{key:"update",value:function(t){this._dustEmitter&&this._dustEmitter.update(t)}},{key:"animateIn",value:function(t,e,i){i=i||window,this.alpha=0,TweenMax.to(this,.24,{delay:t,alpha:1,ease:Power1.easeInOut,onComplete:e,onCompleteParams:[this],onCompleteScope:i}),this._overlay.alpha=0,TweenMax.to(this._overlay,.24,{delay:t,alpha:1,ease:Power1.easeInOut})}},{key:"animateOut",value:function(t,e,i){i=i||window,TweenMax.to(this,.4,{delay:t,ease:Power1.easeInOut,onComplete:e,onCompleteParams:[this],onCompleteScope:i}),TweenMax.to(this._overlay,.4,{delay:t,ease:Power1.easeInOut})}},{key:"checkMove",value:function(t){return this._safeDirections[t]}},{key:"activate",value:function(){for(var t=0;t<this._directions.length;++t)this._safeDirections[t]=this._directions[t]}},{key:"deactivate",value:function(){this._dustEmitter&&(this._dustEmitter.emit=!1)}},{key:"resumeRoom",value:function(){}},{key:"pauseRoom",value:function(){}},{key:"_createOverlay",value:function(){var t=_["default"].assets;this._overlay=new PIXI.Sprite(t.texture(P3.utils.selectRandom(["frame_001","frame_002","frame_003","frame_004"]))),this._overlay.x=this.x,this._overlay.y=this.y,this._overlay.width=1030,this._overlay.height=1030,this._overlay.anchor=new PIXI.Point(.5,.5),this.parent.addChild(this._overlay)}},{key:"_createDustEmitter",value:function(){var t=_["default"].assets,e=new PIXI.Container;e.x=this.x,e.y=this.y,this.parent.addChild(e);var i=t.json("particle_emitter_fairydust_00");this._dustEmitter=new PIXI.particles.Emitter(e,[t.texture("particle_fairy_dust_00"),t.texture("particle_fairy_dust_01"),t.texture("particle_fairy_dust_02"),t.texture("particle_fairy_dust_03")],i),this._dustEmitter.emit=!0}},{key:"overlay",get:function(){return this._overlay}},{key:"fromDirection",get:function(){return this._fromDirection}},{key:"isSafe",get:function(){return this._isSafe}}]),e}(PIXI.Container);i["default"]=h},{"../Common":4}],20:[function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),l=function p(t,e,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,e);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:p(o,e,i)}if("value"in a)return a.value;var n=a.get;if(void 0!==n)return n.call(i)},u=t("./BaseRoom"),_=a(u),h=t("../Common"),c=a(h),d=function(t){function e(t,i,a,r){o(this,e);var s=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i,a,r,!0));return s._character=t,s._friend=null,s._sparkleEmitter=null,s._tweens=[],s}return r(e,t),s(e,[{key:"init",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).call(this),this._createFriend();var t=c["default"].audio;this._ambientSFX=t.playSound("sfx_ambient_birdsong_no_danger_00",{loop:!0}),t.fadeIn(this._ambientSFX,1);var i=new PIXI.Container;this.addChild(i);var a=c["default"].assets,o=a.json("particle_emitter_purple_sparkles_cloud_00");o.spawnType="circle",o.spawnCircle={x:0,y:0,r:120},this._sparkleEmitter=new PIXI.particles.Emitter(i,[a.texture("particle_purple_sparkle_00"),a.texture("particle_purple_sparkle_01"),a.texture("particle_purple_sparkle_02"),a.texture("particle_purple_sparkle_03")],o)}},{key:"destroy",value:function(){for(var t=0;t<this._tweens.length;++t){var i=this._tweens[t];i.kill()}this._tweens.length=0,this._sparkleEmitter.destroy(),c["default"].audio.fadeOut(this._ambientSFX,1,function(){this._ambientSFX.destroy()},this),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"update",value:function(t){this._sparkleEmitter&&(this._sparkleEmitter.updateOwnerPos(this._friend.globe.x,this._friend.globe.y),this._sparkleEmitter.update(t))}},{key:"activate",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"activate",this).call(this);var t=this._friend.globe,i=new TimelineMax;this._tweens.push(i),i.append(TweenMax.to(t,.4,{delay:.4,y:t.y-20,ease:Power1.easeInOut})),i.append(TweenMax.to(t,1.4,{x:0,y:0,ease:Power1.easeInOut,onStart:function(){this._tweens.push(TweenMax.to(t.scale,1.4,{x:1.4,y:1.4,ease:Power1.easeInOut}))},onStartScope:this,onComplete:function(){var e=3,i=.06,a=new TimelineMax({delay:.2,repeat:8,onComplete:function(){this._sparkleEmitter.emit=!1,this._tweens.push(TweenMax.to(t,.34,{alpha:0,ease:Power1.easeInOut}))},onCompleteScope:this});this._tweens.push(a),a.append(TweenMax.to(t,.5*i,{x:e,ease:Power2.easeOut})),a.append(TweenMax.to(t,i,{x:-e,ease:Power2.easeInOut})),a.append(TweenMax.to(t,.5*i,{x:0,ease:Power2.easeIn}))},onCompleteScope:this}))}},{key:"resumeRoom",value:function(){this._ambientSFX.play()}},{key:"pauseRoom",value:function(){this._ambientSFX.pause()}},{key:"_createFriend",value:function(){var t=c["default"].assets;switch(this._friend=new PIXI.Container,this.addChild(this._friend),this._fromDirection){case 0:this._friend.x=-180;break;case 1:this._friend.y=-180;break;case 2:this._friend.x=180;break;case 3:this._friend.y=180}this._friend.base=new PIXI.Sprite(t.texture("globe_base")),this._friend.base.anchor=new PIXI.Point(.5,.5),this._friend.addChild(this._friend.base),this._friend.globe=new PIXI.Sprite(t.texture("globe_back")),this._friend.globe.x=this._friend.x,this._friend.globe.y=this._friend.y-80,this._friend.globe.anchor=new PIXI.Point(.5,.5),this._overlay.addChild(this._friend.globe),this._friend.globe.avatar=new PIXI.Sprite(t.texture(this._character.textures.globe)),this._friend.globe.avatar.anchor=new PIXI.Point(.5,.5),this._friend.globe.addChild(this._friend.globe.avatar),this._friend.globe.glow=new PIXI.Sprite(t.texture("globe_top")),this._friend.globe.glow.anchor=new PIXI.Point(.5,.5),this._friend.globe.glow.blendMode=PIXI.BLEND_MODES.ADD,this._friend.globe.addChild(this._friend.globe.glow)}},{key:"character",get:function(){return this._character;
}}]),e}(_["default"]);i["default"]=d},{"../Common":4,"./BaseRoom":19}],21:[function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),l=function p(t,e,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,e);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:p(o,e,i)}if("value"in a)return a.value;var n=a.get;if(void 0!==n)return n.call(i)},u=t("./BaseRoom"),_=a(u),h=t("../Common"),c=a(h),d=function(t){function e(){o(this,e);var t=c["default"].assets,i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t.texture("road_start"),[!1,!0,!1,!1],-1,!0));return i.activate(0),i}return r(e,t),s(e,[{key:"init",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).call(this);var t=c["default"].audio;this._ambientSFX=t.playSound("sfx_ambient_birdsong_no_danger_00",{loop:!0}),t.fadeIn(this._ambientSFX,1)}},{key:"destroy",value:function(){c["default"].audio.fadeOut(this._ambientSFX,1,function(){this._ambientSFX.destroy()},this),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"resumeRoom",value:function(){this._ambientSFX.play()}},{key:"pauseRoom",value:function(){this._ambientSFX.pause()}}]),e}(_["default"]);i["default"]=d},{"../Common":4,"./BaseRoom":19}],22:[function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),l=t("../../Common"),u=a(l),_=t("../BaseRoom"),h=a(_),c=function(t){function e(t,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];o(this,e);var s=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,a,r)),l=u["default"].assets;switch(s._river=new PIXI.Sprite(l.texture("river_back")),s._river.anchor=new PIXI.Point(.5,.5),s.addChild(s._river),a){case 1:s._river.y=-154;break;case 3:s._river.y=142}s._river.layer1=new PIXI.Container,s._river.addChild(s._river.layer1);for(var _=0;_<2;++_){var h=new PIXI.Sprite(l.texture("river_water_tile_002"));h.x=_*h.texture.width,h.anchor=new PIXI.Point(.5,.5),s._river.layer1.addChild(h)}s._river.layer2=new PIXI.Container,s._river.addChild(s._river.layer2);for(var c=0;c<2;++c){var d=new PIXI.Sprite(l.texture("river_water_tile_001"));d.x=c*d.texture.width,d.anchor=new PIXI.Point(.5,.5),s._river.layer2.addChild(d)}s._platforms=[];for(var p=0;p<2;++p){var f=new PIXI.Sprite(PIXI.Texture.EMPTY);f.x=200*Math.random()+p*(340+120*Math.random()),f.y=-8,f.anchor=new PIXI.Point(.5,.5),s._river.addChild(f),s._platforms.push(f),s._randomizePlatform(f)}return s._river.layer3=new PIXI.Sprite(l.texture("river_top")),s._river.layer3.anchor=new PIXI.Point(.5,.5),s._river.addChild(s._river.layer3),s}return r(e,t),s(e,[{key:"update",value:function(t){this._river.layer1.x-=100*t,this._river.layer1.x<-P3.View.width&&(this._river.layer1.x=0),this._river.layer2.x-=30*t,this._river.layer2.x<-P3.View.width&&(this._river.layer2.x=0),this._directions[1]?this._safeDirections[1]=!1:this._directions[3]&&(this._safeDirections[3]=!1);for(var e=0;e<this._platforms.length;++e){var i=this._platforms[e];i.x-=260*t,i.x<.6*-P3.View.width&&(this._randomizePlatform(i),i.x=.6*P3.View.width);var a=Math.abs(-i.x),o=a<110;this._directions[1]&&o?this._safeDirections[1]=!0:this._directions[3]&&o&&(this._safeDirections[3]=!0)}}},{key:"_randomizePlatform",value:function(t){var e=u["default"].assets;t.texture=e.texture(P3.utils.selectRandom(["river_lillypad_001","river_lillypad_002","river_log_001","river_log_002"]))}}]),e}(h["default"]);i["default"]=c},{"../../Common":4,"../BaseRoom":19}],23:[function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),l=t("../../Common"),u=a(l),_=t("../reveal/RevealRoom"),h=a(_),c=function(t){function e(t,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];o(this,e);var s=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,a,r));return s._monkeyCount=0,s}return r(e,t),s(e,[{key:"activate",value:function(){for(var t=this,e=function(e){var i=t._obstacles[e];if(TweenMax.to(i,.32,{delay:1,alpha:0,ease:Power1.easeInOut,onStart:function(){this._safeDirection===i.id&&(this._safeDirections[i.id]=!0)},onStartScope:t}),i.monkey){var a=P3.math.sign(i.monkey.x)*-1;i.monkey.scale=new PIXI.Point,TweenMax.to(i.monkey.scale,.34,{delay:1.2,x:0!==a?a:Math.random()<.5?-1:1,y:1,ease:Back.easeOut,easeParams:[2],onStart:function(){i.monkey.visible=!0},onStartScope:t})}},i=0;i<this._obstacles.length;++i)e(i);delay(function(){u["default"].audio.playSound("sfx_game_door_disappear_00"),u["default"].audio.playSound("sfx_witch_cackle_00")},1,this)}},{key:"_createObstacle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=u["default"].assets,a=220,o=new PIXI.Sprite(i.texture("obstacle_box"));o.id=t,o.x=Math.cos(e)*a,o.y=Math.sin(e)*a,o.anchor=new PIXI.Point(.5,.8),this.addChild(o),this._obstacles.push(o),t!==this._safeDirection&&(o.monkey=new PIXI.Sprite(1===++this._monkeyCount?i.texture("obstacle_monkey_001"):i.texture("obstacle_monkey_002")),o.monkey.x=Math.cos(e)*a,o.monkey.y=Math.sin(e)*a,o.monkey.anchor=new PIXI.Point(.5,.8),o.monkey.visible=!1,this.addChildAt(o.monkey,o.parent.getChildIndex(o)))}}]),e}(h["default"]);i["default"]=c},{"../../Common":4,"../reveal/RevealRoom":24}],24:[function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),l=function p(t,e,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,e);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:p(o,e,i)}if("value"in a)return a.value;var n=a.get;if(void 0!==n)return n.call(i)},u=t("../BaseRoom"),_=a(u),h=t("../../Common"),c=a(h),d=function(t){function e(t,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];o(this,e);var s=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,a,r));return s._obstacles=[],s._safeDirection=-1,s}return r(e,t),s(e,[{key:"init",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).call(this),this._setSafeDirection(),this._createObstacles()}},{key:"activate",value:function(){var t=this._getSafeObstacle();t&&TweenMax.to(t,.32,{delay:2,alpha:0,ease:Power1.easeInOut,onStart:function(){this._safeDirections[t.id]=!0,c["default"].audio.playSound("sfx_game_door_disappear_00")},onStartScope:this})}},{key:"_createObstacle",value:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,new PIXI.Sprite(PIXI.Texture.EMPTY));e.id=t,this.addChild(e),this._obstacles.push(e)}},{key:"_createObstacles",value:function(){this._directions[0]&&this._createObstacle(0,Math.PI),this._directions[1]&&this._createObstacle(1,.5*-Math.PI),this._directions[2]&&this._createObstacle(2,0),this._directions[3]&&this._createObstacle(3,.5*Math.PI)}},{key:"_setSafeDirection",value:function(){var t=[];this._directions[2]&&t.push(2),this._directions[3]&&t.push(3),this._directions[0]&&t.push(0),this._directions[1]&&t.push(1),this._safeDirection=t[Math.floor(Math.random()*t.length)],console.log("safe dir:",this._safeDirection)}},{key:"_getSafeObstacle",value:function(){for(var t=0;t<this._obstacles.length;++t){var e=this._obstacles[t];if(e.id===this._safeDirection)return e}return null}}]),e}(_["default"]);i["default"]=d},{"../../Common":4,"../BaseRoom":19}],25:[function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),l=t("../../Common"),u=a(l),_=t("../reveal/RevealRoom"),h=a(_),c=function(t){function e(t,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return o(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,a,r))}return r(e,t),s(e,[{key:"_createObstacle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=u["default"].assets,a=240,o=new PIXI.Sprite(i.texture(P3.utils.selectRandom(["obstacle_rock_001","obstacle_rock_002"])));o.id=t,o.x=Math.cos(e)*a,o.y=Math.sin(e)*a,o.anchor=new PIXI.Point(.5,.6),this.addChild(o),this._obstacles.push(o)}}]),e}(h["default"]);i["default"]=c},{"../../Common":4,"../reveal/RevealRoom":24}],26:[function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),l=t("../../Common"),u=a(l),_=t("../reveal/RevealRoom"),h=a(_),c=function(t){function e(t,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return o(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,a,r))}return r(e,t),s(e,[{key:"_createObstacle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=u["default"].assets,a=280,o=new PIXI.Sprite(i.texture("obstacle_wall"));o.id=t,o.x=Math.cos(e)*a,o.y=Math.sin(e)*a,o.rotation=e,o.anchor=new PIXI.Point(.5,.5),this.addChild(o),this._obstacles.push(o)}}]),e}(h["default"]);i["default"]=c},{"../../Common":4,"../reveal/RevealRoom":24}],27:[function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),l=function p(t,e,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,e);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:p(o,e,i)}if("value"in a)return a.value;var n=a.get;if(void 0!==n)return n.call(i)},u=t("../../Common"),_=a(u),h=t("../trap/TrapRoom"),c=a(h),d=function(t){function e(t,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return o(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,a,r))}return r(e,t),s(e,[{key:"update",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this,t);for(var i=0;i<this._obstacles.length;++i){var a=this._obstacles[i];a.emitter1&&a.emitter1.update(t),a.emitter2&&a.emitter2.update(t)}}},{key:"_createObstacle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=_["default"].assets,a=240,o=new P3.MovieClipSequence;o.addTextures([i.texture("obstacle_fire_001")]),o.addTextures([i.texture("obstacle_fire_off")],"off");var n=new P3.MovieClip(o);n.id=t,n.x=Math.cos(e)*a,n.y=Math.sin(e)*a,n.anchor=new PIXI.Point(.5,.62),this.addChild(n),this._obstacles.push(n);var r=new PIXI.Container;r.y=-20,n.addChild(r);var s=[i.texture("particle_fire_001"),i.texture("particle_fire_002"),i.texture("particle_fire_003"),i.texture("particle_fire_004"),i.texture("particle_fire_005"),i.texture("particle_fire_006"),i.texture("particle_fire_007")],l=i.json("particle_emitter_magic_fire_1");n.emitter1=new PIXI.particles.Emitter(r,s,l),n.emitter1.emit=!0,l=i.json("particle_emitter_magic_fire_2"),n.emitter2=new PIXI.particles.Emitter(r,s,l),n.emitter2.emit=!1,Math.random()<.5&&this._open(n)}},{key:"_open",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_open",this).call(this,t),t.emitter1.emit=!1,t.emitter2.emit=!1,_["default"].audio.playSound("sfx_game_fire_magic_appear_00")}},{key:"_close",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_close",this).call(this,t),t.emitter1.emit=!0,t.emitter2.emit=!0,_["default"].audio.playSound("sfx_game_door_disappear_00")}}]),e}(c["default"]);i["default"]=d},{"../../Common":4,"../trap/TrapRoom":28}],28:[function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),l=function c(t,e,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,e);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:c(o,e,i)}if("value"in a)return a.value;var n=a.get;if(void 0!==n)return n.call(i)},u=t("../BaseRoom"),_=a(u),h=function(t){function e(t,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];o(this,e);var s=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,a,r));return s._obstacles=[],s._createObstacles(),s}return r(e,t),s(e,[{key:"destroy",value:function(){for(var t=0;t<this._obstacles.length;++t){var i=this._obstacles[t];i.timer&&i.timer.kill()}l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"activate",value:function(){function t(e){e.isOpen=!e.isOpen,e.isOpen?this._open(e):this._close(e),e.timer=delayarg(t,1,[e],this)}for(var e=0;e<this._obstacles.length;++e){var i=this._obstacles[e];i.timer=delayarg(t,1,[i],this)}}},{key:"deactivate",value:function(){for(var t=0;t<this._obstacles.length;++t){var e=this._obstacles[t];e.timer&&e.timer.kill()}}},{key:"_createObstacle",value:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,new PIXI.Sprite(PIXI.Texture.EMPTY));e.id=t,this.addChild(e),this._obstacles.push(e)}},{key:"_createObstacles",value:function(){this._directions[0]&&this._createObstacle(0,Math.PI),this._directions[1]&&this._createObstacle(1,.5*-Math.PI),this._directions[2]&&this._createObstacle(2,0),this._directions[3]&&this._createObstacle(3,.5*Math.PI)}},{key:"_open",value:function(t){this._safeDirections[t.id]=!0,t.gotoAndStop("off")}},{key:"_close",value:function(t){this._safeDirections[t.id]=!1,t.gotoAndPlay("default")}}]),e}(_["default"]);i["default"]=h},{"../BaseRoom":19}],29:[function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),l=function p(t,e,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,e);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:p(o,e,i)}if("value"in a)return a.value;var n=a.get;if(void 0!==n)return n.call(i)},u=t("../../Common"),_=a(u),h=t("../trap/TrapRoom"),c=a(h),d=function(t){function e(t,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return o(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,a,r))}return r(e,t),s(e,[{key:"_createObstacle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=_["default"].assets,a=240,o=new P3.MovieClipSequence;o.addTextures([i.texture("obstacle_trapdoor_on")]),o.addTextures([i.texture("obstacle_trapdoor_off")],"off");var n=new P3.MovieClip(o);n.id=t,n.x=Math.cos(e)*a,n.y=Math.sin(e)*a,n.rotation=e,n.anchor=new PIXI.Point(.5,.5),this.addChild(n),this._obstacles.push(n),Math.random()<.5&&this._open(n)}},{key:"_open",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_open",this).call(this,t),_["default"].audio.playSound("sfx_game_trapdoor_open_00")}},{key:"_close",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_close",this).call(this,t),_["default"].audio.playSound("sfx_game_trapdoor_close_00")}}]),e}(c["default"]);i["default"]=d},{"../../Common":4,"../trap/TrapRoom":28}]},{},[18]);